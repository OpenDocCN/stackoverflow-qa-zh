# StackOverflow 问答 11981000-11981999

# c - Windows 上 32 位 _asm 代码到 64 位汇编代码

> ID：11981001
> 
> 赞同：0
> 
> 时间：2012-08-16T05:05:58.913
> 
> 标签：c

`_asm`当我在 32 位 WDK 中编译时，我有一个使用（内联汇编）它工作正常的汇编代码的驱动程序代码，但它抛出以下错误：

> “错误 C4235：使用了非标准扩展：此架构不支持‘_asm’关键字”

请转换以下`_asm`代码以进行 64 位编译。

```
_asm
    {
        mov     ebx, cr0 
        push    ebx 
        and     ebx, ~010000h 
        mov     cr0, ebx
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T05:50:33.560

使用微软的编译器内在函数，

```
#include <intrin.h>
__writecr0(__readcr0() & ~0x1000); 
```

这应该适用于 x86 和 x64（当然操作`CR0`只能在内核模式下完成）。

# android - 应用程序在 2.2 版中崩溃

> ID：11981005
> 
> 赞同：0
> 
> 时间：2012-08-16T05:06:25.297
> 
> 标签：android

我创建了一个在 Android 2.3+ 所有设备中完美运行的 android 应用程序。但是当我尝试在 2.2 中运行但它崩溃并在日志中给出错误时，

```
08-16 10:22:41.323: E/dalvikvm(442): Could not find class       'android.os.StrictMode$ThreadPolicy$Builder', referenced from method com.uks.android.mssga.activity.LoginActivity.onCreate
08-16 10:22:41.333: W/dalvikvm(442): VFY: unable to resolve new-instance 39 (Landroid/os/StrictMode$ThreadPolicy$Builder;) in Lcom/uks/android/mssga/activity/LoginActivity;
08-16 10:22:41.333: D/dalvikvm(442): VFY: replacing opcode 0x22 at 0x000a
08-16 10:22:41.333: D/dalvikvm(442): VFY: dead code 0x000c-009a in Lcom/uks/android/mssga/activity/LoginActivity;.onCreate (Landroid/os/Bundle;)V
08-16 10:22:41.423: D/dalvikvm(442): GC_EXTERNAL_ALLOC freed 744 objects / 59064 bytes in 68ms
08-16 10:22:41.483: D/AndroidRuntime(442): Shutting down VM
08-16 10:22:41.483: W/dalvikvm(442): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-16 10:22:41.483: E/AndroidRuntime(442): FATAL EXCEPTION: main
08-16 10:22:41.483: E/AndroidRuntime(442): java.lang.NoClassDefFoundError: android.os.StrictMode$ThreadPolicy$Builder
08-16 10:22:41.483: E/AndroidRuntime(442):  at com.uks.android.mssga.activity.LoginActivity.onCreate(LoginActivity.java:58)
08-16 10:22:41.483: E/AndroidRuntime(442):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-16 10:22:41.483: E/AndroidRuntime(442):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
08-16 10:22:41.483: E/AndroidRuntime(442):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-16 10:22:41.483: E/AndroidRuntime(442):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-16 10:22:41.483: E/AndroidRuntime(442):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-16 10:22:41.483: E/AndroidRuntime(442):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-16 10:22:41.483: E/AndroidRuntime(442):  at android.os.Looper.loop(Looper.java:123)
08-16 10:22:41.483: E/AndroidRuntime(442):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-16 10:22:41.483: E/AndroidRuntime(442):  at java.lang.reflect.Method.invokeNative(Native Method)
08-16 10:22:41.483: E/AndroidRuntime(442):  at java.lang.reflect.Method.invoke(Method.java:521)
08-16 10:22:41.483: E/AndroidRuntime(442):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-16 10:22:41.483: E/AndroidRuntime(442):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-16 10:22:41.483: E/AndroidRuntime(442):  at dalvik.system.NativeStart.main(Native Method)
08-16 10:22:44.503: I/Process(442): Sending signal. PID: 442 SIG: 9 
```

LoginActivity 的代码是，

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
            .permitAll().build();
    StrictMode.setThreadPolicy(policy);

            // Other stuff
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T05:44:27.983

[StrictMode.ThreadPolicy.Builder](http://developer.android.com/reference/android/os/StrictMode.ThreadPolicy.Builder.html)是在 Android 2.3（API 级别 9）中引入的，因此尝试在早于该版本的版本中调用它将会失败。

要阻止它在 2.2 和更早版本上崩溃，您可以选择：
* 删除 ThreadPolicy 代码（因为它是一个开发人员调试工具，可提供您正在做的坏事的警告）或
* 在使用之前使用反射来确定类是否存在它的

# ios - 是否可以使用 eventkit 更改 icalendar 中的默认警报时间？

> ID：11981006
> 
> 赞同：4
> 
> 时间：2012-08-16T05:06:25.697
> 
> 标签：ios, objective-c, eventkit

我使用以下代码使用 EVENTKIT 显示日历

```
 - (BOOL)createEvent:(NSString *)title 
                 at:(NSString *)location 
           starting:(NSDate *)startDate 
             ending:(NSDate *)endDate 
           withBody:(NSString *)body 

{

    eventStore = [[EKEventStore alloc] init];

    EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
    event.title     = title;
    event.location  = location;
    event.startDate = startDate;
    event.endDate   = endDate;
    event.notes     = body;

    [event setCalendar:[eventStore defaultCalendarForNewEvents]];

    EKEventEditViewController *eventViewController = [[EKEventEditViewController alloc] init];
    eventViewController.event = event;
    eventViewController.eventStore = eventStore;
    //eventViewController.editViewDelegate = self;

    [self presentModalViewController:eventViewController animated:YES];

    return TRUE;
} 
```

当我调用上面的函数时，会显示一个 eventkit 视图控制器。当我单击其中的警报按钮时，我将获得默认的警报时间，如下所示

![事件警报](../Images/c7c8017d42a963d08ed545fdb2a1d1f6.png)

我希望在 1 天前、2 天前到 30 天前以任何我希望的方式进行事件警报时间。

任何人都可以请告诉我如何做到这一点提前非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-02T03:12:26.230

您需要创建一个 EKAlarm，并将该警报添加到您的事件中。例如，对于 15 分钟前发生的警报：

```
 EKAlarm *alarm = [EKAlarm alarmWithRelativeOffset:-900]; // 15 min alarm
    [event addAlarm:alarm]; 
```

# html - 导航按钮大小在不同浏览器中的变化

> ID：11981007
> 
> 赞同：2
> 
> 时间：2012-08-16T05:06:32.040
> 
> 标签：html, css, border, gradient, nav

我正在尝试制作一个带有渐变以及顶部和底部边框的导航栏。在不同的浏览器上尝试会导致大小略有不同，这会将布局破坏 1px。有一个更好的方法吗？

这是HTML：

```
<head>
<!--[if gte IE 9]>
  <style type="text/css">
    .gradient {
       filter: none;
    }
  </style>
<![endif]-->
</head>
<body>
<header>
        <h1>Page Title</h1>
</header>
<div id="navbar" class="gradient">
    <ul>
        <li> <a href="#">Link 1</a> </li>
        <li> <a href="#">Link 2</a> </li>
        <li> <a href="#">Link 3</a> </li>
        <li> <a href="#">Link 4</a> </li>
        <li> <a href="#">Link 5</a> </li>
        <li> <a href="#">Link 6</a> </li>
        <li> <a href="#">Link 7</a> </li>
    </ul>
</div>
</body> 
```

和CSS：

```
html, button, input, select, textarea {
    font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; 
    font-weight: 300;
    color: #222;
}

body {
    margin: 0;
    font-size: 1em;
    line-height: 1.4;
}

header {
    background-color: #fcfcfc;
}

h1 {
    padding: 10px;
    width: 968px;
    margin: auto;
    font-family: "Times", "Times New Roman", "serif";
    font-style: italic;
}

#navbar {
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #999;
    border-top: 1px solid #999;
    background-color: #fff;
    height: 31px;

    font-size: 14px;
    -webkit-text-size-adjust: 14px;
    -ms-text-size-adjust: 14px;

    background: #ffffff; /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjQ3JSIgc3RvcC1jb2xvcj0iI2Y2ZjZmNiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlZGVkZWQiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
    background: -moz-linear-gradient(top,  #ffffff 0%, #f6f6f6 47%, #ededed 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(47%,#f6f6f6), color-stop(100%,#ededed)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #ffffff 0%,#f6f6f6 47%,#ededed 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #ffffff 0%,#f6f6f6 47%,#ededed 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #ffffff 0%,#f6f6f6 47%,#ededed 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #ffffff 0%,#f6f6f6 47%,#ededed 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#ededed',GradientType=0 ); /* IE6-8 */
}

ul {
    margin: 0 auto;
    padding: 0;
    width: 968px;
    list-style-type: none;
}

li {
    /* width: 138px;*/
    display: inline;
    padding: 6px 0;
    float: left;

    background: #ffffff; /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjQ3JSIgc3RvcC1jb2xvcj0iI2Y2ZjZmNiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlZGVkZWQiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
    background: -moz-linear-gradient(top,  #ffffff 0%, #f6f6f6 47%, #ededed 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(47%,#f6f6f6), color-stop(100%,#ededed)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #ffffff 0%,#f6f6f6 47%,#ededed 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #ffffff 0%,#f6f6f6 47%,#ededed 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #ffffff 0%,#f6f6f6 47%,#ededed 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #ffffff 0%,#f6f6f6 47%,#ededed 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#ededed',GradientType=0 ); /* IE6-8 */
}

li:hover {
    background: #ededed; /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2VkZWRlZCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUzJSIgc3RvcC1jb2xvcj0iI2Y2ZjZmNiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
    background: -moz-linear-gradient(top,  #ededed 0%, #f6f6f6 53%, #ffffff 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ededed), color-stop(53%,#f6f6f6), color-stop(100%,#ffffff)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #ededed 0%,#f6f6f6 53%,#ffffff 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #ededed 0%,#f6f6f6 53%,#ffffff 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #ededed 0%,#f6f6f6 53%,#ffffff 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #ededed 0%,#f6f6f6 53%,#ffffff 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ededed', endColorstr='#ffffff',GradientType=0 ); /* IE6-8 */
}

li a {
    color: #000;
    text-decoration: none;
    padding: 6px 32px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:27:11.603

老实说，欢迎来到 Web 开发的精彩世界。我建议为每个浏览器（或至少 IE）创建一个单独的 CSS 文件，这样您就可以调整 CSS 以符合您的愿景。

让您的导航栏在 Firefox/Chrome 中看起来不错，然后继续调整单独的样式表以与 IE 一起使用。

例如：

```
<!--[if IE]>
<link rel="stylesheet" type="text/css" href="ieisterrible.css" />
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:45:47.810

您必须了解**CSS 3 渐变在不同浏览器中的表现并不相同**。您可以使用**[Ultimate CSS Gradient Generator](http://www.colorzilla.com/gradient-editor/)**生成渐变，该生成器为跨浏览器支持生成渐变。即使这样，您也会注意到一些颜色和行为会根据浏览器而发生变化。在这种情况下，我*强烈*建议您这样做；

*   在 Photoshop 等图像编辑器中制作一个类似矩形的导航栏。
*   应用渐变后，您可以将宽度重新调整为`1 px`（高度不是问题）
*   然后，您可以使用 CSS 等将此图像应用到您的导航栏

    `background: #color_code gradient_image repeat-x`

*   由于图像只有 1px 宽，因此尺寸会更小，加载速度也会相对更快。

# time - 将毫秒转换为小时、分钟和秒

> ID：11981009
> 
> 赞同：0
> 
> 时间：2012-08-16T05:07:21.187
> 
> 标签：time, format, converter

是的，我知道还有其他人问过同样的问题，但他们的解决方案在这种情况下不起作用。

这是我的问题。

我正在对大量整数求和。事实上，太多以至于 SUM 函数不起作用。

所以我这样做：

> Sum(cast(LotsofIntegers as decimal)) 这给了我 3472201304

我想在 hh:mm:ss 中查看这个。问题是 Dateadd 函数不会接受这么大的数字。否则我只能这样做

> CONVERT(VARCHAR,DATEADD(ms,Sum(cast(LotsofIntegers as decimal)),0),114)

这是常见的解决方案。

我宁愿不必在一大堆部门中以非常艰难的方式做到这一点。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:44:49.513

试试这个（MySQL 语法；转换为您选择的 RDBMS）：

```
SELECT CONCAT( 
    CAST((@hours := FLOOR(SUM(msec)/3600000)) AS CHAR), 
    ":", 
    CAST((@minutes := FLOOR((SUM(msec) - @hours * 3600000) / 60000)) AS CHAR), 
    ":", 
    CAST((@seconds := FLOOR((SUM(msec) - @hours * 3600000 - @minutes * 60000) / 1000)) AS CHAR)
) FROM my_table WHERE 1; 
```

在 5,000,001 行的总和为 25,000,706,152（在 64 位算术下）的表上，我得到了`6944:38:26`.

问题似乎是最常见的 RDBMS 的日期差异类（包括您似乎正在使用的 MSSQL）`2^32`由于 4 字节的内部表示，只能支持毫秒级的差异。这是所讨论的 RDBMS 的一个限制；显然，一次处理超过 40 亿毫秒的速度超出了预期的用例。所以不幸的是，除非发布补丁来扩展内置功能（或者存在我没有听说过的升级功能！），否则很长的路要走。

# itext - 如何在 Itext Pdf 单元格中仅显示右侧和底部的单元格边框

> ID：11981014
> 
> 赞同：11
> 
> 时间：2012-08-16T05:07:50.203
> 
> 标签：itext

当我尝试 `cell.setBorder(Rectangle.BOTTOM);`

`cell.setBorder(Rectangle.RIGHT);`

它与底部边框重叠，仅设置所选单元格的右边框

同样的事情以相反的方式发生

`cell.setBorder(Rectangle.BOTTOM);`

`cell.setBorder(Rectangle.RIGHT);`

是否可以为选定的单元格同时设置单元格的底部和右侧边框？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-24T15:27:27.403

在 iTextSharp 我使用过：

```
cell.Border = Rectangle.BOTTOM_BORDER | Rectangle.RIGHT_BORDER; 
```

你可以试试：

```
cell.setBorder(Rectangle.BOTTOM | Rectangle.RIGHT); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-29T11:47:52.070

是的，有可能，Rectangle.BOTTOM=2,Rectangle.TOP=1,Rectangle.RIGHT=8,Rectangle.LEFT=4 所以对于右下角，试试 cell.setBorder(10);，它适用于我 itext1.3

# c# - 无法使用 ADO.Net 连接到远程 Oracle 服务器 | 连接字符串错误？

> ID：11981015
> 
> 赞同：0
> 
> 时间：2012-08-16T05:07:53.257
> 
> 标签：c#, .net, ado.net, system.data.oracleclient

我一直在尝试使用以下连接字符串连接到 Oracle 服务器：

```
 OracleConnection conn = new OracleConnection();
            conn.ConnectionString = @"Data Source=
(DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 10.206.0.23)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SID = ORCLWEX3)
    )
 )
;User Id= RAMNIVAS_CI;Password= RAMNIVAS_CI;Persist Security Info=True;";
            conn.Open(); 
```

但得到以下错误：

```
System.Data.OracleClient requires Oracle client software version 8.1.7 or greater. 
```

虽然我已经安装了。

我已经能够使用 Oracle Sql Developer 连接到该服务器。设置是：
![Oracle SQL 开发人员设置](../Images/205b4916af9d2389052dca4f4cf176b3.png) TNSNAMES 文件是这样的：

```
# tnsnames.ora Network Configuration File: F:\app1\product\11.1.0\db_1\network\admin\tnsnames.ora
# Generated by Oracle configuration tools.

ORCLWEX1 =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = oracle-db.newvisionsoftware.com)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SID = ORCLWEX1)
    )
  )

ORCLWEX2 =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = oracle-db2.newvisionsoftware.com)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SID = ORCLWEX2)
    )
  )

ORCLWEX3 =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 10.206.0.23)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SID = ORCLWEX3)
    )
  ) 
```

我被告知要使用最后一个：ORACLEWEX3。
我知道连接字符串中存在一些问题，如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:48:50.383

如果您使用用户名/密码，我认为您不需要使用“持久安全信息”。查看： [http](http://connectionstrings.com/oracle) ://connectionstrings.com/oracle 以获取更多示例。

此外，您可以尝试使用 Oracle 自己的 .net 提供程序： [http](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html) ://www.oracle.com/technetwork/topics/dotnet/index-085163.html 看看这是否更适合您。

# java - 如何在 HP-UX 上设置 Java 程序内存限制（-Xmx 不起作用！）？

> ID：11981021
> 
> 赞同：2
> 
> 时间：2012-08-16T05:08:28.360
> 
> 标签：java, memory, hp-ux

在我们的场景中，我们启动了 20+ 个 java 进程来处理我们的业务，我们发现每个进程都吃掉 500M+ 内存，所以我们总共消耗了服务器上的几个 G 内存，客户抱怨他们的服务器启动我们的进程后变得很慢。

我试了一下，即使是HP-UX中最简单的“HelloWorld”程序，它也吃掉了500M内存！如果我为它设置-Xmx，它似乎不能减少到小于320M。实际上，我们希望我们的每个进程只消耗 64M 内存。

那么，任何人都知道如何在 HP-UX (java6) 上将 Java 程序的内存限制设置为 64M-128M ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:19:31.117

[看起来很相关，我会说。讨论 HPUX 上的内存管理和 Java](http://bizsupport2.austin.hp.com/bc/docs/support/SupportManual/c02645664/c02645664.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:22:59.543

您如何测量 java 进程正在使用的内存量？top/process-lists 并不总是告诉您您的想法。可能值得运行 jvisualvm（java6 jdk 的一部分）来查看内存故障是什么。如果您正在运行一个简单的 hello world 程序，那么如果它确实使用了这么多内存，就会出现问题。

# javascript - 两次调用一个函数

> ID：11981026
> 
> 赞同：0
> 
> 时间：2012-08-16T05:08:53.987
> 
> 标签：javascript

我试图调用一个函数两次，但是使用当前代码，我跳过了 getPoints() 函数，并调用了 setInterval 中的 getPoints() 函数。我试图让它调用 getPoints() 函数，然后调用 setInterval 中的那个。

```
var background;
// background page
background = chrome.extension.getBackgroundPage();
// get totals
getPoints(background.localStorage.points);
// update every 30 seconds
setInterval(function() {
  console.log("func");
  getPoints(background.localStorage.points);
}, 30000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:15:23.347

试试这个：

```
window.onload = function() {
    var background;
    // background page
    background = chrome.extension.getBackgroundPage();
    // get totals
    getPoints(background.localStorage.points);
    // update every 30 seconds
    setInterval(function () {
        console.log("func");
        getPoints(background.localStorage.points);
    }, 30000);
}; 
```

# git - 如何在变基之前插入提交？

> ID：11981028
> 
> 赞同：2
> 
> 时间：2012-08-16T05:09:41.667
> 
> 标签：git, git-branch, git-rebase, git-commit

我的历史现在看起来有点像这样：

```
 origin/master
                        |
A --- B --- C --- D --- E
                   \
                     -- F
                        |
                     master 
```

我想在 E 之后重新调整我的更改（提交 F），但是在提交 EI 中有一些相当大的问题想先纠正。基本上，这就是我希望能够做到的：

```
 origin/master
                        |
A --- B --- C --- D --- E --- G
                   \
                     -- F
                        |
                     master 
```

*然后*我想在最后重新定义 F ，以获得最终的简单结果：

```
 origin/master
                                    |
A --- B --- C --- D --- E --- G --- F 
```

当我在主干上工作时，如何“搁置”提交 F，然后在以后重新设置它？我会假设它会涉及`git branch`，但我不知道足够的 git 来知道要发出的命令序列。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:16:49.973

创建一个指向您的`F`提交的分支：

```
git branch tmp 
```

从分支中删除`F`提交：`master`

```
git reset --hard HEAD~1 
```

进行修复并提交它们：

```
git commit 
```

`F`在当前分支之上添加提交`master`（这可能会导致冲突，因此请解决它们）：

```
git cherry-pick tmp 
```

删除临时分支：

```
git branch -d tmp 
```

所以你真的不需要`git rebase`在这里，它是为了更复杂的事情，或者至少不是为了处理一次提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:15:36.810

我假设你有一个单独的 F 分支，如果没有 - 我错过了，你应该创建它。
我建议你不要在提交 G 的 master 上工作，但也有一个单独的分支，
请为它创建一个单独的分支。
1.然后，尝试针对该分支重新设置包含 f 的分支（也许使用 git rebase --onto，
尽管我认为还有另一种方法）
另一种方法是执行 git format-patch origin/ master 在包含 F 的分支上，然后在包含 G 的分支上应用这个补丁。
你当然可能会遇到冲突。
根据我的经验 - 选项 1 更好，由于某种原因， git apply 和 git am 比对另一个分支执行变基更“脆弱”（对不起这个坏词）。

# android - phonegap 插件 loadUrl 来自执行函数

> ID：11981030
> 
> 赞同：0
> 
> 时间：2012-08-16T05:10:02.167
> 
> 标签：android, cordova, phonegap-plugins

当我的 js 代码中触发某个事件时，我试图实现一个错误屏幕。由于错误页面是本地的，因此我尝试设置`window.location.href = 'file:///android_assets/www/error.html'`会引发错误，指示无法加载本地资源。

所以我试图在android中创建一个插件并执行以下操作：

```
 public PluginResult execute(final String action, final JSONArray data, final String callBackId) {
//      final DroidGap currentCtx = (DroidGap) ctx.getContext();

        final Context currentCtx = cordova.getActivity();
        MainActivity ma = (MainActivity) currentCtx;
        ma.loadUrl("file:///android_assets/www/error.html");

        PluginResult result = null;
        return result;
    } 
```

问题是此代码不加载 URL。我不确定这是否是正确的调用方式。请问有什么见解吗？

我看到如下错误： `08-16 01:08:48.974: I/Web Console(730): JSCallback Error: Request failed. at file:///android_asset/www/cordova-2.0.0.js:3698`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:49:48.853

当我在 MainActivity 中添加公共 loadUrl 时，它对我有用

```
//MainActivity
public void loadUrl() {
    String url = "http://google.com";
    super.loadUrl(url, 30000);
} 
```

……

```
//Plugin
public PluginResult execute(final String action, final JSONArray data, final String callBackId) {

    MainActivity ma = (MainActivity) context;
    ma.loadUrl();

    PluginResult result = null;
    return result;
} 
```

我正在使用 PhoneGap 1.8.1，但我认为在这种情况下并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:16:58.547

[在我使用“cordova.getActivity()”更新“上下文”后， guya](https://stackoverflow.com/users/275333/guya)的答案对我有用。

（注意：在这种情况下，我只有一项活动可以“获取”）

我正在使用科尔多瓦 2.1。

```
 public PluginResult execute(String action, JSONArray args, String callbackId) {
        if (action.equals(ACTION_GO_URL)) {
            MainActivity ma = (MainActivity) cordova.getActivity();
            ma.mainLoadUrl();
            return new PluginResult(Status.OK);
        } else {
            return new PluginResult(PluginResult.Status.INVALID_ACTION);
        }
    } 
```

不要忘记在插件上添加 MainActivity 的导入。

```
import com.YOUR_NAMESPACE.MainActivity; 
```

并将公共方法添加到您的 MainActivity。

```
public void mainLoadUrl() {
    String url = "http://www.google.com";
    super.loadUrl(url);
} 
```

# bash - Bash 进程替换：`echo >(ls)` 有什么作用？

> ID：11981035
> 
> 赞同：3
> 
> 时间：2012-08-16T05:10:37.423
> 
> 标签：bash, echo, ls, process-substitution

以下是 Bash 进程替换的示例：

```
zjhui@ubuntu:~/Desktop$ echo >(ls)
/dev/fd/63
zjhui@ubuntu:~/Desktop$ abs-guide.pdf 
```

然后我得到一个等待命令的光标。

`/dev/fd/63`不存在。我认为发生的事情是：

1.  输出使用的文件名`/dev/fd`
2.  执行`ls`in`>(ls)`

这是正确的吗？为什么会有光标等待输入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T05:22:03.117

当您执行 时`echo >(ls)`，bash 将其替换为`echo /dev/fd/63`并`ls`以`/dev/fd/63`连接到其标准输入的方式运行。`echo`不使用其参数作为文件名，`ls`也不使用标准输入。Bash 将编写您的标准提示符，但输出`ls`紧随其后。您可以在此处键入任何 Bash 命令，但您只是从提示中丢失了视觉提示，该提示位于屏幕上方。

`echo >(ls)`不是可能永远有用的东西。

# php - MySql 数据库真的有一些限制吗？

> ID：11981036
> 
> 赞同：1
> 
> 时间：2012-08-16T05:10:40.853
> 
> 标签：php, mysql, record, solution

MySql 数据库是否确实存在一些限制，当一个表填充超过 200,000 条记录时会导致问题？问题是否属实？如果是的话，解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T05:20:38.933

正如 alfasin 所说，没有 200,000 的固定限制。

但是，基于可用磁盘空间和最大单个文件大小存在限制；两者都取决于您使用的 MySQL 存储引擎（单个文件/多个文件）以及行大小乘以行数。你需要根据你的操作系统计算出限制——不过，你真的，真的需要一个巨大的应用程序来达到这些限制，如果你做到了，你还有其他事情要担心:)

如果您没有正确索引表（或索引过多），您也会受到性能限制；同样，没有固定限制，您只会注意到某些查询的性能下降。

您可以使用 MAX ROWS 强制表具有限制：这是一个指导存储引擎如何优化自身的指南。

但是出于分析的目的，您可以将数百万行放在一个表中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T05:12:38.157

答案是不。它没有 200K 的限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T05:20:53.307

MySQL 中没有这样的限制。
有关更多信息，请参阅：[MySQL 限制和限制](http://www.google.co.in/url?sa=t&rct=j&q=mysql%20limitations%20&source=web&cd=1&ved=0CE0QFjAA&url=http://downloads.mysql.com/docs/mysql-reslimits-excerpt-5.1-en.pdf&ei=AYEsUMAxiPmtB5LMgZAJ&usg=AFQjCNEyloMBMQFL2GNAUazQDJJJR1PgRw&cad=rja)
以及[MySQL 限制](http://searchsystemschannel.techtarget.com/feature/MySQL-limitations)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T05:19:49.423

MySQL 数据库的有效最大表大小通常由操作系统对文件大小的限制决定，而不是由 MySQL 内部限制决定。

参考这个[链接](https://stackoverflow.com/questions/48633/maximum-table-size-for-a-mysql-database)

# sqlite - 带有 Sqlite 的 SQLData 抛出尚未实现的异常？

> ID：11981043
> 
> 赞同：1
> 
> 时间：2012-08-16T05:11:44.233
> 
> 标签：sqlite, exception, jdbc, user-defined-types

我正在尝试将 SQLData 与 Sqlite 数据库一起使用，但在这里出现异常：

```
 private SQLDataReaderTest() {
    try {
        Class.forName("org.sqlite.JDBC");
        connection = DriverManager.getConnection("jdbc:sqlite:ressources/data/TestDB.rdb");

        java.util.Map map = connection.getTypeMap();
        map.put("TestDB.customer", Class.forName("SQLDataTest"));
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (SQLException e) {
        e.printStackTrace();
    }
} 
```

测试提出：

```
java.sql.SQLException: not yet implemented
at org.sqlite.Conn.getTypeMap(Conn.java:297)
at de.devision.model.SQLDataReaderTest.<init>(SQLDataReaderTest.java:20)
at de.devision.model.SQLDataReaderTest.getInstance(SQLDataReaderTest.java:31) 
```

第 20 行是 connection.getTypeMap() 部分。连接等工作正常，因为没有 UDT 一切正常。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:43:50.127

异常指出 sqlite 驱动程序没有实现此功能 ( `getTypeMap()`)。您没有做错任何事情，您只是在使用（尚）不支持此功能的数据库和/或驱动程序。

# distance - 使用 pgRouting 计算多个源和目标之间的距离

> ID：11981050
> 
> 赞同：0
> 
> 时间：2012-08-16T05:13:43.627
> 
> 标签：distance, shortest-path

我正在使用 Postgres/PostGIS/pgRouting 为我正在做的分析准备数据集。我需要准备的数据集中的一个字段是 100,000 个家庭的数据集（点数据）和几十个活动中心的数据集（也是点数据）之间的最短道路距离。为此，我创建了一个节点和网络数据集。我还更新了我的家庭和活动中心数据集，其中的列包含最近节点的 id 值。

到目前为止，我已经能够使用driving_distance() 函数来计算从中央商务区（CBD）到每个家庭的道路距离，但我希望一次性为所有中心执行此操作，而不必制作单独的距离数据集为每个中心。

更重要的是，我最终将不得不对每个家庭和最近的火车站之间的道路距离做同样的事情。

有解决方案吗？

非常感谢，

罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:52:19.710

我不知道我是否解决了您的问题。如果是这样

*   你有 10 万个家庭
*   其他兴趣点（活动中心、火车站等）数量较少（可能为 1k）
*   目的是在不进行过多运行时间计算的情况下显示从/到其中一个家庭到/从兴趣点的最短路径。
*   我进一步假设您拥有的道路数据是定向的，即可能存在单向道路。
*   这些点变化不会太频繁，

那么你可以尝试这样的方法：

1.  准备一个以所有 100+1k 个节点和道路为边的有向图。道路将从一个节点指向另一个节点，其权重与它们的距离成正比。
2.  准备一个相同的反向图 - 即只需切换 from 和 to 节点，保持相同的权重。
3.  对于每个兴趣点 P，做一个 Dijkstra，它将返回 100+1k 个点的完整前驱图（最短路径树作为数组），它给出了从 P 到所有其他点的最短距离。这是一个包含 100+1k 个值的整数数组。
4.  在反向图上重复此操作。这会给你一个前身地图，它给出每个兴趣点 P 与所有其他点的最短距离。
5.  现在你有 2 * 1k 个数组，每个数组有 100+1k 个值。对于每个数组，您还知道点 P 在其中的位置。

## 运行时计算：

*   要计算从 P 到任何其他点的最短路径，请使用第一个数组。转到数组上目标点的位置，看看它的对应值是什么，然后转到数组上的那个元素，重复直到到达 P 的位置。

> *示例*：如果 P 位于第 7 位并且您的终点位于第 12 位，则转到数组元素 12 ，读取其值 array_val[12]=10，现在使用 10 ，例如 array_val[10]=7 ，那么您的路径为 7 -10-12。

*   同样，如果您对第二个数组执行此操作，则最短路径将是相反顺序的路径，即 12-10-7。

## 观察：

1.  以上两个步骤在运行时（毫秒）执行起来要快得多。对于这些，您在运行时不需要 Dijkstra，一个 .
2.  2 * 1k 最短路径树的第一次计算总共需要大约 2*1000*0.8 =1600 秒（在具有 4 GB RAM 和 i5 处理器的 linux 笔记本电脑上）。
3.  您可能想直接使用 boost-graph 来执行此操作，但是..

## 使用 pgrouting：

如果您想使用 pgrouting，您可能需要修改 boost_wrapper.cpp 函数 boost_dijkstra 以返回完整的前任地图，而不是仅返回一个最短路径（将其复制到 path_vect）。这将使 pgrouting dijkstra 始终返回最短路径树，而不仅仅是最短路径。我还没有对此进行测试（请注意，pgrouting 在内部会进行索引重新排序，但此方法应该会返回您的原始索引 ID）。

# spring-mvc - Spring MVC 多个@RequestMappings

> ID：11981051
> 
> 赞同：1
> 
> 时间：2012-08-16T05:13:54.157
> 
> 标签：spring-mvc

我正在使用 UrlBasedViewResolver。我的要求是两个不同的 URl 与同一个控制器对话，并且它们应该根据 URL 转到两个不同的页面，即 page1 或 page2。这两个页面具有相同的模型对象，除了一些小的 UI 更改外，它们几乎相同。如何在 Spring MVC 中巧妙地实现这一点。

```
@RequestMapping(value = {"/page1","/page2"}, method=RequestMethod.GET)
public String displayPage(ModelMap map){
    // return to Page1 or Page2 accordingly wherever it came from  
}

@RequestMapping(value = {"/page1","/page2"}, method=RequestMethod.POST)
public ModelAndView submitPage(@ModelAttribute("model") Model model){
    return new ModelAndView("page1 or page2", "command", model); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:27:22.853

一种选择：

```
@RequestMapping(value = {"/page1"}, method=RequestMethod.GET)
public String displayPage1(ModelMap map){
   displayPageCommon(map);
   return "Page1";
}

@RequestMapping(value = {"/page2"}, method=RequestMethod.GET)
public String displayPage2(ModelMap map){
   displayPageCommon(map);
   return "Page2";
}

private void displayPageCommon(ModelMap map){
   //shared code
} 
```

其他：

```
@RequestMapping(value = {"/{pageName}"}, method=RequestMethod.GET)
public String displayPage(@PathVariable String pageName, ModelMap map){
   //shared code
   return pageName;
} 
```

第二个选项可能有一些问题，具体取决于您的控制器映射，以及由于尝试基于传入 URL 返回视图而导致的一些潜在安全问题。

# asp.net-mvc-3 - 在选择列表下拉列表中动态显示所选值

> ID：11981052
> 
> 赞同：2
> 
> 时间：2012-08-16T05:14:05.030
> 
> 标签：asp.net-mvc-3, jquery, razor, drop-down-menu

我使用 Ajax 请求和选择框在我的应用程序中为国家/地区城市创建了下拉列表的级联。我的应用程序收集有关用户的信息，即个人信息等。在我的应用程序中，有一个编辑输入字段的选项。单击编辑按钮后，个人信息页面将填充以前输入的数据。现在我需要帮助来显示选定的值，即用户在我的选择框下拉列表中选择了哪个国家、州和城市。请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:37:31.973

您应该为每个选择框存储旧值并在从 ajax 加载值后恢复它

```
var old_val = $('#state').val();
$('#state').html('<here option string from ajax>');
$('#state').val(old_val); 
```

现在，当您显示用于编辑的下拉列表时，您可以从数据库中获取选定的值并为所有三个下拉列表生成一个选项标签

加载后，您可以触发相同的ajax链，并且值不会丢失

# android - 如何在多线程中处理服务

> ID：11981053
> 
> 赞同：1
> 
> 时间：2012-08-16T05:14:05.857
> 
> 标签：android, android-service

我有一个服务可以被其他活动和线程调用，一些接收者等待它的回调。我知道服务只是我的应用程序中的一个实例。我想在需要调用时运行该服务，而不是一直挂在后台。如何安全地启动/停止服务？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T05:26:43.557

使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)。

它非常符合您的需求。它会在您想要它的时候开始......并在它自动完成任务时停止。所以立即释放它的内存。另一个很大的优势是它在自己的线程中运行，因此您的主线程/UI 永远不会停止。

如果您决定这回答了您的问题，请将其标记为“已接受”。这将提高您和我的声誉分数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T05:33:32.553

主页.java

```
package com.pack.service_tost_handler;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.Menu;
import android.widget.Toast;

public class MainPage extends Activity {
    static Mhandler  mhandler;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_page);
        mhandler=new Mhandler();

    }
    @Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();
        Intent i = new Intent(MainPage.this, ServicePage.class);
        Log.i("log", "i m create in main page");
        startService(i);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main_page, menu);

        return true;
    }

    class Mhandler extends Handler
    {

        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);

            if(msg.what==111)
            {

                Toast.makeText(MainPage.this, "welcome to "+ msg.obj.toString(), Toast.LENGTH_SHORT).show();
            }
        }

    }
} 
```

服务页面.java

```
package com.pack.service_tost_handler;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.os.Message;
import android.util.Log;

public class ServicePage extends Service implements Runnable
{
    String[] ary;
    @Override
    public void onCreate() 
    {
        Log.i("log", "create");
        super.onCreate();
        ary= new String[] { "Android", "iPhone", "WindowsMobile",
                "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
                "Linux", "OS/2" };
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Thread t1 = new Thread(this);
        t1.start();
        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;    }

    @Override
    public void run() {
        for(int i=0;i<ary.length;i++)
        {
            try
            {
                synchronized (this) {
                    this.wait(5000);    
                }
            }
            catch (Exception e) {
                Log.i("log", "Exception");
            }
            Message msg= MainPage.mhandler.obtainMessage(111);
            msg.obj=ary[i];
            MainPage.mhandler.sendMessage(msg);
        }
    }

} 
```

# mfc - 运行 exe 并将其传递给访问文件 C++

> ID：11981055
> 
> 赞同：0
> 
> 时间：2012-08-16T05:14:20.180
> 
> 标签：mfc, exe, visual-c++-2008

我需要打开一个 exe 文件（现有程序的）并在该启动的程序中加载一个访问文件。我已经使用 ShellExecute 加载了 exe，但我无法加载访问文件。我有什么可能的方法来做到这一点？

谢谢。

# windows - 如何在 Windows 7 x64 (node.js) 上安装 socket.io

> ID：11981057
> 
> 赞同：3
> 
> 时间：2012-08-16T05:14:30.940
> 
> 标签：windows, node.js, socket.io, nowjs-sockets

在 Windows 7 Home Premium 64 位上运行

下载：

*   node.js (0.8.7-x64) 作为来自官方网站的 windows msi
*   [来自http://gnuwin32.sourceforge.net/packages/make.htm](http://gnuwin32.sourceforge.net/packages/make.htm)的 make-3.81 （完整包，源除外）
*   Microsoft Visual Studio 2012 网络版

然后按照[http://blog.nowjs.com/running-nowjs-natively-on-windows](http://blog.nowjs.com/running-nowjs-natively-on-windows)上的步骤进行操作，这意味着：

*   安装 Microsoft Visual C++ 运行时（我有 x64 版本）
*   从 github.com/Flotype/now/zipball/windows 获取 now.js 的“fixed-for-windows”版本

一切就绪后，运行任何需要“now”模块的示例都会导致对 socket.io 模块的请求。

运行“npm install socket.io -g”输出：

```
C:\Windows\System32>npm install socket.io -g
npm http GET https://registry.npmjs.org/socket.io
npm http 304 https://registry.npmjs.org/socket.io
npm http GET https://registry.npmjs.org/policyfile/0.0.4
npm http GET https://registry.npmjs.org/socket.io-client/0.9.10
npm http GET https://registry.npmjs.org/redis/0.7.2
npm http 304 https://registry.npmjs.org/policyfile/0.0.4
npm http 304 https://registry.npmjs.org/socket.io-client/0.9.10
npm http 304 https://registry.npmjs.org/redis/0.7.2
npm http GET https://registry.npmjs.org/hiredis
npm http GET https://registry.npmjs.org/uglify-js/1.2.5
npm http GET https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http GET https://registry.npmjs.org/ws
npm http GET https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http 304 https://registry.npmjs.org/hiredis
npm WARN package.json hiredis@0.1.14 No README.md file found!

> hiredis@0.1.14 preinstall C:\Program Files\nodejs\node_modules\socket.io\node_
modules\redis\node_modules\hiredis
> make || gmake

cd deps/hiredis && make static
process_begin: CreateProcess(NULL, sh -c "type cc >/dev/null 2>/dev/null && echo
 cc || echo gcc", ...) failed.
process_begin: CreateProcess(NULL, sh -c "uname -s 2>/dev/null || echo not", ...
) failed.
make[1]: Entering directory `C:/Program Files/nodejs/node_modules/socket.io/node
_modules/redis/node_modules/hiredis/deps/hiredis'
std=c99 -pedantic -c -O3 -fPIC  -Wall -W -Wstrict-prototypes -Wwrite-strings -g
-ggdb net.c
'std' não é reconhecido como um comando interno
ou externo, um programa operável ou um arquivo em lotes.
make[1]: [net.o] Error 1 (ignored)
std=c99 -pedantic -c -O3 -fPIC  -Wall -W -Wstrict-prototypes -Wwrite-strings -g
-ggdb hiredis.c
'std' não é reconhecido como um comando interno
ou externo, um programa operável ou um arquivo em lotes.
make[1]: [hiredis.o] Error 1 (ignored)
std=c99 -pedantic -c -O3 -fPIC  -Wall -W -Wstrict-prototypes -Wwrite-strings -g
-ggdb sds.c
'std' não é reconhecido como um comando interno
ou externo, um programa operável ou um arquivo em lotes.
make[1]: [sds.o] Error 1 (ignored)
std=c99 -pedantic -c -O3 -fPIC  -Wall -W -Wstrict-prototypes -Wwrite-strings -g
-ggdb async.c
'std' não é reconhecido como um comando interno
ou externo, um programa operável ou um arquivo em lotes.
make[1]: [async.o] Error 1 (ignored)
ar rcs libhiredis.a net.o hiredis.o sds.o async.o
process_begin: CreateProcess(NULL, ar rcs libhiredis.a net.o hiredis.o sds.o asy
nc.o, ...) failed.
make (e=2): O sistema não pode encontrar o arquivo especificado.
make[1]: *** [libhiredis.a] Error 2
make[1]: Leaving directory `C:/Program Files/nodejs/node_modules/socket.io/node_
modules/redis/node_modules/hiredis/deps/hiredis'
make: *** [all] Error 2
'gmake' não é reconhecido como um comando interno
ou externo, um programa operável ou um arquivo em lotes.
npm WARN optional dep failed, continuing hiredis@0.1.14
npm http 304 https://registry.npmjs.org/uglify-js/1.2.5
npm http 304 https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http 304 https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http 304 https://registry.npmjs.org/ws
npm http GET https://registry.npmjs.org/zeparser/0.0.5
npm http GET https://registry.npmjs.org/commander
npm http GET https://registry.npmjs.org/tinycolor
npm http GET https://registry.npmjs.org/options
npm http 304 https://registry.npmjs.org/zeparser/0.0.5
npm http 304 https://registry.npmjs.org/commander
npm http 304 https://registry.npmjs.org/tinycolor
npm http 304 https://registry.npmjs.org/options

> ws@0.4.21 install C:\Program Files\nodejs\node_modules\socket.io\node_modules\
socket.io-client\node_modules\ws
> node install.js

[ws v0.4.21] Attempting to compile blazing fast native extensions.
[ws v0.4.21] Native code compile failed (but the module will still work):
[ws v0.4.21] The native extensions are faster, but not required.
[ws v0.4.21] On Windows, native extensions require Visual Studio and Python.
[ws v0.4.21] On Unix, native extensions require Python, make and a C++ compiler.

[ws v0.4.21] Start npm with --ws:verbose to show compilation output (if any).
socket.io@0.9.10 C:\Program Files\nodejs\node_modules\socket.io
+-- policyfile@0.0.4
+-- redis@0.7.2
+-- socket.io-client@0.9.10 (xmlhttprequest@1.4.2, uglify-js@1.2.5, active-x-obf
uscator@0.0.1, ws@0.4.21) 
```

我错过了什么吗？还尝试了 node.js 的 0.8.6-x64 和 0.8.5-x64 版本，两者都打包为 msi。

此外，将 now.js 的固定 Windows 版本直接放在 helloworld_server.js 示例中的 node_modules 文件夹中并运行“node helloworld_server.js”会产生：

```
[Error: no errorc:\xampp\htdocs\node-tcg\node_modules\now\bin\proxy.node]
Error: no errorc:\xampp\htdocs\node-tcg\node_modules\now\bin\proxy.node
    at Object.Module._extensions..node (module.js:485:11)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (c:\xampp\htdocs\node-tcg\node_modules\now\lib\proxy.j
s:10:13)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T22:58:59.300

在谷歌上找到这个的任何人：我正在运行 Windows 8 x64，并且由于编译器问题，尝试将 socket.io 和其他扩展安装到 node.js 中时遇到了很多问题。

我尝试下载/安装 GNU Make、Visual Studio Express、Visual Studio Ultimate（试用版）：基本上所有推荐的东西。还是没有骰子。Socket.io 不能工作。

对我来说最简单的解决方案就是在虚拟机中运行 linux 并从中使用节点。- 下载 Lubuntu Linux 的 x86 版本（非常喜欢 windows）： http: [//lubuntu.net/](http://lubuntu.net/) - 在 VirtualBox 中安装 Linux：[https](https://www.virtualbox.org/) ://www.virtualbox.org/ - 在 VirtualBox 的网络设置中使用“桥接适配器”卢本图。这将允许您从 Windows 机器访问节点服务器。- 在 Lubuntu 上安装节点和其他任何你想要的东西。Node 最初是为 linux 设计的，所以一切都完美无缺。- 带有一些附加功能的最终安装只占用了我的硬盘驱动器上的 4GB。一点也不差！

# wpf - 单元格编辑时 WPF Datagrid 更新

> ID：11981060
> 
> 赞同：0
> 
> 时间：2012-08-16T05:15:12.130
> 
> 标签：wpf, wpfdatagrid

WPF Datagrid 在单元格编辑时更新..我将 Datagrid 的 ItemsSource 作为列表提供....当我编辑数据网格时，它会自动反映在列表中..我不想自动更新它，我有一个保存按钮单击它应该保存列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:27:33.353

在绑定中将 UpdateSourceTrigger 设置为显式

```
{Binding Path=someProp, UpdateSourceTrigger=Explicit} 
```

# silverlight - Silverlight 用户控制事件和 MVVM

> ID：11981064
> 
> 赞同：0
> 
> 时间：2012-08-16T05:15:49.870
> 
> 标签：silverlight, windows-phone-7, design-patterns, mvvm, user-controls

对 MVVM 和用户控制事件有点困惑。

我认为我有一个用户控件。它有两种模式，即阅读和编辑。（文本模式）

```
<Grid
        x:Name="LayoutRoot"
        Background="Transparent">

                <controls:MyUserControl 
                             Mode="{Binding Path=TextMode,Mode=TwoWay}"
                             Text="{Binding Path=ReportText,Mode=TwoWay}"

                </controls:MyUserControl>         

</Grid> 
```

当 TextMode 更改为 'Edit' 时，我想向电话应用程序栏添加一个 'Save' 按钮，当单击 Save 按钮时，我想从用户控件中保存文本。我还想禁用“读取”视图中的保存按钮。（即当 TextMode 为“读取”时）

执行此操作的正确 MVVM 方法是什么？我想到了两种方法：

1）我正在考虑在用户控件上公开 ModeChanged 属性并将其传播到视图，然后添加“保存”按钮。（但这是否违背了 MVVM 方式，即在代码中包含代码？）。

2) 处理依赖属性本身的propertychanged，并从用户控件添加保存按钮。（似乎不正确，因为应用程序逻辑混合在用户控件中）

我如何让视图模型参与其中？

什么是遵循 MVVM 进行此类操作的好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:21:07.263

ApplicationBar 不是 DependencyObject，因此不能进行数据绑定。因此，在这方面纠结于 MVVM 的细节是没有意义的。

MVVM 的目的是将您的业务逻辑与 UI 分离。因此 MVVM 并不是要虔诚地避免代码隐藏。事实上，危险之一是试图在视图模型上施加太多责任，以免使用背后的代码。

最后要考虑的一件事是，如果您选择这样做，那么打破万能的 MVVM 模式只是一个问题，如果其他人必须弄清楚您做了什么。大多数开发团队会在用尽所有其他可能性（并浪费半小时或更长时间）后在代码隐藏中寻找代码。但是，在 ApplicationBar 的情况下，没有其他地方可以。

简而言之，您的第一个选项没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:54:06.770

看看Phone7.Fx 中的BindableApplicationBar。它是更“MVVM 友好”的应用程序栏的包装器。

[http://blog.humann.info/post/2010/08/27/How-to-have-binding-on-the-ApplicationBar.aspx](http://blog.humann.info/post/2010/08/27/How-to-have-binding-on-the-ApplicationBar.aspx)

[http://phone7.codeplex.com/](http://phone7.codeplex.com/)

[http://bindableapplicationb.codeplex.com/](http://bindableapplicationb.codeplex.com/)

# javascript - 使用 jQuery 在 div 之间转换

> ID：11981067
> 
> 赞同：2
> 
> 时间：2012-08-16T05:16:22.473
> 
> 标签：javascript, jquery, css, html

我有三个`div`s。我有一个主 div，它为用户提供了选择查看其他两个 div 的选项。如果我只使用文本而不隐藏原始 div，它可以正常工作。但是我想使用图像映射并隐藏主 div 然后如果用户选择他们可以单击后退按钮并让 div 重新出现并且他们正在查看的那个会淡出。我已经部分解决了，但需要帮助完成脚本，所以它可以正常工作，因为 JS 不是我的强项。这是代码：

***JS***

```
// I am using jQuery Version 1.7.2

var $j = jQuery.noConflict();

//Script for Choosing which form to display
$j("#transformed-link, #changed-link").live('click',
 function(){  

    //figure out what button was clicked. 
    if(this.id === "transformed-link"){
        var btnA = $j(this);
        var btnB = $j("#changed-link");
        var divA = $j('#transformed-aviation');
        var divB = $j('#changed-aviation');
    }
    else{
        btnA = $j(this);
        btnB = $j("#transformed-link");
        divA = $j('#changed-aviation');
        divB = $j('#transformed-aviation');
    }

    //make sure it is not already active, no use to show/hide when it is already set
    if(btnA.hasClass('active')){
        return; 
    }

    //see if div is visible, if so hide, than show first div
    if(divB.is(":visible")){        
        divB.fadeOut("slow", function(){
             divA.fadeIn("slow");
        });
    }
    else{//if already hidden, just show the first div
        divA.fadeIn("slow"); 

         //Add and remove classes to the buttons to switch state
    btnA.addClass('active').removeClass('inactive ');
    btnB.removeClass('active').addClass('inactive ');

    }
} 
```

);

***HTML***

```
<div id="nav-main">
<!-- This is the original main div that users will choose which div to show. -->
<img src="nav-main.jpg" width="940" height="400" usemap="#Map" border="0" />
<map name="Map" id="Map">
  <area shape="rect" coords="52,146,420,258" href="#transformed-link" class="inactive" />
  <area shape="rect" coords="536,145,876,267" href="#changed-link" class="inactive"  />
</map>
</div>

<div id="transformed-aviation" class="hide">
<!-- CONTENT OF DIV -->
Link to return to main div? 
</div>

<div id="changed-aviation" class="hide">
<!-- CONTENT OF DIV -->
Link to return to main div? 
</div> 
```

***CSS***

> /* 大多数 CSS 仅针对特定页面。nav-main、transformed-aviation、changed-aviation 只是 JS 的标识符，没有分配给它们的代码。*/

```
.hide{ display:none; } 
```

我的问题归结为：

你如何淡出原始 div 并让它淡入用户选择的那个。然后通过链接允许用户返回主 div（从而淡出当前 div 并淡入主或原始 div）。

随意修改或完全重写原始脚本。但是请提供示例，因为[我对这个脚本有帮助，](https://stackoverflow.com/questions/7975480/jquery-changing-styles-and-displaying-certain-elements)并且不知道足够的 JS 来自己编写它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:13:52.160

在[http://jsfiddle.net/YzNcR/重新编码](http://jsfiddle.net/YzNcR/)

我更改了`href="#etc.."`into`href="#"`并添加了`id="etc.."`- 更常见的是使用 id 和 classes 然后 hrefs 作为选择器

添加了指向其他两个 div 的反向链接（简单链接`class="back"`）

我重写了 JQuery，使其更加简洁。简单地说，如果点击了任何匹配和 id`transformed-link`或`changed-link`or 的类，`back`它就会触发点击处理程序。

从那里它检查使用`e.target.name`（e是一个事件对象）点击了什么，并根据点击的内容淡出和淡入。

如果您单击`transformed-link`或`changed-link`它淡出`nav-main`然后淡入适当的 div。

如果你被点击`back`，它会淡出当前元素的父元素（在这种情况下，反向链接父元素是父 div）然后淡入`nav-main`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T06:31:03.407

认为您想要一个`back`控制两个`div`s 到 main`div`和一个主 div 中的选择 div 选项。

***[这](http://jsfiddle.net/blasteralfred/rY293/3/)***是一个有效的现场演示。

您可以在您`div`的 s 中使用任何东西，而不仅仅是图像。我已经**完全**改变了你的 JavaScript。如果您需要更多帮助，请发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T05:59:05.047

在标签中，`href="#xxx"`应该是`id="xxx"`.

# audio - Asterisk 可以播放 rtsp 流吗？

> ID：11981068
> 
> 赞同：1
> 
> 时间：2012-08-16T05:16:26.763
> 
> 标签：audio, video, asterisk, rtsp, ivr

如何配置星号来播放 RTSP url？有一个官方应用程序 app_rtsp 是错误的。我无法让它工作。有没有官方的方式或任何其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:23:13.610

你可以试试Dialogic开源项目[DiaStar](http://www.projectdiastar.org/)

# excel - 基于活动单元格的条件格式

> ID：11981070
> 
> 赞同：-1
> 
> 时间：2012-08-16T05:16:40.197
> 
> 标签：excel, conditional-formatting

我正在尝试使用excel的条件格式。我的要求是`using conditional formatting`如果所选单元格介于 $A$1:$D$4 之间，我想突出显示单元格 $A$1:$D$4。如果所选单元格在 $A$1:$D$4 之外，则不应突出显示。一种方法是以条件格式编写公式

```
IF(....) 
```

这样如果所选单元格与给定范围（$A$1:$D$4）相交，它应该返回 true，否则它应该返回 false。但是我需要的公式是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:40:26.697

这是关于策略的一些回合：

1.  定义一个名称，让我们说`rActive`并将其设置为引用一个常量`=FALSE`
2.  使用公式有条件地格式化所需的范围`=rActive`
3.  添加工作表选择更改事件 `Private Sub Worksheet_SelectionChange(ByVal Target As Range)
    ThisWorkbook.Names("rActive").RefersTo = _
    Not Application.Intersect(ActiveCell, [A1:D4]) Is Nothing
    End Sub` 

结果：范围根据 name 的值有条件地格式化`rActive`。
`rActive`每次更改所选单元格时都会由事件更新。

# ios - 带有包装标签的静态表格单元格的动态高度？

> ID：11981071
> 
> 赞同：8
> 
> 时间：2012-08-16T05:16:41.023
> 
> 标签：ios, uitableview, uistoryboard

我的文字在纵向模式下是两行长。当我切换到横向模式时，它适合一行。我通过情节提要使用静态表格视图单元格；我怎样才能调整行的大小以适合？

该屏幕是登录屏幕。

*   第一个单元格包含一些解释文本
*   第二个是用于输入帐户名称的文本字段
*   第三个是用于输入密码的安全文本字段
*   第四个（也是最后一个）单元格包含登录按钮。键盘上的return键提交表单或根据需要切换焦点

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T05:27:46.657

使用`UITableView's heightForRowAtIndexPath`：

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
 {
   int topPadding = 10;
   int bottomPadding = 10;
   float landscapeWidth = 400;
   float portraitWidth = 300;

   UIFont *font = [UIFont fontWithName:@"Arial" size:22];

   //This is for first cell only if you want for all then remove below condition
   if (indexPath.row == 0) // for cell with dynamic height
   {
      NSString *strText = [[arrTexts objectAtIndex:indexPath.row]; // filling text in label  
     if(landscape)//depends on orientation
     {
       CGSize maximumSize = CGSizeMake(landscapeWidth, MAXFLOAT); // change width and height to your requirement
     }
     else //protrait
     {
       CGSize maximumSize = CGSizeMake(portraitWidth, MAXFLOAT); // change width and height to your requirement
     }

     //dynamic height of string depending on given width to fit
     CGSize textSize = CGSizeZero;
     if(SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"7.0")
     {
        NSMutableParagraphStyle *pstyle = [NSMutableParagraphStyle new];
        pstyle.lineBreakMode = NSLineBreakByWordWrapping;

        textSize = [[strText boundingRectWithSize:CGSizeMake(width, MAXFLOAT) options:NSStringDrawingUsesLineFragmentOrigin attributes:@{NSFontAttributeName :font,NSParagraphStyleAttributeName:[pstyle copy]} context:nil] size];
     }
     else // < (iOS 7.0)
     {
        textSize = [strText sizeWithFont:font constrainedToSize:maximumSize lineBreakMode:NSLineBreakByWordWrapping] 
     }

     return (topPadding+textSize.height+bottomPadding) // caculate on your bases as u have string height
   }
   else
   {
       // return height from the storyboard
       return [super tableView:tableView heightForRowAtIndexPath:indexPath];
   }
 } 
```

**编辑**：添加 for`support`和`> and < ios7`as`sizeWithFont`方法在 iOS 7.0 中已弃用

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-19T17:31:52.640

我通过更简单的实现取得了成功。只要您的静态表格视图对单元格有适当的约束，您就可以要求系统为您调整大小：

```
override func tableView(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath) -> CGFloat
{
    let cell = self.tableView(self.tableView, cellForRowAtIndexPath: indexPath)
    let height = ceil(cell.systemLayoutSizeFittingSize(CGSizeMake(self.tableView.bounds.size.width, 1), withHorizontalFittingPriority: 1000, verticalFittingPriority: 1).height)
    return height
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-26T14:33:15.963

我已经使用适当的约束来实现这一点，其中标签设置了顶部和底部约束，并像这样在 heightForRowAt 中返回 UITableViewAutomaticDimension

```
override func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat {
    return UITableViewAutomaticDimension
} 
```

在我的情况下，我在堆栈视图中有几个标签，我必须将堆栈视图的顶部和底部设置为 contentView 以使单元格增长。

# set - DOS 环境设置的不同行为，在 if 语句中，在 DOS 提示符中与 Windows 快捷方式相比

> ID：11981073
> 
> 赞同：0
> 
> 时间：2012-08-16T05:17:08.000
> 
> 标签：set, dos, desktop-shortcut

这看起来很简单，但结果却是如此痛苦。

在 Windows 7 上，我可以将以下内容粘贴到命令提示符中并将其设置`ProgramFiles(x32)`为`%programfiles%`或者`%programfiles(x86)%`然后回显其设置为：

```
%comspec% /c if exist "%programfiles%" (set "ProgramFiles(x32)=%programfiles%") else (set "%ProgramFiles(x32)=%programfiles(x86)%") && set Program && echo %programfiles(x32)% && pause 
```

但是，当将相同的命令放入快捷方式时，我得到了这个：

![显示 ProgramFiles(x32) 的命令提示符已预先设置，但后续回显未看到](../Images/cb593fda7722aba272209ddd55551b0a.png)

到底是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:40:04.163

首先，我将从在命令提示符下运行代码的角度开始。在这种情况下，您的代码有 4 个问题。

1）我不认为这有什么不同，但我相信你总是想在你的命令行中执行最后 3 个命令。但是您使用了条件`&&`运算符，如果前面的命令成功，它只会执行下面的命令。我相信你想`&`改用。

2）你有一个优先问题。您想要执行一个 IF/ELSE 语句，然后当它完成时您想要执行 3 个附加命令。但是您编写的 3 个附加命令被认为是 IF 语句的 ELSE 子句的一部分。您需要在整个 IF/ELSE 语句周围使用一组额外的括号。

```
(if exist "%programfiles%" (set "ProgramFiles(x32)=%programfiles%") else (set "ProgramFiles(x32)=%programfiles(x86)%")) & ... 
```

3) 您希望之后的所有内容都`%comspec% /c`成为传递给 CMD.EXE 的命令行的一部分。但是，当您在命令行控制台中运行整个语句时，对 CMD.EXE 的调用会在`&`. 该行的其余部分由父命令窗口执行，而不是由您对 CMD.EXE 的调用执行。您需要将`&`字符转义为`^&`，或者引用要传递的整行。

4) %VAR% 扩展发生在解析一行时，并且在执行任何命令之前一次解析整个命令行。因此，您看到的 %ProgramFiles(x32)% 的值是执行任何命令之前的值。该值通常未定义，并且您处于命令行上下文中，因此会打印带有百分比的原始字符串。修复方法是使用`CALL ECHO %^ProgramFiles(x32)%`或启用延迟扩展`/V:ON`选项并使用`ECHO !ProgramFiles(x32)!`. 插入符号是为了确保将字符串传递给 CMD.EXE 而不是在父命令行中展开（以防万一 ProgramFiles(x32) 已定义）。

以下每一项都应提供您在命令提示符下查找的结果：

```
%comspec% /v:on /c "(if exist "%programfiles%" (set "ProgramFiles(x32)=%programfiles%") else (set "%ProgramFiles(x32)=%programfiles(x86)%")) & set Program & echo !programfiles(x32)!& pause"

%comspec% /c "(if exist "%programfiles%" (set "ProgramFiles(x32)=%programfiles%") else (set "%ProgramFiles(x32)=%programfiles(x86)%")) & set Program & call echo %^programfiles(x32)%& pause"

%comspec% /v:on /c (if exist "%programfiles%" (set "ProgramFiles(x32)=%programfiles%") else (set "%ProgramFiles(x32)=%programfiles(x86)%")) ^& set Program ^& echo !programfiles(x32)!^& pause

%comspec% /c (if exist "%programfiles%" (set "ProgramFiles(x32)=%programfiles%") else (set "%ProgramFiles(x32)=%programfiles(x86)%")) ^& set Program ^& call echo %^programfiles(x32)%^& pause 
```

* * *

从快捷方式执行时，情况会有所不同。该快捷方式没有父命令提示符，因此上述第 3) 点不适用。`&`不应转义字符，但仍可以引用整个命令行。

点 1、2 和 4 对快捷方式仍然有效。

因此，以下语句都将用作快捷方式：

```
%comspec% /v:on /c "(if exist "%programfiles%" (set "ProgramFiles(x32)=%programfiles%") else (set "%ProgramFiles(x32)=%programfiles(x86)%")) & set Program & echo !programfiles(x32)!& pause"

%comspec% /c "(if exist "%programfiles%" (set "ProgramFiles(x32)=%programfiles%") else (set "%ProgramFiles(x32)=%programfiles(x86)%")) & set Program & call echo %^programfiles(x32)%& pause"

%comspec% /v:on /c (if exist "%programfiles%" (set "ProgramFiles(x32)=%programfiles%") else (set "%ProgramFiles(x32)=%programfiles(x86)%")) & set Program & echo !programfiles(x32)!& pause

%comspec% /c (if exist "%programfiles%" (set "ProgramFiles(x32)=%programfiles%") else (set "%ProgramFiles(x32)=%programfiles(x86)%")) & set Program & call echo %^programfiles(x32)%& pause 
```

* * *

比较 2 组语句，其中只有 2 组对两种上下文都有效。以下 2 条语句可在命令行和快捷方式中使用：

```
%comspec% /v:on /c "(if exist "%programfiles%" (set "ProgramFiles(x32)=%programfiles%") else (set "%ProgramFiles(x32)=%programfiles(x86)%")) & set Program & echo !programfiles(x32)!& pause"

%comspec% /c "(if exist "%programfiles%" (set "ProgramFiles(x32)=%programfiles%") else (set "%ProgramFiles(x32)=%programfiles(x86)%")) & set Program & call echo %^programfiles(x32)%& pause" 
```

当从命令提示符或作为我的 Vista 机器上的快捷方式发出时，上述两个语句都会给出以下结果：

```
ProgramData=C:\ProgramData
ProgramFiles=C:\Program Files
ProgramFiles(x32)=C:\Program Files
ProgramFiles(x86)=C:\Program Files (x86)
C:\Program Files
Press any key to continue . . . 
```

# java - Java ASM4：超级（ASM4）；？

> ID：11981076
> 
> 赞同：3
> 
> 时间：2012-08-16T05:17:47.740
> 
> 标签：java, bytecode, java-bytecode-asm, bytecode-manipulation

好吧，我正在阅读 ASM4 字节码库上的 PDF 教程/文档/书籍（如果您愿意的话）。我正在尝试这些示例并通过阅读并实际输入代码，执行，然后从输出中学习来学习。我遇到了这部分：

```
 public class ClassPrinter extends ClassVisitor {
      public ClassPrinter() {
      super(ASM4);
   } 
```

链接在这里：`http://download.forge.objectweb.org/asm/asm4-guide.pdf`

我不知道在超级中传递什么。我的 IDE 也不是很有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T11:21:37.447

That is an ASM4 [API version constant](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/Opcodes.html#ASM4). Also see JavaDoc for [ClassVisitor(int)](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/ClassVisitor.html#ClassVisitor%28int%29) constructor.

# java-7 - Java 7 中的“非透明值”是什么意思？

> ID：11981079
> 
> 赞同：5
> 
> 时间：2012-08-16T05:18:07.200
> 
> 标签：java-7

Java 7`AttributeView`将允许您创建和更新与文件系统中的对象关联的非透明值。这意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:28:38.063

不透明值是您可以传递但无法查看或更改的抽象项目。一个很好的例子是操作系统提供的文件句柄——你可以得到一个文件句柄并将它传递给其他需要文件句柄的函数，但你无法知道它到底是什么。

例如，文件的不透明值可能是磁盘上文件的主块的物理位置 - 存在但不允许您读取或写入的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:23:20.277

不透明值是那些只能在同一环境中传递或使用的值。例如，Java 数组是不透明的值，只能传递给 Java 代码。如果您想在其他平台（如 JavaScript 或 JNI）中使用某些东西，则必须使用非透明值。

有关详细信息：[请参阅此](http://en.wikipedia.org/wiki/Opaque_data_type)。

# php - 在fuelphp中查询数据库的更好方法是什么？

> ID：11981082
> 
> 赞同：2
> 
> 时间：2012-08-16T05:18:35.260
> 
> 标签：php, orm, fuelphp

**我有选择查询数据库的列表要求**

1.  安全
2.  灵活性
3.  快速地

**这是fuelphp中的查询函数数据库**

1.  [ORM（对象关系映射器）](http://docs.fuelphp.com/packages/orm/intro.html)

2.  [DB 类（直接查询）](http://docs.fuelphp.com/classes/database/usage.html)

3.  [查询构建](http://docs.fuelphp.com/classes/database/qb.html#/introduction)

**我的问题**

1.  当我使用 ORM Mapper 时，我对**灵活**点有疑问。我读过[这个](http://fuelphp.com/forums/topics/view/7076)和[这个](http://fuelphp.com/forums/topics/view/7076)说 ORM 不能按表的字段选择，ORM 可以获取表中的所有列，如果连接表将传递大量数据，但 ORM 是高安全性的，我现在不快或也许有人可以解释，但我认为会很慢，因为 ORM 获取所有数据，只是我的看法。

2.  当我使用 Direct Query 时，我遇到了安全问题，因为可以进行 SQL 注入，但是使用 Direct Query，我们可以自定义查询数据库，我认为速度会比 ORM 提高。

3.  当我使用查询构建时，当我想加入两个或更多表时遇到问题，这个功能在fuelphp中仍然不可用，但是查询生成器的安全性比直接查询要好，我认为速度会提高。

好吧，这只是我的看法，实际上我想使用 ORM，因为我更喜欢安全性而不是其他，我认为这非常重要。

**我的问题**

1.  你对这个问题有什么建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T09:46:16.993

1.  ORM 在本质上通常会稍微慢一些，是的。但是，就像您说的那样，它的灵活性可能是牺牲性能的来源。ORM 有它的用途，并且对某些场景很有用，这些场景在整个网络上都有更详细的记录，包括您在问题中提出的链接，所以我将详细说明好处和缺陷。

2.  直接查询可能容易受到 SQL 注入的影响，但您可以逃避它们并使它们自己安全。作为一个基本示例（如下），您可以将以下内容传递给 DB 类。在 ORM 和查询构建器无法生成您需要的 SQL 的情况下，直接查询非常有用。但是，使用直接查询意味着您不一定能够切换到不同的数据库引擎（例如 MySQL 到 Mongo），而您可以使用 ORM 或查询构建器。出于这个原因，我个人远离直接查询。

    `$query = sprintf("SELECT * FROM table WHERE name = '%s'", DB::escape($yourstring));`

3.  查询构建器非常适合完成 ORM 模型无法完成的查询或编写模型过大的查询。从中编译 SQL 会有一点开销，但通常可以忽略不计。查询生成器能够连接无限数量的表。您只需要多次调用`join()`and函数。`on()`例如

    `DB::select('*')->from('table')`

    `->join('table2', 'right')->on('table2.column', '=', 'table.column')`

    `->join('table3', 'right')->on('table3.column', '=', 'table.column')`

您还可以根据需要随时拨打电话`on()`。

如上所述，每个选项都适用于不同的场景。因此，您会发现在需要时选择最合适的选项将是您的最佳选择。

# ruby-on-rails - 自定义 rake 任务因未初始化的常量 Tasks::DatabaseTasks 而失败

> ID：11981087
> 
> 赞同：2
> 
> 时间：2012-08-16T05:18:57.973
> 
> 标签：ruby-on-rails, rake, rake-task

我正在尝试自定义`db:structure:dump`和`db:structure:load`任务，但出现以下错误：

```
$ rake db:structure:dump
rake aborted!
uninitialized constant Tasks::DatabaseTasks 
```

我使用的代码只是从[https://github.com/rails/rails/blob/master/activerecord/lib/active_record/railties/databases.rake](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/railties/databases.rake)复制的，删除了几行：

```
# lib/tasks/db.rake
require 'active_record'

Rake::Task['db:structure:dump'].clear

namespace :db do
  namespace :structure do
    desc 'Dump the database structure to db/structure.sql. Specify another file with DB_STRUCTURE=db/my_structure.sql'
    task :dump => [:environment, :load_config] do
      abcs = ActiveRecord::Base.configurations
      filename = ENV['DB_STRUCTURE'] || File.join(Rails.root, "db", "structure.sql")
      case abcs[Rails.env]['adapter']
      when /mysql/, /postgresql/, /sqlite/
        ActiveRecord::Tasks::DatabaseTasks.structure_dump(abcs[Rails.env], filename)
      else
        raise "Task not supported by '#{abcs[Rails.env]["adapter"]}'"
      end

      db_namespace['structure:dump'].reenable
    end
  end
end 
```

我还应该要求或包括什么？

# vba - 如何在 word 宏中选择多个项目符号列表

> ID：11981091
> 
> 赞同：0
> 
> 时间：2012-08-16T05:19:30.907
> 
> 标签：vba, ms-word

我试图在大量的 word 文档中找到项目符号列表的所有实例，并根据我们公司的品牌为其分配样式。

我已经非常接近了，下面的宏在选择的第一个项目符号列表中选择第一行，并为其分配我需要的样式。

我只需要一些帮助来选择文档中的所有项目符号。

```
Sub findbullets22()
    'findbullets22 Macro
    Dim oPara As Word.Paragraph
    With Selection
        For Each oPara In .Paragraphs
            If oPara.Range.ListFormat.ListType = _
            WdListType.wdListBullet Then
                oPara.Range.Select
            End If
        Next
    End With
    Selection.Style = ActiveDocument.Styles("List Paragraph")
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:07:23.160

像这样？您必须在循环内部而不是在循环外部设置样式。

```
Sub findbullets22()
    Dim oPara As Word.Paragraph

    With Selection
        For Each oPara In .Paragraphs
            If oPara.Range.ListFormat.ListType = WdListType.wdListBullet Then
                oPara.Range.Style = ActiveDocument.Styles("List Paragraph")
                DoEvents
            End If
        Next
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:34:37.123

这可能会帮助您：

```
With seletion
     For Each oPara In ActiveDocument.Paragraphs
         If oPara.Range.ListFormat.ListType = WdListType.wdListBullet Then
            oPara.Range.Select
            oPara.style = ActiveDocument.styles("List Paragraph")
         End If
     Next
End With 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-07T10:18:37.530

下面是一个选择所有项目符号的宏：

```
Sub SelectBullets()
On Error Resume Next
Dim Para As Word.Paragraph
With ActiveDocument
    .DeleteAllEditableRanges (-1)
    For Each Para In .Paragraphs
        If Para.Range.ListFormat.ListType > 0 Then
            Para.Range.Editors.Add (-1)
        End If
    Next
    .SelectAllEditableRanges (-1)
    .DeleteAllEditableRanges (-1)
End With
End Sub 
```

选中后，您可以统一修改所有项目符号。

Para.Range.ListFormat.ListType > 0 - 此命令指定要选择每种类型的项目符号或编号列表。Para.Range.Editors.Add (-1) - 此命令将相关选择添加到范围 .SelectAllEditableRanges (-1) - 此命令选择所有添加的范围

有关其他有用的单词宏，请访问以下链接中提供的我的视频 [https://youtu.be/p_ZhufliFw8](https://youtu.be/p_ZhufliFw8)

问候， 苏里尔·梅塔

# linux - linux OS中主机资源MIB的实现

> ID：11981093
> 
> 赞同：0
> 
> 时间：2012-08-16T05:19:47.927
> 
> 标签：linux, snmp, mib

在执行以下 snmpwalk 命令时

snmpwalk -v2c -c 公共本地主机主机

我只得到这个作为我的 linux 系统的输出

HOST-RESOURCES-MIB::hrSystemDate.0 = STRING: 2012-8-16,10:43:20.0,-5:30 HOST-RESOURCES-MIB::hrSystemDate.0 = 此 MIB 视图中没有剩余变量（它超过 MIB 树的末尾）

为什么我没有获得其他 HOST-RESOURCE MIB...我怎样才能获得所有这些 MIB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T04:19:17.200

你使用 net-snmp 作为代理吗？

我用 NET-SNMP version: 5.7.1 对此进行了测试，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T08:32:39.350

将您的 HOST-RESOURCES MIB 文件添加到所有其他 MIB 文件所在的目录。您可以在 snmpd.conf 文件中找到此目录作为 **mibdirs /usr/share/snmp/mibs/**。另外，提到要在 snmpd.conf 文件中使用的 MIB 文件，称为**mibs THALES-SMI:THALES-ECOS2-MIB**

# java - 我们如何找到三角形内的点数？

> ID：11981095
> 
> 赞同：0
> 
> 时间：2012-08-16T05:19:56.913
> 
> 标签：java

我想找到总数。如果给定二维笛卡尔平面中所有三个顶点的 x 和 y 坐标，则位于三角形内部和边界上的点的数量。我正在考虑将三角形封闭在一个矩形内，然后找到直线方程，并将逐个检查点以满足不等式。有没有更好的计算方法来解决这个问题？

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:29:26.457

您取 3-tringe 边向量的所有组合的叉积。如果结果向量的方向与向量到点 p 和向量到三角形点（A、B 或 C）之一的叉积结果不同，则 p 不在三角形中。（叉积将产生3D）

更详细的解释： http: [//www.blackpawn.com/texts/pointinpoly/default.html](http://www.blackpawn.com/texts/pointinpoly/default.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:40:22.687

查看[http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=geometry3上的](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=geometry3)*PointInPolygon*描述，以很好地总结测试点是否在多边形中的一般情况。由于您有一个总是凸的三角形，因此这简化为（伪代码）：

```
for point in test_points:
  //infinity can just be a point outside the bounding box of the triangle
  ray := line from point to infinity 
  intersection_points := 0

  for side in triangle_sides
    isect := intersection ray, side
    intersection_points++ if isect

  return intersection_points %2 == 1 
```

# php - 将变量数组数据插入 MYSQL

> ID：11981096
> 
> 赞同：0
> 
> 时间：2012-08-16T05:20:08.953
> 
> 标签：php, mysql, arrays, facebook-graph-api, foreach

我正在尝试使用 Facebook Open Graph 从数组中获取数据。我正在使用 foreach 语句获取数组，但这会生成 6 个不同的 INSERT 语句。我希望数组中的每个值都能够提交到一个 MYSQL 行中。

请注意，$insert2 插入了 6 个不同的行，而 $insert 3 插入了一行，但只是 $urlform。

任何帮助将不胜感激。

代码是：

```
require_once('OpenGraph.php');
$urlget2 = "http://www.example.com/article/1/title";
$graph = OpenGraph::fetch($urlget2);
foreach ($graph as $key => $value) {
    $array = array($key => $value);
print_r($array);
    $key = type;
    $key1 = title;
    $key2 = image;
    $key3 = description;
    $key4 = url;
    $subtype = $array[$key];
    $subtitle = $array[$key1];
    $subimage = $array[$key2];
    $subdesc = $array[$key3];
    $urlform = $array[$key4];
    $useridme = "5";
    $insert2 = "INSERT INTO share VALUES('','$urlform','$subtype','$subtitle','$subimage','$subdesc','$subtime','$datesubmit','$subevent','$useridme','$facebookidme','$grpurl')";
    echo "<hr />";
    echo $insert2;
}
echo "<hr />";
$insert3 = "INSERT INTO share VALUES('','$urlform1','$subtype','$subtitle','$subimage','$subdesc','$subtime','$datesubmit','$subevent','$useridme','$facebookidme','$grpurl')";
    echo "<hr />";
    echo $insert3; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:46:15.687

用这个替换代码。另请阅读此[链接](https://stackoverflow.com/questions/1793169/which-is-faster-multiple-single-inserts-or-one-multiple-row-insert)

```
require_once('OpenGraph.php');
$urlget2 = "http://www.example.com/article/1/title";
$graph = OpenGraph::fetch($urlget2);
$insertvalues = '';    
foreach ($graph as $key => $value) {
  $array = array($key => $value);
  print_r($array);
  $key = type;
  $key1 = title;
  $key2 = image;
  $key3 = description;
  $key4 = url;
  $subtype = $array[$key];
  $subtitle = $array[$key1];
  $subimage = $array[$key2];
  $subdesc = $array[$key3];
  $urlform = $array[$key4];
  $useridme = "5";

//get all insert values
  $insertvalues .= ", ('','".$urlform."','".$subtype."','".$subtitle."','".$subimage."' ,'".$subdesc."','".$subtime."','".$datesubmit."','".$subevent."','".$useridme."','".$facebookidme."','".$grpurl."')";  

  echo "<hr />";
  echo $insertvalues;
}
echo "<hr />";
$insertvalues= substr($insertvalues,1); //just takes off the leading comma

$insert3 = "INSERT INTO share VALUES ".$insertvalues;
echo "<hr />";
echo $insert3;
mysql_query($insert3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:40:35.767

`foreach`循环`$insert2`一次又一次地运行。我会改变：

```
 $insert2 = "INSERT INTO share VALUES('','$urlform','$subtype',
             '$subtitle','$subimage','$subdesc','$subtime','$datesubmit',
             '$subevent','$useridme','$facebookidme','$grpurl')"; 
```

到：

```
$inserts[] = "INSERT INTO share VALUES('','$urlform','$subtype', 
              '$subtitle','$subimage','$subdesc','$subtime','$datesubmit',
              '$subevent','$useridme','$facebookidme','$grpurl')"; 
```

这样在`foreach`循环之后你就会有一个`$inserts`. 你可以使用 if 为：

```
foreach( $inserts as $insert){
    //use $insert to insert the record into the DB
} 
```

**对于 Jocelyn：**
我看不出在数组上使用连接字符串有什么优势，但是在这里：
您可以更改`$insert2 = ...`
为：

```
$inserts .= "INSERT INTO share VALUES('','$urlform','$subtype', 
                  '$subtitle','$subimage','$subdesc','$subtime','$datesubmit',
                  '$subevent','$useridme','$facebookidme','$grpurl');"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T05:58:35.897

我建议尝试这段代码：

```
require_once('OpenGraph.php');
$urlget2 = "http://www.example.com/article/1/title";
$graph = OpenGraph::fetch($urlget2);
$insert2 = array();
foreach ($graph as $key => $value) {
    $array = array($key => $value);
    print_r($array);
    $key = type;
    $key1 = title;
    $key2 = image;
    $key3 = description;
    $key4 = url;
    $subtype = $array[$key];
    $subtitle = $array[$key1];
    $subimage = $array[$key2];
    $subdesc = $array[$key3];
    $urlform = $array[$key4];
    $useridme = "5";
    $insert2[] = "('','$urlform','$subtype','$subtitle','$subimage','$subdesc','$subtime','$datesubmit','$subevent','$useridme','$facebookidme','$grpurl')";
    echo "<hr />";
}
$query = "INSERT INTO share VALUES".implode(", ", $insert2);
echo "$query<br>";
mysql_query($query);

echo "<hr />";
$insert3 = "INSERT INTO share VALUES('','$urlform1','$subtype','$subtitle','$subimage','$subdesc','$subtime','$datesubmit','$subevent','$useridme','$facebookidme','$grpurl')";
echo "<hr />";
echo $insert3; 
```

$insert2 现在是一个数组，将存储您要插入的所有值。在`foreach`循环之后，将所有值连接起来以创建一个**单独**的INSERT 查询，该查询将在表中插入所有值。使用一个 INSERT 查询来插入所有值比使用许多单独的插入要快得多。如果您的脚本同时插入许多记录（数千条或更多），您可能会注意到它现在执行得更快。

文档：[插入](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

# xcode - Apple Mach-O 链接器警告不会消失

> ID：11981098
> 
> 赞同：25
> 
> 时间：2012-08-16T05:20:23.237
> 
> 标签：xcode, warnings, mach-o

几天来，我的项目中出现了这个 Apple Mach-O 链接器警告。它比什么都烦人，但我担心它可能会以某种方式影响我的应用程序的性能（我在 Xcode 上遇到过很多奇怪的问题，我现在不会怀疑任何事情）。警告说：

> 警告：找不到选项“-L/Volumes/ZBarSDK/ZBarSDK”的目录

我不知道是什么原因造成的，也不知道如何解决。我的应用程序中有一个名为 ZBarSDK 的文件夹，但添加另一个 ZBarSDK 并不能解决问题！我尝试在我的计算机上搜索一个 Volumes 文件夹，但没有成功，要么它不存在，要么 Apple 将它隐藏得很好。请让我知道我能做些什么来解决这个问题

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-21T17:26:58.153

我需要做的：

1.  单击您的项目（目标）
2.  单击库搜索路径下的构建设置
3.  删除路径

创造了奇迹！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-12T14:41:45.597

我在以下位置找到了我必须删除的参考：

*   目标
*   构建设置
*   标头搜索路径

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-21T03:33:54.037

我的在框架搜索路径下。

找到错误路径的最简单方法是在右上角的搜索框中输入其中的一部分。这会将列表过滤到只有一个错误的路径。正如其他答案所暗示的那样，删除它可以解决问题。

有关更多信息，请参阅[此答案](https://stackoverflow.com/a/18618187/35690)。

# iphone - 如何在 iphone 应用程序中停止视频并返回原始视图

> ID：11981099
> 
> 赞同：0
> 
> 时间：2012-08-16T05:20:35.447
> 
> 标签：iphone, xcode, ipad, media-player

我正在 iphone 应用程序中播放视频，我希望当单击完成按钮时，播放器应该从播放位置移回原始视图。

我正在使用以下代码

```
 viewDidLoad(){
     [self play];
  }

  -(void)play{
    NSString *urlStr = [[NSBundle mainBundle] pathForResource:@"3idiots.mov" ofType:nil];
    NSURL    *url    = [NSURL fileURLWithPath:urlStr];
    moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
    [self.view addSubview:moviePlayer.view];
    moviePlayer.view.frame = CGRectMake(0, 0, 1024, 768);  
    [moviePlayer play];
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T06:12:02.853

> 您应该将此通知称为：
> 
> [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(doneButtonClicked) name: **MPMoviePlayerWillExitFullscreenNotification** object:nil];

试试这个（我是为 iPad 做的）：

```
self.player = [[MPMoviePlayerController alloc] initWithContentURL:url];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(doneButtonClicked) name:MPMoviePlayerWillExitFullscreenNotification object:nil];

self.player.view.frame = CGRectMake(0, 0, 1024, 748);
[self.view addSubview:self.player.view];
[self.player setFullscreen:YES animated:YES];
[self.player play]; 
```

当完成按钮点击：

```
-(void)doneButtonClicked
{
    [self.player stop];
    [self.player.view removeFromSuperview];
    [self.navigationController popViewControllerAnimated:YES];//no need this if you are opening the player in same screen;
} 
```

# html - 如何在浏览器缓存中存储大量数据

> ID：11981100
> 
> 赞同：4
> 
> 时间：2012-08-16T05:20:37.183
> 
> 标签：html, local-storage

我们正在开发一种医学查看器，它将 jpeg2000 图像流式传输到浏览器并显示在图像查看器中。然而，图像的数量和大小非常大，我们经常需要处理数百兆的图像。这意味着我们遇到了浏览器允许缓存的限制。我可以使用哪些选项来在客户端保存大量临时数据？

我们使用的技术是 HTML5 和 javascript。我们希望能够在所有现代浏览器上工作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-03-26T03:33:43.830

如前所述，您最好的选择是[IndexedDB API](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API)。

每个现代浏览器实现的存储限制略有不同，但几个 GB 通常不是问题：

*   [Chrome 存储空间限制](https://developer.chrome.com/docs/apps/offline_storage/)
*   [Firefox 存储限制](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API/Browser_storage_limits_and_eviction_criteria#storage_limits)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2016-01-23T05:58:37.580

使用 javascript 制作数据对象。该对象可以保存数组，您可以将数据存储到数组中。

# php - 如何获取2个键之间的数组值并放入字符串

> ID：11981105
> 
> 赞同：0
> 
> 时间：2012-08-16T05:21:04.287
> 
> 标签：php

我正在寻找一种方法来获取一个 php 数组并在几个数组键之间传递值并保存到一个字符串中。

```
$array1 = array(0=>'sometext',
                1=>'1703',
                2=>'North',
                3=>5th',
                4=>'st',
                5=>'sometext')

I know the starting key and the end key in my script
$startnum = 1;
$endnum  = 4;
I need to get this
$string = '1703 North 5th st' 
```

无需更改数组中的键，因为稍后我必须再次遍历数组。我目前正在使用数组拼接，但它删除了数组中的项目和键，所以当我再次迭代数组时，键和值都搞砸了。如果我需要更好的解释，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T05:24:01.937

使用 获取感兴趣的片段[`array_slice`](http://php.net/array_slice)，然后使用 折叠它[`implode`](http://php.net/implode)：

```
$string = implode(' ', array_slice($array1, $startnum, $endnum-$startnum)); 
```

请注意，它`array_slice`需要一个偏移量和一个长度，因此长度计算为结束减去开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T05:24:03.260

你总是可以使用一个基本的`for`循环：

```
$str = "";
for ($i = $startnum; $i < $endnum; $i++){
    $str .= $array1[$i]." ";
}
$str .= $array1[$endnum]; 
```

# c# - 处理异步时的 TcpClient 与 Socket

> ID：11981106
> 
> 赞同：27
> 
> 时间：2012-08-16T05:21:13.357
> 
> 标签：c#, sockets, asynchronous, tcpclient, async-await

这不是另一个 TcpClient vs Socket。

TcpClient 是 Socket 类的包装器，以简化开发，同时也暴露了底层的 Socket。

仍然 ...

在 TcpClient 类的 MSDN 库页面上，可以阅读以下注释：

> TcpClient 类提供了简单的方法，用于以同步阻塞模式通过网络连接、发送和接收流数据。

对于 Socket 类：

> Socket 类允许您使用 ProtocolType 枚举中列出的任何通信协议执行同步和异步数据传输。

要仅通过 TcpCient 异步发送/接收某些数据，必须调用 GetStream 来检索底层 NetworkStream，通过调用 ReadAsync 和 WriteAsync 方法，可以从其上异步读取/写入数据，遵循 TAP 模式（可能使用 async/await 结构）。

要通过 Socket 异步发送/接收一些数据（我不是专家，但我认为我做对了），我们可以通过调用 BeginRead/EndRead BeginWrite/EndWrite（或者只是 ReadAsync 或WriteAsync .. 不暴露 TAP 模式 - 即不返回 Task .. 令人困惑）。

首先，知道为什么 .NET 4.5 中的 Socket 类没有以任何方式实现 TAP 模式，即 ReadAsync 和 WriteAsync 返回 Task（如果以不同方式调用以保持向后兼容的事件）？

无论如何，从 APM 模型方法对构建任务方法很容易，所以假设我将此异步方法（用于读取）称为 ReadAsyncTAP（返回任务）。

好 ？所以现在假设我想编写一个客户端方法`async Task<Byte[]> ReadNbBytes(int nbBytes)`，我将从我的代码中调用该方法以异步地从网络中读取一定数量的字节。

此方法的实现仅基于 TcpClient 将通过调用 GetStream 获取 NetworkStream 并将包含一个异步循环等待 ReadAsync 调用，直到缓冲区满。

这个基于 Socket 的方法的实现将包含一个异步循环，等待 ReadAsyncTAP 直到缓冲区满。

归根结底，从客户端代码的角度来看，我想这没有什么区别。在这两种情况下，调用`await ReadNbBytes`都会立即“返回”。但是，我想这在幕后会有所不同......对于依赖 NetworkStream 的 TcpClient，与直接使用套接字相比，读取是否在任何时候都会阻塞？如果不是，在谈论同步阻塞模式时，对 TcpClient 的评论是错误的吗？

如果有人能澄清，将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-16T10:56:51.377

流上的异步 I/O`TcpClient`不会阻塞。看起来 MSDN 文档是错误的（您可以通过遵循`NetworkStream`的异步 I/O 调用在 Reflector 中验证这一点）。

`Stream`类型是“有趣的”：默认情况下，`Stream`基类将通过在同步 I/O 上阻塞线程池线程来实现异步 I/O。所以你永远不想在像 a 这样的东西上做异步 I/O `MemoryStream`，它只提供同步方法。

`NetworkStream` *确实*提供了异步 I/O，因此`NetworkStream`实例上的异步 I/O 实际上是异步的。但情况并非总是如此：`FileStream`特别是[通常*不是*异步的，但如果你构造实例恰到好处](http://blog.stephencleary.com/2010/08/reminder-about-asynchronous-filestreams.html)。

关于为什么`Socket`没有 TAP 方法：这是一个非常好的问题！我认为这是一个疏忽，但现在 .NET 4.5 发布了，看起来它是故意遗漏的。可能是他们只是不想让 API 过于复杂 - Socket 已经有同步和*两个*异步 API，涵盖了相同的操作集（`Send`, `SendTo`, `Receive`, `ReceiveFrom`, `Connect`, `Accept`, `Disconnect`）。反过来，TAP 将需要两个额外的异步 API 用于该完整集。这至少会导致一个有趣的命名情况（`*Async`名称已经被使用，并且他们`*Async`将为每个操作添加另外两个名称）。

旁注：“附加”API 用于高性能异步`Socket`通信。他们使用`SocketAsyncEventArgs`，这并不容易使用，但产生的内存垃圾更少。如果将 TAP API 添加到`Socket`，他们会希望同时提供易于使用的版本（包装`Begin`/ `End`）和更高性能的版本（包装`Async`）。

如果您[对](http://blogs.msdn.com/b/pfxteam/archive/2011/12/15/10248293.aspx)`Socket`为. 我为我的启用套接字使用了类似的东西。`async`

# java - 如何在java中调用父级的父级方法？

> ID：11981108
> 
> 赞同：0
> 
> 时间：2012-08-16T05:21:31.253
> 
> 标签：java

> **可能重复：**
> [为什么是 super.super.method(); 在 Java 中不允许？](https://stackoverflow.com/questions/586363/why-is-super-super-method-not-allowed-in-java)

这是我的代码..假设我有三个类

```
public class ExtendsCheck {
    public void move() {
        System.out.println("M in Extends Check");
    }
}

public class ExtendsCheck2 extends ExtendsCheck{
    public void move() {
        System.out.println("M in Extends Check 2");
    }
}

public class ExtendsCheck3 extends ExtendsCheck2{
    public static void main(String[] args)
    {
        ExtendsCheck3 e3 = new ExtendsCheck3();
        e3.move();
    }   
} 
```

当我调用`e3.move()`时，方法`move()`from`ExtendsCheck2`被调用。

我的问题是，如果我想调用**ExtendsCheck**类的**move()**，我该怎么做。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:29:51.980

要调用父方法，请`super`在继承方法中使用关键字。

例如对于 ExtendsCheck2 类的方法：

```
public void move() {
     super.move();
     System.out.println("M in Extends Check 2");

} 
```

将显示：

```
M in Extends Check
M in Extends Check 2 
```

如果您想直接从 ExtendsCheck3 类调用 ExtendsCheck 类的 move()，那么请重新考虑您的继承架构。如果你需要编写这样的代码，那么你的类的体系结构就会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:33:10.327

在一个类中，您可以使用`parent.move();`.

但是，**没有这样的**东西`parent.parent.move();`。原因是当父类被重构时，这会中断，例如插入一个抽象类，从而增加层次结构的深度。

最有可能的是，当您“需要”时`parent.parent.method()`，继承设计中的某些内容被*破坏了*，因为您似乎需要撤消父类的某些内容。

如果这真的很明智，您总是可以让父类提供“绕过”功能，例如

```
@Deprecated
protected void originalMove() {
    super.move();
} 
```

这将移动操作再次与定义良好的父类联系起来。请注意，**我不建议使用此**. 最有可能的是，您设计中的某些内容已损坏。例如，您可能想在某处使用抽象类。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-16T05:50:23.427

最简单的处理方法是：

```
Extends E = new Extends();
E.move(); 
```

或者

```
super.move(); // as the first statement... 
```**

# c# - 如何在领域驱动设计中将业务逻辑添加到领域服务中？

> ID：11981111
> 
> 赞同：6
> 
> 时间：2012-08-16T05:21:47.093
> 
> 标签：c#, architecture, domain-driven-design

在我的项目中，业务逻辑都在应用程序服务中，域服务只是一些实体，谁能告诉我或给我一个例子来展示如何在域驱动设计中将业务逻辑添加到域服务中？很感谢！

**更新**

我写了一个简单的解决方案，这个解决方案是一个投票系统，解决方案的主要部分是：

![在此处输入图像描述](../Images/17bb259be7148701862fddc176cfa112.png)

Vote.Application.Service.VoteService.cs：

```
namespace Vote.Application.Service
{
    public class VoteService
    {
        private IVoteRepository _voteRepository;
        private IArticleRepository _articleRepository;

        public VoteService(IVoteRepository voteRepository,IArticleRepository articleRepository)
        {
            _voteRepository = voteRepository;
            _articleRepository = articleRepository;
        }

        public bool AddVote(int articleId, string ip)
        {
            var article = _articleRepository.Single(articleId);
            if (article == null)
            {
                throw new Exception("this article not exist!");
            }
            else
            {
                article.VoteCount++;
            }

            if (IsRepeat(ip, articleId))
                return false;

            if (IsOvertakeTodayVoteCountLimit(ip))
                return false;

            _voteRepository.Add(new VoteRecord()
            {
                ArticleID = articleId,
                IP = ip,
                VoteTime = DateTime.Now
            });

            try
            {
                _voteRepository.UnitOfWork.Commit();
                return true;
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }

        private bool IsRepeat(string ip, int articleId)
        {
            //An IP per article up to cast 1 votes
            //todo
            return false;
        }

        private bool IsOvertakeTodayVoteCountLimit(string ip)
        {
            //An IP per day up to cast 10 votes
            //todo
            return false;
        }
    }
} 
```

Vote.Domain.Contract.IVoteRepository.cs：

```
namespace Vote.Domain.Contract
{
    public interface IVoteRepository
        : IRepository<VoteRecord>
    {
        void Add(VoteRecord model);
    }
} 
```

Vote.Domain.Contract.IArticleRepository.cs：

```
namespace Vote.Domain.Contract
{
    public interface IArticleRepository
        : IRepository<Article>
    {
        void Add(VoteRecord model);

        Article Single(int articleId);
    }
} 
```

投票.域.实体.投票记录：

```
namespace Vote.Domain.Entities
{
    public class VoteRecord
    {
        public int ID { get; set; }

        public DateTime VoteTime { get; set; }

        public int ArticleID { get; set; }

        public string IP { get; set; }
    }
} 
```

投票.域.实体.文章：

```
namespace Vote.Domain.Entities
{
    public class Article
    {
        public int ID { get; set; }

        public string Title { get; set; }

        public string Content { get; set; }

        public int VoteCount { get; set; }
    }
} 
```

**我想将application.service中的业务登录移动到Domain.service（当前不是这个项目），谁能帮助我？怎么做才合理？很感谢！**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T10:32:31.920

DDD 专注于如何设计领域模型以适应需求，数据库中的模式并不重要。

如果您的域实体只是财产包，那么您似乎违反了[贫血模型反模式](http://martinfowler.com/bliki/AnemicDomainModel.html)。业务逻辑应该在域实体中。因此，在您的情况下，为了避免业务逻辑泄漏到应用程序服务。例如，如果需要，您可以使用一个名为 Client 的新模型来存储 Ip 或其他属性。

为了更容易理解，Client 是否超出了一天的限制，这个方法应该在 Client 类中。与方法 IsRepeated 类似。

因此，您的域对象应该是：

```
public class Client
{
    public string Ip { get; set; }
    // More properties if needed

    public List<Vote> Votes { get; set; }

    public bool ExceedLimitInDay()
    {
    }
}

public class Vote
{ 
    public int Id { get; set; } 
    public DateTime VoteTime { get; set; } 
    public Article Article { get; set; } 
    public Client { get; set; } 
}

public class Article   
{   
    public int Id { get; set; }   
    public string Title { get; set; }   
    public string Content { get; set; }   

    public List<Vote> Votes { get; set; }

    public bool IsRepeated(string ip)
    {
        return Votes.Select(v => v.Client.Ip == ip).Any();      
    }
} 
```

注意：如果您不需要创建新表 Client，只需将其映射到 Vote 表即可。至于 VoteCount 属性，则无需，因为您可以根据 Vote 列表进行*计数*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T14:46:52.183

我认为投票和文章是一个聚合体。我对您的域了解不多，但我认为每次投票仅对给定文章重要。投票不会在文章之间共享，因此它们应该被视为聚合的成员，而不是整个域的实体。

在我看来，Article 将是 Aggregate 的根实体，而 Vote 将是内部的成员实体。应用这种“模式”，您可以将所有业务逻辑封装在其中。

您可以在文章中添加 AddVote(...) 或类似的一些业务逻辑。

然后你可能想知道.. “好吧.. 但是持久性呢？？”。由于您将 Article-Vote 定义为聚合，因此您将它们放在一起。如果您对文章执行 CRUD 操作，同时您将在其聚合成员（投票）中执行这些操作。因此，您可能需要 ArticleAggregate 的存储库，它将处理文章的投票。

希望这对你有意义。根据您的域选择最佳选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T22:29:17.563

看一眼应用程序服务，我会说它几乎不是应用程序服务，它已经有点像域服务了，因为它捕获了一些域逻辑（而不是获取视图模型输入并将其映射到实体上）。但是，您确实有更大的问题：

您的聚合已关闭。您希望围绕一个 IP 地址强制执行两个不变量，对一篇文章进行投票（一个 ip 每篇文章只能投票一次，一个 ip 每天最多可以投票 10 次）。这两个名词都不适合（文章、投票）来跟踪这一点。

ArticleVotes 可能非常适合跟踪和强制执行单个 ip 对文章的投票，而 IPVotesPerDate 可能会跟踪单个 IP 地址每天的投票数。如果总票数足够低，您也许可以将 ArticleVotes 移动到 Article 聚合中（并且您可以将性能保持在您想要的位置）。如果每天投票的 IP 总数很低，则 IPVotesPerDate 可能会变成 VotesPerDate。

底线是 ip 和投票量将决定聚合的性能。这可能会迫使您对它们进行改造以适应您寻求的性能数字。你最好的办法是找到这些数字，以了解前进的方向。

从那里应该很明显，可以将所需的行为带入我提到的聚合中。因此，对域服务的需求可能会消失。我说可能，因为用例仍然是对文章投票的 ip。因此，这可能需要跨聚合进行一些协调，因此引入域服务。

# asp.net-mvc - MVC 3 Shared ViewModel 在其他视图中使用不同的模型不起作用

> ID：11981113
> 
> 赞同：0
> 
> 时间：2012-08-16T05:22:06.630
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-partialview

我正在使用 MVC 3 和 EF 构建博客。我已经创建了所有模型，并且一切正常。我决定我想要一个正确的导航栏，其中包含最新的帖子、评论和所有类别。我认为这将是使用 ViewModel 的好地方。

我使用文章、评论和类别作为收藏创建了 ViewModel。我创建了一个控制器并执行了我的 linq 来填充 ViewModel 并创建了一个部分共享视图。当我尝试使用 HTML.Partial 或诸如此类的东西时，我得到：

传递到字典中的模型项是 System.Collections.Generic.Lists 类型，但期望...

我在其中使用的页面是基于不同模型的强类型页面。

我做错了什么，也许我只是一个新手，或者我走错了路……救命！？

**编辑：**

我得到的错误突出显示了我调用部分视图的行

**@HTML.Partial("_SideBar")**

SideBar 使用 SideBarViewModel，但我从中调用它的常规页面（“Index.vbhtml”）使用 ArticleModel。我没有看到您的示例在这种情况下如何工作。我想在一堆页面中重用它......

侧边栏视图模型：

```
Public Class SidebarViewModel
    Public Property RecentPosts As ICollection(Of Article)
    Public Property RecentComments As ICollection(Of Comment)
    Public Property Categories As ICollection(Of Category)
End Class 
```

ArticleModel：公共类文章公共属性 ArticleId 作为整数公共属性作者作为字符串

```
 <DisplayFormat(DataFormatString:="{0:D}")>
    Public Property CreatedOn As DateTime

    <DisplayFormat(DataFormatString:="{0:D}")>
    Public Property LastModified As DateTime

    Public Property Content As String
    Public Property Title As String
    Public Property Excerpt As String
    Public Property Status As String
    Public Property IsPublic As Boolean

    Public Overridable Property Categories As ICollection(Of Category)
    Public Overridable Property Tags As ICollection(Of Tag)
    Public Overridable Property Comments As ICollection(Of Comment)
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:26:54.303

创建局部视图时，您需要将相关模型传递给它。

```
<% Html.renderpartial("partial", model.partialViewsModel); %> 
```

因此，您的 ViewModel 需要包含一个模型，该模型会传递给局部视图，并且是局部视图所期望的类型。

所以view1的模型可能是；

```
public class View1()
{
  public PartialModel partielViewsModel { get;set;}
  public string title {get;set;}
} 
```

view2 的模型可能是；

```
public class View2()
{
  public PartialModel partielViewsModel { get;set;}
  public int numberofthings {get;set;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T14:05:33.867

这个问题有一个很好的解决方案，使用控制器基类、单独的视图模型和自定义过滤器属性：

[http://blog.bitdiff.com/2012/05/sharing-common-view-model-data-in.html](http://blog.bitdiff.com/2012/05/sharing-common-view-model-data-in.html)

# jsf-2 - Spring Security 认证后无法重定向页面

> ID：11981115
> 
> 赞同：0
> 
> 时间：2012-08-16T05:22:52.987
> 
> 标签：jsf-2, spring-security

我有一个安装了 spring security 的 JSF 项目，我使用 forward 方法进行登录。但我无法将页面重定向到 AuthenticationBean.java 中的secured.xhtml。似乎“forward（）”方法会导致这种情况。但是身份验证无一例外地成功完成，我只是无法重定向页面。如果没有 forward 方法，我可以成功地重定向页面。那么，救命？

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>

    <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
    </filter-mapping>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring-security.xml
        </param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
</web-app> 
```

弹簧安全.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans 
        xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:security="http://www.springframework.org/schema/security"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/security
        http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<security:http auto-config="true" use-expressions="true" access-denied-page="/denied.xhtml">

    <security:intercept-url pattern="/login.xhtml" access="permitAll"/>
    <security:intercept-url pattern="/secured.xhtml" access="hasRole('ROLE_ADMIN')"/>

    <security:form-login
    login-page="/login.xhtml"
    authentication-failure-url="/login.xhtml?error=true"
    default-target-url="/"/>

    <security:logout
    invalidate-session="true"
    logout-success-url="/index.xhtml"
    logout-url="/logout.xhtml"/>

</security:http>

<security:authentication-manager>
    <security:authentication-provider user-service-ref="customUserDetailsService">
    <security:password-encoder ref="passwordEncoder"/>
    </security:authentication-provider>
</security:authentication-manager>

<bean class="org.springframework.security.authentication.encoding.Md5PasswordEncoder" id="passwordEncoder"/>

   <bean id="customUserDetailsService" class="com.triune.services.CustomUserDetailsService"/>

</beans> 
```

CustomUserDetailService.java（从不调用）

```
package com.triune.services;

import java.util.ArrayList;
import java.util.Collection;
import java.util.List;

import com.triune.dao.UserDAO;
import com.triune.entities.LoginCredential;
import org.springframework.dao.DataAccessException;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.authority.SimpleGrantedAuthority;
import org.springframework.security.core.userdetails.User;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.transaction.annotation.Transactional;

@Transactional(readOnly = true)
public class CustomUserDetailsService implements UserDetailsService {

    private UserDAO userDAO = new UserDAO();
    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException, DataAccessException 
    {
        UserDetails user = null;

        try
        {
            LoginCredential dbUser = userDAO.searchDatabase(username);

            user =  new User(
                dbUser.getUsername(),
                dbUser.getPassword().toLowerCase(),
                true,
                true,
                true,
                true,
                getAuthorities(dbUser.getAccess()) 
            );
        }
        catch (Exception e) 
        {
            throw new UsernameNotFoundException("Error in retrieving user");
        }       
        return user;
    }

    public Collection<GrantedAuthority> getAuthorities(Integer access) 
    {
        List<GrantedAuthority> authList = new ArrayList<GrantedAuthority>(2);

        authList.add(new SimpleGrantedAuthority("ROLE_USER"));

        if ( access.compareTo(1) == 0) 
        {
            authList.add(new SimpleGrantedAuthority("ROLE_ADMIN"));
        }

        return authList;
    }
} 
```

AuthenticationBean.java（由登录页面调用）

```
package com.triune.beans;

import java.io.IOException;
import java.io.Serializable;
import javax.enterprise.context.SessionScoped;
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;
import javax.inject.Named;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;

@Named("authenticationBean")
@SessionScoped
public class AuthenticationBean implements Serializable
{
    public String doLogin() throws IOException, ServletException
    {
        ExternalContext context = FacesContext.getCurrentInstance().getExternalContext();
        RequestDispatcher dispatcher = ((ServletRequest)context.getRequest()).getRequestDispatcher("j_spring_security_check");
        dispatcher.forward((ServletRequest)context.getRequest(), (ServletResponse)context.getResponse());
        FacesContext.getCurrentInstance().responseComplete();
        return "secured.xhtml";
    }

    public String doLogout()
    {
        FacesContext.getCurrentInstance().getExternalContext().invalidateSession();
        return "index.xhtml";
    }
} 
```

login.xhtml（简单登录页面）

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Login Page</title>
    </h:head>
    <h:body>
        <h1>Login Please</h1>
        <p>This is a really simple login page.</p>
        <h:form id="loginForm" prependId="false">
            <h:panelGroup>
                Username : <p:inputText id="j_username" required="true"/>
            </h:panelGroup>
            <br/>
            <h:panelGroup>
                Password : <p:inputText id="j_password" required="true"/>
            </h:panelGroup>
            <br/><br/>
            <h:panelGroup>
                <p:commandButton type="submit" id="login" action="#{authenticationBean.doLogin()}" value="login"/>
            </h:panelGroup>
        </h:form>
    </h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:34:32.453

在 JSF 中，当您在操作方法上返回 String 时，默认情况下它会触发转发，而不是重定向（除非您在上面配置了导航规则`faces-config.xml`并放在`<redirect />`上面）。

在您的情况下，您可以只`redirect()`从 ExternalContext 调用，而不是返回一个字符串：

在你的 utils 类中加入这样的方法（或者让你自己[OmniFaces](http://omnifaces.org)）：

```
public static void redirect(String url) throws IOException {
    ExternalContext ctx = FacesContext.getCurrentInstance()
        .getExternalContext();
    if (url.startsWith("http://") || url.startsWith("https://")
            || url.startsWith("/")) {
        ctx.redirect(url);
    } else {
        ctx.redirect(ctx.getRequestContextPath() + "/" + url);
    }
} 
```

并改变你的方法`doLogin()`：

```
public void doLogin() throws IOException, ServletException
{
    ExternalContext context = FacesContext.getCurrentInstance().getExternalContext();
    RequestDispatcher dispatcher = ((ServletRequest)context.getRequest()).getRequestDispatcher("j_spring_security_check");
    dispatcher.forward((ServletRequest)context.getRequest(), (ServletResponse)context.getResponse());
    FacesContext.getCurrentInstance().responseComplete();
    redirect("secured.xhtml");
} 
```

另请参阅[此答案](https://stackoverflow.com/a/5514027/149872)。

# html - HTML/CSS：ul li 需要帮助

> ID：11981123
> 
> 赞同：-2
> 
> 时间：2012-08-16T05:23:55.883
> 
> 标签：html, css, html-lists, css-selectors

我正在为菜单设计一个 CSS 下拉菜单，并且有一些基本的 HTML 复杂性。

所以可以说我有这个列表：

```
-Male
    -John
        -18yrs
        -5'10"
    -Tim
    -Steve
        -21yrs
        -6'1"
-Female
    -Molly
        -20yrs
        -5'3"
    -Kimberly
    -Mary 
```

和...

```
div#dropMenu ul.level1 
```

成功地给了我第一级：男性，女性

```
div#dropMenu li:first-child ul.level2 
```

成功地给了我约翰、蒂姆、史蒂夫

```
div#dropMenu li:last-child ul.level2 
```

成功地给了我莫莉、金伯利、玛丽

我需要使用 last-childs 和 first-childs 确定 18 岁（在 John 下）并确定到 5'3"（在 molly 下）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:18:41.133

完全不明白，

尝试

`div#dropMenu li:first-child ul.level3 li:first-child`18 年

和

`div#dropMenu li:last-child ul.level3 li:last-child`5'3"

# c++ - C/C++ — 使用 __funcsig__ 宏来获取函数签名？

> ID：11981126
> 
> 赞同：0
> 
> 时间：2012-08-16T05:24:07.127
> 
> 标签：c++, visual-c++, hook

我试图找到从 DLL 导出的函数的签名，并为挂钩定义完全相同的回调函数。

这是我正在从事的当前项目的需要。

以下是我为找到功能位置所做的工作。

```
HMODULE hModd = LoadLibraryEx("xxx.dll",NULL,DONT_RESOLVE_DLL_REFERENCES);

dosHeader = ((PIMAGE_DOS_HEADER)hModd);
    /*if(((PIMAGE_DOS_HEADER)hModd)->e_magic == IMAGE_DOS_SIGNATURE)
        MessageBoxA(NULL,"wow","exe",MB_OK);/**/
    ntHeader = (PIMAGE_NT_HEADERS)((PBYTE)hModd + ((PIMAGE_DOS_HEADER)hModd)->e_lfanew);
    PIMAGE_EXPORT_DIRECTORY exports = (PIMAGE_EXPORT_DIRECTORY)((BYTE *)hModd + ntHeader->OptionalHeader.DataDirectory[IMAGE_DIRECTORY_ENTRY_EXPORT].VirtualAddress);
    PVOID names = (BYTE *)hModd + exports->AddressOfNames;
    WORD *pOrds = (WORD*)((BYTE*)hModd + exports->AddressOfNameOrdinals);
    DWORD* addr = (DWORD*)((BYTE*)hModd + exports->AddressOfFunctions); 
    for (int i = 0; i < exports->NumberOfNames; ++i,addr++)
        {
            char funcName[255];
            char const *target = "Test";
            ZeroMemory(funcName,sizeof(funcName));
            //strcpy(funcName,(char*)((BYTE *)hModd + ((DWORD *)names)[i]));
            if(strcmp((char*)((BYTE *)hModd + ((DWORD *)names)[i]),target))
            {
                printf("Export: %s Address: %X \n", (char*)((BYTE *)hModd + ((DWORD *)names)[i]),*addr);
                offsetTarget = *addr;
            }
        } 
```

如何使用`__funcsig__`宏来获取 DLL 函数签名？

`__funcsig__`通常返回包含它的函数的签名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:40:58.830

您不能`__FUNCSIG__`为此使用：正如您所说，它会产生封闭函数的签名。

没有办法获得由任意模块导出的任意函数的签名。这些信息根本不存在：您需要某种形式的附加元数据来描述函数的类型。

# templates - 强制模板构建其他布局

> ID：11981129
> 
> 赞同：1
> 
> 时间：2012-08-16T05:24:43.147
> 
> 标签：templates, shopify, liquid

在 Shopify 上，我目前正在尝试托管一个用于注册的登录页面，并且真的不想要默认的主题布局，它看起来像这样（ASCII 艺术）：

```
 CART
XXLOGOXX
MAIN-NAV-XXXXXXXXXXXX
\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
PAGE-TITLE                SIDEBAR
                          -TWEETS-
CONTENT
ONLY ABOUT 30% OF PAGE
                          -WIDGETS
                          -LOTS OF
                          (UNWIELDY)
                          WIDGETS

FOOTER WHICH TAKES UP TOO MUCH SPACE 
```

问题是，当我尝试插入注册小部件以尝试对样式进行更多控制时，它只会占用内容面板中的小区域，`iframe`例如`iframe`图片/注册小部件。

我尝试过创建新布局并设置模板以使用新布局，但我不得不删除旧布局，我觉得这是一种类似于使用大锤杀死苍蝇的解决方案。

有没有办法可以更改模板应该使用的布局，例如更改 Django 和 Rails 中的基本模板？如果不是，这是一个计划中的功能，如果是，我可以期待多久？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T13:50:03.907

您可以创建一个新模板并将其用于某些页面，如下所示：

1.  从“主题”下拉菜单中打开您的主题编辑器。
2.  单击左侧的“添加新模板”链接，从下拉列表中选择“页面”，并为其命名（例如“注册”）。
3.  将新模板编辑成您喜欢的样子。
4.  创建一个新页面或打开一个现有页面。
5.  在页面的底部应该有一个下拉菜单来选择页面的布局。选择您刚刚创建的那个，然后保存所有内容。
6.  当您访问该页面时，它应该在新布局下呈现。

如果按照这些说明操作后仍有问题，请发送电子邮件至 design@shopify.com 寻求支持。

# qr-code - MATMSG 和 WIFI - QR 未正确编码或解码

> ID：11981130
> 
> 赞同：1
> 
> 时间：2012-08-16T05:24:46.710
> 
> 标签：qr-code, decoder

我遇到了一个我猜不太熟悉的问题（因为，在谷歌上搜索，我没有发现任何提示）。我正在尝试使用 TCPDF 提供的类生成 QR 码。几乎一切工作正常。我能够生成任何类型的网站链接等。

但是，当我尝试为“发送电子邮件”和“Android 的 WiFi 登录”生成 QR 但它们没有正确编码（或解码？）。

```
 MATMSG:TO:example@example.com;SUB:Hello;Body:example;; 
```

被解码为

```
 example@example.com;SUB:Hello;Body:example;; 
```

和

```
 WIFI:T:WEP;S:affaf;P:aaaa;; 
```

被解码为

```
 WEP;S:affaf;P:aaaa;; 
```

此外，我注意到编码 MATMSG 是主要问题。我试过这个[http://blog.qr4.nl/Online-QR-Code_Decoder.aspx](http://blog.qr4.nl/Online-QR-Code_Decoder.aspx)来解码 QR。他们无法解码 MATMSG 的 QR

[但有趣的是，从http://www.qrstuff.com/](http://www.qrstuff.com/)生成的用于发送电子邮件的QR在该解码器中运行良好。更有趣的是，如果您只是使用该站点的纯文本选项对 MATMSG 进行编码，则不起作用。

编码 MATMSG 有什么棘手的问题吗？或者你能建议什么来编码吗？

好吧，我应该提到

```
 matmsg:TO:example@example.com;SUB:Hello;Body:example;;

   wifi:T:WEP;S:affaf;P:aaaa;; 
```

得到很好的编码和解码。这些可以相应地发送电子邮件和wifi登录吗？或者

```
 MATMSG:
   TO:example@example.com;SUB:Hello;Body:example;;

   WIFI:
   T:WEP;S:affaf;P:aaaa;; 
```

这些会起作用吗？

谢谢你的时间。干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T10:42:56.493

请记住，在 QR 中编码电子邮件有三种不同的格式：

**Mailto**（W3C 标准）

> mailto:email@example.com?subject=电子邮件主题&正文=电子邮件文本

**MATMSG** (NTT DoCoMo)

> MATMSG:TO: email@example.com;SUB:电子邮件主题;BODY:电子邮件文本;;

**SMTP** (OMI@)

> SMTP：email@example.com：电子邮件主题：电子邮件文本

虽然MATMSG是最广泛的，但也有一些阅读器（即：ScanLife）不支持它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T07:56:33.977

您的第一个 MATMSG 是正确的，只是“Body”应该是“BODY”。WIFI信息是正确的。

其余的是特定解码器支持与否的功能。zxing 支持这些，所以我相信（通过上面的更正）并且我相信你在编码方面做的一切都是正确的。您无法修复不支持它的解码器。

# jakarta-ee - 如何通过在单个地方编写多个 WAR 文件来调用通用应用程序？

> ID：11981132
> 
> 赞同：0
> 
> 时间：2012-08-16T05:24:59.533
> 
> 标签：jakarta-ee, tomcat, servlets, tomcat6, web.xml

我在 Tomcat webapps 目录中部署了许多应用程序，例如 A、B 和 C。

还有一个单独的实用程序项目说 Z 需要由所有 A、B 和 C 使用。

因此，一种方法是将 Z 项目的 .class 文件放在所有 A、B 和 C 项目的 classes 文件夹中。

是否可以将 Z 项目保留在那里，我们可以在 A、B 和 C 中为同一个 Z 项目提供参考，这样我们就不需要在所有 3 个项目中复制 jar 或 .class 文件。

如果是，该怎么做？

如果我问了愚蠢的问题，我很抱歉....但想消除疑问。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:31:34.683

Web 应用程序被隔离到不同的[类加载](http://en.wikipedia.org/wiki/Java_Classloader)器中。这样，应用程序的类和库不会影响另一个应用程序。如果要在应用程序之间共享类或库，可以将它们放在公共类加载器中。

从[Tomcat 6 类加载器操作指南](http://tomcat.apache.org/tomcat-6.0-doc/class-loader-howto.html)

> ```
>  Bootstrap
>       |
>    System
>       |
>    Common
>    /     \ 
> ```
> 
> 网络应用 1 网络应用 2 ...

还请查看[Shared Library Files](http://tomcat.apache.org/tomcat-6.0-doc/appdev/deployment.html#Shared_Library_Files)。

也就是说，这不是最佳实践，因为它使 tomcat 本身的部署变得复杂；这意味着这`.war`并不是真正的“独立”；它可能会破坏 Web 应用程序的隔离模型（请参阅下面的注释）。

你所拥有的是构建问题。您可以使用构建系统（例如[maven](http://maven.apache.org/)）来自动构建您的`.war`. 每个项目 A、B、C 都可以依赖于一个公共项目 D。当您构建 A、B 或 C 时，构建系统首先构建 D，然后根据您的需要打包所有内容。

笔记：

Web 应用程序应该被隔离，这样它们就不会共享对象。它们的对象图是完全不同的，每个应用程序都可以轻松地单独重新部署（和垃圾收集）。如果您将类放在一个通用的类加载器中，它可能会引入不需要的副作用。例如，如果共享类实现了单例，则意味着所有应用程序将共享单例对象的同一个实例，这与假定的隔离模型相冲突。当人们在某些特殊情况下明确希望在应用程序之间共享对象时，通常会以这种方式共享类。

# android - 为什么执行异步任务后仍然出现网络空异常？

> ID：11981135
> 
> 赞同：0
> 
> 时间：2012-08-16T05:25:03.297
> 
> 标签：android, android-asynctask

我在 android 3.1 上运行，并且在我的登录 java 类中实现了异步。但是，在我实现它之后，我得到了严格模式异常。为什么会出现这种错误？

登录.java

```
public class LoginActivity extends Activity {
Button btnLogin;
Button btnLinkToRegister;
EditText inputNric;
EditText inputPassword;
TextView loginErrorMsg;

// Progress Dialog
private ProgressDialog pDialog;

// JSON Response node names
//success is the column name of the database - KEY_SUCCESS is we create the name 
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_NAME = "name";
private static String KEY_NRIC = "nric";
private static String KEY_CREATED_AT = "created_at";

    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    //StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
  //  StrictMode.setThreadPolicy(policy);

    // Importing all assets like buttons, text fields
    inputNric = (EditText) findViewById(R.id.loginNric);
    inputPassword = (EditText) findViewById(R.id.loginPassword);
    btnLogin = (Button) findViewById(R.id.buttonLogin);
    btnLinkToRegister = (Button) findViewById(R.id.btnLinkToRegisterScreen);
    loginErrorMsg = (TextView) findViewById(R.id.login_error);

    // login button click event
    btnLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // starting background task to update case
            new LoginUser().execute();
        }
    });

    /*// Link to Register Screen
    btnLinkToRegister.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            Intent i = new Intent(getApplicationContext(),
            RegisterActivity.class);
            startActivity(i);
            finish();
        }
    });*/
}

/**
 * Background Async Task to  Login User
 * */
    class LoginUser extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */        
        protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(LoginActivity.this);
        pDialog.setMessage("Logging In ...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
        }

        /**
        * Logging in
        * */
        protected String doInBackground(String... params) {
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                String nric = inputNric.getText().toString();
                String password = inputPassword.getText().toString();
                UserFunctions userFunction = new UserFunctions();
                Log.d("Button", "Login");
                JSONObject json = userFunction.loginUser(nric, password);

                // check for login response
                try {
                    if (json.getString(KEY_SUCCESS) != null) {
                        loginErrorMsg.setText("");
                        String res = json.getString(KEY_SUCCESS); 
                        if(Integer.parseInt(res) == 1){
                            // user successfully logged in
                            // Store user details in SQLite Database
                            DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                            JSONObject json_user = json.getJSONObject("user");

                            // Clear all previous data in database
                            userFunction.logoutUser(getApplicationContext());
                            db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_NRIC), json_user.getString(KEY_CREATED_AT));                      

                            // Launch home Screen
                            Intent home = new Intent(getApplicationContext(), AllTabActivity.class);

                            // Close all views before launching home
                            home.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(home);

                            // Close Login Screen
                            finish();
                        }else{
                            // Error in login
                            loginErrorMsg.setText("Incorrect username/password");
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
                }
            });
                return null;
        }

         /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once case deleted
            pDialog.dismiss();

        }
    }

    } 
```

Logcat 错误：

```
08-14 17:46:37.766: E/AndroidRuntime(1208): android.os.NetworkOnMainThreadException
08-14 17:46:37.766: E/AndroidRuntime(1208):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1077)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at java.net.InetAddress.lookupHostByName(InetAddress.java:477)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:277)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at java.net.InetAddress.getAllByName(InetAddress.java:249)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:136)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at com.pivestigator.JSONParser.makeHttpRequest(JSONParser.java:51)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at com.pivestigator.login.library.UserFunctions.loginUser(UserFunctions.java:40)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at com.pivestigator.login.LoginActivity$LoginUser$1.run(LoginActivity.java:112)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at android.os.Handler.handleCallback(Handler.java:587)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at android.os.Looper.loop(Looper.java:132)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at android.app.ActivityThread.main(ActivityThread.java:4025)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at java.lang.reflect.Method.invokeNative(Native Method)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at java.lang.reflect.Method.invoke(Method.java:491)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
08-14 17:46:37.766: E/AndroidRuntime(1208):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:34:18.923

您在 runOnUiThread 中进行了网络操作，这将被调用到事件线程中，而不是您应该执行以下操作：

```
/**
 * Background Async Task to  Login User
 * */
    class LoginUser extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */        
        protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(LoginActivity.this);
        pDialog.setMessage("Logging In ...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
        }

        /**
        * Logging in
        * */
        protected String doInBackground(String... params) {
            // updating UI from Background Thread
               String nric = inputNric.getText().toString();
                String password = inputPassword.getText().toString();
                UserFunctions userFunction = new UserFunctions();
                Log.d("Button", "Login");
                JSONObject json = userFunction.loginUser(nric, password);

                // check for login response
                try {
                    if (json.getString(KEY_SUCCESS) != null) {
                        loginErrorMsg.setText("");
                        String res = json.getString(KEY_SUCCESS); 
                        if(Integer.parseInt(res) == 1){
                            // user successfully logged in
                            // Store user details in SQLite Database
                            DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                            JSONObject json_user = json.getJSONObject("user");

                            // Clear all previous data in database
                            userFunction.logoutUser(getApplicationContext());
                            db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_NRIC), json_user.getString(KEY_CREATED_AT));                      

runOnUiThread(new Runnable() {
            public void run() {

                            // Launch home Screen
                            Intent home = new Intent(getApplicationContext(), AllTabActivity.class);

                            // Close all views before launching home
                            home.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(home);

                            // Close Login Screen
                            finish();
                        }else{
                            // Error in login
                            loginErrorMsg.setText("Incorrect username/password");
                        }
}
});
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }

                return null;
        }

         /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once case deleted
            pDialog.dismiss();

        }
    }

    } 
```

# java - JavaMail API 附件不能是多部分的最后一条记录

> ID：11981137
> 
> 赞同：0
> 
> 时间：2012-08-16T05:25:15.003
> 
> 标签：java, android, email, smtp, jakarta-mail

我正在使用 javamail api 开发我的 android 应用程序以发送带有附件的邮件。但是，我发现如果附件是多部分的最后一条记录，则邮件无法传递到目的地。我不知道为什么会发生这种情况，我在那里搜索没有类似的问题讨论这个问题。所以我打开这个问题，想在这里寻求专家的回答。

我发送邮件的代码段：

```
public boolean send(String[] toAddress, String fromAddress, String subject,
                    String body, String filename) throws Exception { 
    Properties props = setProperties(); 

    try{ 
        Session session = Session.getInstance(props, this); 
        session.setDebug(true); 

        MimeMessage msg = new MimeMessage(session); 

        msg.setFrom(new InternetAddress(fromAddress)); 

        InternetAddress[] addressTo = new InternetAddress[toAddress.length]; 
        for(int i=0; i<toAddress.length; i++){ 
            addressTo[i] = new InternetAddress(toAddress[i]); 
        } 

        msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 
        msg.setSubject(subject); 
        msg.setSentDate(new Date()); 

        BodyPart messageBodyPart1 = new MimeBodyPart(); 
        messageBodyPart1.setText(body); 
        multi.addBodyPart(messageBodyPart1); 

        BodyPart messageBodyPart2 = new MimeBodyPart(); 
        DataSource source = new FileDataSource(filename); 
        messageBodyPart2.setDataHandler(new DataHandler(source)); 
        messageBodyPart2.setFileName("record.csv"); 
        multi.addBodyPart(messageBodyPart2);

        BodyPart messageBodyPart3 = new MimeBodyPart(); 
        messageBodyPart3.setText(""); 
        multi.addBodyPart(messageBodyPart3);

        msg.setContent(multi); 

        Transport transport = session.getTransport("smtp"); 
        transport.connect(host, 25, user, password); 
        transport.sendMessage(msg, msg.getAllRecipients()); 
        transport.close(); 
        return true; 
    } catch (Exception e) { 
        e.printStackTrace(); 
        return false; 
    } 
} 
```

日志消息显示：

没有bodypart3：

```
08-16 15:09:33.337: I/System.out(6314): EHLO localhost
08-16 15:09:33.345: I/System.out(6314): 250-web.mysmtp.com Hello localhost [202.155.209.250]
08-16 15:09:33.345: I/System.out(6314): 250-SIZE 52428800
08-16 15:09:33.345: I/System.out(6314): 250-PIPELINING
08-16 15:09:33.345: I/System.out(6314): 250-AUTH PLAIN LOGIN
08-16 15:09:33.345: I/System.out(6314): 250-STARTTLS
08-16 15:09:33.345: I/System.out(6314): 250 HELP
08-16 15:09:33.345: I/System.out(6314): DEBUG SMTP: Found extension "SIZE", arg "52428800"
08-16 15:09:33.345: I/System.out(6314): DEBUG SMTP: Found extension "PIPELINING", arg ""
08-16 15:09:33.345: I/System.out(6314): DEBUG SMTP: Found extension "AUTH", arg "PLAIN LOGIN"
08-16 15:09:33.345: I/System.out(6314): DEBUG SMTP: Found extension "STARTTLS", arg ""
08-16 15:09:33.345: I/System.out(6314): DEBUG SMTP: Found extension "HELP", arg ""
08-16 15:09:33.353: I/System.out(6314): DEBUG SMTP: Attempt to authenticate
08-16 15:09:33.353: I/System.out(6314): AUTH LOGIN
08-16 15:09:33.361: I/System.out(6314): 334 VXNlcm5hbWU6
08-16 15:09:33.361: I/System.out(6314): Y2xpZW50YWxlcnRzQHVuaXNlcnZlaXQuY29t
08-16 15:09:33.368: I/System.out(6314): 334 UGFzc3dvcmQ6
08-16 15:09:33.368: I/System.out(6314): cEBzc3cwcmQhIUA=
08-16 15:09:33.384: I/System.out(6314): 235 Authentication succeeded
08-16 15:09:33.392: I/System.out(6314): DEBUG SMTP: use8bit false
08-16 15:09:33.392: I/System.out(6314): MAIL FROM:<me@mysmtp.com>
08-16 15:09:33.415: I/System.out(6314): 250 OK
08-16 15:09:33.415: I/System.out(6314): RCPT TO:<you@mysmtp.com>
08-16 15:09:33.470: I/System.out(6314): 250 Accepted
08-16 15:09:33.470: I/System.out(6314): RCPT TO:<admin@mysmtp.com>
08-16 15:09:33.478: I/System.out(6314): 250 Accepted
08-16 15:09:33.478: I/System.out(6314): DEBUG SMTP: Verified Addresses
08-16 15:09:33.478: I/System.out(6314): DEBUG SMTP:   you@mysmtp.com
08-16 15:09:33.478: I/System.out(6314): DEBUG SMTP:   admin@mysmtp.com
08-16 15:09:33.478: I/System.out(6314): DATA
08-16 15:09:33.486: I/System.out(6314): 354 Enter message, ending with "." on a line by itself
08-16 15:09:33.564: I/System.out(6314): Date: Thu, 16 Aug 2012 15:09:30 +0800 (HKT)
08-16 15:09:33.564: I/System.out(6314): From: me@mysmtp.com
08-16 15:09:33.564: I/System.out(6314): To: you@mysmtp.com, admin@mysmtp.com
08-16 15:09:33.564: I/System.out(6314): Message-ID: <1099216984.1.1345100973553.JavaMail.javamailuser@localhost>
08-16 15:09:33.564: I/System.out(6314): Subject: Record cannot be inserted!
08-16 15:09:33.564: I/System.out(6314): MIME-Version: 1.0
08-16 15:09:33.564: I/System.out(6314): Content-Type: multipart/mixed; 
08-16 15:09:33.564: I/System.out(6314):     boundary="----=_Part_0_1098789192.1345100970404"
08-16 15:09:33.564: I/System.out(6314): 
08-16 15:09:33.571: I/System.out(6314): ------=_Part_0_1098789192.1345100970404
08-16 15:09:33.571: I/System.out(6314): Content-Type: text/plain; charset=us-ascii
08-16 15:09:33.571: I/System.out(6314): Content-Transfer-Encoding: 7bit
08-16 15:09:33.571: I/System.out(6314): 
08-16 15:09:33.571: I/System.out(6314): Please insert manually!
08-16 15:09:33.571: I/System.out(6314): ------=_Part_0_1098789192.1345100970404
08-16 15:09:33.571: I/System.out(6314): Content-Type: application/octet-stream; name=record.csv
08-16 15:09:33.571: I/System.out(6314): Content-Transfer-Encoding: 7bit
08-16 15:09:33.571: I/System.out(6314): Content-Disposition: attachment; filename=record.csv
08-16 15:09:33.571: I/System.out(6314): 
08-16 15:09:33.571: I/System.out(6314): ABC,HK,A,2012/08/16 10:02, ,
08-16 15:09:33.571: I/System.out(6314): 
08-16 15:09:33.571: I/System.out(6314): ------=_Part_0_1098789192.1345100970404--
08-16 15:09:33.571: I/System.out(6314): .
08-16 15:09:33.611: I/System.out(6314): 250 OK id=1T1uCu-0007Fx-Tu
08-16 15:09:33.611: I/System.out(6314): QUIT
08-16 15:09:33.618: I/System.out(6314): 221 web.mysmtp.com closing connection 
```

有bodypart3：

```
08-16 15:12:34.353: I/System.out(6876): EHLO localhost
08-16 15:12:34.361: I/System.out(6876): 250-web.mysmtp.com Hello localhost [202.155.209.250]
08-16 15:12:34.361: I/System.out(6876): 250-SIZE 52428800
08-16 15:12:34.361: I/System.out(6876): 250-PIPELINING
08-16 15:12:34.361: I/System.out(6876): 250-AUTH PLAIN LOGIN
08-16 15:12:34.361: I/System.out(6876): 250-STARTTLS
08-16 15:12:34.361: I/System.out(6876): 250 HELP
08-16 15:12:34.368: I/System.out(6876): DEBUG SMTP: Found extension "SIZE", arg "52428800"
08-16 15:12:34.368: I/System.out(6876): DEBUG SMTP: Found extension "PIPELINING", arg ""
08-16 15:12:34.368: I/System.out(6876): DEBUG SMTP: Found extension "AUTH", arg "PLAIN LOGIN"
08-16 15:12:34.368: I/System.out(6876): DEBUG SMTP: Found extension "STARTTLS", arg ""
08-16 15:12:34.368: I/System.out(6876): DEBUG SMTP: Found extension "HELP", arg ""
08-16 15:12:34.368: I/System.out(6876): DEBUG SMTP: Attempt to authenticate
08-16 15:12:34.368: I/System.out(6876): AUTH LOGIN
08-16 15:12:34.384: I/System.out(6876): 334 VXNlcm5hbWU6
08-16 15:12:34.384: I/System.out(6876): Y2xpZW50YWxlcnRzQHVuaXNlcnZlaXQuY29t
08-16 15:12:34.392: I/System.out(6876): 334 UGFzc3dvcmQ6
08-16 15:12:34.392: I/System.out(6876): cEBzc3cwcmQhIUA=
08-16 15:12:34.400: I/System.out(6876): 235 Authentication succeeded
08-16 15:12:34.415: I/System.out(6876): DEBUG SMTP: use8bit false
08-16 15:12:34.415: I/System.out(6876): MAIL FROM:<me@mysmtp.com>
08-16 15:12:34.431: I/System.out(6876): 250 OK
08-16 15:12:34.431: I/System.out(6876): RCPT TO:<you@mysmtp.com>
08-16 15:12:34.470: I/System.out(6876): 250 Accepted
08-16 15:12:34.470: I/System.out(6876): RCPT TO:<admin@mysmtp.com>
08-16 15:12:34.486: I/System.out(6876): 250 Accepted
08-16 15:12:34.486: I/System.out(6876): DEBUG SMTP: Verified Addresses
08-16 15:12:34.486: I/System.out(6876): DEBUG SMTP:   you@mysmtp.com
08-16 15:12:34.486: I/System.out(6876): DEBUG SMTP:   admin@mysmtp.com
08-16 15:12:34.486: I/System.out(6876): DATA
08-16 15:12:34.493: I/System.out(6876): 354 Enter message, ending with "." on a line by itself
08-16 15:12:34.571: I/System.out(6876): Date: Thu, 16 Aug 2012 15:12:32 +0800 (HKT)
08-16 15:12:34.571: I/System.out(6876): From: me@mysmtp.com
08-16 15:12:34.571: I/System.out(6876): To: you@mysmtp.com, admin@mysmtp.com
08-16 15:12:34.571: I/System.out(6876): Message-ID: <1099235248.1.1345101154551.JavaMail.javamailuser@localhost>
08-16 15:12:34.571: I/System.out(6876): Subject: Record cannot be inserted!
08-16 15:12:34.571: I/System.out(6876): MIME-Version: 1.0
08-16 15:12:34.571: I/System.out(6876): Content-Type: multipart/mixed; 
08-16 15:12:34.571: I/System.out(6876):     boundary="----=_Part_0_1098789960.1345101152034"
08-16 15:12:34.571: I/System.out(6876): 
08-16 15:12:34.571: I/System.out(6876): ------=_Part_0_1098789960.1345101152034
08-16 15:12:34.571: I/System.out(6876): Content-Type: text/plain; charset=us-ascii
08-16 15:12:34.571: I/System.out(6876): Content-Transfer-Encoding: 7bit
08-16 15:12:34.571: I/System.out(6876): 
08-16 15:12:34.571: I/System.out(6876): Please insert manually!
08-16 15:12:34.571: I/System.out(6876): ------=_Part_0_1098789960.1345101152034
08-16 15:12:34.571: I/System.out(6876): Content-Type: application/octet-stream; name=record.csv
08-16 15:12:34.571: I/System.out(6876): Content-Transfer-Encoding: 7bit
08-16 15:12:34.571: I/System.out(6876): Content-Disposition: attachment; filename=record.csv
08-16 15:12:34.571: I/System.out(6876): 
08-16 15:12:34.571: I/System.out(6876): ABC,HK,A,2012/08/16 10:02, ,
08-16 15:12:34.571: I/System.out(6876): 
08-16 15:12:34.571: I/System.out(6876): ------=_Part_0_1098789960.1345101152034
08-16 15:12:34.571: I/System.out(6876): Content-Type: text/plain; charset=us-ascii
08-16 15:12:34.571: I/System.out(6876): Content-Transfer-Encoding: 7bit
08-16 15:12:34.571: I/System.out(6876): 
08-16 15:12:34.571: I/System.out(6876): 
08-16 15:12:34.571: I/System.out(6876): ------=_Part_0_1098789960.1345101152034--
08-16 15:12:34.571: I/System.out(6876): .
08-16 15:12:34.587: I/System.out(6876): 250 OK id=1T1uFp-0007Ka-TP
08-16 15:12:34.587: I/System.out(6876): QUIT
08-16 15:12:34.603: I/System.out(6876): 221 web.mysmtp.com closing connection 
```

如果我删除 messageBodyPart3，那么我将无法接收我的邮件。请问这是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:50:55.600

第三部分是完全免费的，它不应该有任何区别。嗯，真的，它根本不应该在那里。除非它改变您的服务器是否认为该邮件是垃圾邮件。

无论如何，您需要提供比“无法接收”更多的信息。

您的 SMTP 服务器是否接受该邮件？

您的 SMTP 服务器是否将其发送到目标服务器？

目标服务器是否将其存储在您的邮箱中？

您是否可以使用任何邮件阅读器在您的邮箱中看到它？

# javascript - 石墨聚集错误

> ID：11981138
> 
> 赞同：0
> 
> 时间：2012-08-16T05:25:19.573
> 
> 标签：javascript, graphite

我第一次尝试石墨。我想了解为什么石墨中的聚合图显示通过碳的值的 1/60 和通过 statsd 输入的值的 1/10。如果可以解决，我该如何解决？我正在发送此数据： echo "try:1|c\n" | nc -u localhost 8125" 然后在graphite的UI中添加sum和integral函数。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:37:18.957

1/10 值问题由 stats_counts 存储桶解决。请参阅：[Tracking metrics using StatsD (via etsy) and Graphite，graphite graph doesn't seem to be graphing all data](https://stackoverflow.com/questions/7099197/tracking-metrics-using-statsd-via-etsy-and-graphite-graphite-graph-doesnt-se) 数据值不准确的另一个问题是因为 statsd在 10 秒时发送数据。只需将 statsd 的 flushInterval 更改为 60s 即可。

# java - 负数到 ASCII 转换

> ID：11981141
> 
> 赞同：0
> 
> 时间：2012-08-16T05:25:50.890
> 
> 标签：java, string, numbers, ascii

如何将负数转换为 ASCII 值？

我必须将**-1 ** 转换为 **ASCII**值。

这意味着：

```
 inputbyte[] = 0
 output[] = -1 
```

我做了更换：

```
replacement 0 to -1 in string. 
```

但在将字符串表示为 Byte[] 之后，我不能将 -1 视为数字。我必须将 -1 作为单个数字处理，例如整数。

其实我原来的问题是：

```
input = "0110110111001000";
output should be = "-111-111-1111-1-11-1-1-1"; 
```

之后，我应该能够将 -1 和 1 视为数字，即字节。

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:39:11.690

```
I have to convert -1 ** into **ASCII value. 
```

-1（有符号字符）等于 127（无符号字符或 ASCII 值）

127 是 ASCII 表中的 DEL 代码。

要从字符串中获取 int：

```
Integer i = Integer.valueOf("-1");
                             |
                             |
                             here you put your sub-string of "-1" 
```

字符串替换：

```
String str="010100100011100011";
String result = str.replaceAll("0", "-1"); 
```

大整数转字符串：

```
String str=my_big_integer.toString(); 
```

# c# - 使用 ionic zip 时压缩失败

> ID：11981143
> 
> 赞同：8
> 
> 时间：2012-08-16T05:25:57.703
> 
> 标签：c#, zip, zipfile, dotnetzip

我正在使用最新版本的 ionic zip 版本 1.9.1.8。我已经设置了 ionic zip 的属性 `ParallelDeflateThreshold = 0`。压缩机制在过去两个月中运行良好。突然停止工作。压缩线程只是挂起，ionic zip 刚刚创建了 tmp 文件并且无法创建 zip 文件。即使文件很小，我也可以轻松重现此问题。

我对这个问题的分析如下

问题在于 ionic zip 的最新版本，在这种情况下，离子 zip 在创建 zip 文件时挂起。我们注意到，使用此 dll 的其他几个用户也在他们的站点中报告了此类错误。请参考[链接](http://dotnetzip.codeplex.com/releases/view/68268)。这个问题将通过禁用`ParallelThreshold`ionic zip 的属性来解决，但它会延迟大型日志文件的性能，因为它适用于单线程而不是多线程模式。

现在通过将`ParallelDeflateThreshold`属性设置为默认值解决了这个问题。但是我找不到这个问题的确切原因。为什么压缩突然失败？没有更换机器。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-31T16:28:25.317

我遇到了类似的问题，较小的 zip 文件小于 20-25MB，需要 3-4 秒，但任何大于此的时间都需要无限时间。代码从未完成执行。

我开始担心使用 DotNetZip 库可能是一个错误的决定，因为我们使用的 zipfile 最大为 500MB。

在保存 zip 文件的行之前，我添加了：`zip.ParallelDeflateThreshold = -1;`

这确保永远不会创建单独的线程。看起来一旦 zip 文件超过某个阈值，DotNetZip 就会不断创建大量线程，从而导致获取最终 zip 文件的延迟非常大。

# wso2esb - wso2 ESB JMS 监听器

> ID：11981144
> 
> 赞同：0
> 
> 时间：2012-08-16T05:26:04.010
> 
> 标签：wso2esb

我在尝试根据[http://wso2.org/project/esb/java/4.0.3/docs/samples/transport_samples.html/sample](http://wso2.org/project/esb/java/4.0.3/docs/samples/transport_samples.html/sample) 250 使用 wso2 esb 收听来自 JMS 队列的消息时遇到异常

XML Parsing Error: not well-formed Location: <TryitProxyError h:status='messageContext error' xmlns:h='http://wso2.org/ns/TryitProxy'>org.apache.axis2.AxisFault: 系统无法推断来自 jms:/JmsListener?transport.jms.DestinationType=queue&transport.jms.ContentTypeProperty=contentType&java.naming.provider.url=tcp://localhost:61616&java.naming.factory.initial=org.apache.activemq 的传输信息。 jndi.ActiveMQInitialContextFactory&transport.jms.ConnectionFactoryType=queue&transport.jms.ConnectionFactoryJNDIName=QueueConnectionFactory URL。</TryitProxyError>-------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- ------------^ wso2.org wso2.org

1天前

嗨，根据[http://wso2.org/project/esb/java/4.0.3/docs/samples/transport_samples.html/sample](http://wso2.org/project/esb/java/4.0.3/docs/samples/transport_samples.html/sample) 250 尝试使用 wso2 esb 收听来自 JMS 队列的消息时，我遇到了一个异常

XML Parsing Error: not well-formed Location: <TryitProxyError h:status='messageContext error' xmlns:h='http://wso2.org/ns/TryitProxy'>org.apache.axis2.AxisFault: 系统无法推断来自 jms:/JmsListener?transport.jms.DestinationType=queue&transport.jms.ContentTypeProperty=contentType&java.naming.provider.url=tcp://localhost:61616&java.naming.factory.initial=org.apache.activemq 的传输信息。 jndi.ActiveMQInitialContextFactory&transport.jms.ConnectionFactoryType=queue&transport.jms.ConnectionFactoryJNDIName=QueueConnectionFactory URL。</TryitProxyError>-------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- ------------^ wso2.org wso2.org

1天前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:37:08.837

请参考以下 JMS 示例 [1] 的位置，确保您已经打开了在 axis2.xml 中定义的 JMS sende ，receiver 传输服务，并且您需要确保所有需要的 JMS 代理库都包含在ESB_HOME/repository/components/lib

[1] [http://docs.wso2.org/wiki/display/ESB403/Sample+251+Switching+from+HTTP%28S%29+to+JMS](http://docs.wso2.org/wiki/display/ESB403/Sample+251+Switching+from+HTTP%28S%29+to+JMS)

欢呼独山

# java - 接口的成员变量必须是最终的……为什么？

> ID：11981145
> 
> 赞同：7
> 
> 时间：2012-08-16T05:26:24.787
> 
> 标签：java, interface, static, final

我有一个问题，为什么接口中的成员变量不能是非常量。静态的逻辑在我的脑海中是正确的，如果一个人需要访问接口的变量，那么它是必须的是静态的，因为我们不能创建接口的实例，但是为什么需要 final 呢？下面的代码展示了接口成员变量是如何成为静态最终的，即使我们默认没有提到它......

```
interface inter{

       int a=10; // It becomes final static by default

       public void interFunc();
} 

class cls implements inter{

       public void interFunc(){

           System.out.println("In Class Method WITH a's Value as --> "+a);
       }
}

class Test{

       public static void main(String[] args){

           inter in= new cls();

           in.interFunc();      
           }
} 
```

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T05:37:06.210

接口不是一个类，它是一组规则，不能被实例化，所以它里面不能包含任何易失的数据容器。只能在接口内部设置常量，尽管不鼓励这样做，因为在接口中声明常量[违反了封装方法](http://en.wikipedia.org/wiki/Constant_interface)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T05:29:43.333

那么对于成员变量，我认为它必须是静态的，因为无法为接口创建对象，因此要访问成员变量，需要将其设为静态并通过类访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T07:37:07.153

Java-不实现多重继承但是通过接口我们可以实现。

```
interface i1{  
    int a=1;  
}  

interface i2{  
    int a=2;  
}  

class exampleInterface implements i1,i2{  
    public static void main(String...a){  

        //As interface members are static we can write like this
        //If its not static then we'll write sysout(a) ... which gives ambiguity error.
        //That's why it is static.

        System.out.println(i2.a); 
    }  
} 
```

现在因为它是静态的，它应该是最终的，因为如果它不是最终的，那么任何实现它的类都会改变值，而其他实现接口的类将接收到改变的值。例如下面如果类 x 将 r 作为静态而不是最终的。

```
class x{
    static int r=10;
}

class y extends x{
    static void fun(){
        x.r=20;
        System.out.println(x.r);
    }
}

class m extends x{
    void fun(){
        System.out.println(x.r);
    }
}

public class Test{
    public static void main(String[] args) {

        y.fun();
        m obj=new m();
        obj.fun();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T05:30:39.013

接口变量是静态的，因为 Java 接口不能单独实例化；变量的值必须在不存在实例的静态上下文中分配。final修饰符确保分配给接口变量的值是一个真正的常量，程序代码不能重新分配。请记住，界面用于显示您将要实现的“什么”而不是如何实现。所以变量应该是最终的（因为非静态变量与类的整个规范无关）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T05:35:48.777

默认情况下，Java 成员变量必须是最终的，因为接口不应该被实例化。默认情况下，它们也是静态的。因此，您无法更改它们的值，也无法在分配它们后重新分配它们。[这](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html) 是关于接口的东西。希望能帮助到你。

# jquery - 使用缓存的 jQuery 对象进行过滤

> ID：11981147
> 
> 赞同：0
> 
> 时间：2012-08-16T05:26:37.203
> 
> 标签：jquery, jquery-selectors

鉴于此html：

```
<ul>
  <li id="1">First</li>
  <li id="2">Second</li>
  <li id="3">Third</li>
</ul>​​​​​​​​​​ 
```

而这个jQuery：

```
var $first = $('li').eq(0),
    $second = $('li').eq(1),
    $third = $('li').eq(2);

$second.next($first).css('background-color','red'); 
```

为什么第三个 li 元素的背景色是红色？我希望使用缓存的 jQuery 对象（$first）作为过滤器意味着什么都找不到。

jsFiddle：

[http://jsfiddle.net/Rqw3F/1/](http://jsfiddle.net/Rqw3F/1/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:28:44.310

[`.next`](http://api.jquery.com/next/)仅将选择器*字符串*作为参数，因此您的参数被忽略并且实际上与以下内容相同：

```
$second.next().css('background-color','red'); 
```

[源](https://github.com/jquery/jquery/blob/master/src/traversing.js#L211)中的相关部分，其中忽略了非选择器字符串过滤器：

```
 if ( selector && typeof selector === "string" ) {
        ret = jQuery.filter( selector, ret );
    } 
```

# android - 强制视图的标签在应用程序中是唯一的吗？

> ID：11981151
> 
> 赞同：0
> 
> 时间：2012-08-16T05:26:51.187
> 
> 标签：android, ios, tags, cocos2d-iphone, unique

在 iOS 或其他平台中，tag 用于标识视图的类别。

```
eg) myView.tag = TAG_MY_VIEW;
for(aView in self.view.subviews)
{
if aView.tag == TAG_MY_VIEW
do something;
} 
```

当我开始为许多类使用标签时，我开始担心标签号冲突的可能性。

您如何强制标签编号在您的应用程序中是唯一的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:34:33.890

在 iOS 中，您可以存储有关任何对象的更多信息以及使用关联对象避免碰撞：

```
objc_setAssociatedObject(theObject, @"Some Other Object", "key"); 
```

检索信息：

```
NSString *info = objc_getAssociatedObject(theObject, "key"); 
```

也适用于 NSDictionary 或自定义类/任何类。

# php - 将 php 数组重新排列为嵌套的分层数组

> ID：11981153
> 
> 赞同：1
> 
> 时间：2012-08-16T05:26:59.547
> 
> 标签：php, arrays, hierarchy, taxonomy

如何使用 php 将 array#1 转换为 array#2 结构？

第一个数组是对生物体列表进行数据库查询的结果，每个生物体都按其目、科、属、种进行分类。Hierarchically Species 是各种 Genus 的子分类，Genus 分类是各种 Families 等的子分类。

在命名空间术语中，您可以像这样阅读它：

索引项[0] ---> Hemiptera.Miridae.Kanakamiris
索引项[1] ---> Hemiptera.Miridae.Neophloeobia.incisa

array#1 的键之间存在一种父/子关系，如下所示：

*   'Rank_Order' 值是 'Rank_Family' 值的父级
*   'Rank_Family' 值是 'Rank_Genus' 值的父级
*   'Rank_Genus' 值是 'Rank_Species' 值的父级

数组#1：

```
Array
(
    [0] => Array
        (
            ['Rank_Order'] => 'Hemiptera'
            ['Rank_Family'] => 'Miridae'
            ['Rank_Genus'] => 'Kanakamiris'
            ['Rank_Species'] => ''
        )   
    [1] => Array
        (
            ['Rank_Order'] => 'Hemiptera'
            ['Rank_Family'] => 'Miridae'
            ['Rank_Genus'] => 'Neophloeobia'
            ['Rank_Species'] => 'incisa'
        )
    [2] => Array
        (
            ['Rank_Order'] => 'Hemiptera'
            ['Rank_Family'] => 'Noridae'
            ['Rank_Genus'] => 'Canelbia'
            ['Rank_Species'] => 'Arissa'
        )
) 
```

以下数组是我需要的数组结构：array#2：

```
Array(
    [name]     => 'Hemiptera'
    [children] => Array(

        [0] => Array(
            [name]     => 'Miridae'
            [children] => Array(

                [0] => Array(
                    [name]     => 'Kanakamiris'
                    [children] => Array(
                    )
                )
                [1] => Array(
                    [name]     => 'Neophloeobia'
                    [children] => Array(

                        [0] => Array(
                            [name] => 'incisa'
                            [children] => Array(
                            )
                        )
                    )
                )
            )
        )
        [1] => Array(
            [name]     => 'Noridae'
            [children] => Array(

                [0] => Array(
                    [name]     => 'Canelbia'
                    [children] => Array(

                        [0] => Array(
                            [name] => 'Arissa'
                            [children] => Array(
                            )
                        )
                    )
                )
            )
        )
    )
) 
```

我在堆栈溢出中看到了类似的问题，尽管在我的情况下无法使用它们。例如。[php-reorder-array-to-reflect-parent-id-hierarchy](https://stackoverflow.com/questions/4216875/php-reorder-array-to-reflect-parent-id-hierarchy)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T23:21:18.777

我不认为这对于非常大的数组来说会非常高效，但它适用于您的场景（[这是一个示例](http://ideone.com/eQEfv)）。

```
 $array = ...
 $levels = array('Rank_Order', 'Rank_Family', 'Rank_Genus', 'Rank_Species');

 function get_children($parent, $lev, $orig, $levels){
     if($lev + 1 > count($levels)){
          return array();
     }

     $seen = array();
     $children = array();
     foreach($orig as $node){
         if($node[$levels[$lev]] == $parent && !in_array($node[$levels[$lev+1]], $seen)){
             $seen[] = $node[$levels[$lev+1]];
             $children[] = get_children($node[$levels[$lev+1]], $lev+1, $orig, $levels);
         }
     }
     return array('name' => $parent, 'children' => $children);
 }

 function hier($orig, $levels){
     $seen = array();
     $result = array();
     foreach($orig as $node){
         if(!in_array($node[$levels[0]], $seen)){
              $seen[] = $node[$levels[0]];
              $result[] = get_children($node[$levels[0]], 0, $orig, $levels);
         }
     }
     return $result;
 }

 print_r($array);
 print_r(hier($array, $levels)); 
```

# azure - 我可以使用一些中间 API 将诊断数据传输到不同帐户的 Azure 存储吗

> ID：11981155
> 
> 赞同：4
> 
> 时间：2012-08-16T05:27:07.367
> 
> 标签：azure, azure-storage, azure-diagnostics

我正在构建窗口 azure 应用程序监视实用程序，为此我必须加载测试我的 REST API（在每个区域上）以通过最终用户应用程序上的启动任务获取性能数据，我在[这里](https://stackoverflow.com/questions/11862963/suitable-way-to-scale-rest-api-in-window-azure-to-handle-thousands-of-requests)问过这个问题并得到了很好的答复，我我正在做各种测试。同时在我的脑海中，我有一些想法，如果我可以启用最终用户的 azure 应用程序的诊断数据并将该数据远程传输到我的存储帐户。可能吗？

如果是，那么我认为如果两者都在不同的地区，它会向最终用户收费？！我是否可以构建某种类型的中间机制（所有区域的 REST API），通过该机制诊断数据可以传输到我的 azure 存储帐户，这样就不会再向最终用户收费？并使用这种方式，我将在正确的方向上获取性能数据，并可以消除启动任务的依赖性。

如果我理解上述想法有问题，请纠正我。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T05:38:31.467

问题是谁拥有默认收集诊断数据的存储帐户？将数据从一个存储帐户移动到另一个存储帐户时，涉及两种成本：事务成本和带宽成本。交易费用将始终向存储帐户的所有者收取。您可以通过在与客户的存储帐户相同的数据中心中托管应用程序，然后通过让您的应用程序充当源存储和目标存储之间的代理，将数据传输到您的存储帐户，以某种方式阻止您的客户支付带宽成本帐户。

另一个想法是在您的订阅下创建一个单独的存储帐户，并让您的客户使用它来存储诊断数据。

# objective-c - 在mac中使用Klocwork分析一个iOS应用

> ID：11981160
> 
> 赞同：1
> 
> 时间：2012-08-16T05:27:29.543
> 
> 标签：objective-c, ios, xcode, static-analysis, klocwork

我必须使用 Klocworks 对 iPhone 应用程序进行静态分析。我已经在 mac os X 上安装了 Klockworks，并且该项目是使用 XCode 编写的。

但我没有开发者证书（也不想购买，因为我只想做静态分析）。使用 xocdebuild 命令不会构建应用程序。

有人可以告诉我如何对 xcode 项目进行静态分析吗？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T13:40:01.517

也许我可以在这里为您节省一些时间。Klocwork Insight 可以安装在 Mac OS/X 上，但与我们安装的其他平台一样，它支持 C/C++ 和 Java（以及 Windows 上的 C#）。我们不支持您的 iOS 应用程序可能需要的 Objective-C 分析。

请注意，XCode 内置了 LLVM 静态分析器（XCode 中的主要操作之一是构建和分析），虽然不是特别深入，但可以进行一些非常好的基于合同的分析，并且毕竟支持 Objective-C 和iOS 框架。

问候， Gwyn Fisher 首席技术官兼研发副总裁，Klocwork Inc.

# clojure - 如何限制 Web 应用程序中的屏幕访问..？

> ID：11981166
> 
> 赞同：3
> 
> 时间：2012-08-16T05:28:04.820
> 
> 标签：clojure, web, noir

我已经开发了一个应用程序，直到现在我已经成功地通过不显示/隐藏某些屏幕的菜单选项或按钮来限制屏幕访问。但现在的问题是用户在地址栏中输入 url 时能够访问屏幕。

我知道我不是第一个这样做的人，所以必须有某种标准做法。因此，如果有人知道任何图书馆或某种方式来做到这一点，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:34:46.733

*免责声明 - 我不知道这将如何转化为 Clojure，因为我从未使用过它。*

通常，您使用授权处理程序装饰响应视图的方法。该处理程序知道如何与您的身份验证后端对话。它从当前上下文中获取用户标识符（可以是用户 ID/用户名等），并在后端查询用户对所请求视图的授权。

如果通过，则显示视图。

如果它被拒绝，则根据业务规则（和安全准则）采取行动。这些可以像友好的“哎呀，这里不允许你”一样简单；记录操作，然后结束用户的会话。

如果您的应用程序有一组有限的端点 (URL)，您可以创建一个到用户的端点静态映射并将其用作您的访问控制列表 (ACL)。然而，在大多数现代应用程序中，ACL 是跨一系列对象控制的——并且端点（URL）不受限制，因为它们是动态的。例如`/inventory/product/1`,`/user/admin/3`等。

更新：

此[链接](http://www.oodesign.com/decorator-pattern.html)提供了装饰器模式的可视化图表。

更新 2：

授权库提供了一些帮助程序来进行授权检查（“这个用户是否允许查看”），但代码中的实现由单个应用程序决定。

通常您会使用一个或多个*身份验证库*（如 oath）；但授权部分由您的实施决定。

一个快速的 google 引导我[使用沙条保护 clojure web 应用程序，](http://formpluslogic.blogspot.com/2010/08/securing-clojure-web-applications-with.html)这应该与您更相关。

# mysql - xampp mysql 使用密码拒绝用户'root'@'localhost'的访问：是

> ID：11981167
> 
> 赞同：0
> 
> 时间：2012-08-16T05:28:10.683
> 
> 标签：mysql, xampp

我坚持这个错误。我没有root密码，但仍然得到这个。请帮助我，检查我将提供的屏幕截图..

![在此处输入图像描述](../Images/a3986b78e6416d2d7f84ab3f67bed797.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:39:27.403

此错误表示密码已指定且错误。在设置了连接字符串或密码的 php 页面上检查它。

# facebook - 无法从 Facebook 检索用户的邮件地址

> ID：11981169
> 
> 赞同：-1
> 
> 时间：2012-08-16T05:28:26.550
> 
> 标签：facebook, facebook-graph-api

我已经正确地创建了一个`Facebook`应用程序，将`email`标签放在用户权限中，放入该`Auth Dialog`部分。

我无法访问用户邮件的问题..我没有收到此参数作为响应，我只收到：`last_name`，，`firt_name`和`birthday`其他不必要的数据，我需要电子邮件..

我知道如果用户接受身份验证对话框条件是可能的，但是出于什么原因我无法检索它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:06:33.317

我也遇到过这个问题。我们对身份验证对话框权限设置拥有所有必需的权限。但在真正使用该应用程序时不会显示。

我们使用范围来修复它。尝试这个

```
$loginUrl = $facebook->getLoginUrl(array( 'scope'=>'{permission that your app require}')); 
```

例如

```
$loginUrl = $facebook->getLoginUrl(array( 'scope'=>'email,read_friendlists')); 
```

通过添加范围变量，身份验证对话框将要求这些权限。可能这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:38:58.320

假设`email`已授予权限（调用 /me/permissions 将验证这一点），调用`/me/?fields=email`应生成用户的电子邮件地址。

如果没有发生这种情况，您将需要更清楚地了解问题所在。

# ruby - 改变当前目录

> ID：11981170
> 
> 赞同：2
> 
> 时间：2012-08-16T05:28:27.800
> 
> 标签：ruby

我已经编写了一个 Ruby 脚本来在我的本地机器上安装 Apache Tomcat。当我运行脚本时，我无法将当前目录更改为我想要的目录：

```
cmd = "mkdir /usr/java"
system(cmd)

cmd = "cp /home/user/Downloads/file.txt   /usr/java/"
system(cmd)

sleep(2)      

cmd = "cd /usr/java/"
system(cmd) 
```

在上面的代码中，`mkdir`and`cp`命令可以正常工作，但问题出在`cd`命令上。在它之后我的当前目录仍然是`/`，即目录的父`/usr`目录。

**更新：**使用`Dir.chdir()`工作，但我在设置`JAVA_HOME`和`PATH`变量时面临另一个问题。我的代码是：

```
cmd = "JAVA_HOME=/usr/java/jdk1.7.0_05"
system(cmd)
cmd = "export JAVA_HOME"
system(cmd)
cmd = "PATH=$JAVA_HOME/bin:$PATH"
system(cmd)
cmd = "export PATH"
system(cmd) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T06:22:02.500

每个调用`system()`都与其他调用完全分开运行；它们之间没有共享隐藏的 shell 会话。（事实上​​，我很确定它们都在各自的进程中运行——`cd`有效，但不会影响您的进程。）您可以使用`Dir.chdir()`. 您也不需要在使用命令之前将它们放入变量中。我会做这样的事情：

```
system("mkdir /usr/java")
system("cp /home/user/Downloads/file.txt /usr/java/")
Dir.chdir("/usr/java/") 
```

`sleep()`请注意，如果您只是在等待复制完成，则无需这样做；`system()`已经在等待命令完成。如果没有`sleep(2)`，无论如何都会有些脆弱。

**更新：**根据您更新的信息，看起来您最好使用 shell 脚本，至少对于脚本的这一部分。您*可以*通过 设置 Ruby 中的环境变量`ENV`，但这会很尴尬。这样的事情更有意义：

```
#!/bin/bash

mkdir /usr/java
cp /home/user/Downloads/file.txt /usr/java/
cd /usr/java/
export JAVA_HOME=/usr/java/jdk1.7.0_05
export PATH=$JAVA_HOME/bin:$PATH 
```

如果您需要从 Ruby 中调用它，只需使用`system()`运行脚本即可。请务必设置可执行位，或使用您的外壳程序调用它（例如`system("bash script_name")`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T05:45:51.497

您可以尝试使用 `Dir.chdir '/usr/java/'`

要查看 irb 会话中的当前文件，您可以执行 `ls`

# jquery - 如何在窗口调整大小时调整 div 的最大高度？

> ID：11981174
> 
> 赞同：15
> 
> 时间：2012-08-16T05:28:58.517
> 
> 标签：jquery, html, css

我一直在寻找答案。我在这里通读了一些东西，似乎没有人能解决我想做的事情。当窗口大小达到某个点时，我想调整 div 的最大高度。主菜单位于页面底部，内容从菜单中滑出。

我所拥有的示例：

```
<div class="content">
    //some content pics/text etc.
</div> 
```

CSS：

```
.content { width: 550px; overflow: auto; }` 
```

现在显然我可以在css中设置最大高度，但我不需要它在屏幕尺寸达到800px高度之前生效。如果我在这里遗漏了一些简单的东西，请告诉我。

我愿意使用 jQuery 或 css 规则。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-16T05:39:25.347

```
$(window).on('resize', function(){
    if($(this).height() <= 800){
        $('.content').css('max-height', '800px'); //set max height
    }else{
        $('.content').css('max-height', ''); //delete attribute
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T05:37:09.900

我有一个例子：http: [//jsfiddle.net/sechou/WwpuJ/](http://jsfiddle.net/sechou/WwpuJ/)

```
$(window).resize(function () { 
   if($(window).height() <= 800){
       $('div.content').css('max-height', 800);
   }else{
       $('div.content').css('max-height', ''); 
   }  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-18T09:52:03.330

我知道这是一篇过时的帖子，但我想知道纯 CSS 的解决方案是否会（并且现在会）更好？

```
.content {
    // No need for max-height here
}

@media(max-height:800px){
    .content {
        max-height:800px;
    }
} 
```

# database - ORA-12805: 并行查询服务器意外死亡

> ID：11981184
> 
> 赞同：0
> 
> 时间：2012-08-16T05:29:52.687
> 
> 标签：database, oracle, oracle11g

在我们的一个 RAC 实例上，我们经常遇到错误。由于同样的错误，应用程序被挂起并导致问题。

```
Sat Aug 04 06:57:26 2012
IPC Send timeout detected.Sender: ospid 28201
Receiver: inst 1 binc 8 ospid 3537
GATHER_STATS_JOB encountered errors.  Check the trace file.
Errors in file /opt/oracle/db/diag/rdbms/mdspdb/mdspdb5/trace/mdspdb5_j001_28201.trc:
ORA-12805: parallel query server died unexpectedly 
```

我们得到的又一个错误如下：

```
Thu Aug 09 03:43:05 2012
IPC Send timeout detected.Sender: ospid 18645
Receiver: inst 1 binc 8 ospid 3537
GATHER_STATS_JOB encountered errors.  Check the trace file.
Errors in file /opt/oracle/db/diag/rdbms/mdspdb/mdspdb5/trace/mdspdb5_j002_18645.trc:
ORA-20011: Approximate NDV failed: ORA-12805: parallel query server died unexpectedly 
```

跟踪文件的输出是：

```
Trace file /opt/oracle/db/diag/rdbms/mdspdb/mdspdb5/trace/mdspdb5_j001_22631.trc
Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - 64bit Production
With the Partitioning, Real Application Clusters, OLAP, Data Mining
and Real Application Testing options
ORACLE_HOME = /opt/oracle/db/product/11.1.0/db_1
System name:    Linux
Node name:  mdspdb05
Release:    2.6.16.46-0.12-smp
Version:    #1 SMP Thu May 17 14:00:09 UTC 2007
Machine:    x86_64
Instance name: mdspdb5
Redo thread mounted by this instance: 5
Oracle process number: 107
Unix process pid: 22631, image: oracle@mdspdb05 (J001)

*** 2012-08-15 03:43:12.742
*** SESSION ID:(486.34904) 2012-08-15 03:43:12.742
*** CLIENT ID:() 2012-08-15 03:43:12.742
*** SERVICE NAME:(SYS$USERS) 2012-08-15 03:43:12.742
*** MODULE NAME:(DBMS_SCHEDULER) 2012-08-15 03:43:12.742
*** ACTION NAME:(ORA$AT_OS_OPT_SY_40411) 2012-08-15 03:43:12.742

IPC Send timeout detected.Sender: ospid 22631
Receiver: inst 1 binc 8 ospid 3537
SKGXP: SKGXPCTX: 0x0x2abb52d24a38 ctx
SKGXP: 
SKGXP: WAIT HISTORY
SKGXP: Time(msec)    Wait Type   Return Code
SKGXP: ----------    ---------   ------------
SKGXP: 2501      NORMAL      TIMEDOUT
SKGXP: 0         NORMAL      TIMEDOUT
SKGXP: 0         NORMAL      TIMEDOUT
SKGXP: 2500      NORMAL      TIMEDOUT
SKGXP: 0         NORMAL      TIMEDOUT
SKGXP: 0         NORMAL      TIMEDOUT
SKGXP: 2503      NORMAL      TIMEDOUT
SKGXP: 0         NORMAL      TIMEDOUT
SKGXP: 0         NORMAL      TIMEDOUT
SKGXP: 2501      NORMAL      TIMEDOUT
SKGXP: 0         NORMAL      TIMEDOUT
SKGXP: 0         NORMAL      TIMEDOUT
SKGXP: 2503      NORMAL      TIMEDOUT
SKGXP: 0         NORMAL      TIMEDOUT
SKGXP: 0         NORMAL      TIMEDOUT
SKGXP: 2500      NORMAL      TIMEDOUT
SKGXP: wait delta 61 sec (61423 msec) ctx ts 0x79e31f last ts 0x79e31f
SKGXP: user cpu time since last wait 0 sec 0 ticks
SKGXP: system cpu time since last wait 0 sec 0 ticks
SKGXP: locked 1
SKGXP: blocked 25048
SKGXP: timed wait receives 15
SKGXP: admno 0x66859bfb admport:
SKGXP: SSKGXPT 0x52d2597c flags  sockno 18 IP 192.168.1.10 UDP 61826
SKGXP: context timestamp 0x79e31f
SKGXP: buffers queued on port 0x2abb53449f50
SKGXP: 
SKGXP:    Dumping Connection Handle Table
SKGXP:     sconno     accono   ertt  state   seq#   RcvPid   TotCreditsSKGXP:   sent rtrans   acks
SKGXP:     CNH Table Bucket: 0
SKGXP: 0x03a8c901 0x50790ec9 46982647250960 46982647250948 46982647284070 46982647267591 46982647250952SKGXP:    363d      1d  33126d
SKGXP:     CNH Table Bucket: 1
SKGXP: 0x03a8c902 0x051d84d8     16 46982647250948 46982647284112 46982647259415 46982647250952SKGXP:    405d      0d  33168d
SKGXP:     CNH Table Bucket: 2
SKGXP: 0x03a8c903 0x51d441b2     16 46982647250948 46982647284217 46982647258187 46982647250952SKGXP:    510d      0d  33273d
SKGXP:     CNH Table Bucket: 3
SKGXP: 0x03a8c904 0x7d38c1af     16 46982647250948 46982647283952 46982647267615 46982647250952SKGXP:    245d      0d  33008d
SKGXP:     CNH Table Bucket: 4
SKGXP: 0x03a8c905 0x22782e02     16 46982647250948 46982647284097 46982647283080 46982647250952SKGXP:    390d      0d  33153d
SKGXP:     CNH Table Bucket: 5
SKGXP: 0x03a8c906 0x19e5dbdb     16 46982647250948 46982647284141 46982647283122 46982647250952SKGXP:    434d      0d  33197d
SKGXP:     CNH Table Bucket: 6
SKGXP: 0x03a8c907 0x024222c8     16 46982647250948 46982647283839 46982647258304 46982647250952SKGXP:    132d      0d  32895d
SKGXP:     CNH Table Bucket: 7
SKGXP: 0x03a8c908 0x1f3d5569     16 46982647250948 46982647284073 46982647283097 46982647250952SKGXP:    366d      0d  33129d
SKGXP:     CNH Table Bucket: 8
SKGXP: 0x03a8c909 0x4b4e08b3     16 46982647250948 46982647283990 46982647267605 46982647250952SKGXP:    283d      1d  33046d
SKGXP:     CNH Table Bucket: 9
SKGXP: 0x03a8c90a 0x32e47d79     16 46982647250948 46982647283856 46982647258242 46982647250952SKGXP:    149d      0d  32912d
SKGXP:     CNH Table Bucket: 10
SKGXP: 0x03a8c90b 0x60420275     16 46982647250948 46982647283829 46982647259471 46982647250952SKGXP:    122d      0d  32885d
SKGXP:     CNH Table Bucket: 11
SKGXP: 0x03a8c90c 0x5521db22     16 46982647250948 46982647283834 46982647259493 46982647250952SKGXP:    127d      0d  32890d
SKGXP:     CNH Table Bucket: 12
SKGXP: 0x03a8c90d 0x1696da78     16 46982647250948 46982647283708 46982647254481 46982647250952SKGXP:      1d    373d      0d
SKGXP: slot 3 rqh=0x2abb52d2e0e8 seq=32763 len=2144 accno=0x1696da78 start TS=0x2f31c rt TS=0x79e56c X CNT=374
SKGXP: 
SKGXP:    Dumping Accept Handle Table
SKGXP:        ach     accono     sconno      admno  state     SndPid   seq#    rcv rtrans   acks    credits
Dumping KSXP Connection Handle: cnh: 0x2abb54b97098
Link in Component Context : 0x2abb52fc0c08 <- cnh -> 0x2abb52fc0c08
Link in Connection Cache  : 0x2abb53070050 <- cnh -> 0x2abb52f68158
Pending Async Sends       : First: 0x2abb52d2e030 Last 0x2abb52d2e030
Name: 
State: 1 ==> OPEN
Flags: 0x0  ==> 
Connect request handle: (nil)
Miners Canary         : (nil)
OSD Connection handle : 0x2abb55286938
Stats pointer         : 0x19ee7f470
System incarnation when connection was made: 78
Dumping Target id for cnh
vers: 1 type: (1 ==> KSXP_TRANSPORT_ID_SKGXPPID) inst: 1 ptid: 401 ukey: 8
Protocol Info: vendor: 1 proto: 2 maj: 3 min: 0
pnum: 91 ospid: 3537
p1_pad1: 0 p2_pad1: (nil)
pad2: 0 pad3: 0
Dumping SKGXP Port ID: 0x2abb54b97120
SKGXP: SKGXPID 0x2abb54b97120 
SKGXP: skgxp port number 0x25a32042 process id 3537
SKGXP: admin port id
SKGXP: SKGXPGPID 0x7fff596feb58
SKGXP:  Internet address 192.168.1.12
SKGXP:  UDP port number 28958
Dumping connection stats 0x19ee7f470
Dumping SKGXP Connection Handle: osd cnh: 0x2abb55286938
SKGXP: SKGXPCNH: 0x2abb55286938 SKGXPCON_OPEN (2) sconno 3a8c90d accono 1696da78 admno fd8255e
SKGXP:  Remote admin port
SKGXP: SSKGXPT 0x55286974 flags SSKGXPT_WRITE sockno 18 IP 192.168.1.12 UDP 28958
SKGXP:  Remote data port
SKGXP: SSKGXPT 0x55286a08 flags SSKGXPT_WRITE sockno 18 IP 192.168.1.12 UDP 29092
SKGXP:  no disconnect notification request handle
SKGXP:   next seqno 32764 credits 7 ertt 16 resends on con 488510

*** 2012-08-15 03:43:12.792
Submitting synchronized dump request [268435460]

*** 2012-08-15 03:43:14.796
kxfp_send_callback
        Send timed out to slave 0 inst 1 (qref 0x19e82bf88)
kxfpgsg 
        Error 12805 encountered

*** 2012-08-15 03:43:14.831
ORA-20011: Approximate NDV failed: ORA-12805: parallel query server died unexpectedly

*** 2012-08-15 03:43:14.831
GATHER_STATS_JOB: GATHER_TABLE_STATS('"IMUSE01"','"SUBSCRIBEINFO"','""', ...)
ORA-20011: Approximate NDV failed: ORA-12805: parallel query server died unexpectedly 
```

Oracle 版本：**Oracle 11.1.0.6.0 RAC**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:46:24.333

这是 Oracle RAC 中的一个错误。我们将版本升级到 Oracle 11.1.0.7

现在问题解决了

# jobs - 开发人员 minijobs 门户？

> ID：11981185
> 
> 赞同：-2
> 
> 时间：2012-08-16T05:30:18.373
> 
> 标签：jobs

我不知道这是否存在，但我正在为开发人员寻找一个 minijob 门户。我想为金钱提供迷你开发者任务。

这存在吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:26:32.040

我知道的唯一一个是 freelancer.com 我相信那里的很多人都会对快速项目感兴趣。

或者另一种方法是一对一地与开发人员联系并提出这些迷你工作，例如，您可以通过贝宝支付他们

# android - 从 twitter 应用程序获取访问令牌以进行 oauth

> ID：11981186
> 
> 赞同：0
> 
> 时间：2012-08-16T05:30:21.807
> 
> 标签：android, twitter, android-intent, twitter-oauth, android-twitter

我不想显示 webview 让用户输入登录名和密码，而是让用户使用他们的官方 twitter 应用程序进行授权（如果你知道，facebook api 也会这样做 - 如果安装了 facebook 应用程序，它会运行这个返回访问令牌的应用程序）。

那么，也许 Twitter 应用程序也有这样做的意图？（从 twitter 应用程序获取访问令牌，用于 oauth 以在我自己的应用程序中授权用户）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:43:36.633

您可以做的是解析您收到的 HTML 文件并获取您需要的信息（oauth_verifier、authenticity_token 和您单击未授权应用程序的按钮的文本）。要发送用户的凭据以授权应用程序，请发布您通过`POST oauth/authorize`端点从 HTML 页面获取的凭据和信息（在 Twitter 开发人员上未记录）。不要犹豫，看看使用 Firebug 或 Opera Dragonfly 等工具对 HTML 页面进行身份验证的效果（取决于您用来执行此操作的浏览器）。

# python - Flask-Assets 和 Flask-Testing 抛出 RegisterError: another bundle is already registered

> ID：11981187
> 
> 赞同：4
> 
> 时间：2012-08-16T05:30:26.377
> 
> 标签：python, unit-testing, flask, webassets

我有我的 Flask 应用程序，它使用 Flask-Assets 并且在尝试运行单元测试用例时，除了第一个测试用例之外，其他用例失败并出现以下 RegisterError。

```
======================================================================
ERROR: test_login_page (tests.test_auth.AuthTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/cnu/env/flenv/lib/python2.7/site-packages/nose/case.py", line 133, in run
    self.runTest(result)
  File "/Users/cnu/env/flenv/lib/python2.7/site-packages/nose/case.py", line 151, in runTest
    test(result)
  File "/Users/cnu/env/flenv/lib/python2.7/site-packages/flask_testing.py", line 72, in __call__
    self._pre_setup()
  File "/Users/cnu/env/flenv/lib/python2.7/site-packages/flask_testing.py", line 80, in _pre_setup
    self.app = self.create_app()
  File "/Users/cnu/Projects/Bookworm/App/tests/test_auth.py", line 8, in create_app
    return create_app('testing.cfg')
  File "/Users/cnu/Projects/Bookworm/App/bookworm/__init__.py", line 118, in create_app
    configure_extensions(app)
  File "/Users/cnu/Projects/Bookworm/App/bookworm/__init__.py", line 106, in configure_extensions
    assets.register('js_all', js)
  File "/Users/cnu/env/flenv/src/webassets/src/webassets/env.py", line 374, in register
    'as "%s": %s' % (name, self._named_bundles[name]))
RegisterError: Another bundle is already registered as "js_all": <Bundle output=assets/packed.js, filters=[<webassets.filter.jsmin.JSMin object at 0x10fa8af90>], contents=('js/app.js',)> 
```

我对为什么会在第一个测试用例运行之前发生这种情况的理解，create_app 创建了一个 app 实例，并为所有其他测试用例维护。

我尝试`del(app)`了拆卸方法，但没有帮助。

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-06T10:35:39.560

您可能有一个用于 assets 环境的全局对象，您已将其声明为：

在文件中`app/extensions.py`：

```
from flask.ext.assets import Environment
assets = Environment() 
```

然后，在你的`create_app`方法的某个地方，你应该初始化环境：

在文件中`app/__init__.py`：

```
from .extensions import assets

def create_app(): 
    app = Flask(__name__)
    ...
    assets.init_app(app)
    ...
    return app 
```

问题是，当您使用应用程序初始化环境时，注册的捆绑包不会被清除。因此，您应该在 TestCase 中手动执行此操作：

在文件中`tests/__init__.py`

```
from app import create_app
from app.extensions import assets

class TestCase(Base): 

    def create_app(self): 
        assets._named_bundles = {} # Clear the bundle list
        return create_app(self) 
```

希望这会有所帮助，干杯

# selenium - 使用 Selenium 捕获新打开的窗口

> ID：11981189
> 
> 赞同：1
> 
> 时间：2012-08-16T05:30:57.427
> 
> 标签：selenium

我正在使用 Selenium 客户端驱动程序来运行用 C# 构建的测试。我遇到了一个问题，即测试导航到一个页面并单击表单中的一个按钮，其目标设置为`_blank`使其打开一个新窗口。但是，打开的新页面返回的是 XML 文档，而不是典型的网页。Selenium 似乎对此有问题，因为单击按钮并打开新窗口时它会挂起。`click`方法执行后没有指令。测试最终因错误而失败`Timed out running command`。

任何帮助/指导将不胜感激。我已经搜索了网络，但没有看到任何人遇到这个打开的页面不是典型网页的特定问题，我认为这是问题的核心，因为 Selenium 无法真正操纵这个新打开的窗口。我会发布代码，除了实际上我所做的只是`click`在一个按钮上调用该方法，这会导致一个新窗口打开。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:46:33.023

解决在新窗口中打开的问题。我通常会获取要打开的链接的 url，而不是使用 selenium.click()，而是使用：

*selenium.open("http://yourwebsite/yourlink")*

这有助于我只在同一个窗口上（避免打开新窗口或选项卡），当在此页面上完成测试并且您想切换回原始页面时，您可以再次使用：

*selenium.open("http://whatever/")*

# javascript - 应用程序的最佳目录结构——节点+道场：这行得通吗？

> ID：11981190
> 
> 赞同：0
> 
> 时间：2012-08-16T05:31:14.623
> 
> 标签：javascript, node.js, dojo

我正在尝试为小型 Dojo 应用程序（它是一个基本的预订系统）制定最佳目录结构。我刚刚写完登录/注册。

这是我现在拥有的：

```
 .

 ├── app
 │   ├── client
 │   │   ├── JsonRest.js
 │   │   ├── lib
 │   │   │   ├── defaultSubmit.js
 │   │   │   ├── globals.js
 │   │   │   ├── globalWidgets.js
 │   │   │   ├── Logger.js
 │   │   │   └── stores.js
 │   │   ├── login.js
 │   │   ├── main.css
 │   │   ├── main.js
 │   │   ├── register.js
 │   │   ├── rrl.css
 │   │   ├── TODO.txt
 │   │   ├── validators.js
 │   │   └── widgets
 │   │       ├── _AjaxValidatorMixin.js
 │   │       ├── AlertBar.js
 │   │       ├── AppMainScreen.js
 │   │       ├── BusyButton.js
 │   │       ├── css
 │   │       │   └── AlertBar.css
 │   │       ├── Dashboard.js
 │   │       ├── LoginForm.js
 │   │       ├── RegisterForm.js
 │   │       ├── SearchPage.js
 │   │       ├── StackFading.js
 │   │       ├── _StackFadingMixin.js
 │   │       ├── TabFading.js
 │   │       ├── templates
 │   │       │   ├── LoginForm.html
 │   │       │   ├── RetypePassword.html
 │   │       │   └── SearchPage.html
 │   │       ├── ValidationEmail.js
 │   │       ├── ValidationPassword.js
 │   │       ├── ValidationUsername.js
 │   │       ├── ValidationWorkspace.js
 │   └── server
 │       ├── AppErrorHandler.js
 │       ├── auth.js
 │       ├── db.js
 │       ├── globals.js
 │       ├── node_modules
 │       │   ├── express
 │       │   ├── jade
 │       │   ├── mongodb
 │       │   └── mongoose
 │       ├── public
 │       │   ├── app -> ../../client/
 │       │   └── libs -> ../../../libs
 │       ├── routes
 │       │   └── routes.js
 │       ├── server.js
 │       ├── test.js
 │       └── views
 │           ├── index.jade
 │           ├── login.jade
 │           └── register.jade
 ├── libs
     ├── build-report.txt
     ├── dojo -> dojo-1.7.1
     ├── dojo-1.7.1
     │   ├── app -> ../../app/client
     │   ├── dijit
     │   ├── dojox
     │   ├── dojo
     │   └── util
     └── dojo-1.8.0
         ├── app -> ../../app/client
         ├── dijit
         ├── dojox
         ├── dojo
         └── util 
```

其背后的想法是：

*   “app”目录将在某个地方的 git 存储库中（实际上是时候制作一个了）。它有目录“client”（所有客户端代码）和“server”（节点代码）。

*   在“libs”中，我将添加 dgrid 等内容。我还注意到 Dojo 1.8 可以在节点中加载（！）。我稍后会玩这个 - 令人兴奋！

现在，在这里您可以看到我基本上使用符号链接来使事情正常进行。

服务器端：在“public”下，我有指向“app”和“libs”的符号链接。这样，我可以从 HTML 中访问，`/libs/dojo/dojox/form/resources/BusyButton.css`或（重要的！）`/libs/dojo/dojo/dojo.js`和`/app/main.js`（然后使用简单的实例 AppMainScreen`require(["app/widgets/AppMainScreen" ], function( AppMainScreen){ ...`

客户端：我有一个指向最新 Dojo 的符号链接（我的样板文件仍然存在 Dojo 1.8 的问题，所以我现在仍在使用 1.7）。但是，为了在应用程序中进行这项工作：

```
require(["app/widgets/AppMainScreen" ], function( AppMainScreen){ 
```

我在 Dojo 中有一个指向“应用程序”的符号链接。

现在：我了解了基础知识（例如，我*认为*Dojo 中“app”的符号链接可以通过简单地使用 DojoConfig 来解决）。但是...嗯，这是我目前 100% 未优化的、从未构建的树。

我可以请你们给我对这棵树的认可吗？一旦我开始“构建”东西，它会起作用吗？（我离做这件事还有很长的路要走，但我最终会，否则我的[怀孕的]妻子会发疯的！）。避免指向“应用程序”的符号链接是我*认为*我应该做的事情之一（但话又说回来，我需要这样做吗？）。

谢谢！

默克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:57:00.643

虽然不是节点的粉丝（也不是知识渊博），但在我看来，它有一个巨大的 javascript 库:)

我建议您真的应该考虑制作一个 buildprofile 并使用前缀键来设置脚本的位置。作为构建的结果，您将自动获得一个与 dojo、dijit、dojox 共存的“app”文件夹。

实际上，我建议一旦您的 dojo 应用程序层有一个单独的存储库，只需在 SDK 根目录中进行检查，例如：

```
wget download.dojotoolkit.org/dojotoolkit-1.7.2-src.tar.gz -O djsrc.tar.gz && tar xfz djsrc.tar.gz && rm djsrc.tar.gz
cd dojotoolkit-1.7.2-src/
svn checkout http://example/mylibrary app
sh utils/buildscripts/build.sh --profile app/package.profile --release /var/nodejs/docroot/lib/ 
```

在您的主文档根目录 (/lib) 中的其他地方开发您的 app.widgets 完全没有害处。你可以简单地设置一个全局变量来告诉加载器去哪里看。

如果建成，则不需要任何东西，但就您当前的树而言，尝试这样的事情

```
<script>
var isDevelopement = true;

var dojoConfig = {
  packages :  (isDevelopement) ? [ name: 'app', location: '/app/client/' ] : []
}
</script> 
```

# ios - GLKit / OpenGL-ES 2.0 - 2D 对象世界空间和 2D 相机

> ID：11981193
> 
> 赞同：1
> 
> 时间：2012-08-16T05:32:07.720
> 
> 标签：ios, opengl-es, camera, 2d, glkit

我是 OpenGL-es 2.0 和 GLKit 的新手，想问一个问题。我试图在 2D 相机上找到一个很好的例子，但找不到，所以我希望你们能帮助我：D

--

1) 首先，我有一个对象，我将它的位置存储在 GLKVector2 中。我想知道如何在世界空间中绘制它。

2）我有一个“2D 相机”类，存储为 CGRect 及其世界位置和大小。它的大小可能会根据我想要的“缩放”而改变。有什么方法可以轻松地将世界空间中的对象绘制到这个 2D 相机中？是否也需要任何优化？例如不在此 2D 相机之外绘制对象，以及剪裁在 2D 相机之外具有某些部分的对象。

3）如果对象被绘制到这个 2D 相机中，我如何应用剪辑/缩放/等效果，使其适合设备屏幕，并将其绘制在屏幕上？

--

我见过很多关于模型、视图和投影矩阵的东西，但我不明白。我只完成了 XNA/Android 位图绘制调用，将它们绘制到位图上，并将位图的大小调整到屏幕上。

# c# - 将数据库表中的日期绑定到 ASP.NET 日历

> ID：11981195
> 
> 赞同：0
> 
> 时间：2012-08-16T05:32:47.250
> 
> 标签：c#, asp.net

我一直在尝试实现[这个链接](http://msdn.microsoft.com/en-us/library/ms228044.aspx)

到我的基本 ASP.NET 日历，但我真的很担心我使用哪种方法？我用这种方式，没有任何效果..

```
public partial class WebForm2 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            calendar1.VisibleDate = DateTime.Today;
            FillTrainingDataset();
        }

        protected DataSet dsTraining;

        protected void FillTrainingDataset()
        {
            DateTime firstDate = new DateTime(calendar1.VisibleDate.Year,
                calendar1.VisibleDate.Month, 1);
            DateTime lastDate = GetFirstDayOfNextMonth();
            dsTraining = GetCurrentMonthData(firstDate, lastDate);
        }

        protected DateTime GetFirstDayOfNextMonth()
        {
            int monthNumber, yearNumber;
            if (calendar1.VisibleDate.Month == 12)
            {
                monthNumber = 1;
                yearNumber = calendar1.VisibleDate.Year + 1;
            }
            else
            {
                monthNumber = calendar1.VisibleDate.Month + 1;
                yearNumber = calendar1.VisibleDate.Year;
            }
            DateTime lastDate = new DateTime(yearNumber, monthNumber, 1);
            return lastDate;
        } 

  protected DataSet GetCurrentMonthData(DateTime firstDate,
             DateTime lastDate)
{
    DataSet dsMonth = new DataSet();
    ConnectionStringSettings cs;
    cs = ConfigurationManager.ConnectionStrings["KKSTechConnectionString"];
    String connString = cs.ConnectionString;
    SqlConnection dbConnection = new SqlConnection(connString);
    String query;
    query = "SELECT StartDate, EndDate FROM Tentative_Orders";
    SqlCommand dbCommand = new SqlCommand(query, dbConnection);
    dbCommand.Parameters.Add(new SqlParameter("@StartDate", 
        firstDate));
    dbCommand.Parameters.Add(new SqlParameter("@EndDate", lastDate));

    SqlDataAdapter sqlDataAdapter = new SqlDataAdapter(dbCommand);
    try
    {
        sqlDataAdapter.Fill(dsMonth);
    }
    catch {}
    return dsMonth;
}

        protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
        {
            DateTime nextDate;
            if (dsTraining != null)
            {
                foreach (DataRow dr in dsTraining.Tables[0].Rows)
                {
                    nextDate = (DateTime)dr["StartDate"];
                    if (nextDate == e.Day.Date)
                    {
                        e.Cell.BackColor = System.Drawing.Color.Pink;
                    }
                }
            }
        }
        protected void Calendar1_VisibleMonthChanged(object sender,
            MonthChangedEventArgs e)
        {
            FillTrainingDataset();
        }

    } 
```

有什么简单的方法可以创建方法并渲染到我的日历上吗？这对我来说似乎很长。我希望我的数据库表中的日期（开始和结束）出现在日历上。

# performance - 连接池 Glassfish 3 或 Tomcat 7？

> ID：11981197
> 
> 赞同：0
> 
> 时间：2012-08-16T05:33:08.503
> 
> 标签：performance, glassfish-3, connection-pooling, tomcat7

我想知道哪个连接池更快并允许最大连接 Glassfish 3 或 Tomcat 7？Glassfish 3 和 Tomacat 7 在特定时间允许的最大连接数是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:19:03.577

> What is the maximum number of connections that Glassfish 3 and Tomacat 7 allow at a particular time ?

you cannot google this ?

> I want to know which connection pool is faster

Here on stackoverflow we encourage subjective questions and answers. Can you please perhaps frame a better questions.

# jquery - Lightbox / Fancybox iframe 显示某些 div r 内容

> ID：11981199
> 
> 赞同：0
> 
> 时间：2012-08-16T05:33:11.900
> 
> 标签：jquery, fancybox, lightbox

我试图实现的目标：

用户正在访问我的网站，点击一个产品，一个 iframe html 页面将显示该产品的更大图像以及旁边的文本。

现在，如果有人访问该直接 iframe html 链接，他们只会看到产品框，而不是网站的其余部分。

因此，我尝试使用 ajax / datafilter 让 iframe 自己显示 div，它在 Firefox 中而不是在 chrome 中工作。

尝试了 window scrollTo，在 chrome 中工作，而不是在 Firefox 中。

有没有人有替代方案？

# api - 使用 LinkedIn API 如何在 xml 消息中发送 HTML

> ID：11981200
> 
> 赞同：2
> 
> 时间：2012-08-16T05:33:11.437
> 
> 标签：api, codeigniter, oauth, linkedin

嗨，我正在使用linkedin api 发送邀请。在消息中

```
<?xml version='1.0' encoding='UTF-8'?>
<mailbox-item>
  <recipients>
    <recipient>
      <person path='/people/~'/>
    </recipient>
    <recipient>
      <person path="/people/abcdefg" />
    </recipient>
  </recipients>
  <subject>Congratulations on your new position.</subject>
  <body>You're certainly the best person for the job!</body>
</mailbox-item> 
```

在`<body>`我试图添加一些 HTML 的部分中。

像

`<b>`你当然是这份工作的最佳人选！`</b>`

但问题是它显示为文本，因为它在朋友收到的消息中，而不是我想要`bold`的消息内容。我怎样才能做到这一点 。有没有应该做的配置。

我正在使用代码点火器

```
function send_messeges($access_token, $xml_atring) {

    $profile_url = "http://api.linkedin.com/v1/people/~/mailbox";
    $xml = '<?xml version="1.0" encoding="UTF-8" ?>
        <mailbox-item>
          <recipients>                
            ' . $xml_atring . '
          </recipients>
          <subject>'.$this->send_subject.'</subject>
          <body>'.$this->send_message.'</body>
        </mailbox-item>';
    $request = OAuthRequest::from_consumer_and_token($this->consumer, $access_token, "POST", $profile_url);
    $request->sign_request($this->method, $this->consumer, $access_token);
    $auth_header = $request->to_header("https://api.linkedin.com");
    $response = $this->httpRequest($profile_url, $auth_header, "POST", $xml);        
    return $response;

} 
```

请帮忙 。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T05:41:07.830

如果要将 html 包装在 xml 中，则必须使用如下构造：

```
<xmltag><![CDATA[<b>html text</b>]]></xmltag> 
```

但请注意阅读 api 文档：

[https://developer.linkedin.com/documents/messaging-between-connections-api](https://developer.linkedin.com/documents/messaging-between-connections-api)

> body mailbox-item 是 邮件的正文。不能包含 HTML。必须可由发送消息的成员编辑。

这表明您不能在此处使用 html。

但是，您可以使用基本的字符串格式（例如换行符）来至少包含一些段落：

这是通过`\n`字符串中的（转义换行符）完成的。

# objective-c - UIColor colorWithRed:green:blue: 总是产生黑色

> ID：11981205
> 
> 赞同：20
> 
> 时间：2012-08-16T05:33:34.147
> 
> 标签：objective-c, cocoa-touch, uicolor

当我尝试通过代码制作自定义颜色时，我遇到过很多情况，结果与 Photoshop 完全不同，例如

```
[UIColor colorWithRed:(160/255) green:(97/255) blue:(5/255) alpha:1]; 
```

产生的颜色是黑色的，而我应该是黄色的。使用滑块工作时，结果符合预期。

我的 Xcode 有问题还是一般问题？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-16T05:36:15.633

整数除法会导致整数除法，这本质上意味着截断结果的小数部分。利用

```
[UIColor colorWithRed:(160/255.0) green:(97/255.0) blue:(5/255.0) alpha:1.0] 
```

反而。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T05:42:10.447

colorWithRed:green:blue:alpha ，每个参数指定为从 0.0(MIN) 到 1.0 (MAX) 的值

```
[UIColor colorWithRed:(160/255.0f) green:(97/255.0f) blue:(5/255.0f) alpha:1]; 
```

# c# - 外观设计模式使用

> ID：11981206
> 
> 赞同：0
> 
> 时间：2012-08-16T05:33:43.710
> 
> 标签：c#, design-patterns, facade

在我们的应用程序（C#）中，外观被用作核心的 API - 外观将被应用程序本身用来与核心做一些事情。知道了，这是我的问题：

1.  假设我的一个核心对象，它的外观包装，有一个递归位？例如，facade 提供了来自树的“GetX”，每个节点都需要从其子树中 GetX。该节点是否应该使用外观的“GetX”？
2.  外观是否应该向应用程序公开核心对象？例如，用户想要构建一棵树、添加节点、打印树、计算树等。应用程序应该使用树对象还是应该请求外观创建、保存、打印等等？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:38:22.080

> 外观是一个对象，它为更大的代码体提供简化的接口。

因此，保持简单。

1.  不。将 Facade 封装在其内部。我假设您有一个用于检索树的私有实现，在内部使用它，仅公开返回填充对象的公共方法（参见第 2 点）。

2.  不，外观应该做所有事情，否则创建它就没有什么意义了。您可能想要创建一个可以在外观方法中使用的 DTO，但您不应该公开核心对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:01:12.433

**关于问题1：** 正如其他人所说；不可以。相反，请考虑为此操作使用单独的接口（[接口隔离原则](http://en.wikipedia.org/wiki/Interface_segregation_principle)可能适用于此？），并首先通过 Facade 访问该接口上的操作。通过递归，内部接口可以直接再次使用。这可能会提供一些关注点分离，同时也可以在必要时更容易地在以后更改实现。

在我看来，递归本身就是一个实现细节，而不是外观需要知道的任何东西。类似地，外观是实现算法不需要知道的东西（即，不要通过外观重复出现）。

**关于问题 2：**如何也为此定义接口？例如`ITree`, `ITreeNode`, 等，并包含在 Facade 上的操作以使用这些操作。现在让实现实现这些接口，从而在外观之外提供所需的对象而不暴露核心对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T05:40:01.647

外观通常包装您的核心并提供对一组特定功能的访问。

1.  您可能希望这样做以保持一致性，但如果有另一种更简单的方法来保留外观提供的抽象，那就更好了。

2.  任何核心代码都不应该被暴露（这将违背外观的目的）如果你想添加一些功能，那么在你的外观中添加一个函数，它将调用你外观中的核心函数。

# powershell - 创建并抛出新异常

> ID：11981208
> 
> 赞同：140
> 
> 时间：2012-08-16T05:34:11.943
> 
> 标签：powershell

如何在 PowerShell 中创建和引发新异常？

我想为特定的错误做不同的事情。

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2014-07-04T23:05:27.423

要调用特定异常，例如 FileNotFoundException，请使用此格式

```
if (-not (Test-Path $file)) 
{
    throw [System.IO.FileNotFoundException] "$file not found."
} 
```

要抛出一般异常，请使用 throw 命令后跟一个字符串。

```
throw "Error trying to do a task" 
```

在 catch 中使用时，您可以提供有关触发错误的其他信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-02-24T10:50:34.320

您可以通过扩展 Exception 类来抛出您自己的自定义错误。

```
class CustomException : Exception {
    [string] $additionalData

    CustomException($Message, $additionalData) : base($Message) {
        $this.additionalData = $additionalData
    }
}

try {
    throw [CustomException]::new('Error message', 'Extra data')
} catch [CustomException] {
    # NOTE: To access your custom exception you must use $_.Exception
    Write-Output $_.Exception.additionalData

    # This will produce the error message: Didn't catch it the second time
    throw [CustomException]::new("Didn't catch it the second time", 'Extra data')
} 
```

# php - Silex Routing，如何在路由变量中添加斜线？

> ID：11981212
> 
> 赞同：3
> 
> 时间：2012-08-16T05:34:26.743
> 
> 标签：php, silex

以这个 URL 为例：

`http://website.com/test/blob/my/nice/little/branch/tests/InterfaceTest.php`

在 Silex 中，它可以表示为这样的路由（只是示例代码）：

```
$app->get('{repo}/blob/{branch}/{tree}/', function($repo, $branch, $tree) use ($app) {
    // repo = test
    // branch = my/nice/little/branch
    // tree = tests/InterfaceTest.php
})->assert('branch', '[\w-._/]+'); 
```

但是，这并没有按预期工作。有没有人对如何使它工作有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:00:37.803

尝试这个：

```
$app->get('{repo}/blob/{branch}/{tree}/', function($repo, $branch, $tree) use ($app) {
     // repo = test
     // branch = my/nice/little/branch
     // tree = tests/InterfaceTest.php

})->assert('branch', '[\w\-\._/]+'); 
```

更多信息，请查看这本食谱：[http ://symfony.com/doc/current/cookbook/routing/slash_in_parameter.html](http://symfony.com/doc/current/cookbook/routing/slash_in_parameter.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-28T13:20:48.283

使用这个，`.+`将匹配所有剩余路径

```
$app->get('{repo}/blob/{branch}/{tree}', function($repo, $branch, $tree) {
    return "$repo, $branch, $tree";
})->assert('branch', '.+'); 
```

# php - 如何在 symfony2.1 中使用面包屑？

> ID：11981216
> 
> 赞同：0
> 
> 时间：2012-08-16T05:34:47.523
> 
> 标签：php, symfony-2.1

我需要在我的网站上使用面包屑。

谁能指导我任何可以帮助我的捆绑包？

或者如果有人可以指导我如何编程。我不知道如何开始我有很多级别的课程。

喜欢

`School--Principal--Teacher--student.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T15:33:49.817

如果你使用 Symfony 2.1，你需要使用 2.1 分支：

`"whiteoctober/breadcrumbs-bundle": "2.1.x-dev"`

# wordpress - 如何在wordpress中链接顶部和侧面导航？

> ID：11981218
> 
> 赞同：2
> 
> 时间：2012-08-16T05:35:05.080
> 
> 标签：wordpress, wordpress-theming

我有以下导航结构，我想在 wordpress 中实现：

![导航图片](../Images/232eb25d7b47b6db82510fb3ba89b128.png)

（首页/关于/新闻/联系方式）在顶部导航中，而所有子链接都在侧边栏中。

我如何在 wordpress 中创建这种类型的导航。即如何在标题中显示第一级导航，在侧边栏中显示第二级导航。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T05:42:06.987

按着这些次序：

1.  首先为您的网站创建一个没有子页面的主导航并将其添加到主题中。
2.  然后创建一个仅包含子菜单的新菜单并保存。
3.  现在转到小部件部分，然后从那里`Custom Menu`从左侧拖动并添加到您的侧边栏。
4.  然后选择您的子菜单并单击保存。

就这样。:)

[**检查此 WordPress Codex 部分以创建菜单教程**](http://codex.wordpress.org/WordPress_Menu_User_Guide)

干杯！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T04:26:24.257

我发现这些插件很有帮助：

**简单的部分导航** [http://wordpress.org/extend/plugins/simple-section-navigation/](http://wordpress.org/extend/plugins/simple-section-navigation/)

它允许我根据页面及其子页面的层次结构创建侧导航。

不过，我想要更多的控制权，因为我不希望某些父母拥有自己的页面……只是为他们的孩子准备的标题。因此，我使用的是这个插件（用于 Genesis 框架）。

**Genesis 简单侧边栏** [http://wordpress.org/extend/plugins/genesis-simple-sidebars/](http://wordpress.org/extend/plugins/genesis-simple-sidebars/)

这使我可以根据需要创建任意数量的侧边栏，并向其中添加自定义菜单。我是新手，所以也许我走了很长一段路，但到目前为止，它似乎正在做我想做的事。

# php - 在浏览器中上传和显示 .html 文件

> ID：11981219
> 
> 赞同：1
> 
> 时间：2012-08-16T05:35:10.873
> 
> 标签：php, html, apache

我正在和几个朋友一起做一个小项目，并设置了一个非常简单的 PHP 上传脚本，只有某些用户可以访问。我不担心针对服务器的任何类型的攻击，因为这是为了好玩，但我确实有一个问题。

我已经创建了一个子域（static.foo.bar），上传的文件将移至该子域。该子域关闭了 mod_php，以防止恶意上传和执行 php 脚本。该脚本还检查文件扩展名和 mime 内容类型，但我认为这些很容易被绕过/欺骗。

但是，用户可以轻松上传 .html 文件并将其重定向到其他地方。同样，他们可以上传图像文件并让它在浏览器中显示图像，而不是被要求下载图像。

我认为这是浏览器的行为，但我也注意到，在将文件上传到 sendspace（或任何其他服务）时，即使文件是 .html（和有效的 html），它也会要求用户下载它而不是在网站上显示。

我在 CentOS 上运行 Apache。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:41:44.037

[ForceType](http://httpd.apache.org/docs/2.2/mod/core.html#forcetype)可能是您正在寻找的。

```
# In your .htaccess file
<Location /uploads_directory>
    ForceType application/octet-stream
</Location> 
```

您希望将所有文件的 mime 类型设置为，`application/octet-stream`以便浏览器下载它们而不是尝试显示内容。

# iphone - 在导航堆栈中找不到推送视图控制器？

> ID：11981222
> 
> 赞同：1
> 
> 时间：2012-08-16T05:35:53.743
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我在其中从 viewcontroller 推送 testviewcontroller。testviewcontroller 有一个后退按钮和一个是按钮。当按下后退按钮时，我将使用返回到上一个

```
[self.navigationController popViewControllerAnimated:YES]; 
```

当按下是按钮时，我正在使用另一个视图控制器

```
 GettingViewController *get  =[[GettingViewController alloc] initWithNibName:@"GettingViewController" bundle:nil];
 [self.navigationController pushViewController:get animated:NO]; 
```

这一切都很好。在按下按钮时的奖励中，我弹回到 testviewcontroller。使用这个`

```
for (TestViewController*vc in [self.navigationController viewControllers]) {
            if ([vc isKindOfClass: [TestViewController class]]){

                 [[self navigationController] popToViewController:vc animated:YES];
            }
        }
` 
```

但是当我在该视图中按下后退按钮时，它需要转到我的新推送视图控制器，即奖励获取。但是当我打印视图控制器时，它不存在于堆栈中。所以它再次回到第一个推送视图控制器，不是最新的。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:05:05.743

在您的 for 循环中，您遍历所有 viewController，但已经假装这些是 TestViewController (TestViewController*vc ...)。当然，您要寻找的第一个是KindOfClass TestViewController！

尝试将其更改为 UIViewController*vc！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:54:24.187

听起来您的堆栈中有多个 TestViewController 实例。要找到正确的，只需将指向 TestViewController 的指针传递给您的 GettingViewController，您可能需要一个属性：

`@property (nonatomic, assign) TestViewController* testViewController;`

当您准备好返回 TestViewController 调用时`[self.navigationController popToViewController: self.testViewController animated: YES];`。

也就是说，听起来您的导航流程可能需要更多思考。在 iOS 上，中心辐射式导航流程是最自然的。

# java - 同步（this）阻止整个对象？

> ID：11981227
> 
> 赞同：0
> 
> 时间：2012-08-16T05:36:21.587
> 
> 标签：java, multithreading

> **可能重复：**
> [同步块与同步方法？](https://stackoverflow.com/questions/574240/synchronized-block-vs-synchronized-method)

从这个问题的公认答案：[在 Java 关键部分中，我应该同步什么？](https://stackoverflow.com/questions/416183/in-java-critical-sections-what-should-i-synchronize-on#416198) 我学到了

```
public synchronized void foo() {
    // do something thread-safe
} 
```

和：

```
public void foo() {
    synchronized (this) {
        // do something thread-safe
    }
} 
```

做同样的事情。但是在第一种情况下，我们只使对象的一个​​方法同步，而在第二种情况下，我们使整个对象无法访问。那么为什么这两个代码片段做同样的事情呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T11:24:43.957

你似乎在混合东西。

首先

```
public synchronized void method() {
} 
```

从同步的角度来看，等效于：

```
public void method() {
    synchronized (this) {
    }
} 
```

已经提到了优点/缺点，并且各种重复提供了更多信息。

第二，

```
synchronized(someObject) {
    //some instructions
} 
```

means that the instructions in the synchronized block can't be executed simultaneously by 2 threads because they need to acquire the monitor on `someObject` to do so. (That assumes that someObject is a final reference that does not change).

In your case, `someObject` happens to be `this`.

Any code in your object that is not synchronized, can still be executed concurrently, even if the monitor on `this` is held by a thread because it is running the synchronized block. In other words, `synchronized(this)` does NOT "lock the whole object". It only prevents 2 threads from executing the synchronized block at the same time.

Finally, if you have two `synchronized` methods (both using `this` as a lock), if one thread (T1) acquires a lock on `this` to execute one of those 2 methods, no other thread is allowed to execute **any** of the two methods, because they would need to acquire the lock on `this`, which is already held by T1.

That situation can create contention in critical sections, in which case a more fine grained locking strategy must be used (for example, using multiple locks).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T05:58:17.587

我们不同步一个对象，而是同步一个代码块。第一个代码块是方法本身，而第二个是代码`synchronized`块。

该对象仅提供锁以防止多个线程同时进入该代码块。在第一种情况下，`this`对象（调用方法的对象）将被隐式用作锁，而在第二种情况下，它并不总是必须是`this`对象，它也可以是其他一些对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T06:11:54.227

他们做同样的事情。第一种形式是第二种形式的简写。

这两种结构之间的一个小区别是 - 同步块被编译成`monitorenter`(op-code `0xC2`) 和`monitorexit`(op-code `0xC3`) 指令。编译时，同步方法在运行时常量池中通过`ACC_SYNCHRONIZED`标志来区分，该标志由 JVM 的方法调用指令检查。但是，这种差异在实践中并没有太大意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T05:45:05.477

他们不做同样的事情。第一部分从头到尾同步。其次只是同步块（不是整个方法）。第二个有一定的灵活性。

# jquery - 自定义 jQuery 验证功能未触发

> ID：11981229
> 
> 赞同：1
> 
> 时间：2012-08-16T05:36:26.117
> 
> 标签：jquery, jquery-validate

我正在尝试使用自定义验证功能来检查是否至少选择了一个复选框。但是验证功能没有触发。我错过了什么？

```
<!DOCTYPE html>

<html>
<head>
    <title>Index</title>
    <script type="text/javascript" src="../Scripts/jquery-1.8.0.js"></script>
    <script type="text/javascript" src="../Scripts/jquery.validate.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $.validator.addMethod("fruits", function(value, elem, params) {
                if($(".fruits:checkbox:checked").length > 0){
                    return true;
                }else {
                    return false;
                }
            },"pick at least one plz");​

            $("#form1").validate({
                rules:{
                    fruits:{
                        fruits: true
                    }
                },
                submitHandler: function(form) {
                    alert("submitting...");
                    form.submit();
                },
                invalidHandler: function(form){
                    alert("invalid form");
                }
            });
        });
    </script>
</head>
<body>
    <form id="form1">
    <input type="checkbox" class="{fruits: true}" name="fruits" id="chkApple" value="1" />Apple<br />
    <input type="checkbox" class="fruits: true}" name="fruits" id="chkBanana" value="2" />Banana<br />
    <input type="submit" value="Submit" />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:45:03.533

尝试：

```
$.validator.addMethod("fruits", function(value, elem, params) {
  return $(".fruits").is(":checked")
},"pick at least one plz");​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:47:55.907

用这个替换你的代码

```
if($(".fruits").is(":checked")){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T06:02:26.210

检查此链接[源](http://lostwithin.net/check-if-a-radion-button-is-checked-using-jquery/)

```
 $(document).ready(function(){
  $('#submit_button').click(function() {
    if (!$("input[@name='name']:checked").val()) {
       alert('Nothing is checked!');
        return false;
    }
    else {
      alert('One of the  buttons is checked!');
    }
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T06:29:26.150

我让它工作了。不触发的问题是由有问题的编码问题引起的。解决之后，调用自定义函数。但是`$(".fruits").is(":checked`语法确实对我有用，它一直说没有选择任何内容。所以我带着`for`循环去了老学校。

```
<html>
<head>
    <title></title>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.8.0.min.js" type="text/javascript"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $.validator.addMethod("fruits", function (value, elem, params) {
                var items = $("input[name^='fruits']");
                for (i = 0; i < items.length; i++) {
                    if ($(items[i]).is(":checked")) {
                        return true;
                    }
                }
                return false;
            }, "pick one plz");

            $("#form1").validate({
                rules: {
                    fruits: {
                        fruits: true
                    }
                },
                submitHandler: function (form) {
                    alert("submitting...");
                    form.submit();
                },
                invalidHandler: function (form) {
                    alert("invalid form");
                }
            });
        });
    </script>
</head>
<form id="form1">
<input type="checkbox" class="{fruits: true}" name="fruits" id="chkApple" value="1" />Apple<br />
<input type="checkbox" class="fruits: true}" name="fruits" id="chkBanana" value="2" />Banana<br />
<input type="submit" value="Submit" />
</form>
<body>
</body>
</html> 
```

# c# - 如何使用我在 WebMatrix 中创建的帮助程序（C# Razor 语法）？

> ID：11981230
> 
> 赞同：0
> 
> 时间：2012-08-16T05:36:34.010
> 
> 标签：c#, razor, webmatrix

我正在尝试使用 WebMatrix 创建静态 html。（想想CMS。）

我在 App_Code/CardHelpers.cshtml 中有这个助手

```
@helper Cards (string mysuit){

// Class Tags
var ss = Html.Raw("<span class = \"spade\">"); 
var sh = Html.Raw("<span class = \"heart\">");  
var se = Html.Raw("</span>");

// Suits
var S = Html.Raw(ss + "&spades;" + se); 
var H = Html.Raw(sh + "&hearts;" + se);

<p> @mysuit and @H</p>

} 
```

我称之为

```
@CardHelpers.Cards("S") 
```

静态html输出是

```
<p> S and <span class = "heart">&hearts;</span></p> 
```

所以我可以在 helper 中使用@H 来创建我想要的 html，但是我怎样才能传入一套西装（例如“S”）并创建适当的 html。在这里，我只是拿回了 S，但我想要返回的是

```
<span class = "spade">&spades;</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:56:57.637

Razor 的全部意义在于您可以混合使用标记和 C# 语法。因此，您要做的是放置一个条件或 switch 语句，为给定的输入选择正确的输出，如下所示：

```
@{ 
  string result = "";
  switch(mysuit) { 
    case "H": result = H; break;
    case "S": result = S; break;
    default: break;
  }
  <p> @mysuit and @result</p>
} 
```

# java - getNodeValue() 给我 null，而 getNodeName() 给我#text

> ID：11981237
> 
> 赞同：0
> 
> 时间：2012-08-16T05:37:11.977
> 
> 标签：java, android, xml-parsing, dom-traversal

如果我有这样的 XML 文件

```
<UI>
<Option type="menu">
    <Name>MENU1</Name>
    <Option type="action">
        <Name>Action1</Name>
        <Function>Clicked Action1</Function>
    </Option>
</Option>
</UI> 
```

要获取第一个文本节点（MENU1）的值，请执行以下操作：

```
Node rootNode=dom1.getFirstChild();
String name=rootNode.getNodeValue();
Log.i(TAG,"ROOT NAME is :=",name); 
```

上面的代码给了我空白，同时使用

```
 Sting name=rootNode.getNodeName(); 
```

它给了我#text，这意味着它确实有一个文本，但为什么它没有显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:04:27.980

尝试文档对象模型（DOM 解析器）

**请看这段代码：**

```
DocumentBuilderFactory odbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder odb =  odbf.newDocumentBuilder();
            InputSource is = new InputSource(new StringReader(xml));
            Document odoc = odb.parse(is);
            odoc.getDocumentElement().normalize ();    // normalize text representation
            System.out.println ("Root element of the doc is " + odoc.getDocumentElement().getNodeName());
            NodeList LOP = odoc.getElementsByTagName("locations");
            int totalPersons =LOP.getLength();
            System.out.println("Total nos of locations:"+totalPersons);

            for(int s=0; s<LOP.getLength() ; s++)
            {
                Node FPN =LOP.item(s);
                if(FPN.getNodeType() == Node.ELEMENT_NODE)
                    {

                    Element latlon = (Element)FPN;                                                                

                    NodeList oNameList1 = latlon.getElementsByTagName("featured");                                       
                    Element firstNameElement = (Element)oNameList1.item(0);
                    NodeList textNList1 = firstNameElement.getChildNodes();
                    //this.setLocationId(((Node)textNList1.item(0)).getNodeValue().trim());                                 
                    System.out.println("#####The Parsed data#####");
                    System.out.println("featured : " + ((Node)textNList1.item(0)).getNodeValue().trim());            
                    System.out.println("#####The Parsed data#####");

                   }

       } 
```

**有关更多详细信息，请参阅此链接：**

[http://tutorials.jenkov.com/java-xml/dom.html](http://tutorials.jenkov.com/java-xml/dom.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:36:41.497

在选项上方添加一个额外的节点

```
<test> 
<Option type="menu">
  <Name>MENU1</Name>
  <Option type="action">
      <Name>Action1</Name>
      <Function>Clicked Action1</Function>
  </Option>
</Option>
</test> 
```

并检查以下网址，您将能够获取所有节点的值 [http://examples.javacodegeeks.com/core-java/xml/sax/get-element-attributes-in-sax-xml-parsing](http://examples.javacodegeeks.com/core-java/xml/sax/get-element-attributes-in-sax-xml-parsing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T11:28:47.843

我遇到了类似的问题。请尝试**getTextContent()**方法而不是 getNodeValue()。

# java - vaadin, getting null pointer when trying to add item to sqlContainer

> ID：11981238
> 
> 赞同：5
> 
> 时间：2012-08-16T05:37:31.400
> 
> 标签：java, vaadin

I'm very new to vaadin ( and to java).

i have an table that has an SQLcontainer like so :

```
public class ProjectTable extends Table {
      public ProjectTable(final DocumentmanagerApplication app) {
          setSizeFull();
          setContainerDataSource(app.getDbHelp().getProjectContainer());
          setImmediate(true);

          commit();
          setSelectable(true);

      }
    } 
```

i have a button and a TextField , to fill data in the table

```
public void buttonClick(ClickEvent event)
    {
        SQLContainer cont = h.getAssetContainer();
        String dataResult = tf.getValue().toString(); // TEXT FIELD 
        System.out.println(dataResult);

        Object itemId = cont.addItem(); // cont is the container
        **cont.getContainerProperty(itemId , "id").setValue(dataResult);      // BUG IS HERE !!! **  

try {
            cont.commit();
        } catch (UnsupportedOperationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

i keep getting a " null pointer exception" no matter what i do. on the line **cont.getContainerProperty(itemId , "id").setValue(dataResult);

am i doing anything wrong ? and what is null pointer ?

please inform me if anything was unclear.

please help , thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-08T01:20:09.450

BTW, if you have a Vaadin Table and you applied a Filter to it, you need to remove it before, if not probably you will get a null pointer exception in the getContainerProperty(itemId, property) method

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T05:44:03.380

This expression returns `null`:

```
cont.getContainerProperty(itemId , "id") 
```

And then you try to invoke a method on `null`. This causes the `NullPointerException`. So have a look, *why* the container does not provide a non-null value for the key at the time you invoke it.

# android - Eclipse 更新后无法创建新项目

> ID：11981241
> 
> 赞同：2
> 
> 时间：2012-08-16T05:37:51.410
> 
> 标签：android, eclipse, adt

昨天，我正在为 Eclipse 安装 ADT。一切都很顺利，直到我点击检查更新。Eclipse 重新启动后，所有首选项都消失了，我无法创建新项目，ADT 消失了。但是当我尝试从“安装新软件”选项下载 ADT 时，它说我已经安装了它。

我也重新安装了 Eclipse，同样的事情仍然发生。

我能做些什么来解决这个问题？我不知道是什么导致了这种情况，无论是 ADT 还是 Eclipse 本身，因为我什至无法为 C++ 甚至 Java 创建新项目。

我有 Eclipse 靛蓝。

编辑：我使用的是 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:08:29.930

安装 ADT 插件后转到 windows > Android SDK Manager，加载包后单击安装按钮，安装完成后检查您的问题是否解决。

# javascript - 从鼠标离开滑块控件后调用Javascript函数？

> ID：11981242
> 
> 赞同：0
> 
> 时间：2012-08-16T05:37:52.090
> 
> 标签：javascript, slider, dom-events

我正在使用[WebFX](http://webfx.eae.net/dhtml/slider/slider.html)的滑块控件。我想调用一个`process()`在鼠标拖动滑块并离开后调用的函数。我使用了以下代码：

```
var s1 = new Slider(document.getElementById("slider-1"), document.getElementById("slider-input-1"),"vertical");
s1.onchange= function()
{
process();
} 
```

但这里的问题是在滑块中的单个值更改时调用该函数。也就是说，当我们单击并拖动滑块时，它会针对值的每次变化调用该函数。
但我想要的是只有在拖动后离开滑块时才调用该函数。拖动滑块控件时不为每个更改调用函数。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:26:20.927

寻找 onchanged 事件！必须有 s1.onchanged

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:46:36.853

`onmouseup`在包含滑块的 div 上帮助自己处理鼠标事件。这有所帮助，但有一个小缺陷。
当用户拖动鼠标按住滑块并在移出包含滑块的 div 后释放鼠标时，不会生成事件。

克服此缺陷的任何其他解决方案都会很好。

# php - preg_replace 不工作？PHP

> ID：11981252
> 
> 赞同：0
> 
> 时间：2012-08-16T05:39:12.573
> 
> 标签：php, regex, preg-replace

为什么除了“位置，状态”中的逗号之外，没有用@替换所有逗号？

```
$test = preg_replace("#([^ ])([,])([^ ])#","$1@$3","100,,,'test','two',,'location, state',,[],1") 
```

预期：100@@@'test'@'two'@@'位置，状态'@@[]@1

实际：100@,,'test'@'two'@,'location, state'@,[]@1

我认为这是因为连续逗号在模式中匹配，我如何让它从匹配字符的开头继续包含所有逗号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:46:51.303

使用这个：

```
preg_replace('/(?<!\s),(?!\s)/', '@', "100,,,'test','two',,'location, state',,[],1") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:48:58.843

在一次 preg_replace 运行期间，之前匹配的部分字符串将不会再次匹配。所以第一个替换是这样的：

```
10(0)(,)(,),'test'  => 100@,,'test'
                            ^ 
```

现在标记的字符是 preg_replace 允许匹配的第一个字符 -> 它也不会被替换，因为第一个没有什么可以匹配的`([^ ])`。

您正在寻找的是前瞻[和后瞻断言：](http://www.php.net/manual/en/regexp.reference.assertions.php)

```
preg_replace("#(?<=[^ ])([,])(?=[^ ])#", "@", …) 
```

# opengl - 将 X Pixmaps 与 OpenGL 和 Haskell 一起使用

> ID：11981253
> 
> 赞同：2
> 
> 时间：2012-08-16T05:39:14.680
> 
> 标签：opengl, haskell

我对如何组合使用 X11 库为 OpenGL 生成纹理有点困惑（我正在使用[https://github.com/reacocard/haskell-x11-xcomposite](https://github.com/reacocard/haskell-x11-xcomposite)抓取像素图区域）

我想让我明白的是，PixMap 有一个返回类型 XID，它基本上是一个 Word32，用作指向实际数据的指针，但是 OpenGL 库对其指针使用了不同的东西。我知道我必须在 C 中做什么，

[http://www.opengl.org/wiki/Programming_OpenGL_in_Linux:_Using_texture_from_pixmap_extension](http://www.opengl.org/wiki/Programming_OpenGL_in_Linux:_Using_texture_from_pixmap_extension)

但是通过 FFI 重写很多 OpenGL 和 X11 的东西以使其类型兼容似乎很愚蠢。有没有更简单的方法？

# asp.net-mvc-3 - 使用 ajx 在 mvc3 中将模型数据从一个视图发布到另一个视图

> ID：11981254
> 
> 赞同：0
> 
> 时间：2012-08-16T05:39:19.163
> 
> 标签：asp.net-mvc-3

我想使用 Ajax.Actionlink 将模型数据从一个视图传输到另一个视图（在对话框中），如果我在 Post Action 上获得空值

这是我的观点

```
@using (Ajax.BeginForm("", new AjaxOptions {  }))
{

    for (int i = 0; i < Model.city.Count; i++)
    {
    <div class="editor">
        <p>
            @Html.CheckBoxFor(model => model.city[i].IsSelected, new { id = "check-box-1" })
            @Html.HiddenFor(model => model.city[i].Id)
            @Ajax.ActionLink(Model.city[i].Name, "PopUp", "Home",
            new
            {

                @class = "openDialog",
                data_dialog_id = "emailDialog",
                data_dialog_title = "Cities List",
            },
            new AjaxOptions
            {
                HttpMethod = "POST"

            })
            @Html.HiddenFor(model => model.city[i].Name)
        </p>
    </div>

    }
} 
```

在使用 Ajax.Actionlink 时，我正在使用 ajax 脚本创建一个对话框

我这个视图的控制器类是

```
 public ActionResult Data()
    {
        var cities = new City[] { 
            new City { Id = 1, Name = "Mexico" ,IsSelected=true}, 
            new City { Id = 2, Name = "NewJersey",IsSelected=true },
            new City { Id = 3, Name = "Washington" },
            new City { Id = 4, Name = "IIlinois" },
            new City { Id = 5, Name = "Iton" ,IsSelected=true}
        };
       var model = new Citylist { city = cities.ToList() };
        //this.Session["citylist"] = model;
        return PartialView(model);
    } 
```

另一个显示发布操作数据的视图是

```
 @model AjaxFormApp.Models.Citylist
@{
    ViewBag.Title = "PopUp";
}
<h2>
    PopUp</h2>
<script type="text/javascript">
    $(function () {

        $('form').submit(function () {
            $.ajax({

                url: this.action,
                type: this.method,
                data: $(this).serialize(),
                success: function (result) {

                    var checkedAtLeastOne = false;
                    $('input[id="check-box-2"]').each(function () {
                        if ($(this).is(":checked")) {

                            checkedAtLeastOne = true;
                            // alert(checkedAtLeastOne);
                        }
                    });

                    if (checkedAtLeastOne == true) {
//                        alert("Test");
                        $('#div1').show();
                        $(".dialog").dialog("close");
                    }
                    else {
//                        alert("NotSelected");
                        $('#div1').hide();
                        $('#popUp').html(result);
                        $('#popUp').dialog({
                            open: function () { $(".ui-dialog-titlebar-close").hide(); },
                            buttons: {

                                "OK": function () {
                                    $(this).dialog("close");
                                }
                            }
                        });

                    }
                }
            });
            return false;
        });
    });
</script>
<div style="display: none" id="div1">
    <h4>
        Your selected item is:
    </h4>
</div>
@using (Ajax.BeginForm(new AjaxOptions { }))
{

    for (int i = 0; i < Model.city.Count; i++)
    {

    <div class="editor">
        <p>
            @Html.CheckBoxFor(model => model.city[i].IsSelected,new { id = "check-box-2" })
            @Html.HiddenFor(model => model.city[i].Id)
            @Html.LabelFor(model => model.city[i].Name, Model.city[i].Name)
            @Html.HiddenFor(model => model.city[i].Name)
        </p>
    </div> 

    }

    <input type="submit" value="OK" id="opener" />
}
@*PopUp for Alert if atleast one checkbox is not checked*@
<div id="popUp">
</div> 
```

我的后控制器动作结果类是

```
 [HttpPost]
    public ActionResult PopUp(Citylist model)
    {
        if (Request.IsAjaxRequest())
        {

           //var model= this.Session["citylist"];
            return PartialView("PopUp",model);
        }
        return View();
    } 
```

我的模型课是

```
public class City
{
    public int Id { get; set; }
    public string Name { get; set; }
    public bool IsSelected { get; set; }

}
public class Citylist
{
    public IList<City> city { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:25:28.680

您正在从 actionlink 调用 Popup 操作。相反，您应该将提交按钮置于 for 循环之外。并为您的表单提供正确的操作参数

# shopify - Shopify 服务器上的资产缓存时间

> ID：11981261
> 
> 赞同：5
> 
> 时间：2012-08-16T05:39:31.403
> 
> 标签：shopify

在编辑`.css.liquid`Shopify 未自动设置且无法放置在页面中的自定义文件时（因为它无法访问 Shopify 的 Liquid 模板系统），我发现 CDN 可能需要数小时才能开始提供新的所述`.css.liquid`文件的版本。

以后如何才能减少这种等待时间？目前，这是我认为正在发生的事情：

1.  大多数资产 url 都附加了一些数字，如下所示：`path/to/filename?270`. 这个数字可能是为了表示上次提供文件的时间、版本号或其他一些标志来指示提供文件。如果是这样，那么我可以自己创建一个模板来获取这些信息（尽管我不想采取额外的步骤。

2.  CDN 服务器的缓存时间很长，并且在缓存中的数据过期之前不会重新发布文件的新表示。如果是这样，我对此无能为力。

请让我知道这是上述情况之一，还是其他情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T21:48:41.097

我已经成功地重新保存了调用 .css.liquid 文件的布局文件。

例如：编辑某些内容，然后将其保存到服务器。然后再次编辑它并将其保存到服务器。

这似乎增加了 css 文件路径上的查询字符串。

# c# - C# 替换字符串

> ID：11981266
> 
> 赞同：0
> 
> 时间：2012-08-16T05:40:13.690
> 
> 标签：c#, replace, uppercase, lowercase

我有一个包含单词及其替换单词的列表，例如：

桌子-->桌子等。

所以让我们说如果用户写**desk**它会给出结果**表**但是如果用户用大写**D写****Desk**它不会做任何改变。我知道如何忽略大写，但随后世界将被替换为**t**为小写的**表**......我希望**t**为大写。因此，如果desk--> table 并且如果Desk--> Table... 我该怎么做？

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:53:09.677

您可以第二次调用替换函数，第二次使用大写单词。

例如：

```
string result = input.Replace ("desk", "table");
result = result.Replace ("Desk", "Table"); 
```

将字符串的第一个字符变为大写并不是很困难。你可以使用这个方法：

```
string lower = "desk";
string upper = char.ToUpper(lower[0]) + lower.Substring(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:52:03.657

您是说您有一个包含单词及其替换单词的列表。所以数据结构将是

```
Dictionary<string, string> dict = new Dictionary<string, string>();
dict.Add("desk","table");
dict.Add("Desk","Table"); 
```

如果这是正确的，那么以下将起作用

```
var result = dict["Desk"]; 
```

但是，如果您以以下方式维护这些值，

```
Dictionary<string, string> dict = new Dictionary<string, string>();
dict.Add("desk","table"); 
```

那么解决方案可能是

```
private void button1_Click(object sender, EventArgs e)
    {
        Dictionary<string, string> dict = new Dictionary<string, string>();
        dict.Add("desk","table");

        string input = "Desk";
        var dictValue = dict[input.ToLower()];
        var result = IsInitCap(input.Substring(0, 1)) 
                     ? System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.ToTitleCase(dictValue)
                     : dictValue;                

    }

    private bool IsInitCap(string str)
    {
        Match match = Regex.Match(str, @"^[A-Z]");
        return match.Success ? true : false;
    } 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T06:52:34.580

您可以使用以下代码将输入字符串的第一个字母设为大写，

```
str = str.First().ToString().ToUpper() + String.Join("", str.Skip(1)); 
```

现在，在您的情况下，使用 Dictionary 数据结构来存储数据。

1.  将输入值存储为 (key)desk->table(value)

2.  现在使用上面的代码并将第一个字母大写并存储它（Desk->Table）

因此，您现在可以像desk-->table 和Desk-->Table 一样获取值。

这总是通过牺牲空间复杂度来获取时间复杂度 O(1) 的值。******

# r - 模拟后关闭 Windows

> ID：11981270
> 
> 赞同：9
> 
> 时间：2012-08-16T05:40:40.450
> 
> 标签：r

我希望 R 在我的（广泛的）模拟和保存结果之后关闭我的计算机，这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T06:22:45.723

是的，看一下`shutdown`包里面的功能[`fun`](http://cran.r-project.org/web/packages/fun)。

系统命令的标志`shutdown`取决于您的操作系统，该函数只是调用适当标记的命令。

```
fun::shutdown

function (wait = 0) 
{
    Sys.sleep(wait)
    ifelse(.Platform$OS.type == "windows", shell("shutdown -s -t 0"), 
        system("shutdown -h now"))
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T06:26:44.797

R 可以使用 向系统发送命令`?system`，因此 Windows 所需的任何操作都可以使用它来完成：

[http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/shutdown.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/shutdown.mspx?mfr=true)

R 有一个`.Last()`由`quit()`(or `q()`) 及其`runLast`参数控制的函数，因此您可以在此处通过 发送关闭命令`system`，以便在退出 R 后发生。使用 R 保存对象是使用`save`or完成的`save.image`，尽管默认保存为很好`quit()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-15T13:46:08.030

执行

```
system("shutdown -s") 
```

将关闭您的计算机。只需将其添加到脚本的末尾

# java - Java中的构造函数用法

> ID：11981274
> 
> 赞同：1
> 
> 时间：2012-08-16T05:41:08.440
> 
> 标签：java, constructor

谁能解释这些构造函数之间的区别。看到这个；

```
 public MyClass() {
  } 
```

和

```
 public MyClass() {
      this();
  } 
```

和

```
 public MyClass() {
      super();
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T05:45:04.437

Second 不允许在 java 中声明，因为您只对默认构造函数进行递归调用。此外，默认情况下，构造函数始终具有 super() 方法，如果未明确指定，编译器将插入该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T05:51:52.317

```
public MyClass() { } 
```

声明一个空的无参数构造函数。如果您没有为类声明构造函数，编译器会有效地为该类插入此构造函数。

```
public MyClass() { this(); } 
```

不会编译。

```
public MyClass() { super(); } 
```

是一个构造函数，它调用超类的默认构造函数。仅当超类具有默认构造函数或没有构造函数时才会编译（在这种情况下，编译器无论如何都会插入默认构造函数，如上所述）。此外，省略`super();`呼叫具有相同的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T05:48:31.593

我认为在第二种情况下，您可能*打算*写：

```
public MyClass() {
  super();       // not "this();"
} 
```

无论哪种方式，您的第二种情况都是编译错误。JLS 是这样说的：

> *“构造函数通过一系列涉及此的一个或多个显式构造函数调用直接或间接调用自身是编译时错误。”* [JLS 8.8.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.7)

在您的示例中，`this()`是直接调用相同构造函数的显式构造函数调用。

* * *

最后，第一种和第三种形式之间没有语义差异。第一种形式**隐式**调用超类的无参数构造函数，第三种 for 只是使调用**显式**。

为了可读性，有些人更喜欢使用显式调用来编写表单，但 IMO 并没有真正的区别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T06:05:45.023

这很简单

让我让你明白

第一的

```
public MyClass() {  } 
```

只是一个默认的公共构造函数

但是当你写这个

```
public MyClass() { this(); } 
```

这意味着您正在应用构造函数链接。构造函数链接只是调用同一类的另一个构造函数。这必须是构造函数的第一条语句。但是在您的场景中，您没有传递任何内容，`this();`这意味着您再次调用相同的构造函数，这将导致无限循环。你的类可能有另一个这样的构造函数

```
public MyClass(int a) { } 
```

那么你可能称之为

```
public MyClass(){ this(10); } 
```

上面的语句将使您跳转到接收与您传递的相同参数的构造函数

现在，

```
public Myclass(){ super(); } 
```

表示您正在调用该类继承的超类的构造函数`MyClass`。同样的情况发生在这里，你没有传递任何东西`super();`，它将调用 Super 类的默认构造函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T07:17:07.550

让我们一一看一下三种类型的构造函数调用。每一种都有与之相关的特殊用途。但这个概念很简单，探索起来也很有趣。

案例 1 :- 这是没有参数的默认构造函数

```
 public class MyClass{             
         public MyClass(){ 
            } 
         } 
```

如果你不写，编译器会自动为你提供一个无参数的构造函数。因此，如果你写`public class MyClass{ }`.

这相当于写

`public class MyClass{
MyClass(){ } }`

需要注意的点：-

1.  当您不使用 super“作为构造函数的第一行”时，编译器会自动提供“super”。注意：- 对于在构造函数中使用的“super”和“this”，请始终将它们写在构造函数代码的第一行，否则编译器会出错。

2.  即使您不在这里扩展 MyClass，编译器也会调用超级 Object 类的构造函数，它是您创建的每个类的根类。

案例 2：- 使用“this”。

构造函数使用“this”来引用同一类中具有不同参数列表的另一个构造函数。

```
 public MyClass() { 
        this();
          } 
```

因此，上面的代码将给出编译错误“递归构造函数调用”，因为它正在调用相同的构造函数并最终进入无限循环。要完成这项工作，您可以改为编写

```
public MyClass(String str){
 System.out.println("constructor with arg "+ str);
 }
public MyClass(){
this("Cons");      // note that "this" has to be at first line otherwise compiler gives error
System.out.println("constructor with no arg");
  } 
```

在这里你可以看到“this”在构造函数中的重要性。它用于从同一函数中的另一个构造函数调用构造函数。

案例 3：- 使用“超级”。Super 用于调用 super 调用的无参数构造函数。案例 1 中已经提到了休息信息。

```
 public MyClass() { 
         super();
         } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T05:44:27.660

`this()`将用于调用`MyClass()` **No-Args 构造函数。**

虽然它会`Recurssion constructor error`在**编译期间给出**

**例如：**

```
public MyClass{

   public MyClass(){

  this(5);     // Here this(5) will be used to call the MyClass Constructor with
               // int value as Parameter
    }

   public MyClass(int i){

    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-16T05:45:39.913

在第一种情况下，构造函数将插入对超类的无参数构造函数的静默调用，我猜在这种情况下将是 Object 类。在第二种情况下，this() 调用将调用类的无参数构造函数。它有时也会导致错误。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-16T05:47:10.727

第二个肯定会~~导致 OutOfMemoryError 异常，因为堆栈溢出~~由于错误而无法编译，`Recursive constructor invocation`因为您从自身调用相同的构造函数。你的意思是写

```
super(); 
```

? 在这种情况下，两种形式是相同的。

```
public MyClass() {
} 
```

如果存在，将隐式调用基类的默认无参数构造函数。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-16T05:47:32.483

第一个是默认的空构造函数。它根本什么都不做。如果您没有其他构造函数（带参数），则根本不必定义这种构造函数。如果没有定义构造函数，它会被隐式设为默认值。

第二个调用自身导致递归循环，因此被禁止。

第三个调用超类的默认无参数构造函数，但什么也不做。超类是您的类`extends`的来源，或者`Object`（如果您未指定`extends`关键字，则隐式扩展）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-16T05:50:40.193

在构造函数中，您还可以使用 this 关键字调用同一类中的另一个构造函数。这样做称为显式构造函数调用 [http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)

```
public class Rectangle {
    private int x, y;
    private int width, height;

    public Rectangle() {
        this(0, 0, 0, 0);
    }
    public Rectangle(int width, int height) {
        this(0, 0, width, height);
    }
    public Rectangle(int x, int y, int width, int height) {
        this.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
    }

} 
```

但是第二个导致递归构造函数调用并且不允许。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-16T05:50:58.077

```
public MyClass() {  } 
```

--> 这是普通的构造函数，也称为默认构造函数。

```
 public MyClass() {
      this();
  } 
```

--> 您正在使构造函数递归。不要使用这种方式。好吧，您可以使用`this()`like ：

```
public MyClass() {
    this(1); // always intitalize to 1
}

public MyClass(int i) {
    this.i=i;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-08-16T05:54:56.827

1.  默认构造函数没有做任何特别的事情。java中的每个类都默认拥有它，直到您编写自己的构造函数，然后您必须再次自己定义它

    公共 A() {}

    公共A（整数值）{}

2.  是带有递归调用的默认构造函数（无效且不应使用）。与`this()`您调用默认构造函数。例如，`this(5)`您调用一个已定义的构造函数，该构造函数将 int 值作为参数，如 1 中的示例。

    公共 A() { 这(5); }

    公共A（整数值）{}

3.  默认构造函数，它从你的超类调用默认构造函数

    抽象类 A { public A() {} }

    B 类扩展 A { public B() { /* 调用 A() */ super(); }

# spring - 无法从 portlet 调用 spring bean

> ID：11981278
> 
> 赞同：0
> 
> 时间：2012-08-16T05:41:20.533
> 
> 标签：spring, liferay, liferay-6, spring-jdbc

我有如下的Spring bean：

```
 @Service("bookService")
public class BookServiceImpl implements BookService {
    @Autowired
    @Qualifier("bookDao")
    private BookDao bookDao; 
```

我有一个 portlet 尝试访问它，如下所示：

```
 62   public BookService getBookService() {
63      ApplicationContext springCtx =   PortletApplicationContextUtils.getWebApplicationContext(getPortletContext());
64      return (BookService)springCtx.getBean("bookService");
    }

but i have the below nullpointer exception:
java.lang.NullPointerException
at chapter09.code.listing.base.BookCatalogPortlet.getBookService(BookCatalogPortlet.java:64)
at chapter09.code.listing.base.BookCatalogPortlet.init(BookCatalogPortlet.java:59) 
```

如果我遗漏了一些可用的资源@http://portletsinaction.googlecode.com/svn/trunk/ch9_BookCatalogSpringJdbc/，请告诉我

```
enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:29:17.313

Liferay 6.1.1 的问题我已经用 6.0.6 进行了相同的测试，并且工作正常。

# django - 推送到 Heroku 后“用户密码验证失败”

> ID：11981280
> 
> 赞同：8
> 
> 时间：2012-08-16T05:41:30.040
> 
> 标签：django, postgresql, heroku

我按照[heroku 文档](https://devcenter.heroku.com/articles/django)安装了一个 django 应用程序，起初它运行良好。一天后，我将一些更改推送到服务器。之后，我根本无法访问该应用程序：`FATAL: password authentication failed for user "drjstoymyqyarj"`

我什至不能再同步数据库了：

```
$ heroku run python manage.py syncdb
Running `python manage.py syncdb` attached to terminal... up, run.1
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 57, in handle_noargs
    cursor = connection.cursor()
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/__init__.py", line 306, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 177, in _cursor
    self.connection = Database.connect(**conn_params)
  File "/app/.heroku/venv/lib/python2.7/site-packages/psycopg2/__init__.py", line 179, in connect
    connection_factory=connection_factory, async=async)
psycopg2.OperationalError: FATAL:  password authentication failed for user "drjstoymyqyarj"
FATAL:  password authentication failed for user "drjstoymyqyarj" 
```

我使用了 heroku 文档中推荐的数据库设置：

```
import dj_database_url
DATABASES = {'default': dj_database_url.config(default='postgres://localhost')} 
```

当我将代码推送到服务器后检查日志时，有一个`Process exited with status 143`我以前没有注意到的可疑之处。也许这与它有关？

```
$ heroku logs
heroku[web.1]: State changed from up to starting
heroku[web.1]: Stopping all processes with SIGTERM
heroku[web.1]: Starting process with command `python ./manage.py runserver 0.0.0.0:41048 --noreload`
app[web.1]: Validating models...
app[web.1]: 
app[web.1]: 0 errors found
app[web.1]: Django version 1.4, using settings 'ClosetList.settings'
app[web.1]: Development server is running at http://0.0.0.0:41048/
app[web.1]: Quit the server with CONTROL-C.
heroku[web.1]: Process exited with status 143
heroku[web.1]: State changed from starting to up 
```

**[编辑]**
与`heroku pg:psql`. 但是，我可以使用 Django 打开一个 Django shell `heroku run python manage.py shell`，但我无法从其中访问任何数据（当然也是同样的错误）。
**[/编辑]**

对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T02:59:17.740

跑

```
heroku config 
```

并查看是否配置了 2 个以上的 heroku dbs，并查看 DATABASE_URL 是否指向您配置的数据库。如果没有，那么您可以通过运行将您的数据库提升为默认的 DATABASE_URL：

```
heroku pg:promote HEROKU_POSTGRESQL_GREEN 
```

其中 HEROKU_POSTGRESQL_GREEN 是您的数据库名称，您将在配置中看到 HEROKU_POSTGRESQL_GREEN_URL。

一旦您配置的数据库升级为默认数据库，您就可以开始了。

# ios - 根据表格中单元格的数量动态表格高度

> ID：11981281
> 
> 赞同：0
> 
> 时间：2012-08-16T05:41:30.920
> 
> 标签：ios, xcode, uitableview

我正在开发将数据放入从 Json 解析的 UILable 中的应用程序，并且有详细信息，应该在表格中。我正在使用 Xcode 4.4.1，并针对 iOS 4.3 及更高版本。表格高度是动态开发的，如果在运行时更改单元格高度，表格高度会根据高度而变化。我的问题是，现在我如何能够根据该表格中存在的单元格数量来更改表格高度，以便用户不必在表格中单独滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:03:52.450

尝试这个，

```
TableView.frame=CGRectMake(10, 10, 200 ,MIN(40 * [YourArray count], 600)); 
```

假设`40`是你的单元格的高度，你的表格视图的最小高度是`600`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-27T15:38:34.407

如果所有单元格都具有相同的高度，则 Krunal 解决方案将正常工作。但是，如果您有动态单元格高度，则必须执行以下步骤：

1-从情节提要中设置表格的高度约束。

2- 从情节提要中拖动高度约束并在 viewController 文件中为其创建@IBOutlet。

```
 @IBOutlet weak var tableViewHeightConstraint: NSLayoutConstraint! 
```

3-然后您可以使用以下代码动态更改表格的高度：

```
override func viewWillLayoutSubviews() {
    dispatch_async(dispatch_get_main_queue(), { () -> Void in
        super.updateViewConstraints()
        self.tableViewHeightConstraint?.constant = self.tableView.contentSize.height
    })
} 
```

# c# - 将 JSON 转换为数据表

> ID：11981282
> 
> 赞同：64
> 
> 时间：2012-08-16T05:41:42.670
> 
> 标签：c#, json, datatable

我有以下格式的 JSON：

```
[
    {"id":"10","name":"User","add":false,"edit":true,"authorize":true,"view":true},
    {"id":"11","name":"Group","add":true,"edit":false,"authorize":false,"view":true},
    {"id":"12","name":"Permission","add":true,"edit":true,"authorize":true,"view":true}
] 
```

如何将其转换为 C#`DataTable`对象，如下所示？

```
---------------------------------------------------------------------
ID    |  Name     |  Add    |   Edit  | View   | Authorize
---------------------------------------------------------------------
10    | User      | true    |  true   | true   |  true
11    | Group     | true    |  true   | true   |  true
12    | Permission| true    |  true   | true   |  true 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2014-12-03T22:05:28.677

这里有一个比其他答案更简单的方法，需要先反序列化为 ac# 类，然后将其转换为数据表。

可以使用 JSON.NET 和如下代码直接访问数据表：

```
DataTable dt = (DataTable)JsonConvert.DeserializeObject(json, (typeof(DataTable))); 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-08-16T07:00:54.763

将您的 jsonstring 反序列化为某个类

```
List<User> UserList = JsonConvert.DeserializeObject<List<User>>(jsonString); 
```

将以下[扩展方法](https://stackoverflow.com/questions/564366/convert-generic-list-enumerable-to-datatable)写入您的项目

```
using System.ComponentModel;

public static DataTable ToDataTable<T>(this IList<T> data)
{
    PropertyDescriptorCollection props =
    TypeDescriptor.GetProperties(typeof(T));
    DataTable table = new DataTable();
    for(int i = 0 ; i < props.Count ; i++)
    {
        PropertyDescriptor prop = props[i];
        table.Columns.Add(prop.Name, prop.PropertyType);
    }
    object[] values = new object[props.Count];
    foreach (T item in data)
    {
        for (int i = 0; i < values.Length; i++)
        {
            values[i] = props[i].GetValue(item);
        }
        table.Rows.Add(values);
    }
    return table;        
} 
```

电话扩展方法如

```
UserList.ToDataTable<User>(); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-02-06T15:45:12.720

也可以使用下面的代码来实现。

```
DataSet data = JsonConvert.DeserializeObject<DataSet>(json); 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2016-01-21T11:18:40.053

人们并不总是知道要反序列化的类型。因此，能够获取任何 JSON（包含一些数组）并从中动态生成一个表会很方便。

然而，可能会出现一个问题，即反序列化器不知道在哪里查找要制表的数组。发生这种情况时，我们会收到类似于以下内容的错误消息：

> 读取 DataTable 时出现意外的 JSON 令牌。预期 StartArray，得到 StartObject。路径''，第 1 行，位置 1。

即使我们给予鼓励或相应地准备我们的 json，数组中的“对象”类型仍然可以防止制表的发生，其中反序列化器不知道如何用行等表示对象。在这种情况下，出现类似以下的错误：

> 读取 DataTable 时出现意外的 JSON 令牌：StartObject。路径 '[0].__metadata'，第 3 行，位置 19。

下面的示例 JSON 包含这两个有问题的功能：

```
{
  "results":
  [
    {
      "Enabled": true,
      "Id": 106,
      "Name": "item 1",
    },
    {
      "Enabled": false,
      "Id": 107,
      "Name": "item 2",
      "__metadata": { "Id": 4013 }
    }
  ]
} 
```

那么我们如何解决这个问题，并且仍然保持不知道要反序列化的类型的灵活性呢？

好吧，这是我想出的一个简单方法（假设您很乐意忽略对象类型的属性，例如上面示例中的 __metadata）：

```
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;
using System.Data;
using System.Linq;
...

public static DataTable Tabulate(string json)
{
    var jsonLinq = JObject.Parse(json);

    // Find the first array using Linq
    var srcArray = jsonLinq.Descendants().Where(d => d is JArray).First();
    var trgArray = new JArray();
    foreach (JObject row in srcArray.Children<JObject>())
    {
        var cleanRow = new JObject();
        foreach (JProperty column in row.Properties())
        {
            // Only include JValue types
            if (column.Value is JValue)
            {
                cleanRow.Add(column.Name, column.Value);
            }
        }

        trgArray.Add(cleanRow);
    }

    return JsonConvert.DeserializeObject<DataTable>(trgArray.ToString());
} 
```

我知道这可能更“LINQy”，并且异常处理绝对为零，但希望能传达这个概念。

我们开始在我的工作中使用越来越多的服务来返回 JSON，因此将自己从强类型化中解放出来是我的明显偏好，因为我很懒！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-16T06:02:46.007

您可以在此处使用[JSON.Net](http://json.codeplex.com/)。看看`JsonConvert.DeserializeObject`方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-16T06:50:26.493

我建议您使用[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)。它是一个开源库，可将您的 c# 对象序列化和反序列化为 json 和 Json 对象为 .net 对象...

序列化示例：

```
Product product = new Product();
product.Name = "Apple";
product.Expiry = new DateTime(2008, 12, 28);
product.Price = 3.99M;
product.Sizes = new string[] { "Small", "Medium", "Large" };

string json = JsonConvert.SerializeObject(product);
//{
//  "Name": "Apple",
//  "Expiry": new Date(1230422400000),
//  "Price": 3.99,
//  "Sizes": [
//    "Small",
//    "Medium",
//    "Large"
//  ]
//}

Product deserializedProduct = JsonConvert.DeserializeObject<Product>(json); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-01-01T07:32:06.777

```
json = File.ReadAllText(System.AppDomain.CurrentDomain.BaseDirectory + "App_Data\\" +download_file[0]);
DataTable dt = (DataTable)JsonConvert.DeserializeObject(json, (typeof(DataTable))); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-07-31T15:47:04.083

[这是使用Cinchoo ETL](https://www.nuget.org/packages/ChoETL.JSON/)（一个开源库）将 JSON 转换为 Datatable 的另一种无缝方法

下面的示例显示了如何转换

```
string json = @"[
{""id"":""10"",""name"":""User"",""add"":false,""edit"":true,""authorize"":true,""view"":true},
{ ""id"":""11"",""name"":""Group"",""add"":true,""edit"":false,""authorize"":false,""view"":true},
{ ""id"":""12"",""name"":""Permission"",""add"":true,""edit"":true,""authorize"":true,""view"":true}
]";

using (var r = ChoJSONReader.LoadText(json))
{
    var dt = r.AsDataTable();
} 
```

小提琴示例：[https ://dotnetfiddle.net/y0siCi](https://dotnetfiddle.net/y0siCi)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-21T20:34:44.403

我通过以下方法解决了这个问题 - 下面使用了 Pravin Pawar 的答案 - 将 JSON 对象转换为 dt。

[https://stackoverflow.com/a/11982180/504351](https://stackoverflow.com/a/11982180/504351)

1) 将 JSON 从 Angular 发送到 C# 控制器方法。2）在 C# 控制器方法中 -

将字符串数据（JSON 对象）转换为数据表。

```
DataTable dt = (DataTable)JsonConvert.DeserializeObject(data, (typeof(DataTable))); 
```

3）通过解析数据表dt的行和列，在SQL Server数据库中创建一个表

```
 int dt_length = dt.Columns.Count;
            Random rand = new Random();
            string tablename = "Test" + rand.Next().ToString();
            string query = "Create table " + tablename + "  ( ";

            for (int i = 0; i < dt_length; i ++)
            {
                if(i == dt_length -1)
                {
                    query = query + dt.Columns[i].ColumnName + " varchar(max) ) ";

                }
                else
                {
                    query = query + dt.Columns[i].ColumnName + " varchar(max), ";
                }
            } 
```

4）类似地在创建的表中插入每一行数据。5）这有助于从 JSON 动态创建数据库表。

# jquery - 如何在rails中使用jquery验证插件

> ID：11981290
> 
> 赞同：1
> 
> 时间：2012-08-16T05:43:38.950
> 
> 标签：jquery, ruby-on-rails, validation

如何为下面给出的**rails 表单使用****jquery 验证插件**。

 **我想要关于如何为不同领域制作它的完整步骤。

```
<%= form_for(@user) do |f| %>
 <div class="field">
  <%= f.label :firstname %><br />
  <%= f.text_field :firstname %>
</div>
<div class="field">
  <%= f.label :lastname %><br />
 <%= f.text_field :lastname %>
</div>
<div class="field">
  <%= f.label :mobile %><br />
  <%= f.text_field :mobile %>
</div>
<div class="field">
  <%= f.label :email %><br />
  <%= f.text_field :email %>
</div>
<div class="actions">
  <%= f.submit %>
</div>
<% end %> 
```

请帮帮我...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-04-29T09:28:58.647

您可以使用基于[jquery 验证插件的](https://jqueryvalidation.org/)[jquery 验证 rails](https://github.com/danryan/jquery-validation-rails) gem 。使用它

1.  将 gem 添加到您的 gemfile`gem 'jquery-validation-rails'`
2.  在您`app/assets/javascripts/application.js`添加以下行

    `//= require jquery.validate.additional-methods //= require jquery.validate`

3.  从 turbolinks 5 开始，它包含在 rails 5 中，而不是使用`$(document).ready`turbolinks[自述](https://github.com/turbolinks/turbolinks)`$(document).on "turbolinks:load"`文件中描述的使用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T06:14:16.720

首先在布局中包含 jquery 验证文件。然后在 Rails 表单中将类添加到验证必填字段为 <%= f.text_field :firstname, :class => "required" %>。然后用 form_id 编写一个方法来触发验证。那就是你必须给喜欢

```
$(document).ready(function () { 
   $("your_form_id").validate();  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T07:30:33.220

得到了添加**范围，最小值，最大值**等的解决方案

我们必须使用

```
 <%= f.text_field :mobile,:class => "required number",:minlength=>"10",
   :maxlength=>"10"%> 
```

以上为手机**

# java - Jboss 集群中的 Java 会话

> ID：11981292
> 
> 赞同：0
> 
> 时间：2012-08-16T05:43:54.363
> 
> 标签：java, jboss, spring-security, httpsession

我们的应用程序在 SIT 环境中运行良好（不在集群中）。现在我们将它移动到 JBoss 集群中的 UAT enviormmnt（2 个节点一个集群）。

现在是一个奇怪的问题。

部署了 3 个战争文件：

1.  管理员申请
2.  EHS 应用程序
3.  Visa应用程序（我们的）

成功登录指向管理应用程序。我们有 2 个链接；一个到 Visa 应用程序，一个到 EHS 应用程序。

问题是......当我们点击或应用程序链接（Visa 应用程序）时，导航没有发生。[Spring security information is not available from httpsession] 但是如果我们点击 EHS 链接并返回主页然后点击我们的链接（Visa 应用程序）；它导航。

日志说 httpsession 对象为空。但是所有这些应用程序都在 SIT 环境中运行。如此迷茫..

其他 2 个应用程序在 web.xml 中具有 'FORM' 的身份验证方法

```
 <login-config>
    <auth-method>FORM</auth-method>
    <realm-name>TKSOnlineServicesRealm</realm-name>
    <form-login-config>
        <form-login-page>/login.jsp</form-login-page>
        <form-error-page>/login.jsp?error=1</form-error-page>
    </form-login-config>
</login-config> 
```

但是我们的应用程序有 'BASIC' 。

```
<login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>TKSOnlineServicesRealm</realm-name>
</login-config> 
```

这可能是问题所在。无法追踪。请帮忙。迫在眉睫。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:51:21.447

我认为您应该配置您的 JBoss 服务器来进行**会话复制**和/或**粘性会话**。如果不是，则用户会话仅存储在其中一台 JBoss 服务器中，而另一台不知道该用户，避免他在您的应用程序中导航。

有很多关于配置的信息，但我建议检查[这个](http://marakana.com/bookshelf/jboss_admin_tutorial/high_availability_and_scalability.html)链接来完成它，可以帮助你配置所有 JBoss 集群的东西。

# android - 具有可变长度的类似 GridView 的 Android 小部件

> ID：11981294
> 
> 赞同：1
> 
> 时间：2012-08-16T05:44:18.940
> 
> 标签：android, android-ui, android-gridview

`GridView`是否存在看起来像但支持可变高度项的现有 Android 小部件第三方实现？我需要一个用于图像，但当然可以使用任意视图。内存管理很重要，这样可以回收视图和位图。

或者，一种转换`GridView`源代码的方法来做到这一点？

网格示例：

> 1A 2A 3A
> 
> 1A 2A 3B
> 
> 1A 2B 3C

第一列包含一个标记为 1A（相对高度 1）的项目，第二列包含两个标记为 2A（相对高度 2/3）和 2B（相对高度 1/3）的项目。第三列包含三个项目（所有项目的相对高度均为 1/3）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:17:49.527

我想你正在寻找类似 MS Windows 8 中的 VariableSizedWrapGrid 的东西。我认为 Android 没有类似的东西。也许[这个 SO 线程](https://stackoverflow.com/questions/11227597/gridview-with-dynamic-number-of-colums-in-each-row)中的建议会对您有所帮助。

# php - Yii 将格式化文本保存在文件中

> ID：11981299
> 
> 赞同：1
> 
> 时间：2012-08-16T05:44:44.300
> 
> 标签：php, yii

我需要将格式化的文本保存到操作系统的文件中，然后读取文件并更新它。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:32:01.157

很简单，只需使用 file_get_contents() 和 file_put_contents() 函数。

您听说过 www.php.net 吗？

# android - 关于 Android ContentResolver Query Group By

> ID：11981308
> 
> 赞同：1
> 
> 时间：2012-08-16T05:45:08.233
> 
> 标签：android, sqlite, group-by

我测试了 sql，它在 Sqlite Spy 中运行良好：

```
select ifnull(_name, _number) as identifer, count(_id) as amount from call group by identifer 
```

我想在 ContentConsolver 中使用它，但它不能与“group by”一起使用：

```
String[] projections = new String[] { "ifnull(name, number) as identifer", "count(_id) as amount" };
String group = "identifer";
//String selection = ") GROUP BY (" + group;
Cursor cursor = getContentResolver().query(CallLog.Calls.CONTENT_URI, projections, null, null, null /*!group*/ ); 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:36:44.293

@njzk2[通过在 Ice Cream Sandwich 的 ContentResolver 中使用 HashSet: Group By 来](https://stackoverflow.com/questions/8654904/group-by-in-contentresolver-in-ice-cream-sandwich)做到这一点，但如果你想要总和，它不适用于 count()。我认为最好的解决方案是制作 CallLog Database 的副本，然后您可以使用 rawQuery() 或您想要的任何东西（也许这会浪费性能）。

```
private void refreshDbCache()
{
    CallDbCache dbCache = new CallDbCache(this);
    dbCache.clear(CallDbCache.TB_CALL);

    String[] columns = new String[] { CallLog.Calls._ID, CallLog.Calls.NUMBER, CallLog.Calls.CACHED_NAME };
    Cursor cursor = getContentResolver().query(URI_CALL, columns, null, null, null);
    while (cursor != null && cursor.moveToNext()) {
        int id = cursor.getInt(cursor.getColumnIndex(CallLog.Calls._ID));
        String number = cursor.getString(cursor.getColumnIndex(CallLog.Calls.NUMBER));
        String name = cursor.getString(cursor.getColumnIndex(CallLog.Calls.CACHED_NAME));
        dbCache.insert(CallDbCache.TB_CALL, new LogData(id, number, name, "", "", "", ""));
    }
    cursor.close();

    dbCache.close();
} 
```

# php - 使用 PHP 和 JQuery Ajax 的 Antibot

> ID：11981309
> 
> 赞同：0
> 
> 时间：2012-08-16T05:45:15.570
> 
> 标签：php, jquery, ajax, session

我正在为我的电子邮件表单构建一个简单的反机器人。这是一个产生问题的代码：

```
<?php
    session_start();
    $a = rand(1, 10);
    $b = rand(1, 10);
    $antibot = $a + $b;
    $_SESSION["antibot"] = $antibot;
?>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(document).ready(function(){
    $("#sendEmail").click(function(){
            var antibot = $("#antibot").val();
        $.post(
            "test.php",
            {antibot: antibot}, 
            function(data){
                    alert(data.info);
            }, 
            "json"
            );
        );
    );
);
    </script>
    </head>
    <body>
    <table>
        <tr><td>AntiBot: <?php echo $a . ' + ' . $b;?> = </td><td><input type='text' id='antibot' /></td></tr>
        <tr><td colspan='2'><input type='button' id='sendEmail' value='Send'/></td></tr>
    </table>
    </body>
    </html> 
```

还有我的 test.php

```
<?php
    session_start();
    $antibot = $_POST["antibot"];
    $data = array();
    if(isset($_SESSION["antibot"])){
        if($_SESSION["antibot"] == $antibot){
            $data["info"] = "Session is isset and answer is right!";
        }
        else{
            $data["info"] = "Session is isset but answer is NOT right!";
        }
    }
    else{
        $data["info"] = "Session is NOT isset!";
    }
    echo json_encode($data);
?> 
```

我不断收到此信息：“会话已设置，但答案不正确！” 如果您可以在 test.php 中看到 $_SESSION["antibot"] 已设置，但`""`无论我在输入字段中输入什么值`#antibot`！

我不明白为什么会发生这种情况，请有人告诉我问题出在哪里以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:01:39.877

我在这里测试了这段代码：http: [//onlinephpfunctions.com/stackoverflow/11981309/](http://onlinephpfunctions.com/stackoverflow/11981309/)

它似乎完全有效。

我不得不对您的 javascript 进行一些修改：

```
<script type="text/javascript">
$(document).ready(function(){
    $("#sendEmail").click(function(){
            var antibot = $("#antibot").val();
        $.post(
            "test.php",
            {antibot: antibot}, 
            function(data){
                alert(data.info);
            }, 
            "json"
           )
    })

})
    </script> 
```

之后它工作正常。可能只是浏览器中的 cookie 存在一些问题，或者 PHP 配置中存在错误，因此无法正确存储会话。请检查一下，您的代码可以正常工作，正如您在演示中看到的那样。

# android - 如何将apk的安装推送到android“app-private”文件夹中？

> ID：11981310
> 
> 赞同：0
> 
> 时间：2012-08-16T05:45:16.527
> 
> 标签：android

通过正常打包 android 应用程序，任何人都可以使用备份工具从系统/应用程序访问 apk 文件。虽然我注意到存储在 system/app-private 中的 apk 文件无法保存，除非手机已植根。

谁能建议我在 app-private 文件夹中安装一个 android 应用程序的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:33:56.097

我认为可以在 Play Store 的开发者控制台中的发布选项 - 复制保护部分中设置此选项。但是这个功能很快就会被弃用。

# android - 如何停止异步任务

> ID：11981314
> 
> 赞同：0
> 
> 时间：2012-08-16T05:45:38.883
> 
> 标签：android

当我单击按钮（取消同步）时，我想取消 Asynctask，但执行了 onProgressUpdate() 方法并显示错误：活动已泄漏窗口，因为它在活动更改后尝试执行 alert.show()。那么在单击取消同步后我可以做些什么来停止这个 AsyncTask

```
CancelButton:

 cancelsync.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    AlertDialog alert =new AlertDialog.Builder(NeliteMusicActivity.this).create();
                    alert.setTitle(R.string.set4Play);
                    alert.setMessage(getString(R.string.interrupted));
                    alert.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
                    alert.setButton(getString(R.string.yes), new DialogInterface.OnClickListener() {
                          public void onClick(DialogInterface dialog, int which) {
                              if(communicator != null && !communicator.isCancelled())
                              communicator.cancel(true);
                              Intent myintent = new Intent(NeliteMusicActivity.this,HomeScreen.class);
                              startActivity(myintent);
                            return;
                        } 
                        }); 

                    alert.setCanceledOnTouchOutside(false);
                    alert.show();
                    isTrue = false;
                }
            });

AsyncTask:

       class Communicator extends AsyncTask<String, String, String> 
        {
        @Override
                protected void onProgressUpdate(String... values) {
                    super.onProgressUpdate(values);
                    int a=messag;
                    progress.setProgress(a);
                    textsync.setText("Syncing mix "+c+"/"+list.size());
                    if(progress.getMax()<=a)
                    {
                                if (isOnline()) 
                                {
                                    final AlertDialog alert =new AlertDialog.Builder(NeliteMusicActivity.this).create();
                                    alert.setTitle(R.string.set4Play);
                                    alert.setMessage(getString(R.string.updatedMix));
                                    alert.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
                                    alert.setButton(getString(R.string.ok), 
                                            new DialogInterface.OnClickListener() 
                                    {
                                          public void onClick(DialogInterface dialog, int which) {
                                              alert.dismiss();
                                              animatedStartActivity();
                                        }
                                        });
                                    alert.setCanceledOnTouchOutside(false);
                                    alert.show();
                                }
                            if (!isOnline()) {
                                final AlertDialog alert =new AlertDialog.Builder(NeliteMusicActivity.this).create();
                                alert.setTitle(R.string.set4Play);
                                alert.setMessage(getString(R.string.connectionerror));
                                alert.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
                                alert.setButton(getString(R.string.ok), new DialogInterface.OnClickListener() {
                                      public void onClick(DialogInterface dialog, int which) {
                                          alert.dismiss();
                                          animatedStartActivity();
                                    } 
                                    }); 
                                alert.setCanceledOnTouchOutside(false);
                                alert.show();
                            }

                    }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:58:04.200

在您使用的情况下，

```
communicator.cancel(true); // this is working fine 
```

你得到错误，

> 错误：Activity 已泄漏窗口，因为它在 Activity 更改后尝试执行 alert.show()。

正如错误所说，这是因为您试图显示一段`AlertDialog`时间 your `Activity`is not if `Foreground`。

# javascript - 需要使用 javascript 实现我的算法

> ID：11981317
> 
> 赞同：0
> 
> 时间：2012-08-16T05:45:48.697
> 
> 标签：javascript, jquery

我做了小算法，想用javascript来实现它。这是我的算法

我`data.json`在这种格式的文件中有一个数据

```
[
"109 200",
"109 201",
"102 202",
"103 202"
] 
```

我想做的是

1.  创建四个数组容器，即 c1、c2、c3 和 c4。
2.  将上述数据原样放入 c1 容器中
3.  循环通过 c1 并将数据按以下格式放入 c4

    ```
    "109",
    "200",
    "109",
    "201",
    "102",
    "202",
    "103",
    "202" 
    ```

4.  循环通过 c1 并将它们以这种格式放入 c2

    ```
    "109,200" 
    ```

5.  然后检查 c3 是否为空，然后从 c2 读取第一个值并将其推入 c3。

6.  重复步骤 4，但这次将来自 c1 的第二个数据，即“109 201”以这种格式放入 c2

    ```
    "109,201" 
    ```

7.  然后检查 c3 是否不为空，然后循环遍历 c2 并检查这两个值中的任何一个是否在 c4 中重复。如果重复，则重复第 6 步和第 7 步，直到从 data.json 中找到最少数量的数字。

该算法效率不高，但我仍然想使用它。

这是我的代码。

```
var teams = [],
    c1 = [], arr = [], left = [], right = [], j = 0,
    show = function () {
        var span = $('#list');

        $.getJSON('data/data.json', function (ids) {

            //c1.push(c);
            for (var i = 0; i < ids.length; i++) {
                var a = smallcontainer(ids);
                var b = bigcontainer(ids);
                var c;

                if (c1 == "") {
                    c = a[0].split(" ");
                    console.log(c);
                } else {

                }

                //console.log(c);
                var id = ids[i];
                teams = id;
                $('<li>' + id + '</li>').appendTo(span);
            }
        });
    },

    smallcontainer = function (teams) { //arr
        arr = [teams[j]];
        j++;
        return arr;
    },

    bigcontainer = function (ids) { //c3\. in code it is left+right=result
        for (var i = 0; i < ids.length; i++) {
            var splitted = ids[i].split(" ");
            left.push(splitted[0]);
            right.push(splitted[1]);

        }
        var result = left.concat(right);
    }; 
```

**更新**

data.json 文件中的数据有四个团队，每个团队有两个成员以这种形式

```
"109 200" = Team 1
"109 201" = Team 2
"102 202" = Team 3
"103 202" = Team 4 
```

所以现在我必须计算最少的人数，它必须从这个列表中的每个团队中选择一个成员并显示他们的 ID。所以上面的输出将是

```
109
202 
```

**最新更新**

我还在等待帮助

**解决方案**

这是在 AlexBEll 和 PAEz 的帮助下的解决方案。我使用了下面的解决方案，基本上由 AlexBell 解决

```
var data = [
 "1009 2000", 
 "1009 2001", 
 "1002 2002", 
 "1003 2002", 
 "1004 2003", 
 "1005 2004", 
 "1006 2005", 
 "1007 2006", 
 "1007 2007", 
 "1008 2008", 
 "1009 2008", 
 "1010 2009", 
 "1011 2010", 
 "1012 2010"      
];

var first = [], second = [], result = {}, out = '';

//Separe the ids
for(var i = 0; i < data.length; i++){
    var el = data[i].split(' '); 
    first[i] = el[0];
    second[i] = el[1];
}

for(var k = 0; k < first.length; k++){

    //Count the elements
    var nOfFirst = countElemnts(first, first[k]);
    var nOfSecond = countElemnts(second, second[k]);

    //If the first is in more that second take it
    if(nOfFirst > nOfSecond){
        result[first[k]] = 0;
    //Else take the second        
    }else if(nOfFirst < nOfSecond){
        result[second[k]] = 0;
    //If is only one take it    
    }else{
        result[first[k]] = 0;
    }

}

function countElemnts(arr, el){
    var count = 0;
    for(var j = 0; j < arr.length; j++){
        if(arr[j] == el)
            count++;
    }
    //console.log(el+' : '+count);
    return count;
}

for(var n in result){
    out += 'The id n: '+n+' is in the list\n';
}

alert(out); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:53:58.017

这行得通吗？......

```
var teams=[
"109 200",
"109 201",
"102 202",
"103 202"
];

var members ={};

var matesId='109';

// Members that won
var wins={};

// First lets find out how many teams a member is in
for (var i=0,length=teams.length; i<length;i++){
  var temp = teams[i].split(' ');
  for (var z=0,zlength=temp.length;z<zlength;z++){
    if (!members[temp[z]]) members[temp[z]]={wins:0,totalTeams:0,id:temp[z]};
      members[temp[z]].totalTeams=members[temp[z]].totalTeams+1;
  }
    teams[i]=[members[temp[0]],members[temp[1]]];
}

for (var i=0,length=teams.length; i<length;i++){
  var member1=teams[i][0];
  var member2=teams[i][1];
  if (member1.totalTeams>member2.totalTeams){
    member1.wins=member1.wins+1;
  } else if (member1.totalTeams<member2.totalTeams){
    member2.wins=member2.wins+1;
  } else {
    member1.wins=member1.wins+1;
    member2.wins=member2.wins+1;
  }    
}

for (var i=0,length=teams.length; i<length;i++){
  var member1=teams[i][0];
  var member2=teams[i][1];
  if (member1.wins>member2.wins){
    if (wins[member2.id]!==true) wins[member1.id]=true;
  } else if (member1.wins<member2.wins){
    if (wins[member1.id]!==true) wins[member2.id]=true;
  } else if (!wins[member1.id] && !wins[member2.id]) {
    if (member1.id==matesId && member2.id==matesId) {
      wins[matesId]=true;
    } else{
     // A draw, so pick one
      Math.round(Math.random())==1 ? wins[member2.id]=true : wins[member1.id]=true;
    }
  }    
}

var keys=Object.keys(wins);
var results=[];
results.push(keys.length);
for (var i=0,length=keys.length; i<length;i++){
  results.push(keys[i]);
}
results=results.join('\n');
document.querySelector('#output').innerText=results;​ 
```

[http://jsfiddle.net/PAEz/dLUqj/3/](http://jsfiddle.net/PAEz/dLUqj/3/)
编辑：对其进行了更新，使其更易于阅读。
编辑：意识到你不需要平局和胜利，只要胜利就可以了。
最后编辑：注意到一个小错误，现在应该都是。

# java - 了解服务和 DAO 层

> ID：11981323
> 
> 赞同：4
> 
> 时间：2012-08-16T05:46:19.637
> 
> 标签：java, hibernate, architecture, persistence, dao

我被要求在项目的业务逻辑模块中创建类的文档。我注意到有一个关于如何创建类的模式。图案看起来像这样

```
 public class AModel(){
          //fields
          //getter and setters
    }

    public class AService(){

          public void processA(AModel model){
                  //creates instance of AModel, assigns values to fields
                  //calls ADaoService methods
          }  

    }

    public class ADaoService(){

           //has methods which call ADao methods
           //sample
           public AModel retrieveById(long id){
                 log.debug(...);
                 return (ADao.retrieveById(id));
           }

    }

    public class ADAo(){
            //has entityManager and some query

            public AModel retrieveById(long id){
                  return((AModel) entityManager.find(AModel.class, id));
            }
    } 
```

我不明白的是为什么 AService 调用 ADaoService 方法而不是仅仅调用 ADao 方法，因为 ADaoService 方法只是调用 ADao 方法。在我看来， ADaoService 只是浪费代码。它们是使用 Hibernate 和 JBoss 服务器。我只是这种架构的新手。希望有人能帮助我理解。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T06:17:27.063

好吧，如果`ADaoService`只是委派调用，`ADao`那么显然你是对的 - 它目前没有存在*的*理由。

关于*未来的*理由，好吧，AFAIK，典型的分层不包括`ADaoService`层。我工作的地方我们没有。在 Hibernate 文档中从未见过它......

要么你的架构师对层很慷慨，要么他们有一些非典型的场景。

如果该层没有当前的用途，也没有明确的未来用途 - 没有它你会更好。

# jquery - 使用 jquery 激活和停用箭头键

> ID：11981325
> 
> 赞同：0
> 
> 时间：2012-08-16T05:46:24.393
> 
> 标签：jquery, textarea, onfocus

当页面加载以下内容时，我正在停用左右箭头键：

```
$(document).keydown(function(event) {
     switch(event.keyCode){
        case 37:
        case 39:
            return false;
            break;
     }
 }); 
```

我想在 textarea 或输入字段 id onfocus 时重新激活它们，并在该元素不再处于焦点时再次停用它们。你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:00:41.703

你可以检查一下`event.target`。

```
$(document).keydown(function(event) {
    if (event.target instanceof HTMLInputElement 
     || event.target instanceof HTMLTextAreaElement)     { 
       return true;
    }
     switch(event.keyCode){
        case 37:
        case 39:
            return false;
            break;
     }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:01:12.993

这应该可行..但出于可访问性的原因，您真的不应该这样做。

```
var blockKeys = true; //Set this to true or false as needed
$(document).keydown(function(event) {
     switch(event.keyCode){
        case 37:
        case 39:
            if(blockKeys === true) {
                event.PreventDefault();
            }
            break;
     }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T06:23:58.043

试试这个作为你在开关盒中返回的条件

```
if(event.target.tagName != "INPUT" &&  event.target.tagName != "TEXTAREA" )
{
   return false;
   break;
  } 
```

# c# - 如何在 C# 中将字典（以数组作为值）转换为列表

> ID：11981331
> 
> 赞同：1
> 
> 时间：2012-08-16T05:46:34.403
> 
> 标签：c#, arrays, list, dictionary

我需要将 a 转换`dictionary`为 a`list`以便可以将其绑定到网格。

My `dictionary`has`string`作为**键**， an `array`of`doubles`作为**值**。

我可以使用 上的函数将 转换`dictionary`为 a ，但是当我将其绑定到网格时，会在网格列中显示为对象。`list``ToList<>``dictionary``array`

如何将 of 中的值`array`添加`doubles`到`list`？有没有办法让我在将值转换为 a`array`的同时将值提取到列表中？`dictionary``list`

这就是我目前正在做的事情：

```
List<KeyValuePair<string, double[]>> dataList = 
                    dataDictionary.ToList<KeyValuePair<string, double[]>>(); 
```

我需要保留`string`和 中的两个`double`值`array`（双精度数组的大小为 2）以显示在网格中。

我看过这个，但无法实现我需要的： [Convert dictionary to List<KeyValuePair>](https://stackoverflow.com/questions/4557220/convert-dictionary-to-listkeyvaluepair)

任何建议或帮助将不胜感激。

提前致谢，

马旺

PS - 我也考虑过将其转换`dictionary`为 a`datatable`以便我可以将其绑定到网格，但我不确定这是否可行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T05:52:23.810

```
IList<double> list = dictionary.SelectMany(item => item.Value).ToList(); 
```

> 我需要保留数组中的字符串和两个双精度值（双精度数组的大小为 2）以显示在网格中。

`array`您应该实现将在视图上迭代的附加逻辑。您也可以手动创建`Tuple<string,double,double>`和绑定 2 个`double`值。

```
 Func<double[], int, double?> safeGet = (array, index) => array.Length - 1 >= index ? (double?)array[index] : null;
            var list = dataList.Select(item => Tuple.Create(item.Key, safeGet(item.Value, 0), safeGet(item.Value, 1))).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T10:10:46.880

**字典列表**

```
 Dictionary<string, double[]> dict = new Dictionary<string, double[]>();
    dict.Add("1", new double[] { 1.10, 1.20 });
    dict.Add("2", new double[] { 2.10, 2.20 });
    dict.Add("3", new double[] { 3.10, 3.20 });
    dict.Add("4", new double[] { 4.10, 4.20 });
    dict.Add("5", new double[] { 5.10, 5.20 });

     var lstRecord = dict.Select(i => new { Key = i.Key, Val1 = i.Value[0], Val2 = i.Value[1] }).ToList();
     dataGridView1.DataSource = lstRecord; 
```

**字典到数据表**

```
 private void button1_Click(object sender, EventArgs e)
        {
            Dictionary<string, double[]> dict = new Dictionary<string, double[]>();
            dict.Add("1", new double[] { 1.10, 1.20 });
            dict.Add("2", new double[] { 2.10, 2.20 });
            dict.Add("3", new double[] { 3.10, 3.20 });
            dict.Add("4", new double[] { 4.10, 4.20 });
            dict.Add("5", new double[] { 5.10, 5.20 });

            dataGridView1.DataSource = Dictionary2Table(dict);
        }

        public DataTable Dictionary2Table(Dictionary<string, double[]> dict)
        {
            DataTable dt = new DataTable();
            dt.Columns.Add("key", typeof(string));
            dt.Columns.Add("Value1", typeof(double));
            dt.Columns.Add("Value2", typeof(double));
            dict
                .Select(i => new { Key = i.Key, Val1 = i.Value[0], Val2 = i.Value[1] })
                .ToList()
                .ForEach(i=>dt.Rows.Add(i.Key,i.Val1,i.Val2));
            return dt;
        } 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T07:02:52.750

您可以为此使用元组：

```
var result = dataDictionary.Select(x => Tuple.Create(x.Key, x.Value[0], x.Value[1]))
                           .ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T06:11:33.270

尝试这个：

```
 Dictionary<string, double[]> dict = new Dictionary<string, double[]>()
    {
        {"a",new double[]{1,2}},
        {"b",new double[]{3,4}}
    };
        List<Tuple<string, double, double>> list = dict.Select(kvp => Tuple.Create(kvp.Key, kvp.Value[0], kvp.Value[1])).ToList(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T06:11:42.633

那这个呢

```
public class HelperClass
{
    private readonly KeyValuePair<string, double[]> Item;

    [Bindable]
    public string Key { get { return Item.Key; } }

    [Bindable]
    public double Value1 {get { return Item.Value[0]; } }

    [Bindable]
    public double Value2 {get { return Item.Value[1]; } }

    public HelperClass(KeyValuePair<string, double[]> item)
    {
        this.Item = item;
    }
}

public List<HelperClass> Convert(Dictionary<string, double[]> items)
{
    var result = new List<HelperClass>(items.Count);
    foreach(var item in items)
        result.Add(new HelperClass(item));
    return result;
} 
```

现在您可以将 Grid 绑定到`List<HelperClass>`

# c# - TextFieldParser 不解析最后一行

> ID：11981332
> 
> 赞同：1
> 
> 时间：2012-08-16T05:46:39.027
> 
> 标签：c#, asp.net, sql, csv

我在我的 sql 数据库中导入 .csv 文件。我正在使用 TextFieldParser。

我的代码是

```
TextFieldParser parser = new TextFieldParser(file); 
//single file 
//TextFieldParser parser = new TextFieldParser(CSVFolderPath + "\\" + file); 
parser.TextFieldType = FieldType.Delimited; 
parser.SetDelimiters(","); 
int k = 0; 
while (!parser.EndOfData) 
{ 
    //Processing row 
    string[] fields = parser.ReadFields(); 
    if (k != 0) 
    { 
        for (int i = 0; i < fields.Length; i++) 
        { 
            stationcode = fields[0].ToString().Substring(4, 5); 
            //if (fields[1].ToString().Substring(14, 8) == date) 
            //{ 
            if (i == 0) 
            { 

                dr = workTable.NewRow(); 
                dr[i] = fields[i].Substring(0, fields[i].Length - 4);  

            } 
            else if (i == 3) 
            { 
                dr[i] = Convert.ToDateTime(fields[i].ToString()); 
            } 
            else if (i == 4) 
            { 
                dr[i] = Convert.ToDateTime(fields[i].ToString()); 
            } 
            else if (i == 5) 
            { 
                dr[i] = Convert.ToInt32(fields[i].ToString()); 
            } 
            else 
                dr[i] = fields[i].ToString(); 
            if (i == 5) 
            { 
                workTable.Rows.Add(dr); 
            } 
            //} 

        } 
    } 
    k = k + 1; 
} 
parser.Close(); 
```

这里的工作表是DataTable。

代码解析文件很好。

但在我的 csv 文件中，最后一行用于摘要。一些字段的总和。

我不想包含该行以插入数据表。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T10:48:58.077

如果您的最后一行以某个特定字符串（例如“Summary”）开头，则可以使用 TextFieldParser 类的 CommentTokens 属性。

请参阅：http: [//msdn.microsoft.com/fr-fr/library/microsoft.visualbasic.fileio.textfieldparser.commenttokens (v=vs.110).aspx](http://msdn.microsoft.com/fr-fr/library/microsoft.visualbasic.fileio.textfieldparser.commenttokens(v=vs.110).aspx)

并且： http: [//geekswithblogs.net/brians/archive/2010/07/07/whats-a-nice-class-like-textfieldparser-doing-in-a-namespace.aspx](http://geekswithblogs.net/brians/archive/2010/07/07/whats-a-nice-class-like-textfieldparser-doing-in-a-namespace.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:24:23.893

如果内存空间不是问题。首先加载 CSV 行列表，然后解析每一行保存最后一行。否则，您需要某种方式来识别汇总行。（例如日期之类的空数据）可以指示解析器忽略该行。

处理导入数据的最佳方法是尝试确定导入文件将仅包含要导入的数据。（没有标题，没有摘要等）不幸的是，很多公司尝试导入报告而不是实际的导出文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-28T18:47:18.470

如果您有许多不同的情况需要识别摘要行和内存空间是一个问题，您始终可以使用以下`TextFieldParser.PeekChars(Int32)`方法：

> 读取指定数量的字符而不推进光标。

在备注部分：

> numberOfChars 值必须小于该行中的字符总数。如果不是，PeekChars 返回的字符串将被截断为行的长度。

为此：

```
TextFieldParser parser = new TextFieldParser(file); 
//single file 
//TextFieldParser parser = new TextFieldParser(CSVFolderPath + "\\" + file); 
parser.TextFieldType = FieldType.Delimited; 
parser.SetDelimiters(","); 
int k = 0; 
while (!parser.EndOfData) 
{ 
    //Processing row 
    string[] fields = parser.ReadFields();

    //Peek if this is the last line, then break
    if (parser.PeekChars(Int32.MaxValue) is "") break;

    if (k != 0) 
    { 
... 
```

docs.microsoft[链接](https://docs.microsoft.com/en-us/dotnet/api/microsoft.visualbasic.fileio.textfieldparser.peekchars?view=netframework-4.8)

# postgresql - 创建唯一令牌（数字）

> ID：11981333
> 
> 赞同：2
> 
> 时间：2012-08-16T05:46:40.547
> 
> 标签：postgresql, token, sequences

我有一个数据库，我想在其中生成六个数字字符的唯一标记。每次在`invoice_no`列中插入发票编号时都应生成此标记。这意味着每次我执行插入并且列`invoice_no`不是`null`时，都会生成数字标记。我希望令牌生成尽可能多的令牌，而不会在任何情况下重复令牌。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:54:30.113

您可以创建一个序列并使用它来生成标记：

```
CREATE SEQUENCE seq_token
MINVALUE 0
MAXVALUE 999999
CYCLE
; 
```

要将当前令牌设置为下一个可用值：

```
num_token := nextval('seq_token'); 
```

您的实际令牌必须是 6 位数长。如果您使用以零开头的标记（例如 002354），则实际标记必须是文本，您可以像这样生成

```
text_token := lpad(num_token::text, 6, '0'); 
```

如果令牌必须是数字，`MINVALUE`则更改为 100000。

（分配在 中`plpgsql`。您可以在触发器或存储过程中使用它们。）

# ruby-on-rails - 如何使用路由别名改进重定向

> ID：11981334
> 
> 赞同：1
> 
> 时间：2012-08-16T05:46:40.820
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我正在为应用程序使用设计，但我不喜欢我的应用程序在成功登录后重定向的方式。这是`rake routes`的输出：

```
 manager_root GET    /managers/dashboard(.:format)      managers#dashboard
   student_root GET    /students/dashboard(.:format)      students#dashboard
enterprise_root GET    /enterprises/dashboard(.:format)   enterprises#dashboard 
```

**到目前为止我所拥有的**

```
def after_sign_in_path_for(resource)               
  "/#{current_user.profile_type.pluralize}/dashboard"
end 
```

**我试过的**

```
def after_sign_in_path_for(resource)               
  "#{current_user.profile_type}"_root_path
end
#=> application_controller.rb:17: syntax error, unexpected tIDENTIFIER, expecting keyword_end

def after_sign_in_path_for(resource)               
  "#{current_user.profile_type}_root_path"
end
#=> ERROR URI::InvalidURIError: the scheme http does not accept registry part:localhost:3000enterprise_root_path (or bad hostname?) 
```

**笔记**

*   我只有一个名为 的设计模型`User`，它有一个名为 的列`profile_type`，其值可以`'enterprise'`是`'student'`或`'manager'`。

*   我只想使用我的路线别名。

*   到目前为止，我得到了什么，所以我只想改进它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:44:22.580

通过[**nash**](https://stackoverflow.com/users/336626/nash)的回答，我搜索了多态性的更好用法并做出了自己的回答。

这是获取帖子评论和新闻评论网址的常用方法

```
# parent may be a post or a news
if Post === parent
  post_comments_path(parent)
elsif News === parent
  news_comments_path(parent)
end 
```

Rails 提供了一种生成[多态 url](http://api.rubyonrails.org/classes/ActionDispatch/Routing/PolymorphicRoutes.html)的简单方法。所以我们可以使用`polymorphic_path`来获取`post`'s 和`news`' 评论的 url

```
# "/posts/1/comments" or "'news/1/comments"
polymorphic_path([parent, Comment]) 
```

这可以获得帖子和新闻的网址

```
# "http://example.com/posts/1/comments" or "http://example.com/news/1/comments"
polymorphic_path(parent) 
```

polymorphic_path 使多态 url 生成变得更加容易和简单。还有一个名为的方法，它与生成包含主机名的完整 url的方法`polymorphic_url`相同。`polymorphic_path``polymorphic_url`

除此之外，rails 还为`polymorphic_path/polymorphic_url`

```
new_polymorphic_path(Post)    # "/posts/new"
new_polymorphic_url(Post)     # "http://example.com/posts/new"
edit_polymorphic_path(post)   # "/posts/1/edit"
edit_polymorphic_url(post)    # "http://example.com/posts/1/edit" 
```

就我而言，我只是

```
def after_sign_in_path_for(resource)
  polymorphic_path [current_user.profile_type, :root]
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T06:26:59.550

我认为这应该适合你：

```
def after_sign_in_path_for(resource)               
  polymorphic_url([current_user.profile_type, :root])
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:35:24.817

尝试这个

```
def after_sign_in_path_for(resource)               
  send("#{current_user.profile_type}_root_path")
end 
```

# c# - 如何让应用程序名称显示在打开方式列表中？

> ID：11981337
> 
> 赞同：6
> 
> 时间：2012-08-16T05:47:08.693
> 
> 标签：c#, wpf, registry, open-with

这是我的问题的[延续](https://stackoverflow.com/q/11896823/217880)。我正在为 *.bmp 类型创建一个打开列表。根据该问题的答案，我已经从注册表项中创建了一个打开列表中的应用程序列表。

```
 public void RecommendedPrograms(string ext)
    {

        string baseKey = @"Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\." + ext;

        using (RegistryKey rk = Registry.CurrentUser.OpenSubKey(baseKey + @"\OpenWithList"))
        {
            if (rk != null)
            {
                string mruList = (string)rk.GetValue("MRUList");
                if (mruList != null)
                {
                    foreach (char c in mruList.ToString())
                    {
                        string str=rk.GetValue(c.ToString()).ToString();
                        if (!progs.Contains(str))
                        {
                            progs.Add(str);
                        }
                    }
                }
            }
        }

        using (RegistryKey rk = Registry.CurrentUser.OpenSubKey(baseKey + @"\OpenWithProgids"))
        {
            if (rk != null)
            {
                foreach (string item in rk.GetValueNames())
                    progs.Add(item);
            }
        }

        using (RegistryKey rk = Registry.ClassesRoot.OpenSubKey("." + ext + @"\OpenWithList"))
        {
            if (rk != null)
            {
                foreach (var item in rk.GetSubKeyNames())
                {
                    if (!progs.Contains(item))
                    {
                        progs.Add(item.ToString());
                    }
                }
            }
        }
        using (RegistryKey rk = Registry.ClassesRoot.OpenSubKey("." + ext + @"\OpenWithProgids"))
        {
            if (rk != null)
            {
                foreach (string item in rk.GetValueNames())
                {
                    if (!progs.Contains(item))
                    {
                        progs.Add(item);
                    }
                }
            }
        }

    } 
```

此方法将返回应用程序名称列表，例如，

*   画图
*   ehshell.exe
*   MSPaint.exe
*   ois.exe
*   VisualStudio.bmp.10.0
*   快速时间.bmp

这些是 PrgId，我可以从中获取打开特定应用程序所需执行的命令

```
 public string GetRegisteredApplication(string StrProgID)
    {
        // 
        //  Return registered application by file's extension
        // 
        RegistryKey oHKCR;
        RegistryKey oOpenCmd;
        string command;

        if (Environment.Is64BitOperatingSystem == true)
        {
            oHKCR = RegistryKey.OpenBaseKey(Microsoft.Win32.RegistryHive.ClassesRoot, RegistryView.Registry64);
        }
        else
        {
            oHKCR = RegistryKey.OpenBaseKey(Microsoft.Win32.RegistryHive.ClassesRoot, RegistryView.Registry32);
        }
        try
        {

            oOpenCmd = oHKCR.OpenSubKey(StrProgID + "\\shell\\open\\command");
            if (oOpenCmd == null)
            {
                oOpenCmd = oHKCR.OpenSubKey("\\Applications\\" + StrProgID + "\\shell\\open\\command");
            }
            if (oOpenCmd != null)
            {
                command = oOpenCmd.GetValue(null).ToString();
                oOpenCmd.Close();
            }
            else
            {
                return null;
            }
        }
        catch (Exception ex)
        {
            return null;
        }
        return command;
    } 
```

现在如何获得必须在菜单中显示的应用程序名称？每次您开始使用新的应用程序时，Windows 操作系统都会自动从 exe 文件的版本资源中提取应用程序名称，并将其存储在称为“MuiCache”的注册表项中以供以后使用。MUICache 数据存储在 HKEY_CURRENT_USER\Software\Classes\Local Settings\Software\Microsoft\Windows\Shell\MuiCache 下

但我们不能保证应用程序至少运行过一次。我们也可以直接从文件的版本资源中获取描述密钥，但是我在从命令中拆分应用程序路径时遇到了一些麻烦，例如

> %SystemRoot%\System32\rundll32.exe "%ProgramFiles%\Windows Photo Viewer\PhotoViewer.dll", ImageView_Fullscreen %1

我怎样才能得到名称信息？

在我的命令列表下方

*   "C:\Windows\System32\rundll32.exe \"C:\Program Files\Windows Photo Viewer\PhotoViewer.dll\", ImageView_Fullscreen %1"
*   "\"C:\Windows\eHome\ehshell.exe\"\"%1\""
*   "C:\PROGRA~1\MIF5BA~1\Office14\OIS.EXE /shellOpen\"%1\""
*   "\"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe\" /dde"
*   "C:\Program Files (x86)\QuickTime\PictureViewer.exe \"%1\""

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T07:06:48.930

如果您知道命令列表，则可以使用下面给出的代码检索描述

```
 FileVersionInfo.GetVersionInfo(Path.Combine(Environment.SystemDirectory, "Notepad.exe"));
 FileVersionInfo myFileVersionInfo = FileVersionInfo.GetVersionInfo(Environment.SystemDirectory + "\\Notepad.exe");

    // Print the file name and version number.
    Console.WriteLine("File: " + myFileVersionInfo.FileDescription + '\n' +
       "Version number: " + myFileVersionInfo.FileVersion); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T21:03:43.567

基于 Amal 的解决方案，您只需要处理两个场景：

1) 那些启动 "C:\Windows\System32\rundll32.exe" 2) 其他一切

如果你想要一些粗略的东西，你可以用“C:\Windows\System32\rundll32.exe”替换一个空字符串。将 "s 替换为空字符串，以第一个正斜杠 (/) 或 % 终止您的字符串，然后修剪结果。

您将留下您想要命名的 .dll 或 .exe 的名称（这可能会使用 RegEx 更优雅地完成，如果您需要处理更多场景，此解决方案最终会很快变得复杂） .

然后，您通过 Amal 的一些代码运行它，您应该拥有您想要的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T11:16:38.670

更新：对不起，我看错了你的帖子。

仅当您根据扩展名查找默认应用程序名称时，这才有帮助。不基于 progID。

```
public static class FileAssoc
{
    [DllImport("Shlwapi.dll", CharSet = CharSet.Auto, SetLastError = true)]
    static extern uint AssocQueryString(AssocF flags, AssocStr str, string pszAssoc, string pszExtra, [Out] StringBuilder sOut, [In][Out] ref uint nOut);

    [Flags]
    public enum AssocF
    {
        Init_NoRemapCLSID = 0x1,
        Init_ByExeName = 0x2,
        Open_ByExeName = 0x2,
        Init_DefaultToStar = 0x4,
        Init_DefaultToFolder = 0x8,
        NoUserSettings = 0x10,
        NoTruncate = 0x20,
        Verify = 0x40,
        RemapRunDll = 0x80,
        NoFixUps = 0x100,
        IgnoreBaseClass = 0x200
    }

    public enum AssocStr
    {
        Command = 1,
        Executable,
        FriendlyDocName,
        FriendlyAppName,
        NoOpen,
        ShellNewValue,
        DDECommand,
        DDEIfExec,
        DDEApplication,
        DDETopic
    }

    public static string GetApplicationName(string fileExtensionIncludingDot)
    {
        uint cOut = 0;
        if (AssocQueryString(AssocF.Verify, AssocStr.FriendlyAppName, fileExtensionIncludingDot, null, null, ref cOut) != 1)
            return null;
        StringBuilder pOut = new StringBuilder((int)cOut);
        if (AssocQueryString(AssocF.Verify, AssocStr.FriendlyAppName, fileExtensionIncludingDot, null, pOut, ref cOut) != 0)
            return null;
        return pOut.ToString();
    }
} 
```

你可以像这样使用它

```
string applicationName = FileAssoc.GetApplicationName(".docx");
// results in "Microsoft Office Word" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-29T18:26:00.637

我的代码包括检查以防止一些常见错误...希望它有所帮助:-)

```
using System;
using System.Diagnostics;
using System.IO;
using System.Runtime.InteropServices;
using System.Text;

namespace HQ.Util.Unmanaged
{
    /// <summary>
    /// Usage: string executablePath = FileAssociation.GetExecFileAssociatedToExtension(pathExtension, "open");
    /// Usage: string command FileAssociation.GetExecCommandAssociatedToExtension(pathExtension, "open");
    /// </summary>
    public static class FileAssociation
    {
        /// <summary>
        /// 
        /// </summary>
        /// <param name="ext"></param>
        /// <param name="verb"></param>
        /// <returns>Return null if not found</returns>
        public static string GetExecCommandAssociatedToExtension(string ext, string verb = null)
        {
            if (ext[0] != '.')
            {
                ext = "." + ext;
            }

            string  executablePath = FileExtentionInfo(AssocStr.Command, ext, verb);

            // Ensure to not return the default OpenWith.exe associated executable in Windows 8 or higher
            if (!string.IsNullOrEmpty(executablePath) && File.Exists(executablePath) &&
                !executablePath.ToLower().EndsWith(".dll"))
            {
                if (executablePath.ToLower().EndsWith("openwith.exe"))
                {
                    return null; // 'OpenWith.exe' is th windows 8 or higher default for unknown extensions. I don't want to have it as associted file
                }
                return executablePath;
            }
            return executablePath;
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="ext"></param>
        /// <param name="verb"></param>
        /// <returns>Return null if not found</returns>
        public static string GetExecFileAssociatedToExtension(string ext, string verb = null)
        {
            if (ext[0] != '.')
            {
                ext = "." + ext;
            }

            string executablePath = FileExtentionInfo(AssocStr.Executable, ext, verb); // Will only work for 'open' verb
            if (string.IsNullOrEmpty(executablePath))
            {
                executablePath = FileExtentionInfo(AssocStr.Command, ext, verb); // required to find command of any other verb than 'open'

                // Extract only the path
                if (!string.IsNullOrEmpty(executablePath) && executablePath.Length > 1) 
                {
                    if (executablePath[0] == '"')
                    {
                        executablePath = executablePath.Split('\"')[1];
                    }
                    else if (executablePath[0] == '\'')
                    {
                        executablePath = executablePath.Split('\'')[1];
                    }
                }
            }

            // Ensure to not return the default OpenWith.exe associated executable in Windows 8 or higher
            if (!string.IsNullOrEmpty(executablePath) && File.Exists(executablePath) &&
                !executablePath.ToLower().EndsWith(".dll"))
            {
                if (executablePath.ToLower().EndsWith("openwith.exe"))
                {
                    return null; // 'OpenWith.exe' is th windows 8 or higher default for unknown extensions. I don't want to have it as associted file
                }
                return executablePath;
            }
            return executablePath;
        }

        [DllImport("Shlwapi.dll", SetLastError = true, CharSet = CharSet.Auto)]
        static extern uint AssocQueryString(AssocF flags, AssocStr str, string pszAssoc, string pszExtra, [Out] StringBuilder pszOut, [In][Out] ref uint pcchOut);

        private static string FileExtentionInfo(AssocStr assocStr, string doctype, string verb)
        {
            uint pcchOut = 0;
            AssocQueryString(AssocF.Verify, assocStr, doctype, verb, null, ref pcchOut);

            Debug.Assert(pcchOut != 0);
            if (pcchOut == 0)
            {
                return "";
            }

            StringBuilder pszOut = new StringBuilder((int)pcchOut);
            AssocQueryString(AssocF.Verify, assocStr, doctype, verb, pszOut, ref pcchOut);
            return pszOut.ToString();
        }

        [Flags]
        public enum AssocF
        {
            Init_NoRemapCLSID = 0x1,
            Init_ByExeName = 0x2,
            Open_ByExeName = 0x2,
            Init_DefaultToStar = 0x4,
            Init_DefaultToFolder = 0x8,
            NoUserSettings = 0x10,
            NoTruncate = 0x20,
            Verify = 0x40,
            RemapRunDll = 0x80,
            NoFixUps = 0x100,
            IgnoreBaseClass = 0x200
        }

        public enum AssocStr
        {
            Command = 1,
            Executable,
            FriendlyDocName,
            FriendlyAppName,
            NoOpen,
            ShellNewValue,
            DDECommand,
            DDEIfExec,
            DDEApplication,
            DDETopic
        }

    }
} 
```

# java - 从一台服务器到另一台服务器的 POST 请求

> ID：11981340
> 
> 赞同：0
> 
> 时间：2012-08-16T05:47:16.977
> 
> 标签：java, playframework, playframework-2.0

场景如下。我在我的服务器上收到一个请求，对其进行一些处理，然后我需要根据我的处理将请求放在另一台服务器上，然后根据我从远程服务器获得的内容构建响应。它要在 JAVA Playframework 2.0 中完成，我缺少发送请求和从远程服务器获取响应的部分内容。任何帮助，将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:03:26.913

要从 Play 服务器调用请求，您应该使用[WS API](http://www.playframework.org/documentation/api/2.0.2/java/play/libs/WS.html)。它易于使用，您还可以以异步方式进行远程调用：

```
public static Result feedTitle(String feedUrl) {
    return async(
      WS.url(feedUrl).get().map(
        new Function<WS.Response, Result>() {
          public Result apply(WS.Response response) {
            return ok("Feed title:" + response.asJson().findPath("title"));
          }
        }
      )
    );
} 
```

[Play 文档](http://www.playframework.org/documentation/2.0.2/JavaWS)中的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T06:06:11.660

**准备中**

我们首先需要至少知道 URL 和`charset`. 这些参数是可选的，取决于功能要求。

```
String url = "http://example.com";
String charset = "UTF-8";
String param1 = "value1";
 String param2 = "value2";
// ...
 String query = String.format("param1=%s&param2=%s", 
 URLEncoder.encode(param1, charset), 
 URLEncoder.encode(param2, charset)); 
```

查询参数必须采用 name=value 格式并由 & 连接。您通常还会使用指定的`charset`using对查询参数进行 URL 编码`URLEncoder#encode()`。

String#format() 只是为了方便。当我需要字符串连接运算符 + 两次以上时，我更喜欢它。

**使用（可选）查询参数触发 HTTP GET 请求：**

这是一项微不足道的任务。这是默认的请求方法。

```
 URLConnection connection = new URL(url + "?" + query).openConnection();
 connection.setRequestProperty("Accept-Charset", charset);
 InputStream response = connection.getInputStream();
 // ... 
```

任何查询字符串都应使用 ? 连接到 URL。标`Accept-Charset`头可能会提示服务器参数的编码方式。如果您不发送任何查询字符串，那么您可以将`Accept-Charset`标头放在一边。如果您不需要设置任何标题，那么您甚至可以使用`URL#openStream()`快捷方式。

```
 InputStream response = new URL(url).openStream();
  // ... 
```

无论哪种方式，如果对方是 a `HttpServlet`，则将调用其`doGet()`方法并且参数将由`HttpServletRequest#getParameter()`. 使用查询参数触发 HTTP POST 请求：

**使用查询参数触发 HTTP POST 请求：**

将 设置`URLConnection#setDoOutput()`为 true 会隐式地将请求方法设置为 POST。作为 web froms 的标准 HTTP POST 是`application/x-www-form-urlencoded`其中查询字符串写入请求正文的类型。

```
 URLConnection connection = new URL(url).openConnection();
 connection.setDoOutput(true); // Triggers POST.
 connection.setRequestProperty("Accept-Charset", charset);
 connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=" +    charset);
 OutputStream output = null;
 try {
    output = connection.getOutputStream();
    output.write(query.getBytes(charset));
  } finally {
   if (output != null) try { output.close(); } catch (IOException logOrIgnore) {}
  }
  InputStream response = connection.getInputStream();
  // ... 
```

注意：每当您想以编程方式提交 HTML 表单时，不要忘记将任何元素的 name=value 对放入查询字符串，当然还有您想要的元素的 name=value 对以编程方式“按下”（因为通常在服务器端使用它来区分是否按下了按钮，如果按下了，则按下哪个按钮）。

您也可以将获得`URLConnection`的转换为`HttpURLConnection`并使用它`HttpURLConnection#setRequestMethod()`。但是，如果您尝试使用连接进行输出，您仍然需要设置`URLConnection` `#setDoOutput()`为 true。

```
 HttpURLConnection httpConnection = (HttpURLConnection) new URL(url).openConnection();
  httpConnection.setRequestMethod("POST");
  // ... 
```

无论哪种方式，如果对方是 a `HttpServlet`，则将调用其`doPost()`方法并且参数将由`HttpServletRequest#getParameter()`.

顺便说一句，它几乎是来自以下问题的复制粘贴

[使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

# android - Android Resources$NotFoundException 和 InflateException：二进制 XML 文件第 238 行：

> ID：11981343
> 
> 赞同：0
> 
> 时间：2012-08-16T05:47:50.100
> 
> 标签：android, android-resources

我收到以下异常

`java.lang.RuntimeException: Unable to start activity ComponentInfo{mypackage/mypackage.MyActivity}: android.view.InflateException: Binary XML file line #238: Error inflating class <unknown>`

我的活动 setContentView

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.myxmlfile); // >>>>>>>> This is line 238 
```

myxmlfile.xml

```
 <ImageView
            android:id="@+id/myanimation"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:layout_centerInParent="true"
            android:background="@drawable/myanimationfile"
            android:visibility="visible" /> 
```

`Caused by: android.content.res.Resources$NotFoundException: File res/drawable/myanimationfile.xml from drawable resource ID #0x7f020027`

这个文件确实存在于路径 res/drawable/

在此之后我得到

`Caused by: android.content.res.Resources$NotFoundException: File res/drawable/animation00013.png from drawable resource ID #0x7f02000a`

同样，动画00013.png 确实存在于路径中

**我已经使用 unzip 提取了 apk 并检查了这些文件。它们存在。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:58:28.247

您是否尝试过清理项目？有时 adt 插件不会使用新的 id 更新 R 中的资源以适当地考虑文件更改。我以前遇到过这个问题。

# android - 从 Android 应用程序向 SugarCRM 模块插入数据

> ID：11981344
> 
> 赞同：0
> 
> 时间：2012-08-16T05:47:52.640
> 
> 标签：android, soap, ksoap2, sugarcrm

我想从android应用程序中插入一些数据并插入到sugarcrm模块中。有人可以给我一些提示吗？如何在这里制作肥皂客户端？什么是正确的语法？我将非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:02:42.520

有很多关于如何在 android 上实现 Web 服务以及如何连接到 Sugar 的资源。所以基本上：

*   创建一个可以连接到 SOAP Web 服务的 Android 应用程序 -[示例](http://www.android10.org/index.php/articleslibraries/167-using-ksoap2-for-android-soap-web-service)
*   查看 SugarCRM[文档](http://support.sugarcrm.com/02_Documentation/04_Sugar_Developer/Sugar_Developer_Guide_6.5/02_Application_Framework#Web_Services)以了解可用的 Web 服务方法

您还可以查看一个名为“ [Sugadroid](http://code.google.com/p/sugadroid/) ”的谷歌代码项目。

# javascript - Twitter Bootstrap 的 Tab 插件中的“data-api”是什么意思

> ID：11981346
> 
> 赞同：11
> 
> 时间：2012-08-16T05:47:57.263
> 
> 标签：javascript, jquery, twitter-bootstrap

有一段代码为

```
/* TAB DATA-API
 * ============ */

 $(function () {
   $('body').on('click.tab.data-api', '[data-toggle="tab"], [data-toggle="pill"]', function (e) {
     e.preventDefault()
     $(this).tab('show')
   })
 }) 
```

在文件[Bootstrap--tab](http://twitter.github.com/bootstrap/assets/js/bootstrap-tab.js) 我不明白`'click.tab.data-api'`and`'[data-toggle="tab"], [data-toggle="pill"]'`

谁能给我解释一下？谢谢~~

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T05:51:41.440

这`click.tab.data-api`是一个带有命名空间“tab.data-api”的点击事件。您可以在[此处](http://api.jquery.com/on/)查看文档（事件和命名空间部分）。

如果我没记错的话，data-* 是 Html5 标准中的一个新的自定义数据属性，当您想要定义自己的属性或数据时，它会派上用场。查看[John 的](http://ejohn.org/blog/html-5-data-attributes/)解释数据属性的帖子。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-28T12:25:00.330

Bootstrap 开发人员标记他们的点击事件以避免触及您的点击事件。

它实际上是一个普通的*单击事件处理程序，但添加了一个对**unbinding*很有用的 jQuery 命名空间。

`$('body').on('click', handler1)`与`$('body').on('click.something', handler2)` 两者将绑定和处理单击事件相同。您通常在事件上绑定一个处理程序，但有时您需要同时做出更多反应。

稍后，如果您想解除绑定，可以使用`$('body').off('click')`删除两个处理程序，或`$('body').off('.something')`仅删除第二个处理程序。

[http://api.jquery.com/on/#event-names](http://api.jquery.com/on/#event-names)

# asp.net-mvc-3 - 如何创建可重用的远程验证代码

> ID：11981348
> 
> 赞同：0
> 
> 时间：2012-08-16T05:48:00.650
> 
> 标签：asp.net-mvc-3, remote-validation

我需要对 50 个属性创建相同的远程验证。

我已经添加了这个远程验证

```
[DropDownSelected("PCP")]
public Guid ProIdentifier { get; set; } 
```

我需要将此代码用于 50 个不同的属性，但名称不同。

# php - While循环php数组

> ID：11981351
> 
> 赞同：-1
> 
> 时间：2012-08-16T05:48:16.877
> 
> 标签：php, mysql, arrays, while-loop

我有三个 php 数组，我正在填充从 msql 查询返回的信息。前两个数组完全填满了所需的信息，但最后一个数组没有填满。唯一输入的是“v”。如果我不把它做成一个数组而只是一个值，它就可以完美地工作，但是当我把它做成一个数组时，它就会停止工作。如果您有任何想法，谢谢。

```
$query = mysql_query("SELECT * FROM chanels WHERE cname = '$cname' ");
$numrows = mysql_num_rows($query);

while($row = mysql_fetch_array($query))
{
    $videolocation[$counter2] = $row['videolocation'];
    $title[$counter2] = $row['title'];
    $imagelocation[$counter2] =  $row['videoimagelocation'];
    $counter2++;

} 
```

ImageLocation 数组是不起作用的，而另外两个则完全填满。我检查了拼写，一切都输入得很完美。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T05:55:53.293

而不是`fetch_array`使用[mysql_fetch_assoc](http://php.net/manual/en/function.mysql-fetch-assoc.php)作为您的方法，以便您带回带有数组中键的行，命名为结果中的列 - 如下所示：

```
while ($row = mysql_fetch_assoc($result)) {
    echo $row["videolocation"];
    echo $row["title"];
    echo $row["videoimagelocation"];
} 
```

此外，您可能应该摆脱旧`mysql_*`功能并修补新的闪亮[PDO](http://au2.php.net/manual/en/book.pdo.php)功能。这些将使您以更安全的方式进行连接，并提供更大的灵活性。

编辑：当您带回一个 assoc 数组时，它仍然是数据库的单行。但是，您当前的代码返回如下内容：

```
$row[0]='someLoc' // Data from videoLocation
$row[1]='someTitle' // Data from title column
$row[2]='someImageLoc' // Data from videoImageLocation 
```

Assoc Array 将像这样工作：

```
$row['videolocation']='someLoc' 
$row['title']='someTitle' 
$row['videoimagelocation]='someImageLoc' 
```

编辑 2：似乎我在数组 vs assoc 问题上追赶了一些红鲱鱼。我可以检查的第一件事是拼写，但你已经做到了，接下来是检查列名的*大小写。*在 Windows 上，大小写默认不重要，但在 Linux 机器上*是*.

我发现最简单的方法是这样做：

```
mysql_query("SELECT videolocation, title, videoimagelocation FROM chanels WHERE cname = '$cname' "); 
```

如果一列是错误的情况，这应该会为您返回一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:04:29.683

不是答案，而是更好地利用数组的建议。使用一个来存储所有数据：

```
while($row = mysql_fetch_array($query))
{
    $details[$counter2] = array('videoLocation' => $row['videolocation'],
                                'title' =>   $row['title'],
                                'imageLocation' => $row['videoimagelocation']
                                );
    $counter++;
} 
```

这样，第一个索引将存储第一行详细信息，第二个索引将存储第二行详细信息，依此类推。

# c# - 使用 Web 服务更新销售发票编号

> ID：11981358
> 
> 赞同：0
> 
> 时间：2012-08-16T05:49:05.530
> 
> 标签：c#, .net, web-services, microsoft-dynamics, dynamics-nav

我正在尝试使用销售发票实体上的 Dynamics NAV Web 服务来创建从另一个系统生成的 NAV 发票。

我遇到的问题是，当我尝试创建发票编号与编号序列中的下一个编号不同的发票时，出现以下错误：

> 销售表头已存在。标识字段和值：文档类型='发票'

如果我按照此博客文章中的步骤进行操作

[http://blogs.msdn.com/b/freddyk/archive/2009/05/28/handling-sales-orders-from-page-based-web-services-in-nav-2009sp1-and-rtm.aspx](http://blogs.msdn.com/b/freddyk/archive/2009/05/28/handling-sales-orders-from-page-based-web-services-in-nav-2009sp1-and-rtm.aspx)

我可以创建发票，然后更新发票编号以外的其余字段。

有没有办法使用 Web 服务创建具有自定义发票编号的发票？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:18:59.580

因此，显然您首先必须创建一个没有详细信息的空发票，然后更新它以添加您需要的任何字段。

请参阅：http: [//community.dynamics.com/product/nav/f/34/t/41703.aspx](http://community.dynamics.com/product/nav/f/34/t/41703.aspx)

# java - 字符串变量中的逗号分隔符

> ID：11981361
> 
> 赞同：0
> 
> 时间：2012-08-16T05:49:23.903
> 
> 标签：java, struts2, csv

> **可能重复：**
> [如何将字符串数字格式化为逗号和四舍五入？](https://stackoverflow.com/questions/3672731/how-can-i-format-a-string-number-to-have-commas-and-round)

我有一个字符串变量（这是一个字符串格式的数字），现在我想用逗号分隔每三个数字。我该怎么做？我的技术是Struts2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:58:32.610

使用[`NumberFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html)：

```
long num = Long.valueOf("1234567890");
String numWithCommas = java.text.NumberFormat.getInstance().format(num); 
```

***编辑：***

上面的代码片段将默认使用用户的当前语言环境（我猜这可能是你想要的——你希望数字以用户习惯的方式格式化）。如果要设置特定的语言环境，可以传递[`Locale`](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html)to的实例`getInstance()`。`Locale`为方便起见，该类中提供了一堆静态实例：

```
// Always prints with comma as separator
java.text.NumberFormat.getInstance(Locale.ENGLISH).format(num);
// => 1,234,567,890

// Always prints with period as separator
java.text.NumberFormat.getInstance(Locale.GERMAN).format(num);
// => 1.234.567.890 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:01:21.963

例如：将 100,000 转为 100,000

```
public class number
{
    public static void main(String args [])
    {
        double d = 123456.78;
        DecimalFormat df = new DecimalFormat("###,### ");
        System.out.
        println(df.format(d));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T06:26:01.120

使用`StringBuilder`它的`insert()`方法可以实现这一点。

```
StringBuilder sb = new StringBuilder("123456987098");
int j = sb.length();

for(int i=3 ; i<j ; i=i+4){

       sb.insert(i,",");

       }

System.out.println(sb.toString()); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T06:00:51.890

```
 String string = "1,234,567";
    String[] splits = string.trim().split(",");
    int num = 0;
    for (String split : splits)
    {
        num = (num * 1000) + Integer.parseInt(split.trim());
    }
    System.out.println(num); // prints 1234567 
```

# java - 如何检查空指针异常

> ID：11981365
> 
> 赞同：1
> 
> 时间：2012-08-16T05:50:01.193
> 
> 标签：java, nullpointerexception, hashmap

这是代码

```
private static HashMap naturalNumbers = new HashMap();

static
{
    naturalNumbers.put("zero", new Integer( 0 ) );
    naturalNumbers.put("one", new Integer( 1 ) );
    naturalNumbers.put("two", new Integer( 2 ) );
    naturalNumbers.put("three", new Integer( 3 ) );
}

private static int findANumber( String partOfaNumber ) throws Exception
{
int multiplicand = 0;  
multiplicand += (Integer)naturalNumbers.get( partOfaNumber ); 
```

如果“get”返回 null，我该如何检查？

我试过了：

```
if ( (Integer)naturalNumbers == null )
    {
        throw new Exception( "Number not found" );
    }
 return multiplicand;
} 
```

但 IDE 甚至不接受它：无法从 HashMap 转换为 Integer。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T05:57:37.757

这是一个略有不同的版本：

```
private static final HashMap<String, Integer> NUMS = new HashMap<String, Integer>();

static
{
    NUMS.put("zero", 0);
    NUMS.put("one", 1);
    NUMS.put("two", 2);
    NUMS.put("three", 3);
}

private static int findANumber(final String partOfaNumber) throws IllegalArgumentException
{
    int multiplicand = 0;  
    final Integer theNum = NUM.get(partOfaNumber);
    if (theNum != null) {
        multiplicand += theNum;
    } else {
        throw new IllegalArgumentException("Number not found (" + partOfNumber + ")");
    }

    return multiplicand;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T05:56:35.967

这很简单。

```
Integer number = naturalNumbers.get( partOfaNumber )
if(number ==null) {
    throw new Exception("Number not found");
} else {
    multiplicand += number;
}
return multiplicand; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T05:55:49.080

您可以按如下方式使用速记 -

> multiplicand += naturalNumbers.get(partOfaNumber) == null ？0 : (整数) naturalNumbers.get(partOfaNumber );

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T05:57:46.787

```
private static int findANumber( String partOfaNumber ) throws Exception
{
  int multiplicand = 0;  
  if (naturalNumbers.containsKey( partOfaNumber ); {
    multiplicand += (Integer)naturalNumbers.get( partOfaNumber );
  } else {
    throw new Exception("Number not found");
  }
  return multiplicand;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T06:26:38.240

只需检查密钥是否存在于 Hashmap 中。您不必担心空指针异常。

```
if(naturalNumbers.containsKey( partOfaNumber )){
  //Do your stuff
}else{
  //Do some stuff what you will when exception throw.
} 
```

您还可以使用按值搜索

```
naturalNumbers.containsValue( value) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T06:11:27.170

由于 java 上的自动装箱机制，您将始终必须从原始类型的集合中添加空值检查

可以生成一个简单的空指针，如下所示

```
Integer i = null;
i=i+10; 
```

因此，请始终为 null 添加默认检查，在您的情况下，您可以像下面这样添加它

```
Integer multiplicand = 0;
Integer value = get(key);

if(value!= null)
{
//add value to multiplicand
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-16T06:12:58.230

首先，最好使用特定的HashMap

```
private static HashMap<String, Integer> naturalNumbers = new HashMap<String, Integer>(); 
```

这将摆脱讨厌的铸造。

至于您的问题，您尝试将哈希映射转换为整数，这不是您想要的。您想检查是否存在特定值。更好的方法是提取值并检查 null：

```
int multiplicand = 0;
Integer part = naturalNumbers.get(partOfNumber)

if(part == null) {
   // Handle the null case
}

multiplicand += part; 
```

现在，问题是，在值不存在的情况下你会怎么做。如果将不存在的值定义为零，则可以执行以下操作

```
multiplicand += (naturalNumbers.contains(partOfNumber)?naturalNumbers.get(partOfNumber):0; 
```

这使它更简洁。但是，如果值不包含在 HashMap 中，这取决于您要执行的操作。

# android - 如何更改选定的列表项背景，android

> ID：11981366
> 
> 赞同：2
> 
> 时间：2012-08-16T05:50:06.747
> 
> 标签：android, listview, android-listview

我有两个，当`ListView`我`Activity`从第一个`List`数据中选择一个时，将反映到另一个列表中。我已经完成了这部分，它对我来说工作正常。但是我正在努力首先更改所选项目的背景，`List`我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T05:59:10.990

您可以通过以下方式执行此操作 -

将 设置`android:listSelector="@drawable/selection"`为 ListView 的 xml 属性。并且，在您的`selection.xml`包含选择器中，当您从列表视图中选择任何项目时，该选择器将保存更改。

**选择.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" 
        android:state_pressed="false"
        android:drawable="@color/android_green" />
    <item android:state_focused="true" 
        android:state_pressed="true"
        android:drawable="@color/black_alpha" />
    <item android:state_focused="false" 
        android:state_pressed="true"
        android:drawable="@color/black_alpha" />
    <item android:drawable="@color/white_alpha" />
</selector> 
```

看看[这个](http://android-journey.blogspot.in/2009/12/android-selectors.html)也。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-21T05:44:24.523

只需在列表项视图的主布局中设置

```
style="?attr/SelectableItemBackground" 
```

# python - __init__ 方法在 python 中返回什么

> ID：11981368
> 
> 赞同：18
> 
> 时间：2012-08-16T05:50:12.610
> 
> 标签：python

```
class Num:
   def __init__(self,num):
      self.n = num 
```

我读到该`__init__`方法返回`None`。当我执行`a=Num(5)`时，`Num(5)`将调用`__init__`该类的方法。但是如果`__init__` 返回`None`则不`a`应该引用任何内容。而是`a`引用Class的对象。`Num`它是如何发生的？那么`__init__`返回`None`或类的对象呢？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-16T05:51:26.867

`__init__()`返回`None`。它是[`__new__()`](http://docs.python.org/reference/datamodel.html#object.__new__)返回新实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T06:02:39.177

当执行 a=Num(5) 时，您确实创建了对象并返回新创建的对象。但这并不像您`__init__`在创建对象时直接调用那么容易。 `__init__`在后台被一些 Python 魔术调用作为启动过程的一部分。基本上，这`__new__`是魔法的一部分。但是，只有极少数情况下，您想要摆弄`__new__`. 只有在您真的知道自己在做什么并且确实没有更简单的方法可以实现您的目标时，您才应该这样做。

# java - 您能否在不迭代的情况下有效地从地图中删除任何 k 个元素？

> ID：11981370
> 
> 赞同：0
> 
> 时间：2012-08-16T05:50:22.563
> 
> 标签：java, map, performance

我有一张我已经填充的地图（比如说它是一个 HashMap）。我希望它缩小到大小...我不在乎我删除了哪些元素，我只想删除 k 个元素。

最有效的方法是什么（迭代除外）？

**编辑：** k 事先不知道。基于其他类型地图的建议是相关的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:01:47.917

如果它是 HashMap，我认为没有比迭代更好的选择，但如果你可以使用 TreeMap，请使用它......

`map.headMap(key).clear();`

**例如：**

```
 public class Test     
    {     
        public static void main( String[] args )     
        {     
            SortedMap<Integer,String> map = new TreeMap<Integer,String>();     
            map.put( 1, "HI" );     
            map.put( 2, "BYE" );     
            map.put( 4, "GUY" );     
            map.put( 7, "SKY" );     
            map.put( 9, "HELLO" );     

            System.out.println(map.keySet());  

            map.headMap(5).clear(); // 5 is exclusive  

            System.out.println(map.keySet());  
        }     
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T06:07:22.120

为什么不迭代？您可以从可能非常有效*的迭代器中删除 - 不需要额外的查找：*

```
Iterator<Map.Enty<Foo, Bar>> it = map.entrySet().iterator();
for (int i = 0; i < k && it.hasNext; i++)
{
    it.next();
    it.remove();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T06:06:43.347

迭代是唯一的方法。

```
// this is the number of items you want to remove
final int NUMBER_TO_REMOVE = 2;

// this is your map
Map<String, String> map = new HashMap<String, String>();
map.put("a", "1");
map.put("b", "2");
map.put("c", "3");
map.put("d", "4");
map.put("e", "5");
map.put("f", "6");
map.put("g", "7");
map.put("h", "8");
map.put("i", "9");

// get the keys
String[] keys = map.keySet().toArray(new String[map.size()]);

// remove the correct number from the map
for(int i = 0; i < NUMBER_TO_REMOVE; i++) {
    map.remove(keys[i]);
}

// your map is now NUMBER_TO_REMOVE elements smaller 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T06:09:27.250

通用哈希图只有有限数量的接口函数。如果 K 很小，我看不出有什么比迭代更好的方法，一旦 K 键被删除就退出迭代。当然，如果 K 很大，做其他事情可能会更好，例如保留大小为 k 的元素并清除。如果您需要特定的特征，您自己的 hashmap 可以具有您需要的任何特征。

# java - 发送方/接收方之间的 JMS 消息流

> ID：11981371
> 
> 赞同：1
> 
> 时间：2012-08-16T05:50:24.277
> 
> 标签：java, jms, message-queue

如果我使用以下代码创建发送者和接收者

```
qsender = qsession.createSender((Queue)msg.getJMSDestination());
qreceiver=qsession.createReceiver((Queue)msg.getJMSDestination()); 
```

然后这样做

```
qsender.send(msg); 
```

它是否只是将消息发送到队列并且它会永远保留在队列中吗？是否需要调用接收方的receive() 方法或实现MessageListener 接口才能将其发送给接收方？

编辑：更多信息

```
qsender = qsession.createSender((Queue)msg.getJMSDestination());
qreceiver=qsession.createReceiver((Queue)msg.getJMSDestination());

temp1 = qsession.createTemporaryQueue();
responseConsumer = qsession.createConsumer(temp1);
msg.setJMSReplyTo(temp1);

responseConsumer.setMessageListener(responseListener);
msg.setJMSCorrelationID(msg.getJMSCorrelationID()+i);

qsender.send(msg); 
```

在上面的代码中，临时队列是做什么用的？是为了接收消息吗？是接收器吗？如果是，有什么用`msg.setJMSReplyTo(temp1)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:27:17.510

是的，send(..) 方法会将消息发送到目标队列。并且此消息将保留在队列中，直到您的程序使用接收器接收它或直到您的消息代理正在运行（据我所知）。

关于你的第二个问题，那么两种方法之间的区别在于下一个：

*receive* (..) 方法是同步的（这是这种方法的缺点）。这意味着接收者必须耐心等待消息到达，因为*receive* () 消息将阻塞，直到有消息可用（或直到发生超时条件）。从另一端使用侦听器消费消息是异步过程。您的接收器不会等待。只有在将消息放入查询时，侦听器才会调用您的接收方法。

**更新：**

临时目的地用于发送消费者对消息的回复。例如，您的服务器从客户端获取消息并且您需要向他发送响应的情况。在这种情况下，您应该使用临时目的地。服务器应用程序将使用此临时目标（在您的情况下为队列）向客户端发送响应消息。此类队列的范围仅限于创建它的连接，并在连接关闭后立即在服务器端删除。

您可以在[本文](http://onjava.com/onjava/2007/04/10/designing-messaging-applications-with-temporary-queues.html)和[officila java 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bncfu.html#bncgb)中找到更多详细信息。在第二篇文章中还介绍了如何以及何时使用 JMSCorrelationID。

这是官方文档中有趣的部分，描述了如何使用临时目的地发送响应消息：

> 您可以使用临时目的地来实现简单的请求/回复机制。如果您在发送消息时创建一个临时目标并将其指定为 JMSReplyTo 消息头字段的值，则消息的使用者可以使用 JMSReplyTo 字段的值作为它发送回复的目标。消费者还可以通过将回复消息的 JMSCorrelationID 头字段设置为请求的 JMSMessageID 头字段的值来引用原始请求。例如，一个 onMessage 方法可以创建一个会话，以便它可以向它接收到的消息发送回复。它可以使用如下代码：

```
producer = session.createProducer(msg.getJMSReplyTo());
replyMsg = session.createTextMessage("Consumer " +
    "processed message: " + msg.getText());
replyMsg.setJMSCorrelationID(msg.getJMSMessageID());
producer.send(replyMsg); 
```

**更新 2：**

我想澄清我对队列（或主题）中消息过期时间的回答。默认情况下，消息永远不会过期。但是您可以设置消息的过期时间：

```
producer.setTimeToLive(60000); 
```

在此之后，此 MessageProducer 生成的所有消息都将具有指定的到期时间。

您还可以在发送期间指定具体消息的到期时间：

```
producer.send(message, DeliveryMode.NON_PERSISTENT, 3, 10000); 
```

其中 10000 表示 10 秒

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T06:52:29.240

1.  是的，它将始终保留在队列中，直到它被消耗或手动或强制从队列中删除。这就是 JMS 的持久性属性，这就是它优于 RPC 的原因。

2.  关于receive方法，它是一个同步方法，会阻塞线程，直到收到要消费的消息。

3.  关于消息监听器的实现，它遵循基于拉的模型。消息代理会在一段时间后继续查询 JMS 服务器，以查看是否有要消费的消息。

4.  从选项 3 和选项 4 中选择取决于要求，阻塞线程有其自身的缺点，不会让任何事情进一步发展，而轮询也有其自身的缺点，特别是如果 Jms 服务器作为远程机器上的独立服务器运行时，并且代理必须在一段时间后使用 RMI 来查询消息。

**更新 ::**如果您查看企业集成请求/回复模式[EIP](http://www.eaipatterns.com/RequestReplyJmsExample.html)，他们已经解释说，因为消息传递使用异步过程，因此没有来自另一端的确认。如果您想向发件人发送关于消息的确认，您可以使用`msg.setJMSReplyTo`它使用确认消息 Correlation id 与发件人消息 id 匹配以同步请求响应。

来到临时队列，它提供了在运行时创建队列、绑定到给定连接的好处，而不是在部署时静态定义队列，优点是它提供了轻量级的替代方案，并有助于将系统扩展到很大程度。

# wolfram-mathematica - 当函数极其复杂时，如何更快地绘制曲面？

> ID：11981375
> 
> 赞同：0
> 
> 时间：2012-08-16T05:50:49.630
> 
> 标签：wolfram-mathematica

我正在尝试在以下代码中绘制函数图`hh`（请跳到代码的最后一行）。我已经设置了`PlotPoints->2`and `MaxRecursion->0`，但代码仍在运行，已经运行了大约 8 个小时。该函数`hh`极其复杂，涉及大量迭代。有什么方法可以让代码运行得更快吗？

```
s0[a_, b_, u_, c_, d_, v_, p_, q_, z_, s_, t_, w_, x_] :=
 {a, b, u, c, d, v, p, q, z, s, t, w, 1, 0, (a + b) x + u}

s1[a_, b_, u_, c_, d_, v_, p_, q_, z_, s_, t_, w_, n_, x_] :=
 Which[0 <= x <= c, {a, b, u, c, d, v, p, q, z, s, t, w, 2, n - 1, x/c*q + p},
  c <= x <= c + d, {a, b, u, c, d, v, p, q, z, s, t, w, 2, n, (x - c)/d*p},
   c + d <= x <= 1, {a, b, u, c, d, v, p, q, z, s, t, w, 1, n + 1, (x - (c + d))/v*u}]

s2[a_, b_, u_, c_, d_, v_, p_, q_, z_, s_, t_, w_, n_, x_] :=
 Which[0 <= x <= w, {a, b, u, c, d, v, p, q, z, s, t, w, 2, n - 1, x/w*z + p + q},
  w <= x <= 1 - s, {a, b, u, c, d, v, p, q, z, s, t, w, 3, n - 1, (x - w)/t*v + c + d},
   1 - s <= x <= 1, {a, b, u, c, d, v, p, q, z, s, t, w, 3, n, (x - (1 - s))/s*d + c}]

s3[a_, b_, u_, c_, d_, v_, p_, q_, z_, s_, t_, w_, n_, x_] :=
 Which[0 <= x <= u, {a, b, u, c, d, v, p, q, z, s, t, w, 4, n - 1, x/u*t + w},
  u <= x <= 1 - a, {a, b, u, c, d, v, p, q, z, s, t, w, 4, n, (x - u)/b*w},
   1 - a <= x <= 1, {a, b, u, c, d, v, p, q, z, s, t, w, 3,n + 1, (x - (1 - a))/a*c}]

s4[a_, b_, u_, c_, d_, v_, p_, q_, z_, s_, t_, w_, n_, x_] :=
 Which[0 <= x <= p, {a, b, u, c, d, v, p, q, z, s, t, w, 4, n - 1, x/p*s + 1 - s},
  p <= x <= p + q, {a, b, u, c, d, v, p, q, z, s, t, w, 5, n - 1, (x - p)/q*a/(a+ b)+ b/(a + b)},
   p + q <= x <= 1, {a, b, u, c, d, v, p, q, z, s, t, w, 5, n, (x - (p + q))/z*b/(a + b)}]

f[{a_, b_, u_, c_, d_, v_, p_, q_, z_, s_, t_, w_, k_, n_, x_}] :=
 Which[k == 0, s0[a, b, u, c, d, v, p, q, z, s, t, w, x],
  k == 1, s1[a, b, u, c, d, v, p, q, z, s, t, w, n, x],
   k == 2, s2[a, b, u, c, d, v, p, q, z, s, t, w, n, x],
    k == 3, s3[a, b, u, c, d, v, p, q, z, s, t, w, n, x],
     k == 4, s4[a, b, u, c, d, v, p, q, z, s, t, w, n, x]]

g[a_, b_, u_, c_, d_, v_, p_, q_, z_, s_, t_, w_, x_] := 
 NestWhile[f, {a, b, u, c, d, v, p, q, z, s, t, w, 0, 0, x}, Function[e, Extract[e, {13}] != 5]]

h[a_, b_, u_, c_, d_, v_, p_, q_, z_, s_, t_, w_, x_] := 
 Extract[g[a, b, u, c, d, v, p, q, z, s, t, w, x], {15}] + 
  Extract[g[a, b, u, c, d, v, p, q, z, s, t, w, x], {14}]

ff[{a_, b_, u_, c_, d_, v_, p_, q_, z_, s_, t_, w_, x_}] := {a, b, u, c, d, v, p, q, z, s, t, w, h[a, b, u, c, d, v, p, q, z, s, t, w, x - Floor[x]] + Floor[x]}

gg[a_, b_, u_, c_, d_, v_, p_, q_, z_, s_, t_, w_] := 
 N[Extract[Nest[ff, N[{a, b, u, c, d, v, p, q, z, s, t, w, 0}], 10^3], {13}]/10^3]

hh[x_, y_] := 
 gg[x, y, 1 - x - y, x, y, 1 - x - y, x, y, 1 - x - y, x, y, 1 - x - y]

Plot3D[hh[x, y], {x, 0, 1}, {y, 0, 1}, RegionFunction -> Function[{x, y, z}, x + y <= 1], PlotPoints -> 2,  MaxRecursion -> 0] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:35:52.000

我认为您的功能存在一些问题。但是这里有一些想法；我修改了几个功能：

```
s0[a_, b_, u_, c_, d_, v_, p_, q_, z_, s_, t_, w_, n_, x_] = 
 {a, b, u, c, d, v, p, q, z, s, t, w, 1, 0, (a + b) x + u}    

(* so it matches the others *)

f[{a_, b_, u_, c_, d_, v_, p_, q_, z_, s_, t_, w_, k_, n_, x_}] := 
 {s0[a, b, u, c, d, v, p, q, z, s, t, w, n, x],                         
  s1[a, b, u, c, d, v, p, q, z, s, t, w, n, x],
  s2[a, b, u, c, d, v, p, q, z, s, t, w, n, x],
  s3[a, b, u, c, d, v, p, q, z, s, t, w, n, x],
  s4[a, b, u, c, d, v, p, q, z, s, t, w, n, x]}[[k + 1]]

 g[a_, b_, u_, c_, d_, v_, p_, q_, z_, s_, t_, w_, x_] := 
  NestWhile[f, {a, b, u, c, d, v, p, q, z, s, t, w, 0, 0, x}, #[[13]] != 5 &]

 h[a_, b_, u_, c_, d_, v_, p_, q_, z_, s_, t_, w_, x_] := 
   Total[g[a, b, u, c, d, v, p, q, z, s, t, w, x][[{14, 15}]]]

(* in order to avoid calculating the same quantity twice *)

gg[a_, b_, u_, c_, d_, v_, p_, q_, z_, s_, t_, w_] := 
  Nest[ff, {a, b, u, c, d, v, p, q, z, s, t, w, 0}, 10^3][[13]]/10^3

{elapsed, data} = Outer[If[#1 + #2 <= 1, {#1, #2, hh[#1, #2]}, {#1, #2, "bad"}] &, 
  Range[0.1, 1, 0.25], Range[0.1, 1, 0.25]] // AbsoluteTiming

(* {6.820061, {{{0.1, 0.1, -1.99961}, {0.1, 0.35, -1.99961}, {0.1, 0.6, -2.00009}, 
   {0.1, 0.85, -2.00001}}, {{0.35, 0.1, -1.99993}, {0.35, 0.35, -2.00004}, 
   {0.35, 0.6, -2.00017}, {0.35, 0.85, "bad"}}, {{0.6, 0.1, -1.99996}, 
   {0.6,0.35, -2.00024}, {0.6, 0.6, "bad"}, {0.6, 0.85, "bad"}}, 
   {{0.85, 0.1, -1.99967}, {0.85, 0.35, "bad"}, {0.85, 0.6, "bad"}, {0.85, 0.85, "bad"}}}} *)

ListPlot3D[Select[Flatten[data, 1], NumericQ[#[[3]]] &]] 
```

![例子](../Images/a5b7a3aa06e2ac9e0710084364ff997c.png)

# php - 在 PHP 中有效匹配数组的空元素

> ID：11981385
> 
> 赞同：1
> 
> 时间：2012-08-16T05:52:00.787
> 
> 标签：php, arrays, element

我有两个数组，$A 和 $B。两个数组具有相同的长度，但数组 $A 将始终具有与 $B 相同数量的非空元素，或者它将具有比 $B 更少的非空元素。

因此，如果，

```
$B = array("john","adams","sandwich"); 
```

那么 $A 可能是，

```
$A = array("bacon","ham","juice"); 
```

或者它可能是，

```
$A = array("bacon","",""); 
```

我正在尝试将 $B 的空元素与 $A 匹配。所以我可以得到，

```
$B = array("john","",""); 
```

我目前正在通过以下代码进行操作：

```
$q = count($A) - 1;
$l = count($A) - count(array_filter($A));
$i = 1;
while($i <= $l){
    $B[$q] = "";
    $i++;
    $q--;
} 
```

但是这种方法非常慢，考虑到我要多次这样做，可能会导致问题。你们对如何更有效地做到这一点有什么建议吗？数组永远不会超过 20 个元素，但由于某种原因，这仍然很耗时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:41:43.160

试试这个..

```
$c=array_diff($a,$b);
foreach($c as $key=>$val){
if($val=="")
    $b[$key]="";
} 
```

希望它有效...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T06:23:11.590

以下代码适用于所有情况，无论空值是否位于数组中的任何位置：

```
$A = array('a', 'b', 'c');
$B = array('', 'ab', 'zx');
$B = array_filter($B, 'strlen');
$B = array_filter($A, 'customfun');
print_r($B);
exit;
function customfun($param) {
    global $A;
    global $B;
    $key = array_search($param, array_values($A));
    if(isset($B[$key])) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T06:34:38.363

另一种简单的方法是将空项目（重新）放置`$A`到`$B`.

```
$B = array_replace($B, preg_grep('/^$/D', $A)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T06:08:53.320

如果正确理解您的问题，那么您可能正在寻找这个：

```
$x = count(array_filter($A))
$B = array_merge(array_slice($B,0,$x), array_fill(0,count($B)-$x,"")) 
```

或者做

```
foreach($B as $i => &$v)
    if($A[$i] == "")
        $v = "" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T06:34:41.950

```
<?php
//test.php
$b = array("john","adams","sandwich");
$a = array("bacon","","");

$length = count($a);

for($lcv = 0; $lcv < $length; ++$lcv)
{
    if($a[$lcv] == "")
    {
        $b[$lcv] = "";
    } 
}

?> 
```

像这样？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T06:48:08.147

```
function getArr($b,$a)
{
    if($a === '')
    {
        return '';
    }
    return $b;
}
$B = array("john","adams","sandwich");
$A = array("bacon","","");
print_r($A);
$B = array_map('getArr',$B,$A);
print_r($B); 
```

# search - 基于搜索词在字段中出现的位置的 Solr 相关性

> ID：11981386
> 
> 赞同：0
> 
> 时间：2012-08-16T05:52:06.417
> 
> 标签：search, solr

我正在开发 Solr 3.6。

对于以下关键字：

iPod

我以与列出的相同顺序得到以下结果。

适用于 Ipod 的罗技床边底座 Logitech S135i 便携式 Ipod Speaker Edifier Image iF330 Plus i-pod 扩展坞，带远程 JBL On Stage Micro II 便携式 iPod 扬声器和扩展坞 Apple iPod Nano 8GB Apple iPod Shuffle 2GB

我想指示 solr 列出搜索词在名称中较早出现的那些结果。所以最后两个应该是前两个。除此之外，做一些分析，其中搜索词的重要性是根据总长度计算的。因此，带有搜索词的较短名称应该提早出现。

我不知道如何做到这一点，请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:40:07.997

你至少可以通过两种方式做到这一点

1.  使用有效载荷：见[this](http://searchhub.org/dev/2009/08/05/getting-started-with-payloads/)或[this](http://edwarddrapkin.com/2011/04/14/an-introduction-to-lucene-payloads/)。但是您需要开发一些代码才能从 Solr 中使用它们（请参阅第一篇文章）
2.  使用几个额外的字段：比如说，你添加了 5 个额外的字段，你把第一个词放在第一个字段中，第二个放在第二个字段中等等。查询时你添加一个 OR，所以这些字段也被搜索，每个字段都有一个递减的提升。此解决方案不太理想，但您不必编写任何 java 代码。

# javascript - Inserting session values through Jquery/Javascript

> ID：11981396
> 
> 赞同：0
> 
> 时间：2012-08-16T05:53:43.357
> 
> 标签：javascript, jquery, .net, session, scripting

Is it possible to insert session values in session variable through JavaScript or Jquery?

I have did like `session["variable_name"] = "some value";` its not working

Even i tried like `<%session["variable_name"] %> = "some value"` this is not working either.

But it is possible to read from session.

It says .. there is no keyword named "Session" in Javascript.

Any work around ...

Right now i have done it through Cookies, but i need to do this through session.

Anyone experienced here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:02:53.980

If you want to change session variables "live" on a page you can use $.ajax to run a small script that sets session variables in your PHP script, e.g.:

```
var data = 'sessioninfoiwanttostore='+myJavascriptVar ;
$.ajax({
    url: 'set-session-script.php',
    type: 'POST',
    data: data
}) 
```

Then in your PHP script:

```
<?PHP
session_start() ;
$_SESSION['whatever'] = $_POST['sessioninfoiwanttostore'] ;
?> 
```

Note however this will not change any data on the page that has already been loaded based on your session vars.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:03:10.367

PHP session values are set on the server which means that the only way javascript can manipulate them is if you make a request to another page with ajax to set a value, for example: JS:

```
$('.updateSession').on('click', function(){
    $.post('updatesession.php', 'name=john', function(){
        alert('Session Updated!');
    })
}); 
```

PHP:

```
<?php
    session_start();
    if($_SERVER['REQUEST_METHOD'] === 'POST'){
        $_SESSION['name'] = $_POST['name'];
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T06:07:31.833

Typically a Session is stored on the server, so javascript and jquery which run in the browser cannot access the session. Reading from the session means the server renders the values into the html from where js can access it.

As cookies live in the browser also, js can access them directly.

As a workaround you can write some sort of ajax call that posts the key/value you want to insert into the session and on the server side a little helper which takes this value and puts it into the session.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T06:16:44.750

make a webmethod in C# that update the session value which will be access by

```
[webmethod]

    public static void sesstion_update(session_value)
    {
        httpcontext.current.session["name"] = session_value;
    } 
```

using `$.ajax` method of Jquery call this web method and pass your value which you want to store in session through data

# css - 切片模板和设计布局，中间主体内包装

> ID：11981398
> 
> 赞同：-1
> 
> 时间：2012-08-16T05:54:09.647
> 
> 标签：css, layout, xhtml, html

我有一个 pdf 模板，其布局如下面的示例 pdf 图像：

![在此处输入图像描述](../Images/37c26925dc25456d7d63d62cf9f9e261.png)

**PDF 说明** 模板的整体尺寸为宽 1600 x 高 1335 像素（在示例图像中显示为绿色背景） 在顶部它将有一个新闻/文本滚动，它将覆盖整个页面宽度，但它的正文部分会更少（它是白色、灰色和黑色的区域）。

**我想要的是？** 此布局可能适合最小 1024 x 786 像素，最大适合任何宽度。

我应该如何开发页面布局？

固定外绿盒宽度和内盒宽度？都是百分比？或任何一个固定的百分比？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:27:30.657

你想要的基本概念是一个宽度为 100% 的 body 元素和一个宽度为 1024 px 的容器。将 margin-left 和 margin-right 设置为 auto 将使它们在父正文中居中。这将符合您的基本要求。

```
body
{
    text-align: center;
    width: 100%;
}

#container
{
    margin-left: auto;
    margin-right: auto;
    width: 1024px;
    min-height: 768px;
    text-align: left;
} 
```

# c# - 获取树视图中选择的节点

> ID：11981402
> 
> 赞同：1
> 
> 时间：2012-08-16T05:54:16.167
> 
> 标签：c#, wpf, treeview

我在 WPF 中有一个自定义树视图类。我想在字符串列表中获取选定的节点文本。

**规则：**

*   如果选择了 parent 中的所有节点，则仅返回父节点文本。

*   如果父节点中的所有节点都没有被选中，则返回一个`parentName_childName`被选中节点的列表。

    以上两条规则适用于所有级别。对于具有 2 个层次结构的树视图，将名称返回为`parentName_child1Name_child1ChildName`.

节点模板c#代码：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
namespace TreeViewCheckBox
{
    public struct CheckBoxId
    {
        public static string IDCheckBox;
    }

    public class Node : INotifyPropertyChanged
    {
        private readonly ObservableCollection<Node> children = new ObservableCollection<Node>();    
        private readonly ObservableCollection<Node> parent = new ObservableCollection<Node>();
        private bool? isChecked = true;
        private bool isExpanded;
        private string text;

        public Node()
        {
            this.Id = Guid.NewGuid().ToString();
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public ObservableCollection<Node> Children
        {
            get { return this.children; }
        }
        public string Id { get; set; }
        public bool? IsChecked
        {
            get { return this.isChecked; }
            set
            {
                this.isChecked = value;
                this.RaisePropertyChanged("IsChecked");
            }
        }
        public bool IsExpanded
        {
            get { return this.isExpanded; }
            set
            {
                this.isExpanded = value;
                this.RaisePropertyChanged("IsExpanded");
            }
        }       
        public ObservableCollection<Node> Parent
        {
            get { return this.parent; }
        }
        public string Text
        {
            get { return this.text; }
            set
            {
                this.text = value;
                this.RaisePropertyChanged("Text");
            }
        }
        private void CheckedTreeChild(IEnumerable<Node> items, int countCheck)
        {
            bool isNull = false;
            foreach (Node paren in items)
            {
                foreach (Node child in paren.Children)
                {
                    if (child.IsChecked == true || child.IsChecked == null)
                    {
                        countCheck++;
                        if (child.IsChecked == null)
                        {
                            isNull = true;
                        }
                    }
                }
                if (countCheck != paren.Children.Count && countCheck != 0)
                {
                    paren.IsChecked = null;
                }
                else if (countCheck == 0)
                {
                    paren.IsChecked = false;
                }
                else if (countCheck == paren.Children.Count && isNull)
                {
                    paren.IsChecked = null;
                }
                else if (countCheck == paren.Children.Count && !isNull)
                {
                    paren.IsChecked = true;
                }

                if (paren.Parent.Count != 0)
                {
                    this.CheckedTreeChild(paren.Parent, 0);
                }
            }
        }
        private void CheckedTreeChildMiddle(
            IEnumerable<Node> itemsParent, IEnumerable<Node> itemsChild, bool? isCheckBoxChecked)
        {
            const int CountCheck = 0;
            this.CheckedTreeParent(itemsChild, isCheckBoxChecked);
            this.CheckedTreeChild(itemsParent, CountCheck);
        }
        private void CheckedTreeParent(IEnumerable<Node> items, bool? isCheckBoxChecked)
        {
            foreach (Node item in items)
            {
                item.IsChecked = isCheckBoxChecked;
                if (item.Children.Count != 0)
                {
                    this.CheckedTreeParent(item.Children, isCheckBoxChecked);
                }
            }
        }
        private void RaisePropertyChanged(string propertyName)
        {
            if (this.PropertyChanged != null)
            {
                this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }

            const int CountCheck = 0;
            if (propertyName == "IsChecked")
            {
                if (this.Id == CheckBoxId.IDCheckBox && this.Parent.Count == 0 && this.Children.Count != 0)
                {
                    this.CheckedTreeParent(this.Children, this.IsChecked);
                }

                if (this.Id == CheckBoxId.IDCheckBox && this.Parent.Count > 0 && this.Children.Count > 0)
                {
                    this.CheckedTreeChildMiddle(this.Parent, this.Children, this.IsChecked);
                }

                if (this.Id == CheckBoxId.IDCheckBox && this.Parent.Count > 0 && this.Children.Count == 0)
                {
                    this.CheckedTreeChild(this.Parent, CountCheck);
                }
            }
        }
    }
} 
```

用户控件 XAML 代码：

```
<UserControl x:Class="TreeViewCheckBox.CustomTreeView"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:TreeViewWithImageCheckBox="clr-namespace:TreeViewCheckBox"
                 mc:Ignorable="d">
        <UserControl.Resources>
            <HierarchicalDataTemplate DataType="{x:Type TreeViewCheckBox:Node}" ItemsSource="{Binding Children}">
                <StackPanel Orientation="Horizontal">
                    <StackPanel.Margin>2</StackPanel.Margin>
                    <CheckBox Margin="1" IsChecked="{Binding IsChecked}"
                              PreviewMouseLeftButtonDown="CheckBox_PreviewMouseLeftButtonDown"
                              Uid="{Binding Id}" />
                    <TextBlock Margin="1" Text="{Binding Text}" />
                </StackPanel>
            </HierarchicalDataTemplate>
            <Style TargetType="TreeViewItem">
                <Setter Property="IsExpanded" Value="{Binding Path=IsExpanded, Mode=TwoWay}" />
            </Style>
        </UserControl.Resources>
        <Grid>
            <TreeView Name="tvMain" Grid.ColumnSpan="2" x:FieldModifier="private" />
        </Grid>
</UserControl> 
```

用户控件 c# 代码：

```
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Data;
using System.Linq;
using System.Windows.Controls;
namespace TreeViewCheckBox
{
    public partial class CustomTreeView
    {
        public CustomTreeView()
        {
            this.Nodes = new ObservableCollection<Node>();
            this.InitializeComponent();
            this.FillTree();
        }
        private ObservableCollection<Node> Nodes { get; set; }

        public void FillTree()
        {
            this.Nodes.Clear();
            for (int i = 0; i < 5; i++)
            {
                var level1Items = new Node { Text = " Level 1 Item " + (i + 1) };
                for (int j = 0; j < 2; j++)
                {
                    var level2Items = new Node { Text = " Level 2 Item " + (j + 1) };
                    level2Items.Parent.Add(level1Items);
                    level1Items.Children.Add(level2Items);
                    for (int n = 0; n < 2; n++)
                    {
                        var level3Items = new Node { Text = " Level 3 Item " + (n + 1) };
                        level3Items.Parent.Add(level2Items);
                        level2Items.Children.Add(level3Items);
                    }
                }

                this.Nodes.Add(level1Items);
            }

            this.tvMain.ItemsSource = this.Nodes;
        }

        private void CheckBox_PreviewMouseLeftButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
        {
            var currentCheckBox = (CheckBox)sender;
            CheckBoxId.IDCheckBox = currentCheckBox.Uid;
        }
    }
   } 
```

如何获取列表中的选定节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:37:06.177

您可能必须遍历 Nodes 集合并检查 IsChecked 属性的值。像这样的东西：

```
private List<string> SelectedNodes = new List<string>();

private void GetSelectedNodeText(NodeCollection nodes)
{
    foreach (Node node in nodes)
    {
        if (node.IsChecked != true && node.IsChecked != false)
        {
            SelectedNodes.Add(node.Text + "_" + GetSelectedChildNodeText(node.ChildNodes));
        }
        else if (node.IsChecked == true)
        {
            SelectedNodes.Add(node.Text);
        }
    }
}

private string GetSelectedChildNodeText(NodeCollection nodes)
{
    string retValue = string.Empty;

    foreach (Node node in nodes)
    {
        if (node.IsChecked != true && node.IsChecked != false)
        {
            retValue = node.Text + "_" + GetSelectedChildNodeText(node.ChildNodes);
        }
        else if (node.IsChecked == true)
        {
            retValue = node.Text;
        }
    }

    return retVal;
} 
```

我的假设：

1.  IsChecked 属性在其所有子项都被选中时具有真值。
2.  当所有子项都被取消选择时，IsChecked 属性的值为 false。
3.  IsChecked 属性在只有部分子项被选中时既没有真值也没有假值。
4.  您在 Node.Text 属性中有节点的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:42:29.790

感谢 Sandeep 的想法。

以下代码工作正常..

```
public List<string> GetSelectedNodes()
{
    var listNodes = new List<string>();
    foreach (Node node in this.Nodes)
    {
        if (node.IsChecked == null)
        {
            this.GetSelectedChildNodeText(node.Text, node.Children, ref listNodes);
        }
        else if (node.IsChecked == true)
        {
            listNodes.Add(node.Text);
        }
    }

    return listNodes;
}

private void GetSelectedChildNodeText(string nodeName, IEnumerable<Node> nodes, ref List<string> listNodes)
{
    foreach (Node node in nodes)
    {
        string currentName = string.Format("{0}_{1}", nodeName, node.Text);
        if (node.IsChecked == null)
        {
            this.GetSelectedChildNodeText(currentName, node.Children, ref listNodes);
        }
        else if (node.IsChecked == true)
        {
            listNodes.Add(currentName);
        }
    }
} 
```

# iphone - 为 iOS Xcode 创建和实现数据库

> ID：11981405
> 
> 赞同：0
> 
> 时间：2012-08-16T05:54:43.193
> 
> 标签：iphone, ios, database, ios4, sdk

简介：好的。我正在寻找实现并创建一个包含多个表的数据库以放入 iOS 应用程序中。我知道 SQLite 是一种选择，但你可以将 SQLite 放到网上，以便数据在每台设备上保持最新吗？我还没有制作 SQLite 数据库，但我已经通过 PHP 完成了 MySQL。

问题：我应该使用什么路线？我刚刚听说过 SQLite，不想浪费时间。请在您的回答中说明我如何实现此表。我目前有一个网站，所以我可以托管一个 SQLite 数据库。如果是这样，请链接到教程/指南。另外，如果有人找到了：在 Xcode 中实现此数据库的教程。

只是在寻找最好的路线，但我不想为像 Kumlos 这样的东西买单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T05:58:28.573

您可以在您的服务器中制作数据库，在您的 iOS 应用程序中制作一个 sqlite。然后你可以同步它们。制作一个从数据库中检索信息并将其转换为 JSON 的 php 脚本。从您的应用程序下载此 JSON 解析它，然后将其保存到数据库。这是我使用的方法。

更新： [http ://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)

# javascript - 无法在函数内检索全局变量的值？

> ID：11981406
> 
> 赞同：-1
> 
> 时间：2012-08-16T05:54:49.603
> 
> 标签：javascript

由于在函数内返回变量，我不断得到“未定义”。

这是代码：

```
var nloads = 1;
function something(loc) {
    console.log(nloads); // returns 1
}
function changeSection(loc) {
    console.log(nloads); // Returns undefined
    nloads = nloads + 1;
    temp = nloads;
} 
```

它有什么问题？/可能导致问题的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:26:11.240

请检查此代码图片。

```
<html>
<head>
</head>
<body>
<script>
var nloads = 1;
function something(loc) {

    alert(nloads); // returns 1
}
function changeSection(loc) {
    alert(nloads); // Also returns 1
    nloads = nloads + 1;
    temp = nloads;
}

</script>
<div style="border:solid red; height: 100px;width: 100px;" onClick="something('f');changeSection('f');">   
</div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T06:05:29.150

```
var nloads = 1;
function something(loc) {
    console.log(nloads); // returns 1
}
function changeSection(loc) {
    nloads = nloads + 1;
    **var** temp = nloads; // I was missing var before declaring the variable
    console.log(nloads);
} 
```

# vba - 使用密码取消保护工作表，而不在宏中暴露密码

> ID：11981410
> 
> 赞同：10
> 
> 时间：2012-08-16T05:55:05.387
> 
> 标签：vba, excel, excel-2007

我最近开始在 Excel 中编写一些宏。我有一个受保护的工作表和一些按钮，允许用户在电子表格的某个点添加/删除列/行。

我目前取消保护工作表，执行功能，然后保护工作表。

问题是，受保护的工作表密码在宏中是纯文本的，任何好奇的眼睛都可以看到。

如何在工作表上设置密码来保护它，但同时允许我的宏在执行其功能时取消保护电子表格，然后重新保护它，而不在宏中输入明文密码？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-16T06:18:25.653

两种选择：

1.  密码保护 VBA。（虽然 VBA 保护远不能防止恶意意图，但它并不比工作表保护的安全性差）
2.  如果您使用 VBA 设置工作表保护，您可以指定`UserInterfaceOnly:=True`.

    `sh.Protect Password:="Password", UserInterfaceOnly:=True`

    一旦以这种方式设置，VBA 代码可以在不提供密码的情况下修改工作表。由于必须提供一次密码才能首先应用保护，因此请从单独的工作簿或您自己保留的插件中运行此代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-21T07:34:28.270

您可以调用 a`UserForm`来处理密码提示，但使用`PasswordChar`作为文本框属性来屏蔽字符。

[![在此处输入图像描述](../Images/7d5bcf1d17155cced84358c53765b251.png)](https://i.stack.imgur.com/wK2dO.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T11:09:21.880

不久前我发现了一些代码，这可能会有所帮助。这将解锁任何受密码保护的工作表。这需要一点时间，具体取决于密码的长度，但本质上它只是用大锤敲门，然后解锁工作表。可能不是对您的问题最有效的答案，但它仍然是一个有用的代码。

```
Sub PasswordBreaker()
    'Breaks worksheet password protection.
    Dim i As Integer, j As Integer, k As Integer
    Dim l As Integer, m As Integer, n As Integer
    Dim i1 As Integer, i2 As Integer, i3 As Integer
    Dim i4 As Integer, i5 As Integer, i6 As Integer
    On Error Resume Next
    For i = 65 To 66: For j = 65 To 66: For k = 65 To 66
    For l = 65 To 66: For m = 65 To 66: For i1 = 65 To 66
    For i2 = 65 To 66: For i3 = 65 To 66: For i4 = 65 To 66
    For i5 = 65 To 66: For i6 = 65 To 66: For n = 32 To 126
    ActiveSheet.Unprotect Chr(i) & Chr(j) & Chr(k) & _
        Chr(l) & Chr(m) & Chr(i1) & Chr(i2) & Chr(i3) & _
        Chr(i4) & Chr(i5) & Chr(i6) & Chr(n)
    If ActiveSheet.ProtectContents = False Then
        MsgBox "One usable password is " & Chr(i) & Chr(j) & _
            Chr(k) & Chr(l) & Chr(m) & Chr(i1) & Chr(i2) & _
            Chr(i3) & Chr(i4) & Chr(i5) & Chr(i6) & Chr(n)
         Exit Sub
    End If
    Next: Next: Next: Next: Next: Next
    Next: Next: Next: Next: Next: Next
End Sub 
```

# java - Java NoSuchMethodError：主要

> ID：11981422
> 
> 赞同：0
> 
> 时间：2012-08-16T05:56:28.200
> 
> 标签：java, macos

我正在通过终端在 OS X 上学习 Java。当我编译下面的代码时，我没有收到任何错误，但是当我尝试运行它时，我得到了

> 线程“main”中的异常 java.lang.NoSuchMethodError: main

我的代码：

```
public class Problem5{
public void main(String[] args) {
    int n = 1;
    while(!checkMod(n)){
        n++;
    }

}
public boolean checkMod(int in)
{
    int count = 0;
    for(int i=1; i<20; i++)
    {
        if(in%i == 0)
        {
            count = count + 1; 
        }
    }
    if(count ==19)
    {
        return true;
    }
    else{
        return false;
    }
}
} 
```

我从 main 方法中删除了“静态”，因为我正在调用 checkMod 方法。

我该如何正确编码？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T06:01:58.823

每个可执行的 Java 程序都需要至少一个实现`public static void main(String args[])`的类才能运行。

而不是从中删除`static`引用`main`

添加`static`到`public boolean checkMod(int in)`ie`public static boolean checkMod(int in)`

或者

`checkMod`从实例级别调用方法。

```
public class Problem5{
    public void main(String[] args) {
        new Problem5();
    }

    public Problem5() {
        int n = 1;
        while(!checkMod(n)){
            n++;
        }

    }

    // Rest of code...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T05:59:21.813

主要需要`static`：`public static void main(String[] args)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T06:00:01.097

“入口点”方法是静态 main 而不是 main。他们有不同的方法签名。JVM 只会搜索静态 main。你可以让你的

```
public boolean checkMod(int in) 
```

作为

```
static public boolean checkMod(int in) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T06:02:25.000

`static`是 main 方法所必需的。你可以使用这样的东西来为你的主执行添加状态：

```
public class Problem5 {
  public static void main(String[] args) {
    new Problem5().start();
  }

  private void start() {
    int n = 1;
    while(!checkMod(n)){
      n++;
    }
  }

  private boolean checkMod(int in) {
    ..
  }
} 
```

另一方面，您的`checkMod(int)`方法不需要状态。您也可以将`static`关键字添加到其中。然后可以通过静态 main 方法调用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T05:59:56.670

您需要在 main 和 checkMod 上声明“静态”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T06:01:16.113

您还需要制作`checkMod`静态，因为您是从另一个静态方法调用它。您不能从静态方法调用实例方法：

```
public class Problem5{
public static void main(String[] args) {
    int n = 1;
    while(!checkMod(n)){
        n++;
    }

}
public static boolean checkMod(int in)
{
    int count = 0;
    for(int i=1; i<20; i++)
    {
        if(in%i == 0)
        {
            count = count + 1; 
        }
    }
    if(count ==19)
    {
        return true;
    }
    else{
        return false;
    }
}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-16T06:03:53.767

Main 方法应始终声明为`static`. 此外，您正在`checkMod`主方法中访问，因此要么声明`checkMod`为`static`或使用对象访问它，因为您无法从静态方法访问非静态方法。

尝试跟随。

```
public class Problem5{
public static void main(String[] args) {
    int n = 1;
    while(!new Problem5().checkMod(n)){
        n++;
    }

}
public boolean checkMod(int in)
{
    int count = 0;
    for(int i=1; i<20; i++)
    {
        if(in%i == 0)
        {
            count = count + 1;
        }
    }
    if(count ==19)
    {
        return true;
    }
    else{
        return false;
    }
}
} 
```

# android - 如何实现listAdapter的过滤搜索？

> ID：11981426
> 
> 赞同：1
> 
> 时间：2012-08-16T05:56:59.803
> 
> 标签：android, eclipse, search, filter

adapter.getFilter().filter(s);嗨，我仔细研究了如何实现过滤器搜索，但我仍然无法让我的工作。目前我正在使用带有 hashmap 的 listadapter 来显示 listview。现在我如何使用 listadapter 来做搜索功能？下面是我的代码：

```
private ListAdapter adapter;
ArrayList<HashMap<String, String>> eventsList;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
      setContentView(R.layout.homepage);
      searchBar.addTextChangedListener(filterTextWatcher);

// HashMap for ListView
eventsList = new ArrayList<HashMap<String, String>>();
adapter = new SimpleAdapter(HomepageActivity.this, eventsList,
R.layout.list_event, new String[] { TAG_EID, TAG_ENAME, TAG_CNAME, TAG_CREATED_AT },
new int[] { R.id.eid, R.id.ename, R.id.cname, R.id.created_at });

// updating listView
setListAdapter(adapter);
}
private TextWatcher filterTextWatcher = new TextWatcher() { 

    public void afterTextChanged(Editable s) { 
    } 

    public void beforeTextChanged(CharSequence s, int start, int count, 
            int after) { 
    } 

    public void onTextChanged(CharSequence s, int start, int before, 
            int count) { 
        adapter.getFilter().filter(s);<--- THIS IS WHERE I GOT ERROR
    } 

}; 

@Override 
protected void onDestroy() { 
    super.onDestroy(); 
    searchBar.removeTextChangedListener(filterTextWatcher); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:39:20.560

`ListActivity`简单的简短答案是你不能扩展`Actity` ，因为我遇到了同样的问题，我的提示参考是

[未为 ReminderListActivity 类型定义方法 setListAdapter(ArrayAdapter)](https://stackoverflow.com/questions/10525881/android-for-dummies-code-error)

# python - 在 python 中编辑全局字典

> ID：11981427
> 
> 赞同：0
> 
> 时间：2012-08-16T05:57:02.287
> 
> 标签：python, dictionary

我知道这个问题已经被抛出了很多，但对我来说仍然不是很清楚。我有一个文件“vmsupport.py”。在它的众多功能中，它有一个特别需要向全局字典“netpathdict”添加新元素的地方。我已经声明

```
netpathdict={} 
```

在脚本的开头，因为我想在另一个文件'core.py'的另一个函数中使用这个字典。vmsupport.py 文件的内容：

```
 storefile="%s/netsummary_%s.html" % (full_paths[1].rsplit('/',1)[0],build)
  netpathdict[build] = storefile
  self.logger.debug("storefile at %s key of dictionary is %s" %(build,netpathdict[build])) 
```

“core.py”文件的内容：

```
def view_networksummary(request,build):
 result_file= netpathdict[build]
 f = open(result_file,'r')
 return HttpResponse(f)
 f.close() 
```

所以，我的问题是，我究竟如何将字典导入 core.py 并使用它，我如何确定正在使用的字典是已编辑的字典。（实际上 vmsupport.py 文件适用于不断添加的守护进程字典中的元素。因此，这不是一次性事件）谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:58:50.530

> 我如何将字典导入 core.py 并使用它，我如何确定正在使用的字典是已编辑的字典。

你没有。您导入包含模块并改变属性中包含的对象。

```
import foo
foo.bar.append('baz') 
```

# vim - vim 启动时自动打开 vimwiki

> ID：11981429
> 
> 赞同：7
> 
> 时间：2012-08-16T05:57:13.463
> 
> 标签：vim

我正在使用 vimwiki 的管理待办事项列表功能作为任务管理工具。所以我经常编辑 todo.wiki 文件。

每次启动待办事项时，我必须输入一些命令打开vim.exe（我确实使用Launchy），而vim启动时，然后输入\ ww或:VimwikiIndex，我厌倦了这种方式。

有没有什么方法可以在我想要的时候自动加载待办事项列表？我的意思是有时我只想启动 vim 进行编码，我已经在 .vimrc 中尝试了下面的配置

```
autocmd VimEnter * VimwikiIndex 
```

但是vim每次都打开待办事项列表。所以我想要一些类似开始参数等的东西

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T06:14:16.483

当您通过将文件传递给 Vim 来开始编码会话时，您可以检查：

```
autocmd VimEnter * if argc() == 0 | execute 'VimwikiIndex' | endif 
```

或者，您可以将一个虚拟文件传递`wiki`给 Vim，然后在该触发器上打开 Wiki：

```
autocmd VimEnter * if argv() ==# ['wiki'] | execute 'VimwikiIndex' | endif 
```

但我可能会通过 shell 别名在 Vim 之外解决这个问题

```
alias vimwiki='vim -c VimwikiIndex' 
```

或 Windows 上的小型`vimwiki`包装批处理文件

```
@vim -c VimwikiIndex %* 
```

# ruby-on-rails - 尝试打印浮点字段时出现 ActiveModel::MissingAttributeError

> ID：11981430
> 
> 赞同：0
> 
> 时间：2012-08-16T05:57:24.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.1

我刚刚在我的表中添加了一个浮点字段，由于某种原因，我在尝试在视图上显示它时不断收到此错误

`ActiveModel::MissingAttributeError`

有谁知道为什么？我的观点看起来像

`%td= item.tax_rate`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:22:46.587

我知道为什么现在会发生这种情况。我正在对查询进行选择，但没有选择我需要的字段。

# c# - 如何在 Android 中使用 C# 生成的 RSA 公钥？

> ID：11981432
> 
> 赞同：9
> 
> 时间：2012-08-16T05:57:30.927
> 
> 标签：c#, android, .net, encryption, rsa

在无法假定 HTTPS 可用的情况下，我想确保 Android 应用程序和 C# ASP.NET 服务器之间的消息隐私。

我想使用 RSA 加密一个对称密钥，该密钥在第一次联系服务器时从 Android 设备传输。

RSA 密钥对已在服务器上生成，私钥保存在服务器上。密钥对是在 C# 中使用以下命令生成的：

```
// Create a new instance of RSACryptoServiceProvider
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(2048);
// Ensure that the key doesn't get persisted
rsa.PersistKeyInCsp = false;
RSAParameters parameters = rsa.ExportParameters(false);
string modulus = Convert.ToBase64String(parameters.Modulus);
string exponent = Convert.ToBase64String(parameters.Exponent);
string xmlKeys = rsa.ToXmlString(true); 
```

尝试通过硬编码（从 Visual Studio 复制到 Eclipse）嵌入公钥是行不通的。该代码在 rsaCipher.doFinal() 方法调用中引发 org.bouncycastle.crypto.DataLengthException: input too large for RSA cipher。

```
// Generate a new AES key
byte[] key = null;
try {
    KeyGenerator keygen = KeyGenerator.getInstance("AES");
    keygen.init(128);            
    key = keygen.generateKey().getEncoded();
}
catch (NoSuchAlgorithmException e) {}

// Set up modulus and exponent
String mod = "qgx5606ADkXRxndzurIRa5GDxzDYg5Xajeym7I8BXG1HBSzaaGmX+rjQfZK1h4JtQU+Xaowsc81mgJU8+gwneQa56r1bl6/5jFue4FsdXKfpau5az8rY2SAHKcOeyHAOsT9ZqcNa1x6cL/jl9P3cBtOzMk51Hk/w6VNoQ5JJo/0m/eAJzlhVKr2xbOYFhd0xp3qUgRuK8TN4TsSvfc+R1LOWc8+3H22Zj3vhBxSqSgeXxdxi7ThiGiAl6HUwMf8ph7FHNJvoUQq+QPL6dx77pu6xVFiHv1JOfpbKcOubn0VSPLYKY3QPKCzNMYQ6pxUDqzpGtydHR1xaX5K0FGTraw==";

String ex = "AQAB";
BigInteger modulus = new BigInteger(Base64.decode(mod, Base64.DEFAULT));
BigInteger exponent = new BigInteger(Base64.decode(ex, Base64.DEFAULT));

// Encrypt the AES key
PublicKey pubKey;
byte[] cipherData;
try {
    pubKey = KeyFactory.getInstance("RSA").generatePublic(new RSAPublicKeySpe(modulus, exponent));
    Cipher rsaCipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");     
    rsaCipher.init(Cipher.ENCRYPT_MODE, pubKey);
    // The following line fails with:
    // org.bouncycastle.crypto.DataLengthException
    cipherData = rsaCipher.doFinal(key);     
}
catch (InvalidKeySpecException e) {}
catch (NoSuchAlgorithmException e) {}
catch (InvalidKeyException e) {}
catch (NoSuchPaddingException e) {}
catch (BadPaddingException e) {}
catch (IllegalBlockSizeException e) {} 
```

我怀疑我错误地解码了模数字符串，因为在 Android 中生成公钥会成功加密密钥。我使用了这段代码：

```
KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");     
kpg.initialize(1024);     
KeyPair kpa = kpg.genKeyPair();     
pubKey = kpa.getPublic(); 
```

那么，我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T16:51:06.727

Try using `new BigInteger(1, modulus)`. BigIntegers are signed and as the modulus starts with the first bit set to 1, it will always be interpreted as a negative number.

# c++ - 二进制与文本模式下的文件操作——性能问题

> ID：11981434
> 
> 赞同：13
> 
> 时间：2012-08-16T05:57:45.963
> 
> 标签：c++, c, file-io

在许多项目中，我看到数据对象/结构以二进制模式写入文件，然后再次以二进制模式从文件中取回它们。

我想知道他们为什么以二进制模式执行此操作？文本和二进制模式之间的性能差异？如果不是，那么何时使用二进制模式或文本模式？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-16T06:09:41.523

二进制更快。考虑一个存储在 32 位（4 个字节）中的整数，例如 123456。如果您将其写为二进制（这是它在计算机中的表示方式），它将占用 4 个字节（忽略项目之间的填充以在结构中对齐）。

要将数字写为文本，必须将其转换为字符串（转换需要一些开销和存储内存）然后写出来，因为有 6 个字符来表示数字，所以至少需要 6 个字节。这不包括任何额外的填充，例如用于对齐的空格或用于读取/分隔数据的分隔符。

现在，如果您认为您有数千个项目，则额外的时间可能会加起来并需要更多空间，这将需要更长的时间来读入，然后在您读取值后还有额外的时间转换回二进制文件进行存储进入记忆。

文本的优势在于它更容易被人们阅读，而不是试图阅读二进制数据或数据的十六进制转储。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T06:04:13.963

如果您的程序是唯一要使用该文件的程序，您可以使用二进制文件“按原样”保存内部结构。

但是，如果您想与其他程序或通过 Internet 交换文件，那么二进制格式就不那么好了。例如，想想大端与小端机器的问题。此外，文件或数据的接收者很可能无法访问您的代码和结构，因此基于文本的格式可能更容易解析并实现到自己的结构中。

关于性能，确实直接读取和写入内部结构会更快，因为您不必将它们（也称为编组）转换为另一种格式。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-16T08:14:53.777

从历史上看，二进制模式是提供对底层流的或多或少透明的访问；文本模式“规范化”为标准文本表示，其中行由单个终止`'\n'` 特点。此外，系统可能会对二进制文件的大小施加限制，例如要求它是 128 或 512 字节的倍数。（第一个是 CP/M 的情况，是许多 DEC 操作系统中的第二个。）文本文件没有这个限制，并且在操作系统强加它的情况下，库通常会引入一个额外的文件结尾字符对于文本文件。（即使在今天，大多数 Windows 库在以文本模式读取时仍能识别旧的 CP/M 文件结尾 0x1A。）由于这些考虑，文本模式仅在有限的二进制值集上定义。（但是如果你将 200 字节写入二进制文件，当你重新读取它时，可能会返回 256 或 512。从历史上看，二进制应该只用于其他结构的文本，以便你可以识别逻辑结束，

此外，您可以在以二进制模式打开的文件中任意查找；在文本模式下，您只能寻找到开头或您之前记住的位置。（这是因为行尾映射意味着文件中的位置与文本流中的位置之间没有简单的关系。）

请注意，这与输出是否格式化是正交的：如果您使用输出`<<`（和输入使用`>>`），则无论文件打开的模式如何，都会格式化 IO。格式*始终*是文本；iostreams 旨在操作文本流，并且仅对非文本输入和输出提供有限支持。

今天，情况发生了一些变化：在许多情况下，我们希望我们编写的内容可以从其他机器上读取，这假设了一种定义明确的格式，而这可能不是本机使用的格式。（因此，例如，Internet 期望两个字节序列 0x0D、0x0A 作为行结尾，这与 Unix 和许多其他操作系统内部使用的不同。）如果考虑可移植性，通常定义格式，写它明确地，并使用二进制模式来确保您所写的正是所写的；同样在输入上，您使用二进制格式，并手动处理约定。但是，如果您只是写入未共享的本地磁盘，则文本模式很好，并且工作量少一些。

同样，这两者都适用于文本。如果您想要二进制格式，则必须使用二进制模式，但这还远远不够。您必须自己实现所有格式化的 IO。在这种情况下，我通常不使用`std::istream`or `std::ostream`（其抽象是文本），而是定义我自己的流类型，派生自`std::ios_base` （用于错误处理约定），并使用`std::streambuf`（用于物理 IO）。

最后，不要忽视一个事实，*所有*IO 以某种方式格式化。只需将一块内存写入文件就意味着格式是当前实现给您的任何格式（通常没有记录，这意味着您将来可能无法读取它）。如果您所做的只是溢出到磁盘，并且您唯一一次阅读它是使用相同的程序，使用相同编译器的相同版本编译，使用相同的编译器选项，那么您可以只转储内存，前提是有问题的内存只是 POD，不包含指针。否则，您必须定义（并记录）您使用的格式并实施它。在这种情况下，我建议使用现有格式，例如 XDR，而不是自己发明：将“使用 XDR 格式”编写为文档要容易得多，

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-16T06:03:12.433

如果您以文本模式读取/写入文件，则您正在操作文本。它可能是编码错误和特定于操作系统的格式更改的主题，尽管有时它可能工作得很好。但是，在二进制模式下，您不会遇到这些限制。此外，文本模式可能会对字符做一些有趣的事情`\n`，例如将它们替换为`\n\r`.

例如，[Fopen参考说：](http://www.cplusplus.com/reference/clibrary/cstdio/fopen/)

> 对于文本文件，根据应用程序运行的环境，在输入/输出操作中可能会发生一些特殊的字符转换，以使它们适应系统特定的文本文件格式。在许多环境中，例如大多数基于 UNIX 的系统，将文件作为文本文件或二进制文件打开没有区别。两者的处理方式完全相同，但建议进行区分以获得更好的便携性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-16T06:11:59.930

在二进制模式下，您需要使用一个字节大小（考虑 256 ），而在文本模式下，它几乎不超过 100 个字符。显然，存储数据的大小将增加一倍以上。
此外，在某些情况下，您必须遵守结构规范，例如 IPv4 等网络数据包。

让我们举个例子

```
//No padding
typedef struct abc
{
 int a:4
 char b;
 double c;
} A[]={{.a=4,.b='a',.c=7.45},{.a=24,.b='z',.c=3.2}} ; 
```

在文本模式下存储位字段不是很困难吗？显然你会丢失很多东西。

但是，您可以像使用 MIME 一样将数据对象保存为文本格式，但需要额外的例程才能以二进制模式转换；性能受到重创。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-16T06:07:58.560

只有少数操作系统会受到二进制和文本模式之间的选择的影响。Unix 或 Linux 系统都没有为文本模式做任何特殊的事情——也就是说，文本与二进制相同。

Windows 和 VMS 尤其是在文本模式下转换数据。Windows在写入文件时转换`\n`为，在读取时转换为相反。`\r\n`VMS 有一个要观察的文件记录结构，因此在默认模式下，它转换`\n`为记录分隔符。

在不同的地方，二进制更快。如果没有不同，那也没什么区别。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-09T13:32:26.987

二进制格式对于存储数字更准确，因为它们以精确的内部表示形式存储。保存数据时没有对话，因此保存速度要快得多。

# database - GraphDb 基准脚本

> ID：11981438
> 
> 赞同：1
> 
> 时间：2012-08-16T05:58:03.333
> 
> 标签：database, graph, nosql

我正在尝试对图形数据库的可扩展性进行基准测试。到目前为止，我已经在多个轨道中生成了用于加载到数据库中的数据。我还制定了一些复杂的查询，这些查询在对生成的数据显式调用时确实运行成功。

但是，我对下一步是为基准编写脚本一无所知。这将调用查询并在数据库应用程序上运行。数据生成器是一个用 Java 编写的小程序。谁能给我一个想法如何去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:51:10.893

如何调用数据库取决于它们是如何编写的以及它们的 API 是什么。不确定是否有一种方法可以做到这一切。对于 www.neo4j.org，它是用 Java 编写的，因此可以从任何 JVM 语言调用，请参阅[http://docs.neo4j.org/chunked/snapshot/tutorials-java-embedded.html](http://docs.neo4j.org/chunked/snapshot/tutorials-java-embedded.html)，或通过 REST 作为独立服务器（这当然会影响性能数据），请参阅[http://docs.neo4j.org/chunked/snapshot/rest-api.html](http://docs.neo4j.org/chunked/snapshot/rest-api.html)

有一个欧盟项目正在进行中，试图建立一个独立的基准委员会，但是，该项目可能需要几年时间。

/彼得

# iframe - 刷新整个页面时不刷新 iframe

> ID：11981442
> 
> 赞同：0
> 
> 时间：2012-08-16T05:58:09.907
> 
> 标签：iframe, refresh, page-refresh, partial-page-refresh

我有一个页面，其中包含一个 iFrame 和一个刷新该 iFrame 的按钮，并且它可以根据需要正常工作。我想做的是在刷新整个页面时不允许刷新 iFrame 无论如何都可以这样做吗？

# ruby - 重构我的 ruby twitter gem 代码

> ID：11981445
> 
> 赞同：0
> 
> 时间：2012-08-16T05:58:19.640
> 
> 标签：ruby, twitter, refactoring, gem

我写了一些 ruby​​ 代码来存档推文，但我有几个问题。

1.我的代码看起来效率低下，你能帮我重构一下吗？
2\. 我不太明白如何处理 twitter 错误。我想打印出它抛出的具体错误，而不仅仅是我的标准文本。
3\. 不明白限速状态码怎么用。我的代码总是吐出完全相同的东西：“在接下来的 59 分 59 秒内剩余 150 个 Twitter API 请求”

谢谢！

```
require 'twitter'

count = 1
query = "hello"
res = Twitter.search(query, :rpp => 1, :result_type => "recent", :page => 1).results
search_id = res.first.id

loop do
  begin
    res = Twitter.search(query, :rpp => 100, :result_type => "recent", :page => 1, :max_id => search_id).results
    res.each do |status|
      puts "#{status.id}, #{status.created_at}, #{status.from_user}, #{status.text}"

      puts count.to_s
      count = count+1
    end
    search_id = res.last.id-1

  rescue Twitter::Error => e
    rate_limit_status = Twitter.rate_limit_status
    puts "#{rate_limit_status.remaining_hits} Twitter API request(s) remaining for the next #{((rate_limit_status.reset_time - Time.now) / 60).floor} minutes and #{((rate_limit_status.reset_time - Time.now) % 60).round} seconds"

    puts "Error: No more tweets to collect."
    puts e.inspect
    puts "Last tweet collected at #{res.last.created_at}"
    break
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:02:33.493

好的，我不会为你重写你的代码（你也不应该期望任何人在 SO 上这样做），但我会指出一些问题并尝试解释一些事情：

1.  首先，您`Twitter.search`在进入循环之前调用，然后立即再次调用它，丢弃该过程中的第一批结果。
2.  您应该查看[rate_limit_status](https://dev.twitter.com/docs/api/1/get/account/rate_limit_status)的文档。由于您似乎没有使用经过身份验证的用户，因此此调用只是返回您的 IP 地址的速率限制，除了...
3.  您正在重复调用搜索请求，没有任何停机时间，可能每分钟数千次。如果您确实需要 API 的这种即时结果，您应该查看[Twitter 的 Streaming API](https://dev.twitter.com/docs/streaming-apis)。`sleep(x)`否则，您应该在循环中调用 to 。滥用 API 可能会导致您的 IP 被阻止，而且这也是不礼貌的。
4.  要获取异常的详细信息，请尝试以下操作：

    ```
    rescue Twitter::Error => e
      puts "Oops I messed up"
      puts e.inspect
    end 
    ```

    当您使用它时，请阅读[ruby​​ exceptions](http://www.ruby-doc.org/core-1.9.3/Exception.html)。

# android - 为什么我会收到 NetworkOnMainThreadException？

> ID：11981446
> 
> 赞同：0
> 
> 时间：2012-08-16T05:58:22.013
> 
> 标签：android, soap

当我从我的 Android 活动中进行服务调用时，我看到一个`android.os.NetworkOnMainThreadException`. 为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:07:24.657

您应该从后台线程执行任何服务调用。在 UI（或主）线程上，不允许您进行这种耗时的操作。例如，请参阅`AsyncTask` [文档](http://developer.android.com/reference/android/os/AsyncTask.html)和[用法](http://www.vogella.com/articles/AndroidPerformance/article.html)。

# android - 如何在 Android 中将“#”字符传递给 ACTION_DIAL 意图

> ID：11981450
> 
> 赞同：1
> 
> 时间：2012-08-16T05:58:31.170
> 
> 标签：android

我想将一个包含“#”的数字传递给 Android 系统的拨号盘。就像我使用的以下代码一样：

```
Intent intent = new Intent(Intent.ACTION_DIAL, Uri.parse("tel:#123456#"));
mContext.startActivity(intent); 
```

但实际上，拨号盘上显示的数字是“123456”，“#”消失了。我找不到导致此问题的原因，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T06:13:42.273

尝试如下：

 `````
Intent intent = new Intent(Intent.ACTION_DIAL,Uri.parse("tel:" + Uri.encode("#123456#"));

mContext.startActivity(intent); 
````  `* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T06:10:15.140

试试这个

```
Intent intent = new Intent(Intent.ACTION_DIAL);
intent.setData(Uri.fromParts("tel", "#123456#", "#")); 
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T14:17:23.283

如果你想拨打一个号码（例如：#123），你可以试试这个：

```
Intent callIntent = new Intent(Intent.ACTION_DIAL);
callIntent.setData(Uri.parse("tel:" + Uri.encode("#123")));
startActivity(callIntent); 
```

如果你想拨打一个像#123这样的号码，你只需修改Intent：

```
Intent callIntent = new Intent(Intent.ACTION_CALL);
callIntent.setData(Uri.parse("tel:" + Uri.encode("#123")));
startActivity(callIntent); 
`````

# javascript - 使用 javascript 获取当前季度

> ID：11981453
> 
> 赞同：39
> 
> 时间：2012-08-16T05:58:34.377
> 
> 标签：javascript, jquery, math, date, datetime

如何使用 javascript 获取当前季度？我正在尝试检测我们目前处于哪个季度，例如 2。

**编辑**我如何计算本季度剩余的天数？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-08-16T06:16:33.300

假设一月到三月被认为是第一季度（一些国家/公司将其财政年度与日历年分开），以下代码应该有效：

```
var today = new Date();
var quarter = Math.floor((today.getMonth() + 3) / 3); 
```

这给了你：

```
Month      getMonth()  quarter
---------  ----------  -------
January         0         1
February        1         1
March           2         1
April           3         2
May             4         2
June            5         2
July            6         3
August          7         3
September       8         3
October         9         4
November       10         4
December       11         4 
```

至于如何获得该季度剩余的天数，基本上是计算出下一季度的第一天并计算出差异，例如：

```
var today = new Date();
var quarter = Math.floor((today.getMonth() + 3) / 3);
var nextq;
if (quarter == 4) {
    nextq = new Date (today.getFullYear() + 1, 1, 1);
} else {
    nextq = new Date (today.getFullYear(), quarter * 3, 1);
}
var millis1 = today.getTime();
var millis2 = nextq.getTime();
var daydiff = (millis2 - millis1) / 1000 / 60 / 60 / 24; 
```

这是未经检验的，但理论是合理的。基本上创建下一个季度对应的日期，把它和今天转换成从纪元开始算起的毫秒数，那么差就是毫秒数。

将其除以一天中的毫秒数，您就会得到天数的差异。

这给了你（至少大致）本季度剩余的天数。您可能需要对其进行微调，以确保所有*时间*都设置为相同的值 (00:00:00)，以便精确到天数。

根据您对“本季度剩余天数”的实际定义，它也可能减一。

但这应该是一个很好的起点。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-08-16T06:28:17.673

鉴于您没有提供任何标准来确定“*我们目前所处的季度”，因此可以建议您使用一种算法，然后您必须适应您需要的任何标准。例如

```
// For the US Government fiscal year
// Oct-Dec = 1
// Jan-Mar = 2
// Apr-Jun = 3
// Jul-Sep = 4
function getQuarter(d) {
  d = d || new Date();
  var m = Math.floor(d.getMonth()/3) + 2;
  return m > 4? m - 4 : m;
} 
```

作为一个可运行的片段并包括年份：

```
function getQuarter(d) {
  d = d || new Date();
  var m = Math.floor(d.getMonth() / 3) + 2;
  m -= m > 4 ? 4 : 0;
  var y = d.getFullYear() + (m == 1? 1 : 0);
  return [y,m];
}

console.log(`The current US fiscal quarter is ${getQuarter().join('Q')}`);
console.log(`1 July 2018 is ${getQuarter(new Date(2018,6,1)).join('Q')}`);
```

然后，您可以酌情将其调整到各个财务或日历季度。你也可以这样做：

```
function getQuarter(d) {
  d = d || new Date(); // If no date supplied, use today
  var q = [4,1,2,3];
  return q[Math.floor(d.getMonth() / 3)];
} 
```

然后`q`根据所需季度的定义使用不同的数组。

### 编辑

如果从 1 月 1 日、4 月、7 月和 10 月 1 日开始，以下是一个季度的剩余天数，它在各种浏览器中进行了测试，包括 IE 6（尽管因为它使用基本的 ECMAScript，所以它应该可以在任何地方工作）：

```
function daysLeftInQuarter(d) {
  d = d || new Date();
  var qEnd = new Date(d);
  qEnd.setMonth(qEnd.getMonth() + 3 - qEnd.getMonth() % 3, 0);
  return Math.floor((qEnd - d) / 8.64e7);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-16T06:41:02.403

如果第一个解决方案不起作用，您可以将其调整到您想要的范围

```
var today = new Date();
var month = now.getMonth();
var quarter;
if (month < 4)
  quarter = 1;
else if (month < 7)
  quarter = 2;
else if (month < 10)
  quarter = 3;
else if (month < 13)
  quarter = 4; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-06-28T12:33:23.013

```
function getQuarter(d) {
  return Math.floor(d.getMonth()/3) + 1);
} 
```

编辑：我遗漏了 %4，完全正确，谢谢克莱门特

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-07-21T08:37:28.017

您可以使用[moment](https://www.npmjs.com/package/moment)包：

使用 moment 包对您的问题的回答是：

```
moment().quarter() 
```

以下是使用 moment 包的季度的开始和结束日期：

**季度开始日期**

```
moment().quarter(moment().quarter()).startOf('quarter'); 
```

将返回当前季度，并将日期设置为季度开始日期。

```
moment("2019", "YYYY").quarter(4).startOf('quarter'); 
```

将返回“2019”年第四季度的开始日期。

```
moment().startOf('quarter'); 
```

将返回当年当前季度的开始日期。

**季度结束日期**

```
moment().quarter(moment().quarter()).endOf('quarter'); 
```

将返回当前季度，并将日期设置为季度结束日期。

```
moment("2019", "YYYY").quarter(4).endOf('quarter'); 
```

将返回“2019”年第四季度的结束日期。

```
moment().endOf('quarter'); 
```

将返回当年当前季度的结束日期。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-16T06:02:09.983

取决于月份

```
 var date = new Date();     
 var quarter =  parseInt(date.getMonth() / 3 ) + 1 ; 
```

取决于日期

```
 var date = new Date();    
 var firstday = new Date(date.getFullYear(),0,1); // XXXX/01/01
 var diff = Math.ceil((date - firstday) / 86400000); 
 // a quarter is about 365/4 
 quarter =  parseInt( diff / ( 365/ 4 )) + 1 
 // if today is 2012/01/01, the value of quarter  is  1. 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-08-01T09:30:33.990

这对我有用！

```
var d = new Date();
var quarter = Math.ceil(d.getMonth() / 3);

console.log(quarter)
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-04T17:01:54.317

它效率不高或不可读，但它具有单线风格。

```
(new Date(new Date().getFullYear(), Math.floor((new Date().getMonth() + 3) / 3) * 3, 1) - new Date()) / 86400000 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-15T02:42:25.240

```
// Set Period Function
  SetPeriod(SelectedVal) {
    try {
      if (SelectedVal === '0') { return; }
      if (SelectedVal != null) {
        let yrf: number, mtf: number, dyf: number, yrt: number, mtt: number, dyt: number, dtf: any, dtt: any;
        let dat = new Date();
        let q = 0;
        switch (SelectedVal) {
          case '-1': // Not specify
            frm = ''; to = '';
            return;
          case '0': // As specify
            break;
          case '1': // This Month
            yrf = yrt = dat.getUTCFullYear();
            mtf = mtt = dat.getUTCMonth();
            dyf = 1; dyt = this.getDaysInMonth(mtf, yrf);
            break;
          case '2': // Last Month
            dat.setDate(0); // 0 will result in the last day of the previous month
            dat.setDate(1); // 1 will result in the first day of the month
            yrf = yrt = dat.getUTCFullYear();
            mtf = mtt = dat.getUTCMonth();
            dyf = 1; dyt = this.getDaysInMonth(mtf, yrf);
            break;
          case '3': // This quater
            q = Math.ceil((dat.getUTCMonth()) / 3);
          // tslint:disable-next-line:no-switch-case-fall-through
          case '4': // Last quater
            if (q === 0) { q = Math.ceil(dat.getUTCMonth() / 3) - 1; if (q === 0) { q = 1; } }
            yrf = yrt = dat.getUTCFullYear();
            if (q === 1) {
              mtf = 0; mtt = 2;
              dyf = 1; dyt = 31;
            } else if (q === 2) {
              mtf = 3; mtt = 5;
              dyf = 1; dyt = 30;
            } else if (q === 3) {
              mtf = 6; mtt = 8;
              dyf = 1; dyt = 30;
            } else if (q === 4) {
              mtf = 9; mtt = 11;
              dyf = 1; dyt = 31;
            }
            break;
          case '6': // Last year
            dat = new Date(dat.getUTCFullYear(), 0, 1);
          // tslint:disable-next-line:no-switch-case-fall-through
          case '5': // This year
            yrf = yrt = dat.getUTCFullYear();
            mtf = 0; mtt = 11;
            dyf = 1; dyt = 31;
            break;
        }

        // Convert to new Date
        dtf = new Date(yrf, mtf, dyf);
        dtt = new Date(yrt, mtt, dyt);
        console.log('dtf', dtf);
        console.log('dtt', dtt);

      }
    } catch (e) {
      alert(e);
    }
  }

// Get Day in Month
  getDaysInMonth = (month: number, year: number) => {
    return new Date(year, month + 1, 0).getDate();
  } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-02T07:47:40.893

就我而言，季度取决于输入季度开始日期（月、日）和季度持续时间（3、6）

```
function getCurrentQuarter(startDateString, quarterDuration) {
    var startDate = new Date(startDateString)
    // default order of months
    var months = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
    let startMonth = startDate.getMonth() + 1
    let startMonthIndex = months.indexOf(startMonth)
    // rotate months to get start month first
    if (startMonthIndex != 0) {
        var monthsNew = months.slice(startMonthIndex, months.length)
        months = monthsNew.concat(months.slice(0, startMonthIndex))
    }

    let today = new Date()
    let thisMonth = today.getMonth() + 1
    let thisMonthIndex = months.indexOf(thisMonth) + 1
    // compare with date
    let thisDay = today.getDate()
    let startDay = startDate.getDate()
    if (thisDay < startDay) {
        // this is previous month
        if (thisMonthIndex == 1) {
            thisMonthIndex = 12
        } else {
            thisMonthIndex = thisMonthIndex - 1
        }
    }
    // find quarter
    let thisQuarter = Math.ceil(thisMonthIndex / quarterDuration)

    return thisQuarter
} 
```

> getCurrentQuarter('2021-03-15', 3)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-05-25T09:21:38.897

这是我的看法

```
var todayDate = new Date(new Date().setUTCHours(0, 0, 0, 0));
var currentQuarter = Math.floor(todayDate.getMonth() / 3);
var firstDate = new Date(
  new Date(todayDate.getFullYear(), currentQuarter * 3, 1).setUTCHours(0, 0, 0, 0)
);
var endDate = new Date(
  new Date(
    firstDate.getFullYear(),
    firstDate.getMonth() + 3,
    0
  ).setUTCHours(0, 0, 0, 0)
);
console.log(endDate)
```

# javascript - Sencha Touch 2 Logger.js 未找到

> ID：11981455
> 
> 赞同：4
> 
> 时间：2012-08-16T05:58:46.600
> 
> 标签：javascript, ios, extjs

我在 iOS 模拟器上打开 sencha touch 2 应用程序时遇到问题，该应用程序没有完成加载。当我在 google chrome (http://localhost/.../build/package) 上打开应用程序时，我在控制台上看到了这个问题：

```
Uncaught Error: [Ext.Loader] Failed loading 'http://localhost/~vasconcelloslf/touch2-hello-world/build/package/sdk/src/log/Logger.js', please verify that the file exists 
```

他们在 Sencha 2 论坛上告诉我要设置`"logger":false`此文件`sencha-touch-2.0.1.1-gpl/command/src/module/generate/App/app.json.tpl`，但我仍然遇到同样的错误。有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T12:43:52.340

在您的 Sencha 应用程序根目录中，找到文件 app.json。几乎一直在底部，在“ ***buildOptions*** ”下你会发现

```
"logger": "no" 
```

将此字段设置为

```
"logger": false 
```

然后尝试使用 Sencha 重建您的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-20T16:25:25.400

这也可能是 AdBlock Plus 故障：

删除“EasyPrivacy”列表，它又可以工作了。它会阻止 Logger.js 加载。或者：将 localhost 或您的开发服务器添加到白名单（无论如何都是个好主意！）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T10:07:00.293

我有同样的问题，但单独将 logger 更改为 false 并没有帮助我。`requires : 'Ext.Logger'`我可以通过另外从我的课程中删除来解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T20:21:20.817

我遇到了同样的问题，我将其更改为“false”并从头开始重建所有内容，它工作正常... xcode 4.4.1 // phonegap 2 // sencha touch 2

# node.js - 进行异步调用时，Mongoose getter 函数不返回更新的数组

> ID：11981456
> 
> 赞同：0
> 
> 时间：2012-08-16T05:58:48.287
> 
> 标签：node.js, mongoose, async.js

我有一个使用两种模型的应用程序：电影和标签。这个想法是人们可以创建电影的记录并为其附加标签。电影通过 Movie.tags 属性引用一个或多个标签模型，该属性是一个包含相应标签的 ObjectId 的数组。

在客户端显示电影的属性时，显示标签的文本而不是标签的 ObjectId 是有意义的（请记住：Movie.tags 是 ObjectId 的数组）。我考虑了这个问题并得出结论，最好的方法是使用 getter 函数，这样当我检索 Movie 文档时，tags 属性的值就会从 ObjectIds 数组转换为相应标签名称的数组。

为此，我必须对数组 Movie.tags 中的每个 ObjectId 执行数据库查询。由于 db 查询是在 Mongoose 中异步完成的，因此我尝试使用Async 模块中的[async.forEach()函数来实现 getter 函数。](https://github.com/caolan/async#forEach)问题是在 async.forEach 函数的末尾没有返回最终值。

关于这个问题，我有两个问题：

1.  鉴于我的总体目标，使用 getter 函数是解决此问题的最佳方法吗？
2.  为什么 async.forEach() 无法返回更新后的数组？

来自模型.js

```
/**
 * Mongo database models
 */

function defineModels(mongoose, async, fn) {
  var Schema = mongoose.Schema,
      ObjectId = Schema.ObjectId;

  /**
   * Model - Movie
   */

  /**
   * Getter function
   * 
   * Gets tag text as well as tag ObjectId.
   */
  function getTagNames(tags) {
    var newArray = new Array();
    async.forEach(
      tags,
      function(id, done) {
        mongoose.models['Tag'].findOne({ _id: id }, function(err, doc) {
          if (err) {
            done(err);
          }
          else if (doc) {
            newArray.push(doc);
            done(null);
          }
          else {
            console.log(doc);
            // Just incase something weird like no document is found.  
            // Technically this condition should not occur in reality. But we 
            // put something here to catch it just in case.
            done(new Error('No tag document found.'));
          }
        });
      },
      function(err) {
        if (err) {
          throw err;
        }
        console.log(newArray);
        return newArray;
      }
    );
  }

  /**
   * Define schema
   */
  Movie = new Schema({
    'name': String,
    'machineFileName': String,
    'originalFileName': String,
    'size': Number,
    'type': String,
    'permanent': { 
      type: Boolean, 
      default: false 
    },
    'dateUploaded': Date,
    'amountUploaded': {
      type: [], 
      default: 0 
    },
    'viewed': Number,
    'uid': String,
    'flags': [],
    'tags': {
      type: Array, 
      get: getTagNames
    }
  }, { strict: true });

  mongoose.model('Movie', Movie);

  /**
   * Model - Tag
   */
  Tag = new Schema({
    'title': { type: String, unique: true, sparse: true }
  }, { strict: true });

  mongoose.model('Tag', Tag);

  fn();
}

exports.defineModels = defineModels; 
```

检索文档：

```
/**
 * View individual movie.
 */
exports.movie = function(req, res) {
  var Movie = mongoose.model('Movie');
  Movie.findById(req.params.id, function(err, doc) {
    if (err) {
      res.send('An error occured.', 500);
    }
    else {
      console.log('View movie');
      console.log(doc);
      res.render('movie', {
        locals: {
          title: 'Watch Movie',
          movie: doc
        }
      });
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:41:33.313

我认为你最好制作`tags`一个 ObjectId refs 数组，然后[`populate`](http://mongoosejs.com/docs/populate.html)在需要时使用 Mongoose 填充实际的标签对象。

在`Movie`模式中，`tags`变为：

```
tags: [{ type: ObjectId, ref: 'Tag' }] 
```

然后当您查询时`Movie`：

```
Movie.findById(req.params.id).populate('tags').exec(function(err, doc) {
    // doc.tags is now an array of Tag instances 
```

# javascript - jQuery - 添加 .toFixed(1) 时动态表计算中断

> ID：11981464
> 
> 赞同：0
> 
> 时间：2012-08-16T05:59:00.003
> 
> 标签：javascript, jquery

在我努力解决舍入问题的过程中，我打破了以前运行良好的总计的动态更新。

如果您查看此 JSFiddle：

[http://jsfiddle.net/fmdataweb/73Jzc/1/](http://jsfiddle.net/fmdataweb/73Jzc/1/)

当您更改选择菜单并添加新行和数据时，您将看到动态更新中度和高度的总数。如果您将选择从高更改为中等，它们会继续更新。

我更新了脚本以修复总数中的舍入问题，您可以在此 JSFiddle 中看到：

[http://jsfiddle.net/73Jzc/2/](http://jsfiddle.net/73Jzc/2/)

我所做的只是改变：

```
$('#textfield6').val(tot.moderate);
$('#textfield7').val( tot.high ); 
```

到：

```
$('#textfield6').val(tot.moderate.toFixed(1));
$('#textfield7').val( tot.high.toFixed(1) ); 
```

这似乎阻止了动态总数的更新，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:13:30.663

`tot`用默认值定义高和中等：

```
var tot = {high:0,moderate:0}; 
```

否则，当任何列表中未选择*高*或*中等*时，您将收到错误消息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T06:13:40.053

在调用 .toFixed() 之前，您需要检查是否存在 tot.moderate 或 tot.high。如果没有中等或高行，则会出现错误：

未捕获的类型错误：无法调用未定义的方法“toFixed”

# groovy - groovy 中 Script 类和 Binding 类之间的确切区别

> ID：11981467
> 
> 赞同：1
> 
> 时间：2012-08-16T05:59:17.920
> 
> 标签：groovy

考虑这段代码：

```
x = 10
10.times{    
    x++
}
assert ​binding.getVariable("x") == 20 
```

就目前而言，我担心这就是上面代码中发生的事情：`Script`类引用了`x`具有值的变量，`10`它调用了`times`闭包，该闭包`x`将从`Script`. 所以基本上范围`x`是由`Script`班级完成的。

但我想知道什么时候`binding`出现的？从某种意义上说，我没有打电话`new Binding()`或任何事情，但仍然存在。

我有点困惑。的具体用途是`binding`什么？类是否`Script`创建`binding`，如果是这样，它是如何管理方法内的`x`范围`times`？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T07:36:45.577

脚本类在构造时构造一个新的绑定

[您可以在Script 的构造函数中](https://github.com/groovy/groovy-core/blob/master/src/main/groovy/lang/Script.java)看到它是这样做的

# c# - p/invoke 操作以执行另一个函数结束

> ID：11981469
> 
> 赞同：1
> 
> 时间：2012-08-16T05:59:21.120
> 
> 标签：c#, c++, marshalling, com-interop, com-interface

不知道为什么会这样，但是当我执行我的 c# 函数之一时，它可以由以下 c# 接口定义：

```
[ComImport, Guid("EA5435EA-AA5C-455d-BF97-5F19DC9C29AD"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface IClosedCaptionsDecoder2 
{
    [PreserveSig]
    int SetConfig([In] ref ClosedCaptionsDecoderConfig config);
    [PreserveSig]
    int GetConfig([Out] out ClosedCaptionsDecoderConfig config);
} 
```

和 C++ 接口：

```
 interface __declspec(uuid("{EA5435EA-AA5C-455d-BF97-5F19DC9C29AD}"))
    IClosedCaptionsDecoder2 : public IClosedCaptionsDecoder
    {
        STDMETHOD(SetConfig)(IN CLOSEDCAPTIONSDECODERCONFIG& config) PURE;
        STDMETHOD(GetConfig)(OUT CLOSEDCAPTIONSDECODERCONFIG* pConfig) PURE;
    }; 
```

我被重定向到由“先前”接口声明的另一个函数。例如，当我尝试执行以下命令时：config->SetConfig(....)。重定向到（或下一个要执行的命令）的函数由**IClosedCaptionsDecoder2**的基类实现，称为**IClosedCaptionsDecoder**。

这个接口的 c++ decleration 是：

```
interface __declspec(uuid("{26B8D7F1-7DD8-4a59-9663-8D00C03135F7}"))
        IClosedCaptionsDecoder : public IUnknown
        {
            STDMETHOD(xxx)(IExternalCCObserver* pObserver, LONG lFlags) PURE;
        }; 
```

所以config->SetConfig()实际上调用了config->xxx()，我猜是函数的offest有问题。

我什至尝试在 c# 端定义整个关系（继承等），但这也不起作用。

我将不胜感激任何帮助。谢谢！

**编辑：**当我尝试调用 GetConfig() 时，它实际上执行了 SetConfig()。所以我肯定有指针偏移量的问题。每个函数，按 decleration 顺序调用前一个函数，怎么可能？

**Edit2**：我设法通过将所有功能添加到 IClosedCaptionsDecoder2 接口来解决这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:28:16.837

This is a side-effect of a flaw in the way COM interop is implemented in the CLR. It doesn't properly map methods of an interface to v-table slots when the interface derives from another interface other than IUnknown or IDispatch. It maps the first method to the first available slot even though it is already occupied by the methods of the inherited interface in the concrete coclass implementation. A side-effect of not supporting multiple inheritance. So what goes wrong is that when client code calls IClosedCaptionsDecoder::xxx(), it ends up calling IClosedCaptionsDecoder2::SetConfig() instead.

The workaround is straight-forward though unpleasant, you have to flatten the interface so it includes the inherited methods. In your case that will be:

```
[ComImport, Guid("EA5435EA-AA5C-455d-BF97-5F19DC9C29AD"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface IClosedCaptionsDecoder2 
{
    // Methods inherited from IClosedCaptionsDecoder:
    [PreserveSig]
    int xxx(whatever...);
    // Methods specific to IClosedCaptionsDecoder2
    [PreserveSig]
    int SetConfig([In] ref ClosedCaptionsDecoderConfig config);
    [PreserveSig]
    int GetConfig([Out] out ClosedCaptionsDecoderConfig config);
} 
```

This becomes law in the USA on September 30th, only 6 weeks left to get this working ;)

# c++ - 在 C++ 中为游戏对象设计类层次结构

> ID：11981473
> 
> 赞同：0
> 
> 时间：2012-08-16T05:59:33.933
> 
> 标签：c++, oop

我正在寻找一些关于为游戏对象设计类层次结构的建议。对于这个讨论，我将主要讨论两个特定的类。一个`Object`和`Sprite`。

是游戏中任何类型对象的`Object`基类。`Sprite`直接继承自`Object`，但某些`Object`公共方法不再有意义。这里有一些代码来解释：

```
class Object {
public:
    Object() : renderer(NULL), controller(NULL), collider(NULL) { }
    virtual ~Object();

    Renderer *getRenderer() const;
    Controller *getController() const;
    Collider *getCollider() const;

    void setRenderer(Renderer *renderer);
    void setController(Controller *controller);
    void setCollider(Collider *collider);
private:
    Renderer *renderer;
    Controller *controller;
    Collider *collider;
}; 
```

`Object`具有渲染器、碰撞器和控制器三个组件。 `Sprite`当然有这三个组件，但使用一个`SpriteRenderer`. 然后我想我不希望`setRenderer`为 sprite 类公开该方法。

所以我认为我应该编写精灵类如下：

```
class Sprite : protected Object {
public:
    Sprite(Texture *texture) : Object(), texture(texture) {
        setRenderer(new SpriteRenderer(this));
    }

    Renderer *getRenderer() const;
    Controller *getController() const;
    Collider *getCollider() const;

    void setController(Controller *controller);
    void setCollider(Collider *collider);
private:
    Texture *texture;
}; 
```

getter 和 setter 只调用相关的`Object`方法。但在这种情况下，我不能真正使用`Sprite`as an `Object`，例如将它传递给一个接受 s 的函数`Object`。

我的另一个实现是：

```
class Sprite : public Object {
public:
    Sprite(Texture *texture) : Object(), texture(texture) {
        setRenderer(new SpriteRenderer(this));
    }
private:
    Texture *texture;
}; 
```

这暴露了`setRenderer`方法。

我的思考过程是，`setRenderer`方法不应该暴露，因为 a`Sprite`是`Object`带有 a 的`SpriteRenderer`，所以如果它被改变了，那么它就不是 a `Sprite`。但是，我没有看到一种明显的方法来防止它发生变化。

一般来说，这是我不应该担心的事情，还是有另一种方法可以进行这种设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:58:54.390

与其使用 getter 和 setter 对对象进行建模，不如让对象真正做你想做的事——你不必担心在没有 setter 时暴露 setter。:)

例如，让对象自己渲染而不是返回渲染器。这样，精灵可以覆盖此行为：

```
class Object {
    virtual void render() = 0;
}

class Sprite : public Object {
    void render() {
      // use a SpriteRenderer
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T07:16:31.210

您应该问自己：您是否需要在运行时更改渲染器（和其他组件）？我相信创建对象实例后不需要这样做。因此，我根本不会将方法 setRenderer（和其他 setXXX）放在公共 API 中。您是否需要公开这些参数？如果是，那么我可以提出以下建议：

.

```
class Object
{
public:
    // Constructor with all the necessary parameters. 
    // For simplicity I keep only Renderer
    Object(const Renderer & renderer) :
        renderer_(renderer)
    {
    }

    const Renderer & getRenderer() const { return renderer_; }

private:
    // I think reference is better if Renderer MUST always be not NULL
    const Renderer & renderer_;

}; 
```

这样你就有了很好的不可变类。

要构建 Sprite 实例，您可能需要 SpriteFactory 或 SpriteBuilder。

.

```
class Sprite : public Object
{
public:
    Sprite(const Renderer & renderer, const SpriteSpecificStuff & stuff) :
        Object(renderer),
        ...
    {
    }
};

class SpriteBuilder
{
public:
    void setRenderer(const Renderer * renderer);
    void setSpriteSpecificStuff();

    std::auto_ptr<Sprite> build();
}; 
```

同样，使用构建器，您将拥有不错的不可变类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T05:01:15.213

结合我关于多重继承的评论，您可以将对象视为一些可渲染的，一些能够碰撞的，一些被“控制”（无论这在您的系统中意味着什么）。因此，您可以为每个功能拥有一个基类，而不是拥有一个包含所有这三个属性（并且可能更多）的单个基对象。

```
class Renderable
{
public:
    Renderable(Rendered *renderer) : remderer_(renderer) {}

    Renderer *getRenderer() const;
    void setRenderer(Renderer *renderer);

private:
    Renderer *renderer_;
}

class Controllable
{
public:
    Controllable(Constroller &constroller) : controller_(constroller) {}

    Controller *getController() const;

    void setController(Controller *controller);

private:
    Controller *controller_;
};

class Collidable {
public:
    Collidable(Collider *collider) : collider_(collider) {}

    Collider *getCollider() const;

    void setCollider(Collider *collider);

private:
    Collider *collider_;
}; 
```

然后`Sprite`具有所有三个功能的类，您继承所有三个：

```
class Sprite : public Renderable, public Controllable, public Collidable
{
public:
    Sprite()
        : Renderable(new SpriteRenderer)  // Supply special renderer
        {}

private:
    // Disallow users of the `Sprite` class to call this function;
    using Renderable::setRenderer;
}; 
```

这个具有能力类的系统在创建游戏世界中的“对象”时非常有效。以一个奇幻风格的游戏为例，你有一个`Sword`继承自和的类`Weapon`，这意味着剑可以用作武器，可以佩戴和携带。`Wearable``Carryable`

# sockets - pread 和 lseek 不适用于套接字文件描述符

> ID：11981474
> 
> 赞同：0
> 
> 时间：2012-08-16T05:59:55.583
> 
> 标签：sockets, system-calls

这个问题是关于系统调用 pread 和 lseek 的。我有一个套接字类型的文件描述符。每当从网络层读取数据包时，就会将数据添加到其中。我想知道文件描述符中定期存在的数据量是多少。

我尝试使用系统调用 pread 和 lseek，这样我只知道数据量而不是读取数据本身。但是，这两个调用都失败了，给出了非法搜索错误。套接字类型文件描述符上是否有任何其他系统调用，或者套接字 fd 不支持 pread 和 lseek？.

最佳雅什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:45:29.837

[Linux 联机帮助页](http://linux.die.net/man/7/socket)说套接字接口不支持查找操作：

> 套接字不支持查找或调用具有非零位置的 pread(2) 或 pwrite(2)。

您可以尝试`recv`使用以下标志集`(MSG_PEEK|MSG_DONTWAIT)`来指定足够大小的缓冲区。

此操作将从套接字的接收缓冲区复制数据，但不会将其弹出，即后续`recv`/`read`调用将读取所有相同的数据 + 更多数据可能会到达套接字，因此返回的字节数可能会更大。

缓冲区大小是一个非常棘手的问题 - 它应该大于套接字接收缓冲区，否则您的`recv`调用可能会返回您提供的缓冲区中的字节数，但套接字实际上还有更多。

套接字接收缓冲区的大小可以通过`getsockopt`带有选项名称的函数获得`SO_RCVBUF`。

顺便说一句，我认为更好的选择是实际读取数据并将其保存在缓冲区中的某个地方。当你读到足够的数据时，用它做一些动作。这似乎是一种比在不提取数据的情况下窥视套接字接收缓冲区更好和更常见的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T06:44:54.343

您不能在套接字句柄上寻找。 `pread`有效地执行 an `lseek`then a `read`。

最好调用`read`或`recv`循环并使用那里的内容。有关更广泛的答案，请参阅此[SO question](https://stackoverflow.com/questions/9108574/getting-number-of-bytes-available-to-read-in-a-socket)。

# c# - 使用 SharpSvn C# 进行分支/标记

> ID：11981479
> 
> 赞同：1
> 
> 时间：2012-08-16T06:00:38.177
> 
> 标签：c#, svn, sharpsvn

我一直在尝试使用 . 将特定文件夹（在我的 PC 上）标记到 SVN 位置`SvnClient`。

我开始知道 Branch / Tag 只是 Subversion 中的一个复制操作。

1.  复制到某个位置是否就像（或相同）创建标签？
2.  该`SvnClient.Copy`命令具有以下签名：

    public bool Copy(SvnTarget sourceTarget, string toPath)

我将其用作：

```
 string CILocalPath = System.IO.Path.Combine(NewLabelFolderPath, "CI"); // C:\MyFolder
    string CITagPath = textBoxCI.Text.Replace(textBoxBranchKeyword.Text,textBoxTagKeywork.Text); svn://10.205.10.72/OurFolders

    SvnTarget CITarget = SvnTarget.FromString(CITagPath);
    client.Copy(?,?); 
```

它非常令人困惑，我不知道第一个参数是我的本地路径还是远程路径。

我是否正确使用它？请帮助我。

**编辑：**
我`C:\MyFolder`作为第一个参数，另一个作为第二个，它给了我以下错误：

> 此参数不是有效路径。指定了一个 Uri
> 参数名称：toPath

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T16:34:38.847

如果你想复制*到*一个 url 你应该 client.RemoteCopy(, )

SharpSvn 为此使用不同的功能来避免需要授权设置等，仅复制本地目录。

# udp - 在 openvpn 上运行 netperf udp 流时出错

> ID：11981480
> 
> 赞同：3
> 
> 时间：2012-08-16T06:00:41.277
> 
> 标签：udp, performance-testing, openvpn

为什么当我将 OpenVPN 与示例配置文件一起使用并想使用 netperf UDP_STREAM 测量性能时，我收到此错误：

```
$ netperf -H 10.8.0.1 -t UDP_STREAM

MIGRATED UDP STREAM TEST from 0.0.0.0 () port 0 AF_INET to 10.8.0.1 () port 0 AF_INET

send_data: data send error: errno 101

netperf: send_omni: send_data failed: Network is unreachable 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-06-13T18:10:11.610

原始问题中的错误似乎是由 netperf 中未记录的“功能”与 openvpn 示例配置中的默认接口设置之间的交互引起的。我不确定为什么 OP 能够通过更改 netperf 的版本来解决问题，除非他们更改为的版本中不存在“功能”。不过，这是我对问题的解释和我的解决方案。

根据netperf 邮件列表中的[这条](http://www.netperf.org/pipermail/netperf-talk/2013-July/001123.html)消息，netperf 的开发人员冒昧地在运行 UDP_STREAM 测试时禁用了 IP 路由。这意味着如果您在同一子网上的两台主机之间运行 UDP_STREAM 测试，它将起作用。但是，一旦您尝试在不同网络上的两台主机之间运行它，它将失败并显示 OP 报告的消息。这令人倍感困惑，因为我找不到任何地方都没有记录此“功能”，并且因为所有其他测试都正常工作。

在默认的 OpenVPN 配置中，适配器是后来的 3 tun 适配器。您的远程主机将位于与本地主机不同的网络上。因此，触发了这种 netperf 行为，您会得到错误而不是结果。

幸运的是，netperf 有一个命令行开关，可以为 UDP_STREAM 测试重新打开路由。添加 -R 1 on 作为测试特定选项，一切都开始工作。例如，

```
netperf -H 10.8.0.1 -t UDP_STREAM -- -R 1 
```

我没有专门用 OpenVPN 测试过这个，但是我用路由网络测试过它，它修复了 UDP_STREAM 测试的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T13:40:28.947

这个问题似乎与服务器端和客户端的 netperf 版本有关。如果在两边，我们使用相同版本的netperf，这个问题就可以解决了。

# svn - 如何修复 VisualSVN 服务器安装

> ID：11981483
> 
> 赞同：-1
> 
> 时间：2012-08-16T06:00:56.800
> 
> 标签：svn, visualsvn-server

我们为 VisualSVN Server 2.5.2 提供服务的 PC 再次被黑客入侵。试图解决我删除*了一些文件*。恐怕我可能已经删除了一些与配置相关的文件，并且可能是 VisualSVN Server 需要的。我们不再能够使用 SVN 客户端或使用浏览器从其他计算机访问存储库。有人可以帮助我们如何再次访问它吗？选项可能是：

1.  进行维修重新安装，
2.  备份存储库，删除并重新安装 VisualSVN 服务器，然后导入存储库。
3.  其他一些解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:38:19.303

*根据您删除的具体内容以及“PC 被黑客入侵”是*什么意思，故障排除步骤可能会有所不同。

但是，如果问题只是删除文件：您可以通过**Start |修复 VisualSVN Server 实例。控制面板 | 程序和功能**或通过运行相应版本的 *.msi 安装程序（在您的情况下为 2.5.2）。

# vb.net - 按日期压缩文件

> ID：11981485
> 
> 赞同：0
> 
> 时间：2012-08-16T06:01:10.553
> 
> 标签：vb.net, zip

我有从 VB.NET 开发的应用程序按日期创建的日志文件，例如“Product.15082012.txt”、“Product.16082012.txt”和“Service.15082012.txt”、“Service.16082012.txt”下的“ C:\日志”。创建的日志文件格式为“Product.ddMMyyyy.txt”和“Service.ddMMyyyy.txt”

我需要遍历文件夹“C:\Logs”中过去 6 个月的日志文件，并将其压缩为“C:\Logs\Archive”下的“archive.15082012.zip”和“archive.16082012.zip”通过单独的存档应用程序。

我的意思是在遍历文件夹时，它应该按日期将产品和服务压缩到一个 zip 文件中。

我怎样才能做到这一点？我知道如何压缩文件，但不知道如何按日期提取文件并将“Product.ddMMyyyy.txt”和“Service.ddMMyyyy.txt”分组

```
Private Sub AddToArchive(ByVal zip As Package, ByVal fileToAdd As String)
    'Replace spaces with an underscore (_) 
    Dim uriFileName As String = fileToAdd.Replace(" ", "_")

    'A Uri always starts with a forward slash "/" 
    Dim zipUri As String = String.Concat("/", _
               IO.Path.GetFileName(uriFileName))

    Dim partUri As New Uri(zipUri, UriKind.Relative)
    Dim contentType As String = _
               Net.Mime.MediaTypeNames.Application.Zip

    'The PackagePart contains the information: 
    ' Where to extract the file when it's extracted (partUri) 
    ' The type of content stream (MIME type):  (contentType) 
    ' The type of compression:  (CompressionOption.Normal)   
    Dim pkgPart As PackagePart = zip.CreatePart(partUri, _
               contentType, CompressionOption.Normal)

    'Read all of the bytes from the file to add to the zip file 
    Dim bites As Byte() = File.ReadAllBytes(fileToAdd)

    'Compress and write the bytes to the zip file 
    pkgPart.GetStream().Write(bites, 0, bites.Length)

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:59:36.040

请在下面找到适合您场景的示例。

```
Private Shared Function GetZipFile(ByVal zipFileNameWithPath As String, ByVal parallelDeflateThreshold As Integer) As ZipFile
    Dim zip = New ZipFile(zipFileNameWithPath)
    zip.CompressionLevel = Ionic.Zlib.CompressionLevel.BestCompression
    ' For using multiple threads to compress the files. 
    '-1 for single thread and never use parallel deflat 
    '0 for always use parallel deflate
    zip.ParallelDeflateThreshold = parallelDeflateThreshold
    'For  very larger files of size more than 2GB after compression
    zip.UseZip64WhenSaving = Zip64Option.AsNecessary
    Return (zip)
End Function
Public Shared Sub ZipFiles(ByVal filesToZip As List(Of System.IO.FileInfo), ByVal zipFileNameWithPath As String, ByVal parallelDeflateThreshold As Integer)
    Dim fileInfo As New System.IO.FileInfo(zipFileNameWithPath)
    If fileInfo IsNot Nothing Then
        fileInfo.Delete()
    End If
    Using zip = GetZipFile(zipFileNameWithPath, parallelDeflateThreshold)
        For Each file In filesToZip
            zip.AddFile(file.FullName, String.Empty)
        Next
        zip.Save()
    End Using
End Sub
Public Shared Sub GetFiles(ByVal folderPath As String)
    Dim directory As New System.IO.DirectoryInfo(folderPath)
    Dim startDate As DateTime = DateTime.Now.AddMonths(-6)
    Dim datesFilterList As New Dictionary(Of String, String)
    While startDate <= DateTime.Now
        datesFilterList.Add(startDate.ToString("ddMMyyyy"), String.Concat("*.", startDate.ToString("ddMMyyyy"), ".txt"))
        startDate = startDate.AddDays(1)
    End While
    For Each filter As KeyValuePair(Of String, String) In datesFilterList
        Dim files As System.IO.FileInfo() = directory.GetFiles(filter.Value)
        If files.Count > 0 Then
            Dim zipFileName As String = String.Concat("\archive.", filter.Key.ToString(), ".zip")
            ZipFiles(files.ToList(), String.Concat(folderPath, "\Archive", zipFileName), 0)
        End If
    Next
End Sub 
```

您需要参考以下 Iconic.Zip.dll，可以从[这里](http://dotnetzip.codeplex.com/releases/view/68268)下载。

注意：我假设您的文件夹结构如下所示：

![文件夹结构](../Images/acf7f355509cac39c451bc3e0e4808ba.png)

# wcf-data-services - OData NavigationProperty 和 $links 段之间的区别

> ID：11981494
> 
> 赞同：2
> 
> 时间：2012-08-16T06:01:52.827
> 
> 标签：wcf-data-services, odata

我不知道那个 URI`http://services.odata.org/OData/OData.svc/Categories(1)/Products`和`http://services.odata.org/OData/OData.svc/Categories(1)/$links/Products`. 在[http://www.odata.org/documentation/uri-conventions/#AddressingLinksBetweenEntries](http://www.odata.org/documentation/uri-conventions/#AddressingLinksBetweenEntries)文档解释不够清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T07:54:08.417

在这种情况下，第一个遍历导航属性（产品）并将返回产品实体的提要（与 ID 为 1 的类别相关的所有产品）。您可以将其想象为访问导航属性的值。它允许您访问导航属性的“另一面”。

第二个用于解决关系本身。它返回一个指向产品的 URL 列表，但它不会返回实体本身。$links URL 上的 GET 通常不太有用（有时可以）。此 URL 对于更新更为重要。例如，如果您有一个 ID 为 1 的现有类别和一个 ID 为 42 的现有产品，并且您希望该产品属于该类别，您将发送一个 POST 到上面的 $links URL，并在有效负载中发送一个 URL 到ID 为 42 的产品。这将在两个实体之间创建关系。$links URL 允许您访问导航属性的“链接”。

# c# - 如何使用更通用的 IEnumerable ?

> ID：11981496
> 
> 赞同：4
> 
> 时间：2012-08-16T06:02:01.583
> 
> 标签：c#, generics

我的代码如下：

```
PropertyInfo p_info_keys = obj.GetType().GetProperty("Keys");
IEnumerable<string> keys = (IEnumerable<string>)p_info_keys.GetValue(obj, null);

foreach (string key in keys)
{
    // Some code
} 
```

问题是这一行：

```
IEnumerable<string> keys = (IEnumerable<string>)p_info_keys.GetValue(obj, null); 
```

因为它可以是：

```
IEnumerable<decimal> keys = (IEnumerable<decimal>)p_info_keys.GetValue(obj, null); 
```

我试过用这个：

```
IEnumerable<object> keys = (IEnumerable<object>)p_info_keys.GetValue(obj, null); 
```

但是，当然，它不起作用。

那么，我怎样才能使用可以接受字符串和十进制的更通用的构造呢？

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T06:03:26.287

`IEnumerable<T>`最简单的方法是使用extends的事实`IEnumerable`：

```
IEnumerable keys = (IEnumerable) p_info_keys.GetValue(obj, null);

foreach (object key in keys)
{
    ...
} 
```

当然，您在编译时没有密钥的类型，但是如果您尝试对两种情况使用相同的非通用代码，那么无论如何这是不可能的。

另一种选择是在通用方法中执行此操作：

```
public void Foo<T>(...)
{
    IEnumerable<T> keys = (IEnumerable<T>) p_info_keys.GetValue(obj, null);

    foreach (T key in keys)
    {
        ...
    }
} 
```

# wix - WiX Heat 工具，创建带有 Win64 属性的组件

> ID：11981498
> 
> 赞同：4
> 
> 时间：2012-08-16T06:02:11.700
> 
> 标签：wix, wix3.6

有没有办法使用`heat`具有部分`Win64`属性的工具生成文件`Component`？

问题是，在我的 64 位安装程序中，大多数文件都是 32 位组件，必须`Win64="no"`在`Component`条目中标记。我使用`heat`工具来生成它们，因此需要额外的手动步骤，这破坏了我们的自动化构建。

**更新**：简短的回答是“否”（标记为答案），我想我会使用一些可以完成这项工作的附加工具。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T07:19:26.507

`Heat.exe`没有这个开关，但是`candle.exe`有。输入`-arch x64`到命令行`candle.exe`，它将为包、组件等设置平台默认值。

顺便说一句，这个问题最初是[在这里](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/heat-exe-Add-attribute-Win64-quot-yes-quot-to-Component-elements-td4947690.html)提出的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-15T20:25:06.707

我知道这很旧，但只是在寻找同样的问题，然后就出现了。

我发现如果在 Wix 项目属性的“工具设置”下将“-arch x64”添加到编译器附加参数中，您仍然可以使用 Heat。

# kernel - 如何在 FreeBSD 中动态切换到另一个内核？

> ID：11981510
> 
> 赞同：2
> 
> 时间：2012-08-16T06:03:23.823
> 
> 标签：kernel, freebsd

我知道Linux有'kexec'来做到这一点。如何在 FreeBSD 中做到这一点？这对系统管理员来说非常重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:25:12.107

FreeBSD 目前不支持这个操作。去年在hackers@freebsd.org 邮件列表上有一个关于它的讨论，从[这里](http://lists.freebsd.org/pipermail/freebsd-hackers/2011-June/035628.html)开始。由于 Linux 和 FreeBSD 引导过程和内核体系结构之间存在一些相当基本的差异，这看起来似乎还有很长的路要走。

# c# - 将图片框放在前面

> ID：11981512
> 
> 赞同：1
> 
> 时间：2012-08-16T06:03:26.130
> 
> 标签：c#

当我在一个循环中绘制几个重叠的图像时，比如一副扑克牌，我希望最后一张牌在上面，以查看整张牌。现在它是第一张可见的卡片。我想知道是否有办法将第一张卡放在前面或其他类似的东西？

```
 for (int i = 1; i < 10; i++)
        {
            cardGui = new CardGui(i);
            cardGui.Location = new Point(10 + (i * 10), 10);
            panel1.Controls.Add(cardGui);   
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:07:06.923

在你的循环之后试试这个代码：

```
 for (int i = 1; i < 10; i++)
    {
        cardGui = new CardGui(i);
        cardGui.Location = new Point(10 + (i * 10), 10);
        panel1.Controls.Add(cardGui);   
    }
    cardGui.BringToFront(); 
```

> 我希望最后一张牌在上面

这段代码给出了你所问的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T06:11:22.070

父集合的尝试[`BringToFront()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.bringtofront.aspx)方法或使用方法。[`SetChildIndex`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.setchildindex.aspx)`Controls`

> **`SetChildIndex`**：将集合中指定子控件的索引设置为指定索引。
> 
> **`BringToFront`**：将控件置于 z 顺序的前面。

对于示例代码：

```
for (int i = 1; i < 10; i++)
{
    cardGui = new CardGui(i);
    cardGui.Location = new Point(10 + (i * 10), 10);
    panel1.Controls.Add(cardGui);   
    panel1.Controls.SetChildIndex(cardGui, 10 - i); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T06:15:23.253

如果您想将第一张卡片放在前面，您应该为卡片设置 2 个值，例如 cardGui1 和 cardGui2。第一个仅用于作为其他人完成循环的前列。

试试这个 ：

```
const j =1;
cardGui2 = new cardGui2(j);
cardGui12.Location = new Point(10 + (j * 10), 10);
panel1.Controls.Add(cardGui2);
cardGui2.BringToFront();

for (int i = 1; i < 10; i++)
        {
            cardGui1 = new CardGui1(i);
            cardGui1.Location = new Point(10 + (i * 10), 10);
            panel1.Controls.Add(cardGui1);   
        } 
```

更新 ：

我假设最后一张卡片索引是 10。试试这个：

```
for (int i = 1; i < 10; i++)
        {
            cardGui1 = new CardGui1(i);
            cardGui1.Location = new Point(10 + (i * 10), 10);
            panel1.Controls.Add(cardGui1);   
        }

const j =10;
cardGui2 = new cardGui2(j);
cardGui12.Location = new Point(10 + (j * 10), 10);
panel1.Controls.Add(cardGui2);
cardGui2.BringToFront(); 
```

# dns - 无法通过 URL 访问网页而不在 localhost 文件中输入

> ID：11981513
> 
> 赞同：1
> 
> 时间：2012-08-16T06:03:42.630
> 
> 标签：dns, windows-server-2008, sas

我们已经在我们研究所设置了一个 SAS EBI 服务器来托管我们基于 SAS Bi 服务器的统计分析 Web 应用程序。（此应用程序托管在我们的私有服务器中）

访问应用程序的 url 类似于 http:\stat..res.in:8080/sasportal。

问题是我们无法通过在网络浏览器中输入该网址从我们研究所的机器连接到它。我们首先需要在我们想要访问应用程序的系统的主机文件中输入 IP 地址和 url，然后只有我们能够访问它。

我相信这个问题与 DNS 有关.. 但需要一些专家帮助来确定问题。

我将不胜感激在这件事上的任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:13:13.160

您已正确识别问题。机器无法将 FQDN 解析为 IP 地址，这就是它们无法连接到它的原因。

如果这仅供内部使用；你有一些选择：

1.  如果您的机器是托管的，您可以将更改推送到`HOSTS`FQDN 并将其映射到 FQDN，然后刷新系统上的 DNS 缓存。

2.  如果您有 ActiveDirectory（包括 DNS），请添加此区域 ( `stats.in`) 并创建一个`A`( *Address* ) 记录以指向 IP。所有使用 DC 解析的主机都将能够解析该名称。

3.  如果您没有 ActiveDirectory；安装一个本地 DNS 转发器/解析器。在其中，添加一个映射`stats.res.in`到机器 IP 地址的区域。如果您的网络使用 DHCP，您可以修改 DHCP 服务器以将此本地 DNS 服务器添加为网络配置的一部分；因此，当 DHCP 租约到期并且客户端更新 IP 时，它们将获得新的 DNS 信息。不需要最终配置。

如果您的网络上有静态 IP，则必须手动转到每台计算机（或更新它们的系统映像并恢复它们），以将本地解析器添加为其网络配置的主 DNS。

如果该区域`res.in`由外部管理（由您的 ISP 或 Web 主机）：

1.  当他们创建一个`A`（地址）记录并将其指向您公司外部提供的“真实”IP。您可以从您的 ISP 那里获得另一个“真实”IP 用于此服务；或者，如果您要使用现有 IP，请确保没有其他服务在端口 80 上侦听该真实 IP。

2.  使用您的路由器/网络管理控制台；将来自该“真实”IP 的请求映射到您的内部网络 IP。如果您的真实 IP 为`5.5.5.5`，则您的网络应配置为`5.5.5.5:80 --> 192.168.1.145:80`（假设这`192.168.1.145`是托管服务的服务器的本地 IP）。

3.  您的客户端系统不需要更改，因为一旦 DNS 更改传播，它们就会自动解析。

# web-applications - JMeter 摘要报告 % 错误

> ID：11981516
> 
> 赞同：5
> 
> 时间：2012-08-16T06:03:52.380
> 
> 标签：web-applications, jmeter

我只是开发一个网络应用程序，并使用 jmeter 对其进行测试。无论如何我是jmeter的新手，仍然不熟悉它。

所有测试都很好，除了 % error 列上有 100%。我仍然想知道它是基于什么的，我使用浏览器对其进行了测试，它工作正常，我正在使用 1 个实例/1 个请求，但它仍然显示 100% 错误。

摘要报告中的错误百分比列基于什么？我怎么知道它发现了什么我不知道的错误？非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T06:40:15.323

将树结果侦听器添加到您的测试计划并与 1 个用户一起运行它，您将获得有关错误的更多信息。

这个错误告诉你请求失败或响应失败基于断言（文本，响应代码......）

读：

*   [http://jmeter.apache.org/usermanual/index.html](http://jmeter.apache.org/usermanual/index.html)

了解 jmeter 概念。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T09:38:54.663

似乎您的测试没有按预期运行。如果您正在针对任何实时运行，理想的错误率应该是 0% 或趋向于它（除非应用程序已关闭或您正在对某些东西进行负面测试）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T15:24:58.590

您可以使用插件标准集中提供的“每秒服务器点击次数”。 [http://jmeter-plugins.org/wiki/HitsPerSecond/?utm_source=jmeter&utm_medium=helplink&utm_campaign=HitsPerSecond](http://jmeter-plugins.org/wiki/HitsPerSecond/?utm_source=jmeter&utm_medium=helplink&utm_campaign=HitsPerSecond)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-25T01:57:39.047

我通过添加*新*的“查看结果树”侦听器访问错误。我的测试计划中有 2 个现有的“查看结果树”节点，但我以这种方式添加了新节点：

*   右键单击“测试计划”节点
*   添加 > 侦听器 > 查看结果树

这在我的“HTTP(S) 测试脚本记录器”节点下添加了一个新的侦听器。然后，我用大量用户（不是 1 个用户，正如接受的答案所暗示的那样）重新运行我的测试，然后错误都在“查看结果树”节点下可用。

# javascript - JavaScript 计时，jQuery 淡入淡出

> ID：11981523
> 
> 赞同：2
> 
> 时间：2012-08-16T06:04:23.323
> 
> 标签：javascript, jquery

我编写了一个简单的函数，它使用淡入/淡出效果转换三个 div 元素。当用户单击链接时触发该事件。这是我的代码：

```
$(".link1").click(function () {
   $(".feature1").fadeIn(1000);
   $(".feature2").fadeOut(1000);
   $(".feature3").fadeOut(1000);
});

$(".link2").click(function () {
   $(".feature1").fadeOut(1000);
   $(".feature2").fadeIn(1000);
   $(".feature3").fadeOut(1000);
});

$(".link3").click(function () {
   $(".feature1").fadeOut(1000);
   $(".feature2").fadeOut(1000);
   $(".feature3").fadeIn(1000);
}); 
```

我需要能够设置某种计时器，以便这些转换每 8 秒左右自动发生一次。我还希望它们本质上“循环”，这样如果我们到达集合中的第三个 div，它就会返回到第一个 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:15:14.627

你的意思是这样的吗？

```
setInterval(myFunction,8000); 
```

javascript 中的 setInterval 函数每隔（在这种情况下）在其第二个参数中设置的 8 秒运行一个函数。调用函数时，您会注意到没有括号。

您还可以像这样调用匿名函数：

```
setInterval(function(){alert("Hello")},3000); 
```

如果您希望能够通过点击事件来控制它，您可以执行以下操作：

```
var loop;
$(elem).click(function(){
    loop = setInterval(fades,8000);
});

function fades(){
    $(".feature1").fadeOut(1000);
    $(".feature2").fadeIn(1000);
    $(".feature3").fadeOut(1000);
} 
```

你可以这样停止循环：`clearInterval(loop);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T06:15:50.227

[http://jsfiddle.net/F4X46/1/](http://jsfiddle.net/F4X46/1/)

```
var i = 1,
    t;

function makeTO() {
    t = setTimeout(function() {
        console.log('test');
        if (i++ === 3) {
            i = 1;
        }
        $(".link" + i).trigger('click');
    }, 8000);
}
$(".link1").click(function() {
    i = 1;
    clearTimeout(t);
    makeTO();
    $(".feature1").fadeIn(1000);
    $(".feature2").fadeOut(1000);
    $(".feature3").fadeOut(1000);
});

$(".link2").click(function() {
    i = 2;
    clearTimeout(t);
    makeTO();
    $(".feature1").fadeOut(1000);
    $(".feature2").fadeIn(1000);
    $(".feature3").fadeOut(1000);
});

$(".link3").click(function() {
    i = 3;
    clearTimeout(t);
    makeTO();
    $(".feature1").fadeOut(1000);
    $(".feature2").fadeOut(1000);
    $(".feature3").fadeIn(1000);
});
makeTO(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T07:10:06.250

我已经尝试过一些东西。请参阅**[工作演示](http://jsfiddle.net/xe5Ju/)**

### HTML

```
<a class="link1" href="javascript:void(0)"> Link1 </a>
<a class="link2" href="javascript:void(0)" > Link2 </a>
<a class="link3" href="javascript:void(0)" > Link3 </a>
<div class="feature1">Feature1 div</div>
<div class="feature2">Feature2 div</div>
<div class="feature3">Feature3 div</div>​ 
```

### CSS

```
a { font:bold 13px verdana; padding:4px}
div { border:1px solid grey; padding:3px;width:150px;height:90px;margin:3px;}
.feature1 { background-color: #f00; }
.feature2 { background-color: #0f0; }
.feature3 { background-color: #00f; }​ 
```

### jQuery

```
(function () {
    var i =0;
    var doFade= function() {        
        i = (i%3)+1;
        //console.log(i);
        $("div[class^=feature]").fadeOut(1000);
        $('.feature'+i+'').fadeIn(1000);                
    };
    doFade();
    window.setInterval(doFade, 2000);
})();​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:29:51.080

对于 jQuery 中的计时问题，请使用插件[jquery-timing](http://creativecouple.github.com/jquery-timing/)。

在 jQuery 中选择所有 .feature*，然后：

```
$(".feature1,.feature2,.feature3").repeat()
    .each($).fadeIn(1000).siblings().fadeOut(1000).wait(3000).all() 
```

好的。不是吗？

看到这个在[jsfiddle](http://jsfiddle.net/creativecouple/7avaJ/)上运行。

# python - Django 选择表单字段的标签

> ID：11981526
> 
> 赞同：10
> 
> 时间：2012-08-16T06:04:32.683
> 
> 标签：python, django, forms, select, labels

我正在使用 ModelForms 为网站制作表单，但我希望更好地控制“选择”框中显示的文本。

示例模型可能如下所示

```
class Test(models.Model)
    ID = IntegerField()
    Label = CharacterField()
    recipient = ForeignKey(Person)
    product = ForeignKey(Product) 
```

所以，我的问题是，当我制作这个模型的modelForm时，外键字段被制作成选择字段，在底层值中有对象的主键，显示的文本是来自对象`__unicode__()`方法的文本. 在这种情况下，只显示产品 ID（这是一个序列号，对用户没有意义）。我希望能够制作像“[序列]，[产品名称]”这样的自定义标签。

我似乎在官方 Django 文档上找不到任何指针，所以我想知道是否有人会提供帮助？:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T06:31:11.990

查看[有关 ModelChoiceField 的 Django 文档](https://docs.djangoproject.com/en/dev/ref/forms/fields/)。引用：

> `__unicode__`将调用模型的方法来生成对象的字符串表示形式，以用于字段的选择；提供自定义表示，子类 ModelChoiceField 并覆盖 label_from_instance。此方法将接收模型对象，并应返回适合表示它的字符串。例如：
> 
> ```
> class MyModelChoiceField(ModelChoiceField):
>     def label_from_instance(self, obj):
>         return "My Object #%i" % obj.id 
> ```

# c# - 如何根据组合框中的值填充数据网格

> ID：11981534
> 
> 赞同：0
> 
> 时间：2012-08-16T06:05:33.083
> 
> 标签：c#, .net, wpf, xaml, data-binding

我面临一个问题（可能非常基本）。我有一个组合框 1，它填充了早期控件的值（比如 1、2、3、4、5）。

现在基于从组合框1 中选择一个值，我想填充数据网格的列。

现在，数据网格有 4 列，一列 DataGridcheckboxcolumn（值设置为默认选中），一列 DataGridtextboxcolumn1 用于从组合框 1（最重要的部分）自动填充，一列 DataGridTextBoxColumn2（设置为默认值）和一列 DataGridComboBoxColumn（设置为默认值AVS_DB 来自 AVS、DB、AVS_DB）。

我的问题非常基本。

如何获取填充的数据网格中的值。

xaml 和代码隐藏如下：

```
<DataGrid Name="dtgQCNumbers" Width="400" AutoGenerateColumns="False" 
          Grid.ColumnSpan="2" Height="100" Grid.RowSpan="5" Grid.Row="6" 
          SelectionChanged="dtgQCNumbers_SelectionChanged" 
          Grid.Column="1" Margin="3,10,125,15">
    <DataGrid.Columns>
        <DataGridCheckBoxColumn Header="Enter_Choice" Width="100" 
            Binding="{Binding Path=DataGridCheckBox_Option}" />
        <DataGridTextColumn Header="QC_ID" Width="100" 
            Binding="{Binding Path=DataGridTextBox_QCList1}" />                               
        <DataGridTextColumn Header="Summary" Width="100"
            Binding="{Binding Path=DataGridTextBox_QCSummary}" />
        <DataGridComboBoxColumn Header="ControlOption" Width="100"
            SelectedItemBinding="{Binding Path=DataGridComboxBox_Control}">
            <DataGridComboBoxColumn.ItemsSource>
                <col:ArrayList>
                    <sys:String>AVS</sys:String>
                    <sys:String>DB</sys:String>
                    <sys:String>AVS_DB</sys:String>
                </col:ArrayList>
            </DataGridComboBoxColumn.ItemsSource>
        </DataGridComboBoxColumn>
        </DataGrid.Columns>
            grid.ColumnWidth = new DataGridLength(100);
        </DataGrid> 
```

*填充 ComboBox 的代码（在数据网格之前）是：*

```
private void ddlCR_SelectionChanged(object sender, SelectionChangedEventArgs e)
  {
     btnSubmit.IsEnabled = true;
     ClearStatusMessages();
     if (ddlCR.SelectedIndex > 0)
     {
        PopulateQCIdList();
     }
  } 
```

现在 PopulateQCIdList() 应该填充 DataGrid 列（所有 4 列、3 个默认值和从我们从组合框中选择的值驱动的值）

代码隐藏是我想知道在填充 ComboBox 后填充数据的内容，即我想知道如何使用 PopulateQCIdList() 方法准确填充 DataGrid。

如果我错过任何信息，请编辑/让我知道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:50:22.943

我不知道你到底做了什么。但是您有两个选择：
选项 1：定义一个类，该类将包含您的数据，具有有意义的属性名称，用于您的布尔值、字符串、字符串、枚举值。此类应实现 INotifyPropertyChanged。然后将您的 DataGrid 绑定到这些对象的列表。
选项 2：定义一个数据库，（我使用 SQL Server Compact Edition 3.5，您可以使用 Access、MySQL ......有很多 DB），然后将 DataGrid 绑定到这个 DB。

# ios - 通过水平滚动动作增加 UIView 的宽度？

> ID：11981537
> 
> 赞同：0
> 
> 时间：2012-08-16T06:06:06.327
> 
> 标签：ios, ipad, uiview, uiscrollview

只是好奇是否有人有教程或只是支持我上面的问题的想法。当您在桌面中水平增加 Web 浏览器的窗口大小时，您可以这样想。

最重要的是，如果苹果批准了这一点。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:15:20.937

使用`UIScrollView`而不是`UIView`. 你可以设置`ScrollView's` `Content Size`..

```
UIScrollView *scrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(0.0, 0.0, 320.0, 400.0)];
[scrollView setBackgroundColor:[UIColor redColor]];
[self.view addSubview:scrollView];
//Set its contentSize According to you
[scrollView setContentSize:CGSizeMake(640.0, 400.0)]; 
```

# java - 如何在不改变 ImageView 宽度的情况下设置图像的宽度（在 ImageView 中）？

> ID：11981538
> 
> 赞同：0
> 
> 时间：2012-08-16T06:06:09.867
> 
> 标签：java, android, imageview, android-imageview

我要做的是在不影响 ImageView 宽度的情况下更改 ImageView 中图像的宽度。

```
 ----------------------------------------------------------------
    |                                                              |
    |                                                              |
    |         ----------------------------------------------       |
    |         |                                            |       |
    |         |                                            |       |
    |         |    this is the image( change its width)    |       |
    |         |                                            |       |
    |         ----------------------------------------------       |
    |                                                              |
    |      this is imageView the width mustnt change               |
    ---------------------------------------------------------------- 
```

我怎样才能做到这一点？请帮忙？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T06:12:40.897

您可以为此使用 ScaleType。像，

```
imgV.setScaleType(ImageView.ScaleType.CENTER_CROP); 
```

您也可以指定 Padding 属性。

查看它可能对您有帮助的链接。

[Android ImageView调整父级高度和适配宽度](https://stackoverflow.com/questions/5554682/android-imageview-adjusting-parents-height-and-fitting-width)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:09:32.053

ImageView 和 image 没有区别。为了在 Android 设备中显示图像，我们使用 ImageView。如果您想在某物的中心显示图像，则使用一些布局包装图像视图，并将图像设置在该布局内，并在您需要的所有边上添加一些填充。

# android - 适用于 Android 2.3 的日历 API

> ID：11981542
> 
> 赞同：0
> 
> 时间：2012-08-16T06:06:21.763
> 
> 标签：android

我想在我的 android 应用程序中显示用户日历，并添加、删除或修改特定日期的事件。我搜索了这个，我得到了 android 4 的答案。所以如果有人有关于这个的教程（android 2.3）？或者关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T07:22:33.653

在 4.0 之前的 Android 版本上没有使用日历的官方 API。您可以使用以下提供者

```
content://com.android.calendar/calendars 
```

但不能保证它适用于所有设备。此日历正在与 Google 同步。[您可以在此链接](http://code.google.com/p/android-calendar-provider-tests/source/browse/trunk/src/com/androidbook/androidcalendar/CalendarActivity.java)以及[此](http://www.developer.com/ws/android/programming/Working-with-the-Android-Calendar-3850276.htm)链接上找到更多详细信息

# c# - 使用序列化器解析 XML 结构

> ID：11981543
> 
> 赞同：1
> 
> 时间：2012-08-16T06:06:28.450
> 
> 标签：c#, .net, wpf, xml, serialization

我想使用 XML Deserializer 来解析以下 XML 结构

```
 <function_type start_key="02" key_index_reverse="true" key_index="1" key_index_length="1" key="03" name ="N/A" id="N/A" transmission="rx">
    <data_type size="1">STX</data_type>
    <data_type size="1">Respond</data_type>
    <data_type size="2" unbounded="true" end="03">Function Code
      <convert>30,IND RESPOND</convert>
      <convert>31,GRP RESPOND</convert>
      <convert>32,PATTERN RESPOND</convert>
      <convert>33,F PATTERN RESPOND</convert>
      <convert>34,DIMMING RESPOND</convert>
      <data_type size="2" address="true">ADDRESS</data_type>
      <data_type size="4" decimal="true">CIRCUIT NUMBER</data_type>
      <data_type size="1">Value
        <convert>30,OFF</convert>
        <convert>31,ON</convert>
      </data_type>
    </data_type> 
```

变成这样的东西，我可以在我的应用程序中使用：

```
[XmlRoot("function_type")]
public class FunctionType
{
    [XmlAttribute("name")]
    public string Name { get; set; }

    [XmlAttribute("id")]
    public string ID { get; set; }

    [XmlAttribute("size_total")]
    public int TotalSize { get; set; }

    [XmlAttribute("key")]
    public string Key { get; set; }

    [XmlAttribute("transmission")]
    public string Transmission { get; set; }

    [XmlElement("data_type")]
    public List<AttributeType> Types { get; set; }

    [XmlAttribute("key_index")]
    public int KeyIndex { get; set; }

    [XmlAttribute("key_index_length")]
    public int KeyIndexLength { get; set; }

    [XmlAttribute("key_index_reverse")]
    public bool KeyIndexReverse { get; set; }

    public FunctionType()
    {
        Types = new List<AttributeType>();
    }
}

public class AttributeType
{
    [XmlAttribute("size")]
    public int Size { get; set; }

    [XmlAttribute("decimal")]
    public bool IsDecimal { get; set; }

    [XmlAttribute("start_key")]
    public string StartKey { get; set; }

    [XmlAttribute("key")]
    public string Key { get; set; }

    [XmlAttribute("address")]
    public bool IsAddress { get; set; }

    [XmlAttribute("unbounded")]
    public bool IsUnbounded { get; set; }

    [XmlAttribute("end_key")]
    public int EndKey{ get; set; }

    [XmlElement("convert")]
    public List<ConversionType> Converts { get; set; }

    [XmlText]
    public string Value { get; set; }
}

public class ConversionType
{
    [XmlText]
    public string ConvertValue { get; set; }
}
public static class StringExtensions
{
    public static T XmlDeserialize<T>(this string s)
    {
        var locker = new object();
        var stringReader = new StringReader(s);
        var reader = new XmlTextReader(stringReader);
        try
        {
            var xmlSerializer = new XmlSerializer(typeof(T));
            lock (locker)
            {
                var item = (T)xmlSerializer.Deserialize(reader);
                reader.Close();
                return item;
            }
        }
        catch
        {
            return default(T);
        }
        finally
        {
            reader.Close();
        }
    }
} 
```

我遇到的问题是我在 XML 文件中有一些初始内容，我必须反序列化 data_type 标记内的 data_type 标记。

如何规避这个问题，而不必定义另一个名称不同的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:40:30.937

将属性添加到您的`AttributeType`班级

```
[XmlElement("data_type")]
public List<AttributeType> Types { get; set; } 
```

结果

```
public class AttributeType
{
    [XmlAttribute("size")]
    public int Size { get; set; }

    [XmlAttribute("decimal")]
    public bool IsDecimal { get; set; }

    [XmlAttribute("start_key")]
    public string StartKey { get; set; }

    [XmlAttribute("key")]
    public string Key { get; set; }

    [XmlAttribute("address")]
    public bool IsAddress { get; set; }

    [XmlAttribute("unbounded")]
    public bool IsUnbounded { get; set; }

    [XmlAttribute("end_key")]
    public int EndKey { get; set; }

    [XmlElement("convert")]
    public List<ConversionType> Converts { get; set; }

    [XmlElement("data_type")]
    public List<AttributeType> Types { get; set; }

    [XmlText]
    public string Value { get; set; }
} 
```

# c++ - 在 C++ 中创建互斥锁柜类

> ID：11981544
> 
> 赞同：3
> 
> 时间：2012-08-16T06:06:28.983
> 
> 标签：c++, multithreading, pthreads, mutex

这是我到目前为止所做的：

```
class mutexLocker
{
    private:
    /* Declaration of a Mutex variable `mutexA`. */
    pthread_mutex_t &mutexA;

    /* `mutexStatus` holds the return value of the function`pthread_mutex_lock `. 
    This value has to be returned to the callee so we need to preserve it in a class
    variable. */
    int             mutexStatus;

    /* We need to decide how to deal with the situation when one thread tries to lock then
    mutex repeatedly. If the mutex is of type recursive, then there won't be any problem for 
    sure, but otherwise the case may result in a deadlock. */
    pthread_t       calleeThreadId;

    public:
    /* Constructor attempts to lock the desired mutex variable. */
    mutexLocker (pthread_mutex_t argMutexVariable, pthread_t threadId) 
    : mutexA (argMutexVariable, calleeThreadId)
    {
        /* Return value is needed in order to know whether the mutex has been 
        successfully locked or not. */
        int mutexStatus = pthread_mutex_lock (&argMutexVariable);
    }

    /* Since the constructor can't return anything, we need to have a separate function
    which returns the status of the lock. */
    int getMutexLockStatus ()
    {
        return mutexStatus;
    }

    /* The destructor will get called automatically whereever the callee's scope ends, and
    will get the mutex unlocked. */
    ~mutexLocker ()
    {
        pthread_mutex_unlock (&mutexA);
    }
}; 
```

**在 DIY 互斥锁储物柜类中还应该提供哪些其他功能？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T06:24:59.883

你有点倒退了。你编写代码来解决你面临的问题。不要编写代码来解决你没有的问题。“[你不需要它](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)”是一个很好的原则。

除非您有可以用它们解决的问题，否则不应提供其他功能。鉴于您没有提到任何问题，我认为您没有这样的问题。因此，不应添加其他功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T06:41:14.077

我完全同意 Slavik81 关于不创建没有用例的功能的评论。

尽管如此，参考锁类的 Boost 实现可能是了解其接口的常见要求的一个很好的起点：http: [//www.boost.org/doc/libs/1_42_0/doc/html/thread/synchronization.html#线程同步锁](http://www.boost.org/doc/libs/1_42_0/doc/html/thread/synchronization.html#thread.synchronization.locks)

在标准 C++11 方面介绍`std::lock_guard`：[http ://en.cppreference.com/w/cpp/thread/lock_guard](http://en.cppreference.com/w/cpp/thread/lock_guard)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T07:03:54.263

首先，Graeme 和 Slavik81 的答案都非常好 (+1)。

现在，至于要添加的内容：

*   您可能需要额外的错误支持，具体取决于您处理错误的方式。例如，如果您的团队在锁失败时抛出异常，则该类可以创建并抛出异常。
*   作为诊断，您可能希望验证客户端测试获取成功（例如`assert`，如果他们从未验证锁定成功，则在 dtor 中）。
*   您可能需要“重试”采集功能。最好在抛出异常之前重试，imo。就个人而言，我只是认为这是程序员的错误`EBUSY`——不要持有长锁！
*   还要把你的东西藏`pthread_mutex_t`在课堂上——禁止复制、分配等等。把它交给你的储物柜。
*   一些客户可能想要一种简单的方法来测试成功，而不是评估状态。取决于你如何使用它。
*   如果您没有获得锁，请不要在 dtor 中解锁
*   检查解锁结果。确定这种情况下的错误处理。

也许更重要的是 - 确定要*删除*的内容：

*   没有复制。显式删除复制 ctor 表达了意图。
*   删除`operator=`——表达意图。
*   删除动作
*   `calleeThreadId`：删除，除非你觉得有用。具体来说，考虑一下你将如何实际实现你提出的这个错误检测——储物柜似乎是存放数据的错误位置，imo。我更喜欢将这些储物柜保持在最小、集中和简单的位置。
*   加倍努力：防止堆分配；例如，删除运算符 new/delete 的主要变体。
*   如果您不重试，则状态可能为`const`.
*   threadID，如果您决定保留它，也可以是`const`.

最后，通过引用传递互斥锁（尽管我认为这是一个错字）。

# entity-framework - 自引用实体不可为空

> ID：11981547
> 
> 赞同：1
> 
> 时间：2012-08-16T06:06:44.593
> 
> 标签：entity-framework, mapping, code-first

在可能的情况下，我想使用这个 Person 类，它不是 ef 代码中名为 RelatedPerson 的可空属性：

```
public class Person
{
    public virtual int Id { get; set; }
    // ... other properties

    [Required]
    public virtual Person RelatedPerson { get; set; }
} 
```

现在，我如何添加映射来定义这种关系，并将第一条记录作为 Pesron 表的根，ID 是一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:27:46.383

您不能将 a 添加`RequiredAttribute`到自引用属性。它不会验证没有 RelatedPerson 的根实体。

您可以通过保存和更新功能中的业务逻辑强制要求它。

# android - 如何“喜欢”Facebook 墙上的帖子

> ID：11981548
> 
> 赞同：-1
> 
> 时间：2012-08-16T06:06:47.143
> 
> 标签：android, facebook, facebook-graph-api, facebook-like

我有一个集成 Facebook 的 android 应用程序，用于在 Facebook 墙上发布帖子。现在我想**以编程方式喜欢我的帖子。我的**搜索结果显示为此目的需要**OBJECT ID**或**COMMENT ID**。如何获得这个？我正在使用 Facebook Graph Api。我知道不可能通过 Graph API来**“喜欢”页面。**我的帖子到墙上的代码是

```
 facebook.dialog(activity, "feed", bundle, new DialogListener() {
            @Override
            public void onComplete(Bundle values) {

            }

            @Override
            public void onFacebookError(FacebookError error) {

            }

            @Override
            public void onError(DialogError e) {
                            }

            @Override
            public void onCancel() {
                logoutFacebook();
            }
        }); 
```

我有什么办法喜欢一个帖子吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:55:13.383

假设您拥有`publish_stream`权限并且您拥有`POST_ID`想要为其创建类似的权限，那么只需执行以下操作：

```
mAsyncRunner.request("/POST_ID/likes", null, "POST", new likeListener(), null); 
```

然后`likeListener`可以确定它是否成功。如果成功，Facebook 在响应中返回 true，否则返回 false。 [来源](https://developers.facebook.com/docs/reference/api/post/)

如果你没有，`POST_ID`那么你必须以某种方式得到它。您应该更具体地确定您想要喜欢的帖子类型。例如，如果您刚刚使用我们的 SDK 在某人的墙上创建了一个帖子，如果成功，我们会`onComplete`在您的上述代码中的方法中返回该帖子 ID `values`。保存该帖子 ID 并将其用作`POST_ID`我之前给您的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:36:37.203

You cannot force users to like your application(due to spamming reasons). The only way you can get them to like your page/app is embedding the like fbml code or iframe in a web view. That documentation is in place to like a friends wall post or comment or photo, as those are the types of items you can like for a user, in case for example you were writing a Facebook client. If that is what you are trying to do, don't send the app_id as you are doing, but send the post id of the users post.

# java - 无法在 Chrome 中加载图像资源

> ID：11981557
> 
> 赞同：1
> 
> 时间：2012-08-16T06:07:32.820
> 
> 标签：java, php, image, tomcat

我在 chrome 中遇到了一个奇怪的问题。我从服务器获取图像，它在 Firefox 中运行良好，但在 chrome 中，图像加载一次，然后显示为损坏的图像。

在 Chrome 的控制台中，我收到以下消息：

```
Resource interpreted as Image but transferred with MIME type text/html: "http://46.137.249.133:8080/Smart/Request/query.htm?ReqType=SessionUnawareAttachmentDownloadReqType&Thumbnail=Yes&AttachmentRowID=344929138455741006"
GET http://46.137.249.133:8080/Smart/Request/query.htm?ReqType=SessionUnawareAttachmentDownloadReqType&Thumbnail=Yes&AttachmentRowID=344929138455741006 
```

我还检查了 mime 类型，但它的图像/jpeg。这是输出`getimagesize()`

```
Array
(
    [0] => 289
    [1] => 202
    [2] => 2
    [3] => width="289" height="202"
    [bits] => 8
    [channels] => 3
    [mime] => image/jpeg
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:11:24.713

在 query.html 中，在输出任何内容之前（理想情况下，在脚本的开头），添加：

```
header('Content-Type: image/jpeg'); 
```

它会告诉您的浏览器返回的内容是 JPEG 图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T06:17:47.890

这是来自的输出`curl --verbose <your-url>`，您可以看到您的 Web 服务器（在端口 8080 上）将文件宣传为`text/html`.

```
< HTTP/1.1 200 OK
< Server: Apache-Coyote/1.1
[...]
< Content-Disposition: attachment; filename="Hall2.JPG"
< Content-Type: text/html;charset=ISO-8859-1 
```

`Content-Type`您可以通过在每个 HTTP 响应中添加标题行来设置正确的媒体类型来解决此问题。

在 PHP 中，使用`header`函数来完成，例如：

```
header('Content-Type: image/jpeg'); 
```

Java Servlet 页面非常相似：

```
HttpServletResponse res;
res.setContentType("image/jpeg"); 
```

# ssrs-2008 - SSRS 渲染问题

> ID：11981562
> 
> 赞同：0
> 
> 时间：2012-08-16T06:08:23.053
> 
> 标签：ssrs-2008, reporting-services

我们的一些报告存在问题，它们在第一次生成时无法正确呈现页面的最右侧，但如果您随后刷新或导出到其他媒体（pdf ，优秀）。

例如，当我第一次渲染我们的一个报告时，最右边的部分被截断，如下所示：

![在此处输入图像描述](../Images/e647585c409c87562f42a67b1fddc2f0.png)

刷新页面后，它会正确呈现：

![在此处输入图像描述](../Images/4a40034426d5c7e5c8bc83f72167aa50.png)

有谁知道是什么原因造成的以及我能做些什么来解决它？我尝试重新设置页面尺寸，甚至重新构建 tablix 控件，但没有任何效果 - 我不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:08:15.757

对于 IE 8，请查看此页面。它建议在 Report Viewer 控件中设置 AsyncRendering="true"。

[http://social.msdn.microsoft.com/Forums/eu/sqlreportingservices/thread/bffa2c8f-dc88-410c-a268-f3e33e0405f2](http://social.msdn.microsoft.com/Forums/eu/sqlreportingservices/thread/bffa2c8f-dc88-410c-a268-f3e33e0405f2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-27T22:51:18.583

我有同样的问题，但我的问题原来是 Lync。如果您有 Lync，它会在电话号码后添加一个额外的图标。

这不会在您制作报告时显示，也不会在报告首次打开时显示。它仅在您将鼠标悬停在报告上时才会弹出。在我将鼠标悬停之前，我的表格看起来很好，然后最右边的列在移动时被切断。

# web-applications - 可以用 C#、C++、Fortran、Pascal 等制作 Web 应用程序吗

> ID：11981567
> 
> 赞同：1
> 
> 时间：2012-08-16T06:09:03.643
> 
> 标签：web-applications, webserver, native

（这更像是一个通用的高级问题）

我想询问有关使用通常不用于制作 Web 应用程序的语言制作 Web 应用程序（使用 HTML、Ajax、jquery 和其他一些组件）的问题。

例如，是否可以用 C++ 制作 Web 应用程序，如果可以，C++ 代码如何与应用程序的其余部分集成？

是否可以使用例如 C++ 和 PHP 的组合？

有什么理由说明这将是一个好主意（例如，对于商业销售的应用程序？）或一个坏主意（例如，可能需要努力或性能？）...？

任何指向书籍或在线材料的指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T20:49:52.490

我相信您可以使用任何平台/语言进行 Web 开发，只要它们提供必要的功能。

Web 流程包括几个步骤：

1.  侦听客户端（主要是浏览器）发送请求的端口（默认为 :80）
2.  做点什么。访问数据库，与某处交谈。玩的开心。
3.  将输出发送回客户端

因此，如果您可以使这些规范变得舒适，那么您可以使用任何语言/平台。

或者，您可以在当前使用的 Web 服务器（如 Apache、Nginx、IIS 等）和您的 Pascal 应用程序之间建立一座桥梁。这是大多数开发人员会做的事情。

我目前在一个应用程序中通过命令行使用 PHP、Java 应用程序、通过命令行使用 Python。我喜欢命令行的工作方式，简单而快速。我们将在应用程序中添加另一台带有 Windows 的服务器，以实现特定于 Windows 的功能。所以... 如果你有足够的绳索，你可以把任何东西绑在一起。

如果我错了，请纠正我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T10:48:04.640

是的你可以。有图书馆可以让你的生活变得轻松。试试[CppWeb](http://sourceforge.net/p/cppweb) C++ 库。这可能是一个好的开始：它简单、免费、开源、轻量且可移植。对于大型/高级项目，请尝试[Wt](http://www.webtoolkit.eu/)。

# objective-c - 如何使用 OCMock + OCUnit 获得 Xcode 4.4.1 来识别我的项目的头文件？

> ID：11981568
> 
> 赞同：0
> 
> 时间：2012-08-16T06:09:04.217
> 
> 标签：objective-c, ios, xcode

我按照以下步骤操作：http: [//ocmock.org](http://ocmock.org)

还有这些： [http ://twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/](http://twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/)

虽然我无法成功地让 twobitlabs 指令的第 4 步工作。意思是“单击构建设置选项卡并将捆绑加载程序设置设置为$（BUILT_PRODUCTS_DIR）/MyExistingApp.app/MyExistingApp”......当我这样做时，我得到：

```
Ld /Users/patrick/Library/Developer/Xcode/DerivedData/Notes_and_Clefs-fpzvpdfkkkjuynefaqeajfdiznbp/Build/Products/Debug-iphonesimulator/UnitTests.octest/UnitTests normal i386
cd "/Users/patrick/coding/objective_c/vms/Notes and Clefs"
setenv MACOSX_DEPLOYMENT_TARGET 10.6
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -bundle -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/patrick/Library/Developer/Xcode/DerivedData/Notes_and_Clefs-fpzvpdfkkkjuynefaqeajfdiznbp/Build/Products/Debug-iphonesimulator "-L/Users/patrick/coding/objective_c/vms/Notes and Clefs/usr/lib" -F/Users/patrick/Library/Developer/Xcode/DerivedData/Notes_and_Clefs-fpzvpdfkkkjuynefaqeajfdiznbp/Build/Products/Debug-iphonesimulator -F/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/Developer/Library/Frameworks -F/Applications/Xcode.app/Contents/Developer/Library/Frameworks -filelist "/Users/patrick/Library/Developer/Xcode/DerivedData/Notes_and_Clefs-fpzvpdfkkkjuynefaqeajfdiznbp/Build/Intermediates/Notes and Clefs.build/Debug-iphonesimulator/UnitTests.build/Objects-normal/i386/UnitTests.LinkFileList" -mmacosx-version-min=10.6 -bundle_loader "\"/Users/patrick/Library/Developer/Xcode/DerivedData/Notes_and_Clefs-fpzvpdfkkkjuynefaqeajfdiznbp/Build/Products/Debug-iphonesimulator/Notes\\ and\\ Clefs.app/Notes\\ and\\ Clefs\"" -Xlinker -objc_abi_version -Xlinker 2 -force_load "/Users/patrick/coding/objective_c/vms/Notes and Clefs/usr/lib/libOCMock.a" -ObjC -fobjc-link-runtime -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -lOCMock -framework SenTestingKit -framework UIKit -framework Foundation -o /Users/patrick/Library/Developer/Xcode/DerivedData/Notes_and_Clefs-fpzvpdfkkkjuynefaqeajfdiznbp/Build/Products/Debug-iphonesimulator/UnitTests.octest/UnitTests

ld: file not found: "/Users/patrick/Library/Developer/Xcode/DerivedData/Notes_and_Clefs-fpzvpdfkkkjuynefaqeajfdiznbp/Build/Products/Debug-iphonesimulator/Notes\ and\ Clefs.app/Notes\ and\ Clefs"
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

然而，当我在我的终端中复制/粘贴该路径时，它肯定存在..正如您在此处看到的：

```
>ls -l /Users/patrick/Library/Developer/Xcode/DerivedData/Notes_and_Clefs-fpzvpdfkkkjuynefaqeajfdiznbp/Build/Products/Debug-iphonesimulator/Notes\ and\ Clefs.app/Notes\ and\ Clefs
-rwxr-xr-x  1 patrick  staff  1862424 Aug 15 22:42 /Users/patrick/Library/Developer/Xcode/DerivedData/Notes_and_Clefs-fpzvpdfkkkjuynefaqeajfdiznbp/Build/Products/Debug-iphonesimulator/Notes and Clefs.app/Notes and Clefs 
```

所以，我不知道我的文件中是否有空格是否有问题......

如果我跳过这一步，当我运行测试时，我会收到臭名昭著的错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_Question", referenced from:
      objc-class-ref in UnitTests.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

test.m 文件似乎不理解我正在测试的实际类的标头是什么，尽管我在 test.h 的标头中使用了 #import "Question.h" ...（另外，将其直接添加到.m 什么都不做）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:05:00.123

仔细查看堆栈跟踪时，我突然想到了..“.../Debug-iphonesimulator/Notes\ and\ Clefs.app/Notes\ and\ Clefs\”

\'s不可能是好的！我将 Bundle Loader 更改为没有反斜杠的路径，现在它可以工作了！万岁！

# ios - iPhone 静态数据调用

> ID：11981571
> 
> 赞同：0
> 
> 时间：2012-08-16T06:09:24.860
> 
> 标签：ios, ios5, storage

我正在开发一个应用程序，该应用程序每次运行时都需要从文件中调用一些信息。此信息将被加载到三个数组中，两个带有文本，一个带有 int。正在加载的信息（随后在应用程序关闭时写回）可能会在某个阶段变长。

我正在研究保存和调用它的最佳文件格式是什么？出于各种其他原因，如果可能的话，我想尽量避免使用数据库。

我知道我可以使用标准文本文件，然后用一些东西分隔每个段，但我不确定如何在几行上进行分隔。例如，在找到分隔符之前，它可能是文本文件中的 3 或 4 行。

我以前在其他语言中使用过 XML，但 IOS 似乎不支持本机，或者我错过了什么？（这可能是我的首选）但我不知道如何实现。

最后，我知道 plist 在 iOS 上被大量使用，但这些似乎更多地用于设置和比我想要的更少的数据量，还是我也错了？

总的来说，这是存储和调用此类信息的最佳格式，或者如果我没有提到的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:21:13.523

查看文档中的 NSDictionary - (BOOL)writeToFile:(NSString *)path atomically:(BOOL)flag 和 - (BOOL)writeToURL:(NSString *)path atomically:(BOOL)flag。方法和读取对应方都将 xml 格式文件写入磁盘。您会在扩展名为 .plist 的文件中找到相同的格式，例如您的应用程序库/首选项文件夹中的首选项文件。

# javascript - 使用 CoffeeScript 以编程方式检查复选框

> ID：11981577
> 
> 赞同：3
> 
> 时间：2012-08-16T06:09:49.890
> 
> 标签：javascript, ruby-on-rails, validation, coffeescript

如何以编程方式检查 Coffeescript 中的复选框？

我知道在 Javascript 中，我可以使用它：

```
myElement.checked = true 
```

我可以在 Coffeescript 中执行以下操作吗？

```
myElement.checked "true" 
```

我已经尝试过上述方法，但它对我不起作用。

在这方面的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T06:18:21.227

**更新：**

```
myElement.checked = "yes";

myElement.checked = null;// for unchecking 
```

所以，对于[你的情况](http://jsfiddle.net/mrobin/myZwM/1/)，

`a.checked = b.checked; //i.e. check a if b is checked`

[这里的例子](http://jsfiddle.net/mrobin/D9N87/1/)

* * *

```
//CoffeeScript
a = {}
a.b = 10
alert a.b 
```

编译为..

```
//javascript
var a;
a = {};
a.b = 10;
alert(a.b); 
```

**但是**，`a.b 10`编译为`a.b(10)`javascript，这不是您想要的。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-11T10:51:11.107

你`myElement`是 jQuery 对象并且你想要处理 DOM 元素：

```
// HTML
<input class="toggle" type="checkbox"/>

//coffeescript

$('.toggle')[0].checked = true 
```

# c - “#pragma 部分有什么用 “在 C 中？

> ID：11981580
> 
> 赞同：10
> 
> 时间：2012-08-16T06:09:58.777
> 
> 标签：c, pragma

在 C 中有什么用`"#pragma section <XYZ>"`？

我遇到了使用以下类型的 C 代码文件：-

```
#define XYZ "ITEM 26.G03"

#pragma section <XYZ> 
```

其中 XYZ 是： `#define XYZ "ITEM 26.G03"`

我需要一些关于使用的解释`"#pragma section"`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T06:48:30.620

该`#pragma`指令是特定于实现的指令，它是向编译器提供附加信息的标准方式。该指令具有以下形式：

```
#pragma name 
```

如果预处理器识别出指定的“名称”，它将执行它们所代表的任何操作，或将信息传递给编译器。如果 c 实现不支持“名称”，则**忽略它**。

例如**gcc 编译器接受**[此处](http://gcc.gnu.org/onlinedocs/gcc/Pragmas.html)列出的编译指示列表。

对于， **gcc**`#pragma section`的文档说：

 **> section ("section-name") 通常，编译器将它生成的代码放在文本段中。但是，有时您需要额外的部分，或者您需要某些特定功能出现在特殊部分中。section 属性指定函数位于特定的部分中。例如，声明：
> 
> ```
>  extern void foobar (void) __attribute__ ((section ("bar"))); 
> ```
> 
> 将函数`foobar`放在 bar 部分。
> 
> 某些文件格式不支持任意节，因此节属性并非在所有平台上都可用。如果您需要将模块的全部内容映射到特定部分，请考虑改用链接器的工具。

更多关于[这里](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#Function-Attributes)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T06:14:56.890

Section 在 .obj 文件中创建一个节。
有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/50bewfwa%28v=vs.80%29.aspx)。

代码和数据在目标文件的各个部分中生成，由链接器组合成可执行文件，并最终位于目标内存的特定位置。默认部分是预定义的并具有某些属性。**节 pragma**可用于更改默认属性、定义新节以及控制将代码和变量分配给特定节以及与链接器命令文件一起控制它们的位置。

`#pragma section`定义一个节类，并且可以选择在该类中定义一个或两个节。节类控制放置在类实例中的变量和代码的寻址和可访问性。**

# c# - 如何在全景项目的 headertemplate 中绑定内容

> ID：11981589
> 
> 赞同：0
> 
> 时间：2012-08-16T06:11:12.943
> 
> 标签：c#, windows-phone-7, xaml, data-binding, datatemplate

我正在研究 Wp7 我在应用程序资源 (App.xaml) 中为全景项目标题创建了一个标题模板：

```
<DataTemplate x:Key="MainPanoramaHeaderTemplate">
                <TextBlock Text="{Binding title}" Margin="0,15,0,0"
                           Name="CurrentTitle"
                               FontSize="37" FontWeight="SemiBold"
                       Foreground="{StaticResource CurrentThemeColorLight}"
                       ></TextBlock>
            </DataTemplate> 
```

我已将此模板应用于全景项目：

```
<controls:Panorama Name="MainPanorama" Margin="0,76,0,0">
            <controls:PanoramaItem
                Name="pano1"
                HeaderTemplate="{StaticResource MainPanoramaHeaderTemplate}">
                <Grid></Grid>
            </controls:PanoramaItem> 
```

在后面的代码中，我尝试绑定 pano1.Datacontext。但什么也没发生？实际上我有一个全景项目，在不同的情况下可以有 2-3 个不同的标题。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T09:07:19.203

尝试：

```
 <DataTemplate x:Key="MainPanoramaHeaderTemplate">
            <TextBlock Text="{Binding}" Margin="0,15,0,0"
                       Name="CurrentTitle"
                           FontSize="37" FontWeight="SemiBold"
                   Foreground="{StaticResource CurrentThemeColorLight}"/>
        </DataTemplate> 
```

和

```
 <controls:PanoramaItem Header="{Binding title}" HeaderTemplate="{StaticResource MainPanoramaHeaderTemplate}"> 
```

它对我有用。让我知道它是否不起作用。我会进一步帮助你:)

注意：我的 ViewModel 中有 title 属性，并使用以下语句将它的引用提供给 mainPage 上的 dataContext

```
 DataContext = App.ViewModel; 
```

# php - mysql获取上一条和下一条记录id

> ID：11981590
> 
> 赞同：1
> 
> 时间：2012-08-16T06:11:15.513
> 
> 标签：php, sql

我正在尝试创建一个“上一个”和一个“下一个”按钮，显示 1 条上一条记录和 1 条下一条记录，由 sql 语句生成。

但是，id 不是简单的 -1 和 +1，这意味着如果这个记录 id 是 40，那么前一个 id 可能是 31，而下一个 id 可能是 43。

是否有任何sql函数可以让我实现这个目标？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T06:14:44.260

选择下一个 id：

```
SELECT * FROM your_table WHERE your_id>$current_id ORDER BY your_id ASC LIMIT 1 
```

选择前一个 id：

```
SELECT * FROM your_table WHERE your_id<$current_id ORDER BY your_id DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:13:27.543

您应该使用限制子句并简单地跟踪要跳过的记录数。

例如，如果您在记录 10，`limit 10,1`将跳过前 10 个并带回一个。“下一步”按钮会将查询更改为`limit 11,1`等等。

只要您知道`order by`（在这种情况下，ID 字段看起来很完美），每次都会以完全相同的顺序返回数据，因此您可以一次可靠地在结果集中向前和向后遍历一行。

从[文档中](http://dev.mysql.com/doc/refman/5.0/en/select.html)截取：

LIMIT 子句可用于限制 SELECT 语句返回的行数。LIMIT 接受一个或两个数字参数，它们都必须是非负整数常量（使用准备好的语句时除外）。

有两个参数，第一个参数指定要返回的第一行的偏移量，第二个参数指定要返回的最大行数。初始行的偏移量为 0（不是 1）：

`SELECT * FROM tbl LIMIT 5,10; # Retrieve rows 6-15`

# glassfish - 构建具有最新更新的 GlassFish RPM？

> ID：11981591
> 
> 赞同：1
> 
> 时间：2012-08-16T06:11:16.900
> 
> 标签：glassfish, glassfish-3, packaging, rpm

为了使软件部署更可靠、更容易，最好使用操作系统的包管理来分发软件。现在我想将 GlassFish 打包为 RPM。

目标： - 构建一次，多次部署 - 使用最新更新打包 GlassFish - 使用插件打包定制的 GlassFish（对于应该在该 GlassFish 上运行的应用程序是必需的）（参见注释 1）

我已经构建了一个 .spec 文件，它解压缩 GlassFish .zip（来自 Oracle）并将其打包到 RPM 中。然后我尝试添加将运行 pkg 工具的 %build 部分。问题在于 GlassFish 的更新管理：它只接受更新到最新版本，因为您无法传递要更新的版本（或者您可以吗？）。

有了这个，就不可能一次又一次地从头开始构建特定版本的 GlassFish RPM，而每次都没有不同的结果（以周/月为单位）。所以这种方法不能用于生成 RPM。

*   我怎么能这样做？
*   这是将 GlassFish 打包为 RPM 的完全错误的方法吗？
*   您会推荐哪种替代分发/包装方法？

注意 1：我倾向于将这些额外的库（插件）打包为另一个 RPM，它依赖于基本的 GlassFish RPM，但我认为这是不可能的，因为安装插件时涉及的文件太多。

也许我应该将此问题更改为“分发 GlassFish 的替代方式”，到目前为止，我看不出有可能按照上述方式进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T15:07:05.487

我不认为这是创建通用 GlassFish RPM 的正确方法，因为它需要删除包管理器，因此无法在安装后添加必要的运行时库（也无需将所有 GlassFish 库打包为 RPM）。

使用 GlassFish RPM 的唯一有用方法是用于特定应用程序的 GlassFish 安装，其中包含所有必要的库（可能还有配置）。

我不会使用它，因为它增加了太多额外的努力，而收益太小。

我继续构建检查和设置脚本，检查环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T18:30:18.850

我创建了一个 GlassFish 安装 tar，其中包含带有答案文件的 Linux 本机安装程序以及所需的任何补丁或配置更改。然后我有一个内置在 RPM 中的 RPM 脚本。在 scriptlet 中，我有命令使用 JDK 的位置和应答文件（-a 选项）运行本机安装程序。就我而言，我使用密码列表运行 remove weak ciphers 命令，禁用 http2，然后进行任何必要的环境更改。

# internet-explorer-9 - facebook auth 和 Ie9 p3p

> ID：11981594
> 
> 赞同：-1
> 
> 时间：2012-08-16T06:11:22.130
> 
> 标签：internet-explorer-9, facebook-authentication

我无法让 facebook 服务器端 oauth 在 ie9 上工作。它在 Firefox 和 chrome 上运行良好。我相信问题在于 IE 而不是信任 iframe。对此的标准解决方案是将一些 P3P 标头添加到 iframe 页面中。但是 ie9 仍然忽略我的 jsession cookie 并且身份验证过程循环。

我在我的 servletfilter 中设置了 p3p 标头

```
res.setHeader("P3P", "CP=\"XXXXX does NOT have a P3P policy\""); 
```

我作为 iframe 的 JSF 页面具有简单的 oauth 登录 url

```
<h:outputLink target="_top" value="http://www.facebook.com/dialog/oauth/"   class="login_btn" >
   <f:param name="client_id" value="XXXXXXXXXXX"></f:param>
   <f:param name="redirect_uri" value="https://apps.facebook.com/myapp/fbauth"></f:param> 
```

我花了几个小时追踪通过 ie9 的流程。我无法让它工作。我已阅读每篇文章并尝试了所有类型的 P3P 代码。

任何帮助都会让我开心。

-lp

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T06:50:17.730

好吧，我修好了。

通过替换重定向网址

至

我累了，不想解释。

只是希望它能拯救别人。

-lp

# javascript-events - 谷歌浏览器扩展简单消息传递错误

> ID：11981606
> 
> 赞同：4
> 
> 时间：2012-08-16T06:12:07.030
> 
> 标签：javascript-events, google-chrome-extension

我正在尝试使用一个消息界面在弹出窗口与背景页面之间传递一条消息（我正在使用类似于 Google 示例中的代码）。

弹出窗口：

```
chrome.extension.sendMessage( {msg: "this is popup's msg"}, function(b){
    alert('this is popups callback func' +b.backgroundMsg);
}); 
```

这就是我在 background.js 中聆听（和回复）的方式：

```
chrome.extension.onMessage.addListener(function(msg, sender, sendResponse) {
    sendResponse({backgroundMsg: "this is background msg"});
}); 
```

现在，当我检查控制台中的所有内容时，消息交换正常，但出现以下错误：

```
Error in event handler for 'undefined': Cannot call method 'disconnect' of null TypeError: Cannot call method 'disconnect' of null
    at chromeHidden.Port.sendMessageImpl (miscellaneous_bindings:285:14)
    at chrome.Event.dispatch (event_bindings:237:41)
    at Object.chromeHidden.Port.dispatchOnMessage (miscellaneous_bindings:250:22) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T15:11:34.720

复制您的代码示例并使用清单和弹出结构填充空白会导致完全正常工作的扩展没有错误。不知道为什么您会收到您共享的错误。试试我的代码，看看你能不能摆脱这个错误。

# 尖端

*   弹出窗口中的警报将导致警报在屏幕上闪烁，然后两者都会在您看到它们之前关闭。最好只登录到控制台进行这样的测试。

* * *

# 例子

## 清单.json

```
{
    "name": "Stackoverflow Message Passing Example",
    "manifest_version": 2,
    "version": "0.1",
    "description": "Simple popup with message passing for Stackoverflow question",
    "browser_action": {
        "default_popup": "popup.html"
    },
    "background": {
        "scripts": ["background.js"]
    }
} 
```

## 背景.js

```
chrome.runtime.onMessage.addListener(function(msg, sender, sendResponse) {
    sendResponse({backgroundMsg: "this is background msg"});
}); 
```

## popup.html

```
<html>
    <head>
        <script src="popup.js"></script>
        <style type="text/css" media="screen">
            body { width: 100px; height: 100px; }
        </style>
    </head>
    <body>
        <p>Check the console</p>
    </body>
</html> 
```

## popup.js

```
chrome.runtime.sendMessage( {msg: "this is popup's msg"}, function(b){
    console.log('this is popups callback func ' + b.backgroundMsg);
}); 
```

* * *

# 运行示例截图

在浏览器窗口打开到 exampley.com 的情况下单击扩展按钮

![在浏览器窗口打开到 exampley.com 的情况下单击扩展按钮](../Images/7223746001200a42390fef39f073fce7.png)

扩展弹出的控制台日志

![扩展弹出的控制台日志](../Images/4947c14a58d4f5dc48299753c4b1ced8.png)

这是我使用的文件的 zip [http://mikegrace.s3.amazonaws.com/stackoverflow/simple-popup.zip](http://mikegrace.s3.amazonaws.com/stackoverflow/simple-popup.zip)

# php - Facebook Php sdk 在服务器端处理？

> ID：11981607
> 
> 赞同：0
> 
> 时间：2012-08-16T06:12:17.170
> 
> 标签：php, facebook-php-sdk

我一直在尝试将 facebook php-sdk 用于我的 web 应用程序，但我无法从 php sdk 可用的代码中满足我的要求。我的防火墙放置在客户端上，因此他们无法在系统上打开 facebook url，只有应用程序服务器可以打开 facebook url。因此，我需要一种方法，使客户端能够在 facebook 上登录和共享，而无需在客户端计算机上将上下文根更改为 facebook，并通过应用程序服务器与 facebook 进行所有交互。我重申我的要求，即客户端机器上的上下文根或 url 永远不应该从 facebook 开始，它可以是来自我的上下文根的查询字符串的一部分（例如，说站点 url 是 www.some-sitename .com，我希望 facebook 显示为“www.some-sitename.com/.../facebook.com”）。

我非常有义务为此提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:19:04.780

不幸的是，这不起作用，因为 Facebook 使用 OAuth 进行身份验证，因此客户端必须短暂访问 Facebook 以完成身份验证并向您的服务器提供生成访问令牌所需的“代码”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:22:28.510

您需要将您的 Web 应用程序作为代理服务器，它可以为 facebook.php 中的任何[代理脚本（如 glype）](http://www.glype.com/)提供服务。但不是因为 facebook 身份验证的工作方式，我不确定它是否可以与 facebook 一起使用。

# sql - CodeIgniter Active Record：忽略某些变量

> ID：11981611
> 
> 赞同：1
> 
> 时间：2012-08-16T06:12:54.487
> 
> 标签：sql, codeigniter, activerecord

我想使用 CodeIgniter 的 Active Record，到目前为止它运行良好。但是，我想将一些变量分配给我希望 CodeIgniter 在生成其 SQL 查询时可以忽略的对象。例如：

```
$this->Objs->Name = 'Eric';
$this->Objs->Age = 27;
$this->Objs->Gender = 'M';
$this->Objs->TempVal = 'This is just for reference purposes'; 
```

我在表中没有完全调用相应`TempVal`的列，所以如果我调用`$this->Objs->save();`（它实现了一个保存自身的基本方法），SQL 查询将包含`TempVal`，这将触发错误。

有没有办法`TempVal`从 SQL 查询中排除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T23:40:03.137

您可以对`CI_DB_active_record`位于系统数据库中的类进行子类化。并修改插入方法以忽略您不想保存的属性。

[这](http://robotslacker.com/2011/05/extending-codeigniters-active-record-class/)向您展示了如何加载它。它需要稍微修改才能加载您的子类`/system/DB.php`

只是为了记录，可能有更好的方法来做你想要完成的事情。

# ios - 在自定义地板图像上映射 GPS 坐标

> ID：11981615
> 
> 赞同：1
> 
> 时间：2012-08-16T06:13:13.080
> 
> 标签：ios, math, map, gps, coordinates

嗯，我有一个地板的图像。我需要做的是获取用户的当前位置并将其显示在地板图像上。我知道我需要将 lat 和 lon 转换为像素并将其指向自定义地图。

我按照这个[将 GPS 坐标转换为坐标平面](https://stackoverflow.com/questions/3588653/convert-gps-coordinates-to-coordinate-plane)。但我无法正确理解它。差远了。可能是因为建筑面积小（不知道能不能小面积开发）。我查了一下其他问题。它只是硬编码。我不想这样做。

因此，如果有人向我提供任何合乎逻辑的想法或代码示例或教程，那将会很有帮助。什么都会好的。提前致谢！！:-)

```
lat = 12.875538;
longitudeVal = 80.227112;

delta_lat = 0.0001;      // Adjust Y
delta_long = 0.0001;    // Adjust X 

/* length */ delta_x = 130; // 130 
/* width */ delta_y = 70;  // 70

vertical_scale = delta_y/delta_lat;
horizontal_scale = delta_x/(cos(lat)*delta_long);

/* lati */ x = (6378.1 * (1+sin(lat))/cos(lat));
/* long */ y = (6378.1 * longitudeVal); 

x = x / horizontal_scale;
y = y / vertical_scale;

/*    y = ((-1 * lat) + 90) * (delta_x / 180);
x = (longitudeVal + 180) * (delta_y / 360);*/

NSLog(@"lat %f long %f x %d y %d",lat,longitudeVal,x,y); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:10:57.990

在我看来，您好像犯了一个非常常见的错误。您的纬度和经度以度为单位，但`sin`其他三角函数采用以弧度为单位的参数。

您可能还会犯其他错误，但只是告诉我们代码错误而不告诉我们它是如何错误的，并不能为我们提供太多线索。

# php - 嵌套评论系统sql

> ID：11981616
> 
> 赞同：0
> 
> 时间：2012-08-16T06:13:14.503
> 
> 标签：php, mysql, sql

我有一个我设计的评论系统，它可以在没有任何嵌套的情况下工作。现在我想让人们直接回复评论，而不是该页面上的一般内容。所以我考虑在我的数据库中添加一个指向父 id 的父 id 列。

现在下一步（我有问题找到解决此问题的好方法）。是根据共同的“事物ID”查询所有评论（嵌套和非嵌套）的数据库，然后以正确的顺序显示它们，以便嵌套评论正确连接到他们的父母......有没有什么有效的方法将所有这些评论排序在一起，这样我就不必开始使用递归和其他东西进行奇怪的查询调用？所有评论还带有时间戳以及其他一些不相关的数据。

感谢您的任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T07:05:47.897

有一个概念叫做“嵌套集”。基本上，每条评论和文章都有两列，指定其子项集的“开始”和“结束”。每个评论都有一个完全在父项的集合内的开始和结束，并且兄弟之间没有重叠——两组重叠的唯一时间是当一个完全在另一个内时（即：如果一个项目是另一个）。

```
 Article
                             /-----(1, 12)----\
                       Comment                 Comment
                   /---(2, 5)               /--(6, 11)--\
             Comment                    Comment        Comment
             (3, 4)                     (7, 8)         (9, 10) 
```

当您对特定项目进行查询时，您会查找具有匹配文章 ID 的每个项目，其集合在您的项目集合中。这会检索所有的孩子，以及他们所有的孩子，等等。按开始或结束对它们进行排序，评论甚至应该按顺序出现——您可以与另一个端点进行比较，以确定一个是否是另一个的子项。（如果你已经按开始排序，并且这个项目的结束小于前一个，那么你有一个子项目。）

缺点是，每条评论都需要更新这些集合。这很简单，但可能非常慢。为了在 (7,8) 下添加另一个项目，例如：

*   对于那篇文章，通过添加 2 来更新每个 'end' >= 8。
*   对于那篇文章，通过添加 2 来更新每个“开始”> 8。
*   插入带有一组 (8, 9) 的新项目。

当然，您插入的评论“之后”的评论越多，更新速度就越慢。

等等……让我谷歌……

[http://en.wikipedia.org/wiki/Nested_set_model](http://en.wikipedia.org/wiki/Nested_set_model)

# php - php邮件功能说电子邮件已发送但它没有

> ID：11981619
> 
> 赞同：0
> 
> 时间：2012-08-16T06:13:26.827
> 
> 标签：php

我正在使用此代码并打印出已发送但我没有收到任何电子邮件我已经坐在我的本地服务器上配置了邮件功能并且一切都正确但仍然无法正常工作

```
$to = "xxxx@yahoo.com";
$subject = "$name";
$txt = "$msg";
$headers = "From: xxxx@gmail.com";
if (mail($to,$subject,$txt, $headers)){
    echo "sent";
}else{
    echo "error";
} 
```

它一直说已发送但我没有收到任何电子邮件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:14:10.767

您将需要更改 php.ini 和 sendmail cfg 以允许从本地服务器发送。这是我的配置。

**PHP.ini** - 确保 sendmail_path 指向正确的 exe。这是在 php.ini 中的 [mail function] 下

```
sendmail_path = "\"C:\xampp\sendmail\sendmail.exe\" -t"
;sendmail_path = "C:\xampp\mailtodisk\mailtodisk.exe" 
```

**Sendmail.ini** [发送邮件]

```
smtp_server=smtp.gmail.com
smtp_port=25
error_logfile=error.log
debug_logfile=debug.log
auth_username=gmail address
auth_password=gmail password
force_sender=gmail address 
```

显然，这被配置为与 gmail 一起使用，但在 sendmail 中具有正确配置的任何其他 smtp 服务器都可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:19:21.920

服务器端垃圾邮件过滤可能是您的问题，尤其是当您向某些组织电子邮件地址发送电子邮件时。如果是这样，这篇[文章](http://www.dotvoid.com/2007/04/problem-sending-mail-with-php-mail-function/)可能对你有用..

这很难仅使用客户端代码进行调试。如果您有权限，您必须检查服务器日志

# php - 从 ubuntu 上的 laravel 开始

> ID：11981621
> 
> 赞同：35
> 
> 时间：2012-08-16T06:13:29.040
> 
> 标签：php, ubuntu, laravel

我正在尝试将 laravel 作为 PHP 框架，我已经将 laravel zip 解压缩到其中`~/opt/xampp/htdocs/laravel`，但是当我去`localhost/laravel`或`localhost/laravel`我收到 403 错误消息时说：

> 禁止访问！
> 
> 您无权访问请求的对象。它要么是读保护的，要么是服务器不可读的。

我在某处读到我需要编辑`storage`laravel 内部的文件夹，以便它可以读写，所以我`chmod -R 766 laravel/storage`但仍然没有运气，我是从 Ubuntu 12.04 做这个的，有人遇到过这个吗？

**编辑**
我有`chmod -R 0+w laravel/storage`，现在当我去那里时，`localhost/laravel`我得到了一些文件的索引，但是当我去时`localhost/laravel/public/`仍然得到 403 错误，而不是 我设置的预期结果

**EDIT 2** ，现在当我到达时，我得到了这条消息这让我相信我越来越近了：
`chmod -R 765 laravel/public``localhost/laravel/public`

> 警告：要求（/opt/lampp/htdocs/learning-laravel/laravel/laravel.php）：无法打开流：第 34 行 /opt/lampp/htdocs/learning-laravel/public/index.php 中的权限被拒绝
> 
> 致命错误：require()：在 /opt/lampp/ 中打开所需的 '/opt/lampp/htdocs/learning-laravel/laravel/laravel.php' (include_path='.:/opt/lampp/lib/php') 失败htdocs/learning-laravel/public/index.php 第 34 行

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-16T23:01:33.153

**最终更新**
我终于解决了它，发生的事情是该`laravel`文件夹被读保护，我必须做的是设置`chmod 755 -R laravel`然后`chmod -R o+w storage`瞧我已经启动并运行了 laravel，感谢所有做出贡献的人。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-20T05:32:43.887

对于刚开始使用 laravel，我只需执行以下步骤：

```
sudo chmod -R 770 /your/path/to/laravel/folder/ 
```

然后将 www-data 组添加到您的 laravel

```
sudo chgrp -R www-data /your/path/to/laravel/folder/ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-16T06:39:59.403

您在正确的轨道上，安装 laravel 后，您需要确保存储目录具有正确的权限：

```
sudo chmod o+w storage 
```

然后确保您在 apaches 文档根目录中为您的公用文件夹而不是您的 laravel 文件夹提供服务

```
<VirtualHost *:80>
    DocumentRoot /Users/JonSnow/Sites/MySite/public
    ServerName mysite.dev
</VirtualHost> 
```

[此处涵盖了](http://laravel.com/docs/install)这两个要求

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T21:45:46.913

在 Laravel 论坛上，Kaspien 给出了这个有用的答案：

> 你必须 chmod 777，但只能在 storage/views 文件夹上使用刀片，这恰好是 Laravel 视图默认使用的视图引擎。在我开始一个项目之前，我通常在全新安装的 Laravel 上 chmod 777 all storage/* 目录，因为它们必须对视图、会话等是可写的。

从线程：[http ://forums.laravel.com/viewtopic.php?id=1552](http://forums.laravel.com/viewtopic.php?id=1552)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-16T06:43:46.543

在您的 .htaccess 文件中：

```
RewriteRule ^index.php(.*)$ /public/index.php [L] 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2017-12-22T08:57:00.867

像这样更改存储和引导文件夹的权限

```
sudo chmod -R 777 ./storage ./bootstrap 
```

# android - 在 Android 上读取系统文件

> ID：11981624
> 
> 赞同：1
> 
> 时间：2012-08-16T06:13:40.193
> 
> 标签：android, file

我需要访问系统上的文件，即获取信息。文件 build.prop 取出所以

```
Runtime.getRuntime().exec("/system/bin/getprop").getInputStream(); 
```

我需要一份其他文件的列表以及它们的阅读方式。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:29:26.760

我猜你会有`SecurityException`，因为与你的应用关联的用户没有读取这个文件的权限。做到这一点的唯一方法是拥有一个有根设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:33:07.333

`/system`您无法访问其中的大多数文件，因为它需要**ROOT**。

# node.js - 了解 NodeJS WebSocket 服务器的对象创建和垃圾收集

> ID：11981634
> 
> 赞同：3
> 
> 时间：2012-08-16T06:14:32.567
> 
> 标签：node.js, garbage-collection, websocket, v8

我将nodejs中的[ws](https://github.com/einaros/ws)模块用于Web套接字服务器，代码的简化版本是这样的：

```
var WebSocketServer = require('ws').Server
var wss = new WebSocketServer({port: 9001});

wss.on('connection', function (ws) {

    // is the ws object created here ?

  ws.on('message', function (message) {
    if (message[0] === '+') {
        ws.name = message.substring(1);
        console.log(ws.name+' connected');
    }
  });

  ws.on('close', function () {
    console.log(ws.name+' disconnected');
    // Will this ws object be deleted ?
  });
}); 
```

我想知道：

*   在连接的每个事件上，是否创建了一个 ws 对象？
*   每个连接的客户端是否有一个对象在 RAM 中持续存在，直到它被垃圾收集？

最重要的是：如果大量客户端断开连接并且 ws 对象一直存在直到它们被垃圾收集，那么当垃圾收集发生时，我的服务器可能会被锁定很长一段时间，对吗？**我是否应该将这些 ws 对象存储在另一个对象中，这样我就可以使用 delete 关键字并在收到 close 事件后立即删除它们？**

如果我这样做，我的可能会有点像这样：

```
var WebSocketServer = require('ws').Server
var wss = new WebSocketServer({port: 9001});

var websockets = {};

wss.on('connection', function (ws) {
  ws.on('message', function (message) {
    if (message[0] === '+') {
        ws.name = message.substring(1);
        websockets[ws.name] = ws; // Add to the object that stores ws objects
        console.log(ws.name+' connected');
    }
  });

  ws.on('close', function () {
    delete websockets[ws.name]; // Delete from the object
    console.log(ws.name+' disconnected');
  });
}); 
```

那么，值得吗？我是否在第二个片段中编写了更多垃圾收集友好的代码？当垃圾收集发生时，它是否有助于避免长时间锁定？

**更新**：对不起，我刚刚意识到第二段代码是多么愚蠢。当我这样做时，我实际上是在复制对象的数量`websockets[ws.name] = ws`......但问题的第一部分仍然有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T06:51:54.623

> 在连接的每个事件上，是否创建了一个 ws 对象？

是的。

> 每个连接的客户端是否有一个对象在 RAM 中持续存在，直到它被垃圾收集？

是的，对于**每个**JavaScript 对象都是如此。

> **我是否应该将这些 ws 对象存储在另一个对象中，这样我就可以使用 delete 关键字并在收到 close 事件后立即删除它们？**

不，使用`delete`关键字不会释放你的记忆。事实上，它只是删除引用而已。考虑这个例子：

```
var x = { };
var y = { };
var z = { };
x.test = z;
y.test = z;
delete x.test; 
```

如您所见`x.test`，被删除（对象`x`不再具有`.test`属性）但`z`根本没有被删除，因为`y`包含对`z`.

您认为 WS 可以如何处理多个`ws`对象？它将它们存储在内部某个地方。如果要删除`ws`对象，只需执行

```
ws.on('close', function () {
    delete ws;
}); 
```

这将确保在某个时候垃圾收集器会收集`ws`. 另一方面，我认为这`WS`已经在内部解决了这个问题，所以你根本不必担心它。

**旁注：**在 JavaScript 中无法触发垃圾收集器。但不要担心。如果您达到内存限制，它将自行触发。

# tapestry - Tapestry5 @Persist 默认值

> ID：11981638
> 
> 赞同：1
> 
> 时间：2012-08-16T06:14:45.617
> 
> 标签：tapestry

我有一个带有表单的页面，它使用@Persist 字段作为表单控件（文本框、单选按钮等），因此如果提交表单，如果自定义验证失败，数据将保留在表单中。

从文档中，“用@Persist 标记的字段可能没有默认值（无论是内联设置还是在构造函数内设置）”。但是，我需要为某些表单元素（包括一些 @Validate("required") 选择框）设置默认值。

实现这一目标的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T08:24:41.343

首先，我认为您不需要 @persist 您的表单值，因为挂毯会将它们保留在您的验证失败提交中。如果您想设置默认值，您可以在 @SetupRender 中这样做，例如：

```
@Porperty
@Persist
private String myValue;

@SetupRender
private void setup() {
    if(myValue == null) {
        myValue = "defaultVal";
    }
} 
```

或者您可以在 null 检查 getter 中执行此操作（这在使用事件时很有用，因为那里没有调用 @SetupRender）：

```
@Persist
private String myValue;

public String getMyValue() {
    if(myValue == null) {
        myValue = "defaultVal";
    }
    return myValue;
} 
```

# javascript - 如何在 Pinterest 上分享

> ID：11981639
> 
> 赞同：4
> 
> 时间：2012-08-16T06:14:51.150
> 
> 标签：javascript, pinterest

我有一个用于在 Pinterest 上分享的 JavaScript 函数，如下所示：

```
function shareOnPinterest(url, desc, coverImage){

var str = "http://pinterest.com/pin/create/button/?url=" + encodeURIComponent(url) + "&media=" + coverImage + "&description=" +
desc;

window.open(str, "_blank");         

} 
```

URL 似乎工作正常，但是当我单击 Pin It 按钮时，它没有固定到板上。

我的页面上也有对这个 Pinterest JavaScript 的引用。

```
<script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script> 
```

有什么我做错了，还是有其他方法可以在 Pinterest 上分享？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:07:49.827

我不确定您想要什么...您的网页按钮或简单地固定图像？

此代码用于固定图像：

```
javascript:void((function(){var%20e=document.createElement('script');e.setAttribute('type','text/javascript');e.setAttribute('charset','UTF-8');e.setAttribute('src','http://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);document.body.appendChild(e)})()); 
```

# javascript - 根据第二个输入字段输入禁用一个输入字段

> ID：11981641
> 
> 赞同：1
> 
> 时间：2012-08-16T06:15:07.940
> 
> 标签：javascript, jquery

我有 2 个输入文本字段，当用户尝试在 A 输入文本字段中输入任何值时，B 输入字段需要禁用，不允许 B 字段中的任何条目。同样，如果用户尝试在 B 输入字段中输入任何输入，则需要禁用 A 输入字段。任何人都可以帮助我如何在 Jquery 中编写代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T06:19:52.613

`A`使用和的输入字段名称`B`。

```
$('input[name="A"]').on('change', function(){
    if($(this).val() !== ''){
        $('input[name="B"]').attr('disabled', 'disabled');
    }else{
        $('input[name="B"]').removeAttr('disabled');
    }
});
$('input[name="B"]').on('change', function(){
    if($(this).val() !== ''){
        $('input[name="A"]').attr('disabled', 'disabled');
    }else{
        $('input[name="A"]').removeAttr('disabled');
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T06:50:10.443

两个答案都是正确的，只是决定使代码简短：

```
 $('input.inputA').keyup(function () {
        $('input.inputB').prop('disabled', this.value.length === 0 ? false : true);
    });

    $('input.inputB').keyup(function () {
        $('input.inputA').prop('disabled', this.value.length === 0 ? false : true);
    }); 
```

演示：http: [//jsfiddle.net/AnDxC/](http://jsfiddle.net/AnDxC/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T06:20:58.990

假设

```
<input type="text" class="inputA" />
<input type="text" class="inputB" /> 
```

和JS：

```
$(function(){
    $("input").on("keyup", function(){
            if($(this).hasClass("inputA") && $(".inputA").val()){
               $("input.inputB").prop("disabled", true);
               $("input.inputA").prop("disabled", false);
            } else if($(this).hasClass("inputB") && $(".inputB").val()){
               $("input.inputA").prop("disabled", true);
                $("input.inputB").prop("disabled", false);
            } else {
                       $(".inputA, .inputB").prop("disabled", false);
                    }
    });
}); 
```

[提琴手](http://jsfiddle.net/aHVhh/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T06:50:47.000

如果您有下一个 HTML：

```
<input type="text" name="test1" id="test1" value=""/>
<input type="text" name="test2" id="test2" value=""/> 
```

我的解决方案是：

```
<script>
$(function(){
    $('#test1, #test2').keyup(function(){
        var $test1 = $('#test1');
        var $test2 = $('#test2');
        $test1.prop('disabled', $test2.val() && ! $test1.val());
        $test2.prop('disabled', $test1.val() && ! $test2.val());
    });
});
</script> 
```

这是一个[例子](http://jsfiddle.net/94a5b/)

# android - 如何使用 AlertDialog 在主要上下文中更改 EditText 提示

> ID：11981647
> 
> 赞同：0
> 
> 时间：2012-08-16T06:15:50.420
> 
> 标签：android

```
private EditText result = (EditText) findViewById(R.id.editText1);
final String[] dropdownList ={"a123", "b456"};

public void onCreate(...) {
    ...
    alert();
}

private void alert() {
    new AlertDialog.Builder(this)
    .setTitle("select")
    .setSingleChoiceItems(dropdownList, checkedItem, new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    result.setHint("some tips");
                }
        )}.show() 
```

EditText 结果在 layout.xml 中已经有提示，但我想更改提示

EditText 结果，但是上面的代码抛出了 NullPointerException，这是什么问题？

编辑：

```
public class AAA extends Activity {

private EditText result;
private String[] dropdownList = {"A123", "A456"};
private int checkedItem = 0; 

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    result = (EditText) findViewById(R.id.editText1);
    alert();
}

private void alert() {
    new AlertDialog.Builder(this)
    .setTitle("select")
    .setSingleChoiceItems(dropdownList, checkedItem, new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    result.setHint("some tips");
                }
    }).show();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:04:21.823

使用处理程序从 alertDialog 更新任何 UI 组件。

```
Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
       result.setHint("some tips");
    }
}

private void alert() {
    new AlertDialog.Builder(this).setTitle("select")
    .setSingleChoiceItems(dropdownList, checkedItem, new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            handler.sendEmptyMessage(0);
        }
    }).show();
} 
```

# javascript - 在服务器上创建一个复选框，使用 javascript 处理函数

> ID：11981651
> 
> 赞同：1
> 
> 时间：2012-08-16T06:16:21.800
> 
> 标签：javascript, asp.net

我在运行时在服务器上创建了一个复选框，并将其填充到网页上的表格中，我想利用它来触发一些 JavaScript 来处理客户端中的一些功能。

但是，我不确定如何使用以这种方式创建的复选框来触发该功能。

我知道当我在此语法中声明一个复选框时，我可以触发该函数。

```
asp:CheckBox ID="Checkbox1" runat="server" Onclick="javascript:myfunction()" 
```

但是，此复选框可能需要也可能不需要在网页上创建，因此我无法在网页上插入此硬编码

有什么方法可以用来检测此复选框的状态并在客户端触发我的 JavaScript？或者我是否可以处理我需要做的事情`code_behind`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:55:47.297

假设我们正在添加`CheckBox`一个`td`表

```
<table>
        <tr>
            <td id="td1" runat="server">
            </td>
        </tr>
</table> 
```

在后面的代码中，

```
CheckBox chkbox = new CheckBox();
chkbox.ID = "CheckBox1";
chkbox.Attributes.Add("onclick", "click_Func(this);");
td1.Controls.Add(chkbox); 
```

和 javascript 看起来像这样，

```
<script type="text/javascript">
function click_Func(chkbox) {
 alert(chkbox.id);
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:32:39.787

您可以像这样在页面上添加脚本标签

```
 <script type="text/javascript">
    $('#<%=Checkbox1.ClientID%>').live('changed',function(){
            // Do your work here.
    });
    </script> 
```

# java - 提卡信息提取

> ID：11981658
> 
> 赞同：1
> 
> 时间：2012-08-16T06:16:52.213
> 
> 标签：java, apache-tika

我可以知道如何使用 Tika 提取网页中表格形式的数字等信息吗？Tika 有为此目的的解析器吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:21:33.010

好吧，您可以在 tika 中提取网页。为此，您可以使用`apache-tika's` `HTMLParser`. [你会在这里](http://tika.apache.org/)得到你需要的一切

那么你也可以使用`AutoDetectParser`which will `autodetect content type and extract content`。`AutoDetectParser`可以检测任何类型的文件/网址并将应用提取。

> 我可以知道如何使用 Tika 提取网页中表格形式的数字等信息吗？

--> tika 提取的内容就像一个`raw`文本。我认为您不会以表格形式获得它。

# c# - 队列 在并发下为不同类型给出不同的结果

> ID：11981659
> 
> 赞同：1
> 
> 时间：2012-08-16T06:16:56.610
> 
> 标签：c#, .net, collections, concurrency

我刚刚开始了解一些新的 .NET 并发集合，例如 ConcurrentDictionary 和 ConcurrentQueue，并且我正在运行一些测试以查看当我并行写入队列时会发生什么。

所以我运行了这个：

```
 private static void ParallelWriteToQueue(Queue<int> queue)
    {
        Stopwatch sw = Stopwatch.StartNew();
        Parallel.For(1,1000001,(i) => queue.Enqueue(i));
        sw.Stop();
        Console.WriteLine("Regular int Queue - " + queue.Count + " time" + sw.ElapsedMilliseconds);
    } 
```

正如我认为我得到了下一个例外：

```
Source array was not long enough. Check srcIndex and length, and the array's lower bounds. 
```

所以这个队列不能像预测的那样处理并发的入队。

**但是**，当我将队列的类型更改为字符串时，没有异常，结果写成类似

```
Regular string Queue - 663209 time117 
```

这意味着只有大约 663k 被排队。

为什么没有例外？

所有未排队的项目发生了什么？

这是与队列相同的功能

```
 private static void ParallelWriteToQueue(Queue<string> queue)
    {
        Stopwatch sw = Stopwatch.StartNew();
        Parallel.For(1, 100001, (i) => queue.Enqueue(i.ToString()));
        sw.Stop();
        Console.WriteLine("Regular string Queue - " + queue.Count + " time" + +sw.ElapsedMilliseconds);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T06:25:00.023

[`Queue<T>`](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)而[`ConcurrentQueue<T>`](http://msdn.microsoft.com/en-us/library/dd267265.aspx)不是线程安全的，根据 MSDN。您描述的其余行为是由并发（多线程）写访问引起的冲突偶然发生的，纯粹基于`Queue<T>`不是线程安全的事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T06:28:57.370

你是否得到异常与你放入队列的类型无关。它是非确定性的，我可以重现这两种类型的异常，并且我也可以无异常地重现这两种类型的情况——无需更改代码。

运行以下代码段显示了这一点：

```
int exceptions = 0;
int noExceptions = 0;
for (int x = 0; x < 100; ++x)
{
    Queue<int> q = new Queue<int>();
    try
    {
        Parallel.For(1,1000001,(i) => q.Enqueue(i)); 
        ++noExceptions;
    }
    catch
    {
        ++exceptions;
    }
}

Console.WriteLine("Runs with exception: {0}. Runs without: {1}", exceptions, noExceptions); 
```

输出类似于`Runs with exception: 96\. Runs without: 4`

原因是 - 正如其他人已经提到的 - 这`Queue`不是线程安全的。这里发生的事情称为[“比赛条件”](http://en.wikipedia.org/wiki/Race_Condition)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T06:30:24.420

您的测试表明，标准集合实现不是线程安全的。使用整数而不是字符串引发异常的事实可能只是偶然，如果再次尝试测试，您可能会得到不同的结果。

至于“丢失”的项目，无法确定 - 队列的内部状态可能由于多线程访问而损坏，因此计数本身可能是错误的，或者项目可能根本没有入队。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T06:24:27.220

由于您使用`Parallel.For()`的是 ，因此集合必须是**线程安全**的才能提供正常工作。

所以，考虑使用`ConcurrentQueue<T>`类。

# assembly - addi 和 subi 之间的“关系”是什么？

> ID：11981660
> 
> 赞同：2
> 
> 时间：2012-08-16T06:16:57.900
> 
> 标签：assembly, cpu, mips, nios

我应该回答这个问题。经过一些研究，它说 add 和 sub 具有相同的操作码，并且仅在功能领域有所不同。这是答案还是其他？

## 更新

Nios II CPU 手册中提供了它：

```
subi
subtract immediate
Operation: rB ← rA – σ (IMMED)
Assembler Syntax: subi rB, rA, IMMED
Example: subi r8, r8, 4
Description: Sign-extends the immediate value IMMED to 32 bits, subtracts it from the value of rA and then
            stores the result in rB.
Usage: The maximum allowed value of IMMED is 32768\. The minimum allowed value is
–32767.
Pseudo-instruction:
© March 2009
subi is implemented as addi rB, rA, -IMMED 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T06:27:33.357

我不知道 MIPS 甚至*有*正确的`subi`指令（尽管某些环境可能会为它实现宏）。

由于您要减去一个*立即*数，您只需将它的否定提供给`addi`指令：

```
addi $r1, $r2, -42     ; equivalent to subi $r1, $r2, 42 
```

直接操作数是一个二进制补码值，这意味着它完全可以成为负数，而二进制补码的工作方式意味着您可以以*无符号*方式添加一个负数，并给出与减法相同的结果（因为您环绕）。

例如，`-42`在 16 位二进制补码中是无符号值`65494`。当您在 65536 添加`50`和`65494`环绕时，您最终会得到：

```
 50
+ 65494 (ie, -42)
  -----
  65544 (overflow, so
- 65536  we wrap at 64K)
  -----
      8 (identical to "50 - 42") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-21T08:04:02.687

在 ISA 设计的硬件/机器代码级别，MIPS 没有`subi`/`subiu`指令。 **这是有道理的，因为 MIPS 没有 FLAGS 寄存器。**

没有进位标志可以记录添加负数或减去正数之间的差异，就像在许多其他架构（x86、ARM 和许多其他较少 RISCy 架构）上一样。因此，花费额外的操作码（以及解码它的晶体管）是没有意义的。

添加否定立即数不会改变/的有*符号*溢出检测。当您将两个具有相同符号的数字相加并且结果具有相反的符号时，您会得到有符号溢出。或者在减法时，如果 x 和 y 有相反的符号，并且有相反的符号，那就是减法溢出（你想要捕获的地方。） 是直接的，所以将它实现为使' 的溢出检测工作。`addi``subi``z = x - y``z``x``subi``y``z = x + y_negated``addi`

当然，通常您（或 C 编译器）只会使用`addiu`/`subiu`因为您不想陷入陷阱，并且宁愿将环绕作为签名溢出行为，除非您使用`-fsanitize=undefined-behavior`或其他东西进行编译。

* * *

**在 asm 源代码级别，为方便起见，它可以实现为伪指令**，正如您在 NIOS II 手册中的引用所示。（或者甚至作为一个宏，在不支持伪指令的汇编器上。）

`subi`硬件/保存指令的唯一时间`subiu`是您想要加`32768`/ 减`-32678`。（注意 NIOS II 手册指出`subi`支持`-32767 .. 32768`范围内的立即数，与正常有符号的 16 位 2 的补码相反`-32768 .. 32767`）

2 的补码中最负数是异常的，它的负数需要额外的位才能正确表示。即`-(0x8000)`溢出到`0x8000`16 位立即数。任何`subi`作为伪指令实现的体面的汇编程序都应该对此发出警告，或者警告不要对`addi`/使用带符号的 16 位范围之外的立即数`addiu`。

* * *

`addiu`将其立即数符号扩展为 32 位，与 . 相同`addi`。“未签名”是用词不当。 [为什么我们要使用 addiu 而不是 addi？](https://stackoverflow.com/questions/36274590/why-would-we-use-addiu-instead-of-addi). 对于 2 的补码机器，有符号和无符号加法是相同的二进制运算。命名类型匹配 C 有符号溢出是未定义的行为，但请注意未定义*不需要*故障。将`addi`其视为溢出检查的签名加法，并且仅在您特别需要时才使用它。

有趣的事实：`ori`其他布尔值对它们的立即数进行零扩展，因此可以使用或`li $t0, val`扩展为仅一条指令。`val = -32768 .. 65535``addiu $t0, $zero, signed_int16``ori $t0, $zero, uint16`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-08-21T07:17:47.627

同意楼上。说明一些环境。提出我在这件事上看到的小真理。发展我自己的（阴谋）理论。

关键字在倒数第二行（第三行，包括版权）中-它是伪指令。这一直是一个常见的课堂问题，所以值得说清楚。一些仿真器（看着你的火星）将其视为真正的指令，而其他仿真器（qtspim - 耻辱！）甚至不会费心编译它。

虽然我从来没有找到一个很好的例子，但据说将一个转换为另一个太简单了，所以它是多余的。他们试图遵循“简单的设计原则”。对我来说，这有点崩溃，因为已经有很多伪指令代表对其他命令的简单修改。分支伪指令分解为 2 个命令，这将需要 2 个甚至 3 个命令。所以，这一款也不例外。那么像“li”这样的东西呢？我的意思是，来吧，那只是补充。没有其他的。如果他们加上这一点，那就没有任何借口了。老实说，为了简单和对称，我认为添加它会更容易。但是，每个人最喜欢的 MIPS 考试问题会发生什么？

这就是没有 SUBI 的真正原因。让陈旧的 ASM 程序员与本科生搞混。

# vb6 - 在 Visual Basic 6 中更改的连接字符串

> ID：11981662
> 
> 赞同：1
> 
> 时间：2012-08-16T06:17:18.603
> 
> 标签：vb6, connection-string

我有以下连接字符串的代码。

```
 If conn.State = 1 Then conn.Close
ConnString = "Driver={SQL Server};Server=server08;Database=bmssmall1;Uid=" & Me.txtUserName.Text & ";Pwd=" & Me.txtPassword.Text & "; "
        '/Open Connection
        With conn
            .ConnectionString = ConnString
            .Open
        End With
    Set variables.myobj.conn = conn 
```

可以清楚地看到，连接字符串是正确定义的。
但是，在运行时，如果我设置一个书签并在 conn 打开后检查它的值，它只显示“Provider = MSDASQL”。连接字符串似乎都消失了。

请帮忙，我在应用程序的任何地方都引用了这个连接字符串，不修复它意味着整个开发环境的崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:21:13.937

微软博客上已经解决了。

[解决方案在这里](http://blogs.msdn.com/b/dataaccesstechnologies/archive/2010/05/28/why-is-my-connectionstring-incorrect.aspx)

您需要做的就是附加 `Persist Security Info=true`到您的连接字符串中。问题应该得到解决。

让我知道这是否有帮助

# javascript - 有没有办法阻止 IE9 中的这个 javascript 错误

> ID：11981665
> 
> 赞同：1
> 
> 时间：2012-08-16T06:17:35.730
> 
> 标签：javascript, internet-explorer-9

我对在 IE9 中显示覆盖的一些 javascript 代码有疑问，它在 Chrome、Firefox 甚至 IE8 中都可以正常工作。然而，当在 IE9 中运行时，会发生一些奇怪的事情。基本上，将鼠标悬停在区域上是为了显示带有一些文本的叠加层，但在 IE9 中，第一个叠加层正在被克隆或其他东西，所以我得到一个与第一个 div 具有相同样式和位置的条带，但没有的内容。以下是 HTML 外观的示例：

```
<img usemap="#mymap"/>
<map id="mymap">
<area id="first" onmouseover="ShowOverlay(this);" onmouseout="HideOverlays()";>
<area id="second" onmouseover="ShowOverlay(this);" onmouseout="HideOverlays()";>
</map>
<div id="first-Overlay" class="overlay" onmouseover="OverlayOnHover(this);" onmouseout="OverlayMouseOff(this);">
some text here.
</div>
<div id="second-Overlay" class="overlay" onmouseover="OverlayOnHover(this);" onmouseout="OverlayMouseOff(this);">
more text here.
</div> 
```

它附加的javascript是：

```
<script type="text/javascript">
var PreviousOverlay;
function ShowOverlay(sender) {
    if (PreviousOverlay) {
        PreviousOverlay.style.display = 'none';
    }
    NewOverlay = document.getElementById(sender.id + '-Overlay');
    if (NewOverlay) {
        NewOverlay.style.display = 'inline';
    }
    PreviousOverlay = NewOverlay;

    return false;
}
function HideOverlays() {
    if (PreviousOverlay) {
        PreviousOverlay.style.display = 'none';
    }
    PreviousOverlay = null;
    return false;
}
function OverlayOnHover(Overlay) {
    Overlay.style.display = 'inline';
}
function OverlayMouseOff(Overlay) {
    Overlay.style.display = 'none';
}
</script> 
```

使用 IE 中的 Web Developer 工具，我可以将“first-Overlay”显示更改为内联，然后它将与 getElementById('first-Overlay') 返回的条带一起可见。有谁知道是什么原因导致IE9出现这种情况？就想出解决方法而言，我真的碰壁了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:18:52.470

我尝试使用 jQuery，错误仍然发生。

最后，我的解决方法是在第一个 div 前面添加一个具有绝对定位等的虚拟 div。这个 div 永远不会被显示，所以这个 bug 没有任何可见的效果。

# c# - 当域控制器关闭时，我可以检查 AD 用户是否是域管理员吗？

> ID：11981671
> 
> 赞同：0
> 
> 时间：2012-08-16T06:18:33.617
> 
> 标签：c#, active-directory, domaincontroller

我可以通过以下代码行检查用户是否是域管理员：

```
using (DirectoryEntry domainEntry = new DirectoryEntry(string.Format("LDAP://{0}", domain)))
{
    byte[] domainSIdArray = (byte[])domainEntry.Properties["objectSid"].Value;

    SecurityIdentifier domainSId = new SecurityIdentifier(domainSIdArray, 0);
    SecurityIdentifier domainAdminsSId = new SecurityIdentifier(WellKnownSidType.AccountDomainAdminsSid, domainSId);

    using (DirectoryEntry groupEntry = new DirectoryEntry(string.Format("LDAP://<SID={0}>", BuildOctetString(domainAdminsSId))))
    {
        string adminDn = groupEntry.Properties["distinguishedname"].Value as string;
        SearchResult result = (new DirectorySearcher(domainEntry, string.Format("(&(objectCategory=user)(samAccountName={0}))", userName), new[] { "memberOf" })).FindOne();
        return result.Properties["memberOf"].Contains(adminDn);
    }
} 
```

更多细节[在这里](https://stackoverflow.com/questions/9683373/how-to-check-if-user-with-username-and-password-is-domain-administrator-of)

但是当域控制器关闭或离线（没有任何连接）时，我收到以下错误：

> **服务器无法运行。**
> 
> 在 System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail)
> 在 System.DirectoryServices.DirectoryEntry.Bind()
> 在 System.DirectoryServices.DirectoryEntry.get_AdsObject()
> 在 System.DirectoryServices.PropertyValueCollection.PopulateList()
> 在 System.DirectoryServices.PropertyValueCollection..
> System.DirectoryServices.PropertyCollection.get_Item(String propertyName ) 处的 ctor(DirectoryEntry entry, String propertyName)

是否有能力检查用户是否是关闭域控制器的域管理员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:09:48.300

您可以在不联系域控制器的情况下检查当前用户是否是域管理员。

如果您的要求是检查任意用户是否是域管理员，我认为没有域控制器就无法做到。

确实，Windows 会为断开连接的登录目的缓存登录凭据。缓存以`HKEY_LOCAL_MACHINE\SECURITY\Cache`. 按照设计，缓存只能由 LSA 解密。如果你找到了一些其他方法来解密或查询信息而不通过 LSA，这是一个安全漏洞，微软可能会立即修复它。因此，您唯一的希望是 LSA 以某种方式公开一个 API 来查询存储在凭证缓存中的组信息。据我所知，我没有看到这样的 API 存在。有关文档化的 LSA API，请参见[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms721849%28v=vs.85%29.aspx)。

# ios - 如何将uipagecontrol点更改为每个点之间的数字和空格

> ID：11981676
> 
> 赞同：2
> 
> 时间：2012-08-16T06:19:17.653
> 
> 标签：ios, xcode, uipagecontrol

如何将 uipagecontrol 点更改为数字和每个点之间的空间。因此很容易初始化页面控件事件以及所有点的空间。现在对我来说，我使用点来更改 uipagecontrol 中的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:24:35.820

`UIPageControl`类不提供这样的功能，它是非常简单的控制。您必须创建自己的类才能获得所需的功能。有关更多信息，请参阅此问题[Subclassing UIPageControl](https://stackoverflow.com/questions/2020782/subclassing-uipagecontrol)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T03:19:09.330

使用与 UIPageControl 非常相似的页码生成自己的按钮非常容易，有关详细信息，请参阅本教程：

[http://iosdevtricks.blogspot.com/2013/05/uiscrollview-with-page-numbers-similar.html](http://iosdevtricks.blogspot.com/2013/05/uiscrollview-with-page-numbers-similar.html)

# .net - 如何在 VS 中重用安装项目（使用 .NET 3.5）

> ID：11981680
> 
> 赞同：0
> 
> 时间：2012-08-16T06:19:41.070
> 
> 标签：.net, visual-studio, installation

我在解决方案中有一个安装项目（msi），用于将应用程序安装到客户端，过程非常简单：将 dll（所有弱名称）复制到特定文件夹，调用 .exe 文件弹出一个表单以收集配置（自定义）不同客户端的信息，然后.exe将写入几个XML配置文件，然后完成。现在我需要一个 Hotfix 包，我认为它的逻辑与以前的安装程序非常相似，所以我不会创建另一个安装项目，我只想复制以前的项目并重命名它，但是在我完成之后运行新的Hotfix包，总是说'你机器上已经安装的项目，请卸载再重试'，表示安装程序和App之间的联动还在，那么如何避免呢？或者你有什么其他的建议来做类似于我的应用程序的修补程序（所有弱名称，安装程序中有 2 个 Windows 服务），但不会影响卸载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:11:06.333

您需要更改[`ProductCode`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370854%28v=vs.85%29.aspx)新的设置项目属性。

# uinavigationcontroller - 如何在 iOS 中将 NavigationController 添加到基于选项卡的应用程序中

> ID：11981682
> 
> 赞同：0
> 
> 时间：2012-08-16T06:19:55.757
> 
> 标签：uinavigationcontroller, uitabbarcontroller, ios5.1

我正在使用 Xcode 4.4.1。我创建了一个简单的基于选项卡的应用程序。然后我想将导航控制器添加到应用程序中。谁能告诉我如何在 Xcode 4.4.1 中做到这一点。我当前的代码是这样的，但它不起作用。

`

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

{

```
// Override point for customization after application launch.
UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
UIViewController *viewController2 = [[Addbills alloc]initWithNibName:@"Addbills" bundle:nil];
UIViewController *viewController3 = [[CalenderView alloc]initWithNibName:@"CalenderView" bundle:nil];
UIViewController *viewController4 = [[Web alloc]initWithNibName:@"Web" bundle:nil];
UIViewController *viewController5 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.navigationController = [[UINavigationController alloc] initWithRootViewController:viewController1];
[self.navigationController setNavigationBarHidden:TRUE];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = @[viewController1,viewController2,viewController3,viewController4,viewController5];
self.window.rootViewController = self.tabBarController; 
```

// self.window.rootViewController =self.navigationController;

```
[self.window addSubview:navigationController.view];
[self.window makeKeyAndVisible];
return YES; 
```

}

`

这是我在 viewController5 中的按钮单击事件

`

```
 - (IBAction)backToPrevious:(id)sender {

[self.navigationController popToRootViewControllerAnimated:TRUE]; 
```

}`

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:26:57.057

这是你应该如何做的。

```
// initialize the tabbar controller
UITabBarController *tabbarController = [[[UITabBarController alloc] init] autorelease];

UIViewController *itemsViewController1 = [[[UIViewController alloc] initWithNibName:@"SomeViewController1" bundle:nil] autorelease];
UINavigationController *itemsNavigationController1 = [[UINavigationController alloc] initWithRootViewController:itemsViewController1];

UIViewController *itemsViewController2 = [[[UIViewController alloc] initWithNibName:@"SomeViewController2" bundle:nil] autorelease];
UINavigationController *itemsNavigationController2 = [[UINavigationController alloc] initWithRootViewController:itemsViewController2];

tabbarController.viewControllers = @[itemsNavigationController1,itemsNavigationController2];

_window.rootViewController = tabbarController; 
```

# html - 如何在 XML 中添加换行符

> ID：11981685
> 
> 赞同：1
> 
> 时间：2012-08-16T06:20:06.687
> 
> 标签：html, xml, linkedin

嗨，我正在使用 linkiedin api，我有一个 xml

```
function send_messeges($access_token, $xml_atring) {

    $profile_url = "http://api.linkedin.com/v1/people/~/mailbox";
    $xml = '<?xml version="1.0" encoding="UTF-8" ?>
        <mailbox-item>
          <recipients>                
            ' . $xml_atring . '
          </recipients>
          <subject>'.$this->send_subject.'</subject>
          <body>'.$this->send_message.'</body>
        </mailbox-item>';
    $request = OAuthRequest::from_consumer_and_token($this->consumer, $access_token, "POST", $profile_url);
    $request->sign_request($this->method, $this->consumer, $access_token);
    $auth_header = $request->to_header("https://api.linkedin.com");
    $response = $this->httpRequest($profile_url, $auth_header, "POST", $xml);        
    return $response;

} 
```

在

```
$this->send_message 
```

我有一条消息，我想添加一些带有消息的 HTML，但linkedin API 不允许我这样做。

即便是

```
<![CDATA[
        Line 1 <br />
        Line 2 <br />
        Line 3 <br />
        ]]> 
```

不在这里工作，`so is there any built in xml tag i can use for line breaks ansd is there any tags equalant to HTML tags`。请帮忙

**更新**

如果我使用消息

```
"Elephanti <br/> invitation Message, Visite our site http://elephanti.com"; 
```

回应是

```
Invalid xml {Element not allowed: br@http://api.linkedin.com/v1 in element body@http://api.linkedin.com/v1} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T06:40:09.603

`&#xD`在您希望有换行符的任何地方使用您的 XML 文档。

这个网站有一个很好的解释：http: [//www.stylusstudio.com/xmldev/200309/post80050.html](http://www.stylusstudio.com/xmldev/200309/post80050.html)

**另外一个选项**

试着`<br/>`在你想要空间的地方输入

**为未来的观众编辑**

`\n`对他有用的是在他想要换行的地方打字

# java - 该行是否存在？如果是更新它，如果不添加它 mysql/java

> ID：11981686
> 
> 赞同：3
> 
> 时间：2012-08-16T06:20:08.327
> 
> 标签：java, mysql

```
public static boolean saveUserInfo(Client c){
try {
    Statement statement = conn.createStatement();
    ResultSet group = statement.executeQuery("SELECT * FROM users WHERE username = '"+ c.playerName + "'");

    if (!group.next())
        statement.execute("INSERT INTO `users` (`username`, `password`, `rights`, `address`, `hasbankpin`, `bankpin1`, `bankpin2`, `bankpin3`, `bankpin4`, `height`, `posx`, `posy`, `cbowcount`, `vls`, `skulltime`, `ep`, `dpoints`, `vlsleft`) VALUES ('"+c.playerName+"', '"+c.playerPass+"', '"+c.playerRights+"', '"+c.getIP()+"', '"+c.hasBankPin+"', '"+c.bankPin1+"', '"+c.bankPin2+"', '"+c.bankPin3+"', '"+c.bankPin4+"', '"+c.heightLevel+"', '"+c.absX+"', '"+c.absY+"', '"+c.crystalBowArrowCount+"', '"+c.degradeTime+"', '"+c.skullTimer+"', '"+c.earningPotential+"', '"+c.dungeonPoints+"', '"+c.vlsLeft+"')"); 
```

对不起，混乱，但我想做的是检查用户是否存在于表中。如果是这样，我希望它更新它，如果不是，我希望它添加用户。我已经尝试了几天了，但我没有任何运气。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T06:22:39.103

您可以使用[ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)子句在单查询中执行此操作：

```
INSERT INTO table_name(...) 
VALUES(...) 
ON DUPLICATE KEY UPDATE col = value, ...; 
```

您需要在列上放置一个`PRIMARY`或`UNIQUE`键`username`：

```
ALTER TABLE users ADD UNIQUE KEY ix1 (username); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T06:31:44.873

如果你有一个唯一的键，比如 on `username`，那么你可以这样做：

```
String query="
    INSERT INTO users SET
        username = ?,
        password = ?,
        rights = ?,
        address = ?,
        hasbankpin = ?,
        bankpin1 = ?,
        bankpin2 = ?,
        bankpin3 = ?,
        bankpin4 = ?,
        height = ?,
        posx = ?,
        posy = ?,
        cbowcount = ?,
        vls = ?,
        skulltime = ?,
        ep = ?,
        dpoints = ?,
        vlsleft = ?
    ON DUPLICATE KEY UPDATE
        password = VALUES(password),
        rights = VALUES(rights),
        address = VALUES(address),
        hasbankpin = VALUES(hasbankpin),
        bankpin1 = VALUES(bankpin1),
        bankpin2 = VALUES(bankpin2),
        bankpin3 = VALUES(bankpin3),
        bankpin4 = VALUES(bankpin4),
        height = VALUES(height),
        posx = VALUES(posx),
        posy = VALUES(posy),
        cbowcount = VALUES(cbowcount),
        vls = VALUES(vls),
        skulltime = VALUES(skulltime),
        ep = VALUES(ep),
        dpoints = VALUES(dpoints),
        vlsleft = VALUES(vlsleft)
";

Statement stmt = conn.prepareStatement(query);                    

stmt.setString(1, c.playerName);
stmt.setString(2, c.playerPass);
stmt.setString(3, c.playerRights);
stmt.setString(4, c.getIP());
stmt.setString(5, c.hasBankPin);
stmt.setString(6, c.bankPin1);
stmt.setString(7, c.bankPin2);
stmt.setString(8, c.bankPin3);
stmt.setString(9, c.bankPin4);
stmt.setString(10, c.heightLevel);
stmt.setString(11, c.absX);
stmt.setString(12, c.absY);
stmt.setString(13, c.crystalBowArrowCount);
stmt.setString(14, c.degradeTime);
stmt.setString(15, c.skullTimer);
stmt.setString(16, c.earningPotential);
stmt.setString(17, c.dungeonPoints);
stmt.setString(19, c.vlsLeft);

stmt.executeUpdate(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T06:33:46.333

您的代码容易受到`SQL Injection`. 为了避免这种情况，请使用**[JAVA PreparedStatement](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)**。除此之外，它还允许您在数据库中插入具有单引号的记录。Prepared Statement的一个例子是这样的：

```
PreparedStatement updateSales = con.prepareStatement(
        "INSERT INTO tableName(colA, colB) VALUES (?, ?)");
updateSales.setInt(1, 75); 
updateSales.setString(2, "Colombian"); 
updateSales.executeUpdate(); 
```

**请记住始终清理您的输入。**

回到你的问题，你可以使用`INSERT...ON DUPLICATE KEY UPDATE`

例如，（您的用户名必须是`UNIQUE`）

```
INSERT INTO `users` (`username`, `password`, `rights`, 
                    `address`, `hasbankpin`, `bankpin1`, 
                    `bankpin2`, `bankpin3`, `bankpin4`, `height`, 
                    `posx`, `posy`, `cbowcount`, `vls`, `skulltime`, 
                   `ep`, `dpoints`, `vlsleft`) 
VALUES ('','', .....other values...., '')
ON DUPLICATE KEY 
UPDATE `password` = '', 
       `rights` = '',
       ... other values here 
```

# android - 打开具有特定输入类型的软键盘

> ID：11981687
> 
> 赞同：1
> 
> 时间：2012-08-16T06:20:28.983
> 
> 标签：android, android-softkeyboard

我在 WebView 中使用 HTML 表单。当我的类型是电子邮件或网址时，我想打开特定的软键盘。在应用程序中，我们可以通过在 EditText 中指定`android:inputType="textEmailAddress"`或来完成。`android:inputType="textUri"`

在我的场景中，我没有编辑文本。好吧，只要我专注于输入类型的电子邮件或 html 中的 url，我就可以使用 JavaScript 接口调用我的 java 方法。但我没有找到任何 API 来打开 inputType textUri 或 textEmailAddress 的软键盘。

有谁知道该怎么做？提前致谢。

# google-app-engine - URL Fetch 是否使用 GAE 的代理缓存？

> ID：11981688
> 
> 赞同：3
> 
> 时间：2012-08-16T06:20:31.333
> 
> 标签：google-app-engine, caching, proxy, urlfetch

我想知道，如果 Google App Engine 的服务[URL Fetch](https://developers.google.com/appengine/docs/python/urlfetch/)使用代理缓存，这是[在其他线程](https://stackoverflow.com/questions/3947643/details-on-google-app-engines-caching-proxy)中讨论的？我的问题是：如果我在 GAE 上使用 URL Fetch 从我的应用程序向我的应用程序（到某个处理程序）发送请求，结果会缓存在这个代理中吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T07:59:04.257

[在 URLFetch 上](https://developers.google.com/appengine/docs/python/urlfetch/overview#Request_Headers)设置[适当](https://stackoverflow.com/questions/1046966/whats-the-difference-between-cache-control-max-age-0-and-no-cache) 的标头：`Cache-control`

**Python**

```
result = urlfetch.fetch(url, headers = {'Cache-Control' : 'max-age=0, must-revalidate'}) 
```

**去**

```
client := urlfetch.Client(c)
req, err := http.NewRequest("GET", check.Url, nil)
req.Header.Add("Cache-Control", `max-age=0, must-revalidate`)
resp, err := client.Do(req) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:09:13.100

只要您设置了`Cache-Control`标头并且您没有请求相同的 url（即，来自 foo 的 url foo），这将起作用。

但是，我建议使用 memcache 来缓存所需网页的响应。这将比调用 urlfetch 快得多，并且会给您更好的控制和保证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T08:30:13.763

我只是在这里推测您的应用程序的设计，但是为什么您需要使用 UrlFetch API 来检索您可以轻松实例化并直接使用业务逻辑类的东西？

另请注意[Urlfetch 文档](https://developers.google.com/appengine/docs/python/urlfetch/overview)中的这一点：

> 为了防止应用程序导致请求的无限递归，不允许请求处理程序获取自己的 URL。

如果您真的被迫这样做，`Cache-Control`请在您的请求中设置正确的标头：

```
headers = {'Cache-Control':'no-cache,max-age=0', 'Pragma':'no-cache'}
result = urlfetch.fetch("http://foo/route", None, urlfetch.GET, headers) 
```

看看这个[问题](http://code.google.com/p/googleappengine/issues/detail?id=739#c5)。

# java - 扩展类时可重入锁？

> ID：11981696
> 
> 赞同：3
> 
> 时间：2012-08-16T06:21:33.613
> 
> 标签：java, concurrency, synchronized, reentrancy

给定以下示例： ![在此处输入图像描述](../Images/a32547a639c3856bce1b9bf6c5d3b7fa.png)

这个例子来自“Java Concurrency in Practice”。

有一条评论：

> 因为 Widget 和 LoggingWidget 中的 doSomething 方法都是同步的，所以在继续之前，它们都会尝试获取 Widget 上的锁。

为什么`doSomething`LoggingWidget类中的方法需要获取锁`Widget`？如果是这样，in 方法的on`synchronized`就没用了，对吧？`doSomething``LoggingWidget`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:11:07.470

> 为什么LoggingWidget类中的doSomething方法需要获取Widget的锁？

假设您要确保 2 个线程不能`LoggingWidget#doSomething()`同时运行（在此示例中，您可能要确保在 print 语句和对 的调用之间没有修改对象`super.doSomething()`），那么您需要使方法同步.

如果你不这样做，一个线程（T1）可以开始运行`LoggingWidget#doSomething()`并打印对象，另一个线程（T2）也可以开始运行`LoggingWidget#doSomething()`（方法不同步）并再次打印对象，然后 T2 可以运行`super.doSomething()`哪个（假设) 更改对象，然后 T1 将执行`super.doSomething()`，但对象的状态将不同于它打印的状态，因为 T2 在此期间进行了更改。

防止这种情况的一种方法是使方法同步。

> 因为 Widget 和 LoggingWidget 中的 doSomething 方法都是同步的，所以在继续之前，它们都会尝试获取 Widget 上的锁。

可重入意味着给定线程可以重新获取它已经持有的锁。在这种情况下，当一个线程进入时，因为方法是同步的`LoggingWidget#doSomething()`，所以它获取。`this`当它运行时`super.doSomething()`，它需要重新获取相同的锁。它的内在锁不是可重入的，线程将永远阻塞在那里，试图获取它已经持有并且不会释放 = 死锁的锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:29:12.703

重入锁通过对已经被锁的对象重新获取锁来避免重复。现在，重要的是释放锁不会释放所有的锁。JVM内部维护计数器，每次在对象上获取锁时递增，每次释放锁时递减。因此，这种机制不仅避免了死锁，而且通过保持计数来保持正确性。

# php - 带复选框的多重搜索

> ID：11981699
> 
> 赞同：0
> 
> 时间：2012-08-16T06:21:58.353
> 
> 标签：php, mysql, html

我在使用复选框进行搜索时遇到了一些问题。基本上，我有一些有注册日期的数据，我需要按月搜索并根据选定的月份或月份检索数据。

我正在使用 php 和 mysql。

这里我有一个简单的html：

* * *

```
<ul>
<li><input type="checkbox" name="month_in" value="1" />January</li>
<li><input type="checkbox" name="month_in" value="2" />February</li>
<li><input type="checkbox" name="month_in" value="3" />March</li>
<li><input type="checkbox" name="month_in" value="4" />April</li>
<li><input type="checkbox" name="month_in" value="5" />May</li>
<li><input type="checkbox" name="month_in" value="6" />June</li>
<li><input type="checkbox" name="month_in" value="7" />July</li>
<li><input type="checkbox" name="month_in" value="8" />August</li>
<li><input type="checkbox" name="month_in" value="9" />September</li>
<li><input type="checkbox" name="month_in" value="10" />October</li>
<li><input type="checkbox" name="month_in" value="11" />November</li>
<li><input type="checkbox" name="month_in" value="12" />December</li>
<li><input type="submit" value="Search"></li>
</ul> 
```

* * *

和部分 php+mysql 代码：

```
$search=$_POST["month_in"];

$qry=mysql_query("select * from table where MONTH(dor) like '%{$search}%'"); 
```

问题是上面的代码只有在用户只检查一个月的情况下才有效，但如果用户检查了 2 个月或更长时间，它只检索最高月份的信息（我的意思是，如果用户检查了 1 月、3 月、4 月和 8 月，它会给出结果仅八月）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:25:27.647

使用数组`name`作为复选框的属性

```
<ul>
    <li><input type="checkbox" name="month_in[]" value="1" />January</li>
    <li><input type="checkbox" name="month_in[]" value="2" />February</li>
    <li><input type="checkbox" name="month_in[]" value="3" />March</li>
    <li><input type="checkbox" name="month_in[]" value="4" />April</li>
    <li><input type="checkbox" name="month_in[]" value="5" />May</li>
    <li><input type="checkbox" name="month_in[]" value="6" />June</li>
    <li><input type="checkbox" name="month_in[]" value="7" />July</li>
    <li><input type="checkbox" name="month_in[]" value="8" />August</li>
    <li><input type="checkbox" name="month_in[]" value="9" />September</li>
    <li><input type="checkbox" name="month_in[]" value="10" />October</li>
    <li><input type="checkbox" name="month_in[]" value="11" />November</li>
    <li><input type="checkbox" name="month_in[]" value="12" />December</li>
    <li><input type="submit" value="Search"></li>
    </ul> 
```

使用`IN`关键字检索结果

```
$search=$_POST["month_in"];
$search_string = implode(', ', $search);
$qry=mysql_query("select * from table where MONTH(dor) IN ($search_string)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T06:29:48.627

问题是即使用户选择了多个复选框，最后一个选中的复选框的值也会被发送回您的 php 脚本。如果您想以数组格式发布多个值，请将复选框的 name 属性从 更改`name="month_in"`为`name="month_in[]"`。因此，您将收到一个包含月份的数字数组。

```
 array(10, 12);

 //fetch and make it a comma separated string using implode() php string function
 $csvSearch = implode(',', $_POST["month_in"]);
 $qry=mysql_query("SELECT * FROM table WHERE FIND_IN_SET(dor, '$csvSearch')"); 
```

# actionscript-3 - 安全沙箱违规无法从 box.net 加载数据

> ID：11981702
> 
> 赞同：0
> 
> 时间：2012-08-16T06:22:02.457
> 
> 标签：actionscript-3, apache-flex, google-app-engine, flex4.5, box-api

我有一个向 box.net 上传/下载文件的应用程序。该应用程序在未部署在服务器上时工作正常，但当我将其部署在 Google App Engine 上时遇到以下错误。

> 错误 #2044：未处理的安全错误：。text=Error #2048: 违反安全沙箱：[http://somexyz.appspot.com/xyzsample.swf](http://somexyz.appspot.com/xyzsample.swf)无法从[http://box.net/api/1.0/download/abcdef/123456](http://box.net/api/1.0/download/abcdef/123456)加载数据。

我在 as3 中包含了以下代码行

```
Security.allowDomain("*"); 
```

并将 crossdomain.xml 放在应用根文件夹（Google App Engine）中，并且可以使用**somexyz.appspot.com/crossdomain.xml访问该文件**

crossdomain.xml 包含以下行

```
<?xml version="1.0"?> 

<!DOCTYPE cross-domain-policy SYSTEM "/xml/dtds/cross-domain-policy.dtd"> 

<cross-domain-policy>

   <site-control permitted-cross-domain-policies="all"/>

   <allow-access-from domain="*" to-ports="*"/>

   <allow-http-request-headers-from domain="*" headers="*"/>

   <allow-http-request-headers-from domain="*"/>

</cross-domain-policy> 
```

当我尝试使用 tomcat 时，我也遇到了同样的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T07:18:40.107

如果您从 box.net 加载，则需要检查`http://box.net/crossdomain.xml`

在那里你可以阅读以下内容：

```
<!--
Box has recently changed its crossdomain policy for API calls made from Flash.
To continue using Box API, please add the following line to the code of your Flash
application:
- AS2: System.security.loadPolicyFile("http://www.box.net/api/crossdomain.xml");
- AS3: Security.loadPolicyFile("http://www.box.net/api/crossdomain.xml");
--> 
```

**更新**

请确保您正确添加它：

```
Security.loadPolicyFile("http://www.box.net/api/crossdomain.xml") 
```

加载时：

```
*.load('http://www.box.net/api/1.0/download/abcdef/123456'); 
```

以便服务器的路径相同： http: **//www.box.net/**

对于 flash，[http://www.box.net/](http://www.box.net/)和[http://box.net/](http://box.net/)是 2 个不同的域名。

# dotnetnuke - 在页面上添加 DNN 模块时出现 DNN 错误

> ID：11981703
> 
> 赞同：0
> 
> 时间：2012-08-16T06:22:13.943
> 
> 标签：dotnetnuke

每当我尝试在我的页面上添加模块时，我都会收到 dotnet nuke 错误。它在我的本地系统上运行良好，但在服务器上给了我 dotnet nuke 错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:03:58.050

您是否正在运行任何自定义 URL 提供程序，例如 Ifinity 的 URLMaster？如果是这样，请务必升级到最新版本。

如果不是，您收到的具体错误是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T15:06:37.360

还要检查您的 \Portals_default\Logs\ 文件夹中是否有任何可能为您提供有关错误线索的日志

# c# - 如何结合这两个 LINQ 语句？

> ID：11981705
> 
> 赞同：1
> 
> 时间：2012-08-16T06:22:37.797
> 
> 标签：c#, linq, entity-framework

如何将这两个 LINQ 语句合并为一个？

```
var Priority = repository.GetMany<Letter>(l => l.UserID == currentUser.ID)
                         .Select(l => l.Priority)
                         .FirstOrDefault();
var User = repository.GetMany<Letter>(l => l.Priority > Priority)
                     .Select(l => l.User)
                     .FirstOrDefault(); 
```

我需要获取当前用户的优先级，然后获取具有下一个优先级的下一个用户。例如，如果优先级`currentUser`为 1，我需要获取优先级 == 2 的用户。

例子：

```
letter=new letter { 
    User=Mark, Priority=1
    User=Raha, Priority=2
    User=Searah, Priority=3
} 
```

当 currentUser 是优先级 = 1 的标记时，我需要获取优先级 = 2 的用户，在这个示例中 Raha！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:36:20.277

假设您的 GetMany 确实只是 Where 调用，因此它们返回 IQueryable，以下应该可以解决我认为的问题：

```
var users = repository
    .GetMany<Letter>(l => l.Priority > (
        repository.GetMany<Letter>(
            l2 => l2.UserID = currentUser.ID
        )
        .Select(l2 => l2.Priority)
        .First()
    )
    .OrderBy(l => l.Priority)
    .Select(l => l.User)
    .Take(1); 
```

您的第一个查询基本上只是插入到第二个查询中。

# linux - 在 Linux 上将 hwclock 设置为 UTC

> ID：11981709
> 
> 赞同：5
> 
> 时间：2012-08-16T06:23:05.520
> 
> 标签：linux, timezone, centos, clock, reboot

我如何将centos上的hwclock永久设置为UTC时间。重启时值从UTC更改为本地时间。这导致我的应用程序有时间漂移。/etc/sysconfig文件的UTC值在重启后也会从true切换为false。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:48:51.400

运行命令，

```
sudo hwclock --systohc --utc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:26:16.963

在 /etc/sysconfig/clock 配置文件中将 UTC 设置为 true

# java - 如果每个异常捕获都应该记录它？

> ID：11981713
> 
> 赞同：2
> 
> 时间：2012-08-16T06:23:34.443
> 
> 标签：java, exception

有些书提到跟随模式不好。它说每个异常如果被重新抛出不应该记录它以避免重复异常日志。？还有其他问题吗？

我很困惑，如果我在重新抛出异常时无法记录任何异常，是否存在问题？

或者如果我记录它，如果每个人都这样做会生成太多日志，我会感到困惑。

```
catch (NoUserException e) { 

    LOG.error("No user available", e); 

    throw new UserServiceException("No user available", e); 

} 
```

参考 [http://today.java.net/pub/a/today/2006/04/06/exception-handling-antipatterns.html#logAndThrow](http://today.java.net/pub/a/today/2006/04/06/exception-handling-antipatterns.html#logAndThrow)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:27:10.520

我不确定你提到的书，但对我来说，作为一个必须调试代码并找到错误根本原因的人，我想稍后在尽可能接近的日志中阅读它到它第一次触发的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:28:00.213

每个 LOG 函数都有一个开关来禁用该日志消息，因此如果出现意外情况，您必须记录所有异常。如果您预期该异常，例如您检查字符串是否为数字并且您想知道异常的结果，那么您不需要执行 Log。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T06:31:28.103

就异常而言，最重要的日志消息应该位于服务层。重要的是保留整个堆栈跟踪，以便即使在多次重新抛出后也可以轻松定位问题。您始终可以将日志放在所有层中并操作某些层的日志记录级别，以仅查看您当前正在调试/工作的层的日志。其他日志可以设置为关闭。阅读您最喜欢的记录器的文档以了解更多信息。

# bash - 如何快速找到一个目录下的所有git repos

> ID：11981716
> 
> 赞同：58
> 
> 时间：2012-08-16T06:23:58.367
> 
> 标签：bash

以下 bash 脚本在扫描 .git 目录时速度很慢，因为它会查看每个目录。如果我有一个大型存储库的集合，find 需要很长时间才能遍历每个目录，寻找 .git。一旦找到 .git 目录，如果它会修剪 repos 中的目录，它会更快。关于如何做到这一点的任何想法，或者是否有另一种方法来编写完成同样事情的 bash 脚本？

```
#!/bin/bash

# Update all git directories below current directory or specified directory

HIGHLIGHT="\e[01;34m"
NORMAL='\e[00m'

DIR=.
if [ "$1" != "" ]; then DIR=$1; fi
cd $DIR>/dev/null; echo -e "${HIGHLIGHT}Scanning ${PWD}${NORMAL}"; cd ->/dev/null

for d in `find . -name .git -type d`; do
  cd $d/.. > /dev/null
  echo -e "\n${HIGHLIGHT}Updating `pwd`$NORMAL"
  git pull
  cd - > /dev/null
done 
```

* * *

具体来说，您将如何使用这些选项？对于这个问题，不能假设repos的集合都在同一个目录下；它们可能位于嵌套目录中。

```
top
  repo1
  dirA

  dirB
     dirC
        repo1 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-17T02:11:22.860

查看丹尼斯在这篇文章中关于 find 的 -prune 选项的回答：

[如何在sh中使用'find'的'-prune'选项？](https://stackoverflow.com/questions/1489277/how-to-use-prune-option-of-find-in-sh)

```
find . -name .git -type d -prune 
```

会加快速度，因为 find 不会进入 .git 目录，但它仍然会进入 git 存储库，寻找其他 .git 文件夹。这“可能”是一项昂贵的操作。

如果有某种查找前瞻修剪机制会很酷，如果一个文件夹有一个名为 .git 的子文件夹，那么在那个文件夹上修剪......

也就是说，我打赌您的瓶颈在于网络操作“git pull”，而不是在 find 命令中，正如其他人在评论中发布的那样。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-17T17:58:26.750

这是一个优化的解决方案：

```
#!/bin/bash
# Update all git directories below current directory or specified directory
# Skips directories that contain a file called .ignore

HIGHLIGHT="\e[01;34m"
NORMAL='\e[00m'

function update {
  local d="$1"
  if [ -d "$d" ]; then
    if [ -e "$d/.ignore" ]; then 
      echo -e "\n${HIGHLIGHT}Ignoring $d${NORMAL}"
    else
      cd $d > /dev/null
      if [ -d ".git" ]; then
        echo -e "\n${HIGHLIGHT}Updating `pwd`$NORMAL"
        git pull
      else
        scan *
      fi
      cd .. > /dev/null
    fi
  fi
  #echo "Exiting update: pwd=`pwd`"
}

function scan {
  #echo "`pwd`"
  for x in $*; do
    update "$x"
  done
}

if [ "$1" != "" ]; then cd $1 > /dev/null; fi
echo -e "${HIGHLIGHT}Scanning ${PWD}${NORMAL}"
scan * 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-04-28T14:42:02.093

我已经花时间将脚本复制粘贴到您的问题中，并将其与您自己的答案的脚本进行比较。这里有一些有趣的结果：

请注意：

*   我`git pull`通过在它们前面加上前缀来禁用`echo`
*   我也删除了颜色的东西
*   我还删除`.ignore`了解决方案中的文件测试`bash`。
*   `> /dev/null`并在这里和那里删除了不必要的东西。
*   删除`pwd`了两者中的调用。
*   添加了示例`-prune`中显然缺少的`find`
*   `find`使用“while”而不是“for”，这在示例中也适得其反
*   相当多地解开了第二个例子以达到重点。
*   添加了对`bash`解决方案的测试以不遵循符号链接以避免循环并充当查找解决方案。
*   添加`shopt`以允许`*`扩展为虚线目录名称，以匹配`find`解决方案的功能。

因此，我们正在比较**基于查找的解决方案**：

```
#!/bin/bash

find . -name .git -type d -prune | while read d; do
   cd $d/..
   echo "$PWD >" git pull
   cd $OLDPWD
done 
```

使用**bash shell 构建解决方案**：

```
#!/bin/bash

shopt -s dotglob

update() {
    for d in "$@"; do
        test -d "$d" -a \! -L "$d" || continue
        cd "$d"
        if [ -d ".git" ]; then
            echo "$PWD >" git pull
        else
            update *
        fi
        cd ..
    done
}

update * 
```

注意：内置函数 (`function`和`for`) 不受 MAX_ARGS OS 启动进程的限制。所以`*`不会在非常大的目录上收支平衡。

**解决方案之间的技术差异：**

基于查找的解决方案使用 C 函数来爬取存储库，它：

*   必须为该`find`命令加载一个新进程。
*   将避免“.git”内容，但会抓取 git 存储库的工作目录，并在其中丢失一些时间（并最终找到更多匹配的元素）。
*   每次匹配都必须`chdir`通过几个深度的子目录并返回。
*   必须`chdir`在 find 命令中执行一次，在 bash 部分中执行一次。

基于 bash 的解决方案使用内置（因此接近 C 实现，但已解释）来爬取存储库，请注意：

*   将只使用一个进程。
*   将避免 git workdir 子目录。
*   一次只会执行`chdir`一个级别。
*   只会执行`chdir`一次查找和执行命令。

**解决方案之间的实际速度结果：**

我有一个 git 存储库的工作开发集合，我在其上启动了脚本：

*   找到解决方案：~0.080s（bash chdir 需要 ~0.010s）
*   bash 解决方案：~0.017s

我不得不承认，我没有准备好从 bash 内置函数中看到这样的胜利。在对发生的事情进行分析后，它变得更加明显和正常。雪上加霜，如果您将外壳从`/bin/bash`to更改`/bin/sh`（您必须注释掉该`shopt`行，并准备好它不会解析虚线目录），您将跌至 ~0.008s 。打败那个 ！

请注意，您可以使用以下方法更聪明地使用 find 解决方案：

```
find . -type d \( -exec /usr/bin/test -d "{}/.git" -a "{}" != "." \; -print -prune \
       -o -name .git -prune \) 
```

这将有效地删除在找到的 git 存储库中对所有子存储库的爬取，其代价是为每个爬取的目录生成一个进程。我得到的最终 find 解决方案大约是 ~0.030s，比之前的 find 版本快两倍多，但仍然比 bash 解决方案慢 2 倍。

请注意，`/usr/bin/test`避免搜索`$PATH`花费时间很重要，而且我需要`-o -name .git -prune`，`-a "{}" != "."`因为我的主存储库本身就是一个 git 子存储库。

作为结论，我不会使用 bash 内置解决方案，因为它对我来说有太多的极端情况（而且我的第一次测试遇到了一个限制）。但对我来说重要的是要解释为什么在某些情况下它可以（快得多），但`find`解决方案对我来说似乎更加健壮和一致。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-09-26T12:12:30.660

最重要的答案都依赖于找到一个“.git”存储库。然而，并不是所有的 git repos 都有这些（例如，bare repos）。以下命令将遍历所有目录并询问 git 是否将每个目录视为一个目录。如果是这样，它会从树上剪掉子目录并继续。

```
find . -type d -exec sh -c 'cd "{}"; git rev-parse --git-dir 2> /dev/null 1>&2' \; -prune -print 
```

它比其他解决方案慢很多，因为它在每个目录中执行一个命令，但它不依赖于特定的存储库结构。例如，对于查找裸 git 存储库可能很有用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-12-18T18:53:29.420

对于 Windows，您可以将以下内容放入名为 gitlist.bat 的批处理文件中，并将其放在您的 PATH 中。

```
@echo off
if {%1}=={} goto :usage
for /r %1 /d %%I in (.) do echo %%I | find ".git\."
goto :eof
:usage
echo usage: gitlist ^<path^> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-13T16:04:54.993

我使用以下命令列出当前目录中任何位置的所有 git 存储库：

```
find . -type d -execdir test -d {}/.git \\; -prune -print 
```

这很快，因为一旦找到 git 存储库它就会停止递归。（虽然它不处理裸存储库。）当然，您可以将 更改为`.`您想要的任何目录。如果需要，您可以将 更改`-print`为`-print0`空分隔值。

要同时*忽略*包含`.ignore`文件的目录：

```
find . -type d \( -execdir test -e {}/.ignore \; -prune \) -o \( -execdir test -d {}/.git \; -prune -print \) 
```

我已将此别名添加到我的`~/.gitconfig`文件中：

```
[alias]
  repos =  !"find -type d -execdir test -d {}/.git \\; -prune -print" 
```

然后我只需要执行：

```
git repos 
```

获取当前目录中任何位置的所有 git 存储库的完整列表。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-05T00:27:14.903

使用 locate 命令查看答案： [有没有办法在终端中列出 git 存储库？](https://stackoverflow.com/questions/5101485/is-there-any-way-to-list-up-git-repositories-in-terminal)

使用 locate 而不是自定义脚本的优点是：

1.  搜索已编入索引，因此可以扩展
2.  它不需要使用（和维护）自定义 bash 脚本

使用定位的缺点是：

1.  locate 使用的数据库每周更新一次，因此新创建的 git 存储库不会出现

走定位路线，这里是如何列出一个目录下的所有 git 存储库，对于 OS X：

启用定位索引（在 Linux 上会有所不同）：

```
sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.locate.plist 
```

索引完成后运行此命令（可能需要对 Linux 进行一些调整）：

```
repoBasePath=$HOME
locate '.git' | egrep '.git$' | egrep "^$repoBasePath" | xargs -I {} dirname "{}" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-14T12:17:15.927

这个答案结合了@Greg Barrett 提供的部分答案和我上面的优化答案。

```
#!/bin/bash

# Update all git directories below current directory or specified directory
# Skips directories that contain a file called .ignore

HIGHLIGHT="\e[01;34m"
NORMAL='\e[00m'

export PATH=${PATH/':./:'/:}
export PATH=${PATH/':./bin:'/:}
#echo "$PATH"

DIRS="$( find "$@" -type d \( -execdir test -e {}/.ignore \; -prune \) -o \( -execdir test -d {}/.git \; -prune -print \) )"

echo -e "${HIGHLIGHT}Scanning ${PWD}${NORMAL}"
for d in $DIRS; do
  cd "$d" > /dev/null
  echo -e "\n${HIGHLIGHT}Updating `pwd`$NORMAL"
  git pull 2> >(sed -e 's/X11 forwarding request failed on channel 0//')
  cd - > /dev/null
done 
```

# iphone - 哪种声音格式最适合 cocos2d 游戏项目？

> ID：11981720
> 
> 赞同：1
> 
> 时间：2012-08-16T06:24:20.423
> 
> 标签：iphone, ios, ios5, cocos2d-iphone

我是 cocos2d 的新手，很难找到 cocos2d 支持的最佳文件格式？如果是的话我可以使用ogg文件格式然后请任何链接如何使用它是cocos2d

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:50:29.353

iOS 上没有 ogg。这是 AVAudioPlayer[支持的音频格式列表](http://developer.apple.com/library/ios/documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html#//apple_ref/doc/uid/TP40009767-CH2-SW33)。

您还必须区分背景音频（流式音频）和音频效果。对于前者，您应该使用 mp3 并且一次只能播放一个 mp3，因为 iOS 设备一次只能使用硬件解码一个 mp3。额外的 mp3 由 CPU 解码。

对于音频效果，未压缩的 .caf 和 .wav 文件是标准的。您希望它们是 16 位、单声道并使用 11、22 或 44 kHz 的采样率，具体取决于您需要的质量。我个人会默认为 22 kHz。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T08:58:15.800

这是将音频转换为最佳 iOS 格式的方法：[单击此处](http://gamua.com/blog/2010/06/sound-on-ios-best-practices/)

打开终端并运行以下命令：

```
afconvert -f caff -d LEI16 sound.wav 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T06:36:43.517

iPhone支持的任何文件，但对我来说`.wav`文件更好。

# c# - 如何重构程序代码？

> ID：11981723
> 
> 赞同：4
> 
> 时间：2012-08-16T06:24:36.357
> 
> 标签：c#, design-patterns, refactoring

我正在为网站创建密码重置功能。必须实施密码重置的第一步：

1.  用户以密码重置形式输入他的电子邮件。
2.  系统检查是否注册了具有电子邮件的用户。
3.  如果找到用户，系统将发送带有密码重置 URL 和唯一令牌的电子邮件。
4.  如果未找到用户，系统会发送电子邮件通知已为此电子邮件启动密码重置，但用户帐户不存在。

我有实现公共方法的服务类 - RequestPasswordReset 并且此方法非常程序化：

```
public void RequestPasswordReset(string email)
{
    if(!IsValidEmail(email))
    {
        throw new ArgumentException("email");
    }

    var user = this.repository.FindByEmail(email);
    if(user != null)
    {
        user.PasswordResetToken.Set(this.tokenGenerator.NewToken());
        this.emailService.Send(this.from, 
                               user.Email, 
                               "Password reset", 
                               "Your reset url: http://mysite.com/?t=" + 
                                     user.PasswordResetToken.Value);
    }
    else
    {
    this.emailService.Send(this.from,
                        user.Email, 
                        "Requested password reset", 
                        "Someone requested password reset at http://mysite.com");
    }
} 
```

这种方法违反了单一职责原则——它检查用户的存在、重置用户令牌、发送电子邮件。

这种解决方案的主要问题是，如果我需要添加额外的步骤，我必须为那些 RequestPasswordReset 方法添加实现，并且方法变得越来越复杂。例如，其他步骤可能是检查用户是否已经在另一个相关系统中注册，我可以建议他在我的系统中创建新帐户或为他创建用户帐户。

我正在查看命令模式 - 将服务类重构为单独的命令可能会很好，RequestPasswordReset 可能是这些命令之一。但它并没有解决 RequestPasswordReset 方法中的步骤的主要问题。

我也在研究责任链模式——按顺序处理步骤会很好，但我不知道如何使用它来处理控制流——应该实现不同的条件。此外，看起来每个处理程序都应该执行类似的操作，并且不清楚整个控制流如何变化。

重构此类程序代码的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T06:46:14.897

> 这种方法违反了单一职责原则

其实我觉得不会。该服务的“单一职责”是重置用户的密码，它通过与其他对象（用户存储库和邮件服务）协调来很好地完成这项工作。如果重置密码的过程发生了变化，那么这个类也会发生变化，这并没有错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T07:16:48.407

我认为你的代码很好。如果你绝对想重构一些东西，你可能会为了简化 main 方法的可读性而将代码拆分得更多；像这样的东西：

```
public void RequestPasswordReset(string email)
{
    ValidateEmail(email); // May throw exception if invalid

    var user = this.repository.FindByEmail(email);
    if(user != null)
    {
        GenerateTokenAndSendPasswordResetEmail(user);
    }
    else
    {
        SendPasswordResetEmail(email);
    }
} 
```

除此之外，我会保持原样。你的问题真的很简单，所以没有理由去寻找一个复杂的解决方案！:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T06:51:41.767

使用此代码的最佳方法是确保对其进行彻底测试。确保所有代码路径都经过测试。

然后，*克服它*！

克服所有代码都必须遵守设计模式、单一职责原则和其他类似东西的想法。这些模式是通过检查工作代码*发现的。*

你在这里有工作代码。克服它并开始下一个任务。

# cordova - 在本地系统上为多平台创建 PhoneGap 构建，无需上传到 GIT

> ID：11981724
> 
> 赞同：0
> 
> 时间：2012-08-16T06:24:42.800
> 
> 标签：cordova, build, local

我正在寻找 PhoneGap build [https://build.phonegap.com/](https://build.phonegap.com/)的替代品。我想在我的电脑上本地构建而不上传到 GIT。

我知道我必须在我的 Windows 上安装 Android、Windows、Blackberry OS，并且我需要让 Apple 为 IOS 构建，但如果您知道如何完成此操作的确切步骤，请告诉我。

期待中的感谢。

**更新：**

我找到了一个 Wiki 页面，但运行命令给了我一个错误“发生错误” [CommandLineToolingDesign](http://wiki.apache.org/cordova/CommandLineToolingDesign)

[科尔多瓦](https://npmjs.org/package/cordova)

我已经安装了 Node JS 和 cordova。现在cordova build thworing我这个错误图片也附上了

构建项目时出错。{ 找不到指定的路径。] kill: false, code: 1, signal: null } 系统找不到指定的路径。

![看图片](../Images/5b3b09bc4d9dd9f1b07d9e72eecdff19.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T04:26:05.433

我最终使用的方法是这个 maven 插件： [http ://chrisprice.github.com/phonegap-build/phonegap-build-maven-plugin/index.html](http://chrisprice.github.com/phonegap-build/phonegap-build-maven-plugin/index.html)

它本身不是“本地构建”，但它确实消除了在尝试构建之前提交/推送代码的需要。

基本上，您在本地构建一个包，然后插件将包发送到 phonegap-build。然后它等待构建完成，检索工件并报告构建结果。对于一个普通大小的应用程序，整个过程通常需要不到一分钟的时间。

# javascript - 在 JSON 更改上运行 javascript？

> ID：11981727
> 
> 赞同：0
> 
> 时间：2012-08-16T06:25:02.160
> 
> 标签：javascript, jquery, json

我知道足够多的 jQuery/JavaScript 是危险的。我有一个 JSON 数组，我正在使用两个不同的元素（准确地说是日历和表格）与之交互。是否有可以绑定的事件处理程序（或任何其他方式），以便在 JSON 更改时刷新表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T07:01:56.057

基本编程，将 json (=string) 解析为 javascript 对象或数组。（您可能已经这样做了。）使用观察者模式的实现。

我建议好好看看@Adam Merrifield 的有趣链接。

大多数情况下，使用 getter 和 setter 可以在 setter 中触发自定义事件（或调用回调方法）是其中的关键。

[KnockoutJS](http://knockoutjs.com/)是一个很好的框架，可以帮助您进行此类绑定。它还使用可观察的 - 观察者/订阅者模式。

使用计时器并不是一个好主意.. 开销很小。（当什么都没有改变时也做一些事情。而且你总是会落后 x 毫秒（取决于轮询频率）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T07:33:31.267

您可能需要考虑 Knockout.JS 它允许双向映射，因此对模型的更改应该反映在您的视图上，反之亦然。

[http://knockoutjs.com/documentation/json-data.html](http://knockoutjs.com/documentation/json-data.html)

但是，这可能是您的开发周期的后期阶段，但需要考虑一些事情。

# r - R不会调用gfortran编译对象？

> ID：11981728
> 
> 赞同：2
> 
> 时间：2012-08-16T06:25:06.430
> 
> 标签：r, fortran

我做了一个简单的fortran例程

```
subroutine add(x,y)
    real(8) :: x,y

    y = x + 3
end subroutine 
```

保存为 test.f90。

我编译

```
gfortran -shared test.f90 -o test.so 
```

在 R 中（在同一目录中），我使用

```
dyn.load('test.so') 
```

但它给了我这个错误：

```
Error in dyn.load("test.so") : 
  unable to load shared object '/Users/Steven/Documents/PhD/npsR/test.so':
  dlopen(/Users/Steven/Documents/PhD/npsR/test.so, 6): Symbol not found: ___addtf3
  Referenced from: /usr/local/gfortran/lib/libquadmath.0.dylib
  Expected in: /Library/Frameworks/R.framework/Resources/lib/libgcc_s.1.dylib
 in /usr/local/gfortran/lib/libquadmath.0.dylib 
```

有谁知道为什么？我正在使用带有 R v2.15.0 和 gfortran 4.6.2 的 mac osx Lion。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T06:49:17.710

除非您真的了解自己在做什么，否则您应该使用[R tools](http://cran.r-project.org/bin/macosx/tools/)附带的 gfortran 。libgcc 中缺少的符号并不奇怪，因为您尝试在 4.2 运行时环境中运行使用 4.6 gfortran 编译的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T09:12:50.143

您只能使用用于构建 R 的 gfortran 版本。由于您在 Lion 上并且可能安装了 Xcode，您可以从此处获取适当版本的 gfortran：[http](http://r.research.att.com/tools/) : //r.research.att.com/tools/到部分：“Apple Xcode gcc-42 add-ons”并选择适当的版本。

如果可能的话，您必须完全摆脱您的 gfortran 4.6.2 或通过更改 PATH 使其无法访问（我怀疑除非它位于 /opt/...）。

并且使用 R CMD SHLIB 因为这会将正确的选项传递给编译器和链接器。

# php - 修复 magic_quote 受影响的数据

> ID：11981729
> 
> 赞同：2
> 
> 时间：2012-08-16T06:25:10.723
> 
> 标签：php, mysql, magic-quotes, magic-quotes-gpc

我有一个 CMS 来解决一些问题。由于托管服务已在服务器中启用 php_magic_quotes，因此它们的数据库包含带有斜线的内容。拿到项目后，我要求主办方关闭 magic_quotes，问题不再可用。但是，由于魔术引号，我需要修复现有的受影响数据。是否有任何 mysql 或 php 命令可以用来修复这些问题。一些记录受到严重影响。作为一个例子，我可以在数据库中看到类似的 `you\\\\\\'r`内容 感谢任何修复这些现有数据的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T06:29:30.227

只需用于[`stripslashes`](http://php.net/manual/en/function.stripslashes.php)对您的数据进行转义：

```
var_dump(stripslashes("you\\\\\\'r")); // string(6) "you\'r" 
```

# ios - 故事板中的自定义转场

> ID：11981731
> 
> 赞同：0
> 
> 时间：2012-08-16T06:25:18.277
> 
> 标签：ios, storyboard, xcode4.3, segue

我有一个主从应用程序。当用户在 MasterTable 中选择一行时，我想打开另一个表（不是 DetailViewController）。它应该在 MasterViewController 之外使用，类似于 iPad 上的 Facebook 应用程序。

我有一个从 MasterViewController 到这个表的自定义 segue（UITableViewController 类型的 DocumentViewController）。此 DocumentViewController 被“嵌入”在导航控制器中。

简而言之，我的故事板上的项目如下所示：

> 导航控制器->MasterViewController->导航控制器->DocumentViewController。

转场是从 MasterViewController 到 navigationController。

我是否必须在“didSelectRowAtIndexPath”中执行转场？还是我必须在 didSelectRowAtIndexPath 中使用“performSegueWithIdentifier”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:35:36.553

如果我正确理解你的问题，segue 应该是从 MasterViewController 到 DocumentViewController。确保给它一个唯一的标识符，然后在 MasterViewController的**prepareForSegue**中引用你想要做的事情。

例子：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showList"]) {

        // gets indexPath for the currently selected row in my UITableView
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];

        // pull back some useful data from Core Data according to what was selected in my UITableView.
        NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];

        // listDataItem is a property of the controller (in this case a UITableViewController)
        [[segue destinationViewController] setListDataItem:object];
    }
} 
```

# xpath - 想要 casperjs 的 xpath 结果

> ID：11981737
> 
> 赞同：0
> 
> 时间：2012-08-16T06:26:05.177
> 
> 标签：xpath, casperjs

我只是尝试将谷歌结果的所有 HTML 回显到突出。但我只得到了十次“未定义”。未定义未定义未定义未定义未定义未定义未定义未定义未定义未定义

下面是我的代码，有什么问题？

```
casper.then(
function(){
    this.echo(
    this.evaluate(function(){
        var returnHTML="";
        var elementsResult=__utils__.getElementsByXPath("id('ires')/ol/li");

        for (ele in elementsResult){
            returnHTML=returnHTML + ele.outerHTML;
        }

        return returnHTML;
    }));
}
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T14:26:58.133

你到底想做什么？您可以简单地使用`return document.getElementById('ires').innerHTML;`.

# c# - 如何在不破坏 FK 约束的情况下在数据库中创建项目的副本？

> ID：11981738
> 
> 赞同：1
> 
> 时间：2012-08-16T06:26:05.150
> 
> 标签：c#, sql, entity-framework

好的，所以我有这样的结构（不知道如何正确格式化，但我会尝试）：

*   表**位置**，包含`id, name`和`address`。
*   Table **Room**，其中包含`id, name, size`一个位置的外键。
*   Table **RoomItem**（想想桌子、椅子等），包含`id, name, type, value`房间的外键。

因此，假设我使用这种结构设置了一个包含十几个房间和一百个房间项目的位置。现在我想创建一个新位置，但我想拥有完全相同的房间和房间项目作为新位置的模板。所以基本上我想复制所有指向某个位置的房间并将它们的 FK 更改为新位置，以及复制所有指向所述房间的房间项，并将它们的 FK 更改为指向新创建的房间。

我使用的是 Entity Framework 4.3，但是任何可以从标准 c#winforms 项目中执行的东西都可以正常工作。

我的问题是弄清楚如何“正确”地做到这一点。手动完成这一切似乎很麻烦，这意味着像逐个浏览房间，复制所有字段并创建一个新字段，然后深入研究其房间项并复制它们，然后保存第一个房间，这样我就有了身份证可用。

即使把它写出来听起来也很混乱，那么有没有更好的方法来完成这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:27:26.603

我在下面提供了一种在 SQL 中执行此操作的方法。请注意，此答案受以下警告的约束：

我在没有任何开发工具或参考资料的情况下回答。这意味着答案来自我的记忆。

特别是这意味着解决方案尚未编译；它的语法和语义也可能在某些方面有所偏差。

我使用了我最了解的 sql 变体——用于 Firebird。您需要的确切语法可能因您可用的 sql 而异。

此外，我假设变量名称足以自我解释，无需进一步评论。

最后，这个答案可能会得到改进 - SELECT 语句的重复向我表明，有一种改进可以消除这种重复。

```
SET TERM !! ;

CREATE TRIGGER Deep_Copy_Room FOR Location
BEFORE INSERT
POSITION 0

AS BEGIN

NEW.id = GEN_ID (id_GEN, 1);
INSERT INTO Room (id, name, size, fk) 
       VALUES (GEN_ID(id_GEN, 1), Roo_name, Roo_Size, NEW.id) 
       WHERE SELECT id, name, size, FK_id FROM Room AS Roo_Id, Roo_name, Roo_size
               WHERE SELECT id, name, addrss FROM Location AS Loc_Id, Loc_name, Loc_address
                       WHERE fk = Copy_From_id;
INSERT INTO Item (id, name, type, value, fk_id) 
       VALUES (GEN_ID(id_GEN,1), Ite_name, Ite_type, Ite_value, Roo_id)
       WHERE SELECT id, name, type, value, FK_id FROM RoomItem AS Ite_Id, Ite_name, Ite_type, Ite_value, Roo_Id)
               WHERE SELECT id, name, size, FK_id FROM Room AS Roo_Id, Roo_name, Roo_size, Loc_id
                       WHERE SELECT id, name, address FROM Location AS Loc_Id, Loc_name, Loc_address
                               WHERE Loc_id = Copy_From_id;

END

SET TERM ; !! 
```

# android - 按下软键盘中的“完成”按钮时如何失去编辑文本的焦点？

> ID：11981740
> 
> 赞同：30
> 
> 时间：2012-08-16T06:26:12.870
> 
> 标签：android, android-edittext, android-softkeyboard

我的 xml 中有 7 个编辑文本框。我正在使用 OnFocusChangeListener 从 edittext 读取值，并且我正在使用该值进行计算。当我单击软键盘中的完成按钮时，我想让我的 edittext 失去焦点。这样我就可以得到编辑文本中的值。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-16T06:31:48.097

从软键盘单击完成按钮时调用失去焦点`clearFocus`的方法。`EditText`这样做：

```
editText.setOnEditorActionListener(new OnEditorActionListener() {        
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        if(actionId==EditorInfo.IME_ACTION_DONE){
            //Clear focus here from edittext
             editText.clearFocus();
        }
    return false;
    }
}); 
```

并添加`android:imeOptions="actionDone"`edittext xml

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-16T21:28:15.847

如果有人遇到这个问题，想知道如何在他们的活动**中一次取消所有**焦点，他们可以将**焦点设置在父布局**（或任何布局）上。

```
findViewById(R.id.myLayout).requestFocus(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-06T17:27:19.673

只是更完整的答案

```
//  This will change the ‘RETURN’ button in your the EditText’s soft keyboard to a ‘DONE’ button.
editText.setImeOptions(EditorInfo.IME_ACTION_DONE);
//  Use the InputMethodManager to close the soft keyboard
editText.setOnEditorActionListener(new OnEditorActionListener() {        
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        if(actionId==EditorInfo.IME_ACTION_DONE){
            //Clear focus here from edittext
            InputMethodManager imm = (InputMethodManager)v.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(v.getWindowToken(), 0);
        }
    return false;
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-10T14:57:54.250

Kotlin，它对我有用：

```
main.clearFocus() 
```

main 是根 ConstraintLayout

# unity3d - Unity Android:刚体

> ID：11981741
> 
> 赞同：1
> 
> 时间：2012-08-16T06:26:15.973
> 
> 标签：unity3d, rigid-bodies

我正在使用 Unity 3d 中的一个 android 项目。我会在立方体的表面滚动球体。但是，当我单击播放按钮时，它会返回错误消息：

```
Assets/Scripts/Player.js(4,1): BCE0005: Unknown identifier: 'rigidBody'. 
```

我的代码：

```
function Start () {
  rigidBody.velocity.x=15;
 } 
```

刚体组件已添加到球体中。我想为产生的错误寻求解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:23:39.703

我不知道你是否在刚体上设置了一个 GetComponent 变量，但你可能需要去掉这个案例。

例如：

```
rigidBody.velocity.x=15; 
```

将会：

```
rigidbody.velocity.x=15; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-22T22:30:28.660

1.  首先，它是“刚体”而不是“刚体”
2.  其次，从 Unity 5 + 开始，你不能再使用“刚体”了，所以你必须使用 GetComponent

恢复，要按原样使用“rigidBody”，你必须先初始化它，就像其他人已经回答你的那样：

```
//link you rigidbody here:
public Rigidbody rigidBody; 

 function Start() {
  //Or if the script is on the GameObject that has the rigidbody component:
  //rigidBody = GetComponent<Rigidbody>();
    rigidBody.velocity=new Vector2(15,0);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-17T22:27:42.703

我想你忘了初始化刚体。您也不能像这样分配速度，因为rigidBody.velocity.x 是一个只读值。此代码可能会帮助您：

```
public Rigidbody rigidBody;

function Start(){
    rigidBody.velocity=new Vector2(15,0);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-17T19:14:41.890

您尚未初始化变量“rigidBody”。我不认为这是你的目标。如果您将脚本作为组件添加到球体中，则不必使用 getComponent。相反，它将只是：

“刚体.速度.x=15；”

您可能必须使用“new Vector3(x,y,z);” 传递新的速度。在这种情况下，代码将如下所示：

Rigidbody.velocity = new Vector3(15,Rigidbody.velocity.y, Rigidbody.velocity.z)*

*   我现在在 2D 中工作，所以我的 Vector3 参数可能已关闭。
*   我认为 Rigedbody 是正确的，但它可能是刚体 - 见上文。

无论如何，不​​要忘记你的对撞机。脊状物体不会自动与其他物体碰撞，但它们会受到重力的影响。一旦我终于弄明白了，我高兴地把我的角色扔到了 20 英尺的人行道上。如果您不那么挑剔，那么渲染血液非常容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-08T04:41:12.857

对于 c#

您可能想先缓存它。

```
 private Rigidbody rigidbodyCached;

    //cache
    void Start(){
    rigidbodyCached = this.GetComponent<Rigidbody>();
    }

    //for velocity movements use FixedUpdate instead of Update
    void FixedUpdate(){
    rigidbodyCached.velocity = new Vector3(15,0,0);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-25T06:01:03.337

如果您使用小于 5 的单位（我猜），您可以使用游戏对象的组件，如刚体或音频源，但在单位 5 及更高版本中，您需要在唤醒或启动功能中添加对它的引用，如此代码

```
private Rigidbody rb;

void Start() {
     rb = GetComponent<Rigidbody>();
     // AND AFTER YOU ADDED THE REFERENCE FOR RIGIDBODY 
     // THEN CHANGE THE VELOCITY LIKE THIS
     rb.velocity.x = 20; 

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-24T13:13:31.590

您需要先在检查器中添加刚体组件，然后：

```
Rigidbody sphereRigidbody;
function Awake(){
sphereRigidbody = GetComponent<Rigidbody>();
sphereRigidbody.velocity = new  Vector3(15,0,0);
} 
```

# java - Java 控制器中的 HashMap 或 ConcurrentHashMap？

> ID：11981743
> 
> 赞同：0
> 
> 时间：2012-08-16T06:26:26.300
> 
> 标签：java, thread-safety, hashmap, concurrenthashmap

如此处所述：[Java 中的 ConcurrentHashMap？](https://stackoverflow.com/questions/2836267/concurrenthashmap-in-java)Java 的并发 hashmap 是线程安全的。Java 控制器用于 Web 请求，可以同时从 Web 调用。

我的问题是：我应该在 Java 中使用并发哈希映射而不是哈希映射吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:32:08.460

`ConcurrentHashMap`如果您将同时执行一个写入或两个并发写入，您只需要一个。如果您在初始化后从不更改地图，则常规`HashMap`就足够了。

控制器通常不应包含任何特定于请求的状态（任何此类状态都应作为参数传递给方法），如果您以这种方式设计控制器，则不需要在控制器内进行任何同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:30:45.937

如果您有多个线程访问同一个哈希图，则需要同步此访问。

您可以通过使用已实现此功能的对象（如 ConcurrentHashMap）或编写自己的同步代码并使用普通的 HashMap 来做到这一点。

# objective-c - 替换 nsmutablearray 中的对象

> ID：11981745
> 
> 赞同：0
> 
> 时间：2012-08-16T06:26:38.737
> 
> 标签：objective-c, ios, nsmutablearray, xcode4.3

我有一个`NSMutableArray`我想将标志替换为`|`我该`;`怎么做的地方？

```
NSMutableArray *paths = [dic valueForKey:@"PATH"];
NSLog(@"pathArr ",  paths)
pathArr (
    (
       "29858,39812;29858,39812;29925,39804;29936,39803;29949,39802;29961,39801;30146,39782;30173,39779;30220,39774;30222,39774|30215,39775;30173,39779;30146,39782;29961,39801;29949,39802;29936,39803;29925,39804;29858,39812;29858,39812;29856,39812;29800,39819;29668,39843;29650,39847;29613,39855;29613,39855;29613,39856;29605,39857;29603,39867;29603,39867;29599,39892;29596,39909;29587,39957;29571,40018;29563,40038;29560,40043"
    )
) 
```

**更新**

这就是我的路径

```
NSArray *BusRoute = alightDesc;
int i;
int count = [BusRoute count];
for (i = 0; i < count; i++)
{   
    NSLog (@"BusRoute = %@", [BusRoute objectAtIndex: i]);
    NSDictionary *dic = [BusRoute objectAtIndex: i];
    NSMutableArray *paths = [dic valueForKey:@"PATH"];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:35:58.063

假设您在数组路径中的对象是字符串，您可以这样做

```
NSMutableArray *path2=[[NSMutableArray alloc]initWithArray:nil];
for (NSObject *obect in path) {
    for (NSString *string in (NSArray*)obect) {
        [path2 addObject:[string stringByReplacingOccurrencesOfString:@"|" withString:@","]];
    }

}

NSLog(@"pathArr %@ ",  path2); 
```

您的数组路径包含另一个以字符串为对象的数组。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:34:35.790

您可以将路径转换或转换为 NSString ，然后执行以下操作：

```
paths  = (NSString *) [paths stringByReplacingOccurrencesOfString:@"|" withString:@";"]; 
```

如果这不起作用，请创建包含 pathArr 文本的新 NSString 实例，调用 replaceOccurrences 方法并进行反转转换

```
 NSMutableString *tempStr = [[NSMutableString alloc] init];
 for (int i = 0; i < [paths count]; i++) 
{  
   [tempStr appendString:[path objectAtIndex:i]];
} 
```

然后将此方法用于 tempStr。然后尝试：

```
NSArray *newPaths = [tempStr componentsSeparatedByString:@";"]; 
```

可能是最后一种方法不完全正确，因此请尝试使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T07:25:33.057

呃，你为什么不去：

```
NSString *cleanedString = [[[dic valueForKey:@"PATH"] objectAtIndex:0] stringByReplacingOccurrencesOfString:@";" withString:@"|"]; 
```

如果嵌套数组不止一个，可以去

```
for(int i = 0; i < [[dic valueForKey:@"PATH"] count]; i++)
{
    NSString *cleanedString = [[[dic valueForKey:@"PATH"] objectAtIndex:i] stringByReplacingOccurrencesOfString:@";" withString:@"|"];

    // do something with cleanedString
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T06:57:58.177

我这样做是为了替换 .plist 中的字符串，所以它可能对你有用

```
 array1 = [NSMutableArray arrayWithContentsOfFile:Path1];
NSString *item = [@"dfdfDF"];
[array1 replaceObjectAtIndex:1 withObject:item];

        [array1 writeToFile:Path1 atomically:YES];
    NSLog(@"count: %@", [array1 objectAtIndex:1]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T06:37:54.870

//将数组复制到字符串中

NSString *str = [路径 componentsJoinedByString:@""];

//然后替换“|”

str = [str stringByReplacingOccurrencesOfString:@"|" withString:@";"];

# bash - Bash tab 补全在第一次补全后增加了额外的空间

> ID：11981764
> 
> 赞同：23
> 
> 时间：2012-08-16T06:28:17.260
> 
> 标签：bash, tab-completion

如果完成目标是多级文件夹中的文件，则 Bash 选项卡完成会在第一次完成后停止进一步完成添加额外的空间。

例如，我在路径~/Documents/foo/bar.txt 中有一个文件，我想列出它。我在输入时遇到以下问题

```
a@b:~$ls Docu <TAB> 
```

我明白了

```
a@b:~$ls Documents |(<-this is the cursor, so there is an extra space afer Documents) 
```

所以我不能进一步完成标签。我必须退格来删除多余的空间。

通常我想得到：

```
a@b:~$ls Docu <TAB>
a@b:~$ls Documents/ <TAB>
a@b:~$ls Documents/foo/ <TAB>
a@b:~$ls Documents/foo/bar.txt 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-20T08:46:00.047

仅作记录：adobereader-enu (acroread) 包中还有一个错误会破坏 bash 完成。在这种情况下，您可以删除符号链接：

```
rm /etc/bash_completion.d/acroread.sh 
```

另请参阅：[https ://bugs.launchpad.net/ubuntu/+source/acroread/+bug/769866](https://bugs.launchpad.net/ubuntu/+source/acroread/+bug/769866)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T21:08:01.103

我在 Ubuntu 11.10 和 12.04 中完成 bash 时遇到了同样的问题。我发现通过编辑 /etc/bash_completion 可以让许多命令开始正常工作。具体来说，我注释掉了以下部分：

```
####
# makeinfo and texi2dvi are defined elsewhere.
#
#for i in a2ps awk bash bc bison cat colordiff cp csplit \
#    curl cut date df diff dir du enscript env expand fmt fold gperf gprof \
#    grep grub head indent irb ld ldd less ln ls m4 md5sum mkdir mkfifo mknod \
#    mv netstat nl nm objcopy objdump od paste patch pr ptx readelf rm rmdir \
#    sed seq sha{,1,224,256,384,512}sum shar sort split strip tac tail tee \
#    texindex touch tr uname unexpand uniq units vdir wc wget who; do
#    have $i && complete -F _longopt -o default $i
#done 
```

现在 ls 再次运行良好。我还没有弄清楚为什么 mv 仍然行为不端。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-06T18:43:40.243

[这](https://askubuntu.com/questions/41707/bash-auto-completion-with-added-spaces-why-and-how-to-fix)已在 askubuntu 上得到解答。它与[这里的错误有关](https://bugs.launchpad.net/ubuntu/+source/acroread/+bug/769866)

来自上述线程的相关答案：

> 编辑 /etc/bash_completion 第 1587 行，将默认值更改为文件名（先备份）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-28T14:47:48.660

我还通过在 /etc/bash_completion.d/acroread.sh （Ubuntu 12.04）中用 _filedir_pdf 更改 _filedir 来解决这个问题

acroread bash 补全更改了 _filedir 函数，从而改变了许多其他 alsobash 补全函数的行为

# git - 计算 git 存储库中的文件数

> ID：11981765
> 
> 赞同：2
> 
> 时间：2012-08-16T06:28:21.730
> 
> 标签：git, git-remote

是否有可能在不克隆的情况下计算 git 远程存储库中的文件数？在 CVS 中，我们将使用

```
cvs rls -lR $OldSrc $ProjectName'"  | grep -v -e '^\$' -e '$ProjectName' -e '^d' | wc -l 
```

在哪里 ，

```
 OldSrc --> Tag name [optional]
    ProjectName --> Actual project repository name. 
```

请告诉我 git 中方便的命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:01:33.613

你不能远程做到这一点。您必须克隆 git 存储库或 ssh 到远程计算机以查看存储库。

拥有存储库后，您可以列出文件，例如，

```
git show master^{tree} 
```

您可以替换`master`为您感兴趣的分支/提交的名称。此命令也适用于裸存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:42:44.897

我不会为此使用 Git，我会使用`find`. 从 Git 工作副本的根目录运行以下命令：

```
find * -type f | wc -l 
```

# grails - 是否可以禁用 grails 插件的 BootStrap？

> ID：11981771
> 
> 赞同：2
> 
> 时间：2012-08-16T06:28:45.013
> 
> 标签：grails, plugins, grails-plugin

在这篇文章中，它描述了如何启用 grails 插件的 BootStrap：插件中[是否存在与 Bootstrap 类等效的类](https://stackoverflow.com/questions/2994379/is-there-an-equivalent-to-the-bootstrap-class-in-a-plugin)。

如果 3rd 方插件以这种方式包含 BootStrap，是否可以强制*exclude* `MyPluginBootStrap`或至少阻止其执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:12:02.010

非常简单的解决方案 - 通过在应用程序中创建具有相同名称的引导文件（在您的情况下为 MyPluginBootStrap.grotovy）来覆盖它。

# android - 将文本视图动态添加到线性布局

> ID：11981772
> 
> 赞同：0
> 
> 时间：2012-08-16T06:28:49.633
> 
> 标签：android, android-layout, android-linearlayout, textview

我想动态地将 textview 添加到线性布局中。

我使用了以下代码：

```
 LinearLayout ll = (LinearLayout)findViewById(R.id.viewlayout);
    LinearLayout.LayoutParams lp = new    LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
    TextView tv = new TextView(viewrecords.this);
    tv.setId(1);
    tv.setTextSize(15);
    tv.setText("test adding");
    tv.setLayoutParams(lp);
    ll.addView(tv); 
```

我没有添加文本视图。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T06:36:36.757

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
// setContentView(R.layout.rainbow);
TextView tv1 = new TextView(this);
tv1.setText("FIRST");
tv1.setTextSize(10);
tv1.setGravity(Gravity.CENTER);

TextView tv2 = new TextView(this);
tv2.setTextSize(10);
tv2.setGravity(Gravity.CENTER);
tv2.setText("MIDDLE");

TextView tv3 = new TextView(this);
tv3.setTextSize(10);
tv3.setGravity(Gravity.CENTER);
tv3.setText("LAST");

LinearLayout ll = new LinearLayout(this);
ll.setOrientation(LinearLayout.VERTICAL);
ll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
ll.setGravity(Gravity.CENTER);
ll.addView(tv1);
ll.addView(tv2);
ll.addView(tv3);    
setContentView(ll);
} 
```

看到这个例子我们很清楚[http://mobile.tutsplus.com/tutorials/android/android-sdk_linear-layouts_2/](http://mobile.tutsplus.com/tutorials/android/android-sdk_linear-layouts_2/)

# c# - 从另一个类访问主类的成员

> ID：11981775
> 
> 赞同：0
> 
> 时间：2012-08-16T06:28:55.183
> 
> 标签：c#, tabcontrol, main, tabpage

我的 Windows 窗体应用程序包含一些用于不同类别的标签页，其中包含树视图。我有一个全局搜索，可以从该类别中找到项目（在类别/标签页中，项目是树视图中的节点）。当找到某个项目时，我想跳转到右侧的标签页和节点。找到正确的节点并不难，但我如何访问 Main 类并从另一个类更改 TabControl 中选定的 TabPage？

# c++ - 一个类的实例是否仍然在同一进程内的线程之间共享相同的静态成员？

> ID：11981776
> 
> 赞同：0
> 
> 时间：2012-08-16T06:28:56.667
> 
> 标签：c++, operating-system

那共享静态成员的范围是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:32:27.620

是的，一个类`static`成员在该类的所有实例之间共享。可以通过标记来限制它的范围`public`，`protected`或者`private`。如果您要让多个线程同时访问/改变`static`成员，那么您将需要同步此访问，例如通过互斥锁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T06:43:36.957

是的，`static`存储持续时间意味着有问题的变量在进程启动时就存在，并且在进程结束之前被释放。它由进程的所有线程共享，访问它会导致线程之间的数据竞争，就像使用全局变量一样。

C++11 引入了一个新的存储持续时间说明符`thread_local`，使用它意味着每个单独的线程中都有一个变量实例。它在线程开始时分配。

不幸的是，还没有一个主要的编译器（GCC、Clang、VC++）完全实现了这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T06:30:30.197

是的，线程不会影响静态存储。您可以将`static`成员视为全局变量。所以修改 a`static`不是线程安全的，需要考虑。

# javascript - jqueryMobile 应用程序无法使用 jquryMobile 框架 js 和 css 文件相对路径

> ID：11981779
> 
> 赞同：0
> 
> 时间：2012-08-16T06:29:03.567
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我正在使用 jquerymobile 框架创建一个应用程序。

我的应用程序在 localhost 上按需要工作，但是一旦我将应用程序上传到服务器上，Javascript 和 css 就无法工作，并且我的应用程序用户界面和功能正在被破坏。

如果我替换 javascript 和 css 相对路径

```
<link rel="stylesheet" href="webroot/css/jquery.mobile.css" />
<script src="webroot/js/jquery.js"></script>
<script src="webroot/js/jquery.mobile.js"></script> 
```

到绝对 jqueryMobile 框架路径

```
<link rel="stylesheet"  href="http://jquerymobile.com/test/css/themes/default/jquery.mobile.css" />
<script src="http://jquerymobile.com/test/js/jquery.js"></script>
<script src="http://jquerymobile.com/test/js/jquery.mobile.js"></script> 
```

. 有用。

**但是在 localhost 上，JS 和 CSS 文件的相对路径是有效的。**

请建议，错误在哪里，在我的应用程序或 jqueryMobile js 和 css 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:39:00.800

也许如果你试试这个：

```
<link rel="stylesheet" href="/webroot/css/jquery.mobile.css">
<script src="/webroot/js/jquery.js"></script>
<script src="/webroot/js/jquery.mobile.js"></script> 
```

注意开头的斜线？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:37:11.213

使用 filezilla 在服务器上上传文件时，我认为文件没有成功上传。然后我将 filezilla 默认传输类型设置更改为二进制。不是它工作正常。

如果要更改此设置，请转到编辑 > 设置 > 连接 > 传输 > 文件类型

将“默认传输类型”自动更改为二进制。按确定按钮

它对我有用。

# html - 在 Chrome 和 IE 上移动的导航栏按钮

> ID：11981780
> 
> 赞同：0
> 
> 时间：2012-08-16T06:29:17.253
> 
> 标签：html, css, button, navigationbar

我在使用 Chrome 和 IE 时遇到了一个小问题。

在 Firefox 上，我的按钮在导航栏中完全居中，但在 Chrome 和 IE 上，我的按钮高 1 个像素，左几个像素。

谁能帮我解决这个问题？

这是网址和代码： http: [//nonlocalhost.uphero.com/petshopindex.html](http://nonlocalhost.uphero.com/petshopindex.html)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>Pet Shop</title>

    <style type="text/css">
        /* Background */
        body {background-color:black;}
        /* Wrapper */
        #wrapper {margin:0 auto;width:700px;}
        /* Navigation Bar */
        #nav_bar {height:95px;}
        #nav_bar ul {position:relative;left:47px;list-style-type:none;border:1px solid red;width:565px;}
        #nav_bar li {position:relative;left:4px;display:inline-block;height:40px;padding-top:19px;}
        #nav_bar a:hover {background-color:#F116BA;}
        #nav_bar a {padding:20px;color:white;text-decoration:none;background-color:#790D9E;}
        /* Content Box */
        #cont_box {background-color:#450768;width:700px;height:500px;border:1px solid white;}
        #cont_box ul {border:1px solid white;position:relative;top:10px;left:220px;width:420px;height:450px;list-style-type:none;}
        #cont_box li {width:200px;position:relative;top:42px;right:13px;display:inline-block;border:1px solid white;height:180px;}
        #cont_box a {color:white;text-decoration:none;position:relative;top:2px;}
        #cont_box a:hover{color:red;}
        /* Side Menu */
        #side_menu {}
        /* Product Name Position */
        #prod01_namepos {left:70px;}
        #prod02_namepos {left:30px;}
        #prod03_namepos {left:50px;}
        #prod04_namepos {left:70px;}

    </style>
</head>

<body>
    <div id="wrapper">
        <div id="nav_bar">
            <ul>
                <li> <a href="#">Home</a> </li>
                <li> <a href="#">Forums</a> </li>
                <li> <a href="#">Shipping Info</a> </li>
                <li> <a href="#">Contact us</a> </li>
                <li> <a href="#">About us</a> </li>
            </ul>
        </div>
        <div id="cont_box">
            <ul>
                <li> <img src="1.png" height="120" width="200" /> <a id ="prod01_namepos" href="#">Whiskas</a> </li>
                <li> <img src="2.png" height="120" width="200" /> <a id ="prod02_namepos" href="#">Whiskas Temptation</a> </li>
                <li> <img src="3.png" height="120" width="200" /> <a id ="prod03_namepos" href="#">Pedigree Adult</a> </li>
                <li> <img src="4.png" height="120" width="200" /> <a id ="prod04_namepos" href="#">Dog Toy</a> </li>
            </ul>
        </div>
    </div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:47:04.173

我摆弄了你的 CSS，我想我设法获得了你所追求的行为。试一试这个 CSS：

现场演示：[jsfiddle](http://jsfiddle.net/Bv3bz/)

```
/* Navigation Bar */
#nav_bar {
    height:95px;
}

#nav_bar ul {
    list-style-type: none;
    border: 1px solid red;
    width: 565px;
    height: 100%;
    text-align: center;
    padding: 0;
    margin: 0;
}

#nav_bar li {
    display:inline-block;
    height:100%;
    padding: 0;
    margin: 0;
}

#nav_bar a:hover {
    background-color:#F116BA;
}

#nav_bar a {
    display:block;
    height: 100%;
    color:white;
    text-decoration:none;
    line-height: 95px;
    padding: 0  1em 0 1em;
    background-color:#790D9E;
} 
```

# perl - 如何在perl的路径中获取目录

> ID：11981781
> 
> 赞同：0
> 
> 时间：2012-08-16T06:29:24.590
> 
> 标签：perl

我有一个目录路径：

```
my $temp = "/a/b/c/d";
my $upDirectory = dirname( $temp ); 
```

这将返回“/a/b/c”。但我只需要“c”。我必须将它与一个字符串进行比较以确定它是否是正确的目录。

除了在“/”上拆分之外，还有其他方法吗？我不想用这个。Perl 代码必须在多个平台上使用。splitdir 可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T06:37:58.237

当然，有很多方法可以做到这一点，但如果您主要关心的是到其他平台的可移植性，那么[File::Spec](http://search.cpan.org/dist/PathTools/lib/File/Spec.pm)可能是一个合理的选择。寻找`splitpath`和`splitdir`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:46:46.890

强制性[`Path::Class`](http://p3rl.org/Path%3a%3aClass)解决方案：

```
use Path::Class qw(dir);
dir('/a/b/c/d')->parent->dir_list(-1)
# expression returns 'c' 
```

# wpf - WPF 中的 ActiveX 控件

> ID：11981784
> 
> 赞同：1
> 
> 时间：2012-08-16T06:29:27.027
> 
> 标签：wpf, interop, activex

我正在使用第三方 SDK 在我的 WPF 应用程序中显示视频。这需要我将作为 SDK 一部分的控件添加到 UI 以显示视频。我使用 windows 窗体主机将控件添加到我的 WPF

```
 ImageViewerControl _imageViewerControl = ClientControl.Instance.GenerateImageViewerControl();
 WindowsFormsHost host = new WindowsFormsHost();
 host.Child = _imageViewerControl;
 grid1.Children.Add(host); 
```

当我检查 grid1.children.count 为 1 时，_imageViewerControl 也不为空。然而，我没有看到 UI 上加载了任何内容。

但是当我使用 WindowsForm 时一切正常。我应该寻找什么？

# css - 如何将li的均等分开

> ID：11981786
> 
> 赞同：2
> 
> 时间：2012-08-16T06:29:35.727
> 
> 标签：css, html, html-lists

我的 html 中有一个`UL > li's`，而 li 的设置为`float: left`.

我的疑问是如何将它们分开，在一个父亲 div 中，平等地，所以不管 ul 中有多少 li，它们之间仍然有相同的间距？

如果 li 不“好”这样做，那还有什么更好的呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T06:32:29.063

据我了解更好，你可以这样写：

```
li + li{
    margin-left:10px;
} 
```

您也可以`display:table`为此使用属性。像这样写：

```
ul{
    display:table;
    width:100%
}
li{
    display:table-cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:54:52.860

您可以为 s 设置边框`ul`并为 child `li`s 设置边距。或者您可以将边框设置为`ul`和`li`s。父边框的原因是，当`li`s 合并时，它们将合并它们的边框，在它们相遇的地方创建一个**双边框。**

***[这](http://jsfiddle.net/blasteralfred/57Jna/)***是一个显示这两种方法的现场演示。

# php - PHP - fsockopen() 超时而不是返回 false？

> ID：11981787
> 
> 赞同：2
> 
> 时间：2012-08-16T06:29:43.433
> 
> 标签：php, sockets, selenium, port

我正在尝试使用 fsockopen() 检查 Selenium 服务器是否正在运行。当服务器运行时，应该设置常量。当它不是常量时，不设置。这是使用以下代码完成的：

```
if(!defined('TEST_SELENIUM')){
    $fp = @fsockopen('localhost', 4444);
    if ($fp !== false) {
        define('TEST_SELENIUM', true);
        fclose($fp);
    }
} 
```

当服务器未运行时（在 Windows 7 上）出现问题。fsockopen() 不是从找到关闭的端口返回 false，而是在尝试与端口通信时停止。当服务器运行时，它会使用 netstat 快速显示。当服务器关闭时，netstat 不会从端口 4444 返回任何内容。根据我对 fsockopen() 的理解，这应该立即返回 false。但同样，它只是在尝试与端口通信时停滞不前。我不想在这里添加超时，因为这不是应用程序中应该有任何类型的停顿的点。另外，我应该注意到这似乎在 Linux 上以我期望的方式工作。但是，它在 Windows 7 上失败了。谁能告诉我我做错了什么？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:02:16.820

如果不添加超时，您将无法执行此操作。这与 PHP 的实现无关——这正是 TCP 套接字连接应该如何工作的。

因为 TCP 使用确认 (ACK) 来保证数据包的传递和排序，所以当您启动 TCP 连接时，客户端会发送一个 SYN 数据包，并等待返回的 SYN/ACK 数据包。客户端将继续等待这个返回的数据包，直到它被接收到，或者客户端决定它等待的时间足够长并放弃 - 这是`fsockopen()`接受的超时参数。

当您运行 netstat 时，它会查看绑定到*本地计算机*上 TCP 堆栈的应用程序- 这意味着它能够确定端口是否正在使用*，而无需尝试连接到它*。结果，它能够立即报告套接字是否在使用中。

实际上，您有两种选择。

*   提供超时。请记住，超时参数可以是浮点数（因此可以小于 1 秒），因此如果您正在检查本地计算机，则可以将其设置得非常低。只是在我的 Windows XP 机器上测试它，我发现我可以将它设置为`0.001`(1ms)，它成功连接到正在运行的服务，并返回`FALSE`未绑定的端口。这 1 毫秒的超时也适用于我（诚然相对安静且完全千兆）LAN 上的其他机器。YMMV，但 5ms ( `0.005`) 在高速网络中应该绰绰有余。
    例如，这行代码对我来说效果很好，并且会导致脚本*最多*等待 1毫秒：

```
define('TEST_SELENIUM', (bool) @fsockopen('localhost', 4444, $en, $es, 0.001)); 
```

*   `shell_exec('netstat');`并解析输出。这肯定只有在您检查本地机器时才有效，并且可能不会比 1ms 超时方法快。它也不是很便携，因为各种操作系统上的 netstat 实用程序可能会产生非常细微的不同输出——不同的列顺序、不同的分隔符等。

还值得注意的是，如果 TCP 堆栈被配置为主动拒绝发送到未绑定端口的数据包（通过返回 RST 数据包），那么`fsockopen()`将立即失败。这可能就是你说的原因`this appears to work the way I would expect it should on Linux`——你测试它的 Linux 实例就是这样配置的。可能有一些注册表设置允许您将 Windows 配置为也以这种方式运行，尽管我不知道它是什么 - [SuperUser](http://www.superuser.com/)的人可以帮助您。

# android - TabActivity 在 android 中使用 ACTION_View 打开 Intent

> ID：11981790
> 
> 赞同：0
> 
> 时间：2012-08-16T06:29:55.653
> 
> 标签：android, tabactivity, activitygroup

面对 TabActivity 的问题，我在可能的 tabActivity 中有 5 个标签到一个标签，我正在使用带有 ACTION_VIEW 的 Intent 播放 YouTube 视频。当我第一次选择该选项卡时，它会打开浏览器并播放我的视频，但下次它不会响应我。我尝试了很多。如果您有任何解决方案，请与我分享。

这是 TabActivit 的代码形式

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        getWindow().setWindowAnimations(0);

        tabHost = getTabHost();
        tabHost.setup();

        extras = getIntent().getExtras();

        int isFetched = extras.getInt("IsFetched", 0);

        Resources res = getResources();

        Intent t0 = new Intent(this, HomeTabGroup.class);
        t0.putExtra("IsFetched",isFetched);

        tabHost.addTab(tabHost.newTabSpec("Home")
                .setIndicator(prepareTabView(this, "0",  res
                        .getDrawable(R.drawable.hometab)))
                .setContent(t0));

        tabHost.getTabWidget().setBackgroundResource(R.drawable.bg_nav);
       // Intent t1 = new Intent(this, SurprizeMeTabGroup.class);
        Intent t1 = new Intent(this, SurpriseScreen.class);
        tabHost.addTab(tabHost.newTabSpec("surprise")
                .setIndicator(prepareTabView(this, "1",  res
                        .getDrawable(R.drawable.surprizetab)))
                .setContent(t1));

        tabHost.setCurrentTab(0);

        HomeTabGroup.group.tabHost = this.tabHost; 
```

以下是我的 SurpizeScreen 的代码

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.surprise_screen);
        Intent intent = getYouTubeIntent(this, "http://www.youtube.com/watch?v=6KKXVbJCKEo");
        startActivity(intent);

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:26:20.023

Finlay 经过多次尝试，我找到了解决方案。覆盖TabActivity扩展类的onchange方法，调用ACTION_VIEW Intent

```
 @Override
            public void onTabChanged(String tabId) {
                if(tabId.equals("surprise")) {
                    startActivity(getYouTubeIntent(MainTabbarScreen.this, "http://www.youtube.com/watch?v=6KKXVbJCKEo"));
                }
             }
        }); 
```

# android - 如何在android中为gridview设置相等的列宽？

> ID：11981792
> 
> 赞同：3
> 
> 时间：2012-08-16T06:30:11.777
> 
> 标签：android, gridview, column-width

在我的应用程序中，我使用了 gridview，而 textview 是 gridview 的一个项目。列数 = 3，在此如何为所有列提供相等的宽度。有人可以帮我吗？

我的代码是：

网格视图： .........

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:gravity="center" >

    <GridView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/MyGrid"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#ffffff"
        android:gravity="center_horizontal"
        android:horizontalSpacing="5dp"
        android:numColumns="3"
        android:padding="5dp"
        android:columnWidth="100dp"
        android:stretchMode="columnWidth"
        android:verticalSpacing="5dp" >
    </GridView>
</LinearLayout> 
```

网格项目：

```
<TextView
    android:id="@+id/grid_item_text"
    android:layout_width="match_parent"
    android:layout_height="45dp"
    android:layout_weight="1"
    android:background="@drawable/btn_selected"
    android:gravity="center_horizontal|center_vertical"
    android:text="TextView"
    android:textColor="@color/BLACK"
    android:textSize="14dp" >
    </TextView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T03:45:06.697

```
<TextView
android:id="@+id/grid_item_text"
android:layout_width="45dp"
android:layout_height="45dp"
android:layout_weight="1"
android:background="@drawable/btn_selected"
android:gravity="center_horizontal|center_vertical"
android:text="TextView"
android:textColor="@color/BLACK"
android:textSize="14dp" > 
```

# wpf - 如何在列表视图控件中设置 SelectedItem？

> ID：11981793
> 
> 赞同：3
> 
> 时间：2012-08-16T06:30:16.217
> 
> 标签：wpf, xaml, data-binding, mvvm

我在项目中有 UserControl(AllCustomerView)，它的 Viewmodel 作为 ALlCustomerViewModel 包含一个作为 SearchText 的属性。SearchText 是 UserControl 中列表视图内 TextBox 的选定值。SearchItem 设置为 SearchText 的 customerViewmdel。但在 listview 中， SearchItem 未设置为选中

在 AllCustomerView.xaml 中

```
<TextBlock>
<TextBox 
        Width="150" 
        Text="{Binding Path=SearchText, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}">
</TextBox>
<Button 
         Command="{Binding Path=SearchCommand}"
         Content=" Search ">
</Button>
</TextBlock>

<ListView
            SelectedValue="{Binding Path=SearchText}"
            ItemsSource="{Binding Path=AllCustomers}"
            FontFamily="Tahoma"
            FontSize="14"
            ItemContainerStyle="{StaticResource CustomerItemStyle}" 
            IsSynchronizedWithCurrentItem="True">
            <ListView.View>
                <GridView>
                    <GridViewColumn>
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Button 
                                    Command="{Binding ElementName=Root, Path=DataContext.DeleteCommand}"
                                    Content="x"
                                    FontFamily="Tahoma"
                                    FontSize="10"
                                    />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn>
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Button 
                                     FontFamily="Tahoma"
                                    FontSize="10"
                                    Content="Edit"
                                    Command="{Binding Path=DataContext.Editcommand,ElementName=Root}"
                                    />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn
                        Header="CustomerID"
                        Width="130"
                        DisplayMemberBinding="{Binding Path=CustomerID}"/>
                    <GridViewColumn
                        Header="Contact Name"
                        Width="130"
                        DisplayMemberBinding="{Binding Path=ContactName}"/>
                    <GridViewColumn
                        Header="Company Name"
                        Width="130"
                        DisplayMemberBinding="{Binding Path=CompanyName}"/>
                    <GridViewColumn
                        Width="130"
                        Header="Contact Name"
                        DisplayMemberBinding="{Binding Path=ContactTitle}"
                        />
                </GridView>
            </ListView.View>
        </ListView> 
```

及其视图模型（AllcustomerViewModel.cs）

```
public ICommand SearchCommand
        {
            get
            {
                if (_search == null)
                    _search = new Relaycommand(SearchCustomer);
                return _search;
            }
        }

 public void SearchCustomer(object o)
 {
            System.Windows.Forms.MessageBox.Show(SearchItem.ToString());

}

 public string searchText;
 public string SearchText
 {
     get { return searchText; }
     set 
     {
       searchText = value;
       var customerExsits = AllCustomers.Where(q => q.CustomerID.Trim().Equals(searchText));
        if (customerExsits.Any())
                {
                    SearchItem = customerExsits.Single();
                }

            }
        }

public CustomerViewModel SearchItem
{
            get;
            set;
} 
```

我应该在 ListView 的 SelectedValue 中设置什么，是设置 Customerviewmodel（作为 SelectedItem）还是设置 CustomerID（作为 SearchText）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:41:06.353

您应该执行以下操作：

1.  `ListView`在您的:中使用此绑定`SelectedItem="{Binding Path=SearchItem }"`。不要使用`SelectedValue`.
2.  在您的 ViewModel 中实现并在属性的设置器中`INotifyPropertyChanged`引发`PropertyChanged`事件。`SearchItem`显然，您需要将此属性从自动属性更改为带有支持字段的经典属性：

    ```
    public CustomerViewModel SearchItem
    {
        get { return _searchItem; }
        set
        {
            if(value == _searchItem)
                return;
            _searchItem = value;
            RaisePropertyChanged("SearchItem");
        }
    } 
    ```

# opengl - 在 OpenGL 中使用顶点数组对 GL_POLYGON 进行批处理

> ID：11981803
> 
> 赞同：1
> 
> 时间：2012-08-16T06:30:38.663
> 
> 标签：opengl

我有一堆 GL_POLYGONS 我需要使用顶点数组（放入顶点缓冲区对象）进行渲染。

我正在使用索引和 glDrawElements()。

我知道您可以使用冗余顶点对 GL_TRIANGLE_STRIPS 进行批处理，因此它们在渲染过程中被链接起来。

GL_POLYGON 是否有类似的可能？

如果可能的话，我想避免在循环中调用 glDrawElements() ，为每个多边形指定索引。

（这不适用于 OpenGL ES - 我在笔记本电脑上使用 OpenGL。）

**编辑＃1：**

我想在这里补充一下 Tim 在下面的答案（原始重启）有效，但您需要记住启用此模式 - 这让我花了一段时间才弄清楚。IE：

```
// enable primitive restart
glEnable(GL_PRIMITIVE_RESTART); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:40:00.277

[`glMultiDrawElements`](http://www.opengl.org/sdk/docs/man/xhtml/glMultiDrawElements.xml)如果您想通过一次绘制调用绘制多个多边形，则可以使用。您只需传入一个指向索引的指针数组。

或者，如果你的目标是更高版本的 OpenGL，你可以使用一个叫做 的东西[`glPrimitiveRestartIndex`](http://www.opengl.org/sdk/docs/man3/xhtml/glPrimitiveRestartIndex.xml)，它允许你指定一个特殊的索引值来重新启动当前的图元。因此，您可以定义一个“特殊”索引，然后在任何时候将该索引插入到数组中，多边形将使用下一个索引重新开始。不过，这只是 OpenGL 3+ 的核心。

# android - Android如何保护文档目录中的内容

> ID：11981805
> 
> 赞同：6
> 
> 时间：2012-08-16T06:30:50.700
> 
> 标签：android, security, encryption, documents

我在这里问同样的问题：

*   [保护 Documents 目录中的内容](https://stackoverflow.com/questions/7471270/secure-contents-in-document-directory)

对于安卓。

android 中是否有与此处介绍的等效概念：

*   [保护应用沙箱](https://stackoverflow.com/questions/4595955/protecting-the-app-sandbox)

我的特殊要求是保护文件免受 root 设备的影响，并且只能通过应用程序和一定的生命周期使它们可用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:02:20.697

> 我的特殊要求是保护文件免受根设备

根据定义，这是不可能的。

首先，任何拥有根设备的人都可以访问设备本身任何位置的每个文件。

其次，加密只能帮助*用户*保护*他们的*数据免受第三方的侵害。另一方面，您正试图通过阻止用户访问其数据来攻击用户。您可以尝试通过加密来做到这一点的唯一方法是让您成为唯一拥有解密密钥的人，并且由于该解密密钥必须在设备上才能使设备能够解密文件，因此任何希望可以翻阅您的应用程序，找到密钥并自行解密文件。以这种方式加密文件的概念称为 DRM，有两种类型的 DRM：一种已被破解，另一种尚未有人试图破解。

如果您不希望用户访问此数据，**请不要将其放在他们的设备上**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:31:00.247

两个注意事项：

一般来说，您的应用程序只能与操作系统一样安全。如果设备已植根，则操作系统不再安全。所以你的应用程序也不安全。例如，可能会有操作系统的调整，这将：

*   记录键盘输入
*   颠覆任何调用（包括对加密 API 的调用）
*   记录通过 HTTP(S) 提供的任何信息。

第二个注意事项是，在某些时候，您需要以明文（未加密）的形式向 3rd 方应用程序提供您的数据（文件）。一旦你这样做了，他们就可以复制它，将它发送到某个服务器，而你对此无能为力。因此，即使您在有限的时间内提供对这些文件的访问权限，它们仍然可能“泄漏”。

* * *

也就是说，您最简单的方法（正如 Emile 指出的那样）是使用 ContentProvider，在其中加密数据并在将数据交付给 3rd 方应用程序时解密数据。

如果 3rd 方应用程序支持它，一种具有更高复杂性的方法是使用 DRM (http://developer.android.com/reference/android/drm/package-summary.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T19:06:54.580

查看 Mighter 的答案并考虑到您对根植手机的担忧，这里似乎已经讨论过了。

[http://source.android.com/tech/encryption/android_crypto_implementation.html](http://source.android.com/tech/encryption/android_crypto_implementation.html)

（我在这里某处找到的子链接[http://source.android.com/tech/security/index.html](http://source.android.com/tech/security/index.html)）

最初我认为您可以使用 ContentProvider 并将您的数据存储在数据库中，我相信它可以受到保护，或者您至少可以加密其中的数据。但是，我不确定这会回答您的问题。我希望 android 加密实现链接能满足您的要求。尽管由于版本要求可能不切实际。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T06:43:10.217

Android 利用 Unix 权限来保护应用程序沙箱。每个应用程序都在唯一用户下运行，并且只有该用户有权对`/data/data/your.package.name`文件夹进行操作。但是，如果目标设备已植根，则您的应用数据可能会受到损害。

一些链接：

[http://source.android.com/tech/security/index.html](http://source.android.com/tech/security/index.html)

[http://www.amazon.co.uk/dp/1430240628](http://www.amazon.co.uk/dp/1430240628)

[http://developer.android.com/guide/topics/security/permissions.html](http://developer.android.com/guide/topics/security/permissions.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T23:51:23.723

将任何类型的数据放到 Android 设备上并不安全。它们被认为是开放的设备。如果您希望再次保护您的数据根用户，那么您将不得不使用一种加密形式。并且根据项目的敏感性，这甚至可能不起作用（除非您使用真正的高端加密，否则会降低性能）。不要相信带有敏感信息的 Android 是我唯一能说的。

# python - 如何在rpy2中使用python中的变量？

> ID：11981810
> 
> 赞同：-21
> 
> 时间：2012-08-16T06:31:26.023
> 
> 标签：python, r, rpy2

我的简单程序从 Python 中提取数据库并存储在变量行中。

```
cursor = con.cursor()       
    cursor.execute("SELECT * FROM traffic")

    #Retrieves data from SQL
    rows = cursor.fetchall()  

    for row in rows:
       row = list(row)
       a = row[1:]
       b = row[:-1]
       print(a)
       print(b) 
```

现在我能够获得列表 a 和 b 中的月份和流量，例如 [1000L]

```
['January']
[100L]
['February']
[10430L]
['March']
[1500L]
['April']
[100L]
['May']
[1200L]
['June']
[800L]
['July']
[8000L]
['August']
[100000L]
['September'] 
```

现在我想绘制它，直方图和饼图。该行包含两个列：`MOnth`和`Traffic`。我想使用 Rpy2 将其转换为图表。我该怎么做？这是我的桌子：

```
month     | traffic |
+-----------+---------+
| January   |    1000 |
| February  |     100 |
| March     |   10430 |
| April     |    1500 |
| May       |     100 |
| June      |    1200 |
| July      |     800 |
| August    |    8000 |
| September |  100000 |
+-----------+---------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:55:49.773

首先，从您的数据库中创建两个列表。就像是：

```
cursor = con.cursor()       
cursor.execute("SELECT * FROM traffic")

#Retrieves data from SQL
rows = cursor.fetchall()  

Month = list()
Traffic = list()

for row in rows:
    Month.append(row['Month'])          # guesswork - what does a row look like?
    Traffic.append(row['Traffic']) 
```

然后，现在你有两个 python 列表，你可以制作一个图：

```
>>> r.plot(Month,Traffic)
rpy2.rinterface.NULL 
```

你可能想要线条：

```
>>> r.plot(Month,Traffic,type="l")
rpy2.rinterface.NULL 
```

您可能想要漂亮的标签：

```
>>> r.plot(Month,Traffic,type="l",xlab="Month",ylab="Traffic") 
```

# javascript - 在javascript中用“：”替换数字之间所有出现的“-”

> ID：11981813
> 
> 赞同：0
> 
> 时间：2012-08-16T06:31:41.240
> 
> 标签：javascript, regex, replace

我有一个看起来像这样的字符串：

```
1,87-99,88:12,sds-554,sdsd,787,99-145 
```

如果两个数字中间出现“-”，我想将其更改为“：”。在javascript中执行此操作的最短方法是什么？感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T06:37:04.710

尝试：

```
text='1,87-99,88:12,sds-554,sdsd,787,99-145';
tex2=text.replace(/(\d)-(\d)/g,'$1:$2');
console.log(tex2); 
```

示例：http: [//jsfiddle.net/bingjie2680/Wcptr/](http://jsfiddle.net/bingjie2680/Wcptr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T06:42:22.510

这是我的变种。

```
var a = '1,87-99,88:12,sds-554,sdsd,787,99-145'
var b = a.replace(/(\d)-(\d)/g,'$1:$2') 
```

`$1`并将`$2`匹配的数字放回字符串中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T06:35:28.953

尝试

```
'1,87-99,88:12,sds-554,sdsd,787,99-145'.replace(/(\d)-(\d)/g, '$1:$2'));​ 
```

[http://jsfiddle.net/ZK9Mj/](http://jsfiddle.net/ZK9Mj/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T06:34:11.983

```
var a = '1,87-99,88:12,sds-554,sdsd,787,99-145'
var b = a.replace(/(\d)-(\d)/g, '$1:$2'); 
```

“b”会给你你想要的

# c# - 在鼠标位置添加椭圆？

> ID：11981815
> 
> 赞同：1
> 
> 时间：2012-08-16T06:31:46.397
> 
> 标签：c#, wpf

我正在尝试从我的鼠标位置向我的网格添加一个椭圆。如何定义椭圆的绘制位置？

这是我的鼠标按下事件：

```
private void GridCanvas_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    _sensorPoint = Mouse.GetPosition(GridCanvas);
    AddSensor();
} 
```

还有我的 AddSensor() 方法：

```
private void AddSensor()
{
    Ellipse sensorEllipse = new Ellipse();
    SolidColorBrush solidColorBrush = new SolidColorBrush();

    solidColorBrush.Color = Color.FromArgb(0, 0, 0, 0);
    sensorEllipse.Fill = solidColorBrush;
    sensorEllipse.StrokeThickness = 2;
    sensorEllipse.Stroke = Brushes.Black;
    sensorEllipse.Width = 10;
    sensorEllipse.Height = 10;

    GridCanvas.Children.Add(sensorEllipse);
} 
```

如何在画布上单击鼠标的位置添加 sensorEllipse？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:38:41.967

您可以使用以下任何方法设置位置：

```
private void AddSensor()
{
        Ellipse sensorEllipse = new Ellipse();
        SolidColorBrush solidColorBrush = new SolidColorBrush();

        solidColorBrush.Color = Color.FromArgb(0, 0, 0, 0);

        sensorEllipse.Fill = solidColorBrush;

        sensorEllipse.SetValue(Canvas.LeftProperty, _sensorPoint.X);
        sensorEllipse.SetValue(Canvas.TopProperty, _sensorPoint.Y);

        //Canvas.SetLeft(sensorEllipse, _sensorPoint.X);
        //Canvas.SetTop(sensorEllipse, _sensorPoint.Y);

        sensorEllipse.StrokeThickness = 2;
        sensorEllipse.Stroke = Brushes.Black;
        sensorEllipse.Width = 10;
        sensorEllipse.Height = 10;

        //adding event handler for right mouse down:
        sensorEllipse.MouseRightButtonDown += new MouseButtonEventHandler(sensorEllipse_MouseRightButtonDown);

        GridCanvas.Children.Add(sensorEllipse);
} 
```

**编辑** 用于添加/删除省略号检查，按下哪个鼠标按钮`GridCanvas_MouseLeftButtonDown`

```
private void GridCanvas_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
  _sensorPoint = Mouse.GetPosition(GridCanvas);
  AddSensor();
} 
```

然后为新椭圆添加事件处理程序：

```
 void sensorEllipse_MouseRightButtonDown(object sender, MouseButtonEventArgs e)
    {
        Ellipse ellipse = sender as Ellipse;
        GridCanvas.Children.Remove(ellipse);
    } 
```

# java - 使用 Swing 在 JTextArea 中呈现实时数据

> ID：11981820
> 
> 赞同：1
> 
> 时间：2012-08-16T06:31:56.917
> 
> 标签：java, swing, jtextarea, event-dispatching

不知道这是愚蠢的问题还是合理的问题。

我有返回 P5 Glove 的浮点/整数数据（x、y、z 位置）的方法（如果你知道的话）。

我也有响应手套拉动的更新方法。

我遇到的所有问题是创建 UI 并在文本区域中呈现数据，这意味着每次更新呈现数据的文本区域都会刷新并呈现数据。

由于代码不是那么短，这里是类的链接：[详细介绍方法和更新](http://pastebin.com/DFKvbBD6)

假设现在我想展示 showActiveLedPosX() 方法，它将 X 位置作为字符串返回。

其他类是 glove（使用 glove 方法并创建 glove 对象和 UI）。

我应该为 UI 使用不同的类吗？还是我应该在 ShowGloveValues 类上做这一切

我从未创建过 UI，因此我在这里有点无能为力，试图在众多资源网站上阅读它，但仍然无法实现所需的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T06:37:57.007

**1.**将线与`UI`线**分开**`Non-UI`。

**2.** `Event Dispatcher Thread`是`UI`线程，只保留这个线程来**处理你的 UI**。

**3.**你也可以用`SwingWorker`这个。

**4.** Swing 基于`Mode View Controller`. 此外，最好在 MVC 的基础上划分您的应用程序包。

**例如：**

```
 com.vivek.model;    // Class responsible for Business Logic and Data

  com.vivek.view;     // Class responsible for the UI 
```

# php - Codeigniter 多数据库连接

> ID：11981821
> 
> 赞同：0
> 
> 时间：2012-08-16T06:31:59.053
> 
> 标签：php, mysql, codeigniter

我正在使用 CodeIgniter，并且正在尝试访问远程放置在另一台服务器上的数据库。我可以远程访问该服务器，但无法通过我的 MySQL 连接设置进行连接。这是我的 MySQL 设置：

```
$db['default']['hostname'] = 'myhostname';

$db['default']['username'] = 'root';
$db['default']['password'] = '';
$db['default']['database'] = 'MyDb';
$db['default']['dbdriver'] = 'mysqli';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

我不确定我在哪里犯了错误，所以如果有人能指出错误，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:47:02.560

首先，检查 mysql 的用户名和密码（出于安全原因，显然用户名不能是 root，密码不能为空），对于主机名，您可能必须提供托管 mysql 的服务器的 IP 地址。休息配置似乎很好。您可以向托管公司索取这些信息。

# mysql - SELECT COUNT + (SELECT COUNT FROM TABLE1 WHERE ) FROM TABLE1 在 Zend

> ID：11981828
> 
> 赞同：1
> 
> 时间：2012-08-16T06:32:47.773
> 
> 标签：mysql, zend-framework

如何在 Zend 中编写此查询

```
SELECT COUNT( 1 ) AS  `NoOfQueries` , DATE( CONVERT_TZ( FROM_UNIXTIME( poocher.cdate,  '%Y-%m-%d %T' ) ,  '-9:30',  '+00:00' ) ) AS  `Dat` , COUNT( 1 ) + ( 
    SELECT COUNT( 1 ) 
    FROM tblsmsuser poocherb4
    WHERE DATE( CONVERT_TZ( FROM_UNIXTIME( poocherb4.cdate,  '%Y-%m-%d %T' ) ,  '-9:30',  '+00:00' ) ) <= DATE_SUB(  `Dat` , INTERVAL 1 
    DAY ) ) AS cumulative_sum
FROM tblsmsuser poocher
GROUP BY  `Dat` 
```

我试过的是

```
$this->select = new Zend_Db_Select($this->db);
$selctSub = $this->select->from("tblsmsuser",array("count(1)"))->where("DATE( CONVERT_TZ( FROM_UNIXTIME( tblsmsuser.cdate,  '%Y-%m-%d %T' ) ,  '-9:30',  '+00:00' ) ) <= DATE_SUB(  Dat , INTERVAL 1 DAY )");
echo $select_query_ans = $this->select->from(array("poocher" =>"tblsmsuser"),array("NoOfQueries"=>"count(1)","Dat"=>"DATE( CONVERT_TZ( FROM_UNIXTIME( poocher.cdate,'%Y-%m-%d %T' ),'-9:30','+00:00' ) )","cumulative_sum"=>"count(1) + (".$selctSub.")"))->group("Dat"); 
```

输出

```
SELECT count(1) AS `NoOfQueries`, DATE( CONVERT_TZ( FROM_UNIXTIME( poocher.cdate,'%Y-%m-%d %T' ),'-9:30','+00:00' ) ) AS `Dat`, count(1) + (SELECT count(1) AS `NoOfQueriesb4` FROM `tblsmsuser` AS ```poocherb4`` WHERE (DATE( CONVERT_TZ( FROM_UNIXTIME( poocherb4.cdate, '%Y-%m-%d %T' ) , '-9:30', '+00:00' ) ) <= DATE_SUB( Dat , INTERVAL 1 DAY )))`, count(1) AS `NoOfQueriesb4` FROM `tblsmsuser` AS `poocher` INNER JOIN `tblsmsuser` AS `` WHERE (DATE( CONVERT_TZ( FROM_UNIXTIME( poocherb4.cdate, '%Y-%m-%d %T' ) , '-9:30', '+00:00' ) ) <= DATE_SUB( Dat , INTERVAL 1 DAY )) GROUP BY `Dat` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:14:55.653

这是对我有用的代码

```
 $this->select = new Zend_Db_Select($this->db);
    $selctSub = $this->select->from("tblsmsuser",array("count(1)"))->where("DATE( CONVERT_TZ( FROM_UNIXTIME( tblsmsuser.cdate,  '%Y-%m-%d %T' ) ,  '-9:30',  '+00:00' ) ) <= DATE_SUB(  Dat , INTERVAL 1 DAY )");
    $this->select = new Zend_Db_Select($this->db);  //ADDED line
    echo $select_query_ans = $this->select->from(array("poocher" =>"tblsmsuser"),array("NoOfQueries"=>"count(1)","Dat"=>"DATE( CONVERT_TZ( FROM_UNIXTIME( poocher.cdate,'%Y-%m-%d %T' ),'-9:30','+00:00' ) )","cumulative_sum"=>"count(1) + (".$selctSub.")"))->group("Dat"); 
```

# objective-c - 如何将项目写入目录并调用它们，Objective c

> ID：11981833
> 
> 赞同：0
> 
> 时间：2012-08-16T06:33:16.073
> 
> 标签：objective-c, xcode, nsurl, nsfilemanager, directory

嗨，我有一堆从网上下载的照片，我想将它们存储在一个目录中，这样我就不必重新加载已经下载的照片，我无法理解如何执行此操作并存储照片并重新加载它们目录等。这就是我到目前为止所拥有的。有人可以解释所涉及的步骤以及如何做吗？谢谢

```
-(void) savePhotoInCache: (NSData*) photoToSave{
   //I dont know if u need bundle ID?
   // NSString * bundleID = [[NSBundle mainBundle] bundleIdentifier];
NSFileManager *fm = [[NSFileManager alloc] init];
NSArray * directoryPaths = [fm URLsForDirectory:NSCachesDirectory inDomains:NSUserDomainMask];
NSLog(@"%@", directoryPaths);
NSURL* dirPath = nil;    
 //Does this create a file in my cache Directory to store my photos?
dirPath = [[directoryPaths objectAtIndex:0] URLByAppendingPathComponent:[NSString stringWithFormat:@"photos.jpg"]];
NSError* theError = nil;
[fm createDirectoryAtURL:dirPath withIntermediateDirectories:YES attributes:nil error:&theError];
// Saves the photo to the file?
[photoToSave writeToURL: dirPath atomically:NO];

NSLog(@"%@", dirPath);
//I get a deprecated warning, new version needs encoding, but I did not specify encoding in writeToURL so what do I use?
NSString * contents = [NSString stringWithContentsOfURL:dirPath ];

//After this how to I access my files and check what the contents of the file are? also, how do I limit the amount of information it stores? thanks

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:53:26.323

您不需要自己处理所有事情。我宁愿使用[EGO Image Loader](https://github.com/enormego/EGOImageLoading/)，它可以为您完成所有工作。它将图像保存（缓存）在应用程序包目录中，并在您需要时重用它们。就学习类而言，它使用图像 url 作为主键（从缓存中检索图像）。它非常快且异步。

只需将其添加到您的项目中并像这样调用它：（这是ARC，所以我不使用-release）

```
UIImageView *imageView = [[EGOImageView alloc] initWithPlaceholderImage:[UIImage imageNamed:@"placeholder.png"]];
imageView.frame = CGRectMake(0.0f, 44.0f, 320.0f,54.0f);
imageView.imageURL = [NSURL URLWithString:@"www.example.com/1.jpg"] ;
[self.view addSubview:imageView]; 
```

我希望它有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:17:08.280

检查这个如何获取保存的内容，如下所示：

```
NSArray *dirContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:dirPath error:nil]; 
```

现在过滤器包含这样的内容：

```
NSPredicate *fltr = [NSPredicate predicateWithFormat:@"self ENDSWITH '.jpg'"];
NSPredicate *fltr1 = [NSPredicate predicateWithFormat:@"self ENDSWITH '.png'"];
NSArray *onlyJPGs = [dirContents filteredArrayUsingPredicate:fltr];
NSArray *onlyPNGs = [dirContents filteredArrayUsingPredicate:fltr1]; 
```

获取所有图像内容

```
for(NSString *fileName in dirContents)
{
    NSString *imgPath = [dirPath stringByAppendingFormat:fileName];
    UIImage *img = [UIImage imageWithContentsOfFile:imgPath];
    //You have image use it where u want
} 
```

如果您有很多图像，则使用延迟加载图像

# javascript - 有没有一个js函数可以左右上下滚动网站？

> ID：11981835
> 
> 赞同：0
> 
> 时间：2012-08-16T06:33:21.440
> 
> 标签：javascript, jquery

我想知道是否有人知道是否有 javascript 或在单击时左右上下滚动网站的东西。

例如，我想创建一个包含多个 div 的网站。看看下面的照片。

![在此处输入图像描述](../Images/286255b2137f96cfd057b0d1247c239c.png)

我希望每个 div 都适合屏幕，并且 div 1 是主 div，即起点。假设我在传记菜单中有一个链接，传记的内容在 div 4 中，有人点击传记，我希望网站向下移动到 div 3，然后向右移动到 div 4，同样的事情也适用于 div 4 和所有的div。当有人单击 div 中的链接时，我希望网站按我指定的方向滚动，这可能吗？

左 右 上 下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:44:50.553

jquery animate 函数是正确的方法。

在这里您可以找到有关如何使用它的简单明了的教程：[http ://gazpo.com/2012/03/horizo​​ntal-content-scroll/](http://gazpo.com/2012/03/horizontal-content-scroll/)

本教程仅适用于水平滚动，但您可以轻松扩展以在两个方向（同时垂直和水平）滚动页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:36:56.927

对，他们是：

1.  [.scrollLeft()](http://api.jquery.com/scrollLeft/)
2.  [.scrollRight()](http://api.jquery.com/scrollTop/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T06:37:23.917

使用 jQuery，您可以为`body`'`scrollTop`值设置动画以上下滚动：

```
$("html,body").animate({
    scrollTop: $("#bio").offset().top
}, 1000); 
```

上面的代码将滚动到带有`id`of的元素`#bio`。

在横向滚动方面，我想你可以使用一个小技巧。将 body 设置`overflow-x`为`hidden`隐藏任何溢出到浏览器视口右侧的内容。然后您可以将 调整`margin-left`为`body`向右或向左“滚动”。但是，当然，这消除了用户滚动浏览所有 div 的能力。

```
$("body").animate({
    marginLeft: "-100%"
}, 1000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T06:40:11.313

你可以使用 jquery animate 函数，它会给你更多的控制

```
 $('#div').animate({
    left: '+=50'
  }, 5000, function() {
    // Animation complete.
  }); 
```

阅读更多来自 - [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

# c# - 使用 C# 在 webkit 浏览器中的动态按钮单击事件

> ID：11981839
> 
> 赞同：0
> 
> 时间：2012-08-16T06:33:45.193
> 
> 标签：c#, webkit

我在 C# 代码中的 Webkit 浏览器中创建了一个动态按钮。我想为动态按钮执行按钮单击事件。如何执行按钮单击事件处理程序？

我在 webkitbrowser 中使用 documenttext 生成了按钮： `mBrowser.DocumentText = "<html><head><script>" + "function test(message) { alert(message); }" + "</script></head><body><button " + "onclick=\"window.external.Test('called from script code')\">" + "call client code from script code</button>" + "</body></html>";`

现在测试功能不起作用。

请给我一个对我有帮助的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:39:40.323

不应该`window.external.test('called from script code')`代替`window.external.Test('called from script code')`吗？

# wix - WiX - 如何在安装后更改目录名称

> ID：11981842
> 
> 赞同：0
> 
> 时间：2012-08-16T06:34:15.167
> 
> 标签：wix

非常简单的问题，假设我的应用程序将安装为

```
myApp
 +-- bin
 +-- lib 
```

我想在安装后将“lib”重命名为“plugins”，我该怎么做？

有一个[MoveFiles 元素](http://wix.sourceforge.net/manual-wix3/wix_xsd_movefiles.htm)可能会有所帮助，但不知道如何使用它。

**编辑：**

这里的问题是，就我而言，源文件可以安装到不同的路径中，这种情况在[此处](https://stackoverflow.com/questions/11967316/wix-how-to-have-different-copy-strategies-during-installation)描述。

我能弄清楚的唯一方法是创建两个组件组并有条件地安装它们。但是，使用`heat`两次收获相同的子目录会导致[ID 冲突](https://stackoverflow.com/questions/8539762/how-to-change-the-generated-directory-id-for-wix-using-heat)，所以我正在考虑使用不同的路径（例如`lib`和`another-lib`），然后在安装后重命名其中一个路径，所以出现了这个问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:24:56.440

不。预先正确安装文件。Windows 安装程序跟踪事物的方式将在每一步都与您抗衡。只需从一开始就将文件安装在正确的文件夹中。可能不是你想要的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T11:44:37.470

我终于写了一个 C++ 程序，`heat`用另一个目录结构扩展生成的 wxs。所以我们可以决定在不同的情况下安装哪个路径。它就像在安装过程中更改名称一样工作。

这是我的程序修补的 wxs 文件。基本上它会创建另一个目录`WEBIDR`和不同的子目录，然后添加另一个组件组`webGroup`以供以后通过条件元素引用。

您可以手动执行相同的操作，但如果有数千个文件在等待，并且它们经常更新，那么程序（或脚本）可能是更好的选择。

```
<Fragment>
    <DirectoryRef Id="INSTALLDIR">
        <Directory Id="dirA5528701EE26FFBF346CCE20EE8ACE99" Name="bin">
            <Component Id="cmpEBA9C2A32D81BA8646BD1A64DBB39DB1" Guid="{142C531A-C71C-4890-9318-0FC42026C8FC}">
                <File Id="filDB56E052EC783676CEF361C0C5AA71F3" KeyPath="yes" Source="$(var.runDir)\bin\boost_date_time-vc100-mt-1_47.dll" />
            </Component>
        </Directory>
        <Directory Id="dir3279BEF4E08D9A00D2F205F325F00A81" Name="modules">
            <Component Id="cmpDECCAE13F8937500E4AC367A8EAC95F4" Guid="{85CC0C94-1BFB-4062-BC4E-FBF143921301}">
                <File Id="filDD3B40D68D0437B18B1108FBA49ABC1B" KeyPath="yes" Source="$(var.runDir)\modules\HelloAPI.dll" />
            </Component>
        </Directory>
    </DirectoryRef>
    <DirectoryRef Id="WEBDIR">
        <Component Id="webcmpEBA9C2A32D81BA8646BD1A64DBB39DB1" Guid="{fec110c5-a1a0-4b07-8a35-50f1af84001a}">
            <File Id="webfilDB56E052EC783676CEF361C0C5AA71F3" KeyPath="yes" Source="$(var.runDir)\bin\boost_date_time-vc100-mt-1_47.dll" />
        </Component>
        <Directory Id="webdirpluginF4E08D9A00D2F205F325F00A81" Name="plugins">
            <Component Id="webcmpDECCAE13F8937500E4AC367A8EAC95F4" Guid="{3ef79a47-7681-4991-9726-02db38c22f6d}">
                <File Id="webfilDD3B40D68D0437B18B1108FBA49ABC1B" KeyPath="yes" Source="$(var.runDir)\modules\HelloAPI.dll" />
            </Component>
        </Directory>
    </DirectoryRef>
</Fragment>
<Fragment>
    <ComponentGroup Id="runGroup">
        <ComponentRef Id="cmpEBA9C2A32D81BA8646BD1A64DBB39DB1" />
        <ComponentRef Id="cmpDECCAE13F8937500E4AC367A8EAC95F4" />
    </ComponentGroup>
    <ComponentGroup Id="webGroup">
        <ComponentRef Id="webcmpEBA9C2A32D81BA8646BD1A64DBB39DB1" />
        <ComponentRef Id="webcmpDECCAE13F8937500E4AC367A8EAC95F4" />
    </ComponentGroup>
</Fragment> 
```

# spring-mvc - NoClassDefFoundError 从 servlet 访问 jackrabbit jar

> ID：11981848
> 
> 赞同：2
> 
> 时间：2012-08-16T06:34:40.333
> 
> 标签：spring-mvc, noclassdeffounderror, jackrabbit

尝试使用来自 servlet 的 jackrabbit-standalone-2.4.2.jar 访问存储库时，出现上述错误。我没有使用jackrabbit war，因为我已经有一个胖客户端应用程序在运行，并且我想尽可能多地重用代码。我只是假设这样做是可能的。

为了测试，我创建了一个小型 Web 应用程序。由于我无法附加 zip 文件，我将只复制下面的 doPost() 方法：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    Repository repository = new TransientRepository(
       "repository.xml", //embedded within the war
       "path/to/home/dir");
    Session session = null;
    try {
        session = repository.login();
        System.out.println("root node identifier: " +
        session.getRootNode().getIdentifier());
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        session.logout();
    }
} 
```

当我从 html 表单发布到这个 servlet 时，异常有两个部分：

```
java.lang.NoClassDefFoundError: javax/jcr/Repository
java.lang.ClassNotFoundException: javax.jcr.Repository 
```

当我在其中添加 jcr-2.0.jar 时，我得到一个不同的错误：

```
java.lang.NoClassDefFoundError: org/apache/jackrabbit/core/TransientRepository 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:22:29.220

您最初得到的是`ClassNotFoundException`因为该类不在类路径中。你已经解决了。

这`NoClassDefFoundError`意味着该类位于类路径中，但初始化它时出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:47:12.707

您最初得到的是`ClassNotFoundException`因为该类不在类路径中。你已经解决了。这`NoClassDefFoundError`意味着该类*位于*类路径中，但初始化它时出现问题。有关此区别的详细信息，另请参阅[此问题](https://stackoverflow.com/questions/1457863/what-is-the-difference-between-noclassdeffounderror-and-classnotfoundexception)。

所以类`TransientRepository`是存在的，但很可能是引用的类`TransientRepository`不存在。这意味着您很可能没有在类路径中包含其他必需的 jar 文件。有关依赖项的完整列表（所需的 jar 文件），请参阅`jackrabbit-standalone-2.4.2.jar`或 Jackrabbit 文档。这也可能意味着您拥有所有 jar 文件，但至少有一个 jar 文件是错误的版本。

# c# - 没有 NS 信息的远程域的 MX 记录

> ID：11981850
> 
> 赞同：0
> 
> 时间：2012-08-16T06:34:41.653
> 
> 标签：c#, .net, dns, mx-record

我正在使用 c# 4.0 构建一个 SMTP 诊断工具如果我知道域的主 NS 的 IP 地址，我可以获得 MX、A 和 CNAME 记录。所以我可以验证任何电子邮件并运行合法的诊断命令。，如果我可以连接到邮件服务器。

我的问题是我找不到合适的 .NET 解决方案来获取给定域的主 NS。

我知道有一些托管客户端，但我无法将它们添加为对我的解决方案的引用，或者它们的源代码已关闭。

对于这个问题，托管代码和 .NET 有什么区别，托管代码可以查询域的 NS，而 .NET 不能如此[处](https://stackoverflow.com/a/7790810/574414)所述。?

实现这种功能的正确方法是什么？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T07:48:32.230

您可以使用 IPInterfaceProperties.DnsAddresses 获取 DNS 服务器的 IP。可以在此处找到代码示例：http: [//msdn.microsoft.com/en-us/library/system.net.networkinformation.ipinterfaceproperties.dnsaddresses.aspx](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ipinterfaceproperties.dnsaddresses.aspx)

然后，您可以使用此处找到的组件查询该服务器：http: [//www.codeproject.com/Articles/12072/C-NET-DNS-query-component](http://www.codeproject.com/Articles/12072/C-NET-DNS-query-component)

您可以通过查询 SOA 记录找到主 DNS 服务器。

```
List<IPAddress> dnsServers = new List<IPAddress>();

NetworkInterface[] adapters = NetworkInterface.GetAllNetworkInterfaces();

foreach (NetworkInterface adapter in adapters)
{
    IPInterfaceProperties adapterProperties = adapter.GetIPProperties();
    IPAddressCollection adapterDnsServers = adapterProperties.DnsAddresses;

    if (adapterDnsServers.Count > 0)
        dnsServers.AddRange(adapterDnsServers);
}

foreach (IPAddress dnsServer in (from d in dnsServers 
                                where d.AddressFamily == AddressFamily.InterNetwork
                               select d))
{
    Console.WriteLine("Using server {0}", dnsServer);

    // create a request
    Request request = new Request();

    // add the question
    request.AddQuestion(new Question("stackoverflow.com", DnsType.MX, DnsClass.IN));

    // send the query and collect the response
    Response response = Resolver.Lookup(request, dnsServer);

    // iterate through all the answers and display the output
    foreach (Answer answer in response.Answers)
    {
        MXRecord record = (MXRecord)answer.Record;
        Console.WriteLine("{0} ({1}), preference {2}", record.DomainName, Dns.GetHostAddresses(record.DomainName)[0], record.Preference);
    }

    Console.WriteLine();
}

Console.ReadLine(); 
```

# java - 为什么 Hashtable 不允许空键或空值？

> ID：11981852
> 
> 赞同：41
> 
> 时间：2012-08-16T06:34:46.817
> 
> 标签：java, hashmap, hashtable

如 JDK 文档中所述，Hashtable 不允许空键或空值。HashMap 允许一个空键和任意数量的空值。为什么是这样？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-16T06:38:45.960

Hashtable 是较老的类，通常不鼓励使用它。也许他们看到了对空键的需求，更重要的是 - 空值，并将其添加到 HashMap 实现中。

HashMap 较新，并且具有更高级的功能，基本上只是对 Hashtable 功能的改进。创建 HashMap 时，它专门设计为将 null 值作为键处理，并将它们作为特殊情况处理。

**编辑**

来自`Hashtable` [JavaDoc](http://download.oracle.com/javase/6/docs/api/java/util/Hashtable.html)：

> 要成功地从 Hashtable 存储和检索对象，用作键的对象必须实现 hashCode 方法和 equals 方法。

由于`null`不是对象，因此您无法调用`.equals()`或`.hashCode()`对其进行调用，因此`Hashtable`无法计算散列以将其用作键。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-08-09T16:51:38.100

Hashtable 和 ConcurrentHashMap 不允许空键或空值的主要原因是期望它们将在多线程环境中使用。让我们假设允许空值。在这种情况下，哈希表的“get”方法具有模棱两可的行为。如果在 map 中没有找到键，它可以返回 null，如果找到了键并且它的值为 null，它可以返回 null。当代码需要空值时，它通常会检查键是否存在于映射中，以便它可以知道键是否不存在或键存在但值为空。现在这段代码在多线程环境中中断。让我们看一下下面的代码：

```
if (map.contains(key)) {
    return map.get(key);
} else {
    throw new KeyNotFoundException;
} 
```

在上面的代码中，假设线程 t1 调用 contains 方法并找到键，它假定键存在并准备返回值，无论它是否为空。现在在调用 map.get 之前，另一个线程 t2 从映射中删除该键。现在 t1 恢复并返回 null。但是，根据代码， t1 的正确答案是 KeyNotFoundException 因为密钥已被删除。但它仍然返回 null，因此预期的行为被破坏了。

现在，对于常规的 HashMap，假设它将由单个线程调用，因此在“包含”检查和“获取”的中间不可能删除密钥。所以 HashMap 可以容忍空值。然而，对于 Hashtable 和 ConcurrentHashMap，预期很明显，多个线程将对数据进行操作。因此，他们不能允许空值并给出不正确的答案。同样的逻辑也适用于键。现在 counter 参数可以是 - 对于 Hashtables 和 ConcurrentHashMaps 的非空值，包含和获取步骤可能会失败，因为另一个线程可以在执行第二步之前修改映射/表。这是正确的，它可能发生。但是由于 Hashtables 和 ConcurrentHashMaps 不允许空键和值，他们没有必要首先实施包含并进行检查。他们可以直接获取值，因为他们知道如果 get 方法返回 null，唯一的原因是键不存在，而不是因为值可能为 null。contains 和 get 检查仅对 HashMap 是必需的，因为它们允许空值，因此需要解决关于是否找不到键或值是否为空的歧义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-09T08:25:45.597

所以总结

因为在 HashTable 中，当您放置一个元素时，它会考虑键和值哈希。基本上你会有类似的东西：

```
public Object put(Object key, Object value){

    key.hashCode();

    //some code

    value.hashCode();

} 
```

HashTable - 不允许空键 这是因为在 put(K key, V value) 方法中，我们有 key.hashcode() 抛出空指针异常。HashTable - 不允许空值 这是因为，在 put(K key, V value) 方法中，我们有 if(value==null){throw new NullPointerException

HashMap 允许空值，因为它没有像 HashTable 这样的任何检查，而它只允许一个空键。这是在 putForNullKey 方法的帮助下完成的，该方法每次将键提供为 null 时将值添加到内部 Array 的第 0 个索引

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-06T17:06:14.993

原因是接受答案的原因：Hashtable is old。

但是，在每种情况下都不鼓励使用 Hashtable 来支持 HashMap。

*   **Hashtable 是同步的，所以它是[THREAD-SAFE](https://en.wikipedia.org/wiki/Thread_safety)。HashMap 不是。**

Hashtable 和 ConcurrentHashMap 都不支持空键或空值。HashMap 可以。

如果您想要一个只需要更改类并且在每种情况下都可以使用的直接替代品，那么没有。最相似的选项是[ConcurrentHashMap](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html)（它是线程安全的，但不支持锁定整个表）：

> 在依赖线程安全但不依赖同步细节的程序中，此类与 Hashtable 完全可互操作。

HashMap 是单线程应用程序的更好替代品，或者不需要任何时间同步，因为同步引入了性能影响。

资料来源：

*   [哈希表](https://docs.oracle.com/javase/8/docs/api/java/util/Hashtable.html)
*   [哈希映射](http://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html)
*   [并发哈希映射](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-03T08:07:05.980

默认 Hashtable 实现具有空值检查，这会导致空指针异常。后来，Java 开发人员可能已经意识到空键（对于某些默认值等）和值的重要性以及引入 HashMap 的原因。

对于 HashMap，如果键为空，则对键进行空检查，然后该元素将存储在不需要哈希码的位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-25T02:53:32.113

正如@Jainendra 所说，HashTable 不允许 null 键用于调用 key.hashCode() in `put()`。

但似乎没有人清楚地回答为什么不允许空值。

```
public synchronized V put(K key, V value) {
    // Make sure the value is not null
    if (value == null) {
        throw new NullPointerException();
    }

    // Makes sure the key is not already in the hashtable.
    Entry<?,?> tab[] = table;
    int hash = key.hashCode();
    int index = (hash & 0x7FFFFFFF) % tab.length;
    @SuppressWarnings("unchecked")
    Entry<K,V> entry = (Entry<K,V>)tab[index];
    for(; entry != null ; entry = entry.next) {
        if ((entry.hash == hash) && entry.key.equals(key)) {
            V old = entry.value;
            entry.value = value;
            return old;
        }
    }

    addEntry(hash, key, value, index);
    return null;
} 
```

put 中的 null 检查并不能解释为什么 null 值是非法的，它只是确保非 null 不变量。

不允许空值的具体答案是 HashTable 将在 call`value.equals`时调用`contains/remove`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-13T14:25:51.420

**Hashtable 是 java 的第一个版本附带的一个类。当它发布时，Java 工程师试图阻止使用空键，或者可能没有意识到它的用处。因此，他们不允许在哈希表中使用它。**

如果 value 为 null，则在**Hashtable**中插入键值对的 put 方法会抛出 NullPointerException。由于Hashtable是基于散列机制的，所以为key计算hash，如果key为null则抛出NullPointerException。

**后来的 Java 工程师一定已经意识到，拥有一个空键和空值有它的用途，就像在默认情况下使用它们一样。因此，他们在 Java 5 中提供了带有集合框架的 HashMap 类，该类具有存储空键和值的能力。**

在 HashMap 中插入键值对的 put 方法检查空键并将其存储在内部表数组的第一个位置。它不怕空值，也不会像 Hashtable 那样抛出 NullPointerException。

现在，只能有一个空键，因为键必须是唯一的，尽管我们可以有多个空值与不同的键关联。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-05T05:18:49.967

哈希表是非常古老的类，来自 JDK 1.0

要理解这一点，首先我们需要理解作者在这个类上写的评论。“这个类实现了一个哈希表，它将键映射到值。任何非空对象都可以用作键或值。要成功地从哈希表中存储和检索对象，用作键的对象必须实现 hashCode 方法和 equals 方法。”</p>

HashTable 类是在散列机制上实现的，即存储任何键值对，其所需的键对象的散列码。如果键为空，它将无法给出哈希，它将通过空指针异常和类似的情况，如果值为空，它会抛出空。

但后来意识到空键和空值有其自身的重要性，这就是为什么在后来实现的类（如 HashMap 类）中允许一个空键和多个空值的原因。

对于哈希映射，空键将允许，并且如果键为空，则对键进行空检查，然后该元素将存储在 Entry 数组中的零位置。空键我们可以使用一些默认值..

=> Hashtable 方法是同步的，它从不使用基于对象的锁定。

HashMap 通过考虑特殊来实现

```
 static final int hash(Object key) {
        int h;
        return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
    } 
```

Java 8 您无法推断哈希表的类型。

```
private Map<String,String> hashtable = new Hashtable<>(); // Not Allowed

private Map<String,String> hashtable = new HashMap<>(); // Allowed 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-20T06:48:36.320

Hashtable 不允许空键，但 HashMap 允许一个空键和任意数量的空值。这背后有一个简单的解释。

`put()`当 null作为 key 传递并且 null Key 作为特殊情况处理时，hashmap 中的方法**不会调用 hashcode() 。**HashMap 将 null 键放入桶 0 并将 null 作为键映射到传递的值。

```
public V put(K key, V value) {
        if (key == null)
            return putForNullKey(value);
        int hash = hash(key);
        int i = indexFor(hash, table.length);
        for (Entry<K,V> e = table[i]; e != null; e = e.next) {
            Object k;
            if (e.hash == hash && ((k = e.key) == key || key.equals(k))) {
                V oldValue = e.value;
                e.value = value;
                e.recordAccess(this);
                return oldValue;
            }
        }

        modCount++;
        addEntry(hash, key, value, i);
        return null;
    } 
```

如算法中所见，该`put()`方法检查键是否为空并调用 putForNullKey(value) 并返回。这个 putForNullKey 将在桶中的 0 索引处创建一个条目。索引零始终为存储桶中的空键保留。

另一方面，在**用作键的哈希表对象的情况下，必须实现 hashCode 方法和 equals**方法。由于 null 不是对象，因此无法实现这些方法。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2016-02-29T23:17:10.840

**HashTable - 不允许空键**
这是因为在 put(K key, V value) 方法中，我们有`key.hashcode()`抛出空指针异常。
**HashTable - 不允许空值**
这是因为，在 put(K key, V value) 方法中，我们有`if(value==null){throw new NullPointerException`

HashMap 允许空值，因为它没有像 HashTable 这样的任何检查，而它只允许一个空键。这是在 putForNullKey 方法的帮助下完成的，该方法每次将键提供为 null 时将值添加到内部 Array 的第 0 个索引

# php - WKHTMLTOPDF -- 是否可以显示动态标题？

> ID：11981853
> 
> 赞同：2
> 
> 时间：2012-08-16T06:34:53.703
> 
> 标签：php, dynamic, header, wkhtmltopdf

我使用 wkhtmltopdf --header-html 选项，但它似乎真的只适用于 html 代码。有什么办法可以添加一些 PHP 并强制它以某种方式工作吗？我需要在每一页上显示日期和用户的电子邮件......感谢您的任何建议；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:09:13.863

您几乎可以提供 --header-html 任何东西 :) 尝试以下操作以了解我的观点：

```
wkhtmltopdf.exe --margin-top 30mm --header-html isitchristmas.com google.fi x.pdf 
```

所以 isitchristmas.com 可能是 www.yoursite.com/magical/ponies.php

只是补充一下，您不能在本地运行 php 文件，因此您需要一个网络服务器来为它们提供服务。如果您需要 100% 的本地动态标头，您可以尝试使用 javascript 进行一些假动态；使用`--header-html myheader.html?date=12345&usermail=derp`然后用 javacript 处理 URL（我没有尝试过）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-02T00:47:53.920

要为您的页眉/页脚 html 添加额外的查询字符串参数，您需要使用命令行开关“替换”。

帮助/手册的措辞有点误导（即更好的措辞可以解决问题），因为它导致我走错了路（尝试使用'post'开关）。我在通过github上的代码挖掘后找到了解决方案。

# xsd - 元素名称和复杂类型名称相同

> ID：11981855
> 
> 赞同：1
> 
> 时间：2012-08-16T06:34:59.720
> 
> 标签：xsd, jaxb

我有一个 xsd，其中每个元素名称及其复杂类型名称都是相同的。当我使用 JAXB 从 xsd 生成 Java 时，这会产生问题。此 xsd 已由外部服务提供商提供。XSD 是错误的还是我在生成 xsd 时做错了什么。以下是 xsd 的示例：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" attributeFormDefault="unqualified" elementFormDefault="unqualified">
<xs:element name="Discounts" type="Discounts"/>
    <xs:complexType name="Discounts">
    <xs:complexContent>
        <xs:extension base="listWithSizeAttribute">
            <xs:sequence>
                <xs:element maxOccurs="unbounded" minOccurs="0" name="Discounttest" type="Discounttest"/>
            </xs:sequence>
        </xs:extension>
    </xs:complexContent>
</xs:complexType> 
```

每当我使用 JAXB 生成 Java 对象时，都会收到显示重复元素折扣的错误。整个xsd充满了这样的元素。因此，我认为我这边有问题。

谢谢， 阿克谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:24:04.653

**XML 模式**

当全局元素和复杂类型具有相同名称时没有问题。我已经清除了您的 XML 模式以使其有效，以便我可以在其上运行模式编译。

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    attributeFormDefault="unqualified" elementFormDefault="unqualified">
    <xs:element name="Discounts" type="Discounts" />
    <xs:complexType name="listWithSizeAttribute" />
    <xs:complexType name="Discounttest" />
    <xs:complexType name="Discounts">
        <xs:complexContent>
            <xs:extension base="listWithSizeAttribute">
                <xs:sequence>
                    <xs:element maxOccurs="unbounded" minOccurs="0"
                        name="Discounttest" type="Discounttest" />
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
</xs:schema> 
```

**折扣**

JAXB (JSR-222) 实现为复杂类型生成 Java 类，因此将为复杂类型生成一个类`Discounts`。

```
package forum11981855;

import java.util.ArrayList;
import java.util.List;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlType;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "Discounts", propOrder = {
    "discounttest"
})
public class Discounts
    extends ListWithSizeAttribute
{

    @XmlElement(name = "Discounttest")
    protected List<Discounttest> discounttest;

    public List<Discounttest> getDiscounttest() {
        if (discounttest == null) {
            discounttest = new ArrayList<Discounttest>();
        }
        return this.discounttest;
    }

} 
```

**对象工厂**

将在与全局元素对应`@XmlElementDecl`的类上生成注释。`ObjectFactory``Discounts`

```
package forum11981855;

import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.XmlElementDecl;
import javax.xml.bind.annotation.XmlRegistry;
import javax.xml.namespace.QName;

@XmlRegistry
public class ObjectFactory {

    private final static QName _Discounts_QNAME = new QName("", "Discounts");

    public ObjectFactory() {
    }

    public Discounttest createDiscounttest() {
        return new Discounttest();
    }

    public Discounts createDiscounts() {
        return new Discounts();
    }

    public ListWithSizeAttribute createListWithSizeAttribute() {
        return new ListWithSizeAttribute();
    }

    @XmlElementDecl(namespace = "", name = "Discounts")
    public JAXBElement<Discounts> createDiscounts(Discounts value) {
        return new JAXBElement<Discounts>(_Discounts_QNAME, Discounts.class, null, value);
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html](http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html)

# microcontroller - 如何找到微控制器是大端还是小端？

> ID：11981860
> 
> 赞同：0
> 
> 时间：2012-08-16T06:35:53.687
> 
> 标签：microcontroller

如何找到微控制器是大端还是小端？

没有微控制器规范，如何知道控制器是大端还是小端？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T16:04:31.553

尝试这个，

```
int x = 1;

if (*(char *)&x == 1)
    printf("Little Endian [LSB first]");  // or LED1 ON
else
    printf("Big Endian [MSB first]");     // or LED2 ON 
```

我在这里做的是——

*   在“int”中设置最低有效位
*   取消引用“int”
*   将其转换为 char 指针，即 char 数组和
*   然后读取该数组的第一个元素

如果我们能够在第一个索引处看到我们的最低有效位“1”，则表示它首先存储 LSB，这意味着**Little Endian 系统**。

如果我们在第一个索引处看不到我们的最低有效位“1”，则表示它首先存储 MSB，这意味着**Big Endian 系统**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T06:42:56.523

你没有规格！？你可以从网上下载...

如果您可以在此控制器上运行调试器，您可以将 0x1234 写入某个 RAM 地址并在内存窗口中查看结果：

IE 将 0x1234 写入 0x2000 会导致：

0x2000 = 0x12 , 0x2001 = 0x34 --> 大端

0x2000 = 0x34 , 0x2001 = 0x12 --> 小端

# ios - iOS 触摸 UIImageView

> ID：11981863
> 
> 赞同：0
> 
> 时间：2012-08-16T06:36:03.870
> 
> 标签：ios

```
 - (void)viewDidLoad
 {
  [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
   container = [[UIView alloc] initWithFrame:self.view.frame];
UIImageView* main_im0 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"icon1.png"]];
[container addSubview:main_im0];
[self.view addSubview:container];

 }

 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
UITouch *tt = [touches anyObject];

UIImageView *touchedview=(UIImageView*)[tt view];

NSArray *views = [container subviews];

 for (UIImageView* im in views)
 {
    UIImageView* focus=im;
    if (touchedview==focus)
    {

    }

} 
```

}

我有这段代码设置了一个名为 main_im0 的 ImageView，它被放入 UIView 容器中，然后放入视图中。当我在 main_im0 上单击时，我希望触摸功能会达到 touchview==focus 的条件。但是，我无法激活该条件？怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T06:40:01.113

请启用

```
main_im0.userInteractionEnabled = YES; 
```

默认情况下它是`No`为`UIImageView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T07:13:25.940

杰森，也许我误解了你的代码，但你不是要绕一圈在 UIView 上实现点击手势吗？

您可以使用：

```
// enable user interaction with this view
main_img0.userInteractionEnabled = YES;

// setup a tap gesture to call a method once triggered (like a javascript mouseClick event)
UITapGesture *tapGesture = [[UITapGesture alloc] initWithTarget:self selector:@selector(myMethodToDoSomething)];

[main_img0 addGestureRecognizer:tapGesture];

// if you are not using Automatic Reference Counting, then remember to release your allocated tapGesture object
[tapGesture release];

...somewhere later in your code....

// method to do something
-(void)myMethodToDoSomething
{
    NSLog(@"This method executed");
} 
```

现在，当您点击 main_img0 视图时，方法“myMethodToDoSomething”将执行

顺便说一句，如果您只想要一个带有您自己的 Photoshop 设计图像的自定义外观按钮，您可以简单地使用代码创建一个 UIButton 并设置 UIButton 的背景图像属性。像这样：

```
UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 100, 50)];
[button setImage:[UIImage imageNamed:@"mybutton.png"] forControlState:UIControlStateNormal]; 
```

# linux - 连接被拒绝：如何为 localhost 配置 apache james

> ID：11981867
> 
> 赞同：2
> 
> 时间：2012-08-16T06:36:25.347
> 
> 标签：linux, apache, email, telnet, james

我不清楚如何配置 Apache James。[快速入门指南](http://james.apache.org/server/3/quick-start.html)说：

```
Step 4: Configure
#################

  * All configuration files are embedded in jars.
  * We ship in the conf foler template configuration files.
  * You can override the default configuration : 
      Copy the conf folder any ...-template... you need and update according to your needs. 
```

配置文件嵌入到 jar 中是什么意思？我应该解压缩所有这些 jar 来配置文件吗？

目录结构：

```
thufir@dur:~/apache-james-3.0-beta4$ 
thufir@dur:~/apache-james-3.0-beta4$ tree -L 1
.
├── bin
├── conf
├── lib
├── LICENSE
├── log
├── NOTICE
├── README.crypto
├── README.txt
└── var

5 directories, 4 files
thufir@dur:~/apache-james-3.0-beta4$ 
thufir@dur:~/apache-james-3.0-beta4$ ll conf/
total 272
drwxr-xr-x 4 thufir thufir  4096 Aug 14 06:26 ./
drwxrwxr-x 7 thufir thufir  4096 Aug 14 06:26 ../
-rw------- 1 thufir thufir  2939 Mar 21 03:33 dnsservice-template.conf
-rw------- 1 thufir thufir  2903 Mar 21 03:33 domainlist-template.conf
-rw------- 1 thufir thufir 18715 Mar 21 03:33 fetchmail-template.conf
-rw------- 1 thufir thufir  1197 Mar 21 03:33 hbase-site-template.xml
-rw------- 1 thufir thufir  3466 Mar 21 03:33 imapserver-template.conf
-rw------- 1 thufir thufir  1645 Mar 21 03:33 james-database-template.properties
-rw------- 1 thufir thufir  3510 Mar 21 03:33 jcr-repository-template.xml
-rw------- 1 thufir thufir  1158 Mar 21 03:33 jmx-template.properties
drwxr-xr-x 2 thufir thufir  4096 Aug 14 06:26 lib/
-rw------- 1 thufir thufir  3325 Mar 21 03:33 lmtpserver-template.conf
-rw------- 1 thufir thufir  6944 Mar 21 03:33 log4j.properties
-rw------- 1 thufir thufir  7073 Mar 21 03:33 log4j-template.properties
-rw------- 1 thufir thufir  2885 Mar 21 03:33 mailbox-jcr-template.cnd
-rw------- 1 thufir thufir  1043 Mar 21 03:33 mailbox-maildir-template.properties
-rw------- 1 thufir thufir  1492 Mar 21 03:33 mailbox-template.conf
-rw------- 1 thufir thufir 30474 Mar 21 03:33 mailetcontainer-template.conf
-rw------- 1 thufir thufir  4172 Mar 21 03:33 mailrepositorystore-template.conf
drwxr-xr-x 3 thufir thufir  4096 Aug 14 06:26 META-INF/
-rw------- 1 thufir thufir  3528 Mar 21 03:33 pop3server-template.conf
-rw------- 1 thufir thufir  2497 Mar 21 03:33 recipientrewritetable-template.conf
-rw------- 1 thufir thufir 16011 Mar 21 03:33 smtpserver-template.conf
-rw------- 1 thufir thufir 43220 Mar 21 03:33 sqlResources-template.xml
-rw------- 1 thufir thufir 43220 Mar 21 03:33 sqlResources.xml
-rw------- 1 thufir thufir  1606 Mar 21 03:33 usersrepository23-template.conf
-rw------- 1 thufir thufir  3715 Mar 21 03:33 usersrepository-template.conf
-rw------- 1 thufir thufir 12596 Mar 21 03:33 wrapper.conf
thufir@dur:~/apache-james-3.0-beta4$ 
```

虽然我确实看到了配置文件，但哪个配置文件可以让我远程登录到 James？

尝试连接：

```
thufir@dur:~/apache-james-3.0-beta4$ 
thufir@dur:~/apache-james-3.0-beta4$ bin/james console
Running Apache James Server App...
wrapper  | --> Wrapper Started as Console
wrapper  | Launching a JVM...
jvm 1    | Wrapper (Version 3.2.3) http://wrapper.tanukisoftware.org
jvm 1    |   Copyright 1999-2006 Tanuki Software, Inc.  All Rights Reserved.
jvm 1    | 
jvm 1    | log4j:ERROR setFile(null,true) call failed.
jvm 1    | java.io.FileNotFoundException: ../log/james-server.log (Permission denied)
jvm 1    |  at java.io.FileOutputStream.openAppend(Native Method)
jvm 1    |  at java.io.FileOutputStream.<init>(FileOutputStream.java:207)
jvm 1    |  at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
jvm 1    |  at org.apache.log4j.FileAppender.setFile(FileAppender.java:294)
jvm 1    |  at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:165)
jvm 1    |  at org.apache.log4j.DailyRollingFileAppender.activateOptions(DailyRollingFileAppender.java:223)
jvm 1    |  at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:307)
jvm 1    |  at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:172)
jvm 1    |  at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:104)
jvm 1    |  at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:809)
jvm 1    |  at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:735)
jvm 1    |  at org.apache.log4j.PropertyConfigurator.parseCatsAndRenderers(PropertyConfigurator.java:639)
jvm 1    |  at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:504)
jvm 1    |  at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:547)
jvm 1    |  at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:483)
jvm 1    |  at org.apache.log4j.LogManager.<clinit>(LogManager.java:127)
jvm 1    |  at org.slf4j.impl.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:73)
jvm 1    |  at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:242)
jvm 1    |  at org.apache.james.app.spring.JamesAppSpringMain.<clinit>(JamesAppSpringMain.java:34)
jvm 1    |  at java.lang.Class.forName0(Native Method)
jvm 1    |  at java.lang.Class.forName(Class.java:186)
jvm 1    |  at org.tanukisoftware.wrapper.WrapperSimpleApp.<init>(WrapperSimpleApp.java:147)
jvm 1    |  at org.tanukisoftware.wrapper.WrapperSimpleApp.main(WrapperSimpleApp.java:485)
jvm 1    | log4j:ERROR Either File or DatePattern options are not set for appender [FILE].
jvm 1    | INFO  01:04:33,381 | org.apache.james.container.spring.context.JamesServerApplicationContext | Refreshing org.apache.james.container.spring.context.JamesServerApplicationContext@1f5d386: startup date [Thu Aug 16 01:04:33 PDT 2012]; root of context hierarchy
jvm 1    | log4j:WARN No appenders could be found for logger (org.apache.commons.configuration.ConfigurationUtils).
jvm 1    | log4j:WARN Please initialize the log4j system properly.
jvm 1    | log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
jvm 1    | INFO  01:04:38,359 | org.apache.james.container.spring.context.JamesServerApplicationContext | Bean 'logprovider' of type [class org.apache.james.container.spring.lifecycle.LogProviderImpl] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
jvm 1    | INFO  01:04:39,987 | james.mailrepositorystore | JamesMailStore init...
jvm 1    | INFO  01:04:40,026 | james.mailrepositorystore | Registering Repository instance of class org.apache.james.mailrepository.file.FileMailRepository to handle file protocol requests for repositories with key file
jvm 1    | INFO  01:04:40,026 | james.mailrepositorystore | Registering Repository instance of class org.apache.james.mailrepository.jdbc.JDBCMailRepository to handle db protocol requests for repositories with key db
jvm 1    | INFO  01:04:40,027 | james.mailrepositorystore | Registering Repository instance of class org.apache.james.mailrepository.jdbc.JDBCMailRepository to handle dbfile protocol requests for repositories with key dbfile
jvm 1    | INFO  01:04:40,027 | james.mailrepositorystore | Registering Repository instance of class org.apache.james.mailrepository.file.MBoxMailRepository to handle mbox protocol requests for repositories with key mbox
jvm 1    | INFO  01:04:41,791 | james.dnsservice | Autodiscovery is enabled - trying to discover your system's DNS Servers
jvm 1    | INFO  01:04:41,821 | james.dnsservice | Adding autodiscovered server 127.0.0.1
jvm 1    | INFO  01:04:41,822 | james.dnsservice | Adding autodiscovered search path bounceme.net.
jvm 1    | INFO  01:04:41,833 | james.dnsservice | DNS Server is: 127.0.0.1
jvm 1    | INFO  01:04:41,870 | james.dnsservice | Registered cache, resolver and search paths as DNSJava defaults
jvm 1    | 54  James  WARN   [WrapperSimpleAppMain] openjpa.Runtime - An error occurred while registering a ClassTransformer with PersistenceUnitInfo: name 'James', root URL [file:/home/thufir/apache-james-3.0-beta4/conf/]. The error has been consumed. To see it, set your openjpa.Runtime log level to TRACE. Load-time class transformation will not be available.
jvm 1    | INFO  01:04:43,208 | james.domainlist | Set autodetect to: true
jvm 1    | INFO  01:04:43,216 | james.domainlist | Set autodetectIP to: true
jvm 1    | 156  James  INFO   [WrapperSimpleAppMain] openjpa.Runtime - Starting OpenJPA 2.1.0
jvm 1    | 368  James  INFO   [WrapperSimpleAppMain] openjpa.jdbc.JDBC - Using dictionary class "org.apache.openjpa.jdbc.sql.DerbyDictionary".
jvm 1    | 7087  James  INFO   [WrapperSimpleAppMain] openjpa.Runtime - The Entity "org.apache.james.domainlist.jpa.model.JPADomain" was enhanced at level "2", but the current level of enhancement is "1,055,128". 
jvm 1    | 7094  James  INFO   [WrapperSimpleAppMain] openjpa.Runtime - A down level Entity was detected and logged. Please enable RUNTIME trace to see all down level Entities.
jvm 1    | WARN  01:04:51,660 | james.mailetcontext | The specified postmaster address ( postmaster@localhost ) is not a local address.  This is not necessarily a problem, but it does mean that emails addressed to the postmaster will be routed to another server.  For some configurations this may cause problems.
jvm 1    | INFO  01:04:52,153 | james.mailprocessor | Matcher All instantiated.
jvm 1    | INFO  01:04:52,214 | james.mailprocessor | Mailet PostmasterAlias instantiated.
jvm 1    | INFO  01:04:52,238 | james.mailprocessor | Matcher RelayLimit=30 instantiated.
jvm 1    | INFO  01:04:52,262 | james.mailprocessor | Mailet Null instantiated.
jvm 1    | INFO  01:04:52,284 | james.mailprocessor | Matcher SMTPAuthSuccessful instantiated.
jvm 1    | INFO  01:04:52,301 | james.mailprocessor | Mailet ToProcessor instantiated.
jvm 1    | INFO  01:04:52,302 | james.mailprocessor | Matcher All instantiated.
jvm 1    | INFO  01:04:52,314 | james.mailprocessor | Mailet ToProcessor instantiated.
jvm 1    | INFO  01:04:54,075 | james.mailprocessor | Matcher SMTPAuthSuccessful instantiated.
jvm 1    | INFO  01:04:54,085 | james.mailprocessor | Mailet SetMimeHeader instantiated.
jvm 1    | INFO  01:04:54,094 | james.mailprocessor | Matcher RecipientIsLocal instantiated.
jvm 1    | INFO  01:04:54,103 | james.mailprocessor | Mailet RecipientToLowerCase instantiated.
jvm 1    | INFO  01:04:54,104 | james.mailprocessor | Matcher RecipientIsLocal instantiated.
jvm 1    | INFO  01:04:54,547 | james.mailprocessor | Mailet LocalDelivery instantiated.
jvm 1    | INFO  01:04:54,556 | james.mailprocessor | Matcher HostIsLocal instantiated.
jvm 1    | INFO  01:04:54,558 | james.mailprocessor | Mailet ToProcessor instantiated.
jvm 1    | INFO  01:04:54,558 | james.mailprocessor | Matcher All instantiated.
jvm 1    | INFO  01:04:54,621 | james.mailetcontext | maxRetries is larger than total number of attempts specified.  Increasing last delayTime with 19 attempts 
jvm 1    | INFO  01:04:54,621 | james.mailetcontext | Delay of 21600000 msecs is now attempted: 20 times
jvm 1    | INFO  01:04:54,696 | james.mailprocessor | Mailet RemoteDelivery instantiated.
jvm 1    | INFO  01:04:56,336 | james.mailprocessor | Matcher All instantiated.
jvm 1    | INFO  01:04:56,387 | james.mailrepositorystore | Init org.apache.james.repository.file.FilePersistentObjectRepository Store
jvm 1    | INFO  01:04:56,390 | james.mailrepositorystore | org.apache.james.repository.file.FilePersistentObjectRepository opened in ../var/mail/error
jvm 1    | INFO  01:04:56,392 | james.mailrepositorystore | Init org.apache.james.repository.file.FilePersistentStreamRepository Store
jvm 1    | INFO  01:04:56,393 | james.mailrepositorystore | org.apache.james.repository.file.FilePersistentStreamRepository opened in ../var/mail/error
jvm 1    | INFO  01:04:56,395 | james.mailrepositorystore | added repository: file://var/mail/error/->org.apache.james.mailrepository.file.FileMailRepository
jvm 1    | INFO  01:04:56,395 | james.mailprocessor | Mailet ToRepository instantiated.
jvm 1    | INFO  01:04:56,801 | james.mailprocessor | Matcher All instantiated.
jvm 1    | INFO  01:04:56,806 | james.mailrepositorystore | Init org.apache.james.repository.file.FilePersistentObjectRepository Store
jvm 1    | INFO  01:04:56,807 | james.mailrepositorystore | org.apache.james.repository.file.FilePersistentObjectRepository opened in ../var/mail/spam
jvm 1    | INFO  01:04:56,808 | james.mailrepositorystore | Init org.apache.james.repository.file.FilePersistentStreamRepository Store
jvm 1    | INFO  01:04:56,808 | james.mailrepositorystore | org.apache.james.repository.file.FilePersistentStreamRepository opened in ../var/mail/spam
jvm 1    | INFO  01:04:56,809 | james.mailrepositorystore | added repository: file://var/mail/spam/->org.apache.james.mailrepository.file.FileMailRepository
jvm 1    | INFO  01:04:56,809 | james.mailprocessor | Mailet ToRepository instantiated.
jvm 1    | INFO  01:04:57,180 | james.mailprocessor | Matcher All instantiated.
jvm 1    | INFO  01:04:57,183 | james.mailrepositorystore | Init org.apache.james.repository.file.FilePersistentObjectRepository Store
jvm 1    | INFO  01:04:57,183 | james.mailrepositorystore | org.apache.james.repository.file.FilePersistentObjectRepository opened in ../var/mail/address-error
jvm 1    | INFO  01:04:57,184 | james.mailrepositorystore | Init org.apache.james.repository.file.FilePersistentStreamRepository Store
jvm 1    | INFO  01:04:57,184 | james.mailrepositorystore | org.apache.james.repository.file.FilePersistentStreamRepository opened in ../var/mail/address-error
jvm 1    | INFO  01:04:57,185 | james.mailrepositorystore | added repository: file://var/mail/address-error/->org.apache.james.mailrepository.file.FileMailRepository
jvm 1    | INFO  01:04:57,185 | james.mailprocessor | Mailet ToRepository instantiated.
jvm 1    | INFO  01:04:57,633 | james.mailprocessor | Matcher All instantiated.
jvm 1    | INFO  01:04:57,636 | james.mailrepositorystore | Init org.apache.james.repository.file.FilePersistentObjectRepository Store
jvm 1    | INFO  01:04:57,636 | james.mailrepositorystore | org.apache.james.repository.file.FilePersistentObjectRepository opened in ../var/mail/relay-denied
jvm 1    | INFO  01:04:57,637 | james.mailrepositorystore | Init org.apache.james.repository.file.FilePersistentStreamRepository Store
jvm 1    | INFO  01:04:57,637 | james.mailrepositorystore | org.apache.james.repository.file.FilePersistentStreamRepository opened in ../var/mail/relay-denied
jvm 1    | INFO  01:04:57,637 | james.mailrepositorystore | added repository: file://var/mail/relay-denied/->org.apache.james.mailrepository.file.FileMailRepository
jvm 1    | INFO  01:04:57,638 | james.mailprocessor | Mailet ToRepository instantiated.
jvm 1    | INFO  01:04:57,996 | james.mailprocessor | Matcher All instantiated.
jvm 1    | INFO  01:04:58,043 | james.mailprocessor | Mailet DSNBounce instantiated.
jvm 1    | INFO  01:04:58,398 | james.mailspooler | org.apache.james.mailetcontainer.impl.JamesMailSpooler init...
jvm 1    | INFO  01:04:58,400 | james.mailspooler | org.apache.james.mailetcontainer.impl.JamesMailSpooler uses 20 Thread(s)
jvm 1    | INFO  01:04:58,407 | james.mailspooler | Run org.apache.james.mailetcontainer.impl.JamesMailSpooler: dequeuer-1
jvm 1    | INFO  01:04:58,407 | james.mailspooler | Queue=MailQueue:spool
jvm 1    | INFO  01:04:58,423 | james.mailspooler | Run org.apache.james.mailetcontainer.impl.JamesMailSpooler: dequeuer-2
jvm 1    | INFO  01:04:58,423 | james.mailspooler | Queue=MailQueue:spool
jvm 1    | INFO  01:04:58,577 | james.fetchmail | FetchMail Disabled
jvm 1    | INFO  01:04:58,807 | james.smtpserver | SMTP Service bound to: 0.0.0.0:25
jvm 1    | INFO  01:04:58,808 | james.smtpserver | SMTP Service is running on: dur.bounceme.net
jvm 1    | INFO  01:04:58,808 | james.smtpserver | SMTP Service handler hello name is: dur.bounceme.net
jvm 1    | INFO  01:04:58,809 | james.smtpserver | SMTP Service handler connection timeout is: 360
jvm 1    | INFO  01:04:58,809 | james.smtpserver | SMTP Service connection backlog is: 200
jvm 1    | INFO  01:04:58,810 | james.smtpserver | This SMTP server requires authentication.
jvm 1    | INFO  01:04:58,810 | james.smtpserver | No maximum message size is enforced for this server.
jvm 1    | INFO  01:05:00,105 | james.mailspooler | org.apache.james.mailetcontainer.impl.JamesMailSpooler dispose...
jvm 1    | INFO  01:05:00,110 | james.mailspooler | Stop org.apache.james.mailetcontainer.impl.JamesMailSpooler: dequeuer-2
jvm 1    | INFO  01:05:00,113 | james.mailspooler | org.apache.james.mailetcontainer.impl.JamesMailSpooler thread shutdown completed.
jvm 1    | INFO  01:05:00,112 | james.mailspooler | Stop org.apache.james.mailetcontainer.impl.JamesMailSpooler: dequeuer-1
jvm 1    | 
jvm 1    | WrapperSimpleApp: Encountered an error running main: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'smtpserver': Invocation of init method failed; nested exception is org.jboss.netty.channel.ChannelException: Failed to bind to: /0.0.0.0:25
jvm 1    | org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'smtpserver': Invocation of init method failed; nested exception is org.jboss.netty.channel.ChannelException: Failed to bind to: /0.0.0.0:25
jvm 1    |  at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:135)
jvm 1    |  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
jvm 1    |  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1448)
jvm 1    |  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
jvm 1    |  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
jvm 1    |  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
jvm 1    |  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
jvm 1    |  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
jvm 1    |  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
jvm 1    |  at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
jvm 1    |  at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
jvm 1    |  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
jvm 1    |  at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
jvm 1    |  at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:93)
jvm 1    |  at org.apache.james.container.spring.context.JamesServerApplicationContext.<init>(JamesServerApplicationContext.java:39)
jvm 1    |  at org.apache.james.app.spring.JamesAppSpringMain.init(JamesAppSpringMain.java:61)
jvm 1    |  at org.apache.james.app.spring.JamesAppSpringMain.main(JamesAppSpringMain.java:42)
jvm 1    |  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
jvm 1    |  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
jvm 1    |  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
jvm 1    |  at java.lang.reflect.Method.invoke(Method.java:616)
jvm 1    |  at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240)
jvm 1    |  at java.lang.Thread.run(Thread.java:679)
jvm 1    | Caused by: org.jboss.netty.channel.ChannelException: Failed to bind to: /0.0.0.0:25
jvm 1    |  at org.jboss.netty.bootstrap.ServerBootstrap.bind(ServerBootstrap.java:298)
jvm 1    |  at org.apache.james.protocols.netty.AbstractAsyncServer.bind(AbstractAsyncServer.java:101)
jvm 1    |  at org.apache.james.protocols.lib.netty.AbstractConfigurableAsyncServer.init(AbstractConfigurableAsyncServer.java:274)
jvm 1    |  at org.apache.james.protocols.lib.netty.AbstractServerFactory.init(AbstractServerFactory.java:75)
jvm 1    |  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
jvm 1    |  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
jvm 1    |  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
jvm 1    |  at java.lang.reflect.Method.invoke(Method.java:616)
jvm 1    |  at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:346)
jvm 1    |  at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:299)
jvm 1    |  at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:132)
jvm 1    |  ... 22 more
jvm 1    | Caused by: java.net.SocketException: Permission denied
jvm 1    |  at sun.nio.ch.Net.bind(Native Method)
jvm 1    |  at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:137)
jvm 1    |  at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:77)
jvm 1    |  at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.bind(NioServerSocketPipelineSink.java:140)
jvm 1    |  at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.handleServerSocket(NioServerSocketPipelineSink.java:92)
jvm 1    |  at org.jboss.netty.channel.socket.nio.NioServerSocketPipelineSink.eventSunk(NioServerSocketPipelineSink.java:66)
jvm 1    |  at org.jboss.netty.channel.Channels.bind(Channels.java:462)
jvm 1    |  at org.jboss.netty.channel.AbstractChannel.bind(AbstractChannel.java:186)
jvm 1    |  at org.jboss.netty.bootstrap.ServerBootstrap$Binder.channelOpen(ServerBootstrap.java:343)
jvm 1    |  at org.jboss.netty.channel.Channels.fireChannelOpen(Channels.java:170)
jvm 1    |  at org.jboss.netty.channel.socket.nio.NioServerSocketChannel.<init>(NioServerSocketChannel.java:77)
jvm 1    |  at org.jboss.netty.channel.socket.nio.NioServerSocketChannelFactory.newChannel(NioServerSocketChannelFactory.java:137)
jvm 1    |  at org.jboss.netty.channel.socket.nio.NioServerSocketChannelFactory.newChannel(NioServerSocketChannelFactory.java:85)
jvm 1    |  at org.jboss.netty.bootstrap.ServerBootstrap.bind(ServerBootstrap.java:277)
jvm 1    |  ... 32 more
wrapper  | <-- Wrapper Stopped
thufir@dur:~/apache-james-3.0-beta4$ 
```

配置文件（不适合）：

[https://gist.github.com/3368324](https://gist.github.com/3368324)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T06:44:11.317

> 大多数 UNIX 系统需要超级用户权限才能打开低于 1024 的套接字，其中包括 IANA 标准 SMTP（在端口 25 上）、POP3（在端口 110 上）和 IMAP4（在端口 143 上）。这些默认端口可以在 conf 文件中更改（读取 pop3、smtp 和 imap4。显然，您需要重新配置客户端。如果您想从外部邮件服务器接收邮件，这可能不是一个选项。

此文本来自[此处](http://james.apache.org/server/3/install.html)的 james 安装指南。您是否尝试以 root 用户身份运行 james 以尝试绑定到端口 25？试试这个：`sudo ./james start`。如果这似乎不起作用，您可以在各自的配置文件中更改各自服务的端口：**smtpserver.conf 用于 smtp**，您可能会感兴趣，因为您正在尝试使用 smtp 服务器。

**[编辑]：**您可以在任何标准文本编辑器中打开配置文件，**例如 nano、vi、emacs、gedit 等...**

**[编辑#2]：**你有运行 james 所需的正确 java 实现吗？从安装指南：

> James 需要 Java 运行时环境。运行 James 应用程序需要 Java 版本 1.5 或更高版本。可用的确切 JRE 取决于平台。此外，在运行 James 之前，应该将环境变量 JAVA_HOME 设置为 JRE 主目录。
> 
> 如果您运行 JDK7，由于 JAXB 中的错误，James 将无法启动。作为临时解决方法，您可以从[http://jaxb.java.net/2.1.13/JAXB2_20100510.jar](http://jaxb.java.net/2.1.13/JAXB2_20100510.jar)下载最新的 2.1 版本的 JAXB，然后将提取的 jaxb-impl.jar 复制到 conf/lib 中。
> 
> James 3.0 已在 OpenJDK、Sun JDK 和 IBM JDK 上成功测试

如果我是你，我会选择下载 OpenJDK 1.6 版并看看它的去向。作为旁注，您是否尝试过使用`./james help`，看看那里是否有任何帮助？此外，请尝试附加 james 可能在您的问题中产生的任何日志文件，以帮助我们进一步检查问题。

# sql-server - 将 SQL Server 列限制为可能值的列表

> ID：11981868
> 
> 赞同：45
> 
> 时间：2012-08-16T06:36:28.940
> 
> 标签：sql-server, database, constraints

如何对列施加约束，使其只能包含以下值？你怎么称呼这种类型的约束？

```
Allowed values: "yes", "no" or "maybe"
Column Data Type: nvarchar(5)
DBMS: SQL Server 2008 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-16T06:38:15.680

您可以使用**CHECK**约束

```
ALTER TABLE <table>
ADD CONSTRAINT chk_val CHECK (col in ('yes','no','maybe')) 
```

[MSDN 链接](http://msdn.microsoft.com/en-us/library/ms188258%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-11-20T09:34:29.110

是的，检查一个约束是你需要的。您可以在表声明中声明检查约束：

```
CREATE TABLE test(
    _id BIGINT PRIMARY KEY NOT NULL,
    decision NVARCHAR(5),
    CHECK (decision in ('yes','no','maybe'))
); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T06:39:53.697

使用枚举表是一种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-20T04:19:57.370

2021 年，我想知道我们是否可以用另一种方式来做到这一点（与检查约束相比，不一定是更好的方式）。

对于只允许“yes”、“no”或“maybe”值的列，也许我们可以有一个位类型的列，然后在它旁边有一个计算列

```
Create Table xxx (
ColumnName bit null,
ColumnNameDerived varchar(10) as 
    case ColumnName
        when 0 then 'no'
        when 1 then 'yes'
        else 'maybe'
    end
) 
```

对于具有更多可能值的列，可以选择 tinyint 类型，然后使用“<= 10”之类的检查约束。假设一列有 10 个可能的值，那么约束“< 10”就可以了。

所以约束不会太长而无法阅读，并且您立即知道有多少可能的值。这也有助于节省存储空间。

# iphone - CABasicAnimation 保持匀速

> ID：11981875
> 
> 赞同：1
> 
> 时间：2012-08-16T06:36:59.720
> 
> 标签：iphone, objective-c, ios, ipad, uilabel

我正在尝试使用 CABasicAnimation 创建一个简单的动画，该动画将始终保持恒定速度，即使动画必须行进的距离永远不会相同。到目前为止，这是我的代码，它正在滚动一个大小总是不同的标签，但还不能保持恒定的速度。非常感谢您的帮助。

```
CABasicAnimation *theAnimation;
theAnimation = [CABasicAnimation animationWithKeyPath:@"transform.translation.x"];
theAnimation.speed = 1.0f;

NSNumber *fromValue = [NSNumber numberWithFloat:self.mainLabel.frame.origin.x];
NSNumber *toValue = [NSNumber numberWithFloat:-self.mainLabel.frame.size.width - self.view.frame.size.height];
theAnimation.fromValue = fromValue;
theAnimation.toValue = toValue;
//theAnimation.duration = toValue.floatValue - fromValue.floatValue;//Not right.
theAnimation.repeatCount = 999;
theAnimation.autoreverses = NO;
[mainLabel.layer addAnimation:theAnimation forKey:@"animateLayer"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:45:51.347

您是否尝试添加：

```
 theAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear]; 
```

例如之后

```
 theAnimation.speed = 1.0f; 
```

?

此功能设置动画的线性速度。

# powershell - 运行 w32tm 并将结果分配给变量会给出不同的输出

> ID：11981879
> 
> 赞同：0
> 
> 时间：2012-08-16T06:37:16.163
> 
> 标签：powershell, time, batch-file, formatting, cmd

我正在尝试按照[此处的帖子](https://stackoverflow.com/a/9802637/1142106)解析 w32tm 的输出并将项目排列在易于阅读的数据表中。我注意到我在不同的列中得到了无序、错误放置的结果。

在测试中，如果我输入：

```
w32tm /monitor /domain:mydomain.com.au /Threads:5 
```

我得到正确排序和格式化的每台服务器，它的 NTP 偏移量和 ICMP 延迟显示完美，如下所示：

```
kesvm001.mydomain.com.au[xxx.xxx.xxx.x:xxx]:
    ICMP: 37ms delay
    NTP: -0.0446479s offset from VM021.mydomain.com.au
        RefID: VM021.mydomain.com.au [xxx.xxx.xx.xxx]
        Stratum: 4
VM033.mydomain.com.au[xxx.xxx.xxx.xx:xxx]:
    ICMP: 50ms delay
    NTP: -0.0640493s offset from VM021.mydomain.com.au
        RefID: 80.84.77.86.rev.sfr.net [xx.xx.xx.xx]
        Stratum: 2 
```

如果我这样做：

```
$output = & w32tm /monitor /domain:mydomain.com.au /Threads:5
$output 
```

我可以解释它的唯一方法是它似乎也输出所有详细信息......

```
Getting AD DC list for mydomain.com.au
Analyzing:Analyzing:Analyzing:Analyzing:Analyzing:Analyzing:Analyzing:Analyzing:Analyzing:Analyzing:Analyzing:Analyzing:Analyzing:Analyzing:Analyzing:Analyzing:Analyzing:Analyzing:delayoffset from VM021.mydomain.com.au
Stratum: 4

  1  2 -- (0 of 48)
 11 12  3 (9 of 48)
 16 13 17 (14 of 48)
 21 18 20 (18 of 48)
 26 18 27 (24 of 48)
 26 18 28 (25 of 48)
 26 18 30 (27 of 48)
 26 18 31 (28 of 48)
 26 18 32 (29 of 48)
 26 18 32 (29 of 48)
 33 34 32 (31 of 48)
 39 40 41 (38 of 48)
 42 46 41 (43 of 48)
 42 -- 41 (46 of 48)
 -- -- 41 (47 of 48)
 -- -- 41 (47 of 48)
 -- -- 41 (47 of 48)
 -- -- 41 (47 of 48)

kesvm001.mydomain.com.au[xxx.xxx.xxx.xxx:xxx]:
    ICMP: 37ms 
    NTP: -0.1127470s         RefID: VM021.mydomain.com.au [192.168.48.150]
        VM033.mydomain.com.au[xxx.xxx.xxdelayoffset from VM021.mydomain.com.au
Stratum: 2
delayoffset from VM021.mydomain.com.au
Stratum: 4
delayoffset from VM021.mydomain.com.au
Stratum: 3
delayoffset from VM021.mydomain.com.au
Stratum: 4
delayoffset from VM021.mydomain.com.au
Stratum: 4
delayoffset from VM021.mydomain.com.au
Stratum: 4
delayoffset from VM021.mydomain.com.au
Stratum: 4
delayoffset from VM021.mydomain.com.au 
```

我认为这可能与使用多个线程有关，但即使将 Threads 更改为 1 也没有什么区别。这里到底发生了什么？我所做的一切（我想）就是获取通常出现在屏幕上的任何输出，并将其放在一个变量中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:33:13.883

它实际上做了它应该做的事情。它吸收了所有的输出。如果您将在 cmd 控制台中运行它，您会注意到在显示结果之前它实际上会打印出一些进度信息。在 PowerShell 中，它可以捕获所有内容。如果你想过滤掉一些东西，你可以这样做：

```
$output = & w32tm /monitor /domain:mydomain.com /threads:5
$output | Where-Object{!$_.StartsWith("Analyzing") -and !$_.StartsWith("           ") -and !$_.Contains(" of ") -and !$_.StartsWith("Stratum") -and !$_.StartsWith("delayoffset")} 
```

# sql-server - 将字符串中的算术公式转换为值

> ID：11981883
> 
> 赞同：3
> 
> 时间：2012-08-16T06:37:31.687
> 
> 标签：sql-server, tsql

我有一个表格，其中所有条目都采用算术公式（即`1+2+3`等）的形式。

在此表中，所有列的类型均为`varchar`。该表有很多这样的列。

我想计算公式并将值插入另一个。关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:07:42.977

你可以试试这个。我希望这可以帮助你。它从 t1 获取表达式并将结果放入 t2。您不想将 t1 设为实际表，因为它会从表中删除，因此您可以将实际表值复制到临时表中

```
declare @t as table(val varchar(20))
declare @t2 as table(val varchar(20))
insert into @t values
('1+3'),
('2*3'),
('9+3*2')

declare @exp varchar(20)
while(exists(select 1 from @t))
begin
    select top(1) @exp = val from @t

    insert into @t2
    exec ('select '+@exp)  

    delete top (1) from @t
end

select * from @t2 
```

结果

```
val
------
4
6
15 
```

您可以查看这些链接[类似的问题here](http://www.sqlservercentral.com/Forums/Topic1171708-338-1.aspx)和[Convert string with expression to decimal](https://stackoverflow.com/questions/10277884/convert-string-with-expression-to-decimal/10278603#10278603)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:30:40.373

按照链接 - [将带有表达式的字符串转换为十进制](https://stackoverflow.com/questions/10277884/convert-string-with-expression-to-decimal/10278603#10278603)

创建函数 DBO.EVAL 后，只需运行：-

```
select dbo.eval(column_name) from table_name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-05T15:45:18.920

您可以声明两个表变量：

*   `@tabformula`其中将存储公式
*   `@tabresult`将在其中存储结果

有一个 ID 列将用于连接这两个表。

用所需的公式填充第一个表后，声明一个游标，然后执行`formula`并将结果存储到`@tabresult`表中。

```
declare @tabformula as table (id int identity(1,1), formula
varchar(200)) declare @tabresult as table (id int, result int)

insert into @tabformula(formula) values('1+4+6+7') ;
insert into @tabformula(formula) values('10+4+60+7'); 
insert into @tabformula(formula) values('1+4+6+70') ;
insert into @tabformula(formula) values('1+44+65+7');

declare c cursor for select ID,formula from @tabformula declare @id as
int declare @formula as varchar(200)

open c fetch c into @id,@formula while @@fetch_status=0 begin print
@formula insert into @tabresult (id,result) exec( 'select '+ @id +
','+@formula ) fetch c into @id,@formula end close c deallocate c
select T1.id,t1.formula,T2.result from @tabformula t1 inner join
@tabresult t2 on t1.id=t2.id 
```

# javascript - 用于输入字段值之间交互的 javascript 或 jQuery 函数

> ID：11981884
> 
> 赞同：0
> 
> 时间：2012-08-16T06:37:45.643
> 
> 标签：javascript, jquery, forms

我有一个 html 表单，人们可以在其中输入购买项目的数量。该文本字段的默认值为 1。

```
<input type="text" size="5" value="1" id="position" class="amntstyle" name="position"> 
```

我想要另一个价格文本输入字段，其值将自动为位置的 15 倍。

例如，如果有人在仓位字段中输入 3，价格输入字段将自动得到值 45。像这样

```
<input type="text" size="5" value="45" id="price" class="amntstyle" name="price"> 
```

可能吗？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:46:12.880

这是YUI3版本：

 `````
<script src="http://yui.yahooapis.com/3.6.0/build/yui/yui-min.js"></script>
<script>
    YUI().use("node", function(Y) {
        var priceNode = Y.one("#price");
        var positionNode = Y.one("#position");
        positionNode.on("change", function(e) {
             priceNode.set("value", positionNode.get("value")*15);
        });
    });
</script> 
````  `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T12:17:44.973

如果您使用的是 jquery，那么通过使用插件 formInteract，您只需要这样做。

```
<input type="text" size="5" value="1" id="position" class="amntstyle" name="position"> 

<input type="text" size="5" value="45" id="price" class="amntstyle" name="price" data-bind-change-value="#position*15"> 
```

在页面底部只包含这个插件文件，其他一切都将自行完成。

这是项目的链接 [https://bitbucket.org/ranjeet1985/forminteract](https://bitbucket.org/ranjeet1985/forminteract)

您可以将此插件用于多种用途，例如获取表单的价值、将价值放入表单、验证表单等等。您可以在项目的 index.html 文件中看到一些代码示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T06:41:41.367

简单..使用`javascript`功能和`onkeyup`

```
<script type="text/javascript">
    function updatePrice(amount, element){
       var amount = parseInt(amount);
       if(!amount) amount = 0;
       var toUpdate = amount*15;
       document.getElementById(element).value = toUpdate;
    }
</script>

<input type="text" size="5" value="1" id="position"  class="amntstyle" name="position"  onkeyup="updatePrice(this.value,'price');">
<input type="text" size="5" value="45" id="price" class="amntstyle" name="price"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T06:42:22.320

**工作演示**：http: [//jsfiddle.net/YgheP/](http://jsfiddle.net/YgheP/)

为特定场景制作，但您可以根据需要对其进行调整。

希望它能满足你的事业。`:)`

还要寻找`isNaN`检查和浮动值！`parseFloat(string)`

**代码**

```
$('#position').keyup(function() {
    var price = parseInt(this.value) * 15;

    $('#price').prop('value', price);
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T06:42:37.460

您可以使用此代码附加一个事件处理程序来解决您的问题：

```
$("#position").bind("change", function(){
   $("#price").val(parseInt($("#position").val()) * 15);
}); 
```

希望有帮助``

# mysql - MySQL中的动态交叉表

> ID：11981891
> 
> 赞同：1
> 
> 时间：2012-08-16T06:38:15.077
> 
> 标签：mysql, sql

我有下表包含以下数据

```
年份 | 年龄组 | 男 | 女性
2000 | 0 - 25 | 50 | 100
2000 | 26 以上 | 40 | 75
2001 | 0 - 25 | 150 | 86
2001 | 26 以上 | 65 | 83

```

我想创建以下格式的交叉表

```
                | 男 | 女性
2000 | 90 | 175
       0 - 25 | 50 | 100
       26 以上 | 40 | 75
2001 | 215 | 169
       0 - 25 | 150 | 86
       26 以上 | 65 | 83

```

我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T07:45:04.077

[SQLFiddle 示例](http://sqlfiddle.com/#!2/4acd8/3)：

```
select * from
(
select year,ageGroup,male,female from t
union all
select year,'' ageGroup,sum(male) male,sum(female) female 
from t group by year
) st
order by year,agegroup 
```

# wpf - 为什么我的 Windows 8 WPF 单选按钮完全不正常？

> ID：11981893
> 
> 赞同：18
> 
> 时间：2012-08-16T06:38:19.690
> 
> 标签：wpf, windows-8

在带有 VS2012 RTM 的 Windows 8 RTM 中，我注意到我的 WPF 应用程序给了我变形的单选按钮，所以我决定创建一个示例来看看我是否做错了什么。

这是整个 XAML 应用程序：

```
<Window x:Class="WpfApplication1.MainWindow" 
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" SizeToContent="WidthAndHeight">
    <Grid>
        <StackPanel Margin="20">
            <RadioButton Content="Option 1" GroupName="1"/>
            <RadioButton Content="Option 2" GroupName="2"/>
            <RadioButton Content="Option 3" GroupName="3"/>
        </StackPanel>
    </Grid>
</Window> 
```

在这里，我将 DPI 设置设置为 100%，这实际上不是 Windows 8 中的默认设置（至少对于我的[1920x1200](http://www.neowin.net/forum/topic/1096301-windows-8-rtm-is-everything-made-bigger/)屏幕来说不是）。你会看到单选按钮是完美的。

![在此处输入图像描述](../Images/f6ce2583b6e07629fb00dc73a2a6b998.png)

这是相同的应用程序，其 DPI 设置为 125%，这是我的屏幕分辨率的默认 DPI。

![在此处输入图像描述](../Images/7a37ca4a903692862a61fc0c1fb52c1c.png)

这里是 150%

![在此处输入图像描述](../Images/b82e6cc44370204028731baccca82d9a.png)

您可以看到内圈不在外圈内居中，看起来很糟糕。带有单选按钮的系统应用程序很好 - 但我的 WPF 4.5 应用程序不是。再一次，这个示例应用程序是 100% RTM 位，并且在 Win 8 下从头开始。

它只是全部坏了还是有办法解决这个问题（除了坚持人们把 100% DPI 缩放）。

真的希望 Win8 能在高分辨率屏幕和像这样的缩放问题上大有帮助，但是一些简单的东西开箱即用:-(

* * *

编辑：提交连接错误[https://connect.microsoft.com/VisualStudio/feedback/details/758368/radio-button-rendering-is-incorrect-on-windows-8-with-125-dpi-scaling-set](https://connect.microsoft.com/VisualStudio/feedback/details/758368/radio-button-rendering-is-incorrect-on-windows-8-with-125-dpi-scaling-set)

编辑：2012 年 8 月 29 日：

> WPF 团队最近审查了此问题，并且不会解决此问题，因为此时团队正在关注影响最多 WPF 开发人员的错误。如果您认为这是错误解决的，请使用任何必要的支持详细信息重新激活此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:06:42.263

WPF 中的所有内容都是样式化的。在默认系统样式的情况下，根据我自己的经验，它们有时会遇到这样的小问题。一个简单的修复，确认它是样式而不是操作系统本身是自己重新设置控件的样式，看看是否可以修复它。

您可以通过查看[此](https://stackoverflow.com/questions/9068830/how-where-to-find-microsoft-default-styles-for-wpf-controls)问题找到原始样式。这些将帮助您重建和/或解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:52:20.793

您可以尝试将堆栈面板放在视图框中..也许

# iis - 将所有请求重定向到 IIS 中的路径

> ID：11981896
> 
> 赞同：0
> 
> 时间：2012-08-16T06:38:42.303
> 
> 标签：iis, iis-6

IIS 6.0 中有没有办法将所有请求重定向到特定路径？

例如，对 /site/subfolder/ 或其下的任何资源（无论是否真实）的任何请求都将根据其满足此标准的事实进行重定向：

```
http://site/subfolder/* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:46:27.967

是的。您需要一个 ISAPI URL 重写器模块。在 IIS6 上有几个可供选择；

[IIS 6 - URL 重写模块](https://stackoverflow.com/questions/7717822/iis-6-url-rewrite-module)

# bdd - jbehave点击链接内

> ID：11981898
> 
> 赞同：0
> 
> 时间：2012-08-16T06:38:53.510
> 
> 标签：bdd, jbehave

jbehave中是否有类似[click_link_within](http://rdoc.info/github/brynary/webrat/master/Webrat/Session#click_link_within-instance_method)的功能？

我想要一种简单的方法来单击页面上某个区域内的文本选择的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:14:44.137

JBehave 是一个基于 BDD 语法驱动测试的框架，可促进与利益相关者的沟通。它可以转化为任何形式的动作，适用于任何类型的应用程序，但这必须通过将 JBehave 与底层技术框架集成来完成。

所以答案是否定的，不是自动的。是的，您可以完全自由地与您选择的任何技术框架集成。

通过克隆 git repo 或阅读 jbehave.org 上的更多文档来研究示例。

# android - 删除处理程序的回调不起作用

> ID：11981899
> 
> 赞同：2
> 
> 时间：2012-08-16T06:38:54.883
> 
> 标签：android, handler

我编写了一个处理程序，它在每个时间间隔调用该方法。我想在 destroy() 中删除该处理程序。我使用的代码如下，在 Oncreate()

```
private final Handler _handler = new Handler();
public int DATA_INTERVAL = 30 * 1000;
Runnable getData;
 getData = new Runnable()
        {
            @Override
            public void run()
            {
                     recieveData();
            }
        };

 _handler.postDelayed(getData, DATA_INTERVAL); 
```

在 ondestroy() 中，我使用，

```
_handler.removeCallbacks(getData); 
```

但是 removecallbacks 不起作用。它在退出活动后调用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T06:49:41.687

[removeCallbacks(Runnable r)](http://developer.android.com/reference/android/os/Handler.html)：

> 删除消息队列中所有待处理的 Runnable r 帖子。

因此`removeCallbacks(..)`仅停止当前未运行的未决消息（Runnables），因此如果您想停止当前正在运行的 Runable，则在用户退出应用程序时使用布尔变量来停止线程。

请参阅此帖子以了解[removeCallbacks 不会停止可运行](https://stackoverflow.com/questions/5844308/removecallbacks-not-stopping-runnable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-15T16:27:31.917

您没有显示代码中最重要的部分，即`receiveData`方法。正如您所说，您正在定期运行任务，您必须`postDelayed`从该方法内部再次调用以重新安排任务。可能涉及后台线程，因为您无法在主线程上进行联网。

退出 Activity 时，您很可能会遇到竞态条件。`onDestroy`首先运行，然后再次发布任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-08T06:53:10.807

你应该使用

```
handler.removeCallbacksAndMessages(null); 
```

然后将删除所有处理程序回调。

# java - 骆驼：我如何异步发送到端点

> ID：11981900
> 
> 赞同：6
> 
> 时间：2012-08-16T06:38:55.783
> 
> 标签：java, apache-camel

如何在不等待该端点的路由被处理的情况下向端点发送消息（也就是说，我的路由应该只是发送消息并完成）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-22T02:43:38.377

使用wireTap 或多播是您所追求的。无论指定什么 ExchangePattern，direct: 端点都会为下一步修改 Exchange。您可以通过使用此失败测试来查看：

```
public class StackOverflowTest extends CamelTestSupport {
    private static final String DIRECT_INPUT = "direct:input";
    private static final String DIRECT_NO_RETURN = "direct:no.return";
    private static final String MOCK_OUTPUT = "mock:output";
    private static final String FIRST_STRING = "FIRST";
    private static final String SECOND_STRING = "SECOND";

    @NotNull
    @Override
    protected RouteBuilder createRouteBuilder() throws Exception {
        return new RouteBuilder() {
            @Override
            public void configure() throws Exception {
                from(DIRECT_INPUT)
                        .to(ExchangePattern.InOnly, DIRECT_NO_RETURN)
                        .to(MOCK_OUTPUT)
                        .end();

                from(DIRECT_NO_RETURN)
                        .bean(new CreateNewString())
                        .end();
            }
        };
    }

    @Test
    public void testShouldNotModifyMessage() throws JsonProcessingException, InterruptedException {
        final MockEndpoint myMockEndpoint = getMockEndpoint(MOCK_OUTPUT);
        myMockEndpoint.expectedBodiesReceived(FIRST_STRING);
        template.sendBody(DIRECT_INPUT, FIRST_STRING);
        assertMockEndpointsSatisfied();
    }

    public static class CreateNewString {
        @NotNull
        public String handle(@NotNull Object anObject) {
            return SECOND_STRING;
        }
    }
} 
```

现在，如果您将上述内容更改为wireTap：

```
 from(DIRECT_INPUT)
                    .wireTap(DIRECT_NO_RETURN)
                    .to(MOCK_OUTPUT)
                    .end(); 
```

你会看到它按预期工作。您还可以使用多播：

```
 from(DIRECT_INPUT)
                    .multicast()
                    .to(DIRECT_NO_RETURN)
                    .to(MOCK_OUTPUT)
                    .end(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T08:31:48.960

`wireTap(endpoint)`是答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T12:50:12.873

您可以在路由中使用 inOnly 仅将消息发送到端点而不等待响应。有关更多详细信息，请参阅[请求回复文档](http://camel.apache.org/request-reply.html)或[事件消息文档](http://camel.apache.org/event-message.html)

```
from("direct:testInOnly").inOnly("mock:result"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T11:45:39.383

这可能取决于您使用的端点等，但一种常见的方法是在两者之间放置一个 seda 端点是一种选择。

```
from("foo:bar")
  .bean(processingBean)
  .to("seda:asyncProcess") // Async send
  .bean(moreProcessingBean)

from("seda:asyncProcess")
  .to("final:endpoint"); // could be some syncrhonous endpoint that takes time to send to. http://server/heavyProcessingService or what not. 
```

seda 端点的行为类似于队列，先进先出。如果您将多个事件发送到 seda 端点的速度快于路由完成处理它们的速度，它们将堆积起来等待处理，这是一个很好的行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T04:30:43.233

您可以使用[ProducerTemplate](http://camel.apache.org/producertemplate.html)的 asyncSend() 方法将 InOnly 消息发送到端点...

```
template.asyncSend("direct:myInOnlyEndpoint","myMessage"); 
```

有关更多详细信息，请参见[http://camel.apache.org/async.html](http://camel.apache.org/async.html)

# security - “同源政策”能给我们带来什么？

> ID：11981904
> 
> 赞同：3
> 
> 时间：2012-08-16T06:39:07.957
> 
> 标签：security, browser, same-origin-policy

同源策略（SOP）经常与跨站脚本（XSS）一起被提及。但似乎在有 SOP 的世界里，XSS 仍然时有发生。所以我一直不清楚同源策略到底能防止什么样的攻击？换句话说，想象一个没有 SOP 的世界，与有 SOP 的现实世界相比，恶意攻击者可以获得什么其他权力？

我在这个网站（http://security.stackexchange.com/questions/8264/why-is-the-same-origin-policy-so-important）上读到“假设您已登录 Facebook 并在另一个浏览器选项卡。如果没有相同的源策略，该网站上的 JavaScript 可以对您的 Facebook 帐户执行您被允许执行的任何操作。”。这实际上让我更加困惑，因为我从未听说过一个选项卡中的网页有任何机制来操纵其他选项卡，即使来自同一个域也是如此。这里 (http://javascript.info/tutorial/same-origin-security-policy) 还提到（更明确地）SOP 阻止脚本在一个窗口中操作另一个窗口中的 DOM 元素。但我真的无法将示例与所解释的内容联系起来（window 在这里是什么意思？似乎该示例正在谈论 iframe）。

总而言之，谁能给出一些具体的例子来说明如果没有 SOP 会发生什么？

另外，我很好奇一个窗口中的脚本如何在另一个窗口中操作 DOM 元素，假设这两个窗口来自同一个域。但这不是这个问题的主要课程

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:05:45.673

> 我从未听说过在一个选项卡中操作其他选项卡的网页的任何机制 [...] 似乎该示例正在谈论 iframe

`iframe`是获取跨窗口脚本的最简单但不是唯一的方法。另一种方法是让攻击者页面从一个新选项卡进入`window.open`一个文档。`facebook.com`因为`open`返回选项卡`window`对象的句柄，所以一个选项卡中的脚本可以与另一个选项卡中的内容进行交互。

如果没有 SOP，该脚本可以代表您填写并提交该选项卡中的表格。

> XSS 仍然不时发生。所以我一直不清楚同源策略到底能防止什么样的攻击？

没有 SOP，每个网页都容易受到 XSS 的攻击，没有人是安全的。

*使用 SOP，除非*作者犯了错误，否则网页对 XSS 是安全的。XSS 仍然不时发生，因为不幸的是，网站作者确实犯了错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:52:51.910

一个例子：对于恶意网页，可能会向用户已经在用户上下文中登录的其他网页发出一些 javascript ajax 请求。此其他页面将假定请求来自授权用户。例如，如果只有用户登录到 Facebook 或他的银行，malicius 脚本可以对 Facebook 进行一些 ajax 调用并发布新状态或银行交易服务并进行转账。人们通常会同时在浏览器选项卡中打开多个页面，因此浏览恶意网页的人很可能同时登录到某些可能被黑客入侵的敏感服务。

# python - 通过 pythonbrew 安装包

> ID：11981906
> 
> 赞同：2
> 
> 时间：2012-08-16T06:39:28.047
> 
> 标签：python, package

我用 python brew 安装了 python 2.7。如何安装软件包以使用它？我用突触安装了 MySQLdb，但我无法在 python 2.7 中导入它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T21:30:18.000

切换到 2.7：

```
pythonbrew switch 2.7 
```

卷曲并运行 get-pip 以获得 2.7 的正确 pip 版本：

```
curl -O https://raw.github.com/pypa/pip/master/contrib/get-pip.py
python get-pip.py 
```

这将安装 2.7 的 pip 版本。通过执行以下操作进行检查：

```
pip --version 
```

关闭pythonbrew：

```
pythonbrew off 
```

再次检查 pip 的版本，它应该使用默认 Python 的版本：

```
pip --version 
```

如果一切正常，则在 pythonbrew 中切换回 2.7 并为 2.7 安装 mysql-python：

```
pythonbrew switch 2.7
pip install mysql-python 
```

检查它是否为 2.7 安装：

```
pip freeze 
```

Pip freeze 将为您提供当前活动版本 Python 的所有已安装库的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:46:34.660

您应该尝试安装 pip，这是一个递归首字母缩略词：Pip Installs Packages。这个线程讨论了在[windows](https://stackoverflow.com/questions/4750806/how-to-install-pip-on-windows)上安装它，在 Ubuntu 上我做了`sudo apt get install pip.`

好的，你的问题是“mysqldb”不是python包。您需要使用 MySQLdb 作为后端，或者只需安装 sqlite3 并将*其*导入Python，这是一个模仿 SQL 的模块。如果你最终使用了一个真正的完整数据库，比如`MySQLdb`or `PostgreSQL`，你可能需要安装`SQLAlchemy`，这是一个 Python 模块来与它们交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:32:41.077

您需要为每个 Python 版本安装一个 pip 版本。你有简单的安装可用吗？如果是这样，你可以这样做

```
easy_install-2.7 pip 
```

您通过 home brew 安装 Python 是否有特定原因？你知道 Ubuntu 有一个包。

```
sudo apt-get install python2.7 
```

会给你一个已经很好设置的 Python 版本。

我也相信您应该尝试安装名为 mysql-python 的 Python 包。

```
pip install mysql-python 
```

MySQLDB 不是 Python 包。这是实际的数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-21T14:32:47.093

同意@leta-rogers。但是，我不必单独安装 pip。使用 pythonbrew 安装 python 也为我安装了 pip（对于 python 2.7）：

```
pythonbrew install 2.7
pythonbrew switch 2.7
pip install mysql-python 
```

# python - Python：发送电子邮件时，总是在子句中被阻止：smtpserver = smtplib.SMTP("smtp.gmail.com",587)

> ID：11981907
> 
> 赞同：4
> 
> 时间：2012-08-16T06:39:39.393
> 
> 标签：python, email, smtp, gmail

我正在编写一个 Python 程序来发送电子邮件。但是每次执行子句时：

```
smtpserver = smtplib.SMTP("smtp.gmail.com",587) 
```

它将在这里阻塞并始终保持执行状态，没有任何提示和错误。我不知道为什么。任何人都可以帮助我吗？

代码如下： import smtplib

```
to = 'toemail@gmail.com'
gmail_user = 'user@gmail.com'
gmail_pwd = 'password'
smtpserver = smtplib.SMTP("smtp.gmail.com",587)
smtpserver.ehlo()
smtpserver.starttls()
smtpserver.ehlo
smtpserver.login(gmail_user, gmail_pwd)
header = 'To:' + to + '\n' + 'From: ' + gmail_user + '\n' + 'Subject:testing \n'
print header
msg = header + '\n this is test msg from mkyong.com \n\n'
smtpserver.sendmail(gmail_user, to, msg)
print 'done!'
smtpserver.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T06:48:24.107

连接可能存在一些问题（可能它被您的代理或防火墙阻止？）并且超时可能非常大，您看不到它进一步发展。

[的文档`smtplib.SMTP`](http://docs.python.org/library/smtplib.html#smtplib.SMTP)说：

> `class smtplib.SMTP([host[, port[, local_hostname[, timeout]]]])`
> 
> (...)如果指定的响应不正确，`SMTPConnectError`则会引发An。`host`可选`timeout`参数指定连接尝试等阻塞操作的超时时间（如果未指定，将使用全局默认超时设置）。

尝试自己指定超时：

```
smtpserver = smtplib.SMTP("smtp.gmail.com", 587, timeout=30) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-15T17:11:22.433

也许我迟到了 4 年，但这对我有用，可能会帮助别人！

```
server = smtplib.SMTP("smtp.gmail.com", 587, None, 30) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-18T07:18:31.033

作为参考，cpython smtplib 正在阻塞。也就是说，它在连接时会阻塞 GIL（即 Python）。尽管声称 GIL 在 I/O 上发布，但它仅在某些 I/O 上发布，而 SMTP 连接并非如此。要使其异步，您需要将邮件发送到另一个进程或线程，具体取决于您的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-14T11:21:48.250

我遇到了类似的问题，上面的答案都不适合我。我的问题是因为我的 smtp 服务器使用 SSL。我需要使用`smtplib.SMTP_SSL` 而不是`smtplib.SMTP`. 我只是在下面发布我的完整工作代码。确保在执行之前更改`req`和的值。`email_config`

```
 req = {
        "email": "to@something.com",
        "subject": "new e-mail from python",
        "body": "Hi,\nI am a bot",
    }

    email_config = {
        "server": "smtp.orange.fr",
        "port": 465,
        "username": "username@orange.fr",
        "password": "mypassword",
        "email": "fromwhichemail@orange.fr",
    } 
```

```
 #!/usr/bin/env python3
import smtplib

from email import encoders
from email.mime.base import MIMEBase
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText

class Mail(object):
    def __init__(self, email_config):
        self.email = email_config["email"]
        self.password = email_config["password"]
        self.server = email_config["server"]
        self.port = email_config["port"]
        print(f"Logging to {self.server}:{self.port}")
        session = smtplib.SMTP_SSL(self.server, self.port)
        print(f"Calling ehlo")
        session.ehlo()
        print(f"Calling login")
        session.login(self.email, self.password)
        self.session = session

    def send_message(self, subject, to, body, filename):
        # Create a multipart message and set headers
        message = MIMEMultipart()
        message["From"] = self.email
        message["To"] = to
        message["Subject"] = subject
        message["Bcc"] = ""
        # Add body to email
        message.attach(MIMEText(body, "plain"))
        print(f"tot: {to}")
        print(f"subject: {subject}")
        print(f"body: {body}")

        if filename is not None:
            # Open PDF file in binary mode
            with open(filename, "rb") as attachment:
                part = MIMEBase("application", "octet-stream")
                part.set_payload(attachment.read())
            # Encode file in ASCII characters to send by email
            encoders.encode_base64(part)
            # Add header as key/value pair to attachment part
            part.add_header(
                "Content-Disposition",
                f"attachment; filename= {filename}",)
            # Add attachment to message and convert message to string
            message.attach(part)

        # Send e-mail
        print(f"Sending e-mail...")
        self.session.sendmail(self.email, to, message.as_string())

if __name__ == "__main__":
    req = {
        "email": "to@something.com",
        "subject": "new e-mail from python",
        "body": "Hi,\nI am a bot",
    }

    email_config = {
        "server": "smtp.orange.fr",
        "port": 465,
        "username": "username@orange.fr",
        "password": "mypassword",
        "email": "fromwhichemail@orange.fr",
    }
    m = Mail(email_config)
    if "pdf_file" in req:
        m.send_message(req["subject"], req["email"], req["body"], req["pdf_file"])
    else:
        m.send_message(req["subject"], req["email"], req["body"], None) 
```

# ios - iOS 中基于地图的游戏的最佳 2D/3D 游戏引擎

> ID：11981913
> 
> 赞同：1
> 
> 时间：2012-08-16T06:40:05.710
> 
> 标签：ios, game-engine

我对 iOS 应用程序的游戏引擎不是很熟悉。谁能为我的游戏开发推荐一个开源游戏引擎？

我的游戏场景如下：用户选择了一张地图，我在游戏中的一个角色沿着地图中预定义的路径移动。

我正在考虑用 OpenGL 编写这个游戏，但似乎我必须编写大量代码。是否存在我可以成功编写此游戏的游戏引擎？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T07:15:05.663

Lua 比 Objective-C 更容易学习。有几种 Lua 开发环境：

吉德罗斯工作室：[http ://www.giderosmobile.com/](http://www.giderosmobile.com/)

Corona SDK： http: [//www.coronalabs.com/](http://www.coronalabs.com/)

摩艾： http: [//getmoai.com/](http://getmoai.com/)

我最喜欢的是 Gideros Studio，因为在我看来它是最容易上手的，并且在您想要删除启动屏幕之前是免费的，并且有一个非常友好的论坛，可以访问开发人员。您还可以包含本机插件（适用于 Android 的 Objective C 和 C++）。

Moai 是唯一真正开源的，如果你真的需要更改源，但它可能是最难学习的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T07:03:29.640

正如其他用户 cocos2d 所说，这将是您想要的一个很好的解决方案。尽管您要求“开源”，但您始终可以免费查看Unity **for** [iOS](http://unity3d.com/unity/publishing/ios)。您还可以查看我前段时间提出的问题，它可以为您提供一些选项的提示，请[点击此处](https://stackoverflow.com/questions/7669018/advantages-of-using-core-graphics)。来自[Unity 网站](http://unity3d.com/unity/licenses)：

> 哦，别忘了 Unity 是免费的，我们为 Unity Pro 和 Unity iOS Pro 提供了 30 天的全功能试用版！

我知道这并不完美，但是，如果你认为它值得，它可以对你的项目产生巨大的影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:31:24.457

试试[Stencyl](http://www.stencyl.com/)，它不是免费的，但它是一个不需要大量代码的好引擎

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T06:52:09.583

cocos2d 流行且易于使用和学习。您也可以使用 kobald2d，因为它还包括 cocos2d 和其他框架。你可以通过谷歌搜索下载它们

# amazon-ec2 - 如何修复在 pathToPartitionInfo 中找不到目录（从 EMR 上的 HIVE 表中选择/计数）

> ID：11981916
> 
> 赞同：3
> 
> 时间：2012-08-16T06:40:09.297
> 
> 标签：amazon-ec2, hive

我已经设置了一个交互式配置单元会话并将 apache weblog 日期直接从 s3 存储桶加载到表中：

```
 DROP TABLE apachelog;
CREATE EXTERNAL TABLE apachelog (
  host STRING,
  identity STRING,
  user STRING,
  time STRING,
  request STRING,
  status STRING,
  size STRING,
  referer STRING,
  agent STRING)
ROW FORMAT SERDE 'org.apache.hadoop.hive.contrib.serde2.RegexSerDe'
WITH SERDEPROPERTIES (
  "input.regex" = "([^ ]*) ([^ ]*) ([^ ]*) (-|\\[[^\\]]*\\]) ([^ \"]*|\"[^\"]*\") (-|[0-9]*) (-|[0-9]*)(?: ([^ \"]*|\"[^\"]*\") ([^ \"]*|\"[^\"]*\"))?",
  "output.format.string" = "%1$s %2$s %3$s %4$s %5$s %6$s %7$s %8$s %9$s"
)
STORED AS TEXTFILE
LOCATION 's3n://OperationOverkill/'; 
```

然后我可以像这样成功地从中选择：

```
SELECT * FROM apachelog LIMIT 5; 
```

但是计数（或任何需要实际 map-reduce 的东西都不会：

```
SELECT COUNT(host) FROM apachelog; 
```

错误信息：

```
Job Submission failed with exception 'java.io.IOException(cannot find dir = s3n: //OperationOverkill/access_clickkiller_12-08-08.log in pathToPartitionInfo: s3n ://OperationOverkill/)' 
```

我用谷歌搜索并[在 AWS Support 论坛上发现了一个类似的问题，](https://forums.aws.amazon.com/message.jspa?messageID=372670#372670) 但我希望从 SO 获得更快的指示/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-04T20:00:49.293

我遇到了同样的问题，但使用 s3 中的子目录修复了它。因此，我会尝试将您的文件放在“s3n://OperationOverkill/subdir/”之类的文件中并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-09T04:35:06.600

这似乎是一个错误，如果您不使用存储桶根，它可能适用于 S3，但我无法为 HDFS 工作（类似于 hdfs:///path/to/folder/）： [https://issues .apache.org/jira/browse/HIVE-7774](https://issues.apache.org/jira/browse/HIVE-7774)

由于 Hive 0.14 中修复了 bug，因此您需要使用高于该版本的版本。

在 AWS 的背景下，

如果您从此处遵循示例代码：http: [//docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/calling-emr-with-java-sdk.html](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/calling-emr-with-java-sdk.html) 您可能正在使用 Hive 0.13.*：请参阅： [http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/UsingEMR_SupportedHiveVersions.html](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/UsingEMR_SupportedHiveVersions.html)

您可以改为点击此链接，该链接显示了使用新 AMI 版本创建集群的新方法：http: [//docs.aws.amazon.com/ElasticMapReduce/latest/ReleaseGuide/emr-4.5.0/emr-release-differences.html #emr 发布标签](http://docs.aws.amazon.com/ElasticMapReduce/latest/ReleaseGuide/emr-4.5.0/emr-release-differences.html#emr-release-label)

对于“release-lable”4 或 5，您可以获得新的 Hive 版本，这应该可以解决问题，请参阅 EMR(AMI) 到 Hive 版本映射： [http ://docs.aws.amazon.com//ElasticMapReduce/最新/ReleaseGuide/emr-release-components.html](http://docs.aws.amazon.com//ElasticMapReduce/latest/ReleaseGuide/emr-release-components.html)

# sql - 在 SQL 中替换逗号分隔字符串中的空格

> ID：11981920
> 
> 赞同：2
> 
> 时间：2012-08-16T06:40:16.200
> 
> 标签：sql, sql-server-2008

朋友们，我需要一些帮助。
我在 SQL 中有一个逗号分隔的字符串，我想在其中替换逗号之间的空格。

我正在使用以下语句，但它没有按预期工作

```
REPLACE(replace(@code,' ,',','),', ',',') 
```

逗号前的空格被替换为逗号，但不是逗号后的空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T06:46:41.847

尝试这样做：

```
REPLACE(REPLACE(@code,' ,',','),', ',',') 
```

我建议这样做是因为替换语句区分大小写

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:36:41.620

尝试这个：

```
declare @code varchar(50)=', this ,is a ,    test, '
while(PATINDEX ('% ,%',@code)>0 or PATINDEX ('%, %',@code)>0 )
select @code=REPLACE(replace(@code,' ,',','),', ',',')
select @code 
```

# django - 将渲染的 Django 页面传递到 Wordpress 框架中

> ID：11981932
> 
> 赞同：0
> 
> 时间：2012-08-16T06:41:26.253
> 
> 标签：django, wordpress, templates

我有一个客户，他有一个已经完成的 wordpress 站点，他们想将 osqa.net 添加到该站点中。我是该项目的 Django 开发人员，但我的 wordpress 有点落后。

有没有办法将另一个 Web 应用程序的内容嵌入到 wordpress 页面的内容中？

我应该只用 iframe 做这个吗？我必须将参数从 wordpress url 传递到 iframe url。

**编辑：** 理想情况下，/questions 之后的 url 中的任何内容（如参数和路径）都将传递到 django 应用程序。django 应用程序会呈现一个响应，wordpress 会接受该响应并将其包含在它的页面中。有没有像这样已经存在的wordpress插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:46:20.583

你需要破解 OSQA 来隐藏无关的 HTML 并只返回你想要包含的部分。这似乎是为了最小的利益付出了很多努力。我会用一个`iframe`.

# python - Python urllib2：无法分配请求的地址

> ID：11981933
> 
> 赞同：1
> 
> 时间：2012-08-16T06:41:33.223
> 
> 标签：python, proxy, python-2.7, urllib2

我正在使用`urllib2`代理发送数千个请求。我在执行时收到了许多以下错误：

```
urlopen error [Errno 99] Cannot assign requested address 
```

[我在这里](https://stackoverflow.com/questions/1305050/python-socket-error-occured)读到这可能是由于套接字已经被绑定。是这样吗？对于如何解决这个问题，有任何的建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T07:32:32.857

这是我之前准备的类似问题的答案.... 更早... [重用套接字时出现 Socket in use 错误](https://stackoverflow.com/a/1436261/21945)

错误是不同的，但根本问题可能是相同的：您正在消耗所有可用端口并试图在 TIME_WAIT 状态结束之前重用它们。

**[编辑：回应评论]**

如果它在您的应用程序的能力/规格范围内，一个明显的策略是控制连接速率以避免这种情况。

或者，您可以使用该[`httplib`](http://docs.python.org/library/httplib.html#module-httplib)模块。`httplib.HTTPConnection()`让您指定一个`source_address`元组，您可以使用它指定建立连接的端口，例如，这将从 localhost:9999 连接到 localhost:1234：

```
import httplib
conn = httplib.HTTPConnection('localhost:1234', source_address=('localhost',9999))
conn.request('GET', '/index.html') 
```

然后是管理源端口分配的问题，如我之前的回答中所述。如果您使用的是 Windows，则可以使用此方法绕过端口 1024-5000 的默认范围。

（当然）你可以建立多少个连接是有上限的，什么样的应用程序需要快速连续建立数千个连接是值得怀疑的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-20T14:45:39.323

正如*mhawke*建议的那样，这个问题`TIME_WAIT`似乎最有可能。针对您的情况的系统范围修复可以是调整内核参数，以便更频繁地清理此类连接。两种选择：

```
$ sysctl net.ipv4.tcp_tw_recycle=1 
```

这将让内核重用处于`TIME_WAIT`状态的连接。这可能会导致 NAT 设置出现问题。另一个是：

```
$ sysctl net.ipv4.tcp_max_orphans=8192
$ sysctl net.ipv4.tcp_orphan_retries=1 
```

这告诉内核最多保持`8192`不附加到任何用户进程的连接，并且在终止 TCP 连接之前只重试一次。

请注意，这些不是永久性更改。添加设置以`/etc/sysctl.conf`使其永久化。

[http://code.google.com/p/lusca-cache/issues/detail?id=89#c4](http://code.google.com/p/lusca-cache/issues/detail?id=89#c4)
[http://tldp.org/HOWTO/Adv-Routing-HOWTO/lartc.kernel.obscure.html](http://tldp.org/HOWTO/Adv-Routing-HOWTO/lartc.kernel.obscure.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-09T15:07:31.417

我有一个类似的问题，但是使用 python 的请求库使用 POST 命令！更糟糕的是，我在每个执行程序上使用多处理来发布到服务器。因此，在几秒钟内创建了数千个连接，每个连接需要几秒钟才能从 TIME_WAIT 更改状态并为下一组连接释放端口。

在互联网上所有可用的解决方案中，通过使用 request.Session() 等来禁用keep-alive，我发现[这个](https://stackoverflow.com/a/15511852/7103409)答案是有效的，它使用 'Connection' : 'close' 配置作为标头参数. 不过，您可能需要将标题内容放在 post 命令之外的单独行中。

```
headers = {
        'Connection': 'close'
}
with requests.Session() as session:
response = session.post('https://xx.xxx.xxx.x/xxxxxx/x', headers=headers, files=files, verify=False)
results = response.json()
print results 
```

只需尝试使用请求库即可。

# php - 爆炸功能无法正常工作

> ID：11981934
> 
> 赞同：2
> 
> 时间：2012-08-16T06:41:39.233
> 
> 标签：php, file

```
$filename = 'itunes_report.txt';
$f = fopen($filename, 'r');
$db = array();
$dbSize = 0;

$var = file($filename);
$mydata = trim($var[1]);
$temp   = explode(" ", $mydata);
print_r($temp); 
```

我使用此代码从文件中读取数据。我从文本文件中取了第一行。这是行

```
APPLE US ebookReaderipad EC Media (International) Pvt. ltd BooksOnwink 1.3 1F 1 0 07/30/2012 08/05/2012 GBP GBP 425105344 0

```

我用空格分解这条线。然后输出中缺少一些空格。输出

```
数组 ( [0] => APPLE US ebookReaderipad EC [1] => 媒体 [2] => (国际) [3] => Pvt. [4] => ltd BooksOnwink 1.3 1F 1 0 07/30/2012 08/ 05/2012 GBP GBP 425105344 0 )

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T06:44:43.793

您的输入似乎是制表`\t`符分隔的，您可以拆分`"\t"`：

```
$temp = explode("\t", $mydata); 
```

或者，如果您真的想在每个空格上拆分，请尝试使用更灵活的正则表达式吐出：

```
$temp = preg_split('/\s+/', $mydata); 
```

这将分裂所有被认为是空白的东西并消耗空白序列。

# c# - 转换列表 列出 > 使用 Linq

> ID：11981936
> 
> 赞同：8
> 
> 时间：2012-08-16T06:41:40.280
> 
> 标签：c#, linq, lambda

> **可能重复：**
> [是否有 LINQ 方法可以从键/值对列表到字典？](https://stackoverflow.com/questions/9203928/is-there-a-linq-way-to-go-from-a-list-of-key-value-pairs-to-a-dictionary)

假设我有一个`List<string>`如下：

```
var input = new List<string>()
                       {
                           "key1",
                           "value1",
                           "key2",
                           "value2",
                           "key3",
                           "value3",
                           "key4",
                           "value4"
                       }; 
```

基于此列表，我想转换为`List<KeyValuePair<string, string>>`，原因是允许相同的键，这就是我不使用 Dictionary 的原因。

```
var output = new List<KeyValuePair<string, string>>()
                       {
                           new KeyValuePair<string, string>("key1", "value1"),
                           new KeyValuePair<string, string>("key2", "value2"),
                           new KeyValuePair<string, string>("key3", "value3"),
                           new KeyValuePair<string, string>("key4", "value4"),
                       }; 
```

我可以通过使用以下代码来实现：

```
var keys = new List<string>();
var values = new List<string>();

for (int index = 0; index < input.Count; index++)
{
    if (index % 2 == 0) keys.Add(input[index]);
    else values.Add(input[index]);
}

var result = keys.Zip(values, (key, value) => 
                        new KeyValuePair<string, string>(key, value)); 
```

但是感觉这不是使用循环的最佳方式`for`，有没有其他方法可以使用内置的 LINQ 来实现呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T06:52:02.080

```
var output = Enumerable.Range(0, input.Count / 2)
                       .Select(i => Tuple.Create(input[i * 2], input[i * 2 + 1]))
                       .ToList(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T06:45:33.740

我不建议在这里使用 LINQ，因为实际上没有理由使用 LINQ，而且您不会通过使用 LINQ 获得任何东西，而只是使用普通`for`循环并在每次迭代中将计数变量增加两个：

```
var result = new List<KeyValuePair<string, string>>();

for (int index = 1; index < input.Count; index += 2)
{
    result.Add(new KeyValuePair<string, string>(input[index - 1], input[index]));
} 
```

请注意，我开始我的索引，`1`所以我不会遇到访问无效索引的异常，以防万一中的项目数`input`是奇数，即如果`input`以“半对”值结尾。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T07:09:04.457

你可以使用这个：

```
IEnumerable<KeyValuePair<string, string>> list = 
        input.Where((s, i) => i % 2 == 0)
             .Select((s, i) => new KeyValuePair<string, string>(s, input.ElementAt(i * 2 + 1))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T06:52:20.257

您可以使用 LINQ Aggregate() 函数（代码比简单循环长）：

```
var result = 
input.Aggregate(new List<List<string>>(),
                (acc, s) =>
                {
                    if (acc.Count == 0 || acc[acc.Count - 1].Count == 2)
                        acc.Add(new List<string>(2) { s });
                    else
                        acc[acc.Count - 1].Add(s);
                    return acc;
                })
                .Select(x => new KeyValuePair<string, string>(x[0], x[1]))
                .ToList(); 
```

请注意
，即使您的初始输入变成通用的`IEnumerable<string>`而不是专门的`List<string>`

# ruby-on-rails-3 - 图像出现在一个页面上，但不在另一个使用几乎完全相同代码的页面上

> ID：11981940
> 
> 赞同：0
> 
> 时间：2012-08-16T06:42:06.983
> 
> 标签：ruby-on-rails-3

我到处寻找帮助，但我想出的唯一答案是为什么图像根本不会出现的问题*。* 这是我的问题：

在我的 Rails CRM 应用程序中，我为“联系人”创建了一个脚手架。我在 ThemeForest 上购买了一个使用 Bootstrap 的模板，并将所有 CSS 和 javascript 文件复制到我的 Vendor 目录中。该模板带有许多 HTML 文件。我选择了一个并将其用作我的主要联系人列表。我使用“datatables.net”gem 来显示联系人列表。这个特定的 HTML 文件包含许多图像，主要用于按钮。所有图像都正确显示在此页面上。

在我的“编辑联系人”页面上，我从“联系人列表”页面复制并粘贴了所有 HTML，并插入了一个“部分表单”来代替联系人列表表格，以显示特定联系人的可编辑字段。起初，此页面上的所有图像都不起作用。我做了一些关于资产管道的阅读，发现图像源应该是“asset/image_name.png”而不是“images/image_name.png”。（我已将所有图像复制到 assets/images 文件夹。）我很困惑为什么主联系人列表页面上的图像可以工作，但编辑页面却不行。无论如何，我对“/images/”进行了查找和替换，并将其替换为“/assets/”。这修复了编辑联系人页面上大约 2/3 的图像。其余的，作为 Rails Server 的示例，我仍然收到以下错误：

2012 年 8 月 15 日 23:40:42 -0700 开始为 127.0.0.1 获取“/contacts/assets/icons/quickstats/user.png”

ActionController::RoutingError (没有路由匹配 [GET] "/contacts/assets/icons/quickstats/user.png"):

这与我在查找/替换之前遇到的错误相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:34:36.530

问题是您可能使用的是“assets/blah.png”而不是“/assets/blah.png”。这将适用于根 url，但不适用于更深层次的东西，例如。“/联系人/新”。

不用输入 URL，而是使用 image_tag 帮助器，它会为你处理这些东西。

# javascript - 在 D3 捆绑包布局中不断更改捆绑包颜色

> ID：11981941
> 
> 赞同：1
> 
> 时间：2012-08-16T06:42:07.997
> 
> 标签：javascript, svn, graphics, d3.js, bundle-layout

阿罗哈，

有没有可能在[这个](http://bl.ocks.org/1044242)可视化中制作捆绑包：

![在此处输入图像描述](../Images/f2db24fb30e25976e5fdf277dea42722.png)

...看起来就像[该](http://cs.stanford.edu/people/mbostock/iv/dependency-tree.html)可视化中的捆绑包

![在此处输入图像描述](../Images/a49c54df183f993e940489a5414984bb.png)

?

我不知道如何在 d3 中实现这一点。

编辑1：显然我必须编写一个自定义插值器。如何在不更改 d3 库的情况下扩展捆绑插值器以在两种颜色之间进行额外插值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T20:12:18.583

不幸的是，SVG 或 Canvas 都不支持沿路径描边渐变。我的[依赖树可视化](https://github.com/mbostock/dependency-tree)的实现方式如下。对于每条路径：

1.  从基本样条开始（请参阅[分层边捆绑](http://www.win.tue.nl/~dholten/papers/bundles_infovis.pdf)）。
2.  转换为分段三次贝塞尔曲线（请参阅[BasisSpline.segments](https://github.com/mbostock/dependency-tree/blob/master/geom/BasisSpline.js#L102-148)）。
3.  转换为分段线性曲线（*即*折线；参见[Path.flatten](https://github.com/mbostock/dependency-tree/blob/master/geom/Path.js#L236-292)）。
4.  分割成等长的线性段（参见[Path.split](https://github.com/mbostock/dependency-tree/blob/master/geom/Path.js#L294-352)）。

一旦有了这些线性段，就可以通过沿渐变计算适当的颜色来为每个段着色。因此，第一段绘制为绿色，最后一段绘制为红色，中间段使用介于两者之间的颜色绘制。可以通过在等距点对基本样条进行采样来组合步骤 2-4，但这需要更多的数学运算。

我的依赖树是在 Canvas 中实现的，但是您可以在 SVG 中通过为每个恒定颜色段创建单独的路径元素（或线条元素）来实现相同的效果。通过组合相同颜色的段，您可能会获得更好的性能。

# jquery - GSP 页面中的 Jquery 给出 Uncaught SyntaxError: Unexpected token ) 错误

> ID：11981942
> 
> 赞同：0
> 
> 时间：2012-08-16T06:42:16.140
> 
> 标签：jquery, grails

在我的 gsp 页面中，我试图在页面加载期间使用 jquery 动态创建链接..

```
 <r:script>

            function loadEmailButtons(mailTask,rowIndx,trainingIds){
            alert(rowIndx);
                $.each(mailTask, function(index, value) {
                    if(value ==0){
                        $(".table2 tr:eq("+(rowIndx)+")").append("<td width='5%' ><span><g:link action='mail' params='[mailType:'Training_Information']'  controller='mailDraft'  id='1'>Info</g:link></span></td>");
                    }
                });
            }

            $(document).ready(function(){   

                var mailDraftReminderInstance = ${mailDraftReminderInstance};
                loadEmailButtons(mailDraftReminderInstance, 2,trainingInstanceIds);
            });
 </r:script> 
```

但我收到错误：

在控制台中我可以看到

```
 function loadEmailButtons(mailTask,rowIndx,trainingIds){
        $.each(mailTask, function(index, value) {
            if(value ==0){
                $(".table2 tr:eq("+(rowIndx)+")").append("<td width='5%' ><span><a href="/opal/mailDraft/mail/1?mailType=Training_Information">Info</a></span></td>");

            }
        });
    } 
```

**Uncaught SyntaxError: Unexpected token )** near href

这里有什么问题......有没有其他方法可以创建产生上述网址的动态链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:20:48.957

该`<g:link>`标签正在生成一个在其属性值周围使用双引号的锚点。代替

```
<g:link action='mail' params='[mailType:'Training_Information']'  controller='mailDraft'  id='1'>Info</g:link> 
```

尝试这个：

```
<a href='${g.createLink(action:'mail', params:[mailType:'Training_Information'], controller:'mailDraft', id:'1').encodeAsJavaScript()}'>Info</a> 
```

`encodeAsJavaScript`将以适合在 JS 字符串文字中使用的形式转义引号之类的内容，并且您应该在要包含在 JavaScript 字符串中的任何生成值上使用它。有关更多详细信息，请参阅Grails 用户指南中[有关编解码器的部分。](http://grails.org/doc/latest/guide/security.html#codecs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:57:35.000

尝试

```
$(".table2 tr:eq("+(rowIndx)+")").append("<td width='5%' ><span><a href="${createLink(action:'mail', params:'[mailType:'Training_Information']', controller:'mailDraft', id:'1')}">Info</a></span></td>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T06:55:25.777

`href`您在属性周围的双引号是问题所在。`width`在属性中使用单引号，那么它应该可以工作：

```
$(".table2 tr:eq("+(rowIndx)+")").append("<td width='5%' ><span><a href='/opal/mailDraft/mail/1?mailType=Training_Information'>Info</a></span></td>"); 
```

# crystal-reports - 服务器上的水晶报告错误

> ID：11981943
> 
> 赞同：0
> 
> 时间：2012-08-16T06:42:17.630
> 
> 标签：crystal-reports, crystal-reports-2010, crystal-reports-server

我将我的应用程序托管在虚拟专用服务器上。（Windows 2008 r2）所有水晶报告都在本地主机上运行。但是托管应用程序后，报告不起作用。我在服务器上安装了“CRRuntime_64bit_13_0_1”。错误消息如下。

```
 Could not load file or assembly 'log4net, Version=1.2.10.0, Culture=neutral,  
 PublicKeyToken=692fbea5521e1304' or one of its dependencies. The system cannot find the 
 file specified. 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:08:10.447

Log4net 是一个错误报告工具，独立于 Crystal Reports。

所以，这里有问显而易见的风险，但是您在已安装应用程序的 Bin 文件夹中是否有正确版本的 log4net DLL？

# asp.net - 更改报告页面方向

> ID：11981952
> 
> 赞同：0
> 
> 时间：2012-08-16T06:43:07.780
> 
> 标签：asp.net, reporting-services

我在 MS Reporting Server 上创建了一份报告。我想以编程方式更改报告页面方向。我的意思是当报表视图加载报表时，我想从 .net 代码中设置报表的页面方向值。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:45:33.093

页面方向通过`InteractiveSize`报表的（宽度/高度）属性处理。据我所知，您不能将它们设置为表达式，因此我认为不可能动态更改方向。

唯一的选择是

*   以编程方式更改 RDL（这只是一个 XML 文件）并在渲染之前更新它（不是你想要的东西）
*   创建自己的绕过 InteractiveSize 的渲染扩展（我相信这不是微不足道的）

唉，不是很简单的选择。

# dynamics-crm-2011 - 从动态 CRM 主网格中获取选定的行值

> ID：11981954
> 
> 赞同：-1
> 
> 时间：2012-08-16T06:43:21.510
> 
> 标签：dynamics-crm-2011

嗨，我想在单击功能区按钮时从主网格中获取（列）选定行的值。获取值后，我想复制该值，但首先我无法在单击按钮时获取值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:48:26.727

为此，您需要修改功能区 XML。

查看[http://msdn.microsoft.com/en-us/library/gg309639.aspx](http://msdn.microsoft.com/en-us/library/gg309639.aspx)和[http://www.develop1.net/public/page/Ribbon-Workbench-for-Dynamics-CRM-2011.aspx](http://www.develop1.net/public/page/Ribbon-Workbench-for-Dynamics-CRM-2011.aspx)

# flash - 如何在 HTML 中嵌入 Camtasia swf？

> ID：11981957
> 
> 赞同：0
> 
> 时间：2012-08-16T06:43:29.687
> 
> 标签：flash, html, camtasia

我成功地使用 SWFObject 将 Camtasia swf 文件嵌入到 html 中，但我遇到了一个问题，它在 Chrome 中不起作用，但在 IE9 和 Firefox 中运行正常。我找到了答案，只是为了禁用 Chrome 中的内置 Shockwave Flash（版本 11.3.31.227），但我需要代码中的答案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:49:42.583

似乎 chrome 浏览器异步加载外部 javascript。

因此，在调用 swfoject 时，“swfobject”为空。

并参考以下文章：

[http://dougr.net/2011/07/05/automatically-setting-swf-object-focus/](http://dougr.net/2011/07/05/automatically-setting-swf-object-focus/)

[http://www.therealtimeweb.com/index.cfm/2012/1/30/swf-load-issues-chrome](http://www.therealtimeweb.com/index.cfm/2012/1/30/swf-load-issues-chrome)

# java - 如何在 docx4j 中的 addParagraphOfText 上设置空间？

> ID：11981959
> 
> 赞同：0
> 
> 时间：2012-08-16T06:43:43.560
> 
> 标签：java, docx, docx4j

添加到 MainDocumentPart 后，有什么方法可以更改段落的任何属性？

```
WordprocessingMLPackage wordMLPackage = WordprocessingMLPackage.createPackage();
MainDocumentPart mdp = wordMLPackage.getMainDocumentPart();
mdp.addStyledParagraphOfText("NormalIndent", "The following PHP error occurs: "); 
```

在最后一行中，我想使用 setSpace("preserve") 保留空白，但是如何？

谢谢，龙萨克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T11:04:03.433

**披露：我在 docx4j 上工作**

获取刚刚添加的段落；从段落中获得第一次运行；从运行中获取第一个 Text 对象，使用 setSpace("preserve")

ContentAccessor 接口可用于获取段落、运行和文本对象，即调用 getContent()，它返回一个 List

# java - 字节数组到 *Signed* Int

> ID：11981966
> 
> 赞同：1
> 
> 时间：2012-08-16T06:44:20.443
> 
> 标签：java, bytearray, signed

我正在尝试转换`-101`为字节数组，然后将字节数组转换回`-101`. 我下面的方法适用于正值，但不适用于负值。你能建议我做错了什么吗？`-101`该`byteArrayToInt`方法返回，而不是`65435`。谢谢！

```
/**
 * Converts a <code>byte</code> array to a 32-bit <code>int</code>.
 * 
 * @param array The <code>byte</code> array to convert.
 * @return The 32-bit <code>int</code> value.
 */
public static int byteArrayToInt(byte[] array) {
  ValidationUtils.checkNull(array);
  int value = 0;

  for (int i = 0; i < array.length; i++) {
    int shift = (array.length - 1 - i) * 8;
    value = value | (array[i] & 0xFF) << shift;
  }

  return value;
}

/**
 * Converts a 32-bit <code>int</code> to a <code>byte</code> array.
 * 
 * @param value The 32-bit <code>int</code> to convert.
 * @return The <code>byte</code> array.
 */
public static byte[] intToByteArray(int value, int size) {
  byte[] bytes = new byte[size];
  for (int index = 0; index < bytes.length; index++) {
    bytes[index] = (byte) (value >>> (8 * (size - index - 1)));
  }
  return bytes;
}

/**
 * Tests the utility methods in this class.
 * 
 * @param args None.
 */
public static void main(String... args) {
  System.out.println(byteArrayToInt(intToByteArray(32, 2)) == 32); // true
  System.out.println(byteArrayToInt(intToByteArray(64, 4)) == 64); // true
  System.out.println(byteArrayToInt(intToByteArray(-101, 2)) == -101); // false
  System.out.println(byteArrayToInt(intToByteArray(-101, 4)) == -101); // true
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T06:57:40.967

您需要签名扩展您的号码。如果您还没有，您应该阅读带符号二进制数[的二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)表示。

`-101`作为 32 位整数的数字是`0xFFFFFF9B`十六进制的。您将其转换为 2 个字节的字节数组。就这样离开了`0xFF9B`。现在，当您将其转换回时，您将其转换为 32 位整数，结果为`0x0000FF9B`, 或`65435`十进制。

您应该检查字节数组中的最高位并基于此进行符号扩展。一个简单的方法是从 `value=-1`最高位是否设置开始，如果没有设置则默认为`value=0`。

***编辑：***检查最高位的一种简单方法是检查高位字节是否为负。

# php - 在多个文件中查找单词的交集/频率

> ID：11981970
> 
> 赞同：0
> 
> 时间：2012-08-16T06:44:45.263
> 
> 标签：php, frequency

```
<?php

$wordFrequencyArray = array();

function countWordsfrequency($filename) {  
global $wordFrequencyArray;

$contentoffile = (file_get_contents($filename));

$wordArray = preg_split('/[^a-zA-Z0-9]/', $contentoffile, -1, NO_EMPTY);

foreach (array_count_values($wordArray) as $word => $count) {
      if (!isset($wordFrequencyArray[$word])) $wordFrequencyArray[$word] = 0;
        $wordFrequencyArray[$word] += $count;
    }
}

$filenames = array('file1.txt', 'file2.txt','file3.txt','file4.txt');
foreach ($filenames as $filename) {
    countWordsfrequency($filename);
}

print_r($wordFrequencyArray);

?> 
```

这是我的代码来查找多个文件中每个单词的频率并打印它们。现在我要做的是检查找到哪个单词出现在哪个文件中的交集。例如，如果有一个单词“stack”我想要打印它出现在哪些文件中以及我认为我已经计算过的频率。

最终结果应该是该单词出现在哪个文件中的频率。

我应该如何进行？我是否应该在`countWords`函数本身的 for 循环中检查它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:22:50.377

您将不得不保存更多信息。我会回避使用类，因为看起来你不需要任何太健壮的东西。

```
<?php
$wordFrequencies = array();

function countWordsFrequency($filename) {  
  global $wordFrequencies;
  $contentoffile = (file_get_contents($filename));
  $wordArray = preg_split('/[^a-zA-Z0-9]/', $contentoffile, -1, NO_EMPTY);

  foreach (array_count_values($wordArray) as $word => $count) {
    $wordFreqInfo = $wordFrequencies[$word];
    if (!isset($wordFreqInfo)) {
      $wordFreqInfo = array();
      $wordFreqInfo['total'] = 0;
      $wordFreqInfo['files'] = array();
      $wordFrequencies[$word] = $wordFreqInfo;
    }

    // If this is the first occurence of this word in the file, start a count.
    if (!isset($wordFreqInfo['files'][$filename]))
      $wordFreqInfo['files'][$filename] = 0;
    }

    // Increment counts for both the total and the file.
    $wordFreqInfo['total'] += $count;
    $wordFreqInfo['files'][$filename] += $count;
  }
}

$filenames = array('file1.txt', 'file2.txt','file3.txt','file4.txt');
foreach ($filenames as $filename) {
  countWordsFrequency($filename);
}

print_r($wordFrequencies);
?> 
```

# opencv - 如何在 OpenCV 中使用 getPerspectiveTransform 的输出 3x3 矩阵？

> ID：11981971
> 
> 赞同：1
> 
> 时间：2012-08-16T06:44:45.060
> 
> 标签：opencv, perspective

我现在正在尝试分析两个图像之间的透视变换/单应矩阵，这些图像以不同的视角/拍摄角度捕获相同的对象（例如，一个矩形）。可以使用`getPerspectiveTransform`OpenCV 2.3.1 中的函数导出透视变换。我想找到相应的旋转和平移矩阵。

的输出`getPerspectiveTransform`是一个 3x3 矩阵，我可以直接使用它来将源图像变形为目标图像。但我的问题是如何根据获得的 3x3 矩阵找到旋转和平移矩阵？

我正在研究`decomposeProjectionMatrix`相应的旋转和平移矩阵的功能。但输入必须是 3x4 投影矩阵。如何将透视变换（即 3x3 矩阵）与 3x4 投影矩阵联系起来？我在正确的轨道上吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:27:38.790

单应矩阵中包含的信息（从 getPerspectiveTransform 返回）不足以提取旋转/平移。缺少的列是正确找到角度的关键。

好消息是，在某些场景下，您可以使用 solvePnP() 函数从两组点中提取所需的参数。

此外，这个问题与您所要求的相同。它应该有帮助

[使用 OpenCV 分析相机运动](https://stackoverflow.com/questions/11979232/analyze-camera-movement-with-opencv)

# php - 如何在 PHP MySql 中使用数组结构对 Json 进行编码？

> ID：11981976
> 
> 赞同：0
> 
> 时间：2012-08-16T06:44:57.200
> 
> 标签：php, mysql, json, decode

我在 MySql 中有 2 个表

**部分**

```
ID       Name
=====================
1        Section1
2        Section2 
```

**类别**

```
ID        SectionID     Name
=========================================
1           1           Category1
2           1           Category2
3           2           Category3 
```

如何从 PHP 解码 JSON 以获得如下所示的结果：

{sections:[
{sectionName: "Section1", categoryList: [{categoryName: "category1"},{categoryName: "category2"}]},
{sectionName : "Section1", categoryList: [{categoryName: "category3"}]}
]}

这就是我现在所拥有的：
$sql_section = "select * from section";
$sql_category = "从类别中选择 *";

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:50:21.813

假设你的意思是编码。您只需要创建一个与您想要的 json 结构相同的数组，然后使用 $json = json_encode($my_array)

# java - 是否有解释 java 变量继承和构造函数代码流的信息图？

> ID：11981978
> 
> 赞同：0
> 
> 时间：2012-08-16T06:45:14.427
> 
> 标签：java, class, inheritance, constructor, polymorphism

是否有解释 java 变量继承和构造函数代码流的信息图？

我在可视化继承和类变量如何工作、公共、静态私有默认或其他方面遇到了麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:04:22.787

访问修饰符（public、protected、package）在继承中只起很小的作用。您不能使子类中的函数或变量比超类更难访问（例如，Animal 有 public void doStuff() 并且 Cat extends Animal 有 private void doStuff()

静态和非静态方法也不会真正影响继承。静态变量的工作方式相同，除了相对于感兴趣的类

```
public class Magic{
    public static int pants;
}

public class MagicPants extends Magic{
    public void go(){
        System.out.println(pants); 
        System.out.println(MagicPants.pants);
        System.out.println(Magic.pants);
    }

    public static void main(String argv[]){
        Magic.pants = 2;
        MagicPants.pants = 1;
        new MagicPants().go();
    }
} 
```

全部打印 1

构造函数代码流很简单——遵循 super() 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:04:23.480

所以我不知道图形。

静态意味着变量对于具有相同类的所有对象都是相同的。

喜欢

```
public Class TryVariable{
    public static int variable = 2

    public static void main(String[] args){
        a = new TryVariable()
        b = new TryVariable()
        system.out.println(a.variable)
        system.out.println(b.variable)
        // both equals 2

        a.variable= 3
        system.out.println(a.variable)
        system.out.println(b.variable)
        // both equals 3, because variable is static. 
} 
```

公共变量意味着您可以像我在前面的示例中那样直接更改她：object.variableName = value。这是危险的，不建议所有人使用它。

私有变量不能直接更改，您需要使用一些 getter 和 setter 来完成这项工作。这是编码的好方法。

默认情况下，我不了解所有参数，所以我不向您描述。但是 99.9% 的时间是私有的。

受保护的意思是，变量对包和子类开放（第一次私有更容易使用和更安全）

另一个参数可以是最终的，有了这个参数，变量就不能再改变了。这就像一个常数。静态最终参数是类常量。

如果您需要更多信息，之前的回复说明在哪里可以找到官方消息来源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T07:08:35.567

这是一个非常简单的例子：http: [//vskl.blogspot.cz/2009/05/polymorphism-in-java.html](http://vskl.blogspot.cz/2009/05/polymorphism-in-java.html)

每次创建 Circle 或 Square 对象时，也会创建 Shape 对象

关于变量：
-`private`任何其他类（包括子类）都无法访问字段。
-`protected`任何子类都可以访问字段。从链接中获取图片，抽象类Shape的变量x和y，Circle或Square的每个实例都有这些字段。
-`default`任何子类和同一包中的任何类都可以访问字段（仅在同一包中，子包中的类无权访问）。这通常在编写自动化测试时很有用，您不必为该字段声明公共 getter。
-`public`任何其他类都可以访问字段。然而，使用这些并不是编写代码的干净方式，最好使用 getter 和 setter 创建私有字段。
-`static`关键字指定类拥有的字段，而不是它的实例。这就像让类的多个实例共享一个字段。如果一个实例更改此字段的值，则每个其他实例都只能读取这个新修改的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T06:52:11.517

我建议您使用[Lava 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6)并尝试使用上述关键字编写代码，然后对其进行测试。

1.  **默认值：**对包可见。.
2.  **private：**只对类可见
3.  **公开：**全世界可见
4.  **protected：** 对包和所有子类可见。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T06:55:02.727

Oracle的[Java 教程](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)有一个关于继承的部分，应该能够回答您的大部分问题。

# sql - T-SQL 使用 SUM 计算运行总计

> ID：11981979
> 
> 赞同：5
> 
> 时间：2012-08-16T06:45:19.193
> 
> 标签：sql, sql-server-2008, tsql

我有一个简单的表，其中包含一些虚拟数据设置，例如：

```
|id|user|value|
---------------
 1  John   2
 2  Ted    1
 3  John   4
 4  Ted    2 
```

我可以通过执行以下 sql(MSSQL 2008) 语句来选择运行总计：

```
SELECT a.id, a.user, a.value, SUM(b.value) AS total
FROM table a INNER JOIN table b
ON a.id >= b.id
AND a.user = b.user
GROUP BY a.id, a.user, a.value
ORDER BY a.id 
```

这会给我这样的结果：

```
|id|user|value|total|
---------------------
 1  John   2     2
 3  John   4     6
 2  Ted    1     1
 4  Ted    2     3 
```

现在是否可以只检索每个用户的最新行？所以结果是：

```
|id|user|value|total|
---------------------
 3  John   4     6
 4  Ted    2     3 
```

我会以正确的方式解决这个问题吗？任何建议或遵循的新路径都会很棒！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T08:51:24.220

不需要连接，您可以通过这种方式加快查询速度：

```
select id, [user], value, total
from
(
  select id, [user], value, 
  row_number() over (partition by [user] order by id desc) rn, 
  sum(value) over (partition by [user]) total
from users
) a
where rn = 1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T07:19:24.350

试试这个：

```
;with cte as 
     (SELECT a.id, a.[user], a.value, SUM(b.value) AS total
    FROM users a INNER JOIN users b
    ON a.id >= b.id
    AND a.[user] = b.[user]
    GROUP BY a.id, a.[user], a.value
     ),
cte1 as (select *,ROW_NUMBER() over (partition by [user] 
                         order by total desc) as row_num
         from cte)
select  id,[user],value,total from cte1 where row_num=1 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/4aede/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T06:49:19.320

添加 where 语句：

```
select * from
(
your select statement
) t

where t.id in (select max(id) from table group by user) 
```

你也可以使用这个查询：

```
SELECT a.id, a.user, a.value, 

(select max(b.value) from table b where b.user=a.user) AS total

FROM table a 

where a.id in (select max(id) from table group by user)

ORDER BY a.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T06:55:55.343

添加右连接会比嵌套选择执行得更好。

或者更简单：

```
SELECT MAX(id), [user], MAX(value), SUM(value)
FROM table
GROUP BY [user] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-14T14:22:03.890

与 SQL Server 2008 或更高版本兼容

```
DECLARE @AnotherTbl TABLE
    (
        id           INT
      , somedate     DATE
      , somevalue    DECIMAL(18, 4)
      , runningtotal DECIMAL(18, 4)
    )

INSERT INTO @AnotherTbl
    (
        id
      , somedate
      , somevalue
      , runningtotal
    )
SELECT  LEDGER_ID
      , LL.LEDGER_DocDate
      , LL.LEDGER_Amount
      , NULL
FROM    ACC_Ledger LL
ORDER BY LL.LEDGER_DocDate

DECLARE @RunningTotal DECIMAL(18, 4)
SET @RunningTotal = 0

UPDATE  @AnotherTbl
SET @RunningTotal=runningtotal = @RunningTotal + somevalue
FROM    @AnotherTbl

SELECT  *
FROM    @AnotherTbl 
```

# vba - 使用 Word 宏选择表中的所有表

> ID：11981981
> 
> 赞同：0
> 
> 时间：2012-08-16T06:45:23.797
> 
> 标签：vba, ms-word

我有这些我经常得到的文档，我必须对其进行格式化，并且所有数据都存储在用于布局目的的较大表中的表中。

如果可以使用宏，我想设置表格中表格的列宽？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T09:32:46.270

您可以直接引用嵌套表。使用以下命令，您可以获得文档中第一个表中包含的表数。

```
Debug.Print ThisDocument.Tables(1).Tables.Count 
```

然后，您可以遍历它们并根据需要对其进行格式化：

```
Dim oTable as Table

For Each oTable in ThisDocument.Tables(1).Tables

    'Do something with oTable - like
    'setting the width of the first column
    oTable.Columns(1).Width = 60

Next 
```

不要忘记首先检查文档中是否有表格。:)

# css - 两个相邻的 div（菜单和内容），边距透明

> ID：11981986
> 
> 赞同：0
> 
> 时间：2012-08-16T06:45:47.750
> 
> 标签：css, layout, html

我知道这个问题已经有了解决方案。但是，我正在寻找一个特定的解决方案。左侧菜单栏应为固定宽度，而右侧内容区域应为动态宽度。我可以做这个。

但是，菜单和内容中的文本不得从边缘开始。顶部和左侧应该有一点边距。

我尝试了以下 CSS 代码：

```
<div id="menu" style="background-color:#FFD700;height:400px;width:150px;padding-left:15px;float:left;">
Menu 1<br />
Menu 2<br />
</div>

<div id="content" style="background-color:#EEEEEE;height:400px;margin-left:180px;">
Contents...
</div> 
```

但是，我在菜单和内容之间得到了一条白条。所有边距必须是透明的。此外，该网页应在 IE9、Chrome 和 FF 中运行。

**我的问题是，我如何让文本以一些顶部和左侧边距显示，而不会在 IE9/FF/Chrome 中出现那个讨厌的白色条带？**

任何帮助将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:38:44.667

看看这个[Fiddle](http://jsfiddle.net/jdKGv/2/)。那是你要的吗？

# c# - 9 个字符的唯一随机字符串（用于单个表）

> ID：11981988
> 
> 赞同：1
> 
> 时间：2012-08-16T06:45:54.763
> 
> 标签：c#, .net

我想生成一个 9 位唯一的随机字符串。目前我正在使用

```
Guid.NewGuid().ToString().Replace("-","").Substring(0,9) 
```

但恐怕它很快就会发生碰撞。有没有更好的方法或者这样可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T06:53:07.827

如果您采用 GUID 的子字符串，[则根本无法保证~~随机性~~唯一性](http://blogs.msdn.com/b/oldnewthing/archive/2008/06/27/8659071.aspx)。

请参阅[我对较旧的 SO 问题的回答](https://stackoverflow.com/questions/2867758/how-to-generate-a-long-guid/2867832#2867832)以满足您的随机性要求。这是执行此操作的基本代码。

```
public static string CreateRandomString(int length)
{
    length -= 12; //12 digits are the counter
    if (length <= 0)
        throw new ArgumentOutOfRangeException("length");
    long count = System.Threading.Interlocked.Increment(ref counter);
    Byte[] randomBytes = new Byte[length * 3 / 4];
    RNGCryptoServiceProvider rng = new RNGCryptoServiceProvider();
    rng.GetBytes(randomBytes);

    byte[] buf = new byte[8];
    buf[0] = (byte)count;
    buf[1] = (byte)(count >> 8);
    buf[2] = (byte)(count >> 16);
    buf[3] = (byte)(count >> 24);
    buf[4] = (byte)(count >> 32);
    buf[5] = (byte)(count >> 40);
    buf[6] = (byte)(count >> 48);
    buf[7] = (byte)(count >> 56);
    return Convert.ToBase64String(buf) + Convert.ToBase64String(randomBytes);
} 
```

它为您提供 12 位计数以防止冲突以及您想要的任何其他随机数字。您可以根据需要修改代码，使其短于 12 位字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T07:02:50.597

好吧，使用 GUID，它可以保证是全球唯一的，但只是作为一个整体。您不能假设整个 GUID 的子字符串具有随机性。

此外，如果您是从同一来源生成的，那么子字符串中就会出现冲突，因为该算法使用了一些相同的变量，例如计算机的 MAC 地址，尽管我对此并不完全确定。不过作为一个例子就足够了。

因此，如果您想从 GUID 的子字符串创建随机字符串，您必须跟踪所有以前的 GUID 以确保没有冲突。你会得到一个拉斯维加斯算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T08:07:50.323

我决定回答我自己的问题，因为这是我找到的最简单的答案。归功于[返回相同字符串的随机字符串生成器](https://stackoverflow.com/questions/1122483/c-sharp-random-string-generator)

```
 private static Random random = new Random((int)DateTime.Now.Ticks);
    private static object locker = new object();

    private static string RandomString(int size)
    {
        StringBuilder builder = new StringBuilder();
        char ch;
        for (int i = 0; i < size; i++)
        {
            lock (locker)
            {
                ch = Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65)));
            }
            builder.Append(ch);
        }

        return builder.ToString();
    } 
```

# sql-server - 在 IIS(5.1) 中托管 WCF 服务的步骤

> ID：11981989
> 
> 赞同：0
> 
> 时间：2012-08-16T06:46:00.277
> 
> 标签：sql-server

我已经创建了一个 WCF 服务并在 IIS (5.1) 中托管了该服务。

我使用了 basicHttpbinding 和 wsHttpBinding.Follwoing 是绑定的配置声明。

```
<service name="ServiceLibarary.DummyService" behaviorConfiguration="mexHttp">
   <endpoint address="Soap11" binding="basicHttpBinding" contract="ServiceLibarary.IService" bindingConfiguration="basicHttp"/>
   <endpoint address="Soap12" binding="wsHttpBinding" contract="ServiceLibarary.IService" bindingConfiguration="wsHttp"/>
   <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
</service> 
```

以及各自的绑定配置

```
<bindings>
   <basicHttpBinding>
      <binding name="basicHttp">
         <readerQuotas/>
         <security mode="None">
            <transport clientCredentialType="None" />
         </security>
      </binding>
   </basicHttpBinding>
   <wsHttpBinding>
      <binding name="wsHttp">
         <security mode="None">
            <message clientCredentialType="None" />
            <transport clientCredentialType="None" />
         </security>
      </binding>
   </wsHttpBinding>
</bindings> 
```

我已经创建了 ASP.MVC Web 应用程序作为客户端。我在项目中有 Linq-to-Sql 类`Service`。问题是当我运行客户端（MVC 应用程序）并绑定登录时，我得到了

> *无法打开登录请求的数据库“WCF”。登录失败。由于用户错误登录失败。*

`WCF`数据库的名称在哪里。

我正在使用基本绑定在客户端初始化代理类。

当我从同一解决方案添加服务引用时，即从 WCF 服务构建的解决方案中获取服务引用（与 MVC 应用程序相同），它工作正常。以下是我拥有的connectionString

```
 <connectionStrings>
    <add name="ServiceLibarary.Properties.Settings.WCFConnectionString"
        connectionString="Data Source=localhost;Initial Catalog=WCF;Integrated Security=True"
        providerName="System.Data.SqlClient" />
</connectionStrings> 
```

我正在使用 Window XP 和 .NET 3.5。知道为什么会这样吗？我是不是错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:55:06.430

这不是 WCF 配置问题，而是数据库/连接字符串问题。

连接字符串指向在此配置中不可访问的本地数据库。

```
Data Source=localhost; 
```

您需要相应地修改连接字符串或检查数据库的配置，以适用于您的环境。

在我看来，远程机器确实有一个数据库服务器正在运行，但它要么没有相应的“WCF”数据库，要么用户名/密码不正确。

# assembly - 为什么在 asm 中使用 < 、 ( 和 [ 符号

> ID：11981990
> 
> 赞同：-2
> 
> 时间：2012-08-16T06:46:02.407
> 
> 标签：assembly

有人可以解释一下 asm 中使用 %< 的含义吗？我试图理解的指令是“%(%<%[%|sync\n”

我知道 ( 用于引用内存位置。但无法理解 < 和 [ 符号的用法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:26:08.150

`"%(%<%[%|sync\n"`不是任何语言的有效指令。但是，如果这是一些真实问题的乱码版本，让我们谈谈`%[`......

该语法`%[foo]`在[GNU 风格的扩展内联汇编](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html#s5)中用于引用“命名操作数”。例如：

```
#include <stdio.h>
int main()
{
    int cvar = 42;
    asm("incl %[name]"
        : [name] "=r" (cvar)
        : "0" (cvar));
    printf("cvar is %d\n", cvar);  // prints "cvar is 43"
} 
```

那条装配线完全等同于

```
 asm("incl %0"
        : "=r" (cvar)
        : "0" (cvar)); 
```

`asm`在块开始变得复杂的情况下，它更具可读性。

至于`%<`、`%(`和`%|`，我不知道有任何汇编语言可以为它们赋予含义。至于名为 的各种处理器指令`sync`，您可以`sync`在任何 MIPS、PowerPC 或您正在编程的任何处理器的参考手册中查找。

# android - 我应该采用 1 个带 10 个过滤器的接收器或 10 个带 1 个过滤器的接收器的方法

> ID：11981994
> 
> 赞同：1
> 
> 时间：2012-08-16T06:46:16.937
> 
> 标签：android, android-intent, coding-style, broadcastreceiver

我想设计意图 - 我的应用程序部分之间的连接，我的困境是采用哪种工作方法

1.  创建一个超级大的广播接收器，它将处理所有意图并过滤它们

2.  创建许多只处理一个意图的小型广播接收器

    有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:54:50.847

内聚是面向对象的编程原则之一。

我会选择第二种方法。由于各种原因

1.  如果代码只做一件事，则更好理解
2.  更好地测试
3.  更好地重构

另一方面，如果您将大型处理程序设计为一个代理，所有意图都进入其中然后被分派到它们的处理程序，您可以集中您的错误处理并登录到您的大型处理程序。

[凝聚力维基](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)

# java - 如何将外部目录结构添加到我的 Java EE Web 应用程序类路径

> ID：11981996
> 
> 赞同：1
> 
> 时间：2012-08-16T06:46:21.777
> 
> 标签：java, jakarta-ee, web-applications, oracle-adf

我正在尝试设置我的开发环境，我们使用 ant 脚本来构建和部署我们的应用程序。

在我的环境中，我创建了一些配置文件（ADF 模型特定），这些文件位于我们的 Web 容器（Web 上下文）之外。目前我们压缩该外部目录并将其作为 jar 放在 WEB-INF/lib 下。但这对开发人员来说是一个耗时的过程。我想要的是当我的网络上下文启动时，它应该在类路径中具有该外部目录结构。

我相信可以做到，但最好的方法是什么。我正在使用网络逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:45:16.080

将完整路径添加为 JVM 属性，例如。

```
-DmyPath=/var/somePath 
```

然后从您的代码中引用它

```
String path = System.getProperty("myPath"); 
```

# android - 活动未找到

> ID：11981997
> 
> 赞同：0
> 
> 时间：2012-08-16T06:46:26.260
> 
> 标签：android

当我将我的 apk 放入`/data/app`（使用默认设置）时，我可以使用shell 命令`eclipes`正确打开它`adb`

```
adb shell am start -n com.ics.mm/com.ics.mm.MM_demoActivity
Starting: Intent { cmp=com.android.settings/.Settings } 
```

但是当我把它推入时`/system/app`，我找不到它。

```
adb shell am start -n com.ics.mm/com.ics.mm.MM_demoActivity
Starting: Intent { cmp=com.ics.mm/.MM_demoActivity }
Error type 3
Error: Activity class {com.ics.mm/com.ics.mm.MM_demoActivity} does not exist. 
```

我在我的项目中使用 jni。这有关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:30:33.317

我已经解决了。

这是因为我的项目使用 JNI，并且在 libs/armeabi 中有两个 *.so 库。

当我通过 eclipse 安装 apk 或使用“adb install”命令时，库将自动安装到 /data/data/"your_package_name"/lib。

但是如果您想使用“adb push”将 apk 推送到 /system/apk 文件夹中，则必须手动将两个 *.so 库推送到 /system/lib 文件夹中。

就这样，谢谢各位朋友。