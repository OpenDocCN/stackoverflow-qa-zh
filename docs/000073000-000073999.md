# StackOverflow 问答 000073000-000073999

# java - 如果用户单击 IE 窗格，IE 中的模态对话框将隐藏在 IE 后面

> ID：73000
> 
> 赞同：2
> 
> 时间：2008-09-16T14:35:25.313
> 
> 标签：java, internet-explorer, swing, applet, modal-dialog

我必须编写一个显示密码对话框的小程序。问题是对话框设置为始终位于顶部，但是当用户单击 IE 窗口时，对话框仍然隐藏在 IE 窗口后面。并且由于对话框是模态的并且包含**所有**IE 线程 IE 窗格不会刷新，并且对话框窗口仍然绘制在 IE 之上（但没有刷新）。这种行为让用户感到困惑（他们在 IE 顶部*看到*对话框，但看起来它已经挂起，因为它没有刷新）。

所以我需要一种方法来让这个对话框保持在一切之上。但是这个问题的任何其他解决方案都会很好。

这是代码：

```
 PassDialog dialog = new PassDialog(parent);
        /* do some non gui related initialization */
        dialog.pack();
        dialog.setLocationRelativeTo(null);
        dialog.setAlwaysOnTop(true);
        dialog.setVisible(true); 
```

解决方案：正如@shemnon 所指出的，我应该创建一个窗口而不是模式对话框的 (null, Frame, Applet) 父级。初始化父母的好方法是：

```
parent = javax.swing.SwingUtilities.getWindowAncestor(theApplet); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T15:24:06.353

创建一个后台线程，每 2 秒在 Dialog 上调用一次 toFront。我们使用的代码（我希望我得到了一切）：

```
class TestClass {
protected void toFrontTimer(JFrame frame) {
    try {
        bringToFrontTimer = new java.util.Timer();
        bringToFrontTask = new BringToFrontTask(frame);
        bringToFrontTimer.schedule( bringToFrontTask, 300, 300);
    } catch (Throwable t) {
        t.printStackTrace();
    }
}

class BringToFrontTask extends TimerTask {
    private Frame frame;
    public BringToFrontTask(Frame frame) {
        this.frame = frame;
    }
    public void run()
    {
        if(count < 2) {
            frame.toFront();
        } else {
            cancel();
        }
        count ++;
    }
    private int count = 0;
}

public void cleanup() {
    if(bringToFrontTask != null) {
        bringToFrontTask.cancel();
        bringToFrontTask = null;
    }
    if(bringToFrontTimer != null) {
        bringToFrontTimer = null;
    }
}

java.util.Timer bringToFrontTimer = null;
java.util.TimerTask bringToFrontTask = null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T15:31:29.703

由于我对小程序不熟悉，因此这是在黑暗中拍摄的，但是您可以看看 IE 的内置 window.showModalDialog 方法。它相当容易使用。也许这和诺亚的建议相结合？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-18T16:01:56.573

你为父母使用什么论据？

如果您使用 Applet 的父级，您可能会有更好的运气。

```
javax.swing.SwingUtilities.getWindowAncestor(theApplet) 
```

使用 getWindowAncestor 将跳过 applet 父级（getRoot(component) 将返回 applet）。至少在某些 Java 版本中，有一个 Frame 相当于 IE 窗口。YMMV。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T14:54:06.923

您可以尝试使用 JavaScript 集成从 JavaScript 启动模式（参见[http://www.raditha.com/java/mayscript.php](http://www.raditha.com/java/mayscript.php)示例）。

您需要的 JavaScript 类似于：

```
function getPassword() {
  return prompt("Enter Password");
} 
```

Java 将是：

```
password = jso.call("getPassword", new String[0]); 
```

不幸的是，这意味着放弃拥有漂亮模态的所有希望。祝你好运！

# asp.net - 您可以/应该在用户会话对象中存储多少数据？

> ID：73008
> 
> 赞同：9
> 
> 时间：2008-09-16T14:36:22.597
> 
> 标签：asp.net, session

我们的网站上有几个向导样式的表单应用程序，我们在每个页面上捕获用户的信息，然后使用 Web 服务提交到后端进程。

不幸的是，我们无法在每次表单提交期间分块提交信息，因此我们必须将其存储在用户会话中，直到流程结束并同时提交所有信息。

服务器内存/sql 服务器磁盘空间的数量是我可以在用户会话中存储多少的唯一限制，还是我需要考虑其他一些事情？

编辑：该站点建立在 ASP.NET Web 表单上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T14:49:44.937

假设信息不敏感，那么您可以将信息存储在 cookie 中，这将减少需要存储在服务器端的信息量。这也将允许您通过 JavaScript 访问信息。

或者，您可以使用视图状态来存储信息，尽管这可能导致服务器和客户端之间发送大量数据，而不是我的首选解决方案。

您应该存储的会话信息量因应用程序、预期用户数量、服务器规范等而异。要给出更准确的答案，需要更多信息:)

最后，假设在整个过程中收集的信息不需要逐页收集，那么您可以将所有信息存储在数据库表中，并且只存储会话中的唯一 ID 记录。提交每个页面时，数据库记录都会更新，然后在最后一页上检索并提交所有信息。如果由于所需的数据库读取次数而需要在每个后续页面上检索以前的信息，这不是一个理想的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T15:09:53.750

您还可以拥有 1 个带有整个 html 表单的 asp 页面，并隐藏其中的一部分，直到用户填写并“提交”可见部分...

然后简单地隐藏填写的部分并显示表格的下一部分......

这在 .NET 框架中非常容易，为每个“向导步骤”使用面板并添加逻辑何时显示和隐藏每个面板。

然后，您将在一页上拥有所有数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T14:40:10.747

如果您使用传统的 HTTP 模型（即不使用 runat="server"），您可以将数据发布到另一个 asp 页面并将发布的数据放入隐藏的表单元素中，您可以为所需的任何页面执行此操作，从而避免将任何东西放在会话变量中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T15:33:14.507

由于从性能的角度来看，在用户 Session 对象中存储大量数据是有问题的，因此 ASP.Net 在上述帖子中提到的内容之上提供了一些其他解决方法。[ASP.NET Profile Provider](http://msdn.microsoft.com/en-us/library/014bec1k.aspx)允许您将会话相关信息保存在数据库中。您还可以使用[会话状态服务器](http://msdn.microsoft.com/en-us/library/ms972429.aspx)，它使用单独的服务器来存储所有会话信息。这两种情况都考虑到了如果需要使用集群或者负载均衡器，服务器仍然可以跨不同服务器识别会话信息。如果您将信息存储在 Http Session 对象中，则会遇到一个用户必须始终为该会话访问同一服务器的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-26T21:54:39.500

会话、视图状态、数据库。这些都很慢，但会完成工作。

隐藏的表单域是我最喜欢的答案。

还有其他方法可以保持状态。Cookie、弹出窗口、框架集或 iframe。

# asp.net - CodeFile 与 CodeBehind

> ID：73022
> 
> 赞同：145
> 
> 时间：2008-09-16T14:37:04.360
> 
> 标签：asp.net

ASP.NET 用户控件声明中的**CodeFile** ="file.ascx.cs" 和**CodeBehind** ="file.ascx.cs" 有什么区别？

是更新的还是推荐的？还是它们有特定的用途？

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2009-06-05T08:46:27.083

**CodeBehind**：需要编译（ASP.NET 1.1 模型）。编译后的二进制文件放在网站的 bin 文件夹中。在部署之前，您需要在 Visual Studio 中进行编译。当您不希望源代码以纯文本形式查看时，这是一个很好的模型。例如，在向您没有义务提供代码的客户交付时。

**CodeFile**：您为源文件提供部署解决方案。ASP.NET 2.0 运行时在需要时编译代码。编译后的文件位于 Microsoft.NET[.NET version]\Temporary ASP.NET Files。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-09T03:29:36.383

我正在使用 Visual Studio Express 2012 For Web 中的应用程序项目并使用 .NET 4.0。在我的登录和更改密码页面的代码隐藏文件中，我发现在声明中我需要 CodeBehind 和 CodeFile。

如果我不添加代码文件引用，例如

```
CodeFile=login.aspx.cs 
```

网页不解析，浏览器显示解析器错误。我是否编译项目都没有关系。

如果我没有在参考后面添加代码，例如

```
CodeBehind=login.aspx.cs 
```

对 MembershipUser 等安全类的引用在编译时和尝试使用智能感知时都会失败，并出现“找不到类型或命名空间 MembershipUser”之类的错误。根据 .Net 4.0 框架的要求，我添加了对 System.Web.ApplicationServices 的引用。

我应该补充一点，这些麻烦的文件正在使用 IIS 应用程序工具创建的网站内的应用程序中运行。当我从 Visual Studio 打开网站时，我没有遇到解析器错误或引用错误的问题。仅当我在 Visual Studio 中将应用程序作为项目打开时才会发生这种混淆。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-23T11:07:00.530

代码隐藏文件需要在运行前编译，但在 src 中我们不需要编译然后运行.. 只需保存文件。

# c# - 这个委托调用在这行代码（C#）中做了什么？

> ID：73024
> 
> 赞同：4
> 
> 时间：2008-09-16T14:37:12.317
> 
> 标签：c#, delegates

这是来自 agsXMPP .Net 程序集随附的示例。我已经阅读了代表，但不确定这与这行代码（等待登录发生，然后发送消息。我想我正在寻找的是理解为什么`delegate(0)`完成这个，用我能理解的那种简单的话来说。

```
xmpp.OnLogin += delegate(object o) { 
    xmpp.Send(new Message(new Jid(JID_RECEIVER), 
    MessageType.chat, 
    "Hello, how are you?")); 
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T14:41:07.157

它与

```
xmpp.OnLogin += EventHandler(MyMethod); 
```

MyMethod 在哪里

```
public void MyMethod(object o) 
{ 
    xmpp.Send(new Message(new Jid(JID_RECEIVER), MessageType.chat, "Hello, how are you?")); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T14:47:33.117

正如 Abe 所指出的，这段代码正在创建一个匿名函数。这：

```
 xmpp.OnLogin += delegate(object o) 
   { 
      xmpp.Send(
         new Message(new Jid(JID_RECEIVER), MessageType.chat, "Hello, how are you?")); 
   }; 
```

在旧版本的 .Net 中将按以下方式完成（我已经排除了类声明等，只保留了基本元素）：

```
 delegate void OnLoginEventHandler(object o);

public void MyLoginEventHandler(object o)
{
      xmpp.Send(
         new Message(new Jid(JID_RECEIVER), MessageType.chat, "Hello, how are you?")); 
}

[...]

xmpp.OnLogin += new OnLoginEventHandler(MyLoginEventHandler); 
```

在任何一种情况下，您所做的都是在触发 xmpp OnLogin 事件时关联您的方法以运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T14:57:08.600

`OnLogin`在 xmpp 上可能是这样声明的事件：

```
public event LoginEventHandler OnLogin; 
```

哪里`LoginEventHandler`是委托类型可能声明为：

```
public delegate void LoginEventHandler(Object o); 
```

这意味着为了订阅事件，您需要提供与委托签名匹配的方法（或[匿名方法](http://msdn.microsoft.com/en-us/library/0yw3tz5k(VS.80).aspx)/ [lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)） 。`LoginEventHandler`

`delegate`在您的示例中，您使用关键字传递了一个匿名方法：

```
xmpp.OnLogin += delegate(object o)
                { 
                    xmpp.Send(new Message(new Jid(JID_RECEIVER), 
                              MessageType.chat,
                              "Hello, how are you?")); 
                }; 
```

匿名方法与事件预期的委托签名相匹配`OnLogin`（void 返回类型 + 一个对象参数）。[您还可以利用逆变](http://msdn.microsoft.com/en-us/library/ms173174(VS.80).aspx)来删除`object o`参数，因为它不在匿名方法体内使用。

```
xmpp.OnLogin += delegate
                { 
                    xmpp.Send(new Message(new Jid(JID_RECEIVER), 
                              MessageType.chat,
                              "Hello, how are you?")); 
                }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T14:42:04.190

告诉编译器将`delegate(object o){..}`括号内的任何内容打包为稍后执行的对象，在这种情况下`OnLogin`是何时触发。如果没有该`delegate()`语句，编译器会认为您要在assignemnt 语句中间执行操作并给您错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T14:38:47.133

那是创建一个匿名函数。此功能是在 C# 2.0 中引入的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T14:40:42.167

它用作匿名方法，因此您无需在其他地方声明它。它非常有用。

在这种情况下，它所做的就是将该方法附加到因`onLogin`事件而触发的操作列表中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T14:42:39.323

同意安倍的观点，这是一种匿名方法。匿名方法就是这样 - 没有名称的方法，可以作为参数参数提供。

显然 OnLogin 对象是一个事件；使用 += 运算符可确保在引发 OnLogin 事件时执行上述匿名委托指定的方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T14:43:13.113

基本上，{} 内的代码将在 xmpp 事件的“OnLogin”事件被触发时运行。根据名称，我猜该事件会在登录过程中的某个时间点触发。

语法：

```
delegate(object o) { statements; } 
```

是一种称为匿名方法。您问题中的代码将与此等效：

```
public class MyClass
{
  private XMPPObjectType xmpp;
  public void Main()
  {
    xmpp.OnLogin += MyMethod;
  }
  private void MyMethod(object o)
  {
    xmpp.Send(new Message(new Jid(JID_RECEIVER), MessageType.chat, "Hello, how are you?"));
  }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T14:44:13.250

您正在订阅 xmpp 中的 OnLogin 事件。

这意味着当 xmpp 触发此事件时，匿名委托中的代码将触发。这是一种优雅的回调方式。

在 Xmpp 中，会发生这样的事情：

```
 // Check to see if we should fire the login event
   // ALso check to see if anything is subscribed to OnLogin 
   // (It will be null otherwise)
   if (loggedIn && OnLogin != null)
   {
       // Anyone subscribed will now receive the event.
       OnLogin(this);
   } 
```

# java - 嵌入式 Jetty 通过表单身份验证提供静态内容

> ID：73029
> 
> 赞同：2
> 
> 时间：2008-09-16T14:37:37.633
> 
> 标签：java, web-applications, jetty

我尝试在嵌入式 Jetty 6.1.7 项目中使用基于表单的身份验证。

这就是为什么我需要在相同的上下文中提供 servlet 和 html (login.html) 以使身份验证工作。我不想保护漏洞应用程序，因为不同的上下文需要不同的角色。jetty javadoc 指出 ContextHandlerCollection 可以为一个上下文处理不同的处理程序，但我没有让它工作。我的示例忽略了身份验证内容将不起作用，为什么？

```
ContextHandlerCollection contexts = new ContextHandlerCollection();

// serve html       
Context ctxADocs= new Context(contexts,"/ctxA",Context.SESSIONS);
ctxADocs.setResourceBase("d:\\tmp\\ctxA");
ServletHolder ctxADocHolder= new ServletHolder();
ctxADocHolder.setInitParameter("dirAllowed", "false");    
ctxADocHolder.setServlet(new DefaultServlet());
ctxADocs.addServlet(ctxADocHolder, "/");   

// serve a sample servlet
Context ctxA = new Context(contexts,"/ctxA",Context.SESSIONS);  

ctxA.addServlet(new ServletHolder(new SessionDump()), "/sda");
ctxA.addServlet(new ServletHolder(new DefaultServlet()), "/");

contexts.setHandlers(new Handler[]{ctxA, ctxADocs});

// end of snippet 
```

欢迎任何有用的想法！

谢谢。

大神

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T11:30:48.087

最后我做对了，解决方案是使用最新的 jetty 6.1.12 rc2。我没有检查他们改变了什么——我很高兴它现在可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T09:02:56.563

使用 Web 应用程序描述符：

将此粘贴到您的 web.xml 中：

```
<login-config>
    <auth-method>BASIC</auth-method>
</login-config>
<security-role>
    <role-name>MySiteRole</role-name>
</security-role>

<security-constraint>
    <display-name>ProtectEverything</display-name>
    <web-resource-collection>
        <web-resource-name>ProtectEverything</web-resource-name>
        <url-pattern>*.*</url-pattern>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>MySiteRole</role-name>
    </auth-constraint>
</security-constraint>

<security-constraint>
    <web-resource-collection>
        <web-resource-name>ExcludeLoginPage</web-resource-name>
        <url-pattern>/login.html</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>NONE</transport-guarantee>
    </user-data-constraint>
</security-constraint> 
```

如果没有身份验证，这将隐藏除 login.html 之外的所有内容。

# ruby - 如何按不同订单的多个条件进行排序？

> ID：73032
> 
> 赞同：18
> 
> 时间：2008-09-16T14:38:02.657
> 
> 标签：ruby, sorting

我真的很想在没有猴子补丁的情况下处理这个问题，但我还没有找到另一个选择。

我有一个需要按多个条件排序的数组（在 Ruby 中）。我知道如何使用 sort 方法，并且我已经使用了使用一系列选项进行排序的技巧来按多个条件进行排序。但是，在这种情况下，我需要第一个条件进行升序排序，第二个条件进行降序排序。例如：

```
ordered_list = [[1, 2], [1, 1], [2, 1]] 
```

有什么建议么？

编辑：刚刚意识到我应该提到我不能轻易比较第一个和第二个值（我实际上在这里使用对象属性）。因此，对于一个简单的示例，它更像是：

```
ordered_list = [[1, "b"], [1, "a"], [2, "a"]] 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2008-09-16T14:43:03.393

怎么样：

```
 ordered_list = [[1, "b"], [1, "a"], [2, "a"]]
ordered_list.sort! do |a,b|
  [a[0],b[1]] <=> [b[0], a[1]]
end 

```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-03T23:59:10.960

我一直在做噩梦，试图弄清楚如何对特定属性进行反向排序，但通常对其他两个属性进行排序。只是关于那些在此之后出现并被 |a,b| 混淆的排序的注释 块语法。不能将`{|a,b| a.blah <=> b.blah}`块样式与`sort_by!`或一起使用`sort_by`。它必须与`sort!`or一起使用`sort`。此外，如前所述，其他海报交换`a`并`b`跨越比较运算符`<=>`以反转排序顺序。像这样：

要正常按 blah 和 craw 排序，但按相反顺序按 bleu 排序，请执行以下操作：

```
something.sort!{|a,b| [a.blah, b.bleu, a.craw] <=> [b.blah, a.bleu, b.craw]} 
```

也可以将`-`符号与数字一起使用`sort_by`或`sort_by!`对数字进行反向排序（据我所知，它只适用于数字，所以不要用字符串尝试它，因为它只会出错并杀死页面）。

假设`a.craw`是一个整数。例如：

```
something.sort_by!{|a| [a.blah, -a.craw, a.bleu]} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T15:21:55.780

我有同样的基本问题，并通过添加以下内容来解决它：

```
class Inverter
  attr_reader :o

  def initialize(o)
    @o = o
  end

  def <=>(other)
    if @o.is && other.o.is
      -(@o <=> other.o)
    else
      @o <=> other.o
    end
  end
end 
```

这是一个简单地反转 <=> 函数的包装器，然后允许您执行以下操作：

```
your_objects.sort_by {|y| [y.prop1,Inverter.new(y.prop2)]} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-16T19:43:44.467

`Enumerable#multisort`是一种通用解决方案，可应用于**任何大小**的数组，而不仅仅是具有 2 个项目的数组。参数是布尔值，指示特定字段应按升序还是降序排序（用法如下）：

```
items = [
  [3, "Britney"],
  [1, "Corin"],
  [2, "Cody"],
  [5, "Adam"],
  [1, "Sally"],
  [2, "Zack"],
  [5, "Betty"]
]

module Enumerable
  def multisort(*args)
    sort do |a, b|
      i, res = -1, 0
      res = a[i] <=> b[i] until !res.zero? or (i+=1) == a.size
      args[i] == false ? -res : res
    end
  end
end

items.multisort(true, false)
# => [[1, "Sally"], [1, "Corin"], [2, "Zack"], [2, "Cody"], [3, "Britney"], [5, "Betty"], [5, "Adam"]]
items.multisort(false, true)
# => [[5, "Adam"], [5, "Betty"], [3, "Britney"], [2, "Cody"], [2, "Zack"], [1, "Corin"], [1, "Sally"]] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-07-18T10:31:51.830

我已经使用格伦的食谱有一段时间了。厌倦了一遍又一遍地从一个项目复制到另一个项目的代码，我决定把它变成一个宝石：

[http://github.com/dadooda/invert](http://github.com/dadooda/invert)

# sql - 在 Oracle 或 SQL Server 2005 SQL 中嵌入 RegEx 的最佳方法是什么？

> ID：73037
> 
> 赞同：1
> 
> 时间：2008-09-16T14:38:41.530
> 
> 标签：sql, sql-server, regex, oracle

这是关于将 RegEx 嵌入 SQL 语句的 3 部分问题。

1.  如何将 RegEx 表达式嵌入到 Oracle PL/SQL 选择语句中，该语句将解析出下面显示的文本字符串中的“DELINQUENT”字符串？

2.  如果在关键任务业务事务中使用，会对性能产生什么影响？

3.  由于在 Oracle 10g 和 SQL Server 2005 中引入了将正则表达式嵌入 SQL 中，它是否被认为是推荐的做法？

* * *

亲爱的拉里：

感谢您使用 ABC 的提醒服务。

ABC 检测到您的一种产品在 KS 状态下的状态发生了变化。请查看以下信息以确定此状态更改是否有意。

实体名称：Oracle Systems, LLC

以前的状态：--

当前状态：拖欠

提醒一下，您可以联系您的 ABC 团队以寻求帮助以纠正任何拖欠行为，或在需要时恢复服务。或者，如果系统不打算继续进入此状态，请通知 ABC 以便我们停止服务。

亲切的问候，

服务团队 1 ABC

- 请不要回复这封邮件。这不是一个受监控的电子邮件帐户。--

注意：ABC Corporation 无法独立验证由负责的政府机构维护的公共信息或这些警报所依据的其他数据来源的及时性、准确性或完整性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T23:24:42.330

为什么在这里需要正则表达式？INSTR 和 SUBSTR 将完美地完成这项工作。

但是如果你确信你需要正则表达式，你可以使用：

[REGEXP_INSTR](http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/functions129.htm#i1239887)
[REGEXP_REPLACE](http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/functions130.htm#i1305521)
[REGEXP_SUBSTR](http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/functions131.htm#i1239858)

（仅在 Oracle 10g 及更高版本中可用）

```
SELECT emp_id, text
  FROM employee_comment
 WHERE REGEXP_LIKE(text,'...-....'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-30T07:41:37.747

如果我没记错的话，可以在 c#/vb 中为 SQL Server 编写 UDF。这是一个链接，虽然可能不是最好的：[http ://www.novicksoftware.com/coding-in-sql/Vol3/cis-v3-N13-dot-net-clr-in-sql-server.htm](http://www.novicksoftware.com/coding-in-sql/Vol3/cis-v3-N13-dot-net-clr-in-sql-server.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T14:42:19.993

为什么不将 INSTR（对于 Oracle）或 CHARINDEX（对于 SQL Server）与 SUBSTRING 结合使用？似乎更直接（并且可移植，因为它在旧版本中受支持）。

[http://www.techonthenet.com/oracle/functions/instr.php](http://www.techonthenet.com/oracle/functions/instr.php)和[http://www.adp-gmbh.ch/ora/sql/substr.html](http://www.adp-gmbh.ch/ora/sql/substr.html)

[http://www.databasejournal.com/features/mssql/article.php/3071531](http://www.databasejournal.com/features/mssql/article.php/3071531)和[http://msdn.microsoft.com/en-us/library/ms187748.aspx](http://msdn.microsoft.com/en-us/library/ms187748.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T15:04:39.300

INSTR 和 CHARINDEX 是很好的替代方法，但我想探索嵌入 Regex 的好处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T17:30:12.400

在 MS SQL 中，您可以使用其中包含一些“模式匹配”的 LIKE。我猜甲骨文也有类似的东西。它不是正则表达式，但具有一些匹配功能。（注意：它不是特别快）.. 全文搜索也可以是一种选择（同样是 MS SQL）（在大型数据库的上下文中可能是一种更快的方式）

# c# - 在 ASP.Net 应用程序中处理长时间运行的进程的最佳方法是什么？

> ID：73039
> 
> 赞同：1
> 
> 时间：2008-09-16T14:38:46.727
> 
> 标签：c#, .net, asp.net, asp.net-ajax

在我的 Web 应用程序中，有一个进程可以查询来自整个 Web 的数据，对其进行过滤并将其保存到数据库中。你可以想象这个过程需要一些时间。我目前的解决方案是增加页面超时并在加载时为用户提供 AJAX 进度条。这是一个问题有两个原因 - 1）它仍然需要很长时间并且用户必须等待 2）它有时仍然超时。

我已经涉足线程化进程，并阅读了我应该将它异步发布到 Web 服务（“一劳永逸”）。

我读过的一些参考资料：
- [MSDN](http://msdn.microsoft.com/en-us/library/ms978607.aspx#diforwc-ap02_plag_howtomultithread)
- [Fire and Forget](http://aspalliance.com/329)

所以我的问题是——最好的方法是什么？

更新：在用户输入他们的数据后，我想将他们重定向到结果页面，随着进程在后台运行，该页面会逐渐更新。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-16T15:15:30.040

为了避免过多的架构天文学，我经常[使用隐藏的 iframe 来调用长时间运行的进程并流回进度信息](http://encosia.com/2007/10/03/easy-incremental-status-updates-for-long-requests/)。结合[jsProgressBarHandler 之](http://www.bram.us/demo/projects/jsprogressbarhandler/)类的东西，您可以很容易地为较长的任务创建出色的带外进度指示，而通用进度动画不会削减它。

在您的特定情况下，您可能希望对每个任务使用一个 LongRunningProcess.aspx 调用，以避免这些页面超时。

例如，调用 LongRunningProcess.aspx?taskID=1 将其启动，然后在该任务结束时发出一个

```
document.location = "LongRunningProcess.aspx?taskID=2". 
```

令人作呕。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T14:50:58.867

我们遇到了类似的问题，并通过异步 Web 服务调用开始工作（这意味着用户不必等待工作完成）来解决它。Web 服务随后启动了一个 SQL 作业，该作业执行该工作并定期用工作状态更新一个表。我们提供了一个允许用户查询表格的 UI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T14:41:59.637

我在上一份工作中遇到了这个确切的问题。我发现最好的方法是启动一个异步进程，并在完成时通知用户（电子邮件或其他）。由于超时和浪费他们的生产力，让他们等待那么长时间将是一个问题。让他们等待进度条可能会给他们一种错误的安全感，即他们可以在关闭浏览器时取消该过程，这可能并非如此，具体取决于您如何设置系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T14:48:46.687

1.  您如何查询远程数据？
2.  它多久改变一次？
3.  结果是否可以缓存一段时间？
4.  我们在这里实际谈论的是多长时间？

“最佳方法”可能在某种程度上取决于这些问题的答案......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T14:51:07.617

您可以创建另一个线程并在会话或应用程序状态中存储对该线程的引用，具体取决于线程是每个网站只能运行一次，还是每个用户会话运行一次。
然后，您可以将用户重定向到他可以监控线程进度的页面。您可以将页面设置为自动刷新，或向用户显示刷新按钮。
线程完成后，您可以向用户发送电子邮件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T14:51:38.083

我对此的解决方案是一个带外服务，它执行这些并将它们缓存在数据库中。

当这个人第一次提出要求时，他们会稍等片刻，然后它会显示出来，但如果他们刷新，它会立即出现，然后，因为它是 int he db，它现在是下一个每小时更新的一部分自上次请求后 24 小时。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T15:20:31.680

将作业及其相关参数添加到作业队列表。然后，编写一个 Windows 服务来获取这些作业并对其进行处理，将结果保存到适当的位置，并通过电子邮件向请求者发送结果链接。提供某种 UI 也是一个不错的选择，这样用户就可以检查他们的工作状态。

这种方式比启动单独的线程或增加超时要好得多，特别是如果您的应用程序较大并且需要扩展，因为您可以在必要时简单地添加多个服务器来处理作业。

# language-agnostic - 组织代码的最佳方式是什么？

> ID：73045
> 
> 赞同：7
> 
> 时间：2008-09-16T14:39:12.420
> 
> 标签：language-agnostic

我不是在谈论如何在这里缩进。我正在寻找有关在源文件中组织代码块的最佳方式的建议。

您是否按字母顺序排列方法？按照你写的顺序？主题？以某种“说教”的顺序？

你遵循什么组织原则？为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T14:41:57.047

我通常按​​以下顺序订购

1.  构造函数
2.  析构函数
3.  吸气剂
4.  二传手
5.  任何“魔术”方法
6.  更改接收器持久状态的方法（save() 等）
7.  行为
8.  公共辅助方法
9.  私有/受保护的辅助方法
10.  其他任何东西（尽管如果有其他任何东西通常表明需要进行一些重构）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T14:52:35.210

我倾向于使用以下模式：

*   公共静态最终变量
*   静态函数，静态块
*   变量
*   构造函数
*   与逻辑相关的功能
*   getter 和 setter （主要是无趣的所以没有必要阅读它们）

我没有包含本地类的模式，并且大多数情况下我将它们放在使用它们的第一个方法之上。

我不喜欢根据访问级别分离方法。如果某种公共方法使用某种私有方法，它们将彼此接近。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T14:45:46.773

我倾向于将彼此相关的方法分组。使用一个好的 IDE 可以消除很多这种担忧。按字母顺序排列的方法对我来说似乎是一种浪费。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T16:56:47.470

我有所有私有字段，然后是公共字段，然后是构造函数，然后是 main，然后是 main 调用的方法，按照它们被调用的顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T14:47:08.580

有趣的一点。我真的没有想过这个。

我倾向于将经常访问的功能（实用功能等）放在顶部，因为它们很可能需要调整。

我认为组织不是特别重要，因为我可以快速找到任何功能。我不会滚动文件来查找函数；我搜索它。

在 C++ 中，我确实希望 .cpp 文件中的函数与它们在 .h 文件中声明的顺序相同。通常是构造函数，然后是析构函数，然后是主要/中心功能函数，然后是实用函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T14:42:42.677

我根据那里所做的事情对它们进行分组，然后按照我写它们的顺序（尽管按字母顺序可能会更好）

例如在 texture.cpp 我有：

```
//====(DE)CONSTRUCTOR====
...
//====LOAD FUNCTIONS====
...
//====SAVE FUNCTIONS====
...
//====RESOURCE MANGEMENT FUNCTIONS====
//(preventing multiple copies being loaded etc)
...
//====UTILL FUNCTIONS====
//getting texture details, etc
...
//====OVERLOADED OPERTORS====
.... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T14:43:58.990

几乎将这种方法用于我正在编码的任何内容。良好的结构和良好的注释代码可以很好地阅读

*   全局变量
*   功能
*   主体/方法

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T14:44:45.480

public，protected，然后是 private，在每个部分中按字母顺序排列，尽管我经常首先列出构造函数，最后列出解构函数。

/艾伦

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T14:44:49.333

由于没有更好的词，我倾向于按主题对事物进行分组。

例如，如果我有一个在工作过程中使用了两个私有方法的公共方法，那么我会将所有三个方法组合到实现文件中，因为如果你要查看其中一个方法，那么很有可能你需要看看其他人之一。

我也总是为特定的类成员分组获取/设置方法。

这真的是个人喜好，尤其是对于现代 IDE，因为有很多功能可以让您自动跳转到代码中的位置。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T14:46:02.310

我喜欢保持简单，所以我不会在一个类中塞满一堆方法。在一个类中，我通常首先列出最常用的（或由我修改的 ;-)）方法。就具体的代码组织而言，每组方法都属于一个类，所以它自己组织。

我利用编辑器的搜索功能和代码折叠来浏览大型源文件。同样，我也利用搜索功能在其他上下文中查找内容。一个宏大的组织计划从来不适合我，所以我在所有事情上都依赖搜索的力量，而不仅仅是代码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T16:37:43.150

我主要编写 C 代码，并且倾向于按依赖项排序。如果可能的话，我会尝试将我的源代码文件与我的头文件匹配，但通常是如果 void a() 使用 int b(char *foo)，而不是 int b(char *foo) 首先出现。

使我免于将条目添加到本地函数的头文件中。

其余的实际上主要是字母，使搜索更容易。

# c# - 从 C# 启动 sqlcmd 时如何检索错误？

> ID：73051
> 
> 赞同：2
> 
> 时间：2008-09-16T14:39:49.877
> 
> 标签：c#, sql-server

我需要从 C# 应用程序运行存储过程。

我使用以下代码来执行此操作：

```
Process sqlcmdCall = new Process();
sqlcmdCall.StartInfo.FileName = "sqlcmd.exe";
sqlcmdCall.StartInfo.Arguments = "-S localhost\\SQLEXPRESS -d some_db -Q \":EXIT(sp_test)\""
sqlcmdCall.Start();
sqlcmdCall.WaitForExit(); 
```

在调用完成后，从 sqlcmdCall 对象中，我目前得到的 ExitCode 为 -100 表示成功，1 表示失败（即缺少参数、存储的 proc 不存在等）。

如何自定义这些返回码？

H。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T14:52:28.190

我有一个执行类似系统命令的小型 VB.Net 应用程序。为了捕获错误或成功条件，我定义了正则表达式以匹配命令的错误文本输出，并捕获如下输出：

```
 myprocess.Start()
        procReader = myprocess.StandardOutput()

        While (Not procReader.EndOfStream)
           procLine = procReader.ReadLine()

           If (MatchesRegEx(errRegEx, procLine)) Then
              writeDebug("Error reg ex: [" + errorRegEx + "] has matched: [" + procLine + "] setting hasError to true.")

              Me.hasError = True
           End If

           writeLog(procLine)
        End While

        procReader.Close()

        myprocess.WaitForExit(CInt(waitTime)) 
```

这样我就可以捕获特定错误并记录命令的所有输出，以防遇到意外错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T14:44:32.330

如果您尝试从 c# 调用存储过程，您可能希望使用 ADO.Net 而不是通过命令行调用 sqlcmd。查看命名空间中的`SqlConnection`和。`SqlCommand``System.Data.SqlClient`

一旦您通过调用存储过程，`SqlCommand`您将能够捕获存储过程引发的异常，如果需要，我们还会读取过程的返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T21:37:45.127

即使使用 Windows 身份验证，您仍然可以使用`SqlCommand`和`SqlConnection`执行，并且您不必重新发明轮子来进行异常处理。

一个简单的连接配置和一个单一的`SqlCommand`可以毫无问题地执行它。

# visual-studio - 如何将调试断点添加到 Visual Studio 的“查找结果”窗口中显示的行

> ID：73063
> 
> 赞同：19
> 
> 时间：2008-09-16T14:40:36.783
> 
> 标签：visual-studio, debugging, breakpoints

在 Visual Studio 2005-2015 中，可以找到包含某些引用的所有行并将它们显示在“查找结果”窗口中。

现在显示了这些结果行，是否有任何键盘快捷键可以向所有结果行添加调试断点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-10-30T07:35:29.687

***此答案不适用于 Visual Studio 2015 或更高版本。可以在[此处](https://stackoverflow.com/questions/38061627/how-do-i-add-debug-breakpoints-to-lines-displayed-in-a-find-results-window-in?rq=1)找到更新的答案。***

使用 Visual Studio 宏可以很容易地做到这一点。在 Visual Studio 中，按 Alt-F11 打开宏 IDE 并通过右键单击 MyMacros 并选择 Add|Add Module... 添加一个新模块

在源代码编辑器中粘贴以下内容：

```
Imports System
Imports System.IO
Imports System.Text.RegularExpressions
Imports EnvDTE
Imports EnvDTE80
Imports EnvDTE90
Imports System.Diagnostics

Public Module CustomMacros
    Sub BreakpointFindResults()
        Dim findResultsWindow As Window = DTE.Windows.Item(Constants.vsWindowKindFindResults1)

        Dim selection As TextSelection
        selection = findResultsWindow.Selection
        selection.SelectAll()

        Dim findResultsReader As New StringReader(selection.Text)
        Dim findResult As String = findResultsReader.ReadLine()

        Dim findResultRegex As New Regex("(?<Path>.*?)\((?<LineNumber>\d+)\):")

        While Not findResult Is Nothing
            Dim findResultMatch As Match = findResultRegex.Match(findResult)

            If findResultMatch.Success Then
                Dim path As String = findResultMatch.Groups.Item("Path").Value
                Dim lineNumber As Integer = Integer.Parse(findResultMatch.Groups.Item("LineNumber").Value)

                Try
                    DTE.Debugger.Breakpoints.Add("", path, lineNumber)
                Catch ex As Exception
                    ' breakpoints can't be added everywhere
                End Try
            End If

            findResult = findResultsReader.ReadLine()
        End While
    End Sub
End Module 
```

此示例使用“查找结果 1”窗口中的结果；您可能希望为每个结果窗口创建一个单独的快捷方式。

您可以通过转到工具|选项...并在左侧导航的**环境**部分下选择**键盘来创建键盘快捷键。**选择您的宏并分配您喜欢的任何快捷方式。

 **您还可以通过转到工具|自定义...并选择左侧导航中的**宏部分来将宏添加到菜单或工具栏。**一旦你在列表中找到你的宏，你可以将它拖到任何菜单或工具栏，它的文本或图标可以自定义为你想要的任何东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T14:45:59.830

如果您可以准确搜索该单词，则可以使用一对键盘快捷键快速完成搜索。

工具 -> 选项 -> 环境 -> 键盘

*   Edit.GoToFindResults1NextLocation
*   EditorContextMenus.CodeWindow.Breakpoint.InsertBreakpoint

将它们分配给 Control+Alt+F11 和 F10，您可以非常快速地浏览所有结果。但是，我还没有找到前往下一个参考的捷径。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-28T11:42:18.467

我需要类似的东西来禁用所有断点并在每个“Catch ex as Exception”上放置一个断点。但是，我对此进行了一点扩展，因此它将在您选择的字符串的每次出现处放置一个断点。您需要做的就是突出显示要在其上设置断点的字符串并运行宏。

```
 Sub BreakPointAtString()

    Try
        DTE.ExecuteCommand("Debug.DisableAllBreakpoints")
    Catch ex As Exception

    End Try

    Dim tsSelection As String = DTE.ActiveDocument.Selection.text
    DTE.ActiveDocument.Selection.selectall()
    Dim AllText As String = DTE.ActiveDocument.Selection.Text

    Dim findResultsReader As New StringReader(AllText)
    Dim findResult As String = findResultsReader.ReadLine()
    Dim lineNum As Integer = 1

    Do Until findResultsReader.Peek = -1
        lineNum += 1
        findResult = findResultsReader.ReadLine()
        If Trim(findResult) = Trim(tsSelection) Then
            DTE.ActiveDocument.Selection.GotoLine(lineNum)
            DTE.ExecuteCommand("Debug.ToggleBreakpoint")
        End If
    Loop

End Sub 
```

希望对你有帮助 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-10-27T15:54:32.077

保罗，非常感谢，但我有以下错误（消息框），可能我需要重新启动我的电脑：

```
Error
---------------------------
Error HRESULT E_FAIL has been returned from a call to a COM component.
---------------------------
OK   
--------------------------- 
```

我会提出以下非常简单但对我有用的解决方案

```
Sub BreakPointsFromSearch()
    Dim n As Integer = InputBox("Enter the number of search results")

    For i = 1 To n
        DTE.ExecuteCommand("Edit.GoToNextLocation")
        DTE.ExecuteCommand("Debug.ToggleBreakpoint")            
    Next
End Sub 
```

# tfs - Team Foundation Server 2008 的报告模板

> ID：73072
> 
> 赞同：2
> 
> 时间：2008-09-16T14:41:21.027
> 
> 标签：tfs

是否有人在 TFS2008 提供的 SQL 分析服务上运行站点或预构建报告的链接？

有时创建有意义的 Excel 报告或新报告是一项非常无聊且困难的任务，也许找到一种共享报告的方法可能是个好主意？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-17T01:22:43.510

试试这个下载：[创建和自定义 TFS 报告](http://www.microsoft.com/downloads/details.aspx?familyid=a74486b2-f7db-4a85-97bd-46bf478bda60&displaylang=en)，它包括一些示例和一些指导。[更多在这里](http://msdn.microsoft.com/en-us/library/cc487893.aspx)。

还可以尝试从该站点链接的[TFS Reporting Samples.zip 。](http://blogs.msdn.com/buckh/archive/2006/09/09/tfs-reporting.aspx)

本站链接大量 TFS 报告资源：http: [//blogs.msdn.com/teams_wit_tools/archive/2007/03/26/tfs-report-developer-resources.aspx](http://blogs.msdn.com/teams_wit_tools/archive/2007/03/26/tfs-report-developer-resources.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T15:01:28.887

如果您使用的是 SCRUM，则有 Sprint 报告和 Product Burndown 报告：

[http://www.scrumforteamsystem.com/en/default.aspx](http://www.scrumforteamsystem.com/en/default.aspx)

# unit-testing - 一个单元如何测试基于过程或基于事件的代码部分

> ID：73078
> 
> 赞同：8
> 
> 时间：2008-09-16T14:41:49.887
> 
> 标签：unit-testing

我从[这个演示文稿](http://www.masukomi.org/talks/unit_testing_talk_2/index.xul?data=slide_data.txt#page2)和网站上的其他评论中确信我需要学习单元测试。我也意识到这里有很多关于什么是单元测试的问题。每次我去考虑应该如何在我目前正在处理的应用程序中完成它时，我都会困惑地走开。它是一个 xulrunner 应用程序，很多逻辑都是基于事件的——当用户点击这里时，就会发生这个动作。

通常我看到的测试示例是测试类——它们实例化一个对象，给它模拟数据，然后检查对象的属性。这对我来说很有意义——但是非面向对象的部分呢？

[这家伙提到](https://stackoverflow.com/questions/2364/what-is-your-experience-with-unit-testing-in-practice#2390)基于 GUI 的单元测试在大多数任何测试框架中都很困难，也许这就是问题所在。上面链接的演示文稿提到，每个测试一次只能接触一个类，一种方法。这似乎排除了我正在尝试做的事情。

那么问题来了——一个单元如何测试过程或基于事件的代码？提供指向良好文档的链接，或自行解释。

附带说明一下，我还面临一个挑战，即没有找到用于测试 xulrunner 应用程序的测试框架——似乎这些工具还没有开发出来。我想这比我理解概念、编写可测试代码、应用单元测试更外围。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T14:55:44.643

单元测试的想法是在每次测试中测试一小段代码。在基于事件的系统中，您可以进行的一种单元测试形式是测试您的事件处理程序如何响应各种事件。所以你的单元测试可能会将你程序的某个方面设置为特定的状态，然后直接调用事件监听方法，最后测试你程序的后续状态。

如果您计划对基于事件的系统进行单元测试，那么如果您使用依赖注入模式并且理想情况下会全程使用控制反转（请参阅[http://martinfowler.com /articles/injection.html](http://martinfowler.com/articles/injection.html)和[http://msdn.microsoft.com/en-us/library/aa973811.aspx](http://msdn.microsoft.com/en-us/library/aa973811.aspx)了解这些模式的详细信息）

（感谢 pc1oad1etter 指出我弄乱了链接）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T14:49:33.050

起初我会测试这样的事件：

```
private bool fired;

private void HandlesEvent(object sender, EventArgs e)
{
    fired = true;
 } 

public void Test()
{
   class.FireEvent += HandlesEvent;
   class.PErformEventFiringAction(null, null);

   Assert.IsTrue(fired);
} 
```

然后我发现了[RhinoMocks](http://www.ayende.com/wiki/Rhino+Mocks+Events.ashx)。RhinoMocks 是一个创建模拟对象的框架，它还处理事件测试。它也可能对您的程序测试派上用场。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-20T05:40:55.527

在这里回答我自己的问题，但我遇到了一篇解释问题的文章，并做了一个简单示例的演练——[敏捷用户界面开发](http://www.onjava.com/pub/a/onjava/2004/11/17/agileuser_1.html)。代码和图像很棒，这里有一个片段展示了这个想法：

> Kent Beck 和 David Astels 等敏捷大师建议通过保持视图对象非常薄并测试“表面之下”的层来构建 GUI。这种“智能对象/瘦视图”模型类似于熟悉的文档视图和客户端服务器范例，但适用于单个 GUI 元素的开发。内容和表示的分离改进了代码的设计，使其更加模块化和可测试。用户界面的每个组件都被实现为一个智能对象，包含应测试的应用程序行为，但没有 GUI 演示代码。每个智能对象都有一个对应的瘦视图类，只包含通用的 GUI 行为。使用这种设计模型，GUI 构建变得适合 TDD。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T14:46:42.683

问题是“基于事件的编程”将太多的逻辑链接到事件。这样一个系统的设计方式是应该有一个引发事件的子系统（并且您可以编写测试以确保以正确的顺序引发这些事件）。并且应该有另一个子系统只处理管理，比如说，表单的状态。您可以编写一个单元测试来验证给定正确的输入（即引发的事件），将表单状态设置为正确的值。

除此之外，从组件 1 引发并调用组件 2 行为的实际事件处理程序只是集成测试，可以由 QA 人员手动完成。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-22T14:20:14.420

您的问题没有说明您选择的编程语言，但我的是 C#，所以我将使用它来举例说明。然而，这只是对 Gilligans 答案的改进，它使用匿名委托来内联您的测试代码。我都赞成让测试尽可能可读，对我来说这意味着测试方法中的所有测试代码；

```
// Arrange
var car = new Car();
string changedPropertyName = "";
car.PropertyChanged += delegate(object sender, PropertyChangedEventArgs e)
                        {
                           if (sender == car) 
                                  changedPropertyName = e.PropertyName;
                        };

// Act
car.Model = "Volvo";

// Assert 
Assert.AreEqual("Model", changedPropertyName, 
    "The notification of a property change was not fired correctly."); 
```

我在这里测试的类实现了`INotifyPropertyChanged`接口，因此`NotifyPropertyChanged`只要属性的值发生变化，就应该引发一个事件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T14:50:55.747

我发现对过程代码有用的一种方法是使用 TextTest。它与单元测试无关，但它可以帮助您进行自动化回归测试。这个想法是让您的应用程序编写一个日志，然后使用 texttest 比较更改前后的日志。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T17:58:24.663

请参阅经常链接的[有效使用旧代码](https://rads.stackoverflow.com/amzn/click/com/0131177052)。请参阅标题为“我的应用程序是所有 API 调用”和“我的项目不是面向对象的。如何进行安全更改？”的部分。

在 C/C++ 世界（我的经验）中，实践中的最佳解决方案是使用链接器“seam”并针对被测试函数调用的所有函数链接到测试替身。这样您就不会更改任何遗留代码，但您仍然可以单独测试它。

# html - 具有可变边的三列网页设计

> ID：73086
> 
> 赞同：2
> 
> 时间：2008-09-16T14:42:29.043
> 
> 标签：html, css, multiple-columns

我一直在尝试想出一种方法来创建一个 3 列网页设计，其中中心列具有恒定的宽度并且始终居中。左侧和右侧的列是可变的。这在表格中是微不足道的，但在语义上并不正确。

我无法在所有当前浏览器中正常工作。对此有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T14:43:24.780

使用[这种技术](http://matthewjamestaylor.com/blog/perfect-3-column.htm)，只需为中心列指定一个固定宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T14:48:25.877

看看这个：[http ://www.glish.com/css/2.asp](http://www.glish.com/css/2.asp)

并将#maincenter 的宽度：xx% 替换为固定值。当我用 Firebug 更改它时似乎可以工作，值得一试吗？

```
#maincenter {
  width: 200px;
  float: left;
  background: #fff;
  padding-bottom: 10px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T14:48:09.560

我认为您需要从两个侧边栏列的初始（固定）宽度开始，然后在页面加载时使用 javascript 获取窗口宽度并计算侧边栏的新宽度。

侧边栏宽度 = (窗口宽度 - 中心列宽度) / 2

然后，如果调整了窗口大小，您可以重新应用 javascript。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T15:58:03.040

[A List Apart 上的这篇文章](http://alistapart.com/articles/holygrail)有一个解决方案，它产生一个 3 列布局，它将：

*   有一个带有固定宽度侧边栏的流体中心，

*   允许中心列首先出现在源中，

*   允许任何列是最高的，

*   只需要一个额外的 div 标记，并且

*   需要非常简单的 CSS，带有最少的补丁。

# linux - X/Gnome：如何测量打开窗口的几何形状

> ID：73087
> 
> 赞同：16
> 
> 时间：2008-09-16T14:42:32.863
> 
> 标签：linux, x11, gnome

是否有标准的 X / Gnome 程序可以显示我选择的窗口的 X、Y 宽度和深度（以像素为单位）？类似于 xterm 在您调整窗口大小时向您显示窗口的宽度和深度（以行为单位）的方式。

我在 Red Hat Enterprise Linux 4.4 上运行。

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-09-16T14:49:28.090

是的，您正在寻找程序“xwininfo”。在另一个终端中运行它，然后单击您想要了解信息的窗口，它将提供给您。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T14:54:29.700

```
$ xwininfo 

xwininfo: Please select the window about which you
          would like information by clicking the
          mouse in that window.

xwininfo: Window id: 0x1200007 "xeyes"

  Absolute upper-left X:  1130
  Absolute upper-left Y:  0
  Relative upper-left X:  0
  Relative upper-left Y:  0
  Width: 150
  Height: 100
  Depth: 24
  Visual Class: TrueColor
  Border width: 0
  Class: InputOutput
  Colormap: 0x20 (installed)
  Bit Gravity State: NorthWestGravity
  Window Gravity State: NorthWestGravity
  Backing Store State: NotUseful
  Save Under State: no
  Map State: IsViewable
  Override Redirect State: no
  Corners:  +1130+0  -0+0  -0-924  +1130-924
  -geometry 150x100-0+0 
```

# java - 如何实现一个简单的自动完成功能？

> ID：73095
> 
> 赞同：3
> 
> 时间：2008-09-16T14:43:37.463
> 
> 标签：java, autocomplete

我想实现一个简单的类（在 Java 中），它允许我注册和注销字符串，并根据当前的字符串集自动完成给定的字符串。因此，界面将是：

*   无效添加（字符串）
*   无效删除（字符串）
*   字符串完成（字符串）

就算法和数据结构而言，最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T15:31:32.403

您应该考虑使用 PATRICIA trie 作为数据结构。在谷歌上搜索“patricia trie”，你会发现很多信息......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T15:06:56.690

您所追求的数据结构称为三元搜索树。

在 www.javaworld.com/javaworld/jw-02-2001/jw-0216-ternary.html 上有一个很棒的 JavaWorld 示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T15:05:35.163

它必须是某种可以按排序顺序维护的列表。您还必须编写自己的搜索算法，为您提供列表中与您的搜索模式匹配的第一个元素的索引。然后从该索引进行迭代，直到第一个不匹配的元素，并且您拥有可能的完成列表。

我会从 commons-collections 中查看[TreeList 。](http://commons.apache.org/collections/api-release/org/apache/commons/collections/list/TreeList.html)它具有从列表中间快速插入和删除的时间，您需要这些时间来保持排序顺序。从支持该列表的树中写出您的搜索功能可能相当容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-12-22T07:14:28.677

对于那些偶然发现这个问题的人......

我刚刚在 Google Code 上发布了一个[服务器端自动完成实现。](http://code.google.com/p/autocomplete-server/)该项目包括一个可以集成到现有应用程序中的 java 库和一个独立的 HTTP AJAX 自动完成服务器。

我希望这能让人们将高效的自动完成功能整合到他们的应用程序中。踢轮胎！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-03-22T16:19:18.230

我创建了一个名为 Simple AutoComplete 的 JQuery 插件，它允许您在同一页面上根据需要添加许多自动完成功能，并添加带有额外参数的过滤器，并执行回调函数以带来其他参数，例如项目的 id。

请参阅[http://www.idealmind.com.br/projetos/simple-autocomplete-jquery-plugin/](http://www.idealmind.com.br/projetos/simple-autocomplete-jquery-plugin/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2008-09-16T14:49:56.293

常用表达。

# java - 插入大量数据时如何修复 MySQL 数据截断错误？

> ID：73109
> 
> 赞同：12
> 
> 时间：2008-09-16T14:44:36.697
> 
> 标签：java, mysql, jdbc

我正在使用来自 Java 应用程序的相当简单的数据库。我们尝试使用标准的 JDBC mysql 适配器一次插入大约 200k 的文本。我们间歇性地得到一个`com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column error.`

列类型是`longtext`，数据库排序规则是`UTF-8`。错误显示同时使用`MyISAM`和`InnoDB`表引擎。客户端和服务器端的最大数据包大小都设置为 1 GB，因此这也不应该引起问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-16T15:11:31.967

检查您的 UTF-8 数据是否都是 3 字节的 Unicode。如果你有 4 字节字符（在 Unicode 和 Java 中是合法的，在 MySQL 5 中是非法的），当你尝试插入它们时它会抛出这个错误。这是一个[应该](http://bugs.mysql.com/bug.php?id=25666)在 MySQL 6.0 中修复的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T14:52:41.357

好吧，您可以通过执行 INSERT IGNORE 让它忽略错误，这只会截断数据并插入它。（来自[http://dev.mysql.com/doc/refman/5.0/en/insert.html](http://dev.mysql.com/doc/refman/5.0/en/insert.html)）

> 如果使用 IGNORE 关键字，则执行 INSERT 语句时发生的错误将被视为警告。例如，如果没有 IGNORE，复制表中现有 UNIQUE 索引或 PRIMARY KEY 值的行会导致重复键错误并且语句被中止。使用 IGNORE，行仍然没有插入，但不会发出错误。如果未指定 IGNORE，将触发错误的数据转换将中止语句。使用 IGNORE，将无效值调整为最接近的值并插入；会产生警告，但语句不会中止。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-16T12:02:06.453

在 mysql 中，您可以对大文本数据使用`MEDIUMTEXT`或字段类型`LONGTEXT`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T14:55:20.883

It sounds to me like you are trying to put too many bytes into a column. I ran across a very similar error with MySQL last night due to a bug in my code. I meant to do

```
foo.status = 'inactive' 
```

but had actually typed

```
foo.state = 'inactive' 
```

Where foo.state is supposed to be a two character code for a US State ( varchar(2) ). I got the same error as you. You might go look for a similar situation in your code.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-10T16:06:22.593

我刚刚遇到了这个问题，并通过删除文本中的所有非标准 ascii 字符来解决它（遵循上面的 UTF-8 建议）。

我在 Debian 4、Java 5 系统上遇到了问题；但相同的代码在 Ubuntu 9.04、Java 6 上运行良好。两者都运行 MySql 5。

# winforms - 仅当文本不适合时，如何在 System.Windows.Forms.TextBox 上显示滚动条？

> ID：73110
> 
> 赞同：28
> 
> 时间：2008-09-16T14:44:41.050
> 
> 标签：winforms, textbox, scrollbar

对于 Multiline=True 的 System.Windows.Forms.TextBox，我只想在文本不适合时显示滚动条。

这是一个只读文本框，仅用于显示。它是一个文本框，以便用户可以将文本复制出来。是否有内置支持滚动条自动显示的功能？如果不是，我应该使用不同的控件吗？还是我需要挂钩 TextChanged 并手动检查溢出（如果是，如何判断文本是否合适？）

* * *

对 WordWrap 和 Scrollbars 设置的各种组合没有任何运气。我希望最初没有滚动条，并且只有在文本不适合给定方向时才动态显示每个滚动条。

* * *

@nobugz，谢谢，在禁用 WordWrap 时有效。我不想禁用自动换行，但这是两害相权取其轻。

* * *

@André Neves，好点子，如果它是用户可编辑的，我会这样做。我同意一致性是 UI 直观性的基本规则。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-03-04T20:15:29.410

当我想解决同样的问题时，我遇到了这个问题。

最简单的方法是更改​​为 System.Windows.Forms.RichTextBox。本例中的 ScrollBars 属性可以保留为 RichTextBoxScrollBars.Both 的默认值，表示“在需要时同时显示水平和垂直滚动条”。如果在 TextBox 上提供此功能，那就太好了。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-09-18T02:18:22.637

向您的项目添加一个新类并粘贴如下所示的代码。编译。将新控件从工具箱顶部拖放到表单上。它不是很完美，但应该适合你。

```
using System;
using System.Drawing;
using System.Windows.Forms;

public class MyTextBox : TextBox {
  private bool mScrollbars;
  public MyTextBox() {
    this.Multiline = true;
    this.ReadOnly = true;
  }
  private void checkForScrollbars() {
    bool scroll = false;
    int cnt = this.Lines.Length;
    if (cnt > 1) {
      int pos0 = this.GetPositionFromCharIndex(this.GetFirstCharIndexFromLine(0)).Y;
      if (pos0 >= 32768) pos0 -= 65536;
      int pos1 = this.GetPositionFromCharIndex(this.GetFirstCharIndexFromLine(1)).Y;
      if (pos1 >= 32768) pos1 -= 65536;
      int h = pos1 - pos0;
      scroll = cnt * h > (this.ClientSize.Height - 6);  // 6 = padding
    }
    if (scroll != mScrollbars) {
      mScrollbars = scroll;
      this.ScrollBars = scroll ? ScrollBars.Vertical : ScrollBars.None;
    }
  }

  protected override void OnTextChanged(EventArgs e) {
    checkForScrollbars();
    base.OnTextChanged(e);
  }

  protected override void OnClientSizeChanged(EventArgs e) {
    checkForScrollbars();
    base.OnClientSizeChanged(e);
  }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-16T14:51:21.360

我也做了一些实验，发现启用后竖条一直显示，而横条只要启用就一直显示`WordWrap == false`。

我认为你不会在这里得到你想要的东西。但是，我相信用户希望 Windows 的默认行为比您试图强制的更好。如果我使用的是你的应用程序，如果我的文本框空间突然缩小，我可能会感到困扰，因为它需要容纳一个意外的滚动条，因为我给了它太多的文本！

也许让您的应用程序遵循 Windows 的外观和感觉是个好主意。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-03-20T15:47:12.557

nobugz 的解决方案中有一个非常微妙的错误会导致堆损坏，但前提是您使用 AppendText() 来更新 TextBox。

从 OnTextChanged 设置 ScrollBars 属性将导致 Win32 窗口（句柄）被销毁并重新创建。但是 OnTextChanged 是从 Win32 编辑控件 (EditML_InsertText) 的内部调用的，此后它立即期望该 Win32 编辑控件的内部状态保持不变。不幸的是，由于重新创建了窗口，操作系统已释放该内部状态，从而导致访问冲突。

所以这个故事的寓意是：如果您要使用 nobugz 的解决方案，请不要使用 AppendText()。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-11-10T17:42:57.190

我用下面的代码取得了一些成功。

```
 public partial class MyTextBox : TextBox
  {
    private bool mShowScrollBar = false;

    public MyTextBox()
    {
      InitializeComponent();

      checkForScrollbars();
    }

    private void checkForScrollbars()
    {
      bool showScrollBar = false;
      int padding = (this.BorderStyle == BorderStyle.Fixed3D) ? 14 : 10;

      using (Graphics g = this.CreateGraphics())
      {
        // Calcualte the size of the text area.
        SizeF textArea = g.MeasureString(this.Text,
                                         this.Font,
                                         this.Bounds.Width - padding);

        if (this.Text.EndsWith(Environment.NewLine))
        {
          // Include the height of a trailing new line in the height calculation        
          textArea.Height += g.MeasureString("A", this.Font).Height;
        }

        // Show the vertical ScrollBar if the text area
        // is taller than the control.
        showScrollBar = (Math.Ceiling(textArea.Height) >= (this.Bounds.Height - padding));

        if (showScrollBar != mShowScrollBar)
        {
          mShowScrollBar = showScrollBar;
          this.ScrollBars = showScrollBar ? ScrollBars.Vertical : ScrollBars.None;
        }
      }
    }

    protected override void OnTextChanged(EventArgs e)
    {
      checkForScrollbars();
      base.OnTextChanged(e);
    }

    protected override void OnResize(EventArgs e)
    {
      checkForScrollbars();
      base.OnResize(e);
    }
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-08T07:09:09.690

Aidan 所描述的几乎正是我所面临的 UI 场景。由于文本框是只读的，我不需要它来响应 TextChanged。而且我更希望延迟自动滚动重新计算，这样在调整窗口大小时它不会每秒触发数十次。

对于大多数 UI，带有垂直和水平滚动条的文本框是邪恶的，所以我只对垂直滚动条感兴趣。

我还发现 MeasureString 产生的高度实际上比要求的要大。使用没有边框的文本框的 PreferredHeight 作为行高可以得到更好的结果。

以下似乎工作得很好，有或没有边框，它适用于 WordWrap。

只需在需要时调用 AutoScrollVertically()，并可选择指定 recalculateOnResize。

```
public class TextBoxAutoScroll : TextBox
{
    public void AutoScrollVertically(bool recalculateOnResize = false)
    {
        SuspendLayout();

        if (recalculateOnResize)
        {
            Resize -= OnResize;
            Resize += OnResize;
        }

        float linesHeight = 0;
        var   borderStyle = BorderStyle;

        BorderStyle       = BorderStyle.None;

        int textHeight    = PreferredHeight;

        try
        {
            using (var graphics = CreateGraphics())
            {
                foreach (var text in Lines)
                {
                    var textArea = graphics.MeasureString(text, Font);

                    if (textArea.Width < Width)
                        linesHeight += textHeight;
                    else
                    {
                        var numLines = (float)Math.Ceiling(textArea.Width / Width);

                        linesHeight += textHeight * numLines;
                    }
                }
            }

            if (linesHeight > Height)
                ScrollBars = ScrollBars.Vertical;
            else
                ScrollBars = ScrollBars.None;
        }
        catch (Exception ex)
        {
            System.Diagnostics.Debug.WriteLine(ex);
        }
        finally
        {
            BorderStyle = borderStyle;

            ResumeLayout();
        }
    }

    private void OnResize(object sender, EventArgs e)
    {
        m_timerResize.Stop();

        m_timerResize.Tick    -= OnDelayedResize;
        m_timerResize.Tick    += OnDelayedResize;
        m_timerResize.Interval = 475;

        m_timerResize.Start();
    }

    Timer m_timerResize = new Timer();

    private void OnDelayedResize(object sender, EventArgs e)
    {
        m_timerResize.Stop();

        Resize -= OnResize;

        AutoScrollVertically();

        Resize += OnResize;
    }
} 
```

# c++ - 使用并行处理在 C++ 中制作游戏

> ID：73117
> 
> 赞同：2
> 
> 时间：2008-09-16T14:45:19.893
> 
> 标签：c++, opengl, graphics, directx, sdl

我想在 C++ 中“模拟”流行的 Flash 游戏 Chrontron，需要一些帮助才能开始。（注：不是为了释放，只是为自己练习）

```
基本：
玩家有一台时光机。在使用时间机器的每次迭代中，一个并行状态
被创建，与先前的状态共存。其中一个州必须完成所有
阶段结束前的关卡目标。此外，所有阶段必须能够
正常结束阶段，而不会引起状态悖论（他们应该有
能够正常完成阶段，但由于另一个状态的相互作用，
不是）。

```

所以，这解释了游戏是如何运作的。你应该玩一点才能真正理解我的问题是什么。

我在想一个解决这个问题的好方法是使用链表来存储每个状态，这可能是基于时间的哈希映射，或者是基于时间迭代的链表。我仍然不确定。

实际问题：

现在我有了一些粗略的规范，我需要一些帮助来决定使用哪些数据结构，以及为什么。另外，我想知道我应该使用什么图形 API/图层来执行此操作：SDL、OpenGL 或 DirectX（我目前的选择是 SDL）。我将如何实现并行状态？使用并行线程？

编辑（澄清更多）：
操作系统——Windows（因为这是一个爱好项目，以后可能会在 Linux 中这样做）
图形——2D 语言——C++（必须是 C++——这是下学期课程的练习）

Q-Answered: SDL : OpenGL : Direct X
Q-Answered: Avoid Parallel Processing
Q-Answered: 使用 STL 实现时间步操作。

```
到目前为止，人们所说的，我应该：
1\. 使用 STL 存储动作。
2\. 基于时间步长迭代动作。
3\. 忘记并行处理——句号。（但我仍然想要一些关于它如何
可以使用，在什么情况下应该使用，因为这是为了练习）。

```

附加到这个问题，我以前主要使用过 C#、PHP 和 Java，所以我不会将自己描述为一个能手的程序员。哪些 C++ 特定知识可以帮助我更轻松地完成这个项目？（即向量？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T15:25:19.173

您应该首先阅读并理解“固定时间步长”游戏循环（这里有一个很好的解释：[http](http://www.gaffer.org/game-physics/fix-your-timestep) ://www.gaffer.org/game-physics/fix-your-timestep ）。

然后你要做的是保留帧计数器和动作对列表的列表。STL 示例：

```
std::list<std::list<std::pair<unsigned long, Action> > > state; 
```

或者也许是对列表的向量。要创建状态，对于每个动作（玩家交互），您存储帧号和执行的动作，如果动作只是“按下 <X> 键”或“释放键 <X>”，您很可能会获得最佳结果“：

```
state.back().push_back(std::make_pair(currentFrame, VK_LEFT | KEY_PRESSED)); 
```

要回放之前的状态，您必须在玩家每次激活时间机器时重置帧计数器，然后遍历每个之前状态的状态列表，看看是否有任何匹配当前帧。如果存在，请针对该状态执行操作。为了优化，您可以将迭代器列表保留到您在每个先前状态列表中的位置。这是一些*伪代码*：

```
typedef std::list<std::pair<unsigned long, Action> > StateList;
std::list<StateList::iterator> stateIteratorList;
//
foreach(it in stateIteratorList)
{
  if(it->first == currentFrame)
  {
    performAction(it->second);
    ++it;
  }
} 
```

我希望你明白这个想法...

单独的线程只会使事情变得非常复杂，这样您每次都会得到相同的结果，您无法通过使用单独的线程（无法真正看到如何实现）或非固定时间步长游戏循环来保证这一点。

谈到图形 API，我会选择 SDL，因为它可能是最容易让您入门的东西。如果您想转为 3D，您以后可以随时使用 SDL 中的 OpenGL。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T15:06:15.053

[这听起来与Braid](http://braid-game.com)非常相似。你真的不希望并行处理 - 并行编程**很难**，对于这样的事情，性能应该不是问题。

由于游戏状态向量会增长得非常快（可能大约为每秒几千字节，具体取决于帧速率和存储的数据量），因此您不需要链表，因为链表的开销很大空间（如果布局不当，可能会由于缓存未命中而导致巨大的性能损失）。对于每个并行时间线，您需要一个矢量数据结构。您可以将每个并行时间线存储在链接列表中。每个时间线都知道它是从什么时间开始的。

要运行游戏，您需要遍历所有活动时间线，并以同步的方式从每个时间线执行一帧的动作。无需并行处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T14:49:18.590

我以前玩过这个游戏。我不一定认为并行处理是要走的路。您在游戏中共享了需要在进程之间共享的对象（杠杆、盒子、电梯等），可能与每个增量共享，从而降低了并行性的有效性。

我个人只会保留一个动作列表，然后对于每个后续迭代开始将它们交错在一起。例如，如果列表的格式为 <[iteration.action]>，则第三次通过将执行动作 1.1、2.1、3.1、1.2、2.2、3.3 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T14:49:54.767

在简要掩盖了描述之后，我认为您的想法是正确的，我将有一个包含状态数据的状态对象，并将其放入链表中...我认为您不需要并行线程...

至于图形API，我只用过opengl，可以说它很强大，并且有很好的C/C++ API，opengl也可以跨平台，因为你可以在*Nix电脑上使用messa库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T14:51:41.970

一个非常有趣的游戏创意。我认为你是对的，并行计算将有利于这种设计，但不比任何其他高资源程序。

这个问题有点模棱两可。我看到你打算用 C++ 编写这个，但你在为什么操作系统编写代码？您是否打算将其作为跨平台，您想要什么样的图形，即 3D、2D、高端、基于网络。

所以基本上我们需要更多的信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T14:57:53.123

并行处理不是答案。您应该简单地“记录”玩家的动作，然后为“之前的动作”回放它们

因此，您创建了一个包含动作的向量（单链表）。只需存储执行该操作的帧号（或增量）并在该特定实例中代表玩家的“虚拟机器人”上完成该操作。您只需遍历状态并一个接一个地触发它们。

当状态悖论仅仅因为下一个动作失败而发生时，你会得到很容易“破坏”游戏的副作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T15:03:56.807

除非您迫切希望将 C++ 用于自己的教育，否则您绝对应该将[XNA](http://creators.xna.com)用于您的游戏和图形框架（它使用 C#）。它完全免费，可以为您做很多事情，很快您就可以在 Xbox Live 上销售您的游戏。

要回答您的主要问题，您已经可以在 Flash 中执行的任何操作都不需要使用多个线程。只需将位置列表存储在数组中，然后为每个机器人使用不同的偏移量进行循环。

# php - 是否可以使用 .htaccess 将六位数字 URL 发送到脚本，但将所有其他无效 URL 处理为 404？

> ID：73123
> 
> 赞同：3
> 
> 时间：2008-09-16T14:46:03.887
> 
> 标签：php, .htaccess, redirect

是否可以使用 .htaccess 通过将所有六位 URL 发送到脚本来处理它们，但将所有其他无效 URL 处理为错误 404？

例如：

```
http://mywebsite.com/132483 
```

将被发送到：

```
http://mywebsite.com/scriptname.php?no=132483 
```

但

```
http://mywebsite.com/132483a or
http://mywebsite.com/asdf 
```

将作为 404 错误处理。

我目前通过自定义 PHP 404 脚本进行这项工作，但它有点笨拙。在我看来， .htaccess 可能是一个更优雅的解决方案，但我无法弄清楚它是否可能。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-16T14:52:07.490

在您的 htaccess 文件中，输入以下内容

```
RewriteEngine On
RewriteRule ^([0-9]{6})$ /scriptname.php?no=$1 [L] 
```

第一行打开 mod_rewrite 引擎。() 括号将内容放入 $1 - 连续的 () 将填充 $2、$3... 等等。[0-9]{6} 表示查找长度为 6 个字符且仅包含字符 0-9 的字符串。

最后的 [L] 使这条规则成为最后一条规则 - 如果它适用，则规则处理将停止。

哦，^ 和 $ 标记传入 uri 的开始和结束。

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-16T15:02:41.210

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteRule ^([0-9]{6})$ scriptname.php?no=$1 [L]
</IfModule> 
```

保留干净的 URL

```
http://mywebsite.com/132483 
```

在提供 scriptname.php 时，仅使用 [L]。使用 [R=301] 会将您重定向到您的 scriptname.php?no=xxx

您可能会发现这很有用[http://www.addedbytes.com/download/mod_rewrite-cheat-sheet-v2/pdf/](http://www.addedbytes.com/download/mod_rewrite-cheat-sheet-v2/pdf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T14:48:15.970

是的，使用 mod_rewrite 是可能的。网上有很多很好的 mod_rewrite 教程，快速的谷歌搜索应该很快就会找到你的答案。

基本上你要做的是确保你使用的正则表达式只是寻找数字而不是其他字符，并确保长度为 6。然后你将重定向到 scriptname.?no= 与你的数字捕获。

希望这可以帮助！

# c# - FileSystemWatcher Dispose 调用挂起

> ID：73128
> 
> 赞同：11
> 
> 时间：2008-09-16T14:46:47.270
> 
> 标签：c#, .net, winforms, filesystemwatcher

我们刚刚开始遇到 FileSystemWatcher 的一个奇怪问题，其中对 Dispose() 的调用似乎挂起。这是一段时间以来一直没有任何问题的代码，但我们刚刚升级到 .NET3.5 SP1，所以我试图找出是否有其他人看到过这种行为。下面是创建 FileSystemWatcher 的代码：

```
if (this.fileWatcher == null)
{
   this.fileWatcher = new FileSystemWatcher();
}
this.fileWatcher.BeginInit();
this.fileWatcher.IncludeSubdirectories = true;
this.fileWatcher.Path = project.Directory;
this.fileWatcher.EnableRaisingEvents = true;
this.fileWatcher.NotifyFilter = NotifyFilters.Attributes;
this.fileWatcher.Changed += delegate(object s, FileSystemEventArgs args)
{
   FileWatcherFileChanged(args);
};
this.fileWatcher.EndInit(); 
```

其使用方式是更新 TreeNode 对象的状态图像（稍作调整以删除业务特定信息）：

```
private void FileWatcherFileChanged(FileSystemEventArgs args)
{
   if (this.TreeView != null)
   {
      if (this.TreeView.InvokeRequired)
      {
         FileWatcherFileChangedCallback d = new FileWatcherFileChangedCallback(FileWatcherFileChanged);
         this.TreeView.Invoke(d, new object[]
      {
         args
      });
      }
      else
      {
         switch (args.ChangeType)
         {
            case WatcherChangeTypes.Changed:
               if (String.CompareOrdinal(this.project.FullName, args.FullPath) == 0)
               {
                  this.StateImageKey = GetStateImageKey();
               }
               else
               {
                  projectItemTreeNode.StateImageKey = GetStateImageKey();
               }
               break;
         }
      }
   }
} 
```

我们是否缺少某些东西，或者这是 .NET3.5 SP1 的异常情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-16T14:52:27.397

只是一个想法......这里有没有可能出现死锁问题？

您正在调用 TreeView.Invoke，这是一个阻塞调用。如果在您单击导致 FileSystemWatcher.Dispose() 调用的任何按钮时发生文件系统更改，则您的 FileWatcherFileChanged 方法将在后台线程上调用并调用 TreeView.Invoke，这将阻塞直到您的表单线程可以处理 Invoke 请求. 但是，您的表单线程将调用 FileSystemWatcher.Dispose()，在处理完所有待处理的更改请求之前，它可能不会返回。

尝试将 .Invoke 更改为 .BeginInvoke 并查看是否有帮助。这可能有助于为您指明正确的方向。

当然，它也可能是 .NET 3.5SP1 问题。我只是根据您提供的代码在这里推测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-30T16:42:07.387

Scott，我们偶尔会在 .NET 2 中看到 control.Invoke 的问题。尝试切换到 control.BeginInvoke 看看是否有帮助。

这样做将允许 FileSystemWatcher 线程立即返回。我怀疑您的问题是 control.Invoke 被阻塞，从而导致 FileSystemWatcher 在处置时冻结。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T22:33:35.733

我们也有这个问题。我们的应用程序在 .Net 2.0 上运行，但由 VS 2008 SP1 编译。我也安装了 .NET 3.5 SP1。我也不知道为什么会发生这种情况，这看起来不像是死锁问题，因为此时没有其他线程正在运行（它是在应用程序关闭期间）。

# c++ - 此 C++ 代码是否会导致内存泄漏（将数组转换为新的）

> ID：73134
> 
> 赞同：10
> 
> 时间：2008-09-16T14:47:22.913
> 
> 标签：c++, memory-management, memory-leaks

我一直在研究一些使用可变长度结构 (TAPI) 的遗留 C++ 代码，其中结构大小将取决于可变长度字符串。这些结构是通过转换数组分配的，`new`因此：

```
STRUCT* pStruct = (STRUCT*)new BYTE[sizeof(STRUCT) + nPaddingSize]; 
```

但是稍后使用`delete`调用释放内存：

```
delete pStruct; 
```

`new[]`数组和非数组的这种混合`delete`会导致内存泄漏还是取决于编译器？`malloc`更改此代码以使用它会更好`free`吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-16T14:50:18.320

从技术上讲，我相信它可能会导致分配器不匹配的问题，尽管在实践中我不知道任何编译器不会对这个例子做正确的事情。

更重要的是，如果`STRUCT`在哪里有（或曾经给出）一个析构函数，那么它将调用析构函数而不调用相应的构造函数。

当然，如果您知道 pStruct 的来源，为什么不直接将其强制删除以匹配分配：

```
delete [] (BYTE*) pStruct; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T15:39:51.323

我个人认为你最好用它`std::vector`来管理你的记忆，所以你不需要`delete`.

```
std::vector<BYTE> backing(sizeof(STRUCT) + nPaddingSize);
STRUCT* pStruct = (STRUCT*)(&backing[0]); 
```

一旦支持离开范围，您`pStruct`的就不再有效。

或者，您可以使用：

```
boost::scoped_array<BYTE> backing(new BYTE[sizeof(STRUCT) + nPaddingSize]);
STRUCT* pStruct = (STRUCT*)backing.get(); 
```

或者`boost::shared_array`，如果您需要转移所有权。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-16T14:52:55.320

代码的行为是未定义的。您可能很幸运（或没有），它可能适用于您的编译器，但实际上这不是正确的代码。它有两个问题：

1.  `delete`应该是一个`delete []`数组。
2.  `delete`应该在指向与分配的类型相同类型的指针上调用。

所以要完全正确，你想做这样的事情：

```
delete [] (BYTE*)(pStruct); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-16T15:00:47.110

是的，它会导致内存泄漏。

除了 C++ Gotchas 之外，请参见：[http://www.informit.com/articles/article.aspx?p=30642](http://www.informit.com/articles/article.aspx?p=30642)为什么。

Raymond Chen 解释了矢量`new`和`delete`与 Microsoft 编译器背后的标量版本有何不同...这里： [http://blogs.msdn.com/oldnewthing/archive/2004/02/03/66660.aspx](http://blogs.msdn.com/oldnewthing/archive/2004/02/03/66660.aspx)

恕我直言，您应该将删除修复为：

```
delete [] pStruct; 
```

而不是切换到`malloc`/ `free`，如果只是因为它是一个更简单的更改而不会出错；）

而且，当然，由于原始分配中的转换，我上面显示的更简单的更改是错误的，它应该是

```
delete [] reinterpret_cast<BYTE *>(pStruct); 
```

所以，我想它可能很容易切换到`malloc`/`free`毕竟;）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-16T15:14:07.810

C++ 标准明确规定：

```
delete-expression:
             ::opt delete cast-expression
             ::opt delete [ ] cast-expression 
```

> 第一种选择用于非数组对象，第二种选择用于数组。操作数应具有指针类型，或具有单个转换函数（12.3.2）到指针类型的类类型。结果类型为 void。
> 
> 在第一种选择（删除对象）中，删除操作数的值应是指向非数组对象的指针 [...] 如果不是，则行为未定义。

in 操作数的值`delete pStruct`是指向 的数组的指针`char`，与它的静态类型 ( `STRUCT*`) 无关。因此，任何关于内存泄漏的讨论都是毫无意义的，因为代码格式不正确，并且在这种情况下不需要 C++ 编译器来生成合理的可执行文件。

它可能会泄漏内存，也可能不会，或者它可能会做任何事情导致系统崩溃。实际上，我用来测试您的代码的 C++ 实现会在删除表达式处中止程序执行。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-16T16:27:35.903

正如其他帖子中强调的那样：

1) 调用 new/delete 分配内存并可能调用构造函数/析构函数 (C++ '03 5.3.4/5.3.5)

2) 混合数组/非数组版本`new`和`delete`是未定义的行为。(C++ '03 5.3.5/4)

查看源代码，似乎有人对 and 进行了搜索和替换，`malloc`以上`free`是结果。C++ 确实可以直接替换这些函数，即直接调用分配函数 for`new`和`delete`：

```
STRUCT* pStruct = (STRUCT*)::operator new (sizeof(STRUCT) + nPaddingSize);
// ...
pStruct->~STRUCT ();  // Call STRUCT destructor
::operator delete (pStruct); 
```

如果应该调用 STRUCT 的构造函数，那么您可以考虑分配内存然后使用放置`new`：

```
BYTE * pByteData = new BYTE[sizeof(STRUCT) + nPaddingSize];
STRUCT * pStruct = new (pByteData) STRUCT ();
// ...
pStruct->~STRUCT ();
delete[] pByteData; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-16T16:20:14.643

如果你*真的*必须做这种事情，你应该`new`直接打电话给运营商：

```
STRUCT* pStruct = operator new(sizeof(STRUCT) + nPaddingSize); 
```

我相信以这种方式调用它可以避免调用构造函数/析构函数。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-17T16:27:25.693

@eric - 感谢您的评论。你一直在说些什么，这让我抓狂：

> 这些运行时库以独立于操作系统的一致语法处理对操作系统的内存管理调用，并且这些运行时库负责使 malloc 和 new 工作在 Linux、Windows、Solaris、AIX 等操作系统之间保持一致...... .

这不是真的。例如，编译器编写器提供了 std 库的实现，它们完全可以自由地以**依赖**于操作系统的方式实现这些库。例如，他们可以自由地对 malloc 进行一次巨大的调用，然后按照他们的意愿管理块内的内存。

提供兼容性是因为 std 等的 API 是相同的——而不是因为运行时库都转过来并调用完全相同的操作系统调用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-20T15:19:08.647

关键字 new 和 delete 的各种可能用途似乎造成了相当大的混乱。在 C++ 中构造动态对象总是有两个阶段：原始内存的分配和在分配的内存区域中构造新对象。在对象生命周期的另一边是对象的销毁和对象所在的内存位置的释放。

这两个步骤通常由单个 C++ 语句执行。

```
MyObject* ObjPtr = new MyObject;

//...

delete MyObject; 
```

除了上述之外，您还可以使用 C++ 原始内存分配函数`operator new`和`operator delete`显式构造（通过放置`new`）和销毁来执行等效步骤。

```
void* MemoryPtr = ::operator new( sizeof(MyObject) );
MyObject* ObjPtr = new (MemoryPtr) MyObject;

// ...

ObjPtr->~MyObject();
::operator delete( MemoryPtr ); 
```

请注意如何不涉及强制转换，并且在分配的内存区域中只构造了一种类型的对象。使用类似`new char[N]`的方法来分配原始内存在技术上是不正确的，因为从逻辑上讲，`char`对象是在新分配的内存中创建的。我不知道在任何情况下它不能“正常工作”，但它模糊了原始内存分配和对象创建之间的区别，所以我建议不要这样做。

在这种特殊情况下，分离出两个步骤没有任何好处，`delete`但您确实需要手动控制初始分配。上面的代码在“一切正常”的情况下工作，但在构造函数`MyObject`抛出异常的情况下会泄漏原始内存。虽然这可以在分配点通过异常处理程序捕获和解决，但提供自定义运算符 new 可能更简洁，以便可以通过放置 new 表达式处理完整的构造。

```
class MyObject
{
    void* operator new( std::size_t rqsize, std::size_t padding )
    {
        return ::operator new( rqsize + padding );
    }

    // Usual (non-placement) delete
    // We need to define this as our placement operator delete
    // function happens to have one of the allowed signatures for
    // a non-placement operator delete
    void operator delete( void* p )
    {
        ::operator delete( p );
    }

    // Placement operator delete
    void operator delete( void* p, std::size_t )
    {
        ::operator delete( p );
    }
}; 
```

这里有几个微妙的点。我们定义了一个新的类放置，以便我们可以为类实例分配足够的内存以及一些用户可指定的填充。因为我们这样做，所以我们需要提供匹配的放置删除，以便如果内存分配成功但构造失败，分配的内存会自动释放。不幸的是，我们的展示位置删除的签名与非展示位置删除的两个允许签名之一匹配，因此我们需要提供另一种形式的非展示位置删除，以便我们真正的展示位置删除被视为展示位置删除。（我们可以通过在placement new 和placement delete 中添加一个额外的虚拟参数来解决这个问题，但这需要在所有调用站点上进行额外的工作。）

```
// Called in one step like so:
MyObject* ObjectPtr = new (padding) MyObject; 
```

使用单个新表达式，我们现在可以保证如果新表达式的任何部分抛出，内存不会泄漏。

在对象生命周期的另一端，因为我们定义了operator delete（即使我们没有，对象的内存无论如何最初来自全局operator new），下面是销毁动态创建的对象的正确方法.

```
delete ObjectPtr; 
```

概括！

1.  看没有演员表！`operator new`并且`operator delete`处理原始内存，placement new 可以在原始内存中构造对象。从 a`void*`到对象指针的显式转换通常是逻辑错误的标志，即使它确实“正常工作”。

2.  我们完全忽略了 new[] 和 delete[]。这些可变大小的对象在任何情况下都不会在数组中工作。

3.  放置 new 允许新表达式不泄漏，新表达式仍计算为指向需要销毁的对象和需要解除分配的内存的指针。使用某种类型的智能指针可能有助于防止其他类型的泄漏。从好的方面来说，我们让 plain`delete`成为正确的方法，所以大多数标准智能指针都可以工作。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-16T16:27:07.573

我目前无法投票，但[slicedlime 的回答](https://stackoverflow.com/questions/73134/will-this-c-code-cause-a-memory-leak-casting-vector-new#73201)比[Rob Walker 的](https://stackoverflow.com/questions/73134/will-this-c-code-cause-a-memory-leak-casting-vector-new#73163)回答更可取，因为这个问题与分配器或 STRUCT 是否有析构函数无关。

另请注意，示例代码不一定会导致内存泄漏 - 这是未定义的行为。几乎任何事情都可能发生（从没什么坏事到很远很远的崩溃）。

示例代码导致未定义的行为，简单明了。slicedlime 的答案是直接的和重点的（需要注意的是，“向量”这个词应该改为“数组”，因为向量是 STL 的东西）。

C++ FAQ（第 16.12、16.13 和 16.14 节）很好地涵盖了这类内容：

[http://www.parashift.com/c++-faq-lite/freestore-mgmt.html#faq-16.12](http://www.parashift.com/c++-faq-lite/freestore-mgmt.html#faq-16.12)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-16T16:47:48.647

您指的是数组删除（[]），而不是向量删除。向量是 std::vector，它负责删除其元素。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-16T14:49:41.537

是的，可能，因为您使用 new[] 进行分配但使用 delelte 取消分配，所以 malloc/free 在这里更安全，但在 c++ 中您不应该使用它们，因为它们不会处理（de）构造函数。

此外，您的代码将调用解构函数，但不会调用构造函数。对于某些结构，这可能会导致内存泄漏（如果构造函数分配了更多内存，例如为字符串）

最好是正确地做到这一点，因为这也将正确地调用任何构造函数和解构函数

```
STRUCT* pStruct = new STRUCT;
...
delete pStruct; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T14:52:16.023

您可以转换回 BYTE * 并删除：

```
delete[] (BYTE*)pStruct; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-16T14:54:50.760

尽可能平衡任何资源的获取/释放总是最好的。虽然在这种情况下很难说是否泄漏。这取决于编译器对向量（解除）分配的实现。

```
BYTE * pBytes = new BYTE [sizeof(STRUCT) + nPaddingSize];

STRUCT* pStruct = reinterpret_cast< STRUCT* > ( pBytes ) ;

 // do stuff with pStruct

delete [] pBytes ; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-16T14:55:21.570

你有点混合了 C 和 C++ 的做事方式。为什么分配超过 STRUCT 的大小？为什么不只是“新结构”？如果您必须这样做，那么在这种情况下使用 malloc 和 free 可能会更清楚，因为这样您或其他程序员可能不太可能对分配对象的类型和大小做出假设。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-16T15:04:23.343

Len：问题在于 pStruct 是一个 STRUCT*，但分配的内存实际上是一个未知大小的 BYTE[]。所以 delete[] pStruct 不会取消分配所有分配的内存。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-16T15:07:34.690

使用运算符 new 和 delete：

```
struct STRUCT
{
  void *operator new (size_t)
  {
    return new char [sizeof(STRUCT) + nPaddingSize];
  }

  void operator delete (void *memory)
  {
    delete [] reinterpret_cast <char *> (memory);
  }
};

void main()
{
  STRUCT *s = new STRUCT;
  delete s;
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-16T16:42:08.740

我认为没有内存泄漏。

```
STRUCT* pStruct = (STRUCT*)new BYTE [sizeof(STRUCT) + nPaddingSize]; 
```

这被翻译成操作系统内的内存分配调用，在该调用上返回指向该内存的指针。在分配内存时`sizeof(STRUCT)`，将知道 的大小和大小，`nPaddingSize`以便满足针对底层操作系统的任何内存分配请求。

因此分配的内存被“记录”在操作系统的全局内存分配表中。内存表由它们的指针索引。所以在相应的 delete 调用中，原来分配的所有内存都是空闲的。（内存碎片也是这个领域的一个热门话题）。

你看，C/C++ 编译器不管理内存，底层操作系统是。

我同意有更清洁的方法，但 OP 确实说这是遗留代码。

简而言之，我没有看到内存泄漏，因为公认的答案认为存在内存泄漏。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-17T03:23:01.973

@Matt Cruikshank您应该注意并再次阅读我写的内容，因为我从未建议不要调用 delete[] 而只是让操作系统清理。而且您对管理堆的 C++ 运行时库是错误的。如果是这样的话，那么 C++ 就不会像今天这样可移植，并且崩溃的应用程序永远不会被操作系统清理。（承认存在使 C/C++ 看起来不可移植的操作系统特定运行时）。我挑战你在 kernel.org 的 Linux 源代码中找到 stdlib.h。C++ 中的 new 关键字实际上与 malloc 使用相同的内存管理例程。

C++ 运行时库进行操作系统系统调用，并且是操作系统来管理堆。您部分正确，因为运行时库指示何时释放内存，但是它们实际上并不直接遍历任何堆表。换句话说，您链接的运行时不会将代码添加到您的应用程序以遍历堆以分配或解除分配。在 Windows、Linux、Solaris、AIX 等中就是这种情况……这也是您无法在任何 Linux 内核源代码中使用 malloc 或在 Linux 源代码中找不到 stdlib.h 的原因。了解这些现代操作系统具有使事情变得更加复杂的虚拟内存管理器。

有没有想过为什么你可以在一个 1G 的机器上调用 malloc 以获得 2G 的 RAM 并仍然得到一个有效的内存指针？

x86 处理器上的内存管理在内核空间内使用三个表进行管理。PAM（页面分配表）、PD（页面目录）和 PT（页面表）。这是我所说的硬件级别。操作系统内存管理器（而不是您的 C++ 应用程序）所做的一件事是在 BIOS 调用的帮助下找出在引导过程中在盒子上安装了多少物理内存。操作系统还处理异常，例如当您尝试访问您的应用程序没有权限的内存时。（GPF 一般保护故障）。

可能我们说的是同一件事，马特，但我认为您可能会有点混淆引擎盖下的功能。我用来维持一个 C/C++ 编译器为生...

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-09-17T14:42:15.337

@ericmayo - 绉纱。好吧，尝试使用 VS2005，我无法从由 vector new 生成的内存上的标量删除中得到诚实的泄漏。我猜编译器的行为在这里是“未定义的”，这是我能召集的最好的防御。

不过，您必须承认，按照原始海报所说的那样做是一种非常糟糕的做法。

> 如果是这样的话，那么 C++ 就不会像今天这样可移植，并且崩溃的应用程序永远不会被操作系统清理。

不过，这个逻辑并不真正成立。我的断言是编译器的运行时可以管理操作系统返回给它的内存块内的内存。这就是大多数虚拟机的工作方式，因此您在这种情况下反对可移植性的论点没有多大意义。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-17T15:16:15.600

@马特克鲁克香克

“嗯，用 VS2005 进行试验，我无法从向量 new 对内存进行的标量删除中得到诚实的泄漏。我猜编译器的行为在这里是“未定义的”，这是我能召集的最好的防御。”

我不同意这是编译器行为，甚至是编译器问题。正如您所指出的，“new”关键字被编译并链接到运行时库。这些运行时库以独立于操作系统的一致语法处理对操作系统的内存管理调用，并且这些运行时库负责使 malloc 和 new 工作在 Linux、Windows、Solaris、AIX 等操作系统之间保持一致...... . 这就是我提到可移植性论点的原因；试图向您证明运行时实际上也不管理内存。

操作系统管理内存。

操作系统的运行时库接口。在 Windows 上，这是虚拟内存管理器 DLL。这就是为什么 stdlib.h 在 GLIB-C 库而不是 Linux 内核源代码中实现的原因；如果在其他操作系统上使用 GLIB-C，它会执行 malloc 更改以进行正确的操作系统调用。在 VS、Borland 等中，您永远也找不到任何随其编译器一起提供的库，它们实际上也管理内存。但是，您将找到 malloc 的操作系统特定定义。

由于我们有 Linux 的源代码，你可以去看看 malloc 是如何在那里实现的。您会看到 malloc 实际上是在 GCC 编译器中实现的，而 GCC 编译器基本上会在内核中进行两次 Linux 系统调用来分配内存。从来没有，malloc 本身，实际上管理内存！

不要从我这里拿走它。阅读 Linux 操作系统的源代码，或者您可以查看 K&R 对此的评价...这是 C 上 K&R 的 PDF 链接。

[http://www.oberon2005.ru/paper/kr_c.pdf](http://www.oberon2005.ru/paper/kr_c.pdf)

请参见第 149 页的近尾：“对 malloc 和 free 的调用可能以任何顺序发生；malloc 会根据需要调用操作系统以获取更多内存。这些例程说明了以相对机器无关的方式编写与机器相关的代码所涉及的一些注意事项方式，还展示了结构、联合和 typedef 的实际应用。”

“不过你必须承认，按照原版海报所说的那样做是一种非常糟糕的做法。”

哦，我不反对。我的观点是原始海报的代码不利于内存泄漏。这就是我所说的。我没有在最佳实践方面发表意见。由于代码正在调用删除，因此内存正在释放。

我同意，在您的辩护中，如果原始发布者的代码从未退出或从未进入删除调用，则该代码可能存在内存泄漏，但因为他声明稍后他看到删除被调用。“但后来使用删除调用释放了内存：”

此外，我做出回应的原因是由于 OP 的评论“可变长度结构 (TAPI)，其中结构大小将取决于可变长度字符串”

这个评论听起来像是他在质疑分配的动态性质，而不是正在进行的演员表，因此想知道这是否会导致内存泄漏。如果您愿意的话，我正在字里行间阅读；）。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-17T15:29:45.393

除了上面的优秀答案，我还想补充一下：

如果您的代码在 linux 上运行，或者您可以在 linux 上编译它，那么我建议您通过[Valgrind](http://valgrind.org/)运行它。它是一个出色的工具，在它产生的无数有用警告中，它还会告诉您何时将内存分配为数组，然后将其作为非数组释放（反之亦然）。

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2008-09-16T14:54:13.757

Rob Walker的[回答](https://stackoverflow.com/questions/73134/will-this-c-code-cause-a-memory-leak-casting-vector-new#73163)很好。

只是一个小补充，如果你没有任何构造函数或/和析构函数，所以你基本上需要分配和释放一块原始内存，考虑使用 free/malloc 对。

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2008-09-16T19:20:54.550

ericmayo.myopenid.com 大错特错，以至于有足够声誉的人应该对他投反对票。

C 或 C++ 运行时库正在管理由操作系统以块的形式提供给它的堆，有点像你所说的，Eric。但是开发人员*有*责任向编译器指示应该进行哪些运行时调用以释放内存，并可能破坏那里的对象。在这种情况下，向量删除（又名 delete[]）是必要的，以便 C++ 运行时使堆处于有效状态。当 PROCESS 终止时，操作系统足够智能以释放底层内存块这一事实不是开发人员应该依赖的。这就像根本不调用 delete 一样。

# flash - 在多个版本的 Flash 播放器之间切换以便于测试的最佳方式是什么？

> ID：73159
> 
> 赞同：6
> 
> 时间：2008-09-16T14:49:50.117
> 
> 标签：flash, browser

是否有任何实用程序或浏览器插件可以让您轻松切换正在使用的 Flash 播放器的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T14:55:13.223

For Firefox 3.x on Window XP, Ubutntu Linux, and Mac OS X (Tiger and Leopard), [Flash Switcher](http://www.sephiroth.it/firefox/flash_switcher/) works well.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-04-19T22:41:26.860

对于跨浏览器、跨平台的解决方案，您可以使用以下 python 脚本：

[http://www.mattshaw.org/projects/flash-plugin-switcher/](http://www.mattshaw.org/projects/flash-plugin-switcher/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T14:51:22.937

找到以下内容：[http ://www.google.be/search?q=firefox%20switch%20flash%20version](http://www.google.be/search?q=firefox%20switch%20flash%20version)

[http://www.sephiroth.it/weblog/archives/2006/10/flash_switcher_for_firefox.php](http://www.sephiroth.it/weblog/archives/2006/10/flash_switcher_for_firefox.php)（看起来不错）

[http://www.communitymx.com/content/article.cfm?page=2&cid=6FBA7](http://www.communitymx.com/content/article.cfm?page=2&cid=6FBA7)（似乎也很好地集成了）

[https://addons.mozilla.org/nl/firefox/addon/5044](https://addons.mozilla.org/nl/firefox/addon/5044)（来自mozilla.org，一定不错：p）

# windows - 当新消息到达时，如何让任务栏像 Messenger 一样闪烁我的应用程序？

> ID：73162
> 
> 赞同：20
> 
> 时间：2008-09-16T14:50:05.200
> 
> 标签：windows, winapi

当响应来自与我聊天的人时，我是否可以使用 .NET 中的 API 调用或本机 DLL 创建与 Windows Live Messenger 类似的行为？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-09-16T15:10:14.670

FlashWindowEx 是要走的路。[有关MSDN 文档，](http://msdn.microsoft.com/en-us/library/ms679347%28VS.85%29.aspx)请参见此处

```
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool FlashWindowEx(ref FLASHWINFO pwfi);

[StructLayout(LayoutKind.Sequential)]
public struct FLASHWINFO
{
    public UInt32 cbSize;
    public IntPtr hwnd;
    public UInt32 dwFlags;
    public UInt32 uCount;
    public UInt32 dwTimeout;
}

public const UInt32 FLASHW_ALL = 3; 
```

调用函数：

```
FLASHWINFO fInfo = new FLASHWINFO();

fInfo.cbSize = Convert.ToUInt32(Marshal.SizeOf(fInfo));
fInfo.hwnd = hWnd;
fInfo.dwFlags = FLASHW_ALL;
fInfo.uCount = UInt32.MaxValue;
fInfo.dwTimeout = 0;

FlashWindowEx(ref fInfo); 
```

这是从[Pinvoke.net无耻地插入的](http://pinvoke.net/default.aspx/user32/FlashWindowEx.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-16T14:53:41.543

```
HWND hHandle = FindWindow(NULL,"YourApplicationName");
FLASHWINFO pf;
pf.cbSize = sizeof(FLASHWINFO);
pf.hwnd = hHandle;
pf.dwFlags = FLASHW_TIMER|FLASHW_TRAY; // (or FLASHW_ALL to flash and if it is not minimized)
pf.uCount = 8;
pf.dwTimeout = 75;

FlashWindowEx(&pf); 
```

从专家交流成员 gtokas 那里偷来的。

[FlashWindowEx](http://msdn.microsoft.com/en-us/library/ms679347%28VS.85%29.aspx)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-16T14:59:56.457

来自 Raymond Chen 的博客文章：

> **[如何手动闪烁我的窗口标题和任务栏按钮？](http://blogs.msdn.com/oldnewthing/archive/2008/05/12/8490184.aspx)**
> 
> 如何手动闪烁我的窗口标题和任务栏按钮？评论者 Jonathan Scheepers 想知道这些程序会无限期地闪烁其任务栏按钮，从而覆盖由 SysteParametersInfo(SPI_SETFOREGROUNDFLASHCOUNT) 设置的默认闪烁计数。
> 
> FlashWindowEx 函数及其更简单的前身 FlashWindow 让程序可以手动闪烁其窗口标题和任务栏按钮。如果程序在没有获取前景的权限时调用 SetForegroundWindow，窗口管理器会自动闪烁标题（并且资源管理器通过闪烁任务栏按钮跟随标题），并且 SPI_SETFOREGROUNDFLASHCOUNT 设置控制的是自动闪烁。
> 
> 出于说明目的，我将演示手动闪烁标题。这一般来说是不推荐的，但是既然你问了，我会告诉你怎么做的。然后保证你不会这样做。
> 
> 从scratch 程序开始，做这个简单的改变：
> 
> ```
> void
> OnSize(HWND hwnd, UINT state, int cx, int cy)
> {
>   if (state == SIZE_MINIMIZED) {
>     FLASHWINFO fwi = { sizeof(fwi), hwnd,
>                        FLASHW_TIMERNOFG | FLASHW_ALL };
>     FlashWindowEx(&fwi);
>   }
> } 
> ```
> 
> 编译并运行该程序，然后将其最小化。当您这样做时，它的任务栏按钮会无限期地闪烁，直到您单击它为止。程序通过调用 FlashWindowEx 函数来响应最小化，该函数要求闪烁所有可能的内容（当前是标题和任务栏按钮），直到窗口出现在前台。
> 
> FLASHWINFO 结构的其他成员可让您进一步自定义闪烁行为，例如控制闪烁频率和闪烁次数。如果你真的想控制，你可以使用 FLASHW_ALL 和 FLASHW_STOP 完全按照你想要的方式打开和关闭你的标题和任务栏按钮。（谁知道呢，也许你想用摩尔斯电码发送消息。）
> 
> 由 oldnewthing 于 2008 年 5 月 12 日星期一上午 7:00 发布 归档于：代码

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T14:53:09.313

FlashWindowEx Win32 API 是用于执行此操作的调用。它的文档位于：http: [//msdn.microsoft.com/en-us/library/ms679347 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms679347(VS.85).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T14:53:43.960

我相信你正在寻找[`SetForegroundWindow`](http://msdn.microsoft.com/en-us/library/ms633539.aspx).

# html - 将 HTML 表保存到数据库

> ID：73168
> 
> 赞同：3
> 
> 时间：2008-09-16T14:50:50.690
> 
> 标签：html, screen-scraping

我正在尝试抓取一个 html 表并将其数据保存在数据库中。您发现哪些策略/解决方案有助于实现该计划。

我对 Java 和 PHP 最满意，但任何语言的解决方案都会有所帮助。

编辑：有关更多详细信息，UTA（盐湖城公交系统）在其网站上提供了公交时刻表。每个时刻表都显示在一个表格中，该表格在标题中包含车站，在行中包含出发时间。我想通过时间表并将信息以我可以查询的形式保存在表中。

这是时间表的[起点](http://www.rideuta.com/ridingUTA/schedules/routeSchedules.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T14:54:04.647

有一本关于这个主题的好书：[Kevin Hemenway 和 Tara Calishain 的 Spidering Hacks](http://oreilly.com/catalog/9780596005771/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T14:54:08.687

这完全取决于您的 HTML 抓取的正确程度？如果它是有效的 XHTML，您可以简单地对其使用一些 XPath 查询来获得您想要的任何东西。

php 中的 xpath 示例：http: [//blogoscoped.com/archive/2004_06_23_index.html#108802750834787821](http://blogoscoped.com/archive/2004_06_23_index.html#108802750834787821)

将表格刮入数组的辅助类：[http ://www.tgreer.com/class_http_php.html](http://www.tgreer.com/class_http_php.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T14:55:36.217

我发现脚本语言通常更适合执行此类任务。我个人更喜欢 Python，但 PHP 也可以。在 Java 中切碎、切碎和解析字符串实在是太麻烦了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T14:54:08.843

我之前尝试过屏幕抓取，但我发现它非常脆弱，尤其是动态生成的代码。我找到了一个第三方 DOM 解析器，并使用它通过类似正则表达式的匹配模式来导航源代码，以便找到我需要的数据。

我建议尝试找出该站点的所有者是否有已发布的 API（通常是 Web 服务）来从他们的系统中检索数据。如果没有，那么祝你好运。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T15:02:57.387

这对于 Perl 和以下 CPAN 模块来说是迄今为止最简单的：

*   [http://metacpan.org/pod/HTML::Parser](http://metacpan.org/pod/HTML::Parser)
*   [http://metacpan.org/pod/LWP](http://metacpan.org/pod/LWP)
*   [http://metacpan.org/pod/DBD/mysql](http://metacpan.org/pod/DBD/mysql)
*   [http://metacpan.org/pod/DBI.pm](http://metacpan.org/pod/DBI.pm)

CPAN 是 Perl 模块的主要分发机制，可通过运行以下 shell 命令访问，例如：

`# cpan HTML::Parser`

如果你在 Windows 上，事情会更有趣，但你仍然可以这样做：[http ://www.perlmonks.org/?node_id=583586](http://www.perlmonks.org/?node_id=583586)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T15:22:37.247

钢琴黑客忽略了[HTML::TableExtract](http://metacpan.org/pod/HTML::TableExtract)模块，该模块正是为这类事情而设计的。您仍然需要[LWP](http://metacpan.org/pod/LWP)来检索表。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-11T01:20:47.280

如果你想要的是一个 csv 表的表格，那么你可以使用这个：使用 python：

例如，假设您想从以下网站以 csv 格式抓取外汇报价：[fxoanda](http://www.oanda.com/convert/fxhistory?date_fmt=us&date=11/10/08&date1=01/01/08&exch=USD&exch2=USD&expr=AUD&expr2=AUD&lang=en&margin_fixed=0&format=CSV&redirected=1)

然后...

```
from BeautifulSoup import BeautifulSoup
import urllib,string,csv,sys,os
from string import replace

date_s = '&date1=01/01/08'
date_f = '&date=11/10/08'
fx_url = 'http://www.oanda.com/convert/fxhistory?date_fmt=us'
fx_url_end = '&lang=en&margin_fixed=0&format=CSV&redirected=1'
cur1,cur2 = 'USD','AUD'
fx_url = fx_url + date_f + date_s + '&exch=' + cur1 +'&exch2=' + cur1
fx_url = fx_url +'&expr=' + cur2 +  '&expr2=' + cur2 + fx_url_end
data = urllib.urlopen(fx_url).read()
soup = BeautifulSoup(data)
data = str(soup.findAll('pre', limit=1))
data = replace(data,'[<pre>','')
data = replace(data,'</pre>]','')
file_location = '/Users/location_edit_this'
file_name = file_location + 'usd_aus.csv'
file = open(file_name,"w")
file.write(data)
file.close() 
```

一旦以这种形式获得它，您就可以将数据转换为您喜欢的任何形式。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-01-31T12:30:26.427

冒着在 SO 上引发混乱的风险，我建议如果表格的格式永远不会改变，你可以使用正则表达式来解析和捕获你需要的内容。

# user-interface - 如何为黑莓应用程序创建自定义字体

> ID：73187
> 
> 赞同：3
> 
> 时间：2008-09-16T14:52:14.823
> 
> 标签：user-interface, blackberry, fonts

我想为 Blackberry 应用程序使用特定的外语字体。这种字体是如何创建并加载到黑莓设备上的？

例如：ਪੰਜਾਬੀ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-04-03T02:38:56.587

对于 Blackberry OS 5 或更高版本，您可以使用类[FontFamily](http://docs.blackberry.com/en/developers/deliverables/11958/Load_and_use_a_custom_font_899948_11.jsp)将自定义字体加载到应用程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T17:50:12.243

[一个快速的谷歌搜索显示，在黑莓论坛上](http://www.blackberryforums.com/developer-forum/100107-using-custom-fonts.html)也有人问过同样的问题。

他们提出的解决方案是一个从[fnt 文件](http://www.fileinfo.net/extension/fnt)加载字体的类。

有一些[程序可](http://www.google.com/search?hl=en&q=free+.fnt+editor&btnG=Search)用于导入和编辑 fnt 文件。

# language-agnostic - 收听多播对我有什么伤害？

> ID：73194
> 
> 赞同：2
> 
> 时间：2008-09-16T14:52:28.987
> 
> 标签：language-agnostic, networking, network-programming, udp, boost-asio

我收到了来自交易所的恢复提要，用于恢复其主要提要中丢失的数据。

交易所**强烈**建议仅在需要数据时收听恢复提要，并在我恢复所需数据后离开多播。

我的问题是，如果我使用的是 asio，并且在不需要时不从 NIC 读取，有什么害处？这些消息有序列号，所以我不会意外处理卡上“留下”的旧消息。

这真的会损害我的应用程序吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T14:57:58.897

It's likely **not** harming your application so much as harming your machine - since the nic is still configured into the multicast group, it's still listening to those messages and passing them up, before your software ignores them and they get discarded. That's a lot of extra work that your network stack and kernel are doing, and therefore a lot of extra load on the machine in general, not just your app.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-16T18:51:59.597

收听您的恢复源也可能对网络级别产生潜在影响。正如 pjz 提到的，您的 NIC 和 IP 堆栈将有更多的帧/数据包要处理。此外，更多的可用带宽被应用程序未使用的数据所占用；如果您的链接出现拥塞，这可能会导致丢帧。是否可能发生拥塞取决于您的服务器是 100Mb 还是 1Gb 连接，您的主机正在发送/接收多少其他流量等。

另一个潜在的问题是对其他主机的影响。如果您的主机所连接的交换机未启用[IGMP 侦听](http://en.wikipedia.org/wiki/IGMP_snooping)，则同一 VLAN 上的所有主机都将收到额外的多播流量，这可能导致它们遇到与上述相同的问题。

如果您有一个网络团队为您管理您的网络，是否值得向他们寻求一些建议？如果您认为有必要订阅冗余订阅源，那么确定网络中已经存在的冗余级别以及主订阅源上的消息丢失的可能性似乎是谨慎的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-20T11:27:36.177

[muz](https://stackoverflow.com/users/6306/muz)评论的补充......

这不太可能对您的系统产生任何影响，但值得注意的是，与维护多播成员资格相关的开销（假设您使用的是 IGMP - 考虑到“离开多播”的限制，这可能是合理的)

IGMP 要求定期发送和处理多播组成员资格。并且（正如 muz 的评论中提到的）如果您和多播源之间有任何交换机或路由器能够进行 igmp 侦听，那么他们就能够禁用给定网络的多播。

# c# - 将 Linq to SQL 与存储过程一起使用时，char(1) 列是否必须作为 c# 字符返回？

> ID：73198
> 
> 赞同：1
> 
> 时间：2008-09-16T14:52:44.353
> 
> 标签：c#, .net, visual-studio, linq-to-sql

当使用 Linq to SQL 和存储过程时，为描述 proc 结果集而生成的类使用 char 属性来表示 SQL proc 中的 char(1) 列。我宁愿这些是字符串 - 有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T16:04:22.043

您可以修改 {database}.designer.cs 文件。我没有方便的检查，但我相信它相当简单 --- 你只需要翻阅大量代码，如果你重新生成它，请记住重新应用更改。

或者，您可以创建自己的类并在选择中处理它。例如，给定 LINQ 生成的类：

```
class MyTable
{      int MyNum {get; set;}
       int YourNum {get; set;}
       char OneChar {get; set;}
} 
```

您可以轻松创建：

```
class MyFixedTable
{      int MyNum {get; set;}
       int YourNum {get; set;}
       string OneChar {get; set;}
   public MyFixedTable(MyTable t)
   {
         this,MyNum = t.MyNum;
         this.YourNum = t.YourNum;
         this.OneChar = new string(t.OneChar, 1);
   }
} 
```

然后代替写：

```
var q = from t in db.MyTable
        select t; 
```

写

```
var q = from t in db.MyTable
        select new MyFixTable(t); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T15:49:27.367

```
var whatever =
    from x in something
    select new { yourString = Char.ToString(x.theChar); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-06T05:58:07.060

只需转到设计器窗口并将类型更改为字符串。我一直这样做，因为我发现在我的代码中字符串比字符更容易使用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-09-16T14:55:42.067

不知道你为什么要这样做。底层数据类型不能存储多个字符，通过将其表示为字符串变量，您需要在提交到数据库之前检查长度，如果您保持原样，您只需调用 ToString() char 获取字符串

# visual-studio-2008 - 如何从 Visual Studio 2008 Web 应用程序的 sourcesafe 中排除 bin 文件夹？

> ID：73212
> 
> 赞同：2
> 
> 时间：2008-09-16T14:53:55.007
> 
> 标签：visual-studio-2008, web-applications, visual-sourcesafe

如何在 Visual Studio 2008 Web 应用程序中从 SourceSafe 中排除 bin 文件夹？我希望能够从解决方案节点递归地签入所有内容，而无需在 bin 文件夹中获取任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T15:02:04.470

*   右键单击项目中的文件夹
*   选择“从项目中排除”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-15T10:10:38.573

是的，您可以从项目的源代码管理中排除文件。

例如（在 Visual Studio 中），如果您将 ConnectionStrings.config 文件添加到项目中，则在解决方案资源管理器中选择 ConnectionStrings.config 文件，然后从 File->Source Control 菜单中选择“Exclude ConnectionStrings.config from Source Control” . 现在，源代码管理将忽略您的文件，并且不会将其签入源代码管理。

注意：如果您在解决方案资源管理器中右键单击 ConnectionStrings.config 文件并为其调出上下文菜单，则会出现“从项目中排除”菜单项，这不是从源代码管理中排除的选项。所以不要混淆“从源代码管理中排除 ConnectionStrings.config”和“从项目中排除”；它们不是同一件事。“从源代码管理中排除 ConnectionStrings.config”只能在“文件”->“源代码管理”菜单中访问。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-10-31T16:13:21.757

您可以通过 Windows 资源管理器隐藏该文件夹，虽然它会从您的 Visual Studio 解决方案资源管理器中消失，但我认为这不会影响网站。

# c# - .NET Framework 中的 lambda 和委托有什么区别？

> ID：73227
> 
> 赞同：97
> 
> 时间：2008-09-16T14:55:05.500
> 
> 标签：c#, .net, lambda

我经常被问到这个问题，我想我会征求一些关于如何最好地描述差异的意见。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2008-09-16T15:50:00.690

它们实际上是两个非常不同的东西。“委托”实际上是保存对方法或 lambda 的引用的变量的名称，而 lambda 是没有永久名称的方法。

Lambda 与其他方法非常相似，除了一些细微的差别。

1.  普通方法在[“语句”](http://en.wikipedia.org/wiki/Statement_(programming))中定义并与永久名称相关联，而 lambda 在[“表达式”](http://en.wikipedia.org/wiki/Expression_(programming))中“动态”定义并且没有永久名称。
2.  一些 lambda 可以与 .NET 表达式树一起使用，而方法则不能。

委托定义如下：

```
delegate Int32 BinaryIntOp(Int32 x, Int32 y); 
```

BinaryIntOp 类型的变量可以分配一个方法或一个 labmda，只要签名相同：两个 Int32 参数和一个 Int32 返回。

一个 lambda 可以这样定义：

```
BinaryIntOp sumOfSquares = (a, b) => a*a + b*b; 
```

另一件需要注意的事情是，尽管泛型 Func 和 Action 类型通常被认为是“lambda 类型”，但它们就像任何其他委托一样。它们的好处是它们本质上为您可能需要的任何类型的委托定义了一个名称（最多 4 个参数，尽管您当然可以添加更多自己的参数）。因此，如果您使用多种委托类型，但不超过一次，您可以通过使用 Func 和 Action 避免代码与委托声明混淆。

下面是一个说明 Func 和 Action 如何“不仅仅适用于 lambdas”：

```
Int32 DiffOfSquares(Int32 x, Int32 y)
{
  return x*x - y*y;
}

Func<Int32, Int32, Int32> funcPtr = DiffOfSquares; 
```

另一件有用的事情是，具有相同签名但不同名称的委托类型（不是方法本身）不会被隐式转换为彼此。这包括 Func 和 Action 委托。但是，如果签名相同，您可以在它们之间显式转换。

加倍努力.... 在 C# 中，函数很灵活，可以使用 lambda 和委托。但是 C# 没有“一流的功能”。您可以使用分配给委托变量的函数名称来实质上创建一个表示该函数的对象。但这确实是一个编译器技巧。如果您通过编写函数名称后跟一个点来开始一个语句（即尝试对函数本身进行成员访问），您会发现那里没有可引用的成员。甚至不是来自 Object 的那些。这可以防止程序员做有用的（当然也可能是危险的）事情，例如添加可以在任何函数上调用的扩展方法。你能做的最好的就是扩展 Delegate 类本身，这当然也很有用，但没有那么多。

更新：另请参阅[Karg 的回答](https://stackoverflow.com/questions/73227/what-is-the-difference-between-lambdas-and-delegates-in-the-net-framework#73448)，说明匿名代表与方法和 lambda 之间的区别。

更新 2：[James Hart](https://stackoverflow.com/questions/73227/what-is-the-difference-between-lambdas-and-delegates-in-the-net-framework#74414)提出了一个重要但非常技术性的问题，请注意 lambda 和委托不是 .NET 实体（即 CLR 没有委托或 lambda 的概念），而是它们是框架和语言构造。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2008-09-16T16:48:18.990

这个问题有点模棱两可，这解释了你得到的答案的巨大差异。

您实际上问过 .NET 框架中的 lambda 和委托之间有什么区别；这可能是许多事情之一。你在问：

*   C#（或 VB.NET）语言中的 lambda 表达式和匿名委托有什么区别？

*   .NET 3.5 中的 System.Linq.Expressions.LambdaExpression 对象和 System.Delegate 对象有什么区别？

*   或者在这些极端之间或附近的某个地方？

有些人似乎试图为您提供“C# Lambda 表达式和 .NET System.Delegate 之间有什么区别？”这个问题的答案，这并没有多大意义。

.NET 框架本身并不理解匿名委托、lambda 表达式或闭包的概念——这些都是语言规范定义的东西。想一想 C# 编译器如何将匿名方法的定义转换为生成的类上的方法，其中包含成员变量以保持闭包状态；对于 .NET，委托没有任何匿名性；对于编写它的 C# 程序员来说，它只是匿名的。这同样适用于分配给委托类型的 lambda 表达式。

.NET*所*理解的是委托的概念 - 一种描述方法签名的类型，其实例表示对特定对象上特定方法的绑定调用，或对特定类型上可以调用的特定方法的未绑定调用该类型的任何对象，其中所述方法遵循所述签名。这些类型都继承自 System.Delegate。

.NET 3.5 还引入了 System.Linq.Expressions 命名空间，其中包含用于描述代码表达式的类，因此还可以表示对特定类型或对象的方法的绑定或非绑定调用。然后可以将 LambdaExpression 实例编译为实际的委托（由此对基于表达式结构的动态方法进行代码生成，并返回指向它的委托指针）。

在 C# 中，您可以通过将 lambda 表达式分配给所述类型的变量来生成 System.Expressions.Expression 类型的实例，这将生成适当的代码以在运行时构造表达式。

当然，如果你问 C# 中的 lambda 表达式和匿名方法之间*有*什么区别，那么所有这些都几乎无关紧要，在这种情况下，主要区别是简洁，当你不这样做时，它倾向于匿名委托t 关心参数并且不打算返回一个值，并且当你想要类型推断参数和返回类型时使用 lambdas。

并且 lambda 表达式支持表达式生成。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2008-09-16T15:16:59.053

一个区别是匿名委托可以省略参数，而 lambda 必须匹配确切的签名。鉴于：

```
public delegate string TestDelegate(int i);

public void Test(TestDelegate d)
{} 
```

您可以通过以下四种方式调用它（注意第二行有一个不带任何参数的匿名委托）：

```
Test(delegate(int i) { return String.Empty; });
Test(delegate { return String.Empty; });
Test(i => String.Empty);
Test(D);

private string D(int i)
{
    return String.Empty;
} 
```

您不能传入没有参数的 lambda 表达式或没有参数的方法。这些是不允许的：

```
Test(() => String.Empty); //Not allowed, lambda must match signature
Test(D2); //Not allowed, method must match signature

private string D2()
{
    return String.Empty;
} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-09-16T14:57:36.137

委托等价于函数指针/方法指针/回调（随你选择），而 lambda 是非常简化的匿名函数。至少我是这么告诉人们的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-16T14:57:09.147

我对此没有太多经验，但我描述它的方式是委托是任何函数的包装器，而 lambda 表达式本身就是一个匿名函数。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-16T15:07:32.773

委托基本上只是一个函数指针。一个 lambda 可以变成一个委托，但它也可以变成一个 LINQ 表达式树。例如，

```
Func<int, int> f = x => x + 1;
Expression<Func<int, int>> exprTree = x => x + 1; 
```

第一行产生一个委托，而第二行产生一个表达式树。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-16T14:58:30.097

lambda 只是委托的语法糖。编译器最终将 lambda 转换为委托。

这些都是一样的，我相信：

```
Delegate delegate = x => "hi!";
Delegate delegate = delegate(object x) { return "hi";}; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-16T15:02:51.490

委托是一个函数签名；就像是

```
delegate string MyDelegate(int param1); 
```

委托没有实现主体。

lambda 是一个与委托签名匹配的函数调用。对于上述委托，您可以使用任何一种；

```
(int i) => i.ToString();
(int i) => "ignored i";
(int i) => "Step " + i.ToString() + " of 10"; 
```

但是，该`Delegate`类型的名称很糟糕；创建一个类型的对象`Delegate`实际上会创建一个可以保存函数的变量——无论是 lambdas、静态方法还是类方法。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-16T16:34:16.183

委托是对具有特定参数列表和返回类型的方法的引用。它可能包含也可能不包含对象。

lambda 表达式是匿名函数的一种形式。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-16T16:36:13.323

一个委托是一个函数指针队列，调用一个委托可能会调用多个方法。lambda 本质上是一个匿名方法声明，编译器可能会对它进行不同的解释，具体取决于它用作什么上下文。

您可以通过将 lambda 表达式作为方法转换为委托来获取一个委托，或者如果将其作为参数传递给需要特定委托类型的方法，编译器将为您转换它。在 LINQ 语句中使用它，编译器会将 lambda 转换为表达式树，而不是简单的委托。

真正的区别在于 lambda 是在另一个表达式中定义方法的简洁方式，而委托是实际的对象类型。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-06-23T20:18:52.277

很明显，这个问题的意思是“lambdas 和**匿名**代表之间有什么区别？” 在这里的所有答案中，只有一个人做对了——主要区别在于 lambdas 可用于创建表达式树以及委托。

您可以在 MSDN 上阅读更多内容：http: [//msdn.microsoft.com/en-us/library/bb397687.aspx](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-16T15:10:26.323

委托实际上只是函数的结构类型。你可以用名义类型来做同样的事情，并实现一个实现接口或抽象类的匿名类，但是当只需要一个函数时，这最终会变成很多代码。

Lambda 源自 1930 年代 Alonzo Church 的 lambda 演算思想。它是一种创建函数的匿名方式。它们对于组合函数特别有用

因此，虽然有些人可能会说 lambda 是代表的语法糖，但我会说代表是让人们轻松进入 c# 中的 lambda 的桥梁。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-05-13T08:49:36.737

这里有一些基本的。“委托”实际上是保存对方法或 lambda 的引用的变量的名称

这是一种匿名方法 -

```
(string testString) => { Console.WriteLine(testString); }; 
```

由于匿名方法没有任何名称，我们需要一个委托，我们可以在其中分配这些方法或表达式。对于前。

```
delegate void PrintTestString(string testString); // declare a delegate

PrintTestString print = (string testString) => { Console.WriteLine(testString); }; 
print(); 
```

* * *

与 lambda 表达式相同。通常我们需要委托来使用它们

```
s => s.Age > someValue && s.Age < someValue    // will return true/false 
```

我们可以使用 func 委托来使用这个表达式。

```
Func< Student,bool> checkStudentAge = s => s.Age > someValue && s.Age < someValue ;

bool result = checkStudentAge ( Student Object); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-16T15:13:00.530

Lambda 是委托的简化版本。它们具有[闭包](http://en.wikipedia.org/wiki/Closure_(computer_science))的一些属性，例如匿名委托，但也允许您使用隐含类型。像这样的 lambda：

```
something.Sort((x, y) => return x.CompareTo(y)); 
```

比您可以对委托执行的操作要简洁得多：

```
something.Sort(sortMethod);
...

private int sortMethod(SomeType one, SomeType two)
{
    one.CompareTo(two)
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-16T16:12:25.970

这是我在我的蹩脚博客上放了一段时间的例子。假设您想从工作线程更新标签。我有 4 个示例，说明如何使用委托、匿名委托和 2 种类型的 lambda 将标签从 1 更新到 50。

```
 private void button2_Click(object sender, EventArgs e) 
     { 
         BackgroundWorker worker = new BackgroundWorker(); 
         worker.DoWork += new DoWorkEventHandler(worker_DoWork); 
         worker.RunWorkerAsync(); 
     } 

     private delegate void UpdateProgDelegate(int count); 
     private void UpdateText(int count) 
     { 
         if (this.lblTest.InvokeRequired) 
         { 
             UpdateProgDelegate updateCallBack = new UpdateProgDelegate(UpdateText); 
             this.Invoke(updateCallBack, new object[] { count }); 
         } 
         else 
         { 
             lblTest.Text = count.ToString(); 
         } 
     } 

     void worker_DoWork(object sender, DoWorkEventArgs e) 
     {   
         /* Old Skool delegate usage.  See above for delegate and method definitions */ 
         for (int i = 0; i < 50; i++) 
         { 
             UpdateText(i); 
             Thread.Sleep(50); 
         } 

         // Anonymous Method 
         for (int i = 0; i < 50; i++) 
         { 
             lblTest.Invoke((MethodInvoker)(delegate() 
             { 
                 lblTest.Text = i.ToString(); 
             })); 
             Thread.Sleep(50); 
         } 

         /* Lambda using the new Func delegate. This lets us take in an int and 
          * return a string.  The last parameter is the return type. so 
          * So Func<int, string, double> would take in an int and a string 
          * and return a double.  count is our int parameter.*/ 
         Func<int, string> UpdateProgress = (count) => lblTest.Text = count.ToString(); 
         for (int i = 0; i < 50; i++) 
         { 
             lblTest.Invoke(UpdateProgress, i); 
             Thread.Sleep(50); 
         } 

         /* Finally we have a totally inline Lambda using the Action delegate 
          * Action is more or less the same as Func but it returns void. We could 
          * use it with parameters if we wanted to like this: 
          * Action<string> UpdateProgress = (count) => lblT…*/ 
         for (int i = 0; i < 50; i++) 
         { 
             lblTest.Invoke((Action)(() => lblTest.Text = i.ToString())); 
             Thread.Sleep(50); 
         } 
     } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-11-21T11:10:31.423

*我假设您的问题涉及 c# 而不是 .NET，因为您的问题含糊不清，因为 .NET 并不孤单 - 也就是说，没有 c# - 对委托和 lambda 表达式的理解。*

一个（*正常*的，与所谓的*泛型*委托相反，*cf*稍后）委托应该被视为一种`typedef`函数指针类型的 c++，例如在 c++ 中：

```
R (*thefunctionpointer) ( T ) ; 
```

typedef 的类型`thefunctionpointer`，它是指向一个函数的指针类型，该函数接受一个类型的对象`T`并返回一个类型的对象`R`。你会像这样使用它：

```
thefunctionpointer = &thefunction ;
R r = (*thefunctionpointer) ( t ) ; // where t is of type T 
```

where`thefunction`将是一个接受 a`T`并返回a 的函数`R`。

在c#中你会去

```
delegate R thedelegate( T t ) ; // and yes, here the identifier t is needed 
```

你会像这样使用它：

```
thedelegate thedel = thefunction ;
R r = thedel ( t ) ; // where t is of type T 
```

where`thefunction`将是一个接受 a`T`并返回a 的函数`R`。这适用于代表，即所谓的普通代表。

现在，您在 c# 中也有泛型委托，它们是泛型委托，*即*可以说是“模板化”的委托，因此使用了一个 c++ 表达式。它们的定义如下：

```
public delegate TResult Func<in T, out TResult>(T arg); 
```

你可以像这样使用它们：

```
Func<double, double> thefunctor = thefunction2; // call it a functor because it is
                                                // really as a functor that you should
                                                // "see" it
double y = thefunctor(2.0); 
```

where`thefunction2`是一个作为参数并返回 a 的函数`double`。

现在想象一下，`thefunction2`我想使用一个现在没有定义的“函数”，而不是一个声明，我以后永远不会使用它。然后c#允许我们使用这个函数的*表达式*。表达我的意思是它的“数学”（或功能，坚持程序）表达，例如：`double x`我*将把*. `double` `x*x`在数学中，您使用["\mapsto" 乳胶符号](https://math.stackexchange.com/questions/651205/regarding-the-notation-f-a-mapsto-b)来编写它。在 c# 中，函数符号是借用的 : `=>`。例如 ：

```
Func<double, double> thefunctor = ( (double x) => x * x ); // outer brackets are not
                                                           // mandatory 
```

`(double x) => x * x`是一个[*表达式*](http://en.wikipedia.org/wiki/Expression_(computer_science))。它不是一种类型，而委托（通用或非通用）是。

道德？最后，什么是委托（分别是泛型委托），如果不是函数指针类型（分别是包装+智能+泛型函数指针类型），嗯？别的东西！看到[这个](http://blog.monstuff.com/archives/000037.html)[那个](http://msdn.microsoft.com/fr-fr/library/system.delegate%28v=vs.110%29.aspx)。_

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-04-19T18:45:40.313

**简洁版本：**

委托是一种表示对方法的引用的**类型。**C# **lambda**表达式是一种用于创建**委托**或**表达式树**的语法。

**有点长的版本：**

正如在接受的答案中所说，委托不是“变量的名称”。

委托是表示对方法 ( [docs.microsoft.com ) 的引用的](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/delegates/)**类型**（字面意思是类型，如果您检查 IL，它是一个类）。

[![在此处输入图像描述](https://i.stack.imgur.com/r0lPp.png)](https://i.stack.imgur.com/r0lPp.png)

可以启动此类型以将其实例与具有兼容签名和返回类型的任何方法相关联。

```
namespace System
{
    // define a type
    public delegate TResult Func<in T, out TResult>(T arg);
}

// method with the compatible signature
public static bool IsPositive(int int32)
{
    return int32 > 0;
}

// initiated and associate
Func<int, bool> isPositive = new Func<int, bool>(IsPositive); 
```

C# 2.0 引入了一种语法糖匿名方法，使方法能够被**内联**定义。

```
Func<int, bool> isPositive = delegate(int int32)
{
    return int32 > 0;
}; 
```

在 C# 3.0+ 中，上述匿名方法的内联定义可以进一步简化为 lambda 表达式

```
Func<int, bool> isPositive = (int int32) =>
{
    return int32 > 0;
}; 
```

C# **lambda**表达式是一种用于创建**委托**或**表达式树**的语法。我相信表达式树不是这个问题的主题（[Jamie King 关于表达式树](https://www.youtube.com/playlist?list=PLRwVmtr-pp06SlwcsqhreZ2byuozdnPlg)）。

更多可以在[这里](https://weblogs.asp.net/dixin/understanding-csharp-features-5-lambda-expression)找到。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2008-09-16T14:56:55.823

好吧，真正过于简化的版本是 lambda 只是匿名函数的简写。委托可以做的不仅仅是匿名函数：诸如事件、异步调用和多个方法链之类的事情。

# html - Firefox、保存的密码和更改密码对话框

> ID：73230
> 
> 赞同：3
> 
> 时间：2008-09-16T14:55:10.290
> 
> 标签：html, firefox

如果用户将密码保存在登录表单上，ff3 会将保存的密码放入个人资料页面上的更改密码对话框中，即使它与登录名的**输入名称不同。**我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T14:59:40.263

尝试使用 autocomplete="off" 作为文本框的属性。我过去曾使用它来阻止浏览器存储信用卡详细信息，但我不知道它是否适用于密码。例如`print("<input type="text" name="cc" autocomplete="off" />");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T15:00:19.013

我认为 FF 会根据字段的“名称”属性自动填充字段，因此如果密码框的名称 =“密码”并且更改密码框相同，它将在两个地方填写相同的密码。尝试更改其中一个框的名称属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T15:11:02.657

有些网站有 3 个输入用于更改密码，一个用于重新输入当前密码，两个用于输入新密码。如果重新输入输入是第一个并自动填充，那将不是问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-19T14:50:03.263

在您要修改的页面上进入工具->页面属性->安全性。

# project-management - 您对时间管理解决方案的选择是什么？

> ID：73260
> 
> 赞同：-2
> 
> 时间：2008-09-16T14:57:37.773
> 
> 标签：project-management, time

我遇到了一些不同的应用程序来监控我在计算机上的使用情况，但是你用过什么，喜欢什么？是在作文笔记本中写下您的活动，还是安装一个向服务器静默报告的应用程序？你喜欢什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-16T14:59:37.627

对于我使用[SlimTimer](http://slimtimer.com)的项目的明确时间跟踪。我还运行[RescueTime](http://www.rescuetime.com/)来隐式跟踪我的时间，但我最终不会经常查看这些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T15:00:12.743

我使用[neomem手动](http://www.neomem.org/)跟踪事物。这使我能够跟踪的不仅仅是时间。我经常记录与故事相关的笔记。这已经成为我经常搜索的知识集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-25T17:53:36.727

我使用纸质时间表来跟踪我的时间。它看起来像这样：

[![模拟仪表板](https://i.stack.imgur.com/pmoHc.png)](https://i.stack.imgur.com/pmoHc.png)
[（来源：[redbitbluebit.com](http://redbitbluebit.com/wp-content/uploads/2009/11/timesheet.png)）]

作为备份，我使用付费版本的优秀[TimeSnapper](http://timesnapper.com/)，以防我需要返回并追溯我错过跟踪时间的任何内容。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-09-16T15:01:38.653

我更喜欢用笔和纸写下时间。这样，如果您使用秒表或计时器记录它们，您就可以更公平地权衡可能会被错误计算的东西。

如果您开始做某事并且必须起床几分钟，如果您忘记停止或暂停计时器，计时器可能会将其计入您的工作时间。旧笔和纸将更准确地显示您将大部分时间和精力集中在哪些任务上……而不仅仅是您最早开始和最晚结束的任务。它可能不是 100% 准确的，但如果你没有正确使用它，计时器也不是。

我过去都用过，发现两者都有问题，但我更喜欢笔和纸的方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-09-16T15:05:36.303

我们使用[标准时间](http://www.stdtime.com/)作为时间跟踪工具，它有一个不错的快速任务窗口，相对较小，您可以轻松单击复选框在任务之间切换。您还可以为每个项目（开发、单元测试、文档等）创建要加载的项目/客户和预设任务，然后只需使用快速任务窗口来切换您当前正在处理的任务，而不会浪费太多时间通过一个完整的 GUI。

它并不便宜——大约 150 美元/用户——所以如果它是供个人使用的，它可能不是最好的选择，但如果你正在为开发人员团队寻找解决方案，那么我发现它非常适合。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2010-01-25T18:03:11.977

我在 Firefox 上使用时间跟踪器插件。它跟踪我一整天的冲浪时间

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2011-09-07T16:26:34.140

我已经使用[Toggl](http://www.toggl.com)大约一年了，我发现它是正确的。它使用简单，允许您根据各种标准执行基本报告。您可以手动输入时间条目或使用秒表计时器实用程序。

在选择 Toggl 之前，我尝试了几个应用程序。对我来说，Toggl 界面的直观性决定了它。我喜欢我的生产力应用程序不妨碍我，让我完成我的工作，而 Toggl 正是这样做的。

有多种定价计划，包括免费计划。

# c# - 在 Microsoft Visual Studio Tools for Office (VSTO) 3 (C#) 中传递参数的最佳实践

> ID：73261
> 
> 赞同：1
> 
> 时间：2008-09-16T14:57:38.087
> 
> 标签：c#, visual-studio-2008, vsto, officedev

许多与 VSTO 中的 Office 对象模型交互的参数都需要通过引用传递的对象参数，即使参数的名义类型是 int 或 string 也是如此。

1.  我想使用这种机制是为了让代码可以修改参数，尽管我不明白为什么这些需要作为通用对象而不是更合适的类型传递。任何人都可以启发我吗？
2.  我一直在使用的机制（取自帮助和 MSDN 资源）本质上创建了一个包含适当数据的通用对象，然后将其传递给方法，例如：

    object nextBookmarkName = "NextContent"; 对象 nextBookmark = this.Bookmarks.get_Item( ref nextBookmarkName ).Range;

    Microsoft.Office.Interop.Word.Range newRng = this.Range(ref nextBookmark, ref nextBookmark);

这似乎是很多额外的代码，但我看不到更好的方法。我确定我错过了一些东西；它是什么？或者这真的是最佳实践吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-03T03:36:12.163

我同意乔的观点。我什至开发了像这样的辅助结构和类：

```
internal struct Argument
{
    internal static object False = false;

    internal static object Missing = System.Type.Missing;

    internal static object True = true;
} 
```

和这个：

```
/// <summary>
/// Defines the "special characters"
/// in Microsoft Word that VSTO 1.x
/// translates into C# strings.
/// </summary>
internal struct Characters
{
    /// <summary>
    /// Word Table end-of-cell marker.
    /// </summary>
    /// <remarks>
    /// Word Table end-of-row markers are also
    /// equal to this value.
    /// </remarks>
    internal static string CellBreak = "\r\a";

    /// <summary>
    /// Word line break (^l).
    /// </summary>
    internal static string LineBreak = "\v";

    /// <summary>
    /// Word Paragraph break (^p).
    /// </summary>
    internal static string ParagraphBreak = "\r";
} 
```

还有一些...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T15:02:00.570

我也会对这个感兴趣。我正在编写几个在 Word 中使用自动化的应用程序，我什至有类似的东西

```
object oFalse = false, oTrue = true, oOne = 1; 
```

这是非常讨厌的，但这是我迄今为止所知道的唯一方法。

我唯一能想到的就是为常用函数编写一个包装类......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T17:41:56.490

我认为这只是原始 Word 对象模型的糟糕设计。我知道在 COM 世界中通过引用传递字符串可能会稍微快一些，因为它避免了复制的需要，所以这也许是理由的一部分。但缺点是被调用者可以修改值，并且在大多数情况下使用 Word 它们是输入参数。

我认为您的技术是最佳实践。对于许多 Word 对象模型方法所需的数百万个可选参数，您可以创建一个“缺少”的静态字段，例如：

对象丢失 = Type.Missing;

// 示例对象 fileName = ... document.SaveAs(ref fileName, ref 缺失, ref 缺失, ref 缺失, ref 缺失, ref 缺失, ref 缺失, ref 缺失, ref 缺失, ref 缺失, ref 缺失, ref 缺失, ref缺少，缺少参考，缺少参考，缺少参考）；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-02T08:31:07.353

我认为，所有这些都通过 VS.NET 2010 和 c# 4.0 中引入的新语言结构来处理（c# 将具有可选参数）。

有关与办公室开发相关的更改，请参阅频道 9 上 Anders Hejlberg 在 PDC 2008 上的视频。

我找不到该链接，但这也可能会有所帮助。
[http://channel9.msdn.com/shows/Going+Deep/Inside-C-40-dynamic-type-optional-parameters-more-COM-friendly/](http://channel9.msdn.com/shows/Going+Deep/Inside-C-40-dynamic-type-optional-parameters-more-COM-friendly/)

# c++ - Capturing cout in Visual Studio 2005 output window?

> ID：73286
> 
> 赞同：17
> 
> 时间：2008-09-16T14:59:50.980
> 
> 标签：c++, visual-studio, visual-c++-2005

I created a C++ console app and just want to capture the cout/cerr statements in the Output Window within the Visual Studio 2005 IDE. I'm sure this is just a setting that I'm missing. Can anyone point me in the right direction?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2011-05-22T08:22:04.470

我终于实现了这个，所以我想和你分享一下：

```
#include <vector>
#include <iostream>
#include <windows.h>
#include <boost/iostreams/stream.hpp>
#include <boost/iostreams/tee.hpp>

using namespace std;
namespace io = boost::iostreams;

struct DebugSink
{
    typedef char char_type;
    typedef io::sink_tag category;

    std::vector<char> _vec;

    std::streamsize write(const char *s, std::streamsize n)
    {
        _vec.assign(s, s+n);
        _vec.push_back(0); // we must null-terminate for WINAPI
        OutputDebugStringA(&_vec[0]);
        return n;
    }
};

int main()
{
    typedef io::tee_device<DebugSink, std::streambuf> TeeDevice;
    TeeDevice device(DebugSink(), *cout.rdbuf());
    io::stream_buffer<TeeDevice> buf(device);
    cout.rdbuf(&buf);

    cout << "hello world!\n";
    cout.flush(); // you may need to flush in some circumstances
} 
```

**额外提示：**如果你写：

```
X:\full\file\name.txt(10) : message 
```

到输出窗口，然后双击它，Visual Studio 将跳转到给定文件的第 10 行，并在状态栏中显示“消息”。它*非常*有用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-16T16:59:26.543

您可以像这样捕获 cout 的输出，例如：

```
std::streambuf* old_rdbuf = std::cout.rdbuf();
std::stringbuf new_rdbuf;
// replace default output buffer with string buffer
std::cout.rdbuf(&new_rdbuf);

// write to new buffer, make sure to flush at the end
std::cout << "hello, world" << std::endl;

std::string s(new_rdbuf.str());
// restore the default buffer before destroying the new one
std::cout.rdbuf(old_rdbuf);

// show that the data actually went somewhere
std::cout << s.size() << ": " << s; 
```

将其魔术到 Visual Studio 2005 输出窗口中作为练习留给 Visual Studio 2005 插件开发人员。但是您可能可以通过编写自定义 streambuf 类（另请参见 boost.iostream）将其重定向到其他地方，例如文件或自定义窗口。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-16T15:07:21.073

你不能这样做。

如果要输出到调试器的输出窗口，请调用 OutputDebugString。

我发现了一个“teestream”的[实现](http://www.flipcode.com/archives/Message_Box_ostream.shtml)，它允许一个输出到多个流。您可以实现一个将数据发送到 OutputDebugString 的流。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-17T00:39:30.853

本的答案和迈克迪米克的结合：您将实现一个最终调用 OutputDebugString 的 stream_buf_。也许有人已经这样做了？看看两个提议的 Boost 日志库。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T15:07:29.823

这是输出屏幕只是闪烁然后消失的情况吗？如果是这样，您可以通过使用 cin 作为返回前的最后一条语句来保持打开状态。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T07:24:22.643

此外，根据您的意图以及您使用的库，您可能想要使用[TRACE 宏](http://msdn.microsoft.com/en-us/library/4wyz8787(VS.80).aspx)( [MFC](http://en.wikipedia.org/wiki/Microsoft_Foundation_Class_Library) ) 或[ATLTRACE](http://msdn.microsoft.com/en-us/library/6xkxyz08(VS.80).aspx) ( [ATL](http://en.wikipedia.org/wiki/Active_Template_Library) )。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-20T12:17:53.213

写入 std::ostringsteam 然后跟踪它。

```
std::ostringstream oss;

oss << "w:=" << w << " u=" << u << " vt=" << vt << endl;

TRACE(oss.str().data()); 
```

# java - Access USB with Java, in order to find thumbdrive manufacturer's serial#/unique-ID

> ID：73288
> 
> 赞同：8
> 
> 时间：2008-09-16T14:59:58.733
> 
> 标签：java, usb

Looking for a way to read the unique ID / serial# of a USB thumb drive; please note that
- I am looking for the value of the manufacturer, not the one Windows allocates for it.
- I need to support multiple OS (Windows, Unix, Mac), thus needs to be a Java solution

The idea is to be able to distinguish between different USB thumb drives.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T16:10:08.940

RXTX 是要走的路。在模型火车的世界中，JMRI（Java 模型铁路接口）变得非常流行。JMRI 在所有平台（Windows、Linux 和 Mac）上运行，并与各种基于 USB 的设备（命令站）进行通信。RXTX 实际上被 JMRI 使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T15:26:01.417

我从来没有尝试过使用它（它已经在我的待办事项列表上好几个月了），但是 java.net 上有一个“marge”项目：

[http://marge.java.net/](http://marge.java.net/)

这应该可以让你连接到蓝牙设备（虽然我不认为它是 100% 的功能完整，那里有演示代码），然后 ClientDevice 类有一个“getBluetoothAddress”方法，我*认为*它应该是唯一的那个设备

[http://marge.java.net/javadoc/v06/marge-core/net/java/dev/marge/entity/ClientDevice.html](http://marge.java.net/javadoc/v06/marge-core/net/java/dev/marge/entity/ClientDevice.html)

不过正如我所说，我从未尝试过...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-03T10:41:12.787

你可以看看以下项目： [javax-usb](http://javax-usb.org/)和[jusb](http://jusb.sourceforge.net/)。他们似乎支持 Linux 和 Windows。

无论如何，由于 Java 中的 USB 访问需要使用本机库，因此您可能无法实现所需的可移植性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T15:56:53.153

I have never investigated this thoroughly, but from memory the [RXTX](http://users.frii.com/jarvi/rxtx/) library implementation of the javax.comm packages are supposedly very good and now have USB support.

# installation - 我们如何创建不需要管理员权限的安装程序？

> ID：73305
> 
> 赞同：6
> 
> 时间：2008-09-16T15:01:33.067
> 
> 标签：installation, windows-xp, windows-vista, administrator

使用 Visual Studio 创建设置/MSI 时，是否可以为不需要管理员权限安装的简单应用程序进行设置？如果在 Windows XP 下不可行，在 Vista 下是否可行？

例如，一个简单的图像处理应用程序，允许您将照片粘贴到背景之上。我相信安装到 Program Files 文件夹需要管理员权限？我们可以安装在 \AppData 文件夹中吗？

目的是创建一个应用程序，该应用程序将为不是本地计算机上管理员组成员的用户安装，并且不会在 Vista 上显示 UAC 提示。

我相信这种方法的一个限制是，如果它安装在当前用户的应用数据文件夹下，其他用户将无法运行它。

### 更新：

您可以在普通 setup.exe 类型的安装程序中打包一次安装吗？您可能会问我们为什么要这样做 - 原因是我们有一个安装程序，它会进行 prereq 检查并安装所需的任何内容（例如 .NET），然后我们会下载并执行 MSI。我们也希望显示一个正常的安装程序启动屏幕，即使这是唯一显示的内容。我们不介意该应用程序是否只能由一位用户（为其安装它的用户）查看。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T15:13:01.963

ClickOnce 是解决这个问题的好方法。如果您转到项目属性 > 发布，您可以为此设置设置。特别是“安装模式和设置”很好看：

*   该应用程序仅可在线获得——这实际上是一个“运行一次”应用程序
*   该应用程序也可离线使用（可从“开始”菜单启动）——这会将应用程序安装在 PC 上

您实际上不必使用 ClickOnce Web 部署的东西。如果您执行 Build > Publish，然后压缩 publish\ 文件夹的内容，您可以有效地将其作为安装程序分发。为了使其更加流畅，请从自动运行 setup.exe 文件的文件夹中创建一个自解压存档。

即使您以这种方式安装，如果您选择使用它，在线更新仍然适用于该应用程序。您所要做的就是将 ClickOnce 文件放到网上，并将 URL 放到项目的发布属性页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T15:05:03.433

Vista 对这种事情有*更多*的限制，所以如果你不能在 XP 上做到这一点，你可以打赌 Vista 也不会让你这样做。

您是对的，使用 Windows 安装程序安装到程序文件文件夹需要管理权限。事实上，对该文件夹的*所有写访问*都需要管理员权限，这就是为什么您不应再将数据存储在与可执行文件相同的文件夹中的原因。

幸运的是，如果您使用的是 .Net，您可以使用 ClickOnce 部署而不是 msi，这应该允许您安装到每个用户配置文件中的文件夹，而无需管理员权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T15:07:03.257

我知道的唯一方法是在 .NET 2.0+ 中构建 ClickOnce 应用程序

如果您的应用程序的用户安装了正确的先决条件，则可以“启动”该应用程序。

查看：

*   [微软家族.Show](http://www.vertigo.com/familyshow.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T15:11:12.263

如果启用了 UAC，则无法写入 Program Files。安装到 \AppData 确实只会为一个用户安装程序。

但是，您必须注意任何需要更改注册表的配置更改都可能（我必须仔细检查）管理员权限。我对桌面背景的修改最终存储在 HKEY_CURRENT_USER 中。

# perl - LWP::UserAgent 请求方法的真正超时

> ID：73308
> 
> 赞同：12
> 
> 时间：2008-09-16T15:01:45.593
> 
> 标签：perl, timeout, signals, lwp

我正在尝试实现对不可靠服务器的请求。这个请求很好，但不是 100% 需要我的 perl 脚本成功完成。问题是服务器偶尔会死锁（我们正试图找出原因）并且请求永远不会成功。由于服务器认为它是活动的，它保持套接字连接打开，因此 LWP::UserAgent 的超时值对我们没有任何好处。对请求强制执行绝对超时的最佳方法是什么？

仅供参考，这不是 DNS 问题。死锁与同时访问我们的 Postgres 数据库的大量更新有关。出于测试目的，我们基本上在服务器响应处理程序中放置了一个 while(1) {} 行。

目前，代码如下所示：

```
my $ua = LWP::UserAgent->new;
ua->timeout(5); $ua->cookie_jar({});

my $req = HTTP::Request->new(POST => "http://$host:$port/auth/login");
$req->content_type('application/x-www-form-urlencoded');
$req->content("login[user]=$username&login[password]=$password");

# This line never returns 
$res = $ua->request($req); 
```

我试过使用信号来触发超时，但这似乎不起作用。

```
eval {
    local $SIG{ALRM} = sub { die "alarm\n" };
    alarm(1);
    $res = $ua->request($req);
    alarm(0);
};
# This never runs
print "here\n"; 
```

我要使用的最终答案是离线某人提出的，但我会在这里提及。出于某种原因，SigAction 有效，而 $SIG(ALRM) 无效。仍然不确定为什么，但这已经过测试。这是两个工作版本：

```
# Takes a LWP::UserAgent, and a HTTP::Request, returns a HTTP::Request
sub ua_request_with_timeout {
    my $ua = $_[0];
    my $req = $_[1];
    # Get whatever timeout is set for LWP and use that to 
    #  enforce a maximum timeout per request in case of server
    #  deadlock. (This has happened.)
    use Sys::SigAction qw( timeout_call );
    our $res = undef;
    if( timeout_call( 5, sub {$res = $ua->request($req);}) ) {
        return HTTP::Response->new( 408 ); #408 is the HTTP timeout
    } else {
        return $res;
    }
}
sub ua_request_with_timeout2 {
    print "ua_request_with_timeout\n";
    my $ua = $_[0];
    my $req = $_[1];
    # Get whatever timeout is set for LWP and use that to 
    #  enforce a maximum timeout per request in case of server
    #  deadlock. (This has happened.)
    my $timeout_for_client = $ua->timeout() - 2;
    our $socket_has_timedout = 0;

    use POSIX;
    sigaction SIGALRM, new POSIX::SigAction(
                                            sub {
                                                $socket_has_timedout = 1;
                                                die "alarm timeout";
                                            }
                                            ) or die "Error setting SIGALRM handler: $!\n";
    my $res = undef;
    eval {
        alarm ($timeout_for_client);
        $res = $ua->request($req);
        alarm(0);
    };
    if ( $socket_has_timedout ) {
        return HTTP::Response->new( 408 ); #408 is the HTTP timeout
    } else {
        return $res;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-16T15:08:17.590

您可以尝试[LWPx::ParanoidAgent](http://search.cpan.org/%7Ebradfitz/LWPx-ParanoidAgent-1.02/lib/LWPx/ParanoidAgent.pm)，它是 LWP::UserAgent 的子类，它对如何与远程 Web 服务器交互更加谨慎。

除其他外，它还允许您指定全局超时。它是由 Brad Fitzpatrick 作为 LiveJournal 项目的一部分开发的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T20:08:27.590

您可以像这样设置自己的超时时间：

```
use LWP::UserAgent;
use IO::Pipe;

my $agent = new LWP::UserAgent;

my $finished = 0;
my $timeout = 5;

$SIG{CHLD} = sub { wait, $finished = 1 };

my $pipe = new IO::Pipe;
my $pid = fork;

if($pid == 0) {
    $pipe->writer;
    my $response = $agent->get("http://stackoverflow.com/");
    $pipe->print($response->content);
    exit;
}

$pipe->reader;

sleep($timeout);

if($finished) {
    print "Finished!\n";
    my $content = join('', $pipe->getlines);
}   
else {
    kill(9, $pid);
    print "Timed out.\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T15:06:05.787

据我了解， timeout 属性没有考虑 DNS 超时。您可以单独进行 DNS 查找，然后在可行的情况下向服务器发出请求，并为用户代理设置正确的超时值。

这是服务器的DNS问题还是其他问题？

编辑：这也可能是 IO::Socket 的问题。尝试更新您的 IO::Socket 模块，看看是否有帮助。我很确定那里有一个错误阻止 LWP::UserAgent 超时工作。

亚历克斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-30T22:01:35.593

以下对原始答案之一的概括还将警报信号处理程序恢复为前一个处理程序，并添加第二次调用 alarm(0) 以防评估时钟中的调用引发非警报异常并且我们想要取消警报。可以添加进一步的 $@ 检查和处理：

```
sub ua_request_with_timeout {
    my $ua = $_[0];
    my $request = $_[1];

    # Get whatever timeout is set for LWP and use that to 
    #  enforce a maximum timeout per request in case of server
    #  deadlock. (This has happened.)`enter code here`
    my $timeout_for_client_sec = $ua->timeout();
    our $res_has_timedout = 0; 

    use POSIX ':signal_h';

    my $newaction = POSIX::SigAction->new(
        sub { $res_has_timedout = 1; die "web request timeout"; },# the handler code ref
        POSIX::SigSet->new(SIGALRM),
        # not using (perl 5.8.2 and later) 'safe' switch or sa_flags
    );  

    my $oldaction = POSIX::SigAction->new();
    if(!sigaction(SIGALRM, $newaction, $oldaction)) {
        log('warn',"Error setting SIGALRM handler: $!");
        return $ua->request($request);
    }   

    my $response = undef;
    eval {
        alarm ($timeout_for_client_sec);
        $response = $ua->request($request);
        alarm(0);
    }; 

    alarm(0);# cancel alarm (if eval failed because of non alarm cause)
    if(!sigaction(SIGALRM, $oldaction )) {
        log('warn', "Error resetting SIGALRM handler: $!");
    }; 

    if ( $res_has_timedout ) {
        log('warn', "Timeout($timeout_for_client_sec sec) while waiting for a response from cred central");
        return HTTP::Response->new(408); #408 is the HTTP timeout
    } else {
        return $response;
     }
} 
```

# embedded - 如何禁用 PowerPC 处理器上的处理器缓存？

> ID：73312
> 
> 赞同：1
> 
> 时间：2008-09-16T15:02:23.143
> 
> 标签：embedded, processor, powerpc

在我们的嵌入式系统（使用 PowerPC 处理器）中，我们想要禁用处理器缓存。我们需要采取哪些步骤？

为了澄清一点，所讨论的应用程序必须具有尽可能恒定的执行速度。执行相同代码路径的可变性是不可接受的。这就是关闭缓存的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-03T13:55:10.897

我对这个问题有点晚了，而且自从我在 PPC 上完成所有低级处理器初始化代码以来已经有一段时间了，但我似乎记得缓存和 MMU 非常紧密耦合（必须启用一个才能启用另一个），我*认为*在 MMU 页表中，您可以定义可缓存属性。

所以我的观点是：如果有一个特定的代码子集必须在确定的时间内运行，也许你在页表中定义为不可缓存的内存区域中找到该代码（通过链接器命令文件）？这样，所有可以/应该从缓存中受益的代码都可以，而（希望）不应该的代码子集则不会。

无论如何我都会这样处理，所以以后，如果你想为系统的一部分启用缓存，你只需要翻转 MMU 页表中的一些位，而不是（重新）编写 init 代码设置所有页表和缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T15:02:46.263

来自 E600 参考手册：
HID0 专用寄存器包含多个位，这些位使指令和数据缓存无效、禁用和锁定。

您应该使用 HID0[DCE] = 0 来禁用数据缓存。
您应该使用 HID0[ICE] = 0 来禁用指令缓存。

请注意，在上电时，两个缓存都被禁用。您需要用汇编代码编写它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T20:40:56.280

也许您不想全局禁用缓存，只想针对特定地址范围禁用它？

在某些处理器上，您可以为地址范围配置 TLB（翻译后备缓冲区）条目，以便每个范围都可以启用或禁用缓存。通过这种方式，您可以禁用内存映射 I/O 的缓存，并且仍然为 RAM 的主块保留缓存。

我唯一使用过的 PowerPC 是 PowerPC 440EP（来自 IBM，然后是 AMCC），所以我不知道所有 PowerPC 是否都以相同的方式工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-02T20:49:17.430

它是一种什么样的PPC内核？来自不同供应商的不同内核之间的缓存控制非常不同......而且，禁用缓存通常被认为对机器来说是一件非常糟糕的事情。性能变得非常缓慢，以至于您可以使用旧的 8 位处理器（有点夸张）。一些 ARM 变体具有 TCM、紧密耦合的存储器，可以代替缓存工作，但我不知道任何具有该功能的 PPC 变体。

也许更好的解决方案是保持 1 级缓存处于活动状态，而将片上 L2 缓存用作静态映射 RAM？至少，这在现代 PowerQUICC 设备上很常见。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-09-28T02:47:27.957

关闭缓存对你没有任何好处。您的执行速度将下降一个数量级。你永远不会发布这样的系统，因此它在这些条件下的性能是无关紧要的。

要获得稳定的执行速度，请考虑以下方法之一：

1) 锁定部分或全部缓存。飞思卡尔、IBM 和 AMCC 的所有当前 PowerPC 芯片都提供此功能。

2）如果它是具有二级缓存的飞思卡尔芯片，请考虑将该缓存的一部分映射为片上存储器。

# c++ - 使用 C++ 和 SQL Native Client 的 SQLGetData 问题

> ID：73313
> 
> 赞同：4
> 
> 时间：2008-09-16T15:02:24.627
> 
> 标签：c++, sql-server, sqlncli

我有一个使用 SQL Native Client 连接到 MS SQL Server 2000 的 C++ 应用程序。

我正在尝试从包含比最初分配给它的缓冲区提供的更多数据的 TEXT 列中检索结果。为了澄清我的问题，我将概述我在做什么（下面的代码）：

1.  分配 1024 字节的缓冲区使用
2.  使用 SQLBindColumn 将缓冲区绑定到列
3.  使用 SQLExecute 执行 SELECT 查询
4.  使用 SQLFetch 遍历结果
5.  SQLFetch 无法将整个结果返回到我的缓冲区：我想使用 SQLGetData 检索整个列值

上述操作顺序提出了一个问题：SQLGetData 不适用于我的驱动程序中的绑定列。

一个可行的解决方案是使用 SQL_DATA_AT_EXEC 标志，如下面的代码所示。

开始代码：

```
#include <windows.h>

#include <sql.h>
#include <sqlext.h>
#include <sqltypes.h> 
#include <sqlncli.h>

#include <cstdio>
#include <string>

const int MAX_CHAR = 1024;

bool test_retcode( RETCODE my_code, const char* my_message )
{
    bool success = ( my_code == SQL_SUCCESS_WITH_INFO || my_code == SQL_SUCCESS );
    if ( ! success )
    {
        printf( "%s", my_message );
    }

    return success;
}

int main ( )
{
    SQLHENV EnvironmentHandle;

    RETCODE retcode = SQLAllocHandle( SQL_HANDLE_ENV, SQL_NULL_HANDLE, &EnvironmentHandle );
    test_retcode( retcode, "SQLAllocHandle(Env) failed!" );

    retcode = SQLSetEnvAttr( EnvironmentHandle, SQL_ATTR_ODBC_VERSION, (SQLPOINTER) SQL_OV_ODBC3, SQL_IS_INTEGER );
    test_retcode( retcode, "SQLSetEnvAttr(ODBC version) Failed" );

    SQLHDBC ConnHandle;
    retcode = SQLAllocHandle( SQL_HANDLE_DBC, EnvironmentHandle, &ConnHandle );
    test_retcode( retcode, "Could not allocate MS SQL 2000 connection handle." );

    SQLSMALLINT driver_out_length;
    retcode = SQLDriverConnect( ConnHandle,
        NULL, // we're not interested in spawning a window
        (SQLCHAR*) "DRIVER={SQL Native Client};SERVER=localhost;UID=username;PWD=password;Database=Test;",
        SQL_NTS,
        NULL,
        0,
        &driver_out_length,
        SQL_DRIVER_NOPROMPT );
    test_retcode( retcode, "SQLConnect() Failed" );

    SQLHSTMT StatementHandle;
    retcode = SQLAllocHandle(SQL_HANDLE_STMT, ConnHandle, &StatementHandle);
    test_retcode( retcode, "Failed to allocate SQL Statement handle." );

    char* buffer = new char[ MAX_CHAR ];
    SQLINTEGER length = MAX_CHAR - 1;

    // -- Bind Block
    retcode = SQLBindCol( StatementHandle, 
        1,
        SQL_C_CHAR,
        (SQLPOINTER) NULL,
        (SQLINTEGER) SQL_DATA_AT_EXEC,
        &length );

    test_retcode( retcode, "Failed to bind column." );
    // -- End Bind Block

    retcode = SQLExecDirect( StatementHandle, (SQLCHAR*) "SELECT VeryLong FROM LongData", SQL_NTS );
    test_retcode( retcode, "SQLExecDirect failed." );

    // -- Fetch Block
    retcode = SQLFetch( StatementHandle );
    if ( retcode != SQL_SUCCESS && retcode != SQL_SUCCESS_WITH_INFO && retcode != SQL_NO_DATA )
    {
        printf( "Problem fetching row.\n" );
        return 9;
    }

    printf( "Fetched data.  length: %d\n", length );
    // -- End Fetch Block

    bool sql_success;
    std::string data;
    RETCODE r2;
    do
    {
        r2 = SQLGetData( StatementHandle, 1, SQL_C_CHAR, buffer, MAX_CHAR, &length );

        if ( sql_success = test_retcode( r2, "SQLGetData failed." ) )
        {
            data.append( buffer );
        }
        else
        {
            char* err_msg = new char[ MAX_CHAR ];
            SQLSMALLINT req = 1;
            SQLCHAR state[6];
            SQLINTEGER error;
            SQLINTEGER output_length;

            int sql_state = SQLGetDiagRec( SQL_HANDLE_STMT, StatementHandle, req, state, &error, (SQLCHAR*) err_msg, (SQLINTEGER) MAX_CHAR, (SQLSMALLINT*) &output_length );

            // state is: 07009, error_msg: "[Microsoft][SQL Native Client]Invalid Descriptor Index"
            printf( "%s\n", err_msg );

            delete err_msg;

            return 9;
        }
    } 
    while ( sql_success && r2 != SQL_SUCCESS );

    printf( "Done.\n" );

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T18:50:46.153

1.  尝试将 SQLBindCol 放在 SQLExecDirect 之后。

2.  对于 TEXT 列使用

    retcode = SQLBindCol( StatementHandle, 1, SQL_C_CHAR,
    (SQLPOINTER) NULL, (SQLINTEGER) SQL_DATA_AT_EXEC, &length );

通过这种方式，您可以重复 SQLGetData 以多段读取整个 TEXT 数据

# eclipse - 如何在 Vim 中复制整行？

> ID：73319
> 
> 赞同：1820
> 
> 时间：2008-09-16T15:02:52.923
> 
> 标签：eclipse, vim, editor, keyboard-shortcuts, vi

如何以类似于IntelliJ IDEA/Resharper 中的 + 或Eclipse**中**的+ + /的方式在**Vim**中复制整行？`Ctrl``D``Ctrl``Alt``↑``↓`

 *** * *

## 回答 #1

> 赞同：3059
> 
> 时间：2008-09-16T15:06:46.393

`y``y`或`Y`复制行（助记符：***y*** ***ank****）*或
删除 *行*
`d``d`（Vim 将您删除的内容复制到类似剪贴板的“寄存器”中，如*剪切*操作）

 ***然后

`p`将***复制***或删除的文本粘贴*到*当前行 *之后*
或
`P`将***复制***或删除的文本粘贴*到*当前行*之前*

* * *

## 回答 #2

> 赞同：455
> 
> 时间：2012-04-17T15:17:21.180

正常模式：查看其他答案。

[前任](https://en.wikipedia.org/wiki/Ex_%28text_editor%29 "文本编辑器")方式：

*   `:t.`将复制该行，
*   `:t 7`将在第 7 行之后复制它，
*   `:,+t0`将复制文件开头的当前行和下一行（`,+`是范围的同义词`.,.+1`），
*   `:1,t$`将从开头复制行直到光标位置到结尾（`1,`是 range 的同义词`1,.`）。

如果您需要移动而不是复制，请使用`:m`代替`:t`.

如果将它与`:g`or结合使用，这将非常强大`:v`：

*   `:v/foo/m$`会将所有与模式“foo”不匹配的行移至文件末尾。
*   `:+,$g/^\s*class\s\+\i\+/t.``class xxx`将在光标之后复制表单的所有后续行。

参考：`:help range`, `:help :t`, `:help :g`,`:help :m`和`:help :v`

* * *

## 回答 #3

> 赞同：316
> 
> 时间：2008-09-16T15:07:10.950

`YP`或`Yp`或`yyp`。

* * *

## 回答 #4

> 赞同：279
> 
> 时间：2014-02-07T22:20:41.630

![在vim中复制粘贴](https://i.stack.imgur.com/dz2pb.gif)

没有比这更简单的了！从正常模式：

```
yy 
```

然后移动到要粘贴的行，然后

```
p 
```

* * *

## 回答 #5

> 赞同：59
> 
> 时间：2008-09-16T15:04:11.033

`y``y`

将拉当前行而不删除它

`d``d`

将删除当前行

`p`

将由`put`前面的任何一种方法抓取一条线

* * *

## 回答 #6

> 赞同：53
> 
> 时间：2008-09-16T15:04:10.673

做这个：

首先，`y``y`复制当前行，然后`p`粘贴。

* * *

## 回答 #7

> 赞同：49
> 
> 时间：2008-09-16T15:37:24.933

如果你想要另一种方式：

`"ayy`：这会将行存储在缓冲区中`a`。

`"ap`：这会将缓冲区的内容放在`a`光标处。

这有很多变化。

`"a5yy`：这会将 5 行存储在缓冲区中`a`。

请参阅“ [Vim 帮助文件](https://vimhelp.org/)以获得更多乐趣。

* * *

## 回答 #8

> 赞同：44
> 
> 时间：2008-09-16T15:16:29.647

`y``y``p`- 用“yippee”记住它！

多行，中间有一个数字：

`y``7``y``p`

* * *

## 回答 #9

> 赞同：27
> 
> 时间：2013-10-12T18:23:05.530

`y``y``p`- 粘贴后

`y``y``P`- 粘贴之前

* * *

## 回答 #10

> 赞同：16
> 
> 时间：2009-07-14T04:45:12.917

我喜欢： `Shift`+ `v`（立即选择整行并让您根据需要选择其他行），y，p

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2009-07-14T04:37:04.837

另一种选择是：

```
nmap <C-d> mzyyp`z 
```

为您提供保留光标位置的优势。

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2008-09-18T20:32:52.630

您也可以尝试 <Cx><Cl> ，它将从插入模式重复最后一行，并为您带来一个包含所有行的完成窗口。它几乎像 <Cp>

* * *

## 回答 #13

> 赞同：10
> 
> 时间：2016-05-12T14:54:42.353

对于不了解 vi 的人来说，上面的一些答案可能会用“粘贴...在***当前行***之后/之前”这样的短语来误导他。
它实际上是“粘贴......在***光标***之后/之前”。

`y``y`或`Y`复制该行
或
`d``d`删除该行

然后

`p`将复制或删除的文本粘贴到**光标***后*或 将复制或删除的文本粘贴到**光标***前* **`P`**

 *****更多按键绑定，可以访问这个网站：[vi Complete Key Binding List](http://hea-www.harvard.edu/~fine/Tech/vi.html)

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2018-04-13T07:26:23.813

我知道我迟到了，但无论如何；我的 .vimrc 中有这个：

```
nnoremap <C-d> :copy .<CR>
vnoremap <C-d> :copy '><CR> 
```

该`:copy`命令只是将选定的行或范围（总是整行）复制到作为其参数给出的行号下方。

在正常模式下，它的作用是`copy .` *将这一行复制到这一行的正下方*。

在可视模式下，它会`'<,'> copy '>` *从选择开始到选择结束复制到选择结束下方的行*。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2015-04-20T04:33:53.933

默认是`y``y``p`，但我已经使用这个重新绑定一年左右并且喜欢它：

`" set Y to duplicate lines, works in visual mode as well. nnoremap Y yyp vnoremap Y y`>pgv`

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2008-09-16T15:06:45.053

1 陷阱：当您使用“p”放置该行时，它会将其放在光标所在的行*之后*，因此如果您想在您正在拉动的行之后添加该行，请不要将光标向下移动一行在放新线之前。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2016-02-10T13:23:48.640

对于那些开始学习 vi 的人，这里是 vi 的一个很好的介绍，通过并排列出 vi 命令到典型的 Windows GUI 编辑器光标移动和快捷键。它列出了所有基本命令，包括`yy`（复制行）和`p`（粘贴后）或`P`（粘贴前）。

[适用于 Windows 用户的 vi (Vim)](https://cognitivewaves.wordpress.com/vi-editor/)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2018-02-11T17:20:36.883

如果您想复制一行并将其粘贴到当前喜欢的下方，就像在 Sublime `Ctrl`++中`Shift`一样`D`，那么您可以将其添加到您的`.vimrc`文件中。

`nmap <S-C-d> <Esc>Yp`

或者，对于插入模式：

`imap <S-C-d> <Esc>Ypa`

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-08-02T12:02:14.723

我更喜欢定义自定义键盘映射`Ctrl`+ `D`in以在*正常*模式和*插入*`.vimrc`模式下复制当前行：

 **```
" duplicate line in normal mode:
nnoremap <C-D> Yp
" duplicate line in insert mode:
inoremap <C-D> <Esc> Ypi 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-04-11T16:34:29.520

我喜欢使用这个映射：

```
:nnoremap yp Yp 
```

因为它使它与本机`YP`命令一起使用是一致的。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-05-02T05:16:34.447

我使用这个映射，类似于 vscode。我希望它有用！！！！

```
nnoremap <A-d> :t. <CR>==
inoremap <A-d> <Esc>:t. <CR>==gi
vnoremap <A-d> :t$ <CR>gv=gv 
```

# listview - How to set the header sort glyph in a .NET ListView?

> ID：73320
> 
> 赞同：3
> 
> 时间：2008-09-16T15:02:55.577
> 
> 标签：listview, sorting, header, themes, glyph

How do I set the column which has the header sort glyph, and its direction, in a .NET 2.0 WinForms ListView?

## Bump

The listview is .net is not a managed control, it is a very thin wrapper around the Win32 ListView common control. It's not even a very good wrapper - it doesn't expose all the features of the real listview.

The Win32 listview common control supports drawing itself with themes. One of the themed elements is the header sort arrow. Windows Explorer's listview common control knows how to draw one of its columns with that theme element.

*   does the Win32 listview support specifying which column has what sort order?
*   does the Win32 header control that the listview internally uses support specifying which column has what sort order?
*   does the win32 header control support custom drawing, so I can draw the header sort glyph myself?
*   does the win32 listview control support custom header drawing, so I can draw the header sort glyph myself?
*   does the .NET ListView control support custom header drawing, so I can draw the header sort glyph myself?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-31T11:44:18.453

如果有人需要快速解决方案（它在列标题文本的开头绘制向上/向下箭头）：

**ListViewExtensions.cs：**

```
public static class ListViewExtensions
{
    public static void DrawSortArrow(this ListView listView, SortOrder sortOrder, int colIndex)
    {
        string upArrow = "▲   ";
        string downArrow = "▼   ";

        foreach (ColumnHeader ch in listView.Columns)
        {
            if (ch.Text.Contains(upArrow))
                ch.Text = ch.Text.Replace(upArrow, string.Empty);
            else if (ch.Text.Contains(downArrow))
                ch.Text = ch.Text.Replace(downArrow, string.Empty);
        }

        if (sortOrder == SortOrder.Ascending)
            listView.Columns[colIndex].Text = listView.Columns[colIndex].Text.Insert(0, downArrow);
        else
            listView.Columns[colIndex].Text = listView.Columns[colIndex].Text.Insert(0, upArrow);
    }
} 
```

**用法：**

```
private void lstOffers_ColumnClick(object sender, ColumnClickEventArgs e)
{
    lstOffers.DrawSortArrow(SortOrder.Descending, e.Column);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T15:04:21.890

I use unicode arrow characters in the title of the column and make the header a linkbutton.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-01-15T16:06:57.780

我使用了一个内置的列表视图。它被称为[XPTable](http://www.codeproject.com/KB/list/XPTableListViewUpdate.aspx) ..我正在挖掘我的源代码以找到将根据排序顺序绘制字形的辅助类...这是我在[这里](http://www.codeproject.com/KB/list/lvsortmanager.aspx)使用的代码..

希望这会有所帮助，最好的问候，汤姆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-11T04:19:30.337

本文很有帮助，使用 SendMessage DllImport。

[http://www.codeproject.com/Tips/734463/Sort-listview-Columns-and-Set-Sort-Arrow-Icon-on-C](http://www.codeproject.com/Tips/734463/Sort-listview-Columns-and-Set-Sort-Arrow-Icon-on-C)

# javascript - 如何将一些 JavaScript 状态信息保存回我的服务器 onUnload？

> ID：73335
> 
> 赞同：1
> 
> 时间：2008-09-16T15:04:38.817
> 
> 标签：javascript, ajax, extjs

我在网页上有一个[ExtJS](http://www.sencha.com)网格，我想在用户离开页面时将它的一些状态信息保存回服务器。我可以使用 Ajax 请求 onUnload 执行此操作吗？如果没有，有什么更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T15:07:52.680

您可以使用 Ajax 请求，但请确保将其设为同步请求而不是异步请求。或者，只要用户进行更改，只需保存状态，如果用户的浏览器崩溃，这也可以保护数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T19:41:21.960

上面有一个答案说使用同步 ajax 调用，这是最好的情况。问题是卸载并非在任何地方都有效。如果你看[这里](http://blog.rd2inc.com/archives/2005/05/04/unload-events-in-safari/)，你会发现一些技巧来帮助你在 safari 中卸载事件......你也可以使用 Google Gears 来保存用户端的内容，以备不时之需，但这是唯一完全安全的保留方式只要用户在页面上或进行更改，该信息就会持续发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T15:16:29.960

您还可以在卸载时使用 javascript 设置 cookie。我认为 ajax 相对于 cookie 的优势在于您拥有可用于报告的数据，并且用户（如果已登录）可以在不同的机器上使用这些数据。

使用 ajax 的缺点是它可能会减慢浏览器窗口的实际关闭速度，如果服务器响应缓慢，这可能会很烦人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T15:29:39.600

这取决于用户如何离开页面。如果您的 GUI 中有一个“注销”按钮，您可以在用户单击此按钮时触发 ajax 请求。否则，我认为在 onUnload 中发出请求不是一个好主意。如前所述，您必须发出同步请求... cookie 解决方案的替代方案是隐藏文本字段。这是处理 ajax 附带的历史问题的工具（如[RSH ）通常使用的一种技术。](http://code.google.com/p/reallysimplehistory/)

# .net - .NET 内省 VS 反射

> ID：73359
> 
> 赞同：5
> 
> 时间：2008-09-16T15:06:58.577
> 
> 标签：.net, reflection, introspection

.NET 中的自省和反射有什么区别

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-16T15:15:09.697

它们是同一个整体的两个部分。

内省是指一个类查看“内部”自身并查看例如方法采用哪些参数、其成员的名称是什么等的能力。

反射是 .NET 如何实现自省的特定名称。其他语言可能称它为不同的东西（C++ 将其称为有限内省 RTTI，用于运行时类型信息）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T15:45:26.737

Introspection[在 2004 年与 FxCop 一起引入，作为 Reflection 的替代](http://msdn.microsoft.com/en-gb/magazine/cc188721.aspx)：

> FxCop 1.30 的新功能是它现在通过一种称为 Introspection 的技术执行分析。Introspection 引擎的使用允许更快的分析并支持多线程分析。与以前版本的反射引擎不同，在 Introspection 引擎中，您正在分析的程序集未锁定，因此您无需关闭 FxCop 即可修复和重新编译这些程序集。最后，与反射引擎相比，自省引擎提供了更丰富的分析基础设施。

# java - 你如何阅读 JavaDoc？

> ID：73366
> 
> 赞同：32
> 
> 时间：2008-09-16T15:07:30.417
> 
> 标签：java, documentation, javadoc

您使用哪些工具/网站来阅读 JavaDocs？

我目前使用 Firefox，在处理 J2EE 项目时打开了 20 多个选项卡，以获取所有可用的文档，这些文档不是很有用，占用了太多内存并且不可搜索。

我对这样一个工具/网站的期望：

*   聚合来自不同位置的 JavaDocs
*   直接访问 Eclipse 中的 Ctrl+T 等类型或类似类型
*   全文搜索
*   我选择的所有 Java 库之间的交叉引用
*   对于一个工具：离线支持
*   速度

不是强制性的：

*   注释事物的可能性
*   支持不同版本的库（+ diffing ？）
*   IDE 集成

编辑：

感谢您的回答。我知道大多数网站，但又给了他们一次尝试。这是我的判断：

*   内置 Eclipse/IDE 功能
    *   紧密集成
    *   离线/在线支持
*   [~~javadoconline.com~~](http://www.javadoconline.com)（不再维护）
    *   作品
    *   干净的外观
    *   在多个版本的 api 中查找匹配项并允许轻松切换
    *   简单但有效
    *   快速地
*   [~~jdocs~~](http://www.jdocs.com/)（离线）
    *   看起来很精致
    *   有时很慢
    *   似乎缺少一些最新版本的库（Seam 2.0.0，Hibernate Validators），但看起来您可以自己添加它们
    *   IDE 集成（未测试）
    *   每个项目的wiki风格评论
*   [docjar.com](http://www.docjar.com/)
    *   作品
    *   快速地
    *   混乱的用户界面
*   [javadoc_isearch](http://www.teria.com/~koseki/tools/gm/javadoc_isearch/)
    *   Firefox的greasemonkey脚本，使浏览javadocs更容易
    *   工作顺利，完美

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-16T20:10:26.647

如果您使用 Eclipse，它提供对 Javadocs 的支持。例如，将鼠标悬停在方法调用上将显示一个工具提示，显示该方法的 Javadoc。开箱即用地支持核心 Java 类的文档。但是，如果您的项目使用任何其他库（JAR 文件），则需要进行一些配置才能将其 Javadocs 插入 Eclipse。

1.  转到项目属性的“Java 构建路径”部分。
2.  转到“库”选项卡并单击 JAR 文件旁边的“加号”图标。
3.  单击“Javadoc 位置”，然后单击“编辑...”按钮。

这将允许您指定该 JAR 的 Javadocs 所在的位置。它甚至可以让您指定网站 URL，因此您不必自己下载 Javadocs！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-07T21:25:04.510

JavaDoc jar 可以直接解压。理论上，任何发布的 javadocs 都可以离线下载和查看。

1.  直接从maven仓库下载。例如：[http ://central.maven.org/maven2/com/googlecode/objectify/objectify/5.0.3/objectify-5.0.3-javadoc.jar](http://central.maven.org/maven2/com/googlecode/objectify/objectify/5.0.3/objectify-5.0.3-javadoc.jar)

2.  现在你得到`objectify-5.0.3-javadoc.jar`了，将文件重命名为`objectify-5.0.3-javadoc.zip`

3.  用你最喜欢的解压工具解压，现在你有了一个文件夹`objectify-5.0.3-javadoc`

4.  双击`index.html`将在您的默认浏览器上打开索引页面。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-25T19:49:11.490

[您可以在此处](http://www.stanford.edu/class/cs108/JavaDocFast.html)找到斯坦福大学的 JavaDoc 。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-06T15:12:57.643

我为此编写了自己的工具。据我的同事说，他们看到的最好。

它按 lucene 索引一次，并在后台运行您的小型服务器，因此您可以像在浏览器中一样浏览 javadocs（pydocs、perldocs..）。它还允许每种语言单独的库，因此像“biginteger”或 simialr 这样的搜索不会出错。

[https://github.com/judovana/JavadocOfflineSearch/releases](https://github.com/judovana/JavadocOfflineSearch/releases)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T15:16:44.827

我将[http://www.teria.com/~koseki/tools/gm/javadoc_isearch/](http://www.teria.com/~koseki/tools/gm/javadoc_isearch/ "javadoc 增量搜索插件")用于 FF。让我也可以轻松浏览其他库。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T15:10:59.583

Eclipse 与 Javadoc 很好地集成在一起，并且有一个类似 HTML 的查看器。您可以将源代码和 javadoc 附加到选择类时将显示的二进制文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T15:13:01.823

像这样的东西可能有用吗？

[http://www.docjar.com/](http://www.docjar.com/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-16T15:15:43.503

就我个人而言，我的 IDE 提供的内置 javadoc 浏览工具从来没有遇到过问题。

目前，我使用 IntelliJ Idea——Ctl-Q 为光标下的方法调出 javadoc，并带有指向文档其他部分功能的超链接。

我想 NetBeans 和 Eclipse 提供类似的功能。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-11-08T00:15:54.840

这个用于 Firefox 和 Chrome 的插件对于快速查找包和类名很有用，尽管它不是全文搜索：[https ://code.google.com/p/javadoc-search-frame/](https://code.google.com/p/javadoc-search-frame/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-02-18T13:19:39.113

嗯...怎么样：

*   [http://edu.netbeans.org/quicktour/javadoc.html](http://edu.netbeans.org/quicktour/javadoc.html) - NetBeans 支持 Java 文档的 Javadoc 标准 - 查看和生成它。
*   [http://globaldocs.zeevbelkin.com/](http://globaldocs.zeevbelkin.com/) - 此应用程序允许通过 Internet 和本地文件系统方便地浏览多个 javadoc 集，使用单个包/类层次结构树和可搜索索引。查看器支持本地和远程文档集（也支持打包到 JAR/ZIP 文件的本地文档集）。

我更喜欢 NetBeans，因为它会自动从**Maven**目录获取**JavaDoc ...** **`~/.m2`**

 *** * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-19T03:23:57.707

Eclipse 是查看 javadocs 的最佳方式。将鼠标悬停在方法或任何声明上，您将获得 eclipse 自动生成的 javadocs。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-16T15:11:47.910

Doxygen ( [http://www.doxygen.nl/](http://www.doxygen.nl/) ) 可能符合要求。

编辑：我可能误读了您的问题，doxygen 是一种根据您的代码和 javadoc 生成文档和模型的工具。

# c# - 如何优雅地处理 ViewState 错误？

> ID：73380
> 
> 赞同：2
> 
> 时间：2008-09-16T15:09:25.793
> 
> 标签：c#, .net, exception, viewstate

我正在运行一些带有各种网格视图的 c# .net 页面。如果我将它们中的任何一个单独留在网络浏览器中很长一段时间（通常是一夜之间），当我单击页面上的任何元素时，我会收到以下错误。

我不确定从哪里开始处理这个问题。如果它的视图状态已过期，我不介意重置页面，但抛出错误是不可接受的！

```
 Error: The state information is invalid for this page and might be corrupted.

  Target: Void ThrowError(System.Exception, System.String, System.String, Boolean)

  Data: System.Collections.ListDictionaryInternal

  Inner: System.Web.UI.ViewStateException: Invalid viewstate. Client IP: 66.35.180.246 Port: 1799 User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9) Gecko/2008052906 Firefox/3.0 ViewState: (**Very long Gibberish Omitted!**)

  Offending URL: (**Omitted**)

  Source: System.Web

  Message: The state information is invalid for this page and might be corrupted.

  Stack trace: at System.Web.UI.ViewStateException.ThrowError(Exception inner, String persistedState, String errorPageMessage, Boolean macValidationError) at System.Web.UI.ClientScriptManager.EnsureEventValidationFieldLoaded() at System.Web.UI.ClientScriptManager.ValidateEvent(String uniqueId, String argument) at System.Web.UI.Control.ValidateEvent(String uniqueID, String eventArgument) at System.Web.UI.WebControls.DropDownList.LoadPostData(String postDataKey, NameValueCollection postCollection) at System.Web.UI.WebControls.DropDownList.System.Web.UI.IPostBackDataHandler.LoadPostData(String postDataKey, NameValueCollection postCollection) at System.Web.UI.Page.ProcessPostData(NameValueCollection postData, Boolean fBeforeLoad) at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T15:18:07.023

这很奇怪，因为 ViewState 在网页本身中存储为字符串。所以我看不出长时间会如何导致该错误。也许页面上的一个或多个对象已被垃圾回收或应用程序重置，因此视图状态正在引用旧控件，而不是在应用程序重新启动时创建的控件。

无论如何，我都感到你的痛苦，这些错误调试起来从来都不是一件愉快的事，除了可能研究[ViewState 的工作原理之外，我没有简单的答案来解决如何找到问题](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/Truly-Understanding-Viewstate.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T15:12:13.043

您可以通过将视图状态保存到数据库并仅在您需要的持续时间内进行清理来完全消除此错误。即使使用相对较小的视图状态，这也显着提高了页面的性能。

至少您可以从 Page 类继承并添加您自己的 ViewStateLoad 路由，以检查它是否已过期并重新加载默认状态。

检查[ViewState Provider - 使用 Provider Model Design Pattern](http://www.codeproject.com/KB/viewstate/ViewStateProvider.aspx)提供自定义 Viewstate 提供程序的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T15:17:04.700

或者，如果您知道超时长度，那么您可以在页面中添加一些 javascript，如果在预设时间段后页面上没有任何活动，则将用户重定向到替代页面。然后，您可以扩展它以警告客户他们的会话/页面即将到期，并为他们提供扩展它的方法（例如 javascript 服务器回调）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T15:44:16.647

以上帖子为您提供了解决问题的一些答案。如果只是在过渡期间处理丑陋的错误是您正在寻找的，自定义错误是优雅处理所有“丑陋的黄色错误”的最简单方法

[http://msdn.microsoft.com/en-us/library/aa479319.aspx](http://msdn.microsoft.com/en-us/library/aa479319.aspx)

[http://msdn.microsoft.com/en-us/library/h0hfz6fc.aspx](http://msdn.microsoft.com/en-us/library/h0hfz6fc.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T21:35:03.527

另一种选择是添加一个全局错误处理程序，它将在应用程序级别捕获异常并将用户重定向到“会话已结束”页面。

如果您想了解全局错误处理程序的一般实现，我的网站上有一个可用的，如果需要，我可以给您代码 - [http://iowacomputergurus.com/free-products/asp.net-global-错误处理程序.aspx](http://iowacomputergurus.com/free-products/asp.net-global-error-handler.aspx)

# c# - asp.net 将 CSV 字符串转换为字符串 []

> ID：73385
> 
> 赞同：7
> 
> 时间：2008-09-16T15:10:30.347
> 
> 标签：c#, string, csv

有没有一种简单的方法可以将字符串从 csv 格式转换为字符串 [] 或列表？

我可以保证数据中没有逗号。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-16T15:33:32.710

String.Split 只是不会削减它，但 Regex.Split 可能 - 试试这个：

```
using System.Text.RegularExpressions;

string[] line;
line = Regex.Split( input, ",(?=(?:[^\"]*\"[^\"]*\")*(?![^\"]*\"))"); 
```

其中“输入”是 csv 行。这将处理带引号的分隔符，并应为您返回一个表示行中每个字段的字符串数组。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-16T15:17:49.190

如果您想要强大的 CSV 处理，请查看[FileHelpers](http://www.filehelpers.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T15:11:19.957

```
string[] splitString = origString.Split(',');
```

*（原始回答者未添加以下评论）* **请记住，此答案解决了保证数据中没有逗号的特定情况。**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T15:24:07.663

尝试：

```
Regex rex = new Regex(",(?=([^\"]*\"[^\"]*\")*(?![^\"]*\"))");
string[] values = rex.Split( csvLine ); 
```

来源：[http ://weblogs.asp.net/prieck/archive/2004/01/16/59457.aspx](http://weblogs.asp.net/prieck/archive/2004/01/16/59457.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T16:04:59.220

您可以查看使用 Microsoft.VisualBasic 程序集与

```
Microsoft.VisualBasic.FileIO.TextFieldParser 
```

它处理带引号的 CSV（或任何分隔符）。我最近发现它很方便。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T15:18:19.877

如果您想使用嵌入的逗号来说明带引号的元素，尤其是当它们与未带引号的字段混合时，没有一种简单的方法可以很好地做到这一点。

您可能还希望将这些行转换为以列名为键的字典。

我的代码有几百行。

我认为网上有一些例子，开源项目等。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T16:13:10.697

试试这个;

```
static IEnumerable<string> CsvParse(string input)
{
    // null strings return a one-element enumeration containing null.
    if (input == null)
    {
        yield return null;
        yield break;
    }

    // we will 'eat' bits of the string until it's gone.
    String remaining = input;
    while (remaining.Length > 0)
    {

        if (remaining.StartsWith("\"")) // deal with quotes
        {
            remaining = remaining.Substring(1); // pass over the initial quote.

            // find the end quote.
            int endQuotePosition = remaining.IndexOf("\"");
            switch (endQuotePosition)
            {
                case -1:
                    // unclosed quote.
                    throw new ArgumentOutOfRangeException("Unclosed quote");
                case 0:
                    // the empty quote
                    yield return "";
                    remaining = remaining.Substring(2);
                    break;
                default:
                    string quote = remaining.Substring(0, endQuotePosition).Trim();
                    remaining = remaining.Substring(endQuotePosition + 1);
                    yield return quote;
                    break;
            }
        }
        else // deal with commas
        {
            int nextComma = remaining.IndexOf(",");
            switch (nextComma)
            {
                case -1:
                    // no more commas -- read to end
                    yield return remaining.Trim();
                    yield break;

                case 0:
                    // the empty cell
                    yield return "";
                    remaining = remaining.Substring(1);
                    break;

                default:
                    // get everything until next comma
                    string cell = remaining.Substring(0, nextComma).Trim();
                    remaining = remaining.Substring(nextComma + 1);
                    yield return cell;
                    break;
            }
        }
    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T15:10:58.070

```
CsvString.split(','); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T15:12:33.370

获取所有行的字符串[]：

```
string[] lines = System.IO.File.ReadAllLines("yourfile.csv"); 
```

然后循环并拆分这些行（这个错误很容易因为它不检查引号分隔字段中的逗号）：

```
foreach (string line in lines)
{
    string[] items = line.Split({','}};
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T15:13:33.587

```
string test = "one,two,three";
string[] okNow = test.Split(','); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T15:13:40.510

```
string s = "1,2,3,4,5";

string myStrings[] = s.Split({','}}; 
```

请注意，Split() 采用要拆分的字符*数组*。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-16T15:13:49.670

```
separationChar[] = {';'}; // or '\t' ',' etc.
var strArray = strCSV.Split(separationChar); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T15:15:19.180

```
string[] splitStrings = myCsv.Split(",".ToCharArray()); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-16T15:26:39.013

一些 CSV 文件的值带有双引号和逗号。因此，有时您可以拆分此字符串文字：“，”

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-16T15:30:48.427

~~带有引用字段的 Csv 文件不是 Csv 文件。当您在另存为中选择“Csv”时，更多的东西（Excel）输出不带引号而不是带引号。~~

如果你想要一个你可以使用、免费或承诺的，这是我的，它也可以使用 IDataReader/Record。它还使用 DataTable 来定义/转换/强制列和 DbNull。

[http://github.com/claco/csvdatareader/](http://github.com/claco/csvdatareader/)

它不做引号..还没有。几天前我只是把它扔在一起挠痒痒。

被遗忘的分号：很好的链接。谢谢。cfeduke：感谢 Microsoft.VisualBasic.FileIO.TextFieldParser 的提示。今晚进入 CsvDataReader。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-17T04:33:19.997

[http://github.com/claco/csvdatareader/](http://github.com/claco/csvdatareader/)使用 cfeduke 建议的 TextFieldParser 更新。

只需几个道具即可暴露分隔符/修剪空间/类型 ig，您只需要窃取代码即可。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-17T15:40:22.450

我已经在标签上拆分了，所以这对我有用：

```
public static string CsvToTabDelimited(string line) {
    var ret = new StringBuilder(line.Length);
    bool inQuotes = false;
    for (int idx = 0; idx < line.Length; idx++) {
        if (line[idx] == '"') {
            inQuotes = !inQuotes;
        } else {
            if (line[idx] == ',') {
                ret.Append(inQuotes ? ',' : '\t');
            } else {
                ret.Append(line[idx]);
            }
        }
    }
    return ret.ToString();
} 
```

# dns - 如何将我的域从现有的注册商/托管服务转移到 GoDaddy 之类的服务？

> ID：73432
> 
> 赞同：4
> 
> 时间：2008-09-16T15:15:50.943
> 
> 标签：dns

我需要再次付款吗？我距离续订还有大约 9 个月的时间，但我目前的提供商没有提供很多选项/控制面板。

更新：感谢大家的帮助-我现在终于完成了。

我不得不：

*   要求我的旧注册商“解锁”域
*   要求我的旧注册商将域的管理员电子邮件地址设置为我的电子邮件
*   向我的旧注册商询问“authcode”
*   其余的我只是按照 GoDaddy 的指示进行

真是痛苦啊**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T15:21:01.600

这就是它的工作原理假设您的当前域名还有 9 个月的到期时间您将域名转移到 GoDaddy（或任何其他体面的注册商），您将被收取与预订价格相同的价格（略高于或相等）新域名但是，您将拥有该域名 9 个月 + 一年（或您支付 godaddy 的年数）

因此，您选择转移域名并支付 9.99 美元（一年），您将拥有 1 年 + 9 个月的域名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T15:21:20.587

当我不得不从糟糕的、不可靠的 Fuitadnet 切换主机时，我这样做了。他们为我管理域，所以我通过电子邮件向他们发送了我想转移我的域的信息。（我转移到 GoDaddy。）

我不记得所有的细节，但我似乎记得那是一个多次握手的过程。首先，他们必须让我目前的注册商释放域名；这涉及向我发送一封电子邮件，以便我确认我确实想要释放该域。然后，我收到了一个发送给新注册商的确认码，他做了某事或其他事情，然后返回一个新的确认码。一旦我输入了最终确认码，该域就属于新的注册商。花了几天时间，由于某种原因，我的第一组代码不起作用，但我发现 GoDaddy 非常擅长解释发生了什么。

我确实必须支付转会费，但注册保留了它的长度。我选择更新它，因为当时有折扣。

如果您联系您当前的主机/注册商，他们应该能够帮助您；这是我真正从 fuitadnet 获得良好服务的少数几次之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T15:22:22.957

您必须通过当前的注册商解锁域，并确保您的联系信息是最新的。

然后，您可以让新注册商提交转移请求。这将导致您收到通知（假设您的联系信息是准确的）。

您必须按照该转移请求电子邮件中的说明进行操作。

域可能需要几天时间才能完全转移到新的注册商。

当您转移一个域时，您实际上将注册延长了一年，因此您将被收取标准的转移/注册费。

如果您有任何问题，您可以随时联系您想成为新注册商的公司。我相信他们将能够准确地引导您完成他们的过程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T15:27:20.713

如您所知，[GoDaddy 作为一家公司的名声有些可疑](http://nodaddy.com/)。我个人从来没有遇到过任何问题，但我只有几个低调的网站，并且从未做过任何与 DNS 相关的远程复杂操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T15:17:12.720

有一个域名转移程序。这有点复杂，因为它旨在防止人们通过将域名转移到另一个注册商来窃取域名（就像90 年代发生的[sex.com一样）。](http://en.wikipedia.org/wiki/Sex.com)GoDaddy 可以很好地与您交谈（我过去曾将域转移给他们）。当然，您将不得不付钱给他们为您注册域名（尽管他们偶尔会提供域名转移折扣）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T15:17:13.937

您可能需要付费。如果您与当前的注册商和目标注册商核实，了解需要对他们进行哪些处理以及费用是多少。

尽管实际过程相同，但对于每个注册者来说都是不同的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T15:17:32.360

他们向您收取转让费用（例如 6.99？），但 Godaddy 将续订一年。您通常需要联系您当前的主机并让他们将其释放以进行转移，然后按照 Godaddy 的程序转移新域。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T15:19:36.877

您可能需要付费，但是当我从 Register.com 切换到 goDaddy.com 时，我支付了非常少的费用（例如 10 美元），并且还续订了 2 年的域名。（结果证明这比使用 Register.com 续订便宜得多）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T15:21:52.410

是的！！当我搬家时，我的新注册商向我收费。另请记住，在开始传输过程之前，您应该拥有密钥（传输代码）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T15:21:58.883

还要看主机。例如，如果您与 BlueHost 这样的公司合作，他们将为您提供来自失败注册商的免费域名转移。我想，事实上，他们可能会给你免费转会。他们会询问您是否想与他们续订您的域名，但这会花费您。

# dns - 缓存名称服务器是否通常缓存否定的 DNS 响应 SERVFAIL

> ID：73433
> 
> 赞同：5
> 
> 时间：2008-09-16T15:15:55.997
> 
> 标签：dns

缓存名称服务器是否通常缓存否定的 DNS 响应 SERVFAIL？

编辑：为了澄清这个问题，我可以看到缓存名称服务器缓存否定响应 NXDOMAIN、NODATA。但它不会对 SERVFAIL 响应执行此操作。这是故意的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-22T14:48:44.287

SERVFAIL 包含在 RFC2308 的 §7.1 中：

> 服务器故障分为两大类。第一个是服务器可以确定它已被错误配置为区域的位置。这可能是它被列为服务器但未配置为区域的服务器的位置，或者它已配置为区域的服务器但由于某种原因无法获取区域数据的位置。发生这种情况的原因可能是区域文件不存在或包含错误，也可能是本应提供区域的另一台服务器没有响应或无法或不愿提供该区域。
> 
> 第二类是服务器需要从其他地方获取答案，但由于网络故障、其他服务器不回复或返回服务器故障错误或类似原因而无法这样做的地方。
> 
> 在任何一种情况下，解析器都可以缓存服务器故障响应。如果这样做了，它的缓存时间不得超过五 (5) 分钟，并且必须针对特定的查询元组 <查询名称、类型、类、服务器 IP 地址> 进行缓存。

所以基本上，它取决于您的名称服务器的实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T15:25:32.107

[RFC 1034](http://www.faqs.org/rfcs/rfc1034.html)描述了如何缓存否定响应，但没有定义将这些缓存结果返回给对等解析器的机制。[RFC 2308](http://www.faqs.org/rfcs/rfc2308.html)定义了这些属性。

负缓存是 DNS 规范的可选部分...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T15:17:59.550

SOA 中的超时字段之一是“负超时”。它通常设置为较短的时间，例如 30 或 60 秒。所以，是的，但比“积极”回应的时间更短。

# sql-server - HashBytes() 函数 T-SQL

> ID：73447
> 
> 赞同：4
> 
> 时间：2008-09-16T15:16:57.337
> 
> 标签：sql-server, tsql

将此函数的输出从 varbinary() 转换为 aa varchar() 的最有效方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T15:22:26.700

这个怎么样：

```
master.sys.fn_varbintohexstr(@binvalue) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-11-02T11:53:04.063

对于 SQL Server 2008 使用

```
CONVERT(varchar, @binary, 1) 
```

1 - 样式 0x060D，2 - 060D

[http://msdn.microsoft.com/en-gb/library/ms187928.aspx](http://msdn.microsoft.com/en-gb/library/ms187928.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T12:16:41.063

转换（varchar，@binary）

# asp.net - asp.net dropDownBox selectedIndex 未维护

> ID：73456
> 
> 赞同：0
> 
> 时间：2008-09-16T15:17:21.033
> 
> 标签：asp.net, .net-2.0

我有一个奇怪的问题，下拉框 selectedIndex 在回发时总是设置为 0。我不会不小心在我的代码中重新绑定它。事实上，我已经在 page_load 事件的第一行放置了一个断点，并且该值已经设置为零。下拉列表在我的项目的母版页中，我不知道这是否会有所不同。我没有在我的内容持有者中引用控件。

如果我设置我的 autoPostBack = 'true' 页面工作正常。我不必更改任何代码，并且 selectedIndex 会被维护。我也尝试过设置 enableViewState on 和 off 并没有什么区别。在这一点上，我正在抓住稻草来弄清楚发生了什么。我以前从来没有遇到过这个问题。

这是我的 page_load 事件中的代码。

```
 If CartEstablished Then
            txtCustNum.Visible = False
            btnCustSearch.Visible = False
            lblCustNum.Visible = True
            ddlSalesType.Visible = False
            lblSalesType.Visible = True
            ddlTerms.Visible = False
            lblTerms.Visible = True

            lblTerms.Text = TermsDescription
        Else
            txtCustNum.Visible = True
            btnCustSearch.Visible = True
            lblCustNum.Visible = False

            lblSalesType.Visible = False
            ddlSalesType.Visible = True
            lblTerms.Visible = False
            ddlTerms.Visible = True
        End If

        If Page.IsPostBack Then
             GetUIValues()
        Else

             LoadTermCodes()
        End If 
```

LoadTermCodes 是我绑定导致我出现问题的下拉列表的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T15:22:22.317

你确定你在做回发而不是刷新吗？如果没有更多关于问题或代码块的上下文，很难为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-05T10:21:32.200

I'm finding the same problem... in my case, the dropdownlist is filled by a javascript function after another dropdownlist onchange client event. On PageLoad, the 2nd dropdownlist has lost all its items and so its selectedIndex turns to 0\. Is there any way of preventing this?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T15:25:46.160

这可能是找错了树，但过去让我抓狂的几件事让我摸不着头脑：

*   将输入元素命名为重复/保留的单词（考虑“名称”、“方法”、“重置”等）
*   将表单元素物理地置于要提交的表单之外

我发现当所有的逻辑调试都没有结果时，我自己的愚蠢有时会造成像这样浪费时间的“神秘”错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T15:32:20.450

您在页面生命周期的哪个阶段绑定下拉列表？如果您在 page_init 中进行绑定，它应该可以工作，如果您在 page_load 中进行绑定，请确保将 !IsPostBack 包裹在绑定命令周围。

如果您发布有问题的代码，则更容易进行故障排除。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-09-16T17:24:33.397

这可能只是一个语法错误，但不应该

```
 If Page.IsPostBack Then
             GetUIValues()
        Else 
```

看起来像这样

```
 If  NOT Page.IsPostBack Then
         GetUIValues()
    Else 
```

# c# - 判断方法是否是策略注入中的属性的最佳方法是什么？

> ID：73467
> 
> 赞同：3
> 
> 时间：2008-09-16T15:18:33.527
> 
> 标签：c#, enterprise-library, policy-injection

我有一个应用于类的自定义处理程序（使用 entlib 4 中的策略注入应用程序块），我想知道调用 Invoke 时输入法是否是属性。以下是我的处理程序的样子。

```
[ConfigurationElementType(typeof(MyCustomHandlerData))]
public class MyCustomHandler : ICallHandler
{
    public IMethodReturn Invoke(IMethodInvocation input, GetNextHandlerDelegate getNext)
    {
        if (input.MethodBase.IsPublic && (input.MethodBase.Name.Contains("get_") || input.MethodBase.Name.Contains("set_")))
        {
            Console.WriteLine("MyCustomHandler Invoke called with input of {0}", input.MethodBase.Name);
        }
        return getNext().Invoke(input, getNext);
    }

    public int Order { get; set; }
} 
```

从我的代码示例中可以看出，到目前为止我想到的最好的方法是解析方法名称。难道没有更好的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T15:58:19.127

您还可以检查 IsSpecialName 是否为真。这在属性中是正确的（除其他外）

在 il 级别，方法公开如下（使用 Environment.ExitCode 作为示例）：

```
.method public hidebysig specialname static int32 get_ExitCode() cil managed
.method public hidebysig specialname static void set_ExitCode(int32 'value') cil managed 
```

如果您想变得花哨，可以在提取该属性存在的名称后进行验证，但老实说

```
if (m.IsSpecialName && (m.Attributes & MethodAttributes.HideBySig) != 0)) 
```

以及以 get_ 或 set_ 开头，那么即使对于使用讨厌的名字的人也应该很好（伪造 hidebysig 很容易，伪造 IsSpecialName 会非常棘手）

但是，没有什么是可以保证的。有人可以使用 set_Foo 方法发出一个类，该方法看起来就像一个真正的 set 方法，但实际上不是只读属性上的一个集合。除非你检查属性 CanRead/CanWrite 是否为好。

尽管您并不期望故意规避，但这让我觉得您很疯狂。MethodInfo 上执行此逻辑的简单实用程序/扩展方法不会太难，并且包括 IsSpecialName 几乎肯定会满足您的所有需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T15:42:58.630

您可以检查 IsSpecialName 属性；对于属性 getter 和 setter 来说也是如此。但是，对于其他特殊方法也是如此，例如运算符重载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T15:46:27.967

我不熟悉该应用程序块，但假设 MethodBase 属性的类型为 System.Reflection.MethodBase，您可以查看 IsSpecialName 属性。

[MSDN 上的 System.Reflection.MethodBase.IsSpecialName](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.isspecialname.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-08T02:55:06.953

你们中的一些人提到了使用 MethodBase 类型的“IsSpecialName”属性。虽然对于属性“gets”或“sets”确实会返回 true，但对于诸如 add_EventName 或 remove_EventName 之类的运算符重载，它也会返回 true。因此，您需要检查 MethodBase 实例的其他属性以确定它是否是属性访问器。不幸的是，如果您所拥有的只是对 MethodBase 实例的引用（我相信在 Unity 框架中拦截行为就是这种情况），那么就没有真正的“干净”方法来确定它是属性设置器还是获取器。我发现的最好方法如下：

C＃：

```
bool IsPropertySetter(MethodBase methodBase){
     return methodBase.IsSpecialName && methodBase.Name.StartsWith("set_");
}

bool IsPropertyGetter(MethodBase methodBase){
     return methodBase.IsSpecialName && methodBase.Name.StartsWith("get_");
} 
```

VB：

```
 Private Function IsPropertySetter(methodBase As MethodBase) As Boolean

      Return methodBase.IsSpecialName AndAlso methodBase.Name.StartsWith("set_")

 End Function

 Private Function IsPropertyGetter(methodBase As MethodBase) As Boolean

      Return methodBase.IsSpecialName AndAlso methodBase.Name.StartsWith("get_")

 End Function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-19T10:02:28.260

这有点晚了，但其他人也会读到这个。除了 IsSpecialName 和检查 set_ 前缀（操作符有 op_，事件 subscr./remov.有 add_，remove_）之外，您还可以检查方法是否与任何属性方法匹配，如下所示：

```
 bool isProperty = method.ReflectedType.GetProperties().FirstOrDefault(p => 
        p.GetGetMethod().GetHashCode() == method.GetHashCode() 
        || p.GetSetMethod().GetHashCode() == method.GetHashCode())!=null; 
```

# c - 非阻塞 pthread_join

> ID：73468
> 
> 赞同：24
> 
> 时间：2008-09-16T15:18:36.490
> 
> 标签：c, multithreading, pthreads

我正在编写多线程服务器的关闭代码。如果一切顺利，所有线程都应该自行退出，但是线程卡住的可能性很小。在这种情况下，使用非阻塞连接会很方便所以我可以做到。

**有没有办法进行非阻塞 pthread_join？某种定时加入也会很好。**

像这样的东西：

```
foreach 线程做
  nb_pthread_join();
    如果还在运行
      pthread_cancel();

```

我可以想到更多非阻塞连接有用的情况。

似乎没有这样的功能，所以我已经编写了一个解决方法，但这并不像我想要的那么简单。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-08-07T13:25:43.290

如果您在 Linux 上运行您的应用程序，您可能有兴趣知道：

```
int pthread_tryjoin_np(pthread_t thread, void **retval);

int pthread_timedjoin_np(pthread_t thread, void **retval,
                                const struct timespec *abstime); 
```

请注意，正如后缀所暗示的那样，“np”表示“不可移植”。它们不是 POSIX 标准，gnu 扩展，但很有用。

[链接到手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_tryjoin_np.3.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2011-09-23T23:28:49.993

'pthread_join' 机制是一种方便使用，如果它恰好做你想要的。它不会做任何你自己做不到的事情，如果它不完全是你想要的，那么你就可以编写你想要的代码。

没有真正的理由您应该真正关心线程是否已终止。你关心的是线程正在做的工作是否完成。为了说明这一点，让线程做一些事情来表明它正在工作。您如何做到这一点取决于您的特定问题的理想选择，这在很大程度上取决于线程在做什么。

从改变你的想法开始。不是线程卡住了，而是线程正在做什么卡住了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-17T08:55:06.247

如果您正在为 QNX 开发，您可以使用 pthread_timedjoin() 函数。

否则，您可以创建一个单独的线程来执行 pthread_join() 并警告父线程，例如通过信号量发出子线程完成的信号。这个单独的线程可以返回从 pthread_join() 获取的内容，让父线程不仅可以确定子线程何时完成，还可以确定它返回的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T15:24:51.483

答案实际上取决于您为什么要这样做。例如，如果您只想清理死线程，那么最简单的方法就是拥有一个循环和连接的“死线程清理器”线程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T15:50:08.553

我不确定你到底是什么意思，但我假设你真正需要的是等待和通知机制。

简而言之，它是这样工作的：您等待一个条件满足超时。如果出现以下情况，您的等待将结束：

*   发生超时，或
*   如果条件满足。

您可以循环使用它并为您的逻辑添加更多智能。我找到的与 Pthreads 相关的最佳资源是本教程：POSIX 线程编程（[https://computing.llnl.gov/tutorials/pthreads/](https://computing.llnl.gov/tutorials/pthreads/)）。

我也很惊讶地看到 Pthreads 中没有用于定时连接的 API。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-17T08:15:58.260

没有 timed `pthread_join`，但是如果您正在等待其他线程在条件上阻塞，您可以使用 timed`pthread_cond_timed_wait`代替`pthread_cond_wait`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-17T14:25:42.147

正如其他人指出的那样，标准 pthread 库中没有非阻塞 pthread_join 可用。

但是，鉴于您陈述的问题（试图保证所有线程在程序关闭时都已退出），不需要这样的功能。你可以简单地这样做：

```
int killed_threads = 0;
for(i = 0; i < num_threads; i++) {
   int return = pthread_cancel(threads[i]);
   if(return != ESRCH)
      killed_threads++;
}
if(killed_threads)
    printf("%d threads did not shutdown properly\n", killed_threads)
else
    printf("All threads exited successfully"); 
```

在所有线程（终止与否）上调用 pthread_cancel 没有任何问题，因此为所有线程调用它不会阻塞并保证线程退出（干净与否）。

这应该是一个“简单”的解决方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T15:20:16.800

您可以将一个字节推送到以非阻塞方式打开的管道中，以便在完成时向另一个线程发出信号，然后使用非阻塞读取来检查管道的状态。

# .net - 当 SelectionMode=FullRowSelect 时如何突出显示 DataGridView 中的当前单元格

> ID：73471
> 
> 赞同：5
> 
> 时间：2008-09-16T15:18:57.987
> 
> 标签：.net, vb.net, winforms, datagridview

我有一个可编辑的 DataGridView，SelectionMode 设置为 FullRowSelect（因此当用户单击任何单元格时，整行都会突出显示）。但是，我希望当前具有焦点的单元格以不同的背景颜色突出显示（以便用户可以清楚地看到他们将要编辑的单元格）。我该怎么做（我不想更改 SelectionMode）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-16T16:30:07.100

我想出了一个更好的方法，使用 CellFormatting 事件：

```
Private Sub uxContacts_CellFormatting(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellFormattingEventArgs) Handles uxContacts.CellFormatting
    If uxContacts.CurrentCell IsNot Nothing Then
        If e.RowIndex = uxContacts.CurrentCell.RowIndex And e.ColumnIndex = uxContacts.CurrentCell.ColumnIndex Then
            e.CellStyle.SelectionBackColor = Color.SteelBlue
        Else
            e.CellStyle.SelectionBackColor = uxContacts.DefaultCellStyle.SelectionBackColor
        End If
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-05T08:16:32.947

对我来说`CellFormatting`，诀窍。我有一组可以编辑的列（我使它以不同的颜色出现），这是我使用的代码：

```
Private Sub Util_CellFormatting(ByVal Sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellFormattingEventArgs) Handles dgvUtil.CellFormatting
    If dgvUtil.CurrentCell IsNot Nothing Then
        If e.RowIndex = dgvUtil.CurrentCell.RowIndex And e.ColumnIndex = dgvUtil.CurrentCell.ColumnIndex And (dgvUtil.CurrentCell.ColumnIndex = 10 Or dgvUtil.CurrentCell.ColumnIndex = 11 Or dgvUtil.CurrentCell.ColumnIndex = 13) Then
            e.CellStyle.SelectionBackColor = Color.SteelBlue
        Else
            e.CellStyle.SelectionBackColor = dgvUtil.DefaultCellStyle.SelectionBackColor
        End If
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T15:33:18.170

您想使用 DataGridView RowPostPaint 方法。让框架绘制行，然后返回并在您感兴趣的单元格中着色。

一个例子是在[MSDN](http://msdn.microsoft.com/en-us/library/85kxk29c.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T21:55:49.380

试试这个， OnMouseMove 方法：

```
Private Sub DataGridView1_CellMouseMove(sender As Object, e As System.Windows.Forms.DataGridViewCellMouseEventArgs) Handles DataGridView1.CellMouseMove
    If e.RowIndex >= 0 Then
        DataGridView1.Rows(e.RowIndex).Cells(e.ColumnIndex).Style.SelectionBackColor = Color.Red
    End If
End Sub

Private Sub DataGridView1_CellMouseLeave(sender As Object, e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.CellMouseLeave
    If e.RowIndex >= 0 Then
        DataGridView1.Rows(e.RowIndex).Cells(e.ColumnIndex).Style.SelectionBackColor = DataGridView1.DefaultCellStyle.SelectionBackColor
    End If
End Sub 
```

# linux - 无法删除目录

> ID：73474
> 
> 赞同：0
> 
> 时间：2008-09-16T15:19:28.470
> 
> 标签：linux, web-hosting, file-permissions

我的虚拟主机经常出现问题（共享）

我无法删除或更改特定目录的权限。回应是，

```
Cannot delete. Directory may not be empty 
```

我检查了权限，看起来没问题。这个文件夹中有 100 个我不想要的文件。

我联系了我的支持人员，他们解决了，说这是权限问题。但它又出现了。有什么建议么？

服务器是Linux。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T15:26:04.397

您不能**rmdir**包含文件的目录。您必须首先**rm**所有文件和子目录。很多时候，最简单的解决方案是：

```
$ rm -rf old_directory 
```

某些文件或子目录完全有可能具有权限限制，可能会阻止它们被删除。有时，这可以通过以下方式解决：

```
$ chmod -R +w old_directory 
```

但我怀疑这就是你的支持人员之前所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T15:24:23.653

这也可能是因为您的 FTP 客户端可能没有显示隐藏文件（如缓存或您的应用程序可能创建的任何隐藏文件），而隐藏文件阻止您删除目录。（虽然，在你的情况下，我不确定这是否是原因......这可能是你的托管服务提供商的权限问题。作为另一个用户（如 apache 或 www）运行的 Web 服务器与你的具有全局写入权限的目录相结合） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T15:28:45.500

我认为这是来自 FTP 服务器的响应？

通常，来自 FTP 服务器的消息确实意味着它。如果它说目录不为空，则目录中可能存在您看不到的某些文件，这些文件可能是以下文件之一：

*   您的 PHP/JSP/ASP/whatever 脚本可能在不同的用户帐户下运行，从而创建您可能无法查看/删除的文件
*   您的主机的网络界面是否在您的 FTP 帐户下运行？如果您从 Web 界面管理一些文件，然后再通过 FTP 管理，则可能存在权限冲突。
*   无意中创建的托管服务器/操作系统文件，例如从托管的 Web 界面

如果它来自脚本，请编写一次性脚本，删除文件和该目录，然后上传并执行它。

只是为了确定，有些FTP服务器不支持直接删除目录，你需要所有的文件，是这样吗？

# java - 如何使用 Java 1.4 和 SAX 将任意数据编码为 XML？

> ID：73476
> 
> 赞同：2
> 
> 时间：2008-09-16T15:19:30.467
> 
> 标签：java, xml, sax

我们使用 SAX 来解析 XML，因为它不需要将整个 XML 文档读入内存来解析单个值。我阅读了许多坚持 SAX 只能用于解析/解码 XML 而不能创建它的文章。这是真的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T15:20:20.370

不，这不是真的，您可以使用类似于以下内容的方式将 XML 编码为 Java 中的任何 Writer：

```
char[] ch;
AttributesImpl atts = new AttributesImpl();
Writer writer = new StringWriter();
StreamResult streamResult = new StreamResult(writer);
SAXTransformerFactory tf = (SAXTransformerFactory) TransformerFactory.newInstance();

// SAX2.0 ContentHandler
TransformerHandler transformerHandler = tf.newTransformerHandler();

Transformer serializer = transformerHandler.getTransformer();

serializer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
// serializer.setOutputProperty(OutputKeys.DOCTYPE_SYSTEM, "nodes.dtd");
serializer.setOutputProperty(OutputKeys.INDENT, "yes");

transformerHandler.setResult(streamResult);

transformerHandler.startDocument();

atts.clear();
// atts.addAttribute("", "", "xmlns", "CDATA", "http://www.example.com/nodes");
// atts.addAttribute("", "", "xmlns:xsi", "CDATA", "http://www.w3.org/2001/XMLSchema-instance");
// atts.addAttribute("", "", "xsi:schemaLocation", "CDATA", "/nodes.xsd");
transformerHandler.startElement("", "", "node_list", atts);

// displayName element
if (displayName != null) {
    transformerHandler.startElement("", "", "display_name", null);
    ch = displayName.toCharArray();
    transformerHandler.characters(ch, 0, ch.length);
    transformerHandler.endElement("", "", "display_name");
}

// nodes element
transformerHandler.startElement("", "", "nodes", null);

atts.clear();
atts.addAttribute("", "", "node_type", "CDATA", "sometype");
transformerHandler.startElement("", "", "node", atts);

ch = node.getValue().toCharArray();
transformerHandler.startElement("", "", "value", null);
transformerHandler.characters(ch, 0, ch.length);
transformerHandler.endElement("", "", "value");

transformerHandler.endElement("", "", "node");

transformerHandler.endElement("", "", "nodes");

transformerHandler.endElement("", "", "node_list");

transformerHandler.endDocument();

String xml = writer.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T16:00:39.993

SAX 处理程序接口被设计为易于实现。很容易编写一个类似的类（可能包装一个 SAX 接口）以使其易于调用 - 链接、记住要关闭的元素、更简单的属性等。

# c# - 如何在标记中“绑定”标签的文本属性

> ID：73484
> 
> 赞同：3
> 
> 时间：2008-09-16T15:20:26.377
> 
> 标签：c#, asp.net

基本上我想找到一种方法来做类似的事情：

```
<asp:Label ID="lID" runat="server" AssociatedControlID="txtId" Text="<%# MyProperty %>"></asp:Label> 
```

我知道我可以从后面的代码中设置它（编写 lId.Text = MyProperty），但我更喜欢在标记中进行设置，但我似乎找不到解决方案。（MyProperty 是一个字符串属性）干杯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-16T16:11:04.023

你可以做

```
<asp:Label runat="server" Text='<%# MyProperty %>' /> 
```

然后是代码隐藏中的 Page.DataBind()。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-16T18:08:46.940

代码表达式也是一种选择。与标准的 <%= %> 标记不同，这些可以在 ASP 标记中的引号内使用。

一般语法是：

```
<%$ resources: ResourceKey %> 
```

appSettings 有一个内置表达式：

```
<%$ appSettings: AppSettingsKey %> 
```

更多信息在这里：[http ://weblogs.asp.net/infinitiesloop/archive/2006/08/09/The-CodeExpressionBuilder.aspx](http://weblogs.asp.net/infinitiesloop/archive/2006/08/09/The-CodeExpressionBuilder.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T15:23:14.013

保留标记并调用 Page.DataBind(); 在你的代码后面。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T15:26:44.333

```
<asp:Label id="lID" runat="server"><%= MyProperty %></asp:Label> 
```

由于 asp.net 标记不允许 <% %> 构造，因此不能使用 Text="<%= MyProperty %>"。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T15:22:39.990

从代码隐藏调用 lID.Databind()

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T15:28:58.400

```
<div> <%=MyProperty"%></div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T17:55:16.770

当您使用 <%# MyProperty %> 声明时，您需要对其进行数据绑定，但在使用 <%= MyProperty %> 时则不需要（这类似于仅编写 Response.Write(MyProperty)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-06-03T19:08:25.733

你可以这样做：

```
<asp:Label ID="lblCurrentTime" runat="server">
    Last update: <%=DateTime.Now.ToString()%>
</asp:Label> 
```

# enterprise-library - 我在哪里可以得到关于策略注入的简单解释？

> ID：73487
> 
> 赞同：3
> 
> 时间：2008-09-16T15:20:45.783
> 
> 标签：enterprise-library, application-blocks, policy-injection

我想为消息灵通的同事提供一个简单的政策注入解释。哪里有这方面的好资源？我从 entlib 帮助文件中了解了策略注入，我确信这不是最佳选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-31T14:44:04.403

[策略注入的 MSDN 文档](http://msdn.microsoft.com/en-us/library/cc309370.aspx)有一个非常清楚的解释：

> 应用程序包括业务逻辑和横切关注点的混合，两者通常混合在一起——这会使代码更难阅读和维护。应用程序的每个任务或功能都称为“关注点”。在应用程序中实现对象特性的关注点，例如业务逻辑，是核心关注点。横切关注点是跨不同对象（例如，日志记录、授权、验证和检测）通用的必要任务、特性或流程。策略注入应用程序块的目的是分离核心关注点和横切关注点。

简而言之，PI 块允许开发人员定义一组策略来指定系统中对象的行为。因此，您的核心业务逻辑，例如计算会计年度单位利润的代码（一个关注点），与该逻辑执行的日志记录（另一个但更常用的关注点）是分开的。

相同的文档说 PI 块*不是*AOP，因为：

*   它使用拦截来仅启用预处理处理程序和后处理处理程序。
*   它不会将代码插入方法中。
*   它不为类构造函数提供拦截。

因此，试图从 AOP 的角度来看待 PI 可能会有些混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T15:34:23.083

EntLib 所谓的策略注入，实际上是面向方面的编程。前阵子在我的博客上写了一篇[介绍AOP概念的文章](http://iridescence.no/post/Aspect-Oriented-Programming-A-Primer.aspx)，也许对你有帮助。

# maven-2 - maven2 多项目构建中缺少 aar 文件

> ID：73491
> 
> 赞同：2
> 
> 时间：2008-09-16T15:21:03.940
> 
> 标签：maven-2

我正在尝试使用 maven2 构建一个axis2项目。我的项目被配置为带有 AAR、WAR 和 EAR 模块的父项目。当我运行父项目的包目标时，控制台显示构建成功并且所有文件都已创建。但是，AAR 项目生成的 AAR 文件不包含在生成的 WAR 项目中。AAR 项目被列为 WAR 项目的依赖项。当我显式运行 WAR 的包目标时，AAR 文件将包含在 WAR 文件中。

为什么在运行孩子的包目标时父母的包目标不包含必要的依赖关系？

我在我的战争项目中使用 maven-war-plugin v2.1-alpha-2。

父 POM：

```
<parent>
    <groupId>companyId</groupId>
    <artifactId>build</artifactId>
    <version>1.0.0-SNAPSHOT</version>
</parent>
<modelVersion>4.0.0</modelVersion>
<groupId>com.nationwide.nf</groupId>
<artifactId>parent</artifactId>
<packaging>pom</packaging>
<version>1.0.0-SNAPSHOT</version>
<modules>
    <module>ws-war</module>
    <module>ws-aar</module>
    <module>ws-ear</module>
</modules> 
```

AAR POM：

```
<parent>
    <artifactId>parent</artifactId>
    <groupId>companyId</groupId>
    <version>1.0.0-SNAPSHOT</version>
</parent>
<modelVersion>4.0.0</modelVersion>
<groupId>companyId</groupId>
<artifactId>ws-aar</artifactId>
<version>1.0.0-SNAPSHOT</version>
<description/>
<packaging>aar</packaging>
<dependencies>...</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.5</source>
                <target>1.5</target>
            </configuration>
        </plugin> 

        <plugin>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-wsdl2code-maven-plugin</artifactId>
            <version>1.4</version>
            <configuration>...</configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>wsdl2code</goal>
                    </goals>
                    <id>axis2-gen-sources</id>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-aar-maven-plugin</artifactId>
            <version>1.4</version>
            <extensions>true</extensions>
            <configuration>...</configuration>
        </plugin>
    </plugins>
</build> 
```

战争 POM：

```
<parent>
    <artifactId>parent</artifactId>
    <groupId>companyId</groupId>
    <version>1.0.0-SNAPSHOT</version>
</parent>
<modelVersion>4.0.0</modelVersion>
<groupId>companyId</groupId>
<artifactId>ws-war</artifactId>
<packaging>war</packaging>
<version>1.0.0-SNAPSHOT</version>
<description/>
<dependencies>
    <dependency>
        <groupId>companyId</groupId>
        <artifactId>ws-aar</artifactId>
        <type>aar</type>
        <version>1.0.0-SNAPSHOT</version>
    </dependency>
    .
    .
    .
</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1-alpha-2</version>
            <configuration>
                <warName>appName</warName>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

谢谢，乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-23T13:22:05.267

通过将以下插件添加到 ws-war pom 文件中，我能够使我的 maven 构建正常工作：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>
                            ${project.build.directory}/${project.build.finalName}/WEB-INF/services
                        </outputDirectory>
                        <includeArtifactIds>
                            ws-aar
                        </includeArtifactIds>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-18T03:58:26.157

您是否尝试过在依赖项中使用“类型”元素？例如：

```
<dependency>
  <groupId>group-a</groupId>
  <artifactId>artifact-b</artifactId>
  <version>1.0</version>
  <type>aar</type>
</dependency> 
```

如果没有看到您的实际 pom 文件，很难确定您的问题是什么。

更新：

如果从父项目运行：

```
 mvn clean install 
```

1.  就您的问题而言，“安装”是否具有与“包”不同的行为？
2.  您是否在本地 maven 存储库 (~/.m2/repository/com/mycompany/.../) 中看到 .aar 文件？

附带说明一下，我对 maven 战争插件从来都不是很满意。我总是最终使用 maven 程序集插件。它似乎工作得更好，更一致。另外，请确保您使用的是最新版本的 maven (2.0.9)。我花了半天时间解决了一个在最新版本中修复的类似问题。

# winapi - 以编程方式选择 MFC 单选按钮

> ID：73498
> 
> 赞同：3
> 
> 时间：2008-09-16T15:22:02.287
> 
> 标签：winapi, mfc

当我初始化一个对话框时，我想选择表单上的一个单选按钮。我没有看到使用类向导关联控件变量的方法，就像您通常使用 CButtons、CComboBoxes 等所做的那样......

此外，它甚至不存在 CRadioButton 类。

如何选择几个单选按钮之一？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-16T15:29:18.337

使用[CWnd::CheckRadioButton](https://docs.microsoft.com/en-us/cpp/mfc/reference/cwnd-class?view=msvc-160#checkradiobutton)设置选择组中的一个按钮，使用[CWnd::GetCheckedRadioButton](https://docs.microsoft.com/en-us/cpp/mfc/reference/cwnd-class?view=msvc-160#getcheckedradiobutton)检索选定按钮的 ID。确保在您的对话框对象上调用这些方法，而不是任何单选按钮对象。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-16T15:24:29.720

单选按钮和复选按钮只是按钮。使用`CButton`控件并使用`GetCheck`/ `SetCheck`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-16T15:26:58.077

按照 mos 所说的，以下工作成功了：

```
CButton* pButton = (CButton*)GetDlgItem(IDC_RADIOBUTTON);
pButton->SetCheck(true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-02-16T08:21:49.747

```
void CMyDlg::DoDataExchange(CDataExchange* pDX)
{
  ...
  DDX_Radio(pDX, IDC_RADIO1, m_Radio);
  ...
} 
```

但这与向导生成的相同

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-07T01:28:22.867

您可以使用此单线：

```
::SendMessage(GetDlgItem(IDC_RADIO1)->m_hWnd, BM_SETCHECK, BST_CHECKED, NULL); 
```

# sharepoint - 如何将 SharePoint 网站从一个活动目录域移动到另一个？

> ID：73499
> 
> 赞同：0
> 
> 时间：2008-09-16T15:22:03.860
> 
> 标签：sharepoint, active-directory, dns, sites

我在一个活动目录域（例如 domain1）中有一个 SharePoint 虚拟机，我想将它拥有的所有站点转移到另一个活动目录域（domain2）。我不知道执行此操作的最佳程序是哪个，如果我将虚拟机从 domain1 分离并附加到 domain2，它可能不起作用，因为 SharePoint 使用的所有帐户都不再有效。（两个域不在同一个网络中，并且彼此不信任）。此外，我可以使用 stsadm 导出 domain1 中的站点并在 domain2 中导入它们，但是如果我使用这种技术，我必须手动安装我在原始服务器上制作的所有功能、解决方案和个性化设置。有人知道将站点从一个域“移动”到另一个域的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T07:56:45.453

有一个[STSADM Custom Extension: move web](http://stsadm.blogspot.com/2007/09/move-web.html)这应该是您正在寻找的：

> C:>stsadm -help gl-moveweb
> 
> stsadm -o gl-moveweb
> 
> 移动网络。
> 
> 参数：-url -parenturl [-haltonwarning（仅在移动到新网站集时考虑）] [-haltonfatalerror（仅在移动到新网站集时考虑）] [-includeusersecurity（仅在移动到新网站集时考虑） ] [-retainobjectidentity（仅在移动到新网站集时考虑）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T15:27:06.563

通过将本地帐户添加到管理员组并将服务器加入新域，您可能会取得一些成功。然后手动更新服务器中使用的所有 AD 帐户。我需要注意的是，您的所有用户都将拥有与旧帐户无关的新帐户。

您应该向您的域管理员询问新帐户的 SID 更新，以便他们也有来自旧域的 SID。

# visual-studio - 如何判断 Visual Studio 设计器是否正在运行 .NET 代码

> ID：73515
> 
> 赞同：60
> 
> 时间：2008-09-16T15:23:21.597
> 
> 标签：visual-studio, gui-designer

当我在 Visual Studio 的设计器中打开 Windows 窗体窗体时，我的代码中出现了一些错误。如果表单是由设计师打开的，我想在我的代码中分支并执行不同的初始化，而不是真正运行它。

如何在运行时确定代码是否作为设计器打开表单的一部分执行？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2008-09-16T15:28:37.043

要确定您是否处于“设计模式”：

*   Windows 窗体组件（和控件）具有[DesignMode](http://msdn.microsoft.com/en-us/library/system.componentmodel.component.designmode.aspx)属性。
*   Windows Presentation Foundation 控件应使用[IsInDesignMode](http://msdn.microsoft.com/en-us/library/system.componentmodel.designerproperties.isindesignmode.aspx)附加属性。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-05-23T18:20:45.530

```
if (System.ComponentModel.LicenseManager.UsageMode == System.ComponentModel.LicenseUsageMode.Designtime)
{
  // Design time logic
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-09-16T15:35:27.060

Control.DesignMode 属性可能是您正在寻找的。它告诉您控件的父控件是否在设计器中打开。

在大多数情况下，它工作得很好，但在某些情况下它不能按预期工作。首先，它在控件构造函数中不起作用。其次，“孙子”控件的 DesignMode 为 false。例如，当 UserControl 承载在父级中时，承载在 UserControl 中的控件上的 DesignMode 将返回 false。

有一个非常简单的解决方法。它是这样的：

```
public bool HostedDesignMode
{
  get 
  {
     Control parent = Parent;
     while (parent!=null)
     {
        if(parent.DesignMode) return true;
        parent = parent.Parent;
     }
     return DesignMode;
  }
} 
```

我还没有测试过该代码，但它*应该可以*工作。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2008-12-09T15:20:52.670

最可靠的方法是：

```
public bool isInDesignMode
{
    get
    {
        System.Diagnostics.Process process = System.Diagnostics.Process.GetCurrentProcess();
        bool res = process.ProcessName == "devenv";
        process.Dispose();
        return res;
    }
} 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2011-10-18T02:17:16.577

最可靠的方法是忽略 DesignMode 属性并使用您自己在应用程序启动时设置的标志。

班级：

```
public static class Foo
{
    public static bool IsApplicationRunning { get; set; }
} 
```

程序.cs：

```
[STAThread]
static void Main()
{
     Foo.IsApplicationRunning = true;
     // ... code goes here ...
} 
```

然后只需在需要时检查标志。

```
if(Foo.IsApplicationRunning)
{
    // Do runtime stuff
}
else
{
    // Do design time stuff
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-02-10T12:49:53.523

我在 Visual Studio Express 2013 中遇到了同样的问题。我尝试了这里建议的许多解决方案，但对我[有用的是另一个线程的答案](https://stackoverflow.com/a/21054933/1287392)，如果链接断开，我将在此处重复：

```
protected static bool IsInDesigner
{
    get { return (Assembly.GetEntryAssembly() == null); }
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-09-27T10:10:43.983

devenv 方法在 VS2012 中停止工作，因为设计器现在有自己的进程。这是我目前正在使用的解决方案*（'devenv' 部分留在那里留作遗留，但没有 VS2010 我无法测试它）*。

```
private static readonly string[] _designerProcessNames = new[] { "xdesproc", "devenv" };

private static bool? _runningFromVisualStudioDesigner = null;
public static bool RunningFromVisualStudioDesigner
{
  get
  {
    if (!_runningFromVisualStudioDesigner.HasValue)
    {
      using (System.Diagnostics.Process currentProcess = System.Diagnostics.Process.GetCurrentProcess())
      {
        _runningFromVisualStudioDesigner = _designerProcessNames.Contains(currentProcess.ProcessName.ToLower().Trim());
      }
    }

    return _runningFromVisualStudioDesigner.Value;
  }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-04-01T09:08:16.827

```
/// <summary>
/// Are we in design mode?
/// </summary>
/// <returns>True if in design mode</returns>
private bool IsDesignMode() {
    // Ugly hack, but it works in every version
    return 0 == String.CompareOrdinal(
        "devenv.exe", 0,
        Application.ExecutablePath, Application.ExecutablePath.Length - 10, 10);
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-16T15:24:34.870

```
System.Diagnostics.Debugger.IsAttached 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-16T15:26:25.503

这是 hack-ish，但如果您使用的是[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)，并且当您在 Visual Studio 中运行时，*My.Application.Deployment.CurrentDeployment*将是 Nothing，因为您还没有部署它。我不确定如何检查 C# 中的等效值。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-12-15T16:59:18.883

```
using (System.Diagnostics.Process process = System.Diagnostics.Process.GetCurrentProcess())
{
    bool inDesigner = process.ProcessName.ToLower().Trim() == "devenv";
    return inDesigner;
} 
```

我尝试了上面的代码（添加了一个 using 语句），这在某些情况下对我来说会失败。在直接放置在表单中的用户控件的构造函数中进行测试，并在启动时加载设计器。但会在其他地方工作。

在所有地点对我有用的是：

```
private bool isDesignMode()
{
    bool bProcCheck = false;
    using (System.Diagnostics.Process process = System.Diagnostics.Process.GetCurrentProcess())
    {
        bProcCheck = process.ProcessName.ToLower().Trim() == "devenv";
    }

    bool bModeCheck = (System.ComponentModel.LicenseManager.UsageMode == System.ComponentModel.LicenseUsageMode.Designtime);

    return bProcCheck || DesignMode || bModeCheck;
} 
```

也许有点矫枉过正，但它有效，所以对我来说已经足够了。

上面提到的例子中成功的是bModeCheck，所以很可能DesignMode是多余的。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-16T15:25:32.497

我不确定在调试模式下运行是否算作真实，但一种简单的方法是`if`在代码中包含一个检查`System.Diagnostics.Debugger.IsAttached`.

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-16T15:27:35.533

您检查`DesignMode`控件的属性：

```
if (!DesignMode)
{
//Do production runtime stuff
} 
```

请注意，这在您的构造函数中不起作用，因为组件尚未初始化。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-12-09T15:26:30.597

我们在 UserControls 中使用以下代码，它可以完成工作。正如其他成员所指出的那样，仅使用 DesignMode 在使用您的自定义用户控件的应用程序中不起作用。

```
 public bool IsDesignerHosted
    {
        get { return IsControlDesignerHosted(this); }
    }

    public bool IsControlDesignerHosted(System.Windows.Forms.Control ctrl)
    {
        if (ctrl != null)
        {
            if (ctrl.Site != null)
            {
                if (ctrl.Site.DesignMode == true)
                    return true;
                else
                {
                    if (IsControlDesignerHosted(ctrl.Parent))
                        return true;
                    else
                        return false;
                }
            }
            else
            {
                if (IsControlDesignerHosted(ctrl.Parent))
                    return true;
                else
                    return false;
            }
        }
        else
            return false;
    } 
```

基本上上面的逻辑归结为：

```
 public bool IsControlDesignerHosted(System.Windows.Forms.Control ctrl)
    {
        if (ctrl == null) return false;
        if (ctrl.Site != null && ctrl.Site.DesignMode) return true;
        return IsControlDesignerHosted(ctrl.Parent);
    } 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-06-24T11:25:08.517

运行项目时，其名称会附加“.vshost”。

所以，我用这个：

```
 public bool IsInDesignMode
    {
        get
        {
            Process p = Process.GetCurrentProcess();
            bool result = false;

            if (p.ProcessName.ToLower().Trim().IndexOf("vshost") != -1)
                result = true;
            p.Dispose();

            return result;
        }
    } 
```

这个对我有用。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2012-07-13T20:05:11.753

如果您在设计时创建了根本不需要的属性，则可以使用**DesignerSerializationVisibility**属性并将其设置为 Hidden。例如：

```
protected virtual DataGridView GetGrid()
{
    throw new NotImplementedException("frmBase.GetGrid()");
}

[DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
public int ColumnCount { get { return GetGrid().Columns.Count; } set { /*Some code*/ } } 
```

每次我更改表单`NotImplementedException()`并尝试保存时，它都会阻止我的 Visual Studio 崩溃。相反，Visual Studio 知道我不想序列化这个属性，所以它可以跳过它。它只在表单的属性框中显示一些奇怪的字符串，但忽略它似乎是安全的。

请注意，此更改在您重建之前不会生效。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-16T15:28:32.893

如果您在窗体或控件中，则可以使用 DesignMode 属性：

```
if (DesignMode)
{
        DesignMode Only stuff
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-16T15:31:53.057

```
System.ComponentModel.Component.DesignMode == true 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-12-09T15:37:44.397

我发现 DesignMode 属性有问题，至少在以前版本的 Visual Studio 中是这样。因此，我使用以下逻辑制作了自己的：

```
Process.GetCurrentProcess().ProcessName.ToLower().Trim() == "devenv"; 
```

我知道，这是一种 hack，但效果很好。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-03-05T12:36:52.143

为了解决这个问题，您还可以编写如下代码：

```
private bool IsUnderDevelopment
{
    get
    {
        System.Diagnostics.Process process = System.Diagnostics.Process.GetCurrentProcess();
        if (process.ProcessName.EndsWith(".vshost")) return true;
        else return false;
    }

} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-03-13T02:10:32.077

这是另一个：

```
 //Caters only to thing done while only in design mode
        if (App.Current.MainWindow == null){ // in design mode  }

        //Avoids design mode problems
        if (App.Current.MainWindow != null) { //applicaiton is running } 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-03-16T16:55:19.593

在这里测试了大部分答案之后，不幸的是，对我来说没有任何效果（VS2015）。因此，我在[JohnV 的答案](https://stackoverflow.com/a/73659/3235669)中添加了一些改动，但它并没有开箱即用，因为 DesignMode 是 Control 类中的受保护属性。

首先我做了一个扩展方法，它通过反射返回 DesignMode 的属性值：

```
public static Boolean GetDesignMode(this Control control)
{
    BindingFlags bindFlags = BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Static;
    PropertyInfo prop = control.GetType().GetProperty("DesignMode", bindFlags);
    return (Boolean)prop.GetValue(control, null);
} 
```

然后我做了一个像JohnV这样的函数：

```
public bool HostedDesignMode
{
    get
    {
        Control parent = Parent;
        while (parent != null)
        {
            if (parent.GetDesignMode()) return true;
            parent = parent.Parent;
        }
        return DesignMode;
    }
} 
```

这是唯一对我有用的方法，避免了所有的 ProcessName 混乱，虽然不应该轻易使用反射，但在这种情况下，它起到了很大的作用！;)

**编辑：**

您还可以使第二个函数成为这样的扩展方法：

```
public static Boolean IsInDesignMode(this Control control)
{
    Control parent = control.Parent;
    while (parent != null)
    {
        if (parent.GetDesignMode())
        {
            return true;
        }
        parent = parent.Parent;
    }
    return control.GetDesignMode();
} 
```

* * *

## 回答 #23

> 赞同：-2
> 
> 时间：2013-03-29T09:35:51.397

```
 /// <summary>
    ///  Whether or not we are being run from the Visual Studio IDE
    /// </summary>
    public bool InIDE
    {
        get
        {
            return Process.GetCurrentProcess().ProcessName.ToLower().Trim().EndsWith("vshost");
        }
    } 
```

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2015-05-12T16:28:24.337

这是一种灵活的方式，可以适应您从哪里编译以及您是否关心您所处的模式。

```
string testString1 = "\\bin\\";
//string testString = "\\bin\\Debug\\";
//string testString = "\\bin\\Release\\";

if (AppDomain.CurrentDomain.BaseDirectory.Contains(testString))
{
    //Your code here
} 
```

# silverlight - Silverlight 跨域策略

> ID：73517
> 
> 赞同：3
> 
> 时间：2008-09-16T15:23:42.187
> 
> 标签：silverlight

在silverlight 应用程序中，我想从HTTP 子域访问silverlight .xap 文件的页面，但让Web 服务通过HTTPS 访问不同的子域以获取敏感信息。

我在子域的根目录下设置了clientaccesspolicy.xml，它允许silverlight 应用程序通过http 访问其服务，但不能通过https。它给出了跨域访问错误，如果没有适当的客户端访问策略，它通常会给出。

我知道浏览器本身对混合 http 和 https 有很多限制。我是否试图做一些不允许的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T15:29:57.260

查看：[http ://silverlight.net/forums/t/12741.aspx](http://silverlight.net/forums/t/12741.aspx)

> 您可以对同一域进行 https 调用或 http 跨域调用，但不能进行 https 跨域调用。
> 
> 这在 [http://msdn2.microsoft.com/en-us/library/cc189008(VS.95).aspx中有描述](http://msdn2.microsoft.com/en-us/library/cc189008(VS.95).aspx)
> 
> （请参阅矩阵中的“如果不是 HTTPS”）作者：JohnSpurlock

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-31T17:51:51.257

This is out of date since Silverlight 2.0 was released. You can now do most cross-domain scenarios with the appropriate configuration. [http://msdn.microsoft.com/en-us/library/cc197955(VS.95).aspx](http://msdn.microsoft.com/en-us/library/cc197955(VS.95).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-28T17:55:38.143

这里需要注意的重要一点是，您必须有权访问域请求的“ROOT”级别，并且 clientaccesspolicy.xml 必须位于该级别。

例如，如果您有一个生产环境，您的应用程序位于负载均衡器后面，该负载均衡器像大多数大公司一样通过 URI 将流量引导到您的应用程序，那么您就会遇到一些问题。

示例： http: [//mydomain.com/MyApplication/](http://mydomain.com/MyApplication/) * 转到您的应用程序所在的服务器。 [http://mydomain.com/clientaccesspolicy.xml](http://mydomain.com/clientaccesspolicy.xml) 是策略所在的位置。

# networking - 您如何将进出特定站点的流量引导到特定 NIC？

> ID：73518
> 
> 赞同：0
> 
> 时间：2008-09-16T15:23:43.343
> 
> 标签：networking

在 Windows XP 中：

您如何将进出特定站点的流量引导到特定 NIC？

例如：我怎么说，到 stackoverflow.com 的所有连接都应该使用我的无线连接，而所有其他站点都将使用我的以太网？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T15:31:00.330

我不确定是否有更简单的方法，但一种方法是使用比默认路由更低的度量（成本）添加到 stackoverflow.com 的 IP 的路由，该路由明确指定您的无线连接。

运行 nslookup www.stackoverflow.com 仅显示一个 IP：67.199.15.132，因此语法为：

```
route -p add 67.199.15.132 [你的无线网关] metric [低于默认路由的metric] IF [无线接口]
```

有关更多信息，请参阅路由命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T15:25:48.487

你应该可以使用 route 命令来做到这一点。路由添加（IP 地址）（网络掩码）（网关）度量 1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T15:32:06.503

修改您的路由表，以便特定主机通过所需的接口。

您需要有一个“默认”路由，可以是您的以太网或无线。但是要通过另一个接口引导流量，请使用命令行“路由”命令添加到要重定向的特定 IP 地址的路由。

例如，stackoverflow.com 的 IP 地址为 67.199.15.132（您可以使用 nslookup 或 ping 它找到它）。发出路由添加 67.199.15.132 掩码 255.255.255.255 abcd IF e 其中 abcd == 无线接口另一端路由器的 IP 地址，e 是接口号（“路由打印”命令将列出每个接口和它的接口号）。

如果将“-p”标志添加到路由命令，则路由将在重新启动之间保持不变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T15:36:10.300

在 XP 中，我经常发现通过添加/修改静态路由，我通常可以在这种情况下完成我所需要的。

当然，还有其他“高级”COTS 工具/防火墙可以为您提供更好的界面。

修改路由的一个警告 - 一旦设置了 VPN，VPN 隧道对静态路由中的更改不太满意，因此请确保在通过某些脚本初始化 NIC 后在 Windows 启动时设置它。

静态路由——这些都可以正常工作，除非您使用 VPN 隧道。

Windows“路由”帮助

操作网络路由表。

ROUTE [-f] [-p] [command [destination] [MASK netmask] [gateway] [METRIC metric] [IF 接口]

-f 清除所有网关条目的路由表。如果这与其中一个命令一起使用，则在运行命令之前清除表。-p 当与 ADD 命令一起使用时，使路由在系统引导期间保持不变。默认情况下，系统重启时不保留路由。忽略所有其他命令，这些命令总是影响适当的持久路由。Windows 95 不支持此选项。 command 其中之一： PRINT 打印路由 ADD 添加路由 DELETE 删除路由 CHANGE 修改现有路由

# c++ - 删除 C++-STL/Boost 调试符号（...或不创建它们）

> ID：73519
> 
> 赞同：5
> 
> 时间：2008-09-16T15:23:45.713
> 
> 标签：c++, debugging, stl

Linux/Gcc/LD - 工具链。

我想从库和可执行文件中删除 STL/Boost 调试符号，原因有两个：

1.  大型程序的链接速度很慢
2.  调试跳转到stl/boost代码，烦人

对于 1\. 增量链接将是一个很大的改进，但 AFAIK ld 不支持增量链接。在 1999 年 dobb 博士的日记中有一种解决方法“伪增量链接”（不再在网络中，而是在[archive.org](http://web.archive.org/web/20000131063231/www.ddj.com/articles/1999/9910/9910d/9910d.htm)中（想法是将所有内容放在动态库中，并将所有更新的目标文件放在第二个库中）首先加载）但这并不是一个真正的通用解决方案。

对于2.这里有一个脚本[，](http://ubuntuforums.org/showthread.php?p=4368377)但是a）它对我不起作用（它没有删除符号），b）它非常慢，因为它在管道末端工作，而删除它会更有效前面的符号。

显然，其他调试符号应该保留在原处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T10:03:31.357

GNU strip 接受 --strip-symbols= 的正则表达式参数 STL 和 boost 符号由于它们所在的命名空间而被名称修改。我现在没有方便的 GCC binutils，但只是看看使用的名称修改用于命名空间并为“来自命名空间 X 的符号”构造正则表达式并将其传递给 --strip-symbols=

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T18:52:55.447

据我所知，在 gcc 中没有真正的选择可以做你想做的事。主要问题是您要删除调试符号的所有代码都在标头中定义。

否则，可以单独构建一个库，剥离它，并与剥离的版本链接。

但据我所知，在 gcc 中仅从编译单元的某些部分获取调试符号，同时构建和链接（为了您所需的链接时间加速）是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T16:12:09.467

您可能不想从共享库中删除调试符号，因为您可能在某些时候需要这样做。

如果您使用 GDB 或 DDD 进行调试，您可能能够从源路径中删除 Boost 源文件，这样它就无法追踪到函数。（或者只是不追查他们，追查！）

您可以删除使用调试符号编译程序的选项，这将加快链接时间。

就像您链接到的脚本一样，您可以参考 strip 程序（“man strip”）来删除所有或某些符号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T16:13:54.220

您可能想使用条带。剥离 --strip-unneeded --strip-debug libfoo.so

你为什么不一开始就在不调试的情况下构建呢？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-08T11:05:52.657

这个答案提供了一些细节，我需要让 MSalters 的答案适用于删除 STL 符号。

STL 符号名称被破坏。诀窍是找到一个覆盖这些名称的正则表达式。我用 GNU 的 Binutils 查找了这些符号：

```
> nm --debug-syms <objectfile> 
```

我基本上搜索了 STL 函数，比如`resize`. 如果这很困难，则使用以下命令时输出变得可读：

```
> nm --debug-syms --demangle <objectfile> 
```

查找包含 STL 函数调用的行号，然后使用提供的第一个命令在同一行号上查找它的错位名称。这让我看到所有 STL 符号名称都以**_ZNSt[0-9]+**或**_ZSt[0-9]+**等开头。

为了让 GNU Strip 删除我使用的这些符号：

```
> strip --wildcard              \
    --strip-symbol='_ZNKSt*'    \
    --strip-symbol='_ZNSt*'     \
    --strip-symbol='_ZSt*'      \
    --strip-symbol='_ZNSa*'     \
    <objectfile> 
```

我直接在编译/链接的二进制文件上使用了这些命令。我通过比较`nm`删除前后的输出来验证这些符号的删除（我将输出写入文件并使用`vimdiff`）。该`--wildcard`选项允许使用正则表达式。虽然我希望**[0-9]***表示 0 到无限数量的数字，但这里它实际上意味着 1 个数字后跟无限数量的任何东西（直到行尾）。

如果您**不想进入 STL 代码**，这可以通过 gdb 的`skip file`命令来实现，就像在[此处](https://stackoverflow.com/a/42721326/2250406)完成的那样。

希望能帮助到你

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-09-16T15:27:41.587

您使用的是哪个编译器？例如，如果我正确理解您的问题，这在 MS Visual Studio 中是一件小事。

# api - 如何在 Yahoo Maps API 中将位置（地址）字符串转换为 YGeoPoint？

> ID：73524
> 
> 赞同：3
> 
> 时间：2008-09-16T15:24:02.547
> 
> 标签：api, yahoo-maps

我有一个来自数据库的地址列表，我想在雅虎地图上放置标记。YMap 上的[`addMarker()`方法](http://developer.yahoo.com/maps/ajax/V3.8/index.html#YMap)需要一个 YGeoPoint，它需要一个纬度和经度。但是，Yahoo Maps 必须知道如何从地址转换，因为`drawZoomAndCenter(LocationType,ZoomLevel)`可以获取地址。我可以使用`drawZoomAndCenter()`then进行转换，`getCenterLatLon()`但有没有更好的方法，不需要平局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T09:47:11.630

您可以要求地图对象进行地理编码，并捕获回调：

```
<script type="text/javascript"> 
var map = new YMap(document.getElementById('map'));
map.drawZoomAndCenter("Algeria", 17);

map.geoCodeAddress("Cambridge, UK");

YEvent.Capture(map, EventsList.onEndGeoCode, function(geoCode) {
    if (geoCode.success)
        map.addOverlay(new YMarker(geoCode.GeoPoint));
});
</script> 
```

需要注意的一件事——在这个例子中，`drawAndZoom`调用本身会发出一个地理编码请求，所以你也会从中得到回调。您可能希望将其过滤掉，或根据 GeoPoint 设置地图的中心。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-09-16T15:32:18.703

如果您使用美国地址，您可以使用[geocoder.us](http://geocoder.us/)，它有[APIs](http://geocoder.us/help/)。

此外，*Google Maps Hacks*有一个 hack，[“Hack 62\. Find the Latitude and Longitude of a Street Address”](http://safari.oreilly.com/0596101619/googlemapshks-CHP-7-SECT-2)。

# ruby-on-rails - 在 Ruby on Rails 中搜索的最佳选择是什么？

> ID：73527
> 
> 赞同：17
> 
> 时间：2008-09-16T15:24:18.800
> 
> 标签：ruby-on-rails, ruby, search

有几个插件选项可用于在 Ruby on Rails 应用程序中构建搜索引擎。其中哪一个是最好的？

*   [思考狮身人面像](http://ts.freelancing-gods.com/)
*   [超狮身人面像](http://blog.evanweaver.com/files/doc/fauna/ultrasphinx/files/README.html)
*   [括约肌](http://seattlerb.rubyforge.org/Sphincter/)
*   [act_as_sphinx](http://www.datanoise.com/articles/2007/3/23/acts_as_sphinx-plugin)
*   [act_as_ferret](http://projects.jkraemer.net/acts_as_ferret/)
*   [雪貂](http://ferret.davebalmain.com/trac/)
*   [act_as_xapian](http://locomotivation.com/2008/07/23/simple-ruby-on-rails-full-text-search-using-xapian)
*   [act_as_solr](http://github.com/railsfreaks/acts_as_solr/tree/master)
*   [超级埃斯特拉尔](http://hyperestraier.sourceforge.net/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-16T15:31:47.677

Thinking Sphinx 有更简洁的语法来定义哪些字段和哪些模型被索引。

UltraSphinx 和 Thinking Sphinx（最近）都具有超酷功能，考虑到对象的地理邻近性。

UltraSphinx 在加载模型方面存在烦人的问题（它不会加载整个 Rails 堆栈，因此您可能会感到奇怪且难以诊断错误，这些错误是通过添加显式`require`语句来处理的）。

我们在新项目中使用 Thinking Sphinx，在使用地理内容的项目中使用 UltraSphinx。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-16T18:13:55.803

这个问题之前已经在[这里](https://stackoverflow.com/questions/47656/how-do-i-do-full-text-searching-in-ruby-on-rails)问过更详细的答案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-16T15:50:28.427

我的一个朋友使用的一个可靠选项是[Solr](http://lucene.apache.org/solr/)，这是一个使用原始基于 Java 的 Lucene 的搜索引擎。要在 Rails 中使用它，当然有一个 act_as 插件，[acts_as_solr](http://github.com/railsfreaks/acts_as_solr/tree/master)。

他最近在[Montreal on Rails 上介绍了该组合，并](http://www.montrealonrails.com/2008/08/20/10-was-a-success/)[在他的博客上对如何使用acts_as_solr 进行](http://hugofrappier.wordpress.com/2008/09/01/solr-presentation-at-montreal-on-rails/)了很好而全面的概述。

它显然也很好地支持了法语口音。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-17T01:55:53.680

我现在正在经历这个确切的过程，所以虽然我没有实际经验，但我花了很多时间研究所有选项。这是我到目前为止所学到的：

*   *Sphinx - 在速度和功能方面享有盛誉，但 Sphinx 需要整数键，而我的模型使用 GUID；ThinkingSphinx 最近宣布支持 GeoSpatial
*   Acts_As_Solr - 有高流量网站的朋友推荐；原始创作者已经停止工作，并且很难找到文档；需要一个 Java servlet
*   Acts_As_Ferret - 看起来很容易使用，但很多批评者说它不稳定
*   另外两个信息有限的是 Acts_As_Indexed 和 Acts_As_Searchable

我有一个电子表格，试图记录所有这些的优点和缺点。如果有人有兴趣看到它和/或帮助我纠正它，请与我联系。一旦我知道它的准确性，我会在某个地方发布它。

如果您有正常的主键，我的建议是尝试 UltraSphinx 或 Thinking Sphinx。我将根据良好的文档、功能集以及项目的活跃程度来尝试 Acts_As_Xapian。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-16T15:39:36.767

我只在客户项目中使用了 Ferret/acts_as_ferret 组合（遗留决策）。我强烈建议先查看**其他**选项。

aaf 非常脆弱，如果您在配置中犯了错误或由于某种原因在 aaf 中遇到错误，可能会使您的 Rails 应用程序停止运行。

在这种情况下，不是简单地让搜索功能失效，任何触及索引模型的控制器操作都将完全失败并引发异常。哪个是baaad，hmkay？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T15:44:58.533

我使用*acts_as_xapian*插件。我遵循了本教程：

[http://lomotivation.com/2008/07/23/simple-ruby-on-rails-full-text-search-using-xapian](http://locomotivation.com/2008/07/23/simple-ruby-on-rails-full-text-search-using-xapian)

效果很好。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-17T19:18:27.217

我正在使用acts_as_ferret。它易于配置并且通常速度很快。内置的活动记录查找功能非常有用：您可以在搜索找到匹配记录后应用任何条件或加入其他模型。

与 sphinx 不同，您不必在添加新数据时重新索引所有记录。有 after_save 和 after_update 钩子可以将你的新记录插入到 ferret 数据库中。这对我来说是一大卖点。

当您必须对数据进行海量索引时，ferret 肯定比acts_as_sphinx 慢（3 倍）。我最终编写了自己的方法来重新索引模型，它的工作速度与 sphinx 一样快——它基本上是从数据库中预加载所有数据，而不是逐条记录来创建新索引。

ferret 文档对基础知识很有用，但是一旦您进行更复杂的搜索、排序和使用 dRb 服务器托管远程索引，它就会有点稀疏。话虽如此，它感觉比acts_as_sphinx成熟得多，尽管我对sphinx的经验有限。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-09-01T12:59:59.023

如果您使用像我这样的共享托管服务 (Bluehost)，您的选择可能仅限于提供商提供的服务。就我而言，我找不到一种好的可靠方法来启动和保持单独的服务器运行，例如 Lucene 或 Solr。

因此，我选择了 Xapian，它对我来说效果很好。我研究过 2 个 Rails 插件：acts_as_xapian 和 xapian_fu。第一个会让你快速上手，但它似乎不再被维护了。我刚刚开始使用 xapian_fu。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-02-09T11:33:54.717

如果有人仍然感兴趣，现在最新使用的是**elasticsearch**。有可用的宝石，例如**轮胎**或**弹性搜索轨道**。它也像 Solr 一样基于 Lucene，基于 Java。Solr 现在实际上已与该项目集成...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T15:26:29.543

我用过 Thinking Sphinx，它看起来不错，但我没有时间评估所有选项。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T15:27:49.697

我推荐思考狮身人面像。在我看来，这是最快的选择。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-16T15:30:21.657

我用过 Ferret，它对我的​​目的很有效，但我没有评估其他选项。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T15:41:30.117

我没有尝试过的一个选项是基于 C++ 的[Xapian](http://www.xapian.org/)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-16T15:57:53.417

我们使用的是继承的[http://hyperestraier.sourceforge.net/ 。](http://hyperestraier.sourceforge.net/)没有研究过其他引擎，但 hyperestraier 提供了所有必要的钩子。但是设置搜索索引很复杂。可能有更简单的选择。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-23T14:22:45.153

这取决于您使用的数据库。我建议使用 Solr，因为它为模糊搜索提供了很多不错的选项，并且具有出色的查询解析器。缺点是你必须为它运行一个单独的进程。我也使用过 Ferret，但发现它在多线程访问索引方面不太稳定。我没有尝试过 Sphinx，因为它只适用于 MySQL 和 Postgres。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-01-13T17:34:58.567

我正在使用一个不同的选项，效果非常好。我正在使用 jruby 并直接与 lucene 交谈。

我过去使用过acts_as_solr 并遇到了一些问题。主要是对每个 AR 保存进行同步调用。这还不错，但在我的情况下，保存有时会导致对 solr 的许多同步调用，并且有时会花费比 mongrel 允许的时间更长的时间，并且我会得到一个 mongrel 超时异常（或类似的东西）

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-01-15T05:32:42.550

Thinking Sphinx 是一个比 Ultrasphinx 更好的替代品，后者似乎被抛弃了，但总的来说，Xapian 的引擎比 Sphinx 更强大，并且更容易实现实时搜索。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-08-29T17:35:34.850

我推荐acts_as_ferret。但是，虽然困难的部分是让它在您的服务器中成功启动并运行，但一旦完成，您几乎没有任何问题，因为 ferret 服务器将作为单独的后台进程运行，以在每次有任何新更新时更新您的索引。此外，它在 mongrel 和 apache 中为我们工作得很好。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2010-06-15T21:31:12.910

我也一直在寻找完美的解决方案。起初我选择了 Thinking Sphinx，效果很好。但是因为我打算在[Heroku](http://www.heroku.com)上托管我的 webapp ，所以唯一的选择是使用[Solr](http://lucene.apache.org/solr/)。然而，最大的缺点是主要[acts_as_solr](http://github.com/railsfreaks/acts_as_solr) gem 的开发似乎在2008 年5 月之后停止了。所以这对我来说太旧了。我刚刚发现[Sunspot](http://outoftime.github.com/sunspot/)是一种先进的替代品，并且最近有更新，所以我要考虑这个。

Heroku 提供的另一个选择是使用基于 Solr 的托管索引服务器，名为[Websolr](http://www.websolr.com/)。幸运的是，所需的 gem [websolr-acts_as_solr](http://github.com/onemorecloud/websolr-acts_as_solr)也是最新的。

# web-services - REST 请求标头是否由 SSL 加密？

> ID：73536
> 
> 赞同：44
> 
> 时间：2008-09-16T15:25:03.933
> 
> 标签：web-services, http, rest, ssl

我正在开发一个客户端/服务器应用程序，它将通过休息进行通信。一些自定义请求数据将存储在请求的标头中。发送请求的服务器和接收服务器都有 SSL 证书 - 标头会被加密，还是只是内容？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2008-09-16T15:27:02.943

SSL 加密从客户端到服务器并返回的整个通信路径，所以是的 - 标头将被加密。

顺便说一句，如果您开发网络应用程序并关心数据安全，那么您至少应该阅读 Niels Ferguson 和 Bruce Schneier 所著的《实用密码学》之类的书，并且可能进一步阅读更关注 Web 应用程序安全性的书会是一个不错的选择主意。如果我可以进行观察 - 请注意，我并不是说作为个人批评 - 你的问题表明对非常基本的网络安全技术缺乏了解，这绝不是一个好兆头。

此外，确认假定加密的数据确实是加密的，这绝不是一个坏主意。您可以使用网络分析仪来监控网络上的流量，并注意任何敏感的信息以明文形式发送。我以前使用过 Wireshark 来执行此操作 - 有时结果可能会令人惊讶。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-16T15:27:52.863

只要您在 SSL 隧道中进行通信，服务器和客户端之间发送的所有内容都会被加密。加密是在发送或接收任何数据之前完成的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-16T15:27:47.263

标头和内容均已加密。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-16T15:40:11.900

您似乎认为 REST 是一种独特的协议。

REST 不是协议。它是一种基于 HTTP 的应用程序的设计风格。

因此，您正在编写一个 HTTP 应用程序。标头是否加密？是的，如果您使用的是 HTTPS（基于 SSL 的 HTTP）协议而不是纯 HTTP。

双方都有证书与您的问题没有直接关系。SSL 证书用于身份验证。它们有助于检测中间人攻击，例如可能使用 DNS 缓存中毒。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T15:33:17.173

拥有证书是不够的，您必须配置 Web 服务器以加密该域或虚拟主机的连接（即使用证书）。此外，我认为您只需要一个证书，对请求的响应仍将被加密。

是的，HTTP 标头和数据一样被加密。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-18T14:34:26.580

其他答案是正确的，即在使用 SSL 时，标头确实与正文一起加密。但请记住，可以包含查询参数的 URL**永远不会**加密。所以请注意不要在 URL 查询参数中放入任何敏感信息。

**更新：**正如@blowdart 在下面指出的那样，这是错误的。请参阅下面的评论。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T15:27:52.397

SSL..或者更确切地说是 HTTPS（HTTP over SSL）通过 SSL 发送所有 HTTP 内容，并且由于 HTTP 内容和标头实际上是同一件事，这意味着标头也被加密了。看到 GET 和 POST 数据是通过 HTTP 标头发送的，那么只有在安全地发送数据时才有意义，您不仅希望对响应代码或内容进行加密。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-04-24T21:25:07.227

并非*所有*内容都已加密：请求查询字符串未加密。相信我，我见过这样的请求：

[https://mydomain.com/authenticate?user=username&password=MyStrongPasswordSentInTheClear](https://mydomain.com/authenticate?user=username&password=MyStrongPasswordSentInTheClear)

请不要将敏感数据作为参数放入查询字符串中。

# model-view-controller - 你知道 PAC 设计模式的任何例子吗？

> ID：73538
> 
> 赞同：10
> 
> 时间：2008-09-16T15:25:21.887
> 
> 标签：model-view-controller, design-patterns, web-applications, user-interface

谁能指出任何使用[Presentation-Abstraction-Control](http://www.dossier-andreas.net/software_architecture/pac.html)设计模式而不是 MVC 的网站或 Web 应用程序？像这样很容易找到桌面应用程序（例如 GIMP），但我正在网上寻找一些东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-17T14:00:40.117

我认为，使用 PAC 的网站比人们意识到的要多。例如，[drupal](http://drupal.org)使用 PAC 模式，并且有很多网站（以及很多大型网站）都是用 drupal 构建的。许多人混淆了[MVC](http://www.dossier-andreas.net/software_architecture/mvc.html)和[PAC](http://www.dossier-andreas.net/software_architecture/pac.html)。[Larry Garfield 很好地解释了差异以及 drupal 如何使用 PAC](http://www.garfieldtech.com/blog/mvc-vs-pac)。

在我对这个主题的研究中，我发现不止一个开源应用程序/框架在更准确地符合 PAC 模式时称自己为 MVC 架构。特别是模型/抽象、表示/视图和控制器相互交互的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-11-20T00:46:10.583

我怀疑大多数使用所谓的 MVC 编写的网站实际上都在使用 PAC 的一个版本，但只有一个三元组。MVC 特别要求视图能够直接与模型通信，而无需通过控制器。我认为许多 Web 开发人员会期望无论通信方向如何，这总是通过控制器进行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T23:35:23.100

您很难获得使用 PAC 的 Web 应用程序，因为 PAC 继承模式在 Web 中不存在的自定义组件和自定义对话框上运行良好。

许多框架使用 PAC，它可以让您覆盖表示、抽象或控制，但在 Web 中使用时，由于其简单性，大多转换为 MVC（例如，您不需要新级别的 PAC 来更改网格的外观...您可以使用 CSS 文件）。

这是我能给你的最好的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T16:52:36.093

我看到的唯一示例是在[面向模式的软件架构第 1 卷：模式系统中](https://rads.stackoverflow.com/amzn/click/com/0471958697)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-04-12T19:28:57.930

Drupal 是一个用 PHP 编写的基于 PAC 的 Web 框架。:)

# linq-to-objects - 列表 到 IQueryable

> ID：73542
> 
> 赞同：74
> 
> 时间：2008-09-16T15:25:35.180
> 
> 标签：linq-to-objects, iqueryable

我有一个列表，我想将它包装到一个 IQueryable 中。

这可能吗？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2008-09-16T15:27:14.020

```
List<int> list = new List<int>() { 1, 2, 3, 4, };
IQueryable<int> query = list.AsQueryable(); 
```

如果您没有看到该`AsQueryable()`方法，请为 . 添加 using 语句`System.Linq`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-16T15:27:18.340

使用`AsQueryable<T>()`扩展方法。

# .net - .NET 的 FTP 客户端类

> ID：73544
> 
> 赞同：3
> 
> 时间：2008-09-16T15:25:46.317
> 
> 标签：.net, proxy, ftp, gateway

任何人都知道在.NET 中使用的一个好的、希望是免费的 FTP 类，它实际上可以在 HTTP 代理或 FTP 网关后面工作？.NET 中的 FtpWebRequest 东西充其量是可怕的，我真的不想在这里推出我自己的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-02-24T17:19:40.060

我们的[Rebex FTP](http://www.rebex.net/ftp.net/)可以很好地使用代理。以下代码显示了如何使用 HTTP 代理连接到 FTP（代码取自[FTP 教程页面](http://www.rebex.net/ftp.net/tutorial-ftp.aspx#proxy)）。

```
// initialize FTP client 
Ftp client = new Ftp();

// setup proxy details  
client.Proxy.ProxyType = FtpProxyType.HttpConnect;
client.Proxy.Host = proxyHostname;
client.Proxy.Port = proxyPort;

// add proxy username and password when needed 
client.Proxy.UserName = proxyUsername;
client.Proxy.Password = proxyPassword;

// connect, login 
client.Connect(hostname, port);
client.Login(username, password);

// do some work 
// ... 

// disconnect 
client.Disconnect(); 
```

您可以在[www.rebex.net/ftp.net/download.aspx下载试用版](http://www.rebex.net/ftp.net/download.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T16:20:04.393

我遇到的最好的一个是 edtFTP.net [http://www.enterprisedt.com/products/edtftpnet/overview.html](http://www.enterprisedt.com/products/edtftpnet/overview.html)

如果提供灵活性，您将无法获得内置类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T15:32:45.787

我没有特别的经验，但[Sharptoolbox](http://sharptoolbox.com/)提供[了很多实现](http://sharptoolbox.com/search?ToolName%253dftp%2526Description%253dftp%2526Category%253d9d0e4330-f6ff-4ead-afd3-f77f1c06cdc8%2526Attribute%253d-800)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T15:33:25.050

你可以试试[“Indy.Sockets”](http://www.indyproject.org/index.en.aspx "Indy.Sockets")。它可以处理很多高级网络协议，包括 ftp。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-03T14:34:25.427

这是我通过 HTTP 代理将文件上传到 FTP 的开源 C# 代码。

```
public bool UploadFile(string localFilePath, string remoteDirectory)
{
    var fileName = Path.GetFileName(localFilePath);
    string content;
    using (var reader = new StreamReader(localFilePath))
        content = reader.ReadToEnd();

    var proxyAuthB64Str = Convert.ToBase64String(Encoding.ASCII.GetBytes(_proxyUserName + ":" + _proxyPassword));
    var sendStr = "PUT ftp://" + _ftpLogin + ":" + _ftpPassword
        + "@" + _ftpHost + remoteDirectory + fileName + " HTTP/1.1\n"
        + "Host: " + _ftpHost + "\n"
        + "User-Agent: Mozilla/4.0 (compatible; Eradicator; dotNetClient)\n" + "Proxy-Authorization: Basic " + proxyAuthB64Str + "\n"
        + "Content-Type: application/octet-stream\n"
        + "Content-Length: " + content.Length + "\n"
        + "Connection: close\n\n" + content;

    var sendBytes = Encoding.ASCII.GetBytes(sendStr);

    using (var proxySocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp))
    {
        proxySocket.Connect(_proxyHost, _proxyPort);
        if (!proxySocket.Connected)
            throw new SocketException();
        proxySocket.Send(sendBytes);

        const int recvSize = 65536;
        var recvBytes = new byte[recvSize];
        proxySocket.Receive(recvBytes, recvSize, SocketFlags.Partial);

        var responseFirstLine = new string(Encoding.ASCII.GetChars(recvBytes)).Split("\n".ToCharArray()).Take(1).ElementAt(0);
        var httpResponseCode = Regex.Replace(responseFirstLine, @"HTTP/1\.\d (\d+) (\w+)", "$1");
        var httpResponseDescription = Regex.Replace(responseFirstLine, @"HTTP/1\.\d (\d+) (\w+)", "$2");
        return httpResponseCode.StartsWith("2");
    }
    return false;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T17:54:18.333

I have used [http://sourceforge.net/projects/dotnetftpclient/](http://sourceforge.net/projects/dotnetftpclient/) for quite a while now, and it does the job nicely. If you use a PASV connection, you shouldn't have any firewall issues. Not sure what an FTP gateway is, but I don't see how the HTTP Proxy would affect any FTP connection.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-04T14:56:00.087

我有一个类似的问题，通过 Socks4 代理为 FTPS（显式）通信创建一个客户端。

经过一番搜索和测试，我找到了 .NET 库 Starksoftftps。 [http://starksoftftps.codeplex.com/](http://starksoftftps.codeplex.com/)

这是我的代码示例：

```
Socks4ProxyClient socks = new Socks4ProxyClient("socksproxyhost",1010);
FtpClient ftp = new FtpClient("ftpshost",2010,FtpSecurityProtocol.Tls1Explicit);
ftp.Proxy = socks;
ftp.Open("userid", "******");
ftp.PutFile(@"C:\519ec30a-ae15-4bd5-8bcd-94ef3ca49165.xml");
Console.WriteLine(ftp.GetDirListAsText());
ftp.Close(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-02-24T17:37:02.683

我最近在我的项目中使用了它，效果很好。

[http://www.codeproject.com/KB/IP/ftplib.aspxt](http://www.codeproject.com/KB/IP/ftplib.aspx)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-11-09T05:48:32.603

.Net 4.0+ 现在包括一个 ftp 客户端类 - 请参阅此 msdn 链接了解更多信息。

[http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx)

我看到了甚至使用 PASV 模式等的选项，所以它似乎功能齐全（或者我希望如此）。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2008-09-16T15:27:21.993

System.Net.WebClient 可以处理 ftp url，并且使用起来更容易一些。您也可以使用它设置凭据和代理信息。

# .net - schema.ini 中的通配符文件名？

> ID：73576
> 
> 赞同：2
> 
> 时间：2008-09-16T15:27:53.300
> 
> 标签：.net

想知道是否有办法在 schema.ini 中放置通配符，例如 [*.txt] FMT=TabDelimited

我有一个导入制表符分隔文件的应用程序，我似乎可以得到 FMT="TabDelimited" 的唯一地方是在 schema.ini 中（由于某种原因在连接字符串中不起作用），但我会除了txt扩展名之外，不知道文件名是什么。

顺便说一句，我正在使用 OdbcConnection 和 Microsoft 文本驱动程序进行连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T18:46:45.587

我想我可能会暂时重命名文件以匹配我决定放入 schema.ini 的任何内容，或者可能会即时修改 schema.ini 并将正确的文件名放入其中，但我很想知道是否有更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-28T13:09:11.360

单个 schema.ini 文件可以包含多个 [fileName.txt] 条目和格式说明（针对目录中的所有文件），因此您可以考虑从目录文件名动态创建 .ini 文件。

# java - 如何从 Java 发送 SMTP 消息？

> ID：73580
> 
> 赞同：27
> 
> 时间：2008-09-16T15:28:22.520
> 
> 标签：java, smtp

> **可能重复：**
> [如何使用 Gmail 从 Java 应用程序发送电子邮件？](https://stackoverflow.com/questions/46663/how-do-you-send-email-from-a-java-app-using-gmail)

如何从 Java 发送 SMTP 消息？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-09-16T15:34:30.413

以下是 Gmail smtp 的示例：

```
import java.io.*;
import java.net.InetAddress;
import java.util.Properties;
import java.util.Date;

import javax.mail.*;

import javax.mail.internet.*;

import com.sun.mail.smtp.*;

public class Distribution {

    public static void main(String args[]) throws Exception {
        Properties props = System.getProperties();
        props.put("mail.smtps.host","smtp.gmail.com");
        props.put("mail.smtps.auth","true");
        Session session = Session.getInstance(props, null);
        Message msg = new MimeMessage(session);
        msg.setFrom(new InternetAddress("mail@tovare.com"));;
        msg.setRecipients(Message.RecipientType.TO,
        InternetAddress.parse("tov.are.jacobsen@iss.no", false));
        msg.setSubject("Heisann "+System.currentTimeMillis());
        msg.setText("Med vennlig hilsennTov Are Jacobsen");
        msg.setHeader("X-Mailer", "Tov Are's program");
        msg.setSentDate(new Date());
        SMTPTransport t =
            (SMTPTransport)session.getTransport("smtps");
        t.connect("smtp.gmail.com", "admin@tovare.com", "<insert password here>");
        t.sendMessage(msg, msg.getAllRecipients());
        System.out.println("Response: " + t.getLastServerResponse());
        t.close();
    }
} 
```

现在，仅当您希望将项目依赖项保持在最低限度时才这样做，否则我可以热烈推荐使用来自 apache 的类

[http://commons.apache.org/email/](http://commons.apache.org/email/)

问候

托夫是雅各布森

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-18T04:25:28.027

另一种方法是像这样使用阿司匹林（[https://github.com/masukomi/aspirin](https://github.com/masukomi/aspirin)）：

```
MailQue.queMail(MimeMessage message) 
```

..在构建了你的 mimemessage 之后。

Aspirin**是**一个 smtp 的“服务器”，因此您不必对其进行配置。但请注意，向广泛的收件人发送电子邮件并不像看起来那么简单，因为接收邮件服务器和客户端应用程序应用了许多不同的垃圾邮件过滤规则。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-16T15:29:58.990

请看这个帖子

[如何使用 GMail、Yahoo 或 Hotmail 通过 Java 应用程序发送电子邮件？](https://stackoverflow.com/questions/46663/how-do-you-send-email-from-a-java-app-using-gmail)

它特定于 gmail，但您可以替换您的 smtp 凭据。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T15:29:42.720

请参阅[JavaMail API](http://www.oracle.com/technetwork/java/javamail/index.html)和相关的 javadocs。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T15:30:05.357

请参阅 Java 实践中的以下教程。

[http://www.javapractices.com/topic/TopicAction.do?Id=144](http://www.javapractices.com/topic/TopicAction.do?Id=144)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-01-02T14:53:46.937

```
import javax.mail.*;
import javax.mail.internet.*;
import java.util.*; 

public void postMail(String recipients[], String subject,
    String message , String from) throws MessagingException {

    //Set the host smtp address
    Properties props = new Properties();
    props.put("mail.smtp.host", "smtp.jcom.net");

    // create some properties and get the default Session
    Session session = Session.getDefaultInstance(props, null);
    session.setDebug(false);

    // create a message
    Message msg = new MimeMessage(session);

    // set the from and to address
    InternetAddress addressFrom = new InternetAddress(from);
    msg.setFrom(addressFrom);

    InternetAddress[] addressTo = new InternetAddress[recipients.length]; 
    for (int i = 0; i < recipients.length; i++) {
        addressTo[i] = new InternetAddress(recipients[i]);
    }
    msg.setRecipients(Message.RecipientType.TO, addressTo);

    // Optional : You can also set your custom headers in the Email if you Want
    msg.addHeader("MyHeaderName", "myHeaderValue");

    // Setting the Subject and Content Type
    msg.setSubject(subject);
    msg.setContent(message, "text/plain");
    Transport.send(msg);
} 
```

# iis - 用于缓存的 IIS 可配置 http-headers

> ID：73586
> 
> 赞同：2
> 
> 时间：2008-09-16T15:29:17.137
> 
> 标签：iis, configuration, caching, iis-6

如何可配置地设置 http-headers 以缓存 IIS >= 6 中的文件？

例子：

*   `*.cache.*`=> 几乎永远缓存
*   `*.nocache.*`=> 从不缓存

使用此命名的示例框架是 GWT 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-08T16:58:18.263

我认为您指的是设置缓存控制标头。

请参阅此处[http://support.microsoft.com/kb/247404](http://support.microsoft.com/kb/247404)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T16:02:17.150

[http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/23ea6f24-4b44-4fa0-a275-a1b907e1afb6.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/23ea6f24-4b44-4fa0-a275-a1b907e1afb6.mspx?mfr=true)

Explains the different methods of caching data in IIS.

# sql - Oracle RAC 中的过早重做日志切换

> ID：73607
> 
> 赞同：2
> 
> 时间：2008-09-16T15:30:40.283
> 
> 标签：sql, database, oracle

除了达到指定的文件大小并执行之外，Oracle 中过早重做日志切换的可能原因是什么`ALTER SYSTEM SWITCH LOGFILE`？

我们有一种情况，我们的一些（但不是全部）节点在填满之前过早地切换重做日志文件。这种情况每 5 到 15 分钟发生一次，并且每种情况下的日志大小变化很大（从指定大小的 15% 到 100%）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T21:07:52.733

[本文](http://www.ixora.com.au/tips/tuning/log_switch.htm)说它在 RAC 中的行为有所不同。

> 在并行服务器环境中，每个实例中的 LGWR 进程在其自己的线程上持有一个 KK 实例锁。id2 字段标识线程号。此锁用于触发远程实例的强制日志切换。**每当线程的当前 SCN 落后于控制文件的数据库条目部分中记录的强制 SCN 时，就会强制执行日志切换。**强制 SCN 比在任何线程中重用的任何日志文件的最高 SCN 高一。

# javascript - 如何在 JSF 之前执行 Javascript 执行动作？

> ID：73628
> 
> 赞同：11
> 
> 时间：2008-09-16T15:32:24.490
> 
> 标签：javascript, jsf

如果您有一个 JSF `<h:commandLink>`（它使用`onclick`an 事件`<a>`来提交当前表单），您如何在执行操作之前执行 JavaScript（例如要求删除确认）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2010-12-27T22:13:12.750

可以这样简化

```
onclick="return confirm('Are you sure?');" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T15:33:53.850

```
<h:commandLink id="myCommandLink" action="#{myPageCode.doDelete}">
    <h:outputText value="#{msgs.deleteText}" />
</h:commandLink>
<script type="text/javascript">
if (document.getElementById) {
    var commandLink = document.getElementById('<c:out value="${myPageCode.myCommandLinkClientId}" />');
    if (commandLink && commandLink.onclick) {
        var commandLinkOnclick = commandLink.onclick;
        commandLink.onclick = function() {
            var result = confirm('Do you really want to <c:out value="${msgs.deleteText}" />?');
            if (result) {
                return commandLinkOnclick();
            }
            return false;
        }
    }
}
</script> 
```

可以通过将调用替换为`confirm()`对另一个函数的调用来执行其他 Javascript 操作（如验证表单输入等）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2011-05-24T16:07:32.517

这对我有用：

```
<h:commandButton title="#{bundle.NewPatient}" action="#{identifController.prepareCreate}"  
                                             id="newibutton" 
                                             onclick="if(confirm('#{bundle.NewPatient}?'))return true; else return false;" 
                                             value="#{bundle.NewPatient}"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T15:48:35.950

您仍然可以使用 onclick。JSF[渲染工具包规范](http://java.sun.com/javaee/javaserverfaces/1.2/docs/renderkitdocs/HTML_BASIC/javax.faces.Commandjavax.faces.Link.html)（参见编码行为）描述了链接应该如何处理它。这是重要的部分（它为 onclick 呈现的内容）：

```
var a=function(){/*your onclick*/}; var b=function(){/*JSF onclick*/}; return (a()==false) ? false : b(); 
```

因此，您的函数不会传递事件对象（无论如何这不是可靠的跨浏览器），但返回 true/false 会使提交短路。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T11:20:12.437

在 JSF 1.2 中，您可以指定 onclick 事件。

[此外， MyFaces](http://myfaces.apache.org/)或[IceFaces](http://www.icefaces.org)等其他库也实现了“onclick”处理程序。

那么你需要做的只是：

```
<h:commandLink action="#{bean.action}" onclick="if(confirm('Are you sure?')) return false;" /> 
```

注意：您不能这样做`return confirm(...)`，因为这会阻止 onClick 事件中的其余 JavaScript 发生，这将有效地阻止您的操作发生，无论用户返回什么！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T13:08:58.290

如果您想在表单发布之前执行某些操作，例如确认，请尝试表单事件 onSubmit。就像是：

```
myform.onsubmit = function(){confirm("really really sure?")}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-04T09:37:44.250

这对我从来没有用过，

```
 onclick="if(confirm('Are you sure?')) return false;" /> 
```

但这确实

```
onclick="if(confirm(\"Are you sure?\"))return true; else return false;" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-01-07T04:02:32.717

```
var deleteClick;
var mess="xxx";
function assignDeleteClick(link) {
    if (link.onclick == confirmDelete) {
        return;
    }
    deleteClick = link.onclick;
    link.onclick = confirmDelete;
}

function confirmDelete() {
    var ans = confirm(mess);
    if (ans == true) {
        return deleteClick();
    } else {
        return false;
    }
} 
```

将此代码用于 jsf 1.1。

# c# - 如何修剪字符串中的前导逗号

> ID：73629
> 
> 赞同：11
> 
> 时间：2008-09-16T15:32:37.360
> 
> 标签：c#, .net, string, trim

我有一个如下所示的字符串。

```
,liger, unicorn, snipe 
```

在我熟悉的其他语言中，我可以只做一个 string.trim(",") 但我怎么能在 c# 中做到这一点？

谢谢。

* * *

*关于 StartTrim 功能有很多来回。正如一些人指出的那样， StartTrim 不会影响主变量。但是，鉴于数据与问题的结构，我对接受哪个答案感到困惑。确实，问题只希望修剪掉第一个字符而不是最后一个字符（如果是 anny），但是，数据末尾永远不会有“，”。因此，话虽如此，我将接受第一个答案，即使用 StartTrim 分配给新变量。*

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-16T15:34:54.250

```
string s = ",liger, unicorn, snipe";
s.TrimStart(','); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-09-16T15:41:28.260

```
string sample = ",liger, unicorn, snipe";
sample = sample.TrimStart(','); // to remove just the first comma 
```

也许：

```
sample = sample.Trim().TrimStart(','); // to remove any whitespace and then the first comma 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T15:37:14.760

.net 字符串可以执行 Trim() 和 TrimStart()。因为它需要`params`，所以你可以写：

```
",liger, unicorn, snipe".TrimStart(',') 
```

如果你有多个字符要修剪，你可以写：

```
",liger, unicorn, snipe".TrimStart(",; ".ToCharArray()) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-16T16:58:40.133

这是一种不产生前导逗号的简单方法：

```
string[] animals = { "liger", "unicorn", "snipe" };
string joined = string.Join(", ", animals); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-17T06:23:26.910

string.TrimStart(',') 将删除逗号，但是由于逗号后面的空格，您将无法进行拆分操作。最好只用一个逗号加入或使用

> Split(", ".ToCharArray(),StringSplitOptions.RemoveEmptyEntries);

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T15:36:01.643

",狮虎, 独角兽, 狙击".Trim(',') -> "狮虎, 独角兽, 狙击"

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T15:36:11.020

尝试 string.Trim(',') 看看是否符合您的要求。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-16T15:43:13.297

注意，*原始*字符串保持不变，Trim 将返回一个新字符串：

```
string s1 = ",abc,d";
string s2 = s1.TrimStart(",".ToCharArray());
Console.WriteLine("s1 = {0}", s1);
Console.WriteLine("s2 = {0}", s2); 
```

印刷：

```
s1 = ,abc,d
s2 = abc,d 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-17T04:07:59.027

```
string s = ",liger, unicorn, snipe";
s = s.TrimStart(','); 
```

将 TrimStart 的结果分配给变量很重要。正如它在[TrimStart 页面](http://msdn.microsoft.com/en-us/library/system.string.trimstart.aspx)上所说，“此方法不会修改当前实例的值。相反，它返回一个新字符串......”。

在 .NET 中，字符串不会改变。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-17T05:26:24.893

你可以用这个

,狮虎,独角兽,狙击".TrimStart(',');

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T15:34:32.693

```
if (s.StartsWith(",")) {
    s = s.Substring(1, s.Length - 1);
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-16T15:35:18.760

```
string t = ",liger, unicorn, snipe".TrimStart(new char[] {','}); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T15:35:24.093

和其他地方一样：[string.trim](http://msdn.microsoft.com/en-us/library/d4tt83f9.aspx)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-16T15:35:28.743

```
 string s = ",liger, tiger";

    if (s.Substring(0, 1) == ",")
        s = s.Substring(1); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-16T15:35:57.323

您的意思是修剪该字符串中的所有“，”实例吗？

在这种情况下，您可以这样做：

```
s = s.Replace(",", ""); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-16T15:36:54.030

只需使用 Substring 忽略第一个字符（或将其分配给另一个字符串）；

```
 string o = ",liger, unicorn, snipe";
 string s = o.Substring(1); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-16T15:39:09.110

请参阅：http: [//msdn.microsoft.com/en-us/library/d4tt83f9.aspx](http://msdn.microsoft.com/en-us/library/d4tt83f9.aspx)

```
 string animals = ",liger, unicorn, snipe";

        //trimmed will contain "liger, unicorn, snipe"
        string trimmed = word.Trim(','); 
```

# svn - 颠覆和 Siteminder

> ID：73646
> 
> 赞同：2
> 
> 时间：2008-09-16T15:34:07.203
> 
> 标签：svn, siteminder

有没有人使用 Siteminder 作为身份验证提供者实现 Subversion？如果是，是否可以概述整个设置是如何完成的？

由于我只使用 HTTP 身份验证，我认为与 SM 集成会更容易，但我无法在网上找到太多帮助。

这个设置有什么陷阱吗？这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-01T19:13:53.537

带有 Siteminder 的 SVN 已实施并正在运行。由于没有太多关于这方面的信息，我想发布以下步骤的概述：

1.  Siteminder 端禁用了基于 Cookie 的身份验证
2.  HTTP AUTH 已启用（在 Siteminder 中）并且所有 webdav 方法都已添加到策略服务器以由 SiteMinder 处理
3.  在 SVN 的 Apache 端（HTTP Auth）上禁用了身份验证

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T12:10:47.307

查找有关**Apache**和 Siteminder 的信息，因为 Apache 负责 Subversion 中的 HTTP 传输内容

# smtp - “AUTH NTLM”的 SMTP 命令

> ID：73651
> 
> 赞同：4
> 
> 时间：2008-09-16T15:34:49.180
> 
> 标签：smtp, ntlm

我没有找到我需要发送以使用 NTLM 对 SMTP 服务器进行身份验证的命令。

我认为它是这样的：

```
AUTH NTLM <bae64encode something>
334
<bae64encode something>
235 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T15:40:34.130

您需要 Base64 编码的 Type 1 消息。 [读这个](http://curl.haxx.se/rfc/ntlm.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-09-21T00:29:29.433

我认为以下链接可能对您有所帮助

[http://msdn.microsoft.com/en-us/library/cc246870%28v=prot.10%29.aspx](http://msdn.microsoft.com/en-us/library/cc246870%28v=prot.10%29.aspx)

您需要对所有内容进行编码并遵循 NTLM 身份验证协议。

# python - 如何终止脚本？

> ID：73663
> 
> 赞同：1261
> 
> 时间：2008-09-16T15:35:55.637
> 
> 标签：python, termination

我知道`die()`PHP 中的命令会提前退出脚本。

我怎样才能在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：1648
> 
> 时间：2008-09-16T15:36:36.680

```
import sys
sys.exit() 
```

[`sys`模块文档](https://docs.python.org/2/library/sys.html#sys.exit)中的详细信息：

> `sys.**exit**([*arg*])`
> 
> 退出 Python。这是通过引发 [`SystemExit`](https://docs.python.org/2/library/exceptions.html#SystemExit "系统退出")异常来实现的，因此由语句的 finally 子句指定的清理操作[`try`](https://docs.python.org/2/reference/compound_stmts.html#try "尝试")得到尊重，并且可以在外部级别拦截退出尝试。
> 
> 可选参数*arg*可以是给出退出状态的整数（默认为零），也可以是其他类型的对象。如果它是一个整数，则零被认为是“成功终止”，任何非零值都被 shell 等视为“异常终止”。大多数系统要求它在 0-127 范围内，否则会产生未定义的结果。一些系统有为特定退出代码分配特定含义的约定，但这些通常不发达；Unix 程序通常使用 2 表示命令行语法错误，使用 1 表示所有其他类型的错误。如果传递了另一种类型的对象，则 None 等效于传递零，并且任何其他对象都被打印到[`stderr`](https://docs.python.org/2/library/sys.html#sys.stderr "系统标准错误")并导致退出代码为 1。尤其 `sys.exit("some error message")`是当发生错误时退出程序的快速方法。
> 
> 由于[`exit()`](https://docs.python.org/2/library/constants.html#exit "出口")最终“only”引发了异常，所以只有在主线程调用时才会退出进程，异常不会被拦截。

请注意，这是退出的“好”方式。下面的@ [glyphtwistedmatrix](https://stackoverflow.com/questions/73663/terminating-a-python-script#76374)指出，如果你想要一个“硬退出”，你可以使用`os._exit(*errorcode*)`，尽管它在某种程度上可能是特定于操作系统的（例如，它可能不会在 Windows 下使用错误代码），而且它肯定不太友好，因为它不允许解释器在进程终止之前进行任何清理。另一方面，它*确实*杀死了整个进程，包括所有正在运行的线程，而`sys.exit()`（如文档中所说）仅在从主线程调用时才退出，没有其他线程在运行。

* * *

## 回答 #2

> 赞同：455
> 
> 时间：2013-02-12T15:50:06.713

提前终止 Python 脚本的一种简单方法是使用内置`quit()`函数。无需导入任何库，高效简单。

例子：

```
#do stuff
if this == that:
  quit() 
```

* * *

## 回答 #3

> 赞同：138
> 
> 时间：2008-09-16T15:37:13.763

另一种方法是：

```
raise SystemExit 
```

* * *

## 回答 #4

> 赞同：96
> 
> 时间：2013-04-22T14:57:00.843

您也可以简单地使用`exit()`.

请记住 , `sys.exit()`, `exit()`,`quit()`和`os._exit(0)` **终止**Python 解释器。因此，如果它出现在从另一个脚本调用的脚本中`execfile()`，它将停止执行这两个脚本。

请参阅“[停止执行使用 execfile 调用的脚本](https://stackoverflow.com/a/1028632/1897240)”来避免这种情况。

* * *

## 回答 #5

> 赞同：75
> 
> 时间：2008-09-16T20:08:04.500

虽然您通常应该更喜欢`sys.exit`它，因为它对其他代码更“友好”，但它实际上所做的只是引发异常。

如果您确定需要立即退出进程，并且您可能处于某个会捕获的异常处理程序中，那么`SystemExit`还有另一个函数 -`os._exit`在 C 级别立即终止并且不执行任何正常的拆卸口译员；例如，使用“atexit”模块注册的钩子不会被执行。

* * *

## 回答 #6

> 赞同：67
> 
> 时间：2016-11-10T10:59:45.547

我刚刚发现在编写多线程应用程序时，`raise SystemExit`两者`sys.exit()`都只杀死正在运行的线程。另一方面，`os._exit()`退出整个过程。这在“[为什么 sys.exit() 在 Python 中的线程内调用时不退出？](https://stackoverflow.com/questions/905189/why-does-sys-exit-not-exit-when-called-inside-a-thread-in-python/5120178#5120178) ”中进行了讨论。

下面的示例有 2 个线程。肯尼和卡特曼。卡特曼应该永远活着，但肯尼被递归调用，应该在 3 秒后死去。（递归调用不是最好的方法，但我有其他原因）

如果我们也希望卡特曼在肯尼死的时候也死，肯尼应该带着 离开`os._exit`，否则只有肯尼会死，卡特曼会永远活着。

```
import threading
import time
import sys
import os

def kenny(num=0):
    if num > 3:
        # print("Kenny dies now...")
        # raise SystemExit #Kenny will die, but Cartman will live forever
        # sys.exit(1) #Same as above

        print("Kenny dies and also kills Cartman!")
        os._exit(1)
    while True:
        print("Kenny lives: {0}".format(num))
        time.sleep(1)
        num += 1
        kenny(num)

def cartman():
    i = 0
    while True:
        print("Cartman lives: {0}".format(i))
        i += 1
        time.sleep(1)

if __name__ == '__main__':
    daemon_kenny = threading.Thread(name='kenny', target=kenny)
    daemon_cartman = threading.Thread(name='cartman', target=cartman)
    daemon_kenny.setDaemon(True)
    daemon_cartman.setDaemon(True)

    daemon_kenny.start()
    daemon_cartman.start()
    daemon_kenny.join()
    daemon_cartman.join() 
```

* * *

## 回答 #7

> 赞同：36
> 
> 时间：2008-09-16T15:38:28.877

```
from sys import exit
exit() 
```

作为参数，您可以传递退出代码，该代码将返回给操作系统。默认值为 0。

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2014-03-19T11:13:22.700

我是一个新手，但肯定这更干净，更可控

```
def main():
    try:
        Answer = 1/0
        print  Answer
    except:
        print 'Program terminated'
        return
    print 'You wont see this'

if __name__ == '__main__': 
    main() 
```

...

> 程序终止

比

```
import sys
def main():
    try:
        Answer = 1/0
        print  Answer
    except:
        print 'Program terminated'
        sys.exit()
    print 'You wont see this'

if __name__ == '__main__': 
    main() 
```

...

> > 程序终止的回溯（最后一次调用）：文件“Z:\Directory\testdieprogram.py”，第 12 行，在 main() 文件“Z:\Directory\testdieprogram.py”，第 8 行，在 main sys.exit( ) 系统退出

编辑

关键是节目顺利而和平地结束，而不是**“我已经停止了！！！！”**

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2016-12-27T18:12:16.587

在 Python 3.5 中，我尝试在不使用模块（例如 sys、Biopy）的情况下合并类似的代码，而不是使用内置的模块来停止脚本并向我的用户打印错误消息。这是我的例子：

```
## My example:
if "ATG" in my_DNA: 
    ## <Do something & proceed...>
else: 
    print("Start codon is missing! Check your DNA sequence!")
    exit() ## as most folks said above 
```

后来，我发现只是抛出一个错误更简洁：

```
## My example revised:
if "ATG" in my_DNA: 
    ## <Do something & proceed...>
else: 
    raise ValueError("Start codon is missing! Check your DNA sequence!") 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2022-01-22T10:06:16.220

## 问题

在我的实践中，甚至有必要从其中一个进程中终止整个多处理器应用程序。

如果您的应用程序仅使用主进程，则以下功能运行良好。但是在我的情况下，以下功能中没有一个不起作用，因为该应用程序还有许多其他活动进程。

*   `quit()`
*   `exit(0)`
*   `os._exit(0)`
*   `sys.exit(0)`
*   `os.kill(os.getppid(), 9)`-父进程`os.getppid()`的**pid在哪里**

最后一个杀死了主进程及其本身，但其余进程仍然存在。

## 解决方案

我不得不通过外部命令杀死它，最后找到了使用`pkill`.

```
import os

# This can be called even in process worker and will kill
# whole application included correlated processes as well
os.system(f"pkill -f {os.path.basename(__file__)}") 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-03-22T21:50:27.977

我的两分钱。

Python 3.8.1，Windows 10，64 位。

`sys.exit()`不直接为我工作。

我有几个下一个循环。

首先我声明一个布尔变量，我称之为`immediateExit`.

所以，在我写的程序代码的开头：

```
immediateExit = False 
```

然后，从最内部（嵌套）循环异常开始，我写：

```
 immediateExit = True
            sys.exit('CSV file corrupted 0.') 
```

然后我进入外循环的直接延续，在代码执行任何其他操作之前，我写：

```
 if immediateExit:
        sys.exit('CSV file corrupted 1.') 
```

根据复杂性，有时上述语句也需要在除部分等中重复。

```
 if immediateExit:
        sys.exit('CSV file corrupted 1.5.') 
```

自定义消息也用于我的个人调试，因为数字用于相同目的 - 查看脚本真正退出的位置。

```
'CSV file corrupted 1.5.' 
```

在我的特殊情况下，我正在处理一个 CSV 文件，如果软件检测到它已损坏，我不希望软件触摸它。因此对我来说，在检测到可能的损坏后立即退出整个 Python 脚本非常重要。

并且在我设法做到的所有循环中逐渐退出系统。

完整代码：（需要进行一些更改，因为它是内部任务的专有代码）：

```
immediateExit = False
start_date = '1994.01.01'
end_date = '1994.01.04'
resumedDate = end_date

end_date_in_working_days = False
while not end_date_in_working_days:
    try:
        end_day_position = working_days.index(end_date)

        end_date_in_working_days = True
    except ValueError: # try statement from end_date in workdays check
        print(current_date_and_time())
        end_date = input('>> {} is not in the list of working days. Change the date (YYYY.MM.DD): '.format(end_date))
        print('New end date: ', end_date, '\n')
        continue

    csv_filename = 'test.csv'
    csv_headers = 'date,rate,brand\n' # not real headers, this is just for example
    try:
        with open(csv_filename, 'r') as file:
            print('***\nOld file {} found. Resuming the file by re-processing the last date lines.\nThey shall be deleted and re-processed.\n***\n'.format(csv_filename))
            last_line = file.readlines()[-1]
            start_date = last_line.split(',')[0] # assigning the start date to be the last like date.
            resumedDate = start_date

            if last_line == csv_headers:
                pass
            elif start_date not in working_days:
                print('***\n\n{} file might be corrupted. Erase or edit the file to continue.\n***'.format(csv_filename))
                immediateExit = True
                sys.exit('CSV file corrupted 0.')
            else:
                start_date = last_line.split(',')[0] # assigning the start date to be the last like date.
                print('\nLast date:', start_date)
                file.seek(0) # setting the cursor at the beginnning of the file
                lines = file.readlines() # reading the file contents into a list
                count = 0 # nr. of lines with last date
                for line in lines: #cycling through the lines of the file
                    if line.split(',')[0] == start_date: # cycle for counting the lines with last date in it.
                        count = count + 1
        if immediateExit:
            sys.exit('CSV file corrupted 1.')
        for iter in range(count): # removing the lines with last date
            lines.pop()
        print('\n{} lines removed from date: {} in {} file'.format(count, start_date, csv_filename))

        if immediateExit:
            sys.exit('CSV file corrupted 1.2.')
        with open(csv_filename, 'w') as file:
            print('\nFile', csv_filename, 'open for writing')
            file.writelines(lines)

            print('\nRemoving', count, 'lines from', csv_filename)

        fileExists = True

    except:
        if immediateExit:
            sys.exit('CSV file corrupted 1.5.')
        with open(csv_filename, 'w') as file:
            file.write(csv_headers)
            fileExists = False
    if immediateExit:
        sys.exit('CSV file corrupted 2.') 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-23T17:32:37.613

只需放在代码的末尾，`quit()`这应该会关闭一个 python 脚本。

# perl - 如何为 Perl 启动交互式控制台？

> ID：73667
> 
> 赞同：289
> 
> 时间：2008-09-16T15:35:59.320
> 
> 标签：perl, console, interactive, read-eval-print-loop

如何启动 Perl 的交互式控制台，类似于`irb`Ruby 或`python`Python 的命令？

* * *

## 回答 #1

> 赞同：326
> 
> 时间：2008-09-16T15:38:53.260

您可以在一个简单的程序上使用 perl 调试器，如下所示：

```
perl -de1 
```

或者，还有[*Alexis Sukrieh*的 Perl Console](http://search.cpan.org/~sukria/perlconsole-0.4/perlconsole)应用程序，但我没有使用它。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2008-09-16T16:16:11.047

Matt Trout 不仅写了一篇关于 REPL 的文章，他实际上还写了一篇 - [Devel::REPL](http://search.cpan.org/dist/Devel-REPL)

我已经使用了一点，它工作得相当好，而且它正在积极开发中。

顺便说一句，我不知道为什么有人修改了从控制台中提到使用“perl -e”的人。这不是真正的 REPL，没错，但它非常有用，而且我一直都在使用它。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2008-09-16T19:44:29.363

我写了一个我称之为“psh”的脚本：

```
#! /usr/bin/perl

while (<>) {
  chomp;
  my $result = eval;
  print "$_ = $result\n";
} 
```

无论你输入什么，它都会在 Perl 中计算：

```
> gmtime(2**30)
gmtime(2**30) = Sat Jan 10 13:37:04 2004

> $x = 'foo'
$x = 'foo' = foo

> $x =~ s/o/a/g
$x =~ s/o/a/g = 2

> $x
$x = faa 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2014-04-03T14:07:39.263

如果您想要历史记录，请使用[rlwrap](https://linux.die.net/man/1/rlwrap)。这可能是你`~/bin/ips`的例子：

```
#!/bin/sh
echo 'This is Interactive Perl shell'
rlwrap -A -pgreen -S"perl> " perl -wnE'say eval()//$@' 
```

这就是它的样子：

```
$ ips
This is Interactive Perl shell
perl> 2**128
3.40282366920938e+38
perl> 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2008-09-16T15:57:19.643

我认为您是在询问 perl 的 REPL（读取、评估、打印、循环）接口。有几种方法可以做到这一点：

*   Matt Trout 有[一篇文章](http://chainsawblues.vox.com/library/post/a-perl-read-excute-print-loop-repl.html)描述了如何写一个
*   Adriano Ferreira[描述了一些选项](http://use.perl.org/use.perl.org/articlea9a7.html?sid=07/08/30/1729255)
*   最后，您可以在 irc.perl.org 上访问 IRC，并在许多流行频道中试用其中一个 eval 机器人。他们将评估您传递给他们的 perl 块。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2008-09-16T15:42:39.287

我使用命令行作为控制台：

```
$ perl -e 'print "JAPH\n"' 
```

然后我可以使用我的*bash*历史记录来取回旧命令。但是，这不会保留状态。

当你想测试“一件小事”时（比如回答 Perl 问题），这种形式最有用。通常，我发现这些命令被逐字提取到 shell 脚本或 makefile 中。

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2008-09-16T15:38:36.893

没有像 Python 那样内置的 Perl 交互式控制台。但是，您可以使用 Perl 调试器来调试相关的事情。您可以使用 -d 选项打开它，但您可能需要查看“man perldebug”来了解它。

经过一番谷歌搜索，有一个单独的项目实现了一个 Perl 控制台，您可以在[http://www.sukria.net/perlconsole.html](http://www.sukria.net/perlconsole.html)。

希望这可以帮助！

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2008-09-16T15:37:59.890

您始终可以直接进入内置调试器并从那里运行命令。

```
 perl -d -e 1 
```

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2015-02-06T18:49:29.943

有两种流行的 Perl REPL。

1.  [Devel::REPL](https://metacpan.org/pod/Devel::REPL)很棒。
2.  但IMO[回复](https://metacpan.org/pod/Reply)更好。

* * *

## 回答 #10

> 赞同：14
> 
> 时间：2015-09-26T14:01:54.627

我创建[`perli`](https://github.com/mklement0/perli)了一个在**Linux、macOS 和 Windows**上运行的**Perl REPL**。

 **它的重点是自动结果打印、方便的文档查找和正则表达式匹配的简单检查。[你可以在这里](https://github.com/mklement0/perli#examples)
看到截图。

它可以**独立**工作（除了 Perl 本身之外没有其他依赖项），但**强烈建议****安装[`rlwrap`](https://github.com/hanslub42/rlwrap)**它以支持命令行编辑、持久命令历史记录和制表符补全 -[在此处](https://github.com/mklement0/perli#supported-platforms-and-prerequisites)阅读更多信息。

**安装**

*   如果你碰巧安装了 Node.js：

    ```
    npm install -g perli 
    ```

*   除此以外：

    *   *类 Unix*平台：[将此脚本](https://raw.githubusercontent.com/mklement0/perli/stable/bin/perli)下载到系统路径中`perli`的文件夹中，并使用`chmod +x`.

    *   *Windows*：[将此脚本](https://raw.githubusercontent.com/mklement0/perli/stable/bin/perli)作为`perli.pl`（注意`.pl`扩展名）下载到系统路径中的文件夹中。
        如果您不介意将 Perli 调用为`perli.pl`，则一切就绪。否则，在同一文件夹中
        创建一个批处理文件，内容如下： ; 这使得调用只是.`perli.cmd``@%~dpn.pl %*``perli`

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2008-09-16T15:37:37.677

`perl -d`是你的朋友：

```
% perl -de 0
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2008-09-17T07:45:32.717

来自 Devel::REPL 的 re.pl

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2008-09-18T10:48:08.713

我总是这样做：

```
rlwrap perl -wlne'eval;print$@if$@' 
```

在 5.10 中，我切换到：

```
rlwrap perl -wnE'say eval()//$@' 
```

（rlwrap 是可选的）

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2008-09-16T15:44:53.603

[你可以在这里查看 psh： http](http://gnp.github.io/psh/) ://gnp.github.io/psh/

它是一个完整的 shell（例如，您可以使用它来代替 bash），但使用 perl 语法..因此您可以动态创建方法等。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2008-09-16T15:46:40.400

Perl 没有控制台，但调试器可以作为一个控制台使用。在命令提示符处，键入`perl -de 1`. （值“1”无关紧要，它只是一个什么都不做的有效语句。）

[Perl shell](http://perldoc.perl.org/perlfaq3.html#Is-there-a-Perl-shell%3f)也有几个选项。

有关更多信息，请阅读[perlfaq3](http://perldoc.perl.org/perlfaq3.html)。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2013-09-17T07:28:32.133

读取-评估-打印循环：

```
$ perl -e'while(<>){print eval,"\n"}' 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2015-07-08T03:55:34.353

^(更新：我已经创建了一个可下载的 REPL - 请参阅[我的其他答案](https://stackoverflow.com/a/32798002/45375)。)

事后看来：

*   现有答案中提到的第三方解决方案要么安装**起来****很麻烦，而且/或者如果没有非平凡的、不明显的额外步骤就无法工作**——一些解决方案似乎至少被放弃了一半。
*   **一个可用的 REPL 需要用于命令行编辑键盘支持和历史支持的 readline 库**——确保这是许多第三方解决方案的麻烦点。
*   如果你安装了 CLI **`rlwrap`，它为任何命令提供了 readline 支持，你可以将它与一个简单的 Perl 命令结合起来创建一个可用的 REPL**，这样就可以在没有第三方 REPL 解决方案的情况下使用它。
    *   在 OSX 上，您可以`rlwrap`通过[Homebrew](http://brew.sh)安装`brew install rlwrap`.
    *   Linux 发行版应该`rlwrap`通过它们各自的包管理器提供；例如，在 Ubuntu 上，使用`sudo apt-get install rlwrap`.
    *   **请参阅[Ján Sáreník 的回答](https://stackoverflow.com/a/22840242/45375)，以了解所说的`rlwrap`和 Perl 命令的组合。**

* * *

**Ján 的回答**你没有得到什么：****

 ***   自动完成
*   输入多行语句的能力

提供这些的唯一第三方解决方案（通过非平凡的安装 + 额外的、非显而易见的步骤）是**[psh](https://github.com/gnp/psh)**，但是：

*   大约 2.5 年没有活动了

*   它的重点不同，它旨在成为一个成熟的*shell 替代品*，因此像传统的 shell 一样工作，这意味着它不会自动将命令评估为*Perl*`print`语句，并且需要显式的输出命令，例如打印表达式的结果。

* * *

[Ján Sáreník 的答案](https://stackoverflow.com/a/22840242/45375)可以通过一种方式改进：

*   默认情况下，它将**数组/列表/哈希表打印为*标量***，即仅打印它们的*元素计数*，而枚举它们的元素会很方便。

如果您将**`Data::Printer`**模块安装`[sudo] cpan Data::Printer`为一次性操作，则可以将其加载到 REPL 中以使用该**`p()`函数，您可以将列表/数组/哈希表传递给该函数以进行枚举。**

这是一个名为**readline 和****support的****别名`iperl``Data::Printer`**，您可以将其放入类似 POSIX 的 shell 的初始化文件中（例如，`~/.bashrc`）：

```
alias iperl='rlwrap -A -S "iperl> " perl -MData::Printer -wnE '\''BEGIN { say "# Use `p @<arrayOrList>` or `p %<hashTable>` to print arrays/lists/hashtables; e.g.: `p %ENV`"; } say eval()//$@'\' 
```

例如，您可以执行以下操作以通过 hashtable 打印所有环境变量`%ENV`：

```
$ iperl        # start the REPL
iperl> p %ENV  # print key-value pairs in hashtable %ENV 
```

与 Ján 的回答一样，表达式的*标量结果会**自动*打印出来；例如：

```
iperl> 22 / 7  # automatically print scalar result of expression: 3.14285714285714 
```

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2016-03-05T14:56:12.150

在 Debian/Ubuntu 下：

```
$ sudo apt-get install libdevel-repl-perl
$ re.pl

$ sudo apt-get install libapp-repl-perl
$ iperl 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2016-05-31T17:11:28.147

Matt Trout 的[概述](http://shadow.cat/blog/matt-s-trout/mstpan-17/)列出了五种选择，从`perl -de 0`开始，他建议[`Reply`](https://metacpan.org/pod/Reply)，如果通过插件的可扩展性很重要，或者`tinyrepl`从[`Eval::WithLexicals`](https://metacpan.org/pod/Eval::WithLexicals)，对于包括 readline 支持和词法持久性的最小的纯 perl 解决方案。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2008-09-16T15:53:20.900

还可以在 CPAN 上查找 ptkdb： [http ://search.cpan.org/search?query=ptkdb&mode=all](http://search.cpan.org/search?query=ptkdb&mode=all)

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2008-09-17T07:47:13.743

Sepia 和 PDE 也有自己的 REPL（用于 GNU Emacs）。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2008-09-18T05:54:52.897

另请参阅 Stylish REPL（适用于 GNU Emacs）[http://blog.jrock.us/articles/Stylish%20REPL.pod](http://blog.jrock.us/articles/Stylish%20REPL.pod)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-05-20T22:03:51.133

您可以在这里在线进行（就像生活中的许多事情一样）：

[https://www.tutorialspoint.com/execute_perl_online.php](https://www.tutorialspoint.com/execute_perl_online.php)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-06-10T16:42:21.317

您可以`org-babel`在`emacs`; 打开一个`org-mode`文件，即 ，`tmp.org`然后你可以这样做：

```
#+begin_src perl :results output
@a = (1,5,9);
print ((join ", ", @a) . "\n");
$b = scalar @a;
print "$#a, $b\n";
print "$#a, " . @a . "\n";
print join ", ", 1..$#a; print "\n";
print join ", ", @a[0..$#a]
#+end_src 
```

按下`CTRL-c CTRL-c`eval 块：

```
#+RESULTS:
#+begin_example
1, 5, 9
2, 3
2, 3
1, 2
1, 5, 9
#+end_example 
```

我不确定这需要什么 emacs 配置，但我认为你可以安装[https://github.com/hlissner/doom-emacs](https://github.com/hlissner/doom-emacs)并启用它`perl`和`org-mode`模块。

# user-interface - 使用图片作为按钮？

> ID：73674
> 
> 赞同：0
> 
> 时间：2008-09-16T15:36:37.383
> 
> 标签：user-interface

我和我的一个朋友谈过，他告诉我可以在图像编辑器（gimp/photoshop）中创建图像，然后将其用作按钮。他说，具有出色 GUI 的应用程序就是这样做的。

他还说，有一个文件描述了图像的哪些部分构成了按钮。

这是可能的，还是他“疯了”？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T15:39:52.447

这需要通过选择的语言等来澄清。通常，大多数语言（WinForms、Java AWT/SWT 等）都有一个图像或背景图像属性，允许您将图像用于按钮。甚至还有皮肤框架可以让您以易于定义的方式为所有控件使用图像。

如果您在谈论 HTML，那么有一种按钮输入类型可以允许将图像用作表单的按钮。

@Vhaerun
[CodeProject](http://www.codeproject.com)是查找大量皮肤库的好地方。我很久以前 用过[这个。](http://www.codeproject.com/KB/library/SkinCtrl.aspx)[Winamp](http://www.winamp.com)是皮肤应用程序的一个很好的例子，用户实际上可以创建自己的模板来完全改变应用程序的外观，而无需更改任何代码。实际上，大多数媒体播放器都有某种可用的皮肤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T15:38:14.993

你可以做任何事情，特别是因为你没有语言、环境等方面的限制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T15:39:47.890

不，他并不疯狂，您可以在几乎所有 GUI 工具上使用图像而不是按钮，它们通常是按钮上的图像，或者在某些情况下您可以将图像放在屏幕上并为其分配 onclick 事件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T15:48:40.803

你的问题不是很具体，所以没有人能给你一个明确的答案，但这里有一个尝试这样做而不贬低你：

图形设计师（使用 Photoshop、gimp 等工具）与桌面和基于 Web 的应用程序的开发人员一起参与是很常见的。基于 Web 的应用程序可以轻松捕获有关何时单击图像的信息，并且人们通常会使用图像文件本身中的文本来设计按钮，或者使用顶部带有纯文本的背景图片/边框。关于如何在 Web 上实现这一点本身并没有标准，但有很多网站可以作为示例（尝试使用 Firebug 和 FireFox 来检查其他网站并了解它们是如何做事的）。

如果手头的情况是面向桌面的，那么答案就会变得复杂得多。换肤以多种方式完成，并且根据所使用的平台和库，实现细节差异很大。用最简单的话来说，大多数 GUI 框架（如 GTK、QT、Windows Forms、Windows Presentation Foundation）都包含一个基本的图片控件，并且该控件通常可以处理“单击”事件，这将使其可以用作按钮，但是如果你想要不同的状态（按下、禁用等），你将不得不在这样的事情上投入更多的精力；您也不会发现此方法适合替换应用程序中所有按钮的呈现，而是您会为每个按钮手动执行的操作，或者编写自己的自定义按钮控件来专门使用您的资产。

就描述文件中描述的不同图像组合以覆盖按钮呈现的文件而言，这将让我相信您正在使用已经存在的可换肤应用程序（如 Firefox 或 Winamp），或者他是说到一些特定的 UI 工具包。我不知道大多数常见的系统级 UI 工具包中普遍提供此功能。

将来，您可能希望更具体地提出您的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T15:38:40.093

在 HTML 中，你可以这样做：

```
<input type="button" src="/path/to/image.png" /> 
```

或者，将 onclick 事件分配给图像会导致该图像类似于按钮的工作：

```
<img src="/path/to/image.png" onclick="function(){doSomething();}" /> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T15:41:13.580

如果你说的是 HTML，你可以使用 <input type="image" src="myfile.png" />

规格[在这里](http://www.w3.org/TR/html401/interact/forms.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T15:38:35.913

我猜是图像地图。没有单独的文件描述地图，它都是 html 文档的一部分。

[http://www.w3schools.com/TAGS/tag_map.asp](http://www.w3schools.com/TAGS/tag_map.asp)

# domain-driven-design - 从事领域驱动设计的公司

> ID：73684
> 
> 赞同：2
> 
> 时间：2008-09-16T15:37:31.890
> 
> 标签：domain-driven-design

我刚刚读完《领域驱动设计》，我对其中的一些想法着迷。你知道有哪些公司在他们的项目中实现了无处不在的语言吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-07T10:37:35.207

这是一个间接的答案。您可以通过查看应用领域驱动设计实践的软件开发公司并了解他们的客户是谁来找到此类项目。

三个这样的公司是：

1.  [领域语言](http://www.domainlanguage.com/)- Eric Evans 工作的领域，他写了领域驱动设计一书

2.  [Factor10](http://factor10.com/) - Jimmy Nilsson 工作的地方，他写了“应用领域驱动设计和模式”

3.  [OmegaPoint](http://www.omegapoint.se/) - 员工 Dan Bergh Johnsson 就 DDD 进行了多次会谈

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T15:53:21.837

[Domain Driven Design Yahoo Group](http://tech.groups.yahoo.com/group/domaindrivendesign/)可能是找到问题答案的更好地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-06T12:43:56.630

挪威石油和天然气公司 Statoil 使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-02T20:28:45.593

我工作的公司充分利用领域驱动设计，在完成了一些非常成功的项目之后，我们坚持设计理念。

这家公司是[Hint Innovation](http://www.hintinnovation.com)，我们是一家相对较新的公司，所以网站还没有完成，但应该是在一月份之前，你可能想回去看看。

我不知道有任何其他公司在他们的所有项目中都使用领域驱动设计方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-09T19:26:59.233

在过去的 2 年里，我们一直在[Earnware Corporation使用 DDD。](http://www.earnware.com/)由于我们已经存在 10 多年了，我们使用“反腐败层”模式来与遗留系统进行对话。

DDD 意味着很多东西，但它也是您可以在编写下一个函数时立即开始做的事情 ( [http://www.agileatwork.com/domain-driven-design-in-the-small/](http://www.agileatwork.com/domain-driven-design-in-the-small/) )。这是关于缩小业务概念和代码之间的差距，以便您的代码可以在正确的位置弯曲。[工作单元](http://www.agileatwork.com/unit-of-work-with-unity-and-aspnet-mvc/)和[规范](http://www.agileatwork.com/this-could-have-been-a-stored-procedure/)等模式有助于实现最终结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-01-27T12:31:49.943

Chillisoft 从事领域驱动设计已有 10 年，最近开发了[Habanero](http://www.habanerolabs.com/)一种企业应用程序开发框架，该框架结合了领域驱动设计的许多原则以及多年来吸取的许多经验教训。

# c++ - cout 打印“-0”而不是“0”

> ID：73686
> 
> 赞同：4
> 
> 时间：2008-09-16T15:37:38.393
> 
> 标签：c++, floating-point

```
#include <iostream>
using namespace std;

int main()
{
    double u = 0;
    double w = -u;
    cout << w << endl;
    return 0;
} 
```

为什么这个伟大的代码输出`-0`而不是`0`像人们期望的那样？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-16T15:39:20.013

浮点数的 IEEE 754 标准将符号位与尾数分开，这允许零为负数。 [维基百科](http://en.wikipedia.org/wiki/IEEE_754)应该能够帮助解释这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T15:40:51.897

在 IEEE 浮点中`0`，并且`-0`都是不同的值，从[这里](http://steve.hollasch.net/cgindex/coding/ieeefloat.html)的“特殊值”下：

> 请注意，-0 和 +0 是不同的值，尽管它们比较相等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T15:42:13.533

`+0`浮点算术的 IEEE 754 标准对和进行了区分`-0`，这可以用于处理四舍五入到零的非常小的数字，而符号仍然很重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T15:39:49.997

因为“负零”是一个有效数字！

[http://en.wikipedia.org/wiki/%E2%88%920_(数字)](http://en.wikipedia.org/wiki/%E2%88%920_(number))

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T15:40:25.877

看看这篇文章：[http](http://en.wikipedia.org/wiki/Floating_point) ://en.wikipedia.org/wiki/Floating_point 。请注意，即使值为零，也有符号位。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T15:42:43.343

因为 double 确实可以具有值 -0、+0、-infinity、+infinity 和 NaN，这可能是各种有趣表达式的结果，例如 0/0。

[在这里](http://en.wikipedia.org/wiki/%E2%88%920_(number))查看更多信息。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T15:49:34.950

因为你的期望是错误的。

IEEE 要求分别表示正零和负零。

这就是你在这里看到的。

# c# - 如何在没有无限递归的情况下检查“==”运算符重载中的空值？

> ID：73713
> 
> 赞同：121
> 
> 时间：2008-09-16T15:39:37.470
> 
> 标签：c#, .net, operator-overloading

以下将导致 == 运算符重载方法的无限递归

```
 Foo foo1 = null;
    Foo foo2 = new Foo();
    Assert.IsFalse(foo1 == foo2);

    public static bool operator ==(Foo foo1, Foo foo2) {
        if (foo1 == null) return foo2 == null;
        return foo1.Equals(foo2);
    } 
```

如何检查空值？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2008-09-16T15:41:17.013

使用`ReferenceEquals`：

```
Foo foo1 = null;
Foo foo2 = new Foo();
Assert.IsFalse(foo1 == foo2);

public static bool operator ==(Foo foo1, Foo foo2) {
    if (object.ReferenceEquals(null, foo1))
        return object.ReferenceEquals(null, foo2);
    return foo1.Equals(foo2);
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-09-16T15:40:56.467

在重载方法中强制转换为对象：

```
public static bool operator ==(Foo foo1, Foo foo2) {
    if ((object) foo1 == null) return (object) foo2 == null;
    return foo1.Equals(foo2);
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-09-16T15:51:27.347

使用`[ReferenceEquals](http://msdn.microsoft.com/en-us/library/system.object.referenceequals(VS.80).aspx)`. 从[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/472d7dfe-9233-49d1-a545-de44069614b5/#ccef9e05-d609-4f01-9027-b84ea7f6a41d)：

```
public static bool operator ==(Foo foo1, Foo foo2) {
    if (ReferenceEquals(foo1, null)) return ReferenceEquals(foo2, null);
    if (ReferenceEquals(foo2, null)) return false;
    return foo1.field1 == foo2.field2;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-06-05T20:08:01.673

如果您使用的是 C# 7 或更高版本，则可以使用空常量模式匹配：

```
public static bool operator==(Foo foo1, Foo foo2)
{
    if (foo1 is null)
        return foo2 is null;
    return foo1.Equals(foo2);
} 
```

这给你的代码比调用 object.ReferenceEquals(foo1, null)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-16T15:42:46.760

尝试`Object.ReferenceEquals(foo1, null)`

无论如何，我不建议重载`==`运算符；它应该用于比较引用，并`Equals`用于“语义”比较。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-17T10:18:27.560

如果我已经重写`bool Equals(object obj)`并且我想要运算符`==`并`Foo.Equals(object obj)`返回相同的值，我通常会`!=`像这样实现运算符：

```
public static bool operator ==(Foo foo1, Foo foo2) {
  return object.Equals(foo1, foo2);
}
public static bool operator !=(Foo foo1, Foo foo2) {
  return !object.Equals(foo1, foo2);
} 
```

然后，操作员`==`将在为我完成所有空值检查后最终调用`foo1.Equals(foo2)`我已覆盖的实际检查两者是否相等。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-02-07T15:19:58.433

`null`在这种情况下，实际上有一种更简单的检查方法：

```
if (foo is null) 
```

就是这样！

此功能是在 C# 7 中引入的

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-16T08:13:26.553

我的方法是做

```
(object)item == null 
```

我依赖于`object`自己的不会出错的等式运算符。或自定义扩展方法（和重载）：

```
public static bool IsNull<T>(this T obj) where T : class
{
    return (object)obj == null;
}

public static bool IsNull<T>(this T? obj) where T : struct
{
    return !obj.HasValue;
} 
```

或处理更多案件，可能是：

```
public static bool IsNull<T>(this T obj) where T : class
{
    return (object)obj == null || obj == DBNull.Value;
} 
```

约束阻止`IsNull`了值类型。现在它像打电话一样甜蜜

```
object obj = new object();
Guid? guid = null; 
bool b = obj.IsNull(); // false
b = guid.IsNull(); // true
2.IsNull(); // error 
```

这意味着我有一种始终如一的/不易出错的检查空值的方式。我还发现[`(object)item == null`它比 非常非常非常快`Object.ReferenceEquals(item, null)`](https://stackoverflow.com/a/13899726/661933)，但前提是它很重要（我目前正在做一些我必须对所有内容进行微优化的事情！）。

要查看有关实施相等检查的完整指南，请参阅[比较引用类型的两个实例的“最佳实践”是什么？](https://stackoverflow.com/questions/104158/what-is-best-practice-for-comparing-two-instances-of-a-reference-type)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-02T16:14:56.563

[静态`Equals(Object, Object)`方法](https://msdn.microsoft.com/en-us/library/w4hkze5k%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396)指示两个对象`objA`和`objB`是否相等。它还使您能够测试其值为`null`相等的对象。它比较`objA`和`objB`的相等性如下：

*   它确定两个对象是否代表相同的对象引用。如果他们这样做，则该方法返回`true`. 这个测试相当于调用`ReferenceEquals`方法。此外，如果两者都是`objA`，则该方法返回。`objB``null``true`
*   它确定是`objA`还是。如果是，则返回. 如果这两个对象不代表相同的对象引用并且两者都不代表，则调用并返回结果。这意味着如果覆盖该方法，则调用此覆盖。`objB``null``false``null``objA.Equals(objB)``objA``Object.Equals(Object)`

.

```
public static bool operator ==(Foo objA, Foo objB) {
    return Object.Equals(objA, objB);
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-16T05:05:53.963

更多地回复[覆盖操作员如何与](https://stackoverflow.com/questions/4219261/overriding-operator-how-to-compare-to-null)在此处重定向为重复的 null 进行比较。

在这样做以支持值对象的情况下，我发现新的符号很方便，并且希望确保只有一个地方进行比较。还利用 Object.Equals(A, B) 简化了空检查。

这将重载 ==、!=、Equals 和 GetHashCode

```
 public static bool operator !=(ValueObject self, ValueObject other) => !Equals(self, other);
    public static bool operator ==(ValueObject self, ValueObject other) => Equals(self, other);
    public override bool Equals(object other) => Equals(other as ValueObject );
    public bool Equals(ValueObject other) {
        return !(other is null) && 
               // Value comparisons
               _value == other._value;
    }
    public override int GetHashCode() => _value.GetHashCode(); 
```

对于更复杂的对象，在 Equals 和更丰富的 GetHashCode 中添加额外的比较。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-02T05:09:51.210

对于现代和简洁的语法：

```
public static bool operator ==(Foo x, Foo y)
{
    return x is null ? y is null : x.Equals(y);
}

public static bool operator !=(Foo x, Foo y)
{
    return x is null ? !(y is null) : !x.Equals(y);
} 
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2016-10-18T13:02:52.800

> 运算符 == 重载的一个常见错误是使用`(a == b)`, `(a ==null)`, 或`(b == null)`检查引用相等性。相反，这会 **导致**调用重载运算符 ==，从而导致`infinite loop`. 使用`ReferenceEquals`或将类型转换为 Object，以避免循环。

看看这个

```
// If both are null, or both are same instance, return true.
if (System.Object.ReferenceEquals(a, b))// using ReferenceEquals
{
    return true;
}

// If one is null, but not both, return false.
if (((object)a == null) || ((object)b == null))// using casting the type to Object
{
    return false;
} 
```

重载 Equals() 和运算符 == 的参考 [指南](https://msdn.microsoft.com/ru-ru/library/ms173147(v=vs.80).aspx#Anchor_1)

* * *

## 回答 #13

> 赞同：-5
> 
> 时间：2008-09-16T15:58:53.710

您可以尝试使用对象属性并捕获生成的 NullReferenceException。如果您尝试的属性是从 Object 继承或覆盖的，那么这适用于任何类。

```
public static bool operator ==(Foo foo1, Foo foo2)
{
    //  check if the left parameter is null
    bool LeftNull = false;
    try { Type temp = a_left.GetType(); }
    catch { LeftNull = true; }

    //  check if the right parameter is null
    bool RightNull = false;
    try { Type temp = a_right.GetType(); }
    catch { RightNull = true; }

    //  null checking results
    if (LeftNull && RightNull) return true;
    else if (LeftNull || RightNull) return false;
    else return foo1.field1 == foo2.field2;
} 
```

# sql - 用于 SQL Server Express 2005 64 位的引导程序

> ID：73733
> 
> 赞同：2
> 
> 时间：2008-09-16T15:41:21.817
> 
> 标签：sql, sql-server, sql-server-2005

我在哪里可以获得 64 位引导程序`SQL Server Express 2005 64 bit`。默认引导程序仅为 32 位。这不会安装在 Vista 64 位上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T15:50:53.637

Microsoft 的[SQL Server Express 下载页面](http://www.microsoft.com/express/2005/sql/download/)在页面底部附近有一个 64 位版本的链接

# java - 重型 AJAX Java 应用程序的最佳服务器端框架

> ID：73736
> 
> 赞同：14
> 
> 时间：2008-09-16T15:41:33.627
> 
> 标签：java, ajax, web-applications, frameworks, dhtml

有[数以万计](http://java-source.net/open-source/web-frameworks)的 Java Web 应用程序框架。

95% 是在基于 AJAX/DHTML 的开发的现代时代之前设计的，这意味着这些新方法是嫁接而不是设计进去的。

是否有任何框架是从头开始构建的，例如[GWT + Extjs](http://extjs.com/products/gxt/)？

如果没有，哪个框架最适合具有动态数量的字段和页面的表单世界，这些字段和页面会改变客户端？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-18T06:59:36.407

Nextapp (www.nextapp.com) 的 Echo2 / Echo3 非常棒。

与 GWT 相比的优势：

1）它不限于像 GWT 这样的 java 子集 2）它更容易（据我估计）学习 3）拥有非常强大的设计工作室，几乎可以进行拖放设计。
4) 它非常快，并且在所有平台的浏览器上运行良好 5) 您可以使用 java 脚本或 java 编写您的应用程序 6) 它具有处理事件和动作的出色而直接的方法。

就我个人而言，我认为对于任何您尝试集成 java 和快速交付的 Web 应用程序，我会毫不犹豫地选择 Echo3 或 Echo2。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T15:58:53.057

If you're starting from scratch. I'd have to say [Google Web Toolkit](http://code.google.com/webtoolkit/). I have to say it is incredibly powerful. You get keep using most of your Java tools. Plus, you don't have to duplicate code that exists on both the server and the client, it just gets compiled differently for each area.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-16T16:16:52.403

我会考虑 REST 风格的框架以及此处的其他建议——Restlet[或](http://restlet.org)Jersey[可能](http://jersey.java.net/)是后端的不错选择，而您在前端使用 JQuery 或 GWT 之类的东西。这两个框架都可以轻松生成 JSON，而 REST 样式在客户端应用程序和服务器源之间提供了一条清晰的分界线；我发现 JSF 可以使这种划分变得非常模糊。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-16T15:50:16.960

我使用 JSF 和[IceFaces](http://www.icefaces.org)。尽管 JSF 有一些限制，但 IceFaces 似乎工作得很好，并且解决了 JSF 的一些问题。

[尽管Echo2](http://echo.nextapp.com/site/)看起来很有趣，但我还没有使用过真正好的 AJAX Java 框架。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-16T15:51:24.837

我喜欢[条纹框架](http://www.stripesframework.org/)。它可以让你使用任何你想要的 javascript 工具包。

这是他们关于[AJAX的文档](http://www.stripesframework.org/display/stripes/AJAX)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-17T12:49:45.483

GWT 非常强大且易于使用（全是 Java，没有 Javascript/HTML/CSS 编码）。如果 Google 有自己的方式，它将成为 Web 应用程序开发中的主导框架/工具，这是有充分理由的。它已经与 Google Gears （允许离线访问网络应用程序）一起使用——而且很可能会被优化以在 Google Chrome 中工作。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-16T19:08:53.643

[DWR](http://directwebremoting.org/)

我使用它来动态填充下拉菜单，甚至根据表单上其他位置的用户输入动态过滤它们。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-16T15:53:21.913

I like the combination of JBoss Seam and Richfaces, especially with the JBoss tools that are extentions to Eclipse - makes building these sort of RIA's incredibly easy.

Wikipedia contains some useful comparisons:

[Comparison of JavaScript frameworks](http://en.wikipedia.org/wiki/Comparison_of_JavaScript_frameworks) [List of AJAX Frameworks](http://en.wikipedia.org/wiki/List_of_Ajax_frameworks)

Your choice depends on several different factors including whether you want the "work" done client-side (most javascript frameworks) or server-side (echo2 etc.). Other things worth looking at are tools like OpenLaszlo that provide Flash (I think) out of the box, but drop back to DHTML if there is no Flash player present.

Unfortunately I think the decision comes down to balancing several competing cocerns. Check out the comparisons and try them out - most come with online demo's for you to try.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-02T11:17:08.587

[Aptana](http://www.aptana.com)有一个名为[Jaxer](http://www.aptana.com/jaxer)的服务器端框架。这是来自他们的网站：

> Jaxer 的核心引擎基于流行的 Mozilla Firefox 浏览器中的相同 Mozilla 引擎。这意味着您在客户端和服务器上使用的执行环境是相同的。它自始至终都是 Ajax。这意味着您只需要一组语言——浏览器的原生语言——来创建整个应用程序。

这个框架是开源的，并且有一个非常好的基于 Eclipse 的 IDE。Aptana 还在为 ActiveRecord 开发一个名为[ActiveRecordJS](http://activerecordjs.org/)的 Javascript 实现。您可能可以将客户端和服务器端与他们的框架一起使用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-09-14T09:31:33.437

GWT 是我用过的最好的 AJAX 框架之一。这个框架最重要的是它由谷歌维护。每个人都知道“谁是谷歌？”

```
GWT is used by many products at Google, including Google AdWords and Google
Wallet. It's open source, completely free, and used by thousands of 
enthusiastic developers around the world. 
```

GWT 提供了丰富的小部件，可用于构建任何应用程序。他们拥有的几乎所有小部件。

另一个重要的一点是 GWT 正在不断发展，它也有稳定的发布，这是非常好的事情。谷歌还发布了 GWT-Material 的另一件事，这又是一件非常好的事情，因为每个人都在向材料迈进。

我希望这能帮到您！！！

# version-control - 长期源代码归档：可能吗？

> ID：73745
> 
> 赞同：9
> 
> 时间：2008-09-16T15:42:49.270
> 
> 标签：version-control, storage

我很好奇将源代码可靠、安全地保存好几年。根据我的研究/经验：

1.  刻录 DVD-R 等光学介质会随着时间的推移丢失一些数据。几年后，我并没有把我放在他们身上的所有文件都拿下来。读取错误等

2.  硬盘驱动器是机械的，容易发生故障/过时，数据恢复费用高昂，这很难让您的数据保密（您将其发送给某些公司）。

3.  磁带存储：见#2。

4.  在线存储受某些数据存储中心的心血来潮，那里的安全性或缺乏安全性，以及公司倒闭的可能性等因素的影响。而且它很昂贵，你不能保证他们没有偷看。

随着时间的推移，我发现由于这些问题，我已经丢失了旧项目的源代码。还有其他解决方案吗？

*答案总结：*
1\. 使用多种方法进行冗余。
2\. 将您的源代码打印为文本或条形码。
3\. RAID 阵列更适合本地存储。
4\. 开源您的项目将使其永远持续下去。
5\. 加密是安全的答案。
6、磁带存储经久耐用。
7\. 分布式/保证在线存储便宜且可靠。
8\. 使用源代码管理来维护历史，并备份repo。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-16T15:46:10.807

最好的答案是“在多个地方”。如果我担心尽可能长时间地保留我的源代码，我会这样做：

1) 定期备份到一些光学媒体，比如每月刻录一次到 DVD 并在异地存档。

2）将其备份到我本地机器上的多个硬盘驱动器

3) 将其备份到亚马逊的 S3 服务。他们有保证，它是一个分布式系统，因此没有单点故障，您可以轻松加密您的数据，因此他们无法“偷看”它。

通过这三个步骤，您丢失数据的机会实际上为零。对于非常重要的数据，没有太多的备份。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-16T15:45:28.813

根据您的偏执程度，我建议您使用打印机和保险箱。

更严重的是，RAID 阵列不再那么昂贵，只要您继续使用和监控它，一个正确设置的阵列几乎可以保证永远不会丢失数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-16T15:44:21.093

您要保留的任何数据都应以多种格式存储在多个位置。虽然任何一个失败的几率可能很大，但所有失败的几率都很小。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-16T15:45:23.523

如果您想长时间存档某些内容，我会使用磁带驱动器。它们可能不会容纳很多东西，但它们是可靠的，并且几乎是数据归档的首选存储介质。然而，我从未亲身经历过磁带驱动器上的数据丢失。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-16T15:47:27.403

备份您的项目的最佳方式是让它们开源并出名。这样，总会有人拥有它的副本并能够将其发送给您。

之后，只需关心磁性/光学介质，继续更新它并在多个介质（包括，为什么不，RAID 集）上的多个副本（在线以及，记住你可以加密它）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-16T15:53:32.710

我想你会惊讶于这些天在线存储的价格是多么合理。Amazon S3（简单存储解决方案）每月每 GB 0.10 美元，上传费用为每 GB 0.10 美元，下载费用最高为每 GB 0.17 美元。

因此，如果您存储 20GB 一个月，上传 20GB 并下载 20GB，您将花费 8.40 美元（在欧洲数据中心稍贵 9 美元）。

这足以将您的数据存储在美国和欧盟数据中心以及 DVD 上——至少可以说，丢失这三个数据的可能性很小。

还有可用的前端，例如 JungleDisk。

[http://aws.amazon.com](http://aws.amazon.com)
[http://www.jungledisk.com/](http://www.jungledisk.com/)
[http://www.google.co.uk/search?q=amazon%20s3%20clients](http://www.google.co.uk/search?q=amazon%20s3%20clients)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-16T17:25:30.133

不要忘记使用 Subversion ( [http://subversion.tigris.org/](http://subversion.tigris.org/) )。我颠覆了我的整个生活（太棒了）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-16T15:49:16.667

我见过的最好的家用解决方案是使用 2D 条形码打印备份 - 数据密度相当高，可以很容易地重新扫描（假设是送纸扫描仪），它解决了问题数字域回到物理域——这很容易被保险箱之类的东西或像 Iron Mountain 这样的公司所满足。

另一个答案是“以上所有”。冗余总是有帮助的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-16T15:49:40.380

对于我的项目，我使用 1、2 和 4 的组合。如果它是非常重要的数据，则需要在多个地方有多个副本。我的重要数据每晚都会复制到 3-4 个位置。

如果您想要一个更简单的解决方案，我建议您从具有保险可靠性保证的知名提供商处获取在线存储帐户。如果您担心安全性，请仅在[TrueCrypt](http://www.truecrypt.org/)加密档案中上传数据。就成本而言，它可能会很昂贵......但如果它真的那么重要，那么成本就不算什么了。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-16T16:02:01.253

对于监管要求的电子数据归档，我们将数据保存在 RAID 和备份磁带上的两个不同位置（其中一个是 Iron Mountain）。我们还每隔几年更换一次磁带和 RAID。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-16T17:08:43.200

如果您需要“永远”保存它，最安全的方法可能是打印出代码并将其粘贴在塑料信封中，以使其免受元素的影响。我无法告诉你我丢失了多少代码到无法访问的备份装置......我没有纸质读卡器来读取我的旧 cobol 卡座，我的 5 1/4 没有驱动器“软盘，或者我的 3 1/2”软盘。但我的第一个大项目的打印输出仍然可读……即使在我曾经 3 岁的孩子决定它会成为一本很好的图画书之后。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-16T17:22:05.460

当您说“备份源代码”时，我希望您的意思也包括备份您的版本控制系统。

支持您当前的源代码（到多个地方）绝对是至关重要的，但在我看来，备份您的 VCS 保存的更改历史是最重要的。这似乎微不足道，尤其是当我们总是“活在当下，展望未来”时。然而，有太多次我们想要回顾过去调查一个问题，查看更改链，看看谁做了什么，我们是否可以回滚到以前的构建/版本。如果你练习大量的分支和合并，那就更重要了。归档单个主干是*不行的*。

您的版本控制系统可能附带有关备份策略的文档和建议。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-16T15:47:27.950

一种方法是定期回收您的存储介质，即从腐烂的介质中读取数据并将其写入新的介质。存在可以帮助您解决此问题的程序，例如[dvdisaster](http://www.dvdisaster.com/)。最终，没有什么是永恒的。只需选择最不烦人的解决方案。

至于＃2：您可以以加密形式存储数据，以防止数据恢复专家理解它。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-16T15:47:30.040

如果你有写备份机制，我认为选项 2 效果很好。它们也不必是涉及第三方的昂贵的（灾难恢复除外）。配置 RAID 5 的服务器可以解决问题。如果硬盘驱动器出现故障，请更换它。所有硬盘驱动器同时发生故障的可能性极小。在某些情况下，即使是镜像的 RAID 1 驱动器也足够了。

如果选项 2 看起来仍然是一个糟糕的解决方案，那么我唯一能想到的另一件事就是打印出源代码的硬拷贝，这比上述任何解决方案都存在更多问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-16T15:48:02.113

> 在线存储受一些数据存储中心的心血来潮，那里的安全性或缺乏安全性，公司倒闭的可能性等。再加上它很贵，

不一定很昂贵（例如参见[rsync.net](http://www.rsync.net/)），也不一定不安全。你当然也可以加密你的东西。

> 而且你不能保证他们没有偷看。

没错，但可能有比你的源代码更有趣的东西可以窥探。;-)

> 更严重的是，RAID 阵列不再那么昂贵

RAID*不是*备份。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-16T17:19:42.940

我刚刚和一个精通缩微电影的人交谈。虽然它是一项古老的技术，但对于长期存储而言，如果维护得当，它是最持久的数据存储形式之一。它不需要复杂的设备（放大镜和灯）来读取，但存储它可能需要一些工作。

再说一次，如前所述，如果您只是在几年而不是几十年的时间里谈论，将其打印到纸上并将其存储在受控环境中可能是最好的方法。如果您想获得真正的创意，您可以层压每张纸！

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-16T21:20:09.693

用于本地备份的 Drobo

用于短期本地存档的 DVD

用于异地长期归档的 Amazon S3

# asp.net - 客户端确认后下拉列表自动回发

> ID：73748
> 
> 赞同：3
> 
> 时间：2008-09-16T15:43:06.807
> 
> 标签：asp.net, drop-down-menu, onchange, autopostback

我有一个自动回发设置为 true 的下拉列表。我希望用户确认他们是否真的要更改该值，该值在回发时会触发服务器端事件（selectedindexchanged）。

我尝试添加一个 onchange 属性“return confirm('请单击 OK 进行更改。否则单击 CANCEL?';") 但无论确认结果如何，它都不会回发，并且如果选择取消，列表中的值不会恢复。

当我从 DropdownList 标记中删除 onchange 属性时，页面会回发。添加 onchange 属性时不会。我还需要连接事件处理程序吗（我在 C# .Net 2.0 上）。

任何线索都会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-16T16:29:30.250

您是否尝试将 onChange 事件设置为 javascript 函数，然后在函数内部显示 javascript 警报并在通过时使用 __doPostback 函数？

IE

```
 drpControl.Attributes("onChange") = "DisplayConfirmation();"

function DisplayConfirmation() {
  if (confirm('Are you sure you want to do this?')) {
    __doPostback('drpControl','');
  }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-16T16:08:19.507

您可以通过调用执行confirm() 的javascript 函数来利用CustomValidator 控件“验证”下拉菜单：

```
 <asp:DropDownList ID="TestDropDown" runat="server" AutoPostBack="true" CausesValidation="true"
            ValidationGroup="Group1"
            OnSelectedIndexChanged="TestDropDown_SelectedIndexChanged">
            <asp:ListItem Value="1" Text="One" />
            <asp:ListItem Value="2" Text="Two" />
        </asp:DropDownList>
       <script type="text/javascript">
            function ConfirmDropDownValueChange(source, arguments) {
                arguments.IsValid = confirm("Are you sure?");
            }
        </script>
        <asp:CustomValidator ID="ConfirmDropDownValidator" runat="server"
            ClientValidationFunction="ConfirmDropDownValueChange" Display="Dynamic" ValidationGroup="Group1"  /> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-04-23T01:14:53.897

当 DropDownList 触发部分回发时，以下工作：

```
// caching selected value at the time the control is clicked
MyDropDownList.Attributes.Add(
    "onclick",
    "this.currentvalue = this.value;");

// if the user chooses not to continue then restoring cached value and aborting by returning false
MyDropDownList.Attributes.Add(
    "onchange",
    "if (!confirm('Do you want to continue?')) {this.value = this.currentvalue; return false};"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T16:34:53.047

目前，您总是返回 的结果`confirm()`，因此即使它返回`true`，您仍然会在回发触发之前停止执行事件。你`onchange`应该`return false;`只在这样做的`confirm()`时候，也像这样：

```
if (!confirm('Please click OK to change. Otherwise click CANCEL?')) return false; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T16:50:59.623

如果您将 AutoPostBack 设置为 true，则覆盖 onchange 属性将不起作用，因为 ASP.NET 将始终将以下内容附加到 onchange 脚本的末尾：

```
;setTimeout('__doPostBack(\'YourDropDown\',\'\')', 0) 
```

如果您将 AutoPostBack 设置为 false，则使用“确认和 __doPostBack”类型的脚本（见上文，err.. 下面）覆盖 onchange 将起作用，但您可能必须手动创建 __doPostBack 函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-07-21T15:42:20.060

```
if (!confirm('Please click OK to change. Otherwise click CANCEL?')) return false; 
```

始终返回，因此无论用户单击确定还是取消，下拉列表的 OnSelectedIndexChanged 事件都会触发。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-16T15:52:53.570

确保您的活动是有线的：

```
dropDown.SelectedIndexChanged += new EventHandler(dropDown_SelectedIndexChanged); 
```

您还可以应用客户端属性来返回确认。如果取消，相应地设置索引。

```
dropDown.Attributes.Add("onchange", "javascript: return confirm('confirmation msg')"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-17T13:41:15.697

```
&lt;asp:DropDownList runat="server" ID="ddlShailendra"  AutoPostBack="True" OnSelectedIndexChanged="ddlShailendra_SelectedIndexChanged" onchange="javascript: { if(confirm('Click ok to prevent post back, Cancel to make a postback'))return true;} " &gt;
          &lt;asp:ListItem Text="tes" Value="1" >&lt;/asp:ListItem&gt;
            &lt;asp:ListItem Text="test" Value="-1"&gt;&lt;/asp:ListItem&gt;
            &lt;/asp:DropDownList&gt; 
```

内联编写函数，并且对于您想要回发的条件没有“返回”。这有效并且符合标准。

# oracle - Oracle中的双表是什么？

> ID：73751
> 
> 赞同：245
> 
> 时间：2008-09-16T15:43:19.863
> 
> 标签：oracle, dual-table

我听说有人提到这张桌子，但不确定它是关于什么的。

* * *

## 回答 #1

> 赞同：249
> 
> 时间：2008-09-16T15:45:29.483

它是一种带有单个记录的虚拟表，用于在您实际上对数据不感兴趣时​​进行选择，而是希望在 select 语句中获得某些系统函数的结果：

例如`select sysdate from dual;`

见[http://www.adp-gmbh.ch/ora/misc/dual.html](http://www.adp-gmbh.ch/ora/misc/dual.html)

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2008-09-16T15:47:43.083

这是一个包含一个元素的虚拟表。它很有用，因为 Oracle 不允许像这样的语句

```
 SELECT 3+4 
```

您可以通过编写来解决此限制

```
 SELECT 3+4 FROM DUAL 
```

反而。

* * *

## 回答 #3

> 赞同：75
> 
> 时间：2008-09-16T15:49:42.267

来自[维基百科](http://en.wikipedia.org/wiki/DUAL_table)

**历史**

DUAL 表由 Oracle 公司的 Chuck Weiss 创建，用于提供用于连接内部视图的表：

> *我在 Oracle 数据字典中创建了 DUAL 表作为基础对象。它本身并不打算被看到，而是在预期被查询的视图中使用。想法是您可以对 DUAL 表执行 JOIN，并在结果中为表中的每一行创建两行。然后，通过使用 GROUP BY，可以汇总生成的连接以显示 DATA 范围和 INDEX 范围的存储量。DUAL 这个名字似乎很适合从一个行创建一对行的过程。[1](http://en.wikipedia.org/wiki/DUAL_table)*

从上面可能看不出来，但原来的 DUAL 表中有两行（因此得名）。现在它只有一排。

**优化**

DUAL 原本是一张表，数据库引擎在选择 DUAL 时会对该表进行磁盘 IO。该磁盘 IO 通常是逻辑 IO（不涉及物理磁盘访问），因为磁盘块通常已经缓存在内存中。这导致针对 DUAL 表的大量逻辑 IO。

Oracle 数据库的更高版本已经过优化，即使 DUAL 表仍然存在，数据库也不再对 DUAL 表执行物理或逻辑 IO。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2008-09-16T15:44:22.840

我认为这篇维基百科文章可能有助于澄清。

[http://en.wikipedia.org/wiki/DUAL_table](http://en.wikipedia.org/wiki/DUAL_table)

> DUAL 表是一种特殊的单行表，默认情况下出现在所有 Oracle 数据库安装中。它适用于选择伪列，例如 SYSDATE 或 USER 该表有一个名为 DUMMY 的 VARCHAR2(1) 列，其值为“X”

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2008-09-16T15:47:25.423

这是Oracle中的特殊表。我经常用它来计算或检查系统变量。例如：

*   `Select 2*4 from dual`打印出计算结果
*   `Select sysdate from dual`打印服务器当前日期。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-16T15:45:01.247

一种可以运行命令并返回结果的伪表，例如 sysdate。还可以帮助您检查 Oracle 是否已启动并检查 sql 语法等。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-10-07T12:11:58.880

Oracle 中只有 1 行 1 列的实用程序表。它用于执行许多算术运算，通常可用于需要生成已知输出的地方。

选择 * 从双;

将给出单行，单列名为“DUMMY”，值为“X”，如下所示：

> ```
> DUMMY
> ----- 
> X 
> ```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-16T15:48:44.233

DUAL 表是一种特殊的单行表，默认情况下出现在所有 Oracle 数据库安装中。适用于选择 SYSDATE 或 USER 等伪列

该表有一个名为 DUMMY 的 VARCHAR2(1) 列，其值为“X”

您可以在[http://en.wikipedia.org/wiki/DUAL_table中阅读所有相关信息](http://en.wikipedia.org/wiki/DUAL_table)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-16T15:57:44.510

DUAL 在 PL/SQL 开发中是必要的，以使用仅在 SQL 中可用的功能

例如

```
DECLARE
x XMLTYPE;
BEGIN
SELECT xmlelement("hhh", 'stuff')
INTO x
FROM dual;
END; 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-01-31T10:30:15.150

更多关于 DUAL 的事实......

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:1562813956388](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:1562813956388)

在这里完成了激动人心的实验，以及汤姆更激动人心的解释

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-07-31T07:33:04.837

DUAL 我们主要用于从序列中获取下一个数字。

语法：SELECT 'sequence_name'.NEXTVAL FROM DUAL

这将返回一行一列的值（NEXTVAL 列名）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-17T15:53:00.533

另一种需要的情况 `select ... from dual` 是，当我们想要使用内置`DBMS_METADATA.GET_DDL`函数检索不同数据库对象（如 TABLE、FUNCTION、TRIGGER、PACKAGE）的代码（数据定义）时：

```
select DBMS_METADATA.GET_DDL('TABLE','<table_name>') from DUAL;

select DBMS_METADATA.GET_DDL('FUNCTION','<function_name>') from DUAL; 
```

确实，如今的 IDE 确实提供了查看表的 DDL 的功能，但在 SQL Plus 等更简单的环境中，这确实很方便。

**编辑**

更一般的情况：基本上，当我们需要在标准 SQL 语句中使用任何 PL/SQL 过程时，或者当我们想从命令行调用过程时：

```
select my_function(<input_params>) from dual; 
```

这两个秘籍均取自 Josh Juneau 和 Matt Arena 所著的“Oracle PL/SQL Recipes”一书

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-05-13T07:38:55.557

DUAL 是特殊的一行一列表，默认情况下出现在所有 Oracle 数据库中。DUAL 的所有者是 SYS。

DUAL 是由 Oracle 数据库与数据函数一起自动创建的表。它总是用于获取操作系统函数（如日期、时间、算术表达式等）

```
SELECT SYSDATE from dual; 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2008-09-16T15:47:54.347

这是一个放入 from 的对象，返回 1 个空行。例如：从对偶中选择1；返回 1

从对偶中选择 21+44；返回 65

从对偶中选择 [sequence].nextval；返回序列中的下一个值。

# c# - C# P/Invoke 与变体

> ID：73775
> 
> 赞同：1
> 
> 时间：2008-09-16T15:45:30.903
> 
> 标签：c#, pinvoke

任何人都知道我的 DLLImport 语句在这里应该是什么样子：

```
extern "C" __declspec(dllexport) long SomeFunction(VARIANT *argNames, VARIANT *argValues, VARIANT *pVal)
{
...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-16T15:47:20.947

变体是一个对象。

> **类型转换**

> 在封送处理期间，最重要的步骤之一是将非托管类型转换为托管类型，反之亦然。CLR 封送处理服务知道如何为您执行许多此类转换，但您仍然必须知道在转换时各种类型如何相互匹配托管函数的非托管签名。您可以使用此转换表来匹配各种类型。

> **表格1**

```
+-------------------------+------------------+  
| Windows 数据类型 | .NET 数据类型 |  
+-------------------------+------------------+  
| 变体 | 对象 |  
+-------------------------+------------------+  

```

从此处下载的文档（第 9,249 页）：http: [//msdn.microsoft.com/en-us/library/aa719104 (VS.71).aspx](http://msdn.microsoft.com/en-us/library/aa719104(VS.71).aspx)

# python - 从 python 通过 sendmail 发送邮件

> ID：73781
> 
> 赞同：81
> 
> 时间：2008-09-16T15:46:43.100
> 
> 标签：python, email, sendmail

如果我想不通过 SMTP 而是通过 sendmail 发送邮件，是否有一个封装此过程的 python 库？

更好的是，是否有一个好的库可以抽象出整个“sendmail - 与 smtp”的选择？

我将在一堆 unix 主机上运行这个脚本，其中只有一些在 localhost:25 上监听；其中一些是嵌入式系统的一部分，无法设置为接受 SMTP。

作为良好实践的一部分，我真的很想让库自己处理标头注入漏洞——所以只是将字符串转储到`popen('/usr/bin/sendmail', 'w')`比我想要的更接近于金属。

如果答案是“去写一个库”，那就这样吧;-)

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2008-09-16T16:12:37.547

标头注入不是您如何发送邮件的一个因素，而是您如何构建邮件的一个因素。检查[电子邮件](https://docs.python.org/2/library/email.html)包，用它构造邮件，将其序列化，然后`/usr/sbin/sendmail`使用[subprocess](https://docs.python.org/2/library/subprocess.html)模块将其发送到：

```
import sys
from email.mime.text import MIMEText
from subprocess import Popen, PIPE

msg = MIMEText("Here is the body of my message")
msg["From"] = "me@example.com"
msg["To"] = "you@example.com"
msg["Subject"] = "This is the subject."
p = Popen(["/usr/sbin/sendmail", "-t", "-oi"], stdin=PIPE)
# Both Python 2.X and 3.X
p.communicate(msg.as_bytes() if sys.version_info >= (3,0) else msg.as_string()) 

# Python 2.X
p.communicate(msg.as_string())

# Python 3.X
p.communicate(msg.as_bytes()) 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2008-09-16T15:51:40.937

这是一个简单的 python 函数，它使用 unix sendmail 来传递邮件。

```
def sendMail():
    sendmail_location = "/usr/sbin/sendmail" # sendmail location
    p = os.popen("%s -t" % sendmail_location, "w")
    p.write("From: %s\n" % "from@somewhere.com")
    p.write("To: %s\n" % "to@somewhereelse.com")
    p.write("Subject: thesubject\n")
    p.write("\n") # blank line separating headers from body
    p.write("body of the mail")
    status = p.close()
    if status != 0:
           print "Sendmail exit status", status 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-09-19T21:38:31.163

Jim 的回答在 Python 3.4 中对我不起作用。我不得不添加一个额外的`universal_newlines=True`论点`subrocess.Popen()`

```
from email.mime.text import MIMEText
from subprocess import Popen, PIPE

msg = MIMEText("Here is the body of my message")
msg["From"] = "me@example.com"
msg["To"] = "you@example.com"
msg["Subject"] = "This is the subject."
p = Popen(["/usr/sbin/sendmail", "-t", "-oi"], stdin=PIPE, universal_newlines=True)
p.communicate(msg.as_string()) 
```

没有`universal_newlines=True`我得到

```
TypeError: 'str' does not support the buffer interface 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-05-20T21:51:22.257

**Python 3.5+**版本：

```
import subprocess
from email.message import EmailMessage

def sendEmail(from_addr, to_addrs, msg_subject, msg_body):
    msg = EmailMessage()
    msg.set_content(msg_body)
    msg['From'] = from_addr
    msg['To'] = to_addrs
    msg['Subject'] = msg_subject

    sendmail_location = "/usr/sbin/sendmail"
    subprocess.run([sendmail_location, "-t", "-oi"], input=msg.as_bytes()) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-04-04T23:24:04.023

这个问题已经很老了，但值得注意的是，有一个名为[Marrow Mailer](https://github.com/marrow/mailer)（以前称为 TurboMail）的消息构建和电子邮件传递系统，它在询问此消息之前就已经可用。

它现在被移植以支持 Python 3，并作为[Marrow](https://github.com/marrow)套件的一部分进行了更新。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-16T15:49:06.027

使用 os.popen 从 Python 中使用 sendmail 命令是很常见的

就个人而言，对于我自己没有编写的脚本，我认为只使用 SMTP 协议会更好，因为它不需要安装 sendmail 克隆就可以在 Windows 上运行。

[https://docs.python.org/library/smtplib.html](https://docs.python.org/library/smtplib.html)

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-06-27T13:49:32.217

我只是在寻找同样的东西，并在 Python 网站上找到了一个很好的例子：http: [//docs.python.org/2/library/email-examples.html](http://docs.python.org/2/library/email-examples.html)

从提到的网站：

```
# Import smtplib for the actual sending function
import smtplib

# Import the email modules we'll need
from email.mime.text import MIMEText

# Open a plain text file for reading.  For this example, assume that
# the text file contains only ASCII characters.
fp = open(textfile, 'rb')
# Create a text/plain message
msg = MIMEText(fp.read())
fp.close()

# me == the sender's email address
# you == the recipient's email address
msg['Subject'] = 'The contents of %s' % textfile
msg['From'] = me
msg['To'] = you

# Send the message via our own SMTP server, but don't include the
# envelope header.
s = smtplib.SMTP('localhost')
s.sendmail(me, [you], msg.as_string())
s.quit() 
```

请注意，这要求您正确设置 sendmail/mailx 以接受“localhost”上的连接。默认情况下，这适用于我的 Mac、Ubuntu 和 Redhat 服务器，但您可能需要仔细检查是否遇到任何问题。

* * *

## 回答 #8

> 赞同：-7
> 
> 时间：2008-09-16T15:49:21.953

最简单的答案是 smtplib，您可以在[此处](http://docs.python.org/lib/SMTP-example.html)找到有关它的文档。

您需要做的就是将本地 sendmail 配置为接受来自 localhost 的连接，默认情况下它可能已经这样做了。当然，您仍然使用 SMTP 进行传输，但它是本地发送邮件，这与使用命令行工具基本相同。

# vba - 遍历 Excel VBA 或 VSTO 2005 中的所有单元格

> ID：73785
> 
> 赞同：24
> 
> 时间：2008-09-16T15:47:16.843
> 
> 标签：vba, excel, vsto

我需要简单地浏览 Excel 电子表格中的所有单元格并检查单元格中的值。单元格可能包含文本、数字或空白。我不太熟悉/不习惯使用“范围”的概念。因此，任何示例代码将不胜感激。（我确实尝试用谷歌搜索它，但我发现的代码片段并没有完全满足我的需要）

谢谢你。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2008-09-16T15:58:33.477

如果您只需要查看正在使用的单元格，您可以使用：

```
sub IterateCells()

   For Each Cell in ActiveSheet.UsedRange.Cells
      'do some stuff
   Next

End Sub 
```

这将命中从 A1 到最后一个带有数据的单元格（最右下角的单元格）范围内的所有内容

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T15:57:50.950

```
Sub CheckValues1()
    Dim rwIndex As Integer
    Dim colIndex As Integer
    For rwIndex = 1 To 10
            For colIndex = 1 To 5
                If Cells(rwIndex, colIndex).Value <> 0 Then _
                    Cells(rwIndex, colIndex).Value = 0
            Next colIndex
    Next rwIndex
End Sub 
```

[在http://www.java2s.com/Code/VBA-Excel-Access-Word/Excel/Checksvaluesinarange10rowsby5columns.htm](http://www.java2s.com/Code/VBA-Excel-Access-Word/Excel/Checksvaluesinarange10rowsby5columns.htm)上找到了这个片段它似乎是一个非常有用的函数来说明检查单元格中值的方法时尚。

想象一下它是一个二维数组，并应用相同的逻辑循环遍历单元格。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-17T20:55:47.497

如果您只是查看单元格的值，则可以将这些值存储在变体类型的数组中。似乎获取数组中元素的值比与 Excel 交互要快得多，因此您可以看到使用包含所有单元格值的数组与重复获取单个单元格相比在性能方面存在一些差异。

```
Dim ValArray as Variant
ValArray = Range("A1:IV" & Rows.Count).Value 
```

然后你可以通过检查 ValArray( row , column ) 来获得一个单元格值

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-16T15:58:17.627

您可以使用 For Each 遍历定义范围内的所有单元格。

```
Public Sub IterateThroughRange()

Dim wb As Workbook
Dim ws As Worksheet
Dim rng As Range
Dim cell As Range

Set wb = Application.Workbooks(1)
Set ws = wb.Sheets(1)
Set rng = ws.Range("A1", "C3")

For Each cell In rng.Cells
    cell.Value = cell.Address
Next cell

End Sub 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T16:24:12.260

对于 VB 或 C# 应用程序，执行此操作的一种方法是使用 Office 互操作。这取决于您使用的 Excel 版本。

对于 Excel 2003，这篇 MSDN 文章是一个很好的起点。 [从 Visual Studio 2005 开发人员的角度理解 Excel 对象模型](http://msdn.microsoft.com/en-us/library/aa537184(office.11).aspx)

您基本上需要执行以下操作：

*   启动 Excel 应用程序。
*   打开 Excel 工作簿。
*   按名称或索引从工作簿中检索工作表。
*   遍历工作表中作为范围检索的所有单元格。
*   最后一步的示例（未经测试）代码摘录如下。

```
 Excel.Range allCellsRng;
    string lowerRightCell = "IV65536";
    allCellsRng = ws.get_Range("A1", lowerRightCell).Cells;
    foreach (Range cell in allCellsRng)
    {
        if (null == cell.Value2 || isBlank(cell.Value2))
        {
          // Do something.
        }
        else if (isText(cell.Value2))
        {
          // Do something.
        }
        else if (isNumeric(cell.Value2))
        {
          // Do something.
        }
    } 
```

对于 Excel 2007，请尝试[此 MSDN 参考](http://msdn.microsoft.com/en-us/library/bb979621.aspx)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T16:01:26.997

有几种方法可以做到这一点，每种方法都有优点和缺点；首先，您需要有一个 Worksheet 对象的实例，如果您只想要用户正在查看的对象，Application.ActiveSheet 就可以工作。

Worksheet 对象具有三个可用于访问单元格数据的属性（Cells、Rows、Columns）和一个可用于获取单元格数据块的方法 (get_Range)。

范围可以调整大小等，但您可能需要使用上面提到的属性来找出数据的边界在哪里。当您处理大量数据时，Range 的优势变得显而易见，因为 VSTO 加载项托管在 Excel 应用程序本身的边界之外，因此对 Excel 的所有调用都必须通过一个有开销的层；获取 Range 允许您在一次调用中获取/设置所需的所有数据，这可以带来巨大的性能优势，但它要求您使用明确的详细信息，而不是遍历每个条目。

[此 MSDN 论坛帖子](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=767501&SiteID=1)显示 VB.Net 开发人员询问有关将 Range 的结果作为数组获取的问题

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-16T16:06:30.760

你基本上可以循环一个范围

获取一张表

```
myWs = (Worksheet)MyWb.Worksheets[1]; 
```

获取您感兴趣的范围如果您真的想检查每个单元格，请使用 Excel 的限制

> Excel 2007“大网格”将每个工作表的最大行数从 65,536 增加到超过 100 万，列数从 256 (IV) 增加到 16,384 (XFD)。从这里[http://msdn.microsoft.com/en-us/library/aa730921.aspx#Office2007excelPerf_BigGridIncreasedLimitsExcel](http://msdn.microsoft.com/en-us/library/aa730921.aspx#Office2007excelPerf_BigGridIncreasedLimitsExcel)

然后在范围内循环

```
 Range myBigRange = myWs.get_Range("A1", "A256");

        string myValue;

        foreach(Range myCell in myBigRange )
        {
            myValue = myCell.Value2.ToString();
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-16T15:57:06.587

在 Excel VBA 中，此函数将为您提供任何工作表中任何单元格的内容。

```
Function getCellContent(Byref ws As Worksheet, ByVal rowindex As Integer, ByVal colindex As Integer) as String
    getCellContent = CStr(ws.Cells(rowindex, colindex))
End Function 
```

因此，如果您想检查单元格的值，只需将函数放入循环中，为其提供对所需工作表的引用以及单元格的行索引和列索引。行索引和列索引都从 1 开始，这意味着单元格 A1 将是 ws.Cells(1,1) 等等。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T16:06:57.543

我的 VBA 技能有点生疏，但这是我要做什么的总体思路。
最简单的方法是遍历每一列的循环：

```
public sub CellProcessing()
on error goto errHandler

    dim MAX_ROW as Integer   'how many rows in the spreadsheet
    dim i as Integer
    dim cols as String

    for i = 1 to MAX_ROW
        'perform checks on the cell here
        'access the cell with Range("A" & i) to get cell A1 where i = 1
    next i

exitHandler:
    exit sub
errHandler:
    msgbox "Error " & err.Number & ": " & err.Description
    resume exitHandler
end sub 
```

似乎颜色语法突出显示不喜欢 vba，但希望这会有所帮助（至少给你一个工作的起点）。

*   胸肉手

# svn - 如何告诉 Subversion 将文件视为二进制文件？

> ID：73797
> 
> 赞同：67
> 
> 时间：2008-09-16T15:48:12.770
> 
> 标签：svn

如何告诉 Subversion (svn) 将文件视为二进制文件？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2008-09-16T16:07:42.427

可以使用以下方法手动将存储库中的文件识别为*二进制文件*：

```
svn propset svn:mime-type application/octet-stream <filename> 
```

这通常不是必需的，因为 Subversion 会在首次添加文件时尝试确定文件是否为二进制文件。如果 Subversion 在应该将其视为二进制时错误地将某个类型标记为“文本”，则可以配置 Subversion 的[auto-props 功能](http://svnbook.red-bean.com/nightly/en/svn.advanced.props.html#svn.advanced.props.auto)以使用非文本 MIME 类型自动标记该文件。无论文件上配置的属性如何，Subversion 仍将文件以二进制格式存储在存储库中。

如果 Subversion 将 MIME 类型识别为“文本”类型，它会启用二进制文件中不可用的某些功能，例如*svn diff*和*svn blame*。它还允许自动行结束转换，可在逐个客户端的基础上进行配置。

有关更多信息，请参阅[Subversion 如何处理二进制文件？](http://subversion.apache.org/faq.html#binary-files)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-09-16T15:53:01.603

来自[Subversion 书的第 367 页](http://svnbook.red-bean.com/en/1.5/svn-book.pdf)

> 在最一般的意义上，Subversion 比 CVS 更优雅地处理二进制文件。因为 CVS 使用 RCS，它只能存储不断变化的二进制文件的连续完整副本。然而，Subversion 使用二进制差分算法表示文件之间的差异，无论它们包含文本数据还是二进制数据。这意味着所有文件都以差异方式（压缩）存储在存储库中。
> 
> CVS 用户必须用 -kb 标志标记二进制文件，以防止数据出现乱码（由于关键字扩展和行尾翻译）。他们有时会忘记这样做。
> 
> Subversion 走的是更加偏执的路线。首先，它从不执行任何类型的关键字或行尾翻译，除非您明确要求它这样做（有关详细信息，请参阅“关键字替换”部分和“行尾字符序列”部分）。默认情况下，Subversion 将所有文件数据视为文字字节字符串，并且文件始终以未翻译状态存储在存储库中。
> 
> 其次，Subversion 维护一个文件是“文本”还是“二进制”数据的内部概念，但这个概念只存在于工作副本中。在 svn 更新期间，Subversion 将对本地修改的文本文件执行上下文合并，但不会尝试对二进制文件这样做。
> 
> 为了确定上下文合并是否可行，Subversion 检查 svn:mime-type 属性。如果文件没有 svn:mime-type 属性，或者具有文本的 MIME 类型（例如 text/*），Subversion 假定它是文本。否则，Subversion 假定文件是二进制文件。Subversion 还通过在 svn import 和 svn add 命令中运行二进制检测算法来帮助用户。这些命令会做出很好的猜测，然后（可能）在要添加的文件上设置二进制 svn:mime-type 属性。（如果 Subversion 猜错了，用户可以随时删除或手动编辑该属性。）

手工编辑将由

```
svn propset svn:mime-type some/type filename.extension 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-09-16T15:51:03.183

基本上，您必须将 mime 类型设置为八位字节流：

```
svn propset svn:mime-type application/octet-stream <filename> 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-06-13T17:57:20.093

如果 'svn add' 猜到了不正确的类型并给你一个类似下面的错误：

```
svn: E200009: File 'qt/examples/dialogs/configdialog/images/config.png' has inconsistent newlines
svn: E135000: Inconsistent line ending style 
```

那么解决方法是添加没有属性的文件，然后在第二步中设置属性：

```
svn add --no-auto-props qt/examples/dialogs/configdialog/images/config.png
svn propset svn:mime-type image/png qt/examples/dialogs/configdialog/images/config.png 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-09-16T15:50:02.030

例如：

```
svn propset svn:mime-type image/png foo.png 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-16T15:59:35.847

尽管 Subversion 尝试[自动检测](http://subversion.apache.org/faq.html#binary-files)文件是否为二进制文件，但您可以使用[svn propset](http://svnbook.red-bean.com/en/1.0/re23.html)覆盖 mime 类型。例如，`svn propset svn:mime-type application/octet-stream example.txt`。这将使您的文件充当字节集合而不是文本文件。另请参阅有关[文件可移植性](http://svnbook.red-bean.com/nightly/en/svn.advanced.props.file-portability.html#svn.advanced.props.special.mime-type)的 svn 手册。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-16T15:53:07.030

如果在 Windows 中使用 tortoise svn，请右键单击该文件并转到属性。单击新建并添加类型为 svn:mime-type 的新属性。对于价值投入：application/octet-stream

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-16T15:50:48.317

根据[Subversion FAQ](http://subversion.apache.org/faq.html#binary-files)，您可以使用 svn propset 将**svn:mime-type**属性更改为**application/octet-stream**

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-16T15:50:55.553

svn 寻找一个 mime 类型的属性，如果它不存在则猜测它是文本。您可以明确设置此属性，请参阅[http://svnbook.red-bean.com/en/1.5/svn.forcvs.binary-and-trans.html](http://svnbook.red-bean.com/en/1.5/svn.forcvs.binary-and-trans.html)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T15:52:31.307

它通常默认为您执行此操作，但如果不是，您需要查看文件属性和 propset。

# .net - .NET 远程处理异常

> ID：73825
> 
> 赞同：5
> 
> 时间：2008-09-16T15:50:19.363
> 
> 标签：.net, remoting

这与抛出 .NET 远程处理异常有关。如果您查看 MSDN，它会提到当远程处理出现问题时会引发远程处理异常。如果我的服务器没有运行，我会得到一个套接字异常，这很好。

我想弄清楚的是：获得远程处理异常是否表明我的服务器已启动并正在运行？如果是，那将解决问题。如果不是：有没有办法确定远程异常是来自客户端还是服务器端？

### 更新：

我要解决的问题是服务器最初已关闭，然后客户端向服务器发送了一些消息。现在我得到一个套接字异常，说“无法建立连接......”这很好。

有一个线程定期向服务器发送消息以查看服务器是否可用。现在，服务器启动了，此时，您可以获得很好的响应，或者您可能会遇到一些异常，并且很可能是远程异常。所以，我想问的是：如果我没有收到消息并且我收到远程异常，是否有可能服务器已启动并运行并且我仍然收到此异常？

我所做的只是在远程对象上调用一个什么都不做并返回的方法。如果没有例外，那我很好。现在，如果存在远程处理异常并且我知道服务器上发生了远程处理异常，那么我知道尽管收到了异常，但我已连接到服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T16:57:55.330

如果您打算使用自定义异常类型在远程​​边界中抛出，请务必将这些类型标记为“[Serializable]”。我不记得确切的错误信息，但是当我第一次看到它时，它让我困惑了一天的大部分时间。

另外，提示一下，TargetInvocationException 通常在其 InnerException 属性中嵌入了 REAL 异常。没有什么比“调用的目标抛出异常”更无用的了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T16:17:40.950

获取远程处理异常并不能保证您的服务器已启动并正在运行。如果在该端口上发生了其他事情正在运行并正在侦听，则连接将成功，并且您不会收到套接字异常。在这种情况下会发生什么取决于实际获得连接的应用程序的行为方式，但它可能最终会在您的客户端中生成远程处理异常。

验证这一点需要更多调查，但我相信远程处理异常表明客户端和服务器之间的通信存在问题，因此没有“客户端”或“服务器端”生成它。这意味着两人谈话不愉快，可能是由任何一方造成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T16:00:45.093

尝试确保您发送正确的消息并且服务器接收到的消息也是正确的，例如使用断言（它被称为契约式设计）。如果您有这种可能，请尝试同时调试服务器端和客户端。（同时运行两个 VS 实例）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-16T16:13:30.213

我无法访问我上一个远程处理应用程序的源代码，但据我所知，我们无法找到一种方法来确定服务器是否因我们遇到的任何异常而启动。
我们确实检查了网络是否存在，如果不存在则警告用户（我认为是 Environment 类的一种方法）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T16:44:08.827

如果服务器端应用程序逻辑抛出异常，它应该能够编组到客户端，让它知道发生了什么。您可以通过故意在远程对象的方法之一中抛出异常来测试这一点。然后从客户端调用该特定方法，期待异常：

```
HttpChannel channel = new HttpChannel();
ChannelServices.RegisterChannel(channel);

IMyRemoteObject obj = (IMyRemoteObject) Activator.GetObject(
    typeof(IMyRemoteObject),
    "http://localhost:1234/MyRemoteObject.soap");
Console.WriteLine("Client.Main(): Reference to rem.obj. acquired");
    int tmp = obj.GetValue();
    Console.WriteLine("Client.Main(): Original server side value: {0}",tmp);
Console.WriteLine("Client.Main(): Will set value to 42");

try
{
    // This method will throw an ApplicationException in the server-side code.
    obj.SetValue(42);
}
catch (Exception ex)
{
    Console.WriteLine("=====");
    Console.WriteLine("Exception type: " + ex.GetType().ToString());
    Console.WriteLine("Message: " + ex.Message);
    Console.WriteLine("Source: " + ex.Source);
    Console.WriteLine("Stack trace: " + ex.StackTrace);
    Console.WriteLine("=====");
} 
```

您可以期望收到这样的异常

```
=====
Exception type: System.ApplicationException
Message: testing
Source: Server
Stack trace:
Server stack trace:
   at Server.MyRemoteObject.SetValue(Int32 newval) in i:\projects\remoting.net\ch03\01_singlecallobjects\server\server.cs:line 27
   at System.Runtime.Remoting.Messaging.StackBuilderSink.PrivateProcessMessage(MethodBase mb, Object[] args, Object server, Int32 methodPtr, Boolean fExecuteInContext, Object[]& outArgs)
   at System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg, Int32 methodPtr, Boolean fExecuteInContext)

Exception rethrown at [0]:
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at General.IMyRemoteObject.SetValue(Int32 newval)
   at Client.Client.Main(String[] args) in i:\projects\remoting.net\ch03\01_singlecallobjects\client\client.cs:line 29
===== 
```

它应该告诉您源在服务器上，并带有服务器端堆栈跟踪。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T17:09:08.753

好的，既然您已经这样说了，我假设您使用 TCP 进行远程处理，因为如果它是通过 HTTP，当连接到（TCP 网络端口）服务器失败时会抛出 WebException。当服务器没有启动应用程序来注册该指定 TCP 端口上的通道时，您将得到一个 SocketException。毕竟，服务器没有监听/响应那个端口，客户端怎么能建立一个套接字连接呢？

但是，如果您收到 RemotingException，则*不一定*意味着服务器的正确 Remoting 应用程序运行良好。您可以通过连接到错误端口上的错误 URI 来进行测试，例如端口 80 (IIS)。

```
IMyRemoteObject obj = (IMyRemoteObject) Activator.GetObject(
    typeof(IMyRemoteObject),
    "tcp://localhost:80/MyRemoteObject.rem"); 
```

这将导致 RemotingException，因为虽然客户端可以与端口 80 建立 TCP 连接，但它是 IIS 响应调用而不是 Remoting 应用程序；IIS 无法直接处理远程调用。话虽如此，RemotingException 也可能意味着客户端出现问题。这篇博客文章可以帮助您更好地理解。

[http://www.cookcomputing.com/blog/archives/000308.html](http://www.cookcomputing.com/blog/archives/000308.html)

# linux - 如何在 Linux 上使用 grep 搜索包含 DOS 行尾 (CRLF) 的文件？

> ID：73833
> 
> 赞同：147
> 
> 时间：2008-09-16T15:50:58.910
> 
> 标签：linux, bash, grep, newline

我想在 Linux 上使用 grep 搜索包含 DOS 行结尾的文件。像这样的东西：

```
grep -IUr --color '\r\n' . 
```

以上似乎与`rn`不想要的文字相匹配。

它的输出将通过 xargs 管道传输到 todos 以将 crlf 转换为 lf 像这样

```
grep -IUrl --color '^M' . | xargs -ifile fromdos 'file' 
```

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2008-09-16T16:03:28.833

grep 可能不是您想要的工具。它将为每个文件中的每个匹配行打印一行。除非你想在一个 10 行的文件上运行 10 次 todos，否则 grep 并不是最好的方法。使用 find 在树中的每个文件上运行文件，然后对“CRLF”进行 grepping，将为每个具有 dos 样式行结尾的文件提供一行输出：

```
find . -not -type d -exec file "{}" ";" | grep CRLF
```

会给你类似的东西：

```
./1/dos1.txt: ASCII text, with CRLF line terminators
./2/dos2.txt: ASCII text, with CRLF line terminators
./dos.txt: ASCII text, with CRLF line terminators
```

* * *

## 回答 #2

> 赞同：133
> 
> 时间：2008-09-16T15:56:03.670

使用`Ctrl`+ `V`, `Ctrl`+`M`将文字回车字符输入到您的 grep 字符串中。所以：

```
grep -IUr --color "^M" 
```

将起作用 - 如果`^M`您按照我的建议输入了文字 CR。

如果你想要文件列表，你也想添加`-l`选项。

**解释**

*   `-I`忽略二进制文件
*   `-U`防止 grep 剥离 CR 字符。默认情况下，如果它决定它是一个文本文件，它就会这样做。
*   `-r`递归读取每个目录下的所有文件。

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2012-11-30T10:20:28.207

使用 RipGrep（取决于你的 shell，你可能需要引用最后一个参数）：

```
rg -l \r 
```

```
-l, --files-with-matches
Only print the paths with at least one match. 
```

[https://github.com/BurntSushi/ripgrep](https://github.com/BurntSushi/ripgrep)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2008-09-16T17:20:10.567

如果您的 grep 版本支持**-P (--perl-regexp)**选项，那么

```
grep -lUP '\r$' 
```

可用于。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2010-07-06T07:53:28.453

```
# list files containing dos line endings (CRLF)

cr="$(printf "\r")"    # alternative to ctrl-V ctrl-M

grep -Ilsr "${cr}$" . 

grep -Ilsr $'\r$' .   # yet another & even shorter alternative 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-11-07T18:47:14.790

您可以在 unix 中使用文件命令。它为您提供文件的字符编码以及行终止符。

```
$ file myfile
myfile: ISO-8859 text, with CRLF line terminators
$ file myfile | grep -ow CRLF
CRLF 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-05-06T08:55:28.357

`dos2unix`有一个文件信息选项，可用于显示要转换的文件：

```
dos2unix -ic /path/to/file 
```

要递归地执行此操作，您可以使用`bash`'`globstar`选项，该选项对于当前 shell 启用`shopt -s globstar`：

```
dos2unix -ic **      # all files recursively
dos2unix -ic **/file # files called “file” recursively 
```

或者，您可以使用`find`：

```
find -type f -exec dos2unix -ic {} +            # all files recursively (ignoring directories)
find -name file -exec dos2unix -ic {} + # files called “file” recursively 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-09-22T20:57:31.213

查询是搜索...我有一个类似的问题...有人将混合行尾提交到版本控制中，所以现在我们有一堆带有`0x0d` `0x0d` `0x0a`行尾的文件。注意

```
grep -P '\x0d\x0a' 
```

找到所有行，而

```
grep -P '\x0d\x0d\x0a' 
```

和

```
grep -P '\x0d\x0d' 
```

找不到任何行，所以当涉及到行结束模式时，grep 内部可能会发生“其他”事情......不幸的是我！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-10-10T16:26:52.320

如果像我一样，你的极简主义 unix 不包括像**file**命令这样的细节，并且你的**grep**表达式中的反斜杠不配合，试试这个：

```
$ for file in `find . -type f` ; do
> dump $file | cut -c9-50 | egrep -m1 -q ' 0d| 0d'
> if [ $? -eq 0 ] ; then echo $file ; fi
> done 
```

您可能想要对上述内容进行的修改包括：

*   调整**find**命令以仅查找要扫描的文件
*   将**转储**命令更改为**od**或您拥有的任何文件转储实用程序
*   确认**cut**命令包含前导空格和尾随空格以及**转储**实用程序输出的十六进制字符
*   将**转储**输出限制为前 1000 个字符左右以提高效率

例如，使用**od**而不是**dump**可能对您有用：

```
 od -t x2 -N 1000 $file | cut -c8- | egrep -m1 -q ' 0d| 0d|0d$' 
```

# c# - 将 C++/CLI 转换为 C#

> ID：73879
> 
> 赞同：5
> 
> 时间：2008-09-16T15:55:16.107
> 
> 标签：c#, .net, c++-cli

我有一个使用 C++/CLI 的中小型项目。我真的很讨厌 C++/CLI 的语法扩展，我更喜欢在 C# 中工作。有没有一种工具可以很好地将一个翻译成另一个？

**编辑：**当我说托管 c++ 之前我显然是指 c++/CLI

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-16T16:41:48.710

如果 C++ 代码是纯托管的，则只能将托管 C++ 代码（和 C++/CLI 代码）转换为 C#。如果不是 - 即如果源代码中包含本机代码 - .NET Reflector 等工具将无法为您翻译代码。

如果您确实混合了本机 C++ 代码，那么我建议您尝试将本机代码移动到单独的 DLL 中，用易于识别的存根函数替换对 DLL 函数的调用，将您的项目编译为纯 .NET 库，然后使用.NET 反射器反编译成 C# 代码。然后，您可以通过对本机 DLL 的 p-invoke 调用来替换对存根函数的调用。

祝你好运！我对你有感觉！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T15:57:17.223

.NET 托管 C++ 就像火车残骸一样。但是您是否研究过 C++ CLI？我认为微软在这个领域做得很好，使 C++ 成为一流的 .NET 公民。

[http://msdn.microsoft.com/en-us/magazine/cc163852.aspx](http://msdn.microsoft.com/en-us/magazine/cc163852.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T16:34:30.880

我不确定这是否可行，但请尝试使用[.Net Reflector](http://www.red-gate.com/products/reflector/)和[ReflectionEmitLanguage](http://www.codeplex.com/reflectoraddins/Wiki/View.aspx?title=ReflectionEmitLanguage&referringTitle=Home)插件。RelelectionEmitLanguage 插件声称将您的程序集转换为 c# 代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T16:12:17.237

早在 2004 年左右，微软确实有一个工具可以将托管 C++ 转换为 C++/CLI ......有点。我们在几个项目上运行它，但老实说，清理项目剩下的工作量不亚于一开始手动进行转换的工作量。我不认为该工具曾经公开发布过（也许是因为这个原因）。

我不知道您使用的是哪个版本的 Visual Studio，但我们使用 /clr:oldSyntax 开关管理了无法与 Visual Studio 2005/2008 一起编译的 C++ 代码，并且我们仍然有一个 VS 2003 的遗物。

我不知道以一种有用的方式从 C++ 到 C# 的任何方式......你可以尝试通过反射器来回往返:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T17:39:27.993

此类项目通常在 c++/cli 中完成，因为 C# 并不是该任务的真正优雅选择。例如，如果您必须与一些本地 C++ 库交互，或者在低级 C 中执行非常高性能的工作。因此，请确保选择 c++/cli 的人在进行切换之前没有充分的理由这样做。

Having said that, I'm highly skeptical there's something that does what you ask, for the simple reason that not all C++/cli code is translatable to C# (and probably vice versa too).

# java - OSGi 测试

> ID：73881
> 
> 赞同：16
> 
> 时间：2008-09-16T15:55:26.870
> 
> 标签：java, testing, osgi

目前，我正在开发一个新的版本控制系统，作为大学最后一年项目的一部分。我们的想法是使其具有高度的适应性和可插拔性。

我们使用 OSGi 框架（Equinox 实现）来管理我们的插件。我的问题是我找不到一个简单易用的方法来测试 OSGi 包。

目前，我必须使用 Maven 构建包，然后执行测试工具。我正在寻找类似 Eclipse 的 JUnit 测试运行器之类的东西，因为它可以为我节省大量时间。

有没有一种快速简便的方法来测试 OSGi 包？

编辑：我不需要测试 Eclipse 插件或 GUI 组件，只需要 OSGi 包。

EDIT2：是否有一些支持 JUnit4 的框架？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2011-09-17T17:37:06.513

最近，您应该看看 Pax 考试： [http ://team.ops4j.org/wiki/display/paxexam/Pax+Exam](http://team.ops4j.org/wiki/display/paxexam/Pax+Exam)

这是 OPS4J 当前与测试相关的工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2011-11-14T21:55:20.687

以下是一些尚未提及的工具：

*   我正在使用[Tycho](http://www.eclipse.org/tycho/)，这是一个使用 Maven 构建 Eclipse 插件的工具。如果您在他们自己的插件或插件片段中创建测试，Tycho 可以在其自己的 OSGi 实例中运行每组测试，以及所有所需的依赖项。 [介绍](http://wiki.eclipse.org/Tycho/Packaging_Types#eclipse-test-plugin)和[更多信息](http://wiki.eclipse.org/Tycho/Reference_Card#Test_bundles)。这对我来说效果很好。

*   [jUnit4OSGI](http://felix.apache.org/site/apache-felix-ipojo-junit4osgi-tutorial.html)看起来很简单。您创建 OSGiTestCase 的子类，并获得诸如`getServiceReference()`等方法。

*   [Pluginbuilder](http://www.pluginbuilder.org/)是一个用于 OSGi 包/Eclipse 插件的无头构建系统，有一个名为**Autotestsuite**[的测试运行框架](http://www.pluginbuilder.org/documentation/run-tests/)。它在构建步骤之后在 OSGi 环境的上下文中运行测试。但是，它似乎并没有被维护好几年。我认为许多 Eclipse 项目正在从 Pluginbuilder 迁移到 Tycho。

***   ***另一种选择是在*****您的单元测试中启动****一个 OSGi 容器***的实例，您可以直接运行它，如此[处](http://www.talios.com/osgi_based_integration_testing_with_testng_and_apache_felix.htm)所述。*

    **   有人写**了一个[小包测试收集器](http://rcpquickstart.com/2008/06/12/running-unit-tests-for-rcp-and-osgi-applications/)**，它搜索 JUnit (3) 测试并运行它们。*** 

 **** * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-16T16:15:11.253

[Spring Dynamic Modules 对测试 OSGi 包](http://static.springframework.org/osgi/docs/current/reference/html/testing.html)有很好的支持。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-30T09:33:04.077

**OPS4J (ops4j.org) 上有一个名为Pax Drone**的专用开源 OSGi 测试框架。

您可能想看看 Pax Drone ([ [http://wiki.ops4j.org/confluence/x/KABo]](http://wiki.ops4j.org/confluence/x/KABo]) )，它使您能够在测试中使用所有 Felix 版本以及 Equinox 和 Knopflerfish。

干杯，托尼

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-21T20:44:59.650

Eclipse 有一个启动配置类型，用于在 Eclipse（即 OSGi）应用程序的上下文中运行 JUnit 测试：

[http://help.eclipse.org/stable/index.jsp?topic=/org.eclipse.pde.doc.user/guide/tools/launchers/junit_launcher.htm](http://help.eclipse.org/stable/index.jsp?topic=/org.eclipse.pde.doc.user/guide/tools/launchers/junit_launcher.htm)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T04:43:47.423

如果您需要测试 GUI 组件，我发现[SWTBot](http://swtbot.org/)可以完成工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-03T22:57:21.987

[条约](http://code.google.com/p/treaty/)是一个非常学术的合同（测试）框架，但有一些不错的想法。有一些论文发表在上面，人们目前正在努力改进它。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-21T14:01:34.990

对于单元测试，请使用 EasyMock 框架或创建您自己的测试所需接口的实现。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-01T08:32:19.050

ProSyst[测试执行环境](http://dz.prosyst.com/pdoc/mBS_SDK/um/runtime/osgi/docs/tee/index.html)是一个有用的 OSGi 包测试工具。它还支持 JUnit 测试作为可能的测试模型之一。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-10-14T20:40:04.600

我认为我们遇到了同样的问题，我们制定了自己的解决方案。解决方案有不同的部分：

*   一个 junit4runner，它捕获所有定义了特殊属性的 OSGi 服务。它使用 JUnit4 引擎运行这些捕获的服务。JUnit 注释应该放在服务实现的接口中。
*   一个 maven 插件，它启动一个 OSGi 框架（可以创建一个自定义框架作为 maven 依赖项）并在集成测试 maven 生命周期内运行单元测试。
*   一个部署者 OSGi 包。如果将其放入您的 OSGi 容器中，将打开一个简单的始终在顶部的窗口，您可以在其中放置项目文件夹（从总指挥官或从 Eclipse）。然后，这将重新部署该捆绑包。

使用这些工具，您可以进行 TDD 并让书面测试也始终在 maven 集成阶段运行。建议将 eclipse 与 m2e 和 maven-bundle-plugin 一起使用，因为在这种情况下，只要您在源中保存类，就会重新生成 target/classes/META-INF/MANIFEST.MF，以便您可以拖放项目到部署程序窗口。您开发的 OSGi 包不必具有任何特殊功能（例如作为 eclipse 插件或其他东西）。

整个解决方案是开源的。[您可以在http://cookbook.everit.org](http://cookbook.everit.org)找到教程

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-09T17:58:19.600

在过去的几年里，[Tycho——](http://eclipse.org/tycho/)一个新的基于 Maven 的 OSGi 构建系统——在 Eclipse 基金会中变得相当流行。该框架还包括使用 Maven Surefire 在单独的测试平台中测试 OSGi 包的方法...

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-08-27T10:37:07.237

我想有很多方法可以测试 OSGi 组件。进行测试的一种方法是使用 Robot Framework。我所做的是使用 Robot Framework 进行测试，并将远程库安装在 OSGi 中，或者让它们通过套接字与 OSGi 测试组件对话，机器人将与这些模块对话并通过它们运行测试。

所以，基本上你的 OSGi 模块应该有接口来做一些事情并产生一些输出。因此，在我的设置中，我有一个测试组件，可以对实际的 OSGi 组件进行服务调用，然后会有一个监听服务来捕获事件/服务调用（由被测模块进行），这些结果可以被机器人问。因此，基本上通过这种方式，您可以将大型系统拆分为小组件，并让系统在生产/生产环境中运行，并在组件级别自动对其进行测试，或者统一测试一些实际组件。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-03-16T08:39:43.970

与其他人一起提到 mockito 非常方便地模拟插件依赖项（参考等）。见[https://www.baeldung.com/mockito-annotations](https://www.baeldung.com/mockito-annotations)

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2018-08-08T20:04:31.883

bnd-testing-maven-plugin 怎么样？

它允许在 Felix 或 Equinox 等正在运行的容器中运行 JUnit。如果您将 BNDTools 用于 Eclipse，这非常相似，但只是没有 Eclipse 且没有 UI 的 maven。

[https://github.com/bndtools/bnd/tree/master/maven/bnd-testing-maven-plugin](https://github.com/bndtools/bnd/tree/master/maven/bnd-testing-maven-plugin)

还可以查看 Maven 的有效osgi 原型。这将为您构建项目或添加测试提供一个良好的起点。

[https://github.com/effectiveosgi](https://github.com/effectiveosgi)

# c# - 字符串与 StringBuilder

> ID：73883
> 
> 赞同：225
> 
> 时间：2008-09-16T15:55:54.390
> 
> 标签：c#, .net, performance

我了解`String`和`StringBuilder`（`StringBuilder`可变）之间的区别，但两者之间是否存在很大的性能差异？

我正在处理的程序有很多大小写驱动的字符串附加（500+）。是使用`StringBuilder`更好的选择吗？

* * *

## 回答 #1

> 赞同：246
> 
> 时间：2008-09-16T15:59:58.763

是的，性能差异很大。请参阅知识库文章“[如何提高 Visual C# 中的字符串连接性能](http://support.microsoft.com/kb/306822)”。

我总是尝试先编写清晰的代码，然后再优化性能。这比反过来做要容易得多！然而，在看到我的应用程序在两者之间的巨大性能差异之后，我现在更仔细地考虑了一下。

幸运的是，对代码运行性能分析以查看您在哪里花费时间，然后`StringBuilder`在需要的地方对其进行修改以使用它是相对简单的。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2008-09-16T16:18:10.187

为了澄清 Gillian 关于 4 弦的说法，如果你有这样的事情：

```
string a,b,c,d;
 a = b + c + d; 
```

那么使用字符串和加号运算符会更快。这是因为（就像 Eric 指出的 Java 一样），它在内部自动使用 StringBuilder（实际上，它使用 StringBuilder 也使用的原语）

但是，如果您正在做的事情更接近：

```
string a,b,c,d;
 a = a + b;
 a = a + c;
 a = a + d; 
```

然后，您需要显式使用 StringBuilder。.Net 不会在此处自动创建 StringBuilder，因为它毫无意义。在每一行的末尾，“a”必须是一个（不可变的）字符串，因此它必须在每一行上创建和处置一个 StringBuilder。为了速度，您需要使用相同的 StringBuilder 直到您完成构建：

```
string a,b,c,d;
StringBuilder e = new StringBuilder();
 e.Append(b);
 e.Append(c);
 e.Append(d);
 a = e.ToString(); 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2008-09-16T17:48:14.040

*如果*您正在执行多个循环或代码传递中的分叉，则StringBuilder 更可取...但是，对于 PURE 性能，如果您可以使用*SINGLE*字符串声明，那么它的性能要高得多。

例如：

```
string myString = "Some stuff" + var1 + " more stuff"
                  + var2 + " other stuff" .... etc... etc...; 
```

比

```
StringBuilder sb = new StringBuilder();
sb.Append("Some Stuff");
sb.Append(var1);
sb.Append(" more stuff");
sb.Append(var2);
sb.Append("other stuff");
// etc.. etc.. etc.. 
```

在这种情况下，可以认为 StringBuild 更易于维护，但并不比单个字符串声明更高效。

10 次中有 9 次……使用字符串生成器。

附带说明： string + var 也比在内部使用 StringBuilder 的 string.Format 方法（通常）更高效（当有疑问时......检查反射器！）

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2013-07-30T06:53:27.797

一个简单的例子来演示使用`String`串联 vs时的速度差异`StringBuilder`：

```
System.Diagnostics.Stopwatch time = new Stopwatch();
string test = string.Empty;
time.Start();
for (int i = 0; i < 100000; i++)
{
    test += i;
}
time.Stop();
System.Console.WriteLine("Using String concatenation: " + time.ElapsedMilliseconds + " milliseconds"); 
```

结果：

> 使用字符串连接：15423 毫秒

```
StringBuilder test1 = new StringBuilder();
time.Reset();
time.Start();
for (int i = 0; i < 100000; i++)
{
    test1.Append(i);
}
time.Stop();
System.Console.WriteLine("Using StringBuilder: " + time.ElapsedMilliseconds + " milliseconds"); 
```

结果：

> 使用 StringBuilder：10 毫秒

结果，第一次迭代花费了 15423 毫秒，而第二次迭代使用`StringBuilder`了 10 毫秒。

在我看来，使用`StringBuilder`更快，更快。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2008-09-16T16:27:08.447

这个基准测试表明，当组合 3 个或更少的字符串时，常规连接更快。

[http://www.chinhdo.com/20070224/stringbuilder-is-not-always-faster/](http://www.chinhdo.com/20070224/stringbuilder-is-not-always-faster/)

StringBuilder 可以显着提高内存使用率，尤其是在将 500 个字符串相加的情况下。

考虑以下示例：

```
string buffer = "The numbers are: ";
for( int i = 0; i < 5; i++)
{
    buffer += i.ToString();
}
return buffer; 
```

记忆中发生了什么？创建以下字符串：

```
1 - "The numbers are: "
2 - "0"
3 - "The numbers are: 0"
4 - "1"
5 - "The numbers are: 01"
6 - "2"
7 - "The numbers are: 012"
8 - "3"
9 - "The numbers are: 0123"
10 - "4"
11 - "The numbers are: 01234"
12 - "5"
13 - "The numbers are: 012345" 
```

通过将这五个数字添加到字符串的末尾，我们创建了 13 个字符串对象！其中12个没用！哇！

StringBuilder 解决了这个问题。它不是我们经常听到的“可变字符串”（*.NET 中的所有字符串都是不可变的*）。它的工作原理是保留一个内部缓冲区，一个 char 数组。调用 Append() 或 AppendLine() 将字符串添加到 char 数组末尾的空白处；如果数组太小，它会创建一个新的更大的数组，并将缓冲区复制到那里。所以在上面的例子中，StringBuilder 可能只需要一个数组来包含字符串的所有 5 个添加 - 取决于其缓冲区的大小。您可以在构造函数中告诉 StringBuilder 它的缓冲区应该有多大。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2018-12-15T16:37:20.593

**字符串与字符串生成器：**

首先你必须知道这两个类生活在哪个程序集中？

所以，

**字符串**存在于`System`命名空间中。

和

**StringBuilder**存在于`System.Text`命名空间中。

对于**字符串**声明：

您必须包含`System`命名空间。像这样的东西。 `Using System;`

和

对于**StringBuilder**声明：

您必须包含`System.text`命名空间。像这样的东西。 `Using System.text;`

现在来实际的问题。

**string**和**StringBuilder**有什么区别？

***这两者之间的主要区别在于：***

**字符串**是不可变的。

和

**StringBuilder**是可变的。

*所以现在让我们讨论一下不可变*和*可变*之间的区别

 ***Mutable:** : 表示可变的。

**Immutable:** : 表示不可更改。

**例如：**

```
using System;

namespace StringVsStrigBuilder
{
    class Program
    {
        static void Main(string[] args)
        {
            // String Example

            string name = "Rehan";
            name = name + "Shah";
            name = name + "RS";
            name = name + "---";
            name = name + "I love to write programs.";

            // Now when I run this program this output will be look like this.
            // output : "Rehan Shah RS --- I love to write programs."
        }
    }
} 
```

所以在这种情况下，我们将改变同一个对象 5 次。

所以显而易见的问题是！当我们将相同的字符串更改 5 次时，实际上会发生什么。

这就是我们将相同的字符串更改 5 次时发生的情况。

让我们看看图。

[![在此处输入图像描述](https://i.stack.imgur.com/Q3haP.jpg)](https://i.stack.imgur.com/Q3haP.jpg)

**解释：**

当我们第一次将这个变量“name”初始化为“Rehan”时，即`string name = "Rehan"` 这个变量在堆栈“name”上创建并指向那个“Rehan”值。执行此行后：“name = name + “Shah”。引用变量不再指向该对象“Rehan”，它现在指向“Shah”，依此类推。

`string`不可变意味着一旦我们在内存中创建了对象，我们就无法更改它们。

因此，当我们连接`name`变量时，前一个对象保留在内存中，并创建了另一个新的字符串对象......

所以从上图中我们有五个对象，四个对象被扔掉了，它们根本没有被使用。它们仍然保留在内存中，并且占用了内存量。“垃圾收集器”负责从内存中清除那些资源。

因此，在字符串的情况下，当我们一遍又一遍地操作字符串时，我们会创建许多对象并留在内存中。

这就是字符串变量的故事。

现在让我们看看 StringBuilder 对象。 **例如：**

```
using System;
using System.Text;

namespace StringVsStrigBuilder
{
    class Program
    {
        static void Main(string[] args)
        {
            // StringBuilder Example

            StringBuilder name = new StringBuilder();
            name.Append("Rehan");
            name.Append("Shah");
            name.Append("RS");
            name.Append("---");
            name.Append("I love to write programs.");

            // Now when I run this program this output will be look like this.
            // output : "Rehan Shah Rs --- I love to write programs."
        }
    }
} 
```

所以在这种情况下，我们将改变同一个对象 5 次。

所以显而易见的问题是！当我们将相同的 StringBuilder 更改 5 次时，实际上会发生什么。

这就是我们将相同的 StringBuilder 更改 5 次时发生的情况。

让我们看看图。 [![在此处输入图像描述](https://i.stack.imgur.com/oqTua.jpg)](https://i.stack.imgur.com/oqTua.jpg)

**说明：** 如果是 StringBuilder 对象。你不会得到新的对象。同一个对象将在内存中发生变化，因此即使您更改对象等说 10,000 次，我们仍然只有一个 stringBuilder 对象。

您没有很多垃圾对象或 non_referenced stringBuilder 对象，因为它可以更改。它是可变的，意味着它会随着时间而改变？

**差异：**

*   String 存在于 System 命名空间中，而 Stringbuilder 存在于 System.Text 命名空间中。
*   string 是不可变的，而 StringBuilder 是可变的。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2015-02-26T17:52:09.597

是的，`StringBuilder`在对字符串执行重复操作时提供更好的性能。这是因为所有更改都是针对单个实例进行的，因此可以节省大量时间，而不是像`String`.

### 字符串与字符串生成器

*   `String`

    1.  在`System`命名空间下
    2.  不可变（只读）实例
    3.  当值发生连续变化时性能会下降
    4.  线程安全
*   `StringBuilder`（可变字符串）

    1.  在`System.Text`命名空间下
    2.  可变实例
    3.  显示更好的性能，因为对现有实例进行了新的更改

> 强烈推荐 dotnet mob 文章：[String Vs StringBuilder in C#](http://codaffection.com/csharp-article/difference-string-and-stringbuilder-in-csharp/)。
> 
> 相关的堆栈溢出问题：[当字符串在 C# 中不变时字符串的可变性？](https://stackoverflow.com/questions/28511598/mutability-of-string-when-string-doesnt-change-in-c/28511709#28511709).

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2008-09-16T16:10:55.320

StringBuilder 以使用额外内存为代价减少了分配和分配的数量。使用得当，它可以完全不需要编译器一遍又一遍地分配越来越大的字符串，直到找到结果。

```
string result = "";
for(int i = 0; i != N; ++i)
{
   result = result + i.ToString();   // allocates a new string, then assigns it to result, which gets repeated N times
} 
```

对比

```
String result;
StringBuilder sb = new StringBuilder(10000);   // create a buffer of 10k
for(int i = 0; i != N; ++i)
{
   sb.Append(i.ToString());          // fill the buffer, resizing if it overflows the buffer
}

result = sb.ToString();   // assigns once 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2010-10-26T00:36:14.143

> String 或 StringBuilder 对象的连接操作的性能取决于内存分配发生的频率。String 连接操作总是分配内存，而 StringBuilder 连接操作仅在 StringBuilder 对象缓冲区太小而无法容纳新数据时才分配内存。因此，如果串联固定数量的 String 对象，则 String 类更适合串联操作。在这种情况下，编译器甚至可以将各个连接操作组合成一个操作。如果串联任意数量的字符串，则 StringBuilder 对象更适合串联操作；例如，如果一个循环连接随机数量的用户输入字符串。

资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder%28v=VS.90%29.aspx)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-09-16T20:30:49.780

`StringBuilder`更适合从许多非常量值构建字符串。

如果您从大量常量值（例如 HTML 或 XML 文档或其他文本块中的多行值）构建字符串，则只需附加到同一个字符串即可，因为几乎所有编译器都这样做“常量折叠”，当你有一堆常量操作时减少解析树的过程（当你写类似的东西时也会使用它`int minutesPerYear = 24 * 365 * 60`）。对于相互附加非常量值的简单情况，.NET 编译器会将您的代码简化为类似于所做的事情`StringBuilder`。

但是，当编译器无法将您的附加内容简化为更简单的内容时，您将需要一个`StringBuilder`. 正如 fizch 指出的那样，这更有可能发生在循环内部。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2010-06-18T15:03:50.667

考虑“[微优化剧院的悲惨悲剧](http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html)”。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-16T16:02:55.823

除了前面的答案，当我想到这样的问题时，我总是做的第一件事就是创建一个小型测试应用程序。在这个应用程序中，对这两种情况执行一些计时测试，然后自己看看哪个更快。

恕我直言，附加 500 多个字符串条目绝对应该使用 StringBuilder。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-16T15:59:17.360

我相信如果您需要将超过 4 个字符串附加在一起，StringBuilder 会更快。另外它可以做一些很酷的事情，比如 AppendLine。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-16T15:59:40.557

在 .NET 中，StringBuilder 仍然比附加字符串快。我很确定在 Java 中，当您附加字符串时，它们只是在后台创建一个 StringBuffer ，所以并没有真正的区别。我不确定他们为什么还没有在.NET 中这样做。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-16T16:08:19.523

使用字符串进行连接可能会导致运行时复杂度为`O(n^2)`.

如果您使用 a `StringBuilder`，则必须完成的内存复制要少得多。`StringBuilder(int capacity)`如果您可以估计决赛的规模，您可以提高性能`String`。即使您不精确，您也可能只需将容量增加`StringBuilder`几倍，这也有助于提高性能。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-09-16T17:05:36.030

在将其用于任何字符串存储之前，我已经看到`EnsureCapacity(int capacity)`在实例上使用方法调用带来了显着的性能提升。`StringBuilder`我通常在实例化后的代码行中调用它。它的效果与您`StringBuilder`像这样实例化一样：

```
var sb = new StringBuilder(int capacity); 
```

此调用会提前分配所需的内存，这会导致在多个`Append()`操作期间分配的内存更少。您必须对需要多少内存做出有根据的猜测，但对于大多数应用程序来说，这应该不会太难。我通常会因为内存过多而犯错（我们说的是 1k 左右）。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2013-01-28T17:01:02.047

`StringBuilder`效率要高得多，但除非您进行大量字符串修改，否则您不会看到这种性能。

下面是一个快速的代码块，给出了一个性能示例。正如您所看到的，当您进行大型迭代时，您实际上才开始看到主要的性能提升。

如您所见，200,000 次迭代耗时 22 秒，而使用 100 万次迭代`StringBuilder`几乎是即时的。

```
string s = string.Empty;
StringBuilder sb = new StringBuilder();

Console.WriteLine("Beginning String + at " + DateTime.Now.ToString());

for (int i = 0; i <= 50000; i++)
{
    s = s + 'A';
}

Console.WriteLine("Finished String + at " + DateTime.Now.ToString());
Console.WriteLine();

Console.WriteLine("Beginning String + at " + DateTime.Now.ToString());

for (int i = 0; i <= 200000; i++)
{
    s = s + 'A';
}

Console.WriteLine("Finished String + at " + DateTime.Now.ToString());
Console.WriteLine();
Console.WriteLine("Beginning Sb append at " + DateTime.Now.ToString());

for (int i = 0; i <= 1000000; i++)
{
    sb.Append("A");
}
Console.WriteLine("Finished Sb append at " + DateTime.Now.ToString());

Console.ReadLine(); 
```

上述代码的结果：

> 在 28/01/2013 16:55:40 开始字符串 +。
> 
> 完成字符串 + 于 28/01/2013 16:55:40。
> 
> 在 28/01/2013 16:55:40 开始字符串 +。
> 
> 完成字符串 + 于 28/01/2013 16:56:02。
> 
> 从 28/01/2013 16:56:02 开始附加 Sb。
> 
> 在 28/01/2013 16:56:02 完成 Sb 追加。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-16T16:01:17.183

如果您要进行大量字符串连接，请使用 StringBuilder。与字符串连接时，每次都会创建一个新字符串，从而占用更多内存。

亚历克斯

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-16T16:11:11.637

我的方法一直是在连接 4 个或更多字符串时使用 StringBuilder，或者当我不知道如何进行连接时。

[良好的性能相关文章在这里](http://www.heikniemi.net/hc/archives/000124.html)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-09-16T16:13:14.457

String 和 StringBuilder 实际上都是不可变的，StringBuilder 内置了缓冲区，可以更有效地管理其大小。当 StringBuilder 需要调整大小时，就是在堆上重新分配它的时候。默认情况下，它的大小为 16 个字符，您可以在构造函数中设置它。

例如。

StringBuilder sb = new StringBuilder(50);

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-16T18:09:59.090

字符串连接会花费你更多。在 Java 中，您可以根据需要使用 StringBuffer 或 StringBuilder。如果您想要一个同步且线程安全的实现，请选择 StringBuffer。这将比字符串连接更快。

如果您不需要同步或线程安全实现，请选择 StringBuilder。这将比字符串连接更快，也比 StringBuffer 更快，因为它们没有同步开销。

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2008-09-16T15:57:51.293

从内存的角度来看，StringBuilder 的性能会更好。至于处理，执行时间的差异可以忽略不计。

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2008-09-16T16:01:09.180

StringBuilder 可能更可取。原因是它分配了比当前需要更多的空间（您设置了字符数），以便为将来的追加留出空间。然后那些适合当前缓冲区的未来追加不需要任何内存分配或垃圾收集，这可能很昂贵。一般来说，我使用StringBuilder进行复杂的字符串连接或多重格式化，然后在数据完成后转换为普通的String，我又想要一个不可变的对象。

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2008-09-16T18:13:56.570

作为一般的经验法则，如果我必须多次设置字符串的值，或者如果有任何附加到字符串，那么它需要是一个字符串生成器。在了解字符串构建器之前，我已经看过我过去编写的应用程序，这些应用程序具有巨大的内存足迹，而且似乎还在不断增长。将这些程序更改为使用字符串生成器会显着减少内存使用量。现在我以字符串生成器发誓。

# visual-studio-2005 - 您可以将 Visual Studio 的“智能缩进”设置为不删除空行中的制表符吗？

> ID：73884
> 
> 赞同：6
> 
> 时间：2008-09-16T15:55:58.007
> 
> 标签：visual-studio-2005, tabs

当 Visual Studio (2005) 将*Options -> Text Editor -> C/C++ -> Tabs -> Indenting*设置为 Smart 时，它将自动缩进代码块并按预期排列波浪括号 {}。但是，如果您在代码块内按 Enter 键，将光标移动到另一行，然后将其移回，则插入的选项卡将消失，光标一直位于左侧。有没有办法将 Visual Studio 设置为保留这些选项卡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T15:59:06.190

据我所知，唯一的方法是在那一行输入一些东西（任何东西），然后删除它。或者点击空间，在你回到那条线之前你永远不会看到它。

一旦 VS 确定您已经编辑了一行文本，它就不会自动为您修改它（至少，不是您描述的那种方式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T17:17:12.003

这对我自己来说也是一个烦恼。每当重新格式化代码时，空白行都会被取消标记。你可能会看这个： http: [//visualstudiogallery.msdn.microsoft.com/ac4d4d6b-b017-4a42-8f72-55f0ffe850d7](http://visualstudiogallery.msdn.microsoft.com/ac4d4d6b-b017-4a42-8f72-55f0ffe850d7)这不完全是一个解决方案，而是朝着正确方向迈出的一步

# jquery - 在 jQuery 中，使用 ajaxSend 预览 $.post 调用构建的 url

> ID：73885
> 
> 赞同：0
> 
> 时间：2008-09-16T15:56:00.987
> 
> 标签：jquery, ajax

如何构建我的 ajaxSend 调用，这似乎是放置它的地方，以预览传递回代理的内容？另外，我可以在 ajaxSend 中停止 ajax 调用吗？..所以我可以在处理来自代理的错误之前完善我的 url 字符串？

这是完整的 URL，当传递给代理时，它将返回我需要的 JSON 代码：

```
http://myServer/cgi-bin/broker?service=myService&program=myProgram&section=mySection&start=09/08/08&end=09/26/08 
```

这是我的 $.post 调用（不确定它是否创建了上面的 url 字符串）

```
$(function() {
 $("#submit").bind("click",
  function() {
   $.post({
     url: "http://csewebprod/cgi-bin/broker" ,
     datatype: "json",
     data: {
      'service' : myService,
      'program' : myProgram,
      'section' : mySection,
      'start' : '09/08/08',
      'end' : '09/26/08'
      },
     error: function(request){
      $("#updateHTML").removeClass("hide") ;
      $("#updateHTML").html(request.statusText);
      },
     success: function(request) {
      $("#updateHTML").removeClass("hide") ;
      $("#updateHTML").html(request) ;
      }
    }); // End post method
   }); // End bind method
  }); // End eventlistener 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-16T16:12:32.883

预览正在发送的 HTTP 请求的一种简单方法是使用[Firebug](http://getfirebug.com/) for Firefox。下载并启用插件，当请求发出时，它会显示在萤火虫控制台中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T16:42:13.467

[API/1.2/Ajax](http://docs.jquery.com/Ajax/ajaxSend#callback)包含有关如何绑定到 AJAX 事件的信息。

```
// Hook into jQuery's ajaxSend event, which is triggered before every ajax
// request.
$(document).ajaxSend(function(event, request, settings) {
  // settings.data is either a query string like "id=1&x=foo" or null

  // It can be modified like this (assuming AUTH_TOKEN is defined eslewhere)
  settings.data =
    ((settings.data) ? settings.data + "&" : "") +
    "authenticity_token=" + encodeURIComponent(AUTH_TOKEN);
}); 
```

# perl - 我应该使用哪个框架来编写模块？

> ID：73889
> 
> 赞同：21
> 
> 时间：2008-09-16T15:56:55.930
> 
> 标签：perl, perl-module

编写模块的最佳框架是什么—— [ExtUtils::MakeMaker](http://search.cpan.org/perldoc/ExtUtils::MakeMaker) (h2xs) 或[Module::Build](http://search.cpan.org/perldoc/Module::Build)？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2008-10-18T07:35:47.763

**注意**此建议已过时。 [Module::Build 已从 Perl 核心中删除，](http://www.dagolden.com/index.php/2140/paying-respect-to-modulebuild/)但仍作为 CPAN 模块存在。优点和缺点仍然存在，我对 MakeMaker 的看法仍然存在。

* * *

作为 ExtUtils::MakeMaker 的前维护者，我喜欢推荐 Module::Build，因为 MakeMaker 是一个恐怖节目。Module::Build 放在一起要好得多。但这些不是你关心的问题，我会提出我的“对你来说最不麻烦”的答案。

## 执行摘要：

因为 Module::Build 支持并不是 100% 通过 Perl 实现的，所以从 MakeMaker 开始。如果您想进行任何自定义，请切换到 Module::Build。由于它们的基本布局、选项和界面几乎相同，这将是无痛的。尽管看起来很诱人，但请避免使用 Module::Install。

幸运的是，Module::Build 可以模拟 MakeMaker，这对某些人有帮助，但如果您要进行任何自定义，则无济于事。请参阅[模块::Build::Compat](http://search.cpan.org/perldoc?Module::Build::Compat)。

对于使用 Module::Build 的 CPAN 版本很好。现在已经在 CPAN 上构建了足够多的 Module::Build 东西，每个人都已经开始着手处理它了。

最后，新[`configure_requires`](http://module-build.sourceforge.net/META-spec.html#configure_requires)选项让 CPAN shell 在开始构建模块之前知道安装 Module::Build。不幸的是，只有最新的 CPAN shell 知道 configure_requires。

哦，无论你做什么都不要使用 h2xs（除非你正在编写 XS 代码……然后再考虑一下）。

## MakeMaker 优点：

*   与 Perl 一起提供并由 Perl 核心使用（因此它被积极维护并将永远保持下去）
*   一切都知道如何处理 Makefile.PL。
*   大多数模块创作文档将涵盖 MakeMaker。
*   使用make（知道make的人可以调试和修补构建过程）

## MakeMaker 缺点：

*   需要make（想想Windows）
*   难以定制
*   更难定制和跨平台
*   出现问题时难以调试（除非您了解 make）

## 模块::构建优点：

*   更容易定制/子类
*   纯 Perl
*   更容易调试（它是 Perl）
*   可以通过多种方式模拟 MakeMaker
*   CPAN shell 将为您安装 Module::Build

## 模块::构建缺点：

*   Module::Build 维护者（实际上是所有 Perl 工具链帮）讨厌它
*   旧版本的 CPAN 客户端（包括 CPANPLUS）对 Module::Build 一无所知。

## 模块::安装优点：

*   流畅的界面
*   捆绑本身，你有一个已知的版本
*   一切都知道如何处理 Makefile.PL

## 模块::安装缺点：

*   需要制作
*   一直使用捆绑版本，容易受到外部破坏
*   难以在其界面之外进行自定义
*   与 MakeMaker 的胆量混为一谈，因此新的 MakeMaker 版本最终将打破它。
*   不知道如何使用 v2 元规范生成 META 文件（新工具越来越有问题）

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2008-09-16T16:25:07.080

这里有两个问题。

首先，永远不要使用 h2xs。这是旧的过时的肮脏，虽然我想如果你真的想把头文件变成 XS 代码，它可能很有用（我自己从来没有做过）。

**2011 年更新：我强烈建议您查看[Dist::Zilla](http://dzil.org)，特别是如果您认为您将维护多个模块。**

要创建新模块，请使用 Module::Starter。它工作得很好，并且有一些很好的插件来自定义输出。

其次，你在问你应该使用什么构建系统。三个竞争者是 ExtUtils::MakeMaker (EUMM)、Module::Build (MB) 和 Module::Install (MI)。

EUMM 是一个可怕的讨厌的工作，但它确实有效，而且如果您根本不自定义构建过程，它就可以正常工作。

MB是新来的，它有它的批评者。最大的优点是，如果您想大量自定义安装和构建过程，使用 MB 完全有可能（并且以跨平台方式）完成此操作。使用 EUMM 真的是不可能的。

最后，MI 基本上是 EUMM 之上的声明性包装器。它还将自己与您的发行版打包在一起，试图解决用户尝试使用旧工具链模块安装模块的问题。“包自我”技巧的缺点是，如果 MI 本身存在错误，您必须重新发布所有模块才能修复它。

就定制而言，有一些 MI 插件，但如果你想超越它们，你将回到处理 Makefile 和跨十几个平台构建工具的问题，所以它真的无济于事你在那个领域太多了。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2008-09-16T17:08:49.237

[我刚刚将Distribution::Cooker](http://search.cpan.org/dist/Distribution-Cooker)上传到 CPAN。这是我用来制作新发行版的东西。它的好处是你的发行版可以是你喜欢的任何东西：你只是在做一些模板。我不在乎是否有人使用它。对我来说，它很简单，技术含量低，不会造成额外的问题。

[您可以从Module::Starter](http://search.cpan.org/dist/Module-Starter)之类的东西开始制作您的入门模板，然后添加您自己的样板和最喜欢的做事方式。您不仅可以选择每个文件中的任何内容，还可以选择发行版中显示的文件。当您弄清楚自己喜欢如何做事时，您只需更新自己的模板。

至于 Makemaker 和 Module::Build，~~未来是 Module::Build~~。现在只有我们这些老家伙在使用 Makemaker。:) 有办法同时使用两者（或假装同时使用两者）。~~查看 Module::Build、M​​odule::Build::Compat 和 Module::Install 文档~~。Module::Build 被踢出 Perl 的标准库，它的未来是不确定的。它回到了 Makemaker 作为构建系统。

虽然这是一个逃避的答案，但尝试使用每个只是为了获得一些经验。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-10-18T07:41:11.467

您可能还想查看[Dist-Zilla](http://search.cpan.org/dist/Dist-Zilla/)，它是一个新的作者专用工具，用于创建发行版。因为它只是帮助构建发行版，它不附带您的代码或进行任何安装，它可以做很多强大的东西。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-09-17T05:12:16.847

关于 Module::Build 兼容性的唯一问题是当用户尝试安装模块而不更新他们的 CPAN 客户端（CPAN.pm 或 CPANPLUS.pm） 如果他们从 CPAN 安装您的模块，他们可以轻松升级他们的客户端来自同一个镜子。

如果您不想在构建过程中做*任何*复杂的事情，请确保：使用 EUMM。但是，如果您在不同的目标平台上遇到构建问题，您可能最终会出现在 Makefile 中，这在每个 make 变体中都不同。

Module::Build 为您提供了许多功能（如果您扩展它，您可以想到任何东西）并且都是 perl，因此您永远不会最终调试 makefile。Module::Install 为您提供功能，但您必须捆绑它，最后一切都通过“make”运行。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-16T15:58:29.203

两者都有优点和缺点。这些天来，我使用并推荐 Module::Build 和 Module::Starter。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-16T16:13:02.973

我还推荐 Module::Build 和 Module::Starter （使用[TT2 插件](http://search.cpan.org/perldoc?Module::Starter::Plugin::TT2)）。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-16T16:17:54.647

Module::Build 无论如何都更好，但它的支持不如 ExtUtils::MakeMaker 广泛（更具体地说，旧版本的 Perl 不支持开箱即用）。这取决于您的需求。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-16T17:32:14.250

就个人而言，我推荐 Module::Install，我认识的很多人也这样做 - Catalyst 和 Moose 之类的人也使用它。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-16T18:13:29.720

以下是我希望回应采取的方向的一点说明：

*   各种框架的优缺点
*   框架的兼容性/安装基础
*   适用于内部（本地）与外部（CPAN）版本
*   *不是*裸露的“使用X”答案

[戴夫的回答](https://stackoverflow.com/questions/73889/which-framework-should-i-use-to-write-modules#74216)有一些很好的赞成/反对信息。[Leon 的回答](https://stackoverflow.com/questions/73889/which-framework-should-i-use-to-write-modules#74133)暗示了兼容性，但并不明确。正如[brian d foy 所提到](https://stackoverflow.com/questions/73889/which-framework-should-i-use-to-write-modules#74628)的，只有旧帽子使用 EUMM，但我不相信 MB 是用于 CPAN 的良好框架，因为它直到 5.9 才成为核心的一部分。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-16T16:00:01.163

EU::MM 似乎仍然是最广泛支持和最受欢迎的一种，但 Module::Build 正在迎头赶上。此外，请查看[Module::Starter](http://search.cpan.org/dist/Module-Starter/)以获取有助于您入门的模块。

# powershell - 使用 PowerShell 将文件预置到目录和子目录中的所有 .cs 文件

> ID：73892
> 
> 赞同：3
> 
> 时间：2008-09-16T15:57:12.030
> 
> 标签：powershell

如何使用 将文件添加到文件夹和子文件夹中类型的所有文件（在文件开头插入**）**`Powershell`？

我需要向所有人添加一个标准头文件，`.cs`并试图`Powershell`这样做，但是当我能够将它附加到几行代码中时，我在尝试**预先挂起**它时被卡住了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-16T16:12:04.957

这是一个非常简单的示例，向您展示了其中一种可以完成的方法。

```
$Content = "This is your content`n"
Get-ChildItem *.cs | foreach-object { 
$FileContents = Get-Content -Path $_
Set-Content -Path $_ -Value ($Content + $FileContents)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T16:08:44.217

不知道，但是如果您有要附加的代码，请反过来做。就像是

1.  重命名现有文件，
2.  创建一个与上面同名的空文件
3.  将标头附加到新的空文件，
4.  将重命名的文件附加到以前的文件，
5.  删除重命名的文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T16:12:03.490

从算法上讲，您实际上并不需要临时文件：

1）读取需要修改的文件内容

2）修改内容（作为一个字符串，假设你有一个名为内容的变量中的内容），像这样：内容=标题+内容

3)seek到文件的开头，每种语言都有一个seek方法或一个seek等价物

4）编写新内容

5)在文件指针返回的位置截断文件

你有它，没有临时文件。:)

# delphi - Delphi 组件序列化

> ID：73895
> 
> 赞同：6
> 
> 时间：2008-09-16T15:57:19.097
> 
> 标签：delphi, serialization, components

有没有人在将组件序列化到文件中并将它们读回时遇到问题，特别是在组件供应商升级 VCL 组件的区域。例如，一个文件用 DelphiX 序列化，然后几年后用 delphiY 读回。序列化格式是否发生变化，如果发生变化，可以采取哪些措施来防止升级时在组件中读取错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T16:36:10.360

用于序列化已发布属性的内置 RTTI 系统容易受到组件更改的影响。只要将旧属性保留在新对象中，就可以管理前进。即，您保留属性界面，但如果您愿意，可以丢弃内容。倒退更糟 - 因为新版本保存的属性无法在旧版本加载中打开，这将是一个问题。

有一些组件/库（[http://www.torry.net/quicksearchd.php?String=RTTI&Title=Yes](http://www.torry.net/quicksearchd.php?String=RTTI&Title=Yes)）可以添加 XML 格式的序列化，这可能会有所帮助，因为您可以选择跳过不需要的内容知道。

您仍然需要注意如何设计发布的内容，并且可能应该找到一种方法来“忽略但传播”您当前版本不理解的内容。这将允许您以较新的格式打开和更改文件，同时尝试保留较新的属性，而不是剥离它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T16:05:41.977

格式肯定会发生变化，因为供应商将为其组件添加功能。序列化只是循环所有已发布的属性并将它们保存到流中。当它们被读回时，从流中读取的每个属性都将被设置回组件。如果该属性不再存在，那么您就有问题了。除了一些基本的异常处理之外，我认为您对此无能为力。

保证兼容性的最佳方法是进行自己的序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T16:28:11.987

谢谢回复。我试图避免自定义序列化并利用每个组件序列化技术，但是由于缺少任何“修补”升级到新组件格式的方法，我猜自定义序列化是唯一的方法。

# asp.net - ASP.NET MVC“组件”

> ID：73902
> 
> 赞同：9
> 
> 时间：2008-09-16T15:57:52.980
> 
> 标签：asp.net, asp.net-mvc, partial-views

有没有办法让页面的一部分像一个小子页面一样呈现，比如组件？

例如，如果我的所有页面上都有购物车？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-16T15:59:09.950

使用预览版 5，Html.RenderPartial 是您的人选，您可以渲染子控件，并将您的视图数据或任意模型和新的视图数据组合传递给它们。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T16:03:54.090

如果您希望它以组件的形式呈现另一个控制器操作以进行封装，请使用。

Html.RenderAction

使用 routedata 让您到达那里，拥有自己的 viewdata 和迷你生命周期

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-16T16:34:04.030

您可以创建一个修改视图数据的 ActionFilter。这样，您可以使用动作过滤器装饰每个返回部分的动作。看看我的帖子：

[http://stephenwalther.com/blog/archive/2008/08/12/asp-net-mvc-tip-31-passing-data-to-master-pages-and-user-controls.aspx](http://stephenwalther.com/blog/archive/2008/08/12/asp-net-mvc-tip-31-passing-data-to-master-pages-and-user-controls.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T23:18:31.517

您正在寻找子[控制器](http://groups.google.com/group/mvccontrib-discuss/browse_thread/thread/b050e21fe322c08a)。这个实现是做你所说的最好的方法。

编辑：我刚刚在这里发布了这个：http: [//mhinze.com/subcontrollers-in-aspnet-mvc/](http://mhinze.com/subcontrollers-in-aspnet-mvc/)

# windows-mobile - Is there a console for Windows Mobile devices?

> ID：73910
> 
> 赞同：1
> 
> 时间：2008-09-16T15:58:29.170
> 
> 标签：windows-mobile, console

I would like to write small console based applications on Windows Mobile. What console applications might I use?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-02-09T14:33:04.580

知道当您从标准 Windows 移动应用程序使用 printf 时，输出将最终出现在设备的内核日志中可能很有用。

这有几个缺点： * 对内核日志的访问取决于制造商+设备。* 您可以打印的字符串长度限制为 255 个字符。

如果您在调试器的 visualstudio 环境中运行您的工具，您将在日志窗口中获得 printf 的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T16:07:50.820

Windows Mobile 上没有命令提示样式的控制台。如果您真的在使用命令提示符，请查看 www.pocketdos.com 以获得高级别的 dos 应用程序兼容性。如果您对为 Windows Mobile 编写小型应用程序更感兴趣，C# 或 VB.Net 是您的最佳选择。在像这样的小型移动设备上，与基于 GUI 的应用程序相比，用户与命令提示符进行交互要困难得多。

# algorithm - 地图应用的聚类算法

> ID：73927
> 
> 赞同：31
> 
> 时间：2008-09-16T15:59:42.540
> 
> 标签：algorithm, machine-learning, maps, artificial-intelligence, cluster-analysis

我正在研究地图上的聚类点（纬度/经度）。对于快速且可扩展的合适算法是否有任何建议？

更具体地说，我有一系列纬度/经度坐标和一个地图视口。我正在尝试将靠近的点聚集在一起以消除混乱。

我已经有了问题的解决方案（[见这里](http://bouldr.net)），只是我想知道是否有任何正式的算法可以有效地解决问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-24T04:44:51.943

对于虚拟地球应用程序，我使用了 [此处](https://web.archive.org/web/20130410092213/http://www.soulsolutions.com.au/Articles/ClusteringVirtualEarthPart1.aspx)描述的集群。它闪电般快速且易于扩展。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T16:06:12.133

*Google Maps Hacks*对此有一个 hack，[“Hack 69\. Cluster Markers at High Zoom Levels”](https://flylib.com/books/en/2.367.1/hack_69_cluster_markers_at_high_zoom_levels.html)。

此外，请参阅[关于聚类算法的 Wikipedia](http://en.wikipedia.org/wiki/Data_clustering)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-18T14:48:46.457

[您可以查看使用QuadTile](http://wiki.openstreetmap.org/wiki/QuadTiles)方案对所有点进行索引，然后根据比例进一步向下进行四分割。然后，所有相似位置的点将在您的索引中彼此靠近，从而使聚类有效地发生。

QuadTiles 是[Morton Codes](http://en.wikipedia.org/wiki/Morton_number_(number_theory))的一个示例，并且有一个从该维基百科文章链接的 python 示例可能会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-05T09:54:13.383

我查看了各种库，发现它们非常复杂，一个词都看不懂，所以我决定制作自己的聚类算法

这是我的Java代码

```
static int OFFSET = 268435456;
    static double RADIUS = 85445659.4471;
    static double pi = 3.1444;

public static double lonToX(double lon) {
        return Math.round(OFFSET + RADIUS * lon * pi / 180);
    }

    public static double latToY(double lat) {
        return Math.round(OFFSET
                - RADIUS
                * Math.log((1 + Math.sin(lat * pi / 180))
                        / (1 - Math.sin(lat * pi / 180))) / 2);
    } 
```

// 这会计算特定缩放级别下两个纬度长点之间的像素距离

```
 public static int pixelDistance(double lat1, double lon1, double lat2,
            double lon2, int zoom) {
        double x1 = lonToX(lon1);
        double y1 = latToY(lat1);

        double x2 = lonToX(lon2);
        double y2 = latToY(lat2);

        return (int) (Math
                .sqrt(Math.pow((x1 - x2), 2) + Math.pow((y1 - y2), 2))) >> (21 - zoom);
    } 
```

// 实际计算簇的主函数 1\. 将 lat long 点的 ArrayList 迭代到 length 。2.内部循环从i + 1位置迭代相同arraylist的副本，即离开顶部循环的索引3。将第0个元素作为质心的中心，如果它们的像素距离非常小，则比较所有其他点将其添加到集群 4\. 从顶部数组列表中删除所有元素并复制已形成集群 5 的数组列表，通过从 0 重新初始化索引来重新启动该过程；6 如果所选质心没有簇，则不删除该元素

```
static ArrayList<Cluster> cluster(ArrayList<Marker> markers, int zoom) {

        ArrayList<Cluster> clusterList = new ArrayList<Cluster>();

        ArrayList<Marker> originalListCopy = new ArrayList<Marker>();

        for (Marker marker : markers) {
            originalListCopy.add(marker);
        }

        /* Loop until all markers have been compared. */
        for (int i = 0; i < originalListCopy.size();) {

            /* Compare against all markers which are left. */

            ArrayList<Marker> markerList = new ArrayList<Marker>();
            for (int j = i + 1; j < markers.size();) {
                int pixelDistance = pixelDistance(markers.get(i).getLatitude(),
                        markers.get(i).getLongitude(), markers.get(j)
                                .getLatitude(), markers.get(j).getLongitude(),
                        zoom);

                if (pixelDistance < 40) {

                    markerList.add(markers.get(i));
                    markerList.add(markers.get(j));

                    markers.remove(j);

                    originalListCopy.remove(j);
                    j = i + 1;
                } else {
                    j++;
                }

            }

            if (markerList.size() > 0) {
                Cluster cluster = new Cluster(clusterList.size(), markerList,
                        markerList.size() + 1, originalListCopy.get(i)
                                .getLatitude(), originalListCopy.get(i)
                                .getLongitude());
                clusterList.add(cluster);
                originalListCopy.remove(i);
                markers.remove(i);
                i = 0;

            } else {
                i++;
            }

            /* If a marker has been added to cluster, add also the one */
            /* we were comparing to and remove the original from array. */

        }
        return clusterList;
    }

Just pass in your array list here containing latitude and longitude

then to display clusters
here goes the function

@Override
    public void onTaskCompleted(ArrayList<FlatDetails> flatDetailsList) {

        LatLngBounds.Builder builder = new LatLngBounds.Builder();

        originalListCopy = new ArrayList<FlatDetails>();
        ArrayList<Marker> markersList = new ArrayList<Marker>();
        for (FlatDetails detailList : flatDetailsList) {

            markersList.add(new Marker(detailList.getLatitude(), detailList
                    .getLongitude(), detailList.getApartmentTypeString()));

            originalListCopy.add(detailList);

            builder.include(new LatLng(detailList.getLatitude(), detailList
                    .getLongitude()));

        }

        LatLngBounds bounds = builder.build();
        int padding = 0; // offset from edges of the map in pixels
        CameraUpdate cu = CameraUpdateFactory.newLatLngBounds(bounds, padding);

        googleMap.moveCamera(cu);

        ArrayList<Cluster> clusterList = Utils.cluster(markersList,
                (int) googleMap.getCameraPosition().zoom);

        // Removes all markers, overlays, and polylines from the map.
        googleMap.clear();

        // Zoom in, animating the camera.
        googleMap.animateCamera(CameraUpdateFactory.zoomTo(previousZoomLevel),
                2000, null);

        CircleOptions circleOptions = new CircleOptions().center(point) //
                // setcenter
                .radius(3000) // set radius in meters
                .fillColor(Color.TRANSPARENT) // default
                .strokeColor(Color.BLUE).strokeWidth(5);

        googleMap.addCircle(circleOptions);

        for (Marker detail : markersList) {

            if (detail.getBhkTypeString().equalsIgnoreCase("1 BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk1)));
            } else if (detail.getBhkTypeString().equalsIgnoreCase("2 BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk_2)));

            }

            else if (detail.getBhkTypeString().equalsIgnoreCase("3 BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk_3)));

            } else if (detail.getBhkTypeString().equalsIgnoreCase("2.5 BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk2)));

            } else if (detail.getBhkTypeString().equalsIgnoreCase("4 BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk_4)));

            } else if (detail.getBhkTypeString().equalsIgnoreCase("5 BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk5)));

            } else if (detail.getBhkTypeString().equalsIgnoreCase("5+ BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk_5)));

            }

            else if (detail.getBhkTypeString().equalsIgnoreCase("2 BHK")) {
                googleMap.addMarker(new MarkerOptions()
                        .position(
                                new LatLng(detail.getLatitude(), detail
                                        .getLongitude()))
                        .snippet(String.valueOf(""))
                        .title("Flat" + flatDetailsList.indexOf(detail))
                        .icon(BitmapDescriptorFactory
                                .fromResource(R.drawable.bhk_2)));

            }
        }

        for (Cluster cluster : clusterList) {

            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inMutable = true;
            options.inPurgeable = true;
            Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
                    R.drawable.cluster_marker, options);

            Canvas canvas = new Canvas(bitmap);

            Paint paint = new Paint();
            paint.setColor(getResources().getColor(R.color.white));
            paint.setTextSize(30);

            canvas.drawText(String.valueOf(cluster.getMarkerList().size()), 10,
                    40, paint);

            googleMap.addMarker(new MarkerOptions()
                    .position(
                            new LatLng(cluster.getClusterLatitude(), cluster
                                    .getClusterLongitude()))
                    .snippet(String.valueOf(cluster.getMarkerList().size()))
                    .title("Cluster")
                    .icon(BitmapDescriptorFactory.fromBitmap(bitmap)));

        }

    }

ANY QUESTIONS OR DOUBTS PLEASE ASK WILL CLEAR THEM ALL ...........THANKS 
```

# linux - Linux desktop shortcut and icon from install

> ID：73930
> 
> 赞同：6
> 
> 时间：2008-09-16T15:59:59.603
> 
> 标签：linux, rpm

What do I need to add to my `.spec` file to create the desktop shortcut and assign an icon to the shortcut during install of my `.rpm`? If a script is required, an example would be very helpful.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-16T16:06:21.213

您使用 .desktop 文件作为 linux 下的图标。放置图标的位置取决于您使用的发行版和桌面环境。由于我目前在 Fedora 9 上运行 Gnome，所以我将用这些术语来回答它。

一个示例 foo.desktop 文件将是：

```
[Desktop Entry]
Encoding=UTF-8
GenericName=Generic Piece Of Software
Name=FooBar
Exec=/usr/bin/foo.sh
Icon=foo.png
Terminal=false
Type=Application
Categories=Qt;Gnome;Applications; 
```

Fedora 9 Gnome 下的 .desktop 文件应该位于 /usr/share/applications/ ，您可以在 .desktop 上运行定位来确定您应该在发行版中放置的位置。Gnome 通常会在 KDE 图标目录中查看是否还有其他图标......

> Encoding、Name 和 Exec 应该不言自明。
> 
> *   通用名称 == 应用程序的简要说明。
> *   图标 == 为图标显示的图像
> *   终端 == 这是一个终端应用程序，我应该将它作为一个终端应用程序启动吗？
> *   Type == 这是程序的类型，可用于将图标放置在菜单中。
> *   类别 == 如果指定的 XML 文件不存在，此信息主要用于将图标放置在给定菜单中。每个人对菜单的设置都略有不同。

您可以设置更多属性，但并非绝对必要。

使用的图像文件位于 /usr/share/icons/ 目录的某个位置。您可以解析它以找到这些事情如何工作的所有奇迹，但基础是您选择图标类型的目录（在我的情况下为 gnome）并将图像放在适当的目录中（有一个可扩展的目录用于.svg 图像，以及特定尺寸（例如 48x48 用于光栅图像。在 Gnome 下，所有图像通常都是 .png）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-16T19:16:55.497

akdom 给出了一个相当好的答案，但没有做到其相关性。

[许多常见的桌面，包括相关的 Gnome、KDE ​​和 XFCE，都实现了freedesktop.org](http://www.freedesktop.org/)制定的规范。其中包括描述定义桌面图标的文件格式的[桌面条目规范](http://standards.freedesktop.org/desktop-entry-spec/latest/)，以及描述桌面环境应该查找这些文件的位置的[桌面基本目录规范。](http://standards.freedesktop.org/basedir-spec/latest/)

您的 RPM 需要包含一个 .desktop 文件，如[Desktop Entry Specification](http://standards.freedesktop.org/desktop-entry-spec/latest/)所指定，并将其安装在[Desktop Base Directory Specification](http://standards.freedesktop.org/basedir-spec/latest/)所指定的正确位置，或特定于发行版的位置（我想会有别名使用在此位置的规范文件中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-21T13:08:37.430

要为应用程序创建桌面图标，请执行以下两个步骤。

1.  在编辑器中创建一个新文件。

    ```
    gedit ~/.local/share/applications/NameYouWantForApplication.desktop 
    ```

2.  将此部分放在文件中并保存。

    ```
    [Desktop Entry]
    Type=Application
    Encoding=UTF-8
    Name=JeremysPentaho
    Comment=Whatever Comment You want
    Exec=/home/yourname@yourdomain.com/Source/Pentaho/data-integration/spoon.sh
    Icon=/home/yourname@yourdomain.com/Source/Pentaho/data-integration/NameOfmyIconFile.jpg
    Terminal=false 
    ```

# eclipse-plugin - 如何让我的学科出现在已发布的站点中（在 EPF Composer 1.5 中）？

> ID：73933
> 
> 赞同：1
> 
> 时间：2008-09-16T16:00:16.110
> 
> 标签：eclipse-plugin, methodology

我的方法插件中有一个自定义类别（“学科”），我想用它来包含现有学科（来自 Scrum 插件和 EPF OpenUP 库）以及我自己的一些学科（一些是新的，其他的扩展了OpenUP 的）。我可以简单地添加它们，根据需要对它们进行排序，然后在“浏览透视和预览”选项卡中查看它们。

但是，当我发布时，我看不到我添加或扩展的学科。发布日志中没有错误，我的警告指的是其他事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-16T16:01:00.773

您的自定义规程和扩展必须包含任务。当您添加一些时，它们将在发布时可见。

# php - 阻止人们破解基于 PHP 的 Flash 游戏高分表的最佳方法是什么

> ID：73947
> 
> 赞同：213
> 
> 时间：2008-09-16T16:01:27.887
> 
> 标签：php, actionscript-3, security, actionscript, actionscript-2

我说的是一个没有分数上限的动作游戏，也无法通过重播动作等来验证服务器上的分数。

我真正需要的是 Flash/PHP 中最强大的加密，以及一种防止人们通过我的 Flash 文件调用 PHP 页面的方法。过去我尝试过一些简单的方法，例如多次调用单个分数并完成校验和/斐波那契序列等，还使用 ​​Amayeta SWF Encrypt 混淆 SWF，但最终它们都被黑了。

感谢 StackOverflow 的回复，我现在从 Adob​​e 找到了更多信息 - [http://www.adobe.com/devnet/flashplayer/articles/secure_swf_apps_12.html](http://www.adobe.com/devnet/flashplayer/articles/secure_swf_apps_12.html)和[https://github.com/mikechambers/as3corelib](https://github.com/mikechambers/as3corelib) - 我想我可用于加密。不确定这会让我了解 CheatEngine。

我需要知道 AS2 和 AS3 的最佳解决方案，如果它们不同的话。

主要问题似乎是 TamperData 和 LiveHTTP 标头之类的东西，但我知道还有更高级的黑客工具——比如 CheatEngine（感谢 Mark Webster）

* * *

## 回答 #1

> 赞同：416
> 
> 时间：2008-09-16T17:32:22.097

这是网络游戏和竞赛的经典问题。您的 Flash 代码与用户一起决定游戏的分数。但用户不受信任，Flash 代码在用户的计算机上运行。你是索尔。您无法阻止攻击者伪造高分：

*   Flash 比你想象的更容易进行逆向工程，因为字节码有很好的文档记录并描述了一种高级语言（Actionscript）——当你发布一个 Flash 游戏时，你就是在发布你的源代码，无论你是知不知道。

*   攻击者控制 Flash 解释器的运行时内存，因此任何知道如何使用可编程调试器的人都可以随时更改任何变量（包括当前分数），或更改程序本身。

对您的系统最简单的攻击是通过代理运行游戏的 HTTP 流量，捕获高分保存，并以更高的分数重播。

您可以尝试通过将每个高分保存绑定到单个游戏实例来阻止此攻击，例如通过在游戏启动时向客户端发送加密令牌，这可能如下所示：

```
hex-encoding( AES(secret-key-stored-only-on-server, timestamp, user-id, random-number)) 
```

（您也可以使用会话 cookie 来达到同样的效果）。

游戏代码通过高分保存将此令牌回显到服务器。但攻击者仍然可以再次启动游戏，获得一个令牌，然后立即将该令牌粘贴到重放的高分存档中。

因此，接下来您不仅要提供令牌或会话 cookie，还要提供高分加密会话密钥。这将是一个 128 位 AES 密钥，它本身使用一个硬编码到 Flash 游戏中的密钥进行加密：

```
hex-encoding( AES(key-hardcoded-in-flash-game, random-128-bit-key)) 
```

现在，在游戏发布高分之前，它会解密高分加密会话密钥，它可以这样做，因为您将高分加密会话密钥解密密钥硬编码到 Flash 二进制文件中。您使用此解密密钥以及高分的 SHA1 哈希来加密高分：

```
hex-encoding( AES(random-128-bit-key-from-above, high-score, SHA1(high-score))) 
```

服务器上的 PHP 代码检查令牌以确保请求来自有效的游戏实例，然后解密加密的高分，检查以确保高分与高分的 SHA1 匹配（如果您跳过此步骤，解密只会产生随机的，可能非常高的高分）。

因此，现在攻击者反编译了您的 Flash 代码并迅速找到了 AES 代码，它像大拇指一样突出，尽管即使它没有，它也会在 15 分钟内通过内存搜索和跟踪器（“我知道我这个游戏的分数是 666，所以让我们在内存中找到 666，然后捕捉任何触及该值的操作 --- 哦，看，高分加密代码！”）。使用会话密钥，攻击者甚至不必运行 Flash 代码；她抓住一个游戏启动令牌和一个会话密钥，并可以发回任意高分。

您现在正处于大多数开发人员刚刚放弃的地步——通过以下方式与攻击者相处几个月：

*   使用 XOR 操作加扰 AES 密钥

*   用计算密钥的函数替换密钥字节数组

*   在整个二进制文件中散布假密钥加密和高分帖子。

这主要是浪费时间。不用说，SSL 也帮不了你。当两个 SSL 端点之一是邪恶的时，SSL 无法保护您。

以下是一些实际上可以减少高分欺诈的事情：

*   需要登录才能玩游戏，让登录生成会话 cookie，并且不允许在同一会话上启动多个未完成的游戏，或同一用户的多个并发会话。

*   拒绝持续时间少于所玩过的最短真实游戏的游戏会话的高分（对于更复杂的方法，请尝试“隔离”持续时间低于平均游戏持续时间 2 个标准差的游戏会话的高分）。确保您在服务器端跟踪游戏持续时间。

*   拒绝或隔离只玩过一次或两次游戏的登录名的高分，这样攻击者就必须为他们创建的每个登录名生成看起来合理的游戏玩法的“书面记录”。

*   游戏过程中的“心跳”得分，以便您的服务器在一次游戏的生命周期内看到得分增长。拒绝不遵循合理分数曲线的高分（例如，从 0 跳到 999999）。

*   游戏过程中的“快照”游戏状态（例如，弹药数量、关卡中的位置等），您可以稍后将其与记录的临时分数进行核对。您甚至不必从一开始就检测此数据中的异常情况；你只需要收集它，然后如果事情看起来可疑，你可以回去分析它。

*   禁用任何未通过您的一项安全检查的用户的帐户（例如，通过提交未通过验证的加密高分）。

请记住，您只是在这里阻止高分欺诈。没有*什么*可以阻止如果。如果你的游戏中有钱，那么有人会打败你想出的任何系统。目标不是*阻止*这种攻击；这是为了让攻击变得更昂贵，而不是仅仅在游戏中表现出色并击败它。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2008-09-16T16:09:55.057

你可能问错了问题。您似乎专注于人们用来在高分榜上博弈的方法，但阻止特定方法仅止于此。我没有使用 TamperData 的经验，所以我无话可说。

您应该问的问题是：“我如何验证提交的分数是否有效和真实？” 具体方法取决于游戏。对于非常简单的益智游戏，您可能会发送分数以及特定的开始状态和导致结束状态的移动顺序，然后使用相同的移动在服务器端重新运行游戏。确认规定的分数与计算的分数相同，并且仅在它们匹配时才接受分数。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2008-09-16T16:51:32.400

一个简单的方法是提供你的高分值的加密哈希以及它自己的分数。例如，通过 HTTP GET 发布结果时： **[http ://example.com/highscores.php?score=500&checksum=0a16df3dc0301a36a34f9065c3ff8095](http://example.com/highscores.php?score=500&checksum=0a16df3dc0301a36a34f9065c3ff8095)**

计算此校验和时，应使用共享密钥；这个秘密不应该通过网络传输，而应该在 PHP 后端和 flash 前端中进行硬编码。上面的校验和是通过在分数“ **500** ”前面加上字符串“ **secret** ” ，并通过 md5sum 运行它来创建的。

 **尽管该系统会阻止用户发布任意分数，但它不会阻止“重放攻击”，即用户重新发布先前计算的分数和哈希组合。在上面的示例中，500 分总是会产生相同的哈希字符串。通过在要散列的字符串中加入更多信息（例如用户名、时间戳或 IP 地址），可以减轻部分风险。虽然这不会阻止数据的重放，但它会确保一组数据一次只对单个用户有效。

为了防止**任何**重放攻击的发生，必须创建某种类型的挑战-响应系统，例如：

1.  Flash 游戏（“客户端”）执行不带参数的**[http://example.com/highscores.php](http://example.com/highscores.php)**的 HTTP GET 。此页面返回两个值：一个随机生成的*盐*值，以及该盐值与共享密钥相结合的加密哈希。这个盐值应该存储在一个本地的待处理查询数据库中，并且应该有一个与之关联的时间戳，以便它可以在一分钟后“过期”。
2.  Flash 游戏将盐值与共享密钥结合起来，并计算一个哈希值来验证它是否与服务器提供的值相匹配。这一步对于防止用户篡改盐值是必要的，因为它验证盐值实际上是由服务器生成的。
3.  Flash 游戏将盐值与共享密钥、高分值和任何其他相关信息（昵称、ip、时间戳）结合起来，并计算哈希值。然后，它通过 HTTP GET 或 POST 将此信息连同盐值、高分和其他信息一起发送回 PHP 后端。
4.  服务器以与客户端相同的方式组合接收到的信息，并计算一个哈希值以验证这与客户端提供的信息是否匹配。然后它还会验证挂起查询列表中列出的盐值是否仍然有效。如果这两个条件都为真，它将高分写入高分表并向客户端返回一个签名的“成功”消息。它还会从待处理的查询列表中删除盐值。

**请记住，如果用户可以访问共享密钥，则上述任何技术的安全性都会受到损害**

作为替代方案，可以通过强制客户端通过 HTTPS 与服务器通信并确保客户端预配置为仅信任由您单独有权访问的特定证书颁发机构签名的证书来避免这种来回操作.

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-09-17T02:47:13.760

我喜欢 tpqf 所说的，但与其在发现作弊时禁用帐户，不如实施一个蜜罐，这样每当他们登录时，他们就会看到他们被黑的分数，并且永远不会怀疑他们被标记为巨魔。谷歌搜索“phpBB MOD Troll”，您会看到一种巧妙的方法。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-08-18T16:03:23.903

在接受的答案中，tqbf 提到您可以对分数变量进行内存搜索（“我的分数是 666，所以我在内存中查找数字 666”）。

有办法解决这个问题。我在这里有一堂课：http: [//divillysausages.com/blog/safenumber_and_safeint](http://divillysausages.com/blog/safenumber_and_safeint)

基本上，您有一个对象来存储您的分数。在 setter 中，它将传递给它的值与随机数（+ 和 -）相乘，在 getter 中，您将保存的值除以随机乘数以获取原始值。这很简单，但有助于停止内存搜索。

此外，请查看 PushButton 引擎背后的一些人的视频，他们谈论了一些可以对抗黑客攻击的不同方法：http: [//zaa.tv/2010/12/the-art-of-hacking-flash-游戏/](http://zaa.tv/2010/12/the-art-of-hacking-flash-games/) . 他们是课程背后的灵感。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-08-01T12:48:57.277

我做了一种解决方法......我给了分数增加的地方（你总是得到+1分）。首先，我从随机数开始计数（比如说 14 ），当我显示分数时，只显示分数 var 减 14。如果饼干正在寻找例如 20，他们将找不到它（它将是 34 在内存中）。其次，因为我知道下一个点应该是什么......我使用 adobe 加密库来创建下一个点**应该是什么的哈希**. 当我必须增加分数时，我检查增加的分数的哈希值是否等于应该的哈希值。如果破解者更改了内存中的点，则哈希值不相等。我执行了一些服务器端验证，当我从游戏和 PHP 中获得不同的分数时，我知道涉及作弊。这是我的代码片段（我正在使用 Adob​​e Crypto libraty MD5 类和随机加密盐。callPhp() 是我的服务器端验证）

```
private function addPoint(event:Event = null):void{
            trace("expectedHash: " + expectedHash + "  || new hash: " + MD5.hash( Number(SCORES + POINT).toString() + expectedHashSalt) );
            if(expectedHash == MD5.hash( Number(SCORES + POINT).toString() + expectedHashSalt)){
                SCORES +=POINT;
                callPhp();
                expectedHash = MD5.hash( Number(SCORES + POINT).toString() + expectedHashSalt);
            } else {
                //trace("cheat engine usage");
            }
        } 
```

使用这种技术 + SWF 混淆，我能够阻止饼干。此外，当我将分数发送到服务器端时，我使用自己的小型加密/解密功能。像这样的东西（不包括服务器端代码，但你可以看到算法并用 PHP 编写）：

```
package  {

    import bassta.utils.Hash;

    public class ScoresEncoder {

        private static var ranChars:Array;
        private static var charsTable:Hash;

        public function ScoresEncoder() {

        }

        public static function init():void{

            ranChars = String("qwertyuiopasdfghjklzxcvbnm").split("")

            charsTable = new Hash({
                "0": "x",
                "1": "f",
                "2": "q",
                "3": "z",
                "4": "a",
                "5": "o",
                "6": "n",
                "7": "p",
                "8": "w",
                "9": "y"

            });

        }

        public static function encodeScore(_s:Number):String{

            var _fin:String = "";

            var scores:String = addLeadingZeros(_s);
            for(var i:uint = 0; i< scores.length; i++){
                //trace( scores.charAt(i) + " - > " + charsTable[ scores.charAt(i) ] );
                _fin += charsTable[ scores.charAt(i) ];
            }

            return _fin;

        }

        public static function decodeScore(_s:String):String{

            var _fin:String = "";

            var decoded:String = _s;

            for(var i:uint = 0; i< decoded.length; i++){
                //trace( decoded.charAt(i) + " - > "  + charsTable.getKey( decoded.charAt(i) ) );
                _fin += charsTable.getKey( decoded.charAt(i) );
            }

            return _fin;

        }

        public static function encodeScoreRand(_s:Number):String{
            var _fin:String = "";

            _fin += generateRandomChars(10) + encodeScore(_s) + generateRandomChars(3)

            return _fin;
        }

        public static function decodeScoreRand(_s:String):Number{

            var decodedString:String = _s;
            var decoded:Number;

            decodedString = decodedString.substring(10,13);         
            decodedString = decodeScore(decodedString);

            decoded = Number(decodedString);

            return decoded;
        }

        public static function generateRandomChars(_length:Number):String{

            var newRandChars:String = "";

            for(var i:uint = 0; i< _length; i++){
                newRandChars+= ranChars[ Math.ceil( Math.random()*ranChars.length-1 )];
            }

            return newRandChars;
        }

        private static function addLeadingZeros(_s:Number):String{

            var _fin:String;

            if(_s < 10 ){
                 _fin = "00" + _s.toString();
            }

            if(_s >= 10 && _s < 99 ) {
                 _fin = "0" + _s.toString();
            }

            if(_s >= 100 ) {
                _fin = _s.toString();
            }           

            return _fin;
        }

    }//end
} 
```

然后我将变量与其他假变量一起发送，它只是迷路了……对于小型 Flash 游戏来说，这是很多工作，但在涉及奖品的情况下，有些人会变得贪婪。如果您需要任何帮助，请给我留言。

干杯，伊科

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-16T16:11:38.017

使用已知（私有）可逆密钥进行加密将是最简单的方法。我并不完全支持 AS，所以我不确定有哪些类型的加密提供商。

但是您可以包含诸如游戏长度（再次加密）和点击次数之类的变量。

像这样的所有事情*都可以*进行逆向工程，所以考虑扔进一堆垃圾数据来让人们远离气味。

编辑：在一些 PHP 会话中也可能值得一试。当他们点击开始游戏并（正如这篇文章的评论所说）记录时间时开始会话。当他们提交分数时，您可以检查他们实际上有一个开放的游戏，并且他们提交的分数不会太快或太大。

可能值得计算一个标量，看看每秒/分钟的最高得分是多少。

这些事情都不是不可回避的，但是在人们可以看到的 Flash 中没有一些逻辑会有所帮助。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-01-05T17:04:30.340

根据我的经验，最好将其视为社会工程问题而不是编程问题。与其专注于让它不可能作弊，不如专注于通过消除作弊的动机来让它变得无聊。例如，如果主要动机是公开可见的高分，则只需延迟显示高分的时间就可以通过消除作弊者的积极反馈循环来显着减少作弊。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-05-23T17:46:07.800

您不能信任客户端返回的任何数据。验证需要在服务器端执行。我不是游戏开发者，但我做商业软件。在这两种情况下，都可能涉及金钱，人们会破坏客户端混淆技术。

也许会定期将数据发送回服务器并进行一些验证。不要专注于客户端代码，即使那是您的应用程序所在的位置。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-16T16:11:58.420

每当您的高分系统基于 Flash 应用程序通过网络发送未加密/未签名的高分数据这一事实时，这些数据都可以被拦截和操纵/重放。答案由此而来：加密（体面！）或加密签名高分数据。这至少使人们更难破解您的高分系统，因为他们需要从您的 SWF 文件中提取密钥。许多人可能会在那里放弃。另一方面，只需要一个人提取密钥并将其发布到某个地方。

真正的解决方案涉及 Flash 应用程序和高分数据库之间的更多通信，以便后者可以验证给定分数是否有点现实。这可能很复杂，具体取决于您拥有的游戏类型。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-16T16:17:20.187

没有办法让它完全无法破解，因为它很容易反编译 SWF，然后熟练的开发者黑客可以追踪您的代码并找出如何绕过您可能使用的任何加密系统。

如果您只是想通过使用简单的工具（如 TamperData）来阻止孩子作弊，那么您可以生成一个加密密钥，在启动时将其传递给 SWF。[然后使用http://code.google.com/p/as3crypto/](http://code.google.com/p/as3crypto/)之类的东西来加密高分，然后再将其传回 PHP 代码。然后在服务器端对其进行解密，然后将其存储到数据库中。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-16T16:55:33.857

您正在谈论所谓的“客户信任”问题。因为客户端（在这个现金中，一个在浏览器中运行的 SWF）正在做一些它被设计做的事情。保存高分。

问题是您要确保“保存分数”请求来自您的 Flash 电影，而不是一些任意的 HTTP 请求。[一个可能的解决方案是在请求时（使用flasm](http://flasm.sourceforge.net/) ）将服务器生成的令牌编码到 SWF 中，该令牌必须伴随请求以保存高分。一旦服务器保存了该分数，令牌就会过期并且不能再用于请求。

这样做的缺点是用户每次加载 Flash 电影时只能提交一个高分 - 您必须强制他们刷新/重新加载 SWF，然后才能再次播放以获得新分数。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-01-05T14:53:14.787

我通常在高分条目中包含游戏会话的“幽灵数据”。因此，如果我正在制作赛车游戏，我会包含重播数据。您通常已经拥有重播功能或幽灵赛车功能的重播数据（与您的最后一场比赛比赛，或与排行榜上第 14 号的鬼魂比赛）。

检查这些是非常体力劳动，但如果目标是验证比赛中的前 10 名条目是否合法，这可能是对其他人已经指出的安全措施库的有用补充。

如果目标是将高分列表保持在网上直到时间结束，而无需任何人查看，那么这不会给您带来太多好处。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2010-01-05T03:31:38.987

一个新的流行街机模组的做法是将数据从 Flash 发送到 php，然后返回到 Flash（或重新加载），然后返回到 php。这使您可以做任何您想做的事情来比较数据以及绕过发布数据/解密黑客等。这样做的一种方法是将 2 个随机值从 php 分配到闪存中（即使运行实时闪存数据采集器，您也无法抓取或查看），使用数学公式将分数与随机值相加，然后使用检查它相同的公式来反转它以查看分数是否匹配它，当它最终到达 php 时。这些随机值永远不可见，它还会计算交易发生的时间，如果它'

如果你问我，这似乎是一个很好的解决方案，有人看到使用这种方法有什么问题吗？或者可能的解决方法？

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2012-01-18T18:03:06.297

我认为最简单的方法是每次游戏注册要添加的分数时调用像 RegisterScore(score) 这样的函数，然后对其进行编码、打包并将其作为字符串发送到 php 脚本。php 脚本会知道如何正确解码。这将停止对 php 脚本的任何直接调用，因为任何强制得分的尝试都会导致解压缩错误。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2012-03-06T19:29:53.770

只有将**所有游戏逻辑保留在服务器端**，服务器端也可以在用户不知情的情况下在内部存储分数。出于经济和科学的原因，人类不能将此理论应用于除回合制以外的所有游戏类型。例如，将物理保存在服务器端的计算成本很高，并且很难像手速一样做出响应。甚至有可能，在下棋时，任何人都可以将 AI 国际象棋游戏与对手相匹配。因此，更好的**多人游戏**也应该包含点播创意。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-09-16T16:27:55.293

真的不可能实现你想要的。Flash 应用程序的内部总是部分可访问的，尤其是当您知道如何使用[CheatEngine 之](http://www.cheatengine.org/)类的东西时，这意味着无论您的网站和浏览器<->服务器通信多么安全，克服它仍然相对简单。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-05-13T22:17:15.497

通过[AMFPHP](http://www.silexlabs.org/amfphp/)与后端通信可能是个好主意。它至少应该阻止懒惰的人尝试通过浏览器控制台推送结果。

# c# - Combine PDFs c#

> ID：73950
> 
> 赞同：18
> 
> 时间：2008-09-16T16:01:40.630
> 
> 标签：c#, pdf-generation

How can I combine multiple PDFs into one PDF without a 3rd party component?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-09-16T16:12:27.470

我不认为你可以。开源组件 PDFSharp 具有该功能，以及一个很好[的文件组合源代码示例](http://www.pdfsharp.com/PDFsharp/index.php?option=com_content&task=view&id=24&Itemid=35 "源样本")

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-16T16:08:33.563

.NET Framework 不包含修改/创建 PDF 的功能。您需要一个 3rd 方组件来完成您正在寻找的东西。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T16:16:31.733

正如其他人所说，没有内置的东西可以完成这项任务。将[iTextSharp](http://itextsharp.sourceforge.net/)与此[示例代码](http://www.steedsoft.com/itextsharp/tutorial01/ap01Concat.cs.html)一起使用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-16T16:05:39.140

AFAIK C# has no built-in support for handling PDF so what you are asking can not be done without using a 3rd party component or a COTS library.

Regarding libraries there is a myriad of possibilities. Just to point a few:

[http://csharp-source.net/open-source/pdf-libraries](http://csharp-source.net/open-source/pdf-libraries)

[http://www.codeproject.com/KB/graphics/giospdfnetlibrary.aspx](http://www.codeproject.com/KB/graphics/giospdfnetlibrary.aspx)

[http://www.pdftron.com/net/index.html](http://www.pdftron.com/net/index.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-03T04:54:28.433

我不认为 .NET Framework 包含这样的库。我使用 iTextsharp 和 c# 来组合 pdf 文件。我认为 iTextsharp 是最简单的方法。这是我使用的代码。

```
string[] lstFiles=new string[3];
    lstFiles[0]=@"C:/pdf/1.pdf";
    lstFiles[1]=@"C:/pdf/2.pdf";
    lstFiles[2]=@"C:/pdf/3.pdf";

    PdfReader reader = null;
    Document sourceDocument = null;
    PdfCopy pdfCopyProvider = null;
    PdfImportedPage importedPage;
    string outputPdfPath=@"C:/pdf/new.pdf";

    sourceDocument = new Document();
    pdfCopyProvider = new PdfCopy(sourceDocument, new System.IO.FileStream(outputPdfPath, System.IO.FileMode.Create));

    //Open the output file
    sourceDocument.Open();

    try
    {
        //Loop through the files list
        for (int f = 0; f < lstFiles.Length-1; f++)
        {
            int pages =get_pageCcount(lstFiles[f]);

            reader = new PdfReader(lstFiles[f]);
            //Add pages of current file
            for (int i = 1; i <= pages; i++)
            {
                importedPage = pdfCopyProvider.GetImportedPage(reader, i);
                pdfCopyProvider.AddPage(importedPage);
            }

            reader.Close();
         }
        //At the end save the output file
        sourceDocument.Close();
    }
    catch (Exception ex)
    {
        throw ex;
    }

private int get_pageCcount(string file)
{
    using (StreamReader sr = new StreamReader(File.OpenRead(file)))
    {
        Regex regex = new Regex(@"/Type\s*/Page[^s]");
        MatchCollection matches = regex.Matches(sr.ReadToEnd());

        return matches.Count;
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-09-16T16:20:56.887

尽管已经说过，您不能使用 .NET Framework 的内置库来操作 PDF。不过我可以推荐[iTextSharp](http://itextsharp.sourceforge.net/)，它是 Java iText 的 .NET 端口。我玩过它，发现它是一个非常容易使用的工具。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-09-16T16:33:25.983

[ITextSharp](http://itextsharp.sourceforge.net/)是要走的路

# linux - Change IP address via shellscript on Slackware

> ID：73958
> 
> 赞同：1
> 
> 时间：2008-09-16T16:02:27.167
> 
> 标签：linux, shell, ip

In a shellscript, I'd like to set the IP of my box, run a command, then move to the next IP. The IPs are an entire C block.

The question is how do I set the IP of the box without editing a file? What command sets the IP on Slackware?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T18:07:43.807

如其他答案中所述，您可以使用 ifconfig 命令或 ip 命令。ip 是一个更强大的命令，我更喜欢使用它。一个完整的脚本循环通过一个完整的 C 类子网添加 IP，做一些事情，然后删除它。请注意，它不使用 .0 或 .255，它们是子网的网络和广播地址。此外，当使用 ip 命令添加或删除地址时，最好也包括掩码宽度（地址末尾的 /24）。

```
#!/bin/bash
SUBNET=192.168.135.
ETH=eth0

for i in {1..254}
do
  ip addr add ${SUBNET}${i}/24 dev ${ETH}

  # do whatever you want here

  ip addr del ${SUBNET}${i}/24 dev ${ETH}
done
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-16T16:09:16.510

它应该是这样的：`ifconfig eth0 192.168.0.42 up`

用你网卡的网络接口替换eth0，显然ip地址适应你的需要，up只需要一次，但如果你每次运行它也没有什么坏处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T16:11:25.147

我不太了解 Slackware，我上次使用它是在十年前。然而，任何主流的 Linux 发行版都应该有“ifconfig”程序或“ip”程序或两者都有。你需要拥有root权限，所以要么成为root（例如使用su），要么使用'sudo'程序，如果你知道怎么做的话。让我们先用'ip'来做。

```
ip addr add 10.1.2.3 dev eth0 
```

将设备 eth0（通常是主有线网络适配器）设置为 IP 地址 10.1.2.3。完成后，您可以再次从此适配器中删除地址...

```
ip addr del 10.1.2.3 dev eth0 
```

ifconfig 的工作方式有点不同，

```
ifconfig eth0 10.1.2.3 netmask 255.255.255.0 
```

再次设置设备 eth0，IP 地址为 10.1.2.3

根据您想要这些地址的用途，您可能还需要知道如何设置手动路由，以便您的 IP 数据包实际上可以传送到任何目的地。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-21T04:10:36.287

在一行中，例如： ifconfig eth0 192.168.10.12 netmask 255.255.255.0

# javascript - IE中的下拉列表宽度

> ID：73960
> 
> 赞同：92
> 
> 时间：2008-09-16T16:02:41.610
> 
> 标签：javascript, html, internet-explorer, drop-down-menu

在 IE 中，下拉列表的宽度与下拉框的宽度相同（我希望我说得通），而在 Firefox 中，下拉列表的宽度根据内容而有所不同。

这基本上意味着我必须确保保管箱足够宽以显示可能最长的选择。这使我的页面看起来很丑:(

这个问题有什么解决方法吗？如何使用 CSS 为下拉框和下拉列表设置不同的宽度？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2010-03-25T14:58:32.333

这是另一个基于[jQuery](http://jquery.com)的示例。与此处发布的所有其他答案相反，它考虑了所有键盘和鼠标事件，尤其是点击：

```
if (!$.support.leadingWhitespace) { // if IE6/7/8
    $('select.wide')
        .bind('focus mouseover', function() { $(this).addClass('expand').removeClass('clicked'); })
        .bind('click', function() { $(this).toggleClass('clicked'); })
        .bind('mouseout', function() { if (!$(this).hasClass('clicked')) { $(this).removeClass('expand'); }})
        .bind('blur', function() { $(this).removeClass('expand clicked'); });
} 
```

将它与这段 CSS 结合使用：

```
select {
    width: 150px; /* Or whatever width you want. */
}
select.expand {
    width: auto;
} 
```

您需要做的就是将类添加`wide`到相关的下拉元素中。

```
<select class="wide">
    ...
</select> 
```

[这是一个 jsfiddle 示例](http://jsfiddle.net/HnV9Q/)。希望这可以帮助。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-09-16T17:00:15.293

创建自己的下拉列表比它的价值更痛苦。您可以使用一些 JavaScript 来使 IE 下拉菜单工作。

它使用了一些 YUI 库和一个特殊的扩展来修复 IE 选择框。

您将需要包括以下内容并将您的`<select>`元素包装在`<span class="select-box">`

将这些放在页面的正文标记之前：

```
<script src="http://us.js2.yimg.com/us.js.yimg.com/lib/common/utils/2/yahoo_2.0.0-b3.js" type="text/javascript">
</script>
<script src="http://us.js2.yimg.com/us.js.yimg.com/lib/common/utils/2/event_2.0.0-b3.js" type="text/javascript">
</script>
<script src="http://us.js2.yimg.com/us.js.yimg.com/lib/common/utils/2/dom_2.0.2-b3.js" type="text/javascript">
</script>
<script src="ie-select-width-fix.js" type="text/javascript">
</script>
<script>
// for each select box you want to affect, apply this:
var s1 = new YAHOO.Hack.FixIESelectWidth( 's1' ); // s1 is the ID of the select box you want to affect
</script> 
```

接受后编辑：

您也可以在没有 YUI 库和 Hack 控件的情况下执行此操作。你真正需要做的就是在选择元素上放一个 onmouseover="this.style.width='auto'" onmouseout="this.style.width='100px'" （或任何你想要的）。YUI 控件为其提供了漂亮的动画，但这不是必需的。这个任务也可以用 jquery 和其他库来完成（虽然，我还没有找到明确的文档）

-- 对编辑的修正：
IE 在选择控件的 onmouseout 上有问题（它不认为鼠标悬停在选项上是鼠标悬停在选择上）。这使得使用鼠标悬停非常棘手。第一个解决方案是迄今为止我发现的最好的解决方案。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2010-06-03T19:48:38.367

您可以尝试以下...

```
 styleClass="someStyleWidth"
  onmousedown="javascript:if(navigator.appName=='Microsoft Internet Explorer'){this.style.position='absolute';this.style.width='auto'}" 
  onblur="this.style.position='';this.style.width=''" 
```

我试过了，它对我有用。没有其他要求。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-09-05T17:31:03.760

我使用了以下解决方案，它似乎在大多数情况下都能正常工作。

```
<style>
select{width:100px}
</style>

<html>
<select onmousedown="if($.browser.msie){this.style.position='absolute';this.style.width='auto'}" onblur="this.style.position='';this.style.width=''">
  <option>One</option>
  <option>Two - A long option that gets cut off in IE</option>
</select>
</html> 
```

* * *

注意：*$.browser.msie*确实需要 jquery。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-06-24T08:19:44.147

@Thad 您还需要添加一个模糊事件处理程序

```
$(document).ready(function(){
    $("#dropdown").mousedown(function(){
        if($.browser.msie) {
            $(this).css("width","auto");
        }
    });
    $("#dropdown").change(function(){
        if ($.browser.msie) {
            $(this).css("width","175px");
        }
    });
    $("#dropdown").blur(function(){
        if ($.browser.msie) {
            $(this).css("width","175px");
        }
    });
}); 
```

但是，这仍然会在单击时展开选择框，而不仅仅是元素。（它似乎在 IE6 中失败，但在 Chrome 和 IE7 中完美运行）

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-16T16:19:00.620

在 IE6/IE7/IE8 中没有办法做到这一点。该控件由应用程序绘制，而 IE 根本不会那样绘制它。最好的办法是通过简单的 HTML/CSS/JavaScript 实现自己的下拉菜单，如果下拉菜单的宽度和列表的宽度很重要的话。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2010-09-21T11:50:10.667

如果你使用 jQuery，那么试试这个 IE 选择宽度插件：

[http://www.jainaewen.com/files/javascript/jquery/ie-select-style/](http://www.jainaewen.com/files/javascript/jquery/ie-select-style/)

应用此插件使 Internet Explorer 中的选择框看起来像在 Firefox、Opera 等中一样工作，允许选项元素以全宽打开，而不会丢失固定宽度的外观和样式。它还增加了对 Internet Explorer 6 和 7 中选择框的填充和边框的支持。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-05-26T20:05:01.087

在 jQuery 中，这工作得相当好。假设下拉列表具有 id="dropdown"。

```
$(document).ready(function(){

    $("#dropdown").mousedown(function(){
    if($.browser.msie) {
        $(this).css("width","auto");
    }
    });
    $("#dropdown").change(function(){
    if ($.browser.msie) {
        $(this).css("width","175px");
    }
    });

}); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-10-14T20:42:34.190

这是最简单的解决方案。

在开始之前，我必须告诉你下拉选择框会在几乎所有浏览器中自动展开，除了 IE6。因此，我会进行浏览器检查（即 IE6）并将以下内容仅写入该浏览器。就这样吧。首先检查浏览器。

该代码将神奇地扩展下拉选择框。该解决方案的唯一问题是 onmouseover 下拉菜单将被扩展为 420px，并且因为 overflow = hidden 我们隐藏了扩展的下拉菜单大小并将其显示为 170px；因此，ddl右侧的箭头将被隐藏，无法看到。但是选择框会扩大到420px；这是我们真正想要的。自己试试下面的代码，如果你喜欢就使用它。

```
.ctrDropDown
{
    width:420px; <%--this is the actual width of the dropdown list--%>
}
.ctrDropDownClick
{
    width:420px; <%-- this the width of the dropdown select box.--%>
}

<div style="width:170px; overflow:hidden;">
<asp:DropDownList runat="server" ID="ddlApplication" onmouseout = "this.className='ctrDropDown';" onmouseover ="this.className='ctrDropDownClick';" class="ctrDropDown" onBlur="this.className='ctrDropDown';" onMouseDown="this.className='ctrDropDownClick';" onChange="this.className='ctrDropDown';"></asp:DropDownList>
</div> 
```

以上是IE6 CSS。所有其他浏览器的通用 CSS 应如下所示。

```
.ctrDropDown
{
    width:170px; <%--this is the actual width of the dropdown list--%>
}
.ctrDropDownClick
{
    width:auto; <%-- this the width of the dropdown select box.--%>
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-12-09T17:32:48.133

如果您想要一个没有过渡效果的简单下拉菜单和/或弹出菜单，只需使用 CSS...您可以强制 IE6 支持 :hover 使用 .htc 文件（css3hover？）在所有元素上定义的行为（仅限 IE6 属性）有条件附加的 CSS 文件。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2010-06-15T19:05:42.717

看看这个..它并不完美，但它可以工作，它只适用于 IE，不会影响 FF。我使用常规 javascript 进行 onmousedown 来建立 IE 仅修复.. 但是来自 jquery 的 msie 也可以在 onmousedown 中使用.. 主要思想是“onchange”和模糊以使选择框恢复正常.. . 决定你自己的宽度。我需要 35%。

```
onmousedown="javascript:if(navigator.appName=='Microsoft Internet Explorer'){this.style.width='auto'}" 
onchange="this.style.width='35%'"
onblur="this.style.width='35%'" 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2010-08-16T16:04:44.493

BalusC 上面的回答效果很好，但是如果下拉列表的内容的宽度小于您在 CSS select.expand 中定义的宽度，我会添加一个小修复，将其添加到鼠标悬停绑定中：

```
.bind('mouseover', function() { $(this).addClass('expand').removeClass('clicked');
                                if ($(this).width() < 300) // put your desired minwidth here
                                {
                                    $(this).removeClass('expand');
                                }}) 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2011-06-17T17:20:21.800

这是我从其他人的东西中提取的东西。

```
 $(document).ready(function () {
        if (document.all) {

            $('#<%=cboDisability.ClientID %>').mousedown(function () {
                $('#<%=cboDisability.ClientID %>').css({ 'width': 'auto' });
            });

            $('#<%=cboDisability.ClientID %>').blur(function () {
                $(this).css({ 'width': '208px' });
            });

            $('#<%=cboDisability.ClientID %>').change(function () {
                $('#<%=cboDisability.ClientID %>').css({ 'width': '208px' });
            });

            $('#<%=cboEthnicity.ClientID %>').mousedown(function () {
                $('#<%=cboEthnicity.ClientID %>').css({ 'width': 'auto' });
            });

            $('#<%=cboEthnicity.ClientID %>').blur(function () {
                $(this).css({ 'width': '208px' });
            });

            $('#<%=cboEthnicity.ClientID %>').change(function () {
                $('#<%=cboEthnicity.ClientID %>').css({ 'width': '208px' });
            });

        }
    }); 
```

其中 cboEthnicity 和 cboDisability 是下拉菜单，其选项文本比选择本身的宽度更宽。

如您所见，我指定了 document.all，因为这仅适用于 IE。此外，l 将下拉列表封装在 div 元素中，如下所示：

```
<div id="dvEthnicity" style="width: 208px; overflow: hidden; position: relative; float: right;"><asp:DropDownList CssClass="select" ID="cboEthnicity" runat="server" DataTextField="description" DataValueField="id" Width="200px"></asp:DropDownList></div> 
```

当您的下拉菜单展开时，这会处理其他元素移出的位置。这里唯一的缺点是菜单列表视觉在您选择时消失，但在您选择后立即返回。

希望这可以帮助某人。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2012-02-02T16:03:16.383

这是最好的方法：

```
select:focus{
    min-width:165px;
    width:auto;
    z-index:9999999999;
    position:absolute;
} 
```

它与 BalusC 解决方案完全相同。只有这样更容易。;)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2012-08-20T11:47:53.107

一个完整的 jQuery 插件可用。它支持不间断的布局和键盘交互，查看演示页面： http: [//powerkiki.github.com/ie_expand_select_width/](http://powerkiki.github.com/ie_expand_select_width/)

免责声明：我编写了那个东西，欢迎使用补丁

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-12-09T11:53:18.430

[http://developer.yahoo.com/yui/examples/button/button-menu-select.html#](http://developer.yahoo.com/yui/examples/button/button-menu-select.html#)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2011-09-05T19:28:13.067

jquery BalusC 的解决方案由我改进。也使用：布拉德罗伯逊的[评论在这里](http://doctype.com/ie7-width-overrides-minwidth-select)。

只需将它放在 .js 中，使用宽类来获得所需的组合，不要伪造给它一个 ID。调用 onload 中的函数（或 documentReady 或其他）。
就这么简单:)
它将使用您为组合定义的宽度作为最小长度。

```
function fixIeCombos() {
    if ($.browser.msie && $.browser.version < 9) {
    var style = $('<style>select.expand { width: auto; }</style>');
    $('html > head').append(style);

    var defaultWidth = "200";

    // get predefined combo's widths.
    var widths = new Array();
    $('select.wide').each(function() {
        var width = $(this).width();
        if (!width) {
        width = defaultWidth;
        }
        widths[$(this).attr('id')] = width;
    });

    $('select.wide')
    .bind('focus mouseover', function() {
        // We're going to do the expansion only if the resultant size is bigger
        // than the original size of the combo.
        // In order to find out the resultant size, we first clon the combo as
        // a hidden element, add to the dom, and then test the width.
        var originalWidth = widths[$(this).attr('id')];

        var $selectClone = $(this).clone();
        $selectClone.addClass('expand').hide();
        $(this).after( $selectClone );
        var expandedWidth = $selectClone.width()
        $selectClone.remove();
        if (expandedWidth > originalWidth) {
        $(this).addClass('expand').removeClass('clicked');
        }
    })
    .bind('click', function() {
        $(this).toggleClass('clicked'); 
    })
    .bind('mouseout', function() {
        if (!$(this).hasClass('clicked')) {
        $(this).removeClass('expand');
        }
    })
    .bind('blur', function() {
        $(this).removeClass('expand clicked');
    })
    }
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-16T16:11:37.393

您可以直接向 select 元素添加样式：

`<select name="foo" style="width: 200px">`

所以这个选择项将是 200 像素宽。

或者，您可以将类或 id 应用于元素并在样式表中引用它

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-16T16:15:24.247

到目前为止还没有。不了解 IE8，但不能在 IE6 和 IE7 中完成，除非您使用 javascript 实现自己的下拉列表功能。虽然我认为复制现有功能并没有多大好处，但网上有一些示例如何做到这一点。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-04-03T15:57:54.360

我们在 asp:dropdownlist 上有同样的东西：

在 Firefox(3.0.5) 中，下拉列表是下拉列表中最长项目的宽度，例如 600 像素宽或类似的宽度。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2010-07-01T19:48:43.313

第一个最佳答案中的hedgerwow 链接（YUI 动画解决方法）已损坏，我猜该域已过期。我在过期之前复制了代码，所以你可以在这里找到它（代码所有者可以让我知道我是否通过再次上传侵犯了任何版权）

[http://ciitronian.com/blog/programming/yui-button-mimicking-native-select-dropdown-avoid-width-problem/](http://ciitronian.com/blog/programming/yui-button-mimicking-native-select-dropdown-avoid-width-problem/)

在同一篇博客文章中，我写了关于使用 YUI 按钮菜单制作与普通元素完全相同的 SELECT 元素。看看，让我知道这是否有帮助！

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2010-07-21T19:46:40.437

这似乎适用于 IE6，并且似乎不会破坏其他人。另一个好处是，一旦您更改下拉选择，它就会自动更改菜单。

```
$(document).ready(function(){
    $("#dropdown").mouseover(function(){
        if($.browser.msie) {
            $(this).css("width","auto");
        }
    });
    $("#dropdown").change(function(){
        if ($.browser.msie) {
            $("#dropdown").trigger("mouseover");
        }
    });

}); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2011-10-05T09:56:05.867

根据[Sai](https://stackoverflow.com/questions/73960/dropdownlist-width-in-ie/2969250#2969250)发布的解决方案，这是使用 jQuery 的方法。

```
$(document).ready(function() {
    if ($.browser.msie) $('select.wide')
        .bind('onmousedown', function() { $(this).css({position:'absolute',width:'auto'}); })
        .bind('blur', function() { $(this).css({position:'static',width:''}); });
}); 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2012-02-08T20:07:47.190

我想我会把我的帽子扔进擂台。我制作了一个 SaaS 应用程序，并且在表格中嵌入了一个选择菜单。这种方法有效，但它歪曲了表格中的所有内容。

```
onmousedown="if(navigator.appName=='Microsoft Internet Explorer'){this.style.position='absolute';this.style.width='auto'}
onblur="if(navigator.appName=='Microsoft Internet Explorer'){this.style.position=''; this.style.width= '225px';}" 
```

因此，为了让一切变得更好，我所做的就是将选择放在一个 z 索引的 div 中。

```
<td valign="top" style="width:225px; overflow:hidden;">
    <div style="position: absolute; z-index: 5;" onmousedown="var select = document.getElementById('select'); if(navigator.appName=='Microsoft Internet Explorer'){select.style.position='absolute';select.style.width='auto'}">
        <select name="select_name" id="select" style="width: 225px;" onblur="if(navigator.appName=='Microsoft Internet Explorer'){this.style.position=''; this.style.width= '225px';}" onChange="reportFormValues('filter_<?=$job_id?>','form_values')">
            <option value="0">All</option>
            <!--More Options-->
        </select>
    </div>
</td> 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2012-05-08T11:47:45.040

已在所有版本的 IE、Chrome、FF 和 Safari 中测试

**JavaScript 代码：**

```
<!-- begin hiding
function expandSELECT(sel) {
  sel.style.width = '';
}

function contractSELECT(sel) {
  sel.style.width = '100px';
}
// end hiding --> 
```

**html代码：**

```
<select name="sideeffect" id="sideeffect"  style="width:100px;" onfocus="expandSELECT(this);" onblur="contractSELECT(this);" >
  <option value="0" selected="selected" readonly="readonly">Select</option>
  <option value="1" >Apple</option>
  <option value="2" >Orange + Banana + Grapes</option> 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2012-06-27T23:10:54.797

我不得不解决这个问题，并且曾经提出了一个非常完整且可扩展的解决方案，适用于 IE6、7 和 8（并且显然与其他浏览器兼容）。我在这里写了一篇关于它的整篇文章：[http ://www.edgeoftheworld.fr/wp/work/dealing-with-fixed-sized-dropdown-lists-in-internet-explorer](http://www.edgeoftheworld.fr/wp/work/dealing-with-fixed-sized-dropdown-lists-in-internet-explorer)

以为我会与仍然遇到此问题的人分享此内容，因为上述解决方案都不适用于每种情况（在我看来）。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2012-10-23T17:12:11.360

我尝试了所有这些解决方案，但没有一个完全适合我。这就是我想出的

```
$(document).ready(function () {

var clicknum = 0;

$('.dropdown').click(
        function() {
            clicknum++;
            if (clicknum == 2) {
                clicknum = 0;
                $(this).css('position', '');
                $(this).css('width', '');
            }
        }).blur(
        function() {
            $(this).css('position', '');
            $(this).css('width', '');
            clicknum = 0;
        }).focus(
        function() {
            $(this).css('position', 'relative');
            $(this).css('width', 'auto');
        }).mousedown(
        function() {
            $(this).css('position', 'relative');
            $(this).css('width', 'auto');
        });
})(jQuery); 
```

确保在 html 中的每个下拉列表中添加一个下拉类

这里的技巧是使用专门的点击功能（我在这里找到了[每次使用 jQuery 选择 DropDownList 项目时的 Fire 事件](https://stackoverflow.com/questions/898463/fire-event-each-time-a-dropdownlist-item-is-selected-with-jquery)）。此处的许多其他解决方案都使用了事件处理程序更改，它运行良好，但如果用户选择与先前选择的选项相同的选项，则不会触发。

与许多其他解决方案一样，focus 和 mousedown 用于当用户将下拉菜单置于焦点时，blur 用于当他们点击离开时。

您可能还想在其中添加某种浏览器检测，因此它只会影响 ie。不过在其他浏览器中看起来还不错

# pdf - 如何将 ColdFusion 页面转换为 PDF 下载？

> ID：73964
> 
> 赞同：14
> 
> 时间：2008-09-16T16:03:04.310
> 
> 标签：pdf, coldfusion

我想将我的 CFM 页面生成的 HTML 转换为 PDF，并在导航到我的页面时让用户使用标准的“另存为”提示进行提示。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-16T16:43:10.407

您应该使用 cfdocument 标记（带有 format="PDF"）通过将 PDF 放置在您正在生成的页面周围来生成 PDF。您需要指定文件名属性，否则文档将直接流式传输到您的浏览器。

将内容保存为 PDF 后，结合使用 cfheader 和 cfcontent 将 PDF 输出为附件（“另存为”）并将文件添加到响应流中。我还在 cfcontent 标记上添加了 deletefile="Yes" 以保持文件系统中的文件干净。

```
<cfdocument format="PDF" filename="file.pdf" overwrite="Yes">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <title>Hello World</title>
</head>
<body>
    Hello World
</body>
</html>
</cfdocument>
<cfheader name="Content-Disposition" value="attachment;filename=file.pdf">
<cfcontent type="application/octet-stream" file="#expandPath('.')#\file.pdf" deletefile="Yes"> 
```

顺便说一句：我只是在下面的示例中使用 file.pdf 作为文件名，但您可能希望对文件名使用一些随机或会话生成的字符串，以避免因竞争条件导致的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-16T17:59:32.720

如果您想完全避免存储 PDF，使用不带文件名的 cfdocument 将直接将 pdf（Flashpaper）发送到浏览器，而不使用 cfheader 和 cfcontent。

警告：与使用 cfheader/cfcontent 一样，您需要在缓存刷新到浏览器之前执行此操作，因为它基本上是在执行相同的操作而无需存储文件。

要获取内容，我可能会使用 cfsavecontent 包裹相同的调用/包含/等。生成页面，但有两个主要例外。cfdocument 似乎与外部样式表存在问题，因此使用包含将样式直接放入文档可能是个好主意。您可以尝试使用 @import 代替 - 它适用于某些人。另外，我会小心与图像的相对链接，因为它们有时会中断。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-17T22:22:07.900

The `<cfdocument>` approach is the sanctioned way to get it done, however it does not offer everything possible in the way of manipulating existing PDF documents. I had a project where I needed to generate coupons based using a pre-designed, print-resolution PDF template. `<cfdocument>` would have let me approximate the output, but only with bitmap images embedded in HTML. True, I could fake print-resolution by making a large image and scaling it in HTML, but the original was a nice, clean, vector-image file and I wanted to use that instead.

I ended up using a copy of `<cfx_pdf>` to get the job done. ([Developer's Site](http://www.easel2.com/), [CF Tag Store](http://www.cftagstore.com/tags/cfxpdf.cfm)) It's a CF wrapper around a Java PDF library that lets you manipulate existing PDF documents, including filling out PDF forms, setting permissions, merging files, drawing vector graphics, tables, and text, use custom fonts, etc, etc. If you are willing to work with it, you can get some pretty spectacular results.

The one drawback is that it appears the developer has left this product out to pasture for a long time. The developer site is still copyright 2003 and doesn't mention anything past ColdFusion MX 6.1\. I ended up having to break some of the encrypted templates in order to fix a couple of bugs and make it work as I needed it to. Nontheless, it is a powerful tool.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T16:05:04.803

我对 ColdFusion 不是很熟悉，但是您需要做的是在用户请求它为 application/octet-stream 时设置页面的 Content-Type。这将提示他们每次下载。

希望这可以帮助！

# javascript - 使用 Javascript，如何确保日期范围有效？

> ID：73971
> 
> 赞同：15
> 
> 时间：2008-09-16T16:03:33.713
> 
> 标签：javascript, validation, date

在 JavaScript 中，确定提供的日期是否在有效范围内的最佳方法是什么？

这方面的一个例子可能是检查用户输入`requestedDate`是否是下一个有效工作周的一部分。请注意，这不仅仅是检查一个日期是否大于另一个日期，因为有效日期将等于或大于范围的下限，而小于或等于范围的上限。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-16T16:09:29.783

这实际上是我在工作中经常遇到的一个问题，下面的代码是我对这个问题的回答。

```
// checkDateRange - Checks to ensure that the values entered are dates and 
//     are of a valid range. By this, the dates must be no more than the 
//     built-in number of days appart.
function checkDateRange(start, end) {
   // Parse the entries
   var startDate = Date.parse(start);
   var endDate = Date.parse(end);
   // Make sure they are valid
    if (isNaN(startDate)) {
      alert("The start date provided is not valid, please enter a valid date.");
      return false;
   }
   if (isNaN(endDate)) {
       alert("The end date provided is not valid, please enter a valid date.");
       return false;
   }
   // Check the date range, 86400000 is the number of milliseconds in one day
   var difference = (endDate - startDate) / (86400000 * 7);
   if (difference < 0) {
       alert("The start date must come before the end date.");
       return false;
   }
   if (difference <= 1) {
       alert("The range must be at least seven days apart.");
       return false;
    }
   return true;
} 
```

现在关于这段代码有几点需要注意，该`Date.parse`函数应该适用于大多数输入类型，但已知在某些格式方面存在问题，例如“YYYY MM DD”，因此您应该在使用它之前对其进行测试。但是，我似乎记得大多数浏览器会根据计算机区域设置来解释提供给 Date.parse 的日期字符串。

此外，86400000 的乘数应该是您要查找的天数范围。因此，如果您正在寻找至少相隔一周的日期，那么它应该是七。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-16T16:08:07.807

因此，如果我目前理解，您需要查看一个日期是否大于另一个日期。

```
function ValidRange(date1,date2)
{
   return date2.getTime() > date1.getTime();
} 
```

然后，您需要使用 Date.parse 解析从 UI 获取的字符串，如下所示：

```
ValidRange(Date.parse('10-10-2008'),Date.parse('11-11-2008')); 
```

这有帮助吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T16:10:48.847

```
var myDate = new Date(2008, 9, 16);

// is myDate between Sept 1 and Sept 30?

var startDate = new Date(2008, 9, 1);
var endDate = new Date(2008, 9, 30);

if (startDate < myDate && myDate < endDate) {
    alert('yes');
    // myDate is between startDate and endDate
} 
```

您可以将多种格式传递给 Date() 构造函数来构造日期。您还可以使用当前时间构造一个新日期：

```
var now = new Date(); 
```

并在其上设置各种属性：

```
now.setYear(...);
now.setMonth(...);
// etc 
```

有关详细信息，请参阅[http://www.javascriptkit.com/jsref/date.shtml](http://www.javascriptkit.com/jsref/date.shtml)或[Google 。](http://www.google.ca/search?q=javascript+date+object)

# visual-studio - 在 Visual Studio 中禁用空文本的副本

> ID：73972
> 
> 赞同：71
> 
> 时间：2008-09-16T16:03:38.003
> 
> 标签：visual-studio, keyboard

我以某种方式错误配置了手指。这导致了一个非常烦人的情况。

1.  我选择要复制的文本块；
2.  我将光标移动到要粘贴代码的位置；
3.  我不小心再次按了 Ctrl+C 而不是 Ctrl+V；
4.  我的复制文本块被一个空块替换；
5.  我必须回去重新做一遍。呸呸呸。

有什么方法可以禁用此行为，即禁用 Visual Studio 2005+ 中空文本块的副本？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2008-09-16T16:06:24.737

它不是复制空块，而是复制空行。您可以在“工具”>“选项”>“文本编辑器”>“所有语言”>“没有选择时将剪切或复制命令应用于空白行”中更改此设置

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-09-16T16:05:41.743

按 CTRL+SHIFT+V 两次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T16:07:18.307

我正在使用 Visual Studio 2008（但我相信这个答案适用于 Visual Studio 2005）。

选择工具 -> 选项。

导航到“文本编辑器”节点并展开它。

展开“所有语言”（或您想要应用的任何语言）并选中“在没有选择时将剪切或复制命令应用于空白行”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T16:08:43.267

> 在工具 - 选项 - 文本编辑器 - 所有语言 - 常规中可以找到拯救我理智的选项。当没有选择时，有一个复选框将剪切或复制命令应用于空白行。取消选中此项允许我在空白行上按我想要的 Ctrl+C 键，而不会丢失剪贴板上的内容。

[来源](http://blogs.msdn.com/saraford/archive/2007/09/28/did-you-know-how-not-to-accidentally-copy-a-blank-line.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-16T16:11:47.627

转到工具 > 选项 > 文本编辑器 > 所有语言 > 常规

该页面上的选项是“在没有选择时将剪切或复制命令应用于空白行”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-11T23:02:57.980

由于某种原因，该选项对我不起作用（VS2010）

此处提到的将 Ctrl+C 分配给宏的答案有效，但是[在 Visual Studio 中禁用单行复制](https://stackoverflow.com/questions/108094/disabling-single-line-copy-in-visual-studio)

# sql-server - Missing SQL Service stored procedure

> ID：73988
> 
> 赞同：0
> 
> 时间：2008-09-16T16:05:41.573
> 
> 标签：sql-server

I am receiving a message from a commercial program stating that the "LogMessage" stored procedure is not found. There does not appear to be a stored procedure called LogMessage in the associated MS SQLServer 2000 database. What can I do to track down the missing procedure, other than calling the company?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T16:07:22.520

你找不到它的原因是因为它不存在。除非您有原始过程，否则您将不得不致电公司。

当然，您可以自己尝试创建 proc。但是，当有人已经拥有原始过程时，为什么还要打扰呢？

这是商业产品的全新安装吗？如果是这样，这完全是他们的责任。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T16:58:11.243

如果您没有访问存储过程的权限，有时您也会收到此消息。以“sa”或同等身份登录以验证 proc 确实丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T22:07:07.617

LogMessage 似乎不言自明。如果您不能轻易获得真实的东西，您可能会尝试自己创建一个，看看会发生什么。

创建一个名为 LoggedMessages 的新表，并在调用 proc 时插入到表中。然后看看弹出了什么。

有点 hacky，但鉴于它是一种日志记录机制，与应用程序的主要功能无关，您可以尝试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-08-05T21:40:42.677

好吧，如果公司倒闭、没有帮助等，或者您很着急，那么附上 SQL 跟踪，查看传递的参数类型和数量，并创建一个具有该名称和签名的存储过程。根据所使用的数据访问 API，可能需要进行一些实验才能获得签名权。存储过程的主体将为空。由于这只是日志记录，因此大概这将使应用程序的其余部分运行，但日志记录将关闭。

确保架构的其余部分在那里。显然，如果整个模式都丢失了，那么这个技巧就行不通了。

如果您与供应商签订了维护协议，请对他们大喊大叫，这就是维护和支持的目的。**************************