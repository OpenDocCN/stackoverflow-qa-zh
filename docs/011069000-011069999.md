# StackOverflow 问答 11069000-11069999

# html - 固定宽度中心，动态左右背景图像列

> ID：11069000
> 
> 赞同：4
> 
> 时间：2012-06-17T04:52:05.050
> 
> 标签：html, css, layout

我找到了一些方法来做我正在尝试的事情，但我不确定最好或首选的方法到底是什么......基本上我想要一个 1000px 固定宽度的#main div，然后在左侧和右侧，如果分辨率足够大，我想要两个单独的图像可以填充更多宽度，但如果不是，图像不计入文档宽度。希望这是有道理的。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T16:40:32.013

您可以制作 1400 像素宽度的背景图片（例如 bg.jpg）。将左右图像放到这个bg.jpg上。

左图到最左边，右图到 bg.jpg 的最右边。最后，您将只有 1 张图片，即 bg.jpg。

如果您的主包装是中心对齐的，那么您可以将 css 添加到正文中，因此背景图像也是中心对齐的。但主包装不会覆盖左右图像。

```
body{
background-image: url("bg.jpg") center 0 no-repeat;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T06:51:51.673

你为什么不把那两张图片设置为背景图片：（很简单）

```
background-image: url("background_one.png"), url("background_two.png");
background-position: left top, right top;
background-repeat: no-repeat; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T06:36:01.223

假设您的两个侧面图像各 200 像素宽，因此您只想在视口宽于 1400 像素时显示它们。

您可以使用 CSS 媒体查询来做到这一点。

```
.side-img {
    display: none;
}

@media screen and (min-width: 1400px) {
    .side-img {
        display: block;
    }
} 
```

请记住，一些旧浏览器（IE7、8）不理解媒体查询，因此侧面图像永远不会在这些浏览器中显示。

如果这是一个问题，那么您可能更喜欢基于 JavaScript 的解决方案，类似于这个 jQuery 函数：

```
$(window).bind('resize',function(e){
    calcWidth(); // Called whenever window is resized.
});

function calcWidth(){    
    var sideImgs = $('.side-img');
    var winW = $(window).width();
    if (winW > 1400){
        sideImgs.css('display', 'block');
    } else {
        sideImgs.css('display', 'none');
    }
}

calcWidth();​ // Run this on page load. 
```

# asp.net-mvc - 如何在asp.net mvc3的帐户控制器中访问UserId？

> ID：11069004
> 
> 赞同：0
> 
> 时间：2012-06-17T04:52:36.343
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我想在注册后将一行表分配给任何用户。此表有一个名为 UserId 的列和一些其他列。我想将此表的 UserId 设置为新注册用户的 UserId 并将其他值设置为 0。我想在 Register 函数中执行此操作。但我不知道如何在 Account 控制器的 Register 功能中访问 UserID。我使用默认帐户控制器及其功能。Register函数的代码是：

```
[HttpPost]
        public ActionResult Register(RegisterModel model)
        {
            if (ModelState.IsValid)
            {
                // Attempt to register the user
                MembershipCreateStatus createStatus;
                Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus);

                if (createStatus == MembershipCreateStatus.Success)
                {
                    FormsAuthentication.SetAuthCookie(model.UserName, false /* createPersistentCookie */);
                    return RedirectToAction("Index", "Home");
                }
                else
                {
                    ModelState.AddModelError("", ErrorCodeToString(createStatus));
                }
            }

            // If we got this far, something failed, redisplay form
            return View(model);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T05:38:10.940

假设用户是你的模型，控制器应该是这样的

```
class Account:Controller{

[HttpPost]
ActionResult Register(User myModel){

var myUserId = myModel.UserId;

}
} 
```

你的观点应该从这样的开始

```
@model User 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:07:21.883

如果您将创建时为用户生成的唯一标识符称为 UserId，您可以找到它，

```
[HttpPost]
public ActionResult Register(RegisterModel model)
{
    if (ModelState.IsValid)
    {
        // Attempt to register the user
        MembershipCreateStatus createStatus;
        var user = Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus);

        if (createStatus == MembershipCreateStatus.Success)
        {
            var userId = (Guid) user.ProviderUserKey; //The unique identifier just created

            FormsAuthentication.SetAuthCookie(model.UserName, false /* createPersistentCookie */);
            return RedirectToAction("Index", "Home");
        }
        else
        {
            ModelState.AddModelError("", ErrorCodeToString(createStatus));
        }
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

# java - 在另一个 JFrame 中调用一个 JFrame

> ID：11069005
> 
> 赞同：2
> 
> 时间：2012-06-17T04:52:44.427
> 
> 标签：java, swing, netbeans

我正在使用 NetBeans。我必须在单独的文件中创建两个 JFrame，例如 test1.java 和 test2.java。test1 是一个简单的注册表单，而 test2 是一个捕获图像的网络摄像头应用程序。

我想在 Test1 JFrame 中显示 test2 JFrame。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:04:15.697

我相信您想要的称为[JInternalFrame](http://docs.oracle.com/javase/6/docs/api/javax/swing/JInternalFrame.html)，并且是与 JFrame 不同的组件。

在这里查看内部框架的解释

[http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)

您应该能够将您的`test2`框架更改为内部框架以获得您想要的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T01:33:03.553

我所做的是创建一个全新的类，让它拥有自己的 GUI。我没有添加 main 方法，我只是将其称为其他方法。当我想弹出那个 GUI 页面时，我只是用你常用的`Page page = new Page()`方法调用它。我还做了另一件事。`setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`而不是我使用的那种典型`setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);`的，当你点击红色 X 时整个东西不会退出，它只是摆脱了窗口，让另一个保持打开状态

# ios - 如何让我的 ios 应用程序出现在设置中的位置服务中

> ID：11069018
> 
> 赞同：1
> 
> 时间：2012-06-17T04:59:15.230
> 
> 标签：ios, ios5, cllocationmanager

我写了一个 CLLocationManager ios 应用程序。但是，我在 iPhone 的设置中看不到我的应用程序出现在定位服务中。我是否需要在 Xcode 的 ios 项目中的 plist 中设置特定值？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T05:41:42.690

一旦调用实际需要位置跟踪的代码，它应该会自动出现（每当弹出窗口第一次显示：你允许...）

尝试调用这样的东西：

```
[self.locationManager startUpdatingLocation]; 
```

那应该这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T06:20:45.400

在 iOS -8 中需要做一些改动：

```
locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    if([locationManager respondsToSelector:@selector(requestWhenInUseAuthorization)]){
        [locationManager requestWhenInUseAuthorization];
    }else{
        [locationManager startUpdatingLocation];
    } 
```

需要在 plist 中添加 2 个带有空白值的额外键 **1)NSLocationWhenInUseUsageDescription 2)NSLocationAlwaysUsageDescription**

```
#pragma mark - CLLocationManagerDelegate

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
    NSLog(@"didFailWithError: %@", error);
    UIAlertView *errorAlert = [[UIAlertView alloc]
                               initWithTitle:@"Error" message:@"Failed to Get Your Location" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [errorAlert show];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    NSLog(@"didUpdateToLocation: %@", newLocation);
    CLLocation *currentLocation = newLocation;

    if (currentLocation != nil) {
        NSString *strLat = [NSString stringWithFormat:@"%.8f", currentLocation.coordinate.longitude];
        NSString *strLong = [NSString stringWithFormat:@"%.8f", currentLocation.coordinate.latitude];
    }
} 
```

# mysql - 快速mysql查询随机选择N个用户名

> ID：11069019
> 
> 赞同：1
> 
> 时间：2012-06-17T04:59:39.650
> 
> 标签：mysql

在我的 jsp 应用程序中，我有一个搜索框，允许用户在数据库中搜索用户名。我在每次击键时发送一个 ajax 调用，并从输入的字符串开始获取 5 个随机名称。我正在使用以下查询： `select userid,name,pic from tbl_mst_users where name like 'queryStr%' order by rand() limit 5` 但这非常慢，因为我的表中有超过 2000 条记录。

有没有更好的方法可以花费更少的时间让我达到同样的效果..？我需要随机值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:13:32.787

1.  表有名称索引吗？如果不应用它

2.MediaWiki 使用了一个有趣的技巧（对于 Wikipedia 的 Special:Random 功能）：包含文章的表有一个带有随机数的额外列（在创建文章时生成）。要获得一篇随机文章，请生成一个随机数，并在随机数列中获取具有下一个更大或更小（不记得是哪个）值的文章。使用索引，这可以非常快。（而且 MediaWiki 是用 PHP 编写并为 MySQL 开发的。）

如果结果数字分布不均，这种方法可能会导致问题；IIRC，这已在 MediaWiki 上修复，因此如果您决定这样做，您应该查看代码以了解它当前是如何完成的（可能他们会定期重新生成随机数列）。

3.http://jan.kneschke.de/projects/mysql/order-by-rand/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T06:45:42.667

“非常慢”有多慢，以秒为单位？

您的查询可能很慢的原因很可能是您没有在`name`. 2000 行对于 MySQL 来说应该是小菜一碟。

另一个可能的原因是`SELECT`子句中有很多列。我*假设*在这种情况下，MySQL 引擎首先将所有这些数据复制到一个临时表中，然后再对这个大型结果集进行排序。

我建议以下几点，以便您尽可能长时间地仅使用索引：

```
SELECT userid, name, pic
FROM tbl_mst_users
JOIN (
    -- here, MySQL works on indexes only
    SELECT userid
    FROM tbl_mst_users
    WHERE name LIKE 'queryStr%'
    ORDER BY RAND() LIMIT 5
) AS sub USING(userid); -- join other columns only after picking the rows in the sub-query. 
```

这种方法*稍微*好一点，但仍然不能很好地扩展。但是，对于小型表应该足够了（2000 行确实很小）。

[@user1461434 提供](http://jan.kneschke.de/projects/mysql/order-by-rand/)的链接非常有趣。它描述了一种性能几乎恒定的解决方案。唯一的缺点是它一次只返回一个随机行。

# git - Git 提交作者的电子邮件根据目录和/或项目而变化？

> ID：11069020
> 
> 赞同：14
> 
> 时间：2012-06-17T05:00:16.217
> 
> 标签：git

我处理自己的项目，并且时不时地为第三方做一些工作，我需要在提交中使用他们的联系信息等。我通常只使用全局提交名称等，但现在我需要根据目录指定提交名称和电子邮件。我怎样才能在 Git 中做到这一点？

> **也许有用的相关信息**
> 
> 1.  [Git中的作者和提交者有什么区别？](https://stackoverflow.com/questions/6755824/multiple-authors-on-the-same-git-commit)
>     
>     
> 2.  [没有电子邮件的 Git 提交](https://stackoverflow.com/questions/7372970/git-commit-with-no-email)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-17T06:00:37.997

您可以拥有一个每个存储库的用户名和电子邮件地址来取代您的全局设置。它会影响在当前存储库中所做的提交，但不会影响其他存储库中的提交。

```
git config user.name "Foo Bar"
git config user.email "foo.bar@example.com" 
```

您可以通过以下方式确认您的本地信息覆盖了您的全局默认值：

```
git config -l | fgrep user. 
```

它可能显示多个条目（例如，全局和本地配置设置），但列表中*最后*显示的内容优先。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T05:06:42.510

使用以下命令提交您的更改

```
git commit -m "Commit message" --author "Your Name <email>" 
```

然后，您将能够为该提交明确设置作者、电子邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-20T12:58:32.503

如果您需要根据文件夹指定不同的作者/提交者名称/电子邮件。您可以在 .bashrc 中添加这样的一行

```
PROMPT_COMMAND='[[ $PWD =~ ^path/to/dir.*$ ]] && { export GIT_COMMITTER_EMAIL=email && export GIT_COMMITTER_NAME=name && export GIT_AUTHOR_EMAIL=email && export GIT_AUTHOR_NAME=name; } || { unset GIT_COMMITTER_NAME && unset GIT_COMMITTER_EMAIL && unset GIT_AUTHOR_NAME && unset GIT_AUTHOR_EMAIL; }' 
```

# emacs - 执行的 emacs 命令列表

> ID：11069023
> 
> 赞同：0
> 
> 时间：2012-06-17T05:00:21.813
> 
> 标签：emacs, command, elisp

我正在使用 emacs，但自动换行功能没有按预期工作。我对我的 emacs 进行了大量的自定义。因此，难怪其他自定义之一不是 auto-line 所期望的。我想知道是否有办法知道 emacs 在特定点执行的命令列表（emacs 命令列表），例如当 ctrl-s ctrl-c 或在我的情况下调用自动行功能时.

编辑：我认为你误解了这个问题。我想知道emacs在“内部”调用什么命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:07:56.050

我相信`view-lossage`这是您正在寻找的 -`M-x view-lossage`或`C-h l`。

如果您想知道按键绑定到什么，请考虑使用`describe-key`通常绑定到 的`C-h k`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T05:51:11.513

基本上到了这一步，你就需要硬着头皮学习一些 Emacs-lisp 了。调试器是您要进一步挖掘问题的工具（我使用`edebug`）。这不仅仅是查看调用了哪些函数，还需要查看调用这些函数时相关变量的值。

如果你觉得你做不到，那么你可以对你的 init 文件进行二分法，直到找到罪魁祸首，但此时你仍然需要一些 Emacs-lisp 来进一步调查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T02:10:06.040

补充一下@event_jr 所说的——

您似乎要问的是您上次调用的命令调用的*函数的历史记录。*（您说的是 Emacs *“内部命令”*，但您似乎只是指函数。）

要获取您调用的任何给定命令的历史记录（例如，通过键），请使用`M-x debug-on-entry`然后输入命令名称。下次您使用该命令时，您可以在 Emacs 调试器中遍历它的执行过程（点击`d`到步骤，`c`继续经过一个步骤）。

# django - get_profile() 在 Django 项目中随机失败

> ID：11069025
> 
> 赞同：0
> 
> 时间：2012-06-17T05:00:31.007
> 
> 标签：django, templates, profile, django-context

在我的 Django 项目中，我有一个用户身份验证系统。每个用户都有一个用户配置文件：

```
# Extending main user profile
class UserProfile(models.Model):
    # Required
    user = models.OneToOneField(User)

    # Added fields to main user model
    position = models.CharField(max_length=20, null=True, blank=True)
    avatar = models.ImageField(upload_to=upload_path_handler, blank=True, default='images/avatar.png')

class Meta:
    app_label = 'auth'

# handler --  Create automatically UserProfile foreign key when
# a new user is registered.
def create_user_profile(sender, instance, created, **kwargs):
    if created:
        # Creating UserProfile
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

好吧，我有一个 context_processor.py，它的主函数返回如下内容：

```
return {'USER_MEDIA_URL': settings.USER_MEDIA_URL,
'DEBUG': settings.DEBUG,
'SITE_URL': settings.SITE_URL,
'keys_left': keys_left,
'ownRoom': c,
'userThumbnail': request.user.get_profile().avatar,} 
```

我所有的模板都使用“userThumbnail”和“request.user.get_profile().avatar”随机失败，没有任何解释。

模板中返回的错误是：

```
Unable to load the profile model, check AUTH_PROFILE_MODULE in your project settings 
```

有时我会收到此错误，有时不会。这很烦人。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:33:11.787

> 这很烦人。

:)

如果您不需要在 post_save 上执行除创建配置文件之外的其他额外任务，也许您可​​以使用[django-annoying](https://bitbucket.org/offline/django-annoying)中的 AutoOneToOneField代替？

> 如果配置文件不存在，则方法 get_profile() 不会创建配置文件。 [(django 文档)](https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users)

AutoOneToOneField[可以](https://bitbucket.org/offline/django-annoying/wiki/Home)。

这不是一个真正的答案，但它可能会成为您的解决方案。

```
from annoying.fields import AutoOneToOneField

class UserProfile(models.Model):

    user = AutoOneToOneField(User, verbose_name=_(u"user"),
                             on_delete=models.CASCADE,
                             related_name="profile") 
```

然后你用它来做类似的事情：

```
return { 'userThumbnail': request.user.profile.avatar, } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T06:41:04.500

将以下内容添加到您的 settings.py

`AUTH_PROFILE_MODULE = 'appname.UserProfile'`

那应该可以解决问题。

# php - Twitter 风格的 URL 正则表达式匹配

> ID：11069027
> 
> 赞同：2
> 
> 时间：2012-06-17T05:01:13.237
> 
> 标签：php, regex, url, preg-replace, preg-match

我正在尝试为使用 PHP 的聊天客户端实现非常宽松的正则表达式匹配。

聊天客户端必须能够获取完整和不完整的 URL。

例如：

`http://www.example.com` 或`www.example.com`或`example.com`

我已经设置了一个 preg_replace 来尝试实现这一目标：

```
$find = array("/([\w]+:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/is","/(^(?!http:\/\/)[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,4}(\/?\S*)?)/is");
$replace = array( "<a target=\"_blank\" href=\"http://\\1\">\\1</a>","<a target=\"_blank\" href=\"\\1\">\\1</a>");
$output = preg_replace($find, $replace, $input); 
```

因此，目标是首先找到具有协议的“完整” URL，然后尝试查找没有协议的“惰性” URL。

目前它适用于“完整” URL，但“惰性” URL 不会被拾取。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T11:42:48.910

我不久前设置了类似的东西。我的想法是……任何以协议标识符或“www”开头的都是 URL，加上与以有效 TLD（两个字母或已知 gTLD）结尾的域匹配的任何内容，如果它后面跟着一个路径。域本身就是域。

```
$gtlds="com|net|org|biz|edu|gov|int|pro|xxx";
$gtlds+="|aero|arpa|asia|coop|museum|name|travel";
#$gtlds+="|xn-[a-z0-9]+";
$a = array(
  '/(f|ht)tps?:\/\/[^ ]+/',
  '/(ftp|www)\.[a-z0-9.-]+(/[^ ]*)/',
  "/([a-z0-9][a-z0-9-]*\.)+([a-z]{2}|$gtlds)\/[^ ]*/"
); 
```

请注意，我是一个老派的正则表达式用户，所以这是 ERE，而不是现在所有孩子都在使用的花哨的 PREG 东西。

[来自IANA](http://data.iana.org/TLD/tlds-alpha-by-domain.txt)的 gTLD 长得离谱。我已经更新了它，所以它在这个答案的时间是有效的，除了`.XN--*`. 如果愿意，您可以包含以模式开头的 TLD 列表`.XN--`，或者直接匹配它们并增加`$gtlds`变量。我从来没有遇到过简单地忽略它们的存在而引起的任何问题，所以这就是我的策略。

上述 RE 适合我的特定用途。我没有声称他们会为每一个不属于我的案件工作。（例如，如果引用了域或 URL，它们将包含尾随引号。这不是我必须处理的事情，所以我没有处理它。）

请注意，当您进行替换时，虽然您希望生成器锚点的 HREF 属性是您匹配或生成的 URL，但您可能希望将原始文本保持原样以进行布局和显示。

并且取决于您如何使用这些，单词边界可能会有所帮助......但您已经知道如何做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:48:48.490

因此，经过数小时的辛勤工作……我设法找到了一种相对简单的方法来匹配 http:// URL 和 www。URL，以便将它们变成锚。

这是最终的解决方案：

```
$output = preg_replace("/\b((http(s)?:\/\/)?(www\.[a-zA-Z0-9\/\\\:\?\%\.\&\;=#\-\_\!\+\~\,]*))/is","<a target=\"_blank\" href=\"http$3://$4\">$0</a>",$output); 
```

感谢 tamous 的正则表达式。

# javascript - createNewElement 和 appendChild 到现有内容

> ID：11069032
> 
> 赞同：0
> 
> 时间：2012-06-17T05:02:09.117
> 
> 标签：javascript

我试图更好地理解 JavaScript，但在创建元素和向它们附加值时遇到了麻烦。

我要做的就是创建一个新的段落元素，其中将包含一个新字符串，然后使用 appendChild 将该段落添加到我现有的 div 标签中。

```
var oldParagraph = document.getElementById('content')
var newParagraph = document.createElement('p');
var text = document.createTextNode("i am a new text node.");

newParagraph.setAttribute('class', 'red');

function addText(){
     document.oldParagraph.appendChild(newParagraph);
     document.newParagraph.appendChild(text);
} 
```

我的 HTML 很简单：

```
<div id="content"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T05:07:26.747

你的代码应该是这样的：

```
function addText(){
     oldParagraph.appendChild(newParagraph);
     newParagraph.appendChild(text);
} 
```

`oldParagraph`并且`newParagraph`是包含 DOM 对象引用的变量。您直接对这些 DOM 引用进行操作。

在实践中，我认为你会用局部变量而不是全局变量来组织你的代码：

```
function addText() {
    var newParagraph = document.createElement('p');
    newParagraph.className = 'red';
    newParagraph.appendChild(document.createTextNode("i am a new text node."));
    document.getElementById('content').appendChild(newParagraph);
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/42ffq/](http://jsfiddle.net/jfriend00/42ffq/)。

# java - GCJ 找不到 GCCMain 类

> ID：11069038
> 
> 赞同：1
> 
> 时间：2012-06-17T05:04:34.593
> 
> 标签：java

我是 linux 和一般编程的新手，我什至似乎无法运行简单的 Hello World 代码。以下是我所做的以及我收到的错误，我正在使用 Cygwin。谁能帮我？

```
theys@THEYS1 ~/java
$ vim test.java

theys@THEYS1 ~/java
$ ls
helloworld.java  test.java

theys@THEYS1 ~/java
$ uname -a
CYGWIN_NT-6.1-WOW64 THEYS1 1.7.15(0.260/5/3) 2012-05-09 10:25 i686 Cygwin

theys@THEYS1 ~/java
$ cat test.java
public class test {
    public static void main (String [] args) {
            System.out.println ("Hello World!");
    }
}

theys@THEYS1 ~/java
$ gcj --main=test -o test test.java
Exception in thread "main" java.lang.NoClassDefFoundError:
   org.eclipse.jdt.internal.compiler.batch.GCCMain
   at gnu.java.lang.MainThread.run(Unknown Source)
 Caused by: java.lang.ClassNotFoundException:
  org.eclipse.jdt.internal.compiler.batch.GCCMain    not found in
   gnu.gcj.runtime.SystemClassLoader{urls=[], 
     parent=gnu.gcj.runtime.ExtensionClassLoader    {urls=[], parent=null}}
  at java.net.URLClassLoader.findClass(Unknown Source)
  at java.lang.ClassLoader.loadClass(Unknown Source)
  at java.lang.ClassLoader.loadClass(Unknown Source)
  at gnu.java.lang.MainThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T05:59:13.923

这基本上是因为你的类路径设置不正确..就像 Makoto 说的那样使用 openjdk 它更干净！只需阅读此[http://sandeepseshan.blogspot.com/2011/06/cygwin-java-and-classpath-problem.html](http://sandeepseshan.blogspot.com/2011/06/cygwin-java-and-classpath-problem.html)。该链接适用于 Windows，但它可以轻松快速地适应。

并确保在`.`那里设置当前文件夹（代表当前目录）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-24T10:41:42.613

这是 GCC 的安装问题，见[https://gcc.gnu.org/bugzilla/show_bug.cgi?id=45433](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=45433)。`--with-ecj-jar`配置 GCC 时，选项中未指定文件名。或者配置 GCC 时在选项中指定的文件名`--with-ecj-jar`在您的系统上不存在，在同一位置。您可以通过如下命令在 ecj1 中找到硬编码的文件名： `$ strings < /usr/lib/gcc/i686-pc-cygwin/4.7.3/ecj1.exe | fgrep java.class.path=` ecj1 可执行文件的精确位置当然取决于您的系统。

# ruby-on-rails - Thin Rails 服务器 EventMachine Gems

> ID：11069040
> 
> 赞同：2
> 
> 时间：2012-06-17T05:05:20.640
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, eventmachine, thin

在 EventMachine 中创建应用程序时，我使用异步库，因此我不会阻止 EventMachine。例如使用 em-postgres 而不是 pg。使用 Thin 和 Rails 时是否需要使用异步库？如果是这样，那么活动记录如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:38:41.740

您需要 Eventmachine 兼容库来处理任何阻塞。默认情况下，Rails 不是异步的，但[已经证明可以将其修改为 so](https://github.com/igrigorik/async-rails/)。我会小心走这条路，因为它仍然是非常规的，并且可能无法在您的生产基础架构上执行您期望的方式（例如，Heroku Bamboo 堆栈始终是“每个请求的测功机”，抵消了这种异步模型的好处）。

你需要从整体上审视你的堆栈，并询问你是否真的需要这个。结合延迟作业的传统线程设置可能被证明是一种更简单且同样有效的解决方案。

# iphone - AdMob 广告显示在 iOS 模拟器中，但不在 iDevice 上

> ID：11069041
> 
> 赞同：0
> 
> 时间：2012-06-17T05:05:20.950
> 
> 标签：iphone, ios, ios-simulator, admob

如标题所述，我可以让我的 AdMob 广告很好地显示在 iOS 5.1 和 6.0 模拟器中，但是，当在我的 iOS 5.1.1 或 6.0 设备上运行我的应用程序时，广告应该是一个空白区域服务。我的 .m 文件中的代码如下：

```
bannerView_ = [[GADBannerView alloc] initWithFrame:CGRectMake(0.0,
                                                            411.0 -
                                                            GAD_SIZE_320x50.height,
                                                            GAD_SIZE_320x50.width,
                                                            GAD_SIZE_320x50.height)];
bannerView_.adUnitID = @"**myID**";
bannerView_.rootViewController = self;
[self.view addSubview:bannerView_];
[bannerView_ loadRequest:[GADRequest request]];

//GADRequest *r = [[GADRequest alloc] init];
//r.testing = YES;
//[bannerView_ loadRequest:r]; 
```

此外，如果我开始测试广告（请参阅注释掉的部分），测试广告会同时显示在模拟器和我的 iDevices 上，这让我很困惑！我错过了什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:12:18.657

跟进我的问题，我发现由于我越狱并安装了 Lockinfo（我相信这是罪魁祸首），我还安装了广告拦截器。如果其他人遇到此问题，请确保在未越狱的设备上进行测试，并且广告应按预期显示。

# mysql - mysql语句中的反勾有什么作用？

> ID：11069044
> 
> 赞同：1
> 
> 时间：2012-06-17T05:07:15.403
> 
> 标签：mysql, sql-injection

在这样的声明中；

```
$sql = "SELECT distinct `term`,count(*) as count 
FROM {$temp_table_name} 
group by `term` order by count DESC"; 
```

在字段名称“术语”周围使用反勾号字符 (`) 对我有什么好处？是否出于性能原因使用反引号？还是为了某种 SQL 注入保护？

注意：在我提交问题后，我意识到反引号字符没有显示在字段名称“术语”周围 - 就在 stackoverflow 上。我不知道如何让它出现在问题正文中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T05:11:28.237

如果`term`是mysql关键字，需要用**`**引用，否则不需要。

Ps：`distinct`在你的情况下不是必需的，因为你按它分组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T05:14:00.840

反引号是“官方”标识符引号字符。

[http://dev.mysql.com/doc/refman/5.0/en/identifiers.html](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)

它允许标识符中包含更广泛的字符数组，如链接文档中所述。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T05:11:26.437

反引号只允许在字段名称中使用空格或其他替代字符。

我认为这里已经很好地解释[了](https://stackoverflow.com/questions/261455/using-backticks-around-field-names)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T05:14:57.230

当我们使用关键字作为表名时，MySQL 中的字段名使用反引号，或在启用 ANSI_QUOTES 时使用双引号。否则没有必要。与`SQL injection protection`

# java - java .getresource() 命令的资源在哪里？

> ID：11069046
> 
> 赞同：1
> 
> 时间：2012-06-17T05:07:30.170
> 
> 标签：java, eclipse

我知道这是一个简单的问题，但要么没有人解释正确，要么我的 eclipse/JDK 坏了。我正在关注以下教程：http: [//zetcode.com/tutorials/javagamestutorial/animation/](http://zetcode.com/tutorials/javagamestutorial/animation/)

在其中，我在屏幕上放置了一个星形 png 并为其设置动画。当我使用：

```
ImageIcon ii = new ImageIcon(this.getClass().getResource("star.png")); 
```

它给了我一个空指针异常。目前，我将 star.png 文件与调用它的类放在同一个文件夹中（我知道这通常不是最佳实践，但我只是按照本教程所说的去做。

我知道这个问题是一个完全重复的问题（甚至是相同的教程），但是没有答案，无论我把这个文件放在哪里，它都对我不起作用。 [getResource() -> 找不到源](https://stackoverflow.com/questions/8483731/getresource-source-not-found)

我在这里也使用 eclipse 作为我的想法，我是否必须做其他事情才能使这个想法意识到这是项目的资源或其他什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T05:11:34.040

将图像放在那里后，尝试在 Eclipse 中刷新整个包。

# authentication - Yesod中的多重身份验证？

> ID：11069049
> 
> 赞同：48
> 
> 时间：2012-06-17T05:07:48.480
> 
> 标签：authentication, haskell, yesod

我需要在我的应用程序中要求多种身份验证类型；特别是：应用程序的某些部分需要对 Dropbox 进行身份验证，而某些部分需要基于电子邮件的身份验证，例如 browserID。

我该如何处理？

我可以将身份验证附加到子站点吗？由于 YesodAuth 类在所有示例中都将主基础数据类型作为其参数，因此我如何做到这一点并不明显。

如果没有，还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T15:19:30.750

抱歉，如果我的回答有点含糊（我使用 Yesod 已经几个月了，开发周期非常快），但如果我没记错的话，您可以在 YesodAuth 类中指定多种身份验证（browserID，google等），在这种情况下，将向用户提供在每个身份验证请求中使用哪个选项。就像是：

`authPlugins _ = [ authBrowserId , authGoogleEmail ]`

等等

您是否可以为我不知道的每种情况明确设置一种身份验证类型，我不确定这是否解决了您的问题。

# asp.net-mvc - 使用 MVC 分页和排序获取设置复选框值的选项（会话变量？？）

> ID：11069055
> 
> 赞同：1
> 
> 时间：2012-06-17T05:10:20.487
> 
> 标签：asp.net-mvc

在我的 html.beginform 中，我有这个我想要保留的复选框。我不确定如何将它添加到下面的 ActionLink ......或者是否可能。我想过使用会话变量。如果有人有一个示例显示如何在会话变量中设置复选框值，那会很棒......或者如果有一种方法可以在 ActionLink 中传递它......那也很酷。提前欢呼和感谢

```
 @Html.CheckBoxFor(model=>model.wccrSelection.SendDemand)

      @Html.ActionLink("Order",
        "Display", new {Model.wccrSelection.WccrId,sortOrder = ViewBag.NameSortParm }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T06:17:48.063

您可以使用 a`<form>`而不是链接。这样复选框的值将自动发送到控制器，您不需要使用任何 javascript：

```
@using (Html.BeginForm("Display", null, new { id = Model.wccrSelection.WccrId, sortOrder = ViewBag.NameSortParm }))
{
    @Html.CheckBoxFor(model=>model.wccrSelection.SendDemand)
    <button type="submit">Order</button>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T05:46:07.180

您可以使用 jQuery 添加额外的参数以将复选框状态传递给您的操作方法，如下所示：

例如。：

```
 @Html.CheckBoxFor(model=>model.wccrSelection.SendDemand, new {@class = "SendDemand"})
    @Html.ActionLink("Order",
            "Display", new {Model.wccrSelection.WccrId,sortOrder = ViewBag.NameSortParm }, new { @class = "DisplayOrder" })

<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
<script type="text/javascript"> 
        $(function(){
          (".DisplayOrder").on.("click",function(){
          var href = $(this).attr("href");
          if ($(".SendDemand").is(':checked')) {
            href = href + "&CheckBoxState=true";
          } 
          else {
            href = href + "&CheckBoxState=false";
          }
          $(this).attr("href", href);
        });
       });
</script> 
```

# java - 为什么Java接口可以在这些代码中实例化？

> ID：11069056
> 
> 赞同：2
> 
> 时间：2012-06-17T05:10:44.830
> 
> 标签：java, class, interface, instantiation

> **可能的重复：**
> [创建接口的“对象”](https://stackoverflow.com/questions/7586277/creating-an-object-of-an-interface)

我是 Java 新手。根据我的理解：

*   我们不能实例化一个`Interface`. 我们只能实例化`class`实现了 的a `interface`。
*   关键字用于从`new`类创建对象。

但是，当我阅读一些Java程序的源代码时，我发现有时会实例化一个接口。例如：

**示例 1：**

```
JButtonObject.addActionListener(new ActionListener()
{
    public void actionPerformed(ActionEvent e)
    {
        //codes
    }
}); 
```

**示例 2：**

```
SwingUtilities.invokeLater(new Runnable()
{
    public void run()
    {
        //codes
    }
}); 
```

在上面的例子中，ActionListener 和 Runnable 都是 Java 接口。我可以知道为什么它们可以在这些代码中实例化吗？

实例化接口的目的是什么？参考[这个例子](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)，似乎我们应该创建一个实现接口的类的实例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T05:13:58.657

该代码没有实例化一个接口，而是一个实现`ActionListener`或的匿名类`Runnable`。

> 匿名*类*是没有名称的本地类。*使用new*运算符在单个简洁表达式中定义和实例化匿名类 。

该代码正在匿名创建一个实例`ActionListener`，这意味着该类实际上没有任何名称。

编译该类后，您可以`YourClass$1.class`在输出中看到一个类。简单地说，`$1`class 是一个匿名类，编号`1`由编译器生成。当你有两个匿名类时，它会在编译的类中`YourClass$1.class`有类似的东西。`YourClass$2.class`

**看**

*   [匿名类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T05:14:17.457

上面的例子没有创建接口的新实例——在 new 关键字之后有当前接口的实现方法。阅读更多关于匿名类的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T05:14:10.143

这种形式只是一种简写形式，可以更轻松地创建实现接口的对象。实例化的不是接口本身，而是一个`Object implements Runnable`例子。

# c# - 通过 Socket 发送对象

> ID：11069066
> 
> 赞同：1
> 
> 时间：2012-06-17T05:13:03.340
> 
> 标签：c#, sockets

我是 C# 中的股票新手，我希望在 C# 中发送一个对象。一直在使用 BinaryWriter 发送数据（适用于字符串），但它似乎没有类似的方法

```
writer.Writer(new SerliaizedObject()); 
```

我们如何使用 BinaryReader/BinaryWriter 实现这一点

**更新：** 我使用以下函数将对象转换为字节并将其发送给客户端

```
 public static byte[] SerializeToBytes<T>(T item)
        {
            var formatter = new BinaryFormatter();
            using (var stream = new MemoryStream())
            {
                formatter.Serialize(stream, item);
                stream.Seek(0, SeekOrigin.Begin);
                return stream.ToArray();
            }
        }

        public static object DeserializeFromBytes(byte[] bytes)
        {
            var formatter = new BinaryFormatter();
            using (var stream = new MemoryStream(bytes))
            {
                return formatter.Deserialize(stream);
            }
        } 
```

发送数据使用：

```
 formatter = new BinaryFormatter();
    MessageBox.Show(SerializeToBytes<mydata>(new mydata()).Length+"");
    writer.Write(SerializeToBytes<mydata>(new mydata()));
    ChatBox.AppendText("Client Says :" + UserMessage.Text + "\r\n"); 
```

并读取我使用的数据：

```
 while (true)
   {
        byte[] bytes = reader.ReadBytes(120);
        mydata temp = DeserializeFromBytes(bytes) as mydata;
        ChatBox.AppendText("Server Says " + temp + "\r\n");
   } 
```

但读者似乎没有工作，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T05:21:32.260

用于[`BinaryFormatter`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter)将可序列化对象以二进制格式写入流：

```
FileStream fs = new FileStream("DataFile.dat", FileMode.Create);
BinaryFormatter formatter = new BinaryFormatter();
formatter.Serialize(fs, mySerializable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T07:34:47.633

您应该使用前 4 个字节作为长度标头，并在接收循环中添加一个变量 bytesReadSoFar。然后你就知道什么时候收到了。

# php - PHP 简单 HTML DOM 解析器内存泄漏

> ID：11069068
> 
> 赞同：2
> 
> 时间：2012-06-17T05:13:44.377
> 
> 标签：php, memory-leaks, simple-html-dom

我正在使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)，它消耗了大量内存（通过使用[memory_get_usage](http://us3.php.net/function.memory_get_usage)发现）！我尝试[取消设置](http://php.net/manual/en/function.unset.php)它，但它没有做任何事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T05:13:45.187

见[http://simplehtmldom.sourceforge.net/manual_faq.htm](http://simplehtmldom.sourceforge.net/manual_faq.htm)

> 问：这个脚本严重的内存泄漏... 运行完成后，它没有从内存中正确清理 dom 对象..
> 
> A: 由于 php5 循环引用内存泄漏，创建 DOM 对象后，如果多次调用 file_get_dom() 必须调用 dom->clear() 释放内存。
> 
> 例子：

```
$html = file_get_html(...);  // do something...  
$html->clear(); 
unset($html); 
```

当您在循环中使用此库时，会经常发生这种情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-17T06:00:58.503

无论您想对该库做什么，都可以使用[DOMDocument 类](http://php.net/manual/en/class.domdocument.php)

# javascript - 表格拖放重新排序和列排序

> ID：11069079
> 
> 赞同：1
> 
> 时间：2012-06-17T05:15:31.357
> 
> 标签：javascript, jquery, html, jquery-datatables

我目前正在使用[Datatables](http://www.datatables.net) Jquery 插件来增强我正在玩的网站上的 Html。

我需要能够使用拖放来重新排序行，以及能够按升序或降序对数据表中的列进行排序。

但是，这似乎表明您只能使用拖放或可排序的列，不能同时使用 DataTables jQuery 插件。 [http://jquery-datatables-row-reordering.googlecode.com/svn/trunk/index.html](http://jquery-datatables-row-reordering.googlecode.com/svn/trunk/index.html)

有人知道解决方法吗？或者甚至是更适合我需要的另一个 JQuery 插件或技术？

我是 jQuery 和 JS 的新手，所以任何方向都将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T23:50:48.870

目前，您提到的插件是最先进的数据表，您需要构建超出您自己发现的任何内容。我自己一直在寻找类似的东西，我发现的唯一东西是 jqGrid - 在“3.6 版中的新功能”> 可排序行下查看：

[http://trirand.com/blog/jqgrid/jqgrid.html](http://trirand.com/blog/jqgrid/jqgrid.html)

我更喜欢数据表，但这有一个包括拖放和排序列的实现。

希望有人最终会真正实现这一点。

您可以研究的一件事是使用 Tablesorter - 它比数据表简单得多 - 使用拖放插件，如[可用于 jquery](https://stackoverflow.com/questions/1307705/jquery-ui-sortable-with-table-and-tr-width/1372954#1372954) UI 的 sortable 或：[http ://www.isocra.com/2008/02/table-drag-and -drop-jquery-插件/](http://www.isocra.com/2008/02/table-drag-and-drop-jquery-plugin/)

# google-maps - 如何在 Leaflet-cloudmade 中使用 Google Maps API

> ID：11069082
> 
> 赞同：22
> 
> 时间：2012-06-17T05:15:47.597
> 
> 标签：google-maps, gis, leaflet

有没有办法将 Google Maps 与 Leaflet-cloudmade 集成？我的意思是，我不想使用原始的 cloudmade 地图，但我想使用谷歌地图。我想展示阿拉斯加的地图（那里的道路不多）。如果我使用云制作的地图，它只会是白色的。

如果我想使用 cloudmade 地图，我会这样做：

```
var cloudmade = new L.TileLayer('http://{s}.tile.cloudmade.com/YOUR-API-KEY/997/256/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',
    maxZoom: 18
}); 
```

我知道我应该更改**'http://{s}.tile.cloudmade.com/YOUR-API-KEY/997/256/{z}/{x}/{y}.png'**部分。但是，如果我想使用谷歌地图（或任何其他地图），我应该在那里写什么？

这是leaflet-cloudmade的文档（他们没有说太多关于使用[第三方地图提供者](http://leaflet.cloudmade.com/reference.html)。他们说他们不知道我们应用程序中使用的地图提供者，所以我认为应该可以使用谷歌地图） .

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-18T18:42:19.817

官方的[Leaflet.js 插件页面](http://leafletjs.com/plugins.html#services-providers-and-formats)引用了[Pavel Shramov](https://github.com/shramov/leaflet-plugins)包的插件。
根据使用条款，提供的**[Google.js](https://github.com/shramov/leaflet-plugins/blob/master/layer/tile/Google.js)**可让您使用 Google Maps API v3 访问 Google Maps 磁贴。

这是一个简单的示例：您可以通过首先添加来使用它

```
<script src="http://maps.google.com/maps/api/js?v=3.2&sensor=false"></script>
<script src="path/to/Google.js"></script> 
```

然后构建你的地图：

```
var map = new L.Map('map', {center: new L.LatLng(43.6481, -79.4042), zoom: 13});
var gmap_layer = new L.Google('ROADMAP');
map.addLayer(gmap_layer); 
```

* * *

*注意：*[本要点](https://gist.github.com/crofty/2197701)中还提到了一些分叉。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-17T09:47:56.257

Google 不允许您在不使用他们自己的 API 获取它们的情况下使用他们的磁贴。请参阅[一般条款](http://www.google.com/intl/en/policies/terms/)：

> 不要滥用我们的服务。例如，不要……尝试使用我们提供的接口和指令以外的方法来访问它们。

当然，一切皆有*可能*，因此可以在没有 API 的情况下获取磁贴，但您的访问可能会在没有警告的情况下被阻止：

> 如果您不遵守我们的条款或政策，或者我们正在调查可疑的不当行为，我们可能会暂停或停止向您提供我们的服务。

**也就是说，** Leaflet API 看起来与 Google API 没有*太大*区别，因此转换为使用他们的 API 可能值得考虑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T21:30:41.813

有一个第三方插件可以将 Google 地图集成到 Leaflet 中，以便能够将其添加为图层： http: [//psha.org.ru/b/leaflet-plugins.html](http://psha.org.ru/b/leaflet-plugins.html)。但是，它充当原始 Google Maps API v3 的代理，因此它不像简单的 Leaflet 平铺层那样流畅，不幸的是，由于使用条款的限制，您不能直接使用 Google Maps 平铺（如答案中所示）多于）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-30T10:35:10.287

它实际上不是谷歌地图，但有各种各样的 LeafLet Map Provider 以及[http://leaflet-extras.github.io/leaflet-providers/preview/上提供的示例代码](http://leaflet-extras.github.io/leaflet-providers/preview/)

也许您可能会在那里找到适合您特定问题的提供商。另外，您将避免 Andrew Leach 指出的问题。无论如何 - 并不是我希望你不知道，但我仍然不想忽略这一点 - 请注意，一些（但不是全部）地图提供者是商业提供者，因此你可能需要为服务付费或者可能会打扰其他 TOS。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-16T08:58:16.107

从此：[_](https://gis.stackexchange.com/a/126713/42886)

这个[Debian 插件](https://www.drupal.org/project/leaflet_more_maps)没有这个问题，但不符合 google 的服务条款（[官方示例](http://flink.com.au/tips-tricks/27-reasons-not-to-use-google-maps)）。

或者试试这个代码：

```
var map = L.map( 'map' ).setView( [ 51.505, -0.09 ], 13 );

L.tileLayer( '//mt{s}.googleapis.com/vt?x={x}&y={y}&z={z}',
{
  maxZoom: 18,
  subdomains: [ 0, 1, 2, 3 ]
} ).addTo( map );

var marker = L.marker( [ 51.5, -0.09 ] ).addTo( map ); 
```

# android - android - 构建应用程序以通过 Web 服务器进行身份验证

> ID：11069084
> 
> 赞同：1
> 
> 时间：2012-06-17T05:16:20.093
> 
> 标签：android

我正在尝试制作一个需要身份验证的应用程序：- 当用户在文本框中键入用户名和密码时，它应该检查服务器中的数据库并进行身份验证。

我怎么能在android中做到这一点？

可以请任何人帮助我吗？

谢谢你，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T05:49:29.217

如果您是 Web 开发人员，您可以非常轻松地进行此身份验证。您可以按照以下步骤，

1.  首先，从用户那里获取用户名和密码并放入变量中。
2.  创建到 Web 服务器的 HTTP 连接（您的数据发布 URL）。
3.  使用 HTTP Get 或 Post 方法将数据发布到带有指定数据的 URL（Post 更适合用于身份验证）
4.  使用服务器端脚本获取发布的值并进行身份验证。
5.  无论认证成功还是失败，都使用 JSON 编码或其他格式向客户端发送响应状态。
6.  在 android 中获取响应并创建 InputStream 并解码您在服务器端完成的 JSON 或某些指定的编码格式并在移动设备中显示响应。

就是这样。

# opengl - glArrayElement 错误

> ID：11069089
> 
> 赞同：1
> 
> 时间：2012-06-17T05:19:03.643
> 
> 标签：opengl

请有人向我解释这个错误：
如果非零缓冲区对象名称绑定到启用的数组并且缓冲区对象的数据存储当前已映射，则会生成 GL_INVALID_OPERATION。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:48:31.697

我相信当你有一个通过指针函数（例如`glVertexAttribPointer`）主动绑定的 VBO 时，它会触发，同时 VBO 被映射到客户端内存`glMapBuffer`。

`glMapBuffer`根据文档，当 VBO 映射到客户端内存时，您不能使用它：

> 在使用其缓冲区对象之前，必须使用 glUnmapBuffer 取消映射映射的数据存储。否则，任何试图取消引用缓冲区对象的数据存储的 GL 命令都会产生错误。

# php - 如果选中复选框，则使用 PHP 更改值

> ID：11069090
> 
> 赞同：1
> 
> 时间：2012-06-17T05:19:38.767
> 
> 标签：php, forms

我正在尝试完成一项简单的任务（但对我来说并不简单）。

我有一个表格，但这个复选框有问题。

```
 <input type="checkbox" name="b"  
<?php if (isset($_POST[b])) echo "value='y'"; else echo "value='n'"; ?>/> 
```

我不确定我是否使用了正确的，但它对我不起作用。

所以基本上我想要的值将是`input`如果复选框被选中，否则如果复选框未被选中，它将始终是。`b``y``n`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T05:32:40.007

这不是复选框的工作方式。

当`checked`属性存在时检查它。

```
<input type="checkbox" name="a" value="a" checked /> Checked
<input type="checkbox" name="a" value="a" /> NOT Checked 
```

所以你想使用

```
<input type="checkbox" name="a" value="a" <?php echo isset($_POST['b']) ? "checked" : ""; ?>/> 
```

现在如果`$_POST['b']`设置，复选框将被选中。

另外，你有`$_POST[b]`. `b`应该用引号引起来。它应该是`$_POST['b']`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T08:13:27.857

您必须使用两个条件，一个是显示选中/未选中，第二个是显示 y/n

```
 <input type="checkbox" name="b" <?php echo (isset($_POST['b'])?"value='y'":"value='n'")?> 
 <?php echo (isset($_POST['b'])?"checked":"") ?>  /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T05:27:08.640

测试代码！

```
<form method="post">
   <input type="checkbox" name="b" <?php if (isset($_POST['b'])) echo "value='y'"; else echo "value='n'"; ?>/>
   <input type="submit" name="asd" value="asd">
</form> 
```

因此，请使用以下内容

```
<?php if (isset($_POST['b'])) echo "value='y'"; else echo "value='n'"; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-08T03:52:11.670

这对我有用：
    首先：给复选框一个默认值
    然后：只有在选中该框时才分配所需的值。

```
 <input type="hidden" name="b" value="n">
    <input type="checkbox" name="b" value="y" > 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-25T04:24:32.810

*部署批准：

```
 <input type="radio" name="dep_approval_status" value="Approved"
            <?php 
                if ($deploy['dep_approval_status'] === "Approved")
                {
                    echo ' checked'; 
                }

            ?> 
        /> Yes, approved 

        <input type="radio" name="dep_approval_status" value="Not Approved"
            <?php 
                if ($deploy['dep_approval_status'] === "Not Approved")
                {
                    echo ' checked';
                }
            ?> 
        /> Not Approved 
```

# android - 解析 XML 时出错：格式不正确（令牌无效）

> ID：11069093
> 
> 赞同：1
> 
> 时间：2012-06-17T05:20:02.603
> 
> 标签：android, eclipse, parsing

我是 Java 编程的新手，现在正在严格遵循一个教程。我深入研究了它，直到发生了我无法解决的事情。我搜索了谷歌并一遍又一遍地查看代码，并没有发现任何错误。这是我的代码的屏幕截图....nvm 我不允许发布图片，因为我是新手，所以这里是复制的代码。第一个 X 表示解析 XML 时出错：格式不正确（无效标记），第二个 X 表示 XML 文档结构必须在同一实体内开始和结束。我感谢所有的帮助，谢谢。

```
< ?xml version="1.0" encoding="utf-8"?>
< LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/myMessage"
        android:text="@string/hello" />

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/myButton"
        android:text="@string/answer" 
        />

< LinearLayout--------1st X is located here. The < is not spaced in the code but spaced here because that was the only way i could put it here
    android:layout_width="fill_parent"
    android:layout_height="20dp"
    android:orientation="horizontal">

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:background="#ff0000"
        android:textColor="#000000"
        android:text="red" />
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:background="#00ff00"
        android:textColor="#000000"
        android:text="green" />
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:background="#0000ff"
        android:textColor="#000000"
        android:text="blue" />

< LinearLayout >---------2nd X is located here. The < is not spaced in the code but spaced here because that was the only way i could put it here and there is a / in between < and LinearLayout 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:34:24.687

xml 的结构不好...下面是更正后的。< LinearLayout 之间不应有空格，并且此标签未正确关闭。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/myMessage"
    android:text="@string/hello" />

<Button
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/myButton"
    android:text="@string/answer" 
    />

<LinearLayout
android:layout_width="fill_parent"
android:layout_height="20dp"
android:orientation="horizontal">

<TextView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:gravity="center"
    android:background="#ff0000"
    android:textColor="#000000"
    android:text="red" />
<TextView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:gravity="center"
    android:background="#00ff00"
    android:textColor="#000000"
    android:text="green" />
<TextView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:gravity="center"
    android:background="#0000ff"
    android:textColor="#000000"
    android:text="blue" />

</LinearLayout >
</LinearLayout > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T05:36:39.087

`</LinearLayout>`你错过了底部的一个关闭标签。这里是工作的`

```
<TextView
    android:id="@+id/myMessage"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

<Button
    android:id="@+id/myButton"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/answer" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="20dp"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#ff0000"
        android:gravity="center"
        android:text="red"
        android:textColor="#000000" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#00ff00"
        android:gravity="center"
        android:text="green"
        android:textColor="#000000" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#0000ff"
        android:gravity="center"
        android:text="blue"
        android:textColor="#000000" />
</LinearLayout> 
```

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T05:37:24.630

您不能允许在打开的标签和标签名称之间留出空格。给出没有空格的线性布局标签

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" > 
```

这是错误的

```
< LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T05:37:26.963

从标签中删除空格`<LinearLayout`.use`<LinearLayout`而不是`< LinearLayou`as

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="20dp"
    android:orientation="horizontal">
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/myMessage"
        android:text="@string/hello" />

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/myButton"
        android:text="@string/answer" 
        />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:background="#ff0000"
        android:textColor="#000000"
        android:text="red" />
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:background="#00ff00"
        android:textColor="#000000"
        android:text="green" />
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:background="#0000ff"
        android:textColor="#000000"
        android:text="blue" />
</LinearLayout>
</LinearLayout> 
```

# shell - CakePHP：Cakefile 与 CoffeeScript 冲突

> ID：11069095
> 
> 赞同：1
> 
> 时间：2012-06-17T05:20:05.103
> 
> 标签：shell, cakephp, cakephp-1.3, coffeescript

当我尝试使用“蛋糕”命令时，我总是收到此错误。它似乎与 CoffeeScript 冲突。

```
/usr/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:108
throw new Error("Cakefile not found in " + (process.cwd()));
      ^
Error: Cakefile not found in /Users/kevingorjan/e-Merce/Learning/CakePHP/Blog_demo/lib/Cake/Console
at /usr/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:108:11
at /usr/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:106:14
at /usr/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:106:14
at /usr/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:106:14
at /usr/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:106:14
at /usr/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:106:14
at /usr/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:106:14
at /usr/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:106:14
at /usr/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:106:14
at /usr/local/lib/node_modules/coffee-script/lib/coffee-script/cake.js:106:14 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T23:53:45.693

`$ vi .bash_profile`

我的路径中有节点和咖啡脚本以及各种各样的东西。我的 .bash_profile 中有以下几行：

```
#Path
export PATH="/usr/local/bin:/usr/local/sbin:/usr/local/mysql/bin:/usr/local/share/npm/bin:$PATH" 
```

当我像他们建议的那样将蛋糕的东西添加到我的路径时[http://book.cakephp.org/2.0/en/console-and-shells.html#adding-cake-to-your-path](http://book.cakephp.org/2.0/en/console-and-shells.html#adding-cake-to-your-path)我得到了同样的错误你拿到：

```
#Path
export PATH="/usr/local/bin:/usr/local/sbin:/usr/local/mysql/bin:/usr/local/share/npm/bin:$PATH"

export PATH="$PATH:/Users/eO_Ae/cakephp/lib/Cake/Console" 
```

我所做的修复它是：

```
# Cake PHP
PATH="/Users/eO_Ae/cakephp/lib/Cake/Console:$PATH"

# Path
PATH="$PATH:/usr/local/bin:/usr/local/sbin:~/bin:/usr/local/share/npm/bin"

export PATH 
```

这使 cakephp `cake`shell 命令优先于 coffescript 之一。

干杯!

# javascript - 将 VJET 类型注解转换为 Closure 类型注解

> ID：11069097
> 
> 赞同：0
> 
> 时间：2012-06-17T05:20:33.663
> 
> 标签：javascript, google-closure-compiler, google-closure, vjet

EBay 的 VJET 和 Google 的 Closure Compiler 都在 Javascript 注释中使用类型注释。

为什么他们选择了不兼容的语法？

VJET

```
function add(a, b) {  //< Number add(Number, Number)
    return a + b ;
} 
```

谷歌关闭

```
/**
 * Queries a Baz for items.
 * @param {number} groupNum Subgroup id to query.
 * @param {string|number|null} term An itemName,
 *     or itemId, or null to search everything.
 */
goog.Baz.prototype.query = function(groupNum, term) {
  ...
}; 
```

有没有办法自动将 VJET 类型注释转换为 Google Closure 类型注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:16:30.613

没有将 vjetdocs 翻译成 jsdocs 的自动方法，但这里是查询 api 的手动翻译。首先，我将从闭包的 jsdoc 转换为 vjetdoc，然后再返回以向您展示差异。

```
/**
 * Queries a Baz for items.
 * @param {number} groupNum Subgroup id to query.
 * @param {string|number|null} term An itemName,
 *     or itemId, or null to search everything.
 */ 
```

VJET 文档中的 groupNum 是第一个位置，类型是 Number（不是 number） vjet 使用区分大小写的 EcmaScript 标准类型名称。

itemName 是 VJET 文档将是混合类型，可以是数字或字符串。VJETDoc 目前没有名为 Null 的默认类型。如果有 Null 数据类型，它将是大写的。我相信这应该添加到 VJET 中，但是可以传入 null 并且 VJET 不会抱怨下面的声明。

您可以在 vjetdoc 中编写它，带或不带函数和参数的名称（如果您不想重复自己...位置接管。

```
// shortest form
function query(groupNum, itemName) {  //< void (Number, {String|Number}?)

}
//
// longer form - on same line as declaration
function query(groupNum, itemName) {  //< void query(Number groupNum, {String|Number}? itemName)

}

// longer form mixed with jsdocs

/**> void query(Number groupNum, {String|Number}? itemName);
 * 
 * Queries a Baz for items.
 * @param {number} groupNum Subgroup id to query.
 * @param {string|number|null} term An itemName,
 *     or itemId, or null to search everything.
*/
function query(groupNum, itemName) {  

}

query(10,"test");
query(30,20);
query(20,null); 
```

# android - 加速浮点运算（Android ARMv6）

> ID：11069099
> 
> 赞同：4
> 
> 时间：2012-06-17T05:21:20.310
> 
> 标签：android, optimization, floating-point, arm, armv6

我正在使用本机代码在 Android 中进行一些图像压缩。由于各种原因，我不能使用预建库。

我使用 android-ndk-profiler 分析了我的代码，发现瓶颈是——令人惊讶的是——浮点运算！这是配置文件输出：

```
Flat profile:

Each sample counts as 0.01 seconds.
  %   cumulative   self              self     total           
 time   seconds   seconds    calls  ms/call  ms/call  name    
 40.37      0.44     0.44                             __addsf3
 11.93      0.57     0.13     7200     0.02     0.03  EncodeBlock
  6.42      0.64     0.07   535001     0.00     0.00  BitsOut
  6.42      0.71     0.07                             __aeabi_fdiv
  6.42      0.78     0.07                             __gnu_mcount_nc
  5.50      0.84     0.06                             __aeabi_fmul
  5.50      0.90     0.06                             __floatdisf
  ... 
```

我用谷歌搜索了 __addsf3 ，显然它是一个软件浮点运算。呸。我对 ARMv6 架构核心做了更多的研究，除非我遗漏了什么，否则它没有硬件浮点支持。那么我可以在这里做些什么来加快速度呢？固定点？我知道这通常是用整数完成的，但我不确定如何转换我的代码来做到这一点。有没有我可以设置的编译器标志，所以它会这样做？欢迎提出其他建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T06:26:09.530

当然，你可以只用整数算术做任何事情（毕竟这正是你的程序现在正在做的事情），但它是否可以更快地完成，取决于你到底想要做什么。

浮点数是一种通用解决方案，您可以在大多数情况下应用并忘记它，但是您的问题确实需要从难以置信的小到难以置信的大并且具有 52 位尾数精度的数字，这有点罕见。假设您的计算是关于具有双精度浮点数的图形，您可以从远小于亚原子尺度到远大于宇宙的大小......真的需要那个范围吗？提供的精度当然取决于 FP 的刻度，但您真正需要的精度是多少？

您的“内循环”中使用的数字是什么？在不知道的情况下，很难说计算是否可以提高很多。几乎可以肯定它可以变得更快（FP 是一种通用的盲目解决方案），但您可能希望获得的增益程度会有很大差异。我不知道具体的实现，但我希望它相当有效（对于一般情况）。

您应该瞄准更高的逻辑优化级别。

对于基于说 DCT 或小波变换的图像（去）压缩，我认为确实不需要浮点运算：您可以只考虑您的数字的确切比例并使用整数运算。此外，由于产生近似结果的能力，您可能还具有额外的自由度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T07:15:28.940

先看6502的优秀回答...

大多数处理器没有 fpus，因为它们不是必需的。当他们出于某种原因尝试遵守同样不必要的 IEEE754 时，需要其中任何一项的情况非常罕见。fpu 只是一个整数 alu，它周围有一些东西来跟踪浮点，所有这些你都可以自己做。

如何？让我们考虑小数和美元，我们可以考虑 110.50 美元，加上 0.07 美元，得到 110.57 美元，或者你可以用便士完成所有事情，11050 + 7 = 11057，然后当你为用户打印它时，在正确的位置放置一个点。这就是 fpu 正在做的所有事情，而这就是您需要做的所有事情。[这个链接可能会也可能不会对这个http://www.divms.uiowa.edu/~jones/bcd/divide.html](http://www.divms.uiowa.edu/~jones/bcd/divide.html)有所了解

不要以这种方式覆盖所有 ARMv6 处理器，这不是 ARM 的分类方式。有些内核可以选择 FPU，或者您可以在从 ARM 购买后自己添加一个，等等。例如，ARM11 是 ARMv6，带有 fpu 选项。

此外，仅仅因为你可以自己跟踪小数点，如果有一个硬 fpu，它可能比你自己在定点上做更快。同样，不知道如何使用 fpu 并得到不好的结果是可能的，而且很容易，只是让它们更快。很容易写出糟糕的浮点代码。无论您使用固定还是浮动，您都需要跟踪数字的范围，并从该控制中移动点以将整数数学保持在尾数内的核心。这意味着要有效地使用浮点数，您应该考虑整数数学在做什么。一个非常常见的错误是认为乘法会破坏您的精度，而实际上加法和减法对您的伤害最大。

# javascript - html5播放器不播放

> ID：11069102
> 
> 赞同：0
> 
> 时间：2012-06-17T05:22:19.460
> 
> 标签：javascript, css, html

我正在尝试在我正在开发的网站（http://videojs.com/）中使用 VideoJS，但是我正在尝试在页面上加载一个简单的 YouTube 视频以进行测试，但仍然无法正常工作：

```
 <div class="video-js-box">
            <!-- Using the Video for Everybody Embed Code http://camendesign.com/code/video_for_everybody -->
         <div style="position: absolute; top: 50px; left: 600px; display:none">
            <video id="my_video_1" class="video-js vjs-default-skin" controls
              preload="auto" width="640" height="264" poster="my_video_poster.png"
              data-setup="{}">
              <source src="http://www.youtube.com/watch?v=ehjDXDVpLgo" type='video/mp4'></source>
              <source src="http://www.youtube.com/watch?v=ehjDXDVpLgo" type='video/webm'></source>
            </video>
            <!-- Download links provided for devices that can't play video in the browser. -->
            <p class="vjs-no-video"><strong>Download Video:</strong>
              <a href="http://www.youtube.com/watch?v=ehjDXDVpLgo">MP4</a>,
              <a href="http://www.youtube.com/watch?v=ehjDXDVpLgo">WebM</a>,
              <a href="http://www.youtube.com/watch?v=ehjDXDVpLgo">Ogg</a><br>
              <!-- Support VideoJS by keeping this link. -->
              <a href="http://videojs.com">HTML5 Video Player</a> by VideoJS
            </p>
          </div>    
        <div style="clear:both;"></div>
    </div><!--main--> 
```

在页面上我有：

```
<link href="http://vjs.zencdn.net/c/video-js.css" rel="stylesheet">
  <script src="http://vjs.zencdn.net/c/video.js"></script> 
```

任何线索这里出了什么问题？我期待能够在我的页面上加载和播放该视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:47:46.103

不要使用 Youtube 视频来测试 videojs，因为很难找到视频源的直接链接。看看[这个问题](https://stackoverflow.com/questions/5157377/show-youtube-video-source-into-html5-video-tag)。

您提供的代码链接到 youtube 页面而不是视频源。

```
<source src="http://www.youtube.com/watch?v=ehjDXDVpLgo" type='video/mp4'></source> 
```

视频源可能隐藏[在这里，](http://s.ytimg.com/yt/swfbin/watch_as3-vflbPspVE.swf)但我不确定。使用您自己网站上托管的视频进行测试。

但是，如果您仍想使用 youtube 视频，请查看[Video.js 论坛](http://help.videojs.com/discussions/suggestions/28-ive-fixed-youtube-support-for-videojs)，那里有人提供了解决方法的代码。

嵌入 youtube 视频的更简单方法是单击视频页面下的“共享”然后“嵌入”选项卡，然后将代码复制并粘贴到您的网站上。这会给你这样的东西。

```
<iframe width="560" height="315" 
    src="http://www.youtube.com/embed/gZKXrLjCwa8"
    frameborder="0" allowfullscreen>
</iframe> 
```

另外，我建议再次阅读 Video.js 文档以[了解如何设置](http://videojs.com/docs/setup/).

# asp.net - 使用 asp.net 将字节数组转换为 pdf 文件

> ID：11069103
> 
> 赞同：0
> 
> 时间：2012-06-17T05:22:42.837
> 
> 标签：asp.net, pdf, byte

我有一个字节数组，现在我想将字节数组转换为 pdf 文件。我正在使用以下代码，但是当我尝试查看/打开 pdf 文件时，它显示

“Adobe 阅读器无法打开 'sample.pdf'，因为它不是受支持的文件类型或该文件已损坏（例如，它作为电子邮件附件发送且未正确解码）”

谢谢， 阿雷芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T05:27:35.653

在将字节数组写入 response.outputstream 之前，请将其清除并将内容类型设置为“application/pdf”。使用后冲洗。

# mercurial - 显示指定仓库的 hg 状态

> ID：11069105
> 
> 赞同：3
> 
> 时间：2012-06-17T05:23:24.410
> 
> 标签：mercurial, status

我无法获得给定 repo 的 hg 头或状态。有什么办法吗？

```
 ]$ hg status /home/user/test_repo/
   abort: /home/user/test_repo/ not under root
   ]$ sudo hg head /home/user/test_repo/
   abort: unknown revision '/home/user/test_repo/'! 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T05:36:43.283

放在`-R`路径之前

```
hg head -R /home/user/test_repo/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T12:59:25.410

您得到了答案`-R`并且有效，但这对于脚本来说更常见。大多数情况下，一个只是进入一个正在使用的存储库：

```
cd test_repo
hg status 
```

# asp.net-mvc - 将照片上传到 MVC 4 应用程序

> ID：11069107
> 
> 赞同：6
> 
> 时间：2012-06-17T05:23:32.060
> 
> 标签：asp.net-mvc, file-upload, view, controller

我正在尝试创建一个控制器来在我的 MVC4 应用程序中上传照片。但我不断收到这个错误。输入不是有效的 Base-64 字符串，因为它包含非 base 64 字符、两个以上的填充字符或填充字符中的非空白字符。

照片控制器.cs

```
 public class PhotoController : Controller
    {
        public ActionResult Index()
        {
            using (var ctx = new BlogContext())
            {
                return View(ctx.Photos.AsEnumerable());
            }
        }

        public ActionResult Upload()
        {
            return View(new Photo());
        }

        [HttpPost]
        public ActionResult Upload(PhotoViewModel model)
        {
            var photo = Mapper.Map<PhotoViewModel, Photo>(model);
            if (ModelState.IsValid)
            {
                PhotoRepository.Save(photo);
                return RedirectToAction("Index");
            }
            return View(photo);
        }
    } 
```

照片.cs

```
public class Photo
    {
    public int Id { get; set; }

    public Byte[] File { get; set; }

    public string Name { get; set; }

    public string Description { get; set; }

    public string AlternateText { get; set; }
    } 
```

PhotoViewModel.cs

```
public class PhotoViewModel
    {
        public int Id { get; set; }

        public HttpPostedFileBase File { get; set; }

        public string Name { get; set; }

        public string Description { get; set; }

        public string AlternateText { get; set; }
    } 
```

/照片/上传.cshtml

```
 @model Rubish.Models.Photo

    @{
        ViewBag.Title = "Upload";
    }

    <h2>Upload</h2>

    @using (Html.BeginForm("Upload","Photo",FormMethod.Post,new {enctype="multipart/form-data"})) {
        @Html.ValidationSummary(true)

        <fieldset>
            <legend>Photo</legend>

            <div class="editor-label">
                @Html.LabelFor(model => model.Name)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Name)
                @Html.ValidationMessageFor(model => model.Name)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.Description)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Description)
                @Html.ValidationMessageFor(model => model.Description)
            </div>
            <div class="editor-label">
                <label for="file">FileName:</label>
            </div>
            <div class="editor-field">
                <input name="File" id="File" type="file"/>
            </div>
            <p>
                <input type="submit" value="Create" />
            </p>
        </fieldset>
    }

    <div>
        @Html.ActionLink("Back to List", "Index")
    </div>

    @Scripts.Render("~/bundles/jqueryval") 
```

照片库

```
public class PhotoRepository 
    {
        private static BlogContext _ctx;

        public PhotoRepository()
        {
            _ctx = new BlogContext();
        }

        public static void Save(Photo p)
        {
            _ctx.Photos.Add(p);
            _ctx.SaveChanges();
        }
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-17T06:23:36.877

问题是您的视图模型中有一个名为`File`type的属性，`byte[]`并且您还使用了一个名为`file`type的操作参数`HttpPostedFileBase`。问题是，当模型绑定器遇到类型模型的属性时，`byte[]`它会尝试使用 base64 将其值与请求值绑定。除了在请求中你有一个`multipart/form-data`上传文件的编码值并且你得到一个异常。

解决此问题的正确方法是使用视图模型，而不是将域模型传递给视图：

```
public class PhotoViewModel
{
    public HttpPostedFileBase File { get; set; }

    ... other properties
} 
```

控制器动作现在将变为：

```
[HttpPost]
public ActionResult Upload(PhotoViewModel model)
{
    if (ModelState.IsValid)
    {
        // map the domain model from the view model that the action
        // now takes as parameter
        // I would recommend you AutoMapper for that purpose
        Photo photo = ... 

        // Pass the domain model to a DAL layer for processing
        Repository.Save(photo);

        return RedirectToAction("Index");
    }
    return View(photo);
} 
```

我完全不推荐的糟糕方法是重命名文件输入以欺骗模型活页夹：

```
<input name="PhotoFile" id="File" type="file"/> 
```

和你的控制器动作：

```
[HttpPost]
public ActionResult Upload(Photo photo, HttpPostedFileBase photoFile)
{
    ...
} 
```

# c++ - 'uint32_t' 没有命名类型

> ID：11069108
> 
> 赞同：89
> 
> 时间：2012-06-17T05:23:51.427
> 
> 标签：c++, uint32-t, cstdint

我正在尝试编译 2007 年编写的 C++ 软件包，但出现此错误：

`error: ‘uint32_t’ does not name a type`

这发生在使用 g++ 4.5.2 的 64 位 Ubuntu 中。它使用 g++ 4.1.2 在 64 位 CentOS 上编译良好。

`#include`我缺少一个或一个编译器标志吗？或者，我应该使用`typedef`分配`uint32_t`给 a`size_t`还是 a `unsigned int`？

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-06-17T05:37:11.830

您需要包括 stdint.h

```
 #include <stdint.h> 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-06-17T05:35:33.657

您需要`#include <cstdint>`，但这可能并不总是有效。

问题在于，某些编译器通常会在此类标准到位之前自动导出各种标头中定义的名称或提供的类型。

现在，我说“可能并不总是有效”。这是因为 cstdint 标头是 C++11 标准的一部分，并且在当前的 C++ 编译器上并不总是可用（但通常是）。stdint.h 头文件是 C 等价的，是 C99 的一部分。

`boost/cstdint.hpp`为了获得最佳可移植性，如果您愿意使用 boost ，我建议您使用 Boost 的标头。否则，您可能能够摆脱 #include'ing `<cstdint>`。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-03-13T14:35:56.973

我在 Mac OSX 10.6.8 上也遇到了同样的问题，不幸的是，将`#include <stdint.h>`or添加`<cstdint.h>`到相应的文件并没有解决我的问题。但是，经过更多搜索，我发现这个解决方案建议添加`#include <sys/types.h>`对我来说效果很好！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-21T00:39:02.993

其他答案假设您的编译器符合 C++11。如果是这样就好了。但是，如果您使用的是较旧的编译器怎么办？

我在网上某处找到了以下黑客。它对我来说足够好：

```
 #if defined __UINT32_MAX__ or UINT32_MAX
  #include <inttypes.h>
  #else
  typedef unsigned char uint8_t;
  typedef unsigned short uint16_t;
  typedef unsigned long uint32_t;
  typedef unsigned long long uint64_t;
  #endif 
```

当然，它不是便携式的。但它可能适用于您的编译器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-18T05:35:19.527

如果它在您包含 opencv 标头时发生。

我建议更改标题的顺序。

将 opencv 头文件放在标准 C++ 头文件的下方。

像这样：

```
#include<iostream>
#include<opencv2/core/core.hpp>
#include<opencv2/highgui/highgui.hpp> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-11T03:46:45.740

在 base.mk 文件中添加以下内容。以下第 3 行很重要 `-include $(TOP)/defs.mk`

```
CFLAGS=$(DEBUG) -Wall -W -Wwrite-strings 
CFLAGS_C=-Wmissing-prototypes
CFLAGS_CXX=-std=c++0x
LDFLAGS=
LIBS= 
```

避免#error 此文件需要对即将推出的 ISO C++ 标准 C++0x 的编译器和库支持。此支持目前是实验性的，必须使用 -std=c++0x 或 -std=gnu++0x 编译器选项启用

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-05T12:15:31.897

我在尝试编译从 Internet 下载的库时遇到了同样的问题。就我而言，代码中已经有一个`#include <cstdint>`。我解决了它添加一个：

```
using std::uint32_t; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-07T04:30:43.987

只需导航到 /usr/include/x86_64-linux-gnu/bits 打开 stdint-uintn.h 并添加这些行

```
typedef __uint8_t uint8_t;
typedef __uint16_t uint16_t;
typedef __uint32_t uint32_t;
typedef __uint64_t uint64_t; 
```

再次打开 stdint-intn.h 并添加

```
typedef __int8_t int8_t;
typedef __int16_t int16_t;
typedef __int32_t int32_t;
typedef __int64_t int64_t; 
```

请注意，这些行已经存在，只需复制并添加缺少的行欢呼..

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2019-10-12T06:12:26.563

您需要包括 iostream

```
#include <iostream>
using namespace std; 
```

# c# - 更新后如何连续刷新datagridview

> ID：11069113
> 
> 赞同：2
> 
> 时间：2012-06-17T05:24:47.593
> 
> 标签：c#, winforms, ms-access

我正在使用此代码在访问数据库中更新数据后更新我的数据网格视图。数据每秒更新一次，我将此代码保持在后台循环中，但是当我启动后台时，正在显示一个大 X。

```
 try
        {
            OleDbDataAdapter dAdapter;
            OleDbCommandBuilder cBuilder;
            DataTable dTable;
            BindingSource bSource = new BindingSource();
        dAdapter = new OleDbDataAdapter("Select * from data", cls_rt.con);

        //create a command builder
        cBuilder = new OleDbCommandBuilder(dAdapter);

        //create a DataTable to hold the query results
        dTable = new DataTable();

        //fill the DataTable
        dAdapter.Fill(dTable);

        //BindingSource to sync DataTable and DataGridView
        bSource = new BindingSource();

        //set the BindingSource DataSource
        bSource.DataSource = dTable;

        DataGridView.DataSource = dTable;
        }
        catch (Exception)
        {

        } 
```

然后我使用了这段代码

```
 try
        {
            this.dataTableAdapter.Fill(this.rTDataSet.data);
        } 
```

并保持循环

```
 dataDataGridView.Update(); 
```

然后

```
 dataDataGridView.Refresh(); 
```

然后

```
 dataDataGridView.RefreshEdit(); 
```

但它对我有用

我希望我的datagridview每秒更新一次，当它更新时还有一件事我不希望整个gridview更新我只想更新特定的单元格。

如果有人可以帮助我，他们将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T09:16:10.817

几乎所有 datagridview 的刷新/更新值都会将您发送到相同的方式..以这种方式“刷新”您的 dgv 最简单的方法是在您需要刷新值时放置此行

```
yourDataGridview.DataSource = yourDataRetrievingMethod  // in your situation your dataset and/or table 
```

# php - 在单独的字段中插入每个数组项

> ID：11069120
> 
> 赞同：0
> 
> 时间：2012-06-17T05:26:28.093
> 
> 标签：php, mysql

我已经彻底查看了，但我还没有找到解决方案（或者我可能没有意识到我是新手）......这是我的问题：

我的表有这六个字段：用户名、want1、want2、want3、want4、want5。我的表单有用户名和一个多重选择框，其中选择了五个愿望。我想将该用户名和这些选择作为记录一起插入到表中相应的“单元格”中。到目前为止，这是我的代码（用于提交/$_POST 操作）：

*注意：我将多个 SELECT 框命名为“wants[]”，以便它知道它是一个数组。

```
<?php
//variables
$username = $_POST['username'];
$want = $_POST['wants'];
//connect
mysql_connect("localhost", "root", "password") or die(mysql_error()); 
mysql_select_db("test") or die(mysql_error()); 
//insert 
mysql_query("INSERT INTO The_Table (username,want1,want2,want3,want4,want5) VALUES ('$username','$want[0]','$want[1]','$want[2]','$want[3]','$want[4]')");
?> 
```

当我测试时，没有显示任何错误/错误，但表中没有记录。我对编码很陌生，我很抱歉。希望有一个简单的解决方案。非常感谢您的任何帮助或建议！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:23:59.550

试试这个代码，我希望它对你有用......

> 表单.php

```
<form action="insert.php" method="post" name="form">
user_name : <input name="u_name" type="text" /><br />
wish 1 : <input name="wish_1" type="checkbox" value="1" /><br />
wish 2 : <input name="wish_2" type="checkbox" value="2"/><br />
wish 3 : <input name="wish_3" type="checkbox" value="3"/><br />
wish 4 : <input name="wish_4" type="checkbox" value="4"/><br />
wish 5 : <input name="wish_5" type="checkbox" value="5"/><br />
<input type="submit" />
</form> 
```

> 插入.php

```
<?php
//variables
$username = isset($_POST['u_name'])?$_POST['u_name']:'';
$wish_1   = isset($_POST['wish_1'])?$_POST['wish_1']:'';
$wish_2   = isset($_POST['wish_2'])?$_POST['wish_2']:'';
$wish_3   = isset($_POST['wish_3'])?$_POST['wish_3']:'';
$wish_4   = isset($_POST['wish_4'])?$_POST['wish_4']:'';
$wish_5   = isset($_POST['wish_5'])?$_POST['wish_5']:'';
//connect
mysql_connect("localhost", "root", "password") or die(mysql_error()); 
mysql_select_db("test") or die(mysql_error()); 
//insert 
mysql_query("INSERT INTO The_Table (username,want1,want2,want3,want4,want5) 
VALUES ('".$username."','".$wish_1."','".$wish_2."'
,'".$wish_3."','".$wish_4."','".$wish_5."')");
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T05:36:50.847

在您的描述中，您说您将选择命名为“wishs”和字段“wish1”、“wish2”等，但是在您的代码中您将其命名为 ['wants'] 和“want1，want2”。如果您的代码确实是这样，那将导致问题...

# java - 在 Java 接口中添加新方法，使其对继承类的更改最少

> ID：11069123
> 
> 赞同：11
> 
> 时间：2012-06-17T05:27:30.637
> 
> 标签：java, inheritance, interface

> **可能重复：**
> [向接口添加额外的方法](https://stackoverflow.com/questions/3751063/adding-extra-method-to-interface)

我有一个场景，`Interface X`已经用我的数千个课程实现了。现在我想在其中添加新方法`Interface X`。那么如何以最小的方式进行更改以解决我所有类中方法被覆盖的问题

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-17T06:05:22.640

我只会为需要其他方法的类创建接口的扩展......

```
public interface BaseInterface {
    public int exampleMethod();
}

public interface ExtendedInterface extends BaseInterface {
    public int anotherMethod();
} 
```

数以千计的类已经实现`BaseInterface`。对于需要额外方法的类，您将它们更改为 implementation `ExtendedInterface`。

如果您的对象存储在诸如`BaseInterface[]`数组之类的集合中，这仍然有效，因为 type`ExtendedInterface`的对象也是 type 的对象`BaseInterface`，因此它们仍然可以存储在同一个公共集合中。

例如，这仍然是完全有效的......

```
BaseInterface[] objects = new BaseInterface[2];
objects[0] = new ClassThatImplementsBaseInterface();
objects[1] = new ClassThatImplementsExtendedInterface(); 
```

但是，如果您需要访问 的新方法`ExtendedInterface`，但对象存储在`BaseInterface`集合中，则需要将其转换为`ExtendedInterface`才能使用它...

```
BaseInterface[] objects = new BaseInterface[1];
objects[0] = new ClassThatImplementsExtendedInterface();

if (objects[0] instanceof ExtendedInterface){
    // it is an ExtendedInterface, so we can call the method after we cast it
    ((ExtendedInterface)objects[0]).anotherMethod();
}
else {
    // it is a BaseInterface, and not an ExtendedInterface
} 
```

这可能适合也可能不适合，具体取决于您的使用情况。

如果您确实需要所有数千个对象来实现新方法，则必须将该方法添加到 IDE 中`BaseInterface`，然后使用 IDE 或文本编辑器的功能在所有类中实现该方法。例如，您可以在文本编辑器中将它们全部打开并执行查找替换以*查找*每个类共有的内容，并将其*替换*为通用代码 + 新方法的默认代码。相当快速和无痛。我敢肯定，某些​​ IDE 可能还会自动将方法声明添加到所有继承类，或者至少可以在右键菜单中执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T06:16:07.467

如果新方法是接口的真正扩展，那么正确的做法是编辑接口并使用开发环境的工具找到必须实现新功能的所有位置。然后做作业。Eclipse 和 Netbeans 会做得很好。

[NB 我有点惊讶重构工具没有处理一些手动工作，但确实如此。]

如果在旧代码中大部分时间都不会调用新方法，则将新接口视为旧接口的扩展：

```
public interface NewInterface extends OldInterface {
    void newMethod();
} 
```

如果您需要将旧接口对象传递给具有 null 版本的新接口使用者`newMethod()`，您可以执行以下操作：

```
public class NewInterfaceWrapper<T extends OldInterface> implements NewInterface {

    private T wrapped;

    public NewInterfaceWrapper(T wrapped) {
        this.wrapped = wrapped;
    }

    // Define all the old interface methods and delegate to wrapped.method 

    // Now provide the null implementation of new method.
    void newMethod() { }
}

...

wantsNewInterface(new NewInterfaceWrapper(oldImplementer)); 
```

这并不漂亮，但是随着年龄的增长，大型系统通常会像这样长出粗糙的边缘。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T05:35:13.203

没有简单的方法可以做到这一点。如果向接口添加方法，所有实现类都必须覆盖它。如果将接口更改为抽象类，则还必须重构实现类。

但是你有一个类层次结构对吗？因此，您可以通过仅在基类中实现该方法来最小化工作。但这取决于您的具体要求和细节，所以我想很高兴实施！

如果没有简单的类层次结构可以用来实现类似的新方法，那么也许是时候考虑进行重大重写以减少未来的维护工作量了。

# jsp - 使用 Spring 设置资源文件夹

> ID：11069125
> 
> 赞同：0
> 
> 时间：2012-06-17T05:27:55.563
> 
> 标签：jsp, spring-mvc, jdbc, filenotfoundexception

我正在使用 Spring MVC + JDBC 来制作一个 Web 应用程序，并且我创建了一个 DAO 类来处理查询。我的问题是：我有这个非常大的查询，我想将它保存在一个 .txt 文件中并在 DAO 中读取查询，但我不断得到`java.io.FileNotFoundException`. 我应该把我的 .txt 和我的查询放在哪里？我试图将它存储在与 DAO 相同的类中，但它不起作用。

在使用 Spring MVC 时，我是一个完整的初学者，并且我已经安装了 SprigSource 工具套件，所以一切都是预先配置的。

有人可以帮我解决这个问题吗？

谢谢！

塞萨尔·巴尔加斯

[http://i.stack.imgur.com/fBNpV.png](http://i.stack.imgur.com/fBNpV.png)

[http://i.stack.imgur.com/jXu1K.png](http://i.stack.imgur.com/jXu1K.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T23:52:44.590

尝试：

`InputStream is = getClass().getResourceAsStream("queriesCountJava.txt");`

它在类路径中查找文件。

# python - 如何处理scrapy项目中的各种异常，在errback和回调中？

> ID：11069128
> 
> 赞同：11
> 
> 时间：2012-06-17T05:28:31.227
> 
> 标签：python, scrapy

我目前正在研究一个刮板项目，这对于确保每个请求都得到正确处理非常重要，即记录错误或保存成功的结果。我已经实现了基本的爬虫，现在我可以成功处理 99% 的请求，但我可能会收到验证码、50x、30x 之类的错误，甚至结果中没有足够的字段（然后我会尝试另一个网站找到缺失的字段）。

起初，我认为在解析回调中引发异常并在 errback 中处理它们更“合乎逻辑”，这可以使代码更具可读性。但是我尝试了只是发现errback只能捕获下载器模块中的错误，例如非200响应状态。如果我在回调中引发一个自我实现的 ParseError，蜘蛛只会引发它并停止。

即使我必须直接在回调中处理解析请求，我也不知道如何在回调中以干净的方式立即重试请求。你知道，我可能必须包含一个不同的代理来发送另一个请求，或者修改一些请求标头。

我承认我对scrapy比较陌生，但我已经来回尝试了好几天，仍然无法让它发挥作用……我已经检查了关于SO的每一个问题，但没有人匹配，在此先感谢您的帮助。

更新：我意识到这可能是一个非常复杂的问题，所以我尝试在下面的伪代码中说明场景，希望这会有所帮助：

```
from scraper.myexceptions import *

def parseRound1(self, response):

    .... some parsing routines ...
    if something wrong happened:
       # this causes the spider raises a SpiderException and stops
       raise CaptchaError
    ...

    if no enough fields scraped:
       raise ParseError(task, "no enough fields")
    else:
       return items

def parseRound2(self, response):
    ...some other parsing routines...

def errHandler(self, failure):
    # how to trap all the exceptions?
    r = failure.trap()
    # cannot trap ParseError here
    if r == CaptchaError:
       # how to enqueue the original request here?
       retry
    elif r == ParseError:
        if raised from parseRound1:
            new request for Round2
        else:
            some other retry mechanism
    elif r == HTTPError:
       ignore or retry 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T08:21:57.477

编辑 2012 年 11 月 16 日：Scrapy >=0.16 使用不同的方法将方法附加到信号，添加了额外的示例

最简单的解决方案是编写一个扩展，使用 Scrapy 信号在其中捕获故障。例如; 以下扩展将捕获所有错误并打印回溯。

你可以对失败做任何事情——比如保存到你的数据库，或者发送一封电子邮件——这本身就是一个[twisted.python.failure.Failure](http://twistedmatrix.com/documents/8.1.0/api/twisted.python.failure.Failure.html)的实例。

对于 0.16 之前的 Scrapy 版本：

```
from scrapy import signals
from scrapy.xlib.pydispatch import dispatcher

class FailLogger(object):
  def __init__(self):
    """ 
    Attach appropriate handlers to the signals
    """
    dispatcher.connect(self.spider_error, signal=signals.spider_error)

  def spider_error(self, failure, response, spider):
    print "Error on {0}, traceback: {1}".format(response.url, failure.getTraceback()) 
```

对于 0.16 及以上的 Scrapy 版本：

```
from scrapy import signals

class FailLogger(object):

  @classmethod
  def from_crawler(cls, crawler):
    ext = cls()

    crawler.signals.connect(ext.spider_error, signal=signals.spider_error)

    return ext

  def spider_error(self, failure, response, spider):
    print "Error on {0}, traceback: {1}".format(response.url, failure.getTraceback()) 
```

您可以在设置中启用扩展，例如：

```
EXTENSIONS = {
'spiders.extensions.faillog.FailLogger': 599,
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T13:45:58.093

> 起初，我认为在解析回调中引发异常并在 errback 中处理它们更“合乎逻辑”，这可以使代码更具可读性。但是我尝试了只是发现errback只能捕获下载器模块中的错误，例如非200响应状态。如果我在回调中引发一个自我实现的 ParseError，蜘蛛只会引发它并停止。

是的，你是对的 -`callback`并且`errback`仅用于下载器，`twisted`用于下载资源，而扭曲使用延迟 - 这就是需要回调的原因。

scrapy 中唯一的异步部分通常是下载器，所有其他部分同步工作。

因此，如果您想捕获所有非下载器错误 - 自己动手：

*   在回调中进行大尝试/除外
*   或者为你的回调做一个装饰器来做这个（我更喜欢这个想法）

# eclipse - Eclipse 文本编辑器中的多个光标标记

> ID：11069130
> 
> 赞同：1
> 
> 时间：2012-06-17T05:28:49.883
> 
> 标签：eclipse, plugins, marker, text-editor

我正在为 Eclipse 开发一个插件。我必须开发一个 Java 文本编辑器，它允许多个用户同时编写代码，就像在 Google Docs 中一样。但是我遇到了以下问题：文本编辑器必须显示在同一 Java 文档中编码的其他用户的光标位置。换句话说，我想在文本编辑器内容中放置一个标记（[请参阅此图像，显示我正在尝试实现](http://cache.gawker.com/assets/images/lifehacker/2010/04/cursor-chasing-th.png)的内容）。

我已经看过了`IMarker`，但是`IMarker`放在文本编辑器的垂直标尺上，这不是我想要的。我可以使用这个类吗？如果没有，我应该使用什么其他类？

我的另一个想法是在文本编辑器中插入一个 JTable，但我找不到如何做到这一点的方法。这是一个正确的方法，还是我错了？

堆栈溢出神，请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:14:37.417

Eclipse 有两个不同的概念来管理与文件相关的额外信息：标记和注释。注解与单个编辑器实例相关，可以通过相应的扩展点自定义其外观；标记用于永久存储额外信息（因此可以另外设置注释）。

我认为，您需要使用注释，因为标记对于实时协作来说太重了。如需将来参考，请参阅[Eclipse 帮助中的注释](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/editors_annotations.htm)；前段时间[我写了一篇博客文章](http://cubussapiens.hu/2010/11/markers-and-annotations-in-eclipse-for-error-feedback/)，描述了标记到注释的自动翻译（和定制）。

# c# - CookieContainer 的 SetCookie 方法抛出异常

> ID：11069131
> 
> 赞同：1
> 
> 时间：2012-06-17T05:28:55.270
> 
> 标签：c#, .net, wordpress, httpwebrequest, webrequest

我在 Set-Cookie 标头中从网络服务器返回了这个 cookie：

> PHPSESSID=462rutd8g0sbg9sinh3hqa2ol6; 路径=/,wordpress_test_cookie=WP+Cookie+检查；路径=/,wordpress_ca07030412dd7fcd4dbeaae0bd9f5df9=testemail@example.com; expires=星期日，2012 年 7 月 1 日 05:11:02 GMT；路径=/wp-内容/插件；httponly,wordpress_ca07030412dd7fcd4dbeaae0bd9f5df9=testemail@example.com; expires=星期日，2012 年 7 月 1 日 05:11:02 GMT；路径=/wp-admin；httponly,wordpress_logged_in_ca07030412dd7fcd4dbeaae0bd9f5df9=testemail@example.com; expires=星期日，2012 年 7 月 1 日 05:11:02 GMT；路径=/; httponly

我正在尝试使用`CookieContainer.SetCookies(new Uri(url),cookie);`

但它抛出异常'{“解析Uri的Cookie标头时发生错误' [http://www.smallbizads.us/](http://www.smallbizads.us/) '。”} System.FormatException {System.Net.CookieException'

一些挖掘显示 SetCookies 使用 , 来分解 cookie。但这显然不起作用，因为我有 Expires 标头，它也有`,`

知道如何解决这个问题吗？

**注意：**`Set-Cookie`由于 Wordpress 问题，我只能通过从标题中获取 cookie 来使用此方法。所以请不要建议任何其他选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T06:28:55.147

我花了一段时间来剖析它。

据我所知，您想为多个路径设置 WordPress 为一个域 (.smallbizads.us) 生成的 PHPSESSID（PHP 会话 ID）。有效期始终相同。

首先，您获取 cookie 标头：

```
string cookieHeader = "PHPSESSID=462rutd8g0sbg9sinh3hqa2ol6; ...etc;" 
```

用';'分割它 分隔符。

```
var cookies = cookieHeader.Split(new[] {';'}).ToList(); 
```

你最终得到了一个包含 12 个项目的列表。例如：

*   “PHPSESSID=462rutd8g0sbg9sinh3hqa2ol6”
*   " 路径=/,wordpress_test_cookie=WP+Cookie+检查"
*   “ expires=星期日，2012 年 7 月 1 日 05:11:02 GMT”
*   ...

此列表中多次显示到期日期，但它始终具有相同的值。只需获取第一个到期日期并将其转换为 DateTime。

```
var expiresValue = (from c in cookies
                    where c.Trim().StartsWith("expires")
                    select c).First();
var expiresOn = DateTime.Parse(expiresValue.Substring(expiresValue.IndexOf('=') + 1)); 
```

好的，现在让我们获取 cookie 的值。会话 ID：

```
var sessionId = (from c in cookies
                 where c.Trim().StartsWith("PHPSESSID")
                 select c).Single();
sessionId = sessionId.Substring(sessionId.IndexOf('=') + 1); 
```

现在获取需要设置 cookie 的路径。

```
var paths = (from c in cookies
             where c.Trim().StartsWith("path=")
             select c).ToList(); 
```

现在您可以使用 CookieContainer 和 System.Net.Cookie 类设置 cookie。

```
foreach (var path in paths)
{
    var cookie = new Cookie();
    cookie.Name = "PHPSESSID";
    cookie.Value = sessionId;
    cookie.Domain = ".smallbizads.us";
    cookie.Expires = expiresOn;
    cookie.HttpOnly = true;

    var container = new CookieContainer();

    var startIndex = path.IndexOf('=') + 1;
    var stopIndex = path.Contains(',') ? path.IndexOf(',') : path.Length;
    cookie.Path = path.Substring(startIndex, stopIndex - startIndex);

    container.Add(cookie);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:41:06.043

请注意，星期几不会添加其他信息，并且可以在没有它的情况下解析日期，我们可以使用正则表达式来删除日期和逗号。这是用于代替`CookieContainer.SetCookies()`.

```
/// <summary>
/// Although it's invalid, in the wild we sometimes see a Set-Cookie header with the form "Name=Value; expires=Sun, 23-Dec-2012 12:25:37 GMT".
/// Multiple cookies can be set with one header, comma separated, so CookieContainer.SetCookies() can't parse this due to the comma in the date.
/// Fortunately, the DayOfWeek provides no useful information, and the date can be parsed without it, so this removes the day and comma.
/// </summary>
public static void SetCookiesWithExpires(this CookieContainer cookies, Uri uri, String cookieHeader) {
    // Note: The Regex may be created more than once in different threads. No problem; all but the last will be garbage collected.
    Regex expiresEqualsDay = _expiresEqualsDay ?? (_expiresEqualsDay = new Regex(EXPIRES_EQUALS_DAY_PATTERN, RegexOptions.IgnoreCase | RegexOptions.Compiled));
    cookies.SetCookies(uri, expiresEqualsDay.Replace(cookieHeader, EXPIRES_EQUALS));
}
private static Regex _expiresEqualsDay;     // Lazy-initialized.
private const String EXPIRES_EQUALS_DAY_PATTERN = "; *expires=[A-Za-z]+, *";
private const String EXPIRES_EQUALS = "; Expires="; 
```

# javascript - 使用 new ActiveXObject("Excel.Application"); 时如何格式化生成的 Excel 文件

> ID：11069133
> 
> 赞同：2
> 
> 时间：2012-06-17T05:29:11.910
> 
> 标签：javascript, excel, activexobject

我正在使用 new ActiveXObject("Excel.Application") 将数据从 HTML 表导出到 excel...但问题是我无法确定列宽、行宽和其他一些格式选项...有人可以请吗帮助...？？？我正在使用下面的代码来生成 Excel 文件..

```
var ExcelApp = new ActiveXObject("Excel.Application");
var ExcelSheet = new ActiveXObject("Excel.Sheet");
ExcelSheet.Application.Visible = true;

for(var i=1; i<rowCount+1; i++) 
{   
    for(var j=0; j<colCount; j++) 
    {           
        str = mytable.getElementsByTagName("tr")[i].getElementsByTagName("td")[j].innerHTML;
        ExcelSheet.ActiveSheet.Cells(i+1,j+1).Value = str;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T11:31:23.937

尝试这个

这将给出列宽和行高。

```
Col = ExcelSheet.ActiveSheet.Columns("A").ColumnWidth;
rowHeight = ExcelSheet.ActiveSheet.Rows(1).RowHeight; 
```

很少有其他格式选项

```
ExcelSheet.ActiveSheet.PageSetup.Orientation = 2;
ExcelSheet.ActiveSheet.PageSetup.PaperSize = 5;
ExcelSheet.ActiveSheet.Columns("A").WrapText = true;
ExcelSheet.ActiveSheet.Range("A1:B10").NumberFormat = "0";
ExcelSheet.ActiveSheet.Range("A1:B10").HorizontalAlignment = -4131;
ExcelSheet.ActiveSheet.Cells(i+1,j+1).Interior.ColorIndex="15";
ExcelSheet.ActiveSheet.Name="Blah Blah"; 
```

如果您有 Excel，那么我建议您为其余的格式化选项录制一个宏，然后在 js 中简单地修改该代码。

# node.js - 保护 HTTPS 客户端

> ID：11069135
> 
> 赞同：0
> 
> 时间：2012-06-17T05:29:27.713
> 
> 标签：node.js, ssl, https, certificate, ssl-certificate

我正在开发一个应用程序，它使用 NodeJS（除其他外）从主网站下载一些未加密的 PDF 报告。这些资源是非常机密的，所以我需要确保流量是安全的。

因此，据我了解，我需要从受信任的 CA 购买和安装 SSL 证书，并`https.request(...)`在 NodeJS 中使用来下载 PDF 文件。但是我不知道如何确保主机文件没有被篡改，或者没有持续的 MITM 攻击，甚至证书仍然有效，没有过期并且是它必须的。我该怎么做呢？有配置参数吗？

* * *

如果有人可以解释是什么阻止了攻击者自己购买 SSL 证书，托管与原始站点的外部 IP 相同 IP 的本地服务器，并篡改 DNS 的目标以欺骗用户，那么奖励是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:03:08.657

这个想法是你打开 SSL 连接，检查对等证书，只有当它没有过期，是你期望的，等等，你才继续。一旦你很高兴你正在与你应该与之交谈的人交谈，SSL 就提供了针对重播、中间人等的安全性。HTTPS 通过坚持证书主题匹配为你做了一些事情您连接的主机名。但大部分都取决于你。

# haskell - Haskell Parse Error - 顶层的裸表达式

> ID：11069136
> 
> 赞同：4
> 
> 时间：2012-06-17T05:29:36.000
> 
> 标签：haskell

我有一个haskell 文件test.hs。在这个文件中我写了一个函数

```
doubleMe x: x + x 
```

这是该文件 test.hs 中的唯一函数。在 ghci 命令提示符下，我输入了不带引号的 ":l test.hs"。出现以下错误：

```
compiling main  <test.hs interpreted>
test.hs:1:1 Parse error: naked expression at top level
Failed: modules loaded:none 
```

这个错误的原因是什么。

我经历了 [Haskell 错误 - 顶级的裸表达式](https://stackoverflow.com/questions/6885148/haskell-error-naked-expression-at-top-level)

和

[什么是解析错误：顶层的裸表达式？](https://stackoverflow.com/questions/6208622/what-is-parse-error-naked-expression-at-top-level)

它没有帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T05:31:05.407

你需要，`=`而不是`:`，所以：

```
doubleMe x = x + x 
```

* * *

如果您尝试使用`:`，GHC 会将其解析为使用and`:`运算符。这是一个函数应用程序，所以它是一个表达式（表达式基本上是一系列具有结果的标记）。由于它没有包含在函数或变量声明中，因此它是“裸表达式”，这是一个错误。`doubleMe x``x + x`

# perl - 在 perl 程序中设置路径

> ID：11069137
> 
> 赞同：8
> 
> 时间：2012-06-17T05:30:04.330
> 
> 标签：perl

我有一个 bluehost 服务器设置，并试图在我的 perl 程序中设置路径

```
 print "Content-type: text/html\n\n";
    my $output=`export PATH=\${PATH}:/usr/local/jdk/bin`;
    my output1=`echo \$PATH`;
    print $output1; 
```

但是它仍然只打印原始的 $PATH。/usr/local/jdk 没有被添加。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-17T05:33:04.343

您正在创建一个 shell，执行一个在 shell 中设置环境变量的 shell 命令，然后退出 shell 而不对环境变量做任何事情。你从未改变过`perl`的环境。那将使用

```
local $ENV{PATH} = "$ENV{PATH}:/usr/local/jdk/bin"; 
```

不过，添加到路径的末尾有点奇怪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T22:33:19.697

请注意，ikegami 的答案只会在您的本地 Perl 脚本中设置路径，并且不会为调用您的 Perl 脚本的 shell 更改它。

如果您希望更改 shell 环境中的路径，那么您运行的下一个程序也将从此更改中受益，您将必须使用“**源**”或“点空间”序列，或者更好 - 将此更改为在“ **.bashrc** ”或“ **.login** ”文件中完成的路径。

# c++ - 全局指针“已定义”错误

> ID：11069138
> 
> 赞同：2
> 
> 时间：2012-06-17T05:30:11.277
> 
> 标签：c++

我正在编写一个小的 DirectX 模型查看器。

我刚刚写完我的场景管理器。

我将永远只有 1 个场景管理器对象，所以我的想法是创建一个“scnManger”类型的全局指针，然后在创建场景管理器对象时设置它。

这将使我可以从我的应用程序的任何地方访问它。

我收到了一个编译错误：

```
1>shaderViewer.obj : error LNK2005: "class scnManger * sceneManger" (?sceneManger@@3PAVscnManger@@A) already defined in sceneManager.obj
1>C:\Users\Greg\Documents\Visual Studio 2010\Projects\ShaderViewer\Debug\ShaderViewer.exe : fatal error LNK1169: one or more multiply defined symbols found 
```

现在我有 3 个文件

场景管理器.h：

```
// Our global scene manger variable

scnManger* sceneManger; 
```

shadherViewer.cpp (winMain & 包括 sceneManger.h):

```
scnManger shaderViewerScnManger; 
sceneManger = &shaderViewerScnManger; 
```

场景管理器.cpp（包括场景管理器.h）：

我在这里使用我的场景管理器对象的方法来处理各种事情。

首先，我想了解我收到错误的原因，并且也愿意接受有关更好的处理方法的任何建议。我不确定使用这样的全局变量是否是个好主意。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T05:32:18.073

您不应在 .h 文件中定义全局变量。您应该在 .h 中声明它们，如下所示：

```
extern scnManger* sceneManger; 
```

然后在*一个*cpp 文件中定义它们，如下所示：

```
scnManger* sceneManger; 
```

否则，每个包含 .h 文件的 cpp 文件都将声明该`sceneManger`变量，从而导致名称冲突。

# python - 不工作 AdminSplitDateTime

> ID：11069140
> 
> 赞同：2
> 
> 时间：2012-06-17T05:30:58.883
> 
> 标签：python, django, datetime, datetimepicker

我阅读[了这个主题](https://stackoverflow.com/questions/38601/using-django-time-date-widgets-in-custom-form)（使用`%YYYY-%MM-%DD %HH-%MM`格式）并重复所有内容，但这不起作用。datetime 小部件看起来像 splitDateTime，而不是 adminSplitDateTime 中的 datetimepicker。这是我在 form.py 中的代码

```
class ReservationForm(ModelForm):
    class Meta:
        model = Reserve

    def __init__(self, *args, **kwargs):
        super(ReservationForm, self).__init__(*args, **kwargs)
        self.fields['datetime_reservation'].widget = widgets.AdminSplitDateTime()
        self.fields['datetime_reservation'].label = "(month/day/year hour/minutes)" 
```

还有我的模板文件。

```
{% extends "lfs/base.html" %}
{% load i18n %}
{% load lfs_tags %}
{% load l10n %}

{% block content %}
<script type="text/javascript" src="/my_admin/jsi18n/"></script>
<script type="text/javascript" src="/static/admin/js/core.js"></script>
<script type="text/javascript" src="/static/admin/js/admin/RelatedObjectLookups.js"></script>
<script type="text/javascript" src="/static/admin/js/jquery.min.js"></script>
<script type="text/javascript" src="/static/admin/js/jquery.init.js"></script>
<script type="text/javascript" src="/static/admin/js/actions.min.js"></script>
<script type="text/javascript" src="/static/admin/js/calendar.js"></script>
<script type="text/javascript" src="/static/admin/js/admin/DateTimeShortcuts.js"></script>
    <h1 class="first-heading">{% trans 'Reservation' %}</h1>
    <form action="{% url reserve_form  %}" method="post">
    {% csrf_token %}
    {% localize on %}
        {% for field in form %}
        <div class="field">
            <div class="label">
                {{ field.label_tag }}:
            </div>

            {% if field.errors %}
                <div class="error">
                    {{ field.errors }}
                    {{ field }}
                </div>
            {% else %}
                <div>
                    {{ field }}
                </div>
            {% endif %}
        </div>
        {% endfor %}
    {% endlocalize %}
    <input type="submit" value="Submit" />
    </form>
{% endblock %} 
```

我还将“admin/jsi18n/”添加到我的 urlConf 中，例如

```
url(r'^admin/jsi18n/$', 'django.views.i18n.javascript_catalog', name="django.views.i18n.javascript_catalog"), 
```

第二个问题。我试过这样做，因为我无法将 DateTimeField 格式更改为`'%d/%m%y %H:%M'`. 我试过使用`DateTimeField(input_formats="%d/%m/%y %H:%M")`，但这不起作用，我有错误，例如`"Use %YYYY-%MM-%DD %HH-%MM format"`。我尝试使用 SplitDateTime 并将格式设置为`input_date_formats "%d/%m/%y"`，但这也不起作用。也许在这个字段中不支持这种格式，我必须为这种格式编写自定义字段？

在此先感谢您的帮助。

# php - 匹配（配对）标记（例如，括号或引号）

> ID：11069142
> 
> 赞同：3
> 
> 时间：2012-06-17T05:31:10.053
> 
> 标签：php, tokenize, code-completion, brackets

简而言之，我需要一个函数来尝试通过添加括号/引号来修复基本代码，**以用于解析目的。**也就是说，**生成的代码不应该是可运行的。**

让我们看几个例子：

```
[1] class Aaa { $var a = "hi";       =>  class Aaa { $var a = "hi"; }
[2] $var a = "hi"; }                 =>  { $var a = "hi"; }
[3] class { a = "hi; function b( }   =>  class { a = "hi; function b( }"}
[4] class { a = "hi"; function b( }  =>  class { a = "hi"; function b() {}} 
```

**PS：**上面的第4个例子看起来很复杂，其实很简单。如果引擎发现一个与堆栈不匹配的结束括号标记，它应该在那个之前的相反标记。如您所见，这非常有效。

* * *

作为函数签名，它看起来像：`balanceTokens($code, $bracket_tokens, $quote_tokens)`

我编写的函数使用堆栈工作。好吧，它并不完全*有效*，但它确实使用了堆栈。

```
function balanceTokens($code, $bracket_tokens, $quote_tokens){
    $stack = array(); $last = null; $result = '';
    foreach(str_split($code) as $c){
        if($last==$c && in_array($c, $quote_tokens)){
            // handle closing string
            array_pop($stack);
        }elseif(!in_array($last, $quote_tokens)){
            // handle other tokens
            if(isset($bracket_tokens[$c])){
                // handle begining bracket
                $stack[] = $c;
            }elseif(($p = array_search($c, $bracket_tokens)) != false){
                // handle ending bracket
                $l = array_pop($stack);   
                if($l != $p)$result .= $p;
            }elseif(isset($quote_tokens[$c])){
                // handle begining quote
                $stack[] = $c;
                $last = $c;
            }// else other token...
        }
        $result .= $c;
    }
    // perform fixes
    foreach($stack as $token){
        // fix ending brackets
        if(isset($bracket_tokens[$token]))
            $result .= $bracket_tokens[$token];
        // fix begining brackets
        if(in_array($token, $bracket_tokens))
            $result = $token . $result;
    }
    return $result;
} 
```

该函数是这样调用的：

```
$new_code = balanceTokens(
    $old_code,
    array(
        '<' => '>',
        '{' => '}',
        '(' => ')',
        '[' => ']',
    ),
    array(
        '"' => '"',
        "'" => "'",
    )
); 
```

是的，它很通用，没有任何硬编码的标记。

我一点也不知道为什么它不起作用……事实上，我什至不知道它是否应该起作用。我承认我没有花太多心思去写它。也许有一些我没有看到的明显问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T00:22:07.373

另一种实现（进行更积极的平衡）：

```
function balanceTokens($code) {
    $tokens = [
        '{' => '}',
        '[' => ']',
        '(' => ')',
        '"' => '"',
        "'" => "'",
    ];
    $closeTokens = array_flip($tokens);
    $stringTokens = ['"' => true, '"' => true];

    $stack = [];
    for ($i = 0, $l = strlen($code); $i < $l; ++$i) {
        $c = $code[$i];

        // push opening tokens to the stack (for " and ' only if there is no " or ' opened yet)
        if (isset($tokens[$c]) && (!isset($stringTokens[$c]) || end($stack) != $c)) {
            $stack[] = $c;
        // closing tokens have to be matched up with the stack elements
        } elseif (isset($closeTokens[$c])) {
            $matched = false;

            while ($top = array_pop($stack)) {
                // stack has matching opening for current closing
                if ($top == $closeTokens[$c]) {
                    $matched = true;
                    break;
                }

                // stack has unmatched opening, insert closing at current pos
                $code = substr_replace($code, $tokens[$top], $i, 0);
                $i++;
                $l++;
            }

            // unmatched closing, insert opening at start
            if (!$matched) {
                $code = $closeTokens[$c] . $code;
                $i++;
                $l++;
            }
        }
    }

    // any elements still on the stack are unmatched opening, so insert closing
    while ($top = array_pop($stack)) {
        $code .= $tokens[$top];
    }

    return $code;
} 
```

一些例子：

```
$tests = array(
    'class Aaa { public $a = "hi";',
    '$var = "hi"; }',
    'class { a = "hi; function b( }',
    'class { a = "hi"; function b( }',
    'foo { bar[foo="test',
    'bar { bar[foo="test] { bar: "rgba(0, 0, 0, 0.1}',
); 
```

将这些传递给函数给出：

```
class Aaa { public $a = "hi";}
{$var = "hi"; }
class { a = "hi; function b( )"}
class { a = "hi"; function b( )}
foo { bar[foo="test"]}
bar { bar[foo="test"] { bar: "rgba(0, 0, 0, 0.1)"}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T23:16:12.060

喝了杯咖啡**:)**之后，我想出了一个（有点）可以工作的原型函数。

[您可以在这里](http://codepad.viper-7.com/Ty8RW5)看到它的实际效果。但是，它稍作修改以添加一些（闪亮的）调试输出。

```
 /**
     * Fix some possible issues with the code (eg, incompleteness).
     * @param string $code The code to sanitize.
     * @param array $bracket_tokens List of bracket tokens where the index is the begin bracket and the value is the end bracket.
     * @param array $quote_tokens List of quote tokens where the index is the begin quote and the value is the end quote.
     * @return string The sanitized code.
     */
    function css_sanitize($code, $bracket_tokens, $quote_tokens){
        $result = '';
        $stack = array();
        $last = '';
        foreach(str_split($code) as $c){
            if(in_array($c, $quote_tokens) && $last==$c){
                array_pop($stack);
                $last = '';
            }elseif(!in_array($last, $quote_tokens)){
                if(isset($bracket_tokens[$c])){
                    $stack[] = $c;
                }elseif(($p = array_search($c, $bracket_tokens)) != false){
                    if($last != $c){
                        $result .= $p;
                    }else{
                        array_pop($stack);
                        $last = (($p = count($stack)) > 1) ? $stack[$p] : '';
                    }
                }elseif(isset($quote_tokens[$c])){
                    $stack[] = $c;
                    $last = $c;
                }
            }
            $result .= $c;
        }
        foreach(array_reverse($stack) as $token){
            if(isset($bracket_tokens[$token])){
                $result .= $bracket_tokens[$token];
            }
            if(in_array($token, $bracket_tokens)){
                $result = $token . $result;
            }
            if(isset($quote_tokens[$token])){
                $result .= $quote_tokens[$token];
            }
        }
        return $result;
    } 
```

# c - 一个函数可以在C中返回多个值吗？

> ID：11069143
> 
> 赞同：1
> 
> 时间：2012-06-17T05:31:11.870
> 
> 标签：c, function

> **可能重复：**
> [从函数返回多个值](https://stackoverflow.com/questions/3829167/returning-multiple-values-from-a-function)

例如，如果您想要一个修改 3 个指针值的函数，那么您需要将双指针声明为函数参数。如果你用双指针写了很多行，代码将很难理解；那么有什么方法可以返回多个值，例如 3 个输入变量和 2 个输出变量？

```
int * function(int *p,int **q,int **r)
{
  ...
  return p;
}

int main(){
  int *p,*q,*r;

  ...

  p=function(p,&q,&r);

  ...

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T05:33:28.703

您可以将要修改的所有变量放在一个结构中，然后从函数中返回该结构。
由于结构可以*包含任意*数量的元素，因此您可以通过这种方式从函数中返回任意数量的元素。

当然，*any* as all 实际值在实际环境中会有限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T05:38:44.517

如果要修改的元素属于同一类型，则可以使用 a`struct`或数组：

```
struct a {
    int *p;
    int *p2;
    int *p3;
    double *p4;
    ...
} ;

int * function(struct a*);

int main()
{
     struct a a;
     function(&a);
     return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T06:20:56.147

您还可以将指针传递给函数并修改函数中的指针，但使用结构更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T08:56:14.137

如前所述，您可以使用结构来聚合多个值。@obounaim 的示例演示了一个采用指向此类结构的指针的函数，但也可以*按值*返回结构，这可能更简单且更具可读性。

```
typedef struct 
{
    int x ;
    int y ;
    int z ;

} coord3d ;

coord3d getPosition(void);

int main()
{
     coord3d pos = getPosition();
     return 0;
} 
```

对于大型结构，这可能非常昂贵，并且如果结构包含指针，则结构的所有副本都将指向相同的数据，因此需要小心谨慎，但这通常更简单、更直观。例如，如果结构包含一些紧密结合的数据，例如笛卡尔坐标或复数，则此方法是有意义的，并且在按值返回语义上的开销很小。

# android - android，onProgressUpdate 没有运行

> ID：11069144
> 
> 赞同：0
> 
> 时间：2012-06-17T05:31:12.300
> 
> 标签：android, android-asynctask

我对下面的代码有疑问，onProgressUpdate 没有运行……但是 onPreExecute、doInBackground 和 onPostExecute 会相应地执行。还是我需要在 doInBackground 中返回？请告诉我错过了什么。我以前删

```
notification.contentView.setProgressBar(R.id.pbStatus, 100, progress, false);
notificationManager = (NotificationManager) getApplicationContext().getSystemService(getApplicationContext().NOTIFICATION_SERVICE);
notificationManager.notify(42, notification); 
```

在onCreate中，则通知根本没有出现。以下是完整代码：

```
package com.android.MaxApps;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.net.URLConnection;

import android.app.Activity;
import android.app.Dialog;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.widget.ProgressBar;
import android.widget.RemoteViews;
import android.widget.Toast;

public class StaffChoice extends Activity { 
    ProgressBar progressBar;
    private int progress;

    Intent MyI;
    PendingIntent MyPI;
    NotificationManager MyNM;
    Notification notification;
NotificationManager notificationManager;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.staffchoices);       

    MyI = new Intent(getApplicationContext(), MaxAppsAct.class);
    MyPI = PendingIntent.getActivity(getApplicationContext(), 0, MyI, 0);
    MyNM = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);

    Intent intent = new Intent(getApplicationContext(), MaxAppsAct.class);
    final PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);

    notification = new Notification(R.drawable.logo, "Downloading...", System.currentTimeMillis());
    notification.flags = notification.flags | Notification.FLAG_ONGOING_EVENT;
    notification.contentView = new RemoteViews(getApplicationContext().getPackageName(), R.layout.staffchoices);
    notification.contentIntent = pendingIntent;
    notification.contentView.setImageViewResource(R.id.imgIcon, R.drawable.save);
    notification.contentView.setTextViewText(R.id.tvText, "Downloading...");
    notification.contentView.setProgressBar(R.id.pbStatus, 100, progress, false);
    notificationManager = (NotificationManager) getApplicationContext().getSystemService(getApplicationContext().NOTIFICATION_SERVICE);
    notificationManager.notify(42, notification);

    String url = "http://www.domainURL.com/3d.png"; 
    new DownloadFileAsync().execute(url);
    }

public class DownloadFileAsync extends AsyncTask<String, String, String> {
    @Override
    protected void onPreExecute(){
        super.onPreExecute();
        }

    @Override
    protected String doInBackground(String... aurl) {
        int count;
        try {
            URL url = new URL(aurl[0]);
            URLConnection conexion = url.openConnection();
            conexion.connect();

            int lenghtOfFile = conexion.getContentLength();
            Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

            File folder = new File(Environment.getExternalStorageDirectory() + "/MaxApps");
            boolean success = false;
            if (!folder.exists()) {
                success = folder.mkdirs();
            }
            if (!success) {
            } else {
            }

            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream("/sdcard/MaxApps/3d.png");

            byte data[] = new byte[1024];

            long total = 0;

            while ((count = input.read(data)) != -1) {
            total += count;
            publishProgress(""+(int)((total*100)/lenghtOfFile));
            output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
            } catch (Exception e) {}

        return null;
    }

    protected void onProgressUpdate(Integer... progress) {          
        notification.contentView.setProgressBar(R.id.pbStatus, 100, progress[0], false);
        notificationManager.notify(42, notification);
        }

    @Override
    protected void onPostExecute(String unused) {           
        notificationManager.cancel(42);

        Notification MyN = new Notification(); MyN.icon = R.drawable.logo1;
        MyN.tickerText = "Download Complete"; 
        MyN.number = 1; 
        MyN.setLatestEventInfo (getApplicationContext(), "Application Title", "Application Description", MyPI); 

        MyNM.notify(1, MyN);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-17T06:10:55.040

您声明您的`DownloadFileAsync`类以字符串形式发布进度更新：

```
public class DownloadFileAsync extends AsyncTask<String, String, String> 
```

然而你定义`onProgressUpdate()`取整数：

```
protected void onProgressUpdate(Integer... progress) { 
```

因此，它不是`onProgressUpdate()`使用的`AsyncTask`。假设你想使用字符串，它应该变成

```
@Override
protected void onProgressUpdate(String... progress) { 
```

我的猜测是你实际上想将你的类声明为：

```
public class DownloadFileAsync extends AsyncTask<String, Integer, Void> 
```

在这种情况下，您可以`onProgressUpdate()`保持不变，而不是添加`@Override`. `onPostExecute()`会成为

```
@Override
protected void onPostExecute(Void unused) { 
```

这比 更清楚`(String unused)`，因为它没有被使用。

一般建议：

1.  `@Override`是您的朋友，因为它有助于捕获此类错误。
2.  请务必阅读[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的文档，因为您似乎对它的用法有点困惑。该页面很好地解释了这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T06:00:14.027

我认为您正在传递一个字符串作为参数`publishProgress(""+(int)((total*100)/lenghtOfFile));`，而`protected void onProgressUpdate(Integer... progress)`期望一个整数。我想你在这种情况下会出错。

# ruby - 如何在 Rails 之外使用 less.rb 处理 Bootstrap

> ID：11069145
> 
> 赞同：7
> 
> 时间：2012-06-17T05:31:17.327
> 
> 标签：ruby, twitter-bootstrap, less

我正在尝试使用less.rb 创建一个独立的应用程序（独立于Rails 资产管道），以基于Twitter Bootstrap 输出CSS 文件。

以下结果为空文档

```
parser = Less::Parser.new :paths => [Rails.root + '/public/bootstraps/twitter-bootstrap-857b8fb/less']

tree = parser.parse("@import 'bootstrap.less'")

tree.to_css 
```

这会导致返回一个空字符串。我尝试了将@import 更改为完整路径等的变体，但没有成功。我想我一定错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:44:24.847

我相信您对如何指定路径有疑问。据我所知，*Less*正在寻找一组`String`对象，而不是`Path`对象。

使用以下内容：

```
parser = Less::Parser.new paths: [Rails.root.join('public', 'bootstraps', 'twitter-bootstrap-857b8fb', 'less').to_s]

tree = parser.parse("@import 'bootstrap.less'")

tree.to_css 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T06:37:57.433

如果性能不是最重要的问题，您始终可以包含 less.js，它将在运行时编译 less 文件。详细说明[在这里](http://lesscss.org/#-client-side-usage)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T22:43:02.297

您是否考虑过使用 less.rb github 页面中的文件名语法？[https://github.com/cowboyd/less.rb/](https://github.com/cowboyd/less.rb/)

```
parser = Less::Parser.new :paths => ['./lib', 'other/lib'], :filename => 'mystyles.less' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T08:23:01.937

`make`您可以按照此处描述的方式简单运行： [https ://github.com/twitter/bootstrap/wiki/Contributing-to-Bootstrap](https://github.com/twitter/bootstrap/wiki/Contributing-to-Bootstrap)

# php - 特殊细化时的搜索性能

> ID：11069146
> 
> 赞同：0
> 
> 时间：2012-06-17T05:31:17.840
> 
> 标签：php, search, lucene, sphinx

我有一个搜索细化逻辑，用户使用的搜索参数 /search-cluster 的数量越多，速度就越慢，因为仍然需要显示所有集群，并且对于每个选定的搜索参数 / 集群，需要单独的搜索被执行。

例如：如果用户在搜索中指定了 city=1、price=1 和 producttype=1，则将显示所有集群（包括 city、price、producttype 的集群），并将执行单独的搜索每个选定的搜索参数的集群。在这种情况下，为了显示城市的集群，查询中的 where 条件将包括 producttype=1 和 price-1，对于显示价格的集群，where 条件将包括 city=1 和 producttype =1，以此类推。

我还有另外 10 个集群，将对其执行 city=1 和 producttype=1 abd price=1。

问题：我正在使用 sphinx & php，在 sphinx 中我需要触发多个查询。我应该如何优化它？（我使用mutiqueries。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:49:10.813

使用 Solr，它为此具有内置功能

# php - 使用 PHP 在最后一个 SQL 行上使用不同的 CSS 样式

> ID：11069147
> 
> 赞同：0
> 
> 时间：2012-06-17T05:32:10.130
> 
> 标签：php, html, sql, css

**问题：**

在不使用任何 CSS3 选择器的情况下设置 SQL 查询中最后一行的样式。

**PHP代码：**

```
while ($item = mysql_fetch_assoc($itemsresult))
{
    $answer = "SELECT IID, Comment FROM betyg_answers WHERE EID = '{$EID}' AND CID = '{$item['CID']}' ORDER BY ID ASC";
    $answerresult = mysql_query($answer) or die ('Error (' . mysql_errno() . ') ' . mysql_error());
    $answer = mysql_fetch_assoc($answerresult);

    if ($answer['IID'] == $item['IID'])
    {
        $html .= '
            <tr>
                <td class="arrow" style="'.$arrow.'"><img src="./img/circle_arrow_right.png" class="arrowimage"></td>
                <td class="numbers" style="'.$numbers.'">'.$itemcounter.'.</td>
                <td class="text" style="'.$text.'">'.$item['Description'].'</td>
            </tr>
        ';
    }
    else
    {
        $html .= '
            <tr>
                <td class="arrow" style="'.$arrow.'">&nbsp;</td>
                <td class="numbers" style="'.$numbers.'">'.$itemcounter.'.</td>
                <td class="text" style="'.$text.'">'.$item['Description'].'</td>
            </tr>
        ';
    }

    $itemcounter++;
} 
```

**SQL 查询中的最后一行应该打印：**

```
$html .= '
        <tr>
            <td class="arrow" style="'.$lastarrow.'">&nbsp;</td>
            <td class="numbers" style="'.$lastnumbers.'">'.$itemcounter.'.</td>
            <td class="text" style="'.$lasttext.'">'.$item['Description'].'</td>
        </tr>
'; 
```

**问题：**

需要在 while 循环中添加什么以便它识别最后一行并打印不同的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T05:37:46.183

使用计数器：

```
$i = 0;
$c = mysql_num_rows($itemresult);
while ($item = mysql_fetch_assoc($itemsresult)) {
  $i++;
  if ($i == $c) {
    // This is a last row
  } else {
    // Regular row
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T05:42:13.733

有几种方法可以做到这一点：

1.  使用 :last-child （但这在 IE8 中不起作用）

    表 tr:last-child { 背景颜色:#ff0000; }​</p>

2.  使用 jQuery 方法（这是独立于浏览器的）

在文档加载功能中，添加以下 jQuery 代码，

```
$("td:last-child").css({background-color:"#ff0000"}) 
```

# c - 64 位机器上的 32 位标准 C 库

> ID：11069149
> 
> 赞同：4
> 
> 时间：2012-06-17T05:32:33.877
> 
> 标签：c, shared-libraries, 32bit-64bit

我在 64 位机器上使用 ubuntu 12.04，我有这个简单的 C 代码：

```
 int b = 20;
 int c = 10;

 int main(int argc, char **argv) {
      c = 50;
 } 
```

我试图通过像这样编译它使其与任何 IA32 机器兼容：

```
 unix> gcc -m32 code.c 
```

并得到这些错误：

```
 /usr/bin/ld: cannot find crt1.o: No such file or directory
 /usr/bin/ld: cannot find crti.o: No such file or directory
 /usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libgcc.a when searching for -lgcc
 /usr/bin/ld: cannot find -lgcc
 /usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libgcc_s.so when searching for -lgcc_s
 /usr/bin/ld: cannot find -lgcc_s
 /usr/bin/ld: cannot find -lc
 /usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libgcc.a when searching for -lgcc
 /usr/bin/ld: cannot find -lgcc
 /usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/4.6/libgcc_s.so when searching for -lgcc_s
 /usr/bin/ld: cannot find -lgcc_s
 /usr/bin/ld: cannot find crtn.o: No such file or directory
 collect2: ld returned 1 exit status 
```

据我了解，发生这种情况是因为我缺少 32 位标准 C 库，因此链接器无法将我的代码与标准 C 库链接。

如何在我的 64 位机器上获得所需的 32 标准 C？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T05:35:29.163

尝试这个：

```
 apt-get install ia32-libs 
```

此外，您应该使用 -m32 编译/链接：

```
gcc -Wall -pedantic -m32 ... 
```

# android - Android - 向范围内的所有手机信号塔发送回声请求

> ID：11069152
> 
> 赞同：2
> 
> 时间：2012-06-17T05:32:55.373
> 
> 标签：android, telephony, gsm

这可能吗？

我想 ping 或向范围内的所有蜂窝塔发送某种回声请求，并取回时间戳和每个塔的 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:46:44.170

问题将是一次只有一个（或2个）范围内的蜂窝塔。电池公司不会花钱让一个区域过度饱和。

在爱立信网站上查看这篇文章。[获取手机信号塔 ID](https://labs.ericsson.com/developer-community/blog/create-simple-cell-id-look-application-android)

# php - preg_replace - 指定模式

> ID：11069159
> 
> 赞同：0
> 
> 时间：2012-06-17T05:34:37.837
> 
> 标签：php, escaping, preg-replace

我有一个 HTML 文本文件，其中包含以下用于替换的标记集：$$ausposttrackingid$$

我正在尝试使用以下正则表达式替换该文本：

```
$trackingId="M6023409823490234";
$text = preg_replace("/\$\$ausposttrackingid\$\$/",$trackingId,$text); 
```

但是......它根本不替换文本，只留下 $$ausposttrackingid$$ 。我以为我已经正确地避开了 $ 符号，但没有放弃。

谁能告诉我应该如何在 preg_replace 中指定正则表达式以正确获取 $$ausposttrackingid$$？或者，考虑到它在正则表达式中的含义，我应该使用另一个标签标记而不是 $ 吗？

多谢你们。皮特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T05:38:01.410

不要使用双引号，因为 PHP 会在你的字符串中查找变量名并将它们替换为它们的值。所以`$ausposttrackingid`在字符串中被替换为变量的值`$ausposttrackingid`。如果这不是您的意图，请使用单引号：

```
$text = preg_replace('/\$\$ausposttrackingid\$\$/',$trackingId,$text); 
```

事实上，习惯使用单引号，除非需要。

一个工作示例：

```
<?php
    $text = 'Something $$ausposttrackingid$$ something else';
    $trackingId = 'M6023409823490234';
    $text = preg_replace('/\$\$ausposttrackingid\$\$/', $trackingId, $text);
    print_r($text);
    //The output is: Something M6023409823490234 something else
?> 
```

* * *

附录

您将希望对某些转义字符使用双引号，例如`"\n"`会给您一个新行但`'\n'`不会，而是只会 print `\n`。

# scorm - SCORM 2004 第三版测序

> ID：11069167
> 
> 赞同：1
> 
> 时间：2012-06-17T05:36:42.017
> 
> 标签：scorm, scorm2004

我有一个关于 SCORM 2004 第 3 版测序的问题。

*   根（流量=真）
    *   活动一
    *   活动 2（流程=true，preConditionRule=>condition=always，Action=skip）
        *   活动 3
        *   活动四
    *   活动 5

假设 Activity 5 是当前的 Activity 并且学习者触发了 Previous 导航请求；在这种情况下，接下来应该交付哪个活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:01:58.037

由于 Activity 2 的 Action 值设置为 skip，“Previous Button”将带我们回到 Activity 1，跳过 Activity 2 及其子 Activity 3+4。

# mysql - 在重复键插入（而不是更新）

> ID：11069169
> 
> 赞同：0
> 
> 时间：2012-06-17T05:36:48.560
> 
> 标签：mysql

为什么 MySQL 没有这个功能？

```
INSERT INTO abc (a) VALUES ('bla')
ON DUPLICATE KEY
 INSERT INTO ... 
```

我需要一个存储过程来执行此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T05:41:15.050

插入到底在哪里？同一张桌子？您已经*知道*这是不可能的，因为主键已经存在。

如果您正在谈论将行插入到*不同*的表中，那完全是另一回事，而不是使用单个插入语句来完成。这是因为该`insert`语句的总体思想是将特定行放入特定表中。这通常可以使用“替代”类型的触发器来完成。

这个想法也意味着在原始行已经存在的情况下，您可能不应该尝试使用单个`insert`语句来插入*不同*的行（例如更改主键）。在这种情况下，主键几乎可以肯定是人工的，在这种情况下，自动增量键可能是要走的路。

背后的想法`insert ... on duplicate key update`是获取该行是否已经存在。它*确实*将特定行放入特定表中。

# c# - 嵌套用于迭代循环和某些值逻辑问题的传输

> ID：11069179
> 
> 赞同：0
> 
> 时间：2012-06-17T05:38:18.943
> 
> 标签：c#, object, loops, for-loop, iteration

好吧...我在这里找一些面包屑。

这是我的代码：

```
 using System;

     namespace Project4
     {
     class Program
     {
     static void Main()
     {
        int total = 1;

        Console.WriteLine("Month \tAdult \tBaby \tTotal");
        Console.WriteLine("1 \t1 \t0 \t0");

        while (total < 5)
        {
            for (int m = 1; m < 5; m++)
            {
                Console.Write("{0}", m);
                for (int a = 1; a < 5; a++)
                {

                    Console.Write("\t{0}", a);

                }
            }
        }
    }
} 
```

}

很不完整。。。。

我基本上有迭代逻辑愚蠢的时刻。你有月份、成年熊、小熊和总熊

月 成人 婴儿 总计

1 1 0 1

2 1 1 2

3 2 1 3

4 3 2 5

5 5 3 8

等

每个月大人都会生一个孩子。下个月，宝宝就成年了。但是现在的成年人每个人都有 1 个婴儿......如果你注意到矩阵的话。

因此，我试图逐月迭代熊的出生以及婴儿向成人的转移。

我赶上了迭代的传输部分……我一直在考虑使用对象，但又一次……不知道如何传输。

任何提示或方向都很棒=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:54:18.053

分别跟踪成人和婴儿。

```
int nBabies = 0; //start with no babies and 1 adult.
int nAdults = 1;

Console.WriteLine("Month\tAdults\tBabies\tTotal\n");
//loop through 12 month period.
for(int m = 0; m < 12; m++)
{
    Console.WriteLine(string.Format("{0}\t{1}\t{2}\t{3}", m + 1, nAdults, nBabies, nAdults + nBabies));
    nAdults += nBabies; //each baby from the last iteration becomes an adult.
    nBabies = (nAdults - nBabies); //each adult from last month has a baby.
} 
```

# eclipse - 处理函数时出现 eclim 错误，无法 ping 服务器

> ID：11069195
> 
> 赞同：0
> 
> 时间：2012-06-17T05:41:48.087
> 
> 标签：eclipse, vim, eclim

几天前我开始玩 eclim，但我碰壁了。当我启动 eclim 服务器时，我不能真正使用我的 GVim。我可以看到服务器正在运行，一切似乎都很好。我尝试 :PingEclim 并最终遇到以下问题。

![在此处输入图像描述](../Images/ae2c740b0c5c068421714cb8d70bd004.png)

模糊部分是 DriveLetter:\Users\Username。我不太确定为什么会这样。我将 eclim 服务器设置为以管理员身份运行，但我仍然遇到问题。正如你所知道的，我对 eclim 很陌生。如果有人能给我一些想法或我可以阅读的资源，我将不胜感激。

我目前正在运行：

1.  Windows 7家庭高级版
2.  Eclipse Indigo 服务版本 2（内部版本号：20120216-1857）
3.  GVim 7.3.46
4.  Eclim 1.7.6

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:30:44.173

您是否尝试过 :EclimValidate 来查找问题？

# c# - 向 HelloWebAPI 发送 GET 请求！从 Metro App 内

> ID：11069196
> 
> 赞同：0
> 
> 时间：2012-06-17T05:41:49.180
> 
> 标签：c#, .net, http, microsoft-metro, asp.net-web-api

我一直在关注[http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)上的教程并设置了一个Windows Azure 帐户并已部署，一切正常。

但是该教程的下半部分提供了一种使用 jQuery/AJAX 从 API 获取数据的方法，但我需要从 Windows Metro App (C#) 的 API 获取数据。

我一直无法从 Metro 风格应用程序中的 WebAPI 中找到任何关于 POST[ing] 和 GET[ing] 数据的教程或文档。

是否有任何你知道的可能有帮助的 tuts、文档、示例或文章？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T06:01:21.253

在 Metro 应用程序中，您可以使用`HttpClient`该类调用 Web API 上的方法。[在http://blogs.msdn.com/b/henrikn/archive/2012/02/16/httpclient-is-here.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/02/16/httpclient-is-here.aspx)上有一篇很好的帖子，这是它的简单用法

```
namespace HelloWebAPI.Models 
{ 
    public class Product 
    { 
        public int Id { get; set; } 
        public string Name { get; set; } 
        public string Category { get; set; } 
        public decimal Price { get; set; } 
    } 
}

namespace MyClient
{
    public partial class MainPage
    {
        //...
        public async void Button_Click(object sender, RoutedEventArgs e)
        {
            var c = new HttpClient();
            var resp = await c.GetAsync("http://localhost:xxxx/api/products");
            var prod = await resp.Content.ReadAsAsync<Product>();
            // ...
        }
    }
} 
```

# php - Wordpress：自定义每页侧边栏？

> ID：11069197
> 
> 赞同：0
> 
> 时间：2012-06-17T05:41:50.943
> 
> 标签：php, wordpress

我没有花太多时间在 wordpress 上，只是想知道如何确保管理员可以将自定义内容添加到主要内容区域之外的页面部分？

简而言之，我需要允许管理员为每个页面添加一组不同的图像——这些图像可能链接到内部页面，也可能不链接。重申一下 - 我需要为每个动态添加的页面使用不同的图像。

最初尝试了 multiple-post-thumbnails 插件，但它不允许链接。思想小部件可能会完成这项工作，但它们似乎不允许跨不同页面使用不同的图像。

简而言之，我确信有某种方法可以在编辑页面部分添加额外的输入区域……只是不确定最优雅的方法。

干杯...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T06:19:12.857

也许这个插件有帮助：[http ://wordpress.org/extend/plugins/per-page-sidebars/](http://wordpress.org/extend/plugins/per-page-sidebars/)

> 每页侧边栏 (PPS) 插件允许博客管理员为每个页面创建一个独特的侧边栏。无需模板编辑。

# php - 带有 mongoDB 的数组 codeigniter

> ID：11069199
> 
> 赞同：0
> 
> 时间：2012-06-17T05:42:20.857
> 
> 标签：php, codeigniter, mongodb

请帮助我，由于截止日期严格，我有一个必须立即解决的案例.. :( 我有一个想法使用 preg_match 或 preg_split 来解决这个问题，并且尝试了很多方法来使用它但仍然不明白如何使用它.也许有人可以指导我，关于这个案例，这样我就可以更多地了解如何使用 preg_match 或 preg_split。

//从这个字符串

```
$temp = "{foo:bar,bar:foo},{_id:1,nama:1,nim:1}"; 
```

//如何将它分配给数组所以结果将是这样的

```
Array
(
[0]=>foo:bar,bar:foo
[1]=>_id:1,nama:1,nim:1
) 
```

//也是第二个字符串

```
$temp2 = "_id:1,nama:1,nim:1"; 
```

//如何将它分配给数组所以结果将是这样的

```
Array
(
[0] => _id
[1] => nama
[2] => nim
) 
```

感谢您的指导和帮助.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:03:20.610

代码：

```
<?php

$str1 = "{foo:bar,bar:foo},{_id:1,nama:1,nim:1}";
preg_match_all('/\{(.+?)\},?/', $str1, $matches);
var_dump($matches[1]);

$str2 = "_id:1,nama:2,nim:3";
preg_match_all('/(\w+)\:\w+,?/', $str2, $matches);
var_dump($matches[1]);

?> 
```

结果：

```
array
  0 => string 'foo:bar,bar:foo' (length=15)
  1 => string '_id:1,nama:1,nim:1' (length=18)
array
  0 => string '_id' (length=3)
  1 => string 'nama' (length=4)
  2 => string 'nim' (length=3) 
```

参考：

*   [预匹配](http://www.php.net/manual/en/function.preg-match.php)
*   [preg_split](http://www.php.net/manual/en/function.preg-split.php)
*   [preg_match_all](http://www.php.net/manual/en/function.preg-match-all.php)

解释：

1.  首先，我们应该决定使用哪个函数。正如手册所说：

    > `preg_match()`返回模式匹配的次数。这将是`0`时间（不匹配）或`1`时间，因为`preg_match()`将在第一次匹配后停止搜索。`preg_match_all()`相反会一直持续到主题结束。如果发生错误则`preg_match()`返回 。`FALSE`

    和

    > `preg_split()`返回一个数组，其中包含沿由模式匹配的边界拆分的主题子字符串。

    由于您的目标是捕获大括号之间的内容，因此我选择 `preg_match_all`轻松处理该任务。当然，你可以用 `preg_split`艰难的方式做到这一点:)

2.  来到模式：一切都与[正则表达式有关](http://en.wikipedia.org/wiki/Regular_expression)
    1.  `\{(.+?)\},?`：我们捕获一对花括号内的内容。`+`站立跳过空大括号之类的`{}`。尝试将一些空对`{}`放入`$str1`并更改`+`为`*`，看看会发生什么。也是`?`指定非贪婪的标记。`+?`意味着我们不需要像`foo}{bar`from之类的东西，`{foo}{bar}`而是需要单独的东西。表示可以有逗号，也可以没有。`foo``bar``,?`
    2.  `(\w+)\:\w+,?``key`: 我们成对捕获`key:value`

希望这有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T06:14:57.617

注意键和字符串被引用，`[` `]`$temp 周围是一个数组，第二部分我转换`array[1]`成一个 json 字符串，然后返回一个数组，然后使用 array_keys 创建一个键数组。

```
$temp = '{"foo":"bar","bar":"foo"},{"_id":1,"nama":1,"nim":1}';
$temp = "[$temp]";
$array = json_decode($temp);

$keys = array_keys(json_decode(json_encode($array[1]), true)); 
```

[`json_encode`](http://www.php.net/manual/en/function.json-encode.php) [`json_decode`](http://www.php.net/manual/en/function.json-decode.php) [`array_keys`](http://php.net/manual/en/function.array-keys.php)

# iphone - 在 iPhone 通知中心单击消息时如何转到特定视图？

> ID：11069200
> 
> 赞同：0
> 
> 时间：2012-06-17T05:42:35.470
> 
> 标签：iphone, ios, storyboard, apple-push-notifications

请给我一些关于这个案例的提示。我有一个可以接收推送通知的 iPhone APP。当我在通知中心点击这个通知时，我的APP就会启动。有没有办法配置我的APP中的屏幕根据收到的通知而不是默认屏幕显示。应该是可以的，因为我在一些APP中看到过这些行为。搜索答案后，我得到了以下方法，但是如果应用程序在后台并且我单击通知中心中的消息 didFinishLaunchingWithOptions 并且不会调用 didReceiveRemoteNotification ，而是会调用 applicationWillEnterForeground 。在这种情况下，我如何将数据传递给应用程序。

```
(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

}

// will be called when in foreground
(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {    

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:55:19.113

在提供的委托方法中呈现您想要的 UI 或功能是一件简单的事情`didReceiveRemoteNotification`。

我不使用故事板，但您应该能够交换应用程序的当前根视图，或者在触发该方法时提供不同的功能。

你的问题有点模糊，因为你已经对如何去做有了正确的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T05:52:19.363

userInfo 或 launchOptions 字典将包含有关正在发送的通知的信息。您可以根据这些通知（例如，通知的标题或发送的日期/时间）决定要显示的视图。

# r - 使用 grid.layout 精确定位地块

> ID：11069202
> 
> 赞同：1
> 
> 时间：2012-06-17T05:43:54.030
> 
> 标签：r, lattice, r-grid

我有两个格子图。我需要将一个放在另一个之上，并且我需要在它们之间恰好有 0.5" 的垂直空间。我的想法是使用`grid.layout`指定三行布局，中间行正好是 0.5" 高。然后我可以将一个图打印到顶行，将另一个图打印到底行。

它几乎可以工作了。问题是我不能让中间行正好是 0.5 英寸高。这是一个最小的例子：

```
pdf(file='example.pdf', height=12)

# Create layout and viewports
masterLayout <- grid.layout(
  nrow    = 3, 
  ncol    = 1, 
  heights = unit(c(1, .5, 1), c("null", "inches", "null")),
  respect = matrix(c(0, 1, 0)))
vp1 <- viewport(layout.pos.row=1, just=c("center", "bottom"))  
vp2 <- viewport(layout.pos.row=3, just=c("center", "top"))     

# Create plots
plot1 <- xyplot(1 ~ 1, panel = function () grid.rect(gp=gpar(fill="black")))
plot2 <- xyplot(1 ~ 1, panel = function () grid.rect(gp=gpar(fill="red")))       

# Push viewports and print plots
pushViewport(viewport(layout = masterLayout))
pushViewport(vp1)
print(plot1, newpage = FALSE)
upViewport()
pushViewport(vp2)
print(plot2, newpage = FALSE)

dev.off() 
```

我在这个例子中尝试了很多变化，但我无法将绘图之间的距离固定为 0.5"。有没有办法做到这一点？

*更新：*下面巴蒂斯特的回答很好。另见 Deepayan Sarkar 在[https://stat.ethz.ch/pipermail/r-help/2012-June/316178.html](https://stat.ethz.ch/pipermail/r-help/2012-June/316178.html)的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:35:48.490

试试这个：

```
library(lattice)
# Create layout and viewports
masterLayout <- grid.layout(
  nrow    = 3, 
  ncol    = 1, 
  heights = unit(c(1, .5, 1), c("null", "inches", "null")),
  respect = matrix(c(0, 1, 0)))
vp1 <- viewport(layout.pos.row=1,  name="vp1")  
vp2 <- viewport(layout.pos.row=3,  name="vp2")     
vp3 <- viewport(layout.pos.row=2,  name="spacer")     

theme.novpadding <-
   list(layout.heights =
        list(top.padding = 0,
        main.key.padding = 0,
        key.axis.padding = 0,
        axis.xlab.padding = 0,
        xlab.key.padding = 0,
        key.sub.padding = 0,
        bottom.padding = 0),
        layout.widths =
        list(left.padding = 0,
        key.ylab.padding = 0,
        ylab.axis.padding = 0,
        axis.key.padding = 0,
        right.padding = 0))

# Create plots
plot1 <- xyplot(1 ~ 1, panel = function () grid.rect(gp=gpar(fill="black")),
   scales=list(axs='i',draw=FALSE),
   xlab=NULL,ylab=NULL,par.settings = theme.novpadding)
plot2 <- xyplot(1 ~ 1, panel = function () grid.rect(gp=gpar(fill="red")),
   scales=list(axs='i',draw=FALSE),
   xlab=NULL,ylab=NULL,par.settings = theme.novpadding)       

grid.newpage()
pushViewport(vpTree(viewport(layout = masterLayout,name="master"), vpList(vp1, vp2, vp3)))
seekViewport("master")
print(plot1, draw.in = "vp1")
print(plot2, draw.in = "vp2")
seekViewport("spacer")
grid.rect() 
```

![在此处输入图像描述](../Images/0a94741942810405076d5a21e908059c.png)

# javascript - javascript 不工作，但 IE 显示没有错误

> ID：11069204
> 
> 赞同：0
> 
> 时间：2012-06-17T05:44:10.480
> 
> 标签：javascript, internet-explorer

我在 IE 8 中测试我的脚本，但是它不工作，即它没有显示任何错误。我的脚本：

```
$(document).ready(function(){
    var type = "hat";
    $('select#itemtype').change(function() {
        if($("select#itemtype option:selected").text(); == type) {
            $('#graphic').show();
        } else {
            $('#graphic').hide();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T05:45:35.260

您在不应该存在的文本函数之后添加了一个分号，并且您没有`.ready()`正确关闭该函数。这是固定的JS：

```
$(document).ready(function(){
    var type = "hat";
    $('#itemtype').change(function() {
        if($("#itemtype option:selected").text() === type) {
            $('#graphic').show();
        } else {
            $('#graphic').hide();
        }
    });
}); 
```

**更新：**添加了 Baz1nga 的严格比较建议。

# php - 如何在另一个文件中访问连接变量

> ID：11069208
> 
> 赞同：-1
> 
> 时间：2012-06-17T05:45:29.003
> 
> 标签：php, database, global-variables, undefined

> **可能重复：**
> [数据库连接的全局或单例？](https://stackoverflow.com/questions/130878/global-or-singleton-for-database-connection)

我在 database.php 中有一个数据库类，然后在同一个文件上创建一个对象； `$database = new Database();` 然后我将这个文件包含到另一个文件中——这个文件有一个名为的类，`Test`里面`Test`有一个方法`test_me`。在 test_me 方法中，我想访问 Database 类的 $connection 变量。我怎样才能做到这一点？

这就是我尝试过的；

```
function test_me(){
  global $connection;
  //use $connection on another function..
} 
```

这给了我一个错误`undefined variable $connection`。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T05:51:19.480

如果你声明`$connection`一个全局变量，你的代码就可以了。

但最好避免使用全局变量。您可以在 Test 类中设置连接。

一个例子是：

```
class Test {

  protected $connection;

  public function setConnection($connection) {
    $this->connection = $connection;
  }

  function test_me () {
    // use $this->connection.
    //...
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T05:50:25.697

有几种方法可以实现这一点，简单的应该是

```
function test_me()
{
    global $database;

    echo $database->connection; // or do whatever you want with it
} 
```

# mongodb - MongoDB 更新集合

> ID：11069210
> 
> 赞同：0
> 
> 时间：2012-06-17T05:45:36.103
> 
> 标签：mongodb, collections, key

我还不能设置我的 MongoDB，所以很遗憾我不能自己测试这个。我计划有一个经常更新的集合。发生更新时，集合中可能存在未更改的数据。更新后这些数据是否仍然可用？例如：

```
db.statistics_db.games.1234.statistics = {a:1,b:2,c:3}
db.statistics_db.games.1234.update('statistics',{a:2,d:1,e:4}) 
```

这样最终的结果将是`{a:2,b:2,c:3,d:1,e:4}`，这是我可以期待发生的事情吗？或者数据会被完全替换吗？如果不是这种情况，我怎样才能达到我的预期？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T05:58:27.413

嗯，在这里找到了答案：[http ://www.mongodb.org/display/DOCS/Updating+Data+in+Mongo](http://www.mongodb.org/display/DOCS/Updating+Data+in+Mongo)

解决方案似乎是调用您要更新的数据，通过迭代新数据并替换旧数据进行更改，然后使用所有数据更新数据库。如果有人找到更好的方法，请告诉我。

# matlab - xlsread 和 waitbar MATLAB

> ID：11069221
> 
> 赞同：0
> 
> 时间：2012-06-17T05:49:13.287
> 
> 标签：matlab, progress-bar, xls

我已经在我的电脑上安装了 Matlab r2010a。

使用matlab中的xlsread函数并行读取数据时，如何在waitbar图中显示更新的进度？

非常感谢您的回答。

（编辑）

我的意思是，当**xlsread正在一一加载数据时，您可以在****waitbar**中看到加载进度。

有什么办法吗？

PD：我只想从一个 *.xls 文件中加载数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:26:53.040

有几个选项：

1.  一个困难的选择：创建一个`.mex`文件并计算出不同的 MATLAB 版本的未记录内存表示（可能非常困难，但我相信使用一些调试器是可能的）。
2.  `myxlsread.m`一种更简单的方法：使用`xlsread.m`,`xlsreadCOM.m`并`xlsreadXLSX.m`作为出发点创建自己的。
3.  如果您只需要`waitbar`在连续`xlsread`命令之间循环更新，那非常容易。

`1.``.mex`文件解决方案：如果要显示单个函数调用的进度，`xlsread`我相信事情会变得相当复杂。首先，您需要有两个线程，为此您需要使用`.mex`文件或其他方式。第二个问题是 AFAIK`xlsread`不会发出任何进度信号，这意味着您的`.mex`函数需要以某种方式获取被调用`xlsread`函数的变量（元胞数组或矩阵等）的内存地址。如果这是您想要的，那么此文档可能会很有用： http: [//undocumentedmatlab.com/blog/matlabs-internal-memory-representation/](http://undocumentedmatlab.com/blog/matlabs-internal-memory-representation/)请注意，MATLAB 的内部存储器表示完全没有文档记录，并且可能随时更改，并且在不同的 MATLAB 版本中有所不同，因此对于单个而言，`waitbar`这将是太多的工作。

`2.``myxlsread.m`解决方案：好消息是它不是内置的`xlsread`（至少不是在 MATLAB R2012a 中），因此您可以毫无问题地阅读代码并使用 MATLAB 调试器对其进行跟踪。由于它不是内置的，因此可能的选项是创建您自己的 custom ，`myxlsread.m`以`xlsread.m`,为例或直接修改它们以添加更新函数调用，如果在您的情况下版权问题不是问题（例如。您不分发代码或当地法律允许）。我认为修改或重新创建你的是最可行的方法。`xlsreadCOM.m``xlsreadXLSX.m``waitbar``myxlsread.m`

`3.`循环内`xlsread`解决方案：但是，如果您只想`waitbar`在单独`xlsread`的函数调用之间进行更新，那么这根本不是问题，它将类似于：

```
XlsFilenamesCellArray = { 'file1.xls', 'file2.xls', 'file3.xls' };
NumberOfFiles = size(XlsFilenamesCellArray, 2)

h = waitbar(0, '1', 'Name', 'xlsread loop progress', 'CreateCancelBtn', 'setappdata(gcbf,     ''canceling'', 1)');

for Index = 1:size(XlsFilenamesCellArray, 2)
    waitbar(Index/NumberOfFiles, h, sprintf('reading .xls file %d of %d', Index, NumberOfFiles));
    [num{Index}, text{Index}, raw{Index}] = xlsread(XlsFilenamesCellArray{Index});
end 
```

# c# - 如何从 C# xmldocument 中的父节点属性获取子节点列表

> ID：11069222
> 
> 赞同：0
> 
> 时间：2012-06-17T05:49:14.613
> 
> 标签：c#, xml, xmldocument

```
<?xml version="1.0" encoding="utf-8" ?>
<Database name="DB1">
   <Table name="Faculty">
    <Column>FID</Column>
    <Column>First Name</Column>
    <Column>Last Name</Column>
    <Column>DOB</Column>
    <Column>Phone No</Column>
    <Column>Full Address</Column>
    <Column>Salary</Column>
    <Column>Heights</Column>
</Table>
  <Table name="Title">
    <Column>TID</Column>
    <Column>Title</Column>
</Table>
</Database> 
```

我想获取基于 's 属性的所有子节点.. 比如如果表名 Title 然后 xmlchildlist 获取 TID，Title Nodes

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T06:09:05.573

如果您对使用 LINQ 感到满意，请尝试以下操作：

```
var name = "Title";
XDocument doc = XDocument.Load(path);
var selectors = (from elements in doc.Elements("Database").Elements("Table")
                where elements.Attribute("name").Value == name
                select elements).FirstOrDefault();
var list = selectors.Elements("Column").ToList();
var id = list[0];
var title = list[1]; 
```

# mongodb - mongoDB - 如果行没有

> ID：11069225
> 
> 赞同：0
> 
> 时间：2012-06-17T05:49:53.290
> 
> 标签：mongodb, mongodb-php, mongodb-query

我有一个数据库集合，其中包含 1000 个 CRN 号码，我需要向我们的客户发布这些号码。

我们使用 MongoDB，我想向一个电子邮件帐户发出 CRN 号。

所以这是我们当前的 JSON

```
{
"CRN":516612
} 
```

我需要在 PHP 中做的是找到没有“电子邮件”的地方：“电子邮件帐户”

我无法正常 find() 工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T18:24:25.330

要选择没有设置电子邮件字段的文档，您可以：

```
db.collection.find({"email":{$exists:false}}) 
```

要将电子邮件地址以原子方式存储在与此条件匹配的文档中，您将执行以下操作：

```
db.collection.update({"email":{$exists:false}},{$set:{"email":"new@email.com"}}) 
```

如果您需要取回刚刚分配电子邮件的 CRN，您可以使用[findAndModify](http://www.mongodb.org/display/DOCS/findAndModify+Command)：

```
q = db.collection.findAndModify({query:{email:{$exists:false}},
                                 update:{$set:{email:"new@email.com"}}}) 
```

q 将拥有您刚刚修改的文档（带有 CRN 和 _id 但不带有电子邮件 - 您也可以使用选项来取回电子邮件。

# cron - 通过 PHP 本身或 CPanel 上的 cron 作业在共享主机上安装 PHP DOM 扩展

> ID：11069227
> 
> 赞同：0
> 
> 时间：2012-06-17T05:50:28.053
> 
> 标签：cron, installation, shared-hosting, php-extension

我需要在我的服务器上安装[PHP DOM 扩展](http://www.php.net/manual/en/book.dom.php)，但是我正在为这个项目使用免费的共享托管主机，并且我*没有命令行访问权限，（但我可以 FTP/上传文件，如果有帮助的话）*。这可以通过使用来完成：

1.  运行脚本时要下载和安装的 PHP 文件本身？我之前能够从 php 文件中创建符号链接。我想知道我是否可以为设置 PHP DOM 做同样的事情......或者
2.  通过在 cPanel 上设置一个 cron 作业来做到这一点？

如何？对不起，这样一个菜鸟问题，我没有那么幸运的搜索。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T06:43:37.087

1.  我没有测试它，但你可以试试这个函数 dl(); [http://php.net/manual/en/function.dl.php](http://php.net/manual/en/function.dl.php)。
2.  为什么 cron 作业可以帮助您加载 dll？这不是它的工作原理。

# android - 任何人都可以推荐 ICS 的开源号码选择器吗？

> ID：11069236
> 
> 赞同：1
> 
> 时间：2012-06-17T05:53:23.780
> 
> 标签：android, user-interface

我正在尝试为我的 Android 应用程序实现一个号码选择器，但我讨厌 ICS 股票号码选择器： ![右边那个](../Images/ff859db2035962aee327942ab445b1a4.png)

任何人都可以推荐一个具有老虎机 UI 的开源号码选择器吗？喜欢这个应用程序中的那个？[https://play.google.com/store/apps/details?id=com.sportstracklive.stopwatch&hl=en](https://play.google.com/store/apps/details?id=com.sportstracklive.stopwatch&hl=en)像这样：

![老虎机风格](../Images/13c26ab80e64285a0b184f110ce4fa42.png)

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T05:54:52.673

我推荐[http://code.google.com/p/android-wheel/](http://code.google.com/p/android-wheel/)。用了很多。

还有股票 ics 的反向移植，[https://github.com/SimonVT/android-numberpicker](https://github.com/SimonVT/android-numberpicker)和股票 ics 编号选择器对于没有触摸屏的设备有优势，但我不知道这样的设备 :) 所以不在乎。

# c# - 无法根据字符串数据类型在通用列表中搜索

> ID：11069240
> 
> 赞同：-1
> 
> 时间：2012-06-17T05:54:16.377
> 
> 标签：c#, generics, search

```
 public string Process<T>(string name, string address)
    {
        var dataObj= new Data<T>();
        List<T> currentList= dataObj.GetAll(name);

    } 
```

现在我想在当前列表中搜索地址。客户端将调用 T，例如 - Process(Domain)("pc1","172.17.2.1")。域类包含名称和地址属性。GteAll 将返回所有值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:08:29.350

尝试关注

```
IEnumerable<T> myEnumerable = currentList.Select(current => current.address = address); 
```

# vb.net - 在 Crystal Report 中存储当前行的上一行值

> ID：11069242
> 
> 赞同：4
> 
> 时间：2012-06-17T05:54:42.183
> 
> 标签：vb.net, crystal-reports

我想检索当前行中的前一行值，如下所示（Crystal Report 2008）：

```
+------------+-----------------+----------+------------+----------------+
| Date       | PreviousBalance | Loan     | Collection | CurrentBalance |
+============+=================+==========+============+================|
| 14/02/2012 | 00.00           | 10000.00 | 00.00      | 10,000.00      |
| 15/02/2012 | 10,000.00       | 00.00    | 500.00     | 9,500.00       |
| 16/02/2012 | 9,500.00        | 00.00    | 500.00     | 9,000.00       |
| 18/02/2012 | 9,000.00        | 5,000.00 | 00.00      | 14,000.00      |
+------------+-----------------+----------+------------+----------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-06T08:19:44.287

这比看起来容易：

1.  创建两个运行总计，一个用于 Loan`{#TLoan}`字段`{table.Loan}`，一个用于 Collection`{#TCol}`字段`{table.Collection}`。

2.  创建一个公式：`{@Total}`具有以下内容：

`{#TLoan}-{#TCol}`

**这将具有 CurrentBalance 值。**

3.  创建另一个公式：`{@Prev}`具有以下内容：

`{@Total}-{table.Loan}+{table.Collection}`

**这将具有 PreviousBalance 值。**

使用这种方法不需要复杂的公式，结果是预期的。

![在此处输入图像描述](../Images/1ce081b34b053292fcb47ae52c635aa7.png)

![在此处输入图像描述](../Images/490e88229c5f0040dc749ea89ad6ca40.png)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-04T16:48:02.400

使用该`previous()`函数似乎是该解决方案的明显选择，但由于公式不能循环地相互引用（即`{@CurrentBalance}`不能引用`{@PreviousBalance}`，反之亦然），也不能递归，因此更难实现它这种方式比最初看起来的方式。

相反，您应该使用变量来跟踪交易之间的余额。您可以通过创建 3 个公式并将它们放置在报告的相应部分中来完成此操作。

```
// {@initVars} - Initialize balance variable
//This formula should be placed in your report header
whileprintingrecords;
numbervar balance:=0

// {@previousBalance} - Display previous line's balance
//This formula should be placed in your Details section
whileprintingrecords;
numbervar balance;

// {@currentBalance} - Display current balance after transactions
//This formula should be placed in your Details section
evaluateafter({@previousBalance});
numbervar balance := balance + {table.LoanAmount} - {table.CollectionAmount} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T16:47:30.137

我认为有很多方法。怎么样：

`previous({Table.Field})`

或者你可以有一个运行总数然后`{#total} - {Table.Field}`呢？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-05T09:02:30.560

在存储过程中，使用从表中读取并返回先前余额并将其存储在变量中的函数将先前的余额存储在变量中，然后在存储过程中读取当前余额。使用**union**在单独的行中读取上一个和当前，并在报告中获取它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-03T08:38:30.710

从存储过程（如果您使用一个）按日期 ASC 对数据进行排序，或者如果您不使用 SP，您可以按日期 ASC 对数据表或数据集进行排序，那么您必须确定 GROUPING 标准（ClientId）以将一个客户的信息分组，例如按照您提到的排序和分组，您可以将记录分组（字段资源管理器->组名称字段->插入组）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-30T12:24:20.517

尝试：

```
// {@PreviousBalance}
If PreviousIsNull({@CurrentBalance}) Then
  0
Else
  Previous({@CurrentBalance}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-05T22:51:55.783

请看这个[链接](http://blog.sqlauthority.com/2013/09/22/sql-server-how-to-access-the-previous-row-and-next-row-value-in-select-statement/)。您尚未指定基础数据源，因此我找到了 MS SQL 示例。

如果您无权访问数据库以查询/编辑存储过程，您可以编写一个 foreach 循环并计算适当的值。问题是报告通常会汇总、切片和过滤数据。“之前”和“之后”的概念在这种情况下失去了意义。

# iphone - NSUserDefaults iOS 字符串存储错误

> ID：11069245
> 
> 赞同：0
> 
> 时间：2012-06-17T05:55:07.583
> 
> 标签：iphone, nsuserdefaults

我正在尝试将标签的值存储在 NSUserDefault 键中`prevmode`，但是当它似乎没有存储时，并且在它在 debugger 中显示后尝试调用时`Invalid CFStringRef`。

要存储的代码是

```
//Check for previous mode 
NSUserDefaults *defaults;
NSString *prevmode;
prevmode = passLength.text;

[defaults setObject:prevmode forKey:@"prevmode"]; 
```

并且恢复是

```
NSUserDefaults *defaults;

NSString *prevmode;

prevmode = [defaults objectForKey:@"prevmode"]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T06:12:41.287

正如上面评论中所表达的，我们需要一个指向 NSUserDefaults 实例的有效指针：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T05:57:14.233

您应该`setValue:`在设置为默认值后使用和同步。取回使用时`valueForKey:`

保存：

```
[[NSUserDefaults standardUserDefaults] setValue:prevmode forKey:@"prevmode"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

并检索：

```
[[NSUserDefaults standardUserDefaults] valueForKey:@"prevmode"]; 
```

希望这可以帮助。

# android - 如何在android中的两个活动之间应用3d过渡？

> ID：11069250
> 
> 赞同：12
> 
> 时间：2012-06-17T05:55:23.380
> 
> 标签：android, animation

我有一个 android 应用程序，在两个活动之间切换时，我想应用 3D 过渡...我知道方法`overridePendingTransition()`，但它没有任何 3d 动画。那么如何做到呢？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-17T06:41:42.940

我在活动之间使用了 3D Cubic Transition。感谢 Robert Heim，他是这个程序的开发者。

下面是片段

**Activity1.java**

```
package org.vipul;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class Activity1 extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity1);

        Button switchActivityBtn = (Button) findViewById(R.id.bSwitchActivity);
        switchActivityBtn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                animatedStartActivity();
            }
        });
    }

    @Override
    protected void onResume() {
        // animateIn this activity
        ActivitySwitcher.animationIn(findViewById(R.id.container),
                getWindowManager());
        super.onResume();
    }

    private void animatedStartActivity() {
        // we only animateOut this activity here.
        // The new activity will animateIn from its onResume() - be sure to
        // implement it.
        final Intent intent = new Intent(getApplicationContext(),
                Activity2.class);
        // disable default animation for new intent
        intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
        ActivitySwitcher.animationOut(findViewById(R.id.container),
                getWindowManager(),
                new ActivitySwitcher.AnimationFinishedListener() {
                    @Override
                    public void onAnimationFinished() {
                        startActivity(intent);
                    }
                });
    }
} 
```

**Activity2.java**

```
package org.vipul;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class Activity2 extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity2);

        Button switchActivityBtn = (Button) findViewById(R.id.bSwitchActivity);
        switchActivityBtn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                animatedStartActivity();
            }
        });
    }

    @Override
    protected void onResume() {
        // animateIn this activity
        ActivitySwitcher.animationIn(findViewById(R.id.container),
                getWindowManager());
        super.onResume();
    }

    private void animatedStartActivity() {
        // we only animateOut this activity here.
        // The new activity will animateIn from its onResume() - be sure to
        // implement it.
        final Intent intent = new Intent(getApplicationContext(),
                Activity1.class);
        // disable default animation for new intent
        intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
        ActivitySwitcher.animationOut(findViewById(R.id.container),
                getWindowManager(),
                new ActivitySwitcher.AnimationFinishedListener() {
                    @Override
                    public void onAnimationFinished() {
                        startActivity(intent);
                    }
                });
    }
} 
```

**ActivitySwitcher.java**

```
package org.vipul;

import android.view.Display;
import android.view.View;
import android.view.WindowManager;
import android.view.animation.AccelerateInterpolator;
import android.view.animation.Animation;

/**
 * This ActivitySwitcher uses a 3D rotation to animate an activity during its
 * start or finish.
 * 
 * see: http://blog.robert-heim.de/karriere/android-startactivity-rotate-3d-
 * animation-activityswitcher/
 * 
 * @author Robert Heim
 * 
 */
public class ActivitySwitcher {

    private final static int DURATION = 300;
    private final static float DEPTH = 400.0f;

    /* ----------------------------------------------- */

    public interface AnimationFinishedListener {
        /**
         * Called when the animation is finished.
         */
        public void onAnimationFinished();
    }

    /* ----------------------------------------------- */

    public static void animationIn(View container, WindowManager windowManager) {
        animationIn(container, windowManager, null);
    }

    public static void animationIn(View container, WindowManager windowManager,
            AnimationFinishedListener listener) {
        apply3DRotation(90, 0, false, container, windowManager, listener);
    }

    public static void animationOut(View container, WindowManager windowManager) {
        animationOut(container, windowManager, null);
    }

    public static void animationOut(View container,
            WindowManager windowManager, AnimationFinishedListener listener) {
        apply3DRotation(0, -90, true, container, windowManager, listener);
    }

    /* ----------------------------------------------- */

    private static void apply3DRotation(float fromDegree, float toDegree,
            boolean reverse, View container, WindowManager windowManager,
            final AnimationFinishedListener listener) {
        Display display = windowManager.getDefaultDisplay();
        final float centerX = display.getWidth() / 2.0f;
        final float centerY = display.getHeight() / 2.0f;

        final Rotate3dAnimation a = new Rotate3dAnimation(fromDegree, toDegree,
                centerX, centerY, DEPTH, reverse);
        a.reset();
        a.setDuration(DURATION);
        a.setFillAfter(true);
        a.setInterpolator(new AccelerateInterpolator());
        if (listener != null) {
            a.setAnimationListener(new Animation.AnimationListener() {
                @Override
                public void onAnimationStart(Animation animation) {
                }

                @Override
                public void onAnimationRepeat(Animation animation) {
                }

                @Override
                public void onAnimationEnd(Animation animation) {
                    listener.onAnimationFinished();
                }
            });
        }
        container.clearAnimation();
        container.startAnimation(a);
    }
} 
```

**Rotate3dAnimation.java**

```
package org.vipul;

import android.graphics.Camera;
import android.graphics.Matrix;
import android.view.animation.Animation;
import android.view.animation.Transformation;

/**
 * An animation that rotates the view on the Y axis between two specified
 * angles. This animation also adds a translation on the Z axis (depth) to
 * improve the effect.
 */
public class Rotate3dAnimation extends Animation {
    private final float mFromDegrees;
    private final float mToDegrees;
    private final float mCenterX;
    private final float mCenterY;
    private final float mDepthZ;
    private final boolean mReverse;
    private Camera mCamera;

    /**
     * Creates a new 3D rotation on the Y axis. The rotation is defined by its
     * start angle and its end angle. Both angles are in degrees. The rotation
     * is performed around a center point on the 2D space, definied by a pair of
     * X and Y coordinates, called centerX and centerY. When the animation
     * starts, a translation on the Z axis (depth) is performed. The length of
     * the translation can be specified, as well as whether the translation
     * should be reversed in time.
     * 
     * @param fromDegrees
     *            the start angle of the 3D rotation
     * @param toDegrees
     *            the end angle of the 3D rotation
     * @param centerX
     *            the X center of the 3D rotation
     * @param centerY
     *            the Y center of the 3D rotation
     * @param reverse
     *            true if the translation should be reversed, false otherwise
     */
    public Rotate3dAnimation(float fromDegrees, float toDegrees, float centerX,
            float centerY, float depthZ, boolean reverse) {
        mFromDegrees = fromDegrees;
        mToDegrees = toDegrees;
        mCenterX = centerX;
        mCenterY = centerY;
        mDepthZ = depthZ;
        mReverse = reverse;
    }

    @Override
    public void initialize(int width, int height, int parentWidth,
            int parentHeight) {
        super.initialize(width, height, parentWidth, parentHeight);
        mCamera = new Camera();
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        final float fromDegrees = mFromDegrees;
        float degrees = fromDegrees
                + ((mToDegrees - fromDegrees) * interpolatedTime);

        final float centerX = mCenterX;
        final float centerY = mCenterY;
        final Camera camera = mCamera;

        final Matrix matrix = t.getMatrix();

        camera.save();
        if (mReverse) {
            camera.translate(0.0f, 0.0f, mDepthZ * interpolatedTime);
        } else {
            camera.translate(0.0f, 0.0f, mDepthZ * (1.0f - interpolatedTime));
        }
        camera.rotateY(degrees);
        camera.getMatrix(matrix);
        camera.restore();

        matrix.preTranslate(-centerX, -centerY);
        matrix.postTranslate(centerX, centerY);
    }
} 
```

**活动1.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/container"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#003300"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/bSwitchActivity"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="switch activity" />

</LinearLayout> 
```

**活动2.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/container"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/bSwitchActivity"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="back" />

</LinearLayout> 
```

**清单条目**

```
 <activity
            android:name=".Activity1"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Activity2"
            android:label="Activity 2" >
        </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-31T12:11:37.230

这是具有反向动画功能的@Vipul Shah 代码的扩展

在“ActivitySwitcher”中添加以下方法

```
 public static void animationInReverse(View container, WindowManager windowManager) {
    animationInReverse(container, windowManager, null);
}

public static void animationInReverse(View container, WindowManager windowManager, AnimationFinishedListener listener) {
    apply3DRotation(-90, 0, false, container, windowManager, listener);
}

public static void animationOutReverse(View container, WindowManager windowManager) {
    animationOut(container, windowManager, null);
}

public static void animationOutReverse(View container, WindowManager windowManager, AnimationFinishedListener listener) {
    apply3DRotation(0, 90, true, container, windowManager, listener);
} 
```

并将其添加到第一个活动

```
 @Override
protected void onResume() {
    if (isFromOncreate) {
        isFromOncreate = false;
        ActivitySwitcher.animationIn(findViewById(R.id.container), getWindowManager());
    } else {
        ActivitySwitcher.animationInReverse(findViewById(R.id.container), getWindowManager());
    }
    super.onResume();
} 
```

# java - 从 json 日期字符串中提取日期到字符串

> ID：11069251
> 
> 赞同：0
> 
> 时间：2012-06-17T05:55:41.540
> 
> 标签：java, android, json, jodatime

安卓编程。我有一个 json 将数据库中的日期作为字符串返回。如何使用 Joda 或任何其他库将日期从字符串中提取为这种格式 mm/dd/yy。这是字符串 2012-05-22T00:00:00

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T06:00:11.203

它是[ISO8601](http://en.wikipedia.org/wiki/ISO_8601)日期格式，因此您可以使用 jodas：

```
DateTimeFormatter fmt = ISODateTimeFormat.dateTime();
DateTime dt = fmt.parseDateTime(strInputDateTime); 
```

之后，只需格式化 DateTime 对象：

```
DateTimeFormatter fmt2 = DateTimeFormat.forPattern("MM/dd/yyyy");
String myDate = fmt2.print(dt) 
```

此信息来自[http://joda-time.sourceforge.net/userguide.html#Standard_Formatters](http://joda-time.sourceforge.net/userguide.html#Standard_Formatters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T06:17:59.353

使用标准 JDK，您可以使用`SimpleDateFormat`

```
Date parsedDateInstance = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss").parse(dateString);

String formattedDate = new SimpleDateFormat("MM/dd/yyyy").format(dateInstance); 
```

# windows - 当 git 从 Windows 机器推送 http 时自动输入用户名/密码

> ID：11069256
> 
> 赞同：3
> 
> 时间：2012-06-17T05:56:28.653
> 
> 标签：windows, git

我正在从我的 Windows 框推送到从 http（不是 ssh）地址克隆的存储库。每次推送，我都必须输入我的 u/p。我想自动化这个过程。我尝试了以下方法：

```
$ git config credential.helper cache
$ git config credential.helper 'cache timeout=360000' 
```

但是这些设置没有效果，我仍然每次都要输入 u/p。有没有办法让它自动化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T06:29:44.703

使用 _netrc 文件存储远程机器的用户名/密码，[在此处描述](https://stackoverflow.com/a/6031266/1155892)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T20:45:14.520

较新版本的 Git 支持更精简的[凭证 API](http://www.kernel.org/pub/software/scm/git/docs/v1.7.9/technical/api-credentials.html)。根据凭证助手的实现，这通常比使用 .netrc 更方便和安全。

一个流行的 Windows 凭据助手是[git-credential-winstore.exe](http://gitcredentialstore.codeplex.com/releases/view/87586)。只需下载到 git/bin 路径并执行。Github 提供了一个[类似的助手](https://help.github.com/articles/set-up-git#platform-windows)。

此处的其他详细信息（但不特定于 Windows）：

*   [在 GitHub 上使用 https:// 时，有没有办法跳过密码输入？](https://stackoverflow.com/questions/5343068/is-there-a-way-to-skip-password-typing-when-using-https-github)

# android - 相同的设备规格但不同的图像尺寸

> ID：11069260
> 
> 赞同：0
> 
> 时间：2012-06-17T05:57:33.473
> 
> 标签：android, android-layout

我开发了一个安卓应用程序，它在高密度大屏幕设备上看起来非常好（或者这就是我的想法）。我在模拟器和测试设备上运行它，一切都很好。

但是，我收到了一些用户的投诉，他们说图片看起来太小了。所有的投诉都围绕着 2 种设备。我检查了设备的规格，发现它们是高密度大屏幕设备！

为什么图像以较小的尺寸显示？我能做些什么来解决这样的情况？

非常感谢

# android - Android：MotionEvent.ACTION_MOVE 的计数间隔？

> ID：11069261
> 
> 赞同：0
> 
> 时间：2012-06-17T05:57:41.470
> 
> 标签：android, intervals, touch-event, translate-animation

我希望我的视图随着我们的手指移动而水平移动。请想象一下 iOS 主菜单或照片（预装的厨房应用程序）之类的东西；如果你滑动食指，屏幕上的东西也会滑动。我在Android库中找不到相同的功能，所以我自己实现了它，但是...

动画不是很流畅！

这是可以理解的，因为我得到的位置值

```
event.getRawX(); 
```

有点太粗糙了，所以我的 TranslateAnimation 也很粗糙......

有什么办法可以更改 MotionEvent.ACTION_MOVE 的间隔以获得更精细的位置值？（或者，我可以“模糊”我的 TranslateAnimation 吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:15:42.550

[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)可能是您正在寻找的东西。

另请参阅开发人员博客条目[使用 ViewPager 滑动水平视图](http://android-developers.blogspot.in/2011/08/horizontal-view-swiping-with-viewpager.html)

# linux - syslog.confg 中的 TimeZone 选项

> ID：11069262
> 
> 赞同：1
> 
> 时间：2012-06-17T05:57:54.263
> 
> 标签：linux, logging

我们正在使用 syslog 通过 syslofd(linux) 记录我们的系统级日志。流程是这样的 - 首先 log msg 进入 log4cxx，然后 log4cxx 使用 ::syslog 函数将日志写入 syslogd。

我的消息总是记录在 TZ env 变量上设置的 timeZone 中。但我想要的是始终在 GMT 中记录 mag。 **所以我的问题是，是否有任何选项可以让我在代码或配置文件中硬核 TimeZone，使其不依赖于 TZ Env 变量？**

**或者是否有任何选项可以在 syslog.config 中设置 TimeZone，以便 syslog 不会从 TZ Env 变量中获取 TimeZone 的值？**

# heroku - playframework 1.2.4 heroku worker 上的工作

> ID：11069267
> 
> 赞同：1
> 
> 时间：2012-06-17T05:58:29.473
> 
> 标签：heroku, playframework

我正在将我的应用程序移至 heroku，现在想开始在工作进程中运行作业。我的应用中有 2 种工作

1.  周期性的。
2.  从请求中产生。

是否可以使用相同的代码（播放作业），但只需将它们转移到工作进程？社区中的其他人如何处理它？

# windows - 如何控制Windows上jboss中Web服务调用的数量

> ID：11069269
> 
> 赞同：0
> 
> 时间：2012-06-17T05:58:50.647
> 
> 标签：windows, web-services, jboss

我在 win 2008 r2 64bit 机器上安装了 jboss。我想控制在 jboss 服务器上处理的 Web 服务请求的数量。如何配置这个？更多详细信息：操作系统 - win 2008r2 服务器 JVM - 1.5、32 位 jboss - 4.3.0

# function - Excel Vba函数，字符数有限制吗？

> ID：11069272
> 
> 赞同：2
> 
> 时间：2012-06-17T05:59:44.523
> 
> 标签：function, excel, character, max, vba

我在 excel VBA 中使用一个函数，我正在从一长串单元格中提取数据。

我正在使用这个功能

```
Function name(cell As Range) As Double

Dim Textstrng As String
Textstrng = cell.text
name = InStr(1, Textstrng, "UpgradeApprovalCode=")
End Function 
```

当`UpgradeApprovalCode=`在字符串中大约 8000 个字符内时，其显示结果，如 7000。但当它远离前 10000 个字符时，它不显示`#VALUE!,`不结果。

那么是否有任何搜索字符限制或我如何克服这个限制。我用的是office 2007。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T06:28:14.183

尝试使用该`Value`属性而不是`Text`

IE

`Textstrng = cell.Value`

编辑：

```
Sub main()
Dim cell As Range
Dim sh As Worksheet
Set sh = ActiveSheet
Set cell = sh.Cells(1, 1)
Call GetName(cell)
End Sub

Function GetName(cell As Range) As Double

Dim Textstrng As String
Textstrng = cell.Value
GetName = InStr(1, Textstrng, "UpgradeApprovalCode=", vbTextCompare)
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:40:22.547

Each cell has a Value, Value2, Text, and Formula value. Value and Value2 can get up to 32K, but Text is limited to a length of 8221\. Formula length can be longer, but when it gets over 8192 characters, it can only be saved in XLSB format. I'd hate to see that formula!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T23:57:52.290

在单元格中显示的限制为 32k 个字符（并非所有字符都可见，但它们在单元格中）。

就 VBA 而言，字符串可以是 2GB 长（32 位有符号长元素数）。所以这个问题当然不是 VBA 限制。

因此，D.Brett 对 .Value 的回答显示了单元格中的实际内容，而不仅仅是文本。

# javascript - 使用 if-else 速记时省略第二个表达式

> ID：11069278
> 
> 赞同：300
> 
> 时间：2012-06-17T06:00:36.040
> 
> 标签：javascript, ternary-operator, conditional-operator, shorthand

我可以写`if else`没有的速记`else`吗？

```
var x=1;

x==2 ? dosomething() : doNothingButContinueCode(); 
```

我注意到`null`为 else 工作（但我不知道为什么或这是否是个好主意）。

**编辑：**你们中的一些人似乎对我为什么要费心尝试这个感到困惑。请放心，这纯粹是出于好奇。我喜欢玩弄 JavaScript。

* * *

## 回答 #1

> 赞同：754
> 
> 时间：2012-06-17T06:05:14.480

您所拥有的是对[三元运算符](http://en.wikipedia.org/wiki/Ternary_operation)的相当不寻常的使用。通常它在其他一些操作中用作表达式，而不是语句，例如：

```
var y = (x == 2 ? "yes" : "no"); 
```

因此，为了可读性（因为您所做的事情不寻常），并且因为它避免了您不想要的“其他”，我建议：

```
if (x==2) doSomething(); 
```

* * *

## 回答 #2

> 赞同：288
> 
> 时间：2012-06-17T06:33:51.973

这也是一种选择：

```
x==2 && dosomething(); 
```

`dosomething()``x==2`只有在被评估为真时才会被调用。这称为[短路](http://www.openjs.com/articles/syntax/short_circuit_operators.php)。

它在这种情况下不常用，您真的不应该编写这样的代码。我鼓励这种更简单的方法：

```
if(x==2) dosomething(); 
```

您应该始终编写可读的代码；如果您担心文件大小，只需借助众多 JS 压缩器之一创建它的缩小版本。（例如 Google 的[Closure Compiler](http://closure-compiler.appspot.com/home)）

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2015-09-23T07:50:12.080

另外一个选项：

```
x === 2 ? doSomething() : void 0; 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-06-17T06:03:34.013

如果你不做其他，为什么不做：

```
if (x==2) doSomething(); 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-06-17T06:03:36.703

`null`对于三元表达式的其中一个分支，使用是很好的。并且三元表达式可以作为 Javascript 中的语句。

不过，就风格而言，如果您考虑调用一个过程，那么使用 if..else 来编写它会更清楚：

```
if (x==2) doSomething;
else doSomethingElse 
```

或者，在你的情况下，

```
if (x==2) doSomething; 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-11-04T11:26:12.173

这个旧线程的一个小补充..

如果您正在使用三元运算符评估`for`/`while`循环内的表达式并且想要`continue`or`break`作为结果 - 您将遇到问题，因为`continue`&`break`都不是表达式；它们是没有任何价值的陈述。

这将产生`Uncaught SyntaxError: Unexpected token continue`

```
for (const item of myArray) {
    item.value ? break : continue;
} 
```

如果你真的想要一个返回语句的单行，你可以使用它来代替：

```
for (const item of myArray) {
    if (item.value) break; else continue;
} 
```

*   PS - 这段代码可能会引起一些人的注意。只是说.. :)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-06-17T06:03:45.030

从技术上讲，将 null 或 0 或只是一些随机**值**放在那里是有效的（因为您没有使用返回值）。但是，您为什么使用此构造而不是`if`构造？当您以这种方式编写代码时，您要尝试做什么就不太明显了，因为您可能会将人们与无操作（在您的情况下为 null）混淆。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-04-11T20:25:50.447

可能最短（基于[OR 运算符](https://javascript.info/logical-operators)及其[优先级](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence)）

```
x-2||dosomething() 
```

```
let x=1, y=2;
let dosomething = s=>console.log(s); 

x-2||dosomething('x do something');
y-2||dosomething('y do something');
```

# javascript - 将文本框中的用户输入附加到新元素

> ID：11069290
> 
> 赞同：0
> 
> 时间：2012-06-17T06:03:56.540
> 
> 标签：javascript, html

我正在尝试添加一个字段供用户输入文本，并将该文本添加到当前 div 中显示的新段落元素中。

但是，我收到的是 [object] 而不是用户输入。这是因为它还不是字符串值吗？我一直在尝试将我的对象转换为字符串，并且不断返回错误。

```
function addText(){
    var newParagraph = document.createElement('p');
    var input = document.getElementById('userInput');

    newParagraph.className = 'red';
    newParagraph.appendChild(document.createTextNode(input));
    document.getElementById('content').appendChild(newParagraph);
}

function getText(){         
        addText();
} 
```

我正在使用“userInput”的输入 id 并使用 触发按钮上的功能`onClick = "getText()"`。该脚本工作正常，除了返回 [object] 而不是 userInput 文本。

HTML：

```
<input type="text" id="userInput" />
<button id="button" onClick="getText()">Insert Text</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T06:06:38.383

您需要获取输入的值，现在您将整个输入作为对象分配给您的`var input`，所以它应该是：

```
var input = document.getElementById('userInput').value; 
```

# iphone - 更改 UITabBar 文本

> ID：11069297
> 
> 赞同：0
> 
> 时间：2012-06-17T06:05:39.333
> 
> 标签：iphone, ios, xcode, uitabbarcontroller

嗨，我一直在试图弄清楚如何更改我的 UITabBar 的文本。我正在尝试这个，但它不起作用，我该怎么办？

```
- (id)init 
{
    UITabBarItem* theItem = [[UITabBarItem alloc] initWithTitle:[UIFont fontWithName:@"HelveticaNeue" size:nil] image:nil tag:0];
    self.tabBarItem = theItem;
    return self;  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T06:08:12.460

您正在将标题设置为字体的实例而不是字符串。

```
UITabBarItem* theItem = [[UITabBarItem alloc] initWithTitle:@"Some Title" image:nil tag:0]; 
```

# python - Python：导入 scipy 导致回溯引用已删除的文件

> ID：11069309
> 
> 赞同：4
> 
> 时间：2012-06-17T06:09:20.717
> 
> 标签：python, numpy, scipy

当我尝试在 Python 解释器（版本 2.6.1）中导入 scipy 模块（版本 0.11.0b1）时，我收到以下错误：

* * *

```
Traceback (most recent call last):

File "<stdin>", line 1, in module

File "/Users/...long path.../Desktop/scipy-0.11.0b1/scipy/\__init__.py", line 114, in module

ImportError: Error importing scipy: you cannot import scipy while
    being in scipy source directory; please exit the scipy source
    tree first, and relaunch your python intepreter. 
```

* * *

问题是python正在从一个不存在的文件中读取。不久前，我从我的桌面上删除了 scipy 目录，此后多次尝试重新启动解释器（和计算机）。为什么回溯继续引用一个不存在的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-01T19:56:37.133

添加 scipy 路径，如下所示。

```
from cx_Freeze import setup, Executable

include_files = ['C:\\Users\\User\\Anaconda\\Lib\\site-packages\\scipy']

setup(name = "ventana",
      options = {'build_exe': {'include_files':include_files}},
      version = "0.1",
      description = "ventana",
      executables = [Executable("REC.py")],) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:34:15.813

看起来 python 路径包含对您删除的目录的引用。

如果你：

```
import sys
print sys.path 
```

您应该能够在其中看到对已删除目录的引用。如果是这种情况，从 sys.path 中删除该条目将允许您像以前一样导入 scipy。

棘手的部分可能是找到*该*路径被注入到 sys.path 的位置。可能的位置包括（但不限于）：您系统的 site.py 文件、`PYTHONPATH`环境变量，甚至您的 O/S`PATH`环境变量。

祝你好运！

# c# - 通过 () 和不带括号创建对象实例的区别

> ID：11069312
> 
> 赞同：0
> 
> 时间：2012-06-17T06:10:03.937
> 
> 标签：c#, c#-4.0

> **可能重复：**
> [为什么 C# 3.0 对象初始值设定项构造函数括号是可选的？](https://stackoverflow.com/questions/3661025/why-are-c-sharp-3-0-object-initializer-constructor-parentheses-optional)

假设这是我的自定义对象：

```
public class MyObject {
    public string Name { get; set; }
    public int number { get; set; }

    public MyObject() {

    }
} 
```

这个对象可以定义通用的，或者自定义构造函数和更多的元素，所以我们可以用两种语法创建一个实例和设置属性

```
MyObject newObj1 = new MyObject { Name = "MyName", number = 10 };
MyObject newObj2 = new MyObject() { Name = "MyName", number = 10 }; 
```

使用括号的实例和不带括号的实例之间有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T06:12:20.020

> 使用括号的实例和不带括号的实例之间有什么区别吗？

不。

如果您使用 ReSharper，它会将第二个构造标记为冗余括号，并建议您删除它们。然而，这只是风格问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T06:19:28.993

> 使用括号的实例和不带括号的实例之间有什么区别吗？

是的，

第一个是对默认构造函数的隐式调用，第二个是显式调用。

虽然功能相同，但编译器对它们的看法不同。

# .htaccess - 我正在使用它在 url 中添加 .php ext

> ID：11069324
> 
> 赞同：0
> 
> 时间：2012-06-17T06:17:02.187
> 
> 标签：.htaccess, mod-rewrite

我正在使用以下内容`.php`在 URL 中添加扩展名：

```
RewriteEngine On

RewriteRule ^/?([a-z]+)$ $1.php [L] 
```

例如，如果 URL`www.doamin.com/create`比它将调用`create.php`.

这工作正常，但是当我想打电话时`create_new`，它就出错了。页面给出错误。

有人可以帮助我，这样两个条件都可以运行简单的 create 和 create_add 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T06:18:18.443

添加`_`到您的规则：

```
RewriteRule ^/?([a-z_]+)$ $1.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T06:24:40.197

使用[http://regexpal.com/](http://regexpal.com/)检查您的正则表达式。

`[a-z]`只会捕获从 a 到 z 的符号。添加`-`和`_`和数字 ( `0-9`) 以捕获所有内容。

所以使用这个正则表达式：

```
RewriteRule ^/?([-_.a-z0-9]+)$ $1.php [L] 
```

# python - 即时调试器和 lucene

> ID：11069325
> 
> 赞同：0
> 
> 时间：2012-06-17T06:17:22.577
> 
> 标签：python, visual-studio-2010, apache, lucene, wsgi

我正在将一个 django web 项目部署到一个真实的服务器中。该代码包含 Lucene 搜索引擎。整个系统在我自己的电脑上运行良好。但是，当我将它放在真实服务器上时，每当我想做索引或检索（如果我不调用索引或检索，系统的其余部分运行良好），就会出现错误：

Visual Studio 即时调试器“http.exe 中出现未处理的 win32 异常”或“python.exe 中出现未处理的 win32 异常”

出现此调试对话框后，系统将完全关闭，无法再访问。

真实服务器目前有：xampp 1.7.3（与Apache、phpMyadmin、mySQL捆绑） python-mysql

## 蟒蛇wsgi。

WinXP SP1 MSSQL 2005 视觉工作室 2010 SP1

我已经尝试了解决方案：[http](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressinstall/thread/24b356ad-59ef-446f-aa8b-df6b55fa78bb) ://social.msdn.microsoft.com/Forums/en-US/Vsexpressinstall/thread/24b356ad-59ef-446f-aa8b-df6b55fa78bb 但没有结果。

任何建议表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T10:08:38.457

假设您使用的是 mod_wsgi，请确保您正在设置：

```
WSGIApplicationGroup %{GLOBAL} 
```

请注意，执行此操作时您只能运行一个 Python Web 应用程序。

为什么这可能是必要的，请参阅：

[http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Python_Simplified_GIL_State_API](http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Python_Simplified_GIL_State_API)

# ios - detailTextLabel 不起作用

> ID：11069326
> 
> 赞同：0
> 
> 时间：2012-06-17T06:17:23.050
> 
> 标签：ios, uitableview

我知道这个问题之前已经发布过，我根据他们的更正修复了我的代码，但仍然没有得到单元工作的细节，只有正文。这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell==nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];//It's well initialized
}
cell.textLabel.text=[myArray objectAtIndex:indexPath.row];
        cell.detailTextLabel.text=@"All the stores";

return cell;
} 
```

我想看到的是一个文本和一个详细的文本。但是，我只看到正文。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T06:22:50.913

故事板可能包含具有相同重用标识符的原型单元，并且它被配置为不同的样式（即没有字幕）。为了进行有效的调试，您可以删除对 tableview 的调用以给您一个出列单元格，并每次都重新实例化一个以查看您的新单元格是否正常工作。但是，我建议采用另一种方式，在情节提要中配置原型单元，并使用它的配置（如果不存在，甚至可能引发异常）。

# c# - 文本框内容刷新

> ID：11069327
> 
> 赞同：0
> 
> 时间：2012-06-17T06:17:35.650
> 
> 标签：c#, wpf, datetime, textbox

我想将文本框内容设置为当前日期和时间。所以这是：

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        date_TextBox.Text = DateTime.Now.ToString(CultureInfo.InvariantCulture);
    }
} 
```

但是如何每秒刷新一次呢？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T06:20:47.177

您可以使用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)每秒触发一个事件以更新文本框

```
dispatcherTimer = new System.Windows.Threading.DispatcherTimer();
dispatcherTimer.Tick += (s,e) => date_TextBox.Text = DateTime.Now.ToString(CultureInfo.InvariantCulture);
dispatcherTimer.Interval = new TimeSpan(0,0,1);
dispatcherTimer.Start(); 
```

# sql - 将日期字段拆分为时间和日期 Oracle

> ID：11069328
> 
> 赞同：0
> 
> 时间：2012-06-17T06:17:37.380
> 
> 标签：sql, oracle, case-when, to-date

我在 Oracle 10.6 上有一个表 TIME_TABLE。此表上有一个名为 Start_Date 的字段。

```
Item       Start_Date
 1         3/13/2012 8:00:00 AM
 2         4/2/2012 1:30:31 PM 
```

我只想从 Start_Date 字段中获取时间信息，例如“8:00:00 AM”。因为我要确定时间间隔

```
CASE
WHEN   START_DATE between TO_DATE ('07:00 AM','HH:MI:SS AM') and  TO_DATE('11:59',' HH:MI:SS AM') THEN 'TIME1' 
```

但它不起作用！我怎样才能做到这一点 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T06:50:59.637

试试这样：

```
CASE
WHEN to_char(start_date, 'hh24miss') BETWEEN '070000' AND '115900' 
```

请注意，这可能会阻止数据库在 start_date 上使用索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T22:40:55.047

您的原始查询也非常接近 - 正如@ABCade 提到的索引性能，您可以测试它与：

```
SELECT CASE
       WHEN START_DATE BETWEEN TO_DATE (
                                TO_CHAR (START_DATE, 'MM/DD/YYYY')
                                || ' 07:00:00',
                                'MM/DD/YYYY HH24:MI:SS'
                            )
                        AND  TO_DATE (
                                 TO_CHAR (START_DATE, 'MM/DD/YYYY')
                                 || ' 11:59:00',
                                 'MM/DD/YYYY HH24:MI:SS'
                             )
       THEN
           'TIME1'
   END 
```

# jailbreak - iOS 如何使用 Entitlement.plist 指定我的应用程序的属性

> ID：11069330
> 
> 赞同：6
> 
> 时间：2012-06-17T06:17:52.980
> 
> 标签：jailbreak, iphone-privateapi, entitlements, code-signing-entitlements

我正在使用 Jailbreak + Appsync + iOS5.0.1 设备（没有开发人员许可证，但有一些技巧我可以在设备上运行我的应用程序）

现在我想使用私有 API launchApplicationWithIdentifier:suspended:。所以我需要添加

```
<key>com.apple.springboard.launchapplications</key>
<true/> 
```

到 myApp.entitlements.plist 文件。然后它应该可以工作，但我仍然收到错误

```
'Receiver type 'UIApplication' for instance message does not declare a method 
 with selector 'launchApplicationWithIdentifier:suspended:'' 
```

然后我发现有人说，如果我想使用 Entitlements.plist，必须启用代码签名。这是真的吗？我必须有开发者许可证吗？

或者有没有其他方法可以使用这种方法？我阅读了一些关于如何使用私有 API 的方法。似乎很难。我是 iOS 开发的新手。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T02:00:28.203

我在您的帖子中看到两个问题/问题：

**1）**你得到错误

> '接收器类型'UIApplication'例如消息未声明带有选择器'launchApplicationWithIdentifier：suspended：'的方法

那是编译器错误吗？听起来可能是这样。事情就是这样。在公共框架集中有很多objective-c 类仍然有一些*私有*方法。因此，在公共框架的普通头文件（.h 文件）中，不会列出那些私有方法。但是，它们存在于动态库中。如果你想构建一个使用这些的应用程序，那么解决问题的一种方法是找到**完整**标题的副本。

例如，[这里是完整 UIApplication.h 标头的副本](https://github.com/rpetrich/iphoneheaders/blob/master/UIKit/UIApplication2.h)。

然后，您可以复制*私有*方法的声明，并在您自己的代码中，像这样声明它们：

```
// Used to disable warning for non-public methods
@interface UIApplication (Extensions)
  - (BOOL)launchApplicationWithIdentifier:(id)identifier suspended:(BOOL)suspended;
@end 
```

这应该阻止编译器抱怨私有方法不存在。

对于未来，您应该阅读 about `class-dump`，这是一个您可以在 SDK 中的公共或私有框架上运行的工具，并自己反向生成上述标头。它们会随着 SDK 的每个版本而改变，因此能够自己生成它们是件好事。

**2）**您询问有关在没有代码签名的情况下使用权利的问题。

首先，[在这里阅读 Saurik 最初写的关于它的内容](http://www.saurik.com/id/8)。 **是的，**您确实需要对权利进行代码签名。但是，**不**，越狱手机上不一定要有 Apple 证书。您可以通过下载`ldid`可执行文件并执行

```
cd MyAppName.app
ldid -Sentitlements.xml MyAppName 
```

假设您的应用程序名为*MyAppName*并且您创建了权利文件*entitlements.xml*。如果您使用 ldid 伪造代码签名，我*相信此权利文件对您有用：*

```
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
    <key>com.apple.springboard.launchapplications</key>
    <true/>
  </dict>
</plist> 
```

当心。我`ldid`在网上找到了几个地方。我真的不确定哪一个是*正确*的。我记得有一次，我尝试这样做，而`ldid`我使用的版本不适用于签署权利。我`ldid`从另一个来源下载，然后它工作。所以，小心。

# css - 使用 CSS 加载背景图像的问题（Aptana Studio）

> ID：11069341
> 
> 赞同：2
> 
> 时间：2012-06-17T06:20:57.310
> 
> 标签：css, aptana, aptana3

我使用以下 CSS 为我的菜单设置背景图像

```
#menuContainer
{
    background:url('../images/main-bg.png') repeat-x;
} 
```

我的 CSS 在里面

```
~/styles/site.css 
```

我的形象在里面

```
~/images/main-bg.png 
```

问题是这在 Chrome 中完美运行，但在 Firefox 中不起作用。但是如果将 URL 更改为

```
#menuContainer
{
    background:url('images/main-bg.png') repeat-x;
} 
```

它开始在 Firefox 中工作，而在 Chrome 中则不起作用。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:26:10.943

用这个代替

```
#menuContainer
{
    background:url('../img/main-bg.png') repeat-x;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T06:27:40.773

这是否有效：

```
#menuContainer
{
    background-image:url('./../images/main-bg.png') repeat-x; /* or './../img/main-bg.png' */
} 
```

如果您有域名（或运行 localhost），那么您应该尝试使用绝对路径来获取图像，因为我认为问题在于浏览器如何解析相对路径：

```
#menuContainer
{
    background-image:url('wwww.example.com/images/main-bg.png') repeat-x; /* or 'localhost:8080/images/main-bg.png' - please replace 8080 with the port you are using. */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T15:14:20.163

这似乎是我这边的一个错误。我一直在使用 Aptana Studio 检查我的网站。当我从 Aptana 运行页面时，它会自动打开 Firefox，但它不会呈现图像。它使用称为 Firefox 内部服务器的东西。我认为问题就在那里。最后，我尝试通过右键单击 Windows 资源管理器中的 Index.html 在 Firefox 和 Chrome 中打开网页，它在两种浏览器中都能完美运行。谢谢大家的支持。

# php - 对象序列化 - 问题

> ID：11069343
> 
> 赞同：0
> 
> 时间：2012-06-17T06:22:03.097
> 
> 标签：php, php-5.3

请查看下面给出的代码。

```
class Connection
{
    protected $link;
    private $server, $username, $password, $db, $cnt;

    public function __construct($server, $username, $password, $db)
    {
        $this->server = $server;
        $this->username = $username;
        $this->password = $password;
        $this->db = $db;
        $this->cnt = 1;
        $this->connect();
    }

    public function connect()
    {
        echo '<br /> in connect '.($this->cnt++);
        $this->link = mysql_connect($this->server, $this->username, $this->password);
        mysql_select_db($this->db, $this->link);
    }

    public function __sleep()
    {
        echo '<br />in sleep';
        return array('server', 'username', 'password', 'db');
    }

    public function __wakeup()
    {
        echo '<br /> in wake up';
        $this->connect();
    }
}
$obj = new Connection('server', 'test', 'test', 'test');
$s = serialize($obj);
$obj->connect();
unserialize($s); 
```

如果我没记错的话，Serialize 应该销毁类的所有其他成员。

```
 $s = serialize($obj);
    $obj->connect();
    unserialize($s); 
```

在“服务器”、“用户名”、“密码”、“数据库”属性“cnt”序列化后应该销毁。但是当我调用 $obj->connect(); 它给了我 $this->cnt 值....

请解释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T06:26:59.733

serialize() 处理所有类型，除了资源类型。因此从 mysql_connect 返回的资源不会被序列化。

# asp.net - 面板干扰 Div

> ID：11069345
> 
> 赞同：0
> 
> 时间：2012-06-17T06:22:11.640
> 
> 标签：asp.net, html, css

我有这个 Default.aspx 设计

```
<head runat="server">
    <title></title>
    <style type="text/css">
        .heading
        {
            text-align: center;
            border-style: double;
            background-color:#F2A988;
            font-family:Sans-Serif;
            font-weight:bold;

        }
        #wrapper {
            margin: 0 auto;
            width: 400px; 
            text-align:left;
        }
        .style1
        {
            text-align: center;
            font-family:Sans-Serif;
        }
        .style2
        {
            font-family: Arial, Helvetica, sans-serif;
        }
    </style>
</head>
<body style="height: 642px; width: 911px; " id="wrapper">
    <form id="form1" runat="server">

    <div class="heading">
        Sheridan Computer Club - Inquiry Form</div>
        <br />

    <asp:Calendar ID="Calendar1" runat="server" Font-Names="Arial"></asp:Calendar>

        <br />

    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <asp:Button ID="btnInfo" runat="server" Font-Names="Arial" 
        onclick="btnInfo_Click" style="font-weight: 700" 
        Text="I'd like to receive more information!" Width="261px" />
    <asp:Panel ID="form" runat="server" Height="259px" Width="392px" 
        Visible="False">
        <span class="style2">If you would like to join the club or receive more 
        information about the club fill in the form below &amp; click submit button.<br />
        <br />
        </span><b>
        <asp:Label ID="Label1" runat="server" Font-Names="Arial" Text="First Name:"></asp:Label>
        &nbsp; </b>
        <asp:TextBox ID="TextBox1" runat="server" Width="184px"></asp:TextBox>
    </asp:Panel>

    <div id="meeting" 

        style="position:relative; top: -359px; left: 339px; width: 232px; height: 64px; text-align: center; margin-top: 0px; font-family: Arial; font-weight:bold;">
        <br />
&nbsp;&nbsp;&nbsp;&nbsp;
        <asp:Label ID="lblDate" runat="server"></asp:Label>
        <br />
        </div>

    <div style="width: 308px; position:relative; top: -552px; left: 307px; margin-top: 0px;" 
        class="style1">
        Click Below to find out when
        <br />
        the club meets next</div>

    <div style="position:relative; top: -591px; left: 646px; width: 274px; height: 289px; font-family:Sans-Serif;">
        <b>View Members by Program:<br />
        <asp:ListBox ID="ListBox1" runat="server" Height="175px" Width="263px">
        </asp:ListBox>
        </b></div>

    <div style="position:relative; top: -797px; left: 351px; width: 192px; height: 32px; text-align: center; margin-top: 0px;">
        <asp:Button ID="Button1" runat="server" Text="Next Meeting" 
            onclick="Button1_Click" />
    </div>

    </form>
</body>
</html> 
```

问题是，面板干扰了我放置的 div，只有在我单击我不想要的按钮后才会加载 Div。我正在做的是单击隐藏按钮本身并显示包含提交表单的面板的按钮。

这是我正在使用的 button_click 的代码，

```
protected void btnInfo_Click(object sender, EventArgs e)
    {
        btnInfo.Visible = false;
        form.Visible = true;
    } 
```

我无法弄清楚出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:40:39.110

我认为这与你的`position:relative`风格元素有关。

看看创建 css 列并将列表框浮动到日历的右侧。

[创建两列布局指南](http://www.456bereastreet.com/lab/developing_with_web_standards/csslayout/2-col/)

# mysql - 如何在mysql中搜索日期

> ID：11069351
> 
> 赞同：0
> 
> 时间：2012-06-17T06:23:56.637
> 
> 标签：mysql, sql

但是，我需要在 mysql 中搜索日期，如果列类型是日期，则它不起作用。我需要更改为文本类型是日期类型的任何方法

这是我的查询

```
SELECT Count(CaseStatus) as CompletedCase From checkfinale where CaseStatus='2' AND CompanyID='51' AND `CompletedDate` BETWEEN '2012-05-29' AND '2012-06-05' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T06:28:26.730

如以下链接所述，尝试铸造您的常量字符串进行比较： [http ://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#operator_between](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#operator_between)

```
AND `CompletedDate` BETWEEN CAST('2012-05-29' AS DATE) AND CAST('2012-06-05' AS DATE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:11:50.240

您还可以将日期指定为简单的 YYYYMMDD

```
BETWEEN 20120529 AND 20120605 
```

# python - Python真/假和

> ID：11069355
> 
> 赞同：0
> 
> 时间：2012-06-17T06:24:40.507
> 
> 标签：python, python-2.7

如果有这样的字母/单词，我试图打印出 true，如果没有，则打印出 false，但无论我输入什么，它总是正确的。

```
phr1= raw_input("Enter a phrase or paragraph, and this will check if you have those letters/word in ur paragraph: ")
print "You entered: "+phr1
phr2= raw_input("Check if a word/letter exists in the paragraph: ")
phr2 in phr1
if True:
    print "true"
elif False:
    print "false"
input("Press enter") 
```

当我运行代码时：

```
Enter a phrase or paragraph, and this will check if you have those letters/word in ur paragraph:
hello world
You entered: hello world
Check if a word/letter exists in the paragraph: g
true
Press enter 
```

这怎么可能，g不存在，为什么它说它存在？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T06:31:57.137

检查`if True`将始终通过，因为正在评估的布尔表达式是简单的`True`。将您的整个 if/else 更改为`print (phr2 in phr1)`

如果第二个短语位于第一个短语中，这将打印“True”，否则将打印“False”。要使其变为小写（无论出于何种原因），您可以使用`.lower()`下面评论中的详细信息。

如果您想使用原始的 if/else 检查（优点是您的输出消息比“True”/“False”更有创意），您必须像这样修改代码：

```
if phr2 in phr1:
    print "true"
else:
    print "false"
input("Press enter") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:42:42.147

```
if <something> 
```

意思就是它所说的：如果`<something>`为真，它会执行代码。前一行代码完全无关紧要。

```
phr2 in phr1 
```

这意味着“检查是否`phr2`在 中`phr1`，然后完全忽略结果”（因为你什么都不做）。

```
if True: 
```

这意味着“如果`True`是真的：”，就是这样。

如果你想测试是否`phr2`在 中`phr1`，那么这就是你必须要求 Python 做的事情：`if phr2 in phr1:`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T06:29:05.537

试试这个：

```
phr1= raw_input("Enter a phrase or paragraph, and this will check if you have those letters/word in ur paragraph: ")
print "You entered: "+phr1
phr2= raw_input("Check if a word/letter exists in the paragraph: ")
if phr2 in phr1:
    print "true"
else:
    print "false"
input("Press enter") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T06:29:20.163

```
phr1 = raw_input("Enter a phrase or paragraph, and this will check if you have those letters/word in ur paragraph: ")
print "You entered: "+phr1
phr2 = raw_input("Check if a word/letter exists in the paragraph: ")
if phr2 in phr1:
    print "true"
else:
    print "false"
raw_input("Press enter") 
```

# javascript - 自动完成搜索 CSS 样式

> ID：11069356
> 
> 赞同：1
> 
> 时间：2012-06-17T06:25:02.387
> 
> 标签：javascript, jquery, css, jquery-ui

我制作了一个 javascript 自动完成功能，但我的 CSS 样式有问题。我应该在#keywords 中包含哪些基础知识？这是 JS 代码：

```
<script>
$(document).ready(function() {
  $("#keywords").autocomplete({
    source: keywordList,
    minLength: 2,

  });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T06:38:52.770

您可能知道，选择器用于指定您要操作的标签。在这种情况下，将它们转换为自动完成字段。标签的样式与 javascript 代码关系不大，更多的是与 CSS 和您可能需要的任何其他资源（例如图像）有关。尽管可以使用 javascript 编写样式，但它不是在选择器字符串内部完成的。

* * *

## CSS

JQuery 会将此类添加到它转换为自动完成的标签中：`ui-autocomplete-input`。您应该能够在您应该使用 JQuery UI 获得的主题中找到该类在 CSS 中的定义。如果你不使用它，你也可以自己写一个，就像这样：

```
<style type="text/css">
    .ui-autocomplete-input
    {
        /*your style here*/
    }
</style> 
```

我不知道你希望它是什么样子，所以我不知道在里面放什么。

无论如何，您可以查看[w3schools.com CSS 教程](http://w3schools.com/css/default.asp)并了解要使用的 CSS。

请注意`.ui-autocomplete-input`，CSS 中是一个类选择器，您也可以使用任何其他选择器，例如：

```
.class /*to match a class*/
{
     /*your style here*/
}

#id /*to match an id*/
{
     /*your style here*/
}

body /*to match a tag name*/
{
     /*your style here*/
}

body > table /*to match a direct child*/
{
     /*your style here*/
}

body table /*to match a child (no matter how many levels inside)*/
{
     /*your style here*/
} 
```

这些选择器与您将在 JQuery 中使用的选择器相同，例如，当您通过`$("#keywords")`.

* * *

如果你想用jquery来改变一个标签的样式，你可以这样写代码：

```
$("#keywords").css('border', '1px solid black');​​​​​ 
```

但如果样式不会改变，最好使用 CSS。

* * *

注意：记得指定脚本类型：`<script type="text/javascript"> /*code*/ </script>`

# django - Django 测试客户端压缩嵌套的 JSON

> ID：11069357
> 
> 赞同：8
> 
> 时间：2012-06-17T06:25:41.327
> 
> 标签：django, django-testing

我遇到了一个与[Django 的 Querydict 奇怪行为非常相似的问题：将 POST 字典捆绑成一个键](https://stackoverflow.com/questions/6315960/djangos-querydict-bizarre-behavior-bunches-post-dictionary-into-a-single-key)和[单元测试 Django JSON View](https://stackoverflow.com/questions/4794457/unit-testing-django-json-view)。但是，这些线程中的任何问题/响应都没有真正指向我遇到的特定问题。我正在尝试使用 Django 的测试客户端发送带有嵌套 JSON 对象的请求（我所拥有的适用于具有非 JSON 值的 JSON 对象）。

**尝试#1：**这是我的初始代码：

```
 response = c.post('/verifyNewMobileUser/', 
        {'phoneNumber': user.get_profile().phone_number,
         'pinNumber': user.get_profile().pin,
         'deviceInfo': {'deviceID': '68753A44-4D6F-1226-9C60-0050E4C00067', 'deviceType': 'I'}}) 
```

如您所见，我的请求数据中有一个嵌套的 JSON 对象。但是，这就是 request.POST 的样子：

```
<QueryDict: {u'phoneNumber': [u'+15551234567'], u'pinNumber': [u'4171'], u'deviceInfo': [u'deviceType', u'deviceID']}> 
```

**尝试#2：**然后我尝试，添加 content-type 参数，如下所示：

```
response = c.post('/verifyNewMobileUser/', 
    {'phoneNumber': user.get_profile().phone_number,
     'pinNumber': user.get_profile().pin,
     'deviceInfo': {'deviceID': '68753A44-4D6F-1226-9C60-0050E4C00067', 'deviceType': 'I'}},
    'application/json') 
```

我现在得到的 request.POST 是

```
<QueryDict: {u"{'deviceInfo': {'deviceType': 'I', 'deviceID': '68753A44-4D6F-1226-9C60-0050E4C00067'}, 'pinNumber': 5541, 'phoneNumber': u' 15551234567'}": [u'']}> 
```

我想要做的就是能够为我的请求数据指定一个嵌套的字典。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-03T04:39:19.383

以下对我有用（使用命名参数）：

```
geojson = {
        "type": "Point",
        "coordinates": [1, 2]
    }

    response = self.client.post('/validate', data=json.dumps(geojson),
                                content_type='application/json') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T14:27:51.133

您的问题表明 Django 将您的请求解释为`multipart/form-data`而不是`application/json`. 尝试

`c.post("URL", "{JSON_CONTENT}", content_type="application/json")`.

另一件需要注意的事情是，Python 在呈现为字符串时使用单引号表示字典键/值，这是 simplejson 解析器不喜欢的。将硬编码的 JSON 对象保留为单引号字符串，在内部使用双引号来解决这个问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T10:51:25.577

我的解决方案如下：

在测试方法中：

```
data_dict = {'phoneNumber': user.get_profile().phone_number,
             'pinNumber': user.get_profile().pin,
             'deviceInfo':
                 {'deviceID': '68753A44-4D6F-1226-9C60-0050E4C00067',
                  'deviceType': 'I'}})

self.client.post('/url/', data={'data': json.dumps(data_dict)}) 
```

在视图中：

```
json.loads(request.POST['data']) 
```

这会将 post['data'] 作为字符串发送。在视图中，必须从该字符串加载 json。

谢谢。

# android - 获取对小部件的引用并在使用自定义 XML 布局创建的 AlertDialog 上设置其事件处理程序

> ID：11069360
> 
> 赞同：0
> 
> 时间：2012-06-17T06:26:48.473
> 
> 标签：android, events, android-layout, android-alertdialog

我创建了 AlertDialog，它有一些按钮和一个 gridview，从布局使用`LayoutInflater`，并`onCreateDialog()`在我的 Activity 类中被覆盖，它在布局中打包并返回`Dialog`对象。

在`onCreate()`活动类的方法中，我使用`showDialog(id)`其中 id 是与特定对话框关联的常量来显示对话框。

现在，我想将单击事件绑定到刚刚显示的 AlertDialog 上的小部件。我这样做如下：

```
showDialog(DLG_INPUT_FORM);
inputform = new Dialog(MyActivity.this);
inputform.setContentView(R.layout.input_form);

edtName = (EditView) inputform.findViewById(R.id.edtName);
btnCheck = (Button) inputform.findViewById(R.id.btnCheck);
txtStatus = (TextView) inputform.findViewById(R.id.txtStatus);

//This event is never triggered.
btnCheck.setOnClickListener(new OnClickListener()
{
    public void onClick(View v)
    {
        String name = edtName.getText().toString();
        //Do Something with the "name"
        txtStatus.setText("Available");
    }
}); 
```

这不会引发任何异常，但是单击按钮不会执行任何操作，实际上根本不会触发事件。

代码有什么问题？

**更新：**

这个问题有点类似于[这个](https://stackoverflow.com/questions/4113939/handling-buttons-in-custom-dialogs/)，我也得到了对 Dialog 上的小部件的引用，`btnCheck`但是`txtStatus`click 事件有问题，它不起作用。

# php - # 符号可以存储在 url 中并包含在 `REQUEST_URI` 中吗？

> ID：11069363
> 
> 赞同：-5
> 
> 时间：2012-06-17T06:27:46.813
> 
> 标签：php

使用

```
<?php echo $_SERVER['REQUEST_URI'] ;?> 
```

当网址为：`www.site.com/a/b/c/#d`

不显示`#d`，而是显示`/a/b/c`

这可能包括在内，还是出于某种原因而隐藏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T06:29:03.497

背后的任何东西都`#`只是客户端。服务器不会收到。

# java - 为什么可以将匿名类的实例分配给接口变量？

> ID：11069371
> 
> 赞同：2
> 
> 时间：2012-06-17T06:30:03.090
> 
> 标签：java, interface, instantiation, anonymous-class

我是 Java 新手。`anonymous class instance`我很难理解和之间的关系`interface`。[请参阅本网站](http://littletutorials.com/2008/03/09/anonymous-inner-classes/)中的示例：

```
// anonymous instance as a variable
Runnable r = new Runnable()
{
    @Override
    public void run()
    {
        //codes
    }
};

Thread t1 = new Thread(r, "anonymous 1");

// anonymous instance as a parameter
Thread t2 = new Thread (new Runnable()
{
    @Override
    public void run()
    {
        //codes
    }
}, "anonymous 2"); 
```

根据这个 SO 问题（http://stackoverflow.com/questions/11069056/why-java-interface-can-be-instantiated-in-these-codes）中的答案，我对匿名类有了基本的了解。

但是，我不明白这是什么：

```
Runnable r = new Runnable(){...}; 
```

在右边，我们创建了一个匿名类的实例，所以它是一个`object of a class`. 在左侧，它是一个`Interface`变量。

为什么可以将匿名类的实例分配给接口变量？

参考这个[网站](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Thread.html)：

```
Thread(Runnable target, String name) 
```

似乎 Thread 期望第一个参数是一个接口变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T06:35:34.530

这段代码...

```
Runnable r = new Runnable(){...}; 
```

该类`Runnable`是一个接口，因此您不能直接创建它的实例是正确的。但是，请注意该`{...}`部分中的代码 - 这是以本地化方式实现接口的方法。

基本上正在发生的事情是您正在创建接口的一个实例，该实例只能由`r`定义的方法查看和使用。由于您已经实现了本`{...}`节中的所有方法，因此该类是有效的，您可以像使用任何其他`Runnable`对象一样使用它。

这段代码...

```
Runnable r = new Runnable()
{
    @Override
    public void run()
    {
        //codes
    }
}; 
```

实际上与执行以下操作相同...

```
public class MyRunnable implements Runnable {
    public void run()
    {
        //codes
    }
};

// This goes in your class where you want to create the Runnable object
Runnable r = new MyRunnable(); 
```

两段代码都将创建一个`r`作为`Runnable`实例的变量。第一个解决方案是创建实例的简写，对于不需要在其他任何地方重用的东西很有用。第二种解决方案创建一个单独的类来实现接口，并且可以在本地范围之外重用它。

只要分配给变量的对象实现了接口，我们就可以使用接口类型存储变量。所以，在代码中...

```
Runnable r = new Runnable(){...}; 
```

我们说的是`r`实现了`Runnable`接口。中的位`{...}`是实现接口的位置，如前所述，所以一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T06:40:40.513

只有当对象类实现该接口时，您才能将对象分配给该接口。在这种情况下，您正在创建实现`Runnable`接口的匿名类的对象，使其成为正确的分配。

此外，[`Thread`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html)该类有一个[非参数构造函数](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#Thread%28%29)。这就是代码编译的原因。

# java - 从右到左排列 JTable 列

> ID：11069372
> 
> 赞同：3
> 
> 时间：2012-06-17T06:30:06.960
> 
> 标签：java, swing, jtable

当我向 中添加列时`JTable`，默认情况下，它们是从左到右排列的。
例如，如果我按此顺序添加（从左到右）：

```
col1,col2,col3 
```

我会得到：

```
+------+------+------+
| col1 | Col2 | Col3 |
+------+------+------+ 
```

但我想要这个：

```
+------+------+------+
| col3 | Col2 | Col1 |
+------+------+------+ 
```

如何制作`JTable`从右到左排列列的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T07:17:27.210

setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT) 或 applyComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT) 可以解决问题。请参阅 java doc 以获得进一步的说明

[设置组件方向](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Component.html#setComponentOrientation%28java.awt.ComponentOrientation%29)

[应用组件方向](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/Component.html#applyComponentOrientation%28java.awt.ComponentOrientation%29)

> 或者，您可以反转列名数组和行数据数组的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T06:42:56.787

我通过`.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT)`在 JTable 上进行设置来做到这一点。

谢谢

# c# - 如何改进 CLR 函数中的 Replace 函数？

> ID：11069373
> 
> 赞同：0
> 
> 时间：2012-06-17T06:30:37.143
> 
> 标签：c#, regex, sql-server-2008, replace, sqlclr

我有一个 CLR 函数来替换字符串值。但它运行了很长时间。如何改进此功能并使其运行得更快？

```
 public static SqlString ReplaceValues(String Value)
    {
    // Put your code here
    char[] c = new char[] { '.' };
    Value= Value.Trim();
    Value = Value.Trim(c);
    Value = Value.Replace("'", "").Replace(")", " ").Replace("(", " ").Replace("-", " ").Replace("_", " ");

    Value = Regex.Replace(Value, @"[י", "+[י");
    Value = Regex.Replace(Value, @"\s+", " ");

    return new SqlString(Value.Trim());

   } 
```

编辑：我将函数更改为使用 value.Replace，它更好，但它的运行时间仍然比预期的要长：

```
 public static SqlString ReplaceStreetValues(String Value)
    {
    // Put your code here
    Value = Value.Trim();
    char[] c = new char[]{'.'}; 
    Value = Value.Trim(c);

    Value= Value.Replace("'", "").Replace(")", " ").Replace("(", " ").Replace("-", " ").Replace("_", " ").Replace("רח", "");
   while (Value.IndexOf("  ")!=-1)
        Value = Value.Replace("  ", " ");
   while (Value.IndexOf("hh") !=-1)        
        Value = Value.Replace("hh", "h");

    return new SqlString(Value.Trim());

    } 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T06:47:52.063

尝试使用[StringBuilder.Replace](http://msdn.microsoft.com/en-us/library/3h5afh4w.aspx)代替。

*应*显着提高性能。

这就像`string.Replace(..)`替代品一样有效，不适用于`regex`通话。但显然瓶颈在于`string`通话。

**编辑**：

示例（*伪代码*）：

```
char[] c = new char[]{'.', ' '}; 
Value = Value.Trim(c);
var sb = new StringBuilder(Value);   

sb.Replace("'", "");
sb.Replace(")", " ");
sb.Replace("(", " ");
sb.Replace("-", " ");
sb.Replace("_", " ");
sb.Replace("רח", ""); 
```

# coldfusion - 如何解密包含特殊 ColdFusion 字符的值？

> ID：11069374
> 
> 赞同：0
> 
> 时间：2012-06-17T06:30:37.167
> 
> 标签：coldfusion, coldfusion-8

我正在使用 ColdFusion 进行加密和解密。我有一个值为 1 的变量 active。我想创建一个包含 active 加密值的 URL，例如：

```
http://localhost:8500/blueline/ActivateRegistration.cfm?email=abc@gmail.com&active=!# 
```

这`!#`是 1 的加密值。

在另一端，即 ActivateRegistration.cfm 我需要`active`使用相同的私钥解密并找到原始值。但是当我尝试以下代码时，我没有得到正确的加密字符串：

```
<cfset activeValue = url.active> 
```

原因是加密值还包含字符串中的特殊字符`#`。任何人都可以帮忙吗？另外如何处理 ColdFusion 特殊字符/关键字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T09:30:22.153

其他人已经介绍了如何转义出现在 URL 值中的对 URL 有意义的字符，但还有一个难题需要澄清/更正。

加密字符串没有问题，因为 # 是*ColdFusion*的特殊字符，这是因为它在 URL 本身中具有特殊含义。在 URL 中，# 是服务器上文档地址与文档中目标特定片段（即：书签/锚标记）之间的分隔符。由于此信息被认为与服务器无关，因此浏览器从不发送它，因此服务器永远不会得到它。

这类似于如果你有一个参数值，它本身有一个嵌入的 & 符号：就 URL 而言，这是参数之间的分隔符，而不是参数值的一部分，因此 CF 不会将其视为值的一部分对于 URL 变量，它会将其视为两个变量之间的分隔符。

为了避免所有这些混淆，正如其他受访者所说，您需要始终对需要在包含[对 URL 寻址模式本身有意义的](https://www.rfc-editor.org/rfc/rfc3986#section-2.2)字符的 URL 上进行的值进行 URL 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:03:39.933

```
<cfparam name="url.active" default="">
<cfoutput>
    <a href="#cgi.script_name#?active=#urlEncodedFormat('!##')#">This String Contains CFML Values</a>
    #urlDecode(url.active)#
</cfoutput> 
```

你需要做几件事。

1.  您需要替换任何`#`字符以`##`将它们转义以用于 ColdFusion。
2.  如果您在 URL 中传输奇怪的字符，使用 urlEncodedFormat() 传输它们并使用 urlDecode() 或 base64 解码它们应该也是最安全的。

正如 Leigh 提到的，我想看看您如何生成此加密文本以更好地帮助您。

# javascript - 如何模拟元素的真实onchange？

> ID：11069376
> 
> 赞同：0
> 
> 时间：2012-06-17T06:31:09.960
> 
> 标签：javascript, dom-events, greasemonkey

我有一个**select 元素**，它的`onchange`事件由 jQuery 事件侦听器处理，并且它的`onchange`属性为空。

通过该方法触发`onchange`事件

```
document.getElementById("element_name").onchange(); 
```

不管用。

我想要一个解决方案来模拟`onchange`该元素上的真实完整事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T06:36:34.233

尝试：

```
var element = document.getElementById("element_name");

if ('fireEvent' in element)
    element.fireEvent("onchange");
else {
    var evt = document.createEvent("HTMLEvents");
    evt.initEvent("change", false, true);
    element.dispatchEvent(evt);
} 
```

证明：

[http://jsfiddle.net/iambriansreed/xG7HB/](http://jsfiddle.net/iambriansreed/xG7HB/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T06:34:20.713

怎么样...

```
$('#element_id').trigger('change'); 
```

... 要不就...

```
$('#element_id').change(); 
```

? 添加[了 jsfiddle 来](http://jsfiddle.net/ZjR9P/)说明这一点。

或者你需要一个没有 jQuery 的解决方案？

# android - 在android中定期运行服务的最佳方法

> ID：11069377
> 
> 赞同：-4
> 
> 时间：2012-06-17T06:31:50.260
> 
> 标签：android, broadcastreceiver, handler, alarmmanager

我想知道在 android 中定期运行服务以执行某些任务（例如“x”小时）是最具成本效益的方式。警报管理器和广播接收器是否是一个不错的选择，或者更好的选择是使用处理程序。有人可以对此提出建议吗，请发布示例代码，说明如何使用警报管理器、广播接收器和其他方式通过处理程序进行操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T06:49:27.333

`AlarmManager`是完成“每X小时做一次”的正常方式。使用 a`Handler`并不是真正的选择。

# sql - SQL 循环遍历日期时间范围内的所有天并计算该范围内每一天的值

> ID：11069386
> 
> 赞同：1
> 
> 时间：2012-06-17T06:33:58.190
> 
> 标签：sql, sql-server, stored-procedures

**更新：解决方案在答案的底部！**

**标题是：带有“WITH”的 SQL 查询在存储过程之外运行，但不是作为存储过程的主体**

在 SQL Server 2008 上

工作 SQL 查询：

```
declare @start datetime = '01 jan 2012'
declare @end   datetime = '31 dec 2012'
declare @articleId int = 4

;WITH amonth(day) as
(
    select @start as day
        union all
    select day + 1
        from amonth
        where day < @end
)

(select total=(
    select SUM(UnitPrice * NewQuantity) as Value from InventoryBatch invBatches
    inner join
    (select * from
     (SELECT
          TOP 100 PERCENT
          [B].[InventoryBatchId] AS [InventoryBatchId],
          RANK() over (partition by [B].[InventoryBatchId] order by [B].[MutationDate] desc) AS [MutationDate],
          [B].[MutationDate] as [RealDate],
          [B].[Id],
          [B].NewQuantity
        FROM
          [InventoryBatchHistory] [B]
        WHERE
          ([B].[ArticleId] = @articleId AND [B].[DeliveryDate] <= amonth.day)
        GROUP BY
          [B].[InventoryBatchId], [MutationDate], [B].Id, B.NewQuantity) INV where MutationDate = 1) latest
          on invBatches.Id = latest.InventoryBatchId),
 amonth.day
    from amonth
    left join #t on #t.DT = amonth.day 
group by amonth.day ) OPTION (MAXRECURSION 400) 
```

给我一个每天计算的总数的列表，很好。

现在我想将其作为 StoredProcedure 重用：

```
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET NOCOUNT ON
GO

ALTER PROCEDURE [dbo].[GetTotalQuantityForArticleRange](
    @articleId INT,
    @start DATETIME,
    @end DATETIME)
AS
BEGIN

WITH amonth(day) as
(
    select @start as day
        union all
    select day + 1
        from amonth
        where day < @end
)

(select total=(
    select SUM(UnitPrice * NewQuantity) as Value from InventoryBatch invBatches
    inner join
    (select * from
     (SELECT
          TOP 100 PERCENT
          [B].[InventoryBatchId] AS [InventoryBatchId],
          RANK() over (partition by [B].[InventoryBatchId] order by [B].[MutationDate] desc) AS [MutationDate],
          [B].[MutationDate] as [RealDate],
          [B].[Id],
          [B].NewQuantity
        FROM
          [InventoryBatchHistory] [B]
        WHERE
          ([B].[ArticleId] = @articleId AND [B].[DeliveryDate] <= amonth.day)
        GROUP BY
          [B].[InventoryBatchId], [MutationDate], [B].Id, B.NewQuantity) INV where MutationDate = 1) latest
          on invBatches.Id = latest.InventoryBatchId),
 amonth.day
    from amonth 
    left join #t on #t.DT = amonth.day
group by amonth.day) OPTION (MAXRECURSION 400)

END

GO 
```

称为：

```
declare @start1 datetime = '01 jan 2012'
declare @end1   datetime = '31 dec 2012'

exec GetTotalQuantityForArticleRange 4, @start = @start1, @end = @end1 
```

我一直得到一个 NULL 结果。我错过了什么？

提前致谢。

**根据 drdigit 的建议添加**

使用时

```
WITH amonth(day) as ( select @start as day union all select day + 1 from amonth where day < @end ) SELECT * FROM amonth OPTION (MAXRECURSION 400); 
```

作为 SP 正文的第一行，我确实得到了我正在寻找的日期。在设置计算值时，我仍然无法理解这将如何不起作用。

到目前为止，所有感谢！

**工作解决方案：**

```
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET NOCOUNT ON
GO

ALTER PROCEDURE [dbo].[GetTotalQuantityForArticleRange](
    @articleId INT,
    @start DATETIME,
    @end DATETIME)
AS
BEGIN

WITH amonth(day) as 
( 
    select @start as day
        union all
    select day + 1
        from amonth
        where day < @end
)
SELECT total=(
    select SUM(UnitPrice * NewQuantity) as Value from InventoryBatch invBatches
    inner join
    (select * from
     (SELECT
          TOP 100 PERCENT
          [B].[InventoryBatchId] AS [InventoryBatchId],
          RANK() over (partition by [B].[InventoryBatchId] order by [B].[MutationDate] desc) AS [MutationDate],
          [B].[MutationDate] as [RealDate],
          [B].[Id],
          [B].NewQuantity
        FROM
          [InventoryBatchHistory] [B]
        WHERE
          ([B].[ArticleId] = @articleId AND [B].[DeliveryDate] <= amonth.day)
        GROUP BY
          [B].[InventoryBatchId], [MutationDate], [B].Id, B.NewQuantity) INV where MutationDate = 1) latest
          on invBatches.Id = latest.InventoryBatchId), * FROM amonth OPTION (MAXRECURSION 400); 

END

GO 
```

# c# - Sharepoint/Rest 和元数据

> ID：11069388
> 
> 赞同：0
> 
> 时间：2012-06-17T06:34:37.300
> 
> 标签：c#, .net, sharepoint, rest

我正在对共享点站点进行一些基本的 Rest/http 调用以上传文档。请参阅下面的代码。

这就像一个魅力，但它只创建具有给定名称和内容的文件。有没有办法通过 REST/http 接口来操作 sharepoint 中的元数据？

我还尝试使用 oData 协议，它可以轻松更改元数据，但这需要我添加服务引用并使用生成的类，非常好，但不是我需要的灵活性。有什么建议么？

```
byte[] bytesToSend = // get bytes from a file somewhere
WebRequest req = WebRequest.Create(new Uri("https://mysharepoint/sites/mysite/file.txt"));
req.Method = "PUT";
req.Credentials = new NetworkCredential("USR","passwd","Domain");
MemoryStream ms = new MemoryStream(bytesToSend);
ms.CopyTo(req.GetRequestStream());
HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
if (resp.StatusCode.Equals(HttpStatusCode.OK) || resp.StatusCode.Equals(HttpStatusCode.Created))
{       // ... Ok done uploading. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-08T15:43:58.283

上传文件后，如果您搜索响应数据，您可以在 SharePoint 中找到包含分配给文件的 ID 的服务器回复。使用此 ID，我们可以进行第二次休息调用以更新该项目及其元数据。

```
if (response.IsSuccessStatusCode)
{
    var info = response.Content.ReadAsStringAsync();
    JsonObject d = JsonValue.Parse(info.Result).GetObject();
    string id = d["d"].GetObject()["ListItemAllFields"].GetObject().GetNamedValue("ID").Stringify();

    client = new HttpClient(new HttpClientHandler() { UseDefaultCredentials = true });
    client.BaseAddress = new System.Uri(url);
    client.DefaultRequestHeaders.Clear();
    client.DefaultRequestHeaders.Add("X-RequestDigest", digest);
    client.DefaultRequestHeaders.Add("X-HTTP-Method", "MERGE");
    client.DefaultRequestHeaders.Add("IF-MATCH", "*");
    HttpContent strContent = new StringContent(String.Concat("{ '__metadata': { 'type': 'SP.List' }, 'Title': '", filename, "' }"));
    strContent.Headers.ContentType = new MediaTypeHeaderValue("application/json");
    strContent.Headers.ContentType.Parameters.Add(new NameValueHeaderValue("odata", "verbose"));
    HttpResponseMessage updateResponse = await client.PostAsync(String.Concat("_api/web/lists/GetByTitle('Project Photos')/Items(", id, ")"), strContent);
    updateResponse.EnsureSuccessStatusCode();
    if (updateResponse.IsSuccessStatusCode)
    {

    }
} 
```

我在这里有更多使用 HttpClient 处理 SharePoint REST 的示例：

[https://arcandotnet.wordpress.com/2015/04/01/sharepoint-2013-rest-services-using-c-and-the-httpclient-for-windows-store-apps/](https://arcandotnet.wordpress.com/2015/04/01/sharepoint-2013-rest-services-using-c-and-the-httpclient-for-windows-store-apps/)

# sql-server-2008-r2 - 已安装 SQL Server 2008 R2 完整版，但 Management Studio 是 Express

> ID：11069393
> 
> 赞同：0
> 
> 时间：2012-06-17T06:35:39.007
> 
> 标签：sql-server-2008-r2, sql-server-2008

我安装了 Microsoft SQL Server 2008 R2 完整包（64 位）。但之后我看到安装了 SQL Server Management Studio express（数据库引擎是 SQL Server Express）。在其他服务中，如集成、分析、报告服务是完整版。

那么..错误是什么？谁能指导我安装 SQL Server Management Studio 2008 完整版

编辑：在第一张图片中，您通常会连接我的 SQL Server Management Studio。（仅使用 EXPRESS 版本连接） ![使用 SQL SERVER Management Studio Express 2008 登录](../Images/94e1ffd0c3a556493ab67fc472ab7c97.png)

在第二张图片中显示了错误。

![在此处输入图像描述](../Images/fdc1c33ee38d862f7af0020e3cb0651c.png)

但是当我连接到集成服务和其他服务时，我可以使用 CHATHU-2 服务器实例登录到完整版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T06:40:29.250

Management Studio 是一个独立的应用程序，因此它声明 Express 并不重要。您是否在 SQL 之前安装过任何东西，例如 SharePoint 或 Visual Studio？如果你这样做了，这就是你看到快递的原因。SharePoint 和 Visual Studio 在安装时安装 SQL Express。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:35:29.143

看起来您只需从服务器名称文本框中删除 \SQLEXPRESS 或单击它的下拉箭头，浏览服务器并查看其中的内容。

您还可以运行 services.msc，查找 SQL Server 服务并查看其中的内容，命名实例通常位于括号中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T05:00:26.060

停止你的 SQL Server Instance.SQL Server(SQLEXPRESS) & Start SQL Server(MSSQLSERVER) go there services.msc

# c# - 如何在datagridview中停止闪烁

> ID：11069397
> 
> 赞同：3
> 
> 时间：2012-06-17T06:36:33.207
> 
> 标签：c#, winforms, datagridview

我正在使用 datagridview 通过像这样绑定数据库来显示来自访问数据库的数据

```
 DataGridView.DataSource = dTable; 
```

当我通过在datagridview中滚动来向下移动光标时，当它得到更新时，滚动条会自动上升，并且行中的第一个单元格会突出显示。gridview 中有 300 多行。如果我想查看最后一个脚本，它会自动占用我，并且 datagridview 每 5 秒更新一次。

我不希望滚动条上升我希望我的滚动条在更新后也放在我之前放置的位置。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T06:56:16.283

在[此讨论](http://social.msdn.microsoft.com/Forums/en/winforms/thread/bc0b945e-079e-49cc-9f38-690c48131775)中，您会发现几个选项：

1.  在刷新 DataTable 的函数中，就在刷新之前，获取当前行 (id) 并将其存储在变量中。刷新后找到该行并滚动到它。

2.  您还可以在更新之前存储 VerticalScrollingOffset（和 Horizo​​ntalScrollingOffset），但是当在当前行上方添加或删除行时，这会搞砸。

# c - 如何在 C 中捕获长整数溢出？

> ID：11069400
> 
> 赞同：1
> 
> 时间：2012-06-17T06:37:10.500
> 
> 标签：c, long-integer, integer-overflow

> **可能重复：**
> [在 C/C++ 中检测整数溢出的最佳方法](https://stackoverflow.com/questions/199333/best-way-to-detect-integer-overflow-in-c-c)

我是 C 编程的初学者，我编写了一个程序来`long int`一次读取字节并在空格末尾打印出来。我需要将其配置为使用库中的和捕获溢出/下`LONG_MAX`溢。我不允许投射任何高于 的东西，而且它也应该检测负数的溢出。这是我的代码：`LONG_MIN``limits.h``long int`

```
int main(void)
{
    int c;
    int state;
    long int num = 0;

    while((c = getchar()) != EOF)
    {
        switch(state)
        {
            case 0:
            {
                if (isspace(c))
                {
                    //do nothing;
                }
                else
                {
                    state = 1;
                    num = 10 * num + (c - '0');
                }
                break;
            }

            case 1:
            {
                if (isspace(c))
                {
                    printf("%ld\n", num);
                    num = 0;
                    state = 0;
                    break;
                }

                num = 10 * num + (c - '0');

                if (num < LONG_MIN || num > LONG_MAX)
                {
                    printf("overflow\n");
                    break;
                }
                break;
            }
        }
    }
    return 0;
} 
```

`if (num < LONG_MIN || num > LONG_MAX)`似乎不起作用的部分，因为例如，如果输入为`LONG_MAX`+1，则在下溢`LONG_MIN`时它会溢出并变为，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T06:48:52.323

检测溢出的最简单方法是检查以确保“num”总是比以前大。

```
oldnum = num;
num = 10 * num + (c - '0');

if (num < oldnum)
{
    // overflow!
    printf("overflow\n");
} 
```

有一些边缘条件需要考虑，但无论 num 是带符号的、无符号的还是它的宽度是什么，以上都应该主要工作。

# ipad - 在主屏幕中启动 xpages 应用程序

> ID：11069402
> 
> 赞同：0
> 
> 时间：2012-06-17T06:37:49.137
> 
> 标签：ipad, lotus-notes, xpages, lotus, lotus-domino

我正在尝试从电子邮件（Lotus traveller）启动 XPage（web）移动应用程序。当我在电子邮件正文中使用简单的 HREF（使用流和 MIME）时，xpage(web) 移动应用程序会在 ipad 上的新窗口中打开（我相信这是 Ipad 预期的）并显示地址栏。从主屏幕打开时相同的页面不显示地址栏。我在我的移动页面上使用了以下功能

```
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="viewport" content="width=device-width"> 
```

经过同一个论坛后，我尝试使用“location.assign”的提示在 Lotus traveler 的同一窗口上启动 xpage 移动应用程序，即“href="javascript:window.location.assign('http://ajgahsdgasdh.xsp? openpage')"。现在的问题是从 Lotus traveller 访问时，javascript 不会从电子邮件正文触发，但是从 Lotus notes 客户端访问时同样有效。我什至尝试使用电子邮件正文上的按钮和结果使用简单的 javascript 警报和上面一样。这是 Lotus traveler 不支持 javascript 的已知问题吗？（请注意简单的 javascript 警报在 Xpage 移动应用程序上工作）。Lotus traveler 是原生应用程序、Web 应用程序还是混合应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:56:05.620

Lotus Traveler 在用于 iOS 设备时使用 Microsoft ActiveSync 协议 - 并且使用本机 iOS 邮件应用程序访问邮件。因此，您可能遇到的任何功能和限制都不是来自 Traveler 产品，而是来自 natiev iOS 邮件应用程序。

关于您在全屏网络应用程序上的初始问题：全屏模式（如您所见）仅在用户从主屏幕启动网络应用程序时才有效 - 而不是直接在 Safari 中启动时。

当 Web 应用程序在 Safari 中启动时，您可以使用 Javascript 将内容向下移动，以便将地址栏移出视线（但这在 iPad 上不起作用）。看看这个主题的博客文章：http: [//mobile.tutsplus.com/tutorials/mobile-web-apps/remove-address-bar/](http://mobile.tutsplus.com/tutorials/mobile-web-apps/remove-address-bar/)

# javascript - 嵌套在按钮中的元素的单击事件

> ID：11069410
> 
> 赞同：15
> 
> 时间：2012-06-17T06:40:07.603
> 
> 标签：javascript, html

这是问题的一个简单示例：

```
<body>
  <button id="parent"  onclick="alert('parent')">
      <span id="child" onclick="alert('child')">Authenticate</span>
  </button>
</body> 
```

在 Chrome 中，这会提醒“孩子”然后是“父母”，但在 IE/FF 中，我们只会得到“父母”。

显然，这可以通过多种方式解决（将按钮更改为 div、删除跨度等），但我想知道是否有办法在不更改 HTML 的情况下使这项工作（即警报“孩子”）。

谢谢！

PS：尝试过 JQuery 并且具有相同的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-02T15:14:25.147

正如@muistooshort 所说，在其他点击事件中处理点击事件似乎不自然。我也认为你必须重新考虑你的设计。

话虽如此，您可以在主容器上处理一次单击事件，然后检查哪个元素是单击源

这将是要走的路，考虑到您的用例，imo：

```
$('your-button-container').click(function(event){
    console.log(event.originalEvent.srcElement);
}); 
```

进行必要的检查`event.originalEvent.srcElement`并采取相应措施。

**编辑：** 不使用 JQuery，它会是这样的：

```
yourButtonContainer.addEventListener(function(event){
    console.log(event.srcElement);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T21:08:48.953

正如一些用户所提到的，这样嵌套按钮并不是一个好习惯，但出于教育目的，我会这样做：

HTML：

```
<body>
  <button id="parent" onclick="callFn(event, 'parent')">
    <span id="child" onclick="callFn(event, 'child')">Authenticate</span>
  </button>
</body> 
```

JS：

```
window.callFn = function(evt, type) {
  if (type === 'child') {
    alert(type);
  }
} 
```

JS 小提琴： [https ://jsfiddle.net/4vo3arpf/4/](https://jsfiddle.net/4vo3arpf/4/)

# ruby-on-rails - Carrierwave 处理的图像未上传到 S3

> ID：11069411
> 
> 赞同：0
> 
> 时间：2012-06-17T06:40:08.680
> 
> 标签：ruby-on-rails, amazon-s3, carrierwave

我有 Carrierwave 将图像上传到 S3 存储桶。但是，如果我使用 RMagick 处理缩略图，文件只会保存到本地的公共 tmp。注释掉 process 方法会在 S3 上创建原始文件和 thumb 文件（当然 thumb 没有被处理）。不确定为什么在写入本地 tmp 后处理立即停止。下面的代码：

```
class FileUploader < CarrierWave::Uploader::Base
  include CarrierWave::RMagick
  storage :fog

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  # Create different versions of your uploaded files:
  version :thumb do
    process :resize_to_fit => [32, 32]
  end
end 
```

Rails 3.2.5 Fog 1.3.1 Rmagick 2.13.1 Carrierwave 0.6.2 Carrierwave-mongoid 0.2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:37:13.167

我建议你使用 minimagick：

```
class FileUploader < CarrierWave::Uploader::Base
  include CarrierWave::MiniMagick
end 
```

对于拇指版本，我建议您使用`resize_to_fill`类似的方法：

```
version :thumb do
   process :resize_to_fill => [32, 32]
   process :convert => :png
 end 
```

您还可以为每个图像使用唯一的令牌：

```
def filename
     @name ||= "#{secure_token}.#{file.extension}" if original_filename.present?
   end

  protected
  def secure_token
    var = :"@#{mounted_as}_secure_token"
    model.instance_variable_get(var) or model.instance_variable_set(var, SecureRandom.uuid)
  end 
```

您必须确保您与存储桶的连接在机密文件中是正确的，`config/initializers/fog.rb`例如：

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',
    :aws_access_key_id      => 'your_key',
    :aws_secret_access_key  => 'your_secret_key',
    :region                 => 'us-east-1'
  }

  config.fog_directory = 'your_bucket_here'
  config.fog_public = true
  config.fog_attributes = {'Cache-Control' => 'max-age=315576000'} 
end 
```

# node.js - NodeJS + MongoDB: find() where { 'value' : < 5 AND >1} - 怎么样？

> ID：11069417
> 
> 赞同：3
> 
> 时间：2012-06-17T06:40:42.160
> 
> 标签：node.js, mongodb, database

我有一个集合“公司”。此集合中的每个对象都有“lastcall”-param。它是一个简单的字符串，包含上次调用的 UNIX 时间。我想找到所有 lastcall 高于**a**且低于**b**的公司。我怎样才能做到这一点？这是我用来访问公司的代码：

```
//query to lastcall
collection.find( {'lastcall': a} , function (err, companies) {
    companies.each(function (err, company) {
        //do something with every object...
    });
}); 
```

此代码将返回'lastcall' **=** A 的所有公司，但我需要所有A <'lastcall' < B 的公司。我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T06:46:11.170

[高级查询](http://www.mongodb.org/display/DOCS/Advanced+Queries)的文档中有一个示例正是您想要的：

```
db.collection.find({ "field" : { $gt: value1, $lt: value2 } } );    // value1 < field < value 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T06:46:00.553

...条件运算符 <、<=、>、>= 和 != 不能直接使用，因为查询对象格式不支持它，但同样可以使用它们的别名 $lt、$lte、$ gt、$gte 和 $ne。当字段值需要匹配条件时，必须将该值包装到单独的对象中。

```
{"fieldname":{$gte:100}} 
```

# javascript - 页面哈希和后退按钮问题 phonegap+Jquery

> ID：11069421
> 
> 赞同：1
> 
> 时间：2012-06-17T06:41:06.740
> 
> 标签：javascript, jquery, jquery-mobile, cordova

我是 phonegap 编程的新手，希望有人可以在这里帮助我：

使用科尔多瓦 1.7.0、Jquery 1.7.2 和 JQM 1.1.0。该应用程序正在 Android 上进行测试。

我正在尝试为该应用程序创建一个启动页面。

```
<body>    
    <div data-role="page" id="page_loading">
        <div data-role="content">
            <h1 >
                <b>welcome</b>
            </h1>
        </div>
    </div>

    <div data-role="page" id="page_1">
    </div>

    <div data-role="page" id="page_2">
    </div>    
</body> 
```

我在函数`$.mobile.changePage($('page_1'), { changeHash: false});`的末尾放了一个。`onDeviceReady()`当应用程序启动时，它立即显示加载页面，加载完成后，它移动到第一页。

在第一页，当我按下 page_1 上的后退按钮时，它将退出应用程序。这就是我要的。

然后我再次使用 mobile.changePage 转到第 2 页。如果我仍然使用`changeHash: false`，后退按钮将再次退出应用程序。如果我使用`changeHash: true`，后退按钮不会返回 page_1，而是会转到加载页面。

如果我`changeHash: true`在从加载到 page1 的过渡中使用，那么 page2 上的后退按钮将调出第一页，但在第一页上它将调出加载页面而不是退出应用程序。

我的问题是：如何让后退按钮在 page2、page3 等上返回历史记录，但在 page1 上退出应用程序？

我的猜测是我必须以某种方式重建/清除哈希。谁能告诉我怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:40:29.443

从jquery-1.7.1升级到jquery-1.7.2的时候遇到了麻烦，所以赶紧切换回去。JQM 网站说它目前支持 jQuery 1.6.4 和 1.7.1。你可以尝试降级到 1.7.1 看看它是否有效？

（使用 cordova 1.8.0 和 JQM-bleeding edge）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T12:07:55.833

我遇到了同样的问题并使用了解决方法：

页面布局：

```
<body>    
    <!-- page_1 before page_loading in source -->
    <div data-role="page" id="page_1">
    </div>
    <!-- page_loading will be shown first -->
    <div data-role="page" id="page_loading">
        <div data-role="content">
            <h1 >
                <b>welcome</b>
            </h1>
        </div>
    </div>
    <div data-role="page" id="page_2">
    </div>    
</body> 
```

jQuery：

```
function onBodyLoad()
{   
    //go to page_loading before deviceready without keeping it in browser history
    $.mobile.changePage('#page_loading', {reverse: false, changeHash: false});
    document.addEventListener("deviceready", onDeviceReady, false);
}

function onDeviceReady()
{   
    //your initialization code here...

    //now go to page_1 without keeping it in browser history since the actual first page was #page_1 already       
    $.mobile.changePage('#page_1', {reverse: false, changeHash: false});

    //your code here...
} 
```

这应该符合您的需求，请尝试一下...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-10T13:02:42.907

我知道这是一个非常古老的问题，但我刚刚遇到了这个问题，并认为我会添加我的解决方案：

我刚刚在启动页面中添加了一个“onPageBeforeShow”侦听器，并使用全局布尔值“splashDisplayed”来检测这是否是第一次显示启动屏幕。如果是，则将布尔值设置为 true，如果不是，则退出应用程序。

```
$(document).on("pagebeforeshow", "#splash", function () {
if(!splashDisplayed){
    splashDisplayed=true;
}else{
    navigator.app.exitApp();
}
}); 
```

# mysql - MySQL没有剩余空间怎么办？

> ID：11069422
> 
> 赞同：4
> 
> 时间：2012-06-17T06:41:08.353
> 
> 标签：mysql

出于好奇，假设您有一个充满用户信息的巨大 MySQL 数据库，现在它已满。您将如何在同一台服务器和另一台具有更多存储空间的服务器上运行相同的 MySQL 数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T09:40:00.443

如果问题只是存储空间的问题，那么最简单的解决方案是将数据库转移到另一个容量更大的系统。

另一种解决方案可能是将磁盘添加到同一系统，并且

1.  (InnoDB)[将表空间扩展](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_data_file_path)到该驱动器（InnoDB 甚至允许将[每个表存储在单独的文件中](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_file_per_table)）
2.  (MyIsam) 将一些 *.MYD 和/或 *.MYI 文件移动到此驱动器

上述文件可以移动到不同的硬盘驱动器（它们可能需要从其原始位置进行符号链接）。

但是，真正可广泛扩展的解决方案是数据库集群，例如[MySQL 集群](http://www.mysql.com/products/cluster/features.html)。

您可能还想关注[这个问题](https://stackoverflow.com/questions/11068834/mysql-server-runs-out-of-disk-space)，其中这个问题目前正在真实环境中得到解决。

* * *

[编辑] 详细说明：

以下信息仅在 Linux 服务器上有效。在Windows下*可能*是可能的，但我不知道。无论如何，在 Windows 上运行 MySQL 数据库在大规模环境中可能不是一个好主意。

这三个选项依赖于相同的原则：

*   将另一个磁盘挂载到文件系统中
*   将一些现有的 MySQL 数据文件移动到这个新硬盘，即到新目录，和/或指示 MySQL 在这个新目录中创建新的数据文件
*   如果需要，创建一个指向新位置的符号链接，以欺骗 MySQL 认为文件没有移动

## 1.[扩展InnoDB表空间](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_data_file_path)

InnoDB 引擎允许将表空间分布在许多文件中。调整 (in `my.cnf`) 的配置选项是[`innodb_data_file_path`](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_data_file_path). 例子：

```
innodb_data_file_path=/mnt/hard_disk1/ibdata:50G;/mnt/hard_disk2/ibdata:200G; 
```

... 指示 MySQL 创建`/mnt/hard_disk1/ibdata1`一个 50GB 文件，以及一个 200GB 文件`/mnt/hard_disk2/ibdata2`。

我个人不喜欢这个特性，因为 MySQL 在第一个文件满之前根本不会使用第二个文件，这不允许进行微调。好的一面是您只需要编辑配置文件并重新启动服务器。而已。

## 2.[将每个 InnoDb 表存储在单独的文件中](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_file_per_table)

[`innodb_file_per_table`](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_file_per_table)顾名思义，该选项指示 MySQL 为每个*新*表创建一个单独的文件。“*新表*”表示更改设置后现有表不会受到影响。为了避免这种情况，可以转储、删除和重新创建要从共享表空间中“提取”的表。

这些文件是`[datadir]/[database]/[table].ibd`，其中`[datadir]`由[`datadir`](http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_datadir)选项定义，并且`[database]`是数据库的名称，并且`[table]`是表名。这些文件可以像 MyISAM 表一样移动（参见下一个选项）。

## 3\. 移动 MyISAM 文件

对于每个 MyISAM 表，MySQL 创建三个名为 的文件`[datadir]/[database]/[table].[type]`，其中`[datadir]`由[`datadir`](http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_datadir)选项定义，`[database]`是数据库的名称，`[table]`是表名。

`[type]`将`frm`用于表描述（结构）、`MYD`数据、`MYI`索引。

现在，关于选项 2\. 和 3.，您注意到所有文件大致位于同一目录中，或者至少共享一个父目录。要将它们实际存储在新硬盘上，有两种选择。

1）移动整个数据库：

*   停止服务器
*   将`database`目录重命名为您喜欢的另一个名称，例如`backup`
*   将硬盘挂载为[`datadir`](http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_datadir)`/databse`
*   将内容`backup`移入[`datadir`](http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_datadir)`/databse`
*   重启服务器

MySQL 恢复，好像什么都没发生过一样。

2) 移动单个表格：

*   将新磁盘挂载到您喜欢的任何位置
*   停止服务器
*   将每个文件单独移动到新硬盘
*   在其原始位置创建一个符号链接，与原始文件同名
*   重启服务器

MySQL 在幸福的无知中恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T07:09:58.340

如我所见，最好的解决方案是将数据库移动到容量更大的新服务器并在那里恢复当前数据库。当前服务器缺乏磁盘空间和内存等关键资源，因此严重影响了数据库的性能。

1.  在新服务器上安装mysql
2.  从现有数据库中获取数据库表结构（就 CREATE TABLE xxx 而言）（这可以很容易地使用我的 sql 数据库管理工具，例如 SQLYog）
3.  在新服务器中运行新创建数据库的这个 DDL 脚本
4.  使用现有数据库创建 .dat 文件
5.  将其复制到新服务器并针对新数据库运行该 .dat 文件

进一步阅读

1.  [http://www.devshed.com/c/a/MySQL/Backing-up-and-restoreing-your-MySQL-Database/](http://www.devshed.com/c/a/MySQL/Backing-up-and-restoring-your-MySQL-Database/)

迁移后，它需要为使用相同数据库的任何引用应用程序更改适用的数据源文件。

# python - 使用 gletools 和教程代码时出现 GL_TEXTURE_2D_ARRAY 错误

> ID：11069427
> 
> 赞同：1
> 
> 时间：2012-06-17T06:41:53.203
> 
> 标签：python, opengl, pyglet

我正在尝试遵循与此处问题作者相同的教程[。](https://stackoverflow.com/questions/4618892/basic-opengl-vertex-buffers-and-pyglet) 不幸的是，当我尝试在该页面底部运行示例代码时，我收到以下错误：

```
Traceback (most recent call last):
  File "C:\Users\Matt\workspace\pygletTest\main.py", line 9, in <module>
    from gletools import ShaderProgram, FragmentShader, VertexShader
  File "build\bdist.win32\egg\gletools\__init__.py", line 9, in <module>
    # See the README file for information on usage and redistribution.
  File "build\bdist.win32\egg\gletools\texture.py", line 454, in <module>
  File "build\bdist.win32\egg\gletools\texture.py", line 455, in ArrayTexture
NameError: name 'GL_TEXTURE_2D_ARRAY' is not defined 
```

我在 Windows Vista 上使用 Python 2.6 和 Eclipse。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:38:06.087

您可能使用的 pyglet 版本与编写 gletools 的人不同。不幸的是，他对此有点不具体。与 OpenGL 常量的绑定是错误的。

转到 pyglet\gl 文件夹，例如 C:\Python\Lib\site-packages\pyglet\gl 并找到 glext_nv.py。该文件包含所有 OpenGL 常量的映射。搜索 GL_TEXTURE_2D_ARRAY（可能命名为 GL_TEXTURE_2D_ARRAY_EXT 或其他名称）。在我的系统上，它是

```
GL_TEXTURE_2D_ARRAY_EXT = 35866     # GL/glext.h:3183 
```

例如编辑 texture.py 以使用定义后的整数而不是关键字本身。例如

```
#target = GL_TEXTURE_2D_ARRAY
target = 35866 
```

或者，您可以更新绑定的名称，但由于某种原因，这对我不起作用。您可能需要进行一些类似的更改。

# java - 新的数组列表 () 在 Java 中失败

> ID：11069429
> 
> 赞同：26
> 
> 时间：2012-06-17T06:42:16.903
> 
> 标签：java, list, generics, arraylist

我有以下代码：

```
List<int> intList = new ArrayList<int>();
for (int index = 0; index < ints.length; index++)
{
    intList.add(ints[index]);
} 
```

它给了我一个错误...

```
Syntax error on token "int", Dimensions expected after this token 
```

错误发生在以 开头的行上`List`。有人可以解释为什么我会收到错误吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-17T06:46:48.193

Java 中的*泛型*[不适](https://stackoverflow.com/questions/2721546/why-dont-generics-support-primitive-types)用于. 您可能应该使用[包装器类型](http://docs.oracle.com/javase/tutorial/java/data/numberclasses.html)，例如：*`int``Integer`*

 *```
List<Integer> ints = ... 
```

而且，要访问 a [`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)，您需要使用`ints.get(index)`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-17T06:46:15.553

您只能在该`<>`部分中使用 Object 类型，而您正在尝试使用原始类型。试试这个...

```
List<Integer> intList = new ArrayList<Integer>(); 
```

然后，您需要使用`intList.get(index)`and访问这些值`intList.set(index,value)`（以及`intList.add(value)`您尝试执行的操作）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-17T06:44:08.300

您应该使用 Integer 而不是 int 因为列表需要对象而不是原始类型。但是您仍然可以将 int 类型的元素添加到您的 Integer 列表中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-27T01:24:08.053

您可以使用[Eclipse Collections](http://www.eclipse.org/collections/)中可用的原始集合。Eclipse Collections对所有原语都有`List`、`Set`和。原始集合中的元素作为原始元素维护，并且不会发生装箱。`Bag``Map`

您可以像这样初始化[IntList](http://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/api/list/primitive/IntList.html)：

```
MutableIntList intList = IntLists.mutable.empty(); 
```

注意：我是 Eclipse Collections 的贡献者。*

# asp.net-mvc-3 - 无法将数据保存到asp.net mvc3中的数据库

> ID：11069431
> 
> 赞同：0
> 
> 时间：2012-06-17T06:43:02.550
> 
> 标签：asp.net-mvc-3, entity-framework, linq-to-entities

我想在用户注册后将数据保存到我的数据库中。我在 Account 控制器的 Registerfunctin 中编写了代码。代码是：

```
[HttpPost]
        public ActionResult Register(RegisterModel model)
        {
            if (ModelState.IsValid)
            {
                // Attempt to register the user
                MembershipCreateStatus createStatus;
                Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus);

                if (createStatus == MembershipCreateStatus.Success)
                {
                    FormsAuthentication.SetAuthCookie(model.UserName, false /* createPersistentCookie */);
                    ///My code for saving in dtabase
                            Recommend ad = new Recommend();      
                            ad.estate = 1;
                            ad.industry = 1;
                            storedb.AddToRecommends(ad);         
                            storedb.SaveChanges();
                    ///
                    return RedirectToAction("Index", "Home");
                }
                else
                {
                    ModelState.AddModelError("", ErrorCodeToString(createStatus));
                }
            }

            // If we got this far, something failed, redisplay form
            return View(model);
        } 
```

推荐的是我想在房地产和行业列中存储 1 的表的名称。我用这种方式在另一个控制器中保存之前，一切都很好，但现在我得到了这个异常：

![例外](../Images/8eb4b085a3863fb2f8b33cfd7f554ff0.png)

谁能告诉我有什么问题？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T10:51:55.273

异常很清楚问题是什么： EntitySet`Recommend`和类型`Recommend`由[**定义查询定义**](http://msdn.microsoft.com/en-us/library/bb738450.aspx)。这意味着它是在 EDMX 文件的存储模式中指定的 SQL 查询的结果。这类似于从数据库映射视图，即它是只读的，不能更新它，不能向集合中插入数据，也不能从中删除数据。

虽然可以[**将存储过程映射**](http://msdn.microsoft.com/en-us/library/cc716711.aspx)到定义查询定义的实体的插入、更新、删除操作，但异常也表示没有指定任何过程来支持插入操作。

你在谈论一个`Recommend` *table*，所以问题是为什么这个`Recommend`集合没有直接映射到这个 table。据我所知，定义查询必须由开发人员手动编写并手动放入 EDMX 文件中。“从数据库更新模型”不会创建定义查询。谁写了这个查询？您是如何创建 EDMX 文件的？数据库优先或模型优先或手写 XML 或...？

**编辑**

我上面回答的最后一段是不正确的。开发人员*可能*已经手动编写了定义查询，但是当您使用 Database-First 方法（我假设）时，您的数据库中的表更有*可能*没有主键。在这种情况下[，这里的答案](https://stackoverflow.com/a/1589406/270591)适用：

> 好吧，当遇到没有 PrimaryKey 的表时，它会被视为视图。
> 
> 视图显示在**StorageModel\EntitySet[n]\DefiningQuery**元素中的 EDMX 文件（在 XML 编辑器中打开以查看）中。

解决方案：如果您的`Recommend`表有主键，请检查数据库。如果它没有密钥，请添加一个。

# javascript - 尝试使用 jQuery 操作 CSS 样式

> ID：11069432
> 
> 赞同：0
> 
> 时间：2012-06-17T06:43:08.383
> 
> 标签：javascript, jquery, css

我在页面的一侧有一个导航栏，并希望根据 GET 参数突出显示几个条目之一。

经过一点阅读后，我找到了这个解决方案，但它似乎不起作用：

在 .html 中：

```
<script type="text/javascript">
    $(document).ready(highlight_me());
</script> 
```

JS函数：

```
function highlight_me() {
    // ensure all links have class 'regular'
    document.links.className = 'regular';
    // determine which link to highlight
    var id = 'home';
        switch (querystring('view')) {
            case "set":
                id = 'settings';
                break;
            case "mc":
                id = 'messages';
                break;
            default:
                id = 'home';
        }
    // highlight link
    document.getElementById(id).className = 'highlight';
}

function querystring(key) {
    // extract GET-value for key
    var re = new RegExp('(?:\\?|&)' + key + '=(.*?)(?=&|$)', 'gi');
    var r = [], m;
    while ((m = re.exec(document.location.search)) != null) r[r.length] = m[1];
    return r;
} 
```

CSS类：

```
a, a.regular, a:visited {
    color: #f0ce96;
}

a:active, a:hover, a.highlight {
    text-decoration: underline;
    color: #ffeebb;
} 
```

我会感谢一个提示，指出我哪里出错了，在这里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T06:47:58.880

当您调用 highlight_me 函数时，您没有传递“id”参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:02:57.220

`id`您需要作为参数的任何原因？您没有在函数内部的任何地方使用它。一个电话不`querystring`应该就够了吗？在这种情况下，你不需要做这`if(id.length)`部分。默认设置`id`为`'home'`，然后有switch语句相应地修改变量。

这就是我所说的：

```
function highlight_me() {
// ensure all links have class 'regular'
document.links.className = 'regular';
// Set id to home by default
var id = 'home';
    switch (querystring('view')) {
        case "set":
            id = 'settings';
            break;
        case "mc":
            id = 'messages';
            break;
        default:
            id = 'home';
    }
// highlight link
document.getElementById(id).className = 'highlight';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T06:53:02.460

函数`$(highlight_me());`需要一个`id`在您调用此函数时不提供的参数。并将您的函数放入`document.ready`.

```
 $(document).ready(function() {
   // put all your function here.
 }); 
```

# python - 同时提供代码和数据库

> ID：11069433
> 
> 赞同：1
> 
> 时间：2012-06-17T06:43:24.700
> 
> 标签：python, database, continuous-deployment

我使用fabric将我的代码的新版本上传到服务器，然后它运行几个任务以使其服务于新版本而不是旧版本。

在这些任务中还有一个同步数据库，但这意味着有一个窗口，其中我有带有旧数据库表的新代码版本（或带有新同步数据库的旧代码版本）。

**问题：** 我是否需要手动复制数据库，与副本同步，然后一次性替换旧代码版本和原始数据库？

由于这似乎是一个非常普遍的问题，我认为应该已经有工具或特定的方法来解决这个问题。有人知道吗？

（我的另一个担心是部署期间的某些事情可能会出错，我想回退到以前的状态，而不会出现未与代码同步的损坏数据库）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T03:47:31.897

当您的部署包含数据库模式迁移时，很难实现零停机时间。例如，etsy.com 的人们使用索引的、分片的主-主对、自定义的分片感知 ORM，他们不让数据库生成主键/时间戳等，也不在数据库中强制执行外键。 [http://codeascraft.etsy.com/2012/04/20/two-sides-for-salvation/](http://codeascraft.etsy.com/2012/04/20/two-sides-for-salvation/)

如果您可以容忍一些计划的部署停机时间，甚至 15 分钟，这会容易得多。（假设您已经使用[dbdeploy](http://dbdeploy.com)等工具编写了数据库架构升级脚本）。

# python - 使用 beautifulsoup 提取带有定义文本的 href

> ID：11069435
> 
> 赞同：0
> 
> 时间：2012-06-17T06:44:02.670
> 
> 标签：python, beautifulsoup

```
<form action="/2811457/follow?gsid=3_5bce9b871484d3af90c89f37" method="post">
<div>
<a href="/2811457/follow?page=2&amp;gsid=3_5bce9b871484d3af90c89f37">next_page</a>
&nbsp;<input name="mp" type="hidden" value="3" />
<input type="text" name="page" size="2" style='-wap-input-format: "*N"' />
<input type="submit" value="jump" />&nbsp;1/3
</div>
</form> 
```

我在 STO 上进行了搜索，很多人问如何在标签之间提取文本我想知道如何通过给出定义的文本来提取 href。

在上面的 html 文件中，我想通过给出“next_page”的文本来提取“/2811457/follow?page=2&gsid=3_5bce9b871484d3af90c89f37”。

我所做的是这样的：

```
 t = soup1.findAll(text=re.compile(r'next_page'))
  s = t.parent
  print s.nextSibling['href'] 
```

它返回无

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:31:30.140

两个小修正。使用*find*而不是*findAll*。不要调用*nextSibling ，而是使用**get*方法查找*href*属性：

 *```
>>> from BeautifulSoup import BeautifulSoup
>>> import re
>>> page = '''\
<form action="/2811457/follow?gsid=3_5bce9b871484d3af90c89f37" method="post">
<div>
<a href="/2811457/follow?page=2&amp;gsid=3_5bce9b871484d3af90c89f37">next_page</a>
&nbsp;<input name="mp" type="hidden" value="3" />
<input type="text" name="page" size="2" style='-wap-input-format: "*N"' />
<input type="submit" value="jump" />&nbsp;1/3
</div>
</form>
'''
>>> soup = BeautifulSoup(page)
>>> soup.find(text=re.compile(r'next_page')).parent.get('href')
u'/2811457/follow?page=2&gsid=3_5bce9b871484d3af90c89f37' 
```*

# iphone - 更改 UITabBarItem 中的字体

> ID：11069437
> 
> 赞同：38
> 
> 时间：2012-06-17T06:44:24.087
> 
> 标签：iphone, ios, xcode, uitabbarcontroller

嗨，我有这个代码，但它不起作用，我做错了什么？

```
- (void)viewDidLoad
{    
    [self.tabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:[UIFont fontWithName:@"AmericanTypewriter" size:20.0f], UITextAttributeFont, nil] forState:UIControlStateDisabled];
} 
```

顺便说一句，这不是我 viewDidLoad 中唯一的东西，但我只是想向你们展示我放它的地方。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-06-17T07:00:01.283

根据：[如何在 iOS 5 中更改 UITabBarItem 中文本的颜色](https://stackoverflow.com/questions/8412010/how-to-change-the-color-of-text-in-uitabbaritem-in-ios-5)

看起来解决方案可能会将消息发送到外观代理，而不是一项：

**（在 iOS 7.0+ 中已弃用）**

```
[[UITabBarItem appearance] setTitleTextAttributes:@{UITextAttributeFont: [UIFont fontWithName:@"AmericanTypewriter" size:20.0f]} forState:UIControlStateNormal]; 
```

**对于 iOS 7.0+ 使用：**

```
[[UITabBarItem appearance] setTitleTextAttributes:@{NSFontAttributeName: [UIFont fontWithName:@"AmericanTypewriter" size:20.0f]} forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-06-21T07:31:52.863

快速的方式，对于懒惰的人：

```
UITabBarItem.appearance().setTitleTextAttributes([NSFontAttributeName: UIFont.systemFontOfSize(10)], forState: .normal)
UITabBarItem.appearance().setTitleTextAttributes([NSFontAttributeName: UIFont.systemFontOfSize(10)], forState: .selected) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-11-29T06:54:02.420

**Swift 4.1 和自定义字体**

```
UITabBarItem.appearance().setTitleTextAttributes([NSAttributedString.Key.font: UIFont(name: "Montserrat-Medium", size: 11)], for: .normal)
UITabBarItem.appearance().setTitleTextAttributes([NSAttributedString.Key.font: UIFont(name: "Montserrat-Medium", size: 11)], for: .selected) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-10T13:48:15.200

斯威夫特 3

```
UITabBarItem.appearance().setTitleTextAttributes([NSFontAttributeName: UIFont(name: "OpenSans", size: 10)!], for: .normal) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-01T13:11:06.950

斯威夫特 4

```
UITabBarItem.appearance().setTitleTextAttributes([NSAttributedString.Key.font: UIFont.tabbar], for: .normal) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-30T09:37:56.243

如果我在 viewDidLoad() 中添加了代码，那么在选择标签栏时我永远无法更改字体。

这是一篇很棒的文章，它解释了如何更详细地做到这一点：[HolySwift 文章](https://holyswift.app/how-to-change-tab-bar-item-font-when-selected-in-swift)

简而言之，您需要在标签栏控制器中添加以下代码：

```
override var selectedIndex: Int { 
    didSet {
        guard let selectedViewController = viewControllers?[selectedIndex] else {
            return
        }
        selectedViewController.tabBarItem.setTitleTextAttributes([.font: UIFont.boldSystemFont(ofSize: 13)], for: .normal) 
    }
} 
```

还有这个：

```
override var selectedViewController: UIViewController? { 
    didSet {

        guard let viewControllers = viewControllers else {
            return
        }

        for viewController in viewControllers {
            if viewController == selectedViewController {
                viewController.tabBarItem.setTitleTextAttributes([.font: UIFont.boldSystemFont(ofSize: 13)], for: .normal)
            } else {
                viewController.tabBarItem.setTitleTextAttributes([.font: UIFont.systemFont(ofSize: 12)], for: .normal)
            }
        }
    }
} 
```

PS：这也适用于自定义字体。

# ios - iOS中两个纹理的非幂

> ID：11069441
> 
> 赞同：32
> 
> 时间：2012-06-17T06:45:09.163
> 
> 标签：ios, opengl-es

在我的 iOS 应用程序（针对 iPad）中，我想使用非二次幂（NPT）纹理。我的 GL_VERSION 查询返回“OpenGL ES 2.0 APPLE”。根据规范，它应该支持 NPT 纹理，但一个简单的测试表明我需要将纹理大小调整为 2^N 才能显示出来。

Apple 不支持完整的 ES 2.0 规范吗？我在哪里可以找到不支持的文档？

我正在使用 Xcode 4.3.2 和 iOS 5.1。

编辑：

仔细查看 ES 2.0.25 规范（第 3.8.2 节），可以发现 NPOT 工作需要满足一些条件。基本上，如果我使用下面的设置，我可以加载 NPOT 纹理：

```
// use linear filetring
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR); 
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
// clamp to edge
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

我应该关闭它还是回答我自己的问题？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-17T12:25:44.007

正如我在编辑中提到的，我找到了解决方案。ES 2.0 上的 NPOT 要求您使用线性过滤并钳制到边缘。此外，没有 mipmap。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-01T03:18:03.267

```
- (BOOL)isSupportNPOT {
//    GL_OES_texture_npot
//    GL_APPLE_texture_2D_limited_npot
//    GL_ARB_texture_non_power_of_two
    EAGLContext *context_ = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES1];
    [EAGLContext setCurrentContext:context_];
    NSArray *extensionNames = nil;
    NSString *extensionsString = [NSString stringWithCString:(const char *)glGetString(GL_EXTENSIONS) encoding:NSASCIIStringEncoding];
    extensionNames = [extensionsString componentsSeparatedByString:@" "];
    BOOL isSupport = [extensionNames containsObject:@"GL_APPLE_texture_2D_limited_npot"];
    [EAGLContext setCurrentContext:nil];
    NSLog(@"Apple Opengl support NPOT is %@", isSupport ? @"YES" : @"NO");
    return isSupport;
} 
```

# c# - 按钮图像更改

> ID：11069442
> 
> 赞同：0
> 
> 时间：2012-06-17T06:45:22.610
> 
> 标签：c#, wpf

每次用户按下按钮时，我都想更改按钮的背景图像。我已将 ImageSource 设置为我的图片。当鼠标悬停在按钮上时，我的按钮不显示图像。如何设置图片以便即使鼠标悬停按钮仍然有图像？

```
 <Button x:Name="recordButton" Content="" HorizontalAlignment="Left" Height="50" Margin="60,45,0,0" VerticalAlignment="Top" Width="50" Click="recordButton_Click">
        <Button.Background>
            <ImageBrush ImageSource="play.png"/>
        </Button.Background>
    </Button> 
```

还有一个问题。这两张图怎么改？它们的名称是“play.png”和“stop.png”，都位于资源中。

```
 private bool recordStarted = false;

    private void recordButton_Click(object sender, RoutedEventArgs e)
    {
        recordStarted = !recordStarted;

        if(recordStarted)
        {
            ImageBrush brush1 = new ImageBrush();
            BitmapImage image = Properties.Resources.stop;
            brush1.ImageSource = image;
            recordButton.Background = brush1;

        }
    } 
```

我已经尝试过了，但是 VS 找不到`BitmapImage image = Properties.Resources.stop;` 帮助，拜托！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T06:49:11.283

我建议不要将背景设置为图像，而是将内容设置为图像

```
<Button x:Name="recordButton" HorizontalAlignment="Left" Height="50" Margin="60,45,0,0" VerticalAlignment="Top" Width="50" Click="recordButton_Click">
    <Image Source="play.png"/>
</Button> 
```

如果要更改图像，可以在文本中执行此操作，最简单的方法是使用编译为资源的图像而不是资源文件中的图像

```
(recordButton.Content as Image).Source = new BitmapImage(new Uri("Images/stop.png", UriKind.Relative)); 
```

如果您想使用资源文件，请参阅此[SO 帖子](https://stackoverflow.com/questions/94456/load-a-wpf-bitmapimage-from-a-system-drawing-bitmap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T07:11:02.540

有几种方法可以改变图片：

1.  重新定义按钮控件模板并使用[VisualStateManager](http://msdn.microsoft.com/en-us/library/system.windows.visualstatemanager.aspx)。

2.  重新定义控件模板并使用[Trigger](http://msdn.microsoft.com/en-us/library/system.windows.trigger.aspx)。

3.  您可以尝试将按钮的内容绑定到它的`MouseOver`属性：鼠标悬停时隐藏一个图像并显示另一个图像。

# jquery - Codeigniter ion auth 和 jquery 表单验证

> ID：11069445
> 
> 赞同：0
> 
> 时间：2012-06-17T06:45:58.727
> 
> 标签：jquery, validation, codeigniter

我只是想让我的第一个 jquery ajax 登录，而且我是 jquery 的初学者。

我的问题是我真的不知道如何返回表单验证错误。

这是我的控制器。

```
 function login()
   {

        $this->form_validation->set_rules('email', 'Email', 'reqired|valid_email|callback_check_name');
        $this->form_validation->set_rules('password', 'Passsword', 'reqired|callback_check_pass');

        if($this->form_validation->run() !== FALSE){

            $identity = $this->input->post('email');
            $password = $this->input->post('password');
            $remember = TRUE; // remember the user
            $this->ion_auth->login($identity, $password, $remember);
        }

   }

   function check_email()
   {
     if(!$this->ion_auth->email_check($this->input->post('email')))
     {
        $this->form_validation->set_message('check_email', 'Cant find this email in database');
        return false;
     }
   }

   function check_pass()
   {
    $query = $this->db->query(" SELECT password FROM mma_users WHERE password = '".sha1($this->input->post('password'))."' ");

   if($query->num_rows() == 0)
   {
        $this->form_validation->set_message('check_pass', 'Incorrect password given');
        return false;       
   }
   } 
```

login.js

```
$(function() {
        $('.top-login-form').on('submit', function(e){
        e.preventDefault();
        var loginInfo = $(this).serialize();

        $.ajax({
            type: "POST",
            url: "user/ajax/login",
            data: loginInfo,
            dataType: "json",
            success: function(data){
                alert('all ok');
            },
            error: function(data) {
                $('.login-info').slideDown();
                $('.login-info').html(data);
            }
        });

    });
}); 
```

和向下滑动 html

```
<div class="well login-info">
<div class="alert alert-error">
    <strong>Oh snap!</strong>
    <?php echo json_encode(validation_errors()); ?>
    <strong>Having troubles logging in?</strong>
        <div class="recover">
            <a href="#" class="btn btn-danger"><i class="icon-warning-sign icon-white"></i> Yes i think i forgot my password</a>
            <a href="#" class="btn btn-danger"><i class="icon-envelope icon-white"></i> Yes i think i forgot my email</a>
        </div>
</div> 
```

我面临以下问题，每次如果我插入错误的电子邮件或密码或正确的密码，我总是会收到成功消息（警报一切正常）。

我不想让任何人给我写这个表格，只要指出我缺少什么，如果它不是一个大的要求（基本的例子会很好）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:02:03.340

当控制器中发生任何错误时，将调用 error 方法。从您的控制器抛出一个错误，或者尝试这个

```
$(function() {
    $('.top-login-form').on('submit', function(e){
    e.preventDefault();
    var loginInfo = $(this).serialize();

      $.ajax({
        type: "POST",
        url: "user/ajax/login",
        data: loginInfo,
        dataType: "json",
        success: function(data){
           if(data){
             alert('all ok');
           }
           else{
             $('.login-info').slideDown();
             $('.login-info').html(data);
           }
        }
      });

    });
}); 
```

# c - 使用 gcc 编译时出错

> ID：11069451
> 
> 赞同：1
> 
> 时间：2012-06-17T06:46:18.173
> 
> 标签：c, gcc

以下代码在编译时会出现此错误，我无法理解为什么会这样。switch 语句的每一行都有这个错误。这段代码取自一个可以完美编译的代码，`g++`但我不明白 gcc 有什么问题。

```
void 
str_murmurhash3_x64_128 ( const void * key, const int len,
                           const uint32_t seed, void * out )
{
    const uint8_t * data = (const uint8_t*)key;
    const int nblocks = len / 16;

    uint64_t h1 = seed;
    uint64_t h2 = seed;

    uint64_t c1 = BIG_CONSTANT(0x87c37b91114253d5);
    uint64_t c2 = BIG_CONSTANT(0x4cf5ad432745937f);

    //----------
    // body

    const uint64_t * blocks = (const uint64_t *)(data);
    int i;
    for(i = 0; i < nblocks; i++)
    {
        uint64_t k1 = getblock(blocks,i*2+0);
        uint64_t k2 = getblock(blocks,i*2+1);

        k1 *= c1; k1  = ROTL64(k1,31); k1 *= c2; h1 ^= k1;

        h1 = ROTL64(h1,27); h1 += h2; h1 = h1*5+0x52dce729;

        k2 *= c2; k2  = ROTL64(k2,33); k2 *= c1; h2 ^= k2;

        h2 = ROTL64(h2,31); h2 += h1; h2 = h2*5+0x38495ab5;
    }

    //----------
    // tail

    const uint8_t * tail = (const uint8_t*)(data + nblocks*16);

    uint64_t k1 = 0;
    uint64_t k2 = 0;

    switch(len & 15)
    {
        case 15: k2 ^= uint64_t(tail[14]) << 48;
        case 14: k2 ^= uint64_t(tail[13]) << 40;
        case 13: k2 ^= uint64_t(tail[12]) << 32;
        case 12: k2 ^= uint64_t(tail[11]) << 24;
        case 11: k2 ^= uint64_t(tail[10]) << 16;
        case 10: k2 ^= uint64_t(tail[ 9]) << 8;
        case  9: k2 ^= uint64_t(tail[ 8]) << 0;
                k2 *= c2; k2  = ROTL64(k2,33); k2 *= c1; h2 ^= k2;

        case  8: k1 ^= uint64_t(tail[ 7]) << 56;
        case  7: k1 ^= uint64_t(tail[ 6]) << 48;
        case  6: k1 ^= uint64_t(tail[ 5]) << 40;
        case  5: k1 ^= uint64_t(tail[ 4]) << 32;
        case  4: k1 ^= uint64_t(tail[ 3]) << 24;
        case  3: k1 ^= uint64_t(tail[ 2]) << 16;
        case  2: k1 ^= uint64_t(tail[ 1]) << 8;
        case  1: k1 ^= uint64_t(tail[ 0]) << 0;
                k1 *= c1; k1  = ROTL64(k1,31); k1 *= c2; h1 ^= k1;
    };

    //----------
    // finalization

    h1 ^= len; h2 ^= len;

    h1 += h2;
    h2 += h1;

    h1 = fmix(h1);
    h2 = fmix(h2);

    h1 += h2;
    h2 += h1;

    ((uint64_t*)out)[0] = h1;
    ((uint64_t*)out)[1] = h2;
} 
```

以下是错误，错误中指定的所有行号都对应于 switch case 内的行。

```
murmurhash3.c:103:18: error: expected expression before ‘uint64_t’
murmurhash3.c:104:18: error: expected expression before ‘uint64_t’
murmurhash3.c:105:18: error: expected expression before ‘uint64_t’
murmurhash3.c:106:18: error: expected expression before ‘uint64_t’
murmurhash3.c:107:18: error: expected expression before ‘uint64_t’
murmurhash3.c:108:18: error: expected expression before ‘uint64_t’
murmurhash3.c:109:18: error: expected expression before ‘uint64_t’
murmurhash3.c:112:18: error: expected expression before ‘uint64_t’
murmurhash3.c:113:18: error: expected expression before ‘uint64_t’
murmurhash3.c:114:18: error: expected expression before ‘uint64_t’
murmurhash3.c:115:18: error: expected expression before ‘uint64_t’
murmurhash3.c:116:18: error: expected expression before ‘uint64_t’
murmurhash3.c:117:18: error: expected expression before ‘uint64_t’
murmurhash3.c:118:18: error: expected expression before ‘uint64_t’
murmurhash3.c:119:18: error: expected expression before ‘uint64_t’ 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T06:52:11.283

你有一个语法错误：

```
case 15: k2 ^= uint64_t(tail[14]) << 48; 
```

试试这个：

```
case 15: k2 ^= ((uint64_t)tail[14]) << 48; 
```

另外，你想要失败的行为吗？如果没有，请`break;`在每个`case`语句后添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T07:02:18.653

据我了解，您已使用 uint64_t 对无符号 64 位整数进行类型转换，因此请尝试`(uint64_t)tail[14], instead of uint64_t(tail[14])`

# appharbor - 配置变量和 Sequelizer

> ID：11069453
> 
> 赞同：1
> 
> 时间：2012-06-17T06:46:31.590
> 
> 标签：appharbor

我正在 AppHarbor 上创建 WCF 服务，并尝试利用我的 SQL 连接的配置变量。我密切关注[http://support.appharbor.com/kb/add-ons/using-sequelizer](http://support.appharbor.com/kb/add-ons/using-sequelizer)上的描述，但部署的 web.config 仍然包含与我的本地计算机相同的 connectionString 信息。

1.  我将 SQLSERVER_CONNECTION_STRING_ALIAS 设置为值“SQLSERVER_CONNECTION_STRING”
2.  我的 web.config 包含这些元素：

```
<connectionStrings>
  <add name="SQLSERVER_CONNECTION_STRING"
   connectionString="data source=.\SQLEXPRESS;  Initial Catalog=MyCoolName; Integrated Security=SSPI;"
   providerName="System.Data.SqlClient" />
</connectionStrings>
</configuration> 
```

1.  该解决方案在我的机器上正常工作。
2.  该解决方案部署到 AppHarbor 时不会出现任何错误或警告。
3.  我创建了一个显示连接字符串的 WCF 服务。它返回我的本地 SQLEXPRESS 连接字符串，而不是 AppHarbor 续集连接字符串。

部署解决方案后，为什么 AppHarbor 不会替换我的 web.config 中的 connectionString 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T11:22:53.740

如果你调用它`SQLSERVER_CONNECTION_STRING`（由于我们如何替换值的机制），调用它`shawnsappsconnectionstring`或类似的东西并将其指定为 Sequelizer 上的别名，它将不起作用。

我将在文档中添加注释。

# ruby-on-rails - Rails：AWS S3 + Paperclip：在 AssetsController#create 中获取 NoMethodError

> ID：11069457
> 
> 赞同：0
> 
> 时间：2012-06-17T06:47:15.430
> 
> 标签：ruby-on-rails, amazon-web-services, paperclip

我试图在我的 rails 应用程序中使用回形针设置 Amazon S3 存储。

我有一个属于“用户”的名为“资产”的模型

这是 Asset.rb 中的前几行

```
attr_accessible :user_id, :uploaded_file

belongs_to :user
#set up "uploaded_file" filed as attached_file(using paperclip)
has_attached_file :uploaded_file,
                :path => "assets/:id/:basename.:extension",
                :storage => :s3,
                :s3_credentials => "#{Rails.root}/config/amazon_s3.yml",
                :bucket => "XXXXX"

validates_attachment_size :uploaded_file, :less_than => 1000.megabytes
validates_attachment_presence :uploaded_file 
```

加载视图时出现错误：

```
NoMethodError in AssetsController#create
undefined method `symbolize_keys' for #<String:0x00000103939258> 
```

这是什么意思。它与“Asset.rb”中的这一行有关：s3_credentials =>“#{Rails.root}/config/amazon_s3.yml”，

我在网上查阅了一些关于如何弃用 Rails_ROOT 的讨论，所以我改用 Rails.root。仍然收到此错误。

我还将 AWS 密钥和秘密密码存储在 amazon_s3.yml 配置文件中。

这不是最佳实践，所以如果有人有任何其他想法，我很想听听。heroku 在他们的网站上说将变量作为环境变量，但是，我不确定如何在 heroku 上设置它，以及我在本地开发机器上的时候呢？那将如何运作？

我只是有点困惑，所以看看那里是否有完整的示例或教程。我能找到的只是不推荐使用的设置......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T13:12:03.843

它对我的工作方式（根据您的情况采用）：

```
#Asset.rb
has_attached_file :uploaded_file, {
  :path => "assets/:id/:basename.:extension"
}.merge(PAPERCLIP_STORAGE_OPTIONS)

#environments/development.rb and test.rb
PAPERCLIP_STORAGE_OPTIONS = {
  :storage => :s3,
  :bucket => "XXXX",
  :s3_credentials => YAML.load_file("#{Rails.root}/config/s3_credentials.yml")
}

#environments/production.rb
PAPERCLIP_STORAGE_OPTIONS = {
  :storage => :s3,
  :bucket => ENV['S3_BUCKET_NAME'],
  :s3_credentials => {
    :access_key_id => ENV['AWS_ACCESS_KEY_ID'],
    :secret_access_key => ENV['AWS_SECRET_ACCESS_KEY']
  }
}

#config/s3_credentials.yml
access_key_id: "XXXX"
secret_access_key: "XXXX" 
```

**请注意**

1.  添加`s3_credetials.yml`到`.gitignore`.
2.  请确保，您`ENV`在 heroku 中添加了变量：[https ://devcenter.heroku.com/articles/s3](https://devcenter.heroku.com/articles/s3)
3.  您可以将 的值更改`PAPERCLIP_STORAGE_OPTIONS`为`{ }`。然后文件将存储在本地（例如，用于测试）。

这个问题帮助我解决了问题：[如何根据当前的Rails环境设置回形针的存储机制？](https://stackoverflow.com/questions/2562249/how-can-i-set-paperclips-storage-mechanism-based-on-the-current-rails-environme)

题外话，但它可能有用：如果你想阅读文件 -`@asset.uploaded_file.s3_object.read`

# java - java : 在 Jframe 上显示 videoScreen

> ID：11069458
> 
> 赞同：0
> 
> 时间：2012-06-17T06:47:48.533
> 
> 标签：java, swing

我创建了一个简单`JFrame`的注册表单。现在我想`videoScreen`在该表单上显示以捕获图像。有人可以告诉我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T06:57:19.857

看看以下似乎适合您的问题

[显示网络摄像头在 Java](https://stackoverflow.com/questions/6821656/display-webcam-in-java)

问候

# c++ - 捕获处理程序未执行

> ID：11069465
> 
> 赞同：0
> 
> 时间：2012-06-17T06:48:56.537
> 
> 标签：c++, exception-handling, try-catch

我有以下代码。

```
#include "math.h" // for sqrt() function
#include <iostream>
using namespace std;

int main()
{
    cout << "Enter a number: ";
    double dX;
    cin >> dX;

    try // Look for exceptions that occur within try block and route to attached catch block(s)
    {
        // If the user entered a negative number, this is an error condition
        if (dX < 0.0)
            throw "Can not take sqrt of negative number"; // throw exception of type char*

        // Otherwise, print the answer
        cout << "The sqrt of " << dX << " is " << sqrt(dX) << endl;
    }
    catch (char* strException) // catch exceptions of type char*
    {
        cerr << "Error: " << strException << endl;
    }
} 
```

运行程序后，我输入一个负数并期望 catch 处理程序执行并输出`Error: Can not take sqrt of negative number`。相反，程序以以下消息终止

```
Enter a number : -9
terminate called after throwing an instance of 'char const*'
Aborted 
```

为什么我的异常没有在 catch 处理程序中捕获？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T06:54:26.123

您必须添加 const：

```
catch (char const * strException) // catch exceptions of type char* 
```

实际上，您正在 throwing `char const *`，但期望 mutable `char *`，它与这种方式不匹配（相反）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:04:51.097

你为什么还要扔和接绳子呢？

您应该抛出和捕获异常。

**永远记住遵循拇指规则**

每当您在代码中的引号中插入字符串时，它都会返回一个以 null 结尾的 const char

# algorithm - 最长公共前缀

> ID：11069467
> 
> 赞同：2
> 
> 时间：2012-06-17T06:49:15.833
> 
> 标签：algorithm, suffix-array

假设我构造了一个后缀数组，即一个整数数组，它按字典顺序给出字符串所有后缀的起始位置。

示例：对于字符串`str=abcabbca`，

后缀数组是：

```
suffixArray[] = [7 3 0 4 5 1 6 2] 
```

* * *

解释：

```
i   Suffix      LCP of str and str[i..]   Length of LCP
7   a           a                           1
3   abbca       ab                          2
0   abcabbca    abcabbca                    8
4   bbca        empty string                0
5   bca         empty string                0
1   bcabbca     empty string                0
6   ca          empty string                0
2   cabbca      empty string                0 
```

* * *

现在有了这个`suffixArray`构造，我想找到（字符串本身）和*其他每个后缀*之间**的最长公共前缀（LCP）的长度**。最**有效的方法**是什么？`str`

 **** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T07:26:12.563

根据您的评论，我假设我们可以访问 suffix 数组`SA`以及标准`LCP`数组，即一个数据结构，它告诉我们，在索引 i>0 处，suffix 的最长公共前缀的长度`SA[i]`及其字典前身`SA[i-1]`是。

我将使用字母 L 来指代我们要构建的特殊 LCP 数组，如问题中所述。我将使用字母 N 来表示输入字符串的长度`str`。

那么我们能做的就是：

1.  确定`str`后缀数组中的位置。我们可以通过`SA`线性筛选来找到条目`0`。（解释：`str`是`str`从位置 0 开始的后缀。因此，`0`必须作为后缀数组的条目出现。）

2.  假设我们找到的条目位于索引 k 处。然后我们可以设置`L[k]:=N`, we 因为`SA[k]`是字符串本身，并且有一个与自身相同的 N 个字符的前缀。

3.  然后我们可以设置`L[k-1]:=LCP[k]`，`L[k+1]:=LCP[k+1]`因为这就是标准 LCP 的定义方式。

4.  然后我们从 i:=k-2 倒退到 0 并设置

    ```
    L[i] := min(LCP[i+1],L[i+1]) 
    ```

    这是因为，在每次迭代 i 中，`LCP[i+1]`告诉我们相邻后缀`SA[i]`和的最长公共前缀`SA[i+1]`，并`L[i+1]`告诉我们先前处理的后缀`SA[i+1]`和输入字符串的最长公共前缀`str`。`L[i]`必须是这两者中的最小值，因为`L[i]`表示前缀`SA[i]`与 的共同`str`长度，并且不能长于与 共同的前缀`SA[i+1]`，否则它在后缀数组中的位置会更接近 k。

5.  我们还从 i:=k+2 向前计数到 N 并设置

    ```
    L[i] := min(LCP[i],L[i-1]) 
    ```

    基于相同的推理。

然后所有的 N 个值`L`都已设置完毕，假设随机访问数组和整数比较分别为 O(1)，则花费的时间不超过 O(N)。

由于我们计算的数组长度为 N 个条目，因此 O(N) 的复杂度是最佳的。

*（注意。您可以分别在 k-1 和 k+1 处开始第 4 步和第 5 步中的循环，并去掉第 3 步。额外的步骤仅用于使解释（希望）更容易理解.)****

# uitableview - 在 UITableView iOS 5 中动态地将背景颜色添加到节标题

> ID：11069470
> 
> 赞同：0
> 
> 时间：2012-06-17T06:50:02.293
> 
> 标签：uitableview, ios5, uicolor, sectionheader

我在我的应用程序中为普通 UITableView 添加了自定义部分标题。滚动我的单元格时，会出现在节标题后面。我希望部分标题显示在屏幕上，直到部分不改变。到目前为止，我的应用程序可以按照我的要求运行。

我想要的是，当表格单元格在我的节标题后面时，我想更改节标题的背景颜色并更改节标题的文本颜色，以便用户可以清楚地看到单元格的内容。

如何实现上述功能？非常感谢任何形式的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:01:52.873

你如何为你的 UITableView 返回你的“自定义部分标题”？

如果你为你的 UITableView 设置了一个委托，你可以通过委托的[`tableView: viewForHeaderInSection:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aviewForHeaderInSection%3a)方法返回你的自定义部分标题，在那里你可以返回你想要的任何 UIView（例如，一个 UILabel，你可以控制字体颜色***和***背景颜色）。我已经为您链接了 Apple 的文档。

# ruby - 使用 ruby packetfu 发送原始 TCP 数据包 - 需要目标 MAC 地址？

> ID：11069472
> 
> 赞同：1
> 
> 时间：2012-06-17T06:50:14.807
> 
> 标签：ruby, mac-address

我正在使用 Ruby packetfu 库来构造和发送原始数据包。我可以让它工作，但我认为我做错了一些事情。（顺便说一句，ruby+packetfu 真的让整个原始数据包操作变得容易..）

这是我的代码：（MAC地址被掩盖了一点）

```
 packet.eth_saddr = "XX:XX:88:XX:03:BD"
            packet.eth_daddr = "XX:6D:57:AD:XX:A3"

            packet.ip_header.ip_saddr="192.168.0.16"
            packet.ip_header.ip_daddr="192.168.0.13" 
```

当我调用 packet.to_w('eth0') 时，它会被传递。正如你所看到的，是 MAC 地址让我摸不着头脑。每次需要发送数据包时都必须弄清楚目标MAC地址真的很不方便......我已经测试过源MAC地址不是那么重要，没有它它仍然可以工作。但是目标 MAC 地址是必须的（没有它，数据包不会出去）。

而且我不记得必须在 C 中使用原始套接字执行此操作...如果我需要在将数据包放在网络上之前执行 ARP 会很糟糕，更糟糕的是，如果我需要执行 DNS 查询或其他操作我将数据包发送到互联网....

我想我在这里遗漏了一些东西，比如我需要打电话的单线……但在阅读了 packetfu 的代码和文档后，我无法弄清楚……

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:38:04.917

PacketFu 不维护状态表或类似的东西。因此，确定目标地址将需要一些类似 arp 的功能，您需要自己在适当的地方实现这些功能。`PacketFu::Utils.arp("192.168.0.13")`通常足以开始。

如果您正在回复您看到的数据包，另一种技术是简单地复制该数据包的 MAC 地址。

最后，如果您确定您的目的地在本地网络之外，并且像大多数网络一样，您只有一个网关，您可以只使用网关的 MAC 地址。`PacketFu::Utils.whoami?`可以帮助您获取该信息。

# sitebricks - 如何在 google sitebricks 中编辑实体

> ID：11069474
> 
> 赞同：0
> 
> 时间：2012-06-17T06:50:34.837
> 
> 标签：sitebricks

如何在 google sitebricks 中编辑实体是正确的方法。现在我这样做了。

```
@Show("/WEB-INF/templates/adm/editentry.html")
@Decorated
@At("/adm/entry/:id")
public class EditEntry extends AdminLayout {

  @Inject
  private EntryService entryService;

  private Entry entry = new Entry();

  public Entry getEntry() {
      return entry;
  }

  public void setEntry(Entry entry) {
      this.entry = entry;
  }

  @Get
  public void getForm(@Named("id") String id) {
      this.entry = entryService.get(id);
  }

  @Post
  public String save() {
      Entry exist = entryService.get(entry.getId());
      if (exist == null) {
          FlashMap.setErrorMessage("No entry found with id:" + entry.getId());
      } else {
          if (StringUtils.isBlank(entry.getExcerpt())) {
              entry.setExcerpt(entry.getContent());
          }
          entry.setBlog(exist.getBlog());
          entry.setType(exist.getType());
          entry.setStatus(exist.getStatus());
          entry.setAuthor(exist.getAuthor());
          entryService.saveOrUpdate(entry);
      }
      return request.getContextPath() + "/adm/entries";
  }

} 
```

在 POST 方法中，我从数据库加载现有条目，然后将未修改的字段设置回表单绑定中的条目。然后对数据库进行更新。

这是sitebrciks中的正确方法吗？有没有办法在保存方法中更新条目，就像条目创建方式一样。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:27:25.133

您应该使用 @Put 方法来编辑现有实体，而不是`@Post`. 那里的合同将覆盖该值，无论它是否存在。

`@Post`用于向集合添加新值。

# gmail - Gmail邮件到PDF

> ID：11069475
> 
> 赞同：3
> 
> 时间：2012-06-17T06:50:40.483
> 
> 标签：gmail, google-apps-script

Google Apps 脚本 - Gmail

会实现`GmailMessage`( `GmailThread`)`.getAsPdf()`方法吗？预期的输出将与 Gmail 中可用的打印到 PDF 相同。该功能在网站上可用，那么为什么不在 Script 中呢？

这对于将选定的 Gmail 对话以 PDF 格式快速分发给其他人/外部人员是必要的。

另外，`GmailMessage.getAttachments()`虽然在网上的文档中，在现实中并不存在。这会实施吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:39:36.343

我试过这个并且效果很好（不确定这是唯一的方法）：

```
function getattach(){
var firstThread = GmailApp.getInboxThreads(0,1)[0];
var message = firstThread.getMessages()[0];
var attach = message.getAttachments();
Logger.log(attach[0].getDataAsString() )
if(attach.length>0){
var file=DocsList.createFile(attach[0])
var pdf=file.getAs('application/pdf').getBytes();
// for test purpose I send the pdf as attachment
var attach_to_send = {fileName: 'pdftest.pdf',content:pdf, mimeType:'application/pdf'};
   MailApp.sendEmail('emailadress@gmail.com', 'Your test as PDF ', 'see attachment', {attachments:[attach_to_send]});
file.setTrashed(true);// delete after use ;-)
}
} 
```

编辑1：删除

编辑 2：这是一个带有 pdf 附件正文的新版本，也支持 html（使用 DocsList 服务），临时文档被删除。一言以蔽之：非常令人满意;-)

```
function getAttachAndBody(){
  var firstThread = GmailApp.getInboxThreads(0,1)[0];
  var message = firstThread.getMessages()[0];
  var attach = message.getAttachments();
  var body = message.getBody();//is a string
  var bodydochtml = DocsList.createFile('body.html', body, "text/html")
  var bodyId=bodydochtml.getId()
  var bodydocpdf = bodydochtml.getAs('application/pdf').getBytes();
  if(attach.length>0){
    var file=DocsList.createFile(attach[0])
    var pdf=file.getAs('application/pdf').getBytes();
    var attach_to_send = {fileName: 'pdftest.pdf',content:pdf, mimeType:'application/pdf'};
    var body_to_send = {fileName: 'body.pdf',content:bodydocpdf, mimeType:'application/pdf'};
    MailApp.sendEmail('emailadress@gmail.com', 'transfer email as pdf : body & attachment', 'see attachment', {attachments:[attach_to_send,body_to_send]});
    file.setTrashed(true);
    DocsList.getFileById(bodyId).setTrashed(true)
    }
} 
```

# hook - 在 BeforeInsert 或 BeforeSave 挂钩中更改值

> ID：11069477
> 
> 赞同：1
> 
> 时间：2012-06-17T06:51:08.767
> 
> 标签：hook, atk4

我正在用一个非常简单的课程来做这件事，只是为了学习，但我无法让它像我在[http://agiletoolkit.org/learn/understand/model/actions中看到的那样工作](http://agiletoolkit.org/learn/understand/model/actions)

这是类定义：

```
class Model_Task extends Model_Table {
   public $table='task';
    function init(){
        parent::init();
        $this->addField('user_id')->system(true);
        $this->addField('name')->mandatory('No has indicado un nombre para la tarea');
        $this->addField('description')->dataType('text');
        $this->addField('state')->system(true);

        $this->addHook('beforeSave',function($m){
            $m->description='test'; 
                return $m;
        });
        $this->debug();
    }  
} 
```

我也尝试了 samble 页面格式：

```
class Model_Task extends Model_Table {

public $table='task';
    function init(){
        parent::init();
        $this->addField('user_id')->system(true);
        $this->addField('name')->mandatory('No has indicado un nombre para la tarea');
        $this->addField('description')->dataType('text');
        $this->addField('state')->system(true);

        $this->addHook('beforeSave',$this);
        $this->debug();
    }  

    function BeforeSave(){
        $this->description='test';
        return $this;
    }
} 
```

任务测试页面也很简单：

```
class page_Task extends Page {
    function init(){
        parent::init();

    $m=$this->add('Model_Task');
    $f=$this->add('Form');
        $f->setModel($m);
        $f->addSubmit('Guardar');

    //Task submit
    $f->onSubmit(function($form){
            $form->update();
            $form->js()->univ()->redirect('index?add_ok=1')->execute();
        });  
    }
} 
```

在模型描述的两个实现中，都保存在表单中插入的值，而不是“测试”。如果我在 beforeTest 函数中回显 $this->description 或 $m->description 在我设置它之前它是空的，然后是“测试”，但它不会对生成的 sql 产生任何影响。当然我错过了一些东西，但是¿什么？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:06:45.647

改变值的正确方法是：

```
$this['description'] = 'test; 
```

# php - 更改不同页面的标题徽标

> ID：11069480
> 
> 赞同：0
> 
> 时间：2012-06-17T06:51:58.330
> 
> 标签：php, css, wordpress, wordpress-theming

我正在寻找如何根据模板`<body>`或帖子`type/page`模板中的任一类更改徽标。我对 PHP if 语句不太了解，我猜我需要完成这项工作。

我认为如果我在 sprite 图形中拥有所有徽标并使用 css 类更改为每个页面的不同徽标，这样 php 只会更改类，那么效果会很好。

像这样的东西？

```
if(body class="home") {
  <div class="logo1"><img src="images/logo.png" /></div>
} elseif(body class="page1") {
  <div class="logo2"><img src="images/logo.png" /></div>
} else {
  <div class="logo"><img src="images/logo.png" /></div>
} 
```

我还没有尝试过这段代码，只是想知道这是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:14:19.863

大多数主题在正文标签中添加了一些类，或者是 slug 或 page-id-number。

在 body 标记中查看页面的源代码，是的，使用 sprite。

PHP是矫枉过正。使用 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:17:54.170

iambriansreed 在我之前回答得很好，并提供了一个很好的答案，但我想扩展他所说的内容，而且我要说的比评论还多，所以我发布了我自己的答案。

在您的 HTML 中，您将有一个徽标元素，例如 div 或 h1 标签：

```
<h1 class="logo">My Company</h1> 
```

然后使用 CSS 你会隐藏文本，并用图像替换它：

```
.logo {
    background: url(mylogo.png) 0 0 no-repeat;
    width: 200px; /* match logo width */
    height: 80px; /* match logo height */
    text-indent: -9999px; /* hides text */
} 
```

我已经展示了一种隐藏文本的技术。还有其他方法。将文本留在标记中的原因是为了 SEO 和可访问性。

在子页面上，您将使用更具体的选择器，基于附加到您的正文标签的类，来更改徽标背景：

```
.section2 .logo {
    background: url(mylogo.png) 0 -80px no-repeat;
} 
```

除了根据正在呈现的部分/页面将唯一类附加到正文标记之外，PHP 没有进入等式。

# events - 模板 f:metadata 中的 JSF f:event preRenderView，没有在每次页面访问时调用监听器

> ID：11069484
> 
> 赞同：3
> 
> 时间：2012-06-17T06:52:34.803
> 
> 标签：events, jsf, jsf-2, prerender

根据 Glassfish3.1.1 的 Mojarra-2.1.3（随 Netbeans7.1 分发）

我有一个带有监听器 void reset() 的 @SessionScoped 后备 bean Tracker。

以下在所有使用 template.xhtml 的 XHTML 页面的 f:metadata 中都可以正常工作，例如 /block/view.xhtml，它也采用查询参数 id：

```
<f:view>
    <f:metadata>
        <f:viewParam name="id" value="#{blockManager.id}"/>
        <f:event type="preRenderView" listener="#{tracker.reset}"/>            
    </f:metadata>
</f:view>

<ui:composition template="/template.xhtml"> 
```

正如预期的那样，每当我加载（GET）或重新加载页面时，无论 id 查询参数是什么，都会调用 #{tracker.reset} 侦听器（如调试日志所示）。

但是，必须在每个 XHTML 页面（我有数百个页面）中包含该 f:event 是很乏味的，我首先尝试将它包含在我的 template.xhtml 的 f:metadata 中。但是当我做一些奇怪的事情时发生了。它只调用了一次#{tracker.reset}，第一次加载/block/view.xhtml（不管id查询参数是什么），之后它才被再次调用，直到我用不同的viewId加载另一个页面，例如 /actor/view.xhtml、/block/list.xhtml 或 /index.html。

我在 template.xhtml 中使用 #{facesContext.viewRoot.viewId} 检查了 viewId。从viewId来看很明显，查询参数id对于区分不同的block/view.xhtml?id=[id]页面没有任何作用，调用不同的id查询参数，viewId永远只是'/block /view.xhtml'。

在撰写此 stackoverflow 帖子期间，我发现了问题的解决方案：只需将 f:event 放在 template.xhtml 的 f:metadata 之外（我在 template.xhtml 中使用 f:metadata 对 f:events 进行分组）。这适用于 template.xhtml：

```
<f:metadata>
..
</f:metadata>
<f:event type="preRenderView" listener="#{tracker.reset}"/>
<h:head> 
```

但我仍然有以下问题：

问：为什么在模板的 f:metadata 中放置 f:event 会有所不同？

我问的原因是 Stackoverflow 上有很多例子，包括在 template.xhtml 中使用 f:metadata，以及在模板中使用 f:metadata 中的 f:event。

BalusC 在[何时使用 f:viewAction / preRenderView 与 PostConstruct 中声明？](https://stackoverflow.com/questions/9844526/when-to-use-prerenderview-versus-postconstruct)：

> 在每个 HTTP 请求上都会调用 preRenderView 事件。

如果我在最终 XHTML 页面的 f:metadata 或模板的 f:metadata 之外，但不在 f:metadata 的 f:metadata 中，这似乎是正确的（按预期工作）模板。

关于是否应该在模板的 f:metadata 中包含 f:event 或在模板中使用 f:metadata 似乎存在一些争论。

JSF2 Complete Reference (Burns and Schalk) p.540 状态：

> f:metadata 标记封装了用于指定 Facelets 视图的元数据的元素集，因此必须是 f:view 标记的子级，并且不能出现在模板中。从 JSF2.0 开始，此标记的唯一目的是封装 f:viewParam 标记。

但是在模板中使用 f:metadata 的 Stackoverflow 上有很多示例，并且在 f:metadata 中使用 f:event 的示例也很多。这里也讨论了：

[是否将 f:event 放在 f:metadata 中是否重要？](https://stackoverflow.com/questions/7343220/jsf-does-it-matter-whether-place-fevent-inside-fmetadata-or-not)

BalusC 帮助解释的地方：

> .. <f:event> 并不严格要求放在 <f:metadata> 内。它可以连接到任何组件。.. 当你有一堆 <f:viewParam> 并且想要挂钩 <f:event> 以在所有这些视图参数之后调用一个动作时，它确实是为了纯粹的自我记录目的放在 <f:metadata> 中已设置。..

但是我上面的经验表明，在模板的 f:metadata 中放置和 f:event 会产生稍微不同的（奇怪的）行为。为什么 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-17T13:26:57.270

The `<f:metadata>` itself can only be used in the template client, not in the master template. I.e. it has to be declared in the page which you're actually requesting by URL, not inside the page behind `<ui:composition template>`, it will otherwise just be ignored. This particular restriction is unrelated to the `<f:event>`.

### See also:

*   [When using <ui:composition> templating, where should I declare the <f:metadata>?](https://stackoverflow.com/questions/9856847/where-is-the-best-place-for-the-fmetadata-element/9857186#9857186)

# java - OpenJDK 1.6 在进行嵌套类型推断时出现错误？

> ID：11069492
> 
> 赞同：3
> 
> 时间：2012-06-17T06:54:41.597
> 
> 标签：java, generics, type-inference

我有以下示例 Java 程序，它在 Oracle JDK 下编译得很好，但在 OpenJDK 上编译得不好：

```
public class GenericsBug {

  public static void main(String[] args) {
      GenericsBug bug = new GenericsBug();
      // This line causes the error for not finding matching types:
      AResp resp = bug.execute(new AReq());
  }

  public <T extends Request,R extends Response<T>> R execute(T request) {
      return null;
  }
}

class Request { }
class Response<T extends Request> {}

class AReq extends Request {}
class AResp extends Response<AReq> {} 
```

编译它

```
java version "1.6.0_31"
Java(TM) SE Runtime Environment (build 1.6.0_31-b04-415-11M3635)
Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01-415, mixed mode) 
```

和

```
java version "1.7.0_03"
OpenJDK Runtime Environment (IcedTea7 2.1.1pre) (7~u3-2.1.1~pre1-1ubuntu3)
OpenJDK Client VM (build 22.0-b10, mixed mode, sharing) 
```

工作正常，但失败

```
java version "1.6.0_18"
OpenJDK Runtime Environment (IcedTea6 1.8.13) (6b18-1.8.13-0+squeeze1)
OpenJDK 64-Bit Server VM (build 14.0-b16, mixed mode) 
```

我在这里得到以下编译错误：

```
GenericsBug.java:9: type parameters of <R>R cannot be determined; no unique maximal instance exists for type variable R with upper bounds AResp,Response<T>
    AResp resp = bug.execute(new AReq());
                            ^
 1 error 
```

所以我的问题是，如果这是 OpenJDK 中的一个错误，还是我在泛型类型推断方面做错了什么？

* * *

因为在下面的评论中，有一些关于这段代码有用性的问题（尽管这个问题纯粹是与语法相关的 ;-)，这里是给出的示例，其中包含更多内容。它使用双重调度让请求自己创建响应，并使用参数化执行使使用尽可能类型安全，只允许相同的请求和响应类型对。同样的场景也可以用多个重载`execute()`方法来完成。不管这段代码是否有用，关于这个用例的 Oracle JDK 和 OpenJDK 1.6 之间的不同语法处理的问题仍然存在。

```
 public class Client {

   public static void main(String[] args) {
     Client client = new Client();

     // AReq and AResp must match, otherwise an compile error will happen
     AResp respA = client.execute(new AReq());
     System.out.println(respA.getAContent());

     // Same for BReq and BResp
     BResp respB = client.execute(new BReq());
     System.out.println(respB.getBContent());
   }

   public <T extends Request,R extends Response<T>> R execute(T request) {
     // Fetch the response somehow, eg. by using a HttpClient:
     String responseBody = "....";
     // Let the request itself create the response
     return request.createResponse(responseBody);
 }

}
// ==================================================================================

// Abstract definition of a requests
abstract class Request {
    abstract <R extends Response<? extends Request>> R createResponse(String content); 
}
class Response<T extends Request> {}

// Two request/response pairs with specific request/response specific members
class AReq extends Request {
    AResp createResponse(String content) {
        return new AResp(content);
    }
}
class AResp extends Response<AReq> {
    private String aContent;

    public AResp(String pContent) {
        aContent = "AResp: " + pContent;
    }

    public String getAContent() {
        return aContent;
    }
} 

class BReq extends Request {
    BResp createResponse(String content) {
        return new BResp(content);
    }
}
class BResp extends Response<BReq> {
    private String bContent;

    public BResp(String pContent) {
        bContent = "BResp: " + pContent;
    }

    public String getBContent() {
        return bContent;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:43:23.347

想象你也有

`class AResp2 extends Response<AReq> {}`

那么这两个句子同样（il）合法：

> AResp resp = bug.execute(new AReq());
> 
> AResp2 resp = bug.execute(new AReq());

所以我相信 OpenJDK 在这里是正确的。

可以做些什么来解决这个问题：

> 公共响应执行（T请求）{}

然后手动将响应转换为 AResp。

或者将请求与响应紧密连接，以便编译器可以通过请求类型明确地确定响应类型：

```
class Request<R extends Response> { }
class Response {}

class AReq extends Request<AResp> {}
class AResp extends Response {}

public <T extends Request<R>, R extends Response> R execute(T request) {  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T08:34:17.313

正如阿列克谢的回答所示，你的问题`execute`太笼统*了。*你怎么能实现一个可以返回任何所需子类`R`的`Response< T >`方法`T`（尽管在`return null`技术上应该可以工作，这就是为什么我认为 Oracle JDK 实际上是正确的）。

`GenericsBug`类，而不是`GenericsBug.execute`方法，应该将`T`和`R`作为参数。

# python - 在 os.system 执行的应用程序中捕获运行时错误

> ID：11069497
> 
> 赞同：0
> 
> 时间：2012-06-17T06:55:42.083
> 
> 标签：python

在我的应用程序中，os.system 用于执行另一个程序。

```
os.system('./appln') 
```

有什么方法可以检测正在执行的程序中是否发生运行时错误[例如，像 SIGSEGV]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:12:37.637

看看`subprocess`模块而不是`os.system`. 该`subprocess`模块有多种方法来捕获返回码或在非零返回码上引发异常：http: [//docs.python.org/library/subprocess.html#replacing-os-system](http://docs.python.org/library/subprocess.html#replacing-os-system)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:18:56.827

通过检查 os.system 调用的返回值，可以检测正在执行的程序中的运行时错误。这个[问题](https://stackoverflow.com/questions/6466711/what-is-return-of-os-system-in-python)详细介绍了 os.system 调用的各种返回值。

也就是说，最好遵循@tweet 的回答并使用 subprocess 模块来实现相同的目的。

# java - 当索引 < 128 时，Java 字节 for 循环不会停止运行

> ID：11069501
> 
> 赞同：3
> 
> 时间：2012-06-17T06:57:00.857
> 
> 标签：java, byte

我有这个运行但永不停止的代码。

```
class A {
   public static void main(String[] args) {
      for (byte index = 0; index < 128; index++)
      {
          System.out.println(index);
      }
   }
} 
```

有人可以向我解释为什么它一直在循环。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T06:58:59.573

在 Java 中，`byte`只能表示 -128 和 127 之间的值。这意味着 的*每个可能值`index`*都小于 128，并且循环不能以当前条件终止。当`index`达到 127 时，它会简单地溢出到 -128 并继续循环。

有关 Java 整数类型的更多详细信息，请参阅[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.1)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T07:00:31.377

byte 是 1 字节类型，因此条件 i < 128 始终为真。**当您将 1 添加到 127 时，它会溢出并变为 -128 并再次从那里开始。这**就是您获得无限循环的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T11:42:24.173

因为它永远不会达到 128.. 字节的最大值只有 127.. 所以当 127+1 时它会变为 -128，这是真的.. 所以它总是会再次循环.. 所以你需要从字节更改为 int。 .

# joomla - 迁移 Joomla 1.0 - Joomla 1.5 时弃用的功能

> ID：11069505
> 
> 赞同：0
> 
> 时间：2012-06-17T06:58:53.213
> 
> 标签：joomla

我在 localhost 上安装了 Joomla_1.0.15-Stable-Full_Package，我已经安装了 PHP 5.x 并更新了 mysql。在我访问我的站点链接时进行了艰难的安装后，已弃用的函数和变量等出现了数千个错误。

我怎么能解决这些？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:26:32.410

您使用的 joomla 版本太旧（从 2008 年开始），并且当时使用的某些功能已被弃用，因此您会遇到这些错误。真诚的为什么要安装 1.0 ？它很旧，被黑客入侵的风险很高。您至少应该安装 1.5 甚至 2.5。如果您想继续使用 1.0（我真的不鼓励），那么也许您应该使用旧版本的 PHP。这意味着您被黑客入侵的可能性更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T13:08:52.563

Joomla 很旧，因此在运行 PHP 4 和 MySQL 4 的旧服务器上会更好地工作。Joomla 1.0 太旧而不能在 PHP 5 服务器上工作，因为有很多功能会被贬值。

不确定您使用的是什么本地服务器，但会推荐使用[WampServer](http://www.wampserver.com/en/)并下载 PHP 和 SQL 插件。如果您确实下载 PHP4，那么您还需要下载 Apache 2.0.x。安装这些旧软件包非常容易，它只是一个 .exe 文件，因此就像安装普通软件一样。

[此页面向您展示](http://help.joomla.org/content/view/1938/310/)了 Joomla 1.0 的要求，以便您可以下载正确的软件包

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-17T14:59:43.217

Joomla 1.0 已经很老了，现在可能会抛出很多 E_STRICT 和 E_DEPRECATED 警告。我建议在使用 Joomla 1.0 时关闭错误报告。当然，完成迁移后，您应该在测试环境中再次打开它。

# c# - 如何使每个表单都可以相互访问

> ID：11069508
> 
> 赞同：0
> 
> 时间：2012-06-17T06:59:30.160
> 
> 标签：c#, winforms

有没有办法让每个表单（所有控件、所有字符串、内部所有整数）都可以从其他表单访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T07:03:31.503

你只需要自己*实现*它。没有内置机制。

创建表单对象的全局集合（可能是`static`），并为每个表单定义要与他人共享的*成员的*`public` *属性。*

 *那是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T07:07:19.560

访问修饰符使类的成员可以从其他类访问或不可访问。默认情况下，所有表单类都是公共的，并且可以由其他表单访问。声明为 public 的数据成员可以通过其他形式（类）访问，并且受保护的成员可以通过子类访问。研究访问修饰符可以帮助您使所需的成员可访问，[**访问修饰符**](http://msdn.microsoft.com/en-us/library/ms173121.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T07:16:40.083

正如其他人指出的那样，有，但你真的想要吗？您很少希望一种形式非常依赖于另一种形式——这会使您的维护变得更加困难。弄清楚你需要什么，并正确设计接口（也许你需要一个知道如何控制这两种表单的控制器？）。*

# algorithm - 在我的数据上使用 Kmeans。

> ID：11069519
> 
> 赞同：0
> 
> 时间：2012-06-17T07:01:28.997
> 
> 标签：algorithm, cluster-analysis

我想我了解 kmeans 算法的工作原理，但是我在用我的数据将其建模成一种格式时遇到了很多麻烦。

我正在寻找一种方法来根据我的输入获得最相似的游戏。

例子：

```
 Original_Game has n Similar_Games.  Similar_Games has n Genres, Themes, Tropes. 
 Original_Game1 has n Similar_Games.  Similar_Games has n Genres, Themes, Tropes. 
```

我在想 kmeans 可以告诉我哪些 Similar_Games 与 Original_Game 和 Original_Game1 最相似。但我不知道如何在二维图上组织这些数据，如果我不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:54:36.990

您只能对以下数据使用 k-means：

*   可以合理地用数字表示
*   不是过于离散（不要在二进制向量上运行 k-means！）
*   其中所有尺寸的含义大致相同（即 x 轴上 1 厘米，y 轴上约 1 厘米）
*   您可以在哪里计算*均值*
*   其中均值*减小*方差，否则可能不会收敛

K-means 很容易理解，但不适用于任意数据。

您可以通过例如使用 k-medoids / 围绕 medoids (PAM) 分区来减少其中一些限制。这是一个密切相关的算法，它消除了大多数这些限制，但代价是通常要慢得多。

# css - Zencart CSS 和图像未加载

> ID：11069520
> 
> 赞同：0
> 
> 时间：2012-06-17T07:01:39.580
> 
> 标签：css, permissions, content-management-system, http-status-code-404, zen-cart

我刚刚将我的商店从 zencart 1.3.8 升级到 1.5.0

我安装了较新的版本（1.5.0），然后导入了我的旧数据库（1.3.8）。产品按应有的方式展示。

我的问题是：

*   没有显示产品的图像

*   没有加载 CSS

*   我无法访问管理员帐户..

*   店铺网址是[这个](http://onlinesafetydepot.com/)

*   我已经关闭了管理和商店目录的 htaccess 文件，
    萤火虫说错误 404 没有加载图像和 CSS，我检查了一切是否存在。

我现在该怎么办？有什么指导方针吗？

**更新**

错误日志显示类似的条目

> [client xxxmy ip] (13)Permission denied: /home/besafe/public_html/images/.htaccess pcfg_openfile: 无法检查htaccess文件，确保可读，referer： [http ://onlinesafetydepot.com/images/abel-8805 -消防员.jpg](http://onlinesafetydepot.com/images/abel-8805-firefighter.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T17:22:34.163

咳咳……

这是特定文件和文件夹的权限问题...

zencart 中使用了两个配置文件，升级后需要将权限改为 644 或 444 。在我的情况下 644 作品..

此外，需要设置 755 权限的文件夹。在我的情况下，`images, store_include and admin_include`需要 755 chmod 权限..

# ruby-on-rails - 资产管道已损坏：未即时编译 css 和 js 文件

> ID：11069527
> 
> 赞同：5
> 
> 时间：2012-06-17T07:03:18.167
> 
> 标签：ruby-on-rails, ruby, asset-pipeline, ruby-on-rails-3.2

我开始了一个新的 Rails 3.2.5 项目，资产管道不再工作。CSS 和 Javascript 文件不再编译。

这是尝试生成资产时日志的输出：

```
 Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2012-06-16 23:59:11 -0700
Served asset /application.css - 200 OK (0ms)
[2012-06-16 23:59:11] ERROR NoMethodError: undefined method `each' for nil:NilClass
    /Users/greg/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/handler/webrick.rb:71:in `service'
    /Users/greg/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
    /Users/greg/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
    /Users/greg/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/webrick/server.rb:

Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2012-06-16 23:59:11 -0700
Served asset /application.js - 200 OK (0ms)
[2012-06-16 23:59:11] ERROR NoMethodError: undefined method `each' for nil:NilClass
    /Users/greg/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/handler/webrick.rb:71:in `service'
    /Users/greg/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
    /Users/greg/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
    /Users/greg/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
183:in `block in start_thread' 
```

**更新**：

```
<!DOCTYPE html>
<html>
<head>
  <title>Shorai</title>
  <%= csrf_meta_tags %>
</head>
<body id=<%= params[:controller].sub('_controller', '') %>>

  <% if current_user %>
    <%= current_user.name %>
    <%= link_to "Log out", signout_path %>
  <% else %>
    <%= link_to "Sign in", "/auth/37signals" %>
  <% end %>

  <%= yield %>

  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
</body>
</html> 
```

**更新2：**

# 应用程序.scss

```
 *
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 *= require_self
 *= require_tree .
 */ 
```

**[更新3： http](http://f.imgtmp.com/Onpqv.png) **://f.imgtmp.com/Onpqv.png****

 **我不知道是什么原因造成的，有人有想法吗？格雷格

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T11:53:21.257

当我使用*memcached*存储启用缓存（在开发模式下）时出现此错误，但*memcached*进程未运行（Rails 3.2.8，Win7）。

因此，解决方案是简单地启动*memcached*并重新启动 Rails 服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T14:05:34.753

在将 memcache 激活为缓存存储 () 后，我遇到了类似的问题`config.cache_store = :dalli_store`。我可以通过显式停用 Rack::Cache 中间件（`config.action_dispatch.rack_cache = nil`）或设置来解决它

```
config.action_dispatch.rack_cache = {
  :metastore    => Dalli::Client.new,
  :entitystore  => 'file:tmp/cache/rack/body',
  :allow_reload => false
} 
```

请参阅[https://github.com/rails/rails/issues/8366](https://github.com/rails/rails/issues/8366)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T08:26:22.573

我有一个类似的问题，我通过在开发环境中禁用缓存来解决它。我认为缓存不能很好地与资产即时编译一起使用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T17:20:43.893

我对 -v 3.2.5 也有类似的问题。

经过数小时的调试，我提出了一种解决方法。这不是很好，但它让我感动，直到我能解决它，或者其他人有更好的运气！

我很好奇这个解决方法是否也适合你，格雷戈里......

在 config/application.rb 我必须为我的资产显式添加加载路径......所以：

```
config.assets.paths << Rails.root.join("app", "assets", "stylesheets")
config.assets.paths << Rails.root.join("app", "assets", "javascripts")
config.assets.paths << Rails.root.join("vendor", "assets", "stylesheets")
config.assets.paths << Rails.root.join("vendor", "assets", "javascripts")
config.assets.paths << Rails.root.join("lib", "assets", "javascripts") 
```

如果您在引擎中有资产，则还需要显式添加它们。它在 -v 3.1.x 中运行良好。这个变通办法解决了这个问题的事实似乎指向一个错误（现在肯定其他人会发现它）或 3.2.5 中的一些配置更改。**

# java - 简单的 JOptionPane.showMessage();

> ID：11069530
> 
> 赞同：2
> 
> 时间：2012-06-17T07:03:51.603
> 
> 标签：java, swing, joptionpane

这是一个按钮的代码，当单击该按钮时，它会在数据库中搜索用户 ID 并显示姓名、姓氏和小时数。我想要做的是弹出一条消息（JOptionPane.showMessage（）），显示用户打卡/打卡的时间，所以我想我可以做的是添加“JOptionPane.showMessage（）”来做到这一点，但是当我把这段代码（无论在哪里）时，“showMessage”下面有一条红线和一条错误消息：

```
==cannot find symbol
==symbol: method showMessage(java.lang.String)
==location:class javax.swing.JOptionPane 
```

不确定那是什么意思。非常感谢任何帮助。谢谢你。

```
private void clockInOutActionPerformed(java.awt.event.ActionEventevt){   

    // TODO add your handling code here:
    try{
stmt = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,  ResultSet.CONCUR_UPDATABLE);
           String sql = "SELECT * FROM Students WHERE STUDENTID = ?";
        PreparedStatement pstmt = con.prepareStatement(sql);
        pstmt.setInt(1, Integer.parseInt(jTextField1.getText()));
        ResultSet rs = pstmt.executeQuery();

        if(rs.next()){
            String first = rs.getString(2);
            String last = rs.getString(3);
            String hours = rs.getString(6);

            fName.setText(first);
            lName.setText(last);
            tHours.setText(hours);
        }       
    }
    catch(SQLException err){
        JOptionPane.showMessageDialog(Student.this, err.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:12:37.167

可能你拼错了类名或者你没有导入类名，检查并重试。还有安德鲁所说的。

如果您使用的是 IDE Eclipse，如果您按下 Ctrl+Shift+o（字母 O），它会自动为您导入所有内容。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:58:28.453

我想在这段代码中指出几个问题

```
private void clockInOutActionPerformed(java.awt.event.ActionEvent evt){ 
```

参数类型和参数名称之间缺少空格

`JOptionPane.showMessageDialog(Student.this, err.getMessage());`

showMessageDialog 有三个覆盖方法，它们的第一个参数应该是 java.awt.Component 的类型，所以我假设您的 Student 正在扩展 java.awt.Component 并且它包含上述 clockInOutActionPerformed 方法。

否则代码要编译。

无论如何，消息的含义是什么

除此之外，我无法重现您遇到的类似错误。

> 我认为您需要检查您正在使用的 jdk 版本。JOptionPane 可能不适用于您正在使用的 jdk 版本。

# php - 禁用特定目录的自动构建

> ID：11069532
> 
> 赞同：0
> 
> 时间：2012-06-17T07:04:01.120
> 
> 标签：php, eclipse, zend-framework2

我有 eclipse 3.7.2 来处理位于远程 Linux 服务器上的 PHP 项目，这些服务器可以通过 SSH 访问。

我安装了 eclipse RSE（远程系统资源管理器）并用它来添加一个远程项目并将其配置为一个 PHP 项目。

Zend Framework 2 项目的最佳实践是将使用过的 Zend Framework 版本包含在应用程序的源代码中，但随后发生的情况是，每当我重新打开 eclipse 时，它​​都会尝试构建项目并验证整个 zend 框架目录。

我如何选择自动构建器将忽略该目录，因为它不是我修改的东西。一般来说，我不知道为什么它每次都需要验证该目录，并且在每次尝试验证之前它都不检查目录内容上的 md5。但这无法修复，我需要忽略整个 zend 框架目录 foom 自动构建。

使用带有 PHP 插件的 Eclipse 3.7.2。使用 Zend Framework 2.0 beta4 和 Zend Framework 站点提供的基本框架应用程序和模块。

谢谢你！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T05:48:14.737

在最新的 ZendSkeletonApplication 中，您会在 index.php 中看到，只要设置`ZF2-PATH`环境变量，您就可以将 ZF2 放在项目之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T06:05:58.727

似乎有可能做到这一点。

我只需要右键单击要从自动构建中排除的目录。

然后去`Build Path`=> `Exclude`。

这会从自动构建中排除目录并解决问题。

# macos - 当您将非视网膜显示器连接到带视网膜的 MBP 时会发生什么？

> ID：11069533
> 
> 赞同：3
> 
> 时间：2012-06-17T07:04:34.543
> 
> 标签：macos, cocoa, retina-display

AFAIK Mac OSX 具有统一的屏幕空间。因此，我不清楚当您有多个具有不同支持比例因子的显示器时会发生什么。视网膜显示器会进入低分辨率模式（所以 -[NSScreen backingScaleFactor] 返回所有附加显示器中的最小值）？如果不是，如果应用程序的一部分出现在带有视网膜的显示屏上，而另一部分出现在没有视网膜的显示屏上，它将如何呈现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:48:42.163

我目前正在处理一些 HiDPI 问题，并且我的非视网膜 MBP 和雷声显示器已打开 HiDPI 模式。

在连接的显示器上，它具有 2.0 的支持比例因子，当我将窗口拖动到 MBP 显示器（具有通常的 DPI）时，接下来会发生：

当窗口的主要部分在 HiDPI 上时，它会以支持比例因子 2.0 渲染所有窗口。

当主要部分移动到非 HiDPI 显示器时，它会重新渲染所有图形，支持比例因子等于 1.0，并在两个显示器上显示新的渲染窗口。

希望对你有帮助）

编辑：添加了屏幕截图。

显示屏边框附近的屏幕截图（通常在左侧，在右侧为 Retina）：

backingScalefactor 1.0： [https ://dl.dropbox.com/u/51547223/Backing1.0.png](https://dl.dropbox.com/u/51547223/Backing1.0.png) ![在此处输入图像描述](../Images/7368c8750d71221b43bed7402c9d82da.png)

backingScalefactor 2.0： [https ://dl.dropbox.com/u/51547223/Backing2.0.png](https://dl.dropbox.com/u/51547223/Backing2.0.png) ![在此处输入图像描述](../Images/5146338a3d806d8887808402cd3d0954.png)

# php - jQuery - Ajax XMLHttpRequest？

> ID：11069543
> 
> 赞同：-3
> 
> 时间：2012-06-17T07:07:54.377
> 
> 标签：php, javascript, mysql

在 jQuery 中，您可以轻松地使用他们的 Ajax 库。问题是我的代码中只需要它一次，因此调用整个 JavaScript 库是不必要的。

我有我一直在处理的代码，但我似乎无法让它工作。**我正在尝试通过单击按钮来启动 PHP 脚本。**我怎么做？

这是我现在的距离：

```
<div onClick="count();">Click!</div>
<script>
    function count() {
        if (window.XMLHttpRequest) {
            xhr = new XMLHttpRequest()
        } else {
            if (window.ActiveXObject) {
                var xhr = new ActiveXObject("Microsoft.XMLHTTP");
            }
        }
        xhr.open('GET', 'count.php', false);
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                while (results.hasChildNodes()) {
                    results.removeChild(results.lastChild);
                }
                results.appendChild(document.createTextNode(xhr.responseText));
            }
        }
        xhr.send();

    }, false);
    }
</script> 
```

这是 PHP 文件中的代码：

```
<?php
mysql_connect("myhost", "username", "password") or die(mysql_error());
mysql_select_db("mydatabase") or die(mysql_error());

mysql_query("INSERT INTO `table` (`field`) VALUES(\'+1\'); ") 
or die(mysql_error()); 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T06:55:25.130

```
<script>
function count() {
    if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest()
    } else {
        if (window.ActiveXObject) {
            var xhr = new ActiveXObject("Microsoft.XMLHTTP");
        }
    }
    xhr.open('GET', 'count.php', false);
    xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
            while (results.hasChildNodes()) {
                results.removeChild(results.lastChild);
            }
            results.appendChild(document.createTextNode(xhr.responseText));
        }
    }
    xhr.send();

}, false); // This Line looks extra. Remove this and try
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T10:02:31.303

很短的方法。

**HTML**：

```
<input type="button" onclick="count()" value="count"> 
```

**JS**：

```
function count()  { 
  url="yourphp.php";
  objX=new XMLHttpRequest();
  objX.open("GET",url,false);
  objX.send(null);
} 
```

# asp.net-mvc-3 - 使用 mvc3 razor 将下拉列表的值传递给文本框

> ID：11069545
> 
> 赞同：2
> 
> 时间：2012-06-17T07:08:11.290
> 
> 标签：asp.net-mvc-3, razor

> **可能重复：**
> [将下拉列表的值传递给文本框](https://stackoverflow.com/questions/11070637/passing-values-of-dropdown-to-textbox)

我的视图中有一个下拉列表、一个提交按钮和一个文本框。当单击提交按钮或下拉列表的 onChange 事件时，我想将下拉列表的选定值传递给文本框。我怎样才能做到这一点？？？？

**编辑**：

我这样做了，但没有用：

```
<script type="text/javascript">
    $(function () {
        $('#ddlComp').change(function () {
            var selectedValue = $(this).val();
            $('#txtCompName').val(selectedValue);
        });
    }); 
</script>

<form action="/">
    @Html.DropDownList("ddlcomp", Model.CompanyList)
    <input type="submit" value="Submit" />
    @Html.TextBox("txtCompName")
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:16:21.863

```
$("#mydropdown").change(function(){     
  $("#mytextbox").val($(this).value());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T15:29:03.373

从您的编辑中，您的下拉列表的 id 与您的 jQuery 选择器的 id 不一致。根据您的表格，它应该是：

```
<script type="text/javascript">
    $(function () {
        $('#ddlcomp').change(function () {
            var selectedValue = $(this).val();
            $('#txtCompName').val(selectedValue);
        });
    }); 
</script> 
```

# meteor - 将对象从客户端传输到服务器

> ID：11069548
> 
> 赞同：0
> 
> 时间：2012-06-17T07:08:49.367
> 
> 标签：meteor

我已经在客户端收集了对象中的数据。现在我想将它传输到服务器以便存储在 MongoDB 中。我正在尝试在客户端使用 $.post 命令和在服务器端使用 $.get 命令。但是我得到了 $ undefined 的错误。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:52:18.313

使用`Meteor.methods`和`Meteor.call`，有关详细信息，请参阅[文档](http://docs.meteor.com/)。

jQuery GET 和 POST 用于 HTTP，Meteor 没有使用...

# php - 在 CakePHP 中从模型中搜索数据

> ID：11069549
> 
> 赞同：0
> 
> 时间：2012-06-17T07:08:57.073
> 
> 标签：php, database, cakephp

我正在做我的第一个项目，尝试使用 CakePHP。基本上我有一个网站，我希望用户能够搜索存储在 MySQL 数据库中的不同锻炼。

当用户输入搜索词时，我只想返回名称中包含搜索词的任何锻炼。最重要的是，我希望他们能够应用过滤器将搜索范围缩小到特定的肌肉群。

过滤器通过查询字符串传递给搜索操作，搜索词使用 post 方法传递。

首先，这是我现在关心的两个模型：

```
class Workout extends AppModel {
    public $name = 'Workout';
    public $hasAndBelongsToMany = array(
        'MuscleGroup' =>
            array(
                'className'              => 'MuscleGroup',
                'joinTable'              => 'workouts_muscle_groups',
                'foreignKey'             => 'workout_id',
                'associationForeignKey'  => 'muscle_group_id',
                'unique'                 => true,
                'conditions'             => '',
                'fields'                 => '',
                'order'                  => '',
                'limit'                  => '',
                'offset'                 => '',
                'finderQuery'            => '',
                'deleteQuery'            => '',
                'insertQuery'            => ''
            )
    );
}

class MuscleGroup extends AppModel {
    public $name = 'MuscleGroup';
    public $hasAndBelongsToMany = array(
        'Workout' =>
            array(
                'className'              => 'Workout',
                'joinTable'              => 'workouts_muscle_groups',
                'foreignKey'             => 'muscle_group_id',
                'associationForeignKey'  => 'workout_id',
                'unique'                 => true,
                'conditions'             => '',
                'fields'                 => '',
                'order'                  => '',
                'limit'                  => '',
                'offset'                 => '',
                'finderQuery'            => '',
                'deleteQuery'            => '',
                'insertQuery'            => ''
            )
    );
} 
```

现在下面是我的 WorkoutsController 中的搜索操作：

```
function search() {
    $hasFilters = false;
    $filters = array(
        "abs" => false, 
        "back" => false, 
        "biceps" => false, 
        "chest" => false, 
        "forearms" => false, 
        "legs" => false, 
        "shoulders" => false, 
        "triceps" => false
    );

    if(isset($this->params['url']['abs']))
        if($this->params['url']['abs'] == "1")
            $filters['abs'] = $hasFilters = true;
    if(isset($this->params['url']['back']))
        if($this->params['url']['back'] == "1")
            $filters['back'] = $hasFilters = true;
    if(isset($this->params['url']['biceps']))
        if($this->params['url']['biceps'] == "1")
            $filters['biceps'] = $hasFilters = true;
    if(isset($this->params['url']['chest']))
        if($this->params['url']['chest'] == "1")
            $filters['chest'] = $hasFilters = true;
    if(isset($this->params['url']['forearms']))
        if($this->params['url']['forearms'] == "1")
            $filters['forearms'] = $hasFilters = true;
    if(isset($this->params['url']['legs']))
        if($this->params['url']['legs'] == "1")
            $filters['legs'] = $hasFilters = true;
    if(isset($this->params['url']['shoulders']))
        if($this->params['url']['shoulders'] == "1")
            $filters['shoulders'] = $hasFilters = true;
    if(isset($this->params['url']['triceps']))
        if($this->params['url']['triceps'] == "1")
            $filters['triceps'] = $hasFilters = true;

    $query = $this->request->data['search'];

    //insert code here to actually perform the search!     

} 
```

我真的希望有一种简单的方法来做到这一点，但我整晚都在翻阅文档，似乎找不到任何相关的例子。在 EntityFramework 中，我可以简单地说：

```
List<Workout> results = context.Workouts.Where(w => w.Name.Contains(searchTerm) && w.MuscleGroups.Any(g => g.Id == mg_id)).ToList(); 
```

注意：不知道 C# 语法是否接近正确，但从模型中访问数据的便利性与我记忆中的接近。

我怎样才能从 CakePHP 获得等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T10:54:03.297

尝试使用 MuscleGroup ID 进行过滤，而不是使用它们的名称。无论如何，我想用户会从列表中选择它们。

然后，`find()`应该像这样工作：

```
$this->Workout->find(
    'all',
    array(
        'conditions' => array(
            'Workout.name LIKE' => '%'.$searchTerm.'%',
            // List of included MuscleGroups:
            'MuscleGroup.id' => array(1, 5, 9, 17)  
        )   
    )   
); 
```

请注意，您需要注意相关的 MuscleGroup 是否包含在 Workout 查询中，可以通过设置`$this->Workout->recursive = 1`或（推荐）使用更灵活的 ContainableBehavior。

# generics - 无法定义运算符

> ID：11069551
> 
> 赞同：2
> 
> 时间：2012-06-17T07:09:41.430
> 
> 标签：generics, f#

我有以下简单类型：

```
module Structures
    type Point2D<'T> (x : 'T, y : 'T) =
        member this.X = x
        member this.Y = y
        member this.IsEqualTo (p : Point2D<'T>) =
            (this.X = p.X) && (this.Y = p.Y) 
```

但是 Visual Studio（2012 试用版）在名称“IsEqualTo”下放置了一条红色波浪线，在“this.X”下放置了一条蓝色波浪线。

红色波浪线的错误信息如下：

> 通用成员 IsEqualTo 已在此程序点之前的非统一实例化中使用。考虑重新排序成员，以便首先出现此成员。或者，显式指定成员的完整类型，包括参数类型、返回类型和任何其他泛型参数和约束。

蓝线的消息是：

> 类型参数缺少约束'当'T：相等'

我尝试在所有其他成员之前放置“IsEqualTo”，但错误仍然存​​在。

我猜这个错误与`=`登录在`this.X = p.X`泛型类型上工作的事实有关，`'T`但我似乎无法纠正它。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T07:24:30.580

```
type Point2D<'T when 'T : equality> (x : 'T, y : 'T) =
    member this.X = x
    member this.Y = y
    member this.IsEqualTo (p : Point2D<'T>) =
        (this.X = p.X) && (this.Y = p.Y) 
```

# google-app-engine - 在 Google App Engine 中对实体进行全文搜索或字符串搜索以显示即时结果

> ID：11069559
> 
> 赞同：2
> 
> 时间：2012-06-17T07:12:08.637
> 
> 标签：google-app-engine, python-2.7

我正在研究像谷歌即时这样的功能。它基于 Google AppEngine Python 2.7 构建。

为此，我需要从数据存储中获取实体。

每个实体有两个属性。(nemo,company_name) 都是字符串类型。

该模型基于 [http://code.google.com/p/gae-text-search/](http://code.google.com/p/gae-text-search/) 允许全文搜索。

模型类是

```
from google.appengine.ext import db
import tzsearch
class Items(tzsearch.SearchableModel):
    nemo=db.StringProperty()
    company_name=db.StringProperty() 
```

但是当我跑步时

```
query='any query string'
from models.models import Items
query_obj=Items.all().search(query) 
```

上面的代码适用于长度大于 2 的查询，并且只返回匹配的实体。但是对于长度为 1 和 2 的查询返回所有实体。

使响应非常缓慢。

我真的被困在这里了。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T07:39:39.107

现在 AppEngine[支持全文搜索](https://developers.google.com/appengine/docs/python/search/overview)gae-text-search 项目应该被视为已弃用。

# php - 如何以三行读取文件？

> ID：11069560
> 
> 赞同：1
> 
> 时间：2012-06-17T07:12:20.503
> 
> 标签：php, file, io

因此，假设您有一个 php post 脚本，它将您传递给它的任何内容作为新行附加到文本文件中

假设该文件名为 file.txt，如下所示：

```
11:45 Am
12:49 PM
Went to Lunch
3:25 PM 
```

我想知道，我怎样才能编写一个将信息视为 3 对的 php 脚本。所以在 for 循环中它会显示

```
line1 | line2 | line3
line4 
```

请注意，第 4 行之后没有任何内容，因此它停止了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T07:16:34.403

您可以使用（[演示](http://codepad.viper-7.com/2I7QxD)）

```
$chunksOfThree = array_chunk(file('/path/to/file', FILE_IGNORE_NEW_LINES), 3);
foreach ($chunksOfThree as $chunk) {
    echo implode(' | ', $chunk), PHP_EOL;
} 
```

这将输出所需的

```
11:45 Am | 12:49 PM | Went to Lunch
3:25 PM 
```

请参阅手册条目

*   [`file`— 将整个文件读入一个数组](http://php.net/manual/en/function.file.php)并
*   [`array_chunk`— 将数组拆分成块](http://php.net/manual/en/function.array-chunk.php)
*   [`implode`— 用字符串连接数组元素](http://php.net/manual/en/function.implode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:15:40.223

[fgets](http://php.net/fgets)从文件中读取整行。它比[fread 之](http://php.net/fread)类的要慢，但可以满足您的需求。

您还可以使用[file](http://php.net/file)函数将整个文件读入一个数组。数组中的每个元素对应于文件中的一行。

如果读取的行数不是 3 的倍数，则忽略最后 1 或 2 行。

`fgets`如果没有更多数据，则返回 false，因此您可以检查以确定三元组条目之一是否不完整。

```
while(!feof($fp)) {
    $line1 = fgets($fp);
    $line2 = fgets($fp);
    $line3 = fgets($fp);

    if ($line2 === false) {
        echo "$line1";
    } else if ($line3 == false) {
        echo "$line1 | $line2";
    } else {
        echo "$line1 | $line2 | $line3\n";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T07:13:38.007

您可以为此使用此代码

```
<?php
$filename = "test.txt";
$fp = fopen( $filename, "r" ) or die("Couldn't open $filename");
$i=0;
while ( ! feof( $fp ) ) {
   $line = fgets( $fp, 1024 );
   if($i==2)
   {
      print "$line";
      $i=0;
      print "<br>";
   }
   else
   {
      print "$line | ";
      $i++;
   }
}
?>

Output : 

11:45 Am | 12:49 PM | Went to Lunch 
3:25 PM | 
```

# javascript - childNodes 属性给出不正确的结果？

> ID：11069565
> 
> 赞同：0
> 
> 时间：2012-06-17T07:12:43.207
> 
> 标签：javascript, dom

我正在尝试了解有关 DOM 的更多信息，并且一直在编写一些遍历脚本。我提出的算法在我正在做的部分工作中运行良好，但是当我将它应用于 HTML 文档的整个正文时，它就搞砸了。这是HTML：

```
<!DOCTYPE html>
<html lang='en'>
    <head>
        <meta charset='utf-8' />
        <title>Lumen Tests</title>
        <link rel='stylesheet' href='../../qunit/qunit.css' />
    </head>
    <body>
        <div id='qunit'></div>
        <div id='qunit-fixture'></div>

        <div id='wrapper'>
            <div id='header'></div>
            <div id='content'>
                <p id='para'>Lorem ipsum dolor sit amet.</p>
            </div>
            <div id='footer'></div>
        </div>

        <script src='../../qunit/qunit.js'></script>
        <script src='../lib/traverse.js'></script>
        <script src='../lib/lumen.js'></script>
        <script src='features.js'></script>
    </body>
</html> 
```

和 JavaScript：

```
(function () {

    'use strict';

    function toArray(list) {
        var array = [],
            len = list.length,
            i = 0;

        while (i < len) {
            array[i] = list[i];
            i += 1;
        }

        return array;
    }

    function Traverse() {

        var that = this;

        this.allTags = function (node) {
            var context  = node || document.body,
                children = [],
                array = [],
                len,
                i = 0;

            children = toArray(context.childNodes);
            len = children.length;

            while (i < len) {
                if (children[i].nodeType === 1) {
                    array.push(children[i]);
                    array = array.concat(that.allTags(children[i]));
                }

                i += 1;
            }

            return array;
        };

    }

    var foo = new Traverse();
    window.Traverse = foo.allTags;

}());

alert(Traverse()); 
```

`document.getElementById('wrapper')`现在，当我传递给遍历函数时，这个设置可以正常工作，但是当我让它使用它时，`document.body`它只会得到两个`script`元素。我在 Chrome 20.0.1132.34、Firefox 11.0 和 IE 9 上对此进行了测试，它们都得到了相同的结果。通过测试，我确实发现该算法没有传递任何内容，`childNodes`属性 on`document.body`给出的长度为 10，当我将其转换为数组并警告它时，输出为 text, div, text, div, text, div, text 、 脚本、 文本、 脚本。你们中的任何人都可以解释为什么`childNodes`不选择最后两个脚本标签吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:31:35.550

当您调用遍历脚本时，其他 2 个脚本还不存在。在 domready 上调用 traverse。

```
document.addEventListener('DOMContentLoaded', function () {
    console.log(Traverse());
}, false); 
```

# javascript - Sencha Touch - 注册 ID 问题

> ID：11069566
> 
> 赞同：0
> 
> 时间：2012-06-17T07:12:46.670
> 
> 标签：javascript, dom, sencha-touch, sencha-touch-2

我正在指定一个`id`属性`'Ext.Container'`。

**我想在不同的文件中重用这个容器。我想在多个文件中获取此容器的子项。**
但是，由于我为它指定了一个`id`，所以当我第一次尝试访问它时它给了我一个错误..

> `gBlock1`[WARN][Ext.Component#constructor]使用已使用的 id ( ) 注册组件。请确保现有组件已被销毁（`Ext.Component#destroy()`.

我的代码片段..

```
Ext.define('ABC.view.XYZ', {
    extend: 'Ext.Container',
    id: 'gBlock1',
    xtype: ...
    ...... 
```

我正在使用`id`属性，因为我想像这样一次性访问容器的所有按钮，

```
var buttons = Ext.ComponentQuery.query('#gBlock1 button'); 
```

并稍后将其用作`buttons[0]`等`buttons[1]`...

我应该怎么办 ？如何使用`itemsId`它作为它的替代品`Ext.Container`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:31:27.280

`id`是 Sencha Touch 中的一个特殊配置，设计为每个组件类型都是唯一的，所以不要尝试多次使用它。

在您的情况下，有一个更简单的解决方案：

*   定义一些自定义配置，例如：

    `type: 'SpecialType';`

*   稍后使用：

    `var buttons = Ext.ComponentQuery.query('button[type="SpecialType"]');`

# php - PHP 返回“意外的分号”错误

> ID：11069569
> 
> 赞同：1
> 
> 时间：2012-06-17T07:13:16.447
> 
> 标签：php, localhost, wampserver

所以我有一个名为 Time.php 的 php 文件：

```
 <?php echo (( $DateTime.date("n/j/Y g:i:s A").Hour + ":" + $DateTime.date("n/j/Y g:i:s
 A").Minute + ":" + $DateTime.date("n/j/Y g:i:s A").Second ) ?> 
```

这最初是在 ASP 中，但我使用翻译工具将其转换为 PHP，因此它可能在语法上不正确。每当我在本地主机中启动页面时，它都会给我一个错误，说第 2 行有一个意外的分号。在我的文件中，与上述相反，第 2 行是`":" + $DateTime.date("n/j/Y g:i:s A").Second ) ?>`. 正如您已经看到的那样，整个文件中没有分号，更不用说第二行了。为什么它给我这个错误（我正在使用 WAMPserver，它已打开、工作等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:18:04.620

PHP 中的对象是：

```
$DateTime->date("n/j/Y g:i:s A")->Hour 
```

**不是**

```
$DateTime.date("n/j/Y g:i:s A").Hour 
```

字符串连接的完成方式如下：

```
echo "Hello" . "World"; 
```

**不是**

```
echo "Hello" + "World"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T07:15:21.593

你有一个太多的左括号。

```
<?php echo ( $DateTime.date("n/j/Y g:i:s A").Hour + ":" + $DateTime.date("n/j/Y g:i:s A").Minute + ":" + $DateTime.date("n/j/Y g:i:s A").Second ) ?> 
```

# javascript - 有没有办法让多个选择框同时打开？

> ID：11069572
> 
> 赞同：2
> 
> 时间：2012-06-17T07:13:51.063
> 
> 标签：javascript, html, drop-down-menu

我的 HTML 页面中有 2 个选择框。

出于某种原因，我希望两个文本框同时打开。

这可能有几个目的，比如同时截取两个打开的屏幕截图。

我面临的问题是，当我单击一个选择框时，另一个会消失，当我单击另一个时，前一个会消失。

是否可以同时打开两个选择框？

如果它需要javascript来做，我很好。

这是我希望保持打开状态的两个框，是否可以阻止某些事件或任何事情？

![例如](../Images/9251b9d26f9b8274dc3d0166cde4376d.png) 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T11:20:29.760

@xiankai：是的，我已经考虑过使用列表视图，然后指示这将/可能是一个组合框。这是我的修改工作。

![在此处输入图像描述](../Images/06c1a7d211e6ebf5621658f2535c824b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T10:36:19.813

如果您的选择框没有很多元素，您是否考虑改用列表框视图？只需添加`multiple`到您的`<select>`元素。`size`此外，您可以使用属性指定选择框的高度。

# php - 用户使用他的 Facebook 帐户登录后如何设置会话？

> ID：11069573
> 
> 赞同：0
> 
> 时间：2012-06-17T07:13:57.887
> 
> 标签：php, facebook

我在一个网站上工作，我对 php 和一般编程很陌生。我设法登录了用户，并且可以通过以下方式从网页中的任何位置访问我的用户数据：

```
 if (logged_in() === true){
   global $user_data;
$session_user_id = $_SESSION['user_id'];
$user_data = user_data($session_user_id,'username', 'id', 'password', 'first_name',          'last_name', 'email', 'imagename');

    if (user_active($user_data['username']) === false) {
session_destroy();
header ('Location: logout.php' );

}

}
   $errors = array();
    ?> 
```

希望到目前为止很清楚。现在，我还设法使用他的 Facebook 帐户注册了我的用户。fbfunctions.php：

```
require 'include.php';
function retrieve_fields($sf) {
return json_encode($sf);
}

function verify_fields($f,$sf) {
$fields = json_encode($sf);
return (strcmp($fields,$f) === 0);
 }

 function register_fbuser($resp) {
extract($resp["registration"],EXTR_PREFIX_ALL, "fb");

// prepare values
$fb_id = mysql_real_escape_string($resp["user_id"]);
$fb_birthday = date("Y-m-d" , strtotime($fb_birthday));
$fb_name = mysql_real_escape_string($fb_name);
$fb_first_name = mysql_real_escape_string($fb_first_name);
$fb_last_name = mysql_real_escape_string($fb_last_name);

$fb_username = mysql_real_escape_string($fb_username);

$fb_location = mysql_real_escape_string($fb_location["name"]);

$query_str = "INSERT INTO users(oauth_provider, oauth_uid, username, first_name,     last_name, gender, birthday, location , email, imagename) VALUES ('facebook','$fb_id','$fb_name','$fb_first_name','$fb_last_name','$fb_gender', '$fb_birthday', '$fb_location','$fb_email','". $fb_id .".jpg')" or die(mysql_error());

mysql_query($query_str);
 $imageData = file_get_contents("https://graph.facebook.com/" . $fb_id ."/picture");
file_put_contents("upload_img/" . $fb_id . ".jpg", $imageData);
}

  function check_registration($fb, $fb_fields) {
   if ($_REQUEST) {
    $response = $fb->getSignedRequest();
    if ($response && isset($response["registration_metadata"]["fields"])) {
        $verified = verify_fields($response["registration_metadata"]["fields"],    $fb_fields);

        if (!$verified) { // fields don't match!
            header("location: bad.php");
        } else { // we verifieds the fields, insert the Data to the DB
            $GLOBALS['congratulations'] = TRUE;
            register_fbuser($response);
        }
    }
    }
   } 
```

所以现在我的所有用户数据都在 sql 数据库中，用户图片在一个文件夹中。我想使用例如`user_data['first_name']`而不是使用 Facebook 图形 api访问用户数据，`user_profile['first_name']`因为我已经从 Facebook 获取了我需要的所有内容。有没有办法验证用户是否使用 Facebook 登录然后设置会话以便我可以简单地使用我的功能`logged_in()`？我知道要处理很多代码，您可能会在翻译中迷失方向，但我真的很困惑。

# javascript - javascript循环变量替换

> ID：11069575
> 
> 赞同：0
> 
> 时间：2012-06-17T07:14:30.323
> 
> 标签：javascript, variables, loops

我需要在循环块中使用 javascript 循环变量 i 。

```
 for (i=0; i<=4; i++)
        {
            status=!status; 
            document.Form_Users.DefaultUser1_UserName.disabled = status;
            document.Form_Users.DefaultUser1_Password.disabled = status;
        } 
```

我需要的是：

```
 document.Form_Users.DefaultUser{i}_UserName.disabled = status; 
```

即，我可以将 i insted 的值替换为 1。

我提前感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:17:08.897

试试这个：

```
for (i=1; i<5; i++)
    {
        status=!status; 
        document.Form_Users['DefaultUser'+i+'_UserName'].disabled = status;
        document.Form_Users['DefaultUser'+i+'_Password'].disabled = status;
    } 
```

循环从 1 开始，在 4 之后结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T07:16:40.457

你试过了吗

```
document.Form_Users["DefaultUser"+i+"_UserName"]["disabled"] = status; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T07:17:33.193

你可以这样做：

```
document.Form_Users["DefaultUser" + i + "_UserName"].disabled = status;
document.Form_Users["DefaultUser" + i + "_Password"].disabled = status; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T07:31:15.273

建议：

给他们都一样的名字
`DefaultUser_UserName[]`
`DefaultUser_Password[]`

然后你可以查看 document.Form_Users["DefaultUser_UserName[]"]

如果你在后端使用 PHP，你甚至可以免费获得数组

```
function enable_text(status)
  var defaultUsers = document.Form_Users["DefaultUser_UserName[]"];
  var defaultUsers = document.Form_Users["DefaultUser_Password[]"];
  status=!status; 
  for (var i=0, n=defaultUsers.length; i<n; i++) {
    defaultUsers[i].disabled = status;
    defaultPass[i].disabled = status;
  }
} 
```

# c - 如何将应用程序变成内核模式运行代码？

> ID：11069589
> 
> 赞同：0
> 
> 时间：2012-06-17T07:16:57.960
> 
> 标签：c, windows, operating-system, windows-kernel

我有一个 C 应用程序，它可以确定笔记本电脑的电源何时开/关。只有当我打开这个 .exe 文件时它才有效

有没有办法让它在内核模式下工作？这意味着我不想运行.exe，而只是打开笔记本电脑并在电量不足时收到有关电量的消息。

这是我的 .exe ：

```
#include <windows.h>

const char g_szClassName[] = "myWindowClass";

 // Step 4: the Window Procedure
 LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
short x ;

SYSTEM_POWER_STATUS status; 

switch(msg)
{
case WM_CLOSE:
    DestroyWindow(hwnd);
    break;
case WM_DESTROY:
    PostQuitMessage(0);
    break;

case WM_POWERBROADCAST:
                switch (wParam)
                    {
                        case PBT_APMPOWERSTATUSCHANGE :
                            x = GetSystemPowerStatus(&status);
                            if (x > 0) // function succeeded
                                {
                                    if (status.ACLineStatus == 1)
                                    {
                                        printf("power is off");
                                        MessageBox(NULL, "power is on" , "NOTICE" ,MB_OK );
                                    }
                                    else if (status.ACLineStatus == 0)
                                    {
                                        printf("power is on");
                                        MessageBox(NULL, "power is off" , "NOTICE" ,MB_OK );
                                    }
                                    else
                                    {
                                        printf("unknown");
                                        MessageBox(NULL, "unknown status" , "ERROR" ,MB_OK);
                                    }
                                }
                            else
                                {
                                LPSTR str = "function failed in providing information";
                                MessageBox(NULL , str, "ERROR", MB_OK);
                                }
                            break;
                        case PBT_POWERSETTINGCHANGE:
                            x = GetSystemPowerStatus(&status);
                            if (x > 0) // function succeeded
                            {
                                if (status.ACLineStatus == 1)
                                {
                                    printf("power is off");
                                    MessageBox(NULL, "power is on" , "NOTICE" ,MB_OK );
                                }
                                else if (status.ACLineStatus == 0)
                                {
                                    printf("power is on");
                                    MessageBox(NULL, "power is off" , "NOTICE" ,MB_OK );
                                }
                                else
                                {
                                    printf("unknown");
                                    MessageBox(NULL, "unknown status" , "ERROR" ,MB_OK);
                                }
                            }

                            break;
                        default:
                            MessageBox ( NULL , "nothing" , "------" , MB_OK);
                    }
                break;
case WM_MOUSEMOVE:
    if (wParam == MK_LBUTTON)
        MessageBox(NULL, "mouse was clicked", "check", MB_OK);
    break;
default:
    return DefWindowProc(hwnd, msg, wParam, lParam);
}
return 0;
}

 int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
LPSTR lpCmdLine, int nCmdShow)
 {
WNDCLASSEX wc;
HWND hwnd;
MSG Msg;
HPOWERNOTIFY notification_1;

//Step 1: Registering the Window Class
wc.cbSize        = sizeof(WNDCLASSEX);
wc.style         = 0;
wc.lpfnWndProc   = WndProc;  //signing to the updating service of the operating system
wc.cbClsExtra    = 0;
wc.cbWndExtra    = 0;
wc.hInstance     = hInstance;
wc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
wc.lpszMenuName  = NULL;
wc.lpszClassName = g_szClassName;
wc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);

if(!RegisterClassEx(&wc))
{
    MessageBox(NULL, "Window Registration Failed!", "Error!",
        MB_ICONEXCLAMATION | MB_OK);
    return 0;
}

// Step 2: Creating the Window
hwnd = CreateWindowEx(
    WS_EX_CLIENTEDGE,
    g_szClassName,
    "The title of my window",
    WS_OVERLAPPEDWINDOW,
    CW_USEDEFAULT, CW_USEDEFAULT, 240, 120,
    NULL, NULL, hInstance, NULL);

if(!hwnd)
{
    MessageBox(NULL, "Window Creation Failed!", "Error!",
        MB_ICONEXCLAMATION | MB_OK);
    return 0;
}

notification_1 = RegisterPowerSettingNotification(hwnd, &GUID_ACDC_POWER_SOURCE, DEVICE_NOTIFY_WINDOW_HANDLE);

ShowWindow(hwnd, nCmdShow);
UpdateWindow(hwnd);

// Step 3: The Message Loop
while(GetMessage(&Msg, NULL, 0, 0) > 0)
{
    TranslateMessage(&Msg);
    DispatchMessage(&Msg);
}

return Msg.wParam;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T07:37:28.780

我不明白你为什么要在内核模式下运行这段代码......作为服务运行还不够吗？

您应该将您的程序打包为 Windows 服务，然后在您的系统上安装该服务。无需进入内核级别。

# frameworks - 模块化应用程序中的 Windows Workflow Foundation

> ID：11069596
> 
> 赞同：0
> 
> 时间：2012-06-17T07:17:57.290
> 
> 标签：frameworks, workflow, workflow-foundation-4, modularity

我有一个关于 WWF 的问题，我正在开发一个基于网络的 ERP 项目，它是一个模块化的应用程序。我正在寻找一种在 framwrok 中为 wokflows 创建引擎的方法，以便模块可以依赖它并基于此引擎创建它们的工作流。我认为应该有 3 种工作流（用于在组织中确认信息的人, 用于处理业务流程的业务，例如根据不同因素计算人员收入，以及用于处理基于 cartable（仪表板）的用户控件链的 UI 工作流程）我需要一些帮助来处理这个问题，如果我的洞察力有任何问题，我想知道被告知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:24:05.973

这是非常广泛的，没有更多的背景很难回答。

WorkFlow 可以与例如 SharePoint 结合使用，以处理工作流的人工部分，例如创建文档或将其标记为 OK。

WF 可以部署为服务并支持与其他（Web）服务的交互以支持模块化。

# c# - Linq，如何使用子查询？

> ID：11069602
> 
> 赞同：2
> 
> 时间：2012-06-17T07:19:38.473
> 
> 标签：c#, asp.net, linq

下面的 linq 查询不起作用，因为子查询行。

如果注释子查询行并运行，它工作正常。

我真的不知道如何运行该子查询。

有知道的请指教~

```
var result = (from p in productInQuery
      join o in orderInfoQuery on p.refNo equals o.refNo
      join t in productOutQuery on p.no equals t.productInNo into productIn
      from t in productIn.DefaultIfEmpty()
      orderby o.processDate descending
      select new
      {
          modelNo = x.modelNo,
          qty = p.qty,
          dateIn = o.processDate,
          dateOut = (DateTime?) (from m in orderInfoQuery where m.refNo == t.refNo select m.processDate).FirstOrDefault(), //without this line, it works fine.
      });

return Json(result.ToArray()); // error : Input string was not in a correct format. 
```

谢谢！

笔记，

**from m in orderInfoQuery where m.refNo == t.refNo select m.processDate)**

它可能返回null。（无记录）

[编辑]

我试过 ，

```
let dateOut = (Nullable<DateTime>)(from m in orderInfoQuery where m.refNo == t.refNo select m.processDate).FirstOrDefault() 
```

和

```
dateOut = (DateTime?) (from m in orderInfoQuery where m.refNo == t.refNo select m.processDate).FirstOrDefault() 
```

但两种方式都行不通...

上的错误信息，

```
Line 206:            return Json(result.ToArray()); 
```

.

```
Stack Trace:

[FormatException: Input string was not in a correct format.]
   System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal) +9594411
   System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info) +119
   System.Int32.Parse(String s) +23
   MySql.Data.Types.MySqlDateTime.ParseMySql(String s) +476
   MySql.Data.Types.MySqlDateTime.Parse(String s) +89
   MySql.Data.MySqlClient.MySqlDataReader.GetDateTime(Int32 i) +186
   MySql.Data.Entity.EFMySqlDataReader.GetDateTime(Int32 ordinal) +53

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner) +0
   System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner) +72
   System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks) +251
   System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) +28
   System.Data.Common.Internal.Materialization.ErrorHandlingValueReader`1.GetValue(DbDataReader reader, Int32 ordinal) +284
   lambda_method(Closure , Shaper ) +652
   System.Data.Common.Internal.Materialization.Coordinator`1.ReadNextElement(Shaper shaper) +170
   System.Data.Common.Internal.Materialization.SimpleEnumerator.MoveNext() +84
   System.Linq.Buffer`1..ctor(IEnumerable`1 source) +217
   System.Linq.Enumerable.ToArray(IEnumerable`1 source) +78
   BseWms.WebUI.Controllers.ReportsController.GetAllTransaction(Int32 selectedCompanyCode, String modelNo, Nullable`1 transactionTo, Nullable`1 transactionFrom) in C:\Users\mark\Documents\Visual Studio 2010\Projects\BseWms\BseWms.WebUI\Controllers\ReportsController.cs:206
   lambda_method(Closure , ControllerBase , Object[] ) +259
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8836977
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T07:46:30.600

您可以使用`let`关键字来限定包含子查询结果的变量。但是，它是否可以理解命令取决于 LINQ 提供程序（我开始怀疑可能是这种情况）。

```
var result = (from p in productInQuery
      join o in orderInfoQuery on p.refNo equals o.refNo
      join t in productOutQuery on p.no equals t.productInNo into productIn
      from t in productIn.DefaultIfEmpty()
      let dateOut = (from m in orderInfoQuery where m.refNo == t.refNo select m.processData).FirstOrDefault()
      orderby o.processDate descending
      select new
      {
          modelNo = x.modelNo,
          qty = p.qty,
          dateIn = o.processDate,
          dateOut = dateOut
      }); 
```

# visual-c++ - 更改文件名时，Recording Start 会延迟 3 秒。

> ID：11069603
> 
> 赞同：0
> 
> 时间：2012-06-17T07:19:52.790
> 
> 标签：visual-c++, directshow

在图中使用两个 ASFWriter 过滤器。一个用于制作 wmv 文件，Anather 用于实时流式传输。

进行流式传输，更改文件名时，Recording Start 会延迟 3 秒。所以，一个新的WMV的头不见了。它很困扰。

CAMERA ------ InfTee 过滤器 --- --- AsfWriter 过滤器 → WMV 文件

```
 X 
```

麦克风 --- InfTee Filter2 --- --- AsfWriter Filter2 → 直播

```
void RecStart()
{
        ...

    ConnectFilters(pInfTee,"Infinite Pin Tee Filter(1)",L"Output1",pASFWriter,"ASFWriter",L"Video Input 01"));
    ConnectFilters(pInfTee,"Infinite Pin Tee Filter(2)",L"Output2",pASFWriter2,"ASFWriter",L"Video Input 01"));
    ConnectFilters(pSrcAudio,"Audio Source",L"Capture",pInfTee2,"Infinite Pin Tee Filter",L"Input"));
    ConnectFilters(pInfTee2,"Infinite Pin Tee Filter(1)A",L"Output1",pASFWriter,"ASFWriter",L"Audio Input 01"));
    ConnectFilters(pInfTee2,"Infinite Pin Tee Filter(2)A",L"Output2",pASFWriter2,"ASFWriter",L"Audio Input 01"));

    pASFWriter2->QueryInterface(IID_IConfigAsfWriter,(void**)&pConfig);

    pConfig->QueryInterface(IID_IServiceProvider,(void**)&pProvider);

    pProvider->QueryService(IID_IWMWriterAdvanced2, IID_IWMWriterAdvanced2, (void**)&mpWriter2);

    mpWriter2->SetLiveSource(TRUE);

    mpWriter2->RemoveSink(0);

    WMCreateWriterNetworkSink(&mpNetSink);

    DWORD dwPort = (DWORD)streamingPortNo;
    mpNetSink->Open(&dwPort);

    mpNetSink->GetHostURL(url, &url_len);

    hr =mpWriter2->AddSink(mpNetSink);

    pGraph->QueryInterface(IID_IMediaEventEx,(void **)&pMediaIvent);

    pMediaIvent->SetNotifyWindow((OAHWND)this->m_hWnd,WM_GRAPHNOTIFY,0);

    pGraph->QueryInterface(IID_IMediaControl,(void **)&pMediaControl);

    pMediaControl->Run();
}

void OnTimer()
{

    pMediaControl->Stop();

    CComQIPtr<IFileSinkFilter,&IID_IFileSinkFilter> pIFS = pASFWriter;
    pIFS->SetFileName(NewFilename,NULL);

    pMediaControl->Run();
}

---------------------------------------------------------------------------
→ I think ... In order to wait for starting of streaming, 
it is missing for 3 seconds in head of New WMV File.
Are there any measures? 
--------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:26:16.880

当你重新启动图表时，由于初始化开销，你不可避免地会错过一个数据片段。而且，在不停止图形的情况下切换文件是不可能的。解决方案是使用多个图形并在重新初始化具有文件写入的部分时继续捕获。

有关解决此问题的典型解决方案，请参阅[DirectShow Bridges](http://www.gdcl.co.uk/gmfbridge/)。

# c++ - 从工厂函数就地初始化不可复制的成员（或其他对象）

> ID：11069605
> 
> 赞同：21
> 
> 时间：2012-06-17T07:20:07.927
> 
> 标签：c++, c++11, initialization, copy-elision

一个类必须有一个有效的复制或移动构造函数，这样的任何语法都是合法的：

```
C x = factory();
C y( factory() );
C z{ factory() }; 
```

在 C++03 中，依靠复制省略来防止编译器接触复制构造函数是相当普遍的。无论定义是否存在，每个类都有一个有效的复制构造函数*签名。*

在 C++11 中，一个不可复制的类型应该定义`C( C const & ) = delete;`，无论使用如何，都会使对该函数的任何引用无效（对于不可移动的类型也是如此）。（C++11 §8.4.3/2）。一方面，GCC 在尝试按值返回这样的对象时会抱怨。复制省略不再有帮助。

幸运的是，我们还有新的语法来表达意图，而不是依赖漏洞。该`factory`函数可以返回一个*花括号初始化列表*来临时就地构造结果：

```
C factory() {
    return { arg1, 2, "arg3" }; // calls C::C( whatever ), no copy
} 
```

* * *

**编辑：**如果有任何疑问，此`return`语句解析如下：

1.  6.6.3/2：“带有花括号初始化列表的返回语句通过指定初始化列表中的复制列表初始化 (8.5.4) 初始化要从函数返回的对象或引用。”
2.  8.5.4/1：“复制初始化上下文中的列表初始化称为复制列表初始化。” ¶3：“如果 T 是类类型，则考虑构造函数。枚举适用的构造函数，并通过重载决议（13.3、13.3.1.7）选择最佳构造函数。”

不要被名称*copy-list-initialization*误导。8.5：

> 13：初始化的形式（使用括号或`=`）通常是无关紧要的，但当初始化器或被初始化的实体具有类类型时，它就很重要；见下文。如果被初始化的实体没有类类型，则带括号的初始化器中的表达式列表应为单个表达式。
> 
> 14：在表单 `T x = a;` 以及参数传递、函数返回、抛出异常（15.1）、处理异常（15.3）和聚合成员初始化（8.5.1）中发生*的初始化称为复制初始化。*

当初始化器是花括号初始化列表时，复制初始化及其替代方法*直接初始化*始终遵循列表初始化。添加 没有语义影响`=`，这是列表初始化被非正式地称为统一初始化的原因之一。

有区别：与复制初始化不同，直接初始化可能会调用显式构造函数。复制初始化初始化一个临时对象，并在转换时将其复制以初始化对象。

语句的*复制列表初始化*规范`return { list }`仅指定精确等效语法为`temp T = { list };`，其中`=`表示复制初始化。它并不立即暗示调用了复制构造函数。

**-- 结束编辑。**

* * *

然后可以将函数结果接收到右值引用中，以防止将临时复制到本地：

```
C && x = factory(); // applies to other initialization syntax 
```

* * *

问题是，如何从返回不可复制、不可移动类型的工厂函数初始化非静态成员？引用技巧不起作用，因为引用成员不会延长临时成员的生命周期。

请注意，我不考虑聚合初始化。这是关于定义一个构造函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:42:38.203

关于你的主要问题：

> 问题是，如何从返回不可复制、不可移动类型的工厂函数初始化非静态成员？

你没有。

您的问题是您试图将两件事混为一谈：如何生成返回值以及如何在调用站点*使用返回值。*这两件事没有相互联系。请记住：函数的定义不会影响它的使用方式（就语言而言），因为该定义不一定对编译器可用。因此，C++ 不允许生成返回值的方式影响任何事情（除了省略，这是一种优化，而不是语言要求）。

换句话说，这个：

```
C c = {...}; 
```

与此不同：

```
C c = [&]() -> C {return {...};}() 
```

您有一个按值返回类型的函数。它返回一个 prvalue 类型的表达式`C`。如果你想存储这个值，从而给它一个名字，你有两个选择：

1.  将其存储为`const&`or `&&`。这会将临时的生命周期延长到控制块的生命周期。你不能用成员变量来做到这一点；它只能通过函数中的自动变量来完成。

2.  将其复制/移动到一个值中。您可以使用成员变量来执行此操作，但显然它要求类型是可复制或可移动的。

如果您想存储纯右值表达式，这些是 C++ 提供给您的唯一选项。因此，您可以使类型可移动或返回一个新分配的指向内存的指针并存储它而不是一个值。

这种限制是最初创建移动的很大一部分原因：能够按价值传递事物并避免昂贵的副本。无法更改语言以强制省略返回值。因此，他们在许多情况下降低了成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-18T01:48:24.183

此类问题是[C++17 更改](http://en.cppreference.com/w/cpp/language/copy_elision)以允许这些初始化（并从语言中排除副本，而不仅仅是作为优化）的[主要动机](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0135r0.html)之一。

# java - Java：创建一个以字母字符为索引的数组

> ID：11069609
> 
> 赞同：9
> 
> 时间：2012-06-17T07:22:01.903
> 
> 标签：java, arrays, indexing

是否可以在Java中创建一个由字母字符（'a'到'z'）而不是整数索引的数组？

有了这样一个数组“a”，我想以这种方式使用它，例如

```
print (a['a']); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T09:19:43.580

> 是否可以在Java中创建一个由字母字符（'a'到'z'）而不是整数索引的数组？

当然这是可能的。
你可以这样做：

```
char theChar = 'x';  
print (a[theChar - 'a']); 
```

或假设仅处理 ASCII 字符串只需声明大小为 256 的数组。使用您的字符直接索引数组。

```
char[] a = new char[256];   
char theChar = 'x';  
print (a[theChar]); 
```

现在你不在乎它是大写/小写还是什么。
实际上，如果您**对 ASCII 字符串特别**感兴趣，那么与简单的数组相比，使用 a`Map`可能有点过分了。该数组不会浪费太多空间，`Map`对于这样一个简单的任务来说（一个非常有效的构造）可能太多了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-17T07:27:57.157

改用 a `Map`。

```
Map<Character, Object> myMap = new HashMap<Character, Object>();
myMap.put('a', something);

print(myMap.get('a')); 
```

另一方面，正如其他人已经建议的那样，您可以使用 char 作为索引（但您会将所有数组元素`0...'a'-1`留空）：

```
String[] a = new String['z' + 1];
a['a'] = "Hello World";
System.out.println(a['a']); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-03T10:13:51.017

您可以创建一个包含 26 个元素的数组，并始终`'a'`从您的 char 索引中减去：

```
int[] array = new int[26];
array['a'-'a']=0;
array['b'-'a']=1;
\\ etc... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-17T07:30:24.340

像这样简单的事情呢？

```
public static int getLetterValue(char letter) {
    return (int) Character.toUpperCase(letter) - 64;
} 
```

并像这样使用它：

```
System.out.println(a[getLetterValue('a')); 
```

就目前而言，这将非常失败。您将需要检查它是否在范围内等。

或者，您可以实现 Java List 接口并覆盖 .get 和 .add 方法，以便它们可以使用字符。但这让我想到了下一点。

最好使用能够更好地处理异常并且专为此类用例设计的数据结构。[地图](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)是更好的选择。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-17T07:31:57.720

是和不是。是的，因为你可以做到并且它会编译。试试下面的代码：

```
class foo {
    public static void main(String[] args) throws Exception {
        int a[] = new int[100];
        a['a'] = '1';
        System.out.printf("%d\n", a['a']);
    }
} 
```

不，因为字符将被隐式转换为整数，这听起来不像您正在寻找的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-17T07:50:34.463

您正在寻找的数据结构`Map`在 Java 领域中被调用。

这种数据结构有多种名称，例如 PHP 中的关联数组；C#、Python 中的字典；Ruby 等中的哈希会导致这种混乱。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-05T05:44:16.360

你可以做这样的事情： - 例如：

```
char[] a = new char[]{'s','t'};
int[] result = new int[256];
result[a[0]]= 100;
System.out.println(result['s']);//will print 100 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-17T07:27:06.203

不，你不能那样做。在这种情况下，您应该`Map`改用。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-06-17T07:28:07.163

我认为这是一个重复的问题！请参阅[Java 可以使用 String 作为索引数组键吗？（例如：数组[“a”]=1;）](https://stackoverflow.com/questions/6943588/can-java-use-string-as-an-index-array-key-ex-arraya-1)。

您应该使用映射将字母映射到值并调用 get 来获取值。

# qt - 如何按型号 设置 QTableView 列的宽度？

> ID：11069611
> 
> 赞同：4
> 
> 时间：2012-06-17T07:23:07.193
> 
> 标签：qt, qt4, qtableview, model-view

我正在使用`QTableView`一个子类`QAbstractTableModel`作为它的模型。通过实现`data()`和`headerdata()`在子类模型中，可以控制表的许多属性，如数据、标题值、字体等。

就我而言，我希望模型设置每个表格列的宽度。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T10:32:11.530

有两种方法：

1.  在模型的数据方法中，您可以返回角色 SizeHintRole。

2.  更好的方法是子类`QItemDelegate`化并覆盖该方法。

见这里 ( [qitemdelegate.html#sizeHint](http://qt-project.org/doc/qt-4.8/qitemdelegate.html#sizeHint) )

**例子 -**

```
QSize ItemDelegate::sizeHint( const QStyleOptionViewItem & option, const QModelIndex & index ) const
{
    QSize sz;

    if(index.column()==2)
    {
        return QSize(128, option.rect().height());
    }

    return QSize();
} 
```

在这里，我将第 2 列的宽度设置为 128 像素，并从`QStyleOptionViewItem`.

# php - PHP 中的目录引擎用于托管该目录中的文件

> ID：11069613
> 
> 赞同：-1
> 
> 时间：2012-06-17T07:23:17.957
> 
> 标签：php, directory

我正在寻找一种目录引擎（最好在 PHP 中），它允许将该目录中的文件提供给客户端。该目录可能包含不同类型的文件。可以使用子目录在层次结构中组织文件。

我正在寻找的解决方案应该能够从这样的目录结构构建一个视图，其中包含指向文件、文件描述、自定义缩略图的可下载链接。缩略图可以手动分配给文件和目录，它们不应该自动生成。子目录被视为类别，因此它应该允许在它们之间进行某种导航。

视图应该是高度可定制的，允许更改布局和外观。我喜欢信息在以下页面的呈现方式：http: [//www.doctohelp.com/SuperProducts/ChartWinForms/Chart+Types/](http://www.doctohelp.com/SuperProducts/ChartWinForms/Chart+Types/)

我搜索了网络，但目前没有找到任何合适的解决方案。大多数平面文件管理器不支持元数据或缺乏自定义。

有人知道这样的事情吗？我将感谢任何指向已经存在的解决方案的链接或一些关于可以构建解决方案的组件的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:43:59.073

看看[http://gallery.sf.net](http://gallery.sf.net)

它是 php 中的图像库，但可用于任何类型的文件。图库不会直接使用您的目录结构，但您可以例如从服务器上传。图库是高度可扩展的，您可以自定义视图。

[http://codex.gallery2.org/Category:Gallery_3:Modules](http://codex.gallery2.org/Category:Gallery_3:Modules)

使用本机目录视图（几乎所有网络服务器都附带），您将没有文件描述或缩略图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T09:17:01.430

我会投票给[ResourceSpace](http://www.resourcespace.org/)。我还没有使用它，但正在考虑将它集成到我的一个项目中。它似乎具有元数据，具有可自定义的外观和感觉，并包含许多文件类型的预览器。

# java - php "无法修改标头信息 - 标头已发送"

> ID：11069614
> 
> 赞同：-2
> 
> 时间：2012-06-17T07:23:34.787
> 
> 标签：java, php, file-upload

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我正在尝试从 Java 应用程序上传二进制文件并通过服务器端的 php 脚本处理它。

但是当我在 Eclipse (for Java) 中运行代码时，它会显示以下日志。

虽然我在第一行发送标题信息，但为什么会显示此消息。

这是我的php代码：

```
<?php
header('Content-type: application/xml');

/*******************************************/
$DIRECTORY_SEPARATOR = "/";
$BUF_SIZE = 4096;

/*******************************************/
uploadFile();
sendResponse();

/*******************************************/
function uploadFile()
{
    global $DIRECTORY_SEPARATOR;
    global $BUF_SIZE;
    $targetDir = "." . $DIRECTORY_SEPARATOR . "uploaded_file";

    /***************************************/
    // 5 minutes execution time
    @set_time_limit(5 * 60);

    /***************************************/
    // Set filename
    $filename="temp_aa.mp3";

    /***************************************/
    if (!file_exists($targetDir))
    {
        mkdir($targetDir,0777,true);
    }

    /***************************************/
    $out = fopen($targetDir . DIRECTORY_SEPARATOR . $fileName, $chunk == 0 ? "wb" : "ab");
    if ($out) 
    {
        $in = fopen("php://input", "rb");
        if ($in) 
        {
            while ($buff = fread($in, $BUF_SIZE))
            {
                fwrite($out, $buff);
            }

            fclose($in);
        } 
        else
        {
            fclose($out);
            return ;
        }
    } 
    else
    {
        return ;
    }
}

function sendResponse()
{
    echo "
    <?xml version=\"1.0\" encoding=\"UTF-8\"?>
    <data>
      <status type=\"file_upload\">
            <value>ok</value>
      </status>
    </data>
    ";
} 
```

?>

这是我的 Java 端代码：

```
import java.io.BufferedInputStream;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.URL;

public class TestHttp 
{
    public static void main(String[] args)
    {
        HttpURLConnection httpUrlConnection = null;
        File mFileToUpload = new File("c:/aa.mp3");
        int byteTrasferred = 0, mBufferSize = 4096, mTempBytesRead = 0;
        byte[] mBuffer = new byte[mBufferSize];

        try
        {
            httpUrlConnection = (HttpURLConnection)new URL("http://127.0.0.1/testhttpfileupload3.php").openConnection();
            httpUrlConnection.setDoOutput(true);
            httpUrlConnection.setRequestMethod("POST");
            OutputStream os = httpUrlConnection.getOutputStream();
            Thread.sleep(1000);
            BufferedInputStream fis = new BufferedInputStream(new FileInputStream(mFileToUpload));

            while((mTempBytesRead = fis.read(mBuffer)) != -1) 
            {
                os.write(mBuffer, 0, mTempBytesRead);

                byteTrasferred += mTempBytesRead;
                System.out.println("byteTrasferred = " + byteTrasferred);
            }

            fis.close();
            os.close();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

        try
        {
            BufferedReader in = new BufferedReader(new InputStreamReader(httpUrlConnection.getInputStream()));

            String s = null;
            while ((s = in.readLine()) != null) 
            {
                System.out.println(s);
            }
            in.close();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
} 
```

这是错误日志：

字节传输 = 8802304

byte Transferred = 8804659
**警告**：未知：POST Content-Length of 8804659 bytes 超出第**0**行**未知中 8388608 字节的限制****警告**：无法修改标头信息 - 标头已在第**0**行**未知中发送****警告**：无法修改标头信息 - 标头已在第**2**行的 C: **\** wamp\www\testhttpfileupload3.php 中发送**注意**：未定义的变量：第**34**行的**C:\wamp\www\testhttpfileupload3.php中的文件名****注意**：未定义的变量：**C:\wamp\www\testhttpfileupload3中的块****.php**在第**34行** ****************************警告**：fopen(./uploaded_file) [function.fopen]：无法打开流：第**34**行的**C:\wamp\www\testhttpfileupload3.php中没有这样的文件或目录****************************

 ******```
 <?xml version="1.0" encoding="UTF-8"?>
    <data>
      <status type="file_upload">
            <value>ok</value>
      </status>
    </data> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T07:28:53.723

看起来您遇到了 PHP 启动错误，该错误在假想的第 0 行输出（在执行任何代码之前）。

警告`Unknown: POST Content-Length of 8804659 bytes exceeds the limit of 8388608 bytes in Unknown on line 0`在调用之前被输出，`header`因此它阻止了它的工作。

您需要增加最大允许大小、使用隐藏`MAX_FILE_SIZE`输入字段^([1](http://us3.php.net/manual/en/features.file-upload.post-method.php))或禁用`php.ini`(display_startup_errors) 中的启动错误。在生产中，无论如何都应该关闭错误显示。但主要问题是您正在尝试上传大于 PHP 设置允许的文件，因此即使没有该错误，文件上传也会不完整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:28:38.223

写出的警告消息会导致发送初始 http 标头。您之后给出的标头命令不再起作用，因为您已经输出了该警告。

解决方案是更改帖子上传限制，或`display_errors`禁用`php.ini`******

# c - 缓冲区溢出的困境

> ID：11069615
> 
> 赞同：6
> 
> 时间：2012-06-17T07:23:43.857
> 
> 标签：c, assembly, buffer-overflow

我正在玩一个堆栈溢出示例。此示例如下所示：

```
 void return_input (void){ 
    char array[30];    
    gets (array); 
    printf("%s\n", array); 

 }

 main() { 
    return_input();    
    return 0;    
 } 
```

所有这些代码都在名为overflow.c 的文件中。我们有一个名为**return_input**的易受攻击的函数，特别是它是 30 字节的 char 数组。我编译它并在**gdb**中打开易受攻击的函数并得到以下输出：

```
 (gdb) disas return_input
 0x08048464 <+0>:   push   %ebp
 0x08048465 <+1>:   mov    %esp,%ebp
 0x08048467 <+3>:   sub    $0x48,%esp
 0x0804846a <+6>:   mov    %gs:0x14,%eax
 0x08048470 <+12>:  mov    %eax,-0xc(%ebp)
 0x08048473 <+15>:  xor    %eax,%eax
 0x08048475 <+17>:  lea    -0x2a(%ebp),%eax
 0x08048478 <+20>:  mov    %eax,(%esp)
 0x0804847b <+23>:  call   0x8048360 <gets@plt>
 0x08048480 <+28>:  lea    -0x2a(%ebp),%eax
 0x08048483 <+31>:  mov    %eax,(%esp)
 0x08048486 <+34>:  call   0x8048380 <puts@plt>
 0x0804848b <+39>:  mov    -0xc(%ebp),%eax
 0x0804848e <+42>:  xor    %gs:0x14,%eax
 0x08048495 <+49>:  je     0x804849c <return_input+56>
 0x08048497 <+51>:  call   0x8048370 <__stack_chk_fail@plt>
 0x0804849c <+56>:  leave  
 0x0804849d <+57>:  ret    
 End of assembler dump. 
```

正如您从函数序言中看到的，我们在堆栈上为局部变量保留了 hex48(dec 72) 字节。首先，我试图找到易受攻击的数组在堆栈上的起始地址。我认为是-0x2a(%ebp)，对吗？Hex2a 是十进制的 42。据我了解，这意味着我们可以在开始覆盖堆栈中保存的 EBP 之前安全地写入 42 个字节。但是当我运行这个例子时，只需要正确的 37 个字节就可以得到分段错误：

```
rustam@rustam-laptop:~/temp/ELF_reader$ ./overflow
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
Segmentation fault (core dumped) 
```

37 字节如何足以溢出缓冲区？如果我们的本地 char 数组是保存的 EBP 的 -42 字节

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T07:51:34.337

没有看到函数的整个反汇编很难说。

但是，我的猜测是存储在 -0xc(%ebp) 的 %gs:0x14 可能是您的[堆栈金丝雀](http://en.wikipedia.org/wiki/Stack_buffer_overflow#Stack_canaries)，如果检测到堆栈损坏，它会导致干净退出。所以这个值存储在 -0xc(%ebp)，这意味着你的缓冲区实际上只有 30 个字节大，然后是后面的任何内容。

# python - Python，如何从列表列表中有效地制作嵌套字典

> ID：11069623
> 
> 赞同：2
> 
> 时间：2012-06-17T07:25:05.410
> 
> 标签：python

我有一个看起来像这样的列表列表

```
[['ip1',404],
['ip1',200],
['ip1',200],
['ip2',200],
['ip2',200],
['ip2',504]] 
```

我需要制作一个按 ip 地址计算状态码的字典。

```
results = {'ip1':{404:1,200:2},'ip2':{200:2,504:1}} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T07:39:25.610

集合中的工具可以解决这个问题：

```
>>> from collections import defaultdict, Counter
>>> d = defaultdict(Counter)
>>> for ip, code in [['ip1',404], ['ip1',200], ['ip1',200],
                     ['ip2',200], ['ip2',200], ['ip2',504]]:
        d[ip][code] += 1

>>> dict(d)
{'ip2': Counter({200: 2, 504: 1}), 'ip1': Counter({200: 2, 404: 1})} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T07:33:56.890

```
>>> from collections import defaultdict
>>> d = defaultdict(lambda: defaultdict(int))
>>> ips = [['ip1',404],['ip1',200],['ip1',200],['ip2',200],['ip2',200],['ip2',504]]
>>> for ip,num in ips:
        d[ip][num] += 1

>>> d
defaultdict(<function <lambda> at 0x00000000035D6648>, {'ip2': defaultdict(<class 'int'>, {200: 2, 504: 1}), 'ip1': defaultdict(<class 'int'>, {200: 2, 404: 1})}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T07:33:58.827

试试这个：

```
values =   [['ip1',404],
            ['ip1',200],
            ['ip1',200],
            ['ip2',200],
            ['ip2',200],
            ['ip2',504]]

counts = {}

for value in values:
    ip, status_code = value
    if ip not in counts:
        counts[ip] = {}
    if status_code not in counts[ip]:
        counts[ip][status_code] = 0
    counts[ip][status_code] += 1

{'ip2': {200: 2, 504: 1}, 'ip1': {200: 2, 404: 1}} 
```

它应该适用于几乎任何 python 版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T07:33:16.717

```
>>> l
[['ip1', 404],
 ['ip1', 200],
 ['ip1', 200],
 ['ip2', 200],
 ['ip2', 200],
 ['ip2', 504]]

>>> {ip: {code: l.count([ip, code])
...    for code in (p[1] for p in l if p[0]==ip)}
...          for ip in (p[0] for p in l)}
{'ip1': {200: 2, 404: 1}, 'ip2': {200: 2, 504: 1}} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T07:43:13.677

```
L = [[ip1,404], [ip1,200], [ip1,200], [ip2,200], [ip2,200], [ip2,504]]
D = {}

for entry in L:
    ip = entry[0]
    code = entry[1]
    ip_entry = D.get(ip, {})
    ip_entry[code] = ip_entry.get(code, 0) + 1
    D[ip] = ip_entry 
```

# mongodb - MongoDB中的映射减少

> ID：11069625
> 
> 赞同：1
> 
> 时间：2012-06-17T07:26:14.930
> 
> 标签：mongodb, mapreduce

我有这种格式的 mongo 文档。

```
{"_id" : 1,"Summary" : {...},"Examples" : [{"_id" : 353,"CategoryId" : 4},{"_id" : 239,"CategoryId" : 28}, ...  ]}
{"_id" : 2,"Summary" : {...},"Examples" : [{"_id" : 312,"CategoryId" : 2},{"_id" : 121,"CategoryId" : 12}, ...  ]} 
```

我如何映射/减少它们以获得像这样的哈希：

```
{ [ result[categoryId] : count_of_examples , .....] } 
```

即每个类别的示例计数。我总共有 30 个类别，都在 Categories 集合中指定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:49:51.457

如果你可以使用 2.1（即将发布的 2.2 的开发版），那么你可以使用[聚合框架](http://docs.mongodb.org/manual/applications/aggregation)，它看起来像这样：

```
db.collection.aggregate( [
       {$project:{"CatId":"$Examples.CategoryId","_id":0}}, 
       {$unwind:"$CatId"}, 
       {$group:{_id:"$CatId","num":{$sum:1} } },  
       {$project:{CategoryId:"$_id",NumberOfExamples:"$num",_id:0  }} 
] ); 
```

第一步将 Examples (CategoryId) 的子字段投影到文档的顶级字段中（不是必需的，但有助于提高可读性），然后展开示例数组，为 CatId 的每个数组值创建一个单独的文档，我们执行“分组依据”并计算它们（我假设 CategoryId 的每个实例都是一个示例，对吗？）最后我们再次使用投影重新标记字段并使结果如下所示：

```
"result" : [
    {
        "CategoryId" : 12,
        "NumberOfExamples" : 1
    },
    {
        "CategoryId" : 2,
        "NumberOfExamples" : 1
    },
    {
        "CategoryId" : 28,
        "NumberOfExamples" : 1
    },
    {
        "CategoryId" : 4,
        "NumberOfExamples" : 1
    }
],
"ok" : 1 
```

# node.js - 是否有一个不需要为在 *NIX 和 Windows 上工作的小项目安装的 Node.js 数据存储？

> ID：11069629
> 
> 赞同：2
> 
> 时间：2012-06-17T07:26:35.753
> 
> 标签：node-dirty, sqlite, node-dirty, node-dirty, node.js

我有一个使用[node-dirty](/questions/tagged/node-dirty "显示标记为“节点脏”的问题")的小项目，但它并不是真正用于生产用途，而且我对它有很多惊喜，所以我想切换。我正在考虑使用[sqlite](/questions/tagged/sqlite "显示标记为“sqlite”的问题")，但为它编译客户端似乎很麻烦。是否有类似[node-dirty](/questions/tagged/node-dirty "显示标记为“节点脏”的问题")的东西（即数据存储的纯 Node.js 实现），但这更适合没有超过几百组数据的小型项目。我在[node-dirty](/questions/tagged/node-dirty "显示标记为“节点脏”的问题")方面遇到了以下问题，我希望替代数据存储不会这样做：

*   保存 Date 对象使其在重新加载数据时以字符串形式出现（但在执行期间它仍然是 Date 对象）。我可以自己序列化 Date 对象，只要我得到相同的东西，它就可以让我放入它。
*   迭代数据并在同一个 forEach 循环中删除某些内容会使迭代停止。
*   我的客户报告删除的数据重新出现，我也间歇性地看到过这种情况，我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:05:50.420

你有多少数据？对于某些项目，将内容保存在内存中并通过转储包含所有数据的 JSON 文件来持久保存它们是合理的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-17T07:46:53.270

只需使用 npm 安装 NoSQL 模块，如 redis 或 mongodb。

# php - 如何从表格的一列中删除这个符号？

> ID：11069634
> 
> 赞同：0
> 
> 时间：2012-06-17T07:27:33.697
> 
> 标签：php, mysql

我在一个表中有 6000 行，其中近 2000 行有这个符号我怎么能找到和替换这个？？请帮忙..提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:33:35.140

# java - Java Netbeans libs.email.classpath 未找到警告

> ID：11069637
> 
> 赞同：0
> 
> 时间：2012-06-17T07:28:11.670
> 
> 标签：java, netbeans, compilation

在使用 Netbeans IDE 编译我的应用程序时，我收到如下警告：

```
Could not find file Y:\7th sem\2\checking\${libs.email.classpath} to copy.
BUILD FAILED 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:24:58.307

检查您在 NetBeans 项目中的类路径，不要在文件位置路径中使用空格，Java 不喜欢它。如果您使用的是 Ant，请检查您的 build.xml 文件。

# javascript - 支持内容脚本中的所有 google 域

> ID：11069644
> 
> 赞同：12
> 
> 时间：2012-06-17T07:29:54.287
> 
> 标签：javascript, google-chrome-extension, manifest, content-script

我正在制作一个对谷歌结果网页执行某些操作的内容脚本。

下面的行`manifest.json`无效。

> “匹配”：[“https://www.google.*/*”]

由于 manifest.json 中的上述行导致的错误是：

> 'content_scripts[0].matches[0]' 的值无效：主机通配符无效。

我想在 google.com、google.co.in、google.de 等各种域上运行脚本。我该如何实现？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-17T08:21:03.523

[匹配模式](https://developer.chrome.com/extensions/match_patterns.html)的 TLD 中不允许使用通配符。

谷歌已经发布[了支持的域列表](http://www.google.com/supported_domains)。每个域都放在单独的一行上，看起来像`.google.com`. 您可以使用此列表生成有效的匹配模式，例如（例如，我已将其用作`www`子域）：

```
"matches": [
    "http://www.google.com/*", "https://www.google.com/*",
    "http://www.google.ad/*", "https://www.google.ad/*",
    "http://www.google.ae/*", "https://www.google.ae/*",
    "http://www.google.com.af/*", "https://www.google.com.af/*",
    "http://www.google.com.ag/*", "https://www.google.com.ag/*",
    "http://www.google.com.ai/*", "https://www.google.com.ai/*",
    "http://www.google.am/*", "https://www.google.am/*",
    "http://www.google.co.ao/*", "https://www.google.co.ao/*",
    "http://www.google.com.ar/*", "https://www.google.com.ar/*",
    "http://www.google.as/*", "https://www.google.as/*",
    "http://www.google.at/*", "https://www.google.at/*",
    "http://www.google.com.au/*", "https://www.google.com.au/*",
    "http://www.google.az/*", "https://www.google.az/*",
    "http://www.google.ba/*", "https://www.google.ba/*",
    "http://www.google.com.bd/*", "https://www.google.com.bd/*",
    "http://www.google.be/*", "https://www.google.be/*",
    "http://www.google.bf/*", "https://www.google.bf/*",
    "http://www.google.bg/*", "https://www.google.bg/*",
    "http://www.google.com.bh/*", "https://www.google.com.bh/*",
    "http://www.google.bi/*", "https://www.google.bi/*",
    "http://www.google.bj/*", "https://www.google.bj/*",
    "http://www.google.com.bn/*", "https://www.google.com.bn/*",
    "http://www.google.com.bo/*", "https://www.google.com.bo/*",
    "http://www.google.com.br/*", "https://www.google.com.br/*",
    "http://www.google.bs/*", "https://www.google.bs/*",
    "http://www.google.co.bw/*", "https://www.google.co.bw/*",
    "http://www.google.by/*", "https://www.google.by/*",
    "http://www.google.com.bz/*", "https://www.google.com.bz/*",
    "http://www.google.ca/*", "https://www.google.ca/*",
    "http://www.google.cd/*", "https://www.google.cd/*",
    "http://www.google.cf/*", "https://www.google.cf/*",
    "http://www.google.cg/*", "https://www.google.cg/*",
    "http://www.google.ch/*", "https://www.google.ch/*",
    "http://www.google.ci/*", "https://www.google.ci/*",
    "http://www.google.co.ck/*", "https://www.google.co.ck/*",
    "http://www.google.cl/*", "https://www.google.cl/*",
    "http://www.google.cm/*", "https://www.google.cm/*",
    "http://www.google.cn/*", "https://www.google.cn/*",
    "http://www.google.com.co/*", "https://www.google.com.co/*",
    "http://www.google.co.cr/*", "https://www.google.co.cr/*",
    "http://www.google.com.cu/*", "https://www.google.com.cu/*",
    "http://www.google.cv/*", "https://www.google.cv/*",
    "http://www.google.com.cy/*", "https://www.google.com.cy/*",
    "http://www.google.cz/*", "https://www.google.cz/*",
    "http://www.google.de/*", "https://www.google.de/*",
    "http://www.google.dj/*", "https://www.google.dj/*",
    "http://www.google.dk/*", "https://www.google.dk/*",
    "http://www.google.dm/*", "https://www.google.dm/*",
    "http://www.google.com.do/*", "https://www.google.com.do/*",
    "http://www.google.dz/*", "https://www.google.dz/*",
    "http://www.google.com.ec/*", "https://www.google.com.ec/*",
    "http://www.google.ee/*", "https://www.google.ee/*",
    "http://www.google.com.eg/*", "https://www.google.com.eg/*",
    "http://www.google.es/*", "https://www.google.es/*",
    "http://www.google.com.et/*", "https://www.google.com.et/*",
    "http://www.google.fi/*", "https://www.google.fi/*",
    "http://www.google.com.fj/*", "https://www.google.com.fj/*",
    "http://www.google.fm/*", "https://www.google.fm/*",
    "http://www.google.fr/*", "https://www.google.fr/*",
    "http://www.google.ga/*", "https://www.google.ga/*",
    "http://www.google.ge/*", "https://www.google.ge/*",
    "http://www.google.gg/*", "https://www.google.gg/*",
    "http://www.google.com.gh/*", "https://www.google.com.gh/*",
    "http://www.google.com.gi/*", "https://www.google.com.gi/*",
    "http://www.google.gl/*", "https://www.google.gl/*",
    "http://www.google.gm/*", "https://www.google.gm/*",
    "http://www.google.gp/*", "https://www.google.gp/*",
    "http://www.google.gr/*", "https://www.google.gr/*",
    "http://www.google.com.gt/*", "https://www.google.com.gt/*",
    "http://www.google.gy/*", "https://www.google.gy/*",
    "http://www.google.com.hk/*", "https://www.google.com.hk/*",
    "http://www.google.hn/*", "https://www.google.hn/*",
    "http://www.google.hr/*", "https://www.google.hr/*",
    "http://www.google.ht/*", "https://www.google.ht/*",
    "http://www.google.hu/*", "https://www.google.hu/*",
    "http://www.google.co.id/*", "https://www.google.co.id/*",
    "http://www.google.ie/*", "https://www.google.ie/*",
    "http://www.google.co.il/*", "https://www.google.co.il/*",
    "http://www.google.im/*", "https://www.google.im/*",
    "http://www.google.co.in/*", "https://www.google.co.in/*",
    "http://www.google.iq/*", "https://www.google.iq/*",
    "http://www.google.is/*", "https://www.google.is/*",
    "http://www.google.it/*", "https://www.google.it/*",
    "http://www.google.je/*", "https://www.google.je/*",
    "http://www.google.com.jm/*", "https://www.google.com.jm/*",
    "http://www.google.jo/*", "https://www.google.jo/*",
    "http://www.google.co.jp/*", "https://www.google.co.jp/*",
    "http://www.google.co.ke/*", "https://www.google.co.ke/*",
    "http://www.google.com.kh/*", "https://www.google.com.kh/*",
    "http://www.google.ki/*", "https://www.google.ki/*",
    "http://www.google.kg/*", "https://www.google.kg/*",
    "http://www.google.co.kr/*", "https://www.google.co.kr/*",
    "http://www.google.com.kw/*", "https://www.google.com.kw/*",
    "http://www.google.kz/*", "https://www.google.kz/*",
    "http://www.google.la/*", "https://www.google.la/*",
    "http://www.google.com.lb/*", "https://www.google.com.lb/*",
    "http://www.google.li/*", "https://www.google.li/*",
    "http://www.google.lk/*", "https://www.google.lk/*",
    "http://www.google.co.ls/*", "https://www.google.co.ls/*",
    "http://www.google.lt/*", "https://www.google.lt/*",
    "http://www.google.lu/*", "https://www.google.lu/*",
    "http://www.google.lv/*", "https://www.google.lv/*",
    "http://www.google.com.ly/*", "https://www.google.com.ly/*",
    "http://www.google.co.ma/*", "https://www.google.co.ma/*",
    "http://www.google.md/*", "https://www.google.md/*",
    "http://www.google.me/*", "https://www.google.me/*",
    "http://www.google.mg/*", "https://www.google.mg/*",
    "http://www.google.mk/*", "https://www.google.mk/*",
    "http://www.google.ml/*", "https://www.google.ml/*",
    "http://www.google.mn/*", "https://www.google.mn/*",
    "http://www.google.ms/*", "https://www.google.ms/*",
    "http://www.google.com.mt/*", "https://www.google.com.mt/*",
    "http://www.google.mu/*", "https://www.google.mu/*",
    "http://www.google.mv/*", "https://www.google.mv/*",
    "http://www.google.mw/*", "https://www.google.mw/*",
    "http://www.google.com.mx/*", "https://www.google.com.mx/*",
    "http://www.google.com.my/*", "https://www.google.com.my/*",
    "http://www.google.co.mz/*", "https://www.google.co.mz/*",
    "http://www.google.com.na/*", "https://www.google.com.na/*",
    "http://www.google.com.nf/*", "https://www.google.com.nf/*",
    "http://www.google.com.ng/*", "https://www.google.com.ng/*",
    "http://www.google.com.ni/*", "https://www.google.com.ni/*",
    "http://www.google.ne/*", "https://www.google.ne/*",
    "http://www.google.nl/*", "https://www.google.nl/*",
    "http://www.google.no/*", "https://www.google.no/*",
    "http://www.google.com.np/*", "https://www.google.com.np/*",
    "http://www.google.nr/*", "https://www.google.nr/*",
    "http://www.google.nu/*", "https://www.google.nu/*",
    "http://www.google.co.nz/*", "https://www.google.co.nz/*",
    "http://www.google.com.om/*", "https://www.google.com.om/*",
    "http://www.google.com.pa/*", "https://www.google.com.pa/*",
    "http://www.google.com.pe/*", "https://www.google.com.pe/*",
    "http://www.google.com.ph/*", "https://www.google.com.ph/*",
    "http://www.google.com.pk/*", "https://www.google.com.pk/*",
    "http://www.google.pl/*", "https://www.google.pl/*",
    "http://www.google.pn/*", "https://www.google.pn/*",
    "http://www.google.com.pr/*", "https://www.google.com.pr/*",
    "http://www.google.ps/*", "https://www.google.ps/*",
    "http://www.google.pt/*", "https://www.google.pt/*",
    "http://www.google.com.py/*", "https://www.google.com.py/*",
    "http://www.google.com.qa/*", "https://www.google.com.qa/*",
    "http://www.google.ro/*", "https://www.google.ro/*",
    "http://www.google.ru/*", "https://www.google.ru/*",
    "http://www.google.rw/*", "https://www.google.rw/*",
    "http://www.google.com.sa/*", "https://www.google.com.sa/*",
    "http://www.google.com.sb/*", "https://www.google.com.sb/*",
    "http://www.google.sc/*", "https://www.google.sc/*",
    "http://www.google.se/*", "https://www.google.se/*",
    "http://www.google.com.sg/*", "https://www.google.com.sg/*",
    "http://www.google.sh/*", "https://www.google.sh/*",
    "http://www.google.si/*", "https://www.google.si/*",
    "http://www.google.sk/*", "https://www.google.sk/*",
    "http://www.google.com.sl/*", "https://www.google.com.sl/*",
    "http://www.google.sn/*", "https://www.google.sn/*",
    "http://www.google.so/*", "https://www.google.so/*",
    "http://www.google.sm/*", "https://www.google.sm/*",
    "http://www.google.st/*", "https://www.google.st/*",
    "http://www.google.com.sv/*", "https://www.google.com.sv/*",
    "http://www.google.td/*", "https://www.google.td/*",
    "http://www.google.tg/*", "https://www.google.tg/*",
    "http://www.google.co.th/*", "https://www.google.co.th/*",
    "http://www.google.com.tj/*", "https://www.google.com.tj/*",
    "http://www.google.tk/*", "https://www.google.tk/*",
    "http://www.google.tl/*", "https://www.google.tl/*",
    "http://www.google.tm/*", "https://www.google.tm/*",
    "http://www.google.tn/*", "https://www.google.tn/*",
    "http://www.google.to/*", "https://www.google.to/*",
    "http://www.google.com.tr/*", "https://www.google.com.tr/*",
    "http://www.google.tt/*", "https://www.google.tt/*",
    "http://www.google.com.tw/*", "https://www.google.com.tw/*",
    "http://www.google.co.tz/*", "https://www.google.co.tz/*",
    "http://www.google.com.ua/*", "https://www.google.com.ua/*",
    "http://www.google.co.ug/*", "https://www.google.co.ug/*",
    "http://www.google.co.uk/*", "https://www.google.co.uk/*",
    "http://www.google.com.uy/*", "https://www.google.com.uy/*",
    "http://www.google.co.uz/*", "https://www.google.co.uz/*",
    "http://www.google.com.vc/*", "https://www.google.com.vc/*",
    "http://www.google.co.ve/*", "https://www.google.co.ve/*",
    "http://www.google.vg/*", "https://www.google.vg/*",
    "http://www.google.co.vi/*", "https://www.google.co.vi/*",
    "http://www.google.com.vn/*", "https://www.google.com.vn/*",
    "http://www.google.vu/*", "https://www.google.vu/*",
    "http://www.google.ws/*", "https://www.google.ws/*",
    "http://www.google.rs/*", "https://www.google.rs/*",
    "http://www.google.co.za/*", "https://www.google.co.za/*",
    "http://www.google.co.zm/*", "https://www.google.co.zm/*",
    "http://www.google.co.zw/*", "https://www.google.co.zw/*",
    "http://www.google.cat/*", "https://www.google.cat/*"
] 
```

可以使用`http://`and`https://`来代替。`*://`请注意，存在更多搜索门户：

*   [https://encrypted.google.com/](https://encrypted.google.com/) ->`"https://encrypted.google.com/*"`
*   [https://ipv6.google.com/](https://ipv6.google.com/) ->`"https://ipv6.google.com/*"`
*   特定的搜索引擎，如[地图](http://maps.google.com/)、[新闻](http://news.google.com/)。

# java - 将具体工厂传递给抽象工厂类 - java

> ID：11069645
> 
> 赞同：1
> 
> 时间：2012-06-17T07:29:57.987
> 
> 标签：java, abstract-class, factory, abstract

我正在创建一个 abstractFactory 类，我希望能够将具体工厂作为参数发送。这样我就可以删除抽象类中的 if/else 链。

我的问题是我不确定如何将其类型转换回我的抽象类中的具体类以调用 createVehicle() 方法。

```
car = UniversalVehicleFactory.getFactory().createVehicle(CarFactory);
plane = UniversalVehicleFactory.getFactory().createVehicle(PlaneFactory); 
```

在 UniversalVehicleFactory 我有方法 createVehicle 这是我遇到问题的方法。我想要实现的是：获取参数，确定其类并将其转换为该类，然后调用其内部 createVehicle 类。

```
public Vehicle createVehicle(AbstractFactory factory) {

    // I want to take factory,
            // cast it to the concrete factory, and
            // call createMethod() on the factory 

    return factory.getInstance().createVehicle();       
} 
```

非常感谢帮助解决这个问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T08:13:14.250

我会回答你的问题，但我很好奇为什么你想要一个通用工厂来调用抽象工厂的方法，如果你确实必须提供该工厂的一个实例作为参数；你最好直接调用抽象工厂的创建方法。

为此目的发明了泛型。

```
interface Factory< T > {
    T make();
}

public class CarFactory implements Factory< Car > {
    Car make() { ... }
}

public class PlaneFactory implements Factory< Plane > {
    Plane make() { ... }
}

public class UniversalVehicleFactory {
    public < T extends Vehicle > T make( Factory< T > factory ) {
        return factory.make();
    }
} 
```

您会注意到 UniversalVehicleFactory 没有实现 Factory< T >。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T08:10:51.913

我认为您正在尝试在这里应用抽象工厂模式。这是我的解决方案：

你可以有接口`VehicleFactory`和工厂类：

```
interface VehicleFactory {
    Vehicle createVehicle();
}

class CarFactory implements VehicleFactory {
    public Vehicle createVehicle() {
        return new Car();
    }
}

class PlaneFactory implements VehicleFactory {
    public Vehicle createVehicle() {
        return new Plane();
    }
} 
```

然后，如果你想集中所有工厂，你可以有一个`UniversalVehicleFactory`：

```
class UniversalVehicleFactory {

    private Map<Class<T extends VehicleFactory>, VehicleFactory> factories;

    static {
        factories = new HashMap<Class<T extends VehicleFactory>, VehicleFactory>();
        factories.put(CarFactory.class, new CarFactory());
        factories.put(PlaneFactory.class, new PlaneFactory());
    }

    public static VehicleFactory getFactory(Class<T extends VehicleFactory> factoryClass) {
        return factories.get(factoryClass);
    }

} 
```

然后在您的代码中，使用可以像这样使用它：

```
Vehicle car = UniversalVehicleFactory.getFactory(CarFactory.class).createVehicle();
Vehicle plane = UniversalVehicleFactory.getFactory(PlaneFactory.class).createVehicle(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T07:54:35.007

以下是一些通用代码，可能会对您有所帮助：

```
public class A 
{
    public void paint(Graphics g)
    {

    }
} 
```

* * *

```
public class B extends A
{
    public static void main(String args[])
    {
        A a = new A();
        B b = new B();

        // This is the only one that won't work, because a is not an instance of b.
        if(a instanceof B)
            ((B)a).draw(new Graphics()); 

        if(b instanceof B)
            ((B)b).draw(new Graphcis());

        if(a instanceof A)
            ((A)a).paint(new Graphics());

        if(b instanceof A)
            ((A)b).paint(new Graphics());
    }

    public void draw(Graphics g)
    {

    }
} 
```

`instanceof`是在类型转换之前使用以避免错误的好工具。我希望这会有所帮助，如果它太笼统并且您希望我将其更多地应用于您的情况，请告诉我。

# iphone - iOS MapKit - 隐藏重叠点？

> ID：11069648
> 
> 赞同：0
> 
> 时间：2012-06-17T07:31:03.087
> 
> 标签：iphone, mapkit, overlap, marker

我希望有一种简单的方法可以一次在地图中显示多达 200 个点，而不会在用户缩小并且所有点都在屏幕上时降低性能。

我们有一个优先级的抽签顺序，最重要的优先级高于其他。在用户放大特定区域之前，如何隐藏下面的那些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:37:25.773

您可以使用这些委托方法来确定正在显示哪个区域和缩放级别并相应地显示点...

```
– mapView:regionWillChangeAnimated:
– mapView:regionDidChangeAnimated: 
```

有关更多信息，请参阅[苹果文档](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html)。

# git - 将上游设置为子模块（或如何将 GitHub fork 包含为子模块）

> ID：11069651
> 
> 赞同：10
> 
> 时间：2012-06-17T07:31:26.610
> 
> 标签：git, github, git-submodules

我对这个 Git 很陌生，需要一点帮助。

我最近在 GitHub 上创建了一个新的存储库并将其克隆到我的桌面上。我们称之为**myProject**。我的 GitHub 帐户中还有一个 fork，我将其作为子模块包含在 myProject 中。我们称之为**myForkOfOtherProject**，它是 otherProject 的一个**分支**。

所以，这是目前的情况：

![回购当前状态图](../Images/d0b02ae7cd47a150159f2e0c4d492ec2.png)

[根据 GitHub](https://help.github.com/articles/fork-a-repo)：

> 当一个 repo 被克隆时，它有一个名为**origin**的默认远程指向你在 GitHub 上的 fork，而不是它被 fork 的原始 repo。要跟踪原始存储库，您需要添加另一个名为**upstream**的远程。

所以，我的问题是，如何将上游设置为子模块？还是我不明白什么？

先感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-17T08:42:57.297

### 子模块

当您将一个子模块克隆到您的存储库中时，它将拥有自己的**.git/config**文件和自己的*origin*概念。假设子模块是您的（例如，您的遥控器上游没有第三方存储库），那么您无需担心为子模块创建*上游*遥控器。

如果您*确实*需要为子模块创建上游远程，这很容易。只需`cd`进入子模块的顶级目录，并以与主存储库相同的方式为其提供一个。

```
cd myForkOfOtherProject
git remote add upstream git://example.com/otherProject.git 
```

没有命名空间冲突，因为子模块实际上只是一个普通的 git 存储库，在超级项目中跟踪了一些额外的元信息。超级项目和子模块不共享它们的**.git/config**文件。

出于所有意图和目的，您处理子模块内的*源*和*上游*的方式与处理任何其他存储库的方式相同。您在子模块中运行的 Git 命令独立于超级项目，超级项目最感兴趣的是跟踪子模块的当前提交 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T10:33:03.720

```
git remote add upstream git://github.com/otherUser/otherProject.git 
```

仅当 git 协议（默认情况下，端口 9478）被 aithorized 时才有效。
我不能在工作中做到这一点（我什至没有提到 ssh 地址：ssh 也被“局域网外”远程地址阻止工作）。

```
git remote add upstream https://github.com/otheruser/otherProject.git 
```

将工作（提供[一些额外的设置](https://stackoverflow.com/questions/5377703/syncing-with-github/5378094#5378094)）

注意：在您的子模块存储库中创建上游（如[CodeGnome](https://stackoverflow.com/users/1301972/codegnome) [所述](https://stackoverflow.com/a/11070016/6309)`update that submodule with the latest of`，已投票）对您对otherProject很有用

```
cd myForkOfOtherProject
git fetch upstream
# or fetch + merge:
git pull upstream 
```

它不会用于你推回 otherProject （如果你分叉它，可能是因为你没有被列为合作者）。
如果您直接在 中进行任何进化`myForkOfOtherProject`，您将需要提交它，然后转到父 repo 并提交它（参见“[子模块的真实性质](https://stackoverflow.com/questions/1979167/git-submodule-update/1979194#1979194)”）。如果您希望初始维护者考虑到这一点，请提出[拉取请求。](https://help.github.com/articles/using-pull-requests)`otherProject`

# javascript - 使头部加载的脚本可用于 AJAX 加载的内容

> ID：11069654
> 
> 赞同：0
> 
> 时间：2012-06-17T07:31:34.237
> 
> 标签：javascript, jquery, ajax, browser

AJAX 调用的内容

content 需要不同形状和大小的线索提示（我使用插件），所以我将它们放在一个文件中，在 head 标签中调用：

```
<script type="text/javascript" src="/resources/js/jquery.clues.js">

```

来自 jquery.clues.js 的示例线索提示启动器：

```
    $('.clue550K3').cluetip({
    拆分标题：'|'，
    显示标题：假，
    positionBy:'鼠标'
    });

```

jquery.clues.js中有很多这样的。

问题：

文件：jquery.clues.js 不可用于 jQuery 获取的内容。

我让它工作的方式：

我在每个 AJAX 获取的页面（内容）上调用 jquery.clues.js，但由于文件在正文中被调用，因此它被多次获取（例如，如果我在同一页面上有多个 AJAX 获取的内容）。

文件完全相同。

```
https://hmvc/resources/js/jquery.clues.js?=1339917292974
https://hmvc/resources/js/jquery.clues.js?=1339917294563
https://hmvc/resources/js/jquery.clues.js?=1339917243432
等等

```

问题：

我需要要么

*   使 AJAX 内容读取头部传递 jquery.clues.js
*   强制浏览器在获取一次文件后停止获取文件

有没有办法做到这一点？

看这个例子：[http ://readydata.org.uk/stackstuff/](http://readydata.org.uk/stackstuff/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T07:56:28.250

用一个函数包装你的 jquery.clues.js：

```
window.updateClues = function () {
    $('.clue550K3').cluetip({
        splitTitle: '|',
        showTitle: false,
        positionBy:'mouse'
    });
};
updateClues(); 
```

然后就 AJAX 成功调用`updateClues()`。它只会下载一次，并在每次请求和加载后执行。

# spring - Spring MVC portlet 未部署

> ID：11069659
> 
> 赞同：0
> 
> 时间：2012-06-17T07:32:02.773
> 
> 标签：spring, spring-mvc, liferay, portlet

我写了一个简单的 spring mvc portlet 并复制到 liferay 中的“deploy”，它不会自动部署到 tomcat 的 webapp 文件夹。

此外，它仅在 tomcat 重新启动时部署。

此外，具有 spring mvc portlet 的门户不会使用新内容自动刷新。我不得不删除它并再次添加它。我尝试了一个简单的 portlet 应用程序，默认情况下一切都会自动发生。

你能告诉我我在 spring mvc portlet 应用程序中缺少什么吗？

任何的意见都将会有帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:10:28.600

liferay论坛的这个[链接可能会对你有所帮助。](http://www.liferay.com/community/forums/-/message_boards/message/88234)

只需检查属性`auto.deploy.interval=0`或未`auto.deploy.enabled=false`设置。

# iphone - 具有奇数和偶数索引的不同项目的自定义网格视图

> ID：11069660
> 
> 赞同：0
> 
> 时间：2012-06-17T07:32:10.070
> 
> 标签：iphone, objective-c, xcode

我在我的代码中使用[了这个自定义网格视图](https://github.com/cammsaul/NAMenu)，我想创建一个如下所示的网格视图： ![在此处输入图像描述](../Images/153a695e902fb4280e02dc9e6b176fe8.png)

我应该如何在代码中执行此操作？这是项目的设置方法：

```
- (void)setupItemViews {
for (UIView *view in self.itemViews) {
    [view removeFromSuperview];
}
for (UIImageView *image in self.images) {
    [image removeFromSuperview];
}

[self.images removeAllObjects];
[self.itemViews removeAllObjects];

// now add the new objects
NSUInteger numItems = [self.menuDelegate menuViewNumberOfItems:self];

for (NSUInteger i = 0; i < numItems; i++) {
    GridMenuItemView *itemView = [[GridMenuItemView alloc] init];

    GridMenuItem *menuItem = [self.menuDelegate menuView:self itemForIndex:i];

    itemView.frame = CGRectMake(0, 0, self.itemSize.width, self.itemSize.height);
    itemView.label.text = menuItem.title;
    //itemView.imageView.image = menuItem.icon;
    itemView.tag = i;

    [itemView addTarget:self
                 action:@selector(itemPressed:) 
       forControlEvents:UIControlEventTouchUpInside];

    [itemView setBackgroundImage:[UIImage imageNamed:menuItem.normalImageName]
                        forState:UIControlStateNormal];
    [itemView setBackgroundImage:[UIImage imageNamed:menuItem.highlightedImageName]
                        forState:UIControlStateHighlighted];

    NSUInteger numColumns = self.bounds.size.width > self.bounds.size.height ? self.columnCountLandscape : self.columnCountPortrait;

    [self.itemViews addObject:itemView];
    [self addSubview:itemView];

} 
```

感谢ctrahey，我得到了我想要的。但是用于设置单元格的方法`-(void) layoutSubviews`如下：

在这行之后可以找到对应的代码：`**//__n__ ...` - (void)layoutSubviews { [super layoutSubviews]; //[self removeFromSuperview];

```
NSUInteger numColumns = self.bounds.size.width > self.bounds.size.height ? self.columnCountLandscape : self.columnCountPortrait;

NSUInteger numItems = [self.menuDelegate menuViewNumberOfItems:self];
if (self.itemViews.count != numItems) {
    [self setupItemViews];
}

CGFloat padding = roundf((self.bounds.size.width - (self.itemSize.width * numColumns)) / (numColumns + 1));
NSUInteger numRows = numItems % numColumns == 0 ? (numItems / numColumns) : (numItems / numColumns) + 1;

CGFloat yPadding = 0;
CGFloat totalHeight = ((self.itemSize.height + yPadding) * numRows) + yPadding ;

// get an even y padding if less than the max number of rows

if (totalHeight < self.bounds.size.height) {
    CGFloat leftoverHeight = self.bounds.size.height - totalHeight;
    CGFloat extraYPadding = roundf(leftoverHeight / (numRows + 1));
    yPadding += extraYPadding;

    totalHeight = ((self.itemSize.height + yPadding) * numRows) + yPadding;
}

// get an even x padding if we have less than a single row of items
if (numRows == 1 && numItems < numColumns) {
    padding = roundf((self.bounds.size.width - (numItems * self.itemSize.width)) / (numItems + 1));
}

for (int i = 0, j = numColumns; i < numItems; i++) {

    j--;
    if (j<0) {
        j += numColumns;
    }
    //NSUInteger column = j ;
    //NSUInteger row = i / numColumns;
    UIView *item = [self.itemViews objectAtIndex:i];

    //CGFloat xOffset = (column * (self.itemSize.width + padding)) + padding;
    //CGFloat yOffset = (row * (self.itemSize.height + yPadding));// + yPadding;

    **//__n__ These three lines of code make set the cell items at different xPositions from right and left.  
    CGFloat xPosition = (i%2) ? 0.0 : self.bounds.size.width - self.itemSize.width;
    CGFloat yPosition = i*self.itemSize.height;
    item.frame = CGRectMake(xPosition, yPosition, self.itemSize.width, self.itemSize.height);**

    //item.frame = CGRectMake(xOffset, yOffset, self.itemSize.width, self.itemSize.height);

  //  if ((i%numColumns) == 0) {
     //   UIImageView *img = [self.images objectAtIndex:i/numColumns];
     //   img.frame = CGRectMake(0, yOffset+76, self.bounds.size.width, 1);

 //   }//End If
}
    //Scroll size.
UIDeviceOrientation currentOrientation = [[UIDevice currentDevice] orientation];

if (UIDeviceOrientationIsPortrait(currentOrientation))
{
    self.contentSize = CGSizeMake(self.bounds.size.width, totalHeight + (yPadding * (numRows+1.55)));
}

else if (UIDeviceOrientationIsLandscape(currentOrientation))
{

    self.contentSize = CGSizeMake(self.bounds.size.width, totalHeight + (yPadding * (numRows+3)));
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:47:31.170

如果我正确理解您的意图，则该行：

```
itemView.frame = CGRectMake(0, 0, self.itemSize.width, self.itemSize.height); 
```

应该使用您的索引 i 和一些简单的算术来定位视图。我过去使用过的一种技术是使用模运算符进行简单的奇数检查。

```
CGFloat xPosition = (i%2) ? 0.0 : self.bounds.size.width - self.itemSize.width;
CGFloat yPosition = i*self.itemSize.height;
itemView.frame = CGRectMake(xPosition, yPosition, self.itemSize.width, self.itemSize.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T12:22:16.880

感谢 ctrahey。用于设置单元格的方法`-(void) layoutSubviews`如下：

在这行之后可以找到对应的代码：`**//__n__ ...` - (void)layoutSubviews { [super layoutSubviews]; //[self removeFromSuperview];

```
NSUInteger numColumns = self.bounds.size.width > self.bounds.size.height ? self.columnCountLandscape : self.columnCountPortrait;

NSUInteger numItems = [self.menuDelegate menuViewNumberOfItems:self];
if (self.itemViews.count != numItems) {
    [self setupItemViews];
}

CGFloat padding = roundf((self.bounds.size.width - (self.itemSize.width * numColumns)) / (numColumns + 1));
NSUInteger numRows = numItems % numColumns == 0 ? (numItems / numColumns) : (numItems / numColumns) + 1;

CGFloat yPadding = 0;
CGFloat totalHeight = ((self.itemSize.height + yPadding) * numRows) + yPadding ;

// get an even y padding if less than the max number of rows

if (totalHeight < self.bounds.size.height) {
    CGFloat leftoverHeight = self.bounds.size.height - totalHeight;
    CGFloat extraYPadding = roundf(leftoverHeight / (numRows + 1));
    yPadding += extraYPadding;

    totalHeight = ((self.itemSize.height + yPadding) * numRows) + yPadding;
}

// get an even x padding if we have less than a single row of items
if (numRows == 1 && numItems < numColumns) {
    padding = roundf((self.bounds.size.width - (numItems * self.itemSize.width)) / (numItems + 1));
}

for (int i = 0, j = numColumns; i < numItems; i++) {

    j--;
    if (j<0) {
        j += numColumns;
    }
    //NSUInteger column = j ;
    //NSUInteger row = i / numColumns;
    UIView *item = [self.itemViews objectAtIndex:i];

    //CGFloat xOffset = (column * (self.itemSize.width + padding)) + padding;
    //CGFloat yOffset = (row * (self.itemSize.height + yPadding));// + yPadding;

    **//__n__ These three lines of code make set the cell items at different xPositions from right and left.  
    CGFloat xPosition = (i%2) ? 0.0 : self.bounds.size.width - self.itemSize.width;
    CGFloat yPosition = i*self.itemSize.height;
    item.frame = CGRectMake(xPosition, yPosition, self.itemSize.width, self.itemSize.height);**

    //item.frame = CGRectMake(xOffset, yOffset, self.itemSize.width, self.itemSize.height);

  //  if ((i%numColumns) == 0) {
     //   UIImageView *img = [self.images objectAtIndex:i/numColumns];
     //   img.frame = CGRectMake(0, yOffset+76, self.bounds.size.width, 1);

 //   }//End If
}
    //Scroll size.
UIDeviceOrientation currentOrientation = [[UIDevice currentDevice] orientation];

if (UIDeviceOrientationIsPortrait(currentOrientation))
{
    self.contentSize = CGSizeMake(self.bounds.size.width, totalHeight + (yPadding * (numRows+1.55)));
}

else if (UIDeviceOrientationIsLandscape(currentOrientation))
{

    self.contentSize = CGSizeMake(self.bounds.size.width, totalHeight + (yPadding * (numRows+3)));
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T07:48:59.570

只需使用 uitableview 操作。在那个牢房forrowatindexpath

根据奇偶设置按钮图像和框架

```
 if(indexpath.orw%2==0)
    {
    //set your frame here;

    }
    else
    {
   // set your frame here;
    } 
```

# iphone - 如何在单个 xib 中加载多个 xib？

> ID：11069661
> 
> 赞同：0
> 
> 时间：2012-06-17T07:32:13.887
> 
> 标签：iphone, ios, xcode, nsarray, xib

我已经创建了 4 个宽度为 200，高度为 200 的 xib 用于一个目的......但如果我想在一个 xib 中加载所有 xib，我不知道如何实现......我有几个想法

1.我们可以让所有的xib按数组加载吗？

2.我们可以在appdelegate.m文件中声明NSBUNDLE代码吗？..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:21:15.093

每个 xib 必须有一个类来控制它。所以你现在必须有 4 个 xib 、 4 个 .h 和 4 个 .m 文件。现在用 xib、.m 和 .h (MainViewController) 创建另一个视图控制器。现在导入所有类。在 MainController.h

```
#import <UIKit/UIKit.h>
#import "Xib1Class.h"
#import "Xib2Class.h"
#import "Xib3Class.h"
#import "Xib4Class.h"

@interface MainViewController : UIViewController {

    Xib1Class *xib1Class;
    Xib2Class *xib2Class;
    Xib3Class *xib3Class;
    Xib4Class *xib4Class;

}

@end 
```

在 MainViewController.m 的 viewDidLoad

```
xib1Class = [[Xib1Class alloc] initWithNibName:@"Xib1Class" bundle:nil];
xib2Class = [[Xib2Class alloc] initWithNibName:@"Xib2Class" bundle:nil];
xib3Class = [[Xib3Class alloc] initWithNibName:@"Xib3Class" bundle:nil];
xib4Class = [[Xib4Class alloc] initWithNibName:@"Xib4Class" bundle:nil];

//set the frame
xib1Class.view.frame = CGRectMake(x,y,w,h);
..........
//put in main view
[self.view addSubView:xib1class.view];
//the same for 2-3-4 
```

记得管理内存。希望这对你有帮助。

# ios - 创建一个可以触发两个动作并更改其标题的按钮？

> ID：11069663
> 
> 赞同：0
> 
> 时间：2012-06-17T07:32:34.053
> 
> 标签：ios, xcode, button, uibutton, core-motion

```
CGRect buttonFrame = CGRectMake( 10, 80, 100, 30 );
UIButton *button = [[UIButton alloc] initWithFrame: buttonFrame];
[button setTitle: @"Start" forState: UIControlStateNormal];
[button addTarget:self action:@selector(start_Accel) forControlEvents:UIControlEventTouchUpInside];
[button setTitle: @"Stop" forState: UIControlEventTouchUpInside];
[button addTarget:self action:@selector(stop_Accel) forControlEvents:UIControlEventTouchUpInside];
[view addSubview:button]; 
```

我想创建一个按钮，可以在用户按下它时启动和停止加速度计更新，但它的标题也应该从开始到停止更改，并且它应该继续直到用户通过另一个按钮重置所有内容，但我不知道得到它完成，除了以下代码，但它不会改变标题并调用停止动作？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T07:37:21.790

以某种方式管理按钮的状态，例如。使用 @property 并仅使用一个操作：

在你.h

```
@property (nonatomic) BOOL startStopButtonIsActive; 
```

在你的 .m

```
@synthesize startStopButtonIsActive = _startStopButtonIsActive;

 ....

- (void)viewDidLoad {
       [button addTarget:self action:@selector(startStopButtonPressed) forControlEvents:UIControlEventTouchUpInside];
      // other stuff
}

- (void)startStopButtonPressed {
    if (startStopButtonIsActive) {
        self.startStopButtonIsActive = !self.startStopButtonIsActive  //toggle!
        // do your stuff here
    } else {
        self.startStopButtonIsActive = !self.startStopButtonIsActive  //toggle!
        // do your stuff here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:51:05.460

你很亲密。

仅向按钮添加一个目标 - 使目标方法能够感知当前状态。确保选择器中有一个冒号，以便它接收发送者作为方法的参数。即`startOrStopAccel:`与`startOrStopAccel`.

您可以根据状态调用一个目标方法，`start_Accel`也可以调用该方法。`stop_Accel`

```
-(void) viewDidLoad {
    //...
    //...
    CGRect buttonFrame = CGRectMake( 10, 80, 100, 30 );
    UIButton *button = [[UIButton alloc] initWithFrame: buttonFrame];
    [button setTitle: @"Start" forState: UIControlStateNormal];
    [button addTarget:self action:@selector(startOrStopAccel:) forControlEvents:UIControlEventTouchUpInside];
    [view addSubview:button];
}

-(void)startOrStopAccel:(UIButton*)sender {
    if ([sender.title isEqualToString:@"Start"]) {
        [sender setTitle: @"Stop" forState: UIControlStateNormal];
        [self start_Accel];
    }
    else {
        [sender setTitle: @"Start" forState: UIControlStateNormal];
        [self stop_Accel];
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T07:38:43.073

在这种情况下应该只有一个目标，您应该通过在签名中添加一个参数来让它传递按钮和动作：

```
[button addTarget:self action:@selector(accelButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
// the interface being:
-(void) accelButtonPressed:(UIButton *) sender; 
```

在该方法中，您可以检查状态和更改状态，以及按钮的属性（在“sender”中引用）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T07:40:33.940

首先，您要在 .h 文件中声明您的按钮和一个整数变量。

然后 ，

```
intergervariable=0;

    button = [[UIButton alloc] initWithFrame: buttonFrame];
    [button setTitle: @"Start" forState: UIControlStateNormal];
    [button addTarget:self action:@selector(start_Accel) forControlEvents:UIControlEventTouchUpInside];
    [view addSubview:button];

after that inside the start_Accel function check like this

if(intergervariable==0)
{
intergervariable=1; 
[button setTitle: @"Start" forState: UIControlStateNormal];
}
else if(intergervariable==1)
{
intergervariable=0;
 [button setTitle: @"Stop" forState: UIControlStateNormal];
} 
```

# x11 - 无法让 XCreateSimpleWindow 在正确的位置打开窗口

> ID：11069666
> 
> 赞同：4
> 
> 时间：2012-06-17T07:33:27.547
> 
> 标签：x11

下面的代码打开一个大小合适的窗口 w,h，但不在正确的位置 x,y。

```
#include <iostream>
#include <X11/Xlib.h>
#include <X11/Xutil.h>
#include <X11/Xresource.h>
using namespace std;

int main(int argc, char* argv[]){
  Display *display; // A connection to X server
  int screen_number;
  Window canvas_window;
  unsigned long white_pixel;
  unsigned long black_pixel;

  display = XOpenDisplay(NULL);    // Connect X server by opening a display

  if(!display){
    cerr<<"Unable to connect X server\n";
    return 1;
  }

  screen_number = DefaultScreen(display);
  white_pixel = WhitePixel(display, screen_number);
  black_pixel = BlackPixel(display, screen_number);

  int x=0, y=100, w=300, h=400;

  canvas_window = XCreateSimpleWindow(display,
                                      RootWindow(display, screen_number),
                                      x,y,  // top left corner
                                      w,h,  // width and height
                                      2,    // border width
                                      black_pixel,
                                      white_pixel);

  XMapWindow(display, canvas_window);    // Map canvas window to display
  XSync(display, False);

  cin >> x;   // just so that the program does not end
} 
```

我用 g++ xwindowtest.cpp -lX11 编译了它，其中 g++ 是 4.6.2 版，并在 Debian GNU/Linux 下运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T12:47:27.313

The above solution is sort of correct, but not complete.

Creating a new top-level window on the desktop, and creating a new (child) window within the top-level window of your application use the same XCreateSimpleWindow() call, but the actual behaviour can be different.

When creating a new child window within your application you are in charge, and the origin coordinates (relative to its parent window's origin) and size you give for the new window will be honoured. In other words the window will go where you want it to.

However when creating a new top-level window on the desktop you have to deal with the pesky window manager, for example Motif, KDE, Gnome, etc. This intervenes when you create a top-level window to add borders ("decoration"), title, possibly icons, etc. More to the point it will, by default, ignore your requested origin coordinates in most cases and put the new window where it wants rather than where you asked it to put it. It is only when it has been mapped (somewhere) that you can then move it with XMoveWindow().

To avoid this you can ask, or in X11-speak "Hint to", the Window manager that "no, I want you to put the window where I ask, not where you want to put it". You do this with the following sequence:

(1) Define a XSizeHints structure. (2) Set the flags bit in this structure with a mask of what you want to specify (3) Populate the relevant arguments (4) Call XSetNormalHints() on the newly created window (before you map it).

So in C code you would do:

```
XSizeHints    my_hints = {0};

my_hints.flags  = PPosition | PSize;     /* I want to specify position and size */
my_hints.x      = wanted_x_origin;       /* The origin and size coords I want */
my_hints.y      = wanted_y_origin;
my_hints.width  = wanted_width;
my_hints.height = wanted_height;

XSetNormalHints(disp, new_window, &my_hints);  /* Where new_window is the new window */ 
```

Then map it and - hopefully - it will be where you want it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:02:44.103

我通常先声明一个`XSizeHints` 并将 x,y 坐标等分配给`hints`.

创建 x 窗口时，您可以这样做

```
 XCreateSimpleWindow(display, 
                     DefaultRootWindow(display), 
                     hints.x, hints.y, 
                     hints.width,hints.height, 
                     borderWidth, 
                     blackPixel, whitePixel) 
```

这对我来说总是适用于 100% 正确的窗口位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T19:46:17.553

我有同样的问题。我只是从 X11 开始。也许其他有更多经验的人可以澄清为什么这样做（并且简单地为 XCreateSimpleWindow 指定 x, y 没有）。

这是我的修复：

disp 是你的显示器，win0 是你的 canvas_window：

```
XMoveWindow(disp, win0, 200, 200);

XSync (disp, FALSE);

 ..... do something .....

XMoveWindow(disp, win0, 0, 0);

XSync (disp, FALSE);

... do something 
```

当我运行此代码片段时，窗口会移动。您需要通过 XSync 遵循 XMoveWindow，以便正确处理请求（例如移动）。

# griffon - 如何将 griffon 应用程序图标替换为自定义图标

> ID：11069668
> 
> 赞同：0
> 
> 时间：2012-06-17T07:33:34.177
> 
> 标签：griffon

我想将 Griffon 图标替换为我的应用程序的自定义图标。我已替换视图中的图标，如下所示：

```
application(id: "mainFrame", title: 'selekron',
  preferredSize: [884, 800],
  pack: true,
  //location: [50,50],
  locationByPlatform:true,
  iconImage: imageIcon('/progresomusica-icon-48x48.png').image,
  iconImages: [imageIcon('/progresomusica-icon-48x48.png').image,
               imageIcon('/progresomusica-icon-32x32.png').image,
               imageIcon('/progresomusica-icon-16x16.png').image]) { 
```

我在 griffon-app/conf/BuildConfig.groovy 中有下一个设置：

```
deploy {
    application {
        title = "${appName} ${appVersion}"
        vendor = System.properties['user.name']
        homepage = "http://localhost/${appName}"
        description {
            complete = "${appName} ${appVersion}"
            oneline  = "${appName} ${appVersion}"
            minimal  = "${appName} ${appVersion}"
            tooltip  = "${appName} ${appVersion}"
        }
        icon {
            'default' {
                name   = 'progresomusica-icon-64x64.png'
                width  = '64'
                height = '64'
            }
            splash {
                name   = 'griffon.png'
                width  = '391'
                height = '123'
            }
            selected {
                name   = 'progresomusica-icon-64x64.png'
                width  = '64'
                height = '64'
            }
            disabled {
                name   = 'progresomusica-icon-64x64.png'
                width  = '64'
                height = '64'
            }
            rollover {
                name   = 'progresomusica-icon-64x64.png'
                width  = '64'
                height = '64'
            }
            shortcut {
                name   = 'progresomusica-icon-64x64.png'
                width  = '64'
                height = '64'
            }
        } 
```

我已删除我的 $HOME/.griffon 文件夹并再次运行该应用程序，但我不断收到 griffon 红色图标。

关于我缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:48:13.453

您是否在 OSX 上运行该应用程序？如果是这样，请查看 $GRIFFON_HOME/scripts/_GriffonPackage.groovy。该文件定义了以下闭包

```
resolveApplicationIcnsFile = {
    File icnsFile = null
    if (buildConfig.application.icon) {
        icnsFile = new File(basedir, buildConfig.application.icon)
        if (!icnsFile.exists()) icnsFile = null
    }
    if (icnsFile == null) {
        icnsFile = new File(basedir, "griffon-app/conf/dist/shared/${griffonAppName}.icns")
        if (!icnsFile.exists()) icnsFile = null
    }
    if (icnsFile == null) {
        icnsFile = new File("${griffonHome}/media/griffon.icns")
    }
    icnsFile
} 
```

基本上，您有 2 种选择来定义要在 OSX 的 Dock 中使用的图标，否则会选择默认图标。如果在 Windows 或 Linux 上运行应用程序，那么更新主视图（如您所做的那样）就足够了

```
 iconImage: imageIcon('/progresomusica-icon-48x48.png').image,
  iconImages: [imageIcon('/progresomusica-icon-48x48.png').image,
               imageIcon('/progresomusica-icon-32x32.png').image,
               imageIcon('/progresomusica-icon-16x16.png').image]) { 
```

# html - file_get_contents 加速

> ID：11069674
> 
> 赞同：0
> 
> 时间：2012-06-17T07:34:30.137
> 
> 标签：html, timeout, file-get-contents

我正在通过抓取页面 URL 并`<link>`在页面标题中查找标签来构建 rss 提要发现服务。`file_get_contents($url)`问题是某些 URL 需要很长时间才能为页面源提供服务，因此我的代码经常被卡住。

有没有办法通过预定义的超时来做到这一点，例如，如果 10 秒过去了，仍然没有提供内容，那么只需删除该 URL 并移至下一个？

我正在考虑使用该`maxLen`参数来仅获取源的一部分（`<head>..</head>`），但我不确定在达到接收到的字节后这是否真的会停止，仍然需要完整的页面加载。另一个问题是我不知道在此处设置什么值，因为每个页面在`head`标签中都有不同的内容，因此大小会有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T07:44:32.383

我刚刚读到这个，所以这只是现在的理论..但是..

这是函数定义，注意资源上下文部分：

```
string file_get_contents ( string $filename [, bool $use_include_path = false [, **resource $context** [, int $offset = -1 [, int $maxlen ]]]] ) 
```

如果您指定`stream_context_create()`函数的结果并将超时值传递*给它*的选项数组，它可能会起作用。

```
$context = stream_context_create($opts); 
```

或者您可以创建流并直接设置它的超时：

```
http://www.php.net/manual/en/function.stream-set-timeout.php 
```

希望你在这方面取得一些成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T07:45:15.187

使用“上下文”参数。您可以使用“stream_context_create”函数创建流上下文，并在 http 上下文中指定所需的超时时间。

```
$context = stream_context_create(array(
    'http' => array(
        'timeout' => YOUR_TIMEOUT,
    )
));
$content = file_get_contents(SOME_FILE, false, $context); 
```

更多信息： [这里](http://www.php.net/manual/en/function.stream-context-create.php)和[这里。](http://www.php.net/manual/en/context.http.php)

# c# - 不能在从 xml 文件加载的表中选择超过 9 的 id？

> ID：11069678
> 
> 赞同：0
> 
> 时间：2012-06-17T07:34:59.433
> 
> 标签：c#

```
 public  class MessageManager
    {
      public const string FLDMessageID = "MessageID";
      public const string FLDMessageText = "MessageText";
      private string GetPath
      {
          get
          {
              return Environment.CurrentDirectory + @"\MessageList.xml";
          }
      }

      private DataTable BuilDadataTable()
        {
            DataTable dtb = new DataTable("MessageList");
            DataColumn clmn = new DataColumn("MessageID", typeof(System.Int32));
            dtb.Columns.Add(clmn);
            clmn = new DataColumn("MessageText", typeof(System.String));
            dtb.Columns.Add(clmn);
            return dtb;
        }
        public DataSet GetMessageStructure()
        {
            DataSet ds = new DataSet();
            ds.Tables.Add(BuilDadataTable());
            return ds;
        }
        public DataSet GetMessageListDS()
        {
            DataSet ds = null;
            if (System.IO.File.Exists(GetPath))
            {
                ds = new DataSet();
                ds.ReadXml(GetPath);
            }
            else
            {
                ds= GetMessageStructure();
            }
            return ds;
        }
        public void AddMessage(int MessageID, string MessageText)
        {
            DataSet ds = GetMessageListDS();
            DataRow dr = ds.Tables[0].NewRow();
            dr[FLDMessageID] = MessageID;
            dr[FLDMessageText] = MessageText;
            ds.Tables[0].Rows.Add(dr);
            ds.WriteXml(this.GetPath);
        }
        public string GetMessage(int MessageID)
        {
            DataSet ds = GetMessageListDS();
            string Result = "Invalid XML Error List";
            if (ds != null && ds.Tables.Count > 0 && ds.Tables[0].Rows.Count != 0)
            {
                DataRow[] drs = ds.Tables[0].Select("MessageID=" + MessageID.ToString()) ;
                if (drs.Length > 0)
                    if(drs[0].ItemArray[1] !=DBNull.Value)
                    Result = drs[0].ItemArray[1].ToString();
            }
            return Result;

        }
    } 
```

我的应用程序中有一个用于管理消息的 xml 文件。一个名为 messageManager 的类负责创建 xml 文件（如果不存在）或将其读入应用程序中的表中。xml 文件中的每个实体都有两个元素 1-MessageID 2-MessageText。添加一个 meggage 后，我们可以通过它的 id 获取指定的消息。

问题：
添加和获取 id 小于 10 的消息没有任何问题，但是当我添加 id 大于 9 的消息 id 时 getmessage() 找不到它？请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:10:03.550

尝试转换并比较为

```
DataRow[] drs = ds.Tables[0].Select("Convert(MessageID, 'System.String') = '"+MessageID.ToString()+"'"); 
```

# java - 在java中细化x小数位的答案

> ID：11069680
> 
> 赞同：1
> 
> 时间：2012-06-17T07:35:19.717
> 
> 标签：java

我有一个作业，我需要从用户那里得到一个输入，以细化对 x（用户的输入）小数位数的答案。我将完善我的答案，直到 x 小数位没有任何变化。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:08:54.913

这里有很多问题，你应该注意。

首先是如果你使用浮点数来表示你的答案，你不能代表所有可能的实数，所以你几乎肯定会得到舍入错误。查看[http://floating-point-gui.de/](http://floating-point-gui.de/)了解更多相关信息。

其次，当你打印一个`float`or`double`值时，Java 会用它做一些魔法，让它看起来很漂亮。请参阅[`Float.toString(float)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Float.html#toString%28float%29)和[`Double.toString(double)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#toString%28double%29)了解更多信息。

所以实际上，如果你输入

```
double answer = 3.14159265; 
```

它存储为

```
3.141592650000000208621031561051495373249053955078125 
```

你可以看到使用

```
System.out.println(new BigDecimal(answer)); 
```

因此，假设您的答案是`double`（或`float`），您应该使用`BigDecimal`'[`setScale`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#setScale%28int,%20int%29)方法。此外，如果您想将用户可以选择的小数位数限制为打印`double`为字符串时可见的数字，请传递`String.valueOf(answer)`给`BigDecimal`的构造函数。

这是一个演示如何执行此操作的小程序

```
public static void main(String[] args) {
    double answer = 3.14159265;

    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
    String input = null;
    do {
        System.out.println("Answer: " + answer);
        System.out.println("How many decimal places do you want? ");
        try {
            input = in.readLine();
        } catch (IOException e) {
            e.printStackTrace();
        }
        if (input != null) {
            try {
                int decimalPlaces = Integer.parseInt(input);
                if (decimalPlaces < 0) {
                    System.out.println("Enter a positive value.");
                } else {
                    BigDecimal scaled = new BigDecimal(
                            String.valueOf(answer));
                    if (decimalPlaces > scaled.scale()) {
                        System.out
                                .println("Answer does not have that many decimal places.");
                    } else {
                        scaled = scaled.setScale(decimalPlaces,
                                RoundingMode.HALF_EVEN);
                        System.out.println("Rounded answer: " + scaled);
                    }
                }
            } catch (Exception e) {
                System.out.println("Not a valid number.");
            }
        }
    } while (input != null);
} 
```

大多数代码是错误/输入检查。真正的工作是由`setScale`. 请记住，在处理浮点数时有很多边界条件，你应该很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T07:44:22.863

目前尚不清楚您要达到的目标，但我认为您想接受一个数字，然后按照用户指定的方式对其进行四舍五入。

Java 的 BigDecimal [http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)类具有您为此目的可能需要的所有功能。请不要使用主要数据类型（float、double），因为它们迟早会导致舍入错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T07:49:28.403

虽然@Thihara 的回答是正确的，但也许您需要一种更简单的方法。除非您需要 的精度，否则`BigDecimal`您可以这样做：

```
 int x = 4;
    double value = 3.141593;

    long answer = (long) (value * Math.pow(10, x)); 
```

重点是：将值乘以 10^x，然后转换为`long`（或`int`）。当然，这只适用于小的`x`.

# java - RadioGroup.check(int) 不工作

> ID：11069683
> 
> 赞同：0
> 
> 时间：2012-06-17T07:35:37.813
> 
> 标签：java, android

我在使用 RadioGroups 时遇到了一些麻烦。我在布局中创建了一个空白无线电组。然后用代码中的均衡器预设填充它。然后我尝试使用 radiogroup.check(1) 设置选项之一。但是它抛出了一个空指针异常。

下面是代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.equalizer);
    //rgEqualizer = (RadioGroup) findViewById(R.id.rgEqualizerPreset);
    mPlayer = new MediaPlayer();
    mEqualizer = new Equalizer(0, AuID);
    rgEqualizer = new RadioGroup(this);
    radioButtonList = new ArrayList<RadioButton>();
    layoutParams = new RadioGroup.LayoutParams(
        RadioGroup.LayoutParams.FILL_PARENT,
        RadioGroup.LayoutParams.WRAP_CONTENT);

    fillRadioGroupWithRadioButtons();
    rgEqualizer.setEnabled(true);
    rgEqualizer.setOnCheckedChangeListener(this);
    addContentView(rgEqualizer, layoutParams);
    loadPresetsettings();
}
private void fillRadioGroupWithRadioButtons() {
    Short noPresets = mEqualizer.getNumberOfPresets();
    short i = 0;
    while (i < noPresets) {
        RadioButton rb = new RadioButton(this);
        rb.setText(mEqualizer.getPresetName(i));
        rgEqualizer.addView(rb, layoutParams);
        i++;
    }
}
private void loadPresetsettings() { 
    rgEqualizer.check(1);
} 
```

似乎即使在添加子单选按钮 fillRadioGroupWithRadioButtons() 之后，radiogroup 中也没有添加子单选按钮。我错过了什么/

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T09:58:43.767

完成了我想的工作

```
 RadioButton o = (RadioButton) rgEqualizer.getChildAt(1);
        o.setChecked(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T07:52:15.193

您在代码中定义了 rgEqualizer 两次。

```
 rgEqualizer = (RadioGroup) findViewById(R.id.rgEqualizerPreset);   <----- Here
    mPlayer = new MediaPlayer();
    mEqualizer = new Equalizer(0, AuID);
    rgEqualizer = new RadioGroup(this);   <---- And here //Delete this 
```

# c++ - C++ 使用方括号和指向实例的指针

> ID：11069689
> 
> 赞同：17
> 
> 时间：2012-06-17T07:36:53.893
> 
> 标签：c++, class, pointers, operand

我创建了一个单例类，它使用`GetInstance()`方法来获取实例地址（指针）。在类内部，我有一个 unsigned long int 数组，我为它创建了`operator []`它（直接访问数组）。我如何使用我得到的指针`GetInstance`来使用`[] operator`？我试过了 ：

```
class risc { // singleton
protected:
unsigned long registers[8];
static risc* _instance;
risc() {
    for (int i=0;i<8;i++) {
        registers[i]=0;};
    }
public:
unsigned long   operator   [](int i) const  {return registers[i];}; // get []
unsigned long & operator   [](int i)        {return registers[i];}; // set []
static risc* getInstance() { // constructor
        if (_instance==NULL) {
            _instance=new risc();
        }
        return _instance;
    }
};

risc* Risc=getInstance();
*Risc[X]=... 
```

但它不起作用......有没有办法我可以使用括号直接使用类指针访问数组？

谢谢 ！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-17T07:39:31.087

试试这个：

```
(*Risc)[X]=... 
```

方括号运算符优先于指针取消引用运算符。也可以按名称调用运算符，尽管这会产生相当笨拙的语法：

```
Risc->operator[](x) = ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-20T18:09:22.963

您可以使用参考：

```
risc &Risc = *getInstance();
Risc[X] = ... 
```

如果您修改了指针，您可能会遇到问题，但在这种情况下不应该发生这种情况，因为它是一个单例。

有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/46328727/3341238)。

# ios - Titanium 无法在 iOS 模拟器上显示 admob

> ID：11069690
> 
> 赞同：0
> 
> 时间：2012-06-17T07:37:07.000
> 
> 标签：ios, admob, titanium-modules

我正在尝试让 Admob 与 Titanium iOS App 一起使用。

首先，我下载了 Ti.admob 模块并将其集成到我的应用程序中。在构建时，我可以在 Titanium 控制台上看到我的应用程序找到了 Ti.Admob 模块，但模拟器屏幕上没有显示任何内容。

这是我在 ApplicationWindow.js 中的代码

```
Titanium.Admob = require('ti.admob');
function ApplicationWindow(title) {
var currentwindow = Ti.UI.createWindow({
    title:title,
    backgroundColor:'red'
});

setAds(currentwindow);  
return currentwindow;
};
module.exports = ApplicationWindow;

function setAds(currentwin)
{
var ad; 
ad = Titanium.Admob.createView({
    top: 50, 
    left: 0,
    width: 320, 
    height: 50,
    publisherId: '<MY API KEY>',
    adBackgroundColor: 'black',
    testing: true,
    dateOfBirth: new Date(1981, 1, 1, 1, 1, 1),
    gender: 'female',
    keywords: 'test'
});

currentwin.add(ad);

ad.addEventListener('didReceiveAd', function() {
    alert('Did receive ad!');
});
ad.addEventListener('didFailToReceiveAd', function() {
    alert('Failed to receive ad!');
});
ad.addEventListener('willPresentScreen', function() {
    alert('Presenting screen!');
});
ad.addEventListener('willDismissScreen', function() {
    alert('Dismissing screen!');
});
ad.addEventListener('didDismissScreen', function() {
    alert('Dismissed screen!');
});
ad.addEventListener('willLeaveApplication', function() {
    alert('Leaving the app!');
}); 
```

}

这是我的 Titanium 控制台。

```
[INFO] One moment, building ...
[INFO] Detected third-party module: ti.admob/1.0
[INFO] Detected third-party module: ti.admob/1.0
[INFO] Titanium SDK version: 2.0.1 (04/12/12 16:33 999c68a)
[INFO] iPhone Device family: universal
[INFO] iPhone SDK version: 5.0
[INFO] iPhone simulated device: iphone
[INFO] Performing full rebuild. This will take a little bit. Hold tight...
[INFO] Performing clean build
[INFO] Compiling localization files
[INFO] Launching application in Simulator
[INFO] Launched application in Simulator (21.40 seconds)
[INFO] Application started
[INFO] testAdmob/1.0 (2.0.1.GA2.999c68a)
[INFO] AdMob module loaded 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:51:00.877

您没有在此代码中使用 admob 模块。您必须像这样更改 setAds 函数（注意 Admob.createView 而不是 Titanium.Admob.createView：

```
function setAds(currentwin) {
var Admob = require('ti.admob');
var ad;
ad = Admob.createView({
    top : 50, ........ 
```

# java - JSTL 舍入/舍入数

> ID：11069697
> 
> 赞同：5
> 
> 时间：2012-06-17T07:38:16.263
> 
> 标签：java, jsp, tags, jstl, rounding

这可能是一个愚蠢的问题，但假设`seconds`我的 JSP 页面中有一个变量，其值为 779。现在我想通过执行以下操作将其转换为分钟和秒：

```
 <c:set var="${seconds / 60}" value="min"/>
    <c:set var="${seconds mod 60}" value="sec"> 
```

这样我得到 min = 12.983333 和 sec = 59.0。

现在我想合并两者并将结果显示为 12:59。我面临的问题是`min`不断四舍五入到 13。我尝试了很多事情，例如：

```
 <fmt:parseNumber var="minutes" integerOnly="true" type="number" value="${min}" />

    <fmt:formatNumber type="number" pattern="###" value="${min}" var="minutes" />

    fn:substringBefore(min, '.')

    maxFractionDigits="0"

    // and so on... 
```

但他们都只是一致地返回 13。在这一点上，我有点不知所措。但我可能错过了一些东西。我希望这里有人对可能出现的问题有一个想法或提示。

**-编辑**

下面的代码使它最终工作。我不知道出了什么问题，因为它现在也可以使用“/”。也许其他地方有一些小错误。尽管如此，还是非常感谢您抽出宝贵的时间 :) 赞！

```
 <c:set var="min" value="${fn:substringBefore((seconds div 60), '.')}"/>  
    <fmt:formatNumber var="sec" pattern="##" value="${seconds mod 60)}"/> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T02:09:24.793

这（下）应该是唯一安全的方法。pattern="##" 没有得到很好的支持，minIntegerDigits="2" 更简单更干净。

```
<c:set var="minutes" value="${fn:substringBefore(seconds div 60, '.')}"/> 
<fmt:formatNumber var="seconds" minIntegerDigits="2" value="${ seconds - (minutes*60) }"/> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-17T08:48:26.417

使用整数除法来获取 的值`min`，而不是浮点除法：

```
<c:set var="min" value="${seconds div 60}" /> 
```

现在你得到 min = 12，你不必担心舍入问题。

# drupal-7 - Drupal7 工作流“发布节点”触发动作

> ID：11069699
> 
> 赞同：0
> 
> 时间：2012-06-17T07:39:00.267
> 
> 标签：drupal-7

我正在配置我的 drupal 7 安装。

我做了一个简单的发布工作流程：Draft->Submit->Public

现在，当我为工作流配置触发器时，我想让节点在从提交移动到公共时“发布”和“带到首页”

但是，选择操作对话框没有显示该选项。它只向我显示了一个“节点”操作：[将节点的工作流状态更改为下一个状态]

我希望有一个选项，例如 [发布节点] 和 [将其放在首页]

如何通过工作流触发器配置触发要发布的节点？

# python - Apache下的多线程导致重复线程

> ID：11069704
> 
> 赞同：0
> 
> 时间：2012-06-17T07:40:29.277
> 
> 标签：python, django, multithreading, apache2, threadpool

我在 Apache2 下运行一个 python 线程池来处理传入的特殊 HTTP 请求。

这个想法是每个请求源都有一个“处理程序”线程 - 所以如果我有三个设备（A、B、C）向我发送这些特殊请求，每个设备都会在服务器上有自己的“处理程序”线程（1- A、2-B、3-C)

我有一个这样定义的线程池类：

```
class threadController(threading.Thread)
   threadPool = [] 
```

当我收到一个新请求时，我会查看所有正在运行的线程，以匹配一个特定的线程，并将请求传递给它。

这似乎在 Windows 下运行良好。

但是，在 Linux 上，有时我的 threadPool 变量似乎返回为空，并且我得到了一个额外的线程。所以我有一个设备（A）发送请求，但最终有两个线程（1-A 和 2-A）。

奇怪的是：它总是**一个**额外的线程，永远不会更多。无论我的设备 (A) 发送 5 个请求还是 30 个请求。

我正在使用 mod_wsgi (3.3) 进行 django 集成。

注意：我意识到这是一种处理会话的非正统方式。我不是在寻找更好地处理会话的方法 - 我已经知道有更好的方法:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T23:18:18.950

在 Windows 上，只有一个 Apache 子进程处理请求。在非 Windows 系统上，如果使用嵌入式模式，则可以有多个进程。

使用 mod_wsgi 守护进程及其默认的单个进程。看：

[http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide#Delegation_To_Daemon_Process](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide#Delegation_To_Daemon_Process)

和：

[http://code.google.com/p/modwsgi/wiki/ProcessesAndThreading](http://code.google.com/p/modwsgi/wiki/ProcessesAndThreading)

# c# - C# ClickOnce 应用程序不更新

> ID：11069707
> 
> 赞同：1
> 
> 时间：2012-06-17T07:40:42.373
> 
> 标签：c#, visual-studio-2010, clickonce

我有一个想要发布到 FTP 站点的 C# 应用程序，它会自动从这个 FTP 位置更新我的应用程序。所以我运行发布向导：

1.  指定发布此应用程序的位置：

    ```
    ftp://45.webmasters.com/program/ 
    ```

2.  用户将如何安装应用程序：从 CD 或 DVD-ROM（不是网站也不是[UNC](http://en.wikipedia.org/wiki/Path_%28computing%29#Uniform_Naming_Convention)路径接受 FTP）
3.  应用程序应该在哪里检查更新？应用程序将从以下位置检查更新： ***我想从 FTP 站点更新，例如：[ftp://45.webmasters.com/program/](ftp://45.webmasters.com/program/)***，但此选项仅用于从网站 (HTTP) 更新应用程序.

我放弃了发布向导并尝试从属性发布。在解决方案资源管理器中，右键单击项目并单击属性，然后转到发布选项卡。

1.  发布文件夹：ftp: [//45.webmasters.com/program/](ftp://45.webmasters.com/program/)
2.  安装文件夹 URL（如果与上述不同）。所以这应该是空白的，因为我想从 FTP 站点安装它。我把它留空，不，它说它想给它一个 HTTP 位置。即便如此，您也可以选择指定 FTP 站点；它需要一个 URL。无论如何，假设我添加了 http: localhost/ 只是为了绕过这个框。我选择应用程序在线和离线以启用更新按钮。我按下更新按钮。
3.  应用程序应检查更新已选中。
4.  何时检查更新，选择应用程序启动前的单选按钮。
5.  未选中指定最低要求版本。
6.  更新位置（如果与发布位置不同）。因此，我将其留空，以便从发布位置检查更新。

最后，我按下 PUBLISH NOW，应用程序将发布在 FTP 站点上。我去 FTP 站点，下载应用程序和应用程序文件，然后从桌面运行应用程序，它会在应用程序启动之前检查更新，但是当我在 FTP 站点上发布较新版本并运行应用程序时，应该不是下载更新的版本吗？它没有；它坚持旧版本。

我无法理解这些选项。是否有可能不允许从 FTP 位置发布和更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:36:33.400

It says it in *[How to: Publish a ClickOnce Application using the Publish Wizard](http://msdn.microsoft.com/en-us/library/31kztyey%28v=vs.100%29.aspx)* that *Direct download from FTP is not supported.* when you publish to 'publish to a file share' - maybe you should choose 'publish to a web' path.

# html - 如何获得此页脚效果

> ID：11069708
> 
> 赞同：2
> 
> 时间：2012-06-17T07:41:33.650
> 
> 标签：html, css

我想知道这个主题如何使右下角的项目随着屏幕变小而消失。

[http://themeforest.net/item/jr-photography-wordpress-theme/full_screen_preview/1163891?ref=takeaction](http://themeforest.net/item/jr-photography-wordpress-theme/full_screen_preview/1163891?ref=takeaction)

我在右下角有项目，但是当屏幕太小时它们会向下移动而不是像这样消失。任何如何获得这种效果的评论或链接都会很棒！谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T08:16:15.937

## 不是媒体而是 CSS 浮动解决方案

我没有检查特定站点的源代码，您正在链接，但我创建了一个简单的 CSS 解决方案，当由于左侧元素而没有更多空间时隐藏右侧元素。

[这是一个 JSFiddle](http://jsfiddle.net/XGEM8/)。调整窗口宽度（或拖动列以调整内容象限宽度），使这两个元素对于容器宽度而言变得太宽。右边的内容会自动消失。

## 它能做什么？

您有带有两个附加容器的页脚容器，左右浮动。他们三个必须定义相同的高度，同时：

1.  页脚定义了`overflow: hidden`超出可见视口的任何内容都不会显示。
2.  然后其他两个只是在左右浮动

浮动然后照顾一切。当没有足够的空间来容纳浮动元素时，它们开始在有足够空间的下方渲染。但是*在下面*显示会隐藏它们，因为容器元素的高度有限。

```
<div class="footer container">
  <div class="left container">left content</div>
  <div class="right container">right content</div>
</div> 
```

​And simple CSS (including just relevant settings):

```
.container {
    height: 2em; /* all containers have the same height */
}

.footer {
    overflow: hidden;
}

.left {
    float:left;
}

.right {
    float: right;
}
​ 
```

# java - 我可以在java中动态引用一个对象吗？

> ID：11069709
> 
> 赞同：1
> 
> 时间：2012-06-17T07:41:35.590
> 
> 标签：java, object, dynamic, reference, runtime

我在一个名为 AnyLogic 的模拟环境中工作，它使用 Java 作为其底层代码。

在我的示例中，用户绘制流程图并在运行时实例化流程图的每个元素。我可以通过代码确定用户绘制的内容：

```
 LinkedList eo = (LinkedList) this.getEmbeddedObjects(); 
```

*   它返回一个字符串列表，表示流程图中所有对象的名称。

我想动态访问这些对象的方法，但我是 Java 新手，不知道如何去做。根据我对反射的理解，我可以实例化一个 classForName，但在这种情况下，我已经实例化了对象，我想使用字符串来访问它们。

我不确定如何继续并感谢任何建议。

谢谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T07:43:49.180

[http://java.sun.com/developer/technicalArticles/ALT/Reflection/](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)

您可以获得方法名称列表，找到您想要的并调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:48:09.797

您可以为该任务使用[Java 反射 API 。](http://docs.oracle.com/javase/tutorial/reflect/index.html)

虽然这个 API 有点冗长。如果这是一个问题，那么您应该选择可用的流式[反射](http://code.google.com/p/joor/) [API](http://fest.easytesting.org/reflect/apidocs/index.html) [之一](http://projetos.vidageek.net/mirror/mirror/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T07:54:01.830

什么是“流程图中所有对象的名称”？你有一些按名称存储对象的 HashMap 吗？如果是这样，只需按名称获取对象并直接调用其方法，无需任何反射。

# android - 如何在视图上模拟橡皮擦？

> ID：11069711
> 
> 赞同：2
> 
> 时间：2012-06-17T07:41:52.900
> 
> 标签：android, graphics, drawing

我一直在开发绘图应用程序，代码如下：

```
public class PainterView extends View implements DrawingListener {

    private GestureDetector detector;
    private Context context;
    private Painter painter;
    private Bitmap background;
    private Bitmap bitmap;
    private Paint bitmapPaint;
    private Path path;
    private Paint paint;

    private float x;
    private float y;

    public PainterView(Context context, Painter painter) {

        super(context);
        this.context = context;
        this.painter = painter;
        detector = new GestureDetector(context, new GestureListener());

    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        if (bitmap != null) {
            canvas.drawBitmap(background, 0, 0, bitmapPaint);
            canvas.drawBitmap(bitmap, 0, 0, bitmapPaint);
            canvas.drawPath(path, paint);
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        detector.onTouchEvent(event);
        x = event.getX();
        y = event.getY();
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            painter.touchStart(x, y);
            break;
        case MotionEvent.ACTION_MOVE:
            painter.touchMove(x, y);
            break;
        case MotionEvent.ACTION_UP:
            painter.touchUp();
            break;
        }
        return true;
    }

    @Override
    public void onPictureUpdate(Bitmap background, Bitmap bitmap, Paint bitmapPaint, Path path,
            Paint paint) {
        this.background=background;
        this.bitmap = bitmap;
        this.bitmapPaint = bitmapPaint;
        this.path = path;
        this.paint = paint;
        invalidate();
    }

    public void setPainter(Painter painter) {
        this.painter = painter;
    } 
```

所以，背景位图是图像（直纹纸），我需要知道如何模拟橡皮擦以允许用户擦除他的笔记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:04:25.833

你可以这样做：

```
public class Eraser
{
    public void erase(int locX, int locY, int brushsize)
    {
        for(int x = locX - brushsize;x < locX + brushsize;x++)
        {
            for(int y = locY - brushsize;y < locY + brushsize;y++)
            {
                map.setPixle(x,y,Color.white);
            }
        }
    }

    private Bitmap map;
} 
```

这是一个方形橡皮擦，如果你真的想的话，我相信你可以想办法把它变成一个圆圈。我希望他的帮助！

# qt - 如何二进制到qpixmap

> ID：11069717
> 
> 赞同：0
> 
> 时间：2012-06-17T07:42:48.047
> 
> 标签：qt, qpixmap

我发现很难将二进制转换为图片，我使用像素图。转换成二进制是正确的，但是当我显示使用这个程序时实际上不起作用。

这是我的代码：

```
if (binaryNumber[0]==1)ui->led16->setPixmap(QPixmap("../../picture/ball-yellow.png"));
else ui->led16->setPixmap(QPixmap("../../picture/ball-gray.png"));
if (binaryNumber[1]=1) ui->led15->setPixmap(QPixmap("../../picture/ball-yellow.png"));
else ui->led15->setPixmap(QPixmap("../../picture/ball-gray.png"));
if (binaryNumber[2]==1)ui->led14->setPixmap(QPixmap("../../picture/ball-yellow.png"));
else ui->led14->setPixmap(QPixmap("../../picture/ball-gray.png"));
if (binaryNumber[3]==1)ui->led13->setPixmap(QPixmap("../../picture/ball-yellow.png"));
else ui->led13->setPixmap(QPixmap("../../picture/ball-gray.png"));
if (binaryNumber[4]==1)ui->led12->setPixmap(QPixmap("../../picture/ball-yellow.png"));
else ui->led12->setPixmap(QPixmap("../../picture/ball-gray.png"));

bool ok2 = false;
QByteArray binaryNumber = QByteArray::number(DO.toLongLong(&ok2, 16), 2);

qDebug()<<binaryNumber<<binaryNumber[0]<<binaryNumber[1]<<binaryNumber[2 <<binaryNumber[3]; 
```

IE

```
binaryNumber =1011
binaryNumber[0] = 1
binaryNumber[1] = 0
binaryNumber[2] = 1
binaryNumber[3] = 1 
```

但当

```
binaryNumber =100
binaryNumber[0] = 1
binaryNumber[1] = 0
binaryNumber[2] = 0 
```

所以当我使用像素图时，导致火焰不对应二进制数，因为数组[0]在大小不同时是不同的。有什么简单的代码适合我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:55:02.693

您`QByteArray`无需使用 a 来存储数字的位。在 C/C++ 中，您可以通过使用掩码执行按位与 (&) 直接访问这些位。

```
template <typename T> static QPixmap setPixmap(T * p, int value, int bitNo)
{
  const bool bit = value & (1<<bitNo);
  p->setPixmap(bit ? QPixmap("../../picture/ball-yellow.png")   
                   : QPixmap("../../picture/ball-gray.png"));
}

void Class::setDisplay(int val)
{
  setPixmap(ui->led12, val, 0);
  setPixmap(ui->led13, val, 1);
  setPixmap(ui->led14, val, 2);
  setPixmap(ui->led15, val, 3);
  setPixmap(ui->led16, val, 4);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:34:27.573

请注意，`QByteArray::number()`返回字母数字字符（`'0'`= 48、`'1'`= 49 等），而不是具有数值 0、1 等的字符。这是一个重要的区别！

如果这样做`binaryNumber = QByteArray::number(value, 2)`，这将返回一个字节数组，例如`"1010"`。因此, `binaryNumber[0] == '1'`, 不是`binaryNumber[0] == 1`:

```
if (binaryNumber[0]=='1')ui->led16->setPixmap(QPixmap("../../picture/ball-yellow.png"));
else ui->led16->setPixmap(QPixmap("../../picture/ball-gray.png"));
if (binaryNumber[1]=='1')ui->led15->setPixmap(QPixmap("../../picture/ball-yellow.png"));
else ui->led15->setPixmap(QPixmap("../../picture/ball-gray.png"));
if (binaryNumber[2]=='1')ui->led14->setPixmap(QPixmap("../../picture/ball-yellow.png"));
else ui->led14->setPixmap(QPixmap("../../picture/ball-gray.png"));
if (binaryNumber[3]=='1')ui->led13->setPixmap(QPixmap("../../picture/ball-yellow.png"));
else ui->led13->setPixmap(QPixmap("../../picture/ball-gray.png"));
if (binaryNumber[4]=='1')ui->led12->setPixmap(QPixmap("../../picture/ball-yellow.png"));
else ui->led12->setPixmap(QPixmap("../../picture/ball-gray.png")); 
```

请注意，您的代码充满了冗余代码行，导致软件质量不佳。您应该尝试在循环中编写上面的代码，或者至少移出像素图。在一些静态变量或包含类的构造函数中移动像素图初始化也会导致一些性能提升。

所以你的类可能看起来像这样：（我只包括了相关的部分，当然，还必须有 UI 的代码。）

```
class LEDNumberView
{
private:
    // member variables:
    QPixmap bitOn;
    QPixmap bitOff;

    // helper function
    inline QPixmap getBitPixmap(bool bitVal)
    {
        return bitVal ? bitOn : bitOff;
    }

public: 
    // constructor
    LEDNumberView()
    {
        QString path = "../../picture/ball-%1.png";
        bitOn = QPixmap(path.arg("yellow"));
        bitOff = QPixmap(path.arg("gray"));
    }

    // call whenever you want to change the binary number displayed by the LEDs
    void setBinaryNumber(int value)
    {
        QByteArray binaryNumber = QByteArray::number(value, 2);
        ui->led16->setPixmap(getBitPixmap(binaryNumber[0] == '1'));
        ui->led15->setPixmap(getBitPixmap(binaryNumber[1] == '1'));
        ui->led14->setPixmap(getBitPixmap(binaryNumber[2] == '1'));
        ui->led13->setPixmap(getBitPixmap(binaryNumber[3] == '1'));
        ui->led12->setPixmap(getBitPixmap(binaryNumber[4] == '1'));
        ui->led11->setPixmap(getBitPixmap(binaryNumber[5] == '1'));
    }
}; 
```

要将[Kuba Ober 的答案](https://stackoverflow.com/questions/11069717/how-to-binary-to-qpixmap#11071434)与我的结合起来，按照他的建议编写`setBinaryNumber`函数。这取决于您喜欢哪种二进制转换方法 - 位操作（使用他的方法）或转换为然后使用字节（您的）。

# c - C 拼写检查、字符串概念、算法

> ID：11069719
> 
> 赞同：2
> 
> 时间：2012-06-17T07:43:11.290
> 
> 标签：c, performance, algorithm, spell-checking

这是我关于堆栈溢出的第一个问题。一些快速的背景知识，这不是一个学校项目，只是为了好玩、练习和学习。我正在尝试用 C 语言进行拼写检查。我遇到的问题是想出可能的单词来替换拼写错误的单词。

我还应该指出，在我的课程中，我们还没有接触到更高层次的编程概念，比如时间复杂度或算法开发。我这么说是因为我觉得我真正要问的概念有名字，我只是还没有听说过。

在其他类似的帖子中，大多数人建议使用 levenshtein 距离或遍历帕特里夏树；只比较子字符串会有问题吗？我想出的（非常低效的）算法是：

将第一个`N`字符 where`N = length of the misspelled word - 1`与字典单词进行比较（它们将从系统文件中读取到动态分配的数组中）

如果`N`拼写错误的单词中的字符和字典中的单词匹配，则将其添加到建议列表中；如果找不到更多匹配项，则递减`N`

继续直到找到 10 条建议或`N = 0`

感觉笨拙和尴尬，但这是我们教科书建议的处理方式。我已经阅读了关于遍历树和计算各种有趣的东西以提高效率和准确性的 wiki 文章，但此时它们已经超出了我的想象。感谢您提供任何帮助，并感谢您花时间阅读本文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T07:45:59.353

现代计算机速度很快，非常快。值得您使用您描述的算法对其进行编码，并使用您的字典查看它在您的机器上对您的效果如何。如果效果可以接受，那就太好了！否则，您可以尝试通过选择更好的算法来优化它。

你读到的所有花哨的算法都有以下一个或两个目标：

*   加快拼写检查
*   提供更好的更正建议

但这仅在您认真关注性能时才重要。编写自己的代码来执行此操作没有任何问题。它可能不是很好，但你会学到很多，而不是跳入并实现一个你还不理解的算法。

# android - 在 TTS android 中暂停

> ID：11069725
> 
> 赞同：6
> 
> 时间：2012-06-17T07:43:52.883
> 
> 标签：android, text-to-speech

我正在开发一个可以读出文档中文本的应用程序，我想添加暂停和恢复功能，但在 TTS 中找不到任何 pause() 方法。有什么办法可以暂停..？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T08:33:21.710

有一种方法可以暂停。只需从[这里](https://github.com/gast-lib/gast-lib/blob/master/app/src/root/gast/playground/speech/tts/TextToSpeechDemo.java)`TextToSpeech.playSilence()`调用查看下面的代码。

它会说一些实际的文字以及一些沉默。

```
private void playScript()
{
    Log.d(TAG, "started script");
// setup

// id to send back when saying the last phrase
// so the app can re-enable the "speak" button
HashMap<String, String> lastSpokenWord = new HashMap<String, String>();
lastSpokenWord.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID,
        LAST_SPOKEN);

// add earcon
final String EARCON_NAME = "[tone]";
tts.addEarcon(EARCON_NAME, "root.gast.playground", R.raw.tone);

// add prerecorded speech
final String CLOSING = "[Thank you]";
tts.addSpeech(CLOSING, "root.gast.playground",
        R.raw.enjoytestapplication);

// pass in null to most of these because we do not want a callback to
// onDone
tts.playEarcon(EARCON_NAME, TextToSpeech.QUEUE_ADD, null);
tts.playSilence(1000, TextToSpeech.QUEUE_ADD, null);
tts.speak("Attention readers: Use the try button to experiment with"
        + " Text to Speech. Use the diagnostics button to see "
        + "detailed Text to Speech engine information.",
        TextToSpeech.QUEUE_ADD, null);
tts.playSilence(500, TextToSpeech.QUEUE_ADD, null);
tts.speak(CLOSING, TextToSpeech.QUEUE_ADD, lastSpokenWord); 
```

}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T07:56:51.937

TextToSpeech 类能够添加一个[setOnUtteranceCompletedListener](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html)（或对于 api 级别 15+ [setOnUtteranceProgressListener](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html)），它可以让你在 TTS 话语完成时附加一个监听器，然后你可以开始你的第二个话语，或者你的暂停，或者你需要的任何东西..

# android - Android：如何使多行文本自动向下滚动？

> ID：11069726
> 
> 赞同：0
> 
> 时间：2012-06-17T07:43:56.827
> 
> 标签：android, android-edittext

我想在添加更多文本时使多行文本自动向下滚动：

```
<EditText
        android:id="@+id/Text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/TypeBox"
        android:layout_below="@+id/ReceiverName"
        android:layout_marginLeft="10dip"
        android:layout_marginRight="10dip"
        android:layout_weight="0.65"
        android:ems="10"
        android:focusable="false"
        android:gravity="bottom"
        android:inputType="textMultiLine|textNoSuggestions" >
</EditText> 
```

我试过搜索它，但我能找到的只是滚动视图中文本框的自动滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:44:29.653

我认为，您需要添加一行：

```
android:inputType="textFilter|textMultiLine|textNoSuggestions" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-28T04:26:16.800

> 在活动 onCreate() 中添加以下代码，这将滚动行为添加到文本视图

```
 textView.setMovementMbehavior ScrollingMovementMethod());

 <TextView
            android:id="@+id/textView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:layout_marginBottom="5dp"
            android:layout_marginTop="5dp"
            android:text="text"
            android:textColor="#ffffff"
            android:textSize="20sp"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-28T04:15:27.147

```
android:inputType="textMultiLine"
android:editable="true"
android:enabled="true"
android:minLines="6"
android:maxLines="6"
android:isScrollContainer="true"
android:focusable="true" 
```

请参阅此链接以获取更多信息

[https://alvinalexander.com/source-code/android/android-edittext-isscrollcontainer-example-how-make-multiline-scrolling](https://alvinalexander.com/source-code/android/android-edittext-isscrollcontainer-example-how-make-multiline-scrolling)

# c# - Facebook Silverlight Canvas 隐藏聊天

> ID：11069728
> 
> 赞同：1
> 
> 时间：2012-06-17T07:44:02.050
> 
> 标签：c#, facebook, silverlight-5.0, facebook-canvas

简单地说，**如何**将托管在 Facebook Canvas 中的 Silverlight 发送到 Back 以避免覆盖聊天窗口？

我查看了这个相关的[Flash Question](https://stackoverflow.com/questions/8202256/facebook-chat-hides-flash-apps-when-open)，但在 Silverlight 中找不到相应的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T07:51:02.627

抱歉，我在发布问题后找到了答案，

```
<div id="silverlightControlHost">
    <object data="data:application/x-silverlight-2," type="application/x-silverlight-2"

        <param name="background" value="transparent" />    <---
        <param name="windowless" value="true" />           <--- 
```

# asp.net - IIS 7.5 压缩和分块传输问题

> ID：11069732
> 
> 赞同：2
> 
> 时间：2012-06-17T07:44:43.467
> 
> 标签：asp.net, iis-7.5, http-compression, chunked-encoding, http-chunked

我不得不渲染一个 json 提要。由于提要的大小约为 10 MB，因此我决定在 ASPNET 中启用压缩。我为 json mime 类型启用了动态压缩。压缩效果很好，并将大小减小到 1 MB（对使用的服务器 CPU 有显着的压缩优势）。

但奇怪的是，浏览器每次花费 2.6 分钟并失败，尽管我看到 JSON 在几秒钟内收到。

我尝试使用提琴手和检查工具进行调试。我看到分块传输编码作为响应。所以浏览器等待大约 150 秒来接收 0 大小的块来完成。

我不会在任何 json 服务中刷新响应。因此 IIS 在这种情况下启用了分块传输。关闭 enableChunkedEncoding 也无济于事。

如何使这种压缩工作或压缩+分块传输一起工作？

这是请求和响应标头。

**请求标头**

请求网址：http://localhost:8080/Default2.aspx

请求方法：GET

状态码：200 OK

接受编码：gzip、deflate、sdch

**响应标头**

内容编码：gzip

内容类型：应用程序/json；字符集=utf-8

传输编码：分块

编辑：有趣的是，当压缩响应 < 1 MB 时一切正常。当响应大于 1 MB 时，问题就会蔓延。[我在这里](https://github.com/lokeshwer/HttpChunkedTest)创建了测试项目

提前致谢

# php - 使用图形 API 将内容发布到 FB

> ID：11069733
> 
> 赞同：1
> 
> 时间：2012-06-17T07:45:13.457
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

好的，

所以，我这几天一直在涉足 Graph API。我知道如何将简单的消息发布到用户的墙上。但是，我需要将多个链接发布到用户的墙上。显然，使用我以前的方法是不可能的。我在这里迷路了。一旦他们在我的网站上做出预测，我需要将内容发布到用户的墙上。因此，例如，我需要在用户的墙上发布一个帖子，内容如下：

```
<?php
  echo '<img src="img/teams/'.$winning_team.'.png" alt="'.$winning_team.'" /> '.$user_name.' predicted the '.$winning_team.' to beat the '.$losing_team.' on '.$game_date.''; ?> 
```

有谁知道我如何使用图形 API 来实现这一点？我已经在 FB 上设置了自定义操作和对象。但是，完全不知道从这里去哪里。

谢谢

我拥有的代码如下：

```
$facebook = new Facebook(array(
    'appId' => 'appID',
    'secret' => 'secret',
    'cookie' => true
));

$access_token = $facebook->getAccessToken();
$user = $facebook->getUser();

if($user != 0) 
{
     $attachment = array(
        'access_token' => $access_token,
        'game' => 'http://www.sportannica.com',
        'away_team' => 'New York Yankees',
        'home_team' => 'New York Mets'
    );

    $opts = array(
        CURLOPT_CONNECTTIMEOUT => 10,
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_TIMEOUT => 60,
        CURLOPT_USERAGENT => 'facebook-php-3.1',
        CURLOPT_POSTFIELDS => $attachment,
        CURLOPT_URL => 'https://graph.facebook.com/me/predict-edit-add:predict'
    );

    $ch = curl_init();
    curl_setopt_array($ch, $opts);
    $result = curl_exec($ch);
    $info = curl_getinfo($ch);
    curl_close($ch);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T13:17:41.973

前提是您有权以用户身份发帖。您上面的方法调用了动作，链接和附件不能以您需要的方式添加到动作中。

> 参考用户帖子连接。

[https://developers.facebook.com/docs/reference/api/user/#posts](https://developers.facebook.com/docs/reference/api/user/#posts)

## 带有属性功能的 js sdk 提要帖子

```
function anotherfeedthis() {
    FB.ui({ method: 'feed', 
         message: 'Testing Message',
        caption: 'This is the Caption value.',
        name: 'Testing JS feed dialog on Antoher Feed',
        link: 'http://anotherfeed.com?ref=link',
        description: 'Testing property links, and action links via Feed Dialog Javascript SDK',
        //picture: 'https://shawnsspace.com/ShawnsSpace.toon.nocolor..png',
        properties: [
        { text: 'Link Test 1', href: 'http://anotherfeed.com?ref=1'},
         { text: 'Link Test 2', href: 'http://anotherfeed.com?ref=2'},
                ],
        actions: [
        { name: 'Shawn', link: 'http://anotherfeed.com'}
                ]       
        });
        }; 
```

## 简单的 php sdk 提要帖子

```
$facebook->api('/me/feed', 'post', array(
'message' => message,
'name' => 'name or title',
'description' => 'here goes description and links http:anotherfeed.com | http://facebook.com/anotherfeed',
'caption' => 'this is caption for action link',
'picture' => 'image url',
'link' => 'action link here',
)); 
```

## 带有属性数组的 php sdk 提要帖子。

```
$build=array(
'message' => 'message',
'name' => 'name or title',
'description' => 'here goes description and links http:anotherfeed.com | http://facebook.com/anotherfeed',
'caption' => 'this is caption for action link',
'picture' => 'image url',
'link' => 'action link here',
    'properties' => array(
    array('text' => 'test link 1', 'href' => 'http://anotherfeed.com/?ref=1'),
    array('text' => 'test link 1', 'href' => 'http://anotherfeed.com/?ref=1'),
    ),
);
$facebook->api('/me/feed', 'post', $build); 
```

# java - java模式和匹配器

> ID：11069739
> 
> 赞同：1
> 
> 时间：2012-06-17T07:46:28.840
> 
> 标签：java, regex, matcher

我正在使用 Java 中的 Pattern 和 Matcher 类来解析链接文件脚本。我需要的文本在 SECTIONS 部分：

```
SECTIONS
    {
        .text : {} > FAST_MEM /* Link all .text sections into ROM */
        .intvecs : {} > 0x0 /* Link interrupt vectors at 0x0 */
        .data : /* Link .data sections */
        {
            tables.obj(.data)
            . = 0x400; /* Create hole at end of block */
        } = 0xFF00FF00 > EEPROM /* Fill and link into EEPROM */
        ctrl_vars: /* Create new ctrl_vars section */
        {
            ctrl.obj(.bss)
        } = 0x00000100 > SLOW_MEM /* Fill with 0x100 and link into RAM */
        .bss : {} > SLOW_MEM /* Link remaining .bss sections into RAM */
    } 
```

现在我正在使用

```
Pattern SectPattern = Pattern.compile("(SECTIONS\\{(.*)\\})"); 
```

我想提取 (.*) 组，但结果不是我所期望的 有人对更好的模式有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:03:40.997

这将匹配并打印 SECTIONS`{`和`}`. 中的内容：

```
Pattern pattern = Pattern.compile("SECTIONS.*?\\{(.*)\\}", Pattern.DOTALL);
Matcher matcher = pattern.matcher(sample);
matcher.find();

System.out.println(matcher.group(1)); 
```

`sample`你的图案样本在哪里。`Pattern.DOTALL`需要正确处理换行符，其他应该是不言自明的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:00:01.593

也许你有你不考虑的空白。
试试这个：

```
"SECTIONS\\s*\\{(.*)\\}" 
```

请注意，我还从模式中删除了外部组（我没有看到它的原因）。
在我的示例中，匹配后，使用组 1。
请注意，这仅在您进行贪婪匹配时才有效（默认情况下是这种情况）。

# ruby-on-rails-3 - Rails 3 - 多态模型需要共享模型方法

> ID：11069741
> 
> 赞同：0
> 
> 时间：2012-06-17T07:46:30.913
> 
> 标签：ruby-on-rails-3, activerecord, shared-libraries, polymorphic-associations

目前我在多个模块中重复了这样的代码：

```
def do_something_polymorphic
  self.something_polymorphic_able.where(.....).each do |thing|
    ...
  end
end 
```

本着 DRY 的精神，我尝试`do_something_polymorphic()`进入`/lib/shared_methods.rb`. 当我`include SharedMethods`在模型中添加时出现错误：

```
uninitialized constant Chapter::SharedMethods (NameError) 
```

我不知道如何解决。

然后我尝试将模块文件加载到模型（`load 'shared_methods.rb'`）中。它加载正常，但是 Module 构造脱离了命名空间，并且`do_something_polymorphic()`对于加载/包含它的模型未定义。因此，如果您尝试自引用对象，“模块”似乎不是一个选项。

最后，我从 shared_methods.rb 文件中删除了模块结构，只在文件中保留了 do_something_polymorphic() 方法。它加载正常，但是当我运行该方法时出现错误：

```
NoMethodError: private method `do_something_polymorphic' called for #<Polymorphic_Object:0x007fc27e5b8338> 
```

不知道从这里去哪里。我可以回到将其设置为模块并尝试将“self”作为对象参数传递给该方法，但我想保留针对其对象干净地调用该方法的能力： `current_object.do_something_polymorphic`

没有走继承路线（我真的想避免，）有没有办法在多个模型之间共享使用`self`关键字的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:48:54.667

您可以通过修改应用程序配置来自动包含 lib/ 模块。

```
#config/application.rb

config.autoload_paths += %W(#{config.root}/lib) 
```

# c# - 从活动目录中检索数据给出了不完整的列表

> ID：11069747
> 
> 赞同：0
> 
> 时间：2012-06-17T07:48:22.220
> 
> 标签：c#, .net, active-directory

作为成员，我是 stackoverflow 的新手，尽管我经常遵循这一点:) 我的代码连接到活动目录以获取功能组的成员，实际上在列表中的 1680 个奇数成员中只给了我 1490 个奇数成员。我在 Stackoverflow 和 Internet 上进行了很多搜索，但我没有找到为什么代码会导致列表不完整的答案。可以，任何人请给我任何指示。谢谢 ：）

这是连接到 Active Directory 以检索数据的代码：

```
 public static DataTable GetAdUsers(string configSection)
    {

        DataRow dr; 
        Hashtable ADGroups = (Hashtable)ConfigurationManager.GetSection(configSection);
        string adGroup;
        string adGroupDesc;
        string sApplication;
        string sLast_Login;
        string sAccount_owner;
        string sPath;

        DataTable dt = new DataTable();

        sApplication = "Application";
        dt.Columns.Add(sApplication);

        dt.Columns.Add("Profile", Type.GetType("System.String"));
        dt.Columns.Add("Account Name", Type.GetType("System.String"));

        sLast_Login = "Last Login";
        dt.Columns.Add(sLast_Login);

        sAccount_owner = "Account Owner";
        dt.Columns.Add(sAccount_owner);

        sPath = "Path";
        dt.Columns.Add(sPath);

        string domainName = "myDomain";

        PrincipalContext pcRoot = new PrincipalContext(ContextType.Domain, domainName);
        IDictionaryEnumerator adGroupEnumerator = ADGroups.GetEnumerator();

        while (adGroupEnumerator.MoveNext())
        {
            adGroup = adGroupEnumerator.Key.ToString();
            adGroupDesc = adGroupEnumerator.Value.ToString();

            GroupPrincipal grp = GroupPrincipal.FindByIdentity(pcRoot, IdentityType.SamAccountName, adGroup); 
            System.DirectoryServices.DirectoryEntry de = (System.DirectoryServices.DirectoryEntry)grp.GetUnderlyingObject();
            foreach (string sDN in de.Properties["member"])
            {
                System.DirectoryServices.DirectoryEntry deMember = new System.DirectoryServices.DirectoryEntry("LDAP://" + sDN.ToString());
                try
                {
                    dr = dt.NewRow();

                    string output1;
                    string subStringE1 = "DC=";
                    int length1 = de.Path.ToString().Length;
                    int length0 = de.Path.ToString().IndexOf(subStringE1);
                    string str1 = de.Path.ToString().Substring(length0, length1 - length0);
                    string subStringE2 = ",DC";
                    int length2 = str1.ToString().IndexOf(subStringE2);
                    output1 = str1.ToString().Substring(3, length2 - 3);

                    dr["Application"] = "Application";
                    dr["Profile"] = adGroupDesc;

                    string AccountName = deMember.Properties["samAccountName"].Value.ToString();

                    dr["Account Name"] = deMember.Properties["samAccountName"].Value.ToString();
                    dr["Last Login"] = "";
                    dr["Account Owner"] = deMember.Properties["givenName"].Value.ToString() + @"-" + deMember.Properties["sn"].Value.ToString();

                    string Path = output1 + @"\" + adGroup + @"\" + deMember.Properties["samAccountName"].Value.ToString();

                    Console.WriteLine(Path);
                    dr["Path"] = output1 + @"\" + adGroup + @"\" + deMember.Properties["samAccountName"].Value.ToString();

                    dt.Rows.Add(dr);
                }
                catch (Exception ex)
                {
                    Console.WriteLine("Error occured for user name" + sDN + "\n" + ex.Message);
                }
            }
        }
        return dt;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:00:35.863

由于 SizeLimit 的默认限制，您可能只能获得大约 1,490 个对象左右。要解决这个问题，您需要“翻页”结果。

[只需使用Enumating Members in a Large Group 中](http://msdn.microsoft.com/en-us/library/ms180907%28v=vs.80%29.aspx)引用的代码即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:02:01.200

当返回的结果集可能包含超过 1000 个项目时，您必须使用分页搜索。在不分页的情况下执行的 Active Directory 搜索仅限于返回最多前 1000 条记录。对于分页搜索，结果集以单独的页面呈现，每个页面包含预定数量的结果条目。使用这种类型的搜索，将返回结果条目的新页面，直到到达结果集的末尾。

默认情况下，响应查询请求的服务器在返回数据之前会完整计算一个结果集。在大型结果集中，这需要在获取结果集时使用服务器内存，并在返回大型结果时需要网络带宽。设置页面大小允许服务器在构建页面时以页面的形式发送数据。然后客户端缓存这些数据并向应用程序级代码提供一个游标。

分页是通过定义在数据通过网络返回到客户端之前服务器计算的行数来设置的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:00:51.587

通过研究并尝试我的运气找到了答案。使用目录条目是问题所在，并且不需要使用页面搜索，尽管我尝试过。

工作代码如下：

```
GroupPrincipal grp = GroupPrincipal.FindByIdentity(pcRoot, adGroup); //fglbcmdolpctx
                if (grp != null)
                {
                    foreach (Principal p in grp.GetMembers(true))
                    {
                        try
                        {
                            dr = dt.NewRow();
                            dr["Application"] = "Commodities OpenLink";
                            dr["Profile"] = adGroupDesc;
                            string AccountName = p.SamAccountName.ToString().ToLower();
                            dr["Account Name"] = AccountName;
                            dr["Last Login"] = "";
                            string sLastName, sFirstName;
                            int iLastNameIndex0, iLastNameIndex1, iFirstNameIndex0, iFirstNameIndex1;
                            int lengthofString = p.Name.ToString().Length;
                            iLastNameIndex1 = p.Name.ToString().IndexOf(",");

                            if (iLastNameIndex1 == -1)
                            {
                                sLastName = "";
                            }
                            else
                            {
                                sLastName = p.Name.ToString().Substring(0, iLastNameIndex1);
                            }

                            iFirstNameIndex0 = p.Name.ToString().IndexOf(",");
                            iFirstNameIndex1 = p.Name.ToString().IndexOf(":");
                            if (iFirstNameIndex0 == -1 || iFirstNameIndex1 == -1)
                            {
                                sFirstName = p.Name.ToString();
                                sLastName = "";
                            }
                            else
                            {
                                sFirstName = p.Name.ToString().Substring(iFirstNameIndex0 + 1, iFirstNameIndex1 - iFirstNameIndex0 - 1);
                            }

                            sAccount_owner = sLastName + @"-" + sFirstName;
                            dr["Account Owner"] = sAccount_owner;

                            string sPath_Domain_Part;
                            string sFirstIndexofExtraction = "DC=";
                            int ilength_String = p.DistinguishedName.ToString().Length;
                            int iLenght_ExtractionPoint1 = p.DistinguishedName.ToString().IndexOf(sFirstIndexofExtraction);
                            string str1 = p.DistinguishedName.ToString().Substring(iLenght_ExtractionPoint1, ilength_String - iLenght_ExtractionPoint1);

                            string subStringE2 = ",DC";
                            int iLenght_ExtractionPoint2 = str1.IndexOf(subStringE2);
                            sPath_Domain_Part = str1.Substring(3, iLenght_ExtractionPoint2 - 3);
                            string sPath1 = sPath_Domain_Part + @"\" + adGroup + @"\" + p.SamAccountName.ToString();
                            dr["Path"] = sPath_Domain_Part + @"\" + adGroup + @"\" + p.SamAccountName.ToString();
                            dt.Rows.Add(dr);
                        }

                        catch (Exception ex)
                        {
                            Global.logfile.WriteLine("Error occured for user name" + adGroup + p.SamAccountName + "\n" + ex.Message);
                        }
                    }
                } 
```

# android - Android R.java 使用

> ID：11069750
> 
> 赞同：1
> 
> 时间：2012-06-17T07:48:36.107
> 
> 标签：android, android-layout, android-intent

当我们在 strings.xml 文件或 layout.xml 文件中添加一些条目时，R.java 文件会自动修改。同样，如果我们想从布局文件中引用某些内容，例如读取用户输入的 EditText 值，那么我们再次在我们的 java 代码中引用 R.java 文件来读取这些值。

这个 R.java 文件是关于什么的？这个 R.java 文件的每个条目的值似乎都是 HEXADECIMAL 格式，但它的用途是什么？

我已经阅读了文档，但我对这个 R.java 感到相当困惑 :(

请有人上前解释一下这个 R.java 文件的全部内容:(

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:21:20.070

[http://developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)说：

> ```
> android:id="@+id/my_button" 
> ```
> 
> 字符串开头的符号 (@) 表示 XML 解析器应该解析和扩展 ID 字符串的其余部分，并将其标识为 ID 资源。加号 (+) 表示这是一个新资源名称，必须创建并添加到我们的资源中（在 R.java 文件中）。

R.java 文件由 Android 资源管理器 ( **aapt.exe** ) 生成，其中包含对您应用的所有资源的引用。每个引用都是一个唯一的 id（public static final int）。这些常量以十六进制格式写入 R.java 文件。为每个资源分配特定整数的逻辑是 Android 资源管理器私有的。您可以在互联网上查看**aapt.exe**的源代码，例如[http://gitorious.org/rowboat/frameworks-base/trees/d58fb97ddf052b3ceac921ac7e936af990392b2c/tools/aapt](http://gitorious.org/rowboat/frameworks-base/trees/d58fb97ddf052b3ceac921ac7e936af990392b2c/tools/aapt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:15:56.203

它将资源对象转换为 Java 可识别的名称，供您在代码中引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T08:16:38.977

R 类基本上是 Android 从您的代码中提供资源访问的方式。正如您在保存该资源文件时更改 strings.xml 等时所写的那样，Android SDK 将重新编译 R 类以使您的更改可在您的代码中访问。R类中的值或多或少并不重要，因为Android内部使用它来映射，例如字符串到ID。

要从代码中引用字符串，请使用 R，如下所示：

```
R.string.MyString 
```

如果你在 string.xml 中的字符串被称为 MyString。布局等相同。

我想这就是你读到的，但除此之外，[这里](http://developer.android.com/guide/topics/resources/accessing-resources.html)解释得很好。

# android - Android - AdMob 点击次数

> ID：11069754
> 
> 赞同：2
> 
> 时间：2012-06-17T07:49:19.853
> 
> 标签：android, admob

我正在为 Android 编写免费游戏，我将使用 AdMob。我有一个关于点击添加的问题。我知道我可以检查用户何时单击 AdView 中的 onClick 处理程序的添加。我想实现一个功能，为用户提供一些点击添加的“特殊奖励”。哪种方法更适合捕获添加点击，onClick 或 onDismissScreen？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:22:50.410

我认为 onDismissScreen 是一种更清洁的方式。但要小心，强迫用户点击广告可能违反 Admob TOS。

# css - CSS - 针对非文本阴影支持的浏览器

> ID：11069759
> 
> 赞同：0
> 
> 时间：2012-06-17T07:49:59.677
> 
> 标签：css

是否有任何 CSS hack 仅针对不支持`text-shadow`CSS 属性的浏览器？

这是一个非常重要的可见性/可读性/可访问性问题，因为如果深色文本阴影不可见，则在白色背景上带有深色阴影的浅灰色文本可能会变得不可读。并且设计师坚持使用这个，而不是使用文本图像替换。（我可以尝试针对最近的浏览器，但令我惊讶的是，连 IE9 都不理解`text-shadow`，而且上帝只知道所有移动设备上对此的支持是什么......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:08:27.637

你必须使用这个脚本：

```
if (document.createElement('div').style.textShadow !== '') {
    document.documentElement.className += ' no-textshadow';
} 
```

然后你可以这样做：

```
.no-textshadow h1 {
    background: #fff;
    color: #000;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T08:08:51.987

不是没有 JS，而是有一个可行的纯 CSS 替代品，我相信它适用于 IE 6-9 并且是有效的。听说过 DXImage 变换吗？

类似的问题 + 语法示例：[过滤器：progid:DXImageTransform.Microsoft.DropShadow(OffX="x", OffY="y", Color="color") 是否可以替代文本阴影：在 IE 中？](https://stackoverflow.com/questions/9605755/is-filter-progiddximagetransform-microsoft-dropshadowoffx-x-offy-y-colo)

# gwt - 如何创建 GWT JsArray？

> ID：11069761
> 
> 赞同：9
> 
> 时间：2012-06-17T07:50:16.743
> 
> 标签：gwt, gwt2

我需要将 T 类型的值转换为`JsArray`.

例如，我有 String1、String2 .... Stringn。我需要将这些字符串转换为`JsArray`字符串。

我该如何实施？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-17T09:11:30.040

您没有太多选择：创建`JsArrayString`并添加到它，或者使用 JSNI。

```
JsArrayString arr = JavaScriptObject.createArray().cast();
arr.push(str1);
arr.push(str2);
arr.push(str3); 
```

或者

```
static native JsArrayString asJsArray(String str1, String str2, String str3) /*-{
  return [str1, str2, str3];
}-*/; 
```

显然，后者不能扩展，同时速度更快。

这真的取决于你到底需要做什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T12:28:14.553

像这样使用`JsArrayUtils`：

```
JsArray<String> arr = JsArrayUtils.readOnlyJsArray(new String[] { string1, string2 }); 
```

看一下javadoc：

> **com.google.gwt.core.client.JsArrayUtils**
> 
> 用于操作 JS 数组的实用程序类。这些方法不在其他 JavaScriptObject 子类上，例如 JsArray，因为添加新方法可能会破坏现有的子类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T14:29:33.843

使用泛型，可以这样做：

```
public <T extends JavaScriptObject> JsArray<T> createGenericArray(T... objects) {
    JsArray<T> array = JavaScriptObject.createArray().cast();

    for (T object : objects) {
        array.push(object);
    }

    return array;
} 
```

显然，`String`不扩展`JavaScriptObject`。您需要有重载来解释原始类型。（或者，不太安全，您可以删除边界`T`以允许任意类型。如果要这样做，您需要更加小心。）

# vb.net - 访问 HTML 按钮

> ID：11069766
> 
> 赞同：0
> 
> 时间：2012-06-17T07:50:49.130
> 
> 标签：vb.net

一个网站上有 17 个 HTML 按钮。这些按钮没有 ID，具有相同的名称、类型和值。我想通过使用 vb.net 2008 webbrowser 控件以编程方式单击按钮。当我写这段代码

```
Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        WebBrowser1.Navigate("website bla bla")
    End Sub

    Private Sub WebBrowser1_DocumentCompleted(ByVal sender As System.Object, ByVal e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted

        Dim allelements As HtmlElementCollection = WebBrowser1.Document.All

        For Each webpageelement As HtmlElement In allelements

            If webpageelement.GetAttribute("value") =  "Start" Then

                webpageelement.InvokeMember("click")

            End If

        Next

    End Sub
End Class 
```

然后每次，我的程序都会单击第 17 个按钮。我想单独单击第一个按钮，第二个按钮，第三个按钮等等，然后分别单击下一个按钮。所以你能指导我如何单独点击每个按钮。这是按钮的 HTML 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:28:48.560

您的最后一个按钮被点击，因为正如您所声称的，所有按钮都具有相同的值。因此，您不应按值识别按钮。

最好的解决方案是修改服务器端，使按钮具有一些属性（理想情况下是`id`），以便以编程方式轻松区分它们。（例如，如果您正在为同事开发的网站编写测试工具，这将适用。与他们交谈并将您的请求称为“可测试性”。）

但是，如果您绝对必须按原样使用该网站，那么有一点信息可以使每个按钮独一无二，那就是它的顺序索引。

```
Dim i As Integer
Dim allButtons As HtmlElementCollection

allButtons = WebBrowser1.Document.getElementsByTagName('input');

i = 0
For Each webpageelement As HtmlElement In allButtons
    i += 1
    If i = 7 Then
        webpageelement.InvokeMember("click")
    End If
Next 
```

这将单击第七个按钮。这种方法的缺点是，每次网站的布局稍有变化，你的客户端代码就会严重崩溃，在修复之前造成各种混乱和乏味。您可以通过用符号名称表示这些固定索引值并将任何顺序索引仅与这些索引进行比较来部分解决这个问题，但它仍然是一种难以重用的脆弱技术。

# android - 构造函数 AlertDialog.Builder(LayoutOne, int) 未定义

> ID：11069767
> 
> 赞同：1
> 
> 时间：2012-06-17T07:51:01.923
> 
> 标签：android, android-alertdialog

我是编程新手，在让 AlertDialog 正常工作时遇到了一些困难。我显示了六个按钮，我想在单击第六个按钮时添加警报对话框。但我收到一条错误消息，提示“构造函数 AlertDialog.Builder(LayoutOne, int) 未定义”。谁能帮我？

谢谢！

```
public class LayoutOne extends Fragment implements OnClickListener {

    public static Fragment newInstance(Context context) {
        LayoutOne f = new LayoutOne();

    return f;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    ViewGroup root = (ViewGroup) inflater
            .inflate(R.layout.layout_one, null);
    ((Button) root.findViewById(R.id.drink)).setOnClickListener(this);
    ((Button) root.findViewById(R.id.sleep)).setOnClickListener(this);
    ((Button) root.findViewById(R.id.food)).setOnClickListener(this);
    ((Button) root.findViewById(R.id.events)).setOnClickListener(this);
    ((Button) root.findViewById(R.id.beach)).setOnClickListener(this);
    ((Button) root.findViewById(R.id.map)).setOnClickListener(this);

    return root;
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    Button tmp = (Button) v;
    Button map = (Button) v;
    if (tmp.getId() == R.id.drink) {
        startActivity(new Intent("com.creatriks.zrce.DRINK"));
    } 
        if (tmp.getId() == R.id.sleep) {
            startActivity(new Intent("com.creatriks.zrce.SLEEP"));
        } 
            if (tmp.getId() == R.id.food) {
                startActivity(new Intent("com.creatriks.zrce.FOOD"));
            }

                if (tmp.getId() == R.id.events) {
                    startActivity(new Intent("com.creatriks.zrce.EVENTS"));
                } 
                    if (tmp.getId() == R.id.beach) {
                        startActivity(new Intent("com.creatriks.zrce.BEACH"));
                    }

                        if (map.getId() == R.id.map) {

                            AlertDialog alert = new AlertDialog.Builder(LayoutOne.this, AlertDialog.THEME_HOLO_LIGHT).create();
                            alert.setTitle("Options");
                            alert.setMessage("Choose an action");

                            startActivity(new Intent("com.creatriks.zrce.MAP"));

                }
            } 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T08:00:57.130

使用`getActivity()`which 返回与片段关联的活动。

改变这个

```
AlertDialog alert = new AlertDialog.Builder(LayoutOne.this, AlertDialog.THEME_HOLO_LIGHT).create(); 
```

对此

```
AlertDialog alert = new AlertDialog.Builder(getActivity(), AlertDialog.THEME_HOLO_LIGHT).create(); 
```

# android - 示例 Evernote Android 活动 NullPointerException

> ID：11069778
> 
> 赞同：0
> 
> 时间：2012-06-17T07:52:23.690
> 
> 标签：android, nullpointerexception, onresume, evernote

当我从 evernote 运行示例应用程序时 - 它可以工作。如果我将活动（和所有库）复制到我的应用程序，在我的应用程序的启动活动中，它会在 onResume 方法中使用 NullPointerException 强制关闭。

```
public class HelloEDAM extends Activity {

  /***************************************************************************
   * You MUST change the following values to run this sample application.    *
   ***************************************************************************/

  // Your Evernote API key. See http://dev.evernote.com/documentation/cloud/
  // Please obfuscate your code to help keep these values secret.
  private static final String CONSUMER_KEY = "*******";
  private static final String CONSUMER_SECRET = "*******";

  /***************************************************************************
   * Change these values as needed to use this code in your own application. *
   ***************************************************************************/

  // Name of this application, for logging
  private static final String TAG = "HelloEDAM";

  // A directory on disk where your application stores temporary data
  private static final String APP_DATA_PATH = 
    "/Android/data/com.evernote.android.sample/temp/";

  // Change to "www.evernote.com" to use the Evernote production service 
  // instead of the sandbox
  private static final String EVERNOTE_HOST = "sandbox.evernote.com";

  private static final String APP_NAME = "Evernote Android Sample";  
  private static final String APP_VERSION = "1.0";

  /***************************************************************************
   * The following values are simply part of the demo application.           *
   ***************************************************************************/

  // Activity result request codes
  private static final int SELECT_IMAGE = 1;

  // The ENML preamble to every Evernote note. 
  // Note content goes between <en-note> and </en-note>
  private static final String NOTE_PREFIX = 
    "<?xml version=\"1.0\" encoding=\"UTF-8\"?>" +
    "<!DOCTYPE en-note SYSTEM \"http://xml.evernote.com/pub/enml2.dtd\">" +
    "<en-note>";

  // The ENML postamble to every Evernote note 
  private static final String NOTE_SUFFIX = "</en-note>";

  // Used to interact with the Evernote web service
  private EvernoteSession session;

  // UI elements that we update
  private Button btnAuth;
  private Button btnSave;
  private Button btnSelect;
  private TextView msgArea;

  // The path to and MIME type of the currently selected image from the gallery
  private String filePath;
  private String mimeType;
  private String fileName;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    msgArea = (TextView)findViewById(R.id.message);
    btnAuth = (Button) findViewById(R.id.auth_button);
    btnSelect = (Button) findViewById(R.id.select_button);
    btnSave = (Button) findViewById(R.id.save_button);

    setupSession();
  }

  @Override
  public void onResume() {
    super.onResume();

    // Complete the Evernote authentication process if necessary
    if (!session.completeAuthentication()) {
      // We only want to do this when we're resuming after authentication...
      Toast.makeText(this, "Evernote login failed", Toast.LENGTH_LONG).show();
    }

    updateUi();
  }

  /**
   * Setup the EvernoteSession used to access the Evernote API.
   */
  private void setupSession() {
    ApplicationInfo info = 
      new ApplicationInfo(CONSUMER_KEY, CONSUMER_SECRET, EVERNOTE_HOST, 
          APP_NAME, APP_VERSION);

    // TODO Retreived the cached Evernote AuthenticationResult if it exists
//    if (hasCachedEvernoteCredentials) {
//      AuthenticationResult result = new AuthenticationResult(authToken, noteStoreUrl, webApiUrlPrefix, userId);
//      session = new EvernoteSession(info, result, getTempDir());
//    } else {
      session = new EvernoteSession(info, getTempDir());
//    }

    updateUi();
  }

  /**
   * Update the UI based on Evernote authentication state.
   */
  private void updateUi() {
    if (session.isLoggedIn()) {
      btnAuth.setText(R.string.label_log_out);
      btnSave.setEnabled(true);
      btnSelect.setEnabled(true);
    } else {
      btnAuth.setText(R.string.label_log_in);
      btnSave.setEnabled(false);
      btnSelect.setEnabled(false);
    }
  }

  /**
   * Called when the user taps the "Select Image" button.
   * 
   * Sends the user to the image gallery to choose an image to share.
   */
  public void startAuth(View view) {
    if (session.isLoggedIn()) {
      session.logOut();
    } else {
      session.authenticate(this);
    }
    updateUi();
  }  

  /**
   * Get a temporary directory that can be used by this application to store potentially
   * large files sent to and retrieved from the Evernote API.
   */
  private File getTempDir() {
    return new File(Environment.getExternalStorageDirectory(), APP_DATA_PATH);
  }

  /***************************************************************************
   * The remaining code in this class simply demonstrates the use of the     *
   * Evernote API once authentication is complete. You don't need any of it  *
   * in your application.                                                    *
   ***************************************************************************/

  /**
   * Called when the user taps the "Select Image" button.
   * 
   * Sends the user to the image gallery to choose an image to share.
   */
  public void startSelectImage(View view) {
    Intent intent = new Intent(Intent.ACTION_PICK, 
                               MediaStore.Images.Media.INTERNAL_CONTENT_URI);
    startActivityForResult(intent, SELECT_IMAGE);
  }

  /**
   * Called when the control returns from an activity that we launched.
   */
  @Override
  public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == SELECT_IMAGE) {
      // Callback from our 'startSelectImage' action
      if (resultCode == Activity.RESULT_OK) {
        endSelectImage(data);
      } 
    }
  }

  /**
   * Called when control returns from the image gallery picker.
   * Loads the image that the user selected.
   * 
   * @param data The data returned from the activity.
   */
  private void endSelectImage(Intent data) {
    // The callback from the gallery contains a pointer into a table.
    // Look up the appropriate record and pull out the information that we need,
    // in this case, the path to the file on disk, the file name and the MIME type. 
    Uri selectedImage = data.getData();
    String[] queryColumns = { MediaStore.Images.Media.DATA, 
                              MediaStore.Images.Media.MIME_TYPE, 
                              MediaStore.Images.Media.DISPLAY_NAME };
    Cursor cursor = getContentResolver().query(selectedImage, queryColumns, null, null, null);
    cursor.moveToFirst();
    this.filePath = cursor.getString(cursor.getColumnIndex(queryColumns[0]));
    this.mimeType = cursor.getString(cursor.getColumnIndex(queryColumns[1]));
    this.fileName = cursor.getString(cursor.getColumnIndex(queryColumns[2]));
    cursor.close();

    if (session.isLoggedIn()) {
      this.msgArea.setText(this.fileName);
      this.btnSave.setEnabled(true);
    }
  }

  /**
   * Called when the user taps the "Save Image" button.
   * 
   * You probably don't want to do this on your UI thread in the 
   * real world.
   * 
   * Saves the currently selected image to the user's Evernote account using
   * the Evernote web service API.
   * 
   * Does nothing if the Evernote API wasn't successfully initialized
   * when the activity started.
   */
  public void saveImage(View view) {
    if (session.isLoggedIn()) {
      String f = this.filePath;
      try {
        // Hash the data in the image file. The hash is used to refernece the
        // file in the ENML note content.
        InputStream in = new BufferedInputStream(new FileInputStream(f)); 
        FileData data = new FileData(EDAMUtil.hash(in), new File(f));
        in.close();

        // Create a new Resource
        Resource resource = new Resource();
        resource.setData(data);
        resource.setMime(this.mimeType);

        // Create a new Note
        Note note = new Note();
        note.setTitle("Android test note");
        note.addToResources(resource);

        // Set the note's ENML content. Learn about ENML at 
        // http://dev.evernote.com/documentation/cloud/chapters/ENML.php
        String content = 
          NOTE_PREFIX +
          "<p>This note was uploaded from Android. It contains an image.</p>" +
          "<en-media type=\"" + this.mimeType + "\" hash=\"" +
          EDAMUtil.bytesToHex(resource.getData().getBodyHash()) + "\"/>" +
          NOTE_SUFFIX;
        note.setContent(content);

        // Create the note on the server. The returned Note object
        // will contain server-generated attributes such as the note's
        // unique ID (GUID), the Resource's GUID, and the creation and update time.
        Note createdNote = session.createNoteStore().createNote(session.getAuthToken(), note);

        Toast.makeText(this, R.string.msg_image_saved, Toast.LENGTH_LONG).show();
      } catch (Throwable t) {
        // It's generally bad form to catch Throwable, but for this simple demo, 
        // we want to trap and log all errors.
        Toast.makeText(this, R.string.err_creating_note, Toast.LENGTH_LONG).show();
        Log.e(TAG, getString(R.string.err_creating_note), t);
      }  
    }
  }
} 
```

日志错误：

```
06-17 12:50:34.833: W/dalvikvm(1759): threadid=1: thread exiting with uncaught exception (group=0x40a291f8)    
06-17 12:50:34.843: E/AndroidRuntime(1759): FATAL EXCEPTION: main
    06-17 12:50:34.843: E/AndroidRuntime(1759): java.lang.RuntimeException: Unable to resume activity {com.smirnoft.Library/com.smirnoft.Library.Evernote.HelloEDAM}: java.lang.NullPointerException
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2567)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2595)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2109)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at android.app.ActivityThread.access$600(ActivityThread.java:132)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at android.os.Handler.dispatchMessage(Handler.java:99)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at android.os.Looper.loop(Looper.java:137)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at android.app.ActivityThread.main(ActivityThread.java:4575)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at java.lang.reflect.Method.invokeNative(Native Method)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at java.lang.reflect.Method.invoke(Method.java:511)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at dalvik.system.NativeStart.main(Native Method)
    06-17 12:50:34.843: E/AndroidRuntime(1759): Caused by: java.lang.NullPointerException
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at com.smirnoft.Library.Evernote.HelloEDAM.onResume(HelloEDAM.java:131)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1154)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at android.app.Activity.performResume(Activity.java:4539)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2557)
    06-17 12:50:34.843: E/AndroidRuntime(1759):     ... 12 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-29T17:11:47.833

将 Evernote 与 Gradle 集成。从 2.0.0-RC1 版本开始支持：[https ://github.com/evernote/evernote-sdk-android](https://github.com/evernote/evernote-sdk-android)

# asp.net - 如何使用 XML 在 SQL 中保存多行？

> ID：11069780
> 
> 赞同：0
> 
> 时间：2012-06-17T07:52:30.503
> 
> 标签：asp.net, sql, xml, sql-server-2008-r2, xquery

我有以下 XML，我希望将其数据保存在我的 SQL 表中。我有一个名为 tblDummy 的表，它有三列“JobID”“ItemID”“SubitemID”。Jobid 和 Itemid 的特定组合可以有多个 subitemsid。我怎样才能做到这一点？

```
<jobs>
   <job>
     <jobid>4711</jobid>
     <items>
     <itemid>1</itemid>
       <subitems>
        <subitemid>1</subitemid>
        <subitemid>2</subitemid>
       </subitems>
    <itemid>2</itemid>
       <subitems>
        <subitemid>7</subitemid>
        <subitemid>10</subitemid>
       </subitems>
    <itemid>9</itemid>
       <subitems>
        <subitemid>12</subitemid>
        <subitemid>16</subitemid>
       </subitems>
    </items>
   </job>  
 </jobs> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:04:08.760

由于这个 XML，您无法正确解析它。您需要更改它 - 您应该将每个项目及其`itemid`子项目放入一个单独的节点中 - 否则您的主节点下`<item>`只有一个长长的节点列表`<itemid>`，但您无法判断哪些节点属于一起.. ..`<subitems>``<items>``<itemid>``<subitems>`

您需要将 XML 更改为如下所示：

```
<job>
   <jobid>4711</jobid>
   <items>
      <item>
         <itemid>1</itemid>
         <subitems>
             <subitemid>1</subitemid>
             <subitemid>2</subitemid>
         </subitems>
      </item>   
      <item>
         <itemid>2</itemid>
          <subitems>
            ......
          </subitems>
      </item>   
      ... (possibly more <item> nodes) ....
   </items>
</job> 
```

**那么**您可以使用与您上一个问题基本相同的代码 - 扩展到涵盖三个级别：

```
CREATE PROCEDURE dbo.SaveJobs (@input XML)
AS BEGIN

;WITH JobsData AS
(    
    SELECT
        JobID = JobNode.value('(jobid)[1]', 'int'),
        ItemID = ItemNode.value('(itemid)[1]', 'int'),
        SubItemID = SubItemNode.value('.', 'int')
    FROM 
        @input.nodes('/jobs/job') AS TblJobs(JobNode)
    CROSS APPLY
        JobNode.nodes('items/item') AS TblItems(ItemNode)
    CROSS APPLY
        ItemNode.nodes('subitems/subitem') AS TblSubItems(SubItemNode)
)
INSERT INTO dbo.tblDummy(JobID, ItemID, SubItemID)
   SELECT JobID, ItemID, SubItemID
   FROM JobsData
END 
```

基本上，您需要三个 XML 节点“列表”：

*   首先你需要所有`<jobs>/<job>`节点的列表来获取`jobid`值
*   对于每个作业节点，您还需要获取它们的嵌套列表`<items>/<item>`以获取`itemid`值
*   从每个节点，您还可以获得`<subitems>/<subitem>`

这很可能会起作用 - 但很可能会相当慢（对`.nodes()`函数的三个嵌套调用！）。

**更新：**

好的，所以第一个调用`@input.nodes('/jobs/job') AS TblJobs(JobNode)`基本上创建了一个`TblJobs`具有单列的“伪”表，`JobNode`并且您的 XML 中的每个`<job>`元素都被存储到该伪表中的一行中 - 所以第一行将在其`JobNode`列中包含此 XML：

```
<job>
   <jobid>4711</jobid>
   <items>
      <item>
         <itemid>1</itemid>
         <subitems>
             <subitemid>1</subitemid>
             <subitemid>2</subitemid>
         </subitems>
      </item>   
      <item>
         <itemid>2</itemid>
          <subitems>
            ......
          </subitems>
      </item>   
      ... (possibly more <item> nodes) ....
   </items>
</job> 
```

并且每一行将包含`<job>`内部每个后续元素的附加 XML 片段`<jobs>`

从这些 XML 片段中的每一个，第二个调用

```
CROSS APPLY JobNode.nodes('items/item') AS TblItems(ItemNode) 
```

再次选择一个XML片段列表到一个伪`TblItems`表（`ItemNode``<item>``<job>`

所以这个伪表的第一行包含：

```
 <item>
         <itemid>1</itemid>
         <subitems>
             <subitemid>1</subitemid>
             <subitemid>2</subitemid>
         </subitems>
      </item> 
```

第二行将包含

```
 <item>
         <itemid>2</itemid>
          <subitems>
            ......
          </subitems>
      </item> 
```

等等。

然后第三次调用——您已经猜到了——再次将 XML 元素列表作为行提取到伪表`<subitem>`中——XML 片段中的每个节点都有一个条目。

**更新#2**：

> *我是“JobID = JobNode.value('(jobid)[1]', 'int')” 代码行的新手*

好的 - 给定`<Job>`您拥有的 XML 片段：

```
<job>
   <jobid>4711</jobid>
   <items>
     ......
   </items>
</job> 
```

该`.value()`调用只是在那个 XML 上执行这个 XPath 表达式 ( `jobid`) 并基本上取回`<jobid>4711</jobid>`片段。然后它提取该节点的**值**（内部文本），`.value()`调用的第二个参数定义将其解释为什么 SQL 数据类型 - 所以它基本上`4711`从`<jobid>`节点中获取 并将其解释为`int`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:05:05.630

您可以将 Jobid 和 Itemid 的组合键作为主键。

# ruby - 如何期望对新创建的测试替身进行方法调用？

> ID：11069784
> 
> 赞同：1
> 
> 时间：2012-06-17T07:53:31.607
> 
> 标签：ruby, rspec

假设我有这样的代码：

```
class Car
  def test_drive!; end
end

class AssemblyLine
  def produce!
    car = Car.new
    car.test_drive!
  end
end 
```

现在，使用 RSpec 我想在`AssemblyLine`不锻炼`Car`的情况下进行测试/规范。我听说我们不在 Ruby 中进行依赖注入，而是使用 stub `new`：

```
describe AssemblyLine
  before do
    Car.stub(:new).and_return(double('Car'))
  end

  describe '#produce'
    it 'test-drives new cars' do
      the_new_instance_of_car.should_receive(:test_drive) # ???
      AssemblyLine.new.produce!
    end
  end
end 
```

如您所见，问题在于`the_new_instance_of_car`. `produce`它在被调用之前还不存在，并且在`produce`返回之后设置任何方法调用期望为时已晚。

我可以想到一种解决方法，涉及在存根`new`方法中的回调，但这相当可怕。必须有更优雅和惯用的方法来解决这个看似常见的问题。对...？

* * *

**更新**：这是我解决它的方法。

```
describe AssemblyLine
  def stub_new_car(&block)
    Car.stub(:new) do
      car = double('Car')
      block.call(car) if block
      car
    end
  end

  before { stub_new_car } # to make other tests use the stub as well

  describe '#produce'
    it 'test-drives new cars' do
      stub_new_car { |car| car.should_receive(:test_drive) }
      AssemblyLine.new.produce!
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:20:32.233

您可以对测试替身设定期望：

```
describe AssemblyLine do
  let(:car) { double('Car') }
  before { Car.stub(:new) { car } }

  describe "#produce" do
    it "test-drives new cars" do
      car.should_receive(:test_drive!)
      AssemblyLine.new.produce!
    end
  end
end 
```

您还可以调用`any_instance`该类（我认为从 RSpec 2.7 开始）：

```
describe AssemblyLine do
  describe "#produce" do
    it "test-drives new cars" do
      Car.any_instance.should_receive(:test_drive!)
      AssemblyLine.new.produce!
    end
  end
end 
```

# asp.net-mvc-3 - mvc3controlstoolkit 树视图

> ID：11069788
> 
> 赞同：1
> 
> 时间：2012-06-17T07:54:13.187
> 
> 标签：asp.net-mvc-3, treeview, viewmodel

如何将递归列表传递给 MVC3ControlsToolkit TreeView？我发现了很多手动定义项目和子项目的示例，但我需要将其绑定到模型。我的模型如下所示：

```
public class TreeNode
{
    public TreeNode()
    {
        child = new HashSet<TreeNode>();
    }
    public int id { get; set; }
    public string name { get; set; }
    public ICollection<TreeNode> child { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:17:23.697

我找到了答案。只需要传递包含递归列表而不是 Icollection 的 IList。感谢 frankabbruzzese！

# iphone - XCode 4.3 中的直接依赖关系在哪里？

> ID：11069789
> 
> 赞同：3
> 
> 时间：2012-06-17T07:54:13.510
> 
> 标签：iphone, xcode

我在 XCode 4.3.2 中找不到它。在以前版本的 XCode 中，它看起来像。

但它现在在哪里？

![在此处输入图像描述](../Images/f3d9232da283ae737f7f99298deb43a4.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T08:03:53.787

找到了！转到项目->目标->构建阶段->目标依赖项 ![在此处输入图像描述](../Images/6258a1f0a9f1ea4085ad22f3ac87a26d.png)

# php - PHP - cookie 加密和 hmac 签名

> ID：11069790
> 
> 赞同：1
> 
> 时间：2012-06-17T07:54:21.063
> 
> 标签：php, cookies, encryption, signature

我只是想知道加密和签署cookie是多余的吗？加密还不够吗？为什么或者为什么不？

如果它不是多余的，我想知道我是否朝着正确的方向前进。为简单起见，我所做的是：

```
$data = 'some data';
$encrypted_data = mcrypt_encrypt($cipher, $key, $data, $mode, $iv);
$signature = hash_hmac($algorithm, $data, $key);
$package = $encrypted_data . '|' . $signature;
setcookie('somecookie', $package, time()+60*60*24); 
```

根据我的基本理解，您正在对数据进行 hmac 哈希处理，并使用分隔符将其附加到加密数据中？然后，当您检查 cookie 时，您会进行所有验证等等。我正确地接近这个吗？此外，加密和签名的所有密钥都应该是随机数（一次性使用的密钥）还是足以让它们中的每一个成为所有人共享的单个全局密钥？我很抱歉这正在成为一个三方问题。希望没有人介意。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-10-02T13:22:39.020

> 我只是想知道加密和签署cookie是多余的吗？加密还不够吗？为什么或者为什么不？

除非您使用较新的 AEAD 接口，否则[加密无法防止选择密文攻击](https://paragonie.com/blog/2015/05/using-encryption-and-authentication-correctly)。

> 根据我的基本理解，您正在对数据进行 hmac 哈希处理，并使用分隔符将其附加到加密数据中？然后，当您检查 cookie 时，您会进行所有验证等等。我正确地接近这个吗？

你在这里写的是一个**加密和 MAC**结构。你想**加密然后 MAC**代替。

```
- $signature = hash_hmac($algorithm, $data, $key);
+ $signature = hash_hmac($algorithm, $encrypted_data, $key); 
```

更好的是，如果不需要，不要自己写。随意使用`sodium_crypto_secretbox()`，`sodium_crypto_secretbox_open()`而不是。[请参阅此处的示例](https://stackoverflow.com/a/30159120/2224584)。

# ios5 - 未显示 rightCalloutAccessory 按钮

> ID：11069793
> 
> 赞同：0
> 
> 时间：2012-06-17T07:55:01.533
> 
> 标签：ios5, mkmapview, mkannotation, mkannotationview

我尝试管理注释，并在选择 PIN 时在视图右侧显示一个信息按钮，我的相关代码是这样的：

```
- (MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation {

    MKPinAnnotationView *newAnnotation = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"greenPin"];

        if ([annotation isKindOfClass:[ManageAnnotations class]]) {
            static NSString* identifier = @"ManageAnnotations";   

            MKPinAnnotationView *newAnnotation = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
            if (newAnnotation==nil) {
                newAnnotation=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
            }else {
                newAnnotation.annotation=annotation;
            }

            newAnnotation.pinColor = MKPinAnnotationColorGreen;
            newAnnotation.animatesDrop = YES;
            newAnnotation.canShowCallout = YES;
            newAnnotation.rightCalloutAccessoryView=[UIButton buttonWithType:UIButtonTypeInfoLight];

            return newAnnotation;

        }else {
            newAnnotation.pinColor = MKPinAnnotationColorGreen;
            newAnnotation.animatesDrop = YES;
            newAnnotation.canShowCallout = YES;
            return newAnnotation;
        } 
```

**ManageAnnotations.m ：**

```
@implementation ManageAnnotations

@synthesize pinColor;
@synthesize storeName=_storeName;
@synthesize storeAdress=_storeAdress;
@synthesize coordinate=_coordinate;

-(id)initWithTitle:(NSString*)storeName adress:(NSString*)storeAdress coordinate:(CLLocationCoordinate2D)coordinate{

    if((self=[super init])){
        _storeName=[storeName copy];
        _storeAdress=[storeAdress copy];
        _coordinate=coordinate;

    }
    return self;

}
-(NSString*)title{

    return _storeName;
}
-(NSString*)subtitle{

    return _storeAdress;

} 
```

**ManageAnnotations.h**

```
@interface ManageAnnotations : NSObject<MKAnnotation>{

    NSString *_storeName;
    NSString *_storeAdress;
    CLLocationCoordinate2D _coordinate;

}
//
@property(nonatomic,assign)MKPinAnnotationColor pinColor;
@property(nonatomic, readonly, copy)NSString *storeName;
@property(nonatomic, readonly, copy)NSString *storeAdress;
@property(nonatomic,readonly)CLLocationCoordinate2D coordinate;

//
-(id)initWithTitle:(NSString*)storeName adress:(NSString*)storeAdress coordinate:(CLLocationCoordinate2D)coordinate;
// 
```

PIN 码在地图上正确显示，但视图右侧没有信息按钮。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:14:18.293

1.  你真的进入这种状态了吗？设置断点进行检查。
2.  为什么一开始就创建一个 MKPinAnnotationView，在你知道注解的类型之前？
3.  你应该出队你的 annotationView 而不是 alloc/initWithAnnotation:reuseIdentifier
4.  当你重用你的注解时，你应该把所有不会改变的东西（颜色、动画等）放在 alloc init 之后，而不是一直重置它们。否则你会失去重用的兴趣。

除此之外，您的代码看起来不错，并且将其与我的代码进行比较，我看不到任何明显的东西。备注 1 是最可能的。我会设置一个断点，看看我是否真的去那里，看看我是否可以显示一个leftCalloutAccessoryView，使用不同的pinColor。

# java - 将 ByteArray 转换为 String 时出现 OutOfMemory 异常？

> ID：11069802
> 
> 赞同：7
> 
> 时间：2012-06-17T07:57:45.063
> 
> 标签：java, android, string, bytearray, out-of-memory

我使用以下代码将我的 ByteArray 转换为 String：

```
String sReturn = new String(byteArray, "UTF-8"); 
```

但是当 ByteArray 足够大时，我得到以下异常。

有没有其他方法可以将 ByteArray 转换为 String 而不会出现内存不足异常？

```
06-17 12:27:37.594: E/dalvikvm(1617): Out of memory: Heap Size=30663KB, Allocated=22087KB, Bitmap Size=936KB, Limit=32768KB
06-17 12:27:37.594: E/dalvikvm(1617): Extra info: Footprint=30663KB, Allowed Footprint=30663KB, Trimmed=616KB
06-17 12:27:37.594: W/dalvikvm(1617): threadid=9: thread exiting with uncaught exception (group=0x4001d648)
06-17 12:27:37.594: E/AndroidRuntime(1617): FATAL EXCEPTION: Thread-19
06-17 12:27:37.594: E/AndroidRuntime(1617): java.lang.OutOfMemoryError: (Heap Size=30663KB, Allocated=22087KB, Bitmap Size=936KB)
06-17 12:27:37.594: E/AndroidRuntime(1617):     at java.lang.String.<init>(String.java:422)
06-17 12:27:37.594: E/AndroidRuntime(1617):     at java.lang.String.<init>(String.java:276)
06-17 12:27:37.594: E/AndroidRuntime(1617):     at org.mabna.order.utils.Utilities.decompress(Utilities.java:389)
06-17 12:27:37.594: E/AndroidRuntime(1617):     at org.mabna.order.utils.WebserviceResponse.getClearedResponse(WebserviceResponse.java:18)
06-17 12:27:37.594: E/AndroidRuntime(1617):     at org.mabna.order.businessLayer.BoWebService.getDataForUpdate(BoWebService.java:216)
06-17 12:27:37.594: E/AndroidRuntime(1617):     at org.mabna.order.ui.ActToolDataExchange.threadGetDataForFullUpdate(ActToolDataExchange.java:389)
06-17 12:27:37.594: E/AndroidRuntime(1617):     at org.mabna.order.ui.ActToolDataExchange.access$9(ActToolDataExchange.java:380)
06-17 12:27:37.594: E/AndroidRuntime(1617):     at org.mabna.order.ui.ActToolDataExchange$35.run(ActToolDataExchange.java:639)
06-17 12:27:37.594: E/AndroidRuntime(1617):     at org.mabna.order.utils.Utilities$4.run(Utilities.java:924) 
```

* * *

**更新**

```
public static String decompress(String zipText) throws IOException {
    byte[] compressed = Base64.decode(zipText);
    if (compressed.length > 4) {
        GZIPInputStream gzipInputStream = new GZIPInputStream(
                new ByteArrayInputStream(compressed, 4,
                        compressed.length - 4));

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        for (int value = 0; value != -1;) {
            value = gzipInputStream.read();
            if (value != -1) {
                baos.write(value);
            }
        }
        gzipInputStream.close();
        baos.close();

        byte[] byteArray = baos.toByteArray();

        Log.i("toByteArray", String.valueOf(byteArray.length));

        String sReturn = new String(byteArray, "UTF-8");

        return sReturn;
    } else {
        return "";
    }
}

public static String decrypt(String encrypted, String password)
        throws Exception {

    byte[] encrypteddata = Base64.decode(encrypted);

    byte[] bytes = decrypt(encrypteddata, password);

    String result = new String(bytes, "UTF-8");

    return result;
}

public static byte[] decrypt(byte[] encrypted, String password)
        throws Exception {

    byte[] passwordKey = encodeDigest(password);
    try {
        aesCipher = Cipher.getInstance(CIPHER_TRANSFORMATION);
    } catch (NoSuchAlgorithmException e) {
        throw new Exception(
                "Decryption Exception: No such algorithm\r\n" + e
                        .toString());
    } catch (NoSuchPaddingException e) {
        throw new Exception(
                "Decryption Exception: No such padding PKCS5\r\n" + e
                        .toString());
    }
    secretKey = new SecretKeySpec(passwordKey, CIPHER_ALGORITHM);

    try {
        aesCipher.init(Cipher.DECRYPT_MODE, secretKey, ivParameterSpec);
    } catch (InvalidKeyException e) {
        throw new Exception(
                "Decryption Exception: Invalid key\r\n" + e.toString());
    } catch (InvalidAlgorithmParameterException e) {
        throw new Exception(
                "Decryption Exception: Invalid algorithm\r\n" + e
                        .toString());
    }

    byte[] encryptedData;
    try {
        encryptedData = aesCipher.doFinal(encrypted);
    } catch (IllegalBlockSizeException e) {
        throw new Exception(
                "Decryption Exception: Illegal block size\r\n" + e
                        .toString());
    } catch (BadPaddingException e) {
        throw new Exception(
                "Decryption Exception: Bad padding\r\n" + e
                        .toString());
    }
    return encryptedData;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:15:46.067

以下代码段将对您有所帮助。尝试分块阅读

```
 StringBuilder sb=new StringBuilder();  

             Log.v("abc","length : " + byteArray.length);  

             while (totalBytesRead < formDataLength) {    
                 byteRead = in.read(dataBytes, totalBytesRead, formDataLength);    
                 // byteRead = in.read(dataBytes);    
                 //totalBytesRead += byteRead;    
                 sb.append((char)byteRead);  
             }    

              String s=sb.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:31:24.787

我会一次将它分解成 1000 个字符的字符串。3663125 字节是很多内存，尤其是对于 android。

```
ArrayList<String> strings = new ArrayList<String>();
byte[] set = new byte[1000];
for(int x = 0, index = 0; x < byteArray.length;x++, index++)
{
    set[index] = byteArray[x];
    if(index == 999)
    {
        strings.add(new String(set, "Unicode"));
        index = 0;
        if(byteArray.length - x < 1000) // shorten the set when there are less than 1000 bytes left
            set = new byte[byteArray.length - x];
   }
}

strings.add(new String(set, "Unicode"));

String stringArray[] = (String[])strings.toArray(); 
```

这将为您打破它，如果那太小，您可以将 1000 更改为您想要的任何值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T06:04:22.963

您过度分配内存-首先解压缩base 64并为此分配缓冲区，然后将其解压缩并将chutnks写入BAOS（正在分配和重新分配内存块），然后再次将其复制到字符串中-难怪它会运行记不清。

尝试将其重写为流式处理（有 srteaming base64 dcoding，以及 gzip 解码器）

# javascript - 与 qtip2 和 jquery SVG 冲突

> ID：11069804
> 
> 赞同：0
> 
> 时间：2012-06-17T07:58:10.747
> 
> 标签：javascript, jquery, conflict

我正在使用两个库：qTip2 和 Jquery SVG。Jquery SVG 包含几个 js 文件，我有 jquery.svgdom.min.js 的问题。我与这两个库发生冲突的问题。当我禁用`jquery.svgdom.min.js`工作`qTip`正常时。如果它启用，那么我会收到以下错误：

```
Uncaught exception: TypeError: 'this.each' is not a function  
Error thrown at line 7, column 3420 in <anonymous function: $.fn.attr>(b, c, d) in http://localhost:46159/Scripts/jquery.svgdom.min.js: 
```

如何解决？

这是我的代码：

```
 function setupTolltip() {
        var sessionId = $("#schemaImage").attr("session");
        var clientId = $("#schemaImage").attr("client");
        $("area").each(function () {
            var levelId = $(this).attr("level");
            $(this).qtip(
                {
                    content: {
                        text: 'Working...',
                        ajax: {
                            url: '/hall/GetInfoForLevel',
                            data: { levelId: levelId, sessionId: sessionId, clientId: clientId },
                            dataType: 'json',
                            success: function (json) {
                                var content = "<div>All: " + json.PlacesCount + "<br/>Free: " + json.FreePlacesCount + "</div>";
                                this.set('content.text', content);
                                return false;
                            }
                        }
                    },
                    position: {
                        target: 'mouse',
                        adjust: {
                            x: 10
                        }

                    },
                    style: {
                        classes: 'ui-tooltip-tipsy ui-tooltip-shadow'
                    }

                });
        });
    } 
```

**更新：**
这是我的所有脚本：

```
<script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~//Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~//Scripts/jquery.galleriffic.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.16.custom.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.opacityrollover.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/custom-form-elements.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/datepicker.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.qtip.min.js")" type="text/javascript"></script>     
<script src="@Url.Content("~/Scripts/jquery.fancybox.js")" type="text/javascript"></script> 
```

**更新2：** 对`undefined`用户：我试过这样：

```
var $j = jQuery.noConflict();

        var sessionId = $("#schemaImage").attr("session");
        var clientId = $("#schemaImage").attr("client");

        $j('area').each(function () {
.... 
```

但我得到错误：

```
Uncaught exception: TypeError: '$' is not a function
Error thrown at line 5, column 8 in setupTolltip():
    var sessionId = $("#schemaImage").attr("session");
called from line 49, column 12 in <anonymous function>():
    setupTolltip();
called via Function.prototype.apply() from line 2, column 23204 in <anonymous function: each>(a, c, d) in http://localhost:46159/Scripts/jquery-1.7.2.min.js:
    if(c.apply(a[g++],d)===!1)
called from line 2, column 16574 in <anonymous function: each>(a, b) in http://localhost:46159/Scripts/jquery-1.7.2.min.js:
    return e.each(this,a,b)
called from line 4, column 20656 in <anonymous function: complete>(a, b, c) in http://localhost:46159/Scripts/jquery-1.7.2.min.js:
    c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a])
called via Function.prototype.apply() from line 2, column 29284 in <anonymous function: f.Callbacks>(b, f) in http://localhost:46159/Scripts/jquery-1.7.2.min.js:
    f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;
called from line 2, column 30902 in <anonymous function: fireWith>(b, c) in http://localhost:46159/Scripts/jquery-1.7.2.min.js:
    d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));
called from line 4, column 24458 in w(a, c, l, m) in http://localhost:46159/Scripts/jquery-1.7.2.min.js:
    v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))
called from line 4, column 36227 in <anonymous function: d>(a, e) in http://localhost:46159/Scripts/jquery-1.7.2.min.js:
    m&&g(j,k,m,l) 
```

解决方案：http: [//forum.jquery.com/topic/svg-svgdom-error-this-each-is-not-a-function](http://forum.jquery.com/topic/svg-svgdom-error-this-each-is-not-a-function)

# java - JPanel 在调整 Jframe 大小之前不会更新

> ID：11069807
> 
> 赞同：20
> 
> 时间：2012-06-17T07:58:51.973
> 
> 标签：java, swing, user-interface, paintcomponent

我将 JPanel 子类化以覆盖paintComponent(Graphics)，我想在 jframe 中将图像绘制到 jpanel 上。

但是直到我更改了 jframe 的大小，我的图像才显示出来。这是我的代码：

```
public class ImagePanel extends JPanel{

    public void setImage(BufferedImage bi)
    {
        image = bi;
        revalidate();
    }

    @Override
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        if(image != null)
        {
            g.drawImage(image, 0, 0, this);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-17T16:52:37.607

验证您是否在添加组件和调用`setVisible()` *后*[`pack()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#pack%28%29)调用，如相关[示例](https://stackoverflow.com/a/11067529/230513)中所述。您可能还需要采用适当的[布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。`repaint()`如此处建议[的](https://stackoverflow.com/a/11069910/230513)调用可能会解决症状，但不能解决根本原因。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-17T08:20:01.790

如果你想“刷新”JPanel，那么你应该调用repaint()，它会调用你的paintComponent()。这应该可以解决您的问题：

```
public void setImage(BufferedImage bi)
{
    image = bi;
    EventQueue.invokeLater(new Runnable()
    {
        public void run()
        {
            repaint();
        }
    });
} 
```

使用 EDT 更新和更改 GUI 是一种很好的做法。如果您有兴趣，这里有更多关于 EDT 的信息：

[事件调度线程是如何工作的？](https://stackoverflow.com/questions/2484425/how-does-the-event-dispatch-thread-work)

`repaint`不需要从 EDT 调用。如果您要更改 GUI，例如将文本设置为 JLabel，则它应该位于 EDT 内部。以下是有关在 EDT 之外可以调用的更多信息（由 nIcE cOw 提供）：

[在 EDT 外使用 Component.repaint() 安全吗？](https://stackoverflow.com/questions/9786497/safe-to-use-component-repaint-outside-edt/9786598#9786598)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-08-22T11:34:40.097

查看它[的文档](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#add(java.awt.Component))，`JPanel.add()`它继承自`java.awt.Container`：

> 将指定的组件附加到此容器的末尾。这是 addImpl(java.awt.Component, java.lang.Object, int) 的便捷方法。此方法更改与布局相关的信息，因此**使组件层次结构无效。如果容器已显示，则必须随后验证层次结构以显示添加的组件。**

*重点补充。*

因此，如果您在 Container已显示*后对其进行修改，则**必须*调用`validate()`它才能显示。仅仅调用`repaint()`是不够的。您可能已经注意到呼叫`setVisible(true)`也有效；这是因为它在[内部](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setVisible(boolean))[调用`validate()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setVisible(boolean)).

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-12T00:29:04.707

我有同样的问题，并通过调用 setVisible(true); 我正在使用的 JFrame。

示例：如果您的 JFrame 在使用后没有更新：

```
jframe.setContentPane(new MyContentPane()); 
```

修复它：

```
jframe.setContentPane(new MyContentPane());
jframe.setVisible(true); 
```

我知道即使您的 JFrame 已经可见，这样做听起来很愚蠢，但这是我迄今为止发现的解决此问题的唯一方法（上面提出的解决方案对我不起作用）。

这是一个完整的例子。运行它，然后取消注释“f.setVisible(true);” Panel1 和 Panel2 类中的说明，您会看到不同之处。不要忘记导入（Ctrl + Shift + O 用于自动导入）。

主要课程：

```
public class Main {
    private static JFrame f;
    public static void main(String[] args) {
        f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setContentPane(new Panel1(f));
        f.pack();    
        f.setVisible(true);
    }
} 
```

Panel1类：

```
public class Panel1 extends JPanel{
    private JFrame f;
    public Panel1(JFrame frame) {
        f = frame;
        this.setLayout(new BoxLayout(this, BoxLayout.LINE_AXIS));
        JButton b = new JButton("Panel 1");
        b.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                f.setContentPane(new Panel2(f));
                // Uncomment the instruction below to fix GUI "update-on-resize-only" problem
                //f.setVisible(true);
            }
        });
        add(b);
    }
} 
```

Panel2类：

```
public class Panel2 extends JPanel{
    private JFrame f;
    public Panel2(JFrame frame) {
        f = frame;
        this.setLayout(new BoxLayout(this, BoxLayout.LINE_AXIS));
        JButton b = new JButton("Panel 2");
        b.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                f.setContentPane(new Panel1(f));
                // Uncomment the instruction below to fix GUI "update-on-resize-only" problem
                //f.setVisible(true);
            }
        });
        add(b);
    }
} 
```

希望有帮助。

问候。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-01T02:04:04.580

我也有同样的问题，但我找到了解决方案。只需在顶部创建一个`jframe`对象并`jframe`在底部调用方法，如`jf.pack()`, `jf.setVisible()`, `jf.setSize()`,`jf.setDefaultCloseOpetion()`应该位于该框架中添加的所有 UI 的底部，您会发现它工作得很好。

# c# - 串口数据接收问题

> ID：11069809
> 
> 赞同：-2
> 
> 时间：2012-06-17T07:59:16.647
> 
> 标签：c#, serial-port

我想从串口读取数据，但不知道该怎么做。

我正在使用 Arduino，所以这是我的代码：

```
 int switchPin = 7;
int ledPin = 13;
boolean lastButton = LOW;
boolean currentButton = LOW;
boolean flashLight = LOW;

void setup()
{
  pinMode(switchPin, INPUT);
  pinMode(ledPin, OUTPUT);

  Serial.begin(9600);
}

boolean debounce(boolean last)
{
  boolean current = digitalRead(switchPin);
  if (last != current)
  {
    delay(5);
    current = digitalRead(switchPin);
  }
  return current;
}

void loop()
{
  currentButton = debounce(lastButton);
  if (lastButton == LOW && currentButton == HIGH)
  {
    Serial.println("UP");

    digitalWrite(ledPin, HIGH);
  }
  if (lastButton == HIGH && currentButton == LOW)
  {
    Serial.println("DOWN");

    digitalWrite(ledPin, LOW);
  }

  lastButton = currentButton;
} 
```

如您所见，一切都很简单：按下按钮后设备将“DOWN”或“UP”发送到串行端口。我想从我的 WPF 应用程序中接收它。这是它的代码：

```
 namespace Morse_Device_Stuff
{
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private SerialPort port;

        private bool recordStarted = false;

        private void recordButton_Click(object sender, RoutedEventArgs e)
        {

            SerialPort port = new SerialPort("COM3", 9600);
            port.Open();
            recordStarted = !recordStarted;
            string lane;

            if(recordStarted)
            {

                (recordButton.Content as Image).Source = new BitmapImage(new Uri("stop.png", UriKind.Relative));

                port.DataReceived += new SerialDataReceivedEventHandler(port_DataReceived);

            }

            else
            {
                (recordButton.Content as Image).Source = new BitmapImage(new Uri("play.png", UriKind.Relative));
            }

            port.Close();
        }

        private void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
        {
            textBox.Text += port.ReadExisting();
        }
    }
} 
```

按下按钮后没有任何变化，我的 TextBox 仍然是空的。

有什么不好的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:54:06.347

端口在 recordButton_Click 函数内关闭。由于 DataReceived 是异步调用的，因此没有任何反应。使 SerialPort 端口变量类成员，并从 recordButton_Click 中删除 port.Close 行。

您可以在其他地方关闭端口，例如，当窗体关闭时。

此外，您不应直接在 port_DataReceived 函数内更改 textBox.Text，因为它是在任意线程上下文中调用的。使用 Dispatcher.BeginInvoke 将此操作重定向到主应用程序线程。

# c++ - 将ac项目编译成最小尺寸

> ID：11069810
> 
> 赞同：0
> 
> 时间：2012-06-17T07:59:23.713
> 
> 标签：c++, eclipse, gcc, opencv

我正在嵌入式处理器（NIOS 2）上使用 opencv 库编写算法，以便移植要在 nios 上编译的库：

1 - 我删除了 highgui 和所有处理 IO 操作的函数。

2 - 我把剩下的文件（很多）和我的main.cpp一起添加到一个新的eclipse项目中。

3 - 我可以编译代码并正常运行，但主要问题是将下载到嵌入式处理器（.elf 文件）的输出文件太大~20 MB 没有优化，~6 MB 优化级别 3 .

是否有任何提示可以只编译这个大型项目中需要的文件并跳过我在代码中没有调用的其他文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:03:51.320

假设您正在构建一个带有`main()`.

如果您知道某些文件根本没有被使用，则将它们从项目中删除。导致的任何错误都应该告诉您它们实际上是如何*被*调用的，并且您需要删除可能导致那里的代码路径。

您可能会使用`-Os`to optimize for size 而不是`-O3`，但我不知道在 NIOS 平台上有多少差异，其中（除非事情发生了根本性变化）优化 size 始终是必不可少的。

# php - 我需要从 PHP 脚本执行 C 程序

> ID：11069811
> 
> 赞同：2
> 
> 时间：2012-06-17T07:59:26.860
> 
> 标签：php, c++, c, exec

好的，我想用我的 PHP 脚本创建一个爬虫。我的爬虫的某些部分需要真正快速地处理字符串，这就是为什么我决定使用 C/C++ 程序来协助我的 PHP 脚本完成该特定工作的原因。以下是我的代码：

```
$op=exec('main $a $b');
echo $op; 
```

main 是使用我的 C 文件生成的可执行文件，`main.c`即`main.exe`. 在上面的操作中，我只是做了一个简单的 C 程序，它接受来自 PHP 的 2 个值并返回这两个值的总和。以下是我的 C 程序的外观

```
#include< stdio.h >
#include< stdlib.h >
int main(int argc, char *argv[])
{
  int i=add(atoi(argv[1]),atoi(argv[2]));
  printf("%d\n",i);
  return 0;
}

int add(int a, int b)
{
  int c;
  c=a+b;
  return c;
} 
```

我试图通过 CMD 执行程序`main 1 1`，但它返回了`2`....它成功了！当我像这样在 php 脚本中输入它们时，

```
$a=1;
$b=1;
$op=exec('main $a $b');
echo $op; 
```

它没有按预期工作，所以我需要对我的代码做任何想法、建议或其他任何事情。如果你能给我举个例子，我会很棒。提前致谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T08:06:02.333

`exec`由于您要传递变量，因此您应该用双引号将参数括起来。并且您的程序的输出在`exec`.

```
exec("main $a $b", $out);
print_r($out); 
```

请参阅[`exec()`参考资料](http://php.net/exec)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T08:10:18.843

该函数`atoi()`无法区分无效和有效输入。我建议你`strtol()`改用。

```
#include <stdio.h>
#include <stdlib.h>

void quit(const char *msg) {
  if (msg) fprintf(stderr, "%s\n", msg);
  exit(EXIT_FAILURE);
}

int add(int, int);

int main(int argc, char *argv[]) {
  int a, b, i;
  char *err;

  if (argc != 3) quit("wrong parameter count");
  a = strtol(argv[1], &err, 10);
  if (*err) quit("invalid first argument");
  b = strtol(argv[2], &err, 10);
  if (*err) quit("invalid second argument");

  i = add(a, b);
  printf("%d\n", i);
  return 0;
}

int add(int a, int b) {
  return a + b;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T08:36:21.747

您需要创建一个可执行文件 ./main。然后使用此代码。它的工作原理

```
<?php
 $a=1;
 $b=1;
 echo exec("./main $a $b"); 
?> 
```

# database - 在数据库中存储 MD5 值

> ID：11069812
> 
> 赞同：0
> 
> 时间：2012-06-17T07:59:40.507
> 
> 标签：database, md5, database-optimization

> **可能重复：**
> [在 mysql 中有效存储 md5 哈希的最佳实践](https://stackoverflow.com/questions/2326584/best-practices-for-efficiently-storing-md5-hashes-in-mysql)

我们在系统中使用 MD5 值的十六进制表示。

将它们作为整数而不是字符串存储在我们的 MySQL DB 中是否明智？这会改进使用 MD5 列搜索表吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:05:19.323

MD5 散列的大小为 128 位。MySQL INT 是 32 位，BIGINT 是 64 位。所以不，您不能将 MD5 哈希存储为 INT。我建议使用 BINARY(16)。您应该再考虑一下 MD5 是否适合您的目的，或者您是否会更好地使用 SHA-1（如果您将 MD5 用于加密相关任务）。

# c# - 从 windows-service 以用户身份启动程序

> ID：11069813
> 
> 赞同：0
> 
> 时间：2012-06-17T07:59:41.917
> 
> 标签：c#, windows, user-interface, service, messagebox

我想从 Windows 服务中以用户身份启动一个程序。

这可能吗？

背景是我需要显示一个 MessageBox 并且只需执行类似的操作

```
 MessageBox.Show(args[0]); 
```

在节目中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:04:27.373

这不会像您期望的那样运行。windows-service 最有可能作为 LocalSystem 运行，并与 Session 0 相关联。即使您将服务设置为允许与桌面交互，它也很可能不会显示在您所追求的会话中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:45:46.060

我最终让我的程序在登录时自动启动，但也应该可以使用 CreateProcessWithLogonW 从服务中启动程序。

# qt - Eventloop 没有更新 GUI 小部件的不透明度值

> ID：11069816
> 
> 赞同：1
> 
> 时间：2012-06-17T08:00:14.397
> 
> 标签：qt, qt4, pyqt4

我有一个想要淡出的按钮小部件 ( `self.button1`)

```
def button_slot(self):
    fade_effect = QtGui.QGraphicsOpacityEffect()
    self.button1.setGraphicsEffect(fade_effect)
    hideAnimation = QtCore.QPropertyAnimation(fade_effect, "opacity")
    hideAnimation.setDuration(5000)
    hideAnimation.setStartValue(1.0)
    hideAnimation.setEndValue(0.0)
    hideAnimation.start(QtCore.QPropertyAnimation.DeleteWhenStopped)
    self.hideAnimation = hideAnimation 
```

代码在 PyQt 中，但与原始 Qt 相同。

出于某种原因，当我在测试文件中单独尝试代码时，它运行良好。但是，当尝试将它集成到我的代码中时，似乎淡出动画在后台运行，但在 GUI 本身中没有更新：

*   按钮卡在“点击”状态。
*   如果我最小化并放大窗口，按钮的不透明度就在它应该在的位置（例如，如果持续时间从 1.0 到 0.0 为 5000 毫秒，则在 2500 毫秒后放大窗口将显示 0.5 不透明度）。
*   该按钮是可点击的，即使它看起来“卡住”。

为什么会发生这种情况？如何强制 GUI 在每次事件迭代时自行更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T12:46:25.393

我唯一可能的解释是你在代码的其他地方阻塞了事件循环。正如您的测试用例所示，动画肯定会运行，但它是从事件循环中调用的。如果你的代码阻塞——如果你的代码中有任何地方让你等待事情、睡觉等，那么这就是你的问题。

Qt 和许多其他框架中的 GUI 代码必须以运行到完成的方式编写。每个插槽和事件处理程序都必须尽快执行，然后返回。当您在插槽中添加断点并在代码停止时查看堆栈跟踪时，您会发现`QEventLoop::exec()`它就在那里。最终，所有 GUI 代码都从事件循环中调用。

尝试分段减少代码，直到问题消失。这样您就可以知道阻塞部分在哪里。不幸的是，Qt 提供了许多名为 的方法`waitxxx()`，并且往往在不了解它们阻塞事件循环的情况下使用它们。阻塞的事件循环意味着应用程序不响应用户交互，最终操作系统会检测到它并发出旋转的沙滩球 (OS X)、旋转的圆圈 (Vista/Win7) 或者可能是关于应用程序卡住的消息。旋转的沙滩球/圆圈意味着应用程序的主事件循环被阻塞。

# android - 在 asynctask 下载期间 android 手机冻结

> ID：11069820
> 
> 赞同：1
> 
> 时间：2012-06-17T08:01:21.810
> 
> 标签：android, android-asynctask

我已经完成了一个从互联网下载文件的代码。但问题是我的手机会冻结（无响应），直到下载完成。我使用的手机是 Xperia Arc S 和 Galaxy S2。无论如何要解决这个问题？

```
 @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.staffchoices);       

        MyI = new Intent(getApplicationContext(), MaxAppsAct.class);
        MyPI = PendingIntent.getActivity(getApplicationContext(), 0, MyI, 0);
        MyNM = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);

        Intent intent = new Intent(getApplicationContext(), MaxAppsAct.class);
        final PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, intent, 0);

        notification = new Notification(R.drawable.logo, "Downloading...", System.currentTimeMillis());
        notification.flags = notification.flags | Notification.FLAG_ONGOING_EVENT;
        notification.contentView = new RemoteViews(getApplicationContext().getPackageName(), R.layout.staffchoices);
        notification.contentIntent = pendingIntent;
        notification.contentView.setImageViewResource(R.id.imgIcon, R.drawable.save);
        notification.contentView.setTextViewText(R.id.tvText, "Downloading...");
        notification.contentView.setProgressBar(R.id.pbStatus, 100, progress, false);
        notificationManager = (NotificationManager) getApplicationContext().getSystemService(getApplicationContext().NOTIFICATION_SERVICE);
        notificationManager.notify(42, notification);

        String url = "http://www.domainURL.com/3d.png";
        new DownloadFileAsync().execute(url);
        }

        public class DownloadFileAsync extends AsyncTask<String, Integer, Void> {

        @Override
        protected void onPreExecute(){
            super.onPreExecute();
            }

        @Override
        protected Void doInBackground(String... aurl) {
            int count;
            try {
                URL url = new URL(aurl[0]);
                URLConnection conexion = url.openConnection();
                conexion.connect();

                int lengthOfFile = conexion.getContentLength();
                Log.d("ANDRO_ASYNC", "Lenght of file: " + lengthOfFile);

                File folder = new File(Environment.getExternalStorageDirectory() + "/MaxApps");
                boolean success = false;
                if (!folder.exists()) {
                    success = folder.mkdirs();
                }
                if (!success) {
                } else {
                }

                InputStream input = new BufferedInputStream(url.openStream());
                OutputStream output = new FileOutputStream("/sdcard/MaxApps/3d.png");

                byte data[] = new byte[1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                total += count;
                publishProgress((int)((total*100)/lengthOfFile));               
                output.write(data, 0, count);
                }

                output.flush();
                output.close();
                input.close();
                } catch (Exception e) {}

            return null;
        }

        @Override
        protected void onProgressUpdate(Integer... progress) {          
            notification.contentView.setProgressBar(R.id.pbStatus, 100, progress[0], false);
            notificationManager.notify(42, notification);
            }

        protected void onPostExecute(String unused) {
            notificationManager.cancel(42);

            Notification MyN = new Notification(); MyN.icon = R.drawable.logo1;
            MyN.tickerText = "Download Complete";
            MyN.number = 1;
            MyN.setLatestEventInfo (getApplicationContext(), "Application Title", "Application Description", MyPI);

            MyNM.notify(1, MyN);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T10:14:26.973

性能瓶颈似乎`publishProgress`是调用的频率。您应该设计一种在不影响用户体验的情况下减少发布进度的方法。

建议：

1.  将缓冲区大小增加到合理的值，例如 16K 或 32K
2.  更改进度发布机制如下：

    ```
    while ((count = input.read(data)) != -1) {
        total += count;
        int progressPercent = (int) ((total*100)/lengthOfFile);
        if(progressPercent % 20 == 0){  //publish progress on completion of every 20%
            publishProgress(progressPercent);
        }
        output.write(data, 0, count);
    } 
    ```

# python - 使用 mechanize 的密码保护网站

> ID：11069821
> 
> 赞同：0
> 
> 时间：2012-06-17T08:01:44.773
> 
> 标签：python, authentication, mechanize, mechanize-python

我想访问使用 mechanize 的受密码保护的站点 way2sms。

```
import mechanize
br = mechanize.Browser()
br.open('http://site2.way2sms.com/content/index.html')
for form in br.forms():
     print form 
```

这给出了这个

```
<loginform POST http://site2.way2sms.com/content/index.html application/x-www-form-urlencoded
<IgnoreControl(button2=<None>)>
<TextControl(username=Mobile Number)>
<PasswordControl(password=******)>
<SubmitControl(button=Login) (readonly)>> 
```

然后我做了这个

```
br.select_form(nr = 0)
br.form['username']= 'My mobile'
br.form['password'] = 'Password'
br.submit()
br.response().read() 
```

这在登录后给出了页面的 html，但我怎样才能在登录之前获取页面。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:06:53.757

查看页面源代码：他们在提交表单时进行了一些 javascript 验证，并在此期间替换了表单操作，机械化显然不会这样做，您必须在提交表单之前手动执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T18:09:09.923

用这个：

```
import mechanize
br = mechanize.Browser()
br.open('http://site2.way2sms.com/content/index.html')
print br.response().read() 
```

# java - Clojure - 为什么加载字符串在这种情况下不起作用？

> ID：11069825
> 
> 赞同：1
> 
> 时间：2012-06-17T08:03:16.607
> 
> 标签：java, clojure

(load-string s) 根据其文档：

“顺序读取和评估字符串中包含的一组表单”

为什么它在以下代码中不起作用？

```
(let [fun #(+ 1 2)]
     (load-string "(fun)")) 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T10:24:52.560

您根本无法从加载字符串访问词法环境，因此即使这样也行不通：

```
(let [fun 12]
     (load-string "(+ 1 fun)")) 
```

只有绑定值有效，请参见此处：

[使用 clojure 的动态代码](https://stackoverflow.com/questions/4934494/dynamic-code-with-clojure)

# sql-server - SSIS Exec 来自一个父级的两个包

> ID：11069831
> 
> 赞同：0
> 
> 时间：2012-06-17T08:04:08.760
> 
> 标签：sql-server, sql-server-2008, ssis

我有一个父包需要执行两个子包，它们之间有一点延迟。问题是第二个包在 10 秒延迟后不会执行。任何想法？

谢谢。

![SSIS](../Images/e6a649eecb52da39a18584e69c235887.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:03:24.503

`WAITFOR DELAY '00:00:10'`在执行 SQL 任务中使用 SQL对我有用。

[http://www.sqlchick.com/entries/2011/5/1/creating-a-time-delay-in-ssis-when-loading-master-data-servi.html](http://www.sqlchick.com/entries/2011/5/1/creating-a-time-delay-in-ssis-when-loading-master-data-servi.html)

# php - Php/MySQL：在数据库中存储图像标题？

> ID：11069835
> 
> 赞同：0
> 
> 时间：2012-06-17T08:04:36.683
> 
> 标签：php, mysql

我有一张`products`包含产品信息的表格。每个产品可以有无限的图片。这些图片存储在以其产品ID命名的文件夹中，这很好，我不需要数据库来存储文件名。

但是这些图片中的每一张都有文字说明。 **我的问题是，存储这些字幕数据的最佳解决方案是什么？**

我应该创建一个名为 的表`products_captions`，其中包含字段
`product_id, image_name, caption_text`

或者我应该`captions_array`在产品表中创建一个字段，包含一个序列化的字符串数组，数组键对应于文件名？

这有什么标准吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T08:12:22.250

根据您的要求，您可以创建另一个表来存储图像名称及其标题和产品 ID，因此当您想要获取与产品相关的标题时，您可以通过将产品 ID 传递给表来获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T08:46:19.617

将您的标题存储在另一个表中并映射图像和标题，例如

```
field       column
--------------------
id          int
Image       Blob
captionID   int 

field           column
----------------------
captionID       int
cation          varchar(50) 
```

# ios - becomeFirstResponder 内存问题

> ID：11069844
> 
> 赞同：1
> 
> 时间：2012-06-17T08:05:53.633
> 
> 标签：ios, memory-management, uitextfield

我有一个隐藏的 UITextField ，当用户需要从键盘输入一个字符时发送：

```
[txtField becomeFirstResponder] 
```

这个文本字段有一个编辑事件发生变化，然后调用一个函数来处理我需要的输入内容。

然后用户选择一个ok按钮，调用以下命令：

```
txtBox.text = @"";

[txtBox resignFirstResponder ]; 
```

我一直跟踪到一些内存问题`[txtField becomeFirstResponder]`。调用此方法时，我的应用程序内存使用量当场翻倍，并且我收到内存警告（即使代码运行）。如果我删除它（我当然没有键盘！）但内存问题就会消失。我已经阅读并尝试了一些方法，例如在代表级别移除键盘，但没有成功。我几乎要创建自己的键盘了。

即使它很多，我也可以使用这种增加，只要我关闭键盘后它会正确释放 - 但事实并非如此。该应用程序的足迹越来越重，对于我的生活，我无法弄清楚为什么。

第一个问题是，上面是否有可能导致我出现问题？我认为这不太可能。

如果没有，有什么建议可以去哪里看/为什么我会收到如此快速的增长？

这是 Instruments 的截图 - 红线表示我调用 becomeFirstResponder 的位置：http://i.stack.imgur.com/E7PaU.png [（](http://i.stack.imgur.com/E7PaU.png) 他们不会让我上传它 - 抱歉！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T14:04:39.873

这不是跟踪内存泄漏/问题的好方法。如果存在内存泄漏，仪器将显示泄漏，您可以修复。您不应该假设操作系统会因为您关闭键盘而释放内存（如果有的话，它可能是延迟加载和缓存的）。
虽然我从来没有遇到过这个问题，但是当您显示键盘时，您的内存占用可能会增加。你没有说实际使用了多少内存，所以我会假设它是一个小应用程序，并且在打开键盘时加倍应该没问题。
操作系统缓存所有冻结的打开应用程序，因此内存总是很紧张。当收到内存警告时，清除你能做的，让操作系统处理其余的。如果需要，它将杀死后台应用程序。这并不意味着您的应用程序有问题。

# java - 正确重新组装拆分的文件

> ID：11069847
> 
> 赞同：3
> 
> 时间：2012-06-17T08:06:12.160
> 
> 标签：java, file-io, io, inputstream, outputstream

请看下面的代码

```
package normal;

import java.io.*;
import java.util.*;

public class ReGenerateFiles
{
    private File inputFolder, outputFolder;
    private String outputFormat, nameOfTheFile;

    private FileInputStream fis;
    private FileOutputStream fos;
    List <Byte> al;

    private byte[] buffer;

    private int blockNumber = 1;

    public ReGenerateFiles(File inputFile, File outputFile, String nameOfTheFile, String outputFormat)
    {
        this.inputFolder = inputFile;
        this.outputFolder = outputFile;
        this.nameOfTheFile = nameOfTheFile;
        this.outputFormat = outputFormat;
    }

    public void reGenerate() throws IOException
    {
        File file[] = inputFolder.listFiles();

        for(int i=0;i<file.length;i++)
        {
            System.out.println(file[i]);
        }

        for(int i=0;i<file.length;i++)
        {
            try
            {
                buffer = new byte[5000000];

                int read = fis.read(buffer, 0, buffer.length);
                fis.close();

                writeBlock();

            }
            catch(IOException io)
            {
                io.printStackTrace();
            }
            finally
            {
                fis.close();
                fos.close();
            }
        }
    }

    private void writeBlock()throws IOException
    {
        try
        {
            fos = new FileOutputStream(outputFolder+"/"+nameOfTheFile+"."+outputFormat,true);
                fos.write(buffer, 0, buffer.length);
                fos.flush();
                fos.close();
        }
        catch(Exception e)
        {
            fos.close();
            e.printStackTrace();
        }
        finally
        {
            fos.close();
        }
    }

} 
```

在这里，我正在尝试将拆分的文件重新组装**回**其原始文件。[这就是我拆分它](https://stackoverflow.com/questions/10863522/java-reading-bytes-from-a-txt-file-line-by-line)的方式（所选答案）

现在，当我尝试重新组装它时，我收到一个类似于“无法访问 kalimba.mp3。它被另一个程序使用”的错误消息。这发生在执行 93 个拆分文件（还有 200 个以上）之后。为什么会发生这种情况，即使我已经确保流在 finally 块内关闭？

另一个问题，我已将 500000 分配为字节数组值。我这样做是因为我未能根据即将处理的特定文件的原始大小设置字节数组。我将字节数组值分配为

```
buffer = new byte[(byte)file[i].length(); 
```

之前，但它没有工作。

请帮助我解决这两个问题并正确地重新组装拆分的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:52:22.663

那是因为缓冲区永远不会适合实际内容的大小。它始终是 50000，实际大小会有所不同。这就是问题

# mfc - 根据复选框值更改 UI 状态

> ID：11069848
> 
> 赞同：0
> 
> 时间：2012-06-17T08:06:43.460
> 
> 标签：mfc

我有以下情况。

有一个带有复选框和文本框的对话框。复选框的单击绑定到一个函数，该函数在文本框启用或变灰时进行切换。它工作正常，但我还需要在创建和显示对话框之前为对话框预设一些值。如果连接到复选框的变量设置为 ture 我想禁用文本框。

我尝试以不同的方式完成此操作，但这一切都归结为这样一个事实，即我无法在调用之前更改对话框的 GUI `DoModal`（尝试时我得到断言失败）。

这可能是一个常见问题，但我可以在网上找到解决方案。我完全偏离轨道了吗？

```
MyDialog d(this);
d.bFlag = TRUE; // Because it is true, I want the text-box to be disabled
// I could call a function of d here that would set the state of the text-box correctly,
// but an assertion falure would happen.
if (d.DoModal() == IDOK){
...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T05:27:35.200

您需要在对话框类 MyDialog 中覆盖 OnInitDialog 函数，并使用代码检查复选框值并启用/禁用文本框。

# iphone - 如何为 icarousel 中的每个按钮创建单独的操作？

> ID：11069852
> 
> 赞同：2
> 
> 时间：2012-06-17T08:07:21.683
> 
> 标签：iphone, ios, xcode, ibaction, icarousel

我使用icarousel创建了一个在coverflow中显示8个按钮的应用程序。我必须为每个按钮分配不同的操作。这是我的viewcontroller.m文件代码..

```
- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
{
return NUMBER_OF_ITEMS;
}

- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index   reusingView:(UIView *)view
{

UIImage *buttonImage=[NSArray arrayWithObjects:[UIImage imageNamed:@"Cover_0.png"],
                      [UIImage imageNamed:@"Cover_1.png"],
                      [UIImage imageNamed:@"Cover_2.png"],
                      [UIImage imageNamed:@"Cover_3.png"],
                      [UIImage imageNamed:@"Cover_4.png"],
                      [UIImage imageNamed:@"Cover_5.png"],
                      [UIImage imageNamed:@"Cover_6.png"],
                      [UIImage imageNamed:@"Cover_7.png"],nil];

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(0, 0, 200.0f, 200.0f);

[button setImage:(UIImage*)[buttonImage objectAtIndex:index] forState:UIControlStateNormal];    
[button addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside];
return button;   
}

- (void)buttonTapped:(UIButton *)sender
{
} 
```

在这里我被卡住了......现在我想为每个按钮分配不同的动作。但是如果我在 buttonTapped 下声明一个动作，它会被分配给所有按钮..有人可以帮忙吗？...

除了我之前的问题之外，我还在 xib 文件中的该按钮中添加了其他两个按钮和两个事件，并在我的 .m 文件中定义了方法...但是如果我在模拟器上运行它，它只会显示为图像并且无法与该按钮交互...任何想法请...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:13:57.280

只需根据按钮标签值调用 base 即可。

获取按钮标签值

```
- (void)buttonTapped:(UIButton *)sender
{

uibutton *btn=(uibutton *) sender;

nslog(@"button tag== %d",btn.tag);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T08:21:12.237

您可以像这样询问轮播按钮按下了哪个按钮：

```
- (void)buttonTapped:(UIButton *)sender
{
    NSInteger index = [carousel indexOfItemViewOrSubview:sender];
    switch(index) {
        case 0:
            //do action number 1
            break;
        case 1:
            //do action number 2
            break;
        etc....
    }
} 
```

# c - 没有类型转换的奇怪输出

> ID：11069853
> 
> 赞同：5
> 
> 时间：2012-06-17T08:07:24.923
> 
> 标签：c, casting

我试图通过 gcc 编译器执行这段代码：

```
#include <stdio.h>
int main()
{
    unsigned long long int x;
    x = 75000 * 75000;
    printf ("%llu\n", x);
    return 0;
} 
```

但它给出了错误的输出。

然后我尝试了这个：

```
#include <stdio.h>
int main()
{
    unsigned long long int x;
    x = (unsigned long long)75000 * (unsigned long long)75000;
    printf ("%llu\n", x);
    return 0;
} 
```

它给出了正确的输出！

为什么会这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T08:09:24.273

表达式`75000 * 75000`是两个整数常量的乘积。这个表达式的结果也是一个整数，可以溢出。然后将结果分配给 unsigned long long，但它已经溢出，因此结果是错误的。

要编写 unsigned long long 常量，请使用`ULL`后缀。

```
x = 75000ULL * 75000ULL; 
```

现在乘法不会溢出。

# mysql - 如何像这样组合 2 个 MySQL 表？（多对一关系）

> ID：11069865
> 
> 赞同：0
> 
> 时间：2012-06-17T08:09:48.763
> 
> 标签：mysql

我有这样的 UserComments 表：

```
1 | Frank | hello world
2 | Jane | Hi there
3 | Frank | this is my comments
4 | Frank | I think I need some sleep
5 | Jason | I need to buy new MacBook
6 | Jane | Please invite my new Blackberry PIN 
```

另一方面，我有 FriendList 表包含：

```
1 | Jason
2 | Jane 
```

假设我的朋友 ID 总是介于 1 和 5 之间。

而且由于弗兰克不是我的朋友，我无法看到他的评论。如何组合这样的表（ORDER BY UserComments.ID DESC）：

```
1 | Jane | Please invite my new Blackberry PIN
2 | Jason | I need to buy new MacBook
3 | Jane | Hi there 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:15:59.120

试试这个：

```
 SELECT A.ID, B.UserName, B.Comment 
      FROM FriendList A
INNER JOIN UserComments B ON A.ID = B.ID
  ORDER BY A.ID DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T08:18:24.537

试试这个：：

```
Select 
* 
from 
user_comments inner join friend_List on (join criteria)
where user_Id = ? order by user_comments.id desc 
```

# ember.js - 在 Rails 应用程序中使用 emberjs，来自 git master 的数据

> ID：11069869
> 
> 赞同：1
> 
> 时间：2012-06-17T08:11:00.147
> 
> 标签：ember.js

`ember.js`使用, `data`from会很好`git HEAD`，因为项目进展得如此之快；）。`ember-rails`非常有用，我绝对想使用它。对于想要使用最新 ember 资产的人来说，将它添加到 ember-rails 会很好。

```
rake g ember_rails:install 
```

这实际上将资产复制到 vendor/javascript 文件夹。

后续升级应该

```
rake g ember_rails:upgrade 
```

这当然是一种方法。可能已经有办法做到这一点了？

建议？如果需要，我可以为它创建一张票。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T08:59:28.907

好的，回答我自己的问题：

`rails g ember:install --head`

这样做。但是，它不是 vendor `ember-data`，`bootstrap`生成的东西取决于它。目前有一个[拉取请求](https://github.com/emberjs/ember-rails/pull/68)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:43:17.137

您可以直接链接到它们：

*   `https://github.com/emberjs/ember.js/downloads`
*   `https://github.com/emberjs/data/downloads`

# c# - 如何在 linq 查询中使用 group by？

> ID：11069876
> 
> 赞同：1
> 
> 时间：2012-06-17T08:13:19.113
> 
> 标签：c#, linq, linq-group

我有一个包含产品名称、产品价格和类别的产品列表。我想编写一个 linq 查询来根据类别对所有产品进行分组。我尝试了以下方法：

```
var p = from s in productlist
        group s by s.Category into g
        select new { Category = g.Key, Products = g}; 
```

使用此查询，它显示了一个包含两列作为类别和产品的表。类别列有两个类别，但在产品列下，没有数据。我希望所有产品列表都按类别分开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T11:14:20.590

> 好的..需要更多帮助，现在当我运行代码时，它只显示了一个表，其中类别列按预期显示了两个类别，但产品列没有显示任何数据。

您需要从组中选择产品：

```
Products = g.Select(p => p).ToList() 
```

看看下面的一些附加属性。

```
var categories = from s in productlist
                group s by s.category into g
                select new { 
                    Category = g.Key, 
                    Products = g.ToList(),
                    ProductCount = g.Count(),
                    AveragePrice = g.Average(p => p.productprice)
                }; 
```

# regex - 如何在没有新行的情况下替换空格

> ID：11069880
> 
> 赞同：2
> 
> 时间：2012-06-17T08:14:07.743
> 
> 标签：regex, perl

我有一个文本文件，其中每一行都可能以一些被空格包围的固定 TAG 结尾，例如

> 一些文字标签

我正在写类似的东西：

```
while (<FILE>) {
  s/\s*TAG\s*$//;
  print;
} 
```

问题是这从末尾删除了新行，有没有告诉 Perl 不要替换新行？我唯一想到的就是写

```
s/\s*TAG[ \t]*$//; 
```

有没有更好的办法？

[不确定这是否相关，但操作系统是 Linux]

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T08:34:45.787

`[^\S\n]`将匹配不是换行符的空格，因此：

```
s/\s*TAG[^\S\n]*$//; 
```

或者你可以这样做：

```
s/\s*TAG\s*$/\n/; 
```

# python - python api-shopify.Variant 404错误

> ID：11069881
> 
> 赞同：2
> 
> 时间：2012-06-17T08:14:19.537
> 
> 标签：python, api, http-status-code-404, shopify

尝试使用 python 库创建一个新的 Variant。

创建 shopify 会话后，我只是尝试根据文档创建一个 Variant 实例

```
session = shopify.Session('<My Url>')
session.token = self.provider_access_token
shopify.ShopifyResource.activate_session(session)

v=shopify.Variant(dict(price="20.00", option1="Second"))
v.save() 
```

并得到：

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/Users/yoda/.virtualenvs/myproject/src/shopify/shopify/base.py", line 151, in     save
    return super(ShopifyResource, self).save()
  File "/Users/yoda/.virtualenvs/myproject/lib/python2.6/site-packages/pyactiveresource    /activeresource.py", line 732, in save
    data=self.to_xml())
  File "/Users/yoda/.virtualenvs/myproject/lib/python2.6/site-packages/pyactiveresource    /connection.py", line 313, in post
    return self._open('POST', path, headers=headers, data=data)
  File "/Users/yoda/.virtualenvs/myproject/src/shopify/shopify/base.py", line 18, in     _open
    self.response = super(ShopifyConnection, self)._open(*args, **kwargs)
  File "/Users/yoda/.virtualenvs/myproject/lib/python2.6/site-packages/pyactiveresource    /connection.py", line 258, in _open
    response = Response.from_httpresponse(self._handle_error(err))
  File "/Users/yoda/.virtualenvs/myproject/lib/python2.6/site-packages/pyactiveresource    /connection.py", line 357, in _handle_error
    raise ResourceNotFound(err)
ResourceNotFound: HTTP Error 404: Not Found 
```

有什么想法或提示吗？:)

感谢 RCdH

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T08:34:34.213

产品变体必须在列出、计数或创建操作时指定 product_id。这可以在[Product Variant API 文档](http://api.shopify.com/product_variant.html#create)中看到，因为 product_id 是 URL 路径的一部分。正是由于这个原因，Shopify 会返回 404 错误，因为路径不存在。

Shopify Wiki 上的[使用 shopify_python_api](http://wiki.shopify.com/Using_the_shopify_python_api#Prefix_Options)页面有一个关于前缀选项的部分，您可能会发现它很有帮助。

在您的示例中，您只需要更改行

`v=shopify.Variant(dict(price="20.00", option1="Second"))`

至

`v=shopify.Variant(dict(price="20.00", option1="Second", product_id=product.id))`

假设您有一个产品要在变量中创建一个变体`product`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T00:23:23.730

您还需要将变体的 ID 与 product_id 一起传递

```
# get first product
product = shopify.Product.find()[0]

# get product's first variant
variant = product.variants[0]

# pass both the product and variant ids 
v=shopify.Variant(dict(price="20.00", product_id=product.id, id=variant.id))

# finally save the variant
v.save() 
```

# mysql - 将 MySQL 数据库转换为 UTF16

> ID：11069882
> 
> 赞同：4
> 
> 时间：2012-06-17T08:14:34.817
> 
> 标签：mysql, set, character, utf-16

我正在尝试在 MySQL 数据库中创建此表

```
CREATE TABLE IF NOT EXISTS `Scania` (
  `GensetType` text CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `EngineType` text CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `Engine60Hz` int(11) NOT NULL,
  `Alternator` text CHARACTER SET utf16 COLLATE utf16_unicode_ci NOT NULL,
  `PriceEur` float NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

但是我收到一条错误消息

```
Error 1115 <42000> : Unknown character set: 'UTF 16' 
```

我什至试图改变数据库，但我收到了同样的错误

```
ALTER DATABASE nordhavn charset='utf16' 
```

我尝试在网上搜索其他转换数据库的方法，但未能找到任何可能的解决方案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T08:37:34.270

该`utf16`字符集[从 MySQL 5.5 及更高](http://dev.mysql.com/doc/refman/5.6/en/charset-unicode.html)版本开始可用。
我猜你正在使用一些早期版本。

# sql - SQL 查询 - 可能需要分析函数

> ID：11069886
> 
> 赞同：3
> 
> 时间：2012-06-17T08:15:12.223
> 
> 标签：sql, oracle

我昨天问了一个类似的问题，得到了正确的回答。[需要自我连接和排名的 SQL](https://stackoverflow.com/questions/11062899/sql-requiring-self-join-and-ranking) 虽然这个问题很相似，但我无法调整答案以适应。

我有一个足球结果表：

```
 CREATE TABLE matches(
    season NUMBER(4),
    matchDate DATE,
    homeTeam VARCHAR2(25),
    awayTeam VARCHAR2(25),
    homeGoals NUMBER(2),
    awayGoals NUMBER(2),
    totalGoals NUMBER(3)); 
```

INSERT 语句可以在这里找到：[https ://gist.github.com/2941229](https://gist.github.com/2941229)

我希望按如下方式计算 totalGoals 的值。它是当前主队最近 5 场比赛的总进球数（主场进球+客场进球）加上当前客队在本场比赛之前最近 5 场比赛的进球数。它不能包括当前比赛的进球。

与昨天的问题不同的是，它只计算了之前主队主场比赛和客队客场比赛的比赛。有了这个问题，主队之前是在主场还是客场比赛都没有关系。他们只需要成为上一场比赛的球队之一。

和以前一样，应该只使用当前赛季的比赛，如果任何一支球队在赛季中没有打过 5 场比赛，那么 totalGoals 应该保持为 NULL。

我可以使用 PL/SQL 做到这一点，但我更喜欢 SQL 查询。昨天的解决方案比我的 PL/SQL 快大约一千倍。

谢谢塔姆斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T10:06:20.160

本质上，您需要能够在主队/客队计算中引入某种“或”，但在分析函数中（据我所知）您不能这样做。看起来您需要创建一个中间表（它仅在查询期间存在，所以我猜是更多视图），其中包含一个带有任一团队名称的附加计算列。您可以使用[`unpivot`](http://docs.oracle.com/cd/E11882_01/server.112/e17118/statements_10002.htm#CHDJBHHI)它，但您会丢失可能仍需要的原始列。因此，您可以回退到 11g 之前的 psuedo-unpivot，例如：

```
select season, matchdate, hometeam, awayteam, homegoals, awaygoals,
    case when rn = 1 then hometeam else awayteam end as anyteam
from matches
cross join (select level as rn from dual connect by level <= 2) 
```

这将为您原始表中的每一行提供两行。您应该能够将其用作（另一个）子查询来代替`matches`昨天的答案，并对分析子句进行一些调整，并删除重复项。

# .htaccess - 如何防止 .htaccess 重写影响文件夹？

> ID：11069888
> 
> 赞同：0
> 
> 时间：2012-06-17T08:15:18.977
> 
> 标签：.htaccess, directory, rewrite

这是我当前的 .htaccess：

```
RewriteEngine on
RewriteBase /cp/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !\.php$
RewriteRule ^(?!\s*$).* $0.php [L] 
```

这会影响同一目录中的文件夹。这是一个示例文件夹目录：

*   ..
*   css/
*   图片/
*   文件名.php

如果我输入 url: WEBSITE.com/filename，会拉取 filename.php，但是当我输入 WEBSITE.com/css 时，会拉取 WEBSITE.com/css/.php。

我不希望 .htaccess 影响子目录，也不希望将单个 .htaccess 文件放在每个文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:43:27.987

感谢 jassonpet。

我以为我应该替换`add RewriteCond %{REQUEST_FILENAME} !-f`而不是添加`add RewriteCond %{REQUEST_FILENAME} !-d`.

# android - 检索 JSON 对象时出现空指针异常

> ID：11069894
> 
> 赞同：1
> 
> 时间：2012-06-17T08:16:50.383
> 
> 标签：android, json

我是 JSON 新手。我正在使用[http://pnrapi.appspot.com/](http://pnrapi.appspot.com/)使用 JSON 获取特定火车的状态。但是在尝试解析接收到的对象时，我总是得到一个空指针异常。请帮忙。

这是我的代码。

```
public class PNRStatusActivity extends Activity {
    private static final String TAG_CONTACTS = "contacts";
    static InputStream is = null;
    JSONObject jObj = null;
    static String json = "";
    JSONArray contacts = null;
    private static String url = "http://pnrapi.appspot.com/4051234567";
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        // Creating JSON Parser instance
        JSONObject jon=getJSONFromUrl(url);

        try {
            // Storing each json item in variable
            String id = jon.getString("status");
            Toast.makeText(getApplicationContext(), id, Toast.LENGTH_LONG).show();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    //function to get JSON Object
    public JSONObject getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T09:32:12.913

您的代码中存在许多问题，尽管不一定所有问题都与您的`NullPointerException`...

1.  在您`getJSONFromUrl`使用的方法中，您`HttpPost`似乎没有实际发布任何内容。改为使用`HttpGet`。

2.  从响应中读取 JSON 字符串时，使用 的`getContentLength()`方法`HttpEntity`创建一个字节数组，例如 (example)...

    `byte[] buffer = new byte[contentLength]`并简单地阅读`InputStream`为...

    `inStream.read(buffer)`. 当然，您需要在此过程中进行错误检查。在您的情况下，您尝试逐行读取字符串并将“n”附加到每一行。首先，您不需要以这种方式读取 JSON 字符串，如果您实际上打算附加换行符（在任何 Java 代码中的任何时间），它应该是“\n”。

3.  要将您的字节数组转换为可用于 JSON 解析的字符串，您只需执行以下操作...

    `String jsonString = new String(buffer, "UTF-8")`

4.  `iso-8859-1`如果你真的可以避免它，永远不要为任何东西指定编码。

5.  当你`Toast`在你的`Activity` `onCreate(...)`方法中创建你的时，你使用`getApplicationContext()`. 不要使用应用程序上下文，除非您真的确定应该在何时何地使用它。在代码的主体中，`Activity's`您可以`this`在`Context`创建`Toast`.

6.  正如其他人所提到的，请确保在`null`可能发生的任何地方检查退货。如果方法中发生异常并且返回`null`确保调用该方法的任何代码检查`null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T08:27:44.880

仔细看你的代码

```
 try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj; 
```

在上述情况下，如果您收到任何 JSONException，那么您将返回未初始化的 jObj，简而言之，您将返回 null jObj。

因此，您可以通过检查返回的对象是否为空来处理这种情况。

将您的代码更改为以下

```
if (jon != null)
{
    String id = jon.getString("status");
    Toast.makeText(getApplicationContext(), id, Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T08:28:30.160

使用**get**而不是**getString**作为：

```
try {
    JSONObject jsona=new JSONObject("{'status': 'INVALID', 'data': 'No results'}");
    String id = (String)jsona.get("status");
    Toast.makeText(DfgdgdfgdfActivity.this, id, Toast.LENGTH_LONG).show();
} catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

编辑：

利用

```
while ((line = reader.readLine()) != null) {
                sb.append(line);
            } 
```

代替

```
while ((line = reader.readLine()) != null) {
                sb.append(line + "n");
            } 
```

# windows - Qt creator 2.5：意外的 GDB 退出，我怎么知道 GDB 崩溃的原因？

> ID：11069902
> 
> 赞同：0
> 
> 时间：2012-06-17T08:18:56.033
> 
> 标签：windows, qt, gdb, qt-creator

我下载了 QT Creator 2.5，使用从 Qt 站点下载的 mingw：MinGW-gcc440_1 在 QT Creator 2.5 和 Windows 全局 PATH 中设置路径。我在编译时处于调试模式，但是当我尝试使用 GDB 进行调试时，我在错误消息窗口中收到此错误：Unexpected GDB exit in title，gdb 进程崩溃。我使用的是 Windows 7、64 位，但 g++ 正在 32 位编译，我试图在 QT Creator 2.5 中搜索一些日志，但没有成功。

编译行示例：

```
g++ -c -g -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -I"c:\Qt\4.8.2_mingw\include\QtCore" -I"c:\Qt\4.8.2_mingw\include\QtNetwork" -I"c:\Qt\4.8.2_mingw\include\QtGui" -I"c:\Qt\4.8.2_mingw\include" -I"." -I"lib_json\include" -I"lib_json\include\json" -I"c:\Qt\4.8.2_mingw\include\ActiveQt" -I"debug" -I"." -I"c:\Qt\4.8.2_mingw\mkspecs\win32-g++" -o debug\main.o main.cpp 
```

好的，我有调试器的日志，但我很难找到问题：

```
dATTEMPT SYNC
sStarting debugger "GdbEngine" for ABI "x86-windows-msys-pe-32bit"...
dStart parameters: 'LiveU_windows' mode: 1
dABI: x86-windows-msys-pe-32bit
dLanguages: c++ 
dExecutable: D:\dev\cpp\Qt\Qt_mingw\LiveU_windows\LiveU_windows\debug\LiveU_windows.exe 
dDirectory: D:\dev\cpp\Qt\Qt_mingw\LiveU_windows\LiveU_windows
dProject: D:\dev\cpp\Qt\Qt_mingw\LiveU_windows\LiveU_windows (built: D:\dev\cpp\Qt\Qt_mingw\LiveU_windows\LiveU_windows)
dQt: C:\Qt\4.8.2_mingw
dQML server: 127.0.0.1:3768
dSysroot: 
dDebug Source Location: 
dSymbol file: 
dDumper libraries:  C:\Qt\4.8.2_mingw\qtc-debugging-helper\ D:\Qt\qtcreator-2.5.0\qtc-debugging-helper\188129479\ C:\Users\meirmaya\AppData\Local\Nokia\QtCreator\qtc-debugging-helper\188129479\
d
dDebugger settings: 
dUseAlternatingRowColours: false  (default: false)
dFontSizeFollowsEditor: false  (default: false)
dUseMessageBoxForSignals: true  (default: true)
dAutoQuit: false  (default: false)
dLogTimeStamps: false  (default: false)
dVerboseLog: false  (default: false)
dCloseBuffersOnExit: false  (default: false)
dSwitchModeOnExit: false  (default: false)
dUseDebuggingHelper: true  (default: true)
dUseCodeModel: true  (default: true)
dShowThreadNames: true  (default: false)  ***
dUseToolTips: false  (default: false)
dUseToolTipsInLocalsView: false  (default: false)
dUseToolTipsInBreakpointsView: false  (default: false)
dUseAddressInBreakpointsView: false  (default: false)
dUseAddressInStackView: false  (default: false)
dRegisterForPostMortem: false  (default: false)
dLoadGdbInit: true  (default: true)
dGdbStartupCommands:   (default: )
dWatchdogTimeout: 20  (default: 20)
dAutoEnrichParameters: false  (default: false)
dUseDynamicType: true  (default: true)
dTargetAsync: false  (default: false)
dMaximalStackDepth: 20  (default: 20)
dAlwaysAdjustStackColumnWidths: false  (default: false)
dShowStandardNamespace: true  (default: true)
dShowQtNamespace: true  (default: true)
dSortStructMembers: true  (default: true)
dAutoDerefPointers: true  (default: true)
dAlwaysAdjustLocalsColumnWidths: false  (default: false)
dListSourceFiles: false  (default: false)
dSkipKnownFrames: false  (default: false)
dEnableReverseDebugging: false  (default: false)
dAllPluginBreakpoints: true  (default: true)
dSelectedPluginBreakpoints: false  (default: false)
dAdjustBreakpointLocations: true  (default: true)
dAlwaysAdjustBreakpointsColumnWidths: false  (default: false)
dNoPluginBreakpoints: false  (default: false)
dSelectedPluginBreakpointsPattern: .*  (default: .*)
dBreakOnThrow: false  (default: false)
dBreakOnCatch: false  (default: false)
dBreakOnWarning: false  (default: false)
dBreakOnFatal: false  (default: false)
dBreakOnRaise: false  (default: false)
dAlwaysAdjustRegistersColumnWidths: false  (default: false)
dAlwaysAdjustSnapshotsColumnWidths: false  (default: false)
dAlwaysAdjustThreadsColumnWidths: false  (default: false)
dAlwaysAdjustModulesColumnWidths: false  (default: false)
dState changed from DebuggerNotReady(0) to EngineSetupRequested(1) [master]
dQUEUE: SETUP ENGINE
dCALL: SETUP ENGINE
dTRYING TO START ADAPTER
dENABLING TEST CASE: 0
dSTARTING D:/Qt/MinGW-gcc440_1/mingw/bin/gdb.exe -i mi --tty=\\.\pipe\creator-1832-26962
dGDB STARTED, INITIALIZING IT
<1show version
<2-list-features
<3set print object on
<4set breakpoint pending on
<5set print elements 10000
<6set overload-resolution off
<7handle SIGSEGV nopass stop print
<8set unwindonsignal on
<9pwd
<10set width 0
<11set height 0
<12-interpreter-exec console "set breakpoint always-inserted on"
<13-interpreter-exec console "set trust-readonly-sections on"
<14-interpreter-exec console "set auto-solib-add on"
<15-interpreter-exec console "set remotecache on"
<16-interpreter-exec console "maintenance set internal-warning quit no"
<17-interpreter-exec console "maintenance set internal-error quit no"
<18-interpreter-exec console "disassemble 0 0"
<19-interpreter-exec console "python execfile('D:/Qt/qtcreator-2.5.0/share/qtcreator/dumper/bridge.py')"
<20-interpreter-exec console "python execfile('D:/Qt/qtcreator-2.5.0/share/qtcreator/dumper/dumper.py')"
<21-interpreter-exec console "python execfile('D:/Qt/qtcreator-2.5.0/share/qtcreator/dumper/qttypes.py')"
<22-interpreter-exec console "bbsetup"
dADAPTER SUCCESSFULLY STARTED
dNOTE: ENGINE SETUP OK
dState changed from EngineSetupRequested(1) to EngineSetupOk(3) [master]
dQUEUE: SETUP INFERIOR
dState changed from EngineSetupOk(3) to InferiorSetupRequested(4) [master]
dQUEUE: SETUP INFERIOR
>~"GNU gdb 6.8\n"
>~"Copyright (C) 2008 Free Software Foundation, Inc.\n"
>~"License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\n"
>~"This is free software: you are free to change and redistribute it.\n"
>~"There is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\n"
>~"and \"show warranty\" for details.\n"
>~"This GDB was configured as \"i686-pc-mingw32\".\n"
dCALL: SETUP INFERIOR
sSetting up inferior...
<23set substitute-path C:/iwmake/build_mingw_opensource C:/Qt/4.8.2_mingw
<24set substitute-path C:/ndk_buildrepos/qt-desktop/src C:/Qt/4.8.2_mingw
<25set substitute-path C:/qt-greenhouse/Trolltech/Code_less_create_more/Trolltech/Code_less_create_more/Troll/4.6/qt C:/Qt/4.8.2_mingw
<26-file-exec-and-symbols "D:/dev/cpp/Qt/Qt_mingw/LiveU_windows/LiveU_windows/debug/LiveU_windows.exe"
>&"show version\n"
>~"GNU gdb 6.8\n"
>~"Copyright (C) 2008 Free Software Foundation, Inc.\n"
>~"License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\n"
>~"This is free software: you are free to change and redistribute it.\n"
>~"There is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\n"
>~"and \"show warranty\" for details.\n"
>~"This GDB was configured as \"i686-pc-mingw32\".\n"
>1^done
dPARSING VERSION: 1^done
d
dUNSUPPORTED GDB VERSION GNU gdb 6.8
dCopyright (C) 2008 Free Software Foundation, Inc.
dLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
dThis is free software: you are free to change and redistribute it.
dThere is NO WARRANTY, to the extent permitted by law.  Type "show copying"
dand "show warranty" for details.
dThis GDB was configured as "i686-pc-mingw32".
dGNU gdb 6.8
dCopyright (C) 2008 Free Software Foundation, Inc.
dLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
dThis is free software: you are free to change and redistribute it.
dThere is NO WARRANTY, to the extent permitted by law.  Type "show copying"
dand "show warranty" for details.
dThis GDB was configured as "i686-pc-mingw32".
d
dUSING GDB VERSION: 60800, BUILD: 2008
<27-interpreter-exec console "set target-async off"
>2^done,features=["frozen-varobjs","pending-breakpoints"]
dFEATURES: 2^done,data={features=["frozen-varobjs","pending-breakpoints"]}
d
>&"set print object on\n"
>3^done
>&"set breakpoint pending on\n"
>4^done
>&"set print elements 10000\n"
>5^done
>&"set overload-resolution off\n"
>6^done
>&"handle SIGSEGV nopass stop print\n"
>~"Signal        Stop\tPrint\tPass to program\tDescription\n"
>~"SIGSEGV       Yes\tYes\tNo\t\tSegmentation fault\n"
>7^done
>&"set unwindonsignal on\n"
>8^done
>&"pwd\n"
>~"Working directory D:\\dev\\cpp\\Qt\\Qt_mingw\\LiveU_windows\\LiveU_windows.\n"
>9^done
>&"set width 0\n"
>10^done
>&"set height 0\n"
>11^done
>&"Undefined set breakpoint command: \"always-inserted on\".  Try \"help set breakpoint\".\n"
>12^error,msg="Undefined set breakpoint command: \"always-inserted on\".  Try \"help set breakpoint\"."
>13^done
>14^done
>15^done
>&"Undefined maintenance set command: \"internal-warning quit no\".  Try \"help maintenance set\".\n"
>16^error,msg="Undefined maintenance set command: \"internal-warning quit no\".  Try \"help maintenance set\"."
>&"Undefined maintenance set command: \"internal-error quit no\".  Try \"help maintenance set\".\n"
>17^error,msg="Undefined maintenance set command: \"internal-error quit no\".  Try \"help maintenance set\"."
>~"Dump of assembler code from 0x0 to 0x0:\n"
>~"End of assembler dump.\n"
>18^done
>&"Undefined command: \"python\".  Try \"help\".\n"
>19^error,msg="Undefined command: \"python\".  Try \"help\"."
>&"Undefined command: \"python\".  Try \"help\".\n"
>20^error,msg="Undefined command: \"python\".  Try \"help\"."
>&"Undefined command: \"python\".  Try \"help\".\n"
>21^error,msg="Undefined command: \"python\".  Try \"help\"."
>&"Undefined command: \"bbsetup\".  Try \"help\".\n"
>22^error,msg="Undefined command: \"bbsetup\".  Try \"help\"."
>&"set substitute-path C:/iwmake/build_mingw_opensource C:/Qt/4.8.2_mingw\n"
>23^done
>&"set substitute-path C:/ndk_buildrepos/qt-desktop/src C:/Qt/4.8.2_mingw\n"
>24^done
>&"set substitute-path C:/qt-greenhouse/Trolltech/Code_less_create_more/Trolltech/Code_less_create_more/Troll/4.6/qt C:/Qt/4.8.2_mingw\n"
>25^done
>26^done
sSetting breakpoints...
dSetting breakpoints...
<28-break-insert -f "\"main.cpp\":17"
>&"No symbol \"target\" in current context.\n"
>27^error,msg="No symbol \"target\" in current context."
dATTEMPT SYNC
>28^done,bkpt={number="1",type="breakpoint",disp="keep",enabled="y",addr="0x004014b3",func="qMain(int, char**)",file="main.cpp",fullname="D:\\dev\\cpp\\Qt\\Qt_mingw\\LiveU_windows\\LiveU_windows/main.cpp",line="17",times="0"}
<29info line *0x4014b3
>&"info line *0x4014b3\n"
>~"Line 17 of \"main.cpp\" starts at address 0x4014b3 <_Z5qMainiPPc+259> and ends at 0x4014d6 <_Z5qMainiPPc+294>.\n"
>29^done
dALL COMMANDS DONE; INVOKING CALLBACK
<30maint print msymbols C:/Users/meirmaya/AppData/Local/Temp/gdb_ns_.lY1832
>&"maint print msymbols C:/Users/meirmaya/AppData/Local/Temp/gdb_ns_.lY1832\n"
dHANDLE GDB ERROR: The gdb process was ended forcefully
dGDB PROCESS FINISHED, status 1, code -1073741819
dNOTE: ENGINE ILL ******
dState changed from InferiorSetupRequested(4) to EngineShutdownRequested(20) [master]
dQUEUE: SHUTDOWN ENGINE
dCALL: SHUTDOWN ENGINE
dPLAIN ADAPTER SHUTDOWN 20
dINITIATE GDBENGINE SHUTDOWN IN STATE 4, PROC: 0
dNOTE: ENGINE SHUTDOWN OK
dState changed from EngineShutdownRequested(20) to EngineShutdownOk(22) [master]
dState changed from EngineShutdownOk(22) to DebuggerFinished(23) [master]
dQUEUE: FINISH DEBUGGER
dNOTE: FINISH DEBUGGER
dHANDLE RUNCONTROL FINISHED
sDebugger finished. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:57:42.770

那个gdb是6.8版。IIRC Creator 推荐 7.0，你有试过升级 GDB 吗？

你从哪里得到那个 GDB？已知在某些 mingw 发行版中发布的那个在从 Qt Creator 中使用时会损坏。您可以从这里获取 Qt Creator 团队认为可以工作的一个：http: [//builds.qt-project.org/](http://builds.qt-project.org/)

# javascript - 如何在移动浏览器上保存和恢复实际的视口参数/首选项？

> ID：11069903
> 
> 赞同：2
> 
> 时间：2012-06-17T08:19:01.010
> 
> 标签：javascript, jquery, safari, mobile-safari

我希望能够在移动浏览器（或至少在移动 Safari 上）上保存和恢复所有视口参数（如垂直和水平的当前滚动位置以及当前缩放级别 - 可能还有其他）。场景是这样的：

1.  保存参数
2.  用视口做某事
3.  将参数**完全**恢复到之前的状态 (1)

请问我该怎么做？

# python - 对 Django 和 Google App Engine 感到困惑

> ID：11069904
> 
> 赞同：1
> 
> 时间：2012-06-17T08:19:03.337
> 
> 标签：python, django, google-app-engine

我想我是这样在谷歌应用引擎中使用 Django 的：

```
from google.appengine.ext.webapp import template
...
self.response.out.write(template.render('view/some_name.html', viewVals)) 
```

但我在某处读到要使用 Django，你需要这样做：

```
import os
os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'

from google.appengine.dist import use_library
use_library('django', '1.2') 
```

[https://developers.google.com/appengine/docs/python/tools/libraries#Django](https://developers.google.com/appengine/docs/python/tools/libraries#Django)

我不明白我正在做的事情和以谷歌文档中描述的方式使用 Django 之间有什么区别。

另外，如果我确实尝试以这种方式使用它，我怎么知道我成功了？我还用吗：

```
self.response.out.write(template.render('view/some_name.html', viewVals)) 
```

请帮助澄清这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:52:25.280

Google App Engine 曾经附带较旧版本的 Django，为了使用最新版本，您必须这样做。我不确定现在 Django 的默认版本是什么（我个人使用 Jinja2，您可以通过[入门](https://developers.google.com/appengine/docs/python/gettingstartedpython27/)了解如何将它与 GAE 一起使用）。

为了测试您是否成功，请使用在 Django 1.2 中引入的[in 运算符](https://docs.djangoproject.com/en/1.2/ref/templates/builtins/#in-operator)，如果它有效，那么您不需要额外的设置，否则使用它。

```
{% if "bc" in "abcdef" %}
  This appears since "bc" is a substring of "abcdef"
{% endif %} 
```

# mongodb - 如何在 Mongodb 中高效地存储和更新二进制数据？

> ID：11069905
> 
> 赞同：9
> 
> 时间：2012-06-17T08:19:06.840
> 
> 标签：mongodb, database

我在文档中存储了一个大型二进制数组。我希望不断地向这个数组添加字节，有时会改变现有字节的值。

我一直在寻找一些 $append_bytes 和 $replace_bytes 类型的修饰符，但似乎我能做的最好的就是 $push 用于数组。如果我能够以某种方式访问​​磁盘上的底层 bson，这似乎可以通过执行 seek-write 类型操作来实现，但在我看来，在 mongodb 中无论如何都没有这样做（并且可能有充分的理由）。

如果我只是查询这个二进制数组，编辑或添加它，然后通过重写整个字段来更新文档，这会有多昂贵？每个二进制数组的大小约为 1-2MB，每 5 分钟更新一次，跨越 1000 个文档。更糟糕的是，没有简单的方法可以（及时）将它们分散开来，而且它们通常会在 5 分钟的间隔内彼此靠近发生。有没有人对这将是多么灾难性有好感？好像会有问题。

另一种方法是将这些二进制数据作为单独的文件存储在磁盘上，实现一个线程池来有效地操作磁盘上的文件，并从我的 mongodb 文档中引用文件名。（我正在使用 python 和 pymongo，所以我在看 pytables）。如果可能的话，我宁愿避免这种情况。

我在这里可以忽略其他选择吗？

提前感谢。

# 编辑

在为我的用例编写了一些测试之后，我决定为二进制数据对象使用单独的文件系统（特别是使用 pytables 或 h5py 的 hdf5）。除了这些二进制数据对象的持久性之外，我仍然将 mongo 用于所有内容。通过这种方式，我可以将与附加和更新类型操作相关的性能与我的基本 mongo 性能分离。

一位 mongo 开发人员确实指出我可以使用点表示法和 $set 设置内部数组元素（请参阅下面评论中的 ref），但目前无法在数组中原子地执行一系列集合。

此外 - 如果我的 mongo 文档中有 1,000 个 2MB 二进制数据字段并且我经常更新和增长它们（至少每 5 分钟一次） - 我的直觉告诉我 mongo 将不得不管理很多磁盘上的文件中的分配/增长问题 - 最终这将导致性能问题。我宁愿将其卸载到操作系统级别的单独文件系统来处理。

最后——我将使用 numpy 对我的数据进行操作和计算——pytables 和 h5py 模块都允许在 numpy 行为和存储之间进行很好的集成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T09:12:51.303

正如您所提到的，您经常编辑二进制数据，实际上非常频繁。GridFS 是我建议的另一个选择。

[何时使用 GridFS](https://docs.mongodb.org/manual/core/gridfs/#when-to-use-gridfs)可能对您有用

# r - R：从使用 RCurl 抓取的网页中提取“干净”的 UTF-8 文本

> ID：11069908
> 
> 赞同：15
> 
> 时间：2012-06-17T08:19:26.420
> 
> 标签：r, web-scraping, rcurl

使用 R，我正在尝试抓取网页，将日文文本保存到文件中。最终，这需要扩展以每天处理数百个页面。我已经在 Perl 中有一个可行的解决方案，但我正在尝试将脚本迁移到 R 以减少在多种语言之间切换的认知负担。到目前为止，我还没有成功。相关问题似乎是[关于保存 csv 文件的](https://stackoverflow.com/questions/7402307/export-utf-8-bom-to-csv-in-r)问题和[关于将希伯来语写入 HTML 文件的问题](https://stackoverflow.com/questions/7483742/using-cat-to-write-non-english-characters-into-a-html-file-in-r)。但是，我还没有成功地根据那里的答案拼凑出一个解决方案。编辑：[关于 R 的 UTF-8 输出的这个问题也是相关的，但没有得到解决。](https://stackoverflow.com/questions/10675360/utf-8-file-output-in-r)

这些页面来自雅虎！Japan Finance 和我的 Perl 代码看起来像这样。

```
use strict;
use HTML::Tree;
use LWP::Simple;
#use Encode;
use utf8;

binmode STDOUT, ":utf8";

my @arr_links = ();
$arr_links[1] = "http://stocks.finance.yahoo.co.jp/stocks/detail/?code=7203";
$arr_links[2] = "http://stocks.finance.yahoo.co.jp/stocks/detail/?code=7201";

foreach my $link (@arr_links){
    $link =~ s/"//gi;
    print("$link\n");
    my $content = get($link);
    my $tree = HTML::Tree->new();
    $tree->parse($content);
    my $bar = $tree->as_text;
    open OUTFILE, ">>:utf8", join("","c:/", substr($link, -4),"_perl.txt") || die;
    print OUTFILE $bar;
} 
```

这个 Perl 脚本生成一个 CSV 文件，如下面的屏幕截图所示，其中包含可以离线挖掘和操作的正确汉字和假名：

![Perl 脚本生成的 CSV 文件](../Images/27e5a1a2b96b8d130a06f4294278e066.png)

我的 R 代码如下所示。R 脚本不是刚刚给出的 Perl 解决方案的完全副本，因为它不会删除 HTML 并留下文本（[这个答案](https://stackoverflow.com/questions/3195522/is-there-a-simple-way-in-r-to-extract-only-the-text-elements-of-an-html-page)建议使用 R 的方法，但在这种情况下它对我不起作用）而且它没有循环等等，但意图是一样的。

```
require(RCurl)
require(XML)

links <- list()
links[1] <- "http://stocks.finance.yahoo.co.jp/stocks/detail/?code=7203"
links[2] <- "http://stocks.finance.yahoo.co.jp/stocks/detail/?code=7201"

txt <- getURL(links, .encoding = "UTF-8")
Encoding(txt) <- "bytes"
write.table(txt, "c:/geturl_r.txt", quote = FALSE, row.names = FALSE, sep = "\t", fileEncoding = "UTF-8") 
```

此 R 脚本生成如下屏幕截图所示的输出。基本垃圾。

![R 脚本生成的 CSV 文件](../Images/5e2da28f16c0c9b7ae43695ef9723f29.png)

我假设 HTML、文本和文件编码的某种组合将允许我在 R 中生成与 Perl 解决方案类似的结果，但我找不到它。我试图抓取的 HTML 页面的标题说图表集是 utf-8，我已将`getURL`调用和`write.table`函数中的编码设置为 utf-8，但仅此还不够。

**问题** 如何使用 R 抓取上述网页并将文本保存为“格式良好”的日文文本中的 CSV，而不是看起来像线条噪音的东西？

编辑：我添加了一个进一步的屏幕截图，以显示当我省略该`Encoding`步骤时会发生什么。我得到了看起来像 Unicode 代码的东西，但不是字符的图形表示。这可能是某种与语言环境相关的问题，但在完全相同的语言环境中，Perl 脚本确实提供了有用的输出。所以这仍然令人费解。我的会话信息：R 版本 2.15.0 已修补 (2012-05-24 r59442) 平台：i386-pc-mingw32/i386（32 位）语言环境： [1](https://stackoverflow.com/questions/7402307/export-utf-8-bom-to-csv-in-r) LC_COLLATE=English_United Kingdom.1252 [2](https://stackoverflow.com/questions/7483742/using-cat-to-write-non-english-characters-into-a-html-file-in-r) LC_CTYPE=English_United Kingdom.1252
[3](https://stackoverflow.com/questions/10675360/utf-8-file-output-in-r) LC_MONETARY =English_United Kingdom.1252 [4](https://i.stack.imgur.com/zpDnc.png) LC_NUMERIC=C
[5](https://stackoverflow.com/questions/3195522/is-there-a-simple-way-in-r-to-extract-only-the-text-elements-of-an-html-page) LC_TIME=English_United Kingdom.1252
附加基础包： [1](https://stackoverflow.com/questions/7402307/export-utf-8-bom-to-csv-in-r)stats graphics grDevices utils datasets methods base

![在此处输入图像描述](../Images/2e1572a1d8fb4b820f627a7f12c349d5.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T06:10:31.780

我似乎找到了答案，但没有其他人发布过答案，所以就这样吧。

早些时候@kohske 评论说，一旦`Encoding()`调用被删除，代码就对他有效。这让我想到他可能有一个日语语言环境，这反过来表明我的机器上存在一个语言环境问题，它以某种方式影响了 R——即使 Perl 避免了这个问题。我重新校准了我的搜索，并在采购 UTF-8 文件时发现[了这个问题](https://stackoverflow.com/questions/5031630/how-to-source-r-file-saved-using-utf-8-encoding)，其中原始海报遇到了类似的问题。答案涉及切换语言环境。我进行了实验，发现将我的语言环境切换为日语似乎可以解决问题，如下图所示：

![更新后的 R 代码的输出](../Images/17e216be4a2375546984507b85d8096e.png)

更新的 R 代码如下。

```
require(RCurl)
require(XML)

links <- list()
links[1] <- "http://stocks.finance.yahoo.co.jp/stocks/detail/?code=7203"
links[2] <- "http://stocks.finance.yahoo.co.jp/stocks/detail/?code=7201"

print(Sys.getlocale(category = "LC_CTYPE"))
original_ctype <- Sys.getlocale(category = "LC_CTYPE")
Sys.setlocale("LC_CTYPE","japanese")

txt <- getURL(links, .encoding = "UTF-8")

write.table(txt, "c:/geturl_r.txt", quote = FALSE, row.names = FALSE, sep = "\t", fileEncoding = "UTF-8")
Sys.setlocale("LC_CTYPE", original_ctype) 
```

所以我们必须以编程方式处理语言环境。坦率地说，我有点尴尬，我们显然需要在 2012 年在 Windows 上使用这样的 R更改我的系统设置。

上面更新后的 R 代码的输出当然是 HTML。对于那些感兴趣的人，下面的代码在去除 HTML 和保存原始文本方面相当成功，尽管结果需要大量整理。

```
require(RCurl)
require(XML)

links <- list()
links[1] <- "http://stocks.finance.yahoo.co.jp/stocks/detail/?code=7203"
links[2] <- "http://stocks.finance.yahoo.co.jp/stocks/detail/?code=7201"

print(Sys.getlocale(category = "LC_CTYPE"))
original_ctype <- Sys.getlocale(category = "LC_CTYPE")
Sys.setlocale("LC_CTYPE","japanese")

txt <- getURL(links, .encoding = "UTF-8")
myhtml <- htmlTreeParse(txt, useInternal = TRUE)
cleantxt <- xpathApply(myhtml, "//body//text()[not(ancestor::script)][not(ancestor::style)][not(ancestor::noscript)]", xmlValue)

write.table(cleantxt, "c:/geturl_r.txt", col.names = FALSE, quote = FALSE, row.names = FALSE, sep = "\t", fileEncoding = "UTF-8")
Sys.setlocale("LC_CTYPE", original_ctype) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:40:25.183

嗨，我编写了一个抓取引擎，允许抓取深深嵌入在主列表页面中的网页上的数据。我想知道在导入 R 之前将其用作 Web 数据的聚合器是否有帮助？

引擎的位置在这里 [http://ec2-204-236-207-28.compute-1.amazonaws.com/scrap-gm](http://ec2-204-236-207-28.compute-1.amazonaws.com/scrap-gm)

我创建的用于抓取您想到的页面的示例参数如下。

```
{
  origin_url: 'http://stocks.finance.yahoo.co.jp/stocks/detail/?code=7203',
  columns: [
    {
      col_name: 'links_name',
      dom_query: 'a'   
    }, {
      col_name: 'links',
      dom_query: 'a' ,
      required_attribute: 'href'
    }]
}; 
```

# c# - 将冗长的字符串（作为参数）传递到控制台应用程序

> ID：11069911
> 
> 赞同：12
> 
> 时间：2012-06-17T08:20:20.193
> 
> 标签：c#, .net, console-application, command-line-arguments, string-length

我正在用 C# 创建一个控制台应用程序，在执行时，它会传递一堆数据。其中三个是短字符串，例如用户名、密码等。然而，其中一个是相当长的 XML 文档。

将字符串作为命令行参数传递时，字符串可以有多长？

在执行时将数据传递到 C# 控制台应用程序是否有更好的选择？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-17T08:27:57.583

在此处找到[以下](http://blogs.msdn.com/b/oldnewthing/archive/2003/12/10/56028.aspx)有关限制：

*   CreateProcess 函数的最大命令行长度为 32767 个字符。此限制来自 UNICODE_STRING 结构。

*   CreateProcess 是创建进程的核心函数，因此如果您直接与 Win32 对话，那么这是您唯一需要担心的限制。但是，如果您通过其他方式到达 CreateProcess，那么您经过的路径可能会有其他限制。

*   如果您使用的是 CMD.EXE 命令处理器，那么您还需要遵守 CMD.EXE 施加的 8192 个字符的命令行长度限制。

*   如果您使用的是 ShellExecute/Ex 函数，那么您将受到 ShellExecute/Ex 函数施加的 INTERNET_MAX_URL_LENGTH（大约 2048）命令行长度限制的约束。（如果您在 Windows 95 上运行，则限制仅为 MAX_PATH。）

有什么更好的方法或替代方法 - 使用文件（可能是 XML）和所有参数，并将此文件作为命令行参数传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T08:43:37.673

# date - 使用单元格值作为公式中工作表的参考

> ID：11069915
> 
> 赞同：1
> 
> 时间：2012-06-17T08:20:56.683
> 
> 标签：date, google-sheets, importrange

我有一个包含三张纸的电子表格。两个被调用`2012`并且`2011`有一堆相似的数据。最后一张表对数据进行比较。

为了能够选择年份，我使用了一个单元格 (D1)，我可以在其中写`2011`或`2012`。然后，公式使用 INDIRECT 函数将此单元格作为参考的一部分。

```
INDIRECT(CHAR(39)&$D$1&CHAR(39)&"!F:F") 
```

这不是一个很好的解决方案，并且使公式变得非常冗长和复杂。

```
=IFERROR(SUM(FILTER( INDIRECT(CHAR(39)&$D$1&CHAR(39)&"!M:M") ;  (INDIRECT(CHAR(39)&$D$1&CHAR(39)&"!B:B")=$A4)+(INDIRECT(CHAR(39)&$D$1&CHAR(39)&"!B:B")=$A5)+(INDIRECT(CHAR(39)&$D$1&CHAR(39)&"!B:B")=$A6)+(INDIRECT(CHAR(39)&$D$1&CHAR(39)&"!B:B")=$A7)+(INDIRECT(CHAR(39)&$D$1&CHAR(39)&"!B:B")=$A8); MONTH(INDIRECT(CHAR(39)&$D$1&CHAR(39)&"!D:D"))=$B$1 ; INDIRECT(CHAR(39)&$D$1&CHAR(39)&"!F:F")=D$3));0) 
```

有没有更好的方法来做到这一点？

我尝试为计算表创建一个单独的电子表格，并使用 VMERGE（脚本库中的自定义函数）将两张表中的数据一起导入（IMPORTRANGE）一张表中，但这两张表中有很多数据表和导入需要很长时间。任何更改（例如更改年份）也需要很长时间才能重新计算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T05:13:50.627

做这种事情时，数据库函数往往更干净。

[https://support.google.com/docs/bin/static.py?hl=en&topic=25273&page=table.cs&tab=1368827](https://support.google.com/docs/bin/static.py?hl=en&topic=25273&page=table.cs&tab=1368827)

数据库函数需要一段时间来学习，但它们很强大。

或者

您可以将 INDIRECT(CHAR(39)&$D$1&CHAR(39)&"!B:B") 单独放在一个单元格中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:38:02.943

我认为您有两年的架构相同的信息（C 列在两张纸上具有相同类型的信息）。另外，我假设 B 列跟踪年份。

如果是这样，请考虑将所有信息保存在一张纸上，并使用电子表格功能“QUERY”创建视图。

例如，此公式从名为“DataSheet”的工作表中返回 A1:E 之间的所有单元格，其中 B 列中的值 = 2010。

=QUERY(DataSheet!A1:E;"SELECT * WHERE B = 2010";1)

有时有一个很好的理由将数据存储在两张纸上。如果是这样，请使用脚本库中的 vMerge 函数之一来组装工作表。然后从工作表创建视图和报告。

```
function VMerge() {
  var maxw=l=0;
  var minw=Number.MAX_VALUE;
  var al=arguments.length ;
  for( i=0 ; i<al ; i++){
    if( arguments[i].constructor == Array )l =arguments[i][0].length ;
    else if (arguments[i].length!=0) l = 1 ;  // literal values count as array with a width of one cell, empty cells are ignored!
    maxw=l>maxw?l:maxw;
    minw=l<minw?l:minw;
  }
  if( maxw==minw) { /* when largest width equals smallest width all are equal */
    var s = new Array();
    for( i=0 ; i<al ; i++){
      if( arguments[i].constructor == Array ) s = s.concat( arguments[i].slice() )
      else if (arguments[i].length!=0) s = s.concat( [[arguments[i]]] )  
    }
  if ( s.length == 0 ) return null ; else return s        //s     
  }
  else return "#N/A: All data ranges must be of equal width!"      
} 
```

希望这可以帮助。

# sql - Access 2007 SQL - 混合左连接和内连接

> ID：11069917
> 
> 赞同：0
> 
> 时间：2012-06-17T08:21:05.543
> 
> 标签：sql, ms-access-2007, left-join, inner-join, outer-join

我真的很难解决这个问题。我已经尝试了 FROM 部分的所有可能组合，但我似乎无法得到它。我试过逗号，混合内连接和左连接然后这个。

[ **give some date pls]**是参数提示（仅适用于 MS Access 2007），因此请忽略它。

它说我的 FROM 部分有问题。

```
SELECT
    TJI.Serial AS ID,
    FIRST(TJI.Product) AS Product,
    ROUND((((SUM(TJI.JobOrder) * FIRST(TJI.ProductPackQTY)) - IIF(ISNULL(SUM(TJI.TheAmount)), 0, SUM(TJI.TheAmount))) / FIRST(TJI.STDYield)) / FIRST(TJI.MinBatch), 0) * FIRST(TJI.MinBatch) AS Batch,
    IIF(Batch <= 0, FIRST(MinBatch), Batch) AS FinalBatch

FROM TBL_JO AS TJ INNER JOIN (SELECT * FROM TBL_JOITEMS LEFT JOIN RET_STOCKS ON (Serial = TheItemSerial AND TJ.Date = TheDate) AS TJI ON TJ.Serial = TJI.JO_Serial

WHERE (TJ.Date = [give some date pls])
GROUP BY TJI.Serial 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:25:35.237

经过一段时间的试验，我终于找到了我一直在寻找的答案。感谢您给 Remou 的提示和技巧。这肯定是一个很大的帮助。

我已将 TBL_JO 与 RET_STOCKS 交换，而不是使用 INNER JOIN，而是使用另一种方法通过 WHERE 定义关系。

```
SELECT JOSerial, JODate, PSerial, Product, Category, JobOrder, Yield, Pack, MinBatch, IIF(ISNULL(TheAmount),0,TheAmount) AS ReturnStocks
FROM
    (SELECT TJ.Serial AS JOSerial, TJ.Date AS JODate, TJI.Serial AS PSerial, TJI.Product AS Product, TJI.Category AS Category, TJI.JobOrder AS JobOrder, TJI.STDYield AS Yield, TJI.ProductPackQTY AS Pack, TJI.MinBatch AS MinBatch 
        FROM TBL_JO AS TJ, TBL_JOITEMS AS TJI
        WHERE TJ.Serial=TJI.JO_Serial)
AS TJX
LEFT JOIN
    RET_STOCKS AS RS
ON
    (TJX.JODate=RS.TheDate)
    AND
    (TJX.PSerial=RS.TheItemSerial) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T09:04:03.167

我不得不猜测您希望如何在派生表上进行联接，但请尝试以下几行：

```
SELECT
TJI.Serial AS ID,
FIRST(TJI.Product) AS Product,
ROUND((((SUM(TJI.JobOrder) * 
    FIRST(TJI.ProductPackQTY)) - 
    IIF(ISNULL(SUM(TJI.TheAmount)), 0, SUM(TJI.TheAmount))) / 
    FIRST(TJI.STDYield)) / 
    FIRST(TJI.MinBatch), 0) * FIRST(TJI.MinBatch) AS Batch,

IIF(Batch <= 0, FIRST(MinBatch), Batch) AS FinalBatch

FROM TBL_JO AS TJ
INNER JOIN (SELECT * FROM TBL_JOITEMS j
            LEFT JOIN RET_STOCKS r
            ON j.Serial =r.TheItemSerial) AS TJI 

ON TJ.Serial = TJI.JO_Serial AND TJ.Date = TJI.TheDate
GROUP BY TJI.Serial 
```

如果您遇到上述错误并且没有突出显示 SQL 的任何部分，请始终怀疑子查询或派生表。在这种情况下，您正在使用两个表，但您的联接没有引用所涉及的表。此外，您的派生表中有一个杂散括号 -- ( -- 使之变得毫无意义。

顺便说一句，通常认为使用 * 是个坏主意，最好命名相关字段（列）。

# java - 是否可以在启动 Activity 之前释放内存？

> ID：11069921
> 
> 赞同：0
> 
> 时间：2012-06-17T08:21:50.863
> 
> 标签：java, android, memory-management, out-of-memory

我有一个活动，当数据很大时，它的某些部分会发生 OutOfMemory 异常。它在解密中发生了几次。有时是解压，有时是调用网络服务方法。

是否可以在执行我的操作之前释放 Activity 的内存或应用程序的内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:50:11.163

使用位图时，您可以回收它们。将对象设置为 null，因此它们被回收的机会更大。尝试调用 System.gc() 。所有这些方法都可能导致释放一些内存。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T09:00:26.390

尚不完全清楚“释放”“活动的内存”是什么意思，但答案可能是否定的。相反，如果您使用的是位图，您应该有效地显示它们。查看Google 提供的有关如何有效显示位图的[指南。](http://developer.android.com/training/displaying-bitmaps/index.html)

# c# - 更新列表元素的属性

> ID：11069922
> 
> 赞同：-1
> 
> 时间：2012-06-17T08:21:59.170
> 
> 标签：c#, .net, list

我有一堂课

```
class Student
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int ID { get; set; }
} 
```

现在，我创建了一个学生对象列表：

```
List<Student> lst = new List<Student>(); 
```

该类的三个属性将来自三个不同的数据源。所以我不能一次添加对象的所有属性。我正在添加 ID 属性，如下所示：

```
lst.Add(new Student { ID = 1 }, new Student { ID = 2 }) 
```

现在我想在现有列表中设置“FirstName”或“LastName”属性的值。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:26:59.627

您可以从与要更新的元素匹配的元素中获取索引：

```
int index= MyObjectList.FindIndex(x=>x.Id==object.Id); 
```

并在更新后：

```
MyObjectList[index]=object; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T08:35:07.077

```
List<Student> lst = new List<Student>();
lst.Add(new Student { ID = 1 });
lst.Add(new Student { ID = 2 });
//Get the student you want by id then use that to populate the remaining properties 

var temp = lst.Single(l => l.ID == 1);
temp.FirstName = "fname";
temp.LastName = "lastname"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T08:39:49.247

不要混合方法`Add()`调用：

```
list.Add(new Student()); 
```

和集合初始化语法：

```
List<Student> list = new List<Student>
{
    new Student(),
    new Student()
}; 
```

* * *

然后

```
int index = 1;
Student student = list[index]; // may cause IndexOutOfRangeException
student.Name = "Me"; // may cause NullReferenceException 
```

或更短：

```
list[i].Name = "Me"; // may cause them both too 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T08:56:34.933

假设其他数据源包含`studentId`并且所有学生都有姓氏和名字。使用 linq加入`lastNameList`和`firstNameList`集合。您不需要的 studentId 列表，因为其他两个也具有该值。

```
var list =
         (from lastName in lastNameList
         join firstName in firstNameList on lastName.studentId equals firstName.studentId
         select new Student()
         {
            .ID = lastName.studentId,
            .FirstName = firstName.Name,
            .LastName = lastName.Name
         }).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T08:27:40.920

您可以使用 list.count-1 获取列表中的最后一项。然后你可以更新你想要的属性。

```
List<Student> lst=new List<Student>();
lst.Add(new Student { ID = 1, FirstName = "FirstName", LastName = "LastName" });
//Then get props from other datasource
lst[lst.Count-1].FirstName="FirstName";
lst[lst.Count-1].LastName="LastName"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-17T08:27:53.283

我只是在这里猜测...如果，不起作用尝试；

```
lst.Add(new Student{ID=2, FirstName="The", LastName="Stig"}); 
```

或者您可以为 Student 对象定义一个构造函数...

```
public Student(int mID, string mFirstName, string mLastName)
{
    ID = mID;
    FirstName = mFirstName;
    LastName = mLastName;
} 
```

然后使用

```
lst.Add(new Student(2, "The", "Stig")); 
```

# backbone.js - 骨干排序过程。用户界面与数据

> ID：11069924
> 
> 赞同：0
> 
> 时间：2012-06-17T08:22:19.420
> 
> 标签：backbone.js

我的问题是关于使用主干显示记录列表的正确方法。假设您有一个要显示给用户的人员模型，并允许他们按名字、姓氏、id 排序......

第一个直觉是让视图捕捉事件并根据用户排序选项重新渲染。这种方法的问题在于它是 UI 驱动的，而不是数据驱动的。

第二个想法是在模型中设置排序属性，因为集合不包含属性（尽管这似乎是最好的选择）。这种方法至少是通过设置排序属性来驱动数据，但是非常冗余，如果在保存时没有剥离排序属性，它们将被发送到服务器 | 本地或...

最后一个想法可能是正确的。创建第二个模型，该模型将用作包含排序/显示属性的控制模型。我对这种方法的问题是事件和模型会变得非常不守规矩。如果你扩展的不仅仅是一个人模型，而是一个相当大的应用程序，你就会有很多模型和事件，并且很难管理。model-1 视图必须捕获初始事件，然后让集合触发自定义事件，然后第二个模型必须捕获自定义事件并呈现它。

很抱歉这篇长文，我对主干 js 还很陌生，想确保我掌握了最佳实践。在此先感谢您的帮助。我希望我至少在正确的轨道上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T16:02:07.147

我昨晚刚刚实施了这个。

您可以设置一个新的集合`comparator`，然后`sort`在集合上使用该方法。`sort`将触发一个`reset`事件，您可以在视图中使用它来重新呈现列表。

这是我的视图，其中包含一个选择框，允许用户选择如何对数据进行排序：

```
App.HouseListView = Backbone.View.extend({
    el: '.house-list',
    initialize: function() {
        App.houseCollection.bind('reset', this.populateList, this);

    },
    events: {
        'change .sort':'sort',
    },
    populateList: function(collection) {
        this.$('ul').html('');
        _.each(collection.models, function(model) {
            var view = new App.HouseListElemView({model:model});
            this.$('ul').append(view.el);
        });
    }, 
    sort: function(e) {
        var sort_by = $(e.srcElement.selectedOptions[0]).attr('data-sort-by');
        App.houseCollection.comparator = function(house) {
            return house.get(sort_by);
        }
        App.houseCollection.sort();
    },
}); 
```

希望这可以帮助

编辑：已实施`@mu is too short`的建议：

```
App.Houses = Backbone.Collection.extend({
    model: App.House,
    url: API_URL,
    _sort_by: 'price',
    sort_houses_by: function(sort_by) {
        this._sort_by = sort_by;
        this.sort();
    },
    comparator: function(house) {
        return house.get(this._sort_by);
    },
});

App.houseCollection = new App.Houses();

App.HouseListView = Backbone.View.extend({
    el: '.house-list',
    initialize: function() {
        App.houseCollection.bind('reset', this.populateList, this);

    },
    events: {
        'change .sort':'sort',
    },
    populateList: function(collection) {
        this.$('ul').html('');
        _.each(collection.models, function(model) {
            var view = new App.HouseListElemView({model:model});
            this.$('ul').append(view.el);
        });
    }, 
    sort: function(e) {
        var sort_by = $(e.srcElement.selectedOptions[0]).data('sort-by');
        App.houseCollection.sort_houses_by(sort_by);
    },
}); 
```

# python - Python 如何/在哪里寻找模块？

> ID：11069925
> 
> 赞同：4
> 
> 时间：2012-06-17T08:22:48.343
> 
> 标签：python

我对 Python 完全陌生，想使用 py2neo 和 tornado 模块。

为了做到这一点，我为两个模块运行 setup.py 并将它们放入文件夹中

```
C:\Python32\modules\py2neo 
```

和

```
C:\Python32\modules\tornado 
```

在主程序中，我猜这些行告诉解释器在哪里查找文件：

```
import sys
sys.path.append(r'C:\Python32\modules')

# Import Neo4j modules
from py2neo import neo4j, cypher 
```

阅读本书我还添加了环境变量（在 Windows 7 中）

```
PYTHONPATH = C:\Python32\modules;C:\Python32\modules\tornado;C:\Python32\modules\py2neo 
```

# 编辑

现在我发现必须重新启动 Python Shell 才能加载修改后的 PYTHONPATH 变量如果变量值是`PYTHONPATH = C:\Python32\modules` 并且程序包含该行

```
from py2neo import neo4j, cypher 
```

那么以下几行是无用的：

```
import sys
sys.path.append(r'C:\Python32\modules') 
```

但是，当我运行程序时，出现以下错误：

```
Traceback (most recent call last):
  File "C:\...\Python Projects\HelloPython\HelloPython\Hellopy2neo.py", line 15, in <module>
    from py2neo import neo4j, cypher
  File "C:\Python32\modules\py2neo\neo4j.py", line 38, in <module>
    import rest, batch, cypher
ImportError: No module named rest 
```

在文件 neo4j.py 中有以下几行：

```
try:
    import json
except ImportError:
    import simplejson as json
try:
    from urllib.parse import quote
except ImportError:
    from urllib import quote
try:
    from . import rest, batch, cypher
except ImportError:
    import rest, batch, cypher #line38 
```

并且 rest.py 文件位于文件夹中`C:\Python32\modules\py2neo`，所以我不知道为什么会出现错误

> ImportError：没有名为 rest 的模块

# 编辑2：

尝试在 Python Shell 中导入 py2neo 目录并列出我得到的模块：

```
>>> import py2neo
>>> [name for name in dir(py2neo) if name[0] != '_']
['rest'] 
```

我想也有一些不必要的导入，如果有人解释，应该添加和排除哪些导入（在 PYTHONPATH 和脚本中）以使程序无错误运行，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:28:35.633

我怀疑问题是`import`相对导入的语法在[从 Python 2 到 Python 3](http://docs.python.org/release/3.0.1/whatsnew/3.0.html#removed-syntax)的过渡中发生了变化：

> 相对导入唯一可接受的语法是 from .[module] import name。所有不以 . 开头的导入表格。被解释为绝对进口。

您安装的模块使用在 Python 2 中可以使用的语法。您可以为 Python 2 安装它们，或者寻找`py2neo`支持 Python 3 的版本，或者尝试手动移植它（该`import`行应该看起来像`from . import rest`，但你以后可能会遇到其他问题）或`2to3`工具。

更新：我尝试`py2neo`使用`pip`. Python3 失败，Python 2 成功完成。版本为 1.2.14。

# algorithm - 在固定大小的桶中对齐不同大小的元素的算法

> ID：11069926
> 
> 赞同：1
> 
> 时间：2012-06-17T08:22:48.893
> 
> 标签：algorithm, partitioning, bucket

问题：

```
1) I have buckets of fixed size, in my case 64\. This cannot change.
2) Values vary in size, but are never bigger than a bucket (64).
3) Access is much slower if any element is split between buckets. 
```

是否有一些算法可以计算桶中元素的最佳顺序？

这里有两种变体，我对两者都感兴趣，以使代码的用户能够在速度和内存使用量之间进行选择：

```
A) Splitting is allowed, but should be minimized.
B) Splitting is not allowed, and padding should be minimized. 
```

如果算法“众所周知”，请发布算法或指向它们的链接，或者至少发布它们的名称。互联网搜索没有返回任何有用的信息，可能是因为答案淹没在不相关的结果中，例如最佳存储桶大小和哈希表中的分区数据。

目标语言是 Java，但我不认为它应该有所作为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:33:56.147

[我认为您可以使用内存分配算法，例如第一次拟合、最佳拟合或最差拟合（您可以在此处](http://stargazer.bridgeport.edu/sed/projects/cs503/Spring_2001/kode/os/memory.htm)阅读它们）：它们只是最佳解决方案的启发式近似值，但我怀疑您的原始问题与[bin有关- 以某种方式包装问题](http://en.wikipedia.org/wiki/Bin_packing_problem)，并且可能难以以最佳方式解决。尝试使用近似算法，只有在没有它就无法放置元素时才进行拆分。

# sql-server - 在 SQL Server 中使用 XQuery

> ID：11069929
> 
> 赞同：2
> 
> 时间：2012-06-17T08:23:07.197
> 
> 标签：sql-server, xml, xquery

我的表包含 2 列，一列是`Id`type `int`，另一列是 type `Xml`。

在`Xml`专栏中，我有这种结构的数据

```
<Fields>
    <Field name='aa' value='000'/>
    <Field name='bb' value='111'/>
    <Field name='cc' value='222'/>
</Fields> 
```

现在使用 XQuery，我想查询表以获取名称属性为的字段标记为`aa`且值属性为的所有行，名称`111`为属性的字段标记为属性`bb`且值属性为的所有行`222`。

换句话说，我想提供名称/值对并获取 xml 数据匹配的行。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:39:42.003

你可以使用这样的东西（因为你没有提到你的表或列名，我只是自己使用了一些东西——根据需要调整它们！）：

```
SELECT 
    (list of columns)
FROM 
    dbo.YourTableNameHere
WHERE 
    XmlContent.exist('/Fields/Field[@name = "aa"][@value = "000"') = 1 
```

这将返回您的表中的所有行，其中 XML 包含`<Field>`具有属性的节点`name = "aa"`和`value = "000"`

# ruby-on-rails - RoR：使用 Feedzirra 拉取不同的提要并显示为一个

> ID：11069932
> 
> 赞同：0
> 
> 时间：2012-06-17T08:24:00.147
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-plugins, feedzirra

我可以使用 Feedzirra gem 成功提取不同的提要并获取提要更新。但是，我想提取的每个提要都有不同的内容（即：Github 公共提要、最近播放的 last.fm 等）。

将所有这些提要合并为一个的最佳方法是什么？现在我对不同类型的提要有不同的模型，有些提要使用不同的时间戳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T05:03:48.253

米，

您可以添加多个额外字段来保存 uber-feed 对象中的每个唯一属性，仅在处理时填写来自每个特定 feed 的属性。（这有点像 NoSQL 模型，虽然不完全一样，因为您必须提前定义字段，但您可以添加任意字段作为数据持有者。）

这是您向所有提要实例添加新字段的方式...

```
Feedzirra::Feed.add_common_feed_entry(:my_custom_field) 
```

你会在这里找到更多关于这个的对话......

[https://groups.google.com/forum/?fromgroups#!msg/feedzirra/_h4y8_vwDGc/N8sjym6NouEJ](https://groups.google.com/forum/?fromgroups#!msg/feedzirra/_h4y8_vwDGc/N8sjym6NouEJ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T13:07:54.923

您正在创建活动提要 - 您可以研究以下几个关于如何创建活动提要的宝石：[https ://www.ruby-toolbox.com/categories/Rails_Activity_Feeds](https://www.ruby-toolbox.com/categories/Rails_Activity_Feeds)

# git - 如何从 GIT 获取 Jboss AS 7.1.1 的源代码？

> ID：11069941
> 
> 赞同：1
> 
> 时间：2012-06-17T08:26:41.977
> 
> 标签：git, jboss, jboss7.x

我知道如何从 GIT 获取最新的源代码，即版本 7.1.2，但我想要以前的版本（7.1.1.final），我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:30:10.843

[https://github.com/jbossas/jboss-as/tags](https://github.com/jbossas/jboss-as/tags)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:43:01.493

克隆存储库后，键入：`git checkout 7.1.0.Final`

# c# - 了解 .NET 程序集签名

> ID：11069943
> 
> 赞同：2
> 
> 时间：2012-06-17T08:27:22.580
> 
> 标签：c#, .net, api, plugins, assembly-signing

这个问题是关于每个 .NET 程序集都有 AFAIK 的公钥（查看记事本中的 DLL [底部是公钥]）

我了解什么是签名以及为什么它存在于 .NET 中，但我正在开发一个即插即用（插件）项目。我了解如何使用`System.Type`等来制作插件系统。

但我的问题是插件如何与我编写的一些“API”（注意引号）一起工作，比如访问应用程序的内部例程本身（如操作系统）。

现在的问题是：如果在应用程序更新时，更新程序将“API”DLL 替换为较新的版本，是否会因为签名而破坏插件？（如果是这样，我完全可以编写一个小代码文件，使用`System.Type`他们放在插件中来访问“API”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:40:23.430

如果您正在寻找创建插件架构，我建议您查看 MS 的[MEF](http://mef.codeplex.com/)（Managed Extensibility Framework）。

> 托管可扩展性框架 (MEF) 是 .NET 的组合层，可提高大型应用程序的灵活性、可维护性和可测试性。MEF 可用于第三方插件扩展，或者它可以为常规应用程序带来松散耦合的插件式架构的好处。

MEF 使创建使用插件的应用程序变得*非常*容易。

# python - 将滑块添加到 matplotlib 图表

> ID：11069944
> 
> 赞同：2
> 
> 时间：2012-06-17T08:27:31.200
> 
> 标签：python, numpy, matplotlib

我有一个 matplotlib 代码，可以生成一个简单的二维图表。我想为 hte 和 hre 变量（它们是数组）添加滑块小部件，以便可以交互地增加或减少 hte 和 hre 值。有没有办法（我确定有，因为我在 matplotlib 网站上看到[过类似的东西](http://matplotlib.sourceforge.net/examples/widgets/slider_demo.html)，但我无法将它与我的代码集成）？任何帮助将不胜感激。这是代码：

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
from matplotlib.ticker import LinearLocator, FixedLocator, FormatStrFormatter
import matplotlib.pyplot as plt
import numpy as np
from pylab import *

hte=np.array([10,11,12,13,15,20,21,22,25,30])
hre=np.array([1,2,3,4,5,6,7,8,9,10])

k=20*hte
n4=10*hre
t=6
w4=25

x=arange(1,100,10)
d=(log(x)/log(10))/10
y= k + n4 * (d) + t + w4 + 8

matplotlib.pyplot.jet()
lines=plot(x,y)
setp(lines, linewidth=2, color='r')
xlabel('X - Title')
ylabel('Y - title')
title('$Our Chart$')
grid(True)
show() 
```

![这是它生成的图表](../Images/237ae81e5ae82a6c7e78aeeac7ea68e4.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T09:34:22.020

根据您的评论，我选择了滑块，它们将数组中的值相乘。您应该应用您的特定算法。

```
from pylab import *
from matplotlib.widgets import Slider
import numpy as np

hte = np.array([10, 11, 12, 13, 15, 20, 21, 22, 25, 30])
hre = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])

k = 20 * hte
n4 = 10 * hre
t, w4 = 6, 25
x = arange(1, 100, 10)
d = log10(x) / 10

y = k + n4 * d + t + w4 + 8

ax = subplot(111)
subplots_adjust(left=0.15, bottom=0.25)
line, = plot(x, y, linewidth=2, color='r')

xlabel('X - Title')
ylabel('Y - title')
title('$Our Chart$')
grid(True)

axcolor = 'lightgoldenrodyellow'
axhte = axes([0.15, 0.1, 0.65, 0.03], axisbg=axcolor)
axhre = axes([0.15, 0.15, 0.65, 0.03], axisbg=axcolor)

shte = Slider(axhte, 'hte', 0.1, 30.0, valinit=1)
shre = Slider(axhre, 'hre', 0.1, 10.0, valinit=1)

def update(val):
    k = 20 * hte * shte.val 
    n4 = 10 * hre * shre.val

    y= k + n4 * d + t + w4 + 8

    line.set_ydata(y)    
    ax.set_ylim(y.min(), y.max())  
    draw()

shte.on_changed(update)
shre.on_changed(update)

show() 
```

![在此处输入图像描述](../Images/b617e670fe30203fd1be8f6a96cfb3f8.png)

# java - 在 Spring MVC 中包含视图

> ID：11069950
> 
> 赞同：0
> 
> 时间：2012-06-17T08:27:56.683
> 
> 标签：java, spring-mvc

在我的 JSP 模板中，我想包含另一个 JSP 模板，但我不想通过它的路径而是通过它的视图名称来包含它

不是：

```
<jsp:include page="/WEB-INF/jsp/include/header.jsp"/> 
```

但：

```
<xxx:yyyyyyyyy page="include/header" /> 
```

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:34:07.113

您可以为此使用 TagFiles。标记文件仅包含 JSP 页面的片段并且可以参数化。它们具有以 *.tag 结尾的文件，并且最常存储在 WEB-INF/Tags 中。

另请参阅： [http ://docs.oracle.com/javaee/1.4/tutorial/doc/JSPTags5.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPTags5.html)

因此，在您的情况下，创建一个文件 /WEB-INF/tags/header.tag 并将以下内容添加到您的 JSP 中：

```
<%@ taglib tagdir="/WEB-INF/tags" prefix="h" %>
...
<h:header/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:22:36.497

从您的问题陈述中，我了解到您正在尝试渲染一个由多个视图组合而成的视图，Apache Tiles 是一个包，它可以让您非常轻松地做到这一点。它也与弹簧很好地集成在一起。[这](http://www.vaannila.com/spring/spring-tiles-integration-1.html)是一个简单的教程。

# java - 为什么在使用接口时多态性在泛型方法中不起作用？

> ID：11069952
> 
> 赞同：0
> 
> 时间：2012-06-17T08:28:03.820
> 
> 标签：java, generics, interface, polymorphism

我正在尝试编写一种使用泛型适应不同类型接口的方法。

在这段代码中，我预计 f an g 方法会打印出“BB”而不是“接口 A”。为什么会这样？

```
interface A {
    String n="interface A";
}

interface B extends A {
    String n = "BB";
}

public class Main {
    <T extends A> void f() {
        T a = null;
        System.out.println(a.n);
    }

    <T extends A> void g() {
        System.out.println(T.n);    
    }

    public static void main(String[] args) {
        Main m = new Main();
        m.<B>f();
        m.<B>g();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T08:47:45.887

在您的代码中，任何扩展/实现的类或接口`A`都将继承常量 variable `n`。

实际上的声明`interface A`变成了这样：

```
interface A {
    public static final String n = "interface A"; //constant static varible
} 
```

你不能覆盖`final`java中的变量。

如果你写

```
System.out.println(B.n); 
```

它将打印“BB”。

[您可以在此处](https://stackoverflow.com/questions/205239/why-can-final-constants-in-java-be-overriden)找到已回答的类似问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:51:08.183

您的代码段中存在太多问题。

1.  您试图将字段定义为接口。这是禁止的。接口中只允许使用方法或静态字段。
2.  您的方法`f`没有终止。
3.  目前尚不清楚您要做什么。

我建议您先阅读有关变质的内容。然后尝试在没有泛型的情况下进行一些练习。然后阅读泛型，想想你要做什么，然后用泛型实现第二个练习。然后，如果您仍有问题，请在此处发布，我们将很乐意为您提供帮助。

祝你好运。

# mysql - 对象不是与 nodejs 一起使用的 mysql db 中的函数

> ID：11069955
> 
> 赞同：1
> 
> 时间：2012-06-17T08:28:48.810
> 
> 标签：mysql, node.js

我正在关注[教程](http://www.giantflyingsaucer.com/blog/?p=2596)，但首先我收到了这个错误：

```
deprecated: connect() is now done automatically 
```

我更改了我的代码，但在那之后我遇到了这个错误：

```
object is not a function at Client.CALL_NON_FUNCTION_AS_CONSTRUCTOR (native) 
```

我不知道，因为我是 nodejs 和 mysql 的新手，所以请帮帮我！

这是我的代码：

```
var Client = require('mysql').createClient({'host':'localhost','port':'3306','user':'root', 'password':''});
var client = new Client();

console.log('Connecting to mysql..');
ClientConnectionReady(client);

 ClientConnectionReady = function(client){
     client.query('USE login',function(err,result){
     if(err){
          console.log('cant create Table Error:'+ err.message);
      client.end();
      return;
 }
 ClientReady(client);
}; 
```

* * *

```
ClientReady = function(client){
    var values = ['fahad','tariq'];
    client.query('INSERT into Login SET username = ?, password = ?',values,
    function(err,result){
        if(err){
            console.log("ClientReady Error:" + error.message);
            client.end();
            return;
        }
        console.log('inserted:'+result.affectedRows+'ros.');
        console.log('Id inserted:'+ result.insertId);
    });
    GetData(client);
} 
```

* * *

```
GetData = function(client){
    client.query(
        'SELECT * FROM Login',
            function selectCb(err,result,fields){
                if(err) {
                    console.log('Getdata Error'+err.message);
                    client.end();
                    return;
                }
                if(result.length>0) {
                    var firstResult = results[0];
                    console.log('username' + firstResult['username']);
                    console.log('password'+firstResult['password']);
                }
            });
    client.end();
    console.log('connection closed');
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:20:30.763

不确定这是导致您的特定消息的原因，但是在您有机会执行之前`ClientReady`就打电话了；你应该*在*.`GetData``INSERT`*`INSERT`*

 *更新：现在有人很好地正确缩进了所有内容（提示：应该缩进的东西应该以 4 个空格*开头*）很明显你有一个类似的问题`GetData()`：你`client.end()`在你的回调有机会执行之前调用. 因此，您的`SELECT`回调正在尝试使用关闭的 MySQL 连接，这可能导致失败。*

# jquery - 没有处理程序的 Jquery 绑定

> ID：11069958
> 
> 赞同：0
> 
> 时间：2012-06-17T08:29:42.127
> 
> 标签：jquery

我有 2 个具有唯一 id 的按钮，即带有 click 事件的 previousButton 和 nextButton。我想根据特定条件启用或禁用每个按钮的点击事件。

例如

```
var a=2;
var b=4
if (a!=2)
{  
   $('#previousButton').unbind('click');
}
else{
  $('#previousButton').bind('click');
}

if (b!=4)
{  
   $('#nextButton').unbind('click');
}
else{
  $('#nextButton').bind('click');
} 
```

然后我有下面的代码：

```
 $('#nextButton').click (function(){    //do some logic when next
button is clicked. });

$('#previousButton').click (function(){    //do some logic when
previous button is clicked }); 
```

**问题：**

1.  取消绑定按钮可以完美运行，但是绑定按钮一旦取消绑定就根本不起作用。

2.  我尝试使用，但每次满足此条件时都会调用单击事件。但我只想启用点击按钮并等待触发点击事件。

> $('#nextButton').bind('click',someHanlder);

请问有什么办法可以实现吗？

**更新**

请注意，我不想在使用 bind 时调用任何函数。我只想绑定并准备好触发点击事件。否则，它调用该函数。这就是我所追求的：

1.  解绑。
2.  单击按钮时，什么都不会发生。
3.  绑定（**不希望点击事件在这里触发**）
4.  单击按钮时，应触发 Click 事件。

**更新** 请参阅下面的 JSFiddler 示例，其中立即调用绑定处理程序：http: [//jsfiddle.net/myagdi/MCAKL/](http://jsfiddle.net/myagdi/MCAKL/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:48:33.643

当您从元素取消绑定事件时，它会删除处理程序...现在如果您尝试再次绑定它，您需要再次传递相同的处理程序..

如你所说`"but this invokes the click event everytime this condition is met. But I just want to enable the click button and wait for click event to be triggred."`

我没有看到这种情况发生..

我做了一个小提琴，我首先绑定然后解除绑定然后再次绑定..它表现得非常好...... [Jsfiddle](http://jsfiddle.net/rBWpa/1/)

`If you don't specify any option in unbind call it removes all event handlers attached with the element, you can specify event type(In your case click) to unbind only that..You can even specify handlers to remove that way remaining handlers won't be detached..`

编辑：

根据您的[问题 Jsfiddle](http://jsfiddle.net/myagdi/MCAKL/)，您正在做的错误是将括号应用于处理程序......您不应该在处理程序中给出括号，`$('#a').bind("click", handler());`而是写`$('#a').bind("click", handler);`现在检查[新 Jsfiddle](http://jsfiddle.net/MCAKL/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:54:40.163

更好的方法是在事件处理程序本身内部进行这些检查。

```
$('#nextButton').click(function() {
    if(a == 2) {
        alert('Next button is clicked');
    }
});

$('#previousButton').click(function() {
    if(b == 4) {
        alert('Previous button is clicked');
    }
}); 
```

最终你仍然在用 JavaScript 编程，所以要使用这种语言！

# jquery - 用函数打开fancybox

> ID：11069959
> 
> 赞同：0
> 
> 时间：2012-06-17T08:29:54.277
> 
> 标签：jquery, html, fancybox

如果我有 ja 代码

```
$('#fbox').fancybox({
    'width'         :   '50%',
    'type'          :   'iframe'
}); 
```

和一个html代码

```
<a href="login.php" id="fbox" class="info fancybox.iframe" 
    onclick="$.fancybox(this);return false;">Login</a> 
```

如何用函数打开fancybox

```
function openLoginFancybox() {
   //???
} 
```

然后我可以使用 onClick="openLoginFancybox()"

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:48:42.443

我想将此功能与 gmap 一起使用：

```
google.maps.event.addDomListener(controlUI, 'click', function() {
    if(!isLoggedIn) {
        openLoginFancybox();
    } else {
        startMarkerPlacing();
    }
}); 
```

即一个fancybox json 之外的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:57:07.983

试试这个。我已将您的代码更改如下：

HTML：

```
<a href="login.php" id="fbox" onClick="openLoginFancybox(this); return false;">Login</a>​ 
```

JS：

```
function openLoginFancybox(linkObj) {
    $.fancybox.open({ 
        href : $(linkObj).attr("href"), 
        type : 'iframe',
        width : '50%'
    });
}​ 
```

-- 结束代码 --

希望这可以帮助。

# android - 如何使用蓝牙从安卓手机发送数据？

> ID：11069964
> 
> 赞同：0
> 
> 时间：2012-06-17T08:31:26.240
> 
> 标签：android, bluetooth

我做了一个应用程序，它在textview中显示了设备的经纬度。我想要做的是通过蓝牙发送该信息，该信息将被另一台设备接收并显示。如何将此功能添加到我的蓝牙应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:43:06.407

我不确定您尝试了什么，但这始终是最好的查看位置：[link](http://developer.android.com/guide/topics/wireless/bluetooth.html)

Android 开发者网站为您提供了对所有内容的很好的描述，当然还有工作示例。

希望有帮助。

# c# - 绑定到使用 CreateObject 创建的已打开表单

> ID：11069966
> 
> 赞同：2
> 
> 时间：2012-06-17T08:31:51.377
> 
> 标签：c#, .net, com, vbscript, createobject

我想知道我想做的事情是否可行。我创建了一个 C# 类库，它在使用 CreateObject 从 VBScript 调用时调用一个表单。

我有一个将一些数据传递给表单的 VBS，一旦脚本完成，显然所有引用都丢失了。我想知道下次我再次调用 VBS 脚本时是否有办法连接并使用现有表单？

```
Set e = CreateObject("MyObject")
'SendEvents to Form'
'Script ends.. all references lost'

'Script is run again'
Set e = CreateObject("MyObject")
'Is it possible to send events to the existing form, instead of closing it and creating new one?' 
```

*编辑：目前，当再次调用脚本时，我正在使用我的类库来关闭现有表单。但是，无论脚本被调用多少次，我都有一个用户请求保持它打开。我不确定下次调用 CreateObject 时如何使用现有表单。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T10:55:09.560

像这样试试

```
Set e = CreateObject("MyObject")
'SendEvents to Form'
'Script ends.. all references lost'

'Script is run again'
Set e = GetObject(, "MyObject") 'no, the empty parameter is no typo 
```

有关详细信息，请参阅[http://technet.microsoft.com/en-us/library/ee176980.aspx](http://technet.microsoft.com/en-us/library/ee176980.aspx)。

# flash - 允许访问 S3 - CrossDomain.xml

> ID：11069967
> 
> 赞同：1
> 
> 时间：2012-06-17T08:32:15.743
> 
> 标签：flash, amazon-s3, cross-domain

我试图了解 CrossDomain.xml 的滚动。我应该在我的服务器中有一个 CrossDomain.xml，允许访问 s3 存储桶，还是存储桶中有一个允许所有人访问的 CrossDomain 文件？或特定的人？

你能解释一下它是如何工作的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T13:09:40.587

您可以从提供 .swf 的同一域加载/解析 xml。

如果您从另一个域加载/解析 xml，则该域应该有一个 crossomain.xml，允许 .swf 文件所在的域访问数据。

在您的情况下，包含您加载的数据的域应该允许包含跨域策略文件中指定的 swf 访问的域。

另一种选择/作弊是使用 .swf 域上的服务器端脚本来加载外部数据并将其缓存/保存在 .swf 域上，以便无需策略文件即可访问它。

有关 crossdomain.xml 的更多详细信息，请查看[规范](http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html)。

# linux-kernel - 嵌入式 Linux 挂起/恢复参考电源管理器

> ID：11069969
> 
> 赞同：1
> 
> 时间：2012-06-17T08:32:22.670
> 
> 标签：linux-kernel, embedded-linux, power-management, powermanager

我目前正在一些非安卓网络设备上为嵌入式 Linux 实现挂起/恢复。要求是在内核中实现一个睡眠管理器任务，如果当前没有任务正在运行并且没有流量挂起，它将触发系统挂起。我想应该已经存在一些类似的实现但未能找到。任何人都可以向我推荐有关此主题的某种类似项目吗？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:21:43.797

如果您不介意进行一些移植，[那么](http://lwn.net/Articles/318611/)来自 Android 内核的唤醒锁正是您所需要的。用户空间在需要保持活动状态时（例如，任务正在运行或正在发生流量）获取唤醒锁，并在不再需要时释放它。当持有的唤醒锁数量达到零时，内核进入挂起模式。

# java - 扫描仪不停止读取输入

> ID：11069970
> 
> 赞同：1
> 
> 时间：2012-06-17T08:32:46.817
> 
> 标签：java

为了使我的程序更加精简（没有到处尝试和捕获），我尝试创建一个单独的方法来获取数据。我也有一个用于双打和弦乐的。出于某种原因，当我尝试使用此方法时，它被完全忽略，并像评论一样传递。有什么我做错了吗？

```
public int inputint(){
     Scanner sc = new Scanner (System.in);
     int variable = 0;
     boolean valid = true;
     do{
        try{
           if (variable >= 0 && valid){
           }
           else if(valid){
              System.out.print("Please enter positive values only: ");
           }

           valid = true;
        }
           catch (InputMismatchException e){
              System.out.print("Please enter numerical values only: ");
              sc = new Scanner(System.in);
              valid = false;
           }
     }while (!valid || variable < 0);
     return variable;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:41:28.437

首先，您的代码非常难以理解。（或者我猜可能只是我）

但是如果你看看你的代码

```
Scanner sc = new Scanner (System.in);
     int variable = 0;
     boolean valid = true; 
```

您正在创建 Scanner 对象，但在方法中没有任何地方实际使用它。

接下来的几行，

```
if (variable >= 0 && valid){
       } 
```

这两个条件都满足。因此，如果括号中没有任何内容，则不会执行任何代码。所以从那里，它只返回变量的值，即 0。

所以你需要实际使用你的 Scanner 类来获取一个整数。我相信，虽然我不确定，但方法是

```
Scanner.nextInt(); 
```

编辑：来自 JavaDocs [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)

你可以简单地使用

```
Scanner sc = new Scanner(System.in);
 int i = sc.nextInt(); 
```

从扫描仪读取整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:52:45.697

您的变量`variable`已分配`0` ，`valid`变量已分配`true`。因此，`while (!valid || variable < 0)`表达式将始终被计算`false` 并且 do-while 循环将只执行一次（而不会创建 Scanner）。

我猜你想在检查变量之前阅读用户输入`variable`，所以你可能想在`if (variable >= 0 && valid)`检查之前创建 Scanner 并阅读输入。

旁注，您可能可以跳过`valid` 变量并使用`variable =`[sc.nextInt()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextInt%28%29)`;`，与@Austin 的答案进行比较。

# netbeans - Hadoop 创建自己的程序

> ID：11069973
> 
> 赞同：0
> 
> 时间：2012-06-17T08:33:47.937
> 
> 标签：netbeans, hadoop

我是新玩具 Hadoop，我想知道如何在 Netbeans 中编写程序。

整个想法是获取字数统计的源代码，然后编写一个新程序。我遵循的步骤是：

1.  在 Netbeans 我创建了一个新的 Class 。（拆分数据）。
2.  复制 - 粘贴整个字数统计代码，然后重命名班级名称。

但是我在 Netbeans 中遇到了问题。它找不到进口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:48:23.047

嗯，我假设您已经创建了项目，然后添加了您的 SplitData 类。在项目选项卡中（默认在您的左侧），您已经创建了项目。展开它并右键单击“Librabies”->“Add JAR/Folder...”，然后找到 hadoop jar 文件（在 linux 中为默认位置 /usr/lib/hadoop/hadoop.jar）。而已。

# php - 就 10->15 秒轮询而言，Comet 和 AJAX 哪个更好？

> ID：11069974
> 
> 赞同：0
> 
> 时间：2012-06-17T08:33:52.340
> 
> 标签：php, ajax, apache, comet, polling

我的网站几乎完成了，但我有一个问题。每隔 10->15 秒，我的网站将搜索数据库以检查是否有更新。如果有更新，则向在线的用户发送通知。我搜索谷歌并找到了两个解决方案：Comet 和 AJAX。在我的情况下哪个更好。还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T19:28:18.843

在我看来，对于共享主机并使用 Apache 和 PHP 的网站，最好的解决方案是使用[实时托管服务](http://www.leggetter.co.uk/real-time-web-technologies-guide#hosted-services)将更新推送到连接的客户端。

原因如下：

Apache 不是为处理长时间运行的持久连接而构建的，因此它不是 Comet 或 WebSocket 解决方案的好选择。您会发现 PHP Comet 和 WebSocket 解决方案可能会作为守护进程独立运行，而不是在 Apache 上运行。在共享主机上，您不太可能运行守护进程，并且您的主机提供商也不太可能对您保持许多持久连接打开并在共享计算机上占用资源感到满意。

如果您使用 AJAX 轮询解决方案并每 10 到 15 秒对您的站点进行轮询，并在该轮询中包含一个数据库查询，那么如果您的站点上有合理数量的客户端，那么资源使用率会很快飙升：

100 个客户端，10 秒轮询，60 秒周期 = 100 * 10 * 6 = 每分钟 6000 个请求和数据库查询。如果没有发生更新，很多时候这些请求也可能是浪费。[您可以在此处](http://www.leggetter.co.uk/pusher/pusher-presentations/why_use_pusher.html#13)找到更大的示例。

通过卸载立即向您的网站客户端推送更新的能力，您可以删除这 6000 个请求和数据库查询，并将它们替换为对实时托管服务的一次调用。该服务维护与客户端的持久连接，因此当您的应用程序将更新推送给它时，它可以将它们传递给连接的客户端。

最后，您应该知道 WebSockets 取代 Comet 作为实时通信的首选解决方案。该协议旨在解决 Comet 解决方案试图通过各种黑客手段解决的问题。有关这些技术和 WebSockets 历史的更多信息，请参见[此处](http://pusher.com/websockets)。

# c# - VB 6 ActiveX 到 .net 和 Internet Explorer

> ID：11069977
> 
> 赞同：1
> 
> 时间：2012-06-17T08:34:08.203
> 
> 标签：c#, vb6, activex, vb6-migration

我有一个用 VB 6 编写的 activex 控件。该 activex 用于在 Internet Explorer 中显示。

我想扩展该代码。

我有 2 个选择 -

1.  将其转换为 .net（首选 c#）
2.  扩展 vb 6 代码

我的问题是：

**如果我选择第一个选项**

是否可以将 activex 转换为 .net 并在 Internet Explorer 中查看？

*我使用 aximp（.net 的活动 x 包装器）来包装 activex 并将我的 .net 用户控件注册为 COM。然后尝试在 Internet Explorer 中显示用户控件 - 发生的事情是我看到了我的用户控件（我添加了文本以将 activex 与用户控件分开） - 但没有看到 activex 对象。顺便说一句 - 我不希望它安装在 GAC 中，因为我的 activex 使用了许多其他应该与它相关的文件。*

**如果我选择第二个选项 -**

如何编译该代码？（应该很简单，但我找不到任何免费的 VB 6 编译器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:49:04.543

您已经回答了问题的第一部分。

第二部分的答案是您需要获得一份 Visual Basic 6 的副本才能编译您的 ActiveX 控件。您可以[在 amazon 上购买，](https://rads.stackoverflow.com/amzn/click/com/B00002S7I0)或者如果您订阅了 MSDN，您可以将其作为订阅的一部分下载。

# php - Uploadify 将 $_FILES 作为空白数组返回

> ID：11069982
> 
> 赞同：0
> 
> 时间：2012-06-17T08:34:56.750
> 
> 标签：php, file, upload, uploadify

我正在尝试将 Uploadify 实施到我的网站项目中，该项目已经有一个非常基本的文件上传系统。我已将uploadify 配置为提交表单帖子，该表单帖子传输到后端上传php 脚本以进行图像的上传和排序。但是，上传后我什么也没得到，$_FILES 数组完全是空白的，Uploadify 论坛和文档根本没有帮助。这是我的代码：

**前端上传页面**

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js">          </script>
<script type="text/javascript" src="/modules/default/themes/uploadify/jquery.uploadify-  3.1.min.js"></script>
<script type="text/javascript">
$(function() {
    $('#file_upload').uploadify({
        'fileTypeDesc' : 'Image Files',
        'fileTypeExts' : '*.jpg; *.jpeg; *.png; *.gif',
        'method' : 'post',
        'auto' : false,
        'swf'      : '/modules/default/themes/uploadify/uploadify.swf',
        'uploader' : '/modules/default/themes/uploadify/uploadify.php',
        'onUploadComplete' : function(file, event, ID, fileObj, response, data) {
            $('#pff').submit();
        },
    });
}); 
```

```
//Further down the line

<form action="<?php echo $this->url('upload')?>" method="post" id="pff" enctype="multipart/form-data">
<div class="uploadfield">
    <input type="file" name="pics" id="file_upload" />
</div>
</form>
<a href="javascript:$('#file_upload').uploadify('upload')">Upload Files</a> 
```

**后端PHP上传脚本段**

```
$errors = array();
    $uploaded = array();
    $ids = array();
    $public = $this->app->config->upload_public_default;
    $user = $this->app->userSession->user;
    $gallery = $this->app->getParamInt('gallery_id');
    $userid = $user->user_id;
    if(!empty($_FILES['Filedata']['tmp_name']) && $this->app->config->allow_uploads){ 
//Code to upload the images to the user accounts 
} 
```

几个小时以来，我一直在尝试各种不同的事情，以及来自不同网站和论坛的大量建议。没有任何工作或提示我该做什么。我似乎无法将文件传递给脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T09:02:07.510

可能的原因之一可能是文件上传大小限制。

首先检查phpinfo中'upload_max_filesize'，'post_max_size'的值

如果文件大小大于设置的限制，则可能导致 $_FILES 数组为空

参考：[http ://webparticles.wordpress.com/2011/08/28/uploadify-_files-array-is-empty/](http://webparticles.wordpress.com/2011/08/28/uploadify-_files-array-is-empty/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:40:05.660

我不确定 uploadify 是如何工作的，但很确定这不会工作

```
<input type="file" name="pics"... 
```

和

```
if(!empty($_FILES['Filedata']['tmp_name'])... 
```

您正在发送带有名称的文件并使用名称`pics`检查它`Filedata`不起作用，您必须使用相同的名称，例如`$_FILES['pics]`

# jquery - Jquery Ajax /GET方法成功时没有发生任何事情

> ID：11069986
> 
> 赞同：1
> 
> 时间：2012-06-17T08:35:37.873
> 
> 标签：jquery, http, get

我有一个在 Glassfish 应用服务器上运行的 RESTful Web 服务。当我在 cURL 上使用 /GET HTTP 方法调用 Web 服务时，存储的条目会被提取到控制台。我想做一个 jQuery REST 客户端——当我点击按钮时，它必须提醒我返回的 JSON 或 XML 条目。但是在成功方法中，什么也没发生。我的 html 页面如下所示。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Başlıksız Belge</title>

</head>

<body>
<input type="submit" name="kaydet" id="kaydet" value="Kaydet" />
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript">
var restURL="http://localhost:43842/KodcuComRESTful/kodcuRS/yazilar";

$('#kaydet').click(function(){
      $.ajax({
    type: 'GET',
    url: restURL,
    dataType:"json",
    success: renderList,
      });
      return false;
});

function renderList(data) {
    alert(data);
}
</script>
</body>
</html> 
```

当我观察 Live HTTP headers 程序中的请求和响应时，似乎一切正常。问题是什么？ ![在此处输入图像描述](../Images/bd0e27e3a967dc4b2f50675bcb169a78.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T09:14:57.250

我已经实现了你想要的东西。这是代码。它工作得很好。

希望它可以帮助你。

```
 <html>
 <script type="text/javascript" src="jQuery.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){
        $("#submit").click(function(){
        $.ajax({
            type: 'GET',
            url: "http://localhost/page1.html",
            success:function(data){
             alert(data);
            }
        });
    return false;
    });
});
</script>
</head>

<body>
<input type="button" id="submit" value="submit" />
</body>
 </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T08:57:21.570

要检查的两件事：

1.  注释掉`dataType:"json",`，看看它是否有效。也许这不是 JSON。
2.  `restURL`此 HTML 是否与指向的域位于同一域中？如果没有，您可能需要[JSONP](https://stackoverflow.com/a/3506306/682111)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T09:04:32.233

成功函数行后有一个逗号-“，”，将其删除，因为它是最后一行？

目前是：

成功：渲染列表，

将其更改为：成功：renderList

最终的HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Başlıksız Belge</title>

</head>

<body>
<input type="submit" name="kaydet" id="kaydet" value="Kaydet" />
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript">
var restURL="http://localhost:43842/KodcuComRESTful/kodcuRS/yazilar";

$('#kaydet').click(function(){
      $.ajax({
    type: 'GET',
    url: restURL,
    dataType:"json",
    success: renderList
      });
      return false;
});

function renderList(data) {
    alert(data);
}
</script>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-15T15:50:09.130

您也可以使用此代码

```
<script>
$("#submit").click(function(){

var val = $("#text").val();

$.get('get.php?id='+val,function(data,status){

if(status == "success")
{
  $("#show").val(data);
}
});

});
</script> 
```

# objective-c - 保存太多新的 NSManagedObjects 时 Mac OS 应用程序崩溃

> ID：11069992
> 
> 赞同：0
> 
> 时间：2012-06-17T08:37:18.683
> 
> 标签：objective-c, macos, core-data

我正在尝试编写一个应用程序来枚举拖到主应用程序窗口上的文件夹和项目，然后为它找到的每个 PDF 放置一个新条目到我的核心数据数据库中，然后填充一个 NSTableView。长话短说[er]，我已经到了可以安全地将一些项目拖到窗口中并保存数据库的阶段，允许我一次又一次地重新启动应用程序。

我遇到的问题是，如果我 [说] 将我的 Documents 文件夹拖到窗口上，它似乎一切正常，但是当我退出并尝试重新启动时，它会崩溃并出现

```
Thread 1: EXC_BAD_ACCESS (code=2, address-0x7fff6f11dff8 
```

我目前正在使用的代码（专门为调试这个问题而编写）是：

```
 NSError *error;
    id firstObject = [draggedStuff objectAtIndex:0];
    NSDictionary *fileAttribs = [[NSFileManager defaultManager] attributesOfItemAtPath:firstObject error:&error];
    if ([[fileAttribs valueForKey:NSFileType] isEqualTo:NSFileTypeDirectory]) {
        NSManagedObject *aNewFolder = [[NSManagedObject alloc]initWithEntity:[NSEntityDescription entityForName:kFOLDERS_ENTITY inManagedObjectContext:[self managedObjectContext]] insertIntoManagedObjectContext:[self managedObjectContext]];
        [aNewFolder setValue:firstObject forKey:kFOLDER_PATH];
        NSArray *directoryContents = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:firstObject error:&error];
        assert(!error);
        [directoryContents enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
            CFStringRef fileExtension = (__bridge CFStringRef) [obj pathExtension];
            CFStringRef fileUTI = UTTypeCreatePreferredIdentifierForTag(kUTTagClassFilenameExtension, fileExtension, NULL);
            if (UTTypeConformsTo(fileUTI, kUTTypePDF)) {
                NSManagedObject *aDocument = [[NSManagedObject alloc]initWithEntity [NSEntityDescription entityForName:kDOCO_ENTITY inManagedObjectContext:[self managedObjectContext]] insertIntoManagedObjectContext:[self managedObjectContext]];
                [aNewPicture setValue:obj forKey:@"docoPath"];
            }
            CFRelease(fileUTI);
            if (idx % 20 == 0) {
                NSError *error;
                [[self managedObjectContext] save:&error];
                assert(!error);
            }
        }];
    } 
```

最初，我在一个 NSOperation 子类中有这个，并带有相关检查用户取消，但我已经将它移到主线程只是为了确保它与它无关，所以，是的，它目前不是用户 -友好的一段代码。

崩溃肯定与`directoryContents`返回的项目数量有关，因为如果我拖动一个里面只有大约 20 个项目的文件夹，它工作得非常好。如果`directoryContents`拥有大约 200 个或更多文件，那么 Core Data 似乎无法正确保存它并损坏了 storedata 文件，在我重新启动应用程序之前需要将其删除。

`if (idx % 20 == 0)...`可以更改为保存更多或更少的 NSManagedObjects 等待保存，但结果也相同。

我也尝试过使用具有相同结果的 NSDirectoryEnumerator：损坏总是与文件夹中的项目数有关。

我喜欢 Core Data，但有时我会迷失方向，因此非常感谢任何帮助，尤其是考虑到这篇文章的长度！

托德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:03:25.987

事实证明它比我想象的要简单得多：我设法错误地连接了我的 NSTable。

我已将 NIB 中的 Table View 和 Table 列连接到实体......哎呀。

# .net - 如何在 .NET 中检测当前的进程/线程饥饿

> ID：11069995
> 
> 赞同：5
> 
> 时间：2012-06-17T08:38:05.117
> 
> 标签：.net, windows, monitoring, cpu, scheduler

我正在开发一个软实时应用程序，该应用程序部署到许多由于其他进程而具有不同负载量的服务器。我们已经确定，至少在一种设置中，性能因缺乏足够的 cpu 资源而受到阻碍。

我知道在 Windows 上，线程/进程可以进入就绪状态，如果 CPU 不可用，它将保持在该状态。

我有点希望会有一个像 Process.Current.ReadyTime 这样的调用，它可以让我检查和监控这种情况的发生并在应用程序日志中发出警告/错误。例如，您可以在已知时间段内获取 delta，并设置一个阈值，即您可以容忍处于就绪状态的时间。

我很难找到任何直接甚至间接的方法来获得它。有没有人有任何想法如何实现这一目标或类似的东西？

**TL;DR** - 我们正在寻找一种方法让线程/进程检查它处于就绪状态的时间（即有工作要做但没有可用的 CPU）

谢谢，

G人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T08:53:46.073

我不认为有这样的属性`Process.Current.ReadyTime`（但也许在 Windows 性能计数器中有适合您需要的东西？），但是对于线程，您可以使用[ThreadState 枚举](http://msdn.microsoft.com/en-us/library/system.diagnostics.threadstate.aspx)。

> **就绪** 指示线程由于没有空闲处理器而正在等待使用处理器的状态。线程准备在下一个可用处理器上运行。
> 
> **运行**指示线程当前正在使用处理器的状态。

您可以创建一个监视线程，其工作只是循环遍历应用程序的所有线程并记录它们的状态或计算它们在就绪状态中花费的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T09:02:52.043

框架中没有类似的东西，但可能值得搜索[WMI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394572%28v=vs.85%29.aspx)

我知道 WMI 公开[PercentProcessorTime](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394271%28v=vs.85%29.aspx)，它告诉您处理器空闲的时间百分比。

这将使您了解机器上的 CPU 负载，这将为您提供间接线索。

# java - Java EE 6 中容器之间的信任关系

> ID：11069996
> 
> 赞同：2
> 
> 时间：2012-06-17T08:38:38.500
> 
> 标签：java, jakarta-ee, tomcat, glassfish, java-ee-6

在[此链接](http://docs.oracle.com/cd/E19798-01/821-1841/bnbyr/index.html)中，缺少关于使 2 个容器相互信任的信息，引用自“容器之间的信任”：

> 当企业 bean 被设计为使用原始调用者身份或指定身份来调用目标 bean 时，目标 bean 将仅接收传播的身份。目标 bean 将不会收到任何身份验证数据。
> 
> 目标容器无法验证传播的安全身份。但是，由于安全身份用于授权检查（例如，方法权限或与 isCallerInRole 方法一起使用），因此 >security 身份的真实性至关重要。因为没有可用的身份验证数据来验证传播的身份，所以目标必须相信调用容器已经传播了经过身份验证的安全身份。
> 
> **默认情况下，GlassFish Server 配置为信任从不同容器传播的身份。因此，您无需采取任何特殊步骤来建立信任关系。**

最后一部分吓到我了。但无论如何，我想知道如何让 2 个容器相互信任而不是相互信任，以及这在 Tomcat 5.5 和 Glassfish 3.1.2 之间是否可行（因为我需要从 1 个容器到另一个容器使用 @RunAs） .

为了进一步澄清我的问题，我将告诉您我必须做什么以及我的解决方案：

我正在制作一个 Restful webservice 以允许客户端下载文件，此 webservice 位于 *CONTAINER_A*，但在下载文件之前，webservices 调用 *CONTAINER_B* 中的 EJB 以获取文件的路径一个数据库，也在 *CONTAINER_B* 中。问题是，我想确保从 *CONTAINER_B* 对 EJB 的调用只能由 CONTAINER_A 中的 Web 服务访问，并且我在 Web 服务中使用 @RunAs 注释，因此它充当 *AUTHORIZED_ROLE*。问题是，访问 Web 服务的客户端，我们称之为 *WEB_CLIENT*，不必经过身份验证即可访问 Web 服务，但 *CONTAINER_B* 中的 EJB 是安全的，只能由 *AUTHORIZED_ROLE* 访问。

清楚吗？还是我把事情复杂化了？有更好的方法吗？因为 @RunAs 解决方案仅在我将 JAX-RS webservice 也设为 @Stateless bean 时才可用，并且不鼓励使用文件系统操作（例如读取文件并将其发回），但目前是我唯一可以使用的解决方案考虑到。