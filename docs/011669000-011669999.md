# StackOverflow 问答 11669000-11669999

# python - Python 的 xml.etree.ElementTree 叶元素的意外布尔行为

> ID：11669001
> 
> 赞同：5
> 
> 时间：2012-07-26T12:10:30.557
> 
> 标签：python, xml, elementtree

我在使用 Python 2.6.5 xml.etree.ElementTree 库时遇到了一些麻烦。特别是，如果我设置一个简单的 xml 元素，如下所示

```
>>> import xml.etree.ElementTree as etree
>>> xml = etree.fromstring("<a><b><c>xy</c></b></a>") 
```

访问内部元素节点时，我对库没有任何问题，例如：

```
>>> etree.tostring(xml.find('b'))
'<b><c>xy</c></b>'
>>> xml.find('b') == None
False
>>> bool(xml.find('b'))
True 
```

但是，我遇到了叶元素节点的奇怪布尔解释，请参阅：

```
>>> etree.tostring(xml.find('b/c'))
'<c>xy</c>'
>>> xml.find('b/c') == None
False
>>> bool(xml.find('b/c'))
False 
```

请注意，在最后一个命令中，元素*xml.find('b/c')*显然不是 None，其计算结果为*False*。这特别烦人，因为我不能使用成语

```
>>> leaf = xml.find('b/c'):
>>> if leaf:
>>>     do_stuff(leaf) 
```

检查叶子元素是否存在。（我必须明确检查*'xml.find('b/c') != None'*。）

有人可以解释一下这个（对我来说出乎意料的）行为吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T12:19:47.127

好的，对不起，提交这个问题后，我在Python文档中找到了解决方案的明确声明：http: [//docs.python.org/release/2.6.5/library/xml.etree.elementtree.html#the-element -interface](http://docs.python.org/release/2.6.5/library/xml.etree.elementtree.html#the-element-interface)，在该部分的末尾。

> 注意：因为 Element 对象没有定义**非零**() 方法，没有子元素的元素将测试为 False。

带来不便敬请谅解。

# node.js - “SELECT * FROM cf”仅使用 Helenus for NodeJS 在 Cassandra 中返回索引列

> ID：11669002
> 
> 赞同：1
> 
> 时间：2012-07-26T12:10:30.917
> 
> 标签：node.js, cassandra, cql, helenus

我是 Cassandra 的新手，所以我可能会遗漏一些非常简单的东西。

我从一个简单的 nodejs 应用程序开始，它检索并显示列族中的所有行。如果我运行以下命令：

```
pool.connect(function(err, keyspace){
        if(err){
          throw(err);
        } else {
            pool.cql("SELECT * FROM tweets", function(err, results){
                console.log( err, results );
                datatext = results;
                socket.emit('tweets',datatext);
            });
        }
    }); 
```

我得到的只是前两列的数据，它们是索引的。没有显示来自其他列的数据。而如果我登录到 cassandra-cli 并执行 a `list tweets`，我会看到来自所有列的数据。

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:16:16.413

```
which version of CQL are you using ? and what is your table structure ?
maybe you can try this:

results.forEach(function(row){
  //each row
  row.forEach(function(name,value,ts,ttl){
    //each column
    console.log(name,value,ts,ttl);
  });
}); 
```

# linux - 以 root 身份登录 EC2 实例

> ID：11669017
> 
> 赞同：3
> 
> 时间：2012-07-26T12:11:41.023
> 
> 标签：linux, ssh, amazon-ec2, root

我正在使用 putty 登录到我的 ec2 实例。当我输入 root 时，它要求我以 ec2-user 身份登录。

> 使用公钥“imported-openssh-key”进行身份验证 请以 ec2-user 用户而不是 root 用户身份登录。

当我以 ec2-user 身份登录并尝试运行类似的命令时

> 百胜安装httpd

它说

> 加载的插件：fastestmirror、priorities、security、update-motd 您需要 root 才能执行此命令。

我是第一次运行该实例。我尝试通过亚马逊 AWS 帮助部分和谷歌搜索。无法找到解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-26T12:14:18.010

要切换到 root shell，请运行以下命令：

```
su 
```

如果你想以 root 身份执行命令而不切换到 root shell，你可以使用：

```
sudo yum install httpd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-18T17:50:38.400

当我`sudo`在命令前面添加时，它对我`yum install`有用：

```
sudo yum install docker 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-12T06:21:24.457

如果有人想切换回 root 用户，只需在您的用户终端中键入命令“exit”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-04T07:13:47.380

*   在编写任何命令之前编写以下命令

`sudo su`

之后，您将成为 root 用户。享受：）

# embedded - NANO-X Microwindows 嵌入式 Linux

> ID：11669024
> 
> 赞同：2
> 
> 时间：2012-07-26T12:12:13.243
> 
> 标签：embedded, arm, embedded-resource, embedded-linux

您好，我是用于 ARM 平台的嵌入式 Linux 编码的新手。我正在使用 NANO-X microwindopw 作为 Linux 服务器的 GUI 接口，所以我从 (ftp://microwindows.censoft.com/pub/microwindows/) 下载了 nano-x 源然后我尝试编译演示nano-x 的代码。当我尝试编译时，它给了我错误：未定义对“GrOpen”的引用，“GrReqShmCmds”......我无法成功构建它。

我已经包含了从 /microwin/src/include/ 到 /usr/include 的所有头文件。

我仍然收到错误消息。

# java - 如何显示表格的列名

> ID：11669029
> 
> 赞同：3
> 
> 时间：2012-07-26T12:12:32.350
> 
> 标签：java, swing, jtable

我使用下面的代码来显示一个表格。

```
final Vector<Vector<String>> vct = refreshDatas();
final Vector<String> Cols = new Vector<String>();
Cols.add("OID");
Cols.add("Name");
this.tmodel = new DefaultTableModel(vct,Cols);
this.table.setModel(this.tmodel);
this.table.setBounds(50, 200, 300, 250);
this.table.setSize(200, 200);
this.table.setVisible(true); 
```

但只显示内容。标题`OID`和`Name`不显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:24:24.400

请参阅表教程中的[“将表添加到容器”](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#show)部分。如果您自己添加表格，则必须使标题也可见。如果您将表格添加到滚动窗格，滚动窗格会为您处理这些问题。

从该教程复制粘贴：

> 如果您使用的是没有滚动窗格的表格，那么您必须获取表格标题组件并自己放置。例如：

```
container.setLayout(new BorderLayout());
container.add(table.getTableHeader(), BorderLayout.PAGE_START);
container.add(table, BorderLayout.CENTER); 
```

旁注：不需要调用`setBounds`nor `setSize`。只要确保你的父母`Container`有一个体面的`LayoutManager`，它会照顾大小

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T06:01:26.887

只需将表格添加到 JScrollPane 中，它会自动显示表格标题。

# networking - RARP协议的应用

> ID：11669034
> 
> 赞同：3
> 
> 时间：2012-07-26T12:12:46.780
> 
> 标签：networking, arp

我知道`RARP protocol`用于**将物理地址映射到逻辑地址**及其一些实际应用。现在我研究了`RARP(reverse ARP) protocol`但找不到它的**实际应用**。谁能给一些**RARP协议的场景和实际应用**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T12:21:51.933

[RARP](http://en.wikipedia.org/wiki/Reverse_Address_Resolution_Protocol)现在是一个过时的协议，用于允许主机根据主机的 MAC 地址确定其 IP 地址。[该协议已被更现代的技术和协议（例如BOOTP](http://en.wikipedia.org/wiki/Bootstrap_Protocol)和[DHCP（动态主机配置协议））](http://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol)淘汰。

# image - iphone 3g 上的 cocos2dx 图像不正确

> ID：11669039
> 
> 赞同：2
> 
> 时间：2012-07-26T12:12:55.283
> 
> 标签：image, cocos2d-x

我在游戏中使用 cocos2dx，它在所有设备（iPad 1-3、Iphone4+）上都可以正常工作，但在 Iphone 3g（3gs）上效果不佳。

cocos2dx 为什么加载一些图片不正确？

请看这个img（正确的img）：[http](http://cl.ly/image/1H0q3S0u0B2P) ://cl.ly/image/1H0q3S0u0B2P和不正确的img：[http ://cl.ly/image/3s2G1T31370b](http://cl.ly/image/3s2G1T31370b)

# xpath - xpath 2.0 按属性选择元素

> ID：11669040
> 
> 赞同：0
> 
> 时间：2012-07-26T12:12:57.197
> 
> 标签：xpath, xslt-2.0, xpath-2.0

我一直在 xpath 1.0 中使用以下 xpath 选择

```
<xsl:variable name="id"><xsl:value-of select="./@id" /></xsl:variable>
preceding::exm:messageFlow[@sourceRef = $id]/@targetRef 
```

这工作得很好，完全符合我的要求。但是，我开始将 XSLT 2.0 与 xPath 2.0 结合使用，但这不再起作用（使用 Altova XML 处理器）我收到以下错误：

> Kann nicht mit Ziel-Typ besetzt werden - 当前元素 ist 'sid-B3FD7EE5-043 3-4939-A69F-E74B30FDEB1C' vom Typ xs:untypedAtomic, Typ xs:QName erwartet - =

大致翻译为：

> 无法设置为目标类型 - 当前元素是 xs:untypedAtomic 类型的“sid-B3FD7EE5-043 3-4939-A69F-E74B30FDEB1C”，预期类型为 xs:QName -

以前我对这个选择有类似的问题：

```
following::exm:*[exm:incoming = $out] | preceding::exm:*[exm:incoming = $out] 
```

再次在 xpath 1.0 中工作，但在 xPath 2.0 中返回类似的错误后将其更改为

```
following::exm:*[exm:incoming/text() = $out] | preceding::exm:*[exm:incoming/text() = $out] 
```

它也适用于 xPath 2.0。我确实尝试过对属性做类似的事情，但没有奏效

相应 XML 的一小部分摘录：

```
<messageFlow id="sid-80B618A4-E6BF-4438-AF5D-5111AD308FE6" name="" sourceRef="sid-B3FD7EE5-0433-4939-A69F-E74B30FDEB1C" targetRef="sid-6EB2DB76-CC19-48AD-A073-D37C7489F211"/>
<task completionQuantity="1" id="sid-B3FD7EE5-0433-4939-A69F-E74B30FDEB1C" isForCompensation="false" name="call service" startQuantity="1">
     <incoming>sid-2B2BA651-B5BA-4195-9B5B-E6855B1138F4</incoming>
     <incoming>sid-DA4B86E8-C3F2-497C-8C0D-218E95CE9FD1</incoming>
     <outgoing>sid-008948DE-BA59-4897-AC37-2C3AA63DCD82</outgoing>
</task> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:54:17.910

我无法重现该问题。

**这种转变**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="task">
    <xsl:variable name="id"><xsl:value-of select="./@id" /></xsl:variable>

    <xsl:variable name="vResult"
     select="preceding::messageFlow[@sourceRef = $id]/@targetRef"/>

    <xsl:value-of select="$vResult"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下文档时**（提供的片段包装在单个顶部元素中并剥离任何未定义的命名空间）：

```
<t>
    <messageFlow id="sid-80B618A4-E6BF-4438-AF5D-5111AD308FE6"
    name="" sourceRef="sid-B3FD7EE5-0433-4939-A69F-E74B30FDEB1C"
    targetRef="sid-6EB2DB76-CC19-48AD-A073-D37C7489F211"/>
    <task completionQuantity="1" id="sid-B3FD7EE5-0433-4939-A69F-E74B30FDEB1C"
    isForCompensation="false" name="call service" startQuantity="1">
         <incoming>sid-2B2BA651-B5BA-4195-9B5B-E6855B1138F4</incoming>
         <incoming>sid-DA4B86E8-C3F2-497C-8C0D-218E95CE9FD1</incoming>
         <outgoing>sid-008948DE-BA59-4897-AC37-2C3AA63DCD82</outgoing>
    </task>
</t> 
```

**当同时使用 Altova2011 和 Saxon 9.1.07 运行时，会产生预期的正确结果，并且不会引发错误**：

```
sid-6EB2DB76-CC19-48AD-A073-D37C7489F211 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:18:31.210

我想知道您是否有一个架构将@id 属性声明为 QName 类型？

使用此变量声明：

```
<xsl:variable name="id"><xsl:value-of select="./@id" /></xsl:variable> 
```

您正在新的结果树片段中创建 @id 属性的副本。这是完全没有必要的；通过使变量成为对现有属性的简单引用，几乎可以肯定您的需求会得到更好的满足，因此：

```
<xsl:variable name="id" select="@id" /> 
```

通过制作副本，您不仅会编写不必要的代码并产生不必要的运行时成本（构建新树是一项昂贵的操作），而且还会丢失类型信息。如果我的猜想是正确的，@id 是 xs:QName 类型，那么原子化后的变量 $id 将是 xs:untypedAtomic 类型，并且将它与 xs:QName 进行比较很可能会失败，并显示类似于引用的消息.

# php - 将数字分解为数千、数百等

> ID：11669041
> 
> 赞同：2
> 
> 时间：2012-07-26T12:13:07.477
> 
> 标签：php, math, currency

我目前正在为我的公司制定支票打印解决方案。打印支票时，您需要从支付的金额中打印出百万、十万、万、千、百、十和单位（英镑/美元/欧元等）。

在 111232.23 的情况下，以下是我在下面编写的代码的正确输出。我不禁感到有一种更有效或更可靠的方法可以做到这一点？有谁知道这样做的图书馆/班级数学技术？

```
float(111232.23)
Array
(
    [100000] => 1
    [10000] => 1
    [1000] => 1
    [100] => 2
    [10] => 3
    [1] => 2
)

<?php

$amounts = array(111232.23,4334.25,123.24,3.99);

function cheque_format($amount)
{
    var_dump($amount);
    #no need for millions
    $levels = array(100000,10000,1000,100,10,1);
    do{
        $current_level = current($levels);
        $modulo = $amount % $current_level;
        $results[$current_level] = $div = number_format(floor($amount) / $current_level,0);
        if($div)
        {
            $amount -= $current_level * $div;
        }
    }while($modulo && next($levels));

print_r($results);
}

foreach($amounts as $amount)
{
 cheque_format($amount);
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T12:17:35.957

我想你只是重写了PHP 的[number_format](http://php.net/manual/en/function.number-format.php)函数。我的建议是使用 PHP 函数而不是重新编写它。

```
<?php

$number = 1234.56;

// english notation (default)
$english_format_number = number_format($number);
// 1,235

// French notation
$nombre_format_francais = number_format($number, 2, ',', ' ');
// 1 234,56

$number = 1234.5678;

// english notation without thousands separator
$english_format_number = number_format($number, 2, '.', '');
// 1234.57

?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T18:12:01.563

我不确定 PHP 脚本到底是什么，但如果你有 10000、1000、100、10、1 作为你需要的数量。有多少 10,000 的金额 $ 美元？

```
floor($dollar/10000) 
```

几千？

```
floor(($dollar%10000)/1000) 
```

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-23T12:36:02.397

这不是问题的答案，但以下内容也分解了小数。

```
function cheque_format($amount, $decimals = true, $decimal_seperator = '.')
{
    var_dump($amount);

    $levels = array(100000, 10000, 1000, 100, 10, 5, 1);
    $decimal_levels = array(50, 20, 10, 5, 1);

    preg_match('/(?:\\' . $decimal_seperator . '(\d+))?(?:[eE]([+-]?\d+))?$/', (string)$amount, $match);
    $d = isset($match[1]) ? $match[1] : 0;

    foreach ( $levels as $level )
    {
        $level = (float)$level;
        $results[(string)$level] = $div = (int)(floor($amount) / $level);
        if ($div) $amount -= $level * $div;
    }

    if ( $decimals ) {
        $amount = $d;
        foreach ( $decimal_levels as $level )
        {
            $level = (float)$level;
            $results[$level < 10 ? '0.0'.(string)$level : '0.'.(string)$level] = $div = (int)(floor($amount) / $level);
            if ($div) $amount -= $level * $div;
        }
    }

    print_r($results);
} 
```

# c# - wp7应用程序的内存消耗非常高

> ID：11669042
> 
> 赞同：1
> 
> 时间：2012-07-26T12:13:09.493
> 
> 标签：c#, windows-phone-7, xaml, silverlight-toolkit

我正在测试我的 wp7 应用程序，它占用了 85MB 的峰值内存，非常接近微软的 90MB 限制。我怎样才能减少内存消耗。

在我的应用程序中。我有一个全景页面和 3 4 个其他页面。在全景页面上，我正在加载联系人并显示在我的长列表选择器中。我检查了配置文件，它在导航上显示了一些警告。如何解决这个问题。什么是该场景中的最佳实践。

=== 更新 ===

1.  我应该清空我的列表框意味着在 OnNavigatedFrom 事件上将 Null 分配为 Itemsource

2.  在 OnNavigatedFrom 事件上调用 GC.Collect()

3.  在 OnNavigatedTo 中，我手动调用 NavigateService.RemoveBackEntry() 以从 backstack 中删除页面，然后调用 GC.Collect()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:22:56.317

[这里](http://www.developer.nokia.com/Community/Wiki/Best_practice_tips_for_delivering_apps_to_Windows_Phone_with_256_MB)有一些提示，您可能会对提示 #5 感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:23:01.357

单击[此处](http://windowsphone7developerguide.blograby.com/resource-management-and-performance/)阅读一篇很好的文章，以解释 Windows Phone 的许多良好做法。（也用于限制内存使用^^）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T22:56:09.770

我发现使用 Panorama 在内存方面非常昂贵，最终切换到了 Pivot。如果你有这个选项，它可能是你最好的选择。不确定这里是否有任何真正的答案，但这里有一个讨论这个问题的线程。

[全景内存使用情况](http://social.msdn.microsoft.com/Forums/en/windowsphone7series/thread/0d5f8090-ce90-4aab-a6e9-d716c1aacab6)

# javascript - Window.open 被阻止

> ID：11669048
> 
> 赞同：-1
> 
> 时间：2012-07-26T12:13:28.433
> 
> 标签：javascript, jquery, window

我在stackoverflow上找到了另一个线程：[window.open 弹出窗口在点击事件期间被阻止](https://stackoverflow.com/questions/6628949/window-open-popup-getting-blocked-during-click-event)。最佳答案似乎解决了这个问题。但我对 JavaScript 了解不多。

您能否根据答案帮助重写代码：

1）在调用并保存窗口引用`window.open`之前调用：`$.ajax`

```
var newWindow = window.open(...); 
```

2）关于保存的窗口引用的回调设置位置属性：

```
newWindow.location = url; 
```

也许它已经以一种明确的方式。但我不知道如何重写代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:21:04.683

好吧，请记住您链接到的问题的上下文，它会是这样的：

```
var newUrl = 'http://example.com';
var newWindow = window.open('', '_blank');
$.ajax({
  type: "POST",
  url: form_url,
  dataType: 'json',
  data: form_data,
  success: function(data) {
    newWindow.location = newUrl;
  }
}); 
```

当然，您必须修改`$.ajax`调用（特别是 url 和数据）以满足您的要求。

# android - 如何使用 ByteArrayInputStream 从 SQLite 检索图像

> ID：11669059
> 
> 赞同：0
> 
> 时间：2012-07-26T12:13:51.007
> 
> 标签：android, sqlite, bytearrayinputstream

```
//MyOpenHelper class 

public static final String TABLE_NAME2 = "Catlog_Chield";
db.execSQL("CREATE TABLE IF NOT EXISTS "+TABLE_NAME2+" (_id INTEGER PRIMARY KEY AUTOINCREMENT,log_desc TEXT,log_date TEXT,log_image BLOB,cat_id INTEGER,FOREIGN KEY (cat_id) REFERENCES "+TABLE_NAME1+"(_id))");

//My working class

 ByteArrayInputStream inputStream =   
    new ByteArrayInputStream(c.getBlob(c.getColumnIndex(log_image))); //Here I can't give my column name log_name
    Bitmap bp=BitmapFactory.decodeStream(inputStream);

    image.setImageBitmap(bp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:30:49.470

请尝试这种方式：

```
 byte[] image_bytes = c.getBlog(c.getColumnIndex(Here you need to give index));
   ByteArrayInputStream inputStream =   
   new ByteArrayInputStream(image_bytes); 
   Bitmap bp=BitmapFactory.decodeStream(inputStream); 
```

// 现在使用 setImageBitmap 方法设置图像

# android - 在 LinearLayout 中放置 3 个按钮以占用相等的空间

> ID：11669060
> 
> 赞同：44
> 
> 时间：2012-07-26T12:13:53.753
> 
> 标签：android, android-layout

我希望三个按钮在水平方向上占据相同数量的可用空间。我用过`android:layout_gravity`。问题是什么？

布局xml：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="1.0"
    >

    <Button android:id="@+id/button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/Bg"
            android:background="@drawable/button_red"
            android:layout_weight=".2"
            android:layout_gravity="left"
    />
    <Button android:id="@+id/button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/Bm"
            android:background="@drawable/button_red"
            android:layout_weight=".2"
            android:textColor="#ffffff"
            android:layout_gravity="center"
    />

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/button_red"
        android:layout_weight=".2"
        android:text="@string/Bf"
        android:layout_gravity="right"
    />

</LinearLayout> 
```

如果有人看到出了什么问题，谢谢。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-07-26T12:32:35.470

以下布局应该可以工作。权重用于线性布局..

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:weightSum="3"
>

    <Button android:id="@+id/button1"
            ...
            android:layout_weight="1"/>

    <Button android:id="@+id/button2"
            ...
            android:layout_weight="1"/>

    <Button
        android:id="@+id/button3"
        ...
        android:layout_weight="1"/>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-07T15:09:27.820

除了设置 a`layout_weight`你必须设置`layout_width`or `layout_height`to `0dp`。因此，例如，如果您想水平分布按钮，`layout_width`应该是 0dp 和`layout_weight`.2 或任何数字，只要通过您拥有的按钮相等即可。

所以你的布局应该是这样的

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
>

<Button android:id="@+id/button"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="@string/Bg"
        android:background="@drawable/button_red"
        android:layout_weight="1"
/>
<Button android:id="@+id/button"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="@string/Bm"
        android:background="@drawable/button_red"
        android:layout_weight="1"
        android:textColor="#ffffff"
/>

<Button
    android:id="@+id/button"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:background="@drawable/button_red"
    android:layout_weight="1"
    android:text="@string/Bf"
/>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T12:24:22.123

在所有按钮中将重量总和除以相等的比例。

移除 layout_gravity 属性并添加 android:layout_weight=0.33。

它会工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T12:18:17.100

看看这个：

```
<RelativeLayout 
    android:id="@+id/layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <Button 
        android:id="@+id/button1"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"/>
    <RelativeLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true">
        <Button 
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/button1"/>
    </RelativeLayout>
    <Button 
        android:id="@+id/button3"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"/>
</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-24T02:57:18.007

给`android:layout_weight="1"`每个按钮

这里是Android开发者指南：

> ## 布局重量
> 
> LinearLayout 还支持使用 android:layout_weight 属性为单个子级分配权重。这个属性根据它应该在屏幕上占据多少空间来为视图分配一个“重要性”值。较大的权重值允许它扩展以填充父视图中的任何剩余空间。子视图可以指定一个权重值，然后将视图组中的任何剩余空间按照其声明权重的比例分配给子视图。默认权重为零。
> 
> 例如，如果有三个文本域，其中两个声明权重为 1，而另一个没有权重，则没有权重的第三个文本域不会增长，只会占用其内容所需的区域。在测量所有三个字段后，另外两个将平均扩展以填充剩余的空间。如果第三个字段的权重为 2（而不是 0），那么它现在被声明为比其他两个更重要，因此它获得总剩余空间的一半，而前两个平分其余空间。

[来源](https://developer.android.com/guide/topics/ui/layout/linear.html#Weight)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T12:16:49.110

将按钮放在相对布局中。将属性添加到按钮 allignParentleft = true、另一个 allignParentcenter= true 和 allignParentRight = true 到每个按钮。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-07T07:19:38.617

请考虑以下布局片段：

```
<LinearLayout
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:weightSum="3">

    <ImageView
        android:src="@drawable/logo1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_gravity="left|center_vertical" />

    <TextView
        android:id="@+id/toolbar_title"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Some Title"
        android:textColor="@android:color/black"
        android:layout_gravity="center"
        android:gravity="center"
        android:layout_weight="1" />

    <ImageView
        android:src="@drawable/logo2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_gravity="right|center_vertical" />

</LinearLayout> 
```

上面要注意的2点。

A. 我创建了一个 weightSum 为 3 的 LinearLayout。

B. 然后在其中创建 3 个元素，每个元素的 layout_weight 为 1，这样我的子元素就可以在它们之间均匀分布整个空间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-26T10:24:20.850

我已经做到了务实而没有重量

```
 float width = CommonUtills.getScreenWidth(activity);
    int cardWidth = (int) CommonUtills.convertDpToPixel(((width) / 3), activity);

    LinearLayout.LayoutParams params =
        new LinearLayout.LayoutParams(cardWidth,
            LinearLayout.LayoutParams.MATCH_PARENT);

    btnOne.setLayoutParams(params);
    btnTwo.setLayoutParams(params);
    btnThree.setLayoutParams(params);

    public class CommonUtills {
        public static float getScreenWidth(Context context) {
            float width = (float) 360.0;
            DisplayMetrics displayMetrics = context.getResources().getDisplayMetrics();
            width = displayMetrics.widthPixels / displayMetrics.density;
            return width;
        }
    }

    <LinearLayout
    android: layout_width = "match_parent"
    android: layout_height = "50dp"    
    android: orientation = "horizontal" >

        <Button
    android: id = "@+id/btnOne"
    android: layout_width = "wrap_content"
    android: layout_height = "match_parent" > </Button>

        <Button
    android: id = "@+id/btnTwo"
    android: layout_width = "wrap_content"
    android: layout_height = "wrap_content" > </Button>

        <Button
    android: id = "@+id/btnThree"
    android: layout_width = "wrap_content"
    android: layout_height = "wrap_content" > </Button> 
        </LinearLayout> 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-10-05T00:25:43.680

你可以这样划分：`

```
 <RelativeLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentStart="true"
                android:layout_centerVertical="true"
                android:layout_toLeftOf="@+id/imageButtonLikedPost">

                <ImageButton
                    android:id="@+id/imageButtonMyPost"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerHorizontal="true"
                    android:layout_centerVertical="true"
                    android:background="@drawable/mypost_tab_bg" />
            </RelativeLayout>

            <ImageButton
                android:id="@+id/imageButtonLikedPost"
                android:layout_width="40dp"
                android:layout_height="30dp"
                android:layout_centerHorizontal="true"
                android:layout_centerVertical="true"
                android:background="@drawable/mylike_tab_bg" />

            <RelativeLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentEnd="true"
                android:layout_alignParentRight="true"
                android:layout_centerVertical="true"
                android:layout_toRightOf="@+id/imageButtonLikedPost">

                <ImageButton
                    android:id="@+id/imageButtonMyBlog"
                    android:layout_width="30dp"
                    android:layout_height="30dp"
                    android:layout_centerHorizontal="true"
                    android:layout_centerVertical="true"
                    android:background="@drawable/tab4_bg" />
            </RelativeLayout>
        </RelativeLayout>` 
```

# objective-c - 在objective-c中的Dynamic UITableView中创建部分

> ID：11669061
> 
> 赞同：0
> 
> 时间：2012-07-26T12:14:16.820
> 
> 标签：objective-c, ios, uitableview

我想创建包含天的动态 UITableView 作为部分（sat，sun，mon，...）

你能帮帮我吗！提前致谢！

这是我的代码，但我不知道应该为创建部分写什么：

天.h

```
#import <UIKit/UIKit.h>

@interface Day : UIViewController 

@property (nonatomic, strong) NSMutableArray *monthTitle;

@end 
```

天.m

```
@synthesize monthTitle;

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super init];
if (self) {
   monthTitle = [[NSMutableArray alloc] init];
}
return self;

}

- (void)didReceiveMemoryWarning
{
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
[super viewDidLoad];

}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return [self.monthTitle count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = [tableView 
                         dequeueReusableCellWithIdentifier:@"Cell"];

return cell;

}

 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle   
forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete)
{
    [self.monthTitle removeObjectAtIndex:indexPath.row];
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]  
 withRowAnimation:UITableViewRowAnimationFade];
}   
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// Navigation logic may go here. Create and push another view controller.
/*
 <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib   
name#>" bundle:nil];
 // ...
 // Pass the selected object to the new view controller.
 [self.navigationController pushViewController:detailViewController animated:YES];
 */
}

@end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T13:28:40.623

确保将您的设置`UIViewController`为`delegate`和`dataSource`。`UITableView`首先，您需要为这两个实现协议：

```
@interface Day : UIViewController <UITableViewDataSource, UITableViewDelegate>

@property (nonatomic, strong) NSMutableArray *monthTitle;

@end 
```

其次，您需要将`delegate`and分配`dataSource`给.`UITableView``UIViewController`

右键单击并将和出口`UITableView`拖到视图底部的 at 图标：`delegate``dataSource``UIViewController`

![在此处输入图像描述](../Images/679c1a29528c4c55756ad67213353d02.png)

现在您`UITableView`已设置为使用您的`UIViewController`as`delegate`和`dataSource`。之后，正确设置函数以填充`UITableView`数据：

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [self.monthTitle count];
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [self.monthTitle objectAtIndex:section];
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;  //Return the number of sections you want in each row
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellIdentifier = @"Whatever You Put For Cell Identifier On Interface Builder";
    UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    //Configure the cell however you wish

    return cell;
} 
```

现在，假设您已`self.monthTitle`设置为`NSArray`其中`NSString`包含您想要的每个部分的标题，此代码将为您提供`UITableView`与标题一样多的部分`self.monthTitle`，每个部分中有 1 行，以及与该特定相关的部分标题的指数`self.monthTitle`。因此，如果`self.monthTitle`持有一周中的所有日子，您`UITableView`将如下所示：

![在此处输入图像描述](../Images/cb0a664c0d74d35ec395dfbe6aa95f5b.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T12:17:45.387

以下方法返回节数。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 1;
} 
```

因此，如果您需要 3 个部分，则必须返回 3 个。

之后，您可以使用此方法命名部分：

```
 - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

        if(section == 0)
            return @"name section 0";
        else if(section == 1){
            return @"name section 1";
        }else
            return @"name section 2";
         //etc...
    } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-26T12:43:01.010

使用数组或字典创建动态结构

```
_sections = [NSMutableArray array];
            [_sections addObject:@"section1"];
            [_sections addObject:@"section2"];

    _rows = [NSMutableArray array];
    NSMutableArray* section1 = [NSMutableArray array];
    [section1 addObject:@"row1"];
    [section1 addObject:@"row2"];
    NSMutableArray* section2 = [NSMutableArray array];
    [section1 addObject:@"row1"];
    [section1 addObject:@"row2"];
    [_rows addObject:section1];
    [_rows addObject:section2];

    #pragma mark - Table view data source

    -(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
        return [_sections count];
    }

    -(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
    {
        return [_sections objectAtIndex:section];
    }

    -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        return [[_rows objectAtIndex:section] count];
    }

    -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:nil];
        if(!cell)
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:nil];
        cell.textLabel.text = [[_rows objectAtIndex:[indexPath section]] objectAtIndex:[indexPath row]];
        return cell;
    } 
```

# iphone - 如何验证 NSDATE

> ID：11669065
> 
> 赞同：0
> 
> 时间：2012-07-26T12:14:34.283
> 
> 标签：iphone, objective-c, ios5, xcode4.2

**如何查找一个文本字段值是在过去 60 天内，不包括当前日期。**

例如，如果我在文本字段中输入值是**20-July-2012**使用`Date Picker`。然后我单击**提交**，它将检查具体日期是否在 60 天内。如果输入的值早于 60 天，则会显示警告消息。这些值是从 api 检索的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:22:27.057

```
NSDate *today = [NSDate date];

NSTimeInterval dateTime;
if ([pickerDate isEqualToDate:today])   //pickerDate is a NSDate
{
     NSLog (@"Dates are equal");
}
dateTime = ([pickerDate timeIntervalSinceDate:today] / 86400);  
if(dateTime < 0) //Check if visit date is a past date, dateTime returns - val
{
     NSLog (@"Past Date");
}
else 
{   
     NSLog (@"Future Date");
} 
```

更改 86400 的值以适合您的查询。在这种情况下，它是我们要比较的秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:17:25.697

首先，将文本转换为`NSDate`. 然后使用

`timeIntervalSinceDate:[NSDate dateWithTimeIntervalSinceNow:0]`

有几种方法可以将文本转换为`NSDate`. 您可以正确格式化文本，然后使用`dateWithString`或者您可以将所有内容转换为数字，将它们相乘，以及其中一种`dateWithTimeInterval`方法。

如果您希望用户能够输入“July”（纯文本月份），那么您可能需要编写一个方法，将月份转换为具有字符串匹配的数字等价物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:23:00.177

```
NSDate *lastDate; //your date I hope you have created it
NSDate *todaysDate = [NSDate date];
NSTimeInterval lastDiff = [lastDate timeIntervalSinceNow];
NSTimeInterval todaysDiff = [todaysDate timeIntervalSinceNow];
NSTimeInterval dateDiff = lastDiff - todaysDiff; // number of seconds
int days = dateDiff/(60*60*24); // 5.8 would become 5 as I'm taking int 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T12:23:42.310

**你如何定义60天？**

您可能要使用`NSCalendar` `-dateByAddingComponents:toDate:options:` **来确保您的 60 天确实是 60 天**。

`NSCalendar`还提供了处理日期组件时非常好的`-components:fromDate:`。`-dateFromComponents:`

**如果 60 天不需要是真正的日历日**（夏令时开关、天文时间校正等），您可以`NSDate`单独使用时间间隔方法。

# c# - C#/.NET 中的乘法或除法

> ID：11669067
> 
> 赞同：0
> 
> 时间：2012-07-26T12:14:46.580
> 
> 标签：c#, c++, .net, arithmetic-expressions

> **可能重复：**
> [我应该使用乘法还是除法？](https://stackoverflow.com/questions/226465/should-i-use-multiplication-or-division)

在一些（C++）3D 库中闲逛，我经常看到这样的代码：

```
float fInvLength = 1.0f / fLength;
rkAxis.x = x * fInvLength;
rkAxis.y = y * fInvLength;
rkAxis.z = z * fInvLength; 
```

这真的比这段代码快吗：

```
rkAxis.x = x / fLength;
rkAxis.y = y / fLength;
rkAxis.z = z / fLength; 
```

我主要对 C#/.NET 性能感兴趣，但我也不介意有关 C++ 的一些信息。

# android - 从联系人列表中获取电子邮件地址

> ID：11669069
> 
> 赞同：4
> 
> 时间：2012-07-26T12:14:52.807
> 
> 标签：android, android-intent, android-contacts

我通过以下方式获取联系人列表

允许

```
android:name="android.permission.READ_CONTACTS"

Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
startActivityForResult(intent, PICK_CONTACT); 
```

但如何从

```
 public void onActivityResult(int reqCode, int resultCode, Intent data) {
//what should i have to write to fetch email address of selected contact
// I wrote like below but i could not get result

 if (resultCode == Activity.RESULT_OK) {  
     try{
             Uri contactData = data.getData();

             Cursor cursorEmail = getContentResolver().query(contactData,null,null,null,null);
             cursorEmail.moveToFirst();
             String emailAdd =  cursorEmail.getString(cursorEmail.getColumnIndex(ContactsContract.CommonDataKinds.Email.ADDRESS));
             Toast.makeText(MySettings.this, emailAdd, Toast.LENGTH_LONG).show();
          }catch(Exception e){
              Toast.makeText(MySettings.this, "No Email Add found", Toast.LENGTH_LONG).show();
          }

} 
```

但问题是我没有从选定的联系人列表中获取电子邮件地址，所以任何人都可以给我解决方案

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T12:38:27.993

您可以使用以下代码检索电子邮件。

```
public ArrayList<String> ShowContact() {        

    nameList = new ArrayList<String>();
            phoneList = new ArrayList<String>();
            emailList = new ArrayList<String>();

    ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
            null, null, null);
    if (cur.getCount() > 0) {
        while (cur.moveToNext()) {
            String id = cur.getString(cur
                    .getColumnIndex(ContactsContract.Contacts._ID));
            String name = cur
                    .getString(cur
                            .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
            if (Integer
                    .parseInt(cur.getString(cur
                            .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                // Query phone here. Covered next

                Cursor pCur = cr.query(
                        ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                        null,
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                + " = ?", new String[] { id }, null);
                while (pCur.moveToNext()) {
                    // Do something with phones
                    String phoneNo = pCur
                            .getString(pCur
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                    nameList.add(name); // Here you can list of contact.
                        phoneList.add(phoneNo); // Here you will get list of phone number.                  

                    Cursor emailCur = cr.query( 
                            ContactsContract.CommonDataKinds.Email.CONTENT_URI, 
                            null,
                            ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", 
                            new String[]{id}, null); 
                        while (emailCur.moveToNext()) { 
        String email = emailCur.getString(emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));                            

                 emailList.add(email); // Here you will get list of email    

                        } 
                        emailCur.close();       
                }
                pCur.close();
            }
        }
    }

    return nameList; // here you can return whatever you want.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-08T10:56:54.163

获取所选联系人的电子邮件 ID 的功能

```
private void retrieveContactEmail()
{
    Cursor cursorID = getContentResolver().query(uriContact,
        new String[]{ContactsContract.Contacts._ID},
        null, null, null);

    if (cursorID.moveToFirst()) {
        contactID = cursorID.getString(
            cursorID.getColumnIndex(ContactsContract.Contacts._ID));
    }

    Cursor cursor = getContentResolver().query(
        ContactsContract.CommonDataKinds.Email.CONTENT_URI, null, 
        ContactsContract.CommonDataKinds.Email.CONTACT_ID + "=?",
        new String[]{contactID}, null);

    int emailIdx = cursor.getColumnIndex(
        ContactsContract.CommonDataKinds.Email.DATA);

    if (cursor.moveToFirst()) {
        String emailg = cursor.getString(emailIdx);

        if(emailg!=null) {
            email.setText(emailg);
        }
        else {
            Toast.makeText(Activity.this,
                "No email id for this contact",
                Toast.LENGTH_LONG
            ).show();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:33:11.337

采用

```
String emailAdd =  cursorEmail.getString(cursorEmail.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA)); 
```

代替

```
String emailAdd =  cursorEmail.getString(cursorEmail.getColumnIndex(ContactsContract.CommonDataKinds.Email.ADDRESS)); 
```

# javascript - 是否可以使用多线程执行 Javascript 函数

> ID：11669072
> 
> 赞同：0
> 
> 时间：2012-07-26T12:15:02.113
> 
> 标签：javascript, multithreading

> **可能的重复：**
> [JavaScript 多线程](https://stackoverflow.com/questions/7639224/javascript-multithreading)

当我在浏览器中打开网页时，启动了多少个线程来渲染 DOM 并执行 Javascript 代码？

是否可以使用多线程执行 Javascript 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T12:20:44.757

您可以`webworkers`在现代浏览器中使用

[http://www.html5rocks.com/en/tutorials/workers/basics/](http://www.html5rocks.com/en/tutorials/workers/basics/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:18:22.097

简短的回答是否定的，您不能在 javascript 中运行多线程代码。

更长的答案是你可以模拟它。这个关于 SO 的问题可能会有所帮助：[Multithreaded JavaScript how to?](https://stackoverflow.com/questions/2145829/multithreaded-javascript-how-to)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:18:59.070

Javascript 代码在单个线程中运行。你不能启动单独的线程，但你仍然可以使用异步函数来实现，比如 setTimeOut 和 setInterval 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T12:19:40.490

一般来说，只有一个 UI 线程，但您可以在 HTML5 中将 JS 与 WebWorkers 并行运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T12:19:46.213

您可以将 WebWorkers 用于线程，但它不能与 dom 一起使用。您也可以尝试通过[setInterval模拟它](http://www.garrickcheung.com/javascript/what-i-learned-about-multi-threading-in-javascript/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T14:23:49.147

人们有时使用的另一个想法是使用 iframe。如果您的应用程序可以建模为一组 iframe（如 facebook），您可以利用它。谷歌浏览器对此进行了高度优化。每个帧中的 Javascript 在单独的执行上下文中执行，因此可以并行化。

# jquery - 在新窗口中记住我的 jquery cookie 值

> ID：11669075
> 
> 赞同：2
> 
> 时间：2012-07-26T12:15:09.677
> 
> 标签：jquery, cookies

不知道该怎么做，我在页面上的链接上设置了一个 jQuery cookie，然后打开一个新窗口。所以在窗口 1 - cookie 值设置为`XXX`. 窗口 2 是一个页面，用户可以在其中将此 cookie 值更新为任何值，例如`XYX`，`YYY`等等。

所以我希望能够使用用户在窗口 2 中更改的内容来更新窗口 1 中的 cookie 值。

目前我有 2 个窗口，其中一个带有`$.mycookie(test, xxx)`和`$.mycookie(test, yyy)`。如果用户关闭窗口 2，他的更改不会在窗口 1 中更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:25:00.500

要明确使 cookie 可用于您域上的所有路径，请确保设置了路径：

```
$.cookie("example", "foo", { path: '/' }); 
```

要将其限制为特定路径：

```
$.cookie("example", "foo", { path: '/foo' }); 
```

如果设置为“/”，cookie 将在整个域中可用。如果设置为 '/foo/'，则 cookie 将仅在 /foo/ 目录和 domain 的 /foo/bar/ 等所有子目录中可用。默认值是设置 cookie 的当前目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:56:43.427

你是对的，你需要刷新打开器窗口。

Window-1 通过 javascript 打开 Window-2（弹出窗口），并且此弹出窗口需要在触发 unload 事件时调用一个函数，因为它在关闭时和/或在单击按钮/链接时会刷新父窗口。以您的方式发生的 Cookie 更改只能在刷新后生效。

简单的 Window-2 示例：

```
<script>
function whatever() {
    $.cookie("test", $('input[name=cookievalue]').val());
    if (window.opener != null) {
        window.opener.location.reload();
        window.close();
    }
}

$('button[name=clicker"]').bind('click', function(){
    whatever();
});

/* optionall you can also do an unload event, 
 * but you should probably check if you ran whatever() more then 
 * once and not run it a second time.
 */
$(window).unload(function(){ 
    whatever();
});
</script>

<input type="text" value="" name="cookievalue">
<button name="clicker">Change Cookie and close</button> 
```

# eclipse - 乌龟等效“替换为存储库中的最新版本”？

> ID：11669077
> 
> 赞同：4
> 
> 时间：2012-07-26T12:15:20.220
> 
> 标签：eclipse, svn, tortoisesvn, revert

我有一台用于 Windows 开发的 PC 和一台用于 Android 开发的 Linux 机器。我们的源代码控制是 Subversion，我在 Windows 上使用 TortoiseSVN，在 Linux 上使用 Eclipse 中的 Subclipse 插件。

有时我会为一些实验编辑一个文件，但我不想保留这些更改。在 Subclipse 中，我所要做的就是*“用存储库中的最新版本替换”*以使其与最新提交的代码保持一致。

在 TortoiseSVN 中相当于什么？有没有一种简单的一步法将我的本地文件替换为存储库中当前最新的文件？

**注意**我不想做*“更新”*，因为根据将合并到其他人更改中的文档。我想要一个完整的替代品。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T12:26:10.327

我认为这没有一步到位的行动。

右键单击工作副本文件夹`TortoiseSVN -> Revert`并选择应该撤消本地更改的文件，然后执行 `TortoiseSVN -> Update`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:22:39.423

*   使用`svn revert`TortoiseSVN 上下文菜单或相同的命令：http: [//tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-revert.html](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-revert.html)然后`svn update`是工作副本，

*   终极解决方案：`svn checkout`一个新的工作副本或通过 TortoiseSVN 上下文菜单来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:17:40.953

尝试右键单击该项目 > Tortoise SVN > 更新到修订版... > 选择 Head Revision 就完成了！！！

# java - 可运行的 jars（通过 Eclipse）是否包含跟踪信息？

> ID：11669081
> 
> 赞同：10
> 
> 时间：2012-07-26T12:15:36.370
> 
> 标签：java, eclipse, anonymity

假设我在 Eclipse 中编写 Java 代码，然后将其保存为可运行的 .jar 文件。该代码是 100% 自己编写的，因此没有从其他来源导入。

.jar 文件中的任何内容（文件头、..）是否包含有关我的 PC 或我的 Eclipse 版本的私人数据？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-26T12:18:45.943

是的，可能有一个自动生成的清单文件（jar：META-INF/MANIFEST.MF）

这是插件的默认输出

```
Manifest-Version: 1.0
Built-By: borisov andrey
Build-Jdk: 1.7.0_05
Created-By: Apache Maven
Archiver-Version: Plexus Archiver 
```

如您所见，至少将用户名添加到清单文件中

更新：如果您使用的是 maven，您可能需要配置 maven jar 插件

```
 <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-jar-plugin</artifactId>
      <version>${maven-jar-plugin-version}</version>
      <inherited>true</inherited>
      <executions>
        <execution>
          <goals>
            <goal>test-jar</goal>
          </goals>
        </execution>
      </executions>
      <configuration>
        <archive>
          <manifestEntries>
            <Created-By>${java.version} (${java.vendor})</Created-By>
            <Built-By>ME</Built-By>
            <Implementation-Title>${project.name}</Implementation-Title>
            <Implementation-URL>SOME URL if you want</Implementation-URL>
            <Implementation-Version>${project.version}</Implementation-Version>
            <Implementation-Vendor>your company</Implementation-Vendor>
            <Implementation-Vendor-Id>your vendore id</Implementation-Vendor-Id>
          </manifestEntries>
        </archive>
      </configuration>
    </plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:19:40.593

如果在创建可运行的 jar 时将其中任何一个设置为元数据，我会感到惊讶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:22:56.183

您的可运行 jar 将只有`resources`, the`dependent libraries`和`manifest.xml`文件......

# algorithm - 不同步长的 Floyd 环路检测算法

> ID：11669082
> 
> 赞同：2
> 
> 时间：2012-07-26T12:15:47.200
> 
> 标签：algorithm, linked-list, complexity-theory, floyd-cycle-finding

在*链表中的**Floyd 循环检测算法*中，我们一般将慢指针加 1 个单位，快指针加 2 个单位。我们可以使用哪些其他值来增加慢速和快速指针，它们如何改变算法的复杂性？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:26:30.683

无论速度或环路大小如何，这两个指针总是会相遇。

使用以下值：

*   `a`和`b`：每个指针每次迭代所采取的步数。
*   `m`：循环中的节点数。

在`i`迭代之后，两个指针将已经采取`ai`和`bi`步骤。`i`如果足够大以至于两个指针都在循环内，它们将位于同一个节点，并且：

```
ai = bi (mod m) 
```

这与以下内容相同：

```
(a-b)i = 0 (mod m) 
```

这对于一个值`i`是 的倍数`m`且足够大的值是正确的。这样的值将始终存在，因此指针将始终相遇。

`a`和的较大值`b`将增加每次迭代所采取的步数，但如果它们都是常数，那么复杂度仍然是线性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T18:58:34.503

I think the step size does not matter. As long as slow < fast the two would meet if there is a cycle in the list.

The only difference would be that in each iteration the number of steps taken by each pointer would vary.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-26T11:33:33.837

好吧，我通过使用一些基础数学以一种争论的方式理解了它。想象一个带有循环的链表，慢指针和快指针都开始移动。令 T 为循环开始的点或列表连接自身的节点。当慢速指针到达该节点时，快速指针现在将位于循环内。所以现在想象这个像时钟一样的循环有一个时针和一个分针，这两个指针会在它们速度的公倍数上相遇，而不管它们的速度如何。*

# sitecore - Sitecore：同时具有多行文本和富文本选项的字段类型？

> ID：11669083
> 
> 赞同：3
> 
> 时间：2012-07-26T12:15:48.463
> 
> 标签：sitecore, sitecore6

是否可以在 Sitecore (6.5) 中有一个字段是多行文本和 RichText 的“合并”？更具体地说，我正在寻找的是一个 RichText 字段，我可以在其中将内容插入到该字段中，而无需先打开编辑器。就像您可以使用多行文本字段一样。

所以一个 RichText 编辑器字段，具有标准选项，而且还能够在不打开编辑器的情况下将文本粘贴/输入到普通字段中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:01:03.727

您可以轻松地将纯文本粘贴到富文本字段中。在内容编辑器中，只需单击 RT 字段上方的“显示 HTML”链接。这将打开纯文本编辑器，而不是 RTE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T18:35:14.013

在 Sitecore 中选择“查看”选项卡并选中“原始值”框。现在您的富文本字段将显示 HTML 内容。在原始值模式下，您无需打开任何编辑器即可编辑、复制和粘贴原始 HTML。这也将导致其他字段暴露其原始值。您可以随时保持原始值模式并编辑其他项目或退出它。

# php - Buddypress 成员未列出

> ID：11669086
> 
> 赞同：1
> 
> 时间：2012-07-26T12:16:01.813
> 
> 标签：php, wordpress, buddypress

尝试将成员导入我的网站，该网站正在使用来自 sql 转储的 buddypress。我尝试在 wp_xprofile_data 和 wp_users 表中插入详细信息，但它没有显示在 buddypress 成员区域中。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:23:31.633

我相信他们需要在 wp_usermeta -> meta_key = last_activity & meta_value = 2012-06-04 21:51:03 中输入一个条目，然后它们才会出现在任何地方。因此，如果他们至少没有登录一次，他们就不会出现。作为导入的一部分，创建一个 last_activity 条目。

根据您设置 BP 的方式，您可能还需要“激活”成员。

# javascript - 从 Html 中提取特定值

> ID：11669087
> 
> 赞同：0
> 
> 时间：2012-07-26T12:16:09.093
> 
> 标签：javascript, html, regex

我有以下 html 表 -

```
<table cellpadding=0 cellspacing=0><tr><td height=\'30\' bgcolor=\'#CCCACA\'>
<font size=2 face=\'Arial\' color=\'#000000\'><b>&nbsp;Property</b></font>
</td><td bgcolor=\'#CCCACA\'>
<font size=2 face=\'Arial\' color=\'#000000\'><b>&nbsp;Value</b></font>
</td></tr><tr><td bgcolor=\'white\' width=\'200\' height=\'20\'>
<font size=2 face=\'Arial\'>&nbsp;First Name</font>
</td><td bgcolor=\'white\' width=\'300\'>
<font size=2 face=\'Arial\'>&nbsp;John</font>
</td></tr><tr><td bgcolor=\'#F3EFEF\' width=\'200\' height=\'20\'>
<font size=2 face=\'Arial\'>&nbsp;Contact</font>
</td><td bgcolor=\'#F3EFEF\' width=\'300\'>
<font size=2 face=\'Arial\'>&nbsp;number</font>
</td></tr><tr><td bgcolor=\'white\' width=\'200\' height=\'20\'>
<font size=2 face=\'Arial\'>&nbsp;Last Name</font>
</td><td bgcolor=\'white\' width=\'300\'><font size=2 face=\'Arial\'>&nbsp;Smith</font>
</td></tr></tr></table> 
```

我希望在 Javascript 中使用正则表达式来提取`number`此代码中的值。我的问题是在表中的每个值之前的代码行 -

```
<font size=2 face=\'Arial\'>&nbsp; 
```

存在，因此我无法本地化为一个值。但是我确实知道该`number`值将在上述行的每**6 个实例之后出现。**我知道一个正则表达式可以在`&nbsp`不确定如何**1.**实现这个和**2.**获得第 6 个值之后提取值。

**编辑**

```
function showProperties2(){

var itemID = new String(objChart.getSelectedElements());
var props = new String(objChart.getItemsPropertyIDs(itemID));
var arrPropIDs = props.split(',');
var propertyHTML="<table cellpadding=0 cellspacing=0><tr><td height='30' bgcolor='#CCCACA'><font size=2 face='Arial' color='#000000'><b>&nbsp;Property</b></font></td><td bgcolor='#CCCACA'><font size=2 face='Arial' color='#000000'><b>&nbsp;Value</b></font></td></tr>";
var bgcolor="#F3EFEF";
var i=0;
for(i=0;i<arrPropIDs.length;i++){
    if(objChart.getPropertyValue(itemID, arrPropIDs[i])!=""){
        if(bgcolor=="#F3EFEF"){
            bgcolor = "white";
        }else{
            bgcolor = "#F3EFEF";
        }
        propertyHTML+="<tr><td bgcolor='"+bgcolor+"' width='200' height='20'>";
        propertyHTML+= "<font size=2 face='Arial' class='quack'>&nbsp;"+objChart.getPropertyDisplayName(itemID, arrPropIDs[i])+"</font>";
        propertyHTML+="</td><td bgcolor='"+bgcolor+"' width='300'>";
        propertyHTML+= "<font size=2 face='Arial' class='quack2'>&nbsp;"+objChart.getPropertyValue(itemID, arrPropIDs[i])+"</font>";
        propertyHTML+="</td></tr>";
    }
}
propertyHTML+="</tr></table>";
propertyWindow(propertyHTML, "Properties");

} 
```

前一个是我如何构建我的表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:53:43.717

如果您不介意使用 jQuery，这可能有效

```
function getNumber(table) {
    // Set the variable, tableNumber to an error message of sorts
    var tableNumber = "No number found";
    // Loop through all cells
    $(table + ' td').each(function(){
        $(this).css('background', 'red');
        // Tell if a cell contains the text, '&nbsp;Contact'
        if ($(this).text().indexOf('Contact') != -1) {
            // set the variable tableNumber to the text of the next cell
            tableNumber = $(this).next().text();

        }
    });
        return tableNumber;

}

var report = getNumber('#number-table'); //for debugging

alert(report); //for debugging 
```

然后调用 getNumber($('#table-id')) 之类的函数，如果没有 id 并且页面上只有一个表，则调用 getNumber($('table')) 之类的函数。

jsFiddle：http: [//jsfiddle.net/5Ggnz/1/](http://jsfiddle.net/5Ggnz/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:00:45.677

如果格式正确，解析任何 HTML 文档的麻烦就会少得多。首先，您应该阅读 HTML 和 CSS。使用[W3C 验证器](http://validator.w3.org/)来发现代码格式错误以及您可以采取哪些不同的做法。通过分离样式和格式，您应该能够使您的 HTML 更清晰，如下所示：

```
<table cellpadding="0" cellspacing="0">
     <tr class="odd">
         <th>Property</th>
         <th>Value</th>
     </tr>
     <tr class="even">
          <td>First Name</td>
          <td>John</td>
     </tr>
     <tr class="odd">
          <td>Contact</td>
          <td>number</td>
     </tr>
     <tr class="even">
          <td>Last Name</td>
          <td>Smith</td>
     </tr>
</table>

<style>
    td {
        color: #000;
        font: Arial;
        font-size: 0.8em;
        height: 20px;
        width: 300px;
        padding-left: 5px;
    }

    th {
        background-color: #CCCACA;
        font-size: 0.8em;
        height: 30px;
        text-align: left;
        padding-left: 5px;
    }

    .even td {
        background-color: white;
    }

    .odd td {
        background-color: #F3EFEF;
    }

    tr td:first-child {
        width: 200px;
    }
</style> 
```

（目前，即使您指定了灰色阴影，由于您正在进行逃逸，该表格仍为我呈现蓝色和绿松石色。）

然后，针对表格中每个“数字”单元格的最简单方法是给它们一个不同的类：

```
<tr>
    <td>Contact</td>
    <td class="phoneNumber">(01) 234 5678</td>
</tr> 
```

然后，您可以使用 JavaScript 在 JavaScript 中定位它`document.getElementsByClassName("phoneNumber")`，或者如果您使用的是 jQuery: `$(".phoneNumber")`。

# ant - Ant concat 排除目录

> ID：11669088
> 
> 赞同：1
> 
> 时间：2012-07-26T12:16:10.460
> 
> 标签：ant, concat

我的应用程序文件夹结构如下所示...

```
-js
    -libs
        -jquery.js
        -jquery-ui.js
    -app.js
    -ui.js 
```

我希望连接 /js 目录中的 .js 文件，而不是 /js/libs 目录中的文件。我正在使用以下代码，但它忽略了排除语句：

```
<concat destfile="${build.dir}/js/foot-${build.major}-${build.minor}.concat.js">
    <fileset dir="${build.dir}/js">
    <exclude name="**/libs/**" />
    </fileset>
</concat> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:54:54.780

`<fileset>`应该指定包含和排除模式。此外，最好指定一个与输入目录 `<concat>`分开的目标目录。`<fileset>`

```
<target name="concat-test">
  <concat destfile="${basedir}/concat.js" fixlastline="yes">
    <fileset dir="${basedir}/js">
      <include name="**/*.js" />
      <exclude name="**/libs/**" />
    </fileset>
  </concat>
</target> 
```

# c# - 如何垂直自动调整winforms datagridview控件的大小，使其行始终可见

> ID：11669092
> 
> 赞同：8
> 
> 时间：2012-07-26T12:16:19.577
> 
> 标签：c#, .net, winforms, datagridview

我有一个`DataGridView`显示有限数量的行，从不超过 5 行。它`DataGridView`被放置在一个`DataRepeater`控件上，因此它通常在屏幕上显示很多次。我想要实现的是，所有网格都被调整为其内容的大小，因此如果其中有 4 或 5 个项目，它们不会显示滚动条，如果只有 1 或 2 个项目，它们不会占用额外的垂直空间。

网格仅包含文本数据。它们是数据绑定控件，因此如果底层数据源发生更改，它们将需要调整大小（我猜该`DataBindingComplete`事件是合适的）。

我怎样才能做到这一点？计算行数是最好的选择吗？提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-26T13:14:23.793

由于您的控件是数据绑定的，因此我会将`Height`DataGridView 上的属性设置为事件中其行高的总和（加上一些边距）`DataBindingComplete`：

```
private void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{
    var height = 40;
    foreach (DataGridViewRow dr in dataGridView1.Rows) {
        height += dr.Height;
    }

    dataGridView1.Height = height;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-06T19:54:03.680

我接受了 hmqcnoesy 的回答并对其进行了扩展，并创建了一个函数来包括宽度。并在任何网格上使用。

注意：在网格上设置 AutoSizeCells = AllCells。

```
 public static DataGridView SetGridHeightWidth(DataGridView grd, int maxHeight, int maxWidth)
    {
        var height = 40;
        foreach (DataGridViewRow row in grd.Rows)
        {
            if(row.Visible)
                height += row.Height;
        }

        if (height > maxHeight)
            height = maxHeight;

        grd.Height = height;

        var width = 60;
        foreach (DataGridViewColumn col in grd.Columns)
        {
            if (col.Visible)
                width += col.Width;
        }

        if (width > maxWidth)
            width = maxWidth;

        grd.Width = width;

        return grd;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:52:22.000

该值可以是任何值。您应该在网格中进行测试以发现设置高度的最佳值。

```
var height = 40; 
```

编辑：

要找到高度的实际值，您需要添加**网格的位置**和**标题的高度**。类似的东西。

```
int height = dgv.Location.Y + dgv.ColumnHeadersHeight;
foreach (DataGridViewRow dr in dgv.Rows) {
   height += dr.Height; // Row height.
}
dgv.Height = height; 
```

# jquery - 计算小计和总jquery

> ID：11669096
> 
> 赞同：1
> 
> 时间：2012-07-26T12:16:39.023
> 
> 标签：jquery

我有一个表单，其中包含发票数量、单价和小计等字段。我想循环并获取每个输入字段的小计，最后得到小计的总和。我怎样才能在 JQuery 上做到这一点？谢谢。

我的代码：

```
$(document).keyup(function(event) {
    var sub_total = 0;
     $("#items .targetfields").each(function() {
         var qty = parseInt($("#quantity").val());
         var rate = parseInt($("#rate").val());
         $(".subtotal").val(qty * rate);
     });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:36:04.023

我修复了你的一些 html（永远不要使用重复的 id）

```
<table id="items">
    <tr class="targetfields"> 
        <td><input type="text" name="quantity" class="quantity" /></td>
        <td><input type="text" name="rate" class="rate" size="5" /></td>
        <td><input type="text" name="sub_total" class="subtotal" /></td> 
    </tr> 
    <tr class="targetfields"> 
        <td><input type="text" name="quantity" class="quantity" /></td>
        <td><input type="text" name="rate" class="rate" size="5" /></td>
        <td><input type="text" name="sub_total" class="subtotal" /></td> 
    </tr> 
</table>

total: <span id="total"></span>
​ 
```

​</p>

这是js

```
$(function() {

    $("#items").keyup(function(event) {
     var total = 0;
     $("#items .targetfields").each(function() {
         var qty = parseInt($(this).find(".quantity").val());
         var rate = parseInt($(this).find(".rate").val());
         var subtotal = qty * rate;
         $(this).find(".subtotal").val(subtotal);
         if(!isNaN(subtotal))
             total+=subtotal;
     });
     $("#total").html(total);
    });

})​ 
```

[看到它住在这里](http://jsfiddle.net/yaMRQ/9/)

# java - java+hibernate webservice - 出现死锁

> ID：11669101
> 
> 赞同：2
> 
> 时间：2012-07-26T12:16:49.413
> 
> 标签：java, hibernate, deadlock

我有一个网络服务 - java/hibernate/mysql/innoDB。我不断收到 apperante 死锁异常。我在网上四处寻找，并尝试了建议但仍然有问题......

我在我的休眠 cfg 中使用以下内容：hibernate.cfg：

```
 <property name="hibernate.connection.driver_class">org.gjt.mm.mysql.Driver</property>
  <property name="connection.autoReconnect">true</property>
  <property name="connection.autoReconnectForPools">true</property>
  <property name="connection.is-connection-validation-required">true</property>
  <property name="hibernate.connection.zeroDateTimeBehavior">convertToNull</property>
  <property name="hibernate.dialect">org.hibernate.dialect.MySQLInnoDBDialect</property>
  <property name="hibernate.show_sql">false</property>
  <property name="hibernate.current_session_context_class">thread</property>
  <property name="hibernate.format_sql">true</property>
  <property name="hibernate.use_sql_comments">true</property>
  <property name="hibernate.query.factory_class">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</property>

  <property name="hibernate.connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>
  <property name="hibernate.c3p0.min_size">5</property>
  <property name="hibernate.c3p0.max_size">50</property>
  <property name="hibernate.c3p0.timeout">1800</property>
  <property name="hibernate.c3p0.max_statements">50</property>
  <property name="hibernate.c3p0.acquire_increment">1</property>   
  <!-- this property forces the revalidation of a connection after the given amount of time (in secs) -->
  <!-- it must be set to LESS than the wait_timout setting for the mysql server (this setting defaults to 28800 secs (8 hours)) -->
  <property name="hibernate.c3p0.idle_test_period">2100</property> 
```

c3p0.properties：

# c3p0.properties

c3p0.testConnectionOnCheckout=true

c3p0.preferredTestQuery = 选择 1;

我得到以下异常：

```
[WARN] com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@1e5161e1 -- APPARENT DEADLOCK!!! Creating emergency threads for unassigned pending tasks!
[WARN] com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@1e5161e1 -- APPARENT DEADLOCK!!! Complete Status: 
    Managed Threads: 3
    Active Threads: 3
    Active Tasks: 
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@60dd0912 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0)
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@4f7eae6c (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1)
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@5ed5d3a (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2)
    Pending Tasks: 
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@22838de0
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@6ad77ed3
Pool thread stack traces:
    Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0,5,main]
        java.net.SocketInputStream.socketRead0(Native Method)
        java.net.SocketInputStream.read(SocketInputStream.java:146)
        com.mysql.jdbc.util.ReadAheadInputStream.fill(ReadAheadInputStream.java:114)
        com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:161)
        com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:189)
        com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2537)
        com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2990)
        com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2979)
        com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3520)
        com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1990)
        com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2151)
        com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2619)
        com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2569)
        com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1521)
        com.mchange.v2.c3p0.impl.NewProxyStatement.executeQuery(NewProxyStatement.java:35)
        com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnection(DefaultConnectionTester.java:73)
        com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.testPooledConnection(C3P0PooledConnectionPool.java:374)
        com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.refurbishIdleResource(C3P0PooledConnectionPool.java:310)
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask.run(BasicResourcePool.java:1999)
        com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
    Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1,5,main]
        java.net.SocketInputStream.socketRead0(Native Method)
        java.net.SocketInputStream.read(SocketInputStream.java:146)
        com.mysql.jdbc.util.ReadAheadInputStream.fill(ReadAheadInputStream.java:114)
        com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:161)
        com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:189)
        com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2537)
        com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2990)
        com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2979)
        com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3520)
        com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1990)
        com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2151)
        com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2619)
        com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2569)
        com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1521)
        com.mchange.v2.c3p0.impl.NewProxyStatement.executeQuery(NewProxyStatement.java:35)
        com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnection(DefaultConnectionTester.java:73)
        com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.testPooledConnection(C3P0PooledConnectionPool.java:374)
        com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.refurbishIdleResource(C3P0PooledConnectionPool.java:310)
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask.run(BasicResourcePool.java:1999)
        com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
    Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2,5,main]
        java.net.SocketInputStream.socketRead0(Native Method)
        java.net.SocketInputStream.read(SocketInputStream.java:146)
        com.mysql.jdbc.util.ReadAheadInputStream.fill(ReadAheadInputStream.java:114)
        com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:161)
        com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:189)
        com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2537)
        com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2990)
        com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2979)
        com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3520)
        com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1990)
        com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2151)
        com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2619)
        com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2569)
        com.mysql.jdbc.StatementImpl.executeQuery(StatementImpl.java:1521)
        com.mchange.v2.c3p0.impl.NewProxyStatement.executeQuery(NewProxyStatement.java:35)
        com.mchange.v2.c3p0.impl.DefaultConnectionTester.activeCheckConnection(DefaultConnectionTester.java:73)
        com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.testPooledConnection(C3P0PooledConnectionPool.java:374)
        com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.refurbishIdleResource(C3P0PooledConnectionPool.java:310)
        com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask.run(BasicResourcePool.java:1999)
        com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)

[WARN] Task com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@60dd0912 (in deadlocked PoolThread) failed to complete in maximum time 60000ms. Trying interrupt().
[WARN] Task com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@4f7eae6c (in deadlocked PoolThread) failed to complete in maximum time 60000ms. Trying interrupt().
[WARN] Task com.mchange.v2.resourcepool.BasicResourcePool$AsyncTestIdleResourceTask@5ed5d3a (in deadlocked PoolThread) failed to complete in maximum time 60000ms. Trying interrupt().
[WARN] com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@1e5161e1 -- APPARENT DEADLOCK!!! Creating emergency threads for unassigned pending tasks!
[WARN] com.mchange.v2.async.ThreadPoolAsynchronousRunner$DeadlockDetector@1e5161e1 -- APPARENT DEADLOCK!!! Complete Status: 
    Managed Threads: 3
    Active Threads: 3
    Active Tasks: 
        com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask@555214b9 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0)
        com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask@7fcea971 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2)
        com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask@58d67b44 (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1)
    Pending Tasks: 
        com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask@6936daec
        com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@105ef1eb
        com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@495c83b2
        com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@58ca40be
        com.mchange.v2.resourcepool.BasicResourcePool$AcquireTask@4660a77c
Pool thread stack traces:
    Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0,5,main]
        com.mysql.jdbc.StatementImpl.close(StatementImpl.java:550)
        com.mchange.v2.c3p0.impl.NewPooledConnection.cleanupUncachedStatements(NewPooledConnection.java:651)
        com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:539)
        com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:234)
        com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:470)
        com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:964)
        com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
    Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2,5,main]
        com.mysql.jdbc.StatementImpl.close(StatementImpl.java:550)
        com.mchange.v2.c3p0.impl.NewPooledConnection.cleanupUncachedStatements(NewPooledConnection.java:651)
        com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:539)
        com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:234)
        com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:470)
        com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:964)
        com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)
    Thread[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1,5,main]
        com.mysql.jdbc.StatementImpl.close(StatementImpl.java:550)
        com.mchange.v2.c3p0.impl.NewPooledConnection.cleanupUncachedStatements(NewPooledConnection.java:651)
        com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:539)
        com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:234)
        com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:470)
        com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:964)
        com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547)

[WARN] Task com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask@555214b9 (in deadlocked PoolThread) failed to complete in maximum time 60000ms. Trying interrupt().
[WARN] Task com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask@7fcea971 (in deadlocked PoolThread) failed to complete in maximum time 60000ms. Trying interrupt().
[WARN] Task com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask@58d67b44 (in deadlocked PoolThread) failed to complete in maximum time 60000ms. Trying interrupt(). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:27:26.610

你想做什么？在我看来，有一些东西可以让你的数据库连接保持打开状态。结果 c3p0 试图获得更多的连接来处理额外的请求。

# javascript - 使用js在HTML5 Canvas中绘制不对称椭圆？

> ID：11669104
> 
> 赞同：2
> 
> 时间：2012-07-26T12:17:01.427
> 
> 标签：javascript, html, geometry

我一直在尝试使用 HTML5 Javascript 绘制不对称椭圆，

我的第一次尝试是使用圆弧和比例，但我只能使用它生成对称椭圆，

所以我的第二次尝试是使用贝塞尔曲线。主要问题是我不明白它们是如何工作的......

最后，我得到了这样的结果：

[http://jsfiddle.net/eLEUD/4/](http://jsfiddle.net/eLEUD/4/)

它可以工作，但我在那里硬编码了修改器，一旦你改变了点，它就会停止工作。虽然我不知道如何计算它们......

谁能进一步帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:48:07.417

bezierCurveTo 函数实际上绘制了[三次贝塞尔曲线的最后三个节点](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)

三次贝塞尔曲线需要绘制 4 个点：

*   P1：曲线的起点。
*   P2：曲线朝向但不接触的第一个点。
*   P3：曲线走向但不接触的第二个点。
*   P4：曲线的终点。

鉴于此，代码如下所示（假设 P1,P2,P3,P4 是点结构）：

```
//move to the first part of the curve
context.moveTo(P1.x, P1.y);
//draw the curve.
context.bezierCurveTo(P2.x, P2.y,
                  P3.x, P3.y,
                  P4.x, P4.y); 
```

bezierCurveTo 函数将画布上下文所在的任何点视为第一个锚点。

至于画你的蛋形，你只需要摆弄它，直到你对你正在寻找的任何形状感到满意。

我希望这会有所帮助。

* * *

**编辑**

看起来你可能正试图在钻石形状*内*画一个蛋形......所以我已经更新了你的小提琴来做到这一点。在这里查看绿色蛋的形状：

[http://jsfiddle.net/blesh/zVWrH/1/](http://jsfiddle.net/blesh/zVWrH/1/)

我所做的是计算钻石周围的其他点：东北、东北偏北等，并将它们用作锚点。

我希望这会有所帮助。

# forms - 如何在自己的行中显示每个人的标签和单选选项？

> ID：11669109
> 
> 赞同：0
> 
> 时间：2012-07-26T12:17:12.313
> 
> 标签：forms, struts2, label, line, radio

我正在使用Struts2。默认情况下，使用 struts 表单时，标签和选项显示在同一行。**我怎样才能使标签在一行中，并且每个收音机选择在其自己的行中？**CSS有办法吗？我需要你们的帮助。这是我的表格的样子。谢谢！

```
<s:form action="resultAction" namespace="/"> 
  <s:radio label="Gender" name="yourGender" list="genders" value="defaultGenderValue" />  
  <s:submit value="submit" name="submit" />
</s:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:37:38.370

默认情况下，您使用哪个主题 struts2 使用 xHtml 主题并生成某些表格集来呈现视图。Struts2 使用自由标记模板来呈现标签的 HTML，您可以根据自己的选择自定义主题，也可以创建自己的主题。

尝试使用不会生成任何表格或 div 并为您呈现纯 HTML 的简单主题，您是否可以应用自定义 CSS 来更改/自定义视图。

您可以为整个应用程序设置每页主题，以每页为基础在头部添加以下行

```
<s:set name="theme" value="'simple'" scope="page" /> 
```

对于整个应用程序，您可以在 struts.properties 文件或 struts.xml 文件中设置，但第二个更可取。

```
<constant name="struts.ui.theme" value="simple" /> 
```

如果你想玩主题这里是相同的链接

*   [struts-2-主题](http://struts.apache.org/2.2.1/docs/struts-2-themes.html)

# php - 如何避免 Zend_Navigation 中的臃肿？

> ID：11669115
> 
> 赞同：3
> 
> 时间：2012-07-26T12:17:31.127
> 
> 标签：php, zend-framework, zend-navigation, zend-acl

我一直在研究将 Zend_Navigation 与 Zend_Acl 结合使用来管理我正在开发的新应用程序中的导航和访问权限。

真正困扰我的一件事是，我看到的示例最终生成了一个巨大的 XML 文件，其中包含应用程序中**所有**可能的导航项。在每个请求上加载这个文件似乎是主要的性能瓶颈，必须有更好的方法。我意识到我可以通过使用 memcached 或其他缓存机制来缓解大部分问题，但我觉得应用程序本身应该以最优化的方式编写，然后才添加缓存。让某些东西变得缓慢而臃肿并依靠缓存来清理我的脏工作是没有意义的。

我在这个 ZF 应用程序中使用了模块化设置，因此每个模块都有一个独特的引导程序。我考虑过创建特定于模块的导航 XML 文件并加载特定的文件，但我不确定这是否是最好的方法。

在可能有数百条导航路径的大型应用程序中使用 Zend_Navigation 的建议方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:33:40.320

我不会将此称为建议的方法，这只是两年前我基本上遇到相同问题时的工作方式。简而言之：我在每个页面上都有我需要的 XML 中的所有路径。所有其他路径都是在运行时添加的。只有这样我才添加 ACL。

首先，请注意 Zend_Navigation 中的 ACL 只管理导航的呈现。它不提供或更好地保证对您的应用程序的访问控制。菜单中将缺少某个链接，但如果用户知道正确的路径，他/她仍然可以访问该资源。当然，您可以使用导航对象中的 ACL 信息来固定您的应用程序，但我相信有更聪明的方法主要是将 ACL 直接合并到控制器和模型中。

其次，对于您的主要问题，我的导航 XML 文件仅包含直到第二级的最基本结构，即我一直需要的菜单。这也或多或少是我拥有控制器和动作的原因。由 params 产生的任何路径都会在运行时添加。因此，我什至没有将 ACL 包含到 XML 中，而是在运行时将其注入。仅仅是因为只有这样我才能拥有完整的扩展**当前分支**及其所有路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:00:19.187

我没有使用 XML 来生成导航。可以在运行时使用数组表示法在 php 中添加您的页面。

使用模块，您可以在注册表中设置导航对象，在每个模块中都有一个添加其页面的模型，以及一个在 preDispatch 调用每个模块的导航模型的插件。

# cocos2d-iphone - ccTouchesEnded 函数一次又一次地调用自己，即使是单点触摸也是如此。

> ID：11669122
> 
> 赞同：0
> 
> 时间：2012-07-26T12:17:49.673
> 
> 标签：cocos2d-iphone

我有一个三层的场景，并且在最顶层启用了触摸。在触摸该层一次时，会多次调用 ccTouchesEnded（几乎 15 次）。我无法追踪这种行为的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:39:30.870

我最好的猜测是：你确定这一层只添加一次吗？如果该层类的实例已添加 15 次，它将解释您看到的问题。在添加特定层的位置设置断点，以查看它是否恰好被多次添加。

# jquery - 将 href 添加到 JQuery 对话框按钮

> ID：11669123
> 
> 赞同：3
> 
> 时间：2012-07-26T12:17:49.847
> 
> 标签：jquery, jquery-ui

我敢肯定它很简单，但找不到任何东西。我有一个对话框：

```
$(function() {

    $(".dialog").hide();
    $( "#dialog:ui-dialog" ).dialog( "destroy" );

    $( "#dialog-message" ).dialog({
        modal: true,
        autoOpen:false,
        width: 800,
        buttons: { "Accept": function() {alert("OK");}, "Close": function() {$(this).dialog("close");}}
    });

    $(".button").mousedown(function () {
            $("#dialog-message").show().dialog("open");
    });
}); 
```

我需要的是使“接受”按钮链接到任何网址。此时它显示警报。提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T12:20:23.180

像这样的东西？

```
"Accept": function() {window.location.href = "http://www.google.com";} 
```

# jquery - 有没有办法将单词与数组中的元素进行比较

> ID：11669127
> 
> 赞同：0
> 
> 时间：2012-07-26T12:17:58.587
> 
> 标签：jquery, xcode, html

我正在创建一个游戏，我需要将一个单词（玩家通过挑选字母制作的）与字典文本文件中的一个单词进行比较。我已经将文本文件中的所有单词放入一个数组中。

```
var words = [];
$(document).ready(function()
{
    $.get("greaterthan3.txt", function(txt)
            {
                words = txt.split("\n"); //get array of all words

            });
}); 
```

每当我尝试将创建的单词 (var completedWord = " ") 与数组中的单词进行比较时，什么都没有发生。以下代码位于按钮单击函数内。

```
 if(completedWord == words[0])
  {
      alert("correct word");
  } 
```

有什么方法可以将单词与数组中的元素进行比较？

非常感谢

///////////////////////////////////////// ///////////////////////

大家好，这是我的按钮单击方法的新代码。

```
$(function()
{
$("#playButton").on("click",function()
              {
                  for(var k = 0; k < words.length; k++)
                  {
                     if(completedWord == words[k])
                     {
                        alert("hi");
                     }

                  }

                  if($.inArray(completedWord,words) > -1)
                  {
                     alert(completedWord + " is in array");
                  }

              });

}); 
```

我已经意识到，当检查我的 completedWord 变量是否在我的数组变量中时，如果我在我的文本文件中输入最后一个单词，就会显示警报。

有什么方法可以修复它，以便它可以检查我的数组中的所有单词，而不仅仅是我数组的最后一个元素。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:21:36.677

我建议使用[jQuery.inArray 函数](http://api.jquery.com/jQuery.inArray/)来查看您的单词数组是否包含用户猜测的单词。

```
var words = ["one", "two", "banana", "floor", "three"];
var guess = "banana";
if($.inArray(guess, words) > -1) {
    alert(guess + " is in the array!");
} 
```

`$.inArray(item, array)``item`返回in的索引`array`- 如果`item`数组中不存在则返回 -1。

工作示例：http: [//jsfiddle.net/BZUET/12/](http://jsfiddle.net/BZUET/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:22:34.980

为此，您可以使用 Hashtable.Contains() 或 Dictionary.ContainsValue()。

# python - 将列表及其值从一个类传递到 Python 中的另一个线程

> ID：11669129
> 
> 赞同：0
> 
> 时间：2012-07-26T12:18:02.813
> 
> 标签：python, multithreading, class

我正在编写一段代码，其中我有一个类`A`和两个线程`B`，并且`C`.

我创建了`a`一个`A`. 然后我启动两个线程，`B`然后是`C`.

`B``func_name`在`A`by中调用一个函数`a.func_name()`。到目前为止一切顺利。

`C`另一方面，需要访问作为列表的结果，例如在类中`list_a`定义并由实例访问。`func_name()``A``a`

我必须使用这样的 for 循环来匹配一组字符串，

```
if self.string_variable in a.list_a:
    print "found" 
```

但它给了我一个错误：

> `A`实例没有属性`list_a`

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:38:02.047

您将需要某种同步原语——具体哪一种取决于您的设计和要求的更多细节。

假设列表`a.list_b`只创建一次，以后不修改，线程`C`需要等到`a.func_name()`返回。这可以通过`threading.Event`向`A`. 中`A.__init__()`，添加

```
self.event = threading.Event() 
```

在末尾`A.func_name()`添加

```
self.event.set() 
```

在线程`C`尝试访问之前`a.list_b`，添加

```
a.event.wait() 
```

等到`a.func_name()`在线程中完成`B`。

一般来说，线程之间的同步是一个复杂的话题，也是一个容易出错的任务。只有当你真的需要时，你才应该这样做。

# java - java中另一个包中的图像路径读取

> ID：11669132
> 
> 赞同：0
> 
> 时间：2012-07-26T12:18:09.563
> 
> 标签：java, image, path

**我在hello** /com/abc/xyz/Test.java包中有我的 java 类

在这个**“Test.java”**文件中，我正在编写代码来生成 HTML。其中包含图像标签。类似的东西

```
String str ="<Table><img src=""></img></table> 
```

我的图像在另一个包中，即**hello123** /web/img/myImg.jpg。

如何在我的 Test.java 文件中访问此图像。

如果我像“c://myproject/hello123/web/img/myImg.jpg”这样的硬编码路径，它的工作原理。但是这条路径在其他地方和其他环境中不会是一致的。

我尝试将我的图像与我的 java 文件放在同一个文件夹中......没有用。

任何机构都可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:33:28.797

您可以使用`Class`方法`getResource` [http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourcejava.lang.String)](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResource%28java.lang.String%29 "获取资源") 。这将相对于您的类路径加载，因此只要图像在类路径上，您就可以找到它。

代码如下所示：

```
getClass().getResource("/path/to/image") 
```

获取图像 URL（如果需要，您可以将其转换为文件路径）

# jquery - 边框半径不适用于 chrome 中的相对定位图像

> ID：11669138
> 
> 赞同：1
> 
> 时间：2012-07-26T12:18:32.970
> 
> 标签：jquery, html, css, google-chrome

我有一个具有以下样式的 div：

```
overflow:hidden;
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px; 
```

里面有一个图像，但高度与另一个 div 的高度相对应，包含文本。

如果 div 包含的文本不足，则图像在第一个 div 内向上移动。因为它已经隐藏了溢出，所以你不会看到这个。所有这一切都很好，直到我想给第一个 div 一个边界半径，它只是没有显示出来。这只发生在 chrome、firefox 和 IE 中它确实有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:29:57.600

我不确切知道您想要达到什么效果，但这是一个通过将图像设置为背景图像在 Chrome（和其他）中工作的示例。

[http://jsfiddle.net/dnsyn/1/](http://jsfiddle.net/dnsyn/1/)

还有一个将半径应用于图像：

[http://jsfiddle.net/dnsyn/2/](http://jsfiddle.net/dnsyn/2/)

此外，该`border-radius`属性在所有支持它的浏览器中都“无前缀”，因此您只需要：

```
 border-radius: 20px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:05:51.150

这是 div 内图像的边界半径，我不完全理解您的问题，所以修改我制作的这个 JSFiddle 以向我展示它的实际含义。

[http://jsfiddle.net/JGQwp/](http://jsfiddle.net/JGQwp/)

# c# - 如何在不先将父实体持久化到数据库的情况下构建一对多实体的集合？

> ID：11669140
> 
> 赞同：0
> 
> 时间：2012-07-26T12:18:34.857
> 
> 标签：c#, .net, asp.net-mvc, entity-framework

不确定我是否完全遗漏了一些东西，但是，我有一个使用 EF 和基于角色的身份验证的典型 MVC Web 应用程序，例如：

```
public class User
{
    public int UserId { get; set; }
    public string Name { get; set; }
    public IList<Role> UserRoles { get; set; }
}

public class Role
{
    public int RoleId { get; set; }
    public string Name { get; set; }
    public IList<User> RoleUsers { get; set; }
} 
```

理想情况下，在上述情况下，我想要一个编辑屏幕来更新用户名，该用户名还允许对用户角色进行添加/删除操作，例如，带有名称输入字段的表单，每个用户角色的表行有一个删除按钮，一个角色下拉列表有一个添加按钮。

在发出保存请求之前，如何在不将角色添加/删除持久化到数据库的情况下对视图模型（用户）执行编辑？

最好考虑添加操作。如果插入一个新用户，如何在不先插入用户的情况下构建该用户角色的集合？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:08:34.227

在对此进行了更多研究之后，Phil Haacked 写了一篇关于将视图模型绑定到列表的文章，可在此处找到...

[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

我可能已经使用这种方法来创建一个表单，其中包含实体属性的输入和使用上述子对象方法绑定的关联输入集合。虽然我想这可能需要父实体上的每个导航属性的重复列表属性，这对我来说是一个打击。

如果添加具有复杂对象集合的实体，此方法也无法解决您如何在同一视图上优雅地输入复杂对象的所有属性（因为父实体仅存在于内存中） - 最简单的方法可能是包含编辑表单的部分视图？

为简单起见，我选择将编辑视图更改为仅编辑实体的基本属性，并为重定向到相关控制器的子对象提供单独的链接，使用用户示例，添加操作将如下所示：

*   用户/编辑/{user_id} 视图 -> 输入用户名、电子邮件等。
*   单击保存 -> 重定向到用户/索引或用户/详细信息/{user_id}
*   单击后，此用户可以使用“管理角色”链接 -> 重定向到 /Role/Index/{user_id}
*   页面显示此用户的角色表，能够添加/编辑等。

**编辑：**

另外，以防万一这对其他人有帮助。

我将`/Role/Index`操作设置为默认列出所有角色，但它也接受 UserId 参数 ( `/Role/Index/{user_id}`)。当指定 UserId 时，该操作会返回一个不同的视图 ( `/Role/IndexForUser`)，其数据模型是`User`实体 - 它与默认`Index`视图相同，但仅列出与用户关联的角色，并显示更多上下文链接，例如“将用户从角色'。

# xaml - texbox 上的触发器获得焦点

> ID：11669142
> 
> 赞同：0
> 
> 时间：2012-07-26T12:18:40.890
> 
> 标签：xaml, mvvm, triggers, textbox, visibility

我有应该隐藏的虚拟键盘，我只想在文本框获得焦点时显示它。我正在使用 mvvm，所以我不想在后面的代码上编写任何代码，所以如果可能的话，我想制作一些触发器，它可以观看所有 texbox 并在我的虚拟键盘上设置可见性。或者我可以在控制器中做到这一点，但我找不到如何获得当前集中控制的方法

```
<DockPanel FocusManager.FocusedElement="{Binding FocusedElement, Mode=TwoWay}" 
```

不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:14:28.383

不幸的是没有找到使用触发器的解决方案，但至少我可以使用扩展获得 IsFocused 值，从这里得到它[从视图模型（C#）中将焦点放在 WPF 中的文本框上](https://stackoverflow.com/questions/1356045/set-focus-on-textbox-in-wpf-from-view-model-c-wpf)

# java - LinkedHashMap removeEldestEntry：删除了多少元素？

> ID：11669149
> 
> 赞同：2
> 
> 时间：2012-07-26T12:19:10.503
> 
> 标签：java, linkedhashmap

`LinkedHashMap`实现 LRU 缓存看起来很棒。它在链表管理方面有一些开销并且不是线程安全的，但是它简化了实现，我可以在我的代码中处理这些。

我有一个问题，到目前为止我还没有找到答案，如果实现了 removeEldestEntry 并且 put 发现列表已满，LinkedHashMap 从列表中删除了多少元素。

它是否只删除一个元素？或总大小的某个百分比。我担心的是，如果它只删除一个元素来放置新元素，那么它就是一个真正的性能问题。正如我所见，重新哈希操作非常昂贵。

请有人建议它是如何工作的，如果我可以使用 InitialCapacity、LoadFactor 或任何其他方式管理这些要删除的元素计数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T12:22:20.013

`LinkedHashMap`实现*最简单*的缓存很好，但对于更高级的要求，它可能并不理想。

`true`从返回`removeEldestEntry`将导致*单个、最老的条目*被删除，没有办法将其调整为多个元素。

也许像[番石榴这样的东西](https://code.google.com/p/guava-libraries/) [可能是你正在寻找的东西](https://code.google.com/p/guava-libraries/wiki/CachesExplained#Applicability)。[`CacheBuilder`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/cache/CacheBuilder.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:38:17.627

> LinkedHashMap 在实现 LRU 缓存方面看起来很棒。它在链表管理方面有一些开销

这适用于所有 LRU 缓存。

> 并且不是线程安全的

您可以使用 Collections.synchronizedMap()

> 我有一个问题，到目前为止我还没有找到答案，如果实现了 removeEldestEntry 并且 put 发现列表已满，LinkedHashMap 从列表中删除了多少元素。

它*删除最旧的条目*。即只有一个。

来自 LinkedHashMap 的来源

```
 if (removeEldestEntry(eldest)) {
        removeEntryForKey(eldest.key); 
```

> 我担心的是，如果它只删除一个元素来放置新元素，那么它就是一个真正的性能问题。

它不是。

> 正如我所见，重新哈希操作非常昂贵。

重新散列仅在容量增长时发生，而不是在删除条目时发生。

# php - mysql 喜欢带逗号的值

> ID：11669153
> 
> 赞同：0
> 
> 时间：2012-07-26T12:19:30.500
> 
> 标签：php, mysql, sql-like

基本上，表的设置是这样的：

```
+-----------+----------+-------------+
|   land    |   city   |  perimeter  |
+-----------+----------+-------------+
|  America  |  Kansas  |      1      |
|  Britain  |  Berlin  |      4      |
|  Japan    |  Tokyo   |      5      |
+-----------+----------+-------------+ 
```

我目前的查询：

```
$query = "SELECT land, city, perimeter FROM agents WHERE land LIKE ? OR city LIKE ? OR perimeter LIKE ?";
$params = array("%China%","%Kansas%","%6%"); 
```

这个查询有效，它会返回`America,Kansas,1`。但是，如果我`params`将等于：

```
$params = array("%China%","%Beijing,London,Kansas,Bali%","%6%"); 
```

这不会返回任何东西。如果这些逗号分隔值中存在一项，我如何`LIKE`在用逗号分隔的值中使用以匹配至少一项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:27:48.653

而不是`LIKE`使用`REGEXP`（更多信息在这里：[http](http://dev.mysql.com/doc/refman/5.0/en/regexp.html) ://dev.mysql.com/doc/refman/5.0/en/regexp.html ）。

```
$query = "SELECT land, city, perimeter FROM agents
   WHERE land REGEXP ? OR city REGEXP ? OR perimeter REGEXP ?";
$params = array("^China$","^Beijing|London|Kansas|Bali$","^6$"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:29:46.477

您不能传递逗号分隔的值并期望它们被参数函数正确分组。

您的查询返回：

`SELECT land, city, perimeter FROM agents WHERE land LIKE 'China' OR city LIKE 'Beijing,London,Kansas,Bali' OR perimeter LIKE '6'`

这显然不是你想要的。

您要做的将需要检查是否有任何参数是可爆炸数组，例如`if(count(explode(',', $myArray))>1)`查看传递给查询的任何变量是否是包含多个字段的数组。如果是，您希望运行一个不同的查询字符串来`or`正确检查多个语句。

# javascript - javascript - 警报在 IE 8 中不起作用

> ID：11669154
> 
> 赞同：0
> 
> 时间：2012-07-26T12:19:32.870
> 
> 标签：javascript, internet-explorer-8, alert, onsubmit

在我的网络应用程序中，我在 jsp 文件中添加了 javascript。
警报消息在 Firefox 中弹出。但是警报窗口在 IE 8 中不起作用。以下是我正在使用的 javascript。
谁能告诉我如何在 IE 8 中进行这项工作？

```
 function doSubmit() {
        var checkbox = document.getElementById("terms");
        if (!checkbox.checked) {
          alert("error message goes here.");
          return false;
      } else {
      return true;
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:31:29.353

工作正常，这是你如何使用它！

```
<html>

<head>
<script type="text/javascript">

    function doSubmit() {
        var checkbox = document.getElementById("vehicle");
        if (!checkbox.checked) {
          alert("error message goes here.");
          return false;
      } else {
        return true;
      }
    }

</script>
</head>

<body>

    <form name="frm1" onsubmit=" return doSubmit()">
        <input type="checkbox" name="vehicle" value="Bike" />Checked<br />
        <input type="submit" value="Submit" />
    </form>

</body>
</html> 
```

按照建议添加更正。

# php - 在foreach循环PHP中添加数字

> ID：11669161
> 
> 赞同：0
> 
> 时间：2012-07-26T12:19:49.280
> 
> 标签：php, loops, foreach, opencart

我有一个`foreach loop`列出了 OpenCart 中的许多产品。我想在一个名为的变量中返回总计`$subTotal`- 但是它只返回最后一个产品价格，如果它是`=+`或`+++`所有返回错误。

**更新**- 我应该补充一下，例如，它`$product['total']`会单独回显（不仅仅是回显货币符号和数字）`£100``&pound;100`

```
<?
####
// START ***********
####
$subTotal=0;
foreach ($products as $product) {
    $subTotal=$product['total'];
?>

 <!--<?=$product['total']?>-->

<?
    $subTotal++;
}
####
// END ***********
####
?>
<?=$subTotal?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T12:22:29.800

**编辑**

你可以这样做

```
<?php 
// create vars
$x=$product['total'];

// remove pound signs etc
$x=str_replace("£", "", $x);
$x=str_replace("&pound;", "", $x);

// loop and or add to the variable subTotal
$subTotal += $x;

foreach ($products as $product) {
    $subTotal+= preg_replace('/[^\d\.]/','',$product['total']);

}
echo $subTotal;
?> 
```

在你的 foreach 语句中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:26:47.177

```
$subTotal += $product['total']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:27:56.813

尝试`$subTotal += $product['total'];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T12:28:23.557

```
foreach ($products as $product) {
    $subTotal += $product['total'];
?> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-26T12:28:02.543

问题是您设置`$subTotal`为等于`$product['total']`。您需要添加`$product['total']`到`$subTotal`.

```
foreach ($products as $product) {
    $subTotal=+$product['total']; ?>
} 
```

# jquery - iframe 和 Cookie

> ID：11669162
> 
> 赞同：0
> 
> 时间：2012-07-26T12:19:51.750
> 
> 标签：jquery, iframe, cookies

我很感兴趣如何为 iframe 编写 cookie？

例如，我的网站上有 3 个 iframe，当用户检查其中 1 个时，我需要将其保存（写入）到 cookie 中，当客户回来时，相同的 iframe（他/她选择并且我们在 cookie 中写入）站点应该展示？

谢谢

* * *

感谢您的意见，但问题没有解决，请参阅我的最后一条评论，我解释了我真正想做的事情..

“没有成功:(它不工作，我可以向你展示工作示例，你会明白我在做什么:) 如果你点击 Настройки качества，请参阅 flowplayer 底部的 tvrain.ru - 这将是开放的品质，当您选择其中一个时，它会写在 cookie 中，下次对我来说，它的质量会相同……所以这是我的任务：请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:52:10.163

查看[https://github.com/carhartl/jquery-cookie/](https://github.com/carhartl/jquery-cookie/)

编写和读取 cookie 很容易，请参阅示例。

我不确定您对 iframe 的要求是什么？

编辑

在播放器页面上设置 cookie

```
$.cookie('quality_cookie', 'the_value', { expires: 7, path: '/' }); 
```

然后在主页上读取cookie

```
$.cookie('quality_cookie'); 
```

并相应地设置默认值..更多jquery :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:52:22.973

你用的是什么服务器？IIS 还是 Apache？

IIS 中有一个跨域 cookie 技巧，要求您在服务器上设置受信任的标头：

[http://programmingschools.blogspot.com.au/2007/05/create-cookies-cross-domain.html](http://programmingschools.blogspot.com.au/2007/05/create-cookies-cross-domain.html)

我个人不建议使用这个，我在一个网站上工作了 4 年，使用这种方法设置 7 个跨域 cookie，管理起来简直是一场噩梦。

或者，如果你有这样的事情：

www.myparenturl.com

将此显示在 iframe 中：

www.myiframeurl.com

您可以在 iframe 中设置一个 ajax 调用（或者甚至只是一个直接的标签）来轮询父 url 并告诉它要将 cookie 设置为哪个域，例如

www.myparenturl.com/set-cookie?domain=iframe1

这将消除设置跨域 cookie 的需要。

# php - 内爆函数和strtotime之间的冲突

> ID：11669163
> 
> 赞同：0
> 
> 时间：2012-07-26T12:19:52.513
> 
> 标签：php

我在这段代码中有一个问题：

```
$month = $_POST['month'];
$day = $_POST['day'];
$year = $_POST['year'];

function dateImplodeFunction($year, $month, $day){
  $array = array($year, $month, $day);
  $date = date('Y-m-d', strtotime( implode("-", $array)));
  return $date;
} 
```

基于上面的代码，我将创建一个函数，其中有 3 个输入月、日和年。当我输入这 3 个变量时，这些变量将传递给此函数，组合这 3 个变量并使用 implode 函数根据您指定的日期创建格式。例如，假设我输入 10/01/1989，它将回显显示 10/01/1989。

我还需要对数据库使用日期函数和 strtotime 函数（请参阅上面的代码），将我的日期字段设置为日期数据类型。

这里的问题是，如果我输入 10-01-1989，它会返回/显示 01-01-1970 的值，为什么？我发现由于测试，strtotime 和 implode 函数之间存在冲突。我已经通过谷歌搜索，但没有找到。我希望你能帮助我。提前致谢。

抱歉英语不好=P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:30:13.117

我只会使用[`Date Time class`](http://us3.php.net/datetime).

```
$month = '07';
$day = '26';
$year = '2012';

$timezone = new DateTimeZone('America/New_York');
$date = new DateTime( "{$year}-{$month}-{$day}", $timezone );
print $date->format('Y-m-d H:i:s');

# Output: 2012-07-26 00:00:00 
```

[http://codepad.org/VxwDHPeU](http://codepad.org/VxwDHPeU)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:26:54.480

你应该使用`mktime`：

```
function dateImplodeFunction($year, $month, $day)
{
    return date('Y-m-d', mktime(0, 0, 0, $month, $day, $year));
} 
```

[mktime 的文档在这里](http://fr.php.net/manual/en/function.mktime.php)

# r - 将大型异常文件导入 R

> ID：11669165
> 
> 赞同：11
> 
> 时间：2012-07-26T12:20:00.467
> 
> 标签：r, import, large-files

第一次在这里发帖，所以我会尽量让自己清楚地了解我需要的帮助。我对 R 相当陌生，这是我第一次真正的独立编程经验。

我有大约 2.5 年的股票报价数据，每天都有自己的文件。这些文件是 .txt，包含大约 20-3000 万行，我猜每个平均 360mb。我现在一次处理一个文件。我不需要这些文件包含的所有数据，我希望我可以使用编程来最小化我的文件。

现在我的问题是我在编写正确的代码时遇到了一些困难，所以 R 理解我需要它做什么。

让我首先向您展示一些数据，以便您了解格式。

```
M977
R 64266NRE1VEW107 FI0009653869 2EURXHEL 630 1
R 64516SSA0B 80SHB SE0002798108 8SEKXSTO 40 1
R 645730BBREEW750 FR0010734145 8EURXHEL 640 1
R 64655OXS1C 900SWE SE0002800136 8SEKXSTO 40 1
R 64663OXS1P 450SWE SE0002800219 8SEKXSTO 40 1
R 64801SSIEGV LU0362355355 11EURXCSE 160 1
M978 
```

另一个数据片段：

```
M732
D 3547742
A 3551497B 200000 67110 02800
D 3550806
D 3547743
A 3551498S 250000 69228 09900 
```

如您所见，每一行都以一个字母开头。每个字母表示线条的含义。例如`R`表示订单簿目录消息，`M`表示上一秒后的毫秒数，`H`表示股票交易动作消息。总共使用了 14 种不同的字母。

我已经使用该`readLines`函数将数据导入 R。但是，当我想处理数据时，R 似乎需要很长时间才能处理。

现在我想写一些 If 函数来说明如果第一个字母是`R`从偏移量 1 到 4 代码表示市场段标识符等，并让 R 向这些添加列，这样我就可以在更多的情况下处理数据结构时尚。

导入此类数据以及创建某种形式的结构的最佳方式是什么 - 例如，使用数据行中的唯一 ID 信息一次分析 1 只股票。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:16:58.690

你可以尝试这样的事情：

```
options(stringsAsFactors = FALSE)

f_A <- function(line,tab_A){
  values <- unlist(strsplit(line," "))[2:5]
  rbind(tab_A,list(name_1=as.character(values[1]),name_2=as.numeric(values[2]),name_3=as.numeric(values[3]),name_4=as.numeric(values[4])))
}

tab_A <- data.frame(name_1=character(),name_2=numeric(),name_3=numeric(),name_4=numeric(),stringsAsFactors=F)

for(i in readLines(con="/home/data.txt")){
    switch(strsplit(x=i,split="")[[1]][1],M=cat("1\n"),R=cat("2\n"),D=cat("3\n"),A=(tab_A <- f_A(i,tab_A)))
} 
```

并替换`cat()`为为每种类型的 data.frame 添加值的不同函数。使用函数的模式`f_A()`为表结构构造其他函数和相同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T13:59:36.473

您可以将`readLines()`命令与正则表达式结合使用。要获取有关正则表达式的更多信息，请查看 R 帮助站点`grep()`

```
> ?grep 
```

因此，您可以浏览所有行，检查每一行的含义，然后根据需要处理或存储该行的内容。（正则表达式也可用于将数据拆分为一行...）

# objective-c - 使用 PayPal 处理多件商品购买

> ID：11669168
> 
> 赞同：1
> 
> 时间：2012-07-26T12:20:31.357
> 
> 标签：objective-c, ios, paypal

我正在将 PayPal 与我的应用程序集成。我能够通过简单的付款方式处理单件商品的购买。对于以下情况，我应该采用哪种方法有点困惑：

将多个项目添加到购物车。添加到购物车的每件商品可能不超过一个，也可能不超过一个。在简单的方法中，我能够创建一个 PayPalPayment 对象并将值分配给 PayPalPayment 的属性。

```
PayPalPayment *payment = [[[PayPalPayment alloc] init] autorelease];
payment.recipient = @"s_biz@gmail.com";//@"example-merchant-1@paypal.com";
payment.paymentCurrency = @"USD";
payment.description = @"Gift Purchase";//@"Teddy Bear";
payment.merchantName = @"Test Merchant";//@"Joe's Bear Emporium";

payment.subTotal = [NSDecimalNumber decimalNumberWithString:@"100"];

payment.invoiceData = [[[PayPalInvoiceData alloc] init] autorelease];
payment.invoiceData.totalShipping = [NSDecimalNumber decimalNumberWithString:@"2"];
payment.invoiceData.totalTax = [NSDecimalNumber decimalNumberWithString:@"0.35"];

payment.invoiceData.invoiceItems = [NSMutableArray array];
PayPalInvoiceItem *item = [[[PayPalInvoiceItem alloc] init] autorelease];
item.totalPrice = payment.subTotal;    
item.name = @"Flower";
[payment.invoiceData.invoiceItems addObject:item];    

[[PayPal getPayPalInst] checkoutWithPayment:payment]; 
```

当我尝试向 payment.invoiceData.invoiceItems 添加更多项目时，我收到了一些警报，例如“为项目价格、税金和运费指定的金额不等于总金额”。

谁能让我知道我在这里做错了什么。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:16:28.393

如果您遵循 PayPal 示例并将其扩展为具有多个行项目，请确保`PayPalInvoiceItem *`为添加到`invoiceItems`数组中的每个项目分配一个新项目。如果您不将分配放入循环中，您将覆盖每个额外的行项目，并且发票总额不会正确显示。你没有发布问题代码，但我敢打赌你只有一个

`PayPalInvoiceItem *item = [[[PayPalInvoiceItem alloc] init] autorelease];`

**相反，为发票中的每个**行项目分配并初始化一个附加项目对象。

例如，假设您有一组`LineItem`要放入 PayPal 发票的对象。您的“支付”方法可能如下所示：

```
- (void)payViaPayPal {
    PayPal *payPal = [PayPal getPayPalInst];

    payPal.shippingEnabled = TRUE;

    PayPalPayment *payment = [[[PayPalPayment alloc] init] autorelease];

    payment.recipient = @"email@example.com";
    payment.paymentCurrency = @"USD";
    payment.description = @"Your order of example stuff";
    payment.merchantName = @"Company Name";

    //subtotal of all items, without tax and shipping
    payment.subTotal = [NSDecimalNumber zero];

    payment.invoiceData = [[[PayPalInvoiceData alloc] init] autorelease];

    // No shipping or sales tax in this example
    payment.invoiceData.totalShipping = [NSDecimalNumber zero];
    payment.invoiceData.totalTax = [NSDecimalNumber zero];
    payment.invoiceData.invoiceItems = [NSMutableArray array];

    for (LineItem *lineItem in self.lineItems) {
        PayPalInvoiceItem *item = [[[PayPalInvoiceItem alloc] init] autorelease];

        // If we want these items to show up on the PayPal invoice list, uncomment them.
        //
        // item.itemId = @"...";
        // item.itemCount = ...;
        // item.itemPrice = ...;

        item.name = lineItem.productTypeId.title;
        item.totalPrice = [lineItem.price
                           decimalNumberByMultiplyingBy:[
                                                         NSDecimalNumber
                                                         decimalNumberWithDecimal:[lineItem.quantity decimalValue]]];
        payment.subTotal = [payment.subTotal decimalNumberByAdding:item.totalPrice];

        [payment.invoiceData.invoiceItems addObject:item];
    }

    [payPal checkoutWithPayment:payment];
} 
```

# java - 单击介绍中的链接时，RCP 应用程序崩溃

> ID：11669169
> 
> 赞同：1
> 
> 时间：2012-07-26T12:20:39.407
> 
> 标签：java, eclipse-plugin, eclipse-rcp

目前我正在使用 CustomizableIntroPart 构建一个 XHTML-Intro。我在此页面上使用 jQuery 实现了一个具有自动排序功能的搜索字段。每当我尝试单击调用[http://org.eclipse.ui.intro/runAction](http://org.eclipse.ui.intro/runAction) ?... URL 的搜索结果时，一切都很好。但是当我使用键盘上的返回或输入按钮打开该链接时，整个 JVM 崩溃并显示以下消息：

```
A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x5c8bb6f2, pid=7580, tid=8816
#
# JRE version: 7.0_05-b06
# Java VM: Java HotSpot(TM) Client VM (23.1-b03 mixed mode windows-x86 )
# Problematic frame:
# C  [ieframe.dll+0x13b6f2]  Ordinal159+0xcee3 
```

我尝试调试错误并在方法 callback2 中的 org.eclipse.swt.internal.ole.win32.COMObject 类中的某个地方着陆

我正在使用 eclipse 3.7.2、JDK 7u5 和 Win7 64 位

任何人都面临类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:47:29.647

似乎问题与线程有关。在被调用的 org.eclipse.ui.intro.config.IIntroAction 中，我隐藏了介绍并打开了一个编辑器。异步打开编辑器解决问题：

```
Display.getCurrent().asyncExec(createOpenEditorRunnable()); 
```

希望这对某人有用。

# java - 我的 ServiceTestCase 的 getSystemContext() 返回 null

> ID：11669170
> 
> 赞同：2
> 
> 时间：2012-07-26T12:20:40.270
> 
> 标签：java, android, unit-testing, junit, servicetestcase

我对下面的代码进行了测试，但我得到了 NullpointerException，因为 getSystemContext() 返回 null。我的项目如下所示：

```
~/trunk/src/<packages>/<classes>
~/trunk/test/<packages/<testclasses>
~/trunk/<static android dirs>
~/trunk/AndroidManifest.xml 
```

请告诉我我做错了什么。

```
 @RunWith(RobolectricTestRunner.class)
    public class MyServiceTest extends ServiceTestCase<MyService> {

    public MyServiceTest() {
       super(MyService.class);
    }

    @Test
    public void testStartable() {
       Context mockContext = getSystemContext();
       Log.d("testStartable", "testContext " + mockContext.getClass().getCanonicalName());
       Intent startIntent = new Intent();
       startIntent.setClass(mockContext, MyService.class);
       mockContext.startService(startIntent);
       assertNotNull(getService());
    }
   } 
```

# objective-c - OSX iCloud 在应用程序之间共享文件

> ID：11669171
> 
> 赞同：1
> 
> 时间：2012-07-26T12:20:43.200
> 
> 标签：objective-c, macos, cocoa, icloud

是否可以通过 iCloud 在不同应用程序之间共享文件？例如，我可以从我的应用程序中导出 epub 书籍以使其出现在 iBooks 中，或者从我的应用程序中将文档导出到 Pages 吗？有没有办法从我的应用程序的照片流中获取这些文件或图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:32:07.943

您将无法将文件写入其他应用程序沙箱，正是因为沙箱不允许您在应用程序容器之外进行写入。你可以做的是调用一个保存面板，让用户将文件导出为电子书，无论他想要什么。然后，他可以在 Pages 中打开文件并将其移动到那里的云端。

不，没有 API 可以访问您的照片流。

# python - 如何在 Python 中创建一个位数组？

> ID：11669178
> 
> 赞同：36
> 
> 时间：2012-07-26T12:21:09.827
> 
> 标签：python, arrays, bit

如何声明一个非常大的位数组，比如 600 万位？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-26T12:25:04.443

```
from bitarray import bitarray

a = bitarray(2**20) 
```

[您可以在http://pypi.python.org/pypi/bitarray/](http://pypi.python.org/pypi/bitarray/)查看有关此模块的更多信息

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-11T21:28:53.773

[位串](https://github.com/scott-griffiths/bitstring)模块可能会有所帮助：

```
from bitstring import BitArray
a = BitArray(6000000) 
```

这将占用不到一兆字节的内存，并且很容易设置、读取、切片和解释位。与 bitarray 模块不同，它是纯 Python，而且它适用于 Python 3。

有关更多详细信息，请参阅[文档](https://bitstring.readthedocs.io/en/latest/)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-03-22T08:30:12.423

这个单行将字节转换为真/假位值列表。可能对 6M 位性能不高，但对于小标志应该没问题，不需要额外的依赖项。

```
>>> flags = bytes.fromhex(b"beef")
>>> bits =  [flags[i//8] & 1 << i%8 != 0 for i in range(len(flags) * 8)]
>>> print(bits)
[False, True, True, True, True, True, False, True, True, True, True, True, False, True, True, True] 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-05-15T04:33:29.247

使用获取 bitarray 模块

```
pip install bitarray 
```

然后，这段代码将创建一个大小为 600 万的位数组，

```
from bitarray import bitarray
bit_array = bitarray(6000000) 
```

您可以使用以下方法将所有位初始化为零

```
bit_array.setall(0) 
```

要将特定位（例如位号 25）设置为 1，请执行以下操作：

```
bit_array[25]=1 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-11-21T19:51:09.857

很容易

```
bitarray60000 = 1<<60000 
```

有了它，您可以使用位移运算符来满足您的需求。例如，位置 2 设置为 True 将是：

```
bitarray60000 | 1<<2 
```

从位置 2 获取位

```
bitarray60000 & 1<<2 
```

我想这个想法很简单。虽然有些操作可能很棘手。

# qt - Windows 上的 Qt QFileSystemWatcher

> ID：11669179
> 
> 赞同：4
> 
> 时间：2012-07-26T12:21:10.143
> 
> 标签：qt, qfilesystemwatcher

我有以下问题：我创建了一个`QFileSystemWatcher`，它在 Linux 上运行和运行良好，但在 Windows 7 上没有。你能在代码中发现任何可能使它无法工作的东西吗？

谢谢。

这是初始化它的代码：

```
mConfigChangeWatcher = new QFileSystemWatcher();
mConfigChangeWatcher->addPath(config_file_name);

QObject::connect(mConfigChangeWatcher,
                 SIGNAL(fileChanged(QString)),
                 this,
                 SLOT(configFileChanged(QString))); 
```

这应该是完成工作的插槽：

```
void MyClass::configFileChanged(const QString &file)
{
    qDebug() << "Changed: " << file ;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-16T14:29:07.587

当您检查文件是否在第一次修改文件后使用方法添加到观察`QFileSystemWatcher::files()`程序时，您是否得到正确的列表？

我遇到的问题是，某些应用程序在修改文件时会从系统中删除旧文件并重新写入。

> 请注意，一旦文件被重命名或从磁盘中删除，QFileSystemWatcher 将停止监视文件，一旦从磁盘中删除目录，它们就会停止监视。

我正在使用 QFileSystemWatcher 观看由 Photoshop 编辑的图像文件。不知何故，该文件从被监视的文件列表中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-13T16:15:50.620

我有同样的问题并很快解决了。在管理信号的插槽内，`fileChanged`我注意到路径从`files()`. 我只是进行检查并在必要时重新添加

```
if (! watcher_.files().contains(path))
{
    watcher_.addPath(path);
} 
```

我希望这有帮助

法比奥

# iphone - 使用 CorePlot 时收到 sigabrt

> ID：11669183
> 
> 赞同：1
> 
> 时间：2012-07-26T12:21:35.383
> 
> 标签：iphone, xcode, core-plot, sigabrt

我正在使用 XCode 4.2 使用 CorePlot 1.0 开发一个简单的应用程序。我收到“发送到实例的无法识别的选择器”。

这个问题已经出现在许多其他线程上，但其他线程似乎同意问题在于设置“其他链接器标志”。设置说明说要添加“-ObjC”链接器标志，但其他一些包括“-all_load”和“-Obj-C”。我都试过了。

一些线程说要确保标题搜索路径设置正确。我的设置为绝对路径：“/Developer/projects/CorePlotDemo/CorePlotHeaders”。

运行此[示例](http://www.raywenderlich.com/13269/how-to-draw-graphs-with-core-plot-part-1)以及我的“真实”应用程序时出现此错误。

我不知道还有什么可以尝试的，有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T22:55:55.983

那是一个没有正确加载的类别方法。“-all_load”链接器标志应该解决这个问题。

# wpf - 滑块应归零

> ID：11669186
> 
> 赞同：1
> 
> 时间：2012-07-26T12:21:41.340
> 
> 标签：wpf, xaml, data-binding, animation

我想要一个当用户停止拖动时返回 0 的滑块。

到目前为止，我有这个：

```
<Window x:Class="CenteredSliderTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<DockPanel>
    <!--Value="{Binding ZSpeed}"-->
    <Slider DockPanel.Dock="Left"
                                x:Name="ZSlider"
                                Minimum="-100" Maximum="100"
                                SelectionStart="-20" SelectionEnd="20"
                                Orientation="Vertical" 
                                TickFrequency="10" 
                                TickPlacement="TopLeft" 
                                AutoToolTipPlacement="TopLeft"
                                AutoToolTipPrecision="2"
                                LargeChange="10"
                                SmallChange="1"
                                IsDirectionReversed="True"
                                Focusable="False"
                                >
        <Slider.Triggers>
            <EventTrigger RoutedEvent="LostMouseCapture" SourceName="ZSlider">
                <EventTrigger.Actions>
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation
                                Storyboard.TargetName="ZSlider"
                                Storyboard.TargetProperty="Value"
                                From="{Binding Value, ElementName=ZSlider}"
                                To="0.0"
                                Duration="0:0:1.5"
                                FillBehavior="Stop"
                                />
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger.Actions>

            </EventTrigger>
        </Slider.Triggers>
    </Slider>
    <TextBlock Text="{Binding ZSpeed}" />
</DockPanel>
</Window> 
```

只要我不将滑块值绑定到我的 DependencyProperty ZSpeed，这就会起作用。

一旦我这样做，滑块就会跳回原始值，并且在第二次尝试时，滑块不能再拖动了。

那么我该怎么做（最好在 xaml 中）才能让动画不仅修改滑块而且修改 ZSpeed 属性？

**编辑**

主窗口中的代码：

```
 public partial class MainWindow : Window
{

    public double ZSpeed
    {
        get { return (double)GetValue(ZSpeedProperty); }
        set { SetValue(ZSpeedProperty, value); }
    }

    // Using a DependencyProperty as the backing store for ZSpeed.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty ZSpeedProperty =
        DependencyProperty.Register("ZSpeed", typeof(double), typeof(MainWindow), new UIPropertyMetadata(0.0));

    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = this;

        Binding binding = new Binding("Value") { Source = ZSlider }; 
        this.SetBinding(ZSpeedProperty, binding); 
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:00:06.270

~~你应该使用`FillBehavior.HoldEnd`.~~

编辑：这显然行不通。您可以在事件中`ZSpeed`手动将值设置为 0 。`StoryBoard.Completed`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:57:17.360

您可能会反转绑定的方向。而不是将 Slider绑定`Value`到`ZSpeed`您可以绑定`ZSpeed`到`Value`. 如果 Slider 要更改，这也是“自然”绑定方向`ZSpeed`，但`ZSpeed`不会更改。

编辑：如果`ZSpeed`是某些数据类中的依赖属性，`MyData`您可以在代码中创建一个绑定，如下所示：

```
MyData dataObject = ...
Binding binding = new Binding("Value") { Source = ZSlider };
dataObject.SetBinding(MyData.ZSpeedProperty, binding); 
```

**第二次编辑：**采纳 Daniels 的建议，您可能会制作动画`ZSpeed`而不是 Slider 的`Value`. 像以前一样绑定`Value`到`ZSpeed`，删除 EventTrigger 并添加一个事件处理程序`LostMouseCapture`：

```
<Slider x:Name="ZSlider" ...
        Value="{Binding ZSpeed}"
        LostMouseCapture="ZSlider_LostMouseCapture"/> 
```

后面的代码：

```
private void ZSlider_LostMouseCapture(object sender, MouseEventArgs e)
{
    DoubleAnimation animation = new DoubleAnimation
    {
        From = ZSpeed,
        To = 0d,
        Duration = TimeSpan.FromSeconds(1.5 * Math.Abs(ZSpeed) / 100d),
        FillBehavior = FillBehavior.Stop
    };
    ZSpeed = 0d;
    BeginAnimation(ZSpeedProperty, animation);
} 
```

# javascript - 如何在不阻塞的情况下运行脚本？

> ID：11669187
> 
> 赞同：-5
> 
> 时间：2012-07-26T12:21:41.627
> 
> 标签：javascript, jquery, internet-explorer-9

IE9 阻止了我的脚本。反正有没有阻止它运行脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:28:01.907

您可以更改自己浏览器的安全设置，但无法控制用户浏览器阻止脚本的行为。

# mule - 从 Mule 中的 foreach 组件获取有效负载的问题。

> ID：11669192
> 
> 赞同：0
> 
> 时间：2012-07-26T12:22:03.650
> 
> 标签：mule

我在 mule 中使用了一个 foreach 组件。我正在使用 Foreach 迭代一个集合对象。对于 ForEach 组件，我正在发送一个集合有效负载作为输入。Foreach 迭代集合有效负载。但问题是我无法在下一个组件中获取 Iterated foreach 有效负载。

这是我的代码片段

```
 <choice doc:name="Choice">
        <when expression="#[ognl:instance=='Lamp']">
            <processor-chain>
                <message-properties-transformer scope="invocation" doc:name="Message Properties">
                    <add-message-property key="loops" value="0"/>
                </message-properties-transformer>
                <component class="com.Lamp" doc:name="Java"/>
                <foreach doc:name="Foreach">
                    <component class="com.Candle" doc:name="Java"/>
                    <logger message="DDD #[message:payload]" level="INFO" doc:name="Logger"/>
                    <set-variable variableName="foreachPayload" value="#[message:payload]" doc:name="Payload"/>
                </foreach>
            </processor-chain>
        </when> 
```

在这里，由于我无法直接获取 foreach 组件的有效负载，因此我尝试将该有效负载设置在名为“foreachPayload”的变量中。但是在访问下一个组件中的变量时，迭代集合对象的最后一个值并不是迭代集合对象的全部值。

这是访问会话变量的代码片段。

```
 eventContext.getMessage().getInvocationProperty("foreachPayload") 
```

请让知道这里的问题是什么以及解决这个问题的方法。

下面附上我的消息流截图

[http://i.stack.imgur.com/mm64s.jpg](http://i.stack.imgur.com/mm64s.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:38:21.923

在组件之后获得变量中集合的最后一个值的原因`foreach`是`set-variable`覆盖`foreachPayload`了原始消息中的值。这是正确的行为。也许你应该`collection-splitter`改用`foreach`. 处理集合中的每个元素后，使用`collection-aggregator`. 这样，生成的有效负载是处理值的集合。

```
<collection-splitter enableCorrelation="IF_NOT_SET"/>
<component class="com.Candle" doc:name="Java"/>
<collection-aggregator timeout="6000" failOnTimeout="false"/> 
```

# blackberry - 如何从 BrowserField 中获取点击的 URL？

> ID：11669203
> 
> 赞同：0
> 
> 时间：2012-07-26T12:22:36.303
> 
> 标签：blackberry

我的应用程序有 2 个屏幕。第一个屏幕包含一个`BrowserField`实例，它显示一个带有大量链接的 HTML 文件。

当用户单击 上显示的链接时`BrowserField`，应该会出现第二个屏幕。但是现在新页面正在打开`BrowserField`。

如何从 中获取点击的 URL `BrowserField`？

如何在第二个屏幕上显示新页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:27:12.990

阅读该类的文档[`BrowserField`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/browser/field2/BrowserField.html)。

检查方法。`void setDebugger(`[`BrowserFieldDebugger`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/browser/field2/debug/BrowserFieldDebugger.html)`debugger)`

实现方法。`public void`[`pageRequested`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/browser/field2/debug/BrowserFieldDebugger.html#pageRequested%28java.lang.String%29)`(String url)`

* * *

[`BrowserFieldDebugger`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/browser/field2/debug/BrowserFieldDebugger.html)：

> 这个抽象类允许开发人员调试在[`BrowserField`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/browser/field2/BrowserField.html)API 应用程序中运行的 Web 内容。

[`pageRequested`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/browser/field2/debug/BrowserFieldDebugger.html#pageRequested%28java.lang.String%29)：

> ```
> This method is invoked for each new page that is requested
> 
> Parameters:
>     url - the URL of the newly requested page 
> ```

# ios - iOS自定义手势识别器测量长按的长度

> ID：11669212
> 
> 赞同：0
> 
> 时间：2012-07-26T12:22:59.020
> 
> 标签：ios, uigesturerecognizer

在我的应用程序中，我想创建一个自定义手势识别器，它可以识别长按然后滑动。我需要测量长按的长度是否超过 1 秒。如果是，则调用一个函数并等待滑动动作开始。

我的问题是，我现在知道的唯一方法是从 touchesMoved 中提取 touchesBegan 的时间戳。但是我想知道在调用 touchesMoved 之前经过的时间。

有没有办法在调用 touchesMoved 之前知道水龙头的长度？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:03:00.433

你可以使用可能的代码，它可以使用，但也许你应该处理一些细节

在 .h 文件中，您应该添加这些 ivar：

```
 TestView *aView ;//the view which you press
    NSThread *timerThread;              
    NSTimer *touchTimer;    

    NSDate *touchStartTime;         
    CGPoint touchStartPoint;            
    CGPoint lastTouchPoint; 
```

在 .m 文件中，您应该添加以下方法：

```
- (void)doSomething
{
    NSLog(@"Long press!!!");
}

- (void)startTimerThead{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    NSRunLoop *runLoop = [NSRunLoop currentRunLoop];

    touchTimer = [NSTimer scheduledTimerWithTimeInterval:0.2
                                                  target:self 
                                                selector:@selector(checkTouchTime:) 
                                                userInfo:nil repeats:YES];

    [runLoop run];
    [pool release];
}

- (void)stopTouchTimer{
    if (touchTimer != nil) {
        [touchTimer invalidate];
        touchTimer = nil;
    }
    if (timerThread != nil) {
        [timerThread cancel];
        [timerThread release];
        timerThread = nil;      
    }
}

#define DELETE_ACTIVING_TIME 1.0

- (void)checkTouchTime:(NSTimer*)timer{

            NSDate *nowDate = [NSDate date];
            NSTimeInterval didTouchTime = [nowDate timeIntervalSinceDate:touchStartTime];
            if (didTouchTime > DELETE_ACTIVING_TIME){

                [self stopTouchTimer];
                [self doSomething];
            }   

}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    UIView *touchView = [touch view];
    if ([touchView isKindOfClass:[TestView class]]) {

        touchStartTime = [[NSDate date] retain];

            if (nil == timerThread) {
                timerThread = [[NSThread alloc] initWithTarget:self selector:@selector(startTimerThead) object:nil];
                [timerThread start];
            }
        }
        touchStartPoint = [touch locationInView:self.view];
        lastTouchPoint = touchStartPoint;
}

#define TOUCH_MOVE_EFFECT_DIST 10.0f
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint movedPoint = [touch locationInView:self.view];

    CGPoint deltaVector = CGPointMake(movedPoint.x - touchStartPoint.x, movedPoint.y - touchStartPoint.y);

        if (fabsf(deltaVector.x) > TOUCH_MOVE_EFFECT_DIST
            || fabsf(deltaVector.y) > TOUCH_MOVE_EFFECT_DIST) 
        {

            [self stopTouchTimer];
        }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{   
    UITouch *touch = [touches anyObject];
    UIView *touchView = [touch view];
    CGPoint movedPoint = [touch locationInView:self.view];
    CGPoint deltaVector = CGPointMake(movedPoint.x - touchStartPoint.x, movedPoint.y - touchStartPoint.y);

    if ([touchView isKindOfClass:[TestView class]]) {
            if (fabsf(deltaVector.x) < TOUCH_MOVE_EFFECT_DIST
                && fabsf(deltaVector.y) < TOUCH_MOVE_EFFECT_DIST) {
                [self stopTouchTimer];
            }
        }

} 
```

# android - 摇晃手机方向

> ID：11669221
> 
> 赞同：0
> 
> 时间：2012-07-26T12:23:35.303
> 
> 标签：android, accelerometer, shake

有什么方法可以检测到手机摇晃的方向吗？例如：我想从屏幕的右边框拍摄一些东西，所以我需要查看手机是否向左摇晃（从第一个动作开始的坐标）。左边框几乎相同。希望你能理解。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:31:14.417

您可以通过实现 SensorEventListener 并检查来检测特定方向的变化：

```
public void onSensorChanged(SensorEvent se) {
    // Get sensor data.
    float x = se.values[SensorManager.DATA_X];
    float y = se.values[SensorManager.DATA_Y];
    float z = se.values[SensorManager.DATA_Z];
} 
```

然后简单地比较其中一个变量的几个连续值来确定方向。我认为 X 是你感兴趣的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:32:31.570

假设您不需要测量用于射击功率目的的摇晃力，以下链接肯定会帮助您解决问题。 [一个简单的加速度计教程](http://www.techrepublic.com/blog/app-builder/a-quick-tutorial-on-coding-androids-accelerometer/472)

# javascript - hasClass 在我的 js 代码中不起作用？

> ID：11669222
> 
> 赞同：0
> 
> 时间：2012-07-26T12:23:35.600
> 
> 标签：javascript, jquery

我想`hasClass`在下面的代码中使用，但这对我不起作用，请在 jsfiddle 中查看我的演示并告诉我，我做错了什么？

```
<span>
    <input type="text" name="relation" class="IdRelation">
</span>
​

if ($('span').hasClass('IdRelation')) {
  alert("ok");
}​ 
```

[演示](http://jsfiddle.net/6Bwkv/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T12:25:00.047

暴露类的不是`<span>`元素`IdRelation`，而是它的`<input>`子元素。尝试：

```
if ($("span input").hasClass("IdRelation")) {
    alert("ok");
}​ 
```

或者，取决于您的实际标记：

```
if ($("span > input").hasClass("IdRelation")) {
    alert("ok");
}​ 
```

第一个代码片段中的选择器将匹配一个`<input>`元素的所有[后代](http://reference.sitepoint.com/css/descendantselector)`<span>`元素，而第二个代码片段中的选择器将匹配一个元素的所有直接`<input>`子[元素](http://reference.sitepoint.com/css/childselector)`<span>`。两者都将匹配`<input>`示例标记中的元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T12:24:55.600

# 解决方案

该类在`<span>`子类 an上`<input>`，因此将其添加到 jQuery 选择器 :`$('span input')`中。

```
if ($('span input').hasClass('IdRelation')) {
  alert('ok');
}​ 
```

试试[演示](http://jsfiddle.net/dQ7fV/)。

# 一点解释

根据 jQuery 文档，`$('span input')`是一个[**后代选择器**](http://api.jquery.com/descendant-selector)：

> 选择作为给定祖先的后代的所有元素。

你也可以使用`$('span > input')`. 它是一个[**子选择器**](http://api.jquery.com/child-selector/)：

> 选择“parent”指定的元素的“child”指定的所有直接子元素。

两者都适合您的情况，因为`input`是`<span>`.

如果您的代码是：

```
<div>
    <form>
        <input type="text" name="relation" class="IdRelation">
    </form>
</div> 
```

解决方案将是`$('div input')`or `$('div > form > input')`。

# javascript - 在 Windows 中安装 Mojito

> ID：11669228
> 
> 赞同：0
> 
> 时间：2012-07-26T12:23:53.523
> 
> 标签：javascript, windows, node.js, yahoo, mojito

我想在 Windows 中安装 Mojito。我在 Windows 中有 MinGW 和 nodejs。但我无法使用`npm install -g mojito`. 它在Windows中安装时出现以下错误

```
npm WARN package.json connect@1.8.2 No README.md file found!
npm WARN engine connect@1.8.2: wanted: {"node":">= 0.4.1 < 0.7.0"} (current: {"node":"0.8.3","npm":"1.1.43"})
npm WARN engine express@2.5.2: wanted: {"node":">= 0.4.1 < 0.7.0"} (current: {"node":"0.8.3","npm":"1.1.43"})
npm ERR! error rolling back   errno: 53,
npm ERR! error rolling back   code: 'ENOTEMPTY',
npm ERR! notsup Unsupported
npm ERR! notsup Not compatible with your operating system or architecture: yui3@0.7.12
npm ERR! notsup Valid OS:    darwin,linux
npm ERR! notsup Valid Arch:  any
npm ERR! notsup Actual OS:   win32
npm ERR! notsup Actual Arch: ia32

npm ERR! System Windows_NT 6.1.7601
npm ERR! code EBADPLATFORM
npm ERR! stack Error: Unsupported
npm ERR! stack     at checkPlatform (c:\Program Files (x86)\nodejs\node_modules\npm\lib\install.js:747:14)
npm ERR! stack     at Array.1 (c:\Program Files (x86)\nodejs\node_modules\npm\node_modules\slide\lib\bind-actor.js:15:8)
npm ERR! stack     at LOOP (c:\Program Files (x86)\nodejs\node_modules\npm\node_modules\slide\lib\chain.js:15:14)
npm ERR! stack     at c:\Program Files (x86)\nodejs\node_modules\npm\node_modules\slide\lib\chain.js:18:7
npm ERR! stack     at checkEngine (c:\Program Files (x86)\nodejs\node_modules\npm\lib\install.js:726:10)
npm ERR! stack     at Array.0 (c:\Program Files (x86)\nodejs\node_modules\npm\node_modules\slide\lib\bind-actor.js:15:8)
npm ERR! stack     at LOOP (c:\Program Files (x86)\nodejs\node_modules\npm\node_modules\slide\lib\chain.js:15:14)
npm ERR! stack     at chain (c:\Program Files (x86)\nodejs\node_modules\npm\node_modules\slide\lib\chain.js:20:5)
npm ERR! stack     at installOne_ (c:\Program Files (x86)\nodejs\node_modules\npm\lib\install.js:692:3)
npm ERR! stack     at installOne (c:\Program Files (x86)\nodejs\node_modules\npm\lib\install.js:615:3)
npm http GET https://registry.npmjs.org/mkdirp/0.0.7 
```

在雅虎开发者[网站](http://developer.yahoo.com/cocktails/mojito/docs/quickstart/)中明确提到基于 Unix 的系统是先决条件，但是是否可以使用 cygwin 或 mingw 将其安装在 windows 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:21:36.047

这是一个悬而未决的问题，对此感到抱歉。将自己添加到[https://github.com/yahoo/mojito/issues/264](https://github.com/yahoo/mojito/issues/264)以跟踪我们的进度。

# html - 如何使 div 可左右滚动？

> ID：11669229
> 
> 赞同：0
> 
> 时间：2012-07-26T12:24:00.810
> 
> 标签：html, css

我创建了一个宽度设置为 100% 的大菜单，我希望这个 div 可以从左到右滚动。（在 X 轴上）。我已经相应地设置了 scroll-left 和 scroll right 属性，但它仍然不起作用。我确定我做错了什么，任何建议都值得赞赏。谢谢。

代码在[jsFiddle](http://jsfiddle.net/WkUNn/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T12:31:13.083

你需要有一个不是 100% 的宽度。将菜单设置为具有您的尺寸和溢出的容器 div，然后将实际菜单设置为在其中非常宽。将 box div 想象成一个框架。

[http://jsfiddle.net/spacebeers/WkUNn/19/](http://jsfiddle.net/spacebeers/WkUNn/19/)

```
.box {
    max-height:150px;
    border: 2px solid red;
    width: 100%;
    overflow: scroll;  
}

.megamenu {
    width: 3000px;
    overflow: hidden;
     max-height:100px;
    -webkit-box-shadow: 0px -1px 12px rgba(0, 0, 0, 0.48);
    -moz-box-shadow:    0px -1px 12px rgba(0, 0, 0, 0.48);
    box-shadow:         0px -1px 12px rgba(0, 0, 0, 0.48);
    padding-bottom:45px;
    padding-top:5px;
    background: grey;
    border-top:1px solid #767676;
    font-family:Verdana, Tahoma, Sans-Serif;
    z-index: 100;
} 
```

**编辑：**正如@c_kick 所指出的（在原版中），您可以使用溢出-x，溢出-y。我试图让事情变得简单。

# c# - 将匿名类型传递给 IComparer

> ID：11669233
> 
> 赞同：1
> 
> 时间：2012-07-26T12:24:15.130
> 
> 标签：c#, .net-3.5, anonymous-types

我想根据位于视图模型中的 2 个属性来比较我的视图模型集合。我需要的是根据开始日期对我的视图模型进行排序，但如果结束日期比今天低，它应该放在集合的底部，关于在订​​单完成后它应该如何的示例：

```
Stardate    Enddate    
25/06/2012  25/06/2022    
21/06/2012  21/04/2018    
31/06/2012  02/07/2012    
28/06/2012  01/07/2012 
```

我认为这应该被称为，像这样：

```
bankPolicyViewModels.OrderBy(vm => new {StartDate = vm.BankAccountViewModel.StartDateIRA, 
                                        EndDate = vm.BankAccountViewModel.EndDateIRA},
                                        new ComparerForAnonymousType); 
```

但我不知道如何定义比较器。目前我只有这个：

```
public class ComparerForAnonymousType<T> : IComparer<T>
        where T : class
{
    public int Compare(T x, T y)
    {
        throw new NotImplementedException();
    }
} 
```

我可以尝试通过反射来解析定义的属性，但这将是一种简单的方法（我猜也是性能很重）。

有什么方法可以将匿名类型定义为`T`，还是有其他方法可以根据 2 个属性对集合进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T12:26:44.493

您可以通过虚拟模板值和类型推断来做到这一点。不过，您将需要一个具有泛型方法的非泛型类。

您可能想查看实现所有这些的`ProjectionComparer`MiscUtil [。](http://pobox.com/~skeet/csharp/miscutil)例如：

```
var dummy = new { StartDate = default(DateTime),
                  EndDate = default(DateTime) };
var now = DateTime.Now;
var comparer = ProjectionComparer.Create(dummy, x => x.EndDate >= now)
                                 .ThenBy(x => x.StartDate); 
```

另一方面，由于您已经在使用 LINQ，因此使用`OrderBy(x => x.StartDate).ThenBy(x => x.EndDate)`开始可能更有意义......

```
var now = DateTime.Now;
var ordered = bankPolicyViewModels.OrderBy(vm => vm.EndDate >= now)
                                  .ThenBy(vm => vm.StartDate); 
```

（请注意，我不记得 false/true 的顺序 - 您可能需要反转比较`EndDate`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:28:18.293

要将 EndDate < today 的所有项目放在底部，然后按 StartDate 对所有内容进行排序，您可以使用：

```
var today = DateTime.Today;
bankPolicyViewModels
    .OrderBy(vm => vm.BankAccountViewModel.EndDateIRA < today ? 1 : 0);
    .ThenBy(vm => vm.BankAccountViewModel.StartDateIRA); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:26:10.390

让两个视图模型实现一个定义被比较属性的接口，然后让比较器在该接口上运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T12:31:40.017

`IComparable<T>`您可以在类内部实现接口`BankAccountViewModel`，这样您就可以使用该类的所有属性。或者表示接口的基础 BankAccountViewModel 类继承约束`IComparer<T>`。

# django - Django：urls.py 中的语法错误

> ID：11669234
> 
> 赞同：4
> 
> 时间：2012-07-26T12:24:18.787
> 
> 标签：django, django-urls

```
from django.conf.urls import patterns, include, url
from django.contrib import admin

admin.autodiscover()

urlpatterns = patterns('',
    (r'^admin/', include(admin.site.urls)),
    (r'^events/', include('events.urls')),
) 
```

这是我的 events.urls：

```
from django.conf.urls.defaults import *
from events import views

urlpatterns = patterns('',
    url(r'^tonight/$', views.tonight, name='ev_tonight'),
) 
```

运行服务器后出现以下错误：

```
异常类型：语法错误
异常值：    无效语法（urls.py，第 8 行）

我在这里错过了什么吗？

编辑：附加跟踪球

环境：

```
Request Method: GET
Request URL: http://127.0.0.1:8000/admin

Django Version: 1.4
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'events')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  89\.                     response = middleware_method(request)
File "/usr/local/lib/python2.7/dist-packages/django/middleware/common.py" in process_request
  67\.             if (not urlresolvers.is_valid_path(request.path_info, urlconf) and
File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in is_valid_path
  531\.         resolve(path, urlconf)
File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in resolve
  420\.     return get_resolver(urlconf).resolve(path)
File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in resolve
  298\.             for pattern in self.url_patterns:
File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in url_patterns
  328\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py" in urlconf_module
  323\.             self._urlconf_module = import_module(self.urlconf_name)
File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/home/bhavish/startthedark/startthedark/urls.py" in <module>
  8\.     (r'^events/', include('events.urls')),
File "/usr/local/lib/python2.7/dist-packages/django/conf/urls/__init__.py" in include
  24\.         urlconf_module = import_module(urlconf_module)
File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)

Exception Type: SyntaxError at /admin
Exception Value: invalid syntax (urls.py, line 8 
```

)

            回答 #1

赞同：9

时间：2012-07-26T14:15:21.777

引发的错误在 events/urls.py 中——仔细检查该文件。它的末尾可能有一些您看不到的额外空白。（语法错误应该在第 8 行，但我在您粘贴的内容中没有看到 8 行）

您也可以尝试直接从 python shell 导入该文件，以查看它是否完全解析。

            回答 #2

赞同：0

时间：2012-07-26T14:01:28.600

也许这一行：
`(r'^admin/', include(admin.site.urls)),`
应该更改为（添加括号）：
`(r'^admin/', include('admin.site.urls')),`

```

# php - 如何将带有html标签的字符串转换为pdf或doc类型的文件

> ID：11669237
> 
> 赞同：1
> 
> 时间：2012-07-26T12:24:21.500
> 
> 标签：php, html

> **可能重复：**
> [使用 PHP 将 HTML + CSS 转换为 PDF？](https://stackoverflow.com/questions/391005/convert-html-css-to-pdf-with-php)

如何将包含 html 标签的字符串转换为 pdf 或 doc 文件，其中 html 标签将转换为相应的格式，例如 br 标签到 /n 或换行粗体标签到 doc 或 pdf 文件中的粗体文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:28:15.223

我使用 DOMPDF，一个 HTML 到 PDF 的转换器。

[https://github.com/dompdf/dompdf](https://github.com/dompdf/dompdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:26:12.383

您可以使用类似[http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:33:17.300

看看这个网站：[pdfcrowd.com](http://pdfcrowd.com/#convert_by_input)

您可以通过给定的网站、html 文件或输入直接在线创建 PDF。

# java - 如何使用反射或任何其他实用程序完全打印 Java Bean

> ID：11669240
> 
> 赞同：10
> 
> 时间：2012-07-26T12:24:32.620
> 
> 标签：java, jakarta-ee, reflection, javabeans

我有一个`Person`包含 3 个变量的 Java bean 类：

*   名称（字符串）
*   年龄（字符串）
*   地址（对象）。

`Address`包含 3 个变量：

*   街道
*   门号
*   城市

我想要一个实用程序，它应该在`Person`.

我的意思是它应该打印`Person`以及其中`Address`包含的对象。

我可以创建一个哈希图并使用反射放置变量名称和值，并在 JSP 中打印键/值 UI，但问题是我必须应用反射`Address`才能在哈希图中添加变量/值。

是否有可用的实用程序来执行此操作？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-26T12:27:16.397

您可以使用Apache [Commons的](http://commons.apache.org/lang/)[ToStringBuilder](http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/builder/ToStringBuilder.html)。

从文档：

> 此方法的典型调用如下所示：
> 
> ```
>  public String toString() {
>    return ToStringBuilder.reflectionToString(this);
>  } 
> ```

更多细节：

> 此类可以为任何类或对象构建良好且一致的 toString()。此类旨在通过以下方式简化流程：
> 
> 允许处理所有类型的字段名称 一致地处理空值 一致地输出数组和多维数组 允许为对象和集合控制详细级别 处理类层次结构 要使用此类，请编写如下代码：
> 
> ```
>  public class Person {
>    String name;
>    int age;
>    boolean smoker;
> 
>    ...
> 
>    public String toString() {
>      return new ToStringBuilder(this).
>        append("name", name).
>        append("age", age).
>        append("smoker", smoker).
>        toString();
>    }
>  } 
> ```
> 
> 或者，有一种方法使用反射来确定要测试的字段。因为这些字段通常是私有的，所以反射ToString 方法使用 AccessibleObject.setAccessible 来更改字段的可见性。除非正确设置了适当的权限，否则这将在安全管理器下失败。它也比显式测试慢。此方法的典型调用如下所示：
> 
> ```
>  public String toString() {
>    return ToStringBuilder.reflectionToString(this);
>  } 
> ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T12:27:27.797

您可能正在寻找 Apache Commons [`ToStringBuilder#reflectionToString(Object)`](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/builder/ToStringBuilder.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-20T12:17:56.483

您可能会发现 Jackson **JSON 序列化**程序对此很有用。Jackson 库可能已经成为您堆栈的一部分。如果没有，请在下面找到所需的依赖项。

```
private static final ObjectMapper OBJECT_MAPPER_SINGLETON = new ObjectMapper();
public static String toStringUsingJackson(final Object object) {
    try {
        return OBJECT_MAPPER_SINGLETON.writeValueAsString(object);
    } catch (final JsonProcessingException e) {
        return String.valueOf(object);
    }
} 
```

样本输出：

> {"name":"John Doe","age":42}

所需**的 maven/gradle 依赖项**：

*   杰克逊核心，groupId=com.fasterxml.jackson.core
*   杰克逊数据绑定，groupId=com.fasterxml.jackson.core

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T12:28:04.587

您可以实现`toString`打印出任何您想要的方法，或者您可以使用 Apache Commons `ToStringBuilder` [http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/builder/ToStringBuilder.html](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/builder/ToStringBuilder.html)及其`reflectionToString`方法. 我不相信这会通过属性递归（例如地址），但如果你想看到用街道、门号和城市打印出来的地址，请使用实现它的`toString`方法来打印该信息。

# jodatime - 如何在 joda 时间将“-8y5d”之类的字符串解析为 Period 对象

> ID：11669255
> 
> 赞同：9
> 
> 时间：2012-07-26T12:25:28.093
> 
> 标签：jodatime

我想将像“8y5d”或“-6y144d”这样的字符串解析成一个joda时间段对象。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T21:16:09.230

使用[PeriodFormatterBuilder](http://joda-time.sourceforge.net/api-release/org/joda/time/format/PeriodFormatterBuilder.html)：

```
 PeriodFormatter yearsAndMonths = new PeriodFormatterBuilder()
        .printZeroRarelyFirst()
        .appendYears()
        .appendSuffix("y", "y")
        .printZeroRarelyLast()
        .appendDays()
        .appendSuffix("d", "d")
        .toFormatter();
    System.out.println(yearsAndMonths.parsePeriod("8y5d").toDurationFrom(new DateTime()).getStandardDays()); 
```

# jquery - 根据来自另一个选择框的输入动态添加选择框

> ID：11669257
> 
> 赞同：-1
> 
> 时间：2012-07-26T12:25:32.327
> 
> 标签：jquery

我正在构建一个表格，用于将学生的结果输入学校数据库。现在学校有5-8标准2个部分，9-10标准1个。

这就是我想要做的，应该有一个选择框，用户可以在其中选择他想要输入数据的标准，如果选择的标准在第 5 到第 8 的限制内，则需要动态添加另一个选择框可以选择“A 部分”或“B 部分”。如果用户选择 9 年级或 10 年级，则不应出现任何部分选择框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:35:41.253

欢迎来到 StackOverflow。

由于您没有显示任何 html 标记或尝试为自己编写 JavaScript，我将只为您提供一个简单的 jQuery 解决方案，并留给您与您的实际 html 匹配。

在我看来，实现您的要求最简单的方法是在 html 标记中包含两个选择元素，并在适用时隐藏和显示第二个元素。（这不仅比动态添加和删除元素更容易，它还有一个额外的优势，就是让偶尔禁用 JavaScript 的用户可以访问您的表单。）

```
$(document).ready(function() {
    var $section = $("#section").hide();
    $("#standard").change(function() {
        var val = +$(this).val();
        if (val >= 5 && val <= 8)  // assume option elements have value="5", etc.
            $section.show();
        else
            $section.hide();
    });
}); 
```

进一步阅读：[http ://api.jquery.com/](http://api.jquery.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:37:18.090

下面的 jQuery 让您可以观察 select 元素的变化，并获取当前选定的元素：

```
$(function() {
    $("#sections").change(function() {
        var value = $(this).val();
        if(value > 8) {
           //do stuff
        } else {
           //do other stuff
        }
    });
});​ 
```

然后，您可以使用 $("selector").show() 和 $("selector").hide() 方法来显示/显示其他一些元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:44:31.447

HTML

```
<label for="std">Std</label>
  <select id="std">
    <option value="0">--Select--</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
  </select>
  <span id="gradeContainer" class="hide">
    <label for="grade">Grade</label>
    <select id="grade">
      <option value="0">--Select--</option>
      <option value="1">Grade A</option>
      <option value="2">Grade B</option>
    </select>
  </span> 
```

CSS

```
.hide { display : none } 
```

JS

```
 $(function() {
        $("#std").change(function() {
            var value = $(this).val();
            if(parseInt(value,10)>8) {
                $("#gradeContainer").show();
            } else {
               $("#gradeContainer").hide();
            }
        });

});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T16:47:29.643

我吸收了你所有的想法，最后得到了这个，它有效，我想我会发布最终结果

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css">
<script type='text/javascript' src='http://code.jquery.com/jquery-1.5.2.js'></script>
<script type="text/javascript">//<![CDATA[ 
$(window).load(function(){
$("#std").change(function() {
        var value = $(this).val();
        if(parseInt(value,10)>8) {
            $("#gradeContainer").hide();
        } else {
           $("#gradeContainer").show();
        }
    });

});//]]> 
</script>
</head>
<body>
<label for="std">Std</label>
<select id="std">
  <option value="0">--Select--</option>
  <option value="5">5</option>
  <option value="6">6</option>
  <option value="7">7</option>
  <option value="8">8</option>
  <option value="9">9</option>
  <option value="10">10</option>
</select>
<span id="gradeContainer" class="hide">
<label for="grade">Grade</label>
<select id="grade">
  <option value="0">--Select--</option>
  <option value="1">Grade A</option>
  <option value="2">Grade B</option>
</select>
</span>
</body>
</html> 
```

# wpf - 始终有一个选定的 DataGrid 行

> ID：11669258
> 
> 赞同：0
> 
> 时间：2012-07-26T12:25:48.003
> 
> 标签：wpf, wpfdatagrid

我现在正在使用 WPF dataGrind 并面临一个 ussie。我需要 dataGrid 总是有一个选定的行。总是而且只有一个。

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:41:29.927

试试这个：

```
<DataGrid SelectionMode="Single" SelectionUnit="FullRow" PreviewMouseDown="PreviewMouseDown"/> 
```

编辑：

```
 private void PreviewMouseDown(object sender, MouseButtonEventArgs e)
    {
        if (Keyboard.IsKeyDown(Key.LeftCtrl) || Keyboard.IsKeyDown(Key.RightCtrl))
            e.Handled = true;
    } 
```

# wpf - 在用户控件和主视图之间共享数据

> ID：11669261
> 
> 赞同：2
> 
> 时间：2012-07-26T12:25:56.243
> 
> 标签：wpf, mvvm, view, user-controls

我有一个带有他自己的 ViewModel 的 UserControl(AutoComplete)。当我在窗口内使用 UserControl 时，它运行良好、连接到服务并正确绘制数据。UserControl 数据上下文通过 xaml 设置，并绑定到主窗口 viewModel 的属性。

好的，现在我希望 UserControl 可以从主窗口视图模型加载数据。问题是，假设用户控件加载国家。当我在用户控件中键入时，它返回国家列表，当我选择其中一个国家时，即“西班牙”，用户控件的 SelectedItem 属性更新为“西班牙”。我希望主窗口视图模型中的一个对象更新为“西班牙”，反之亦然，如果我更新主窗口视图模型中的国家对象，用户的选定项也应该更新。

我怎样才能做到这一点

我的主视图中有这个：

```
<amctrls:AmAutoCompleteView DataContext="{Binding controladorAutoCompleteCountry}" /> 
```

用户控件看起来像这样：

```
<telerik:RadComboBox Margin="2,0,0,0" Grid.Row="0" Grid.Column="0"  
            IsEditable="True"
            Name="RadCbo"
            ItemsSource="{Binding objectList}" 
            DisplayMemberPath="{Binding fieldToShow}"
            OpenDropDownOnFocus="True"
            SelectedItem="{Binding selectedCountry, Mode=TwoWay}"
            Text="{Binding searchText, Mode=TwoWay}"
            IsTextSearchEnabled="False" 
            StaysOpenOnEdit="True" /> 
```

controladorAutoCompleteCountry 是我的主视图的一个属性，它是用户控件视图模型的一个实例。

主视图的视图模型管理地址，我想要的是将地址国家绑定到用户控件以编辑地址。如果我将用户控件绑定到其控制器的实例，如何绑定地址的 Country 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:03:47.817

如果您需要使这两个视图独立，如果您想重用您的控件，这很好，请使用事件聚合器或简单事件。每当在用户控件中选择一个项目时，它都会发布一个事件，说明发生了一些有趣的事情。主视图模型可以订阅这些事件并执行所需的操作。一个简单的例子是创建一个带有事件和 RaiseEvent 方法的静态类，用户控件将 RaiseEvent 和主视图模型订阅该事件。要在它们之间传递的数据可以添加到事件参数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:20:39.297

有点相反，但你可以尝试这样的事情：

有一个 MainView

*   `combobox`绑定到字符串属性 SelectedCountry 和方法 ChangeCountry()
*   `ContentControl`绑定到 CountryInfoViewModel 属性 SelectedCountryControl

您现在可以将您的组合框绑定到 MainView 中加载的 CountryInfoViewModel。

下面是一个对我有用的示例（请注意，我在这里使用了 caliburn micro）。It basicly updates the CountryInfoViewModel/View when a different country has been selected. 您可以改进 ChangeCountry 方法以获取所有数据，当然还可以改进 CountryInfoViewModel/View 以显示您想要显示的所有内容。

## 主视图模型

```
class MainViewModel : Screen
{
    #region fields

    private BindableCollection<string> _listOfCountries;
    private string _selectedCountry;
    private CountryInfoViewModel _selectedCountryControl;

    #endregion fields

    #region properties

    public BindableCollection<string> ListOfCountries
    {
        get
        {
            return new BindableCollection<string>
                       {
                           "France",
                           "Holland",
                           "Russia"
                       };
        }
    }

    public string SelectedCountry
    {
        get { return _selectedCountry; }
        set
        {
            _selectedCountry = value;
            NotifyOfPropertyChange(() => SelectedCountry);
        }
    }

    public CountryInfoViewModel SelectedCountryControl
    {
        get { return _selectedCountryControl; }
        set
        {
            _selectedCountryControl = value;
            NotifyOfPropertyChange(() => SelectedCountryControl);
        }
    }

    #endregion properties

    public MainViewModel()
    {
        SelectedCountry = "Holland";
        ChangeCountry();
    }

    public void ChangeCountry()
    {
        SelectedCountryControl = new CountryInfoViewModel()
                                   {
                                       CountryName = SelectedCountry
                                   };
    }
} 
```

## 主视图：

```
<UserControl x:Class="WpfModifyDifferentView.Views.MainView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <StackPanel>
        <ComboBox x:Name="ChangeCountry" SelectedItem="{Binding SelectedCountry}" ItemsSource="{Binding ListOfCountries}"/>
        <ContentControl x:Name="SelectedCountryControl"/>
    </StackPanel>
</UserControl> 
```

## 国家信息视图模型：

```
class CountryInfoViewModel : Screen
{
    #region fields

    private string _countryName;

    #endregion fields

    #region properties

    public string CountryName
    {
        get { return _countryName; }
        set
        {
            _countryName = value;
            NotifyOfPropertyChange(() => CountryName);
        }
    }

    #endregion properties

} 
```

## 国家信息视图：

```
<UserControl x:Class="WpfModifyDifferentView.Views.CountryInfoView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <StackPanel Orientation="Vertical">
        <TextBlock Text="You have chosen the country:"/>
        <TextBlock x:Name="CountryName"/>
    </StackPanel>
</UserControl> 
```

# extjs - ExtJS4.1 在过滤器中仅显示排除的值

> ID：11669268
> 
> 赞同：0
> 
> 时间：2012-07-26T12:26:17.443
> 
> 标签：extjs, extjs4, filtering, extjs4.1

我正在尝试使用[此](https://stackoverflow.com/questions/9627821/filtering-a-treestore-in-ext-js-4)示例为树存储编写过滤器，我想知道如何调整/调用过滤器方法，以便显示与过滤器参数不匹配的值。

我尝试对其进行调整，使其仅在过滤器参数错误时才调用 node.remove() 。但是，这似乎并没有更新商店和面板。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:57:29.080

为此，我需要编写 Filter.filterfn 的自定义实现。

```
Filter({
 filterfn: function(record){
   //Insert Logic
 }
}) 
```

# c++ - boost shared_ptr的底层设计

> ID：11669269
> 
> 赞同：4
> 
> 时间：2012-07-26T12:26:25.787
> 
> 标签：c++, boost

我试图了解 boost shared_ptr 类的底层设计。我想将它“移植”到fortran（不要问）。我理解的一件事是引用计数由 shared_count 类保存。这提示我一个问题。很久没用过C++了，也没用过boost。

假设我分配了一个类 X 的单个实例，然后将它传递给两个不同的 shared_ptr 实例。据我了解，每个 shared_ptr 实例都不知道另一个实例，因此两个 shared_ptr 实例都引用同一个 X 实例，同时保持 refcount 为 1。如果一个 shared_ptr 超出范围而另一个没有，则X 对象将被删除（因为 refcount 降至零）并且剩余的 shared_ptr 将有一个悬空指针。为了保持 shared_ptr 引用计数，您必须从另一个 shared_ptr 创建一个 shared_ptr。

我对吗 ？如果没有，boost 如何跟踪哪些 shared_ptrs 正在引用一个对通过 shared_ptrs 引用的事实一无所知的类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T12:32:00.447

基本上你是对的。您的示例将导致悬空指针（请注意，如果您[`boost::enable_shared_from_this`](http://www.boost.org/doc/libs/1_38_0/libs/smart_ptr/enable_shared_from_this.html)用作基类，则会出现一些例外情况）。

## 解释

### 问题

`boost:shared_ptr`并`std::shared_ptr`分享相同的想法：使用原始指针的引用计数创建一个智能指针。但是，它们也存在所有智能指针所具有的相同问题：如果您在*另一个*与您的其他智能指针无关的智能指针中使用原始指针，您将以悬空指针和多次调用结束`delete`：

```
int * ptr = new int;
{
    std::shared_ptr<int> shared1(ptr); // initialise a new ref_count = 1
    {
        std::shared_ptr<int> shared2(ptr);  // initialise a new ref_count = 1
    } // first call of delete, since shared2.use_count() == 0
} // second call of delete, since shared1.use_count() == 0\. ooops 
```

### “解决方案”

从指向对象的`S`原始指针创建第一个智能指针后，只要不是从. boost 有点等价于这个，但是混合原始指针和智能指针仍然是一个坏主意。更好的是 - 如果您使用智能指针，请不要使用原始指针：`p``O``S``p``O`[`std::enable_shared_from_this`](http://en.cppreference.com/w/cpp/memory/enable_shared_from_this)

```
std::shared_ptr<int> ptr(new int);
{
    std::shared_ptr<int> shared1(ptr); // ptr.use_count() == 2
    {
        std::shared_ptr<int> shared2(ptr);  // ptr.use_count()  = 3
    } // ptr.use_count()  = 2
}  // ptr.use_count()  = 1 
```

更好的是，不要自己分配内存，而是使用[`std::make_shared`](http://en.cppreference.com/w/cpp/memory/shared_ptr/make_shared)or [`boost:make_shared`](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/make_shared.html)：

```
std::shared_ptr<int> ptr = std::make_shared<int>();
{
    std::shared_ptr<int> shared1(ptr); // ptr.use_count() == 2
    {
        std::shared_ptr<int> shared2(ptr);  // ptr.use_count() == 3
    } // ptr.use_count() == 2
}  // ptr.use_count() == 1 
```

### 可能的实施

与 相比，以下实现非常粗糙`std::shared_ptr`，因为它不支持`std::weak_ptr`和`std::enable_shared_from_this`。但是，它应该为您提供如何处理共享指针的概述：

```
//!\brief Base clase for reference counter
class reference_base{
    reference_base(const reference_base&);                            // not copyable
    reference_base& operator=(const reference_base &){return *this;}// not assignable    

protected:
    size_t ref_count; //!< reference counter
    virtual void dispose() = 0; //!< pure virtual
public:    
    //! initialize with a single reference count
    reference_base() : ref_count(1){}

    //! returns the current count of references
    size_t use_count() const{
        return ref_count;
    }

    //! increases the current count of references
    void increase(){
        ref_count++;
    }

    //! decreases the current count of references and dispose if the counter drops to zero
    void decrease(){
        if(--ref_count == 0)
            dispose();
    }
};

//! \brief Specialized version for pointer
template <class T>
class reference_base_ptr : public reference_base{
    typedef T* pointer_type;
protected:
    //! uses delete to deallocate memory
    virtual void dispose(){
        delete ptr;
        ptr = 0;
    }
public:
    reference_base_ptr(T * ptr) : ptr(ptr){}
    pointer_type ptr;
};

//! \brief Specialized version for arrays
template <class T>
class reference_base_range : public reference_base{
    typedef T* pointer_type;

protected:
    virtual void dispose(){
        delete[] ptr;
        ptr = 0;
    }
public:
    reference_base_range(T * ptr) : ptr(ptr){}
    pointer_type ptr;
};

/***********************************************************/

//! base class for shared memory
template <class T, class reference_base_type>
class shared_memory{
    public:
        typedef T element_type;

        //! Standard constructor, points to null
        shared_memory() : reference_counter(new reference_base_type(0)){}

        //! Constructs the shared_memroy and creates a new reference_base
        template<class Y> shared_memory(Y * ptr){
            try{
                reference_counter = new reference_base_type(ptr);
            }catch(std::bad_alloc &e){
                delete ptr;
                throw;
            }
        }
        //! Copies the shared_memory and increases the reference count
        shared_memory(const shared_memory & o) throw() : reference_counter(o.reference_counter){
            o.reference_counter->increase();
        }

        //! Copies the shared_memory of another pointer type and increases the reference count.
        //! Needs the same reference_base_type
        template<class Y> 
        shared_memory(const shared_memory<Y,reference_base_type> & o) throw() : reference_counter(o.reference_counter){
            reference_counter->increase();
        }

        //! Destroys the shared_memory object and deletes the reference_counter if this was the last
        //! reference.        
        ~shared_memory(){
            reference_counter->decrease();
            if(reference_counter->use_count() == 0)
                delete reference_counter;
        }

        //! Returns the number of references
        size_t use_count() const{
            return reference_counter->use_count();
        }

        //! Returns a pointer to the refered memory
        T * get() const{
            return reference_counter->ptr;
        }

        //! Checks whether this object is unique
        bool unique() const{
            return use_count() == 1;
        }        

        //! Checks whehter this object is valid
        operator bool() const{
            return get() != 0;
        }

        //! Checks doesn't reference anythign
        bool empty() const{
            return get() == 0;
        }

        //! Assignment operator for derived classes
        template<class Y> 
        shared_memory& operator=(const shared_memory<Y,reference_base_type> & o){
            shared_memory<Y,reference_base_type> tmp(o);
            swap(tmp);
        }

        //! Assignment operator
        shared_memory& operator=(const shared_memory & o){
            shared_memory tmp(o);
            swap(tmp);
            return *this;
        }

        /** resets the ptr to NULL. If this was the last shared_memory object
        *   owning the referenced object, the object gets deleted.
        *   \sa ~shared_memory
        */
        void reset(){
            shared_memory tmp;
            swap(tmp);
        }

        /** releases the old object and takes a new one
        */
        template <class Y>
        void reset(Y * ptr){
            shared_memory tmp(ptr);
            swap(tmp);
        }        

        /** swaps the owned objects of two shared_memory objects.
        */
        void swap(shared_memory & r){
            reference_base_type * tmp = reference_counter;
            reference_counter = r.reference_counter;
            r.reference_counter = tmp;
        }

    protected:        
        reference_base_type * reference_counter;    //!< Actually reference counter and raw pointer
};

/***********************************************************/

//! ptr (single object) specialization
template <class T>
class shared_ptr : public shared_memory<T,reference_base_ptr<T> >{
    typedef reference_base_ptr<T> reference_counter_type;
    typedef shared_memory<T,reference_counter_type> super;
    typedef T element_type;
public:
    shared_ptr(){}
    template<class Y> shared_ptr(Y * ptr){
        try{
            super::reference_counter = new reference_counter_type(ptr);
        }catch(std::bad_alloc &e){
            //couldn't allocated memory for reference counter
            delete ptr; // prevent memory leak
            throw bad_alloc();
        }
    }
    element_type & operator*() const{
        return *(super::reference_counter->ptr);
    }
    element_type * operator->() const{
        return super::reference_counter->ptr;
    }
};

/***********************************************************/

//! array (range) specialization
template <class T>
class shared_array : public shared_memory<T,reference_base_range<T> >{
    typedef reference_base_range<T> reference_counter_type;
    typedef shared_memory<T,reference_counter_type> super;
    typedef T element_type;

public:
    shared_array(){}
    template<class Y> shared_array(Y * ptr){
        try{
            super::reference_counter = new reference_counter_type(ptr);
        }catch(std::bad_alloc &e){
            delete[] ptr;
            throw bad_alloc();
        }
    }
    element_type & operator[](int i) const{
        return *(super::reference_counter->ptr + i);
    }
}; 
```

也可以看看：

*   [`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)
*   [`boost::shared_ptr`](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/shared_ptr.htm)，尤其是[最佳实践部分](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/shared_ptr.htm#BestPractices)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:27:18.243

这是 的当前实现`boost::shared_ptr<X>`，但可以想到其他没有这个缺点的实现。例如，a`static std::unordered_map<X*, int> std::shared_ptr<X>::share_count`可用于跟踪`shared_ptr<X>`指向每个 的指针的数量`X`。但是，这样做的缺点是开销远大于简单的共享计数。

# c# - 将 int 转换为 double 并四舍五入到最后一个整数

> ID：11669275
> 
> 赞同：3
> 
> 时间：2012-07-26T12:26:54.053
> 
> 标签：c#, algorithm

我在这里遇到了一个小问题，假设您有以下代码：

```
int whole = 0;
double decimal = 88.00

whole = decimal / 1.5; //now the answer is 58.66 
```

所以这就是问题所在，将 double 显式转换为 int 很容易。但是如果我现在这样做，“整体”将被设置为 59。这 - 不太好，我希望它被设置为最后一个整数（即 58）。

你如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T12:42:11.093

要将双精度数舍入为整数，您有 4 个基本数学函数：

1.  [`Math.Round()`](http://msdn.microsoft.com/en-us/library/as4h66hd)- 四舍五入到最接近的整数（或用户指定的小数位数），并让您选择向上或向下舍入中间点。

2.  [`Math.Floor()`](http://msdn.microsoft.com/en-us/library/system.math.floor)- 向负无穷方向舍入到第一个整数。

3.  [`Math.Ceiling()`](http://msdn.microsoft.com/en-us/library/system.math.ceiling)- 向正无穷方向舍入到第一个整数。

4.  [`Math.Truncate()`](http://msdn.microsoft.com/en-us/library/system.math.truncate)- 向零舍入到第一个整数。

我想你想要`Floor`要么`Truncate`。两者都向下舍入为正数，但`Truncate`将 -3.6 舍入到 -3，同时将其舍`Floor`入到 -4。

转换为`int`与截断相同，因此您可以根据需要使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T12:29:35.830

[数学楼层](http://msdn.microsoft.com/en-us/library/system.math.floor.aspx)：

```
whole = (int)Math.Floor(decimal / 1.5); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T12:38:48.350

如果您`double`转换为`int`，答案将不是 59 - 而是 58。转换`double`为 时`int`，该值将四舍五入**到零**。所以，这就足够了：

```
int whole = 0;
double x = 88.00;
whole = (int)(x / 1.5); // whole will be 58 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T12:29:08.690

如果要舍入到最后一个整数，请使用[Math.Floor ，如果要舍入到下一个整数，请使用](http://msdn.microsoft.com/en-us/library/system.math.floor.aspx)[Math.Ceiling](http://msdn.microsoft.com/en-us/library/6w37edx9)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T12:32:02.673

这会将双精度值转换为`int`：

```
whole = (int)(decimal / 1.5); 
```

此外，您可以使用`Math.Floor(doubleValue)`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T17:05:54.093

如果你需要四舍五入，这很常见：whole = (int)(decimal / 1.5 + 0.5); 没有 0.5，您将截断，而不是四舍五入。

如果你的数学库中有舍入函数，那也很好。其中一些会为舍入 0.5 做奇数/偶数的事情，以避免一点点数据倾斜。

# c++ - 如何知道 CWnd 滚动条是否可见？

> ID：11669277
> 
> 赞同：1
> 
> 时间：2012-07-26T12:26:57.973
> 
> 标签：c++, mfc

我有一个显示图像的自定义控件。当图像超过可显示尺寸时显示滚动条。出于某种原因，我想知道是否显示水平或垂直滚动​​条。`CWnd`我在课堂上找不到任何直接功能。

我发现`GetScrollBarInfo`但没有运气检查。这是代码：

```
SCROLLBARIINFO stHSBInfo;
GetScrollBarInfo( this->GetSafeHwnd(), OBJID_HSCROLL, &stHSBInfo );
if(  !( STATE_SYSTEM_INVISIBLE &stHSBInfo.rgstate[0] )) // Always true
{
    // Code
} 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:19:41.287

使用 GetSystemMetrics 获取系统滚动条宽度的大小。比较 GetWindowRect 和 GetClientRect 之间的自定义控件的大小。如果差异大于滚动条宽度的大小，则 是可见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-28T20:25:28.643

文档指出，“在调用`GetScrollBarInfo`函数之前，设置`cbSize`为`sizeof(SCROLLBARINFO)`.”

您的代码应更新为：

```
SCROLLBARIINFO stHSBInfo;
stHSBInfo.cbSize = sizeof(SCROLLBARINFO);
GetScrollBarInfo( this->GetSafeHwnd(), OBJID_HSCROLL, &stHSBInfo );
if(  !( STATE_SYSTEM_INVISIBLE &stHSBInfo.rgstate[0] )) // Always true
{
    // Code
} 
```

# c# - 当控件来自 DataTemplate 时，BindingOperations.ClearBinding(...) 不起作用

> ID：11669282
> 
> 赞同：4
> 
> 时间：2012-07-26T12:27:09.923
> 
> 标签：c#, .net, wpf, data-binding, datatemplate

我有点坚持这个。清除`TextProperty`一些`TextBox`不属于 a的绑定`DataTemplate`可以正常工作。但是当`TextBox`是 a 的一部分时`DataTemplate`，清除绑定似乎是一个空操作，如下面的片段所示。监视值`true`甚至在绑定可能被清除之后：

![在此处输入图像描述](../Images/fa2b8ebeec86baf5eca402f9ce409b83.png)

这是设计使然吗？如果没有，我做错了什么？

这是 MSDN 文档：http `ClearBinding(...)`: [//msdn.microsoft.com/en-us/library/system.windows.data.bindingoperations.clearbinding](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingoperations.clearbinding)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T17:02:52.117

我发现这篇[MSDN 帖子](http://social.msdn.microsoft.com/Forums/en/wpf/thread/e45c7a9d-840d-4508-8c81-ef40f1c74c10)涵盖了这个问题。虽然它似乎没有真正解释这个问题，但它确实提供了一种似乎工作得很好的解决方法。

我用一些虚拟值替换绑定来替换 ClearBinding 调用：

```
AssociatedObject.SetBinding(TextBox.TextProperty, "dummy"); 
```

现在看来，当控件不是来自`DataTemplate`. 因此，为了解决这个问题，并涵盖`TextBox`es from`DataTemplate`和其他方面，我现在这样做：

```
BindingOperations.ClearBinding(AssociatedObject, TextBox.TextProperty);
if (BindingOperations.IsDataBound(AssociatedObject, TextBox.TextProperty))
    AssociatedObject.SetBinding(TextBox.TextProperty, "dummy"); 
```

瞧，绑定被“切断”了，所以我的水印现在似乎工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:38:18.087

不确定这是否可行（没有尝试），但请尝试使用[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingoperations.clearbinding.aspx)`BindingOperations.ClearAllBindings()`摘录中所述的方法（见下文 MSDN 如何*引用*数据模板）：

 *> 清除绑定将删除绑定，以便依赖属性的值更改为没有绑定时的值。此值可以是默认值、继承值或来自数据模板绑定的值。
> 
> 要清除对象上所有可能属性的绑定，请使用 `ClearAllBindings`.*

# apache - apache + Nginx 作为反向代理和 apache + 另一个带有 nginx 的静态内容服务器之间有什么区别吗？

> ID：11669285
> 
> 赞同：0
> 
> 时间：2012-07-26T12:27:13.607
> 
> 标签：apache, nginx

我们将 Apache 与 Nginx（作为反向代理）一起使用以获得更高的并发级别，因为 Nginx 处理静态内容的方式并使用 Apache 缺乏的更少的连接。
现在的问题是，上述场景与使用另一台服务器提供静态内容（css、js、图像等）与 nginX 和安装了 Apache 的主服务器之间有什么区别？
在我的项目中，有数百万用户拥有头像、横幅和照片库。项目几乎准备就绪，我想确保我的方向是正确的。哪个场景最好？

**编辑：**
如果慢速客户端导致 Apache 使线程忙碌的时间超过主服务器所需的时间，会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:41:42.113

Apache 背后的 nginx 的主要目的之一是处理慢速客户端，以确保 Apache 不必为此保持其线程忙碌。

顺便说一句，我认为它与主题相关[http://www.aosabook.org/en/nginx.html](http://www.aosabook.org/en/nginx.html)

# c++ - Objective-C++ 11 - 为什么我们不能将块分配给 lambda？

> ID：11669292
> 
> 赞同：16
> 
> 时间：2012-07-26T12:27:27.257
> 
> 标签：c++, objective-c, lambda, c++11, objective-c++

所以，我刚刚升级到 Xcode 4.4，我在更新日志中注意到：

> Apple LLVM 编译器支持其他 C++11 功能，包括 lambda

太棒了！所以我开始编码，我发现了一些事情：

1.  Lambda 可分配给 Objective-C 块：

    ```
    void (^block)() = []() -> void { 
        NSLog(@"Inside Lambda called as block!");
    };

    block(); 
    ```

2.  `std::function`可以容纳一个 Objective-C 块：

    ```
    std::function<void(void)> func = ^{
        NSLog(@"Block inside std::function");
    };

    func(); 
    ```

3.  我们不能将 Objective-C 块分配给 lambda：

    ```
    auto lambda = []() -> {
        NSLog(@"Lambda!");
    };

    lambda = ^{ // error!
        NSLog(@"Block!");
    };

    lambda(); 
    ```

为什么是这样？鉴于我们在上面看到的，这两者在语义上不应该是等价的吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T12:47:44.243

C++11 的 lambda 的复制赋值运算符被明确禁用¹。这不是“语义等价”的问题。它甚至不能分配回自己。更不用说不相关的类型了。

```
#include <cstdio>
#include <type_traits>

int main() {
    auto lambda1 = []() -> void { printf("Lambda 1!\n"); };
    lambda1 = lambda1;  // error: use of deleted function ‘main()::<lambda()>& main()::<lambda()>::operator=(const main()::<lambda()>&)’
    return 0;
} 
```

* * *

`std::function`可以容纳一个 Objective-C 块。

*   `std::function`可以保存任何可以调用的类型`f(a,b,c,...)`。由于块支持“调用运算符”，它也可以由`std::function`. 但是请注意，Objective-C 和 C++ 遵循不同的内存管理方案，因此在 a`std::function`中长时间存储块可能会导致悬空引用。

* * *

Lambda 可分配给 Objective-C 块：

*   责备[SAHChandler](https://stackoverflow.com/questions/4148242/is-it-possible-to-convert-a-c0x-lambda-to-a-clang-block) ² :)。不过，它还没有记录在案。

* * *

¹：C++11 §5.1.2/19：

> *与lambda 表达式*关联的闭包类型具有已删除的 (8.4.3) 默认构造函数和已删除的复制赋值运算符。

²： http://llvm.org/viewvc/llvm-project?view=rev&revision= [150620](http://llvm.org/viewvc/llvm-project?view=rev&revision=150620)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T12:46:24.393

Lambda 有自己的、实现定义的类型，这些类型特定于每个 lambda。下面的代码也是一个错误：

```
auto l1=[](){return 1;}
auto l2=[](){return 2;}
l1=l2; //Error 
```

`std::function`是一个包装器，旨在保存任何可调用类型；您应该使用它来保存可能是不同类型的可调用对象。

# android-emulator - 不在模拟器或设备中显示谷歌广告

> ID：11669293
> 
> 赞同：0
> 
> 时间：2012-07-26T12:27:28.333
> 
> 标签：android-emulator

该代码没有显示任何错误：

```
main.xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"

  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

  <com.google.ads.AdView android:id="@+id/googleads"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adUnitId="jkdfj8485idj34"
        ads:adSize="BANNER"
        ads:refreshInterval="60"
         ads:loadAdOnCreate="true"/>

  <TextView
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:text="AD" />

</LinearLayout>

AdmobActivity.java
 AdView ad = (AdView)findViewById(R.id.googleads);

        ad.setEnabled(true);
        ad = new AdView(this, AdSize.BANNER, MY_BANNER_UNIT_ID);
        AdRequest r = new AdRequest();
        //r.addTestDevice(AdRequest.TEST_EMULATOR);
        r.addTestDevice("CD9E4FDFA47A4AA03F9883E77C036EB3");
        //r.setTesting(true);
        ad.loadAd(r); 
```

我有以下警告：

> 07-26 15:51:24.046: W/webcore(842): 在第一个布局后无法获取 viewWidth 07-26 15:51:24.871: W/Ads(842): 无效的未知请求错误：无法确定请求类型。您的广告单元 ID 是否正确？

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:55:38.663

查看这些链接是否有助于解决您面临的问题：

*   [如何使用 Android 设备让 Google 的示例代码适用于 AdMob 4.1.0](https://stackoverflow.com/questions/6389156/how-to-get-googles-example-code-working-for-admob-4-1-0-using-an-android-device)
*   [android webview admob不显示](https://stackoverflow.com/questions/6757849/android-webview-admob-not-displaying)

# windows-phone-7 - WP7 从 ListBoxItem 样式绑定到非列表框 itemsource 属性

> ID：11669295
> 
> 赞同：0
> 
> 时间：2012-07-26T12:27:43.273
> 
> 标签：windows-phone-7, xaml, binding

我在 viewmodel 中有这样的属性：

```
public class TestObject
{
    public Color Color { get; set; }
    public IList<Items> { get; set; }
    ...
} 
```

视图中的列表框如下：

```
<ListBox ItemsSource="{Binding TestObject.Items}" .... 
```

和这样的列表框样式：

```
<Style TargetType="ListBoxItem">
           ...
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="LayoutRoot" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="SelectionStates">
                                    <VisualState x:Name="Unselected"/>
                                    <VisualState x:Name="Selected">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentContainer" Storyboard.TargetProperty="Foreground" Duration="0">
                                                <DiscreteObjectKeyFrame  KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <SolidColorBrush Color="{**Binding to TestObject.Color ???}**" />
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border" Storyboard.TargetProperty="Background" Duration="0">
                                                <DiscreteObjectKeyFrame  KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <SolidColorBrush Color="{**Binding to TestObject.Color ???}**"/>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups> 
```

...

所以请...我如何绑定 ItemsSource 绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:50:18.397

我不确定你问题的控制风格部分......但通常如果我想绑定到当前项目之外的东西，那么我会使用一个`ElementName`技巧来使其工作 - 例如

```
 <Grid Name='RootLayout'>
     <ListBox ItemsSource='{Binding Items}'>
          <ListBox.ItemTemplate>
               <DataTemplate>
                    <TextBlock Text="{Binding Title}" Foreground="{Binding DataContext.PriorityColor, ElementName=RootLayout}" />
               </DataTemplate>
          </ListBox.ItemTemplate>
     </ListBox>
 </Grid> 
```

* * *

我通常也不会将 Color 直接包含在我的 ViewModel 中，而是使用如下转换器：

```
 <TextBlock Text="{Binding Title}" Foreground="{Binding DataContext.Priority, ElementName=RootLayout, Converter={StaticResource PriorityToColorConverter}}" /> 
```

如果您正在执行跨平台视图模型，这将特别有用 - 因为颜色和画笔类不会在 WP7 和 WinRT 之间共享，更不用说在 MonoTouch 和 MonoDroid 之间共享了。

# objective-c - 自 OSX 10.8 起屏幕保护程序崩溃

> ID：11669298
> 
> 赞同：1
> 
> 时间：2012-07-26T12:27:52.820
> 
> 标签：objective-c, macos, cocoa, screensaver

从 OSX 10.8 开始，我的屏幕保护程序崩溃了：

```
Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libobjc.A.dylib                 0x00007fff94749790 objc_msgSend_vtable13 + 16
1   com.apple.Foundation            0x00007fff9508941f -[NSObject(NSThreadPerformAdditions) performSelector:onThread:withObject:waitUntilDone:modes:] + 163
2   com.apple.Foundation            0x00007fff950892f8 -[NSObject(NSThreadPerformAdditions) performSelectorOnMainThread:withObject:waitUntilDone:] + 131
3   albertzeyer.PictureSlider       0x000000010f6e64c7 -[PictureSliderView nextFileName] + 71 (PictureSliderView.m:69)
4   albertzeyer.PictureSlider       0x000000010f6e6675 -[PictureSliderView loadNext] + 53 (PictureSliderView.m:86)
5   albertzeyer.PictureSlider       0x000000010f6e695f -[PictureSliderView initWithFrame:isPreview:] + 447 (PictureSliderView.m:116)
6   com.apple.ScreenSaver           0x00007fff968c7cb5 -[ScreenSaverModules loadModule:frame:isPreview:] + 968 
```

相关代码：

```
- (void) queuedFileNamesPop:(NSString**)fn {
    if([queuedFileNames count] > 0) {
        *fn = [queuedFileNames objectAtIndex:0];
        [queuedFileNames removeObjectAtIndex:0];
    }
}

- (NSString*) nextFileName
{
    NSString* fn = nil;
    [self performSelectorOnMainThread:@selector(queuedFileNamesPop:) withObject:(id)&fn waitUntilDone:YES];
    if(!fn) {
        [nextFileNameLock lock];
        fn = [[NSString alloc] initWithUTF8String:FileQueue_getNextFile()];
        [nextFileNameLock unlock];
    }
    return fn;
} 
```

它似乎崩溃了，`performSelectorOnMainThread`但我真的不明白为什么。有什么明显的我做错了吗？

此外，它仅在从 ScreenSaverEngine 运行时才会崩溃。我还有一个小的虚拟应用程序，它使用相同的视图来测试屏幕保护程序，它不会在那里崩溃。

* * *

[编辑：我刚才在这里](https://stackoverflow.com/questions/8491149/objc-cast-of-an-indirect-pointer-to-an-objective-c-pointer)问了一些非常相关的东西（相同的代码）。我想知道为什么我最后没有采取这些解决方案之一......

* * *

编辑：乔纳森建议的代码更改后，此崩溃不再发生。但是，在其他事件中，我遇到了其他崩溃，带有这个回溯：

```
Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   com.apple.CoreFoundation        0x00007fff8f9aefe8 CFRelease + 248
1   com.apple.CoreFoundation        0x00007fff8f9d6770 -[__NSArrayM removeObjectAtIndex:] + 400
2   albertzeyer.PictureSlider       0x0000000108c54425 -[PictureSliderView queuedFileNamesPop:] + 197 (PictureSliderView.m:64)
3   com.apple.Foundation            0x00007fff95089450 -[NSObject(NSThreadPerformAdditions) performSelector:onThread:withObject:waitUntilDone:modes:] + 212
4   com.apple.Foundation            0x00007fff950892f8 -[NSObject(NSThreadPerformAdditions) performSelectorOnMainThread:withObject:waitUntilDone:] + 131
5   albertzeyer.PictureSlider       0x0000000108c544b0 -[PictureSliderView nextFileName] + 128 (PictureSliderView.m:71)
6   albertzeyer.PictureSlider       0x0000000108c54665 -[PictureSliderView loadNext] + 53 (PictureSliderView.m:88)
7   albertzeyer.PictureSlider       0x0000000108c54cce -[PictureSliderView keyDown:] + 382 (PictureSliderView.m:178)
8   com.apple.AppKit                0x00007fff924ad8e0 -[NSWindow sendEvent:] + 9687 
```

或这个：

```
Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libobjc.A.dylib                 0x00007fff947497d0 objc_msgSend_vtable14 + 16
1   com.apple.CoreFoundation        0x00007fff8f9aef9a CFRelease + 170
2   com.apple.CoreFoundation        0x00007fff8f9d6770 -[__NSArrayM removeObjectAtIndex:] + 400
3   albertzeyer.PictureSlider       0x00000001023fac51 -[PictureSliderView keyDown:] + 257 (PictureSliderView.m:172)
4   com.apple.AppKit                0x00007fff924ad8e0 -[NSWindow sendEvent:] + 9687 
```

我还不确定它们是相关的还是独立的。

编辑：他们没有关系。他们是因为其他`[fn release]`地方的另一个额外的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:45:30.033

您正在将非对象转换为对象。这可能与 Objective-C 运行时或 Foundation 中的内存管理更改相冲突（看起来他们可能已经开始构建`NSObject`启用 ARC。）

而不是`(id)&fn`，试试这个：

```
NSValue *fnHandle = [NSValue valueWithPointer: &fn];
[self performSelectorOnMainThread: @selector(queuedFileNamesPop:) withObject: fnHandle waitUntilDone: YES]; 
```

这将传递`fn`包装在对象中的地址。然后，在被调用的方法中：

```
- (void)queuedFileNamesPop: (NSValue *)fnHandle {
    NSString **fn = [fnHandle pointerValue];
    if (fn) {
        // existing code here
    }
} 
```

这可确保始终遵循正确的内存管理。

# java - 我们可以在哪里使用 ArrayList< ？扩展 My_Class>

> ID：11669304
> 
> 赞同：5
> 
> 时间：2012-07-26T12:28:06.383
> 
> 标签：java, generics

我们在哪里可以，`ArrayList<? extends My_Class>`因为如果您以这种方式声明它，它将不允许您添加任何新元素：

```
ArrayList<? extends My_Class> obj=new ArrayList<? extends My_Class>();
list.add(new Derived_My_Class()); //this is compilation error 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T12:30:14.737

描述这些关键字的广泛使用的首字母缩写词是：PECS：Producer extends - consumer super。

因此，如果您使用“扩展”，您的集合*会生成*给定类型的元素。所以你不能添加它，你只能从中获取。

一个示例用法是为您的 API 的客户端提供一个列表：

```
public List<? extends CharSequence> getFoo() {
    List<String> list = new ArrayList<String>();
    list.add("foo");
    return list;
} 
```

相关：[Java 泛型：Collections.max() 签名和比较器](https://stackoverflow.com/questions/2248390/java-generics-collections-max-signature-and-comparator/2248503#2248503)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:32:25.247

你是对的，你`ArrayList`不能以它的派生方式使用：你不能把任何东西放进去。

您想要存储`My_Class`的内容及其子类很简单`ArrayList<My_Class>`；它将正确地获取`My_Class`所有对象。`DerivedClass`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:33:45.970

嗯...没有必要像这样声明 ArrayList ，而是您的意图将通过编写来实现

ArrayList<Supertype> obj=new ArrayList<Supertype>();

根据我的经验，我在方法参数中看到了这个概念，您希望调用者提供特定超类型的子类型的集合（或从方法返回，就像上面有人说的那样）。如下

```
public getAnimals(List< ? extends Animal> obj){

obj.add(something);    //not allowed

} 
```

很有可能您可以在特定类型的列表中添加驴、猴子和鸟类等（例如猴子）。并从中获取 classCastException 。

这就是为什么它在这种情况下是不允许的。阅读 Josh Bloch 的《Effective Java》。他用生产者消费者类比（PECS）很好地解释了它

# java - 执行失败：java.io.IOException：无法运行程序甚至将 jre 更改为 JDK？

> ID：11669318
> 
> 赞同：0
> 
> 时间：2012-07-26T12:29:29.730
> 
> 标签：java, eclipse, ant

我不知道问题的根源，即使我搜索它可以通过安装在 eclipse 中的 jdk 来修复，但同样的问题，任何帮助！

BUILD FAILED E:\GAP\gapvis\build.xml:32：执行此行时出现以下错误：E:\GAP\gapvis\build.xml:108：执行此行时出现以下错误：E:\GAP \gapvis\build.xml:172：执行此行时出现以下错误：E:\GAP\gapvis\build.xml:176：执行失败：java.io.IOException：无法运行程序“lessc.cmd”：CreateProcess error=2, Le fichier spécifié est introuvable

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:33:39.537

Le fichier spécifié est introuvable 意味着找不到 lessc.cmd 文件。你确定把它和build.xml放在同一个目录吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:34:23.337

您需要将 lessc.cmd 添加到您的路径中，因为它要执行它。如果它在系统上可用但 eclipse 忽略它，您需要将该路径添加到 eclipse 中，以便它知道可以在哪里执行它。

计划 b 是在 build.xml 文件中尝试 lessc.cmd 的绝对路径（第 176 行）

# node.js - nodejs，mongodb找不到模块'./connection/read_preference'错误

> ID：11669319
> 
> 赞同：1
> 
> 时间：2012-07-26T12:29:30.937
> 
> 标签：node.js, mongodb

我正在尝试对同事创建的应用程序运行测试并不断收到此错误。调用在第 13 行的 mongodb 模块中

```
ReadPreference = require('./connection/read_preference').ReadPreference, 
```

您知道为什么会发生这种情况吗？我的 mongo db 运行正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:45:09.587

这是 mongoskin 的问题。

```
npm remove mongoskin

npm install mogoskin 
```

解决了

# c++ - 需要帮助理解此 C++ 模板的语法

> ID：11669321
> 
> 赞同：3
> 
> 时间：2012-07-26T12:29:39.360
> 
> 标签：c++, templates

我是 C++ 模板的新手，遇到了这些 C++ 模板相关代码，但无法理解它们的含义：

```
class StringBuffer
{
    CharBuffer cb;
..
    template <size_t ArrayLength>
    bool append(const char (&array)[ArrayLength]) {
        return cb.append(array, array + ArrayLength - 1); /* No trailing '\0'. */
    }
}; 
```

**bool append(const char (&array)[ArrayLength])**是什么意思？在我看来，函数模板将被实例化为带有特定 ArrayLength 参数的东西。但是我们不是不能在函数的参数列表中指定数组长度吗？另外**const char (&array)**是什么意思？它不应该是**const char &**（不带括号）吗？

我正在阅读*David Vandevoorde/Nicolai M.Josuttis 所著的《C++ 模板完整指南》*一书，这本书的哪一部分涵盖了上述语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T12:33:52.510

它的意思是“引用 const char 数组”。原因是，如果你像

```
template <int S>
void f(T a[s]){} 
```

根据“数组参数弃用规则”，您将丢失大小信息，主要是因为指针不保存数组大小信息。（AKA 标准是这样说的。）所以你必须通过引用而不是指针值来传递。

[] 之前的括号是必需的，因为 [] 将优先于 &，因此为了使 & 优先，它需要像

```
 T (&a)[s] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:32:55.633

```
const char (&array)[ArrayLength] 
```

`ArrayLength`是对类型对象数组的引用`char`。

如果没有括号，它将是一个引用数组，这是不允许的。如果没有`&`，它将是一个数组（作为函数参数）衰减为指针，从而丢失有关数组大小的信息。

> 在我看来，函数模板将被实例化为带有特定 ArrayLength 参数的东西。

这是正确的。数组长度在编译时是已知的，这将实例化一个可以使用该编译时值的函数。

> 但是我们不是不能在函数的参数列表中指定数组长度吗？

是的，您可以提供长度作为额外的函数参数；但这将是一个运行时值，并且会有已知的方法来验证它是否正确。模板确保模板参数确实是数组的大小。

> 本书的哪一部分涵盖了上述语法？

我没有那本书，但是看一下[目录，](http://www.josuttis.com/tmplbook/)我建议看一下 4.2（非类型函数模板参数）和 11（模板参数推导）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T12:36:27.993

这是通过引用传递数组的语法（因为在 C++ 中数组不能按值传递）：

```
void foo(const char (&array)[10]) { ... } // We can pass an array of lenth 10 
```

现在在混合中抛出一个模板参数而不是 10。编译器在编译时知道数组的大小，并且可以用正确的值实例化模板。

```
template<size_t N>
void foo(const char (&array)[N])
{
    // use N, it'll be whatever the size of the array you instantiate the template with is
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T12:38:55.300

给定的代码是一个很好的教训：起初，它想传递一个数组，所以不能按值传递，然后通过引用 (&) 传递，然后它通过安全传递它的 const 字传递它。你知道 C/C++ 对数组有限制，所以这段代码的程序员定义了一个数组长度的模板，并解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T13:17:04.320

此语法将根据静态分配的数组参数的大小设置模板参数。

“append”的模板版本（您包含）调用了一个带有 2 个参数的重载：一个指向 char 的指针和一个 count（您没有包含这个）。

所以你可能有一个像这样的数组：

```
const char my_string[] = "hi"; 
```

您将像这样使用“附加”成员函数：

```
my_string_buffer_object.append(my_string); 
```

并且会自动检测 my_string 的长度，将 ArrayLength 参数设置为 my_string 的长度。然后调用更详细的“append”版本，并自动为您填写字符串长度。

基本上，这个版本的“接受”包装了另一个版本。它允许您将数组作为唯一参数传递，使用模板参数的信息自动填充长度。

如果您使用此语法，请记住这些数组长度参数计算元素而不是对象大小（sizeof 会告诉您有关数组的信息）。对于 char，这些是相同的，但具有较大元素类型的数组将生成一个模板数组长度参数，该参数小于其 sizeof。

# sql - SQL 用户定义函数，找不到 dbo 或用户定义函数

> ID：11669322
> 
> 赞同：2
> 
> 时间：2012-07-26T12:29:44.253
> 
> 标签：sql, sql-server, sql-server-2005, select, user-defined-functions

我使用这个查询在我的数据库中创建了一个函数：

```
CREATE FUNCTION dbo.fnSplit(
    @sInputList VARCHAR(MAX) -- List of delimited items
  , @sDelimiter VARCHAR(MAX) = ',' -- delimiter that separates items
) RETURNS @List TABLE (item VARCHAR(MAX))

BEGIN
DECLARE @sItem VARCHAR(MAX)
WHILE CHARINDEX(@sDelimiter,@sInputList,0) <> 0
 BEGIN
 SELECT
  @sItem=RTRIM(LTRIM(SUBSTRING(@sInputList,1,CHARINDEX(@sDelimiter,@sInputList,0)-1))),
  @sInputList=RTRIM(LTRIM(SUBSTRING(@sInputList,CHARINDEX(@sDelimiter,@sInputList,0)+LEN(@sDelimiter),LEN(@sInputList))))

 IF LEN(@sItem) > 0
  INSERT INTO @List SELECT @sItem
 END

IF LEN(@sInputList) > 0
 INSERT INTO @List SELECT @sInputList -- Put the last item in
RETURN
END
GO 
```

SQL Server 返回：`Command(s) completed successfully.`

然后我尝试运行这个查询：

```
SELECT * FROM maj_Posts a
WHERE FeedID = (SELECT dbo.fnSplit(b.FeedIDs) FROM maj_Magazines b WHERE OwnerID = 1)
ORDER BY countOfComments DESC 
```

它返回一个错误：`Msg 4121, Level 16, State 1, Line 1 Cannot find either column "dbo" or the user-defined function or aggregate "dbo.fnSplit", or the name is ambiguous.`

**请注意，这`b.FeedIDs`是一个包含逗号分隔数字的字符串，如下所示：`1,2,4`**

**我想获取`maj_Posts`它们是...`a.FeedID`中的数字之一的`b.FeedIDs`**行（例如，如果`b.FeedIDs`是`1,2,4`，我需要`maj_Posts`它们`FeedID`是 1 或 2 或 4 的行。）

问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T12:36:10.003

也许你的意思是：

```
SELECT * FROM maj_Posts a
LEFT OUTER JOIN dbo.maj_Magazines b
ON 1 = 1 AND b.OwnerID = 1
OUTER APPLY dbo.fnSplit(b.FeedIDs, ',') AS s
WHERE a.FeedID = s.item
ORDER BY countOfComments DESC; 
```

或者

```
SELECT * FROM maj_Posts a
WHERE FeedID IN 
(
  SELECT item FROM maj_Magazines AS b
  CROSS APPLY dbo.fnSplit(b.FeedIDs, ',') 
  WHERE b.OwnerID = 1
)
ORDER BY countOfComments DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T07:06:31.030

```
USE [oberoi]
GO
/****** Object:  StoredProcedure [dbo].[sp_AssetReport]    Script Date: 03/23/2013 12:27:47 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[sp_AssetReport]
AS

BEGIN
SELECT     distinct am.assetid,am.computerName,
 ao.os_name,ao.user_name,ao.reg_code, ao.reg_org, ao.reg_to,
 ao.localization,  ao.product_key,
-- an.ip_address,

   amem.physical_mem,amem.virtual_mem,(Select top 1 ip_address from Asset_Network where assetId=am.assetid) as ip_address,ap.processor_name,ap.speed,  ap.manufacturer,
   api.serial_number,api.product_name, api.product_manufacturer,am.TagNo,am.PONo,dbo.capacity_checkn(apd.capacity) as capacity,am.Location,am.AssetOwner,am.CompanyCode,am.PurchaseDate,am.AssetCategory,am.Remarks
FROM                  Asset_mst As am INNER JOIN
                     -- Asset_Network AS an ON am.assetId = an.assetId INNER JOIN
                      --Asset_Inventory As AI on an.assetId=AI.assetId INNER JOIN
                      Asset_OperatingSystem AS ao on am.assetId=ao.assetId JOIN
                      Asset_Memory AS amem ON ao.assetId = amem.assetId INNER JOIN
                      Asset_Processor AS ap ON amem.assetId = ap.assetId INNER JOIN
                      Asset_ProductInfo AS api ON ap.assetId = api.assetid INNER JOIN
                      Asset_PhysicalDrive AS apd ON am.assetId = apd.assetid 

where CONVERT(datetime,CONVERT(char(12),Am.createdatetime )) = CONVERT(datetime,CONVERT(char(12),ao.inventory_date )) 
--And CONVERT(datetime,CONVERT(char(12),an.inventory_date )) = CONVERT(datetime,CONVERT(char(12),AI.inventoryDate ))
--And CONVERT(datetime,CONVERT(char(12),an.inventory_date )) = CONVERT(datetime,CONVERT(char(12),ao.inventory_date )) 
And 
CONVERT(datetime,CONVERT(char(12),Ao.inventory_date )) = CONVERT(datetime,CONVERT(char(12),amem.inventory_date )) 
And CONVERT(datetime,CONVERT(char(12),amem.inventory_date )) = CONVERT(datetime,CONVERT(char(12),ap.inventory_date ))
And CONVERT(datetime,CONVERT(char(12),ap.inventory_date )) = CONVERT(datetime,CONVERT(char(12),api.inventory_date ))
And CONVERT(datetime,CONVERT(char(12),api.inventory_date )) = CONVERT(datetime,CONVERT(char(12),apd.inventory_date ))
and am.Isdelete=0

enter code here

End 
```

# visual-studio-2012 - VS 2012 和 TFS 2012 中自动合并的编码问题

> ID：11669324
> 
> 赞同：1
> 
> 时间：2012-07-26T12:29:51.077
> 
> 标签：visual-studio-2012

在使用 Visual Studio 2012 进行自动合并时，我遇到了一些编码问题。

我发现了一篇记录视觉工作室行为变化的博客文章：http: [//blogs.msdn.com/b/buckh/archive/2005/09/10/463281.aspx](http://blogs.msdn.com/b/buckh/archive/2005/09/10/463281.aspx)

博客文章指出，我们需要设置服务器编码才能解决问题。

我还没有找到办法做到这一点。

有任何想法吗 ？

# ruby-on-rails - 设计：在用户创建时创建额外记录

> ID：11669325
> 
> 赞同：1
> 
> 时间：2012-07-26T12:29:53.410
> 
> 标签：ruby-on-rails, devise, has-and-belongs-to-many

当用户使用 devise 创建帐户时，如何创建额外记录？

使用用户和团队模型之间的 HABTM 关联，​​我正在尝试创建一个与用户相关联的团队，以便在那里创建帐户。

下面是我尝试使用的代码。

```
class RegistrationsController < Devise::RegistrationsController
  def create
    super
    current_user.teams.create(:name => 'User Name')
  end
end 
```

我也试过这个

```
class RegistrationsController < Devise::RegistrationsController
def create

    build_resource

        if resource.save
        resource.teams.create(:name => 'User Name')
        if resource.active_for_authentication?
            set_flash_message :notice, :signed_up if is_navigational_format?
            sign_in(resource_name, resource)
            respond_with resource, :location => after_sign_up_path_for(resource)
        else
            set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
            expire_session_data_after_sign_in!
            respond_with resource, :location => after_inactive_sign_up_path_for(resource)
        end
        else
        clean_up_passwords resource
        respond_with resource
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:50:50.860

我通过更改 routes.rb 以指向自定义控制器解决了这个问题。

路线.rb

```
devise_for :users,
           :controllers => { :registrations => "registrations" } 
```

注册控制器.rb

```
class RegistrationsController < Devise::RegistrationsController
   def create
     super
     resource.teams.create(:name => 'User Name')    
   end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:11:25.060

您可以像这样在模型中使用 before_save：

```
class User < ActiveRecord::Base
  # ... your code ...
  after_create :set_user_on_team
  # ... your code ...
  private
    def set_user_on_team
      teams.create(:name => username)
    end
end 
```

请参阅此处的文档：http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#available-callbacks](http://guides.rubyonrails.org/active_record_validations_callbacks.html#available-callbacks)

# c# - 将 mvc-3 应用程序发布到 Windows Azure 时无法加载图像和插件

> ID：11669326
> 
> 赞同：0
> 
> 时间：2012-07-26T12:29:55.867
> 
> 标签：c#, asp.net-mvc-3, azure

当我们将mvc-3项目发布到windos azure时，是否复制项目名称文件夹下的所有文件和文件夹，意思是像Scripts，Contents等？我问这个是因为我只是将我的 mvc-3 应用程序发布到 windowsazure，然后当我使用 staging url 运行它时它没有显示图像，插件停止工作，当我在 chrome 下检查时它显示：

![在此处输入图像描述](../Images/b809b77df8090ea4627a85d31d558023.png) ![在此处输入图像描述](../Images/e93de45d6d168be06265e430c4276853.png)

`like sammy.js`如果您注意到存在的脚本 ( ) 和样式表 ( )很少`like Site.css`，但最大值不存在。请任何人解释我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:45:20.447

好的，我找到了根本原因，这是因为每次我下载新插件时

我只是复制. `js` 从其源文件夹中，然后将其粘贴到我的项目`Scripts`文件夹中。但只有在

将文件放在 Scripts 文件夹中不会将其包含在项目中。您无法在

解决方案资源管理器，直到您明确将其包含在项目中。解决方案资源管理器顶部有一个按钮

它用于显示所有文件，包括不属于项目的文件。然后就`right click`在

要包含在项目中的文件并选择选项`Include in the project`。那么只有这样

文件成为您项目的一部分。现在您可以发布项目，一切都会正常进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:45:47.120

确保它们包含在 .csproj 文件中 确保它们被标记为 Build Action: Content

# java - 创建可重用的模块

> ID：11669327
> 
> 赞同：7
> 
> 时间：2012-07-26T12:30:01.093
> 
> 标签：java, spring, module, red5

我正在为网络编写一个大型 Red5 Java 应用程序。Red5 是基于 java 并使用 spring 框架编写的 Flash Media Server 替代方案。

我想让我的应用程序的多个版本在线，每个版本都有不同的行为和启用或禁用的不同类。

我正在寻找一种将我的代码转换为基于模块的代码的方法，这将允许我从主应用程序中删除/添加模块/功能。

我知道 OSGI [http://www.springsource.org/osgi](http://www.springsource.org/osgi)但它说它需要一个 SpringSource dm 服务器，我不知道它如何在 red5 中协同工作，而且完全理解似乎非常复杂。

我一般对spring框架没有很好的了解，我使用它与db相关，就是这样。red5 更广泛地使用它。

那么任何人都可以从这些信息中获得任何意义吗？有什么办法可以将我的代码分成模块吗？

任何有关该问题的信息将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:11:01.490

我首选的处理这种情况的方法是依赖注入（DI）。Spring 内置了 DI 能力，[网上很容易找到](http://www.vogella.com/articles/SpringDependencyInjection/article.html)相关教程。但是，出于多种原因，Spring 的 DI 不如[Guice](http://code.google.com/p/google-guice/)提供的那么好，我强烈推荐。（在我看来，Guice 相对于 Spring 的 DI 的主要优势是类型安全。）

DI 基本上是一种在运行时替换类实现的机制。不是将依赖项硬编码到类中（例如，通过让一个类直接构造其他类），而是对它们进行编码，使其依赖类在它们的构造函数中传递给它们。然后，DI 框架将根据配置在运行时传递正确的实例。Spring 配置可以通过注解或 XML 文件来完成，Guice 使用`com.google.inject.AbstractModule`.

因此，您可以为应用程序的不同实例使用不同的配置文件，并让它们提供不同的激活功能集，或者实际上是同一功能的不同实现。如果您将应用程序设置为使用此技术，那么实例之间唯一需要不同的是单个配置文件。

# sql - PostgreSQL：LIMIT越低，查询越慢

> ID：11669328
> 
> 赞同：8
> 
> 时间：2012-07-26T12:30:06.640
> 
> 标签：sql, postgresql, query-optimization, sql-execution-plan

我有以下查询

```
SELECT translation.id
FROM "TRANSLATION" translation
   INNER JOIN "UNIT" unit
     ON translation.fk_id_unit = unit.id
   INNER JOIN "DOCUMENT" document
     ON unit.fk_id_document = document.id
WHERE document.fk_id_job = 3665
ORDER BY translation.id asc
LIMIT 50 
```

它运行了可怕的**110 秒**。

桌子尺寸：

```
+----------------+-------------+
| Table          | Records     |
+----------------+-------------+
| TRANSLATION    |  6,906,679  |
| UNIT           |  6,906,679  |
| DOCUMENT       |     42,321  |
+----------------+-------------+ 
```

但是，当我将`LIMIT`参数从 50 更改为 1000 时，查询会在**2 seconds 内**完成。

这是慢的查询计划

```
Limit (cost=0.00..146071.52 rows=50 width=8) (actual time=111916.180..111917.626 rows=50 loops=1)
  ->  Nested Loop (cost=0.00..50748166.14 rows=17371 width=8) (actual time=111916.179..111917.624 rows=50 loops=1)
      Join Filter: (unit.fk_id_document = document.id)
    ->  Nested Loop (cost=0.00..39720545.91 rows=5655119 width=16) (actual time=0.051..15292.943 rows=5624514 loops=1)
          ->  Index Scan using "TRANSLATION_pkey" on "TRANSLATION" translation (cost=0.00..7052806.78 rows=5655119 width=16) (actual time=0.039..1887.757 rows=5624514 loops=1)
          ->  Index Scan using "UNIT_pkey" on "UNIT" unit (cost=0.00..5.76 rows=1 width=16) (actual time=0.002..0.002 rows=1 loops=5624514)
              Index Cond: (unit.id = translation.fk_id_translation_unit)
    ->  Materialize  (cost=0.00..138.51 rows=130 width=8) (actual time=0.000..0.006 rows=119 loops=5624514)
          ->  Index Scan using "DOCUMENT_idx_job" on "DOCUMENT" document (cost=0.00..137.86 rows=130 width=8) (actual time=0.025..0.184 rows=119 loops=1)
              Index Cond: (fk_id_job = 3665) 
```

对于快速的

```
Limit (cost=523198.17..523200.67 rows=1000 width=8) (actual time=2274.830..2274.988 rows=1000 loops=1)
  ->  Sort (cost=523198.17..523241.60 rows=17371 width=8) (actual time=2274.829..2274.895 rows=1000 loops=1)
      Sort Key: translation.id
      Sort Method:  top-N heapsort  Memory: 95kB
      ->  Nested Loop (cost=139.48..522245.74 rows=17371 width=8) (actual time=0.095..2252.710 rows=97915 loops=1)
          ->  Hash Join (cost=139.48..420861.93 rows=17551 width=8) (actual time=0.079..2005.238 rows=97915 loops=1)
              Hash Cond: (unit.fk_id_document = document.id)
              ->  Seq Scan on "UNIT" unit  (cost=0.00..399120.41 rows=5713741 width=16) (actual time=0.008..1200.547 rows=6908070 loops=1)
              ->  Hash (cost=137.86..137.86 rows=130 width=8) (actual time=0.065..0.065 rows=119 loops=1)
                  Buckets: 1024  Batches: 1  Memory Usage: 5kB
                  ->  Index Scan using "DOCUMENT_idx_job" on "DOCUMENT" document (cost=0.00..137.86 rows=130 width=8) (actual time=0.009..0.041 rows=119 loops=1)
                      Index Cond: (fk_id_job = 3665)
          ->  Index Scan using "TRANSLATION_idx_unit" on "TRANSLATION" translation (cost=0.00..5.76 rows=1 width=16) (actual time=0.002..0.002 rows=1 loops=97915)
              Index Cond: (translation.fk_id_translation_unit = unit.id) 
```

显然执行计划非常不同，第二个导致查询**快 50 倍**。

我对查询中涉及的所有字段都有索引，并且`ANALYZE`在运行查询之前我在所有表上运行。

有人可以看到第一个查询有什么问题吗？

**更新：表定义**

```
CREATE TABLE "public"."TRANSLATION" (
  "id" BIGINT NOT NULL, 
  "fk_id_translation_unit" BIGINT NOT NULL, 
  "translation" TEXT NOT NULL, 
  "fk_id_language" INTEGER NOT NULL, 
  "relevance" INTEGER, 
  CONSTRAINT "TRANSLATION_pkey" PRIMARY KEY("id"), 
  CONSTRAINT "TRANSLATION_fk" FOREIGN KEY ("fk_id_translation_unit")
    REFERENCES "public"."UNIT"("id")
    ON DELETE CASCADE
    ON UPDATE NO ACTION
    DEFERRABLE
    INITIALLY DEFERRED, 
  CONSTRAINT "TRANSLATION_fk1" FOREIGN KEY ("fk_id_language")
    REFERENCES "public"."LANGUAGE"("id")
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
    NOT DEFERRABLE
) WITHOUT OIDS;

CREATE INDEX "TRANSLATION_idx_unit" ON "public"."TRANSLATION"
  USING btree ("fk_id_translation_unit");

CREATE INDEX "TRANSLATION_language_idx" ON "public"."TRANSLATION"
  USING hash ("translation"); 
```

* * *

```
CREATE TABLE "public"."UNIT" (
  "id" BIGINT NOT NULL, 
  "text" TEXT NOT NULL, 
  "fk_id_language" INTEGER NOT NULL, 
  "fk_id_document" BIGINT NOT NULL, 
  "word_count" INTEGER DEFAULT 0, 
  CONSTRAINT "UNIT_pkey" PRIMARY KEY("id"), 
  CONSTRAINT "UNIT_fk" FOREIGN KEY ("fk_id_document")
    REFERENCES "public"."DOCUMENT"("id")
    ON DELETE CASCADE
    ON UPDATE NO ACTION
    NOT DEFERRABLE, 
  CONSTRAINT "UNIT_fk1" FOREIGN KEY ("fk_id_language")
    REFERENCES "public"."LANGUAGE"("id")
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
    NOT DEFERRABLE
) WITHOUT OIDS;

CREATE INDEX "UNIT_idx_document" ON "public"."UNIT"
  USING btree ("fk_id_document");

CREATE INDEX "UNIT_text_idx" ON "public"."UNIT"
  USING hash ("text"); 
```

* * *

```
CREATE TABLE "public"."DOCUMENT" (
  "id" BIGINT NOT NULL, 
  "fk_id_job" BIGINT, 
  CONSTRAINT "DOCUMENT_pkey" PRIMARY KEY("id"), 
  CONSTRAINT "DOCUMENT_fk" FOREIGN KEY ("fk_id_job")
    REFERENCES "public"."JOB"("id")
    ON DELETE SET NULL
    ON UPDATE NO ACTION
    NOT DEFERRABLE   
) WITHOUT OIDS; 
```

**更新：数据库参数**

```
shared_buffers = 2048MB
effective_cache_size = 4096MB
work_mem = 32MB

Total memory: 32GB
CPU: Intel Xeon X3470 @ 2.93 GHz, 8MB cache 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T00:21:57.613

这是 ANALYZE 官方文档中一个有趣的部分。

> 对于大型表，ANALYZE 会随机抽取表内容样本，而不是检查每一行。[...] 可以通过调整 default_statistics_target 配置变量来控制分析范围，或者通过使用 ALTER TABLE ... ALTER COLUMN ... SET STATISTICS 设置每列统计目标来逐列控制。

显然，这是改进不良查询计划的常用方法。分析会慢一些，但查询计划会更好。

[更改表](http://www.postgresql.org/docs/8.1/static/sql-altertable.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:35:44.280

在第一个查询中，优化器采用通过主键扫描绕过排序的策略。问题是结果满足document.fk_id的条件太少了。所以索引扫描和 nl 连接应该走很远才能填满结果桶。

# python - 如何在win7x64上从python获取PrivateUsage内存值

> ID：11669335
> 
> 赞同：3
> 
> 时间：2012-07-26T12:30:20.533
> 
> 标签：python, winapi, memory, windows-7, 64-bit

我使用以下代码在 WinXPx32 上运行良好，但在 Win7x64 上返回 0。我知道 psutil 库也会返回它，但我需要一些可以在没有额外依赖项的情况下运行的东西，ctypes 和 win32api 很好。我也尝试过 Kernel32.K32GetProcessMemoryInfo ，结果相同。

```
import ctypes

psapi = ctypes.windll.psapi
Kernel32 = ctypes.windll.Kernel32

class PROCESS_MEMORY_COUNTERS_EX(ctypes.Structure):
    _fields_ = [("cb", ctypes.c_ulong),
                ("PageFaultCount", ctypes.c_ulong),
                ("PeakWorkingSetSize", ctypes.c_size_t),
                ("WorkingSetSize", ctypes.c_size_t),
                ("QuotaPeakPagedPoolUsage", ctypes.c_size_t),
                ("QuotaPagedPoolUsage", ctypes.c_size_t),
                ("QuotaPeakNonPagedPoolUsage", ctypes.c_size_t),
                ("QuotaNonPagedPoolUsage", ctypes.c_size_t),
                ("PagefileUsage", ctypes.c_size_t),
                ("PeakPagefileUsage", ctypes.c_size_t),
                ("PrivateUsage", ctypes.c_size_t),
                ]

def GetProcessPrivateUsage():
    mem_struct = PROCESS_MEMORY_COUNTERS_EX()
    p_handle = Kernel32.GetCurrentProcess()
    b = psapi.GetProcessMemoryInfo(p_handle, ctypes.byref(mem_struct), ctypes.sizeof(mem_struct))
    print(b)
    return mem_struct.PrivateUsage

print(GetProcessPrivateUsage()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T01:27:40.387

我怀疑问题是由于`HANDLE`在 64 位 Windows 上是 64 位，但在 32 位 Windows 上是 32 位。默认的 ctypes 返回类型是`int`，在两个系统上都是 32 位。有时它恰好可以工作，因为高 64 位恰好是正确的，但不能保证。

这与我们在`SetHandleInformation`没有显式参数和返回类型的情况下通过 ctypes 调用 CherryPy 时遇到的问题相同，[我在此处进行了描述](http://tech.oyster.com/cherrypy-ctypes-and-being-explicit/)。

您需要做的是明确指定您正在调用的 Win32 函数的`argtypes`和`restype`属性。这是`processutil.py`我为此制作的一个模块，它适用于 32 位和 64 位 Windows（我也将其作为[ActiveState 配方](http://code.activestate.com/recipes/578513-get-memory-usage-of-windows-processes-using-getpro/)上传）：

```
"""Functions for getting memory usage of Windows processes."""

__all__ = ['get_current_process', 'get_memory_info', 'get_memory_usage']

import ctypes
from ctypes import wintypes

GetCurrentProcess = ctypes.windll.kernel32.GetCurrentProcess
GetCurrentProcess.argtypes = []
GetCurrentProcess.restype = wintypes.HANDLE

SIZE_T = ctypes.c_size_t

class PROCESS_MEMORY_COUNTERS_EX(ctypes.Structure):
    _fields_ = [
        ('cb', wintypes.DWORD),
        ('PageFaultCount', wintypes.DWORD),
        ('PeakWorkingSetSize', SIZE_T),
        ('WorkingSetSize', SIZE_T),
        ('QuotaPeakPagedPoolUsage', SIZE_T),
        ('QuotaPagedPoolUsage', SIZE_T),
        ('QuotaPeakNonPagedPoolUsage', SIZE_T),
        ('QuotaNonPagedPoolUsage', SIZE_T),
        ('PagefileUsage', SIZE_T),
        ('PeakPagefileUsage', SIZE_T),
        ('PrivateUsage', SIZE_T),
    ]

GetProcessMemoryInfo = ctypes.windll.psapi.GetProcessMemoryInfo
GetProcessMemoryInfo.argtypes = [
    wintypes.HANDLE,
    ctypes.POINTER(PROCESS_MEMORY_COUNTERS_EX),
    wintypes.DWORD,
]
GetProcessMemoryInfo.restype = wintypes.BOOL

def get_current_process():
    """Return handle to current process."""
    return GetCurrentProcess()

def get_memory_info(process=None):
    """Return Win32 process memory counters structure as a dict."""
    if process is None:
        process = get_current_process()
    counters = PROCESS_MEMORY_COUNTERS_EX()
    ret = GetProcessMemoryInfo(process, ctypes.byref(counters),
                               ctypes.sizeof(counters))
    if not ret:
        raise ctypes.WinError()
    info = dict((name, getattr(counters, name))
                for name, _ in counters._fields_)
    return info

def get_memory_usage(process=None):
    """Return this process's memory usage in bytes."""
    info = get_memory_info(process=process)
    return info['PrivateUsage']

if __name__ == '__main__':
    import pprint
    pprint.pprint(get_memory_info()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:55:03.240

[我根据MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682050%28v=vs.85%29.aspx)中的以下示例修改了您的代码：

```
from __future__ import print_function
import ctypes

psapi = ctypes.windll.psapi
Kernel32 = ctypes.windll.Kernel32

PROCESS_QUERY_INFORMATION = 0x0400
PROCESS_VM_READ = 0x0010

class PROCESS_MEMORY_COUNTERS_EX(ctypes.Structure):
    _fields_ = [("cb", ctypes.c_ulong),
                ("PageFaultCount", ctypes.c_ulong),
                ("PeakWorkingSetSize", ctypes.c_size_t),
                ("WorkingSetSize", ctypes.c_size_t),
                ("QuotaPeakPagedPoolUsage", ctypes.c_size_t),
                ("QuotaPagedPoolUsage", ctypes.c_size_t),
                ("QuotaPeakNonPagedPoolUsage", ctypes.c_size_t),
                ("QuotaNonPagedPoolUsage", ctypes.c_size_t),
                ("PagefileUsage", ctypes.c_size_t),
                ("PeakPagefileUsage", ctypes.c_size_t),
                ("PrivateUsage", ctypes.c_size_t),
                ]

def GetProcessPrivateUsage():
    mem_struct = PROCESS_MEMORY_COUNTERS_EX()

    id = Kernel32.GetCurrentProcessId()
    print_output('GetCurrentProcessId: {}'.format(id))

    handle = Kernel32.OpenProcess(PROCESS_QUERY_INFORMATION | PROCESS_VM_READ, False, id)
    print_output('GetCurrentProcess: {}'.format(handle))

    b = psapi.GetProcessMemoryInfo(handle, ctypes.byref(mem_struct), ctypes.sizeof(mem_struct))

    print_output('GetProcessMemoryInfo: {}'.format(b))
    return mem_struct.PrivateUsage

def print_output(text):
    print('{}. {}'.format(text, ctypes.FormatError(Kernel32.GetLastError())))

usage = GetProcessPrivateUsage()
print_output('private usage: {}'.format(usage)) 
```

我最好的猜测是返回的句柄`GetCurrentProcess()`不再具有对 Windows 7 中内存计数器的访问权限（`GetLastError()`将返回“无效句柄”）。

我在 ctypes 中找不到`PROCESS_QUERY_INFORMATION`and ，所以我[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684880%28v=vs.85%29.aspx)`PROCESS_VM_READ`查找了实际值并将它们作为常量插入。

我还添加了该`print_output()`功能，以便我可以查看哪些步骤失败了。

# multithreading - 春季消息模板问题

> ID：11669338
> 
> 赞同：0
> 
> 时间：2012-07-26T12:30:42.350
> 
> 标签：multithreading, apache-flex, spring, blazeds, java-7

从 Spring 2.5、Flex 3.5、BlazeDS 3 和 Java 6 迁移到 Spring 3.1、Flex 4.5、BlazeDS 4 和 Java 7 后，我遇到了一个问题。我声明了一个 ClientFeed 以发送一种“警报”向 flex 客户端发送消息。发送这些警报的方法有三种。第一个是通过 snmp 陷阱，启动一个线程并等待任何陷阱，当收到一个陷阱时将发送警报。第二种方法是通过轮询机制，在 Web 应用程序开始时启动一个线程，并在一定时间后轮询警报并将它们发送到客户端。第三种方法是来自用户的显式轮询命令，这将调用专用服务上的特定函数。然后，此函数使用第二种方法中使用的相同算法来执行轮询，并将这些警报发送到客户端。

问题是迁移后前两种方法都可以正常工作，但第三种方法没有。我怀疑与线程有关系。messagetemplate 和新框架的线程之间是否存在任何已知问题？

这是使用的客户端提要的快照：

```
@Component
public class ClientFeed {

private MessageTemplate messageTemplate;

@Autowired
public void setTemplate(MessageTemplate messageTemplate) {
    this.messageTemplate = messageTemplate;
}

public void sendAlarmUpdate(final Alarm myAlarm) {

    if (messageTemplate != null) {
        System.out.println("Debug Thread: " + Thread.currentThread().getName());
        messageTemplate.send(new AsyncMessageCreator() {

            public AsyncMessage createMessage() {
                AsyncMessage msg = messageTemplate.createMessageForDestination("flexClientFeed");
                msg.setHeader("DSSubtopic", "Alarm");
                msg.setBody(myAlarm);

                return msg;
            }
        });    
    }
} 
```

}

通过三种方法我到达这段代码，显示的线程名称分别是：“Thread-14”、“Thread-24”和“http-bio-80-exec-10”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:51:16.030

我通过在服务器上创建一个本地线程来执行该工作解决了这个问题。因此，客户端提要通过这个新创建的线程而不是 http 线程调用。

# mysql - 如何在查询中实现下一行和上一行

> ID：11669339
> 
> 赞同：0
> 
> 时间：2012-07-26T12:30:46.630
> 
> 标签：mysql

我在 MYSQL 中有一个这样的表：

```
SELECT * FROM test_table 

id  u_id  name   date
1   101   name2  2012-05-14
2   305   name3  2012-05-11
3   506   name4  2012-05-05
4   207   name5  2012-05-12
5   108   name6  2012-05-03

SELECT id,u_id from test_table order by date;

id  u_id

5    108
3    506
2    305
4    207
1    101 
```

我有一个显示这些东西的应用程序

单击任何`u_id`将我带到显示详细信息的不同页面现在我想编写一个查询，它将给我下一条记录

我如何从这里获得下一条记录

当我说它`u_id>305`应该给我`207`？它`u_id<305`应该给我`506`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:42:41.440

我认为这就是你要找的：

```
SELECT id, u_id 
FROM test_table 
WHERE uid > 305
ORDER BY date ASC
LIMIT 1;

SELECT id, u_id 
FROM test_table 
WHERE uid < 305
ORDER BY date DESC
LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:46:07.327

试试这个：

```
 select id,u_id from
  (SELECT id,u_id,@rownum:= @rownum+1 AS Sno 
  from test_table , (SELECT @rownum:=0) r;
  order by date)a
  where Sno=<@ID-1/+1> 
```

假设您当前的 Sno=5，那么 4 将给出上一条记录，6 将给出下一条记录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:48:23.327

给定 u_id 为 305，按日期获取下一条记录：

```
SELECT id,u_id 
FROM test_table a
WHERE a.date > (SELECT date FROM test_table b WHERE b.u_id = 305)
ORDER BY a.date
LIMIT 1; 
```

并按日期获取以前的记录：

```
SELECT id,u_id 
FROM test_table a
WHERE a.date < (SELECT date FROM test_table b WHERE b.u_id = 305)
ORDER BY a.date DESC
LIMIT 1; 
```

# java - JDBC获取外键引用的关系+属性

> ID：11669341
> 
> 赞同：6
> 
> 时间：2012-07-26T12:30:52.593
> 
> 标签：java, mysql, database, jdbc

是否可以使用 JDBC 获取 FK 的目标？

我只使用 getExportedKeys 方法获得了 Source Relation+Attributes：

```
ResultSet fksE = dbm.getExportedKeys(conn.getCatalog(), null, "SourceRelName");
String fkTableNameE = fksE.getString("FKTABLE_NAME");
String fkColumnNameE = fksE.getString("FKCOLUMN_NAME"); 
```

然后我尝试使用 getImportedKeys 方法，但它没有用。

这是我的课：

```
public class DbConnection {

  private String userName = null;
  private String password = null;
  private String driver = null;
  private String DbUrl = null;
  private Connection conn = null;
  private DatabaseMetaData dbm = null;
  private ArrayList<String> relationNames = null;
  private ResultSet tables = null;
  private Database database = null;

  public DbConnection(String user, String pwd, dbaCore.data.dBTypes.TypeEnum type, String url) {
    userName = user;
    password = pwd;
    switch (type) {
      case MYSQL:
        driver = "com.mysql.jdbc.Driver";
        break;
      case POSTGRES:
        break;
      case MSDB:
        break;
      case ORACLE:
        break;
      case SQLITE:
        break;
    }
    DbUrl = url;
    database = new Database();
    relationNames = new ArrayList<>();

    try {
      Class.forName(driver).newInstance();
      conn = DriverManager.getConnection(DbUrl, userName, password);
      System.out.println("Database connection established");

      //Get Relation Names
      dbm = conn.getMetaData();
      String[] types = {"TABLE"};
      tables = dbm.getTables(null, null, "%", types);
      while (tables.next()) {
        String table = tables.getString("TABLE_NAME");
        relationNames.add(table);
      }

      //Get Attributes
      for (String relation : relationNames) {
        RelationSchema tmpRelation = new RelationSchema(relation);

        Statement st = conn.createStatement();
        ResultSet rs = st.executeQuery("SELECT * FROM " + relation);
        ResultSetMetaData md = rs.getMetaData();
        int col = md.getColumnCount();
        System.out.println("ATTRIBUTES: ");
        for (int i = 1; i <= col; i++) {
          String col_name = md.getColumnName(i);
          System.out.println(col_name);
          tmpRelation.addAttribute(col_name);
        }
        ResultSet pks = dbm.getPrimaryKeys(null, null, relation);
        while (pks.next()) {
          String columnName = pks.getString("COLUMN_NAME");
          System.out.println("Primary Key: " + columnName);
          tmpRelation.getAttributeByName(columnName).setIsPrimaryKey(true);
        }
        database.addRelationSchema(tmpRelation);
      }

      //Get Foreignkeys
      for (String relation : relationNames) {
        ResultSet fksE = dbm.getExportedKeys(conn.getCatalog(), null, relation);

        while (fksE.next()) {
          String fkTableNameE = fksE.getString("FKTABLE_NAME");
          String fkColumnNameE = fksE.getString("FKCOLUMN_NAME");
      ResultSet fksI = dbm.getImportedKeys(conn.getCatalog(), null, fkTableNameE);
      String fkTableNameI = fksI.getString("FKTABLE_NAME");
      String fkColumnNameI = fksI.getString("FKCOLUMN_NAME");

      System.out.println("FKTABLE_NAME_E: " + fkTableNameE + " - FKCOLUMN_NAME_E: " + fkColumnNameE);
      System.out.println("FKTABLE_NAME_I: " + fkTableNameI + " - FKCOLUMN_NAME_I: " + fkColumnNameI);
    }
  }

} catch (Exception e) {
  System.err.println("Cannot connect to database server");
  e.printStackTrace();
}
finally
{
  if (conn != null) {
    try {
      conn.close();
      System.out.println("Database connection closed");
    } catch (Exception e) {
      e.printStackTrace();
    }
  }
}

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-26T12:44:17.243

[getImportedKeys](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html#getImportedKeys%28java.lang.String,%20java.lang.String,%20java.lang.String%29)对我有用。一些代码：

```
private static void printForeignKeys(Connection connection, String tableName) throws SQLException {
    DatabaseMetaData metaData = connection.getMetaData();
    ResultSet foreignKeys = metaData.getImportedKeys(connection.getCatalog(), null, tableName);
    while (foreignKeys.next()) {
        String fkTableName = foreignKeys.getString("FKTABLE_NAME");
        String fkColumnName = foreignKeys.getString("FKCOLUMN_NAME");
        String pkTableName = foreignKeys.getString("PKTABLE_NAME");
        String pkColumnName = foreignKeys.getString("PKCOLUMN_NAME");
        System.out.println(fkTableName + "." + fkColumnName + " -> " + pkTableName + "." + pkColumnName);
    }
} 
```

# .net - 是否有可用于单声道的增量 GC，我可以使用或获取源代码？

> ID：11669342
> 
> 赞同：9
> 
> 时间：2012-07-26T12:30:53.310
> 
> 标签：.net, mono, garbage-collection

我正在编写使用功能样式在 .NET 中构建游戏的工具。为此，我需要一个增量 GC，或者某种类型的 GC，其收集时间限制在 1 毫秒左右。我读了一篇关于实时增量 GC 的论文，它是单声道的 WIP，但无论如何我都找不到查看它的代码或使用它 - [http://static.usenix.org/event/vm04/wips /goh.pdf](http://static.usenix.org/event/vm04/wips/goh.pdf)

为了澄清我所说的“增量 GC”的含义，增量 GC 将单个垃圾收集周期分成多个工作片，这些工作片可以与程序执行交错，以便每个片可以在相对有限的时间内处理。增量 GC 功能的主要目的是通过在相对细粒度的级别上保持一致的响应来支持软实时应用程序。增量 GC 消除了由 .NET 的分代 GC 等主流 GC 引起的“尴尬停顿”。许多使用增量 GC 的系统的收集暂停时间大约为 1 毫秒。这非常适合游戏，因为它们需要在 16.667 毫秒内运行整个周期。.NET 分代 GC，OTOH，将导致 200 毫秒的典型暂停。

我真的很想避免花时间为单声道编写我自己的增量 GC，所以如果有人能告诉我目前有哪些替代（软）实时中心 GC，那就太好了。如果我需要编写自己的 GC，最好有一个开源的 GC，它可以作为从头开始编写自己的 mono GC 的一个很好的参考。

**编辑：添加了对“增量”GC 含义的详细说明。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T13:46:07.297

我不知道 Mono 是否有增量 GC 源代码 - 但有一个（针对 oCaml 派生语言）既是开源的，又似乎专注于高性能，称为[HLVM](https://stackoverflow.com/questions/11669342/is-there-an-incremental-gc-available-for-mono-that-i-can-use-or-get-the-source-c)。作者 Jon Harrop[在这里](http://flyingfrogblog.blogspot.co.uk/)也有一个博客，里面有很多关于垃圾收集和相关技术的优秀文章。

希望这可以帮助！

# php - 用于发送电子邮件的 Web 表单不起作用

> ID：11669344
> 
> 赞同：0
> 
> 时间：2012-07-26T12:31:03.550
> 
> 标签：php, html, forms

我只需要一个非常基本/简单的表格来发送电子邮件，但它似乎不起作用，我不知道为什么？我知道代码不是很先进，可能看起来很“丑陋”，但它可以满足我的“需要”

```
if (isset($_POST['email']))
{

    $full_name = $_POST['fullName'];
    $phone = $_POST['phoneNumber'];
    $adMessage = $_POST['emailMessage'];

    //send email
    $to = "info@lalalalala.co.uk";
    $from = $_POST['emailAddress'];
    $subject = $_POST['emailSubject'];

    $message = "Full name: " . $full_name . "\n";
    $message .= "Phone number: " . $phone . "\n";
    $message .= "Email Address: " . $from . "\n";
    $message .= "Additional Message: " . $adMessage;

    $headers = "From:" . $full_name;
    mail($to, $subject, $message, $headers);
} 
```

HTML

```
<form action='' method='post'>

    <fieldset><label id="fullName">Full Name</label>
    <input type="text" name="fullName" value="Please Enter Your Full Name" onclick="this.value=''"  /></fieldset>

    <fieldset><label id="emailAddress">Email Address</label>
    <input type="text" name="emailAddress" value="Please Enter Your Email Address" onclick="this.value=''"  /></fieldset>

    <fieldset><label id="phoneNumber">Phone Number</label>
    <input type="text" name="phoneNumber" value="Please Enter Your Phone Number" onclick="this.value=''"  /></fieldset>

    <fieldset><label id="emailSubject">Email Subject</label>
    <input type="text" name="emailSubject" value="Please Enter Email Subject" onclick="this.value=''"  /></fieldset>

    <fieldset><label id="emailMessage">Your Message</label>
    <textarea cols="10" rows="20" name="emailMessage" onclick="this.value=''" >Please Enter Your Message</textarea></fieldset>

    <fieldset><input type="image" src="images/submit.png" id="submit" onclick="show_alert();" /></fieldset>
</form> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:36:47.300

改变

```
if (isset($_POST['email'])) 
```

至

```
if($_SERVER['REQUEST_METHOD'] == 'POST') 
```

您的表单没有名为的元素`email`- 因此它永远不会进入该`if`块。替换检查请求方法是否`POST`为已发布的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:36:55.980

您尚未设置任何名为`email`. 您的第一个条件不会被评估为真，因此您跳过后面的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:37:11.580

我看不到您在您的情况下使用的`input field`名为**电子邮件的表格中的任何内容，即**

```
if (isset($_POST['email'])){....} 
```

有一个名为**emailAddress**的字段，因此请使用：

```
if (isset($_POST['emailAddress'])){....} 
```

希望这可以帮助。

# sql-server - sql 存储过程参数作为动态查询的参数

> ID：11669345
> 
> 赞同：5
> 
> 时间：2012-07-26T12:31:04.743
> 
> 标签：sql-server, sql-server-2005, stored-procedures

此过程具有三个参数。但是当我尝试通过传递参数来执行时，它会显示一个错误。请帮我。

```
create procedure queryfunctions @Tabname varchar(150),@colname varchar(150),@valuesname varchar(150)
as
begin
declare @sql varchar(4000)
select @sql='select * from @Tabname where @colname=@valuesname'
exec(@sql)
end

exec queryfunctions 'education','eduChildName','Revathi' 
```

**错误 ：**

> Msg 1087, Level 15, State 2, Line 1 必须声明表变量“@Tabname”。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T12:44:55.107

这是一个更安全的选择：

```
ALTER PROCEDURE dbo.queryfunctions 
  @Tabname NVARCHAR(511),
  @colname NVARCHAR(128),
  @valuesname VARCHAR(150)
AS
BEGIN
  SET NOCOUNT ON;

  DECLARE @sql NVARCHAR(MAX);

  SET @sql = 'SELECT * FROM ' + @Tabname 
           + ' WHERE ' + QUOTENAME(@colname) + ' = @v';

  EXEC sp_executesql @sql, N'@v VARCHAR(150)', @valuesname;
END
GO

EXEC dbo.queryfunctions N'dbo.education', N'eduChildName', 'Revathi'; 
```

我改变了什么？

1.  `dbo`创建/引用对象时始终使用前缀。
2.  表名和列名`NVARCHAR`可以*超过*150 个字符。允许参数容纳将来可能添加的表要安全得多。
3.  添加`SET NOCOUNT ON`以防止网络开销和可能向客户端发送错误的结果集。
4.  `@sql`应该永远是`NVARCHAR`。
5.  使用`QUOTENAME`诸如表或列之类的实体名称来帮助阻止 SQL 注入并防止选择不当的名称（例如关键字）。
6.  尽可能使用适当的参数（再次帮助阻止 SQL 注入，但也避免必须对字符串参数执行各种转义分隔符）。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-26T12:53:14.883

为什么将对象名称作为参数传递？

如果您将字符串值传递给@valuesname，您的代码应该是

```
create procedure queryfunctions 
(
@Tabname varchar(150),@colname varchar(150),@valuesname varchar(150) 
)
as 
begin 
declare @sql varchar(4000) 
select @sql='select * from '+@Tabname+' where '+@colname+'='''+@valuesname+'''' 
exec(@sql) 
end 
```

不知道如何在动态sql中使用单引号？请参阅此[http://beyondrelational.com/modules/2/blogs/70/posts/10827/understanding-single-quotes.aspx](http://beyondrelational.com/modules/2/blogs/70/posts/10827/understanding-single-quotes.aspx)

# jboss - Jboss-deployment-structure.xml 看不到来自其他 deployment.myear.ear.etc 的类

> ID：11669349
> 
> 赞同：0
> 
> 时间：2012-07-26T12:31:24.870
> 
> 标签：jboss

我尝试从 jboss 4.2.3 迁移到 jboss 7.0.2。当我尝试在下面部署我的 ear 文件时：

```
META-INF/
META-INF/MANIFEST.MF
commons-beanutils-1.8.0.jar
commons-collections-3.2.jar
commons-digester-1.8.1.jar
commons-logging-1.0.4.jar
dts.jar
dts.sar
dts.war
itext-2.1.2.jar
itext-rtf-2.1.2.jar
jboss-el-1.0_02.CR3.jar
jboss-seam-2.2.0.GA.jar
jboss-seam-excel-2.2.0.GA.jar
jboss-seam-jul-2.2.0.GA.jar
jboss-seam-mail-2.2.0.GA.jar
jboss-seam-pdf-2.2.0.GA.jar
jboss-seam-ui-2.2.0.GA.jar
jcommon-1.0.16.jar
jfreechart-1.0.13.jar
jsf-facelets-1.1.15.B1.jar
jta-1.1.jar
jxl-2.6.8-seam.jar
loginHook-hook.war
META-INF/application.xml
META-INF/jboss-deployment-structure.xml
portal-client-6.1.0.jar
quartz-1.8.4.jar
richfaces-api-3.3.3.Final.jar
richfaces-impl-3.3.3.Final.jar
richfaces-ui-3.3.3.Final.jar
slf4j-api-1.6.0.jar
util-bridges-6.1.0.jar
util-java-6.1.0.jar
util-taglib-6.1.0.jar
xpp3_min-1.1.3.4.O.jar
xstream-1.1.3.jar
META-INF/maven/
META-INF/maven/com.recglobal.dts/
META-INF/maven/com.recglobal.dts/dts-ear/
META-INF/maven/com.recglobal.dts/dts-ear/pom.xml
META-INF/maven/com.recglobal.dts/dts-ear/pom.properties 
```

我收到此错误：

```
13:17:57,562 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-7) MSC00001: Failed to start service jboss.deployment.subunit."dts.ear"."dts.war".INSTALL: org.jboss.msc.service.StartException in service jboss.deployment.subunit."dts.ear"."dts.war".INSTALL: Failed to process phase INSTALL of subdeployment "dts.war" of deployment "dts.ear"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:121) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1824) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1759) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [:1.6.0_15]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [:1.6.0_15]
    at java.lang.Thread.run(Thread.java:619) [:1.6.0_15]
Caused by: java.lang.RuntimeException: Error getting reflective information for class com.recglobal.dts.chart.SalesGoalChartServlet
    at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:70) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
    at org.jboss.as.ee.component.EEModuleClassDescription$DefaultConfigurator.configure(EEModuleClassDescription.java:176)
    at org.jboss.as.ee.component.deployers.EEClassConfigurationProcessor$1.compute(EEClassConfigurationProcessor.java:147)
    at org.jboss.as.ee.component.deployers.EEClassConfigurationProcessor$1.compute(EEClassConfigurationProcessor.java:122)
    at org.jboss.as.ee.component.LazyValue.get(LazyValue.java:40)
    at org.jboss.as.ee.component.EEApplicationDescription.getClassConfiguration(EEApplicationDescription.java:183)
    at org.jboss.as.ee.component.ComponentDescription.createConfiguration(ComponentDescription.java:153)
    at org.jboss.as.ee.component.deployers.EEModuleConfigurationProcessor.deploy(EEModuleConfigurationProcessor.java:70)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:115) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
    ... 5 more
Caused by: java.lang.NoClassDefFoundError: com/recglobal/dts/chart/ChartGenerateVariables
    at java.lang.Class.getDeclaredMethods0(Native Method) [:1.6.0_15]
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427) [:1.6.0_15]
    at java.lang.Class.getDeclaredMethods(Class.java:1791) [:1.6.0_15]
    at org.jboss.as.server.deployment.reflect.ClassReflectionIndex.<init>(ClassReflectionIndex.java:65) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
    at org.jboss.as.server.deployment.reflect.DeploymentReflectionIndex.getClassIndex(DeploymentReflectionIndex.java:66) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
    ... 13 more
Caused by: java.lang.ClassNotFoundException: com.recglobal.dts.chart.ChartGenerateVariables from [Module "deployment.dts.ear.dts.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:191) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:361) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:333) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:333) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:310) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:103) [jboss-modules.jar:1.0.2.GA]
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320) [:1.6.0_15]
    ... 18 more 
```

错误的原因是，在部署 dts.war 时，dts.war 需要一个来自 dts.jar 的方法（如下）：

```
META-INF/
META-INF/MANIFEST.MF
com/
com/recglobal/
com/recglobal/dts/
com/recglobal/dts/chart/AnnualChart.class
com/recglobal/dts/chart/ChartGenerateVariables.class
com/recglobal/dts/chart/ChartGenerator$1.class
com/recglobal/dts/chart/ChartGenerator.class
com/recglobal/dts/chart/ChartType.class
com/recglobal/dts/chart/QuarterlyChart.class
com/recglobal/dts/chart/RangeUtil.class
com/recglobal/dts/chart/Timescale.class
com/recglobal/dts/chart/XYBarAlarmRenderer.class
components.properties
dts-app-features.xml
features.xsd
META-INF/persistence.xml
seam.properties
META-INF/maven/
META-INF/maven/com.recglobal.dts/
META-INF/maven/com.recglobal.dts/dts-logic/
META-INF/maven/com.recglobal.dts/dts-logic/pom.xml
META-INF/maven/com.recglobal.dts/dts-logic/pom.properties 
```

因此，为了解决这个问题，我将 dts.ear 中的 Jboss-deployment-structure.xml 编辑为：

```
<jboss-deployment-structure>
  <ear-subdeployments-isolated>false</ear-subdeployments-isolated>
  <deployment>
    <exclusions>
    </exclusions>
    <dependencies>   
   <module name="deployment.dts.ear.dts.jar" />
   <module name="deployment.dts.ear.dts.war" />
    </dependencies>
    <resources>
    </resources>
    </deployment>
   <sub-deployment name="dts.war">
        <dependencies>           
            <module name="deployment.dts.ear.d2ts.jar" />
        </dependencies>
        <resources>
            <resource-root path="deployment.dts.ear.dts.jar.com.recglobal.dts.chart.ChartGenerateVariables"/>
        </resources>
    </sub-deployment>
</jboss-deployment-structure> 
```

我在论坛和谷歌上尝试了很多组合，但一切都以同样的错误结束。也尝试编辑 MANIFEST.MF 但没有任何效果。一般我不知道当 ClassLoader 找不到类或 JAR 文件时该怎么办。类加载器甚至无法在 WEB-INF/lib 的 dts.war 中找到 jars（生病了！）我必须将它们移动到 EAR 并在 dts.war.pom.xml 中标记为提供但现在我已经尝试部署 dts.jar来自 EAR，即使是假的 dts.war 仍然看不到我的逻辑 jar（dts.jar）。我真的需要帮助，因为我的想法已经不多了。你不能问我你需要什么。所以请帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T21:06:45.293

您是否尝试添加“依赖项：缺少 jar”？

[https://access.redhat.com/site/documentation/en-US/JBoss_Enterprise_Application_Platform/6/html/Development_Guide/Add_an_Explicit_Module_Dependency_to_a_Deployment1.html](https://access.redhat.com/site/documentation/en-US/JBoss_Enterprise_Application_Platform/6/html/Development_Guide/Add_an_Explicit_Module_Dependency_to_a_Deployment1.html)

# ruby-on-rails-3 - Simple_form 不能与 Rails 3 中的模型继承一起使用

> ID：11669350
> 
> 赞同：0
> 
> 时间：2012-07-26T12:31:27.473
> 
> 标签：ruby-on-rails-3, simple-form

我的路线

```
 scope :module => "group" do
    resources :groups do 
      resources :topics
    end
  end 
```

我的模型

```
class Post < ActiveRecord::Base
  belongs_to :group
end

class Group < ActiveRecord::Base
  has_many :posts
end

class Group::Topic < Post
end 
```

我的表格：

```
<%= simple_form_for [@current_group, @topic], :html => {:id => "post_form", :class => 'form-horizontal'} do |f| -%> 
end 
```

错误信息是

> 未定义的方法“group_group_topics_path”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:57:24.720

我不认为这个案子在`simple_form`。您的路线很可能有错误，应按如下方式更新：

```
scope :module => "group" do
  resources :groups do 
    scope :module => :groups do
      resources :topics
    end
  end
end 
```

然后你会得到`group_group_topics_path`路线工作。要查看所有主题路由，请在控制台中输入以下命令：`rake routes | grep 'topics'`.

# regex - 使用正则表达式在 LaTeX 表中查找（并替换）第 n 列

> ID：11669352
> 
> 赞同：3
> 
> 时间：2012-07-26T12:31:39.033
> 
> 标签：regex, r

我有一个字符串，它是一个 LaTeX 表。我试图找到第 n 列（假设是第三列）并将所有内容包装在里面，比如`\emph{}`不匹配分隔的美元符号。

我正在寻找第一`&...&`列，即第二列。然后找到下一个`&...&`，这是第二个分组，绝非巧合的是表中的第三列。

我的虚拟示例有效，但有点不同，因为它在两个`&...&`. 我将在稍后阶段解决一些小问题 - 我需要使用后向和前向引用`&`将呼叫置于呼叫之外。`\emph{}`

```
xy <-  "This is &more or less& a match and here is &another one&.\nSecond line with &occurrance 1& and &occurrance 2&"
gsub("(&.*?&)|(.*?&)(.*)(&.*?&)", "\\1\\2\\3\\\\emph{\\4}", xy, perl = TRUE)
[1] "This is &more or less& a match and here is \\emph{&another one&}.\nSecond line with &occurrance 1& and \\emph{&occurrance 2&}" 
```

当我将它提升到带有 LaTeX 表的读取集时（砰！），它有点不同。两个 之间没有字符`&...&`，这意味着一个`&`与两列相邻。考虑到这一点，我删除了`(.*)`. 无论我尝试什么，我都无法让它工作。有小费吗？

```
library(xtable)
data(tli)
tli.table <- xtable(tli[1:5,])
x <- print.xtable(tli.table, print.results = FALSE, include.rownames = FALSE)

cat(x)
% latex table generated in R 2.15.1 by xtable 1.7-0 package
% Thu Jul 26 14:13:39 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{rlllr}
  \hline
grade & sex & disadvg & ethnicty & tlimth \\ 
  \hline
  6 & M & YES & HISPANIC &  43 \\ 
    7 & M & NO & BLACK &  88 \\ 
    5 & F & YES & HISPANIC &  34 \\ 
    3 & M & YES & HISPANIC &  65 \\ 
    8 & M & YES & WHITE &  75 \\ 
   \hline
\end{tabular}
\end{center}
\end{table}

gsub("(&.*?&)(&.*?&)", "\\1\\\\emph{\\2}", x, perl = TRUE) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T12:59:30.447

假设第 1^列是`n <- 1`（而不是`n <- 0`），您应该用于替换第 n 列的正则表达式应该是：

```
(?m)^(?=[^&\n\r]*&)((?:[^&]*&){n-1})\\s*([^&]*?)\\s*(&|\\\\)
                                ↑
                                └ replace this n-1 with real number 
```

然后替换字符串必须是`\\1\\\\emph{\\2}\\3`.

所以你的替换代码是：

```
input <- "% latex table generated in R 2.15.1 by xtable 1.7-0 package\n% Thu Jul 26 17:49:09 2012\n\\begin{table}[ht]\n\\begin{center}\n\\begin{tabular}{rlllr}\n  \\hline\ngrade & sex & disadvg & ethnicty & tlimth \\\\ \n  \\hline\n  6 & M & YES & HISPANIC &  43 \\\\ \n    7 & M & NO & BLACK &  88 \\\\ \n    5 & F & YES & HISPANIC &  34 \\\\ \n    3 & M & YES & HISPANIC &  65 \\\\ \n    8 & M & YES & WHITE &  75 \\\\ \n   \\hline\n\\end{tabular}\n\\end{center}\n\\end{table}\n"

n <- 1
regex <- paste(c('(?m)^(?=[^&\n\r]*&)((?:[^&]*&){', n-1, '})\\s*([^&]*?)\\s*(&|\\\\)'), collapse='')
cat(gsub(regex, "\\1\\\\emph{\\2}\\3", input, perl = TRUE)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T15:12:19.270

另一种方法是`emph{}`在调用 xtable 之前包装您的列：

```
data(tli)
tli[, 4] <- paste0("\\\\emph{", tli[, 4], "}") 
```

然后你的脚本就像你一样：

```
tli.table <- xtable(tli[1:5,])
x <- print.xtable(tli.table, print.results = FALSE, include.rownames = FALSE)
cat(x) 
```

产生以下内容，这应该会产生预期的结果：

```
% latex table generated in R 2.15.0 by xtable 1.7-0 package
% Thu Jul 26 16:08:58 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{rlllr}
  \hline
grade & sex & disadvg & ethnicty & tlimth \\ 
  \hline
  6 & M & YES & $\backslash$$\backslash$emph\{HISPANIC\} &  43 \\ 
    7 & M & NO & $\backslash$$\backslash$emph\{BLACK\} &  88 \\ 
    5 & F & YES & $\backslash$$\backslash$emph\{HISPANIC\} &  34 \\ 
    3 & M & YES & $\backslash$$\backslash$emph\{HISPANIC\} &  65 \\ 
    8 & M & YES & $\backslash$$\backslash$emph\{WHITE\} &  75 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

# jquery - nvd3.js 中的缩进树：搜索特定节点并打开所有父节点

> ID：11669354
> 
> 赞同：0
> 
> 时间：2012-07-26T12:31:43.177
> 
> 标签：jquery, d3.js, data-visualization, nvd3.js

我目前正在使用 jquery 和 nvd3.js 学习数据可视化。我已经设置了一个类似于示例（[http://nvd3.com/ghpages/indentedtree.html](http://nvd3.com/ghpages/indentedtree.html)）的页面，其中输入文本字段仅使用 alert(); 功能。

我想做的是：

*   查找跨度文本值等于用户查询的所有节点
*   打开所有父节点

那么，访问节点的最佳方式是什么？我应该使用 Jquery 选择器还是有更好的方法？

**编辑 ：**

我的 json 就像：

```
status: true, 
_values: [
{
    status: false, 
    _values: [
        {
            status: false, 
            _values: [], 
            attr: "text", 
            key: "2"
        }, 
        ...
    ]
    attr: "text",
    key: "1"
} 
```

最后，我找到了另一种方法来捕获从键的顶部到叶子的所有父节点。现在我需要的是 nvd3.js 中的正确语法（如果与 d3.js 不同）来执行此操作：

```
for(parent in parents) {
    open parent
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:04:03.880

这会有所帮助： [https ://github.com/mbostock/d3/wiki/Selections](https://github.com/mbostock/d3/wiki/Selections)

> D3 使用 CSS3 来选择元素。

我会尝试这样的事情：

```
d3.selectAll("value"=d3.select('#input-id').value)
  .parent()
  .[required action] 
```

# backbone.js - 如何使用 Backbone Relational 从初始 JSON 自动创建多对多关系？

> ID：11669356
> 
> 赞同：4
> 
> 时间：2012-07-26T12:31:46.717
> 
> 标签：backbone.js, many-to-many, backbone-relational

[文档中关于多对多关系](https://github.com/PaulUithol/Backbone-relational#many-to-many-relations)的示例假设公司将在创建人之后添加。

但是，如果人员数据来自已经包含公司列表（公司 ID）的服务器怎么办？

是否可以修改示例，以便可以使用以下代码（或类似 smt）：

```
// somewhere before we have a collection of companies defined like this:
// [{id: 1, name: 'ibm'}, {id: 2, name: 'apple'}]
// and than we do:
paul = new Person({
    name: 'Paul',
    jobs: [1, 2]
})
paul.get('jobs').at(0).get('name') // 'ibm' 
```

当尝试以与一对多关系相同的方式实现这一目标时，我失败了：

```
Companies = Backbone.Collection.extend({model: Company})
companies = new Companies([{id: 1, name: 'ibm'}, {id: 2, name: 'apple'}])

john = new Person({
    name: 'John',
    jobs: [1]
})

john.get('jobs').toJSON() // []
companies.get(1).get('employees').toJSON() // [] 
```

这是你可以玩的小提琴：http: [//jsfiddle.net/ymr5Z/](http://jsfiddle.net/ymr5Z/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:55:57.037

您的主要问题是您尝试`Jobs`按 ID 添加。你从来没有创建过任何工作对象，更不用说设置他们的 id 了！你只创建了公司。

添加工作的更好方法是拥有一个`addJob()`功能，您可以提供公司 ID（或公司）并`Job`为您创建模型。

适合您的示例的[完整代码](http://jsfiddle.net/qMTnU/1/)

特别是：

```
var Person = Backbone.RelationalModel.extend({
    relations: [{
        type: 'HasMany',
        key: 'jobs',
        relatedModel: Job,
        reverseRelation: {
            key: 'person'
            //includeInJSON: false //if you don't want to show person
        }
    }],
    addJob: function (company) {
        this.get('jobs').add(new Job({
            company: company
        }));
    }
});

paul.addJob(1);
paul.addJob(2); 
```

完美运行。您可能还想为您在 Job 上的反向关系设置 includeInJSON 为 false 以排除此人！

```
[{
    "company": {
        "id": 1,
        "name": "ibm",
        "employees": [null]
    },
    "person": {
        "name": "Paul",
        "jobs": [null, {
            "company": {
                "id": 2,
                "name": "apple",
                "employees": [null]
            }
        }]
    }
}, {
    "company": {
        "id": 2,
        "name": "apple",
        "employees": [null]
    },
    "person": {
        "name": "Paul",
        "jobs": [{
            "company": {
                "id": 1,
                "name": "ibm",
                "employees": [null]
            }
        },
        null]
    }
}] 
```

# jquery - 在 jquery 选择器中使用 >

> ID：11669357
> 
> 赞同：5
> 
> 时间：2012-07-26T12:31:52.763
> 
> 标签：jquery, jquery-selectors

> **可能重复：**
> [是什么`a > b`意思？](https://stackoverflow.com/questions/6640751/what-does-a-b-mean)

嗨，谁能告诉我这种选择器的用途是什么？

```
$("> div", "#main-content") 
```

是一样的吗

```
 $("div", "#main-content") 
```

?

以前没见过这种风格，只是在我刚买的模板中偶然发现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T12:37:25.853

基本上`>`表明，只有直接的孩子才匹配。如果`>`省略了，则匹配以下每个级别的所有子级。

如果你有这样的结构：

```
<div id="A">
  <div id="B">
    <div id="C"></div>
  </div>
</div> 
```

一个选择器，如：

```
#A > #B 
```

应该还给你 B，但是

```
#A > #C 
```

与 C 不匹配，而

```
#A #C 
```

将。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T12:37:02.827

只需参考[http://api.jquery.com/child-selector/](http://api.jquery.com/child-selector/)以清除您对`>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T12:37:11.187

我认为`$("div", "#main-content")`将选择`#main-content`元素树中的所有 div，而`$("> div", "#main-content")`仅选择直接子级。有关更多信息，请参阅[文档](http://api.jquery.com/child-selector/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T12:43:42.997

parent **>** child - 仅选择直接子元素
只是为了重新迭代：

> 注意：$("> elem", context) 选择器将在未来的版本中被弃用。因此不鼓励使用它来代替使用替代选择器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-26T13:16:33.493

上面有一些很好的答案。具体回答您的问题：

jQuery 结构是如何工作的： `$("tagToSelect", "context")` 也可以表示为 `$("context tagToSelect")`

">" 只选择上下文内的标签（一层深）

所以 `$("> div", "#main-content")` 在技术上与 #main-content 中的所有 div 相同， `$("#main-content > div")` 并将选择所有级别的 div（但不会更深）

您的另一个示例： 在技术上与 #main-content 中的整个 DOM 结构`$("div", "#main-content")` 相同 并将迭代并查找所有 div`$("#main-content div")`

希望这可以帮助 ：-）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-26T12:36:02.420

`>`用于直系子女。

```
<ul id="mainUl">
   <li>
      <ul id="secondaryUl">
         <li></li>
      </ul>
   </li>
</ul> 
```

在这里，两个`<ul>`标签都将被 捕获`$("ul")`，但只会`#mainUl`被捕获`$("> ul")`

# php - 相同的算法，不同的结果

> ID：11669362
> 
> 赞同：2
> 
> 时间：2012-07-26T12:32:02.973
> 
> 标签：php, c++, hash

美好的一天，我正在制作我的哈希算法，所以我正在将它从 PHP 重写为 C++。但是 C++ 的结果与 php 的结果不同。PHP 结果包含超过 10 个字符，C++ 结果只有 6 - 8 个字符。但是 PHP 结果的最后 8 个字符与 C++ 结果相同。所以这里是PHP代码：

```
<?php function JL1($text) { 
$text.="XQ";
$length=strlen($text);
$hash=0;        
for($j=0;$j<$length;$j++) {
    $p=$text[$j];
    $s=ord($p);
    if($s%2==0) $s+=9999;
    $hash+=$s*($j+1)*0x40ACEF*0xFF;                         
}       
$hash+=33*0x40ACEF*0xFF;
$hash=sprintf("%x",$hash);
return $hash; } ?> 
```

这里是 C++ 代码：

```
char * JL1(char * str){
int size=(strlen(str)+3),s=0; //Edit here (+2 replaced with +3)
if(size<=6) //Edit here (<9 replaced with <=6)
    size=9;
char *final=new char[size],temp;
strcpy(final,str);
strcat(final,"XQ");
long length=strlen(final),hash=0L;
for(int i=0;i<length;i++){
    temp=final[i];
    s=(int)temp;    
    if(s%2==0)s+=9999;
    hash+=((s)*(i+1)*(0x40ACEF)*(0xFF));
}
hash+=33*(0x40ACEF)*(0xFF);
sprintf(final,"%x",hash); //to hex string
final[8]='\0';
return final; } 
```

单词的 C++ 结果示例：“Hi！” : 053c81be 这个词的 PHP 结果： 324c **053c81be**

有谁知道，那个错误在哪里以及如何解决这个错误，无论是在 php 还是在 cpp 代码中？顺便说一句，当我在 php 结果中剪切那些第一个字母时，我得到了 C++ 结果，但这无济于事，因为 C++ 结果不必是 8 个字符长，在某些情况下它可以只有 6 个字符长。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:53:10.857

从哪里开始...

数据类型在 C 或 C++ 中没有固定的保证大小。因此，`hash`每次迭代都可能溢出，或者它可能永远不会这样做。

`char`s 可以是`signed`或`unsigned`，因此将 1 转换为整数可能会在不同的实现中产生负值和正值，对于相同的字符。

`final`在将值打印到其中时，您可能会写到末尾`hash`。将第 9 个字符设置为 0 时，您也可能会过早地切断字符串。

`strcat``final`如果`str`至少有 7 个字符长，则会写到末尾。

`s`，一个相对短暂的临时变量，被声明得太早了。与 相同`temp`。

您的代码看起来非常拥挤，几乎没有空格，而且很难阅读。

表达式“ `33*(0x40ACEF)*(0xFF)`”溢出；你的意思是`0x4DF48431L`？

`std::string`在 C++ 中处理字符串时，请考虑使用而不是 char 数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:54:04.450

这里似乎有一个错误......

```
int size=(strlen(str)+2),s=0; 
if(size<9)     
    size=9; 
char *final=new char[size],temp; 
strcpy(final,str); 
strcat(final,"XQ"); 
```

如果 strlen 是 10，那么 size 将为 12 并且将分配 12 个字符。然后复制原始的 10 个字符，并添加 XQ，但最终终止的 \0 将在分配的内存之外。

不确定这是否是您的错误，但看起来不正确

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T14:19:23.113

1.  `long hash`在 C++ 中最有可能在您的平台上限制为 32 位。PHP 的数字不是。

2.  `sprintf(final, "%x", hash)`产生一个可能不正确的结果。`%x`将参数解释为`unsigned int`，在 Windows 和 Linux x64 上都是 32 位。因此，它将 a 解释`long`为`unsigned int`，如果您`long`的长度超过 32 位，您的结果将被截断。

3.  查看 aib 提出的所有问题。尤其是结果的提前终止。

你需要自己处理第三点，但我可以回答前两点。您需要将结果限制为 32 位：`$hash &= 0xFFFFFFFF;`.

如果您限制*最终*值，则 php 代码将产生与 x64 Linux 上的 C++ 代码相同的结果（这意味着中间结果为 64 位整数）。

如果在每次计算后对其进行钳制，您应该得到与 C++ 代码在 32 位平台或 Windows x64 上相同的结果（中间结果为 32 位整数）。

# php - 使用 PHP 上传 .WMV 和 .FLV

> ID：11669366
> 
> 赞同：0
> 
> 时间：2012-07-26T12:32:16.583
> 
> 标签：php, javascript, jquery, upload

我想使用 Uploadify 和 PHP 上传 .wmv 和 .flv 文件。但是，我似乎无法正确处理。

这是我的代码：

```
$(function() {
    $("#file_upload").uploadify({
        'swf'         : 'uploadify/uploadify.swf',
        'uploader'    : 'uploadify/uploadify.php',
        'uploadLimit' : 1,
        'folder'    : 'uploads',
        'method'   : 'post',
        'auto'      : true,
        'multi'     : true,
        'fileExt'   : '*.jpg; *.gif; *.png; *.jpeg; *.wmv; *.flv',
         'onUploadSuccess' : function(file, data, response) {
        alert('The file was saved to: ' + file);
             } 
    });
}); 
```

上传.php

```
$targetFolder = '/uploads'; // Relative to the root

if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
    $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png','wmv'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

        move_uploaded_file($tempFile,$targetFile);
} 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:59:05.680

您可能只需要增加最大上传限制即可阅读[http://css-tricks.com/snippets/php/increase-maximum-php-upload-size/](http://css-tricks.com/snippets/php/increase-maximum-php-upload-size/)

# c# - Windows 天蓝色芥末

> ID：11669367
> 
> 赞同：0
> 
> 时间：2012-07-26T12:32:17.957
> 
> 标签：c#, azure-storage, azure-worker-roles, autoscaling, wasabi

当我创建了一个使用芥末“AutoScaling”功能的 Windows azure 项目时，我遇到了以下异常，我还配置了 app.config 文件：

**例外**：

“无法加载文件或程序集 'Microsoft.WindowsAzure.StorageClient, Version=1.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常: 0x80131040)"

自动缩放器 objAutoScaler= EnterpriseLibraryContainer.Current.GetInstance(); // 这里我得到了异常

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:49:20.667

我不知道您是否还有这个问题，但是您的项目中是否引用了这些程序集？

*Microsoft.WindowsAzure.StorageClient*

*Microsoft.WindowsAzure.ServiceRuntime*

此外，如果您使用的是 1.7 版的 Azure SDK，则需要在 app.config 中添加此部分：

```
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="Microsoft.WindowsAzure.ServiceRuntime" publicKeyToken="31BF3856AD364E35" culture="neutral"/>
    <bindingRedirect oldVersion="0.0.0.0-1.7.0.0" newVersion="1.7.0.0"/>
  </dependentAssembly>
</assemblyBinding>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <dependentAssembly>
    <assemblyIdentity name="Microsoft.WindowsAzure.StorageClient" publicKeyToken="31BF3856AD364E35" culture="neutral"/>
    <bindingRedirect oldVersion="0.0.0.0-1.7.0.0" newVersion="1.7.0.0"/>
  </dependentAssembly>
</assemblyBinding> 
```

# vim - VIMRC # 关键大小写不敏感搜索

> ID：11669369
> 
> 赞同：0
> 
> 时间：2012-07-26T12:32:23.020
> 
> 标签：vim

我通常在 VIM 中使用 # 键来搜索与我光标下的文本匹配的文本。最近，我一直在阅读不区分大小写的 VHDL 文件。对我来说不幸的是，最初编写这些文件的人与他们的信号、变量等的情况不一致......

有没有办法让 # 和 * 键成为不区分大小写的搜索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:39:02.717

```
:h 'ignorecase' 
```

和

```
:h smartcase 
```

是您正在寻找的选项。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T12:41:49.703

您可以`ignorecase`为文件设置：

```
set ic 
```

或更一般地说：

```
au FileType,BufEnter *.hdl,*.vhdl set ic 
```

如前所述，该`ic`选项是全局的，该设置将影响其他缓冲区。可以使用新的映射（或重新映射的`*`）来避免这种情况：

```
map <f5> /\c\<<C-R><C-W>\><CR> 
```

# windows-7 - 无法在 VirtualBox 上运行的无头 Ubuntu 服务器上运行 Windows 7 映像

> ID：11669376
> 
> 赞同：0
> 
> 时间：2012-07-26T12:32:43.857
> 
> 标签：windows-7, virtualization, virtualbox, ubuntu-12.04, ubuntu-server

乱七八糟的吧？！在解释这一点时，我会尽量不误导您……我正在尝试模拟几天后必须配置的环境。所有操作系统都是 64 位的。我的开发机器上有 Windows 7，在 VirtualBox 上运行无头 Ubuntu 服务器 12.04（操作系统应该安装在即将到来的服务器上）。在 Ubuntu 上，我正在尝试将“Windows 7”安装为虚拟机，直到它功能齐全并开始在其上安装其他应用程序。

图像（托管在无头 Ubuntu 服务器上的 Windows 7）启动并显示 windows 正在“加载文件”，而不是启动安装过程，它显示消息：`Attempting to load a 64 bit application however this cpu is not compatible with 64-bit mode`.

以下是 Windows 7 虚拟机信息：

```
Name:            Windows 7 Pro
Guest OS:        Windows 7 (64 bit)
UUID:            9410fce2-09e8-4509-b4f9-e6780b9f81ed
Config file:     /home/myhome/VirtualBox VMs/Windows 7 Pro/Windows 7 Pro.vbox
Snapshot folder: /home/myhome/VirtualBox VMs/Windows 7 Pro/Snapshots
Log folder:      /home/myhome/VirtualBox VMs/Windows 7 Pro/Logs
Hardware UUID:   9410fce2-09e8-4509-b4f9-e6780b9f81ed
Memory size:     2048MB
Page Fusion:     off
VRAM size:       8MB
CPU exec cap:    100%
HPET:            off
Chipset:         piix3
Firmware:        BIOS
Number of CPUs:  1
Synthetic Cpu:   off
CPUID overrides: None
Boot menu mode:  message and menu
Boot Device (1): Floppy
Boot Device (2): DVD
Boot Device (3): HardDisk
Boot Device (4): Not Assigned
ACPI:            on
IOAPIC:          on
PAE:             on
Time offset:     0 ms
RTC:             local time
Hardw. virt.ext: on
Hardw. virt.ext exclusive: on
Nested Paging:   on
Large Pages:     off
VT-x VPID:       on
State:           powered off (since 2012-07-26T12:13:39.000000000)
Monitor count:   1
3D Acceleration: off
2D Video Acceleration: off
Teleporter Enabled: off
Teleporter Port: 0
Teleporter Address: 
Teleporter Password: 
Storage Controller Name (0):            IDE Controller
Storage Controller Type (0):            PIIX4
Storage Controller Instance Number (0): 0
Storage Controller Max Port Count (0):  2
Storage Controller Port Count (0):      2
Storage Controller Bootable (0):        on
IDE Controller (0, 0): /home/myhome/vm/Win7Pro.vdi (UUID: 08f7315a-c740-48eb-b32f-21520ccbcc70)
IDE Controller (0, 1): /home/myhome/vm/GRMCPRXFRER_EN_DVD.ISO (UUID: 3e18fcf6-6093-4d3f-a480-1284067645f9)
NIC 1:           MAC: 080027592440, Attachment: NAT, Cable connected: on, Trace: off (file: none), Type: 82540EM, Reported speed: 0 Mbps, Boot priority: 0, Promisc Policy: deny
NIC 1 Settings:  MTU: 0, Socket (send: 64, receive: 64), TCP Window (send:64, receive: 64)
NIC 2:           disabled
NIC 3:           disabled
NIC 4:           disabled
NIC 5:           disabled
NIC 6:           disabled
NIC 7:           disabled
NIC 8:           disabled
Pointing Device: PS/2 Mouse
Keyboard Device: PS/2 Keyboard
UART 1:          disabled
UART 2:          disabled
Audio:           disabled
Clipboard Mode:  Bidirectional
VRDE:            enabled (Address 0.0.0.0, Ports 3389, MultiConn: off, ReuseSingleConn: off, Authentication type: null)
Video redirection: disabled
VRDE property: TCP/Ports  = "3389"
VRDE property: TCP/Address = <not set>
VRDE property: VideoChannel/Enabled = <not set>
VRDE property: VideoChannel/Quality = <not set>
VRDE property: VideoChannel/DownscaleProtection = <not set>
VRDE property: Client/DisableDisplay = <not set>
VRDE property: Client/DisableInput = <not set>
VRDE property: Client/DisableAudio = <not set>
VRDE property: Client/DisableUSB = <not set>
VRDE property: Client/DisableClipboard = <not set>
VRDE property: Client/DisableUpstreamAudio = <not set>
VRDE property: Client/DisableRDPDR = <not set>
VRDE property: H3DRedirect/Enabled = <not set>
VRDE property: Security/Method = <not set>
VRDE property: Security/ServerCertificate = <not set>
VRDE property: Security/ServerPrivateKey = <not set>
VRDE property: Security/CACertificate = <not set>
VRDE property: Audio/RateCorrectionMode = <not set>
USB:             disabled

USB Device Filters:

<none>

Available remote USB devices:

<none>

Currently Attached USB Devices:

<none>

Shared folders:  <none>

VRDE Connection:    not active
Clients so far:     0

Guest:

Configured memory balloon size:      0 MB
OS type:                             Windows7_64
Additions run level:                 0

Guest Facilities:

No active facilities. 
```

那么我在这里缺少什么？可能是不可能在虚拟机（无头 Ubuntu 服务器）上进行硬件虚拟化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:36:25.827

> 可能是不是不可能在虚拟机上进行硬件虚拟化

脑袋上。

硬件虚拟化是一层唯一的事情 - 在硬件支持的虚拟机管理程序中运行的虚拟机本身不能配置处理器虚拟化层，因为它已经使用过。

它不支持嵌套虚拟机，因为这是现实世界中不使用的场景（除了一些真正的边缘情况，这些情况与资金不足有关，而不是其他任何事情）。

# python - 使用python3的列表生成器表达式中未定义的全局，与python2一起使用，需要哪些更改？

> ID：11669379
> 
> 赞同：9
> 
> 时间：2012-07-26T12:32:55.213
> 
> 标签：python, python-3.x

```
class Some(object):
    tokens = [ ... list of strings ... ]
    untokenized = [tokens.index(a) for a in [... some other list of strings ...]]
    ... etc ...
some = Some() 
```

这适用于 Python2.7。然而 python3 说：

```
Traceback (most recent call last):
File "./test.py", line 17, in <module>
    class Some(object):
File "./test.py", line 42, in Some
    untokenized = [tokens.index(a) for a in [... some other list of strings ...]]
File "./test.py", line 42, in <listcomp>
    untokenized = [tokens.index(a) for a in [... some other list of strings ...]]
NameError: global name 'tokens' is not defined 
```

虽然我可以解决这个问题，但我真的很想知道 Python2 和 Python3 之间的区别。我已阅读 python 2->3 更改文档，但我无法识别与我的问题相关的任何描述。工具也`2to3`不会在我的代码中抱怨任何内容。

顺便说一句，虽然我现在不记得情况了，但我也*只有*与 python2 类似的东西（我什至没有用 3 尝试过），我认为这应该可以工作（在一个类中）：

```
def some_method(self):
    return {a: eval("self." + a) for a in dir(self) if not a.startswith("_")} 
```

但是它会导致 python2 说：`NameError: name 'self' is not defined` 我还没有用 python3 尝试过这个，但是例如这有效：

```
[eval("self." + a) for a in dir(self) if not a.startswith("_")] 
```

如果我将上一个示例的相关部分更改为这个（好吧，示例本身有点愚蠢，但至少显示了我的问题）。现在我很好奇，为什么`self`似乎没有为第一个示例定义，而是为第二个示例定义？似乎对于 dicts，我有类似的问题，我的原始问题是关于的，但是使用列表生成器表达式它可以工作，但在 python3 中不起作用。嗯...

在我的 python2 -> 3 问题之后，我提到了这一点，因为所有这些似乎都是关于没有根据 python 解释器定义的问题（也许我的问题的第二部分是不相关的？）。我现在感到很困惑。请告诉我我的错误（因为我确定我当然错过了一些东西）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-26T13:22:54.083

正如 Wooble 所说，问题在于类没有词法范围（实际上，在[Python 2](http://docs.python.org/reference/compound_stmts.html#class-definitions)或[Python 3](http://docs.python.org/dev/reference/compound_stmts.html#class-definitions)中）。相反，它们有一个不构成范围的本地*命名空间。*这意味着类定义中的表达式可以访问命名空间的内容：

```
class C:
    a = 2
    b = a + 2    # b = 4 
```

但是在类主体中引入的范围*无权*访问其命名空间：

```
class C:
    a = 2
    def foo(self):
        return a    # NameError: name 'a' is not defined, use return self.__class__.a 
```

Python 2 和 Python 3 之间的区别在于 Python 2 中的列表推导*不*引入新的作用域：

```
[a for a in range(3)]
print a    # prints 2 
```

而在 Python 3 中，它们会：

```
[a for a in range(3)]
print(a)    # NameError: name 'a' is not defined 
```

由于几个原因，这在 Python 3 中进行了更改，包括使列表推导的行为方式与生成器表达式（genexps）相同；`(a for a in range(3))`在 Python 2 和 Python 3 中都有自己的范围。

因此，在类的主体中，Python 2 genexp 或 Python 3 listcomp 或 genexp 引入了新范围，因此无法访问类定义本地命名空间。

让 genexp/listcomp 访问类定义命名空间中的名称的方法是使用函数或 lambda 引入新范围：

```
class C:
    a = 2
    b = (lambda a=a: [a + i for i in range(3)])() 
```

* * *

### `eval`问题_

您的`eval`示例的问题是`eval`默认情况下在本地范围内评估其参数；因为 Python 2 列表推导具有共享封闭范围的上述行为，所以`eval`可以访问方法范围，但是 genexp 或 Python 3 listcomp 本地范围仅具有编译器可以告诉封闭范围所需的任何内容（因为 genexp/listcomp 范围是一个闭包）：

```
def bar(x):
    return list(eval('x') + x for i in range(3))
bar(5)  # returns [10, 10, 10]

def baz(x):
    return list(eval('x') for i in range(3))
baz(5)  # NameError: name 'x' is not defined 
```

正如 Martijn 所说，`eval`您应该使用`getattr`.

# asp.net-mvc - 控制器没有返回数据

> ID：11669382
> 
> 赞同：0
> 
> 时间：2012-07-26T12:32:58.667
> 
> 标签：asp.net-mvc, controller

我的 ApiController 应该返回数据：

```
// GET api/profile
public IEnumerable<HubBasicProfile> GetProjectProfiles()
{
    IEnumerable<HubBasicProfile> res = _bpss.GetAllBasicProfiles();
    return res;
} 
```

当我在返回之前调试和检查`res`时，它有 91 个`HubBasicProfile`对象的数据。

但是，当返回数据时，我看到 91 `{}`，空对象。根本没有数据。

有人知道为什么会这样吗？

谢谢埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:41:46.627

调用`ToList()`方法。所以不会发生[延迟执行。](http://msdn.microsoft.com/en-us/library/bb943859.aspx)

```
public IEnumerable<HubBasicProfile> GetProjectProfiles()
{
    IEnumerable<HubBasicProfile> res = _bpss.GetAllBasicProfiles();
    return res.ToList();
} 
```

> 延迟执行意味着表达式的评估被延迟，直到它的实现值被实际需要收集。

**编辑：**根据评论

如果您正在序列化这些项目，您需要确保您的类被标记为可序列化/具有 [ `DataMember]`/`[DataContract]`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:39:32.237

我想这是因为 IEnumerable 将使用惰性评估，并且不会被要求枚举它的集合。

调试时，您是在告诉调试器枚举“res”以便查看结果。

如果您在返回之前执行 .ToList() 或类似操作，您看到结果了吗？

# objective-c - 目标C：固定触摸移动图像之间的距离

> ID：11669386
> 
> 赞同：2
> 
> 时间：2012-07-26T12:33:13.317
> 
> 标签：objective-c, ios, core-graphics

执行触摸移动时，如何设置与新图像（点）具有相同固定距离的图像（点）？

![在此处输入图像描述](../Images/2dedec61ba42d2839c9bf6e8b0dd8737.png)

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint touchLocation = [touch locationInView:touch.view];

        UIImageView *imageView=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Crayon_Black.png"]];
        imageView.center = touchLocation;    

    [drawImage addSubview:imageView];
} 
```

我希望这是有道理的。我只需要完成我的学校项目。提前谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:01:50.840

只要您不将手指移动得太快，此解决方案就可以工作：

```
@interface ViewController : UIViewController {
    CGPoint lastLocation_;
    CGFloat accumulatedDistance_;
}

...

-(CGFloat) distanceFromPoint:(CGPoint)p1 ToPoint:(CGPoint)p2 {
    CGFloat xDist = (p2.x - p1.x);
    CGFloat yDist = (p2.y - p1.y);
    return sqrt((xDist * xDist) + (yDist * yDist));
}              

-(void) addImageAtLocation:(CGPoint)location {
    UIImageView *imageView=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Crayon_Black.png"]];
    imageView.center = location;
    [self.view addSubview:imageView];
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesBegan:touches withEvent:event];
    lastLocation_ = [[touches anyObject] locationInView:self.view];
    accumulatedDistance_ = 0;
    [self addImageAtLocation:lastLocation_];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];

    CGFloat distance = [self distanceFromPoint:touchLocation ToPoint:lastLocation_];
    accumulatedDistance_ += distance;
    CGFloat fixedDistance = 40;
    if (accumulatedDistance_ > fixedDistance) {
        [self addImageAtLocation:touchLocation];
        while (accumulatedDistance_ > fixedDistance) {
            accumulatedDistance_ -= fixedDistance;
        }
    }

    lastLocation_ = touchLocation;
} 
```

# jquery - 如何使用 jQuery 启用和禁用链接？

> ID：11669390
> 
> 赞同：0
> 
> 时间：2012-07-26T12:33:28.773
> 
> 标签：jquery

我有以下内容：

```
 <button id="refreshLink" class="blue" type="button" title="Refresh Grid"
                data-entity="Topic"
                data-href="/Admin/Contents/Reference">
                <span class="center-icon sprite-arrow-circle"></span></button> 
```

和这个 jQuery 代码：

```
$('#refreshLink')
.click(function () {
    if ($(this).hasClass("blue")) {
        $(this).removeClass('blue').addClass('grey');
        refreshGrid($(this).attr('data-entity')); ;
    }
    return false;
}); 
```

我认为这会停止多次点击，但它似乎仍然让用户多次点击并获得多次刷新。

有没有办法可以使用 jQuery 禁用和启用链接？如果用户点击多次，是否还有一些点击进入的队列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:35:55.127

您可以按其类选择元素：

```
$('button.blue').click(function () {
    $(this).removeClass('blue').addClass('grey');
    refreshGrid($(this).attr('data-entity')); ;
    return false;
}); 
```

或使用 jQuery`one()`方法：

> 将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

```
$('#refreshLink').one('click', function () {
    $(this).removeClass('blue').addClass('grey');
    refreshGrid($(this).attr('data-entity')); ;
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:39:22.943

您只能对那些具有蓝色类的按钮执行刷新。此外，您可能希望使用[toggleClass()](http://api.jquery.com/toggleClass/)在类之间切换。

```
$('#refreshLink.blue').click(function () {
    $(this).toggleClass('blue grey');
    $(this).prop('disabled', true);
    refreshGrid($(this).attr('data-entity')); ;
    return false;
}); 
```

[现场演示](http://jsfiddle.net/dxwQH/)

# php - 修改站点搜索的搜索查询

> ID：11669391
> 
> 赞同：0
> 
> 时间：2012-07-26T12:33:29.847
> 
> 标签：php, mysql, search-engine

我正在研究能够进行搜索的站点搜索引擎，现在我想修改查询以进行智能搜索。

我正在这样写我的查询

```
 require_once('../global/connect.php');
$db = mysql_select_db($database,$connection) or trigger_error("SQL", E_USER_ERROR);
$sqlquery = mysql_query("SELECT title FROM test_table WHERE MATCH (title) AGAINST ('%keyword*%' IN BOOLEAN MODE) ")or die (mysql_error());
while($row=mysql_fetch_assoc($sqlquery)){
echo $row['title'];
echo"</br>";
} 
```

我想要一个可以搜索的搜索功能。

如果用户键入这些关键字中的任何一个

```
KEYWORDS
KEY-WORDS
KEY-WORDS
KEY WORDS
KEYWORD
KEYWOR 
```

结果应该是一样的。

我在这里看了很多这样的[问题](https://stackoverflow.com/questions/406587/php-mysql-advanced-search-page?rq=1)。凝视它，还查看了[这里](http://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html)的 MySQL 开发者网站，但我不知道如何修改我的查询以使其正常工作。

请为此提出任何可能的方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:59:55.273

我建议使用 Lucene 进行搜索。它支持模糊匹配。此外，您的数据库负载也会减少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:45:08.450

尝试[`SOUNDS LIKE`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#operator_sounds-like)：

```
SELECT title FROM test_table WHERE title SOUNDS LIKE '%keyword*%' 
```

# hadoop - PIG local 和 mapreduce 模式的区别

> ID：11669394
> 
> 赞同：8
> 
> 时间：2012-07-26T12:33:38.997
> 
> 标签：hadoop, mapreduce, hdfs, apache-pig

在本地和在 mapreduce 上运行 PIG 脚本之间的实际区别是什么？我了解 mapreduce 模式是当您在安装了 hdfs 的集群上运行它时。这是否意味着本地模式不需要 HDFS，因此即使 mapreduce 作业也不会被触发？有什么区别，你什么时候做另一个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T16:30:41.067

本地模式将构建一个模拟 mapreduce 作业，从磁盘上的本地文件运行。理论上相当于 MapReduce，但它不是“真正的”mr 工作。您不应该从用户的角度来区分。

本地模式非常适合开发。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-23T20:55:29.720

本地模式：所有脚本都在一台机器上运行，不需要 Hadoop MapReduce 和 HDFS。这对于开发和测试 Pig 逻辑很有用。如果您使用一小组数据来开发或测试您的代码，那么本地模式可能比通过 MapReduce 基础架构更快。

本地模式不需要 Hadoop。在本地模式下运行时，Pig 程序在本地 Java 虚拟机的上下文中运行，数据访问是通过单台机器的本地文件系统进行的。本地模式实际上是对 Hadoop 的 LocalJobRunner 类中 MapReduce 的本地模拟。

MapReduce 模式（也称为 Hadoop 模式）：Pig 在 Hadoop 集群上执行。在这种情况下，Pig 脚本被转换为一系列 MapReduce 作业，然后在 Hadoop 集群上运行。 ![猪的本地和分布式模式](../Images/3f07c6d5c20a6c22a8735e275670e215.png)

如果您有 1 TB 的数据要对其执行操作并且想要交互式地开发程序，您可能很快就会发现速度大大降低，并且您可能会开始增加存储空间。本地模式允许您以更具交互性的方式处理数据子集，以便您可以找出 Pig 程序的逻辑（并解决错误）。

在您根据需要进行设置并且您的操作运行顺利之后，您可以使用 MapReduce 模式针对完整数据集运行脚本。

# vb6 - 当用户尝试在 vb6 中打开新实例时返回到已打开的应用程序

> ID：11669401
> 
> 赞同：2
> 
> 时间：2012-07-26T12:34:05.670
> 
> 标签：vb6

假设用户将我的 Visual Basic 应用程序最小化为任务栏通知图标。现在我想当用户打开一个新实例时，旧的应该恢复。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T12:47:04.497

通常，用于创建单实例应用程序的策略是在应用程序初始化中添加一些代码，以确定实例是否已经在运行。如果是，它会获得主窗口的句柄，将焦点传递给它，然后默默地死去。如果不是，它会继续运行并照常完成其余的初始化序列。

您会发现许多旧的 VB 6 文章通过遍历所有顶级窗口来完成此操作，寻找标题与您期望的标题匹配的标题。但这是一个非常脆弱的解决方案，不需要太多就可以摆脱它。

同样处理[`App.PrevInstance`财产](http://msdn.microsoft.com/en-us/library/aa268085.aspx)。这使用起来非常简单，而且实现起来也非常简单。它根据可执行文件的名称工作，并查找名称匹配的正在运行的进程。但是，如果用户创建并重命名可执行文件的副本，这很容易失败。如果这对您来说是可以接受的，您可以通过查询`App.PrevInstance`属性很容易地实现这一点。否则，您将需要使用更强大的解决方案。

一种这样的可能性是在应用程序的第一个实例启动时创建和注册一个命名互斥锁。然后，当后续实例尝试注册相同的互斥体时，它们将失败，表明一个实例已经在运行。[您可以在此问题](https://stackoverflow.com/questions/947/how-to-use-a-mutex-in-visual-basic)的答案中找到有关在 VB 6 中使用互斥锁的说明。

使用互斥锁的几个重要注意事项：

*   您需要确保在应用程序关闭时调用[`ReleaseMutex`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685066.aspx)and[`CloseHandle`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724211.aspx)函数，以释放和销毁您创建的互斥锁的所有权。

*   当您在 VB 6 IDE 中运行您的程序（例如，调试它）并且它注册了一个互斥锁时，该互斥锁属于 IDE 并且在您关闭 IDE 并重新启动它之前不会被释放。为了防止这种情况，您可以在使用条件编译在 IDE/调试器内部运行时禁止创建互斥锁。如果您采用这种方法，请确保在调试器*之外*测试您的程序，以确保与互斥锁相关的功能按预期工作！您永远不应该向没有经过彻底测试的客户发货。

通过使用与 VB 6 安装捆绑在一起的 API Viewer 程序，您可以找到这些 Windows API 函数的所有 VB 6 声明。

有关处理 VB 6 应用程序的多个实例的更多信息，请访问[Karl Peterson 的网站](http://vb.mvps.org/hardcore/html/handlingmultipleinstances.htm)。[在这篇关于 VB Accelerator](http://www.vbaccelerator.com/home/VB/Code/Libraries/Shell_Projects/Registering_File_Associations/article.asp)的文章中还有一个完整的示例实现——特别关注第 2 步，您不需要其余代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T12:56:33.370

您通常可以以退化的方式使用 DDE 相当简单地做到这一点：

**Form1.frm**

```
Option Explicit
'This is Form1\.  To use as DDE source at design time we set:
'   Form1.LinkMode = 1 (Source, i.e. vbLinkSource).
'   Form1.LinkTopic = "Form1" (default).
'
'Note we use (hidden) Label1 on this Form as a DDE destination.

Private PrevState As Integer

Private Sub Form_LinkExecute(CmdStr As String, Cancel As Integer)
    'Got a "command" so restore Form1 and accept the command.
    WindowState = PrevState
    Caption = "I am awake!"
    Cancel = False
End Sub

Private Sub Form_Load()
    PrevState = WindowState
End Sub

Private Sub Form_Resize()
    If WindowState <> vbMinimized Then PrevState = WindowState
End Sub 
```

**模块1.bas**

```
Option Explicit

Private Sub Main()
    Load Form1
    'After Form1 is loaded (hidden), try DDE link to possible prior copy.
    With Form1.Label1
        .LinkTopic = App.EXEName & "|Form1"
        On Error Resume Next
        .LinkMode = vbLinkManual
        If Err.Number = 0 Then
            On Error GoTo 0
            'Link succeeded.  Wake up prior copy via pushback to
            'the DDE source, then unload Form1 and terminate.
            .LinkExecute "Wake up!"
            Unload Form1
        Else
            On Error GoTo 0
            'Link failed, so we're 1st.  Show Form1.
            Form1.Show vbModal
        End If
    End With
End Sub 
```

# clojure - 在 Clojure 中逐个字符处理文件

> ID：11669404
> 
> 赞同：5
> 
> 时间：2012-07-26T12:34:19.173
> 
> 标签：clojure

我正在用 Clojure 编写一个函数，它将逐个字符地处理文件。我知道 Java 的 BufferedReader 类具有读取一个字符的 read() 方法，但我是 Clojure 的新手，不知道如何使用它。目前，我只是尝试逐行执行文件，然后打印每个字符。

```
(defn process_file [file_path]
(with-open [reader (BufferedReader. (FileReader. file_path))]
    (let [seq (line-seq reader)]
        (doseq [item seq]
            (let [words (split item #"\s")]
                (println words)))))) 
```

给定具有此文本输入的文件：

> 我们诚挚地接受国际捐赠，但我们不能就从美国境外收到的捐赠的税务处理作出任何声明。仅美国法律就淹没了我们的小员工。

我的输出如下所示：

```
[International donations are gratefully accepted, but we cannot make]
[any statements concerning tax treatment of donations received from]
[outside the United States.  U.S. laws alone swamp our small staff.] 
```

虽然我希望它看起来像：

```
["international" "donations" "are" .... ] 
```

所以我的问题是，如何将上面的函数转换为逐字符读取？甚至，如何让它像我期望的那样工作？此外，任何使我的 Clojure 代码更好的提示将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:20:08.120

```
(with-open [reader (clojure.java.io/reader "path/to/file")] ... 
```

我更喜欢这种方式来获取`reader`clojure。并且，`character by character`您的意思是在文件访问级别，例如`read`，允许您控制`bytes`读取多少？

### 编辑

正如@deterb 指出的那样，让我们​​检查一下源代码`line-seq`

```
(defn line-seq
  "Returns the lines of text from rdr as a lazy sequence of strings.
   rdr must implement java.io.BufferedReader."
  {:added "1.0"
   :static true}
  [^java.io.BufferedReader rdr]
  (when-let [line (.readLine rdr)]
    (cons line (lazy-seq (line-seq rdr))))) 
```

我伪造了一个`char-seq`

```
 (defn char-seq 
   [^java.io.Reader rdr]
   (let [chr (.read rdr)]
     (if (>= chr 0)
     (cons chr (lazy-seq (char-seq rdr)))))) 
```

我知道这会将~~`char-seq`所有字符读入内存~~[1] ，但我认为它表明您可以直接调用`.read`. `BufferedReader`因此，您可以像这样编写代码：

```
(let [chr (.read rdr)]
  (if (>= chr 0)
    ;do your work here
  )) 
```

你怎么想？

[1] 根据@dimagog 的评论，`char-seq`由于没有将所有字符读入内存`lazy-seq`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T14:35:51.463

我不熟悉 Java 或 read() 方法，因此无法帮助您实现它。

第一个想法可能是通过使用来简化[`slurp`](http://clojuredocs.org/clojure_core/clojure.core/slurp)，它将返回整个文件的文本字符串`(slurp filename)`。但是，这会得到整个文件，这可能是您不想要的。

一旦你有了整个文件文本的字符串，你可以通过简单地把它当作一个字符序列来逐个字符地处理任何字符串。例如：

```
=> (doseq [c "abcd"]
     (prntln c))
a
b
c
d
=> nil 
```

或者：

```
=> (remove #{\c} "abcd")
=> (\a \b \d) 
```

您可以使用`map`or`reduce`或任何类型的序列操作函数。请注意，在像序列一样对其进行操作之后，它现在将作为序列返回，但是您可以轻松地将外部部分包裹起来，`(reduce str ...)`以便在最后将其返回为字符串——明确地：

```
=> (reduce str (remove #{\c} "abcd"))
=> "abd" 
```

至于您的特定代码的问题，我认为问题在于什么`words`是：字符串向量。当您打印每个时`words`，您正在打印一个矢量。如果最后你用 替换了该行`(println words)`，`(doseq [w words] (println w)))`那么它应该很好用。

此外，根据您所说的您希望输出看起来像什么（文件中所有不同单词的向量），您不想只`(println w)`在表达式的基础上做，因为这将打印 values 并 return `nil`。你只会想要`w`. 此外，您还想再次将`doseq`s替换为`for`s--，以避免 return `nil`。

此外，在改进您的代码时，它对我来说通常看起来很棒，但是 - 这与我上面建议的所有第一个更改（但不是其他更改，因为我不想明确地把它*全部*画出来） -你可以用一个有趣的小技巧来缩短它：

```
(doseq [item seq]
        (let [words (split item #"\s")]
            (doseq [w words]
              (println w))))

;//Could be rewritten as...

(doseq [item s
        :let [words (split item #"\s")]
        w words]
  (println w)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T16:03:50.300

你非常接近 - 请记住字符串是一个序列。 `(concat "abc" "def")`结果在序列中`(\a \b \c \d \e \f)`。

`mapcat`是另一个非常有用的功能 - 它会延迟连接将映射 fn 应用到序列的结果。这意味着`mapcat`将所有行字符串转换为 a 的结果`seq`将是您所追求的惰性字符序列。

我这样做了`(mapcat seq (line-seq reader))`。

其他建议：

*   为了创建阅读器，我建议使用该`clojure.java.io/reader`函数而不是直接创建类。
*   考虑将文件的读取和字符串的处理（在本例中为打印）分开。虽然将完整文件解析保留在`withopen`子句内很重要，但能够在文件读取代码之外测试实际处理代码非常有用。
*   在导航多个（可能嵌套的）序列时，请考虑使用`for`. `for`在处理嵌套循环类型的情况下做得很好。

    `(take 100 (for [line (repeat "abc") char (seq line)] (prn char)))`

*   用于`prn`调试输出。与用户输出相比，它为您提供了真实的输出（隐藏了用户通常不关心的某些细节）。

# selenium - 在 Selenium 2 中：driver.switchTo().frame() 导致应用程序崩溃

> ID：11669411
> 
> 赞同：0
> 
> 时间：2012-07-26T12:34:44.220
> 
> 标签：selenium, webdriver

我正在使用 Selenium 2 和 IE7。

我正在测试的应用程序中有很多 iframe。所以我正在使用`driver.switchTo().frame()`方法在 iframe 之间切换。我也在`driver.switchTo().defaultContent()`切换到 iframe 之前使用。

但是在某些情况下，`driver.switchTo().frame()`会导致应用程序崩溃。以下是eclipse中的错误：

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: javaw.exe
  Application Version:  6.0.70.6
  Application Timestamp:    484e4780
  Fault Module Name:    IEDriver.dll
  Fault Module Version: 0.0.0.0
  Fault Module Timestamp:   4fdf5b90
  Exception Code:   c0000005
  Exception Offset: 0008a71e
  OS Version:   6.0.6001.2.1.0.274.10
  Locale ID:    1033
  Additional Information 1: 1699
  Additional Information 2: 3c7b32a427f0a23d017c01e406809b93
  Additional Information 3: 437a
  Additional Information 4: 0abbaf052c4358d69b1ef6b054f6ab09 
```

我什至尝试通过 , 获取 iframe 的来源`driver.findElement(By.id(iframeID)).getAttribute("src")`，并且我能够获得 iframe 的来源。我还尝试在 iframe 切换之间引入等待，但它仍然给出相同的错误。我不知道为什么在某些情况下它会导致应用程序崩溃。

有没有人有类似的经历或可以想到任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:22:32.623

我正在使用此代码通过 src 选择 iframe，它可以工作：

```
driver.switchTo().frame(driver.findElement(By.cssSelector("iframe[src=\"SRC_OF_FRAME\"]"))); 
```

# opengl - OpenGL 照明不起作用

> ID：11669414
> 
> 赞同：1
> 
> 时间：2012-07-26T12:34:45.963
> 
> 标签：opengl, lighting

我正在尝试在我的场景中设置照明，但由于某种原因它不起作用，我试图找出原因

这是我初始化 OpenGL 的方式：

```
glClearColor(0.0, 0.0, 0.0, 0.0);
glClearDepth(1.0);
glDepthFunc(GL_LESS);
glEnable(GL_DEPTH_TEST);
glShadeModel(GL_SMOOTH);
glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);
glEnable(GL_COLOR_MATERIAL);
glEnable(GL_LIGHTING);
glEnable(GL_NORMALIZE);
glEnable(GL_LIGHT0); 
```

以下是我尝试在开启照明的情况下进行绘制的方法：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
glLoadIdentity();
GLfloat diffuse0[]={1.0, 1.0, 1.0, 1.0};
GLfloat ambient0[]={1.0, 1.0, 1.0, 1.0};
GLfloat specular0[]={1.0, 1.0, 1.0, 1.0};
GLfloat light0_pos[]={1.0, 1.0, 1,0, 1.0};

glLightfv(GL_LIGHT0, GL_POSITION, light0_pos);
glLightfv(GL_LIGHT0, GL_AMBIENT, ambient0);
glLightfv(GL_LIGHT0, GL_DIFFUSE, diffuse0);
glLightfv(GL_LIGHT0, GL_SPECULAR, specular0);

glLightf(GL_LIGHT0, GL_CONSTANT_ATTENUATION, 2.0);
glLightf(GL_LIGHT0, GL_LINEAR_ATTENUATION, 1.0);
glLightf(GL_LIGHT0, GL_QUADRATIC_ATTENUATION, 2.0);

object->draw(); 
```

物体完全不受光照影响

设置所有法线以及opengl照明场景所需的所有信息

有没有……我错过了什么？

编辑：好的！我终于找到了解决问题的方法。我的opengl init函数在我必须在显示窗口之后而不是之前调用它的代码中放错了位置，这就是导致问题的原因......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:41:46.313

也许你应该告诉我们物体的位置。

*   嫌疑人一：物体位置与灯光距离太远
*   嫌疑人 2：隐藏所有 ATTENUATION 设置或将 LINEARATTENUATION 设为 0.0

# php - 用户在线即时通知 - 离线状态

> ID：11669415
> 
> 赞同：1
> 
> 时间：2012-07-26T12:34:45.677
> 
> 标签：php, jquery, ajax

> **可能重复：**
> [如何在线/离线](https://stackoverflow.com/questions/3435638/how-to-make-online-offline)

我想让一个脚本使用 php 向其他用户显示在线-离线状态。

例如：假设我们的数据库中有两个用户。第一个用户在线，第二个用户离线。当第二个用户上线时，第一个用户如何在不刷新页面或刷新 div 标签的情况下立即收到第二个用户在线的通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:39:06.770

您可以为此使用[Pusher 。](http://pusher.com/)

# jquery - 我如何缓存 jquery ui 选项卡数据？

> ID：11669417
> 
> 赞同：1
> 
> 时间：2012-07-26T12:34:57.667
> 
> 标签：jquery, asp.net, ajax, jquery-ui

我正在使用 ajax 在选项卡选择上呈现用户控件。

```
$("#tabs").tabs({
        ajaxOptions: { cache: true },
        spinner: 'Loading ...',
        cache: true,
        select: function(event, ui) {
            var text = $(ui.tab).text();

            $.ajax({
                    type: "POST",
                    url: "abc.aspx/GetData",
                    data: "{'tabType':'" + text + "'}",
                    cache: true,
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(response) {
                           $('#tabsResult').html(response.d);
                          },
                    failure: function(msg) {

                    }
                });
        }
    }); 
```

如何防止选项卡在每次单击选项卡时再次加载远程内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:41:49.237

取决于您是要停止 ajax 加载周期还是仅在内容更改时。下面是一个仅加载新内容的示例，否则只需替换为`var`检查该函数之前是否已被调用的 JS，而不使用散列：

您可以散列结果并将其存储在本地，并在您的成功处理程序中进行检查：

[JavaScript MD5](http://pajhome.org.uk/crypt/md5/)

```
var __lastHash = "";
$("#tabs").tabs({
    ajaxOptions: { cache: true },
    spinner: 'Loading ...',
    cache: true,
    select: function(event, ui) {
        var text = $(ui.tab).text();
        __lastHash = MD5Hash(test); //call a hashing API, 
                              //several to choose from, see link above  
        $.ajax({
                type: "POST",
                url: "abc.aspx/GetData",
                data: "{'tabType':'" + text + "'}",
                cache: true,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(response) {
                        if(__lastHash != MD5Hash(response)) //load if different
                        { 
                            $('#tabsResult').html(response.d);
                        }
                      },
                failure: function(msg) {

                }
            });
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:42:58.423

最简单的方法是使用标志让标签知道它是否已加载。例如，使用 $('#tabsResult').html()。

```
$("#tabs").tabs({
        ajaxOptions: { cache: true },
        spinner: 'Loading ...',
        cache: true,
        select: function(event, ui) {
            var text = $(ui.tab).text();
            if(!$('#tabsResult').html())
            {
              $.ajax({
                    type: "POST",
                    url: "abc.aspx/GetData",
                    data: "{'tabType':'" + text + "'}",
                    cache: true,
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(response) {
                           $('#tabsResult').html(response.d);
                          },
                    failure: function(msg) {

                    }
                });
            }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:36:45.270

我没有使用带有 jQ​​ueryUI Ajax 东西的 jQueryUI 选项卡，我使用 MS Ajax 加载作为选项卡控件窗格的更新面板。所以我的建议可能没有直接帮助，我不能轻易地为你检查。然而...

jQueryUI 选项卡*已经有一个标志*，它告诉您该选项卡是否已加载。标志位于每个选项卡的 DIV 上，状态为“false”、“loaded”、“loading”、“error”等。您可以在 HTML 中看到它，或者使用下面这样的内容将其拉出。我使用这些标志将标签重新标记为“脏”之类的东西。第一次加载选项卡时状态为“加载”，之后为“加载”。

```
show: function (event, ui) {
   var $target = $('#tabs > div:eq(' + ui.index + ')');
   console.log('tab id=' + $target.attr('id') + ' loaded=' + $target.attr('loaded'));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T12:39:15.107

如果您只想加载选项卡内容一次 - 那么我建议您立即将其包含在 HTML 中，而不是通过 Ajax 加载它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T13:49:34.403

我喜欢这样做，只是为了代码的可读性......你可以直接打开 ui.index，但是你必须去记住“哪个索引是 XXX 选项卡？”。这可能会稍微慢一些，但在我看来可以显着提高代码的可读性

```
tabM = $('#tabs-detail').tabs({
    'select': function (event, ui) {
      var tabId = $($('>ul li a', this)[ui.index]).attr('href');
      switch (tabId) {
        case '#tabs-detail-sales':
          //no action needed
          break;
        case '#tabs-detail-activities':
          //need to populate a table with related activities
          if ($('#table-activities tbody tr').length === 0) {
              //load code goes here
          }
       }
    }
}); 
```

# asp.net-mvc-2 - 使用 asp.net mvc 2.0 列出数据库中的所有数据

> ID：11669418
> 
> 赞同：0
> 
> 时间：2012-07-26T12:35:02.020
> 
> 标签：asp.net-mvc-2

我是 asp.net mvc 2.0 的新手。我有一个关于使用 asp.net mvc 从数据库中列出数据的问题。

**控制器**

```
public ActionResult ListEmployee() {
       UserModels emp = new UserModels();
        emp.EmployeeList = (List<tblEmployee_Employee>)Session["list"];
        return View(emp);
} 
```

**模型**

```
 public class GetEmployee
{
    public string name { get; set; }
    public string sex { get; set; }
    public string email { get; set; }
} 
```

我有视图页面employee.aspx 页面，但我不知道如何在此视图页面中编写代码。

请帮我解决这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:39:05.430

在 ASP.NET MVC 视图中，需要对传递给它们的模型进行强类型化。因此，在您的情况下，您正在将一个`UserModels`实例传递给您的视图。假设您已经有一个母版页，并且您想在表格中显示您可能拥有的员工列表，如下所示：

```
<%@ Page 
    Language="C#" 
    MasterPageFile="~/Views/Shared/Site.Master" 
    Inherits="System.Web.Mvc.ViewPage<AppName.Models.UserModels>" 
%>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Sex</th>
                <th>Email</th>
            </tr>
        </thead>
        <tbody>
            <% foreach (var employee in Model.EmployeeList) { %>
            <tr>
                <td><%= Html.Encode(employee.name) %></td>
                <td><%= Html.Encode(employee.sex) %></td>
                <td><%= Html.Encode(employee.email) %></td>
            </tr>
            <% } %>
        </tbody>
    </table>
</asp:Content> 
```

甚至更好的是，定义一个可重用的显示模板，该模板将为`EmployeeList`集合属性的每个项目自动呈现 ( `~/Views/Shared/DisplayTemplates/GetEmployee.ascx`)：

```
<%@ Control 
    Language="C#" 
    Inherits="System.Web.Mvc.ViewUserControl<dynamic>" 
%>

<tr>
    <td><%= Html.DisplayFor(x => x.name) %></td>
    <td><%= Html.DisplayFor(x => x.sex) %></td>
    <td><%= Html.DisplayFor(x => x.email) %></td>
</tr> 
```

然后在你的主视图中简单地引用这个模板：

```
<%@ Page 
    Language="C#" 
    MasterPageFile="~/Views/Shared/Site.Master" 
    Inherits="System.Web.Mvc.ViewPage<AppName.Models.UserModels>" 
%>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Sex</th>
                <th>Email</th>
            </tr>
        </thead>
        <tbody>
            <%= Html.EditorFor(x => x.EmployeeList)
        </tbody>
    </table>
</asp:Content> 
```

现在您不再需要任何`foreach`循环（因为如果属性是遵循标准命名约定的集合属性，ASP.NET MVC 将自动呈现显示模板）并且您的模型具有可重用的显示模板。

# java - 如何使用 kill -3 每 30 秒进行一次 jave 堆转储 命令

> ID：11669419
> 
> 赞同：3
> 
> 时间：2012-07-26T12:35:07.350
> 
> 标签：java, shell, heap-dump

请帮忙，我想运行一个shell脚本，它应该使用kill -3命令每30秒进行一次jave堆转储。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T12:39:13.313

你试过这么简单的shell脚本吗？

```
while true
do
  jmap -dump:file=/tmp/java-`date +%s`.hprof PID_OF_JVM
  sleep 30
done 
```

这将为每个快照创建一个文件。对于线程转储，您可以使用类似的脚本：

```
while true
do
  jstack PID_OF_JVM > stack-`date +%s`.txt
  sleep 30
done 
```

~~我想你可以使用`kill -3`而不是`jstack`.~~

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T12:39:13.780

你可以使用这样的代码从java应用程序中进行线程转储

```
 public static String getDumpFor(Thread thread) {
    StringBuilder sb = new StringBuilder();
    if (thread.isAlive()) {
        StackTraceElement[] stackTrace = thread.getStackTrace();
        sb.append(thread.toString()).append("\n")
                .append(String.format(" State - %s,", thread.getState()))
                .append(String.format(" Is daemon = %s,", thread.isDaemon()));
        for (StackTraceElement s : stackTrace)
            sb.append("\tat ").append(s.getClassName()).append(".").append(s.getMethodName()).append("(").append(s.getFileName()).append(":").append(s.getLineNumber()).append(")")
                    .append("\n");
    }
    return sb.toString();
}

public static void dumpActiveThreads() {
    Map<Thread, StackTraceElement[]> stackTraces = Thread.getAllStackTraces();
    Set<Thread> keySet = stackTraces.keySet();
    System.out.println("\nThread dump begin:");
    for (Thread thread : keySet)
        dumpActiveThread(thread);
    System.out.println("\nThread dump end.");

} 
```

然后像这样安排任务

```
 final ScheduledFuture<?> scheduledFuture = scheduledExecutorService.scheduleWithFixedDelay(
            new Runnable() {dumpActiveThreads()},
            0,
            30, TimeUnit.SECONDS); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T12:43:18.987

我没有使用`kill -3`命令，但我使用`jmap`了由提供的命令`sun sdk`

您可以编写一个脚本，然后在脚本中运行以下命令。

```
${JAVA_HOME}/bin/jmap -dump:file=/home/MyDump.hprof PID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-16T19:08:36.233

3 只会给出线程转储而不是堆转储。线程转储意味着您只能检查 JVM 中每个线程的堆栈跟踪。但是您正在寻找 linux 上的堆转储然后需要使用以下命令。jmap -dump:file=myheap.bin {您要进行堆转储的pid}。输出“myheap.bin”不是人类可读的，要读取文件，您可以使用 MAT 工具。MAT下载链接： http: [//www.eclipse.org/mat/](http://www.eclipse.org/mat/)

# login - Joomla 自动登录

> ID：11669420
> 
> 赞同：3
> 
> 时间：2012-07-26T12:35:12.780
> 
> 标签：login, joomla, autologin

如何在 Joomla 1.5 中自动登录用户。我正在使用这段代码：

```
global $mainframe;

$db =& JFactory::getDBO();  

$query = ‘SELECT `id`, `password`, `gid`’. ‘ FROM `#__users`’. ‘ WHERE username=’ . $db->Quote( JRequest::getVar(‘username’, null) ). ‘   AND password=’ . `enter code here` $db->Quote( JRequest::getVar(‘passw’, null) );

$db->setQuery( $query );
$result = $db->loadObject();

    if($result) {
       JPluginHelper::importPlugin(‘user’);
       $response->username = JRequest::getVar(‘username’, null);
       $result = $mainframe->triggerEvent(‘onLoginUser’, array((array)$response, $options));
    }

$mainframe->redirect(‘XXXXXXXXXXXX’); 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:37:08.537

添加此代码的顶部，它将解决问题

```
jimport(‘joomla.user.helper’); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-06T10:51:53.320

// Akram abbasi 的自动登录自定义

```
$mainframe = JFactory::getApplication();
$credentials = array(); 
$credentials['username']  =  $app->input->get('username', '', 'string');
$credentials['password']  = $app->input->get('password',  '', 'raw');
$mainframe->login($credentials);
//$mainframe->redirect(JRoute::_('index.php', false)); 
```

# php - php 数组切割尺寸（返回单个“行”）

> ID：11669422
> 
> 赞同：1
> 
> 时间：2012-07-26T12:35:16.417
> 
> 标签：php, arrays, function, multidimensional-array

是否可以在 php 数组中切割多个维度？

**示例**：我想要每个第一级元素的第四维

```
array(1) {
     [0]=> array(5) 
        { 
        [0]=> string(_) "/opt/path [10823] (/home/path/file.xml)" 
        [1]=> string(_) "/opt/path" 
        [2]=> string(_) "10823" 
        [3]=> string(_) "(/home/path/file.xml)" 
        [4]=> string(_) "/home/path/file.xml" 
        } 
    } 
```

=>

```
array(1){ ( [0]=> string(_) "/home/path/file.xml") } 
```

是否有内部 php 函数或无需循环即可实现此目的的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:55:35.553

使用[array_map](http://www.php.net/manual/fr/function.array-map.php)：

```
function selectMyLine($line) {
  return $line[4];
}

$result = array_map("selectMyLine", $data);
print_r($result); 
```

[你也可以对array_walk](http://www.php.net/manual/fr/function.array-walk.php)做同样的事情，它直接编辑你的数组而不是创建一个新数组。

# ajax - django onclick 使用 ajax 将模板加载到 {% block %}

> ID：11669424
> 
> 赞同：2
> 
> 时间：2012-07-26T12:35:37.773
> 
> 标签：ajax, django

我在 django 中创建了一个 Web 应用程序，对此我很陌生。我想要做的是用户点击打开一个模式窗口（基本上只是一个绝对定位的 div），其中包含一个 {% block some_content%} 标签。然后，此块应包含登录表单或注册表单（或其他任何内容）。我想使用 ajax 加载它（这样就不会徒劳地加载任何东西）。

这是我的模板的一部分，我希望这些东西出现：

```
 <div id="modal" style="position: absolute; top: 60px; left: 100px; height: 400px; width:700px; background: #777; z-index: 20">

        <a href="#" onclick="Dajaxice.my_site.tester1(test_callback, {'user_id': '{{ user.id }}'})"><div class="button">Test</div></a>
        <br />

        {% block test_content %}{% endblock test_content  %}
    </div> 
```

这是我的 ajax.py

```
 @dajaxice_register
    def tester1(request, user_id):
        print "test " + user_id
        #contenxt = Context({'items': range(2)})
        print "1"
        return_str = render_block_to_string('my_site/testr.html', 'test_content')
        print "7"
        return HttpResponse(return_str) 
```

我使用片段[http://djangosnippets.org/snippets/942/](http://djangosnippets.org/snippets/942/)

跟随打印“#”让我相信这一直有效

```
 return HttpResponse(return_str) 
```

似乎什么都没有发生，甚至没有错误消息。

忘记包含我要加载到块中的模板：

```
 {% extends "my_site/header.html" %}
    {% load url from future %}

    {% block test_content %}
        <div style="background: red; height: 70%; width:90%">
            <span>HEJ!!!</span>
        </div>
    {% endblock test_content %} 
```

如果有更好的方法我很高兴知道它，但请记住，我是 django 新手，所以请慢慢来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:20:19.530

您似乎正在使用[Dajax 框架](http://dajaxproject.com)。看看那里的例子。其中一些示例可能已过时，因此请查看[此站点](http://pythondiary.com/tutorials/django-and-ajax-dajax.html)。如果您安装了 Dajax 和 Dajaxice，您可以执行类似的操作

```
<div id="test_content"></div>
<a href = "#" onclick="Dajaxice.<app_name>.ajax_test">load ajax content</a> 
```

应用程序中的 ajax.py

```
@dajaxice_register
def ajax_test:
    str = 'Hello World'
    dajax = Dajax()
    dajax.assign('#test_content', 'innerHTML', str)
    return dajax.json() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:55:00.753

所以，这是我的解决方案：

我安装了 Dajax。它不起作用的原因如下，但这是一个有效的完整解决方案。

html:

```
<input type="button" name="testerbutton" value="Test" id="testerbutton" onclick="Dajaxice.my_site.tester1(Dajax.process);">
<br />
<div name="result" value="" id="result"> 
```

ajax.py：

```
@dajaxice_register
def tester1(request):
    dajax = Dajax()
    str = render_to_string('my_site/testr.html')
    dajax.assign('#result', 'innerHTML', str)
    return dajax.json() 
```

testr.html：

```
<div style="background: red; height: 70%; width:90%">
    <span>HEJ!!!</span>
</div> 
```

最重要的部分——看起来我只能责怪自己：确保你`jquery.dajax.core.js`在标题中正确导入。否则`Dajax.process`什么都不做。

感谢@pyronic 的帮助。

# c++ - fopen 生成 NULL 文件指针 Solaris

> ID：11669426
> 
> 赞同：1
> 
> 时间：2012-07-26T12:35:50.923
> 
> 标签：c++, solaris, libcurl

我正在尝试创建一个回调函数，然后使用`libcurl`. 该程序在 中运行良好`Linux`，`Windows`但是在 中`fopen`运行失败`solarix_x86`。`myvector`包含要复制的 url 文件列表，并且`PATH_SEPARATOR`是一个根据平台 ( `Unix`, `Windows`) 格式化字符串路径的宏。

```
 vector<string>::iterator it;

  for( it=myvector.begin() ; it < myvector.end(); it++ ){
      string dest = "/home/files/" + PATH_SEPARATOR + *it // PATH_SEPARATOR IS A MACRO
      curl_easy_setopt(curl, CURLOPT_URL, it->c_str());
      curl_easy_setopt(curl, CURL_WRITEFUNCTION, write_data);

      file = fopen(dest.c_str(), "w+b");
      if(file == NULL){
          throw std::runtime_error("FILE IS NULL, CAN'T OPEN\n");
      }

      curl_easy_setopt(curl, CURLOPT_WRITEDATA, file);
      curl_easy_perform(curl);
      fclose(file);
  } 
```

和功能`write_data`：

```
static size_t write_data(void *ptr, size_t size, size_t nmemb, void *stream){
     size_t written = fwrite(ptr, size, nmemb, (FILE*)stream);
     return written;
} 
```

我怀疑与`"w+b"`国旗有关....有什么想法吗？

****** *** ** *** ** *** *******更新******* *** ** *** ** *** ********

 *****`errno=2`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:39:20.360

不要混淆字符和字符数组：你想要`"w+b"`. 注意引号。

一个好的（或“正确操作的”）编译器应该警告您正在使用“多字节字符常量”（即您的`'w+b'`）这一事实，这是 C++ 的一个晦涩难懂的特性，几乎没有意义。*****

# c# - c# .net web 应用程序 web.config

> ID：11669427
> 
> 赞同：1
> 
> 时间：2012-07-26T12:35:54.050
> 
> 标签：c#, .net, web, web-config

如何阅读 web.config 中的个人部分？

```
<MyPersonalSection>
    <add name="toto" enable="true" URL="http://localhost:43242" />
    <add name="titi" enable="false" URL="http://localhost:98762" />
<MyPersonalSection/> 
```

我想使用名称值获取启用值和/或 URL 值。

我也有这个错误：无法识别的配置部分 MyPersonalSection

我一直在尝试

var config = ConfigurationManager.GetSection("MyPersonalSection");

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T12:37:14.280

[这](http://msdn.microsoft.com/en-us/library/2tw134k3.aspx)是一个很酷的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:00:08.217

您无需编写自定义配置处理程序即可获得所需内容。如果您只需要键值条目，可以使用内置的配置处理程序。但是，您必须使用`key`代替`name`和`value`代替`URL`. 例如：

```
<configuration>
 <configSections>
  <section name="MyPersonalSection" type="System.Configuration.NameValueSectionHandler" />
 </configSections>
<MyPersonalSection>
    <add key="toto" value="http://localhost:43242" />
    <add key="titi" value="http://localhost:98762" />
</MyPersonalSection>
</configuration> 
```

您可以通过代码访问它们：

```
var myValues = ConfigurationSettings.GetConfig("MyPersonalSection") as NameValueCollection;
var url = myValues["toto"]; 
```

我建议以一种明确值应该是什么的方式命名您的键，例如“totoUrl”和“titiUrl”。

如果您想要字符串值对以外的内容，则必须编写自己的自定义处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-09T02:10:46.100

您可以使用您需要的密钥在 web.config 中添加 appSettings 部分。例如：

```
<configuration>
   <appSettings>
      <add key="FirstUrl" value="http://localhost:43242"/>
      <add key="SecondUrl" value="http://localhost:98762" />
    </appSettings>
 ...
</configuration> 
```

所以，由于 aspx.cs 文件，你可以声明指令

```
using System.Configuration; 
```

稍后，您可以通过这种方式检索 FirstUrl 值：

```
 var myUrl = ConfigurationManager.AppSettings["FirstUrl"]; 
```

# c# - 使用 C# .Net 从 html 和图表控件创建 word 文档

> ID：11669430
> 
> 赞同：1
> 
> 时间：2012-07-26T12:36:00.293
> 
> 标签：c#, asp.net, ms-word, pie-chart

目前我有一个带有表格和多个 ASP.Net 图表控件（饼图）的 aspx 页面。我需要生成一个 Microsoft Word 文档，其中包含 aspx 页面中存在的所有内容（可能在按钮单击或页面加载中），格式应与页面上的相同。请提出一种如何进行的方法。

我找到了一些使用普通 html 生成的文章，但它不会将图表呈现为 word doc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:42:37.620

你可以尝试使用 DevExpress 报告组件，它们有很好的导出不同格式的解决方案你可以看这个演示： http: [//mvc.devexpress.com/Report/PivotGridAndChartReport](http://mvc.devexpress.com/Report/PivotGridAndChartReport)

# java - Ehcache copyOnRead 行为

> ID：11669432
> 
> 赞同：2
> 
> 时间：2012-07-26T12:36:02.593
> 
> 标签：java, copy, ehcache

我有以下从缓存返回数据的方法。

`Customer customer = customerDao.findByName("Carl");`

它只返回一个`Customer`带有`name="Carl"`. 当我进行以下更改时：

`customer.setName("Ron");`

然后我再次调用该方法

`Customer customer = customerDao.findByName("Carl");`

它返回空值。我没有进行任何持久化或更新操作，并且缓存的对象被直接更改。我尝试在 ehcache 配置中使用 copyOnRead 属性，但它没有帮助。

```
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd">
    <!-- default configuration -->

  <defaultCache maxElementsInMemory="1000000" 
      eternal="true" overflowToDisk="false" copyOnRead="true" />

</ehcache> 
```

有什么办法可以强制 ehcache 从缓存中复制对象？

谢谢

# java - 在几个 UI JPanel 中处理 Swing 动作而不参考 JPanel 本身

> ID：11669438
> 
> 赞同：0
> 
> 时间：2012-07-26T12:36:36.133
> 
> 标签：java, swing, action, jpanel, factory

我的第一个问题是：“当相同的动作与不同的 UI 组件结合使用时，我如何限制 Swing 的数量`Actions`（使用 ，这些 UI 组件被不同的 Swing对象（似乎）没有直接引用彼此”？`AbstractAction``JPanel`

我的第二个问题是：“当操作的 actionPerformerd() 方法使用两个或更多不同的 UI 组件引用时，如何在操作和 UI 组件之间保持引用”？我需要在没有直接关系的不同地方的 actionPerformed() 方法中的 ui 上下文（嗯，至少我是这么认为的）。

让我解释一下我正在处理的设计问题......

我有一个包含所有 UI 逻辑的 JFrame。此 JFrame 包含对 JPanel 逻辑的三个不同引用： a `ControlPanel`、 a`MainPanel`和 a `StatusPanel`（均扩展 JPanel）。

`ControlPanel`设置 JMenu 和项目、JToolBar 项目和这个 JPanel 被添加到内容窗格中，并安装了所有适当的操作。

这`MainPanel`是与用户进行实际通信的地方。这个 JPanel 拥有一个 CardLayout，里面有一堆 JPanel。

这`StatusPanel`实际上是一个状态栏，处理来自不同 JPanel 的各种文本消息，但由 StatusBarManager 对象处理。这里没有花哨的东西，只是无聊的 gui 东西。

现在是问题部分：我首先为我能想到的每个动作编写了一堆扩展程序`AbstractActions`（不是那么好）。接下来，我编写`ActionFactory`了一个`Action`为特定任务分发 obj 的程序，例如： `ActionFactory.getAction("file.new");` 这似乎是一种更好的方法，因为我现在可以`FileAction`为所有“文件”操作实例化一个对象，但有一个区别：`actionPerformed()`方法的实现。这“似乎”是个好主意，因为当我调用不同`JPanel`的`ActionFactory.getAction("file.new");`相同对象时，我会`Action`返回之前已经实例化的相同对象（保存了很多重复的对象）。好吧，这似乎是个好主意，我仍然在`JPanels`. 当我选择一个“卡片”显示在`MainPanel`使用`JMenu`和`JMenuItems`，我`ControlPanel`仅在 ui 上下文中，并且在`actionPerformed()`方法中我没有使用该JPanel`MainPanel`设置“卡”的上下文。`CardLayout`当我在 MainPanel 中（按下按钮）并且没有 StatusPanel 的上下文时也是如此。

我已经查看了这些关于 stackoveflow 的先前建议，但不知何故我无法建立联系。我错过了线索...

在 SO： [这里](https://stackoverflow.com/questions/5490370/java-swing-anonymous-actions)，[这里](https://stackoverflow.com/questions/3031962/more-swing-design-actions)，[这里](https://stackoverflow.com/questions/892113/are-the-names-of-default-actions-in-swing-components-actionmap-standardized)，[这里](https://stackoverflow.com/questions/417480/hide-certain-actions-from-swings-undo-manager)，[这里](https://stackoverflow.com/questions/5133317/swing-menu-bar-actions-and-state-keeping)，这里，这里，这里，这里，这里，这里，这里，这里，这里，[这里](https://stackoverflow.com/questions/4615765/java-swing-gui-design-techniques-for-user-actions-validations-mvc-fsm)，[这里](https://stackoverflow.com/questions/2132926/ambiguous-actions)，[这里](https://stackoverflow.com/questions/1325369/managing-swing-actions-with-a-registry)和[这里](https://stackoverflow.com/questions/448179/organizing-actions-in-a-swing-application)。

一些人建议为此使用框架，如 appframework 或 eclipse rcp 或 spring rcp 或其他。但我更喜欢根本不使用任何框架，除了默认 JVM 6 中可用的其他原因。

我希望有人能在这件事上大放异彩，帮助我找到解决问题的好方法。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T12:43:08.487

我认为您描述的设计中的主要缺陷是这些操作直接针对 UI，而不是针对模型/控制器。

如果您的操作只是更新一个模型，并且每个视图部分都与模型的相关部分保持同步，那么您可以避免一个操作与其他几个视图组件之间的依赖关系。

This also allows to share the common logic. You move that logic from the action to the model/controller, and the action becomes basically a one-liner (calling that logic).

# maven - 为什么maven项目信息报告插件创建了一个多余的文件夹？

> ID：11669446
> 
> 赞同：1
> 
> 时间：2012-07-26T12:37:02.157
> 
> 标签：maven, maven-plugin

当我运行 mvn 站点时，maven-project-info-reports-plugin 正在我的项目基础文件夹中创建一个名为“${project.basedir}”的文件夹。我的插件是这样定义的，没有额外的配置：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-project-info-reports-plugin</artifactId>
    <version>${version.maven-project-info-reports-plugin}</version>
</plugin> 
```

发生这种情况时，站点生成会给我一个警告：

```
[WARNING] The repository url 'file://${project.basedir}' is invalid - 
Repository 'studio.repository' will be blacklisted. 
```

为什么要创建这个名字奇怪的文件夹，如何防止它被创建？我可以查看哪些其他可能与此插件相关的配置？

更新（插件是 2.2 版，据我在撰写本文时所知道的最新版本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:24:53.500

Maven 邮件列表中有一个（过时的）[讨论](http://maven.40175.n5.nabble.com/RE-Site-generation-td129243.html)，看起来很相关。该问题似乎是由于使用存储库镜像所致。

您可能想尝试使用最新版本的插件，以及建议的解决方法，即设置`<dependencyLocationEnabled>`为`false`.

# javascript - 显示上传文件的日期和时间以及路径

> ID：11669453
> 
> 赞同：0
> 
> 时间：2012-07-26T12:37:21.837
> 
> 标签：javascript

我正在使用 Javascript 工作，我必须显示要上传的这些文件的文件位置以及日期和时间。但是日期和时间过程不适用于 Firefox，它仅适用于 chrome。那么我该怎么做才能获得日期、时间和文件路径呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:39:35.037

我认为没有跨浏览器的方式纯粹通过 JavaScript 来做到这一点。

# gwt - uibinder I18n 的替代品

> ID：11669457
> 
> 赞同：0
> 
> 时间：2012-07-26T12:37:29.940
> 
> 标签：gwt, localization, internationalization, uibinder

有 Uibinder 做 i18n 的方式，如此处所述[，](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinderI18n)
然后有[这个](https://stackoverflow.com/questions/8937269/gwt-uibinder-uiwith-calling-methods-with-arguments)GWT i18n 的建议。

我正在考虑替代方案，因为我在第一个解决方案中遇到了一些问题。我想知道这两种方法的优缺点，所以我知道该选择什么。
请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T16:03:51.477

第一个解决方案非常冗长，需要您将本地化文件放在特定文件夹中，被描述为[一种噩梦](http://code.google.com/p/google-web-toolkit/issues/detail?id=4355)，但它确实支持带有（运行时）变量的文本。第二种解决方案不支持消息中的变量，但更易于使用。

第二种解决方案支持 2 个用例。这就是他们寻找两种解决方案的方式：

纯文本：

解决方案1：

```
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
    ui:generateFormat='com.google.gwt.i18n.rebind.format.PropertiesFormat'
    ui:generateKeys="com.google.gwt.i18n.rebind.keygen.MD5KeyGenerator"
    ui:generateLocales="default">
  <div><ui:msg key="helloWorld" description="Greeting">Hello, world.</ui:msg></div>
</ui:UiBinder> 
```

解决方案2：

```
<ui:with field='i18n' type='x.y.client.i18n.MyMessages' />
....
<div><ui:text from="{i18n.helloWorld}" /></div> 
```

在解决方案 1 中，标签内的文本将是默认文本，描述位于 description 属性中。在第二个解决方案中，您将在`MyMessages`扩展的接口类中添加它`Messages`。

静态方法参数：

解决方案1：

```
<th title="Gross receipts">
  <ui:attribute ui:name='title' ui:description='Tooltip text for gross column'/>
  ...
</th> 
```

解决方案2：

```
<th title="{i18n.grossReceiptsTitle}">...</th> 
```

解决方案 2 无法更高级地使用消息（例如传递参数），但您始终可以在`initWidget`调用后将它们添加到构造函数中。

# java - 如何在使用 asm 库进行检测的方法中找到一个空的局部变量

> ID：11669461
> 
> 赞同：2
> 
> 时间：2012-07-26T12:37:42.287
> 
> 标签：java, bytecode, instrumentation, java-bytecode-asm

在为其不同方法检测类时，为了使方法在文本文件中执行写入操作。我首先将字符串存储在显式定义的局部变量 3160 中。如何选择这些变量以防止与已经存在的变量发生冲突。

就像在这个片段中的代码每次进入任何方法时都会将类名写入文本文件的工作。为此，必须使用变量 3160 将字符串 s 加载到堆栈上（值保持较大，以便已定义的变量名称与变量 s （3160）不冲突。我的问题是如何在方法中定义局部变量在使用 ASM 库进行检测期间。这个问题对许多人来说似乎还为时过早，但那是因为我是初学者。

```
 String s= className;
    mv.visitLdcInsn(s);
    mv.visitVarInsn(Opcodes.ASTORE, 3160);
    mv.visitTypeInsn(Opcodes.NEW, "java/lang/StringBuilder");
    mv.visitInsn(Opcodes.DUP);
    mv.visitVarInsn(Opcodes.ALOAD, 3160);
    mv.visitMethodInsn(Opcodes.INVOKESTATIC, "java/lang/String", "valueOf", "(Ljava/lang/Object;)Ljava/lang/String;");
    mv.visitMethodInsn(Opcodes.INVOKESPECIAL, "java/lang/StringBuilder", "<init>", "(Ljava/lang/String;)V");
    mv.visitMethodInsn(Opcodes.INVOKESTATIC, "com/me/database/dataCollectionFile/Info", "callMeAnyTime", "()Ljava/lang/String;");
    mv.visitMethodInsn(Opcodes.INVOKEVIRTUAL, "java/lang/StringBuilder", "append", "(Ljava/lang/String;)Ljava/lang/StringBuilder;");
    mv.visitMethodInsn(Opcodes.INVOKEVIRTUAL, "java/lang/StringBuilder", "toString", "()Ljava/lang/String;"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:27:16.217

您应该使用[LocalVariablesSorter](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/commons/LocalVariablesSorter.html)适配器（或者从中扩展您自己的访问者，或者将其添加到 MethodWriter 之前的访问者链中）。然后，当您需要一个新变量时，您可以调用[LocalVariablesSorter.newLocal()](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/commons/LocalVariablesSorter.html#newLocal%28org.objectweb.asm.Type%29)方法来分配新的变量槽。另请参阅[ASM 指南](http://download.forge.objectweb.org/asm/asm4-guide.pdf)了解更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:57:31.157

我会查看局部变量调试表，我会使用下一个可用的 id，它更有可能是 2 或 10，而不是 3160。

如果没有调试信息，可能需要多次扫码，先看看用了多少个id。

注意：`double`并且`long`由于历史原因需要两个 id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T13:49:20.893

newLocal(Type.type) 是我发现对我的情况有帮助的，谢谢 Eugene Kuleshov 和

彼得劳里的帮助:)

# knockout.js - knockout.js 动画的声明性链接？

> ID：11669462
> 
> 赞同：6
> 
> 时间：2012-07-26T12:37:47.013
> 
> 标签：knockout.js

在尝试为带有效果的 knockout.js UI 增添趣味时，我发现我经常有几个部分根据条件交替出现。这方面的一个示例可能是列表视图中的详细信息窗格，该窗格在未选择任何元素时显示说明。这在使用可见绑定的情况下非常有效 - 但是当您尝试将动画添加到混合中时它会失败，因为没有显示/隐藏动画的链接。

我在这里简化了动画 knockout.js 示例来演示：

[http://jsfiddle.net/yq5rS/](http://jsfiddle.net/yq5rS/)

虽然我可能会破解一些东西，但我正在寻找一种更惯用的 knockout.js 方式来进行这种链接。

我考虑了一些解决方案：

*   拥有一个具有自定义绑定的容器元素，该绑定捕获条件以及在打开和关闭状态下显示哪个元素。
*   使“动画可见”绑定依赖于条件和检查其他元素是否隐藏的函数。

**编辑：要清楚，我希望一个元素的淡出发生在另一个元素的淡入之前。谢谢乔希。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T21:50:55.047

这种方法创建了一个计算的 observable，它查看 boolean observable 以确定要显示的文本。

这是一个工作的jsfiddle。[http://jsfiddle.net/yq5rS/10/](http://jsfiddle.net/yq5rS/10/)

这是代码的快速想法

**html**

```
<div class='liveExample'> 
    <p> 
        <label>
            <input type='checkbox' data-bind='checked: display' />
            Active?
        </label>
    </p>

    <p data-bind='fadeVisible: IsActive()'></p>    
</div>​ 
```

**脚本**

```
var Model = function() {
    var self = this;
    self.display= ko.observable(false);
    self.IsActive = ko.computed(function() {
        if (self.display()) return "Active."
        return "Not active."
    }); 
};

ko.bindingHandlers.fadeVisible = {
    init: function(element, valueAccessor) {
        var value = valueAccessor();
        $(element).hide().html(ko.utils.unwrapObservable(value)).fadeIn();
    },
    update: function(element, valueAccessor) {
        var value = valueAccessor();
        $(element).hide().html(ko.utils.unwrapObservable(value)).fadeIn();
    }
};

ko.applyBindings(new Model ());​ 
```

**编辑**

我的初始响应没有淡出，等待，然后淡入。这是一个更新的fadeVisible绑定处理程序

```
ko.bindingHandlers.fadeVisible = {
    update: function(element, valueAccessor) {
        var value = valueAccessor();
        $(element).fadeOut('slow', function () {
            $(element).html(ko.utils.unwrapObservable(value)).fadeIn();
        });
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:11:31.143

一种可能适合您的方法不是在同一空间中显示两个元素并在它们之间切换，而是坚持使用一个元素并使用将其淡出、交换内容然后淡入的自定义绑定。我认为这会很好地为您链接 jsfiddle 的琐碎案例工作。

查看[Ryan Niemeyer 的博客](http://www.knockmeout.net/2011/03/reacting-to-changes-in-knockoutjs.html)和链接的[JSFiddle](http://jsfiddle.net/rniemeyer/QREf3/)。他淡入淡出改变总计算可观察的方式似乎适用于您的交换 div 示例。

我知道您可能有更复杂的任务，而不仅仅是在两个 div 之间切换……但可能有一种方法可以将解决方案扩展到更一般的情况。我不是模板专家，但是您经常使用它们吗？特别是[动态更改模板](http://www.knockmeout.net/2011/03/quick-tip-dynamically-changing.html)`template { name: function() {} }`的语法？

（我想这正式让我成为尼迈耶的粉丝，但我并不感到羞耻:-P）

# c# - MapPoint 2011-DataMap(ShadedArea)-Visual Studio

> ID：11669463
> 
> 赞同：1
> 
> 时间：2012-07-26T12:37:47.297
> 
> 标签：c#, mappoint

我有一个关于在将数据导入数据集时将数据图添加到 mappoint 中的当前地图的问题。

所以，我有一个按顺序包含以下列的**excel 文件**：**ID、姓名、地址、城市、国家、邮政编码、服务、MoneyImport** **。**

 **我正在创建一个用于数据图的数据集：

```
object missing = System.Reflection.Missing.Value;
MapPoint.DataSet dataset = map.DataSets.ImportData(filename, missing,
                              MapPoint.GeoCountry.geoCountryItaly,
                              MapPoint.GeoDelimiter.geoDelimiterDefault,
                              MapPoint.GeoImportFlags.geoImportExcelSheet); 
```

我使用“**缺失**”值导致 MapPoint 应用程序在通过普通界面运行时* *（从我在这里使用的同一个 excel 文件导入）* *完美识别数据字段，所以我不需要指定它们的类型我。

然后我尝试使用这个数据集来创建我需要的数据图。该地图应该根据缩放级别在地图上的“MONEYIMPORT 字段”中显示为阴影区域。当使用正常的地图点界面时，它可以顺利完成，没有问题，也没有任何错误。

```
 Object Import = 8;

 MapPoint.Field GainedMoney = dataset.Fields.get_Item(Import); 
```

这两行是为了让我通过从数据集中提取它们来将 excel 的第 8 列的值添加到 GainedMoney 字段中。

所以我进一步添加数据图：

```
MapPoint.DataMap datamap =dataset.DisplayDataMap(MapPoint.GeoDataMapType.geoDataMapTypeShadedArea,               GainedMoney,
                ShowDataBy: MapPoint.GeoShowDataBy.geoShowByZoomLevel,
                DataRangeType: MapPoint.GeoDataRangeType.geoRangeTypeDefault,
                DataRangeOrder: MapPoint.GeoDataRangeOrder.geoRangeOrderDefault,
                ColorScheme: 13,
                CombineDataBy: MapPoint.GeoCombineDataBy.geoCombineByAdd); 
```

因此 MapPoint 对象模型决定向我抛出一个错误，指出我试图添加到地图的区域类型无法识别，因此无法将其添加到地图中。

我已经检查了好几次我传递给 .DisplayDataMap 的属性是否正确，并且它们与我通过 mappoint 的用户界面创建数据图时选择的属性相同，但仍然没有得到结果。真的我不知道如何解决这个问题了。如果你们中的任何人能够帮助我并给我一个提示，请这样做！

在此先感谢，乔治。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:31:42.767

MP2Kmag.com 上有一些文章可以帮助使用 DisplayDataMap。特别是，作为参数传入的数组非常棘手。此外，在 .NET 中编程 MapPoint 这本书对我处理 DisplayDataMap 方法有很大帮助。**

# ruby-on-rails - slug 变化时自动重写

> ID：11669466
> 
> 赞同：2
> 
> 时间：2012-07-26T12:38:03.280
> 
> 标签：ruby-on-rails, ruby, rewrite

我有一个带有配置文件的站点，用户可以在其中更改 slug。我想实现这些 slug 更改的自动重写。在 Ruby 或 Nginx 中，是否有任何关于如何执行此操作的库或指南？

有这些[https://www.ruby-toolbox.com/categories/URL_Rewriting](https://www.ruby-toolbox.com/categories/URL_Rewriting)但在哪一层最好实现？

您的经验和最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:38:54.497

不知道附近有没有图书馆。但我会做的是：

*   保存用户以前的 slug，pe 使用[纸迹](https://github.com/airblade/paper_trail)
*   考虑到以前的版本，通过 slug 找到用户时
*   在应用程序级别重定向到最新的 slug (user.slug)

如果您遵循该方法，则假定用户过去已使用的 slug 无法重复使用。

希望有帮助。

# xpages - XPages 模板对话框

> ID：11669467
> 
> 赞同：1
> 
> 时间：2012-07-26T12:38:11.800
> 
> 标签：xpages, xpages-extlib

我目前正在进行一个项目，将现有的传统 domino Web 应用程序重新设计为 XPages。该应用程序包含一个带有很多帮助对话框的 Web 表单。通知、验证和确认也是通过对话框完成的。

我知道我可以为每个对话框创建一个自定义控件并将其添加到 Xpage 并调用 show。我什至设法使用动态内容控件动态加载它，每个对话框都有一个方面。由于对话框 cc 在 onClientLoad 中包含一个 show()。通过切换动态内容控件的内容，很容易打开一个对话框。

尽管如此，将所有这些自定义控件添加到我的 XPage 中感觉效率低下，并且确实使设计选项卡变得混乱。你怎么看？

我更喜欢动态设置对话框的内容（就像在传统的多米诺骨牌中，您将为每个对话框定义一个表单）。那可能吗？如果不是，是否可以动态加载自定义控件（例如使用计算子表单）？

同样对于确认框，我需要 OK 按钮来为每个确认执行不同的代码。实现它的最佳方法是什么？将自定义参数“functionOnOk”添加到“dlgConfirm”自定义控件并在提交按钮中对其进行评估？

* * *

PS：我仍在使用带有 dojoType=dijit.DialogBox 的面板，但会将它们更改为 extlib 对话框。对于确认和消息框，我现在在代码中使用带有标记的客户端 dijit.Dialogs，但我也想要 XPages 中的标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:38:09.407

我知道带有 dijit.Dialog 的面板存在问题，因为 Dojo 在 DOM 中移动对话框，这会阻止对话框中的任何 SSJS 运行。我不知道这是否也是 dijit.DialogBox 的问题，但我怀疑它可能是。Jeremy Hodge 做了一些代码来解决这个问题。

但是，我强烈建议使用扩展库控件。客户端 dijit.Dialogs 可能更难以编码，并且不允许任何 SSJS 交互。我不知道扩展库控件中没有任何 Dojo 属性，扩展库控件还允许您在 CSJS 或 SSJS 中打开或关闭对话框。它还允许您指定要在关闭时刷新的区域。

就属性而言，**预加载**纯粹是为了加快显示速度。你在使用**refreshOnShow**属性吗？这可确保每次显示对话框时都会刷新 URL 或内容。关于对话框的扩展库章节有一个表格，涵盖了所有属性。您可以将 URL 设置为指向另一个 XPage 或另一个网页。这可能允许您使用动态内容控件传递参数来切换应该出现的内容。

就 OK 按钮背后的代码而言，如果您使用 Extension Library 对话框，您将拥有对话框之外的所有功能。

# c# - C# Linq to SQL：无法添加已存在的实体

> ID：11669489
> 
> 赞同：1
> 
> 时间：2012-07-26T12:39:22.720
> 
> 标签：c#, asp.net-mvc, linq, linq-to-sql

我在我的代码中使用 Linq 进行插入、删除和更新数据库。使用 InsertOnSubmit 插入数据时，出现 `cannot add an entity that already exists`异常。请看看我的代码

```
private static void AddNewPriceSettings(PRICE_SETTING priceSettingsInfo)
{
   PRICE_SETTING priceSetting = new PRICE_SETTING();
   priceSetting = priceSettingsInfo;           
   DataContext.CommonUsers.PRICE_SETTINGs.InsertOnSubmit(priceSettingsInfo);          
   DataContext.CommonUsers.SubmitChanges();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:50:49.320

只需为新的 priceSetting 设置属性。

```
private static void AddNewPriceSettings(PRICE_SETTING priceSettingsInfo)
{
   PRICE_SETTING priceSetting = new PRICE_SETTING();
   //
   priceSetting.Prop1 = priceSettingsInfo.Prop1;
   priceSetting.Prop2 = priceSettingsInfo.Prop2;
   priceSetting.Prop3 = priceSettingsInfo.Prop3;
   // ...
   DataContext.CommonUsers.PRICE_SETTINGs.InsertOnSubmit(priceSetting );          
   DataContext.CommonUsers.SubmitChanges();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:42:00.350

如果您`AddNewPriceSettings()`使用现有`PRICE_SETTING`对象进行调用，则确实是在尝试再次添加它。您方法中的第二行就是这样做的。然后，`new PRICE_SETTING();`您在第一行创建的将不再被引用，并且将被 GC 处理而无需尝试插入它。

如果要创建副本，则必须在插入和提交之前将其克隆`priceSettingsInfo`到变量中（您可以使用各种技术）。`priceSetting`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:42:21.520

```
cannot add an entity that already exists 
```

错误消息清楚地说明了问题。您的数据库中已经有一行包含与您尝试插入的实体相同的实体。

SQL 如何判断两个项目是否“相同”？它使用一个键列，通常是一个整数 id。

所以这导致我问你 - 你的列定义如何查找受影响的表？你从哪里得到`PRICE_SETTING`传递给方法的？

问题也可能是您试图对已经存在的对象执行**更新**——在这种情况下，您需要使用不同的方法。请分享有关上下文的更多信息。

# mysql - 我的过程中的错误 MySQL 在所有表数据库中找到值 INT

> ID：11669493
> 
> 赞同：0
> 
> 时间：2012-07-26T12:39:43.720
> 
> 标签：mysql, sql, procedure

我想从所有表中查找多个 UserId `call searchUser(3,'UserId')` **错误：** 0 14:30:14 call searchUser(3,'UserId') 错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“NULL”附近使用正确的语法

```
DELIMITER $$

CREATE PROCEDURE `searchUser`( in_search int(11),in_column_name varchar(50) )
    READS SQL DATA
BEGIN
    DECLARE trunc_cmd VARCHAR(50);
    DECLARE searchUserId int (11);
    DECLARE db,tbl,clmn CHAR(50);

   DECLARE done INT DEFAULT 0;
    DECLARE COUNTER INT;

    DECLARE table_cur CURSOR FOR

    SELECT concat('SELECT COUNT(*) INTO @CNT_VALUE FROM `',table_name,'` WHERE `', in_column_name,'` = "',in_search,'"') ,table_name,column_name FROM information_schema.`COLUMNS` WHERE TABLE_SCHEMA = 'comments' and column_name=in_column_name ;

    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done=1;

    PREPARE trunc_cmd FROM "TRUNCATE TABLE temp_details;";
    EXECUTE trunc_cmd ; 
    OPEN table_cur;

table_loop:LOOP
        FETCH table_cur INTO db, tbl, clmn;

    SET @searchUserId = searchUserId;
    SELECT  searchUserId;
    PREPARE searchUserId FROM @searchUserId;
    EXECUTE searchUserId;

    SET COUNTER = @CNT_VALUE;
    SELECT COUNTER;

    IF COUNTER>0 THEN

        INSERT INTO temp_details VALUES(db,tbl,clmn);
    END IF;

        IF done=1 THEN
            LEAVE table_loop;
        END IF;

END LOOP;
CLOSE table_cur;
SELECT * FROM temp_details;
    END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:23:23.473

问题一定是由于：

```
DECLARE searchUserId int (11); 
```

和：

```
SET @searchUserId = searchUserId;
SELECT  searchUserId;
PREPARE searchUserId FROM @searchUserId;
EXECUTE searchUserId; 
```

我假设您认为`searchUserId`有价值。但是在代码中没有任何地方给它赋值。默认情况下它是一个`NULL`. 因此该语句`EXECUTE searchUserId`被翻译为`EXECUTE NULL`. 这导致了您指定的错误。

`searchUserId`要解决它，您应该首先为声明的变量分配一个适当的值。

顺便说一句，你为什么`searchUserId`对局部变量、全局变量和语句别名使用相同的变量名？它会使程序的读者感到困惑，因此不建议练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:31:29.207

我想问题在于这个语句创建语句：

```
SELECT concat('SELECT COUNT(*) INTO @CNT_VALUE FROM `',table_name,'` WHERE `', in_column_name,'` = "',in_search,'"') ,table_name,column_name FROM information_schema.`COLUMNS` WHERE TABLE_SCHEMA = 'comments' and column_name=in_column_name ; 
```

请独立执行语句，看看你得到了什么。

# c# - how to convert string to string array?

> ID：11669495
> 
> 赞同：-4
> 
> 时间：2012-07-26T12:39:51.363
> 
> 标签：c#, query-string

I have a object of type string,I want to convert it to String array

here the code is

```
 obj.QueryString =HttpContext.Current.Request.Url.PathAndQuery;

 string[] arr =obj.QueryString; 
```

QueryString is of type string.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:44:36.437

a string is nothing more then an array of chars, so if you want to split up the strings letters into a different string array seperatly you could do something like this:

```
string myString = "myString";
string[] myArray = new string[myString.Length];
for(int i = 0; i < myString.Length; i++)
{
        myArray[i] = myString[i].ToString();
} 
```

or Char Array:

```
string theString = "myString";
char[] theStringAsArray = theString.ToCharArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:46:31.930

You can directly access the each index within the string. For example

```
string value = "Dot Net Perls";
char first = value[0];
char second = value[1];
char last = value[value.Length - 1];

// Write chars.
Console.WriteLine("--- 'Dot Net Perls' ---");
Console.Write("First char: ");
Console.WriteLine(first);
Console.Write("Second char: ");
Console.WriteLine(second);
Console.Write("Last char: ");
Console.WriteLine(last); 
```

Output

```
--- 'Dot Net Perls' ---
First char:  D
Second char: o
Last char:   s 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:42:11.663

Insert whatever character you want to split on instead of the "&" argument in the Split method call.

```
obj.QueryString =HttpContext.Current.Request.Url.PathAndQuery;
string[] arr =obj.QueryString.Split(new char[] {'&'}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T12:43:29.153

maybe you want to convert to char[] array instead string[] array. to do this use `char[] arr = obj.QueryString.ToCharArray()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T12:46:59.700

Here, this will make an array that may or may not fit your criteria.

```
var myArray = (from x in obj.QueryString select x.ToString()).ToArray() 
```

# java - JDBC 通过 PreparedStatement 中的 executeBatch 调用保证原子操作

> ID：11669498
> 
> 赞同：1
> 
> 时间：2012-07-26T12:40:08.930
> 
> 标签：java, sql, oracle, jdbc, atomic

我有以下域对象：

```
class Cat  
{  
    String name;  
    int age;  
} 
```

以及以下语句来批量插入猫：

```
void insertBulkCats(Collection<Cat> cats)  
{  
    Connection conn = getConnection();  
    PreparedStatement statement = new PreparedStatement();  
    for(Cat cat : cats)  
    {  
       statement.setString(1, cat.getName());  
       statement.setInt(2, cat.getAge());
       statement.addBatch();
    }     
    statement.executeBatch();  
    PreparedStatement mergeStatement = conn.prepareStatement(MERGE_CATS);  
    mergeStatement.execute();
    PreparedStatement dropStatement = conn.prepareStatement(CLEAR_CATS);    
    dropStatement.execute();  
    conn.commit();
} 
```

这是一个**Oracle**数据库。由于我要执行的步骤是插入所有猫，对我存档的猫进行合并，然后从插入的原始猫中删除所有记录。我担心的是，上面的这种方法并不能保证回滚或单独操作的发生。我的问题是如何保证这一切都作为一个原子操作执行？此外，我如何保证没有其他函数触及未读取的数据库（就对 Cat 表进行更新而言）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T13:08:01.153

原子性是[ACID](http://en.wikipedia.org/wiki/ACID) DBMS 的一个特性。它在 Oracle 中是自动的：运行所有 DML（更新/插入/删除），一旦你完成提交。您可以保证操作将保存为不可分割的事务（如果提交失败，则不会保存任何内容）。

在 JDBC 中，您必须确保**关闭 autocommit**。

关于并发性，它也是大多数 DBMS 的集成特性，尽管锁定的行为在主要 DBMS 之间可能有所不同。

在 Oracle 中，写入不会阻塞读取，尽管在您提交之前其他事务不会看到您的更改：这种隔离是通过[multi-versionning](https://docs.oracle.com/cd/E11882_01/server.112/e40540/consist.htm#CNCPT221)实现的。DML 的锁定机制是在行级别。只有一个事务可以同时修改一行。Oracle 中一个工作单元的常见模式是：

1.  使用该子句选择要修改的行`FOR UPDATE`。这将锁定这些行，并且在您提交或回滚之前，其他事务将无法修改这些行。
2.  无需中间提交即可完成所有 DML
3.  在发生错误时提交成功或回滚。

进一步阅读：更多关于[事务管理](https://docs.oracle.com/cd/E11882_01/server.112/e40540/intro.htm#CNCPT963)，更多关于[并发和锁定](https://docs.oracle.com/cd/E11882_01/server.112/e40540/consist.htm#CNCPT020)。

锁定整个表在 Oracle 中很少见，尽管它是可能的。[LOCK TABLE](https://docs.oracle.com/cd/E11882_01/server.112/e41084/statements_9015.htm#i2064405)命令可用于防止其他会话对整个表进行任何修改。

# c - 将 st_mode（来自 stat）存储在一个文件中并在 chmod 中重用它

> ID：11669504
> 
> 赞同：0
> 
> 时间：2012-07-26T12:40:25.367
> 
> 标签：c, unix, chmod, stat

我要疯了。我正在尝试编写一个可以存储和提取文件的存档库。存档文件如下所示：

```
<0,/home/user/file.txt,154,0755>
file contents (154 byte) 
```

每个文件都由一个标头（ <...> ）标识，有四个“标签”（用逗号分隔）、文件类型（0 代表文件，1 代表目录）、路径、字节大小、权限（八进制）。我使用 stat 系统调用（我在 Linux 上）检索大小和权限。我的问题是我必须将八进制值从 st_mode 转换为字符串，将其存储在存档文件中（标题中的第四个标签），然后将其提取并与 chmod 系统调用一起使用。

要将其转换为字符串，我使用：

```
char mode[6];
sprintf (mode, "%o", statr.st_mode); 
```

并检索它我使用 atoi，但它似乎不起作用。例如，存储在第 4 个标签中的值是 100644，但是 chmod 设置的权限错误（我的用户无法读取文件）。

我不确定我是否解释得很好，如果需要，我会发布整个代码（但它认为没有实现问题，只是从八进制转换为字符串之间的问题）

**编辑：解决了！**实际上 strtol 方法有效，但我也忘记将它应用于目录（因此，由于错误文件夹的权限掩码，提取包含文件的目录导致 Segfault）。谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:10:16.427

据我所知，没有一个unix标准函数可以做到这一点。

您很可能必须进行掩码`st_mode`以获取所需的每个权限位并将其转换为对您有意义的内容。

[相关帖子](https://stackoverflow.com/questions/6529274/flags-for-st-mode-of-stat-system-call)

可能有一种更简单的方法可以做到这一点，但我提供了一个简单的示例，该示例展示了如何获取您感兴趣的每一位。这确实可以编译并且似乎可以按预期运行。

**st_mode.c**

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>

#define SET_UID_BIT     0x4000
#define SET_GID_BIT     0x2000
#define STICKY_BIT      0x1000

// Readable USER bits defined here
#define USR_READ_BIT    0x400
#define USR_WRITE_BIT   0x200
#define USR_EXEC_BIT    0x100

// Readable GROUP bits defined here
#define GRP_READ_BIT    0x040
#define GRP_WRITE_BIT   0x020
#define GRP_EXEC_BIT    0x010

// Readable OTHER bits defined here
#define OTH_READ_BIT    0x004
#define OTH_WRITE_BIT   0x002
#define OTH_EXEC_BIT    0x001

int main()
{
    // The file I'm opening
    const char fp[] = "myfile.txt"; // -rw-rw-r--
    struct stat stats;

    // Get the stats
    if ( 0 == stat( fp, &stats ) )
    {
        // store st_mode
        mode_t mode = stats.st_mode;
        // init printable_mode
        unsigned int printable_mode = 0;        

        // Test for each permission bit in mode.
        // If the bit is present, mark the corresponding bit in printable_mode
        // using defined bits above.
        if( mode & S_ISUID )
        printable_mode |= SET_UID_BIT;

        if( mode & S_ISGID )
        printable_mode |= SET_GID_BIT;

        if( mode & S_ISVTX )
        printable_mode |= STICKY_BIT;

        if( mode & S_IRUSR )
        printable_mode |= USR_READ_BIT;

        if( mode & S_IWUSR )
        printable_mode |= USR_WRITE_BIT;

        if( mode & S_IXUSR )
        printable_mode |= USR_EXEC_BIT;

        if( mode & S_IRGRP )
        printable_mode |= GRP_READ_BIT;

        if( mode & S_IWGRP )
        printable_mode |= GRP_WRITE_BIT;

        if( mode & S_IXGRP )
        printable_mode |= GRP_EXEC_BIT;

        if( mode & S_IROTH )
        printable_mode |= OTH_READ_BIT;

        if( mode & S_IWOTH )
        printable_mode |= OTH_WRITE_BIT;

        if( mode & S_IXOTH )
        printable_mode |= OTH_EXEC_BIT;

        // Let's see what it looks like....
        printf("%04x\n", printable_mode);
        printf("%x\n", mode);
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:24:20.393

使用 strtoul。例如，以下测试程序正确解释“100644”（八进制）。转换后，`*endptr`指向第一个*未*转换的字符。如果`*endptr == 0`，则整个字符串已被消耗，否则会出现错误（例如，使用“1234X”调用 strtoul 会在“X”处停止）。请注意，八进制 10644 等于 33188（十进制）。

```
#include <stdlib.h>
#include <stdio.h>

int main() {

   char *s = "100644";
   char *endptr;

   unsigned long result = strtoul(s, &endptr, 8);

   if (*endptr)
      printf("conversion error!\n");

   printf("result: %lu == octal %lo\n", result, result);

   return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T14:23:13.393

如果您以八进制格式写入数据并带有前导`0`，则可以使用以下命令读取它`strtol`：

```
char mode[8];
snprintf(mode, 8, "0%o", statr.st_mode);
strtol(mode, NULL, 0); 
```

或者，您可以使用`strtol`提供`8`作为`base`参数来阅读它，在这种情况下，前导`0`是不必要的：

```
char mode[7];
snprintf(mode, 8, "%o", statr.st_mode);
strtol(mode, NULL, 8); 
```

# java - 嵌入式 tomcat 7 servlet 3.0 注释不起作用

> ID：11669507
> 
> 赞同：25
> 
> 时间：2012-07-26T12:40:47.717
> 
> 标签：java, jakarta-ee, tomcat, servlets

我有一个精简的测试项目，其中包含一个 Servlet 3.0 版，使用如下注释声明：

```
 @WebServlet("/test")
public class TestServlet extends HttpServlet {

    private static final long serialVersionUID = -3010230838088656008L;

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException{
        response.getWriter().write("Test");
        response.getWriter().flush();
        response.getWriter().close();
    }
} 
```

我也有一个 web.xml 文件，如下所示：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
      version="3.0">

      <servlet>
        <servlet-name>testServlet</servlet-name>
        <servlet-class>g1.TestServlet</servlet-class>
      </servlet>      

      <servlet-mapping>
        <servlet-name>testServlet</servlet-name>
        <url-pattern>/testWebXml</url-pattern>
      </servlet-mapping>

</web-app> 
```

我尝试使用 Embedded Tomcat 7 进行 JUnit 测试。当我启动 Embedded Tomcat 时，我只能通过 web.xml (/testWebXml) 中声明的 url-pattern 访问 servlet。如果我尝试通过注释 (/test) 声明的 url 模式访问它，则找不到 404 页面。

这是我的测试代码：

```
 String webappDirLocation = "src/main/webapp/";
    Tomcat tomcat = new Tomcat();
    tomcat.setPort(8080);

    tomcat.addWebapp("/jerseyTest", new File(webappDirLocation).getAbsolutePath());

    tomcat.start();
    tomcat.getServer().await(); 
```

为了确保我正确设置了我的项目，我还安装了一个实际的 Tomcat 7 并部署了战争。这一次，我的 servlet 的 web.xml 声明的 url 和注释 url 都可以正常工作。

所以我的问题是：有谁知道如何让 Embedded Tomcat 7 考虑到我的 Servlet 3.0 注释？

我还应该声明它是一个 Maven 项目，并且 pom.xml 包含以下依赖项：

```
 <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-catalina</artifactId>
        <version>7.0.29</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat.embed</groupId>
        <artifactId>tomcat-embed-core</artifactId>
        <version>7.0.29</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-jasper</artifactId>
        <version>7.0.29</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.1</version>
        <scope>test</scope>
    </dependency> 
```

# == 更新 ==

这是一个看起来与此类似的问题（除了不工作的 Servlet 3.0 注释在侦听器上，而不是在 Servlet 上），它有一个建议的修复：

[https://issues.apache.org/bugzilla/show_bug.cgi?id=53903](https://issues.apache.org/bugzilla/show_bug.cgi?id=53903)

我已经尝试过了，但没有奏效：

将 Embedded Tomcat 启动代码更改为：

```
String webappDirLocation = "src/main/webapp/";
Tomcat tomcat = new Tomcat();

tomcat.enableNaming();
tomcat.setPort(8080);

Context ctx = tomcat.addWebapp(tomcat.getHost(), "/embeddedTomcat", new File(webappDirLocation).getAbsolutePath());
((StandardJarScanner) ctx.getJarScanner()).setScanAllDirectories(true);

tomcat.start();

tomcat.getServer().await(); 
```

我尝试过的其他事情也没有成功：

*   在 web.xml “web-app” 标签中专门设置 metadata-complete="false"

*   将 Maven 依赖项更新到版本 7.0.30

*   调试`org.apache.catalina.startup.ContextConfig`类。那里有检查`@WebServlet`注释的代码，只是它永远不会被执行（第 2115 行）。这可能是找到问题根源的好方法，但是课程很大，我现在没有时间这样做。也许如果有人愿意看看这个类是如何工作的，以及在什么条件下（配置参数）它可以正确地检查你的项目的类中的注释，它可能会得到一个有效的答案。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-02T10:43:50.587

好吧，我终于通过查看 Tomcat7 源代码解决了这个问题，即在处理 EmbeddedTomcat 和 servlet 3.0 注释的单元测试中。

基本上，您必须像这样启动您的 Embedded Tomcat 7 以使其知道您的注释类：

```
String webappDirLocation = "src/main/webapp/";
Tomcat tomcat = new Tomcat();
tomcat.setPort(8080);

StandardContext ctx = (StandardContext) tomcat.addWebapp("/embeddedTomcat",
                new File(webappDirLocation).getAbsolutePath());

//declare an alternate location for your "WEB-INF/classes" dir:     
File additionWebInfClasses = new File("target/classes");
VirtualDirContext resources = new VirtualDirContext();
resources.setExtraResourcePaths("/WEB-INF/classes=" + additionWebInfClasses);
ctx.setResources(resources);

tomcat.start();
tomcat.getServer().await(); 
```

为了清楚起见，我应该提到这适用于标准 Maven 项目，您的“Web 资源”（例如静态和动态页面、WEB-INF 目录等）位于：

[你项目的根目录]/src/main/webapp

你的类被编译成

[你项目的根目录]/target/classes

（这样你就有了[你的项目的根目录]/target/classes/[some package]/SomeCompiledServletClass.class）

对于其他目录布局，需要相应地更改这些位置。

==== 更新：嵌入式 Tomcat 8 ====

感谢@kwak 注意到这一点。

API 发生了一些变化，以下是使用 Embedded Tomcat 8 时上述示例的变化：

```
String webappDirLocation = "src/main/webapp/";
Tomcat tomcat = new Tomcat();
tomcat.setPort(8080);

StandardContext ctx = (StandardContext) tomcat.addWebapp("/embeddedTomcat",
                new File(webappDirLocation).getAbsolutePath());

//declare an alternate location for your "WEB-INF/classes" dir:     
File additionWebInfClasses = new File("target/classes");
WebResourceRoot resources = new StandardRoot(ctx);
resources.addPreResources(new DirResourceSet(resources, "/WEB-INF/classes", additionWebInfClasses.getAbsolutePath(), "/"));
ctx.setResources(resources);

tomcat.start();
tomcat.getServer().await(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-21T03:23:25.857

```
 Tomcat tomcat = new Tomcat();
    tomcat.setPort(port);

    Context ctx = tomcat.addWebapp("/", new File(docBase).getAbsolutePath());
    StandardJarScanner scan = (StandardJarScanner) ctx.getJarScanner();
    scan.setScanClassPath(true);
    scan.setScanBootstrapClassPath(true); // just guessing here
    scan.setScanAllDirectories(true);
    scan.setScanAllFiles(true);

    tomcat.start();
    tomcat.getServer().await(); 
```

使用 MVN 的 Tomcat Embed 7.0.90 对我来说效果很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T16:48:08.773

鉴于您发布的片段中的 JNDI 魔法：

```
try {
    listBindings = context.getResources().listBindings(
            "/WEB-INF/classes");
} catch (NameNotFoundException ignore) {
    // Safe to ignore
} 
```

您可以自己在 JNDI 中设置相同类型的条目吗？

```
Context ctx = tomcat.addWebapp(...);
FileDirContext fdc = new FileDirContext();
fdc.setDocBase(new File("/path/to/my/classes").getAbsolutePath());
ctx.getResources().createSubcontext("/WEB-INF/classes").bind("myclasses", fdc); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-04-07T05:35:29.833

我认为在 8.5 及更高版本中它只是一个班轮：

Context.setAddWebinfClassesResources(true);

> 设置标志，指​​示是否应将 /WEB-INF/classes 视为爆炸的 JAR 和 JAR 资源，就像它们在 JAR 中一样。

[http://tomcat.apache.org/tomcat-8.5-doc/api/org/apache/catalina/core/StandardContext.html#setAddWebinfClassesResources(boolean)](http://tomcat.apache.org/tomcat-8.5-doc/api/org/apache/catalina/core/StandardContext.html#setAddWebinfClassesResources(boolean))

# css - 任何人都有显示解决方案：表格和显示：IE6 的表格行？

> ID：11669512
> 
> 赞同：0
> 
> 时间：2012-07-26T12:41:15.867
> 
> 标签：css, internet-explorer

任何人都有针对 IE6`display: table`的解决方案吗？`display: table-row`

这是我的CSS代码：

```
.menu {
    display: table;
    width: 708px;
    margin: 0 0 1em 0;
    padding: 0;
    list-style: none;
    z-index:99;
}

.menu li {
    display: table-cell;
    z-index: 9999;
}

.menu li a.mainnav{
    display: block;
    color: #000;
    text-align: center;
    text-decoration: none;
    font-weight: bold;
    border-right: 1px solid #000;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:48:42.830

我可以找到两个可能的答案。

一个[在](https://stackoverflow.com/questions/5327903/ie6-css-displaytable-fix)stackoverflow。

其他是一种肮脏的[黑客](http://tanalin.com/en/projects/display-table-htc/)

# php - 未捕获的引用错误：..未定义..但我可以在错误字符串中看到变量

> ID：11669515
> 
> 赞同：2
> 
> 时间：2012-07-26T12:41:31.617
> 
> 标签：php, javascript, variables

这行代码`var $sTest = <?php echo $a = $_GET['ID']?>`返回“未捕获的引用错误：.. 未定义”。

对于这个问题，如果我们假设我传递的 ID 为“ABC”。当我在 Chrome 中使用开发人员工具并检查资源时，我可以看到 $_GET**已经**工作，因为它向我显示了变量值。这种情况下的错误消息是“未捕获的引用错误：ABC 未定义”。

我不知道如何将 php 变量分配给脚本变量。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T12:46:10.443

这是因为你必须引用你的 php 脚本的输出：

```
var $sTest = <?php echo $a = $_GET['ID']?> 
```

将成为

```
var $sTest = something; 
```

并且在您的 Javascript 环境中`something`未定义。如果你想尽可能多地保留类型信息，你应该在 php 端使用[json_encode ，如下所示：](http://php.net/manual/en/function.json-encode.php)

```
var $sTest = <?php print json_encode($_GET['ID']);?>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:44:02.213

在浏览器中查看最终生成的源代码。您在作业周围缺少引号：

```
var $sTest = "<?php echo $a = $_GET['ID']?>"; 
```

您还应该`htmlspecialchars()`对字符串应用以防止 XSS 攻击和破坏字符串：

```
var $sTest = "<?php echo $a = htmlspecialchars($_GET['ID']);?>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:44:10.220

尝试回显 $_GET 而不将其分配给 $a。

```
var $sTest = <?php echo $_GET['ID']?> 
```

# c# - 将代码移植到 silverlight 时出错

> ID：11669517
> 
> 赞同：-1
> 
> 时间：2012-07-26T12:41:43.383
> 
> 标签：c#, silverlight

我的解决方案中有一个 C# 类库项目，我在其中添加了一个用户控件并粘贴了我的 WPF 应用程序中的以下代码。

xaml 看起来一切都很好，但我在编译时遇到了某些错误。例如：

```
1) System.Windows.DataFormats' does not contain a definition for 'StringFormat'
2) System.Windows.Controls.TextBlock' does not contain a definition for 'Background' and no extension method 'Background' accepting a first argument of type 'System.Windows.Controls.TextBlock' could be found
3) System.Windows.Media.Colors' does not contain a definition for 'LightCoral'
4) System.Windows.Controls.TextBlock' does not contain a definition for 'Background' and no extension method 'Background' accepting a first argument of type 'System.Windows.Controls.TextBlock' could be found (are you missing a using directive or an assembly reference?) 
```

我不确定为什么会出现这些错误，这些错误与 TextBox 的背景、拖放、数据格式等有关**。.xaml.cs**代码也在这里。[http://pastebin.com/CY8E8prz](http://pastebin.com/CY8E8prz)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:47:38.633

您必须删除错误引用的属性，因为 Silverlight 根本没有它们，或者它们具有不同的名称（WPF 和 Silverlight 并不完全相同，前者比后者具有*更多*功能）。

几个例子：

*   要为 a 的背景着色`TextBlock`，您可以将其包装在 a 中`Border`（相应地调整定位/大小属性）。
*   `LightCoral`看起来像一个颜色名称，你必须查找类似的东西或使用`Color.FromArgb()`

简而言之，从 WPF 复制粘贴到 Silverlight 的代码很少按原样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:53:12.597

Textblock 在 Silverlight 中没有背景，只有 WPF。我相信你的其他错误也会随之而来。对于该特定问题，请将文本块放在另一个控件上或改用标签。对于颜色，只需查找 RGB 并直接设置。我不确定其他错误是否准确。

# cakephp - 蛋糕PHP。不要“在 => 创建”上工作

> ID：11669519
> 
> 赞同：0
> 
> 时间：2012-07-26T12:41:45.257
> 
> 标签：cakephp, cakephp-model

我设置了规则“isUnique”并为“on”选项设置了“create”值。

完整代码：

```
'username' => array(
     'notempty' => array(
        'rule' => array('notempty'),
        'message' => 'Empty field',
        'required' => true,
     ),              
     'between' => array(
        'rule' => array('between',3,25),
        'message' => 'Too long value'
     ),
     'unique' => array(
        'rule' => 'isUnique',
        'on' => 'create',
        'message' => 'Already taken',
        'required' => true,
     )
  ) 
```

但是当我尝试登录时，我收到错误消息。为什么？

CakePHP 2.2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-21T18:00:56.787

问题是，当您尝试登录时，CakePHP 认为您正在创建一个新记录（CakePHP 将其识别为新记录，因为您没有像编辑某些项目时那样提供该项目的 ID）。

解决方案可能是创建一个自定义验证功能，该功能将始终检查唯一用户名，除非在登录时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:46:54.630

原因是因为您已经`'required' => true`设置，这要求验证时密钥存在。这与`'on'`密钥冲突，如下所述：http: [//book.cakephp.org/2.0/en/models/data-validation.html#one-rule-per-field](http://book.cakephp.org/2.0/en/models/data-validation.html#one-rule-per-field)

相反，仅在创建时才需要它。

```
'unique' => array(
    'rule' => 'isUnique',
    'on' => 'create',
    'message' => 'Такой никнейм уже занят',
    'required' => 'create', // change this to 'create'
 ) 
```

# performance - 在一个循环中，每次设置一个状态值还是检查它是否改变然后设置它更有效？

> ID：11669523
> 
> 赞同：0
> 
> 时间：2012-07-26T12:41:48.180
> 
> 标签：performance, getter-setter

我处于迭代多个记录并根据这些记录中的数据设置状态信息的情况。像这样的东西（不是真正的代码，只是一个简化）：

```
StateObject state;
ConcurrentQueue<Record> records;

while(!records.IsEmpty()) 
{
  //set state here based on the next record
} 
```

那么，这样做会更有效/更好的做法吗？

```
{
  //set state here based on the next record
  Record r = records.next();
  state = r.state;
} 
```

或者

```
{
  //set state here based on the next record
  Record r = records.next();
  if(state != r.state)
    state = r.state;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:46:18.340

这完全取决于您的记录类型。在某些情况下，第一个更好，在某些情况下，第二个更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:05:33.927

测试很昂贵，我将您的代码简化为：

```
int x = 5;

if (x == 5)
    x = 4;

x = 4; 
```

这是反汇编的代码：

```
 int x = 5;
00000036  mov         dword ptr [rsp+20h],5 

            if (x == 5)
0000003e  xor         eax,eax 
00000040  cmp         dword ptr [rsp+20h],5 
00000045  setne       al   
00000048  mov         dword ptr [rsp+28h],eax 
0000004c  movzx       eax,byte ptr [rsp+28h] 
00000051  mov         byte ptr [rsp+24h],al 
00000055  movzx       eax,byte ptr [rsp+24h] 
0000005a  test        eax,eax 
0000005c  jne         0000000000000066 
                x = 4;
0000005e  mov         dword ptr [rsp+20h],4 

            x = 4;
00000066  mov         dword ptr [rsp+20h],4 
```

话虽如此，过早的优化是浪费时间。数据库调用可能需要一秒钟，上述调用可能需要 0.00000001 秒。

写最简单的代码，以后再优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:56:53.523

正如您自己所说，这是一种简化。实际答案取决于您的具体情况：您可能正在运行到世界另一端的数据库，在这种情况下，更新可能会非常昂贵。或者，您的状态变量可能是一个非常复杂的类型，比较起来很昂贵。

正如@harold 在他的评论中所说：“试试看。” 分析您的代码并了解什么是昂贵的，什么不是。结果很可能不是你所期望的！

# jquery - Firefox 中的 jquery 对话框问题：第一次打开后无法输入

> ID：11669526
> 
> 赞同：2
> 
> 时间：2012-07-26T12:41:51.253
> 
> 标签：jquery, firefox, focus, jquery-ui-dialog

我的 jquery 对话框在 Firefox 中无法正常工作，但 Firebug 没有给我任何错误。我的对话框在 Chrome 中运行良好。

**情况：** 我的页面上有几个 jquery 对话框，它们针对不同的事件打开。一个“添加新元素”对话框给了我一个问题。第一次打开对话框时效果很好。随后的任何时候，都无法单击或输入文本输入框。我认为我通过每次都销毁对话框来解决问题。然后每次打开它都会起作用。但是后来我发现如果打开了任何其他对话框，然后打开了这个“添加新元素”对话框，同样的事情又发生了：无法在框中输入。

我很困惑！！！！请，任何帮助将不胜感激......我已经盯着这段代码好几天了。

这是jquery对话框代码：

```
$(function() {

    $( "#dialog-new-osc-el" ).dialog({
        resizable: false,
        autoOpen: false,
        height:300,
        width:400,
        modal: true,
        buttons: {
            "Create": function() {

*create button function stuff here* then:

            $(this).dialog("destroy");
        $( this ).dialog( "close" );
                    create_new_osc_el_dialog();
            },
            Cancel: function() {
            $(this).dialog("destroy");
                $( this ).dialog( "close" );
                create_new_osc_el_dialog();
            }
        },
            close: function() {
            $(this).dialog("destroy");
                $( this ).dialog( "close" );
                create_new_osc_el_dialog();
            }
    });
}); 
```

单击“添加新元素” div 时会打开对话框 - 该 div 具有 onclick 功能：

```
<div class="addnewbox" onclick="addneweltoosc();"> 
```

这个 onclick 函数看起来像这样（为简洁起见，删除了一些代码）：

```
 function addneweltoosc(){
                $( "#dialog-new-osc-el" ).dialog( "open" );
} 
```

对话框的实际 HTML 很长，这里是重要的东西：

```
<div id="dialog-new-osc-el" title="Create Element">

<div id="new_osc_el_type" class="pointer">
<ul>
<li onclick="new_osc_el_type_chosen('Branch');">Branch</li>
<li onclick="new_osc_el_type_chosen('Group');">Group</li>
<li onclick="new_osc_el_type_chosen('Division');">Division</li>
<li onclick="new_osc_el_type_chosen('Unit');">Unit</li>
<li onclick="new_osc_el_type_chosen('Strike Team');">Strike Team</li>
<li onclick="new_osc_el_type_chosen('Task Force');">Task Force</li>
<li onclick="new_osc_el_type_chosen('Individual Resource');">Individual Resource</li>
</ul>
</div>
<p><input class="hide" type="text" id="new_osc_el_pos_name" />
</div> 
```

该对话框首先为用户提供一个可供选择的列表。当用户单击列表项时，调用 new_osc_el_type_chosen 函数。此函数隐藏该列表并显示“new_osc_el_pos_name”文本输入。**这是对话框第一次打开时起作用的输入框，但之后就不行了。**这是代码：

```
function new_osc_el_type_chosen(a)

{
$("#new_osc_el_type").addClass("hide");
$("#new_osc_el_pos_name").removeClass("hide");
if (a=="Branch")
{
$("#new_osc_el_pos_name").val("NAME of Branch Director");
}
document.getElementById("new_osc_el_pos_name").setSelectionRange(0,7);
$("#new_osc_el_pos_name").focus();
} 
```

**解决了！**

显然，所有模态对话框都导致了它们之间的冲突……或者其他什么。实际上，我不是 100% 确定为什么 - 但是将 modal:true 更改为 modal:false 解决了我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T18:06:40.887

我在使用 Firefox 时遇到了同样烦人的问题。所有其他浏览器都运行良好。

我注意到定义了多个对话框的页面上的问题（所有对话框都用 定义`autoOpen: false`，因此在用户单击触发的按钮之前它们不会打开`dialog("open")`

我有两个简单的对话框，每个对话框都有一个`input type="text"`按钮和两个按钮（`input type="button"`，用于“取消”和“确定”）。

我可以通过使用任一对话框来重现，但一个简单的测试适用于一个对话框：

1.  打开一个对话框。我第一次可以在输入框中输入文本就好了。
2.  通过单击右上角的 X 关闭对话框。
3.  从 #1 打开相同的对话框。在除 Firefox 之外的所有浏览器中，我都可以在框中输入内容。在 Firefox 中，一切看起来都不错（模态层在对话框后面，但在其他所有内容之前），但根本不起作用。

我尝试增加输入的 z-index 及其对话框 div。我尝试降低模态层的 z-index。我什至删除了模态 div 元素。这些都没有效果。然后我在 jquery-ui.js 中搜索“modal”（使用 jQuery UI - v1.9.2），发现这部分是问题所在（我确认通过将其注释掉，输入问题消失了）。

**问题的根源，来自 jquery-ui.js (1.9.2)：**

```
// adjust the maxZ to allow other modal dialogs to continue to work (see #4309)
if ( this.options.modal ) {
    maxZ = 0;
    $( ".ui-dialog" ).each(function() {
        if ( this !== that.uiDialog[0] ) {
            thisZ = $( this ).css( "z-index" );
            if ( !isNaN( thisZ ) ) {
                maxZ = Math.max( maxZ, thisZ );
            }
        }
    });
    $.ui.dialog.maxZ = maxZ;
} 
```

我在 jQuery UI 错误跟踪器上找到了 #4309：http: [//bugs.jqueryui.com/ticket/4309](http://bugs.jqueryui.com/ticket/4309)

似乎所有浏览器的问题都已解决，但问题仍然存在于 Firefox 中（至少在我使用的版本中） - 现在即使您只打开/关闭/重新打开其中一个对话框（所以其他对话框是那里，但从来没有“开放”过他们）。

**对我有用的 hack 修复是在加载 jquery-ui.js 后执行此操作：**

```
if ($.browser.mozilla)
{
    // fix firefox z-index bug with modal jquery UI dialog that prevents user from typing after initial modal dialog opened
    $.fn.dialogOriginal = $.fn.dialog; // save original dialog() function
    $.fn.dialog = function ()
    {
        if (!$(this).data("fixModalZIndex"))
        {
            // bind events only once
            $(this).data("fixModalZIndex", true).bind("dialogbeforeclose", function (event, ui)
            {
                // unhook modal behavior to fix firefox bug
                $(this).dialog("option", "modal", false);
            }).bind("dialogclose", function (event, ui)
            {
                var ref = $(this); // save reference for later
                setTimeout(function ()
                {
                    ref.dialog("option", "modal", true); // set back to modal, but in a timeout to avoid the z-index input bug
                    ref = null;
                }, 0);
            });
        }
        return $.fn.dialogOriginal.apply(this, arguments); // call original dialog function
    };
} 
```

不是很懂这个。可能有助于通过 maxZ 逻辑进行调试，但我不是 Firefox 粉丝，并且由于我的 hack 修复工作我已经准备好关闭这张票并返回修复我自己的错误而不是修复 jQuery。希望此信息对某人有所帮助，听起来您已经决定采用 modal:false 路线（这也对我有用，但客户真的希望它是模态的......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:29:51.577

*   销毁然后关闭作为操作顺序似乎很奇怪。
*   该`create_new_osc_el_dialog()`功能似乎可能是相关的
*   您在“创建”周围有引号但没有 Cancel 的事实似乎很奇怪，并且由于缩进，我无法完全判断您`{}`的 s 是否在正确的位置。

如果您打开了另一个对话框然后第一次打开“添加新元素”，是否会出现错误，或者仅在您打开和关闭“添加新元素”并且还打开另一个对话框的情况下？

多年来，Jquery dialog 和 firefox 显然存在许多问题。您使用的是什么版本的 JQuery 和 Firefox？

我听说过一个类似问题的建议，您尝试将对话框 div 设置为`style="position:fixed"`，但我不知道这是否会解决您对这个问题的特定化身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T20:09:08.993

我也遇到了这个问题，`z-index`当`modal`覆盖层高`z-index`于`textbox`.

多亏了[这个 StackOverflow 问题](https://stackoverflow.com/questions/6949059/jquery-ui-modal-dialog-captures-all-keypress-so-i-cant-input-text-inside-it)，我很快找到了原因并能够解决我的问题。

# grails - Grails g：选择不选择

> ID：11669527
> 
> 赞同：7
> 
> 时间：2012-07-26T12:41:53.577
> 
> 标签：grails, enums, gsp

我有以下组合框：

```
<g:select name="ticketType" from="${app.domain.enums.TicketType?.values()}"
                              keys="${app.domain.enums.TicketType.values() }"
                              value="${ticketInstance?.ticketType}"
                              noSelection="${['null': 'Select One...']}"
                    /> 
```

我在命令对象中为 ticketType 设置了以下约束

```
ticketType nullable: true, blank:true 
```

TicketType 是一个非常简单的枚举：

```
 public enum TicketType {
        QUESTION, SUPPORT, MAINTENANCE, NEW_FUNCTIONALITY, MALFUNCTION
} 
```

每次我没有在我的 GSP 中为 ticketType 设置一些值时，我都会收到以下错误：

```
Failed to convert property value of type 'java.lang.String' to required type 'com.coming.enums.TicketPriority' 
```

这就像在没有选择的情况下 g:select 将值设置为“null”（字符串）。

我错过了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-26T14:32:21.240

您是否尝试过使用空字符串作为 noSelection 属性，而不是使用“null”文字？例如`noSelection="${['':'Select One...']}"`？这可以在数据绑定期间正确转换为真正的空值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:15:56.453

正如您的错误所说-您的`noSelection`. 这不能转换为您的任何枚举值。

删除你的引号`null`，它应该可以工作（它适用于我的 grails 2.0）：

```
<g:select name="ticketType" from="${app.domain.enums.TicketType?.values()}"
                          keys="${app.domain.enums.TicketType.values() }"
                          value="${ticketInstance?.ticketType}"
                          noSelection="${[null: 'Select One...']}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-17T16:20:49.837

在 Rails 3.3.x 下，提供“null”值的任何变体都不起作用。最后，我通过在使用任何参数之前将此行添加到控制器+操作中来解决它：

```
// convert "null" strings to REAL nulls
params.account.each { it.value = (it.value == 'null' ? null : it.value) } 
```

之后，以下工作正常：

```
account.properties = params.account 
```

# c++ - 在 C++ 中创建游戏制作者的重力

> ID：11669533
> 
> 赞同：-3
> 
> 时间：2012-07-26T12:42:08.633
> 
> 标签：c++, gravity

在 C++ 中，我一直在尝试重新创建游戏制作者的重力，到目前为止，我有这个：

```
double script::lengthdir_y(double len,double dir){
        return -sin(dir* M_PI/180) * len;//Create equivalent GM lengthdir_y code.
}

double script::scr_findhsy(player* plr){
        if(plr->jumping==true)
        {
                int rpt, vspeed, y;//Make variables.
                rpt=(clock()-plr->LastMovingYUpdate)/(1000/30);
                //Check the current time, and take away the time when the player started jumping to find the time inbetween, then divide it by 1000/30 to find the ammount of GM steps.
                vspeed=plr->vspeed;//Players vspeed.
                y=plr->y;//players y.
                for(int i=0; i<rpt; i++)//Plus the lengthdir_y code to the vspeed, and plus the vspeed to the y the correct ammount of times.
                {
                        vspeed+=lengthdir_y(0.5, 270);
                        y+=vspeed;
                }
                return y;//return the new value.
        }
        else
                return plr->y;//If the player isnt falling, send the original Y value, because nothing needs to be updated.
} 
```

玩家的 y 值不会在每一步（或 C++ 中的 33.33 毫秒）都更新以减少延迟，所以我创建了这个脚本来在需要时获取正确的 Y 值，而不是每一步。

但它似乎永远不会正确 OO

这是客户端调试的一些测试结果在这些测试中，客户端发送正确的 Y 值，服务器发送它认为是播放器的 Y 值：

测试 1 -
服务器：384 -
客户端：384 -描述
：完全静止，完美运行。
测试 2
-Server：373
-Client：349.50 -Description
：完全静止，完美运行。
测试 3 -
服务器：318 -
客户端：279.50 -描述
：完全静止，完美运行。

因此，当玩家跳跃时，该值意味着减少，因为 Y 越来越小，这在客户端和服务器上都有效，除了值距离之外。在玩家因重力而开始下落后，服务器会一直读取“318”，直到玩家撞到地面并更新数值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:55:53.690

这可能是因为整数除法：

`1000/30`在此示例中将等于`33`not `33.333`。

您需要将其更改为

`1000.0/30.0`

此外，您将结果保存到一个`int`，也许`rpt`应该是一个`double`类型。

我承认，我在这里抓住了稻草。

# objective-c - Objective-C：单例

> ID：11669538
> 
> 赞同：0
> 
> 时间：2012-07-26T12:42:28.040
> 
> 标签：objective-c, singleton

我正在尝试制作单例，但我一直遇到错误并且不确定我做错了什么：

这是我的 .h 文件：

```
#import <Foundation/Foundation.h>

@interface ColorMaker : NSObject { 

}

+(ColorMaker* )sharedColorMaker;

- (UIColor* ) setColor : (float) red : (float) green : (float) blue; 

@end 
```

这是.m

```
#import "ColorMaker.h"

@implementation ColorMaker

+(ColorMaker *)sharedColorMaker { 

static ColorMaker* sharedColorMaker;

@synchronized(self) { 

    if (!sharedColorMaker)

        sharedColorMaker = [[ColorMaker alloc] init];

    return sharedColorMaker;

}

}

- (UIColor* ) setColor:(float)red :(float)green :(float)blue {

float newRed = red/255;
float newGreen = green/255;
float newBlue = blue/255;

UIColor* colorToReturn = [UIColor colorWithRed:newRed green:newGreen blue:newBlue alpha:1.0];

return colorToReturn;    
}

@end 
```

在视图控制器中，viewDidLoad：

```
- (void)viewDidUnload {
[super viewDidUnload];

ColorMaker* thisColorMaker = [ColorMaker sharedColorMaker];
} 
```

不断收到“使用未声明的标识符 ColorMaker”错误。

# xcode - 如何安装以前版本的xcode？

> ID：11669541
> 
> 赞同：2
> 
> 时间：2012-07-26T12:42:38.103
> 
> 标签：xcode, macos

在 AppStore 中可以使用 Xcode 4.4，但我需要 Xcode 4.2，但我根本找不到它。请帮帮我。在哪里可以找到并安装？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T12:58:46.343

Xcode 可从[Apple 的开发人员支持中心](https://developer.apple.com/support/xcode/)获得。您需要一个帐户，但它们是免费的。

# jquery - 如何将 backstrech 插件应用于 div，而不是 body 标签？

> ID：11669543
> 
> 赞同：0
> 
> 时间：2012-07-26T12:42:43.937
> 
> 标签：jquery, css

如何将[backstrech 插件](http://srobbin.com/jquery-plugins/backstretch/)应用于 div，而不是整个身体的高度？我已经搜索过是否有人已经做过类似的事情但还没有找到。

**HTML：**

```
<div id="header"></div>
<div id="content"><!-- div is 100% width - here is where I want to apply the backstrech --></div>
<div id="footer"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:47:41.093

就目前而言，你不能。

backstretch 插件不接受选择器。

您可以在 github 上对该项目进行分支并添加此支持。我认为这不会太难。

**更新**

查看源代码，我可以看到另一种方法来做到这一点。

该插件会查找 ID 为“backstretch”的元素，并将其指定为您的 div 的 Id，使插件填充 div 而不是主体。

[例子](http://jsfiddle.net/AVHEE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:47:24.827

我的第一个猜测是在[https://github.com/srobbin/jquery-backstretch/blob/master/jquery.backstretch.js](https://github.com/srobbin/jquery-backstretch/blob/master/jquery.backstretch.js)第 138 行更改`$("body").append($container);`为`$("#content").append($container);`

请注意我从来没有使用过这个插件，它可能不起作用或者更简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T12:48:40.737

您不必使用插件进行背景图像拉伸。您可以使用 CSS3 [background-size:cover 属性](http://whereswalden.com/files/mozilla/background-size/page-cover.html)使用 CSS 来实现，对于 IE，您可以使用[此解决方案](http://dipaksblogonline.blogspot.in/2011/01/ie-78-stretching-background-image-to.html)

[CSS3背景大小](https://developer.mozilla.org/en/CSS/background-size)

# android - ANDROID 从视图移动到另一个活动

> ID：11669544
> 
> 赞同：0
> 
> 时间：2012-07-26T12:42:47.260
> 
> 标签：android, events, view, android-activity, touch

（我有 MainActivity 类（扩展 Activity），我有方法 setContentView（GameView）；GameView 是一个扩展 View 的类，在这个类（GameView）中我有方法：

```
boolean inTouchEvent(MotionEvent event){
switch(event.getAction()){
case MotionEvent.ACTION_DOWN:
//here I would like to go to another activity to class MainMenuActivity()
}
} 
```

提前致谢。

好的，它的工作：

```
public boolean onTouchEvent(MotionEvent event){ 
    switch(event.getAction()){
        case MotionEvent.ACTION_DOWN:   
        Intent intent = new Intent (contexTmp, MainActivity.class);
        contexTmp.startActivity(intent);
        ((Activity)getContext()).finish();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:44:51.213

去另一个活动：

```
Intent i = new Intent(context, MainMenuActivity.class);
context.startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:45:57.227

执行以下操作：

```
Intent intent = new Intent(getContext(), MainMenuActivity.class);
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T12:50:32.700

由于您处于同一活动中，因此可以使用`setContentView(main);`

如果您需要从其他活动返回主菜单活动，您需要这个

```
Intent intent = new Intent(getContext(), MainMenuActivity.class);
intent.setFlags( Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-26T12:46:23.020

```
Intent intent = new Intent(presentActivity.this, MainMenuActivity.class);
startActivity(intent); 
```

# silverlight - 如何在网格中定义列定义？

> ID：11669551
> 
> 赞同：0
> 
> 时间：2012-07-26T12:43:07.183
> 
> 标签：silverlight, windows-phone-7, datagrid

我有一个固定行数的网格，但列不固定。那么如何设置列定义。有没有办法在 xaml 中编写它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:57:32.427

您有行定义和列定义：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="250" />
        <ColumnDefinition Width="150" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="2*" />
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
</Grid 
```

# java - 找出当前 Java VM 中打开了哪些网络套接字

> ID：11669554
> 
> 赞同：24
> 
> 时间：2012-07-26T12:43:15.100
> 
> 标签：java, sockets, monitoring, netty

我正在编写一个端到端测试，我的 Java 程序会释放它的所有资源——线程、服务器套接字、客户端套接字。它是一个库，因此不能通过退出 JVM 来释放资源。[测试线程的释放](https://github.com/orfjackal/jumi/blob/330b8c0e0bb16265fbe4d71588b644eeebfe3811/end-to-end-tests/src/test/java/fi/jumi/test/ReleasingResourcesTest.java)很容易，因为您可以向[ThreadGroup](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadGroup.html)询问其中的所有线程，但我还没有找到一种获取当前 JVM 正在使用的所有网络套接字列表的好方法。

**有没有办法从 JVM 获取所有客户端和服务器套接字的列表，类似于 netstat？**我在 Java 7 上使用带有[OIO的](http://static.netty.io/3.5/api/org/jboss/netty/channel/socket/oio/package-summary.html)[Netty](https://netty.io/)（即[java.net.ServerSocket](http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html)和[java.net.Socket](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html)）。该解决方案需要在 Windows 和 Linux 上运行。

我的第一个偏好是使用纯 Java 从 JVM 询问它。我试图寻找 MX Bean 或类似的东西，但没有找到。

另一种选择可能是连接到 JVM 的分析/调试 API 并询问 Socket 和 ServerSocket 的所有实例，但我不知道如何做到这一点以及是否可以在没有本机代码的情况下完成（AFAIK，[JVMTI](http://docs.oracle.com/javase/7/docs/technotes/guides/jvmti/index.html)仅限本机）。此外，它不应该使测试变慢（即使我最慢的端到端测试也只有 0.5 秒，其中包括启动另一个 JVM 进程）。

如果询问 JVM 不起作用，第三种选择是创建一个在创建时跟踪所有套接字的设计。这样做的缺点是可能会丢失创建套接字的某些位置。由于我使用的是 Netty，它似乎可以通过包装[ChannelFactory](http://static.netty.io/3.5/api/org/jboss/netty/channel/ChannelFactory.html)并使用[ChannelGroup](http://static.netty.io/3.5/api/org/jboss/netty/channel/group/ChannelGroup.html)来实现。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-27T21:48:18.400

我能够连接`java.net.Socket`并`java.net.ServerSocket`监视这些类的*所有*新实例。完整的代码可以[在源代码库](https://github.com/orfjackal/jumi/blob/ff51720444cc23d7bfc102ba07a6211cbe9b2f7a/end-to-end-tests/src/test/java/fi/jumi/test/ReleasingResourcesTest.java)中看到。以下是该方法的概述：

当实例化 Socket 或 ServerSocket 时，其构造函数中的第一件事是调用`setImpl()`实例化真正实现套接字功能的对象。默认实现是 的实例`java.net.SocksSocketImpl`，但可以通过设置自定义来覆盖[`java.net.SocketImplFactory`](http://docs.oracle.com/javase/7/docs/api/java/net/SocketImplFactory.html)它[`java.net.Socket#setSocketImplFactory`](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#setSocketImplFactory%28java.net.SocketImplFactory%29)和[`java.net.ServerSocket#setSocketFactory`](http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html#setSocketFactory%28java.net.SocketImplFactory%29)。

由于包私有的所有实现，这有点复杂[`java.net.SocketImpl`](http://docs.oracle.com/javase/7/docs/api/java/net/SocketImpl.html)，但有一点反射并不难：

```
private static SocketImpl newSocketImpl() {
    try {
        Class<?> defaultSocketImpl = Class.forName("java.net.SocksSocketImpl");
        Constructor<?> constructor = defaultSocketImpl.getDeclaredConstructor();
        constructor.setAccessible(true);
        return (SocketImpl) constructor.newInstance();
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
} 
```

SocketImplFactory 在创建时监视所有套接字的实现看起来像这样：

```
 final List<SocketImpl> allSockets = Collections.synchronizedList(new ArrayList<SocketImpl>());
    ServerSocket.setSocketFactory(new SocketImplFactory() {
        public SocketImpl createSocketImpl() {
            SocketImpl socket = newSocketImpl();
            allSockets.add(socket);
            return socket;
        }
    }); 
```

请注意，setSocketFactory/setSocketImplFactory 只能调用一次，因此您要么只需要一个测试来执行此操作（就像我有它一样），要么您必须创建一个静态单例（糟糕！）来保存该间谍。

那么问题来了，那如何判断socket是否关闭呢？Socket 和 ServerSocket 都有一个方法`isClosed()`，但它使用这些类内部的布尔值来跟踪它是否已关闭 - SocketImpl 实例没有一种简单的方法来检查它是否已关闭。（顺便说一句，Socket 和 ServerSocket 都由 SocketImpl 支持 - 没有“ServerSocketImpl”。）

值得庆幸的是，SocketImpl 引用了它所支持的 Socket 或 ServerSocket。上述`setImpl()`方法调用`impl.setSocket(this)`or ，并且可以通过调用or`impl.setServerSocket(this)`取回该引用。`java.net.SocketImpl#getSocket``java.net.SocketImpl#getServerSocket`

这些方法再一次是包私有的，所以需要一点反思：

```
private static Socket getSocket(SocketImpl impl) {
    try {
        Method getSocket = SocketImpl.class.getDeclaredMethod("getSocket");
        getSocket.setAccessible(true);
        return (Socket) getSocket.invoke(impl);
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
}

private static ServerSocket getServerSocket(SocketImpl impl) {
    try {
        Method getServerSocket = SocketImpl.class.getDeclaredMethod("getServerSocket");
        getServerSocket.setAccessible(true);
        return (ServerSocket) getServerSocket.invoke(impl);
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
} 
```

注意 getSocket/getServerSocket 可能不会在 SocketImplFactory 内部调用，因为 Socket/ServerSocket 仅在 SocketImpl 从那里返回后才设置它们。

现在有了所有必要的基础设施来检查我们的测试，无论我们想要什么 Socket/ServerSocket：

```
 for (SocketImpl impl : allSockets) {
        assertIsClosed(getSocket(impl));
    } 
```

完整的源代码在[这里](https://github.com/orfjackal/jumi/blob/ff51720444cc23d7bfc102ba07a6211cbe9b2f7a/end-to-end-tests/src/test/java/fi/jumi/test/ReleasingResourcesTest.java)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T13:20:48.467

我自己没有尝试过，但 JavaSpecialists 时事通讯提出了类似的问题：

[http://www.javaspecialists.eu/archive/Issue169.html](http://www.javaspecialists.eu/archive/Issue169.html)

在底部，他描述了一种使用 AspectJ 的方法。您可以将切入点放在创建套接字的构造函数周围，并在其中注册套接字创建的代码。

# php - PHP Web 应用程序中的各种类如何相互交互？

> ID：11669555
> 
> 赞同：1
> 
> 时间：2012-07-26T12:43:15.777
> 
> 标签：php, oop, symfony

我是 OOP 的新手，我正在学习 symfony2。这是我第一次接触 OOP。

到目前为止，我只创建了实体类和 CRUD 控制器。

但我还没有创建自己的课程。

假设我有课`User`，`ShoppingCart`并且`Product`

```
Class User {
    $shoppingCart
} 
```

* * *

```
Class Shoppingcart{
    $products
} 
```

现在添加和删除产品就可以了

但我想知道如果用户点击产品添加到购物车会发生什么。

我想知道我需要创建哪些方法才能将产品添加到购物车以及各种类应该如何交互

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:08:22.347

据我了解，这是在纯**php**中做你想做的事情的一种方法

```
<?php   
class User {
     public $cart;
     public function __construct()
     {
        $this->cart = new Cart;
     }
}
class Cart {
   protected $products = array();
   public function __construct()
   {

   }
   public function addProduct(Product $product)
   {
       $this->products[] = $product;
   }
}
class Product
{
  //TODO DEFINE PRODUCT CLASS METHODS AND PROPERTIES
} 
```

例如，使用 addproduct.php 页面上的对象

```
<?php

//Include class files into the script
require_once $_SERVER["DOCUMENT_ROOT"] . "PATH/TO/CLASS/DIR/FROM/SERVER/ROOT";

//create $product object and set properties from form post

$user = new User();
$user->cart->addProduct($product); 
```

****免责声明**** 我已经有一段时间没有写过 php 并且直接在编辑器中输入了，所以它们可能存在一些语法问题！

# python - 在python中以所需格式排列列表的字符串

> ID：11669557
> 
> 赞同：3
> 
> 时间：2012-07-26T12:43:21.077
> 
> 标签：python, list

实际上我正在使用scrapy解析一些html页面，我使用了xpath并从一些html标签中获取了一些地址，结果如下所示

```
result = ["Hno 4-50, Plot No 301, Swathi Pooja Homes,Beside Rajadhani Theater, Vikas Nagar,Dilsukhnagar,Hyderabad","Mr Sravan"] 
```

我想加入字符串，所以我在下面做了

```
final_result = ','.join(result) 
```

并得到以下结果

```
final_result = "Hno 4-50, Plot No 301, Swathi Pooja Homes,Beside Rajadhani Theater, Vikas Nagar,Dilsukhnagar,Hyderabad,Mr Sravan" 
```

在这里，我们可以观察到`final_result`（地址）`Mr Sravan`中的名称在末尾，但通常名称应该在任何地方的任何联系人中的门或门牌号码之前，对吗？所以无论加入后列表中的字符串数量如何，我应该在开始时得到名字，有什么办法可以做到这一点？谁能告诉我该怎么做？

**编辑代码：**

目前我一次解析四个 url，所以当我使用 xpath（或相关）并从不同的 url 获取地址并且结果（例如）如下每个 url

```
final_result = ['Addess_2','Newyork', 'Mr T.Jamal(Name)']
               ['Mr T. Jamal(Name)', 'Addres_1','Extra info'] 
               ['Addres_3','Mr T. Jamal(Name)','Extra info','Related scope'] 
               ['Addres_4','Extra info','Mr T. Jamal(Name)','Related info'] 
               ['Addres_5','Extra info','Related info']  # No name
               ['Addres_6','Extra info1','Related info1']  # No name 
```

在这里，对于解析地址中的所有 url，想要编写适用于上述所有列表的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:45:39.823

你可以这样做：

```
final_result = ','.join(result[-1:] + result[:-1])

>>> 'Mr Sravan,Hno 4-50, Plot No 301, Swathi Pooja Homes,Beside Rajadhani Theater, Vikas Nagar,Dilsukhnagar,Hyderabad' 
```

编辑：根据您的评论，如果您知道该名称位于 rank `i`，则可以这样做：

```
result = ["is", "now", "the name", "at", "first", "place", ":)"]
i = 2
' '.join(result[i:i+1] + result[:i] + result[i+1:])
'the name is now at first place :)' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:45:57.083

像这样的东西怎么样：

```
 final_result = result[-1] + ', ' + ''.join(result[:-1]) 
```

产生：

```
Mr Sravan, Hno 4-50, Plot No 301, Swathi Pooja Homes,Beside Rajadhani Theater, Vikas Nagar,Dilsukhnagar,Hyderabad 
```

-- **更新**--

这应该可以在原始列表中的任何位置找到“先生”字符串，并使其按您想要的方式工作。

```
rs = ','.join(result).split(',')
idx = [i for i,j in enumerate(rs) if j.strip().startswith('Mr')][0]
final_result = (rs[idx] +',' + ','.join(rs[1:idx] + rs[idx+1:])).strip()
print final_result 
```

这适用于 OP 在更新帖子中提供的 4 个测试字符串

-- **UPDATE 2** OP 更改了问题，因此“先生”可能不在列表中 --

此代码将检测 Mr 是否在列表中并将其移至前面。它还将检测它是否不在列表中并避免索引超出范围的情况。请参阅下面的输出。

测试字符串：

```
result = ['Addres_4','Extra info','Mr T. Jamal(Name)','Related info'] 
result = ['Addres_4','Extra info','T. Jamal(Name)','Related info'] 
```

代码：

```
rs = ','.join(result).split(',')
idx = [i for i,j in enumerate(rs) if j.strip().startswith('Mr')]

if len(idx) == 1:  # we found "Mr" in the list
    idx = idx[0]
    final_result = (rs[idx] +',' + ','.join(rs[1:idx] + rs[idx+1:])).strip()
else: # We didn't find "Mr" in the list .. adjust output to your needs
    final_result = (','.join(rs).strip())

print final_result 
```

分别产生：

```
Mr T. Jamal(Name),Extra info,Related info
Addres_4,Extra info,T. Jamal(Name),Related info 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T12:57:25.957

```
def name_first(alist):
    """Get the part of the list that begins with 'Mr', then the rest."""
    for i, el in enumerate(alist):
        if el.startswith('Mr'):
            yield alist.pop(i)
            break
    for el in alist:
        yield el 
```

# android - 我希望能够将数据从 kinect 发送到 android 应用程序

> ID：11669561
> 
> 赞同：3
> 
> 时间：2012-07-26T12:43:23.847
> 
> 标签：android, kinect

我正在开发 android sdk 和 kinect sdk 上的双重应用程序。我希望能够让 kinect 将数据发送到智能手机应用程序。然后，智能手机应用程序将根据 kinect 数据向用户发出通知。智能手机应该能够（希望）打开/关闭 kinect 以及一些其他基本命令。如何让 kinect 和智能手机应用程序通信？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:26:09.877

很酷的概念，我是 Kinect 的忠实粉丝（在 Windows 上使用时；我认为这是 Xbox 的噱头）。

对于初学者，您不能直接从智能手机与 Kinect 交互。Kinect 需要 USB 连接、外部电源和具有 2.6 GHz 双核处理器的 Windows 7 机器。所以现在它变成了连接在 Windows 7 机器上运行的服务器应用程序和 Android 手机上的客户端应用程序的问题。有几种方法可以做到这一点（USB、WiFi、TCP），但它们都在某处受苦。USB 会将您连接到计算机，从而使智能手机应用程序变得多余（只需使用计算机，因为您已经连接到它）。如果您打算发送大量数据，WiFi 可能是最佳选择，但只能在您家中使用。TCP（或 UDP）可能适用于某些应用程序，但如果您开始尝试流式传输视频，您的手机会讨厌您。

我假设您不会使用数据量大的应用程序（视频流到手机）。如果您只是想从 Kinect 向 Android 发送通知（例如，将 Kinect 用作​​运动检测器并在有人进入房间时向 Android 发送消息），类似于短信更新，您当然可以拉开 TCP/IP 解决方案，可能很容易。您将使用 Kinect 在 Windows 7 计算机上设置一个[简单的 TCP 服务器](http://www.switchonthecode.com/tutorials/csharp-tutorial-simple-threaded-tcp-server)，然后使用[TCP 请求连接到它](http://www.helloandroid.com/tutorials/simple-connection-example-part-ii-tcp-communication)（查看客户端代码）。完成设置后，就可以轻松地在 Kinect 和智能手机应用程序之间发送消息。对于初学者，只需尝试发送一些快速消息即可。服务器说“你好”，Android 回复“我讨厌你的窗口”等，并确保消息正在到达目的地（TCP 几乎可以保证它们会）。在你运行之后，只需围绕它构建你的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:24:05.773

如果您愿意避免使用官方的 Microsoft SDK，点云库（建立在 OpenNI 之上）有一个[框架和教程用于流式传输](http://pointclouds.org/documentation/tutorials/mobile_streaming.php#mobile-streaming)。

# delphi - 使用 google map API 打开 *.map 或其他地图文件（离线地图）

> ID：11669564
> 
> 赞同：1
> 
> 时间：2012-07-26T12:43:35.173
> 
> 标签：delphi, google-maps-api-3, offline

是否可以使用谷歌地图 API 在本地计算机（离线）打开地图文件？如果是，如何？我在delphi中编写了一个应用程序。它在地图上显示公司的汽车。但现在我们需要地图离线。我有 *.map 文件，可能我可以从互联网上找到其他地图文件。我根本不知道从哪里开始。我需要做什么？tnx。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T20:23:54.663

谷歌地图通过将数据从谷歌服务器异步传输到用户计算机来工作。因此，如果您处于离线状态，则无法与 Google 的服务器通信并检索此类信息。即使您完成存储缓存的 google 地图并离线显示，您也必须遵守[Google Maps API 服务条款](https://developers.google.com/maps/terms)。

> (b) 不得预取、缓存或存储内容。您不得预取、缓存或存储任何内容，除非您可以存储：(i) 有限数量的内容，以提高 Maps API 实施的性能，前提是您临时、安全且在不允许在服务之外使用内容的方式；(ii) Maps API 文档明确允许您存储的任何内容标识符或密钥。例如，您不得使用内容创建独立的“地点”数据库或其他本地列表信息。

作为替代方案，您可以使用[`Google Static Maps API V2`](https://developers.google.com/maps/documentation/staticmaps/)可以检索图像的服务，该图像可以保存到文件中，基本上您需要像这样构建一个 URI

> [http://maps.google.com/maps/api/staticmap?center=40.714728,-73.998672&zoom=12&size=400x400&sensor=false](http://maps.google.com/maps/api/staticmap?center=40.714728,-73.998672&zoom=12&size=400x400&sensor=false)

并使用 GET 将响应保存在文件中，查看本文以获取 delphi 示例[`Using Google maps (Static Maps) without TWebBrowser`](http://theroadtodelphi.wordpress.com/2010/08/11/using-google-maps-static-maps-without-twebbrowser/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T03:47:54.997

谷歌地图 API 与谷歌服务器在线交互。没有办法使用地图 API。如果它是一个 Web 界面，您可以尝试查看 HTML5 项目，这些项目已将地图以坐标分辨率离线移植。

[这是您与离线存储谷歌地图数据相关的常见问题解答](https://developers.google.com/maps/faq#tos_staticmaps_reuse)

我对 HTML5 项目的建议，你可以看看[这个](http://www.webglearth.org/). 这与离线 html5 离线数据缓存相结合应该可以很好地解决您的问题。

# jquery - 使用 jQuery 将列表项附加到 MVC DropDownList

> ID：11669569
> 
> 赞同：0
> 
> 时间：2012-07-26T12:43:52.237
> 
> 标签：jquery, asp.net-mvc, razor, html.dropdownlistfor

我正在尝试使用 jQuery 将列表项动态附加到 MVC DropDownListFor。不幸的是，当我运行我的代码时没有任何反应。我使用了 console.log 来仔细检查正在生成的 html，确实如此。任何帮助，将不胜感激！

这是 jQuery

```
function formHelpers() {
jQuery.fn.addDropDownValues = function (options) {

    // Grab the class selector given to the function
    var itemClass = $(this);

    // Iterate through each element and value
    $.each(options, function (val, text) {
        itemClass.append("<option></option>").val(val).html(text);
    });
  };

}; 

$(document).ready(function () {
        formHelpers();
        $(".clrDropDown").addDropDownValues({Val1:"Yes", Val2:"No"});
    }); 
```

这是cshtml

```
<div style="float:left;margin:0 10px 0 0;">
    <table class="ntiTable">
        <tbody>

           <td nowrap class="ntiTableFirstColumn" title="This is the Crl Collaboration  field."><div class="editor-label">@Html.LabelFor(m => m.myProject.CrlCollaboration)</div></td>
           <td><div class="editor-field">@Html.DropDownListFor(model => model.myProject.CrlCollaboration, new SelectList(""), new { @class = "crlDropDown"})@Html.ValidationMessageFor(model => model.myProject.CrlCollaboration)</div></td>

        </tbody>
    </table>
</div> 
```

生成的 CSHTML

```
 <tr>
            <td class="ntiTableFirstColumn" title="This is the Crl Collaboration field." nowrap="nowrap"><div class="editor-label"><label for="myProject_CrlCollaboration">Crl Collaboration</label></div></td>
            <td><div class="editor-field"><select class="crlDropDown" data-val="true" data-val-length="The field Crl Collaboration must be a string with a maximum length of 10." data-val-length-max="10" id="myProject_CrlCollaboration" name="myProject.CrlCollaboration"></select><span class="field-validation-valid" data-valmsg-for="myProject.CrlCollaboration" data-valmsg-replace="true"></span></div></td>
 </tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:04:18.870

[http://jsfiddle.net/enbF7/4/](http://jsfiddle.net/enbF7/4/) - 用您生成的 cshtml 更新了 jsFiddle，它现在可以工作了。类“clrDropDown”拼写错误，在生成的 HTML 中拼写为“crlDropDown”。

问题出在您的 $.each() 函数中...

看起来很简单，您如何将值和文本格式化`<option>` 成`itemClass.append(<option>).val(val))`

```
 $.each(options, function(value, text) {   
        itemClass
            .append($('<option>', { value : value})
            .text(text)); 
    }); 
```

查看 jsfiddle 以查看它的实际效果，希望对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:12:53.323

虽然 mcpDESIGNS 的帖子有效（+1），但我认为他不想要一个已经可用的`select`.

我用一个新的版本更新了他的小提琴，它没有添加一个已经存在的带有预填充值的列表。

[http://jsfiddle.net/enbF7/2/](http://jsfiddle.net/enbF7/2/)

# wordpress - 从 RSS 提要 Wordpress 小部件中删除 [...]？

> ID：11669572
> 
> 赞同：-1
> 
> 时间：2012-07-26T12:44:03.993
> 
> 标签：wordpress, rss, widget

我想从我的 Wordpress 网站的 RSS 提要小部件中删除“[...]”并将其替换为“...”。

我尝试将以下内容添加到函数中：

```
function replace_ellipsis($text) {

$return = str_replace('[...]', '...', $text);
 return $return;
}
add_filter('get_the_excerpt', 'replace_ellipsis'); 
```

但是，这不会影响小部件。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T13:10:22.950

这是在 v3.4.2 中的`wp-includes/default-widgets.php`第 848 - 862 行中定义的。我可以看到的唯一可以挂钩的功能是`esc_html`，所以这就是我使用的：

```
add_filter('esc_html', 'transform_ellipsis');
function transform_ellipsis($s_html) {
    return str_replace(' [&hellip;]', '&hellip;', $s_html);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:57:55.537

它在这里说：[http](http://codex.wordpress.org/Function_Reference/the_excerpt_rss) ://codex.wordpress.org/Function_Reference/the_excerpt_rss 它与“the_excerpt_rss”挂钩，所以也许这会起作用：

```
function new_excerpt_more( $excerpt ) {
    return str_replace( '[...]', '...', $excerpt );
}
add_filter( 'the_excerpt_rss', 'new_excerpt_more' ); 
```

如果这不起作用，请参阅此页面了解更多方法：[http ://codex.wordpress.org/Function_Reference/the_excerpt#Remove_.5B....5D_string_using_Filters](http://codex.wordpress.org/Function_Reference/the_excerpt#Remove_.5B....5D_string_using_Filters)

# java - JLabels 中的超链接

> ID：11669576
> 
> 赞同：5
> 
> 时间：2012-07-26T12:44:11.793
> 
> 标签：java, swing, hyperlink, jlabel

这是我在名为 Test2 的项目中名为 test2 的包中名为 Test2.java 的文件中的代码；

```
package test2;

import javax.swing.JFrame;

public class Test2 {
    public static void main(String[] args) {
    JFrame mainWindow = new HtmlWindow("<html>"
            + "<a href=\"http://stackoverflow.com\">"
            + "blah</a></html>");
        mainWindow.setVisible(true);
    }
} 
```

在同一个包中，我在一个名为 HtmlWindow.java 的文件中有此代码；

```
package test2;

import java.awt.BorderLayout;
import java.awt.Container;
import javax.swing.JFrame;
import javax.swing.JLabel;

class HtmlWindow extends JFrame {
    public HtmlWindow(String refreshGrid) {
        super("blah");
        setSize(300, 100);
        Container content = getContentPane();
        String labelText = refreshGrid;
        JLabel coloredLabel = new JLabel (labelText, JLabel.CENTER); 
        content.add(coloredLabel, BorderLayout.NORTH);

    }

} 
```

当我运行该项目时，我会在预期的位置看到一个带有“blah”一词的窗口，带有蓝色和下划线，但是当我将鼠标悬停在该单词上时光标不会改变，当我单击它时也不会发生任何事情。

我的问题如下；

*   是否可以在 jLabels 中放置超链接？
*   如果是这样，是我做错了什么，还是程序运行不正常？
*   如果没有，有什么好的选择？我不使用 JButtons 的原因是，最终我想创建一个包含任意数量超链接的网格，并且我希望超链接是图像，虽然 JButtons 可以在它们上面有图像，但我不希望超链接看起来像“按钮”。我想我可以使用不可编辑的 JEditorPane 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T12:50:08.393

Swing 不是一个功能齐全的浏览器。它支持包含链接的简单 HTML，但不会自动更改光标样式。据我所知，您必须以编程方式执行此操作，即将鼠标侦听器添加到您的标签并在鼠标悬停在标签上时更改光标样式。显然，您可以编写自己的类`LinkLabel`来实现此逻辑，然后在每次需要时使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T12:55:45.490

似乎仅仅通过一个超链接，您就可以获得您通常的网络浏览器行为。根据网上的例子，通常做的是实现一个`ActionListener`on the `JLabel`and call `Desktop.getDesktop().browse(new URI("..."));`。

此调用的问题在于它似乎不适用于所有操作系统。你可以做的是看看你是否可以从命令行在浏览器中打开链接，如果你能做到这一点，你应该能够通过使用类中的`exec`方法来做你需要的事情`Process`。但是，这很可能取决于平台。

话虽如此，我认为应该使用标签来描述文本（尽管我认为在看到链接时，用户就知道会发生什么，所以我认为在这种情况下，我们可以将其称为一个例外）。如果您想拥有一个触发和操作的组件，您可以使用 a`JButton`代替。

# php - 如何使用 ajax 提交内联编辑？

> ID：11669586
> 
> 赞同：0
> 
> 时间：2012-07-26T12:44:41.570
> 
> 标签：php, jquery, ajax

如何使用 ajax 提交此表单。

现在它从 mysql 查询创建一个表。当您单击一行后面的编辑按钮时，Javascript 会使所有单元格输入=文本。

现在，当您单击该行末尾的“提交”按钮时，我希望它通过 ajax 将编辑的数据提交到 mysql。

我不明白从哪里获取需要使用 ajax 发布的数据。

```
<script type="text/javascript" src="js/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.9.custom.min.js"></script>
<script type="text/javascript" src="js/jquery.qtip-1.0.0.min.js"></script>
<script type="text/javascript">

$(document).ready(function(){
      $(".edit").click(function(){
          var tr = $(this).closest("tr");
          var submit = "<input type='submit' name='Submit' value='Submit' />";

          tr.find(".td").each(function(){
              var name = $(this).attr("title");
              var value = $(this).html();
              var input = "<input type='text' name='"+name+"' value='"+value+"' />";
              $(this).html(input);
          });

          tr.find(".button").html(submit);

      });
  });

// this is the id of the submit button
$(".button").click(function() {    

$.ajax({
       type: "POST",
       url: "index.php?page=update_mysql",
       data: $("#change").serialize(), // serializes the form's elements.
       success: function(data)
       {
           alert(data); // show response from the php script.
       }
     });

return false; // avoid to execute the actual submit of the form.
});
</script>

<form id="change" method="post" action="#">
    <table>

<?PHP
$sql="SELECT * FROM names";
$result = mysql_query($sql)or die(mysql_error());
  WHILE ($row = mysql_fetch_array($result, MYSQL_ASSOC))  {
        echo '<tr class="row">';
            echo '<td class="td" title="id">'.$row["id"].'</td>';
            echo '<td class="td" title="first_name">'.$row["first_name"].'</td>';
            echo '<td class="td" title="last_name">'.$row["last_name"].'</td>';
            echo '<td class="button" title="button"><button class="edit">Edit</button></td>';
        echo '</tr>';
  }
?>

    </table>
</form> 
```

update_mysql.php 看起来像这样：

```
<?php
include 'firewall.php';
if ($_POST['Submit'] == "Submit") {
$id = $_POST['id'];
$first_name = $_POST['first_name'];
$last_name = $_POST['last_name'];
$sql_edit = "UPDATE names SET first_name = '$first_name', last_name = '$last_name' WHERE id = '$id'";
$result_edit = mysql_query($sql_edit) or die(mysql_error());

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:58:24.850

试试这个。

```
$(document).ready(function(){
  $(".edit").click(function(){
    var tr = $(this).closest("tr");

    tr.find(".td").each(function(){
      var name = $(this).attr("title");
      var value = $(this).html();
      var input = "<input type='text' name='"+name+"' value='"+value+"' />";
      $(this).html(input);
    });

    var submit = "<input type='button' name='Submit' value='Submit' />";
    tr.find(".button").html(submit);

  });
});

$(".button input[type=button]").live('click', function() {
  var data = $('form#change').serialize();
  // post data using ajax                                                                                                                                                                         
  $.ajax({
    type: "POST",
    url: "index.php?page=update_mysql",
    data: data,
    success: function(data) {
      alert(data); // show response from the php script.                                                                                                                                          
    }
  });
}); 
```

**注意**：我已将提交按钮的“type”属性更改为“type='button'”。这不会触发浏览器的默认提交。同一个按钮必然会收集表单数据并使用ajax提交。

快乐编码。

编辑：

它会将您带到“index.php?page=my_page#”，因为您单击`<input type="submit">`. 你还没改成`<input type="button">`？当它不存在提交表单时，您不需要提交按钮。还有其他非提交按钮可以绑定 javascript 处理程序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T12:51:05.907

您可以使用[jquery.serialize()](http://api.jquery.com/serialize/)：

```
var data = $('form').serialize(); 
```

# xml - .net 紧凑框架反序列化

> ID：11669592
> 
> 赞同：0
> 
> 时间：2012-07-26T12:44:59.410
> 
> 标签：xml, serialization, compact-framework, custom-attributes

我有一个用 ReadOnly 属性装饰的 .net 4 类。我正在尝试在 .NET Compact 3.5 项目中序列化此类，但出现错误：“反映类型 IpSettings 时出现错误”据我所知 .NET CF 不包含任何自定义属性，但我不需要序列化这个属性。有没有办法跳过属性序列化？谢谢，亚历克斯

```
公共类 IpSettings
    {
        [只读（真）]
        公共字符串 IP { 获取；放; }

 `public string Mask { get; set; }

    public string Gateway { get; set; }

    public string DNS1 { get; set; }

    public string DNS2 { get; set; }

}` 

var serializer = new System.Xml.Serialization.XmlSerializer(typeof(IpSettings));

            回答 #1

赞同：0

时间：2012-07-26T16:30:41.427

我发现在尝试了解如何为 Compact Framework 解决问题时，我经常需要重新考虑如何处理问题。

考虑类似下面的代码。它仍然允许您的字符串`IP`值是*只读*的：

```
public class IpSettings
{

    private string ip;

    public IpSettings()
    {
    }

    public IpSettings(string ipAddress)
    {
      ip = ipAddress;
    }

    public string IP { get { return ip; } }

    public string Mask { get; set; }

    public string Gateway { get; set; }

    public string DNS1 { get; set; }

    public string DNS2 { get; set; }

    public static IpSettings Load() {
      var ipSetting = new IpSettings();
      // code to load your serialized settings
      ipSettings.ip = // some value you just read
      return ipSettings;
    }

} 
```

作为程序员，这将为您在类中提供灵活性，同时仍保持字段的*只读*属性`IP`。

            回答 #2

赞同：0

时间：2012-07-26T12:55:55.320

您可以通过 .NET CF 中的属性控制 xml 序列化。要让序列化系统忽略某个属性，可以使用 XmlIgnore 属性对其进行修饰：

```
public class IpSettings
{

    [System.Xml.Serialization.XmlIgnore]
    public string IP { get; set; }

    public string Mask { get; set; }

    public string Gateway { get; set; }

    public string DNS1 { get; set; }

    public string DNS2 { get; set; }

} 
```

```

# django - 在 mac 上安装 uWSGI 时出错

> ID：11669594
> 
> 赞同：27
> 
> 时间：2012-07-26T12:45:05.183
> 
> 标签：django, uwsgi

我需要 uWSGI 来运行 django 项目。因此，当我尝试安装 uWSGI 时，它给了我一个错误消息“例外：您需要 C 编译器来构建 uWSGI”。但是mac自带gcc编译器。

我已经从“ [http://projects.unbit.it/uwsgi/wiki/WikiStart#Getit](http://projects.unbit.it/uwsgi/wiki/WikiStart#Getit) ”下载了 uWSGI，并尝试通过命令“python setup.py install”进行安装

这是我在安装 uWSGI 时遇到的错误

```
running install
using profile: buildconf/default.ini
detected include path: ['/usr/local/include', '/Developer/usr/llvm-gcc-4.2/lib/gcc/i686-apple
darwin11/4.2.1/include', '/usr/include', '/System/Library/Frameworks', '/Library/Frameworks']
Traceback (most recent call last):
  File "setup.py", line 98, in <module>
    distclass=uWSGIDistribution,
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/core.py",
line 152, in setup
    dist.run_commands()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py",
line 953, in run_commands
    self.run_command(cmd)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/dist.py",
line 972, in run_command
    cmd_obj.run()
  File "setup.py", line 61, in run
    conf = uc.uConf(get_profile())
  File "/Users/jay/Downloads/Softwares/Work/uwsgi-1.2.4/uwsgiconfig.py", line 340, in __init__
    raise Exception("you need a C compiler to build uWSGI")
Exception: you need a C compiler to build uWSGI 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-04T17:30:58.400

gcc already installed, just export CC=gcc will be ok.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-18T21:09:29.270

distutils 可能返回类似“gcc-4.2”而不是普通的旧“gcc”。

使用 sudo 等，您可能想要执行以下操作：

```
sudo CC=gcc pip install uwsgi 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-16T14:14:47.087

安装命令行工具

```
$xcode-select --install 
```

然后运行

```
$pip install uwsgi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-06T14:23:45.657

在您的 Mac 中安装 Xcode，而不是在 Xcode 首选项中选择命令行工具。它通过 pip install uwsgi 为我工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-16T11:06:09.397

首先安装 gcc 编译器

```
xcode-select --install 
```

# clojure - 使用热交换代码的 clojure 网络应用程序

> ID：11669604
> 
> 赞同：6
> 
> 时间：2012-07-26T12:45:22.540
> 
> 标签：clojure

我正在考虑在 clojure 中编写一个网络应用程序，它可以在不重新启动或丢失状态的情况下自行更新。

我看过一些文章，其中 Clojure 应用程序可以执行所谓的代码热交换。这意味着他们可以在运行时更新自己的功能。这在网络服务器上执行是否安全？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T13:47:30.483

如果可能的话，要对代码进行热插拔是很棘手的。这也取决于变更集和正在运行的应用程序。

问题：

*   旧的变量可能会乱扔命名空间并导致微妙的冲突、错误
*   多个变量的重新定义不是原子的

如果您重新启动应用程序，命名空间中可能会有旧的变量不存在，但是如果您只是重新定义一些功能并保持应用程序运行而不重新启动，则会产生干扰。

另一个问题是原子性：重新定义多个函数，即更改多个变量不是原子的。如果您在一个或多个命名空间中更改某个其他命名空间中的代码所依赖的函数，则使用新代码重新加载命名空间不是原子的。

一般来说，你最好

1.  让代理保留请求，直到您的应用重新启动
2.  启动与“旧版本”并行的新应用程序实例，并在新版本准备好处理请求后使用代理从新版本切换

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T15:08:05.010

Erlang 中的 OTP 应用程序支持这一点。基本上，它将启动新版本的应用程序并开始向新版本的应用程序发送请求。它将使旧版本保持活动状态，直到完成处理请求然后将其关闭。

# c# - WCF GridView 分页和缓存

> ID：11669609
> 
> 赞同：1
> 
> 时间：2012-07-26T12:45:38.317
> 
> 标签：c#, asp.net, wcf

有没有办法根据用户/连接缓存用户请求的数据。我的情况是我使用分页在 ASP.NET Gridview 中显示从 WCF 返回的数据。gridview 分页一次只显示 10 个项目。每当单击下一页时，都会再次调用该服务（这需要时间）。每次调用后，WCF 连接都会关闭。有没有办法解决这个问题？我阅读了 WCF ASP.NET 缓存机制，该机制缓存函数调用数据，并在一定时间后过期。我的主要内容是每个用户/调用缓存，例如一次返回 10 个项目，而无需为每 10 组数据再次调用长时间运行的函数。有办法吗？

基本上是第一次调用该函数并获得 100 个项目，然后一次返回 10 个，而无需再次运行该函数（获得 100 个项目）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:53:12.613

我相信 ASP.NET Gridview 总是进行回发，这会导致每次用户更改页面时都会调用函数。但我可能被某人证明是错误的。

话虽如此，这可能不是您的最佳解决方案。但是您可以避免在您的场景中使用 ASP.NET Gridview。当您运行 WCF 调用并返回 100 个项目时，您将它们作为存储在内存中的 JSON 文件保存在客户端，然后使用 jQuery 或其他形式的 javascript 使用户能够浏览页面而无需进行另一个函数调用。

**已编辑**

这可能对您有用，可以帮助您在客户端进行分页，而无需多次重复调用服务器
[http://www.smallworkarounds.net/2009/02/jquery-aspnet-how-to-implement.html](http://www.smallworkarounds.net/2009/02/jquery-aspnet-how-to-implement.html)

# c - 在 Lua 中注册相同签名的 C 函数

> ID：11669611
> 
> 赞同：3
> 
> 时间：2012-07-26T12:45:40.687
> 
> 标签：c, lua

假设我们有许多相同签名的 C 函数，我们想将它们注册到 Lua。例如，每个函数看起来像这样：

```
void foo(int n)
{
   // do some work
} 
```

我们可以通过以下方式注册它们：

```
int wrap_foo(Lua_State *l)
{
   int x = lua_tonumber(l, 1);
   foo(x);
   return 0;
}

lua_pushcfunction(l, wrap_foo);
lua_setglobal(l, "foo"); 
```

问题是：如何实现以下功能以避免重复代码。

```
void register(Lua_State *l, const char *name, void (*f)(int)); 
```

可能，可以使用预处理器宏（仅限编译时）来完成。有没有更优雅的方式？我更喜欢没有任何外部绑定库的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T18:50:41.577

你不能命名它`register`，因为那是一个关键字，但如果我们称它为`register_wrapper`，我们可以像这样实现 James McLaughlin 的建议：

```
// wrapper for a C function taking a single number argument
// the C function is bound to this wrapper as an upvalue
int wrapper(lua_State *L)
{
    int x = lua_tonumber(L,1);
    void (*wrapped)(int) = (void (*)(int)) lua_touserdata(L, lua_upvalueindex(1));
    wrapped(x);
    return 0;
}

// bind a C function to our wrapper function
void register_wrapper(lua_State* L, const char* name, void(*wrapped)(int))
{
    lua_pushlightuserdata(L, wrapped);
    lua_pushcclosure(L, wrapper, 1);
    lua_setglobal(L, name);
}

int main()
{
    lua_State *L = luaL_newstate();
    register_wrapper(L, "foo", foo);
    register_wrapper(L, "bar", bar);
    ... 
```

# unix - 根据创建/修改日期在 unix 中查找文件

> ID：11669612
> 
> 赞同：4
> 
> 时间：2012-07-26T12:45:43.257
> 
> 标签：unix

如何在上个月创建/修改的 unix 服务器上查找文件？

例如。如果当前月份是 7 月，则应显示在 6 月创建/修改的文件列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:21:42.323

```
monthToFind=`date -d "1 months ago" "+%Y-%m"`
find . -printf "%TY-%Tm %p\n" | egrep "^$monthToFind " | sed "s/^$monthToFind //g" 
```

这将比在 find 中使用时间范围要慢。但是时间范围很难确定，很快就会失效，甚至可能在命令执行的时候。

不幸的是，这将错过上个月修改的文件，而本月也修改了这些文件。我不知道确定这些文件的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T12:54:18.493

一种方法是执行该命令。

*   `ls -laR | grep monthName`哪里`montName`可能是一月，二月，三月，等等...（记住将工作目录更改为您感兴趣的目录。另请注意，此方法是递归的，因此将检查所有子目录

有了这个，您还可以检索所有文件权限等等......

我相信这会是更好的方法（如果他们跳进我的脑海，我会编辑这篇文章）但因为我在喝咖啡休息时间，所以我发现这更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T18:05:50.390

为了查找上个月修改过的文件，您需要使用`find`设置范围，例如：

```
cd /  (if you are wanting to start from the root)
find . -type f -mtime +26d -mtime -56d -print 
```

您应该调整您的范围以包括您希望包括的日期。

祝你好运！

# ios - Writetourl 不起作用

> ID：11669622
> 
> 赞同：2
> 
> 时间：2012-07-26T12:46:20.803
> 
> 标签：ios, objective-c, cocoa-touch

我已经尝试了一周让 writeToUrl 工作，但没有......什么都没有。我只是想从 iPhone 应用程序更新我服务器上的文件。这是代码：

```
NSURL *url = [NSURL URLWithString:@"http://user:pw@192.168.120.167/test.txt"];
NSString *teststring = @"it works";

if ([teststring writeToURL:url atomically:YES encoding:NSASCIIStringEncoding error:nil]) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle: @"Status" message: @"Yessss" delegate: self cancelButtonTitle: @"Close" otherButtonTitles: nil];    
    [alert show];
    [alert release];
}
else {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle: @"Status" message: @"Noooooo" delegate: self cancelButtonTitle: @"Close" otherButtonTitles: nil];    
    [alert show];
    [alert release];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-01T01:30:42.107

我使用完全相同的文件路径从 writeToURL 切换到 writeToFile，然后它突然起作用了。似乎 writeToURL 中可能存在错误。这是在 iOS 7.1 上测试的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T15:11:40.500

您只能写入本地文件。请参阅[文档](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSData_Class/Reference/Reference.html)：

> 由于目前只支持 file:// URL，所以这个方法和 writeToFile:options:error: 没有区别，除了第一个参数的类型。

# c++ - 如何获取指向 std::get<0,tuple 的指针 >）？

> ID：11669630
> 
> 赞同：3
> 
> 时间：2012-07-26T12:46:33.233
> 
> 标签：c++, c++11, tuples, function-pointers

我知道 std::get 已重载。而且我知道要提取重载，我需要强制转换为特定的签名。假设我需要一个指向 std::get 的指针，它将非常量引用从 std::tuple& 返回到第一个元素。以下是我的众多尝试之一（未编译）：

```
auto f = static_cast<
    int& (*)(std::tuple<int,int>&) noexcept
>(
    &std::get<(size_t)0u, std::tuple<int,int>>
); 
```

我应该如何指定这个 static_cast？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T12:54:21.953

元组 get 的签名是（直接取自 libstdc++）：

```
 template<std::size_t __i, typename... _Elements>
    constexpr typename __add_ref<     
                      typename tuple_element<__i, tuple<_Elements...>>::type 
                    >::type 
    get(tuple<_Elements...>& __t) noexcept 
```

因此，要获取的模板参数是元组的不同类型，而不是元组，因此您从中获取地址的函数应该是：

```
&std::get<(size_t)0u,int,int> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T12:52:47.243

您是否需要指向实际 std::get 的指针或具有相同行为的任何函数？如果是这样，您可以将其包装在 lambda 中：

```
auto f = [](std::tuple<int,int>& tuple) -> int&
{
    return std::get<0>(tuple);
} 
```

# php - 以时差为条件，仅在行尚未开始时显示特定消息

> ID：11669633
> 
> 赞同：1
> 
> 时间：2012-07-26T12:46:35.733
> 
> 标签：php

这些是数据库行的输入

```
$current              2012-07-26 15:30:00
1st $row['start']     2012-07-26 14:00:00
2nd $row['start']     2012-07-26 17:00:00 
```

当我以上述当前时间运行以下代码时，我正确地得到了第二行的“即将开始”，但我也错误地在它*已经*开始的第二行上得到了它。

如何编辑此代码以仅将“即将开始”消息返回给将在接下来的两个小时内开始的*行*？

```
$diff = strtotime($row['start']) - strtotime($current);
if ($diff < 7200) {
    echo 'Starts soon';
} else if ($diff <= 0) {
    echo 'Started';
} else {
    echo 'Starts';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:49:54.017

所有`$diff`匹配您的第二个`if`子句 ( `< 0`) 已经被第一个`if`子句 ( `< 7200`) 捕获，并且永远不会到达该子句中的第二个`if`子句`else`。

作为一种解决方案，请按以下方式重构您的代码：

```
$diff = strtotime($row['start']) - strtotime($current);
if ($diff <= 0) {
    echo 'Started';
} else if ($diff < 7200) {
    echo 'Starts soon';
} else {
    echo 'Starts';
} 
```

**编辑**

关于评论中的问题：

如果您指的是日历日，则可以使用以下代码：

```
if ( date( 'zY', $current ) == date( 'zY', $row['start'] ) {
  // same day
} else {
  // different days
} 
```

如果您的意思只是两个时间相隔不超过 24 小时，请使用

```
if ( abs($current - $row['start']) < 24 * 60 * 60 ) {
  // same day
} else {
  // different day
} 
```

# iphone - Apple Inc. 使用 OpenGL ES

> ID：11669638
> 
> 赞同：-6
> 
> 时间：2012-07-26T12:46:54.407
> 
> 标签：iphone, ios, opengl-es

Apple 将**OpenGL ES 1.0/1.1用于哪些目的，以及****OpenGL ES 2.0**用于哪些其他目的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T12:49:42.690

您可以在支持它的设备上使用 OpenGL ES 2.0，旧型号的 iPhone（原始和 3G）和 iPod Touch（1g 和 2g）不支持 OpenGL ES 2.0。

OpenGL ES 1.1 适用于所有设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:50:24.557

由于处理器限制，原始 iPhone 支持 OpenGL ES 1.0/1.1。随着处理器在设备中的发展，OpenGL ES 2.0 可供开发人员使用。我相信 OpenGL ES 2.0 的截止日期是 iPhone 3GS。

# android - Android：后退按钮不会杀死主进程

> ID：11669641
> 
> 赞同：1
> 
> 时间：2012-07-26T12:47:00.913
> 
> 标签：android, button, back

我在 android 的活动中使用静态变量（它不是主要活动）。但是当我进入主要活动并按下后退按钮时，静态值保持不变。后退按钮不会终止主进程。为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T14:20:21.470

使用后退按钮会破坏*活动*，而**不是***应用程序*。所有活动都是在 Dalvik VM 中运行的应用程序的一部分。*应用程序*仍然存在，正在运行（即使所有活动都已被破坏），直到系统决定它需要资源并终止进程。

因此，只要进程/应用程序正在运行，您的静态成员就会保留在内存中。

如果您尝试运行一些内存密集型应用程序或使用某些任务管理器关闭正在运行的应用程序，您可能会看到静态值重置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:48:34.040

试试这个，

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event)
    {
        if ((keyCode == KeyEvent.KEYCODE_BACK))
        {
            finish();
            System.exit(0);
        }
        return super.onKeyDown(keyCode, event);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T12:52:25.310

用户按下后退按钮以离开主活动并不能保证该活动将被销毁。它只是将您的 UI（活动）移动到不被看到。请参阅[https://developer.android.com/reference/android/app/Activity.html](https://developer.android.com/reference/android/app/Activity.html)和[https://developer.android.com/training/basics/activity-lifecycle/index.html](https://developer.android.com/training/basics/activity-lifecycle/index.html)。

更新：

下面是第二个网页的一些文本片段： 图 1 中的文本：“当用户离开您的活动时，系统调用 onStop() 来停止活动 (1)。如果用户在活动停止时返回，系统会调用 onRestart() (2)，紧接着是 onStart() (3) 和 onResume() (4)。请注意，无论哪种情况导致 Activity 停止，系统总是在调用 onStop() 之前调用 onPause()。”</p>

并且“注意：因为系统在停止时会将你的 Activity 实例保留在系统内存中，……”</p>

并且：“当您的活动收到对 onStop() 方法的调用时，...... 一旦您的活动停止，如果需要恢复系统内存，系统可能会破坏实例。在极端情况下，系统可能会简单地终止您的应用程序进程而不调用活动的最终 onDestroy() 回调，...。“</p>

以上所有内容都表明，当用户离开您的活动（通过您场景中的后退按钮）时，它不一定被破坏。它只是最初停止。

# ios - 如何从 UIButton 操作方法获取 UITableViewCell 对象？

> ID：11669645
> 
> 赞同：2
> 
> 时间：2012-07-26T12:47:17.737
> 
> 标签：ios, uitableview, uibutton

我有一个 UITableView，我在其中添加了一个 UIButton 作为每个单元格的附件视图。请注意，我将按钮的标签设置为当前行以供将来使用。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...

    if(cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

        cellButton = [UIButton buttonWithType:UIButtonTypeCustom];
        cellButton.frame = CGRectMake(0, 0, 30, 30);  

        [cellButton setBackgroundImage:[UIImage imageNamed:@"cellButton.png"] forState:UIControlStateNormal];        
        [cellButton addTarget:self action:@selector(cellButtonAction:) forControlEvents:UIControlEventTouchUpInside];

        cellButton.tag = indexPath.row;  // <= Will use this in the next method
        cell.accessoryView = cellButton;
    }

    //Load cell with row based data

    return cell;
} 
```

现在，当点击其中一个按钮时，我需要对单元格进行更改。所以我实现了 cellButtonAction 我使用标签取回单元格：

```
-(void)editCommentButtonAction:(id)sender
{
    UIButton *button = sender;
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:button.tag inSection:0];
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
    [self makeChangesToCell:cell];  
} 
```

但这似乎是一种非常迂回的方式。有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T14:16:12.757

所以假设按钮在`contentView`直接：

*   向“ `sender`”（即按钮）询问其超级视图，即单元格的 contentView

*   询问该视图`superView`，即单元格

*   向 tabview 询问此单元格的索引：

`- (NSIndexPath *)indexPathForCell:(UITableViewCell *)cell`

编辑：实际上，我现在使用一个通用的方法或函数，它只是走上超级视图，寻找一个 UITableViewCell 或 UICollectionViewCell 的“KindOf”视图。像冠军一样工作！

Swift 中的代码：

```
func containingUITableViewCell(tableView: UITableView, var view: UIView) -> (UITableViewCell, NSIndexPath)? {
while let v = view.superview {
    view = v
    if view.isKindOfClass(UITableViewCell.self) {
        if let cell = view as? UITableViewCell, let indexPath = tableView.indexPathForCell(cell) {
            return (cell, indexPath)
        } else {
            return nil
        }
    }
}
return nil 
```

}

```
func containingUICollectionViewCell(collectionView: UICollectionView, var view: UIView) -> (UICollectionViewCell, NSIndexPath)? {
    while let v = view.superview {
        view = v
        if view.isKindOfClass(UICollectionViewCell.self) {
            if let cell = view as? UICollectionViewCell, let indexPath = collectionView.indexPathForCell(cell) {
                return (cell, indexPath)
            } else {
                return nil
            }
        }
    }
    return nil
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:03:20.983

你可以用更简单的方法来做。您将使用 sender 参数获取表格视图单元格。检查以下代码。

```
-(void)editCommentButtonAction:(id)sender
{
    UIButton *button = (UIButton *)sender;
    UITableViewCell *cell = (UITableViewCell*)[button superview];
    [self makeChangesToCell:cell];  
} 
```

这里，

1.  您正在将`sender`of 类型`id`转换为`UIButton`
2.  你正在调用`superview`那个**按钮**的getter ，它会给你`UITableViewCell`
3.  做你的定制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-26T10:55:22.257

您可以按如下方式获取单元格。

```
 -(void)editCommentButtonAction:(id)sender
    {
        NSIndexPath* indexPath = 0;

        //Convert the bounds origin (0,0) to the tableView coordinate system
        CGPoint localPoint = [self.tableView convertPoint:CGPointZero fromView:sender];

        //Use the point to get the indexPath from the tableView itself.
        indexPath = [self.tableView indexPathForRowAtPoint:localPoint];
        //Here is the indexPath
        UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
        [self makeChangesToCell:cell];  
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-08T06:46:57.757

```
Hello gigahari Use the following code.  

- (void)cellStopDownloadButtonClicked:(id)sender 
{
id viewType = [sender superview];
do {
viewType = [viewType superview];
}
while (![viewType isKindOfClass:[CustomCell class]] || !viewType);
CustomCell *cell = (CustomCell *)viewType;
// use the cell
} 
```

这适用于 ios 6 和 ios 7 等所有情况。在 ios 7 中，单元格中添加了一个额外的视图（内容视图）。

如果你使用 [[sender superview] superview] 它在某些情况下会失败。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-25T01:43:37.017

我有同样的情况，问题是我的表格单元中有一个 imageView，我想获得包含我点击的 imageview 的单元格。

```
//MyCell is subclass of UITableViewCell

    if ([[[[sender view] superview] superview] isKindOfClass:[MyCell class]]) {
        MyCell *cell = (MyCell *)[[[sender view] superview] superview];
        NSIndexPath *cellIndexPath = [myTable indexPathForCell:cell];
        NSLog(@"cellIndexPath: %@  - %@",cellIndexPath, [videoURLArray objectAtIndex:cellIndexPath.row]);

    } 
```

*   [发件人视图] - imageView
*   [[sender view] superview] -- imageView 的放置位置（在这种情况下，我的 imageView 的 superview 是单元格的 contentView）
*   [[[sender view] superview] superview] --- contentView 所在的位置 -- 单元格

NSLog 部分应该打印被点击的 imageView 的正确行和部分。只需修改代码。;)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T08:41:47.750

我通常这样做的方式：

*   单元格存储给定行或索引路径的数据
*   使用方法 -didSelectSomething 或 -didSelectAtIndexPath 创建协议：
*   单元格包含对协议实例的引用，这将是您的数据源
*   将按钮操作连接到笔尖中的单元格
*   让单元格呼叫代表
*   不要忘记在 prepareForReuse 中清理单元格。将状态存储在单元格中可能会导致严重的错误，因此请务必在重用时进行清理。

标签的东西是一个真正的黑客，如果你有多个部分，它就行不通了。如果您对 nib 中的视图重新排序，发送者超级视图将中断。

对于这种特殊情况（附件视图），没有专用的表委托方法吗？

# iphone - 我想在 UIAlertView 上显示 UIProgressView

> ID：11669646
> 
> 赞同：3
> 
> 时间：2012-07-26T12:47:19.957
> 
> 标签：iphone, objective-c, ios, uialertview, uiprogressview

我想在 UIAlertView 上显示 UIProgressView 以显示文件上传的处理过程。但是我搜索了太多，并且在该链接上也找到了，但仍然无法做到这一点。[我不明白这个](http://www.scribd.com/doc/60011199/231/Progress-Alert-View)

如果有人知道最简单的方法，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-29T22:03:26.370

我在这样做时遇到了问题，最后得到了这个：

```
av = [[UIAlertView alloc] initWithTitle:@"Running" message:@"" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:nil];
progressView = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleBar];
progressView.frame = CGRectMake(0, 0, 200, 15);
progressView.bounds = CGRectMake(0, 0, 200, 15);
progressView.backgroundColor = [UIColor blackColor];

[progressView setUserInteractionEnabled:NO];
[progressView setTrackTintColor:[UIColor blueColor]];
[progressView setProgressTintColor:[UIColor redColor]];
[av setValue:progressView forKey:@"accessoryView"];

[av show]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T12:56:09.833

试试这个代码...

```
UIAlertView *av = [[UIAlertView alloc] initWithTitle:@"" message:@"" delegate:nil cancelButtonTitle:nil otherButtonTitles:nil];
UIProgressView *pv = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleBar];
pv.frame = CGRectMake(20, 20, 200, 15);
pv.progress = 0.5;
[av addSubview:pv];
[av show]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T12:51:35.140

虽然这并不能完全回答您的问题，但请尝试[MBProgressHud](https://github.com/jdg/MBProgressHUD)，这是一个内置此功能的第三方控件。Github 上提供的示例应该可以让您快速上手。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T12:55:17.570

试试这个代码。将 YES 用于活动指示器，将 NO 用于 progressView

```
- (void) createProgressionAlertWithMessage:(NSString *)message withActivity:(BOOL)activity
{
 progressAlert = [[UIAlertView alloc] initWithTitle: message
 message: @"Please wait..."
 delegate: self
 cancelButtonTitle: nil
 otherButtonTitles: nil];

 // Create the progress bar and add it to the alert
 if (activity) {
 activityView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
 activityView.frame = CGRectMake(139.0f-18.0f, 80.0f, 37.0f, 37.0f);
 [progressAlert addSubview:activityView];
 [activityView startAnimating];
 } else {
 progressView = [[UIProgressView alloc] initWithFrame:CGRectMake(30.0f, 80.0f, 225.0f, 90.0f)];
 [progressAlert addSubview:progressView];
 [progressView setProgressViewStyle: UIProgressViewStyleBar];
 }
 [progressAlert show];
 [progressAlert release];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-07T03:11:42.340

为什么不使用alerviewdelegate 方法

```
- (void)willPresentAlertView:(UIAlertView *)alertView 
```

这样做的好处是我们可以看到警报视图在屏幕上的实际大小，因为 iOS 已经预先计算了这一点，所以不需要幻数 - 或者覆盖 Apple 警告的类！

从 iOS7 开始，我记得从 Apple 那里读过一些文件，说不要硬编码任何帧大小，而是总是从应用程序中计算它们，或者类似的东西？

```
- (void)willPresentAlertView:(UIAlertView *)alertView
{
   CGRect alertRect = alertview.bounds;
   UIProgressView *loadingBar = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleBar];
   loadingBar.bounds = CGRectMake(0, 0, alertRect.width, HEIGHT_YOU_WANT);
   //  Do what ever you want here to set up the alertview, as you have all the details you need
   //  Note the status Bar will always be there, haven't found a way of hiding it yet
   //  Suggest adding an objective C reference to the original loading bar if you want to manipulate it further on don't forget to add #import <objc/runtime.h>
   objc_setAssociatedObject(alertView, &myKey, loadingBar, OBJC_ASSOCIATION_RETAIN); // Send the progressbar over to the alertview
} 
```

拉取对加载条的引用

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
```

然后使用

```
UIProgressView *loadingBar = objc_getAssociatedObject(alertView, &myKey); 
```

记得有定义

```
#import <objc/runtime.h>
static char myKey; 
```

在你的类声明的顶部

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-22T18:34:34.597

这是创建一个警报视图

UIAlertController* alert=[UIAlertController alertControllerWithTitle:@"Message" message:@"This is test" preferredStyle:UIAlertControllerStyleAlert];

现在添加文本字段

```
[alert addTextFieldWithConfigurationHandler:^(UITextField *textField)
 {
     textField.placeholder=@"Enter Text label";
     [textField setBorderStyle:UITextBorderStyleRoundedRect];
     textField.backgroundColor=[UIColor whiteColor];
 }]; 
```

并将其添加到视图中

[self presentViewController:alert animated:YES completion:nil];

# vb.net - asp.net vb如何处理非字母数字字符？

> ID：11669647
> 
> 赞同：0
> 
> 时间：2012-07-26T12:47:22.007
> 
> 标签：vb.net, csv, symbols, alphanumeric, non-alphanumeric

我正在处理许多包含人员数据的 CSV 文件，有时名称使用非字母数字字符，如 á 并且这些都成为数据表中的符号。我如何防止这个问题？我只想将所有名称保留在文件中而不进行任何更改。

谢谢，

大号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T15:09:14.287

最常见的原因是它实际上以 ISO-8859-1 编码并解释为 UTF-8。由于不太常见的原因，同样的原则也适用，也就是说，某些东西的编码与它声称的不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:57:46.503

更改数据库中的字符编码或从数据库读取时对其进行解码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:00:00.170

在处理时，您需要一个阅读器或其他东西。我建议您使用 System.Encoding.UnicodeEncoding 或 UTF32Encoding 对其进行配置。

# android - 不是从 Activity 子类获取屏幕大小

> ID：11669655
> 
> 赞同：9
> 
> 时间：2012-07-26T12:47:56.910
> 
> 标签：android, android-activity, android-view, screen-size

我有一个从活动子类开始的视图子类，如下所示：

```
this.setContentView(instanceOfMyView); 
```

在我的视图子类中，我想对屏幕大小进行一些处理，但是这里的所有人都说它应该像这样开始：

```
DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm); 
screenWidth = dm.widthPixels;
screenHeight = dm.heightPixels; 
```

但是`getWindowManager()`只能从活动子类调用的方法（我对吗？）

那么，这是个坏主意，我需要在活动中获取屏幕大小并将其用作视图构造函数中的参数，还是有一种方法可以在视图子类中获取屏幕大小？也许，只需要以某种方式获取视图类中活动实例的链接？

提前致谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-26T12:52:20.317

是的，有一种方法，如果您可以将上下文对象传递给您的非活动类，

```
 int width= context.getResources().getDisplayMetrics().widthPixels;
   int height= context.getResources().getDisplayMetrics().heightPixels; 
```

您不需要活动对象本身。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T12:56:14.057

```
DisplayMetrics metrics = getBaseContext().getResources().getDisplayMetrics();         
    final int w = metrics.widthPixels;
    final int h = metrics.heightPixels; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-12T14:27:28.127

这里的其他答案不会给你屏幕分辨率。

这是你应该如何做的：

```
@SuppressLint("ObsoleteSdkInt")
@JvmStatic
fun getScreenResolution(context: Context, naturalResolution: Boolean = false): Point {
    val screenResolution = Point()
    val display = getDisplay(context)!!
    @Suppress("DEPRECATION")
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
        display.getRealSize(screenResolution)
    } else display.getSize(screenResolution)
    if (naturalResolution) {
        val screenNaturalOrientation = getScreenNaturalOrientation(context)
        if ((screenNaturalOrientation == Configuration.ORIENTATION_PORTRAIT && screenResolution.x > screenResolution.y)
                || (screenNaturalOrientation == Configuration.ORIENTATION_LANDSCAPE && screenResolution.y > screenResolution.x))
            screenResolution.set(screenResolution.y, screenResolution.x)
    }
    return screenResolution
}

/**
 * returns the natural orientation of the device: Configuration.ORIENTATION_LANDSCAPE or Configuration.ORIENTATION_PORTRAIT .<br></br>
 * The result should be consistent no matter the orientation of the device
 */
fun getScreenNaturalOrientation(context: Context): Int {
    //based on : http://stackoverflow.com/a/9888357/878126
    val config = context.resources.configuration
    val rotation = getDisplay(context)!!.rotation
    return if ((rotation == Surface.ROTATION_0 || rotation == Surface.ROTATION_180) &&
            config.orientation == Configuration.ORIENTATION_LANDSCAPE
            || (rotation == Surface.ROTATION_90 || rotation == Surface.ROTATION_270) &&
            config.orientation == Configuration.ORIENTATION_PORTRAIT) Configuration.ORIENTATION_LANDSCAPE else Configuration.ORIENTATION_PORTRAIT
} 
```

要获得显示，请使用：

```
fun getDisplay(context: Context): Display? {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.R)
        try {
            val result = context.display
            if (result != null)
                return result
        } catch (e: Throwable) {
        }
    if (context is Activity) {
        return try {
            @Suppress("DEPRECATION")
            context.windowManager.defaultDisplay
        } catch (e: Throwable) {
            null
        }
    }
    return null
} 
```

文档：

[https://developer.android.com/reference/android/view/Display.html#getRealSize(android.graphics.Point)](https://developer.android.com/reference/android/view/Display.html#getRealSize(android.graphics.Point))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-28T16:21:04.020

这可以在任何类中使用：

```
DisplayMetrics metrics = Resources.getSystem().getDisplayMetrics();
Integer with = metrics.widthPixels;
Integer height = metrics.heightPixels; 
```

希望这有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-27T11:47:53.300

甚至比公认的答案更简单。你不需要上下文。

```
object ScreenUtils {

    fun getScreenWidth() = Resources.getSystem().displayMetrics.widthPixels

    fun getScreenHeight() = Resources.getSystem().displayMetrics.heightPixels

} 
```

# oracle11g - Oracle 中的审计跟踪系统

> ID：11669656
> 
> 赞同：0
> 
> 时间：2012-07-26T12:48:01.473
> 
> 标签：oracle11g, audit-trail

我正在尝试为我的 Oracle-Java 应用程序构建一个审计跟踪系统。我在谷歌上做了很多搜索。找到了一些解决方案，主要是建议使用触发器。但是使用这种方法的问题是我将无法跟踪哪个应用程序用户正在进行更改。我还想跟踪用户 ID 以及更改。你们能建议我什么是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:33:56.700

如果您希望数据库审核信息，您需要做一些事情让数据库知道哪个应用程序用户登录到特定会话。有多种方法可以做到这一点，其中许多取决于应用程序架构。假设这是一个标准的 3 层应用程序，一种方法是创建一个上下文

```
SQL> create context login_ctx using login_pkg;

Context created.

SQL> create or replace package login_pkg
  2  as
  3    procedure set_user( p_username in varchar2 );
  4  end;
  5  /

Package created.

SQL> ed
Wrote file afiedt.buf

  1  create or replace package body login_pkg
  2  as
  3    procedure set_user( p_username in varchar2 )
  4    as
  5    begin
  6      dbms_session.set_context( 'LOGIN_CTX', 'USER_NAME', p_username );
  7    end;
  8* end;
SQL> /

Package body created. 
```

`login_pkg.set_user`然后，每当新的应用程序用户将使用特定会话时，您的应用程序就需要调用该过程。如果这是一个具有连接池的三层应用程序，则每次用户从池中请求连接时都需要这样做。

```
SQL> exec login_pkg.set_user( 'Justin' );

PL/SQL procedure successfully completed. 
```

在您的触发器代码（或 PL/SQL 中的其他地方）中，您可以查询上下文以确定当前应用程序用户的身份。

```
SQL> select sys_context( 'LOGIN_CTX', 'USER_NAME' )
  2    from dual;

SYS_CONTEXT('LOGIN_CTX','USER_NAME')
--------------------------------------------------------------------------------
Justin 
```

如果您想要审核其他元素，您可以在上下文中设置您想要的任意属性（即您可以传入客户端 IP 地址或会话 ID 或中间层可以访问的任何其他内容）。

其他选项包括在数据库中为您的应用程序用户使用代理用户，设置包变量而不是使用上下文，或者让应用程序进行审计。

# hadoop - 在单行中组合多个 PIG 命令

> ID：11669659
> 
> 赞同：0
> 
> 时间：2012-07-26T12:48:10.347
> 
> 标签：hadoop, mapreduce, hdfs, apache-pig

在 PIG 脚本中，是否可以在一行中组合多个命令，这样一个命令行的输出，而不是进入输出变量，可以直接作为另一个命令的输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:41:04.400

这是允许的。但它不会在运行时优化任何东西。它只是混淆了语法。

```
STORE(FORECH(LOAD '$file') GENERATE $0, $1) ) INTO 'output.txt'; 
```

# android - android中的透明覆盖

> ID：11669660
> 
> 赞同：1
> 
> 时间：2012-07-26T12:48:12.067
> 
> 标签：android, xml

我正在尝试创建一个透明覆盖，应该在其他应用程序窗口的顶部也使用下面的代码。问题是：
1）它在其他应用程序窗口的顶部不起作用。
2）背景颜色不透明。

爪哇代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //-----
    final WindowManager.LayoutParams window_params=getWindow().getAttributes();
   // window_params.screenBrightness=1f;
    window_params.format = PixelFormat.TRANSPARENT;
    window_params.type=2006;
    getWindow().setAttributes(window_params); 
    //------
    view = new MyView(this);    //MyView view = new MyView(this);
    view.setBackgroundColor(Color.TRANSPARENT);
    view.changeSomethingInWindow(); // keep an eye on this method
    setContentView(R.layout.main);  //setContentView(view); //setContentView(view ,new LayoutParams(200,400));
}
public class MyView extends View{

    public MyView(Context context) {
        super(context);
    }

    public void changeSomethingInWindow(){
        // get a reference of the activity
        Activity parent = (Activity)getContext();

        Window window = parent.getWindow();
        window.getWindowManager();
        window.setLayout(300, 400);     //window.setLayout(getHeight()/2, getWidth()/2);
        window.setFormat(PixelFormat.TRANSPARENT);
        //window = new Window(this, R.style.Theme_Transparent);
      //  window.setBackgroundDrawableResource(getWindowVisibility());
        window.setFlags(WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
                WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY); 
        window.getWindowStyle();
        window.getDecorView();

    }
} 
```

样式.xml：

```
<?xml version="1.0" encoding="utf-8"?>    <resources>
<style name="Theme.Transparent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">false</item>
    <item name="android:backgroundDimEnabled">false</item>  
</style> 
```

`manifest.xml:android:theme="@style/Theme.Transparent"` 我在 manifest.xml 中使用过这个

尝试帮助我，找出这个问题的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T05:23:04.007

尝试这样的事情：

```
 private static final int FLAGS = WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL    |
                                  WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN   |
                                  WindowManager.LayoutParams.FLAG_FULLSCREEN        |
                                  WindowManager.LayoutParams.FLAG_LAYOUT_INSET_DECOR |
                                  WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE      |
                                  WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS   |
                                  WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE;

 WindowManager.LayoutParams params = new WindowManager.LayoutParams(0, FLAGS, PixelFormat.TRANSLUCENT);

 getWindowManager().addView (overlayView, params); 
```

如果您想接收触摸，请删除 FLAG_NOT_TOUCHABLE。注意“addView”参数。

# ruby-on-rails - Rails 使用 curl 设计登录

> ID：11669663
> 
> 赞同：3
> 
> 时间：2012-07-26T12:48:20.603
> 
> 标签：ruby-on-rails, curl, devise, authenticity-token

我正在尝试使用`curl`以下方式登录以进行设计：

```
curl -v -b cookie.file -c cookie.file -H "Content-Type: application/json" -X POST -d '{"user" : {"email":"MYUSER" , "password":"MYPASSWORD" }}' <code>http://localhost:3000/users/sign_in.json<code> 
```

rails 服务器日志显示：

```
WARNING: Can't verify CSRF token authenticity 
```

是否可以获取 CSRF 令牌真实性并将其传递给 sign_in 请求以使用设计成功登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:58:41.560

我建议您不要使用`curl`和使用`mechanize`，因为它会在您首先调用登录表单时自动处理这些内容。

当您想继续使用 curl 时，您需要先调用登录页面并启用`cookiejar`存储会话以供下次调用的选项。然后您可以添加令牌以便您可以登录。但是这个问题并不是专门设计它的 Rails 机制来不接受没有令牌发送的表单。

# actionscript-3 - 使用 ENTER_FRAME 事件从一个类访问函数并将更新发送到 AS3 中的其他类

> ID：11669665
> 
> 赞同：0
> 
> 时间：2012-07-26T12:48:22.343
> 
> 标签：actionscript-3, air, enterframeevent

我想开始一个项目。但是，在做文书工作时，我意识到一种情况如下，

比如说，我们有 3 个班级。

1.  Main.as,
2.  作为，
3.  B.as

在这里，“Main.as”是一个创建 A 和 B 实例的中心类。

A 类有一些函数，比如带有 ENTER_FRAME 事件的“updatePosition(e:Event)”。

B 类需要通过“Main.as”从 A 类的“updatePosition(e:Event)”获取更新

如何仅通过一个 ENTER_FRAME 事件和仅在 A.as 类中的事件来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:30:47.057

这是一种简单的方法，但我相信还有很多更好的方法（例如使用自定义事件或 AS3 信号库）：

主文件

```
private function eFrame(e:Event) 
{
    a.runEvents();
    b.runEvents();
} 
```

A.as. B.as

```
public function runEvents()
{
   // Run whatever events you need to run
} 
```

这将为您提供与 3 个 ENTER_FRAME 事件相同的效果，但没有开销，但是您将有大量函数调用的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:28:07.460

为什么不在 main.as 中放置一个 ENTER_FRAME 处理程序并从那里调用其他类的更新？

```
public class Main extends Sprite
{
    private var _a:A = new A();
    private var _b:B = new B();
    public function Main()
    {
       if(stage) init();
       else addEventListener(Event.ADDED_TO_STAGE,init);

    }

    private function init(e:Event=null):void
    {
        removeEventListener(Event.ADDED_TO_STAGE,init);
        stage.addEventListener(Event.ENTER_FRAME,onEnterFrame);
    }

    private function onEnterFrame(e:Event):void
    {
          _a.updatePosition();
          _b.updatePosition();
    }

} 
```

# c# - Setter 注入或环境上下文模式

> ID：11669666
> 
> 赞同：8
> 
> 时间：2012-07-26T12:48:27.973
> 
> 标签：c#, .net, design-patterns, dependency-injection

我有一些全局组件，我不确定如何将它们放入设计中。如：

*   *Settings 类：*它是接口程序的初始设置，它可以是后台的 app.config(1way)、web.config(1way)、硬编码值(1way) 或 sqldb(2way)。

*   *语言类：*它包含不同的语言集，我可以在它后面有一些 resx 文件（1way）、硬编码值（1way）或 sqldb（2way）。

第一个问题是，我是否应该在依赖注入中设置这些类的属性（我使用 Windsor）：

```
public ISettings Settings {set;}
public ILanguage Language {set;} 
```

或者我应该让它们成为环境上下文：

```
string DoSomethingAndReportIt() {
    //do something ...
    var param = Settings.Current.SomeParam;
    //report it ...
    return Language.Current.SomeClass_SomeMethod_Job_Done;
} 
```

我注意到 .net 库中有一些组件实际上使用环境上下文模式，例如 System.Security.Principal、System.Web.ProfileBase、System.Thread.CurrentCulture ...

您认为将我的全局类（例如 Settings 和 Language）设置为环境上下文类没有害处吗？如果不是，为什么首选 DI？与环境相比，它们在单元测试中是否更具优势？

第二个问题是，如果 DI 更好，（我感觉首选 DI 模式），代理现有环境类（如 Security.Principal 或 Profile）遵循 DI 模式的好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:32:12.180

当您需要实现跨多个层的功能时，环境上下文是可以的。（在您的情况下，您说这两个对象是全局的）此功能称为**横切关注点**。正如您注意到 .NET 中的许多类都实现为**环境上下文**，例如`IPrincipal`. 为了获得环境上下文实现的工作版本，如果它们被开发为环境上下文，您将需要为您的`Settings`和对象提供一些默认值。`Language`我的假设是您将提供一些默认实现`ILanguage`and `ISettings`，并且考虑到您将在全局范围内使用它们，它们是环境上下文的良好候选者。

另一方面，您打算多久使用那些实现这两个接口的对象？而且，这两个对象的存在是否至关重要，意义`Settings != null`和`Language != null`？如果你真的打算在一两个类中使用它们，和/或如果对象的存在不是很重要，你可能想要使用**setter injection**。setter 注入实际上并不需要默认值，因此您的对象可以是`null`.

就我个人而言，我不是环境上下文的粉丝。但是，如果事实证明它是最可接受的解决方案，我会使用它。如果你的实现我会做这样的事情：因为你只需要在一个位置初始化实现两个接口的对象，你可以从环境上下文开始。如果您意识到您在极少数位置使用它，请考虑将其重构为 setter 注入。如果对象的存在很重要，请考虑**构造函数注入**实现。

# javascript - 用于自定义语言语法的基于 javascript 的代码编辑器

> ID：11669667
> 
> 赞同：8
> 
> 时间：2012-07-26T12:48:29.307
> 
> 标签：javascript, editor

我需要基于 javascript/html 的代码编辑器，我将为非常简单的自定义编码语言进行自定义。

此编辑器工具需要在**离线**解决方案中工作，因此源代码必须可**下载或打开**。即使没有变量，语言语法也会看起来像非常简化的 java 脚本，我将为自定义语言定义“if then”和“built in function name”。

所以**它必须对自定义编码语言语法有配置支持**

如果您可以参考一些现成的解决方案，那将非常有帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T21:15:52.317

我为自己的问题找到了解决方案

我用了代码镜像

[http://codemirror.net/](http://codemirror.net/)

它内置了对许多编码语言的支持，包括 JavaScript / C# / VB / C / C++ / CSS / 等

并且根据语言文件还可以修改支持的关键字列表

# apache - number 自动更改为字符串

> ID：11669676
> 
> 赞同：0
> 
> 时间：2012-07-26T12:48:50.050
> 
> 标签：apache, apache-poi

我正在尝试通过 apache poi 读取 Excel 文件。在列中，我有数据“9780547692289”。迭代所有列后，在输出中，数字显示为“9.780547692289E12”。我的意思是数字自动更改为字符串（因为它有'E'）。我必须将其保留为仅数字（原样）。我应该怎么办..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:38:51.873

//当从excel中获取值时，你可以使用这个方法

```
private String getCellValue(Cell cell) {
    if (cell == null) {
        return null;
    }
    if (cell.getCellType() == Cell.CELL_TYPE_STRING) {
        return cell.getStringCellValue();
    } else if (cell.getCellType() == Cell.CELL_TYPE_NUMERIC) {
        return cell.getNumericCellValue() + "";
    } else if (cell.getCellType() == Cell.CELL_TYPE_BOOLEAN) {
        return cell.getBooleanCellValue() + "";
    }else if(cell.getCellType() == Cell.CELL_TYPE_BLANK){
        return cell.getStringCellValue();
    }else if(cell.getCellType() == Cell.CELL_TYPE_ERROR){
        return cell.getErrorCellValue() + "";
    } 
    else {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:50:45.500

这可能只是一个显示设置。“E”只是用于显示数字的科学计数法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T06:50:06.677

这对我有用

if (cell.getCellType()==Cell.CELL_TYPE_NUMERIC || cell.getCellType()==Cell.CELL_TYPE_FORMULA)

{

int i = (int)cell.getNumericCellValue();

字符串 cellText = String.valueOf(i);

}

# objective-c - 如何消除分组UITableView的左右边距

> ID：11669678
> 
> 赞同：2
> 
> 时间：2012-07-26T12:49:13.657
> 
> 标签：objective-c, ios, uitableview

如果我有一个分组的 UITableView，它的边缘会带有一个灰色的边框/缓冲区。有没有办法知道这个缓冲区有多大，或者等效地，它里面的实际白细胞有多大？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T17:07:52.673

这是您可以消除分组 UITableView 的左右边距的方法。只是 UITableViewCell 的子类。请注意，如果您希望边距为 0 以外的值，只需更改 setFrame 方法以满足您的需要。

```
//In CustomGroupedCell.h
#import <UIKit/UIKit.h>

@interface CustomGroupedCell : UITableViewCell
@property (nonatomic, weak) UITableView *myTableView;
@end

//In CustomGroupedCell.m
#import "CustomGroupedCell.h"

@implementation CustomGroupedCell
@synthesize myTableView = _myTableView;

- (void)setFrame:(CGRect)frame 
{
    frame = CGRectMake(- [self cellsMargin] , frame.origin.y, self.myTableView.frame.size.width + 2 *[self cellsMargin], frame.size.height);
    self.contentView.frame = frame;
    [super setFrame:frame];
}

- (CGFloat)cellsMargin {

    // No margins for plain table views
    if (self.myTableView.style == UITableViewStylePlain) {
        return 0;
    }

    // iPhone always have 10 pixels margin
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        return 10;
    }

    CGFloat tableWidth = self.myTableView.frame.size.width;

    // Really small table
    if (tableWidth <= 20) {
        return tableWidth - 10;
    }

    // Average table size
    if (tableWidth < 400) {
        return 10;
    }

    // Big tables have complex margin's logic
    // Around 6% of table width,
    // 31 <= tableWidth * 0.06 <= 45

    CGFloat marginWidth  = tableWidth * 0.06;
    marginWidth = MAX(31, MIN(45, marginWidth));
    return marginWidth;
}

@end 
```

# c# - 如何在 TR 中获取 TD 的正则表达式

> ID：11669680
> 
> 赞同：-1
> 
> 时间：2012-07-26T12:49:26.747
> 
> 标签：c#, html, regex, html-table

我需要正则表达式的帮助。（使用 C#）

在 html 源代码中，我得到了类似的东西。

```
[...]
<TR class=tblDataGreyNH>
<TD style="TEXT-ALIGN: right; FONT-WEIGHT: bold" class=tblHeader>Total Time </TD>
<TD>07:47 </TD>
<TD>04:48 </TD>
<TD>00:00 </TD>
<TD>00:00 </TD>
<TD>07:42 </TD>
<TD>00:00 </TD>
<TD>00:00 </TD></TR>
[..]
<TR class=tblDataGreyNH nowrap>
<TD>Total </TD>
<TD>20:17 </TD></TR>
<TR style="FONT-WEIGHT: bold" class=tblDataWhiteNH nowrap>
<TD>Total Time </TD>
<TD width=75>20:17 </TD></TR></TBODY></TABLE></TD>
<TD colSpan=3>
... 
```

类名始终相同。我需要将所有 TD 解析成一个字符串数组。tblDataGreyNH 是重要类。

这是整张桌子，里面有 td。（如果你需要一些）

```
<table class="tblList">
<form action="/interface/timesheet/ViewUserTimeSheet.php" method="get" name="timesheet"></form>
<tbody>
<tr>
<tr class="tblHeader">
<tr class="tblHeader">
<tr class="tblDataWhiteNH">
<tr class="tblDataWhiteNH">
<tr class="tblHeader">
<tr class="tblDataGreyNH">
<td class="tblHeader" style="font-weight: bold; text-align: right"> Total Time </td>
<td> 07:47 </td>
<td> 04:48 </td>
<td> 00:00 </td>
<td> 00:00 </td>
<td> 07:42 </td>
<td> 00:00 </td>
<td> 00:00 </td>
</tr>
<tr class="tblDataWhiteNH">
<tr class="tblHeader">
<tr valign="top">
</tbody>
</table> 
```

我希望有人可以帮助我解决这个问题。正则表达式对我来说似乎无法理解。我无法掌握 ReGeX 的基础知识！？：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T12:54:50.003

不要对 HTML 使用 Regex，我建议查看[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/ "HtmlAgilityPack")

很简单：

```
var doc = new HtmlDocument();
doc.LoadHtml("...your sample html...");

// all <td> tags in the document
foreach (HtmlNode td in doc.DocumentNode.SelectNodes("//td")) 
{
     Console.WriteLine(td.InnerText);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:55:12.293

您不应该使用正则表达式来解析 HTML（许多参考之一：[链接](https://stackoverflow.com/questions/590747/using-regular-expressions-to-parse-html-why-not)）

我会推荐一个名为 HtmlAgilityPack 的很棒的 .NET 库。

# winapi - 如何在 MFC 中创建一个包含 2 个项目的菜单？

> ID：11669681
> 
> 赞同：3
> 
> 时间：2012-07-26T12:49:34.453
> 
> 标签：winapi, mfc, menu, menuitem, multiple-columns

我做了一些实验`MF_MENUBARBREAK`，但这样我只能在菜单的最顶层实现两列。

我想要的是这样的菜单：

![](../Images/5f30e472dc03854aef4e47fbea359863.png)

我想要两列的不是完整菜单，而是第一行有两个菜单（左和右）项。每个其他条目将占据自己的整行。那可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:10:50.053

不，这是不可能的。本机菜单系统不支持“拆分”多列菜单。

如果一个下拉菜单有多个列，那么整个下拉菜单将有多个列。否则，所有项目都显示在单个列中。

你不能拥有这个（除非你像我刚才那样在 Paint 中模拟它）：

     ![](../Images/c3c4b218c40f37ce035b6f389bbeb933.png)

相反，您为其设置`MF_MENUBARBREAK`标志的项目之后的所有项目都将显示在第二列中。例如，如果“右”项`MF_MENUBARBREAK`设置了标志，您的菜单将如下所示：

     ![](../Images/c6f80cd0dc077d9013f2595c499d358a.png)

您不能让项目“一”到“三”看起来好像它们不在一列或另一列中。如果您在“Right”*之前*`MF_MENUBARBREAK`添加项目（带有标志的项目），它们都将位于第一列，如下所示：

     ![](../Images/f95af81c5876f512ee81faaaa0ecaf5b.png)

......但他们仍然在一个专栏中。没有办法解决这个问题，[除了自己绘制菜单的所有者](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756947.aspx)之外，这比它的价值要多得多（相信我）。

也许您可以复制“左”和“右”类别下的编号项目？只要您给每个菜单项一个唯一的 ID，在代码中区分它们就不是问题。

     ![](../Images/38ac7a646f632fc9d45f4f721e88303c.png)

但是，您仍然需要找到某种方法来指示“左”和“右”是列标题，并且应该与它们下面的项目区别对待。我想你可以禁用它们和/或用粗体绘制它们，但这仍然不能保证产生直观的 UI。

更好的是，我建议将您的“创造性”UI 设计强迫降至最低，并添加另一个顶级菜单。用户知道如何使用顶级菜单。他们已经掌握了这种心理模型。他们真的不知道如何使用你奇怪的自定义菜单，任何奇怪的东西都可能经常让你的用户绊倒。

     ![](../Images/e232302bdd85f978d40190545b8cfd33.png)

用户也（某种程度上）理解子菜单，因此您仍然可以拥有一个带有“左”和“右”项的顶级菜单，它们本身显示包含您的编号项目的子菜单。但是通常的规则适用——不要把东西嵌套得太深，等等。

     ![](../Images/12e2c081c5d42fcba7d601147276c35d.png)

在 OS X 上，我看到了类似于以下菜单结构的内容：

     ![](../Images/2c77f3a2230d981d26273d8af3f4e162.png)

它在用户习惯的地方运行良好。作为一个喜欢将事物正确嵌套并分类的程序员，我自己也非常喜欢它。但我不确定它对 Windows 用户来说有多直观，对他们来说这将是相当不寻常的。你必须做一些可用性测试。

# deployment - 关于损害计算机的 clickonce 应用程序消息

> ID：11669690
> 
> 赞同：0
> 
> 时间：2012-07-26T12:50:12.393
> 
> 标签：deployment, clickonce

我已将测试应用程序部署到我的**localhost**。每次我尝试安装该应用程序时，都会出现消息：“这种类型的文件可能会损害您的计算机” 有什么办法可以摆脱这个消息？因为当用户阅读它时，他可能会认为他正在下载一些病毒:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:35:59.827

我想没有办法像 Woobie 说的那样做到这一点。

# java - 如何设置 READ_COMMITTED_SNAPSHOT 和 ALLOW_SNAPSHOT_ISOLATION

> ID：11669691
> 
> 赞同：0
> 
> 时间：2012-07-26T12:50:15.213
> 
> 标签：java, sql-server

我想启用这些参数，但我没有足够的权限来修改数据库代码（因为我的公司）。因此，我想知道在创建与数据库的连接或通过 Java 应用程序访问存储过程时是否可以修改它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:18:56.080

如果您正在寻找以编程方式修改这些属性，那么您也将面临已经提到的**足够权限的问题。**这与任何编程语言无关。

回答您的问题： *我想知道在创建连接时是否可以修改它们*

数据库连接始终**与数据库服务器上的用户名和密码**或帐户相关联。如果 DBA 未**授予更改 DB 属性的权限**，则您无能为力。

不确定您是否将这些属性（READ_COMMITTED_SNAPSHOT 和 ALLOW_SNAPSHOT_ISOLATION）与[隔离级别](http://docstore.mik.ua/orelly/java-ent/ebeans/ch08_03.htm)（您可以在连接对象上设置）混淆。这些是不同的东西。前者非常特定于 MSSQL 服务器，可以由 DBA 通过[执行查询](http://msdn.microsoft.com/en-us/library/ms175095%28v=sql.105%29.aspx)来设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:19:48.800

你不能。这些是数据库的属性，如果您无权更改它们，那么您就没有权限。您需要`ALTER`对数据库本身的权限。

# php - 使用 htaccess 文件重定向

> ID：11669695
> 
> 赞同：1
> 
> 时间：2012-07-26T12:50:31.440
> 
> 标签：php, .htaccess, mod-rewrite

编辑 ：

我想重定向一个网址

到 ：`www.example.com/location/sydney`

从： `www.example.com/rss.php?pickup=sydney`

问题是我无法从 www.example.com/location/sydney 获取 $_GET['pickup'] 值，并且位置也会改变，例如：它可能是凯恩斯、伦敦等。我有一个名为 rss.php 的文件我将从 $_GET['pickup'] 中获取值。我试过这个：-`Redirect /location http://deals.vroomvroomvroom.com.au/rss.php`

但它给了我一个网址：-`http://deals.vroomvroomvroom.com.au/rss.php/sydney`当我输入网址时`www.example.com/location/sydney`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:12:54.747

在你的 .htaccess 文件中试试这个

```
RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:23:46.263

试试这个

```
RewriteEngine    On
RewriteCond      %{QUERY_STRING}    ^location=1$
RewriteRule      (.*)               $1?     [R=permanent] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T14:23:50.207

在 location 目录中放置一个 .htaccess 文件，其中包含以下内容：

```
RewriteEngine On
RewriteRule (.*) ../index.php?location=$1&e=1 [L,QSA] 
```

这假定您要用于对 /location 的请求的 index.php 位于 location 目录上方的目录中

如果您还需要重定向（`www.abc.com/?location=sydney`to `www.abc.com/location/sydney`）工作，那么我认为最好的方法是将以下内容添加到位于 DocumentRoot 中的（单独的）.htaccess 文件中：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^(.*)location=([^&]*)(.*) [NC]
RewriteCond %{QUERY_STRING} !&e=1 [NC]
RewriteRule ^(.*)$ $1/location/%2?%1%3 [R=301,L,NE] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T12:51:55.980

你启用了 mod_rewrite 吗？`sudo a2enmod rewrite`

还有`tail -f /var/log/apache2/error.log`当你点击刷新时的输出是什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T13:13:35.863

您可能会遇到两个可能的问题：

1) 是否启用了 mod_rewrite？使用以下命令检查：`apache2ctl -M | grep rewrite`- 您应该会看到类似于`rewrite_module (shared)`是否启用的行。如果没有 - 启用它。

2) 您是否有权使用 .htaccess 文件？检查您的虚拟主机的配置——这应该包含 AllowOverride 行，类似于：

```
<Directory "/var/www/your/site/">
    Options FollowSymLinks
    AllowOverride None
    Order allow,deny
    allow from all
</Directory> 
```

现在在我的示例中 mod_rewrite 不起作用，因为 AllowOverride 设置为 None。在此处检查您需要什么：[http](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride) ://httpd.apache.org/docs/2.2/mod/core.html#allowoverride但您基本上需要将其设置为任何其他有效选项，即不是`None`，否则 Apache 将完全忽略`.htaccess`文件.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T13:15:05.897

> 位置可以是任何东西......我尝试了以下代码，但它不起作用。

如果你想*从* `/location.php?location=sydney` *to* `/location/sydney`重定向，你的 RewriteRule 是错误的方式。唉，你不能根据查询参数重写。

# jquery - 使用 jQuery 选择器从选择列表中获取选定的文本

> ID：11669696
> 
> 赞同：0
> 
> 时间：2012-07-26T12:50:31.347
> 
> 标签：jquery

我正在尝试使用选择器从下拉列表中获取选定的文本。如果我直接按名称引用下拉列表，它可以工作：

```
$('#aBigLongASP.NETWebformsGeneratedName_ddl_StateOfOption :selected').text() 
```

但是，我尝试使用选择器来选择仅使用名称的最后一部分的下拉列表：

```
$('#select[id$='ddl_StateOfOption']) :selected).text(); 
```

但我似乎无法让它发挥作用。Chrome 开发者工具会抛出以下错误：

> SyntaxError：意外的标识符

谁能指出错误在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T12:52:47.213

尝试这个：

```
$('select[id$="ddl_StateOfOption"] :selected').text(); 
```

您的代码有几个问题：

```
// $('#select[id$='ddl_StateOfOption']) :selected).text();
//    ^           ^                 ^ ^          ^
//    |           |                 | |           \
//    |           |                 |  \            missing closing '
//    |           \                 /   shouldn't have )
//    \            should be " not '
//     You were selecting elements with id "select" rather than tag "select" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:54:13.500

```
$("#select[id$='ddl_StateOfOption'] :selected").text(); 
```

试试这个。

# android - Android：如何具体处理后按？

> ID：11669704
> 
> 赞同：3
> 
> 时间：2012-07-26T12:50:49.103
> 
> 标签：android

让我更详细地解释一下。

首先; 我知道如果用户按下并返回上一个活动，则上一个活动会`onResume`正确触发方法。这没关系。

我的应用程序中有一个根活动，它通过按钮引导 4 个不同的活动。我想了解，用户在哪个活动上按下了返回按钮？是否可以使用类似`Handler`或类似的东西？

实际上，我已经找到了一个解决方案。我有 4 个不同的静态布尔变量，每个变量代表一个 Activity。让我在代码中显示：

```
public class MainActivity extends Activity { // This is root

    static Boolean activityA;
    static Boolean activityB;
    static Boolean activityC;
    static Boolean activityD;

    public void onClick(View v) {
        if(v == ActivitvyA) //of course psuedo 
             activityA = true
        //...there are similar controls
    }

    protected void onResume() {
        if(activitiyA) // If true, this means the user pressed back on ActivityA
    }

} 
```

你怎么看？有什么不同而有效的方法吗？

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T13:03:51.510

基本上，您想知道用户登陆您的根活动时来自哪个活动。

我认为携带此类信息的最佳方式是使用`startActivityForResult`.

```
public static final int CODE_A = 10;
public static final int CODE_B = 20;

public void goToA() {
  Intent i = new Intent(this,AActivity.class);
  startActivityForResult(i, CODE_A);
}

public void goToB() {
  Intent i = new Intent(this,BActivity.class);
  startActivityForResult(i, CODE_B);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  if(resultCode==CODE_A) {
    // ...
  }
  else if(resultCode==CODE_B) {
    // ...
  }
} 
```

另一种方法是在某处（例如在自定义应用程序类中）存储对用户可见的最后一个活动，并在每个活动的 onPause 方法中更新它。就像是：

```
class MyApplication extends android.app.Application {
  public Class latestActivity;
}

class MyBaseActivity extends Activity {
  public void onPause() {
    ((MyApplication)getApplication()).latestActivity = this.getClass();
    super.onPause();
  }
} 
```

最后一种方法是将刚刚启动的活动存储在您的根活动中。

```
class MyRootActivity extends Activity {
  private String latestUserAction;

  public void goToA() {
    latestUserAction = "goToA";
    startActivity(Intent.ACTION_VIEW, .........
  }

  // Don't forget to check that latestUserAction gets saved and restored when your activity is paused or stopped.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T12:52:10.957

当您打开活动时，使用`startActivityForResult(intent, requestCode)`然后..您可以`onBackPressed()`通过将活动名称设置为结果来覆盖您的活动..

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    setResult(ActivityName);
} 
```

然后在您的`MainActivity`检查中，结果通过了..

# xcode - Xcode 4.4 中的符号可见性链接器警告

> ID：11669713
> 
> 赞同：1
> 
> 时间：2012-07-26T12:51:15.843
> 
> 标签：xcode, macos, linker, warnings

我已经从 Xcode 4.3 迁移到刚刚发布的新 4.4 版本，现在在构建框架时收到几十个这种性质的链接器警告：

```
Direct access in <some method> to global weak symbol <some other method>
means the weak symbol cannot be overridden at runtime. This was likely
caused by different translation units being compiled with different
visibility settings. 
```

关于这个警告还有一些其他问题，似乎可以通过确保`-fvisibility=hidden -fvisibility-inlines-hidden`无处不在然后进行完全重建来解决，但这并没有解决我的警告。我进行了三重检查，并且`-fvisibility=hidden -fvisibility-inlines-hidden`存在于 Xcode 完成的所有编译中，包括 C++ 文件、Objective C++ 文件和预编译头文件。我已经完成了完整的重建，包括为我的项目清除 Xcode 的 DerivedData。似乎没有任何帮助。

这些警告在 Xcode 4.3 下没有出现，但我没有另一台 Mac 可以方便地使用 4.3 回去进行健全性检查。我还在跑狮子。

另一个奇怪的事情是，该项目有一个外部 SCons 构建系统，它`-fvisibility=hidden -fvisibility-inlines-hidden`使用 Xcode 4.4 命令行工具构建所有相同的代码，并且它不报告任何这些链接器警告（两种情况下的编译器版本相同）。

我将继续挖掘，但任何专家的见解将不胜感激。也许这是我不知道的 Xcode 4.4 更改？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T05:35:02.683

事实证明我需要`-fvisibility-inlines-hidden`从我的 .framework 构建和 .app 构建中删除，这使得警告消失了。

# hadoop - hadoop 流错误

> ID：11669716
> 
> 赞同：0
> 
> 时间：2012-07-26T12:51:34.687
> 
> 标签：hadoop, streaming

我已经在 shell 脚本中成功实现了一个朴素贝叶斯分类器，但是当我尝试将它作为映射器（hadoop 流）运行以处理大约 300,000 行时，我收到以下错误：

```
java.lang.RuntimeException: PipeMapRed.waitOutputThreads(): subprocess failed with code 254
    at org.apache.hadoop.streaming.PipeMapRed.waitOutputThreads(PipeMapRed.java:362)
    at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:576)
    at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:135)
    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:57)
    at org.apache.hadoop.streaming.PipeMapRunner.run(PipeMapRunner.java:36)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:436)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

日志具有相同的内容，并且不包含任何其他额外的调试信息。

有什么建议吗？我有一种预感，它应该是对 hadoop 的内存限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:32:51.987

这里提到的子进程很可能是您的 shell 脚本。其中的最后一个命令很可能返回 254。

# asp-classic - 如何在经典asp中24小时后自动删除非活动用户

> ID：11669718
> 
> 赞同：0
> 
> 时间：2012-07-26T12:51:41.297
> 
> 标签：asp-classic, global.asa

我用 Classic ASP 编写了一个注册系统。用户注册并将收到一封激活电子邮件。我想删除记录（用户），如果用户没有通过点击激活链接激活他们的帐户，则在 24 小时后发送。

怎么办？

我的用户表有这些行（我正在使用 Access）：

```
UserID     text
Username   text
Password   text
Email      text
Hash       text
join_date  date/time
active     Yes/No 
```

Ps：我无法访问 IIS 配置，因为我的网站存储在公共服务器上而不是专用服务器上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:57:20.553

如果您无法创建计划任务来运行 ASP 脚本，那么最好的办法可能是在 global.asa 中的 Session_OnStart 事件中执行此操作。每次启动新会话（新用户访问）时都会运行。如果您在“应用程序”变量中设置上次运行时间，则可以选择仅在经过设定的时间后运行例程以删除这些用户。但是，如果您的网站没有经常访问者，那么它就不会经常运行。

```
Sub Session_OnStart
   'Runs on application start or after 15 minutes
   If Application("LastRun") = "" Or DateDiff(n, Application("LastRun"), Now()) > 15 Then
       'Your code to delete users here, a query like this...
       'DELETE FROM [tableName] WHERE [active] = 0 AND DATEDIFF(hh, [join_date], GETDATE()) >= 24
       Application("LastRun") = Now()
   End If
End Sub 
```

# java - 为单个实体禁用 JPA Hibernate 模式验证

> ID：11669722
> 
> 赞同：7
> 
> 时间：2012-07-26T12:51:50.020
> 
> 标签：java, hibernate, jpa, hibernate-mapping

我有一个 JPA 实体，用作本机查询的结果类。因此，实体本身是无效的（因为它没有表）。我使用 Hibernate 4.1.x 作为我的 JPA 提供程序，它在启动期间执行模式验证并因此失败（我没有指定显式表）：

```
org.hibernate.HibernateException: Missing table: MyEntity
    at org.hibernate.cfg.Configuration.validateSchema(Configuration.java:1272)
    [...] 
```

有没有办法只为单个实体关闭模式验证（使用 JPA 或休眠注释或更改 persistence.xml）？

**编辑：**我可以完全避免使用任何实体作为结果，但是 Hibernate 将返回一个`List<Object[]>`作为查询结果，这在技术上是可行的，但使用起来有点难看：

```
Query query = entityManager.get().createNativeQuery("SELECT node, last_update FROM mm_repl_monitoring.my_mm_nodes");
List<Object[]> statuses = query.getResultList(); 
```

换句话说：如果有一些映射支持甚至可以用于映射到非实体类的本机查询，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T12:55:33.793

我不确定你为什么要将那个类注册为一个实体：它是一个自定义类，因此它不必从 hibernate/jpa 会话中附加或分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-11T12:31:21.870

对我有用的解决方案是`hibernate.hbm2ddl.auto`从`persistence.xml`. 当然，这会禁用所有其他实体的模式验证，但我在 JPA 2.0 中找不到其他东西。

# javascript - 提取一个字符串直到一个符号

> ID：11669725
> 
> 赞同：0
> 
> 时间：2012-07-26T12:51:55.383
> 
> 标签：javascript, jquery

我需要找到`'`字符串中的所有符号，然后提取从字符串开头到第一次出现的所有字符`'`。例如：我有`Jon's`并且我需要得到`Jon`. 有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T12:54:44.577

使用`split()`方法怎么样？

```
var name="Jon's";
var result=name.split("'")[0];
alert(result); 
```

示例：http: [//jsfiddle.net/aJpda/2/](http://jsfiddle.net/aJpda/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T12:57:12.793

```
var text = "Jon's";
text = text.substring(0, text.indexOf("'")); 
```

我不认为这是你的问题。如果你的字符串中有 2 ' 会发生什么？你真正需要什么？如果您再解释一下，我可以提供帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T12:54:54.003

```
var myString = "Jon's";

myString = myString.slice( 0, myString.indexOf( "'"  ) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T12:55:13.250

```
var str = "Jon's";
var pos = str.indexOf("'");
alert(str);
var newStr = str.slice(0,pos===-1 ? str.length : pos);
alert(newStr);​ 
```

JSFiddle：[这里](http://jsfiddle.net/vHCfc/1/)

您还可以使用以下`substring`方法：

```
var str = "Jon's";
var pos = str.indexOf("'");
alert(str);
var newStr = str.substr(0,pos===-1 ? str.length : pos);
alert(newStr);​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T12:55:41.360

下面的代码将为您提供“'”之前的文本。

```
"Jon's".split("'")[0] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T12:58:24.357

你可以使用这样的函数：

```
function cutString(string, symbol){
    return string.slice( 0, string.indexOf( symbol  ) );
} 
```

希望这有帮助

# android - 我无法从微调器动态获取选定值

> ID：11669726
> 
> 赞同：0
> 
> 时间：2012-07-26T12:51:58.247
> 
> 标签：android, spinner

我需要从一个微调器中获取 selectedItemPosition 并在第二个微调器中使用它。我希望这个值动态变化。

这是我使用微调器的类代码：

```
int item;
Spinner spinner_cat;
Spinner spinner_subcat;
.....
    spinner_cat = (Spinner) findViewById(R.id.spinner1);
    List<String> category = dbAdapter.getAllCategory();
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, category);
    dataAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner_cat.setAdapter(dataAdapter);
    spinner_cat.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
                public void onItemSelected(AdapterView<?> parent,
                        View view, int position, long id) {
                    ExpenseDB.this.item = spinner_cat
                            .getSelectedItemPosition() + 1;
                    Log.i("Is it work", "in method " + item);

                }

                public void onNothingSelected(AdapterView<?> arg0) {

                }
            });

    spinner_subcat = (Spinner) findViewById(R.id.spinner2);
    List<String> sub_category = dbAdapter.getAllSubCategory(item); // here it must change dynamically
    ArrayAdapter<String> subDataAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, sub_category);
    subDataAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner_subcat.setAdapter(subDataAdapter);
    dbAdapter.close();

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:04:03.397

```
spinner_cat.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parent,
                        View view, int position, long id) {
        ExpenseDB.this.item = spinner_cat.getSelectedItemPosition() + 1;
        fillsubCategory();
    }
 });
...
void fillsubCategory() {
    spinner_subcat = (Spinner) findViewById(R.id.spinner2);
    List<String> sub_category = dbAdapter.getAllSubCategory(item); 
    ArrayAdapter<String> subDataAdapter = new ArrayAdapter<String>(this,
          android.R.layout.simple_spinner_item, sub_category);
    subDataAdapter
         .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner_subcat.setAdapter(subDataAdapter);
} 
```

# delphi - TClientDataSet 中的“数据包不匹配”错误

> ID：11669728
> 
> 赞同：1
> 
> 时间：2012-07-26T12:52:04.523
> 
> 标签：delphi, delphi-7, tclientdataset

我有一个 .cds 文件，表明它是`TClientDataSet`文件。当我尝试`TClientDataSet`在 Delphi 7 中打开它时，当设置`Active`为时`true`，出现错误“数据包不匹配”。请帮我 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-26T13:46:44.820

使用 xml 映射器工具，如果你有一个，映射后全选，然后从 Create mrnu, DataPacket from XML

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:04:34.077

我刚刚下载了那个文件，可以确认它肯定不是有效的 CDS 文件

# wpf - 根据自定义 DependencyProperty 设置控件的可见性

> ID：11669730
> 
> 赞同：0
> 
> 时间：2012-07-26T12:52:05.773
> 
> 标签：wpf, enums, dependency-properties

我有一个包含以下 XAML 的 UserControl：

```
<GroupBox>
    <Grid>
        <Button x:Name="btn" Content="Test"/>
        <TextBlock x:Name="txt" Visibility="Collapsed"/>
    </Grid>
</GroupBox> 
```

我使用以下代码添加了枚举类型的 DependencyProperty：

> 公共静态只读 DependencyProperty DisplayTypeProperty = DependencyProperty.Register("DisplayType", typeof(DisplayTypeEnum), typeof(myUserControl), new PropertyMetadata(default(DisplayTypeEnum.Normal)));

```
 public DisplayTypeEnum DisplayType
    {
        get
        {
            return (DisplayTypeEnum)this.Dispatcher.Invoke(DispatcherPriority.Background, (DispatcherOperationCallback)delegate
            { return GetValue(DisplayTypeProperty); }, DisplayTypeProperty);

        }
        set
        {
            this.Dispatcher.BeginInvoke(DispatcherPriority.Background, (SendOrPostCallback)delegate
            { SetValue(DisplayTypeProperty, value); }, value);
        }
    } 
```

现在我希望能够根据我的 DependencyProperty 设置两个控件的可见性。

我已经尝试添加以下触发器，但出现 3 个错误：

```
<UserControl.Triggers>
<Trigger Property="DisplayType" Value="Text">
            <Setter Property="Visibility" TargetName="btn" Value="Collapsed"/>
            <Setter Property="Visibility" TargetName="txt" Value="Visible"/>
</Trigger>
</UserControl.Triggers> 
```

第一个错误表明成员“DisplayType”无法识别或无法访问。另外两个告诉我控件（txt 和 btn）无法识别。我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:06:31.320

你可以使用回调

```
public static readonly DependencyProperty DisplayTypeProperty = DependencyProperty.Register("DisplayType", typeof(DisplayTypeEnum), typeof(myUserControl), new PropertyMetadata(YourDPCallBack));

private static void YourDPCallBack(DependencyObject instance, DependencyPropertyChangedEventArgs args)
{
     YourUserControl control =   (YourUserControl)instance;
     // convert your Display enum to visibility, for example: DisplayType dT = args.NewValue
     // Or do whatever you need here, just remember this method will be executed everytime
     // a value is set to your DP, and the value that has been asigned is: args.NewValue
     // control.btn.Visibility = dT;
     // txt.Visibility = dT;
} 
```

我希望它有所帮助，

问候

# linux - 从一个进程创建多个共享内存

> ID：11669734
> 
> 赞同：1
> 
> 时间：2012-07-26T12:52:10.937
> 
> 标签：linux

一个进程不能创建两个IPC共享内存段吗？

我正在尝试从一个进程创建两个共享内存，一个用于与单独的进程共享数据，另一个用于与其子进程共享。我正在使用shmget，我也尝试使用ipcs获取系统中的共享内存信息。其输出是这样的：

```
------ Shared Memory Segments --------
key        shmid      owner      perms      bytes      nattch     status      
0x0beefbaf 0          root       666        225544     4                       
0x00000000 98305      root       666        4          0 
```

上面的输出显示确实创建了两个共享段，但 shmget 仅返回 0 作为其输出。因此，一个共享内存段被连接了两次。

shmget 有什么问题，或者无法从一个进程创建两个共享内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:00:08.550

您可能对共享内存段使用相同的密钥 - 如果您想要多个共享内存段，那么您需要使用不同的密钥。[`ftok`](http://pubs.opengroup.org/onlinepubs/007904975/functions/ftok.html)有关获取密钥的标准方法，请参见手册页。

存在系统级别的限制以防止使用过多的内存 -`kernel.shmmax`以及相关的 sysctl 属性。

这是一个非常简单的示例应用程序，它完全按照问题要求执行：

```
#include <sys/shm.h>
#include <stdio.h>
#include <fcntl.h>
#include <stdlib.h>

int main(int argc, char **argv) {
     key_t key1;
     key_t key2;
     if (-1 != open("/tmp/foo", O_CREAT, 0777)) {
        key1 = ftok("/tmp/foo", 0);
     } else {
        perror("open");
        exit(1);
    }
    if (-1 != open("/tmp/foo2", O_CREAT, 0777)) {
        key2 = ftok("/tmp/foo2", 0);
    } else {
        perror("open");
        exit(1);
    }
    printf("%x %x\n", key1, key2);
    int id1 = shmget(key1, 0x1000, IPC_CREAT | SHM_R | SHM_W);
    int id2 = shmget(key2, 0x2000, IPC_CREAT | SHM_R | SHM_W);
    printf("%x %x\n", id1, id2);
    void *addr1 = shmat(id1, 0, 0);
    if (addr1 == (void *)-1) perror("shmat1");
    void *addr2 = shmat(id2, 0, 0);
    if (addr2 == (void *)-1) perror("shmat2");
    printf("%p %p\n", addr1, addr2);
    shmctl(id1, IPC_RMID, NULL);
    shmctl(id2, IPC_RMID, NULL);
} 
```

# html - 基于触摸的设备上的下拉菜单

> ID：11669735
> 
> 赞同：1
> 
> 时间：2012-07-26T12:52:15.220
> 
> 标签：html, ios, css, navigation

我的网站上有这个导航栏，但它不会在我的 iPod touch 上下拉，我怀疑 iPhone 和 iPad 也是如此。 [这是其中一页](http://orhsfoundation.com/about)

我想知道是否有任何快速修复来启用触摸/悬停。

[CSS](http://orhsfoundation.com/style.css)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:15:50.613

如果你对 iDevices 感兴趣，那么你可以使用这个技巧：

```
#nav ul {
display: none;
/* Your styles */
}
#nav > li:hover ul {
display: block;
}
/* This is important */
#nav > li > a:hover {
color: #fff; /* You can set the same color or add other style.*/
} 
```

如果元素具有`:hover`事件，则第一次点击 iOS 呈现`:hover`，第二次点击引发点击事件。

那应该行得通。

PS 最好为移动、触控和桌面制作不同的 UI 逻辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T12:56:12.233

这里有一篇很好的文章 - [http://www.nczonline.net/blog/2012/07/05/ios-has-a-hover-problem/](http://www.nczonline.net/blog/2012/07/05/ios-has-a-hover-problem/)

我建议使用[Modernizr](http://modernizr.com/)，因为它提供了一个非触摸 CSS 类，您可以将其用于触摸屏设备，或者您可以使用 Javascript 检测悬停并为您的元素添加一个类。

```
if (!("ontouchstart" in document.documentElement)) {
    document.documentElement.className += " no-touch";
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-14T07:45:04.137

我遇到的最优雅的解决方案是[Osvaldas Valutis](http://osvaldas.info/drop-down-navigation-responsive-and-touch-friendly "奥斯瓦尔达斯·瓦卢蒂斯")

他的方法涉及一个非常小的 jQuery 插件来检测带有下拉 ul 菜单的导航列表项上的触摸事件。

例如，您可以像这样标记您的导航：

```
<nav id="nav-primary">
    <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/about/">About</a>
            <ul>
                <li><a href="/about/index.html">Dropdown item 1</a></li>
                <li><a href="/about/page.html">Dropdown item 2</a></li>
            </ul>
        </li>
    </ul>
</nav> 
```

然后用一行 jQuery 调用插件，如下所示：

```
$( '#nav-primary li:has(ul)' ).doubleTapToGo(); 
```

这确保了上面示例中的主页链接仍然按预期工作，因为它没有下拉菜单。唯一（非常小的）缺点是下拉列表的第一个链接有一点冗余，但这并没有什么坏处。

# formatting - 带有两个主要标签的 xmlstarlet 格式

> ID：11669737
> 
> 赞同：0
> 
> 时间：2012-07-26T12:52:20.310
> 
> 标签：formatting, xmlstarlet

我正在尝试使用 xmlstarlet 格式化此文件

文件：

```
<file_info>
<name><OUTFILE_0/></name>
<generated_locally/>
<upload_when_present/><max_nbytes>99999999999999999999999999999999999</max_nbytes><url><UPLOAD_URL/></url>
</file_info>
<result>
<file_ref><file_name><OUTFILE_0/></file_name>
<open_name>output</open_name>
<copy_file/></file_ref>
</result> 
```

命令：xmlstarlet fo --indent-tab --omit-decl templates/newApp_re_novo.xml > templates/newApp_re.xml

我收到这条消息：templates/newApp_re_novo.xml:1.145: Extra content at the end of the document 9999999999999999999999999999999

我认为这是因为我有两个主要标签：而且我需要这样的文件。我能做什么？

谢谢。费利佩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:39:52.823

一个有效的 XML 文档总是有一个根节点，而 xmlstarlet 只能处理有效的 XML 文档。一些前后处理可以解决这个问题：

```
{ echo '<R>'; cat forest.xml; echo '</R>'; }      | # make into a proper tree
xmlstarlet fo --indent-tab                        | # indent
xmlstarlet sel -t -c /R/file_info -n -c /R/result | # break apart into a forest
sed 's/^\t//'                                       # remove extra indentation 
```

# xslt - xslt：删除行尾的逗号，但不删除新行

> ID：11669745
> 
> 赞同：0
> 
> 时间：2012-07-26T12:53:06.903
> 
> 标签：xslt

我的任务是对现有的 xslt 字符串进行更改。我需要做的是删除一行末尾的逗号。我找到了导致逗号的原因，问题是，当我进行更改以删除逗号时，csv 文件变成一个大的连续字符串，而不是有记录、新行、记录等。

这是xslt：

```
public const string XSLT = @"
<xsl:stylesheet version=""1.0"" xmlns:xsl=""http://www.w3.org/1999/XSL/Transform""
xmlns:msxsl=""urn:schemas-microsoft-com:xslt"" exclude-result-prefixes=""msxsl"">  
<xsl:output method=""text"" encoding=""us-ascii"" />

    <xsl:template match=""DataRow"">Incident No.,Incident Date,Location Code,Location,Date Reported,Days away from Work (H),Is the incident OSHA Reportable?,Total Days Away From Work,Name of injured employee,Employee Type,Reported By,Witness (Name and Phone #),This Incident is an,""Select """"Injury"""" or choose Illness Type: (M)"",Was employee taken to the hospital?,Was this a recurring incident?,Cause of Injury,Injury Type,Body Part Injured,Body Fluid Exposure?,Did Injury/Illness occur on AECI premises?
<xsl:apply-templates select=""Data""/>

</xsl:template>

<xsl:template match=""Data"">
  <xsl:for-each select=""*"">
    <xsl:if test=""position() != last()"">    
      <xsl:value-of disable-output-escaping=""yes"" select="".""/>    
      <xsl:value-of select=""','""/>
    </xsl:if>
    <xsl:if test=""position() = last()"">   
      <xsl:value-of disable-output-escaping=""yes"" select="".""/>                          
    </xsl:if>
  </xsl:for-each>,    <-----THIS IS WHAT IS CAUSING THE COMMA AT THE END OF THE LINE
</xsl:template>
</xsl:stylesheet>"; 
```

这是删除逗号之前 csv 文件的样子。我已删除名称并将其替换为*** *

```
Incident No.,Incident Date,Location Code,Location,Date Reported,Days away from Work (H),Is the incident OSHA Reportable?,Total Days Away From Work,Name of injured employee,Employee Type,Reported By,Witness (Name and Phone #),This Incident is an,"Select ""Injury"" or choose Illness Type: (M)",Was employee taken to the hospital?,Was this a recurring incident?,Cause of Injury,Injury Type,Body Part Injured,Body Fluid Exposure?,Did Injury/Illness occur on AECI premises?
2858,7/24/2012,HQ,Accounting and Finance,,,No,,,,,,,Environmental,No,,,,,,No,
2852,7/23/2012,TH,TH - RESULTS/LAB,2012-07-23t00:07:00,0,No,,****, ****,Represented,****, ****,,(1) Information Only,Environmental,No,,...   Acid Chemicals  ,...   No Physical Injury,...   Facial Bones  ,,Yes, 
```

我只想删除行尾的注释。这是我删除末尾的逗号后的样子：,

```
Incident No.,Incident Date,Location Code,Location,Date Reported,Days away from Work (H),Is the incident OSHA Reportable?,Total Days Away From Work,Name of injured employee,Employee Type,Reported By,Witness (Name and Phone #),This Incident is an,"Select ""Injury"" or choose Illness Type: (M)",Was employee taken to the hospital?,Was this a recurring incident?,Cause of Injury,Injury Type,Body Part Injured,Body Fluid Exposure?,Did Injury/Illness occur on AECI premises?
2858,7/24/2012,HQ,Accounting and Finance,,,No,,,,,,,Environmental,No,,,,,,No2852,7/23/2012,TH,TH - RESULTS/LAB,2012-07-23t00:07:00,0,No,,****, ****,Represented,****, ****,,(1) Information Only,Environmental,No,,...   Acid Chemicals  ,...   No Physical Injury,...   Facial Bones  ,,Yes2849,7/21/2012,HQ,New Madrid,,,No,,,,,,,Environmental,No,,,,,, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:33:20.183

当您在那里有逗号时，XLST 处理器会将其视为要输出的文本，因此输出逗号以及其后的换行符。

去掉逗号，xsl 元素之间只有空格，然后处理器会忽略它，不会输出。

一种解决方案是显式输出逗号当前所在的换行符：

```
<xsl:value-of select=""'&#10;'"" /> 
```

或者也许（做回车和换行）

```
<xsl:value-of select=""'&#13;&#10;'"" /> 
```

# php - 如何验证请求来自 PHP 中的某个网关？

> ID：11669754
> 
> 赞同：0
> 
> 时间：2012-07-26T12:53:38.917
> 
> 标签：php, mysql, token, gateway, gateways

我已经构建了一个 Web 应用程序，允许用户从那里查看一些数据。在家里，每个用户都有一个将这些数据发布到 php 脚本的网关。然后该脚本将数据插入到我的 MySQL 数据库中。

我需要脚本来验证它正在处理的请求是否来自网关和正确的网关。通过这种方式，不允许从其他人的网关推送数据或仅使用网络浏览器传递虚假数据。但是如何构建呢？

我想出了以下解决方案：

1.  检查 HTTP 标头以查看使用的用户代理。
2.  验证 IP 地址，因为它保存在数据库中。
3.  使用令牌系统。

我知道 IP 地址检查不是一个很好的解决方案，因为公共 IP 可能会更改或被其他人使用。但是最好的解决方案是什么？你们对令牌系统有任何提示或示例代码吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:05:08.497

最好的解决方案是第三种，令牌系统，因为用户代理可以使用浏览器插件或其他方式更改，IP 地址可能是动态的，即使您同时使用用户代理和 IP 地址检查，您也有很大机会识别用户错误的。但是在使用令牌系统的情况下，当令牌将动态生成并且只存在于下一个请求时，它将使您的应用程序更加安全。[这是](http://www.jasny.net/articles/a-better-token-algorithm-with-php/)一个很好的例子：

# c# - 安装文件中的配置缺少 C# .NET 服务参考设置

> ID：11669757
> 
> 赞同：0
> 
> 时间：2012-07-26T12:53:58.830
> 
> 标签：c#, .net, installation, app-config

我有一个引用 WCF 服务的 C# 类库。这会在 app.config 中创建服务设置。当我构建应用程序时，设置正确地位于 appname.dll.config 中。但是，当安装应用程序创建 setup.exe 并将其安装在另一台机器上时，其中的配置文件缺少服务引用。它只有我的实体框架模型的连接字符串。

为什么会这样？我需要服务参考设置，因为运行服务的机器可能会不时更改。

编辑：似乎没有人理解这个问题。我的安装应用程序将 dll 以及 dll.config 安装到目标目录。我知道我需要将该配置复制到 exe 应用程序，但现在没有。这将取决于该机器上的客户端将其从该目标文件夹复制到任何需要的位置。问题是 dll.config 不包含服务设置，即使 dll 的 app.config 包含并且 dll 的发布目录中的 dll.config 也包含。由于某种原因，创建 setup.exe 并打包 dll.config 的安装应用程序正在丢失此信息。我希望这能让它更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:10:50.740

当您在需要配置设置的 dll 中编写代码时，这些设置将添加到 dll 的 app.config 中。当您想在 exe（或网站）中使用该 dll 时，您需要将适当的设置从 dll 的配置复制到 exe 的配置。

一旦你这样做了，安装程序应该得到 exe 的配置并具有正确的配置部分。

如果您没有该 exe 的 app.config，请创建一个。如果您有一个并且安装程序没有安装它，请确保它正在安装它。应用程序域仅在一个文件中查找配置，默认为 exe 的应用程序配置。你要让它工作的*唯一方法是将这些信息放入 exe 的应用程序配置中。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:58:38.327

在我看来，服务设置将进入类库配置文件。您能否检查它们是否也进入了您的主应用程序可执行文件的 app.config 文件。

# maven - Maven 下的 Izpack 使用错误的“installFile”

> ID：11669761
> 
> 赞同：0
> 
> 时间：2012-07-26T12:54:04.163
> 
> 标签：maven, maven-3, izpack

我正在使用 Maven 使用 IzPack 构建安装程序。据我所见（POM 的相关部分包括在下面），我要求安装文件为 ${basedir}/izpack/release.xml。

在实践中（在 maven 上使用 -e 时）我得到以下调试：

*   [调试] 使用基本配置器配置 mojo 'org.codehaus.izpack:izpack-maven-plugin:5.0.0-beta10:izpack'
*   [调试] (f) baseDir = C:\Users\Phil\git\v2\Install\target/staging
*   [调试] (f) comprFormat = 默认
*   [调试] (f) comprLevel = -1
*   [调试] (f) installFile = C:\Users\Phil\git\v2\Install/src/main/izpack/install.xml
*   [调试] (f) 种类 = 发布
*   [调试] (f) 输出 = C:\Users\Phil\git\v2\Install\target/install-2.4.5-SNAPSHOT-installer.jar [调试] (f) 项目 = MavenProject: com.erudine:install: 2.4.5-SNAPSHOT @ C:\Users\Phil\git\v2\Install\pom.xml

重要的一点是安装文件是../src/main。我在这个项目中实际上没有 src/main，所以看起来我错误地选择了默认值。

页面[http://izpack.codehaus.org/izpack-maven-plugin/izpack-mojo.html](http://izpack.codehaus.org/izpack-maven-plugin/izpack-mojo.html)描述了属性，据我所知，描述符是正确使用的。如果我将描述符移到配置块之外，我会得到“无法识别的标签”，所以我怀疑它在正确的位置但被忽略了。

我已将 release.xml 移动到 [debug] 指定的文件位置，令我惊讶的是，安装程序做到了，所以我认为其余的配置是正确指定的。但是，我确实有多个要创建的单独安装程序，并且我希望能够控制描述符。

软件栈

*   Windows 7的
*   jdk1.6.0_29-b11
*   Maven 3.0.3
*   izpack 5.0.0-beta10

Maven POM org.codehaus.izpack izpack-maven-plugin 5.0.0-beta10

```
 <executions>
            <execution>
                <id>build-izpack-release-installer</id>
                <phase>package</phase>
                <goals>
                    <goal>izpack</goal>
                </goals>
                <configuration>
                    <descriptor>${basedir}/izpack/release.xml</descriptor>
                    <izpackBasedir>${staging.dir}</izpackBasedir>
                    <kind>release</kind>
                </configuration>
            </execution>
        </executions>

    </plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:21:12.180

好的，经过一番调查，我得出的结论是（惊讶）文档是错误的。要使用的正确标签是 <installFile>

# iphone - UITableViewCell 中的 UILabel 制作自定义单元格而不制作单独的类

> ID：11669766
> 
> 赞同：0
> 
> 时间：2012-07-26T12:54:21.487
> 
> 标签：iphone, ios, xcode, uitableview, nsmutablearray

在我的表格视图单元格中，我需要在单个单元格中显示我的数组元素的内容，如果我插入任何新内容，则不会覆盖以前的内容。以前的内容和我的新内容应该按顺序显示。这里是我的代码

```
- (void)viewDidLoad
{
[super viewDidLoad];

NSMutableArray *arrMain=[NSMutableArray arrayWithObjects: cnfqty, cnftitle, cnfrate, nil];

finarray=[[NSMutableArray alloc]init];
[finarray addObjectsFromArray:arrMain];
   NSLog(@"%@",finarray);

}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
 {
return (interfaceOrientation == UIInterfaceOrientationPortrait);
 }

 #pragma mark - Table view data source

 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
 {

// Return the number of sections.
return 1;
}

 -(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
 {

return 150.0;

 }

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
 // Return the number of rows in the section.
return ( [finarray count] / 3 ); 
}

 - (UITableViewCell *) getCellContentView:(NSString *)cellIdentifier {

UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];

UILabel *tempLabel;
//UIImage *tempImage;

/* Create UI elements - Customize as you want your text to appear */

CGRect myFirstLabel = CGRectMake (65, 10, 200, 15);
CGRect mySecondLabel = CGRectMake (65, 25, 200, 15);
CGRect myThirdLabel = CGRectMake (65, 40, 200, 15);
 //  CGRect myImage = CGRectMake (10, 10, 50, 50);

//Initialize first label
tempLabel = [[UILabel alloc] initWithFrame: myFirstLabel];
tempLabel.tag = 1;
tempLabel.font = [UIFont boldSystemFontOfSize:12];
tempLabel.textColor = [UIColor lightGrayColor];
[cell.contentView addSubview: tempLabel];

//Initialize second label
tempLabel = [[UILabel alloc] initWithFrame: mySecondLabel];
tempLabel.tag = 2;
tempLabel.font = [UIFont boldSystemFontOfSize:12];
tempLabel.textColor = [UIColor lightGrayColor];
[cell.contentView addSubview: tempLabel];

//Initialize third label
tempLabel = [[UILabel alloc] initWithFrame: myThirdLabel];
tempLabel.tag = 3;
tempLabel.font = [UIFont boldSystemFontOfSize:12];
tempLabel.textColor = [UIColor lightGrayColor];
[cell.contentView addSubview: tempLabel];

//Initialize your picture
//imgTemp = [[UIImageView alloc] initWithFrame: myImage];
//imgTemp.tag = 4;
//[cell.contentView addSubview: tempImage];

return cell;
 }

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"aCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [self getCellContentView: CellIdentifier];
}

//This will create the actual UI elements
UILabel *tempLabel1 = (UILabel *)[cell viewWithTag: 1];
UILabel *tempLabel2 = (UILabel *)[cell viewWithTag: 2];
UILabel *tempLabel3 = (UILabel *)[cell viewWithTag: 3];
//UIImageView *tempImage = (UIImageView *)[cell viewWithTag: 4];

// Populate the labels
NSString *firstText = [NSString stringWithString: [finarray objectAtIndex: 3*(indexPath.row)]];
NSString *secondText = [NSString stringWithString: [finarray objectAtIndex: 3*(indexPath.row) + 1]];
NSString *thirdText = [NSString stringWithString: [finarray objectAtIndex: 3*(indexPath.row) + 2]];

// Populate the picture
//UIImage *picture = [[UIImage alloc] initWithData:theObjectToPutInCell.picture];

tempLabel1.text = firstText;
tempLabel2.text = secondText;
tempLabel3.text = thirdText;

 // tempImage.image = picture;

return cell;  

}
}

@end 
```

我的代码面临的问题是每个字符串都显示在每个单元格中，如果我插入任何新字符串，以前的内容就会消失，只显示新内容。

为了清楚地了解这个问题，我正在尝试为在线购物实现“添加到购物车”服务。根据概念，必须从各种产品中添加项目，它会保存产品信息，并且必须在表格视图中显示详细信息.但我不明白..

请指导..提前谢谢..

我的输出就像第一张图片

![在此处输入图像描述](../Images/e493ee4041ff20c16b0878fbc6c9b0ac.png)

但我需要将显示为在 Android 中完成的第二张图像.. ![在此处输入图像描述](../Images/fd8feed28baf50a1ad54eca37f9191eb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:17:20.393

您可以尝试以下方法：

创建一个像这样的函数来创建所有需要的图形元素：

```
// Cell appearence editing
- (UITableViewCell *) getCellContentView:(NSString *)cellIdentifier {

    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];

    UILabel *tempLabel;
    UIImage *tempImage;

    /* Create UI elements - Customize as you want your text to appear */

    CGRect myFirstLabel = CGRectMake (65, 10, 200, 15);
    CGRect mySecondLabel = CGRectMake (65, 25, 200, 15);
    CGRect myThirdLabel = CGRectMake (65, 40, 200, 15);
    CGRect myImage = CGRectMake (10, 10, 50, 50);

    //Initialize first label
    tempLabel = [[UILabel alloc] initWithFrame: myFirstLabel];
    tempLabel.tag = 1;
    tempLabel.font = [UIFont boldSystemFontOfSize:12];
    tempLabel.textColor = [UIColor lightGrayColor];
    [cell.contentView addSubview: tempLabel];

    //Initialize second label
    tempLabel = [[UILabel alloc] initWithFrame: mySecondLabel];
    tempLabel.tag = 2;
    tempLabel.font = [UIFont boldSystemFontOfSize:12];
    tempLabel.textColor = [UIColor lightGrayColor];
    [cell.contentView addSubview: tempLabel];

    //Initialize third label
    tempLabel = [[UILabel alloc] initWithFrame: mySecondLabel];
    tempLabel.tag = 3;
    tempLabel.font = [UIFont boldSystemFontOfSize:12];
    tempLabel.textColor = [UIColor lightGrayColor];
    [cell.contentView addSubview: tempLabel];

    //Initialize your picture
    imgTemp = [[UIImageView alloc] initWithFrame: myImage];
    imgTemp.tag = 4;
    [cell.contentView addSubview: tempImage];

    return cell;
} 
```

然后，在您的 cellForRowAtIndexPath 中，调用“设计函数”并用您的内容填充它：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"aCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [self getCellContentView: CellIdentifier];
    }

    //This will create the actual UI elements
    UILabel *tempLabel1 = (UILabel *)[cell viewWithTag: 1];
    UILabel *tempLabel2 = (UILabel *)[cell viewWithTag: 2];
    UILabel *tempLabel3 = (UILabel *)[cell viewWithTag: 3];
    UIImageView *tempImage = (UIImageView *)[cell viewWithTag: 4];

    // Populate the labels
    NSString *firstText = [NSString stringWithString: [finarray stringAtIndex: 3*(indexPath.row)]];
    NSString *secondText = [NSString stringWithString: [finarray stringAtIndex: 3*(indexPath.row) + 1]];
    NSString *thirdText = [NSString stringWithString: [finarray stringAtIndex: 3*(indexPath.row) + 2]];

    // Populate the picture
    UIImage *picture = [[UIImage alloc] initWithData:theObjectToPutInCell.picture];

    tempLabel1.text = firstText;
    tempLabel2.text = secondText;
    tempLabel3.text = thirdText;

    tempImage.image = picture;

    return cell;

} 
```

让我知道它是否有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:51:27.317

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    return [itemsData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   // static NSString *CellIdentifier = @"Cell";
    NSString *CellIdentifier = [NSString stringWithFormat:@"%d", indexPath.row] ;
    UILabel *lblTitle = nil;
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        lblTitle =[[UILabel alloc]initWithFrame:CGRectMake(5, 15, 110, 44)];
        lblTitle.backgroundColor = [UIColor clearColor];
        lblTitle.textColor = [UIColor whiteColor];
        lblTitle.font = [UIFont systemFontOfSize:11.0];
        lblTitle.tag = 1;
        lblTitle.numberOfLines = 0;

        UILabel *lblType =[[UILabel alloc]initWithFrame:CGRectMake(125, 0, 75, 44)];
        lblType.backgroundColor = [UIColor clearColor];
        lblType.textColor = [UIColor whiteColor];
        lblType.font = [UIFont systemFontOfSize:11.0];
        lblType.tag = 2;

        UILabel *lblDate =[[UILabel alloc]initWithFrame:CGRectMake(200, 0, 60, 44)];
        lblDate.backgroundColor = [UIColor clearColor];
        lblDate.textColor = [UIColor whiteColor];
        lblDate.font = [UIFont systemFontOfSize:11.0];
        lblDate.tag = 3;

        UILabel *lblTime =[[UILabel alloc]initWithFrame:CGRectMake(265, 0, 50, 44)];
        lblTime.backgroundColor = [UIColor clearColor];
        lblTime.textColor = [UIColor whiteColor];
        lblTime.font = [UIFont systemFontOfSize:11.0];
        lblTime.tag = 4;

        [tableView beginUpdates];
        [tableView endUpdates]; 
        [cell.contentView addSubview:lblTitle];
        [cell.contentView addSubview:lblType];
        [cell.contentView addSubview:lblDate];
        [cell.contentView addSubview:lblTime];

    }

NSString *text = [NSString stringWithFormat:@"%@,%@,%@",[[itemsData objectAtIndex:indexPath.row] objectForKey:@"address"],[[itemsData objectAtIndex:indexPath.row] objectForKey:@"title"],[[itemsData objectAtIndex:indexPath.row] objectForKey:@"zipcode"]];

    CGSize constraint = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), 20000.0f);

    CGSize size = [text sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:UILineBreakModeCharacterWrap];

    if (!lblTitle)
        lblTitle = (UILabel*)[cell viewWithTag:1];

    [lblTitle setText:text];
    [lblTitle setFrame:CGRectMake(CELL_CONTENT_MARGIN, CELL_CONTENT_MARGIN, CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), MAX(size.height, 44.0f))];

    UILabel *lblType = (UILabel *) [cell.contentView viewWithTag:2];
    lblType.text =[[itemsData objectAtIndex:indexPath.row] objectForKey:@"type"];

    UILabel *lblDate = (UILabel *) [cell.contentView viewWithTag:3];
    lblDate.text =[[itemsData objectAtIndex:indexPath.row] objectForKey:@"date"];

    UILabel *lblTime = (UILabel *) [cell.contentView viewWithTag:4];
    lblTime.text =[[itemsData objectAtIndex:indexPath.row] objectForKey:@"time"];

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T11:59:10.970

最后我通过以下代码得到了它

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"aCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
UILabel *label1=[[UILabel alloc]init];
label1.frame=.....;
................
[cell.contentView addSubView: label1];

UILabel *label2=[[UILabel alloc]init];
label2.frame=.....;
................
[cell.contentView addSubView: label2];

UILabel *label3=[[UILabel alloc]init];
label3.frame=.....;
................
[cell.contentView addSubView: label3];
} 
```

标签的文本是从单个数组元素分配的，如下所示

```
NSMutableArray *label1Array=[NSMutableArray arrayWithObjects:@"",@"",nil];
NSMutableArray *label2Array=[NSMutableArray arrayWithObjects:@"",@"",nil];
NSMutableArray *label3Array=[NSMutableArray arrayWithObjects:@"",@"",nil]; 
```

# linux - Linux：如何不根据屏幕宽度限制顶部的输出

> ID：11669768
> 
> 赞同：2
> 
> 时间：2012-07-26T12:54:23.807
> 
> 标签：linux

编辑：我因偏离主题而受到惩罚。我编辑了我用作示例的文件方法，并从现实中插入了 C++ 方法。

我正在使用 C++ popen 发出一个*top*命令来将系统信息输入我的程序，然后输入一个我可以发送到系统外的 xml 文件。我将 top 的输出解析为各种变量（痛苦的代码），这些变量被输入到 xml 中。

*top*非常有用地截断它的输出宽度以适应屏幕，即使在输出被重定向到管道的批处理模式下也是如此。

```
popen( "top -b -n 1", "r" ); 
```

如果将输出发送到文件，则工作方式相同。

有没有办法告诉 top 显示其所有字段（以批处理模式），即使它们会从屏幕右侧掉下来？

注意：在我的特殊情况下，我在我的工作站上运行了我的 c++ 顶级解析器，并且得到了，比如说，每个 PID 15 列。然后我在行中更改为更少的字符（更大的文本）。我完全失去了第 15 场。然后我尝试了一种中间字体，除了第 15 字段的一列之外，其他所有内容都返回了。该字段以 %st 结尾，我指望它这么说，而不是 %s。解决这个问题需要是通用的，而不是基于个别情况。

谢谢您的帮助。我查了谷歌，它知道很多关于顶级的信息，但只是如何问......

注意：如果您想看到这种现象，请在通常的命令窗口中运行 top 将输出捕获到文件或管道，然后更改窗口中的字体以在终端窗口的每一行中包含更多字符并重新运行命令.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T12:57:47.300

尝试设置`COLUMNS`环境变量：

```
$ COLUMNS=10000 top 
```

# java - 使用 MyBatis 无法在 Java 中捕获 SQLSyntaxErrorException

> ID：11669770
> 
> 赞同：3
> 
> 时间：2012-07-26T12:54:27.773
> 
> 标签：java, exception, exception-handling, try-catch, mybatis

我目前面临以下问题：

我编写了一个解析 XML 数据并将数据放入数据库的 Java 程序。因为我使用 MyBatis，所以数据库几乎可以是所有已经存在的数据库。我只是给你看一段代码，然后我会解释这个问题。

```
public void insert(SourceContent content){    
    SqlSession session = sqlSessionFactory.openSession();           
        try {
            session.insert("SourceDocument.insert", content);
            session.commit();
        }   catch (Exception e){
            e.printStackTrace();
        } finally {
            session.close();
        }           
    } 
```

这是我的 DAO 类，用于调用 MyBatis 映射器文件的 sql 语句。如果 MyBatis 的映射配置正确完成，插入我的内容（这是一个 java bean 的实例）就没有问题了。但是想象一下，如果我在我的数据库中重命名一个表，那么连接失败是因为配置错误。现在我想捕捉即将到来的错误。当我使用上面的语句时：

```
catch (Exception e){
            e.printStackTrace();
        } 
```

程序打印正确的异常：### Cause: java.sql.SQLSyntaxErrorException: ORA-00942: Tabelle oder View nicht vorhanden 但我不想捕获所有异常，我只想捕获 SQLSyntaxErrorException，因为我想告诉用户，表示数据库中的他的表不可用。但是除了上面看到的正常异常之外，我无法捕获任何其他异常。我希望我已经说清楚了。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T12:58:24.993

您的异常已被包装到另一个异常中。捕获其他异常，然后分析其原因。例如：

```
try {
   ....
} catch (PersistenceException e) {
  try { throw e.getCause(); }
  catch (SQLSyntaxException e) {
    // handle the exception
  }
} 
```

如果这不令人满意，您可以`instanceof`改为调查原因：

```
try {
   ....
} catch (PersistenceException e) {
  final Throwable cause = e.getCause();
  if (cause instanceof SQLSyntaxException) {
    // handle the exception
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T06:32:08.450

我正在做Marko所说的，但是我找到了一种在mybatis上捕获sql异常的更优雅的方法。

例如，如果您在 Java 类上定义映射器，则可以让每个方法都抛出 MySQLIntegrityConstraintViolationException。然后当你调用一个映射器函数时，只插入一个 MySQLIntegrityConstraintViolationException 异常类型的 catch 块。

在映射器上：

```
@Select({
    "SELECT * FROM device WHERE id = #{id} AND deleted=0"
})
public Device getDeviceById(@Param("id") int id)  throws MySQLIntegrityConstraintViolationException; 
```

无论您在哪里使用映射器：

```
try{
        mapper.registerAndroidDevice(newDevice);
        return newDevice.getId();
    }catch(MySQLIntegrityConstraintViolationException sql){
        logger.error("Constraint violation",sql);
        return -1;
    }catch(Exception e){
        logger.error("Error inserting Android device into Database", e);
        return -1;
    } 
```

当然你可以用其他 SQL jdbc4 异常来做这件事，因为是 mybatis 内部使用的库。

# iphone - iPhone 中的应用程序驻留大小和脏大小

> ID：11669771
> 
> 赞同：1
> 
> 时间：2012-07-26T12:54:32.807
> 
> 标签：iphone, objective-c, ios, memory-management

当我的应用程序启动时，它的常驻大小将为 114MB，而脏大小约为 45MB。当我使用该应用程序时，“常驻”和“脏”大小不断增加，最大分别为 170MB 和 100MB。在节省时，驻留和脏大小分别增加到 300MB 和 224MB。实际上，大约有 324 张图像，其中 108 幅图像的分辨率为 55x72，108 幅图像的分辨率为 562x562，其余 108 幅图像的分辨率为 2244x2244。

为了在 Scrollview 中显示所有图像，我使用大小为 55x72 的缩略图图像。为了处理图像，我使用大小为 562x562 的代理图像，并在保存时使用大小为 2244x2244 的高分辨率图像。

我在保存之前释放所有缩略图和代理图像，以减少内存并释放所有在保存过程中无用的对象。我将图像分成 4 个部分，然后将它们合并为一个图像，以减少内存消耗。

我正在使用 [UIImage imageWithContentsOfTheFile] 方法，并且我使用自动释放池在图像设置为 ImageView 后立即排空。程序中不存在内存泄漏。

如果应用程序使用大约 300MB 的常驻空间和 224MB 的 Dirty 大小，应用程序是否会在任何时候崩溃？

# asp.net - 管理 Web 程序集版本控制和单个 dll 版本

> ID：11669780
> 
> 赞同：1
> 
> 时间：2012-07-26T12:55:09.317
> 
> 标签：asp.net, iis-6, version

作为我们发布程序的一部分，我的公司发布了几个网站。一般来说，这一切都是在每个人都同意的时间点完成的，等等。

我们根据我们的 subversion SVN 修订号对我们的 dll 进行强烈版本控制。所以：

```
[assembly: AssemblyVersion("2.22.0.13724")]
[assembly: AssemblyFileVersion("2.22.0.13724")] 
```

其中 dll 版本是 MajorVersion.release.minorversion.SVNRevision 编号。

一切都很好，而且可以很好地追踪。

有时，我们必须在主要发布计划之外进行紧急发布。为了尽量减少影响，我们通常会发布单个 dll。

我们发现，如果我们更改版本号，那么这会破坏网站。不知道为什么，我必须承认，但我假设这与 IIS 或什么有关？！

现在正在实施一个系统，该系统将读取并报告从 dll 中反映的版本。（不用担心，我们已经准备好使用单例和反射来做到这一点）。

所以我的问题是：有没有办法在不破坏通过 IIS6 运行的构建的情况下更新单个 dll 的版本号？IIS 如何引用它需要的 dll，这与该 dll 的版本有什么关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:58:40.433

IIS 不应该与它有任何关系。应用程序中的所有其他程序集都在引用某个 DLL，如果您只是放入具有新版本号的新 DLL，则引用旧 DLL 的那些 DLL 现在将中断。IIS 只是为您将所有内容编译在一起。但是，如果程序集 A 正在寻找程序集 B、V1 并且您替换了 Assembvly B、V2，则程序集 A 的引用现在无效。

# asp.net - 无法更新 Gridview 中文本框的值：对象引用未设置为对象的实例

> ID：11669787
> 
> 赞同：2
> 
> 时间：2012-07-26T12:55:28.387
> 
> 标签：asp.net, gridview

我正在使用编辑模板`gridview`来更新一些控制值`dropdowns`，例如等。`textboxes`我在更新功能上找到了这些控制，如下所示：

```
string dd1 = ((DropDownList)OwnerGrid.Rows[e.RowIndex].FindControl("ddl1")).SelectedItem.Text.Trim();

string actual = ((TextBox)OwnerGrid.Rows[e.RowIndex].FindControl("txtowneractual")).Text.Trim(); 
```

我已经绑定了下拉列表，我在更新之前从中选择项目。我也在更新之前填充文本框。文本框未绑定。

当我点击更新时，它会抛出“ `Object reference not set to instance of an object`”错误。我已经调试了代码，`textbox`当我获得`dropdown`价值时，价值是空的。

问题是什么？

文本框设计器：

```
<asp:TemplateField HeaderText = "Actual" >

<EditItemTemplate>
                <asp:TextBox ID="txtowneractual" Width="80px" runat="server" ></asp:TextBox>                  

</EditItemTemplate>
<ItemTemplate>               

</ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:12:27.040

我认为您的文本框位于“编辑项”模板中，因此您获得了空引用异常。尝试这样的事情

```
if (e.Row.RowState == DataControlRowState.Edit )
 {
string actual = ((TextBox)OwnerGrid.Rows[e.RowIndex].FindControl("txtowneractual")).Text.Trim();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:02:26.097

检查您的文本框的 id 是否为“txtowneractual”。

并改用以下代码。

```
TextBox txtOwnerActual = (TextBox)OwnerGrid.Rows[e.RowIndex].FindControl("txtowneractual");

if(txtOwnerActual  != null)
{
       string actual = txtOwnerActual.Text.Trim();
} 
```

# java - 预编译 JSP 和 标签

> ID：11669797
> 
> 赞同：0
> 
> 时间：2012-07-26T12:56:01.173
> 
> 标签：java, jsp, tomcat

我有 /WEB-INF/jsp/info/1.jsp 映射到 URI /info/1：

```
<servlet>
    <servlet-name>/info/1</servlet-name>
    <jsp-file>/WEB-INF/jsp/info/1.jsp</jsp-file>
</servlet>
<servlet-mapping>
    <servlet-name>/info/1</servlet-name>
    <url-pattern>/info/1</url-pattern>
</servlet-mapping> 
```

使用 apache tomcat 中的 jspc ant 任务预编译 JSP 后，以下行添加到 web.xml：

```
<servlet>
    <servlet-name>org.apache.jsp.WEB_002dINF.jsp.info._1_jsp</servlet-name>
    <servlet-class>org.apache.jsp.WEB_002dINF.jsp.info._1_jsp</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>org.apache.jsp.WEB_002dINF.jsp.info._1_jsp</servlet-name>
    <url-pattern>/WEB-INF/jsp/info/1.jsp</url-pattern>
</servlet-mapping> 
```

然后当我导航到 /info/1 时，tomcat 再次编译 JSP。我该如何纠正这种情况？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-26T12:59:11.043

您不必纠正这种情况，因为它已正确设置。每个 jsp 页面都被编译为一个 servlet 类。您的预编译所做的基本上是应用程序服务器在第一次加载 jsp 页面时在运行时所做的。

# php - linux下编辑PHP ini文件的问题

> ID：11669799
> 
> 赞同：0
> 
> 时间：2012-07-26T12:56:07.410
> 
> 标签：php, linux, parallels

尝试在 PHP 中创建 SOAP 连接时出现以下问题

```
AutoLoader did not find file for 'SoapClient'! 
```

我还检查了我的 phpinfo() 文件，但我没有看到任何 SOAP 机制，所以我认为服务器上没有安装（启用？）SOAP？

因此，如果这是真的，我将如何安装 SOAP？是否像使用以下内容编辑 php.ini 文件一样简单：

```
extension=php_soap.dll
extension_dir = "<full path to the 'ext' directory>"

and making sure i have php_soap.dll in the ext path? 
```

但这也有问题。它在 linux 服务器上运行，我们没有（或找不到选项）编辑 ini 文件，甚至使用 Parallels 访问它。

服务器运行 PHP 版本 5.3.3 和 Apache 版本 20051115

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:00:01.820

使用`sudo nano /dir/to/php/intall/php.ini`输入（有点）root用户的密码，并确保在退出nano之前写出数据。

然后重新启动您的 apache2 服务`sudo service apache2 restart`并享受 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:02:00.150

使用 debian 衍生产品（如 ubuntu）

```
sudo apt-get install php-soap 
```

也许你必须在那之后重新启动服务器。

# c# - 加载窗口出现 WPF 错误

> ID：11669803
> 
> 赞同：1
> 
> 时间：2012-07-26T12:56:21.050
> 
> 标签：c#, wpf, xaml

我有一个 wpf 窗口，开始时我用后台工作线程填充一个列表视图。我想在线程执行时放置一个加载窗口。所以我创建了另一个带有进度条的 wpf 窗口。当我调用 worker.RunWorkerAsync() 时，列表视图会正常填充。但是如果我创建一个新的加载窗口，我看不到我的基本 wpf 窗口。如果我关闭加载窗口，我会看到我的基本 wpf 窗口，但列表视图是空的。

我的加载窗口 xaml：

```
<Window x:Class="WpfApplication1.Loading"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Loading..." Height="100" Width="400" ResizeMode="NoResize">
<Grid>
    <ProgressBar Name="pb" VerticalAlignment="Center" Orientation="Horizontal" Width="350" Height="20" IsIndeterminate="True" Margin="0,0,0,0" HorizontalAlignment="Center"></ProgressBar>
</Grid> 
```

我调用加载窗口：

```
worker.RunWorkerAsync();
Loading l = new Loading();
l.ShowDialog(); 
```

# sql - 您可以在 Access 中进行行锁定吗？

> ID：11669804
> 
> 赞同：2
> 
> 时间：2012-07-26T12:56:22.127
> 
> 标签：sql, ms-access, jet, rowlocking

您可以在 Access/JET 中进行行锁定吗？

例如，您可以在 JET SQL 中执行以下操作：

```
UPDATE Test WITH (ROWLOCK) 
SET UpdateDate = myDate 
WHERE PrimaryKey = myKey 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:02:54.323

从[这篇文章](http://www.utteraccess.com/forum/Record-Lock-Access-2003-t706738.html)：

开放存取。然后单击工具->选项并选择“高级”选项卡。

在那里，您会发现三个用于设置默认记录锁定的选项。您还将找到一个标有“使用记录级锁定打开数据库”的复选框。使用“帮助”了解每个选项对您的作用，并选择您喜欢的数据库选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:02:36.020

据我所知，您只能通过选项而不是 SQL 来实现这一点 ![选项->高级](../Images/e8e976dfaeaf31d8039e14bcc89a109c.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:02:29.000

Access 没有我知道的查询提示。

它应该可以在数据库级别进行配置。例如，在 Access 2003 中，您可以转到 `Tools > Options`，转到`Advanced`选项卡，然后您会找到`Default record locking`选项，它为您提供以下选择：

*   没有锁
*   所有记录
*   编辑记录

此外，其`Open databases using record-level locking`下方还有一个复选框。

# jsf - 如何使 JSF 项目中的所有页面都可收藏？

> ID：11669813
> 
> 赞同：0
> 
> 时间：2012-07-26T12:57:06.743
> 
> 标签：jsf, java-ee-6, bookmarks, myfaces

在我开始实现一些代码之前。我想确定这些技术。

就我而言，我希望能够为每一页添加书签。

我应该考虑什么才能使它成为可能。

在项目中我将使用：

*   我的脸（JSF）
*   MVP
*   JPA 2.0

我应该如何构建/启动项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T12:59:49.927

只需使用 GET 而不是 POST 进行页面导航。

这与使用的 JSF 实现无关，也与 MVP（实际上是 MVC）方法无关，也与您是否使用 JPA 无关，更不用说项目结构了。

### 也可以看看：

*   [什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)

# wordpress - Wordpress 添加额外用户个人资料字段的问题

> ID：11669817
> 
> 赞同：2
> 
> 时间：2012-07-26T12:57:20.597
> 
> 标签：wordpress, google-plus

我在将自定义字段添加到 wordpress 用户配置文件并将输入的字段显示在网站前面时遇到问题。使用下面的教程，我以为我可以正常工作，但注意到实际上它只适用于一个用户，然后所有其他用户都不起作用，这让我感到困惑，因为我习惯了工作或不工作的事情，而这适用于我尝试过的第一个用户，但不适用于其他用户。

我看起来高低尝试不同的东西无济于事。

我这样做的目的是允许多个 wordpress 用户将他们的 Google+ 个人资料添加到具有 rel 属性的特定作者的帖子上的 wordpress 头部。

这是我用过的教程

[http://bavotasan.com/2009/adding-extra-fields-to-the-wordpress-user-profile/](http://bavotasan.com/2009/adding-extra-fields-to-the-wordpress-user-profile/)

这是我用于该功能的代码

1 - 这会将字段添加到用户配置文件

```
/* Add Additional Fields to Author Profile */

add_action( 'show_user_profile', 'my_show_extra_profile_fields' );
add_action( 'edit_user_profile', 'my_show_extra_profile_fields' );

function my_show_extra_profile_fields( $user ) { ?>

    <h3>Extra profile information</h3>

    <table class="form-table">

        <tr>
            <th><label for="u-profs">Profile Info</label></th>

            <td>
                <input type="text" name="u-profs" id="u-profs" value="<?php echo esc_attr( get_the_author_meta( 'u-profs', $user->ID ) ); ?>" class="regular-text" /><br />
                <span class="description">Enter Your Profile Info.</span>
            </td>
            <td>
                <input type="text" name="u-profs2" id="u-profs2" value="<?php echo esc_attr( get_the_author_meta( 'u-profs2', $user->ID ) ); ?>" class="regular-text" /><br />
                <span class="description">Enter Your Google+ Url.</span>
            </td>
        </tr>

    </table>
<?php }

add_action( 'personal_options_update', 'my_save_extra_profile_fields' );
add_action( 'edit_user_profile_update', 'my_save_extra_profile_fields' );

foreach($user_ids as $user_id){
    update_user_meta( $user_id, 'u-profs2', $_POST['u-profs2'] );
}

function my_save_extra_profile_fields( $user_id ) {

    if ( !current_user_can( 'edit_user', $user_id ) )
        return false;

    /* Copy and paste this line for additional fields. Make sure to change 'u-profs' to the field ID. */
    update_user_meta( $user_id, 'u-profs', $_POST['u-profs'] );
    update_user_meta( $user_id, 'u-profs2', $_POST['u-profs2'] );
} 
```

2 - 这将获取字段内容并将其添加到 wordpress 的 wp_head

```
 /* Google Rel Author */

function google_rel_author_in_document_head() {
echo '<link rel="author" href="' . get_the_author_meta('u-profs2') . '"/>';
}
add_action('wp_head', 'google_rel_author_in_document_head',99); 
```

StackOverflow 上的这个链接似乎是一个类似的问题，但没有解决......

[Wordpress 中的多个 update_user_meta](https://stackoverflow.com/questions/4546768/multiple-update-user-meta-in-wordpress)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T14:16:42.027

是的，我最终找到了工作代码......

```
/* Add Additional Fields to Author Profile */

add_action( 'show_user_profile', 'my_show_extra_profile_fields' );
add_action( 'edit_user_profile', 'my_show_extra_profile_fields' );

function my_show_extra_profile_fields( $user ) { ?>

    <h3>Extra profile information</h3>

    <table class="form-table">

        <tr>
            <th><label for="u-profs">Profile Info</label></th>
            <td>
                <input type="text" name="u-profs2" id="u-profs2" value="<?php echo esc_attr( get_the_author_meta( 'u-profs2', $user->ID ) ); ?>" class="regular-text" /><br />
                <span class="description">Enter Your Google+ Url.</span>
            </td>
        </tr>

    </table>
<?php }

add_action( 'personal_options_update', 'my_save_extra_profile_fields' );
add_action( 'edit_user_profile_update', 'my_save_extra_profile_fields' );

function my_save_extra_profile_fields( $user_id ) {

    if ( !current_user_can( 'edit_user', $user_id ) )
        return false;

    /* Copy and paste this line for additional fields. Make sure to change 'u-profs' to the field ID. */
    update_user_meta( $user_id, 'u-profs2', $_POST['u-profs2'] );
}

/* Google Rel Author */

function google_rel_author_in_document_head() {
global $post;
$author_id=$post->post_author;
?>
<link rel="author" href="<?echo get_user_meta($author_id, 'u-profs2', true);?>"/>
<?
}
add_action('wp_head', 'google_rel_author_in_document_head',99); 
```

# grails - Grails -Gsp - 如何根据字段的值检查复选框

> ID：11669827
> 
> 赞同：7
> 
> 时间：2012-07-26T12:57:38.660
> 
> 标签：grails, gsp

我有一个`status`在我的域中调用的属性，它的`String`类型可以有两个值中的任何一个`Applied , NotApplied`

我有两个复选框来输入这个值。在我的编辑页面中，我想显示这两个复选框。

如果值为 ， `status`则`Applied`必须选中相应的复选框。

我的代码

```
 <g:message code="publicRuleInstance.course.label" default="Applied" />
<g:checkBox name="status " value="${publicRuleInstance?.status }" />

<g:message code="publicRuleInstance.course.label" default="NotApplied" />
<g:checkBox name="status " value="${publicRuleInstance?.status }" /> 
```

但这里两个复选框都被选中。

必须有一种方法来检查该值，即如果状态 = 已应用，则必须检查该特定复选框，否则应取消选中。

有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T05:06:00.387

[如文档](http://grails.org/doc/latest/ref/Tags/checkBox.html)中所述，使用该`checked`属性来控制复选框的状态。在这里，您可以添加任何表达式来确定 的状态：`g:checkBox`

```
<g:message code="publicRuleInstance.course.label" default="Applied" />
<g:checkBox name="status " value="Applied" checked="${publicRuleInstance?.status == 'Applied'}"/>

<g:message code="publicRuleInstance.course.label" default="NotApplied" />
<g:checkBox name="status " value="NotApplied" checked="${publicRuleInstance?.status == 'NotApplied'}"/> 
```

如果您只想允许其中一个值 -或者`Applied` **g** [:radioGroup](http://grails.org/doc/latest/ref/Tags/radioGroup.html)将是更好的选择。使用复选框，用户可以同时选择值和.`NotApplied``Applied``NotApplied`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:41:12.957

checkBox 的值应该是布尔值

```
<g:message code="publicRuleInstance.course.label" default="Applied" />
<g:checkBox name="status " value="${publicRuleInstance?.status =="Applied"}" />

<g:message code="publicRuleInstance.course.label" default="NotApplied" />
<g:checkBox name="status " value="${publicRuleInstance?.status == "NotApplied" }" /> 
```

# blackberry - Blackberry - 将一个不可见的 png 位图放在另一个上方作为新的位图/图像

> ID：11669836
> 
> 赞同：0
> 
> 时间：2012-07-26T12:58:06.507
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin, blackberry-jde

我有一个大部分是不可见的 PNG 图像，并且包含一些我们想要应用于另一个图像的水印。

我已将此 PNG 导入位图对象。我已将使用设备相机拍摄的第二张图像作为第二个 Bitmap 对象导入。

如何将 PNG 位图覆盖在第二个位图之上，保留 PNG 透明度并将生成的图像存储为新位图？

我需要存储结果，因为我会将这个最终位图传递给转换为 base64 字符串的字节数组中的 Web 服务。

我之前使用过这个，但是混合改变了图像的不透明度，这不是我想要的，我希望两个图像都是完全 100% 的不透明度，顶部是不可见的 PNG...基本上我想在一个框架上制作一个框架位图并将其存储为新图像。：

```
public static Bitmap blend( Bitmap bi1, Bitmap bi2, double weight )
{
    int width = bi1.getWidth();
    int height = bi1.getHeight();
    Bitmap bi3 = new Bitmap(width, height);
    int[] rgbim1 = new int[width];
    int[] rgbim2 = new int[width];
    int[] rgbim3 = new int[width];
    for (int row = 0; row &lt; height; row++)
    {
        bi1.getARGB(rgbim1,0,width,0,row, width,1);
        bi2.getARGB(rgbim2,0,width,0,row, width,1);
        for (int col = 0; col &lt; width; col++)
        {
            int rgb1 = rgbim1[col];
            int a1 = (rgb1 &gt;&gt; 24) & 255;
            int r1 = (rgb1 &gt;&gt; 16) & 255;
            int g1 = (rgb1 &gt;&gt; 8) & 255;
            int b1 = rgb1 & 255;
            int rgb2 = rgbim2[col];
            int a2 = (rgb2 &gt;&gt; 24) & 255;
            int r2 = (rgb2 &gt;&gt; 16) & 255;
            int g2 = (rgb2 &gt;&gt; 8) & 255;
            int b2 = rgb2 & 255;
            int a3 = (int) (a1 * weight + a2 * (1.0 - weight));
            int r3 = (int) (r1 * weight + r2 * (1.0 - weight));
            int g3 = (int) (g1 * weight + g2 * (1.0 - weight));
            int b3 = (int) (b1 * weight + b2 * (1.0 - weight));
            rgbim3[col] = (a3 &lt;&lt; 24) | (r3 &lt;&lt; 16) | (g3 &lt;&lt; 8) | b3;
        }
        bi3.setARGB(rgbim3, 0, width, 0, row,width, 1);
    }
    return bi3;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:40:57.700

您可以通过创建经理来实现此目的。使用管理器绘制方法绘制第一张图像并将第二张（水印图像）作为位图字段添加到其中。它看起来像图像上的图像。

# python - 寻找 Python 框架来为 AV 引擎构建 Web 界面

> ID：11669846
> 
> 赞同：-4
> 
> 时间：2012-07-26T12:58:46.770
> 
> 标签：python, ruby-on-rails, frameworks

我想构建一个使用 Python 作为防病毒引擎的 Web 应用程序。实际上我正在寻找一个 Python 框架，我没有在 python 中使用任何框架，但我有足够的经验来使用 web 编程和 python。如何在 python 中选择 Web 应用程序框架？

只是要明确一点：Ruby on Rails [ActiveAdmin](http://activeadmin.info)中有一个对我有好处的框架，但我正在寻找 Python 中的东西。

如果有人帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:06:08.670

我建议你看看[**Django**](https://www.djangoproject.com/)。它有大量的文档和支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:07:12.930

[Django](https://www.djangoproject.com/)将是您的选择。到目前为止，我在其他线程中看到，Django 的内置管理面板将完成`ActiveAdmin`for RoR 可以为您做的事情。

如果您对 django 的内置管理员不满意，您可以从其中任何一个插件自定义管理界面，[Django-Packages-Admin](http://www.djangopackages.com/grids/g/admin-interface/)

# .net - 如何在设计时加载 WPF 资源字典

> ID：11669848
> 
> 赞同：9
> 
> 时间：2012-07-26T12:58:52.700
> 
> 标签：.net, wpf

我有一个 WPF 窗口，其中一些属性被定义为动态资源，如下所示：

```
<Window x:Class="LocSample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        MinHeight="350" MinWidth="525"
        Title="{DynamicResource ResourceKey=ResId_Title}"
        FlowDirection="{DynamicResource ResId_FlowDirection_Default}" >
    <Grid>
       <Label Content="{DynamicResource ResId_FirstName}" />  
    </Grid>
</Window> 
```

在`ResourceDictionary`运行时加载以反映用户的语言选择。并使用户能够即时切换语言。

这在运行时可以正常工作，但在设计时，不会显示资源定义的属性。我很清楚，设计师无法展示它们，因为它们不是在设计时定义的。

我需要一种`ResourceDictionary`在设计时加载默认值的方法，以便设计人员可以显示任何内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-17T23:32:28.883

编辑：

在 Blend 中，您可以针对这种情况使用设计时资源字典文件。Visual Studio 可以读取该文件，但没有创建文件的工具。但是，如果您不怕项目文件，您可以手动完成。

1.  将文件 DesignTimeResources.xaml 添加到您的项目中。
2.  打开您的项目文件 (*.csproj) 并找到 DesignTimeResources.xaml 文件的注册。
3.  将此注册替换为以下代码

```
<Page Include="Properties\DesignTimeResources.xaml" Condition="'$(DesignTime)'=='true' OR ('$(SolutionPath)'!='' AND Exists('$(SolutionPath)') AND '$(BuildingInsideVisualStudio)'!='true' AND '$(BuildingInsideExpressionBlend)'!='true')">
  <Generator>MSBuild:Compile</Generator>
  <SubType>Designer</SubType>
  <ContainsDesignTimeResources>true</ContainsDesignTimeResources>
</Page> 
```

现在您可以在文件中合并您需要的所有资源字典。编译器会忽略它，但设计器不会。

更多细节请[不要看我的文章](https://github.com/jbe2277/waf/wiki/WPF-Design-Time-Support-(Part-2))。

# modx - ModX Evo 文件管理器不工作

> ID：11669849
> 
> 赞同：0
> 
> 时间：2012-07-26T12:59:01.650
> 
> 标签：modx, modx-evolution

我正在运行 ModX Evo 1.0.5 并遇到管理面板内的文件管理器无法正常工作的问题。当我尝试加载它时，我收到几条显示 Parse error: error Parsing XML.. 的警报消息，最后它加载了这个错误

![在此处输入图像描述](../Images/dc8082b4106d47a2cfcd88297114d9d7.png)

我有我的资产文件夹 CHMOD 777 并且我已经配置了文件管理器路径，如下[所示](http://www.prodevtips.com/2009/07/29/modx-10-proper-configuration-of-file-manager/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:26:24.847

我认为这些警报与管理器中的配置无关。我最近在 Evo 中的文件浏览器上遇到了很多问题。而且我敢肯定，在 modx 发布某种迁移实用程序（就像我的情况一样）之前，升级到 Revo 不是一种选择。

您是否尝试过在当前安装上重新运行设置？可能是升级 1.0.6 的好机会。（大声笑..dnt像我一样忘记先备份）

如果您谈论的文件浏览器是 MCPuck 用[CKEditor](http://modx.com/extras/package/ckeditorforevo)替换我的编辑器就可以了。

祝你好运m8

# asp.net-mvc-3 - 带有 mvc3 的自定义部分视图位置中的控制器名称

> ID：11669852
> 
> 赞同：0
> 
> 时间：2012-07-26T12:59:10.237
> 
> 标签：asp.net-mvc-3, partial-views, viewengine

我按照本教程自定义了我的部分视图位置。 [http://www.leonamarant.com/2011/02/17/adding-a-custom-directory-to-razor-view-engine-partial-view-locations-in-asp-net-mvc3/](http://www.leonamarant.com/2011/02/17/adding-a-custom-directory-to-razor-view-engine-partial-view-locations-in-asp-net-mvc3/)

一切都很好，除了一件事：用控制器名称定义一个自定义位置。
这是我的位置：

```
private static string[] customLocations = new[] {
    "~/Views/{1}/{0}.cshtml",       // It does not work
    "~/Views/Shared/{0}.cshtml",    // It works
    "~/Views/Home/{0}.cshtml"       // It works
}; 
```

在我看来，我只是添加了这一行，并没有找到部分视图：

```
@Html.Partial("Test/_MyPartial") 
```

我知道我可以编写一个相对路径来解决我的问题，但是这一行不需要我的类“MyViewEngine.cs”

```
@Html.Partial("../Test/_MyPartial") 
```

如何将我的控制器名称与 {1} 绑定？

# struts2 - Struts2 动作在 osgi 包中没有得到解决

> ID：11669857
> 
> 赞同：0
> 
> 时间：2012-07-26T12:59:17.030
> 
> 标签：struts2, osgi, bundle

我正在使用 struts2osgi 包并尝试将 osgi 容器嵌入到我的 Web 容器中。我已将我的操作部署在一个包中。在动作包中，我放置了动作类、struts.xml、Spring xml 文件和清单文件，其结构如下：

```
|-bundle
    |-com
       |-HelloAction.class
    |-struts.xml
    |-META-INF
       |-MANIFEST.MF
       |-spring
         |-spring.xml 
```

现在，当我尝试通过将此捆绑包放在 Web 应用程序中来部署 Web 应用程序时，它给了我错误“无法加载 HelloAction”。但它存在于同一个包中。我不知道为什么这会出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:16:45.417

您可能需要导出包，因为 spring dm 或 struts2osgi 包需要保留它。

# java - 从 zip 创建文件 - android

> ID：11669861
> 
> 赞同：0
> 
> 时间：2012-07-26T12:59:44.020
> 
> 标签：java, android

我有一个`/mnt/sdcard/Bluetooth`包含多个`zip`文件的文件夹。每个 zip 文件只包含一个文件。如何将每个 zip 文件的内容提取到包含每个 zip 文件内容的新文件中？这是我到目前为止所做的：

```
public class Main extends Activity {

Object[] arrayOfRarFiles;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    String path = "/mnt/sdcard/Bluetooth";
    String nameOfFiles;
    File folder = new File(path);
    File[] listOfFiles = folder.listFiles();

    for (int i = 0; i < listOfFiles.length; i++) {
        if (listOfFiles[i].isFile()) {
            nameOfFiles = listOfFiles[i].getName();

            if (nameOfFiles.endsWith(".zip")
                    || nameOfFiles.endsWith(".ZIP")) {

                try {
                    extractFile(nameOfFiles);
                } catch (FileNotFoundException e) {
                    Log.e("EXTRACTFILE SAYS: ", e.getMessage());
                }

            }
        }
    }
}

public void extractFile(String path) throws FileNotFoundException {

    String zipFileName = "/mnt/sdcard/Bluetooth/" + path;
    String extractedFileName = getApplicationContext().getFilesDir()
            .getPath().toString()
            + "Finger.FIR";

    ZipInputStream inStream = new ZipInputStream(new FileInputStream(
            zipFileName));
    OutputStream outStream = new FileOutputStream(extractedFileName);

    Toast.makeText(getApplicationContext(), zipFileName,
            Toast.LENGTH_SHORT).show();

} 
```

最后一个 toast，在`extractFile`方法中输出每个 zip 文件的名称。zip文件夹中的文件是`.FIR`文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:11:16.720

我认为您可以使用我在另一个[SO question](https://stackoverflow.com/questions/3382996/how-to-unzip-files-programmatically-in-android)中找到的以下功能。

注意根据需要正确设置路径和文件名参数。

```
public void extractFile(String path) throws FileNotFoundException {

    String zipFileName = "/mnt/sdcard/Bluetooth/" + path;
    String extractedFileName = getApplicationContext().getFilesDir()
            .getPath().toString()
            + "Finger.FIR";

    ZipInputStream inStream = new ZipInputStream(new FileInputStream(
            zipFileName));
    OutputStream outStream = new FileOutputStream(extractedFileName);

    unpackZip(path ,zipFileName)

    /*Toast.makeText(getApplicationContext(), zipFileName,
            Toast.LENGTH_SHORT).show();*/

}

private boolean unpackZip(String path, String zipname)
{       
     InputStream is;
     ZipInputStream zis;
     try 
     {
         String filename;
         is = new FileInputStream(path + zipname);
         zis = new ZipInputStream(new BufferedInputStream(is));          
         ZipEntry ze;
         byte[] buffer = new byte[1024];
         int count;

         while ((ze = zis.getNextEntry()) != null) 
         {
             // zapis do souboru
             filename = ze.getName();
             FileOutputStream fout = new FileOutputStream(path + filename);

             // cteni zipu a zapis
             while ((count = zis.read(buffer)) != -1) 
             {
                 fout.write(buffer, 0, count);             
             }

             fout.close();               
             zis.closeEntry();
         }

         zis.close();
     } 
     catch(IOException e)
     {
         e.printStackTrace();
         return false;
     }

    return true;
} 
```

# xcode - 解析 HTML 格式的文本

> ID：11669862
> 
> 赞同：0
> 
> 时间：2012-07-26T12:59:52.133
> 
> 标签：xcode, html-parsing

我正在使用[这个](https://github.com/zootreeves/Objective-C-HMTL-Parser)包装器开发一个解析器。问题是：如何从 HTML 格式的文本中提取以在 UIwebview 中再次使用它。正如您在我的代码中看到的那样，有“b”和“i”html 标签。在“myarray”中只有 123 和 321 没有任何文本。谢谢你的帮助。我的代码：

```
 NSError *error = nil;
    NSString *html =
    @"<div id=\"all\">"
    "<ul>"
    "<li><b>1</b>23</li>"
    "<li>32<i>1</i></li>"
    "</ul>"
    "</div>";
    HTMLParser *parser = [[HTMLParser alloc] initWithString:html error:&error];

    if (error) {
        NSLog(@"Error: %@", error);
    }

    HTMLNode *bodyNode = [parser body];

    HTMLNode *mynode = [bodyNode findChildWithAttribute:@"id" matchingName:@"all" allowPartial:TRUE]; 
    NSArray *newsList = [mynode findChildTags:@"li"]; 

    NSMutableArray *myarray = [[NSMutableArray alloc] initWithCapacity:0];
    for (HTMLNode *news in newsList) { // Пробегаем по списку тэгов и выводим новости
        [myarray addObject:[news allContents]];
    } 
```

# jpa - JPA 条件查询加载整个表

> ID：11669868
> 
> 赞同：8
> 
> 时间：2012-07-26T13:00:05.370
> 
> 标签：jpa, criteria-api

我觉得这是一个愚蠢的问题，但我找不到答案。我有一堂课如下：

```
import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.SequenceGenerator;
import javax.persistence.Table;

@Entity
@Table(name="DEMO_VARIABLES")
public class Variable implements Serializable
{
    private static final long serialVersionUID = -1734898766626582592L;

    @Id
    @SequenceGenerator(name="VARIABLE_ID_GENERATOR", sequenceName="DEMO_VARIABLE_ID_SEQ", allocationSize=1)
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="VARIABLE_ID_GENERATOR")
    @Column(name="VARIABLE_ID", unique=true, nullable=false, precision=22)
    private long variableId;

    @Column(name="VARIABLE_NAME", nullable=false, length=50)
    private String variableName;

    @Column(name="VARIABLE_VALUE", nullable=false, length=500)
    private String variableValue;

    public Variable()
    {

    }

    public long getVariableId()
    {
        return variableId;
    }

    public void setVariableId(long variableId)
    {
        this.variableId = variableId;
    }

    public String getVariableName()
    {
        return variableName;
    }

    public void setVariableName(String variableName)
    {
        this.variableName = variableName;
    }

    public String getVariableValue()
    {
        return variableValue;
    }

    public void setVariableValue(String variableValue)
    {
        this.variableValue = variableValue;
    }
} 
```

现在我想使用条件查询来加载整个表（即“从变量中选择 *”）。我想更多地使用标准查询来实现代码一致性，而不是其他任何东西。我得到了这个例外：

```
java.lang.IllegalStateException: No criteria query roots were specified
    at org.hibernate.ejb.criteria.CriteriaQueryImpl.validate(CriteriaQueryImpl.java:303)
    at org.hibernate.ejb.criteria.CriteriaQueryCompiler.compile(CriteriaQueryCompiler.java:145)
    at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:437 
```

我正在使用的查询是：

```
public List<Variable> loadAllVariables()
{
    CriteriaBuilder builder = em.getCriteriaBuilder();
    CriteriaQuery<Variable> query = builder.createQuery(Variable.class);

    return em.createQuery(query).getResultList();
} 
```

我知道异常意味着它想要这个：

```
Root<Variable> variableRoot = query.from(Variable.class); 
```

但是没有谓词，我看不到如何将 Root 对象放入查询中？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-26T13:32:39.630

我不确定，我是否理解正确，但如果目标是选择所有*变量*实体的获取列表，那么以下是可行的方法：

```
public List<Variable> loadAllVariables() {
    CriteriaBuilder builder = em.getCriteriaBuilder();
    CriteriaQuery<Variable> query = builder.createQuery(Variable.class);
    Root<Variable> variableRoot = query.from(Variable.class);
    query.select(variableRoot);

    return em.createQuery(query).getResultList();
} 
```

不同的是使用了*select*。所有实现都不会隐式使用最后一次调用 from 来代替 select。在 JPA 2.0 规范中，这被告知如下：

> 便携式应用程序应该使用 select 或 multiselect 方法来指定查询的选择列表。不使用这些方法之一的应用程序将不可移植。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-26T13:32:23.153

使用查询及其根非常简单：
首先按照您描述的方式获取根：

```
Root<Variable> variableRoot = query.from(Variable.class); 
```

之后，您必须告诉查询它应该如何处理根：选择，在这种情况下。

```
query.select(variableRoot); 
```

之后，您可以使用`query.where(...)`函数等进一步修改查询。完成后，您就可以使用您的

```
return em.createQuery(query).getResultList(); 
```

[Oracle 教程](http://docs.oracle.com/javaee/6/tutorial/doc/gjitv.html)中的更多信息

# repository - 存储库、服务层和方法放置

> ID：11669873
> 
> 赞同：3
> 
> 时间：2012-07-26T13:00:13.823
> 
> 标签：repository, service-layer

我已经阅读了很多关于存储库模式和服务层的作用的文章，并且我（我认为）很清楚两者之间的区别。但是一个简单的问题现在让我摸不着头脑。

我知道数据访问层如何负责...访问数据，因此典型的存储库可能具有插入、更新、删除和保存等方法（基本的 CRUD 方法）。服务层包含所有业务内容、验证、发送电子邮件和所有爵士乐，我读到的一件事是*服务层不应该重复存储库方法*，因为这种设置不会增加任何价值。

但我的问题在于“添加”方法。假设我有一个供应商类，我想将特定供应商添加到我的供应商列表中。用户通过 UI（MVC Web 应用程序）输入供应商信息，然后`Create`调用控制器方法。

现在控制器应该如何处理才能持久化这个供应商？

*   直接存储库
*   服务层

由于纯存储库实现除了持久化实体之外不会做任何其他事情，如果我有一些验证和/或业务规则，我显然应该使用服务层。但是如果我不应该控制器直接处理存储库？在我看来，这似乎打破了架构的分层性质。控制器正在跳过服务层并与持久层对话。

假设我想安全起见并使用服务层（因为我可能有验证和其他与供应商打交道相关的东西）。我最终会得到：

*   AddSupplier 方法
*   一个 UpdateSupplier 方法
*   DeleteSupplier 方法

这是我一开始不想要的，因为现在我有一个与服务层和数据访问层的一对一方法映射。

所以我的问题是：（添加 | 更新 | 删除）供应商方法应该去哪里？

另外，是否可以绕过服务层并从控制器直接与存储库层对话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:27:22.323

我认为您的问题没有一个明确的答案，因为有很多因素需要考虑（正如您所指出的，这也有点自相矛盾）。我相信最好的实现有几个重要的部分。

1.  一个非常通用的存储库，它与数据源交互并执行插入、更新、删除基本 CRUD 方法（正如您所指出的）。最佳情况下，这将以通用方式完成，因此您的交互在您的应用程序中是一致的。例如，返回单个实体的方法，如`T Single(Func<T, bool> where)`.

2.  包含封装业务功能的方法的特定业务服务。这些服务是唯一允许与存储库交互的服务。除了 'Hello World' 样式的示例之外，这些方法不会简单地添加或删除项目，而是可能与 2 个或更多实体交互并执行复杂的业务逻辑。例如，服务方法可能是“CreateAccount”或“RemmoveBlogPost”，这无疑需要的不仅仅是添加单个实体或删除一个实体。

3.  “瘦”和“哑”控制器几乎不执行任何逻辑，而只是根据需要调用服务方法。控制器只是使用变量并返回响应。但是，它们可能会在每个控制器动作中调用各种服务方法。服务方法的混合和重用导致高效和 DRY 编码实践。

当您意识到您想在应用程序的另一部分执行全部或部分方法时，这种方法会显示出它的优势。例如，如果您正在构建一个博客应用程序，您可能会发现该应用程序面向公众的一面需要一种查看单个博客文章的方法，而管理员方面也需要它。在这个简单的示例中，将在每个控制器中重复按 Id 返回博客文章，但是，如果您创建了一个名为 getBlogPostById 的服务方法，则可以在两个控制器中重用该逻辑。

# ruby-on-rails - 在 rails 3.2.5 版中使用 action mailer 发送电子邮件

> ID：11669876
> 
> 赞同：3
> 
> 时间：2012-07-26T13:00:19.267
> 
> 标签：ruby-on-rails, ruby

我知道这是一个简单的问题，并且被问了很多次，我也问过这个问题，因为我检查过的所有以前的问题都是基于 rails 3.0.0 版本，我使用的是最新版本。我有一个包含姓名和电子邮件字段的用户注册表单。我想这样做，当用户单击提交按钮时，我使用 rails 3.2.5 版本的用户应将电子邮件发送到指定的电子邮件地址，而 gem 'mail' 版本 2.4.4 开发日志文件显示邮件是发送到电子邮件地址，但在收件箱中找不到。我也知道在开发模式下，action mailer 不会向任何地址发送邮件，但我想在开发阶段这样做。我的代码是：

/config/initializers/setup_mail.rb

```
ActionMailer::Base.smtp_settings = {
:address              => "smtp.gmail.com",
:port                 => 587,
:domain               => "asciicasts.com",
:user_name            => "asciicasts",
:password             => "secret",
:authentication       => "plain",
:enable_starttls_auto => true
} 
```

/app/mailers/user_mailer.rb

```
class UserMailer < ActionMailer::Base
default :from => "eifion@asciicasts.com"

def registration_confirmation(user)
mail(:to => user.email, :subject => "Registered")
end
end 
```

/app/controllers/users_controller.rb

```
def create
@user = User.new(params[:user])

respond_to do |format|
if @user.save
UserMailer.registration_confirmation(@user).deliver
format.html { redirect_to(@user, :notice => 'User was successfully created.') }
format.xml  { render :xml => @user, :status => :created, :location => @user }
else
format.html { render :action => "new" }
format.xml  { render :xml => @user.errors, :status => :unprocessable_entity }
end
end
end 
```

所以任何人请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:06:44.450

我最近也遇到过这样的事情。

来自`config/environments/development.rb`：

`config.action_mailer.perform_deliveries = true`# 这个条目让我觉得应该发送电子邮件，它们是在其他开发人员升级之前。

我还发现这些电子邮件没有被发送。挖了一圈，我发现`config/email.yml`它看起来像这样：

```
development:
  :delivery_method: test
  :settings:
    :address: <email_server_address>
    :port: 25 
```

当我更改`:delivery_method: test`为`:delivery_method: sendmail`（这是我们在公司使用的）时，它开始工作。

总而言之，我发现`config/email.yml`最后评估的设置将胜过您个人环境文件中的任何内容。

# regex - 我怎么能 egrep 这个表达式

> ID：11669878
> 
> 赞同：0
> 
> 时间：2012-07-26T13:00:24.007
> 
> 标签：regex, linux, grep

我有一个包含以下字符串的文本文件，每个字符串都在单独的行中

```
Host: 22.44.55.33 (x.y.z)   Status: Up 
```

我需要从行中提取的是括号之间的字符串`x.y.z`。

如何在 Linux 中使用 grep 执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:04:33.833

```
echo "Host: 22.44.55.33 (x.y.z)   Status: Up" | egrep -o "\([^)]*\)"
(x.y.z) 
```

re`\([^)]*\)`表示您需要，然后是除then之外的`(`任何符号。的关键说只需要打印与正则表达式匹配的输入文本的那部分。`)``)``-o``grep``grep`

如果你只想要里面有“Host：Up”的行，你可以使用断言：

```
$ cat 1.txt 
(1.2.3.4) Host: Up
(5.6.7.8) Host: Down
(9.1.2.3) Host: Up

$ grep -oP '\([^)]*\)(?=.*Host: Up)' 1.txt
(1.2.3.4)
(9.1.2.3) 
```

这里的重点是`(?=.*Host: Up)`说你想要`Host: Up`排队。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:03:10.153

您需要`sed`，不能`egrep`-`sed`可以编辑文本，而`egrep`只能选择文本行并原样打印。像这样的东西：

```
sed -e 's/^Host:.*(\([^)]*\)).*$/\1/' < inputfile.txt 
```

# ruby - 续集中的 default_scope

> ID：11669880
> 
> 赞同：9
> 
> 时间：2012-07-26T13:00:32.527
> 
> 标签：ruby, activerecord, sequel, default-scope

在 ActiveRecord 中有一个`default_scope`类方法来指定默认范围。例如

```
class User < ActiveRecord::Base
  default_scope where(:deleted => false)
end

User.all # => SELECT * FROM users WHERE deleted = 0; 
```

我怎样才能做到这一点`Sequel::Model`？

**编辑：**

经过一番谷歌搜索，我最终找到了一些有用的信息。

```
class User < Sequel::Model

  # Define some "scopes" (filters on the dataset)
  dataset_module do
    def existing
      filter(deleted: false)
    end

    def active
      filter(disabled: false)
    end
  end

  # This is the equivalent to a default_scope. Set one of the datasets
  # as the default dataset for this model.
  set_dataset(self.active)
end 
```

然后生成的查询如下所示：

```
User.all # => SELECT * FROM `users` WHERE (`deleted` IS FALSE) 
```

*顺便说一句*：相当于`unscoped`是`unfiltered`：

```
User.unfiltered.all # => SELECT * FROM `users` 
```

**但是**，有一个问题。如果您尝试更新从未过滤数据集获得的用户，它会尝试使用给定数据集更新用户。

```
User.create(disabled: true, deleted: true)
User.all # => []
u = User.unfiltered.first # => Given user
u.disabled = false
u.save # => UPDATE users SET ... WHERE (disabled IS FALSE AND id = 1)
# => Sequel::NoExistingObject: Attempt to update object did not result in a single row modification 
```

**所以我又回到了最初。**有什么解决方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T20:48:02.250

最好的解决方法是通过没有默认范围来避免问题。在大多数情况下，默认范围是一个坏主意。如果您希望大多数查询使用范围，则在这些查询中手动应用范围，不要使用默认范围并尝试在其他查询中回退范围。**仅当您的所有**查询都使用该范围时，默认范围才有意义。

您也可以通过子类化来处理这个问题（用户没有作用域，ActiveUser < 用户有作用域）。但是，我发现显式范围界定方法效果更好。

话虽如此，如果您真的想使用默认范围，以下可能会解决在模型的默认范围之外更新模型实例的问题：

```
User.instance_dataset.unfiltered! 
```

# xcode4 - “UIAlertView”的@interface

> ID：11669885
> 
> 赞同：1
> 
> 时间：2012-07-26T13:00:46.690
> 
> 标签：xcode4, interface, xcode4.2, uialertview

当我试图编译我的代码时；这段代码：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"You Lost!"
    message:[NSString stringWithFormat:@"You were hit! Try again!"]
    delegate:nil
    cancelButttonTitle:@"Dismiss" otherButtonTitles:nil];
[alert show]; 
```

有这个错误：
`No Visible @interface for 'UIAlertView' declares the sector`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:08:43.207

[http://www.raywenderlich.com/forums/viewtopic.php?t=3312&p=20213](http://www.raywenderlich.com/forums/viewtopic.php?t=3312&p=20213)

您在 cancelButtonTitle 中有一个额外的 t。应该是cancelButtonTitle。

# ipad - iPad 3 WebSocket PhoneGap 应用程序不工作。它在 iPad 2 上完美运行

> ID：11669891
> 
> 赞同：0
> 
> 时间：2012-07-26T13:01:09.543
> 
> 标签：ipad, cordova, websocket, arduino, wireshark

对，在计划的用户测试前一天，我发现我的 iPad [PhoneGap](http://en.wikipedia.org/wiki/PhoneGap)或[Cordova](http://en.wikipedia.org/wiki/PhoneGap)应用程序无法在 iPad 3 IOS 5.1.1 上运行，而在具有相同 IOS 版本的 iPad 2 上却完美运行！我是一个足够愚蠢的人，我“假设”这将保证在较新的 iPad 上工作。吸取教训，我猜。

我有一个 Arduino 设备可以顺利运行 webSocket 服务器。我一直在我的笔记本电脑上使用相同的 Arduino 设备在 Google Chrome 最新开发版本上测试我的应用程序，之前在 iPad 2 上使用最新的 iOS 版本：它就像一个魅力！

在 iPad 端，我正在运行一个使用 webSockets 的 PhoneGap 或 Cordova HTML5 / JavaScript 应用程序。

我不依赖任何第三方网络/网络套接字服务或技术，只是在谷歌 Chrome 上运行的 webkit 网络套接字实现，显然只有 iPad 2..

因此，iPad 3 出现了：WebSocket 连接似乎失败了。我根本不是网络专家，尽管我认为我知道基础知识，并且我尝试使用[Wireshark](http://en.wikipedia.org/wiki/Wireshark)找出握手是否有问题。但似乎连握手都没有。iPad 3 停止在 ARP 请求！

我在下面包含了指向我的 Wireshark（仅限混杂模式，监控模式似乎不起作用）输出及其屏幕截图的链接：

* * *

[笔记本电脑输出（需要 Wireshark）](http://www.2shared.com/file/khpHwAyL/WIRESHARK_IPAD3_DEBUG1.html)

[iPad 3 输出（需要 Wireshark）](http://www.2shared.com/file/WdfQ1Rk9/WIRESHARK_LAPTOP_DEBUG1.html)

* * *

[笔记本电脑输出屏幕截图](http://twitpic.com/abxufv/full)

[iPad 3 输出屏幕截图](http://twitpic.com/abxt1y/full)

* * *

这是怎么回事？为什么我的 Arduino 设备没有响应来自 iPad 3 的 ARP，却响应来自 iPad 2 的 ARP？

奇怪的是：iPad 3 端的 web socket 实现应该没有问题，我查看了这个 web socket 演示站点：[http ://www.websocket.org/echo.html](http://www.websocket.org/echo.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:21:50.610

原因可能只是 iPad2 和 iPad 3 上的旧实现（此时最新的 IOS 5.1.1）。在它工作之前，我已经多次更新了 webSocket 服务器代码，因为服务器端使用的协议也较旧。在更新之后，我意识到我从未测试过应用程序的通信部分。愚蠢的！

我有 2 个选择：希望 webSocket 服务器的创建者可以提供一个具有旧协议实现的版本，或者更新到 IOS 6 beta 3，其中有（根据 caniuse.com）完整的 websocket 支持（阅读：他们实现safari mobile 中的正确协议，只是现在...）。我希望我的错误能让其他人不要犯同样的错误：在您的应用程序中使用 webSockets 时，请务必在每次迭代时始终测试通信流程！

# c# - 为什么画布的子元素不会移动？

> ID：11669892
> 
> 赞同：1
> 
> 时间：2012-07-26T13:01:14.083
> 
> 标签：c#, wpf, xaml, canvas

我有一个画布，画布上有不同数量的子元素。我创建了一个拖动和移动功能，但没有一个孩子在移动。

```
if (blockClicked == false && canvasClicked == true)
{
     if (isDrag == true)
     {
         double deltaV = e.GetPosition(null).Y - pot.Y;   
         double deltaH = e.GetPosition(null).X - pot.X;

         double newTop = deltaV + (double)canv.GetValue(Canvas.TopProperty);
         double newLeft = deltaH + (double)canv.GetValue(Canvas.LeftProperty);

         Console.WriteLine("newTop: " + newTop);
         Console.WriteLine("newLeft: " + newLeft);

         this.canv.SetValue(Canvas.TopProperty, newTop);
         this.canv.SetValue(Canvas.LeftProperty, newLeft);

         Console.WriteLine("canv new top: " + canv.GetValue(Canvas.TopProperty));
         Console.WriteLine("canv new left: " + canv.GetValue(Canvas.LeftProperty));
    }
} 
```

上面是我正在使用的代码，外部 if 语句只是检查标志，但内部 IF 语句是我确定是拖动鼠标的地方。我得到鼠标点（锅），然后测量它的移动量并将画布值设置为该测量值。

但是画布上的子元素都没有移动吗？谁能向我解释为什么会这样？

```
 <Canvas xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    x:Name="canv" 
    ClipToBounds="False" 
    d:DesignHeight="0" d:DesignWidth="1180">

        <Canvas.RenderTransform>
            <ScaleTransform x:Name="scale"/>
        </Canvas.RenderTransform>

        <!--<Canvas x:Name="canv" Width="1000" Height="750" Canvas.Left="0" Canvas.Top="0">-->
        <Rectangle x:Name="Rectangle" 
               Width="1180" Height="784" Stretch="Fill"
               ClipToBounds="False">
            <Rectangle.Fill>
                <RadialGradientBrush RadiusX="0.763909" RadiusY="0.611915" Center="0.496313,0.50023" GradientOrigin="0.496313,0.50023">
                    <RadialGradientBrush.GradientStops>
                        <GradientStop Color="#00456487" Offset="0.489691" />
                        <GradientStop Color="#B3456487" Offset="0.90404" />
                    </RadialGradientBrush.GradientStops>
                    <RadialGradientBrush.RelativeTransform>
                        <TransformGroup />
                    </RadialGradientBrush.RelativeTransform>
                </RadialGradientBrush>
            </Rectangle.Fill>
        </Rectangle>
    </Canvas> 
```

编辑：以上是“canv”画布包含的 XAML。

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:04:23.383

设置`Canvas.Top`、调用`Canvas.SetTop(child, top)`和类似的 for `Left`。

请注意，它是一种静态方法 -`Canvas.SetTop`而不是`this.canv.SetTop`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:07:24.943

首先，使用它来获取位置：

> 双 deltaV = e.GetPosition(parentofcanvas).Y - pot.Y;
> 双 deltaH = e.GetPosition(parentofcanvas).X - pot.X;

其次，使用 Canvas.SetTop(..)、Canvas.SetLeft(..)，但如果您的 Canvas 不在 Canvas 中，则必须使用其 Margin 属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T13:21:22.943

试试我的代码：XAML - 矩形

```
<Rectangle x:Name="Rectangle" MouseDown="rectangle1_MouseDown" MouseUp="Rectangle_MouseUp"
               Width="122" Height="78" Stretch="Fill"
               ClipToBounds="False" Canvas.Left="19" Canvas.Top="19">
                <Rectangle.Fill>
                    <RadialGradientBrush RadiusX="0.763909" RadiusY="0.611915" Center="0.496313,0.50023" GradientOrigin="0.496313,0.50023">
                        <RadialGradientBrush.GradientStops>
                            <GradientStop Color="#00456487" Offset="0.489691" />
                            <GradientStop Color="#B3456487" Offset="0.90404" />
                        </RadialGradientBrush.GradientStops>
                        <RadialGradientBrush.RelativeTransform>
                            <TransformGroup />
                        </RadialGradientBrush.RelativeTransform>
                    </RadialGradientBrush>
                </Rectangle.Fill>
            </Rectangle> 
```

C＃：

```
 public MainWindow()
    {
        InitializeComponent();
        DispatcherTimer dt = new DispatcherTimer();
        dt.Tick += new EventHandler(dt_Tick);
        dt.Start();
    }

    void dt_Tick(object sender, EventArgs e)
    {
        if (pressed == true)
        {
            Point c = Mouse.GetPosition(canvas1);
            Point c1 = Mouse.GetPosition(Rectangle);

            Canvas.SetLeft(Rectangle, c.X - c1.X);
            Canvas.SetTop(Rectangle, c.Y - c1.Y);
        }
    }
    bool pressed = false;
    private void rectangle1_MouseDown(object sender, MouseButtonEventArgs e)
    {
        pressed = true;
    }

    private void Rectangle_MouseUp(object sender, MouseButtonEventArgs e)
    {
        pressed = false;
    } 
```

# jsp - 在 jsf 中包含 jsp 会导致异常，因为 Input length = 1

> ID：11669898
> 
> 赞同：1
> 
> 时间：2012-07-26T13:01:30.953
> 
> 标签：jsp, exception, jsf-2, blob

我在jsp中有以下代码

## myDisplayImage.jsp

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Hello World!</h1>
        <%@ page import="java.sql.*"%>
        <%@ page import="java.io.*"%>
        <%
                Blob image = null;
                Connection con = null;
                byte[] imgData = null;
                Statement stmt = null;
                ResultSet rs = null;
                try {
                    Class.forName("com.mysql.jdbc.Driver");
                    con = DriverManager.getConnection("jdbc:mysql://localhost:8889/mySacDB", "root", "root");
                    stmt = con.createStatement();
                    rs = stmt.executeQuery("select photo from personalInfo where userid = 5");
                    if (rs.next()) {
                        image = rs.getBlob(1);
                        imgData = image.getBytes(1, (int) image.length());
                    }
                    // display the image
                    response.setContentType("image/jpeg");
                    OutputStream o = response.getOutputStream();
                    o.write(imgData);
                    o.flush();
                    o.close();
                } catch (Exception e) {
                    out.println("Unable To Display image<br /><br />");
                    out.println("Image Display Error=" + e.getMessage());
                    return;
                } finally {
                    try {
                        rs.close();
                        stmt.close();
                        con.close();
                    } catch (SQLException e) {
                        e.printStackTrace();
                    }
                }
        %>
    </body>
</html> 
```

通过使用它，图像得到正确显示。

但是，当我在 JSF 2.0 页面中包含相同的页面时，我得到了异常。

```
<o:resourceInclude path="myDisplayImage.jsp"/> 
```

笔记 ：`o = xmlns:o="http://omnifaces.org/ui"`

我得到的例外是`Input length = 1`. 堆栈跟踪是

```
 java.nio.charset.MalformedInputException: Input length = 1
at java.nio.charset.CoderResult.throwException(CoderResult.java:260)
at java.nio.charset.CharsetDecoder.decode(CharsetDecoder.java:781)
at com.sun.faces.application.ByteArrayWebOutputStream.writeTo(ByteArrayWebOutputStream.java:112)
at com.sun.faces.application.ViewHandlerResponseWrapper.flushToWriter(ViewHandlerResponseWrapper.java:162)
at com.sun.faces.application.view.JspViewHandlingStrategy.renderView(JspViewHandlingStrategy.java:264)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:809)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:671)
at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:626)
at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:556)
at org.omnifaces.component.output.ResourceInclude.encodeBegin(ResourceInclude.java:79)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1755)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:349)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at com.sac.filter.MyFilter.doFilter(MyFilter.java:48)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 编辑 1

我还尝试使用`getBinaryStream`仍然相同的错误的新代码。代码是

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Hello World!</h1>
        <%@ page import="java.sql.*"%>
        <%@ page import="java.io.*"%>
        <%
            Blob image = null;
            Connection con = null;
            byte[] imgData = null;
            Statement stmt = null;
            ResultSet rs = null;
            try {
                Class.forName("com.mysql.jdbc.Driver");
                con = DriverManager.getConnection("jdbc:mysql://localhost:8889/mySacDB", "root", "root");
                stmt = con.createStatement();
                rs = stmt.executeQuery("select photo from personalInfo where userid = 5");
                if (rs.next()) {
                    String imgLen = rs.getString(1);
                    System.out.println(imgLen.length());
                    int len = imgLen.length();
                    byte[] rb = new byte[len];
                    InputStream readImg = rs.getBinaryStream(1);
                    int index = readImg.read(rb, 0, len);
                    System.out.println("index----------------" + index);
                    response.reset();
                    response.setHeader("Content-Length", String.valueOf(len));
                    String tempString = "image/jpeg";
                    String tempExtenson = tempString.substring(tempString.lastIndexOf("/") + 1, tempString.length());
                    response.setHeader("Content-disposition", "inline;filename=/file." + tempExtenson);
                    response.setContentType(tempString);
                    response.getOutputStream().write(rb, 0, len);
                    response.getOutputStream().flush();
                }
                stmt.close();
                // display the image
            } catch (Exception e) {
                out.println("Unable To Display image<br /><br />");
                out.println("Image Display Error=" + e.getMessage());
                return;
            } finally {
                try {
                    rs.close();
                    stmt.close();
                    con.close();
                } catch (SQLException e) {
                    e.printStackTrace();
                }
            }
        %>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:10:23.447

您不能在 XHTML 中包含输出文本以外的内容的 JSP。

问题是您的 JSP 将图像的输出混合到整个请求中，将内容类型设置为`"image/jpeg"`（或`"text/html"`在发生某些错误时输出）。您将无法按原样将其包含在另一个请求中。

在您的情况下，您可能只想删除所有 HTML 标记并使 JSP 只输出图像。然后，您将能够使用纯 HTML 正确显示图像，如下所示：

```
<img src="myDisplayImage.jsp" /> 
```

# java - Java中非数据库服务器到服务器通信的连接池

> ID：11669899
> 
> 赞同：1
> 
> 时间：2012-07-26T13:01:34.490
> 
> 标签：java, http, post, get, httpwebrequest

我正在尝试建立一个服务器到服务器的通信系统。

服务器 A 与 B 通信以收集 B 的信息。[这些是针对不同资源http://server.com/doc](http://server.com/doc) ..server/file ..server/folder 等的低级 HTTP 调用（GET、POST 等 + 标头和 XML 信息）

虽然我还没有对大量请求进行测试，但我们正在查看每分钟 1,000 次/秒的请求。

虽然我已经看到了一些 JDBC 资源，但有哪些可用的非数据库连接池工具可以加快这些事务的速度？

现在我们正在做类似的事情：

```
URL url = new URL(ServerURL+ "connection");
HttpURLConnection connection  = (HttpURLConnection) url.openConnection();
connection.setRequestMethod("GET");
setAuthHeaders(connection);//custom function self explanatory
System.out.println(connection.getResponseCode()
connection.disconnect(); 
```

如果不创建新 URL 并重新连接到服务器，我们就无法发送多个（基于不同用户的）请求。

有没有办法使用基本 ServerURL，然后根据需要使用特定的 GET、DELETE、POST..etc 函数访问特定资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:06:37.940

我会看一下 Apache HTTP Client 项目，我不知道有任何基准测试，但它们确实比“原始”URL 类具有更广泛的 HTTP 支持。

然后您可以查看“持久 HTTP 连接”，它们会产生自己的开销并且可能难以配置，但是如果您需要速度，那么它们可能会派上用场。

# linux - 如何禁用 GTK 文件对话框上的图标？

> ID：11669901
> 
> 赞同：2
> 
> 时间：2012-07-26T13:01:39.793
> 
> 标签：linux, gtk

我有一个特殊的 FUSE 文件系统，它本身很慢，用这个对话框浏览它充其量是乏味的。发生这种情况是因为对话框在向用户显示其内容之前会打开目录中的每个文件，可能是因为它试图决定要显示哪些图标。
有没有办法告诉 GtkFileChooserDialog 不要打扰显示图标？

![在此处输入图像描述](../Images/7425590bfd30439fc141f1f9b5797c75.png)

（这与[this question](https://stackoverflow.com/questions/809560/preventing-gtk-filechooserdialog-calling-stat-on-all-files-in-the-directory)有些相关，但不一样）

我在 Xubuntu 10.04，GTK 2.20

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:19:16.360

运行`gconf-editor`并启用密钥：`/desktop/gnome/thumbnailers/disable_all`.

# php - 是否可以使用数据包嗅探器来跟踪 GET 请求

> ID：11669909
> 
> 赞同：0
> 
> 时间：2012-07-26T13:02:23.840
> 
> 标签：php, javascript, flash, packet-sniffers, sniffer

我正在尝试在我的网站上记录广告点击。当点击广告时，总是会向特定的外部网站发出 GET 请求。我希望在发出此请求后立即通知我的服务器。所以这将允许我计算点击次数。

我正在考虑但一无所知的一种方法是数据包嗅探器。谁能指出我正确的方向来实现我的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:10:38.477

Google 使用 Ajax 格式。当您单击一个链接时，看起来您正在单击一个普通的 href，但您正在做的是向 Google 发送一个 Ajax 数据包，然后移动到您想要的页面。你可以用 JQuery 做同样的事情。

这是一个链接 [单击使用 JavaScript 记录](https://stackoverflow.com/questions/662434/click-logging-with-javascript)

您不能在所有用户的计算机上安装数据包嗅探器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:12:02.597

包嗅探！！！！我不认为它可以解决您的问题。

创建一个 javascript 函数，每次点击广告时都会调用它，给一些特殊的类名并在特定类上挂钩 onClick 以增加点击次数并将其以某种方式保存在数据库或文件中。

请使用此链接[记录我网站上的超链接点击](https://stackoverflow.com/questions/4658442/logging-hyperlink-clicks-on-my-website)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:19:26.357

数据包嗅探会引发大量潜在问题。尝试在您的服务器上运行一个很可能会提醒您本地网络的安全管理员。根据网络设置，它甚至可能无法正常工作。它还可以让您离开托管服务提供商。

您最好的选择是使用 shajeeck 提到的 javascript 进行点击记录。我假设它是第三方广告网络。

# jasper-reports - JasperReports：如何为具有“Y 页 X”表达式的字段设置可见性条件

> ID：11669913
> 
> 赞同：1
> 
> 时间：2012-07-26T13:02:39.903
> 
> 标签：jasper-reports

我正在使用*JasperReports*生成报告。我正在使用两个字段包含`Page X of Y`表达式。如果报告仅包含一页，是否可以隐藏此字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:21:08.730

You can use the field property "Print When Expression" with a expression like that:

```
$V{PAGE_NUMBER} > 1 
```

But you have to set this as well: evaluationTime="Report"

# linux - linux - 在两台主机之间转发ip数据包

> ID：11669915
> 
> 赞同：0
> 
> 时间：2012-07-26T13:02:45.737
> 
> 标签：linux, ip, routes, forward

我有 3 台运行 CentOS 的计算机：A、B、C。它们的地址分别为 192.168.3.1、192.168.3.2、192.168.3.3。我不能为此设置使用开关。B 有两个网卡与其他网卡相连。

IE。A ----- B ----- C

A 可以ping B，B 可以ping C。**如何设置让A 可以ping C？**

在 B 上，我尝试使用`echo 1 > /proc/sys/net/ipv4/ip_forward`以及添加路由来启用 IP 转发。但我没有运气。有人可以帮忙吗？

谢谢，菲德尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:09:12.533

因为这三台主机来自同一个网络（192.168.3.），所以不能只使用普通的路由方案。在这种情况下，您需要设置*代理 arp*。

更多信息：[http ://www.sjdjweis.com/linux/proxyarp/](http://www.sjdjweis.com/linux/proxyarp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:10:53.097

您可能想尝试端口转发。
或者如果你使用netcat，你可以让B成为服务器，A成为客户端，让A发送到B。然后让C成为服务器，B成为客户端，然后将数据包从B发送到C。类似的东西（但可能不完全）像这样可能会奏效。

为一个：

```
nc -u 192.168.3.2 portnumber 
```

对于 B：

```
nc -l -u portnumber | nc -u 192.168.3.3 newportnumber 
```

对于 C：

```
nc -l -u newportnumber 
```

这样，您放入 A 的任何内容都应该发送到 C。如果您正在使用程序工作，那么您将不需要 A 和 C 的东西，只需要 B 上的服务器/客户端，以便它可以转发它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:43:07.117

最后我使用了[本文的第二部分](http://www.thegeekstuff.com/2012/04/route-examples/)

# statistics - 如何使用 SAS 获得 SSE 进行预测？

> ID：11669918
> 
> 赞同：0
> 
> 时间：2012-07-26T13:02:56.250
> 
> 标签：statistics, sas

> **可能重复：（来自 stats.SE 的交叉帖子，但我是由 mod 发送到这里的）**
> [如何使用 SAS 获取 SSE 进行预测？](https://stats.stackexchange.com/questions/32864/how-to-get-sse-for-predictions-using-sas)

![在此处输入图像描述](../Images/5926d7f7024beb2229cc5f12b40bf663.png)

我正在尝试为我在 SAS 中的预测获得平方误差的总和，但我不确定我是否正确地做到了。我不确定我是否完全理解我的代码（特别是**stdp**）得到的输出：

```
data tridata;
infile '\data.dat';
    input x1 x2 x3 y;
    proc sort data = tridata; by x3;

proc reg data = tridata;
    model y=x3;
    plot r. * x3;
    output out = tridata2 r = resid p = pred stdp = err;
run;
quit;

/* Send your errors to a file */
data _NULL_;
    file '\data-err.dat';
    set tridata2;
    put err;
    where y eq .;
run;
quit; 
```

这给了我每个估计的错误文件。我将这些数据导入 Excel，对每一个进行平方，然后将它们相加得到一个数字。这是正确的方法吗？根据我的项目描述，我的印象是我应该为每个预测值获得一个 SSE_test。见下文：

![在此处输入图像描述](../Images/0a738b9504cb6b65d88bbb9ff95cf568.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T11:02:29.143

首先，STDP 是平均预测值的标准误差[这用于计算 95% 置信/预测区间]。这不是您需要平方和总结才能获得 SSE 的那个。

这是你需要做的：

PROC REG 的输出语句中的“r = resid”是错误的度量。它只是实际 - 预测。因为有时您的模型可能会过度预测，有时可能会预测不足。这个 R，残差，可以是正值或负值。

为了使一切都变得积极，我们只需将残差值平方并为您所做的每个预测获得平方误差。

将所有 SQAURED ERRORS 相加，您将得到 SUM OF SQUARED ERRORS。这将是单个统计数据（或标量）。

据我所知，除非您手头有实际值，否则您无法计算 SSE。

您可以参考[http://en.wikipedia.org/wiki/Errors_and_residuals_in_statistics](http://en.wikipedia.org/wiki/Errors_and_residuals_in_statistics)特别是该页面上的最后一段。

# html - 用html禁用按钮的正确方法是什么？

> ID：11669924
> 
> 赞同：0
> 
> 时间：2012-07-26T13:03:14.227
> 
> 标签：html

> **可能重复：**
> [将选定和相关属性添加到输入的正确方法是什么？](https://stackoverflow.com/questions/3894518/whats-the-proper-way-to-add-selected-and-related-attributes-to-inputs)
> [禁用属性的正确值](https://stackoverflow.com/questions/6961526/correct-value-for-disabled-attribute)

我有以下内容：

```
 <button id="refreshLink" class="blue" type="button" title="Refresh Topic Grid"
        data-entity="Topic"
        data-href="/Admin/Contents/Reference">
        <span class="center-icon sprite-arrow-circle"></span></button> 
```

我看到了很多不同的方法来禁用它。

```
disabled=true
disabled=disabled
disabled 
```

执行此操作的正确方法是什么？我越来越糊涂了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:10:33.503

后两个 (`disabled=disabled`和`disabled`) 都是正确的。您可以根据个人喜好选择使用哪一种。该`disabled`属性是一个布尔属性，它[不能包含值`true`（尽管它仍然可以工作）](http://developers.whatwg.org/common-microsyntaxes.html#boolean-attribute)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:06:58.277

disabled="disabled" 和`disabled`是一回事。

两者都被浏览器很好地理解。

我从来没有见过`disabled=true`，所以认为这可能不是一个好习惯。

已编辑。

前言，W3C 的建议是：

```
<button disabled> 
```

来源：[http ://www.w3.org/TR/html401/interact/forms.html#h-17.12.1](http://www.w3.org/TR/html401/interact/forms.html#h-17.12.1)

（错误的链接保留历史：[http](http://www.w3schools.com/tags/att_button_disabled.asp) ://www.w3schools.com/tags/att_button_disabled.asp ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:08:30.467

```
disabled=disabled 
```

根据我的理解是正确的功能

如果你给 disabled=xxx 即）它也可以，但它`disabled=disabled`是正确的

# javascript - 通过 stdio 在 Node.js 和 Python 之间进行通信的问题

> ID：11669925
> 
> 赞同：1
> 
> 时间：2012-07-26T13:03:22.710
> 
> 标签：javascript, python, node.js, coffeescript, subprocess

我正在从 Python 线程中生成一个 Node 进程，并通过 stdio 在它们之间传递数据。在 Python 向 Node 发送某些内容后，Node 会启动一个子进程，然后将该子进程的输出发送回 Python。

这有效，持续了几秒钟，然后没有更多数据出现。但是，如果我终止 Node 进程，那么突然所有数据都会立即出现。

我认为这与缓冲有关，但我尝试了很多东西，但无法使其正常工作。

值得一提的是，如果我在 Python 之外运行监视器，它可以正常工作，所以这可能是 Python 方面的问题。

相关Python代码：

```
class MonitorThread(Thread):
    # *snip*

    def run(self):
        self.process = Popen(['node',
            path.join(PACKAGE_PATH 'monitor.js')],
            stdout=PIPE, stdin=PIPE, stderr=PIPE)

        while self.process.poll() is None:
            stdout = self.process.stdout.readline().rstrip('\n')

            if stdout:
                main_thread(debug, stdout)

            stderr = self.process.stderr.readline().rstrip('\n')

            if stderr:
                main_thread(debug, stderr)

            #time.sleep(0.1) 
```

相关的 Node.js 代码（在 CoffeeScript 中，但即使你不知道，你也会明白）：

```
# *snip*

child = spawn cmd, options

child.stdout.on 'data', (data) ->
    process.stdout.write "stdout: #{data.toString().trim()}\n"

child.stderr.on 'data', (data) ->
    process.stdout.write "stderr: #{data.toString().trim()}\n" 
```

还有很多其他代码，但它们并不真正相关，正在发送数据，然后接收数据，只是片刻。它仍在运行，因为当我手动杀死它时，其余数据突然出现。

```
Monitor [send] - {"wrap": false, "directories": {"src": "lib"}, "id": 0, "base_dir": "C:\\Users\\Joe\\Documents\\GitHub\\CoffeeScript-Sublime-Plugin"}
Monitor [recv] - 13:55:30 - compiled src\a.coffee
Monitor [recv] - path.exists is now called `fs.exists`.
Monitor [recv] - 13:55:30 - compiled src\b.coffee 
```

*   我试过 util.pump()
*   我已经尝试使用 spawn() 调用 stdio: 'inherit'
*   在发送更多数据之前，我尝试等待“drain”事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:12:55.960

您还应该传递`end`事件以关闭流并让节点刷新它们：

```
child = spawn cmd, options

child.stdout.pipe(process.stdout)
child.stderr.pipe(process.stdout)

child.stdout.on 'data', (data) ->
    process.stdout.write "stdout: #{data.toString().trim()}\n"

child.stdout.on 'end', () ->
    process.stdout.end()

child.stderr.on 'end', () ->
    process.stdout.end() 
```

一个更好的选择是使用[Stream.pipe()](http://nodejs.org/api/stream.html#stream_stream_pipe_destination_options)。

# select - 是否有 lua 等效于 Scala 的 map 或 C# 的 Select 函数？

> ID：11669926
> 
> 赞同：10
> 
> 时间：2012-07-26T13:03:25.940
> 
> 标签：select, map, lua

我正在寻找一种在 Lua 表上进行映射/选择的好方法。

例如。我有一张桌子：

```
myTable = {
  pig = farmyard.pig,
  cow = farmyard.bigCow,
  sheep = farmyard.whiteSheep,
} 
```

如何编写 myTable.map(function(f) f.getName)？[假设所有农场动物都有名字]

IE。将该函数应用于表中的所有元素。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-26T14:41:59.360

写你自己的版本？在 lua 中没有内置函数可以做到这一点。

```
function map(tbl, f)
    local t = {}
    for k,v in pairs(tbl) do
        t[k] = f(v)
    end
    return t
end

t = { pig = "pig", cow = "big cow", sheep = "white sheep" }
local newt = map(t, function(item) return string.upper(item) end)

table.foreach(t, print)
table.foreach(newt, print) 
```

产生：

```
pig pig
sheep   white sheep
cow big cow
pig PIG
cow BIG COW
sheep   WHITE SHEEP 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T13:25:25.680

如果您使用的是 Lua 5.1，则可以使用`table.foreach()`：

```
a = { 1, 2, 3 }
table.foreach(a, function(k,v) a[k] = v + 2 end)
table.foreach(a, print)
-- 1    3
-- 2    4
-- 3    5 
```

但是，这已被弃用，并且不再存在于 5.2 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-01T22:14:25.897

使用元表的优雅解决方案：

```
map = function (old_t, f)
    return setmetatable({}, {
        __index = function (new_t, k)
            new_t[k] = f(old_t[k])
            return new_t[k]
        end
    })
end 
```

结果表仅在必要时计算每个条目，本质上是一个惰性表。

这意味着它也适用于无限惰性列表和表，但有一个警告 - 即如果`f`并不总是为相同的输入返回相同的结果，那么由于函数调用被延迟，那么结果表的行为可能会有所不同取决于`f`创建表时的行为方式以及首次索引每个键的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-18T12:48:19.380

好吧，所有其他答案都提供了慢速地图功能。当表格中的元素不止几个时，您将能够看到性能差异。

这是纯 lua 中最快的 map() 函数 -

```
function map(f, t)
    local t1 = {}
    local t_len = #t
    for i = 1, t_len do
        t1[i] = f(t[i])
    end
    return t1
end 
```

它不使用循环中的 # 运算符进行比较，也不这样做`t1[#t1+1]`。两者都很慢。

PS：这段代码取自[这篇文章](https://uiv.me/blog/lua-map/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-02-25T04:43:08.730

这是 lua 中的 map 函数的示例 -

```
function(f, t)
    local o = {}
    for i = 1, #t do
        o[#o + 1] = f(t[i])
    end
    return o
end 
```

请注意：上述实现未优化。它应该适合您的目的。但是，如果您想要 lua 中最快的 map() 函数实现之一，您可以查看 - [Lua Map Function](https://web.archive.org/web/20190225223533/https://uiv.me/blog/2019/02/25/lua-map/) 它包含代码和解释。

# actionscript-3 - 搜索影片剪辑

> ID：11669930
> 
> 赞同：0
> 
> 时间：2012-07-26T13:03:40.090
> 
> 标签：actionscript-3, movieclip

在我看来这是不可能的，但只是检查是否有神奇的解决方案。假设我有一个容器movieClip，里面有很多不同名字的子movieclip。我想使用搜索条件按名称搜索子 mcs，无论是正则表达式还是开头、结尾 + 字符串。当然，我知道我可以遍历子 mcs 并过滤名称与我的搜索条件匹配的 mcs。但我不是在寻找这种方法，因为它很消耗资源。另外，我不能返回匹配的 mcs 数组，如果它只返回第一个匹配就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:21:20.747

如果您将容器内的所有子项保持排序，则搜索速度会快很多。您可以制作自己的智能添加方法，该方法将保留所有名称的一些二叉树并将项目插入正确的位置。（或者您甚至可以添加每个项目，并将其名称的单独实例添加到排序的名称列表中，您可以在添加/删除项目时添加/删除该列表。）

# r - R data.frame 根据阶乘列修改列的某些值

> ID：11669931
> 
> 赞同：0
> 
> 时间：2012-07-26T13:03:42.790
> 
> 标签：r

我在 R 中有一个如下所示的数据框：

```
 ...    vals         cat  ...
        1.2          TRUE
        1.6          FALSE
        5            TRUE 
```

我喜欢根据 cat 列中的因子是 TRUE 还是 false 来修改“vals”列中的值。假设当同一行的类别为 TRUE 时，我想将 vals 列中的值乘以一个因子（例如 9）。

结果，我想拥有原始数据框的副本，但要使用修改后的值。或者如果未修改 (FALSE) 和 cat 为 TRUE 则修改后的另一列包含原始值的数据框。

希望有人可以帮我解决这个问题。

最好的问候 Sab。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:30:58.707

```
x <- data.frame(vals=c(11.2,9.1,2.1),cat=c(TRUE,FALSE,TRUE))

x
  vals   cat
1 11.2  TRUE
2  9.1 FALSE
3  2.1  TRUE

y <- x

y[y$cat,] <- x[x$cat,]*9

y
   vals cat
1 100.8   9
2   9.1   0
3  18.9   9 
```

# php - $.post 返回 [object 对象]

> ID：11669932
> 
> 赞同：0
> 
> 时间：2012-07-26T13:03:49.187
> 
> 标签：php, javascript, jquery

为什么会返回`[object Object]`？？？我想将`#new`内容返回到警报中。（实际上我想将该文本附加到一个新的 div 中，如果这个`[object Object]`问题解决了，我可以这样做）

```
<script type="text/javascript">
      $(document).ready(function() {
        $.post("post.php", {"test": "hello"}, function(data) {
           var myDiv = $(data).filter("#new");
           alert(myDiv);
        });
      });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:07:08.237

它工作得很好。

`alert`不显示对象的所有属性，**这**是您要警告的。
尝试使用`console`：

```
//info on the jQuery DOM obj:
console.log(myDiv);

//info on the jQuery obj:
console.dir(myDiv); 
```

例如： http: [//jsfiddle.net/agNNW/](http://jsfiddle.net/agNNW/)（感谢[@Esailija](https://stackoverflow.com/questions/11669932/post-returns-object-object/11669982#comment15467703_11669982 "目录与日志")）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:05:52.910

因为 myDiv 是对象，所以您必须在其中访问 html，

`html()`如果你想要html，使用jquery`text()`的函数，如果你想要文本而不是html，使用jquery的函数

```
 myDiv.html();

   $(document).ready(function() {
    $.post("post.php", {"test": "hello"}, function(data) {
       var myDiv = $(data).filter("#new");
       alert(myDiv.html());
    });
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T13:06:13.493

我会大胆猜测并说它运行良好。如果你`myDiv`是一个 DOM 元素，那是一个对象并且`alert`不知道如何打印它。永远不要依赖警报来进行调试。尝试将其附加到 DOM 元素，它可能会正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T13:07:01.087

像许多 jQuery 方法一样，`.filter()`返回一个 jQuery 对象，因此您当前的警报非常正确地显示`[object Object]`.

假设`data`是一个 html 字符串，您可以`#new`通过执行以下操作查看该 html 中元素的内容：

```
var myDiv = $(data).filter("#new");
alert(myDiv.html());
// or
alert(myDiv.text());
// or put the text in a variable:
var newText = myDiv.html();
// or
var newText = $(data).filter("#new").html(); 
```

要附加到您的其他元素：

```
$("#someotherelement").append(myDiv.html()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T13:09:41.957

myDiv 将包含一个 jQuery 对象，所以如果你想查看它的内容，你应该使用

```
alert(myDiv.text()); 
```

或者

```
alert(myDiv.html()); 
```

或者

```
console.log(myDiv); 
```

# file - 试图从 JSP 页面读取 txt 文件。

> ID：11669936
> 
> 赞同：0
> 
> 时间：2012-07-26T13:03:55.973
> 
> 标签：file, jsp

我正在尝试从 .txt 文件中读取 .jsp 页面中的一些数据。但我得到这个错误：

有根本原因

```
java.io.FileNotFoundException: Predicciones\predicciones.txt (System can't find path specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:138)
    at java.io.FileInputStream.<init>(FileInputStream.java:97)
    at org.apache.jsp.getDatosPredicciones_jsp._jspService(getDatosPredicciones_jsp.java:123)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

代码是这样的：

```
{
        int partido = Integer.parseInt(request.getParameter("partido"));
        int irabazlea;
        float probabilidad;

        FileInputStream fstream = new FileInputStream("Predicciones\\predicciones.txt");
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine;
        int kont=1;
        while (((strLine = br.readLine()) != null) && (kont<=partido)) 
```

问题出在哪里？“Predicciones”目录与 jsp 处于同一级别。

我试图将“Predicciones”目录放在 WEB-INF 中，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T15:15:09.423

如果您的文件位于您的网络应用程序根目录中，请尝试使用

```
FileInputStream fstream = new FileInputStream(application.getRealPath("/Predicciones/predicciones.txt")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:13:32.690

是的，但是 jsp 被编译并放在与实际 jsp 文件不同的位置。

要从 WEB-INF 文件夹中访问文件，请使用

```
/WEB-INF/foldername/resource.ext 
```

请不要**/**。

如果您使用 /folder/me.jpg 作为路径，那么您可以访问此文件 ww w.mydomain.com/appname/folder/me.jpg 除非应用程序以 root 身份部署。在这种情况下，您将访问此资源 ww w.mydomain.com/folder/me.jpg

如需访问资源，请阅读[http://docs.oracle.com/javase/1.4.2/docs/guide/resources/resources.html](http://docs.oracle.com/javase/1.4.2/docs/guide/resources/resources.html)

在您的情况下，您可以使用绝对路径访问文件，例如 c://apache//webapps/myapp/myfolder...等，或者您可以使用资源相对于已编译 .class 文件的相对路径

# r - R : 刻度数据缺失时刻度数据加值

> ID：11669945
> 
> 赞同：3
> 
> 时间：2012-07-26T13:04:32.600
> 
> 标签：r, time-series, xts

我正在处理刻度数据，并希望将我的 xts 不规则间隔系列聚合成一个 1 秒的同质系列。因此，我使用 xts 包函数 to.period ：

```
price_1m <-to.period(price,period="seconds",k=1,OHLC=FALSE) 
```

这是我得到的：

```
2010-02-02 08:00:03 2787
2010-02-02 08:00:04 2786
2010-02-02 08:00:05 2787
2010-02-02 08:00:06 2787
2010-02-02 08:00:07 2786
2010-02-02 08:00:08 2786
2010-02-02 08:00:09 2786
2010-02-02 08:00:10 2787
2010-02-02 08:00:11 2786
2010-02-02 08:00:14 2786
2010-02-02 08:00:16 2786
2010-02-02 08:00:18 2787 
```

我的系列是聚合的，但例如在 08:00:13 和 08:00:15 时缺少刻度数据。我想要的是用以前的分时数据填充这些空白，因为知道在逐个分时 xts 系列中缺少 08:00:13 和 08:00:15 的价格。任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T13:33:12.857

您可以`price_1m`与一个“空” xts 对象合并，该对象包含一个具有您想要的规则间隔的索引的索引，并在其`na.locf`上使用。例如：

```
onemin <- seq(start(price_1m),end(price_1m),by="1 s")
Price_1m <- na.locf(merge(price_1m, xts(,onemin))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T18:20:47.030

`MakeStrictlyRegular`我的[qmao 包](https://r-forge.r-project.org/R/?group_id=1113)中的函数将为您执行此操作。

这是来自的示例`?MakeStrictlyRegular`

```
x <- align.time(.xts(1:1000, 60*1:1000))[-c(2, 4, 7, 8), ] # remove some rows at the begining
head(x[paste((start.x <- start(x)), "/")])
#                    [,1]
#1969-12-31 18:02:00    1
#1969-12-31 18:04:00    3
#1969-12-31 18:06:00    5
#1969-12-31 18:07:00    6
#1969-12-31 18:10:00    9
#1969-12-31 18:11:00   10
x2 <- MakeStrictlyRegular(x)
#added 4 (0.40%); There are now 1000 total rows.
head(x2[paste(start.x, "/")])
#                    [,1]
#1969-12-31 18:02:00    1
#1969-12-31 18:03:00    1
#1969-12-31 18:04:00    3
#1969-12-31 18:05:00    3
#1969-12-31 18:06:00    5
#1969-12-31 18:07:00    6 
```

对于您的 1 秒数据，您将使用`by="sec"`. 所以，像

```
MakeStrictlyRegular(price, by="sec") 
```

# drupal - Drupal Views 3：在突出显示的行上方和下方显示 2 行

> ID：11669947
> 
> 赞同：1
> 
> 时间：2012-07-26T13:04:37.737
> 
> 标签：drupal, views

我有一个在表格中显示内容的视图（大约 30 行）。我已经为一行分配了一个术语（在这种情况下，词汇 = 突出显示，术语 = 是）。我想做的只是显示突出显示的行上方和下方的 2 个结果，例如

*未显示第 1-3 行*

~~~~~~~~~~~~~~~~~~~~~~~~

第 4 行

第 5 行

**第 6 行（突出显示 = 是）**

第 7 行

第 8 行

~~~~~~~~~~~~~~~~~~~~~~~~

*第 9-X 行未显示*

我该怎么做呢？

谢谢，

小号

编辑：

查看下面的导出：

```
$view = new view;
$view->name = 'league_cup_table_teaser';
$view->description = '';
$view->tag = 'default';
$view->base_table = 'node';
$view->human_name = 'League/cup table teaser';
$view->core = 7;
$view->api_version = '3.0';
$view->disabled = FALSE; /* Edit this to true to make a default view disabled initially */

/* Display: Master */
$handler = $view->new_display('default', 'Master', 'default');
$handler->display->display_options['title'] = 'League/cup table teaser';
$handler->display->display_options['access']['type'] = 'perm';
$handler->display->display_options['cache']['type'] = 'none';
$handler->display->display_options['query']['type'] = 'views_query';
$handler->display->display_options['query']['options']['query_comment'] = FALSE;
$handler->display->display_options['exposed_form']['type'] = 'basic';
$handler->display->display_options['pager']['type'] = 'none';
$handler->display->display_options['style_plugin'] = 'default';
$handler->display->display_options['row_plugin'] = 'fields';
$handler->display->display_options['row_options']['hide_empty'] = 0;
$handler->display->display_options['row_options']['default_field_elements'] = 0;
/* Field: Content: Title */
$handler->display->display_options['fields']['title']['id'] = 'title';
$handler->display->display_options['fields']['title']['table'] = 'node';
$handler->display->display_options['fields']['title']['field'] = 'title';
$handler->display->display_options['fields']['title']['label'] = '';
$handler->display->display_options['fields']['title']['alter']['alter_text'] = 0;
$handler->display->display_options['fields']['title']['alter']['make_link'] = 0;
$handler->display->display_options['fields']['title']['alter']['absolute'] = 0;
$handler->display->display_options['fields']['title']['alter']['external'] = 0;
$handler->display->display_options['fields']['title']['alter']['replace_spaces'] = 0;
$handler->display->display_options['fields']['title']['alter']['trim_whitespace'] = 0;
$handler->display->display_options['fields']['title']['alter']['nl2br'] = 0;
$handler->display->display_options['fields']['title']['alter']['word_boundary'] = 0;
$handler->display->display_options['fields']['title']['alter']['ellipsis'] = 0;
$handler->display->display_options['fields']['title']['alter']['more_link'] = 0;
$handler->display->display_options['fields']['title']['alter']['strip_tags'] = 0;
$handler->display->display_options['fields']['title']['alter']['trim'] = 0;
$handler->display->display_options['fields']['title']['alter']['html'] = 0;
$handler->display->display_options['fields']['title']['element_label_colon'] = FALSE;
$handler->display->display_options['fields']['title']['element_wrapper_type'] = 'h2';
$handler->display->display_options['fields']['title']['element_default_classes'] = 1;
$handler->display->display_options['fields']['title']['hide_empty'] = 0;
$handler->display->display_options['fields']['title']['empty_zero'] = 0;
$handler->display->display_options['fields']['title']['hide_alter_empty'] = 1;
$handler->display->display_options['fields']['title']['link_to_node'] = 0;
/* Field: Content: Teams */
$handler->display->display_options['fields']['field_teams']['id'] = 'field_teams';
$handler->display->display_options['fields']['field_teams']['table'] = 'field_data_field_teams';
$handler->display->display_options['fields']['field_teams']['field'] = 'field_teams';
$handler->display->display_options['fields']['field_teams']['label'] = '';
$handler->display->display_options['fields']['field_teams']['alter']['alter_text'] = 0;
$handler->display->display_options['fields']['field_teams']['alter']['make_link'] = 0;
$handler->display->display_options['fields']['field_teams']['alter']['absolute'] = 0;
$handler->display->display_options['fields']['field_teams']['alter']['external'] = 0;
$handler->display->display_options['fields']['field_teams']['alter']['replace_spaces'] = 0;
$handler->display->display_options['fields']['field_teams']['alter']['trim_whitespace'] = 0;
$handler->display->display_options['fields']['field_teams']['alter']['nl2br'] = 0;
$handler->display->display_options['fields']['field_teams']['alter']['word_boundary'] = 1;
$handler->display->display_options['fields']['field_teams']['alter']['ellipsis'] = 1;
$handler->display->display_options['fields']['field_teams']['alter']['more_link'] = 0;
$handler->display->display_options['fields']['field_teams']['alter']['strip_tags'] = 0;
$handler->display->display_options['fields']['field_teams']['alter']['trim'] = 0;
$handler->display->display_options['fields']['field_teams']['alter']['html'] = 0;
$handler->display->display_options['fields']['field_teams']['element_label_colon'] = FALSE;
$handler->display->display_options['fields']['field_teams']['element_default_classes'] = 1;
$handler->display->display_options['fields']['field_teams']['hide_empty'] = 0;
$handler->display->display_options['fields']['field_teams']['empty_zero'] = 0;
$handler->display->display_options['fields']['field_teams']['hide_alter_empty'] = 1;
$handler->display->display_options['fields']['field_teams']['type'] = 'field_collection_views_view';
$handler->display->display_options['fields']['field_teams']['settings'] = array(
  'name' => 'field_collection_league_cup_table_teaser',
  'display_id' => 'default',
  'add' => '',
);
$handler->display->display_options['fields']['field_teams']['group_rows'] = 1;
$handler->display->display_options['fields']['field_teams']['delta_offset'] = '0';
$handler->display->display_options['fields']['field_teams']['delta_reversed'] = 0;
$handler->display->display_options['fields']['field_teams']['delta_first_last'] = 0;
$handler->display->display_options['fields']['field_teams']['field_api_classes'] = 0;
/* Filter criterion: Content: Published */
$handler->display->display_options['filters']['status']['id'] = 'status';
$handler->display->display_options['filters']['status']['table'] = 'node';
$handler->display->display_options['filters']['status']['field'] = 'status';
$handler->display->display_options['filters']['status']['value'] = 1;
$handler->display->display_options['filters']['status']['group'] = 1;
$handler->display->display_options['filters']['status']['expose']['operator'] = FALSE;
/* Filter criterion: Content: Type */
$handler->display->display_options['filters']['type']['id'] = 'type';
$handler->display->display_options['filters']['type']['table'] = 'node';
$handler->display->display_options['filters']['type']['field'] = 'type';
$handler->display->display_options['filters']['type']['value'] = array(
  'table' => 'table',
);
/* Filter criterion: Content: Promoted to front page */
$handler->display->display_options['filters']['promote']['id'] = 'promote';
$handler->display->display_options['filters']['promote']['table'] = 'node';
$handler->display->display_options['filters']['promote']['field'] = 'promote';
$handler->display->display_options['filters']['promote']['value'] = '1';

/* Display: Block */
$handler = $view->new_display('block', 'Block', 'block'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:44:15.520

您可以通过添加一层 jQuery 来做到这一点。不像使用纯视图那样优雅，但尽管如此......

[动态隐藏 HTML 表格的一部分](https://stackoverflow.com/questions/1069839/dynamically-hiding-a-portion-of-a-html-table)

演示：http: [//jsbin.com/ahigi/1/edit](http://jsbin.com/ahigi/1/edit)

小号

# iphone - 带有存储在数组中的照片缩略图的 UIViewController

> ID：11669948
> 
> 赞同：1
> 
> 时间：2012-07-26T13:04:50.667
> 
> 标签：iphone, thumbnails, photos

我是 iPhone 开发的新手。我的任务是创建照片数组（我将为此使用循环），并且我需要在一个屏幕上显示 10 张照片的缩略图。那么问题是如何创建照片的缩略图？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:08:37.173

有很多方法可以做到这一点。首先是创建十个带有小图像的按钮（每个 UIButton 的 UIImage） 另一种方法是使用[KTPhotoBrowser 类](https://github.com/kirbyt/KTPhotoBrowser)，但由于您是初学者，您可能会发现它有点复杂，但您当然可以尝试，它有很好的文档说明。问候

# memory - 并发内核执行是否需要使用固定内存

> ID：11669949
> 
> 赞同：1
> 
> 时间：2012-07-26T13:04:54.613
> 
> 标签：memory, concurrency, cuda, locked

CUDA 可以利用几种不同形式的任务并行性。我们可以在内核执行的同时来回复制内存。在这种情况下，我们必须使用 cudaHostAlloc 将主机内存分配为固定内存，并且流可用于并行执行事物。但是，如果我只对使用流并行运行几个内核感兴趣，我必须使用固定内存还是可以使用普通的未固定内存（即使用 malloc）？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:27:16.507

只要您在单独的流中调用内核，CUDA 就会尝试并行运行这些内核。

内核只能引用有设备内存地址的内存；获得主机内存的设备内存地址的唯一方法是将其分配为映射的固定内存。如果启用了 UVA，这会自动发生；否则，您必须使用 cudaDeviceMapHost 调用 cudaSetDeviceFlags()，并使用 cudaHostAllocMapped 标志调用 cudaHostAlloc()。

因此，如果目标是让同时运行的内核引用固定内存，那么您问题的答案是肯定的，您必须使用固定内存并且必须映射该内存。

# android - 我想在安装时注册我的应用程序？

> ID：11669956
> 
> 赞同：2
> 
> 时间：2012-07-26T13:05:36.503
> 
> 标签：android, android-layout

问题

1.  将进行注册的活动将仅显示一次
2.  注册后，控件应移至下一个主要活动

我使用了以下代码

下面的代码不符合我的要求？

任何帮助将不胜感激！！

注册活动中的代码

```
 SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    SharedPreferences.Editor editor=prefs.edit();
    editor.putBoolean("registration", true);
    editor.commit(); 
```

主要活动中的代码

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    boolean regComplete =prefs.getBoolean("registration", false);
    SharedPreferences.Editor editor =prefs.edit();
    editor.putBoolean("registration", false);

    editor.commit();

    if(regComplete)
    {
       startActivity(new Intent(this, SecureXActivity.class));
    } else 
    {
       startActivity(new Intent(this, LoginActivity.class));

   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T13:15:41.140

只需输入您的注册码`SecureXActivity.class`

并在之前检查注册`setContentView()`，如果没有完成，则启动`LoginActivity`.class

并在`LoginActivity.class`注册完成后放入这些代码，

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
SharedPreferences.Editor editor=prefs.edit();
editor.putBoolean("registration", true);
editor.commit(); 
```

如果您使用这种方法，那么我认为您不需要`Main Activity class`..

请记住，这一切都是在您的应用程序首次运行时完成的，而不是在安装时完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:22:05.253

注册活动应该是这样的：

```
public class RegistrationActivity extends Activity {

    public static SharedPreferences pref;
    public static final String PREFS_NAME = "MyPrefsFile";

    public void onCreate(Bundle savedInstanceState) {

            pref = getSharedPreferences(PREFS_NAME, 0);
                        boolean regComplete =prefs.getBoolean("registration", false);
                        if(regComplete){
                        //go to main class
                        }else{
                        //stay in the registration class
                        }
}
} 
```

主类应该是：

```
public class MainActivity extends Activity {

    public void onCreate(Bundle savedInstanceState) {

    RegistrationActivity.pref = getSharedPreferences(PREFS_NAME, 0);
    SharedPreferences.Editor editor = settings.edit();

    editor.putBoolean("registration", true);
        // Commit the edits!
    editor.commit();
}
} 
```

# android - 从 Android 流式传输到 VLC

> ID：11669958
> 
> 赞同：1
> 
> 时间：2012-07-26T13:05:38.857
> 
> 标签：android, rtsp, vlc, rtp

我知道有人问过类似的问题，但我无法找到具体问题的答案。

我正在尝试创建从 Android 相机到 VLC 播放器客户端的 RTSP/RTP 视频流。我编写了一个小型 RTSP 服务器来处理所有设置，VLC 似乎喜欢我的参数。但是，在发出 PLAY 命令并且我的应用程序开始发送视频流（通过 DatagramPackets）后，VLC 播放器不会收到任何数据。

我正在使用 jlibrtp 库并像这样设置我的流

```
 sendSoc = new DatagramSocket(1238);
    recSoc = new DatagramSocket(1239);
    sess = new RTPSession(sendSoc, recSoc);
    FakeClass fc = new FakeClass(); //This implements the RTPAppIntf but all the functions are empty
    sess.RTPSessionRegister(fc, null, null);
    sess.payloadType(96);
    Participant p = new Participant("localhost",1236,1237);
    sess.addParticipant(p); 
```

这是我从 VLC 播放器看到的日志

```
Opening connection to 192.168.1.221, port 1234...
[0xb1003790] main art finder debug: no art finder module matching "any" could be loaded
[0xb1003790] main art finder debug: TIMER module_need() : 6.331 ms - Total 6.331 ms / 1 intvls (Avg 6.331 ms)
[0x9f653e0] main playlist debug: art not found for rtsp://192.168.1.221:1234
...remote connection opened
Sending request: OPTIONS rtsp://192.168.1.221:1234 RTSP/1.0
CSeq: 2
User-Agent: LibVLC/2.0.1 (LIVE555 Streaming Media v2011.12.23)

Received 76 new bytes of response data.
Received a complete OPTIONS response:
RTSP/1.0 200 OK
CSeq: 2
Public: DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE

Sending request: DESCRIBE rtsp://192.168.1.221:1234 RTSP/1.0
CSeq: 3
User-Agent: LibVLC/2.0.1 (LIVE555 Streaming Media v2011.12.23)
Accept: application/sdp

Received 240 new bytes of response data.
Received a complete DESCRIBE response:
RTSP/1.0 200 OK
CSeq: 3
Content-Type: application/sdp

v=0
o=- 1343306778867 1343306778867 IN IP4 192.168.1.221
s=Droid Stream
i=Live Stream from Android Camera
t=1343306778873 0
m=video 1236/2 RTP/AVP 96
a=rtpmap:96 H264/9000

[0xb0101190] live555 demux debug: RTP subsession 'video/H264'
Sending request: SETUP rtsp://192.168.1.221:1234/ RTSP/1.0
CSeq: 4
User-Agent: LibVLC/2.0.1 (LIVE555 Streaming Media v2011.12.23)
Transport: RTP/AVP;unicast;client_port=1236-1237

Received 128 new bytes of response data.
Received a complete SETUP response:
RTSP/1.0 200 OK
CSeq: 4
Session: 1343306779273
Transport: RTP/AVP/UDP;unicast;client_port=1236-1237;server_port=1238-1239

[0xb5203c18] main input debug: selecting program id=0
[0xb0101190] live555 demux debug: setup start: 0.000000 stop:0.000000
Sending request: PLAY rtsp://192.168.1.221:1234 RTSP/1.0
CSeq: 5
User-Agent: LibVLC/2.0.1 (LIVE555 Streaming Media v2011.12.23)
Session: 1343306779273
Range: npt=0.000-

Received 71 new bytes of response data.
Received a complete PLAY response:
RTSP/1.0 200 OK
CSeq: 5
Session: 1343306779273
Range: npt=0.000- 
```

. . [剪辑] 。.

```
[0xb5203c18] main input debug: `rtsp://192.168.1.221:1234' successfully opened
[0xb0101190] live555 demux warning: no data received in 10s. Switching to TCP
Sending request: TEARDOWN rtsp://192.168.1.221:1234 RTSP/1.0
CSeq: 6
User-Agent: LibVLC/2.0.1 (LIVE555 Streaming Media v2011.12.23)
Session: 1343306779273 
```

所以我不知道出了什么问题。VLC 应该在 android 设备端口 1236 上监听，但它没有看到数据包，所以我不知道它在哪里监听。能告诉我这看起来对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:13:45.673

发现问题是将我的数据包写入 Android 设备端口 1236 而不是客户端设备端口 1236。所以 SETUP 命令中的传输参数说明

```
Transport: RTP/AVP/UDP;unicast;client_port=1236-1237;server_port=1238-1239 
```

说明服务器（Android 手机）将从服务器端口 1238 发送 RTP 数据包到客户端设备端口 1236。同样，RTCP 通信将发生在服务器端口 1239 和客户端设备端口 1237 之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T10:44:50.217

您没有尝试检查会话吗？它是否包含端口 1236 上的数据包？您的 FakeClass 是否可能必须包含任何必须将数据发送到 VLC 的函数？

# mysql - Hibernate 和 MySQL：UTC 日期时间

> ID：11669962
> 
> 赞同：2
> 
> 时间：2012-07-26T13:05:58.890
> 
> 标签：mysql, hibernate, timezone, timestamp, utc

我们有一个 MySQL 数据库，其中 UTC 时间戳被持久化到 DATETIME 列中。

我正在通过 Hibernate 检索这些时间（到 Date 属性中，使用 TemporalType.TIMESTAMP）并希望将它们原封不动地显示给用户。

我看到的问题是，当 Hibernate 读取列值时，它会为对象的 Date 属性分配一个时区（从纪元开始的秒数）值。但是，它根据本地时区存储此值。

```
mysql> create table datetest(mydate datetime);
Query OK, 0 rows affected (0.13 sec)

mysql> insert into datetest values('2012-07-25 16:00:00');
Query OK, 1 row affected (0.00 sec)

mysql> select mydate from datetest;
+---------------------+
| mydate              |
+---------------------+
| 2012-07-25 16:00:00 |
+---------------------+
1 row in set (0.00 sec) 
```

在 Hibernate 中加载“datetest”对象并查看“mydate”值将显示该值：

```
2012-05-24T15:00:00.000+0100 
```

我在英国，所以 +0100 (GMT+DST) 是当地时区。这与 UNIX_TIMESTAMP() 结果匹配：

```
mysql> select unix_timestamp(mydate) from datetest;
+------------------------+
| unix_timestamp(mydate) |
+------------------------+
|             1343228400 |
+------------------------+
1 row in set (0.00 sec) 
```

我假设当 Hibernate 加载记录时，它使用 UNIX_TIMESTAMP() 来填充对象的 Date 属性。UNIX_TIMESTAMP() 的文档指出：

> 服务器将日期解释为当前时区中的值，并将其转换为 UTC 中的内部值

我无法控制全局更改服务器的时区，并且我们的数据库中还有许多其他与时区相关的列不应更改。那么我如何告诉 Hibernate 只有一些列值是 UTC 并确保它不会对它们应用任何时区“格式”？

在 MySQL 命令行客户端中，我可以使用更改本地时区

```
SET TIME_ZONE='+0:00' 
```

这允许 UNIX_TIMESTAMP() 返回一个 UTC 值，但我不知道如何告诉 Hibernate 在运行从数据库中提取信息的 Criteria/Projection 之前发送这个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:46:53.303

Java`Timestamp`没有任何时区。您看到的时区是您的本地时区，它由将`Timestamp`实例转换为可读字符串的方法显示（并且您在问题中没有告诉我们）。为了您的方便，此方法似乎使用您当地的时区，以便您能够轻松地将其显示的时间与挂钟显示的时间进行比较。

如果您想以`Timestamp`其他方式格式化实例，使用另一个时区，请使用`SimpleDateFormat`.

# php - 特定的数组排序

> ID：11669963
> 
> 赞同：0
> 
> 时间：2012-07-26T13:06:04.143
> 
> 标签：php, algorithm, sorting

我有一个奇怪的问题：这是订购这样一个数字数组的智能/最佳方法

```
[1,1,2,2,3,3,4,4] 
```

对此

```
[1,2,3,4,1,2,3,4] 
```

这个想法是平衡列表，以便为列表的每个元素提供某种优先级。语言可以是php，没关系

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:40:12.410

假设我们有 [1,1,2,2,2,2,3,3] 取第一组相等的数字并将其放入单独的数组中（垂直）

```
1 1 
```

同样对于第二组相等的数字，依此类推

```
1 1 
2 2 2 2
3 3 3 
```

连接数组以获得结果

```
[1,2,3][1,2,3][2,3][2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:42:06.623

遍历数组中的每个元素并将其复制到第二个数组中，其中每个元素还包含第二个排序键，即序列号。

因此，让我们调用您的输入数组 A。

第一：排序A

然后：遍历 A 并将每个元素复制到一个新数组 B 中，其中每个元素都有第二个排序键，分别称为 key1 和 key2。Key1 是来自 A 的值，key2 是序列号。

```
A: 1,1,2,2,3,3,4,4
B: (1,1),(1,2),(2,1),(2,2),(3,1),(3,2),(4,1),(4,2) 
```

现在为 B 的元素创建一个比较函数，该函数首先在 key2 上排序，然后在 key1 上排序：

```
bool isSmallerThan( x, y )
{
   if ( x.key2 < y.key2 ) return true;
   if ( x.key2 > y.key2 ) return false;
   if ( x.key1 < y.key1 ) return true;
   return false;
} 
```

现在使用新的比较函数对 B 进行排序。

遍历 B 并将所有 key1 复制回 A。

# wpf - ScrollViewer 未填满全屏

> ID：11669977
> 
> 赞同：0
> 
> 时间：2012-07-26T13:06:52.397
> 
> 标签：wpf, xaml, scroll, fullscreen

我试图让 ScrollViewer 拉伸并适应屏幕的大小，但我没有管理，因为它仍然保持列表视图的大小。

有什么办法可以做到这一点？

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <ScrollViewer VerticalScrollBarVisibility="Visible" HorizontalScrollBarVisibility="Visible">
        <ListView ScrollViewer.VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Hidden">
            <ListView.View>
                <GridView>
                    <!-- code -->
                </GridView>
            </ListView.View>
        </ListView>
    </ScrollViewer>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:17:17.483

问题是我在父窗口中有一个 StackPanel，因为上面在 UserControl 中。将 StackPanel 更改为 DockPanel 并工作。

# ruby-on-rails - Rails - 如何检查列表中的第一个无线电输入？

> ID：11669991
> 
> 赞同：0
> 
> 时间：2012-07-26T13:07:25.203
> 
> 标签：ruby-on-rails, radio-button

我正在从数据库加载数据，这些数据以 ( `form_for`) 形式显示为无线电输入。无论如何支持Rails，如何总是检查组中的第一个无线电输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:15:08.347

将此添加到第一个 radio_button：

```
:checked => true 
```

尽管如果您从模型中使用它，我强烈建议您使用[简单的形式](https://github.com/plataformatec/simple_form/)

# jquery - jQuery 修改 contains 语句来过滤

> ID：11669992
> 
> 赞同：1
> 
> 时间：2012-07-26T13:07:28.827
> 
> 标签：jquery, jquery-selectors

我目前对带有 contains 语句的 jQuery 有一个小问题。当我想要完全匹配时，它会捕获所有可能的匹配。我意识到过滤器语句可能是获得精确匹配的最佳替代方法之一。

但是，我查看了多个示例，但仍然无法完全使该语句起作用。

这是其中包含的原始语句。

```
function showDropDown(){
    $(".sf-with-ul):contains('"+stringToMatch+"')").parent().showSuperfishUl();
}; 
```

该语句应该显示一个下拉菜单并将显示多个菜单。如果一个菜单有“This”，另一个有“This1”，我说包含“This”，我两个都得到。我想创建一个带有过滤器的语句。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:10:30.710

选择器中有一个额外`)`的。试试这个：

```
function showDropDown(){
    $(".sf-with-ul:contains('"+stringToMatch+"')").parent().showSuperfishUl();
}; 
```

或者：

```
$(".sf-with-ul").filter(function(){
       return $(this).text() == stringToMatch
}).parent().showSuperfishUl(); 
```

# javafx-2 - ListView 剪辑

> ID：11669993
> 
> 赞同：0
> 
> 时间：2012-07-26T13:07:29.797
> 
> 标签：javafx-2

我在 JavaFx2 的 ListView 上工作了一点。我遇到了一个问题。是否可以关闭 ListCell/ListView 的剪辑？我添加了一个必须比 ListView 更宽的 ImageView，JavaFx2 会自动显示一个滚动条。

这是我的代码剪断了我如何将 ImageView 添加到我的列表中：

```
 list.setCellFactory(new Callback<ListView<String>, ListCell<String>>() {
        @Override
        public ListCell<String> call(ListView<String> param) {
            final ListCell<String> blub = new ListCell<String>() {

                @Override
                protected void updateItem(String item, boolean empty) {
                    super.updateItem(item, empty);
                    if (item != null) {
                        StackPane p = new StackPane();
                        Label label = new Label(item);
                        p.getChildren().addAll(img, label);
                        setGraphic(p); 
                        p.setAlignment(Pos.CENTER_LEFT); 

                    }
                }
            };
            blub.setStyle("-fx-background-color:transparent");

            return blub;
        }
    }); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:52:47.473

我不认为这是可能的。

也许尝试使用 ListView 的皮肤。滚动条似乎是在这个类中管理的。它不使用滚动窗格。

另一种解决方案可能是将 ListView 替换为 ScrollPane 中的 VBox。

最后，您可以尝试修改`img`（顺便说一下，它来自哪里，以及它是什么类？）以仅显示您需要的内容。

无论如何，我对您将使用的解决方案感兴趣。

# c# - 市场测试套件返回“后台代理无法使用不受支持的 API”

> ID：11669995
> 
> 赞同：2
> 
> 时间：2012-07-26T13:07:33.023
> 
> 标签：c#, .net, silverlight, windows-phone-7, marketplace

首先，我的应用程序构建和运行都非常好，没有例外。

当我运行 WP7 SDK 中包含的 Marketplace 测试工具包时，我收到大量关于使用不受支持的 API 的警告。

现在，有问题的 DLL 文件 (API) 是我的控制器、模型、实用程序类和其他资源所在的位置（任何不直接连接到 UI 的东西）。

我的后台代理使用的方法包括对 REST 服务的一些调用，以及更新动态磁贴。但是，市场测试工具包抱怨后台代理类没有调用类和方法调用。

这里的问题是——它还会通过微软的检查吗？毕竟，后台代理没有做任何非法的事情（就 API 调用而言），它只是有可能这样做）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:22:53.100

我认为如果测试套件显示警告，则很可能无法通过市场检查。

最好的解决方案可能是将有问题的 DLL 分成两部分，一个包含后台代理的所有功能，但避免导致问题的 API 调用，另一个 DLL 包含其他所有内容。这两个 DLL 都可以在应用程序中使用，但对于后台代理来说只是“安全”的一个。

我必须为目前在 MarketPlace 中的 PayPhone Lite 应用程序（一个 PayPal 应用程序）做类似的事情。

HTH，鲁珀特。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T15:15:08.670

# magento - Magento - 更改页脚

> ID：11669998
> 
> 赞同：0
> 
> 时间：2012-07-26T13:07:39.277
> 
> 标签：magento, layout, content-management-system, block, footer

是否可以在 Magento 中更改类别页面的页脚？我们使用的是 1.7.0.2 版本

我们想要什么：我们需要页脚浮动在类别页面上并粘在任何其他页面上。粘性部分和浮动部分不是问题。

我们需要弄清楚，如何将浮动页脚“分配”到类别页面上的页脚。

这没有奏效：

```
<default>
<reference name="root">
    <action method="setTemplate">
        <template>page/1column-float.phtml</template>
    </action>
<block type="page/html_footer" name="footer" as="footer" template="page/html/footer-float.phtml" />
     </reference>  
 </default> 
```

你能给我一个提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:12:29.293

我认为这会给你你想要的：

```
<catalog_category_default>
    <reference name="root">
        <action method="setTemplate">
            <template>page/1column-float.phtml</template>
        </action>
        <block type="page/html_footer" name="footer" as="footer" template="page/html/footer-float.phtml" />
     </reference>  
 </catalog_category_default>

<catalog_category_layered>
    <reference name="root">
        <action method="setTemplate">
            <template>page/1column-float.phtml</template>
        </action>
        <block type="page/html_footer" name="footer" as="footer" template="page/html/footer-float.phtml" />
     </reference>  
 </catalog_category_layered> 
```