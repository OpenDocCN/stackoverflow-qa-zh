# StackOverflow 问答 12286000-12286999

# module - 为什么linux内核不使用我的驱动程序

> ID：12286002
> 
> 赞同：2
> 
> 时间：2012-09-05T16:38:13.823
> 
> 标签：module, load, kernel, driver

我尝试使用本教程编写一个简单的 linux char 设备驱动程序：http: [//matthias.vallentin.net/blog/2007/04/writing-a-linux-kernel-driver-for-an-unknown-usb-device /](http://matthias.vallentin.net/blog/2007/04/writing-a-linux-kernel-driver-for-an-unknown-usb-device/)

我正在使用稍新的设备和稍新的内核。因此，我使用了他们的代码更改产品和供应商 ID，并且我只是尝试在连接设备时进行内核调用探测功能，但我未能查看我的 /var/log/messages。驱动加载成功：

```
Sep  5 18:32:43 manticore kernel: [10673.664884] usbcore: deregistering interface driver missile_launcher
Sep  5 18:32:43 manticore kernel: [10673.664908] [info]  usb_ml_exit(661): module deregistered
Sep  5 18:32:43 manticore kernel: [10673.666314] usbcore: registered new interface driver missile_launcher
Sep  5 18:32:43 manticore kernel: [10673.666317] [info]  usb_ml_init(651): driver registered successfully 
```

但是当设备连接时，驱动程序不被使用：

```
Sep  5 17:58:12 manticore kernel: [ 8607.295688] usb 3-1.1: New USB device found, idVendor=2123, idProduct=1010
Sep  5 17:58:12 manticore kernel: [ 8607.295689] usb 3-1.1: New USB device strings: Mfr=1, Product=2, SerialNumber=0
Sep  5 17:58:12 manticore kernel: [ 8607.295691] usb 3-1.1: Product: USB Missile Launcher
Sep  5 17:58:12 manticore kernel: [ 8607.295693] usb 3-1.1: Manufacturer: Syntek
Sep  5 17:58:12 manticore kernel: [ 8607.295789] usb 3-1.1: usb_probe_device
Sep  5 17:58:12 manticore kernel: [ 8607.295791] usb 3-1.1: configuration #1 chosen from 1 choice
Sep  5 17:58:12 manticore kernel: [ 8607.295797] usb 3-1.1: ep 0x81 - rounding interval to 64 microframes, ep desc says 80 microframes
Sep  5 17:58:12 manticore kernel: [ 8607.295855] usb 3-1.1: Successful Endpoint Configure command
Sep  5 17:58:12 manticore kernel: [ 8607.296132] usb 3-1.1: adding 3-1.1:1.0 (config #1, interface 0)
Sep  5 17:58:12 manticore kernel: [ 8607.296173] usbhid 3-1.1:1.0: usb_probe_interface
Sep  5 17:58:12 manticore kernel: [ 8607.296174] usbhid 3-1.1:1.0: usb_probe_interface - got id
Sep  5 17:58:12 manticore kernel: [ 8607.298577] usbhid 3-1.1:1.0: looking for a minor, starting at 96
Sep  5 17:58:12 manticore kernel: [ 8607.298697] generic-usb 0003:2123:1010.0008: hiddev0,hidraw2: USB HID v1.10 Device [Syntek USB Missile Launcher] on usb-0000:00:14.0-1.1/input0
Sep  5 17:58:12 manticore kernel: [ 8607.298712] drivers/usb/core/inode.c: creating file '016'
Sep  5 17:58:12 manticore kernel: [ 8607.298754] hub 3-1:1.0: port 2, status 0101, change 0000, 12 Mb/s
Sep  5 17:58:12 manticore kernel: [ 8607.310627] hub 3-1:1.0: port 2 not reset yet, waiting 10ms
Sep  5 17:58:12 manticore kernel: [ 8607.372509] usb 3-1.2: new high-speed USB device number 17 using xhci_hcd
Sep  5 17:58:12 manticore kernel: [ 8607.418456] usb 3-1.2: skipped 1 descriptor after configuration
Sep  5 17:58:12 manticore kernel: [ 8607.418460] usb 3-1.2: skipped 6 descriptors after interface
Sep  5 17:58:12 manticore kernel: [ 8607.418462] usb 3-1.2: skipped 1 descriptor after endpoint
Sep  5 17:58:12 manticore kernel: [ 8607.418463] usb 3-1.2: skipped 9 descriptors after interface
Sep  5 17:58:12 manticore kernel: [ 8607.419100] usb 3-1.2: default language 0x0409
Sep  5 17:58:12 manticore kernel: [ 8607.421607] usb 3-1.2: udev 17, busnum 3, minor = 272 
```

我负责建立此关联的代码是：

```
#define ML_VENDOR_ID    0x2123
#define ML_PRODUCT_ID   0x1010

static struct usb_device_id ml_table [] = {
        { USB_DEVICE(ML_VENDOR_ID, ML_PRODUCT_ID) },
        { }
};

static struct usb_driver ml_driver = {
        .name = "missile_launcher",
        .id_table = ml_table,
        .probe = ml_probe,
        .disconnect = ml_disconnect,
}; 
```

我的内核版本是 3.3.8

有什么想法可能是错的吗？

顺便提一句。我对此完全陌生，因此很可能我跳过了一些相关信息，请询问我是否需要更多信息。

# objective-c - iOS 5 之前的容器视图控制器

> ID：12286003
> 
> 赞同：0
> 
> 时间：2012-09-05T16:38:19.327
> 
> 标签：objective-c, ios

iOS 5 添加了一个不错的功能，允许您[嵌套 UIViewControllers](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)。使用这种模式，我很容易创建自定义警报视图——我创建了一个半透明视图来使屏幕变暗，并创建了一个自定义视图，其中包含一些我可以与之交互的小部件。我将 VC 添加为希望在其中显示的 VC 的子项，然后将其视图添加为子视图，并制作了一些动画以将其显示在屏幕上。

不幸的是，我需要支持 iOS 4.3。可以做这样的事情，还是我必须直接从我想在其中显示它的 VC 管理我的“警报”？

**更多信息**

因此，如果我在文件所有者为“TapView”且子视图为 UIButton 的 nib 中创建自定义视图。我将 UIButton 操作绑定到 TapView 中的 IBAction。

现在在我的 MainControllerView 中，我简单地添加 TapView：

```
TapView *tapView = [[TapView alloc] init];
[[self view] addSubview:tapView]; 
```

我看到了我的 TapView，但我无法与它上面的 UIButton 交互，并且可以与隐藏在它后面的 MainControllerView 上的 UIButton 交互。出于某种原因，我不知道我错过了什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:29:15.387

不确定这是否有帮助，但是，在我需要对潜在的多个控制器进行更多控制的情况下，我实现了一个模式，其中我有一个“主”控制器对象（不需要是 UIViewController 的后代），它实现一个委托协议（在它自己的文件中单独声明），然后让我需要挂钩的任何其他控制器将该类型的对象声明为委托，并且主机可以做任何它需要做的事情来响应来自与代表一起的控制器，在您需要的任何时候；在您的情况下，显示警报并充当其代表来处理按钮选择。我发现这种方法非常有效、简单且通常更清洁。YMMV ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T09:54:41.413

注册。您的第二个查询，您尝试使用 nib 创建自定义视图。不要更改 FileOwner 类型，而是为顶级视图对象的类属性设置“TapView”。

完成此操作后，您在建立联系时可能会遇到困难。为此，只需手动选择 TapView 文件进行连接。

此外，要加载视图，您需要加载其 nib 文件。您可以为此在 TapView 类中创建一个类级别的辅助方法，如下所示

```
+(TapView *) getInstance
{
    NSArray *bundle = [[NSBundle mainBundle] loadNibNamed:@"TapView" owner:self options:nil];

    TapView *view;
    for (id object in bundle) {
        if ([object isKindOfClass:[TapView class]]) {
            view = (TapView *) object;

            break;
        }
    }

    return view;
} 
```

现在，您可以像这样查看对象

```
TapView *tapView = [TapView getInstance]; 
```

# spring - 存储使用 Spring JavaMail 和 Velocity 模板生成的 Outlook 电子邮件

> ID：12286005
> 
> 赞同：0
> 
> 时间：2012-09-05T16:38:24.400
> 
> 标签：spring, jakarta-mail, outlook-2010

我正在使用 Spring JavaMail 和 Velocity 模板生成电子邮件以发送给客户。我必须将这些传出的电子邮件存储到 .MSG 格式的某个文件夹中。我在网络上做了很多研究。但找不到合适的 Java API这个。在 Spring Java Mail 中，我找不到 JavaX.mail API 中的 writeTO() 方法。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:15:23.980

您已经发现 javax.mail.Part 有一个`writeTo`方法。

因此，您需要一种将 spring 简单邮件“转换”为 javax.mail 的方法

它应该或多或少这样工作：

```
org.springframework.mail.javamail.MimeMailMessage message 
message = new MimeMailMessage(new SmartMimeMessage(getSession(),
           getDefaultEncoding(),
           getDefaultFileTypeMap()));
yourSimpleMessage.copyTo(message);

javax.mail.internet.MimeMessage result = message.getMimeMessage());

result.writeTo(yourOutputStream); 
```

# c# - 如何在 C# 中制作 iphone 应用程序

> ID：12286010
> 
> 赞同：-3
> 
> 时间：2012-09-05T16:38:43.287
> 
> 标签：c#, iphone

> **可能重复：**
> [有没有办法在 C# 中为 iphone 制作应用程序](https://stackoverflow.com/questions/8126248/is-there-a-way-to-make-applications-in-c-sharp-for-iphone)

有没有办法在 C# 中创建 iPhone 应用程序？如果是这样，它们是什么？我想知道是否有其他方法可以制作不涉及我购买 Mac 的 iPhone 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:39:59.963

是的，您可以使用 C# 制作 iPhone 应用程序，但您仍然需要 Mac。允许您执行此操作的框架是[Monotouch](http://xamarin.com/monotouch)。

# delphi - Delphi 从哪里获得 BDSCOMMONDIR 的价值？

> ID：12286012
> 
> 赞同：4
> 
> 时间：2012-09-05T16:38:49.723
> 
> 标签：delphi, delphi-xe2

我的一个系统有一个损坏的 Delphi 安装：它认为`BDSCOMMONDIR`指向，`C:\Windows\system32\9.0`而在一个正常运行的系统上，它指向`C:\Users\Public\Documents\RAD Studio\9.0`.

我可能是企业安全疯狂的受害者，因为我发现没有人可以访问`C:\Users\Public`故障系统上的目录。

我想要的是将目录的内容移动到开发人员可以编写的地方，然后全局（`C:\ProgramData`想到一个子目录）并全局设置`BDSCOMMONDIR`.

那么：Delphi`BDSCOMMONDIR`从哪里获得价值？
我怎样才能覆盖它？

它阻碍我的主要原因是我现在在每次尝试编译/构建时都会得到这个：

```
[MakeDir Error] Unable to create directory "C:\Windows\system32\9.0\hpp\". Access to the path 'C:\Windows\system32\9.0\hpp\' is denied.
[MakeDir Error] Unable to create directory "C:\Windows\system32\9.0\Dcp". Access to the path 'C:\Windows\system32\9.0\Dcp' is denied.
[MakeDir Error] Unable to create directory "C:\Windows\system32\9.0\hpp". Access to the path 'C:\Windows\system32\9.0\hpp' is denied. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T16:46:01.583

你可以去

工具|选项|环境选项|环境变量

双击

BDSCOMMONDIR

并将其设置为您想要的任何内容。

另请查看[注册表中存储的环境变量在哪里？](https://stackoverflow.com/questions/573817/where-are-environment-variables-stored-in-registry)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-11T20:28:34.310

我现在可以访问带有 Delphi 2007 的系统，显示出类似的症状，我使用[RegAlyzer](http://www.safer-networking.org/products/regalyzer/)进行了验证。

默认情况下，Delphi 2007 使用`SYSTEM`注册表中的环境变量设置：

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment 
```

它*永远不会*`USER`从注册表中的环境变量键中获取值：

```
HKEY_CURRENT_USER\Environment 
```

Delphi 2007（BDS 5.0 版）将*覆盖存储在此键下：*

```
HKEY_CURRENT_USER\Software\Borland\BDS\5.0\Environment Variables 
```

所有三个键都存储常规 REG_SZ 名称/值对（其中 name 是`BDSCOMMONDIR`）。

我的猜测（我希望最终验证这一点）是由于向后兼容性，较新的 Delphi 版本具有类似的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-18T22:02:05.997

问题相当老了，但这是未来读者的正确答案：RAD Studio/Delphi 不会将 BDSCOMMONDIR（和其他）存储在注册表中，但您可以在 \bin 文件夹内名为 rsvars.bat 的文件中找到它。

从我的 Delphi 10.3 Rio 安装中提取的示例：

```
@SET BDS=C:\Delphi\Embarcadero\Studio\20.0
@SET BDSINCLUDE=C:\Delphi\Embarcadero\Studio\20.0\include
@SET BDSCOMMONDIR=C:\Users\Public\Documents\Embarcadero\Studio\20.0 
```

除非您通过环境变量选项手动覆盖它。在这种情况下，它将位于注册表项下：

HKEY_CURRENT_USER\Software\Embarcadero\BDS<版本号>\环境变量

# ios - Instagram ios 在 ios 6.0 中挂钩

> ID：12286014
> 
> 赞同：1
> 
> 时间：2012-09-05T16:38:52.500
> 
> 标签：ios, instagram, ios6

在我的一个应用程序 instagram 中，独家 ios 挂钩在 ios 6.0 中不起作用。相同的代码在 ios 5.0 中运行良好。知道为什么它不起作用吗？

我正在使用 文档交互部分下此链接[http://instagram.com/developer/iphone-hooks/中描述的以下内容。](http://instagram.com/developer/iphone-hooks/)

**“或者，如果您想在应用程序列表中仅显示 Instagram（而不是 Instagram 以及任何其他符合公共/jpeg 的应用程序），您可以指定扩展类 igo，其类型为 com.instagram.exclusivegram。”**

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T20:08:17.773

如果你使用的是 iOS 6 的`UIActivityViewController`，你可以使用这个[UIActivity 子类](http://github.com/coryalder/DMActivityInstagram)来分享到 Instagram。否则，请查看`DMActivityInstagram`类`-(void)performActivity`方法中的代码，了解 iOS 6 上 Instagram 共享的工作示例。

# .net - 在控制数据合约 wcf 方面需要帮助

> ID：12286016
> 
> 赞同：0
> 
> 时间：2012-09-05T16:39:06.360
> 
> 标签：.net, wcf, wcf-data-services

我正在研究 WCF 并希望控制我的服务的输出。这是我的课程：

```
[DataContract]
public class Authenticate
{
[DataMember(order=1)]
public int result;
[DataMember(order=0)]
Public string message;
}

[Operation Contract]
public interface IService1
{
Authenticate Login(string UName,string Password);
}

public class Service1:IService1
{
public Authenticate Login(string UName,string Password)
{
Authenticate result=new Authenticate();
if(UName=="mohit" && Password=="mohit")
{
result.result=1;
result.message="success";
}
else
{
result.result=0;
result.message="failure";

}
return result;
}
} 
```

此方法的输出 XML（忽略元数据标签）是

```
<LoginResponse>
<LoginRsult>
<a:message>success</a:message>
<a:result>1</a:result>
</LoginRsult>
</LoginResponse> 
```

我想要的输出是：

```
<authenticate>
<result>1</result>
<message>success</message>
</authenticate> 
```

我尝试在 Datamember 中设置名称，但不起作用。

此外，无论我在数据成员中设置什么顺序，消息标签总是出现在结果之前（似乎按字母顺序排列）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:44:16.497

在您的示例中，您明确设置了`DataMember`s 的顺序：

```
[DataContract]
public class Authenticate
{
    [DataMember(order=1)]
    public int result;
    [DataMember(order=0)]
    Public string message;
} 
```

它按从最低到最高的顺序排列，因此您已将输出的顺序明确定义为实际发生的方式。如果您希望结果首先出现，然后消息第二个反转以下值`order`：

```
[DataContract]
public class Authenticate
{
    [DataMember(order=0)]
    public int result;
    [DataMember(order=1)]
    Public string message;
} 
```

# c# - 在博客-ASP.net 中按用户更改网站模板

> ID：12286017
> 
> 赞同：0
> 
> 时间：2012-09-05T16:39:06.687
> 
> 标签：c#, asp.net, web, content-management-system

我想创建一个简单的 CMS。我想知道必须让用户更改网站模板。

类似于**wordpress**或**joomla**或**blogger**。

例如，当使用使用标签''时，它会替换站点标题。

在 ASP.net C# 中。

提前致谢。

# c# - 更改 EF 中的 FK 列名称

> ID：12286018
> 
> 赞同：0
> 
> 时间：2012-09-05T16:39:10.057
> 
> 标签：c#, .net, entity-framework-4

我在 EF 有 2 个 POCO 课程

```
 public class Product
  {
      public int Id { get; set; }
      public String Name { get; set; }
      public Category Category { get; set; }
  }

    public class Category
    {
        public int Id { get; set; }
        public String Name { get; set; }
    } 
```

我想更改数据库中的“Product.Category”列名。默认情况下，EF 使它像“ `Category_Id`”

我需要将其更改为“ `Cat`”。我怎样才能做到这一点 ？最好使用 Fluent API

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:57:05.643

```
modelBuilder.Entity<Product>()
    .HasOptional(p => p.Category)  // or HasRequired
    .WithMany()
    .Map(m => m.MapKey("Cat")); 
```

# jquery - 带有ajax的下拉列表不会进入控制器

> ID：12286020
> 
> 赞同：0
> 
> 时间：2012-09-05T16:39:13.853
> 
> 标签：jquery, ajax, asp.net-mvc

我有一个下拉列表，当它发生变化时。我希望所选值使用 ajax 进入控制器

```
 $(document).ready(function () {
        $("#otherCatches").change(function () {

            $.ajax({
                url: "Clients/DDL",
                type: "POST",
                data: {
                    name: $('#othercatches').val()
                },
                success: function (result) {
                    alert(result)
                }
            });
            return false;
        });
    });

         <select id ="otherCatches">
          @foreach (var item in Model.Sample)
         {
           <option>
                @item.SampleName
           </option> 
         }
        </select> 
```

它没有击中控制器

```
[HttpPost]
public virtual ActionResult DDL(int name)
{

     //do method here

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:42:10.630

在您的视图代码中，您没有`value`设置`option`. 所以`$('#othercatches').val()`会给你**undefined**。

使用[`DropDownList`](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.selectextensions.dropdownlist%28v=vs.108%29.aspx)/ [`DropDownListFor`](http://msdn.microsoft.com/en-us/library/ee834953%28v=vs.108%29)HTML Helper 方法呈现 SELECT 元素。

使用强类型视图。例如：如果您的视图用于创建 DDL，您将定义一个像这样的视图模型

```
public class ClientDDL
{
  public string Name { set;get;}  
  public int SelectedCatch { set;get;}
  public IEnumerable<SelectListItem> OtherCatches { set;get;}
  //Other relevant proeprties also here 

  public ClientDDL()
  {
     //Lets initialize the OtherCatches Proeprty
      OtherCatches=new List<SelectListItem>();
  }
} 
```

现在在我们的`GET`操作中，我们将创建这个 ViewModel 的对象并将其发送到视图。

```
public ActionResult CreateDDL()
{
    ClientDDL ddl new ClientDDL();

   // The below line is hard coded for demo. you may replace 
   //  this with loading data from your Data access layer.
    ddl.OtherCatches= new[]
    {
          new SelectListItem { Value = "1", Text = "Book" },
          new SelectListItem { Value = "2", Text = "Pen" },
          new SelectListItem { Value = "3", Text = "Computer" }
    };        
    return View(ddl);
} 
```

现在我们的视图（`CreateDDL.cshtml`），它是我们`ClientDDL`类的强类型，看起来像这样

```
@model ClientDDL    
@using(Html.Beginform())
{
  @Html.DropDownListFor(x => x.SelectedCatch,
                   new SelectList(Model.OtherCatches,"Value","Text"), "Select..")

}
<script type="text/javascript">    
   $(function(){
      $("#SelectedCatch").change(function(){
          $.ajax({
            url: "@Url.Action("DDL","Clients")",
            type: "POST",
            data: {  name: $(this).val() },
            success: function (result) {
                alert(result)
             }
          });
      });
   });
</script> 
```

永远不要硬编码这样的操作方法的路径。尽可能使用 URL Helper 方法。

不知道为什么你有一个`virtual`方法？它应该像这样简单

```
[HttpPost]
public ActionResult DDL(int name)
{

     //do method here

} 
```

# ios - tabBarController 为零；无法更改 viewDidLoad 上的 selectedIndex

> ID：12286021
> 
> 赞同：4
> 
> 时间：2012-09-05T16:39:16.947
> 
> 标签：ios, uitabbarcontroller, uitabbar, tabbar, tabbarcontroller

我有一个这样的 UITabBarController：

```
/*SomeTabBarController.h*/
@interface SomeTabBarController: UITabBarController
@end 
```

在*SomeTabBarController.m*我想更改 viewDidLoad 上的活动选项卡

```
-(void)viewDidLoad
{
  [super viewDidLoad];
  self.tabBarController.selectedIndex = 2;
} 
```

但是， tabBarController 是*nil*。我错过了什么？我有一个导航控制器和 segue 推送到标签栏控制器......

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-05T17:13:43.647

尝试这个：

```
self.selectedIndex = 1; 
```

**你**是 tabBarController :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:43:16.370

您无法更改尚不存在的项目的属性 :) 尝试更改 viewWillAppear 或 viewDidAppear 中的选定选项卡。

或者，如果您能够在 viewDidLoad 上的代码中创建选项卡控制器，那么您可以简单地在下一行设置选定的索引。

# nosql - 存储非平稳分布的数据库

> ID：12286022
> 
> 赞同：1
> 
> 时间：2012-09-05T16:39:22.850
> 
> 标签：nosql, redis, distribution

我有很多分类分布。分类分布是描述从一组 k 事件中抽取的事件的概率。我需要能够非常快速地访问事件的概率。

存储分类分布的一种方法是在 Redis 中使用排序集。每个键索引一个单独的分布，排序集的每个成员都是一个特定事件，每个分数是您看到该事件的次数。对于每个键（分布），您还将存储该分布中每个事件的计数总和，以便您可以正确规范化。

我想问的问题是：如果概率随时间变化，那么存储这些数据的好方法是什么？我基本上希望能够忘记旧的观察结果 - 即以某个固定间隔减少每个键的分数和归一化常数。

使用上面的 redis 方法，我可以每 d 分钟运行一次 cron 作业，迭代每个分布并减少 zscore 和标准化常数中的每个计数。但是，这似乎有点错误（我确定我妈妈告诉我永远不要迭代 KEYS *），所以我想知道是否有其他人更全面地解决了这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:38:30.733

我猜你感觉不对是以下几种组合：

1.  每次运行 cron 作业时都需要访问每个分布、每个 ZSET 的每个成员以及规范化常数
2.  随着时间的推移，无条件递减操作将偏斜分布以支持每个 cron 周期多次发生的事件的方式

我以前没有做过这样的事情，但是如果你能够腾出更多的存储空间，我会想到一个解决方案。

这个想法是定期存储带有时间戳的快照队列。每个快照代表该时间间隔内分布中的事件计数。当您想要使分发中的旧概率过期时，您可以将过期的快照从列表中弹出并相应地减少 ZSET。

更具体地说，您需要：

1.  跟踪在区间 [ *t [k] - t [k-1]* ) 期间发生的事件以及每个事件发生的次数——一组 (event, count) 对。这是对您当前所做的 ZSET 分数和归一化因子的（大概）实时更新的补充。
2.  在每个滴答*t [k]*，存储快照：
    1.  创建一个唯一的密钥*S [k]**来表示t [k]*处的快照——比如 UUID 或类似的
    2.  对于快照中的每个事件*E*，创建一个唯一的哈希键*q(E)*。选择允许您恢复该事件的分发 (ZSET) 密钥和事件（成员）密钥的密钥编码。
    3.  使用事件键*q(E)*和事件计数*E*调用`HSET` *S [k]*以存储事件数据。对快照中的所有事件重复此操作。*`|`*`|`**
    ***   `RPUSH SNAPSHOTS <timestamp>:`*[SK] _***
***   在每个到期*时间 t [m]*，使旧快照到期：
    1.  `LPOP`SNAPSHOTS 列表，解码时间戳并验证是否过期。
    2.  如果没有过期，`LPUSH`它会回到 SNAPSHOTS 列表中，直到下一个过期滴答为止。否则...
    3.  解码快照密钥*S [k]*
    4.  使用`HKEYS` *S [k]*的结果，解码每个事件密钥*q(E)*，获得相应的计数，然后将相应的 ZSET 和归一化因子减少该数量。
    5.  在 SNAPSHOTS 列表中仍然存在过期快照时重复。**

 **所需的额外存储量将取决于快照和到期间隔的长度以及每个快照间隔内发生的不同事件的数量。

在最坏的情况下，每个分布和事件都将在每个快照中表示，因此这对错误因素 #1 没有帮助。乐观地说，任何快照中都将表示适当比例的分布和/或事件，并且到期过程的效率将提高。但这将解决错误因素 #2，即使在最坏的情况下，因为最近发生的事件不会在每次到期 cron 作业运行时在您的分布中无条件地减少。**

# html - 自动调整 div 容器 CSS 的大小

> ID：12286023
> 
> 赞同：0
> 
> 时间：2012-09-05T16:39:33.887
> 
> 标签：html, css

我有一个包含 2 列的网页，宽度为 50%，最小宽度为 500 像素。现在我想知道的是如何让它们调整大小，以便当第二列重新定位到第一列下方时，第一列调整大小以填充整个页面。我无法理解它，任何帮助将不胜感激。下面是基本代码：

html:

```
<div class="column">
    <div id="item-1">
        ##
    </div>
</div>
<div class="column">
    <div id="item-2">
        ##
    </div>
</div> 
```

CSS：

```
.column{
    width:50%;
    min-width:500px;
    float:left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:41:08.103

CSS3 媒体查询

```
@media screen and (max-width: 1000px) {
  .column { width: 100%; float: none; }
} 
```

调整它，你应该得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:41:15.810

您可以使用媒体查询来做到这一点：

```
@media all and (max-width:1000px) {
  .column {width:100%;}
} 
```

# python - 是否有用于在 Python 中临时备份和恢复文本文件的模块

> ID：12286026
> 
> 赞同：-1
> 
> 时间：2012-09-05T16:40:02.967
> 
> 标签：python, backup

我需要在运行时修改文本文件，但稍后恢复其原始状态（即使计算机崩溃）。

我的程序在常规会话中运行。会话结束后，可以更改该文件的原始状态，但原始状态在运行时不会更改。

此文本文件在多个目录中有多个具有相同名称的实例。我的程序在每个目录中运行（但不是并行运行），但根据目录内容，它会做不同的事情。像这样选择工作目录的顺序是完全任意的。

由于每个目录中的文件名相同，因此将备份文件存储在稍微不同的位置似乎是个好主意（即，可以将父目录名称附加到备份目标路径）。

我现在做的是用自写的类备份和恢复文件，并在启动时检查当前目录的先前备份是否正确恢复。但是我的实现需要认真重构，现在我很感兴趣是否已经为此类任务实现了库。

**编辑**

版本控制似乎是个好主意，但实际上它有点矫枉过正，因为它需要网络连接并且通常需要服务器。其他 VCS 需要安装客户端。我会更喜欢纯 python 解决方案，但至少它应该是跨平台的、可移植的并且足够小（例如<10mb）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:44:43.457

实施版本控制......就像svn（参见pysvn），只要repo在同一台服务器上它应该很快......并且允许回滚到文件的任何版本......可能有点矫枉过正，但这将使一切都可逆

[http://pysvn.tigris.org/docs/pysvn_prog_guide.html](http://pysvn.tigris.org/docs/pysvn_prog_guide.html)

你不需要服务器......你可以有本地版本控制，它应该没问题......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:12:28.280

为什么不做每个 unix、mac、window 文件多年来所做的事情——创建一个锁定文件/工作文件的概念。

选择文件进行编辑时：

1.  检查是否有活动锁或崩溃的备份。
2.  如果文件被锁定或崩溃，请给出“恢复”选项
3.  否则，开始编辑文件...

编辑往往会做以下几件事中的一项或多项：

1.  将原始文件复制到“.%(filename)s.backup”
2.  创建一个“.%(filename)s.lock”以防止其他人对其进行操作
3.  完成编辑后，锁定消失并删除 .backup

有时事情会稍微颠倒一下，当 .backup 是活动编辑时，原始文件会保留在原位；成功后 .backup 将替换原始文件

如果您在 linux 机器上使 vi 或其他一些文本程序崩溃，您将看到这些文件已创建。请注意，它们通常有一个点 (.) 前缀，因此它们通常隐藏在命令行中。Word/Powerpoint/等都做类似的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T16:46:12.923

Git、Subversion 或 Mercurial 是您的朋友。

# javascript - jQuery如何 在每个分号后插入标签

> ID：12286027
> 
> 赞同：5
> 
> 时间：2012-09-05T16:40:03.047
> 
> 标签：javascript, jquery

我正在将一些 CSS 转储到一个 div 中，并希望对其进行格式化，使其更清晰。基本上我想要做的是在每个分号后插入一个中断标签。我已经搜索了一段时间，但似乎找不到非常适合我想做的事情。

我有这样的东西...

**HTML**

```
<div class='test'>
color:red;background-color:black;
</div>​ 
```

**jQuery**

```
var test = $('.test').text();
var result = test.match(/;/g);   

alert(result);​ 
```

**而且我试过了。。**

```
var test = $('.test').text();
var result = test.match(/;/g);   

result.each(function(){
$('<br/>').insertAfter(';');
});    

alert(result);​ 
```

另外我在这里开始了一个小提琴..它基本上只是返回匹配的字符...... [http://jsfiddle.net/krishollenbeck/zW3mj/9/](http://jsfiddle.net/krishollenbeck/zW3mj/9/) 这是我迄今为止能够开始工作的唯一部分。

我觉得我正朝着正确的道路前进，但我知道这是不对的，因为它出错了。我在想有一种方法可以在每个匹配的元素之后插入一个中断标签，但我不确定如何到达那里。任何帮助深表感谢。谢谢...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T16:42:23.080

像这样试试

```
var test = $('.test').text();
var result = test.replace(/\;/g,';<br/>');   

$('.test').html(result);​ 
```

[http://jsfiddle.net/Sg5BB/](http://jsfiddle.net/Sg5BB/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T16:44:17.527

### 您可以通过这种方式使用普通的 javascript`.replace()`方法：

```
​$(document)​.ready(function(){
    $(".test").html($(".test").html().replace(/;/g, ";<br />"));
});​ 
```

### 小提琴：http: [//jsfiddle.net/SPBTp/4/](http://jsfiddle.net/SPBTp/4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T16:42:41.380

使用此代码

```
var test = $('.test').text();
var result = test.split(';').join(';<br />') 
```

[http://jsfiddle.net/FmBpF/](http://jsfiddle.net/FmBpF/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T16:43:43.347

您不能在文本上使用 jQuery 选择器，它仅适用于元素。

获取文本，只需将每个替换`;`为`;<br/>`，然后将其放回原处。

```
$('.test').html($('.test').text().replace(/;/g, ';<br/>')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T16:43:39.960

尝试这样的事情：

var test = $('.test').text(); var 结果 = test.replace(/;/g,";
");
$('.test').html(结果); 如果你把它粘在你的 jfiddle 中，那应该可以工作。

# php - symfony2 长脚本中断并显示保存对话框

> ID：12286032
> 
> 赞同：0
> 
> 时间：2012-09-05T16:40:08.473
> 
> 标签：php, symfony, dialog, interruption

我有一个通过 CURL 加载 csv 的脚本，一旦我有了 csv，它将每条记录添加到数据库中，完成后，显示添加的注册表总数。

在少于 500 个注册表上，它执行得很好，问题是当注册表的数量永远不会太大时，执行会在某个时候中断，并且浏览器会显示下载对话框，其中包含一个名为我的 url 的最后一部分的文件而没有不包含任何内容的扩展名。没有警告、错误或任何类型的消息。数据库显示它添加了一些注册表，如果我多次运行脚本，它会增加少量。

我试图寻找有类似情况的人，但还没有找到。

我将不胜感激对此事的任何见解，我不确定这是 symfony2 问题，服务器配置问题还是什么。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:45:31.143

可能您的脚本已达到最大 php 执行时间，默认为 30 秒。您可以在控制器中使用 php set_time_limit() 函数进行冗长的操作来更改它。例如：

```
set_time_limit (300); //300 seconds = 5 minutes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:03:28.400

这更多的是您的网络服务器/环境 PHP 正在运行的限制。

增加 max_execution_time 以允许您的网络服务器运行请求的时间更长 - 替代方法是编写控制台命令，在许多情况下 cli 环境不受限制。

# android-ndk - libcurl for android ndk-build 没有 android 源

> ID：12286033
> 
> 赞同：0
> 
> 时间：2012-09-05T16:40:24.487
> 
> 标签：android-ndk, libcurl

我尝试使用此链接 [https://github.com/jahrome/curl-android.git](https://github.com/jahrome/curl-android.git)中提供的信息使用 andriod ndk 构建 libcurl但我无法做到，因为它还需要 android 源代码......有没有为 android ndk-build 制作 CURL 的其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-05T16:26:52.297

我建议在 docker 容器中构建 libcurl - [http://vitiy.info/dockerfile-example-to-compile-libcurl-for-android-inside-docker-container/](http://vitiy.info/dockerfile-example-to-compile-libcurl-for-android-inside-docker-container/)

简而言之 - 下载 NDK，使用*make-standalone-toolchain.sh*脚本制作独立工具链，将环境变量设置为工具链编译器，并使用交叉编译配置标志构建所有库（如有必要）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T11:22:18.763

见[http://boinc.berkeley.edu/android-boinc/readme.txt](http://boinc.berkeley.edu/android-boinc/readme.txt)

# python - django procfile 找不到 settings.py

> ID：12286036
> 
> 赞同：0
> 
> 时间：2012-09-05T16:40:32.537
> 
> 标签：python, django, heroku, virtualenv, foreman

我正在使用 heroku 和 django / vertualenv ...我使用了这个 boostrap 文件：[https](https://github.com/mtigas/heroku-django-demo-app/blob/master/tldr.markdown) ://github.com/mtigas/heroku-django-demo-app/blob/master/tldr.markdown ，命名了我的应用程序`contest2`但是当我尝试在本地运行工头，`foreman start`我得到：

```
raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
11:10:06 web.1     | ImportError: Could not import settings 'src/contest2/contest2/settings.py' (Is it on sys.path?): Import by filename is not supported. 
```

从procfile所在的目录来看，这个路径：`src/contest2/contest2/settings.py`是正确的。

我的 procfile 看起来像这样：

```
web: gunicorn_django -b 0.0.0.0:$PORT -w 9 -k gevent --max-requests 250 --preload src/$PYTHON_APP_NAME/$PYTHON_APP_NAME/settings.py > Procfile 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:50:32.530

你`src/contest2/contest2/settings.py`被喂给了这个`__import__`功能。

您可以尝试模拟错误：

```
>>> __import__('path/module.py')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: Import by filename is not supported.
>>> 
```

您可能希望将其更改为具有 python 模块名称而不是路径。

更简单的方法是确保它`src/$PYTHON_APP_NAME/$PYTHON_APP_NAME/`在您的路径上，并仅用`settings`作模块名称。

您可能想查看[命令](https://github.com/tilgovi/gunicorn/blob/py24/gunicorn/app/djangoapp.py)[的源代码`gunicorn_django`](https://github.com/tilgovi/gunicorn/blob/py24/gunicorn/app/djangoapp.py) 以了解其工作原理：

# java - 为什么简单的背景动画对我的主线程来说工作量太大？

> ID：12286037
> 
> 赞同：1
> 
> 时间：2012-09-05T16:40:37.403
> 
> 标签：java, android, multithreading, android-animation

我正在开发一个 Android 应用程序，并且在我的主/启动器屏幕（您最初启动应用程序时进入的屏幕）上我想在背景中有一个简单的动画。具体来说，现在我在窗口中心有几个按钮，在背景中我有一些小星星在屏幕的左上角到右下角做一个循环平移动画，在其他所有东西的后面。它是非交互式的，一旦完成就会重复。我有九颗这样的星星，它们不是特别大。但是，当我尝试运行该应用程序时（这确实主要发生在模拟器上，但它也发生在我的手机上，只是不太常见）我收到如下消息：

```
I/Choreographer(  632): Skipped 33 frames!  The application may be doing too much work on its main thread. 
```

似乎它实际上在做的是试图排列我的星星，以便它们同时移动。当我开始动画时，我让它们以彼此偏移的方式运行，即一颗星星每 0.5 秒左右经过一次，但是当它跳过帧时，它会将它们排成一行，因此星星（从几个开始但最终以所有星星）在完全相同的时间开始和结束他们的动画。这看起来很傻，因为有大量恒星同时以相同的速度穿过背景。我猜让它们在同一确切时间移动对处理器来说比让它们在偏移处运行要少，这可能就是它这样做的原因。

我知道除了主线程之外我不能在任何东西上进行 UI 活动，但这似乎有点傻。我所做的只是在我的应用程序背景中制作一个简单的、重复的动画，这“工作量太大”。**那么，有没有一种方法可以制作动画，从而减少工作量，让我的动画看起来像它应该的样子？**我正在尝试编写一个简单的游戏，但如果它甚至无法以可重复的非交互式方式为一些对象设置动画，我无法想象它如何处理交互式游戏。但是我在安卓上玩过互动游戏，所以我一定是遗漏了一些东西。有人有任何提示吗？

PS这里是我用来做动画的代码。
动画代码：

```
public static Animation _runAnimation(Activity ctx, View target) {
      Animation animation = AnimationUtils.loadAnimation(ctx, R.anim.slide_right);
      animation.setFillAfter(true);
      target.startAnimation(animation);
      return animation;
    } 
```

动画布局：（slide_right.xml）

```
<?xml version="1.0" encoding="utf-8"?>

<set xmlns:android="http://schemas.android.com/apk/res/android" android:interpolator="@android:anim/accelerate_interpolator" >
    <translate android:fromXDelta="-20%p" android:toXDelta="100%p" android:duration="2000" android:repeatCount="infinite" />
    <translate android:fromYDelta="-20%p" android:toYDelta="100%p" android:duration="2000" android:repeatCount="infinite" />
    <!--rotate android:pivotX="0" android:toDegrees="360" android:duration="2000" android:repeatCount="10000" /-->//this doesn't cause the stars to spin in place, it rotates them around a point. 

</set> 
```

实际调用：

```
public Activity _launcher = this; //the activity
public Handler handler = new Handler(); //a handler
handler.postDelayed(new Runnable() { 
                 public void run() { 
                     _runAnimation(_launcher, findViewById(R.id.star1)); 
                 } 
            }, 10);
handler.postDelayed(new Runnable() { 
                 public void run() { 
                     _runAnimation(_launcher, findViewById(R.id.star2)); 
                 } 
            }, 700);
handler.postDelayed(new Runnable() { 
             public void run() { 
                 _runAnimation(_launcher, findViewById(R.id.star3)); 
             } 
        }, 1600); 
handler.postDelayed(new Runnable() { 
             public void run() { 
                 _runAnimation(_launcher, findViewById(R.id.star4)); 
             } 
        }, 2500); 
handler.postDelayed(new Runnable() { 
             public void run() { 
                 _runAnimation(_launcher, findViewById(R.id.star5)); 
             } 
        }, 3300);
handler.postDelayed(new Runnable() { 
             public void run() { 
                 _runAnimation(_launcher, findViewById(R.id.star6)); 
             } 
        }, 3700);

handler.postDelayed(new Runnable() { 
             public void run() { 
                 _runAnimation(_launcher, findViewById(R.id.star7)); 
             } 
        }, 4400);

handler.postDelayed(new Runnable() { 
             public void run() { 
                 _runAnimation(_launcher, findViewById(R.id.star8)); 
             } 
        }, 5300);

handler.postDelayed(new Runnable() { 
             public void run() { 
                 _runAnimation(_launcher, findViewById(R.id.star9)); 
             } 
        }, 5800); 
```

# image - 使用 node.js 从图像文件中获取像素数组

> ID：12286039
> 
> 赞同：15
> 
> 时间：2012-09-05T16:40:42.380
> 
> 标签：image, node.js

是否可以使用 node.js 从本地图像文件中获取 RGB 值数组？我正在尝试编写一个脚本，该脚本将文件路径作为其参数并返回一个表示像素数据的数组。

```
function getPixelArray(filePath){
    //return an array of RGB values that correspond to the image
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-01-04T09:37:36.937

您可以尝试[https://www.npmjs.com/package/jimp](https://www.npmjs.com/package/jimp) 这可能很有用：

```
Jimp.read("http://www.example.com/path/to/lenna.jpg", function (err, image) {
    image.getPixelColor(x, y); // returns the colour of that pixel e.g. 0xFFFFFFFF
}); 
```

要获得 RGB，您可以使用：

```
Jimp.intToRGBA(hex); // e.g. converts 0xFFFFFFFF to {r: 255, g: 255, b: 255, a:255} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-05T16:46:08.447

如果您的图像是 PNG 格式，请查看[https://github.com/devongovett/png.js/](https://github.com/devongovett/png.js/)

# networking - 使用 SSH 连接到使用 IPv6 地址的虚拟机客户机

> ID：12286040
> 
> 赞同：0
> 
> 时间：2012-09-05T16:40:45.967
> 
> 标签：networking, ubuntu, ssh, virtualbox, ipv6

我正在使用 Windows，并且还在虚拟机上运行 ubuntu 服务器。最近，当来宾计算机使用 IPv4 地址连接到网络时，我已经无数次通过 SSH 连接到来宾计算机。当我在家和工作时，这又起作用了。现在，我已连接到大学网络。这是在我的 VM 中执行时 ifconfig 的结果。

```
eth0      Link encap:Ethernet  HWaddr 08:00:27:ae:e4:a0  
      inet6 addr: fe80::a00:27ff:feae:e4a0/64 Scope:Link
      UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
      RX packets:65404 errors:0 dropped:0 overruns:0 frame:0
      TX packets:43 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:1000 
      RX bytes:7588239 (7.5 MB)  TX bytes:10610 (10.6 KB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:16 errors:0 dropped:0 overruns:0 frame:0
          TX packets:16 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:1296 (1.2 KB)  TX bytes:1296 (1.2 KB) 
```

我做了一些研究，并在 SO 上找到了这篇文章。 [IPv6 链路本地地址格式](https://stackoverflow.com/questions/5746082/ipv6-link-local-address-format)

所以我在我的主机上运行了 netsh interface ipv6 show address 这是我的 vbox 网络信息

```
Interface 208: VirtualBox Host-Only Network

Addr Type  DAD State   Valid Life Pref. Life Address
---------  ----------- ---------- ---------- ------------------------
Other      Preferred     infinite   infinite fe80::f8cd:e410:b1b1:c081%208 
```

然后我尝试ping地址，它是成功的。然后我尝试使用以下命令通过 SSH 连接到服务器

```
ssh -6 fe80::f8cd:e410:b1b1:c081%208 
```

我得到了这个错误

```
"no address associated with name" 
```

我不明白为什么我会收到这个错误 - 我之前通过指定它们的 ipv4 地址来 ssh 进入机器，而且我以前从未收到过这个错误。谁能告诉我我可能做错了什么？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:23:35.177

尝试指定 ssh 客户端的接口。但是 ssh 没有开关，您必须使用以下语法：

```
ipv6%eth1

fe80::f8cd:e410:b1b1:c081%eth0 
```

# qt - phantomJS 信号连接到信号

> ID：12286041
> 
> 赞同：0
> 
> 时间：2012-09-05T16:40:50.160
> 
> 标签：qt, phantomjs

通过 phantomJS 代码，我在 pages.cpp 文件中遇到了这个（第 315 行）

```
connect(m_networkAccessManager, SIGNAL(resourceRequested(QVariant)),
            SIGNAL(resourceRequested(QVariant))); 
```

而且我不太明白这是如何工作的，我知道您可以将信号连接到 Qt 中的信号。在 Qt 文档中，我发现您还可以将信号直接连接到方法（[http://doc.qt.io/qt-5/qobject.html#connect-2](http://doc.qt.io/qt-5/qobject.html#connect-2)），看到这是我认为的 3 个参数调用这将是webpage.cpp代码上所需的功能，但是将信号连接到相同的信号......我完全迷路了，有什么帮助吗？

PD：我应该说在 Qt 方面不是很有经验，如果这是一个愚蠢的问题，对不起

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:02:43.987

三个参数 QObject::connect()

```
connect(m_networkAccessManager, SIGNAL(resourceRequested(QVariant)),
        SIGNAL(resourceRequested(QVariant))); 
```

相当于

```
connect(m_networkAccessManager, SIGNAL(resourceRequested(QVariant)),
        this, SIGNAL(resourceRequested(QVariant))); 
```

因此，每次发射前者时，`QNetworkAccessManager::resourceRequested(QVariant)`连接到`WebPage::resourceRequested(QVariant)`并导致后者发射。

[Qt文档](http://qt-project.org/doc/qt-4.8/qobject.html#connect)中的更多详细信息

# c# - 解析具有多个值行的文件 C#

> ID：12286042
> 
> 赞同：1
> 
> 时间：2012-09-05T16:40:54.217
> 
> 标签：c#, regex, split

我必须解析一个像这样构造的文件：

```
User: jcruz Name: Jules Last: Cruz  Email: Some@email.com 
User: jdoe Name: John Last: Doe Email: Some@email.com 
User: pmartin Name: Pete Last: Martin Email: Some@email.com 
User: rrichard Name: Reed Last: Richard Email: Some@email.com 
```

我需要将仅包含姓名、姓氏和电子邮件的每一行拆分为类型的对象

```
var contact = new Conctact {
    Name = fieldFromLine,
    Last= fieldFromLine,
    Email = fieldFromLine
} 
```

所以我的问题是使用哪个工具 :`String.Split`或`Regex.Split`. 以及如何实施。

非常感谢你...

这是迄今为止所做的：

```
String archivo = ((FileDialog)sender).FileName;

        using (TextReader sr = new StreamReader(archivo,Encoding.UTF8))
        {
            String line = String.Empty;
            while ((line = sr.ReadLine()) != null )
            {
                string[] result = Regex.Split(line,"User:");
                //How to get the other fields...

            }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:50:18.027

```
var result =File.ReadLines(fileName)
    .Select(line => line.Split(new string[]{"User:", "Name:", "Last:", "Email:"}, StringSplitOptions.RemoveEmptyEntries))
    .Select(parts => new Conctact(){ Name = parts[1], Last = parts[2], Email = parts[3] })
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:58:01.057

试试这个：

```
public class  contact 
{
   public string Name { get; set; }
   public string Lname { get; set; }
   public string Email { get; set; }
}
List<contact> contact = new List<contact>();
        private void split()
        {
            var lines = File.ReadAllLines(@"txt file address");
            foreach (var line in lines)
            {
               var splitline=line.Split(':');
           string name = splitline[2].Replace("Last", "");
           string lname = splitline[3].Replace("Email","");
           contact.Add(new contact { Name = name, Lname = lname, Email = splitline[4] });
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:47:16.947

正则表达式是矫枉过正。还要注意一些包含空格的姓氏。

```
Contact c = new Contact();
string () tokens = input.Split(":".ToCharArray());

if (tokens.Count < 5)
    return; // error

// now strip the last word from each token
c.Name = tokens(2).Substring(0, tokens(2).LastIndexOf(" ".ToCharArray())).Trim();
c.Last = tokens(3).Substring(0, tokens(3).LastIndexOf(" ".ToCharArray())).Trim();
c.Email = tokens(4).Trim(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T16:47:34.360

答：都没有。

使用简单的有限状态机解析器来读取文件，因为**除非您能保证文本值永远不会是“Name:”或“Last:”或“Email:”**，否则您将遇到字符串拆分问题。此外，基于 FSM 的解析器比字符串拆分要快得多（因为没有多余的字符串分配）。

我没有时间写出整个解析器，但这是简单的逻辑：

```
enum State { InUser, InName, InLast, InEmail }

State currentState = State.InUser; // you start off with the 'cursor' in the "User" section
StringBuilder sb = new StringBuilder(); // this holds the current string element
foreach(Char c in entireTextFile) { // presumably using `StreamReader.Read()`
    switch( currentState ) {
        case InUser:
             switch( c ) {
                 // state transition logic here
             }
             // append the character to the StringBuilder until you've identified and reached the next field, then save the sb value to the appropriat
        case InName:
             // and so on...
    }
} 
```

当然，FSM 解析器与正则表达式解析器本质上是一样的，但这意味着您可以自己编写状态转换代码，而不是使用更快、性能更佳的 RegEx 语法。

如果您的项目很小并且不关心性能，并且可以保证某些数据格式规则，那么我会使用正则表达式。

但是永远不要使用 String.Split 来读取文件。

# asp.net - 使用 Windows Identity Foundation (.NET 4.5) 的自定义 STS

> ID：12286044
> 
> 赞同：1
> 
> 时间：2012-09-05T16:41:06.700
> 
> 标签：asp.net, security, single-sign-on, identity, wif

我需要使用 Visual Studio 2012 实现一个自定义 STS，其中包含用于 SSO（和 SSOut）的登录页面，具有不同的 Web 应用程序（具有不同的权限、声明和 .NET fxs、3.5、4.0 和 4.5）。你能帮我实现这个目标吗？欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:01:35.310

有大量可用的示例。我曾经写过一个教程：

[http://netpl.blogspot.com/2011/08/quest-for-customizing-adfs-sign-in-web.html](http://netpl.blogspot.com/2011/08/quest-for-customizing-adfs-sign-in-web.html)

值得一提的是，虽然 SSO 相当简单，但您还必须处理单点注销。这并没有很好的记录。这是如何做到的：

[http://netpl.blogspot.com/2010/12/wif-ws-federation-and-single-sign-out.html](http://netpl.blogspot.com/2010/12/wif-ws-federation-and-single-sign-out.html)

[http://netpl.blogspot.com/2011/05/wif-ws-federation-and-single-sign-out.html](http://netpl.blogspot.com/2011/05/wif-ws-federation-and-single-sign-out.html)

另请注意，有些人可能会投票结束您的问题，因为它太宽泛了。你应该问一些具体的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:30:25.787

您看过[身份和访问工具](http://visualstudiogallery.msdn.microsoft.com/e21bf653-dfe1-4d81-b3d3-795cb104066e)吗？它有许多样本。

自己没有尝试过，VS 2012 存在问题，但这显然已经解决。

# c++ - 为什么 Qt 默认项目为 manwindow.cpp 使用单独的头文件？

> ID：12286046
> 
> 赞同：-1
> 
> 时间：2012-09-05T16:41:09.680
> 
> 标签：c++, qt

我刚刚使用 Qt 设计器表单创建了一个 Qt 默认项目。

MainWindow 类在 mainwindow.h 中声明，然后包含在 mainwindows.cpp 中。

为什么这样做？为什么不直接在 mainwindows.cpp 中声明这种形式？：

```
class MainWindow
{
    ...
} 
```

添加我的代码的正确方法是什么？例如，触发方法的按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:45:53.593

在 C++ 中，您通常将类定义放在头文件 (.h) 中，将方法实现放在源文件 (.cpp) 中。这允许该类的客户使用该类，而不必查看每个函数的实现。这也意味着在添加方法时，您通常必须进行两项更改：将方法添加到类定义中（在标题中），然后将方法的实现添加到 .CPP 文件中。

在头文件中：

```
class MainWindow
{
    void SomeMethod();
}; 
```

在源文件中：

```
void MainWindow::SomeMethod()
{
    // Your code here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:46:29.040

类的定义`MainWindow`需要在另一个文件中，其中在函数中构造它的实例，`main`然后显示。这就是为什么需要在头文件中定义类的原因。

有多种方法可以添加您自己的代码：对于您描述的按钮，您可以完全在 QtCreator UI 中创建，或者您可以在`MainWindow`构造函数中“以编程方式”创建它。

# ruby-on-rails - 获取机架错误 Rack::Lint::LintError: Status must be >=100 seen as integer

> ID：12286048
> 
> 赞同：0
> 
> 时间：2012-09-05T16:41:13.113
> 
> 标签：ruby-on-rails, ruby, rack, middleware, rack-middleware

我正在尝试构建基于机架的 ruby​​ 应用程序，但我还是新手，我正在使用 ruby​​ 1.9.2 -p180

在我的 config.ru 文件中，我有：

```
require "rack"
require "./my_app.rb"
require "./auth.rb"

use Auth
run MyApp.new 
```

现在中间件身份验证的主要问题，简单地说，如果请求的参数少于 2 个，我希望它不要继续 MyApp 并且只打印出一些东西（仅用于测试）：

```
class Auth

  def initialize(app)
    @app = app
  end

  def call(env)     
    request = Rack::Request.new(env)
    if request.params.count < 2
        ["200",{"Content-Type" => "text/plain"}, ["Hello World"]]
        puts 'Working .. '
    else 
        @app.call(env)
    end
  end
end 
```

现在当我运行我的机架应用程序时：

```
rackup -s thin config.ru 
```

并尝试得到结果：

```
curl http://localhost:9292/ 
```

我不断收到以下错误：

```
Rack::Lint::LintError: Status must be >=100 seen as integer
/Users/Apple/.rvm/gems/ruby-1.9.2-p180/gems/rack-1.4.1/lib/rack/lint.rb:19:in `assert'
/Users/Apple/.rvm/gems/ruby-1.9.2-p180/gems/rack-1.4.1/lib/rack/lint.rb:425:in `check_status' 
```

当然，如果我以生产模式运行它，我将不会收到此错误。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:26:59.640

尝试使用整数作为状态：

```
[200,{"Content-Type" => "text/plain"}, ["Hello World"]] 
```

代替：

```
["200",{"Content-Type" => "text/plain"}, ["Hello World"]] 
```

# java - 如何关闭 Icefaces 日志记录？

> ID：12286052
> 
> 赞同：2
> 
> 时间：2012-09-05T16:41:17.930
> 
> 标签：java, jsf, log4j, icefaces, slf4j

我需要关闭 Icefaces 日志记录。我添加了如下的记录器引用，但我无法关闭 Icefaces 记录。

```
 <!-- I added this to filter off icefaces logging -->
    <logger name="org.icepush">
        <level value="OFF"/>
         <appender-ref ref="stdout"/>
    </logger>    
    <!-- I added this to filter off icefaces logging -->    
    <logger name="org.icefaces">
        <level value="OFF"/>
         <appender-ref ref="stdout"/>
    </logger>       
    <!-- I added this to filter off icefaces logging -->    
    <logger name="com.icesoft.faces.application.D2DViewHandler">
        <level value="OFF"/>
       <appender-ref ref="stdout"/>
    </logger> 
```

我使用 Tomcat 进行本地开发，使用 Weblogic 进行生产。

**我的`log4j.xml`：**

```
 <?xml version="1.0"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

    <!-- BEGIN APPENDER: RollingFileAppender (HBAppender) -->
    <appender class="org.apache.log4j.RollingFileAppender" name="HBAppender">
        <param value="${bla.root}/WEB-INF/frameworks.log" name="File"/>
        <param value="2" name="MaxBackupIndex"/>
        <param value="512KB" name="MaxFileSize"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param value="%d %p [%c] - %m%n" name="ConversionPattern"/>
        </layout>
    </appender>    
   <!-- BEGIN APPENDER: RollingFileAppender (JSFAppender) -->
    <appender class="org.apache.log4j.RollingFileAppender" name="JSFAppender">
        <param value="${bla.root}/WEB-INF/frameworks.log" name="File"/>
        <param value="2" name="MaxBackupIndex"/>
        <param value="512KB" name="MaxFileSize"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param value="%d %p [%c] - %m%n" name="ConversionPattern"/>
        </layout>
    </appender>    
    <!-- BEGIN APPENDER: RollingFileAppender (rotator) -->
    <appender class="org.apache.log4j.RollingFileAppender" name="rotator">
        <param value="true" name="Append"/>
        <param value="C:apache-tomcat-6.0.32LVSProjlogslvs.log" name="File"/>
        <param value="5" name="MaxBackupIndex"/>
        <param value="2048KB" name="MaxFileSize"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param value="[%d{MMM dd HH:mm:ss}] %-5p (%F:%L) - %m%n" name="ConversionPattern"/>
        </layout>
    </appender>    
   <!-- BEGIN APPENDER: RollingFileAppender (SFAppender) -->
    <appender class="org.apache.log4j.RollingFileAppender" name="SFAppender">
        <param value="${bla.root}/WEB-INF/frameworks.log" name="File"/>
        <param value="2" name="MaxBackupIndex"/>
        <param value="512KB" name="MaxFileSize"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param value="%d %p [%c] - %m%n" name="ConversionPattern"/>
        </layout>
    </appender>    
    <!-- BEGIN APPENDER: ConsoleAppender (stdout) -->
    <appender class="org.apache.log4j.ConsoleAppender" name="stdout">
        <layout class="org.apache.log4j.PatternLayout">
            <param value="[%d{MMM dd HH:mm:ss}] %-5p (%F:%L) - %m%n" name="ConversionPattern"/>
        </layout>
    </appender>    
    <!-- BEGIN APPENDER: DailyRollingFileAppender (APPLICATION) -->
    <appender class="org.apache.log4j.DailyRollingFileAppender" name="APPLICATION" >
        <param name="File" value="pem.log"/>
        <param name="DatePattern" value="'.'yyyy-MM-dd"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d %-5p %-17c{2} (%30F:%L) %3x - %m%n"/>
        </layout>
    </appender>    
    <!-- BEGIN APPENDER: DailyRollingFileAppender (AUDIT) -->
    <appender class="org.apache.log4j.DailyRollingFileAppender" name="AUDIT" >
      <param name="File" value="pem_audit.log"/> 
      <param name="DatePattern" value="'.'yyyy-MM-dd"/>
      <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d %-5p [%t] %c - %m%n"/>
      </layout>      
    <filter class="org.apache.log4j.varia.DenyAllFilter"/>
   </appender>    
    <!-- logger references -->
    <logger name="org.apache">
        <appender-ref ref="JSFAppender"/>
    </logger>    
    <logger name="org.hibernate">
        <level value="info" />
        <appender-ref ref="HBAppender"/>
    </logger>    
    <logger name="org.springframework">
        <appender-ref ref="SFAppender"/>
    </logger>      
    <!-- I added this to filter off icefaces logging -->
    <logger name="org.icepush">
        <level value="OFF"/>
         <appender-ref ref="stdout"/>
    </logger>    
    <!-- I added this to filter off icefaces logging -->    
    <logger name="org.icefaces">
        <level value="OFF"/>
         <appender-ref ref="stdout"/>
    </logger>       
    <!-- I added this to filter off icefaces logging -->    
    <logger name="com.icesoft.faces.application.D2DViewHandler">
        <level value="OFF"/>
       <appender-ref ref="stdout"/>
    </logger>       
    <!-- root -->
    <root>
        <level value="info"/>
        <appender-ref ref="APPLICATION"/>
        <appender-ref ref="AUDIT"/>
        <appender-ref ref="stdout"/>
    </root>    
</log4j:configuration> 
```

这是 Tomcat 服务器启动时的控制台日志。我想过滤掉与 Icefaces 相关的日志。

```
Sep 5, 2012 11:57:43 AM org.apache.catalina.core.AprLifecycleListener init    
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\IBM\SDP1\jdk\jre\bin;.;c:\oraclexe\app\oracle\product\11.2.0\server\bin;;C:\Development\axis2-1.5.4/bin;C:\Program Files\Java\jdk1.6.0_23/bin;C:\Development\apache-ant-1.7.0\bin;c:\cygwin\bin;c:\adams\filenet\IDM;c:\adams\filenet\Shared;C:\Shared;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;c:\pb5;c:\sql\binn;c:\sql\dll;C:\MSSQL\BINN\;C:\Program Files\Executive Software\Diskeeper;C:\Program Files\Common Files\Roxio Shared\DLLShared\;C:\Program Files\QuickTime\QTSystem\;C:\Program Files\Windows Imaging\;C:\Program Files\Rational\common;C:\Program Files\Rational\ClearCase\bin;Y:\wpo4;S:\public;C:\WINDOWS\system32\WindowsPowerShell\v1.0;C:\Program Files\MySQL\MySQL Server 5.5\bin;c:\Program Files\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files\VanDyke Software\Clients\
Sep 5, 2012 11:57:43 AM org.apache.tomcat.util.digester.SetPropertiesRule begin    
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:MyProj' did not find a matching property.    
Sep 5, 2012 11:57:43 AM org.apache.coyote.AbstractProtocol init    
INFO: Initializing ProtocolHandler ["http-bio-8081"]    
Sep 5, 2012 11:57:43 AM org.apache.coyote.AbstractProtocol init    
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]    
Sep 5, 2012 11:57:43 AM org.apache.catalina.startup.Catalina load    
INFO: Initialization processed in 1499 ms    
Sep 5, 2012 11:57:43 AM org.apache.catalina.core.StandardService startInternal    
INFO: Starting service Catalina    
Sep 5, 2012 11:57:43 AM org.apache.catalina.core.StandardEngine startInternal    
INFO: Starting Servlet Engine: Apache Tomcat/7.0.29    
Sep 5, 2012 11:57:44 AM org.apache.catalina.loader.WebappClassLoader validateJarFile    
INFO: validateJarFile(C:\Program Files\Apache Software Foundation\apache-tomcat-7.0.29\webapps\MyProj\WEB-INF\lib\servlet-api.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Sep 5, 2012 11:57:50 AM org.apache.catalina.core.ApplicationContext log    
INFO: Initializing Spring root WebApplicationContext    
log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).    
log4j:WARN Please initialize the log4j system properly.    
SLF4J: Class path contains multiple SLF4J bindings.    
SLF4J: Found binding in [jar:file:/C:/Program%20Files/Apache%20Software%20Foundation/apache-tomcat-7.0.29/webapps/MyProj/WEB-INF/lib/slf4j-jcl-1.6.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]    
SLF4J: Found binding in [jar:file:/C:/Program%20Files/Apache%20Software%20Foundation/apache-tomcat-7.0.29/webapps/MyProj/WEB-INF/lib/slf4j-log4j12-1.6.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]    
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.    
[Sep 05 11:57:57] INFO  (JCLLoggerAdapter.java:284) - Trying to find Dozer configuration file: dozer.properties    
[Sep 05 11:57:57] WARN  (JCLLoggerAdapter.java:379) - Dozer configuration file not found: dozer.properties.  Using defaults for all Dozer global properties.    
[Sep 05 11:57:57] INFO  (JCLLoggerAdapter.java:307) - Initializing Dozer. Version: 5.3.2, Thread Name: localhost-startStop-1    
[Sep 05 11:57:57] INFO  (JCLLoggerAdapter.java:263) - Dozer JMX MBean [org.dozer.jmx:type=DozerStatisticsController] auto registered with the Platform MBean Server    
[Sep 05 11:57:57] INFO  (JCLLoggerAdapter.java:263) - Dozer JMX MBean [org.dozer.jmx:type=DozerAdminController] auto registered with the Platform MBean Server    
[Sep 05 11:57:57] INFO  (JCLLoggerAdapter.java:263) - Initializing a new instance of dozer bean mapper.    
Sep 5, 2012 11:57:57 AM com.sun.faces.config.ConfigureListener contextInitialized    
INFO: Initializing Mojarra 2.1.1 (FCS 20110408) for context '/MyProj'    
Sep 5, 2012 11:57:58 AM com.sun.faces.spi.InjectionProviderFactory createInstance    
INFO: JSF1048: PostConstruct/PreDestroy annotations present.  ManagedBeans methods marked with these annotations will have said annotations processed.    
Sep 5, 2012 11:57:58 AM org.icepush.servlet.MainServlet <init>    
INFO: 
ICEsoft Technologies Inc.    
ICEpush 2.0.0    
Build number: 1    
Revision: 23556    

Sep 5, 2012 11:58:16 AM org.icefaces.util.EnvConfig init        
INFO: ICEfaces Configuration:         
org.icefaces.render.auto: true [default]        
org.icefaces.autoid: true [default]    
org.icefaces.aria.enabled: true [default]    
org.icefaces.blockUIOnSubmit: false [default]    
org.icefaces.compressDOM: false [default]    
org.icefaces.compressResources: true [default]    
org.icefaces.connectionLostRedirectURI: null [default]    
org.icefaces.deltaSubmit: false [default]    
org.icefaces.lazyPush: true [default]    
org.icefaces.sessionExpiredRedirectURI: null [default]    
org.icefaces.standardFormSerialization: false [default]    
org.icefaces.strictSessionTimeout: false [default]    
org.icefaces.windowScopeExpiration = 1000 [default]    
org.icefaces.mandatoryResourceConfiguration: null [default]    
org.icefaces.uniqueResourceURLs: true [default]    

Sep 5, 2012 11:58:16 AM org.icefaces.impl.renderkit.DOMRenderKit <clinit>    
INFO:     
ICEsoft Technologies Inc.    
ICEfaces 2.0.0    
Build number: 4    
Revision: 23692 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:00:42.923

添加`commons-logging.properties`到`src`包含内容的文件夹

```
org.apache.commons.logging.Log=org.apache.commons.logging.impl.Log4JLogger 
```

每当它使用公共日志记录时，它将使用 log4j。应该相应地配置 log4j 日志记录。确保将 log4j.jar 添加到类路径中。

不过，`icefaces`最终还是使用了`java.util.logging`logger。你必须使用它的日志配置。为此，您需要向`-Djava.util.logging.config.file=\path\to\logging.properties`服务器启动配置添加选项。

简单文件`logging.properties`位于*JDK\JRE\lib*文件夹中。您可以使用它并添加

```
org.icepush.level = OFF
org.icefaces.level = OFF
javax.faces.level = OFF
com.sun.faces.level = OFF 
```

到文件末尾。

如果您使用 Eclipse，则使用*Preferences -> Servers -> JDK -> Optional Java VM arguments：*将此选项添加到服务器 JDK。或者，您可以创建服务器启动配置*Preferences -> Servers -> Launch -> Create Launch Configuration*并在此处定义此选项。您可以为同一服务器创建多个启动配置。最近，您可以通过指定服务器启动配置将此配置与应用程序运行配置进行映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:52:11.983

我找到了几种方法来抑制 Icefaces 日志。我在下面列出了所有这些优点和缺点。我选择了选项 2。

1）在jdk中编辑logging.properties

优点：快速简单的更改，不需要进行任何其他更改并且不影响现有的日志记录配置，所有需要抑制的类都可以放在一个位置。缺点：全球变化，所有使用这个 jdk 的应用都会受到这个变化的影响。

2) 在服务器启动时将单独的 log4j.xml 加载到类路径并从那里抑制 Icefaces 日志。

优点：WLS 可以保留在 JDK 日志记录中。缺点：全局变化，涉及一些配置。

3) 在 WLS 上启用 log4j 并在服务器启动时将 log4j.xml 加载到类路径。

优点：所有日志记录（WLS 和单个应用程序）都将在 log4j 上。我们可以将服务器级别的 log4j.xml 用于我们想要的所有应用程序，例如禁用 Icefaces 日志记录，我们可以在应用程序中拥有另一个 log4j 文件来告诉这个应用程序如何使用 log4j 记录。缺点：涉及配置 WLS 以使用 log4j，需要维护一个单独的全局 log4j 文件。

# c# - 带有 DataTemplate 的 Silverlight ChildWindow

> ID：12286053
> 
> 赞同：0
> 
> 时间：2012-09-05T16:41:20.270
> 
> 标签：c#, silverlight, xaml

我正在创建一个要与 DataTemplate 一起使用的自定义 ChildWindow。

DataTemplate 将应用于窗口的“主体”，但除此之外，我想始终显示两个按钮，“保存”和“取消”。

我不知道如何做到这一点......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:38:46.527

从 SdkStyles.xaml 中获取 ChildWindowStyle 的副本，为构建自定义控件模板奠定基础。要保留 DataContext，您可以将其作为 UserControl.Resources 放入 UserControl 中，或者如果您只是填充 ContentPresenters 等，您可以将模板放入您自己的资源字典或您喜欢的任何位置（尽管您可能想要指定一个唯一的 x:Key它的名字。）只是取决于你想如何使用它。

对模板进行所需的更改并添加按钮等。然后您可以通过替换资源字典中的 Default BasedOn 值来将其设置为默认值以指向它或显式调用该样式。

就我个人而言，我更喜欢 Expression Blend，甚至还有一些教程可以帮助您进行网络搜索（我下次可能会首先建议。）就像您在[这里](http://www.codeproject.com/Articles/144194/Customizing-Silverlight-ChildWindow-Style-using-Bl)可能找到的一样......希望这会有所帮助！:)

# php - PHP 从字符串中去除元音

> ID：12286055
> 
> 赞同：-1
> 
> 时间：2012-09-05T16:41:24.607
> 
> 标签：php

对于目录命名算法，需要从字符串中去除元音（和空格）以缩短目录名称。

找到了这个线程[Removing vowels from a String (Scheme)](https://stackoverflow.com/questions/5160773/removing-vowels-from-a-string-scheme)但无法弄清楚如何将它变成一个可用的函数。忘记那个线程 - 它不是 PHP。对不起大家。

那么，对 PHP 解决方案有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T16:43:11.797

我想知道你真的需要一个函数，当它可以用一个正则表达式完成时。例如：

```
$some_dirname = 'This is a wonderful dirname';
$pure_dirname = preg_replace('#[aeiou\s]+#i', '', $some_dirname);
print $pure_dirname; // Thsswndrfldrnm 
```

诀窍是对您的字符串运行正则表达式替换，删除所谓的所有字符`character range`（使用 [] 语法定义）。

我也使用了 '/i' 修饰符来删除大写元音。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-05T16:45:43.703

这应该有效：

```
$oldStr = "Some string";
$newStr = str_ireplace(array('a','e','i','o','u',' '), '', $oldStr); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-05T16:44:36.700

使用字符串替换怎么样？

```
$yourString = "FileNameOf Hello";
$vowels = array("a", "e", "i", "o", "u", "A", "E", "I", "O", "U", " ");
$yourString = str_replace($vowels, "", $yourString);
echo $yourString; //FlNmfHll 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T05:54:00.200

php 中的字符串翻译有助于删除字符串：

strtr — Translate characters or replace substrings

`$string = "voweltest";`
`$trans = array("a" => "","e"=>"","i"=>"","o"=>"","u"=>"");`
`echo strtr($string, $trans);`

`Output : vwltst`

# javascript - 如何保护页面免受高科技 CRSF

> ID：12286060
> 
> 赞同：1
> 
> 时间：2012-09-05T16:41:42.720
> 
> 标签：javascript, ajax, security, web-applications, http-headers

技术范围：PHP、MySQL、Apache、javascript、ajax。

**CRSF**

用户登录到他的安全页面。

页面使用随机令牌和随机名称。（用于输入）

```
 <input name="random_name" value="random_token" /> 
```

Random_name 和 Random_token 存储在用户 SESSION 中。

脚本检查标头（HTTP 1.1 - 引荐来源网址）。

在我看来，这些方法无法保护我与 Ajax（页面输出）分析。

* * *

**Ajax（页面输出）分析：**

用户访问了错误的页面。

加载页面后，Ajax 与他的页面建立连接（使用准备好的 HTTP 引用标头）。并下载数据。

解析输出（输入）。

并在成功解析后。

使用 Random_name、Random_token 和准备好的引荐标头创建自己的请求。

* * *

安全系统接受了这个动作。（推荐人 - 好的，令牌 - 好的）

我该如何避免呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:15:26.007

在设计 XMLHttpRequest 时，已经考虑到了这个场景。结果是 XMLHttpRequest 级别 1（历史）根本不允许任何跨域请求。并且使用 XMLHttpRequest 级别 2（当前），如果服务器根据[Cross-Origin Request Sharing](http://www.w3.org/TR/cors/)允许，则仅允许客户端读取对跨域请求的响应。

因此，除非请求来自同一来源或您允许任何来源，否则不允许客户端读取响应。

# java - Java Double 与 BigDecimal

> ID：12286064
> 
> 赞同：2
> 
> 时间：2012-09-05T16:41:59.913
> 
> 标签：java

我正在查看一些使用双变量来存储 (360-359.9998779296875) 结果的代码，即 0.0001220703125。double 变量将其存储为 -1.220703125E-4。当我使用 BigDecimal 时，它存储为 0.0001220703125。为什么双重存储为-1.220703125E-4？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T16:53:14.783

我不会在这里提到精度问题，而只会提到打印数字的方式。

正如[javadoc 中所解释的`Double#toString`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#toString%28double%29)：

> 如果 m 小于 10^-3 或大于或等于 10^7，则它以所谓的“计算机科学记数法”表示。

而[javadoc 的`BigDecimal#toString`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#toString%28%29)：

> 如果小数位数大于等于零且调整后的指数大于等于-6，则不使用指数表示法将数字转换为字符形式

你可以试试这个小程序来检查各种输出格式，特别是表示从标准计数法切换到科学计数法的阈值在这两个类中是不一样的。

输出：

```
0.5                         0.5
3.0517578125E-5             0.000030517578125
9.5367431640625E-7          9.5367431640625E-7 
```

代码：

```
public static void main(String args[]) {
    //trying to use numbers with an exact double representation
    double d1 = 0.5;
    double d2 = 0.000030517578125;
    double d3 = 0.00000095367431640625;

    BigDecimal bd1 = new BigDecimal(d1);
    BigDecimal bd2 = new BigDecimal(d2);
    BigDecimal bd3 = new BigDecimal(d3);

    System.out.println(d1 + "\t\t\t" + bd1);
    System.out.println(d2 + "\t\t" + bd2);
    System.out.println(d3 + "\t" + bd3);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T16:44:04.500

两者都是一样的。无论您使用什么工具/IDE，都会以不同的格式显示它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T16:44:29.193

[http://epramono.blogspot.com/2005/01/double-vs-bigdecimal.html](http://epramono.blogspot.com/2005/01/double-vs-bigdecimal.html)

存储这些数据的底层数据结构是不同的（据我的回忆，浮点可以有更广泛的值，但 BigDecimal 具有更高的准确性），但您实际看到的只是输出相同数字的不同方式。我会假设它以这种方式存在，因为浮点范围更大；在没有科学记数法的情况下输出大得离谱的数字是令人讨厌的，所以我相信科学记数法是默认设置。

# curl - 卷发授权

> ID：12286065
> 
> 赞同：3
> 
> 时间：2012-09-05T16:42:03.173
> 
> 标签：curl, https

我有带有 https 设置的弹簧安全性。

尝试以安全方式在 URL 上运行 curl GET 时，我看到了意外行为。

当 curl 第一次向服务器发送请求时，它没有授权数据（为什么？我专门添加了它）。然后，服务器回复 Authentication Error (401)。然后客户端重新传输请求，这次使用授权数据，服务器正确回复所需的数据。

知道为什么会这样吗？

卷曲命令：

> curl -v --insecure --anyauth --user 用户名：密码 -H "Accept: application/json" -H "Content-Type: application/json" -X GET localhost:8443/myresource

**请求 1：**

```
> GET /myresource HTTP/1.1
> User-Agent: curl/7.21.3 (x86_64-redhat-linux-gnu) libcurl/7.21.3 NSS/3.13.1.0 zlib/1.2.5 libidn/1.19 libssh2/1.2.7
> Host: localhost:8443
> Accept: application/json
> Content-Type: application/json 
```

**回应1：**

```
< HTTP/1.1 401 Unauthorized
< Server: Apache-Coyote/1.1
< Set-Cookie: JSESSIONID=B56A7F49E715795B5D1158DB192710AA; Path=/myresource ; Secure; HttpOnly
< WWW-Authenticate: Digest realm="Protected", qop="auth", nonce="MTM0Njg2MjYwMjY0ODozNDk5ZDkxNTYxNjMxMDJmNDA4MWQ1NTBmZjk5OGQ5Nw=="
< Content-Type: text/html;charset=utf-8
< Content-Length: 1119
< Date: Wed, 05 Sep 2012 16:29:52 GMT 
```

**要求 2：**

```
> GET /myresource HTTP/1.1
> Authorization: Digest username="username", realm="Protected", nonce="MTM0Njg2MjYwMjY0ODozNDk5ZDkxNTYxNjMxMDJmNDA4MWQ1NTBmZjk5OGQ5Nw==", uri="/myresource", cnonce="ODczNjg0", nc=00000001, qop="auth", response="58faded9ae5f639ba0056fb86edca71f"
> User-Agent: curl/7.21.3 (x86_64-redhat-linux-gnu) libcurl/7.21.3 NSS/3.13.1.0 zlib/1.2.5 libidn/1.19 libssh2/1.2.7
> Host: localhost:8443
> Accept: application/json
> Content-Type: application/json 
```

**回应 2：**

```
< HTTP/1.1 200 OK
< Server: Apache-Coyote/1.1
< Set-Cookie: JSESSIONID=37F375C5663C4A049D95D49C7C1CF0FD; Path=/myresource ; Secure; HttpOnly
< Content-Type: application/json
< Transfer-Encoding: chunked
< Date: Wed, 05 Sep 2012 16:29:52 GMT 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T15:09:58.947

从[男人卷曲](http://curl.haxx.se/docs/manpage.html)：

> --anyauth
> 
> (HTTP) 告诉 curl 自己找出身份验证方法，并使用远程站点声称支持的最安全的方法。这是通过首先发出请求并检查响应标头来完成的，因此可能会导致额外的网络往返。这用于代替设置特定的身份验证方法，您可以使用--basic、--digest、--ntlm 和--negotiate 来执行此操作。
> 
> 请注意，如果您从标准输入进行上传，则不建议使用 --anyauth，因为它可能需要发送两次数据，然后客户端必须能够回退。如果从标准输入上传时需要，上传操作将失败。

您应该使用 --digest 而不是 --anyauth。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-18T03:17:29.173

如果没有来自服务器的第一个 401 响应，就无法进行摘要式身份验证。

即：服务器回复第一个请求：

```
WWW-Authenticate: Digest realm="Protected", qop="auth", nonce="MTM0Njg2MjYwMjY0ODozNDk5ZDkxNTYxNjMxMDJmNDA4MWQ1NTBmZjk5OGQ5Nw==" 
```

客户端在组装有效的摘要身份验证请求之前需要此信息。Digest 需要使用 nonce 和 op 方法以提供有效的

```
response="58faded9ae5f639ba0056fb86edca71f" 
```

如第二个请求所示。

所以简而言之，如果没有首先获得 401，您就无法执行摘要请求，因为没有它，您没有足够的信息来组装响应。

# asp.net-mvc - MVC3 - 如何处理异常而不重定向到另一个页面并在 jQueryUI 对话框中显示错误？

> ID：12286069
> 
> 赞同：1
> 
> 时间：2012-09-05T16:42:13.067
> 
> 标签：asp.net-mvc, jquery-ui, exception

我的实际示例场景是：

我有一个控制器，其动作名为 Create(TClass obj)。

当发生错误时，我希望触发一个专门的异常（MyException），但我不想重定向到另一个页面（通用页面错误处理程序或其他）。我想留在同一页面并在 jQueryUI 对话框弹出窗口中显示消息错误。

我试过这些选项：

*   覆盖方法 OnException（在控制器中）
*   经过测试的 PostSharp（专门针对 OnExceptAspect）
*   测试了此[链接](https://stackoverflow.com/questions/6324368/asp-net-mvc-override-onexception-in-base-controller-keeps-propogating-to-applica)中的解决方案和其他类似的解决方案。

你有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:44:32.183

在所有控制器方法中的整个应用程序中，调用：

```
catch(Exception e)
{
    errorModel errorModelInstance = new errorModel();
    errorModel.message = e.Message;
    errorModel.stack = e.StackTrace;  //You get the idea...
    return PartialView("someErrorView", errorModelinstance);
} 
```

然后，有一个 someErrorView.cshtml 文件，其中包含用于模态弹出窗口的 jQueryUI 脚本引用（除非您的主布局已经在整个应用程序中引用它），并在该部分视图中具有用于模态弹出窗口的初始化程序。（让我知道您是否需要用于初始化弹出窗口的前端代码）。

此局部视图将返回模型“errorModel”。您必须在模型文件夹下定义一个类来声明 errorModel 的字符串属性。

# javascript - WebKit 的 Inspector 中的 { [native code] } 是什么意思？

> ID：12286072
> 
> 赞同：4
> 
> 时间：2012-09-05T16:42:24.717
> 
> 标签：javascript, function, binary, interpreter

例如，打开一个 JS 控制台，然后输入`toString<Enter>`.

你会得到这个：

```
function toString() { [native code] } 
```

将此与以下内容进行对比：

```
function foo() { return 'bar'; }
foo 
```

产生：

```
function foo() { return 'bar'; } 
```

这是否意味着它是解释器的 API，它直接执行 C 中的一些内部例程，或者在调用该方法时用于对其进行编程的任何东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T16:44:47.977

`[native code]`只是一个标签，表示函数体的实现细节由浏览器“本地”处理。

# java - 在 jTextField 运行时清除键入的字符

> ID：12286073
> 
> 赞同：0
> 
> 时间：2012-09-05T16:42:27.200
> 
> 标签：java, swing, awt, jtextfield, keyevent

```
private void jTextField1KeyPressed(java.awt.event.KeyEvent evt) {
int x=evt.getKeyCode();
if(x>=96&&x<=105)
  {
      evt.setKeyCode(8);//Here 8 is used for Backspace key to remove the numeric character entered
  } 
```

Int 此代码我希望用户不要在 jTextField 中键入任何数值，但如果他这样做了，那么我试图仅在运行时将其删除.. 我写了这段代码，但它没有像我预期的那样工作.. . **请帮帮我！！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:55:16.423

你真的应该避免`KeyListeners`，它们对于你最终想要实现的目标来说太有限了，当你在字段试图更改文档时尝试更改字段文档时，你只会得到一个突变异常。

你真的应该使用[DocumentFilter](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)，这就是它的设计目的。

```
((AbstractDocument)field.getDocument()).setDocumentFilter(new DocumentFilter() {

    @Override
    public void insertString(FilterBypass fb, int offset, String text, AttributeSet attr) throws BadLocationException {

        StringBuilder sb = new StringBuilder(64);
        for (char c : text.toCharArray()) {

            if (Character.isDigit(c)) {

                sb.append(c);

            }

        }

        fb.insertString(offset, text, attr);

    }

    @Override
    public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs) throws BadLocationException {

        StringBuilder sb = new StringBuilder(64);
        for (char c : text.toCharArray()) {

            if (Character.isDigit(c)) {

                sb.append(c);

            }

        }

        fb.replace(offset, length, sb.toString(), attrs);

    }

}); 
```

这是一个非常基本的例子，SO上有很多。

除了避免突变异常之外，过滤器在更新到达文档/字段之前拦截更新，因此屏幕上不会看到传入的更改，您还可以捕获任何粘贴事件或`setText`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:01:41.583

虽然可能不是最好的方法，但这是一种非常简单的方法。

您可以覆盖这样的`paintComponent()`方法`JTextField`：

```
JTextField textField = new JTextField(text) {

@Override
protected void paintComponent(Graphics grphcs) {
    super.paintComponent(grphcs);
    String newStr = "";
    for (char c : getText().toCharArray()) {
        if (!Character.isDigit(c)) {
            newStr += c;
        }
    }
    setText(newStr);

    }
}; 
```

# android - 解析从服务器发送的数据，TextViews 没有显示？

> ID：12286074
> 
> 赞同：0
> 
> 时间：2012-09-05T16:42:27.447
> 
> 标签：android, json, parsing

我认为 TextViews 没有向我显示它从 mySQL 数据库中检索到的任何数据，这很奇怪。这是我的代码：

这是关键的解析位，我有两列需要解析并放入单独的 TextView，我认为我已经完成了：

```
//PARSING JSON DATA
        try {
            jArray = new JSONArray(result);

            for (int i = 0; i < jArray.length(); i++) {

                JSONObject json_data = jArray.getJSONObject(i);

                Log.i("log_name", "Driver_full_name:" + json_data.getString("Driver_full_name"));
                Log.i("log_for", "Drives for:" + json_data.getString("Drives_for"));

                returnString += "\n\t" + jArray.getJSONObject(i);
                somethingelse += "\n\t" + jArray.getJSONObject(i);

            }

        } catch (JSONException e1) {
            Log.d("DB", "Error somewhere");
            CurrentSeasonDrivers_DriverName.this.runOnUiThread(new Runnable() {
                public void run() {
                    Toast.makeText(CurrentSeasonDrivers_DriversName, "Could not parse data so shut up",
                            Toast.LENGTH_LONG).show();
                }
            });
        }

        return returnString += somethingelse;
    }

    protected void onPostExecute(String returnString, String somethingelse) {

            TextView drivername = (TextView) findViewById(R.id.DriverName);
            drivername.setText(drivername.getText() + "\n" + returnString);

            TextView drivesfor = (TextView) findViewById(R.id.DrivesFor);
            drivesfor.setText(drivesfor.getText() + "\n" + somethingelse);

    }
}
} 
```

希望有人可以提供帮助。考虑到没有错误。解析位中的日志显示数据已完全解析，但是 onPostExecute 中的日志再次显示它未解析，或者至少在每行周围都有大括号和语音标记。

谢谢你的帮助。真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:46:49.833

看起来您正在使用`getString`日志方法解析 JSON，但将整个 JSON 填充到用于设置文本的字符串中。除非在这些步骤之间有一些不在这里的东西，否则我认为您需要做的是`getString`在附加到 returnString 和 somethingElse 时使用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:52:05.693

你的`onPostExecute`方法甚至被调用了吗？签名错误，不能带两个参数。

您应该改为传递一个 String 数组（当然，更改您的`AsyncTask`类声明以在 中使用 String 数组`onPostExecute`）：

```
 ...
    return new String[] {returnString, somethingelse};
}

protected void onPostExecute(String[] strings) {
    String returnString = strings[0];
    String somethingelse = strings[1];
} 
```

# android - Tabs 上方的自定义 SherlockActionBar 布局

> ID：12286075
> 
> 赞同：1
> 
> 时间：2012-09-05T16:42:32.203
> 
> 标签：android, android-actionbar

我是 SherlockActionBar 开发的新手，我想要的是带有标签的“Foursquare-like”顶部操作栏，请参阅：

![](../Images/ca73a07e2f729450abd136b14cf7291d.png)

正如 Richard Lewin 在[Android ActionBarSherlock Top Bar](https://stackoverflow.com/questions/11412841/android-actionbarsherlock-top-bar)中所描述的那样，我可以轻松添加菜单操作，例如“搜索”或“签到”，它们将出现在顶部栏的右侧，但是如果我需要添加自定义“向上”按钮，我应该怎么做（而不是徽标）和自定义（例如粗体）标题？我可以只使用 SherlockActionBar XML-styles 还是我需要实现新组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:58:08.613

在您的活动中，启用向上按钮（通常在 onCreate() 中）：

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

然后实现它的行为：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:

        // do something

        return true;
    }
    return false;
} 
```

[对于操作栏主题： http](http://actionbarsherlock.com/theming.html) ://actionbarsherlock.com/theming.html

对于标签，我认为您可以像在 android 4 实现中那样：http: [//developer.android.com/guide/topics/ui/actionbar.html#Tabs](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)

玩得很开心 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:14:46.577

Alexander，您需要为您的操作栏创建自定义布局，请参见此处的示例 [Show dropdown programatically in ActionBar / ActionBarSherlock](https://stackoverflow.com/questions/11737500/show-dropdown-programatically-in-actionbar-actionbarsherlock/11794124#11794124)

在此示例中，描述了带有微调器和两个操作的操作栏。

# .net - 在 .net 中获取项目的项目依赖项

> ID：12286076
> 
> 赞同：1
> 
> 时间：2012-09-05T16:42:33.457
> 
> 标签：.net, xml, msbuild, envdte

我想检查项目的依赖项（右键单击项目并单击“项目依赖项”）是否已以编程方式正确添加。我怎样才能做到这一点？

恰恰，

Qn- 第 1 部分）如何访问解决方案中项目的“依赖项”（而不是引用）？

Qn-第 2 部分）我应该如何（而不是在哪里，如 csproj/sln...）检查是否已根据需要添加了项目的所有依赖项？

我尝试翻阅 csproj 和 sln 文件。我看不到一个属性/项目组，在解析时会给我一个添加的依赖项列表。

我应该为此目的使用 EnvDTE。我已经在使用 Microsoft.Build.Evaluation 类来完成我正在执行的大部分其他构建操作。我不知道这是否会使过程更加复杂。

请指教。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:51:25.700

Visual Studio 项目文件实际上只是 XML，因此理论上您可以将文件加载为`XmlDocument`并选择所有`Reference`找到的节点。这是我的引用如何存储在示例 VB.net 项目文件中的示例。我想它在 .csproj 文件中并没有太大的不同：

```
 <ItemGroup>
    <Reference Include="System.Data.Linq" />
    <Reference Include="System.Deployment" />
    <Reference Include="System.Drawing" />
    <Reference Include="System.Printing">
  </ItemGroup> 
```

一旦你能够做到这一点，从`Include`属性中的值构建一个引用名称的集合然后验证它是否包含你期望的引用将是非常简单的。

项目具有的任何显式引用也是隐式*项目依赖*。**它们在“解决方案属性**”窗口中显示，但不可编辑。

**编辑**

如果您正在寻找解决方案的*项目依赖*项，除了您拥有的任何显式引用之外，还手动选择了这些依赖项，您可以在 .sln 文件中找到这些依赖项。

当您在**解决方案属性**窗口中手动选择项目依赖项时，会在**Project的部分内创建一个****ProjectSection(ProjectDependencies)**部分。

 **例如，以下是 .sln 文件中的正常项目条目：

```
Project("{F184B08F-C81C-45F6-A57F-5ABD9991F28F}") = "MyProject",
"Source\MyProject\MyProject.vbproj",
"{AB5BA87B-77D5-4812-B02C-9B4FB87F4EF6}" EndProject 
```

如果您稍后手动添加项目依赖项，该项目将如下所示：

```
Project("{F184B08F-C81C-45F6-A57F-5ABD9991F28F}") = "MyProject", "MyProject\MyProject.vbproj", "{AC1BE764-AC53-47B0-9608-648C28D3BB79}"
    ProjectSection(ProjectDependencies) = postProject
        {10F4313B-A586-4CC6-BAFE-51930EC8C68F} = {10F4313B-A586-4CC6-BAFE-51930EC8C68F}
    EndProjectSection
EndProject 
```

注意添加的`ProjectSection(ProjectDependencies)`

不幸的是，与项目文件不同的是，解决方案文件不是 XML。这将使将文件直接解析为文本更加困难。此外，解决方案文件中的项目与 GUID 相关联，以后引用它们的任何部分都使用该 GUID，而不是项目名称。这也使事情变得更加复杂，因为您必须对解决方案文件进行一些预处理以创建 GUID 到项目名称的映射。此时，您将能够从解决方案文件中列出任何明确的项目依赖关系，并比较添加的依赖项是否是您希望添加的依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:43:15.583

[这](https://stackoverflow.com/a/12353923/1035156)就是我想要的。我已经解析了 sln 文件并提取了项目的 GUID。**

# regex - Symfony2.0 使用正则表达式验证

> ID：12286078
> 
> 赞同：2
> 
> 时间：2012-09-05T16:42:35.230
> 
> 标签：regex, symfony, annotations, validation

我正在处理带有文本字段的**Symfony2.0表单。**我使用**注释**来验证该字段。该字段具有以下验证：

```
 * @Assert\MinLength(limit=2, message="At least two characters")
 * @Assert\NotBlank()
 * @Assert\Regex(
 *           pattern= "/\d/",
 *           match=   false,
 *           message= "This text cannot contain numbers" 
 * ) 
```

请注意，*Regex*断言来自[这里](http://symfony.com/doc/current/reference/constraints/Regex.html#basic-usage)。

所以，我希望除了数字之外的所有字符都可以使用！但是，当我输入一些特殊字符（如“ **ò** ”）时，表单未经过验证，并返回错误消息“*此文本不能包含数字*”。

[我在http://www.regextester.com/](http://www.regextester.com/)检查了 Regex 字符串，似乎工作正常！

知道为什么 Symfony2.0 中的验证效果不好吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:49:27.670

我将**Symfony2.0**官方文档中提出的*Regex*修改如下：

 **```
 @Assert\Regex(pattern= "/[0-9]/") 
```

现在表格效果很好。

最后的想法！**我真的不明白为什么使用 Regex \d**这些字符是数字。许多非英语单词使用该字符。**

# objective-c - 在应用程序委托中存储浮点数

> ID：12286084
> 
> 赞同：1
> 
> 时间：2012-09-05T16:42:55.577
> 
> 标签：objective-c, uiapplicationdelegate, cgfloat

我在我的应用程序委托中存储了一些浮点数，然后在应用程序委托的 .m 中合成它。

现在，当我在一个视图控制器中使用该浮点数时，我会这样做：

```
del = [[UIApplication sharedApplication] delegate];
CGFloat PUEresult = (*(del.FacilitiesLoad) / *(del.ItLoad)); 
```

（ItLoad 和 FacilititesLoad 都是存储在我的委托中的浮点数）

现在在下一个控制器中我做同样的事情：

```
CGFloat localPUE = (*(del.FacilitiesLoad) / *(del.ItLoad)); 
```

那总是返回 inf 为什么会这样，我该如何阻止它这样做？

我已经很久没有使用 obj-c 了，所以请友好。

删除指针这样做：

> 二进制表达式的无效操作数（'CGFloat *'（又名'float *'）和'CGFloat *'）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T16:47:10.347

`CGFloat`是原始类型，不需要使用`*`符号。尝试在所有使用 CGFloat 的地方将其删除并再次检查结果

不要忘记将您的应用程序委托转换为您的类型：

```
del = (MyAppDelegate*)[[UIApplication sharedApplication] delegate]; 
```

# bash - sed：在随机其他文本中大规模转换时代

> ID：12286085
> 
> 赞同：5
> 
> 时间：2012-09-05T16:42:59.487
> 
> 标签：bash, sed

Centos / Linux Bash

我有一个日志文件，里面有很多文本和时代编号。我想将所有时代替换为可读的日期/时间。

我一直想通过 sed 来做这件事，因为这似乎是这项工作的工具。我似乎无法让 sed 的替换部分实际解析变量（纪元）以进行转换。

我正在使用的示例...

```
echo "Some stuff 1346474454 And not working" \
| sed 's/1[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]/'"`bpdbm -ctime \&`"'/g'
Some stuff 0 = Thu Jan  1 01:00:00 1970 And not working 
```

bpdbm 部分会将提供的 epoch 变量转换为有用的日期。像这样..

```
bpdbm -ctime 1346474454
1346474454 = Sat Sep  1 05:40:54 2012 
```

那么我如何将“找到”的项目解析为命令。因为我似乎无法让它工作。

任何帮助都会很可爱。如果有另一种方式，那会很酷......但我怀疑 sed 会最快。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T16:51:36.410

> 这似乎是工作的工具

不它不是。`sed`只能使用`&`它自己，没有办法让它成为命令的参数。你需要更强大的东西，例如 Perl：

```
perl -pe 'if ( ($t) = /(1[0-9]+)/ ) { s/$t/localtime($t)/e }' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:36:54.700

你可以用 GNU sed 来做，输入：

**文件**

```
Some stuff 1346474454 And not working 
```

GNU sed 支持`/e`允许将命令输出通过管道传输到模式空间的参数，这是利用这一点的一种方法`bpdbm`：

```
sed 's/(.*)(1[0-9]{9})(.*)/echo \1 $(bpdbm -ctime \2) \3/e' infile 
```

或与`coreutils` `date`：

```
sed 's/(.*)(1[0-9]{9})(.*)/echo \1 $(date -d @\2) \3/e' infile 
```

**输出日期**

```
Some stuff Sat Sep 1 06:40:54 CEST 2012 And not working 
```

要获得与 相同的输出`bpdbm`：

```
sed 's/(.*)(1[0-9]{9})(.*)/echo "\1$(date -d @\2 +\"%a %b %_d %T %Y\")\3"/e' infile 
```

**输出**

```
Some stuff Sat Sep  1 06:40:54 2012 And not working 
```

请注意，这仅替换在一行中找到的最后一个 epoch。如果还有更多，请重新运行。

# php - 在 .htaccess 中使用 rewriteRule 时删除会话变量

> ID：12286086
> 
> 赞同：1
> 
> 时间：2012-09-05T16:43:08.913
> 
> 标签：php, .htaccess, mod-rewrite

我发生了一件奇怪的事情。如果我转到我网站的主登录页面，然后单击并将产品添加到购物车，则会保存一个名为“cartID”的 PHP 会话变量。这样，客户可以继续将商品添加到他们的购物车，而不会丢失他们的购物车商品。

如果我绕过主登录页面并直接进入产品页面（例如通过书签或谷歌搜索），然后将该项目添加到购物车中，尽管会话变量“cartID”已创建，但一旦客户离开购物车页面, 'cartID' 变量丢失了......这会清空他们的购物车。

将商品添加到购物车的两种方法都使用 .htaccess 中的 rewriteRule：

> RewriteRule ^g(. *)c(.* )s(. *)ss(.* )p(. *)/(.* ).htm$ onlineOrder.php?grpid=$1&catSel=$2&subCat1ID=$3&subCat2ID=$4&prodSel=$5&$6 [质量保证协会]

效果很好，但是如果客户没有先进入主登录页面，则在将商品添加到购物车后创建的“cartID”会话变量将在离开购物车页面时丢失。即使产品页面的两个链接完全相同。

如果直接进入产品页面，为什么它不起作用的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:21:11.947

最可能的情况是您的一个或多个页面可能在`session_start();`被调用之前发送输出。

确保在初始之前没有行、空格或其他任何内容，并且在调用*之前*`<?php`没有输出任何内容（这包括行，因为它们会产生输出）。基本上，启动会话应该是您的脚本所做的第一件事，如果不是第一件事。 *`session_start();``header();`*

# algorithm - 验证字符串是否为旋转回文的有效方法？

> ID：12286091
> 
> 赞同：8
> 
> 时间：2012-09-05T16:43:24.827
> 
> 标签：algorithm, palindrome

旋转回文就像“1234321”、“3432112”。朴素的方法会将字符串切割成不同的片段并将它们连接回来，看看字符串是否是回文。这将需要 O(n^2)，因为有 n 个切割，并且对于每个切割，我们需要 O(n) 来检查字符串是否是回文。我想知道是否有比这更好的解决方案。估计是这样，求指教。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T18:28:16.210

根据this wikipedia article，对于每个长度为n的字符串S，在时间O(n)中计算一个相同大小的数组A是可能的，这样：

A[i]==1 如果 S 的长度为 i 的前缀是回文。

[http://en.wikipedia.org/wiki/Longest_palindromic_substring](http://en.wikipedia.org/wiki/Longest_palindromic_substring)

该算法应该可以在以下位置找到：

> Manacher, Glenn (1975)，“一种新的线性时间“在线”算法，用于查找字符串的最小初始回文数”

换句话说，我们可以在线性时间内检查字符串的哪些前缀是回文。我们将使用这个结果来解决提出的问题。

每个（非旋转）回文 S 具有以下形式 S = psxs^Rp^R。

其中“x”是回文的中心（空字符串或一个字母字符串），“p”和“s”是（可能为空）字符串，“s^R”表示“s”字符串反转。

从这个字符串创建的每个旋转回文都具有以下两种形式之一（对于某些 p）：

1.  sxs^Rp^Rp
2.  p^Rpsxs^R

这是真的，因为您可以选择是否在回文中间之前或之后剪切一些子字符串，然后将其粘贴到另一端。

可以看到，子串“p^Rp”和“sxs^R”都是回文，其中一个是偶数长度，另一个是奇数长度，当且仅当 S 是奇数长度。

我们可以使用维基百科链接中提到的算法来创建两个数组 A 和 B。数组 A 是通过检查哪些前缀是回文而 B 是后缀来创建的。然后我们搜索一个值 i 使得 A[i]==B[i]==1 使得前缀或后缀具有偶数长度。如果提议的字符串是旋转回文并且偶数部分是“p^Rp”子字符串，我们将找到这样的索引，因此我们可以通过将该字符串的一半移动到字符串的另一端来轻松恢复原始回文。

* * *

rks 对解决方案的一个评论是，该解决方案不起作用，因为对于字符串 S = 1121，它将创建字符串 11211121，其回文长度大于或等于 S 的长度，但它不是旋转回文。如果我们更改解决方案以检查是否存在长度等于 S 长度的回文，它会起作用，但我没有看到任何直接的解决方案如何更改搜索最长子字符串的算法，使其将搜索固定长度的子字符串 (len(S))。（我没有在解决方案下写这个作为评论，因为我是 Stackoverflow 的新手并且没有足够的声誉这样做）

* * *

第二条评论 - 很抱歉没有包含 Manacher 的算法，如果有人链接到算法的想法或某些实现，请将其包含在评论中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:56:56.823

将字符串连接到自身，然后在新字符串中进行经典回文研究。如果你找到一个长度大于或等于原始字符串长度的回文，你就知道你的字符串是一个旋转的回文。

对于您的示例，您将在`34321123432112`, find中进行研究`21123432112`，该字符串比您的初始字符串长，因此它是一个旋转回文。

编辑：正如 Richard Stefanec 所指出的，我的算法在 上失败`1121`，他建议我们`>=`将长度上的测试更改为`=`。

EDIT2：应该注意的是，找到给定大小的回文显然并不容易。阅读 Richard Stefanec 帖子下的讨论以获取更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-20T20:34:51.867

```
#Given a string, check if it is a rotation of a palindrome. 
#For example your function should return true for “aab” as it is a rotation of “aba”.
string1 = input("Enter the first string")
def check_palindrome(string1):
    #string1_list = [word1 for word1 in string1]
    #print(string1_list)
    string1_rotated = string1[1::1] + string1[0]
    print(string1_rotated)
    string1_rotated_palindrome = string1_rotated[-1::-1]
    print(string1_rotated_palindrome)
    if string1_rotated == string1_rotated_palindrome:
        return True
    else:
        return False
isPalindrome = check_palindrome(string1)
if(isPalindrome):
    print("Rotated string is palindrome as well")
else:
    print("Rotated string is not palindrome") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T10:36:26.980

我想提出一个简单的解决方案，只使用传统算法。它不会解决任何更难的问题，但它应该足以完成您的任务。它与其他两个提议的解决方案有些相似，但它们似乎都不够简洁，我可以仔细阅读。

**第一步：**将字符串连接到自身（`abvc`- > `abvcabvc`），就像在所有其他建议的解决方案中一样。

**第二步：**对新获得的字符串及其反转进行[Rabin-Karp 预计算（使用滚动哈希）。](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm)

**第三步：**让字符串为 length `n`。对于每个索引`i`，`0...n-1`检查双倍字符串的子字符串`[i, i + n - 1]`是否在恒定时间内是回文，使用 Rabin-Karp 预计算（基本上，在正向和反向方向的子串中获得的值应该相等）。

**结论：**如果第三步发现任何回文 - 那么字符串是旋转回文。如果不是 - 那么它不是。

PS：Rabin Karp 使用哈希，即使是不重合的字符串也可能发生冲突。因此，如果哈希检查引起了相等性的验证暴力检查，这是一个好主意。尽管如此，如果 Rabin Karp 中使用的散列函数是好的，那么解决方案的摊销速度应该保持不变`O(n)`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-01-03T12:26:42.090

您可以将相同的图案添加到原始图案的末尾。比如pattern是1234321，那么你可以在12343211234321的末尾添加相同的pattern。完成后，你可以使用KMP或其他子串匹配算法来找到你想要的字符串。如果匹配，则返回 ture。

# ruby-on-rails - Rails 控制台无法从 I18n 启动错误

> ID：12286099
> 
> 赞同：0
> 
> 时间：2012-09-05T16:43:49.770
> 
> 标签：ruby-on-rails, localization, internationalization

当我尝试启动控制台时，我得到

```
/home/username/.rvm/gems/ruby-1.9.2-p320/gems/i18n-0.6.1/lib/i18n/backend/base.rb:158:in `load_file': can not load translations from /var/www/railsapp/config/locales/ru.yml, expected it to return a hash, but does not (I18n::InvalidLocaleData)
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/i18n-0.6.1/lib/i18n/backend/base.rb:15:in `block in load_translations'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/i18n-0.6.1/lib/i18n/backend/base.rb:15:in `each'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/i18n-0.6.1/lib/i18n/backend/base.rb:15:in `load_translations'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/i18n-0.6.1/lib/i18n/backend/simple.rb:57:in `init_translations'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/i18n-0.6.1/lib/i18n/backend/simple.rb:71:in `lookup'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/i18n-0.6.1/lib/i18n/backend/base.rb:26:in `translate'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/i18n-0.6.1/lib/i18n.rb:156:in `block in translate'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/i18n-0.6.1/lib/i18n.rb:152:in `catch'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/i18n-0.6.1/lib/i18n.rb:152:in `translate'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.1.0/lib/active_record/railtie.rb:102:in `block in <class:Railtie>'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.1.0/lib/active_support/lazy_load_hooks.rb:34:in `call'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.1.0/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.1.0/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.1.0/lib/active_support/lazy_load_hooks.rb:42:in `each'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.1.0/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.0/lib/rails/application/finisher.rb:56:in `block in <module:Finisher>'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.0/lib/rails/initializable.rb:25:in `instance_exec'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.0/lib/rails/initializable.rb:25:in `run'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.0/lib/rails/initializable.rb:50:in `block in run_initializers'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.0/lib/rails/initializable.rb:49:in `each'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.0/lib/rails/initializable.rb:49:in `run_initializers'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.0/lib/rails/application.rb:92:in `initialize!'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.0/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /var/www/railsapp/config/environment.rb:6:in `<top (required)>'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.0/lib/rails/application.rb:78:in `require'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.0/lib/rails/application.rb:78:in `require_environment!'
from /home/username/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.0/lib/rails/commands.rb:39:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我的应用程序运行良好，只有控制台无法启动。可能这个问题与从第二个 rails 版本升级有关。但一年来，它一直运行良好。

我的 ru.yml：

```
ru:
 activerecord:
  attributes:
   user:
    password: "Пароль"
    login: "Имя пользователя"
    password_confirmation: "Повтор пороля"
  models:
   user: "пользователь" 
```

这是一个幻想错误。从 ru.yml 删除评论后，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T22:43:46.503

您`ru.yml`似乎不对，您可能需要双空格缩进，rails 不会将您的翻译视为哈希，请尝试更改您的 yml 以使用两个空格。

# javascript - 刷新页面后flot消失（IE8）

> ID：12286102
> 
> 赞同：1
> 
> 时间：2012-09-05T16:44:09.837
> 
> 标签：javascript, jquery, canvas, internet-explorer-8, flot

起初，当意识到 flot（jQuery 插件）有时会在 IE8 上消失时，我立即下载了最新的[excanvas.js](http://code.google.com/p/explorercanvas/source/list)并用 flot 替换了旧的。

这部分解决了这个问题，我还在画布 css 选择器中添加了 zoom:1，以便强制使用 display:inline-block 元素（如在[此处输入链接描述](http://shades-of-orange.com/post/2011/09/08/Rendering-problem-with-flot-07-and-excanvas-in-IE8.aspx)中所述）。

但是，刷新完成后，IE8 仍然不显示图表，但是，当我通过单击“Go”访问 URL 时，它可以工作。（这对我来说很奇怪）。

有什么建议么？解决方法？

# .net - 首次登录时 ASP .net 表单身份验证非常慢

> ID：12286111
> 
> 赞同：1
> 
> 时间：2012-09-05T16:44:49.260
> 
> 标签：.net, forms-authentication

我有一个带有表单身份验证（用户名和密码）的 Web 应用程序（.net 4.0）。我一直在尝试找出登录缓慢的问题，并得出结论，在初始登录时，页面需要 20-50 秒才能登录，并且每次后续登录（注销和重新登录）平均需要3秒。是什么导致首次登录需要这么长时间？大多数用户每天只会登录一次网站，所以这看起来网站很慢，而实际上它似乎只是初始登录。

```
 <asp:Login ID="Login1"
   CssClass="login"
   runat="server"
   InstructionText="Please enter your information."
   CheckBoxStyle - CssClass="loginRememberMe"
   RememberMeText="Remember Me"
   width="300px"
   Height="150px"
   onloggingin="Login1_LoggingIn"
   onauthenticate="Login1_Authenticate">

   <TitleTextStyle CssClass="loginHeader" /> 
   <TextBoxStyle CssClass="loginInput" />
   <LoginButtonStyle CssClass="loginButton" />
   <InstructionTextStyle Font - Italic="True" ForeColor="Black" / >

 </asp:Login>

protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
{
    Login login = (Login)loginview1.FindControl("Login1");
    MembershipProvider prov = Membership.Providers["AspNetSqlMembershipProvider"];
    if (prov.ValidateUser(login.UserName, login.Password))
    {
        e.Authenticated = true;

        AuthenticatedUser.ConnectionString = "PortalConnectionString";
        AuditUserLogin(login.UserName, true);

    }
    else
    {
        AuditUserLogin(login.UserName, false);
        e.Authenticated = false;
    }
}

private void AuditUserLogin(string Username, bool Authenticated)
{
    AuditLog.LogUserLoginAttempt(Username, Authenticated, getIP());
}

protected void Login1_LoggingIn(object sender, LoginCancelEventArgs e)
{
  //todo
} 
```

# c# - C# 创建临时 url 来接收 HTTP 请求

> ID：12286112
> 
> 赞同：0
> 
> 时间：2012-09-05T16:44:49.740
> 
> 标签：c#, asp.net, http, web-applications, web

嗨，我是 C# 和网站设计的新手。我正在开发一个控制台应用程序，它将临时创建一个有效的 URL 并在短时间内接收 HTTP 请求。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:32:50.703

如果我理解正确，您只需对任何调用进行[RewritePath即可。](http://msdn.microsoft.com/en-us/library/sa5wkk6d.aspx)这可以在 global.asax 上完成，如下所示：

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
    // Any call, eg WhatEverName.aspx -> it will call the ExistingFile.aspx
    HttpContext.Current.RewritePath("ExistingFile.aspx");
} 
```

# java - 将调试消息从 java 发送到 flash (Electroserver 5)

> ID：12286119
> 
> 赞同：0
> 
> 时间：2012-09-05T16:45:06.137
> 
> 标签：java, actionscript-3, apache-flex

我想知道你是否可以发送**getApi().getLogger().debug("message");** 从您的 Java 插件到 Flashbuilder 的消息？这对调试非常有用，因为如果你有一个空指针或其他东西，你可以在你的 flashbuilder 调试控制台而不是你的 Electroserver bat/终端提示符中查看它。对不起，我没有足够的声誉来添加标签“electroserver”..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:57:05.400

如果您不想查看终端控制台或 server/logs/ElectroServer5.log 文件，您可以使用 ES Admin 的服务器监控、日志屏幕查看 ElectroServer 日志。也有一种使用 JMX 监控的方法，但这将比您想要处理的更复杂。

房间插件可用的另一个选项是实现一种方法，将消息写入调试服务器日志，同时将插件消息与消息一起发送到房间。然后，Flash 客户端可以只监听那些日志插件消息并跟踪它们。

# c# - 在控制器中创建函数的 MVC 最佳实践

> ID：12286121
> 
> 赞同：1
> 
> 时间：2012-09-05T16:45:27.150
> 
> 标签：c#, asp.net-mvc

我仍在学习有关 MVC 编程的方法，并且有一个问题要请您澄清一件事，即关于我的控制器中的 Get 和 POST ActionResult 函数。我会给你三种可能的情况（实际上是三个问题）：

**我的第一个场景：**

```
public ActionResult Derp()
{
    Derpina derpina = new Derpina(); //Should I need to pass this to View?
    return View(derpina);
}

[HttpPost]
public ActionResult Derp()
{
    Derpina derpina = new Derpina();
    UpdateModel(derpina);
    //doStuff and save to DB
    return RedirectToAction("Index");
} 
```

**我的第二种情况：**

```
public ActionResult Derp()
{
    return View();
}

[HttpPost]
public ActionResult Derp()
{
    Derpina derpina = new Derpina(); //Is this the cleanest way?
    UpdateModel(derpina);
    //doStuff and save to DB
    return RedirectToAction("Index");
} 
```

**我的第三个场景：**

```
public ActionResult Derp()
{
    Derpina derpina = new Derpina();
    return View(derpina);
}

[HttpPost]
public ActionResult Derp(Derpina derpina)
{
    UpdateModel(derpina); //Should I need to do that at all?
    //doStuff and save to DB
    return RedirectToAction("Index");
} 
```

我倾向于第二种情况，因为我不需要创建新实体并将其传递给视图。我想这就是我问你们的原因，有人曾经告诉我没有“愚蠢的问题”，所以我希望你们能忍受我:)

1.  我是否需要将新创建的 Derpina 传递给视图
2.  第二种情况不是“最佳实践”吗？
3.  在第三种情况下，如果我将 Derpina 作为参数传递给 HttpPost 函数，MVC 框架是否尚未更新模型？

英语不是我的母语，所以我希望这些问题有意义。无论如何，提前感谢您提供的任何帮助，以便我澄清。

**已编辑**

在收到一个答案后，我想添加第四个场景：

```
public ActionResult CreateDerp()
{
    return View();
}

[HttpPost]
public ActionResult CreateDerp(Derpina derpina)
{
    UpdateModel(derpina);
    //doStuff and save to DB
    return RedirectToAction("Index");
} 
```

这是否是正确的方法，我的意思是如果我不需要在 GET 函数中将模型发送到视图？例如，如果我使用上面代码建议的 Create 函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T16:51:55.030

第一个问题 -> 如果您的视图必须显示数据库中的数据，则需要将模型发送到视图，以便它可以在您的页面上显示所需的数据。

第二个问题->在发布时，如果不需要将模型作为发布方法中的参数，则始终建议使用它，这就是模型绑定器的全部目的，如何更新数据库中的数据应该在业务中分开在我看来，这是最干净的方式。

第三个问题-> mvc 框架确实创建了一个新模型，其中包含您视图中的数据（如果用户输入了任何数据），但这并不意味着它会自动更新您的对象或应用数据库中的更改，您必须这样做明确地，您需要它的方式。

我希望我至少有点帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:53:33.477

问题1：如果您正在初始化一些值（例如在构造函数中），您只需要将一个新实例传递给视图。

问题 2：如果您创建一个新的 Derpina 实例，您将无法获得用户输入的值。您需要像场景 3 一样将 Derpina 的实例传递给 Derp 方法。

问题3：你不需要调用`UpdateModel()`，但是你应该检查模型状态（`ModelState.IsValid`）然后执行你的业务逻辑并将模型保存到数据库中。

# algorithm - 算术算法

> ID：12286122
> 
> 赞同：2
> 
> 时间：2012-09-05T16:45:28.867
> 
> 标签：algorithm, big-o, pseudocode

我正在经历一些面试问题，偶然发现了这个问题。p(x) = a0 + a1x + a2x^2 + ... + anx^n。您可以使用什么算法来计算 O(N^2) 中 p(x) 的值？我完全不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T16:54:17.513

您可以`O(N)`通过直接评估或[霍纳的方法](http://en.wikipedia.org/wiki/Horner%27s_method)来做到这一点。可以在此处找到有关各种操作的复杂性和所涉及方法的有用图表：

[数学运算的计算复杂度](http://en.wikipedia.org/wiki/Computational_complexity_of_mathematical_operations)

Horner 的方法是一个串行过程，用于优化“在某些体系结构上使用本机乘累加指令求值的形式 (A+Bx) 的子表达式”。一个更并行的版本是[Estrin 的方案](http://en.wikipedia.org/wiki/Estrin%27s_scheme)。

由于您可以计算`p(x)`时间`O(N)`，因此应用此方法`N`次数来实现`O(N^2)`（如果这确实是您所追求的......）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:06:26.877

由于每个项都是独立的并且有 N 个项，因此您必须执行`O(N)`多项式项的计算。由于最坏的演员是`(a_n)*(x^n)`并且`x^n`可以计算出来，因此`O(N)`您有确切`O(N^2)`的时间来实现算法的幼稚实现。

但是有一些技巧可以`x^n`在少于 O(N) 的时间内进行计算，因此您可以做得更好：请参阅[pow() 的实现](http://www.netlib.org/fdlibm/e_pow.c)。此外，其他答案所描述的 Hoener 方法提供了一种快速实现，即`O(N)`时间，因此也是`O(N^2)`时间。

# php - jquery 滚动扩展

> ID：12286141
> 
> 赞同：2
> 
> 时间：2012-09-05T16:46:21.050
> 
> 标签：php, jquery, jquery-plugins

我在使用**jquery scrollextend**插件时遇到了一些问题。目标是从 load_messages.php 中获取一些 html 元素并将其插入到 html 页面中。问题是当我重新加载 html 页面（即多次调用 load_messages.php）时，我得到了错误：

**注意：未定义变量：functions.php 中的数据。**

我无法弄清楚究竟是什么导致了这个问题，因为之前定义了 php 变量 $data 。有人可以帮忙吗？

jquery代码如下所示：

```
//scroll
$('.scroll_container').scrollExtend(
        {
            'target': '#wall_container',
            'url': 'load_messages.php',

        }
    ); 
```

load_messages.php 包含以下代码（我省略了不必要的代码块）：

```
<?php
include_once 'functions.php';

$user_id=$_SESSION['user_id'];
$Wall = new Wall_Updates();
$table="friends".$user_id;
$updatesarray=$Wall->Updates($table,$user_id,$upper_limit,$lower_limit);
?> 
```

function.php 中的更新函数如下：

```
 public function Updates($table,$user_id,$upper_limit,$lower_limit) 
{

    $query = mysql_query("SELECT user.user_id, first_name, post_content,post_id,UNIX_TIMESTAMP( created ) AS time
                          FROM user, posts
                          WHERE (
                          user.user_id
                          IN (

                          SELECT friends_id
                          FROM $table)
                          OR user.user_id =$user_id)
                          AND user.user_id = posts.user_id
                          order by post_id desc
                          LIMIT $lower_limit , $upper_limit") or die(mysql_error());
     while($row=mysql_fetch_array($query))
     {
    $data[]=$row;
      }
    return $data;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:50:43.800

您在 while 循环内初始化 $data ，这意味着它对循环外的任何内容均不可用。如果要存储循环中的值，请在循环外初始化变量。

```
public function Updates($table,$user_id,$upper_limit,$lower_limit) 
{

    $query = mysql_query("SELECT user.user_id, first_name, post_content,post_id,UNIX_TIMESTAMP( created ) AS time
                          FROM user, posts
                          WHERE (
                          user.user_id
                          IN (

                          SELECT friends_id
                          FROM $table)
                          OR user.user_id =$user_id)
                          AND user.user_id = posts.user_id
                          order by post_id desc
                          LIMIT $lower_limit , $upper_limit") or die(mysql_error());

     $data = array();
     while($row=mysql_fetch_array($query))
     {
         $data[]=$row;
     }
     return $data;

} 
```

# security - 如何正确加密 TCP 数据，使邪恶的客户端无法读取/解密它

> ID：12286143
> 
> 赞同：0
> 
> 时间：2012-09-05T16:46:22.737
> 
> 标签：security, encryption, tcp, client, client-server

我会更好地解释我的问题。

我有一个连接到 Python 服务器的 C# 客户端，该客户端应该在建立连接时向服务器发送（仅一次）一些数据，这些数据不应该被篡改。

我对密码学一无所知，但我读过一些算法，如 RSA，其中公钥用于加密数据，私钥用于解密。

我想做的是创建一对密钥并将公钥发送给客户端，用这个密钥加密数据并将加密的数据发送到服务器，我认为使用这种方式数据不能被解密也被篡改后，每个连接的客户端都会有一对不同的密钥。这可能吗？我一直在搜索，但我并不真正了解 RSA 的工作原理。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:56:53.677

一个非常简单的答案：不要尝试创建自己的协议，而是使用 SSL（或更确切地说是 TLS）。特别是如果您不确定如何实现这一点。您可以使用自己的自签名（因此是免费的）证书。

# sql-server - MS Build 发布 SSDT 项目错误创建 SQL Server 登录

> ID：12286147
> 
> 赞同：1
> 
> 时间：2012-09-05T16:46:26.867
> 
> 标签：sql-server, msbuild, jenkins, sql-server-data-tools

我一直在使用 SQL Server Data Tools、ms build 和 Jenkins 自动化数据库部署。我正在使用虚拟发布配置文件

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <IncludeCompositeObjects>True</IncludeCompositeObjects>
    <TargetDatabaseName>AdventureWorksDW</TargetDatabaseName>
    <DeployScriptFileName>AdventureWorksDW.sql</DeployScriptFileName>
    <TargetConnectionString>Data Source=.;Integrated     Security=True;Pooling=False</TargetConnectionString>
    <BlockWhenDriftDetected>False</BlockWhenDriftDetected>
    <RegisterDataTierApplication>False</RegisterDataTierApplication>
    <BlockOnPossibleDataLoss>True</BlockOnPossibleDataLoss>
    <IgnorePermissions>True</IgnorePermissions>
    <CreateNewDatabase>True</CreateNewDatabase>
    <ProfileVersionNumber>1</ProfileVersionNumber>
  </PropertyGroup>
</Project> 
```

然后，我使用带有 ms build 的属性开关覆盖其中的某些值。

尽管没有在项目中包含权限并将 IgnorePermisssions 设置为 true，但我从 ms build 中获得了以下输出。

```
Microsoft (R) Build Engine version 4.0.30319.17929
[Microsoft .NET Framework, version 4.0.30319.17929]
Copyright (C) Microsoft Corporation. All rights reserved.

Build started 05/09/2012 17:35:28.
Project "E:\Jenkins\workspace\Publish SSDT with parameters\Database\ETL POC\AdventureWorksDW\AdventureWorksDW.sqlproj" on node 1 (Publish target(s)).
SqlPublish:
  Deployment script generated to:
  E:\Jenkins\workspace\Publish SSDT with parameters\Database\ETL POC\AdventureWorksDW\bin\Debug\AdventureWorksDW.publish.sql

  Creating AdventureWorksDW...
  Creating [My-Domain\jenkins]...
E:\Jenkins\workspace\Publish SSDT with parameters\Database\ETL POC\AdventureWorksDW\bin\Debug\AdventureWorksDW.publish.sql(173,1,173,1): Deploy error SQL72014: .Net SqlClient Data Provider: Msg 15063, Level 16, State 1, Line 1 The login already has an account under a different user name. [E:\Jenkins\workspace\Publish SSDT with parameters\Database\ETL POC\AdventureWorksDW\AdventureWorksDW.sqlproj]
  An error occurred while the batch was being executed.
Done Building Project "E:\Jenkins\workspace\Publish SSDT with parameters\Database\ETL POC\AdventureWorksDW\AdventureWorksDW.sqlproj" (Publish target(s)) -- FAILED.

Build FAILED. 
```

编辑：

我现在已经从 msbuild 归档了发布脚本。下面的部分已被编辑以排除正在设置的不相关的数据库选项，并以引发错误的命令结束。

```
/*
Deployment script for AdventureWorksDW

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/
GO

SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;
GO

:setvar DatabaseName "AdventureWorksDW"
:setvar DefaultFilePrefix "AdventureWorksDW"
:setvar DefaultDataPath "E:\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\"
:setvar DefaultLogPath "E:\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\"
GO

:on error exit
GO

/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END

GO
USE [master];
GO

IF (DB_ID(N'$(DatabaseName)') IS NOT NULL) 
BEGIN
    ALTER DATABASE [$(DatabaseName)]
    SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
    DROP DATABASE [$(DatabaseName)];
END

GO
PRINT N'Creating $(DatabaseName)...'
GO
CREATE DATABASE [$(DatabaseName)]
    ON 
    PRIMARY(NAME = [$(DatabaseName)], FILENAME = N'$(DefaultDataPath)$(DefaultFilePrefix)_Primary.mdf')
    LOG ON (NAME = [$(DatabaseName)_log], FILENAME = N'$(DefaultLogPath)$(DefaultFilePrefix)_Primary.ldf') COLLATE Latin1_General_CI_AS
GO
GO
PRINT N'Creating [MY-DOMAIN\jenkins]...';

GO
CREATE USER [MY-DOMAIN\jenkins] FOR LOGIN [DR-FOSTER\jenkins]; 
```

我已经在 J​​enkins 之外运行了这个脚本并且它成功了，但是那是在另一个使用的帐户下。

似乎尽管 MY-DOMAIN\jenkins 创建了数据库，因此作为所有者，发布脚本想要创建一个用户并将其设置为 db_owner。

有没有人有类似的经验？这开始感觉像是一个错误。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:35:46.067

在尝试将 Windows 用户添加到数据库之前，当用户已经处于 dbowner 角色中时，我已经看到了 SQL Server 错误。将 dbowner 更改为类似 sa 允许您将用户添加到数据库中。

这将有助于共享正在处理的实际 SQL 语句。

# backbone.js - Backbone.js - 正确的模型初始化

> ID：12286149
> 
> 赞同：11
> 
> 时间：2012-09-05T16:46:31.130
> 
> 标签：backbone.js

**问题：**当存在需要以特定方式存储的属性时，初始化backbone.js 模型的正确方法是什么？我是否需要映射不需要任何特殊格式的属性？我认为backbone.js 做了某种自动映射。

**例子：**

```
var MyModel = Backbone.Model.extend({

    initialize: function (options) {

        // These attributes need to be stored in a different format
        // Dates
        this.startYear = new Date(options.startTime).getFullYear();
        // Rounding numbers
        this.wholeNumber = Math.Round(options.numberWithDecimals);
        // Storing empty strings as nulls
        if (options.fullName == null || options.fullName == "") {
            this.fullName == null;
        } else {
            this.fullName = options.fullName;
        }

        // These are fine as they are
        this.fieldA = options.fieldA;
        this.fieldB = options.fieldB;
        this.fieldC = options.fieldC;
    },
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T20:15:38.667

首先，您必须区分`attributes`和`instance variables`。

**属性**：恕我直言，它应该是字符串或整数形式的普通对象。它们通过 REST API 在客户端和服务器之间移动。它们通过[Model.get()](http://backbonejs.org/#Model-get) / [Model.set()](http://backbonejs.org/#Model-set)方法进行操作。它们通过[Model.toJSON()](http://backbonejs.org/#Model-toJSON)发送到服务器（也使用`template`相同的`.toJSON()`方法发送到服务器。如果它们以某种方式发生变化，则触发*Backbone 事件*。您可以自定义此`attributes`操作服务器端的初始化正如@muistooshort 所建议的，在将JSON 信息发送到覆盖[Model.parse()](http://backbonejs.org/#Model-parse)方法的模型之前。

**实例变量**：（`this.myAttribute`事物）它们可以是复杂的对象。不会在其更改中触发任何隐式事件，并且不会在`save`and`update`调用中将它们发送到服务器，并且以标准方式，它们不会发送到*模板*。

在您的示例中，您没有存储任何复杂的对象，并且如果您不害怕您的模型将向服务器发送的属性多于从服务器接收的属性，您可以寻求@muistooshort 建议：

```
// code no tested
var MyModel = Backbone.Model.extend({
  parse: function(resp, xhr) {
    resp.startYear = new Date( resp.startTime ).getFullYear();
    resp.wholeNumber = Math.Round( resp.numberWithDecimals );
    if( resp.fullName == "" ) resp.fullName == null;

    return resp;
  },
}); 
```

请记住，这些是*属性* ，您必须以这种方式访问​​它们`my_model.get( "startYear" )`

此解决方案的唯一问题是，如果*原始属性*更改，*派生属性*将不会更新。所以你可以用另一个实现：

 *```
// code no tested
var MyModel = Backbone.Model.extend({
  initialize: function(){
    this.updateAttributes();
    this.on( "change", this.updateAttributes, this );
  },

  updateAttributes: function() {
    this.set( "startYear", new Date( this.get( "startTime" ) ).getFullYear() );
    this.set( "wholeNumber", Math.Round( this.get( "numberWithDecimals" ) ) );
    if( this.get( "fullName" ) == "" ) this.set( "fullName", null );
  },
}); 
```

### 更新

正如@TomTu 所建议的，如果您的*在线属性*只需要提供模板，那么**装饰器**是最好的解决方案：[https ://stackoverflow.com/a/9687672/316700](https://stackoverflow.com/a/9687672/316700)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:48:28.073

如果您只需要在模板中使用的辅助值，您可以在覆盖的`toJSON`方法中计算它们，该方法将添加您在视图中表示模型时可能需要的所有额外属性。

[正如 Backbone.js 的文档所说](http://backbonejs.org/#Model-toJSON)：

> 模型.toJSON()
> 
> 返回模型属性的副本以进行 JSON 字符串化。这可用于持久化、序列化或 在移交给视图之前进行**扩充。**...

正如我在另一个答案的评论中提到的那样 - 更改`parse`方法中的模型将导致创建开销，每次保存模型时都会将其发送到服务器，应该被认为是一种草率和不好的做法

由于模型初始化不会以与视图类似的方式将选项绑定到模型实例，因此您始终可以在初始化方法中执行此操作，然后根据您的要求从覆盖的 toJSON 方法中引用选项想要达到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T14:50:28.437

已经得到回答，但只是为了更整洁一点：

```
var contact = Backbone.Model.extend({
       parse: function (response) { 
           response.newAttribute = response.alreadyProvidedAttribute; 
           return response;
      }
 }); 
```*

# c# - Word 互操作捕获文档编辑事件

> ID：12286150
> 
> 赞同：3
> 
> 时间：2012-09-05T16:46:32.220
> 
> 标签：c#, com-interop

我试图检测用户何时使用单词 interop 编辑 word 文档。

我知道这甚至不是内置的：http: [//msdn.microsoft.com/en-us/library/microsoft.office.interop.word.application_events.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.application_events.aspx)

是否有某种方法可以模拟此事件或以其他方式捕获任何编辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:12:19.097

听起来您需要添加自己的自定义事件处理程序。 **编辑：**或使用 Document.Saved 属性。

[如何：实现接口事件](http://msdn.microsoft.com/en-us/library/ak9w5846.aspx)
[如何检查 word 文档是否有变化](http://social.msdn.microsoft.com/forums/en-US/vsto/thread/9f978a32-845c-4823-9780-2f184ba435a1)
[，检测用户何时打开 word 文档以及何时输入（在 c# 中）](https://stackoverflow.com/questions/11072829/detecting-when-a-user-opens-a-word-document-and-when-he-types-in-it-in-c)

# asp.net - 无法停止 web.config 继承

> ID：12286151
> 
> 赞同：3
> 
> 时间：2012-09-05T16:46:33.170
> 
> 标签：asp.net, wcf, iis, configuration, endpoint

我在 IIS 的网站内创建了一个应用程序。

我的应用程序用于托管运行 .Net 4.0 代码的 WCF 服务端点（创建它的网站正在运行 .Net 2.0）

当我加载此服务端点时，我收到模型和处理程序丢失的错误（因为根网站在 web.config 中定义了它们）。

我尝试将我的**system.web**和**system.serviceModel**包装在以下指令中：

```
 <location path="." inheritInChildApplications="false">
    <system.web>
    ...
  </location> 
```

但处理程序和模块继续尝试加载。

接下来，我尝试清除模块和处理程序。

```
<httpModules>
  <clear />
</httpModules>
<httpHandlers>
  <clear />
</httpHandlers> 
```

这导致了以下错误：

> 未找到请求类型“GET”的 http 处理程序

接下来我尝试仅手动添加 .svc 的必要处理程序

```
 <add 
       verb="*"
       path="*.svc"
       type="System.ServiceModel.Activation.HttpHandler, System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" /> 
```

这导致：

> 无法从程序集“System.ServiceModel，Version=3.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”加载类型“System.ServiceModel.Activation.HttpHandler”。

在 IIS 中，我的应用程序设置为 .Net 4.0。我没有看到直接在应用程序池上指定框架的方法（它只有回收、性能、健康、身份选项卡）。

我需要做的就是在 2.0 网站中添加这个运行 .net 4.0 的虚拟目录/应用程序，并托管一个 WCF 端点。

****我的 4.0 应用程序在单独的应用程序池下运行。****

 **添加整个 web.config

```
<?xml version="1.0"?>
<configuration>
  <location path="." inheritInChildApplications="false">
    <system.web>
      <compilation debug="true" />
      <authentication mode="Windows" />
      <httpModules>
        <clear />
      </httpModules>
      <httpHandlers>
        <clear />
        <add verb="*" path="*.svc"
          type="System.ServiceModel.Activation.HttpHandler, System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </httpHandlers>
    </system.web>
    <system.serviceModel>
      <bindings>
        <!--<basicHttpBinding>
        <binding name="extAcctCustMapBinding" maxBufferSize="1000000"
          maxReceivedMessageSize="1000000" />
      </basicHttpBinding>-->
      </bindings>

      <behaviors>
        <serviceBehaviors>
          <behavior name="DebugBehavior">
            <serviceMetadata httpGetEnabled="true" />
            <serviceDebug includeExceptionDetailInFaults="true" />
          </behavior>
        </serviceBehaviors>
      </behaviors>

      <services>
        <service behaviorConfiguration="DebugBehavior" name="MyService">
          <endpoint binding="basicHttpBinding" name="MyService"
            contract="IMyService" />
        </service>
      </services>

      <serviceHostingEnvironment multipleSiteBindingsEnabled="false" />
    </system.serviceModel>

    <system.webServer>
      <modules runAllManagedModulesForAllRequests="false"/>
    </system.webServer>
  </location>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:50:05.723

您不能将 .NET 4.0 作为嵌套应用程序运行在 .NET 2.0 应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:56:00.753

.NET 框架版本是在应用程序级别定义的。您可以将网站 (www.example.com) 作为 .NET 2.0 应用程序运行，然后将虚拟目录（即主站点下的单独应用程序）设置为 .NET 4.0 应用程序。应用程序池不能共享不同的 .NET 版本，因此每个应用程序都需要一个单独的应用程序池，但这与站点配置无关。

话虽如此，如果您将主站点配置为 .NET 2.0 应用程序并将虚拟目录配置为 .NET 4.0 应用程序，则 .NET 4.0 应用程序无法从 .NET 2.0 应用程序继承配置。配置模式不向后兼容。**

# android - 在应用启动期间获取当前位置

> ID：12286152
> 
> 赞同：9
> 
> 时间：2012-09-05T16:46:33.660
> 
> 标签：android, geolocation, location, locationmanager

再会！我正在开发一个监控用户位置的安卓应用程序。我正在使用 LocationManager 获取用户位置，使用以下方法

```
public void onLocationChanged(Location theLocation) {} 
```

通过上述方法，每当有用户移动时，我都会收到位置坐标。

但是，现在我计划在他们的应用登录后立即获取用户的位置。有什么方法可以通过 LocationManager 在我的应用启动后手动获取位置坐标？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-05T17:07:00.827

使用这种技术：

```
LocationManager locManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

boolean network_enabled = locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

Location location;

if(network_enabled){

   location = locManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

if(location!=null){
   longitude = location.getLongitude();
   latitude = location.getLatitude();
    }                
} 
```

在这种情况下，您甚至无需使用 GPS，只需您的移动网络即可。

不要忘记在 Manifest 中给予以下权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T11:52:10.917

试试这个代码。希望它会起作用

```
import android.app.Activity;
import android.content.Context;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.widget.Button;
import android.widget.Toast;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

public class MainActivity extends Activity implements LocationListener {

private LocationManager locationManager;
private String provider;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);
    if (location != null) {
        System.out.println("Provider " + provider + " has been selected.");
        onLocationChanged(location);
      } else {
        System.out.println("Location not avilable");
      }

}

protected void onResume() {
    super.onResume();
    locationManager.requestLocationUpdates(provider, 400, 1, (LocationListener) this);
  }

  /* Remove the locationlistener updates when Activity is paused */
  @Override
  protected void onPause() {
    super.onPause();
    locationManager.removeUpdates((LocationListener) this);
  }
public void onLocationChanged(Location location) {
    double lat = (double) (location.getLatitude());
    double lng = (double) (location.getLongitude());
    Toast.makeText(getApplicationContext(), lat+"----"+lng,Toast.LENGTH_LONG).show();
    Log.i("Latitude------------", "Lattitude:" +lat);
    Log.i("Longitude-------------", "Longitude:" +lng);
  }

@Override
public void onProviderDisabled(String arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
    // TODO Auto-generated method stub

}
    } 
```

必须添加所需的权限

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T19:24:45.213

这就是我所做的...... 1）mainactiviy.java

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
final Button gpsButton = (Button) findViewById(R.id.getloc);

gpsButton.setOnClickListener(new Button.OnClickListener() {
public void onClick(View v){
    LoadCoords();
}});
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
getMenuInflater().inflate(R.menu.activity_main, menu);
return true;
}

public void LoadCoords(){
EditText locn = (EditText)findViewById(R.id.text1);
EditText locn1 = (EditText)findViewById(R.id.text2);
GPSTracker gps = new GPSTracker(this);
if(gps.canGetLocation){
Double latPoint=gps.getLatitude(); 
Double lngPoint =gps.getLongitude();   

locn.setText(latPoint.toString());
locn1.setText(lngPoint.toString());
}
}
} 
```

另一个文件 2)GPSTracker.java

```
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;

public class GPSTracker extends Service implements LocationListener{
private final Context mContext;

// flag for GPS status
boolean isGPSEnabled = false;

// flag for network status
boolean isNetworkEnabled = false;

boolean canGetLocation = false;

Location location; // location
double latitude; // latitude
double longitude; // longitude

// The minimum distance to change Updates in meters
private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

// The minimum time between updates in milliseconds
private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

// Declaring a Location Manager
protected LocationManager locationManager;

public GPSTracker(Context context) {
this.mContext = context;
getLocation();
}
public Location getLocation() {
try {
    locationManager = (LocationManager) mContext
            .getSystemService(LOCATION_SERVICE);

    // getting GPS status
    isGPSEnabled = locationManager
            .isProviderEnabled(LocationManager.GPS_PROVIDER);

    // getting network status
    isNetworkEnabled = locationManager
            .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

    if (!isGPSEnabled && !isNetworkEnabled) {
        // no network provider is enabled
    } else {
        this.canGetLocation = true;
        // First get location from Network Provider
        if (isNetworkEnabled) {
            locationManager.requestLocationUpdates(
                    LocationManager.NETWORK_PROVIDER,
                    MIN_TIME_BW_UPDATES,
                    MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
            Log.d("Network", "Network");
            if (locationManager != null) {
                location = locationManager
                        .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                if (location != null) {
                    latitude = location.getLatitude();
                    longitude = location.getLongitude();
                }
            }
        }
        // if GPS Enabled get lat/long using GPS Services
        if (isGPSEnabled) {
            if (location == null) {
                locationManager.requestLocationUpdates(
                        LocationManager.GPS_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("GPS Enabled", "GPS Enabled");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }
        }
    }

} catch (Exception e) {
    e.printStackTrace();
}

return location;
}
public double getLatitude(){
if(location != null){
    latitude = location.getLatitude();
}

// return latitude
return latitude;
}

/**
* Function to get longitude
* */

public double getLongitude(){
if(location != null){
    longitude = location.getLongitude();
}

// return longitude
return longitude;
}
@Override
public void onLocationChanged(Location location) {
}

@Override
public void onProviderDisabled(String provider) {
}

@Override
public void onProviderEnabled(String provider) {
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}

@Override
public IBinder onBind(Intent arg0) {
return null;
} 
```

如果有效请回复...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-31T15:54:17.333

```
 ActivityCompat.requestPermissions(MapsActivity.this,new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 1);

    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED)
    {
        /*
        tvLatitud.setText("No se tienen permisos");
        ...
         */

        return;
    }else
    {
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        latitude = location.getLatitude();
        longitude =  location.getLongitude();
    } 
```

# dns - 动态 DNS 更新是否有“标准”格式？

> ID：12286162
> 
> 赞同：0
> 
> 时间：2012-09-05T16:47:19.893
> 
> 标签：dns, standards

DDNS 客户端/服务器通信是否有“标准”格式？我正在考虑创建一个客户端，但我不确定是否有发送请求的首选方式。套接字、XMS、JSON 等？

这是相当主观的，我很抱歉。只是寻求建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:03:52.367

动态DNS实际上是首先在DNS系统中定义的标准化协议；所以你实际上发送DNS数据包来做到这一点。有关详细信息，请参阅[RFC2136](http://www.ietf.org/rfc/rfc2136.txt)。但实际上，您可能想要一个库来链接，而不是自己编写数据包。

# excel - 选择单元格时突出显示整行而不丢失原始行的原始格式？

> ID：12286167
> 
> 赞同：0
> 
> 时间：2012-09-05T16:47:34.390
> 
> 标签：excel, excel-2010, vba

问题是当我用某种颜色突出显示一行时，该行的原始颜色消失了，所以我尝试了这段代码，它再次删除了该行的原始格式和颜色

这是来自[http://www.mcgimpsey.com/excel/highlightrow.html的代码](http://www.mcgimpsey.com/excel/highlightrow.html)

```
Private Sub Worksheet_SelectionChange(ByVal Target As Excel.Range)
        Const cnNUMCOLS As Long = 256
        Const cnHIGHLIGHTCOLOR As Long = 36  'default lt. yellow
        Static rOld As Range
        Static nColorIndices(1 To cnNUMCOLS) As Long
        Dim i As Long
        If Not rOld Is Nothing Then 'Restore color indices
            With rOld.Cells
                If .Row = ActiveCell.Row Then Exit Sub 'same row, don't restore
                For i = 1 To cnNUMCOLS
                    .Item(i).Interior.ColorIndex = nColorIndices(i)
                   Next i
            End With
        End If
        Set rOld = Cells(ActiveCell.Row, 1).Resize(1, cnNUMCOLS)
        With rOld
            For i = 1 To cnNUMCOLS
                nColorIndices(i) = .Item(i).Interior.ColorIndex
            Next i
            .Interior.ColorIndex = cnHIGHLIGHTCOLOR
        End With
    End Sub 
```

那么，这个问题我该怎么办呢？如何保留范围的历史颜色，以便当我取消选择该行时它会正确恢复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:51:26.520

用条件格式伪造它。

使用条件格式将单元格设置为所需的颜色。作为条件，使用公式`=ROW()=$C$12`

然后（在此示例中）更改`C12`为要突出显示的行。将其设置为范围之外的行以删除突出显示。

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
ActiveSheet.Cells(12, 3) = Target.Row
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-27T08:54:41.613

这是一种在每次用户更改选择时都不会清除撤消堆栈的方法。这保留了重要且通常必不可少的正常撤消行为。

## 定义名称

这不是一个命名范围。它将是一个存储值而不必将其存储在单元格内的名称。我们将使用它来存储活动/选定行的编号。通过将其存储在定义的名称而不是单元格中，我们保留了 Excel 的撤消堆栈。

1.  转到**公式**>**名称管理器**>**新建**。

2.  设置以下字段值：

    **名称：** ActiveRow

    **范围：**工作簿

    **指：** 1

3.  单击**确定**。

## 将 VBA 代码添加到工作表模块

将以下代码添加到要突出显示活动行的工作表模块中。

```
Private Sub Worksheet_SelectionChange(ByVal Target As Excel.Range)
    Excel.ThisWorkbook.Names("HighlightRow").Value = Excel.Selection.Row
End Sub 
```

## 向工作表添加条件格式

1.  选择整个工作表中的所有单元格。

2.  转到**主页**>**条件格式**>**新规则**

3.  在 - 选择规则类型 - 下，单击**使用公式确定要格式化的单元格**。

4.  单击**格式**并定义您的格式。

5.  将公式设置为：

    =ROW()=ActiveRow

    （“ActiveRow”是您之前设置的定义名称。）

而已！

# javascript - Ember selectionbinding - 如何让它着火

> ID：12286172
> 
> 赞同：1
> 
> 时间：2012-09-05T16:48:10.143
> 
> 标签：javascript, ember.js

称呼

我一直在尝试找到一种方法来编辑 Ember.Select 框，而无需实际手动选择值而是在内部编辑它们。我的 Ember.Select 看起来像这样：

```
{{view Ember.Select 
  contentBinding="Et.router.availablePhasesController" 
  optionValuePath="content.id" 
  optionLabelPath="content.label" 
  selectionBinding="a.selectedPhase"
}} 
```

可用PhasesController 如下所示：

```
Et.AvailablePhasesController = Ember.ArrayController.extend({
content: [
  { id: 1, label: "1" },
  { id: 2, label: "2" },
  { id: 3, label: "3" }
 ]
}); 
```

当我从选择框中选择这些值时，这一切都很好，但我的问题是，我可以以某种方式更改 Ember.Select 创建的选择元素上的值，它会触发绑定，这意味着我的“a.selectedPhase”还将获得用于更改选择元素的值。

我尝试将 jQuery 与 .val() 和 .attr("value") 一起使用，但这只会影响 UI 而不会触发绑定，这意味着选择框有值但没有“a.selectedPhase”

我还尝试扩展 Ember.Select 视图，发现它有一个变量“值”，它存储当前值并根据绑定进行更新，但我找不到任何用处。我创建了观察者来观察这个值何时发生变化，但这并没有帮助，因为它仅在我手动选择一个新值时才发生变化。

总而言之，有没有办法通过某种方式触发 selectionBinding，而不是直接更改绑定中的变量或通过 UI？

编辑：我按照评论中的要求创建了一个 jsfiddle：http: [//jsfiddle.net/y52Pc/2/](http://jsfiddle.net/y52Pc/2/)

您可以看到绑定工作正常，如果您使用选择框选择不同的选项，它将正确更新。我还设置了两个按钮，一个使用 Ember.set 方法，这也可以正常工作并触发绑定。另一个使用 jQuery.val() 的方法只会影响 UI 而不会触发绑定。

我正在寻找的是用其他方式触发绑定的其他方式，然后是 .set 或通过选择选择框手动触发。

编辑 2：我在这里添加了一种通过 jQuery 触发绑定的更新方法：http: [//jsfiddle.net/y52Pc/3/](http://jsfiddle.net/y52Pc/3/) 这似乎解决了问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:36:00.147

每当您使用 更改选择组件的值时`$().attr()`，它都不会触发更改事件（DOM 事件应该触发 ember.js 更新绑定）。您应该手动调用`$('selector').attr().trigger('change')`

# apache-flex - Flex 中的空引用

> ID：12286173
> 
> 赞同：0
> 
> 时间：2012-09-05T16:48:21.623
> 
> 标签：apache-flex, nullreferenceexception, tabnavigator

好的，我正在使用 TabNavigator。我现在在每个选项卡中填充标签。我可以毫无问题地填充 ard.text 。但是我的所有其他标签都显示为 null，并且出现 1009 错误“无法访问 null 对象引用的属性或方法”。TabNavigator 的功能有什么我缺少的吗？仅供参考，我是 Flex 的新手。不确定为什么我会出错。任何帮助都会很棒。

```
<mx:TabNavigator id="tabNavigator" width="100%" height="125"  visible="false" includeInLayout="false" creationPolicy="auto">
        <mx:VBox id="generalInformation" label="Gen. Info." width="100%" horizontalAlign="center">
            <mx:Label id="ard" text=""> </mx:Label>
            <mx:Label id="bufferDist" text=""/>
            <mx:HBox paddingBottom="5" >
                <mx:Button id="googleButton" label="Google Directions" click="newWin('http://www.maps.google.com/?q=' + addressResult)"/>
                <mx:Button id="mapquestButton" label="MapQuest Directions" click="newWin('https://www.mapquest.com/?q=' + addressResult)"/>
            </mx:HBox>
        </mx:VBox>
        <mx:VBox id="schoolDistrict" label="School District" width="100%">
            <mx:Label id="schoolDistrictLabel" text=""> </mx:Label>
        </mx:VBox>
        <mx:VBox id="paHouse" label="PA House" width="100%">
            <mx:Label id="paHouseLabel" text="">    </mx:Label>
        </mx:VBox>
        <mx:VBox id="paSenate" label="PA Senate" width="100%">
            <mx:Label id="paSenateLabel" text="">   </mx:Label>
        </mx:VBox>
        <mx:VBox id="usHouse" label="US House" width="100%">
            <mx:Label id="usHouseLabel" text="">    </mx:Label>
        </mx:VBox>
    </mx:TabNavigator> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:01:58.943

没关系，我想通了。只需将 creationPolicy 设置为 all

# sql - 返回 SQL 中两个日期列之间的天数

> ID：12286176
> 
> 赞同：0
> 
> 时间：2012-09-05T16:48:24.917
> 
> 标签：sql, sql-server, date

我见过很少几个像这样的问题，但没有一个解决方案能完全适用于我的结构。

我当前的查询创建了一个包含 4 列的表，其中 2 列是日期。

我将`@tblTransactions`其声明为稍后在 select 语句中调用的表。我需要最后的选择语句有一个第 5 列，它显示两个日期之间的天数。

```
SELECT *
       ,(t.PremDueDate - t.LastTdate) AS 'tpFactor'          <-------- This doesn't work
FROM
       @tblTransactions t 
```

上面的代码显然不起作用，因为 PremDueDate 和 LastTdate 都是 datatype `date`。

使用 SQL Server Management Studio 2010

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T16:50:22.483

用于[`DATEDIFF()`](http://msdn.microsoft.com/en-us/library/ms189794.aspx)获取两个日期之间的天数：

```
SELECT DATEDIFF(DAY, t.PremDueDate, t.LastTdate) AS 'tpFactor'
FROM @tblTransactions t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:52:41.997

试试这个：

```
SELECT *
    ,DATEDIFF(DD, t.LastTdate, t.PremDueDateP) AS 'tpFactor'
FROM
   @tblTransactions t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:51:56.903

你应该使用[`DATEDIFF(dd, t.PremDueDate, t.LastTdate)`](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

# silverlight - Silverlight 5 UserControl 没有出现在我的网格中

> ID：12286180
> 
> 赞同：0
> 
> 时间：2012-09-05T16:48:55.930
> 
> 标签：silverlight

我正在使用 Silverlight 5。我有一个简单的 UserControl，如下所示：

```
<UserControl x:Class="GIS.VerticalDeformationGraphic"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" >
    <Viewbox Grid.Column="0" MinHeight="400" >
        <Canvas Width="65" Height="450">
            <Rectangle Canvas.Left="5" Canvas.Top="10" Width="15" Height="400" HorizontalAlignment="Left">
                <Rectangle.Fill>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="DarkRed" Offset="0.0" />
                        <GradientStop Color="Red" Offset="0.2" />
                        <GradientStop Color="Yellow" Offset="0.4" />
                        <GradientStop Color="LightGreen" Offset="0.5" />
                        <GradientStop Color="LightBlue" Offset="0.6" />
                        <GradientStop Color="Blue" Offset="0.8" />
                        <GradientStop Color="DarkBlue" Offset="1.0" />
                    </LinearGradientBrush>
                </Rectangle.Fill>
            </Rectangle>
        </Canvas>
    </Viewbox>
</UserControl> 
```

我的 xaml 页面中有这样的参考：

```
xmlns:local="clr-namespace:GIS" 
```

我尝试将用户控件放在网格单元格中，如下所示：

```
<local:VerticalDeformationGraphic Grid.Column="0" /> 
```

如果我使用 UserControl 中的 ViewBox 并将整个内容粘贴到网格中，我唯一要做的更改是将 Grid.Column 分配给 ViewBox 并且它可以工作。我缺少什么使 UserControl 无法显示为 UserControl？

这正是我在页面中使用它的方式：

```
<Grid Grid.Row="1">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <!--<sdk:Label Grid.Column="0" FontSize="20" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="10,1,0,1"
               Content="A Graphic Goes Here">
    </sdk:Label>-->
    <local:VerticalDeformationGraphic Grid.Column="0" Height="450" Width="65" /> 
```

请注意，标签在我将其注释掉之前有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:30:33.953

代码隐藏必须调用 InitializeComponent( )。当我右键单击项目并选择添加/新建项目/Silverlight 时，我没有 Silverlight UserControl 的选项...所以我刚刚添加了一个 xaml 文件。

# python - 与 ajax/http 交互的基于 gui 的脚本，用于网络爬取/抓取

> ID：12286181
> 
> 赞同：2
> 
> 时间：2012-09-05T16:48:57.090
> 
> 标签：python, ajax, web-scraping, web-crawler, fiddler

我正在测试一个主要基于 ajax 并使用 jsp 提供的 Web 应用程序。一切都是在应用程序端动态创建/分配的。我正在尝试创建某种必须执行以下操作的爬虫/刮板：

1.  “单击”给定网页上的每个可用按钮、下拉菜单等
2.  对于每个请求，记录客户端/服务器交互是什么
3.  一旦单个网页的所有按钮都被按下（哈？），广度优先搜索从 #2 的第一条记录开始
4.  继续，直到所有记录都交互过一次。

我很容易使用 python 来点击，虽然 python 不是必需品（我知道 Java 有一些可能很容易工作的东西）：

```
def click(x,y):
win32api.SetCursorPos((x,y))
win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN,x,y,0,0)
win32api.mouse_event(win32con.MOUSEEVENTF_LEFTUP,x,y,0,0) 
```

我查过fiddler等录音软件：[http ://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

我不知道如何记录交互，但不改变屏幕。例如在 A 页面上，按钮 B 移动到 C 页面，我想点击 B，但留在 A 上（这是一个过于简单的情况）

我完全理解广度优先搜索，尽管我不知道如何使用任何脚本/编程语言（来自＃1）加载网页。

那么，是否有人知道如何记录交互（也许将其放在队列中以便于 BFS）？而且，有人知道如何从某些录制软件加载请求吗？

作为旁注，完成所有这些所需的时间并不重要，如果需要几个月，即使这样也可以。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:54:04.797

使用像 autoit 之类的工具（它确实有 python 绑定......）或者我更喜欢称为 SIKULI (http://sikuli.org/) 的工具（它没有 python 绑定......但是它自己的脚本语言是凉爽的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:04:45.793

selenium 有 python 绑定（http://seleniumhq.org/）；你可以用那个。

有什么理由需要基于 GUI 吗？在 GUI 之外，您将拥有更轻松的时间。

您将需要保留每个页面上可能链接的数据存储以及它们的去向。使用基于 gui 的控件，您可以想象在新的浏览器窗口中打开链接，但这可能会失控。

# windows-phone-7 - 无法使按钮边框不可见

> ID：12286182
> 
> 赞同：0
> 
> 时间：2012-09-05T16:49:01.357
> 
> 标签：windows-phone-7

我有一个 userControl，它是一个带有按钮的列表框。记录更新后，列表重新加载。我有一个转换器来检查按钮是否可见。但是，即使按钮的内容不可见，按钮的边框仍然可见。有人会告诉我怎么做吗？提前致谢。

有我的用户控制：

```
<UserControl x:Class="CMSPhoneApp.QueueListControl"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
d:DesignHeight="480" d:DesignWidth="480"
xmlns:local="clr-namespace:CMSPhoneApp"  >

<UserControl.Resources>       
    <local:VisibilityConverter x:Key="VisibilityConverter"/>
    <local:ColumSpanConverter x:Key="ColumSpanConverter"/>        
</UserControl.Resources>

    <ListBox x:Name="lst" HorizontalAlignment="Left"  Margin="6,6,0,0"  VerticalAlignment="Top"     
                  ItemsSource="{Binding Path=MyQueue}"   
                      SelectedItem="{Binding Path=CurrentQueue, Mode=TwoWay}" Height="380" >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <!--<Border BorderThickness="0,1,0,1" BorderBrush="Blue">-->
                            <Grid x:Name="grd" Width="auto" HorizontalAlignment="Stretch"    >

                <Grid.RowDefinitions>                                          
                       <RowDefinition Height="auto"/>
                 </Grid.RowDefinitions>
                   <Grid.ColumnDefinitions>                                         
                        <ColumnDefinition Width=".1*" />
                        <ColumnDefinition Width=".6*"/>
                        <ColumnDefinition Width=".3*" />
                    </Grid.ColumnDefinitions>

                    <Image Source="{Binding Type}" Grid.Row="0" Grid.Column="0"/>
                    <TextBlock  Grid.Row="0" Grid.Column="1"  Grid.ColumnSpan= "{Binding isSpan, Converter={StaticResource ColumSpanConverter}}" Text="{Binding summary}" TextWrapping="Wrap"
                                             Style="{StaticResource PhoneTextAccentStyle}"  />
                <Button x:Name="btnAction" Grid.Row="0" Grid.Column="2" ClickMode="Press" Click="btnAction_Click" Style="{StaticResource NoBorderButton}"
                                            Visibility="{Binding isVisibility, Converter={StaticResource VisibilityConverter}}"
                                         Tag="{Binding callNumber}">                                       
                           <Button.Content>
                                     <TextBlock Width="85" Height="35" Text="{Binding ActionCaption}" 
                                                             />
                           </Button.Content>
                       </Button>

                    <!-- the divider -->
                    <Line X1="0" X2="700" Y1="0" Y2="0" Grid.Row="0" Grid.ColumnSpan="3" Grid.Column="0"
         VerticalAlignment="Bottom" Stroke="Blue" StrokeThickness="5"/> 

            </Grid>

            <!--</Border>-->
                    </DataTemplate>                    

                </ListBox.ItemTemplate>
            </ListBox> 
```

有这个按钮的样式

```
 <Style x:Key="NoBorderButton" TargetType="Button">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="{StaticResource PhoneForegroundBrush}"/>
        <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
        <Setter Property="BorderThickness" Value="{StaticResource PhoneBorderThickness}"/>
        <Setter Property="FontFamily" Value="{StaticResource PhoneFontFamilySemiBold}"/>
        <Setter Property="FontSize" Value="{StaticResource PhoneFontSizeMediumLarge}"/>
        <Setter Property="Padding" Value="10,3,10,5"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid Background="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition From="Pressed" GeneratedDuration="0:0:0.2"/>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Normal">
                                    <Storyboard>
                                        <ColorAnimation Duration="0" To="#FFA3EF8F" Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" Storyboard.TargetName="ButtonBackground"  />
                                    </Storyboard>
                                </VisualState>                                   
                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ColorAnimation Duration="0" To="#FF104772" Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="ContentContainer" />
                                        <ColorAnimation Duration="0" To="#FFEF8328" Storyboard.TargetProperty="(Control.BorderBrush).(SolidColorBrush.Color)" Storyboard.TargetName="ContentContainer"  />
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ButtonBackground">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="ButtonBackground" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" CornerRadius="0" Margin="{StaticResource PhoneTouchTargetOverhang}" BorderBrush="#FFF19D47">
                            <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Padding="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}" BorderBrush="Black" BorderThickness="3"/>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

有 MainPage.xaml

```
<phone:PhoneApplicationPage xmlns:my="clr-namespace:CMSPhoneApp"  
x:Class="CMSPhoneApp.TestPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="PortraitOrLandscape"  Orientation="Portrait"
mc:Ignorable="d" d:DesignHeight="696" d:DesignWidth="480"
shell:SystemTray.IsVisible="True"
xmlns:local="clr-namespace:CMSPhoneApp"
  xmlns:toolkit="clr-  namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
 >
<toolkit:TransitionService.NavigationInTransition>
    <toolkit:NavigationInTransition>
        <toolkit:NavigationInTransition.Backward>
            <toolkit:TurnstileTransition Mode="BackwardIn"/>
        </toolkit:NavigationInTransition.Backward>
        <toolkit:NavigationInTransition.Forward>
            <toolkit:TurnstileTransition Mode="ForwardIn"/>
        </toolkit:NavigationInTransition.Forward>
    </toolkit:NavigationInTransition>
</toolkit:TransitionService.NavigationInTransition>
<toolkit:TransitionService.NavigationOutTransition>
    <toolkit:NavigationOutTransition>
        <toolkit:NavigationOutTransition.Backward>
            <toolkit:TurnstileTransition Mode="BackwardOut"/>
        </toolkit:NavigationOutTransition.Backward>
        <toolkit:NavigationOutTransition.Forward>
            <toolkit:TurnstileTransition Mode="ForwardOut"/>
        </toolkit:NavigationOutTransition.Forward>
    </toolkit:NavigationOutTransition>
</toolkit:TransitionService.NavigationOutTransition>

<phone:PhoneApplicationPage.Resources>

    <local:QueueItemViewModel x:Key="TestViewModel"/>
    <DataTemplate x:Name="PickerItemTemplate">
        <StackPanel Orientation="Horizontal" Margin="16 0 0 0">
            <TextBlock Text="{Binding city}" FontSize="24" HorizontalAlignment="Center" VerticalAlignment="Center" />
        </StackPanel>
    </DataTemplate>
    <DataTemplate x:Name="PickerFullModeItemTemplate">
        <StackPanel Orientation="Horizontal" >
            <TextBlock Text="{Binding city}" Margin="16 0 0 0" FontSize="24" FontFamily="{StaticResource PhoneFontFamilyLight}" />                        
        </StackPanel>
    </DataTemplate>

</phone:PhoneApplicationPage.Resources>
<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" DataContext="{StaticResource TestViewModel}" Background="#FFF3CC62" >
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>                
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28"   >
        <my:Title x:Name="thisTitle" TitleCaption="Queue"   />
    </StackPanel>

    <StackPanel x:Name="City" Grid.Row="1" Margin="12,0,12,0"  Orientation="Horizontal">
        <toolkit:ListPicker   x:Name="listPicker" ItemTemplate="{StaticResource PickerItemTemplate}"  
              Header="Location"   CacheMode="BitmapCache" Width="194" FullModeItemTemplate="{StaticResource PickerFullModeItemTemplate}"
                        SelectedItem="{Binding city}" BorderBrush="#BF86EDA8"        />

    </StackPanel>
    <!--ContentPanel - place additional content here-->       
        <my:QueueListControl x:Name="lst" Grid.Row="2" />
    <!--<StackPanel Grid.Row="3" Orientation="Horizontal"  >
        <Button x:Name="btnQueue" Style="{StaticResource ButtonStyle1}" Content="Queue"/>
        <Button x:Name="btnRefresh" Style="{StaticResource ButtonStyle1}" Content="Refresh"/>
        </StackPanel>-->

</Grid>

<!--Sample code showing usage of ApplicationBar-->
<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar IsVisible="true" IsMenuEnabled="True"  ForegroundColor="#FFABBBF6" BackgroundColor="#FFECED69">
        <shell:ApplicationBarIconButton IconUri="images/menubar/flag.png" Text="Queue"/>
        <shell:ApplicationBarIconButton IconUri="images/menubar/phone.png" Text="Call"/>
        <shell:ApplicationBarIconButton IconUri="images/menubar/edit.png" Text="New Event"/>
        <shell:ApplicationBarIconButton IconUri="images/menubar/checklist.png" Text="Events"/>           
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar> 
```

后面有反弹itemsSoruce的代码：

```
 //update the image and status to the list
    private void UpdateUI()
    {

        foreach (QueueItem a in ar.cmsQueue)
        {
            if (Convert.ToInt32(a.callNumber) == currentCall.id)
            {
                a.status = UPSTATUS; //status:responded;
                var location = (from c in ar.cmsQueue orderby c.callNumber select c);
                Dispatcher.BeginInvoke(new Action(() => lst.lst.ItemsSource = location));

            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:15:25.250

您可以将以下内容（在样式中）设置为未显示的内容（例如`Transparent`）

```
 BorderBrush="#FFF19D47" 
```

或设置`BorderThickness`为`0`

# java - 提交和处理动态表格

> ID：12286185
> 
> 赞同：0
> 
> 时间：2012-09-05T16:49:11.677
> 
> 标签：java, javascript, jsp, dynamic

我有一个动态表格，如图所示。正如您在第二行中看到的那样 + 按钮允许添加更多行。这里有不同类型的电子邮件订阅。我需要能够保存此表单并知道什么类型的主题以及订阅了多少电子邮件以及每种类型的频率。人们可以添加许多行并可以删除任何随机的行。我如何在后端处理它？以下是表格的样例。

如您所见，我可以说生物学的 5 个子行，用户可以删除第 2 行并添加第 6 行。我如何根据表单计算出来并在后端删除它并添加新行？我正在使用 java(jsp) 和 mysql 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:16:00.607

我想说要么你想在客户端（jQuery，Prototype）做很多脚本，要么使用[GWT](https://developers.google.com/web-toolkit/)。在您的情况下，我会使用 GWT，因为它更容易在 Java 中开发，并且在这种简单的情况下不用担心浏览器的兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:22:38.500

我强烈建议使用 JSF 和[PrimeFaces 之](http://www.primefaces.org/)类的东西。有很好的例子，比如[单元格数据表编辑](http://www.primefaces.org/showcase-labs/ui/datatableEditing.jsf)。它还将为您提供许多[Ajax](http://www.primefaces.org/showcase-labs/ui/pprPartialTree.jsf)可能性，而无需编写任何 Javascript 代码。

如果您想远离 JSF，我也可以推荐[Playframework](http://www.playframework.org/)。它还附带了出色的示例，例如[由 JDBC 数据库支持的经典 CRUD 应用程序](http://www.playframework.org/documentation/2.0.3/Samples)。

# java-me - 用于发送/接收 SMS 的 j2me WMA 应用程序中的 SecurityException

> ID：12286186
> 
> 赞同：1
> 
> 时间：2012-09-05T16:49:13.217
> 
> 标签：java-me, sms, netbeans-7, securityexception, wma

我正在 j2me 中开发一个与无线消息 API (WMA) 一起使用的应用程序。应用程序任务是在两部手机之间发送和接收短信。当我在 NetBeans 模拟器中运行该应用程序时，它工作正常，但是当我在诺基亚 5200 手机上运行它时，我在手机上给出了这个异常：

```
Security java/lang/SecurituException Not allowed to open connection 
```

我的应用程序的 JAD 文件是：

```
MIDlet-1: Midlet, , hello.Midlet
MIDlet-Jar-Size: 36375
MIDlet-Jar-URL: SinaNetwork.jar
MIDlet-Name: SinaNetwork
MIDlet-Permissions: javax.microedition.io.Connector.sms, javax.wireless.messaging.sms.receive, javax.wireless.messaging.sms.send
MIDlet-Vendor: Vendor
MIDlet-Version: 1.0
MicroEdition-Configuration: CLDC-1.0
MicroEdition-Profile: MIDP-2.0 
```

应用程序代码也是：

```
Thread receive=new Thread(new Runnable() {
               MessageConnection ms;
            public void run() {
         //       System.out.print("*****************SALAM*******");

                    try {

                        ms= (MessageConnection) Connector.open("sms://:"+7000);
          //              System.out.println("Zoor mizanam Receive konam");
                        Date zaman=new Date();
                        long zamanTemp=zaman.getTime();

                        TextMessage tempmes=(TextMessage) ms.receive();
               //         System.out.print("SMS receive: "+tempmes.getPayloadText());
                        Midlet.messageReceived=true;
                        Midlet.ReceivedThatWeDontKnowIsRandom=tempmes.getPayloadText();
                    }
                    catch(SecurityException eds)
                    {
                        eds.printStackTrace();
                     //   System.out.print("");
                    }
                    catch (IOException ex) {
                        ex.printStackTrace();
                    }

            }
        });
         receive.start();

        Thread sendmesThread=new Thread(new Runnable() {

            public void run() {
                 try {

            MessageConnection mc=(MessageConnection) Connector.open("sms://"+Midlet.smsPhoneNumber+":"+5000); 

            TextMessage tm=(TextMessage) mc.newMessage(MessageConnection.TEXT_MESSAGE);

      //      System.out.print("PNF : "+phoneNumberField.getString());
            tm.setPayloadText(rd+"-"+phoneNumberField.getString());
            mc.send(tm);
         //   System.out.print("message sent from client on port 5000");
            mc.close();

        } 

            catch (IOException ex) {

            ex.printStackTrace();
        }

            }
        });

        sendmesThread.start(); 
```

我认为问题在于应用程序无法打开发送或接收短信的连接，但我不知道为什么，因为我在模拟器中没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:42:20.853

您的问题可能出在您尝试使用的端口上：7000 和 5000。我相信您希望 SMS 跳过用户收件箱并仅由应用程序处理，对吗？

在执行此操作之前，请确保您的应用程序可以从[http://www.developer.nokia.com/Community/Wiki/How_to_send_text_SMS_in_Java_ME发送带有以下代码的简单短信](http://www.developer.nokia.com/Community/Wiki/How_to_send_text_SMS_in_Java_ME)

```
public boolean sendSms(String number, String message){
  boolean result = true;
  try {
    //sets address to send message
    String addr = "sms://"+number;
    // opens connection
    MessageConnection conn = (MessageConnection) Connector.open(addr);
    // prepares text message
    TextMessage msg =
    (TextMessage)conn.newMessage(MessageConnection.TEXT_MESSAGE);
    //set text
    msg.setPayloadText(message);
    // send message
    conn.send(msg);
    conn.close();
  } catch (SecurityException se) {
    // probably the user has not allowed to send sms
    // you may want to handle this differently
  result = false;
  } catch (Exception e) {
    result = false;
  }
  return result;
} 
```

**评论后更新**

关于安全例外：手机可能只接受制造商和/或电信运营商/运营商的签名。在不同的手机上试试这个签名版本。

# linux - 解释这个命令： . ~/nvm/nvm.sh

> ID：12286187
> 
> 赞同：4
> 
> 时间：2012-09-05T16:49:15.100
> 
> 标签：linux, bash, nvm

我绝不是 Linux 上的新手，但我就是不明白为什么必须将 . 在这个命令前面：

```
. ~/nvm/nvm.sh 
```

对于那些知道的人来说，这是激活 nvm bash 脚本的方法（它允许在 NodeJS 世界中创建一个虚拟环境）。但是，如果一个人不把那个开始时间放在命令前面，那么事情就不会成功。据我所知，“。” 表示当前目录。然而，如果我这样做：

```
cd ~/nvm
nvm.sh 
```

或这个

```
~/nvm/nvm.sh 
```

不起作用。为什么？为什么一定要放“。” 然后是运行此命令之前的空格。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T16:50:16.403

> ```
> . ~/nvm/nvm.sh 
> ```

它要求解释器解释**当前进程中**的脚本。在`bash`它相当于：

```
source ~/nvm/nvm.sh 
```

如果要更改环境（变量等），则需要在当前进程中执行脚本。您可以查看更多详细信息`help .`

* * *

> ```
> ~/nvm/nvm.sh 
> ```

这实际上是**在一个新的 bash 进程中**运行脚本。它不能改变父进程的环境，例如它不能将变量导出到父进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:51:11.380

该`.`方法在当前 shell 中运行，因此您已设置或在脚本中设置的环境变量是共享的。我敢打赌，为脚本启动一个新的 shell 会将其置于无法运行的环境中。

# jquery - 使用 ScrollTo 和 LocalScroll 插件时突出显示菜单项

> ID：12286189
> 
> 赞同：0
> 
> 时间：2012-09-05T16:49:31.710
> 
> 标签：jquery, scrollto

我正在使用[ScrollTo](http://flesler.blogspot.co.uk/2007/10/jqueryscrollto.html)和[LocalScroll](http://flesler.blogspot.co.uk/2007/10/jquerylocalscroll-10.html)插件来应用漂亮的滚动来锚定[此站点](http://p3rpublicity.com/wordpress/)上的导航。

我想要的是在用户使用滚动条滚动时始终突出显示正确的菜单项。

[这个问题和答案](https://stackoverflow.com/questions/8393442/highlight-active-link-when-using-scrollto-based-on-current-view)我看过了，但我怕我无法弄清楚如何成功修改它！（我的导航使用`#about`, `#contact`etc 而不是`#section`, `#section2`etc，但我给每个部分取了一个`section1`, `section2`etc 的名称，就像示例中一样）

我还尝试了默认附带此功能的[One Page Navigation插件，但它与我的下拉菜单冲突:(](http://trevordavis.net/blog/jquery-one-page-navigation-plugin/)

感谢您抽时间阅读。希望你能帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:08:31.980

`#section1`如果您想在通过外部链接和内部访问时概括代码以执行相同的操作`<a href="#section1">Section 1</a>`，您可以监听`hashchange`事件。虽然它不会在滚动时更新，但如果您概括代码并使其可重用，我相信组合这些技术很容易。

试试[Ben Alman 的 jQuery hashchange 事件插件](http://benalman.com/projects/jquery-hashchange-plugin/)并添加一个调用相同函数的回调。您可能希望将它与[jQuery urlInternal 一起使用：轻松测试 URL 内部、外部或片段性](http://benalman.com/projects/jquery-urlinternal-plugin/)，也许还有[jQuery BBQ：返回按钮和查询库](http://benalman.com/projects/jquery-bbq-plugin/)，同样由 Ben Alman 编写。

这是一些代码，快速改编自一个项目，我以相同的方式使用它来激活选项卡行中的不同选项卡。（我使用了上面提到的所有三个插件，但我不记得是否所有这些插件都是这个片段所必需的。）

```
(function() {
    var menuLinksSelector = "#menu-main-menu a",
        menuLinkHighlightClass = "current";

    $.fn.extend({
        filterLinksToFragment: function(fragment) {
            var $this = $(this),
                $filtered = $this.filter("a:urlFragment").filter(function() {
                    var $this = $(this),
                        thisFragment = $.param.fragment($this.attr('href'));

                    return (thisFragment === fragment);
                });

            return $filtered;
        }
    });

    function highlightMenuItem(fragment) {
        var $menuLinks = $(menuLinksSelector),
            $selectedMenuLink = $menuLinks.filterLinksToFragment(fragment);

        $menuLinks.removeClass(menuLinkHighlightClass);
        $menuItem.addClass(menuLinkHighlightClass);
    }

    function highlightCurrentMenuItem() {
        var currentFragment = $.param.fragment();

        if (currentFragment !== undefined && currentFragment !== "") {
            highlightMenuItem(currentFragment);
        }
    }

    $window.on('hashchange', function() {
        // Activate the current URL's #part-anything link
        highlightCurrentMenuItem();
    });

    // Trigger the event (useful on page load).
    $window.hashchange();
}()); 
```

如果您使用此代码，则不需要使用`.click(...)`问题中的处理程序，除非可能取消单击事件，因为您有滚动插件。

# c# - 如何：使用 C# 和 XAML 在 Win 8 现代应用程序中使用参数的 HTTP GET 和 POST 请求

> ID：12286192
> 
> 赞同：2
> 
> 时间：2012-09-05T16:49:47.277
> 
> 标签：c#, httpwebrequest, microsoft-metro, windows-runtime, winrt-xaml

我在 C# .Net 控制台应用程序中使用下面的代码来发出 HTTP 获取和 POST 请求。知道如何在使用 C# 和 XAML 的 Win 8 现代应用程序中做到这一点？

```
System.Net.HttpWebRequest req = (HttpWebRequest)System.Net.WebRequest.Create(URI);
System.Net.WebResponse resp = req.GetResponse(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:55:16.173

您可以执行类似[MSDN Sample的操作](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)

# zend-framework - 如何在未找到的控制器/操作上使用自定义 404 页面

> ID：12286193
> 
> 赞同：3
> 
> 时间：2012-09-05T16:49:57.310
> 
> 标签：zend-framework, http-status-code-404

我写了一个自定义`404 Page Not Found`页面。但是我必须把它放在我的 Zend 应用程序结构中的什么地方以及如何显示它？

当找不到控制器时，我收到一个`Invalid controller specified (dsa)`错误。当找不到操作时，我会收到`Action "wqe" does not exist and was not trapped in __call()`错误消息。

很快，我不想要这些错误。

如何在渲染之前检测是否找不到页面？当我检测到它时，如何显示我的自定义错误页面。目前我从上面收到错误，但布局仍然显示。

我需要一些`.htaccess`规则吗？或者它可以用一些 Zend 的东西来完成。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T17:04:49.270

在您的错误控制器中

```
class ErrorController extends Zend_Controller_Action {

  public function errorAction() {
    $errors = $this->_getParam('error_handler');

    if (!$errors || !$errors instanceof ArrayObject) {
      $this->view->message = 'You have reached the error page';
      return;
    }

    switch ($errors->type) {
      case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ROUTE:
      case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_CONTROLLER:
      case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ACTION:
        // 404 error -- controller or action not found
        $this->getResponse()->setHttpResponseCode(404);
        $priority = Zend_Log::NOTICE;
        $this->view->error_code = $this->getResponse()->getHttpResponseCode();
        $this->view->message = "Page Not Found";
        $this->renderScript('error/error_404.phtml');
        break;
      default:
        // application error
        print_r($this->getResponse());
        $this->getResponse()->setHttpResponseCode(500);
        $priority = Zend_Log::CRIT;
        $this->view->error_code = $this->getResponse()->getHttpResponseCode();
        $this->view->message = 'Application error';
        if ($log = $this->getLog()) {
        $log->log($this->view->message, $priority, $errors->exception);
        $log->log('Request Parameters', $priority, $errors->request->getParams());
        $this->renderScript('error/error_500.phtml');
        }

    // conditionally display exceptions
        if ($this->getInvokeArg('displayExceptions') == true) {
                $this->view->exception = $errors->exception;
        }

        $this->view->request = $errors->request;
        $this->view->error_code = $this->getResponse()->getHttpResponseCode();
        $this->renderScript('error/error_500.phtml');
        break;
    }

    // Log exception, if logger available
    if ($log = $this->getLog()) {
      $log->log($this->view->message, $priority, $errors->exception);
      $log->log('Request Parameters', $priority, $errors->request->getParams());
    }

    // conditionally display exceptions
    if ($this->getInvokeArg('displayExceptions') == true) {
      $this->view->exception = $errors->exception;
    }

    $this->view->request = $errors->request;
  }

  public function getLog() {
    $bootstrap = $this->getInvokeArg('bootstrap');
    if (!$bootstrap->hasResource('Log')) {
      return false;
    }
    $log = $bootstrap->getResource('Log');
    return $log;
  }

} 
```

# mysql - Mysql内存设置

> ID：12286195
> 
> 赞同：1
> 
> 时间：2012-09-05T16:50:06.940
> 
> 标签：mysql, memory-management

我有一个关于 mysql 内存设置的问题。我目前正在试验非常大的桌子。当我对它们运行复杂的查询`mysql`时，内存不足。

mysql 中允许一次处理更大数据的适当设置是什么？我该如何改变它？

有什么资料吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:44:39.203

如果您是新手，那么您需要付出很多努力才能跟上进度。MySQL 并不像调整 Oracle 那样糟糕，但它确实需要一些工作。关于这些坏消息我很遗憾。我建议您自己获取一份高性能 MySQL 的副本，并查看有关 MySQL 分析的部分，尤其是第 6 章有关优化服务器设置的内容。

正如同事们指出的那样，如果没有细节，就很难提出任何建议。

你也可以看看下面的谷歌视频 (http://www.youtube.com/watch?v=UcQVeO1JxSM) 它是旧的但概念是存在的。

祝你好运

PS - 另请查看[http://dev.mysql.com/doc/refman/4.1/en/option-files.html](http://dev.mysql.com/doc/refman/4.1/en/option-files.html)以获取有关选项文件 (cnf) 的帮助

# asp.net - IE 文本大小增加导致 HTML 元素重叠。我如何解决它？

> ID：12286202
> 
> 赞同：0
> 
> 时间：2012-09-05T16:50:27.677
> 
> 标签：asp.net, html

我遇到了[这个问题。](http://i.imgur.com/hDLGl.jpg)每当用户通过查看->文本来增加 IE9 中的文本大小时。我不是网页设计师，所以我对 CSS 的了解有限，我继承了这个对我来说看起来很乱的项目。

这是标记的 aspx 页面：

```
 <body leftMargin="0" topMargin="0" MS_POSITIONING="GridLayout">
    <form id="Form1" method="post" runat="server">
        <CC1:FOCUSMANAGER id="FocusManager1" runat="server" DefaultColor="blue</cc1:FocusManager"></CC1:FOCUSMANAGER>
        <div style="Z-INDEX: 1; LEFT: 2px; VISIBILITY: visible; WIDTH: 358px; POSITION: absolute; TOP: 16px; HEIGHT: 212px">
            <uc1:itemsearch id="ItemSearch" runat="server"></uc1:itemsearch>
        </div>
        <div style="Z-INDEX: 1; LEFT: 380px; VISIBILITY: visible; WIDTH: 316px; POSITION: absolute; TOP: 16px; HEIGHT: 200px">
            <uc1:membersearch id="MemberSearch" runat="server"></uc1:membersearch>
        </div>
        <div style="Z-INDEX: 1; LEFT: 2px; VISIBILITY: visible; WIDTH: 690px; POSITION: absolute; TOP: 228px; HEIGHT: 550px"
            id="DIV1" runat="server"><uc1:itemgrid id="ItemGrid" runat="server"></uc1:itemgrid></div>
        <div style="Z-INDEX: 1; LEFT: 2px; VISIBILITY: visible; WIDTH: 690px; POSITION: absolute; TOP: 252px; HEIGHT: 513px"
            id="DIV2" runat="server"><uc1:acctlookupform id="AcctLookupForm" runat="server"></uc1:acctlookupform></div>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:20:42.133

它的行为符合预期。增加文本大小时，它不会增加容器的大小，因为它们是在`px`.

选项 1：使用一个 IE 版本，该版本具有一个`magnify`也可以扩大容器的 IE。不是 IE 用户，我无法提供更多帮助。

`em`选项 2：在或中指定尺寸`%`，对于大多数情况，这应该是唯一使用的度量单位。图像尺寸可能为`px`.

请注意：这是一个 HTML 问题，因此最好显示呈现的 HTML，而不是生成它的脚本。

# c# - 如何在 ODP.NET 中传递比在 oracle 查询中使用更多的参数而不会出现异常？

> ID：12286204
> 
> 赞同：0
> 
> 时间：2012-09-05T16:50:36.497
> 
> 标签：c#, sql, oracle, ado.net, odp.net

我刚刚遇到了这个令人不安的错误。我尝试在 c# 中使用 ODP.NET 执行一个简单的 sql 查询。我按名称传递参数（设置命令的 BindByName=true） 查询使用一个名为“tid”的参数。当我仅将此参数添加到命令的参数集合中时，一切正常。如果我添加另一个未在查询中使用的参数，则查询会崩溃并显示此错误消息

```
ORA-01036: illegal variable name/number 
```

代码看起来像这样

```
using( var conn = new OracleConnection([some connection string]) )
{
   conn.Open();
   using( var comm = conn.CreateCommand() )
   {
      // using only the :tid parameter.
      comm.CommandText = "SELECT column FROM Table T WHERE T.Id = :tid";

      comm.CommandType = CommandType.Text;
      comm.BindByName = true;

      comm.Parameters.Add("tid", 500000207);

      // This extra parameter causes an exception when the query is executed.
      // If I remove it everything runs smoothly
      comm.Parameters.Add("param2", "ValueOfSecondParam");

      comm.ExecuteNonQuery();
   }
} 
```

**如何传递比查询中实际使用的参数更多的参数，而不会出现异常？**（假设我动态创建查询，但我不控制要传递的参数，所以我必须首先传递所有参数）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T17:17:22.343

想象一下，您不是将参数提供给 SQL 查询，而是将零件交给试图组装汽车的机械师。假设您正在扮演 Bud Abbott 的那个角色，并且数据库/机制是 Lou Costello：

```
Abbott:   Alright, Lou, let's get busy putting this car together.  The owner's
          in a big rush.
Costello: Sounds good to me.
Abbott:   Here's the steering wheel.
Costello: Thank you very much.
A:  And here's the engine.
C:  (Ooof!) Oh, thank you SO very much!
A:  And now the first wheel.
C:  That's great.
A:  And now the second wheel.
C:  Looks all nice and shiny with all the chrome, eh?
A:  That's just lovely, Lou.  Oh, here's the third wheel.
C:  I'll just put in back here, behind the driver.
A:  Fine, fine.  And here's the fourth wheel...
C:  Looks great!  I think we're...
A:  And here's the fifth wheel...
C:  Uh, hold on here a minute...
A:  And here's the sixth wheel...
C:  Hang on, Bud, I think we've got a little problem here...
A:  And now the seventh wheel...
C:  Seven wheels?  Seven wheels?!?  WHADDYA MEAN, SEVEN WHEELS!?!?!?
A:  Oh, stop complaining, will you?  Just put it on...
C:  But...
A:  Hurry up now...
C:  But...
A:  ...because here's the eighth wheel.
C:  HEY, ABBBBBOTTTTTTTTTT!!!!!!! 
```

因此，正如您所看到的，提供更多的轮子（或参数）并不是一件很有意义的事情——尽管它*可以*制作一个很棒的喜剧套路。:-)

分享和享受。

# ios - Facebook FQL 获取朋友发布的所有帖子并使用 App

> ID：12286207
> 
> 赞同：3
> 
> 时间：2012-09-05T16:50:46.297
> 
> 标签：ios, facebook-fql

我正在尝试获取我的朋友使用某个`app_id`. 我尝试了这样的多查询 FQL：

```
{
"friends":"SELECT uid2 FROM friend WHERE uid1 = MY_USER_ID",
"posts":"SELECT post_id FROM stream WHERE source_id IN (SELECT uid2 FROM #friends) AND app_id= APP_ID"
} 
```

这个 FQL 没有返回任何内容，尽管我的一个朋友使用该应用发了帖子（我验证了第一个 FQL`#friends`确实返回了发帖的朋友）。我用一个只有一个朋友的测试帐户进行了尝试，并且成功了。

有什么理由这可能不适用于有很多朋友的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:24:38.177

将它们组合成 1 个嵌套查询怎么样？

```
SELECT post_id FROM stream WHERE source_id IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND app_id = APP_ID 
```

如果这不起作用，则可能与您的朋友如何为他们的朋友的应用程序可以使用的帖子/活动配置隐私设置有关。

# html - 在 HTML 中对齐图像

> ID：12286210
> 
> 赞同：0
> 
> 时间：2012-09-05T16:50:57.110
> 
> 标签：html, css, image, hyperlink, alignment

我在 css 中有一个图像，但我想添加一个指向该图像的链接，所以我将它从 css 中拉出并使用锚标记直接插入到 HTML 中。

我无法将图像与 div 类的左上角对齐。

```
<div class="logoHeader" style="height:125px; width:900px" >
    <a href="http://www.abc123.com/">
        <img src="images/logo.jpg" alt="" style="position:relative;" />
    </a>
</div> 
```

我试过添加

```
style="padding-top:0px; padding-left:0px;" 
```

但图像是浮动的，而不是在左上角。

关于如何通过 HTML 使图像与左上角对齐的任何想法？

div标签css是：

```
.logoHeader {padding:45px 20px 0px 20px;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:55:30.950

**填充**导致它**浮动**，它符合您设置的规则（边距为 45px），如果您希望它位于左上角：

有关示例，请参见[http://jsfiddle.net/9KJA7/](http://jsfiddle.net/9KJA7/)

```
/* Ignore */
.logoHeader {background-color: red}
img {height: 50px; width: 50px; background-color: green}

/* Your code */
.logoHeader {padding:45px 20px 0px 20px; position: relative}
​img {position:absolute;top:0px;left:0px;}​​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:54:00.590

.logoHeader 上设置的填充将防止图像到达左上角。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T16:59:24.640

我想你正在寻找；

```
position: absolute;
top: 0;
left:0; 
```

***[这](http://jsfiddle.net/blasteralfred/pZZ5L/)***是现场演示。还是你想要***[这个](http://jsfiddle.net/blasteralfred/pZZ5L/1/)***？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T16:54:42.567

您是否希望图像始终保持**固定**？在这种情况下，删除填充并使用：

```
.logoHeader {position: fixed; top: 0; left: 0; z-index: 5; padding: 0;} 
```

### 小提琴：http: [//jsfiddle.net/3u8k6/](http://jsfiddle.net/3u8k6/)

检查您的代码：http: [//jsfiddle.net/3u8k6/1/](http://jsfiddle.net/3u8k6/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T16:56:05.890

您可以尝试在 img 标签上使用绝对位置，如下所示：

```
<div class="logoHeader" style="height:125px; width:900px; position: relative" ><a href="http://www.abc123.com/"><img src="images/logo.jpg" alt="" style="position:absolute; top:0px; left:0px;" /></a></div> 
```

要在图像中使用绝对位置，您的 div 必须是相对位置。我希望这有帮助。

# hibernate - Postgres休眠序列值与插入的数据id不匹配

> ID：12286218
> 
> 赞同：0
> 
> 时间：2012-09-05T16:51:39.413
> 
> 标签：hibernate, postgresql

我注意到我的 PostgreSQL 数据库中的 hibernate_sequence 很有趣。到目前为止，序列（我的数据库中的所有表都使用）一直递增 1。然而，情况不再如此。

目前，hibernate_sequence 显示的值为 43270。如果我`SELECT nextval('hibernate_sequence');`会正确报告`43271`.

但是，当我将数据插入表中时，序列 ID 现在是`1872053`！

对于我的生活，我不知道为什么，但它影响了我运行的一些数据库脚本，这些脚本每晚在不同环境之间传输数据。

我希望它与以下文章没有任何关系，该文章声明`@GeneratedValue(strategy=GenerationType.SEQUENCE)`“使用 HiLo 策略，默认情况下以 50 个块分配 ID”。 [Hibernate使用PostgreSQL序列不影响序列表](https://stackoverflow.com/questions/4288740/hibernate-use-of-postgresql-sequence-does-not-affect-sequence-table)

如果是这样的话，序列ID会有这么大的跳跃吗？从`43271`到`1872053`?

这几乎就好像与 hibernate_sequence 有“断开连接”。当我插入第二个事件时，ID 为 1872053，但 hibernate_sequence 值不再变化（它仍将保持在 43421）。

还有其他可能的解释吗？

谢谢！

* * *

代码示例：

```
@Id
@GeneratedValue(strategy=GenerationType.SEQUENCE)
private Integer id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:11:35.800

我相信我正在经历以下帖子中描述的内容，这也与 HiLo 算法有关：[休眠预言机序列产生大间隙](https://stackoverflow.com/questions/5346147/hibernate-oracle-sequence-produces-large-gap)

# objective-c - popviewcontroller 什么都不做，不起作用

> ID：12286219
> 
> 赞同：0
> 
> 时间：2012-09-05T16:51:46.567
> 
> 标签：objective-c, ios5, uipopovercontroller, back-button, xcode4.4

我正在尝试使用 popoverviewcontroller 返回 ViewController，但没有任何反应。
首先，我使用以下代码在 AppDelegate 中加载第一个 ViewController：

```
UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:self.welcomeMenu];
nav.navigationBarHidden = YES;
self.window.rootViewController = nav;
nav = nil; 
```

导航栏是隐藏的，因为我需要它
在这个 ViewController 中，我正在显示一个带有按钮的菜单，然后，为了显示另一个 ViewController，我正在使用以下代码：

```
SecondViewController *secView = [[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:nil];

[UIView  beginAnimations:nil context:NULL];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationDuration:0.75];
[self.navigationController pushViewController:secView animated:NO];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.navigationController.view cache:NO];
[UIView commitAnimations];
secView = nil; 
```

并且 SecondViewController 加载（但旋转不起作用）......
我的 SecondViewController 在代码中添加了一个 SplitViewController （左边的表有一个 NavigationController，右边的另一个表有另一个 NavigationController）
然后，在 SecondViewController 中，我正在使用以下代码手动添加一个返回按钮：

```
[self.navigationController popViewControllerAnimated:NO]; 
```

但是什么也没发生...当我打印 self.navigationController 时，输出为（null），所以我想这是问题所在，但是为什么我的 self.navigationController 为空？我需要做什么才能正确弹出？
如果我不在 AppDelegate 代码中隐藏导航栏，则自动出现的后退按钮可以正常工作，但是当我想手动执行此操作时，将无法正常工作...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:12:18.367

您不能从您的 SecondViewController 加载拆分视图控制器。

请参阅[拆分视图控制器](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/SplitViewControllers.html)：

> 拆分视图控制器必须始终是您创建的任何界面的根。换句话说，您必须始终将 UISplitViewController 对象中的视图安装为应用程序窗口的根视图。然后，拆分视图界面的窗格可能包含导航控制器、选项卡栏控制器或实现界面所需的任何其他类型的视图控制器。拆分视图控制器不能以模态方式呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:00:14.830

您从未将 SecondViewController 添加到导航控制器的 viewControllers，这就是 self.navigationController 记录 null 的原因，因此只需使用新控制器更新 viewControllers 数组。

# c++ - 如果未实现功能，则在链接时启用错误

> ID：12286223
> 
> 赞同：2
> 
> 时间：2012-09-05T16:52:01.997
> 
> 标签：c++, linker, g++

我注意到在使用 G++ 链接项目时，如果有已声明但未实现的函数，则没有错误，除非我尝试调用它们。

**Q1：**如果声明了一个函数但没有实现，是否可以启用错误（或至少警告）？

**Q2：**为什么会有这种行为？

（**注意：**我正在使用`G++ 4.7.0`，`ld 2.22`如果那是 gcc 使用的链接器，来自`mingw`包）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T16:55:37.013

A2：一个实体，例如具有外部链接的非内联函数，在程序中可以有零个或一个定义。*如果它被实际使用（严格地odr-used*） - 例如被调用，则只需要一个定义。如果 g++ 对未使用的未定义函数发出错误，则会出错。

A1：所以不可能（以一种一致的方式）强制这是一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:05:48.217

编写单元测试。如果一个函数不存在，测试它的代码将会失败。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T16:57:40.773

如果仅声明函数，则无法在单个编译单元中（在编译时）出现错误。因为该函数可以在不同的编译单元中定义。

您可以（假设在编译器中启用了插件的 Linux 系统）编写一个 GCC 插件，或者更好的是，一个[MELT](http://gcc-melt.org/)扩展（MELT 是一种用于扩展 GCC 的高级域特定语言），例如，它将创建一个指向的指针数组每个声明的函数（因此，如果未定义该函数，您将在链接时收到错误消息）。您还可以创建一个 MELT 扩展，对每个未定义但已声明的函数发出警告。

此外，有时有充分的理由声明但不定义函数，例如，当它应该由插件或其他对象或库提供时。

此外，头文件通常声明函数但不定义它们。这些函数通常由库在链接时提供。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T18:23:16.753

您可以通过将链接器设为虚拟来使链接器为未引用、未定义的成员函数生成错误。显然这有其他含义，所以我建议为此使用预处理器。就像是：

```
#ifdef TEST_COMPLETE_INTERFACE
#define REQUIRE_DEF virtual
#else
#define REQUIRE_DEF
#endif

class myClass
{
public:
    REQUIRE_DEF void someMethod();
}; 
```

您可以定期检查所有内容是否已`TEST_COMPLETE_INTERFACE`定义。这不适用于静态方法或自由函数。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-06-01T13:39:40.127

有一个 GCC 特定属性：

```
void f() __attribute__((error("not implemented")));

int main() {
    f();
} 
```

给

```
error: call to 'f' declared with attribute error: not implemented 
```

此属性也可用于类方法。至少从 GCC 4.4 开始支持。

# c# - C# 和 ReSharper：检查对象的类型

> ID：12286226
> 
> 赞同：3
> 
> 时间：2012-09-05T16:52:10.217
> 
> 标签：c#, interface, resharper, instanceof, implements

我有一个实现接口的类，如下所示：

```
public class Database : IStore 
```

在另一个类中，我有以下成员变量；并在运行时动态分配一个 Database 实例：

```
private IStore store; 
```

以及对存储变量进行类型检查的方法，如下所示：

```
if (store is Database) 
```

ReSharper 声称该条件将始终为假。此外，它声称“存储为数据库”将始终为空。这是为什么？检查此接口类型成员持有的运行时对象类型的最佳方法是什么？是否可能只是说这“可能不是真的”总是或真的“永远不会”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T16:54:58.700

这听起来像是 R# 被混淆了，*或者*您有两种不同的`IStore`类型，并且您正在针对一种进行测试，而实际上该类实现了不同的类型。（当然也可以是两种不同`Database`的类型。可能性是等价的。）

你能提供一个简短但完整的例子来说明这个问题吗？如果您将鼠标悬停在带有/运算符`IStore`的代码中，它是否会显示您期望的完全限定类型名称？如果你运行代码，*它*会进入正文吗？`Database``as``is`*`if`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T16:56:51.480

ReSharper 显然是错误的；问题是为什么。它可能会错误地解析类型。

你的项目现在编译了吗？分析不正确的代码很困难，而且我们的代码在我们编辑它时经常处于不正确的状态。我最近发现了几个 ReSharper 给出类似错误类型错误的案例（例如“无法将字符串隐式转换为对象”）。在我得到解决方案中的所有项目进行编译后，它就消失了。

`store`另一种可能性：您有一个隐藏类字段的局部变量`store`。要检查这一点，您可以将代码更改为

```
if (this.store is Database) 
```

您还可以尝试使用 ReSharper 的导航转到`store`和 of的声明`Database`，看看它是否会将您带到预期的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T16:56:47.137

我的猜测是，您在某个地方还有另一个名为 Database 的类。将鼠标悬停在“is Database”上并确保它是正确的命名空间。如果不是，则明确使用所需数据库的整个命名空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T17:02:47.657

在这段代码中，Resharper 并没有说条件总是错误的。

```
public interface IStore
{

}

public class Database:IStore
{

}

public class TestClass
{
    private readonly IStore _store;

    public TestClass(IStore store)
    {
        _store = store;
    }

    public void SomeMethod()
    {
        if(_store is Database)
            return;
        throw new NotImplementedException();
    }
} 
```*

# ios - 当用户单击屏幕上的任何区域时退出键盘

> ID：12286227
> 
> 赞同：2
> 
> 时间：2012-09-05T16:52:15.707
> 
> 标签：ios, uisearchbar

绘制的框架`UISearchBar`如下：

```
UISearchBar *sBar=[[UISearchBar alloc]initWithFrame:CGRectMake(0, 0, 280, 40)]; 
```

当用户点击**任何**区域而不是上面定义的区域时，我只想关闭键盘。

是否有任何`UISearchBar`委托方法可以这样做，或者简单的方法。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:56:09.320

您需要处理窗口中其他视图的点击/触摸事件，并调用：

```
if (sBar.isFirstResponder)
    [sBar resignFirstResponder]; 
```

sBar 需要是你的 UIViewController 的一个属性

要处理触摸事件，请将这些添加到您的 UIViewController：

```
 - (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
    {
    }

    - (void) touchesMoved:(NESet *)touches withEvent:(UIEvent *)event
    {
    }

    - (void) touchesEnded:(NESet *)touches withEvent:(UIEvent *)event
    {
    }

- (void) touchesCancelled:(NESet *)touches withEvent:(UIEvent *)event
    {
    } 
```

并至少从 touchesBegan 方法调用 [sBar resignFirstResponder]。

# php - simplexml_load_string 命名空间的正确参数

> ID：12286229
> 
> 赞同：2
> 
> 时间：2012-09-05T16:52:27.963
> 
> 标签：php, xml

我目前正在尝试从谷歌联系人 api 中提取信息。使用库中提供的示例代码：

```
$response = json_encode(simplexml_load_string($val->getResponseBody())); 
$result = json_decode($response, true); 
```

该`simplexml_load_string`功能不会在命名空间上使用。看着 php.net 以及如何添加参数我有点迷茫。

```
$xml = json_encode(simplexml_load_string(null, $val->getResponseBody(), null, 'gd', true)); 
```

尝试从我的 xml 字符串中提取“gd”命名空间的事件我收到一个错误。有没有人可以提供帮助？

输出错误是这样的：

> simplexml_load_string() 期望参数 2 是从 SimpleXMLElement 派生的类名

但除了这个错误之外，它还正确打印了我想要的信息......我很困惑。

我需要提取的信息示例：

```
<gd:extendedProperty xmlns:gs='http://schemas.google_apps_sync.com' name='google_apps_sync'>
    <gs:em_odn1>awalker@xxxxx.com</gs:em_odn1>
    <gs:em_dn1>First Name Last Name</gs:em_dn1>
    <gs:em_ad1>awalker@xxxxxxxxx.com</gs:em_ad1>
    <gs:em_t1>SMTP</gs:em_t1>
    <gs:f_c>32791</gs:f_c>
    <gs:f>Last, First</gs:f>
  </gd:extendedProperty> 
```

编辑

```
$xmlResponse = simplexml_load_string($val->getResponseBody(), null, 0, 'gd', true);
$xmlResponse->registerXPATHNamespace('gd', 'http://schemas.google_apps_sync.com');
$xmlResponse->registerXPATHNamespace('gs', 'http://schemas.google_apps_sync.com/contact/2008'); 
```

上面的代码允许我访问我需要的命名空间，但一次只能访问一个......例如：

```
$email = json_encode($xmlResponse->xpath('//gd:email'), true));
$postal = json_encode($xmlResponse->xpath('//gd:postalAddress'), true);
$name = json_encode($xmlResponse->xpath('//gs:em_dn1'), true); 
```

`$xmlResponse`如果我打印这些变量，我会得到我需要的相应信息，但是在我启动了我想要的命名空间之后，有没有办法让我访问原始变量？

前任：

```
json_decode($xmlResponse, true); 
```

不会给我定义的命名空间的 xml 信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-03T16:25:04.163

您可以使用子项获取具有名称空间的元素。例如：

```
<people xmlns:ns="http://something.com/ns">
<person><ns:name>Amy</ns:name></person>
<person><ns:name>Bill</ns:name></person>
</people>

$xml = simplexml_load_string($string);
echo $xml->person[0]->children("http://something.com/ns")->name; // will echo Amy 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:55:03.843

这是手册中所说的

[PHP.NET](http://us3.php.net/manual/en/function.simplexml-load-string.php)

```
simplexml_load_file ( string $filename [, string $class_name = "SimpleXMLElement" [, int $options = 0 [, string $ns = "" [, bool $is_prefix = false ]]]] )
$xml = simplexml_load_string($val->getResponseBody(),null, 0, 'gd', true);
$xml =json_encode($xml); 
```

**更新**

您没有正确使用命名空间，请显示您的所有 xml 结构。

在您展示的示例中，`gd`未定义命名空间。你需要这样的东西才能让它工作：

```
<item xmlns:gd='http://schemas.google_apps_sync.com'> 
   <gd:extendedProperty xmlns:gs='http://schemas.google_apps_sync.com'..>
   ...
   </gd:extendedProperty>
</item> 
```

现在你可以使用

```
$xml = simplexml_load_string($val->getResponseBody(),null, 0, 'gd', true); 
```

当你想访问`gs`命名空间时，你可以使用

```
$xml->registerXPathNamespace("gs", 'http://schemas.google_apps_sync.com'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T03:41:50.497

经过数小时梳理有关 stackoverflow 的信息并且在 google 上相对未记录的信息后，我发现...如果您添加`?alt=json`到联系人 api uri 的末尾，您将收到 JSON 格式的响应！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-27T15:16:35.157

这会从所有命名空间加载所有数据：

```
function xmlToArray($xml, $options = array()) {
    $defaults = array(
        'namespaceSeparator' => ':',//you may want this to be something other than a colon
        'attributePrefix' => '@',   //to distinguish between attributes and nodes with the same name
        'alwaysArray' => array(),   //array of xml tag names which should always become arrays
        'autoArray' => true,        //only create arrays for tags which appear more than once
        'textContent' => '$',       //key used for the text content of elements
        'autoText' => true,         //skip textContent key if node has no attributes or child nodes
        'keySearch' => false,       //optional search and replace on tag and attribute names
        'keyReplace' => false       //replace values for above search values (as passed to str_replace())
    );
    $options = array_merge($defaults, $options);
    $namespaces = $xml->getDocNamespaces();
    $namespaces[''] = null; //add base (empty) namespace
    //get attributes from all namespaces
    $attributesArray = array();
    foreach ($namespaces as $prefix => $namespace) {
        foreach ($xml->attributes($namespace) as $attributeName => $attribute) {
            //replace characters in attribute name
            if ($options['keySearch']) $attributeName =
                   str_replace($options['keySearch'], $options['keyReplace'], $attributeName);
            $attributeKey = $options['attributePrefix']
                    . ($prefix ? $prefix . $options['namespaceSeparator'] : '')
                    . $attributeName;
            $attributesArray[$attributeKey] = (string)$attribute;

        }

    }

    //get child nodes from all namespaces

    $tagsArray = array();

    foreach ($namespaces as $prefix => $namespace) {

        foreach ($xml->children($namespace) as $childXml) {

            //recurse into child nodes

            $childArray = xmlToArray($childXml, $options);

            list($childTagName, $childProperties) = each($childArray);

            //replace characters in tag name

            if ($options['keySearch']) $childTagName =

                    str_replace($options['keySearch'], $options['keyReplace'], $childTagName);

            //add namespace prefix, if any

            if ($prefix) $childTagName = $prefix . $options['namespaceSeparator'] . $childTagName;

            if (!isset($tagsArray[$childTagName])) {

                //only entry with this key

                //test if tags of this type should always be arrays, no matter the element count

                $tagsArray[$childTagName] =

                        in_array($childTagName, $options['alwaysArray']) || !$options['autoArray']

                        ? array($childProperties) : $childProperties;

            } elseif (

                is_array($tagsArray[$childTagName]) && array_keys($tagsArray[$childTagName])

                === range(0, count($tagsArray[$childTagName]) - 1)

            ) {

                //key already exists and is integer indexed array

                $tagsArray[$childTagName][] = $childProperties;

            } else {

                //key exists so convert to integer indexed array with previous value in position 0

                $tagsArray[$childTagName] = array($tagsArray[$childTagName], $childProperties);

            }

        }

    }

    //get text content of node

    $textContentArray = array();

    $plainText = trim((string)$xml);

    if ($plainText !== '') $textContentArray[$options['textContent']] = $plainText;

    //stick it all together

    $propertiesArray = !$options['autoText'] || $attributesArray || $tagsArray || ($plainText === '')

            ? array_merge($attributesArray, $tagsArray, $textContentArray) : $plainText;

    //return node as array
    return array(
        $xml->getName() => $propertiesArray
    );
} 
```

# python - python从for循环中更新外部传递的值

> ID：12286231
> 
> 赞同：1
> 
> 时间：2012-09-05T16:52:34.750
> 
> 标签：python, reference, for-loop, immutability

我的问题是[如何通过引用传递变量？](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)- 但是我仍然找不到解决下图问题的*简单*方法：如何从 for 循环中更改外部字符串变量的值？

```
str1 = 'before'
str2 = 'before'

for i in str1,str2:
    print "%s" % (i)
    i = "after"

for i in str1,str2:
    print "%s" % (i) 
```

感谢以下有用的回复，但它们并没有真正帮助解决我的具体问题，下面的代码不太通用，但更好地反映了我的用例：

```
import feedparser
d = feedparser.parse('http://feeds.feedburner.com/FrontlineAudiocastPbs?format=xml')
name = d.feed.title[:127]
description = d.feed.subtitle[:255]

strs = [name,description]
for i, s in enumerate(strs):
    try:
      strs[i] = unicode(strs[i])
    except:
      strs[i] = "Invalid unicode detected!"

for s in name,description:
  print s 
```

您可以看到两个原始字符串变量没有被更新。for 循环旨在检测和处理格式错误的字符串，例如分配给“描述”的字符串。因此，任何“相关”的建议都会受到赞赏。

我喜欢下面列表理解切片分配方法的*优雅，理想情况下会使用该技术。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:14:26.587

制作一个字符串列表，而不是将它们作为单独的变量处理，然后您可以使用以下命令遍历它们`enumerate`：

```
strs = ['before', 'before']
for i, s in enumerate(strs):
    print s
    strs[i] = "after"

print strs 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T17:02:30.227

一种解决方法是以不同的方式构造数据，例如使用：

```
d = {'str1': 'before', 'str2': 'before'}
for i in d:
    print d[i]
    d[i] = "after" 
```

*重要的是这个变量是可变的（如您的链接中所述）。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T17:02:09.460

```
strs = ['before', 'before']
strs[:] = ['after' for s in strs] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-05T17:05:45.153

```
str1 = 'before'
str2 = 'before'

import sys
currentobject = sys.modules[__name__]

for i in 'str1', 'str2':
    setattr(currentobject, i, 'after')

for i in str1,str2:
    print "%s" % (i) 
```

# android - Eclipse中的Android测试项目根目录问题

> ID：12286234
> 
> 赞同：7
> 
> 时间：2012-09-05T16:52:39.453
> 
> 标签：android, eclipse, adt, eclipse-juno

根据[这个页面](http://developer.android.com/tools/testing/testing_android.html)，我应该在测试所针对的项目的 \tests 目录中创建我的测试项目。但是，当我在“新建 Android 测试项目”向导中取消选中“使用默认位置”并手动将位置设置为主项目中的 \tests 目录时，会在主项目中创建一个新目录，该目录是测试的名称项目末尾附加了 -test，\tests 目录保持为空。

我正在使用 Eclipse 4.2 Juno 和截至 2012 年 9 月 5 日的最新版本的 Android SDK，我相信它是 v20。我假设这是 Eclipse Juno 或 Android SDK v20 特有的问题，因为[这篇文章](https://stackoverflow.com/questions/6564681/android-test-project-directory-structure-when-using-eclipse)表明它适用于 Eclipse 和 Android SDK v14 的 3.5 和 3.6。如果相关的话，我也在使用 Windows 7 Ultimate x64。

我希望收到关于 Eclipse 为何创建上述目录的解释或解决方法以在 \tests 目录中创建我的测试项目。如果这些都不可能，至少在评论中确认您可以重新创建问题，所以我知道我不仅仅是无能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T17:41:23.980

1.  按照问题中的描述创建 Android 测试项目
2.  从工作区中删除测试项目
3.  将作为项目根目录创建的文件系统目录重命名为“tests”
4.  将测试项目重新导入工作区

我不知道为什么在发布我的问题之前我没有想到这一点，但希望这能帮助那些像我这样也缺乏直接掌握显而易见的人的人。

# android - 在 ExpandableListView 中为子项使用两种不同的布局

> ID：12286235
> 
> 赞同：10
> 
> 时间：2012-09-05T16:52:40.890
> 
> 标签：android, expandablelistview

我正在尝试`ExpandableListView`根据项目类型使用两种不同的布局。这时候我做了基本的功能，除了一件事：在 中选择一个组后`listview`，子项的文本显示错误（不同项的文本混合）

我的`adapter`源代码如下：

```
SimpleExpandableListAdapter adapter = new SimpleExpandableListAdapter(
            this,
            groupData,
            com.oleg.mart.foreign.R.layout.group_row,
            groupFrom,
            new int[] { com.oleg.mart.foreign.R.id.Group },
            childData,
            R.layout.simple_list_item_1,
            childFrom,
            childTo)
{
    @Override
    public int getChildTypeCount() {
        return 2;
    }

    /*@Override
    public int getChildrenCount(int groupPosition)
    {
        return childData.get(groupPosition).size();
    } */

    @Override
    public int getChildType(int groupPosition, int childPosition)
    {
        int result = 0;
        if (childPosition == getChildrenCount(groupPosition) - 1)
            result = 1;

        return result;
    }

    @Override
    public View getChildView (
            int groupPosition, int childPosition, 
            boolean isLastChild, 
            View convertView, ViewGroup parent)
    {
        if (convertView == null) {
            TextView textView = null;
            LayoutInflater inflater = (LayoutInflater)getSystemService(getBaseContext().LAYOUT_INFLATER_SERVICE);
            int itemType = getChildType(groupPosition,childPosition);
            String myText = childData.get(groupPosition).get(childPosition).get("chapter");

            switch (itemType) {
                case 0:
                    convertView = inflater.inflate(com.oleg.mart.foreign.R.layout.child_row_notlast, null);
                    textView = (TextView)convertView.findViewById(com.oleg.mart.foreign.R.id.NChild);
                    textView.setPadding(30,20,30,20);
                    textView.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 15);
                    textView.setText(Html.fromHtml(myText));
                    break;
                case 1:
                    convertView = inflater.inflate(com.oleg.mart.foreign.R.layout.child_row, null);
                    textView = (TextView)convertView.findViewById(com.oleg.mart.foreign.R.id.Child);
                    textView.setPadding(30,20,30,20);
                    textView.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 15);
                    textView.setText(Html.fromHtml(myText));
                    break;
            }
        }
        return convertView;
    }
}; 
```

如您所见，我正在尝试在最后一个子项上设置不同的样式。有什么问题？

**正确的`getChildView`方法：**

```
TextView textView = null;
String myText = null;
myText = childData.get(groupPosition).get(childPosition).get("chapter");

if (convertView == null) {
    LayoutInflater inflater = (LayoutInflater)getSystemService(getBaseContext().LAYOUT_INFLATER_SERVICE);
    int itemType = getChildType(groupPosition,childPosition);

    switch (itemType) {
        case 0:
            convertView = inflater.inflate(com.oleg.mart.foreign.R.layout.child_row_notlast, null);
            break;
        case 1:
            convertView = inflater.inflate(com.oleg.mart.foreign.R.layout.child_row, null);
            break;
    }
}

textView = (TextView)convertView.findViewById(com.oleg.mart.foreign.R.id.NChild);
textView.setPadding(30,20,30,20);
textView.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 15);
textView.setText(Html.fromHtml(myText));

return convertView; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T17:14:06.500

我很确定当你的 getChildView 方法上的 convertView != null 时你没有返回好的子值。尝试根据您的情况设置您的值，如下所示：

```
TextView textView = null;

if (convertView == null) {
     LayoutInflater inflater = (LayoutInflater)getSystemService(getBaseContext().LAYOUT_INFLATER_SERVICE);
     int itemType = getChildType(groupPosition,childPosition);
     String myText = childData.get(groupPosition).get(childPosition).get("chapter");

     switch (itemType) {
         case 0:
             convertView = inflater.inflate(com.oleg.mart.foreign.R.layout.child_row_notlast, null);
             break;
         case 1:
             convertView = inflater.inflate(com.oleg.mart.foreign.R.layout.child_row, null);
             break;
    }
}

textView = (TextView)convertView.findViewById(com.oleg.mart.foreign.R.id.NChild);
textView.setPadding(30,20,30,20);
textView.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 15);
textView.setText(Html.fromHtml(myText)); 
```

如果您对此仍有疑问，请对我的回答发表评论并告诉我，我会看看我能做些什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-28T11:37:11.677

使用 HeterogeneousExpandableList 。（[https://developer.android.com/reference/android/widget/HeterogeneousExpandableList.html](https://developer.android.com/reference/android/widget/HeterogeneousExpandableList.html)）它提供了在可扩展列表视图中具有不同标题/子视图的功能。并且还保持了它的重用性。

# java - 在 Excel 中用相同的颜色填充整个工作表 - Apache POI

> ID：12286237
> 
> 赞同：2
> 
> 时间：2012-09-05T16:52:50.403
> 
> 标签：java, apache-poi

我正在寻找一种使用 Java 的 Apache POI 设置 Excel 工作表背景颜色的方法

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:07:17.783

[尝试POI 文档](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFSheet.html#setTabColor%28int%29)中的 XSSFSheet.setTabColor

编辑：

您可能需要将其应用于每个单元格/行样式。

[如何使用 Apache POI 为 Excel 工作表中的行应用背景颜色？](https://stackoverflow.com/questions/7334855/how-to-apply-background-color-for-the-rows-in-excel-sheet-using-apache-poi)

另一个类似的例子/更好的解释：

[excel poi：将前景色应用于空白单元格](https://stackoverflow.com/questions/8440119/excel-poi-apply-foreground-color-to-blank-cells?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:52:50.670

```
HSSFCellStyle cellStyle = workBook.createCellStyle();
style.setFillForegroundColor(IndexedColors.GREY_50_PERCENT.getIndex());
style.setFillPattern(CellStyle.SOLID_FOREGROUND);
cell.setCellStyle(style); 
```

# javascript - 录音机没有将控制权返回给phonegap应用程序

> ID：12286238
> 
> 赞同：0
> 
> 时间：2012-09-05T16:52:54.583
> 
> 标签：javascript, audio, cordova

这是我用来捕获音频的代码，除了在某些特定设备上之外，它工作得很好：

```
device.capture.captureAudio(
    function (audioFiles) {
        // ** Never reaches here on certain devices **
    },
    logError,
    {limit:1}
); 
```

例如，在三星 Ace 上运行时，录音机照常启动，但控制权不会返回给应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:07:53.207

三星的录音机实现被破坏了。它从不调用 onActivityResult，因此我们无法获得录制的结果。您必须使用[Media.startRecord](http://docs.phonegap.com/en/2.0.0/cordova_media_media.md.html#media.startRecord)来解决这个三星 bloatware 错误。

# c# - 如何更改datagridview中行的起始索引

> ID：12286242
> 
> 赞同：0
> 
> 时间：2012-09-05T16:53:13.630
> 
> 标签：c#, datagridview, datarow

如何更改行的起始索引`DataGridView`？例如。它应该从 8 开始，而不是从 0 开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:58:35.000

简单地说，我认为您不能更改行的起始索引，但是有一个简单的解决方案

每次你想用 RowIndex 做某事时，只需添加例如 8

```
DataGridView1.Rows[(myIndex + 8)].DoSomething(); 
```

# python - 让 django-simple-captcha 工作

> ID：12286250
> 
> 赞同：1
> 
> 时间：2012-09-05T16:53:47.080
> 
> 标签：python, django, captcha, recaptcha

我正在尝试让简单的验证码与我的 django 一起使用。

完成四个步骤后：

我跑了`python manage.py test captcha.`

它给了我这个：

```
Traceback (most recent call last):
  File "/Users/cnnlakshmen_2000/Projects/Permissions/captcha/tests/__init__.py", line 26, in testImages
    response = self.client.get(reverse('captcha-image', kwargs=dict(key=key)))
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/test/client.py", line 439, in get
    response = super(Client, self).get(path, data=data, **extra)
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/test/client.py", line 244, in get
    return self.request(**r)
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)
  File "/Users/cnnlakshmen_2000/Projects/Permissions/captcha/views.py", line 27, in captcha_image
    font = ImageFont.truetype(settings.CAPTCHA_FONT_PATH, settings.CAPTCHA_FONT_SIZE)
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/PIL/ImageFont.py", line 218, in truetype
    return FreeTypeFont(filename, size, index, encoding)
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/PIL/ImageFont.py", line 134, in __init__
    self.font = core.getfont(file, size, index, encoding)
  File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/PIL/ImageFont.py", line 34, in __getattr__
    raise ImportError("The _imagingft C module is not installed")
ImportError: The _imagingft C module is not installed 
```

但我实际上已经安装了 pil。

我输入了 sudo pip install pil，它给了我这个：

```
Requirement already satisfied (use --upgrade to upgrade): pil in /Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/PIL
Cleaning up... 
```

不知道我的错误在哪里......需要一些指导......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:59:48.737

看看[_imagingft 模块没有安装](https://stackoverflow.com/questions/4011705/python-the-imagingft-c-module-is-not-installed)

PIL 有许多可选库（FreeType、Jpeg 等），如果缺少这些库，则 PIL 中的某些功能将不可用。

# excel - 如果单元格为空，则不要自动填充数据

> ID：12286251
> 
> 赞同：0
> 
> 时间：2012-09-05T16:53:47.280
> 
> 标签：excel, excel-formula, formula

我目前有一系列单元格将日期和时间连接起来并产生类似的内容

```
 ______A________
1 | 9/1/12 2:00 AM
2 | 9/4/12 2:00 AM
3 |    NULL 
```

在 B 列中，我有以下公式`=A1` `=A2`等。

在单元格`B3`上，该值是`1/0/00 12:00 AM`由于它`A3`是一个空单元格这一事实。有没有办法让它在有问题的单元格为空时返回一个空白值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:55:48.273

将公式更改为稍微复杂的公式

```
=IF(A1="", "", A1) 
```

如果 a1 为空，则显示一个空字符串，否则显示 a1 中的值。

# jquery - jPaginate - 即使您在第 2 页，当前页面仍显示第 1 页

> ID：12286258
> 
> 赞同：0
> 
> 时间：2012-09-05T16:54:24.453
> 
> 标签：jquery

我正在使用 jPaginate 插件（jquery）.. 该插件大部分工作，除了当用户单击第 2 页时，例如.. 显示的页面实际上是第 2 页，但在分页插件上..*第 1 页*突出显示作为当前页面。

我需要解决这个问题..有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:01:59.743

首先，您需要确定当前页码...我使用以下代码来执行此操作：

```
<? 
$page = (isset($_REQUEST["page"])) ? $_REQUEST["page"] : 0;
$page = ($page > 0) ? $page - 1 : $page;
if ($page < 0){
header("location: /bumper-stickers.html");
?> 
```

jQuery：

```
 $("#demo2").paginate({
                            count         : a,
                            start         : '<?=intval($page + 1);?>',
                            display     : 10,
                            border                    : false,
                            text_color              : '#888',
                            background_color        : '#EEE',    
                            text_hover_color          : 'black',
                            cookies : true, 
```

# html - 将图像排列成一个圆圈

> ID：12286259
> 
> 赞同：3
> 
> 时间：2012-09-05T16:54:27.840
> 
> 标签：html, css, web

我有六个图像，我想使用 HTML 和 CSS 将它们排列成一个圆圈。圆圈不应该旋转或类似的东西 - 有人对如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:19:24.157

我没有适合您的纯 CSS 解决方案，但这可能会对您有所帮助。使用 jQuery 的解决方案。即使您有超过 6 张图像，这也会对您有所帮助。

***[这](http://jsfiddle.net/blasteralfred/BHt95/1/)***是一个现场演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:04:54.777

您可以使用相对定位来实现这一点：

```
​&lt;div id='box1'>&nbsp;</div>
<div id='box2'>&nbsp;</div>
<div id='box3'>&nbsp;</div>
<div id='box4'>&nbsp;</div>
<div id='box5'>&nbsp;</div>
<div id='box6'>&nbsp;</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
div{
    position:absolute;
    width:20px;
    height:20px;
}
#box1
{
   border:1px solid red;
   right:50%;
}   
#box2
{
    border:1px solid purple;
    top:30%;
    right:10%;
}
#box3
{
    border:1px solid orange;
    top:30%;
    left:10%;
}
#box4
{
    border:1px solid red;
    top:60%;
    right:10%;
}
#box5
{
    border: 1px solid green;
    top:60%;
    left:10%
}
#box6
{
    border:1px solid red;
    top:90%;
    right:50%;
}​ 
```

Js 小提琴在这里：http: [//jsfiddle.net/E4j2R/](http://jsfiddle.net/E4j2R/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-30T12:35:56.080

[这里是](http://%20http://jsfiddle.net/vL5jugyr/5/)[@blasteralfred Ψ](https://stackoverflow.com/a/12286617/7381039) 解决方案的 jQuery 免费分支

```
function arrangeImagesInCircle(props = {}) {
  const getWidthHeight = element => {
    const { width, height } = element.getBoundingClientRect();
    return [width, height];
  }
  const radius = props.radius || 200;
  const imageSelector = props.imageSelector || 'img';
  const container = props.container;
  const [containerWidth, containerHeight] = getWidthHeight(container);

  return imageSelector => {
    const fields = container.querySelectorAll(imageSelector);
    const step = (2 * Math.PI) / fields.length;
    var angle = 0
    fields.forEach(field => {
      const [fieldWidth, fieldHeight] = getWidthHeight(field);
      const x = Math.round(containerWidth / 2 + radius * Math.cos(angle) - fieldWidth / 2);
      const y = Math.round(containerHeight / 2 + radius * Math.sin(angle) - fieldHeight / 2);
      if (window.console) console.log(x, y);
      field.style.left = x + 'px';
      field.style.top = y + 'px';
      angle += step;
    });
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-05T12:23:03.443

看看这个：[https ://hugogiraudel.com/2013/04/02/items-on-circle/?fbclid=IwAR04rSahTdicEnKABuoojF6ZYBA2ovU6OQWJMCvt5I01sjCKz5QuHvMqG58](https://hugogiraudel.com/2013/04/02/items-on-circle/?fbclid=IwAR04rSahTdicEnKABuoojF6ZYBA2ovU6OQWJMCvt5I01sjCKz5QuHvMqG58)

这是笔：[https:](https://codepen.io/HugoGiraudel/pen/Bigqr) //codepen.io/HugoGiraudel/pen/Bigqr Mixin 将项目放在一个圆圈上

*   让孩子有绝对的定位
*   允许在列表中使用 mixin
*   如果 box-sizing:border-box 已启用
*   允许定位任何类型的直接子代

    ```
    <ul class='circle-container'>
      <li><img src='http://lorempixel.com/100/100/city'></li>
      <li><img src='http://lorempixel.com/100/100/nature'></li>
      <li><img src='http://lorempixel.com/100/100/abstract'></li>
      <li><img src='http://lorempixel.com/100/100/abstract'></li>
      <li><img src='http://lorempixel.com/100/100/cats'></li>
      <li><img src='http://lorempixel.com/100/100/food'></li>
      <li><img src='http://lorempixel.com/100/100/animals'></li>
      <li><img src='http://lorempixel.com/100/100/business'></li>
      <li><img src='http://lorempixel.com/100/100/people'></li>
    </ul>

    /// @param {Integer} $nb-items - Number or items
    /// @param {Length} $circle-size - Container size
    /// @param {Length} $item-size - Item size
    /// @param {String | false} $class-for-IE - Base class name for old IE

    @mixin distribute-on-circle( 
      $nb-items,
      $circle-size,
      $item-size,
      $class-for-IE: false
    ) {
      $half-item: ($item-size / 2);
      $half-parent: ($circle-size / 2);

      position: relative; /* 1 */
      width:  $circle-size;
      height: $circle-size;
      padding: 0;
      border-radius: 50%; 
      list-style: none; /* 2 */ 
      box-sizing: content-box; /* 3 */ 

      > * { /* 4 */
        display: block;
        position: absolute;
        top:  50%; 
        left: 50%;
        width:  $item-size;
        height: $item-size;
        margin: -$half-item;
      }

      $angle: (360 / $nb-items);
      $rot: 0;

      @for $i from 1 through $nb-items {
        @if not $class-for-IE {
          > :nth-of-type(#{$i}) {
            transform: rotate($rot * 1deg) translate($half-parent) rotate($rot * -1deg);
          }
        } @else {
          > .#{$class-for-IE}#{$i} {
            // If CSS transforms are not supported
            $mt: sin($rot * pi() / 180) * $half-parent - $half-item;
            $ml: cos($rot * pi() / 180) * $half-parent - $half-item;
            margin: $mt 0 0 $ml;
          }
        }

        $rot: ($rot + $angle);
      }
    }

    .circle-container {
      @include distribute-on-circle(8, 20em, 6em, false); 
      margin: 5em auto 0;
      border: solid 5px tomato;
    }

    .circle-container img { 
      display: block; 
      width: 100%; 
      border-radius: 50%;
      filter: grayscale(100%);

      &:hover {
        filter: grayscale(0);
      }
    } 
    ```

它允许您自定义项目的数量.. 还支持 IE :) 非常酷的解决方案

# wpf - Windows 8 上 wpf 设计器中的异常

> ID：12286269
> 
> 赞同：1
> 
> 时间：2012-09-05T16:55:09.210
> 
> 标签：wpf, windows-8, designer

我们刚刚安装了已发布的 Windows 8 for Enterprise。该项目仍在.Net 4.0和VS 2010（与Windows 7中相同）下，加载设计器时总是出现错误：
Provide value on 'System.Windows.Markup.StaticResourceHolder' 抛出异常。

错误指向我们在别处定义的staticResource，即样式、颜色等。所有这些资源都已按一定顺序包含在资源字典（app.xaml）中。相同的代码在 Windows 7 中运行良好。

运行项目很好，但是我们无法打开设计器。我们如何解决这个问题？谢谢大家。

# ios - 解析 json 时如何使按钮从 json 加载 url？

> ID：12286270
> 
> 赞同：-2
> 
> 时间：2012-09-05T16:55:12.033
> 
> 标签：ios, xcode, json, mpmovieplayercontroller

我将如何对其进行编码，以便当我按下 UIButton 时它将播放来自 mobile_url 的视频？我正在调整一个 twitter json api 提要抓取器来获取我的 vimeo json api 提要，下面的代码是我如何解析标签的提要，但我将如何做到这一点，以便主视图的每个单元格都会更改链接按钮，就像它为标签所做的那样。在 json 中，url 是 @"mobile_url"。

我有

```
NSDictionary *tweet = self.detailItem;   
NSString *text = [tweet objectForKey:@"title"];   
NSString *name = [tweet objectForKey:@"description"];   
NSString *tags = [tweet objectForKey:@"tags"];  
NSString *date = [tweet objectForKey:@"upload_date"];  

nameLabel.text = text;  
tweetLabel.text = name;  
tagsLabel.text = tags;  
dateLabel.text = date; 
```

标签效果很好。但我是否需要使用类似这样的东西来提取应用内视频。

```
 NSString *playUrl = [tweet objectForKey:@"mobile_url"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:08:43.430

您的代码似乎与您的要求不太相关，但假设您知道要打开它的 URL，可以使用`UIApplication`'s来完成`openURL`。

要打开带有按钮的 URL，只需将此操作链接到您的按钮。

```
- (IBAction)openMyURL:(id)sender
{
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"myURLstring"]];
} 
```

# php - 将列添加到现有的 php 数组

> ID：12286272
> 
> 赞同：9
> 
> 时间：2012-09-05T16:55:22.883
> 
> 标签：php, arrays, json

使用 PHP 假设我已经使用 fetch_object 方法成功地从 MySQL 表中读取了一条记录，并且我将行数据保存在一个变量调用 $output 中：

```
while($row = $result->fetch_object())
{
   $output[] = $row;
} 
```

如果我想将两个附加字段：“cls”和“parentID”添加到 $output，就好像它们是 $row 的一部分一样，我将如何完成这个？谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-05T16:58:11.397

通过引用循环遍历数组并在 while 循环之后添加所需的内容：

```
foreach( $output as &$row) {
    $row->cls = 0;
    $row->parentID = 1;
} 
```

您也可以在 while 循环中执行此操作：

```
while($row = $result->fetch_object()) {
    $row->cls = 0;
    $row->parentID = 1;
    $output[] = $row;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:56:57.133

由于您更改了问题中的代码片段，请立即尝试（更新版本）：

```
while(...) {
   $row->cls = ...;
   $row->parentID = ...;
   $output[] = $row;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-18T14:15:35.953

```
$myArray=array_merge($myArray,$myAddArray); 
```

[https://www.php.net/manual/en/function.array-merge.php](https://www.php.net/manual/en/function.array-merge.php)

或使用 array_push()

将其应用于每一行的 foreach/while 循环。

# php - Android Httppost 和 php，乱码

> ID：12286278
> 
> 赞同：0
> 
> 时间：2012-09-05T16:55:36.790
> 
> 标签：php, android, encoding, http-post, utf

我有以下问题。我正在尝试在 Android 中使用 httppost 发送数据（我的代码看起来像这样[http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)）。服务器使用php获取数据，代码如下：

```
<?php
$fileContents = $_POST["xml"];
$fileHandle = fopen("test.xml", 'w') or die("can't create file");
fprintf($fileHandle, "%s", $fileContents);
fclose($fileHandle);
?> 
```

它工作正常，除了文件中的非 ascii 字符很乱。当我使用 php 脚本发送数据时 - 所有非 ascii 字符都完全按照需要显示。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:15:07.627

像这样的东西应该可以解决问题，而不是 urlencodingformentity 的东西： [http ://www.java-samples.com/showtutorial.php?tutorialid=735](http://www.java-samples.com/showtutorial.php?tutorialid=735)

我搜索了“java post utf8”以帮助找到这个潜在的解决方案，以防您需要查找更多详细信息。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:40:00.840

您可以在发布的数据和 PHP 中设置 ut8（如果您想插入数据，也可以在数据库中）。我们没有您的代码来查看您发布的内容和方式，以便专门评论，但 UTF8 是要走的路

# c++ - Visual Studio 2012 附带了哪个版本的 Dinkumware STL Lib？

> ID：12286286
> 
> 赞同：3
> 
> 时间：2012-09-05T16:56:01.247
> 
> 标签：c++, visual-c++, stl, visual-studio-2012, predefined-macro

在 Visual Studio 的早期版本中，有一个预定义的宏“_CPPLIB_VER”，它报告了这个版本的 VS 附带的 Dinkumware STL 库的版本。截至 2012 年，我无法找到或使用此宏 - 它未定义，我无法在网上找到有关此问题的任何信息。

VS2012 不再使用 Dinkumware STL Lib 了吗？宏改名了吗？

Windows 7 x64 Microsoft Visual Studio 2012 专业版

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T05:51:50.893

通常可以在 VS 安装文件夹下某处`_CPPLIB_VER`命名的头文件中找到的定义。**`yvals.h`**对于 Visual Studio 2010，它位于`VC\include`.

请注意，因为`_CPPLIB_VER`自 Visual Studio 2008 以来不再是官方预定义宏。

[MSDN 上预定义宏 (Visual Studio 2008)](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.90%29.aspx)的“更改历史记录”部分说：

> `_ATL_VER`为, `_MSC_VER`, `_MFC_VER`;添加了 Visual Studio 2008 值 **删除`_CPPLIB_VER`**；更新了`__COUNTER__`, `_DEBUG`, `_DLL`, `_MT`, `__FUNCDNAME__`, `__FUNCSIG__`, `__FUNCTION__`. `__FILE__`清理了话题。

该宏是 VS 2005 的“Microsoft 特定预定义宏”之一。请参阅[预定义宏 (Visual Studio 2005)](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.80%29.aspx)：

> _CPPLIB_VER
> 
> 如果包含任何 C++ 标准库头文件，则定义；报告存在哪个版本的 Dinkumware 头文件。

# java - 关于Java的计算器程序将其转换为Exe文件

> ID：12286290
> 
> 赞同：1
> 
> 时间：2012-09-05T16:56:20.807
> 
> 标签：java, swing, deployment, installation, desktop-application

> **可能重复：**
> [如何将我的 Java 程序转换为 .exe 文件？](https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file)

我有一个查询，我开发了下面的 java 计算器，为了执行我可以在 eclipse 上运行这个应用程序，但我想创建它的可执行文件，以便我可以通过映射快捷方式与 exe 来创建它的快捷方式文件，当我点击图标时，计算器应用程序被执行，下面是 java 代码，请告知..

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.Window;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.KeyStroke;

public class Calculator extends JFrame implements ActionListener{
    // Variables
    final int MAX_INPUT_LENGTH = 20;
    final int INPUT_MODE = 0;
    final int RESULT_MODE = 1;
    final int ERROR_MODE = 2;
    int displayMode;

    boolean clearOnNextDigit, percent;
    double lastNumber;
    String lastOperator;

    private JMenu jmenuFile, jmenuHelp;
    private JMenuItem jmenuitemExit, jmenuitemAbout;

    private JLabel jlbOutput;
    private JButton jbnButtons[];
    private JPanel jplMaster, jplBackSpace, jplControl;

    /*
     * Font(String name, int style, int size)
      Creates a new Font from the specified name, style and point size.
     */

    Font f12 = new Font("Times New Roman", 0, 12);
    Font f121 = new Font("Times New Roman", 1, 12);

    // Constructor 
    public Calculator() 
    {
        /* Set Up the JMenuBar.
         * Have Provided All JMenu's with Mnemonics
         * Have Provided some JMenuItem components with Keyboard Accelerators
         */ 

        jmenuFile = new JMenu("File");
        jmenuFile.setFont(f121);
        jmenuFile.setMnemonic(KeyEvent.VK_F);

        jmenuitemExit = new JMenuItem("Exit");
        jmenuitemExit.setFont(f12);
        jmenuitemExit.setAccelerator(KeyStroke.getKeyStroke( KeyEvent.VK_X, 
                                ActionEvent.CTRL_MASK));
        jmenuFile.add(jmenuitemExit);

        jmenuHelp = new JMenu("Help");
        jmenuHelp.setFont(f121);
        jmenuHelp.setMnemonic(KeyEvent.VK_H);

        jmenuitemAbout = new JMenuItem("About POS Calculator");
        jmenuitemAbout.setFont(f12);
        jmenuHelp.add(jmenuitemAbout);

        JMenuBar mb = new JMenuBar();
        mb.add(jmenuFile);
        mb.add(jmenuHelp);
        setJMenuBar(mb);

        //Set frame layout manager

        setBackground(Color.darkGray);

        jplMaster = new JPanel();

        jlbOutput = new JLabel("0");
        jlbOutput.setHorizontalTextPosition(JLabel.RIGHT);
        jlbOutput.setBackground(Color.WHITE);
        jlbOutput.setOpaque(true);

        // Add components to frame
        getContentPane().add(jlbOutput, BorderLayout.NORTH);

        jbnButtons = new JButton[23];
//      GridLayout(int rows, int cols, int hgap, int vgap) 

        JPanel jplButtons = new JPanel();       // container for Jbuttons

        // Create numeric Jbuttons
        for (int i=0; i<=9; i++)
        {
            // set each Jbutton label to the value of index
            jbnButtons[i] = new JButton(String.valueOf(i));
        }

        // Create operator Jbuttons
        jbnButtons[10] = new JButton("+/-");
        jbnButtons[11] = new JButton(".");
        jbnButtons[12] = new JButton("=");
        jbnButtons[13] = new JButton("/");
        jbnButtons[14] = new JButton("*");
        jbnButtons[15] = new JButton("-");
        jbnButtons[16] = new JButton("+");
        jbnButtons[17] = new JButton("sqrt");
        jbnButtons[18] = new JButton("1/x");
        jbnButtons[19] = new JButton("%");

        jplBackSpace = new JPanel();
        jplBackSpace.setLayout(new GridLayout(1, 1, 2, 2));

        jbnButtons[20] = new JButton("Backspace");
        jplBackSpace.add(jbnButtons[20]);

        jplControl = new JPanel();
        jplControl.setLayout(new GridLayout(1, 2, 2 ,2));

        jbnButtons[21] = new JButton(" CE ");
        jbnButtons[22] = new JButton("C");

        jplControl.add(jbnButtons[21]);
        jplControl.add(jbnButtons[22]);

//      Setting all Numbered JButton's to Blue. The rest to Red
        for (int i=0; i<jbnButtons.length; i++) {
            jbnButtons[i].setFont(f12);

            if (i<10)
                jbnButtons[i].setForeground(Color.black);

            else
                jbnButtons[i].setForeground(Color.RED);
        }

        // Set panel layout manager for a 4 by 5 grid
        jplButtons.setLayout(new GridLayout(4, 5, 2, 2));

        //Add buttons to keypad panel starting at top left
        // First row
        for(int i=7; i<=9; i++)     {
            jplButtons.add(jbnButtons[i]);
        }

        // add button / and sqrt
        jplButtons.add(jbnButtons[13]);
        jplButtons.add(jbnButtons[17]);

        // Second row
        for(int i=4; i<=6; i++)
        {
            jplButtons.add(jbnButtons[i]);
        }

        // add button * and x^2
        jplButtons.add(jbnButtons[14]);
        jplButtons.add(jbnButtons[18]);

        // Third row
        for( int i=1; i<=3; i++)
        {
            jplButtons.add(jbnButtons[i]);
        }

        //adds button - and %
        jplButtons.add(jbnButtons[15]);
        jplButtons.add(jbnButtons[19]);

        //Fourth Row
        // add 0, +/-, ., +, and =
        jplButtons.add(jbnButtons[0]);
        jplButtons.add(jbnButtons[10]);
        jplButtons.add(jbnButtons[11]);
        jplButtons.add(jbnButtons[16]);
        jplButtons.add(jbnButtons[12]);

        jplMaster.setLayout(new BorderLayout());
        jplMaster.add(jplBackSpace, BorderLayout.WEST);
        jplMaster.add(jplControl, BorderLayout.EAST);
        jplMaster.add(jplButtons, BorderLayout.SOUTH);

        // Add components to frame
        getContentPane().add(jplMaster, BorderLayout.SOUTH);
        requestFocus();

        //activate ActionListener
        for (int i=0; i<jbnButtons.length; i++){
            jbnButtons[i].addActionListener(this);
        }

        jmenuitemAbout.addActionListener(this);
        jmenuitemExit.addActionListener(this);

        clearAll();

        //add WindowListener for closing frame and ending program
        addWindowListener(new WindowAdapter() {

                public void windowClosed(WindowEvent e)
                {
                    System.exit(0);
                }
            }
        );
    }   //End of Contructor Calculator

    // Perform action
    public void actionPerformed(ActionEvent e){
        double result = 0;

        if(e.getSource() == jmenuitemAbout){
          JDialog dlgAbout = new CustomABOUTDialog(this, 
                                "About POS Calculator", true);
            dlgAbout.setVisible(true);
        }else if(e.getSource() == jmenuitemExit){
            System.exit(0);
        }   

        // Search for the button pressed until end of array or key found
        for (int i=0; i<jbnButtons.length; i++)
        {
            if(e.getSource() == jbnButtons[i])
            {
                switch(i)
                {
                    case 0:
                        addDigitToDisplay(i);
                        break;

                    case 1:
                        addDigitToDisplay(i);
                        break;

                    case 2:
                        addDigitToDisplay(i);
                        break;

                    case 3:
                        addDigitToDisplay(i);
                        break;

                    case 4:
                        addDigitToDisplay(i);
                        break;

                    case 5:
                        addDigitToDisplay(i);
                        break;

                    case 6:
                        addDigitToDisplay(i);
                        break;

                    case 7:
                        addDigitToDisplay(i);
                        break;

                    case 8:
                        addDigitToDisplay(i);
                        break;

                    case 9:
                        addDigitToDisplay(i);
                        break;

                    case 10:    // +/-
                        processSignChange();
                        break;

                    case 11:    // decimal point
                        addDecimalPoint();
                        break;

                    case 12:    // =
                        processEquals();
                        break;

                    case 13:    // divide
                        processOperator("/");
                        break;

                    case 14:    // *
                        processOperator("*");
                        break;

                    case 15:    // -
                        processOperator("-");
                        break;

                    case 16:    // +
                        processOperator("+");
                        break;

                    case 17:    // sqrt
                        if (displayMode != ERROR_MODE)
                        {
                           try
                            {
                                if (getDisplayString().indexOf("-") == 0)
                                    displayError("Invalid input for function!");

                                result = Math.sqrt(getNumberInDisplay());
                                displayResult(result);
                            }

                            catch(Exception ex)
                            {
                                displayError("Invalid input for function!");
                                displayMode = ERROR_MODE;
                            }
                        }
                        break;

                    case 18:    // 1/x
                        if (displayMode != ERROR_MODE){
                            try
                            {
                                if (getNumberInDisplay() == 0)
                                    displayError("Cannot divide by zero!");

                                result = 1 / getNumberInDisplay();
                                displayResult(result);
                            }

                            catch(Exception ex) {
                                displayError("Cannot divide by zero!");
                                displayMode = ERROR_MODE;
                            }
                        }
                        break;

                    case 19:    // %
                        if (displayMode != ERROR_MODE){
                            try {
                                result = getNumberInDisplay() / 100;
                                displayResult(result);
                            }

                            catch(Exception ex) {
                                displayError("Invalid input for function!");
                                displayMode = ERROR_MODE;
                            }
                        }
                        break;

                    case 20:    // backspace
                        if (displayMode != ERROR_MODE){
                            setDisplayString(getDisplayString().substring(0,
                                      getDisplayString().length() - 1));

                            if (getDisplayString().length() < 1)
                                setDisplayString("0");
                        }
                        break;

                    case 21:    // CE
                        clearExisting();
                        break;

                    case 22:    // C
                        clearAll();
                        break;
                }
            }
        }
    }

    void setDisplayString(String s){
        jlbOutput.setText(s);
    }

    String getDisplayString (){
        return jlbOutput.getText();
    }

    void addDigitToDisplay(int digit){
        if (clearOnNextDigit)
            setDisplayString("");

        String inputString = getDisplayString();

        if (inputString.indexOf("0") == 0){
            inputString = inputString.substring(1);
        }

        if ((!inputString.equals("0") || digit > 0)  
                            && inputString.length() < MAX_INPUT_LENGTH){
            setDisplayString(inputString + digit);
        }

        displayMode = INPUT_MODE;
        clearOnNextDigit = false;
    }

    void addDecimalPoint(){
        displayMode = INPUT_MODE;

        if (clearOnNextDigit)
            setDisplayString("");

        String inputString = getDisplayString();

        // If the input string already contains a decimal point, don't
        //  do anything to it.
        if (inputString.indexOf(".") < 0)
            setDisplayString(new String(inputString + "."));
    }

    void processSignChange(){
        if (displayMode == INPUT_MODE)
        {
            String input = getDisplayString();

            if (input.length() > 0 && !input.equals("0"))
            {
                if (input.indexOf("-") == 0)
                    setDisplayString(input.substring(1));

                else
                    setDisplayString("-" + input);
            }

        }

        else if (displayMode == RESULT_MODE)
        {
            double numberInDisplay = getNumberInDisplay();

            if (numberInDisplay != 0)
                displayResult(-numberInDisplay);
        }
    }

    void clearAll() {
        setDisplayString("0");
        lastOperator = "0";
        lastNumber = 0;
        displayMode = INPUT_MODE;
        clearOnNextDigit = true;
    }

    void clearExisting(){
        setDisplayString("0");
        clearOnNextDigit = true;
        displayMode = INPUT_MODE;
    }

    double getNumberInDisplay() {
        String input = jlbOutput.getText();
        return Double.parseDouble(input);
    }

    void processOperator(String op) {
        if (displayMode != ERROR_MODE)
        {
            double numberInDisplay = getNumberInDisplay();

            if (!lastOperator.equals("0"))  
            {
                try
                {
                    double result = processLastOperator();
                    displayResult(result);
                    lastNumber = result;
                }

                catch (DivideByZeroException e)
                {
                }
            }

            else
            {
                lastNumber = numberInDisplay;
            }

            clearOnNextDigit = true;
            lastOperator = op;
        }
    }

    void processEquals(){
        double result = 0;

        if (displayMode != ERROR_MODE){
            try         
            {
                result = processLastOperator();
                displayResult(result);
            }

            catch (DivideByZeroException e) {
                displayError("Cannot divide by zero!");
            }

            lastOperator = "0";
        }
    }

    double processLastOperator() throws DivideByZeroException {
        double result = 0;
        double numberInDisplay = getNumberInDisplay();

        if (lastOperator.equals("/"))
        {
            if (numberInDisplay == 0)
                throw (new DivideByZeroException());

            result = lastNumber / numberInDisplay;
        }

        if (lastOperator.equals("*"))
            result = lastNumber * numberInDisplay;

        if (lastOperator.equals("-"))
            result = lastNumber - numberInDisplay;

        if (lastOperator.equals("+"))
            result = lastNumber + numberInDisplay;

        return result;
    }

    void displayResult(double result){
        setDisplayString(Double.toString(result));
        lastNumber = result;
        displayMode = RESULT_MODE;
        clearOnNextDigit = true;
    }

    void displayError(String errorMessage){
        setDisplayString(errorMessage);
        lastNumber = 0;
        displayMode = ERROR_MODE;
        clearOnNextDigit = true;
    }

    public static void main(String args[]) {
        Calculator calci = new Calculator();
        Container contentPane = calci.getContentPane();
//      contentPane.setLayout(new BorderLayout());
        calci.setTitle("POS Calculator");
        //calci.setSize(241, 217); SARAL
        calci.setSize(541, 517);
        calci.pack();
        calci.setLocation(400, 250);
        calci.setVisible(true);
        calci.setResizable(false);
    }

}       //End of Swing Calculator Class.

class DivideByZeroException extends Exception{
    public DivideByZeroException()
    {
        super();
    }

    public DivideByZeroException(String s)
    {
        super(s);
    }
}

class CustomABOUTDialog extends JDialog implements ActionListener {
    JButton jbnOk;

    CustomABOUTDialog(JFrame parent, String title, boolean modal){
        super(parent, title, modal);
        setBackground(Color.black);

        JPanel p1 = new JPanel(new FlowLayout(FlowLayout.CENTER));

        StringBuffer text = new StringBuffer();
        text.append("POS Calculator \n\n");
        text.append("Developer: KnightRiders\n");
        text.append("Release:   9.0");

        JTextArea jtAreaAbout = new JTextArea(6, 23);
        jtAreaAbout.setText(text.toString());
        jtAreaAbout.setFont(new Font("Times New Roman", 1, 13));
        jtAreaAbout.setEditable(false);

        p1.add(jtAreaAbout);
        p1.setBackground(Color.red);
        getContentPane().add(p1, BorderLayout.CENTER);

        JPanel p2 = new JPanel(new FlowLayout(FlowLayout.CENTER));
        jbnOk = new JButton(" OK ");
        jbnOk.addActionListener(this);

        p2.add(jbnOk);
        getContentPane().add(p2, BorderLayout.SOUTH);

        setLocation(408, 270);
        setResizable(false);

        addWindowListener(new WindowAdapter() {
                public void windowClosing(WindowEvent e)
                {
                    Window aboutDialog = e.getWindow();
                    aboutDialog.dispose();
                }
            }
        );

        pack();
    }

    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource() == jbnOk)  {
            this.dispose();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T17:13:58.607

由于它是基于 Swing 的桌面应用程序，部署它的一个好方法是直接从使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)的链接。

> Java Web Start (JWS) 是 Oracle Corporation 的技术，用于直接从网络或 Internet 链接启动富客户端（Swing、AWT、SWT）桌面应用程序。它为支持 Java 的平台提供“一键式”安装。
> 
> JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、**桌面集成、**¹文件关联、自动更新（包括延迟下载和更新的编程控制）、按平台、体系结构或 Java 版本划分本地和其他资源下载，运行时环境配置（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。

当然，JWS 旨在用于部署应用程序。到 Windows、OS X 和 *nix，而不仅仅是 Windows（对于 a `.exe`）。

1.  可以为应用程序指定桌面快捷方式和菜单项（带有图标）。在后来的 JRE 中，还有[`IntegrationService`](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/IntegrationService.html). 用于安装快捷方式（和文件关联）的 API。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T17:14:23.437

您可以在 Eclipse 中创建一个可运行的 jar（在 File/Export 下）或使用诸如[launch4j 之类的工具](http://launch4j.sourceforge.net/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T17:12:02.267

Java 不是您*通常*转换为 exe 文件的东西，您必须将其转换为“JAR”或 java 存档，这实际上比分发 exe 文件更好，因为它不限制它可以运行的平台上。

在 Eclipse 中实际上很容易做到。

我不知道您使用的是哪个版本的 Eclipse，但您可以右键单击该项目并查找“导出”选项。然后您可以在其中一个选项中选择“JAR 文件”。

祝好运并玩得开心点！

# php - Magento：如何在前端之外检索产品最终价格（考虑目录价格规则等）

> ID：12286304
> 
> 赞同：0
> 
> 时间：2012-09-05T16:57:02.010
> 
> 标签：php, api, magento, backend, catalog

**问题**：

在后端 o cron 任务中（例如，在根据用户请求或 cron 事件运行的自定义产品提要生成器中），并且通常在前端之外，Mage_Catalog_Model_Product 的方法 getFinalPrice() 返回产品的基本价格，而不考虑，例如, 适用于该产品的 Magento 目录价格规则。

这意味着生成的提要中导出的价格与 Magento 前端中显示的价格不同，这很容易成为问题。

那么，如何获取产品在前端显示的最终价格呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T15:00:46.897

如果您将此行添加到顶部，则提出问题的人所述的解决方案仅适用于管理站点：

```
Mage::app()->loadAreaPart(Mage_Core_Model_App_Area::AREA_FRONTEND,Mage_Core_Model_App_Area::PART_EVENTS); 
```

这会加载考虑到管理站点上定义的目录价格规则的前端事件。

希望它对将来的人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:57:02.010

**解决方案**

使用辅助类，并定义以下方法：

```
class My_Package_Helper_Price extends Mage_Core_Helper_Abstract {
  private $_init_rule = false;

  private function initRuleData($product) {
    if ($this->_init_rule || empty($product)) return $this;
    $productStore = Mage::getModel('core/store')->load($product->getStoreId());
    if (!empty($productStore)) {
      Mage::register('rule_data', new Varien_Object(array(
        'store_id'  => $product->getStoreId(),
        'website_id'  => $productStore->getWebsiteId(),
        'customer_group_id' => 0, // NOT_LOGGED_IN
      )));
      $this->_init_rule = true;
    }
    return $this;
  }

  public function getProductFinalPrice($product) {
    $this->initRuleData($product);
    return $product->getFinalPrice();
  }

} 
```

然后，您可以使用：

```
Mage::helper('my_package/price')->getProductFinalPrice($product); 
```

其中 $product 是 Mage_Catalog_Model_Product 类的加载实例。

# javascript - 带有可选“/”和查询参数的主干路由

> ID：12286308
> 
> 赞同：2
> 
> 时间：2012-09-05T16:57:13.037
> 
> 标签：javascript, backbone.js, url-routing, backbone-routing

想要设置一个与看起来像这样的 url 匹配的主干路由，以及它的所有“直观”衍生产品”

```
基本格式：http://www.domain.com/PageName/:argument
示例：http://www.domain.com/PageName/1234567890

```

在我看来，“直观”的衍生品将是所有这些网址：

```
基本网址：http://www.domain.com/PageName/1234567890
带尾斜线：http://www.domain.com/PageName/1234567890/
带有查询参数的基本网址：http://www.domain.com/PageName/1234567890?x=1
尾斜线和查询参数：http://www.domain.com/PageName/1234567890/?x=1

```

问题是主干路由变得超级丑陋：

```
路线：{    
    "PageName/:argument": "main",
    "PageName/:argument/": "main",
    "PageName/:argument/?:params": "main",
    "PageName/:argument?:params": "main"
}

```

我觉得这条路线应该可以用一行而不是四行来表示。此外，我不需要将 url 参数作为参数发送，如果不这样做，我就无法让它工作。

我怎样才能更好地指定这条路线？

另外，我是否错误地处理了这个问题？我觉得我一开始就有这个问题的事实可能与对这个问题的更根本的误解有关。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:23:26.870

您是否尝试过使用[`.route()`](http://documentcloud.github.com/backbone/#Router-route)和正则表达式？如果你想有可选的路由元素，正则表达式可能是要走的路。这意味着定义你的路由`.initialize()`而不是`routes`散列，但它会解决你的问题并且涉及更少的代码。

我没有对此进行测试，但我认为它看起来像：

```
initialize: function(options) {
    this.route(/PageName\/([^\/\?]+)\/?\??(.*)/, "main");
} 
```

（测试正则表达式在这里暴露了一个小问题：你会得到一个空字符串作为 params 参数，而不是`undefined`。但这对你来说可能不是问题。）

# gdb - GDB回溯：查找总帧数

> ID：12286311
> 
> 赞同：5
> 
> 时间：2012-09-05T16:57:23.677
> 
> 标签：gdb

我正在尝试使用核心文件中的宏来查找堆栈的开始和结束。为了完成同样的任务，我试图从 last 和 first frame 中找到 esp 值。相同的差异会给我使用中的堆栈大小。

我们有办法找到堆栈中的帧数吗？bt 给我所有的框架。从第 0 帧我可以找到堆栈的顶部吗？我们有办法找到最后一帧号吗？

我们是否有另一种方法来找到堆栈的开始和堆栈的结束？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-16T18:27:34.190

您可以使用以下方法找到最外层框架的帧号`bt -1`：

```
(gdb) bt -1
#9  0x0000000000464c45 in main (argc=<optimized out>, argv=<optimized out>)
    at ../../binutils-gdb/gdb/gdb.c:32 
```

你可以看到最外面的框架是`#9`。

但是，编写脚本有点痛苦。例如，您不能使用`frame -1`来选择该框架。

此时，您有两个选择。

一种选择是使用 gdb Python API 来迭代帧并做任何你喜欢的事情。如果您可以使用，这是最简单的路线。Python API 有文档且易于使用；在这种情况下，您将主要对`gdb.Frame`代码感兴趣。

如果你不能使用 Python，你可以使用传统的、可怕的 gdb hack`set logging`来将输出写入`bt -1`文件；然后`shell`将该文件的内容重写为有效的 gdb 命令（如`frame 9`）；最后`source`是生成的转换文件。

# java - drawImage() 在 JPanel 上涂抹图像，但为什么呢？

> ID：12286312
> 
> 赞同：0
> 
> 时间：2012-09-05T16:57:25.050
> 
> 标签：java, graphics, awt, java-2d

我正在关注[本](http://zetcode.com/tutorials/javagamestutorial/collision/)教程，当我使用 drawImage() 从 PNG 图像中为我的外星人设置动画时，我的图像在 JPanel 上涂抹了，我不知道为什么会这样，有人知道吗？

[问题的更多描述] 当我将图像从 JPanel 的右侧移动到左侧时，会留下一条痕迹。它就像留下痕迹/足迹......我不确定是什么原因造成的......

这是我正在谈论的图片，

[http://imgur.com/KCfPp](http://imgur.com/KCfPp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:08:40.253

我让它工作。这是因为我没有调用 super.paint(g) 方法。我已经设置了构造函数的背景颜色！

# sql - SQL 绑定参数会影响性能吗？

> ID：12286313
> 
> 赞同：5
> 
> 时间：2012-09-05T16:57:25.623
> 
> 标签：sql, sql-server, oracle, postgresql

假设我有一个用标准 B-Tree 索引调用`Projects`的列调用的表。`Budget`该表有 50,000 个项目，其中只有 1% 的预算超过一百万。如果我运行 SQL 查询：

```
SELECT * From Projects WHERE Budget > 1000000; 
```

规划器将使用索引范围扫描`Budget`从堆表中获取行。但是，如果我使用查询：

```
SELECT * From Projects WHERE Budget > 50; 
```

规划器很可能会对表进行顺序扫描，因为它知道这个查询最终会返回大部分或所有行，并且没有理由将索引的所有页面加载到内存中。

现在，假设我运行查询：

```
SELECT * From Projects WHERE Budget > :budget; 
```

`:budget`传递到我的数据库的绑定参数在哪里。根据我的阅读，上面的查询将被缓存，并且无法推断出任何有关基数的数据。事实上，大多数数据库只是假设分布均匀，缓存的查询计划将反映这一点。这让我感到惊讶，因为通常当您阅读绑定参数的好处时，它的主题是防止 SQL 注入攻击。

显然，如果生成的查询计划相同，这可以*提高*性能，因为不必编译新计划，但如果 的值变化很大，也会*损害性能。*`:budget`

**我的问题：**为什么在生成和缓存查询计划*之前*没有解析绑定参数？现代数据库不应该努力为查询生成最佳计划，这应该意味着查看每个参数的值并获得准确的索引统计信息吗？

*注意：*这个问题可能不适用于 mySql，因为 mySql 不缓存 SQL 计划。但是，我对为什么 Postgres、Oracle 和 MS SQL 会出现这种情况很感兴趣。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T17:13:20.107

具体而言，对于 Oracle，这取决于。

相当长一段时间（至少 9i），Oracle 一直支持绑定变量窥视。这意味着第一次执行查询时，优化器会查看绑定变量的值，并将其基数估计基于第一个绑定变量的值。在大多数查询执行将具有返回相似大小结果的绑定变量值的情况下，这是有道理的。如果 99% 的查询使用较小的预算值，则第一次执行很可能会使用较小的值，因此缓存的查询计划将适用于较小的绑定变量值。当然，这意味着当您指定一个较大的绑定变量值时（或者，更糟糕的是，如果您很幸运并且第一次执行时使用了一个较大的值），您将获得的查询计划不是最优的。

如果你使用的是 11g，Oracle 可以使用[自适应游标共享](http://www.oracle-base.com/articles/11g/adaptive-cursor-sharing-11gr1.php). 这允许优化器为单个查询维护多个查询计划，并根据绑定变量值选择适当的计划。不过，随着时间的推移，这可能会变得相当复杂。如果您有一个包含 N 个绑定变量的查询，优化器必须弄清楚如何将该 N 维空间划分为针对不同绑定变量值的不同查询计划，以便确定何时以及是否为新的查询重新优化一组绑定变量值以及何时简单地重用早期计划。很多工作最终都在夜间维护时段内完成，以避免在高效的白天产生这些成本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T17:11:49.237

> 这让我感到惊讶，因为通常当您阅读绑定参数的好处时，它的主题是防止 SQL 注入攻击。

不要将**参数化查询**与**准备好的语句**混淆。两者都提供参数化，但准备好的语句提供查询计划的额外缓存。

> 为什么在生成和缓存查询计划之前没有解析绑定参数？

因为有时生成查询计划是一个昂贵的步骤。准备好的语句允许您分摊查询计划的成本。

但是，如果您要寻找的只是 SQL 注入保护，请不要使用准备好的语句。使用参数化查询。

例如，在 PHP 中，您可以使用[http://php.net/pg_query_params](http://php.net/pg_query_params)执行参数化查询而不缓存查询计划；同时[http://php.net/pg_prepare](http://php.net/pg_prepare)和[http://php.net/pg_execute](http://php.net/pg_execute)用于缓存一个准备好的语句的计划，然后执行它。

编辑：[9.2 显然改变了准备好的语句的计划方式](http://www.postgresql.org/docs/devel/static/release-9-2.html#AEN111314)

# haskell - 何时使用类型类，何时使用类型

> ID：12286315
> 
> 赞同：37
> 
> 时间：2012-09-05T16:57:29.880
> 
> 标签：haskell, types, typeclass

几个月前，我重新审视了我为进行组合搜索而编写的一段代码，并注意到有一种替代的、更简单的方法可以完成我以前通过类型类实现的某些事情。

*具体来说，我之前有一个用于搜索问题*类型的类型类，它有一个类型的状态、一个类型`s`的动作（对状态的操作）`a`、一个初始状态、一种获取（动作、状态）对列表的方法和一个测试状态是否为解决方案的方法：

```
class Problem p s a where
    initial   :: p s a -> s
    successor :: p s a -> s -> [(a,s)]
    goaltest  :: p s a -> s -> Bool 
```

这有点令人不满意，因为它需要 MultiParameterTypeClass 扩展，并且当您想要创建此类的实例时，通常需要 FlexibleInstances 和可能的 TypeSynonymInstances。它还会使您的函数签名变得混乱，例如

```
pathToSolution :: Problem p => p s a -> [(a,s)] 
```

我今天注意到我可以完全摆脱这个类，而是使用一个类型，如下所示

```
data Problem s a {
    initial   :: s,
    successor :: s -> [(a,s)],
    goaltest  :: s -> Bool
} 
```

这不需要任何扩展，函数签名看起来更好：

```
pathToSolution :: Problem s a -> [(a,s)] 
```

而且，最重要的是，我发现在重构我的代码以使用这个抽象而不是类型类之后，我的行数比以前少了 15-20%。

最大的胜利在于使用类型类创建抽象的代码——以前我必须创建新的数据结构，以复杂的方式包装旧的数据结构，然后将它们变成`Problem`类的实例（这需要更多的语言扩展）——很多几行代码来做一些相对简单的事情。重构之后，我只有几个功能完全符合我的要求。

我现在正在查看其余代码，试图找出可以用类型替换类型类的实例，并获得更多胜利。

我的问题是：这种重构在什么情况下**不起作用**？在什么情况下使用类型类而不是数据类型实际上更好，您如何提前识别这些情况，这样您就不必进行昂贵的重构？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-05T19:09:17.760

考虑类型和类都存在于同一个程序中的情况。类型可以是类的一个实例，但这很简单。更有趣的是你可以写一个函数`fromProblemClass :: (CProblem p s a) => p s a -> TProblem s a`。

您执行的重构大致相当于`fromProblemClass`在您构造用作`CProblem`实例的东西的任何地方手动内联，并使每个接受`CProblem`实例的函数改为 accept `TProblem`。

由于这次重构中唯一有趣的部分是 的定义`TProblem`和实现`fromProblemClass`，如果您可以为任何其他类编写类似的类型和函数，您同样可以重构它以完全消除该类。

### 这什么时候起作用？

想想`fromProblemClass`. 您实际上将部分地将类的每个函数应用于实例类型的值，并在此过程中消除对`p`参数的任何引用（这是类型所替换的）。

任何可以直接重构类型类的情况都将遵循类似的模式。

### 什么时候会适得其反？

想象一下 的简化版本`Show`，只`show`定义了函数。这允许`show`使用... a 进行相同的重构、应用和替换每个实例`String`。显然，我们在这里失去了一些东西——即，使用原始类型并将它们`String`在不同点转换为 a 的能力。的价值`Show`在于它定义在各种不相关的类型上。

根据经验，如果有许多不同的函数特定于作为类实例的类型，并且这些函数通常与类函数在相同的代码中使用，那么延迟转换很有用。如果在单独处理类型的代码和使用类的代码之间存在明显的分界线，则转换函数可能更适合类型类，因为它的语法便利性很小。如果类型几乎完全通过类函数使用，那么类型类可能完全是多余的。

### 这什么时候不可能？

顺便提一下，这里的重构类似于OO语言中类和接口的区别；同样，无法进行这种重构的类型类是在许多 OO 语言中*根本*无法直接表达的类型类。

更重要的是，一些你无法以这种方式轻松翻译的例子：

*   **类的类型参数仅出现在协变位置**，例如函数的结果类型或作为非函数值。这里的著名罪犯是`mempty`for`Monoid`和`return`for `Monad`。

*   **类的类型参数在函数类型中多次出现**可能不会使这真正不可能，但它会使事情变得非常复杂。这里值得注意的违规者包括`Eq`,`Ord`和基本上每个数字类。

*   **高级种类的非平凡使用，**我不确定如何确定具体细节，但这里`(>>=)`是`Monad`一个值得注意的罪犯。另一方面，`p`您类中的参数不是问题。

*   **多参数类型类的非平凡使用，**我也不确定如何确定并且在实践中变得非常复杂，与 OO 语言中的多次调度相当。同样，您的班级在这里没有问题。

请注意，鉴于上述情况，这种重构对于许多标准类型类甚至是*不可能*的，并且对于少数例外情况会适得其反。这不是巧合。:]

### 通过应用这种重构，你放弃了什么？

你放弃了区分原始类型的能力。这听起来很明显，但它可能很重要——如果在任何情况下您*确实*需要控制使用了哪个原始类实例类型，那么应用此重构会失去某种程度的类型安全性，您只能通过跳过其他地方使用的相同类型的箍来确保运行时的不变量。

相反，如果在某些情况下您确实需要使各种实例类型*可互换*（您提到的复杂包装是这种情况的典型症状），您可以通过丢弃原始类型获得很多好处。最常见的情况是，您实际上并不关心原始数据本身，而是关心它如何让您对其他数据进行操作；因此，直接使用函数记录比额外的间接层更自然。

如上所述，这与 OOP 及其最适合的问题类型密切相关，并且代表了 ML 风格语言中典型的表达式问题的“另一面”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T19:53:31.330

您的重构与 Luke Palmer 的这篇博文密切相关：[“Haskell Antipattern: Existential Typeclass”](http://lukepalmer.wordpress.com/2010/01/24/haskell-antipattern-existential-typeclass/)。

我认为我们可以证明您的重构将始终有效。为什么？直观地说，因为如果某种类型`Foo`包含足够的信息以便我们可以将其变成您的`Problem`类的实例，我们总是可以编写一个`Foo -> Problem`函数，将“投影”`Foo`的相关信息转换为`Problem`包含所需信息的确切信息。

更正式一点，我们可以草拟一个证明，证明你的重构总是有效的。首先，为了做好准备，以下代码定义了将`Problem`类实例转换为具体`CanonicalProblem`类型：

```
{-# LANGUAGE MultiParamTypeClasses, FlexibleInstances #-}

class Problem p s a where
    initial   :: p s a -> s
    successor :: p s a -> s -> [(a,s)]
    goaltest  :: p s a -> s -> Bool

data CanonicalProblem s a = CanonicalProblem {
    initial'   :: s,
    successor' :: s -> [(a,s)],
    goaltest'  :: s -> Bool
}

instance Problem CanonicalProblem s a where
    initial = initial'
    successor = successor'
    goaltest = goaltest'

canonicalize :: Problem p s a => p s a -> CanonicalProblem s a
canonicalize p = CanonicalProblem {
    initial' = initial p,
    successor' = successor p,
    goaltest' = goaltest p
} 
```

现在我们要证明以下几点：

1.  对于任何`Foo`这样的类型`instance Problem Foo s a`，都可以编写一个函数来产生与应用于 any 时`canonicalizeFoo :: Foo s a -> CanonicalProblem s a`相同的结果。`canonicalize``Foo s a`
2.  可以将使用该类的任何函数重写为使用`Problem`该类的等效函数`CanonicalProblem`。例如，如果你有`solve :: Problem p s a => p s a -> r`，你可以写一个`canonicalSolve :: CanonicalProblem s a -> r`相当于`solve . canonicalize`

我只会草绘证明。在 (1) 的情况下，假设您有一个`Foo`具有此`Problem`实例的类型：

```
instance Problem Foo s a where
    initial = initialFoo
    successor = successorFoo
    goaltest = goaltestFoo 
```

然后给定`x :: Foo s a`您可以通过替换简单地证明以下内容：

```
-- definition of canonicalize
canonicalize :: Problem p s a => p s a -> CanonicalProblem s a
canonicalize x = CanonicalProblem {
                     initial' = initial x,
                     successor' = successor x,
                     goaltest' = goaltest x
                 }

-- specialize to the Problem instance for Foo s a
canonicalize :: Foo s a -> CanonicalProblem s a
canonicalize x = CanonicalProblem {
                     initial' = initialFoo x,
                     successor' = successorFoo x,
                     goaltest' = goaltestFoo x
                 } 
```

而后者可以直接用来定义我们想要的`canonicalizeFoo`功能。

在 (2) 的情况下，对于任何函数`solve :: Problem p s a => p s a -> r`（或涉及`Problem`约束的类似类型），以及对于任何类型`Foo`，例如`instance Problem Foo s a`：

*   `canonicalSolve :: CanonicalProblem s a -> r'`通过获取方法的定义并将`solve`所有出现的`Problem`方法替换为其`CanonicalProblem`实例定义来定义。
*   证明对于任何`x :: Foo s a`,`solve x`等价于`canonicalSolve (canonicalize x)`。

(2) 的具体证明需要具体定义`solve`或相关函数。一般证明可以采用以下两种方式之一：

*   对所有具有`Problem p s a`约束的类型进行归纳。
*   证明所有`Problem`函数都可以写成函数的一个小子集，证明这个子集有`CanonicalProblem`等价物，并且一起使用它们的各种方式保持了等价性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T18:06:54.100

如果您来自 OOP 背景。您可以将类型类视为 java 中的接口。当您想为不同的数据类型提供相同的接口时，通常会使用它们，通常涉及每种数据类型的特定实现。

在您的情况下，没有使用类型类，它只会使您的代码过于复杂。有关更多信息，您可以随时参考 haskellwiki 以获得更好的理解。 [http://www.haskell.org/haskellwiki/OOP_vs_type_classes](http://www.haskell.org/haskellwiki/OOP_vs_type_classes)

一般的经验法则是：如果您怀疑是否需要类型类，那么您可能不需要它们。

# c# - 使用 System.Drawing.Image.FromStream 时出错

> ID：12286316
> 
> 赞同：1
> 
> 时间：2012-09-05T16:57:31.783
> 
> 标签：c#, image, exception-handling, system.drawing

```
using (MemoryStream ms = new MemoryStream(byteSource))
{
    var img = (Bitmap)Image.FromStream(ms);
} 
```

我收到参数无效错误。我的问题是： byteSource 是什么重要吗？我的意思是，它可以是任意字节数组吗？还是必须已经是图像格式？如果我要在长度限制内向函数传递一个数组，比如 0xff 或 0x00 或其他任何东西，这有关系吗？我正在尝试诊断参数无效错误的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:00:59.083

正如您在[MSDN 页面中所读到的](http://msdn.microsoft.com/en-us/library/93z9ee4x%28v=vs.100%29)

> 参数
> 
> stream 类型：System.IO.Stream 包含此 Image 数据的 Stream。

所以是的，字节数组必须是图像。
该页面上的更多信息：

> 异常：
> ArgumentException：流没有有效的图像格式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:59:03.673

是的，字节流需要采用有效的图像格式，即。.png、jpg 或类似文件。你`byteSource`从哪里得到的？如果它是一个像素值数组，则需要创建一个新的位图，然后用于`LockBits`获取一个可以将字节复制到正确格式的数组。

如果那是您正在寻找的，这里有一个用噪声填充 100x100 图像的示例：

```
Bitmap b = new Bitmap(100,100);
var bits = b.LockBits(new Rectangle(0,0,100,100), System.Drawing.Imaging.ImageLockMode.ReadWrite, System.Drawing.Imaging.PixelFormat.Format32bppPArgb);
Random rand = new Random();
var pixels = Enumerable.Range(1, 100*100).Select(n => rand.Next()).ToArray();
Marshal.Copy(pixels, 0, bits.Scan0, 100*100);
b.UnlockBits(bits);
// use the image ...
b.Save("D:\\test.png", ImageFormat.Png); 
```

这假设您的像素源是 32bppArgb，但您可以将其他格式选项传递给 LockBits。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:00:53.193

请查看 MSDN 文档以获取相关信息[Image.FromStream 方法（流）](http://msdn.microsoft.com/en-us/library/93z9ee4x.aspx)：

> ArgumentException 流没有**有效的图像格式**

# sql - sql server：如何检测更改的行

> ID：12286328
> 
> 赞同：3
> 
> 时间：2012-09-05T16:58:10.290
> 
> 标签：sql, sql-server

我想创建一个触发器来检测 SQL Server 中的行是否已更改。我目前的方法是遍历每个字段，应用 COLUMNS_UPDATED() 来检测是否调用了 UPDATE，然后最后比较插入和删除中同一行（由 PK 标识）的该字段的值。

我想消除程序中的循环。可能我可以将插入和删除的内容转储到一个表中，对所有列进行分组，然后选择 count=2 的行。这些行将被视为未更改。

最终目标是创建审计跟踪：1) 跟踪用户和时间戳 2) 跟踪插入、删除和真实更改

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:00:43.730

您可以使用[BINARY_CHECKSUM](http://msdn.microsoft.com/en-us/library/ms173784.aspx)来比较插入和删除表之间的整个行，而不是循环，然后采取相应的行动。

**例子**

```
Create table SomeTable(id int, value varchar(100))

Create table SomeAudit(id int, Oldvalue varchar(100), NewValue varchar(100))

Create trigger tr_SomTrigger  on SomeTable for Update 
as
begin
        insert into SomeAudit 
        (Id, OldValue, NewValue)
        select i.Id, d.Value, i.Value 
        from
        (
            Select Id, Value, Binary_CheckSum(*) Version from Inserted
        ) i
        inner join 
        (
            Select Id, Value, Binary_CheckSum(*) Version from Deleted
        ) d
        on i.Id = d.Id and i.Version <> d.Version

End 

Insert into sometable values (1, 'this')
Update SomeTable set Value = 'That'
Select * from SomeAudit 
```

# java - 无法创建的字符串列表

> ID：12286329
> 
> 赞同：1
> 
> 时间：2012-09-05T16:58:13.723
> 
> 标签：java

我试图了解如何在 Java 中创建数组列表，出于某种原因，我收到一条错误消息，说将 myList 的类型更改为 ArrayList，即使我从关于堆栈溢出的不同帖子中看到了这个示例并且它似乎有效。

我想做的只是创建一个列表，向其中添加三个字符串并遍历它并打印出来。

附带说明一下，是否可以将整数、字符串和对象都添加到同一个列表中？

我很感激这方面的任何指导。

```
 List myList = new ArrayList(); 

            myList.add("hello");
            myList.add("World");
            myList.add("!");

//print contents
System.out.println(myList); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T17:00:36.730

我的猜测是你已经导入了`java.util.ArrayList`，但没有`java.util.List`。如果您同时导入两者，则您发布的代码有效：

```
import java.util.ArrayList;
import java.util.List;

class Test
{
    public static void main(String args[])
    {
        List myList = new ArrayList(); 

        myList.add("hello");
        myList.add("World");
        myList.add("!");

        //print contents
        System.out.println(myList);
    }
} 
```

话虽如此，我强烈建议您使用泛型：

```
List<String> myList = new ArrayList<String>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:00:26.580

> 附带说明一下，是否可以将整数、字符串和对象都添加到同一个列表中？

尽管您可以`Object`向 a添加任何类型`List`，但不建议这样做。如果您使用的是 JDK 1.5 或更高版本，则应避免创建不安全的集合并使用`Generics`.

> 列表 myList = new ArrayList();

关于这一点，请检查您是否拥有正确的列表。它应该是`java.util.List`而不是`java.awt.List`（在 Eclipse 自动建议功能中经常出现在我上面！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T17:00:58.717

您应该在列表（列表）中使用字符串类型，而不是泛型（列表）。

```
 List<String> myList = new ArrayList<String>(); 
        myList.add("hello");
        myList.add("World");
        myList.add("!");
        for(String str : myList){
            System.out.println(str);
        } 
```

# php - 如何从准备好的语句查询结果中获取所有值

> ID：12286331
> 
> 赞同：0
> 
> 时间：2012-09-05T16:58:20.657
> 
> 标签：php, mysqli, prepared-statement

我有下一个代码，用于创建 mysqli 对象并准备查询：

```
 $GLOBALS['DB_something'] = new mysqli('$database_hostname','$database_username','$database_password','$database_default');
    $GLOBALS['DB_prepared_get'] = $GLOBALS['DB_something']->prepare("SELECT ? from database_name WHERE hash=?"); 
```

和下一个代码，以获取并显示结果。由于我最近没有进入准备好的语句，特别是没有使用 PHP，我不知道如何从中得到结果。
当我在没有准备好的语句的情况下编写代码时，它可以工作，但由于很多原因，我需要用准备好的语句重写它。

```
$GLOBALS['DB_prepared_get']->bind_param('ss', $arg, $index);
$GLOBALS['DB_prepared_get']->execute();
$GLOBALS['DB_prepared_get']->bind_result($result); # this is an array of values 

$GLOBALS['DB_prepared_get']->fetch();       
            # below this, I don't know if it's ok               
            if(mysql_num_rows($result) == 0){
                return "0";
            }

            else{
                while($GLOBALS['DB_prepared_get']->fetch()) {
                    return $result;
                }
            }

            $GLOBALS['DB_prepared_get']->close(); 
```

谢谢你的帮助。

编辑：为了清楚起见，我的问题是如何获取确切的结果值以将它们打印出来或其他东西。所以语法是我可能做错的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:03:44.157

据我所知，您不能将查询的列指定为参数。您必须直接在准备好的语句字符串中写入列。

就像是

```
$GLOBALS['DB_prepared_get'] = $GLOBALS['DB_something']->prepare("SELECT a,b,c from database_name WHERE hash=?"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:57:04.177

您的代码中有很多错误，我什至没有尝试解释它有什么问题。但是我可以说，如果你没有 OO 编程经验，你首先应该尝试用 mysqli 编写程序代码。

此代码应该可以工作：

```
 $mysqli = new mysqli( $database_hostname, $database_username, $database_password, $database_default );
  if ($mysqli->connect_error) {
    die('Connect Error (' . $mysqli->connect_errno . ') '  . $mysqli->connect_error);

  if ($stmt = $mysqli->prepare("SELECT ? from database_name WHERE hash=?")) {
    $stmt->bind_param("s", $fieldname); // first marker
    $stmt->bind_param("s", $hashwhere); // second marker

    $stmt->execute();

    $result = array();
    while ($stmt->fetch()) {
      $result[] = array($fieldname);
    }

    $stmt->close();
  }

  $mysqli->close();

  var_dump($result); 
```

# jquery - Twitter 引导远程模式每次都显示相同的内容

> ID：12286332
> 
> 赞同：264
> 
> 时间：2012-09-05T16:58:22.523
> 
> 标签：jquery, jquery-plugins, twitter-bootstrap, modal-dialog

我正在使用 Twitter 引导程序，我指定了一个模式

```
<div class="modal hide" id="modal-item">

    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">x</button>
        <h3>Update Item</h3>
    </div>

    <form action="http://www.website.com/update" method="POST" class="form-horizontal">

    <div class="modal-body">
        Loading content...
    </div>

    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Close</a>
        <button class="btn btn-primary" type="submit">Update Item</button>
    </div>

    </form>

</div> 
```

和链接

```
<a href="http://www.website.com/item/1" data-target="#modal-item" data-toggle="modal">Edit 1</a>
<a href="http://www.website.com/item/2" data-target="#modal-item" data-toggle="modal">Edit 2</a>
<a href="http://www.website.com/item/3" data-target="#modal-item" data-toggle="modal">Edit 2</a> 
```

当我第一次单击这些链接中的任何一个时，我会看到正确的内容，但是当我单击其他链接时，它会显示第一次加载的相同内容，它不会更新内容。

我希望它每次点击时都会更新。

PS：我可以通过自定义 jQuery 函数轻松地使其工作，但我想知道它是否可以使用本机 Bootstrap 模态远程函数，因为它应该很容易，我想我只是让事情复杂化。

* * *

## 回答 #1

> 赞同：446
> 
> 时间：2012-09-05T17:58:21.100

问题有两个方面。

**首先**，一旦一个 Modal 对象被实例化，它就会持久地附加到由指定的元素`data-target`和随后的调用中，以表明 modal 只会调用`toggle()`它，但不会更新`options`. 因此，即使`href`您的不同链接上的属性不同，当切换模式时，for 的值`remote`也不会更新。对于大多数选项，可以通过直接编辑对象来解决这个问题。例如：

```
$('#myModal').data('bs.modal').options.remote = "http://website.com/item/7"; 
```

### 但是，这在这种情况下不起作用，因为...

**其次，Modal 插件被设计为在 Modal 对象***的构造函数*中加载远程资源，不幸的是，这意味着即使对 进行了更改`options.remote`，*也永远不会重新加载*。

一个简单的补救措施是在后续切换之前销毁 Modal 对象。一种选择是在它完成隐藏后将其销毁：

```
$('body').on('hidden.bs.modal', '.modal', function () {
  $(this).removeData('bs.modal');
}); 
```

[**注意：**根据需要调整选择器。这是最一般的。]

## [普朗克](http://plnkr.co/edit/yMofRZ?p=preview)

或者你可以尝试想出一个更复杂的方案来做一些事情，比如检查启动模式的链接是否与前一个不同。如果是，则销毁；如果不是，则无需重新加载。

* * *

## 回答 #2

> 赞同：171
> 
> 时间：2013-08-08T19:04:57.637

对于引导程序 3，您应该使用：

```
$('body').on('hidden.bs.modal', '.modal', function () {
    $(this).removeData('bs.modal');
}); 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2014-02-26T19:42:43.220

对于 Bootstrap 3.1，您需要删除数据并清空`modal-content`而不是整个对话框 (3.0)，以避免在等待远程内容加载时出现闪烁。

```
$(document).on("hidden.bs.modal", function (e) {
    $(e.target).removeData("bs.modal").find(".modal-content").empty();
}); 
```

如果您使用的是非远程模式，那么上面的代码当然会在关闭后删除它们的内容（坏的）。您可能需要向这些模式（如`.local-modal`类）添加一些东西，以免它们受到影响。然后将上面的代码修改为：

```
$(document).on("hidden.bs.modal", ".modal:not(.local-modal)", function (e) {
    $(e.target).removeData("bs.modal").find(".modal-content").empty();
}); 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2012-09-20T01:28:46.023

谢谢梅尔夫。我开始对 boostrap.js 进行修补，但您的回答是一个快速而干净的解决方法。这是我最终在我的代码中使用的内容。

```
$('#modal-item').on('hidden', function() {
    $(this).removeData('modal');
}); 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2012-10-21T15:15:59.363

接受的答案对我不起作用，所以我用 JavaScript 去做。

```
<a href="/foo" class="modal-link">
<a href="/bar" class="modal-link">

<script>
$(function() {
    $(".modal-link").click(function(event) {
        event.preventDefault()
        $('#myModal').removeData("modal")
        $('#myModal').modal({remote: $(this).attr("href")})
    })
}) 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2013-09-09T05:24:58.500

这适用于 Bootstrap 3 仅供参考

```
$('#myModal').on('hidden.bs.modal', function () {
  $(this).removeData('bs.modal');
}); 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-10-10T10:12:19.450

我的项目是在 Yii 中构建的并且使用 Bootstrap-Yii 插件，所以这个答案只有在你使用 Yii 时才有意义。

上述修复确实有效，但仅在第一次显示模态之后。第一次出来是空的。我认为这是因为在我启动代码之后 Yii 调用了模式的隐藏函数，从而清除了我的启动变量。

我发现将 removeData 调用放在启动模态的代码之前就可以了。所以我的代码结构是这样的......

```
$ ("#myModal").removeData ('modal');
$ ('#myModal').modal ({remote : 'path_to_remote'}); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-08-09T16:24:30.830

在 Bootstrap 3.2.0 中，“on”事件必须在文档上，并且您必须清空模式：

```
$(document).on("hidden.bs.modal", function (e) {
    $(e.target).removeData("bs.modal").find(".modal-content").empty();
}); 
```

在 Bootstrap 3.1.0 中，“on”事件可以在 body 上：

```
$('body').on('hidden.bs.modal', '.modal', function () {
    $(this).removeData('bs.modal');
}); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-09-10T05:27:55.837

为什么不使用 BS 3 使其更通用？只需使用“[something]modal”作为模态 DIV 的 ID。

```
$("div[id$='modal']").on('hidden.bs.modal',
    function () {
        $(this).removeData('bs.modal');
    }
); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-07-06T12:41:00.980

对我来说唯一的工作选择是：

```
$('body').on('hidden.bs.modal', '#modalBox', function () {
    $(this).remove();
}); 
```

我使用 Bootstrap 3，并且我有一个名为的函数 `popup('popup content')` ，它附加了模态框 html。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-09-12T22:33:52.997

添加 $(this).html(''); 也可以清除可见数据，并且效果很好

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-03-24T07:35:59.280

如果提供了远程 URL，内容将通过 jQuery 的**load**方法加载一次并注入到 .modal-content div 中。如果您使用的是 data-api，您也可以使用 href 属性来指定远程源。这方面的一个例子如下所示

```
$.ajaxSetup ({
    // Disable caching of AJAX responses
    cache: false
}); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-09-23T18:30:05.473

我添加了类似的内容，因为旧内容会一直显示，直到新内容出现，.modal-content 中的 .html('') 将清除里面的 HTML，希望对您有所帮助

```
$('#myModal').on('hidden.bs.modal', function () {
   $('#myModal').removeData('bs.modal');
   $('#myModal').find('.modal-content').html('');
}); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-08-01T12:44:14.900

我写了一个简单的片段来处理模态的刷新。基本上它将被点击的链接存储在模态数据中，并检查它是否与被点击的链接相同，删除或不是模态数据。

```
var handleModal = function()
{
    $('.triggeringLink').click(function(event) {
        var $logsModal = $('#logsModal');
        var $triggeringLink = $logsModal.data('triggeringLink');

        event.preventDefault();

        if ($logsModal.data('modal') != undefined
            && $triggeringLink != undefined
            && !$triggeringLink.is($(this))
        ) {
            $logsModal.removeData('modal');
        }

        $logsModal.data('triggeringLink', $(this));

        $logsModal.modal({ remote: $(this).attr('href') });
        $logsModal.modal('show');
    });
}; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-12-10T20:49:38.247

对于 Bootstrap 3，在 modal.js 我改变了：

```
$(document)
  .on('show.bs.modal',  '.modal', function () { $(document.body).addClass('modal-open') })
  .on('hidden.bs.modal', '.modal', function () { $(document.body).removeClass('modal-open'); }) 
```

到

```
$(document)
  .on('show.bs.modal',  '.modal', function () { $(document.body).addClass('modal-open') })
  .on('hidden.bs.modal', '.modal', function () { 
    $(this).removeData('bs.modal').empty()
    $(document.body).removeClass('modal-open')
  }) 
```

（为清楚起见添加了额外的间距）

这可以通过在模态容器上调用 empty() 以及删除数据来防止任何不需要的旧模态内容闪现。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-06-18T10:12:42.843

```
 $('#myModal').on('hidden.bs.modal', function () {
            $(this).removeData('modal');
        }); 
```

这个对我有用。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-03-05T23:36:41.540

这种另一种方法对我很有效：

```
$("#myModal").on("show.bs.modal", function(e) {
    var link = $(e.relatedTarget);
    $(this).find(".modal-body").load(link.attr("href"));
}); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-06-24T05:19:04.483

```
$('body').on('hidden.bs.modal', '.modal', function () {
       $("#mention Id here what you showed inside modal body").empty()
}); 
```

你想清空哪个 html 元素（div，span 不管）。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-01-26T09:50:43.503

这个对我有用：

模态的

```
<div class="modal fade" id="searchKaryawan" tabindex="-1" role="dialog" aria-labelledby="SearchKaryawanLabel" aria-hidden="true"> <div class="modal-dialog">
<div class="modal-content">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <h4 class="modal-title" id="SearchKaryawanLabel">Cari Karyawan</h4>
  </div>
  <div class="modal-body">
    <input type="hidden" name="location">
    <input name="cariNama" type="text" class="form-control" onkeyup="if (this.value.length > 3) cariNikNama();" />
    <div class="links-area" id="links-area"></div>
  </div>
  <div class="modal-footer">
  </div>
</div> </div></div> 
```

脚本

```
<script type="text/javascript">$('body').on('hidden.bs.modal', '.modal', function () {  $(".links-area").empty() }); </script> 
```

链接区域是我放置数据并需要清除的区域

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-03-31T14:04:25.123

@merv 接受的答案的扩展版本。它还检查是否从远程源加载了被隐藏的模式并清除旧内容以防止其闪烁。

```
$(document).on('hidden.bs.modal', '.modal', function () {
  var modalData = $(this).data('bs.modal');

  // Destroy modal if has remote source – don't want to destroy modals with static content.
  if (modalData && modalData.options.remote) {
    // Destroy component. Next time new component is created and loads fresh content
    $(this).removeData('bs.modal');
    // Also clear loaded content, otherwise it would flash before new one is loaded.
    $(this).find(".modal-content").empty();
  }
}); 
```

[https://gist.github.com/WojtekKruszewski/ae86d7fb59879715ae1e6dd623f743c5](https://gist.github.com/WojtekKruszewski/ae86d7fb59879715ae1e6dd623f743c5)

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2015-02-16T09:24:44.343

在 Bootstrap 版本 3.3.2 上测试

```
 $('#myModal').on('hide.bs.modal', function() {
    $(this).removeData();
  }); 
```

* * *

## 回答 #22

> 赞同：-4
> 
> 时间：2016-02-17T15:36:05.857

祝你好运：

```
$('#myModal').on('hidden.bs.modal', function () {
    location.reload();
}); 
```

# ruby-on-rails - Rails 控制器继承

> ID：12286333
> 
> 赞同：2
> 
> 时间：2012-09-05T16:58:28.310
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

假设我有控制器 X，它继承自控制器 Y：

```
class X < YController 
```

我的 YController 继承自 ApplicationController。

我仍然可以通过我的 X 控制器访问 ApplicationController 中可用的所有方法/类吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T17:00:32.083

是的你将会。除非您在子控制器中覆盖它们，否则所有方法都将被继承。请记住，Rails 控制器只是 Ruby 类，您将获得与任何其他 Ruby 类相同的继承行为。

# android - 摩托罗拉和低功耗蓝牙与自定义低功耗蓝牙客户端设备

> ID：12286335
> 
> 赞同：1
> 
> 时间：2012-09-05T16:58:43.177
> 
> 标签：android, motorola, bluetooth-lowenergy

我需要开发一个 Android 应用程序来处理来自定制的低功耗蓝牙客户端设备的数据。

经过研究，似乎最好的选择是使用摩托罗拉为他们的 Android 智能手机开发的 API，但看起来[摩托罗拉蓝牙低功耗 API](http://developer.motorola.com/docs/bluetooth-low-energy-api/)只能与摩托罗拉蓝牙设备连接，来自链接：

> 应用程序可以使用 [摩托罗拉蓝牙低功耗 API] 与某些摩托罗拉移动设备实现的蓝牙 LE（低功耗）配置文件交互

除了上面提到的 API，还有[Motorola Bluetooth Low Energy GATT Framework API](http://developer.motorola.com/docs/bluetooth-low-energy-gatt-framework-api/)，但我不清楚它是否适合我的需要。

谁能告诉我如何使用这些 API 来实现我的目标，或者是否还有其他我尚未实现的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:12:59.837

BLE 的 Android 选项是有限的，这个答案在未来的任何时候都可能会有所不同。

摩托罗拉 API 仅适用于摩托罗拉手机。GATT API 将允许您将数据推送到 GATT 并通过 ble 传输。然而，摩托罗拉只扩展了 HRM 配置文件。此外，API 停止在更新到 ICS 的设备上工作（截至 10 天前，情况仍然如此）。他们正在努力更新 API，并可能将配置文件扩展到 HRM 之外。有些人只是简单地利用 HRM 配置文件来传输数据，但目前有 2 个八位字节的限制。

还报告了其他错误，这些错误也应该在 ICS 更新后修复。然而，由于他们花了一年时间将 ICS 安装到他们的耳机中，并且所有摩托罗拉应用程序仍在运行，谁知道他们什么时候会更新 API。

# c++ - 仅手动定义部分复制构造函数和赋值运算符

> ID：12286340
> 
> 赞同：0
> 
> 时间：2012-09-05T16:59:09.227
> 
> 标签：c++, copy-constructor, assignment-operator

我想知道是否有一种方法可以实现复制构造函数和赋值运算符，以便在为类重新定义它们时只需要进行少量修改。

例如，考虑这样一个类：

```
class Foo {
private:
    int* mInt_ptr;
    /* many other member variables
       of different types that aren't
       pointers */
public:
    Foo();
    Foo(const Foo&);
    Foo& operator=(const Foo&);
    ~Foo();
}; 
```

现在，为了处理指针，`mInt_ptr`我需要在复制构造函数和赋值运算符中适当地处理它。但是，其余的成员变量可以安全地进行浅拷贝。有没有办法自动做到这一点？

一旦一个类变大，显式写出复制非指针成员变量的操作可能会变得乏味和笨拙，所以我想知道是否有一种方法可以编写一个复制构造函数，例如：

```
Foo::Foo(const Foo& tocopy)
{
    mInt_ptr = new int(*tocopy.mInt_ptr);
    /* Do shallow copy here somehow? */
} 
```

而不是以下的显式形式：

```
Foo::Foo(const Foo& tocopy)
{
    mInt_ptr = new int(*tocopy.mInt_ptr);
    mVar1 = tocopy.mVar1;
    mVar2 = tocopy.mVar2;
    ...
    ...
    mVarN = tocopy.mVarN;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T17:06:55.643

通常，不要使用原始指针，这正是您现在正在与之抗争的原因。相反，使用合适的智能指针，并使用复制交换分配：

```
class Foo
{
     int a;
     Zip z;
     std::string name;
     value_ptr<Bar> p;

public:
     Foo(Foo const &) = default;

     Foo & operator=(Foo rhs)
     {
         rhs.swap(*this);
         return *this;
     }

     void swap(Foo & rhs)
     {
         using std::swap;
         swap(a, rhs.a);
         swap(z, rhs.z);
         swap(name, rhs.name);
         swap(p, rhs.p);
     }
};

namespace std { template <> void swap<Foo>(Foo & a, Foo & b) { a.swap(b); } } 
```

这`value_ptr`可能是一个[成熟的实现](https://bitbucket.org/martinhofernandes/wheels/src/a3365a24524e/include/wheels/smart_ptr/value_ptr.h%2B%2B)，或者像这样简单的东西：

```
template <typename T>    // suitable for small children,
class value_ptr          // but not polymorphic base classes.
{
    T * ptr;

public:
    constexpr value_ptr() : ptr(nullptr) { }
    value_ptr(T * p) noexcept : ptr(p) { }
    value_ptr(value_ptr const & rhs) : ptr(::new T(*rhs.ptr)) { }
    ~value_ptr() { delete ptr; }
    value_ptr & operator=(value_ptr rhs) { rhs.swap(*this); return *this; }
    void swap(value_ptr & rhs) { std::swap(ptr, rhs.ptr); }

    T & operator*() { return *ptr; }
    T * operator->() { return ptr; }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:11:36.370

您如何将所有浅拷贝位包装在一个小的帮助器结构中并在那里使用默认的复制行为。

```
class Foo {
private:
    int* mInt_ptr;
    struct helper_t
    /* many other member variables
       of different types that aren't
       pointers */
    } mHelper;
public:
    Foo();
    Foo(const Foo&);
    Foo& operator=(const Foo&);
    ~Foo();
};

Foo::Foo(const Foo& tocopy)
{
    mInt_ptr = new int(*tocopy.mInt_ptr);
    mHelper = tocopy.mHelper;
} 
```

正如 Kerrek 建议的那样，使用更好的原语似乎是更好的设计。这只是另一种可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T17:23:55.883

无论您使用原始指针还是智能指针，Kerrek 的解决方案都是正确的，因为您应该使用这些创建复制构造函数、析构函数和交换并实现赋值：

```
class Foo 
{
private:
    int* mInt_ptr;
    // many other member variables
    // of different types
public:
    Foo()
        : mInt_ptr(NULL)
        // initialize all other members
    {}
    Foo(const Foo& that)
        : mInt_ptr(new int(*that.mInt_ptr) )
        // copy-construct all other members
    {}
    Foo& operator=(const Foo& that)
    {
        // you may check if(this == &that) here
        Foo(that).swap(*this);
        return *this;
    }
    ~Foo()
    {
        delete mInt_ptr;
        // and release other resources
    }
    void swap(Foo& that)
    {
        std::swap(mInt_ptr, that.mInt_ptr);
        // swap all members
    }
}; 
```

成员在这里是内联的，只是为了保持紧凑，通常不建议使用内联成员定义来负担类定义。

# php - PHPMailer 清理

> ID：12286344
> 
> 赞同：4
> 
> 时间：2012-09-05T16:59:32.220
> 
> 标签：php, phpmailer

问题很简单：在使用 PHPmailer 类时我应该使用任何类型的清理吗？

我制作了使用 phpmailer 类发送电子邮件的简单发送邮件表单。目前我只使用“htmlspecialchars”进行消毒（虽然我读到没有必要这样做，但这个信息不是 100% 可靠的）。

我试图在标签之间发送一些 js 代码，并且我收到了它的清理，但我不确定是否可以进行其他类型的攻击。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T17:42:34.603

在发送到 phpMailer 之前，您不需要对任何内容进行清理，除非检查输入的电子邮件地址是否是有效的电子邮件地址。

数据清理有两个原因：SQL 注入和 XSS 或 CSRF（Xross 站点脚本或跨站点请求伪造） 在任何一种情况下，用户都必须根据他们的输入看到一些输出。

但是，您询问邮件类的消毒是一件好事，因为理想情况下没有人会要求它。HTML标签？当然你可以发送 HTML 标签！您可以将[内容类型](http://www.w3.org/TR/html4/types.html#h-6.7)定义为`text/html`

**你需要消毒什么？**

1.  附件类型！无论邮件客户端漏洞如何，总是在附件中找到。仅允许以下 MIME 类型：

    image/jpeg'、'image/pjpeg'、'image/gif'、'image/png'、'application/msword'、'application/vnd.ms-office'、'application/vnd.openxmlformats-officedocument.wordprocessingml。文档'、'application/vnd.openxmlformats-officedocument.wordprocessingml.template'、'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'、'application/vnd.openxmlformats-officedocument.presentationml.presentation'、'application/pdf'

不建议检查文件的扩展名！因为，邮件客户端可能会使用 get_file_contents() 之类的函数，它只会在浏览器中打开文件，如果它是嵌入了 JPEG 扩展名的 javascript，它仍然会执行！（在 IE6/IE7 中确实如此）然而，这又是浏览器的工作，具有强大的解析机制。[内容嗅探](http://www.garage4hackers.com/f11/gmail-xss-vulnerability-through-content-sniffing-2094.html)

1.  附件尺寸

确保你有大小限制。

漏洞利用可能会或可能不会在邮件中，邮件客户端必须处理它。但是，作为邮件端编码器，这是您应该注意的两件事。

希望有帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:30:46.237

我个人不相信任何输入，所以我会清理所有内容。例如要注意的一件事是，您可能正在使用 htmlspecialchars 但如果有人使用非英文字符会发生什么？您将需要使用 UTF-8 作为参数来定义字符集。

这个简单的遗漏（我绝不是说你确实遗漏了它）可能会导致 XSS 攻击。

我投票支持[HTMLPurifier](http://www.htmlpurifier.org)。这是一个非常知名且安全的库，它可以让您对输入进行比 htmlspecialchars 更高的程度的清理。

/0.02

# php - 尝试向 jtable (jQuery) 添加动态选项

> ID：12286348
> 
> 赞同：1
> 
> 时间：2012-09-05T16:59:44.207
> 
> 标签：php, jquery, jquery-jtable

将 RadioButton 添加到 AddRecord 选项的基本语法如下

```
active: {
  title: 'Activo',
  width: '5%',
  type: 'radiobutton',
  options: { '0': 'No', '1': 'Si' }
}, 
```

我一直试图让“选项”来自数据库，但还没有想出办法（PHP）。

该插件通过对“dbactions.php?action=”使用 $_REQUEST 来工作，并返回一个 JSON 数组

```
$jTableResult = array();
    $jTableResult['Result'] = "OK";
    $jTableResult['TotalRecordCount'] = $recordCount;
    $jTableResult['Records'] = $rows;
    print json_encode($jTableResult); 
```

我认为这是“./js/jtable/jquery.jtable.min.js”脚本。

据AFAIK/已阅读我无法在js脚本中插入php代码，所以我很迷茫我如何使它成为动态的。我发现的所有相关示例都是针对 asap.net 而不是 php。

我实际上想使用组合框而不是单选按钮。

到目前为止，我一直在使用视图来显示数据，但是当我插入新数据时，我直接插入到表中（它有 3 个字段而不是显示的 4 个），所以我需要显示名称字段作为选项但是将 id（加上 2 个日期）插入符合视图的表之一。

有人对如何实现这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T02:46:35.053

在主文件中

```
<?php include 'file.php'; ?>

    <script  type="text/javascript">

    active: {
      title: 'Activo',
      width: '5%',
      type: 'radiobutton',
      options: <?php echo $options ; ?> 

    </script> 
```

在php中`file.php`

```
<?php
    //Open database connection
    include 'Connections/localhost.php';
$result = mysql_query("SELECT
id,
option
FROM
options;");

        //Add all records to an array
        $rows = array();
        while($row = mysql_fetch_array($result))
        {
            $rows[$row['id']] = $row['option'];

        }

        //Return result to jTable
        $options = json_encode( $rows);

    //Close database connection
    mysql_close($localhost);

?> 
```

# facebook - 致命错误：在第 1039 行的 base_facebook.php 中

> ID：12286349
> 
> 赞同：0
> 
> 时间：2012-09-05T16:59:47.417
> 
> 标签：facebook, facebook-graph-api, authentication, iframe, facebook-php-sdk

我收到以下错误

> 未捕获的 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。

我的框架应用程序包含两个页面 -`index.php`和`index1.php`. 默认情况下，加载时，顶部`index.php`有以下链接：`index1.php`

```
<a href="index1.php">index1</a> 
```

还有以下代码：

```
<?PHP
include("facebook.php");
$config = array();
$config['appId'] =$appId;
$config['secret'] = $appSecret;
$fb = new Facebook($config);
$access_token = $fb->getAccessToken();
$user_profile = $fb->api('/me','GET');
$userid = $fb->getUser();
?> 
```

`index1.php`顶部的代码与 index.php 相同。

当我加载应用程序时，它不会给出任何错误并且可以完美加载，但是当我单击它的链接时`index1.php`会给出

> 未捕获的 OAuthException：必须使用活动访问令牌在 1039 处查询 base_facebook.php 中有关当前用户的信息

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:06:46.603

您可能没有有效的访问令牌。要获得一个，用户必须授权您的应用并登录。您可以尝试`var_dump($access_token)`——我怀疑您可能会发现它返回`null`或`false`

你可以尝试类似的东西

```
if(($access_token = $fb->getAccessToken()) && ($userid = $fb->getUser())) {
    $user_profile = $fb->api('/me','GET');
} 
```

# jquery - iPad 上不显示滚动条

> ID：12286351
> 
> 赞同：0
> 
> 时间：2012-09-05T16:59:50.680
> 
> 标签：jquery, jscrollpane, jquery-jscrollpane

我正在使用 jQuery 1.8.1 和 jScrollPane v2.0.0beta12。滚动条在桌面浏览器上看起来不错，但它们根本不包含在 iPad 上。通过检查 DOM（使用 Adob​​e Shadow），我可以看到这些滑块的 div 元素不存在。有没有人遇到过类似的问题并解决了？我感谢在这个问题上的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:13:50.077

默认情况下，滚动条不会显示在移动浏览器上。您需要一个专门为移动浏览器显示您自己的滚动条的小部件。请注意，您仍然可以使用两指滑动来滚动。

请参阅[http://jquerymobile.com/demos/1.1.1/docs/](http://jquerymobile.com/demos/1.1.1/docs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:04:57.907

只是预感，但尝试将其添加到您的脑海中，看看是否有帮助：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"> 
```

# java - regId 始终为空

> ID：12286356
> 
> 赞同：0
> 
> 时间：2012-09-05T17:00:24.127
> 
> 标签：java, android, android-c2dm

我正在将 GCM 实施到我的应用程序中。[我使用这里](https://developer.android.com/google/gcm/index.html)的教程作为起点。

问题是我`regId`的总是`null`：

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);
final String regId = GCMRegistrar.getRegistrationId(this);

if (regId.equals(""))
{
    GCMRegistrar.register(this, "627xxxx78");
}
else
{
    if (GCMRegistrar.isRegisteredOnServer(this))
    {
        Log.i(TAG, "Already registered regId : " + regId );
    }
    else
    {
        final Context context = this;

        mRegisterTask = new AsyncTask<Void, Void, Void>() {
            @Override
            protected Void doInBackground(Void... params) {
                boolean registered =
                        ServerUtilities.register(context, regId);

                if (!registered)
                {
                    GCMRegistrar.unregister(context);
                }
                return null;
            }

            @Override
            protected void onPostExecute(Void result) {
                mRegisterTask = null;
            }
        };

        mRegisterTask.execute(null, null, null);
    }
} 
```

在上面的代码中，`ServerUtilities.register`永远不会调用，因为 `GCMRegistrar.getRegistrationId(this)`; 总是返回一个空字符串。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T14:16:07.597

确保您的模拟器或设备已使用 Google 帐户登录。我遇到了同样的问题。我只是登录了设备的谷歌帐户，大声笑，我得到了 regId。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:18:06.123

我有同样的问题。在您的应用程序清单文件中添加以下内容：

```
 package="yourApplicationPackage"

      <uses-permission android:name="android.permission.GET_ACCOUNTS"/>
      <uses-permission android:name="android.permission.WAKE_LOCK"/>
     <permission
        android:name="yourApplicationPackage.permission.C2D_MESSAGE"
       android:protectionLevel="signature" />
    <uses-permission
        android:name="yourApplicationPackage.permission.C2D_MESSAGE" />
  <!-- This app has permission to register and receive data message. -->
   <uses-permission
        android:name="com.google.android.c2dm.permission.RECEIVE" />

    <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <!-- Receives the actual messages. -->
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <!-- Receives the registration id. -->
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="yourApplicationPackage" />
         </intent-filter>
    </receiver>
     <service android:name="yourApplicationPackage.GCMIntentService"/> 
```

必须在应用程序包中保留此“yourApplicationPackage.GCMIntentService”

yourApplicationPackage.GCMIntentService 代码是这样的。

```
 public class GCMIntentService extends GCMBaseIntentService  {

@Override
protected void onError(Context arg0, String arg1) {
    // TODO Auto-generated method stub

}

@Override
protected void onMessage(Context context, Intent intent) {
    // TODO Auto-generated method stub

 }

@Override
protected void onRegistered(Context context, String registrationId) {
    // TODO Auto-generated method stub
      Log.i(TAG, "Device registered: regId = " + registrationId);
     GcmServer.register(context, registrationId);
}

@Override
protected void onUnregistered(Context arg0, String arg1) {
    // TODO Auto-generated method stub

} 
```

# lua - LUA - 逐位读取二进制文件

> ID：12286364
> 
> 赞同：1
> 
> 时间：2012-09-05T17:00:44.373
> 
> 标签：lua, boolean, binaryfiles

您可以逐字节**读取二进制文件**`f:read(size)`，其中大小表示字节数，但**我如何逐位读取它？**（如果需要，1/8 字节或八位字节）

大多数数据 Int8(1),Uint16(2),Uint32(4),Int*(4) 都可以，但对于 BOOL(0.125 ?)。

谢谢你的帮助 ！

**编辑：**我的问题显然不是一点一点地读取文件，而是设法提取所有数据，包括一些布尔值（不创建 1 位的“移位”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:04:40.853

你不能。字节是可以从文件中读取的最小单位。您可以编写包装按字节访问的代码以使其看起来按位。

从文件中读取布尔值的适当方式取决于它是如何写入的。除非您遇到完全相同的麻烦来一点一点地写入布尔值，否则没有必要以这种方式读取它们。

Lua 文件 API 只处理数字和字符串。要写入布尔值，您需要将其转换为其中一种类型。要阅读它，您将阅读其中一种类型并执行您用于写入的转换的逆操作。例如，您可以转换`true`为`1`和`false`，`0`然后写入和读取数字。或者您可能会尝试将多个布尔值打包到一个数字中。在任何情况下，您都不需要逐位读取或写入文件来读取和写入布尔数据。

# javascript - 无法使用其他应用程序设置的 JavaScript 访问 cookie

> ID：12286365
> 
> 赞同：1
> 
> 时间：2012-09-05T17:00:47.073
> 
> 标签：javascript, cookies, google-chrome-extension, session-cookies, httpcookie

开发 Chrome 扩展并将其与 amazon.com 链接，我从 chrome 扩展的弹出窗口登录用户，并在弹出窗口中设置 cookie，

问题是：

1.  亚马逊的页面，维护自己的 cookie 和我自己的 chrome 扩展的弹出窗口正在维护自己的 cookie。

2.  我想在亚马逊的 cookie 中使用我自己的 chrome 扩展 cookie 值，以便跟踪该特定用户与我的扩展的交互。

注意：我需要 javaScript 代码才能将一个应用程序的 cookie 访问到另一个应用程序。

我阅读了以下文章，但这并不是我想要的： [如何检查 cookie 是否存在，即使它是在另一个应用程序中创建的？（使用 JS 或 C#）](https://stackoverflow.com/questions/10997715/how-to-check-if-a-cookie-exists-even-if-it-was-created-in-another-application)

# css - 如何在 Firefox 中设置 HTML5 验证错误样式

> ID：12286367
> 
> 赞同：2
> 
> 时间：2012-09-05T17:00:50.833
> 
> 标签：css, html, firefox, validation

我已经阅读了无数文章，但我仍然没有找到一种方法来设置 Firefox 中 HTML5 验证错误的样式。有没有人有这个运气？我已经能够在 Chrome 和 IE 中设计一些漂亮的消息（使用[Webshims](http://afarkas.github.com/webshim/demos/) for IE）。

我不喜欢 Firefox 中消息的外观（见截图）。 [这个链接](https://www.w3.org/Bugs/Public/show_bug.cgi?id=10923)听起来并不乐观。[这个](http://blog.oldworld.fr/index.php?post/2010/11/17/HTML5-Forms-Validation-in-Firefox-4)也没有。但是，这些链接有点陈旧。我希望有人已经为较新版本的 Firefox（我使用的是 14.0.1 版）解决了这个问题。

![Firefox 中的 HTML5 验证消息](../Images/39edcc7e82532bb8015deed2121e0bc8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:53:44.423

答案是……没有答案？我继续搜索，但我仍然看不到在 Firefox 中设置这些错误样式的方法。然而，好消息是最新版本的 Firefox (16.0.1) 已经清理了提示的外观，并移除了丑陋的内部矩形（见截图）。不过，用自定义颜色设计这些样式会很好；例如，可能是深色背景上的白色文本。

![在此处输入图像描述](../Images/d8265959ae3eb977d6094159bd9efec2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-15T01:21:49.827

我不确定我是怎么到这里的，这似乎是一个旧线程。但只是为了确保通过的人得到正确的（最新的）答案：

使用 CSS 样式化表单错误可以通过伪选择器完成`:invalid`

因此，对于 Firefox 错误框，您可以使用以下方法将其删除：

```
input[type="number"]:invalid {box-shadow: none;} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-05T17:18:06.877

同样的问题 ==>[如何使用 CSS 设置 HTML5 表单验证错误消息的样式？](https://stackoverflow.com/questions/5328883/how-do-i-style-the-html-5-form-validation-error-messages-with-css)

目前我认为我们不能设计工具提示。您可以为表单使用 novalidate 属性并创建自定义工具提示。

# c - 在 c 中使用 ctime 格式化 Unix 时间戳

> ID：12286369
> 
> 赞同：6
> 
> 时间：2012-09-05T17:00:54.217
> 
> 标签：c, unix, unix-timestamp, ctime

我正在尝试使用 ctime 格式化 10 位 Unix 时间戳（当前为字符串）。

但是，ctime() 需要一个 time_t 类型的参数，而不是字符串。

我必须做什么才能使用 ctime？换句话说，我可以轻松地将字符串转换为 time_t 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T17:33:39.447

你是说你有像 1346426869 这样的字符串并希望它是 time_t？

```
time_t raw_time = atoi("1346426869");
printf("current time is %s",ctime(&raw_time));

> current time is Fri Aug 31 11:27:49 2012 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:06:00.027

time_t 类型只是一个整数。它是自纪元以来的秒数。您需要先解析字符串。

从这里开始：

[http://www.gnu.org/software/libc/manual/html_node/General-Time-String-Parsing.html#General-Time-String-Parsing](http://www.gnu.org/software/libc/manual/html_node/General-Time-String-Parsing.html#General-Time-String-Parsing)

并从那里继续前进。

# android - Android：记住我不工作

> ID：12286377
> 
> 赞同：1
> 
> 时间：2012-09-05T17:01:28.993
> 
> 标签：android, login

我一直在尝试在我的登录屏幕中添加一个记住我的功能。但不知何故，它没有保存我的登录凭据？

有人可以告诉我我做错了什么吗？

我还在学习，所以如果有人有一些指示，请继续让我开心：D

这是我的代码

```
public class WvvZondag extends Activity {

    EditText un,pw;
    TextView error;
    Button ok, cancel;
    CheckBox checkbox;
    private String username, password;
    private SharedPreferences loginPreferences;
    private SharedPreferences.Editor loginPrefsEditor;
    private Boolean saveLogin;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        if (android.os.Build.VERSION.SDK_INT > 9) {
            StrictMode.ThreadPolicy policy = 
                new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);
        }

        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_wvv_zondag);
        un=(EditText)findViewById(R.id.username);
        pw=(EditText)findViewById(R.id.password);
        ok=(Button)findViewById(R.id.login_button);
        cancel=(Button)findViewById(R.id.cancel_button);
        error=(TextView)findViewById(R.id.error);
        checkbox=(CheckBox)findViewById(R.id.checkBox1);
        loginPreferences = getSharedPreferences("loginPrefs", MODE_PRIVATE);
        loginPrefsEditor = loginPreferences.edit();

        saveLogin = loginPreferences.getBoolean("saveLogin", false);
        if (saveLogin == true){
            un.setText(loginPreferences.getString("un", ""));
            pw.setText(loginPreferences.getString("pw", ""));
            checkbox.setChecked(true);
        }

        cancel.setOnClickListener(new OnClickListener(){
            public void onClick(View v){
                finish();
            }
        });

        ok.setOnClickListener(new View.OnClickListener() {

            @Override

            public void onClick(View v) {
                username = un.getText().toString();
                password = pw.getText().toString();

                if (checkbox.isChecked()) {
                    loginPrefsEditor.putBoolean("saveLogin", true);
                    loginPrefsEditor.putString("username", username);
                    loginPrefsEditor.putString("password", password);
                    loginPrefsEditor.commit();

                    // TODO Auto-generated method stub
                    ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
                    postParameters.add(new BasicNameValuePair("username", username));
                    postParameters.add(new BasicNameValuePair("password", password));

                String response = null;

                try {
                    response = CustomHttpClient.executeHttpPost("http://www.wvvzondag2.nl/android/check.php", postParameters);

                    String res=response.toString();

                    res = res.replaceAll("\\s+", "");

                    if(res.equals("1")){
                        Intent loginintent = new Intent(WvvZondag.this, Menu_show.class);
                        startActivity(loginintent);
                    }
                    else
                        error.setText("Gebruikersnaam en/of wachtwoord is incorrect");

                } catch (Exception e) {
                    un.setText(e.toString());
                }
                } else {
                    loginPrefsEditor.clear();
                    loginPrefsEditor.commit();
                }
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_wvv_zondag, menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item){
        switch (item.getItemId()){
        case R.id.menu_website:
            startActivity(new Intent(Intent.ACTION_VIEW).setData(Uri.parse("http://www.wvvzondag2.nl")));
            return true;
        }

        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:05:30.963

您不应该使用它来检索信息吗？

```
 un.setText(loginPreferences.getString("username", ""));
    pw.setText(loginPreferences.getString("password", "")); 
```

# .htaccess - 为什么我的 .htaccess 301 重定向不起作用？

> ID：12286384
> 
> 赞同：0
> 
> 时间：2012-09-05T17:01:48.040
> 
> 标签：.htaccess, redirect, http-status-code-301

我正在尝试将此 URL 重定向到不同的子域，但收到 404。

需要重定向：

www.dustystrings.com/instrumentbuilding/XYZ

到这里：

制造.dustystrings.com/instrumentbuilding/XYZ

我在一台服务器上有 www.dustystrings.com，在另一台服务器上有manufacturing.dustystrings.com（必要性）。

基本上，我想将所有 www.dustystrings.com/instrumentbuilding/ 查询重定向到 Manufacturing.dustystrings.com/instrumentbuilding/

执行此操作的正确 .htacess 301 代码是什么？（阿帕奇服务器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:18:35.313

这应该有效：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www.dustystrings.com[nc]
RewriteRule ^.*/instrumentbuilding/(.*)$ http://manufacturing.dustystrings.com/instrumentbuilding/$1 [r=301,nc] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:26:53.287

使用 htaccess 重定向重定向到 www

使用以下代码创建一个 .htaccess 文件，它将确保所有进入 domain.com 的请求都将被重定向到 www.domain.com .htaccess 文件需要放在您旧网站的根目录中（即放置索引文件的同一目录）

```
Options +FollowSymlinks
RewriteEngine on
rewritecond %{http_host} ^domain.com [nc]
rewriterule ^(.*)$ http://www.domain.com/$1 [r=301,nc]

Please REPLACE domain.com and www.newdomain.com with your actual domain name. 
```

注意* 这种 .htaccess 重定向方法仅适用于启用了 Apache Mod-Rewrite 模块的 Linux 服务器。

# python - 调用函数显示输出

> ID：12286387
> 
> 赞同：2
> 
> 时间：2012-09-05T17:02:09.503
> 
> 标签：python, function

我在使用 python 时遇到问题，需要一些帮助。调用任何函数时，它不再显示输出，而是显示`<function hello at 0x0000000002CD2198>`（hello 是函数名）。我已经重新安装了 Python，但问题仍然存在。前几天还好，开始似乎无缘无故地发生了。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T17:05:13.787

您需要*调用*您的函数，您只打印函数对象本身：

```
>>> def hello():
...    return "Hello World"
...
>>> print hello()
Hello World
>>> print hello
<function hello at 0x1062ce7d0> 
```

注意 the`hello`和`hello()`行之间的区别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T17:05:34.373

调用函数 as `func()`，调用函数时前面有括号：

```
>>> def hello(): 
        print "goodbye" 

>>> hello()    #use parenthesis after function name
goodbye

>>> hello         #you're doing this
<function hello at 0x946572c>

>>>hello.__str__()
'<function hello at 0x946572c>' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T17:05:31.313

我猜你打电话`hello`过来

```
hello 
```

试试`hello()`吧

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T17:27:09.837

只是为了完整起见：

即使`hello`实际被调用，当然也可能`hello()`只是简单地返回另一个函数。

考虑一下：

```
 def hello():
        """Returns a function to greet someone.
        """
        def greet(name):
            return "Hello %s" % name
        # Notice we're not calling `greet`, so we're returning the actual
        # function object, not its return value
        return greet

    greeting_func = hello()

    print greeting_func
    # <function greet at 0xb739c224> 
    msg = greeting_func("World")

    print msg
    # Hello World 
```

# sorting - ZK 框架列表框排序不适用于动态标题？

> ID：12286389
> 
> 赞同：0
> 
> 时间：2012-09-05T17:02:24.477
> 
> 标签：sorting, listbox, zk

嗨，我正在像这样动态显示列表框标题...

```
<listhead children="@load(vm.headerList)">
                <template name="children" var="headerName">
                    <listheader label="@load(headerName)"  ></listheader>
                </template>
            </listhead> 
```

但是当我尝试添加时

```
sort="auto" 
```

listheader 中的属性抛出异常。

任何人都知道如何为动态标题添加排序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T12:27:13.280

我写了一个简单的代码来模拟你的。但没有任何例外。

[http://zkfiddle.org/sample/2gsuhdf/3-Dynamic-List-Header-with-autosorting](http://zkfiddle.org/sample/2gsuhdf/3-Dynamic-List-Header-with-autosorting)

如果您提供可重现的代码和您遇到的异常，也许问题会更清楚。

# jquery - jquery和折叠效果：没有动画直接隐藏

> ID：12286398
> 
> 赞同：0
> 
> 时间：2012-09-05T17:03:08.843
> 
> 标签：jquery, hide, fold

我正在尝试为具有 3-4 个子 div 的 div 设置动画，`fold`效果如下：

```
$("#main div").each(function () {
    $(this).click(function () {
        $(this).effect('fold',{},'2000',callback);
    })
}); 
```

当我点击主 div 时，它通常会消失，效果很好。但实际上，不，它只是消失了。

[这是一个链接](http://nyam.eclecticshots.org/test/)，您可以在其中看到发生了什么（我使用 firefox）-（[链接](http://nyam.eclecticshots.org/test/)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:10:10.740

要使用`effect`动画，您必须包含 jQuery UI 库，或者至少包含与动画相关的部分，因为基本的 jQuery 库只有`linear`和`swing`：

> jQuery 库中唯一的缓动实现是默认的，称为摇摆，以及以恒定速度进行的一种，称为线性。使用插件可以使用更多的缓动功能，最著名的是[jQuery UI 套件](http://jqueryui.com/)。

（引自：[http](http://api.jquery.com/hide/) ://api.jquery.com/hide/ ）

要仅下载效果（“缓动”动画），您可以访问：[jQuery UI 的下载页面](http://jqueryui.com/download)，并仅选择“效果”组件。

# joomla - joomla中的无效令牌

> ID：12286399
> 
> 赞同：1
> 
> 时间：2012-09-05T17:03:22.017
> 
> 标签：joomla, joomla1.5

我正在为我的网站使用 joomla

我的控制器中有这样的功能

```
function genericLogis(){
            $model  = &$this->getModel( JRequest::getCmd( 'view' ) );
            $view   = &$this->getView( JRequest::getCmd( 'view' ), 'html' );
            $view->setModel($model, true);
            $view->setLayout('logistical'); 
            $view->logistical(); 
    } 
```

在我的模型中我有这个

```
function getBasicos(){
        JRequest::checkToken() or jexit( 'Invalid Token' );
            $plantilla=1;
            $db=& JFactory::getDBO();
            $query= "SELECT *
            FROM ".$db->nameQuote('#__accedo_materiales')."
            WHERE ".$db->nameQuote('plantilla')."=".$db->quote($plantilla).";";
            $db->setQuery( $query );
            $materialesBasicos=$db->loadObjectList();
            return $materialesBasicos;
        } 
```

我的观点是这样的形式

```
<?php defined('_JEXEC') or die('Restricted access'); ?>

<form action="index.php?option=<?php echo $option; ?>&amp;view=<?php echo $view; ?>" method="post" name="adminForm">
    .....

    <input type="hidden" name="option" value="<?php echo $option; ?>" />
    <input type="hidden" name="view" value="materiales" />
    <input type="hidden" name="task" value="" />
    <input type="hidden" name="boxchecked" value="0" />
    <?php echo JHTML::_( 'form.token' ); ?>
</form> 
```

为什么当我单击链接查看此表单时，我看到了 Invalid Token！

# javascript - Specifying button clicked in multiple forms in javascript

> ID：12286401
> 
> 赞同：0
> 
> 时间：2012-09-05T17:03:37.837
> 
> 标签：javascript, forms

I need help with some Javascript.

Inside my html I have a form that repeated twice.

```
<form method='post' action='php page'>
   <input type=text id=something name=something value='' />
   <input type="submit" id="final_submit" value="yes">
</form> 
```

This exact form is repeated twice. In javascript when someone clicks on the submit button I need to be able to determine which button was clicked to get the value of something in that form. Right now its automatically just getting the value for the first form even though I click the button on the second form.

Any ideas please.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:01:22.407

Is that what you need?

```
function determineForm(e)
{

 // This prevents the form from actually being submitted.
 // Just remove it when you are done debugging.
 e.preventDefault();

 if (document.querySelectorAll("form")[0] === e.target)
 {
  alert("Form1");
 }
 else
 {
  alert("Form2");
 }
}
document.addEventListener("submit", determineForm, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:27:03.437

As mention in the comments, using duplicate id is wrong. Here is a way to get the value of the input that will work also in using older browsers [`document.forms`](https://developer.mozilla.org/en-US/docs/DOM/HTMLFormElement) and [`forms.element`](https://developer.mozilla.org/en-US/docs/DOM/form.elements)

```
var forms = document.forms;
for(var i=0, l= forms.length; i++){
  forms[i].addEventListener('submit', function(e){
   e.preventDefault();
   var form = e.target;
   var value = form.elements[0].value;
  })
} 
```

This will add a submit event listener to every form in your side and that stops the event and get the value from the first input field in this form.

# math - 点的平行偏移（曲线/斜率）

> ID：12286405
> 
> 赞同：1
> 
> 时间：2012-09-05T17:03:46.867
> 
> 标签：math, opengl, geometry

我有一个点数组（CGPoints），它形成一条曲线，实际上不是真正的曲线，而是短线段。我需要该曲线的平行偏移。如果斜率陡峭，仅将曲线向下移动显然会导致更薄的段。关于我如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:05:30.323

您需要计算每段的[切线/法线，然后沿法线平移点。](http://www.seriesmathstudy.com/tangentexample.htm)

对于折线 - 顶点的法线是它跨越的两条线段法线的某种组合 ((n1 + n2) / 2?)，因此您可能需要在“偏移”曲线计算期间考虑到这一点。

实际上——你所需要的只是正常的——如此[处所示](https://stackoverflow.com/questions/1243614/how-do-i-calculate-the-normal-vector-of-a-line-segment)。

希望这可以帮助。

# macros - 要导出到 csv 的 SAS 宏

> ID：12286406
> 
> 赞同：0
> 
> 时间：2012-09-05T17:03:51.753
> 
> 标签：macros, sas

我正在尝试使用此处的代码，但不确定如何正确调整它。 [https://communities.sas.com/thread/33654?start=0&tstart=0](https://communities.sas.com/thread/33654?start=0&tstart=0)

我正在尝试将 51 个 SAS 数据集导出到 CSV 文件，以便可以将它们导入 R。这是我拥有的宏代码（不起作用）：

```
libname g 'C:\mylibrary';
%macro export(libname, numvars= &numvars.);
  %do i= 1 %to &numvars.;
    proc export data=&libname.StateZip&i
      DBMS=CSV REPLACE 
      outfile= "&libname.StateZip&i.csv"; 
      run;
  %end;
%mend;

%export(&g, numvars= 51); 
```

这是我收到的错误消息：

```
NOTE: Writing TAGSETS.SASREPORT12(EGSR) Body file: EGSR
13         
14         GOPTIONS ACCESSIBLE;
ERROR: Invalid macro name (.  It should be a valid SAS identifier no longer than 32 characters.
ERROR: A dummy macro will be compiled.
15         %macro export(libname, numvars= &numvars.);
16          %do i= 1 %to &numvars.;
17              proc export data=&libname.StateZip&i
18                  DBMS=CSV REPLACE
19               outfile= '&libname.StateZip&i.csv';
20               run;
21          %end;
22         %mend;
23         
24         %export(g, numvars= 51);
24        +(libname, numvars= &numvars.);
           _
           10

ERROR 10-205: Expecting the name of the procedure to be executed.

24        +(libname, numvars= &numvars.);
           _
           180
ERROR 180-322: Statement is not valid or it is used out of proper order.
2                                           The SAS System          11:38 Wednesday, September 5, 2012

180: LINE and COLUMN cannot be determined.
NOTE: NOSPOOL is on. Rerunning with OPTION SPOOL may allow recovery of the LINE and COLUMN where the 
      error has occurred. 
```

您可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:15:22.827

您有一个对 &numvars 的递归引用，这本身就是一个问题，但不是关键问题 - 只是意味着默认值将为空，而不是您想要的值。否则你的代码对我来说很好。我猜你在 %macro 定义之前还有其他问题；您发布的错误使您看起来好像有一个错误解析的令牌，所以而不是 %macro export(

你有 %macro (

无论如何，这对我有用：

```
%let g=c:\temp;
libname g "&g.";
%macro export(libname, numvars=);
  %do i= 1 %to &numvars.;
    proc export data=sashelp.class
      DBMS=CSV REPLACE 
      outfile= "&g.\StateZip&i.csv"; 
      run;
  %end;
%mend;

%export(&g, numvars= 51); 
```

我改变的东西： * 你需要一个 %let g= 来配合你的 libname。你没有定义，但大概你在其他地方做了。* Sashelp.class 而不是使用您的库，因为我没有这些数据集。

不过，更好的答案可能是这样做，使用 FILEVAR 选项并自己写出来。即使您有大量变量，您也可以通过编程方式确定 put 语句，或者只执行一个 proc 导出并从日志中复制。这避免了所有宏的东西，并且避免了你必须制作 51 个不同的数据集。只需制作一个，带有指示变量。几乎无论您在做什么，这都会比拥有一堆不同的数据集并使用宏来弥补它更快（使用带有 PROC 的 BY 组处理等）并且更不容易出错。

```
data have_51;
set sashelp.class;
do _n = 1 to 51;
output;
end;
run;

*I assume you have have_51 already;

data want;
set have_51;
filename=cats("&g.\StateZip",_n,".csv");
run;

proc sort data=want;
by filename;
run;

data _null_;
set want;
file a filevar=filename dlm=',' lrecl=500;
put
name $
age
height
weight
;
run; 
```

# sql - 我需要一个查询，该查询可以每列输出 1 行，同时对该列的内容求和并按另一列分组（内部图表以简化）

> ID：12286408
> 
> 赞同：0
> 
> 时间：2012-09-05T17:04:04.793
> 
> 标签：sql, sql-server, sqlite, pivot

我有一个包含电话记录的数据库（我不是电话推销员，这是紧急呼叫数据）。每一行都是一个通话记录。一些列包含时间信息。每个呼叫还有一个优先级列。它看起来像这样：

```
 PRIORITY    TIMING1     TIMING2     TIMING3
  -----0----------22----------3-----------43 
  -----1----------42----------10----------12
  -----0----------12----------13----------6
  -----2----------23----------12----------37
  -----1----------12----------16----------23 
```

我需要的输出基本上是每个时间的这一行，所有时间的总和按优先级分组为列。我提前知道了固定数量的时间安排和优先级。它看起来像这样：

```
------------Priority 0-------Priority 1-------Priority 2
  Timing1----123--------------332--------------233
  Timing2----265--------------241--------------302
  Timing3----387--------------192--------------201 
```

是否可以在单个查询中执行此类操作？该查询还必须能够在资源相当有限的移动平台上运行，尽管运行时间并不是什么大问题。鉴于此表的大小和内存问题，我宁愿避免使用临时表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:13:38.233

您可以为此使用`UNPIVOT`和：`PIVOT`

这是查询的静态版本 - 静态版本意味着您对值进行硬编码。

```
select *
from
(
  select *
  from
  (
    select priority, timing1, timing2, timing3
    from yourtable
  ) x
  unpivot
  (
    value
    for field in (timing1, timing2, timing3)
  ) u
) x1
pivot
(
  sum(value)
  for priority in ([0], [1], [2])
) p 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/ae19b/1)

您也可以动态执行此操作：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX),
    @colsPivotName as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+ quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('yourtable') and
               C.name LIKE 'timing%'
         for xml path('')), 1, 1, '')

select @colsPivot = 
    STUFF((SELECT distinct ',' + Quotename(priority)
             from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsPivotName = 
    STUFF((SELECT distinct ',' 
           + Quotename(priority) + ' as Priority' + cast(priority as varchar(1))
             from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select col, '+ @colsPivotName +'
      from
      (
        select priority, val, col
        from 
        (
          select priority, ' + @colsUnpivot + '
          from yourtable
        ) x
        unpivot
        (
          val
          for col in ('+ @colsUnpivot +')
        ) u
      ) x1
      pivot
      (
        sum(val)
        for priority in ( '+ @colspivot + ')
      ) p'

exec(@query) 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/ae19b/30)

编辑#1，您在评论中说您使用的是没有`PIVOT`功能的 SQLite。但是您仍然可以使用 a`UNION ALL`然后使用带有 a 的聚合函数来执行此操作`CASE`：

```
select col,
  sum(case when priority = 0 then value end) as Priority0,
  sum(case when priority = 1 then value end) as Priority1,
  sum(case when priority = 2 then value end) as Priority2
from
(
  select priority, timing1 as value, 'timing1' as col
  from yourtable
  union all
  select priority, timing2 as value, 'timing2' as col
  from yourtable
  union all
  select priority, timing3 as value, 'timing3' as col
  from yourtable
) x
group by col 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!7/102af/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:10:21.360

如果您不介意翻转/反转表格，您可以试试这个：

```
SELECT PRIORITY, SUM(TIMING1), SUM(TIMING2), SUM(TIMING3)
  FROM tbl
 GROUP BY PRIORITY
 ORDER BY PRIORITY 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:07:58.200

使用 SQL Sum 和 Over 函数执行聚合求和，请参阅此链接：[http ://www.sqlteam.com/article/sql-sever-2005-using-over-with-aggregate-functions](http://www.sqlteam.com/article/sql-sever-2005-using-over-with-aggregate-functions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T17:11:39.297

既然您说您知道固定数量的行和列，那么这里是简单的实现：

```
SELECT 'Timing1' AS Timing, SUM(IIF(PRIORITY = 0, TIMING1, 0)) AS [Priority 0],
    SUM(IIF(PRIORITY = 1, TIMING1, 0)) AS [Priority 1], 
    SUM(IIF(PRIORITY = 2, TIMING1, 0)) AS [Priority 2]
FROM CallRecords
UNION ALL
SELECT 'Timing2' AS Timing, SUM(IIF(PRIORITY = 0, TIMING2, 0)) AS [Priority 0], 
    SUM(IIF(PRIORITY = 1, TIMING2, 0)) AS [Priority 1], 
    SUM(IIF(PRIORITY = 2, TIMING2, 0)) AS [Priority 2]
FROM CallRecords
UNION ALL
SELECT 'Timing3' AS Timing, SUM(IIF(PRIORITY = 0, TIMING3, 0)) AS [Priority 0], 
    SUM(IIF(PRIORITY = 1, TIMING3, 0)) AS [Priority 1], 
    SUM(IIF(PRIORITY = 2, TIMING3, 0)) AS [Priority 2]
FROM CallRecords 
```

尽管按照@n8wrl 的建议翻转表格，但它可能会更快，除非您绝对需要这种格式。

# android-ndk - android 核心中的 openssl 支持

> ID：12286410
> 
> 赞同：0
> 
> 时间：2012-09-05T17:04:21.957
> 
> 标签：android-ndk, libcurl

我想知道openssl和curl是android核心的一部分..因为我在许多论坛上看到用户正在尝试为android ndk构建openssl和curl并在那里使用..

为什么用户要使用自己的构建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:50:08.440

Android 带有`/system/lib/libssl.so`和`/system/lib/libcrypto.so`，它们是从`www.openssl.org`. 例如，**4.0r1** (ICS) 构建包含版本**1.0.0e**。但是，这些库可能不会公开 OpenSSL 的所有功能。

至于 curl，请查看[Using cURL in Android](https://stackoverflow.com/questions/4952169/using-curl-in-android)以获取参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:29:35.733

他们不是。另一方面，OpenSSL 范围内的加密原语和 HTTP 堆栈都是 Java 端 Android API 的一部分。

为什么人们会自己滚动？可能是为了迁移遗留的 C/C++ 代码，而不是重写为反射的 Java 调用。那些很丑。

# google-maps-api-3 - 是否可以获得地址而不是地点的自动完成结果？

> ID：12286413
> 
> 赞同：0
> 
> 时间：2012-09-05T17:04:34.957
> 
> 标签：google-maps-api-3

*Google Places API 公开了一个自动完成服务，该服务对自动完成地点*很有用，但有时我不需要地点而是*地址*。当我输入我的自动完成小部件和实际的谷歌地图界面时，我可以看到差异。

那么，是否可以实际使用地址自动完成 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:54:32.743

是的，您可以在“地理编码”的自动完成选项中添加可选类型：

```
var defaultBounds = new google.maps.LatLngBounds(
  new google.maps.LatLng(-33.8902, 151.1759),
  new google.maps.LatLng(-33.8474, 151.2631));

var input = document.getElementById('searchTextField');
var options = {
  bounds: defaultBounds,
  types: ['geocode']
};

autocomplete = new google.maps.places.Autocomplete(input, options); 
```

# android - 当我从活动单击返回主时，应用程序保持崩溃

> ID：12286414
> 
> 赞同：0
> 
> 时间：2012-09-05T17:04:36.103
> 
> 标签：android

我收到此错误消息：

```
09-05 19:58:00.883: E/AndroidRuntime(21920): java.lang.RuntimeException: Unable to pause      activity {com.De7kat.Grid/com.De7kat.Grid.De7katGrid}: java.lang.NullPointerException 
```

当我进入活动 2 并尝试通过单击设备上的后退按钮返回活动 1 时。

`de7katgrid`活动代码是：

```
package com.De7kat.Grid;

public class De7katGrid extends Activity {
private MediaPlayer mp;
public Integer[] mSongsIds = {
        R.raw.beet,R.raw.far,
        R.raw.beet,R.raw.far,
        R.raw.beet,R.raw.far,
        R.raw.beet,R.raw.far,
        R.raw.beet,R.raw.far,
        R.raw.beet,R.raw.far,
        R.raw.beet,R.raw.far,
        R.raw.beet,R.raw.far,
        R.raw.beet,R.raw.far,
        R.raw.beet,R.raw.far,
        R.raw.beet,R.raw.far,
        R.raw.beet,    };
public Object getItem(int position) {
    return mSongsIds[position];
}
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid_layout);

    GridView gridView = (GridView) findViewById(R.id.grid_view);

    // Instance of ImageAdapter Class
    gridView.setAdapter(new ImageAdapter(this));

    gridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
             stopPlaying();
             mp = MediaPlayer.create(De7katGrid.this,mSongsIds[position]);
             mp.start();

           }
    });
}
@Override
public void onPause() {
    super.onPause();
    if (mp.isPlaying()) {
       mp.stop();

    }
}

    private void stopPlaying() {
        if (mp != null) {
            mp.stop();
            mp.release();
            mp = null;

       }
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:13:39.340

你为什么不调用你的`stopPlaying()`方法`onPause()`？这比复制代码要好（并且您将摆脱`NullPointerException`，这是因为您不检查是否`mp`为空）：

```
@Override
public void onPause() {
    super.onPause();
    stopPlaying();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:14:12.337

我认为调用 onPause 时您的 mp 为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:11:36.910

当您返回 Activity 时`mp`是`null`在您调用后，`create()`因为您未能释放前一个。像这样改变你的`onPause()`方法：

```
@Override
public void onPause() {
    super.onPause();
    stopPlaying();
} 
```

# java - 为多个用户创建多个 Connection 对象

> ID：12286415
> 
> 赞同：1
> 
> 时间：2012-09-05T17:04:38.960
> 
> 标签：java, jakarta-ee, web-applications, authentication

我使用 Java EE 编写了一个 Web 应用程序来更改表的内容。对于用户身份验证，我使用用户的数据库凭据。我正在使用这些凭据创建 JDBC 连接。

当两个或多个用户同时登录并且使用最新用户的凭据更新 Connection 对象时，就会出现问题。因此，无论是哪个用户进行了更改，最新用户 gt 的用户名都会登录到日志文件中，这是一个巨大的安全问题。

那么如何为多个用户创建多个 Connection 对象，以便进行修改的用户的唯一用户名出现在日志中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:19:59.003

这听起来好像您将连接对象的引用存储在一个静态变量中，而在您的 Web 应用程序中只保留一个连接对象。取而代之的是，您可以使用[HttpSession](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSession.html)将用户特定的连接对象作为[属性](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSession.html#setAttribute%28java.lang.String,%20java.lang.Object%29)存储在用户的会话中。在用户第一次访问应用程序时将连接存储在那里，然后在每个后续请求中，取回连接[，](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSession.html#getAttribute%28java.lang.String%29)检查它是否仍然有效并使用它。

也不要忘记在会话超时后关闭连接。这可以通过实现一个[HttpSessionListener](http://docs.oracle.com/javaee/5/api/index.html?javax/servlet/http/HttpSessionListener.html)来实现，该 HttpSessionListener检查会话中的任何连接并在`sessionDestroyed()`方法中关闭它。

**编辑：**出于多种原因，使用数据库凭据让用户登录应用程序通常不是一个好的设计。但是，如果会话数量较少（因此在 DB 上同时打开的连接数量较少）并且合理设置了 DB 权限，这仍然可以正常工作。

**编辑2：**当然，对这种缓存连接的访问​​需要同步（例如，如果用户试图通过多个同时请求来访问您的应用程序，例如通过打开多个浏览器窗口）。这可能有点（有点）棘手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:20:27.783

您可能希望将用户名/密码/等存储在[HttpSession](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSession.html)中，而不是保留打开并分配给用户的连接列表。想象一下，会有数十或数百个用户——RDBMS 会正确处理如此多的并发连接吗？成千上万的用户呢？

# php - 使用 PHP GET 变量的 MySQL SELECT 语句

> ID：12286423
> 
> 赞同：2
> 
> 时间：2012-09-05T17:05:06.790
> 
> 标签：php, mysql, database, select

我有一个生成 MySQL 选择语句的 PHP 脚本：

select * from words where word = 'Classic'

单词表中只有一个单词的变量 word 等于 Classic。

当我的 PHP 页面执行时，我没有从查询中得到任何结果。如果我回显用于执行查询的字符串，将其剪切并粘贴到数据库中 PHPMyAdmin 的 SQL 窗口中，我也没有得到任何结果。但是，如果我在 PHPMyAdmin 的 SQL 窗口中重新键入 EXACT 字符串（使用相同的引号字符），我会得到一行的正确结果。

select 语句中的 Classic 一词是从 PHP GET 获得的（请参见下面的代码）。我可以回显 $word 变量，并得到“经典”的正确结果。我究竟做错了什么？

这是我的代码：

```
<?php

  require ('dbconnect.php');

  $word = $_GET["word"];

  $selectStr = "SELECT * FROM words WHERE word = '" . $word . "'";

  if ($results = MySQL($dbName, $selectStr))
  {
    $rowCount = MySQL_NUMROWS($results);
  }

  $resultRow = MYSQL_FETCH_ROW($results);

  $wordID = $resultRow[0];

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:07:38.517

拜托，拜托，请净化这个词。`mysql_real_escape_string()`应该做的伎俩。

`$selectStr = "SELECT * FROM words WHERE word LIKE '" . $sanitized_word_i_promise . "'";`应该管用 ：）

只是为了解释一下：“=”应该适用于完全匹配。这包括大写/小写、空格等。在查询中使用它之前，您可能也应该先修剪该结果。

如果您已`foo`存储在数据库中（请注意末尾的空格） - 它不会匹配`foo`，没有空格。你会想要使用`LIKE 'foo%'`- 可能。

无论哪种方式，Sourabh 都是对的，尽管在性能方面，这在尝试匹配精确字符串时并不是什么大问题，您应该先在其他地方寻找问题（例如，数据库中的项目是否完全匹配？） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:10:02.603

首先，您不应该接受任何用户输入并直接将其输入到查询中，而无需对其进行清理或使用准备好的语句。

现在我们已经解决了这个问题：您是否尝试过使用变量和写入的字符串执行 strcmp() ？如

> echo strcmp($_GET['word'], "经典")

如果您得到的结果不是 0，则意味着它们不一样，很可能在 $_GET 变量中会有某种空格。使用`trim()`它来取出空格。也可能是区分大小写的问题。

# css - 悬停时隐藏绝对定位的div

> ID：12286427
> 
> 赞同：0
> 
> 时间：2012-09-05T17:05:25.037
> 
> 标签：css, position, hide

我有这个html：

```
<div class="caption">
    <h2><a href="single-image.html">Sun Flower</a></h2>
    <p class="meta-info-font">I took this photo at some bla bla bla.. and some other stuff.</p>
</div> 
```

为什么这不起作用：

```
.caption {
    position: absolute;
    top: 40%;
    left: 0;
    right: 0;
    background-color: rgba(20,19,19,0.94);
    display: none;
}

.caption:hover {
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:08:19.023

```
.caption {
    position: absolute;
    top: 40%;
    left: 0;
    right: 0;
    background-color: rgba(20,19,19,0.94);
    display: block; /* HERE */
}

.caption:hover {
    display: none; /* HERE */
} 
```

只是你的 div 默认是隐藏的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:09:02.177

尝试

```
.caption {
        position: absolute;
        top: 40%;
        left: 0;
        right: 0;
        background-color: rgba(20,19,19,0.94);
        display: block;
    }

    .caption:hover {
        display: none;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:10:29.967

尝试改变这个：

```
.caption {
    position: absolute;
    top: 40%;
    left: 0;
    right: 0;
    background-color: rgba(20,19,19,0.94);
    display: block;
}

.caption:hover {
    display: none;
} 
```

你的 div 必须是 display:block，所以当你将鼠标悬停在它上面时，它可以是 display:none

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T17:25:27.693

我尝试检查 chrome 和 FireFox 中的 CSS，但它似乎与跨浏览器不兼容。你为什么不写一些javascript你把它隐藏在悬停..

[小提琴](http://jsfiddle.net/sushanth009/RBmvV/)

# php - 通过更改 PHPSESSID cookie 的名称可以获得什么？

> ID：12286441
> 
> 赞同：5
> 
> 时间：2012-09-05T17:06:48.673
> 
> 标签：php

关于 PHPSESSID cookie 命名的最佳实践是什么？Symfony2 允许你通过配置来改变它，你也可以在 php.ini 的 session.name 中改变它。

你为什么要这样做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T17:08:59.780

它允许您在同一站点上运行多个应用程序，每个应用程序都需要自己的 cookie 来永久保存会话 ID。当然，同样可以通过正确设置会话[cookie 路径](http://au.php.net/manual/en/session.configuration.php#ini.session.cookie-path)和/或[cookie 域](http://au.php.net/manual/en/session.configuration.php#ini.session.cookie-domain)来实现。

另一个原因可能是您想隐藏您正在使用 PHP 的事实，而名称 PHPSESSID 就很能说明这一事实。

或者你只是不喜欢这个名字；很大程度上取决于您 - 开发人员 - 如果您愿意，可以选择一个漂亮的名字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T17:17:36.960

它也可以被认为是一种微不足道的“通过默默无闻的安全”实践。各种 HTTP 指纹识别应用程序尝试通过监视服务器标头、页面前缀、会话 ID cookie 名称（您将更改）和 Web 服务器在接收到精心设计的请求时的行为来检测用于实现 Web 应用程序的技术。

尽管这类东西几乎不能提高 Web 应用程序的安全性，但它们可能被用来欺骗潜在的攻击者。杰克的回答指出了主要的好处。

# c# - 如何使用 Httpwebrequest 和 httpwebresponse 识别登录成功？

> ID：12286446
> 
> 赞同：0
> 
> 时间：2012-09-05T17:07:16.167
> 
> 标签：c#, httpwebrequest, httpwebresponse, way2sms

我不明白如何检查登录是否成功。如何使用 httpwebrequest 和 httpresponse 检查登录成功？

我的**代码**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.IO;
using System.Diagnostics;

namespace Way2sms
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }
    private CookieCollection cc = new CookieCollection();
    private void Send_Click(object sender, EventArgs e)
    {
        string uid = txtUsername.Text.Trim();
        string password = txtpass.Text.Trim();
        string message = txtmsg.Text.Trim();
        string no = txtno.Text.Trim();

        try
        {
            WebBrowser wb = new WebBrowser();

            HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://site5.way2sms.com/Login1.action");

            req.Method = "POST";
            CookieContainer con = new CookieContainer();
            req.CookieContainer = con;
            req.CookieContainer.Add(GetC());
            req.KeepAlive = true;

            req.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11";

            req.ContentType = "application/x-www-form-urlencoded";
            req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";

            req.Referer = "http://site5.way2sms.com/content/index.html";

            byte[] data = System.Text.Encoding.Default.GetBytes("username=" + uid + "&password=" + password);

            req.ContentLength = data.Length;

            req.AllowAutoRedirect = true;

            req.ServicePoint.Expect100Continue = true;

            Stream str = req.GetRequestStream();

            str.Write(data, 0, data.Length);

            str.Close();

            HttpWebResponse res = (HttpWebResponse)req.GetResponse();
            wb.ScriptErrorsSuppressed = true;
            wb.DocumentText = new StreamReader(res.GetResponseStream()).ReadToEnd();

            webBrowser1.Navigate(wb.DocumentText);

            HttpWebRequest X = (HttpWebRequest)WebRequest.Create("http://site5.way2sms.com/quicksms.action");
            X.Method = "POST";
            X.CookieContainer = con;
            X.KeepAlive = true;
            X.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11";

            X.ContentType = "application/x-www-form-urlencoded";

            X.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";

            X.Referer = "http://site5.way2sms.com/jsp/InstantSMS.jsp";

            byte[] datax = Encoding.Default.GetBytes("HiddenAction=instantsms&catnamedis=Birthday&Action=sa65sdf656fdfd&chkall=on&MobNo=" + no + "&textArea=" + message);

            X.ContentLength = datax.Length;

            X.AllowAutoRedirect = true;

            X.ServicePoint.Expect100Continue = true;

            str = X.GetRequestStream();

            str.Write(datax, 0, datax.Length);

            str.Close();

            HttpWebResponse resx = (HttpWebResponse)X.GetResponse();

            wb.DocumentText = new StreamReader(resx.GetResponseStream()).ReadToEnd();
        }
        catch (Exception ex)
        { 

        }

    }
    private CookieCollection GetC()
    {

        HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://site5.way2sms.com/");

        req.CookieContainer = new CookieContainer();

        req.CookieContainer.Add(cc);

        req.CookieContainer.Add(cc);

        req.KeepAlive = true;

        req.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11";

        req.ContentType = "application/x-www-form-urlencoded";

        req.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";

        req.Referer = "http://site5.way2sms.com/content/index.html";

        req.AllowAutoRedirect = true;

        req.ServicePoint.Expect100Continue = true;

        return ((HttpWebResponse)req.GetResponse()).Cookies;
    } 
```

这是我使用way2sms 发送短信的代码。我想检查输入的用户名和密码是否正确？那么我该如何检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:14:25.153

**已编辑**

为了做你需要做的事情，你需要了解 HttpWebRequest 和 HttpWebResponse。看看这篇文章，它会给你一个很好的画面。

[使用 HttpWebRequest 和 HttpWebResponse](http://www.c-sharpcorner.com/UploadFile/mahesh/WebRequestNResponseMDB12012005232323PM/WebRequestNResponseMDB.aspx)

之后，您可以通过此功能搜索您的回复：

```
WebRequest _request = (HttpWebRequest)WebRequest.Create("UrlToGet");
using (WebResponse response = _request.GetResponse())
{
    using (StreamReader reader = new StreamReader(response.GetResponseStream()))
    {
        string text = reader.ReadToEnd();
    }
} 
```

你用“文本”变量做什么，取决于你。

# php - 用户头像的存储构建

> ID：12286459
> 
> 赞同：0
> 
> 时间：2012-09-05T17:08:34.400
> 
> 标签：php, apache, photo, user-profile, avatar

用户头像是每个网站的重要组成部分。如何将头像图片文件存储在高性能的服务器上？

这里有几点需要解决：

1.  如何生成用户的文件名？直接通过用户 id 或名称，还是通过散列/md5 id/name？

2.  如何存储文件？都在一本字典或不同的字典中（如何？）。

3.  如果文件的链接是永久链接，则头像文件可以缓存，但是如果用户更改了新头像怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:11:54.493

就个人而言，我在用户的数据库行中存储了一个文本字段，格式为：

```
WWW|HHH|URL 
```

当用户选择文件时会获取宽度和高度 ( `WWW`and `HHH`)，而 URL 只是可以找到头像的地址。

通过不将用户头像放在服务器上，您实际上可以节省大量带宽。

# c++ - 在 Linux 上编译时对 mempcy@GLIBC_2.14 的未定义引用

> ID：12286460
> 
> 赞同：15
> 
> 时间：2012-09-05T17:08:41.690
> 
> 标签：c++, porting, undefined-reference, ftdi

我正在尝试移植一个应用程序来驱动使用 ftdi2332h 芯片的设备从 windows 到 linux。[我按照这些说明](http://www.ftdichip.com/Drivers/D2XX/Linux/ReadMe-linux.txt)在 ubuntu 10.04 系统上安装了 libftd2xx 库。

当我尝试编译任何示例程序时，我收到以下错误：

```
/usr/local/lib/libftd2xx.so: undefined reference to `memcpy@GLIBC_2.14'
collect2: ld returned 1 exit status 
```

有关如何解决此问题的任何指南？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2019-02-21T20:04:44.467

被`mempcy@GLIBC_2.14`称为版本符号。Glibc 使用它们，而[musl 等其他运行时库则不](https://www.openwall.com/lists/musl/2015/05/10/1)使用它们。

在 Linux 上编译的意义在于 Glibc在 2012 年`mempcy@GLIBC_2.14`改变了工作方式。用于复制字节 {begin → end}（低内存地址到高内存地址）。Glibc 2.13 提供了在某些平台上复制 {end → begin} 的优化。我相信“某些平台”包括带有 SSE4.1 的英特尔机器。然后，Glibc 2.14 提供了一个恢复 {begin → end} 行为的方法。`memcpy``memcpy``memcpy``memcpy`

一些程序依赖于 {begin → end} 副本。当程序使用重叠缓冲区时，会`memcpy`产生未定义的行为。在这种情况下，一个程序应该使用`memmove`，但由于发生了 {begin → end} 的副本，它们得以通过。另请参阅[mp3 flash 网站上的奇怪声音](https://bugzilla.redhat.com/show_bug.cgi?id=638477)（由于 Adob​​e Flash）、[Glibc 更改暴露错误](https://lwn.net/Articles/414467/)（在 LWN 上）、[memcpy vs memmove 传奇](https://www.win.tue.nl/~aeb/linux/misc/gcc-semibug.html)和朋友。

要修复它，您似乎可以将以下内容添加到源代码中：

```
__asm__(".symver memcpy,memcpy@GLIBC_2.2.5"); 
```

也许像下面这样。然后在您的项目中包含额外的源文件。

```
$ cat version.c

__asm__(".symver memcpy,memcpy@GLIBC_2.2.5"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-17T20:12:43.863

自述文件提到了 glibc 2.15 附带的 Ubuntu 12.04。您使用的是 glibc 2.11.1 附带的 Ubuntu 10.04。您看到的错误消息告诉您链接到的一些二进制文件（这里很可能`libftd2xx.so`）依赖于比您正在链接的更新的 glibc，考虑到前面的事实，这是合乎逻辑的。

要么`libftd2xx.so`根据系统的 glibc 版本从源代码重新编译（可能不是一个选项，因为它只是二进制文件），或者更新你的操作系统。Ubuntu 10.04 已经很老了。

作为最后的手段（只有在你喜欢的情况下才尝试这样做，嗯，用大锤敲击你的手指），你可以为你的系统编译一个更新的 glibc，然后将它安装在类似`/opt`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-20T16:20:09.023

这是一个带有“opatchauto”的 Oracle 错误。请参阅此网址，[https://dba010.com/2019/06/24/19cgi-12crdbms-opatchauto-re-link-fails-on-target-procob/](https://dba010.com/2019/06/24/19cgi-12crdbms-opatchauto-re-link-fails-on-target-procob/)。解决方法：为每个适用的数据库补丁手动使用“opatch”，而不是“opatchauto”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T17:41:06.460

我不确定，但如果它是您使用的交叉编译器，则必须在某处（不在 and 中）安装兼容版本的基本库，*并且*`/usr/include`您`/usr/lib`必须确保编译器使用它们，而不是那些对于本机编译器。并且您必须确保整个工具链是版本兼容的。（而且我知道这不是一个非常完整的答案，但这就是我所知道的。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T17:23:41.517

您可以下载并编译 libc，然后安装在`/opt/lib/libcX/libc.so.6`. 然后，你可以有一个脚本：

```
LD_LIBRARY_PATH=/opt/lib/libcX:/lib/:/usr/lib:/usr/share/lib
./your_program 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-05T17:11:10.683

升级到 Ubuntu 12.04。我使用 也发生了同样的事情`Qt`，结果发现 glibc 库太旧了。谷歌搜索表明尝试自己升级 glibc 是一个非常危险的提议。

# java - Makefile 运行不止一次

> ID：12286464
> 
> 赞同：0
> 
> 时间：2012-09-05T17:08:58.550
> 
> 标签：java, makefile

我正在尝试用这个 Makefile 编译我的 Java 代码。但是，当我运行 make 时，它​​会多次编译代码。

生成文件：

```
.PHONY: all clean run

SOURCES = \
    Models/CustomException \
    Models/Forest \
    Models/ForestContainer \
    Models/Owner \
    Models/OwnerContainer \
    Models/Tree

SRC = $(addprefix src/, $(addsuffix .java, $(SOURCES)))
BIN = $(addprefix bin/, $(addsuffix .class, $(SOURCES)))

all: ${BIN}

clean:
    -rm -f ${BIN};

${BIN}: ${SRC}
    mkdir -p bin/Controllers;
    mkdir -p bin/Models;
    mkdir -p bin/Views;
    javac -d bin ${SRC};

run: all
    java -cp bin Program; 
```

输出：

```
┌─( klim ) - ( ~/workspace/Forest-mvc )
└─> make

mkdir -p bin/Controllers;
mkdir -p bin/Models;
mkdir -p bin/Views;
javac -d bin src/Models/CustomException.java src/Models/Forest.java src/Models/ForestContainer.java src/Models/Owner.java src/Models/OwnerContainer.java src/Models/Tree.java;
mkdir -p bin/Controllers;
mkdir -p bin/Models;
mkdir -p bin/Views;
javac -d bin src/Models/CustomException.java src/Models/Forest.java src/Models/ForestContainer.java src/Models/Owner.java src/Models/OwnerContainer.java src/Models/Tree.java;
mkdir -p bin/Controllers;
mkdir -p bin/Models;
mkdir -p bin/Views;
javac -d bin src/Models/CustomException.java src/Models/Forest.java src/Models/ForestContainer.java src/Models/Owner.java src/Models/OwnerContainer.java src/Models/Tree.java;
mkdir -p bin/Controllers;
mkdir -p bin/Models;
mkdir -p bin/Views;
javac -d bin src/Models/CustomException.java src/Models/Forest.java src/Models/ForestContainer.java src/Models/Owner.java src/Models/OwnerContainer.java src/Models/Tree.java;
mkdir -p bin/Controllers;
mkdir -p bin/Models;
mkdir -p bin/Views;
javac -d bin src/Models/CustomException.java src/Models/Forest.java src/Models/ForestContainer.java src/Models/Owner.java src/Models/OwnerContainer.java src/Models/Tree.java;
mkdir -p bin/Controllers;
mkdir -p bin/Models;
mkdir -p bin/Views;
javac -d bin src/Models/CustomException.java src/Models/Forest.java src/Models/ForestContainer.java src/Models/Owner.java src/Models/OwnerContainer.java src/Models/Tree.java; 
```

如您所见，它不止一次地运行命令，实际上是 6 次。它运行命令的次数随着 SOURCES 数量的添加/删除而增加/减少

怎么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:17:29.193

只需在 javac 之后添加主类。

```
${BIN}: ${SRC}
    javac -d bin -cp . Models/Tree.java 
```

将自动编译依赖于主类的所有类和文件夹（包）。您的 make 正在一次又一次地编译一些已经编译的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:19:37.357

`Makefile`,中的第一个目标`all`取决于 6 个不同的子目标。据推测，在运行开始时，这些都不存在，因此`make`认为它需要构建这 6 个子目标中的每一个。但是，构建这些子目标中的任何一个实际上都会按照您定义的方式构建所有 6 个子目标 - 但`make`不知道这一点。

最重要的是，它正在做你告诉它的事情。你告诉它做的事情是多余的这一事实并不重要`make`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:20:08.820

对于每个目标 int ${BIN} make 将调用 ${BIN}: ${SRC} 规则，但您在命令行上为 javac 提供所有源代码。您可能希望在 javac 行上将 ${SRC} 替换为 $<。

# jquery - JQuery：如何在表的每一行中选择第 n 个输入？

> ID：12286473
> 
> 赞同：0
> 
> 时间：2012-09-05T17:09:41.173
> 
> 标签：jquery

我有一个包含 n 列的表，每列中有 n-2 个输入。我想遍历单列输入，但不知道如何选择它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:10:58.270

使用[选择`nth-child()`器](http://api.jquery.com/nth-child-selector/)。例如，要获取第三列输入：

```
$('#table-id td:nth-child(3) input') 
```

请记住，根据 CSS 规范，`nth-child()`它是 1-indexed。

# sql - SQL Join table on MAX and condition

> ID：12286474
> 
> 赞同：1
> 
> 时间：2012-09-05T17:09:44.593
> 
> 标签：sql

I have 2 tables.

**Manufacturers**

*   idManufacturer

**Coupons**

*   idCoupon

*   idManufacturer

*   discountPercent

*   couponCode

*   startRange

*   endRange

I need to get all manufacturers along with the coupon with the greatest "discountPercent", if any are availabe for that manufacturer. Each manufacturer should only have one coupon.

This is the SQL I have, which works, besides in specific scenarios (see below):

```
 DECLARE @maxdiscount TABLE
(
      idmanufacturer INT
    , discperc INT
)

INSERT INTO
    @maxdiscount
SELECT
    p.idmanufacturer
    , max(discperc) 
FROM
    cp_manufacturers p
    LEFT OUTER JOIN coupons c ON p.idmanufacturer = c.idmanufacturer
GROUP BY
    p.idmanufacturer

SELECT
    m.idmanufacturer
    , m.discperc
    , couponcode
FROM
    @maxdiscount m 
    LEFT OUTER JOIN coupons c ON  c.idmanufacturer = m.idmanufacturer AND c.discperc = m.discperc 
```

The problem is when there are two coupons for a manufacturer with the SAME discountPercent, then 2 coupons are returned for that manufacturer. In this case, I only want to pull up the coupon with the larger start/end range.

I'm stuck on this part, any help would be appreciated.

Thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:19:39.327

You could change last part

```
SELECT
    m.idmanufacturer
    , m.discperc
    , c.couponcode

FROM
    @maxdiscount m 
    LEFT OUTER JOIN coupons c ON  c.idmanufacturer = m.idmanufacturer AND c.discperc = m.discperc 
    WHERE c.couponcode IS NULL OR
       (c.endRange - c.startRange) = 
       (SELECT MAX(c1.endRange - c1.startRange) 
        FROM coupon c1 
        WHERE c1.idmanufacturer = c.idmanufacturer and c1.discperc = c.disperc) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:22:37.867

Try this

```
 Select m.*, c.*
  From Manufacturers m
     Left Join Coupons c 
        On c.id_Coupon = 
           (Select id_Coupon
            From Coupons
            Where idManufacturer = m.idManufacturer
                And discountPercent = 
                   (Select Max(discountPercent)
                    From Coupons 
                    Where idManufacturer = m.idManufacturer)
                And EndRange-StartRange =
                   (Select Max(EndRange-StartRange) rangeLength
                    From Coupons
                    Where idManufacturer = m.idManufacturer
                        And discountPercent = 
                           (Select Max(discountPercent)
                            From Coupons 
                            Where idManufacturer = m.idManufacturer))) 
```

this shorter version might also work, if there is only one row wth that manufacturer, Discount percent, and Range length...

```
 Select m.*, c.*
  From Manufacturers m
     Left Join Coupons c 
       On idManufacturer = m.idManufacturer
          And discountPercent = 
             (Select Max(discountPercent)
              From Coupons 
              Where idManufacturer = m.idManufacturer)
          And EndRange-StartRange =
             (Select Max(EndRange-StartRange) rangeLength
              From Coupons
              Where idManufacturer = m.idManufacturer
                  And discountPercent = 
                     (Select Max(discountPercent)
                      From Coupons 
                      Where idManufacturer = m.idManufacturer)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T17:24:34.947

If you are using SQL server 2005+ then try:

Chnage your Insert statement to

```
;WITH CTE AS(
      SELECT *,ROW_NUMBER() OVER(PARTITION BY P.IDMANUFACTURER ORDER BY DISCPERC DESC,
                                   DATEDIFF(DD,STARTRANGE,ENDRANGE) DESC) AS ROW_NUM
      FROM   CP_MANUFACTURERS P     
      LEFT OUTER JOIN  COUPONS C 
      ON     P.IDMANUFACTURER = C.IDMANUFACTURER )
INSERT INTO @MAXDISCOUNT 
SELECT  IDMANUFACTURER ,DISCPERC FROM CTE
WHERE   ROW_NUM=1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T17:50:51.963

Without the start/end stuff (which is rather vague ...)

```
WITH guess AS (
        SELECT idmanufacturer
        , MAX(disperc) AS disperc
        FROM coupons
        GROUP BY idmanufacturer
        )
SELECT
    m.idmanufacturer
    , COALESCE(g.discperc, 0)
FROM maxdiscount m  
LEFT JOIN guess g ON  g.idmanufacturer = m.idmanufacturer 
        ; 
```

# uitableview - UITableView 行高

> ID：12286475
> 
> 赞同：0
> 
> 时间：2012-09-05T17:09:45.417
> 
> 标签：uitableview

我有一个 UITableViewCell 的子类。它上面有一些额外的项目，总共 3 个标签和最多 2 个按钮。在创建调用时，`cellForRowAtIndexPath`我调用了一个`resizeToFitSubviews`调整标签大小的方法，并将按钮移动到正确的位置，它将删除未使用的按钮等。此时我知道单元格的最终高度。

我试图将高度存储在 a`NSMutableArray`中，`UITableViewController`以便我可以在`heightForRowAtIndexPath`调用中返回它，但由于某种原因`heightForRowAtIndexPath`在调用之前`cellForRowAtIndexPath`。据我所知，它只被称为一次。

当尚未创建单元格时，我如何知道高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:22:41.017

我很想知道一个更好的解决方案，但我认为在计算单元格的高度后，`cellForRowAtIndexPath`你必须让表格知道重新加载单元格中的数据，然后你才能告诉它正确的高度`heightForRowAtIndexPath`。当然，您应该确保`cellForRowAtIndexPath`在重新加载后不会再次循环自己。糟透了，但有效。

# sql - 使用 .bat 文件中的 ij 连接到 derby 数据库失败

> ID：12286476
> 
> 赞同：0
> 
> 时间：2012-09-05T17:09:49.950
> 
> 标签：sql, jdbc, derby

我有一个 java 应用程序，我需要从中删除数据并将其插入本地 JDBC derby 数据库。我正在尝试使用 ij 实用程序执行执行此操作的 SQL 脚本。我写了一个批处理文件来处理这个。

```
C:
C:\Progra~1\Sun\JavaDB\bin\ij.bat
connect 'jdbc:derby:D:\Documents and Settings\user\My Documents\mydatabase';
run "D:\Documents and Settings\user\sqlscript.sql";
disconnect;
exit; 
```

当我运行批处理文件时，命令提示符将执行到第 2 行。ij 实用程序将加载到命令提示符中，但其余命令将不会运行。我已经手动测试了每一行，它工作正常（就像 SQL 脚本一样）。我需要添加到批处理文件中以执行最后 4 行吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:21:28.607

将这些命令放在一个名为“commands.txt”的文件中

```
connect 'jdbc:derby:D:\Documents and Settings\user\My Documents\mydatabase'; 
run "D:\Documents and Settings\user\sqlscript.sql"; 
disconnect; 
exit; 
```

然后从批处理文件中运行 ij 如下：

```
C:\Progra~1\Sun\JavaDB\bin\ij.bat commands.txt 
```

如果它不在您的当前文件夹中，您可能需要添加到 commands.txt 的确切路径。

# c# - C# 中无法识别的转义序列，翻译自 vb.NET

> ID：12286482
> 
> 赞同：0
> 
> 时间：2012-09-05T17:10:13.017
> 
> 标签：c#, vb.net

我正在尝试将 vb 函数转换为 ac# 方法。下面的表达式在 C# 中是什么？

"<\$日期\$>"

当粘贴到 C# 项目中时，这会导致无法识别的转义序列

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T17:10:54.823

`@`在你的字符串前面放一个。`@"<\$date\$>"`

> 逐字字符串文字由一个 @ 字符后跟一个双引号字符、零个或多个字符以及一个结束双引号字符组成。一个简单的例子是@"hello"。在逐字字符串文字中，分隔符之间的字符被逐字解释，唯一的例外是引号转义序列。特别是，简单的转义序列以及十六进制和 Unicode 转义序列不会在逐字字符串文字中进行处理。逐字字符串文字可能跨越多行。

[http://msdn.microsoft.com/en-us/library/aa691090(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa691090(v=vs.71).aspx)

# jquery - jQuery如何根据任意属性的随机内容选择一个元素

> ID：12286489
> 
> 赞同：1
> 
> 时间：2012-09-05T17:10:40.843
> 
> 标签：jquery, jquery-selectors

我有以下标记。我想根据 URL 的部分匹配锚标记。

其实我有如下标记。而且我知道排序字段名称。我想根据字段名称选择锚点，例如。`sort:resource_locator`基于此，我想选择第一个锚标记，并且我想根据方向给类提供一个小`up/down`箭头。

```
<th><a href="/sme_leads/index/page:1/sort:resource_locator/direction:asc">Resource Locator</a></th>
<th><a href="/sme_leads/index/page:1/sort:business_name/direction:asc">Business Name</a></th> 
```

我想知道如何根据`sort:resource_locator`信息选择锚标签。

我分别知道`$ and ^`结束和开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:14:58.903

您可以使用[Attribute Contains Selector`[name*="value"]`](http://api.jquery.com/attribute-contains-selector/)：

```
$('a[href*="sort:resource_locator"]') 
```

**[演示](http://jsfiddle.net/CrCr3/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:16:29.733

要选择其中带有 a的`a`元素：`sort:``href`

```
$('a').filter(
    function(){
        return this.href.indexOf('sort:') !== -1;
    }); 
```

要基于`direction:`字符串 (`asc`或`desc`) 后面的字符串分配一个类：

```
$('a').filter(
    function(){
        return this.href.indexOf('sort:') !== -1;
    }).addClass(
        function(){
            var href = this.href,
                matches = href.match(/direction\:([a-z]+)/);
            return matches[1];
        });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pgXVs/1/)。

# ruby-on-rails - 付款完成，发件人未登录贝宝

> ID：12286491
> 
> 赞同：0
> 
> 时间：2012-09-05T17:10:47.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paypal, paypal-adaptive-payments

我在网页上使用这个 gem [**active_paypa_adaptive_payment支付系统。**](https://github.com/jpablobr/active_paypal_adaptive_payment)

**preapproval_payment**功能运行良好，我的数据库中有一个**preapproval_key**。

现在我想用我的**preaproval_key**执行协议。

我一直在检查`cancel_preapproval`方法，它确实工作正常。

我不需要在我的订单控制器`cancel_preapproval`中使用我的方法中的方法进入贝宝页面。即：`cancel_order`

```
preapproval_key = @order.payment.preapproval_key
 response = gateway.cancel_preapproval(:preapproval_key => preapproval_key)
   respond_to do |format|
      if response.ack == "Success"
       @order.update_attributes
           format.html { redirect_to user_orders_url(current_user), notice: t(".cancel_order_success") }
       else
           format.html { redirect_to user_orders_url(current_user), alert: t(".cancel_order_wrong") }
      end
    end 
```

我如何与我`preapproval_key`的将资金从汇款人账户转移到收款人账户的协议执行？

是否可以使用此功能执行协议而不是取消与我的协议`preapproval_key`？

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:42:40.843

解决方案是将字段添加`:preapproval_key`到响应中。像，在你的行动中：

```
def your_action

recipients = [{:email => 'receiver_email',
                 :amount => some_amount,
                 :primary => true},
                {:email => 'receiver_email',
                 :amount => recipient_amount,
                 :primary => false}
                 ]
  response = gateway.setup_purchase(
    :return_url => url_for(:action => 'action', :only_path => false),
    :cancel_url => url_for(:action => 'action', :only_path => false),
    :ipn_notification_url => url_for(:action => 'notify_action', :only_path => false),
    :receiver_list => recipients
    :preapproval_key => "your_preapproval_key_here",
  )

respond_to do |format|
   if object.update_attributes
    format.html { redirect_to root_path, notice: t(".success") }
   else
    format.html { redirect_to root_path, alert: t(".wrong") }
   end
  end

end 
```

请注意，您必须有`preapproval_key`可用的。您可以在进行预先批准的付款时将其保存到数据库中，也可以使用 api [**PreapprovalDetails 获取**](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APPreapprovalDetails)

通过这种方式，您可以使用预先批准的付款方式付款。我建议您将字段添加为`:fees_payer`, `:senderEmail`, `:memo`... 等以获取更多详细信息。

问候！

# c# - 调整 TableLayout 单元格中的控件大小

> ID：12286497
> 
> 赞同：0
> 
> 时间：2012-09-05T17:11:02.073
> 
> 标签：c#, winforms

请让我先附上图片，在图片上更容易描述：

![在此处输入图像描述](../Images/02cc1d91328f0dfa9ee70f8834dd6486.png)

TableLayout 设置为 Dock->Fill 用于该 GroupBox 内的表格布局。

如果我将 Group-box 的 Anchor 更改为 Left,Top,Right....然后当我从其右侧边框调整表单大小时，只有 table-layout 的第二列上的控件正在调整大小而不是控件在表格布局的左侧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:16:41.793

您必须去编辑表格布局的行和列，并为第二列选择百分比大小类型

# asp.net-mvc - 具有相同类的多个元素使 jquery click 事件多次触发

> ID：12286500
> 
> 赞同：2
> 
> 时间：2012-09-05T17:11:32.540
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery

我显示用户评论。每个评论都是一个`div`，并且每个评论`div`都有`<a>`带有“”类的标签`commentLikeLink`。我将 jquery click 事件绑定到 ' `commentLikeLink`' 类，但如果我有 10 条评论并单击一个喜欢的按钮，我会触发 10 次事件。
我知道发生这种情况是因为我多次上同一堂课。但是如何阻止呢？
这是代码：

```
...
<div class="commentBox"">
...
@Html.ActionLink(likeText, "LikeComment", "Comment", null, new { id = Model.CommentId, @class = "commentLikeLink" })    
... 
```

事件代码：

```
$(function () {
            $('.commentLikeLink').click(function (event) {
                var commentId = event.target.id;

                $.ajax({
                    url: this.href,
                    type: 'POST',                    
                    data: { commentId: commentId },
                    context: this,
                    success: function (result) {
                        if (result.msg == '1') {
                            $(this).text('Dislike');
                        }
                        else if(result.msg == '2') {
                            $(this).text('Like');
                        }

                    }
                });
                return false;
            });
        }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T17:30:14.497

您不应该获得 10 次点击。您可以将 click 事件绑定到类，但触发事件的上下文是单个元素，因此如果您有一些看起来像这样的标记：

```
<p>
    <a href="#" class="clickItem">Liked?</a>
    <br />
    <a href="#" class="clickItem">Liked?</a>
    <br />
    <a href="#" class="clickItem">Liked?</a>
    <br />
    <a href="#" class="clickItem">Liked?</a>
</p> 
```

然后这将起作用，将链接文本设置为“喜欢！” 当每一个被点击时：

```
$(document).on("click", ".clickItem", function (ev) {
    $(this).text("Liked!");
}); 
```

你调试过代码吗？您确定一次获得 10 次点击吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-04T15:24:00.763

是的，将点击事件绑定到类是一个更好的解决方案，但是如果您在它自己的项目或它自己的类上使用它，它实际上可以被多次触发！

所以不要这样做：`$('.commentLikeLink').click(function (event) {`//在这里做事}

你应该这样做，它只会触发一次：

```
$(document).on("click", ".commentLikeLink", function (ev) {
    //do things here
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T17:28:42.480

当我不小心在页面中多次包含相同的 .click 脚本函数时，我曾经发生过这种情况。确保您的 javascript 只包含一次

# android - 在 Android 2 (API 5) 中模拟堆栈视图？

> ID：12286506
> 
> 赞同：6
> 
> 时间：2012-09-05T17:11:44.480
> 
> 标签：android, widget, stackview

我的应用程序必须有一个可以显示卡片的小部件，并且用户可以**翻转**卡片。`StackWidget`示例（在 Android 的资源中）有一个很好的小部件：

![在此处输入图像描述](../Images/372e91c719027dadfdeb449880b27518.png)

但是有一个`StackView`小部件的布局，它是可用的`API Level 11`，我必须为 API 级别 5 实现我的应用程序。

我还看到了这个适用于 API 级别 7 及更高级别的小部件，我猜它的用途是`OpenGL ES`：

![在此处输入图像描述](../Images/858fd9e44939264cb5220c32f2a024bb.png)

最后，我们如何在 Android 2 (API 5) 中模拟堆栈视图？或者我们如何实现像第二张图片（上图）这样的小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-16T03:38:25.353

由于安全原因，绝对不可能在小部件中使用自定义视图。您只能使用标有 @RemoteView 注释的系统。

那些花哨的动画可滚动 3D 小部件 OEM 过去在他们的固件中只使用他们的自定义启动器，因为他们知道这些自定义视图并允许它们膨胀。或者，这些小部件也可以是所述自定义启动器的一部分。

# jquery - 输入以冒号开头和不带冒号的不同

> ID：12286509
> 
> 赞同：9
> 
> 时间：2012-09-05T17:11:49.967
> 
> 标签：jquery

之间有什么不同

```
$("input[name='ABC']") // without ":"
$(":input[name='ABC']") // with ":" 
```

两者对我来说都是一样的，所以我们应该用冒号“：”还是不用冒号？哪个更正确？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T17:13:21.517

`input`只会专门选择`<input>`元素。

[`:input`](http://api.jquery.com/input-selector/)选择`<input>`, `<textarea>`,`<select>`和`<button>`.

# performance - 两个未排序的单链表到一个排序的单链表

> ID：12286510
> 
> 赞同：3
> 
> 时间：2012-09-05T17:11:50.153
> 
> 标签：performance, algorithm, sorting, data-structures, time-complexity

`M`给定两个大小为和的未排序单链表`N`。任务是创建一个单一的排序链表。不应创建新节点。我想到了两种方法。

# 方法一：

在 MlogM 和 NlogN 中分别对每个列表进行排序。然后合并两个排序列表。
时间复杂度：O( MlogM + NlogN )

# 方法二：

将第二个列表附加到第一个列表的末尾。然后对列表进行排序。
时间复杂度： O( (M + N) log(M + N) )

哪种方法更好？
还有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T17:19:12.877

渐近地说 - 它是一样的。

如果`n<m`那时：

```
O(nlogn+ mlogm) = O(mlogm)
and 
O(n+m)log(n+m)) = O(nlog(n+m) + mlog(n+m)) = O(nlog(m) + mlog(m)) = O(mlogm) 
```

对称地，如果`m<n`两者都是`O(nlogn)`

实际上，对于，方法一是[归并排序](http://en.wikipedia.org/wiki/Merge_sort)`n=m`的第一步

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T09:54:24.333

无论如何，方法 1 是好的。请参阅此计算，如果

*   n=2 和 m=3 nlogn = 0.60，mlogm = 1.43，nlogn + mlogm = 2.03 而 (n+m)log(n+m) = 3.49

*   n=2 和 m=30 nlogn = 0.60，mlogm = 44.31，nlogn + mlogm = 44.91 而 (n+m)log(n+m) = 48.16

*   n=2 和 m=300 nlogn = 0.60, mlogm = 743.14, nlogn + mlogm = 743.74
    而 (n+m)log(n+m) = 748.96

*   n=2 和 m=3000 nlogn = 0.60, mlogm = 10,431.36, nlogn + mlogm =
    10,431.96 而 (n+m)log(n+m) = 10,439.18

*   n=2 和 m=30000 nlogn = 0.60, mlogm = 134,313.64, nlogn + mlogm =
    134,314.24 而 (n+m)log(n+m) = 134,323.46

*   n=2 和 m=300000 nlogn = 0.60 ,mlogm = 1,643,136.38, nlogn + mlogm = 1,643,136.98 而 (n+m)log(n+m) = 1,643,148.19

因为，这背后的明确原因是：无论如何，

```
(n+m) > n & (n+m) > m
log (n+m) >= log n
log (n+m) >= log m 
```

而在 n=m 的情况下，

```
nlogn + mlogm = 2m logm
              = log m (power of 2m)
(n+m) log(n+m) = 2m log (2m)
               = log 2m (power of 2m)
and m(power of 2m) < 2m(power of 2m) 
```

选择第一种方法的唯一简单原因是，**与大数组相比，对小数组进行排序花费更少的时间**。

# android - 意图图像捕获数据==null

> ID：12286514
> 
> 赞同：2
> 
> 时间：2012-09-05T17:12:02.557
> 
> 标签：android, image, android-intent, capture

我有这段代码，它在爱立信 XPERIA 中完美运行，但是当我在 SAMSUNG ACE 中测试应用程序时，出现错误：

> 数据=空

```
String  file=Environment.getExternalStorageDirectory().getAbsolutePath()+ "/picture.jpg";

    Intent i=new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);  
    Uri output = Uri.fromFile(new File(archivo));           
    i.putExtra(MediaStore.EXTRA_OUTPUT, output);
    startActivityForResult(i,CAMERA_REQUEST); 
```

活动结果

```
if (requestCode==CAMERA_REQUEST && resultCode==RESULT_OK){
                    Bundle extras=data.getExtras();
                    bmp=(Bitmap)extras.get("data");
                    image.setImageBitmap(bmp);
                    image.setVisibility(0); 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T17:18:53.043

当您使用`EXTRA_OUTPUT`并指定一个文件时，您通常不会通过结果意图获得任何图像数据作为额外的。相机应用程序应该将数据写入您指定的文件。

如果您包含该额外内容，则应在收到`RESULT_OK`. 或者，您可以删除`EXTRA_OUTPUT`以使结果意图中的数据在所有设备上都可靠。请注意，这会返回低分辨率图片，因为意图系统不是为提供大量数据而构建的。

# google-maps - Mongodb地理空间索引与GoogleMaps Directions Service

> ID：12286524
> 
> 赞同：1
> 
> 时间：2012-09-05T17:12:41.620
> 
> 标签：google-maps, mongodb, google-maps-api-3, geospatial

我最近参与了一个关于基于位置的服务的小型项目，我的目的是在请求乘客（支持 GPS 的 Android 手机）的给定半径内找到最近的出租车（安装了 GPS）。我想使用 MongoDB 的地理空间索引，但事实证明，地理空间索引适用于经纬度，它们计算两点之间的*位移，而不是**距离*。在我的情况下，搜索仅限于一个城市，我不得不去谷歌地图方向服务，因为它会告诉你*在路上*的距离、估计的时间等。

这是否意味着地理空间索引仅在位移足够大时才有意义，因此距离和位移基本上相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T19:47:53.053

地理空间索引的目标是基于多维空间上的位置进行快速数据检索。如果您在 MongoDB 数据库中有出租车位置数据，您可以使用地理空间索引快速选择一组更可能是最近的出租车，但您仍然必须计算道路上的距离（和最终是行驶时间）在道路网络上使用算法。

例如，您知道如果最近的（直线）出租车距离您 20 公里（通过道路测量），您知道半径 20 公里以外的任何出租车肯定会比您的第一个出租车更远（在路上）找到了，所以你对它们不感兴趣。然后，您可以使用 MongoDB 空间索引获取 20 公里半径内的所有出租车，然后您可以找到其中哪一辆距离最短。

# datetime - 将 DATETIME 转换为人类可读的日期

> ID：12286525
> 
> 赞同：4
> 
> 时间：2012-09-05T17:12:44.180
> 
> 标签：datetime, php

我正在尝试将 DATETIME 转换为人们可以实际使用的东西。这是日期：

```
2013-09-05 11:52:10 
```

我在用着：

```
date("D, d M Y", '2013-09-05 11:52:10'); 
```

正在变成：

```
Thu, 01 Jan 1970 
```

对我来说毫无意义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T17:15:57.943

您需要将日期转换为时间戳，然后再将其传递给 date()

```
$time = strtotime('2013-09-05 11:52:10');
echo date("D, d M Y", $time); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T17:14:27.600

这应该是PHP代码吗？如果是这样，正确的是

```
date("D, d M Y", strtotime('2013-09-05 11:52:10')); 
```

如果这与 MySql 有关，则使用正确的函数是[`DATE_FORMAT`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)（但是，您拥有的是无效的 MySql 语法）。请说清楚。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T17:20:13.067

PHP 的`date()`函数只能处理整数时间戳值；它不能处理字符串作为输入。

如果您需要从一种字符串日期格式转换为另一种，您应该使用以下`DateTime::CreateFromFormat()`方法：

```
$dateObj = DateTime::CreateFromFormat($inputString);
$outputString = $dateObj->Format('D, d M Y'); 
```

但是，我建议您编写查询以使用 MySQL 的`UNIX_TIMESTAMP()`函数将日期作为 PHP`date()`函数可以处理的数字时间戳输入 PHP：

MySQL：

```
SELECT UNIX_TIMESTAMP(yourDateField) as yourDateField_timestamp FROM yourTable ... 
```

然后你可以完全按照你的意愿编写 PHP：

PHP：

```
$dateObj = date('D, d M Y', $row['yourDateField_timestamp']); 
```

# java - 从 java 应用程序运行 jar 文件

> ID：12286526
> 
> 赞同：-1
> 
> 时间：2012-09-05T17:12:47.643
> 
> 标签：java, eclipse, process, jar, runtime.exec

> **可能重复：**
> [将 Java 程序运行到另一个程序中](https://stackoverflow.com/questions/12278767/run-java-program-into-another-program)

我尝试从在 Eclipse 中创建的 java 应用程序运行 jar 文件。当我使用下面的源代码运行 jar 文件然后触发 Unable to access jarfile 错误

```
Process process = run.exec("java -jar  TestJava.jar");
InputStream inError = process.getErrorStream();
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inError));
System.out.println("Error=" + bufferedReader.readLine()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:23:22.050

听起来像是`TestJava.jar`在不同的目录中。如果您在 Eclipse 中运行此代码，那么当前工作目录将与您的 Eclipse 项目文件夹相同（除非您对其进行了不同的配置，这是 Eclipse 的默认运行位置）。`TestJava.jar`通过绝对路径或相对于当前工作目录的路径指定路径。

您需要注意的另一件事 - 您需要同时使用`Process`您正在创建的错误流和输出流。实例的默认输出/错误流缓冲区大小`Process`不是很大，如果已满，将导致它`Process`无限期地阻塞以获取更多缓冲区空间。我建议在单独的`Thread`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:21:42.777

设置应运行此进程的工作目录。使用以下语句设置工作目录。

```
Runtime.getRuntime().exec(command, null, new File("path_to_directory")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:22:21.843

首先在 cmd 窗口中尝试 java -jar 命令，看看是否可以运行 TestJava.jar。然后尝试从您的代码中运行相同的命令。

```
Runtime runtime = Runtime.getRuntime();
Process proc = runtime.exec("java -jar TestJava.jar");
System.exit(0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T17:22:30.397

您需要提供 Java 命令的完整路径。

例如，在 Windows 下，你需要类似的东西

```
C:/Program Files/java/jre/bin/java.exe 
```

`ProcessBuilder`&`Runtime.exec`尝试执行命令时不要考虑系统路径

# gdb - gdb 不显示行源

> ID：12286527
> 
> 赞同：8
> 
> 时间：2012-09-05T17:12:54.120
> 
> 标签：gdb

GDB 在 next/stop 之后没有向我显示行源，并且只显示行号和源文件，如下所示：

```
(gdb) n
7   in test/test.c 
```

而我希望它显示当前行，如下所示：

```
(gdb) next
17        char * good_message = "Hello, world."; 
```

.gdbinit 中的任何设置可以帮助我做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T03:34:22.767

> 而我希望它显示当前行，就像这样

在许多平台上，例如`ELF`，编译器记录源（在您的情况下）的路径`test/test.c`和编译目录，允许 GDB 显示源，无论您在哪个目录中调用它。

但是很多平台不够灵活，没有地方记录编译目录。`directory`在这样的平台（例如 AIX）上，您必须要么在编译目录中启动 GDB，要么用命令告诉它在哪里寻找源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-22T04:17:21.520

可能我的回答可能不是一个完美的解决方案，但编译源程序的方式很重要。例如，在我的情况下，如果您这样做`g++ fib.cpp -o fib`然后尝试运行`gdb fib`它，它将不会打印带有`list`. 使用调试标志`g++ -g fib.cpp -o fib`然后使用 gdb 运行解决了我的问题。

# git - Git安装错误

> ID：12286532
> 
> 赞同：0
> 
> 时间：2012-09-05T17:13:05.497
> 
> 标签：git, version-control, github, path

我刚刚安装了 Git，打算从我的命令行中使用它。每次我使用 git 命令时，我都会得到以下输出，似乎我得到了正确的输出和一些奇怪的错误。

```
>C:\Users\Harish Kumar>git --version
>'chcp' is not recognized as an internal or external command,
operable program or batch file.
>git version 1.7.11.msysgit.0
>'chcp' is not recognized as an internal or external command,
operable program or batch file. 
```

这是我的路径变量以防万一：

用户变量：

```
 C:\RailsInstaller\Git\cmd;C:\RailsInstaller\Ruby1.9.3\bin;C:\Users\Harish Kumar\AppData\Roaming\npm\ 
```

系统变量：

```
 C:\MinGW\bin;C:\Program Files\Java\jdk1.6.0_33\bin;
 C:\Program Files\Java\jre6\bin;C:\Program Files\nodejs\;
 C:\Program Files(x86)\Git\cmd;C:\RailsInstaller\Git\cmd;C:\RailsInstaller\Ruby1.9.3\bin;
 C:\Users\Harish Kumar\AppData\Roaming\npm\ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:24:22.680

您应该通过 msysgit 使用 git。这将设置所有路径。

# android - 连接状态更改时，BroadcastReceiver 会导致 Android 应用程序崩溃

> ID：12286551
> 
> 赞同：1
> 
> 时间：2012-09-05T17:14:31.517
> 
> 标签：android, crash, broadcastreceiver

我有以下代码：

```
 private BroadcastReceiver mConnReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
    /*
    boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
    String reason = intent.getStringExtra(ConnectivityManager.EXTRA_REASON);
    boolean isFailover = intent.getBooleanExtra(ConnectivityManager.EXTRA_IS_FAILOVER, false);

    NetworkInfo currentNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
    NetworkInfo otherNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_OTHER_NETWORK_INFO);
    */
    // do application-specific task(s) based on the current network state, such 
    // as enabling queuing of HTTP requests when currentNetworkInfo is connected etc.
//  Toast.makeText(getApplicationContext(), "test", Toast.LENGTH_LONG).show();
    //      if(!check3G()||!checkWifi())
        updateUI();
    }
    };
       /*
        * method to be invoked to register the receiver
        */
       private void registerReceivers() {    
           registerReceiver(mConnReceiver, 
               new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));
       } 
```

我在 oncreate 方法中注册接收器，如下所示：

```
 public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_menu);
    registerReceivers();
    /* Code omitted*/
    } 
```

在 ondestroy 中

```
 public void onDestroy(){
     unregisterReceiver(mConnReceiver);
    super.onDestroy();      
} 
```

现在，每当连接状态发生变化时，我都想调用 updateUI();

但是当它发生变化时，该函数被调用，但应用程序崩溃了。我不确定我做错了什么，任何建议都会有所帮助。

谢谢

编辑：

LogCat 日志：

```
09-05 04:04:56.968: I/ActivityManager(246): Start proc edu.ucla.pam for activity edu.ucla.pam/.LoginScreenActivity: pid=7158 uid=10008 gids={3003, 3002, 3001, 1015, 1028}
09-05 04:04:57.757: I/ActivityManager(246): Displayed edu.ucla.pam/.LoginScreenActivity: +856ms
09-05 04:05:23.347: I/ActivityManager(246): START {cmp=edu.ucla.pam/.MenuMainActivity (has extras) u=0} from pid 7158
09-05 04:05:23.574: I/ActivityManager(246): Displayed edu.ucla.pam/.MenuMainActivity: +173ms
09-05 04:05:37.386: E/AndroidRuntime(7158): java.lang.RuntimeException: Unable to instantiate receiver edu.ucla.pam.receiver.ConnectivityReceiver: java.lang.ClassNotFoundException: edu.ucla.pam.receiver.ConnectivityReceiver
09-05 04:05:37.386: E/AndroidRuntime(7158): Caused by: java.lang.ClassNotFoundException: edu.ucla.pam.receiver.ConnectivityReceiver
09-05 04:05:37.398: W/ActivityManager(246):   Force finishing activity edu.ucla.pam/.MenuMainActivity
09-05 04:05:37.925: W/ActivityManager(246): Activity pause timeout for ActivityRecord{4225a750 edu.ucla.pam/.MenuMainActivity}
09-05 04:05:39.296: I/ActivityManager(246): Process edu.ucla.pam (pid 7158) has died.
09-05 04:05:39.296: I/WindowState(246): WIN DEATH: Window{4221fec0 edu.ucla.pam/edu.ucla.pam.LoginScreenActivity paused=false}
09-05 04:05:39.300: I/WindowState(246): WIN DEATH: Window{4250fe58 edu.ucla.pam/edu.ucla.pam.MenuMainActivity paused=false}
09-05 04:05:39.304: W/ActivityManager(246): Force removing ActivityRecord{42153568 edu.ucla.pam/.LoginScreenActivity}: app died, no saved state
09-05 04:05:56.227: I/ActivityManager(246): Start proc edu.ucla.pam for broadcast edu.ucla.pam/.receiver.ConnectivityReceiver: pid=7325 uid=10008 gids={3003, 3002, 3001, 1015, 1028}
09-05 04:05:56.398: E/AndroidRuntime(7325): java.lang.RuntimeException: Unable to instantiate receiver edu.ucla.pam.receiver.ConnectivityReceiver: java.lang.ClassNotFoundException: edu.ucla.pam.receiver.ConnectivityReceiver
09-05 04:05:56.398: E/AndroidRuntime(7325): Caused by: java.lang.ClassNotFoundException: edu.ucla.pam.receiver.ConnectivityReceiver
09-05 04:05:56.398: W/ActivityManager(246): Process edu.ucla.pam has crashed too many times: killing!
09-05 04:05:56.398: I/ActivityManager(246): Killing proc 7325:edu.ucla.pam/u0a8: crash 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:33:23.393

事实证明，问题出在一些遗留代码上。在 Manifest 中注册了一个额外的 ConnectivityReceiver，它从未被实例化，导致应用程序崩溃。

我将很快发布遗留代码。

感谢你的帮助。

# javascript - 为两个 ID 设置一个变量的正确语法

> ID：12286553
> 
> 赞同：0
> 
> 时间：2012-09-05T17:14:36.510
> 
> 标签：javascript, jquery

我有这个变量

```
var item_width = $('#slides li').outerWidth(); 
```

并希望将其修改为也包含在内`#slides2 li`。我是否必须编写两个变量并在各自的函数中使用它们，或者有没有办法将两个 ID 包含在一行中？

我这样做是因为我有两个 div（那个切换），其中包含两个不同的幻灯片轮播，并且我试图尽可能多地共享脚本。

// 编辑推断 //

我在这里遗漏了一些简单的东西，我只知道。第一个 div 没问题，第二个就不行了。我应该改用类吗？（这可能是一个愚蠢的问题，但我对 JS 很陌生）

有相当多的代码，我无法让 jsfiddle 工作，所以我只是在我们的生产站点上发布了一个开发文档。

（网址已删除）

// 编辑 //

没关系，问题出在css上，而不是脚本上。添加`clear: both`以`#slides ul, #slidesTwo ul`将它们全部放在单独的行上。他们都漂浮在外面`ul`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:16:00.167

```
var item_width = $('#slides:visible li,#slides2:visible li').outerWidth(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:24:21.017

`outerWidth()`如果您想要所选元素的 s 数组...

```
$('#slides li, #slides2 li').map(function() { return $(this).outerWidth(); }); 
```

`outerWidth()`只会返回一个`Number`（或`null`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T17:31:33.060

您可以使用逗号构造一个引用两个“幻灯片”的 jQuery 对象：

```
var item_width = $('#slides li,#slides2 li').outerWidth(); 
```

但是，您可能会发现这不是您要查找的内容，因为它只会给出匹配^([1](http://api.jquery.com/outerWidth/))的第一个元素的外部宽度。

所以，即使它不仅仅是一行，也许你正在寻找的是：

```
var item_width = 0;
$('#slides li,#slides2 li').each(function () {
    item_width += $(this).outerWidth();
}); 
```

虽然您可以更简单地使用：

```
var item_width = $('#slides li').outerWidth() + $('#slides2 li').outerWidth(); 
```

前一个版本的代码让你以后可以更方便地扩展代码。正如其他人所建议的那样，您可以考虑为每个幻灯片分配一个公共类`<li>`（例如“slideItem”），然后使用以下代码获取所有幻灯片的总宽度，无论可能有多少：

```
var item_width = 0;
$('.slideItem').each(function () {
    item_width += $(this).outerWidth();
}); 
```

现在，您可能正在寻找最大宽度，而不是总宽度，在这种情况下，代码很容易更改以满足您的需要：

```
var max_width = 0;
$('.slideItem').each(function () { //modify the selector to suit your needs.
    max_width = Math.max(max_width, $(this).outerWidth());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T17:19:11.263

为了简化选择两张不同的幻灯片，建议确保它们共享一个公共类。在这种情况下，请尝试将类添加`slides`到它们两者。

```
var $allSlides = $('.slides'); 
```

由于`.outerWidth()`只会返回集合中第一个元素的宽度，因此您可能需要遍历元素并执行相同的操作。

```
$allSlides.each(function(index, element) {
    var $this = $(this),
        outerWidth = $this.outerWidth();

    doSomething($this);
}); 
```

# ios - UIViewController 包含

> ID：12286554
> 
> 赞同：2
> 
> 时间：2012-09-05T17:14:37.310
> 
> 标签：ios, cocoa-touch, ios5, uiviewcontroller

我正在尝试在我的一个项目中使用 UIViewController 包含功能。该应用程序只能在横向模式下使用。

我将 UIViewController **A**添加为 UIViewController **B**的子视图，并将**A的主视图添加为****B**视图之一的子视图。我还在 B 中保存了对 A 的引用：

```
@interface BViewController : UIViewController

@property (retain, nonatomic) AViewController *aVC;

@end

@implementation BViewController : UIViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.aVC = [self.storyBoard instantiateViewControllerWithIdentifier:@"A"];
    [self addChildViewController:self.aVC];
    [self.myContainerView addSubview:self.aVC.view];
}

@end 
```

我遇到的问题是横向没有得到尊重。我进行了一些调试并找到了解决方案，但我担心它并不理想，因为它更像是一种 hack：

在 B 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.aVC = [self.storyBoard instantiateViewControllerWithIdentifier:@"A"];
    [self addChildViewController:self.aVC];
    [self.myContainerView addSubview:self.aVC.view];
    [self.aVC didMoveToParentViewController:self];
} 
```

在一个：

```
- (void)didMoveToParentViewController:(UIViewController *)parentVC
{
    // Interchange width and height
    self.view.frame = CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y, self.view.frame.size.**height**, self.view.frame.size.**width**);
} 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T17:33:37.073

你的代码：

```
self.aVC = [self.storyBoard instantiateViewControllerWithIdentifier:@"A"];
[self addChildViewController:self.aVC];
[self.myContainerView addSubview:self.aVC.view]; 
```

总是错的。`didMoveToParentViewController:`将其添加到父级后，您必须发送给子级控制器。在这里查看我的讨论：

[http://www.aeth.com/iOSBook/ch19.html#_container_view_controllers](http://www.apeth.com/iOSBook/ch19.html#_container_view_controllers)

至于轮换，很可能你只是做得太早了。`viewDidLoad`该应用程序以纵向开始，并且在调用时尚未旋转到横向。我在这里给出这个问题的解决方案：

[http://www.aeth.com/iOSBook/ch19.html#_rotation](http://www.apeth.com/iOSBook/ch19.html#_rotation)

请注意那里的建议，即您要等到`didRotateFromInterfaceOrientation:`完成设置视图的外观。我想你在这里可能会遇到我在那里描述的同样的问题。

# c++ - NVIDIA GTX670M 上的 OpenCL

> ID：12286557
> 
> 赞同：1
> 
> 时间：2012-09-05T17:14:44.177
> 
> 标签：c++, opencl, nvidia

我使用 OpenCL 在 Win64 上编写了一个 C++ 应用程序。我下载了 CUDA SDK 4.2 并在我的 lib 目录中安装了 OpenCL.lib。在第一次调用 OpenCL 时：

```
 cl_uint n = 0;
    cl_int err = ::clGetPlatformIDs(0, NULL, &n); 
```

我的应用程序出现故障（出现系统致命错误）。有人在 NVIDIA GTX670M 上遇到同样的问题吗？你是如何解决这个问题的？

# ruby-on-rails - RABL - 子节点内的属性

> ID：12286561
> 
> 赞同：1
> 
> 时间：2012-09-05T17:14:53.230
> 
> 标签：ruby-on-rails, ruby, json, rabl

如果我使用 node() 方法在 RABL 中创建一个子节点，我如何控制呈现的属性？

JSON 输出是这样的：

```
[
    {
        "location": {
            "latitude": 33333,
            "longitude": 44444,
            "address": "xxxxxxx",
            "title": "yyyy",
            "url": "http://www.google.com",
            "rate": {
                "created_at": "2012-09-02T11:13:13Z",
                "id": 1,
                "location_id": 1,
                "pair": "zzzzzz",
                "updated_at": "2012-09-02T12:55:28Z",
                "value": 1.5643
            }
        }
    }
] 
```

我想摆脱 created_at、updated_at 和 location_id 属性。

我的视图文件中有这个：

```
collection @locations
attributes :latitude, :longitude, :address, :title, :url
node (:rate) do   
  |location| location.rates.where(:pair => @pair).first
end 
```

我尝试使用部分和“扩展”方法，但它完全搞砸了。此外，我尝试向块添加属性，但它不起作用（输出与属性中指定的一样，但它没有显示每个属性的值）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:00:22.027

您将无法`attributes`在节点块中使用，因为其中的“self”仍然是根对象或集合，因此在您的情况下是`@locations`. 另请参阅[RABL wiki：提示和技巧（何时使用子节点和节点）](https://github.com/nesquena/rabl/wiki/Tips-and-tricks)

在节点块中，您可以通过仅列出您感兴趣的属性来简单地创建自定义响应：

```
node :rate do |location|
  rate = location.rates.where(:pair => @pair).first
  {:id => rate.id, :location_id => rate.location_id, :value => rate.value}
end 
```

您也可以尝试使用部分方法：

在`app/views/rates/show.json.rabl`

```
object @rate
attributes :id, :location_id, :value 
```

然后在您的@locations rabl 视图中：

```
node :rate do |location|
  rate = location.rates.where(:pair => @pair).first
  partial("rates/show", :object => rate)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T18:01:32.123

您的代码：`location.rates.where(:pair => @pair).first`返回整个 Rate 对象。如果您想要特定字段（例如：所有，除了 create_at、updated_at 等），那么您有两个选择：

**在 node() 中**手动描述哈希：****

 **```
node (:rate) do |location|  
   loc = location.rates.where(:pair => @pair).first
   { :pair => loc.pair, :value => loc.value, etc... }
end 
```

或者你可以这样**做**：

```
node (:rate) do |location|  
   location.rates.where(:pair => @pair).select('pair, value, etc...').first
end 
```

...作为旁注，我应该说在您的视图中放置逻辑（rates.where）并不是最佳实践。看看您的控制器是否可以使用 Rate 模型为视图执行此操作。**

# url - STRAVA API 版本 1 和 2 之间有什么区别以及如何使用 v2 获取“流”对象？

> ID：12286563
> 
> 赞同：3
> 
> 时间：2012-09-05T17:14:57.427
> 
> 标签：url, asp.net-web-api

我目前正在修改[STRAVA](http://www.strava.com/) API（Strava 是一个用于记录、共享和比较在骑自行车和跑步活动期间拍摄的 GPS 轨迹日志的网站）。

为了获取这样的活动的流（示例日志）：

```
http://www.strava.com/rides/9999 
```

可以像这样使用 API 的第 1 版：

```
http://www.strava.com/api/v1/streams/9999 
```

它返回一个`json`包含速度、位置、心率等时间序列的字符串。

我的问题是：

1.  有没有办法使用 API v2 获取流？
2.  API v1 的文档在哪里？

API v2 的文档在[这里](https://stravasite-main.pbworks.com/w/browse/#view=ViewFolderNewGuiGallery&param=Strava%20API%20Documentation)

我在某处读到 API 的 POST 和 GET 方法之间存在差异，并且某些数据需要身份验证，但我仍然（还有更多）困惑......

谢谢你的帮助！

* * *

更新：对于到达这里的任何人，至于 2013 年底，Strava 已经（未）发布了他们相当封闭的 V3 API，并关闭了他们的 V1 和 V2 端点。

但是，仍然可以使用以下 URL 获取给定活动的 JSON 流（使用 Id 9999 的活动作为工作示例）：

[http://app.strava.com/stream/9999](http://app.strava.com/stream/9999)

[http://app.strava.com/activities/9999/streams](http://app.strava.com/activities/9999/streams)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T15:58:55.287

请注意，这些 API 已被弃用。 [这](https://stravasite-main.pbworks.com/w/page/58294698/!Sign-up%20for%20new%20API%20notification)是两个版本的 API 文档的链接，以及注册以获取有关 2013 年初推出的新 API 的通知的地方。

您会发现这些版本的 API 仅松散地遵循 REST 样式，因此您的困惑是可以理解的。新的 API 更严格地遵循 REST 风格。对于 V1 和 V2 的资源，GET 通常会返回一个以 json 格式表示该资源的对象。但是，在某些情况下 POST 返回对象而不是创建对象。V2 API 不返回流，只有 V1。IHTH

# c - 获取结构体中数组元素的地址

> ID：12286565
> 
> 赞同：5
> 
> 时间：2012-09-05T17:15:10.763
> 
> 标签：c

我们如何通过结构指针获取数组元素的地址？

我有一个示例代码如下：

```
#include<stdio.h>
#include<string.h>

typedef struct {
    int mynam ;
 } transrules;

typedef struct {
    int ip ;
    int udp;
    transrules rules[256];

}__attribute__ ((__packed__)) myudp;

myudp  udpdata ;
myudp* ptrudp = &udpdata ;

int main(){

    memset (&udpdata , 0 ,sizeof(udpdata));
    ptrudp->ip = 12 ;
    ptrudp->udp = 13 ;
    ptrudp->rules[0].mynam = 15 ;
    printf("%d",ptrudp->rules[0].mynam);
    return 0;

} 
```

我的函数希望将规则 [0] 的地址作为参数传递。是否可以打印规则 [0] 的地址，或者事实上任何规则 [n] ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:17:37.180

> 是否可以打印规则 [0] 的地址或事实上任何规则 [n]

是的，有可能：

```
printf("%p\n", (void *) &ptrudp->rules[i]); /* Cast required by %p. */ 
```

同样的方式你可以传递一个指向`rules[i]`你的函数的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:17:11.760

指向结构的指针指向*结构*，因此元素的地址仍然可用。

```
f(&ptrudp->rules[n]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:28:42.650

是的。您可以像通常对任何其他数组一样访问它，只需使用`->`运算符从结构中获取它：

```
transrules *addr = &ptrudp->rules[n]; 
```

# c++ - 开发交互式外壳

> ID：12286566
> 
> 赞同：0
> 
> 时间：2012-09-05T17:15:13.573
> 
> 标签：c++, python, interpreter, interactive-shell

我有一个申请；为了与之交互，我必须开发一个交互式外壳。shell 将接收用户的输入并将其发送到服务器，服务器将处理并返回响应。

过去我做过这样的事情，但它们通常具有以下格式：

```
Shell>> COMMAND arg1 arg2 arg3 .. 
```

我的实现方式类似于：

```
/* Mock implementation */
while(true) {
   in = readline()
   tokens = in.split(' ') //split based on space
   switch(token[0])  {
      case "Command_a": processA(token[1], token[2])
      case "Command_b": processB(token[1], token[2], token[3])
   }
} 
```

这次我必须为用户输入使用更广泛的语法。`if , if-elseif-else, if-else, switch`如果我使用我目前的方法，那么对于解析和生成响应的大量语句将使事情变得非常困难。

如何以使解释器模块化和可维护的方式解决这个问题？流行的 CLI 接口有哪些实现方式？我将非常感谢一些代码示例。

PS：语言选择有限 C++/Python

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:20:31.427

您可以使用 bison 和 flex 开发自己的解析器和解释器，但更明智的做法可能是嵌入现有的解释器，如 Python、Lua 或 Squirrel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:04:30.200

Python 中的[cmd](http://docs.python.org/library/cmd.html)模块，也许加上[Pyparsing](http://pyparsing.wikispaces.com)应该完美地满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T17:53:40.497

看看[boost::spirit](http://www.boost.org/doc/libs/1_51_0/libs/spirit/doc/html/index.html)，或者像其他人建议的那样嵌入 Lua。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T21:46:31.357

去 cmd 模块：

Cmd 类为编写面向行的命令解释器提供了一个简单的框架。这些通常对测试工具、管理工具和原型很有用，这些原型稍后将被包装在更复杂的界面中。

# android - 拉伸线性布局的图像背景，用作 gridview 中的单元格

> ID：12286569
> 
> 赞同：0
> 
> 时间：2012-09-05T17:15:22.667
> 
> 标签：android, android-gridview

我有这个单元格项目：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView android:id="@+id/titleText" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="50dp"
    android:background="#AA000000" 
    android:gravity="center"
    android:textColor="#FFFFFF"/>

 </LinearLayout> 
```

和这个 GridView：

```
<GridView android:id="@+id/gridView"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:numColumns="auto_fit"
    android:gravity="center"
    android:columnWidth="100dp"
    android:layout_weight="1"/> 
```

我想设置线性布局的背景图像，但是根据图像大小，我得到了不同的单元格高度（我使用不同的图像），这不是很好看......我怎样才能将背景拉伸到固定的高度？不幸的是，gridview 似乎没有 columnHeigth 属性......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:12:22.983

感谢[chet](https://stackoverflow.com/users/1087300/chet)的建议解决了：我设置了线性布局的高度和宽度。

# php - 通过 AJAX 从包含 HTML 内容的页面中获取 PHP 脚本结果

> ID：12286581
> 
> 赞同：0
> 
> 时间：2012-09-05T17:16:21.543
> 
> 标签：php, ajax

我有一个包含 HTML 内容的 PHP 页面。现在我在 HTML 之间运行一些 PHP 代码，我得到了一些结果。事实是，当我尝试通过 AJAX 从该页面获得响应时，它会向我显示整个页面内容以及我正在寻找的结果。我能做些什么来防止页面写入额外的内容。我知道每当在页面上打印某些内容时，它都会响应 AJAX 调用，但我想要一种方法来解决这个问题。

我的页面文件（名称：page.php）：

```
<?php echo $Content->GetData('HEADER'); ?>
    <div id="Content">
      <div id="Page">
        <?php if($Content->GetData('PAGE','IS_TRUE')) : ?>
        <?php if(NULL !== $Content->GetData('PAGE','TITLE')) : ?>
        <?php echo $Content->GetPlugins("Page:" . $Content->GetData('PAGE','ID') . ",BeforeTitle"); ?>
        <div id="Title" dir="rtl">
          <a href="<?php echo $Content->GetInfo('ABS_ROOT') . "page/" . $Content->GetData('PAGE','NAME'); ?>"><?php echo $Content->GetData('PAGE','TITLE'); ?></a>
        </div>
        <?php echo $Content->GetPlugins("Page:" . $Content->GetData('PAGE','ID') . ",AfterTitle"); ?>
        <?php endif; ?>
        <div id="Content" dir="rtl">
          <div style="float: right; width: 966px; padding: 6px">
            <?php echo $Content->GetPlugins("Page:" . $Content->GetData('PAGE','ID') . ",BeforeContent"); ?>
            <?php echo $Content->GetData('PAGE','CONTENT'); ?>
            <?php echo $Content->GetPlugins("Page:" . $Content->GetData('PAGE','ID') . ",AfterContent"); ?>
          </div>
        </div>
        <?php else : ?>
        <div id="Content" dir="rtl">
          <div style="float: right; width: 966px; padding: 6px">
             There is no page like this in our archives.
          </div>
        </div>
        <?php endif; ?>
      </div>
    </div>
<?php echo $Content->GetData('FOOTER'); ?> 
```

如果我像这样在浏览器中写一个地址，`localhost/cload/blog?action=rate`它将通过我的重定向列表并显示`blog`加载插件的 page.php。问题是我想`blog`通过这个地址通过 AJAX 调用我的插件，但它会首先呈现页面数据。

抱歉，如果这很混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:31:44.897

我建议修改`page.php`为一些函数，主要是数据处理函数，然后是输出函数。然后，当您加载页面时，[检查它是否是 AJAX 请求](http://davidwalsh.name/detect-ajax)，如果是，则将您想要的数据回显为 JSON，否则使用输出函数呈现页面。

或者，您可以创建第二个单独的页面，但这可能比单个文件更难维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:44:49.717

是的，您应该检查您的请求是否是 ajax 请求，如果是，您应该更改响应以仅返回任何想要的结果。

这个 php 代码将对此给出一个粗略的想法。

```
if($request->isXmlHttpRequest()){
  return new Response(json_encode($data_array));
} 
```

希望这会有所帮助。

# php - Facebook，我应该在 SQL 中使用数组还是不同的行来表示喜欢的帖子

> ID：12286582
> 
> 赞同：1
> 
> 时间：2012-09-05T17:16:26.250
> 
> 标签：php, mysql, arrays, facebook

我正在创建一个网站，您可以在其中**喜欢** 博客文章和用户更新，所以我应该对每个喜欢传递帖子/博客 ID 的用户使用插入语句，还是应该使用数组并将用户喜欢的内容保存在单个逗号分隔的数组中

像这样：

发布 1 示例 SQL：

```
-------------------------------------------
Likes(user_id)         postid          
-------------------------------------------
user1                  post1
user2                  post1 
```

或数组

```
-------------------------------------------
postid              likes         
-------------------------------------------
post1               user1, user2, user3 
```

此外，facebook如何在墙上随机显示帖子，我的意思是，如果我将更新存储在表格中，当我循环使用这些更新时，我会得到更新，现在我如何添加上传的照片或一个人添加另一个作为朋友等等等，我的意思是他们是否显示新闻提要并与原始帖子链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:19:28.617

您是否曾经关心过获得个人的点赞、取消点赞、搜索用户的点赞，或者甚至搜索用户朋友的点赞？*如果是这样，请为每个用户帖子保存一条记录，并且不要使用逗号分隔的列表/数组。*列表/数组将很快变得难以管理*，*而且它们并不是关系数据库擅长的。

如果需要在屏幕上显示逗号分隔的列表，可以使用`GROUP_CONCAT`获取字符串进行显示。

* * *

就第二个问题而言，我确信存在某种“复杂的算法”，根据用户经常点击的内容，向用户展示更多来自他们朋友的“他们喜欢什么”。在那之后，它可能只是以新事物优先顺序随机排列的各种“墙项目”，其中“墙项目”可以是类型（更新、新闻、视频、图像、签到、应用程序-使用权）。我还怀疑订单还有其他问题，因为订单肯定*不是*发布时间，也不是上次触及的时间。

我还记得以前的一些用户设置，您可以在其中选择不同类型帖子的权重（例如 10 倍更新、3 倍新闻、5 倍视频、5 倍图像、1 倍签到、1 倍应用程序访问），这将改变“随机性” “从另一端出来的东西。在这种情况下，天真地，它将是 1d25，映射到 1-10=>updates、11-13=>news、14-19=​​>video 等。

# python - 为什么我可以从 Django shell 导入库，但不能在我的站点中导入？

> ID：12286588
> 
> 赞同：1
> 
> 时间：2012-09-05T17:16:52.950
> 
> 标签：python, django-shell, oauth2app

我正在尝试在我的 Django 应用程序中使用 oauth2app 库。我尝试了几种安装库的方式（easy_install、pip、pip 通过需求文件等），每次安装都很好。此外，每次我可以从 Django shell（manage.py shell）导入库。

但是，当我尝试使用库中的视图时：

```
(r'^oauth2/token/?$', 'oauth2app.token.handler'), 
```

我收到“没有名为 oauth2app 的模块”导入错误。我尝试将 Django 调试页面中的 Python 路径与 shell 内的“print sys.path”中的路径进行比较，看起来是一样的，所以我一生都无法弄清楚为什么一个有效而另一个没有。

任何人都可以帮助解释发生了什么吗？我认为 Django shell 是与 Django 实例等效的环境......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:30:39.993

没关系，看起来这只是图书馆网站上的错误文档的一个案例；当我将 urls.py 行更改为：

```
from oauth2app import token
...
(r'^oauth2/token/?$', token.handler), 
```

它奏效了，*叹息*。

# ios - 从移动网络打开本机应用程序中的深层内容链接

> ID：12286591
> 
> 赞同：5
> 
> 时间：2012-09-05T17:17:06.233
> 
> 标签：ios, mobile-safari

我公司有一个应用程序（iOS 和 Android），适用于以下场景。我正在努力帮助我的工程师和产品团队指明正确的方向。

当我们的一位用户点击我们的一封电子邮件、推文或 Facebook 帖子中的内容链接，并且他们在他们的移动设备上时，我们会提示用户下载我们的应用程序的链接。这类似于许多应用程序所做的事情，包括 LinkedIn（请参阅 i.stack.imgur.com/glSgJ.png）。

我想这对于来自社交媒体和各种网络资源的新用户来说，对于提高本地应用程序的认知度和下载量来说，是有一定作用的。但是，对于像我这样已经拥有该应用程序的用户来说，这根本没有帮助！
1）单击“不，谢谢”让我留在移动网络上（当我想使用本机应用程序时），2）单击“下载应用程序”将我带到 iTunes App Store 页面以获取我已经拥有的应用程序。

超级烦人。结果，我必须手动打开应用程序，然后搜索有问题的内容。我猜大多数用户不会这样做。更重要的是，取决于应用程序的 UI/UX，我可能永远无法到达那里！

再说一次，我知道我们处理移动 Web 访问的方式与许多其他公司（包括 LinkedIn）一样，但似乎我们将很多潜在的原生应用程序使用留在了桌面上。我希望我们的工程师构建难以捉摸的第三个选项“在应用程序中打开”。

Spotify 和 Rdio 很好地解决了这个问题。以下是这两个应用程序的深层内容链接（在这些公司的情况下，指向特定歌曲）：

*   [http://open.spotify.com/track/2SldBUTJSK6xz43i8DZ5r2](http://open.spotify.com/track/2SldBUTJSK6xz43i8DZ5r2)
*   [http://rd.io/x/QF3NK0JKWmk](http://rd.io/x/QF3NK0JKWmk)

如果您有时间，请先获取 Rdio 或 Spotify 应用程序的免费版本。然后，如果您从 iOS 设备打开上面的这些链接，您会发现对于现有的本地应用程序用户来说体验是多么美妙：Rdio 有一个不错的“点击以在 Rdio 中打开”链接（http://i.stack.imgur .com/B7PuE.png），而 Spotify 的链接更加清晰，“我有 Spotify”（http://i.stack.imgur.com/Q3IV6.png）。这两个应用程序还包括一个下载应用程序的链接，供新应用程序用户使用。更重要的是，这两个应用程序都会对用户进行 cookie：未来访问移动网络上的链接（无论是来自电子邮件、Twitter、Facebook 等）会自动打开应用程序，而不是每次都提示您选择。超级方便。

问题：

**1）他们如何做到这一点？**我最初只关心iOS（我在上面测试过），但同样的情况应该适用于Android。

**2）为什么没有更多的应用程序这样做？** 这似乎不像火箭科学，所以我错过了一个关键原因，为什么这可能是一个坏主意？我的一半问题是说服用例。

**3) 为什么我没有看到关于这种技术的讨论？**我已经搜索了大量的 iOS 解决方案。我提出了很多关于 URL 注册的讨论（主要是应用程序到应用程序），但没有人真正提到我描述的场景类型（移动 Web 提示打开本机应用程序）。

似乎通过最少的工程，应用程序开发人员可以显着增加本地应用程序的使用，从移动网络转换。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T13:38:30.100

Android 支持深度链接。请参考 [http://developer.android.com/training/app-indexing/deep-linking.html](http://developer.android.com/training/app-indexing/deep-linking.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T12:15:39.907

Tapstream 的[延迟深度链接](http://blog.tapstream.com/post/74291449945/deferred-deep-links-bring-intent-based-user-acquisition)可以将用户发送到应用程序中的特定视图（仅限 iOS），即使该应用程序尚未安装在他们的设备上。

# jquery - Jquery onBlur POST this.val()

> ID：12286597
> 
> 赞同：0
> 
> 时间：2012-09-05T17:17:23.323
> 
> 标签：jquery, ajax, post

如何在模糊中触发当前输入的 jQuery POST。

`onblur="$.post(url,this.value)"`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T17:20:05.583

您可以使用[`.blur()`](http://api.jquery.com/blur/)将`blur`事件处理程序绑定到`input`您想要的 's，然后简单地[`$.post()`](http://api.jquery.com/jQuery.post/)使用元素的s 调用`value`：

```
$("input").blur(function () {
  $.post('url', { name: this.value });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:37:04.577

您可以发送 ajax 发布请求来完成您的任务。

```
$("input").blur(function () {
   $.ajax({
        type: 'POST',
        url: 'url',
        dataType: 'json',
        data: { 'value' : $(this).val() },
        success : function(result){
        }
    });
}); 
```

# html - 图片无法加载，IE6 到 IE9

> ID：12286601
> 
> 赞同：0
> 
> 时间：2012-09-05T17:17:45.143
> 
> 标签：html, css, internet-explorer

我有两个问题：

1.  我的网站没有从 IE6 上的 index.html 转发 - IE9
2.  图像未加载到任何页面 IE6 - IE9

对于第一个问题，如果您访问[http://www.matthallock.com/](http://www.matthallock.com/)，无论我将其链接到文件（例如，/hamlet.html）还是直接（例如，[http://www. matthallock.com/hamlet.html](http://www.matthallock.com/hamlet.html)）

第二个更麻烦的问题是图像在 Internet Explorer 上显示为空白。此外，问题似乎出在 jQuery 上，因为固定的侧边栏也不起作用。

我尝试了延迟加载的降级，但这并不能解决问题。奇怪的是，如果您访问我的 blog.matthallock.com 博客，没有问题，并且侧边栏的样式看起来是正确的。

外观和功能在 Chrome、Safari 和 Firefox 中正常工作。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:23:47.000

```
<META HTTP-EQUIV="refresh" CONTENT="0;http://www.matthallock.com/hamlet.html"> 
```

您需要`url=`在实际提供 URL 之前指定，否则它只会重新加载当前页面。

```
$("img").lazyload({
    effect : "fadeIn",
    /*
      appear : function(elements_left, settings) {
        console.log("appear");
        console.log(elements_left);
        //console.log(this, elements_left, settings);
      },
      load : function(elements_left, settings) {
        console.log("load");
        console.log(elements_left);
        //console.log(this, elements_left, settings);
      }
    */
}); 
```

您的浏览器控制台免费为您提供：“预期的标识符、字符串或数字” - IE 不喜欢对象定义中的尾随逗号，并且由于您的多行注释，您的结果代码是：

```
$("img").lazyload({effect:"fadeIn",}); 
```

看到那个多余的逗号了吗？删除它，一切都会神奇地起作用。

# python - 从 pandas DataFrame 制作热图

> ID：12286607
> 
> 赞同：147
> 
> 时间：2012-09-05T17:18:21.077
> 
> 标签：python, pandas, dataframe, heatmap

我有一个从 Python 的 Pandas 包生成的数据框。如何使用 pandas 包中的 DataFrame 生成热图。

```
import numpy as np 
from pandas import *

Index= ['aaa','bbb','ccc','ddd','eee']
Cols = ['A', 'B', 'C','D']
df = DataFrame(abs(np.random.randn(5, 4)), index= Index, columns=Cols)

>>> df
          A         B         C         D
aaa  2.431645  1.248688  0.267648  0.613826
bbb  0.809296  1.671020  1.564420  0.347662
ccc  1.501939  1.126518  0.702019  1.596048
ddd  0.137160  0.147368  1.504663  0.202822
eee  0.134540  3.708104  0.309097  1.641090
>>> 
```

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2015-04-09T02:00:13.673

对于今天看到这个的人，我会推荐[这里](http://seaborn.pydata.org/generated/seaborn.heatmap.html)`heatmap()`记录的 Seaborn 。

上面的示例将按如下方式完成：

```
import numpy as np 
from pandas import DataFrame
import seaborn as sns
%matplotlib inline

Index= ['aaa', 'bbb', 'ccc', 'ddd', 'eee']
Cols = ['A', 'B', 'C', 'D']
df = DataFrame(abs(np.random.randn(5, 4)), index=Index, columns=Cols)

sns.heatmap(df, annot=True) 
```

![](../Images/9f1ba31aa593f9ee188083a61a9f048e.png)

`%matplotlib`对于那些不熟悉的人来说，IPython 魔术函数在哪里。

* * *

## 回答 #2

> 赞同：133
> 
> 时间：2018-05-30T12:43:28.707

如果您不需要一个图，并且您只是对添加颜色以表示表格格式的值感兴趣，您可以使用`style.background_gradient()`pandas 数据框的方法。此方法对在例如 JupyterLab Notebook 中查看 pandas 数据帧时显示的 HTML 表格进行着色，结果类似于在电子表格软件中使用“条件格式”：

```
import numpy as np 
import pandas as pd

index= ['aaa', 'bbb', 'ccc', 'ddd', 'eee']
cols = ['A', 'B', 'C', 'D']
df = pd.DataFrame(abs(np.random.randn(5, 4)), index=index, columns=cols)
df.style.background_gradient(cmap='Blues') 
```

[![在此处输入图像描述](../Images/ee0fa8f4d46379330099c3ea3428ee11.png)](https://i.stack.imgur.com/Uc0xC.png)

有关详细用法，请参阅我之前在同一主题上提供[的更详细的答案以及](https://stackoverflow.com/questions/29432629/correlation-matrix-using-pandas/50703596#50703596)[pandas 文档的样式部分](https://pandas.pydata.org/pandas-docs/stable/style.html)。

* * *

## 回答 #3

> 赞同：101
> 
> 时间：2012-09-05T17:42:37.583

你想要`matplotlib.pcolor`：

```
import numpy as np 
from pandas import DataFrame
import matplotlib.pyplot as plt

index = ['aaa', 'bbb', 'ccc', 'ddd', 'eee']
columns = ['A', 'B', 'C', 'D']
df = DataFrame(abs(np.random.randn(5, 4)), index=index, columns=columns)

plt.pcolor(df)
plt.yticks(np.arange(0.5, len(df.index), 1), df.index)
plt.xticks(np.arange(0.5, len(df.columns), 1), df.columns)
plt.show() 
```

这给出了：

[![输出样本](../Images/b14b8a5de9b184b89ceda7895049a21b.png)](https://i.stack.imgur.com/jcFuI.png)

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2017-05-17T19:46:23.810

有用`sns.heatmap`的 api 在[这里](http://seaborn.pydata.org/generated/seaborn.heatmap.html)。查看参数，其中有很多。例子：

```
import seaborn as sns
%matplotlib inline

idx= ['aaa','bbb','ccc','ddd','eee']
cols = list('ABCD')
df = DataFrame(abs(np.random.randn(5,4)), index=idx, columns=cols)

# _r reverses the normal order of the color map 'RdYlGn'
sns.heatmap(df, cmap='RdYlGn_r', linewidths=0.5, annot=True) 
```

[![在此处输入图像描述](../Images/b5c7c6b8bde718bc95f6bedb27775904.png)](https://i.stack.imgur.com/ADgO7.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-03-27T15:44:40.953

如果您想要来自 Pandas DataFrame 的交互式热图并且您正在运行 Jupyter 笔记本，您可以尝试交互式 Widget [Clustergrammer-Widget ，请参阅](https://github.com/maayanlab/clustergrammer-widget)[此处](https://clustergrammer.readthedocs.io/)的 NBViewer 上的交互式笔记本，[此处](https://nbviewer.jupyter.org/github/MaayanLab/clustergrammer-widget/blob/master/Running_clustergrammer_widget.ipynb)的文档

[![在此处输入图像描述](../Images/065c7d129527ec6e1a95f83280aad220.png)](https://i.stack.imgur.com/3177y.png)

对于更大的数据集，您可以尝试开发中的[Clustergrammer2 WebGL 小部件（](https://github.com/ismms-himc/clustergrammer2)[此处](https://nbviewer.jupyter.org/github/ismms-himc/clustergrammer2-notebooks/blob/master/notebooks/3.0_10X_Genomics_2700_Dataset_NBViewer.ipynb)的示例笔记本）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-07-01T18:58:31.747

请注意，作者`seaborn`只想使用分类数据框[。](https://github.com/mwaskom/seaborn/issues/1769) `seaborn.heatmap`这不是一般的。

如果您的索引和列是数字和/或日期时间值，则此代码将为您提供很好的服务。

Matplotlib 热映射功能`pcolormesh`需要*bin*而不是*indices*，因此有一些花哨的代码可以从您的数据帧索引构建 bin（即使您的索引不是均匀分布的！）。

剩下的就是`np.meshgrid`和`plt.pcolormesh`。

```
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

def conv_index_to_bins(index):
    """Calculate bins to contain the index values.
    The start and end bin boundaries are linearly extrapolated from 
    the two first and last values. The middle bin boundaries are 
    midpoints.

    Example 1: [0, 1] -> [-0.5, 0.5, 1.5]
    Example 2: [0, 1, 4] -> [-0.5, 0.5, 2.5, 5.5]
    Example 3: [4, 1, 0] -> [5.5, 2.5, 0.5, -0.5]"""
    assert index.is_monotonic_increasing or index.is_monotonic_decreasing

    # the beginning and end values are guessed from first and last two
    start = index[0] - (index[1]-index[0])/2
    end = index[-1] + (index[-1]-index[-2])/2

    # the middle values are the midpoints
    middle = pd.DataFrame({'m1': index[:-1], 'p1': index[1:]})
    middle = middle['m1'] + (middle['p1']-middle['m1'])/2

    if isinstance(index, pd.DatetimeIndex):
        idx = pd.DatetimeIndex(middle).union([start,end])
    elif isinstance(index, (pd.Float64Index,pd.RangeIndex,pd.Int64Index)):
        idx = pd.Float64Index(middle).union([start,end])
    else:
        print('Warning: guessing what to do with index type %s' % 
              type(index))
        idx = pd.Float64Index(middle).union([start,end])

    return idx.sort_values(ascending=index.is_monotonic_increasing)

def calc_df_mesh(df):
    """Calculate the two-dimensional bins to hold the index and 
    column values."""
    return np.meshgrid(conv_index_to_bins(df.index),
                       conv_index_to_bins(df.columns))

def heatmap(df):
    """Plot a heatmap of the dataframe values using the index and 
    columns"""
    X,Y = calc_df_mesh(df)
    c = plt.pcolormesh(X, Y, df.values.T)
    plt.colorbar(c) 
```

使用 调用它`heatmap(df)`，并使用 来查看它`plt.show()`。

[![在此处输入图像描述](../Images/5401f35c4173533fa9a78eb697496aaf.png)](https://i.stack.imgur.com/G8WHJ.png)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-11-29T01:10:57.560

惊讶地发现没有人提到更强大、更具交互性和更易于使用的替代方案。

## A）你可以使用情节：

1.  只需两行，您就会得到：

2.  互动性，

3.  平滑的刻度，

4.  基于整个数据框而不是单个列的颜色，

5.  轴上的列名和行索引，

6.  放大，

7.  平移，

8.  内置一键式功能将其保存为 PNG 格式，

9.  自动缩放，

10.  悬停比较，

11.  显示值的气泡，因此热图仍然看起来不错，您可以在任何地方看到值：

```
import plotly.express as px
fig = px.imshow(df.corr())
fig.show() 
```

[![在此处输入图像描述](../Images/f9e6111859173a6c755602682542ab3d.png)](https://i.stack.imgur.com/yxAyP.png)

## B）您还可以使用散景：

所有相同的功能都有一点麻烦。但是，如果您不想选择加入 plotly 并且仍然想要所有这些东西，那么仍然值得：

```
from bokeh.plotting import figure, show, output_notebook
from bokeh.models import ColumnDataSource, LinearColorMapper
from bokeh.transform import transform
output_notebook()
colors = ['#d7191c', '#fdae61', '#ffffbf', '#a6d96a', '#1a9641']
TOOLS = "hover,save,pan,box_zoom,reset,wheel_zoom"
data = df.corr().stack().rename("value").reset_index()
p = figure(x_range=list(df.columns), y_range=list(df.index), tools=TOOLS, toolbar_location='below',
           tooltips=[('Row, Column', '@level_0 x @level_1'), ('value', '@value')], height = 500, width = 500)

p.rect(x="level_1", y="level_0", width=1, height=1,
       source=data,
       fill_color={'field': 'value', 'transform': LinearColorMapper(palette=colors, low=data.value.min(), high=data.value.max())},
       line_color=None)
color_bar = ColorBar(color_mapper=LinearColorMapper(palette=colors, low=data.value.min(), high=data.value.max()), major_label_text_font_size="7px",
                     ticker=BasicTicker(desired_num_ticks=len(colors)),
                     formatter=PrintfTickFormatter(format="%f"),
                     label_standoff=6, border_line_color=None, location=(0, 0))
p.add_layout(color_bar, 'right')

show(p) 
```

[![在此处输入图像描述](../Images/ee521aa531512defcc63a2f163348a8e.png)](https://i.stack.imgur.com/2YdB1.png)

# css - 在悬停时显示绝对定位的 div 不起作用

> ID：12286611
> 
> 赞同：1
> 
> 时间：2012-09-05T17:18:53.980
> 
> 标签：css, position, hide

我只想在鼠标悬停在他上方时显示一个 div，我有这个 html：

```
<div class="caption">
    <h2><a href="single-image.html">Sun Flower</a></h2>
    <p class="meta-info-font">I took this photo at some bla bla bla.. and some other stuff.</p>
</div> 
```

为什么这不起作用：

```
.caption {
    position: absolute;
    top: 40%;
    left: 0;
    right: 0;
    background-color: rgba(20,19,19,0.94);
    display: none;
}

.caption:hover {
    display: block;
} 
```

更新：如果我使用 opacity 它不会隐藏子元素 -`h2`和`p`. 如何仅使用 CSS 隐藏所有这些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T17:19:55.337

如果未显示，则无法将其悬停。您应该改用它的[opacity 属性](http://msdn.microsoft.com/en-us/library/ie/jj127325%28v=vs.85%29.aspx)。

小提琴：http: [//jsfiddle.net/2nEVW/](http://jsfiddle.net/2nEVW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:35:57.603

如前所述，您可以将 Opacity 用于 div 标签，如下所示：http: [//jsfiddle.net/xGQ26/2/](http://jsfiddle.net/xGQ26/2/)

# algorithm - 这段代码的复杂性是什么，它的嵌套 for 循环反复加倍它的计数器？

> ID：12286613
> 
> 赞同：8
> 
> 时间：2012-09-05T17:19:05.150
> 
> 标签：algorithm, time-complexity, big-o, complexity-theory

在《*Programming Interviews Exposed* 》一书中，它说下面程序的复杂性是 O(N)，但我不明白这怎么可能。有人可以解释这是为什么吗？

```
int var = 2;
for (int i = 0; i < N; i++) {
   for (int j = i+1; j < N; j *= 2) {
      var += var;
   }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-05T18:55:54.417

你需要一点数学才能看到这一点。内部循环迭代`Θ(1 + log [N/(i+1)])`次数（`1 +`因为 for 是必需的`i >= N/2`，`[N/(i+1)] = 1`对数为 0，但循环迭代一次）。`j`取值`(i+1)*2^k`直到它至少和 一样大`N`，并且

```
(i+1)*2^k >= N <=> 2^k >= N/(i+1) <=> k >= log_2 (N/(i+1)) 
```

使用数学除法。所以更新`j *= 2`被称为`ceiling(log_2 (N/(i+1)))`时间，条件被称为检查`1 + ceiling(log_2 (N/(i+1)))`时间。因此我们可以写出总工作量

```
N-1                                   N
 ∑ (1 + log (N/(i+1)) = N + N*log N - ∑ log j
i=0                                  j=1
                      = N + N*log N - log N! 
```

现在，[斯特林公式](http://en.wikipedia.org/wiki/Stirling's_approximation)告诉我们

```
log N! = N*log N - N + O(log N) 
```

所以我们发现所做的总工作确实是`O(N)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-09T14:22:44.247

外循环运行`n`次数。现在这一切都取决于内部循环。
现在的内循环是棘手的。

让我们跟随：

```
i=0 --> j=1             ---> log(n) iterations
...
...
i=(n/2)-1 --> j=n/2     ---> 1 iteration.
i=(n/2) -->   j=(n/2)+1 --->1 iteration. 
```

* * *

```
i > (n/2)            ---> 1 iteration
(n/2)-1 >= i > (n/4) ---> 2 iterations
(n/4) >= i > (n/8)   ---> 3 iterations
(n/8) >= i > (n/16)  ---> 4 iterations   
(n/16) >= i > (n/32) ---> 5 iterations

(n/2)*1 + (n/4)*2 + (n/8)*3 + (n/16)*4 + ... + [n/(2^i)]*i

   N-1                                   
 n*∑ [i/(2^i)] =< 2*n
   i=0  

--> O(n) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-05T15:54:14.647

@Daniel Fischer 的回答是正确的。

我想补充一点，这个算法的确切运行时间如下：

![在此处输入图像描述](../Images/57821f3f3e4008a84ae38c33d6c7d177.png)

意思是：

![在此处输入图像描述](../Images/2ac3bc150edac1fd6d9b155174052ec5.png)

# android - 如何使动画列表显示在屏幕上

> ID：12286614
> 
> 赞同：0
> 
> 时间：2012-09-05T17:19:05.977
> 
> 标签：android, android-layout

我正在查看[动画列表](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)的文档，并且 XML 布局是直截了当的，但我很困惑他们如何在代码中处理它。

在该页面中，他们有类似的内容：

```
ImageView img = (ImageView)findViewById(R.id.spinning_wheel_image);
 img.setBackgroundResource(R.drawable.spin_animation);

 // Get the background, which has been compiled to an AnimationDrawable object.
 AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground();

 // Start the animation (looped playback by default).
 frameAnimation.start(); 
```

但是他们从未在他们显示的 XML 中的任何地方引用 spin_wheel_image，也没有 spin_animation ....他们示例中旋转片段的 id 是“选定的”

所以我想知道这两个参考来自哪里？为什么从不使用“选定”的 XML 片段的实际 id？

谢谢！

编辑：

我将我的动画 xml 放入一个名为 animation.xml 的文件中

现在在代码中我有这个：

```
ImageView img = (ImageView)findViewById(R.id.spinning_wheel_image);
        img.setBackgroundResource(R.drawable.animation);

        // Get the background, which has been compiled to an AnimationDrawable object.
        AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground();

        // Start the animation (looped playback by default).
        frameAnimation.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:22:08.913

> 但他们从未在他们显示的 xml 中的任何地方引用 spin_wheel_image

`spinning_wheel_image`是 的 ID ，可能来自与或`ImageView`一起使用的布局资源。`setContentView()``LayoutInflater`

> 也不是 spin_animation ....他们示例中的旋转片段的 id 是“选定的”

这可能是一个错字——没有`android:id`for `AnimationDrawable`。至少，它不在文档中。动画资源的名称是基于文件名的，文件名是`spin_animation .xml`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:24:17.163

动画与任何视图无关，除非您明确指定它。它只是定义了一组要完成的转换。然后选择视图并对其应用动画。这使您可以将相同的动画应用到许多视图。您可能希望将动画 XML 文件移动到`res/anim`文件夹。

# c++ - 调用派生类的析构函数

> ID：12286618
> 
> 赞同：-1
> 
> 时间：2012-09-05T17:19:26.663
> 
> 标签：c++

为什么在这段代码中调用了 Derived 类的析构函数？

```
#include <iostream>

class Base
{
public:
   Base() { std::cout << "Base::Base() \n"; }
   ~Base() { std::cout << "Base::~Base() \n"; } 
};

class Derived : public Base
{
public:
   Derived() { std::cout << "Derived::Derived() \n"; }
   ~Derived() { std::cout << "Derived::~Derived() \n"; } 
};

Derived foo() { return Derived(); }

int main()
{
   const Derived& instance = foo();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:21:10.157

> 为什么在这段代码中调用了 Derived 类的析构函数？

因为在主程序结束时`Derived`创建的实例超出了范围。`foo()`

```
#include <iostream>
using namespace std;

class Base {
public:
    Base() {
        std::cout << "Base::Base() \n";
    }
    ~Base() {
        std::cout << "Base::~Base() \n";
    }
};

class Derived: public Base {
public:
    int i;
    Derived() {
        i = 10;
        std::cout << "Derived::Derived() \n";
    }
    ~Derived() {
        i = 0;
        std::cout << "Derived::~Derived() \n";
    }
    int get() {
        return i;
    }
};

Derived foo() {
    return Derived();
}

int main() {
    const Derived& instance = foo();
    cout << instance.i << endl;
    return 0;
} 
```

输出如下：

```
Base::Base()
Derived::Derived()
10
Derived::~Derived()
Base::~Base() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T17:42:45.070

为了使它更有趣，请考虑修改`main`：

```
const Base& instance = foo(); 
```

该代码创建了一个临时类型（由 返回的对象`foo`），`Derived`并通过将其绑定到类型的常量引用来延长对象的生命周期`Base`。临时对象的生命周期将延长，直到引用超出范围，此时对象将被销毁。代码大致翻译为：

```
Derived __tmp = foo();
const Base& instance = __tmp; 
```

在持有引用的块的末尾`instance`，`__tmp`变量也超出范围并被删除。请注意，即使没有虚拟析构函数，也会调用适当的析构函数，就像`__tmp`类型`Derived`（函数返回的类型）一样。

# coldfusion - 当 OnApplicationEnd 事件触发时，它不能再解析我在 Application.cfc 中定义的映射

> ID：12286622
> 
> 赞同：0
> 
> 时间：2012-09-05T17:19:38.073
> 
> 标签：coldfusion, coldfusion-9

我正在运行 ColdFusion 9,0,1,274733，并在带有 IIS 的 64 位 Windows 2008 Server 上应用了修补程序 2。

我编写了一个 cfc 来处理数据库表的日志记录（用户审计）。基本上，我在请求周期的不同时间点调用了这个 cfc。在应用程序启动时、请求结束时、应用程序结束时以及发生错误时。在应用程序到期之前，这一切都运行良好。

下面是我的 Application.cfc 中的一些相关部分。我正在定义到任何 cffunction 之外的 cfc 位置的映射，如下所示：

```
this.versionfolder="version1";
this.mappings["/modules"]="C:\Webroot\folder\#this.versionfolder#"; 
```

然后在前面提到的应用程序事件中，我可以像这样调用我的日志记录 cfc：

```
<cfinvoke component="/modules/LogIt" method="Store" /> 
```

这工作正常，直到应用程序过期。当代码在 OnApplicationEnd 方法中为日志记录模块触发我的 cfinvoke 时，我收到此错误：

```
Message: Could not find the ColdFusion component or interface /modules/LogIt.  
Detail: Ensure that the name is correct and that the component or interface exists. 
```

我知道 cfc 存在，它在应用程序的整个生命周期中一直以相同的方式调用它。有没有其他人看到过这种行为？

为了解决这个问题，我遇到此问题的应用程序位于 Web 根目录中。我有另一个应用程序，在同一台服务器上运行，它位于该应用程序的子文件夹中（它们具有不同的应用程序名称）。我在 Application.cfc 中使用完全相同的逻辑，通过该应用程序的映射引用相同的日志记录 cfc，它在应用程序端运行良好。我很困惑，无法在网上找到任何关于这个特定场景的信息。

需要明确的是，我在 Web 根目录中的应用程序每次在应用程序端都失败。我在子文件夹中的应用程序每次都有效。不确定这是否相关，但 Web 根应用程序在子文件夹应用程序之前启动（访问）。尽管我只测试了访问 Web 根应用程序，但它仍然失败。我也尝试过对组件名称使用点表示法，但它仍然失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:10:25.547

onApplicationEnd 在应用程序结束后触发，因此应用程序范围不再可用。因为您的子应用程序在其 onApplicationEnd 方法触发时位于子文件夹中，所以它仍然可以访问其父应用程序范围。

`Use the ApplicationScope parameter to access the application scope; you cannot reference the scope directly; for example, use Arguments.ApplicationScope.myVariable, not Application.myVariable.`-[文档](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7d47.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:01:57.307

我只是对此进行了一些研究，因为我[在这里发现了另一个问题，问的问题大致相同](https://stackoverflow.com/questions/10949762/onsessionend-has-different-rootpath-then-my-running-application/13213081)。

[My findings](http://adamcameroncoldfusion.blogspot.co.uk/2012/11/applicationcfc-set-mappings-dont-work.html) were that there's a but in CF8-10 that result in Application.cfc-set mappings do not work in onApplicationEnd() (nor indeed in onSessionEnd() in CF8). the work around is to set the mappings in CFAdmin. Not much of a workaround, I'm afraid.

# validation - 从 cakephp 中的规则子集进行验证

> ID：12286627
> 
> 赞同：0
> 
> 时间：2012-09-05T17:19:46.623
> 
> 标签：validation, cakephp

我有一个模型，可以在一个字段中存储一个用于不同目的的数字，因为用户选择了一种参数类型（金钱、数字、年龄、标签 ID 等）。所以，我想验证它，并且在模型中我应该把这个字段可以有的所有规则。但是由于它取决于参数类型，它应该根据指定的类型（例如不低于 1000 的钱，18 到 65 岁之间的年龄等）对其进行验证。有没有办法选择规则子集并对其进行验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:17:15.610

在进行验证之前，您可以在控制器中动态覆盖模型验证规则。因此，对于您的示例，您可以执行以下操作：

在控制器中：

```
switch ($type) {

   case "a":

       $this->Model->validate = array(
           // validation rules for case A 
       );

       break;

    case "b":

       $this->Model->validate = array(
           // validation rules for case B 
       );

       break;

    // etc

} 
```

或者（更好的恕我直言）：

在模型中设置您的替代验证规则：

```
public $validateCaseA = array(
    // validation rules for case A
);

public $valdayeCaseB = array(
    // validation rules for case B
); 
```

在你的控制器中：

```
switch ($type) {

   case "a":

       $this->Model->validate = $this->Model->validateCaseA;

       break;

    case "b":

       $this->Model->validate = $this->Model->validateCaseB;

       break;

    // etc

} 
```

或者...

在模型中：

```
public $validateCase = array(
    'a'=>array(
        // validation rules for case A
    ),
    'b'=>array(
        // validation rules for case A
    )
    //etc
); 
```

在控制器中：

```
$this->Model->validate = $this->Model->validateCase($type); 
```

如果您的案例规则有共同的验证规则，您可以使用 array_merge_recursive 来减少规则集之间的重复：

在模型中：

```
public $commonValidation = array(
   //common validation rules
); 
```

在控制器中：

```
$this->Model->validate = array_merge_recursive($this->Model->commonValidation, $this->Model->validateCase($type)); 
```

# c# - 哪个线程将最先进入临界区？

> ID：12286628
> 
> 赞同：6
> 
> 时间：2012-09-05T17:19:47.583
> 
> 标签：c#, .net, multithreading

假设多个线程周期性地执行`DoWork()`下面的方法。假设在某个时刻，两个线程几乎同时开始执行此方法，因此两个本地时间戳对象中的一个比另一个大一个刻度。

```
ICollection collection = // ...

public void DoWork()
{
    DateTime timestamp = DateTime.Now;

    lock(collection.SyncRoot)
    {
        // critical section
    }
} 
```

如果线程 A 的特征是时间戳等于*t1*，而线程 B 的特征是时间戳*t2*等于*t1 + 1 tick*，那么线程 A 将首先需要访问临界区。

.NET 如何管理多线程对临界区的访问？它是否将访问请求放入队列中，以便它们按时间顺序排列？也就是说，是否按照线程访问请求的顺序来保证对临界区的访问？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T17:24:37.107

绝对不能保证线程执行的顺序以及哪个线程首先获得临界区。

请注意，即使线程的优先级也不能保证顺序 - 不同的核心/CPU可以同时执行不同优先级的线程，任何线程都可以先到达并获得临界区。

注意 2：线程也可以在任意时刻被调度执行/等待，因此同一线程中的 2 个不同操作彼此相邻这一事实并不意味着它们将在其间没有延迟地一个接一个地执行。在您的情况下，这意味着线程 A 可能会在获得时间戳后立即停止，而计划在稍后执行的线程 B 将很容易获得稍后的时间戳，但首先到达临界区。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T18:17:45.977

你做了一个很高的假设，一个永远让程序员在线程方面遇到麻烦的假设。首先获得时间戳的线程肯定不能保证也首先进入锁。只有几率很高，不是100%。线程被操作系统调度程序抢占。这可以中断任何线程，包括刚刚开始执行 Monitor.Enter() 方法调用的线程。然后调度决策很可能会暂停 A 并允许 B 先获得锁。

调度程序也不需要修改订单。执行 A 的核心可能在其数据缓存中没有“集合”对象引用，从而在等待内存总线以允许执行 B 的核心领先时使核心停止足够长的时间。“种族”这个词是合适的，在这里做出错误的假设会导致代码中出现线程竞争错误。

锁背后的机制由处理器实现，处理器是唯一可以确保没有“相同时间”的实体。每个多核 cpu 都实现了[比较和交换](http://en.wikipedia.org/wiki/Compare-and-swap)原子指令。[您可以在此答案](https://stackoverflow.com/questions/3855671/how-do-i-atomically-swap-2-ints-in-c/3855824#3855824)中看到 .NET 使用的版本。

# tridion - 在 ASP.NET 中使用 Tridion 2011 linking.svc 服务

> ID：12286635
> 
> 赞同：9
> 
> 时间：2012-09-05T17:20:17.193
> 
> 标签：tridion

尝试在我的 ASP.NET 应用程序中添加对 /linking.svc 的服务引用时收到以下错误：

> 下载时出错`http://localhost:82/linking.svc/`。请求失败，HTTP 状态为 404：未找到。元数据包含无法解析的引用：`http://localhost:82/linking.svc/`。没有`http://localhost:82/linking.svc/`可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。远程服务器返回错误：(404) Not Found。如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

我认为我可以像使用 odata（在 Visual Studio 中添加服务引用）一样使用链接服务，因为 odata 对我来说很好用。我检查了我的服务安装的 web.config 并且两个端点看起来都配置正确。

```
<!-- HTTP support -->
        <service name="Tridion.ContentDelivery.Webservice.ODataService">
            <endpoint behaviorConfiguration="webHttp" bindingConfiguration="HttpBinding" binding="webHttpBinding" contract="Tridion.ContentDelivery.Webservice.IODataService" />
        </service>
        <service name="Tridion.ContentDelivery.Webservice.LinkingService">
            <endpoint behaviorConfiguration="webHttp" bindingConfiguration="HttpBinding" binding="webHttpBinding" contract="Tridion.ContentDelivery.Webservice.Ilinking" />
        </service>
        <service name="Tridi 
```

我假设我试图以不正确的方式使用 linking.svc。

**我的问题**...我是否遵循在 Visual Studio ASP.NET 项目中使用 linking.svc 服务的正确程序？如果没有，请您帮助我了解如何使用此 api。

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T17:45:23.060

您是否考虑为链接服务编写自己的客户端？这是一个非常简单的 REST-ful Web 服务，因此您可以使用标准访问它`WebClient`：

来自 Mihai Cadaru 的一个例子：

```
WebClient client = new WebClient();
string linkingServiceUrl = "http://tridion.server:8080/services/linking.svc";
string COMPONENT_LINK = "/componentLink?sourcePageURI={0}&targetComponentURI={1}&excludeTemplateURI={2}&linkTagAttributes={3}&linkText={4}&showTextOnFail={5}&showAnchor={6}";
string url = linkingServiceUrl +
    string.Format(COMPONENT_LINK,
    sourcePageUri,
    targetComponentUri,
    excludeTemplateUri,
    HttpUtility.UrlEncode(linkTagAttributes),
    HttpUtility.UrlEncode(linkText),
    showTextOnFail,
    showAnchor);
return client.DownloadString(url); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:32:38.527

您是否阅读过这里的文档（需要登录）：

[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/reference_277A2D7264B04A39870C3FE18EF245BB](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/reference_277A2D7264B04A39870C3FE18EF245BB)

# java - Spring WebFlow2 Javascript 仅适用于第一个单选按钮

> ID：12286641
> 
> 赞同：0
> 
> 时间：2012-09-05T17:20:41.390
> 
> 标签：java, javascript, spring, spring-mvc, spring-webflow

Spring WebFlow2 Javascript 仅适用于第一个单选按钮

如果用户单击其中一个单选按钮，我正在尝试使用 WebFlow2 附带的 Spring JavaScript 提交带有转换值的页面。

我使用 onclick 和 onchange 在页面上插入了我的 javascript，它仅在选择第一个单选按钮时才有效。我不知道为什么，但我想我什么都试过了……有人可以告诉我这是否是 Spring JavaScript 的问题。

JSP：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<html>
<head>
<title>Spring 3.0 MVC - Web Flow Example</title>

<script type="text/javascript"
    src="<c:url value="/resources/dojo/dojo.js" />">

</script>
<script type="text/javascript"
    src="<c:url value="/resources/spring/Spring.js" />">

</script>
<script type="text/javascript"
    src="<c:url value="/resources/spring/Spring-Dojo.js" />">

</script>

<link type="text/css" rel="stylesheet"
    href="<c:url value="/resources/dijit/themes/tundra/tundra.css" />" />
</head>
<body>
    <h2>Customer Registration</h2>

    <form:form commandName="customer" id="customer">
        <input type="hidden" name="_flowExecutionKey"
            value="${flowExecutionKey}" />
        <table>
            <tr>
                <td><font color=red><form:errors path="name" /></font><b>Name:
                </b></td>
                <td><form:input path="name" id="name" /> <script
                        type="text/javascript">
                    Spring
                            .addDecoration(new Spring.ElementDecoration(
                                    {
                                        elementId : "name",
                                        widgetType : "dijit.form.ValidationTextBox",
                                        widgetAttrs : {
                                            promptMessage : "This is the name you would like entered into the system."
                                        }
                                    }));
                </script> <br />
                    <p></td>
            </tr>
            <tr>
                <td><font color=red><form:errors path="phoneNumber" /></font>

                    <b>Phone number: </b></td>
                <td><form:input path="phoneNumber" id="phoneNumber" /><br />
                    <script type="text/javascript">
                        Spring
                                .addDecoration(new Spring.ElementDecoration(
                                        {
                                            elementId : "phoneNumber",
                                            widgetType : "dijit.form.ValidationTextBox",
                                            widgetAttrs : {
                                                promptMessage : "This is the phone number for the above name"
                                            }
                                        }));
                    </script></td>
            </tr>
            <tr>
                <td></td>
            </tr>
            <tr>
                <td><b>Row:</b></td>
                <td><form:radiobutton value="B" path="row" id="rowBtn" />Row: B<BR>
                    <form:radiobutton value="A" path="row" id="rowBtn" />Row: A<BR>
                    <script type="text/javascript">
            Spring.addDecoration(new Spring.AjaxEventDecoration({
                elementId: "rowBtn",
                event: "onchange",
                formId:"customer",
                params: {fragments:"body", _eventId: "proceed"}
            }));
        </script>

        <script type="text/javascript">
            Spring.addDecoration(new Spring.AjaxEventDecoration({
                elementId: "rowBtn",
                event: "onclick",
                formId:"customer",
                params: {fragments:"body", _eventId: "proceed"}
            }));
        </script>

        </td>
            </tr>
            <tr>
            <td>Year of Birth:</td>
            <td>
            <form:select path="byear">
            <form:option value="2012" label="2012" />
            <form:option value="2011" label="2011" />
            <form:option value="2010" label="2010" />
            </form:select>

        <script type="text/javascript">
            Spring.addDecoration(new Spring.AjaxEventDecoration({
                elementId: "byear",
                event: "onchange",
                formId:"customer",
                params: {fragments:"body", _eventId: "proceed"}
            }));
        </script>
        </td></tr>

        </table>
        <input type="submit" name="_eventId_proceed" value="proceed"
            id="proceed" />
            <input type="submit" name="_eventId_cancel" value="Cancel" />
    </form:form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:31:17.563

你有：

```
<form:radiobutton value="B" path="row" id="rowBtn" />Row: B<BR>
<form:radiobutton value="A" path="row" id="rowBtn" />Row: A<BR> 
```

您的两个单选按钮具有相同的元素 ID。AjaxEventDecoration 会根据该 elementId 进行查找。它假定它在页​​面上是唯一的，并且它不期望具有相同 id 的多个元素。您应该给第二个单选按钮另一个 id。

您可能也应该为该 id 重新输入 AjaxEventDecoration。如果 Spring.AjaxEventDecoration 允许您基于元素类（而不是 elementId）做类似的事情，也许您可​​以这样做，而不是复制当前的 Spring.AjaxEventDecoration 片段。

# asp.net-mvc - 如何创建这个 lambda 表达式？

> ID：12286642
> 
> 赞同：2
> 
> 时间：2012-09-05T17:20:53.247
> 
> 标签：asp.net-mvc, linq, lambda

为了简单起见，我有这个类：

```
public class Contact
{
    public string Name { get; set; }
    public string[] Emails { get; set; }
} 
```

我有一个联系人集合 =`IEnumerable<Contact>`

我需要找到该集合中的所有联系人，比如说他们的电子邮件地址中有一个文本“xxx”（他们可能有多个电子邮件）。

这样的事情当然行不通：

```
var found = contacts.Where(c => c.Emails.Where(e => e.Contains("xxx"))); 
```

我想知道如何使用 lambda 表达式构建这样的查询？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T17:22:31.080

在内部表达式中使用`Any`而不是：`Where`

```
var found = contacts.Where(c => c.Emails.Any(e => e.Contains("xxx"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:22:29.300

尝试这个

```
var found = contacts.Where(c => c.Emails.Where(e => e.Contains("xxx")).Count() > 0); 
```

这将根据指定的电子邮件条件返回所有联系人。

祝你好运 ！！

# android - 可扩展列表适配器不断崩溃 Activity

> ID：12286644
> 
> 赞同：0
> 
> 时间：2012-09-05T17:21:04.947
> 
> 标签：android, android-layout, android-view

请原谅我可能是最棘手的问题，但我不知道是什么导致我的应用程序崩溃（这次）。我只是想将 xml 布局文件膨胀到可扩展的列表视图中。

```
package com.anthonyce.mcathomie;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseExpandableListAdapter;
import android.widget.ExpandableListView;
import android.widget.TextView;

public class PlayoptionsActivity extends Activity {

ExpandableListView Mtopics;
ExpandableAdapter MtopicsAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_playoptions);
    //set up adapter
    MtopicsAdapter = new ExpandableAdapter();
    Mtopics = (ExpandableListView) findViewById(R.id.mtopicsListView);
    Mtopics.setAdapter(MtopicsAdapter);
    //Mtopics.setGroupIndicator(null);
}

public class ExpandableAdapter extends BaseExpandableListAdapter {
    private Context context;
    private String[] groups = { "People Names", "Dog Names", "Cat Names",
            "Fish Names" };
    private String[][] children = { { "Arnold" }, { "Ace" }, { "Fluffy" },
            { "Goldy" } };

    public Object getChild(int groupPosition, int childPosition) {
            return children[groupPosition][childPosition];
    }

    public long getChildId(int groupPosition, int childPosition) {
            return childPosition;
    }

    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        View childView;
        LayoutInflater childInflate = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        childView = childInflate.inflate(R.layout.mtopics_childrow, parent, false);

        TextView childtxt = (TextView)childView.findViewById(R.id.mtopicchildtext);
        childtxt.setText(getChild(groupPosition, childPosition).toString());

        return childView;

    }

    public int getChildrenCount(int groupPosition) {
        return children[groupPosition].length;
    }

    public Object getGroup(int groupPosition) {
        return groups[groupPosition];
    }

    public int getGroupCount() {
        return groups.length;
    }

    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {   
        View groupView;
        groupView = new View(context);
        LayoutInflater groupInflate = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        groupView = groupInflate.inflate(R.layout.mtopics_grouprow, parent, false);

        TextView grouptxt = (TextView)groupView.findViewById(R.id.mtopicgrouptext);
        grouptxt.setText(getGroup(groupPosition).toString());

        return groupView;
    }

    public boolean hasStableIds() {
        return true;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }
}
} 
```

这是我试图膨胀的组布局的 xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mtopicgrouplin"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:gravity="fill">

    <TextView
        android:gravity="left"
        android:id="@+id/mtopicgrouptext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:textStyle="bold" />

    <CheckBox
        android:id="@+id/checkBoxgroup"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

在它工作之前但没有显示文本，现在使用此代码它只是崩溃。我不认为这个问题会出现在孩子们身上，但是这里有

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mtopicchildlin"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:gravity="fill">

    <CheckBox
        android:paddingLeft="10dp"
        android:id="@+id/checkBoxchild"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    <TextView 
        android:id="@+id/mtopicchildtext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />
</LinearLayout> 
```

这是我发现无法辨认的 logCat

```
09-05 17:09:33.919: E/AndroidRuntime(429): FATAL EXCEPTION: main
09-05 17:09:33.919: E/AndroidRuntime(429): java.lang.NullPointerException
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.view.ViewConfiguration.get(ViewConfiguration.java:228)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.view.View.<init>(View.java:1878)
09-05 17:09:33.919: E/AndroidRuntime(429):  at com.anthonyce.mcathomie.PlayoptionsActivity$ExpandableAdapter.getGroupView(PlayoptionsActivity.java:118)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.widget.ExpandableListConnector.getView(ExpandableListConnector.java:445)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.widget.AbsListView.obtainView(AbsListView.java:1430)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.widget.ListView.onMeasure(ListView.java:1127)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.view.View.measure(View.java:8313)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.view.View.measure(View.java:8313)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.view.View.measure(View.java:8313)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.view.View.measure(View.java:8313)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.view.View.measure(View.java:8313)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.os.Looper.loop(Looper.java:123)
09-05 17:09:33.919: E/AndroidRuntime(429):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-05 17:09:33.919: E/AndroidRuntime(429):  at java.lang.reflect.Method.invokeNative(Native Method)
09-05 17:09:33.919: E/AndroidRuntime(429):  at java.lang.reflect.Method.invoke(Method.java:507)
09-05 17:09:33.919: E/AndroidRuntime(429):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-05 17:09:33.919: E/AndroidRuntime(429):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-05 17:09:33.919: E/AndroidRuntime(429):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:30:25.697

消除

```
groupView = new View(context); 
```

并运行程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:24:40.407

您永远不会为`context`变量设置值，因此当您这样做时`groupView = new View(context)`， context 为 null 并抛出`NullPointerException`.

改用当前活动上下文：

```
groupView = new View(PlayoptionsActivity.this); 
```

您还可以创建一个构造函数：

```
ExpandableAdapter(Context context)
{
    this.context = context;
} 
```

# android - 如何在 Eclipse 中检查我的 SQLite 数据库值？

> ID：12286652
> 
> 赞同：0
> 
> 时间：2012-09-05T17:21:50.490
> 
> 标签：android, database, sqlite

我创建了一个应用程序并在其中添加了一些表格、列和一些信息，我想检查它，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:41:39.063

切换到`DDMS`透视（窗口 > 打开透视 > DDMS）。

在文件资源管理器中找出数据库的 db 文件。选择它。

通过单击 UI 右上角的按钮将其导出。（即；从设备中提取文件）

使用 SQLiteman 查看数据。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T04:41:20.617

如果您在手机上运行您的应用程序，则您无法访问您的内部存储空间，除非它已被植根。如果这是您的情况，只需在虚拟设备上运行应用程序，然后转到**DDMS**角度，从那里 data/data/yourapplication/database/urdb.db 然后将数据库拉到您的计算机上并使用上述工具进行探索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:24:49.223

我相信 Motodev Studio 允许数据库浏览。 [http://developer.motorola.com/tools/motodevstudio/?utm_campaign=mhp01092012&utm_source=mhp&utm_medium=mws](http://developer.motorola.com/tools/motodevstudio/?utm_campaign=mhp01092012&utm_source=mhp&utm_medium=mws) 或者您可以将数据库导出到桌面，例如，然后使用 Firefox SQLite 插件浏览它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T17:25:47.543

您可以从您的 android 代码中查询数据库来执行此操作。检查链接[http://codinglookseasy.blogspot.in/2012/08/sqlite-database.html](http://codinglookseasy.blogspot.in/2012/08/sqlite-database.html)在那里您可以找到创建表、将数据插入表并检索它。或者使用 SQLite 数据库浏览器[http://sqlitebrowser.sourceforge.net/](http://sqlitebrowser.sourceforge.net/)来检查值而不使用代码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T17:29:28.423

使用**Sqlite Database Browser**工具查看您的 Sqlite 数据库。转到 DDMS 并导出您的应用程序数据库并在 Sqlite 数据库浏览器中打开此数据库

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T17:33:37.697

这篇关于[如何在 Android 上访问 sqlite 数据库的](http://code4reference.com/2012/06/access-sqlite-database-android/)帖子将对您有所帮助。有一个[mozilla 插件](https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/)也可以帮助您查看数据库。

# python - Python 3.2 中的 dict.fromkeys 方法

> ID：12286655
> 
> 赞同：0
> 
> 时间：2012-09-05T17:22:08.020
> 
> 标签：python, dictionary, python-3.x

我想创建一个包含列表字典的新字典。我的代码是：

```
SERVICES = "FTP Download", "FTP Upload", "HTTP"
received = dict.fromkeys(SERVICES , {'MS1':[]})
n = 0
for service in SERVICES:
    received[service]['MS1'].append(n)
    n += 1
print(received) 
```

我得到了什么。尽管我使用了不同的键，但我在每本字典中都得到了相同的列表。

我的输出是：`{'FTP Download': {'MS1': [0, 1, 2]}, 'HTTP': {'MS1': [0, 1, 2]}, 'FTP Upload': {'MS1': [0, 1, 2]}}`

从键创建空白字典的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:26:07.997

我会简单地使用字典理解：

```
>>> SERVICES = "FTP Download", "FTP Upload", "HTTP"
>>> received = {k: {'MS1': []} for k in SERVICES}
>>> received
{'FTP Download': {'MS1': []}, 'HTTP': {'MS1': []}, 'FTP Upload': {'MS1': []}}
>>> received["HTTP"]["MS1"].append(17)
>>> received
{'FTP Download': {'MS1': []}, 'HTTP': {'MS1': [17]}, 'FTP Upload': {'MS1': []}} 
```

由于`fromkeys`使用`v`每个键的值，`received = dict.fromkeys(SERVICES , {'MS1':[]})`实际上只`MS1`涉及一个字典，这就是您注意到的：

```
>>> received = dict.fromkeys(SERVICES , {'MS1':[]})
>>> received.values()
dict_values([{'MS1': []}, {'MS1': []}, {'MS1': []}])
>>> [id(v) for v in received.values()]
[141458940, 141458940, 141458940] 
```

# eclipse - 带有 Websphere 7.0.0.17 的 Eclipse：EJB 项目不能使用工作空间内的资源，但可以使用服务器上的资源

> ID：12286657
> 
> 赞同：1
> 
> 时间：2012-09-05T17:22:09.913
> 
> 标签：eclipse, maven, ejb, websphere

我的应用程序使用 Maven 并具有三个模块：

*   耳机模块
*   网络模块
*   ejb模块

EJB 版本是 3.0。

部署以两种方式工作，没有错误消息。

当我尝试使用 Websphere 的“使用服务器上的资源运行服务器”的发布设置运行应用程序时，它工作正常。

当我尝试对“使用工作区中的资源运行服务器”执行相同操作并在我的浏览器中打开应用程序时，它会失败并显示以下错误消息：

> 找不到为 NustService 组件定义的以下资源引用 [jdbc/nust] 的资源引用绑定。

我是 JEE5 的新手，但在我看来，本地 websphere 无法找到 ejb-jar.xml。

这里是 ejb 模块的 pom：

```
<project
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
    xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <artifactId>mycomp-nust-frontend-app</artifactId>
        <groupId>mycomp.app</groupId>
        <version>0.1.0-SNAPSHOT</version>
    </parent>
    <artifactId>mycomp-nust-frontend-svc</artifactId>
    <name>mycomp-nust-frontend-svc</name>
    <packaging>ejb</packaging>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>
    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>javax.ejb</groupId>
            <artifactId>ejb-api</artifactId>
            <version>3.0</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>mycomp.service</groupId>
            <artifactId>mycomp-service-utils</artifactId>
        </dependency>
    </dependencies>
    <build>
        <resources>
            <resource>
                <directory>src/main/java</directory>
            </resource>
        </resources>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-ejb-plugin</artifactId>
                <configuration>
                    <ejbVersion>3.0</ejbVersion>
                    <archive>
                        <manifest>
                            <addClasspath>true</addClasspath>
                        </manifest>
                    </archive>
                </configuration>
            </plugin>
            <!-- Add classpath container for Websphere Application Server 7 to the 
                Eclipse project. -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <configuration>
                    <classpathContainers>
                        <classpathContainer>org.eclipse.jst.server.core.container/com.ibm.ws.ast.st.runtime.runtimeTarget.v70/was.base.v7</classpathContainer>
                        <classpathContainer>org.eclipse.jst.j2ee.internal.module.container</classpathContainer>
                    </classpathContainers>
                    <projectNameTemplate>${project.name}</projectNameTemplate>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

有什么建议，需要更多信息吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:36:04.407

问题不在于您的 ejb-jar.xml。请记住，ejb-jar.xml 只是声明了引用；与“真实”资源的实际绑定是由应用程序服务器特定的文件完成的。在 WebSphere 的情况下，该文件是 ibm-ejb-jar-bnd.xml，它应该与 ejb-jar.xml 位于同一目录中。你碰巧有那个文件吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:41:21.150

我遇到了类似的情况，无法找到我的应用程序定义的资源。解决方案是定义 /WEB-INF/ibm-web-bnd.xmi

```
<?xml version="1.0" encoding="UTF-8"?>
<com.ibm.ejs.models.base.bindings.webappbnd:WebAppBinding xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:com.ibm.ejs.models.base.bindings.webappbnd="webappbnd.xmi" xmi:id="WebAppBinding_1348167502046" virtualHostName="default_host">
    <webapp href="WEB-INF/web.xml#struts_blank"/>
    <resRefBindings jndiName="jms/MyConnectionFactory" xmi:id="cf">
        <bindingResourceRef href="WEB-INF/web.xml"/>
    </resRefBindings>
    <messageDestinationRefBindings jndiName="jms/TopicSpace/Group/Test" xmi:id="myTopic">
        <bindingMessageDestinationRef href="WEB-INF/web.xml"/>
    </messageDestinationRefBindings>  
</com.ibm.ejs.models.base.bindings.webappbnd:WebAppBinding> 
```

团队中的一位高级开发人员说，这应该是一个 XML 文件，但后来没有用。我通过从 IBM 教程中导出已部署的应用程序发现了这一点。根据您的应用程序，您将不得不更改上述资源引用。

希望这可以帮助

# python - Python regex if group-match then put-different-character

> ID：12286660
> 
> 赞同：3
> 
> 时间：2012-09-05T17:22:22.423
> 
> 标签：python, regex

我希望转换以下内容：

> “一些文本**http://one.two.three.source.com**更多文本。更多文本更多文本**http://source.com**更多文本。更多文本 **http://one.source.com**更多文本更多文本。更多文字**http://one.two.source.com**更多文字更多文字”

对此：

> “一些文本**http://one_two_three.target.com**更多文本更多文本更多文本**http://target.com**更多文本更多文本 **http://one.target.com**更多文本更多文本更多文本**http://one_two。 target.com**更多文字更多文字”

我希望转换'.' 在大量文本中将每个子域分隔为“_”，问题是我想让它以是否有子域为条件。我无法预测文本的其余部分，并且只需要为 url 模式进行转换。

这是我到目前为止所拥有的：

```
src = 'source.com'
dst = 'target.com'
reMatch = r'http(?P<a>s?):(?P<b>\\?)/(?P<c>\\?)/(?P<d>([^.:/]+\.)?)(?P<e>([^.:/]+\.)?)(?P<f>([^.:/]+\.)?)' + src
p = re.compile(reMatch, re.IGNORECASE)
reReplace = r'http\g<a>:\g<b>/\g<c>/\g<d>\g<e>\g<f>' + dst
p.sub(reReplace, content) 
```

它仅将 'source.com' 替换为 'target.com' 并复制子域（最多 3 个）但不替换 '.' 在子域之间使用“_”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:20:40.857

我构建了一个函数，可以根据您的输入实现您想要的输出：

```
def special_replace(s):
    p=re.compile(r"(http://.*?)(\.?source\.com)")
    spl=p.split(s)
    newtext=[]
    for text in spl:
        if text.startswith("http://"):
            text=text.replace(".","_")
        elif text.endswith("source.com"):
            text=text.replace("source.com", "target.com")
        newtext.append(text)
    return "".join(newtext) 
```

它不是那么优雅，但它达到了你的目标:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T20:02:09.850

这是halex答案的变体。`grouper`来自[itertools recipes](http://docs.python.org/library/itertools.html#recipes)在处理`re.split`.

```
def special_replace(s):
    spl = re.split(r"(http://.*?)(\.?source\.com)", s)
    return "".join(
        itertools.chain(*((
                  text,
                  part1.replace(".", "_"),
                  part2.replace("source.com", "target.com"))
              for text, part1, part2 in grouper(3, spl, "")))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T11:24:35.843

困难在于您要对匹配的表达式应用两个不同的更改。我建议您在整个文件中应用其中一项更改，然后匹配这个新表达式，以便使用捕获的组重建它：

```
text = re.sub(r'(http://[^ ]*)source\.com\b', r'\1target.com', text)
pattern = re.compile(r'(http://[^ ]+)\.([^ ]*target.com)\b')

while (pattern.search(text)):
   text = pattern.sub(r'\1_\2', text) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T14:03:28.127

这里是使用函数作为替换的地方很适合：

```
def replace_dots(source):
    from_dot_com = 'source.com'
    to_dot_com = 'target.com'

    pat = re.compile(r'(https?://)(\S*?)(\.?)'
                     + re.escape(from_dot_com),
                        re.IGNORECASE)

    def my_fun(match):
        return (match.group(1) 
            + match.group(2).replace('.', '_') # <--
            + match.group(3) + to_dot_com)

    result = pat.sub(my_fun, source)

    return result 
```

# java - 如何使用 Apache POI 为整行应用粗体文本样式？

> ID：12286662
> 
> 赞同：51
> 
> 时间：2012-09-05T17:22:25.450
> 
> 标签：java, apache-poi

如何使用 Apache POI 使整个 Excel 行单元格变为粗体文本？

*例如：*
列标题应为粗体。我如何将某些样式应用于整行，而不是为标题行的每个单元格应用样式？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-06T07:08:01.823

这应该可以正常工作。

```
 Workbook wb = new XSSFWorkbook("myWorkbook.xlsx");
    Row row=sheet.getRow(0);
    CellStyle style=null;

    XSSFFont defaultFont= wb.createFont();
    defaultFont.setFontHeightInPoints((short)10);
    defaultFont.setFontName("Arial");
    defaultFont.setColor(IndexedColors.BLACK.getIndex());
    defaultFont.setBold(false);
    defaultFont.setItalic(false);

    XSSFFont font= wb.createFont();
    font.setFontHeightInPoints((short)10);
    font.setFontName("Arial");
    font.setColor(IndexedColors.WHITE.getIndex());
    font.setBold(true);
    font.setItalic(false);

    style=row.getRowStyle();
    style.setFillBackgroundColor(IndexedColors.DARK_BLUE.getIndex());
    style.setFillPattern(CellStyle.SOLID_FOREGROUND);
    style.setAlignment(CellStyle.ALIGN_CENTER);
    style.setFont(font); 
```

如果您不创建`defaultFont`所有工作簿，则默认使用另一个工作簿。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-05-06T14:45:22.510

请在下面找到简单的方法：

```
XSSFCellStyle style = workbook.createCellStyle();
style.setBorderTop((short) 6); // double lines border
style.setBorderBottom((short) 1); // single line border
XSSFFont font = workbook.createFont();
font.setFontHeightInPoints((short) 15);
font.setBoldweight(XSSFFont.BOLDWEIGHT_BOLD);
style.setFont(font);                 

Row row = sheet.createRow(0);   
Cell cell0 = row.createCell(0);
cell0.setCellValue("Nav Value");
cell0.setCellStyle(style);  
for(int j = 0; j<=3; j++)
row.getCell(j).setCellStyle(style); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-01-13T22:25:21.337

**这对我有用**

我之前设置了样式的字体并正常制作了行头，然后我在循环中设置了样式，在行头的每个单元格上用粗体显示字体。Et voilà 第一行是粗体的。

```
HSSFWorkbook wb = new HSSFWorkbook();
HSSFSheet sheet = wb.createSheet("FirstSheet");
HSSFRow rowhead = sheet.createRow(0); 
HSSFCellStyle style = wb.createCellStyle();
HSSFFont font = wb.createFont();
font.setFontName(HSSFFont.FONT_ARIAL);
font.setFontHeightInPoints((short)10);
font.setBold(true);
style.setFont(font);
rowhead.createCell(0).setCellValue("ID");
rowhead.createCell(1).setCellValue("First");
rowhead.createCell(2).setCellValue("Second");
rowhead.createCell(3).setCellValue("Third");
for(int j = 0; j<=3; j++)
rowhead.getCell(j).setCellStyle(style); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-07-27T06:51:42.080

**这对我有用**

```
 Object[][] bookData = { { "col1", "col2", 3 }, { "col1", "col2", 3 }, { "col1", "col2", 3 },
            { "col1", "col2", 3 }, { "col1", "col2", 3 }, { "col1", "col2", 3 } };

    String[] headers = new String[] { "HEader 1", "HEader 2", "HEader 3" };

    int noOfColumns = headers.length;
    int rowCount = 0;

    Row rowZero = sheet.createRow(rowCount++);
    CellStyle style = workbook.createCellStyle();
    Font font = workbook.createFont();
    font.setBoldweight(Font.BOLDWEIGHT_BOLD);
    style.setFont(font);
    for (int col = 1; col <= noOfColumns; col++) {
        Cell cell = rowZero.createCell(col);
        cell.setCellValue(headers[col - 1]);
        cell.setCellStyle(style);
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-06T03:55:38.627

一个工作，完成和简单的例子：

```
package io.github.baijifeilong.excel;

import lombok.SneakyThrows;
import org.apache.poi.xssf.usermodel.XSSFRow;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

import java.io.FileOutputStream;

/**
 * Created by BaiJiFeiLong@gmail.com at 2019/12/6 11:41
 */
public class ExcelBoldTextDemo {

    @SneakyThrows
    public static void main(String[] args) {

        new XSSFWorkbook() {{
            XSSFRow row = createSheet().createRow(0);
            row.setRowStyle(createCellStyle());
            row.getRowStyle().getFont().setBold(true);
            row.createCell(0).setCellValue("Alpha");
            row.createCell(1).setCellValue("Beta");
            row.createCell(2).setCellValue("Gamma");
        }}.write(new FileOutputStream("demo.xlsx"));
    }
} 
```

# api - 我创建了一个简单的应用程序，它工作正常，但其他人看不到它，，，

> ID：12286672
> 
> 赞同：-1
> 
> 时间：2012-09-05T17:22:41.083
> 
> 标签：api, facebook-graph-api, iframe, development-environment

应用网址

[http://apps.facebook.com/visitmanipur/](http://apps.facebook.com/visitmanipur/)

应用页面

[http://www.facebook.com/appcenter/visitmanipur](http://www.facebook.com/appcenter/visitmanipur)

该应用程序（iframe facebook）在我的 facebook id 中工作，但在其他 id 中不起作用，，，这背后可能是什么问题，，，

它说...您请求的页面未找到。您可能单击了过期的链接或输入了错误的地址。一些网址区分大小写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:34:52.570

正如您在评论中澄清的那样，您忘记了将应用程序从沙盒模式中删除。这可以防止应用程序的非开发人员看到它

# jquery-ui - 不同目的所需的两页编码

> ID：12286674
> 
> 赞同：1
> 
> 时间：2012-09-05T17:22:55.090
> 
> 标签：jquery-ui, encoding, datepicker

场景是这样的：

法语中的 datepicker jquery ui 需要对页面进行 iso 编码（因为使用 utf ，有一些法语字符无法很好地显示）

```
<%@ page language="java" import="java.util.*" pageEncoding="ISO-8859-1"%> 
```

我有一些阿拉伯语数据需要存储在数据库中，为此页面必须以 utf_8 编码

```
<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%> 
```

数据通过ajax发送

该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:26:02.107

在这种情况下，我认为您应该始终使用 UTF-8 发布。但是您需要确保所有声明的编码都一致。例如，对于 HTML，`<meta>`标记中声明的任何编码都应与实际的`Content-type`HTTP 标头一致。

我能想到以 ISO-8859-1 而不是 UTF-8 发布的唯一原因是，如果您有一个无法更改的客户端需要这种编码。但即使在这种情况下，希望您能够使用`User-Agent`请求标头来识别该客户端并将 ISO-8859-1 仅提供给该客户端。

# android - 使用 Roboguice 注入自定义服务的问题

> ID：12286676
> 
> 赞同：4
> 
> 时间：2012-09-05T17:23:00.580
> 
> 标签：android, roboguice

我刚开始玩 Roboguice，我正试图将我的一项服务注入到活动或片段中。发生的情况是我的服务只是作为 POJO 实例化和注入，并且没有调用生命周期方法，这让我怀疑我忘了做某事。但是，我只能找到注入知名服务的示例。

该服务看起来像这样：

```
public class ProgramService extends RoboService {

public ProgramService() {
    Log.i(getClass().getSimpleName(), "instantiating service " + hashCode());
}

public class Binder extends android.os.Binder {
    public ProgramService getService() {
        return ProgramService.this;
    }
}

@Override
public IBinder onBind(Intent arg0) {
    Log.i(getClass().getSimpleName(), "binding service " + hashCode());
    return new Binder();
}

@Override
public void onCreate() {
    super.onCreate();
    Log.i(getClass().getSimpleName(), "creating service " + hashCode());
}

@Override
public void onDestroy() {
    super.onDestroy();
    Log.i(getClass().getSimpleName(), "destroying service " + hashCode());
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.i(getClass().getSimpleName(), "starting service " + hashCode());
    return START_STICKY;
} 
```

}

我的活动看起来像这样：

```
public class ProgramListActivity extends RoboFragmentActivity implements
    ProgramListFragment.Callbacks {

private boolean mTwoPane;

@Inject
private ProgramService programService;
... 
```

该服务在清单中声明如下：

```
<service android:enabled="true" android:exported="false" android:name=".ProgramService"></service> 
```

我得到的唯一日志输出是“实例化服务”。

我该怎么做才能让 Roboguice 知道 ProgramService 不是 POJO 而是服务？我一定错过了一些相当基本的东西。

提前致谢

# javascript - JavaScript 错误无效量词

> ID：12286678
> 
> 赞同：1
> 
> 时间：2012-09-05T17:23:09.170
> 
> 标签：javascript, regex, parsing

这个javascript代码：

```
var regex = /(?<=<img src=").*?(?=")/gm;
var src = regex.match(str); 
```

给我这个错误：

```
SyntaxError: invalid quantifier ?<=<img src=").*?(?=")
    in eval() line 0 
```

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:25:22.060

您需要像这样转义问号：

```
/(\?<=<img src=").*?(\?=")/gm 
```

编辑：

以上解决了您的“无效量词”问题。但是，正如@Pointy 在他的评论中指出的那样，`RegExp`对象不包含任何`match`功能。您可能正在寻找`match`字符串。（例如，`"string".match(/reg(exp)/);`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:04:29.090

看一下[match()](http://www.w3schools.com/jsref/jsref_match.asp)格式

```
var src = str.match(/(?<=<img src=").*?(?=")/gm); 
```

# java - 通过2点画一条无限线？

> ID：12286687
> 
> 赞同：4
> 
> 时间：2012-09-05T17:23:52.093
> 
> 标签：java, line, graphics2d, java-2d

我正在寻找一种方法来通过 2 个点绘制一条无限线（一条没有尽头的线，也称为射线）。我可以用 Line2D 在 2 点之间画一条线，这里没问题。

接下来无限部分需要看看。以我简单的想法，让我们将第二个点的 x 和 y 坐标乘以 100 并重新绘制线。这有效，但仅适用于简单的情况。

例如，这是一个产生不同角度的线条的情况：

```
 g.setColor(Color.red);
    g2.setStroke(new BasicStroke(4.0f));
    g2.draw(new Line2D.Double(0, 61.632653061218946, 944, 217.25510204080692));
    g.setColor(Color.blue);
    g2.setStroke(new BasicStroke(1.0f));
    g2.draw(new Line2D.Double(0, 61.632653061218946, 944*10, 217.25510204080692*10)); 
```

这将首先画一条粗红线，然后画一条蓝色细线。

与红线相比，蓝线的角度不同。这是一个截图来说明这种效果：

![在此处输入图像描述](../Images/4f8b9b45157a644152663b632c883626.png)

有人知道解决这个问题的方法，还是更好的方法来通过 2 个点画一条无限线？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T17:35:54.233

通过将第二个点乘以 10，您不会保持 x 与 y 的比率。您需要在相乘之前减去原点。

`g2.draw(new Line2D.Double(0, 61.632653061218946, 944*10, (217.25510204080692-61.632653061218946)*10+61.632653061218946));`应该管用。

一般来说，`g2.draw(new Line2D.Double(x0,y0,(x1-x0)*k+x0,(y1-y0)*k+y0)`应该工作。

这背后的数学是将两点视为向量（`a`& `b`）。现在，定义第三个和第四个向量：差向量 ( `d`) 和无限端点向量 ( `c`)。差向量只是 和 之间的`b`差`a`；那就是`d = b-a`。要找到一个无穷大的终点，我们只需将差向量的无穷大乘以起点（`a`）。所以, `c = a + d*k`, 哪里`k`是任意大的常数。更换后`d`，我们有`c = a+(b-a)*k`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T17:38:30.240

让我们来算一算。

*   第一行是`(0, 61.632653061218946)-(944, 217.25510204080692)`. 坡度是`rise/run`，因此`m = 0.16485428917329234533898305084746`。
*   第二行是`(0, 61.632653061218946)-(9440, 2172.5510204080692)`；`m = 0.22361423382911549300847457627119`.

*坡度不同，这只是角度不同的另一种说法。*

你需要做的是*延长*线。您不能将其中一个点的两个坐标都乘以 10。首先确定超出画布边界的 x 或 ay，然后*求解另一个值*。

你怎么做到这一点？

1.  首先，得到直线的方程。一条线由 定义`y=m*x+b`，其中`m`是斜率，`b`是 y 截距。

    1.  我们已经知道如何计算斜率 ( `rise/run`= `y2 - y1 / x2 - x1`)。我们得到`0.16485428917329234533898305084746`
    2.  插入斜率并求解`b`( `y - m*x`)，得到`61.632653061218946`。在您的情况下，您已经有了这个值，因为 y 截距是 y 坐标 when `x=0`。
    3.  然后你得到方程`y = 0.16485428917329234533898305084746 * x + 61.632653061218946`
2.  现在，选择一个足够大的 x，比如 10000。将这个值代入并求解 y。你得到`1710.1755447941423993898305084746`.

3.  最后，画线到这个新点，`(0, 61.632653061218946)-(10000,1710.1755447941423993898305084746)`

太好了，现在让我们概括一下。

*   我们有两点`(x1, y1)`和`(x2, y2)`。我们要解决`(10000, y3)`.
*   因此`y3 = m*x3 + b`， 或`y3 = m * 10000 + b`。
*   我们也知道`b = y - m * x`，因此将其插入并任意选择第 1 点，`y3 = m * 10000 + y1 - m * x1`。
*   好的，让我们排除`m`: `y3 = m * (10000 + x1) - y1`。
*   我们知道`m = (y2 - y1) / (x2 - x1)`，所以插入这个：`y3 = ((y2 - y1) / (x2 - x1)) * (10000 + x1) - y1`。

如果你的线不是从 开始`x = 0`，你需要重复这个过程`x = 0`，这意味着你应该画一条线`(0, ((y2 - y1) / (x2 - x1)) * x1 - y1)-(10000,((y2 - y1) / (x2 - x1)) * (10000 + x1) - y1)`。

注意：如果`x2 - x1`为 0，则斜率无限。这是一条垂直线，您必须单独处理这种情况。

# c - C / C ++中的关键字重新定义

> ID：12286691
> 
> 赞同：3
> 
> 时间：2012-09-05T17:24:11.780
> 
> 标签：c

我可以在 C 中使用#define 重新定义关键字吗？

我在 C++ 标准中发现了这一点：

**ISO/IEC 14882:1998 和 ISO/IEC 14882:2003**

> 17.4.3.1.1 宏名称 [lib.macro.names]
> 
> 2 包含头文件的翻译单元不应包含定义在该头文件中声明或定义的名称的任何宏。这样的翻译单元也不应为在词法上与关键字相同的名称定义宏。
> 
> 164) 不允许使用#undef 指令删除库宏定义。

**ISO/IEC 14882:2011**

> 17.6.4.3.1 宏名称 [macro.names]
> 
> 2 翻译单元的#define 或#undef 名称不得与关键字、表 3 中列出的标识符或 7.6 中描述的属性标记在词汇上相同。

所以，如果我们包含标准 C++ 库中的任何头文件，我们就不能在 C++98 / C++03 中重新定义关键字，而在 C++11 中，我们不能在任何翻译单元中这样做，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:27:40.087

你能？是的，大多数编译器不会强行阻止它。

你应该？不，（几乎）从不，这（通常）是一个可怕的想法。各种各样的事情都可能发生故障，并且与大多数预处理器废话一样，调试起来将非常困难。

所以，你能*合法*吗？不。

以同样的方式，您*可以*拥有以命名空间或各种其他非常糟糕的事物开头`__`或添加事物的宏或变量。`std::`然而，像这样的大多数规则都有很好的理由（主要是与关键字或名称解析相关的冲突）。虽然这在物理上可能是可行的，但您*需要的时间很少（如果有的话），而且**应该*的时间也更少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:28:38.190

在 C 标准中，这是不允许的。

> **C11, § 6.4.1 关键词**
> 
> [...]
> 
> 上述标记（区分大小写）保留（在翻译阶段 7 和 8 中）用作关键字，否则不得使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T17:30:39.403

这个问题有几个方面：

*   如果您要重新定义关键字，那么在 95% 的编译器中，无论标准中写了什么，这都能正常工作，主要是因为这在旧编译器中工作；
*   您永远无法确定这将在您的编译器的下一个版本中起作用；
*   从实际的角度来看，您应该避免这种情况。代码将更难阅读和理解。

底线：你真的需要这个吗？你会得到什么？

ps 我见过几次`try`-`catch`在各种标题中重新定义。

# python - 来自 zope 模式的循环导入引用

> ID：12286692
> 
> 赞同：1
> 
> 时间：2012-09-05T17:24:13.117
> 
> 标签：python, schema, plone, zope, circular-reference

我遇到了一个与[这个 SO question](https://stackoverflow.com/questions/9417571/defining-circular-references-using-zope-schema)非常相似的问题，但是我尝试应用这些以前的答案并没有通过，建议我将其作为一个新问题开始：

在下面的代码中，我定义了几个我认为会延迟循环引用的 getChoices() 函数，但不是！请问这里有什么问题吗？

```
# ns.content/ns/content/foo.py
from zope import schema
from plone.directives import form
from z3c.relationfield.schema import Relation, RelationChoice
from plone.formwidget.contenttree import ObjPathSourceBinder

class IFoo(form.Schema):

    def getBarChoices():
        # avoiding circular refs...
        from bar import IBar
        return ObjPathSourceBinder(object_provides=IBar.__identifier__)

    barChoices = getBarChoices()
    form.widget(bar=AutocompleteFieldWidget)
    bar = Relation(source= barChoices,required=False)

# ns.content/ns/content/bar.py
from zope import schema
from plone.directives import form
from z3c.relationfield.schema import Relation, RelationChoice
from plone.formwidget.contenttree import ObjPathSourceBinder

class IBar(form.Schema):

    def getFooChoices():
        # avoiding circular refs...
        from foo import IFoo
        return ObjPathSourceBinder(object_provides=IFoo.__identifier__)

    fooChoices = getFooChoices()
    form.widget(foo=AutocompleteFieldWidget)
    foo = Relation(source= fooChoices,required=False)

resultingError = """
  File ".../buildout-cache/eggs/martian-0.11.3-py2.7.egg/martian/scan.py", line 217, in resolve
    __import__(used)
  File ".../zeocluster/src/ns.content/ns/content/bar.py", line 32, in <module>
    class IBar(form.Schema):
  File ".../zeocluster/src/ns.content/ns/content/bar.py", line 48, in IBar
    fooChoices = getFooChoices()
  File ".../zeocluster/src/ns.content/ns/content/bar.py", line 38, in getFooChoices
    from ns.content.foo import IFoo
  File ".../zeocluster/src/ns.content/ns/content/foo.py", line 33, in <module>
    class IFoo(form.Schema):
  File ".../zeocluster/src/ns.content/ns/content/foo.py", line 73, in IFoo
    barChoices = getBarChoices()
  File ".../zeocluster/src/ns.content/ns/content/foo.py", line 39, in getBarChoices
    from ns.content.bar import IBar
zope.configuration.xmlconfig.ZopeXMLConfigurationError: File ".../zeocluster/parts/client1/etc/site.zcml", line 16.2-16.23
    ZopeXMLConfigurationError: File ".../buildout-cache/eggs/Products.CMFPlone-4.2.0.1-py2.7.egg/Products/CMFPlone/configure.zcml", line 102.4-106.10
    ZopeXMLConfigurationError: File ".../zeocluster/src/ns.content/ns/content/configure.zcml", line 18.2-18.27
    ImportError: cannot import name IBar
""" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T17:48:03.723

您`getBarChoices()`在定义时调用 class `IFoo`。所以`from bar import IBar`将在解析`foo.py`导致循环导入时执行。

在我看来，你基本上有两种选择：

**1) 使用字符串作为 object_provides 的标识符。**

无论如何，您已经通过使用这样做了`IFoo.__identifier__`，但是如果您将其设为静态而不是动态，这将消除您的循环依赖：

```
source = ObjPathSourceBinder(object_provides='ns.content.bar.IBar')
bar = Relation(source=source,required=False) 
```

无需导入`IBar`. `foo.py`这有一个明显的缺点，即 的位置`IBar`现在在您的代码中被硬编码，因此每当您更改名称或位置时，`IBar`您都需要在`foo.py`.

**2) 标记接口**

例如，另一种选择是让`IFoo`并`IBar`实现您保存在第三个文件中的标记接口`ns/content/interfaces.py`。这样你就可以按照以下方式做一些事情

**接口.py**

```
from zope.interface import Interface

class IBarMarker(Interface):
    """Marker interface for IBar objects.
    """

class IFooMarker(Interface):
    """Marker interface for IFoo objects.
    """ 
```

**foo.py**

```
from zope.interface import directlyProvides
from plone.directives import form
from plone.formwidget.contenttree import ObjPathSourceBinder
from plone.formwidget.autocomplete import AutocompleteFieldWidget
from z3c.relationfield.schema import RelationChoice

from ns.content.interfaces import IBarMarker
from ns.content.interfaces import IFooMarker

class IFoo(form.Schema):
    directlyProvides(IFooMarker)

    form.widget(bar=AutocompleteFieldWidget)
    bar = RelationChoice(source=ObjPathSourceBinder(
                            object_provides=IBarMarker.__identifier__),
                         required=False) 
```

**酒吧.py**

```
class IBar(form.Schema):
    directlyProvides(IBarMarker)

    form.widget(foo=AutocompleteFieldWidget)
    foo = RelationChoice(source=ObjPathSourceBinder(
                            object_provides=IFooMarker.__identifier__),
                         required=False) 
```

# html - 使用 html 类属性作为 javascript 句柄是不好的做法吗

> ID：12286702
> 
> 赞同：7
> 
> 时间：2012-09-05T17:24:37.797
> 
> 标签：html, class-attribute

我经常需要使用 jquery 一次选择多个元素...为此，我通常只需将一个类添加到我想选择的所有元素中，然后使用 jquery 按类进行选择。

这是一种不好的做法，还是我应该改用 html 5 数据属性之类的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T17:32:11.473

我会说对于不需要传递参数的一般参考是可以的。

即所有`.flashing`元素都将应用闪光效果。结束。

当您开始使用多个类或“数据类”时，它会失控，例如`class="flashing-15times onhoveronly"`，等等......

一旦需要开始传递参数或变量，就应该转向数据属性或其他 OOP 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T20:43:43.547

这是一个很好的练习。这就是类属性的用途。永远记住，class 属性是 HTML 语义分层的一部分，用于标记具有共同属性的对象组，而不是 CSS 的一部分。正是 CSS 选择器提供了 HTML 语义和 CSS 表示之间的绑定。标记具有共同属性的对象组正是您正在做的事情。

只需确保为要收集的对象集合使用有意义的名称，以将 jquery 操作应用到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T17:27:30.383

这曾经是执行此操作的标准方法。然而，目前的标准方法是使用数据属性。例如，如果您想制作一个使某个元素具有工具提示的插件，您可以这样做

```
<div data-tooltip="This is a div"></div> 
```

[您可以使用 jquery hass 属性](http://api.jquery.com/has-attribute-selector/)选择器选择具有 data- 属性的元素。

```
$("[data-tooltip]").each(function(){
    generate_tooltip($(this));
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T17:49:23.027

我认为 w3 规范在这里很有帮助：

[http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)

金钱报价：

> 自定义数据属性旨在存储页面或应用程序私有的自定义数据，没有更合​​适的属性或元素。

然后它继续使用一个音乐网站的例子，该网站使用数据来包含音乐曲目的长度，以便进行排序。

看起来 data- 是为这些类型的用途而保留的，而不是作为选择器的类/ID。

这是另一篇关于该主题的有用文章：http: [//danwebb.net/2010/1/27/put-that-data-attribute-away-son-you-might-hurt-someone](http://danwebb.net/2010/1/27/put-that-data-attribute-away-son-you-might-hurt-someone)

# c# - 有没有合适的方法来创建一个 html src 路径？

> ID：12286706
> 
> 赞同：4
> 
> 时间：2012-09-05T17:24:41.920
> 
> 标签：c#, html, path, imagesource, path-separator

我知道处理文件/目录路径的正确方法是使用`Path.AltDirectorySeparatorChar`，但这是否适用于 html 源路径？

或者，是否反斜杠是 html 所需的路径分隔符？我一直使用反斜杠（即`<img src="images\birthdaysurprise.jpg" />`）来完成它，但现在我想知道我是否一直在做不正确的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:27:00.510

虽然我不知道法律的确切字母，但对所有路径分隔符使用正斜杠。甚至 Windows 也可以在其 API 中使用正斜杠作为分隔符。

使用反斜杠可能在 Windows 平台下工作，但是：

*   看起来很奇怪
*   如果您迁移到基于 *nix 的系统，将会死而复生。
*   最终可能会破坏一些假设正斜杠的代码
*   `\`在许多情况下会启动转义序列，因此`\n`可能会以意想不到的方式进行翻译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:06:53.820

“法律条文”是正斜杠（'/'）是这样做的方式。根据[RFC 2396，*统一资源标识符 (URI)：通用语法*](http://www.ietf.org/rfc/rfc2396.txt)，§3，“URI 语法组件”：

```
The URI syntax does not require that the scheme-specific-part have
any general structure or set of semantics which is common among all
URI.  However, a subset of URI do share a common syntax for
representing hierarchical relationships within the namespace.  This
"generic URI" syntax consists of a sequence of four main components:

   <scheme>://<authority><path>?<query>

each of which, except <scheme>, may be absent from a particular URI.
For example, some URI schemes do not allow an <authority> component,
and others do not use a <query> component.

   absoluteURI   = scheme ":" ( hier_part | opaque_part )

URI that are hierarchical in nature use the slash "/" character for
separating hierarchical components.  For some file systems, a "/"
character (used to denote the hierarchical structure of a URI) is the
delimiter used to construct a file name hierarchy, and thus the URI
path will look similar to a file pathname.  This does NOT imply that
the resource is a file or that the URI maps to an actual filesystem
pathname.

   hier_part     = ( net_path | abs_path ) [ "?" query ]

   net_path      = "//" authority [ abs_path ]

   abs_path      = "/"  path_segments

URI that do not make use of the slash "/" character for separating
hierarchical components are considered opaque by the generic URI
parser.

   opaque_part   = uric_no_slash *uric

   uric_no_slash = unreserved | escaped | ";" | "?" | ":" | "@" |
                   "&" | "=" | "+" | "$" | ","

We use the term <path> to refer to both the <abs_path> and
<opaque_part> constructs, since they are mutually exclusive for any
given URI and can be parsed as a single component. 
```

您的 URI 需要最少数量的正斜杠来将*方案*与*权限*分开。URI 的其余部分（*路径*和*查询组件）仅在相关**方案*和*权限*的上下文中才真正有意义。但是，有几点需要考虑：

*   一，URI*路径*不是文件系统路径（**除非**URI 方案是`file`( `file://...`)。URI 路径只是具有*权威*意义的标识符，**可能**（或可能不）映射到特定文件系统条目。

*   二，不透明的 URI 路径（不用`'/'`作路径分隔符的路径，不能被通用工具很好地处理。此外，所讨论的路径不一定是不透明的：这意味着将通用工具应用于不透明的 URI 可能会导致在意想不到的行为中。

# machine-learning - 神经网络训练不够好

> ID：12286710
> 
> 赞同：0
> 
> 时间：2012-09-05T17:25:12.983
> 
> 标签：machine-learning, image-recognition, neural-network

我在 Tom Mitchell 的“机器学习简介”一书中读到了一个项目的想法。该项目是关于确定面部的方向（左、右、下、直）。我使用我自己开发的神经网络，它可以工作（用 XOR、抛物线函数测试......），但不能很好地训练它来正确地确定它们。我得到的最好的情况是 43% 正确，这是相当低的。

以下是该项目的描述：

图像 32 x 30，灰度（我使用 13 个人 x 32 图像用于训练示例和 4 个人 x 32 图像用于测试）。

神经网络：3 层 - 输入、隐藏、输出

32 x 30 输入单元

3 个隐藏单元，使用 Sigmoid 作为传递函数

1个输出单元，使用线性作为传递函数。

输出：0.2 = 左；0.4 = 下降；0.6 = 正确；0.8 直

学习率 = 动量 = 0.3

权重和偏差设置为随机的小值。

在 25000 次迭代之后，我仍然只有大约 40% 的正确率。在书中，他们设法获得了 90% 的准确率！

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:55:11.610

在@ffriend 的评论之后，一切都像魅力一样。我使用了 4 个输出神经元，准确率超过了 90%。如果我在隐藏层中使用更多神经元，误差会变小，但程序需要更多时间来运行网络和反向传播。

# php - 从 Magento 产品视图中的可配置产品中获取所有简单产品

> ID：12286716
> 
> 赞同：26
> 
> 时间：2012-09-05T17:25:35.430
> 
> 标签：php, magento

如何获得与可配置产品相​​关的所有简单产品？我找到了相反的方法（从简单的产品中获得可配置的产品），但这不是我所需要的。

我想显示所选产品的库存数量（可配置属性）。我最初的想法是打印所有数量的库存并使用 jQuery 控制显示。任何想法？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-05T18:01:01.053

使用下面的代码

获取完整产品信息的代码（其中 3 是可配置的产品 ID）

```
$product = Mage::getModel('catalog/product')->load(3); 
$childProducts = Mage::getModel('catalog/product_type_configurable')
                    ->getUsedProducts(null,$product);

foreach($childProducts as $child) {
    print_r($child->getName());  // You can use any of the magic get functions on this object to get the value
} 
```

获取儿童产品 ID 的另一个代码

```
$childProducts = Mage::getModel('catalog/product_type_configurable')
                    ->getChildrenIds(3); 
```

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-07T04:50:05.743

一个可配置的产品可以有多个与之关联的其他产品。

这是获取与可配置产品关联的所有子产品的代码。

这是代码:)

```
/**
 * Load product by product id
 */
$product = Mage::getModel('catalog/product')->load(YOUR_PRODUCT_ID);

/**
 * Get child products id and such (only ids)
 */
$childIds = Mage::getModel('catalog/product_type_configurable')->getChildrenIds($product->getId());

/**
 * Get children products (all associated children products data)
 */
$childProducts = Mage::getModel('catalog/product_type_configurable')->getUsedProducts(null,$product); 
```

资料来源： http: [//blog.chapagain.com.np/magento-how-to-get-all-associated-children-product-of-a-configurable-product/](http://blog.chapagain.com.np/magento-how-to-get-all-associated-children-product-of-a-configurable-product/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-17T11:06:59.560

使用以下脚本

> `app/design/frontend/default/[your theme]/template/catalog/product/view/type/options/configurable.phtml`

脚本内部：

```
spConfig.getIdOfSelectedProduct = function () {
    var existingProducts = new Object();
    for (var i = this.settings.length - 1; i >= 0; i--) {
        var selected = this.settings[i].options[this.settings[i].selectedIndex];
        if (selected.config) {
            for (var iproducts = 0; iproducts < selected.config.products.length; iproducts++) {
                var usedAsKey = selected.config.products[iproducts] + "";
                if (existingProducts[usedAsKey] == undefined) {
                    existingProducts[usedAsKey] = 1;
                } else {
                    existingProducts[usedAsKey] = existingProducts[usedAsKey] + 1;
                }
            }
        }
    }
    for (var keyValue in existingProducts) {
        for (var keyValueInner in existingProducts) {
            if (Number(existingProducts[keyValueInner]) < Number(existingProducts[keyValue])) {
                delete existingProducts[keyValueInner];
            }
        }
    }
    var sizeOfExistingProducts = 0;
    var currentSimpleProductId = "";
    for (var keyValue in existingProducts) {
        currentSimpleProductId = keyValue;
        sizeOfExistingProducts = sizeOfExistingProducts + 1
    }
    if (sizeOfExistingProducts == 1) {
        alert("Selected product is: " + currentSimpleProductId)
    }
} 
```

现在将`onchange`事件添加到同一页面的下拉列表中：

```
onchange = "spConfig.getIdOfSelectedProduct()" 
```

[详细描述](http://hkpatel201.blogspot.com/2012/09/getting-selected-simple-product-id-in.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-06T10:14:01.357

我知道了。感谢您的回复。

```
<?php if($_product->getTypeId() == "configurable"): ?>
    <?php $_configurable = $_product->getTypeInstance()->getUsedProductIds(); ?>
    <?php foreach ($_configurable as $_config): ?>
        <?php $_simpleproduct = Mage::getModel('catalog/product')->load($_config); ?>
        <?php //Magic php with a $_simpleproduct. ?>
    <?php endforeach; ?>
<?php endif; ?> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-21T19:42:44.160

对于任何想要这样做并显示结果的人，我将分享我为完成它所做的工作

添加到以下`script`部分：**app/design/frontend/default/[your_theme]/template/catalog/product/view/type/options/configurable.phtml**

```
id = {};
<?php 
foreach ($_product->getTypeInstance(true)->getUsedProducts ( null, $_product) as $simple) {
    $stock = Mage::getModel('cataloginventory/stock_item')->loadByProduct($simple)->getQty();
    echo "  id[" . $simple->getId() . "] = $stock;\n\r";
}
?>

    spConfig.getIdOfSelectedProduct = function () {
        var existingProducts = new Object();
        for (var i = this.settings.length - 1; i >= 0; i--) {
            var selected = this.settings[i].options[this.settings[i].selectedIndex];
            if (selected.config) {
                for (var iproducts = 0; iproducts < selected.config.products.length; iproducts++) {
                    var usedAsKey = selected.config.products[iproducts] + "";
                    if (existingProducts[usedAsKey] == undefined) {
                        existingProducts[usedAsKey] = 1;
                    } else {
                        existingProducts[usedAsKey] = existingProducts[usedAsKey] + 1;
                    }
                }
            }
        }
        for (var keyValue in existingProducts) {
            for (var keyValueInner in existingProducts) {
                if (Number(existingProducts[keyValueInner]) < Number(existingProducts[keyValue])) {
                    delete existingProducts[keyValueInner];
                }
            }
        }
        var sizeOfExistingProducts = 0;
        var currentSimpleProductId = "";
        for (var keyValue in existingProducts) {
            currentSimpleProductId = keyValue;
            sizeOfExistingProducts = sizeOfExistingProducts + 1
        }
        if (sizeOfExistingProducts == 1) {
           var qtyLeft = id[currentSimpleProductId];
           if(qtyLeft >= 1) {
               jQuery('.availability-only').html('Only ' + qtyLeft + ' available.');
               jQuery('p.out-of-stock').removeClass('out-of-stock').addClass('in-stock');
               jQuery('p.in-stock > span').html('In stock');
           } else {
               jQuery('.availability-only').html('Sorry, there are none available in this size.');
               jQuery('p.in-stock').removeClass('in-stock').addClass('out-of-stock');
               jQuery('p.out-of-stock > span').html('Out of stock');
           }
        }
    } 
```

在`select`同一页面中添加：

```
 onchange = "spConfig.getIdOfSelectedProduct()" 
```

随意编辑声明打印的内容，但这应该能让你到达那里。手头也占0库存，`Out of stock`改成css和text

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-06T11:03:38.437

在块中编写以下最简单的代码，只需在模板文件中调用它即可获取产品相关产品：

```
 $productId = (int)$this->getRequest()->getParam('id');
    $objectManager = \Magento\Framework\App\objectManager::getInstance();
    $product = $objectManager->create("\Magento\Catalog\Model\Product")->load($productId);
    $collection = $product->getTypeInstance()->getAssociatedProducts($product);
    $this->setCollection($collection); 
```

现在，在模板中编写以下代码来打印名称：

```
 $collection = $block->getCollection(); 
   foreach ($collection as $key => $value) 
   {
      echo $value->getName();
      echo "<br>";
   } 
```

# c# - AppDomain.CurrentDomain.GetData("DataDirectory") 总是返回 Null

> ID：12286720
> 
> 赞同：7
> 
> 时间：2012-09-05T17:25:51.867
> 
> 标签：c#, sql-server-ce, datadirectory

在我的程序中，我需要从默认位置复制一个模板数据库，据我了解，这将根据我选择使用的安装程序而有所不同。问题是我似乎无法读取 |DataDirectory| 的实际路径 我知道我应该使用 AppDomain.CurrentDomain.GetData("DataDirectory") 但它总是在调试器中返回 Null ，这意味着我无法测试我的代码。我尝试了以下两种语法：

```
string sourcePath = AppDomain.CurrentDomain.GetData("DataDirectory").ToString(); 
```

和

```
string defaultpath = Convert.ToString(AppDomain.CurrentDomain.GetData("DataDirectory")); 
```

难道我做错了什么？

比X！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T17:30:55.643

用APPBASE试试

```
AppDomain.CurrentDomain.GetData("APPBASE") 
```

[http://msdn.microsoft.com/en-us/library/system.appdomainsetup.applicationbase.aspx](http://msdn.microsoft.com/en-us/library/system.appdomainsetup.applicationbase.aspx)

如果你想要`DataDirectory`密钥，你必须先执行`SetData`

# command-line - windows .bat 文件。如何比较 2 个文件夹并为比较结果生成返回码？

> ID：12286721
> 
> 赞同：1
> 
> 时间：2012-09-05T17:25:56.133
> 
> 标签：command-line, batch-file

在 .bat 文件中，如果这些文件夹之间有任何差异，我需要比较 2 个文件夹并退出 .bat 文件。

不幸的是，`comp`不要`windiff`为不同的比较结果提供明确的返回码。有没有其他方法来处理`comp`或`windiff`实现上述逻辑的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:48:56.353

`comp`如果文件（集）不同，则将 errorlevel 设置为 1。您可以使用`if errorlevel`(`help if`阅读详细信息) 进行测试，也可以使用
`cmd && cmd_to_execute_if_successful`
`cmd || cmd_to_execute_if_unsuccessful`(`comp folderA folderB || exit /b`在您的情况下)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:36:50.960

实际上两者`comp`都会`fc`返回错误级别，它们都只是有点吵。所以最好将它们的输出通过管道传输到`nul`.

```
:: Comp asks a Y/N question via `stderr` (stream2)
:: Comp prints the differences between files on `stdout` (stream1)
:: So we answer the question, and divert both streams to `nul`
echo n | comp dir1 dir2 > nul 2>&1
if %errorlevel%==0 (
  echo The directories are the same.
) else (
  echo The directories are different.
)

:: FC simply outputs the differences between the files via `stdout`
:: So it's only nessicary to redirect `stdout` (stream1) to nul
fc dir1\* dir2\* > nul
if %errorlevel%==0 (
  echo The directories are the same.
) else (
  echo The directories are different.
) 
```

或者，正如 wmz 指出的那样......

```
echo n | comp dir1 dir2 > nul 2>&1 && cmd_to_execute_if_successful 
```

和

```
fc dir1\* dir2\* > nul || cmd_to_execute_if_unsuccessful 
```

虽然，恕我直言，编码太吵了，有点难以阅读

**注意：** `FC`进行二进制比较，通常不是问题，但您可以通过添加`/L`开关来指定 ASCII 文本。( `fc /l dir1\*.txt dir2\*.txt`)

还要记住不要与 混淆`NUL`，`NULL`它们是不一样的。

# css - 导致 IE9 和 Opera 水平滚动的问题

> ID：12286725
> 
> 赞同：0
> 
> 时间：2012-09-05T17:26:19.043
> 
> 标签：css, facebook-like, internet-explorer-9, opera

我正在开发这个网站的前端部分：http: [//oq.totaleclips.com](http://oq.totaleclips.com)

当我查看其中一个电影列表时，例如[http://oq.totaleclips.com/mpa/The_Hunger_Games_(Movie_2012)](http://oq.totaleclips.com/mpa/The_Hunger_Games_(Movie_2012))，我在 Opera 和 Internet Explorer 9 上得到一个水平滚动。如果我把 `body {overflow-x: hidden} 在我的 CSS 中，我得到了预期的结果，但是当用户按下 Like 按钮并提示评论时，Facebook Like 被切断......这将使在 Facebook 上“Like”变得更加困难。

这是 Facebook 问题和 Opera 问题，还是两者兼而有之？我找不到导致溢出的 DOM 元素，我想它可能是 Facebook Like iFrame “保留”了 Like 按钮右侧的空间，但我不想假设。Facebook 按钮甚至在 Opera 中似乎都不起作用，但这是一个附带问题。

我一直在使用 Firefox 和 Chrome 进行开发，对 IE9 的访问权限有限，所以当我从 Windows 计算机上查看它时发现水平滚动令人失望。然后，看到 Opera 做同样的事情，我几乎不能对 IE9 生气。并且，将 Facebook Like 按钮向左移动会导致它与随后的社交按钮之间出现不希望的换行符。

是什么导致溢出/水平滚动，我怎么能自己发现这样的问题？

特殊性编辑：水平滚动条向右滚动时，会在屏幕布局的最右侧显示一个白色列。当浏览器窗口水平调整大小时，这确实会消失，但它不会显示在 DOM 中。没有看到正文内页面上的元素流入右侧的空白区域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:32:24.240

> 我找不到导致溢出的 DOM 元素

这是你的罪魁祸首：

```
.screener .content {
    margin: auto;
    width: 61em;
} 
```

也许`61em`只是一点点......取决于字体大小和可用的窗口/标签宽度。

# ruby-on-rails - 如何阻止 Rails 用 field_with_errors 包装标签

> ID：12286726
> 
> 赞同：5
> 
> 时间：2012-09-05T17:26:23.723
> 
> 标签：ruby-on-rails

当保存表单并且字段验证失败时，我根本不希望修改标签。我不介意用 div 和“field_with_errors”类包装输入，但我怎样才能阻止它也包装标签呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T17:26:23.723

我无法在 ActionView::Base 文档中找到有关 field_error_proc 方法的任何内容，但这是我想出的解决方案。希望这对其他人有帮助！

```
 ActionView::Base.field_error_proc = Proc.new do |html_tag, instance| 
  unless html_tag =~ /^<label/
    "<div class=\"field_with_errors\">#{html_tag}</div>".html_safe
  else
    html_tag.html_safe
  end
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-07T11:58:13.240

而不是例如

```
<%=label "name", :name%> 
```

, 删除`:name`并拥有

```
<%=label "name"%> 
```

这将停止包装。

# java - 如何使用 Maven 插件从带有注释的现有实体生成 DDL？

> ID：12286727
> 
> 赞同：2
> 
> 时间：2012-09-05T17:26:24.813
> 
> 标签：java, jakarta-ee, maven, ejb, jpa-2.0

我有 maven 项目，我想从现有实体生成 DDL。

我怎样才能做到这一点？

是否有任何可以生成 DDL 的 Maven 插件？

我正在使用 JPA。（打开 jpa）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:00:04.070

openjpa-maven-plugin 插件提供了一个目标`sql`。使用此目标，可以从现有实体创建 DDL。

```
<pluginManagement>
<plugin>
    <groupId>org.apache.openjpa</groupId>
    <artifactId>openjpa-maven-plugin</artifactId>
    <version>2.2.0</version>
    <configuration>
        <includes>**/entity/ *.class</includes>
        <addDefaultConstructor>true</addDefaultConstructor>
        <connectionDriverName>com.ibm.db2.jcc.DB2Driver</connectionDriverName>
        <enforcePropertyRestrictions>true</enforcePropertyRestrictions>
        <persistenceXmlFile>${basedir}/src/main/resources/META-INF/persistence.xml</persistenceXmlFile>
        <skip>${skip.jpa}</skip>
        <sqlFile>${basedir}/src/main/resources/database.sql</sqlFile>
    </configuration>
        <dependencies>
            <dependency>
                 <groupId>org.apache.openjpa</groupId>
                 <artifactId>openjpa</artifactId>
                 <version>2.1.1</version>
            </dependency>
            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-api</artifactId>
                <version>1.6.6</version>
            </dependency>
            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-simple</artifactId>
                <version>1.6.6</version>
            </dependency>
        </dependencies>
    </plugin>
</pluginManagement>

<plugin>
    <groupId>org.apache.openjpa</groupId>
    <artifactId>openjpa-maven-plugin</artifactId>
    <executions>
        <execution>
            <id>sql</id>
            <phase>generate-resources</phase>
            <goals>
                <goal>sql</goal>
            </goals>
        </execution>                    
    </executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T18:14:12.767

如果您使用 Hibernate 作为您的 JPA 提供程序，请查看[http://users.mafr.de/~matthias/articles/generating-ddl-scripts.html](http://users.mafr.de/~matthias/articles/generating-ddl-scripts.html)。

[从 JPA 注释生成 DDL 的](https://stackoverflow.com/questions/5439866/generate-ddl-from-jpa-annotations)可能重复项，尽管问题的措辞略有不同？

# java - 套接字通信服务器/客户端

> ID：12286728
> 
> 赞同：1
> 
> 时间：2012-09-05T17:26:26.623
> 
> 标签：java, sockets

我对 Sockets 有点陌生，我正在尝试编写一个程序，我基本上可以将一些简单的请求从客户端程序发送到服务器程序。现在我只想在客户端中有 1 或 2 个用户可以选择的选项。例如，如果用户在客户端中选择“选项 1”，则服务器会发回一条消息“您选择选项 1”等等，但我无法弄清楚如何读取客户端发送的服务器上的输入。

客户代码：

```
Socket socket = null;

    try
    {
        System.out.println("Connecting to Server");

        socket = new Socket("192.168.0.104", 7003);
        socket.setSoTimeout(10000);
        System.out.println("Connected");

        InputStreamReader input = new InputStreamReader(socket.getInputStream());
        BufferedReader buffer = new BufferedReader(input);
        PrintWriter print = new PrintWriter(socket.getOutputStream(), true);

        String line = buffer.readLine();

        //Not Sure which buffer to user here            
        System.out.println("Option 1");
        System.out.println("Option 2");
        System.out.println("Option 3");
        }

        System.out.println("Closing Client Connection");
        buffer.close();
        input.close();
        print.close();
        socket.close();
        System.exit(0); 
```

服务器代码：

```
 ServerSocket serverSock = null;
    Socket standSock = null;

    try
    {
        serverSock = new ServerSocket(7003);
        standSock = serverSock.accept();

        InputStreamReader input = new InputStreamReader(standSock.getInputStream());
        BufferedReader read = new BufferedReader(input);
        PrintWriter print = new PrintWriter(standSock.getOutputStream(), true);

        String dateTime = (Calendar.getInstance()).getTime().toString();
        print.println("You're connected to the Server at: " + dateTime);
        print.println("Type Q to disconnect");

        String line = read.readLine();
        //Not sure what to do here
        System.out.println("Client: " + line);
        print.println("Server" + line);

        System.out.println("Closing Server Connection");
        read.close();
        input.close();
        print.close();
        standSock.close(); 
```

我是否需要在 Clinet 中使用两个不同的 BufferedReader，一个用于用户输入，一个用于套接字？真的对这部分感到困惑。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:32:46.433

客户端需要读取用户的输入并将其发送到服务器。服务器需要从套接字读取并响应套接字。客户端必须从套接字读取并向用户提供适当的消息。服务器不会直接向用户读取或写入任何内容，只能通过客户端。

# html - 阻止 wordpress 添加 CDATA

> ID：12286730
> 
> 赞同：1
> 
> 时间：2012-09-05T17:26:50.353
> 
> 标签：html, wordpress, xhtml, cdata

我太新了，无法评论我在[这里](https://stackoverflow.com/questions/8492472/stop-wordpress-from-using-cdata)找到的答案。

我正在尝试发布源代码，并且 wp 不断将 CDATA 等添加到代码中，导致它无法正确显示。

根据我找到的答案，我将 wp-includes\post-template.php 第 167 行更改为此。

```
$content = str_replace('<![CDATA[','',$content); $content = str_replace(']]>','',$content); //$content = str_replace(']]>', ']]&gt;', $content); 
```

修改该行之后，我仍然在经历 wp 更改代码。我还能做些什么来防止 wp 把事情搞砸吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T20:54:04.833

旧帖子，但这是我修复它的方法...尝试将此代码放入插件或您的functions.php文件中。

```
function remove_bad_things(){ ?>
<script>

jQuery('#content-html').click(function(){
  jQuery('textarea[name=content]').val( jQuery('textarea[name=content]').val().replace('// <![CDATA[','') );
  jQuery('textarea[name=content]').val( jQuery('textarea[name=content]').val().replace('// ]]>','') );
});

</script>
<?php }

add_action('admin_footer','remove_bad_things'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:35:02.690

尽管我很讨厌在 SO 上回答“使用插件”，但有一些插件允许您通过简码添加代码。我在我的博客上使用了一个名为 Qoate 的旧版本（在 3.4 上仍然可以正常工作）；

[http://wordpress.org/extend/plugins/qoate-simple-code-snippets/](http://wordpress.org/extend/plugins/qoate-simple-code-snippets/)

一个快速的谷歌也给出了这个；

[http://wordpress.org/extend/plugins/wp-syntax/](http://wordpress.org/extend/plugins/wp-syntax/)

为自己省去很多麻烦，尝试自己设置和格式化（专注于编写要显示的代码而不是显示它的代码！:)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-05T02:23:20.183

在保存帖子时过滤掉这些标签对我有用：

```
function my_filter_cdata( $content ) {
  $content = str_replace( '// <![CDATA[', '', $content );
  $content = str_replace( '// ]]>', '', $content );
  return $content;
}
add_filter( 'content_save_pre', 'my_filter_cdata', 9, 1 ); 
```

# java - 在bash中指向不同的jdk版本来运行java程序

> ID：12286732
> 
> 赞同：1
> 
> 时间：2012-09-05T17:26:54.113
> 
> 标签：java

我正在尝试在 linux 中运行 java 程序，当前安装的版本是 1.5，我想使用 1.7 jdk 运行。

到目前为止，我所做的是在 bash 中，

```
export JAVA_HOME=/Myhome/java/java1.7/
export PATH=$JAVA_HOME/bin
EXPORT PATH 
```

在上面执行之后，当我输入 which java 时，它仍然指向旧版本（1.5）。

我不想修改 /user/bin/java 是什么，只是想指向更新的版本进行测试。

任何人都可以帮助我如何改变这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:32:01.273

您需要配置替代方案。例如：

```
# alternatives --install /usr/bin/java java /usr/java/jdk1.6.0_24/jre/bin/java 100
# alternatives --install /usr/bin/javaws javaws /usr/java/jdk1.6.0_24/jre/bin/javaws 100
# alternatives --install /usr/lib/mozilla/plugins/libjavaplugin.so libjavaplugin.so
                  /usr/java/jdk1.6.0_24/jre/lib/i386/libnpjp2.so 100 
```

更改 JDK 的路径

# java - Sikuli+Webdriver：出现错误 - x.png 看起来像一个文件，但在磁盘上找不到。假设它是文本

> ID：12286736
> 
> 赞同：0
> 
> 时间：2012-09-05T17:27:02.723
> 
> 标签：java, webdriver, sikuli

我正在尝试使用 sikuli 来验证图像是否出现在 html 页面上。下面是代码：

```
public void verifyimage() {
    Screen s = new Screen();
    WebDriver driver = new FirefoxDriver ();
    driver.get("http://testpage.com/");
    WebElement id = driver.findElement(By.id("input_id"));
    id.sendKeys("123");
    WebElement type = driver.findElement(By.id("input_text"));
    type.sendKeys("Text");
    WebElement submitBtn = driver.findElement(By.cssSelector("input[type='submit']"));
    submitBtn.click();
    try {
        s.wait("x.png");
    }
    catch  (FindFailed e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

当我运行它时出现以下错误：

```
[info] Sikuli vision engine loaded.
[error] x.png looks like a file, but can't be found on the disk. Assume it's text.
[info] Text Recognizer inited.
[error] x.png looks like a file, but can't be found on the disk. Assume it's text.
FindFailed: can not find x.png on the screen.
Line ?, in File ?
at org.sikuli.script.Region.handleFindFailed(Region.java:420)
at org.sikuli.script.Region.wait(Region.java:511)
at org.sikuli.script.Region.wait(Region.java:478)
at com.pictela.runScriptTest.testScript300x250(runScriptTest.java:41)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
at org.testng.TestRunner.privateRun(TestRunner.java:767)
at org.testng.TestRunner.run(TestRunner.java:617)
at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
at org.testng.SuiteRunner.run(SuiteRunner.java:240)
at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
at org.testng.TestNG.runSuitesSequentially(TestNG.java:1197)
at org.testng.TestNG.runSuitesLocally(TestNG.java:1122)
at org.testng.TestNG.run(TestNG.java:1030)
at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175) 
```

我尝试将图像文件放在与 java 文件相同的文件夹下，以及它的单独文件夹中（在项目/图像下）。但是我仍然得到相同的结果。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:11:56.750

通过以下方法解决了我自己的问题：

[http://doc.sikuli.org/faq/030-java-dev.html#how-to-use-sikuli-script-in-your-java-programs](http://doc.sikuli.org/faq/030-java-dev.html#how-to-use-sikuli-script-in-your-java-programs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-09T08:44:30.453

我们解决了一个类似的问题 - 在 Sikuli IDE 上看不到，并通过更改代码中引用的文件的绝对路径从 Eclipse 报告：s.wait("x.png");

屏幕 s = new Screen();

```
 try {

                 System.out.println("Inside Try block");
                 s.doubleClick("D:\\User\\Eclipse-Sikuli\\Wors-Space\\My_Screen\\Images\\TELTGBY7l.png"); 
```

在这里，我给出了图像的绝对路径，而不是单独的当前项目文件夹名称。

# sql - SSIS - 派生列

> ID：12286741
> 
> 赞同：4
> 
> 时间：2012-09-05T17:27:30.047
> 
> 标签：sql, sql-server, sql-server-2008, ssis, derived-column

我有一个小问题，我是新手，所以请帮助我。

在我的项目中，我有一个具有`zip4`和的文本文件`zip5`，我想连接两个邮政编码，但它有一个问题，在某些地方 zip4 是空白的（不是空的）所以当我使用派生列时

```
ISNULL(ZIP_4) ? ZIP_5 : (ZIP_5 + "-" + ZIP_4) 
```

表达式它将返回

> (zip5-)

where`zip4`是空白的，我只想要`zip5`没有`-`.

所以请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T17:39:17.380

尝试

```
ISNULL([ZIP_4]) || LEN([ZIP_4]) == 0  ? [ZIP_5] : ([ZIP_5] + "-" + [ZIP_4]) 
```

或者

```
ISNULL([ZIP_4]) || LEN(RTRIM(LTRIM([ZIP_4]))) == 0  ? [ZIP_5] : ([ZIP_5] + "-" + [ZIP_4]) 
```

第二个将在检查其长度之前修剪`zip_4`两侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:50:52.090

ANSI 定义的行为是任何涉及`null`保存 null 的显式测试 ( `is [not] null`) 的操作都会产生 null。不幸的是，SQL Server 的默认行为是非标准的。所以...

在执行独立查询之前，您需要确保为您的存储过程打开以下两个设置**或**在您的连接中打开：

*   `set ansi_nulls on`
*   `set concat_nulls on`

如果您在存储过程的主体中设置这些，则这些设置仅适用于该存储过程；如果您为连接设置它们（通过执行`set`语句），它们是在该连接上执行的所有查询之一（除了存储过程有自己的执行上下文）。

遗憾的是，您不能保证丢失的数据总是`null`而不是 nil 字符串 ( `''`) — 它使逻辑更简单。

无论如何，一旦你启用了适当的 `null 行为，就像

```
-- if missing data is always NULL, do this
select zip9 = t1.zip5 + coalesce( '-'+t1.zip4 , '' )
from someTable t1 
```

或者

```
-- if missing data might be nil ('') or NULL, do this
select zip9 = t1.zip5
            + coalesce(
                '-'
                + case coalesce(t1.zip4,'') when '' then null else t1.zip4 end ,
                ''
                )
from someTable t1 
```

应该做的伎俩。

否则，如果你不想启用正确的行为，你可以这样做。这也适用于标准的 NULL 行为。我只是不喜欢它，因为它涉及多个测试。但是[TMTOWTDI](http://www.oreillynet.com/onlamp/blog/2008/01/tmtowtdi_the_right_way_to_do_i.html)，正如他们所说。

```
select zip9 = t1.zip5
            + case
                when t1.zip4 = ''    then ''
                when t1.zip4 is null then ''
                else '-' + t1.zip4
              end
from someTable t1 
```

# yii - CJSON::encode 一个 JavaScript 函数

> ID：12286751
> 
> 赞同：3
> 
> 时间：2012-09-05T17:28:19.807
> 
> 标签：yii, json

我为我的 js 小部件使用 jQuery 小部件工厂（jQuery 小部件）。

```
$.widget('cool.someWidget', {
     options: {
         onSomething: null
     }
     // other js code
}); 
```

通常从您编写的 js 运行小部件

```
$(selector).someWidget({
    onSomething: function() { ..... }
}); 
```

在 Yii 中，我使用 CJSON::encode 编译所有初始化属性，包括 onSomething 事件。

```
echo CJSON::encode(array(
    'onSomething' => 'function() {....}',
)); 
```

但是由于转换（CJSON），它将 function() {...} 转换为字符串，因此在文档中写入以下内容

```
$(selector).someWidget({
    onSomething: "function() { .... }"
}); 
```

因为 onSomething 实际上是一个字符串，当我调用 this._trigger('onSomething') 它不会运行代码。

只有当我“生成”视图而不是 Ajax 请求（我在系统中以不同方式处理）时，我才会遇到这个问题。是否有一些“正常”的方式让 Yii 实际上在文档中写入不带引号的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-08T18:17:06.257

实际上有一种方法可以防止编码函数用引号包装函数声明，您应该在函数声明之前添加**js:**

```
CJavaScript::enocde(array(
   'prop'=>'value',
   'callback' => 'js:function(){}'
)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:50:44.843

恕我直言，这个问题的前提是有缺陷的，如果你完全回避这个问题会更好。

这里有什么问题？您不能将 JavaScript 代码作为 PHP 字符串提供。

你为什么要这样做？我认为不存在令人信服的理由。JavaScript 代码应该写成 JavaScript 代码；把它写成字符串更糟糕。

很可能您想将一堆可用的选项作为 PHP 变量传递给插件，并且兴奋地以相同的方式传递*所有*选项（包括那些是函数的选项）似乎是个好主意。

但是还有另一种方法，由[`$.extend`](http://api.jquery.com/jQuery.extend/):`CJSON::encode`用于所有标量（字符串、数字）并切换回纯 JavaScript 用于回调。

```
$(selector).someWidget($.extend(
    <?php echo CJSON::encode(array(/* no functions here, just scalars */));?>,
    { // and now, back in JavaScript-land, code follows:
        onSomething: function() { ..... }
    }
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T20:30:47.027

我编写了以下函数，它完全符合我的要求。不过，如果有一些原生的 Yii 解决方案，我真的很想知道它。

```
public function encodeOpts($data, $jsCode = null) {
    $rVal = CJSON::encode($data);

    if ($jsCode == null)
        return $rVal;

    foreach($jsCode as $key => $code) {
        $codeEntries[] = "\"{$key}\": {$code}";
    }

    return substr_replace($rVal, ', ' . implode(', ', $codeEntries), -1) . '}';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-22T17:21:10.983

我这样解决：

```
if ($this->user_options !== null && is_array($this->user_options))
{
    $reqs = CJavaScript::encode(
        array_merge(
            $this->user_options,
            array(
                // adding a default callback to options 
                'onLoad' => 'js: function() {$("#info").text("Hi")}'
                )
            )
        );
} 
```

注意：`js:`仅适用于`CJavaScript`不适用`CJSON`

# regex - Resharper：待办事项 -> 正则表达式

> ID：12286757
> 
> 赞同：1
> 
> 时间：2012-09-05T17:28:54.727
> 
> 标签：regex, resharper

什么是正确的正则**表达式**来创建新的待办事项模式以列出所有“调试”。来自我的解决方案的电话？

此表达式适用于 TODO 项：

```
(?<=\W|^)(?<TAG>TODO)(\W|$)(.*) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T00:12:46.380

我无法在 To-do Items\To-do Explorer 中使用这种类型的搜索，但我能够找到两个解决方案\解决方法：

1.  去除 。（我无法在正则表达式框中使用 \ 来转义任何字符）并且只搜索另一个单词。`System.Diagnostics.Debug.WriteLine`当我正在编写代码时，我总是使用它，所以我只是将它设置为查找`WriteLine`. 待办事项资源管理器允许您过滤要查看的项目，因此您可以忽略这些项目，直到您准备好清理它们。

2.  使用“自定义模式”功能搜索您感兴趣的文本。我目前正在`System.Diagnostics.Debug`名称空间中搜索 WriteLine 后面的任何内容，并带有一些参数。结果是`$debug$.WriteLine($args$);`（您可以为占位符命名任何您想要的名称）。我将此设置为错误级别，以便这些行在“解决方案中的错误”窗口中非常明显地显示解决方案范围分析。[此](http://blogs.jetbrains.com/dotnet/2010/08/highlighting-custom-patterns-with-resharper/)链接提供了有关如何使用此功能的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:35:58.193

到目前为止，我发现的唯一工作模式是：

```
(?<=\W|^)(?<TAG>Debug)(\W|$)(.*) 
```

这就是它在待办事项资源管理器中的样子：

![Resharper 的待办事项浏览器](../Images/13ee0d93c846d50369015e51600b92db.png)

# javascript - 使用 Photoshop 脚本保存 png 不起作用

> ID：12286761
> 
> 赞同：5
> 
> 时间：2012-09-05T17:29:25.007
> 
> 标签：javascript, photoshop-script

```
if (app.documents.length != 0) {
    var doc= app.activeDocument;

    for (i = 0; i < 5; i++) {
        var layer = doc.artLayers[0]
        layer.textItem.contents = i;

        var pngFile    = new File("/Users/dlokshin/temp/" + i + ".png");
        pngSaveOptions = new PNGSaveOptions();
        pngSaveOptions.interlaced = false;
        doc.saveAs(pngFile, pngSaveOptions, true, Extension.LOWERCASE);
    }
} 
```

每当我运行上面的脚本时，它不会将文件保存为 1.png、2.png、3.png 等，它会打开保存对话框并提示我输入文件名并单击保存。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T19:06:07.310

在为 Photoshop 编写脚本时，显然保存 PNG 与保存 JPEG 非常不同。以下适用于PNG：

```
if (app.documents.length != 0) {
    var doc= app.activeDocument;

    for (i = 0; i < 5; i++) {
        var layer = doc.artLayers[0]
        layer.textItem.contents = i;

        var opts, file;
        opts = new ExportOptionsSaveForWeb();
        opts.format = SaveDocumentType.PNG;
        opts.PNG8 = false;
        opts.quality = 100;

        pngFile = new File("/Users/dlokshin/temp/speed.png");
        app.activeDocument.exportDocument(pngFile, ExportType.SAVEFORWEB, opts);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-31T11:27:48.787

如果我为 Photoshop 提供如下保存路径，则保存`PNGSaveOptions`对我有用：

```
var doc = app.activeDocument;  
var filePath = activeDocument.fullName.path;  
var pngFile = File(filePath + "/" + "myname.png");
pngSaveOptions = new PNGSaveOptions();
doc.saveAs(pngFile, pngSaveOptions, true, Extension.LOWERCASE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-30T22:48:27.407

在开头输入这个

```
app.displayDialogs = DialogModes.NO; 
```

而且您将不再获得对话框。

# mysql - mysql AND 在查询中使用了两次不起作用

> ID：12286762
> 
> 赞同：0
> 
> 时间：2012-09-05T17:29:25.550
> 
> 标签：mysql

以下查询

```
SELECT * FROM workshops 
WHERE workshop_zipcode LIKE '75___' 
  OR workshop_zipcode LIKE '77___' 
  AND workshop_category = 14 
  AND active = 1 
  AND workshop_date >= NOW() 
ORDER BY workshop_date ASC 
```

不产生任何错误，并且实际工作，但有一个小问题：这部分

```
AND workshop_date >= NOW() 
```

不过滤任何东西，尝试用等号替换比较符号，并检索相同的列表。

前两个 AND 效果很好，但第三个不行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:31:58.100

你需要用括号括起来你的`OR`条件像这样：

```
SELECT * FROM workshops 
WHERE (workshop_zipcode LIKE '75___' 
OR workshop_zipcode LIKE '77___')
AND workshop_category = 14 
AND active = 1 
AND workshop_date >= NOW() 
ORDER BY workshop_date ASC 
```

没有括号，你本质上是这样称呼的：

```
SELECT * FROM workshops 
WHERE workshop_zipcode LIKE '75___' 
OR (workshop_zipcode LIKE '77___'
AND workshop_category = 14 
AND active = 1 
AND workshop_date >= NOW())
ORDER BY workshop_date ASC 
```

这是因为`AND`是之前计算的`OR`。请参阅此参考

[http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html](http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:32:14.317

这可能是运算符优先级的问题。

SQL 将首先评估您的所有 AND 语句，然后是 OR 语句；如果你在它们周围加上括号，你可能会得到你期望的结果：

```
SELECT * FROM workshops 
WHERE (workshop_zipcode LIKE '75___' 
OR workshop_zipcode LIKE '77___')
AND workshop_category = 14 
AND active = 1 
AND workshop_date >= NOW() 
ORDER BY workshop_date ASC 
```

这将检查车间邮政编码，然后检查您的其他标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:31:44.080

试试这个：

```
SELECT * FROM workshops 
WHERE ( workshop_zipcode LIKE '75___' 
OR workshop_zipcode LIKE '77___' )
AND workshop_category = 14 
AND active = 1 
AND workshop_date >= NOW() 
ORDER BY workshop_date ASC 
```

# android - 如何使用 com.android.camera.action.CROP 裁剪位图

> ID：12286764
> 
> 赞同：0
> 
> 时间：2012-09-05T17:29:32.343
> 
> 标签：android, image, bitmap, crop, android-image

我阅读了许多使用 com.android.camera.action.CROP 的示例，但他们都说要从画廊或相机中裁剪图像。任何人都可以告诉我如何使用 com.android.camera.CROP 裁剪位图？我尝试了很多方法，但仍然失败..我曾尝试将位图保存到文件，并从该文件创建一个 uri 变量，并将 uri 变量用作 com.android.camera.action.CROP 的数据......但是还是失败了……T​​T

这是我的代码

```
public class CobaSaveImageActivity extends Activity {
public ImageView tampilan;
public static Bitmap bmp;
public Uri mImageCaptureUri;
int i = 1;
File f;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tampilan = (ImageView)findViewById(R.id.imageView1);
    //bmp = BitmapFactory.decodeFile("/mnt/sdcard/bluetooth/enigma.bmp");
    bmp = BitmapFactory.decodeFile("/mnt/sdcard/enigma.jpg");
    tampilan.setImageBitmap(bmp);
}
public void save (View v){
    f = new File(Environment.getExternalStorageDirectory()+"/image/save"+i+".jpg");
    if (f.exists()) fileCheker(f);
    try {
        FileOutputStream fos = new FileOutputStream(f);
        BufferedOutputStream bit = new BufferedOutputStream(fos);           
        bmp.compress(Bitmap.CompressFormat.JPEG, 50, bit);
        bit.flush();
        bit.close();
        //bmp.recycle();
        sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse
                ("file://" + Environment.getExternalStorageDirectory())));
        Toast.makeText(this, "save complete to "+f.toString(), Toast.LENGTH_LONG).show();
        mImageCaptureUri = Uri.fromFile(f);
        doCrop();

     } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public void fileCheker(File in){
    i++;
    f = new File(Environment.getExternalStorageDirectory()+"/image/save"+i+".jpg");
    if (f.exists()) fileCheker(f);
}

public static Bitmap grayscale (Bitmap bmp){
    int height, width;
    int pixel, A, R, G, B;
    width = bmp.getWidth();
    height = bmp.getHeight();

    Bitmap bmpGray = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);

    for (int i =0;i<width;++i){
        for(int j=0;j<height;++j){
                pixel = bmp.getPixel(i,j);
                A = Color.alpha(pixel);
                R = Color.red(pixel);
                G = Color.green(pixel);
                B = Color.blue(pixel);
                R = G = B = (int)((R+G+B)/3);
                bmpGray.setPixel(i, j, Color.argb(A, R, G, B));
        }
    }
    return bmpGray;
}

public void gray(View v){
    new backtask().execute();
    //bmp = grayscale(bmp); tampilan.setImageBitmap(bmp);
    //
}

public class backtask extends AsyncTask<Void, Void, Void>{
    //Bitmap temp;
    ProgressDialog prog;
    @Override
    protected void onPreExecute(){
        super.onPreExecute();
        prog = ProgressDialog.show(CobaSaveImageActivity.this, "", "Progress...",true);
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        bmp = grayscale(bmp);
        return null;
    }

    @Override
    protected void onPostExecute(Void result){
        super.onPostExecute(result);    
        prog.dismiss();
        tampilan.setImageBitmap(bmp);
    }
}

private void doCrop() {
    Intent intent = new Intent("com.android.camera.action.CROP");
    intent.setType("image/*");

    intent.setData(mImageCaptureUri);
    //intent.putExtra("crop", true);
    intent.putExtra("outputX", 200);
    intent.putExtra("outputY", 200);
    intent.putExtra("aspectX", 1);
    intent.putExtra("aspectY", 1);
    intent.putExtra("scale", true);
    intent.putExtra("return-data", true);

    startActivityForResult(intent, 1);

}   

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data){
    if (resultCode != RESULT_OK) return;

    switch (requestCode){
    case 1 :
        Bundle extras = data.getExtras();
        if (extras != null){
            Bitmap crop = extras.getParcelable("data");
            tampilan.setImageBitmap(crop);
        }
    break;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:40:25.150

该 Intent 不是公共 Android API 的一部分，也不保证由任何设备制造商实施。在 Android 1.x 和早期的 2.x 设备上很常见，但后来就下降了。

您最好使用类似`Bitmap.createBitmap()`或`Bitmap.createScaledBitmap()`创建原始图像的调整大小或裁剪版本的方法。

# java - 使用 eclipse 导出可运行的 jar

> ID：12286769
> 
> 赞同：1
> 
> 时间：2012-09-05T17:29:59.370
> 
> 标签：java, eclipse, jar, export

我知道这已经被问了很多次了，但是这些答案并没有帮助

我有一个项目，它有两个包（核心和图像）和三个 prperties 文件。核心包含六个类和一个单独的 gif 图像。

我想使用 Eclipse 将我的项目导出到一个可运行的 jar 中，从而创建一个可以运行的单个 jar 文件，而不管它的位置如何。

我尝试使用 export->runnable jar 并尝试使用 fat jar exporter（它有效，但仅在文件夹中），但它不起作用。

谁能告诉我在 Eclipse 导出期间应该使用哪些设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:52:15.727

听起来您为 jar 选择了错误的主要方法。

您的应用程序是否有多个启动配置？

确保在导出时选择正确的启动配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:18:38.733

Ben Lawry 是正确的，我的属性文件没有被正确访问，并且由于它们是在 GUI 出现之前加载的，因此程序在启动时失败，没有显示任何内容......

# html - div 格式：垂直居中文本

> ID：12286771
> 
> 赞同：0
> 
> 时间：2012-09-05T17:30:07.293
> 
> 标签：html, css

这段代码生成了一个序列：块，文本，块，文本，块，文本，它看起来差不多，除了我不能让文本在 div 的中心垂直对齐，所以它看起来像它旁边对齐盒子的中心垂直。有什么建议吗？

```
 <div style="position: absolute; right: 0; top: 0; text-align: right;">
    <span style="display: inline-block; width: 15px; height: 15px; background: #2880BB"></span>                                     
    <span style="display: inline-block">Created   </span>                                            
    <span style="display: inline-block; width: 15px; height: 15px; background: #7FC31B"></span>
    <span style="margin-left: 5px;">Won   </span>
    <span style="display: inline-block; width: 15px; height: 15px; background: #FD2A2F"></span>
    <span style="margin-left: 5px;">Lost </span>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:47:49.657

替代解决方案：

```
<div style="position: absolute; right: 0; top: 0; text-align: right;">
    <span style="border-left: 15px solid #2880BB; padding-left: 5px;">Created</span>                                            

    <span style="border-left: 15px solid #7FC31B; margin-left: 5px; padding-left: 5px">Won</span>

    <span style="border-left: 15px solid #FD2A2F; margin-left: 5px; padding-left: 5px">Lost</span>
</div>​ 
```

**jsFiddle**：http: [//jsfiddle.net/w2wVc/1/](http://jsfiddle.net/w2wVc/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:49:50.677

我在你的 CSS 中使用了 position:relative 和 top:2px 。根据需要更改顶部像素值。

```
<div style="position: absolute; right: 0; top: 0; text-align: right;">
<span style="display: inline-block; position:relative; top:2px; width: 15px; height: 15px; background: #2880BB"></span>                                     
<span style="display: inline-block">Created   </span>                                            
<span style="display: inline-block; position:relative; top:2px; width: 15px; height: 15px; background: #7FC31B"></span>
<span style="margin-left: 5px;">Won   </span>
<span style="display: inline-block; position:relative; top:2px; width: 15px; height: 15px; background: #FD2A2F"></span>
<span style="margin-left: 5px;">Lost </span>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T03:28:46.553

我将 div 设置为`display:table`，将 spans 设置为`display:table-cell`，所以现在您可以`vertical-align`在表格模式下进行设置。

[http://jsfiddle.net/w2wVc/10/](http://jsfiddle.net/w2wVc/10/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T17:52:39.853

您可以尝试对文本使用`-ve`边距。***[这](http://jsfiddle.net/blasteralfred/JYfdm/)***是一个现场演示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T17:54:27.683

我的建议是把每一个`<span>`和它的盒子放在一个`div`然后明确的权利`div`

```
clear: right 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T17:33:14.807

`line-height`您可以使用垂直居中文本而不是高度。看看这段代码：

### HTML：

```
<div class="vertical">
    Hello
</div> 
```

### CSS：

```
.vertical {line-height: 50px; border: 1px solid #f00;} 
```

### 小提琴：http: [//jsfiddle.net/rv8pq/](http://jsfiddle.net/rv8pq/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-05T17:57:40.573

我已经用 CSS 尝试了很多次，但从来没有运气（有良好的跨浏览器支持）。我能够让它与一些 Jquery 一起工作。

[http://jsfiddle.net/EebmV/1/](http://jsfiddle.net/EebmV/1/)

你们可以去老学校，用一张桌子。表格单元格始终用于垂直对齐。

更新：

使用正确引用的 Jquery 库重新保存。

# c# - c#可枚举列表的快捷方式

> ID：12286775
> 
> 赞同：1
> 
> 时间：2012-09-05T17:30:21.680
> 
> 标签：c#

我有以下 C# 列表代码，

```
globalFaiths.AddAll( IEnumerable<Religion> religions ) 
```

我这样称呼它

```
globalFaiths.AddAll(new Religion[]{Bahai,Christian,Islam}); 
```

有没有更好的方法来发送到c#`Bahai,Christian,Islam`中的函数？`globalFaiths`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:31:33.003

您可以使用：

```
globalFaiths.AddAll(new[]{Bahai,Christian,Islam}); 
```

如果您将方法更改为使用[params 关键字](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)和数组，如下所示：

```
AddAll(params Religion[] religions) 
```

然后你可以直接调用它：

```
globalFaiths.AddAll(Bahai,Christian,Islam); 
```

但是，这需要更改集合类（`globalFaiths`的类型）的 API。如果可以选择更改这部分代码，您可能还需要考虑使用`AddRange`而不是`AddAll`，因为这将更接近框架（即：）[`List<T>.AddRange`](http://msdn.microsoft.com/en-us/library/z883w3dc.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T17:33:42.583

你可以像这样改变你的方法：

```
public void AddAll(params Religion[] religions) 
{
    // ...
} 
```

你可以这样使用它：

```
globalFaiths.AddAll(Bahai, Christian, Islam); 
```

顺便说一句：如果您要进行此更改，最好将方法命名为`Add`，因为也可以只通过一种宗教。

如果您无法更改代码，则另一种选择是扩展方法：

```
public static void Add(this Faiths faiths, params Religion[] religions)
{
    faiths.AddAll(religions);
} 
```

当然，如果您只在代码中调用该方法一次或两次，这可能有点矫枉过正。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T17:34:03.680

如果您可以更改`AddAll`方法，则可以执行以下操作：

```
AddAll(params Religion[] religions) 
```

而不是添加这样的项目：

```
globalFaiths.AddAll(Bahai,Christian,Islam); 
```

# soap - Soap 消息输入/输出元素计数

> ID：12286778
> 
> 赞同：0
> 
> 时间：2012-09-05T17:30:36.253
> 
> 标签：soap, wsdl

我一直在研究soap消息解析，是否有可能在wsdl文件中的操作可以有多个输入和输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:59:05.010

如果您在谈论输入和输出参数，那么是的，它可以是多个输入和输出。例如：

```
<xsd:element name="yourMethod">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="param1" type="xsd:string" minOccurs="1" maxOccurs="unbounded"/>
            <xsd:element name="param2" type="xsd:string" minOccurs="1" maxOccurs="1"/>
            <xsd:element name="param3" type="xsd:string" minOccurs="1" maxOccurs="1"/>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element>
<xsd:element name="yourMethodResponse">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="results" type="xsd:string" minOccurs="1" maxOccurs="unbounded"/>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element> 
```

您可以传递任意数量的参数。如果要返回值列表，则必须指定：`maxOccurs="unbounded"`。这将告诉您的堆栈生成具有返回类型的方法，在这种情况下是`String`值列表。

请注意，这只是`XSD`元素，您需要将它们声明为`WSDL`操作。

# javascript - 将 3D 点转换为 2D 点？

> ID：12286781
> 
> 赞同：2
> 
> 时间：2012-09-05T17:30:39.687
> 
> 标签：javascript, actionscript-3, flash, 3d

鉴于：

```
p1 = (-10,  2, -0.01)
p2 = (-20, -2, -0.03) 
```

我试图在 3D 矩形中表示这些点，其中我有 3D 矩形的宽度、高度和深度。这里，投影类型是正交的，它是笛卡尔坐标系

通过将 p1 和 p2 转换为 2D，我想画线。

知道怎么做吗？

这是图像

![在此处输入图像描述](../Images/6b1d905003707895cafc16ae6efb84fd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T19:09:26.043

您正在寻找的东西称为[正交投影](http://en.wikipedia.org/wiki/Orthographic_projection)。它比更一般的[透视投影](http://en.wikipedia.org/wiki/3D_projection)更容易理解，尽管您可能也想研究一下。

一种理解正交投影的直观方法：3d 坐标系中的每个轴（例如，您的示例中的 H-、W- 和 D- 轴）在屏幕坐标中都有一个 2d*方向矢量*`(x,y)`（即，您用于绘画）：

```
let:  H-axis direction vector = (hx, hy)
      W-axis direction vector = (wx, wy)
      D-axis direction vector = (dx, dy)

and:  origin screen position = (ox, oy) 
```

要了解这些方向向量的含义：如果您绘制 H 轴，并用 tic 标记它`(H=0, H=1, H=2, ...)`，那么 `hx`连续 tic 之间的 x 坐标`hy`差就是连续 tic 之间 y 坐标的差。因此，您可以通过使用其方向矢量来更改任何轴的方向和比例（独立于其他轴！）。

选择原点和方向向量后，您可以将屏幕坐标计算`(x, y)`为：

```
 x = H * hx + W * wx + D * dx + ox
      y = H * hy + W * wy + D * dy + oy 
```

这个公式的高度规则的乘法/加法结构基本上是[矩阵乘法](http://mathinsight.org/matrix_vector_multiplication)：

```
[ x y ]  =  [ H W D 1 ] * [ hx hy ]
                          [ wx wy ]
                          [ dx dy ]
                          [ ox oy ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:04:07.580

我使用了以下几点，因为它们更容易使用：

```
p1 = (50, 100, 0)
p2 = (200, 250, 50) 
```

要创建 3D 矩形（立方体），您需要执行以下几个步骤：

*   将这两个点转换为立方体的角点。例如，前右下角的前后坐标为`p1`，横坐标为`p2`。
*   使用投影公式进行正交投影。以最简单的形式，您可以使用它：

```
2D       3D
x   =   x + z
y   =   y - z 
```

*   组成立方体组成的线条，如底部前水平线等。

我不知道 ActionScript，但这里有一个可以帮助您的概念证明：http: [//jsfiddle.net/3NLVe/](http://jsfiddle.net/3NLVe/)。

# java - 使用 Google-api-java-client 发布到博客

> ID：12286783
> 
> 赞同：1
> 
> 时间：2012-09-05T17:30:43.710
> 
> 标签：java, api, blogger

我是一个初学者，目前正在学习“如何正确使用 api”：我从 code.google.com/p/google-api-java-client 导入了 .jar 文件，并通过“外部 jar 文件”将它们添加到eclipse中的构建路径。

[来自https://developers.google.com/blogger/docs/3.0/reference/posts/insert](https://developers.google.com/blogger/docs/3.0/reference/posts/insert)的代码片段不能独立工作，因为 OAuth2Native 和 BloggerScopes 无法识别，因为必须先对自己进行身份验证。有人可以帮我解决这个问题，就如何以最简单的方式验证自己的身份提供建议吗？

我已经找到了这个： [https ://code.google.com/p/google-api-java-client/wiki/OAuth2Draft10](https://code.google.com/p/google-api-java-client/wiki/OAuth2Draft10)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:12:58.230

[您可以在此处](https://code.google.com/p/google-api-java-client/source/browse/shared/shared-sample-cmdline/src/main/java/com/google/api/services/samples/shared/cmdline/oauth2/OAuth2Native.java?repo=samples&name=based-on-1.9)找到 Google 的示例`OAuth2Native`实现。

对于缺少的范围常量，只需手动构造一个带有 Blogger 范围的数组：

```
final static String[] Blogger = { "https://www.googleapis.com/auth/blogger" }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-30T14:59:57.357

截至 2015 年 9 月，没有办法为 Blogger 预授权某人，所以我相信访问 Blogger Api 的唯一方法是通过 Auth 2 Playground ( [https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/) ) 生成访问令牌，然后使用API 调用的令牌。

# asp.net - 未选择文件时如何显示错误

> ID：12286788
> 
> 赞同：0
> 
> 时间：2012-09-05T17:31:06.357
> 
> 标签：asp.net, image, error-handling

我们的经典 ASP 应用程序使用一个 .aspx 页面为每个客户端上传一张图片。我不熟悉 ASP.net，所以这个页面对我来说很难理解。

```
<html>
<head>
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <script language="VB" RunAt="Server">

        Sub Page_Load(Sender As Object, e As EventArgs)
            Span1.InnerHtml = "You may not upload a file larger than 250 Kilobytes. Your image must be in JPG format.<br />Please crop your image to 400 pixels high and 300 pixels wide, so that no distortion will occur when displayed.<br /><br />"
        End Sub

        Sub Upload_Click(Sender As Object, e As EventArgs)
            Dim DistributorID As Integer
            DistributorID = request.QueryString("distID")

            ' Display properties of the uploaded file

            'Let us recover only the file name from its fully qualified path at client 

            Dim strFileName As String
            strFileName = MyFile.PostedFile.FileName
            Dim c As String = CStr(DistributorID) & "." & split(System.IO.Path.GetFileName(strFileName), ".")(1) ' The file name is the distid + the extension

            'Let us Save uploaded file to server 
            If LCase(Split(System.IO.Path.GetFileName(strFileName), ".")(0)) = "" Then
                Span1.InnerHtml = "Please select a Photo.<br /><br />"
            End If

            If LCase(Split(System.IO.Path.GetFileName(strFileName), ".")(1)) <> "jpg" Then
                Span1.InnerHtml = "Invalid file format."
            Else

                If MyFile.PostedFile.ContentLength < 250000 Then
                    MyFile.PostedFile.SaveAs(ConfigurationSettings.AppSettings("DistImagePath") + c)
                    Span1.InnerHtml = "Your file imported sucessfully to the server.<br /><br />"
                Else
                    Span1.InnerHtml = "Your file is too large to import.<br /><br />"
                End If
            End If

        End Sub

    </script>
</head>
<body>      
    <span id="Span1" style="color:Red;" RunAt="Server" />                   
    <form method="Post" enctype="Multipart/Form-Data" RunAt="Server" class="stdform stdform2">
        &nbsp;&nbsp;Select New Photo: <br />
        &nbsp;<input id="MyFile" type="File" runat="Server" size="40" /><br /><br />            
        <span style="padding-left:25px;">
            <button type="Submit" value="Import" OnServerclick="Upload_Click" RunAt="Server">Upload New Photo</button>
        </span>
    </form>
</body> 
```

如果未选择任何文件并按下“上传新照片”按钮，我会收到“索引超出数组范围”。错误

如果他们没有选择一张照片，我该如何修复此页面以不尝试上传照片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:37:01.203

```
If MyFile.PostedFile.ContentLength>0 
  ..
Else
   Span1.InnerHtml = "You have not specified a file."
End If 
```

您可以在执行之前添加此代码（如果要执行上传文件）

```
If FileUpload1.HasFile Then

    ......

Else
      Span1.InnerHtml = "You have not specified a file."
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:37:40.757

您可以将所有内容包含在 IF 中，如下所示：

```
IF MyFile.PostedFile.ContentLength>0 Then 'User selected a file

   'All your code here
Else
    Span1.InnerHtml = "Your did not select a file.<br /><br />"
End IF 
```

完整代码：

```
 Sub Upload_Click(Sender As Object, e As EventArgs)
    IF MyFile.PostedFile.ContentLength>0  Then   
        Dim DistributorID As Integer
        DistributorID = request.QueryString("distID")

        ' Display properties of the uploaded file

        'Let us recover only the file name from its fully qualified path at client 

        Dim strFileName As String
        strFileName = MyFile.PostedFile.FileName
        Dim c As String = CStr(DistributorID) & "." & split(System.IO.Path.GetFileName(strFileName), ".")(1) ' The file name is the distid + the extension

        'Let us Save uploaded file to server 
        If LCase(Split(System.IO.Path.GetFileName(strFileName), ".")(0)) = "" Then
            Span1.InnerHtml = "Please select a Photo.<br /><br />"
        End If

        If LCase(Split(System.IO.Path.GetFileName(strFileName), ".")(1)) <> "jpg" Then
            Span1.InnerHtml = "Invalid file format."
        Else

            If MyFile.PostedFile.ContentLength < 250000 Then
                MyFile.PostedFile.SaveAs(ConfigurationSettings.AppSettings("DistImagePath") + c)
                Span1.InnerHtml = "Your file imported sucessfully to the server.<br /><br />"
            Else
                Span1.InnerHtml = "Your file is too large to import.<br /><br />"
            End If
        End If
     Else
            Span1.InnerHtml = "Your did not select a file.<br /><br />"
     End IF

    End Sub 
```

# tsql - 以下动态 sql 语句出错

> ID：12286789
> 
> 赞同：1
> 
> 时间：2012-09-05T17:31:10.533
> 
> 标签：tsql, sybase

我在以下动态 SQL 语句中看不到错误：

```
 SET @sql_statement =
    "INSERT INTO " +
      @archive_db_name + ".dbo._TEST_TB_ACTIVE_ORDERS 
    SELECT " +
      @reporting_db_name + ".dbo._TEST_TB_ACTIVE_ORDERS.* 
    FROM " +
      @reporting_db_name + ".dbo._TEST_TB_ACTIVE_ORDERS 
    WHERE " +
      @reporting_db_name + ".dbo._TEST_TB_ACTIVE_ORDERS.ORDER_ID 
    IN
      (
        select #tmp_table_order_ids.order_id
        from #tmp_table_order_ids
      )"
  EXEC(@sql_statement) 
```

错误是：

`Msg 102, Level 15, State 1: Server 'server_name', Line 5: Incorrect syntax near 'IN'`

但我在错误指定的位置看不到任何语法错误。有人可以请指出我为什么会收到此错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:34:28.147

尝试将双引号更改为单引号

```
 SET @sql_statement = 
    'INSERT INTO ' + 
      @archive_db_name + '.dbo._TEST_TB_ACTIVE_ORDERS  
    SELECT ' + 
      @reporting_db_name + '.dbo._TEST_TB_ACTIVE_ORDERS1.*  
    FROM ' + 
      @reporting_db_name + '.dbo._TEST_TB_ACTIVE_ORDERS1  
    WHERE ' + 
      @reporting_db_name + '.dbo._TEST_TB_ACTIVE_ORDERS1.ORDER_ID  
    IN 
      ( 
        select #tmp_table_order_ids.order_id 
        from #tmp_table_order_ids 
      )'
  EXEC(@sql_statement) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:03:07.377

没有错误：

```
declare @reporting_db_name varchar(50)
declare @archive_db_name varchar(50)

declare @sql_statement varchar(500)

select @reporting_db_name ='PHILARIS_RD'

select @archive_db_name ='PHILARIS_RD'
SET @sql_statement =
    "INSERT INTO " +
      @archive_db_name + ".dbo.A 
    SELECT " +
      @reporting_db_name + ".dbo.A.* 
    FROM " +
      @reporting_db_name + ".dbo.A 
    WHERE " +
      @reporting_db_name + ".dbo.A.ID 
    IN
      (
        select B.ID
        from B
      )"
 EXEC(@sql_statement) 
```

# css - 为什么这个 li:last-child 不起作用？

> ID：12286790
> 
> 赞同：-1
> 
> 时间：2012-09-05T17:31:12.507
> 
> 标签：css, wordpress, css-selectors

我的 CSS 规则：

```
#menu-right li:last-child a, #menu-left li:last-child a, #menu-bottom li:last-child a, {
    border: none;
} 
```

经过一些更改后停止工作，谁能告诉我为什么？测试网站是[删除]

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:34:40.567

你的规则有错误。之前不应该有`,`（逗号）`{`：

代替：

```
#menu-bottom li:last-child a, { 
```

和：

```
#menu-bottom li:last-child a { 
```

另请注意，`:last-child`选择器不适用于 Internet Explorer 6、7 和 8！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:32:57.583

替换`#menu-bottom li:last-child a, {`为`#menu-bottom li:last-child a {`。你的规则中有一个逗号，它打破了它。

# sql-server - SQL Server XML 加载

> ID：12286808
> 
> 赞同：0
> 
> 时间：2012-09-05T17:32:14.033
> 
> 标签：sql-server, xml

我有一个具有这种结构的 XML 文件

```
<Class>
    <ClassNumber>111</Flight_Number>
        <Student>
            <Student_ID>1</Student_ID>
            <Student_ID>2</Student_ID>
            <Student_ID>3</Student_ID>
        </Student>
    </ClassNumber>
</Class>
<Class>
    <ClassNumber>222</Flight_Number>
        <Student>
            <Student_ID>4</Student_ID>
            <Student_ID>5</Student_ID>
            <Student_ID>6</Student_ID>
        </Student>
    </ClassNumber>
</Class> 
```

我希望输出像

```
111 1
111 2
111 3
222 4
222 5
222 6 
```

请帮忙。我尝试了很长时间。

问候， 弗兰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:55:35.350

您的第一个问题是您显示的输入不是 XML： `</Flight_Number>`没有关闭任何打开的元素，并且您没有文档的根元素。

如果预期的输入类似于下面查询中的 $doc 变量，那么您想要的 XQuery 表达式将具有此处给出的结构：

```
let $doc := <Classes>
              <Class>
                <ClassNumber>111</ClassNumber>
                <Student>
                  <Student_ID>1</Student_ID>
                  <Student_ID>2</Student_ID>
                  <Student_ID>3</Student_ID>
                </Student>
              </Class>
              <Class>
                <ClassNumber>222</ClassNumber>
                <Student>
                  <Student_ID>4</Student_ID>
                  <Student_ID>5</Student_ID>
                  <Student_ID>6</Student_ID>
                </Student>
              </Class>
            </Classes>
for $s in $doc//Student_ID
return concat($s/../../ClassNumber, ' ', string($s), '&#xA;') 
```

在我用来测试这个的 XQuery 引擎中，这产生了预期的结果：

```
111 1
 111 2
 111 3
 222 4
 222 5
 222 6 
```

# c# - 使用 gridview 中的组合框

> ID：12286810
> 
> 赞同：1
> 
> 时间：2012-09-05T17:32:17.230
> 
> 标签：c#, .net, gridview, combobox

我在 Windows 窗体中将组合框与 rad 网格视图绑定时遇到问题。

我的问题是我有一个组合框，其中的项目为 ( `border styles-solid, double, groove, dotted, etc`); 在组合框的选定更改事件中，我应该更改网格视图元素的边框。我怎样才能做到这一点？。

我的代码是

```
comboBox.SelectedItem = radGridView.TableElement; 
```

我的代码不会产生错误，但是在运行时，我的网格视图边框样式没有改变。

同样在属性窗口中，对于事件设置，我已经为事件分配`comboBox_SelectionChanged`了选择更改事件。

# javascript - 放弃 javascript 命名空间和显示模块模式以支持智能感知

> ID：12286812
> 
> 赞同：1
> 
> 时间：2012-09-05T17:32:22.050
> 
> 标签：javascript, visual-studio-2010, design-patterns

在过去几天沮丧地试图将我的代码重构为最佳设计模式后，即显示模块模式，甚至只是满足于简单的命名空间，我得出的结论是，对我来说，优雅设计的优点破坏视觉工作室智能感知支持的缺点超过了模式。

因此，我采用以下解决方案：

以下列方式声明模块：

```
var namespaceprefix_someModule = new function(){

  function privatemethod(){}

  this.publicmethod = function(){};

} 
```

我愿意为拥有 5 个全局变量付出代价。作为回报，代码可以整齐地划分为不同文件上的功能模块，并具有强大的智能感知支持。

我想知道这里是否有人提出替代解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:54:00.163

`new`出于[这个原因](https://stackoverflow.com/a/12132454/1048572)，您真的不应该在运算符中使用该模式。相反，使用

```
var namespaceprefix_someModule = (function(){

    function privatemethod(){}

    return {
        publicmethod: function(){}
    };
})(); 
```

我不确定，但我认为 VS 可以识别这种模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T22:32:55.143

我最终决定的是设计代码，以便`.`在投入生产时可以轻松地将下划线替换为（点）。这样，我使用完整的 IntelliSense 进行开发，最后只得到一个全局变量。

在开发过程中，一个模块如下所示：

```
namespace_module1 = (function(){

   function private(){};

   function public(){};

   return {
     public: public
   }

})(); 
```

主模块通过将一个模块中的事件与另一个模块的公共功能链接起来充当中介角色。看起来像：

```
var namespace = (function(){

   var module1 = namespace_module1;
   var module2 = namespace_module2;

   module1.on('someevent', module2.publicfunction);

})(); 
```

# c# - 服务器重新启动时如何从 Instance Store 加载具有多个工作流定义的可运行实例

> ID：12286813
> 
> 赞同：2
> 
> 时间：2012-09-05T17:32:23.100
> 
> 标签：c#, .net, workflow-foundation-4, workflow-foundation

我正在评估 Workflow Foundation 4 或 4.5，想知道如何在服务器重启时从实例存储中加载具有多个工作流定义的可运行实例？</p>

这与论坛主题相同的问题：[http ://social.msdn.microsoft.com/Forums/en-US/wfprerelease/thread/b8d5ed34-054a-4e55-88e1-cd430ac42110?prof=required](http://social.msdn.microsoft.com/Forums/en-US/wfprerelease/thread/b8d5ed34-054a-4e55-88e1-cd430ac42110?prof=required)

“使用 InstanceStore.WaitForEvents 时，如果任何实例准备就绪，就会引发 HasRunnableWorkflowEvent 事件。而且，要调用 WorkflowApplication.LoadRunnableInstance()，我们需要创建一个新的 WorkflowApplication，它需要正确的工作流定义。拥有只有1个工作流实现。但是，如果有多个类型的工作流与同一个InstanceStore关联，并且因为HasRunnableWorkflowEvent没有任何关于将由LoadRunnableInstance()加载的就绪实例的其他信息，我们无法知道我们必须为新的 WorkflowApplication 创建什么类型的实例。”

但答案表明：

> 唯一的方法是在使用 WorkflowApplication 托管时为每个工作流定义提供一个单独的实例存储。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:23:58.047

您可以在一个商店中拥有多种工作流定义，但您需要跟踪用于启动工作流的工作流定义。这是你的问题。在我当前的项目中，我们使用以下方法解决了这个问题。

我们在 WorkflowApplication 类周围使用一个包装类，并使用它来启动工作流。在这个包装器中，在我们实际启动工作流之前，我们在数据库的表中写入一个 WorkflowInstance 记录，我们在其中存储即将运行的 eorkflow 的定义。除了一些其他信息之外，我们还有一个“persisted-id”列，它是由 WorkflowApplication 对象生成的 id。我们在启动工作流时不知道这个 id，所以我们将此列留空。当正在运行的工作流实例被持久化（可以通过处理 WorkflowApplication 对象上的事件来通知您），您可以检索由 WorkflowApplication 对象生成的 id。使用持久化 id 更新您的 WorkflowInstance，并且在服务器重新启动时重新加载工作流时，

希望这可以帮助。在这里工作就像一个魅力。

# javascript - 如何使用自定义消息参数发送 Facebook 应用请求/通知？

> ID：12286817
> 
> 赞同：2
> 
> 时间：2012-09-05T17:32:46.387
> 
> 标签：javascript, facebook, notifications, facebook-app-requests

我目前正在开发一个 Facebook 画布应用程序，在该应用程序中，我让用户邀请其他人使用该应用程序，这是非常标准的东西。为此，我使用 JavaScript SDK 的 FB.ui 方法。

```
FB.ui({
    method: 'apprequests',
    title: "Title",
    message: 'Custom Message',
    to: UserIDs
}); 
```

当前呈现此 UI 对话框。查看此图片（注意带有标准邀请消息的预览部分）：

![](../Images/3d4f7b1c007b9d023910ab706177475c.png)

受邀用户随后会收到标准消息：`USER_NAME sent you a APP_NAME request`。但是，与往常一样，我们希望用户在第一个通知中收到一条自定义消息（至少这是针对慈善捐赠活动的！）。我已通读 Facebook 文档，并且知道接收者未安装应用程序的用户对用户请求不会显示消息参数。尽管如此，我知道一个事实（因为我收到了它们！）某些应用程序能够向尚未安装它们的用户发送自定义消息。例如，这个 UI 请求对话框（注意预览区域中的自定义消息）：

![](../Images/db727ab734a509f22c22fa33516e0260.png)

我知道有其他发送通知的方法，例如 Notifications API，目前处于测试阶段。但他们似乎受到同样的限制。

如果有人可以帮助我弄清楚这些应用程序如何使用自定义消息生成这些请求，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:43:39.923

如这篇文章[http://facebook.stackoverflow.com/questions/6297853/facebook-requests-dialog-not-showing-message-to-recepient](http://facebook.stackoverflow.com/questions/6297853/facebook-requests-dialog-not-showing-message-to-recepient)中所述，您需要使用未记录的`new_style_message`布尔参数。

```
 FB.ui({method:'apprequests',
      title:'Custom window title',
      to: [1,2,3],
      message:'the custom application message',
      new_style_message:true
   }, function (response) {;}); 
```

并且正确的消息将与您的申请请求一起发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:12:59.750

由于所有滥用（垃圾邮件），您所询问的内容已被 Facebook 删除。

您仍然可以使用 message 参数。

脸书文档：

> 消息值显示在通知中，也可以在应用程序和游戏仪表板上查看。邀请（收件人未安装应用程序的请求）不显示此值。

例如：

```
function sendRequestToRecipients() {
        var user_ids = document.getElementsByName("user_ids")[0].value;
        FB.ui({method: 'apprequests',
          message: 'My Great Request',
          to: user_ids
        }, requestCallback);
      } 
```

更多信息：[https ://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:11:48.827

> 尽管如此，我知道一个事实（因为我收到了它们！）某些应用程序能够向尚未安装它们的用户发送自定义消息。

这些很可能是“大玩家”，他们已被 Facebook*列入白名单。*

# performance - 老一代填满一个节点

> ID：12286822
> 
> 赞同：0
> 
> 时间：2012-09-05T17:33:27.887
> 
> 标签：performance

在负载测试期间，我们在其中一个节点中观察到非常高的 Full GC。我们使用了 3 个 glassfish 节点。在其他 2 个节点 GC 使用是正常的，但是在节点 1 中，对象无法释放并且对象缓慢到达`XMX settings`。我已经验证了所有 3 个节点`JVM settings`。他们是一样的。验证的服务器日志和 3 个节点的负载相同。不知道为什么 1 个节点有这个 GC 问题而不是其他节点。

JVM设置：

```
-XX:+UnlockDiagnosticVMOptions -XX:ParallelGCThreads=8 -XX:MaxPermSize=512m -XX:+AggressiveOpts -XX:NewRatio=2 -XX:+LogVMOutput -XX:+UseParallelGC -XX:LogFile=/opt/glassfish/domains/xyz/logs/jvm.log -Xmx4096m -Xms4096m 
```

操作系统：红帽企业 Linux 服务器版本 5.6 (Tikanga)

```
JVM Version  
java version "1.6.0_24"  
Java(TM) SE Runtime Environment (build 1.6.0_24-b07)  
Java HotSpot(TM) 64-Bit Server VM (build 19.1-b02, mixed mode) 
```

这是 FULL GC 期间来自问题节点的 GC 示例。

```
 323233.103: [Full GC [PSYoungGen: 1305536K->1041065K(1351872K)] [PSOldGen: 2796223K->2796223K(2796224K)] 4101759K->3837289K(4148096K) [PSPermGen: 105778K->105778K(106048K)], 24.3236370 secs] [Times: user=24.32 sys=0.00, real=24.32 secs] 
323264.008: [Full GC [PSYoungGen: 1305536K->1106487K(1351872K)] [PSOldGen: 2796223K->2796223K(2796224K)] 4101759K->3902711K(4148096K) [PSPermGen: 105778K->105778K(106048K)], 22.2367020 secs] [Times: user=22.22 sys=0.01, real=22.24 secs] 
323291.647: [Full GC [PSYoungGen: 1305536K->1106550K(1351872K)] [PSOldGen: 2796223K->2796223K(2796224K)] 4101759K->3902774K(4148096K) [PSPermGen: 105778K->105778K(106048K)], 22.0651020 secs] [Times: user=22.06 sys=0.00, real=22.06 secs] 
323318.604: [Full GC [PSYoungGen: 1305536K->1106756K(1351872K)] [PSOldGen: 2796223K->2796223K(2796224K)] 4101759K->3902980K(4148096K) [PSPermGen: 105778K->105778K(106048K)], 22.4309650 secs] [Times: user=22.42 sys=0.00, real=22.43 secs] 
323345.717: [Full GC [PSYoungGen: 1305536K->1041019K(1351872K)] [PSOldGen: 2796223K->2796223K(2796224K)] 4101759K->3837243K(4148096K) [PSPermGen: 105778K->105778K(106048K)], 24.6671980 secs] [Times: user=24.65 sys=0.00, real=24.66 secs] 
323377.049: [Full GC [PSYoungGen: 1305536K->1102486K(1351872K)] [PSOldGen: 2796223K->2796223K(2796224K)] 4101759K->3898710K(4148096K) [PSPermGen: 105778K->105778K(106048K)], 22.5150360 secs] [Times: user=22.50 sys=0.00, real=22.51 secs] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:42:05.410

解决问题的一种方法是找出老一代中的对象是什么。这可以通过使用`jmap -histo`选项来完成。

运行`jps`notedown 进程 ID，然后调用`jmap -histo pid`. 您将获得每个类的对象计数。

它可能是缓存/会话复制或在导致问题的一个节点上运行的某些后台任务。找出正在填满内存的类将指出问题所在。

# ios - IOS可可错误3840

> ID：12286829
> 
> 赞同：1
> 
> 时间：2012-09-05T17:33:50.630
> 
> 标签：ios, afnetworking

我正在使用 AFNetworking 与本地服务器上的数据库进行通信。每当我单击注册或登录时，我都会收到错误消息“操作无法完成。（Cocoa 错误 3840）。我检查了 xcode 并没有返回错误。请提供任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:15:30.540

我想这个错误与正在发生的事情很接近，听起来你的服务器返回的数据以某种方式被破坏了。返回的数据也可能无效。

从错误的域可以看出，这是一个可可错误。您可以在[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html)找到错误列表，而您遇到的错误列表 3840 很可能是一个`NSPropertyListReadCorruptError`错误。

我会检查您返回的数据以了解发生了什么。

# javascript - 将一组平面记录（带有父键）转换为嵌套结构？

> ID：12286831
> 
> 赞同：3
> 
> 时间：2012-09-05T17:33:58.650
> 
> 标签：javascript, for-loop

我需要一个 JS 循环来将对象数组更改为 json 对象。这是对象的示例数组：

```
var employees= [
  {name:"Jeff",manager:null,title:"The Pres"},
  {name:"Amy",manager:"Aaron",title:"lll"},
  {name:"Chris",manager:"Aaron",title:"lll"},
  {name:"Dana",manager:"Aaron",title:"lll"},
  {name:"Joe",manager:"Aaron",title:"lll"},
  {name:"Mike",manager:"Aaron",title:"lll"},
  {name:"Aaron",manager:"Jeff",title:"lll"}
]; 
```

这是预期的 json 对象：

```
var json = {
    name:"Jeff",
    title:"The Pres",
    children:[{
        name:"Aaron",
        title:"some title",
        children[
            {name:"Amy",title:"some title",children[]},
            {name:"Chris",title:"some title",children:[]},
            {name:"Dana",title:"some title",children:[]},
            {name:"Joe",title:"some title",children:[]},
            {name:"Mike",title:"some title",children:[]
        }]
    }]
}; 
```

但它超出了我的范围。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:56:07.667

```
var employees= [
  {name:"Jeff",manager:null,title:"The Pres"},
  {name:"Amy",manager:"Aaron",title:"lll"},
  {name:"Chris",manager:"Aaron",title:"lll"},
  {name:"Dana",manager:"Aaron",title:"lll"},
  {name:"Joe",manager:"Aaron",title:"lll"},
  {name:"Mike",manager:"Aaron",title:"lll"},
  {name:"Aaron",manager:"Jeff",title:"lll"}
];

​var hash = {};
var root;

for (var i = 0; i < employees.length; i++) {
    var employee = employees[i];
    hash[employee.name] = {
        name:employee.name, manager:employee.manager, title:employee.title, children: []
    };
}
for (var i = 0; i < employees.length; i++) {
    var employee = hash[employees[i].name];
    var manager = hash[employee.manager];
    if (manager) {
        manager.children.push(employee);
    } else {
        root = employee;
    }
}
// root is the employee without a manager 
```

[提琴手](http://jsfiddle.net/CcdvW/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T21:17:48.273

我就是这样写的。请注意，这个的 Big-O 范围明显大于 Onchie 发布的答案（大致`O(n^2)`为 vs `O(n)`）。但是，对于较小的数据集，这是无关紧要的，我发现这种方法更容易遵循。

首先，我将有一个简单的功能，对于任何经理来说，它都可以告诉我谁是直接员工。（请注意，这*只是*一个标准`filter`函数，[ECMAScript 5](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)和[jQuery](http://api.jquery.com/jQuery.grep/)都提供了高阶函数，以使用更简洁、更成功的代码来完成此任务。）

```
function employeesForManager(employees, managerName) {
    var res = []
    for (var i = 0; i < employees.length; i++) {
        if (employees[i].manager == managerName) {
            res.push(employees[i])
        }
    }
    return res
} 
```

然后我将创建一个遍历树并构建每个级别的递归函数。（同样，这里的循环可以用一个简单的`map`函数代替。）

```
function giveShape(employees, manager) {
    var immediateEmployees = employeesForManager(employees, manager.name)
    var children = []
    for (var i = 0; i < immediateEmployees.length; i++) {
        children.push(giveShape(employees, immediateEmployees[i]))
    }
    // create a new object to avoid mutating original data
    return {
        name: manager.name,
        title: manager.title,
        children: children       
    }
} 
```

所有这一切都被称为：

```
var employees= [
    {name:"Jeff",manager:null,title:"The Pres"},
    {name:"Amy",manager:"Aaron",title:"lll"},
    {name:"Chris",manager:"Aaron",title:"lll"},
    {name:"Dana",manager:"Aaron",title:"lll"},
    {name:"Joe",manager:"Aaron",title:"lll"},
    {name:"Mike",manager:"Aaron",title:"lll"},
    {name:"Aaron",manager:"Jeff",title:"lll"}
]

topManager = employeesForManager(employees, null)[0]
result = giveShape(employees, topManager)  

console.log(result) 
```

[这是jsfiddle](http://jsfiddle.net/5jLwh/)

# java - 使用像.NET只读属性这样的Java最终变量可以吗？

> ID：12286833
> 
> 赞同：0
> 
> 时间：2012-09-05T17:34:09.290
> 
> 标签：java, .net

由于您无法设置最终变量的值（我假设），例如数组的长度。

```
Object[] items = new Object[10];

//Not allowed
Object.length = 3; 
```

可以在课堂上将其用作只读字段吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T17:35:09.480

这取决于您所说的“确定”是什么意思。您无法更改的原因`items.length`是这`length`是一个只读字段；创建数组后，它的大小是固定的。`items`无论是否声明为，您指定的“不允许”行都是无效的`final`。

重要的是要理解创建`items`变量`final`只是*意味着*您将无法更改变量的值以引用不同的数组。变量值是一个引用，*而不是*数组本身。您无法更改变量引用的数组，但您仍然可以更改数组的内容：

```
// Entirely valid...
items[0] = new Object(); 
```

如果您想要真正不可变的东西，则不能使用数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:49:00.263

**C#中的**readonly和 java 中的****final**或多或少是相同的（至少当它们应用于字段时）。每当您将字段标记为 final 时，编译器将不允许您在通过变量初始化或通过对象构造函数分配后修改其引用。**

 **但是，它不会阻止您修改所引用对象的内容，执行如下操作：

```
public class Person {
   public final String name;
   public final Address address;

   public Person(String name, Address address) {
       this.name = name;
       this.address = address;
   }
}

//Someplace else
Person peter = new Person("peter", new Address("Dolphin Cove 993", "Stamford", "CT");
peter.address.state = "CA" 
```

即使字段“地址”是最终的，它也是完全有效的。

此外，不要依赖**final**来构建任何类型的“安全性”或对某些值的强访问限制，因为它很容易通过反射被打破。（http://stackoverflow.com/questions/4516381/changeing-private-final-fields-via-reflection）

可能不需要所有这些澄清，但有人可能会发现它很有用

干杯，克劳迪奥

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:39:20.377

有些人喜欢将所有实例变量保持私有并使用“getter”，例如`getLength()`方法，但这确实是个人喜好。公共 final 字段没有任何*问题；*这只是风格。就个人而言，我有时将它们用于非常简单的课程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T17:39:21.470

当然，因此将其公开为只读的方法是将成员变量“items”保留在您的类中，并公开一个公共 getter 方法。就像是：

```
public int getNumItems() {
    return (items == null ? 0 : items.length); //includes null handling using ternary operator
} 
```**

# php - 如何在我的网站上显示不同用户的 wordpress 帖子

> ID：12286840
> 
> 赞同：0
> 
> 时间：2012-09-05T17:34:34.277
> 
> 标签：php, wordpress

我需要知道如何在我的网站[http://www.gymup.com](http://www.gymup.com)上显示其他作者的博客/帖子？我的网站没有插入/安装 wordpress（实际上也不想）。假设我在 www.gymup.com 上的一位教练在 wordpress 上有一个博客，他要求我在他们的个人资料部分展示他的博客/帖子。所以我需要知道是否有 wordpress API 可以完全满足这个要求？请建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:20:07.480

好！我得到了答案。我们可以通过将 /feed 放在 URL 中来获取所有博客的 RSS 假设我的 wordpress 博客 URL 是[http://avmishra.wordpress.com](http://avmishra.wordpress.com)所以我们可以通过[http://avmishra.wordpress.com/feed](http://avmishra.wordpress.com/feed)获取 RSS分配了可以读取 RSS 并将其隐藏在数组中的库。

谢谢。

# c++ - 在 C++ 中实现“绳索”数据结构时遇到问题

> ID：12286841
> 
> 赞同：3
> 
> 时间：2012-09-05T17:34:37.963
> 
> 标签：c++, data-structures, ropes

我正在尝试制作一个[绳索](http://en.wikipedia.org/wiki/Rope_%28computer_science%29)数据结构。它是一种二叉树，即递归数据结构。

绳索的目的是分裂和连接应该*很快*，这意味着*您避免复制整个绳索*。
因此，例如，用户应该能够`rope1 + rope2`在〜对数时间内说出并期待结果。

但是，这会带来一个问题：
如果修改了一条绳索，它的父项也会间接修改。
因为我的目标是直接`rope`替换`string`，这是不可接受的。

我对此的解决方案是：每当对 a 进行*任何*更改时`rope`，我都会创建一个*新*节点，稍作更改，而旧节点保持不变。

从理论上讲，我认为这会很好。

但是，在实践中，它涉及（几乎？）字符串的*每次修改的堆分配。*
即使是一个字符的更改也会导致一个新的堆对象，这不仅本身很慢，而且还会显着降低内存局部性，对性能产生非常负面的影响。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:44:34.010

传统的方法是写时复制：为此，您需要重新计算每个分配的节点。

如果修改后的节点的引用计数为 1（没有其他人引用它），则不需要复制它。

这样做的实际问题是有*用地将*变异与非变异操作分开：

```
 char& rope::operator[] (std::string::pos) 
```

*可能会*改变引用的字符，但没有简单的方法可以强制选择 const 重载，而*实际上它不会*。这意味着您要么必须假设会发生突变，并可能触发不必要的复制，要么返回一些重载 char 转换和分配的代理。

这种方法被尝试用于 iirc 的早期实现`std::string`（其中字符串相当于单节点绳索），但失宠了；部分原因是变异问题，部分原因是如果您不得不担心多线程，COW 和所需的引用计数会变得越来越昂贵。

* * *

正如您所说，如果您的节点包含两种独立类型的状态，则绳索还有一个问题：它自己的字符串和对其子节点的引用（因为这会导致 refcount/child 引用突变传播到树上）。

相反，如果字符仅存储在叶节点上，并且您对非叶节点进行了*完整*复制（因此每个绳索都有自己的“目录结构”），您仍然避免复制字符，并且引用的共享状态很多更简单。

这会得到你想要的对数时间连接吗？也许不是：

*   您必须复制所有非叶子节点（并添加一个新根），这些节点的数量是记录叶子的数量
*   您还必须增加叶引用计数，这是线性的

它*看起来*更接近线性时间还是对数时间取决于增加引用计数与复制目录树的相对成本。

但是，如果没有这个，您将获得快速连接，但如果必须将 COW 操作向上传播到树上，任意字符访问可能（不可预测地）退化为对数时间。

我想，如果它适合您的用例，您可以实现移动连接：这可能会给出恒定时间的加法，并且您仍然可以避免额外的 COW 复杂性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T17:37:45.757

> 但是，在实践中，它涉及（几乎？）字符串的每次修改的堆分配。

如果你想避免频繁的堆分配性能问题，那么我建议为你的类使用一个内存池来分配一块内存，并且只需要在它已满时从操作系统请求新的分配，这应该很少发生. 然后，您可以优化对内存池的访问以分配小块数据类型`char`，例如 等。

Andrei Alexandrescu 在他的“Modern C++ Design”一书中有一个小块内存分配器的很好的例子。

# php - 如何将 CSV 字符串读入数组

> ID：12286844
> 
> 赞同：-2
> 
> 时间：2012-09-05T17:34:53.263
> 
> 标签：php, arrays, variables

> **可能重复：**
> [如何在 PHP 中将逗号分隔的字符串拆分为数组？](https://stackoverflow.com/questions/1125730/how-can-i-split-a-comma-delimited-string-into-an-array-in-php)
> [从整个字符串中提取标签（单词）](https://stackoverflow.com/questions/11358871/extract-tags-words-from-whole-string)

我正在尝试将长变量读入数组。

变量`$x = "text1", "text2", "text3",`等...

```
$x = '"text1", "text2", "text3"'; 
```

我是否只是将其调用到我的数组中，例如：

```
array($x)? 
```

这似乎不起作用

我希望最终产品是：

```
array("text1", "text2", "text3") 
```

我究竟做错了什么？谢谢！

编辑：

好的，一些细节：

我正在尝试用许多动态读取的日期替换以下数组中的日期字段：

```
$myCalendar->setSpecificDate(array("2012-09-09", "2012-09-10"), 1, ''); 
```

我在变量 $x 中有动态读取的日期。当我回显 $x 时，我得到格式为“2012-09-09”、“2012-09-10”、“2012-09-09”、“2012-09-10”、“2012-09-09”的内容”、“2012-09-10”等

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:41:13.637

如果您的变量是一个字符串，如：

```
$x = '"text1", "text2", "text3"' 
```

[您可以使用str_getcsv](http://php.net/str_getcsv)将其转换为数组，如下所示：

```
$x = '"text1", "text2", "text3"';
$yourArray = str_getcsv($x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T17:38:54.623

如果您的输入字符串是`'"text1", "text2", "text3"'`

您可以使用以下代码获取包含三个字符串的数组

```
print_r( 
   explode( ",", preg_replace('/[" ]*/', "", '"text1", "text2", "text3"'))
);
// Outputs Array ( [0] => text1 [1] => text2 [2] => text3 ) 
```

这假设您的字符串中没有空格，如果允许空格，您将不得不使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:41:11.420

炸开它。字符串变成基于分隔符的数组。

```
$x = "text1,text2,text3";
$new_array = explode(',', $x); 
```

这变成：

```
Array
(
    [0] => text1
    [1] => text2
    [2] => text3
) 
```

# linux - Apache Pig：使用 hadoop fs -text 加载显示良好的文件

> ID：12286845
> 
> 赞同：7
> 
> 时间：2012-09-05T17:34:55.813
> 
> 标签：linux, hadoop, apache-pig, cloudera

我有名为 part-r-000[0-9][0-9] 并且包含制表符分隔字段的文件。我可以使用查看它们，`hadoop fs -text part-r-00000`但无法使用 pig 加载它们。

我试过的：

```
x = load 'part-r-00000';
dump x;
x = load 'part-r-00000' using TextLoader();
dump x; 
```

但这只会给我垃圾。如何使用 pig 查看文件？

可能相关的是我的 hdfs 目前仍在使用 CDH-2。此外，如果我将文件下载到本地并运行`file part-r-00000`它说`part-r-00000: data`，我不知道如何在本地解压缩。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T02:20:43.960

根据[HDFS 文档](http://hadoop.apache.org/common/docs/r0.17.2/hdfs_shell.html#text)，`hadoop fs -text <file>`可用于“zip 和 TextRecordInputStream”数据，因此您的数据可能是其中一种格式。

如果文件被压缩了，通常 Hadoop 会在输出到 HDFS 时添加扩展名，但如果缺少这个，您可以尝试在本地解压缩/ungzipping/unbzip2ing/etc 进行测试。看起来 Pig 应该自动解压缩，但可能需要存在文件扩展名（例如 part-r-00000.zip）——[更多信息](https://stackoverflow.com/questions/9896584/is-compression-decompression-of-gzip-data-transparent-in-hadoop-pig)。

我不太确定 TextRecordInputStream .. 听起来它只是 Pig 的默认方法，但我可能是错的。当我快速谷歌时，我没有看到任何关于通过 Pig 加载这些数据的内容。

**更新：** 由于您发现它是一个序列文件，因此您可以使用 PiggyBank 加载它：

```
-- using Cloudera directory structure:
REGISTER /usr/lib/pig/contrib/piggybank/java/piggybank.jar
--REGISTER /home/hadoop/lib/pig/piggybank.jar
DEFINE SequenceFileLoader org.apache.pig.piggybank.storage.SequenceFileLoader();

-- Sample job: grab counts of tweets by day
A = LOAD 'mydir/part-r-000{00..99}' # not sure if pig likes the {00..99} syntax, but worth a shot 
    USING SequenceFileLoader AS (key:long, val:long, etc.); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T14:06:24.003

如果您想操作（读/写）序列文件，`Pig`那么您也可以尝试使用 Twitter 的[Elephant-Bird](https://github.com/kevinweil/elephant-bird)。

您可以在[此处](https://github.com/kevinweil/elephant-bird/blob/master/Readme.md#hadoop-sequencefiles-and-pig)找到如何读取/写入它们的示例。

如果您在序列文件中使用自定义 Writables，那么您可以通过扩展[AbstractWritableConverter](https://github.com/kevinweil/elephant-bird/blob/master/pig/src/main/java/com/twitter/elephantbird/pig/util/AbstractWritableConverter.java)来实现自定义转换器。

请注意，这`Elephant-Bird`需要在您的机器上安装[Thrift 。](http://thrift.apache.org/)在构建它之前，请确保它使用您拥有的正确 Thrift 版本，并在其[pom.xml](https://github.com/kevinweil/elephant-bird/blob/master/pom.xml)中提供 Thrift 可执行文件的正确路径：

```
<plugin>
  <groupId>org.apache.thrift.tools</groupId>
  <artifactId>maven-thrift-plugin</artifactId>
  <version>0.1.10</version>
  <configuration>
    <thriftExecutable>/path_to_thrift/thrift</thriftExecutable>
  </configuration>
</plugin> 
```

# android - 无法使用 SherlockFragmentActivity 获取应用程序上下文

> ID：12286848
> 
> 赞同：1
> 
> 时间：2012-09-05T17:35:09.073
> 
> 标签：android, sqlite, actionbarsherlock

我的问题类似于这个问题[Can't make static reference to non-static method ( Android getApplicationContext() )](https://stackoverflow.com/questions/10854930/cant-make-static-reference-to-non-static-method-android-getapplicationcontext) 我需要获取 SherlockFragmentActivity 的上下文才能访问数据库类。我尝试了上面这个链接中的解决方案，但没有奏效。

问题 1：如何在下面的代码中获取上下文。

问题 2：我收到一个错误，迫使我对应用程序上下文变量使用“静态”而不是公共。我知道 static 是一个不变的变量。但是，每次单击选项卡时，此变量都会更改。此外，数据库类不需要“静态”变量。我很困惑为什么我需要一个静态变量。

我的 SherlockFragmentActivity：

```
public class FragmentTabs extends SherlockFragmentActivity {
    TabHost mTabHost;
    TabManager mTabManager;
    static FragmentTabs appState;
 TabSwitchIdDatabase tsid = new TabSwitchIdDatabase(this);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        setTheme(SampleList.THEME); // Used for theme switching in samples
        super.onCreate(savedInstanceState);

        appState = ((FragmentTabs)getApplicationContext());

        //.... more code
}
 public static class TabManager implements TabHost.OnTabChangeListener {..// see code snipit below....}

} 
```

我需要在哪里放置上下文

```
 public static class TabManager implements TabHost.OnTabChangeListener {

//... more code

static class DummyTabFactory implements TabHost.TabContentFactory {

//... more code

@Override
        public void onTabChanged(String tabId) {
            TabInfo newTab = mTabs.get(tabId);
            System.out.println(tabId);

            tsid.open();// broken , scoping problem
            Boolean x =tsid.tabExists(0);
            String tabIDfromDatabase = tsid.getTab(0);// broken , scoping problem
            tsid.close();// broken , scoping problem
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T23:13:55.027

您确定问题与 SherlockFragmentActivity 本身有关吗？

您是否检查过（例如）您在文件中指定`android:name=".MyApplication"`的`AndroidManifest.xml`内容？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T23:46:04.343

你有你的构造函数`DummyTabFactory`吗？

*   将上下文作为参数传递给它。
*   将传递的上下文分配给局部变量。

所以你的代码应该是这样的：

```
public class FragmentTabs extends SherlockFragmentActivity {
    DummyTabFactory mDummyTabFactory = new DummyTabFactory(getApplicationContext());

    static class DummyTabFactory implements TabHost.TabContentFactory {
        private Context mContext;

        public DummyTabFactory(Context context) {
            super(fm);
            mContext = context;
        }
    }
} 
```

现在您可以使用它`mContext`来访问您的应用程序的资源。

# sql - Xcode iOS 手机目录应用。核心数据、sql lite 或

> ID：12286849
> 
> 赞同：0
> 
> 时间：2012-09-05T17:35:15.493
> 
> 标签：sql, ios, xcode, core-data

作为我正在尝试创建的应用程序的一部分，我正在寻找数据存储解决方案。但是，我发现了许多解决方案，但我不能直接应用于我所在的职位。

基本上，我想在我的应用程序中显示我组织的员工目录。大约100人左右。我想要通用属性，例如姓名、电子邮件、办公室编号等。

但是，我的目标是不要以这里的员工的静态表示结束！（人来人往，换办公室等）

我正在寻找最好的方法（如果可能的话）来维护一个我可以管理的小型数据库，如果可能这里有人要更改某些内容，我可以进行更改，并且更改将相应地反映出来。

请帮忙！我尝试提交我的第一个应用程序但被拒绝，因为我依靠 webview 来完成这项任务。这是一个实习机会，也是我第一次真正的发展机会。任何帮助将不胜感激。

谢谢！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:03:26.710

iPhone 目录应用程序可用于以您想要的任何格式（xml、json 或专有格式）存储数据，因为您所做的只是保存文件。但是，如果您选择使用 iPhone 应用程序目录来存储数据，则必须编写代码来读取文件（非常简单）并解析信息（不是那么简单，因为难度会根据信息的复杂性进行扩展）。

SQLite 是一种存储结构化数据的工具，为您提供了一组访问和使用信息的工具。您不需要解析信息，因为 SQLite 通过使用事务 sql 查询为您完成。

到目前为止，因为你有一个个人列表，而且这些人与办公室有关，我认为你应该使用 SQLite。

Code Data 是一个对象图管理，它是一个为您提供更多数据操作选项的工具，如果您拥有大量数据和非常复杂的数据模型，它可以让您的生活变得非常轻松。我认为您不需要针对特定​​问题使用它，但我认为您应该在某个时候学习它。

**更新 1**

您的应用程序将具有以下内容：

核心数据库（sql server、oracle、my sql 等）将保存您的个人信息（您的云数据库）。

网页（php、asp.net 等）将以 json 或 xml 格式（您的 api）显示核心数据库信息。

一个 iphone 应用程序将从网页下载信息并将其存储在本地 SQLite 中。（您必须决定何时更新本地 sql lite，例如何时打开、每周一次、每月一次、每天两次等）（您的本地存储方法）。

在应用程序中显示本地 SQLite 个人信息。

# google-app-engine - Jsoup - 如何处理有空格的 URL

> ID：12286850
> 
> 赞同：0
> 
> 时间：2012-09-05T17:35:22.813
> 
> 标签：google-app-engine, jsoup

我正在使用 Jsoup 连接到其中包含空格的 URL，但不断收到 URI 语法错误。关于如何处理这个问题的任何想法？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:47:41.190

您应该对 URL 进行百分比编码。空格表示为 %20。

此外，某些字符/符号在 URL 中用作分隔符（&、?、= 等），因此除非它们用作分隔符，否则它们不能放在 URL 中。例如，如果您想传递字符串“1 &1”，我必须将其编码为“1%20%261”，否则将无法正确解析。

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Percent-encoding 。](http://en.wikipedia.org/wiki/Percent-encoding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:46:18.673

URL 不能有空格，根据 RFC1738（第 2.2 节）： [http ://www.ietf.org/rfc/rfc1738.txt](http://www.ietf.org/rfc/rfc1738.txt)

有关如何处理此问题的其他背景信息，请参阅： [http ://www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)

特别是，可以在以下位置找到一种编码 URL 的机制： [Java 中的 HTTP URL 地址编码](https://stackoverflow.com/questions/724043/http-url-address-encoding-in-java)

# asp.net-mvc - 将 MVC 4 RC 升级到 MVC 4

> ID：12286854
> 
> 赞同：2
> 
> 时间：2012-09-05T17:35:40.427
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

如您所知，[ASP.NET MVC 4 终于在几周前发布了。](http://www.asp.net/whitepapers/mvc4-release-notes)应用程序完成后，我已经使用 MVC 4 RC 工作了几个月。我想知道是否必须将其升级到其发布版本。更好的问题是：

1.  通过升级，我必须对 web api 和服务器代码进行多少更改？

2.  如何升级到发布版本？据我所知，有几种方法可以做到这一点，单个独立安装程序、Web 安装程序和 nuget。是对的吗？从 RC 升级的最佳方式是什么？我尝试了 Web 安装程序，但我只能找到带有语言包的 ASP.NET MVC 4 工具更新。

任何建议或提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:12:26.700

我主要使用 Web APi，但我发现使用 nuget 单独更新依赖项没有问题。

更改：WriteToStreamAsync 方法的自定义格式化程序的签名更改

```
WriteToStreamAsync(Type type, object value, Stream stream, HttpContentHeaders contentHeaders, TransportContext transportContext) 
```

到：

```
WriteToStreamAsync(Type type, object value, Stream stream, HttpContent content, TransportContext transportContext) 
```

过滤器也添加到 HttpFilterCollection 而不是 GlobablFilterCollection。

我想这就是我遇到的全部。

我更新的软件包列表：

```
<package id="Microsoft.AspNet.Mvc" version="4.0.20710.0" targetFramework="net40" />
<package id="Microsoft.AspNet.Razor" version="2.0.20710.0" targetFramework="net40" />
<package id="Microsoft.AspNet.Web.Optimization" version="1.0.0-beta3" />
<package id="Microsoft.AspNet.WebApi" version="4.0.20710.0" targetFramework="net40" />
<package id="Microsoft.AspNet.WebApi.Client" version="4.0.20710.0" targetFramework="net40" />
<package id="Microsoft.AspNet.WebApi.Core" version="4.0.20710.0" targetFramework="net40" />
<package id="Microsoft.AspNet.WebApi.WebHost" version="4.0.20710.0" targetFramework="net40" />
<package id="Microsoft.AspNet.WebPages" version="2.0.20710.0" targetFramework="net40" />
<package id="Microsoft.Net.Http" version="2.0.20710.0" targetFramework="net40" /> 
```

您可以在 nuget 中搜索时使用上面的包 ID

# pdo - Varchar 取零字段为空

> ID：12286855
> 
> 赞同：1
> 
> 时间：2012-09-05T17:35:44.407
> 
> 标签：pdo

我有一个包含一系列代码的表，其中有一个名为“numerousuarios”的字段，其默认值为“0”

这里的代码：

```
$statement = " SELECT numerousuarios FROM codigos WHERE codigos = :codigo";
$sth = $db ->prepare($statement);
$sth -> execute(array(':codigo'=>$codigo));
$result = $sth->fetch();
$mivariable = $result[numerousuarios];
if(!empty($mivariable)){
  if($mivariable>=5){
    echo "the code is full users"; 
  }
   else{
     // Do something...
   }
}
else{
  echo "el codigo no existe";
} 
```

if(empty($myvar)) 是查看数据库中是否有该记录。

问题是，如果值为“0”，我将其视为一个空字段。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:44:15.537

您说结果默认为“0”。只需检查返回值**不等于0** :)

```
$statement = " SELECT numerousuarios FROM codigos WHERE codigos = :codigo";
$sth = $db ->prepare($statement);
$sth -> execute(array(':codigo'=>$codigo));
$result = $sth->fetch();
$mivariable = $result[numerousuarios];
if($mivariable !=0){
  if($mivariable>=5){
    echo "the code is full users"; 
  }
   else{
     // Do something...
   }
}
else{
  echo "el codigo no existe";
} 
```

:)

# visual-studio-2010 - Web Deploy 适用于 VS2010；VS2012 失败

> ID：12286860
> 
> 赞同：2
> 
> 时间：2012-09-05T17:35:53.937
> 
> 标签：visual-studio-2010, visual-studio-2012, webdeploy, microsoft-web-deploy

使用 VS 2010 Web Deploy 可以正常工作并且没有问题。同时，VS 2012的Web Deploy失败，说明服务器没有响应，提示[这个链接](http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_COULD_NOT_CONNECT_TO_REMOTESVC)。

这说明了以下条件，所有这些条件都得到满足。

1.  你可以ping远程机器
2.  在远程服务器上启动 msdepsvc 或 wmsvc 服务。
3.  您的防火墙没有阻止目标端口的传入连接。如果您使用默认安装，那么它将是 80 for`msdepsvc`和 8172 for`wmsvc`

Web Deploy 仍然适用于 VS2010。

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:00:15.980

显然是不先阅读所有文档的示例。但是，对于那些希望了解这里的一些变化的人来说，这是我发现的。

1.  VS 2012 使用 Web 部署代理服务而不是 Web 管理服务
2.  本地部署是“http://Your Server/msdeployagentservice”而不是：8172/msdeploy.axd

有关众多选项的完整说明，请访问[此处！](http://msdn.microsoft.com/en-us/library/dd465337.aspx)

希望这对其他人有帮助。

# npapi - 将函数作为函数 javascript 中的参数传递给 NPAPI

> ID：12286862
> 
> 赞同：1
> 
> 时间：2012-09-05T17:36:11.983
> 
> 标签：npapi

在 javascript 对象上，我正在调用 obj.requestFileSystem(LOCAL,5*1024*1024) 。此方法在 PlainNAPI 插件中实现，现在我必须将一个成功回调传递给此函数，如下所示......

obj.requestFileSystem(LOCAL,5*1024*1024,initFS); // initFS 是 javascript 中的一个函数，它是成功回调的参数。在 NPAPI 中，当 requestFileSystem 完成时它是一个对象，然后应该调用 javascript 中的 initFS 函数。如何从 NPAPI 插件返回到 javascript 并执行 initFS 函数。

```
function initFS(fs) {
alert('Inside the initFS');
alert(fs.root.getFullPath);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:53:19.617

请不要告诉我你实际上在用这个插件做什么，因为它听起来类似于让人们从网络浏览器访问很容易被其他人滥用的东西。

基本上，当一个函数到达 NPRuntime 中的函数时，它只是一个 NPObject；要调用该函数，您只需对该 NPObject 执行 NPN_InvokeDefault。

请注意，您必须在主线程上才能调用几乎所有 NPN_ 函数。

* * *

编辑：因此，如果您必须从不同的线程进行回调，那么您最简单的解决方案是使用[NPN_PluginThreadAsyncCall](https://developer.mozilla.org/en-US/docs/NPN_PluginThreadAsyncCall)；基本上，您创建一个对象来保存您需要的数据并使用该指针作为 void* 参数调用 PluginThreadAsyncCall，它将传递给您指定的函数。

确保 A) 指针仍然有效，并且 B) 您的函数能够在运行后释放该内存。从回调函数中，您可以安全地调用 NPN_InvokeDefault。

并不是说[NPN_PluginThreadAsyncCall](https://developer.mozilla.org/en-US/docs/NPN_PluginThreadAsyncCall)似乎不再适用于 Safari 5.1。如果您需要这种支持，或者如果我解释的内容没有意义，您可能需要考虑使用[FireBreath](http://www.firebreath.org)来构建您的插件；它为您完成所有这些工作。

# .net - 在 System.Diagnostics.PerformanceData 中使用新类有哪些优势？

> ID：12286864
> 
> 赞同：3
> 
> 时间：2012-09-05T17:36:19.837
> 
> 标签：.net, performancecounter

在 .NET 3.5 中，命名空间中引入了一组用于与性能计数器交互的新类`System.Diagnostics.PerformanceData`。根据微软的文档，“这个命名空间中的类支持 Windows Vista 中引入的性能计数器的新架构（2.0 版）。” [此处](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancedata.aspx)描述了这组新的类。

在我看来，这些类的使用要复杂得多；它们要求开发人员编写 XML 清单文件、编译它、生成资源文件并使用该`LodCtr`工具注册计数器。我还没有成功地找到可以简化这一点的工具或流程。

我的问题是，使用这套新类有什么好处？对于这项额外​​的工作，有什么好处？我可能想要进行这项工作的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-06T07:36:02.987

主要优点是能够创建聚合计数器，这在多进程应用程序中很有用。这些计数器可以将来自多个进程实例的数据聚合为单个值。

你是对的——创建这些计数器比以前困难得多。可能有帮助的是 DevUtils ETW IMBA 包，它可以减轻一点痛苦。看看这里： http: [//www.codeproject.com/Tips/897687/To-Help-Create-Provider-Performance-Counters-v](http://www.codeproject.com/Tips/897687/To-Help-Create-Provider-Performance-Counters-v)

# apache - Mod_rewrite：仅重写 1 个 URL

> ID：12286865
> 
> 赞同：0
> 
> 时间：2012-09-05T17:36:28.160
> 
> 标签：apache, mod-rewrite, rewrite

我正在使用 mod_rewrite 进行转换：

`www.example.com/view.php?ID=1234`

进入

`www.example.com/1234`

使用以下规则：

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule ^([A-Za-z0-9-]+)?$ view.php?ID=$1 [L] 
```

这有效，正确地重写了 URL。**但是**，当我访问网站本身时：

`www.example.com`

它也尝试重写该 URL，显示*view.php*页面，就好像*ID*留空一样，而不是像通常那样显示*index.php 。*

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:38:28.613

从 RewriteRule 中删除问号。这使得前面的表达式是可选的。

```
RewriteRule ^([A-Za-z0-9-]+)$ view.php?ID=$1 [L] 
```

# java - java中如何将String类型转换为Class类型

> ID：12286871
> 
> 赞同：15
> 
> 时间：2012-09-05T17:37:07.337
> 
> 标签：java

我想打印一个包中的所有类名，并在每个包中打印相应的属性及其数据类型。

在一个代码中，我能够以字符串的形式获取类名。在另一个代码中，我可以使用获取属性及其数据类型`Classname.class.getAttribute();`

但是我想合并这两个代码。由于在第一个代码中我以 string 的形式获得了类名，因此我不能使用，`Classname.class.getAttribute()`因为这里`Classname`将是 type `String`。

所以我想要一种将“类名”从`String`类型转换为`Class`类型的方法。

我试过`Class.forName()`了，但没有用。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-05T17:42:13.417

```
Class<?> classType = Class.forName(className); 
```

确保`className`是完全限定的类名，例如`com.package.class`，请分享您看到的错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:01:55.943

如果一个类的全名可用，则可以使用静态方法 Class.forName() 获取对应的 Class。

例如：

```
Class c = Class.forName("com.duke.MyLocaleServiceProvider"); 
```

> **注意：**确保您为函数提供的参数是完全限定的类名，例如 com.package.class

[检查here](http://docs.oracle.com/javase/tutorial/reflect/class/classNew.html)以获取任何参考。

**编辑：**

您也可以尝试使用`loadClass()`方法。

例如：

```
 ClassLoader cl;
 Class c = cl.loadClass(name); 
```

Java 虚拟机调用它来解析类引用。

**句法：**

```
public Class<?> loadClass(String name)
                   throws ClassNotFoundException 
```

[有关 ClassLoader 的详细信息，请查看此处](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html)

[这](http://www.java2s.com/Code/Java/Reflection/ConvertagivenStringintotheappropriateClass.htm) 是 ClassLoader 的一个实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-24T11:06:40.027

请尝试如下。

```
String str = "RequiredClassName";    
Class <?> Cref = Class .forName("PackageNaem."+str ); 
```

# android - 从Android中的数据库填充expandableListView的数据

> ID：12286872
> 
> 赞同：4
> 
> 时间：2012-09-05T17:37:13.703
> 
> 标签：android, sqlite, expandablelistview

我想从数据库中填充 expandableListView 中的数据。实际上，我需要做的就是从一个我的单个表中检索所有数据，因为第一列将是 groupName，其余四列将是子列，但在这里我被卡住了......这是我的一段代码尝试。

公共类 ViewDetail 扩展 Activity{

```
private ExpandableListView mExpandableListView;
private List<GroupEntity> mGroupCollection;

public void onCreate(Bundle savedInstanceState ){

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    prepareResource();
    initPage();
}

private void prepareResource() {

    mGroupCollection = new ArrayList<GroupEntity>();
    DBClass db = new DBClass(ViewDetail.this);
    SQLiteDatabase dc = db.getReadableDatabase();
    Cursor cur = dc.query(true, "db_table", new String[]{"title","_url","username","password","comment"}, null, null, null, null, null, null);
    ContentValues cv = null;
    String _title = "";
    String _url = "";
    String _usrname = "";
    String _pasword = "";
    String _comment = "";

    if(cur.getCount() <= 0){
        Toast.makeText(ViewDetail.this, "empty...Please add.", Toast.LENGTH_LONG).show();
    }else{

        for(int i=0;i<cur.getCount();i++){              

            _title = cur.getString(0);
            _url = cur.getString(1);
            _usrname = cur.getString(2);
            _pasword = cur.getString(3);
            _comment = cur.getString(4);

            GroupEntity ge = new GroupEntity();
            ge.Name = _title;
                GroupItemEntity gi = ge.new GroupItemEntity();
                gi.Name =  _url;//"Child" + j;
                gi.Name =  _usrname;
                gi.Name =  _pasword;
                gi.Name =  _comment;
            mGroupCollection.add(ge);
            cur.moveToNext();   

        }

    }

    cur.close();
    db.close();
    dc.close(); 
    }

}

private void initPage() {

    mExpandableListView = (ExpandableListView) findViewById(R.id.expandableListView);
    ExpandableListAdapter adapter = new ExpandableListAdapter(this,mExpandableListView, mGroupCollection);
    mExpandableListView.setAdapter(adapter);

} 
```

}

公共类 ExpandableListAdapter 扩展 BaseExpandableListAdapter{

```
private Context mContext;
private ExpandableListView mExpandableListView;
private List<GroupEntity> mGroupCollection;
private int[] groupStatus;

public ExpandableListAdapter(Context pContext,ExpandableListView pExpandableListView,List<GroupEntity> pGroupCollection) {
    mContext = pContext;
    mGroupCollection = pGroupCollection;
    mExpandableListView = pExpandableListView;
    groupStatus = new int[mGroupCollection.size()];

    setListEvent();
}

private void setListEvent() {

    mExpandableListView.setOnGroupExpandListener(new OnGroupExpandListener() {

                @Override
                public void onGroupExpand(int arg0) {
                    groupStatus[arg0] = 1;
                }
            });

    mExpandableListView.setOnGroupCollapseListener(new OnGroupCollapseListener() {

                @Override
                public void onGroupCollapse(int arg0) {
                    groupStatus[arg0] = 0;
                }
            });
}

@Override
public String getChild(int arg0, int arg1) {
    return mGroupCollection.get(arg0).GroupItemCollection.get(arg1).Name;
}

@Override
public long getChildId(int arg0, int arg1) {
    return 0;
}

@Override
public View getChildView(int arg0, int arg1, boolean arg2, View arg3,ViewGroup arg4) {

    ChildHolder childHolder;
    if (arg3 == null) {

        arg3 = LayoutInflater.from(mContext).inflate(R.layout.list_group_item, null);
        childHolder = new ChildHolder();
        childHolder.title = (TextView) arg3.findViewById(R.id.item_title);
        arg3.setTag(childHolder);
    }else {
        childHolder = (ChildHolder) arg3.getTag();
    }

    childHolder.title.setText(mGroupCollection.get(arg0).GroupItemCollection.get(arg1).Name);
    return arg3;
}

@Override
public int getChildrenCount(int arg0) {
    return mGroupCollection.get(arg0).GroupItemCollection.size();
}

@Override
public Object getGroup(int arg0) {
    return mGroupCollection.get(arg0);
}

@Override
public int getGroupCount() {
    return mGroupCollection.size();
}

@Override
public long getGroupId(int arg0) {
    return arg0;
}

@Override
public View getGroupView(int arg0, boolean arg1, View arg2, ViewGroup arg3) {
    GroupHolder groupHolder;
    if (arg2 == null) {

        arg2 = LayoutInflater.from(mContext).inflate(R.layout.list_group,null);
        groupHolder = new GroupHolder();
        groupHolder.img = (ImageView) arg2.findViewById(R.id.tag_img);
        groupHolder.title = (TextView) arg2.findViewById(R.id.group_title);
        arg2.setTag(groupHolder);

    } else {
        groupHolder = (GroupHolder) arg2.getTag();
    }
    if (groupStatus[arg0] == 0) {
        groupHolder.img.setImageResource(R.drawable.group_down);
    } else {
        groupHolder.img.setImageResource(R.drawable.group_up);
    }
        groupHolder.title.setText(mGroupCollection.get(arg0).Name);

    return arg2;
}

class GroupHolder {
    ImageView img;
    TextView title;
}

class ChildHolder {
    TextView title;
}

@Override
public boolean hasStableIds() {
    return true;
}

@Override
public boolean isChildSelectable(int arg0, int arg1) {
    return true;
} 
```

}

公共类 GroupEntity {

```
public String Name;
public List<GroupItemEntity> GroupItemCollection;

public GroupEntity()
{
    GroupItemCollection = new ArrayList<GroupItemEntity>();
}

public class GroupItemEntity
{
    public String Name;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:05:00.733

而不是存储数据的列表，将其直接从光标中拉出

```
 Cursor cursor = pContext.getContentResolver().query(DEFAULT_URI, null, null, null, null); 
```

然后是一些例子......

```
@Override
public int getCount() {
    return cursor.getCount();
}

@Override
public Object getGroup(int position) {
    cursor.moveToPosition(position);
    String column1 = cursor.getString(COLUMN_1);
    String column2 = cursor.getString(COLUMN_2);
    GroupObject group = new Group(column1, column2);
    return group;
} 
```

# mongodb - 当 mongoDB db.copyDatabase(...) 占用所有可用 RAM 时机器挂起

> ID：12286873
> 
> 赞同：0
> 
> 时间：2012-09-05T17:37:19.413
> 
> 标签：mongodb, database

当我尝试将数据库从一台 mongoDB 服务器复制到另一台（大约 100GB）时，mongo 守护进程占用了 99% 的可用 RAM（Windows 64 位 16GB）。结果，系统变得非常缓慢，有时甚至不稳定。

有什么办法可以避免吗？

MongoDB 2.0.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T06:55:31.663

阿尔伯特。

MongoDB 在很大程度上是一个“in ram”应用程序。Mongo 已映射所有数据库内存以供使用，但通常只有最近使用的数据会在 RAM 中（称为您的工作集），并且 mongo 将根据需要分页以获取不在 RAM 中的任何数据。通常，mongo 的行为只是在 RAM 中拥有所需的数量，但是当您执行类似 DB Copy 之类的操作时，需要所有数据 - 因此 mongod 会消耗您所有的 ram。

对此没有理想的解决方案，但如果迫切需要，您可以使用 WSRM [http://technet.microsoft.com/en-us/library/cc732553.aspx](http://technet.microsoft.com/en-us/library/cc732553.aspx)来尝试限制进程消耗的 RAM 量。这将使复制花费更长的时间，并可能导致其他问题。

# php - 如何限制插入数据库的特定电子邮件？

> ID：12286876
> 
> 赞同：-2
> 
> 时间：2012-09-05T17:37:34.120
> 
> 标签：php, mysql

我只是在寻找最熟练的方法，只允许在用户使用其唯一电子邮件创建帐户时将特定电子邮件插入我的数据库中一次。我假设这是一个简单的 if 语句，如果尝试会触发错误消息。

这是否只能通过 php 实现，或者是否有 mysql 快捷方式来完成此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:40:50.627

只需将 UNIQUE 索引添加到数据库中的电子邮件字段。看到[这个](http://php.about.com/od/mysqlcommands/g/add_unique.htm)。

* * *

更新

好的，既然您已经更准确地解释了您的问题，我建议您仍然将电子邮件字段保留`UNIQUE`在数据库中，但为尝试使用现有电子邮件地址创建帐户的用户添加一些用户友好的通知。您可以这样做，例如向他们显示一个弹出窗口，说明该地址已在使用中，建议他们重置密码以防他们忘记密码等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:42:28.410

如果您只想在数据库表中使用唯一的电子邮件地址，请在存储电子邮件地址的字段上创建唯一索引。这将自动防止将任何重复项插入到表中。

在应用程序层，最好的做法是在插入新记录之前检查数据库中的记录，或者只是尝试将记录插入数据库并处理因尝试插入重复键而导致的任何错误。

我个人更喜欢后者，因为在大多数情况下，只需要对 DB 进行一个查询（插入查询），并且无论如何我都会处理所有情况下的 DB 错误条件，所以只需添加一点逻辑来确定错误是否是由于重复键插入尝试非常简单。

# javascript - .offset().top 返回错误的值

> ID：12286877
> 
> 赞同：3
> 
> 时间：2012-09-05T17:37:34.967
> 
> 标签：javascript, jquery

我有一个奇怪的问题，我不知道如何解决，想知道你们是否可以帮忙。

一点背景知识：我被要求创建一个系统，其中 wordpress 中页面的子页面以无限滚动的方式加载到该页面的末尾。这工作正常。

他们还希望顶部导航链接将所有内容加载到包括他们单击的页面，然后滚动到该页面。

如果我向下滚动（加载页面）然后单击顶部导航链接，则滚动正常工作。但是，如果我在单击其中一个链接之前没有加载更多页面，则页面将加载，并且滚动将开始，但只会在停止之前获得一些方式。这是由于 offset().top 给出的值不正确。我的问题是为什么？

```
function ajaxloadnscroll(index) {

    //If the page has already been loaded then just scroll to it
    if (pages[index].loaded) {
        $('html, body').animate({
            scrollTop: $("#" + pages[index].name).offset().top
        }, 2000);
        return;
    }

    //Loop through pages up to one clicked.
    for (i = 0; i <= index; i++) {

        current = i;
        if (!pages[current].loaded) {
            $.ajax({
                url: pages[i].url,
                async: false,
                context: document.body,
                success: function(data) {
                    if (data) {
                        $("#tempload").before(data);
                        pages[current].loaded = true;

                        if (current == index) {
                            $('html, body').animate({
                                scrollTop: $("#" + pages[current].name).offset().top
                            }, 2000);
                        }

                    }
                }
            });
        }
    }

    //Increment current in order to load next page object on scroll.
    current++;
    return false;
}​ 
```

您可以在此问题上给我的任何帮助将不胜感激！

# ruby-on-rails - 将rails路由更改为路径中的参数

> ID：12286881
> 
> 赞同：1
> 
> 时间：2012-09-05T17:37:49.963
> 
> 标签：ruby-on-rails, parameters, routes

Google bot 想要打开我的 Ajax 地址，例如： [http](http://ots.wlasowy.ru/ru?_escaped_fragment_=/ru/pages/service) ://ots.wlasowy.ru/ru?_escaped_fragment_=/ru/pages/service 我有一个类似`match 'pages/service', :to => 'pages#service'`in的记录`routes.rb`。

我还需要添加`routes.rb`什么？

我的路线.rb：

```
scope "(:locale)", :locale => /en|ru/ do

match '/pages/news' => 'pages#news'
match '/articles/page/:page',  :to => 'pages#news'
match '/pages/home' => 'pages#home'

resources :pages
resources :articles
resources :vacancies

mount Ckeditor::Engine => '/ckeditor'

mount RailsAdmin::Engine => '/admin', :as => 'rails_admin'

devise_for :users

devise_scope :user do
  get "sign_in", :to => "devise/sessions#new"
end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:39:30.033

添加你的 route.rb，查看文件。您的代码中有一些错误。

# perl - 是否有工具可以检查 Perl 脚本中是否存在不必要的使用语句？

> ID：12286882
> 
> 赞同：20
> 
> 时间：2012-09-05T17:37:56.553
> 
> 标签：perl, perl-module, utility

对于 Python，有一个名为[importchecker](http://pypi.python.org/pypi/importchecker)的脚本，它会告诉您是否有不必要的`import`语句。

`use`Perl (and `require`) 语句是否有类似的实用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T18:33:59.643

看看[Devel::TraceUse](https://metacpan.org/module/Devel%3a%3aTraceUse)，它可能会给你很多你正在寻找的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T19:17:22.057

这是[我写的一个脚本](https://github.com/sjohnston/tools/blob/master/unused.pl)来尝试这个。它非常简单，不会为你自动化任何东西，但它会给你一些东西开始。

```
#!/usr/bin/perl

use strict;
use v5.14;

use PPI::Document;
use PPI::Dumper;
use PPI::Find;
use Data::Dumper;

my %import;
my $doc = PPI::Document->new($ARGV[0]);

my $use = $doc->find( sub { $_[1]->isa('PPI::Statement::Include') } );
foreach my $u (@$use) {
    my $node = $u->find_first('PPI::Token::QuoteLike::Words');
    next unless $node;
    $import{$u->module} //= [];
    push $import{$u->module}, $node->literal;
}

my $words = $doc->find( sub { $_[1]->isa('PPI::Token::Word') } );

my @words = map { $_->content } @$words;

my %words;
@words{ @words } = 1;

foreach my $u (keys %import) {
    say $u;
    foreach my $w (@{$import{$u}}) {
        if (exists $words{$w}) {
            say "\t- Found $w";
        }
        else {
            say "\t- Can't find $w";
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-01-28T09:02:40.057

有很多方法可以加载包和导入符号（或不）。我不知道有一个工具可以单独直接检查这些符号是否被使用。

但是对于给出明确导入列表的情况，

```
use Module qw(func1 func2 ...); 
```

有一个[Perl::Critic](https://metacpan.org/pod/Perl::Critic)策略[TooMuchCode::ProhibitUnusedImport](https://metacpan.org/pod/Perl::Critic::Policy::TooMuchCode::ProhibitUnusedImport)可以帮助解决很多问题。

一个在命令行上运行

```
perlcritic --single-policy TooMuchCode::ProhibitUnusedImport program.pl 
```

并检查程序。或者在没有`--single-policy`标志的情况下运行以进行完整检查并在输出中寻找`Severity 1`违规行为，就是这样。

例如，考虑一个程序

```
use warnings;
use strict;
use feature 'say';

use Path::Tiny;                      # a class; but it imports 'path'    
use Data::Dumper;                    # imports 'Dumper' 
use Data::Dump qw(dd pp);            # imports 'dd' and 'pp'
use Cwd qw(cwd);                     # imports only 'cwd'
use Carp qw(carp verbose);           # imports 'carp'; 'verbose' isn't a symbol
use Term::ANSIColor qw(:constants);  # imports a lot of symbols

sub a_func {
    say "\tSome data: ", pp [ 2..5 ];
    carp "\tA warning";
}

say "Current working directory: ", cwd;

a_func(); 
```

运行上面的`perlcritic`命令打印

```
未使用的导入：第 7 行第 5 列的 dd。导入了一个令牌，但未在同一代码中使用。（严重性：1）
未使用的导入：在第 9 行第 5 列详细说明。导入了一个标记，但未在同一代码中使用。（严重性：1）

```

我们被`dd`抓住了，虽然`pp`来自同一个包没有被标记，因为它被使用了（在子中），也没有被标记，也没有被`carp`使用`cwd`；应该是，出于政策的目的。

但请注意

*   `:constants`找不到标签附带的任何东西

*   word `verbose`，它不是一个函数（并且被隐式使用），被报告为未使用

*   如果`a_func()` *没有*被调用，那么即使它们未被使用，它们`pp`仍然`carp`不会被*报告。*这可能没问题，因为它们*存在*于代码中，但值得注意的是

（这个故障列表可能并不详尽。）

回想一下，导入列表被传递给[导入](https://perldoc.perl.org/functions/import)子，它可能期望并使用模块设计认为值得的任何东西；这些不必只是函数名。跟进这一切显然超出了这项政策。尽管如此，使用带有函数名称的显式导入列表加载模块是一种很好的做法，并且该策略所涵盖的内容是一个重要的用例。

此外，根据明确说明的政策用法，未找到`Dumper`(imported by `Data::Dumper`)，也未找到`path`from `Path::Tiny`。该政策确实处理了一些奇怪的`Moose`技巧。

一个人怎么做更多？一个有用的工具是[Devel::Symdump](https://metacpan.org/pod/Devel::Symdump)，它收集符号表。它捕获上述程序中所有已导入的符号（当然，如果使用，则看不到任何`Path::Tiny` *方法）。*不存在的“符号”`verbose`也包括在内。添加

```
use Devel::Symdump;

my $syms = Devel::Symdump->new;
say for $syms->functions; 
```

到上面的例子。为了还处理（运行时）`require`-ed 库，我们必须在加载它们*之后*在代码中的某个位置执行此操作，该位置可以在程序中的任何位置。然后最好在一个`END`街区内完成，比如

```
END {
    my $ds = Devel::Symdump->new;
    say for $ds->functions;
}; 
```

然后我们需要检查其中哪些是未使用的。目前我所知道的用于该工作的最佳工具是[PPI](https://metacpan.org/pod/PPI)；看一个[完整的例子](http://blogs.perl.org/users/brian_d_foy/2012/07/finding-unused-subroutines-but-with-ppi.html)。另一种选择是使用分析器，例如[Devel::NYTProf](https://metacpan.org/pod/Devel::NYTProf)。

* * *

另一个需要一些工作^(†</sup>的选项是编译器的后端[B::Xref](https://perldoc.perl.org/B::Xref)，它几乎可以获取程序中使用的所有内容。它被用作)

```
perl -MO=Xref,-oreport_Xref.txt find_unused.pl 
```

并且（大量）输出在文件中`report_Xref.txt`。

输出包含每个相关文件的部分，其中包含子例程及其包的子部分。输出的最后一部分直接用于当前目的。

对于上面使用的示例程序，我得到了类似的输出文件

```
文件 /.../perl5/lib/perl5//Data/Dump.pm
  ...
  （约 3,000 行）
  ...
文件 find_unused.pl --> 好了，这个程序的文件
  子程序（定义）
    ...几十行...  
  子程序（主）
    包主
      &a_func &43
      &cwd &27
  子程序 a_func
    包裹 ？
      @?? 14
    包主
      &鲤鱼 &15
      &pp &14

```

所以我们看到`cwd`被调用（在第 27 行），`carp`并且`pp`在 sub 中也被调用了`a_func`。因此`dd`和`path`是未使用的（例如，在以其他方式找到的所有导入符号中`Devel::Symdump`）。这很容易解析。

但是，虽然`path`在使用时会报告，但如果使用`new`替代（也`Path::Tiny`作为传统的构造函数），那么最后一节中没有报告，其他方法也没有报告。

所以原则上^(†</sup> 这是一种方法来查找报告存在的哪些符号（用于函数）`Devel::Symdump`已在程序中使用。)

* * *

^(†</sup> 这里的例子很简单，易于处理，但我不知道它有多完整，或者难以解析，这是考虑到使用导入 subs 的各种奇怪方式的时候。)

# objective-c - 使用瞬态属性时对原语的需求是什么？

> ID：12286883
> 
> 赞同：2
> 
> 时间：2012-09-05T17:37:58.340
> 
> 标签：objective-c, ios

它是什么？

我不确定我是否完全理解这是做什么的。

```
- (NSString *)sectionIdentifier {

    [self willAccessValueForKey:@"sectionIdentifier"];
    NSString *tmp = [self primitiveSectionIdentifier];
    [self didAccessValueForKey:@"sectionIdentifier"];

    if (!tmp) {

        tmp = @"bananas";

        [self setPrimitiveSectionIdentifier:tmp];
    }
    return tmp;
} 
```

我怎么需要这个**originalSectionIdentifier**？

最终，我使用 Apple 文档中的示例项目来创建部分标识符，以与我的 NSFetchedResultsController 一起使用。

虽然这确实有效。我对自己说，

“ **sectionIdentifier** ”将被访问，然后我将“ **tmp** ”设置为**primitiveSectionIdentifier**。但是primitiveSectionIdentifier此时什么都没有！可以？

然后我说我确实访问了“ **sectionIdentifier** ”。但我看不出“Will”和“Did”之间是如何发生的！

有人可以帮我理解这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T18:06:24.787

`[self primitiveSectionIdentifier]`是所谓的“原始访问器”（参见核心数据编程指南的词汇表）。这是实际从持久存储中获取“sectionIdentifier”值的函数。该函数由 Core Data 运行时自动创建。

`willAccessValueForKey`并且`didAccessValueForKey`是“通知方法”。根据文档，它们用于键值观察、维护反向关系等。

所以模式是：

1.  告诉大家你要读取一个值。
2.  读取值。
3.  告诉大家您已经阅读了该值。

# cordova - Piwik 未在 Phonegap 应用程序中运行

> ID：12286884
> 
> 赞同：5
> 
> 时间：2012-09-05T17:38:03.360
> 
> 标签：cordova, browser, analytics, matomo

我正在使用 Piwik 分析我网站上的用户操作，当网站显示在浏览器中（PC、Mac 和手机浏览器上）时，一切正常。

但是，当我在 PhoneGap 应用程序中浏览相同的页面（其中包含 piwik 代码）时，该应用程序正在加载、加载、加载并最终显示......什么都没有。

那里有什么问题？JavaScript 已启用。是否存在已知问题，谷歌分析是更好的选择吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T12:16:34.297

也许您在 phonegap config.xml 中阻止了 piwik 的跟踪器 url？

尝试将此添加到您的 config.xml：

```
<access origin="*"/> 
```

# c++ - ifstream C++ 的问题

> ID：12286885
> 
> 赞同：0
> 
> 时间：2012-09-05T17:38:08.147
> 
> 标签：c++, ifstream

我对 C++ 和一般编程比较陌生，所以我猜我的错误是一个非常简单的错误。无论如何，我一直在从 .txt 文件中扫描 DNA 序列，我正在尝试对其进行编程，以便用户可以从命令行指定数据文件的名称。我包含了整个函数以供参考，但是我遇到的特定问题是我无法让文件实际打开，程序总是返回“无法打开文件”消息。我遇到问题的部分（我认为）是最后一个 for 循环，但我包含了整个函数以供参考。

```
int dataimport (int argc, char* argv[]){                                         

    vector<string> mutationfiles (argc -1); //mutationfiles: holds output file names
    vector<string> filenames (argc - 1);    //filenames:     holds input file names                                             

    if (argc > 1){
        for ( int i = 1; i < argc; ++i){
            string inputstring = argv[i];         //filename input by user
            filenames[i-1] = inputstring;         //store input filename in vector
            stringstream out;
            out << inputstring << "_mutdata.txt"; //append _mutdata.txt to input file names
            mutationfiles[i-1] = (out.str());     //store as output file name
            inputstring.clear();                  //clear temp string
        }
    }

    else{
        cout << "Error: Enter file names to be scanned" << endl;
        system("PAUSE");
        return EXIT_FAILURE;
    }

    for(int repeat = 0; repeat < argc; ++repeat){

        ifstream myfile;                                     //open input file
        myfile.open (filenames[repeat].c_str());

        ofstream myfile2;                                    //open output file
        myfile2.open (mutationfiles[repeat].c_str());

        string all_lines;

        if (myfile.is_open()){
            while ( myfile.good() ){                         //scan data
                getline (myfile,all_lines,'\0');
            }
            myfile.close();                                  //close infile
        }

        else{                                                //error message
            cout << "Unable to open file\n";
            system("PAUSE");
            return EXIT_FAILURE;
        }
    }
} 
```

如果您需要任何其他信息或我应该研究的任何内容，请告诉我，以便我更好地帮助自己！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:50:09.833

```
for(int repeat = 0; repeat < argc; ++repeat) 
```

应该

```
for(int repeat = 0; repeat < argc - 1; ++repeat) 
```

除此之外，我看不到任何会导致您遇到错误的东西。

如果您解决了这个问题但仍然出现错误，我会尝试打印名称以确保您的两个向量的内容是正确的。

```
for(int repeat = 0; repeat < argc - 1; ++repeat)
{
    cout << filenames[repeat] << endl;
    cout << mutationfiles[repeat] << endl;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T17:50:46.600

更改`for ( int i = 1; i < argc; ++i)` 为`for ( int i = 0; i < argc; i++)`

和

更改`filenames[i-1] = inputstring;`为`filenames[i] = inputstring;`

和

更改`mutationfiles[i-1]`为`mutationfiles[i]`.

# postgresql - postgresql 服务器不听

> ID：12286886
> 
> 赞同：2
> 
> 时间：2012-09-05T17:38:08.287
> 
> 标签：postgresql, ubuntu, ssh, postgresql-9.1, ubuntu-12.04

我最近刚刚通过 SSH 在我们的服务器上安装了 PostgreSQL。安装成功，直到我尝试在我的 Windows 机器上使用 pgAdmin 连接到它。我收到了这种错误：

> 无法连接到服务器：连接被拒绝 (0x0000274D/10061) 服务器是否在主机“xxx.xxx.xxx.xxx”上运行并接受端口 5432 上的 TCP/IP 连接？

*xxx.xxx.xxx.xxx* = 我的服务器的公共 IP。

文档建议可以通过设置*/etc/postgresql/9.1/main/postgresql.conf*`listen_addresses = '*'`中的值来解决此问题。我这样做了，但它仍然不允许我这样做。

 *出现了额外的错误

> 致命：主机“xxx.xx.xxx.xxx”、用户“postgres”、数据库“postgres”没有 pg_hba.conf 条目，致命的 SSL：主机“xxx.xx.xxx.xxx”没有 pg_hba.conf 条目，用户“postgres”，数据库“postgres”，SSL 关闭

*xxx.xx.xxx.xxx* = 我的 IP 地址。

我好像错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:55:41.697

可能阻止 postgres 连接的事情：

1.  [`listen_address`](http://www.postgresql.org/docs/current/static/runtime-config-connection.html)配置错误[`postgresql.conf`](http://www.postgresql.org/docs/current/static/runtime-config.html)
2.  selinux (?)
3.  iptables
4.  [`pg_hba.conf`](http://www.postgresql.org/docs/current/static/auth-pg-hba-conf.html)（虽然这应该会导致不同的错误，而不是服务器不听）

如果您 ssh in 并运行，您可以在本地连接到服务器`psql`吗？

在我们的内部开发服务器上，我只是关闭了 selinux 和 iptables。从安全的角度来看，这是一个坏主意，但它可以作为一个临时步骤来帮助您缩小问题所在的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:56:49.957

您可能需要更改多个配置文件。在您的情况下，您可能还需要编辑[pg_hba.conf](http://www.postgresql.org/docs/9.1/static/auth-pg-hba-conf.html)。在该文件中搜索“非本地连接”。

我喜欢将配置文件置于版本控制之下。这样更容易从错误中恢复过来。

进行这些更改后，您可能需要重新启动 PostgreSQL 服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T18:01:04.977

*   更改服务器上的 listen_addresses 设置后，确保重新启动 PostgreSQL 服务器（发送 SIGHUP 到 postmaster 进程，使用 kill -HUP 等）。
*   确保 postgresql.conf 端口设置为 5432
*   确保如果服务器上正在运行防火墙，则端口 5432 对来自您正在使用的窗口（客户端）机器的连接打开
*   检查 pg_hba.conf 以确保您的客户端机器的子网被授予访问权限
*   尝试在本地使用 psql*

# php - Joomla 滑块和联系我们页面

> ID：12286887
> 
> 赞同：-4
> 
> 时间：2012-09-05T17:38:09.050
> 
> 标签：php, joomla, joomla2.5

我已经制作了 joomla 模板 2.5，但到目前为止还没有完成。

1）我有一个带有滑块的主页，我为滑块slider.php制作了额外的文件并将其包含在模板中。

现在滑块应该只在主页上怎么可能？

2) 我还有一些其他页面，例如关于我们、联系方式、产品和类别。

如何使用模板制作联系表格并将其发送到客户电子邮件 ID？

我还有一些问题将描述，但首先想解决它们然后继续请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:46:41.543

我认为您对 Joomla 是什么感到有些困惑。它是一个内容管理系统，因此可以在扩展上运行。这不像创建自己的基于 PHP 的基本站点并对所有内容进行硬编码。

不要将滑块硬编码到模板中。相反，在幻灯片当前所在的位置创建一个模块位置，然后将滑块变成一个模块。当您已经拥有代码时，转换您的小部件等非常简单。

至于联系表格，这也是 Joomla 中已经内置的一个扩展。因此，在 Joomla 后端的顶部菜单中，转到：

组件/联系人/联系人

创建一个新的并输入必要的详细信息。

然后，创建一个新菜单项并将“类型”设置为“单一联系人”。[或者您可以从JED](http://extensions.joomla.org)下载联系扩展名。如果你想给网站的成员发邮件，去 Joomla 后端，在顶部菜单上去：

用户/群发邮件用户

然后简单地从那里继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:12:29.743

对于您的滑块问题，如果您只想在登录页面或首页中显示您的滑块，那么您必须检查 index.php 文件中的首页，然后启动您的滑块，以便您的滑块仅适用于首页，如下所示：

```
$app = JFactory::getApplication();
$menu = $app->getMenu();
if ($menu->getActive() == $menu->getDefault()) {
    // Start display your slider
} 
```

关于示例将在 joomla2.5x 版本中运行。

要了解更多信息，请查看[joomla 文档](http://docs.joomla.org/How_to_determine_if_the_user_is_viewing_the_front_page)

对于您的第二个问题，您有两种选择，一种是为联系人创建一个组件，然后在您的模板上应用，或者尝试从 joomla 扩展中找到一些已经制作的联系人组件。或修改当前的 com_contect 组件。

# asp.net - 我无法理解页面验证

> ID：12286888
> 
> 赞同：0
> 
> 时间：2012-09-05T17:38:14.370
> 
> 标签：asp.net

好的，所以我有我的 asp.net 页面，其中包含我所有的比较和必填字段验证器。这让我有两个担忧。

1.  我需要什么额外的验证？我需要后面的代码中的任何内容吗？我希望他们在他们的文本框信息完成之前无法点击“保存”按钮，并且似乎只使用验证器控件来执行此操作，但我不确定是否需要采取其他步骤。

2.  如果我有一个必填字段验证器并且我想在特殊情况下将其关闭，我应该在代码隐藏的哪个位置将其设置为 true？我可以在“保存”按钮单击之前执行此操作，然后它会阻止按钮运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:43:39.783

据我所知，

1.  每当我们使用 ASP.NET 验证器时，我们都应该在服务器端（代码隐藏）检查“Page.IsValid”。即使在浏览器上禁用了 javascript，这也将确保在服务器端进行检查。

2.  不，您不能在单击保存按钮时执行此操作，因为在验证通过之前不会单击按钮单击。

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:17:35.427

1.

您需要尽可能多的验证，您可以创建许多不同的验证器。您需要在后面的代码中进行服务器端验证。如果发生回发，则表单通过了验证，但有一些验证功能在客户端无法使用。例如，您注册到主页，并且您有一个需要用户名的表单，并且还有一个正则表达式验证器。这些验证器将在客户端运行。但是，如果用户名必须是唯一的，并且您只能使用数据库进行检查，那么显然无法在客户端进行检查，因此，客户端将评估页面是否有效，将发生回发并且检查用户名是否唯一是服务器端的工作。

请注意，如果您需要做任何奇特的事情，您可以创建自定义验证器。

2.

根据您的需要，您可以在需要时设置验证器的 Enabled 属性。[在此处](http://www.codeproject.com/Questions/126282/Dynamically-Enable-or-Disable-Required-Field-Valid)阅读更多相关信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T17:46:40.273

1 如果你想添加验证服务器

```
protected void Button1_Click(object sender, EventArgs e) {

//Proceed only if the validation is successfull
if (!Page.IsValid) {
 return;}

} 
```

2 您可以设置`CausesValidation="false"`为按钮

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T12:55:58.890

Page.IsValid 的第一个问题是可以的。

requiredfieldvalidator 是一个 javascript 验证器，因此一旦启用，您就无法从代码隐藏中禁用它（除非它满足条件并且您可以通过）。但可以通过 javascript 禁用它，请检查以下代码：

```
ValidatorEnable(workPhoneValidator, false); 
```

链接：[根据 DropDownList 的值动态启用或禁用RequiredFieldValidator](https://stackoverflow.com/questions/2554840/dynamically-enable-or-disable-requiredfieldvalidator-based-on-value-of-dropdownl)

# php - 如何使页面可访问 .POST 仅

> ID：12286899
> 
> 赞同：-2
> 
> 时间：2012-09-05T17:39:06.727
> 
> 标签：php, html

我之前尝试过输入一个 URL，它告诉我“此操作只能通过 POST 进行。请按返回按钮并重试。” 在我的网站上实现这一点的代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:45:41.827

通常，您应该只测试您期望的表单值是否存在，就像这样`! isset($_POST['email'])`。如果您真的想仅限于 POST 查询，只需检查[`$_SERVER['REQUEST_METHOD']`](http://php.net/manual/en/reserved.variables.server.php).

不要忘记发送[正确的 HTTP 状态码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.6)：

```
if ($_SERVER['REQUEST_METHOD'] != 'POST') {
  header('HTTP/1.1 405 Method not allowed');
  header('Allow: POST');
  die('This action is available via POST only');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:41:34.447

您可以检查 $_SERVER['REQUEST_METHOD'] 并采取相应措施。 [http://ch2.php.net/manual/en/reserved.variables.server.php](http://ch2.php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:42:34.400

使用[`$_SERVER`超全局。](http://www.php.net/manual/en/reserved.variables.server.php)

```
if ($_SERVER['REQUEST_METHOD'] != 'POST') {
    // Conditionally deny the request
} 
```

# asp.net - ASP.NET WEBAPI 添加自定义路由

> ID：12286905
> 
> 赞同：0
> 
> 时间：2012-09-05T17:39:23.947
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-web-api

我已经启动并运行了新的 .NET WebAPI，我正在尝试向我的项目添加一条新路由，以便我可以看到它`SettingsController`的实际效果。我已经`Global.asax`在 RegisterRoutes 方法中将我的路由添加到文件中，但是当我尝试浏览到时收到 404 错误：`sampleUrl:12345/settings/index`. 我能够看到：`sampleUrl:12345/home/index`没有问题。

全球.asax

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional }
    );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );

    routes.MapRoute(
        name: "Settings",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Settings", action = "Index", id = UrlParameter.Optional }
    );
} 
```

我需要`ActionResult Index()`在我的`SettingsController`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:42:48.550

您的设置路线是多余的。您可能缺少的是设置控制器中的索引方法。

# perl - 在 KDevelop 中调试 Perl 程序

> ID：12286910
> 
> 赞同：6
> 
> 时间：2012-09-05T17:39:48.693
> 
> 标签：perl, debugging, kdevelop

我可以在 KDevelop 中创建新的 Perl 项目，并且 KDevelop 为我的`.pl`文件提供自动语法高亮显示。但是，我看不到调试 Perl 程序的方法（例如添加断点、逐步调试等）。

KDevelop 有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T17:59:56.903

根据[perlmonks 中的这张表，](http://www.perlmonks.org/?node=Perl%20Development%20Tools) KDevelop 不支持 Perl 调试。您可以使用 Eclipse 和 EPIC 来调试 Perl 脚本。

# django-tables2 - django-tables2：获取单元格值

> ID：12286916
> 
> 赞同：0
> 
> 时间：2012-09-05T17:40:15.340
> 
> 标签：django-tables2

我用 django-tables2 渲染了一个表。就是这样：

```
class VehiclesTable(tables.Table):
    id = tables.TemplateColumn(verbose_name=' ',template_name='editButton.html')
    plate = tables.Column(verbose_name='plate')
    vht_id = tables.Column(verbose_name='vht_i')
    vlength = tables.Column(verbose_name='vlength')
    vwidth = tables.Column(verbose_name='vwidth')

    class Meta:
       attrs = {'class': 'custom'} 
```

我有一个模板列（id），它的每个单元格都有一个按钮，每个按钮都呈现一个模板。在处理此模板的视图中，我想传递按钮单元格旁边的单元格的值（同一行-> 板）。此值将用于通过单击按钮来查询我想在新模板上以表单形式呈现的对象。当用户“点击”按钮时，我如何获取下一个 django 表格单元格（板）的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:09:55.270

`TemplateColumn`使用包含`record`变量的上下文呈现模板（如[文档](http://django-tables2.readthedocs.org/en/latest/index.html#templatecolumn-objects)中所述）。

在您的情况下，这意味着`editButton.html`您可以`plate`通过`{{ record.plate }}`.

# java - 为什么我的 Karaf OSGI 捆绑包标记为 UNSATISFIED，当所有参考都满足时？

> ID：12286917
> 
> 赞同：3
> 
> 时间：2012-09-05T17:40:15.803
> 
> 标签：java, osgi, apache-felix, apache-karaf

尽管所有参考资料都得到满足，Karaf 仍将我的捆绑包显示为 UNSATISFIED。

我正在使用以下三个组件 - 来自 scr:list 的相关控制台输出：

```
[20  ] [UNSATISFIED     ] com.barchart.news.modules.mysql.MySQLIndex
[16  ] [ACTIVE          ] com.barchart.news.server.pipeline.StoryPipeline
[14  ] [ACTIVE          ] com.barchart.news.server.common.SharedExecutorProvider 
```

组件 16 和 14 提供以下服务（来自 service:list 的输出）：

```
service:list com.barchart.news.server.pipeline.PipelineService
[com.barchart.news.server.common.ModuleStatus, com.barchart.news.server.pipeline.PipelineService]
-------------------------------------------------------------------------------------------------
 component.name = com.barchart.news.server.pipeline.StoryPipeline
 component.id = 16
 service.id = 348
Provided by : 
 barchart-news-server (102)

service:list com.barchart.news.server.common.SharedExecutorService 
[com.barchart.news.server.common.ModuleStatus, com.barchart.news.server.common.SharedExecutorService]
-----------------------------------------------------------------------------------------------------
 component.name = com.barchart.news.server.common.SharedExecutorProvider
 component.id = 14
 service.id = 346
Provided by : 
 barchart-news-server (102)
Used by: 
 barchart-news-server (102) 
```

在这两者都属于的 barchart-news-server 包中，引用被满足并按预期绑定（来自 scr:details 的输出）：

```
scr:details com.barchart.news.server.pipeline.StoryPipeline
Component Details
  Name                : com.barchart.news.server.pipeline.StoryPipeline
  State               : ACTIVE
References
  Reference           : com.barchart.news.server.common.SharedExecutorService/*
    State             : satisfied
    Multiple          : single
    Optional          : mandatory
    Policy            : static
    Service Reference : Bound Service ID 346 (com.barchart.news.server.common.SharedExecutorProvider) 
```

但是，在依赖于这些服务的第二个捆绑包（#20）的组件中，虽然 Karaf 将引用标记为“已满足”，但它不会绑定它们并激活组件：

scr：com.barchart.news.modules.mysql.MySQLIndex 的详细信息：

```
Component Details
  Name                : com.barchart.news.modules.mysql.MySQLIndex
  State               : UNSATISFIED
References
  Reference           : com.barchart.news.server.common.SharedExecutorService/*
    State             : satisfied
    Multiple          : single
    Optional          : mandatory
    Policy            : static
    Service Reference : No Services bound
  Reference           : com.barchart.news.server.pipeline.PipelineService/*
    State             : satisfied
    Multiple          : single
    Optional          : mandatory
    Policy            : static
    Service Reference : No Services bound 
```

是什么阻止了 MySQLIndex 捆绑包被激活？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:46:17.747

如果我没看错，那么你的问题不是不满意的*捆绑*，而是不满意的*服务*。如果到目前为止 SCR 获取了您的服务，那么您的捆绑包必须已经处于活动状态。

`configuration-policy=require`使用声明式服务，当服务缺少配置时，我看到了类似的行为。另一种可能性是`activate`- 方法引发了异常。

# c# - 使用 BasedOn 更改控件属性

> ID：12286918
> 
> 赞同：0
> 
> 时间：2012-09-05T17:40:20.390
> 
> 标签：c#, wpf, xaml

我有一个带有一些按钮的 UserControl。我需要更改按钮的背景颜色，但保留所有其他属性和颜色，例如鼠标悬停事件

我使用了以下代码，我希望`UniqueButton1`基于`{StaticResource {x:Type Button}}"`但更改背景属性来定义我自己的颜色

```
<UserControl x:Class="Project.Detail"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="30" d:DesignWidth="800" BorderBrush="#FF5380E7" BorderThickness="0,0,0,1" xmlns:my="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero">
    <UserControl.Resources>
        <Style  x:Key="UniqueButton1" TargetType="{x:Type Button}" BasedOn="{StaticResource {x:Type Button}}"  >
            <Setter Property="Background">
                <Setter.Value>
                <LinearGradientBrush EndPoint="0,1">
                    <GradientStop Color="#FFF896CE" Offset="0" />
                    <GradientStop Color="#FFF788C7" Offset="0.5" />
                    <GradientStop Color="#FFF570BB" Offset="0.5" />
                     <GradientStop Color="#FFF353AE" Offset="1" />
                </LinearGradientBrush>
            </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
    <Grid Height="30" Width="800">
        <Button Height="30" HorizontalAlignment="Left" Margin="360,0,0,0" Name="button2" VerticalAlignment="Top" Width="50" Click="b_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" FontSize="10" FontStretch="SemiCondensed" />
        <Button Style="{StaticResource UniqueButton1}" Height="30" HorizontalAlignment="Left" Margin="423,0,0,0" Name="button1" VerticalAlignment="Top" Width="50" Click="b_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" FontSize="10" FontStretch="SemiCondensed" />
    </Grid>
</UserControl> 
```

它有点工作，因为我以我需要的方式获得背景颜色，但`UniqueButton1`我定义的`<UserControl.Resources>`不是基于其他默认按钮2，没有应用样式更改。例如，背景、颜色、动画速度等都不同

也许是因为我也在应用一个主题？

我的问题是 1\. 如何定义基于默认`button2`应用主题的资源？或 2\. 如何在应用了主题的情况下获取 button2 的所有属性，以便构建自己的样式？

有人建议我可能需要建立自己的风格，这很好。但是我需要匹配默认主题按钮的行为，除了背景属性 - 如果我看不到它是如何组成的，它似乎有点像 catch22。

编辑：澄清事情

![在此处输入图像描述](../Images/5c531b1e3a1a870ccd3d80839086885e.png)

![在此处输入图像描述](../Images/882d9ed63c8acc8b9c9687f97b4529c7.png)

这两张图片显示了 3 个按钮，您可以看到 button3 的鼠标悬停是橙色的，而 button2 的鼠标悬停是蓝色的。你看不到的是动画速度也不同。本质上，我希望我的按钮在静止状态下看起来像 button1，在鼠标悬停时看起来像 button3，同时保留 button3 动画速度和其他属性。Button2 是我正在使用的基础，没有进一步的属性更改。

Button3 是在没有资源和 XAML 的情况下生成的

```
<Button Height="30" HorizontalAlignment="Left" Margin="360,0,0,0" VerticalAlignment="Top" Width="50" Click="button_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" FontSize="10" FontStretch="SemiCondensed"/> 
```

Button2 是使用生成的

```
<UserControl.Resources>
        <Style  x:Key="TEST1" TargetType="{x:Type Button}" BasedOn="{StaticResource {x:Type Button}}"  >
        </Style>
</UserControl.Resources>

<Button Style="{StaticResource TEST1}" Height="30" HorizontalAlignment="Left" Margin="360,0,0,0" VerticalAlignment="Top" Width="50" Click="button_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" FontSize="10" FontStretch="SemiCondensed"/> 
```

Button1 是使用生成的

```
 <UserControl.Resources>
        <Style  x:Key="UniqueButton1" TargetType="{x:Type Button}" BasedOn="{StaticResource {x:Type Button}}"  >
            <Setter Property="Background">
                <Setter.Value>
                <LinearGradientBrush EndPoint="0,1">
                    <GradientStop Color="#FFF896CE" Offset="0" />
                    <GradientStop Color="#FFF788C7" Offset="0.5" />
                    <GradientStop Color="#FFF570BB" Offset="0.5" />
                     <GradientStop Color="#FFF353AE" Offset="1" />
                </LinearGradientBrush>
            </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

<Button Style="{StaticResource UniqueButton1}" Height="30" HorizontalAlignment="Left" Margin="360,0,0,0" VerticalAlignment="Top" Width="50" Click="button_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" FontSize="10" FontStretch="SemiCondensed" /> 
```

所以显然按钮 1 和 2 不是基于我想要的按钮 3。我想克隆 button3 属性并且只将背景更改为粉红色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T11:52:16.717

`BaseButton`将您的from更改`x:Type`为已命名的，然后将其设置`name`在 others 上`BasedOn`，这应该可以解决问题。

# android - 在Android中，是否可以设置drawable的边距？

> ID：12286923
> 
> 赞同：1
> 
> 时间：2012-09-05T17:40:40.420
> 
> 标签：android, xml, animation, margin

我想这样做，以便可以更改动画列表中的边距。

这会将按钮移动到离屏幕边缘更近或更远的位置。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-05T19:21:20.273

您可以简单地使用 InsetDrawable。这个drawable只是在你想要的任何其他drawable周围添加一个空白边距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T18:30:55.917

这是不可能的，但很容易创建这样的动画

```
<?xml version="1.0" encoding="utf-8"?>

<set xmlns:android="http://schemas.android.com/apk/res/android" android:interpolator="@android:anim/accelerate_interpolator">
    <translate android:fromYDelta="0" android:toYDelta="100%" />
</set> 
```

然后只需将动画添加到对象并启动它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:50:29.937

不完全是..，但是您可以使用带有透明背景的笔划标签..但它会给您在项目周围提供统一的边距

```
<item android:drawable="@drawable/blue" android:state_pressed="false"><shape>
        <solid android:color="#00000000" />

        <stroke android:width="1dp" android:color="#33B5E5" />

    </shape></item> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T17:51:58.660

如果您的drawable是PNG，那么这很简单，只需为每1个像素边距在您的drawable周围添加1个透明像素。但是这样你就不能使用 dp 单位，只计算像素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-22T09:52:34.490

您可以使用 android:drawablePadding 在内容和可绘制边距之间设置边距

# mysql - 在mysql数据库中获取多行

> ID：12286924
> 
> 赞同：0
> 
> 时间：2012-09-05T17:40:47.180
> 
> 标签：mysql, database, pdo, mysqli

我在 mysql 数据库中有列 a、b、c 和 d（为了简单起见）。

*   a 列是用户 ID #（非唯一）
*   b列是文件路径
*   c列是“组ID”
*   d 列是上传日期/时间

同时上传的文件具有相同的“组 ID”，分别存储在每个数据库条目中。

首先，我运行以下查询：
`SELECT * FROM database WHERE a='$userid' ORDER BY d DESC`

然后，我`mysqli_fetch_assoc`在循环中利用该函数`while`将数据输入到列表中（对于指定的 id，按上传日期排序，如上所示）。

我的问题是我需要在相同的提取输出中对具有相同“组 ID”的那些进行分组。这是否可以通过各种子查询来实现，或者我是否完全不充分地解决这个问题？如果有更好的 PDO 替代方案，我也很高兴看到这一点。

**编辑：为了给这个问题更多的定义，请在下面找到代码：**

因此，那些具有相同组 id 的条目应该放在同一个`<li>`

```
<body>
    <ul><?=$output?></ul>
</body> 
```

* * *

```
$userid = $_SESSION['id'];
$output='';
$q = mysqli_query("SELECT * FROM database WHERE a='$userid' ORDER BY d DESC");

while($row=mysqli_fetch_assoc($q)){
    $output.=formatfxn($row['b'],$row['c'],$row['d']);
} 
```

* * *

```
function formatfxn($filep,$groupid,$dt){
    if(is_string($dt)){
        $dt=strtotime($dt);
        if(is_file($filep) === true){
            $filel='<img class="postimg" src="'.$filep.'" />';
        }
    return '<li>'.$filel.'</li>';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:15:01.340

从您的问题来看，尚不清楚您到底想要什么。但是，您似乎希望通过组 ID 以某种方式组织您的上传元素。

抱歉，我不会尝试处理名为 a、b、c、d 的列。

你可以这样做：

```
 SELECT * 
     FROM datatable
    WHERE user_id='$userid'
 ORDER BY group_id DESC 
```

这将按组 id 降序为您提供您的项目。如果实际上具有相同 group_id 的项目具有相同的 upload_time，并且如果您按顺序分配 group_id 值，这将对您有用。

您是否需要为每个 group_id 值获取一行？你可以试试这个：

```
 SELECT user_id, 
          group_id, 
          MIN(upload_time) upload_time, 
          GROUP_CONCAT( filepath 
                        ORDER BY upload_time, filepath 
                       SEPARATOR ';') filepaths
     FROM datatable
    WHERE user_id=1
 GROUP BY user_id, group_id
 ORDER BY upload_time DESC 
```

[http://sqlfiddle.com/#!2/4f2df/1/0](http://sqlfiddle.com/#!2/4f2df/1/0)

这将为您提供一个以分号分隔的文本字段中的文件路径。行和文件名将按每个组中第一项的更新时间排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:35:18.613

首先，您的标签是 PDO，因此如果您使用的 PDO 语法不正确

我会做这样的事情（如果我理解正确，你有点含糊）

```
$st= $db->prepare("SELECT * FROM database WHERE a=? ORDER BY d DESC");
$st->setFetchMode(PDO::FETCH_ASSOC);
$data=array($userid);
$st->execute($data);
while($something=$data->fetch()){

//handle $something as you want. 
} 
```

我建议对 id 执行类似 array unique(search it) 之类的操作，然后您将获得每个 id 的关联数组。

在这里，我还在这里找到了一些可能对您有帮助的东西（与我的评论并行）： [Array Unique with Associative Array - Remove Duplicates](https://stackoverflow.com/questions/4872378/array-unique-with-associative-array-remove-duplicates) 接受的答案可以解决您的问题。（+1那个人）

# php - php socket create_socket 块

> ID：12286926
> 
> 赞同：2
> 
> 时间：2012-09-05T17:40:51.187
> 
> 标签：php, sockets, ipc

PHP 当我调用 socket_create 时，它​​会阻塞并且没有任何反应。

这是代码。我从 php.net 复制它我使用 WebMatrix ， IIS Windows。（不是阿帕奇）

```
$address = '192.168.0.234';      

$port = 1000;
echo "address is : $address --- <br/><br/><br/>" ;

echo "before socket_create ... <br/> " ;
$sock = socket_create(AF_INET, SOCK_STREAM, SOL_TCP) ;
echo "after socket_create <br/> " ;

echo "before socket_bind() <br/> " ;
if (socket_bind($sock, $address, $port) === false) {
   echo "socket_bind() failed: reason: " . socket_strerror(socket_last_error($sock)) . "\n";
}

if (socket_listen($sock, 5) === false) {
    echo "socket_listen() failed: reason: " . socket_strerror(socket_last_error($sock)) . "\n";
}

?> 
```

当我运行它时，它只显示：在socket_create之前......然后什么也没发生帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:44:14.557

如果服务器的设置不允许 PHP 创建套接字，您可能想询问您的主机。

# html - 使用共享 url 的图像参数显示 facebook 共享图像的问题

> ID：12286927
> 
> 赞同：0
> 
> 时间：2012-09-05T17:40:53.967
> 
> 标签：html, facebook

我正在使用 facebook 分享 url，但无法显示 url 的图像参数，任何人都可以告诉我哪里可能出错了吗？

**HTML**

```
<a title="Share this on Facebook"
      href="http://www.facebook.com/sharer.php?
      s=100
&p[url]='http://www.test.com'
      &p[images][0]='http://www.meandmrsjoneshotel.com/wp-content/themes/child-theme/img/fb-thumbs/home.png'
      &p[title]='This is the title'
      &p[summary]='This is the share description'"
      target="_blank" class="fb ir">
      Share this page on Facebook
      </a>​ 
```

**JS 小提琴** [http://jsfiddle.net/pUMZb/](http://jsfiddle.net/pUMZb/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:06:18.567

尝试删除撇号。你的代码应该是这样的

```
<a title="Share this on Facebook"
      href="http://www.facebook.com/sharer.php?
      s=100
&p[url]='http://www.test.com'
      &p[images][0]=http://www.meandmrsjoneshotel.com/wp-content/themes/child-theme/img/fb-thumbs/home.png
      &p[title]='This is the title'
      &p[summary]='This is the share description'"
      target="_blank" class="fb ir">
      Share this page on Facebook
      </a>​ 
```

# python - python中搜索正文中多个项目的最快方法

> ID：12286928
> 
> 赞同：2
> 
> 时间：2012-09-05T17:41:01.390
> 
> 标签：python, list, search

我有一长串短字符串，我想在（通常）长字符串中搜索所有这些项目。我的列表的长度约为 500 个短字符串，我想使用 python 查找大约 10,000 个字符长的源文本中出现的所有内容。

这是我的问题的一个简短示例：

```
cleanText = "four score and seven years ago our fathers brought forth on this continent a new nation conceived in Liberty and dedicated to the proposition that all men are created equal"
searchList = ["years ago","dedicated to","civil war","brought forth"] 
```

我目前在 cleanText 中查找 searchList 中的项目的方法是：

```
found = [phrase for phrase in searchList if phrase in cleanText] 
```

这是python中最快的方法吗？它并不是很慢，但在规模上（searchList 中有 500 个项目，cleanText 的长度为 10,000 个字符），它似乎比我想要的要慢一些。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T17:43:09.230

你可以试试正则表达式。这可能会加快大型列表的速度：

```
import re
found = re.findall('|'.join(searchList),cleanText) 
```

（当然，这假设其中没有任何`searchList`内容需要转义`re`。）

* * *

正如评论中指出的（感谢 anijhaw），您可以通过以下方式进行转义：

```
found = re.findall('|'.join(re.escape(x) for x in searchList), cleanText) 
```

如果您将多次使用它，也可以预编译正则表达式，`re.compile`例如：。

```
regex = re.compile('|'.join(re.escape(x) for x in searchList))
found = regex.findall(cleanText) 
```

**免责声明**这些解决方案只能找到*不重叠的*匹配项。

# sql-server - 存储过程中的 BEGIN TRAN 和 COMMIT TRAN

> ID：12286931
> 
> 赞同：1
> 
> 时间：2012-09-05T17:41:10.970
> 
> 标签：sql-server, sql-server-2008, tsql, stored-procedures, transactions

我有一个如下所示的程序

```
BEGIN
    SET NOCOUNT ON

    IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'X')
        UPDATE TABLE X 
        SET ROW = 4
        WHERE NAME = 'STEVE'

    IF EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Y')
        UPDATE TABLE Y
        SET ROW = 5
        WHERE NAME = 'ART'
END 
```

如果我希望以原子性评估两个 IF 语句，是否需要添加 BEGIN TRAN 和 COMMIT TRAN 封装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:50:33.010

是的，如果您想要原子性，您将需要使用事务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:12:48.603

使用 BEGIN/END TRAN 不能保证两个 IF 语句都被评估。如果第一个 SELECT/UPDATE 因错误而失败，则可能不会执行第二个 SELECT/UPDATE。

但是 BEGIN/END TRAN 将保证两个 UPDATE 语句都被执行或都不执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T18:33:06.647

我认为您可能会遇到更深层次的问题 - 如果表 X 不存在，那么该过程将无法编译，因为您在 UPDATE 中有对它的引用

# java - 如何编写 Java 客户端代码以重试调用 Java Web 服务

> ID：12286941
> 
> 赞同：3
> 
> 时间：2012-09-05T17:41:41.080
> 
> 标签：java, web-services

我必须为其他方发布的 Web 服务编写 Java 客户端代码。在该客户端代码中，如果发生任何超时，我必须提供重试指定次数的选项。

在 web 服务调用中我传递了非持久对象，所以在重试过程中我认为应该保存这些对象。

代码示例将非常有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T08:36:18.700

AOP 和 Java 注释是正确的方法。我会推荐一个来自[jcabi-aspects](http://aspects.jcabi.com/annotation-retryonfailure.html)的已读机制（我是开发人员）：

```
import com.jcabi.aspects.RetryOnFailure;
@RetryOnFailure(attempts = 4)
public String load(URL url) {
  // sensitive operation that may throw an exception
  return url.openConnection().getContent();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:54:32.317

这应该可以帮助您入门（但绝对不是生产质量）。实际的 web 服务调用应该在一个类中，`Callable<T>`其中 T 是 web 服务预期的响应类型。

```
import java.util.List;
import java.util.concurrent.Callable;

public class RetryHelper<T>
{
    // Number of times to retry before giving up.
    private int numTries;

    // Delay between retries.
    private long delay;

    // The actual callable that call the webservice and returns the response object.
    private Callable<T> callable;

    // List of exceptions expected that should result in a null response 
    // being returned.
    private List<Class<? extends Exception>> allowedExceptions;

    public RetryHelper(
        int numTries,
        long delay,
        Callable<T> callable,
        List<Class<? extends Exception>> allowedExceptions)
    {
        this.numTries = numTries;
        this.delay = delay;
        this.callable = callable;
        this.allowedExceptions = allowedExceptions;
    }

    public T run()
    {
        int count = 0;
        while (count < numTries)
        {
            try
            {
                return callable.call();
            }
            catch (Exception e)
            {
                if (allowedExceptions.contains(e.getClass()))
                {
                    return null;
                }
            }
            count++;
            try
            {
                Thread.sleep(delay);
            }
            catch (InterruptedException ie)
            {
               // Ignore this for now.
            }
        }
        return null;
    }
} 
```

# objective-c - 如何返回一个数组

> ID：12286944
> 
> 赞同：-1
> 
> 时间：2012-09-05T17:41:59.817
> 
> 标签：objective-c, ios

我需要返回一个数组但不知道该怎么做，这是它的外观

```
CGPoint position[] = {
    CGPointMake(500, 200),             
    CGPointMake(500, 200)                         
};

return position; 
```

但我得到一个结果不兼容的错误。有什么办法可以解决这个错误？需要返回多个位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:45:03.630

你可以做这样的事情

```
NSArray *position = [NSArray arrayWithObjects:
                     [NSValue valueWithCGPoint:CGPointMake(500, 200)],
                     [NSValue valueWithCGPoint:CGPointMake(600, 300)],
                     nil]; 
```

从数组中获取值

```
for(int i=0; i<[position count]; i++) {
    NSValue *value = [position objectAtIndex:i];
    CGPoint point = [value CGPointValue];
    NSLog(@"%@",NSStringFromCGPoint(point);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:52:38.883

如果您不想使用`NSArray`，并且由于 CGPoint 是一个结构，您可以以 C 方式返回它

```
CGPoint *position = malloc(sizeof(CGPoint)*2);
position[0] = CGPointMake(500,200);
position[1] = CGPointMake(500,200);
return position; 
```

虽然缺点是调用函数不知道数组中元素的数量，但您可能需要以其他方式告诉它。

完成后，您还需要使用 free() 释放返回的数组；

虽然使用`NSArray/NSMutableArray`起来更方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:45:36.490

借助 UIKit，Apple 添加了对 CGPoint 到 NSValue 的支持，因此您可以：

```
NSArray *points = [NSArray arrayWithObjects:
                     [NSValue valueWithCGPoint:CGPointMake(5.5, 6.6)],
                     [NSValue valueWithCGPoint:CGPointMake(7.7, 8.8)],
                     nil]; 
```

列出与 CGPoint 一样多的 [NSValue] 实例，并以 nil 结束列表。此结构中的所有对象都是自动释放的。

另一方面，当您从数组中提取值时：

```
NSValue *val = [points objectAtIndex:0];
CGPoint p = [val CGPointValue]; 
```

# ruby-on-rails - 在 RoR 中使用现有的 Solr 索引

> ID：12286947
> 
> 赞同：0
> 
> 时间：2012-09-05T17:42:07.420
> 
> 标签：ruby-on-rails, ruby, solr, sunspot

我正在编写一个将替换旧应用程序的 Ruby on Rails 应用程序。我们有一个现有的 Solr 服务正在运行，我希望将其集成到我们的新 RoR 应用程序中。解决这个问题的最佳方法是什么？从我目前在网上了解到的情况来看，Sunspot 更适合在 Solr 中自动索引 Ruby 对象，而不是相反（集成已经存在的索引）？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:41:00.427

您可以检查太阳黑子所基于的[rsolr](https://github.com/mwmitchell/rsolr)，这将允许您查询现有索引。

# android - 在 android Activity（Android SQLite 数据库）中导入 .SQLite 文件

> ID：12286956
> 
> 赞同：0
> 
> 时间：2012-09-05T17:42:34.543
> 
> 标签：android, database, sqlite

我已经成功地创建了一个数据库程序。基本上我正在处理一个有点复杂的数据库，所以需要在 SQLITE MANAGER 中创建数据库并使用我的 android 代码导入/链接该数据库。请建议我教程来做到这一点。或任何其他对我有帮助的代码。谢谢

这是我的数据库代码现在我想在其中导入 mYdataBase.sqlite 文件。

```
public class DatabaseHandler extends SQLiteOpenHelper {
    private static final int DATABASE_VERSION = 1;
    private static final String DATABASE_NAME = "contactsManager";
    private static final String TABLE_CONTACTS = "contacts";
    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "name";
    private static final String KEY_PH_NO = "phone_number";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "(" + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT," + KEY_PH_NO + " TEXT" + ")";
        db.execSQL(CREATE_CONTACTS_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);

        // Create tables again
        onCreate(db);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:48:03.610

如果你想从资产文件夹中导入你的数据库文件，下面的代码可以帮助你

```
void checkDB() throws Exception {
        try {
            SQLiteDatabase dbe = SQLiteDatabase
                    .openDatabase(
                            "/data/data/com.yourpackagename/databases/yourfile.sqlite",
                            null, 0);
            Log.d("opendb", "EXIST");
            dbe.close();
        } catch (Exception e) {

            AssetManager am = getApplicationContext().getAssets();
            OutputStream os = new FileOutputStream(
                    "/data/data/com.yourpackagename/databases/yourfile.sqlite");
            byte[] b = new byte[100];

            int r;
            InputStream is = am.open("yourfile.sqlite");
            while ((r = is.read(b)) != -1) {
                os.write(b, 0, r);
            }
            Log.i("DATABASE_HELPER", "Copying the database ");
            is.close();
            os.close();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:45:15.693

尝试使用这个[http://codinglookseasy.blogspot.in/2012/08/sqlite-database.html](http://codinglookseasy.blogspot.in/2012/08/sqlite-database.html)。这是在应用程序中使用数据库的示例。希望这对你有帮助

# c# - 将类中的方法替换为扩展方法是否更有效？

> ID：12286957
> 
> 赞同：4
> 
> 时间：2012-09-05T17:42:34.480
> 
> 标签：c#, performance, extension-methods

[我使用这个](https://stackoverflow.com/a/724184/637142)非常快的方法递归地找到目录中的所有文件。

无论如何，我将信息存储在结构中的每个文件中：

```
struct Info 
{
    public bool IsDirectory;
    public string Path;
    public FILETIME ModifiedDate;
} 
```

**所以现在我正试图决定天气将辅助方法放置在该结构内或其他地方以提高效率。**

辅助方法是：

```
struct Info 
{
    public bool IsDirectory;
    public string Path;
    public FILETIME ModifiedDate;

    // Helper methods:
    public string GetFileName(){ /* implementation */ }
    public string GetFileSize(){ /* implementation */ }
    public string GetFileAtributes() { /* implementation */ }
    // etc many more helper methods
} 
```

我在内存中保存了数千个文件，我不知道在 Info 中使用这些方法是否会影响性能。换句话说，删除这些方法并将它们作为扩展方法会更好：

```
public static class ExtensionHelperMethods
{
    static public string GetFileName(this Info info){ /* implementation */ }
    static public string GetFileSize(this Info info){ /* implementation */ }
    static public string GetFileAtributes(this Info info) { /* implementation */ }
    // etc many more helper methods
} 
```

**所以我的问题是**，是因为`Info`实例结构然后在内部拥有这些方法会导致更多内存吗？如果`Info`是实例结构，那么每个方法在内存中都有不同的地址吗？

我已经尝试了这两种技术，但我似乎看不出有什么不同。也许我需要尝试更多的文件。

* * *

## 编辑

这是为了证明[@Fabio Gouw](https://stackoverflow.com/users/250329/fabio-gouw)是正确的：

```
// This program compares the size of object a and b
class Program
{
    static void Main(string[] args)
    {
        InfoA a = new InfoA();
        InfoB b = new InfoB();

        if (ToBytes(a).Length == ToBytes(b).Length)
        {
            Console.Write("Objects are the same size!!!");
        }

        Console.Read();
    }

    public static byte[] ToBytes(object objectToSerialize)
    {
        BinaryFormatter bf = new BinaryFormatter();
        MemoryStream memStr = new MemoryStream();

        try
        {
            bf.Serialize(memStr, objectToSerialize);
            memStr.Position = 0;

            var ret = memStr.ToArray();

            return ret;
        }
        finally
        {
            memStr.Close();
        }
    }

    [Serializable]
    struct InfoA
    {
        public bool IsDirectory;
        public string Path;
    }

    [Serializable]
    struct InfoB
    {
        public bool IsDirectory;
        public string Path;

        public string GetFileName()
        {
            return System.IO.Path.GetFileName(Path);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:49:46.100

方法不会影响对象大小，只有字段会影响（方法是行为；字段是数据，它们存储在内存中）。将它们放在 Info 类中或作为扩展方法的决定只是一个设计问题。

这个问题与您的问题相似：[将方法转换为静态方法时的内存使用情况](https://stackoverflow.com/questions/3120054/memory-usage-when-converting-methods-to-static-methods)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:52:32.117

我倾向于将结构限制为对象形状而不是行为。类更适用于行为。一个更大的潜在问题是您如何传递您的类型，特别是在将类型作为方法参数传递时注意装箱操作和堆栈/堆分配。

That being said, extension methods on classes are mostly syntactic sugar over calling the native static method. The compiler translates your extension method into a call to the Extension method, thus there shouldn't be a runtime performance difference between static and extension methods.

Extension methods do open up the possibility of shooting yourself in the foot if you later add a similar method to the underlying class/struct and find that the native method is used when you expected the extension method to be used. Also, Extension methods are harder to disambiguate as compared to fully qualified names or namespace aliases that you can use with normal static methods. For more information on how extension methods are compiled, see [http://www.thinqlinq.com/Post.aspx/Title/DLinq-Extension-Methods-Decomposed](http://www.thinqlinq.com/Post.aspx/Title/DLinq-Extension-Methods-Decomposed).

# php - PHP - 重新定义方法并调用同一方法的祖先版本

> ID：12286960
> 
> 赞同：5
> 
> 时间：2012-09-05T17:42:44.947
> 
> 标签：php, inheritance

我想重新定义一个方法，并调用它的祖先版本，而不是我父母的。

这是一个简短的例子：

```
// This class is autogenerated and I am not supposed to modify it.
class myParent extends myGrandparent {

  function doSomething() {
    doA();
    doB();
    doC();
    parent::doSomething();
  }

}

// Here is my code
class myClass extends myParent {

  function doSomething() {
    // doA();    // I don't want to do A anymore.
    // doB();    // Neither B.
    doC();       // But I want to keep doing C.
    parent::doSomething();      // OOPS!!  This does A and B (and C again)!
  }

} 
```

如何直接调用 myGrandparent 的方法，而不是 myParent 的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T18:06:50.870

我不同意“你不能这样做”的论点——你**可以**用[Reflection](http://www.php.net/reflectionclass)来做到这一点。

考虑以下类结构：

```
class A { 
    function foo() { 
        echo 'A'; 
    }
}

class B extends A { 
    function foo() { 
        parent::foo();  
        echo 'B'; 
    }
}

class C extends B { 
    function foo() { 
        parent::foo();
        echo 'C'; 
    }
} 
```

用这个初始化时：

```
$o = new C;
$o->foo(); 
```

将打印（如预期的那样，在[这个演示](http://viper-7.com/eVURAX)中看到）：

```
ABC 
```

挑战是`B`从输出中删除 's ，有效地只执行`A`'s`foo()`和`C`'s `foo()`。所以，让我们进入 Reflection 和 grab`A`的方法，然后在的对象`foo()`上调用它。`C`现在考虑这个替代定义`C`：

```
class C extends B { 
    function foo() { 
        $ref = new ReflectionClass( $this);
        $parent = $ref->getParentClass()->getParentClass();
        $parent->getMethod( 'foo')->invoke( $this);
        echo 'C'; 
    }
} 
```

现在，您只会得到输出（如[本演示](http://viper-7.com/kOPJQg)所示）：

```
AC 
```

这是否是“良好做法”，取决于 OP。我想我已经证明可以“跳过”`B`函数的实现并从孙子类调用祖父函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-08T17:21:24.330

不确定用例是什么，但除非我误解了问题/问题（很可能），否则您完全可以调用任何任意祖先（公共或受保护）方法，无论其被覆盖多少次，甚至默认任何祖先成员属性（公共或受保护）的值，即使它也已被覆盖。例如，对于类层次结构：

**Papa > Mama > Baby > Infant**，其中方法**sayWhat()**和实例变量**$el**在每个后代类中都被覆盖，您可以从 Infant 调用任何祖先 sayWhat 方法，并访问不同的祖先默认属性值：

```
class Papa {
  protected $el = 'PapaEl';
  protected function sayWhat($className = null) {
    if (!$className) {
      $className = get_class($this);
    }
    $classVars = get_class_vars($className);
    $localEl = $classVars['el'];
    echo "<h2>What is PAPA!. El: [$localEl]</h2>";
  }
}

class Mama extends Papa {
  protected $el = 'MamaEl';
  protected function sayWhat() {
    echo "<h2>What is MAMA! El: [$this->el]</h2>";
  }
}

class Baby extends Mama {
  protected $el = 'BabyEl';
  protected function sayWhat() {
    echo "<h2>What is Lil' Baby!! El: [$this->el]</h2>";
  }
}

class Infant extends Baby {
  protected $el = 'InfantEl';
  protected function sayWhat($className) {
    Papa::sayWhat($className);
  }

  public function mySayWhat($className) {
    $this->sayWhat($className);
  }
}
$i = new Infant();
$i->mySayWhat('Mama'); 
```

输出：

> 什么是爸爸！艾尔：[妈妈艾尔]

不确定它有什么价值，但如果有人有要求，它似乎非常可行......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:48:13.433

你真的不能。您需要直接从 myGrandParent 扩展，或者需要重新编写 MyParent 中的逻辑以提供对 myGrandParents 方法的“直通”访问。例如，您可以像这样在 myParent 上创建一个方法：

```
function doSomethingGrandparent() {
    parent::doSomething();
} 
```

然后像这样更改 myClass 中的 doSomething 方法：

```
function doSomething() {
    parent::doSomethingGrandparent();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T17:54:03.743

答案是否定的，你不能。子级重新声明该方法的父级功能并完全覆盖它。

我认为静态方法是必需的，因为您不能将 parent:: 关键字链接到“祖父母”类，因此 parent::parent::foo( ) 不起作用。

# regex - 在 Vim 中查找和替换，重用令牌

> ID：12286968
> 
> 赞同：8
> 
> 时间：2012-09-05T17:43:40.437
> 
> 标签：regex, vim, replace

我在制作适当的查找/替换正则表达式以在 Vim 中使用时遇到问题。

这是一些 SQL：

```
select avg(field_name1), avg(field_name2), avg(field_name3) from a_table 
```

糟糕，我忘了给结果加上别名：

```
select avg(field_name1) field_name1,
avg(field_name2) field_name2, avg(field_name3) field_name3 from a_table 
```

所以，在 Vim 中，我确信有一个方便的查找和替换来匹配任意`[a-z]\+_[a-z]\+`内括号，但我不知道如何在整个匹配之后放置该标记

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-05T17:46:10.640

尝试以下操作：

```
:s/(\(.*\))/(\1) \1/g 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T17:51:16.390

将要在替换/替换中使用的文本分组，并使用,等`\(\)`在替换中引用这些反向引用。`\1``\2`

用于`[:alnum:]`匹配字母数字字符：

```
:s/(\([[:alnum:]]\+_[[:alnum:]]\+\))/(\1) \1/g 
```

要将任一正则表达式应用于整个文件，请使用：

```
:%s/(\([[:alnum:]]\+_[[:alnum:]]\+\))/(\1) \1/g 
```

`:help \1`有关使用反向引用的更多详细信息，另请参阅。

# python - 使用拆分写入多维数组

> ID：12286969
> 
> 赞同：0
> 
> 时间：2012-09-05T17:43:47.020
> 
> 标签：python, multidimensional-array, python-3.x

我正在尝试使用 python 来解析一个文本文件（存储在 var trackList 中），其中包含时间和标题，看起来像这样

```
00:04:45 example text
00:08:53 more example text
12:59:59 the last bit of example text 
```

我的正则表达式 (rem) 有效，我还能够正确地将字符串 (i) 拆分为两部分（如我将时间和文本分开），但我无法添加拆分返回的数组（使用 .extend）到我之前创建的一个大数组（sLines）。

```
f=open(trackList)
count=0
sLines=[[0 for x in range(0)] for y in range(34)]   
line=[]

for i in f:
    count+=1
    line.append(i)
    rem=re.match("\A\d\d\:\d\d\:\d\d\W",line[count-1])
    if rem:
        sLines[count-1].extend(line[count-1].split(' ',1))
    else:
        print("error on line: "+count) 
```

该代码应该遍历文件 trackList 中的每一行，测试该行是否符合预期，如果是，则将时间与文本分开，并将结果作为数组保存在数组中，索引小于 1当前行号，如果没有打印错误，将我指向该行

我使用`array[count-1]`的 python 数组是零索引的，而文件行不是。

我`.extend()`希望在父 for 循环的同一迭代中将较小数组的两个元素都添加到较大数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:00:06.170

所以，你有一些相当混乱的代码。

例如做：

```
[0 for x in range(0)] 
```

是一种非常奇特的初始化空列表的方式：

```
>>> [] == [0 for x in range(0)]
True 
```

另外，你怎么知道得到一个 34 行长的矩阵？您还对在 for 循环中调用行“i”感到困惑，通常这将保留为索引的简写语法，您希望它是一个数值。当您已经拥有行变量 (i) 时，将 i 附加到 line 然后将其重新引用为 line[count-1] 是多余的。

您的整体代码可以简化为如下所示：

```
# load the file and extract the lines
f = open(trackList)
lines = f.readlines()
f.close()

# create the expression (more optimized for loops)
expr   = re.compile('^(\d\d:\d\d:\d\d)\s*(.*)$')
sLines = []

# loop the lines collecting both the index (i) and the line (line)
for i, line in enumerate(lines):
    result = expr.match(line)

    # validate the line
    if ( not result ):
        print("error on line: " + str(i+1))
        # add an invalid list to the matrix
        sLines.append([])  # or whatever you want as your invalid line
        continue

    # add the list to the matrix
    sLines.append(result.groups()) 
```

# asp.net - 从网格项绑定列之一传递查询字符串

> ID：12286971
> 
> 赞同：0
> 
> 时间：2012-09-05T17:43:53.730
> 
> 标签：asp.net, asp.net-ajax

我有一个gridview，gridview中的一项是

```
<asp:GridBoundColumn DataField="Id"  UniqueName="Id" DataType="System.Int32"   Visible="false"></asp:GridBoundColumn> 
```

另一个项目是

```
 <asp:ImageButton id="RadButton_RunQuery" ImageUrl="~/images/run_query_button.jpg" PostBackUrl="~/Viewer/ViewerSummary.aspx?QueryID=" runat="server" /> 
```

想要将 Id`asp:GridBoundColumn`作为查询字符串传递到`asp:imageButton`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:51:31.560

您可以尝试使用此代码

```
PostBackUrl='<%# "~/Viewer/ViewerSummary.aspx?QueryID=" + DataBinder.Eval(Container.DataItem,"ID") %>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:55:39.007

由于您使用的是 ImageButton，因此这意味着您使用的是 ItemTemplate。你可以这样做：

```
<asp:TemplateField>
<ItemTemplate>
  <asp:ImageButton id="RadButton_RunQuery" ImageUrl="~/images/run_query_button.jpg" 
   PostBackUrl='<%#string.Format("~/Viewer/ViewerSummary.aspx?QueryID={0}",Eval("Id")) %>' runat="server" />
</ItemTemplate>
</asp:TemplateField> 
```

# html - CSS HTML 下拉菜单未显示全文且文本未对齐

> ID：12286972
> 
> 赞同：0
> 
> 时间：2012-09-05T17:44:10.110
> 
> 标签：html, css

我编辑了这篇文章，因为它部分解决了我的问题。但是，我现在面临一个新问题，我不希望创建一个新问题，以防它被认为是垃圾邮件。目前，即使我在#menu li li a 中将其指定为文本对齐中心，我的添加主题、删除主题、删除主题、手动抓取也没有集中。子菜单的执行摘要也被切断。我可以知道如何扩展子菜单并集中所有文本吗？
谢谢！

这是我的代码（我真的很抱歉，因为我没有 jsfiddle 帐户并且在等待名单上）：

**HTML**

```
<div id="menu">
<ul>
    <li><a href="#" >Home</a></li>
    <li><a href="#" >Executive Summary</a></li>
    <li><a href="#" > Visual Analytics</a></li> 
    <li><a href="#" >Settings</a>
        <ul>                                        
            <li><a href="#">Add Subject</a></li>
            <li><a href="#">Delete Subject</a></li>
            <li><a href="#"> Edit Subject</a></li> 
            <li><a href="#" >Manual Crawl</a></li>
            <li><a href="#" >Executive Summary</a></li>
        </ul>
    </li>
</ul> 
```

​</p>

**CSS**

```
 #menu {
    position: relative;
    float: left;
    width: 1200px;
    height: 35px;
    font-family: Arial, Helvetica, sans-serif; 
    font-size: 13px;
    padding: 0;
    background: #000;
    text-align: center;
}

#menu ul {
    position: relative;
    list-style: none;
    display: inline-block;
    margin: 0;
    padding: 0;
}

#menu li {
    position: relative;
    float: left;
    height: 100%;
    padding: 0;
    line-height: 35px; 
}

#menu a {
    position: relative;
    height: 100%; 
    width: auto;
    float: left;
    text-decoration: none;
    padding: 0 0 0 25px; 
    margin: 0 3px;
    color: #fff;
    text-align: center;
}

#menu ul ul {
   display: none;
   width: 10em; /* Width to help Opera out */
   background-color: rgba(0,0,0,0.5);
}

#menu li:hover ul {
    display:block;
   position: absolute;
   top: 35px;
   left: 0;
   margin: 0;
   padding: 0;
   z-index: 1; 
}

#menu li li a{
    height: 35px; 
    width: 100%;
    float: left;
    text-decoration: none;
    padding: 0 0 0 25px; 
    margin: 0 3px;
    color: #fff;
    text-align: center;
}

#menu li li a:hover{
   background: rgba(255,255,255,0.5);
} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:13:18.667

这应该让你运行：

```
#menu ul, #menu li {
    list-style:none;
    margin:0;
    padding:0;   
}

#menu ul li {
   float:left;
   position:relative;
}
#menu ul li a {
   display:block;
   height:35px;
   margin-right:5px;
}
#menu ul li ul {
   display: none;
   background-color: rgba(0,0,0,0.5);
}
#menu ul li:hover ul, #menu ul li.hover ul {
   display: block;
   position: absolute;
   top:40px;
   left:0   
   margin: 0;
   padding: 0;
   z-index:1;
}

#menu ul li ul li a {
   display:block;
   height:35px;
   width:130px
   background-color: rgba(0,0,0,0.5);
}
#menu ul li ul li a:hover{
   background:rgba(255,255,255,0.5);
} 
```

您错过的一件事是为`position:relative`子菜单的父级设置。这很重要，因为这会重置子项的原点。我还清理了一些东西并删除了一些多余的声明。您可能需要稍微重新设置文本样式。

重要一点：菜单的所有样式（定位除外）都应应用于 A-tag，而不是 LI。这包括字体。bg 颜色等

见： http: [//preview.moveable.com/jm/ilovelists/](http://preview.moveable.com/jm/ilovelists/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T18:18:45.290

使用`position: relative`和的组合`position: absolute;`来解决您的问题
请参阅 JsFiddle [http://jsfiddle.net/VDmJj/1/](http://jsfiddle.net/VDmJj/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T18:28:26.920

添加 ：

1) 位置：相对；到#menu ul li
2) top:30px; 左：10px；到#menu ul li:hover ul, #menu ul li.hover ul
3) 宽度:180px; 到#menu ul li ul（这可能取决于子菜单项）

通过进行最小的更改，这将为您提供所需的结果。尽管 css 对于它正在执行的任务来说有点复杂，即它可以通过以下方法非常简单地完成：

[http://jsfiddle.net/tPBmV/](http://jsfiddle.net/tPBmV/)

这是我基于 jquery 找到的另一个小提琴。

[http://jsfiddle.net/davidThomas/YfjzP/](http://jsfiddle.net/davidThomas/YfjzP/)

它不是由我制作的，但如果您对实现 jquery 足够熟悉，您会发现它很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T18:13:22.213

### 看看小提琴。做了很多 CSS 更改：http: [//jsfiddle.net/wAGGA/](http://jsfiddle.net/wAGGA/)

### CSS：

```
 #menu {
   width:1200px;
height:35px;
padding:0px;
clear:both;
background-color:#000;
 }
 #menu ul{
list-style:none;padding:0 0 0 400px;margin: auto;display:block;
}

#menu ul li {
   list-style:none;display:inline;float:left;width:auto;height:35px;padding:0px;line-height:35px; font-family:Arial, Helvetica, sans-serif; font-size:13px; }
#menu ul li a{
   display:block;height:35px; width: auto;float:left;text-decoration:none;padding:0 0 0 25px; margin:0px 3px 0px 3px;color:#fff;text-align:center;}
#menu ul li ul {
   display: none;
   width: 200px; /* Width to help Opera out */
   background-color: rgba(0,0,0,0.5);}
#menu ul li:hover ul, #menu ul li.hover ul {
   display: block;
   position: absolute;
   margin: 0;
   padding: 0;
   z-index:1;
   top: auto;
    margin-top: 35px;
    right: 0;
}
#menu ul li ul li {display: block; float: none; width: 100%}   
#menu ul li ul li a{
   display:block;
    height:35px; 
    text-decoration:none;
    padding:0 0 0 25px; 
    margin:0px 3px 0px 3px;
    color:#fff;
    text-align:center;
}
   #menu ul li ul li a:hover{
   background:rgba(255,255,255,0.5);
   }​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T18:20:32.213

像这样将margin-top添加到子菜单

```
#menu ul li:hover ul, #menu ul li.hover ul{
margin-top:40px
} 
```

# html - 使用文本节点时，我应该使用“data”、“nodeValue”、“textContent”还是“wholeText”字段？

> ID：12286975
> 
> 赞同：50
> 
> 时间：2012-09-05T17:44:31.263
> 
> 标签：html, dom, cross-browser, textnode

> **可能重复：**
> [如何检索 DOM 文本节点的文本？](https://stackoverflow.com/questions/7690627/how-to-retrieve-the-text-of-a-dom-text-node)

在我处理 DOM 突变观察者的实验中，我注意到当`target`是一个文本节点时，有四个字段都包含该节点的新文本。

*   `data`
*   `nodeValue`
*   `textContent`
*   `wholeText`

对于我应该使用哪些字段，是否有“最佳实践”？

有些只是为了与其他浏览器或旧 DOM 标准兼容？我是在阅读还是在修改文本有区别吗？如果一个是最好的，其他的目的是什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-05T17:57:42.567

在所有这些中，我会选择`data`：它是为实现[**CharacterData**](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-FF21A306)接口（[**文本**](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-1312295772)和[**注释**](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-1728279322)接口）的节点定义的。尝试为其他人访问此属性会给出`undefined`.

[nodeValue](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeValue)本质上与`data`文本节点相同，但实际上也是为属性和注释节点定义的。而且我通常希望我的程序尽早失败。)

[textContent](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)对我来说是完全不同的东西，因为它代表节点*及其后代*的文本内容。这与[wholeText 一起](https://developer.mozilla.org/en-US/docs/DOM/Text.wholeText)，也许应该更多地用于从更复杂的结构中收集文本，而不是单个文本节点。

说了这么多，`textContent`并`wholeText`在 DOM Level 3 中定义（=更现代）。

# c# - 其中 T ：类到 VB

> ID：12286976
> 
> 赞同：2
> 
> 时间：2012-09-05T17:44:33.010
> 
> 标签：c#, vb.net

我正在尝试将其转换为：

```
public virtual IDbSet DbSet() where T : class 
```

对此

```
Public Overridable Function DbSet() As IDbSet(Of T As Class) 
```

但它不编译。')' 预期为 As（在“As Class”中）

请告诉我我做错了什么。

我正在尝试让 EF Code First 在 VB 中工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T17:49:23.350

正确的语法是：

```
public virtual IDbSet<T> DbSet() where T : class 
```

和

```
Public Overridable Function DbSet(Of T As Class)() As IDbSet(Of T) 
```

# tfs - 当被告知时，TFS.exe 命令行似乎不会将所有输出重定向到文件

> ID：12286977
> 
> 赞同：3
> 
> 时间：2012-09-05T17:44:32.863
> 
> 标签：tfs, command-line-arguments

背景：我们有一台从 TFS 获取并构建项目和许多安装（包括 Installshield）的构建机器。我想扫描 TFS get 命令的输出以突出显示该过程中的任何本地文件错误或警告。

问题：使用时

```
tf.exe get /force /recursive >>mylogfile.txt 
```

我得到了一个非常大的成功项目日志文件，但最后它说

```
---- Summary: 0 conflicts, 0 warnings, 1 errors ---- 
```

错误似乎从日志文件的内容中丢失，但出现在命令行窗口中。

有什么方法可以让 tf.exe 将所有警告和错误输出到我的日志文件中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T17:55:16.237

改用这个：

```
tf.exe get /force /recursive 1> mylogfile.txt 2>&1 
```

tf.exe 在 STDERR 流上输出错误，而默认重定向仅捕获 STDOUT 流，将 STDERR 留在命令提示符中（这就是您看不到错误的原因）。上面的语法将 STDERR 重定向到 STDOUT，然后将 STDOUT 重定向到文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T17:56:20.257

如何将 stderr 与 stdio 一起重定向？

```
tf get /force /r > mylogfile.txt 2>&1 
```

# javascript - 骨干：用相同的数据填充多个下拉列表？

> ID：12286979
> 
> 赞同：2
> 
> 时间：2012-09-05T17:44:36.630
> 
> 标签：javascript, backbone.js, backbone-views

我正在使用骨干网，这是我拥有的静态数据：

```
var emailfields = new EmailFields([
    new EmailField({ id: "data-email", name: "Email" }),
    new EmailField({ id: "data-first-name", name: "First Name" }),
    new EmailField({ id: "data-last-name", name: "Last Name" }), 
]); 
```

我想创建 n (n > 1) 填充相同数据（电子邮件字段）的下拉列表。如果选择了任何值，我想通知用户他不能再次选择相同的字段。

这是我的看法：

```
EmailFieldSelectView = Backbone.View.extend({

    initialize: function() {
        _.bindAll(this, "addSingleEmailField", "add");
        this.add();
    },

    addSingleEmailField: function(emailfield) {
        $("select").each(function() { 
            $(this).append(new EmailFieldView({ model: emailfield}).render().el);
        });
    },

    add: function() {
        this.collection.each(this.addSingleEmailField);
    },

}); 
```

这是我的初始化：

```
window.emailview = new EmailFieldSelectView({
    collection: emailfields
}); 
```

为了使用相同的数据填充每个选择，我使用 $("select").

有没有更好的方法来做到这一点（我觉得这看起来像一个黑客）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:39:47.363

你所拥有的似乎是一种处理事情的合理方式。您可以使用模板来减少 javascript，并需要一个视图来创建选择列表选项。

```
<script type="text/template" id="exampleTemplate">

  <select id="list1">
  <% _(emailFields).each(function(emailField) { %>
    <option value="<%= emailField.id %>"><%= emailField.name %></option>
  <% }); %>
  </select>

  <select id="list2">
  <% _(emailFields).each(function(emailField) { %>
    <option value="<%= emailField.id %>"><%= emailField.name %></option>
  <% }); %>
  </select>

  etc.

</script> 
```

然后视图变成-

```
EmailFieldSelectView = Backbone.View.extend({
  template: _template($('#exampleTemplate').html());

  initialize: function() {
      _.bindAll(this, "addSingleEmailField", "add");
      this.render();
  },

  render: function() {
    this.$el.html(this.template({ emailFields: this.collection.toJSON() }));
    return this;  
  }

}); 
```

# matlab - MatLab - 具有缩放行旋转的高斯消除

> ID：12286980
> 
> 赞同：1
> 
> 时间：2012-09-05T17:44:38.683
> 
> 标签：matlab, matrix, factorization

我正在尝试编写一个函数，该函数通过缩放行旋转执行高斯消除。我几乎是对的，但我的答案并不完全正确，所以我的代码一定有问题。我已经写了：

```
function [B,h] = factorization(A)
n = length(A);
p = zeros(1,n);
s = zeros(1,n);
for i = 1:n
    p(i) = i;
    s(i) = max(abs(A(i,1:n)));
end
for k = 1:(n-1)
    m = abs(A(k:n,k));
    q = length(m);
    v = zeros(1,q);
    w = s(k:n);
    for j = 1:q
        v(j) = m(j)/(w(j));
    end
    [pivot,pivot] = max(abs(v(1:end)));
    if pivot ~= 1
        var = p(k);
        p(k) = p(pivot);
        p(pivot) = var;
    end
    for i = (k+1):n
        z = A(p(i),k)/A(p(k),k);
        A(p(i),k) = z;
        for j = (k+1):n
            A(p(i),j) = A(p(i),j) - z*A(p(k),j);
        end
    end
end
B = A;
h = p; 
```

然后说我使用矩阵`A = [2 3 -6; 1 -6 8; 3 -2 1]`作为输入。我的代码给了我输出： `B = [0.6667 -0.8125 -0.4375; 0.3333 -5.3333 7.6667; 3 -2 1], h = [3 2 1]`. 然而，正确的答案应该是： `B = [0.0007 4.3333 -6.6667; 0.3333 -1.2308 -0.5385; 3 -2 1], h = [3 1 2]`

我看不到我在代码中做错了什么，所以如果有人可以帮助我，我将非常感激！

# java - 如何重构具有相同结构、不同类的方法（Java）

> ID：12286982
> 
> 赞同：2
> 
> 时间：2012-09-05T17:44:39.830
> 
> 标签：java, generics, refactoring, abstract, fileinputstream

重构具有相同逻辑但使用不同类的方法的最佳方法是什么（在 Java 中）？比方说

```
Method1(FileInputStream obj, OutputStream o){
  //stuff
  while(something){
    //---
    //some code
    //---
    obj.read();
    //---
    //some code
    //---
    o.write(..);
    //code
  }
  //code
} 
```

然后我有

```
Method2(InputStreamReader obj, OutputStreamWriter os){
  //stuff
  while(something){
    //---
    //some code
    //---
    obj.read(..);
    //---
    //some code
    //---
    os.write();
    //code
  }
  //code
} 
```

一种方法处理二进制文件，另一种处理文本。理想情况下，我想要的是拥有一个读取-处理-写入并隐藏所有特定信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:58:06.917

最好的方法是使用正确的接口：

```
void method2(Reader obj, Writer os){
   // code...   
} 
```

然后像这样使用它`InputStreams`

```
method2(new InputStreamReader(fileInputStream), new OutputStreamWriter(outputstream)); 
```

**为什么这样更好？**

这更好，因为您正在抽象出该方法的工作方式。您是说您不在乎实现是什么，只要它符合`Reader`or `Writer`。因此，将 an 更改`InputStream`为 a是用户的责任`Reader`。*不是你*的。如果有一个异常被抛出，那么你**不需要**捕捉它。它在客户端代码中抛出。这是一个重要的注意事项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:47:15.180

你不能读写相同的东西，所以它们除了名字之外没有任何共同之处。使它们通用的唯一方法是将二进制和文本编写为二进制，即无论如何它最终都变成了二进制。

# java - Map.keySet 和 Map.values 的迭代顺序相同？

> ID：12286986
> 
> 赞同：14
> 
> 时间：2012-09-05T17:45:06.677
> 
> 标签：java, collections

对于像这样的地图：

```
Map<Integer, Integer> map = ...;
map.put(1, 1);
map.put(2, 2);
map.put(3, 3);
map.put(4, 4); 
```

这是代码吗...

```
for (Integer i : map.keySet()) System.out.println(i);
for (Integer i : map.values()) System.out.println(i); 
```

...保证两次打印相同的序列？

如果没有，例如是否有任何保证`java.util.HashMap`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-05T17:48:07.457

不，不能保证，尽管在实践中它会发生（地图没有充分的理由为键和值使用不同的迭代器）。

如果要保证迭代顺序，请迭代`entrySet()`：

```
for (Map.Entry<Integer,Integer> entry : map.entrySet())
    // ... 
```

由于您询问`HashMap`，还请注意，由于地图被重新散列，对地图的任何更改都可能会更改迭代顺序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-05T17:48:18.813

不，不保证。一是`Set`一是`Collection`，都不保证顺序。

如果你想保持秩序。可能会`LinkedHashMap()`帮助`entrySet()`你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-05T18:07:00.680

是的。有点。您可以使用[SortedMap](http://docs.oracle.com/javase/6/docs/api/java/util/SortedMap.html)的子类，即[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)。这将使密钥保持自然顺序。（或者你可以给它一个特定的比较器）。但是当您使用树形图时，您必须确保 compareTo 方法“必须与 equals 一致”。阅读 javadocs 了解更多详情。但简而言之，是的，您可以对地图进行排序。

# python - 此控制台消息在 Google App Engine 中的含义是什么

> ID：12286987
> 
> 赞同：4
> 
> 时间：2012-09-05T17:45:10.140
> 
> 标签：python, google-app-engine, app-engine-ndb

我正在使用具有大量异步操作和产量的 Google App Engine NDB。控制台向我显示此消息：

> tasklets.py:119] all_pending: clear set([Future 106470190 created by dispatch(webapp2.py:570) for tasklet post(sync.py:387); pending])

这是某种警告吗？它应该被忽略吗？它不会导致任何异常行为。

（sync.py 是我的文件之一，但其他东西不是我的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T15:00:07.647

如果您在进入 ndb.toplevel 函数之前正在进行异步操作，这似乎会发生。

我的猜测是，这会警告您在请求结束时不会等待这些异步操作。如果您希望它们包含在您的“顶级”函数中，并且它们是等待操作完成后再执行更多操作的小任务，这可能是一个问题。

# iphone - 选择单元格时如何删除 UITableView 组样式的圆角背景？

> ID：12286989
> 
> 赞同：0
> 
> 时间：2012-09-05T17:45:13.790
> 
> 标签：iphone, objective-c, ios, uitableview

我正在使用具有组样式的 UITableView。我做了一些特定的更改，单元格的正常视图在分组时不再有圆角。我想删除它，只使用简单的选择样式。我尝试为返回的单元格设置为`selectedBackgroundView`，但它没有改变任何东西。我还必须设置其他东西来获得这种行为吗？`nil``-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath`

作为旁注，我确实必须使用组样式，我知道这很奇怪，我基本上希望它在选择时表现得像一个简单的样式表，但是我想要组样式表固有的某些行为，而不是外观.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:29:59.883

我实际上并没有将 selectedBackgroundView 设置为 nil，而是添加了一个实际的 UIView。这似乎可以替换它。现在我只需要找出如何让它看起来像普通的，但这至少解决了我最初的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T17:52:57.003

```
#import <QuartzCore/QuartzCore.h> 
```

**然后使用**

```
CALayer * layer = [table layer];
        [layer setMasksToBounds:YES];
        [layer setCornerRadius:0.0]; //note that when radius is 0, the border is a rectangle
        [layer setBorderWidth:3.0];
        [layer setBorderColor:[[UIColor whiteColor] CGColor]]; 
```

# javascript - 文件上传时 IE 中的访问被拒绝错误

> ID：12286993
> 
> 赞同：4
> 
> 时间：2012-09-05T17:45:24.993
> 
> 标签：javascript, asp.net-mvc, internet-explorer, file-upload

我目前正在.NET MVC 平台下开发一个新站点，我正在尝试通过 iframe 实现异步用户上传图像。虽然我几乎完成了我的任务并且在任何其他浏览器中都可以正常运行，但在 IE 9 中失败并出现以下错误：`Microsoft JScript runtime error: Access is denied.`它看起来像一个安全问题。请允许我使用以下带有注释的代码片段来描述我的问题： 1\. 我有一个带有输入文件的 html 表单，它的可见性是隐藏的。在表单内部有一个输入元素`type="file"`和一个提交按钮（也隐藏）。

```
<div class="brandLogo">
<p>@identity._RetailerLogo.Caption</p>
<div id="LogoContainer" class="imgLogo">
    <img id ="CompanyLogo" src="@DefaultRetailerImage" alt="" title="@Model._ADD_LOGO_IMAGE">
</div>
<p class="txtR">
<a id="UploadLogo" href="#" style="position: absolute; left: -999em; top: -999em;">Upload
</a>
</p>

<form id="UploadForm"
    action="@Url.Action("editLogo", "Profile")"
    method="POST" enctype="multipart/form-data"
    name="UploadForm"
    target="UploadTarget"
    style="position: absolute; left: -999em; top: -999em;">
<input name="UploadLogoFile" id="UploadLogoFile" type="file" onchange="clickUploadButton();" />
<input type="button" id="SubmitLogoForm" value="Save Image" />
</form>

<iframe id="UploadTarget" onload="UploadImage_Complete();" name="UploadTarget" style="position: absolute;
left: -999em; top: -999em;"></iframe> 
```

1.  html 表单尝试通过 javascript 将文件发布到 iframe。form 和 iframe 都在我的本地项目（asp.net mvc）上，位于同一域下（我在 localhost 下运行）。

2.  我在输入元素上使用 on change 事件来捕获该用户选择的内容并触发使用 ajax 调用提交表单。因此，当我通过 javascript 调用时： `$("#formID").submit()`我收到拒绝访问错误。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:18:01.670

我之前看到过这个 IE 错误，最后我改变了我的方法。以编程方式触发输入元素的更改事件被 IE 视为安全风险:(（太愚蠢的 IE）

默认情况下 IE 不会让你触发文件元素更改，如果你想要这个功能可以使用[ajaxuploader](http://ajaxuploader.com/) 或[fileuploader](https://github.com/valums/file-uploader)

```
var uploader = new qq.FileUploader({
// pass the dom node (ex. $(selector)[0] for jQuery users)
element: document.getElementById('file-uploader'),
// path to server-side upload script
action: '/server/upload'
}); 
```

# jquery - 简单的 jQuery textarea 在加载时不会扩展

> ID：12286996
> 
> 赞同：0
> 
> 时间：2012-09-05T17:45:41.263
> 
> 标签：jquery, textarea, expand

下面是一个用 jQuery 编写的简单 textarea 脚本，它扩展每个 textarea 以适应用户键入的内容。

```
$(document).ready(function() {
    $('textarea').keyup(function() {
       var addin = 0;
       var txtheight = $(this).scrollTop();
       if(txtheight > 0){ addin = 4; }
       $(this).height(($(this).height() + txtheight + addin));
    });
    $('textarea').keyup();
}); 
```

问题是，如果 textarea 的初始内容大于一行，则 textarea 不会扩展以适应加载时的内容，因为无法计算滚动位置。

任何想法如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:57:29.390

你为什么不试试这个插件？

[http://www.jacklmoore.com/autosize](http://www.jacklmoore.com/autosize)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:00:31.950

您可以尝试以下方法

```
$(document).ready(function() {
    $('textarea').each(function() {
       var addin = 0;
       var txtheight = $(this).prop("scrollHeight") -  $(this).height();
       if(txtheight > 0){ addin = 4; }
       $(this).height(($(this).height() + txtheight + addin));
    });
    $('textarea').keyup(function() {
       var addin = 0;
       var txtheight = $(this).scrollTop();
       if(txtheight > 0){ addin = 4; }
       $(this).height(($(this).height() + txtheight + addin));
    });
    $('textarea').keyup();
});​ 
```

但是，看起来低于 IE8 的任何东西都不支持滚动高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T18:26:55.227

```
$('textarea').each(function() {
        $(this).height($(this).prop('scrollHeight'));
    });
    $('textarea').keyup(function() {
       var addin = 0;
       var txtheight = $(this).scrollTop();
       if(txtheight > 0){ addin = 4; }
       $(this).height(($(this).height() + txtheight + addin));
    }); 
```

正确使用`'scrollHeight'`丹尼概述的。

# ios - UIViewController 不旋转到横向

> ID：12286998
> 
> 赞同：0
> 
> 时间：2012-09-05T17:45:41.747
> 
> 标签：ios, uiviewcontroller, ios4

在许多情况下需要旋转控制器并且不工作。现在我遇到了问题的反面：它正在旋转，我想禁用。

在那个 ViewController 我有这个：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);
} 
```

但它是自动旋转的，因为不是这个 UIViewController 被问到，而是他在 UI 树中的父级。也许这就是问题所在。**对于所有情况，根控制器都必须返回 Yes，因为堆栈上还有一些其他 UIViewController，它们具有 / 必须具有 Portait / Landscape 支持。**

我不能/不想触摸其他部分，因为......有几个原因，例如：应用程序很大，有很多已知的错误，我不想做 1 并测试它为 1周，其他是最后期限。

请不要建议它不应该这样，必须重写。我知道。

如何处理这个控制器强制Portait？

也请阅读粗体文本：**不能强制整个应用程序仅支持 1 个视图控制器的 Portait，堆栈上有很多！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T18:03:20.053

尝试在属性文件中将应用程序支持的界面方向标记为仅纵向。但是当然，在该函数中，您只需在要允许旋转的视图控制器上返回 YES 即可。但是当你将它推回堆栈时，其他视图应该是纵向的。

![仅纵向方向](../Images/3ed3f209e4c4e11bc6d2651c201fb7f8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:03:25.877

检测Landscape旋转并旋转到Portait：

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{ 

    UIInterfaceOrientation appOrientation = [UIApplication sharedApplication].statusBarOrientation;
    float width = self.view.bounds.size.width;
    float height = self.view.bounds.size.height;
    //NSLog(@"width %3.0f, height: %3.0f", width, height);

    if((fromInterfaceOrientation == UIInterfaceOrientationPortrait || fromInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)){
        // if is rotated from Portait:
        if((appOrientation == UIInterfaceOrientationLandscapeLeft || appOrientation == UIInterfaceOrientationLandscapeRight)){
            // to Landscape:
            CGAffineTransform transform = self.view.transform;
            transform = CGAffineTransformRotate(transform, -(M_PI / 2.0));
            self.view.transform = transform;            

            [self.view setBounds:CGRectMake(0, 0, height, width)];
        }
    }
    else {
        // it is rotated from Landscape:
        if((appOrientation == UIInterfaceOrientationPortrait || appOrientation == UIInterfaceOrientationPortraitUpsideDown)){
            // to Portrait:            
            CGAffineTransform transform = self.view.transform;
            transform = CGAffineTransformRotate(transform, +(M_PI / 2.0));
            self.view.transform = transform;            

            [self.view setBounds:CGRectMake(0, 0, height, width)];
        }
    } 
} 
```

它不是最好的编程范式，但它可以解决问题。

有人写类似tis来接受他的答案，或者写一个更好的方法，如果可以的话！