# StackOverflow 问答 10041000-10041999

# objective-c - 子类化实现NSCoding的对象时是否需要调用[super encodeWithCoder]？

> ID：10041000
> 
> 赞同：15
> 
> 时间：2012-04-06T08:30:00.223
> 
> 标签：objective-c, cocoa, nscoding

我知道，当您编写实现 NSCoding 的对象的子类的 initWithCoder 方法时，您必须调用 super `initWithCoder`（而不是`super init`），但是我必须调用`super encodeWithCoder`encodeWithCoder 的实现吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-06T08:44:33.963

如果您从支持编码的类继承，通常建议`[super encodeWithCoder:]`在您的`encodeWithCoder:`方法中使用，尽可能多`[super initWithCoder:]`地在`initWithCoder:`方法中使用。

**文档：** [NSCoding 协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)

**参考：** [http ://www.cocoadev.com/index.pl?NSCoder](http://www.cocoadev.com/index.pl?NSCoder)

> 如果该类继承自符合（NSObject 不符合）的类，那么您应该包含 [encodeWithCoder:] 方法。

```
//  <NSCoding> protocol methods

-(void)encodeWithCoder:(NSCoder*)coder
{
    [super encodeWithCoder:coder];
    /*
    [coder encodeObject: theNSStringInstanceVariable];
    [coder encodeObject: theNSDictionaryInstanceVariable];
    [coder encodeValueOfObjCType:@encode(BOOL) at:&theBooleanInstanceVariable];
    [coder encodeValueOfObjCType:@encode(float) at:&theFloatInstanceVariable];
    */
} 
```

# c++ - 寻求用于模拟粒子轨迹的3D点和向量几何C++库

> ID：10041004
> 
> 赞同：1
> 
> 时间：2012-04-06T08:30:15.753
> 
> 标签：c++, vector, 3d, geometry

我正在寻找用于在笛卡尔 3D 坐标系中模拟粒子轨迹的点和矢量类。所需功能：计算点和 X 之间的距离，计算射线和 X 之间的交点，旋转和平移 X（其中 X 是平面或球体）。

我查看了 boost:geometry（太通用，太复杂），blitz::TinyVector（良好的基础，但缺乏几何功能），Qt::QVector3D（也许是最好的起点）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:36:27.710

也许看看[cgal](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/contents.html)它是一个非常强大的几何库，但也有你需要的东西。

# android - 写入txt文件，但不覆盖

> ID：10041007
> 
> 赞同：0
> 
> 时间：2012-04-06T08:30:39.857
> 
> 标签：android, file, overwrite

我遇到了一个小问题，看起来很简单（我个人认为是这样），但我找不到答案。但至少我不知道如何解决它。

当我点击保存按钮时，我将一些行写入 .txt 文件。然后，当我输入其他内容并再次点击保存时，它会覆盖我的第一行。

但我希望它写在新的一行。此外，当我再次关闭并重新启动应用程序并再次点击保存时，它必须再次将文本保存在新行上。

所以基本上：我怎样才能将文本写入 .txt 文件，而不覆盖前面的行。我可以写入文件，所以这不是问题，而只是如何不覆盖。

这是我的代码的“小”部分：

```
 public void Data_save_contacts(View v) {

        Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED);

        try {

                writer_contact = new BufferedWriter(new FileWriter(root + "/Save/Contacten.txt"));
                writer_contact.write("Perceel "+str_boer_teler_nummer+" = "+str_boer_teler);
                writer_contact.newLine();   

        } catch (IOException e) {
            System.err.println(e);
        }
} 
```

请把我引向好的方向。

已经谢谢了， Bigflow

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T08:33:41.463

尝试：

```
public FileWriter (File file, boolean append) 
```

设置`append`为`true`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T08:34:41.977

你所要做的

> writer_contact = new BufferedWriter(new FileWriter(root + "/Save/Contacten.txt",true));

正如java文档中所说：

```
FileWriter

public FileWriter(File file,
              boolean append)
       throws IOException

Constructs a FileWriter object given a File object. If the second argument is true, then bytes will be written to the end of the file rather than the beginning.

Parameters:
file - a File object to write to
append - if true, then bytes will be written to the end of the file rather than the beginning 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:41:19.817

好吧，鉴于这只是您的一小部分代码（我假设您将其分块以免泄露其他部分），我怀疑您正在打开文件 root + "/Save/Contacten. txt”在非附加模式。第一次调用它时，文件被创建并写入。随后您调用它时，它会找到该文件，并重新创建（或删除内容）然后写入该文件。

尝试使用：

```
writer_contact = new BufferedWriter(new FileWriter(root + "/Save/Contacten.txt", true)); 
```

当然，第一次打开/创建文件时，您会希望它为 false（除非您总是希望在文件已存在的情况下追加）。

试一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T08:47:37.630

您可以检查文件是否存在？

或者您也可以附加旧文件。

如果不退出然后只创建一个新的。

# php - MS 访问 ORDER BY 中断查询 (Adodb)

> ID：10041008
> 
> 赞同：1
> 
> 时间：2012-04-06T08:30:41.127
> 
> 标签：php, ms-access, adodb

目前我正在使用基于 linux 环境的 php 项目上的访问数据库（不幸的是，客户端选择了数据库类型，所以我无法更改它）。

我对以下查询有疑问：

```
select DATAORA,PARAMETRO_VALORE,GRANDEZZA from TABLE
where (GRUPPO = 'xxx' and DATAORA > '#2012-01-04 00:00:00#' 
and DATAORA < '#2012-01-05 00:00:00#') 
ORDER BY GRANDEZZA 
```

**如果我在没有ORDER BY**子句的情况下使用它，它工作得很好

```
select DATAORA,PARAMETRO_VALORE,GRANDEZZA from TABLE
where (GRUPPO = 'xxx' and DATAORA > '#2012-01-04 00:00:00#' 
and DATAORA < '#2012-01-05 00:00:00#') 
```

但是，只要我添加订单，它就会中断（0 个结果，没有错误迹象）。

在 Windows 上它工作得很好（在我从日期中删除引号之后），所以我真的被困在这里......

有什么建议吗？

谢谢。

Ps (DATAORA = datetie, GRANDEZZA = varchar)

# sql - 使用 TST 时“模拟”SP 调用（来自其他 SP）

> ID：10041010
> 
> 赞同：4
> 
> 时间：2012-04-06T08:30:47.050
> 
> 标签：sql, sql-server, unit-testing

我最近开始使用 TST (tst.codeplex.com) 测试存储过程，发现它非常有用 - 然而，一个缺点是我们无法隔离依赖项和“模拟”其他 SP/函数调用（就像我们对 C# 对象依赖项所做的那样，例如）。我不介意花一些时间将这个功能添加到 TST 或编写一个新框架，但我真的不知道如何开始。

有任何想法吗？任何帮助表示赞赏。

PS：我知道 SP 的设计从来没有考虑到测试，但这对于已经存在 100 多个 SP 的遗留项目来说可能是一个巨大的福音。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-08T17:21:11.883

确实有助于先前的答案，虽然重命名方法远非理想，但它确实有效。我在一篇针对 SSDT 数据库项目的博客文章中对其进行了演示，但原理是相同的：

[https://tangodude.wordpress.com/2014/02/08/ssdt-database-projects-mocking-database-objects-for-isolated-unit-testing-kind-of/](https://tangodude.wordpress.com/2014/02/08/ssdt-database-projects-mocking-database-objects-for-isolated-unit-testing-kind-of/)

tSQLt 对 mocking 有全面更好的支持：

[http://tsqlt.org/user-guide/isolating-dependencies/](http://tsqlt.org/user-guide/isolating-dependencies/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:48:54.953

我自己一直在为类似的事情苦苦挣扎，我想知道以下是否可能是一种模拟 SP 的方法。

在运行需要模拟 SP 的测试之前，测试框架应该：

*   重命名原始 SP（例如：HiddenSp）
*   创建一个具有相同参数的新 Sp
*   在新的 SP 添加代码以检查需要模拟响应的参数组合
*   如有必要，提供模拟响应
*   或者
*   将请求传递给原始 SP
*   执行测试
*   删除模拟
*   还原原始 SP 的名称

我们没有使用 TST，但我想我会在我们的（手动）SQL 测试框架中添加类似的东西。几周后不会去，所以我想知道这是否适合你。

# javascript - 由于 HTML 中的 selected 关键字，表单中的重置按钮不会将选择重置为第一个元素

> ID：10041012
> 
> 赞同：3
> 
> 时间：2012-04-06T08:30:52.490
> 
> 标签：javascript, html, reset, forms, html-select

我在表单中有一个重置按钮

```
<input type="reset" value="Reset"> 
```

和一些选择

```
<select>
<option value="0">A</option>
<option value="10" selected="selected">B</option>
</select> 
```

如果我点击重置没有任何反应。[这](http://jsfiddle.net/rucC6/1/)是一个例子。

**编辑：** 我认为重置按钮将重置为选择列表的第一个值。这似乎是对我的误解。我想重置为选择的第一个元素。

那么在Javascript中创建重置函数的唯一方法是什么？如果用户关闭了 Javascript 怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:57:27.603

将所有输入、选择等的值强制为空...

```
$("#filter_form").find("select, input, checkbox").val(""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T08:35:29.557

当我点击重置按钮时，表单重置为默认值。它在您的示例中有效（选项 10 是默认值）。

# java - Wifi 连接问题

> ID：10041017
> 
> 赞同：0
> 
> 时间：2012-04-06T08:31:38.200
> 
> 标签：java, android, android-wifi

我目前在 wifi 通信中收到以下错误：

无法在以不同方法定义的内部类中引用非最终变量 wifi

```
List<ScanResult> results = wifi.getScanResults(); 
```

无法解析为变量

```
connectivity.setRadio(NetworkType.WIFI, false);
connectivity.setRadio(NetworkType.WIFI, true);
connectivity.setNetworkPreference(NetworkPreference.PREFER_WIFI);
int networkType = networkInfo.getType();
wifi.enableNetwork(netID, disableAllOtherstrue); 
```

感谢您在理解这些方面提供任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:37:46.513

使你的`wifi`变量最终。异常消息是不言自明的。这是因为您可能正在为侦听器使用内部类或匿名构造函数。

**编辑**

*imran khan*提供的评论也可以解决问题。这取决于您认为最适合您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-04T06:49:48.973

使用正斜杠和反斜杠创建函数。新函数的正斜杠和除法方程的反斜杠。

# objective-c - 在 Xcode 中使用方括号为框架组织导入

> ID：10041020
> 
> 赞同：0
> 
> 时间：2012-04-06T08:32:17.170
> 
> 标签：objective-c, xcode

我已经调整了 Oomph MapKit 框架以在 ARC 下使用。为此，我在 Xcode 中创建了一个新项目，并从 GitHub 添加了它们的源代码。我还在同一个项目中添加了一个小型测试应用程序来测试框架的工作原理。我为框架和测试应用程序创建了一个目标。

一切似乎都运行良好，但是我无法让导入正常运行。

在他们拥有的原始源文件中（作为 MKAnnotation.h 文件中的示例）：

```
#import <Cocoa/Cocoa.h>
#import <MapKit/MKView.h>
#import <WebKit/WebKit.h> 
```

这会在我的项目中生成一个错误，指出`MapKit/MKView.h`找不到该文件，我需要将导入替换为：

```
#import "MKView.h" 
```

我需要做什么才能使带有方括号的导入起作用？我经历了大量的设置，但我一生都找不到线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T21:54:34.837

您可能需要将相关框架添加到您的项目中。然后它将在“brokets”表单的搜索路径上。

转到您的项目文件（通常是左侧文件列表的顶部，选择您的应用程序目标，通常是 Targets 中的顶部，选择 Build Phases，打开“Link Binary With Libraries”，然后在此处添加框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:57:14.337

为什么不让`#import <MapKit/MapKit.h>`您可以访问 MapKit 框架中包含的所有头文件？

# ruby-on-rails - 覆盖 ActiveResource 属性设置器

> ID：10041026
> 
> 赞同：1
> 
> 时间：2012-04-06T08:33:03.820
> 
> 标签：ruby-on-rails, ruby

初始化对象时，有没有办法覆盖 activeresource 上的属性设置器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:47:02.237

您可以尝试覆盖加载方法

```
 def load(attributes, remove_root = false)
       super(attributes, remove_root)
       #put your code,  here you have @attributes collection
       self
    end 
```

# android - 我可以在没有自己的数据库的情况下扩展 contentProvider 吗？

> ID：10041029
> 
> 赞同：0
> 
> 时间：2012-04-06T08:33:23.370
> 
> 标签：android, android-contentprovider

我可以在没有我自己的数据库的情况下创建一个扩展 ContentProvider 的类吗？相反，我从其他 ContentProvider 返回光标。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:40:22.060

好吧，从代码中，也许你可以做到这一点。

但我认为这不是一个好主意，您可以从 中返回光标`another content provider`，为什么不直接使用`another content provider`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:07:51.633

你肯定可以做到这一点。但是，您必须正确实现 ContentProvider。你如何做到这一点以及`Cursor`来自哪里是完全不相关的。显然，我部分同意@idiottiger，直接使用现有的内容提供者可能更简单。

# android - 我无法将 android sdk 添加到 eclipse

> ID：10041030
> 
> 赞同：-1
> 
> 时间：2012-04-06T08:33:25.283
> 
> 标签：android, eclipse

我无法将 android sdk 添加到 eclipse。我下载了 android sdk，但在下图的红色圆圈区域中看不到任何内容。

![在此处输入图像描述](../Images/5362ade3f3aca8261abf98dc7d43d7d6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:41:00.200

我认为您应该单击“添加”按钮，分配名称并将网址放入“位置”字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T08:58:46.753

只需尝试 http 而不是 https ...我遇到了同样的问题

[http://dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/)

为我工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:44:39.347

从站点安装 ADT，只需将 .zip 文件名提供给 Work With: Option。

雅它完成了。

![在此处输入图像描述](../Images/ee6eed75be96028b652be3370d711f04.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T08:51:57.333

提取 ADT 16

**现在转到 ADT 16 -> puguins->**

从这里复制所有 jar 文件

去

**eclipse -> 插件 -> 在此处粘贴所有 jar 文件**

重启日食...

# iphone - 如果应用程序已安装，则在 UIWebView 中打开指向应用程序的 iTunes 链接

> ID：10041031
> 
> 赞同：1
> 
> 时间：2012-04-06T08:33:41.170
> 
> 标签：iphone, ios, uiwebview, itunes

如果我在 Safari 中打开[这个 url](http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=318798264&mt=8)，iOS 会检查我是否安装了这个应用程序。如果是 - 应用程序将启动，否则我将被重定向到 AppStore 应用程序。

是否可以`UIWebView`做同样的事情？关键是系统会检查应用程序安装的天气并已`CFBundleURLTypes`注册响应。

编辑：对不起，我在识别问题时错了。实际上还有另一个链接重定向到为应用程序注册的直接（本地）链接。我现在抓住了这个

```
-(BOOL) webView:(UIWebView *)inWeb 
    shouldStartLoadWithRequest:(NSURLRequest *)inRequest 
    navigationType:(UIWebViewNavigationType)inType 
```

并打电话

```
[[UIApplication sharedApplication] openURL:url] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:22:57.787

如果`UIApplication openURL`你想要什么（在 App Store 中打开应用程序页面，或者如果安装了应用程序则打开该应用程序；我想它会这样做）你可以通过以下方式“窃取”UIWebView 中的 url 打开事件：

```
// myWebView will be your initialized web view
[myWebView setDelegate:self];

// implement this method in the owning class
-(BOOL) webView:(UIWebView *)inWeb 
 shouldStartLoadWithRequest:(NSURLRequest *)inRequest 
             navigationType:(UIWebViewNavigationType)inType 
{
    if (inType == UIWebViewNavigationTypeLinkClicked) {
        [[UIApplication sharedApplication] openURL:[inRequest URL]];
        return NO;
    }

    return YES;
} 
```

这将打开在 Safari / App Store / 默认处理应用程序的 Web 视图中单击的*所有链接。*如果您只想以这种方式打开 iTunes 链接，您可能希望在此方法中实现一些 URL 解析并仅重定向这些链接。如果您返回`YES`，将调用默认处理程序，即链接将在 Web 视图中打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:39:26.277

您描述的行为不是它目前在 iOS 5.1 上的工作方式

再次点击 iTMS 链接仍会启动 App Store。

![iOS 5.1 上的应用商店](../Images/d2f6c93b4e1ad03260022c7851e61a4a.png)

* * *

这可以帮助您检测是否已安装应用程序

[https://stackoverflow.com/a/5746603/515359](https://stackoverflow.com/a/5746603/515359)

# opencv - 使用 OpenCv 进行图像特征分类的 SVM

> ID：10041039
> 
> 赞同：0
> 
> 时间：2012-04-06T08:34:25.260
> 
> 标签：opencv, svm

我的项目范围是通过比较样本图像特征集来识别纸币。在那里，我已经完成了样本图像的特征提取部分。此外，我需要将示例图像特征存储在文本文件或 XML 文件中以及它们的分类中。请帮助我在 OpenCv 上使用 SVM 分类器进行图像分类部分

这是我完成的特征提取代码。

int main( intargc, char** argv ) { /*加载图像为灰度*/

```
//declaring Mat object.This will holds an image(like iplimage in old opencv versions). 

Mat gray_scale_img; 

//imread is used to load an image. in here i have load the image as a grayscale image.

gray_scale_img=imread("100.jpg",CV_LOAD_IMAGE_GRAYSCALE);  

/*surf detector settings*/

//setting the threshold value.high value will result low number of keypoints.
int hessian=100;

//initializing the surf keypoint detector
SurfFeatureDetectordetector(hessian);

/*detect surf key points*/

//creating vector to store detected keypoints
std::vector<KeyPoint>keypoints;

//detect keypoints
detector.detect(gray_scale_img,keypoints);

/*extract descriptor vectors/feature vectors from each and every keypoints */

SurfDescriptorExtractor extractor;

//this mat object will goinf to hold the extracted descriptors.
Mat descriptors; 

//extracting descriptors/features
extractor.compute(gray_scale_img,keypoints,descriptors); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T21:05:31.340

OpenCV中的SVM在CvSVM类中实现；

您需要具有矩阵形式的特征向量（按行）。

假设您使用高度、宽度作为特征向量，您的垫子将如下所示（假设您有 20 个特征向量）：

```
Mat FV(20,2, CV_32F);
Mat flagmat(20,1,CV_8U);

/*
code to populate the matrix FV. 

Fill the matrix with values so that it will look something as follows:

20 30
30 40
..
..
code to populate the matrix flagmat.
Fill the matrix with labels of each corresponding feature vector in matrix FV. It will look something as follows:
1
-1
1
1
-1
1
1
1
..
*/

CvSVM svm;

svm.train(datamat, flagmat,Mat(),Mat(),CvSVMParams());

Mat testFV(20,2,CV_32F);
Mat sample(1,2,CV_32F);

/* similarly as described above fill testFV matrix*/
float res;// to store result
for(int i =0;i<testFV.rows;i++)
{

    sample.at<float>(0,0)=testFV.at<float>(i,0);
    sample.at<float>(0,1)=testFV.at<float>(i,1);
    float res = svm.predict(sample);
    cout<<"predicted label: "<<res<<endl;
} 
```

我假设您可以从特征描述符/向量中提取数值并将它们放入上述代码的示例矩阵中。您可以将特征向量替换为您正在使用的任何特征描述符。

# ruby - 必应和雅虎搜索引擎的机械化

> ID：10041040
> 
> 赞同：1
> 
> 时间：2012-04-06T08:34:29.937
> 
> 标签：ruby, ruby-on-rails-3, screen-scraping, nokogiri, mechanize

我们如何为 bing 和 yahoo 搜索引擎实现 Mechanize？对于谷歌的实现似乎很简单

```
@agent = Mechanize.new
page = @agent.get('http://www.google.com')
google_form = page.form_with(:name => 'f')
google_form.q = query
page = @agent.submit(google_form) 
```

但我不确定如何为其他两个搜索引擎实现这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T09:19:05.380

雅虎：

```
@agent.get('http://www.yahoo.com/').forms[0].tap{|f| f.p = 'foo'}.submit 
```

必应：

```
@agent.get('http://www.bing.com/').forms[0].tap{|f| f.q = 'foo'}.submit 
```

# iphone - 当表格为 int 编辑模式时如何删除 Uitableview 中的按钮

> ID：10041041
> 
> 赞同：1
> 
> 时间：2012-04-06T08:34:35.390
> 
> 标签：iphone, xcode, uitableview

当我将数据加载到 uitablew 时，我创建了一个包含 2 个部分的 UITable 视图，它工作正常，

但我的问题是如何解决第 0 部分和第 0 行中禁用一个排序按钮

其中更多描述为下图。

![在此处输入图像描述](../Images/b7bf12664aa0530dc44f42a977e62817.png)

请帮助解决我的问题

提前感谢您在我的问题上花费的宝贵时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T08:41:01.137

这很容易。

监听 UITableViewDataSource 调用[`tableView:canMoveRowAtIndexPath:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006941-CH3-SW30)

像这样：

```
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath {
  if(indexPath.section == 0) {
    return NO;
  }

  return YES;
} 
```

如果您不知道该方法的放置位置，请将其放在旁边`tableView:cellForRowAtIndexPath:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:41:04.017

设置`showsReorderControl`为单元格的 NO 属性

```
cell.showsReorderControl = NO; 
```

此外，如果数据源实现`tableView:canMoveRowAtIndexPath:`返回 NO，则重新排序控件不会出现在该指定行中。您需要检查 indexPath 并为其返回 NO。

# list - 如何将 Prolog 中的列表拆分为包含 3 个项目的多个列表？

> ID：10041043
> 
> 赞同：3
> 
> 时间：2012-04-06T08:34:39.830
> 
> 标签：list, split, prolog, items

我的问题是，我想制定一个规则，将一个列表拆分为多个列表，按顺序只包含原始列表中的 3 个项目。

例如：

```
/*original list:*/ 
Fruits=[apple,banana,orange,pear, lemon, melon]

?-Split(Fruits).

/*results:*/ 
[apple,banana,orange];
[banana,orange,pear];
[orange,pear,lemon];
[pear,lemon,melon]. 
```

有没有办法做到这一点？:S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:23:33.903

您可以参考前段时间提供的[这个出色的答案@false。](https://stackoverflow.com/questions/9684549/prolog-list-plateau)

快速调整他的解决方案，你可以写：

```
seq([]) --> [].
seq([E|Es]) --> [E], seq(Es).

split_3(List, Result) :-
    length(Result, 3),
    phrase((seq(_),seq(Result),seq(_)),List). 
```

`append/2`请注意，您可以使用（或`append/3`再调用一次）实现相同的目的：

```
split_3(List, Result) :-
    length(Result, 3),
    append([_, Result, _], List). 
```

但`append/2`并非真正用于此类操作。DCG 使用差异列表，效率更高。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T11:40:52.070

Prolog 非常适合这项任务。只需观察 append/3 可以在各个方向使用：

```
 % append(+List,+List,-List)
 % append(-List,-List,+List)
 append([], X, X).
 append([X|Y], Z, [X|T]) :-
     append(Y, Z, T). 
```

现在简单地定义 split/2 如下。它将找到 _1 和 _2 使得 L = _1 ++ S ++ _2，其中 ++ 是列表连接：

```
 % split(+List,-Sublist)
 split(L, S) :-
     append(_, H, L),
     append(S, _, H). 
```

在这里你可以解决你的问题：

```
 ?- Fruits=[apple,banana,orange,pear,lemon,melon], Split=[_,_,_], split(Fruits,Split).
 Fruits = [apple,banana,orange,pear,lemon,melon],
 Split = [apple,banana,orange] ;
 Fruits = [apple,banana,orange,pear,lemon,melon],
 Split = [banana,orange,pear] ;
 Fruits = [apple,banana,orange,pear,lemon,melon],
 Split = [orange,pear,lemon] ;
 Fruits = [apple,banana,orange,pear,lemon,melon],
 Split = [pear,lemon,melon] ;
 No 
```

再见

最好的祝福

# java - 一个 xml 节点的 Ksoap2-Android 解析器

> ID：10041046
> 
> 赞同：1
> 
> 时间：2012-04-06T08:34:50.773
> 
> 标签：java, android, ksoap2, android-ksoap2

用于我的 Web 服务请求的 Android 库。当我的 Web 服务返回一个节点时，我遇到了一个问题：

```
 <tag1> ... </tag1>
   <tag1> ... </tag1>
   <tag1> ... </tag1>
   <tag1> ... </tag1> 
```

有一些示例如何解析一个节点是否有一个结果：

[http://seesharpgears.blogspot.com/2010/10/web-service-that-returns-array-of.html](http://seesharpgears.blogspot.com/2010/10/web-service-that-returns-array-of.html)

但就我而言，我找不到任何好处。也许有人可以分享一些想法并可以帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:11:00.837

你有没有尝试过这样的事情：

```
SoapObject soapObject = envelope.getResponse();
for (int i = 0; i < soapObject.getPropertyCount(); i++) {
        SoapObject resource = (SoapObject) response.getProperty(i);
        String uri = resource.getAttribute("uri").toString();
        String mimeType = resource.getAttribute("mimeType").toString();
        String size = resource.getAttribute("size").toString();
        String localURI = resource.getAttribute("localURI").toString();
        //do stuff
} 
```

注意：这是我用来从资源列表中获取属性的示例

此示例遍历响应 SOAP 对象的标签并获取每个标签的 3 个已知属性，请参见下面的示例响应：

```
<resources xmlns="http://www.example.com/">
    <resource mimeType="text/xml" size="123456" uri="https://example.com/content/get.php?a123891" localURI="package.opf"/>
    <resource mimeType="application/x-dtbncx+xml" size="123456"  localURI="nav.ncx"/>
</resources> 
```

# java - 有没有办法在 Eclipse 中过滤工作区引用（Ctrl+Shift+G），以免也看到“潜在匹配”？

> ID：10041047
> 
> 赞同：1
> 
> 时间：2012-04-06T08:34:54.177
> 
> 标签：java, eclipse, keyboard-shortcuts

在 Eclipse 中，我想查看我的工作区中实际使用的字段的位置。如果我选择它并按***`Ctrl`+ `Shift`+`G`***，我会得到对它的所有引用，但是有一个缺点，如果在 JavaDoc 部分中有人提到了这个名字，我也会得到这些的搜索结果。

因此，如果我有一个名为“user”的字段并且我想查看它的使用位置，那么对于在 javadoc 中提到“user”作为参数的每个方法，我都会得到大量搜索结果......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T08:50:01.217

尝试使用***`Ctrl`++ ，`Shift`它将`U`***显示您的变量/方法在当前类中出现的每一行。或者***`Ctrl`++`Alt`用于`H`***使用您的变量的每种方法。

# arrays - AWK如何将此要求读入数组？

> ID：10041054
> 
> 赞同：-1
> 
> 时间：2012-04-06T08:35:06.357
> 
> 标签：arrays, awk, split

我有一个文件：

```
AA BB CC DD
BB CC DD AA 
BB CC DDA AA
CC DD AA BB 
```

此命令打印以下行：

```
$ awk '{if($3=="DD") print}' file
BB CC DD AA 
```

我希望这个条件写入数组。此命令不起作用：

```
$ awk '{if($3=="DD") split($0, a, RS); print a[1]}' file

BB CC DD AA 
BB CC DD AA 
BB CC DD AA 
```

感谢您的帮助。

**编辑：**

我想从模式'DD'中写入一系列行。

这些是很好的解决方案：

```
awk '{if($3=="DD") {split($0, a, RS); print a[1];}}' file
awk '$3=="DD"{split($0, a, RS); print a[1];}' file 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:39:33.167

我不完全清楚你想做什么，但试试这个：

```
awk '$3 == "DD" { print $1 }' file 
```

在 awk 中不需要您进行的手动拆分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:40:23.667

无论是否，您都在打印结果`$3 == "DD"`，这似乎不太可能是您想要的。

您还与`RS`未在此处设置的拆分，因此对于示例输出，请比较：

```
awk '{if($3=="DD") {split($0, a); print a[1];}}' file 
```

而是拆分（因此仅针对上述内容`FS`打印）。`BB`

# java - 对一个类的两个实例使用 jni

> ID：10041056
> 
> 赞同：0
> 
> 时间：2012-04-06T08:35:19.420
> 
> 标签：java, synchronization, java-native-interface

我有一个 java 类，这个类通过`jni`. 用 System.load(...) 加载的库。当我使用一个实例和一个目标时，一切正常。但是我尝试使用两个类的实例，这些实例将连接到两个不同的目标。例如; `InstanceA connects to TargetA`和`InstanceB connects to TargetB`。但是当 InstanceB 连接到 TargetB 时，它会覆盖 InstanceA 的 variables `as expected`。

我想我可以在 jni 中使用线程，但是有一些由目标调用的回调方法，并且回调方法参数中没有特定的值来确定哪些线程有效。

我该如何处理这个问题？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:35:01.510

显然，您拥有静态的 Java 或本机数据，这些数据不应该是静态的。

# vbscript - 如何通过vbs监控文件夹文件

> ID：10041057
> 
> 赞同：3
> 
> 时间：2012-04-06T08:35:19.633
> 
> 标签：vbscript

谁能帮我在哪里出错？此脚本用于监视文件夹以创建、删除或修改文本文件

```
sPath = "C:\scripts\test"
sComputer = "."
sDrive = split(sPath,":")(0)
sFolders1 = split(sPath,":")(1)
sFolders = REPLACE(sFolders1, "\", "\\") & "\\"

Set objWMIService = GetObject("winmgmts:\\" & sComputer & "\root\cimv2")
Set colMonitoredEvents = objWMIService.ExecNotificationQuery _
("SELECT * FROM __InstanceOperationEvent WITHIN 1 WHERE " _
& "TargetInstance ISA 'CIM_DataFile' AND " _
& "TargetInstance.Drive='" & sDrive & "' AND " _
& "TargetInstance.Path='" & sFolders & "' AND " _
& "TargetInstance.Extension = 'txt' ")

Wscript.Echo vbCrlf & Now & vbTab & _
"Begin Monitoring for a Folder " & sDrive & ":" & sFolders1 & " Change Event..." & vbCrlf

Do
    Set objLatestEvent = colMonitoredEvents.NextEvent
    Select Case objLatestEvent.Path_.Class

    Case "__InstanceCreationEvent"
    WScript.Echo Now & vbTab & objLatestEvent.TargetInstance.FileName & "." & objLatestEvent.TargetInstance.Extension _
    & " was created" & vbCrlf

    Case "__InstanceDeletionEvent"
    WScript.Echo Now & vbTab & objLatestEvent.TargetInstance.FileName & "." & objLatestEvent.TargetInstance.Extension _
    & " was deleted" & vbCrlf

    Case "__InstanceModificationEvent"
    If objLatestEvent.TargetInstance.LastModified <> _
    objLatestEvent.PreviousInstance.LastModified then
    WScript.Echo Now & vbTab & objLatestEvent.TargetInstance.FileName & "." & objLatestEvent.TargetInstance.Extension _
    & " was modified" & vbCrlf
    End If
    End Select
Loop

Set objWMIService = nothing
Set colMonitoredEvents = nothing
Set objLatestEvent = nothing 
```

这个脚本在我写的时候运行完美

```
sPath = "\\ComputerName\C$\scripts\test" 
```

安装的

```
sPath = "C:\scripts\test" 
```

谢谢....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T21:36:20.163

如果你用 google 搜索`"WMI TargetInstance.Drive"`，你会看到驱动器号需要一个冒号。像这样的查询

```
SELECT * FROM __InstanceOperationEvent WITHIN 1 WHERE TargetInstance ISA 'CIM_DataFile' AND TargetInstance.Drive='E:' AND TargetInstance.Path='\\trials\\SoTrials\\answers\\10041057\\data\\' AND TargetInstance.Extension = 'txt' 
```

按预期工作。

# scala - Scala 中的每个“setter”方法都需要一个“getter”方法吗？

> ID：10041059
> 
> 赞同：6
> 
> 时间：2012-04-06T08:35:24.573
> 
> 标签：scala, syntax, setter, getter

Scala 程序员应该知道这种写作：

```
class Person{
   var id  = 0 
}
var p = new Person 
p.id 
p.id = 2 
```

等于

```
class Person{
private var _id = 0 
def id = _id
def id_=(i: Int) = _id = i
}
val p = new Person 
p.id // be equal to invoke id method of class Person
p.id = 2   // be equal to p.id_=(2) 
```

有效。但是如果你注释getter方法`def id = _id`，`p.id = 2`会导致编译错误，说

```
error: value key is not a member of Person 
```

谁能解释为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T08:42:11.640

编译器之所以如此，是因为规范是这样说的。

请参阅[Scala 参考](http://www.scala-lang.org/docu/files/ScalaReference.pdf)，第 1 页。86, §6.15 作业。

请注意，没有什么可以阻止您：

*   制作吸气剂`private`
*   使 getter 返回另一种类型
*   使 getter “不可调用”，例如：`def id(implicit no: Nothing)`

# java - 检查java预定义方法

> ID：10041060
> 
> 赞同：-1
> 
> 时间：2012-04-06T08:35:29.270
> 
> 标签：java, syntax, antlr, system.out

我只是想知道你将如何检查java代码

```
System.Out.println("hi"); 
```

它应该检查语法是否正确。我在 ANTLR 中使用了 java 模板，但我不太确定 ANTLR 是否提供检查预定义的 java 方法。是否可以使用其他工具进行检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:56:10.057

当您的检查开始查看其他编译单元时，您通常已通过语法检查并进入语义检查。一个简单的语法分析器通常无法检测到这样的问题。

为什么不`javac`直接使用？甚至是现代 Java 实现提供的[编译器 API ？](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:42:03.870

只要语法准确地描述了语言，您使用哪个生成器都没有关系。没有必要特别对待内置类和方法，因为它们与用户定义的类和方法没有什么不同。

# plone - 如何将多个 Plone 站点合并为一个站点？

> ID：10041062
> 
> 赞同：1
> 
> 时间：2012-04-06T08:35:36.703
> 
> 标签：plone

我在具有相同 Data.fs 的同一个 zope 实例下有 3 个 Plone 4.1.4 站点。他们使用不同的用户（可能使用相同的用户名）处理不同的文件夹、文件和 plomino 数据库。我怎样才能将它们组合成一个 Plone 站点？

此致。

zxl

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:24:49.320

zmi -> export 在这种情况下效果很好。您必须从 2 个站点导出并在一个站点中导入。我的意思是，您只需要导出数据、文件夹、文件和文档，而不是整个 plone 站点。对于用户来说，有点复杂，需要从portal_memberdata、portal_membership导出数据，从acl_users -> source_users导出用户登录名和密码。

对于 portal_memberdata 数据，您可以转到 site/portal_setup/manage_exportSteps 并使用导入选项卡将其导出并导入。对于 portal_membership 没有这样的步骤，但我认为没有数据，只有每个门户中应该相同的配置。所以真正的问题是在acl_users中迁移用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:41:37.313

使用 Products.CSVReplicata 导出和导入您的文件夹和文件。

关于 Plomino 数据库：首先，将他们的设计导出为 XML（在“设计”选项卡中），然后将其重新导入目标站点上的空数据库，然后将其文档导出为 XML（在“复制”选项卡中），然后将它们重新导入目标站点上的相应数据库。

# mercurial - 如何添加 subrepo 的特定子文件夹

> ID：10041063
> 
> 赞同：1
> 
> 时间：2012-04-06T08:35:37.597
> 
> 标签：mercurial, tortoisehg, subrepos, mercurial-subrepos

我来自 SVN 背景，我在将 subrepo 的子文件夹添加到我的主仓库时遇到了问题。这意味着我不想将整个子存储库添加到我的主项目中 - 只是其中的一部分。在我的情况下，我只想包含我的库的源文件，不包括所有单元测试。

我创建了 .hgsub 文件并在那里写道：

```
libs/my_std_lib = https://myreposhost.com/my_std_lib_repo/src/main/java/ 
```

但是当我尝试同步 lib​​s/my_std_lib 文件夹时，我收到这样的错误：`HTTP Error: 404 (Not Found)`

当我尝试在没有子路径（`https://myreposhost.com/my_std_lib_repo/`）的情况下进行同步时 - 它运行良好。

那么我做错了什么或者这在hg中是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:37:35.297

答案很简单：不可能只用 Mercurial 克隆存储库的一部分。

通过扩展，您不能仅将存储库的一部分添加为子存储库。

对不起。

# android - 在滚动视图android中不可滚动的listview

> ID：10041066
> 
> 赞同：2
> 
> 时间：2012-04-06T08:36:05.663
> 
> 标签：android, listview, scroll

我需要制作一个可滚动的布局，包含一个不可滚动的列表视图（内容的完整高度）。因此，当我滚动显示列表视图上方的内容时，会显示完整的列表视图。这在android中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:47:38.887

ListView （不可滚动）是什么意思。它是否有预定义的项目（计数）？

你可以有一个`<ScrollView></ScrollView>`正常的内部（线性/相对布局说 id `insidelayout1`）

对于 ListView 的单个项目，创建一个单独的 xml（比如 item.xml）并尝试膨胀`item.xml`到`insideLayout1`.

这对您有用吗..或详细说明您的要求...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:48:10.747

如果要将列表视图放在滚动视图中，则必须固定列表视图的高度。否则你不能正确滚动它。

# svn - 如何从本地 TFS 文件夹中取消跟踪 svnbridge 文件？

> ID：10041068
> 
> 赞同：1
> 
> 时间：2012-04-06T08:36:25.077
> 
> 标签：svn, tfs, svnbridge, team-explorer-everywhere

我正在使用 eclipse 构建一个在 TFS 中跟踪的 android 应用程序。服务器上安装了一个 svnbridge，但我不想再使用它，所以我安装了 Team Explorer Everywhere eclipse 插件。但是现在在我的项目中，我有很多 ..svnbridge 文件夹弄乱了所有项目（+1000 错误）。是否可以取消跟踪这些文件夹？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T08:56:48.133

所以他们在源代码控制之下，但他们不应该吗？简单地删除它们应该是最不危险的命令。还有一个[tf destroy](http://msdn.microsoft.com/en-us/library/bb386005.aspx)命令将不可撤销地删除这些项目。

# linux - 如何在 github 上为 1 个用户添加 2 个 repo 的部署密钥

> ID：10041082
> 
> 赞同：7
> 
> 时间：2012-04-06T08:38:11.927
> 
> 标签：linux, ssh, github, ssh-keys

我创建一个`deploy`用户，生成一个 ssh_key，我将 id_rsa.pub 添加为 github 部署密钥。

这个`deploy`用户需要 pull 2 repo，所以我将相同的 ssh_key 添加到另一个 repo 作为部署密钥。

但 github 告诉我，部署密钥已经在使用中。

而且我不知道如何为 1 个用户添加 2 个 id_rsa.pub。

# 更新：

我添加了 id_rsa_assets 额外，但我仍然无法拉动。

```
ssh-add .ssh/id_rsa_assets 
```

无法打开与您的身份验证代理的连接。

.ssh/配置

```
Host guardians
    Hostname github.com
    User git
    IdentityFile ~/.ssh/id_rsa

Host assets
    Hostname github.com
    User git
    IdentityFile ~/.ssh/id_rsa_assets 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T10:19:14.723

您可以使用您想要的任何名称创建两个公钥/私钥：

```
~/.ssh
  repo1
  repo1.pub
  repo2
  repo2.pub

  config 
```

（也就是说，它不必命名`id_rsa(.pub)`为工作，只要你指出 ssh 去哪里看。
这就是 ' `config`' 发挥作用的地方：该`config`文件包含 GitHub`repo1`和 GitHub的两个连接的名称`repo2`，对于每个连接，您的私有仓库密钥的路径，如“[更改 github 帐户 mac 命令行](https://stackoverflow.com/a/9551540/6309)”和“[快速提示：如何使用 GitHub 和多个帐户](http://net.tutsplus.com/tutorials/tools-and-tips/how-to-work-with-github-and-multiple-accounts/)”中所述：

```
Host githubRepo1
HostName github.com
User git
IdentityFile ~/.ssh/repo1

Host githubRepo2
HostName github.com
User git
IdentityFile ~/.ssh/repo2 
```

这样，只要您使用它们的 ssh 地址，您就可以从两个存储库中的任何一个中提取。

# security - 从应用程序向服务器发送用户名和密码的最佳实践

> ID：10041083
> 
> 赞同：0
> 
> 时间：2012-04-06T08:38:15.563
> 
> 标签：security, webserver, sencha-touch-2

从 Sencha 开发的应用程序向网络服务器发送用户名和密码的最佳实践是什么？

它和 Ext.Ajax 函数一样简单吗？(http://docs.sencha.com/touch/2-0/#!/api/Ext.Ajax)

```
Ext.Ajax.request({
    url: 'validation-username-password.php',
    params: {
        username: Bob,
        password: pass123
    },
    success: function(response){
        var text = response.responseText;
        // process server response here
    }
}); 
```

还有什么我应该考虑的吗？喜欢安全吗？如果我使用上述方法，人们是否能够在应用程序（电话）和网络服务器之间嗅探用户名和密码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T08:57:58.460

确保您的凭据永远不会发送，除非您有安全连接 (SSL/HTTPS) 并且您会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:38:55.797

Use Secure Connection and Use `POST` method for sending Credential to server, if you use `OAuth` or any other Standard Authorization methodology than its good.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-15T13:55:19.263

即使您使用 SSL，也不要以纯文本形式发送密码，而是发送密码的哈希值，并且仅将密码的哈希值存储在服务器上，如果可能的话使用盐。这样，如果黑客进入存储所有密码哈希的服务器数据库，他将不会获得密码列表，而是获得带有盐的哈希列表，这在大多数情况下是无用的。有时，用户在许多站点上使用相同的密码，想象一下，如果黑客进入您的服务器并获取明文密码列表，那么他就有一个可以用来入侵其他站点的许多其他帐户的列表。因此，使用散列而不是明文密码是一种更好的做法。

**TL;DR** *通过 SSL 发送密码的哈希值而不是明文密码，并且不要在服务器上存储明文密码，而是将密码的哈希值与盐一起存储。*

# internet-explorer - 流式视频在客户端 PC 中的位置

> ID：10041085
> 
> 赞同：0
> 
> 时间：2012-04-06T08:38:18.683
> 
> 标签：internet-explorer, firefox, firefox-addon, video-streaming

我正在观看 yahoo 视频（电影）并尝试使用 Firefox 插件下载它 - “视频下载助手”

但它无法下载它。

然后我尝试使用“Orbit video downloader”下载它并单击“GetIt”按钮，发现 url 为空。（我尝试了 Firefox 和 IE）

但是必须有一些用于流式传输视频的文件夹（在客户端的 PC 中）。谁能告诉我这些流媒体视频在客户端 PC 中的确切位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:14:16.977

它们不驻留在您的计算机上，否则就不会称为流媒体。你所说的叫下载（然后播放）。

# android - 在 Android 上对多个控件进行分组

> ID：10041090
> 
> 赞同：0
> 
> 时间：2012-04-06T08:38:33.607
> 
> 标签：android, android-layout

我创建了一个带有 RelativeLayout 的窗口，并在其中插入了两个控件；一个是GridView，另一个是WebView。

我会将图像绑定到 gridview 以使用类似菜单，并且我将在 webview 中加载一个用于广告的 html 页面。

但我对这些控件有疑问。例如，如果用户垂直滚动gridview，它会消失在webview 后面，因为我期待webview 在用户滚动gridview 时也会与gridview 一起滑动。

所以我想知道，我可以将这些控件组合在一起以同时行动吗？

我的另一个方向问题，当我将设备切换到横向模式时，webview 正在从屏幕上消失。

最后，如果我设置了 GridView 的 layout_height 属性 fill_parent，我看不到 WebView，所以我将它设置为 wrap_content。但是这次 WebView 没有在底部对齐，它在 GridView 之后对齐，并且屏幕底部和 webview 之间有空间。

```
 <RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:background="@drawable/bg480480">

     <GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:numColumns="auto_fit"
    android:verticalSpacing="45dp"
    android:horizontalSpacing="10dp"
    android:columnWidth="150dp"
    android:stretchMode="columnWidth"
    android:gravity="center"
    android:layout_marginTop="30dp"
    android:scrollbars="none"
    android:layout_alignParentTop="true"   />

        <WebView
        android:id="@+id/webView1"
        android:layout_width="wrap_content"      
        android:layout_height="wrap_content"
        android:scaleType="centerInside"
        android:gravity="bottom"
        android:layout_below="@id/gridview"   />

</RelativeLayout> 
```

这是一些屏幕截图。

![首次打开（人像模式）](../Images/23910644f70a8203ed0f8a66e7716324.png)

![相同的屏幕，横向模式](../Images/46694491e7c3c9cf753afbb6205d7a40.png)

![再次相同的屏幕，横向后的纵向模式](../Images/97e5811deb8746284af380e8f0381010.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:54:29.687

我猜主要问题是 GridView 和 Webview 都指定了`layout_height="fill_parent"`. 我猜您可能不希望 GridView 填充整个父区域，因此请`"wrap_content"`改用。

我不太了解所需的页面布局，但我建议使用 LinearLayout 开始并感到舒适。这实际上取决于网格视图和 Web 视图应该显示什么以及您的主要内容在哪里。

在下面的示例中，我只是假设您的 Web 视图想要占据屏幕的大部分。

```
 <GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:background="#ff0000"
    android:numColumns="auto_fit"
    android:verticalSpacing="45dp"
    android:horizontalSpacing="10dp"
    android:columnWidth="150dp"
    android:stretchMode="columnWidth"
    android:layout_marginTop="30dp"
    android:scrollbars="none"
    />

        <WebView
            android:id="@+id/webView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#00ff00"
            android:scaleType="centerInside" />

</LinearLayout> 
```

如果假设不正确，那么您可能会反过来指定它（Webview=> `wrap_conent`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:13:59.910

改进 WebView 布局代码如下：

```
<GridView
    android:id="@+id/gridview"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/webView1"
    android:layout_alignParentTop="true"
    android:layout_marginTop="30dp"
    android:columnWidth="150dp"
    android:gravity="center"
    android:horizontalSpacing="10dp"
    android:numColumns="auto_fit"
    android:scrollbars="none"
    android:stretchMode="columnWidth"
    android:verticalSpacing="45dp" />

<WebView
    android:id="@+id/webView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:gravity="bottom"
    android:scaleType="centerInside" /> 
```

仅供参考，`android:layout_alignParentBottom="true"`将在屏幕底部显示 WebView。并包含 `android:layout_above="@+id/webView1"`在 GridView 中。

试试这个布局代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T12:10:15.083

您还需要在您的 webview 中添加 `android:layout_above="@+id/webView1"` 您的 gridview `android:layout_alignParentBottom="true"`

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:background="@drawable/bg480480"
    android:orientation="vertical"
    >

     <GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:numColumns="auto_fit"
    android:verticalSpacing="45dp"
    android:horizontalSpacing="10dp"
    android:columnWidth="150dp"
    android:stretchMode="columnWidth"
    android:gravity="center"
    android:layout_above="@+id/webView1"
    android:layout_marginTop="30dp"
    android:scrollbars="none"
    android:layout_alignParentTop="true"   />

        <WebView
             android:id="@+id/webView1"
             android:layout_width="wrap_content"      
             android:layout_height="wrap_content"
             android:layout_alignParentBottom="true"
             android:layout_below="@id/gridview"   />

</RelativeLayout> 
```

# android - TypeError：表达式'localStorage'[null]的结果不是对象

> ID：10041092
> 
> 赞同：1
> 
> 时间：2012-04-06T08:39:00.257
> 
> 标签：android, jquery-mobile

我在我的 Android 应用程序中使用 jquery 向导。到目前为止，我可以看到向导效果，并且我的所有子页面都由标签区分。但是当我的应用程序被 Android 模拟器加载时，这是一个错误。

04-06 15:06:59.939：E/Web 控制台（275）：TypeError：表达式“localStorage”[null] 的结果不是对象。在文件：///android_asset/jquery/jquery.mobile.wizard.js:123

```
<link rel="stylesheet" href="../jquery/jquery.mobile-1.0.1.min.css" />
<link rel="stylesheet" href="../jquery/jquery.mobile.wizard.css" />
<script src="../jquery/jquery-1.7.1.js"></script>
<script src="../jquery/jquery.mobile-1.0.1.min.js"></script>
<script src="../jquery/jquery.mobile.wizard.js"></script> 
```

这是我的页眉：

```
<script>
$(function() {
    //$( ".inputdates" ).datepicker();
  $('#autoquoteform').wizard({imagebase:'../image'});
  $('#autoquoteform').bind('keypress', function (event) {
    if (event.which == 13) {
      //$.mobile.changePage($("#homepage"));
    }
  });
});
</script> 
```

当我单击向导图标时，会发生此错误。

那么以前有人遇到过同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:25:40.593

我通过这样做使它工作：

```
 webView.getSettings().setDomStorageEnabled(true);
    webView.getSettings().setDatabaseEnabled(true);
    try {  
        File filesDir = this.getExternalFilesDir(null);   
        File file = new File(filesDir, "SomeFolder"); 
        if (!file.exists()) {
            file.mkdirs();  
        }
        webView.getSettings().setDatabasePath(file.getAbsolutePath());
    } catch (Exception e) {
         throw new RuntimeException("Failed to mkdir dirs, " + e.getMessage(), e);                                    
    } 
```

# android - AndEngine GLES2 是否适用于 Android 2.1 更新 1？

> ID：10041094
> 
> 赞同：2
> 
> 时间：2012-04-06T08:39:06.263
> 
> 标签：android, andengine

AndEngine GLES2 是否适用于 Android 2.1 更新 1？如果是这样，运行它需要什么样的设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T14:11:01.967

2.2+

From [AndEngine - GLES2 - Pre-Release on December 23rd](http://www.andengine.org/forums/announces/andengine-gles2-pre-release-on-december-23rd-t6097.html)

> Postby Nicolas Gramlich » Thu Dec 22, 2011 4:57 am
> 
> Here is a short list of the most interesting changes you'll experience in the GLES2 version:
> 
> ```
> GLES2
>     Requirement: Android >= 2.2 
> ```

# java - 使用 GWT 的 JSNI 从 java 方法中获取返回值

> ID：10041104
> 
> 赞同：1
> 
> 时间：2012-04-06T08:39:40.530
> 
> 标签：java, javascript, gwt, jsni

我试图从 java 方法中获取返回值，但它返回了一些非常奇怪的东西：它返回了我认为用 javascript 编写的方法本身。

这里是java方法的代码：

```
public String getNameToShow() {
        return "Chart number 1";
    } 
```

和javascript方法：

```
 public native void drawJSChart(String divId, int a, String jsData) /*-{
            try {
                //First create a script where to paste the jsData
                var scriptID = this.@myPackage.MyClass::getNameToShow();
                console.log(scriptID);
                //Some code
            } catch (e) {
                console.error(e.message);
            }
        }-*/; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T08:44:39.313

它返回 js 方法，因为您要求提供 js 方法。

从 JSNI 代码调用 java 方法应如下所示：

```
var scriptID = this.@myPackage.MyClass::getNameToShow(*)(); //notice second pair of braces 
```

基本上要从 JSNI 调用 java 方法，您需要放置两对大括号。首先定义方法参数类型（在我的示例中，我使用`*`了它，因此它将匹配任何参数类型），第二个用于将参数传递给方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T08:48:42.943

您还必须传递 Java 函数的类型。像这样写它有效：

```
package XXXXX.client;

import com.google.gwt.core.client.EntryPoint;

class _24_TestJSNIMethodCallback implements EntryPoint {
    public void onModuleLoad() {
        drawJSChart();
    }

    public String getNameToShow() {
        return "Chart number 1";
    }

    public native void drawJSChart() /*-{
        try {
            //First create a script where to paste the jsData 
            var scriptID = this
                    .@XXXXX.client._24_TestJSNIMethodCallback::getNameToShow()();
            $wnd.alert(scriptID);
            //Some code 
        } catch (e) {
            console.error(e.message);
        }
    }-*/;

} 
```

# jquery - 迭代数据以显示自动完成结果

> ID：10041111
> 
> 赞同：1
> 
> 时间：2012-04-06T08:40:35.170
> 
> 标签：jquery, ajax, jquery-ui, autocomplete

我正在尝试显示自动完成结果。

这是我使用 GET 请求查询脚本时返回的数据

例如，当我查询它“fb”时

它返回我以下数据

```
 "fb"
 "fbi"
 "fbi most wanted"
 "fbi jobs"
 "fb banners"
 "fbook"
 "fb covers"
 "fbanners"
 "fbisd"
 "fbop" 
```

这是自动完成插件的代码

```
 $("#query").autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "q.php",
                dataType: "json",
                data: {
                    "q" : request.term
                },
                success: function( data ) {
                response(data[1])
                }
            });
        },
        minLength: 2
    }); 
```

它没有显示任何结果。谁能告诉我我哪里错了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:54:29.037

```
$("#query").autocomplete({
        source: "q.php",
        minLength: 2
    }).data("autocomplete")._renderItem = function (ul, item) {
            return $("<li></li>")
            .append("<a>" + item+ "</a>")
            .appendTo(ul);
        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:15:58.337

如果你使用 jQuery Autocomplete 插件，你为什么要过度复杂化它并自己渲染它？

只需定义一个源脚本并按照自动完成模块的需要提供格式正确的 JSON 响应：

> 预期数据格式
> 
> 来自本地数据、url 或回调的数据可以有两种变体：
> 
> 字符串数组：[ "Choice1", "Choice2" ]
> 
> 具有标签和值属性的对象数组：[ { label: "Choice1", value: "value1" }, ... ]

```
source: "query.php"; 
```

让插件完成剩下的工作。

阅读 API：[jQuery 自动完成插件概述](http://docs.jquery.com/UI/Autocomplete)

如果您想做其他事情，只需注册并参加活动即可。

# objective-c - Xcode 中蓝牙设备的设备名称

> ID：10041114
> 
> 赞同：1
> 
> 时间：2012-04-06T08:40:51.410
> 
> 标签：objective-c, ios, bluetooth

我可以在我用 Xcode 开发的应用程序中获取 iPad 上连接的蓝牙设备的名称吗？这可能吗 ？你是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:11:49.050

你可以在这里找到一个教程：

[http://www.touchthatfruit.com/ios-bluetooth-development-tutorial-using-game](http://www.touchthatfruit.com/ios-bluetooth-development-tutorial-using-game)

以及这里的一些信息：

[蓝牙 Apple 文档](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/GameKitConcepts/GameKitConcepts.html#//apple_ref/doc/uid/TP40008304-CH100-SW1)

# c - hiredis c 插座

> ID：10041120
> 
> 赞同：2
> 
> 时间：2012-04-06T08:41:13.843
> 
> 标签：c, redis

```
reply = redisCommand(rcontext,"HGET %u %u",env->cr[3] ,KeyHandle);
if(reply == NULL)
{
printf("in preNtDeletKey rediscommand error ! and the err type is %d the string is %s \n" ,rcontext->err,rcontext->errstr)";
} 
```

这里我得到一个错误，回复返回NULL输出是

在 preNtDeletKey rediscommand 错误！错误类型为 1 字符串为**Interrupted system call**

我在我的项目中使用它。而且我在hiredis源中grep找不到中断的系统调用我想知道导致系统调用中断的原因hiredis如何将字符串写入redisContext（因为我在sourec中找不到）

我们如何避免被中断的系统调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T10:15:46.197

hiredis 包使用 Redis 协议编组您的命令，并将其发送到 Redis 服务器。然后它同步等待回复。

[您将在hiredis.c](https://github.com/antirez/hiredis/blob/master/hiredis.c)文件中找到处理套接字的函数：

```
int redisBufferRead(redisContext *c)
int redisBufferWrite(redisContext *c, int *done) 
```

在这些函数中，处理的是 EAGAIN 错误，而不是对应于“Interrupted system call”消息的 EINTR 错误。

结果是任何 Unix 信号，当hiredis 正在执行写入或（更有可能）读取操作时，进程接收到的任何 Unix 信号都可能中断操作并导致此错误。

您首先需要了解应用程序接收到哪种信号。根据信号的性质和应用，有多种方法可以处理这种情况：

*   在进行 Redis 调用之前屏蔽或延迟信号处理程序
*   将信号绑定到事件循环处理程序（如果有）以避免信号在不期望时被处理
*   专用给定线程来处理所有信号（并避免该线程中的任何 Redis 调用）
*   使用 SA_RESTART 选项（在 sigaction 中）告诉系统自动重放中断的系统调用
*   只是尝试再次进行操作（虽然它可能是不可能的）

就个人而言，我更喜欢hiredis 以更优雅的方式处理这种情况（即像EAGAIN 一样处理EINTR）。

**更新：**

EAGAIN 错误通常在两种情况下返回：

*   当通过调用 redisConnectNonBlock 或 redisConnectUnixNonBlock() 激活非阻塞模式时

*   当连接处于阻塞模式（默认）并且已调用 redisSetTimeout() 方法设置超时时

请注意在客户端调用 redisSetTimeout() 函数只需设置[套接字的 SO_RCVTIMEO 和 SO_SNDTIMEO 属性](http://linux.die.net/man/7/socket)。它与 Redis 配置文件中定义的超时完全无关，它是服务器端空闲超时（如果 Redis 服务器处于非活动状态超过 N 秒，则能够关闭连接）。

在第二种情况下获得 EAGAIN 意味着 Redis 实例对提供的超时没有足够的响应。您可能只想增加超时时间或进一步调查 Redis 服务器端的延迟问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:28:21.717

没有线索，但快速搜索表明（在 Linux 内核上）系统调用可以在没有任何问题时被中断，而当这种情况发生时，典型的事情就是再做一次。我的猜测是，由于这里没有什么可做的，是 Redis 数据库还是您的代码的某些部分没有处理这种情况。[http://www.win.tue.nl/~aeb/linux/lk/lk-4.html](http://www.win.tue.nl/~aeb/linux/lk/lk-4.html)

# ios - 从 Windows 向 iOS 提供地理位置数据

> ID：10041123
> 
> 赞同：2
> 
> 时间：2012-04-06T08:41:38.523
> 
> 标签：ios, windows, geolocation, gps

我想使用一台使用 Windows 7 的计算机向 iOS 设备提供数据。我想 Wifi 无法做到这一点，所以我想在我的 Windows 7 计算机上模拟蓝牙 GPS 设备，以便 iOS 设备可以连接到它。

我的问题是，我应该发送什么样的数据？我可以直接发送 NMEA 帧还是应该实施另一个 Apple 协议？我在哪里可以找到有关 iOS 中这些协议的规范？

这个想法是使地理定位数据可用于整个系统。也许通过使用我将在 Windows 上开发的软件“模拟”蓝牙外部 GPS 接收器。那么我的 Windows 软件应该通过蓝牙向 iOS 发送什么样的数据呢？iOS 如何将其检测为外部 GPS 接收器？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:47:01.540

我建议使用[bonjour](http://en.wikipedia.org/wiki/Bonjour_%28software%29)。这是一个自动连接协议，可以在同一子网中找到其他“播放器”（假设是相同的“WiFi”。

有一个用 C 编写 的[windows sdk ：](https://developer.apple.com/opensource/) [https ://developer.apple.com/opensource/](https://developer.apple.com/opensource/)

如何提交数据取决于您。您可以使用 GPS 数据创建 JSON 有效负载。您还可以创建二进制格式并使用 libz (zip) 对其进行压缩，然后再通过 bonjour 将其发送到您的 iOS 设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:14:53.983

您还可以在您的 PC 上设置 Web 服务器和 Web 服务，然后从您的设备通过本地网络 (WiFi) 简单地连接到它。我认为这需要服务器端和客户端的最少工作。您使用哪种格式（JSON、NMEA 的小数部分、其他）实际上取决于您，因为您必须同时编写服务器端和客户端的代码。然而，对于 JSON 和 XML，在客户端（iOS）和服务器（php、asp、servlet 等）端都有很多免费的框架，甚至还有一些 SDK 支持。

# c# - 一旦 BarcodePickerController 显示，通过 MonoTouch 使用 RedLaser SDK 就会崩溃

> ID：10041124
> 
> 赞同：4
> 
> 时间：2012-04-06T08:41:51.140
> 
> 标签：c#, xamarin.ios, barcode, barcode-scanner

我正在使用 Chris Branson 的 RedLaser MonoTouch 绑定和示例： [https ://github.com/chrisbranson/RedLaserSample](https://github.com/chrisbranson/RedLaserSample)

首先，为了帮助那些在这个示例项目中遇到问题的人，我必须更新 makefile 以构建 RedLaser.dll MonoTouch 绑定和示例 MonoDevelop csproj 以获得实际的应用程序编译。

*   **Makefile**
    Chris 提供的 makefile 解压缩了 RedLaser SDK 下载，但 RedLaser 更改了它们的命名约定，因此它不再工作。我对其进行了简化，而是要求用户手动将 libRedLaserSDK.a 文件放入构建目录：

    ```
    BTOUCH=/Developer/MonoTouch/usr/bin/btouch
    BUILDVER=build139
    VERSION=3.2.4
    BINDIR=./bin/

    all: $(BINDIR)RedLaser.dll

    $(BINDIR)libRedLaserSDK.a: 
        @echo "You'll need to obtain a copy of RedLaserDevSDK-$(VERSION).zip from"
        @echo "http://redlaser.com/sdk/index.php"
        @echo Locate the libRedLaserSDK.a file and place within
        @echo $(BINDIR)
        @echo 
        @open http://redlaser.com/sdk/index.php
        @exit 1

    $(BINDIR)RedLaser.dll: Makefile AssemblyInfo.cs RedLaser.cs enums.cs $(BINDIR)libRedLaserSDK.a
        $(BTOUCH) --out=$@ -e RedLaser.cs enums.cs AssemblyInfo.cs --link-with=$(BINDIR)libRedLaserSDK.a,libRedLaserSDK.a

    clean:
        -rm -rf $(BINDIR)*.dll 
    ```

    包含makefile 的目录也应该包含文件`redlaser.cs`，`enums.cs`和`AssemblyInfo.cs`（即与Chris 相同的）。

*   **MonoDevelop 项目构建设置**
    我认为这停止工作的原因是 MonoDevelop 或 MonoTouch 中的错误以及当它们包含引号时它扩展“附加 mtouch 参数”的方式。克里斯的原始论点如下所示：

    ```
    -cxx -gcc_flags="-framework SystemConfiguration -framework CFNetwork -framework CoreVideo -framework CoreMedia -framework AVFoundation -framework OpenGLES -framework Security -L${ProjectDir}/Lib -lRedLaserSDK -ObjC" 
    ```

    MonoDevelop 没有正确解析这个，而是在每个选项周围插入引号，用空格分隔。查看构建输出（在“编译为本机代码”下）表明这已扩展为：

    ```
    "/Users/tyson/Downloads/chrisbranson-RedLaserSample-1a5545f-1/RedLaserSample/Lib/RedLaser.dll" -debug -nolink -sdk "5.1" -targetver "5.1" --armv7 "-cxx" "-gcc_flags=\"-framework" "SystemConfiguration" "-framework" "CFNetwork" "-framework" "CoreVideo" "-framework" "CoreMedia" "-framework" "AVFoundation" "-framework" "OpenGLES" "-framework" "Security" "-L/Users/tyson/Downloads/chrisbranson-RedLaserSample-1a5545f-1/RedLaserSample/Lib" "-lRedLaserSDK" "-ObjC\"" 
    ```

    该解决方案包括在整个 'gcc_flags' 选项周围添加显式引号，手动转义内部引号。例如：

    ```
    "-cxx" "-gcc_flags=\"-framework SystemConfiguration -framework CFNetwork -framework CoreVideo -framework CoreMedia -framework AVFoundation -framework OpenGLES -framework Security -L${ProjectDir}/Lib -lRedLaserSDK -ObjC\"" 
    ```

    这正确地扩展为：

    ```
    "/Users/tyson/Downloads/chrisbranson-RedLaserSample-1a5545f-1/RedLaserSample/Lib/RedLaser.dll" -debug -nolink -sdk "5.1" -targetver "5.1" --armv7 "-cxx" "-gcc_flags=\"-framework SystemConfiguration -framework CFNetwork -framework CoreVideo -framework CoreMedia -framework AVFoundation -framework OpenGLES -framework Security -L/Users/tyson/Downloads/chrisbranson-RedLaserSample-1a5545f-1/RedLaserSample/Lib -lRedLaserSDK -ObjC\"" 
    ```

好的，所以现在我已经编译了它，我试图在我的手机上运行它。`RedLaserSDK.CheckReadyStatus()`该应用程序加载正常，并通过该函数成功调用 RedLaser SDK 。但是，只要我点击扫描按钮（加载`BarcodePickerController`），它就会崩溃，并在 RedLaser SDK 深处出现本机异常：

```
terminate called throwing an exception
Native stacktrace:

0   RedLaserSample                      0x0159d62d mono_handle_native_sigsegv + 244
1   RedLaserSample                      0x015b6251 sigabrt_signal_handler + 112
2   libsystem_c.dylib                   0x319b67ed _sigtramp + 48
3   libsystem_c.dylib                   0x319ac20f pthread_kill + 54
4   libsystem_c.dylib                   0x319a529f abort + 94
5   libc++abi.dylib                     0x34fb1f6b abort_message + 46
6   libc++abi.dylib                     0x34faf34d _ZL17default_terminatev + 24
7   libobjc.A.dylib                     0x358e536f _objc_terminate + 170
8   libc++abi.dylib                     0x34faf3c5 _ZL19safe_handler_callerPFvvE + 76
9   libc++abi.dylib                     0x34faf451 _ZdlPv + 0
10  libc++abi.dylib                     0x34fb079f __cxa_throw + 122
11  RedLaserSample                      0x000404a9 _ZN5zxing6qrcode19FinderPatternFinder18selectBestPatternsEv + 172
12  RedLaserSample                      0x000415e9 _ZN5zxing6qrcode19FinderPatternFinder4findERKNS_11DecodeHintsE + 512
13  RedLaserSample                      0x0003a7f7 _ZN5zxing6qrcode8Detector6detectERKNS_11DecodeHintsE + 366
14  RedLaserSample                      0x00046b97 _ZN5zxing6qrcode12QRCodeReader6decodeENS_3RefINS_12BinaryBitmapEEENS_11DecodeHintsE + 130
15  RedLaserSample                      0x0004ec35 _ZN5zxing6Reader6decodeENS_3RefINS_12BinaryBitmapEEE + 240
16  RedLaserSample                      0x00058455 -[FormatReader decode:] + 116
17  RedLaserSample                      0x00013835 -[ZXingDecoder findCodesInBitmap:bytesPerRow:width:height:] + 656
18  RedLaserSample                      0x0005f6af -[BarcodePhotoEngine zxingFindBarcodesInPixmap:] + 222
19  RedLaserSample                      0x00055f25 __38-[BarcodeEngine findBarcodesInPixMap:]_block_invoke_059 + 76
20  libdispatch.dylib                   0x34635c59 _dispatch_call_block_and_release + 12
21  libdispatch.dylib                   0x34637d0f _dispatch_queue_drain + 274
22  libdispatch.dylib                   0x34637b75 _dispatch_queue_invoke$VARIANT$mp + 40
23  libdispatch.dylib                   0x346387e7 _dispatch_worker_thread2 + 210
24  libsystem_c.dylib                   0x31967dfb _pthread_wqthread + 294
25  libsystem_c.dylib                   0x31967cd0 start_wqthread + 8

=================================================================  
Got a SIGABRT while executing native code. This usually indicates  
a fatal error in the mono runtime or one of the native libraries  
used by your application.  
================================================================= 
```

运行非常相似的 RedLaser Xcode 示例项目（即不涉及 MonoTouch，全部为 Objective-c）工作正常。

此外，如果它有任何意义，禁用所有条码扫描类型允许`BarcodePickerController`加载和显示相机视图。显然它永远不会检测到条形码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T15:12:05.447

您提到的崩溃现在已[在绑定中修复](https://github.com/mono/monotouch-bindings/commit/2deec96726c7125e73a8f09d80d2618745ad0dbf)。

这与 QR 对 C++ 异常的使用和不正确的链接参数有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T15:14:28.723

根据您粘贴的 Makefile，此 RedLaser 绑定使用 MonoTouch 支持的 LinkWith[1] 功能来消除使用任何“附加 mtouch 参数”的需要。

只需从项目选项中的其他 mtouch 参数配置中清除 RedLaser 所需的任何参数，事情就可能会构建并正常工作。

如果没有，请尝试使用来自[https://github.com/xamarin/monotouch-bindings](https://github.com/xamarin/monotouch-bindings)的 RedLaser 绑定，这可能是最新的？

笔记：

1.  [http://blog.xamarin.com/2011/11/02/monotouch-native-libraries-made-easy/](http://blog.xamarin.com/2011/11/02/monotouch-native-libraries-made-easy/)

# android - 可以使用 ormlite 进行 Android 加密/解密吗？

> ID：10041131
> 
> 赞同：2
> 
> 时间：2012-04-06T08:42:15.240
> 
> 标签：android, encryption, ormlite

我正在为我的 android-app 使用 ormlite。但现在我有一个问题。我有一个具有属性密码的类用户。我想加密/解密它。但我还没有找到适用于 ormlite 的解决方案。有人有想法吗？我已经发现，ormlite 不支持加密，但我正在寻找与 ormlite 一起使用的其他解决方案。

是否可以覆盖 Dao 中的 den CRUD 操作？（我是android新手，如果这是一个愚蠢的问题，我很抱歉）

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:02:53.367

好吧，您不会指定要存储在数据库中的明文密码字段，而只会存储加密的密码（或者甚至更好的是仅存储密码哈希，请参阅[Best way to store password in database](https://stackoverflow.com/questions/1054022/best-way-to-store-password-in-database)）。

所以你会有类似的东西

```
class User {
    @DatabaseField(canBeNull = false)
    private String passwordHash;

    public void setPassword(String password) {
        this.passwordHash = hashPassword(password);
    }

    public boolean isPasswordCorrect(String givenPassword) {
        return TextUtils.equals(hasPassword(givenPassword), passwordHash);
    }

    private String hashPassword(String password) {
        return AeSimpleSHA1.SHA1(password);
    }
}

public class AeSimpleSHA1 { 

    private static String convertToHex(byte[] data) { 
        StringBuffer buf = new StringBuffer();
        for (int i = 0; i < data.length; i++) { 
            int halfbyte = (data[i] >>> 4) & 0x0F;
            int two_halfs = 0;
            do { 
                if ((0 <= halfbyte) && (halfbyte <= 9)) 
                    buf.append((char) ('0' + halfbyte));
                else 
                    buf.append((char) ('a' + (halfbyte - 10)));
                halfbyte = data[i] & 0x0F;
            } while(two_halfs++ < 1);
        } 
        return buf.toString();
    } 

    public static String SHA1(String text) 
    throws NoSuchAlgorithmException, UnsupportedEncodingException  { 
        MessageDigest md;
        md = MessageDigest.getInstance("SHA-1");
        byte[] sha1hash = new byte[40];
        md.update(text.getBytes("iso-8859-1"), 0, text.length());
        sha1hash = md.digest();
        return convertToHex(sha1hash);
    } 
} 
```

SHA1 的东西无耻地从[How to SHA1 hash a string in Android?](https://stackoverflow.com/questions/5980658/how-to-sha1-hash-a-string-in-android) .

# sql - SQL Server：如何使用 getdate() 指定特定的默认日期格式？

> ID：10041132
> 
> 赞同：0
> 
> 时间：2012-04-06T08:42:31.380
> 
> 标签：sql, sql-server, sql-server-2008, datetime

我有 SQL Server 2008 R2，我的一张表有一个日期字段。当我的 ASP.NET 页面发生插入时，通过将默认字段值设置为`getdate()`. 但是，这会在格式中添加日期`YYYY-MM-DD HH:MM:SS.0000000`。我真的只需要最多几秒钟的时间，而不是后面的零。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T08:45:08.007

A `DateTime`、无论是在 SQL Server 还是 .NET 代码**中都没有格式**。它有一个内部表示。

当您想要*显示*的值时，`DateTime`您可以使用格式字符串对其进行格式化*。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:19:58.437

```
select (convert(char(19), getdate(), 121)) 
```

给出：

> 2012-04-06 10:16:50

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:45:44.107

在 SQL Server 2008 R2 之前，您所能做的就是`datetime`使用可能支持的格式列表转换您返回的（存储为 8 个字节） - 有关支持格式的完整列表，请参阅[有关 CAST 和 CONVERT 的 MSDN 文档。](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

使用 SQL Server 2012，您将能够使用类似于 .NET 中的[`FORMAT`函数- 但同样，这是 2012 版本中的](http://www.sqlservercentral.com/blogs/samvangassql/2011/11/29/new-string-function-in-sql-server-2012-_1320_-format_28002900_/)**新函数**，在早期版本中不可用。

# zend-framework - Zend Framework 的后端和前端缓存有什么不同

> ID：10041133
> 
> 赞同：3
> 
> 时间：2012-04-06T08:42:33.260
> 
> 标签：zend-framework, zend-cache

我正在为使用 Zend Framework 的网站实现缓存。

我查看源代码并看到：

```
Zend_Cache::factory() 
```

总是需要后端和前端两种配置。

我的问题是：

我不知道为什么后端设置在前端，
它们之间有什么区别？

```
$frontendObject->setBackend($backendObject);
return $frontendObject; 
```

* * *

### 以下是原始源代码：

```
public static function factory($frontend, $backend, $frontendOptions = array(), $backendOptions = array(), $customFrontendNaming = false, $customBackendNaming = false, $autoload = false)
{
    if (is_string($backend)) {
        $backendObject = self::_makeBackend($backend, $backendOptions, $customBackendNaming, $autoload);
    } else {
        if ((is_object($backend)) && (in_array('Zend_Cache_Backend_Interface', class_implements($backend)))) {
            $backendObject = $backend;
        } else {
            self::throwException('backend must be a backend name (string) or an object which implements Zend_Cache_Backend_Interface');
        }
    }
    if (is_string($frontend)) {
        $frontendObject = self::_makeFrontend($frontend, $frontendOptions, $customFrontendNaming, $autoload);
    } else {
        if (is_object($frontend)) {
            $frontendObject = $frontend;
        } else {
            self::throwException('frontend must be a frontend name (string) or an object');
        }
    }
    $frontendObject->setBackend($backendObject);
    return $frontendObject;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T08:47:13.543

缓存后端是“缓存引擎”：它可以是文件、memcached 等。

缓存前端指定将在缓存中存储什么样的数据（参见[http://framework.zend.com/manual/1.12/en/zend.cache.frontends.html](http://framework.zend.com/manual/1.12/en/zend.cache.frontends.html)）

# hibernate - 休眠选择表的所有行（使用 .* ）加入多个表，给出异常

> ID：10041134
> 
> 赞同：15
> 
> 时间：2012-04-06T08:42:34.400
> 
> 标签：hibernate, join

Hibernate可以做到这一点吗？

```
select A.something, B.something, C.something, D.something , E.*  
      from  A  
      LEFT OUTER JOIN B on A.id = B.id_fk  
      LEFT OUTER JOIN C ON B.id = C.id_fk  
      LEFT OUTER JOIN D ON C.id = D.id_fk  
      LEFT OUTER JOIN E ON A.abc = E.abc; 
```

此查询在 SQL 中运行良好，但在 Hibernate 中出现以下异常：

```
org.hibernate.hql.ast.QuerySyntaxException: expecting IDENT, found '*' near line 1 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-06T08:51:55.940

你不需要“*”。hibernate 正在转动对象，* 用于指向 SQL 中的列是没有意义的。当你想要 E 时，它会转动 E 对象。

> 从 E 中选择 E

这是 HQL`SELECT * FROM E`

当您调用 session.createQuery() 时，即使“FROM E”也有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-11T09:41:59.010

HQL 中的查询有所不同 - SQL -

> 从 A 中选择 * ；

高品质——

> 从一个

SQL——

> 从 A 中选择 b,c,d

高品质——

> 从 A 中选择 b,c,d

```
org.hibernate.Query query = createQuery("select b FROM aaaa");
        query.setReadOnly(true);
        return (List<Vector<aaaa>>)query.list(); 
```

[https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html](https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)

# android - 数学编程（数学优化）Android 库

> ID：10041139
> 
> 赞同：0
> 
> 时间：2012-04-06T08:42:58.913
> 
> 标签：android, optimization

我想开发一个应用程序，将使用数学编程来解决 lp 问题 ( [http://en.wikipedia.org/wiki/Mathematical_optimization](http://en.wikipedia.org/wiki/Mathematical_optimization) )。我在 c# 甚至 java 中使用了几年 lp solve ...我想知道是否有一些专门为 android 开发的库可以帮助我做到这一点。有人知道一些好的而且可能是免费的图书馆吗？

谢谢，

安德烈亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:09:25.827

如果您在 Java 中使用 jar 库，它们也应该适用于 Android 开发。就像在 Java 项目中一样，将它们添加到项目中。下面做一个简单的解释。

将外部 Jar 添加到您的 Android 项目或任何 Java 项目的最佳方法是：

*   在项目根文件夹中创建一个名为“libs”的文件夹

*   将您的 Jar 文件复制到 lib 文件夹

*   现在右键单击 Jar 文件和 Build Path > Add to Build Path，这将在您的项目中创建一个名为“Refrenced Library”的文件夹，您就完成了

现在，每当您转移项目时，您都不会遇到依赖关系问题。

您也可以参考这个答案以获得可与 Java 或 Android 一起使用的良好数学优化库：[Linear Algebra Library For Android](https://stackoverflow.com/questions/2807998/linear-algebra-library-for-android)

# html - 在 HTML5 音频标签中隐藏流 url

> ID：10041141
> 
> 赞同：0
> 
> 时间：2012-04-06T08:43:12.250
> 
> 标签：html, html5-audio

我使用下面的代码来隐藏我的 wordpress 网站的歌曲流 url……这意味着而不是：example.com/audio.mp3 url is example.com/streem.php?id=53502

我已经使用默认的 HTML 5 播放器对其进行了测试，它适用于 chrome 和 IE，但这不适用于此播放器：http: [//goo.gl/HziDr](http://goo.gl/HziDr)

谁能告诉我我的代码可以吗？

streem.php 的代码是：

```
<?php
require('./wp-config.php');  
$wp->init();  
$wp->parse_request();  
$wp->query_posts();  
$wp->register_globals(); 
$attachmentID = $_GET['id'];
$attachment = get_attached_file( $attachmentID , false );
header("Content-Transfer-Encoding: binary"); 
header('Content-Length: '. (string)filesize($attachment)); // provide file size
header('Content-type: audio/mpeg');
header('Cache-Control: no-cache');
readfile($attachment);
exit;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:49:46.857

我不认识那个播放器，但它可能不知道内容类型，需要文件扩展名才能工作。你可以追加

'&fmt=.mp3'

到您的网址，看看是否有帮助。您的 PHP 脚本应该忽略该查询参数，但希望播放器会看到 .mp3 扩展名然后工作。

# android - 在另一个线程中显示 ProgressBar

> ID：10041144
> 
> 赞同：0
> 
> 时间：2012-04-06T08:43:44.790
> 
> 标签：android, multithreading, progress-bar

这几天有点问题。我需要`ProgressBar`在主线程中做一些事情时显示简单（而不是对话框）......我认为这是一个非常简单的问题，但我不能这样做，请帮助我。

首先我尝试了简单的`setVisibility(View.VISIBLE)`前后`setVisibility(View.GONE)`。

但这是在同一个线程中进行的，并且`ProgressBar`在我的函数工作时冻结了。

现在我有这个代码，但我有一些错误，我不知道什么是错的..

我的简单布局：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
<ProgressBar
    android:id="@+id/loading"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:visibility="gone" />
</FrameLayout> 
```

我有一个基本活动：

```
public class BaseActivity extends Activity {
    public ProgressBar loading;

    public class ProgressBarShow extends AsyncTask<Void, Void, Void> {
    protected Void doInBackground(Void... unused) {
        return(null);
    }

    protected void onProgressUpdate() {
    }
    protected void onPreExecute() {
        loading.setVisibility(View.VISIBLE);
    }

    protected void onPostExecute() {
    }
   }
} 
```

最后是我的工作活动，它扩展了`BaseActivity`

```
public class SearchActivity extends BaseActivity {
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        loading = (ProgressBar) findViewById(R.id.loading);

        new ProgressBarShow().execute();
        //doing long stuff
        //new ProgressBarHide().execute(); there isnt, but sense the same
    }
} 
```

我有很多活动，需要进度条，这就是我创建的原因`BaseActivity`，而不是重复代码。

我需要在主线程中做长时间的工作（东西功能），因为我想冻结主窗口并且不允许用户做任何事情（点击按钮等），只显示工作进度条。

我的例子有什么问题？或者给我一些建议，我怎样才能做得更好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:52:56.107

```
class ProgressTask extends AsyncTask<Integer, Integer, Void>{
    ProgressBar progress;
    Context context;
    public ProgressTask(ProgressBar progress, Context context) {
        this.progress = progress;
        this.context = context;

    }
    @Override
    protected void onPreExecute() {
        // initialize the progress bar
        // set maximum progress to 100.
        progress.setMax(100);

    }

    @Override
    protected Void doInBackground(Integer... params) {
        // get the initial starting value
        int start=params[0];

        // increment the progress
        for(int i=start;i<=100;i+=5){
            try {
                boolean cancelled=isCancelled();
                //if async task is not cancelled, update the progress
                if(!cancelled){
                    publishProgress(i);
                    SystemClock.sleep(1000);

                }

            } catch (Exception e) {
                Log.e("Error", e.toString());
            }

        }
        return null;
    }
    //Has direct connection to UI Main thread
    //Called everytime publishProgress(int) is called in doInBackground
    @Override
    protected void onProgressUpdate(Integer... values) {
        progress.setProgress(values[0]);
        Toast.makeText(context, "test"+values[0], Toast.LENGTH_SHORT).show();
    }

    @Override
    protected void onPostExecute(Void result) {
        // async task finished
                    Log.v("Progress", "Finished");
    }
    @Override
    protected void onCancelled() {
        progress.setMax(0);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:55:01.610

使用 AsyncTask [http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html)将您的 ProgressBar 放入其中，而所有工作都在主线程中进行

# c# - WP7 WebClient HTTPs Not Found 错误

> ID：10041146
> 
> 赞同：0
> 
> 时间：2012-04-06T08:43:58.593
> 
> 标签：c#, windows-phone-7, https, webclient

我一直在寻找答案，但不幸的是，两者都无法帮助我。我需要 Windows Phone 7 使用 WebClient 和 https 连接到服务器，所以我使用以下代码：

```
WebClient wc = new WebClient();
wc.UploadStringCompleted += ....
wc.UploadStringAsync(new Uri("https://path.to.page/api"), "POST", "data=data"); 
```

在此之后，代码中断错误“未找到”，但是当我在浏览器中打开页面时一切正常。您有任何解决方案如何通过 https 连接吗？Http 工作正常。我也尝试过凭据。我也在这里尝试了其他人的建议，但没有任何效果。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-06T11:24:41.613

可能您的问题与下面的行有关

```
wc.UploadStringAsync(new Uri("https://path.to.page/api"), "POST", "data=data"); 
```

尝试将您的参数添加到您的 uri 中，如下所示

```
var params = "data=data";
wc.UploadStringAsync(new Uri("https://path.to.page/api?" + params), "POST"); 
```

并且绝对使用 fiddler 之类的程序来查看来自模拟器的请求。

希望对我有所帮助我没有使用 https 对其进行测试，但它与使用 http 应该没有什么不同。我看不到代码可能有任何其他问题。

# moles - 为什么我会得到一个其他人没有得到的 lambda 错误？

> ID：10041151
> 
> 赞同：0
> 
> 时间：2012-04-06T08:44:26.073
> 
> 标签：moles

我正在尝试调试以下行：

```
MOrigValue.AllInstances.TestString = () => "New value"; 
```

下面有一条红色波浪线：

```
() => "New value"; 
```

鼠标悬停显示以下错误：

```
Delegate 'Microsoft.Moles.Framework.MolesDelegates.Func<OrigValueP.OrigValue, string>' does not take 0 arguments 
```

这是完整的课程：

```
namespace OrigValueP
{
    public class OrigValue
    {
        public string TestString() { return "Original value"; }
    }
} 
```

这是来自对象浏览器的信息。

单击属性 MOrigValue.AllInstances.TestString：

```
public static Microsoft.Moles.Framework.MolesDelegates.Func<OrigValueP.OrigValue,string> TestString { set; }
Member of OrigValueP.Moles.MOrigValue.AllInstances 
```

所以，对于像我这样的非技术人员来说，这可以解释上面的红色波浪线错误..

单击属性 MOrigValue..TestString：

```
public Microsoft.Moles.Framework.MolesDelegates.Func<string> TestString { set; }
Member of OrigValueP.Moles.MOrigValue 
```

对我来说，这看起来就像我期望看到的 MOrigValue.AllInstances.TestString 的定义。换句话说，一个属性实际上是一个 Moled “方法”，它没有参数并返回一个字符串。

作为一个实验，基于上面的第一个对象浏览器信息，我将类作为输入参数插入，如下：

```
MOrigValue.AllInstances.TestString = (OrigValue) => "New value"; 
```

这有效:)

但我的解决方法看起来像一个“黑客”。我已经看过互联网上的每一页（包括 StackOverflow）与痣以及如何轻松去除它们。其中许多具有类似于以下的 lambda 行：

```
MMyClass.AllInstances.DoSomething = () => "Hello world";
Assert.AreEqual("Hello world", new MyClass().DoSomething()); 
```

根本问题是 Moles 从一个不带参数并返回字符串的方法开始。Moled 等效项将其自己的类作为参数并返回一个字符串。Moles 肯定知道 TestString() 是 OrigValue 的成员。

也许我的问题是使用 VS Express 而不是付费版本的结果。我可以忍受这一点，但知道我为什么需要黑客仍然很有趣。在我不知情的情况下，黑客可能会产生不正确的测试结果。

BTW：我认为这个例子证明了对象浏览器的价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T04:59:48.120

你的期望是错误的。`AllInstances`您描述的“hack”是使用嵌套类型的官方记录方式。它的委托确实总是接受一个包含被测类型实例的参数。

您不太可能看到这种形式的使用`AllInstances`

```
MMyClass.AllInstances.DoSomething = () => "Hello world"; 
```

如果有的话，这可能是代码作者犯的一个错误。

您期望定义的属于该`AllInstances`类型的委托实际上是 Moles 的另一种用法：它用于绕过单个实例的实例方法。

文档“Microsoft Moles 参考手册”的“Mole 基础知识”部分包含有关该主题的更多信息。这是那里的摘录。

## 实例方法（一个实例）

...设置这些痣的属性是痣类型本身的实例方法。每个实例化的摩尔类型也与一个摩尔方法类型的原始实例相关联。

例如，给定一个`MyClass`具有实例方法的类`MyMethod`：

```
public class MyClass {
    public int MyMethod() {
        ...
    }
} 
```

我们可以设置两种类型的痣`MyMethod`，第一种总是返回 5，第二种总是返回 10：

```
var myClass1 = new MMyClass() { MyMethod = () => 5 };
var myClass2 = new MMyClass() { MyMethod = () => 10 }; 
```

# ios - GLKit：[绘制像素] 初始化 GLfloat 数组

> ID：10041157
> 
> 赞同：1
> 
> 时间：2012-04-06T08:44:58.237
> 
> 标签：ios, opengl-es, glkit

我正在使用 GLKit 绘制像素。如果我有，我可以成功地在 (10, 10) 坐标处绘制像素：

```
glClearColor(0.65f, 0.65f, 0.65f, 1.0f);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

// Prepare the effect for rendering 
[self.effect prepareToDraw];

GLfloat points[] =
{
    10.0f, 10.0f,
};

glClearColor(1.0f, 1.0f, 0.0f, 1.0f);

GLuint bufferObjectNameArray;
glGenBuffers(1, &bufferObjectNameArray);
glBindBuffer(GL_ARRAY_BUFFER, bufferObjectNameArray);

glBufferData(
             GL_ARRAY_BUFFER,
             sizeof(points),
             points,
             GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);

glVertexAttribPointer(
                      GLKVertexAttribPosition,
                      2,
                      GL_FLOAT,
                      GL_FALSE,
                      2*4,
                      NULL);
glDrawArrays(GL_POINTS, 0, 1); 
```

但是我想在运行时决定要绘制像素的数量和确切位置，所以我尝试了这个，但它在 (10, 0) 处绘制像素，这里出了点问题：

```
glClearColor(0.65f, 0.65f, 0.65f, 1.0f);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

// Prepare the effect for rendering 
[self.effect prepareToDraw];

GLfloat *points = (GLfloat*)malloc(sizeof(GLfloat) * 2);
for (int i=0; i<2; i++) {
    points[i] = 10.0f;
}

glClearColor(1.0f, 1.0f, 0.0f, 1.0f);

GLuint bufferObjectNameArray;
glGenBuffers(1, &bufferObjectNameArray);
glBindBuffer(GL_ARRAY_BUFFER, bufferObjectNameArray);

glBufferData(
             GL_ARRAY_BUFFER,
             sizeof(points),
             points,
             GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);

glVertexAttribPointer(
                      GLKVertexAttribPosition,
                      2,
                      GL_FLOAT,
                      GL_FALSE,
                      2*4,
                      NULL);
glDrawArrays(GL_POINTS, 0, 1); 
```

请帮帮我。

编辑： **问题** 实际上问题是：我不知道有什么区别：

```
GLfloat points[] =
{
    10.0f, 10.0f,
}; 
```

和

```
GLfloat *points = (GLfloat*)malloc(sizeof(GLfloat) * 2);
for (int i=0; i<2; i++) {
    points[i] = 10.0f;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:59:01.017

我敢打赌，问题出`sizeof(points)`在`glBufferData`数据调用中：在这种情况下，它将返回*指针*的大小，即一个字，即 4 个字节（或类似的东西）。您应该传递数组的*实际*大小，这与您在`malloc`代码中计算的大小相同。

# android - android构建静态库

> ID：10041158
> 
> 赞同：2
> 
> 时间：2012-04-06T08:45:02.157
> 
> 标签：android, android-ndk, static-libraries

我打算将静态 Linux .a 库使用到 android 中。我使用以下链接创建了静态 .a 文件[http://codingfreak.blogspot.in/2010/01/creating-and-using-static-libraries-in.html](http://codingfreak.blogspot.in/2010/01/creating-and-using-static-libraries-in.html)

我的 Android 应用程序中有以下 Android.mk 文件。

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE:= first-prebuilt
LOCAL_SRC_FILES:= libarith.a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := test-main
LOCAL_STATIC_LIBRARIES := first-prebuilt
LOCAL_SRC_FILES := native.cpp
LOCAL_C_INCLUDES := $(LOCAL_PATH)/include
include $(BUILD_SHARED_LIBRARY) 
```

当我使用 ndk-build r7b 构建应用程序时，它会出现以下错误。

```
Сompile++ thumb  : test-main <= native.cpp
SharedLibrary  : libtest-main.so
/home/hiren/NDK-r7b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld: /home/hiren/workspace/VideoTEST/obj/local/armeabi/libarith.a(addition.o): Relocations in generic ELF (EM: 3)
/home/hiren/workspace/VideoTEST/obj/local/armeabi/libarith.a: could not read symbols: File in wrong format
collect2: ld returned 1 exit status
make: *** [/home/hiren/workspace/VideoTEST/obj/local/armeabi/libtest-main.so] Error 1 
```

任何人都可以帮忙，我被困了很长时间，在这里......提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:34:16.767

您需要以 android 格式构建静态库。另请参阅[将 C++ 静态库与 android ndk 链接时出错（错误：文件格式无法识别）](https://stackoverflow.com/questions/8311874/error-in-linking-c-static-library-with-android-ndkerror-file-format-not-reco/8312255#8312255)

# javascript - 如何获取在javascript中初始化请求的Id更新面板

> ID：10041169
> 
> 赞同：2
> 
> 时间：2012-04-06T08:47:17.377
> 
> 标签：javascript, asp.net, ajax, asp.net-ajax, updatepanel

我想知道在 JavaScript 中初始请求的 Id 更新面板。我编写了这个脚本，但它返回了`undefined`。

```
var prm = Sys.WebForms.PageRequestManager.getInstance();
prm.add_initializeRequest(InitializeRequest);
prm.add_endRequest(EndRequest);

function InitializeRequest(sender, args) {
    alert(sender.ID);
}
function EndRequest(sender, args) {
} 
```

`sender`不为空，它返回`[object]`但我怎么能得到`ID`？

* * *

**编辑 1)**

我认为当`UpdatePanel`在里面`MasterPage`它不起作用。这是我的代码：

```
<script type="text/javascript">
    $(document).ready(function () {
        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_initializeRequest(InitializeRequest);
        prm.add_endRequest(EndRequest);

        function InitializeRequest(sender, args) {
            var UpdPanelsIds = args.get_updatePanelsToUpdate();
            alert(UpdPanelsIds[0]);
        }
        function EndRequest(sender, args) {
            if ($('.AlarmLogo').val() == "3") {
                alert('nima');
            }
        }
    });

</script> 
```

和 ：

```
<form runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:Timer ID="timer" Interval="4000" runat="server" OnTick="timer_Tick" />
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:Panel ID="pnlAlarm" runat="server" CssClass="pnlAlarm" ClientIDMode="Static">
            <a href="#">
                <div id="Alarm">
                    <asp:TextBox ID="lblContent" runat="server" Text="HHHEEELLLOOO" CssClass="AlarmLogo" ClientIDMode="Static"></asp:TextBox>
                </div>
            </a>
        </asp:Panel>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="timer" />
    </Triggers>
</asp:UpdatePanel>
    <div class="main">
        <asp:ContentPlaceHolder ID="MainContent" runat="server" />
    </div>
</form> 
```

和后面的代码：

```
protected void Page_Load(object sender, EventArgs e) 
{     
    if (!IsPostBack)     
    {         
        Session["nima"] = 1;    
    } 
} 

protected void timer_Tick(object sender, EventArgs e) 
{    
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T09:05:27.240

您可以使用`get_updatePanelsToUpdate`返回一个数组，其中包含将要更新的 UpdatePanel 的 Id。

```
<script>
    window.onload = function() {
        var prm = Sys.WebForms.PageRequestManager.getInstance();

        prm.add_initializeRequest(InitializeRequest);
        prm.add_endRequest(EndRequest);
    };

      function InitializeRequest(sender, args) 
      {     
         // get the array of update panels id
         var UpdPanelsIds = args.get_updatePanelsToUpdate();
         // get the Post ID
         args.get_postBackElement().id;
      }

      function EndRequest(sender, args) {
      }
</script> 
```

[http://msdn.microsoft.com/en-us/library/ee224805.aspx](http://msdn.microsoft.com/en-us/library/ee224805.aspx)

# mercurial - Mercurial - 从其他存储库获取更改

> ID：10041175
> 
> 赞同：1
> 
> 时间：2012-04-06T08:47:46.040
> 
> 标签：mercurial

我们在 BitBucket 上有一个 Mercurial 存储库。这个存储库被很多人使用。

现在我有另一个本地存储库，它是 BitBucket 存储库的超集。我想做的是在我的仓库中工作，并在其他人提交和推送时从其他仓库获取更改。我不想仅获得最后一次修订的其他文件的历史记录。

最好的方法是什么？

目前，我已经克隆了另一个存储库，并将更改从该存储库提取到我的存储库中。那行得通，但我的问题是，每当我得到更改时，我都必须进行巨大的合并才能修复我的存储库。还有其他方法可以从其他存储库获取更改并将它们放入我的分支吗？我不在乎获取这些文件的历史记录。我可以将它们复制并粘贴到我的存储库中，但我希望能够尽可能合并更改，这仅通过复制粘贴覆盖更新的文件是不可能的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:09:19.983

您可以将另一个存储库作为[子](http://mercurial.selenic.com/wiki/Subrepository)存储库放入您的存储库中。

这不完全是您所要求的，因为您说您不想要另一个存储库的历史记录，只想要最后一个修订版。
但是正如您自己已经注意到的那样，您尝试过的所有其他事情（将其他存储库拉入您的存储库，手动复制文件......）都很麻烦。
使用子存储库，您只需更新子存储库即可获得其他人所做的更改。

# postgresql - 错误：用于编码“UTF8”的无效字节序列插入 pgadmin

> ID：10041177
> 
> 赞同：0
> 
> 时间：2012-04-06T08:48:05.813
> 
> 标签：postgresql, pgadmin

在具有字符 é 的 postgres 中插入数据时遇到问题。通过 PGADMIN 插入此字符时，它会将字符解析为 ETX，而 pgsql shell 将其解析为 ^C。当我将带有字符的查询保存在文件中并将文件传递到 psql shel 时，它给了我一个错误：

错误：编码“UTF8”的字节序列无效：0x82

我的 Postgres 9.0 Db 编码设置为 UTF-8。

请让我知道如何处理这些字符。

谢谢，罗希特。

PS：我不确定角色是否可以在这里正常看到。它是一个方框图字符，用 ASCII 表示为 – 192，UTF-8 表示为 – U+2514

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:22:10.620

简单的解决方案是找出您的客户端使用的编码`SET client_encoding`

例如，这可能会解决您的问题：

```
SET client_encoding = 'WIN1252'; 
```

如果您在使用 pgadmin 的 Windows 上，Windows 1252 的客户端编码将是问题的最可能原因。

# java - JUNG：绘制后将子级添加到 DelegateTree

> ID：10041179
> 
> 赞同：3
> 
> 时间：2012-04-06T08:48:17.430
> 
> 标签：java, swing, tree, visualization, jung

我正在开发一个 Java 应用程序，并且正在使用 JUNG 库。在我的应用程序中，我首先创建一个`DelegateTree`并将其绘制到屏幕上：

```
public static GraphZoomScrollPane generateTree(Tree tree,
    GraphicalUserInterface gui) {

    /* Create a new tree */
    edu.uci.ics.jung.graph.Tree<Node, Edge> graphTree = new DelegateTree<Node, Edge>();

    /* Add all nodes and vertices to the tree */
    graphTree.addVertex(tree.getRoot());
    addChildren(tree.getRoot(), graphTree);

    /* Create the visualization */
    TreeLayout<Node, Edge> treeLayout = new TreeLayout<Node, Edge>(graphTree);
    VisualizationViewer<Node, Edge> vv = new VisualizationViewer<Node, Edge>(treeLayout);
    vv.setBackground(Color.WHITE);
    vv.getRenderContext().setEdgeLabelTransformer(new ToStringLabeller<Edge>());
    vv.getRenderContext().setEdgeShapeTransformer(new EdgeShape.Line<Node, Edge>());
    vv.getRenderContext().setVertexLabelTransformer(new ToStringLabeller<Node>());
    vv.getRenderer().getVertexLabelRenderer().setPosition(Renderer.VertexLabel.Position.S);

    vv.addGraphMouseListener(new ClickNode(gui, vv));
    final DefaultModalGraphMouse<Node, Edge> graphMouse = new DefaultModalGraphMouse<Node, Edge>();
    graphMouse.setMode(ModalGraphMouse.Mode.TRANSFORMING);
    vv.setGraphMouse(graphMouse);

    return new GraphZoomScrollPane(vv);
} 
```

之后，用户可以将新的孩子添加到我的树的叶子上。但是当我这样做的时候

```
graphTree.addEdge(edge, parent, child); 
```

然后重新绘制`VisualizationViewer`，可视化失去了“树”结构。它只是在父级上方的某个位置添加子级，并将该新子级的所有其他子级添加到它之上。

有没有更好的方法来动态地将孩子添加到我的树的叶子上？还是我必须使用其他东西来重绘而不是仅仅`vv.repaint()`？

任何帮助将不胜感激。

发生的事情的一个例子：

[http://www.dylankiss.be/JUNGExample.PNG](http://www.dylankiss.be/JUNGExample.PNG)

从根 (OUTLOOK) 开始，添加 3 个具有不同边缘（晴天、阴天、雨天）的子节点（叶子、叶子、叶子）后，它们只是彼此重叠。

**编辑**：这是`addChildren()`方法。

```
private static void addChildren(Node node, edu.uci.ics.jung.graph.Tree<Node, Edge> tree) {
    for (int i = 0; i < node.getChildren().size(); i++) {
        tree.addEdge(new Edge(node.getChildren().get(i).getParentValue()), node, node.getChildren().get(i));
        addChildren(node.getChildren().get(i), tree);
    }
} 
```

**编辑 2**：这是 AWT ActionListener 的一部分，我在其中将新子级添加到树中。

```
while (there are still edges to be added) {
    value = name of new edge;
    child = new Node(this.m_node, value);
    this.m_node.addChild(child);
    graphTree.addEdge(new Edge(value), this.m_node, child);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T10:05:49.587

在这里发布负责添加新边的方法会有所帮助:)

但乍一看，您似乎在相同的两个节点（OUTLOOK 和 Leaf）之间添加了 3 个不同的边。我猜你正在这样做（或 Node 和 Edge 实例的等价物）：

```
graphTree.addChild("sunny", "OUTLOOK", "Leaf");
graphTree.addChild("overcast", "OUTLOOK", "Leaf");
graphTree.addChild("rainy", "OUTLOOK", "Leaf"); 
```

在这种情况下，由于 JUNG 图保持节点的唯一性，您最终只有两个节点，并且它们之间有 3 条不同的边。当 JUNG 尝试显示此图时，您将获得两个节点和 3 个重叠边，就像您使用 EdgeShape.Line 一样。

如果您最初的目标确实是在两个节点之间设置 3 条不同的边缘，请尝试使用不同的边缘形状以避免重叠并获得更好的渲染效果，例如 EdgeShape.BentLine 等。

如果您想要 3 个不同的节点，则必须使用 3 个不同的名称，或 3 个不同的 Node 实例*，它们不等于*。

祝你好运 ：）

**编辑**：

根据您的评论，我查看了 TreeLayout 源代码，并且有一个小问题导致无法动态更新布局。

**要解决此问题**，请改用此类：

```
import edu.uci.ics.jung.algorithms.layout.TreeLayout;
import java.awt.Point;
import java.util.Collection;

import edu.uci.ics.jung.graph.Forest;
import edu.uci.ics.jung.graph.util.TreeUtils;

public class DynamicTreeLayout<V, E>
    extends TreeLayout<V, E>
{
public DynamicTreeLayout(Forest<V, E> g) {
    this(g, DEFAULT_DISTX, DEFAULT_DISTY);
}

public DynamicTreeLayout(Forest<V, E> g, int distx) {
    this(g, distx, DEFAULT_DISTY);
}

public DynamicTreeLayout(Forest<V, E> g, int distx, int disty) {
    super(g, distx, disty);
}

protected void buildTree() {
    alreadyDone.clear(); // This was missing and prevented the layout to update positions

    this.m_currentPoint = new Point(20, 20);
    Collection<V> roots = TreeUtils.getRoots(graph);
    if (roots.size() > 0 && graph != null) {
        calculateDimensionX(roots);
        for (V v : roots) {
            calculateDimensionX(v);
            m_currentPoint.x += this.basePositions.get(v) / 2 + this.distX;
            buildTree(v, this.m_currentPoint.x);
        }
    }
}

private int calculateDimensionX(V v) {
    int localSize = 0;
    int childrenNum = graph.getSuccessors(v).size();

    if (childrenNum != 0) {
        for (V element : graph.getSuccessors(v)) {
            localSize += calculateDimensionX(element) + distX;
        }
    }
    localSize = Math.max(0, localSize - distX);
    basePositions.put(v, localSize);

    return localSize;
}

private int calculateDimensionX(Collection<V> roots) {
    int localSize = 0;
    for (V v : roots) {
        int childrenNum = graph.getSuccessors(v).size();

        if (childrenNum != 0) {
            for (V element : graph.getSuccessors(v)) {
                localSize += calculateDimensionX(element) + distX;
            }
        }
        localSize = Math.max(0, localSize - distX);
        basePositions.put(v, localSize);
    }

    return localSize;
}
} 
```

如果您希望更新布局并为图形的每次修改重新绘制查看器，您还需要添加以下内容：

```
layout.setGraph(g);
vv.repaint(); 
```

# jquery - 相当于 jQuery - Prototype 中的 .one()？

> ID：10041181
> 
> 赞同：0
> 
> 时间：2012-04-06T08:48:21.123
> 
> 标签：jquery, prototypejs

有人知道`.one()`原型中的替代方案吗？

**查询功能**

```
$("img").one('load', function() {
   // do stuff
}).each(function() {
   if(this.complete) $(this).load();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T13:10:29.517

您可以尝试以下方法：

```
$$("img").each(function(i) {
    var handler = i.on("load", function() {
        handler.stop();
        // do stuff
    });
    // other stuff
}); 
```

# html - 如何将主域重定向到另一个域但不包括重定向中的子域 - htaccess

> ID：10041182
> 
> 赞同：0
> 
> 时间：2012-04-06T08:48:21.640
> 
> 标签：html, linux, .htaccess, hosting

我的域有 .co.uk 和 .com，我目前有 .co.uk 设置以重定向到 .com。虽然这可行，但我现在需要稍微改进此重定向，使其不包含任何子域。所以 www.domainname.co.uk 将重定向到另一个，但 subdomain.domainname.co.uk 不会重定向。

这可能吗？如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:34:42.980

你可能想看看`RewriteCond`，像这样：

```
RewriteCond %{HTTP_HOST} www.\mysite\.co\.uk [NC]
RewriteRule (.*) http://www.mysite.com/$1 [R=301] 
```

有关更多详细信息`RewriteCond`：[http ://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)

# php - 算法转换为 php 或 python 的伪代码，用于整数的分区

> ID：10041184
> 
> 赞同：-5
> 
> 时间：2012-04-06T08:48:32.337
> 
> 标签：php, python, algorithm, combinatorics, data-partitioning

```
def partitions(n):
    # base case of recursion: zero is the sum of the empty list
    if n == 0:
        yield []
        return

    # modify partitions of n-1 to form partitions of n
    for p in partitions(n-1):
        yield [1] + p
        if p and (len(p) < 2 or p[1] > p[0]):
            yield [p[0] + 1] + p[1:] 
```

说明：如果您有一个 n 的分区，您可以通过从分区中的最小项目中减去一个以规范的方式将其减少为 n-1 的分区。例如 1+2+3 => 2+3、2+4 => 1+4。该算法反转该过程：对于 n-1 的每个分区 p，它找到 n 的分区，该分区将通过此过程减少为 p。因此，n 的每个分区恰好输出一次，在考虑它减少到的 n-1 分区的步骤中。

这是用于在 Python 中获取数字的所有可能分区的代码。我不擅长 Python。如果有人可以将其转换为伪代码（或详细描述）或 PHP，我将不胜感激。上面的解释让我对“从分区中最小的项目中减去一个”产生了疑问。我也可以从第二小的元素或其他元素中减去一个。那么，为什么只有最小的呢？如果有人可以向我解释整个想法，那将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:42:57.670

```
def partitions(n):
    # base case of recursion: zero is the sum of the empty list
    if n == 0:
        yield [] # yield empty array
        return # exit function

    # modify partitions of n-1 to form partitions of n
    for p in partitions(n-1): # recursive call, get n-1 partitions
        yield [1] + p # yield array [1, p...]
        if p and (len(p) < 2 or p[1] > p[0]): # p not empty, and length < 2 or p[1] > p[0]
            yield [p[0] + 1] + p[1:] # increment first item of p and yield p 
```

这是我的尝试（afaik PHP 没有`yield`，因此它的性能可能会更差）：

```
function partitions($n) {
   # base case of recursion: zero is the sum of the empty list
   if(!$n) return array(array()); # return/"yield" empty array

   # modify partitions of n-1 to form partitions of n
   $a = array(); # will hold "yielded" values
   foreach(partitions($n-1) as $p) { # recursive call
     $a[] = array_merge(array(1), $p); # "yield" array [1, p...]
     if($p && (count($p) < 2 || $p[1] > $p[0])) { # p not empty, and length < 2 or p[1] > p[0]
       ++$p[0]; # increment first item of p
       $a[] = $p; # "yield" p
     }
   }
   return $a; # return all "yielded" values at once
} 
```

（我不保证什么）

# mongodb - Mongo DB - 在 v2.1.0 中使用 $group 执行求和

> ID：10041185
> 
> 赞同：1
> 
> 时间：2012-04-06T08:48:32.793
> 
> 标签：mongodb, aggregation-framework

Mongo DB - 数据聚合（在 MongoDB 2.1.0 - 不稳定版本中）：

```
db.test.save({serverName:'abc123', info:[12,43,23,10]});

db.test.save({serverName:'abc123', info:[12,22,19,11]});

db.test.aggregate({$group:{_id:"$serverName", infoTotal:{ $sum : "$info"}}});

Response: "errmsg" : "exception: the _id field for a group must not be undefined", 
```

不知道我做错了什么，例如：[http ://www.mongodb.org/display/DOCS/Aggregation+Framework+-+%24group](http://www.mongodb.org/display/DOCS/Aggregation+Framework+-+%24group)

显示如何执行聚合。

将不胜感激一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:57:34.240

有两个问题。

1.) 您的收藏中有一些没有 serverName 的文档。你可以找到他们做 find({serverName:null})

2.) 你需要先 $unwind 数组

这是一个工作示例：

```
> db.agg1.find()
{ "_id" : 1, "serverName" : "abc123", "info" : [ 12, 43, 23, 10 ] }
{ "_id" : 2, "serverName" : "abc124", "info" : [ 12, 22, 19, 11 ] }
{ "_id" : 3, "serverName" : "abc124", "info" : [ 1, 25, 2, 11 ] }

> db.agg1.aggregate({$unwind: "$info"},{$group:{_id:"$serverName", infoTotal:{ $sum : "$info"}}});
{
        "result" : [
                {
                        "_id" : "abc123",
                        "infoTotal" : 88
                },
                {
                        "_id" : "abc124",
                        "infoTotal" : 103
                }
        ],
        "ok" : 1
} 
```

# c# - 重复代码执行

> ID：10041188
> 
> 赞同：0
> 
> 时间：2012-04-06T08:49:36.600
> 
> 标签：c#

我试图在预定义的时间过去后重复代码执行，我不想通过使用线程来搞砸事情。下面的代码是一个好习惯吗？

```
Stopwatch sw = new Stopwatch(); // sw constructor
EXIT:
    // Here I have my code
    sw.Start();
    while (sw.ElapsedMilliseconds < 100000)
    {
        // do nothing, just wait
    }

    System.Media.SystemSounds.Beep.Play(); // for test
    sw.Stop();
    goto EXIT; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T08:51:39.033

使用*计时器*而不是标签和`StopWatch`. 您正在忙于等待，将 CPU 紧紧地束缚在这个循环中。

您启动一个计时器，给它一个触发时间间隔（100000 毫秒），然后在事件的事件处理程序中运行您的代码`Tick`。

请参阅MSDN 杂志[中的 .NET Framework 类库中的比较计时器类。](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T08:58:04.110

您可以使用 Oded 建议的计时器：

```
public partial class TestTimerClass : Form
{
    Timer timer1 = new Timer(); // Make the timer available for this class.
    public TestTimerClass()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        timer1.Tick += timer1_Tick; // Assign the tick event
        timer1.Interval = 1000; // Set the interval of the timer in ms (1000 ms = 1 sec)
        timer1.Start(); // Start the timer
    }

    void timer1_Tick(object sender, EventArgs e)
    {
        System.Media.SystemSounds.Beep.Play();
        timer1.Stop(); //  Stop the timer (remove this if you want to loop the timer)
    }
} 
```

编辑：只是想告诉你如何制作一个简单的计时器，如果你不知道如何:)

# asp.net - Asp.Net 登录页面，最好的方法是什么

> ID：10041194
> 
> 赞同：0
> 
> 时间：2012-04-06T08:49:59.310
> 
> 标签：asp.net, ajax

我正在使用`Asp.Net/C#`并`Visual Studio 2008`构建一个应用程序。现在我想为我的应用程序创建一个登录页面，我想问你们，最好的方法是什么。我应该去还是应该尝试`Forms Authentication in Asp.Net`看看.哪个更合适。如果可能的话，请让我知道这些方法的一些优缺点。也有人可以建议我一些链接作为一个好的起点。任何建议都非常受欢迎。谢谢`Ajax Login``Asp.Net`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:03:24.397

我认为您必须进行表单身份验证。以下是它的优点。

```
1) users do not have to be member of a domain-based network to have access to your application. 
2) Web applications, particularly commercial sites where customers order products, want to have access to user information. Forms authentication makes these types of applications easier to create.
3) Keep personalization cookies that contain user-specific preferences and non-sensitive data separate from authentication cookies.
4)Consider reducing the cookie lifetime to reduce the time window in which an attacker can use a captured cookie to gain access to your application with a spoofed identity. 
```

列出在 Web 应用程序中使用表单身份验证的步骤？

```
1.Set the authentication mode in Web.config to Forms.
2.Create a Web form to collect logon information.
3.Create a file or database to store user names and passwords.
4.Write code to add new users to the user file or database.
5.Write code to authenticate users against the user file or database. 
```

希望这些信息对您做出决定有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:53:24.830

使用[OAuth](http://oauth.net/)登录。

它也有 ASP.net 绑定.. [http://oauth.net/code/](http://oauth.net/code/)

# php - 登录php时的用户ID

> ID：10041196
> 
> 赞同：1
> 
> 时间：2012-04-06T08:50:01.917
> 
> 标签：php, session, url, login

用户登录时如何获取 URL 中的 userid=""。我有带有表用户的 mysql 数据库。我想知道代码，它基本上知道登录的用户的 id 是什么。并且使用会话但不确定代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T08:52:08.047

为什么不将用户 ID 存储在会话变量中？

```
// Get it from the db, after login

$_SESSION['user_id'] = $userid; 
```

**例子 ：**

[一个简单的登录脚本（将用户 ID 等存储到会话变量中）](http://www.knowledgesutra.com/discuss/tlddl-php-simple-login-tutorial-learn-simple-login.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T10:26:51.607

```
$login_record = $YourLoginClassObject->Validate($email, $password);

if ($login_record != NULL ) //user record exist
{

$row = mysql_fetch_array($login_record);
$_SESSION["userid"] = trim($row["id"]);

// also you can store other information in session variables, like 
$_SESSION["first_name"] = $row["first_name"];
$_SESSION["last_name"] = $row["last_name"];

}
else
{
//user not exist
} 
```

在会话中设置用户 ID 后，您可以使用在任何页面上检索它`$_SESSION["userid"]`

快乐编码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T08:52:07.070

为什么你需要 url 中的 userId，它会产生安全问题，如果你传递 userId 并且用户更改了 url 中的 id，那么在后端你将最终对错误的 userId 进行操作，总是从会话中获取用户详细信息。

有关如何将用户信息存储到会话的说明，[请参阅此答案](https://stackoverflow.com/a/9895587/308251)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T08:52:37.327

您应该将用户 ID 存储在会话中（例如 ($_SESSION["userid"])）

# php - 将常量（非变量）插入“heredoc”

> ID：10041200
> 
> 赞同：53
> 
> 时间：2012-04-06T08:50:29.960
> 
> 标签：php, syntax, constants, heredoc

考虑：

```
<?php
   define('my_const', 100);
   echo <<<MYECHO
      <p>The value of my_const is {my_const}.</p>
MYECHO;
?> 
```

如果我在大括号内放置一个变量，它会打印出来。但不是常数。我该怎么做？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-02T14:06:25.393

您还可以通过将常量的值分配给变量来解决问题。

就我个人而言，我这样做是因为如果您的字符串中有很多常量，那么您的 sprintf() 调用可能会非常混乱。然后也更难扫描字符串并查看正在做什么。另外，通过单独分配变量，您可以看到什么具有什么价值。

一个例子是：

```
$const = CONST;
$variable = VARIABLE;
$foo = (new Foo)->setFooProperty(12)->getFooProperty();
$bar = (123 - 456) * 10;
$ten = 1 + 2 + 1 + (5 - 4);
<<<EOD
Lorem ipsum dolor sit amet, **$variable** adipiscing elit.
Duis gravida aliquet dolor quis gravida.
Nullam viverra urna a velit laoreet, et ultrices purus condimentum.
Ut risus tortor, facilisis sed porta eget, semper a augue.
Sed adipiscing erat non sapien commodo volutpat.
Vestibulum nec lectus sed elit dictum accumsan vel adipiscing libero.
**$const** vehicula molestie sapien.
Ut fermentum quis risus ut pellentesque.
Proin in dignissim erat, eget molestie lorem. Mauris pretium aliquam eleifend.
**$foo** vitae sagittis dolor, quis sollicitudin leo.
Etiam congue odio sit amet sodales aliquet.
Etiam elementum auctor tellus, quis pharetra leo congue at. Maecenas sit amet ultricies neque.
Nulla luctus enim libero, eget elementum tellus suscipit eu.
Suspendisse tincidunt arcu at arcu molestie, a consequat velit elementum.
Ut et libero purus. Sed et magna vel elit luctus rhoncus.
Praesent dapibus consectetur tortor, vel **$bar** mauris ultrices id.
Mauris pulvinar nulla vitae ligula iaculis ornare.
Praesent posuere scelerisque ligula, id tincidunt metus sodales congue.
Curabitur lectus urna, porta sed molestie ut, mollis vitae libero.
Vivamus vulputate congue **$ten**.
EOD; 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-04-06T08:54:57.273

使用[sprintf()](http://php.net/manual/en/function.sprintf.php)

```
define('my_const', 100);
$string = <<< heredoc
      <p>The value of my_const is %s.</p>
heredoc;

$string = sprintf($string, my_const); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-09-22T21:56:20.627

这是一个小技巧，允许双引号字符串和 heredocs 在花括号语法中包含任意表达式，包括常量和其他函数调用。它使用函数名称可以分配给变量然后在heredoc中调用的事实：

```
<?php
    // Declare a simple function
    function _placeholder($val) { return $val; }
    // And assign it to something short and sweet
    $_ = '_placeholder';

    // Or optionally for php version >= 5.3
    // Use a closure (anomynous function) like so:
    $_ = function ($val){return $val;};

    // Our test values
    define('abc', 'def');
    define('ghi', 3);

    $a = 1;
    $b = 2;

    function add($a, $b) { return $a+$b; }

    // Usage
    echo "b4 {$_(1+2)} after\n"; // Outputs 'b4 3 after'
    echo "b4 {$_(abc)} after\n"; // Outputs 'b4 def after'
    echo "b4 {$_(add($a, $b)+ghi*2)} after\n"; // Outputs 'b4 9 after'
    $text = <<<MYEND

    Now the same in heredoc:
    b4 {$_(1+2)} after
    b4 {$_(abc)} after
    b4 {$_(add($a, $b)+ghi*2)} after

    MYEND;
    echo $text; 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-06-11T10:13:31.240

您还可以使用[get_defined_constants](http://php.net/manual/fr/function.get-defined-constants.php)函数。它将所有当前定义的常量放回一个数组中，您可以在您的 HEREDOC 字符串中使用它：

```
// Let's say there is FOO and BAR defined
$const = get_defined_constants();

$meta = <<< EOF
     my awesome string with "{$const['FOO']}" and "{$const['BAR']}" constants
EOF; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-11-26T02:37:24.397

您可以使用“**常量**”功能。

例如：

```
 <?php
    define('CONST1', 100);
    define('CONST2', 200);
    $C= 'constant';
    echo <<<MYECHO
          <p>The value of CONST1 is: {$C('CONST1')}, 
              and CONST2 is:{$C('CONST2')}.</p>
    MYECHO;
    ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-15T11:48:02.043

将您定义的变量放入简单变量中，然后将其包含在 heredoc 中，如下例所示：

```
<?php
define('my_const', 100);
$variable = my_const;
   echo <<<MYECHO
      <p>The value of my_const is {$variable}.</p>
MYECHO;
?> 
```

# java - 不明白这个代码片段的答案（java）

> ID：10041202
> 
> 赞同：3
> 
> 时间：2012-04-06T08:50:44.147
> 
> 标签：java

```
class C{
    static int f1(int i) {
        System.out.print(i + ",");
        return 0;
    }

    public static void main (String[] args) {
        int i = 0;
        i = i++ + f1(i);
        System.out.print(i);
    }
} 
```

为什么答案是 1,0。请解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T09:03:04.863

看表达式：

```
i = i++ + f1(i); 
```

您需要在这里了解的一件事是究竟做了什么`i++`并返回：它递增`i`，但返回 的**旧**值`i`。所以 if `i == 0`, then`i++`递增`i`到`1`，但表达式的结果值为`0`。

在 Java 中，表达式是从左到右计算的。所以在上面的表达式中，`i++`首先被评估，然后`f1(i)`.

之后`i++`，其实也是`i == 1`如此。此方法打印 的值，即后面带有逗号，并返回。`f1(i)``f1(1)``i``1``0`

由于`i++`返回（在递增之前）的旧值`i`，因此表达式变为：

```
i = 0 + 0; 
```

第一个`0`是 的结果`i++`，第二个`0`是 的结果`f1(i)`。所以，`i`被赋值`0`。最后，打印 的值`i`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T08:53:37.783

```
i = i++ + f1(i); 
```

首先 i 递增到 1 并调用**f1(1)**，然后打印**i ，**它打印**1 ，**并返回 0通过计算**0 + 0**存储在main 方法的**i**中，然后在 main 中打印它，因此输出变为**1, 0**

# ajax - ajax加载页面中的facebook“Like box”只加载第一次？

> ID：10041216
> 
> 赞同：6
> 
> 时间：2012-04-06T08:52:32.417
> 
> 标签：ajax, facebook

我想在 ajax 加载页面中显示 Facebook“Like box”插件和其他一些 FB 代码。

当我在普通的 html 页面中加载它时，它可以正常工作，但是当我尝试将它放在 ajax 加载页面**中时，它只加载第一次**，当我第二次单击链接加载页面**时，它不是加载页面**？如果我清除缓存，它只会加载页面。

索引文件初始化 fb 代码。

```
FB.init({
  appId      : '277065222', // App ID
  status     : true, // check login status
  cookie     : true, // enable cookies to allow the server to access the session
  xfbml      : true,  // parse XFBML
  oauth      : true
}); 
```

我使用以下代码加载 ajax 页面：

```
 function loadFacebook(){

$('#container').load('http://www.manmade.se/manmade/guiden/facebook_onweb.html');
FB.XFBML.parse();
} 
```

在 ajax 加载页面中，我有 facebook 代码，例如 facebook Like 框。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T12:40:17.403

您可以在调用 fb 脚本后在页面加载中调用 fb par 脚本

```
(function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=11111code";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

$(document).ajaxComplete(function () {
    try {
        FB.XFBML.parse();
    } catch (ex) { }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T09:01:52.560

reloadlike.html

```
<div class="fb-like fltLeft" data-href="http://yrl_like" data-send="false" data-layout="button_count" data-width="87" data-show-faces="false"></div> 
```

* * *

这应该每次都有效。

我猜你的回调是不对的。

```
$('#container').load('reloadlike.html', function() {
    FB.XFBML.parse();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T03:09:27.267

稍微改变一下来自 bugrasitemkar 的示例代码，在 ajax 代码的末尾，我包含了这个 jquery 脚本，它可以工作：

```
<script type="text/javascript">
    $(document).ready(function() {
        try {
            FB.XFBML.parse();
        } catch (ex) { }
    });
</script> 
```

# php - 创建键匹配的新二维 PHP 数组

> ID：10041223
> 
> 赞同：0
> 
> 时间：2012-04-06T08:53:04.867
> 
> 标签：php, arrays, multidimensional-array

我有以下三个数组，需要在键匹配的地方创建一个新的二维数组。

```
Array
(
    [0] => Item 0
    [1] => Item 1
    [2] => Item 2
    [3] => Item 3
Array
(
    [0] => £35.00
    [1] => £60.00
    [2] => £24.00
    [3] => £79.00
)
Array
(
    [0] => 2
    [1] => 1
    [2] => 1
    [3] => 1
) 
```

我需要我的新数组如下：

```
$items = Array( 
           Array("Item 0", "£35.00" , 2),
           Array("Item 1", "£60.00" , 1),
           Array("Item 2", "£24.00" , 1),
           Array("Item 3", "£79.00" , 1)
         ); 
```

我尝试过使用 array_merge、array_merge_recursive、array_combine、$array1+$array2+$array3 但它们似乎都没有做我想要的。

任何指针将不胜感激:) 非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:01:28.990

只要所有数组的长度相同，您就可以使用[`array_map`^(*Docs*)](http://php.net/array_map) with `null`as callback

```
print_r(array_map(null,
    $array1, $array2, $array3 
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:01:11.893

```
$items=array();
foreach($array1 as $k=>$v){
$items[]=array($array1[$k],$array2[$k],$array3[$k]);
} 
```

# xslt - 在 XSLT 中，什么是 意思是什么是跨浏览器解决方案？

> ID：10041229
> 
> 赞同：1
> 
> 时间：2012-04-06T08:53:52.780
> 
> 标签：xslt, cross-browser

XSL：

```
<xsl:if test=".[foo or @bar]">
    something
</xsl:if> 
```

1.  是否测试目标是否具有“foo”标签名称或具有“bar”属性？

2.  它只适用于IE，我想知道是否有错误。什么是等效的句子但可以跨浏览器工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:12:11.023

`.[x]`XSLT 1.0 中不允许使用该语法。它在 XSLT 1.0 的早期草案中被允许，我怀疑最终版本中没有它是由于疏忽而不是经过深思熟虑的设计决定（正如已经指出的，它在 XSLT 2.0 中恢复了）。因为 IE 在 1.0 规范最终确定之前首先发布了它的 XSLT 处理器，所以它们可能支持这种语法以向后兼容那些早期的草案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:08:31.023

它测试当前节点是否具有名为的子元素`foo`或具有名为的属性`bar`。也就是说，如果您将其更改为

```
<xsl:if test="foo or @bar"> 
```

您使用的语法在我的 xsl 解析器中被拒绝：`Invalid XPath expression Unexpected token - "[foo or @bar]"`

我使用的应该可以跨浏览器工作。
如果您希望选择具有名称`foo`或`bar`属性的节点，请使用以下命令：

```
<xsl:if test="name()='foo' or @bar"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T12:22:08.633

> ```
> <xsl:if test=".[foo or @bar]">     
>   something 
> </xsl:if> 
> ```

**在 XSLT 1.0 中，这在语法上无效并产生错误**。

**在 XSLT 2.0 中，这相当于**：

```
 <xsl:if test="foo or @bar">     
   something 
 </xsl:if> 
```

**表达式**：

```
foo or @bar 
```

`true()`当上下文节点（当前节点）有一个名为的子元素`foo` *或*上下文节点有一个名为的属性`bar`（或两者）时，精确计算。

否则，此表达式的计算结果为`false()`。

因此，上面的代码片段的意思是：*如果这些条件之一为真：当前节点有一个名为的子元素`foo`或者当前节点有一个名为的属性`bar`——那么输出字符串“something”*

# mysql - 在 wordpress 中使用可以追溯到自身的表单？

> ID：10041230
> 
> 赞同：0
> 
> 时间：2012-04-06T08:54:05.767
> 
> 标签：mysql, forms, wordpress

我正在使用 buddypress 开发一个 wordpress 网站。所以，我正在创建一个页面，您可以在其中查看成员并使用数据库搜索他们：wp_users。如果我将它作为 php 添加到 wp 页面时，它会正常显示，但单击提交时会出现 404 错误。

这是代码：

```
 <!DOCTYPE  HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta  http-equiv="Content-Type" content="text/html;  charset=utf-8">
    <title>Search  Contacts</title>
  <style type="text/css">
  #spacer {
    border-top-width: 1px;
    border-right-width: 1px;
    border-bottom-width: 1px;
    border-left-width: 1px;
    border-top-style: solid;
}
  </style>
  </head>
  <p><body>
    <p>&nbsp;</p>
    <form  method="post" action=""  id="searchform">
      <p>
        <input name="name"  type="text">
        <input  type="submit" name="submit" value="Søk">
      </p>
      <p>Tips: du kan søke etter adresse, navn og e-post.</p>
    </form>

  <table width="600">
            <tr>
              <th width="200" height="50">Navn</th>
                <th width="200">&nbsp;</th>
              <th width="200">E-post adresse</th>
            </tr>  
<?php
/* Change next two lines  if using online*/
$db="skynnaks_skyn";
$link = mysql_connect('localhost', 'skynnaks_skyn', '*password*');

if (! $link) die(mysql_error());
mysql_select_db($db , $link) or die("Couldn't open $db: ".mysql_error());
$result = mysql_query( "SELECT * FROM wp_users" )
          or die("SELECT Error: ".mysql_error());
$num_rows = mysql_num_rows($result);

if ($result) {

while ($row = mysql_fetch_array($result)) { 
$_SESSION['id']=$row['id'];
#echo "<tr><a href='#'>".$row['display_name']."</a>";
echo "<td><a href="."/members/".$row['user_nicename']."/profile/>".$row['display_name']."</a></td>";
#echo "<a href=" '.$row['id'].'>Bruker: ".$row['user_url']."</a>";
echo "<td><a href=".$row['user_url'].">".$row['user_url']."</a></td>";
echo "<td><a href=".'mailto:'.$row['user_email'].">".$row['user_email']."</a></td></tr>";
}
}

?>
</table>
    <div id="spacer">
     <?php
  if(isset($_POST['submit'])){
  if(preg_match("/^[  a-zA-Z]+/", $_POST['name'])){
  $name=$_POST['name'];
  //connect  to the database
  $db=mysql_connect  ("localhost", "skynnaks_skyn",  "*password*") or die ('I cannot connect to the database  because: ' . mysql_error());
  //-select  the database to use
  $mydb=mysql_select_db("skynnaks_skyn");
  //-query  the database table
  $sql="SELECT  ID, user_login, user_nicename FROM wp_users WHERE user_login LIKE '%" . $name .  "%' OR user_nicename LIKE '%" . $name ."%'";
  //-run  the query against the mysql query function
  $result=mysql_query($sql);
  //-create  while loop and loop through result set
  while($row=mysql_fetch_array($result)){
          $loginName  =$row['user_login'];
          $niceName=$row['user_nicename'];
          $ID=$row['ID'];
  //-display the result of the array

  echo "<ul>\n";
  echo "<li>" . "<a href="."/members/".$loginName."/profile/>".$niceName."</a>" ;
  echo "</ul>";
  }
  }
  else{
  echo  "<p>Please enter a search query</p>";
  }
  }
?>
  </div>
    <p>&nbsp;</p>

  </body>
</html>
</p> 
```

PS：由于 buddypress 插件，我不能使用默认的永久链接。而且我知道 buddypress 带有会员搜索功能，但我已经安装了挪威语语言包，但它不适用于 buddypress 中的会员搜索。

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:11:56.683

看起来像[这个问题](http://www.cabeeb.com/2009/09/posting-a-form-to-a-wordpress-page/)，

所以用任何特定的名称属性更改您的输入标签名称。

例如，

```
<input name="membername" type="text" /> 
```

但不要忘记使用相同的变量`$_POST`

# iphone - 将超类 init 方法链接到指定的初始化程序

> ID：10041233
> 
> 赞同：0
> 
> 时间：2012-04-06T08:54:25.413
> 
> 标签：iphone, objective-c, ios, init

由于每个类都从超类继承初始化程序，这就是我将默认实现链接`init`到其指定初始化程序的方式。（它正在工作。）

关联：

```
-(id)init {
    return [self initWithItemName:@"Default Value" 
                    valueInDollar:0 
                     serialNumber:@""];
} 
```

初始化器：

```
-(id)initWithItemName:(NSString *)myItemName
        valueInDollar:(int)myValueInDollar
         serialNumber:(NSString *)mySerialNumber; 
```

我的问题是，我是否总是必须按照我的方式链接我自己的初始化程序（链接）？那么如果没有下面的代码，就永远不会调用自己的初始化程序？我对吗？

```
-(id)init {
    return [self myInitMethod......"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:08:45.070

如果你只用 初始化你的对象`initWithItemName`，那么你根本不需要定义`init`方法。初始化器只是普通的方法（不涉及魔法），所以你调用的就是将被调用的。但是实现该`init`方法是一种很好的做法，以便可以调用它并且对象将处于一致状态。

# java - 休眠 slf4j 异常

> ID：10041235
> 
> 赞同：3
> 
> 时间：2012-04-06T08:54:29.480
> 
> 标签：java, hibernate, logging, slf4j, nosuchmethoderror

我打电话时遇到以下异常 `configuration.configure(hibernate.cfg.xml).buildSessionFactory()`：

```
Exception in thread "main" java.lang.NoSuchMethodError: org.slf4j.Logger.isTraceEnabled()Z
    at org.hibernate.type.NullableType.<clinit>(NullableType.java:59)
    at org.hibernate.Hibernate.<clinit>(Hibernate.java:103)
    at org.hibernate.type.TypeFactory.<clinit>(TypeFactory.java:69)
    at org.hibernate.mapping.ManyToOne.getType(ManyToOne.java:49)
    at org.hibernate.mapping.ManyToOne.createForeignKey(ManyToOne.java:62)
    at org.hibernate.cfg.HbmBinder.createProperty(HbmBinder.java:2213)
    at org.hibernate.cfg.HbmBinder.createClassProperties(HbmBinder.java:2170)
    at org.hibernate.cfg.HbmBinder.createClassProperties(HbmBinder.java:2060)
    at org.hibernate.cfg.HbmBinder.bindRootPersistentClassCommonValues(HbmBinder.java:381)
    at org.hibernate.cfg.HbmBinder.bindRootClass(HbmBinder.java:295)
    at org.hibernate.cfg.HbmBinder.bindRoot(HbmBinder.java:166)
    at org.hibernate.cfg.Configuration.add(Configuration.java:702)
    at org.hibernate.cfg.Configuration.addInputStream(Configuration.java:537)
    at org.hibernate.cfg.Configuration.addResource(Configuration.java:599)
    at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:1621)
    at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1589)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1568)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1542)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1462)
    at com.enwelib.server.hibernate.helper.HibernateVendHelper.<init>(HibernateVendHelper.java:47)
    at com.ensarm.crawler.CrawlManager.saveEntity(CrawlManager.java:93)
    at com.ensarm.crawler.CrawlManager.main(CrawlManager.java:30) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T08:59:52.347

该方法[`Logger.isTraceEnabled()`](http://www.slf4j.org/api/org/slf4j/Logger.html#isTraceEnabled%28%29)是在[slf4j](/questions/tagged/slf4j "显示标记为“slf4j”的问题") 1.4 中添加的。显然，您使用的是较旧的版本，而 Hibernate 需要更新的版本。修改您的 CLASSPATH 并使用此库的更新版本（当前为 1.6.4）。

# c# - 如何在按钮单击时获取行索引和网格列

> ID：10041238
> 
> 赞同：1
> 
> 时间：2012-04-06T08:54:32.210
> 
> 标签：c#, asp.net, silverlight-4.0, silverlight-3.0

我里面有网格和按钮控件。我想要的是点击按钮的行索引和列索引。我是silverlight的新手，所以请帮助我

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Class="testgrid.MainPage"
    Width="640" Height="480">

    <Grid x:Name="LayoutRoot" Background="Azure" Height="400" Width="400" >
        <Grid.ColumnDefinitions >
            <ColumnDefinition Width="100*" />
            <ColumnDefinition Width="100*" />
            <ColumnDefinition Width="100*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="100*" />
            <RowDefinition Height="100*" />
            <RowDefinition Height="100*" />
        </Grid.RowDefinitions>
        <Button x:Name="button1"  Grid.Column="0" Grid.Row="0" Click="grid_Item_Click">
            <Image x:Name="img1" Source="/testgrid;component/Images/kobe_bryant1.jpg" Stretch="Uniform" ></Image>
        </Button>
           <Button x:Name="button2"  Grid.Column="1" Grid.Row="0" Click="grid_Item_Click">
            <Image x:Name="img2" Source="/testgrid;component/Images/kobe_bryant1.jpg" Stretch="Uniform" ></Image>
        </Button>
           <Button x:Name="button3"  Grid.Column="2" Grid.Row="0" Click="grid_Item_Click">
            <Image x:Name="img3" Source="/testgrid;component/Images/kobe_bryant1.jpg" Stretch="Uniform" ></Image>
        </Button>
           <Button x:Name="button4"  Grid.Column="0" Grid.Row="1" Click="grid_Item_Click">
            <Image x:Name="img4" Source="/testgrid;component/Images/kobe_bryant1.jpg" Stretch="Uniform" ></Image>
        </Button>   
    </Grid>
</UserControl> 
```

我有它后面的页面

```
 private void grid_Item_Click(object sender, RoutedEventArgs e)
        {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:07:34.073

你可以试试这个

```
private void grid_Item_Click(object sender, RoutedEventArgs e) 
{ 
Button btn = sender as Button; 
int x=(int)btn.GetValue(Grid.RowProperty); 
int y=(int)btn.GetValue(Grid.ColumnProperty);  
  MessageBox.Show("row"+x.ToString()+"column"+y.ToString());
 } 
```

# ios - ios内存分配问题截图

> ID：10041240
> 
> 赞同：0
> 
> 时间：2012-04-06T08:54:47.170
> 
> 标签：ios, animation, memory-management, screenshot, ibooks

我正在测试这个项目：[https](https://github.com/devindoty/iBooks-Flip-Animation) ://github.com/devindoty/iBooks-Flip-Animation ，我注意到截屏时内存分配的增加。

当我分析该应用程序时，我看到将在 CALayer renderInContext 中分配大量内存。原因似乎是CGContextDrawImage。但是如何解决呢？

我将在此处粘贴必要的代码：

```
@implementation iBookAnimationViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];

    self.view.layer.contents = (id)[UIImage imageNamed:@"Shelf_Contents@2x.png"].CGImage;

    UITapGestureRecognizer *gesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(flip:)];
    [self.view addGestureRecognizer:gesture];
    [gesture release];

    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackOpaque];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark -
#pragma mark Gesture

- (void)flip:(UIGestureRecognizer*)gesture{

    FlipSideViewController *controller = [[FlipSideViewController alloc] init];
    controller.delegate = (id<FlipSideDelegate>)self;
    [self presentModalViewController:controller animated:YES];
    [controller release];

}

#pragma mark -
#pragma mark Animation Methods

- (CATransform3D)transformWithDegrees:(CGFloat)degrees{

    if (degrees == 0) {
        return CATransform3DIdentity;
    }

    return CATransform3DMakeRotation((M_PI/180)*degrees, 0.0f, 1.0f, 0.0);

}

- (UIImage*)contentsForView:(UIView*)aView{

    UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, YES, [[UIScreen mainScreen] scale]);
    [aView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;
}

- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag{

    if (flag) {
        [[anim valueForKey:@"ContentsLayer"] removeFromSuperlayer];
        [[UIApplication sharedApplication] endIgnoringInteractionEvents];
    }

}

- (void)animateFromViewController:(UIViewController*)fromController toViewController:(UIViewController*)toController{

    UIImage *image = [self contentsForView:toController.view];

    CALayer *contentsLayer = [CALayer layer];
    contentsLayer.frame = toController.view.bounds;
    contentsLayer.backgroundColor = [UIColor blackColor].CGColor;
    [toController.view.layer addSublayer:contentsLayer];

    CATransformLayer *transformLayer = [CATransformLayer layer];
    transformLayer.frame = contentsLayer.bounds;
    [contentsLayer addSublayer:transformLayer];

    CALayer *backLayer = [CALayer layer];
    backLayer.contents = (id)image.CGImage;
    backLayer.doubleSided = NO;
    backLayer.frame = transformLayer.bounds;
    backLayer.zPosition = 0.0f;
    backLayer.transform = [self transformWithDegrees:180.0f];
    [transformLayer addSublayer:backLayer];

    CALayer *frontLayer = [CALayer layer];
    frontLayer.contents = (id)[self contentsForView:fromController.view].CGImage;
    frontLayer.doubleSided = NO;
    frontLayer.zPosition = FLIP_GAP;
    frontLayer.frame = transformLayer.bounds;
    frontLayer.masksToBounds = NO;
    [transformLayer addSublayer:frontLayer];

    CALayer *sideLayer = [CALayer layer];
    sideLayer.contents = (id)[UIImage imageNamed:@"Wood Tile.png"].CGImage;
    sideLayer.zPosition = FLIP_GAP/2;
    sideLayer.frame = CGRectMake(transformLayer.bounds.origin.x-(FLIP_GAP/2), transformLayer.bounds.origin.y, FLIP_GAP, transformLayer.bounds.size.height);
    sideLayer.transform = [self transformWithDegrees:90.0f];
    [transformLayer addSublayer:sideLayer];

    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"sublayerTransform"];
    animation.toValue = [NSValue valueWithCATransform3D:[self transformWithDegrees:179.9f]];
    animation.duration = ANIMATION_DURATION;
    animation.fillMode = kCAFillModeForwards;
    animation.removedOnCompletion = NO;
    animation.delegate = self;
    [animation setValue:contentsLayer forKey:@"ContentsLayer"];
    [transformLayer addAnimation:animation forKey:@"FlipAnimation"];

    [[UIApplication sharedApplication] beginIgnoringInteractionEvents];

}

#pragma mark -
#pragma mark Modal Prentation Methods

- (void)dismissModalViewControllerAnimated:(BOOL)animated{

    UIViewController *modalViewController = self.modalViewController;
    [self animateFromViewController:modalViewController toViewController:self];
    [super dismissModalViewControllerAnimated:NO];
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackOpaque animated:YES];

}

- (void)presentModalViewController:(UIViewController *)modalViewController animated:(BOOL)animated{

    [super presentModalViewController:modalViewController animated:NO];
    [self animateFromViewController:self toViewController:modalViewController];
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault animated:YES];

}

#pragma mark -
#pragma mark FlipSideDelegate

- (void)dismissFlipSideViewController:(FlipSideViewController*)controller{

    [self dismissModalViewControllerAnimated:YES];

}

#pragma mark -
#pragma mark Memory Management

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

- (void)viewDidUnload {
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:58:27.517

尝试使用带有“内存泄漏”工具的 Instruments 运行您的确切用例。它很可能会为您指出确凿的证据，而且很难追查到它们。此外，我总是推荐 bbum 的关于堆分析的优秀链接（它在过去保存了我的培根）。[http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)

# android - 无法在线程内调用任务

> ID：10041242
> 
> 赞同：0
> 
> 时间：2012-04-06T08:54:53.033
> 
> 标签：android, multithreading

我正在尝试在地图上显示多个引脚位置，即我的位置和我从云服务器获得的另一个位置。

基于以下代码：

当我尝试标记我的字符串时，我不断收到 NullPointer 错误消息。这意味着我的 CloudTask 活动永远不会被触发......我无法弄清楚为什么并且 Eclipse 调试器不会单步执行这些线程......感谢任何帮助。

```
 public class MapsActivity extends com.google.android.maps.MapActivity {
    private static final String TAG = null;

    private MapController mapController;
    private MapView mapView;
    private LocationManager locationManager;
    private MyOverlays itemizedoverlay;
    private MyLocationOverlay myLocationOverlay;
    private MyLocationOverlay otherLocationOverlay;
    private Handler handler;

    private String message;
    StringTokenizer tokens;

    Integer p1 = null;
    Integer p2;

    GeoPoint point;
    static Context mContext = null;

    public void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setContentView(R.layout.main); // bind the layout to the activity

            // Configure the Map
            mapView = (MapView) findViewById(R.id.mapview);
            mapView.setBuiltInZoomControls(true);
            mapView.setSatellite(true);
            mapController = mapView.getController();
            mapController.setZoom(14); // Zoon 1 is world view
            locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 2500,
                    0,(LocationListener) new GeoUpdateHandler());
                    //new Intent("android.intent.action.LOCATION_CHANGED"); 
                    //(LocationListener) new GeoUpdateHandler());

            myLocationOverlay = new MyLocationOverlay(this, mapView);

            mapView.getOverlays().add(myLocationOverlay);

            handler = new Handler();
        //  new AsyncTask<Void, Void, String>() {
            myLocationOverlay.runOnFirstFix(new Runnable(){ 
             public void run(){

                    MyRequestFactory requestFactory = Util.getRequestFactory(mContext,
                            MyRequestFactory.class);
                    final CloudTask1Request request = requestFactory.cloudTask1Request();
                    Log.i(TAG, "Sending request to server");

                    request.queryTasks().fire(new Receiver<List<TaskProxy>>() {

                        @Override
                        public void onSuccess(List<TaskProxy> taskList) {
                            //message = result;

                            message = "\n";

                            for (TaskProxy task : taskList) {

                                message += task.getId()+","+task.getNote()+",";                                 

                            }

                        }
                    });
                    //return message;
                //}

                        if(message.length() == 0){

                            Log.i("MESSAGE","Did not get any points from cloud");
                        }

                    tokens = new StringTokenizer(message,",");

                     tokens.nextToken();
                     p1 = Integer.parseInt(tokens.nextToken());
                     p2 = Integer.parseInt(tokens.nextToken());
                     point = new GeoPoint(p1,p2);

                     mapView.getController().animateTo(point);

        }

    });

             Drawable drawable = this.getResources().getDrawable(R.drawable.pushpin);
                itemizedoverlay = new MyOverlays(this, drawable);
                createMarker();

            myLocationOverlay.runOnFirstFix(new Runnable() {
                public void run() {
                    mapView.getController().animateTo(
                            myLocationOverlay.getMyLocation());
                }
            });

            //Drawable drawable = this.getResources().getDrawable(R.drawable.pushpin);
            itemizedoverlay = new MyOverlays(this, drawable);
            createMarker();

    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    public class GeoUpdateHandler implements LocationListener {

        @Override
        public void onLocationChanged(Location location) {
            int lat = (int) (location.getLatitude() * 1E6);
            int lng = (int) (location.getLongitude() * 1E6);
            GeoPoint point = new GeoPoint(lat, lng);
            createMarker();
            mapController.animateTo(point); // mapController.setCenter(point);

        }

        @Override
        public void onProviderDisabled(String provider) {
        }

        @Override
        public void onProviderEnabled(String provider) {
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
        }

    }

    private void createMarker() {
        GeoPoint p = mapView.getMapCenter();
        OverlayItem overlayitem = new OverlayItem(p, "", "");
        itemizedoverlay.addOverlay(overlayitem);
        if (itemizedoverlay.size() > 0) {
            mapView.getOverlays().add(itemizedoverlay);
        }
    }

    @Override
    protected void onResume() {
        super.onResume();
        myLocationOverlay.enableMyLocation();
        myLocationOverlay.enableCompass();
    }

    @Override
    protected void onPause() {
        super.onResume();
        myLocationOverlay.disableMyLocation();
        myLocationOverlay.disableCompass();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T08:59:16.213

把这些放在 onSuccess()

```
if(message.length() == 0){

    Log.i("MESSAGE","Did not get any points from cloud");
}

tokens = new StringTokenizer(message,",");

tokens.nextToken();
p1 = Integer.parseInt(tokens.nextToken());
p2 = Integer.parseInt(tokens.nextToken());
point = new GeoPoint(p1,p2);

mapView.getController().animateTo(point); 
```

# android - 滚动视图在模拟器中工作但在 android 设备中不工作

> ID：10041246
> 
> 赞同：0
> 
> 时间：2012-04-06T08:55:44.123
> 
> 标签：android, android-layout, android-emulator, scrollview

我的应用程序中有一个滚动视图，它在我的模拟器中运行良好，但在 android 设备中运行不正常.....我的应用程序开发...我在**android 2.2**`minsdkversion:8`中部署了我的应用程序

 **我的布局如下

```
<?xml version="1.0" encoding="utf-8"?>
 <ScrollView xmlns:android="http://schemas.android.com/apk/res/android" 
 android:scrollbars="vertical" 
 android:layout_height="fill_parent" 
 android:layout_width="fill_parent"
 android:background="#D2691E"> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#D2691E"
>
<TextView  
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:text="Branch"
android:textColor="#000000"
android:textSize="30px"
/>
<Spinner android:id="@+id/group"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:prompt="@string/group_prompt"

/>   
<TextView  
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:text="Year"
android:textColor="#000000"
android:textSize="30px" />
<Spinner android:id="@+id/year"
    android:layout_width="match_parent"

 android:layout_height="wrap_content"
    android:drawSelectorOnTop="true"
    android:prompt="@string/year_prompt"

/>     

<Button android:id="@+id/ok1_button" 
         android:layout_height="wrap_content" 
         android:layout_width="wrap_content" android:text="Ok1" android:ems="5">          
</Button>
 </LinearLayout>
 </ScrollView> 
```

请给一个解决方案..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:03:18.043

在您的 2 Snippers 中，将您的代码替换为

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#D2691E"
    android:scrollbars="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#D2691E"
        android:orientation="vertical" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Branch"
            android:textColor="#000000"
            android:textSize="30px" />

        <Spinner
            android:id="@+id/group"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:drawSelectorOnTop="true"
            android:prompt="@string/stringone" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Year"
            android:textColor="#000000"
            android:textSize="30px" />

        <Spinner
            android:id="@+id/year"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:drawSelectorOnTop="true"
            android:prompt="@string/stringtwo" />

        <Button
            android:id="@+id/ok1_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="5"
            android:text="Ok1" >
        </Button>
    </LinearLayout>
</ScrollView> 
```

复制并粘贴到您的文件中。将在 2.1 和 2.2 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:17:46.893

试试这个代码

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

     <ScrollView  
     android:scrollbars="vertical" 
     android:layout_height="fill_parent" 
     android:layout_width="fill_parent"
     android:background="#D2691E"> 
    <LinearLayout 
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#D2691E"
    >
    <TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="Branch"
    android:textColor="#000000"
    android:textSize="30px"
    />
    <Spinner android:id="@+id/group"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:prompt="@string/group_prompt"

    />   
    <TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="Year"
    android:textColor="#000000"
    android:textSize="30px" />
    <Spinner android:id="@+id/year"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:drawSelectorOnTop="true"
        android:prompt="@string/year_prompt"

    />     

    <Button android:id="@+id/ok1_button" 
         android:layout_height="wrap_content" 
         android:layout_width="wrap_content" android:text="Ok1" android:ems="5">          
    </Button>
     </LinearLayout>
     </ScrollView>
    </LinearLayout> 
```**

# python - 如何在 NDB 中清除特定模型的缓存

> ID：10041248
> 
> 赞同：4
> 
> 时间：2012-04-06T08:55:55.860
> 
> 标签：python, google-app-engine, google-cloud-datastore

我正在向 NDB 过渡，我正在使用两个模型集：一个基于普通的 old`google.appengine.ext.db`和一个基于新的 fancy `google.appengine.ext.ndb`。

我想将基于 NDB 的模型用于只读并保留 NDB 中内置的缓存，同时能够使用旧模型存储更改（并在需要时表示需要将缓存更新到 NDB）。

如何在基于 old 保存模型更改的同时刷新/清除 NDB 中特定模型实例的缓存`db`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-07T04:10:51.957

我建议您只禁用那些重复的模型类的缓存；安全总比后悔好。这很容易通过把

```
 _use_memcache = False
   _use_cache = False 
```

在每个 ndb.Model 子类中（即在属性声明之前或之后）。这方面的文档在这里：[https](https://developers.google.com/appengine/docs/python/ndb/cache#policy_functions) ://developers.google.com/appengine/docs/python/ndb/cache#policy_functions （查找最后的表格）。

如果您真的只想在使用旧的 db.Model 子类编写实体时清除缓存，则可以尝试以下操作（假设 ent 是 db.Model 子类实例）：

```
 ndbkey = ndb.Key.from_old_key(ent.key())
  ndbkey.delete(use_datastore=False) 
```

这会从 memcache 和上下文缓存中删除密钥，但不会从数据存储中删除它。但是，当您尝试使用它的 NDB 键（甚至当它作为查询结果返回时）读回它时，它似乎会被删除，直到当前 HTTP 请求处理程序完成，并且它不会使用 memcache 大约 30 秒.

# javascript - ExtJS:: 如何过滤网格中的行，但不在存储中

> ID：10041264
> 
> 赞同：3
> 
> 时间：2012-04-06T08:57:49.957
> 
> 标签：javascript, extjs

我有两个网格，它们都有一个商店。我需要在第一家商店展示所有东西，然后在第二家展示这家商店的特殊数据。

示例：第一个商店显示每条记录，第二个商店显示类型 = 12 的记录。如何在网格中而不是在商店中进行过滤。我需要两个不同的网格，而不是一个带有过滤的网格。

如果我将按商店过滤第二个网格中的记录，他们将首先隐藏。我会同时看到它，我需要同时看到它们中的不同数据。我只需要一家商店。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T09:38:34.857

一种好方法是在第二个网格中覆盖 GridView 对象的 getRowClass() 方法：

```
 var secondGrid = new Ext.grid.GridPanel({
       //..
       viewConfig: {
            getRowClass: function(record, index) {
                if (record.get('type') != '12') {
                    return 'display-false';
                } 
            }
        }
    }); 
```

您还应该定义一个 CSS 类：

```
.display-false { display: none } 
```

试试这个解决方案！

# jquery - 我们可以在放大/缩小后获得元素的大小吗？

> ID：10041270
> 
> 赞同：0
> 
> 时间：2012-04-06T08:58:37.510
> 
> 标签：jquery

我有一个高度和宽度分别为 100px 的 div。当我使用`ctrl`-放大时`+`，我可以放大 div。有什么方法可以在缩放模式下找出 div 的宽度和高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:02:09.803

没门！如果用户正在放大镜后面看屏幕，就像您想获得 div 的大小一样！

# logging - 使用 nginx 记录解析的请求

> ID：10041271
> 
> 赞同：2
> 
> 时间：2012-04-06T08:58:45.690
> 
> 标签：logging, nginx, rewrite

如何为 nginx 设置自定义日志格式，以便解析请求并将其部分单独记录？

我们提供图片文件来计算邮件打开次数。图片的网址各不相同，但遵循以下规则：

```
http://www.server.com/counter/XXXXX/YYYYY/dailymail.gif 
```

XXXXX - 电子邮件活动的 ID；YYYYY - 收件人 ID。

有一个单独的`/counter`位置日志，我想给出一个格式

```
XXXXX   YYYYY    DATETIME 
```

位置部分看起来像

```
 location    ~* ^counter/([0-9]+)/([^/]+)/dailymail\.gif$ {
        access_log /var/log/mailopened.log
        alias /var/www/site.com/1x1.gif?cid=$1&uid=$2&type=daily;
    } 
```

所以我有变量 $1 和 $2 中的值。如何以日志格式使用它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T09:18:25.127

`log_format`指令`http`仅在级别允许，因此您必须根据其他变量来定义它，例如

```
http {
  log_format tracking "$xxxx $yyyy $time_local"; 
```

稍后，在您的位置，只需设置这些变量并登录`tracking`格式：

```
location ~* ^counter/([0-9]+)/([^/]+)/dailymail\.gif$ {
  set $xxxx $1;
  set $yyyy $2;
  access_log /var/log/mailopened.log tracking;
  alias /var/www/site.com/1x1.gif?cid=$1&uid=$2&type=daily;
} 
```

使用最新版本的 Nginx 和 PCRE 库，可以省略`set`调用并明确命名捕获`location`（感谢@kolbyjack）：

```
location ~* ^counter/(?<xxxx>[0-9]+)/(?<yyyy>[^/]+)/dailymail\.gif$ {
  access_log /var/log/mailopened.log tracking;
  alias /var/www/site.com/1x1.gif?cid=$1&uid=$2&type=daily;
} 
```

# c++ - 最近邻搜索的高效实现

> ID：10041273
> 
> 赞同：5
> 
> 时间：2012-04-06T08:58:46.743
> 
> 标签：c++, tree, nearest-neighbor

我正在尝试为*最近邻搜索*问题实现一种有效的算法。

我读过一些数据结构的教程，这些数据结构支持这类问题的操作（例如，*R-tree*，*cover tree*等），但它们都很难实现。

我也找不到这些数据结构的示例源代码。我知道 C++，我正在尝试用这种语言解决这个问题。

理想情况下，我需要描述如何使用源代码实现这些数据结构的链接。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T09:01:54.547

快速最近邻搜索库有几个不错的选择。

*   [ANN](http://www.cs.umd.edu/~mount/ANN/)，它基于 Mount 和 Arya 的工作。这项工作记录在 S. Arya 和 DM Mount 的论文中。*“固定维度的近似最近邻查询”*。在过程中。第四届 ACM-SIAM 研讨会。离散算法，第 271-280 页，1993 年。

*   [FLANN](http://people.cs.ubc.ca/~mariusm/index.php/FLANN/FLANN)，基于 Marius Muja & Co. 的工作。 Marius Muja 和 David G. Lowe 有一篇论文，*“Fast Approximate Nearest Neighbors with Automatic Algorithm Configuration”*，在计算机视觉理论与应用国际会议（VISAPP' 09), 2009\. FLANN 的代码在[github上可用](https://github.com/mariusmuja/flann)

FLANN 在某些情况下似乎更快，并且是更现代的代码版本，具有对许多其他语言的可靠绑定，可以快速合并更改。如果您想要一个经过充分测试的可靠标准库，ANN 可能是一个不错的选择。

**编辑以回应评论**

这两个库都有大量的文档和示例。

ANN 的示例代码可在[手册](http://www.cs.umd.edu/~mount/ANN/Files/1.1.2/ANNmanual_1.1.pdf)中获得，在第 2.1.4 节中

[FLANN 存储库示例目录](https://github.com/mariusmuja/flann/tree/master/examples)中提供了 FLANN 的示例代码，例如 /examples/flann_examples.c

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T09:57:01.167

您可以尝试使用线扫描算法来找到最近的一对点： http: [//community.topcoder.com/tc](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lineSweep) ?module=Static&d1=tutorials&d2=lineSweep 。

# javascript - 单击时更改 CSS 并在下次单击时再次返回

> ID：10041275
> 
> 赞同：0
> 
> 时间：2012-04-06T08:58:57.710
> 
> 标签：javascript, jquery, css, background

我环顾四周寻找答案，但没有什么对我有用。我希望能够单击一个 div 并更改背景，然后在下一次单击该 div 时我希望它再次变回。第一部分有效，但是我不知道如何做第二部分。

这是有效的（使用jQuery）：

```
$(document).ready(function(){
$('.button').click(function() {
$('.icon').css("background-position", "0px 0px");
});
}); 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T09:01:41.790

我建议不要使用 .css 方法，而是使用 .toggleClass 并将相关的 css 放入一个类中：

```
$('.icon').toggleClass('myClass'); 
```

你的班级定义：

```
.myClass { background-position: 0px 0px }; 
```

.toggleClass 方法将在该类尚不存在时添加该类，如果存在则将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:13:33.823

我同意使用的建议`.toggleClass()`，但如果你想使用，`.css()`试试这个：

```
$(document).ready(function(){
  $('.icon').each(function(){
    $(this).data('default-bg-pos', $(this).css('background-position'));
    $(this).data('state', 0);
  });
  $('.button').click(function() {
    $('.icon').each(function(){
      if ($(this).data('state')) {
        $(this).data('state', 0);
        $(this).css('background-position', $(this).data('default-bg-pos'));
      } else {
        $(this).data('state', 1);
        $(this).css("background-position", "0px 0px");
      }
    });
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T09:03:42.300

您应该使用 css 类并切换它。

```
.zero{
    background-position: "0px 0px";
}

$(document).ready(function(){

    $('.button').click(function() {

            $('.icon').toggleClass("zero")

    });
}); 
```

# php - JSON数组缺少元素

> ID：10041281
> 
> 赞同：0
> 
> 时间：2012-04-06T08:59:26.447
> 
> 标签：php, jquery, html, json

我正在使用`$.getJSON`jQuery 函数来允许我的站点与不同域的服务器进行交互。但是，我一直在修复一个导致第三个和第四个数据项为`undefined`. 我不确定问题出在哪里。

JavaScript：

```
$.getJSON(domain_path + 'display.php?url=' + purl + '&callback=?', function(data) {

        var username = data['uname'];
        var point = data['point'];
        var email = data['email'];
        var title = data['title'];

}); 
```

和是，但是`email`和是正确的。`title``undefined``uname``point`

JSON 是由这个 PHP 生成的：

```
$url = mysql_real_escape_string($_GET['url']);
$result = mysql_query("SELECT * FROM user url='$url'")or die(mysql_error()); 
$row = mysql_fetch_array($result);
if($row){

    $uname = $row['uname'];
    $point = $row['point'];
    $email = $row['email'];
    $title = $row['title'];

    $output = array('uname'=>$uname,'point'=>$point,'email'=>$email,'title'=>$title);
    $out_string =  json_encode($output);
    echo $callback.'('.$out_string.');';
} 
```

JSON 结果如下所示：

```
284927410({"uname":"john","point":"104","email":"john482@yahoo.com","title":"teacher"}); 
```

我能够得到`john`and ，`104`但是当我把它们放在一个.`email``title``undefined``alert()`

我错过了一些规则吗？还是代码有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:07:05.480

我复制了您的环境，使用此代码一切正常：

```
$.getJSON("http://localhost:8081/test", function(data) {
        alert(data.uname);
        alert(data.point);
        alert(data.email);
        alert(data.title);
    }); 
```

路径`http://localhost:8081/test`只返回 的地方`{"point":"104","title":"teacher","email":"john482@yahoo.com","uname":"john"}`

# android - 如何将图像从 sdcard 发送到 android 中的社交媒体？

> ID：10041282
> 
> 赞同：-1
> 
> 时间：2012-04-06T08:59:29.910
> 
> 标签：android

在我的应用程序中，我必须使用社交媒体将图片作为附件发送。这是我的代码。

```
private void getImage() 
{
String state = Environment.getExternalStorageState();
Environment.MEDIA_MOUNTED.equals(state);
Intent picMessageIntent = new Intent(android.content.Intent.ACTION_SEND);
picMessageIntent.putExtra(Intent.EXTRA_STREAM,Uri.parse("/mnt/sdcard/DCIM/Camera /mytry.jpg"));
picMessageIntent.setType("image/jpg");
startActivity(picMessageIntent);                
} 
```

任何建议都可以完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:04:12.193

您只需要更正函数中的第四行`getImage()`：

```
emailIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///mnt/sdcard/DCIM/Camera /mytry.jpg")); 
```

# emacs - 如何不保存文件中的更改（以及临时缓冲区！）？

> ID：10041284
> 
> 赞同：1
> 
> 时间：2012-04-06T08:59:39.630
> 
> 标签：emacs

一定是个愚蠢的问题，但有一段时间使用 Emacs 我不知道如何才能不应用我的更改......

当我退出 C x C c 它告诉我：

*   输入 SPC 或 `y' 保存当前缓冲区；
*   DEL 或 `n' 跳过当前缓冲区；
*   RET 或 `q' 放弃保存（跳过所有剩余的缓冲区）；
*   Cg 退出（取消整个命令）；
*   ！保存所有剩余的缓冲区；
*   Cr 查看此缓冲区；
*   d 查看此缓冲区中的更改；
*   或者 。（句点）保存当前缓冲区并退出。

所以这里有一些不保存更改的机会：n 或 q 但总有当前阶段的保存缓冲区:(

我的意思是，例如，当我通过在其中添加随机文本来破坏某些文件并且我不想保存更改时我想在下次未保存（未破坏）文件时开始编辑但 Emacs 总是打开保存的缓冲区:( 如何解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T12:00:12.143

您对问题的措辞非常混乱。我认为您想将还原添加到提供的选项列表中？此代码添加`,`了还原并将`%`缓冲区标记为未修改：

```
(when (boundp 'save-some-buffers-action-alist)
  (setq save-some-buffers-action-alist
        (cons
         (list
          ?%
          #'(lambda (buf)
              (with-current-buffer buf
                (set-buffer-modified-p nil))
              nil)
          "mark buffer unmodified.")
         (cons
          (list
           ?, 
           #'(lambda (buf)
               (with-current-buffer buf
                 (revert-buffer t))
               nil)
           "revert buffer.")
          save-some-buffers-action-alist)))) 
```

# c# - 如何按字母顺序在一行中交换两个字符串？

> ID：10041286
> 
> 赞同：0
> 
> 时间：2012-04-06T08:59:49.493
> 
> 标签：c#

大家好，

我想根据字母顺序在一行中交换两个字符串。

例子：

Arun 2012，Gopi 2010，Dinesh 2012。计算机网络，Tata McGraw Hill。745:19-22

在这一行中，作者姓名 Likely Arun、Dinesh、Gopi 必须按字母顺序交换并保存在同一个文件中以供参考。

怎么可能完全交换字符串数组？

这是我尝试过的：

```
foreach (string strPara in strParaValue) 
{ 
   string[] strAuthorsPart = strPara.Split('.'); 
   string[] strAuthorslist = strAuthorsPart[0].Split(','); 
   string[] strAuthor = strAuthorslist[0].Split(' '); 
   if (strSplitValue[0].Contains(strAuthor[0].Trim())) 
   { 
      swt.WriteLine(strAuthor[0] + "\t"); 
   } 
   else 
   {
      swf.WriteLine(strAuthor[0] + "\t"); 
   }
} 
```

谢谢迪戈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:06:13.727

你的意思是这样的？

```
string tosort = " Arun 2012, Gopi 2010, Dinesh 2012\. Computer Networks, Tata McGraw Hill. 745:19-22";
string sortedAuthors = "";
string sortedTexts = "";
List<string> mylist = tosort.Split(new[]{',', '.'}).ToList<string>();
mylist.Sort();
mylist.ForEach(n => if(n.Substring.IndexOf(" ").sorted += n + ","); 
```

这将产生输出

> “ 745:19-22，Arun 2012，计算机网络，Dinesh 2012，Gopi 2010，Tata McGraw Hill，”

**根据您的评论**，试试这个：

```
string tosort = " Arun 2012, Gopi 2010, Dinesh 2012\. Computer Networks, Tata McGraw Hill. 745:19-22";
string sortedAuthors = "";
string sortedTexts = "";
List<string> mylist = tosort.Split(new[] { ',', '.' }).ToList<string>();
mylist.Sort(); int i;
foreach (var n in mylist)
{
    if (Int32.TryParse(n.Substring(n.IndexOf(' ')).Trim(), out i))
    {
        sortedAuthors += (n + ", ");
    }
    else
    {
        sortedTexts += (n + ", ");
    }
}
string final = sortedAuthors + ", " + sortedTexts; 
```

**这将输出**：

> , 745:19-22, Arun 2012, 计算机网络, Dinesh 2012, Gopi 2010, Tata McGraw Hill,

我相信你可以处理剩下的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:08:51.507

首先，您必须在某个容器中获取要排序的字符串，例如 Array. 例如 string[] strings = s.Split(',')。请务必在您的案例中仅获取带有作者姓名的部分。然后您可以以任何方便的方式对结果数组进行排序，例如：Array.Sort(strings)。然后从它们创建新字符串： string newline = string.Join(",",strings) 并将它与你以前的 waht 连接起来。请记住，任何带有字符串修改的操作实际上都会产生新的字符串对象，因为字符串是不可变的，因此不可能进行任何“就地”排序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T09:48:19.910

在你发现`strAuthorslist`你的任务很简单之后：

```
string[] strAuthorsPart = strPara.Split('.'); 
string[] strAuthorslist = strAuthorsPart[0].Split(','); 
strAuthorslist.Sort();
var newAuthorsArrangement = String.Join(strAuthorslist, ",");
var updatedLine = newAuthorsArrangement  + "." +
                  strPara.SkipWhile(x=>x!='.').ToString(); 
```

我使用了 .Net 4 [SkipWhile](http://msdn.microsoft.com/en-us/library/bb549075.aspx)方法，但您可以使用 .Net 1.1 简单地处理最后一部分

# python - 根据句子上下文检测单词you是主语还是宾语代词。

> ID：10041290
> 
> 赞同：3
> 
> 时间：2012-04-06T09:00:09.670
> 
> 标签：python, regex, nlp, linguistics

理想情况下，在 python 中使用正则表达式。我正在制作一个简单的聊天机器人，它目前在正确响应“我爱你”之类的短语时遇到问题（它会从语法处理程序中返回“你爱我”，而它应该回馈“你爱我” ”）。

另外，如果你能想到好的短语来投入这个语法处理程序，我会很高兴，那就太好了。我想要一些测试数据。

如果那里有一个很好的及物动词列表（比如“使用前 100 个”），那么使用它和特殊情况下的“及物动词 + 你”模式可能是可以接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:04:58.160

好吧，您要实现的绝对是非常具有挑战性的，但也非常困难。

## 逻辑

作为初学者，我会先研究一下语法规则。

**基本句子结构：**

*   主语 + 及物动词 + 宾语
*   主语 + 不及物动词

*（当然，我们也可以讨论“主语+动词+间接宾语+直接宾语”格式等（例如我给你球），但现在这太复杂了......）*

显然，这个方案非常简单，但现在让我们坚持下去。

然后（另一个过于简单化的假设），***每个部分都是一个单词***。

所以基本上你有以下**句子计划：**

```
WORD WORD WORD 
```

这通常可以使用**正则表达式**匹配：

```
([\w]+)\s+([\w]+)\s+([\w]+)? 
```

**解释 ：**

```
([\w]+)     # first word (=subject)
\s+         # one or more spaces    
([\w]+)     # second word (=verb)
\s+         # one or more spaces
([\w]+)?    # (optional) third word (=object - if the verb is transitive) 
```

* * *

现在，显然要制定像“你爱我”而不是“你爱我”这样的句子，你的算法也应该“理解”：

*   句子的第三部分有宾语的作用
*   由于“我”是人称代词（仅用于主格：“作为主语”），我们应该使用它的“宾格形式”（=作为宾语）；因此，为此，您可能还需要人称代词表，例如**：**

> *   我-我-我
> *   你——你——你
> *   他-他-他
> *   ETC...

只是一些想法......（纯粹出于我对语言学的热情:-)）

* * *

## 数据

至于您感兴趣的单词表，只需几个示例：

*   [330 个最常见的英语动词](http://www.acme2k.co.uk/Acme/3star%20verbs.htm)（大多数——如果不是全部的话——是及物动词）
*   [人称代词表](http://josecarilloforum.com/imgs/PronounChart.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T21:46:38.177

你想要的是一个句法分析器（又名[解析器](http://en.wikipedia.org/wiki/Parsing)）——这可以通过@Dr.Kameleon 所描述的基于规则的系统来完成，或者通过统计来完成。那里有很多实现，其中一个是[斯坦福](https://github.com/dasmith/stanford-corenlp-python)的。这些通常会告诉你一个词的句法角色是什么（例如主语“你在这里”，或宾语“她喜欢你”）。你如何使用这些信息将陈述变成问题是完全不同的蠕虫罐头。对于英语，您可以获得一个相当简单的基于规则的系统来正常工作。

# c# - 将鼠标点击传递给线算法

> ID：10041292
> 
> 赞同：0
> 
> 时间：2012-04-06T09:00:30.537
> 
> 标签：c#

我写了bresenham算法

> `0<Angular coefficient<1`

**我对 C# 中的图形**不太了解，我意识到对于绘制像素我可以使用**坐标**为 1,1的函数**Fillrectangel**

 **我想编写我的代码，然后在面板上单击鼠标并在两个位置画一条从**x0,y0 到 xEnd,yEnd的线**

所以这是我的代码有异常

![在此处输入图像描述](../Images/864d6feb9906a73dbf958e66c8b48a65.png)

*空引用异常是未处理的对象引用未设置到对象的实例* 此异常在行 e.Graphics.FillRectangle(new SolidBrush(grad1), x, y, 1, 1);

**我认为问题在于对象 e 是 Null 并且我应该新建它但是如何呢？**

如何更正我的代码以绘制线条？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

    namespace WindowsFormsApplication3
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }

            private void panel1_Paint(object sender, PaintEventArgs e)
            {
                Line l=new Line();
                l.LineBres(Cursor.Position.X, Cursor.Position.Y, Cursor.Position.X, Cursor.Position.Y);

            }
        }
    }
    public class Line
    {
        System.Windows.Forms.DrawItemEventArgs e;
        Color grad1 = Color.FromArgb(165, 194, 245);
        public void LineBres(int x0, int y0, int xEnd, int yEnd)
        {
            int dx = xEnd - x0;
            int dy = yEnd = y0;
            int p = 2 * dy - dx;
            int twoDy = 2 * dy;
            int twoDyMinusDx = 2 * (dy - dx);
            int x, y;
            if (x0 > xEnd)
            {
                x = xEnd;
                y = yEnd;
                xEnd = x0;
            }
            else
            {
                x = x0;
                y = y0;
            }

            e.Graphics.FillRectangle(new SolidBrush(grad1), x, y, 1, 1);
            while (x < xEnd)
            {
                x++;
                if (p < 0)
                    p += twoDy;
                else
                {
                    y++;
                    p += twoDyMinusDx;
                }
                e.Graphics.FillRectangle(new SolidBrush(grad1), x, y, 1, 1);
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:41:45.873

以下是您需要更改的内容：

为面板添加鼠标单击事件并稍微更改您的行代码 - 删除`System.Windows.Forms.DrawItemEventArgs e;`并传递面板的图形`panel1.CreateGraphics();`。这是代码：

```
private int firstX, firstY;//store coordinates of first click
private bool firstClick = true;
private void panel1_MouseClick(object sender, MouseEventArgs e)
{
    if (firstClick)
    {
        firstX = e.X;
        firstY = e.Y;
        firstClick = false;
    }
    else
    {
        Line l = new Line();
        l.LineBres(firstX, firstY, e.X, e.Y, panel1.CreateGraphics());
        firstClick = true;
    }
}

public class Line
{
    private Color grad1 = Color.FromArgb(165, 194, 245);

    public void LineBres(int x0, int y0, int xEnd, int yEnd, Graphics e)
    {
        int dx = xEnd - x0;
        int dy = yEnd = y0;
        int p = 2*dy - dx;
        int twoDy = 2*dy;
        int twoDyMinusDx = 2*(dy - dx);
        int x, y;
        if (x0 > xEnd)
        {
            x = xEnd;
            y = yEnd;
            xEnd = x0;
        }
        else
        {
            x = x0;
            y = y0;
        }

        e.FillRectangle(new SolidBrush(grad1), x, y, 1, 1);
        while (x < xEnd)
        {
            x++;
            if (p < 0)
                p += twoDy;
            else
            {
                y++;
                p += twoDyMinusDx;
            }
            e.FillRectangle(new SolidBrush(grad1), x, y, 1, 1);
        }
    }
} 
```**

# c# - 具有单实例化的全局线程安全多值自定义字典

> ID：10041294
> 
> 赞同：3
> 
> 时间：2012-04-06T09:01:02.350
> 
> 标签：c#, multithreading, thread-safety, global-variables

我想要一个类似于多值字典的全局对象，在不同线程之间共享。

我希望对象只创建一次（例如从数据库中获取数据），然后由不同的线程使用。

该对象应该可以通过其他属性轻松扩展（目前只有 JobName 和 URL）。

如果可能的话，我宁愿避免锁定。

我面临以下问题：

*   下面显示的当前版本不是线程安全的；
*   我不能使用 ConcurrentDictionary 因为我扩展了 Dictionary 对象以允许每个键有多个值；

这是应该容易修改的对象结构：

```
 public struct JobData
    {
        public string JobName;
        public string URL;
    } 
```

我扩展了 Dictionary 对象以允许每个键有多个值：

```
 public class JobsDictionary : Dictionary<string, JobData>
    {
        public void Add(string key, string jobName, string url)
        {
            JobData data;
            data.JobName = jobName;
            data.URL = url;
            this.Add(key, data);
        }
    } 
```

在线程之间共享的静态类。如您所见，它在第一次为特定作业调用时为特定作业创建了一个字典条目。

例如，第一次调用“earnings”时，它将创建“earnings”字典条目。这会产生线程安全问题：

```
public static class GlobalVar
{
    private static JobsDictionary jobsDictionary = new JobsDictionary();
    public static JobData Job(string jobCat)
    {   
        if (jobsDictionary.ContainsKey(jobCat))
            return jobsDictionary[jobCat];
        else
        {
            String jobName;
            String url = null;

            //TODO: get the Data from the Database
            switch (jobCat)
            {
                case "earnings":
                    jobName="EarningsWhispers";
                    url = "http://www.earningswhispers.com/stocks.asp?symbol={0}";
                    break;
                case "stock":
                    jobName="YahooStock";
                    url = "http://finance.yahoo.com/q?s={0}";
                    break;
                case "functions":
                    jobName = "Functions";
                    url = null;
                    break;
                default:
                    jobName = null;
                    url = null;
                    break;
            }
            jobsDictionary.Add(jobCat, jobName, url);
            return jobsDictionary[jobCat];
        }
    } 
```

在每个线程中，我以这种方式获取特定的 Job 属性：

```
//Get the Name
string JobName= GlobalVar.Job(jobName).JobName;

//Get the URL
string URL = string.Format((GlobalVar.Job(jobName).URL), sym); 
```

如何创建一个“实例化”一次的自定义字典（我知道它不是正确的术语，因为它是静态的......）并且它是线程安全的？

谢谢

**更新**

好的，这是新版本。

我通过删除 switch 语句并一次加载所有字典项来简化代码（无论如何我都需要它们）。

这种方案的好处是只加锁一次：当字典数据被添加时（第一个进入锁的线程将数据添加到字典中）。当线程访问字典进行阅读时，它没有被锁定。

它应该是线程安全的，并且不应该导致死锁，因为 jobsDictionary 是私有的。

```
public static class GlobalVar
{
    private static JobsDictionary jobsDictionary = new JobsDictionary();   
    public static JobData Job(string jobCat)
    {
        JobData result;
        if (jobsDictionary.TryGetValue(jobCat, out result))
            return result;

        //if the jobsDictionary is not initialized yet...
        lock (jobsDictionary)
        {
            if (jobsDictionary.Count == 0)
            {
                //TODO: get the Data from the Database
                jobsDictionary.Add("earnings", "EarningsWhispers", "http://www.earningswhispers.com/stocks.asp?symbol={0}");
                jobsDictionary.Add("stock", "YahooStock", "http://finance.yahoo.com/q?s={0}");   
                jobsDictionary.Add("functions", "Functions", null);  
            }
            return jobsDictionary[jobCat];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T09:59:17.833

如果您只填充一次集合，则根本不需要任何锁定，因为 Dictionary 仅在读取时是线程安全的。如果要防止多个线程多次初始化，可以在初始化期间使用双重检查锁，如下所示：

```
static readonly object syncRoot = new object();
static Dictionary<string, JobData> cache;

static void Initialize()
{
    if (cache == null)
    {
        lock (syncRoot)
        {
            if (cache == null)
            {
                cache = LoadFromDatabase();
            }
        }
    }
} 
```

与其允许每个线程访问字典，不如将其隐藏在只公开您真正需要的操作的外观后面。这使得推理线程安全变得更加容易。例如：

```
public class JobDataCache : IJobData
{
    readonly object syncRoot = new object();
    Dictionary<string, JobData> cache;

    public void AddJob(string key, JobData data)
    {
        lock (this.syncRoot)
        {
            cache[key] = data;
        }
    }
} 
```

在没有衡量锁定实际上对性能有太大影响的情况下试图防止锁定是不好的。防止这样做。通常使用简单的`lock`语句比编写无锁代码要简单得多。与普通软件错误相比，并发错误存在一个令人讨厌的问题。它们很难复制，也很难追踪。如果可以，请防止编写并发错误。您可以通过编写最简单的代码来做到这一点，即使它更慢。如果它被证明太慢，你总是可以优化。

如果您仍然想编写无锁代码，请尝试使用不可变数据结构，或防止更改现有数据。这是我在编写[Simple Injector](http://simpleinjector.codeplex.com)（一个可重用的库）时使用的一个技巧。在这个框架中，我从不更新内部字典，而总是用新的字典完全替换它。因此字典本身永远不会改变，对该实例的引用只是被一个全新的字典替换。这可以防止您必须完全锁定。但是，您必须意识到可能会丢失更新。换句话说，当多个线程更新该字典时，可能会丢失其更改，这仅仅是因为每个线程都会创建该字典的新副本并添加自己的值以及它自己的副本，然后再将该引用公开给其他线程。

换句话说，您只能在外部调用者仅读取时使用此方法（并且您可以从丢失的更改中恢复，例如通过再次查询数据库）。

**更新**

由于我在@ili 的回答中解释的原因，您的更新版本仍然不是线程安全的。以下将解决问题：

```
public static class GlobalVar
{
    private static readonly object syncRoot = new object();
    private static JobsDictionary jobsDictionary = null;

    public static JobData Job(string jobCat)
    {
        Initialize();

        return jobsDictionary[jobCat];
    }

    private void Initialize()
    {
        // Double-checked lock.
        if (jobsDictionary == null)
        {
            lock (syncRoot)
            {
                if (jobsDictionary == null)
                {
                    jobsDictionary = CreateJobsDictionary();
                }
            }
        }
    }

    private static JobsDictionary CreateJobsDictionary()
    {
        var jobs = new JobsDictionary();

        //TODO: get the Data from the Database
        jobs.Add("earnings", "EarningsWhispers", "http://...");
        jobs.Add("stock", "YahooStock", "http://...");
        jobs.Add("functions", "Functions", null);

        return jobs;
    }
} 
```

您还可以使用静态构造函数，这样您就不必自己编写双重检查锁。但是，在静态构造函数中调用数据库是危险的，因为静态构造函数只会运行一次，当它失败时，只要 AppDomain 存在，完整的类型将无法使用。换句话说，当这种情况发生时，您的应用程序必须重新启动。

**更新 2：**

您还可以使用 .NET 4.0 `Lazy<T>`，它比双重检查锁更安全，因为它更容易实现（并且更容易正确实现），并且在内存模型较弱（比 x86 弱）的处理器架构上也是线程安全的如ARM）：

```
static Lazy<Dictionary<string, JobData>> cache =
    new Lazy<Dictionary<string, JobData>>(() => LoadFromDatabase()); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-06T10:18:36.277

1）使用单例模式来拥有一个实例（其中一种方法是`static`像你一样使用类）

2）为了使任何线程安全，你**应该**使用`lock`它或者它是模拟的。如果您害怕不必要的锁，请这样做：

```
public object GetValue(object key)
{
    object result;
    if(_dictionary.TryGetValue(key, out result) 
        return result;

     lock(_dictionary)
     {
        if(_dictionary.TryGetValue(key, out result) 
            return result;
        //some get data code
        _dictionary[key]=result;
        return result;
     }
} 
```

# android - Android USB鼠标右键单击正确行为（ICS）

> ID：10041295
> 
> 赞同：8
> 
> 时间：2012-04-06T09:01:03.780
> 
> 标签：android, click, usb, mouse

插入android（ics）的USB鼠标右键单击是否始终指定为“后退”按钮？我有一台没有的平板电脑。

我想删除状态栏，仍然可以使用带有 USB 鼠标的平板电脑。

有谁知道在哪里/如何在android中配置行为？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-03-27T22:18:40.427

迟到的答案，但答案是肯定的。我将提供有关此主题的更多详细信息，因为它是Internet 上此类***唯一的主题。***

**默认行为：** Android 将此视为后退按钮，没有可见的异常。

*对于手机*和普通应用程序来说，这是一个非常好的功能。但是，有两种类型的人希望以不同的方式实现此功能。模组制作者和应用程序开发人员。

**Modders 的修复：**在有根设备上（对于许多未锁定 adb 的失败设备可能没有根），`Generic.kl`在`/system/usr/keylayout`. 搜索 flag `KEY_BACK`，可能有多个 keycode 在与其链接的多行上。对我来说，它`key 158`与`WAKE_DROPPED`国旗有关。对于通用的“右键单击”功能，您需要交换后退键和菜单键的数字代码，因此当鼠标发送后退键命令时，系统实际上会触发菜单键命令，同时保持一些设备上用于返回的硬件键（标记为菜单键）。是的，这将反转您手机上的硬件密钥，但这是最简单的解决方案，无需重建整个 ROM。如果这是出于公司或专业原因，可能会看到这篇文章：[覆盖鼠标事件内核级](https://stackoverflow.com/questions/13398409/mouse-right-button-mapped-to-work-for-traversing-back-in-jelly-bean)。我实际上建议创建一个 Xposed 模块来覆盖他们引用的过程。否则，请查看如何重新映射键码，抱歉我在这里找不到直截了当的文章。

**应用程序开发人员的修复：非 root：**覆盖应用程序中的返回键并返回 true。在您的`onBackPressed()`覆盖中，执行任何必要的右键单击功能。简单的！由于您很可能需要类似 PC 的上下文菜单功能，因此您还需要通过 MotionEvent 侦听器跟踪鼠标所在的位置，该侦听器使用`event.getRawX()`和 RawY() 调用将值存储到全局变量的根视图. 然后，您可以通过设置顶部和左侧边距将上下文菜单（大小为 ListView 或 VerticalLinearLayout）置于光标下并将其设置为可见。如果您想通过右键单击对布局中的悬停对象执行辅助功能，例如删除或复制，则必须手动确定存储的鼠标坐标悬停在哪个对象上。您可能必须添加`MotionEvent.ACTION_HOVER_ENTER`每个受影响对象上的侦听器，并将对象 ID 存储在全局变量中，以便在调用 onBackPressed() 函数时使用。（有时间我会提供代码！）

希望这可以帮助任何探索这样一个特定主题的人！:)

# c++ - 如何使用 windows.h 在 C++ 中创建一个新文件

> ID：10041296
> 
> 赞同：2
> 
> 时间：2012-04-06T09:01:05.993
> 
> 标签：c++, windows, file, header-files

`file.open();`我想知道除了in之外是否还有其他方法`<windows.h>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T09:09:55.910

正如您特别指出`windows.h`的那样，WINAPI 函数[`CreateFile()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)可用于创建文件。在链接的末尾有多个使用示例`CreateFile()`，但这里是一个简单的示例：

```
#include <windows.h>
#include <iostream>

int main()
{
    HANDLE h = CreateFile("test.txt",    // name of the file
                          GENERIC_WRITE, // open for writing
                          0,             // sharing mode, none in this case
                          0,             // use default security descriptor
                          CREATE_ALWAYS, // overwrite if exists
                          FILE_ATTRIBUTE_NORMAL,
                          0);
    if (h)
    {
        std::cout << "CreateFile() succeeded\n";
        CloseHandle(h);
    }
    else
    {
        std::cerr << "CreateFile() failed:" << GetLastError() << "\n";
    }
    return 0;
} 
```

# php - 如何从 MD5 恢复密码？

> ID：10041298
> 
> 赞同：3
> 
> 时间：2012-04-06T09:01:17.850
> 
> 标签：php, md5, forgot-password

我正在使用 md5 在我的数据库中加密用户的密码，我希望他们在忘记密码时通过向他们发送电子邮件来取回密码。问题是我不知道如何编写 PHP 代码来恢复它。

任何答案或适当的链接将不胜感激。谢谢..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T09:02:46.237

这不能做¹

MD5 是[*散列函数*](http://en.wikipedia.org/wiki/Cryptographic_hash_function)而不是*加密函数*。这是一个单向过程，不可逆。

¹实际上，有*很多*这样的密码（输入）在散列时会产生*相同*的MD5 值，但是很难找到*一个*并且 [通常] 不可能找到*原始的*。这就是“破解”密码所做的事情——它找到一个这样的输入，当散列时，会产生特定的输出。（我不会在这条路上提供更多帮助。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T09:10:24.007

如前所述 - MD5 像所有散列函数一样 - 不应该被颠倒。也可以这样做，因为许多字符串可以散列到同一个字符串，并且当反转时你可以得到不同的字符串。

如果你幸运的话，你可以在 Rainbowtables 中找到你的哈希值：[http](http://www.md5rainbow.com/) ://www.md5rainbow.com/ 但它可以带给你的不是你的原始字符串，尽管在你的登录中你可能会比较散列字符串并不重要。

您可能想要做的是“重置密码”而不是发送原始密码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T09:07:13.000

MD5 是一个散列函数，你不应该尝试恢复散列密码。通常的做法是删除散列密码并强制他们从电子邮件中的链接设置新密码。传递散列密码，然后尝试反向散列它们，是一个严重的安全漏洞。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-06T09:12:59.867

从理论上讲，在大多数情况下，您的用户希望您向他们发送一个特殊链接，该链接将在经过一些检查后重置密码，您不应该在邮件中发送纯文本密码，也不应该让您的用户知道您有一个未经哈希处理的密码版本在您的系统中可用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T09:05:42.590

[彩虹桌](http://en.wikipedia.org/wiki/Rainbow_table)可能会让您感兴趣。
不可能从哈希中恢复原始密码，但使用彩虹表可能会找到一些字符串，这些字符串会产生与您需要的相同的哈希。

# android - 应用程序未显示在 Google Play 中搜索 3.x 设备

> ID：10041301
> 
> 赞同：0
> 
> 时间：2012-04-06T09:01:26.283
> 
> 标签：android

我意识到如果我使用带有 Android 3.x 的三星 10" 进行搜索，我的应用程序不会出现在 Google Play 的搜索中。

如果我安装它（通过使用 adb 或 maven android 插件），一切都会按预期工作（核心功能、兼容模式……）。

我研究了所有关于针对不同设备、屏幕的指南，在 Manifest 元数据中尝试了不同的组合，实际配置如下所示：

```
<uses-sdk android:minSdkVersion="7" 
          android:maxSdkVersion="13" 
          android:targetSdkVersion="9" />
<supports-screens android:smallScreens="true" 
              android:normalScreens="true"
              android:largeScreens="true"
              android:xlargeScreens="true" /> 
```

在我指定的 maven android 插件配置中：

```
<platform>10</platform> 
```

在 Google Play 开发者控制台中，apk 被正确报告为：

```
API Level: 7-13
Supported screens: small-xlarge 
```

我的元数据有什么问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:14:20.903

其他一些标签也会影响您的应用在 Android Market 中的可见性。我记得有一次我正在开发的一款应用也没有出现在市场上。我意识到我的应用程序正在使用电话服务，但是我的设备 MOTOROLA Xoom 没有可用的电话服务，这反过来会过滤 Android 市场中的应用程序。我将 TELEPHONY 服务中的属性设置为不需要（仍在 AndroidManifest 中，我忘记了特定标签）并修复了问题。

# c++ - 带有指向模板类的指针的 C++ std::vector

> ID：10041309
> 
> 赞同：1
> 
> 时间：2012-04-06T09:02:15.993
> 
> 标签：c++, class, templates, vector

在我正在进行的一个项目中，我正在制作一个带有指向模板类的指针的向量。

```
 template <typename T>
 std::vector<templateClass<T>*> vec; 
```

但是，这给了我两个错误：

```
Error C2133: vec : unknown size
Error C2998: std::vector<templateClass<T>*> vec : cannot be a template definition 
```

如果我将代码更改为：

```
std::vector<templateClass<int>*> vec; 
```

它工作得很好，所以我想问题不在于你不能使用带有向量的模板类，而是你需要告诉编译器使用什么类型。有没有办法解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:07:35.677

创建类实例时，您必须选择类型。在定义中你可以写 T 但在创建实例时你必须指定类型。

因此，如果您想定义而不是创建实例，请使用`typedef`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:11:49.103

您不能拥有模板化成员。
模板必须来自类或函数模板化声明。

```
template <typename T>
class blah {
     std::vector<templateClass<T>*> vec;
} 
```

编译器需要在代码中的某处定义模板化类型名，例如：`blah<int>`

如果你有一个模板化的成员，你就不能在代码的任何地方定义类型，编译器也不能决定成员的类型。

模板类型名是在您第一次使用函数或类（显式或隐式）时决定的，因此您必须在调用代码可访问的某个地方拥有模板定义和实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T09:17:34.930

看起来您正在尝试将新类型定义`vec<T>`为更长的模板化表达式的快捷方式。通常，这将使用 来完成`typedef`，但是 C++ 不支持模板化类型定义。

请注意，在当前代码中，您实际上是在尝试定义一个名为 的变量`vec`，但您没有为它赋予 T 的特定类型，这就是编译器抱怨的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T09:21:52.420

目前 C++ 不支持模板类型定义，因此您必须使用 Herb Sutter 提出的最常见的解决方案 (http://gotw.ca/gotw/079.htm)

# asp.net - 如何在 aspxclienttextbox 中添加新方法？

> ID：10041310
> 
> 赞同：0
> 
> 时间：2012-04-06T09:02:30.423
> 
> 标签：asp.net, devexpress, custom-server-controls

我可以向 aspxclienttextbox 控件添加新方法吗？
我正在对 aspxtextbox 进行自定义控件...我希望在自定义控件上添加客户端方法，但我对此一无所知...所以有人知道如何制作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:35:19.117

我知道实现此目的的两种方法：

1.对象原型添加方法：

```
ASPxClientTextBox.prototype.NewMethod = function(param1) { console.log(param1); } 
```

根据[这张票](http://www.devexpress.com/Support/Center/p/Q133745.aspx)，您应该将此代码放在正文部分的末尾。

2.在您的自定义控件代码中使用`ASPxTextBox` [ClientSideEvents.Init 。](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxClassesScriptsASPxClientControl_Inittopic)这将为每个`ASPxTextBox`实例动态注册方法（而第一个方法修改对象原型）。

```
ClientSideEvents.Init = "function(s,e) {s.NewMethod = function(param1) { console.log(param1); }}"; 
```

# html - 在 IE8 中显示白色边框的圆角

> ID：10041313
> 
> 赞同：0
> 
> 时间：2012-04-06T09:02:47.820
> 
> 标签：html, jquery-plugins, internet-explorer-8, css

我正在使用 jQuery 圆角插件和border-radius.htc 作为圆角。它在 IE 8 以外的所有浏览器中都能完美运行。它显示了一些不需要的白色边框。我附上屏幕截图。如果我得到一些删除它的提示，那将非常有帮助。

请在此处查看屏幕截图：

[http://imageshack.us/photo/my-images/842/gonline.png/](http://imageshack.us/photo/my-images/842/gonline.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:10:18.200

**试试 background:transparent
如果不行，贴代码**

# css - CSS 菜单在 IE 8 及更低版本中不起作用

> ID：10041321
> 
> 赞同：0
> 
> 时间：2012-04-06T09:03:36.730
> 
> 标签：css, internet-explorer, internet-explorer-6, cross-browser

垃圾IE，简直就是讨厌它。好的，这就是我所做的，[jsbin](http://jsbin.com/adijey)。
在旧版本的 IE 中，如何使菜单栏看起来更漂亮或类似，例如在 FF&Chrome 中？
我也不明白，当嵌套元素`#nav ul li`没有在 IE 8 及更少版本中应用时，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T10:11:15.020

一点解决方案，也许它会帮助你实现你正在寻找的东西：

启用在旧版 IE 中禁用的某些 HTML5 功能：

*   [现代化](http://modernizr.com/)

*   [希夫](http://code.google.com/p/html5shiv/)

它们都可以帮助您实现结果。希望对您有所帮助，如果没有，请随时丢弃我的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T09:26:13.553

您应该添加 html5 shim，因为旧版 IE 不理解 HTML5 标签。您还可以将 id 移动到 ul 而不是 header 元素

# html - 为什么这两个 div 没有按照我的预期显示？

> ID：10041327
> 
> 赞同：1
> 
> 时间：2012-04-06T09:03:55.523
> 
> 标签：html

[这个 jsfiddle 示例](http://jsfiddle.net/wzYry/)显示了我在说什么，我给有问题的 div 一个红色边框以显示它是如何显示的。

我希望#searchwrapper_3 div 进入#col_st_cautare 之一，但由于某种原因，它不是这样工作的。我已经盯着它看了一段时间了，我不知道为什么它会这样显示

我也有一个看起来不错的示例，因为我在[此处](http://jsfiddle.net/ZPanV/1/)的#searchwrapper div 之后添加了另一个元素。

问题已修复，如果仅包含浮动元素，则 div 将折叠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:06:44.557

如果一个 div 只包含浮动元素，它的高度就会塌陷。

您可以添加`<div style="clear:both;">`或使用[本文](http://css-tricks.com/all-about-floats/)中的一些技术，例如`overflow:hidden`：

```
<div style="border: 1px solid red;overflow:hidden" id="col_st_cautare"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:06:57.643

你需要做一个`clear:both;`- 见[http://jsfiddle.net/wzYry/3/的结尾](http://jsfiddle.net/wzYry/3/)

```
<div style="border: 1px solid red;" id="col_st_cautare">
    <div style="float: left;" id="searchwrapper_3">

        .... code ....

    </div>
    <div style="clear:both;"></div>
</div>​ 
```

`clr`附带说明一下，以您的风格上课可能会更容易。

```
.clr{clear:both;} 
```

这样，您可以在需要清除的任何时候使用它

```
<div class='clr'></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T09:07:22.253

发生这种情况是因为里面的子元素是浮动的，而父元素不知道如何包装它们。

可能是最简单的解决方法

```
#col_st_cautare { overflow: hidden; } 
```

### [演示](http://jsfiddle.net/Starx/wzYry/6/)

除此之外，稳定的解决方案是`<div style="clear:both;"></div>`在关闭元素之前添加。

# wordpress - 如何将用户的IP重定向到网站IP？

> ID：10041332
> 
> 赞同：3
> 
> 时间：2012-04-06T09:04:32.210
> 
> 标签：wordpress, redirect, amazon

我在亚马逊服务器上有一些信息，但是可以通过我的网站 IP 访问这些信息。当用户使用指向我网站信息的链接时，如何将用户 IP 重定向到网站 IP？

网站宿主是 iPage，平台 Wordpress。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:07:25.710

你不能。如果用户提出请求，将是他们的计算机进行连接，因此它将是他们的 IP。

解决方案是不让用户提出请求，而是自己提出请求。您在亚马逊上获取网页（使用 curl、wget 等）并将信息显示给您网站上的用户。

# wxwidgets - wxWidgets treeCtrl 的面包屑

> ID：10041338
> 
> 赞同：0
> 
> 时间：2012-04-06T09:05:30.540
> 
> 标签：wxwidgets, breadcrumbs

我想`treeCtrl`在`wxWidgets`C++ 中添加面包屑导航 - 类似于 IE Explorer。有谁知道这是否存在于某个地方？或者至少类似于用作起点的东西？理想情况下，我希望面包屑在 mac/unix/windows 上以本机方式查看和操作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:13:44.713

wxWidgets 中没有面包屑控件，可能是因为在 Windows 或 GTK 中实际上没有原生控件。创建这样一个控件的最简单方法可能是自己绘制它，在 OSX 上有[NSPathControl](https://developer.apple.com/library/mac/#documentation/cocoa/Reference/NSPathControl_class/Reference/Reference.html)我认为可以做你想做的事。[这个GTK 错误](https://bugzilla.gnome.org/show_bug.cgi?id=331703)也有很多关于想法、模型和现有控件的问题的链接。

# joomla - Joomla 2.5 中的 K2 项目分页符？

> ID：10041341
> 
> 赞同：-1
> 
> 时间：2012-04-06T09:05:37.277
> 
> 标签：joomla

是否可以在 K2 项目中使用分页符？我正在使用 JCE 在 Joomla 2.5 上运行 K2 2.5.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T20:17:06.157

不，您必须使用 joomla 插件来执行此操作。试试这个：JED 中的 k2 分页符。我在我的 k2 网站上使用的那个：PageBreakMyJspace。有了这个，您还可以直接在 K2 项目中添加目录。

# youtube - Google Picker API：过滤 YouTube 电影

> ID：10041346
> 
> 赞同：0
> 
> 时间：2012-04-06T09:05:48.237
> 
> 标签：youtube, google-picker

您好，我一直在使用 Google Picker API (http://code.google.com/apis/picker/)。我有一个搜索 YouTube 电影的工作演示（下面的代码）。

当前版本返回所有视频。我正在尝试过滤结果，因此它只会列出来自 youtube.com 的搜索结果。选择器 API 支持这一点。但我不理解 API 文档。

文档 (http://code.google.com/apis/picker/docs/reference.html) 提到了“VideoSearchView.YOUTUBE”并将其描述为“适用于 VideoSearchView.setSite() 方法的字符串常量”。

我不明白如何在下面的代码中实现这个过滤器。任何帮助表示赞赏。

```
<!--
Needs work; it should only display YouTube videos.

http://code.google.com/apis/picker/docs/reference.html

Change the key parameter for a domain+path specific API key. Get one here: http://code.google.com/apis/loader/signup.html.
-->
<script type="text/javascript" src="http://www.google.com/jsapi?key=ABQIAAAANAaPTI0Sup-knGFaDbCNHBSXhCTdTCKo5q_OHnpA1qEpBIP8mRTtPnObFFbe_J21oviL78C86yxHUA"></script>
<script type="text/javascript">
    google.load('picker', '1', {'language':'nl'});

    function googlePicker()
    {
        /*
        Displays the users own YouTube movies:
        picker = picker.addView(google.picker.ViewId.YOUTUBE);

        Displays all videos:
        picker = picker.addView(google.picker.ViewId.VIDEO_SEARCH);

        Displays all videos from youtube.com:
        ???

        Example query that returns non-YouTube results: "Mobile Healing Rooms: Following Jesus on Vimeo"
        */

        var picker = new google.picker.PickerBuilder();
        picker = picker.addView(google.picker.ViewId.VIDEO_SEARCH);
        picker = picker.enableFeature(google.picker.Feature.NAV_HIDDEN);

        picker = picker.setTitle('Selecteer een YouTube video');
        picker = picker.setCallback(googlePickerCallback);
        picker = picker.build();
        picker.setVisible(true);
    }

    function googlePickerCallback(data) {
        var youTubeUrl = (data.action == google.picker.Action.PICKED) ? data.docs[0].url : '';

        if (youTubeUrl != '')
        {
            $('#block_youtube_url').val(youTubeUrl);
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:22:55.373

尝试以下等效项：

```
// Create and render a Picker object for searching YouTube videos.
function createPicker() {
    var picker = new google.picker.PickerBuilder().
        addView(new google.picker.VideoSearchView().
            setSite(google.picker.VideoSearchView.YOUTUBE)).
        setCallback(pickerCallback).
        build();
    picker.setVisible(true);
} 
```

如果您通过 ViewId 添加视图，您将没有机会调用特定于视图的方法。这就是为什么暴露了一些 View 派生类的原因。

# xml - 如何在 J2ME 中修改 XML 的值？

> ID：10041347
> 
> 赞同：1
> 
> 时间：2012-04-06T09:05:51.607
> 
> 标签：xml, java-me

假设`XML`我的`J2ME`应用程序中有一个：

```
<?xml version="1.0"?>
<appli>
   <client id=134447>
      <name>Patrick</name>
      <email>patrick@mail.com</email>
   </client>
</appli> 
```

例如，如何从`J2ME`节点值“patrick@mail.com”进行修改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:35:06.767

对于您的 XML 示例，您可以编写如下类：

```
    类客户{
        字符串标识；
        字符串名称；
        字符串电子邮件；
    }

```

并将您的 XML 解组到它。我在[http://smallandadaptive.blogspot.com.br/2010/11/xml-data-binding.html](http://smallandadaptive.blogspot.com.br/2010/11/xml-data-binding.html)分享了一种使用 JSR 172 中的 SAX 的方法。

要将您的类编组回 XML，您可以创建如下方法：

```
    字符串 toXML() {
        StringBuffer sb = new StringBuffer();

        sb.append("<client id=\"").append(id).append("\">");
        sb.append("<name>").append(name).append("</name>");
        sb.append("<email>").append(email).append("</email>");
        sb.append("</client>");

        返回 sb.toString();
    }

```

# android - 在android中水平滑动pdf页面

> ID：10041349
> 
> 赞同：2
> 
> 时间：2012-04-06T09:05:58.467
> 
> 标签：android

我正在开发一个基于 pdf 阅读器的 android 应用程序，所以我得到了开源 pdf 阅读器，如 Vuroid、APV、DroidReader 等。我使用 APV，但在那个页面中是垂直滚动但我想水平滚动。请帮助我是否可能如果可能的话给我提示或任何其他解决方案谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:15:19.333

是的，它可以使用[MuPDF](http://www.mupdf.com/)试试这个它也为你提供

而且我认为这个**[关于 MuPDF](https://stackoverflow.com/questions/8500530/mupdf-reader-integrate-in-project)**的问题也可以帮助您使用它。

水平滚动、搜索等...

# javascript - 将时间值从 jquery 发送到 python 服务器

> ID：10041351
> 
> 赞同：0
> 
> 时间：2012-04-06T09:06:05.790
> 
> 标签：javascript, jquery, python, django, google-app-engine

假设世界标准时间 2005 年 8 月 2 日晚上 8:30 有一个事件。我想通过发布请求将此值从 jquery 发送到 django 或 webapp 服务器，并使用相同的值更新服务器。我该怎么做？

我尝试这样做的方式是：

```
$.post(
    url :"http://localhost:8080/m_post_data",
    data : {'start_date': "4/4/2012",
    'start_time': "14:30:00"}) 
```

并在视图中（当前为 webapp2，在 appengine 上）我尝试以下操作：

```
class PostDataMatch(webapp2.RequestHandler):
  def post(self):
    mat = Match(
      start_date = self.request.get('start_date'),
      start_time = self.request.get('start_time'),
    )
    mat.put()

    self.response.write(self.request.get('start_time')) 
```

模型定义如下：

```
class Match(db.Model):
    start_date = db.DateProperty()
    start_time = db.TimeProperty() 
```

但这给出了一个错误：

```
BadValueError: Property start_time must be a time 
```

我应该如何尝试修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:10:20.570

1.  您应该使用 DateTime 属性而不是两个属性
2.  您应该[将字符串解析为日期时间对象](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)（使用 strptime）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:39:50.173

更好的是：

```
from dateutil import parser
start_date = self.request.get('start_date')
start_time = self.request.get('start_time')
tm = start_date + " " + start_time
parser.parse(tm) 
```

样本输出：

```
In [28]: strn = '4/5/2012 14:30:00'

In [29]: parser.parse(strn)
Out[29]: datetime.datetime(2012, 4, 5, 14, 30) 
```

或没有 dateutil：

```
In [62]: start_date
Out[62]: '4/4/2012'

In [63]: start_time
Out[63]: '14:30:00'

In [64]: date_time = start_date+" "+start_time

In [65]: datetime.strptime(date_time, '%m/%d/%Y %H:%M:%S')
Out[65]: datetime.datetime(2012, 4, 4, 14, 30) 
```

# c# - 在 C# 中保存时在图像元数据中设置软件名称

> ID：10041352
> 
> 赞同：5
> 
> 时间：2012-04-06T09:06:10.187
> 
> 标签：c#, .net, system.drawing.imaging

尝试使用元数据中设置的软件名称保存图像时，出现异常“指定的 BitmapEncoder 不支持全局元数据。”

我怎样才能做到这一点？

```
using (Stream stream = File.Create(@"D:\Yourfile.png"))
{
        RenderTargetBitmap rtb = new RenderTargetBitmap(600, 400, 300, 300, PixelFormats.Pbgra32);
        DrawingVisual dv = new DrawingVisual();
        //draw on drawing visual
        rtb.Render(dv);

        BitmapEncoder encoder = null; 
        BitmapMetadata metadata = null; 

        encoder = new JpegBitmapEncoder();
        ((JpegBitmapEncoder)encoder).QualityLevel = 90;
        metadata = new BitmapMetadata("jpg");
        metadata.ApplicationName = "My Software Name";
        encoder.Metadata = metadata;
        BitmapFrame bitmapFrame = BitmapFrame.Create(rtb);
        encoder.Frames.Add(bitmapFrame);
        encoder.Save(stream);
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-14T18:59:36.220

在此网址[http://code.google.com/p/exif-utils/](http://code.google.com/p/exif-utils/)上 ，您可以找到图像 API

# php - 从 Zend_Mail 对象中删除附件

> ID：10041354
> 
> 赞同：2
> 
> 时间：2012-04-06T09:06:21.480
> 
> 标签：php, zend-framework

有没有办法从 Zend_Mail 对象中删除附件？简单的例子：

```
$mail = new Zend_Mail();

//..configuring the email..

$mail->createAttachment($myImage,
                        'image/gif',
                        Zend_Mime::DISPOSITION_INLINE,
                        Zend_Mime::ENCODING_BASE64);
$mail->send(); 
```

现在，我想修改对象并再次发送

```
$mail->clearSubject()
     ->setSubject('new subject'); 
```

是否有可能从之前设置的该对象中删除附件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:57:07.973

你可以这样做：

```
$mail = new Zend_Mail();
$mail->createAttachment("...");

$parts = $mail->getParts();
foreach ($parts as $k => $v) {
    if ($v->disposition == "attachment") {
        unset($parts[$k]);
    }
}
$mail->setParts($parts);
$mail->hasAttachments = false; 
```

这只会删除其 MIME 处置设置为**attach**的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:52:45.133

我能想到的唯一方法是

```
$mail->setParts(array()); 
```

但这将删除所有部分，无论它们是什么。

# iphone - 嵌套树结构中的核心数据获取请求

> ID：10041355
> 
> 赞同：3
> 
> 时间：2012-04-06T09:06:25.017
> 
> 标签：iphone, ios, core-data, tree, nsfetchrequest

所以，我只是开始真正享受 Core Data，并开始将它集成到我正在开发的应用程序中。但是，我遇到了一个我看不到明显解决方案的问题，这让我觉得 Core Data 可能不是适合这项工作的工具。情况如下：我有一棵由`Node`s 组成的树，每个树都可能有孩子，也可能没有孩子。可以有任意多个 root `Node`。我已经使用一对多关系（从`Node`到`Node`s）和一对一逆关系组合了数据模型。这一切都很好。

现在，每个都与 s`Node`具有一对多关系，与`Record`s 也具有一对一的反比关系`Node`。我想要做的是找到所有`Record`将特定布尔属性设置为 true 并且***位于***给定`Node`. 在我使用 Core Data 之前，这非常容易——我只是走在树上。然而，这很耗时，我希望 Core Data 能给我一种方法来发出一个获取请求，它可以`Record`快速获取我想要的所有 s。如果我知道要检查的最大深度，我可以很容易地看到如何做（半），但是如果我想一直向下怎么办？如果不是所有人`Node`都有孩子怎么办？

我应该像以前一样在树上走吗？

`NSFetchRequest`甚至有能力执行这样的任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:27:51.673

这不是核心数据问题，而是图形问题。你必须做同样的搜索。但是，CoreData 可以让您在对象中出错。所以，你有几个选择，其中两个是

1）走树。您应该能够使用与内存树中使用的完全相同的算法。CoreData 应该只是在对象中出错。除非你有一棵非常深的树，否则你应该没问题。

2）对每条记录中的父关系进行编码。更新树时会进行大量更新，但获取速度会更快。

以下可以转换为 NSCompoundPredicate 并分配为 fetch 谓词...文档说它适用于 CoreData，但不适用于 sqllite - 试试看。

```
NSPredicate *nodePredicate = [NSPredicate predicateWithFormat:@"field = %@", value];
// Use nodePredicate to find ones that match the ones you want to find
// Then use a block predicate to see if the parent is there.
NSArray *potential = [context executeFetchRequest:fetchRequest error:&error];
if (!error) {
    NSPredicate *parentPredicate = [NSPredicate predicateWithBlock:^BOOL(id obj, NSDictionary *bindings) {
        Node *node = obj;
        while (node) {
            if ([node.parent.nodeId isEqualToString:targetId) return YES;
            node = node.parent;
        }
        return NO;
    }];
    NSArray *foundNodes = [potential filteredArrayUsingPredicate:parentPredicate];
} 
```

# php - 选择计数不计数

> ID：10041358
> 
> 赞同：0
> 
> 时间：2012-04-06T09:06:48.523
> 
> 标签：php, mysql, variables, select, count

我尝试构建一个集成其他变量的变量。

其中之一将是稍后将发生插入查询的自动增量字段的数量。

我尝试使用：

```
$get_num = $db/*=>mysqli*/->query("SELECT COUNT (*) auto_increment_column FROM table1");  
            $num = $query->fetch_assoc($get_num);
            $end = $num + 1; 
```

在此之前我没有任何更新/插入查询，所以我不能使用

```
$end = $db->insert_id; 
```

这就是为什么我认为我可以只计算 auto_increment 行的数量并拥有构建新变量所必需的最后一个变量。

出于某种原因，这不会计算条目和输出 0。我不明白为什么会发生这种情况。

如果有人能告诉我我做错了什么，我真的很感激。多谢。

**更新**

对于所有喜欢了解目标的人：

我喜欢为稍后将通过插入查询中的字段输入创建的文件创建一个特定的名称或 ID。我喜欢有一个独特的钥匙。此键由 user_id 和时间戳组成。在这个生成的变量的末尾应该放置 auto_increment nr。将放置在表中的查询。所以问题是，我在插入查询发生之前创建了一个变量，以便该变量将成为插入查询的一部分，例如：

```
$get_num = $db->query("SELECT COUNT (*) FROM tableA");  
$num = $query->fetch_assoc();
$end = $num + 1;

$file_id = $id .".". time() .".". $end;

$insert = $db->query("INSERT INTO tableA ( file_id, a, b, c) VALUES('".$file_id."','".$a."','".$b."','".c."')");{ 
```

希望现在，我喜欢接近什么会很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:08:29.883

尝试

```
SELECT COUNT(*) FROM table1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T09:12:11.773

如果您需要 MySQL 中的自动递增列，那么您应该使用[AUTO_INCREMENT](http://dev.mysql.com/doc/refman/5.1/en/example-auto-increment.html)。它为您实现这一切并避免竞争条件。您尝试实现它的手动方式有几个缺陷，即

*   如果两个脚本试图同时插入，它们可能都得到相同的 COUNT（比如 10），因此都尝试使用 ID 11 插入。然后一个会失败（否则你会有重复的！）
*   如果您添加 10 个项目，然后删除项目 1，则 COUNT 将返回 9 但 id 10 将已经存在。

# java - 寻找 Java 库来创建框图

> ID：10041359
> 
> 赞同：2
> 
> 时间：2012-04-06T09:06:49.640
> 
> 标签：java, diagram

我正在寻找一个 Java 库来创建框图，它可能如图所示：

![在此处输入图像描述](../Images/a914497a5067a4236ffadc7c858874cc.png)

到目前为止，我找不到令人满意的解决方案。如果有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:24:52.450

你试过[jGraph](http://www.jgraph.com/jgraph.html)了吗？它是在 BSD 许可下开源的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:34:26.893

[GraphViz](http://www.loria.fr/~szathmar/off/projects/java/GraphVizAPI/index.php)有一个Java API 。[GraphViz](http://www.graphviz.org/)的功能**远**不止这些框图，因此可能存在学习曲线。

# objective-c - 如何将 UIPageControl 与 iCarousel 一起使用？

> ID：10041365
> 
> 赞同：3
> 
> 时间：2012-04-06T09:07:31.560
> 
> 标签：objective-c, ipad, uipagecontrol

我在 icarousel 中有一些图像。（约 20 张图片）

我想要一页有 5 张图片。

图像像素或图像位置没有问题。

如何在没有 ScrollView 的情况下使用 uipagecontrol？

例如）能够使用一些委托方法..等等。

```
carousel.type = iCarouselTypeLinear;
    carousel  = [[iCarousel alloc] initWithFrame:CGRectMake(0, 504, 1024, 164)];
    carousel.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"10004.png"]];
    carousel.delegate = self;
    carousel.dataSource = self;
    [self.view addSubview:carousel];
    [carousel reloadData];
    [carousel release];

    UIView *bandImageView = [[UIView alloc] initWithFrame:CGRectMake(0, 668, 1024, 20)];
    bandImageView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"10001.png"]];
    [self.view addSubview:bandImageView]; // page dots in

    UIPageControl *pageControl = [[UIPageControl alloc] init];
    pageControl.frame = CGRectMake(434, 0, 150, 20); 
    pageControl.numberOfPages = 6; 
    pageControl.currentPage = 0; 
    [bandImageView addSubview:pageControl];
    [pageControl release]; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T09:25:39.273

在 iCarousel`carouselCurrentItemIndexUpdated:`委托方法中，设置

```
pageControl.currentPage = carousel.currentItemIndex / 5 
```

然后将您的 pageControl 操作绑定到如下方法：

```
- (IBAction)updatePage:(UIPageControl *)pageControl
{
    [carousel scrollToItemAtIndex:pageControl.currentPage * 5 aimated:YES];
} 
```

如果您不使用 nib 文件，则可以使用绑定操作

```
[pageControl addTarget:self action:@selector(updatePage:) forControlEvents:UIControlEventValueChanged]; 
```

设置也是一个好主意，`pageControl.defersCurrentPageDisplay = YES;`以避免闪烁。

# java - java中唯一列表的列表

> ID：10041368
> 
> 赞同：2
> 
> 时间：2012-04-06T09:07:37.430
> 
> 标签：java, containers

我需要在 java 中创建一个唯一集合的集合。有人可以建议可能的容器。

我想要一个类似的东西`List<List<int>>`，每个列表都可以在其内容方面重复。

例如，如果我当前的父列表状态是 say `[ [1,2,3], [3,4,5], [4,5,6] ]`并且我打算添加另一个列表 say `[3,4,5]`，它不应该被复制并且不应该被添加。

List 的 contains() 方法适用于整数、浮点数等，但我不确定它是否能够匹配列表。

请建议任何其他可以提供帮助的容器。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T09:10:09.183

你可能最好使用`Set<List<Integer>>`而不是`List<List<Integer>>`.

以上适用于您的示例：

```
Set<List<Integer>> uniqueLists = new HashSet<>();
uniqueLists.add(Arrays.asList(1, 2, 3));
uniqueLists.add(Arrays.asList(3, 4, 5));
uniqueLists.add(Arrays.asList(4, 5, 6));

// Now, this won't be added:
uniqueLists.add(Arrays.asList(3, 4, 5)); 
```

但是，当您将集合放入集合时要小心。将其放入集合后，您不应再次更改它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T09:36:42.983

也许您有兴趣使用`Set<Set<Integer>>`.
如果您想保持添加顺序，可以使用`LinkedHashSet`.

你的代码会像

```
Set<Set<Integer> uniqueLists = new LinkedHashSet<Set<Integer>>();

uniqueLists.add(new LinkedHashSet(Arrays.asList(1, 2, 3))); 
```

它将避免使用`Set<List<Integer>>`.

1）它将保留各个列表的添加顺序

2) 它的单个列表也不会有重复的整数条目。

# javascript - getelemenById('...').click 在 Chrome 中不起作用

> ID：10041377
> 
> 赞同：0
> 
> 时间：2012-04-06T09:08:09.807
> 
> 标签：javascript, google-chrome, getelementbyid

> **可能重复：**
> [innerDocument.getElementById(<elment ID>).click(); 在 Firefox/chrome 中不起作用，在 IE 中它起作用](https://stackoverflow.com/questions/5468864/innerdocument-getelementbyidelment-id-click-doesnt-work-in-firefox-chrom)

我有一个选项卡式 html 页面。

```
 <ul class="tabs">
                    <li><a href="#tab1" id='accomodation'>Accomodation</a></li>
                    <li><a href="#tab2" id='relaxation'>Relaxation</a></li>
                    <li><a href="#tab3" id='recreation'>Recreation</a></li>
                  </ul> 
```

我来自另一个带有 click 的 html，我想显示有关我之前单击的内容的选项卡（我将其存储在 cookie 中）。

因此，我为选项卡添加了 ID，当此页面加载时，我调用一个从 cookie 中读取 ID 的函数，然后单击相关选项卡。该函数在页面加载时运行：

```
<body onLoad="where_from();"> 
```

这是功能：

```
function where_from()
{
    if (readCookie('came_from')!="false")
    {
        pos=readCookie('came_from');
        if (pos=='relaxation')
            document.getElementById('relaxation').click();

        if (pos=='recreation')
            document.getElementById('recreation').click();
} 
```

}

它在 IE 和 Firefox 中完美运行，但在 Chrome 中没有任何反应

任何人都可以帮助解决问题吗？

我感觉 getelementById.click 调用有问题，但我找不到这里描述的任何解决方案。

请帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:14:46.287

Chrome 不支持`click()`元素。你可以像这样实现它：

```
if( !document.body.click) {
    HTMLElement.prototype.click = function() {
        var t = this;
        do {
            if( t.onclick) t.onclick();
            t = t.parentNode;
        } while (t);
    }
} 
```

这只是一个近似值，因为它不能正确处理 Event 对象，但在大多数情况下，这应该可以很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:23:54.180

我认为您无需单击标签链接即可更改页面。

你可以用`document.location.href`,

```
function where_from()
{
    if (readCookie('came_from')!="false")
    {
        pos=readCookie('came_from');
        if (pos=='relaxation')
            document.location.href = document.getElementById('relaxation').href;

        if (pos=='recreation')
            document.location.href = document.getElementById('recreation').href;
     }
} 
```

[这是一个 jsfiddle 示例](http://jsfiddle.net/S6Wtg/)，从[这里](http://blixt.org/media/a/1/tabs-js/page.html#page=page-3)复制而来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T09:26:06.783

如果 `document.getElementById('relaxation').click();`不起作用，这可能对您有用：`$('#relaxation').click();`

前任：

```
$('#relaxation').click(function(){

//Onclick do something

}); 
```

要下载 Jquery 支持文件，请访问：http: [//jquery.com/](http://jquery.com/)

# android - Android 4.0 中的蓝牙智能 (4.0) / GATT 支持？

> ID：10041378
> 
> 赞同：28
> 
> 时间：2012-04-06T09:08:09.820
> 
> 标签：android, bluetooth, android-4.0-ice-cream-sandwich, bluetooth-lowenergy

我正在尝试寻找使用现代 Android 智能手机的蓝牙 4.0（又名蓝牙智能）设备的方法，即 - HTC One V。

据我了解，由于 API 限制，即使在具有蓝牙 4.0 硬件的 Android 4.0 中使用 GATT 配置文件也存在一些问题。

我看到摩托罗拉为 BT LE 发布了它自己的 API，但不确定它是否适用于其他供应商。我的目标是获得对所有配备适当硬件的智能手机的普遍支持。

任何解决方案的建议都受到高度赞赏。

阿列克谢

PS：是的，我看到了用于 HDP 的 Android API，但它似乎只用于“经典”蓝牙设备（不是低能耗设备，如 BT LE 那样）。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-09T08:55:15.727

不幸的是，没有 Android 原生 GATT API，因为 Android 目前根本不支持低功耗蓝牙。这可能会在即将发布的 Android 版本中发生变化，但如今制造商将第 3 方蓝牙堆栈与高通、博通或 CSR 等供应商的低功耗支持集成在一起。它们带有自己的 API 集，显然限制了对使用该特定供应商堆栈的手机集的兼容性。好消息是，在 iOS 或 Windows 8 等其他平台上，有本地 GATT BLE API，并且得到了很好的支持。对于 Android，我们将不得不等到 Google 决定将在 BLE 上完成的 Linux/BlueZ 工作与 Android 集成。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-28T08:39:37.133

经过一番研究，我只能这样说：

*   摩托罗拉支持博通开发专有 API。它似乎非常有限，因为它声明仅支持现有配置文件。[在这里](http://www.motorola.com/sites/motodev/library/bluetooth_apis.html)查看。

*   三星未能提供有关其 BLE API 的任何信息，**我可以验证这些信息是否存在，名为 samsung.bluetoothle**。实际上，我从 Google Play 反编译了一些使用 SGSIII 的 BLE 功能的应用程序，发现了一些在 Android 的原生 BT API 中不存在的方法，它们的名称清楚地表明它们与 BLE 相关。我已经尝试通过 java 反射使用它们，目前正在研究开发库的可能性。但到目前为止，我进行的测试充其量只能得到不稳定的结果。三星的开发者论坛上也有一个帖子，如果你有兴趣，我建议[在这里施加压力。](http://developer.samsung.com/forum/board/thread/view.do?boardName=GeneralB&messageId=157757)

*   谷歌在这方面几乎没有表态。Galaxy Nexus中有一个关于这个问题的[帖子](http://code.google.com/p/android/issues/detail?id=33371&q=Support%20for%20Bluetooth%204.0%20Low%20Energy%20Profile&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)，你应该给它加注，很多人都在抱怨。[可以在此处](https://groups.google.com/forum/#!msg/android-platform/CYtxCmtZ-WI/aIzBq7KbKVUJ)找到最接近 Google 答案的内容。

**[更新]**

三星还修改了几个 Android 的类，更具体地说：

*   `BluetoothAdapter`
*   `BluetoothDevice`

**[更新]**

由于缺乏谷歌和三星的支持，我已经把这个问题搁置了一段时间，我将发布我到目前为止所学到的内容：

`BluetoothAdapter`新方法：

```
public boolean android.bluetooth.BluetoothAdapter.leTestEnd()
public boolean android.bluetooth.BluetoothAdapter.setAvStreaming(boolean)
public boolean android.bluetooth.BluetoothAdapter.setScanLE(boolean)
public void android.bluetooth.BluetoothAdapter.setScoPathChange(int)
public boolean android.bluetooth.BluetoothAdapter.startLeDiscovery() 
```

要使用它们，请执行以下操作：

```
BluetoothAdapter ba = new BluetoothAdapter();
Method starteLeDiscoveryMethod = null;
starteLeDiscoveryMethod = ba.class.getMethod("startLeDiscovery");
starteLeDiscoveryMethod.invoke(ba); 
```

注意：这种方法的工作原理特别像常规`startDiscovery()`方法，但至少对我来说，它在 5 次中发现了 2 个 BLE 设备。**请记住**，这仅适用于**SGSIII**。我还没有开始提取新方法，`BluetoothDevice`但是当我这样做时，我会在这里发布它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-01T21:26:30.163

SDK 18 现在支持它。文档在这里：

[http://developer.android.com/guide/topics/connectivity/bluetooth-le.html](http://developer.android.com/guide/topics/connectivity/bluetooth-le.html)

在我的 Nexus 4 上进行的测试导致蓝牙堆栈崩溃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-12T18:24:38.727

HTC 从去年开始就支持 BLE，包括 HTC One X+、Droid DNA，当然还有 HTC One。最初 HTC BLE API 是应要求提供的，但现在可以在[http://htcdev.com](http://htcdev.com)免费下载。

是的，来自 Google 的 Android API 级别 18 的新标准 Android BLE API 即将推出（参见 IO 视频预览） - 但您可以以兼容的方式包装第三方 API（HTC、三星等）以支持新标准 API因为所有 API 在支持 GATT 配置文件方面都非常相似（类似于 IOS）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-30T05:38:19.983

Android 中可用的 BluetoothGatt api

[https://developer.android.com/reference/android/bluetooth/BluetoothGatt.html](https://developer.android.com/reference/android/bluetooth/BluetoothGatt.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-03T10:42:49.103

正如我们所发现的，4.3 支持 BLE，但它非常糟糕，尤其是在 Nexus 设备上。在我看来，它还没有准备好投入生产。

# macos - Mac 应用程序底栏添加按钮

> ID：10041381
> 
> 赞同：1
> 
> 时间：2012-04-06T09:08:37.770
> 
> 标签：macos, cocoa, button

`NSWindow`我通过选择“内容边框-大底边框”在 IB 中添加了一个底栏。并且我在底部栏添加了一个自定义图像按钮，但是当我按下按钮时，按钮的背景变成了白色，为什么？

这是按下按钮时的效果：

![截屏](../Images/6599afd7e824592a67fcfd574e1a818e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:17:46.397

将按钮的类型更改为***Momentary Change***。您可以在属性检查器中更改它：

![怎么做](../Images/e8b576dc0bc6b1e1ccd2cc274f9f0e68.png)

或以编程方式更改：

```
[button setButtonType:NSMomentaryChangeButton]; 
```

# java - 如何反映另一个项目的班级信息

> ID：10041382
> 
> 赞同：2
> 
> 时间：2012-04-06T09:08:43.067
> 
> 标签：java, eclipse

eclipse中有两个项目！如何在另一个项目中反映一个类？我将其他项目的类路径放入系统的属性中。但仍然没有发现弹出类异常。有什么好的解决方案吗？

```
System.out.println(System.getProperty("java.class.path"));        

System.getProperties().put("java.class.path",
    System.getProperty("java.class.path") +
        ";C:\\Users\\fu.jian\\workspace\\Study\\bin");

System.out.println(System.getProperty("java.class.path"));

Class<?> forName2 = Class.forName("study.Activator");
System.out.println(forName2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:18:19.667

右键单击项目以调出上下文菜单。

**构建路径->配置构建路径**

在**Java Build Path**对话框下，选择**Projects**选项卡并添加项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:21:53.100

尝试通过以下方式将项目 B 添加到项目 A 的类路径中：

在*Eclipse*中单击项目 A -> 鼠标右键单击并选择*属性*-> 选择*Java 构建路径*-> 选择*项目*选项卡 -> 单击*添加...*并检查项目 B

如果您使用外部工具编译和构建项目，该问题将在 Eclipse 内部得到解决——您的问题仍然会出现。您可以将项目 B 导出为 jar 并将 jar 复制到项目 A 库中。这样您就不会依赖 Eclipse。

# java - 我可以将 XJC 编译器配置为使用自定义 XML 绑定进行内联自定义吗？

> ID：10041393
> 
> 赞同：0
> 
> 时间：2012-04-06T09:09:56.270
> 
> 标签：java, jaxb, xjc

对于 JAXB，我们可以使用内联自定义以某种方式调整模式编译器。这可以通过模式绑定声明 (<jxb:schemaBindings/>) 完成。

有什么方法可以让其他 XML 标记（例如下面示例中的 ActualType、EnumerationValue）与标准 XJC 编译器一起使用来影响生成的类？

```
<xs:simpleType name="SomeType">
  <xs:annotation>
    <xs:appinfo>
      <ActualType Name="unsignedInt" />
    </xs:appinfo>
  </xs:annotation>
  <xs:restriction base="xs:string">
    <xs:enumeration value="PredefinedEnumValue">
      <xs:annotation>
        <xs:appinfo>
          <EnumerationValue>10000</EnumerationValue>
        </xs:appinfo>
      </xs:annotation>
    </xs:enumeration>
  </xs:restriction>
</xs:simpleType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T12:12:12.323

对于您需要使用的枚举值（[在此处](https://access.redhat.com/documentation/en-US/Fuse_ESB_Enterprise/7.0/html/Developing_Applications_Using_JAX-WS/JAXWSCustomTypeMappingEnum.html#JAXWSCustomTypeMappingEnumEx010)`<jaxb:typesafeEnumMember value="10000" />`查看示例），对于您需要使用的简单类型转换（在[此处](https://access.redhat.com/documentation/en-US/Fuse_ESB_Enterprise/7.0/html/Developing_Applications_Using_JAX-WS/JAXWSCustomTypeMappingBase.html#JAXWSCustomBasePlainEx010)查看示例）。`<jaxb:baseType name="int" />`

PS Java 不支持无符号整数。也不要忘记`xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"`在你的`<xsd:schema>`.

# c++ - 如何在 C/C++ 程序中创建标签

> ID：10041402
> 
> 赞同：3
> 
> 时间：2012-04-06T09:10:52.130
> 
> 标签：c++, c, ctags

我想知道 ac/c++ 或 java 项目的最佳标签系统是什么。

我读过 ctags、exhuberant ctgas、cscope gnu global (gtags)，但不知道它们之间有什么区别。

我正在使用 Windows 7 和 Notepad++，或者可能会迁移到 SublimeText（因为它是跨平台的并且似乎非常强大）。

你能给我任何关于这些标签系统之间区别的提示吗？非常感谢任何帮助。

助教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:17:00.310

> 你能给我任何关于这些标签系统之间区别的提示吗？

这三个工具几乎都试图做同样的事情。他们都试图从源代码中创建标签信息。

我记得 ctags 是最初的基于 Unix 的标记工具，创建旺盛的 ctags 是为了尝试构建更好的 ctags，而 cscope 更像是一个基于项目的标记工具。

我自己使用基于 Windows 的 Zeus 编辑器，它使用了旺盛的 ctags。

大多数基于 Windows 的编辑器倾向于使用丰富的 ctags，而大多数基于 Unix/Linux 的编辑器（如 Vim、EMACS）倾向于使用 ctags。

# android - 如何在 Android 中使用滑动手势创建简单的日历视图

> ID：10041403
> 
> 赞同：1
> 
> 时间：2012-04-06T09:11:00.490
> 
> 标签：android, calendar

我正在开发一个简单的日历，但我不确定如何使用以下滑动手势设计日历视图：

*   左/右更改月份，以及
*   上/下更改年份。

谁能给我一个例子或一些指示？

真的很感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:16:06.027

你应该看看这篇文章[http://android-developers.blogspot.com/2011/08/horizo​​ntal](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html) -view-swiping-with-viewpager.html和这篇 [http://developer.android.com/reference/ android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

# windows-phone-7 - 带有 Phonegap/Jquery Mobile 的 Windows Phone 中的新浏览器窗口

> ID：10041406
> 
> 赞同：1
> 
> 时间：2012-04-06T09:11:01.880
> 
> 标签：windows-phone-7, jquery-mobile, cordova

如何使用 Phonegap 和 Jquery Mobile 在 Windows Phone 中打开新的浏览器窗口？

我尝试了我能想到的一切：

1.  链接名称
2.  用 javscript window.open
3.  ETC

我无法让它在新窗口中打开。问题是当它现在在“webview”内打开时，当按下后退按钮应用程序关闭时，它应该返回到上一页。或者它应该在新窗口/应用程序之外打开（又名 Internet Explorer）。

有两种可能的解决方案：

1.  一种在应用程序之外打开它的方法
2.  在里面打开它，但应该可以用后退按钮回到上一个包

# javascript - 对象不支持“Cookie”之后的属性或方法

> ID：10041407
> 
> 赞同：1
> 
> 时间：2012-04-06T09:11:04.017
> 
> 标签：javascript, jquery

我的 index.php 中有这段代码。在 Mozilla 中没问题。但在即我得到一个错误。

我需要一点帮助来解决这个问题。

用户在 SITEB.php 中填写表格，发送并成功后我重定向到 index.php，清除我所有的变量、cookie 等...以避免再次发送或访问信息..blabla...

部分代码如下，其中错误是：

源代码：

```
<?php if (isset($_SESSION['mail_succ'])) { echo "<div id='msg_succ'>";  echo 'Sucess, contact you soon...'; echo "</div>"; unset($_SESSION['mail_succ']);session_destroy();echo "<script type='text/javascript'>    $.cookie('chiteltip', null);     $.cookie('hitel', '8');     $.cookie('hiteltip', '8');     $.cookie('teher', '8'); $.cookie('teherm2', '8');  $.cookie('ingatlan', '8'); </script>";}?> 
```

重定向后查看源码：

```
 <div id='msg_succ'>Sucess, contact you soon...</div><script type='text/javascript'>    $.cookie('chiteltip', null);     $.cookie('hitel', '8');     $.cookie('hiteltip', '8');     $.cookie('teher', '8'); $.cookie('teherm2', '8');  $.cookie('ingatlan', '8'); </script> 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:16:00.030

而不是做`$.cookie('xyz',null)`...做`setcookie('xyz',time()-3600)`

# javascript - fb.api 在连接的用户上返回“未定义”

> ID：10041409
> 
> 赞同：4
> 
> 时间：2012-04-06T09:11:18.737
> 
> 标签：javascript, facebook, facebook-javascript-sdk

下面的代码在名称和电子邮件上给了我一个“未定义”。但是用户登录是因为我确实有访问令牌和 UID？

```
function getToken(){
    FB.login(function(response) {
        if (response.authResponse) {
            var access_token = response.authResponse.accessToken;
            var uid = response.authResponse.userID;
            document.getElementById('accessToken').value=access_token;
            document.getElementById('uid').value=uid;
            FB.api('/me', function(response) {
                console.log('Good to see you, ' + response.name + '.' +response.email);
            });
            document.forms['token'].submit();
        } else {
            return false;
        }
    }, {scope:'email,user_likes,friends_likes'});
} 
```

当我将 fb.api 的完整响应输出到控制台时，我得到

```
[11:46:10.369] ({error:"load-error: unknown"}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:53:46.023

我现在看到你正在尝试做的事情和问题。

为什么会失败：

您正在发出一个异步请求（使用*FB.api*方法），然后提交一个重新加载整个页面的表单（这是一个猜测，因为您没有包含所有代码），从而弄乱了异步请求。

至于如何解决问题：

在我看来，最好的解决方案是使用[服务器端身份验证过程](http://developers.facebook.com/docs/authentication/server-side/)，然后才在画布加载时使用客户端 sdk。这样，您将在客户端和服务器端都拥有访问令牌。

另一种方法不是提交表单，而是使用访问令牌向您的服务器（它可以在 POST 中）发出一个 ajax 请求，因为这两个请求都是异步的（*FB.api*和一个到您的服务器的请求）一切都应该没事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T19:48:27.083

我认为快速解决方法是在 FB.api 函数中提交表单。所以它看起来像：

```
FB.api('/me', function(response) {
            console.log('Good to see you, ' + response.name + '.' +response.email);
            document.forms['token'].submit();
}); 
```

# java - Spring 3.1 中的默认配置文件

> ID：10041410
> 
> 赞同：100
> 
> 时间：2012-04-06T09:11:25.147
> 
> 标签：java, spring, profiles

在我的应用程序中，我有用`@Profile("prod")`和注释的 bean `@Profile("demo")`。第一个，你可以猜到:)，用于连接到生产数据库的bean，第二个注释使用一些假数据库（`HashMap`或其他）的bean - 以加快开发速度。

我想要的是默认配置文件（ ），如果它没有被“ *something-else*`"prod"` ”覆盖，它将始终使用。

 *完美的将是在我的`web.xml`：

```
<context-param>
     <param-name>spring.profiles.active</param-name>
     <param-value>prod</param-value>
</context-param> 
```

然后用它覆盖它，`-Dspring.profiles.active="demo"`以便我可以这样做：

```
mvn jetty:run -Dspring.profiles.active="demo". 
```

但遗憾的是，这不起作用。知道我怎么能做到这一点？在我所有的环境中设置`-Dspring.profiles.active="prod"`不是一个选项。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-04-06T09:50:18.613

在 web.xml 中将生产环境定义为默认配置文件

```
<context-param>
   <param-name>spring.profiles.default</param-name>
   <param-value>prod</param-value>
</context-param> 
```

如果您想使用不同的配置文件，请将其作为系统属性传递

```
mvn -Dspring.profiles.active="demo" jetty:run 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-08-28T21:50:49.690

我的经验是使用

```
@Profile("default") 
```

只有在没有识别出其他配置文件时，才会将 bean 添加到上下文中。如果您传入不同的配置文件，例如`-Dspring.profiles.active="demo"`，此配置文件将被忽略。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-02T11:08:09.907

我有同样的问题，但我使用[WebApplicationInitializer](http://docs.spring.io/autorepo/docs/spring/4.2.x/javadoc-api/org/springframework/web/WebApplicationInitializer.html)以编程方式配置 ServletContext（Servlet 3.0+）。所以我做了以下事情：

```
public class WebAppInitializer implements WebApplicationInitializer {

    @Override
    public void onStartup(ServletContext sc) throws ServletException {
        // Create the 'root' Spring application context
        final AnnotationConfigWebApplicationContext rootContext = new AnnotationConfigWebApplicationContext();
        // Default active profiles can be overridden by the environment variable 'SPRING_PROFILES_ACTIVE'
        rootContext.getEnvironment().setDefaultProfiles("prod");
        rootContext.register(AppConfig.class);

        // Manage the lifecycle of the root application context
        sc.addListener(new ContextLoaderListener(rootContext));
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-05T11:31:52.720

您也可以考虑删除 PROD 配置文件，并使用 @Profile("!demo")

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-11T20:22:43.473

关于设置默认生产配置文件已发布@andih

为 maven jetty 插件设置默认配置文件的最简单方法是在插件配置中包含以下元素：

```
<plugin>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <configuration>
        <systemProperties>
            <systemProperty>
                <name>spring.profiles.active</name>
                <value>demo</value>
            </systemProperty>
        </systemProperties>
    </configuration>
</plugin> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-01-26T15:06:09.133

在确定哪些配置文件处于活动状态时，Spring 提供了两个单独的属性：

*   `spring.profiles.active`

和

*   `spring.profiles.default`

如果`spring.profiles.active`已设置，则其值确定哪些配置文件处于活动状态。但是如果`spring.profiles.active`没有设置，那么 Spring 看起来`spring.profiles.default.`

如果既没有`spring.profiles.active`也没有`spring.profiles.default`设置，则没有活动的配置文件，并且只创建那些未定义为在配置文件中的 bean。任何未指定配置文件的 bean 都属于`default`配置文件。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-06T10:05:56.590

您可以将您的 web.xml 设置为过滤资源，并让 maven 从 maven 配置文件设置中填充此值——这就是我们所做的。

在 pom 中过滤所有资源（如果你没有 ${} 标记，你可以这样做）

```
<webResources>
    <resource>
        <directory>src/main/webapp</directory>
        <filtering>true</filtering>
    </resource>
</webResources> 
```

在 web.xml 中放

```
<context-param>
     <param-name>spring.profiles.active</param-name>
     <param-value>${spring.prfile}</param-value>
</context-param> 
```

在 pom 中创建 Maven 配置文件

```
<profiles>
    <profile>
        <id>DEFAULT</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            <spring.profile>prod</spring.profile>
        </properties>
    <profile>
    <profile>
        <id>DEMO</id>
        <properties>
            <spring.profile>demo</spring.profile>
        </properties>
    <profile>
</profiles> 
```

现在你可以使用

```
mvn jetty:run -P DEMO 
```

或者简单地`-P DEMO`使用任何 Maven 命令*

# android - 切换案例错误。Mac 上用于 Android 开发的 Eclipse IDE：将工作区合规性更改为 JRE 1.7

> ID：10041414
> 
> 赞同：6
> 
> 时间：2012-04-06T09:11:56.607
> 
> 标签：android, eclipse, java

当尝试将带有 switch(string) 的 Switch Case 用于 android 项目时，我在 Eclipse IDE 中收到错误消息：将工作区合规性更改为 JRE1.7

无法为低于 1.7 的源级别打开字符串类型的值。只允许可转换的 int 值或枚举常量

当我将项目属性更改为 1.7 时，我收到不同的错误消息：

Android 要求编译器合规级别为 5.0 或 6.0。而是找到了“1.7”。请使用 Android 工具 > 修复项目属性

我不想将所有这些配置字符串更改为 ENUMS。我还有其他选择吗？

我的环境：Eclipse SDK，版本：3.7.2，内部版本号：M20120208-0800 操作系统：Mac SnowLeopard (10.6.8)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T09:16:14.467

`JDK7`与 android 不兼容，因此可以使用`JDK6`

`String`in`switch`是 JDK7 中引入的，所以在`JDK6`. 您必须使用 an`enum`或`if-elseif-else`.

因此，将 Java 编译器更改为`JDK6`.

# wcf - 配置 WCF 客户端和服务以与 protobuf-net 一起使用

> ID：10041418
> 
> 赞同：1
> 
> 时间：2012-04-06T09:12:28.353
> 
> 标签：wcf, protobuf-net, datacontractserializer, custom-binding

我决定就这个问题提出一个新问题，也许扩展[这个](https://stackoverflow.com/questions/9900447/protobuff-net-wcf-incorrect-wire-type-error-on-client/9907916#comment12838561_9907916)问题，因为在互联网上的任何地方都没有找到关于这个问题的准确答案。

我想使用**protobuf-net**序列化/反序列化我的 WCF 客户端和服务之间交换的消息。该服务在 Windows 服务中自托管。客户端和服务都以编程方式配置，使用非常类似于`wsHttpBinding`. 服务参考代码是使用 Visual Studio 中的“添加服务参考”选项生成的。WCF 服务上使用的 ORM 是**EntityFramework 4**，它的代码是使用**EF 4.x POCO Generator 生成**的。有关我的服务配置的更多信息可以在我从[这里](https://stackoverflow.com/questions/10017656/wcf-data-serialization-can-it-go-faster)开始的问题中找到（这就是我描述我当前的序列化程序的地方`DataContractSerialzizer`）。

我只用一个返回自定义 DTO 列表的服务操作测试了**protobuf-net 。**这是操作（请注意，我只是将我的代码复制粘贴到这里，可能有一些字段以我的母语命名，而不是英语）：

```
 public static List<OsobaView> GetListOsobas()
    {
        Database DB = new Database(); // EF object context
        var retValue = DB.Baza.Osoba
                       .Select(x => new OsobaView
                       {
                           ID = x.ID,
                           Prezime = x.Prezime,
                           Ime = x.Ime,
                           Adresa = x.Adresa,
                           DatumRodjenja = x.DatumRodjenja,
                           JMBG = x.JMBG
                       });
        return retValue.ToList();
    } 
```

这是`OsobaView`类的定义：

```
 [ProtoContract]
    public class OsobaView
    {
        [ProtoMember(1)]
        public int ID;
        [ProtoMember(2)]
        public string Prezime;
        [ProtoMember(3)]
        public string Ime;
        [ProtoMember(4)]
        public string Adresa;
        [ProtoMember(5)]
        public DateTime DatumRodjenja;
        [ProtoMember(6)]
        public string JMBG;
    } 
```

当我使用“添加服务参考”来生成参考代码时，我必须使用两种变通方法之一才能让我的客户识别`ProtoContract`s 和成员：

*   为 DTO 使用共享程序集（在我的情况下，除了自定义 DTO，这不是一个理想的解决方案，因为我将 EF 生成的 POCO 传递给客户端）
*   使用`ProtoPartialMember`方法

我使用了它们，并且同时使用了protobuf **-net的****v1**和**v2**，所有解决方案都产生了相似的结果，这让我相信我的客户根本没有反序列化。继续阅读。

 **让我们考虑一下我使用这种`ProtoPartialMember`方法的情况。起初我使用**v2**。我喜欢`ProtoOperationBehavior`可以使用的方式。这是要调用的服务操作：

```
 [ProtoBuf.ServiceModel.ProtoBehavior]
    public List<OsobaView> GetListOsobas()
    {
        return OsobaQueries.GetListOsobas();
    } 
```

以下是我如何替换`DataContractSerializerOperationBehavior`客户**端**`ProtoOperationBehavior`所需的服务操作：

 **```
 OperationDescription op = Service.Proxy.Endpoint.Contract.Operations.Find("GetListOsobas");
    if (op != null)
    {
        DataContractSerializerOperationBehavior dcsBehavior = op.Behaviors.Find<DataContractSerializerOperationBehavior>();
        if (dcsBehavior != null)
            op.Behaviors.Remove(dcsBehavior);
        op.Behaviors.Add(new ProtoBuf.ServiceModel.ProtoOperationBehavior(op));
    } 
```

当然，这里是上面提到的 DTO 的变通实现：

```
 [ProtoPartialMember(1, "ID")]
    [ProtoPartialMember(2, "Prezime")]
    [ProtoPartialMember(3, "Ime")]
    [ProtoPartialMember(4, "Adresa")]
    [ProtoPartialMember(5, "DatumRodjenja")]
    [ProtoPartialMember(6, "JMBG")]
    [ProtoContract]
    public partial class OsobaView
    {
    } 
```

现在，当我从客户端调用此服务操作时，我得到`null`. 但**提琴手**不同意。它清楚地表明，在响应标题中：

```
 Content-Length: 1301963
    Content-Type: application/soap+xml; charset=utf-8 
```

...在消息正文中：

```
 <s:Body>
      <GetListOsobasResponse xmlns="http://tempuri.org/">
        <proto>CkMIpHES .../* REALLY LONG RESPONSE */... IyMDAxOA==</proto>
      </GetListOsobasResponse>
    </s:Body> 
```

然后我想，让我们试试**v1**。在服务方面，我没有太大变化。我刚刚删除了对**v2** .DLL 的引用并将其替换为对**v1** .DLL 的引用。在客户端，我不得不删除添加`ProtoOperationBehavior`到我的服务操作行为的代码，并添加了以下行：

```
 Service.Proxy.Endpoint.Behaviors
        .Add(new ProtoBuf.ServiceModel.ProtoEndpointBehavior()); 
```

我启动了它，调用了操作，这次结果不是`null`. 这次是空白字段列表。再一次，**Fiddler**不能同意，因为它又说和之前说的一样。相同的内容长度和相同的消息正文。

这里发生了什么？

PS 如果值得的话，这里是 WCF 配置：

```
 CustomBinding customBinding = new CustomBinding();
    customBinding.CloseTimeout = TimeSpan.FromMinutes(10);
    customBinding.OpenTimeout = TimeSpan.FromMinutes(10);
    customBinding.ReceiveTimeout = TimeSpan.FromMinutes(10);
    customBinding.SendTimeout = TimeSpan.FromMinutes(10);
    HttpsTransportBindingElement httpsBindingElement = new HttpsTransportBindingElement();
    httpsBindingElement.AllowCookies = false;
    httpsBindingElement.BypassProxyOnLocal = false;
    httpsBindingElement.HostNameComparisonMode = HostNameComparisonMode.StrongWildcard;
    httpsBindingElement.MaxBufferPoolSize = 20480000;
    httpsBindingElement.MaxBufferSize = 20480000;
    httpsBindingElement.MaxReceivedMessageSize = 20480000;
    httpsBindingElement.RequireClientCertificate = true;
    httpsBindingElement.UseDefaultWebProxy = true;
    TransportSecurityBindingElement transportSecurityElement = new TransportSecurityBindingElement();
    transportSecurityElement.EndpointSupportingTokenParameters.SignedEncrypted.Add(new UserNameSecurityTokenParameters());
    transportSecurityElement.EndpointSupportingTokenParameters.SetKeyDerivation(false);
    TransactionFlowBindingElement transactionFlowElement = new TransactionFlowBindingElement();
    TextMessageEncodingBindingElement textMessageEncoding = new TextMessageEncodingBindingElement();
    textMessageEncoding.MaxReadPoolSize = 20480000;
    textMessageEncoding.MaxWritePoolSize = 20480000;
    textMessageEncoding.ReaderQuotas = XmlDictionaryReaderQuotas.Max;
    ReliableSessionBindingElement reliableSessionElement = new ReliableSessionBindingElement();
    reliableSessionElement.ReliableMessagingVersion = ReliableMessagingVersion.WSReliableMessagingFebruary2005;
    customBinding.Elements.Add(transportSecurityElement);
    customBinding.Elements.Add(transactionFlowElement);
    customBinding.Elements.Add(textMessageEncoding);
    customBinding.Elements.Add(reliableSessionElement);
    customBinding.Elements.Add(httpsBindingElement);

    EndpointAddress endpoint = new EndpointAddress(new Uri(ServiceAddress));
    Service.Proxy = new BazaService.BazaClient(customBinding, endpoint);
    Service.Proxy.ClientCredentials.ClientCertificate.SetCertificate(StoreLocation.CurrentUser, StoreName.My, X509FindType.FindBySubjectName, CertificateSubject);
    CustomBehavior behavior = Service.Proxy.Endpoint.Behaviors.Find<CustomBehavior>();
    if (behavior == null)
    {
        Service.Proxy.Endpoint.Behaviors.Add(new CustomBehavior()); // message inspector
    }
    Service.Proxy.Endpoint.Contract.Behaviors.Add(new CyclicReferencesAwareContractBehavior(true));
    Service.Proxy.Endpoint.Behaviors.Add(new ProtoBuf.ServiceModel.ProtoEndpointBehavior());

    /* code used for protobuf-net v2

    OperationDescription op = Service.Proxy.Endpoint.Contract.Operations.Find("GetListOsobas");
    if (op != null)
    {
        DataContractSerializerOperationBehavior dcsBehavior = op.Behaviors.Find<DataContractSerializerOperationBehavior>();
        if (dcsBehavior != null)
            op.Behaviors.Remove(dcsBehavior);
        op.Behaviors.Add(new ProtoBuf.ServiceModel.ProtoOperationBehavior(op));
    } */

    Service.Proxy.ClientCredentials.UserName.UserName = LogOn.UserName;
    Service.Proxy.ClientCredentials.UserName.Password = LogOn.Password;
    Service.Proxy.Open(); 
```

*编辑*

为了提供更多信息，我已经阅读了[那里](https://stackoverflow.com/questions/4040417/protobuf-net-wcf-deserialize-listt)写的内容，但没有帮助。我删除了 Visual Studio 生成的服务引用并创建了自己的服务引用，共享整个服务合同，但没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:19:36.170

在稍微集中注意力之后，我决定从头开始重新启动解决方案。我用它的 POCO 为 EDMX 创建了一个类库，一个用于`ServiceContract`和`DataContract`s，一个用于实际的 WCF 服务实现。然后我与 WCF 客户端共享了这两个包含`ServiceContract`和`DataContract`s 的库和 POCO 并再次尝试，产生了与以前相同的结果。在尝试了其他一些不使用**protobuf-net**进行序列化的操作后，结果发现它们的行为与第一个相同，导致空字段（！）。

问题是，`.datasource`在我决定使用程序集共享技术后，我在重构时搞砸了我的 WCF 客户端文件。所以这是一个典型的 PEBKAC，如果做得好，它当然可以正常工作。与**protobuf-net**的出色合作，[Marc Gravell](https://stackoverflow.com/users/23354/marc-gravell)！****

# .net - 发生异常时更改代码行为的模式

> ID：10041419
> 
> 赞同：0
> 
> 时间：2012-04-06T09:12:34.010
> 
> 标签：.net, design-patterns

我需要在 C# 中实现以下功能：

我们需要定期检查和检索来自 Web 服务的更新数据 - 例如，每 5 分钟一次。

如果我想重新安排在 10 分钟内请求数据时无法连接到服务器，那么如果再次连接失败，它将在一个小时内重新安排或通知管理员。一旦连接成功，我们将回滚到 5 分钟请求。

我想以一般方式实现可重用于任何可能出错的请求。假设它可以是对数据库的调用，对服务的调用——每一种工作都会有他们的 ID。这段代码将覆盖这些调用。如果收到任何异常或错误响应，系统应以适当的方式做出反应 - 取决于作业的状态 - 并将作业移至其他状态。假设如果收到错误的响应 1 次我们只是重新安排请求，下次我们不会重新安排它，而是停止工作并通知管理员。

我查看了断路器模式，但它有点不同。

您能否告知是否有任何模式或代码可供查看或重用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:09:53.237

为此，最好的解决方案是状态模式

# math - 哪种查询语言最接近 Codd 的数据关系模型？

> ID：10041420
> 
> 赞同：1
> 
> 时间：2012-04-06T09:12:42.220
> 
> 标签：math, relational-database, relational-algebra

至少在语法上，SQL 还很遥远。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:32:54.147

据说 Dataphor 的 D4 非常接近（唯一的主要错误是引入了客户强加给开发人员的类似 null 的构造，IIRC）。

The Third Manifesto 的项目页面 ( [http://www.dcs.warwick.ac.uk/~hugh/TTM/Projects.html](http://www.dcs.warwick.ac.uk/~hugh/TTM/Projects.html) ) 上列出的项目都应该更加严格地遵守。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:36:52.950

有两种语法上非常不同的语言：*关系代数*和*关系微积分*，而 SQL 是两者的混合体。有很多逐字的关系代数实现，所以问题显然不是实现的“忠实”程度。

# wpf - WPF Groupbox 控件标题与按钮和文本对齐相反

> ID：10041421
> 
> 赞同：5
> 
> 时间：2012-04-06T09:12:49.653
> 
> 标签：wpf, controls, alignment, groupbox

我想用WPF groupbox控件来实现这样的界面

![在此处输入图像描述](../Images/38288e74efc90137c43bca13924d9617.png)

有没有办法用WPF groupbox控件实现这样的界面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-31T10:19:41.200

我需要同样的东西，在这里找到了答案： [http ://wpf.2000things.com/2013/06/05/835-displaying-custom-content-in-a-groupbox-header/](http://wpf.2000things.com/2013/06/05/835-displaying-custom-content-in-a-groupbox-header/)

不知道哪个版本的.NET

简单的例子：

```
<GroupBox>
    <GroupBox.Header>
        <StackPanel Orientation="Horizontal">
            <Button Content="Click Me"/>
            <Button Content="Click Me Too"/>
        </StackPanel>
    </GroupBox.Header>
    <TextBlock Text="Content of box"/>
</GroupBox> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T10:28:29.680

一个简单的选择是仅重叠控件，然后使用边距进行播放

```
 <Grid>
        <GroupBox Header="Title" Margin="0,3,0,0" />
        <StackPanel Orientation="Horizontal" 
            VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,0,10,0">
            <Button Margin="2" Content="Suchen"/>
            <Button Margin="2" Content="Neu"/>
        </StackPanel>
    </Grid> 
```

如果您想要一个可重复使用的样式，那么您需要提取 GroupBox 的控件模板并对其进行修改。就像是

```
<Page.Resources>
    <BorderGapMaskConverter x:Key="BorderGapMaskConverter"/>
    <Style x:Key="GroupBoxStyle1" TargetType="{x:Type GroupBox}">
        <Setter Property="BorderBrush" Value="#D5DFE5"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type GroupBox}">
                    <Grid SnapsToDevicePixels="true">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="6"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="6"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="6"/>
                        </Grid.RowDefinitions>
                        <Border BorderBrush="Transparent" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Grid.ColumnSpan="4" Grid.Column="0" CornerRadius="4" Grid.Row="1" Grid.RowSpan="3"/>
                        <Border x:Name="Header" Grid.Column="1" Padding="3,1,3,0" Grid.Row="0" Grid.RowSpan="2">
                            <ContentPresenter ContentSource="Header" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                        </Border>
                        <ContentPresenter Grid.ColumnSpan="2" Grid.Column="1" Margin="{TemplateBinding Padding}" Grid.Row="2" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                        <Border BorderBrush="White" BorderThickness="{TemplateBinding BorderThickness}" Grid.ColumnSpan="4" CornerRadius="4" Grid.Row="1" Grid.RowSpan="3">
                            <Border.OpacityMask>
                                <MultiBinding ConverterParameter="7" Converter="{StaticResource BorderGapMaskConverter}">
                                    <Binding ElementName="Header" Path="ActualWidth"/>
                                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource Self}"/>
                                    <Binding Path="ActualHeight" RelativeSource="{RelativeSource Self}"/>
                                </MultiBinding>
                            </Border.OpacityMask>
                            <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="3">
                                <Border BorderBrush="White" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="2"/>
                            </Border>
                        </Border>
                        <StackPanel Grid.ColumnSpan="2" Grid.Column="1" Grid.Row="0" Grid.RowSpan="3" Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Right" >
                            <Button Margin="2" Content="Suchen"/>
                            <Button Margin="2" Content="Neu"/>
                        </StackPanel>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Page.Resources>

<Grid>
    <Grid>
        <GroupBox Header="Title" Style="{StaticResource GroupBoxStyle1}"></GroupBox>
    </Grid>
</Grid> 
```

# c - 如何在内核模块（B）中调用内核模块（A）中的函数和变量，然后向用户空间发送通知？

> ID：10041425
> 
> 赞同：5
> 
> 时间：2012-04-06T09:13:07.013
> 
> 标签：c, linux-kernel

我正在开发一个应用程序（用户空间），它通过网络发送价值变化的通知。

我想开发一个内核模块（A），以便在其他内核模块（B）中的参数值发生变化时通知我的应用程序（用户空间）。

1.  如何从内核模块 (A) 向我的用户空间应用程序发送信号？
2.  如何将数据从内核模块 (A) 发送到我的用户空间应用程序？
3.  如何在内核模块（B）中调用内核模块（A）中的函数和变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:34:06.560

## 从模块 A 访问模块 B

在模块 B 中定义一个头文件，就像一个普通的 C 头文件一样，其中包括 A 想要使用的变量/函数，当然`#include`它在 A 中。

在 B 的源文件之一中，写入：

```
EXPORT_SYMBOL(your_symbol); 
```

对于每个变量/函数。

在模块 A 的 Makefile 中，确保添加 B 的 Module.symvers 的路径，`KBUILD_EXTRA_SYMBOLS`以消除依赖警告，并且如果您的内核已配置为能够加载模块`CONFIG_MODVERSIONS`

## 向用户级进程发出信号

老实说，这个我知道的不多。我个人为我的工作使用 Linux 的实时扩展 (RTAI) 进行编码，并且我拥有我认为普通 Linux 中不存在的设施。这些设施是共享内存（在内核和用户之间）和共享信号量（同样在内核和用户之间）等等。如果你能在 Linux 中找到这样的东西，那么你可以使用它。

如果这些不可用（我相信它们不可用），您总是可以简单地编写一个 /sys 或 /proc 文件，输出一个简单的 0/1 显示用户空间应用程序是否需要发出信号。然后用户空间应用程序可以轮询这个文件。

# javascript - 如何检测某些div何时不在视野范围内

> ID：10041433
> 
> 赞同：2
> 
> 时间：2012-04-06T09:14:04.733
> 
> 标签：javascript, jquery

我刚刚在 vk.com 看到了一些非常有趣的东西

基本上在个人资料页面中，当左列消失时，右列正在改变其宽度。

示例：http: [//vk.com/durov](http://vk.com/durov)

只需向下滚动一点即可查看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:32:12.427

DOM 中的每个元素都定义了可以从 JavaScript 访问的某些*空间偏移属性，它们是 offsetTop、offsetLeft 等，它们为您提供了它与父级的偏移量的值。*您还可以使用 while 循环访问有问题的父级，该循环仅分配下一个父级直到没有剩余（您可以将它们的偏移量添加到原始偏移量的变量以获得“真实”（x，y）偏移量）和当没有更多父元素时存在while循环。

然后你做一些简单的逻辑来检查它是否位于视口内（提示 - 使用窗口对象的页面偏移和宽度/高度属性）。这足以继续还是您需要代码示例？

如果你知道你的元素将出现在哪里以及它的高度（宽度在这里真的无关紧要），你可以做一些黑客攻击，但这是一种蛮力方法。只需检查页面 Y 偏移量和高度与您尝试离开屏幕的元素的预定“maxY”以在右侧显示某个 div（如给出的示例中所示）。

**附录：（更重要的是）**

这将检查元素的任何部分是否在视口中可见：

```
function isVisibleInViewport(elem)
{
    var y = elem.offsetTop;
    var height = elem.offsetHeight;

    while ( elem = elem.offsetParent )
        y += elem.offsetTop;

    var maxHeight = y + height;
    var isVisible = ( y < ( window.pageYOffset + window.innerHeight ) ) && ( maxHeight >= window.pageYOffset );
    return isVisible; 

} 
```

我试着用清晰的思路来写它。如果您愿意，可以进一步缩短它。如果您想移到一边（x 轴，offsetLeft 变量），甚至可以扩展它以包含逻辑。如果您想检查它是否完全在视图中（虽然看不到原因），那么对您的逻辑的更改应该是最小的。

**我的示例用法**

控制何时调用这个函数的逻辑超出了这个范围，我希望你有一些方法。我的例子：

```
function check()
{
    var canvas = document.getElementById("webGlExperiments");
    if(isVisibleInViewport(canvas))
        document.getElementById("test").innerHTML = "It is!";
    else
        document.getElementById("test").innerHTML = "It is not!";
} 
```

然后添加一个事件监听器来检查滚动：

```
window.addEventListener("scroll", check, false); 
```

对于我的示例，您还需要另一个元素，例如 ID 为 webGlExperiments 的画布，将其更改为适合您和您的问题的东西。这是**我在测试**中使用的有问题的 div，您可以自己调整：

```
<div id="test" style="margin-top:100px;">Testing, testing!</div> 
```

# ruby-on-rails - Ruby 模块同时作为命名空间和 mixin

> ID：10041437
> 
> 赞同：0
> 
> 时间：2012-04-06T09:14:31.893
> 
> 标签：ruby-on-rails, ruby

在我目前正在开发的 Rails 应用程序中，我有许多“请求”模型。我们正在使用很多 Web 服务，并且我们对这些服务有很多不同的请求，每个请求都有自己的逻辑（主要是验证）。所以它们都被分组在一个模块中作为命名空间：

```
module Request
end 
```

所以现在每个请求都是这样的：

```
class Request::SendSomeData
end 
```

到目前为止，一切都很好......问题是我们将有很多这样的请求，它们将共享一些共同的逻辑。包含模块很容易

```
class Request::SendSomeData
  include Request
end 
```

......（所以它既可以作为命名空间又可以作为混合），但我想知道是否有一种方法可以在没有包含的情况下实现它（因为它将是某种代码重复）。

**Ruby 有没有办法在不显式包含模块的情况下将一些实例方法放在模块命名空间中的所有类中？**

换句话说，我可以有类似的东西：

```
module Request
  def someMethod
  end
end 
```

和

```
class Request::SendSomeData
end 
```

并且能够使用

```
Request::SendSomeData.new.someMethod 
```

同时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:36:09.517

如果没有一些邪恶的黑客，你所要求的就无法完成。

你要么有太多的课程，要么专注于一个太不重要的问题。每个类只有一行代码。

另一种方法是创建一个基本模型类，正如我之前在[另一个问题](https://stackoverflow.com/questions/10040449/is-there-a-framework-that-allows-me-to-define-a-model-only-once)中描述的那样，但这需要对每个调用派生类`set_table_name`，因此它不会为您节省任何输入。

# .net-3.5 - MSbuild：编译项目然后迭代[反射，生成代码，重新编译]直到它收敛

> ID：10041442
> 
> 赞同：4
> 
> 时间：2012-04-06T09:14:56.210
> 
> 标签：.net-3.5, msbuild, compact-framework, code-generation, tail-recursion

我有一个自定义`.targets`文件，用于支持编译后代码生成。我重写了一些目标，目的是让`AfterBuild`任务运行代码生成器，`CoreBuild`再次调用，然后进行尾递归，直到结果收敛到一个定点或需要太多迭代。（我认为我从未见过它需要超过 3 次编译才能收敛，但我使用 5 作为限制。）

在某些方面，这是一个笨拙的 hack，尤其是通过`CycleDepth`同时使用来打破无限循环并防止 MSBuild 因为属性没有更改而跳过重复的任务，但它适用于其主要预期用例：生成代码以实现对象序列化方法并通过部分类机制将它们合并，作为一种优化以避免在运行时基于反射的序列化。但是，我遇到了一种中断的情况：如果使用`/m`(parallel) 选项针对解决方案调用 MSBuild，则构建会可怕地死掉：在我看来，好像应该是迭代被同时调用。

有没有办法在不破坏并行 MSBuild 的情况下实现这种递归？

由于需要同时针对标准和紧凑框架，我在某种程度上锁定了 3.5 版本；优化对于在较慢的 Compact Framework 设备上实现足够的速度是必要的。

```
 <Target Name="BeforeCompile" Condition="Exists('$(ProjectDir)CodeGenerationPostBuild.xml')">
    <PropertyGroup>
      <AssemblyTimestampBeforeCompile>%(IntermediateAssembly.ModifiedTime)</AssemblyTimestampBeforeCompile>
    </PropertyGroup>
  </Target>

  <Target Name="AfterCompile" Condition="Exists('$(ProjectDir)CodeGenerationPostBuild.xml')">
    <PropertyGroup>
      <AssemblyTimestampAfterCompile>%(IntermediateAssembly.ModifiedTime)</AssemblyTimestampAfterCompile>
    </PropertyGroup>
  </Target>

  <Target Name="AfterBuild" Condition="Exists('$(ProjectDir)CodeGenerationPostBuild.xml') and ('$(AssemblyTimestampBeforeCompile)'!='$(AssemblyTimestampAfterCompile)')">
    <Exec WorkingDirectory="$(ProjectDir)" Command="&quot;$(SolutionDir)..\CodeGen\CodeGeneration.Engine\bin\$(ConfigurationName)\CodeGeneration.Engine.exe&quot; &quot;$(ProjectDir)CodeGenerationPostBuild.xml&quot;  Command=Build ConfigurationName=$(ConfigurationName)" IgnoreExitCode="true">
      <Output TaskParameter="ExitCode" PropertyName="PostBuildExitCode" />
    </Exec>
    <Error Condition="$(PostBuildExitCode) == 2" Code="BS0002" Text="Read-only generated code file found; did it get checked in again?" />
    <Error Condition="$(PostBuildExitCode) == 99" Code="BS0099" Text="Error in code generation; see detailed build output." />
    <Error Condition="'$(CycleDepth)' == 'xxxxx' And $(PostBuildExitCode) != 0" Code="BS1000" Text="Compilation taking too many iterations to converge.  Do you have [AssemblyVersion(&quot;1.0.*&quot;)] in your AssemblyInfo.cs?" />
    <MSBuild Condition="'$(CycleDepth)' != 'xxxxx' And $(PostBuildExitCode) == 1" Projects="$(ProjectPath)" Targets="CoreBuild; AfterBuild" Properties="CycleDepth=$(CycleDepth)x" />
  </Target> 
```

# java - 通过使用泛型传递类来返回类型化类的正确 Java 类型

> ID：10041443
> 
> 赞同：1
> 
> 时间：2012-04-06T09:15:06.070
> 
> 标签：java, generics

为了更好地理解我的问题，请参阅以下课程：

```
public interface Invoker<R> {
  public String getName();
  public R getResult();
} 
```

执行：

```
public class RepairFetcher implements Invoker<List<String>> {

  @Override
  public String getName() {
    return this.getClass().getSimpleName();
  }

  @Override
  public List<String> getResult() {
    return new ArrayList<String>();
  }

} 
```

出错的类：

```
public class OperationService {

   public <R> R invoke(Class<R> invoker, Object... parameters) {
     WebserviceOperation<R> operation = new WebserviceOperation<R>(invoker);
     Invoker<R> instance = operation.getInstance();

     return instance.getResult();
   }

} 
```

主要类：

```
public class Main {

  public static void main(String[] args) {

    OperationService operationService = new OperationService();
    operationService.invoke(RepairFetcher.class, new Object[] {});

  }

} 
```

**问题：** 此时方法

> operationService.invoke(RepairFetcher.class, new Object[] {});

返回一个 RepairFetcher，由于调用方法中的参数，这并不奇怪：

> 类调用者

它返回 R，它是一个 RepairFetcher.class。

**我想要** 的我不希望调用方法返回 RepairFetcher 类，但我希望它返回声明的类型，即 List<String>。

这是否可能，如果可以，如何实施？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:28:48.093

不确定，但尝试：

```
public <T, R extends Invoker<T>> T invoke(Class<R> invoker, Object... parameters) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:34:12.440

您发布的代码不会以当前形状编译（它错过了一些部分），但从您尝试执行的操作来看，您应该知道它`Class`是使用类的类型参数化的；所以， 的类型`String.getClass()`是`Class<String>`。

也就是说，你的函数定义

```
public <R> R invoke(Class<R> invoker, Object... parameters) { 
```

应该是这样的

```
public <R> R invoke(Class<Invoker<R>> invoker, Object... parameters) { 
```

因此您可以确保返回与调用者返回的类型相同的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T09:24:40.217

RepairFetcher 实现`Invoker<List<String>>`所以 RepairFetcher 是一个`Invoker<List<String>>`并且返回是好的。

如果您对此进行测试：

RepairFetcher instanceof `Invoker<List<String>>`，答案一定是真的。

PS：我把<换成（因为编辑有问题<

# java - java private 访问修饰符可以在类之外访问吗？

> ID：10041449
> 
> 赞同：0
> 
> 时间：2012-04-06T09:15:22.583
> 
> 标签：java, oop

为什么java编译器不限制访问其他类的私有属性？我有一个内部类，它有一个带有修饰符“private”的属性“a”。我可以在类之外使用它的实例变量访问这个变量。请参阅下面的代码。

```
package com.test;

public class Test {

    public Test() {
    }

    public static void main(String[] args) {
        new Test().execute(); // test method
    }

    public void execute() {
        InnerClass innerClassInstance = new InnerClass();
        // accessing private member from other class instance, HOW?
        System.out.println(innerClassInstance.a);

        InnerStaticClass innerStaticClassInstance = new InnerStaticClass();
        // accessing private member from other class instance, HOW?
        System.out.println(innerStaticClassInstance.a);
    }

    private final class InnerClass {
        private int a; // accessible only in InnerClass??
    }

    private final static class InnerStaticClass {
        private int a; // accessible only in InnerClass??
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:17:52.053

 ~~~~> 嵌套类是其封闭类的成员。非静态嵌套类（内部类）可以访问封闭类的其他成员，即使它们被声明为私有~~ 

[http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

 ~~对不起，我误读了这个问题。

看 JLS [http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6.1)

> 否则，如果成员或构造函数被声明为私有，则当且仅当它出现在包含成员或构造函数声明的顶级类（第 7.6 节）的主体内时，才允许访问。

因此，内部类中的字段（显然在类主体内部）可以被外部类访问，即使它是私有的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:19:48.053

请参阅[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#d5e8103)：

> 否则，如果成员或构造函数被声明为私有，则当且仅当它出现在包含成员或构造函数声明的顶级类（第 7.6 节）的主体内时，才允许访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T09:26:05.477

您的 Inner 类是您的 Test 类的成员，因此 Test 类也可以访问 Inner 类的私有成员。

像这样尝试它会给出编译错误

公共类测试{

```
public Test() {
}

public static void main(String[] args) {
    new Test().execute(); // test method
}

public void execute() {
    InnerClass innerClassInstance = new InnerClass();
    // accessing private member from other class instance, HOW?
    System.out.println(innerClassInstance.a);

    InnerStaticClass innerStaticClassInstance = new InnerStaticClass();
    // accessing private member from other class instance, HOW?
    System.out.println(innerStaticClassInstance.a);
} 
```

}

类 InnerClass { 私有 int a; // 只能在 InnerClass 中访问？？}

最终类 InnerStaticClass { private int a; // 只能在 InnerClass 中访问？？}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T09:30:24.517

> 这些[嵌套类](http://en.wikipedia.org/wiki/Inner_class)就是为此而设计的。当你在一个类中有私有成员时，我们编写嵌套类来进行单元测试。~~~~

# django - Django MultiWidget format_output 方法和render 方法

> ID：10041450
> 
> 赞同：0
> 
> 时间：2012-04-06T09:15:25.483
> 
> 标签：django, django-forms

谁能解释django Multiwidget中的format_output方法和render方法。

我有一个选择框、一个用于电子邮件输入的文本字段和一个复选框。我已经创建了一个 multiWidget，但我想要添加更多功能，例如如果有人单击“添加更多”按钮，javascript 将复制由 multiWidget 创建的字段集。

我也想像这样渲染html：

```
<input type = "text" name=textbox_name[] /> 
```

我怎样才能做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:27:19.170

看看 Django [Formsets](https://docs.djangoproject.com/en/dev/topics/forms/formsets/)和相关帖子

[动态添加字段到表单](https://stackoverflow.com/questions/6142025/django-dynamically-add-field-to-a-form)

# android - 为 Android 构建内核模块

> ID：10041452
> 
> 赞同：6
> 
> 时间：2012-04-06T09:15:28.803
> 
> 标签：android, linux-kernel

我需要将 FTDI USB 模块添加到 Android 内核（Android 2.3.1，Linux 2.6.32），所以我得到了 2.6.32 内核并尝试构建模块：

```
make modules ARCH=arm CROSS_COMPILE=arm-none-eabi- 
```

但是当我尝试执行“insmod ftdi_sio.ko”时，错误消息是

```
insmod: init_module 'ftdi_sio.ko' failed (Exec format error) 
```

在 dmesg 的输出中我发现了这个

```
ftdi_sio: version magic '2.6.32.27 preempt mod_unload ARMv5 ' should be '2.6.32.27 preempt mod_unload ARMv7 ' 
```

我尝试添加“armv7-a”标志（正如我在 Android NDK 文档中阅读的那样）

```
make modules ARCH=arm CROSS_COMPILE=arm-linux-androideabi- CFLAGS='-march=armv7-a -mfloat-abi=softfp' 
```

另外，我尝试了以下交叉编译器：arm-none-eabi-、arm-eabi-、arm-linux-android-eabi-

每次结果都是一样的——版本魔法中的 ARMv5。如何为 ARMv7 构建模块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T08:05:51.607

尝试`CONFIG_CPU_V7=y`在您的内核`.config`文件中进行设置

# c++ - 即使构建成功，Eclipse c++ Type could not be resolved 错误

> ID：10041453
> 
> 赞同：29
> 
> 时间：2012-04-06T09:15:28.833
> 
> 标签：c++, eclipse

我在 Eclipse 中混合了 C++/Java 项目。我已经设置了一个 build.mk 文件，当编辑器中的所有文件都关闭时，Eclipse 会成功构建项目。当我打开 .h 或 .cpp 文件时，Eclipse 会在其中发现很多未定义的符号。我引用了 3rd 方 API，所有问题似乎都与该 API 中的符号有关。奇怪的是，有些类型被认为是在 Eclipse 中定义的，而有些则被认为是未定义的，即使在某些情况下它们是在同一个 .h 文件中定义的。

我的同事没有遇到任何这些问题，但我们不知道从哪里开始解决这个问题。我们已经确保我们的 Eclipse 包含目录是相同的。有没有办法比较eclipse项目设置？

更新： .cproject 文件和 .project 文件以及 .settings 目录中的文件只知道某些路径不同。虽然没有帮助解决我的问题。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-05-03T13:47:21.100

我有同样的问题。它可以通过刷新 Eclipse 索引器来解决。

我使用了项目上下文菜单并选择了`Index->Rebuild`and `Index->Freshen All Files`。最后删除了错误消息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T12:23:17.653

原来我需要更改启动选项卡上的代码分析设置，但我根本没有看到该选项卡。

![在此处输入图像描述](../Images/50045c24326b9cba7c8c7dbcf7cf1f79.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-26T11:36:33.813

我有同样的问题。它发生在我使用的包含文件中

> 命名空间标准

不在主文件中使用它，反之亦然。请平等地检查使用***命名空间。***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-30T09:00:39.863

You can compile and run the source code also by Right Click On Project>Run C/C++ Code Analysis. This will solve your problem.![enter image description here](../Images/8ce3e5d308cfd22254e14411216467b5.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-01T16:03:40.470

我终于想通了。投票最多的答案中提到的刷新 Eclipse 索引器对我不起作用。这是我必须做的：

我去了：项目 -> 属性 -> C/C++ 常规 -> 路径和符号 -> 包含

这里我有我的包含目录的路径，但我必须做的是删除目录路径，然后重新添加它，确保选中“添加到所有配置”框。我还选中了“添加到所有语言”框，但我认为没有必要。

在此之后，您可能需要单击 Project -> C/C++ Index -> Rebuild。我不需要，但你可能会。此外，显然不是上面路径中的 C/C++，而是 Java 或您正在处理的任何语言。

# c# - 在派生类型中找不到属性集方法

> ID：10041458
> 
> 赞同：16
> 
> 时间：2012-04-06T09:15:54.817
> 
> 标签：c#, .net-3.5, propertyinfo

正如[.NET 反射设置私有属性](https://stackoverflow.com/questions/1778405/net-reflection-set-private-property)中所厌恶的那样，可以使用私有设置器设置属性。但是当在基类中定义属性时，会抛出 System.ArgumentException：“找不到属性集方法”。

一个例子可以是：

```
using System;
class Test
{
    public DateTime ModifiedOn { get; private set;}
}

class Derived : Test
{
}

static class Program
{
    static void Main()
    {
        Derived p = new Derived ();
        typeof(Derived).GetProperty("ModifiedOn").SetValue(
            p, DateTime.Today, null);
        Console.WriteLine(p.ModifiedOn);
    }
} 
```

有谁知道解决这种情况的方法？

**编辑：**给出的示例是对问题的简单说明。在现实世界的场景中，我不知道属性是定义在基类中，还是定义在基类的基类中。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-09-19T15:06:45.607

我有一个类似的问题，我的私有财产在基类中声明。我使用**DeclaringType**来获取定义属性的类的句柄。

```
using System;
class Test
{
    public DateTime ModifiedOn { get; private set;}
}

class Derived : Test
{
}

static class Program
{
    static void Main()
    {
        Derived p = new Derived ();

        PropertyInfo property = p.GetType().GetProperty("ModifiedOn");
        PropertyInfo goodProperty = property.DeclaringType.GetProperty("ModifiedOn");

        goodProperty.SetValue(p, DateTime.Today, null);

        Console.WriteLine(p.ModifiedOn);
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-06T09:18:24.380

我认为这会起作用：

```
using System;
class Test
{
    public DateTime ModifiedOn { get; private set;}
}

class Derived : Test
{
}

static class Program
{
    static void Main()
    {
        Derived p = new Derived ();
        typeof(Test).GetProperty("ModifiedOn").SetValue(
            p, DateTime.Today, null);
        Console.WriteLine(p.ModifiedOn);
    }
} 
```

您需要从其实际定义的类而不是派生类中获取属性定义

**编辑：**

要在任何基类上选择它，您需要在所有父类上查找它。

像这样的东西然后递归到基类，直到你点击对象或找到你的财产

```
typeof(Derived ).GetProperties().Contains(p=>p.Name == "whatever") 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-06T09:21:51.547

@LukeMcGregor 的另一种选择是使用 BaseType

```
typeof(Derived)
    .BaseType.GetProperty("ModifiedOn")
    .SetValue(p, DateTime.Today, null); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-08-01T05:22:28.073

我做了这个可重用的方法。它处理我的场景。

```
 private static void SetPropertyValue(object parent, string propertyName, object value)
    {
        var inherType = parent.GetType();
        while (inherType != null)
        {
            PropertyInfo propToSet = inherType.GetProperty(propertyName, BindingFlags.Public | BindingFlags.Instance);
            if (propToSet != null && propToSet.CanWrite)
            {
                propToSet.SetValue(parent, value, null);
                break;
            }

            inherType = inherType.BaseType;
        }
    } 
```

# java - Java部署一个服务器程序

> ID：10041466
> 
> 赞同：1
> 
> 时间：2012-04-06T09:16:15.177
> 
> 标签：java, database, sockets, deployment

我有一个在特定端口上侦听的 Java 套接字服务器程序。从 GPS 追踪器 (TCP/IP) 接收数据时：

1.  处理数据
2.  将数据插入小型数据库

我想让这个程序在很长一段时间内稳定运行......如何？（网页服务， .. ？）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:22:26.617

使用像[Tomcat](http://tomcat.apache.org/)这样的 java 应用程序服务器，可能与[Jersey](http://jersey.java.net/)一起使用。如果 DB 上的数据模型很复杂，您也可以使用[Hibernate](http://www.hibernate.org/)，以便在 db 上简单地存储数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:55:16.247

你需要像[Apache Daemon](http://commons.apache.org/daemon/)这样的东西。这为您提供了一些基础设施，以确保 Java 守护程序可以在 *NIX 和 Windows 系统的后台轻松启动、停止和运行。

# ajax - 加载外部数据时，控制台提示：XHR 完成加载

> ID：10041468
> 
> 赞同：67
> 
> 时间：2012-04-06T09:16:52.387
> 
> 标签：ajax, google-chrome, console, xmlhttprequest, google-chrome-devtools

有没有办法隐藏`"XHR finished loading"`控制台中的消息？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-04-06T09:20:35.330

是的，在控制台中打开上下文菜单，然后取消选中`Log XMLHttpRequests`.

您仍然可以在“网络”选项卡上检查网络流量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T09:22:38.187

[铬问题跟踪器http://code.google.com/p/chromium/issues/detail?id=15472](http://code.google.com/p/chromium/issues/detail?id=15472)中发布了一些解决方法

您使用的是哪个版本的 chrome？在我的控制台中，有一个复选框可以启用或禁用日志 XMLHTTPRequests 我正在使用 17.0.963.79

# android - 键入时 TextView 中的字符未正确显示

> ID：10041470
> 
> 赞同：0
> 
> 时间：2012-04-06T09:17:24.437
> 
> 标签：android, layout, textview

我做了一个 TextView 和一个按钮。单击该按钮会将用户输入的值保存在变量中。问题是，当触摸 textview 后弹出键盘时，只有第一个字符可以正常显示。其余字符不显示。出现 _ 而不是其他字符。在我完成输入并按下后退按钮后，当键盘消失时，我可以正确看到字符。问题是什么？

```
 Button okbutton = (Button) findViewById(R.id.okbutton);
    okbutton.setClickable(true);
    final TextView radius = (TextView) findViewById(R.id.radius);

    okbutton.setOnClickListener(new OnClickListener() {

    public void onClick(View arg0) {
    i=radius.getText().toString();
    }
    }); 
```

这是完整的布局

```
 <?xml version="1.0" encoding="utf-8"?>
       <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent" android:layout_height="fill_parent">

   <ImageView android:id="@+id/icon" android:src="@drawable/settings"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:paddingLeft="10px"></ImageView>

   <TextView android:textSize="20px" android:typeface="sans"
    android:layout_height="wrap_content" android:id="@+id/alarmset"
    android:layout_width="fill_parent" android:text="@string/alarmset"
    android:textStyle="bold" android:gravity="center"
    android:drawablePadding="10px" android:paddingTop="10px"></TextView>

<TextView android:text="@string/distance" android:id="@+id/distance"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:layout_below="@+id/alarmset"></TextView>

<TextView android:id="@+id/kmvalue" android:layout_below="@+id/distance"
    android:layout_width="wrap_content" android:layout_height="wrap_content"></TextView>

<TextView android:text="@string/km" android:id="@+id/km"
    android:layout_below="@+id/distance" android:layout_toRightOf="@+id/kmvalue"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:paddingLeft="10px"></TextView>

<TextView android:text="@string/musichooser" android:id="@+id/musictext"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:layout_below="@+id/km" android:paddingTop="10px"></TextView>

<Button android:id="@+id/chooser" android:layout_below="@+id/musictext"
    android:drawableRight="@drawable/lov_ena"
    android:layout_alignParentRight="true" android:layout_width="wrap_content"
    android:layout_height="30px" android:layout_alignBaseline="@+id/musicfile">
</Button>

<EditText android:id="@+id/musicfile" android:layout_width="fill_parent"
    android:layout_below="@+id/musictext" android:layout_toLeftOf="@id/chooser"
    android:layout_height="40px">
</EditText>

<TextView android:text="@string/imgchooser" android:id="@+id/imgText"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:layout_below="@+id/chooser" android:paddingTop="20px"></TextView>

<Button android:id="@+id/imgPicker" android:layout_below="@+id/imgText"
    android:drawableRight="@drawable/lov_ena"
    android:layout_alignParentRight="true" android:layout_width="wrap_content"
    android:layout_height="30px" android:layout_alignBaseline="@+id/imgfile">
</Button>

<EditText android:id="@+id/imgfile" android:layout_width="fill_parent"
    android:layout_below="@+id/imgText" android:layout_toLeftOf="@id/chooser"
    android:layout_height="40px">
</EditText>

<RelativeLayout android:id="@+id/InnerRelativeLayout"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" android:layout_centerInParent="true">

    <Button android:layout_width="wrap_content"
        android:layout_height="50px" android:id="@+id/setalarm"
        android:layout_centerInParent="true" android:text="@string/setalarm" />
</RelativeLayout>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/imgfile"
    android:text="Enter Distance" />

<Button
    android:id="@+id/okbutton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/textView1"
    android:text="OK" />

<EditText
    android:id="@+id/radius"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignRight="@+id/imgfile"
    android:layout_alignTop="@+id/okbutton" />

      </RelativeLayout> 
```

此图像应该使问题易于理解 [http://i39.tinypic.com/r8t64l.jpg](http://i39.tinypic.com/r8t64l.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:25:15.973

错误地，您在编辑文本上放置了任何其他视图；只需转到您的 xml 文件并打开图形布局，然后使用鼠标指针通过单击在显示的图片中看不到文本的部分来找到该视图，双击该部分可以转到 xml，然后只需从您的 xml 中删除该视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:31:04.687

尝试将`TextView`代码中的 更改为`EditText`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T10:02:28.217

按钮 okbutton = (Button) findViewById(R.id.okbutton);

```
okbutton.setClickable(true);

EditText radius = (EditText) findViewById(R.id.radius);

okbutton.setOnClickListener(new OnClickListener() {

public void onClick(View arg0) {
i=radius.getText().toString();
}
}); 
```

尝试这个....

# ios - IBAction 到子视图以检查图像是否隐藏

> ID：10041472
> 
> 赞同：0
> 
> 时间：2012-04-06T09:17:30.127
> 
> 标签：ios, xcode, ios5, ibaction

我正在尝试通过单击按钮来检查子视图的图像是否隐藏。日志确实显示，但我无法以某种方式获得图像的隐藏状态。

这里出了什么问题？希望你能帮助我！

查看didload：

```
SubSlide1Hoofdstuk3 *subslide1 = [[SubSlide1Hoofdstuk3 alloc] init];
CGRect frame = self.view.frame;
frame.origin.x = 0;
frame.origin.y = 0;
subslide1.view.frame = frame;

// This works finaly
UIImageView *zwart = subslide1.imageZwart;
[zwart setImage:[UIImage imageNamed:@"imageblack.jpg"]]; 
[subslide1.b1 addTarget:self action:@selector(switchImageZwart:) forControlEvents:UIControlEventTouchUpInside];

[_scrollView addSubview:subslide1.view]; 
```

检查子视图中图像的 IBAction 被隐藏：

```
-(IBAction)switchImageZwart:(id)sender
{
    SubSlide1Hoofdstuk3 *switchactie = [[SubSlide1Hoofdstuk3 alloc] init];
    UIImageView *wit    = switchactie.imageWit;
    UIImageView *zwart  = switchactie.imageZwart;

    if(zwart.hidden == YES) {
        NSLog(@"Image black is hidden!");
    } else if(wit.hidden == YES) {
        NSLog(@"Image white is hidden!");
    } else {
        NSLog(@"Can't say... :(");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:55:39.177

这里的问题是，在您的`-(IBAction)switchImageZwart:(id)sender`方法中，您创建了一个新实例`SubSlide1Hoofdstuk3`并检查其属性（`UIImageViews`），而不是检查您创建的实际 UIImageView 对象`viewDidLoad:`。你实际上想要的是持有一个引用`subslide1`并检查它。

附言。由于调用 check 方法的按钮实际上是 subslide1 的子视图，因此您可以获得如下参考：

```
SubSlide1Hoofdstuk3 *switchactie = [sender superView]; 
```

**编辑：**您的实际代码示例：

在您的 .h 文件中：

```
@property(nonatomic, strong) SubSlide1Hoofdstuk3 *subslide1; 
```

在您的 .m 文件中：

```
@synthesize subslide1;

- (void)viewDidLoad
{
    //...
    self.subslide1 = [[SubSlide1Hoofdstuk3 alloc] init];
    CGRect frame = self.view.frame;
    frame.origin.x = 0;
    frame.origin.y = 0;
    self.subslide1.view.frame = frame;

    // This works finaly
    UIImageView *zwart = self.subslide1.imageZwart;
    [zwart setImage:[UIImage imageNamed:@"imageblack.jpg"]]; 
    [self.subslide1.b1 addTarget:self action:@selector(switchImageZwart:) forControlEvents:UIControlEventTouchUpInside];

    [_scrollView addSubview:self.subslide1.view];

}

-(IBAction)switchImageZwart:(id)sender
{
    SubSlide1Hoofdstuk3 *switchactie = self.subslide1;
    UIImageView *wit    = switchactie.imageWit;
    UIImageView *zwart  = switchactie.imageZwart;

    if(zwart.hidden == YES) {
        NSLog(@"Image black is hidden!");
    } else if(wit.hidden == YES) {
        NSLog(@"Image white is hidden!");
    } else {
        NSLog(@"Can't say... :(");
    }
} 
```

# ios - 防止黑客入侵的安全 ios 应用程序 - Objective-c

> ID：10041475
> 
> 赞同：3
> 
> 时间：2012-04-06T09:17:40.103
> 
> 标签：ios, app-store

如果应用程序已被破解并从 installous 安装，是否可以使应用程序无法启动？我不想在 installous 中看到我的应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:22:44.017

这并不容易，并且在某些单词或代码片段中无法回答。但你可以检查一下：

[http://www.shmoopi.net/ios-anti-piracy/iphone-piracy-protection-code-tutorial-2/](http://www.shmoopi.net/ios-anti-piracy/iphone-piracy-protection-code-tutorial-2/)

[http://www.cocos2d-iphone.org/forum/topic/7667](http://www.cocos2d-iphone.org/forum/topic/7667)

[http://thwart-ipa-cracks.blogspot.com/2008/11/detection.html](http://thwart-ipa-cracks.blogspot.com/2008/11/detection.html)

也在这里阅读：

[http://www.learn-cocos2d.com/2010/05/ignore-everything-youve-heard-about-app-store-piracy/](http://www.learn-cocos2d.com/2010/05/ignore-everything-youve-heard-about-app-store-piracy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:27:40.657

有多种方法可以检测您的应用程序是否在越狱设备上运行，或者您的应用程序是否已被修改（也称为破解）。例如，看看[这里](https://stackoverflow.com/questions/4727976/how-to-detect-a-cracked-iphone-app-and-a-jailbroken-device-different-methods)和[这里](https://stackoverflow.com/questions/846309/reducing-piracy-of-iphone-applications)。

从我的角度来看，使用这些方法得到的一切都是浪费时间。也许你可以让潜在的破解者更难，并远离脚本小子。但是你不会走得那么远，地球上没有天才的破解者无法破解你的应用程序。即使是地球上一个有能力并有动力破解您的应用程序的破解者也足以将其上传到数百个站点。

如果真正的大公司未能保护他们的应用程序，我真的怀疑你会实现它......所以：浪费时间应该更好地花在改进你的应用程序上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T09:18:54.473

可能不会，因为破解您的应用程序的部分是删除所有限制（注册，检测越狱，......）。

# excel - 在存储在工作表 1 中的 VB 函数中使用工作表 2

> ID：10041477
> 
> 赞同：2
> 
> 时间：2012-04-06T09:17:51.160
> 
> 标签：excel, excel-2007, vba

我想比较 2 个不同工作表中 2 列的值，如果值相等，则第一个工作表中的相应单元格将在第二个工作表的相应单元格中采用相同的值。所以我使用了循环函数，但问题是我无法在第一张表的函数中定义和使用第二张表。

我会很感激指导我解决这个问题。

您将在下面找到我要使用的功能：

```
Sub Test_V01()
    Dim i As Integer
    Dim j As Integer

    Dim Bouira As Excel.Worksheet

    For j = 3 To 100
        For i = 3 To 120
            If Cells(j, 3) = Bouira!Cells(i, 30) Then 
                Cells(j, 12) = Bouira!Cells(i, 31)
            End If
        Next i                 
    Next j

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:30:49.657

1.  分别替换`Cells(j, 3)`和`Cells(j, 12)`以确保始终使用此工作表中的单元格，而不是活动工作表中的单元格。`Me.Cells(j, 3)``Me.Cells(j, 12)`

2.  替换`Bouira!Cells`为`Bouira.Cells`。工作表中没有集合，其元素的字面值为`Cells`.

3.  `Bouira`在进入循环之前分配一个引用：

    ```
    Set Bouira = ThisWorkbook.Worksheets("Sheet name") 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:45:33.820

这将设置对工作表的引用`Bouira`：

```
Sub Test_V01()
    Dim i As Integer, j As Integer, Bouira As Worksheet

    Set Bouira = Worksheets("Bouira")

    For j = 3 To 100
        For i = 3 To 120
            If Cells(j, 3) = Bouira.Cells(i, 30) Then
                Cells(j, 12) = Bouira.Cells(i, 31)
            End If
        Next i
    Next j

End Sub 
```

# android - 尽管 url 和请求代码是正确的，但响应会引发异常

> ID：10041479
> 
> 赞同：0
> 
> 时间：2012-04-06T09:18:03.703
> 
> 标签：android, nullpointerexception

在代码中连接

```
HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet();
            request.setURI(new URI(url));
            HttpResponse response = client.execute(request); 
```

当涉及到响应执行时，它只是触发一个异常

```
java.lang.nullPointerException 
```

我检查了每一件事，即

*“url 接收并传递给 request.setURI() 方法，url 没问题，但它仍然在响应行崩溃”*

# html - HTML:OPTION 值属性中的嵌套 C:OUT 标记

> ID：10041483
> 
> 赞同：0
> 
> 时间：2012-04-06T09:18:24.497
> 
> 标签：html, jsp, el

```
<html:select property = "abc">
             <c:forEach var="abcSearch" items="${requestScope.abcSet}">
              <html:option value="<c:out value='${abcSearch}'/>"><c:out value='${abcSearch}' /></html:option>
            </c:forEach>
            </html:select> 
```

在上面的代码`<html:option value="<c:out value='${abcSearch}'/>">`行中不起作用。

我试过使用`<html:option value="${abcSearch}"/>`.

**但它也不能正常工作。请建议我如何评估这一点。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T05:55:30.210

`<html:option value="<c:out value='${pcVersionSearch}'/>">`不起作用，因为语法错误。

但`<html:option value="${pcVersionSearch}"/>`如果 tld for`<html:option>`已配置`rtexprvalue`为 true，则应该可以工作。请检查您的 tld 并将其更改为 true。

# git - 修复不完整的 .git 目录

> ID：10041486
> 
> 赞同：2
> 
> 时间：2012-04-06T09:18:31.237
> 
> 标签：git

我有一个工作目录，它是一个 git 存储库。今天，我对文件夹和文件结构进行了很多更改，并且还移动了一些`.git`目录。现在，尝试提交这些更改，我收到以下错误：

```
fatal: Not a git repository (or any parent up to mount parent ) 
```

我用谷歌搜索了这个错误，发现了 git 用来确定当前目录是否是 git 存储库的标准。事实证明，我`.git`丢失了一些文件和文件夹：

```
$ ls -la .git
total 36
drwxr-xr-x   5 oli oli 4096 Apr  6 10:51 .
drwxr-xr-x  10 oli oli 4096 Apr  6 11:05 ..
-rw-r-xr--   1 oli oli   30 Mar  3 13:39 COMMIT_EDITMSG
-rw-r--r--   1 oli oli   41 Mar  3 13:40 ORIG_HEAD
-rw-r--r--   1 oli oli 6612 Mar  3 13:40 index
drwxr-xr-x   2 oli oli 4096 Jan 27 19:58 info
drwxr-xr-x   3 oli oli 4096 Jan 27 19:58 logs
drwxr-xr-x 165 oli oli 4096 Mar  3 13:40 objects 
```

与另一个存储库相比，缺少多个对象，最重要的是`HEAD`文件。我不完全知道，它们是如何丢失的（我总是移动整个目录），但现在的问题是，如何恢复所有内容，以便我仍然拥有提交日志并可以将我的更改提交到存储库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:25:56.957

不知道这是否可行，但试试这个（在进行备份之后）。我希望来自`.git/objects`的文件不会丢失 - 否则我怀疑任何事情都会有所帮助。

1.  创建一个空存储库`git init`
2.  将您不完整的存储库复制到其上，覆盖空存储库也具有的所有文件。

如果它现在被识别为 Git 存储库但缺少一些提交，请执行以下操作：

1.  `git fsck --lost-found`
2.  将`.git/lost-found/commit`目录移至`.git/refs/heads`
3.  检查历史记录`gitk --all`并为您要保存的任何内容创建分支或标签。
4.  最后清理：将保存的分支推送到远程存储库或从`.git/refs/heads`丢失和找到的分支中删除。

然后下次记得进行备份，无论是通过推送到远程存储库还是使用自动备份应用程序。;)

# javascript - 具有悬停效果、tilesheet 等的画布 tile 网格

> ID：10041494
> 
> 赞同：0
> 
> 时间：2012-04-06T09:19:29.480
> 
> 标签：javascript, html, sprite, html5-canvas

我一直致力于为画布构建基于图块的显示网格。这是我到目前为止所拥有的：http: [//jsfiddle.net/dDmTf/7/](http://jsfiddle.net/dDmTf/7/)

我遇到的一些问题，不能完全掌握是：

1.  ~~初始加载时间很荒谬......我不明白我做错了什么~~- 已修复，发现我渲染的 ^32 比我应该做的多
2.  悬停效果“应该”只是突出显示图块的边框，将其删除，如果不重新渲染整个画布，我无法恢复前一个图块。
3.  ~~如何使用 tilesheets，为我提供单个图像而不是一堆小图像~~
4.  ~~调整窗口大小（调整画布大小）也会擦除画布。我需要重新渲染吗？或者我可以在宽度/高度发生变化时保持各种状态~~- 添加一个`onresize`回调，重新渲染地图。可能不是最好的方法吗？
5.  多层？我将如何开始允许透明 .png 文件相互叠加

这些是我现在遇到的主要问题，任何指导都将不胜感激。

另外，如果您对我的 javascript 有任何指示，请随意！我正在学习更多，我确信我做错了很多事情。

### 编辑

作为一个仅供参考，我只是复制粘贴了当前显示在 jsfiddle 上的精灵图。这不是我打算使用的，但它比上传一个更容易。我计划维护一个 32x32 网格，而不是（看起来是）来自该 tilesheet 的 16x16 网格

### 编辑

我现在在那里显示了一个 32x32 的 tilesheet，但悬停效果仍在破坏它，我不确定如何“知道”旧值是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T03:11:06.253

问题是你没有在'mouseout'之后重绘你的瓷砖。您要么需要在移出单个图块后重新绘制它，但这可能会变得棘手，因为事情变得更加复杂或更好，但在鼠标移动时执行以下操作。

*   清除画布
*   绘制网格
*   画你的瓷砖
*   然后突出显示/清除该单元格。

如果您最终拥有任何类型的动画，这就是无论如何都会使用的过程，否则当某些东西从一个瓷砖移动到另一个瓷砖时，它会留下鬼影。

# jquery - 如何在我的表单操作中使用 jQuery .ajax

> ID：10041496
> 
> 赞同：10
> 
> 时间：2012-04-06T09:19:30.190
> 
> 标签：jquery

我更改了 php 和 jQuery 的编码风格，但我的注册

```
$("#reg_form_company").bind("submit", function() {
    $.fancybox.showActivity();
    $.ajax({
            type     : "POST",
            cache    : false,
            url      : $(this).attr('action'),
            data     : $(this).serializeArray(),
            success  : function(data) {
                $(".printArea").empty().append(data).css('visibility','visible');
            }
    });
    return false;
}); 
```

那么这是我的表格

```
<form id="reg_form_company" action="index.php?module=register&actionregister" method="post" >
      <input>[...]</input>
</form> 
```

然后单击“提交”按钮后，它不起作用，我认为有人可以帮助我解决这个问题，因为 $.ajax 可能会混淆 POST（用于输入）和 GET（用于“行动”形式）

感谢您的帮助，如果需要，您还可以修改整个 jQuery 代码。

抱歉大家不包括#reg_form_company 和fancybox

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-06T09:27:50.890

你需要做这样的事情：http: [//jsfiddle.net/xSJTs/2/](http://jsfiddle.net/xSJTs/2/)

```
$('form').on('submit',function(e){
    e.preventDefault();
    $.ajax({
        type     : "POST",
        cache    : false,
        url      : $(this).attr('action'),
        data     : $(this).serialize(),
        success  : function(data) {
            $(".printArea").empty().append(data).css('visibility','visible');
        }
    });

}); 
```

您必须使用`serialize()`而不是`serializeArray()`. `serializeArray()`创建一个 JavaScript 对象，`serialize()`创建一个查询字符串。

序列化： http: [//api.jquery.com/serialize/](http://api.jquery.com/serialize/)

序列化数组：http: [//api.jquery.com/serializeArray/](http://api.jquery.com/serializeArray/)

基本上你等到表单提交然后你中断它（`e.preventDefault();`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T09:22:26.087

您必须拦截表单的单击/提交事件并参考如下所示的表单：

```
 $("#myForm").submit(function(){
    var $form = $(this);

    $.ajax({
     type     : "POST",
     cache    : false,
     url      : $form.attr('action'),
     data     : $form.serializeArray(),
     success  : function(data) {
         $(".printArea").empty().append(data).css('visibility','visible');
     }
    });
 }) 
```

并在您的表单中添加一个 id，例如：

```
<form id="myForm" action="index.php?module=register&actionregister" method="post" >
      <input>[...]</input>
</form> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-14T10:15:41.077

## 文件输入工作ajax

嗨，
其他答案对我**不起作用**，因为我需要传递**文件**输入并且这些不能“序列化”。

好的方法是通过它`FormData`并禁用它`processData`：

```
$('form').on('submit', function(e) {
    e.preventDefault();

    var formData = new FormData(this);

    $.ajax({
        type       : "POST",
        cache      : false,
        url        : $(this).attr('action'),
        data       : formData,
        success    : (data) => console.log('Data returned from server => ', data),
        contentType: false,
        processData: false
    })
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T09:26:22.603

您必须参考您的表格而不是`$(this)`

给你的表格一个 id 或 class ex ：

```
<form action="index.php?module=register&actionregister" method="post" id="MyForm">
      <input>[...]</input>
</form> 
```

在 JQuery 中：

```
$.ajax({
        type     : "POST",
        cache    : false,
        url      : $('#MyForm').attr('action'),
        data     : $('#MyForm').serializeArray(),
        success  : function(data) {
            $(".printArea").empty().append(data).css('visibility','visible');
        }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-08T19:33:17.700

```
 //This is still showing the cgi output of my script in the browser
 $('#myForm').submit(function()){
                 $('#myForm').preventDefault();
        $.ajax({
            type     : "POST",
            cache    : false,
            url      : $('#myForm').attr('action'),
            data     : $('#myForm').serialize(),
            success  : function(data) {
                $(".printArea").empty().append(data).css('visibility','visible');
            };

    <form id = "myForm" action="cgi-bin/matt/matt-test.cgi?module=register&actionregister" method ="post"> 
```

# javascript - 模板未触发事件的主干视图

> ID：10041497
> 
> 赞同：3
> 
> 时间：2012-04-06T09:19:39.830
> 
> 标签：javascript, events, templates, backbone.js

我的视图处理它的事件时遇到了一些问题。他们根本不开火。该视图具有来自模板的 html，如下所示：

```
<script type="text/template" id="intro-slide-template">
  <div class="slide intro" id="intro-slide">
    <a href="#" class="startpresentation" id="start-btn">
      <%= startpresentation %>
    </a>
  </div>
</script> 
```

到目前为止，一切都很好。视图代码本身如下所示：

```
 /* ********* Slide View  *********  */
    window.IntroSlideView = Backbone.View.extend({           
        initialize: function(){             
            this.template = _.template($("#intro-slide-template").html());          
        },  
        render: function(){     
            $(this.el).html(this.template(this.model.toJSON()));             
        },
        events: {
            "click #start-btn": "clickHandler"
        },
        clickHandler: function() {
            console.log("IntroSlideView     ::      clickHandler");
        }           
    }); 
```

这就是我将幻灯片呈现到主应用程序视图的方式：

```
/* ********* App View  *********  */
window.AppView = Backbone.View.extend({
    el: $("#content"),
    initialize: function(){
        _.bindAll(this, 'render');      

        //render 
        this.render();
    },
    render: function(){                     
        this.el.innerHTML = "";     
        var slide = this.model.get("currentSlide");
        slide.render();             
        this.el.innerHTML = slide.el.innerHTML;
    }   
}); 
```

该视图正在完美地呈现到屏幕上，并且可以正常工作。但是点击事件没有触发。

当我检查幻灯片视图对象时，我可以看到它确实包含带有正确 HTML 的 el 对象，包括必须触发单击事件的按钮。

当我记录视图的事件时，我看到它们已设置：

```
Object
click #start-btn: "clickHandler"
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:45:45.207

试试[这个模式](http://ricostacruz.com/backbone-patterns/#sub_views)

```
window.AppView = Backbone.View.extend({
  render: function() {
    this.slide = new window.IntroSlideView({ el: this.$(".slide") });

    // ...
  }
}); 
```

# c# - 在 MonoDroid 4.1 Java 绑定项目中绑定 OSMDroid 库

> ID：10041498
> 
> 赞同：0
> 
> 时间：2012-04-06T09:19:46.337
> 
> 标签：c#, android, xamarin.android

我刚刚安装了[MonoDroid](http://visualstudiomagazine.com/articles/2011/02/01/introducing-monodroid-intro.aspx/) alpha 4.1，我正在尝试使用 OSMDroid JAR 文件创建一个绑定库项目。[OSMDroid是一个开源地图视图实现，基本上是](http://code.google.com/p/osmdroid/)[谷歌地图地图](http://en.wikipedia.org/wiki/Google_Maps)视图的替代品。我按照[教程](http://docs.xamarin.com/android/tutorials/Binding_a_Java_Library_%28.jar%29 "教程")中的步骤操作，但只收到一条错误消息

> C:\Program Files (x86)\MSBuild\Novell\Xamarin.Android.Bindings.targets(170,5): error MSB6006: "java.exe" exited with code 1.

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:40:09.953

我能够编译项目，将以下 JAR 文件添加到项目中。

*   apache-mime4j-0.4.jar

*   httpmime-4.0-beta1.jar

*   osmdroid-third-party-3.0.7.jar

*   slf4j-android-1.5.8.jar

并在构建操作的属性中将它们设置为“ReferenceJar”。

要查看 Visual Studio 的正确输出，为了调试此问题，我还必须在 Visual Studio 选项（工具-选项-项目和解决方案-构建和运行）中将构建输出详细信息设置为正常，并将[MSBuild](http://en.wikipedia.org/wiki/MSBuild)项目构建输出设置为普通的）。

我在使用该库时仍然没有运气，但至少它可以编译！

# javascript - jQuery（函数）是做什么的

> ID：10041502
> 
> 赞同：1
> 
> 时间：2012-04-06T09:20:15.660
> 
> 标签：javascript, jquery

我正在阅读`javascript`网络应用程序，作者正在使用以下代码：

```
mod.load = function(func){
    $($.proxy(func, this));
}; 
```

有人可以帮我理解为什么返回函数在包装器`jQuery.proxy`内部。`jQuery`

这是否与以下内容相同：

```
mod.load = function(func){
    var temp = $.proxy(func, this);
    temp();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:25:11.307

它们不一样，但具有相同的效果。您的第二个示例直接执行返回的函数，而 jQuery(function) 将其绑定到 onload like `$(document).ready()`. mod.load 可能*是*onload 但是，所以这没有区别。

见[http://api.jquery.com/jQuery/#jQuery3](http://api.jquery.com/jQuery/#jQuery3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:26:23.650

使用函数参数调用[$()](http://api.jquery.com/jQuery/#jQuery3)等效于将[$(document).ready()](http://api.jquery.com/ready/)应用于该函数：它在调用之前等待 DOM 准备好。

因此，在您的第二个示例中，可能会在 DOM 准备好之前调用，具体取决于自身运行`temp()`的时刻。`mod.load()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T09:23:26.313

是一样的，只是简写。

# windows-7 - 安装不显示命令提示符

> ID：10041503
> 
> 赞同：4
> 
> 时间：2012-04-06T09:20:15.783
> 
> 标签：windows-7, installation, cmd, installshield-2008

我用 installshield 2008 做了一个安装程序。

主要问题是，通过 setup.exe 安装时，此过程中多次出现命令提示符。为了方便最终用户，我需要在安装过程中删除命令提示符。

我在以前的线程中读到我可以通过 vbscript 调用我的批处理文件作为解决方案，并且我尝试在 installshield 2008 中使用 vbscript 而不是我的批处理文件来通过 vbscript 间接运行我的批处理文件，它对我没有作为解决方案..

请告诉我，如果我使用 vbscript 来运行我的批处理文件，那么如何在 installshield 中包含这个 vbsript

或者，一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-29T01:33:10.413

当您可以通过 vbscript 自定义操作更好地执行批处理脚本时，为什么还要通过 vbscript 执行它呢？对我来说没有意义。通过创建应答文件以静默方式运行 setup.exe：

> 安装程序.exe /r

写入响应文件“C:\windows\setup.iss”。

> setup.exe /r /f1"C:\windows\temp\setup.iss"

写入文件 'C:\windows\temp\setup.iss' 然后您需要做的就是静默安装 setup.exe：

> setup.exe /s /f1"C:\windows\temp\setup.iss"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:01:53.433

您在 VBS 上走在正确的轨道上，但我认为它不需要那么复杂。

您所需要的只是一个 VBS 文件（我们称之为`hide.vbs`）。它包含`CreateObject("Wscript.Shell").Run """" & WScript.Arguments(0) & """", 0, False`.

要激活它，请输入命令`wscript.exe "hide.vbs" "file_path"`where`file_path`是您要启动的批处理文件的路径。

希望有帮助。

# blackberry - 在黑莓中创建自定义进度条

> ID：10041504
> 
> 赞同：0
> 
> 时间：2012-04-06T09:20:22.040
> 
> 标签：blackberry, java-me

所有，我想为黑莓触摸设备创建一个外观丰富的自定义进度条。我可以使用 GaugeField，但它不会给人丰富的外观。

这是我必须制作的样品原型。请建议我如何开始。任何样品或指导我的步骤。

![在此处输入图像描述](../Images/e56d4f8b03bd35209d7334bcb57191e7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T21:31:53.887

查看 RIM 的[“高级 UI 组件和管理器”](https://bdsc.webapps.blackberry.com/java/documentation/ww_java_uinavigation/Advanced_UI_components_and_managers_1970227_11.html)文档的“创建位图进度指示器”部分。

# c# - 错误 WiFi WP7 模拟器

> ID：10041507
> 
> 赞同：0
> 
> 时间：2012-04-06T09:20:50.917
> 
> 标签：c#, windows-phone-7

![错误 WiFi](../Images/6485a384c0e75b4a0a75ee3db7055edb.png)

当我尝试连接@ IP（本地）时出现此错误。它是一个套接字（tcp & udp）。我使用模拟器 如果 WP7 模拟器上有激活 WiFi 的代码？或者我可能会停用 WiFi 连接

这是我添加连接的所有代码都可以使用它

```
private void AddComputer_Click(object sender, RoutedEventArgs e)
    {
        IPAddress iPAddress;
        if (!IPAddress.TryParse(this.IPAddressTextBox.Text, out iPAddress))
        {
            MessageBox.Show("Error: Invalid IP Address is empty");
            return;
        }
        this.ipAddressToAdd = iPAddress;
        this.progressBar.IsIndeterminate = true;
        this.StatusTextBlock.Visibility=(Visibility)0;
        this.ContentPanel.Visibility=(Visibility)1;
        ThreadPool.QueueUserWorkItem(new WaitCallback(this.AddComputerThread), new NetworkHandler.DiscoveredServer("", this.ipAddressToAdd, false, "", this.checkBoxPassword.IsChecked.Value, this.passwordBox1.Password, NetworkHandler.NetworkCategory.Unknown));
    }
    private void AddComputerThread(object obj)
    {
        NetworkHandler.DiscoveredServer info = (NetworkHandler.DiscoveredServer)obj;
        NetworkHandlerCommon.ConnectResult connectResult = ConnectionHandler.ConnectToComputer(info, true, MyApp.MajorVersion, MyApp.MinorVersion);
        base.Dispatcher.BeginInvoke(delegate
        {
            this.AddComputerDispatcher(connectResult);
        }
        );
    }
    private void AddComputerDispatcher(NetworkHandlerCommon.ConnectResult connectResult)
    {
        this.progressBar.IsIndeterminate = false;
        this.StatusTextBlock.Visibility=(Visibility)1;
        this.ContentPanel.Visibility=(Visibility)0;
        if (connectResult == NetworkHandlerCommon.ConnectResult.Connected)
        {
            base.NavigationService.Navigate(MyApp.HomePage());
            return;
        }
        this.ShowConnectError(connectResult);
    }
    private void ShowConnectError(NetworkHandlerCommon.ConnectResult result)
    {
        switch (result)
        {
            case NetworkHandlerCommon.ConnectResult.UpdateServer:
                ErrorHandler.ShowErrorMessage(1003);
                return;

            case NetworkHandlerCommon.ConnectResult.UpdateClient:
                ErrorHandler.ShowErrorMessage(1002);
                return;

            case NetworkHandlerCommon.ConnectResult.Failed:
                ErrorHandler.ShowErrorMessage(1005);
                return;

            case NetworkHandlerCommon.ConnectResult.AuthenticationFailure:
                MessageBox.Show("Error: Password is incorrect.");
                return;

            case NetworkHandlerCommon.ConnectResult.NetworkNotConnected:
                MainPage.ShowNetworkDisconnectedMessage();
                return;

            default:
                return;
        }
    } 
```

并且这个类显示了如果为真则会发生的错误

```
public class ErrorHandler
{
    private class ErrorInfo
    {
        public string ErrorMessage
        {
            get;
            set;
        }
        public string ErrorURL
        {
            get;
            set;
        }
        public ErrorInfo(string errorMessage, string errorURL)
        {
            this.ErrorMessage = errorMessage;
            this.ErrorURL = errorURL;
        }
    }
    private static Dictionary<int, ErrorHandler.ErrorInfo> errorMapping;
    static ErrorHandler()
    {
        ErrorHandler.errorMapping = new Dictionary<int, ErrorHandler.ErrorInfo>();
        ErrorHandler.errorMapping.Add(1000, new ErrorHandler.ErrorInfo("Error 1000: We have detected that WiFi is NOT turned-on at your phone.", "http://wp.me/p1ZVRQ-w"));
        ErrorHandler.errorMapping.Add(1001, new ErrorHandler.ErrorInfo("Error 1001: Password is incorrect.", "http://wp.me/p1ZVRQ-E"));
        ErrorHandler.errorMapping.Add(1002, new ErrorHandler.ErrorInfo("Error 1002: Older version of application is running. Update application from Marketplace.", "http://wp.me/p1ZVRQ-H"));
        ErrorHandler.errorMapping.Add(1003, new ErrorHandler.ErrorInfo("Error 1003: Older version of PC Remote server is running at PC", "http://wp.me/p1ZVRQ-K"));
        ErrorHandler.errorMapping.Add(1004, new ErrorHandler.ErrorInfo("Error 1004: Computer is connected to a public network", "http://wp.me/p1ZVRQ-d"));
        ErrorHandler.errorMapping.Add(1005, new ErrorHandler.ErrorInfo("Error 1005: Failed connecting to your PC", "http://wp.me/p1ZVRQ-j"));
        ErrorHandler.errorMapping.Add(1006, new ErrorHandler.ErrorInfo("Error 1006: Could not wake up your computer", "http://wp.me/p1ZVRQ-S"));
        ErrorHandler.errorMapping.Add(1007, new ErrorHandler.ErrorInfo("Error 1007: Unable to resume the app.", "http://wp.me/p1ZVRQ-W"));
    }
    public static void ShowErrorMessage(int errorId)
    {
        if (ErrorHandler.errorMapping.ContainsKey(errorId))
        {
            ErrorHandler.ErrorInfo errorInfo = ErrorHandler.errorMapping[errorId];
            string text = errorInfo.ErrorMessage + Environment.NewLine + Environment.NewLine + "Need help troubleshooting this? ";
            if (MessageBox.Show(text, "Error", MessageBoxButton.OKCancel).Equals(1))
            {
                MyApp.GoToWebURL(errorInfo.ErrorURL);
            }
        }
    }
} 
```

# php - 如何在 PHP 中使用 preg_split() 提取单词和短语？

> ID：10041508
> 
> 赞同：1
> 
> 时间：2012-04-06T09:21:03.887
> 
> 标签：php, regex, preg-split

我需要提取文本中的单词和短语。例如，文本是：

你好世界，“日本和中国”，美国人，亚洲人，“犹太人和基督徒”，半天主教徒，耶和华见证人

使用 preg_split()，它应该返回以下内容：

1.  你好
2.  世界
3.  日本和中国
4.  美国人
5.  亚洲人
6.  犹太人和基督徒
7.  和
8.  半天主教徒
9.  约瓦的
10.  证人

我需要知道 RegEx 才能工作（或者有可能吗？）。请注意规则，短语用引号 (") 括起来。字母数字、单引号 (') 和破折号 (-) 被视为单词的一部分（这就是为什么“Jehova's”和“semi-catholics”被视为一个单词的原因），以空格分隔的其余符号被视为单个单词，而其他未提及的符号则被忽略

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:54:11.163

实际上，您可以像这样使用 str_getcsv 非常简单地做到这一点：

```
// replace any comma or space by a singe space
$str = preg_replace('/(,+[ ]+)|([ ]+)/', ' ', $str);
// treat the input as CSV, the delimiters being spaces and enclusures double quotes
print_r(str_getcsv($str, ' ', '"')); 
```

输出：

```
Array
(
    [0] => Hello
    [1] => World
    [2] => Japan and China
    [3] => Americans
    [4] => Asians
    [5] => Jews and Christians
    [6] => and
    [7] => semi-catholics
    [8] => Jehovah's
    [9] => witnesses
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:14:41.477

如果您的示例字符串是典型的，请从处理单引号和双引号开始。我在这里使用了[heredoc 语法](http://www.php.net/manual/de/language.types.string.php)来使字符串可以安全使用。

```
$string = <<<TEST
Hello World, "Japan and China", Americans, Asians, "Jews and Christians", and semi-catholics, Jehovah's witnesses
TEST;
$safe_string = addslashes($string);//make the string safe to work with
$pieces = explode(",",$safe_string);//break into pieces on comma
$words_and_phrases = array();//initiate new array

foreach($pieces as $piece)://begin working with the pieces
    $piece = trim($piece);//a little clean up
    if(strpos($piece,'"'))://this is a phrase
        $words_and_phrases[] = str_replace('"','',stripslashes($piece));
    else://else, these are words
        $words = explode(" ",stripslashes($piece));
        $words_and_phrases = array_merge($words_and_phrases, $words);
    endif;
endforeach;
print_r($words_and_phrases); 
```

注意：您也可以使用 preg_replace，但对于这样的事情似乎有点过分了。

# mysql - Mysql 规范化

> ID：10041511
> 
> 赞同：3
> 
> 时间：2012-04-06T09:21:27.507
> 
> 标签：mysql, normalization

我有三张桌子

```
USER TABLE
userid  username
1       alpha

Email TABLE
id  userid email
1   1      alpha1@test.com
2   1      alpha2@test.com
3   1      alpha3@test.com

Phonenumber TABLE
id  userid  phonenumber
1   1       123456
2   1       123457
3   1       123458 
```

如何使用单个查询获得以下结果

```
userid username email           phonenumber
1      alpha    alpha1@test.com 123456
1      alpha    alpha2@test.com 123457
1      alpha    alpha3@test.com 123458 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T12:22:43.873

让我们从一个完全没有标准化的数据版本开始，然后添加一些额外的、合理的数据，以便我们可以在这里看到标准化的工作原理。（假设每个人至少有一个电子邮件地址和一个电话号码，只是为了避免谈论空值。）

```
userid  username  email             phonenumber
1       Alpha     alpha1@test.com   123456
1       Alpha     alpha2@test.com   123457
1       Alpha     alpha3@test.com   123458
2       Beta      beta1@test.com    234567
2       Beta      beta2@test.com    234567      (2 email addresses, 1 phone)
3       Gamma     gamma1@test.com   234678
3       Gamma     gamma1@test.com   234679      (1 email address, 2 phones)
4       Alpha     alpha32@test.com  345678      (2 people, #1 and #4, with same name) 
```

如果您仔细查看该数据，您会发现**唯一的键是 {email, phonenumber}**。

这就是为什么您无法仅获得三行的原因——该键在您的表中无处可寻。这就是@ontrack 所说的“您的表格在电子邮件和电话号码之间没有唯一的关系”。

遵循任何数据库教科书中确定候选键的算法会给你同样的结果。AFAIK，*每*本数据库理论教科书都至少有一种用于确定候选键的算法。

显然，如果您有一个以 {email, phonenumber} 为键的表，则用户 ID 1 只会得到 3 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:48:30.233

我无法回答您的问题，但您考虑过使用`group_concat()`吗？

```
SELECT userid, username, GROUP_CONCAT(DISTINCT email), GROUP_CONCAT(DISTINCT phonenumber) 
FROM Email 
LEFT JOIN Phonenumber USING (userid) 
LEFT JOIN User USING (userid)
GROUP BY userid 
```

它应该给你这个结果：

```
userid username  email                                           phonenumber
1      alpha     alpha1@test.com,alpha2@test.com,alpha3@test.com 123456,123457,123458 
```

也许这会解决你原来的问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T09:24:52.027

简单地。通过**[加入](http://dev.mysql.com/doc/refman/5.0/en/join.html)**您的表格。

试试下面：

```
SELECT u.userid,u.username,e.email,p.phonenumber 
FROM User as u LEFT JOIN Email as e on u.userid=e.userid
LEFT JOIN Phonenumber as p on u.userid=p.userid 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-06T09:30:42.117

> SELECT userid, username, email, phonenumber FROM Email LEFT JOIN Phonenumber USING (userid) LEFT JOIN User USING (userid)

# symfony - INTERVAL 1 MONTH 不使用 symfony2 原则？

> ID：10041513
> 
> 赞同：8
> 
> 时间：2012-04-06T09:21:52.117
> 
> 标签：symfony, doctrine, doctrine-orm

我被困在这里，我花了最后 2 天解决这个问题，但失败了。我正在我的存储库中编写一个查询以获取当月的条目。这是我的查询：-

```
$this->getEntityManager()
 ->createQuery('SELECT count(a) FROM CollegeStudentBundle:StudentAttendance a where a.student_id='.$id.'
 and a.date > DATE_SUB(CURRENT_TIMESTAMP(),INTERVAL 1 MONTH)') 
```

当我尝试运行它时，它给了我一个错误

```
[Syntax Error] line 0, col 133: Error: Expected Doctrine\ORM\Query\Lexer::T_COMMA, got '1' 
```

即使我尝试[了这件事](https://stackoverflow.com/questions/7672125/how-to-make-doctrine-expression-doctrine-1-2-try-to-get-last-7-days)，但并没有帮助我。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-06T11:11:12.963

您应该使用参数绑定：

```
$query = $em->createQuery('SELECT count(a) FROM CollegeStudentBundle:StudentAttendance a where a.student_id = :id and a.date > :date');
$query->setParameter('id', $id);
$query->setParameter('date', new \DateTime('-1 month')); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-06T11:09:08.890

您必须记住，DQL 不是 SQL。该错误来自 Doctrine 的 Lexer，而不是来自 MySQL。DQL 不支持 INTERVAL（请参阅[支持的函数列表](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#dql-functions)）。

阅读更多关于[添加您自己的函数](http://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/cookbook/dql-user-defined-functions.html)，特别是在此处添加带有 INTERVAL 支持的 DATE_ADD：http: [//doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/cookbook/dql-user-defined-functions.html#添加日期](http://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/cookbook/dql-user-defined-functions.html#date-add)

# c# - 使用 C# 在数组中进行松散的字符串搜索

> ID：10041521
> 
> 赞同：0
> 
> 时间：2012-04-06T09:22:21.450
> 
> 标签：c#, search, word

假设我们有一个

```
string[] array = {"telekinesis", "laureate", "Allequalsfive", "Indulgence"}; 
```

我们需要在这个数组中找到一个单词

通常我们会做以下事情：（或使用任何类似的方法来查找字符串）

```
bool result = array.Contains("laureate"); // returns true 
```

就我而言，我正在搜索的单词可能有错误（如标题所示）。

例如，我无法区分字母“I”（大“i”）和“l”（小“L”）和“1”（第一）之间的区别。

有什么办法可以找到诸如**“Allequalsfive”或“A11equalsfive”或“AIIequalsfive”之类**的词？（松散搜索）通常结果将是“假”。

如果只有我可以指定忽略某些字母..（序列是常数，其他字母是常数）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:26:33.993

您可以使用`Contains`需要[`IEqualityComparer<TSource>`](http://msdn.microsoft.com/en-us/library/bb339118.aspx).

实现你自己的相等比较器，忽略你想要的字母，然后离开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T09:52:08.657

借助扩展方法和[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)算法

```
var array = new string[]{ "telekinesis", "laureate", 
                          "Allequalsfive", "Indulgence" };

bool b = array.LooseContains("A11equalsfive", 2); //returns true 
```

-

```
public static class UsefulExtensions
{
    public static bool LooseContains(this IEnumerable<string> list, string word,int distance)
    {
        foreach (var s in list)
            if (s.LevenshteinDistance(word) <= distance) return true;
        return false;
    }

    //
    //http://www.merriampark.com/ldcsharp.htm
    //
    public static int LevenshteinDistance(this string s, string t)
    {
        int n = s.Length;
        int m = t.Length;
        int[,] d = new int[n + 1, m + 1];

        // Step 1
        if (n == 0)
            return m;

        if (m == 0)
            return n;

        // Step 2
        for (int i = 0; i <= n; d[i, 0] = i++){}

        for (int j = 0; j <= m; d[0, j] = j++){}

        // Step 3
        for (int i = 1; i <= n; i++)
        {
            //Step 4
            for (int j = 1; j <= m; j++)
            {
                // Step 5
                int cost = (char.ToUpperInvariant(t[j - 1]) == char.ToUpperInvariant(s[i - 1])) ? 0 : 1;

                // Step 6
                d[i, j] = Math.Min(
                    Math.Min(d[i - 1, j] + 1, d[i, j - 1] + 1),
                    d[i - 1, j - 1] + cost);
            }
        }
        // Step 7
        return d[n, m];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T09:41:51.397

如果您只需要知道该词是否松散地包含在您的数组中，那么您可以在搜索词和数组中“清理”您想要忽略的字母（例如将“1”替换为“l”）：

```
Func<string, string> clean = x => x.ToLower().Replace('1', 'l');
var array = (new string[] { "telekinesis", "laureate", "A11equalsfive", "Indulgence" }).Select(x => clean(x));          
bool result = array.Contains(clean("allequalsfive")); 
```

否则，您可以查找 Where() LINQ 关键字，它允许您根据指定的函数过滤数组。

# .net - 在 sql server 或 web server 上计算聚合？

> ID：10041522
> 
> 赞同：0
> 
> 时间：2012-04-06T09:22:21.577
> 
> 标签：.net, sql-server-2008, tsql

我有这些桌子（一些足球桌）

1.  联赛：ID、名称
2.  团队：ID、名称、IDLeague
3.  阶段：Id、Number、IdLeague
4.  匹配项：Id、IdStage、日期、IdTeam1、IdTeam2、Team1Score、Team2Score

我的目标是计算某个联赛的排名。

位置、团队名称、获胜、平局、失败、进球得分、进球数、积分（3 * 胜 + 平）。

如果两队得分相同，则有更多可能性（A队和B队）

1.  如果有 A 队与 B 队的比赛，但没有 B 队与 A 队的比赛，则净胜球差 (GoalsScored - GoalsConceded ) 较大的球队处于优势
2.  如果他们在联赛中进行了两场比赛，那么在这2场比赛中得分更多的球队是优势，如果他们在这2场比赛中获得相同数量的积分，那么在这2场比赛中净胜球更好的球队是优势有优势
3.  如果与 2) 的差异相同，则在这 2 场直接比赛中进球多的球队处于优势
4.  如果 3) 无法决定，联赛中净胜球大的球队获胜
5.  如果 4) 无法决定，联赛进球多的球队获胜
6.  如果 5) 不能决定，..我不知道 :)

联赛表：将有 3-4 行
团队表：将有 60-80 行（20 支球队/联赛） 阶段表：将有 114-152 行（38 阶段/联赛）
比赛表：将有 1149- 1520 行（10 场比赛/阶段）

1.  是在 sql server 上为 1 个联赛进行所有聚合，还是只从该联赛中选择所有比赛并在服务器上进行所有计算？

2.  可以用 1 选择计算该排名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:35:41.920

我看到您的问题不是关于如何进行所有这些计算，而是关于在哪里进行，SQL Server 或“服务器”（我相信您的意思是，选择数据并在您的应用程序上进行计算，对吧？ )

假设我理解正确，我可以告诉你，这取决于你如何实现它。SQL Server 非常擅长进行聚合计算（使用 sum 分组等），但在循环方面不是很好（例如使用游标）。

因此，如果您可以构建查询以获得结果，请在 SQL 上进行。如果您需要执行多个操作，例如“对于结果集上的每一行，运行其他查询，更新变量等（这意味着在 SQL 上使用游标），最好将结果集返回到您的应用程序并执行在那里循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:38:13.297

我假设有联赛外的比赛。

首先，如果您有奇数支球队或下雨，并且并非所有球队都参加相同数量的比赛，那么积分不是苹果对苹果。

为什么对待 1 与 2 不同？正面交锋然后只说大多数胜利，因为这与积分相同。如果有平局，他们都获得了平局。

关于 2\. in League 是多余的，就好像这是一个联赛排名，他们互相比赛然后他们就在同一个联赛中。

您可以将 1-3 替换为 1) 正面交锋 2) 正面交锋。

我的建议在哪里

```
0   total points
1   league points
2   head to head wins
3   head to head goals
4   league goals
5   total goals 
```

我会把总目标放在最后，这样 A 队就没有动力在 C 队上完成目标。

我不认为这是一个选择，因为行数不同。
头对头将需要单独选择。那些是小桌子。您可以使用 Access 执行此操作。

如果有超过 2 种方式的领带，头对头可能会更复杂。您可以通过简单地不结束一个赛季来确保比赛总数相等，除非总比赛数相同。如果您要确保每支球队与另一支球队交手的次数相同，那么联赛规模必须是 2 次方（例如 16）。你必须考虑到球队退出或被停赛的可能性。确保对称时间表几乎是不可能的，因此需要有一个试图处理它的排名。在三路领带中，您可以有两个分开的，第三个将两者绑在一起。在这种情况下，该分裂的两个将获得更多的胜利 1，但不应在两个平局的情况下排名高于第三个。所以我会用 +1 赢 0 平 -1 输的决胜局点系统来修改 2。并且为了处理可能的其他不对称，我将修改 3 以头对头的目标差异总和。在这些线上使用 4 和 5 的总和目标差。

# java - 如何在 netbeans 7.0 中添加 CLIPC 库

> ID：10041531
> 
> 赞同：0
> 
> 时间：2012-04-06T09:22:40.330
> 
> 标签：java, netbeans, netbeans-7, interprocess

CLIPC 是 Java 中用于进程间通信的库。我已经从[https://sourceforge.net/project/platformdownload.php?group_id=255796下载了它](https://sourceforge.net/project/platformdownload.php?group_id=255796)

下载的 zip 文件中有 3 个文件。

1.  剪辑.dll，
2.  clipc.jar 和
3.  libclipc.so

现在，如果我尝试在 Netbeans 库部分将提取的文件夹或 zip 文件添加到我的项目中，则 Netbeans 无法识别 CLIPC 库中的包。

另一方面，如果我只是添加 CLIPC.jar 文件，那么 Netbeans 会识别我输入的代码。但是当我尝试编译它时，我得到以下异常

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no clipc in java.library.path
at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1738)
at java.lang.Runtime.loadLibrary0(Runtime.java:823)
at java.lang.System.loadLibrary(System.java:1028)
at com.lts.ipc.IPCPackage.basicInitializePackage(Unknown Source)
at com.lts.ipc.IPCPackage.initializePackage(Unknown Source)
at com.lts.ipc.semaphore.SemaphoreNative.<clinit>(Unknown Source)
at com.lts.ipc.semaphore.Semaphore.connect(Unknown Source)
at com.lts.ipc.semaphore.Semaphore.<init>(Unknown Source)
at ipc.IPC.main(IPC.java:15)

Java Result: 1 
```

这可能是因为 clipc.jar 文件不能与 clipc.dll 文件映射。

那么任何人都可以建议我应该将那些clipc.dll 和libclipc.so 文件放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T06:26:28.273

找到了我自己的问题的答案

-Djava.library.path="c:\path\to\the\dir\that\contains\the\dll"

将上述行放在“项目 -> 属性 -> 运行 -> VM 选项”字段中。

# java - Android如何发送Flash（通知）短信？

> ID：10041539
> 
> 赞同：3
> 
> 时间：2012-04-06T09:23:34.563
> 
> 标签：java, android, message

我想通过这个将短信作为闪存（通知）短信发送，该消息应立即显示在收件人移动屏幕上，但不存储。

请告诉我我该怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-06T10:49:02.063

Wap Push over SMS 是一种特殊编码的 SMS 消息。消息的内容必须以特殊的 XML 形式进行编码。

更多详情谷歌 wap 推送短信。

# image - 防止会话过期？

> ID：10041542
> 
> 赞同：2
> 
> 时间：2012-04-06T09:23:59.623
> 
> 标签：image, cookies, session-cookies, php

我们办公室里有一个简单的闭路电视系统，可以显示我们每个安全摄像头的实时图像。CCTV 系统没有 API 或任何提取实时图像的方法。但是，您可以通过创建带有图像链接的基本 HTML 页面从另一个浏览器查看图像：

```
http://192.168.1.6/media/getimage_sid.php?sid=a09c4ecb72bade3802e7bf563b0d0bd6&card=1&camera=1&width=384&height=288 
```

这非常有效，直到会话过期和/或超时。我不太了解 cookie 和会话，但是当我在谷歌浏览器中检查页面时，我注意到以下 cookie：

```
Name       Value                             Domain       Path   Expires   Size
PHPSESSID  a09c4ecb72bade3802e7bf563b0d0bd6  192.168.1.6  /      Session   41 
```

还有一个 HTTP 列和一个 Secure 列，但都是空的。

我想弄清楚的是，如何使该 cookie 保持活动状态或触发它以相同的值重新创建？我假设登录系统的 rake 任务不起作用，因为这会每次都重置会话 ID。

Intranet 是一个 Rails 应用程序，因此一种方法是创建一个脚本，登录并将当前会话 ID 存储到数据库中，然后将最后记录的会话 ID 从数据库中放入 IMG 链接中。虽然有点远，但我希望有更好的解决方案。

我已经阅读了几篇[文章](http://xpapad.wordpress.com/2010/06/19/preventing-session-expiration-with-ajax/)，展示了如何使用 AJAX 执行此操作，但这似乎依赖于一直在查看的 Intranet。如果周末没有人查看 Intranet，我需要它来工作。

这个项目是为了让我们可以在我们的 Intranet 上放几个实时（当页面刷新时！）图像，这样我们就不必不断去 CCTV 系统，登录并找到合适的摄像头来查看谁在车库门等

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T22:30:03.460

这有点小技巧，但我制作了一个小脚本来提取最新的会话 ID，然后将其放入图像链接中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:56:35.377

一种随机的不同方法：以下 URL 是否获得了正确的图像，而不必担心会话 ID？

```
 http://192.168.1.6/media/getimage_sid.php?card=1&camera=1&width=384&height=288 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T20:24:54.547

cookie 中使用的会话 ID 似乎是 PHP 生成的。

如果您“通知”服务器您仍然在线，我认为会话 ID 不会过时。¹ 您应该尝试`Cookie:`在 HTTP 请求标头中指定。通过 URL 指定 SID 可能不足以向服务器表明您实际在使用它。²

如果您的网页直接获取图像（即您`<img src="http://192.168.1.6/...">`在 HTML 页面中有一个），您可能会像这样工作：

*   `XMLHttpRequest`向返回会话 ID 的 URL发出 AJAX 请求 ( )。
*   该页面上对服务器的任何后续请求都应自动将会话包含在标头中。³

否则，如果您无法指定`Cookie:`标头，则可以选择延长会话过时之前的时间。如果您可以访问托管 PHP 接口 ( `192.168.1.6`) 的计算机，那么您可以配置 PHP 来执行此操作（ `php.ini`我相信通过配置文件）。有关会话配置的信息可[在此处](http://www.php.net/manual/en/session.configuration.php)获得，特别是这些[`gc-maxlifetime`](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)选项似乎很有用：

> `session.gc_maxlifetime`指定数据将被视为“垃圾”并可能被清理的秒数。垃圾收集可能会在会话开始期间发生（取决于`session.gc_probability`和`session.gc_divisor`）。

或者，如果上述方法都不吸引您，那么您通过获取 ( `GET`) 页面来获取有效的新会话 ID 的解决方案似乎合乎逻辑且很好。您可以通过测量会话 ID 过时需要多长时间并仅在该时间间隔获取新的会话 ID 来优化这一点。

1 我为此寻找有效的参考，但找不到。

2 特别是 PHP`PHPSESSID=`在 URL 中使用了一个标记，而在您的示例中它看起来像`sid=`. 我认为，从安全角度来看，它通常也被认为是不好的做法（[本文](http://shh.thathost.com/secadv/2003-05-11-php.txt)解释了它如何用于 XSS），因为您在 URL 中公开了用户信息，尽管我认为这在这种情况下几乎没有影响

3 根据方法[的](http://www.w3.org/TR/XMLHttpRequest/#the-send-method)[XMLHttpRequest 规范`send()`](http://www.w3.org/TR/XMLHttpRequest/#the-send-method)：

> 如果用户代理支持 HTTP 状态管理，它应该保持、丢弃和发送 cookie

# css - css - 为 IE 和 FF 嵌入字体

> ID：10041543
> 
> 赞同：2
> 
> 时间：2012-04-06T09:23:59.793
> 
> 标签：css, font-face

我正在尝试嵌入字体，问题是它只显示在 Firefox 中，但不显示在 Internet Explorer 中。

```
@font-face {
font-family: capture_it;
src: url('fonts/Capture_it.eot');
src: local('Comfortaa_it'),
    url('fonts/Capture_it.ttf') format('truetype'); 
} 
```

非常感谢任何帮助。

谢谢，

安内

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-06T12:02:38.463

字体语法很棘手，尤其是在 IE 中。请使用我们在这里开发的，它是跨浏览器测试的。[http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)

它看起来像这样：

```
@font-face {
    font-family: 'MyWebFont';
    src: url('webfont.eot'); /* IE9 Compat Modes */
    src: url('webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('webfont.woff') format('woff'), /* Modern Browsers */
         url('webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('webfont.svg#svgFontName') format('svg'); /* Legacy iOS */
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-06T09:26:51.683

不同的浏览器支持不同的字体格式。[您可以使用http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)生成所有格式以获得最佳跨浏览器支持。

以下来自上面包含的 url 上的表格：

**TTF**：原始 TrueType 文件，旨在在屏幕上看起来不错。

**EOT Lite**：仅 Internet Explorer 支持 EOT。此 EOT 类型未压缩，文件大小与 TTF 相同。

**EOT 压缩**：EOT 压缩与 LZ 压缩。文件大小通常小于 WOFF。

**WOFF**：跨浏览器，使用 gzip 压缩的纯网络字体格式。IE9+、FF3.6+、Chrome 5+

**SVG**：这是 4.2 版之前 iOS 设备所需的 XML 格式。

**SVGZ**：这是 SVG 的压缩版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T10:16:55.300

不完全但接近：

```
<style type="text/css">
@font-face {
 font-family: MyWebFont;
 src: url("font.eot") /* EOT file for IE (tested with ie8 and ie9)*/
}
@font-face {
 font-family: MyWebFont;
 src: url("font.ttf") /* TTF file for CSS3 browsers */
}
</style> 
```

并从以下位置制作eot文件：[http ://www.kirsle.net/wizards/ttf2eot.cgi](http://www.kirsle.net/wizards/ttf2eot.cgi)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T09:31:22.337

我个人会使用谷歌字体。如果您能找到一个与您想要使用的字体足够接近的字体，那么它们就是一种非常简单、快速且跨浏览器的字体解决方案。从 Cufon 迁移到 Google Fonts 是一个绝妙的主意。

非常值得一看 - [http://www.google.com/webfonts#ChoosePlace:select](http://www.google.com/webfonts#ChoosePlace:select)

# c# - 如何在 Windows Phone 中实现此功能

> ID：10041545
> 
> 赞同：-4
> 
> 时间：2012-04-06T09:24:03.350
> 
> 标签：c#, objective-c, windows-phone-7

我如何在 wp7 中移植这组代码

```
-(NSString *) timeSincePosted:(NSString *)ad_date {
if (!ad_date || ([ad_date compare:@""] == NSOrderedSame) || ([ad_date rangeOfString:@"-"].location == NSNotFound))
    return @"";

// date format
//2010-04-22,  5:27PM EDT
NSDateFormatter *dateFormatter_CL = [[[NSDateFormatter alloc] init] autorelease];
NSLocale *enUSPOSIXLocale = [[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"] autorelease];
[dateFormatter_CL setLocale:enUSPOSIXLocale];
[dateFormatter_CL setDateFormat:@"yyyy-MM-dd, h:mma zzz"]; 
NSDate *CL_adDate = [dateFormatter_CL dateFromString: ad_date];

// Time since now
NSTimeInterval deltaT = -[CL_adDate timeIntervalSinceNow];
int deltaMin = deltaT/60;
int deltaHr = deltaMin/60;
int deltaDay = deltaHr/24;

if (deltaMin < 1) return [NSString stringWithString:@"0 mins"];
if (deltaMin == 1) return [NSString stringWithString:@"1 min"];
if (deltaMin < 60) return [NSString stringWithFormat:@"%d mins", deltaMin];
if (deltaHr <= 1) return [NSString stringWithString:@"1 hr"];
if (deltaHr < 24) return [NSString stringWithFormat:@"%d hrs", deltaHr];
if (deltaDay < 2) return [NSString stringWithString:@"1 day ago"];
return [NSString stringWithFormat:@"%d days ago", deltaDay];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:02:12.550

我在这里有点绕线飞行，但我假设你想要类似的东西：

```
 /// <summary>
    /// Returns a string approximation of the time since the specified time.
    /// </summary>
    /// <param name="adDate">The ad date.</param>
    /// <returns></returns>
    public static string TimeSincePosted(string adDate)
    {
        return TimeSincePosted(DateTime.ParseExact(adDate, "\D\a\t\e: yyyy-MM-dd, hh:mmtt K", CultureInfo.CurrentUICulture));
    }

    /// <summary>
    /// Returns a string approximation of the time since the specified time.
    /// </summary>
    /// <param name="adDate">The ad date.</param>
    /// <returns></returns>
    public static string TimeSincePosted(DateTime adDate)
    {
        TimeSpan delta = DateTime.Now - adDate;

        if( delta.TotalDays > 1 )
        {
            return string.Format("{0} days ago", delta.TotalDays);
        }
        else if( delta.TotalDays == 1)
        {
            return "1 day ago";
        }
        else if( delta.TotalHours > 1)
        {
            return string.Format("{0} hrs", delta.TotalHours);
        }
        else if( delta.TotalHours == 1)
        {
            return "1 hr";
        }
        else if( delta.TotalMinutes > 1)
        {
            return string.Format("{0} mins", delta.TotalMinutes);
        }
        else if( delta.TotalMinutes == 1)
        {
            return "1 min";
        }
        else
        {
            return "0 mins";
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:07:08.740

Objective C 代码首先从字符串中解析日期和时间，然后将其转换为易于阅读的“1 天前”。

虽然 Rowland Shaw 的代码很好地解决了第二部分，但它无法解析日期/时间字符串，因为 C# 不支持像“CDT”这样的时区名称。为了解决这个问题，您应该查看[https://stackoverflow.com/a/284785/413337](https://stackoverflow.com/a/284785/413337)`ConvertZoneToLocalDifferential`中的方法。该方法对日期/时间字符串进行预处理，以便它可以被 C# 解析。

# scala - `val (A) = (3)` 是正确的，但是 `val (A,B)=(2,3)` 不能编译，为什么？

> ID：10041546
> 
> 赞同：7
> 
> 时间：2012-04-06T09:24:03.633
> 
> 标签：scala, pattern-matching

```
val A = 3
val (A) = (3) 
```

两者都正确。但：

```
val (A,B) = (2,3) 
```

无法编译：

```
scala> val (A,B) = (2,3)
<console>:7: error: not found: value A
       val (A,B) = (2,3)
            ^
<console>:7: error: not found: value B
       val (A,B) = (2,3)
              ^ 
```

为什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-06T09:32:07.843

在第二个代码片段中，它使用模式匹配来进行评估。

它被翻译成以下代码：

```
val Tuple(A, B) = Tuple2(2,3) 
```

当 Scala 进行模式匹配时，模式中以大写字母开头的变量被认为是一个常量值（或单例对象），因此`val (a, b) = (2, 3)`有效但不是`val (A, B) = (2, 3)`.

顺便说一句，您的第一个代码片段不使用模式匹配，它只是一个普通的变量赋值。

如果您`Tuple1`明确使用，它将有相同的错误。

```
scala> val Tuple1(Z) = Tuple1(3)
<console>:7: error: not found: value Z
       val Tuple1(Z) = Tuple1(3) 
```

这是一些有趣的例子：

```
scala> val A = 10
A: Int = 10

scala> val B = 20
B: Int = 20

scala> val (A, x) = (10, 20)
x: Int = 20

scala> val (A, x) = (10, 30)
x: Int = 30

scala> val (A, x) = (20, 20)
scala.MatchError: (20,20) (of class scala.Tuple2$mcII$sp)
    at .<init>(<console>:9)
    at .<clinit>(<console>) 
```

# testing - 如何验证字段是文本框还是文本区域？

> ID：10041547
> 
> 赞同：0
> 
> 时间：2012-04-06T09:24:08.987
> 
> 标签：testing, selenium, automation, selenium-ide

我是测试和硒的新手，并且有很多疑问，例如我可以断言一个元素存在，但如何验证它实际上是什么，例如，如果我必须检查特定字段是文本区域还是文本框...... .

那么有没有办法使用 selenium IDE 来做到这一点？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:04:28.677

不太清楚你的问题的意义是什么......

从 HTML 的角度来看，一个文本框是，一个文本区域是 . 您可以指定并断言专门检查这些元素的定位器，例如使用 XPath 定位器：

*   //输入[@type='文本]
*   //文本区域

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T11:49:43.020

您可以尝试使用特定于每种元素的断言：例如 `assertEditable | locator`，如果您的字段是标签，则将失败，`assertText | locator | pattern`适用于标签，而对于文本框，返回值将为 ''，`assertChecked | locator`如果您的控件不是切换按钮，则将失败,`assertSelectedLabel | locator | pattern`如果您的控件不是下拉菜单等，则会失败。您也可以使用包含在定位器中的标签更改元素断言：从`id=editField`到`css=input#editField`以确保这是一个编辑字段或以`css=textarea#editField`确保这是多行文本框等等。

# iphone - 故事板和视图转换

> ID：10041551
> 
> 赞同：0
> 
> 时间：2012-04-06T09:24:36.347
> 
> 标签：iphone, objective-c, ios, segue, login-system

我目前正在学习 iPhone 应用程序开发，并制作了一些在线教程来了解这一切是如何工作的。

我现在已经习惯了 Objective-C 的概念，我正在尝试基于两个视图构建第一个应用程序：

第一个视图将是“登录视图”，只是带有一种登录系统：一个登录字段和一个密码字段，以及一个“连接”按钮。

第二个视图是应用程序的“主页视图”，登录后会调用该视图。

我做了一个 push segue 来建立登录视图和登录后调用的视图之间的关系。这是故事板的样子：

![登录系统故事板](../Images/c2a451fae80a71c3f4bd4bfc5ce7271c.png)

我实际上不知道的是如何调用一个函数来检查凭据是否正确，如果登录成功则切换到另一个视图。

谁能给我解释一下，或者给我一些提示/教程吗？

以下是我的 LoginController 的来源：

**登录控制器.h**

```
@interface LoginController : UIViewController {
    IBOutlet UITextField *TFLogin;
    IBOutlet UITextField *TFPassword;
}

@property (strong, nonatomic) IBOutlet UITextField *TFLogin;
@property (strong, nonatomic) IBOutlet UITextField *TFPassword;

- (IBAction)Connect:(UIButton *)sender;

@end 
```

登录控制器.m

```
@implementation LoginController

@synthesize TFLogin;
@synthesize TFPassword;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)Connect:(UIButton *)sender
{
    if ([TFLogin.text isEqualToString:@"myLogin"] && [TFPassword.text isEqualToString:@"myPassword"]) {
        [self performSegueWithIdentifier:@"LoginSegue" sender:sender];
        NSLog(@"Connection OK");
    }
    else {
        NSLog(@"Connection Not OK");
    }
}

@end 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:48:38.617

您有两种选择来触发 segue。最简单的方法就是在界面生成器中按住 ctrl 并从按钮拖动到下一个视图控制器。您也可以在代码中（在 IBAction 中）通过调用`performSegueWithIdentifier:sender:`.

如果您使用 IBAction，您可以在那里验证数据。

如果您使用界面构建器方法，**则无法**验证——`prepareForSegue:sender:`为时已晚。无论如何，这里有一个可能的绊脚石——我记得，`UINavigationController`不会转发`prepareForSegue:sender:`给它的孩子。您可以通过在类别上`UINavigationController`或通过子类化来缓解这种情况。

# c++ - 内存对齐和长拷贝

> ID：10041556
> 
> 赞同：0
> 
> 时间：2012-04-06T09:24:53.493
> 
> 标签：c++, c, memory, alignment

如果我们假设我将一块内存与 memalign 对齐到 4bytes ，那么这样做是否仍然安全：

```
unsigned int* source = In.Data;
unsigned int* dest = Out.Data;

int loops = In.Size / 4; //size is the same for both in/out 

while (loops)
{
    *dest++=*source++;
    loops--;
} 
```

而是一次复制 1 个字节？如果不是，如何判断内存是否正确对齐以便在需要时回退到标准字节副本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:30:00.243

是的，这是安全的，因为您的块已正确对齐。

如果从中获取块也是安全的，`malloc`因为保证返回的内存块`malloc`出于任何目的都正确对齐。

# jquery-mobile - 数据图标在 android 中不可见

> ID：10041565
> 
> 赞同：0
> 
> 时间：2012-04-06T09:25:49.173
> 
> 标签：jquery-mobile, cordova

我已经使用带有phonegap的jquery mobile在andriod中建立应用程序。当我在浏览器（safari，chrome）中浏览应用程序时，会显示数据图标，但在发布到andriod市场后，数据图标是不可见的。任何帮助表示赞赏。

要显示的数据图标的 css 如下所示： background-image:url(/images/icons-18-white.png);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:02:31.593

I suppose that you have included the image as well, have you ended the CSS correctly? If you debug i locally, does it work then? If yes, Google Play has something to do with it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T23:13:37.857

尝试不使用第一个斜杠：`background-image:url(images/icons-18-white.png)`

这至少对我有用。

# iphone - iPhone：如何在没有主机的情况下使用可达性？

> ID：10041569
> 
> 赞同：0
> 
> 时间：2012-04-06T09:26:09.153
> 
> 标签：iphone, reachability

在我的应用程序中，如果用户没有互联网连接，我需要显示“没有互联网连接”消息。

要像这样使用可达性：

```
Reachability *netReach = [Reachability reachabilityWithHostName:@"host.name"]; 
```

是个坏主意，因为互联网可以使用但主机不可用，对吗？

那么如何在没有主机的情况下检查互联网连接？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:56:19.747

```
Reachability *internetReachable = [Reachability reachabilityForInternetConnection];
[internetReachable startNotifier];
if(internetReachable.isReachable)
    NSLog(@"True"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:42:53.830

你是绝对正确的。可达性只检查某个主机是否可达。问题是，如果不向主机发送请求，就无法（我能想到的）如何确定您是否连接到互联网。

那么你可以做什么（以及 Apple 在其可达性示例中所做的）：选择一个主机，你可以 99.99% 确定主机可用。例如 google.com 或 apple.com

我认为苹果依赖某个主机来检查互联网连接的事实（以及他们没有想出其他东西，而不依赖于某个主机的事实）是一个很好的迹象，表明检查互联网连接以这种方式并不是一个坏主意。

编辑

当然，最好的方法（如对 Petesh 所指问题的回答中所述）是简单地提出您想要提出的请求，然后在发生错误时相应地处理错误。换句话说： 1\. 提出您的请求 2\. 如果请求失败，请使用 Reachability 查看丢失的 Internet 连接是否可能是问题所在

# c++ - How can I implement a method as final (final as in JAVA) in C++?

> ID：10041576
> 
> 赞同：1
> 
> 时间：2012-04-06T09:26:49.220
> 
> 标签：c++

For example: I have an implementation (say doSomething()) in Base class.

I want all the Derived classes to use only this implementation, and not to override the base class implementation.

How can I force this behavior in C++?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:30:41.633

If you only want to implement it in the base class, then don't declare it `virtual`, and it can't be overridden at all.

In C++11 you can declare an override `final` in a similar way to Java:

```
virtual void doSomething() final;
                           ^^^^^ 
```

In C++03 and earlier, you can't; that's why it was added to C++11.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T09:32:40.027

In C++11 declare the method as `final`.

In C++03, You don't have the in-built(language provided) functionality but you can do the following:

*   **Not** Declare the method as `virtual` in the Base class.
*   Don't add any same named methods in Derived classes.
*   Doccument the purpose approriately.

`#1`: Ensures Derived classes cannot override the particular method. The same method has to be called for all objects(Base or Derived), Since the method cannot be overridden.

`#2`: This ensures there is no Function Hiding, and any possibility of hiding the Base class method.

`#3`: This warns users of your class, of the rationale and the purpose.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T09:33:27.953

If the final function is in the base class of the class hierarchy, simply do not declare it virtual. Then it can't be overridden.

If the final function is not in the base class (i.e. is a virtual function), you can use the [final identifier from C++11](http://en.wikipedia.org/wiki/C++11#Explicit_overrides_and_final) to declare a function final:

```
struct Base2 {
    virtual void f() final;
}; 
```

# ios - XCode 4：添加文件/组且未清理项目时崩溃

> ID：10041578
> 
> 赞同：4
> 
> 时间：2012-04-06T09:26:55.910
> 
> 标签：ios, xcode, ios4, crash

我的一个项目有以下问题：

如果我向其中添加任何文件或组，XCode 很快就会停止并崩溃。如果我在那之前做一个干净的项目，它工作得很好。一旦我进行了项目构建，如果我尝试添加文件，它将再次崩溃。

有任何想法吗？寻找解决方案，但没有任何运气。我正在使用最新的 XCode 4.3.2 - 新安装没有帮助。

XCode 的崩溃报告：

```
Process:         Xcode [7017]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.3.2 (1177)
Build Info:      IDEApplication-1177000000000000~6
App Item ID:     497799835
App External ID: 7171108
Code Type:       X86-64 (Native)
Parent Process:  launchd [139]

Date/Time:       2012-04-11 16:46:18.177 +0200
OS Version:      Mac OS X 10.7.3 (11D50)
Report Version:  9

Interval Since Last Report:          137545 sec
Crashes Since Last Report:           10
Per-App Interval Since Last Report:  135817 sec
Per-App Crashes Since Last Report:   10
Anonymous UUID:                      F3C112A1-E15B-4D44-9662-F13A93846AE0

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4E2002
UNCAUGHT EXCEPTION (NSInvalidArgumentException): -[PBXFolder targets]: unrecognized selector sent to instance 0x40b7b63e0
UserInfo: (null)
Hints: None
Backtrace:
  0  0x00007fff95298faa __exceptionPreprocess (in CoreFoundation)
  1  0x00007fff99458d5e objc_exception_throw (in libobjc.A.dylib)
  2  0x00007fff953252ae -[NSObject doesNotRecognizeSelector:] (in CoreFoundation)
  3  0x00007fff95285e73 ___forwarding___ (in CoreFoundation)
  4  0x00007fff95285c88 _CF_forwarding_prep_0 (in CoreFoundation)
  5  0x000000011175717e -[XCProjectReferenceInfo _synchronizeWithReferencedProjectIfNeeded] (in DevToolsCore)
  6  0x0000000111757dc2 -[XCProjectReferenceInfo archivableInfoDictionary] (in DevToolsCore)
  7  0x000000010dfd3c47 -[NSArray(DVTFoundationClassAdditions) dvt_arrayByApplyingSelector:] (in DVTFoundation)
  8  0x000000011166057d -[PBXProject _projectReferences] (in DevToolsCore)
  9  0x000000011164912a -[PBXArchivingBinding writeValueForObject:toPListArchiver:] (in DevToolsCore)
 10  0x0000000111648158 -[PBXObject _archiveValuesForArchiveMask:toPListArchiver:] (in DevToolsCore)
 11  0x0000000111672997 -[PBXPListArchiver _archiveObject:asWeakReference:] (in DevToolsCore)
 12  0x00000001116734e6 -[PBXPListArchiver initWithRootObject:delegate:role:] (in DevToolsCore)
 13  0x0000000111650018 -[PBXProject writeToFile:projectFile:userFile:outResultNotification:] (in DevToolsCore)
 14  0x00000001116505a4 -[PBXProject _writeToFileSystemProjectFile:userFile:checkNeedsRevert:] (in DevToolsCore)
 15  0x0000000111650655 -[PBXProject writeToFileSystemProjectFile:userFile:checkNeedsRevert:] (in DevToolsCore)
 16  0x00000001117ee0bb -[Xcode3Project writeToFilePath:forceWrite:error:] (in DevToolsCore)
 17  0x000000010e68cf2d -[IDEContainer _saveContainerForAction:error:] (in IDEFoundation)
 18  0x00007fff920caf64 __NSFireTimer (in Foundation)
 19  0x00007fff9524dc24 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ (in CoreFoundation)
 20  0x00007fff9524d776 __CFRunLoopDoTimer (in CoreFoundation)
 21  0x00007fff9522e001 __CFRunLoopRun (in CoreFoundation)
 22  0x00007fff9522d676 CFRunLoopRunSpecific (in CoreFoundation)
 23  0x00007fff965d331f RunCurrentEventLoopInMode (in HIToolbox)
 24  0x00007fff965da51b ReceiveNextEventCommon (in HIToolbox)
 25  0x00007fff965da456 BlockUntilNextEventMatchingListInMode (in HIToolbox)
 26  0x00007fff91411f5d _DPSNextEvent (in AppKit)
 27  0x00007fff91411861 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] (in AppKit)
 28  0x00007fff9140e19d -[NSApplication run] (in AppKit)
 29  0x00007fff9168cb88 NSApplicationMain (in AppKit)
 30  0x000000010df8aeec (in Xcode) 
```

我发现的一些附加信息：

我在另一台计算机上试过这个 - 效果相同。但是，这可能很重要：它只发生在我构建真正的 iPhone 之后。如果我为模拟器进行构建 - 一切正常，不会发生崩溃。一旦我做了一个“真正的”iOS 构建（调试或发布）——如果我对项目进行任何更改，它就会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:20:51.547

好的 - 这确实有更多帮助。这似乎是您设置目标的方式。请注意，版本号、Bundle Identifier 和所有这些“iOS 应用程序目标”值不会存储在 project.pbxproj 文件中，而是写入“MyApp-Info.plist”文件中。我会检查该文件是否存在并与`INFOPLIST_FILE`该目标的构建设置中设置的值正确相关。

我还要检查主项目文件本身是否“项目格式”设置为“XCode 3.2-compatible”，而不是 3.1-compatible。

# javascript - 如何根据对象中其他键的值自动将值分配给另一个键

> ID：10041582
> 
> 赞同：2
> 
> 时间：2012-04-06T09:27:09.200
> 
> 标签：javascript

你如何在Javascript中实现以下内容

```
1) var MyObject={
2)    tableView:true,
3)    chartView:!(this.tableView)
4) } 
```

第 3 行的代码不起作用。那行有什么问题？

每当从代码中设置 tableView 时，我基本上想要做的就是将“chartView”设置为“tableView”的对面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T09:30:52.633

由于您正在创建对象，`this`因此不会绑定到该对象。此外，由于您希望`chartView`始终计算 的相反值`tableView`，即使后者进一步更改，函数将是更好的方法：

```
var MyObject = {
    tableView: true,
    chartView: function() {
        return !this.tableView;
    }
}; 
```

现在你可以这样做：

```
var chartView = MyObject.chartView();  // false.
MyObject.tableView = false;
chartView = MyObject.chartView();      // true. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:32:16.130

您不能使用它来引用对象字面量属性中的对象。您可以在作为该对象方法的函数中使用它：

```
var MyObject = {
  tableView: true,
  chartView: function () {
    return !this.tableView;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T09:57:37.743

根据您的要求，这也可能是一个答案，

```
 var MyObject = {
      view : function(bool){
         this.tableView = bool;
         this.chartView = !(bool); 
      }
      tableView: true,
      chartView: false
    } 

    MyObject.view(false)

    console.log(MyObject.tableView);     // Outputs false
    console.log(MyObject.chartView)      // Outputs true 
```

这样，您将始终在 chartView 中使用一个函数调用与 tableView 相反。

# php - 如何仅使用他们的 user_id 将用户登录到 Wordpress

> ID：10041583
> 
> 赞同：12
> 
> 时间：2012-04-06T09:27:11.790
> 
> 标签：php, wordpress, wordpress-login

有没有什么方法可以让我只给他们的 wp user_ID 登录一个 Wordpress 用户？

我正在向用户发送电子邮件以确认某些内容，当他们单击给定的链接以访问该网站时，他们需要登录才能看到我将他们带到的页面，因此我必须让用户登录然后执行标头重定向。

我需要一个由 wordpress 提供的 php 函数，我可以在 php 中使用，你能否给我任何关于如何实现它的额外细节（如果有的话）

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-06T09:38:43.193

这里有一个自动记录用户的功能（未测试）：

```
function auto_login() {
    if (!is_user_logged_in()) {
        //determine WordPress user account to impersonate
        $user_login = 'guest';

       //get user's ID
        $user = get_userdatabylogin($user_login);
        $user_id = $user->ID;

        //login
        wp_set_current_user($user_id, $user_login);
        wp_set_auth_cookie($user_id);
        do_action('wp_login', $user_login);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-31T13:49:50.497

您必须在 wp_login 挂钩中传递 2 个参数。参见[Wp 法典](http://codex.wordpress.org/Plugin_API/Action_Reference/wp_login)

```
wp_set_current_user( $user_id, $user->user_login );
wp_set_auth_cookie( $user_id );
do_action( 'wp_login', $user->user_login, $user ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T09:41:08.100

创建单独的表来存储您发送的所有链接和相应的临时身份验证代码，这可能仅在一段时间内有效，然后将该临时身份验证代码和电子邮件作为 url 参数传递 -

编写代码以根据临时身份验证代码验证用户，以便用户点击电子邮件后，您就可以重定向他。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-06T09:33:35.130

这真是个糟糕的主意。考虑一下：您向用户 A 和 B 发送一封电子邮件，其中包含以下链接：

```
http://wordpressblog.exp/fromemail?user_id=A;
http://wordpressblog.exp/fromemail?user_id=B; 
```

如果用户 B 用 A 的 user_id 替换他的用户 ID，那么他可以访问用户 A 的帐户。你最好构建一个哈希来记录用户

# facebook - Facebook 连接错误：1000

> ID：10041585
> 
> 赞同：0
> 
> 时间：2012-04-06T09:27:24.333
> 
> 标签：facebook, src

当我尝试将 fbconnect 集成到我的应用程序时，出现以下错误。我尽了一切可能，但错误仍然存​​在。任何人都可以帮助我，提前谢谢。

> 2012-04-05 19:46:05.805 YBGreetings[12264:17603] 是授予 2012-04-05 19:46:17.035 YBGreetings[12264:17603] 收到响应 **2012-04-05 19:46:17.036 YBGreetings[12264: 17603] 错误消息：（空）2012-04-05 19:46:17.037 YBGreetings[12264:17603] 错误代码：10000 2012-04-05 19:46:17.038 YBGreetings[12264:17603] 错误域 = facebookErrDomain 代码 = 10000 “操作无法完成。（facebookErrDomain 错误 10000。）” UserInfo=0x9131c90 {error={type = mutable dict, count = 3, entries => 2 : {contents = "type"} = {contents = " OAuthException"} 3 : {contents = "message"} = {contents = "必须使用活动访问令牌来查询有关当前用户的信息。"} 6 : {contents = "code"} = 2500**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:02:45.260

从错误日志中提取：

> 必须使用活动访问令牌来查询有关当前使用的信息

因此，在进行查询时，请考虑包括`access token`

# ruby-on-rails - 未初始化的常量设置 Ruby 1.9.3-p125

> ID：10041592
> 
> 赞同：3
> 
> 时间：2012-04-06T09:28:06.363
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, config, ruby-1.9.3

我已经升级了`.rvmrc`from `ruby-1.9.2-p290`to`ruby-1.9.3-p125`和 cause`uninitialized constant Settings`

`config/initializers/rails_config.rb`

```
RailsConfig.setup do |config|  
  config.const_name = "Settings" 
end 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T23:12:15.197

当我使用 ruby​​ 1.9.3 运行在 ruby​​ 1.9.2 上测试的旧代码库时，我遇到了同样的错误，将 rails_config gem 升级到最新版本为我修复了它。

```
bundle update --source rails_config 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:57:51.993

你可以试试这个：

```
ActiveSupport.on_load :before_configuration, :yield => true do
  RailsConfig.setup do |config|
    config.const_name = "Settings"
  end
end 
```

# google-chrome - Chrome 扩展 - 当 chrome.browserAction.onClicked 被触发时，我如何执行操作？

> ID：10041595
> 
> 赞同：0
> 
> 时间：2012-04-06T09:28:27.377
> 
> 标签：google-chrome, google-chrome-extension

我想制作一个 browserAction 扩展，上面有一个图标和一个监听器。

我有一个清单文件和一个后台脚本，脚本如下：

```
chrome.browserAction.onClicked.addListener(function(tab) {
        chrome.tabs.executeScript(null,{code:'some code here'});
}); 
```

该代码在页面上有效，我以不同的方式尝试了它（弹出窗口和触发动作的按钮）。但是如果我用 browserAction onclick 方法尝试它，什么也不会发生:(

清单：

```
{
  "name": "somename",
  "version": "1.0",
  "manifest_version": 2,
  "description": "sometext",
  "browser_action": {
    "default_icon": "images/icon.png",
    "default_title": "MyStyle"
  },
  "background": {
    "scripts": ["js/code.js"]
  },
  "permissions": [
    "tabs",  
    "https://www.examplesite.ex/*",
    "http://www.examplesite.ex/*",
    "http://*.ex/*"
  ]
} 
```

有谁能够帮我？：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:58:40.310

> 既然原来的问题已经在评论中解决了，我就回答后续问题：
> *“下一步让它自动，无需任何点击”*。

这可以使用[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)轻松完成。当您不必访问全局变量时，以下代码就足够了。[否则，使用此处提到](https://stackoverflow.com/a/9517879/938089?building-a-chrome-extension-inject-code-in-a-page-using-a-content-script)的技术注入脚本：

### `js/code.js`

```
document.title = "newtitle"; 
```

### [`manifest.json`](http://code.google.com/chrome/extensions/manifest.html)

```
{
  "name": "somename",
  "version": "1.0",
  "manifest_version": 2,
  "description": "sometext",
  "content_scripts": {
    "js": ["js/code.js"],
    "matches": [ "*://www.examplesite.ex/*", "http://*.ex/*" ]
  },
  "permissions": [ "*://www.examplesite.ex/*", "http://*.ex/*" ]
} 
```

# ios5 - 如何使用 MPMoviePlayerController 在 iphone 中查找视频的进度时间

> ID：10041597
> 
> 赞同：0
> 
> 时间：2012-04-06T09:28:58.533
> 
> 标签：ios5, uibutton, mpmovieplayercontroller

我有一个要求，我的屏幕上正在播放视频，并且我有两个好的和坏的按钮。我需要找到视频播放的进度时间，并在点击按钮的适当时间捕捉按钮点击的好坏。我尝试查看如何在视频播放时查找视频的进度时间。可惜！！！！。我需要在视频播放时捕获按钮点击，并比较点击是好是坏。任何建议或帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:57:23.767

查看协议 的`currentPlaybackTime`属性。遵守该协议，因此您可以直接在该类的任何实例上使用它。`MPMediaPlayback``MPMoviePlayerController`

例如

```
MPMoviePlayerController *player = [...];
[...]
NSLog(@"current time: %g", player.currentPlaybackTime); 
```

* * *

来自[MPMediaPlayback 参考](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMediaPlayback_protocol/Reference/Reference.html)；

```
currentPlaybackTime 
```

播放头的当前位置。（必需的）

```
@property(nonatomic) NSTimeInterval currentPlaybackTime 
```

***讨论***

> 对于视频点播或逐步下载的内容，此值以从当前项目开始的秒数为单位进行测量。更改此属性的值会将播放头移动到新位置。对于从服务器实时流式传输的内容，此值表示播放列表首次加载时从开始的时间。

可用性 适用于 iOS 3.2 及更高版本。在 MPMediaPlayback.h 中声明

# asp.net - 如何在同一解决方案中将会话数据从一个应用程序发送到另一个应用程序？

> ID：10041599
> 
> 赞同：1
> 
> 时间：2012-04-06T09:29:16.217
> 
> 标签：asp.net, session, c#-4.0, session-state, mvp

我正在第一个应用程序的类文件中创建会话，并且需要在第二个应用程序中访问相同的会话，这两个应用程序都在同一个解决方案中呈现。当我试图在第二个应用程序中执行此会话时，该会话为空，但会话包含第一个应用程序中的数据。

在第一次申请中

```
System.Web.HttpContext.Current.Session["key1"] = "a"; 
```

在第二次申请中

```
if (HttpContext.Current.Session["key1"]!= null) //i am getting session as null hear 
```

如何使用相同的解决方案将会话数据从一个应用程序发送到另一个应用程序？

请有人帮我..

# mysql - Ruby 哈希返回不正确的值

> ID：10041602
> 
> 赞同：0
> 
> 时间：2012-04-06T09:29:57.550
> 
> 标签：mysql, ruby

我在 ruby​​ 中具有以下功能，用于从数据库中检索某些信息。

```
#Setup

require "mysql2"
@client = Mysql2::Client.new(:host => "127.0.0.1", :username => "root", :password => "password")
query = "use project1"
@client.query(query)

def nodeslastactive
  query = "SELECT nodeid FROM nodes WHERE lastactive = #{@clock-1}"
  result = @client.query(query)
  if result.size == 0
    return nil
  else
    resultarray = Array.new
    result.each do |row|
      resultarray.push(row["nodeid"])
    end
  end
end 
```

此代码使用它：

```
lastactivenodes = nodeslastactive
if lastactivenodes != nil
  lastactivenodes.each do |lastactivenode|
    connect(node,lastactivenode)
  end
end 
```

我遇到的问题是，当在第二个代码块中建立连接时，该函数尝试将节点与 value 连接起来`{"nodeid"=>xxxxx}`，即使我已将哈希中的所有哈希值复制到第一个代码块中的数组中由第二块处理。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:49:21.410

在第一种方法中，您错过了

```
return resultarray 
```

在 else 分支中，或者它只会返回`result`哈希，因为它是方法中评估的最后一个东西

# blackberry - 如何在 BlackBerry 中使 Horizo ntalFieldManager 可点击？

> ID：10041607
> 
> 赞同：4
> 
> 时间：2012-04-06T09:30:11.523
> 
> 标签：blackberry, java-me, software-design

我正在 BlackBerry 中开发一个应用程序，我有许多`HorizontalFieldManager`充满组件的组件，如下图所示：

![我的 Horizo​​ntalFieldManager 装满了组件](../Images/9bd1f348834e8fc1741cbf9c42bc9399.png)

而且我必须在动态填充的循环中添加许多`HorizontalFieldManager`这样的 s 。`for`放在一起时，它看起来像列表中的单行。到目前为止，我已经能够做到这一点。

但问题是，**用户应该能够像这样单击“行”**。但由于`HorizontalFieldManager`是不可聚焦或可点击的，并且因为它内部有 4 个组件并且所有 4 个都同样重要，所以我无法找到一种方法来做到这一点。

那么任何人都可以建议一种方法来做我正在尝试的事情吗？基本上，用户应该能够单击图像中显示的“行”。此“行”​​由许多组件（2 `HorizontalFieldManager`s、`VerticalFieldManager`1、1`BitmapField`和 3 `LabelFields`）组成。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:45:27.057

BBdev 直接回答了您的问题，但正如您所注意到的，性能相当缓慢。这是因为像这样使用管理器删除数百行会增加 UI 布局步骤的大量开销。布局将针对所有这些管理器运行，每次屏幕上发生变化时 - 包括每次添加新行时。这基本上是二次的。

加快速度的方法是改用[ListField](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/ui/component/ListField.html)。ListField 的一个痛点是您必须直接进行绘图，而不是依赖于标准的操作系统字段。但优点是 ListField 执行速度非常快——每一行都有固定的高度，因此 ListField 可以快速确定哪些行是可见的，然后只为这些行调用绘制代码。

这意味着工作随着字段的可见大小而不是字段的虚拟大小进行缩放。这是编写 UI 代码时非常需要维护的属性，因为 UI 的虚拟深度没有界限，但物理屏幕具有固定数量的像素，因此通过使用 UI 的可见部分缩放工作，您可以维护很棒的表演。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T10:21:53.263

下面的代码将使您可以`HorizontalFieldManager`点击，并根据需要在此 Hfm 中添加您的组件。

```
import net.rim.device.api.system.Display;
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.TouchEvent;
import net.rim.device.api.ui.Touchscreen;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.NullField;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.MainScreen;

public class sample extends MainScreen implements FieldChangeListener{

 HorizontalFieldManager logInDetailManager=null;
 int background_color=0;

 public sample() {

logInDetailManager = new HorizontalFieldManager(Manager.USE_ALL_WIDTH|Field.FOCUSABLE){
    protected void sublayout(int maxWidth, int maxHeight) {
            int height=40;
        super.sublayout(Display.getWidth(), height);
        setExtent(Display.getWidth(), height);
    }
    protected void paint(Graphics graphics) {

        graphics.setBackgroundColor(background_color);
        graphics.clear();
        invalidate();
        super.paint(graphics);
    }
    protected void onFocus(int direction) {
        super.onFocus(direction);
        background_color=Color.RED;
        invalidate();
    }
    protected void onUnfocus() {
        invalidate();
        background_color=Color.GREEN;

    }
    protected boolean navigationClick(int status, int time) {

        if(Touchscreen.isSupported()){
            return false;
        }else{
            fieldChangeNotify(1);
            return true;
        }

    }
    protected boolean touchEvent(TouchEvent message)
    {
        if (TouchEvent.CLICK == message.getEvent())
        {
            FieldChangeListener listener = getChangeListener();
            if (null != listener)
                this.setFocus();
                listener.fieldChanged(this, 1);
        }
        return super.touchEvent(message);
    }
};
logInDetailManager.setChangeListener(this);
logInDetailManager.add(new LabelField("hello"));
logInDetailManager.add(new NullField(Field.FOCUSABLE));
add(logInDetailManager);
add(new LabelField("good",Field.FOCUSABLE));    
}

  public void fieldChanged(Field field, int context) {            
if(field==logInDetailManager){                  
    UiApplication.getUiApplication().invokeLater(new Runnable() {                          
        public void run() {                                 
            Dialog.inform("Hi how are you?");                          
        }                    
    });          
}   
}

} 
```

希望这会帮助你 。干杯:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:11:39.490

当您有一组水平字段时如何处理焦点颜色？

```
for (int i = 0; i < listSize; i++) {
        logInDetailManager[i] = new HorizontalFieldManager(
                Manager.USE_ALL_WIDTH | Field.FOCUSABLE) { 
```

由于数组的一项始终聚焦，因此整个列表都是红色的。

# javascript - 使用 javascript 和 HTTP referer 提取搜索引擎的关键字

> ID：10041608
> 
> 赞同：2
> 
> 时间：2012-04-06T09:30:16.327
> 
> 标签：javascript, http, parameters, referrer

我在谷歌上找不到任何东西。如何使用 javascript 为发送到我的网站的流量提取搜索引擎关键字？

我不想重新发明轮子，我正在寻找已经存在的东西，一个经过测试的库，但是我找不到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T09:41:26.683

作为答案，而不仅仅是评论。您的 javascript 代码将需要检查[document.referrer](http://www.w3schools.com/jsref/prop_doc_referrer.asp)（这可能是您的搜索中缺少的神奇关键字）。

不同的搜索引擎对查询使用不同的参数名称，因此您需要知道要查找的内容。谷歌使用`q`雅虎！似乎使用`pqstr`. 在引用 url 中查找该参数的值，并将其取消编码（使用[unencodeURIComponent](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)）。

但是，仍然有[这个答案](https://stackoverflow.com/questions/907305/how-does-a-website-highlight-search-terms-you-used-in-the-search-engine)要检查。

# javascript - javascript post提交与输入提交点击不同？

> ID：10041613
> 
> 赞同：1
> 
> 时间：2012-04-06T09:30:43.537
> 
> 标签：javascript, html

我有这个代码

```
<html>
<include jquery>
<script>
  function crea()
  {
     var html = '<form method="get" id="popUpForm" name="popUpForm" action="form_ricorda_dati.php"><hr /><input type="hidden" name="mio" value="1" />input3<input type="text" name="input3" value="" /><br />input4<input type="text" name="input4" value="" /><br /><input type="submit" id="11" value="Procedi" /></form><br /><a href="" onClick="prova()">submit</a>';
     var div = document.getElementById('cont');
     div.innerHTML = html;
  }

  function prova()
  {
     $('#popUpForm').submit();
  }

</script>
<body>
< a href="#" onClick="crea()">lancia funzione JS</a><br /><br />
<div id="cont"></div>
</body>
</html> 
```

**这段代码：**

1.  当我点击`<a href="#" onClick="crea()">`它“显示”表格进入`<div id="cont">`
2.  **方式1：**当我点击`<a href="" onClick="prova()">submit</a>`它调用`$('#popUpForm').submit();`
    **方式2：**点击`<input type="submit" id="11" value="Procedi" />`

**问题：**

1.  如果我单击`<input type="submit" id="11" value="Procedi" />`我重新加载页面并查看正确的查询字符串（表单`action="get"`）。在重新加载的页面中，*如果*我“显示”表单并单击输入，我会看到最后一个输入（浏览器自动填充正常）。

2.  如果单击`<a href="" onClick="prova()">submit</a>`，之后，我看不到查询字符串。在重新加载的页面中，如果我“显示”表单并单击输入，我看不到最后一个输入（浏览器自动填充失败）。

（我在 Chrome 和 IE 中看到了这个问题，但在 Firefox 中没有。）

**目标**

浏览器自动填充应始终显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:14:53.380

问题可能是您使用 JavaScript 创建的 HTML 表单在页面加载时不在浏览器的 DOM 中。您可以通过将表单的 HTML 放入`body`要在 DOM 中呈现的标签中来解决此问题，并使用 JavaScript 将其隐藏，直到用户单击`crea`链接。

问题**2**似乎是您的链接 ( `<a href="" onclick="prova()"...`) 可能会转到`HREF`属性中给出的 url。由于该属性为空，因此您的页面将转到自身。

为了使事情变得更容易，您应该将 HTML 表单排除在 JavaScript 逻辑之外。此外，由于您使用的是 jQuery，我已将您的函数转换为绑定。

[JSFIddle](http://jsfiddle.net/CN7qh/)中的工作示例。

```
<html>
    <head>
        <script type="text/javascript" src="url/to/jquery.js"></script>
        <script type="text/javascript">
            jQuery(function(){
                var form = jQuery( '#form' ),
                    crea = jQuery( '#creaLink' ),
                    prova = jQuery( '#provaLink' );

                form.hide();

                crea.on( 'click', function(){
                    form.show();
                });

                prova.on( 'click', function(){
                    form.submit();
                });
            });
        </script>
    </head>
    <body>
        <a href="#" id="creaLink">lancia funzione JS</a>
        <br />
        <br />
        <div id="form">
            <form method="post" id="popUpForm" name="popUpForm">
                <hr />
                <input type="hidden" name="mio" value="1" />
                input3
                <input type="text" name="input3" value="" />
                <br />

                input4
                <input type="text" name="input4" value="" />
                <br />

                <input type="submit" id="11" value="Procedi" />
            </form>
            <br />
            <a href="#" id="provaLink">submit</a>
        </div>
    </body>
</html>​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-06T10:08:56.017

依赖浏览器的自动填充可能不是一个好主意，因为不同的浏览器可能有不同的行为。现在，如果我正确地假设即使在服务器接收和处理表单数据之后，您也希望字段中存在值，那么我建议您使用 AJAX 技术。在后台将表单数据发送到服务器，并在收到响应后仅显示结果。

# ruby-on-rails - 引导日期选择器，添加新语言环境时出错

> ID：10041619
> 
> 赞同：0
> 
> 时间：2012-04-06T09:31:08.560
> 
> 标签：ruby-on-rails, datepicker, twitter-bootstrap

尝试添加新语言环境时，使用此处的说明[https://github.com/eternicode/bootstrap-datepicker](https://github.com/eternicode/bootstrap-datepicker)在 rails 3.2 上出现错误：

> ActionView::Template::Error (locales/bootstrap-datepicker.pl 是 'text/x-script.perl', 不是 'application/javascript'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T22:42:44.380

它看起来像错误的文件扩展名。你想要`.js`，没有`.pl`。

# php - Android 应用与服务器的通信（php + postgree）

> ID：10041620
> 
> 赞同：0
> 
> 时间：2012-04-06T09:31:10.867
> 
> 标签：php, android, database, communication

我需要为 android 开发简单的应用程序，它与服务器进行一些通信。目的：1）需要通过php将数据放入db 2）需要从服务器接收命令和数据

服务器端是 php + postgree db。我想问什么是最简单有效的沟通方式。

关于1）我可以使用http（将数据放入http的参数）并且php将解析它并放入db。你知道任何用于 android 的 http 库吗？

关于2）点，php需要向android客户端发送数据。我不确定如何实现服务器-> 客户端方式。也许通过套接字，但还不确定。你能给我你的意见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:50:15.647

1) 你可以使用 Apache HttpComponents (https://hc.apache.org/)

2) 最简单的方法是轮询：您的 Android 客户端必须每隔 x 秒向响应的服务器发送一个请求（“你有什么要给我吗？”）（“是”/“否”） . 其他技术（websocket、http 流、ecc.）实现起来更复杂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:51:25.203

您需要的是 SOA（面向服务的架构）。您将拥有一个与 PHP Web 服务通信的 Android 应用程序，该服务反过来查询 Postgree 数据库。该服务将用于您的所有`SELECT`查询以及其他 CRUD 操作。

# opencv - 表示颜色：标量到浮动，反之亦然

> ID：10041625
> 
> 赞同：0
> 
> 时间：2012-04-06T09:31:50.680
> 
> 标签：opencv, colors

我正在使用 opencv2 c++ 接口。

我想了解如何将颜色从标量转换为浮点数。我有一个这样的矩阵：

```
d = Mat(src.rows, src.cols, CV_32F); 
```

我想用带有 RGB 255 值的标量表示的颜色填充其中的一部分：

```
for(int i=0; i<src.cols*src.rows; i++)
    if (some_condition)
        // fill it with red
        d.at<float>(i/src.cols, i%src.cols) =? Scalar(255,0,0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:37:16.267

要转换 cv::Mat 的某些元素，`float`请检查 cv::Mat 类的此方法

```
 // sets some of the matrix elements to s, according to the mask
   Mat& setTo(const Scalar& s, const Mat& mask=Mat()); 
```

[http://opencv.willowgarage.com/documentation/cpp/basic_structures.html](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html)

您应该定义一个掩码，定义矩阵的哪些部分满足您的`if statement`.

# python - 如何使 savefig() 为“最大化”窗口而不是默认大小保存图像

> ID：10041627
> 
> 赞同：65
> 
> 时间：2012-04-06T09:31:53.260
> 
> 标签：python, matplotlib

我在 matplotlib 中使用 pylab 创建绘图并将绘图保存到图像文件中。但是，当我使用 保存图像时`pylab.savefig( image_name )`，我发现保存的**SIZE**图像与我使用时显示的图像相同`pylab.show()`。

碰巧，我在图中有很多数据，当我使用 时`pylab.show()`，我必须最大化窗口才能正确看到所有图，并且 xlabel 代码不会相互叠加。

无论如何，我可以在将图像保存到文件之前以编程方式“最大化”窗口吗？- 目前，我只得到“默认”窗口大小的图像，这会导致 x 轴标签相互叠加。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-21T19:16:04.223

matplotlib（pylab）中有两个主要的选项来控制图像大小：

1.  您可以以英寸为单位设置结果图像的大小
2.  您可以为输出文件定义 DPI（每英寸点数）（基本上，它是一个分辨率）

通常，您希望两者都做，因为这样您就可以**完全控制**生成的图像大小**（以像素为单位**）。例如，如果要精确渲染 800x600 的图像，可以使用 DPI=100，并将尺寸设置为 8 x 6 英寸：

```
import matplotlib.pyplot as plt
# plot whatever you need...
# now, before saving to file:
figure = plt.gcf() # get current figure
figure.set_size_inches(8, 6)
# when saving, specify the DPI
plt.savefig("myplot.png", dpi = 100) 
```

可以使用任何 DPI。事实上，您可能想要使用各种 DPI 和大小值来获得您最喜欢的结果。但是请注意，使用非常小的 DPI 并不是一个好主意，因为 matplotlib 可能找不到合适的字体来渲染图例和其他文本。例如，您不能设置 DPI=1，因为没有以 1 像素呈现字符的字体 :)

从其他评论中，我了解到您遇到的其他问题是正确的文本渲染。为此，您还可以更改字体大小。例如，您可以使用每个字符 6 个像素，而不是默认使用的每个字符 12 个像素（实际上，使所有文本变小两倍）。

```
import matplotlib
#...
matplotlib.rc('font', size=6) 
```

最后，对原始文档的一些参考： [http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.savefig](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.savefig)，[http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot .gcf](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.gcf)，[http](http://matplotlib.sourceforge.net/api/figure_api.html#matplotlib.figure.Figure.set_size_inches) : //matplotlib.sourceforge.net/api/figure_api.html#matplotlib.figure.Figure.set_size_inches，http: [//matplotlib.sourceforge.net/users/customizing.html#dynamic-rc-settings](http://matplotlib.sourceforge.net/users/customizing.html#dynamic-rc-settings)

PS 抱歉，我没有使用 pylab，但据我所知，以上所有代码在 pylab 中的工作方式都相同 - 只需`plt`在我的代码中替换为`pylab`（或您在导入 pylab 时指定的任何名称）。相同的`matplotlib`- 使用`pylab`。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-06T09:36:52.600

您在初始化时设置大小：

```
fig2 = matplotlib.pyplot.figure(figsize=(8.0, 5.0)) # in inches! 
```

**编辑**：

如果问题出在 x 轴刻度上 - 您可以“手动”设置它们：

```
fig2.add_subplot(111).set_xticks(arange(1,3,0.5)) # You can actually compute the interval You need - and substitute here 
```

依此类推，你的情节的其他方面。您可以全部配置。这是一个例子：

```
from numpy import arange
import matplotlib
# import matplotlib as mpl
import matplotlib.pyplot
# import matplotlib.pyplot as plt

x1 = [1,2,3]
y1 = [4,5,6]
x2 = [1,2,3]
y2 = [5,5,5]

# initialization
fig2 = matplotlib.pyplot.figure(figsize=(8.0, 5.0)) # The size of the figure is specified as (width, height) in inches

# lines:
l1 = fig2.add_subplot(111).plot(x1,y1, label=r"Text $formula$", "r-", lw=2)
l2 = fig2.add_subplot(111).plot(x2,y2, label=r"$legend2$" ,"g--", lw=3)
fig2.add_subplot(111).legend((l1,l2), loc=0)

# axes:
fig2.add_subplot(111).grid(True)
fig2.add_subplot(111).set_xticks(arange(1,3,0.5))
fig2.add_subplot(111).axis(xmin=3, xmax=6) # there're also ymin, ymax
fig2.add_subplot(111).axis([0,4,3,6]) # all!
fig2.add_subplot(111).set_xlim([0,4])
fig2.add_subplot(111).set_ylim([3,6])

# labels:
fig2.add_subplot(111).set_xlabel(r"x $2^2$", fontsize=15, color = "r")
fig2.add_subplot(111).set_ylabel(r"y $2^2$")
fig2.add_subplot(111).set_title(r"title $6^4$")
fig2.add_subplot(111).text(2, 5.5, r"an equation: $E=mc^2$", fontsize=15, color = "y")
fig2.add_subplot(111).text(3, 2, unicode('f\374r', 'latin-1'))

# saving:
fig2.savefig("fig2.png") 
```

那么 - 您究竟想要配置什么？

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-18T17:04:15.717

我认为您需要在将图形保存到文件时指定不同的分辨率：

```
fig = matplotlib.pyplot.figure()
# generate your plot
fig.savefig("myfig.png",dpi=600) 
```

指定较大的 dpi 值应该具有与最大化 GUI 窗口类似的效果。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-26T00:11:20.857

检查这个： [如何使用 Python 最大化 plt.show() 窗口](https://stackoverflow.com/questions/12439588/how-to-maximize-a-plt-show-window-using-python)

该命令因您使用的后端而异。我发现这是确保保存的图片具有与我在屏幕上查看的相同比例的最佳方法。

由于我将 Canopy 与 QT 后端一起使用：

```
pylab.get_current_fig_manager().window.showMaximized() 
```

然后我根据需要调用 savefig() 并根据 silvado 的回答增加 DPI。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-02-12T16:25:47.857

我有这个确切的问题，这有效：

```
plt.savefig(output_dir + '/xyz.png', bbox_inches='tight') 
```

这是文档：

[ [https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.savefig.html][1]](https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.savefig.html][1])

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-12-22T00:07:50.950

您可以在保存的图形中查看它的大小，例如 1920x983 像素（我保存最大化窗口时的大小），然后我将 dpi 设置为 100，将大小设置为 19.20x9.83 并且效果很好。保存完全等于最大化的数字。

```
import numpy as np
import matplotlib.pyplot as plt
x, y = np.genfromtxt('fname.dat', usecols=(0,1), unpack=True)
a = plt.figure(figsize=(19.20,9.83))
a = plt.plot(x, y, '-')
plt.savefig('file.png',format='png',dpi=100) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-14T02:54:51.290

我之前做过同样的搜索，看来他的确切解决方案取决于后端。

我已经阅读了一堆资料，可能最有用的是 Pythonio 在此处的答案[如何使用 Python 最大化 plt.show() 窗口](https://stackoverflow.com/questions/12439588/how-to-maximize-a-plt-show-window-using-python) 我调整了代码并最终得到了下面的函数。它在 Windows 上工作得很好，我主要使用 Qt，我经常使用它，而它与其他后端的测试很少。

基本上它包括识别后端和调用适当的函数。请注意，我后来添加了一个暂停，因为我遇到了一些窗口最大化而其他窗口没有最大化的问题，这似乎为我解决了。

```
def maximize(backend=None,fullscreen=False):
    """Maximize window independently on backend.
    Fullscreen sets fullscreen mode, that is same as maximized, but it doesn't have title bar (press key F to toggle full screen mode)."""
    if backend is None:
        backend=matplotlib.get_backend()
    mng = plt.get_current_fig_manager()

    if fullscreen:
        mng.full_screen_toggle()
    else:
        if backend == 'wxAgg':
            mng.frame.Maximize(True)
        elif backend == 'Qt4Agg' or backend == 'Qt5Agg':
            mng.window.showMaximized()
        elif backend == 'TkAgg':
            mng.window.state('zoomed') #works fine on Windows!
        else:
            print ("Unrecognized backend: ",backend) #not tested on different backends (only Qt)
    plt.show()

    plt.pause(0.1) #this is needed to make sure following processing gets applied (e.g. tight_layout) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-18T16:46:00.370

If I understand correctly what you want to do, you can create your figure and set the size of the window. Afterwards, you can save your graph with the matplotlib toolbox button. Here an example:

```
from pylab import get_current_fig_manager,show,plt,imshow

plt.Figure()
thismanager = get_current_fig_manager()
thismanager.window.wm_geometry("500x500+0+0") 
#in this case 500 is the size (in pixel) of the figure window. In your case you want to maximise to the size of your screen or whatever

imshow(your_data)
show() 
```

# java - 保存从基类派生的实例

> ID：10041634
> 
> 赞同：1
> 
> 时间：2012-04-06T09:32:34.503
> 
> 标签：java, class, dao, ibatis

我有一个基类 Fruit 和一个子类 Apple 的实例。我应该如何将 Apple 实例保存到数据库中？通过检查来检测 Apple的`insertFruit`方法`instanceof`是否被认为是好的设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:38:12.473

我认为在超类中有一个方法来检查对象是否是子类的实例不是一个好的设计。如果您想稍后添加香蕉怎么办？你会在 insertFruit() 中添加另一个检查吗？

我认为最好使用多态性，并覆盖 Apple 类中的 insertFruit() 方法。

# javascript - 视图更改时更新模型的backbone.js正确方法

> ID：10041637
> 
> 赞同：2
> 
> 时间：2012-04-06T09:32:45.227
> 
> 标签：javascript, backbone.js, backbone-views

视图更改时更新模型的正确方法是什么。是否需要在视图中或在控制器等其他地方进行？

例如，我有一个模型 (model1) 和一些与该模型关联的视图 (View1)。当我更改视图上的某些字段时，我需要更新模型。哪种方法是正确的？

另外，我有一个与另一个视图（View2）关联的模型集合，我需要将模型（model1）放入该集合。第二个问题 - View1 或 Model1 是否应该知道收集，如果是 - 应该如何完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:40:40.170

MVC 理论有一种有趣的方法，适用于 MVC ... 在这里查看更多解释什么是 Backbone 中的控制器

[http://lostechies.com/derickbailey/2011/12/23/backbone-js-is-not-an-mvc-framework/](http://lostechies.com/derickbailey/2011/12/23/backbone-js-is-not-an-mvc-framework/)

由@derick-bailey 撰写

总的来说，Bailey 说 Backbone 中没有控制器。所以，我个人认为，每个模型更新都应该发生在与该模型相关联的视图中。

Backbone 中的每个模型，当被添加到一个集合（或集合）并被更新时，会触发它所属的集合中的一个事件，因此您应该在视图中监听该事件。

在你的例子中

*   View1.collection = [model1];
*   View2.collection = [模型1，模型2，模型3]；

而当 View1 改变 model1 时，model1 会触发 View2.collection 的事件，你可以监听。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:36:51.913

控制器与模型对话，所以是的：当视图更改时更新模型的正确方法是通过控制器

# javascript - 删除自动创建的多个元素上的事件侦听器

> ID：10041644
> 
> 赞同：2
> 
> 时间：2012-04-06T09:33:55.687
> 
> 标签：javascript, event-handling, dom-events, event-listener

我试图在单击元素后从元素中删除事件侦听器，尽管我似乎有一个可行的解决方案，但这并不理想，我不确定为什么它与损坏的代码的工作方式不同。

尽管我意识到有更简单的方法可以做到这一点，但这取自我正在研究的 JS 类，因此需要保留一些结构。

这与我之前发表的一篇文章有​​关，该文章得到了正确回答（但在我扩展示例时没有工作） -[在 JavaScript 中使用匿名函数调用删除事件侦听器](https://stackoverflow.com/questions/9928754/removing-event-listeners-with-anonymous-function-calls-in-javascript)。

在此示例中，最后创建的 div 正确删除了侦听器，但较早的未正确删除（此处小提琴 - [http://jsfiddle.net/richwilliamsuk/NEmbd/](http://jsfiddle.net/richwilliamsuk/NEmbd/)）：

```
var ctnr = document.getElementById('ctnr');
var listener = null;

function removeDiv (d) {
    alert('testing');
    d.removeEventListener('click', listener, false);
}

function addDiv () {
    var div = document.createElement('div');
    div.innerHTML = 'test';
    ctnr.appendChild(div);
    div.addEventListener('click', (function (d) { return listener = function () { removeDiv(d); } })(div), false);
}

addDiv();
addDiv();
addDiv(); 
```

在我开始工作的版本中，我创建了一个包含所有侦听器的数组（此处为小提琴 - [http://jsfiddle.net/richwilliamsuk/3zZRj/](http://jsfiddle.net/richwilliamsuk/3zZRj/)）：

```
var ctnr = document.getElementById('ctnr');
var listeners = [];

function removeDiv(d) {
    alert('testing');
    d.removeEventListener('click', listeners[d.id], false);
}

function addDiv() {
    var div = document.createElement('div');
    div.innerHTML = 'test';
    ctnr.appendChild(div);
    div.id = listeners.length;
    div.addEventListener('click', (function(d) {
        return listeners[listeners.length] = function() {
            removeDiv(d);
        }
    })(div), false);
}

addDiv();
addDiv();
addDiv();

document.getElementById('btn').addEventListener('click', function() {
    alert(listeners);
}, false);​ 
```

最后一个工作正常，但我确信侦听器数组不应该是必需的。也许我担心太多，但我想知道最佳解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:42:09.963

你是对的，你不需要一个数组，只需将每个监听器保存在一个变量中，而不是在你的 remove() 函数中传递 eventlistener，

```
var ctnr = document.getElementById('ctnr');

function removeDiv(d, ev) {
    alert('testing');
    d.removeEventListener('click', ev, false);
}

function addDiv() {
    var div = document.createElement('div');
    div.innerHTML = 'test';
    ctnr.appendChild(div);
    div.addEventListener('click', (function(d) {
        var myfunc;
        return myfunc = function() {
            removeDiv(d, myfunc);
        }
    })(div), false);
}

addDiv();
addDiv();
addDiv();

document.getElementById('btn').addEventListener('click', function() {
    alert(listeners);
}, false);​​ 
```

[更新了 jsfiddle 页面](http://jsfiddle.net/3zZRj/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:53:10.590

如果每个侦听器不相等，则必须保存它们，因此您需要侦听器和元素之间的关系。由于元素由对象表示（DOM：文档对象模型），您可以向它们添加自定义属性（尽管不推荐：[我可以向 DOM 对象添加任意属性吗？](https://stackoverflow.com/questions/4258466/can-i-add-arbitrary-properties-to-dom-objects)）（[演示](http://jsfiddle.net/EBU9h/1/)）：

```
var ctnr = document.getElementById('ctnr');

function removeDiv (d) {
    alert('testing');
    d.removeEventListener('click', d.custom_Listener , false);
}

function addDiv () {
    var div = document.createElement('div');
    div.innerHTML = 'test';
    div.custom_Listener = function(){removeDiv(this)};
    ctnr.appendChild(div);
    div.addEventListener('click', div.custom_Listener , false);
} 
```

但是由于您在每个 div 中使用相同的侦听器，最好不要为每个 div 使用单独的函数，而是使用相同的函数（[demo](http://jsfiddle.net/EBU9h/2/)）：

```
var ctnr = document.getElementById('ctnr');
var listener = function(){
    removeDiv(this);
};

function removeDiv (d) {
    alert('testing');
    d.style.backgroundColor = '#36f';
    d.removeEventListener('click', listener, false);
}

function addDiv () {
    var div = document.createElement('div');
    div.innerHTML = 'test';
    ctnr.appendChild(div);
    div.addEventListener('click', listener , false);
} 
```

# android - Android 权限列表及对应方法

> ID：10041646
> 
> 赞同：1
> 
> 时间：2012-04-06T09:33:58.843
> 
> 标签：android, permissions

android中是否有任何权限列表文档以及需要这些权限的方法名称。
谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T09:36:41.820

请参阅[Manifest.permission的文档](http://developer.android.com/reference/android/Manifest.permission.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-30T11:45:48.700

PScout 是一种分析 Android SDK 并生成将 Android 权限映射到方法的映射的工具。

原始 PScout 网站不再工作，但我从原始 PScout 提取映射并将其推送到 Github。如果需要，您可以轻松检查并解析它。

在这里，您可以找到 PScout 找到的所有需要​​ Android 权限的方法。

[PScout 结果 - Android 权限和需要这些权限的方法的映射](https://github.com/drag0/pscout_results)

# xaml - 在 XAML 中使用枚举索引集合属性

> ID：10041648
> 
> 赞同：3
> 
> 时间：2012-04-06T09:34:09.647
> 
> 标签：xaml, enums, indexer

虽然`{Binding Path=CollectionProperty[2]}`工作正常，但我无法使用枚举，即`{Binding Path=CollectionProperty[SomeEnum.Value2]}`. 如果可能的话，什么是合适的语法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-17T12:46:28.673

只需将枚举值指定为未修饰的字符串。例如给定：

```
public enum Foo
{
    Value1,
    Value2
}

public class MainWindowVm
{
    public string this[Foo foo]
    {
        get { return Enum.GetName(typeof(Foo), foo); }
    }
} 
```

像这样指定枚举值：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="350" Width="525">

    <Window.DataContext>
        <local:MainWindowVm/>
    </Window.DataContext>

    <Grid>
        <TextBlock Text="{Binding Path=[Value1]}"/>
    </Grid>

</Window> 
```

x:Static 标记扩展不是必需的，因为 XAML 解析器已内置支持，可将提供的字符串映射到目标枚举支持的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:45:33.253

好吧，我尝试绑定到如下类型的属性（枚举`Dictionary<Foo, String>`在哪里）：`Foo`

```
{Binding Foos[{x:Static my:Foo.Fizz}]} 
```

...但这在运行时引发了绑定异常。

不过，奇怪的是，即使对于在枚举上索引的属性，使用 int 作为索引器似乎也有效。这个：

```
{Binding Foos[2]} 
```

...工作得很好。因此，如果您愿意在 XAML 中将枚举值表示为整数，那么您可以这样做。

否则，我认为您最好的选择是`Foos`通过值转换器直接绑定，`{x:Static my:Foo.Bar}`作为转换器参数传递。

# c++ - 在 Windows 7 中使用 windows.h 在 C++ 中更改文件创建日期

> ID：10041651
> 
> 赞同：5
> 
> 时间：2012-04-06T09:34:19.663
> 
> 标签：c++, file, datetime, file-properties

我有以下代码：

```
int main(int argc, char** argv) {
    onelog a;
    std::cout << "a new project";

    //creates a file as varuntest.txt
    ofstream file("C:\\users\\Lenovo\\Documents\\varuntest.txt", ios::app);

    SYSTEMTIME thesystemtime;
    GetSystemTime(&thesystemtime);

    thesystemtime.wDay = 07;//changes the day
    thesystemtime.wMonth = 04;//changes the month
    thesystemtime.wYear = 2012;//changes the year

    //creation of a filetimestruct and convert our new systemtime
    FILETIME thefiletime;

    SystemTimeToFileTime(&thesystemtime,&thefiletime);

    //getthe handle to the file
    HANDLE filename = CreateFile("C:\\users\\Lenovo\\Documents\\varuntest.txt", 
                                FILE_WRITE_ATTRIBUTES, FILE_SHARE_READ|FILE_SHARE_WRITE,
                                NULL, OPEN_EXISTING, 
                                FILE_ATTRIBUTE_NORMAL, NULL);

    //set the filetime on the file
    SetFileTime(filename,(LPFILETIME) NULL,(LPFILETIME) NULL,&thefiletime);

    //close our handle.
    CloseHandle(filename);

    return 0;
} 
```

现在的问题是；当我检查文件的属性时，它只会更改修改日期。我需要问一下；

> 如何更改文件的创建日期而不是修改日期？

谢谢

请给这个新手一些代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T09:36:23.167

它设置最后修改时间，因为这是您要求它执行的操作。该函数接收 3 个文件时间参数，而您只将一个值传递给最后一个，`lpLastWriteTime`. 要设置创建时间，请像这样调用函数：

```
SetFileTime(filename, &thefiletime, (LPFILETIME) NULL,(LPFILETIME) NULL); 
```

我建议您阅读[`SetFileTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724933%28v=vs.85%29.aspx). 关键部分是它的签名，如下所示：

```
BOOL WINAPI SetFileTime(
  __in      HANDLE hFile,
  __in_opt  const FILETIME *lpCreationTime,
  __in_opt  const FILETIME *lpLastAccessTime,
  __in_opt  const FILETIME *lpLastWriteTime
); 
```

既然你说你是 Windows API 的新手，我会给你一个提示。MSDN 上的文档非常全面。每当您遇到 Win32 API 调用时，请在 MSDN 上查找。

以及对您的代码的一些评论：

*   您应该始终检查任何 API 调用的返回值。如果你错误地调用了这些函数，或者它们由于其他原因而失败，你会发现如果没有错误检查就不可能找出问题所在。
*   您调用的变量`filename`实际上应该命名为`fileHandle`。

# hibernate - 在休眠标准中上升到 3 级深度

> ID：10041656
> 
> 赞同：1
> 
> 时间：2012-04-06T09:34:38.873
> 
> 标签：hibernate

我正在使用休眠标准来获取结果。在这里，我提供了我的持久性类的演示设计。

```
Class A{
private B b;
}
Class B{
private C c;
}
Class C{
private Long val;
} 
```

假设这些是休眠持久性类，我没有编写与数据库映射的所有注释。

现在我的问题是我想根据**Class C 的 val 属性**的值来检索**Class A**的结果。

 **我试图用它来获取它，

```
Criteria c = Restrictions.eq("b.c.val", value);
List l = c.list; 
```

它显示无法解析属性。我搜索并了解到标准不会达到这么深的程度。我不想转向 HQL。任何想法？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T11:26:37.793

```
Criteria c = session.createCriteria(A.class)
    .createCriteria("b")
    .createCriteria("c")
    .add(Restrictions.eq("val", value));

List l = c.list; 
```**

# php - 如何控制对 http 请求的响应的访问？（服务器端和客户端）

> ID：10041658
> 
> 赞同：0
> 
> 时间：2012-04-06T09:34:45.487
> 
> 标签：php, http, http-request

排除所有主要浏览器具有的相同来源策略和同步令牌模式（对所有请求进行令牌化会很痛苦），您将如何检查请求是否直接从我的用户界面发送而不是通过第三方发送。

例如，从 iframe 向 youtube 发送请求（我的意思是 src=... 不是 xmlhttprequest 对象），响应将是一个空白页面（他们是如何做到的？），向 facebook ajax 发送请求。来自 iframe 的 hovercard （它是一个简单的获取内容请求），地址栏也会给你一个空白页面（没有内容）。SO 响应是来自 iframe 请求的正常内容。

就像我之前说的，如果请求来自受信任的来源，您将如何检查（最好是一些服务器端代码）？

PS：不要依赖标头，我知道为什么我没有收到来自请求的来源，尽管我看到它们都在所有主要浏览器中实现了来源标头。一些ati spyware程序可以修改Refereer。无论如何，标题不能真正被信任。但是，是的，这表明它是一个检查层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:41:21.193

您无法确定用户的来源。用户代理很容易被欺骗。我认为您可以在用户界面中创建一些 csrf 令牌，并只允许拥有这些令牌的客户端

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:36:53.360

检查`$_SERVER['HTTP_REFERER']`并查看它是否来自您自己的站点。

# json - 将元素添加到 localStorage 中的 json

> ID：10041664
> 
> 赞同：0
> 
> 时间：2012-04-06T09:35:28.003
> 
> 标签：json, local-storage

我有：
`localStorage.xxx = JSON.stringify([["something","hello"],["something2","hello2"]]);`。
如何在 JSON 中添加一个新数组，`xxx`例如`["something3","hello3"]`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:41:21.907

你的意思是这样的：

```
 var arr = JSON.parse( localStorage.xxx ) ;
arr.push( ["something3","hello3"] ) ;
localStorage.xxx  = JSON.stringify( arr ) ; 
```

# ruby-on-rails - 使用资产管道在rails 3.2中Gmaps4Rails的JS加载顺序

> ID：10041665
> 
> 赞同：0
> 
> 时间：2012-04-06T09:35:28.177
> 
> 标签：ruby-on-rails, json, asset-pipeline, ruby-on-rails-3.2, gmaps4rails

我一直试图让 gmaps4rails 工作几个小时。我认为这是加载顺序，我什至尝试使用 rails 3.2 和 ruby​​ 1.9.3 克隆演示应用程序 - 仍然显示没有标记的空白地图。我的 JSON 在模型中是正确的。

项目： [https ://github.com/apneadiving/Google-Maps-for-Rails](https://github.com/apneadiving/Google-Maps-for-Rails)

**-- application.html.erb（引导）**

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <%= javascript_include_tag "application" %>
    <%= stylesheet_link_tag "application", :media => "all" %>
  </head>
  <body>
    <%= yield %>
    <%= javascript_include_tag "application" %>
  </body>
</html> 
```

**-- 宝石文件**

```
gem "gmaps4rails", "~> 1.4.8" 
```

**-- 应用程序.js**

```
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require gmaps4rails/gmaps4rails.base
//= require gmaps4rails/gmaps4rails.googlemaps
//= require_tree . 
```

**-- 用户.rb**

act_as_gmappable

def gmaps4rails_address "#{self.address}, #{self.city}" 结束

**-- 架构**

```
 create_table "users", :force => true do |t|
    t.string   "name"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.string   "address"
    t.string   "city"
    t.float    "latitude"
    t.float    "longitude"
    t.boolean  "gmaps"
  end 
```

**-- 用户控制器**

```
 def index
    @bars = User.all
    @json = User.all.to_gmaps4railsrespond_to do |format|
  format.html # index.html.erb
  format.json { render json: @users }
end 
```

结尾

* *-- 我的看法 **

```
<%= gmaps4rails(@json) %>
<%= @json %> 
```

* *-- 我的 json 从视图中打印出来 **

```
[{"lat":37.7381599,"lng":-122.3803166},{"lat":37.5121003,"lng":-122.2009814},{"lat":33.9964092,"lng":-118.4725106}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:48:42.497

很抱歉读到您浪费了时间：这不是我的宝石的目的:)

我没有`yield :scripts`在你的布局中看到。这是项目主页中所述的强制性先决条件之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T21:21:49.627

将 yield :scripts 放在您的控制器视图中，然后将 <%= javascript_include_tag "application" %> 放在前面。（例如，将其放在 application.html.erb 的标题中）

希望能帮助到你。我为此拉了一个小时的头发......

# objective-c - 在 iOS 应用程序中访问 SQL 数据库

> ID：10041669
> 
> 赞同：1
> 
> 时间：2012-04-06T09:35:46.517
> 
> 标签：objective-c, sql, ios, macos, cocoa-touch

我的服务器中存储了一个 SQL 数据库，我希望我的 iOS 应用程序能够访问它。它包含密码等，我需要该应用程序才能下载内容。这样做的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:41:55.463

基本上你有两个选择。

*   首先，您可以通过 HTTP 请求直接访问您的数据库并获取您想要的数据。（不是建议的方式。）

*   或者，您可以创建一个与您的数据库通信并充当应用程序和数据库之间的层的 Web 服务。您可以根据您的 Web 服务从数据库中获取所有数据或您想要的数据。

# lambda - 从 Prolog 的列表中删除谓词

> ID：10041672
> 
> 赞同：0
> 
> 时间：2012-04-06T09:36:16.660
> 
> 标签：lambda, prolog

我想`a`从列表中删除所有命名的谓词。结果必须如下所示：

```
?- delete_all(a(_), [a(1),a(2),a(3),b(1)], R).
R = [b(1)] 
```

请不要为我提供 SWI 或其他内置解决方案，因为代码必须在 Amzi-Prolog 中。

谢谢。

编辑：我尝试了以下代码，但它仅适用于原子：

```
remove_all(X,[],[]).
remove_all(X,[X|L],R):-remove_all(X,L,R).
remove_all(X,[Y|L],R):-not(X=Y), remove_all(X,L,M), R=[Y|M].

?-remove_all(a(_), [a(1),a(2),a(3),b(1)], R).
R=[a(2),a(3),b(1)] 
```

这不是真的:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:19:18.757

使用 findall

```
findall(X, (member(X,[a(1),a(2),a(3),b(1)]),\+(X=a(_))) ,V). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T10:53:35.710

我知道你说没有 swi-prolog。然而，这是一项简单的任务（与主要任务相比），实现与所使用的行为相同的递归，`exclude/3`其余的应该是 ISO prolog 或存在于 amzi 中。它使用[lambda.pl](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl)，一个允许更容易进行高阶编程的库：

```
:- [lambda].
filter(Term, List, Result) :-
    Term =.. [Pred|Args],
    length(Args, Arity),
    exclude(\X^(X =.. [Pred2|Args2],
                length(Args2, Arity2),
                Pred == Pred2,
                Arity == Arity2), List, Result). 
```

这种解决方案的优点是远离不纯的`findall/3`.

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T11:07:07.593

小修复，它应该工作：

```
% remove_same_indicator(+Callable,+List,-List)
remove_same_indicator(_, [], []).
remove_same_indicator(X, [Y|L], R) :- 
       functor(X, F, N), 
       functor(Y, F, N), 
       !, 
       remove_same_indicator(X, L, R).
remove_same_indicator(X, [Y|L], [Y|R]) :- 
       remove_same_indicator(X, L, R). 
```

试一试吧：

```
?- remove_same_indicator(a(_), [a(1),a(2),a(3),b(1)], R).
R = [b(1)] 
```

优于 findall 解决方案，不会丢失变量。例如，可以这样做：

```
?- remove_same_indicator(a(_), [a(A),a(B),a(C),b(A)], R).
R = [b(A)] 
```

但是通过 findall 解决方案，我们得到：

```
?- L=[a(A),a(B),a(C),b(A)], findall(X, (member(X,L),\+ (X = a(_))), R).
L = [a(A), a(B), a(C), b(A)],
R = [b(_I)] 
```

b 的参数不再绑定到 A，因为 findall 创建了副本并因此创建了新变量。

再见

functor/3 是 ISO，也在 Amzi 中！
[http://www.amzi.com/manuals/amzi/pro/ref_manipulating_terms.htm#functorTermFunctorN](http://www.amzi.com/manuals/amzi/pro/ref_manipulating_terms.htm#functorTermFunctorN)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T21:21:36.293

```
remove_all(_, [], []).
remove_all(X, [Y|R], L):- \+ X \= Y, remove_all(X, R, L).
remove_all(X, [Y|R], [Y|R2]):- X \= Y, remove_all(X, R2, L). 
```

# c++ - Microsoft Visual Studio 中编译选项 /DPROFILE 和 /UPROFILE 的含义是什么？

> ID：10041675
> 
> 赞同：0
> 
> 时间：2012-04-06T09:36:31.403
> 
> 标签：c++, compiler-options

有遗留的原生 c++ 项目。在命令行属性页中，/DPROFILE 作为附加选项添加。我想删除它。但我不知道它是否安全。我到处搜索。不幸的是，我没有找到关于 /DPROFILE 和 /UPROFILE 的解释。MSDN 有人知道关于他们的页面吗？它们是用来做什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:49:41.940

[/D](http://msdn.microsoft.com/en-us/library/hhzbb5c8%28v=vs.100%29.aspx)定义一个预处理符号。`/DPROFILE`意思是：“定义一个名为`PROFILE`”的符号。你必须搜索你的源代码，`PROFILE`看看没有它是否安全。

相反，`/UPROFILE`表示“未定义`PROFILE`”（参见[/U](http://msdn.microsoft.com/en-us/library/c3h46dfd.aspx)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:50:35.467

`/DPROFILE``PROFILE`定义一个用空扩展调用的宏。`/UPROFILE`“取消定义”一个名为`PROFILE`. 我不认为这`PROFILE`对 Visual Studio 工具链有任何特殊意义。

# python - 在 Gephi 中可视化未连接的图

> ID：10041685
> 
> 赞同：1
> 
> 时间：2012-04-06T09:37:38.510
> 
> 标签：python, graphviz, gephi

我有一个用 Python 生成的 graphviz 文件，如下所示：

```
strict graph G {
    iruo;
    valentin6232;
    shockwaver;
    jojo6938;
    beahero;
} 
```

不幸的是，如果我在 Gephi 中打开图形文件，它不会显示任何未连接的节点。如果我连接至少一条边，它只显示连接边的节点。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:26:39.973

我摆弄了一下，发现如果您引入一个空属性，Gephi 会成功显示所有节点，无论是否未连接。

```
strict graph G {
    iruo [];
    valentin6232 [];
    shockwaver [];
    jojo6938 [];
    beahero [];
} 
```

但是，该`dot`程序能够处理没有任何属性的节点，所以我猜这个问题是 Gephi 特有的。

# windows-phone-7 - 如何使用 phonegap 1.5 (Cordova) 为黑莓和 windows mango 下载文件？

> ID：10041687
> 
> 赞同：3
> 
> 时间：2012-04-06T09:37:43.340
> 
> 标签：windows-phone-7, blackberry, jquery-mobile, cordova

我正在编写一个需要下载文件（pdf、doc、txt）的 phonegap 应用程序。
我正在使用phonegap 1.5.0 即cordova 1.5.0.js 文件。

[我在http://docs.phonegap.com/en/1.5.0/phonegap_file_file.md.html#FileTransfer](http://docs.phonegap.com/en/1.5.0/phonegap_file_file.md.html#FileTransfer)上查看了 phonegap api
并尝试使用 FileTransfer 的下载方法。以下是我正在使用的代码：

```
save: function (fileName, fileType, url) {
    documentsaver.fileName = fileName;
    documentsaver.fileType = fileType;
    documentsaver.url = url;
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, fsSuccess, fail);

    function fail(event) {
        jqmSimpleMessage('Error Code ' + event.target.error.code);
    }

    function fsSuccess(fileSystem) {
        documentsaver.directoryEntry = fileSystem.root;

        //Creating directory in which document should be saved if it does not exist
        documentsaver.directoryEntry.getDirectory(documentsaver.directoryName, { create: true, exclusive: false }, dirSuccess, fail);

        function dirSuccess(parent) {
            console.log('Directory Created at '+parent.fullPath+' with name '+parent.name);
            //Moving directoryEntry reference to newly created directory
            documentsaver.directoryEntry = parent;

            //Creating file which will be written
            var completeFileName = documentsaver.fileName + '.' + documentsaver.fileType;
            console.log('completeFileName === >' + completeFileName );
            var filePath = documentsaver.directoryEntry.fullPath + '/' + completeFileName;
            console.log('filePath === >' + filePath );

            var fileTransfer = new FileTransfer();
            fileTransfer.download(
                    url,
                    filePath,
                    function(entry) {
                        console.log("download complete: " + entry.fullPath);
                    },
                    function(error) {
                        console.log("download error source " + error.source);
                        console.log("download error target " + error.target);
                        console.log("upload error code" + error.code);
                    }
                );
        } 
```

**fileName：**我正在保存的文件的名称。
**文件类型：**文件类型，即 pdf 或 doc 或 png。
**url：**实际资源的url。

以下是我在 Windows 模拟器上运行它时的控制台日志：

日志：“这是一个目录”
线程 '' (0xf0a01c6) 已退出，代码为 0 (0x0)。
日志：“filePath === >/JarusDocuments/Personal Auto Application.pdf”
线程 '' (0xff001f6) 已退出，代码为 0 (0x0)。
日志：“在 /JarusDocuments 创建的目录，名称为 JarusDocuments”
日志：“成功回调中的错误：File11 = 对象不支持属性或方法“下载””
线程“”（0xe3201b6）已退出，代码为 0（0x0）。

日志：“completeFileName === >Personal Auto Application.pdf”
线程 '' (0xf1c01de) 已退出，代码为 0 (0x0)。

据说 FileTransfer 不支持下载方式。虽然日志已经说它能够创建我想要的所有目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:36:30.340

在 WP7 的 Phonegap 1.5 中，FileTransfer 对象不能下载（只能上传）。然而，1.6 版本声称能够做到这一点（您可以在 phonegap 的关于[此处](http://phonegap.com/2012/04/11/phonegap-1-6-released/)发布的博客文章中自行阅读）

# iphone - 如何将 json 字符串解析为 nsdictionary？

> ID：10041689
> 
> 赞同：19
> 
> 时间：2012-04-06T09:37:46.190
> 
> 标签：iphone, objective-c

我正在为登录应用程序编写代码。谁能帮我解析一个json字符串？我的代码是

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{

    NSString *loginStatus = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];

    SBJsonParser *parser = [[SBJsonParser alloc] init];

    NSArray *loginDict = [parser objectWithString:loginDict error:nil];

    [loginStatus release];

    [connection release]; 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-06T11:36:54.093

示例数据：

```
NSString *strData = @"{\"1\": {\"name\": \"Jerry\",\"age\": \"12\"}, \"2\": {\"name\": \"Bob\",\"age\": \"16\"}}";
NSData *webData = [strData dataUsingEncoding:NSUTF8StringEncoding];

NSError *error;
NSDictionary *jsonDict = [NSJSONSerialization JSONObjectWithData:webData options:0 error:&error];
NSLog(@"JSON DIct: %@", jsonDict); 
```

NSLog 输出：

```
JSON DIct: {
     1 =     {
         age = 12;
         name = Jerry;
     };
     2 =     {
         age = 16;
         name = Bob;
     };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:57:36.273

```
//*************Static Resopnse
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"demo" ofType:@"text"];
NSLog (@"Content: %@", filePath);
NSString *content = [[[NSString alloc] initWithContentsOfFile:filePath
                                                 usedEncoding:nil
                                                        error:nil] autorelease];

SBJSON *json = [[SBJSON new] autorelease];
NSString *str=[[NSString alloc]initWithString:content];
dictTemp = [json objectWithString:str error:nil];
NSLog(@"Actions is: %@",dictTemp);
NSArray *arr=[[dictTemp valueForKey:@"Data"] mutableCopy];
arrX=[[NSMutableArray alloc] init];
arrY=[[NSMutableArray alloc] init];

for(NSDictionary *dict in arr)
{
    [arrX addObject:[dict valueForKey:@"Milestone"]];
    [arrY addObject:[dict valueForKey:@"Sites"]];
}   
NSLog(@"X is: %@",[arrX description]);
NSLog(@"Y is: %@",[arrY description]); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-06T09:44:55.840

```
NSString *loginStatus = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding]
NSLog([[loginStatus JSONValue] description],nil);

//This will give you parsed output. 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-06T14:20:15.103

```
 NSString *responseString = [[NSString alloc] initWithData:responseData encoding:  NSASCIIStringEncoding];
   NSlog(@"json String is: %@",responseString);
   NSDictionary *dictionary = [responseString JSONValue];
   NSLog(@"Dictionary value is  %@", [dictionary objectForKey:@"json"]); 
```

这段代码的结果是：json String is: {"json":{"Success":"Activation code."}}

对话后的结果是------- 字典值为 { Success = "Activation code."};

# python - python中的日期时间比较行为

> ID：10041690
> 
> 赞同：0
> 
> 时间：2012-04-06T09:37:58.027
> 
> 标签：python, datetime, timedelta

嗨，我正在编写一个依赖于时间的程序，并观察一些我无法弄清楚的日期时间对象的奇怪行为。我正在使用/遇到问题的代码是......

```
now = datetime.now()
time_changed_state = some datettime object previously initialized
time_delay = some integer
time_arrival = time_changed_state + timedelta(minutes=time_delay)

if now < time_arrival:
   do something
elif now >= time_arrival:
   do something different 
```

我一直在处理测试用例，以确保代码按照我希望的方式运行，但似乎并非如此。

当 time_delay = 0 时，我发现了奇怪的行为，并且我知道现在将 >= time_arrival，因为 time_changed_state 是在此函数调用之前初始化的日期时间对象，现在已在函数中初始化。但是，正在执行“做某事”代码而不是“做某事不同的代码”。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:44:39.380

我已经编辑了您的代码，这是您所期望的吗？

```
from datetime import datetime
from datetime import timedelta

now = datetime.now()
time_changed_state = now - timedelta(hours=2)
time_delay = 0
time_arrival = time_changed_state + timedelta(minutes=time_delay)

if now < time_arrival:
   print 'something'
elif now >= time_arrival:
   print 'something different' 
```

# asp.net - 表单身份验证“记住我”不记得我

> ID：10041692
> 
> 赞同：2
> 
> 时间：2012-04-06T09:38:02.693
> 
> 标签：asp.net, forms-authentication

我正在这样做：

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1, model.UserName,
                                DateTime.Now, DateTime.Now.AddMinutes(FormsAuthentication.Timeout.TotalMinutes),
                                model.RememberMe, verification.UserId.ToString());
                            string hashedTicket = FormsAuthentication.Encrypt(ticket); 
```

网络配置：

```
 <authentication mode="Forms">
    <forms loginUrl="~/Account/LogOn" defaultUrl="/" name="FunkyAuth" timeout="10000" />
  </authentication> 
```

我这样检查：

> 受保护的无效Application_OnPostAuthenticateRequest（对象发送者，EventArgs e）{
> 
> ```
> HttpCookie formsCookie = Request.Cookies[FormsAuthentication.FormsCookieName];
> 
>         if (formsCookie != null)
>         {
>             FormsAuthenticationTicket auth = FormsAuthentication.Decrypt(formsCookie.Value);
> 
>             if (string.IsNullOrWhiteSpace(auth.UserData)) return;
> 
>             int userId = int.Parse(auth.UserData);
> 
>             var principal = new FunkyPrincipal(new GenericIdentity(auth.Name), userId);
> 
>             Context.User = principal;
>             Thread.CurrentPrincipal = principal;
> 
>             //Response.Cookies[FormsAuthentication.FormsCookieName] = formsCookie;
>         }
>     } 
> ```

我究竟做错了什么？为什么它没有坚持很久？

# javascript - 将javascript代码更改为jquery代码，怎么样？

> ID：10041693
> 
> 赞同：0
> 
> 时间：2012-04-06T09:38:08.263
> 
> 标签：javascript, jquery

我想将以下 javascript 代码更改为 jquery 代码，怎么样？

随着`hourOffset`日期`3, 21`和`9, 22`.

**演示：http:** [//jsfiddle.net/zJRDC/](http://jsfiddle.net/zJRDC/)

```
<script type="text/javascript">
    var interval = self.setInterval("clock()", 1000);
    function clock() {
        var date = new Date();
        var hourOffset = 3;
        date.setUTCHours(date.getUTCHours(), date.getUTCMinutes());
        var time = date.getTime();
        date.setUTCFullYear(date.getUTCFullYear(), 3, 21);
        var dstStart = date.getTime();
        date.setUTCFullYear(date.getUTCFullYear(), 9, 22);
        var dstEnd = date.getTime();
        if (time > dstStart && time < dstEnd){ hourOffset = 4;}
        date.setUTCHours(date.getUTCHours() + hourOffset, date.getUTCMinutes() + 30);
        var output = date.getUTCHours() + ":" + date.getUTCMinutes() + ":" + date.getUTCSeconds();
        document.getElementById("clock").innerHTML = output
    }
    </script>
<div id="clock"></div>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:42:39.853

jQuery 可能适用于其中的一行：

```
document.getElementById("clock").innerHTML = output 
```

使用 jQuery 可以是

```
$("#clock").html(output); 
```

这用于[`$`](http://api.jquery.com/jQuery)查找元素，其中包括针对[早期版本 IE 中的](http://blog.niftysnippets.org/2010/03/by-any-other-name-would-smell-as-sweet.html)[错误`getElementById`](http://blog.niftysnippets.org/2010/03/by-any-other-name-would-smell-as-sweet.html)的解决方法，然后使用该[`html`](http://api.jquery.com/html)方法在元素上设置标记（这非常类似于设置`innerHTML` - 不过，再次使用一些解决方法来解决问题在某些情况下位；它们可能不适用于此特定代码）。

* * *

请注意，jQuery 只是一个用 JavaScript 编写的框架。它消除了处理 DOM 的一些浏览器差异，并提供了许多方便的实用程序功能，但它并不是与 JavaScript 分开的东西。您编写 JavaScript 代码，并且可以选择在其中*使用*jQuery（就像任何其他库一样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:15:26.077

如果您的代码有效。你真的不需要jquery。除非您想创建可重用的功能或自定义插件。

使用 clock() 作为 jquery 插件的快速示例（未测试）

```
(function( $ ){

  $.fn.myClock = function(timeout) {

    var interval = setInterval("clock()", timeout);

    function clock() {
        //..calculate date output
        var output = //...
        this.html(output)
    }
  };
})( jQuery ); 
```

然后使用你的插件

```
$(document).ready(function(){
  $('#clock').myClock(1000);
} 
```

请参阅[插件/创作](http://docs.jquery.com/Plugins/Authoring)和[学习如何创建您自己的 jquery 插件](http://www.myinkblog.com/learn-how-to-create-your-own-jquery-plugin/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T09:42:29.110

JQuery 已经用 JavaScript 完成了。没有什么可以转换的，因为 JQuery 不是一种语言；）。

# ef-code-first - 使用codefirst或fluent API与同一实体的多对多（连接表）关系？

> ID：10041695
> 
> 赞同：5
> 
> 时间：2012-04-06T09:38:15.383
> 
> 标签：ef-code-first, many-to-many

我正在使用 EF 4.3.1 CodeFirst 进行开发。我有一个机场表，如下所示：

```
 public class Airport
    {
        [Key]
        public int ID { get; set; }
        public string Name{ get; set; }
    } 
```

我需要的是一个 Route 表，其中包含来自同一个 Airport 表的 2 个 FK，例如：

```
 public class Route
    {
        public int DepartureAirportID { get; set; }
        public int DestinationAirportID { get; set; }
        public virtual Airport DestinationAirport { get; set; }
        public virtual Airport DepartureAirport { get; set; }
    } 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T20:39:49.280

这应该做你需要的......

```
public class Airport
{
    public int ID { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Route> DepartureRoutes { get; set; }
    public virtual ICollection<Route> DestinationRoutes { get; set; }
}
public class Route
{
    public int DepartureAirportID { get; set; }
    public int DestinationAirportID { get; set; }
    public Airport DestinationAirport { get; set; }
    public Airport DepartureAirport { get; set; }
}

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Route>()
        .HasKey(i => new { i.DepartureAirportID, i.DestinationAirportID});

    modelBuilder.Entity<Route>()
        .HasRequired(i => i.DepartureAirport)
        .WithMany(u => u.DepartureRoutes)
        .HasForeignKey(i => i.DepartureAirportID)
        .WillCascadeOnDelete(false);

    modelBuilder.Entity<Route>()
        .HasRequired(i => i.DestinationAirport)
        .WithMany(u => u.DestinationRoutes)
        .HasForeignKey(i => i.DestinationAirportID)
        .WillCascadeOnDelete(false);
} 
```

...这会创建像...这样的表格

```
CREATE TABLE [Airports] (
    [ID] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](4000),
    CONSTRAINT [PK_Airports] PRIMARY KEY ([ID])
)
CREATE TABLE [Routes] (
    [DepartureAirportID] [int] NOT NULL,
    [DestinationAirportID] [int] NOT NULL,
    CONSTRAINT [PK_Routes] PRIMARY KEY ([DepartureAirportID], [DestinationAirportID])
)
CREATE INDEX [IX_DestinationAirportID] ON [Routes]([DestinationAirportID])
CREATE INDEX [IX_DepartureAirportID] ON [Routes]([DepartureAirportID])
ALTER TABLE [Routes] ADD CONSTRAINT [FK_Routes_Airports_DestinationAirportID] FOREIGN KEY ([DestinationAirportID]) REFERENCES [Airports] ([ID])
ALTER TABLE [Routes] ADD CONSTRAINT [FK_Routes_Airports_DepartureAirportID] FOREIGN KEY ([DepartureAirportID]) REFERENCES [Airports] ([ID]) 
```

......你可以像这样使用它......

```
using (var db = new MyDbContext())
{
    foreach (var routeid in Enumerable.Range(1, 100))
    {
        var departure = new Airport { Name = "departure" + routeid };
        db.Airports.Add(departure);
        var destination = new Airport { Name = "destination" + routeid };
        db.Airports.Add(destination);

        var route = new Route{ DepartureAirport = departure, DestinationAirport = destination };
        db.Routes.Add(route);
    }

    int recordsAffected = db.SaveChanges();

    foreach (var route in db.Routes)
    {
        Console.WriteLine("{0}, {1}, {2}, {3}", route.DepartureAirportID, route.DestinationAirportID, route.DepartureAirport.Name, route.DestinationAirport.Name);
    }
} 
```

...希望这可以帮助。注意：不要`virtual`在必需的属性上使用（因为这些是索引 - 对于这种类型的映射只会像那样工作，我认为你会得到一些错误）。
此外，我总是添加相反的关系，但您可以使用 WithMany() 空白，应该也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:25:44.493

您应该在您的类 Airport 中添加一个额外的自相关属性：

```
public class Airport
{
    public int ID { get; set; }
    public string Name{ get; set; }
    public virtual ICollection<Airport> AirportRoutes { get; set; }
} 
```

并使用下一个 Fluent API 代码覆盖 OnModelCreating 方法：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder) 
{
        base.OnModelCreating(modelBuilder);
        modelBuilder.Entity<Airport>().HasMany(x => x.AirportRoutes).WithMany().Map(
            x => 
               {
                   x.MapLeftKey("DepartureId");       // left key name
                   x.MapRightKey("DestinationId");    // right key name
                   x.ToTable("Routes");               // table name
               });
} 
```

希望这对您有所帮助。

# jira - 使用 Web Service API 获取版本层次结构

> ID：10041696
> 
> 赞同：2
> 
> 时间：2012-04-06T09:38:25.143
> 
> 标签：jira, greenhopper

Jira 中的 Greenhopper 允许版本的层次结构（版本之间的父子关系）。[设置版本层次结构](http://confluence.atlassian.com/display/GH/Setting+Up+a+Version+Hierarchy)。

Jira 或 Greenhopper 是否公开 Web 服务接口来获取此层次结构信息？似乎可以从 Jira 数据库中获取此信息，如下[所示](http://confluence.atlassian.com/display/GHKB/Locate+Version+Hierarchy+in+JIRA+Database)。

但是，如果任何 Web 服务 API 可用于检索层次结构信息，则任何指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T17:17:49.060

该信息无法通过 API 获得（版本描述也无法获得）:(

# android - WebView 中的错误重定向

> ID：10041697
> 
> 赞同：0
> 
> 时间：2012-04-06T09:38:26.053
> 
> 标签：android, webview

我正在使用 WebView 在 android 中开发类似浏览器的应用程序。在加载 URL 时，我想在服务器返回 404 响应时显示特定的页面/消息/toast。我尝试使用`shouldOverrideUrlLoading`，但它只能根据 URL 字符串过滤 URL。`WebViewClient`有没有什么好方法可以在或`WebChromeClient`（不加载 URL 两次）内获取服务器的响应代码？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-04T03:44:41.980

覆盖的`onReceivedError`方法`WebViewclient`

# java - 解析二进制响应

> ID：10041700
> 
> 赞同：0
> 
> 时间：2012-04-06T09:38:41.070
> 
> 标签：java, android, sockets

我正在尝试构建一个示例应用程序，它将展示用于将时间与符合 RFC 868 的时间服务器同步的概念证明。

到目前为止，使用 Java Socket API，我能够连接和查询服务器并从服务器获取响应，但它不是人类可读的格式。

我得到的响应是：`�)6`我认为响应是二进制格式的（虽然不确定）。[RFC 868](https://www.rfc-editor.org/rfc/rfc868)这么说`Send the time as a 32 bit binary number`。

我的问题是：

1.  如何解析此响应？
2.  除了我的这种方法之外，我想知道是否还有其他推荐的方法可以实现这一目标。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:17:47.113

如 RFC 所述，这是自 1900-01-01T00:00:00 以来的秒数。对于 Java 将其转换为 Long，将基准日期更改为 1970-01-01T00:00:00，然后乘以 1000 得到日期。然后您可以使用该值创建一个新的日期。

将您的套接字输入流包装到 DataInputStream 并读入 rfsOffset （我使用了一个常量）。然后您可以执行以下操作：

```
int rfcOffset = -752253627; // Fri Apr 06 11:00:32 EDT 2012
// Current offsets will be negative convert to long positive value
long offsetSecs = rfcOffset + 4294967296L; 
System.out.println(offsetSecs);
// Adjust time base from 1900 to 1970 and convert to millis
long offsetMillis = ( offsetSecs - 2208988800L)* 1000L; 
System.out.println(offsetMillis);
Date rfcDate = new Date(offsetMillis);
System.out.println(rfcDate.toString()); 
```

注意：这只在 2036 年之前有效，时间会相差几毫秒。

编辑：RFC 868 是一个旧协议，不再被认为是同步的好时间源。一个好的时间源将我们 NTP 并将返回正确的秒。它可能会在几毫秒内关闭，但通常在 10 毫秒内准确。许多硬件时钟明显漂移，我已经看到时钟不准确的系统出现明显漂移（即使使用 NTP running()。NTP 会纠正漂移的时钟，但需要几分钟来确定所需的班次。

EDIT2：虽然 RFC 868 很旧，但将手机上的时间设置为最接近的秒数可能就足够了，而无需后台进程。如果您的手机可以同步到您的提供商发送的信号，则不需要这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T11:32:06.900

> 1）我如何解析这个响应？

查看来自 Apache Commons Net 库[的 TimeTCPClient 的源代码：](http://javasourcecode.org/html/open-source/commons-net/commons-net-3.0.1/org/apache/commons/net/time/TimeTCPClient.java.html)

```
public long getTime() throws IOException {
  DataInputStream input;
  input = new DataInputStream(_input_);
  return (input.readInt() & 0xffffffffL);
}

public Date getDate() throws IOException {
  return new Date((getTime() - SECONDS_1900_TO_1970)*1000L);
} 
```

> 2）除了我的这种方法之外，我想知道是否还有其他推荐的方法可以实现这一目标。

使用 Apache Commons Net Library，查看[TimeTCPClient 的 API](http://commons.apache.org/net/apidocs/index.html?org/apache/commons/net/time/TimeTCPClient.html)。

[Apache Commons Net 主页](http://commons.apache.org/net/)，希望对您有所帮助。

# windows-phone-7 - 从 Windows Phone 上的多个页面更新控件

> ID：10041702
> 
> 赞同：3
> 
> 时间：2012-04-06T09:38:45.680
> 
> 标签：windows-phone-7, user-controls

全部，我是 Windows 7 Phone 的新手。我的情况是我有一个包含 a 的主页，而该主页又包含`ScrollViewer`一个`StackPanel`. 我想`StackPanel`用多个子`StackPanel`（在运行时）填充它，它们将保存一个图像缩略图、一个超链接和一些关于图像的基本信息。

当我从主页执行此操作时，这一切都很好，但我想知道如何更新此控件（在主页上），但从主页以外的任何页面。我想知道从另一个页面更新页面控件（如上所述）的最佳实践是什么。

显然有很多方法可以在页面之间传递数据

```
PhoneApplicationService.Current.State["yourparam"] = param
NavigationService.Navigate(new Uri("/view/Page.xaml", UriKind.Relative)); 
```

然后在其他页面中

```
var k = PhoneApplicationService.Current.State["yourparam"]; 
```

和许多其他人。但是**，从不同页面更新通用控件的最佳实践是什么？**

注意：关于数据访问和页面之间的传递有很多问题。

1.  [在页面之间传递数据](https://stackoverflow.com/questions/4953491/wp7-passing-data-from-page-to-page/5980718#5980718)
2.  [如何将一个 xaml 页面中的图像值传递给 windows phone 7 中的另一个 xaml 页面？](https://stackoverflow.com/questions/3213354/how-to-pass-the-image-value-in-one-xaml-page-to-another-xaml-page-in-windows-pho)
3.  [将图像从一个页面传递到另一个 Windows Phone 7](https://stackoverflow.com/questions/6517745/passing-image-from-one-page-to-another-windows-phone-7)

和更多。这不是我要问的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T11:18:45.437

如果我正确理解了您的问题，则您正在尝试从另一个页面（例如 Page2.xaml）更新例如 MainPage.xaml 上的控件。

据我所知，没有办法从另一个页面访问页面控件，这对于我能想到的情况来说似乎是不必要的。

用于实现您正在尝试的方法通常是通过触发操作（如按下按钮）并将参数传递给您尝试更新控件的页面来完成的。在该页面的 onnavigatedto 事件（或视图模型构造函数，如果您使用 MVVM 模式）上，根据传递的参数更新您的控件。

如果您的更新是基于数据的，那么最佳实践是绑定一个可观察的集合或扩展 INotifyPropertyChanged 的​​对象（基本上是任何可以表示其属性之一已更改为 ui 的对象）并根据参数更改数据已通过。

如果这两个页面以某种方式同时可见并且它们之间不需要导航（例如弹出或滑动菜单类型的 ui），那么您可以将您在弹出窗口中显示的页面设置为用户控件，然后到达父母的控制由this.Parent。

如果您提供有关应用程序流程的更多细节，我会更有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T18:18:19.310

MVVM 模式将是一个不错的选择。说 MVVM 对于小型团队来说太复杂并不完全准确 - MVVM 的目的是解耦 Silverlight 或 WPF 代码。使用 Silverlight 页面的代码隐藏直接访问数据会在您的代码中产生耦合并产生技术债务。无论您是一名开发人员还是 100 名开发人员，如果您的 UI 与您的数据类耦合，如果您必须更改您的数据类，您将不得不对使用这些类的每个 UI 元素进行更改。这需要更长的时间，并使您的应用程序更难更改。

MVVM 使您的 UI（视图）对数据（您的模型）一无所知。ViewModel 是 UI 可以绑定到的代码，它管理 UI 中需要持久化到 Model 的事件，以及需要在 View 中表示的 Model 中的更改。出于这个原因，它处理事件，这听起来就像您在代码中需要的那样 - 一个可以存在于代码隐藏之外的事件，它可以在数据更改时更新绑定到它的视图。如果你有两个页面，那么其中一个页面上的事件将被发送到 ViewModel，它会在必要时对 Model（数据）进行更改，并将其传递回 ViewModel。然后，ViewModel 将更新绑定到该数据的任何 UI 元素（视图）。

[这里](http://blog.lab49.com/archives/2650)有一个非常好的演示如何实现 MVVM 设计模式 。这家伙经历了一个典型的 WPF 应用程序（就像 Silverlight 一样），其中 UI 代码隐藏实现了直接访问数据的事件处理程序，并使用 MVVM 模式对其进行重构。

# bash - BASH 脚本按日期排序

> ID：10041703
> 
> 赞同：2
> 
> 时间：2012-04-06T09:38:47.390
> 
> 标签：bash, sorting, date

我是 bash 脚本的新手，我们的教授让我们以这种格式对文件进行排序

```
peas|10.00|05 Apr 2012
pea soup|10.00|05 Jan 2012
ham|10.00|06 Apr 2012 
```

使用第三个字段上的日期，最近的项目出现在顶部。我尝试过使用过滤器和排序的组合，但它们不起作用。谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-06T10:59:32.850

尝试

```
sort  -t '|' -k 3.8,3.11nr  -k 3.4,3.6Mr -k 3.1,3.2nr < input
      ------ -------------  ------------ ------------
      sep    first key      second key   third key 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T10:08:33.093

```
$ cat input.txt | awk -F '|' '{sprintf("date +%%s -d \"%s\"", $3) | getline tm}; {print tm "\t" $0}' | sort | cut -f2-
pea soup|10.00|05 Jan 2012
peas|10.00|05 Apr 2012
ham|10.00|06 Apr 2012 
```

* * *

如果您不想调用外部命令`date`，
可以`mktime2`在以下位置编写自定义函数`awk`：

```
#!/bin/gawk -f
# script.awk

BEGIN {
    FS="|"
    m["Jan"] = "01"
    m["Feb"] = "02"
    m["Mar"] = "03"
    m["Apr"] = "04"
    m["May"] = "05"
    m["Jun"] = "06"
    m["Jul"] = "07"
    m["Aug"] = "08"
    m["Sep"] = "09"
    m["Oct"] = "10"
    m["Nov"] = "11"
    m["Dec"] = "12"
}

{
    print mktime2($3) "\t" $0 | "sort | cut -f2-"
}

function mktime2(s,    arr,yyyy,mm,dd)
{
    split(s, arr, " ")
    yyyy = arr[3]
    mm = m[arr[2]]
    dd = arr[1]
    return mktime(sprintf("%s %s %s 00 00 00", yyyy, mm, dd))
} 
```

* * *

```
# make script executable
$ chmod +x script.awk

# run the script
$ ./script.awk input.txt
pea soup|10.00|05 Jan 2012
peas|10.00|05 Apr 2012
ham|10.00|06 Apr 2012 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T11:40:23.377

Similar to kev's answer, here's one that doesn't use `awk`

```
while IFS=\| read -r item price date ; do printf '%s|%s|%s|%s\n' "$(date +%s -d "$date")" "$item" "$price" "$date" ; done < table.txt | sort -n -t\| | cut -d\| -f2- 
```

The idea is to add a field `sort` can use, sort by it, then strip it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T17:43:38.910

这可能对您有用（GNU 排序）：

```
 sort -t'|' -k3.8,3.11nr -k3.4,3.6Mr -k3.1,3.2nr file 
```

或者（如果你没有 GNU 排序）：

```
sed '1{x;s/^/Jan01Feb02Mar03Apr04May05Jun06Jul07Aug08Sep09Oct10Nov11Dec12/;x};G;s/\(.*|\(..\) \(...\) \(....\)\)\n.*\3\(..\).*/\4\5\2 \1/' file
sort -nr |
sed 's/^[^ ]* //' 
```

# ruby-on-rails - 通过无线将 Arduino 与 Web 应用程序 Ruby on Rails 连接

> ID：10041705
> 
> 赞同：1
> 
> 时间：2012-04-06T09:39:04.247
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, arduino, interfacing

我想用我的 arduino 开始一个小项目。这个想法是有这个通信流：

arduino <-> 无线板 <-> Wi-Fi 路由器 <-> Web 服务器 <-> Ruby on Rails 3 <-> 智能手机 <-> 浏览器

我找到了一个名为 RAD（Ruby Arduino Development）的框架，但最后一次更新是从 2008 年开始的。有人知道这个的另一种选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:21:23.480

[WiShield](http://www.asynclabs.com/store?page=shop.product_details&flypage=flypage.tpl&product_id=26&category_id=6)具有可以处理基本 TCP/IP的库。[源代码](https://github.com/asynclabs/WiShield)有[一个示例 HTTP 客户](https://raw.github.com/asynclabs/WiShield/master/examples/WebClient/webclient.c)端。这可以用作向 Rails 服务器发出请求的客户端的基础。

WiShield 似乎可以在很多地方使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-29T14:22:07.423

您可以通过带有**EtherCard**库的**ENC28J60**等以太网屏蔽通过 Internet 发送传感器值。然后你可以在你的 Rails 应用程序上创建一个 RESTful API（例如使用 Grape），然后从 Arduino 扩展板，使用我建议的**EtherCard**库将信息发送到这个 API 。

 ****如果你想使用wifi功能，概念是一样的，但是不要使用以太网屏蔽，而是使用这样的wifi[屏蔽](https://www.arduino.cc/en/Main/ArduinoWiFiShield)。

[在这里，您有](http://dreamingechoes.github.io/arduino/ruby/rails/physical-software-made-easy-with-arduino-and-ruby-on-rails/)一个使用以太网屏蔽的示例。****

# html - 使用 CSS 将单个字体应用于整个网站

> ID：10041706
> 
> 赞同：112
> 
> 时间：2012-04-06T09:39:13.647
> 
> 标签：html, css, fonts, font-face

我想在整个网站上使用一种名为“Algerian”的字体。因此，我需要更改所有 HTML 标签，并且我不想为不同的标签编写不同的代码，例如：

```
button{font-family:Algerian;}
div{font-family:Algerian;} 
```

下面写的方法也非常不鼓励：

```
div,button,span,strong{font-family:Algerian;} 
```

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-04-06T09:41:07.060

将`font-family`声明放入`body`选择器：

```
body {
  font-family: Algerian;
} 
```

然后，您页面上的所有元素都将继承此字体系列（当然，除非您稍后覆盖它）。

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2012-05-10T15:22:10.023

```
*{font-family:Algerian;} 
```

下面更好的解决方案 [使用 CSS 将单个字体应用于整个网站](https://stackoverflow.com/questions/10041706/applying-a-single-font-to-an-entire-website-with-css/35734554#35734554)

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2016-03-01T22:06:54.253

通用选择器`*`引用所有元素，这个 css 会为你做：

```
*{
  font-family:Algerian;
} 
```

但不幸的是，如果您使用的是[FontAwesome](https://fortawesome.github.io/Font-Awesome/icons/)图标，或者任何需要自己的字体系列的图标，这只会破坏图标并且它们不会显示所需的视图。

为避免这种情况，您可以使用`:not`选择器，fontawesome 图标示例是`<i class="fa fa-bluetooth"></i>`，因此您可以简单地使用：

```
*:not(i){
  font-family:Algerian;
} 
```

这会将这个系列应用于文档中的所有元素，除了带有标签 name 的元素`<i>`，您也可以对类执行此操作：

```
*:not(.fa){
  font-family:Algerian;
} 
```

这将把这个系列应用于文档中的所有元素，除了类“fa”的元素，它指的是 fontawesome 默认类，你也可以像这样定位多个类：

```
*:not(i):not(.fa):not(.YourClassName){
  font-family:Algerian;
} 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-04-06T18:52:41.567

通过使用 important 和通用选择器 * 确保移动设备不会使用其默认字体更改字体：

```
* { font-family: Algerian !important;} 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2012-04-06T09:52:42.187

```
* { font-family: Algerian; } 
```

通用选择器`*`引用任何元素。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-06T09:55:33.560

由于浏览器可能已经为表单元素定义了不同的字体，这里有两种在任何地方使用该字体的方法：

```
body, input, textarea {
    font-family: Algerian;
}

body {
    font-family: Algerian !important;
} 
```

在 pre/code、kbd 等元素上仍然会有等宽字体，但如果你使用这些元素，你最好在那里使用等宽字体。

重要提示：如果很少有人在他们的操作系统上安装此字体，则将使用列表中的第二种字体。在这里，您没有定义第二种字体，因此将使用默认的衬线字体，它将是 Times，Times New Roman，但可能在 Linux 上除外。
有两个选项：如果您的字体可免费用作可下载字体，请使用 @font-face 或添加备用字体：第二个、第三个等，最后是默认系列（无衬线、草书 (*)、等宽字体或衬线）。将使用用户操作系统上存在的列表中的第一个。

(*) Windows 上的默认草书是 Comic Sans。除非您想欺骗 Windows 用户，否则不要这样做 :) 这种字体很糟糕，除非您的孩子生日时欢迎它。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-15T16:27:07.287

如果“正文”需要使用 1 和相同的字体，请将其放在页面的头部：

```
<style type="text/css">
body {font-family:FONT-NAME ;
     }
</style> 
```

标签之间的所有`<body>`内容都`</body>`将具有相同的字体

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-01T15:26:13.963

好的，所以我遇到了这个问题，我尝试了几种不同的选择。

我使用的字体是 Ubuntu-LI ，我在我的工作目录中创建了一个字体文件夹。在字体文件夹下

我能够应用它......最终这是我的工作代码

我希望这适用于我的整个网站，所以我把它放在 css 文档的顶部。最重要的是 Div 标签（没关系，只要知道您在脚本后分配的任何单个字体都将优先）

```
@font-face{
    font-family: "Ubuntu-LI";
    src: url("/fonts/Ubuntu/(Ubuntu-LI.ttf"),
    url("../fonts/Ubuntu/Ubuntu-LI.ttf");
}

*{
    font-family:"Ubuntu-LI";
} 
```

如果我希望我所有的 H1 标签都是别的东西，可以说 sans sarif 我会做类似的事情

```
h1{
   font-family: Sans-sarif;
} 
```

在这种情况下，只有我的 H1 标签将是 sans-sarif 字体，而我页面的其余部分将是 Ubuntu-LI 字体

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-19T00:49:36.823

在 Bootstrap 中，网络检查员说标题设置为“继承”

我需要将我的页面设置为新字体

```
div, p {font-family: Algerian} 
```

这是在.scss

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-01-24T15:27:21.470

```
*{font-family:Algerian;} 
```

这个 html 对我有用。添加到 wordpress 中的画布设置。

看起来很酷-谢谢！

# javafx-2 - XYChart中的Y轴范围

> ID：10041707
> 
> 赞同：5
> 
> 时间：2012-04-06T09:39:20.457
> 
> 标签：javafx-2

![在此处输入图像描述](../Images/4499692258d072720585cd3bd4258889.png)

![在此处输入图像描述](../Images/d0e5bd5ba9f73d28109b6e4d79bfdc6f.png)

我的 XYChart 绘图存在缩放问题：我的数据系列的浮点值范围为 0.4 和 0.5，当在场景上绘制时，我得到最小 Y 值 1，所以我看不到任何绘制的内容。

如果我使用具有更高值（例如 > 100）的数据系列，则不会出现此问题

如何根据使用的数据系列值设置 y 轴？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T10:32:39.277

正如 JavaDoc for NumberAxis 构造函数中所述：`public NumberAxis(double lowerBound, double upperBound, double tickUnit)`- 您可以为轴提供下限和下限。

```
 NumberAxis xAxis = new NumberAxis("X-Axis", 0d, 1d, .05);
    NumberAxis yAxis = new NumberAxis("Y-Axis", 0d, 1d, .05);
    ObservableList<XYChart.Series> data = FXCollections.observableArrayList(
            new ScatterChart.Series("Series 1", FXCollections.<ScatterChart.Data>observableArrayList(
            new XYChart.Data(.1, .1),
            new XYChart.Data(.2, .2))));
    ScatterChart chart = new ScatterChart(xAxis, yAxis, data);
    root.getChildren().add(chart); 
```

**更新**：图表的自动调整范围也适用于我，请参阅下一个代码和屏幕截图。您可能想要升级到 JavaFX 2.1 或更高版本。

```
 NumberAxis xAxis = new NumberAxis();
    NumberAxis yAxis = new NumberAxis();
    ObservableList<XYChart.Series> data = FXCollections.observableArrayList(
            new ScatterChart.Series("Series 1", FXCollections.<ScatterChart.Data>observableArrayList(
            new XYChart.Data(.01, .1),
            new XYChart.Data(.1, .11),
            new XYChart.Data(.12, .12),
            new XYChart.Data(.18, .15),
            new XYChart.Data(.2, .2))));
    XYChart chart = new LineChart(xAxis, yAxis, data);
    root.getChildren().add(chart); 
```

![折线图](../Images/a9a0bab984880ba865eff496a99ab034.png)

# mysql - 选择唯一的下一个事件

> ID：10041708
> 
> 赞同：0
> 
> 时间：2012-04-06T09:39:21.233
> 
> 标签：mysql

我有一个表 tv_programs（prog_id、channel_id、prog_name、prog_start_date、prog_end_date）

对于每个频道，我希望在现在播出的节目之后开始下一个节目。所以每个通道一行。

我试过了

```
Select * from tv_programs where prog_start_date > NOW() 
```

这给了我从现在开始所有频道的所有节目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:40:54.340

```
SELECT * 
FROM tv_programs 
WHERE prog_start_date > NOW() 
GROUP BY channel_id            # for each channel
ORDER BY prog_start_date ASC   # order by this channel's start time 
```

有什么好处吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:41:31.720

你必须`GROUP BY channel_id`

所以最后的查询：

```
SELECT * 
FROM tv_programs 
WHERE prog_start_date > NOW() 
GROUP BY channel_id
ORDER BY prog_start_date ASC 
```

将返回程序以更快地为每个频道启动

# android - 如何处理基于路径的地图叠加层上的 onTap 事件？

> ID：10041710
> 
> 赞同：1
> 
> 时间：2012-04-06T09:39:31.087
> 
> 标签：android, path, overlay, android-mapview

我目前正在制作一个基于安卓地图的应用程序。这个应用程序的目的是在地图视图上显示复杂的叠加层。为此，我使用自定义覆盖和覆盖`draw()`功能。

那部分工作得很好，现在我想为每个叠加层处理 onTap 事件。我目前在做什么：

```
public class MapOverlay extends Overlay {

    public MapOverlay(Kml kml,String color,Projection projection){
    }   

    public void draw(Canvas canvas, MapView mapv, boolean shadow){
        super.draw(canvas, mapv, shadow);

        // draw path...
    }

    @Override
    public boolean onTap(GeoPoint gp, MapView mapView) {
        Log.i("Overlay","Say whaaaat!");
        return super.onTap(gp, mapView);
    }
} 
```

正如预期的那样，每个叠加层都覆盖了整个地图视图，因此当我点击叠加层时，每个叠加层都会触发 onTap 事件。假设我有 6 个叠加层，我不知道点击了哪条路径。

有解决方案吗？

更新：

现在，我已经成功地使用 ItemizedOverlay 在我的地图上显示了标记（也与 ItemizedBaloonOverlay 并列），但这并不是我想要的。

我想要一个像 PolygonOverlay 这样的东西，它会检测是否在多边形内完成了点击，并且在这种情况下只触发一个点击事件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:55:31.733

使用以下方法代替 onTap(GeoPoint gp,MapView map)

```
@Override
protected boolean onTap(int index) {
final OverlayItem item = mOverlays.get(index);        
//your code for your requirement
return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T12:52:33.047

基于另一个帖子的[这个答案](https://stackoverflow.com/a/2785865/334209)，我已经构建了我的自定义叠加层并且它有效！所以基本上，不需要 ItemizedOverlay 的东西（除非你想显示一个覆盖项）。

只需使用我之前的 MapOverlay 类并添加基本的 onTap() 函数：

```
public class MapOverlay extends Overlay {

    private Path path;

    public MapOverlay(){
        super();
    }

    @Override
    public void draw(Canvas canvas, MapView mapv, boolean shadow) {
        super.draw(canvas, mapv, shadow);

            // draw your path and store it in variable path
    }

    @Override
    public boolean onTap(GeoPoint geoPoint, MapView mapView) {

        RectF rectF = new RectF();
        path.computeBounds(rectF, true);
        Region region = new Region();
        region.setPath(path, new Region((int) rectF.left, (int) rectF.top, (int) rectF.right, (int) rectF.bottom));

        Point point = new Point();
        mapView.getProjection().toPixels(geoPoint, point);

        if (region.contains(point.x, point.y)) {
            Log.d("onTap", point.x+" "+point.y);
        }

        return super.onTap(geoPoint, mapView);
    }

} 
```

就是这样！剩下的唯一一件事就是检查 z 顺序，如果你只想触发一个上行。如果我在 MapOverlay 课程中跟踪它，那应该没什么大不了的。

# android - iOS 上的 MDM 代理

> ID：10041711
> 
> 赞同：6
> 
> 时间：2012-04-06T09:39:37.437
> 
> 标签：android, ios, apple-push-notifications, android-c2dm, mdm

我在 Android 中从事 MDM 工作，并在收到来自服务器的 C2DM 推送消息时使用 API 来锁定、擦除等。

当我尝试更多地探索它的 iOS 部分时，我有点困惑。我有一种感觉，我们不需要为 MDM 编写代理程序就可以在 iPhone 上工作。

那么它是完全由服务器管理的吗？还是我也必须有代理申请？如果是，您能帮我提供一个代理编程示例吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T10:50:25.413

对于 iPhone 的完全 MDM 控制，您需要查看从 Mac OS X Lion Server（他们将其添加到此操作系统版本）或第三方解决方案（MobileIron、Tarmac 等）发送的配置文件管理。这里也有一些很好的背景，有些过时的信息：[How to configure/install MDM server for iPhone and iPad](https://stackoverflow.com/questions/7441607/how-to-configure-install-mdm-server-for-iphone-and-ipad)

*编辑*

不需要单独的代理应用程序 - 它由 iOS 本身处理。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-20T04:03:24.363

如果您不使用 Lion Server，您可以实现自己的 MDM 服务器，为此您需要 iOS 企业开发者帐户。

要实现 MDM Server，请按照以下步骤操作。

1.  这个 pdf [https://media.blackhat.com/bh-us-11/Schuetz/BH_US_11_Schuetz_InsideAppleMDM_WP.pdf](https://media.blackhat.com/bh-us-11/Schuetz/BH_US_11_Schuetz_InsideAppleMDM_WP.pdf)非常有帮助。
2.  服务器 url 应仅以“https”开头，并且该 url 应退出，您在使用 IPCU 生成 mobileconfig 配置文件时必须提供这些详细信息。

3.  您也可以参考此页面：http: [//www.softhinker.com/in-the-news/iosmdmvendorcsrsigning](http://www.softhinker.com/in-the-news/iosmdmvendorcsrsigning)然后验证一些事情，使用此命令从 customerPrivateKey.pem 中删除密码

openssl rsa -in customerPrivateKey.pem -out PlainKey.pem

然后使用此命令合并从门户[https://identity.apple.com/pushcert/](https://identity.apple.com/pushcert/)下载的 APNS 证书（例如 CustomerCompanyName.pem）

```
cat CustomerCompanyName.pem PlainKey.pem > PlainCert.pem 
```

现在这个 PlainCert.pem 文件可以在您的服务器中用作 APNS/MDM 证书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T05:29:46.477

回答-

伙计们是的。我相信你们大多数人都有这个问题。有了在 iOS 上开发 MDM 的经验，我们不需要在 iOS 中单独编码客户端。iOS完全照顾它。

因此，您可能需要客户端只是为了指出指向具有配置文件的服务器的链接（因此您实际上可以使用 URL 中的密钥或 ID 记录谁和多少安装了应用程序），并且如果您必须管理 MDM 未提供的内容，例如位置更新等。

# php - PHP中的非重复错误处理

> ID：10041717
> 
> 赞同：0
> 
> 时间：2012-04-06T09:40:30.110
> 
> 标签：php, error-handling, yii

在我的大学时代，我记得一个处理此类错误的 php 代码..

```
$rs = $mymodel->find("usr=:usr",array("usr"=>"mahan")) on error echo $mymodel->geterror(); 
```

但我知道上面的代码是错误的......

这是一个我不记得了的错误处理代码..

也许你会建议这样的东西

```
/**First code suggestion**/
    if(!mymodel->find("usr=:usr",array("usr"=>"mahan"))){
        $rs = mymodel->find("usr=:usr",array(":usr"=>"mahan"));
    } 
```

或者像这样

```
/**Second code suggestion**/
    try{
       $rs = mymodel->find("usr=:usr",array("usr"=>"mahan"));
    }
    catch(Exception $e){
      dump($e);
    } 
```

我的问题是**我不想重复相同的操作**只是为了测试它是否会出现错误（显示在第一个代码建议中）。

第二个代码建议不起作用。

我在最重要的问题上显示的错误处理是错误的，但我认为它可以解决我的问题（我只是不记得正确的问题）......如果不告诉我你的建议。

我正在使用 Yii 框架

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:49:09.967

不明白你在哪里遇到了障碍，因为你仍然可以分配给一个变量：

```
if (! $rs = $mymodel->find("usr=:usr",array("usr"=>"mahan")))
{
   # failed.
} 
```

因此无需再次执行相同的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:50:32.360

您可能正在考虑臭名昭著的`mysql_query( $query ) or die( mysql_error( ) );`构造。PHP 从未有过“on error doSomething”结构。也就是说，仍然可以使用上述结构：

```
<?php

function foo( ) {
    return false;
}

function error( $string ) {
    echo $string;
}

$rs = foo( ) or error( 'Alas' ); 
```

如果`foo( )`返回`false`，则意味着`error( 'Alas' );`被调用。如果`foo( )`返回任何可以评估为 true 的内容（例如 true、int > 1、非空字符串、资源或结果集），`error( 'Alas' )`则永远不会调用。

不过，就个人而言，我更喜欢以下构造：

```
<?php

function foo( ) {
    return false;
}

function error( $string ) {
    echo $string;
}

$rs = foo( );

if( $rs === false ) { 
    error( 'Alas' );
} 
```

如果找不到用户，我不认为这是“异常”情况，只是找不到用户。异常非常有用，但在我无法进一步处理请求的情况下，我倾向于将它们用于冒泡特性。

# asp.net - 如何在 JSON Web 服务中将数据存储在客户端数据库中

> ID：10041718
> 
> 赞同：0
> 
> 时间：2012-04-06T09:40:30.517
> 
> 标签：asp.net, json, web-services

我有一个客户端页面，我有像empname，address，sex等字段，如果我们点击创建按钮，员工数据应该存储在数据库中。为此，我编写了一个类“EmployeeModel”并获取了字段写入属性和在客户端，我添加了服务参考，并在那个 .aspx.cs 中我写了这样的内容：

```
 EmployeeModel emp = new EmployeeModel();
    emp.FirstName = txtFirstName.Text;
    emp.LastName = txtLastName.Text;
    emp.Address = txtAddress.Text;
    emp.DateOfBirth1 = txtDOB.Text;
    emp.Sex = rdbtnGender.SelectedItem.ToString(); 
```

之后我必须编写哪些步骤才能将员工数据存储在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:11:07.327

首先，您需要使用以下 javascript 代码从客户端调用服务器

```
$.ajax({
               type: "get",
               url: "?ajax_mode=SaveMyData,
               dataType: "json",
               async: false,
               data: { headerData: JSON.stringify(emp) },
               cache: false,
               success: function(data, textStatus) {
                   if (data.status == "success") {

                   }
                   else {

                   }
               }
           }); 
```

现在处理 savemydata 函数来保存员工的信息

```
Public Sub SaveMyData()

    Dim objHeaderPostData As Dictionary(Of String, Object)
    Dim strParams As String = Request("headerData")
    Dim objOutput As New Ajax.BasicAjaxObjectOuput

    Dim jsS As New JavaScriptSerializer : objHeaderPostData = CType(jsS.DeserializeObject(strParams), Dictionary(Of String, Object))

    Dim strFirstName as string = CStr(objHeaderPostData.Item("FirstName"))
    '' get same way other infor from object objHeaderPostData

    Dim objOutput As New BasicOuputObject
    Dim objCommand As New SqlCommand
    Dim lstMyData As New List(Of MyData)
    Dim objMyData As MyData
    Dim objConn As New SqlConnection("Pass Connection String")
    objCommand.CommandText = '' write insert or update command as per requirement
    objCommand.Connection = objConn

    objConn.Open()
    objCommand.ExecuteScalar()

    objOutput.errorMessage = ""
    objOutput.obj = "Successfylly save record."
    objOutput.strMessage = "success"

    Dim objSerialiser As New System.Web.Script.Serialization.JavaScriptSerializer
    HttpContext.Current.Response.Write(objSerialiser.Serialize(objOutput))
    HttpContext.Current.Response.End()

End Sub 
```

希望这会帮助你。

有关 json 的更多信息，您可以[在此处访问我的博客](http://prakashpatani.blogspot.com/)

# ipad - 当我从代码更改标题时不显示完整按钮标题（iPad）

> ID：10041719
> 
> 赞同：0
> 
> 时间：2012-04-06T09:40:38.723
> 
> 标签：ipad, button, title

我正在尝试使用以下代码以编程方式更改我的 ipad 应用程序按钮标题：

```
btnCompany.titleLabel.text = @"Groenhuysen"; 
```

但是当我运行代码时，我可以看到标题是：Groen..en

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:26:17.060

试试这个：

```
[btnCompany setTitle:@"Groenhuysen" forState: UIControlStateNormal]; 
```

# gcc - 在 gcc 中禁用除少数警告之外的所有警告

> ID：10041720
> 
> 赞同：4
> 
> 时间：2012-04-06T09:40:42.220
> 
> 标签：gcc

在 gcc -w 用于禁用所有警告。但是在这种情况下，我无法启用特定的（例如 -Wreturn-type）。

是否可以禁用所有警告，但启用一些特定的警告？

作为一种解决方法，有没有办法一次生成所有 -Wno-xxx 的列表？它会有所帮助吗？我不想手动执行此操作只是为了发现它不等于-w。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-03T09:33:45.420

您可以使用以下命令获取`WARN_OPTS`适合直接注入您的变量`Makefile`：

```
gcc --help=warnings | awk '
    BEGIN       { print "WARN_OPTS = \\" }
    /-W[^ ]/    { print $1" \\"}
' | sed 's/^-W/    -Wno-/' >makefile.inject 
```

这为您提供了输出（in `makefile.inject`），例如：

```
WARN_OPTS = \
   -Wno- \
   -Wno-abi \
   -Wno-address \
   -Wno-aggregate-return \
   -Wno-aliasing \
   -Wno-align-commons \
   -Wno-all \
   -Wno-ampersand \
   -Wno-array-bounds \
   -Wno-array-temporaries \
    : : :
   -Wno-variadic-macros \
   -Wno-vector-operation-performance \
   -Wno-vla \
   -Wno-volatile-register-var \
   -Wno-write-strings \
   -Wno-zero-as-null-pointer-constant \ 
```

一旦将其放入您的实际`Makefile`中，只需将`$(WARN_OPTS)`其用作`gcc`命令的一部分。

它可能需要少量的润色才能达到：

*   摆脱无效的选项，例如`-Wno-`；
*   修复某些`-Wno-<key>=<value>`类型；和
*   删除最后一个`\`字符。

但与生成长列表相比，这只是最小的努力，您现在可以很简单地做到这一点。

当您确定您需要这些警告之一时，只需从`-Wno-<something>`后面切换到`-W<something>`.

# html - 使用 HTML 在网站中嵌入媒体播放器

> ID：10041723
> 
> 赞同：12
> 
> 时间：2012-04-06T09:41:03.620
> 
> 标签：html, embed, audio-player

我想做的是在网站中嵌入音乐文件（在网站上有一些小 mp3 播放器）。我希望观众能够通过使用定制的控制器来播放、停止等歌曲。

我如何对那些定制的按钮进行编码，以便它们都能正常工作？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-06T10:11:06.127

你可以使用很多东西。

*   如果您是标准迷，您可以使用 HTML5`<audio>`标记：

[这是音频标签的官方 W3C 规范](http://www.w3.org/wiki/HTML/Elements/audio)。

用法：

```
<audio controls>
 <source src="http://media.w3.org/2010/07/bunny/04-Death_Becomes_Fur.mp4"
         type='audio/mp4'>
 <!-- The next two lines are only executed if the browser doesn't support MP4 files -->
 <source src="http://media.w3.org/2010/07/bunny/04-Death_Becomes_Fur.oga"
         type='audio/ogg; codecs=vorbis'>
 <!-- The next line will only be executed if the browser doesn't support the <audio> tag-->
 <p>Your user agent does not support the HTML5 Audio element.</p>
</audio> 
```

[jsFiddle在这里。](http://jsfiddle.net/n882G/)

*   或者，如果您想支持旧版浏览器，您可以使用[许多可用的免费音频 Flash 播放器。](http://www.instantshift.com/2010/02/10/21-free-music-players-for-your-website/)如：

    *   [露水播放器](http://www.alsacreations.fr/dewplayer-en)
    *   [MP3 播放器](http://flash-mp3-player.net/)（无聊的名字……对吧？:)）
    *   [网站音乐播放器](http://download.cnet.com/Website-Music-Player/3000-2168_4-10512716.html)（更无聊......对吗？）
    *   [扎诺格球员](http://radio.zanorg.com/zplayer_eng.htm)

**注意：**我不确定哪个是*最好*的，因为我从未使用过（还）。

* * *

**更新：**正如另一个答案的评论中提到的，您使用的是 XHTML 1.0 Transitional。您也许可以`<audio>`使用一些 hack。

* * *

**更新 2：**我只记得另一种播放音频的方法。这**将**在 XHTML 中工作！！！这是完全符合标准的。

你使用这个**JavaScript**：

```
var aud = document.createElement("iframe");
aud.setAttribute('src', "http://yoursite.com/youraudio.mp4"); // replace with actual file path
aud.setAttribute('width', '1px');
aud.setAttribute('height', '1px');
aud.setAttribute('scrolling', 'no');
aud.style.border = "0px";
document.body.appendChild(aud); 
```

[这是我对另一个问题的回答。](https://stackoverflow.com/questions/9811429/html5-audio-tag-on-safari-has-a-delay/9983005#9983005)

* * *

**更新 3：**要自定义控件，您可以使用类似[这样](https://stackoverflow.com/a/7639343/986276)的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T10:11:30.307

绝对 HTML5 元素是要走的路。在几乎所有浏览器的最新版本中至少有基本的支持：

[http://caniuse.com/#feat=audio](http://caniuse.com/#feat=audio)

它允许指定当浏览器不支持该元素时要做什么。例如，您可以通过执行以下操作添加指向文件的链接：

```
<audio controls src="intro.mp3">
   <a href="intro.mp3">Introduction to HTML5 (10:12) - MP3 - 3.2MB</a>
</audio> 
```

您可以在以下链接中找到此示例以及有关音频元素的更多信息：

[http://hacks.mozilla.org/2012/04/enhanceyourhtml5appwithaudio/](http://hacks.mozilla.org/2012/04/enhanceyourhtml5appwithaudio/)

最后，好消息是 mozilla 的 April's dev Derby 就是关于这个元素的，所以这可能会提供大量很好的例子来说明如何充分利用这个元素：

[http://hacks.mozilla.org/2012/04/april-dev-derby-show-us-what-you-can-do-with-html5-audio/](http://hacks.mozilla.org/2012/04/april-dev-derby-show-us-what-you-can-do-with-html5-audio/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T14:02:41.623

[借助W3C Web Audio API ，这是一个使用](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)**有效 xHTML**和非侵入式 javascript制作可访问音频播放器的解决方案：

该怎么办 ：

1.  如果浏览器能够读取，那么我们显示控件
2.  如果浏览器无法读取，我们只需渲染文件的链接

首先，我们检查浏览器是否实现了 Web Audio API：

```
if (typeof Audio === 'undefined') {
    // abort
} 
```

然后我们实例化一个`Audio`对象：

```
var player = new Audio('mysong.ogg'); 
```

然后我们可以检查浏览器是否能够解码这种类型的文件：

```
if(!player.canPlayType('audio/ogg')) {
    // abort
} 
```

或者即使它可以播放编解码器：

```
if(!player.canPlayType('audio/ogg; codecs="vorbis"')) {
    // abort
} 
```

然后我们可以使用`player.play()`, `player.pause()`;

我已经完成了一个名为[nanodio](https://github.com/Synap/SynapUI/blob/master/src/audioplayer/jquery.nanodio.js)的小型 JQuery 插件来测试它。

您可以在[我的演示页面](http://musique.ccoste.fr)上查看它是如何工作的（对不起，文本是法语：p）

只需单击一个链接即可播放，然后再次单击以暂停。如果浏览器可以本地读取它，它会。如果不能，它应该下载文件。

这只是一个小例子，但您可以改进它以使用页面的任何元素作为控制按钮，或者使用 javascript 即时生成......无论您想要什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-30T16:06:30.807

我发现 IE 或 Chrome 中的大多数都卡​​住了，或者它们需要外部库。我只是想播放 MP3，我发现[http://www.w3schools.com/html/html_sounds.asp](http://www.w3schools.com/html/html_sounds.asp)页面很有帮助。

```
<audio controls>
  <source src="horse.mp3" type="audio/mpeg">
  <embed height="50" width="100" src="horse.mp3">
</audio> 
```

在我尝试过的浏览器中为我工作，但此时我没有一些旧的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-17T22:31:59.270

```
<html>

<head>
  <H1>
      Automatically play music files on your website when a page loads
    </H1>
</head>

<body>
  <embed src="YourMusic.mp3" autostart="true" loop="true" width="2" height="0">
  </embed>
</body>

</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T09:44:38.043

如果您使用的是 HTML 5，则有该`<audio>`元素。

在[MDN](https://developer.mozilla.org/En/HTML/Element/Audio)上：

> 该`audio`元素用于在 HTML 或 XHTML 文档中嵌入声音内容。音频元素是作为 HTML5 的一部分添加的。

* * *

更新：

为了在 5 之前的 HTML 版本（包括 XHTML）的浏览器中播放音频，您需要使用众多 flash 音频播放器之一。

# c++ - 损坏调用堆栈的 C/C++ 代码

> ID：10041735
> 
> 赞同：3
> 
> 时间：2012-04-06T09:41:45.583
> 
> 标签：c++, callstack

是否有可能在 c/c++ 中损坏调用堆栈的常用代码？我不是指一种黑客或其他东西，只是一个疏忽错误或其他东西，但不是随机的，这样每次都会损坏它。有人告诉我，一位前同事管理，但我认为这是不可能的。有人有这样的经历吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T09:43:28.243

是的，很容易。事实上，这是非常常见的问题之一。考虑一下：

```
void foo()
{
    int i;
    int *p = &i;
    p -= 5; // now point somewhere god knows where, generally undefined behavior
    *p = 0; // boom, on different compilers will end up with various bad things,
       // including potentially trashing the call stack
} 
```

本地数组/缓冲区的越界访问的许多情况都以废弃的堆栈告终。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T09:45:55.253

是的。在许多平台上，局部变量与调用堆栈一起存储；在这种情况下，在本地数组外部写入是破坏它的一种非常简单的方法：

```
void evil() {
    int array[1];
    std::fill(array, array+1000000, 0);
    return; // BOOM!
} 
```

更巧妙的是，返回对局部变量的引用可能会破坏稍后调用的函数的堆栈：

```
int & evil() {
    int x;
    return x;
}
void good(int & x) {
    x = 0;
    return; // BOOM!
}
void innocent() {
    good(evil());
} 
```

请注意，这些（以及实际上可能破坏堆栈的任何其他内容）都不合法；但编译器不必诊断它们。幸运的是，只要您启用适当的警告，大多数编译器都会发现这些错误。

# php - MYSQL SELECT 如何知道是否选择了某些东西

> ID：10041744
> 
> 赞同：1
> 
> 时间：2012-04-06T09:42:20.087
> 
> 标签：php, mysql, select

```
$result=mysql_query("SELECT * FROM $name WHERE date='$date'"); 
```

如何检查是否选择了任何内容。

我试过这些但没用: `if($result == NULL ){}` ,`if(!$result){}`

帮助 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:47:12.200

您可以使用

```
mysql_num_rows ($result); 
```

获取返回的行数

```
if(!$result) 
```

只会告诉查询是否执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:47:34.480

您可以按以下方式计算记录数

```
$num_rows = mysql_num_rows($result);
if($num_rows > 0)
{
   //do something..
} 
```

# android - Android AppWidget - 好奇的睡眠模式

> ID：10041746
> 
> 赞同：0
> 
> 时间：2012-04-06T09:42:32.380
> 
> 标签：android, widget, sleep, android-appwidget

可能是一个新手问题。我尝试过使用 android AppWidgetProvider onUpdate 方法并使用“睡眠”来引起一点延迟。

使用循环重复更新 - 事情是这样的：循环计数器设置为 20，睡眠时间为 1 秒 - 循环只执行 10 次 - 900 毫秒每秒延迟增加循环到 12，延迟 500 毫秒获得完整循环计数 20。这是如何解释的？

请参阅下面的 AppWidgetProvide 代码。该小部件仅包含一个文本视图。

```
public class SimpleWidget extends AppWidgetProvider {

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {
        // TODO Auto-generated method stub
        super.onUpdate(context, appWidgetManager, appWidgetIds);
        Log.w("on update here", " message");
        RemoteViews rm = new RemoteViews(context.getPackageName(),
                R.layout.widget_layout);
        for (int loop = 0; loop <= 20; loop++) {
            Log.w("on update here", "loop counter  =" + loop);
            rm.setTextViewText(R.id.tvWidget, "now you see it " + loop);
            for (int index = 0; index < appWidgetIds.length; index++) {

                appWidgetManager.updateAppWidget(appWidgetIds[index], rm);
                Log.w("updating", "aw number  =" + index);
            }
            try {
                Thread.sleep(2000, 0);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:53:44.310

您会注意到，在所有情况下，时间都接近 10 秒。这是因为 an`AppWidgetProvider`只是一个便利类。它只是简单地包裹 a`BroadcastReceiver`并解释小部件广播，然后调用适当的方法*（`onUpdate()`等等）。*

而且 BroadcastReceiver 必须在 10 秒内完成处理广播，否则你会得到[ANR](http://developer.android.com/guide/practices/design/responsiveness.html#anr)。

*这意味着`Thread.sleep()`在这里使用是一个坏主意。不要那样做。*

目前还不完全清楚你想在这里对我做什么。如果您想每 X 秒更新一次小部件，请使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)并定期安排更新意图广播或启动一个新线程来进行计时。

# iphone - 如何使用 MPMediaPickerController 从 iPod 库中录制歌曲播放？

> ID：10041752
> 
> 赞同：1
> 
> 时间：2012-04-06T09:43:01.797
> 
> 标签：iphone, objective-c, avaudiorecorder, mpmusicplayercontroller

我正在制作一个应用程序，我必须使用 MPMediaPickerController 从 iPod 音乐库播放音乐。播放歌曲后，我想用一些外部声音录制歌曲（例如：- 用户的声音）。我正在尝试做同样的事情，但是遇到问题，即当应用程序首次启动时，我从 iPod 音乐库中选择一首歌曲，然后单击开始录制按钮。当我单击开始录制按钮时，我之前播放的歌曲停止但录制工作正常。录制用户的声音工作正常，但歌曲没有被录制，因为我告诉点击“开始录制”按钮时歌曲停止。我正在使用 AVAudioRecorder 进行录制。这是我正在使用的代码。

```
-(Void)ViewDidLoad
{
self.musicPlayer = [MPMusicPlayerController iPodMusicPlayer];
}
- (void)playOrPauseMusic:(id)sender {
MPMusicPlaybackState playbackState = self.musicPlayer.playbackState;
if (playbackState == MPMusicPlaybackStateStopped || playbackState == MPMusicPlaybackStatePaused) {
    [self.musicPlayer play];
} else if (playbackState == MPMusicPlaybackStatePlaying) {
    [self.musicPlayer pause];
}
}

- (void)openMediaPicker:(id)sender {
MPMediaPickerController *mediaPicker = [[MPMediaPickerController alloc] initWithMediaTypes:MPMediaTypeMusic];
mediaPicker.delegate = self;
mediaPicker.allowsPickingMultipleItems = NO; // this is the default   
[mediaPicker shouldAutorotateToInterfaceOrientation:UIInterfaceOrientationLandscapeRight];
[self presentModalViewController:mediaPicker animated:YES];
}

- (void) startRecording
{   
[self.musicPlayer play];
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
NSError *err = nil;
[audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];
if(err){
    NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
    return;
}
[audioSession setActive:YES error:&err];
err = nil;
if(err){
    NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
    return;
}

recordSetting = [[NSMutableDictionary alloc] init];

// We can use kAudioFormatAppleIMA4 (4:1 compression) or kAudioFormatLinearPCM for nocompression
[recordSetting setValue :[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];

// We can use 44100, 32000, 24000, 16000 or 12000 depending on sound quality
[recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];

// We can use 2(if using additional h/w) or 1 (iPhone only has one microphone)
[recordSetting setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];

[recordSetting setObject:[NSNumber numberWithInt:12800] forKey:AVEncoderBitRateKey];
[recordSetting setObject:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
[recordSetting setObject:[NSNumber numberWithInt: AVAudioQualityMax] forKey: AVEncoderAudioQualityKey];

recorderFilePath = [NSString stringWithFormat:@"%@/MySound.caf", DOCUMENTS_FOLDER] ;

NSLog(@"recorderFilePath: %@",recorderFilePath);

NSURL *url = [NSURL fileURLWithPath:recorderFilePath];

err = nil;

NSData *audioData = [NSData dataWithContentsOfFile:[url path] options: 0 error:&err];
if(audioData)
{
    NSFileManager *fm = [NSFileManager defaultManager];
    [fm removeItemAtPath:[url path] error:&err];
}

err = nil;
recorder = [[ AVAudioRecorder alloc] initWithURL:url settings:recordSetting error:&err];
if(!recorder){
    NSLog(@"recorder: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
    UIAlertView *alert =
    [[UIAlertView alloc] initWithTitle: @"Warning"
                               message: [err localizedDescription]
                              delegate: nil
                     cancelButtonTitle:@"OK"
                     otherButtonTitles:nil];
    [alert show];

    return;
}

//prepare to record
[recorder setDelegate:self];
[recorder prepareToRecord];
recorder.meteringEnabled = YES;

BOOL audioHWAvailable = audioSession.inputIsAvailable;
if (! audioHWAvailable) {
    UIAlertView *cantRecordAlert =
    [[UIAlertView alloc] initWithTitle: @"Warning"
                               message: @"Audio input hardware not available"
                              delegate: nil
                     cancelButtonTitle:@"OK"
                     otherButtonTitles:nil];
    [cantRecordAlert show];

    return;
}

// start recording
[recorder recordForDuration:(NSTimeInterval) 2];

lblStatusMsg.text = @"Recording...";
selector:@selector(handleTimer) userInfo:nil repeats:YES];
} 
```

这是我的 MPMusicPlayer 和 AVAudioRecorder 的代码。请帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:18:25.127

您不能录制从 iPod 库导入的歌曲，只能录制 mp3 文件，为此您需要将 Mediaitem 转换为 mp3 格式。

你可以从[这里](https://stackoverflow.com/questions/8077725/application-crashed-while-importing-songs-from-ipod-library-in-iphone-for-ios-5)得到参考，我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T09:02:17.883

也许考虑同时播放两首曲目。您可以录制一个单独的配音轨道并触发它和您的 mp3 同时开始播放。显然，这只适用于您的应用程序。

# php - POST 变量到另一个类

> ID：10041753
> 
> 赞同：0
> 
> 时间：2012-04-06T09:43:02.387
> 
> 标签：php, forms, variables, post

我有一个使用 XPath 的搜索功能，当显示结果时也会回显一个复选框。

```
<form name="save" method="POST" action="saveProcess.php">
            <?php
            foreach ($holidays as $holiday) 
            {
                $resultTable .=  "<p><a href=\"{$holiday->link}\">{$holiday->title}</a>" . "<br/>" . 
                "{$holiday->pubDate}" . "<br>" . 
                "{$holiday->description}" . "<input type='checkbox' name='chk' value='{$holiday->title}' />" . "<br /></p>";            
            }
            ?>
            <input type="submit" value="submit"/>
        </form> 
```

我希望此复选框保留`{$holiday->title}`提交表单时将显示在 saveProcess.php 中的值，我使用该`isset`方法检查变量是否已设置。

```
if (isset($_POST['chk'])) {
    echo $_POST['chk'];
}
else
{
    echo"variable is not set";
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:56:50.517

问题是您将每个复选框命名为“chk”，当您提交表单时，这些值会被覆盖。这就是为什么它在 saveProcess.php 中没有得到任何东西的原因。您需要做的是指定 $_POST["chk"] 可以包含一个值数组，如下所示：

```
<input type='checkbox' name='chk[]' value='{$holiday->title}' /> 
```

注意名称中的方括号。现在 $_POST["chk"] 将是一个数组。

另一种方法是保持 html 原样，然后在 saveProcess.php 中获取数据，使用：

```
$HTTP_POST_VARS["chk"] 
```

第一部分基本上解释了为什么它不起作用以及如何修复它，而第二个建议只是获取数据的另一种方式。

祝你有美好的一天！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T09:48:56.790

您的代码对我来说看起来不错，请记住，仅在选中复选框时才发布复选框的值，如果`$_POST['chk']`未设置则未设置checket

编辑 - 因为您正在按照评论中的建议重新编写复选框，所以使用数组

```
 <?php
        foreach ($holidays as $holiday) 
        {
            $resultTable .=  "<p><a href=\"{$holiday->link}\">{$holiday->title}</a>" . "<br/>" . 
            "{$holiday->pubDate}" . "<br>" . 
            "{$holiday->description}" . "<input type='checkbox' name='chk[]' value='{$holiday->title}' />" . "<br /></p>";            
        }
        ?> 
```

然后服务器端`$_POST['chk']`将是一个数组

# uitableview - 如何在基于标签栏的应用程序中编辑表格行

> ID：10041754
> 
> 赞同：2
> 
> 时间：2012-04-06T09:43:16.950
> 
> 标签：uitableview, uitabbarcontroller, xcode4.2

全部

我正在使用包含 3 个选项卡的选项卡栏控制器开发一个演示应用程序。在第一个选项卡中，我使用了一个 Table view controller 。

我在编辑（添加/删除）表格行时遇到问题。我无法在表中添加或删除行。

当我在没有标签栏控件的情况下使用这个表格视图时，我能够修改表格。在这里我分享我的 tableviewcontroller.h 和 .m 文件。

```
 **tableviewcontroller.h**
        #import <UIKit/UIKit.h>

        @interface TableViewViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>    
        {
               IBOutlet UITableView *tableView1;
               SMutableArray *arry;
               NSString *enteredText;
               UITextField *myTextField;
               NSInteger rowIndex;
            }
        @property(nonatomic,readonly)NSString *enteredText;
        - (IBAction) EditTable:(id)sender;
            @end

            **TableViewViewController.m**
            #import "TableViewViewController.h"
            @implementation TableViewViewController
            @synthesize enteredText;

        - (void)viewDidLoad 
        {
          arry=[[NSMutableArray alloc]initWithObjects:@"iPhone",@"MacMini",@"iMac",@"MacBookProAir",@"MacBookPro",nil];
          self.title = @"Table View ";
          UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithTitle:@"Edit" style:UIBarButtonItemStyleBordered target:self action:@selector(EditTable:)];
          [self.navigationItem setLeftBarButtonItem:addButton];
          [super viewDidLoad];
        }
        - (void)didReceiveMemoryWarning 
        {
          [super didReceiveMemoryWarning]; 
        }
- (void)dealloc 
{
  [super dealloc];
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{
  return 1;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
 int count = [arry count];
 if(self.editing) count++;
 return count;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *CellIdentifier = @"Cell";
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil)
  {
    cell = [[[UITableViewCell alloc]initWithFrame:CGRectZero    reuseIdentifier:CellIdentifier]autorelease];
  }
  int count = 0;
  if(self.editing && indexPath.row != 0)
    count = 1;
  if(indexPath.row == ([arry count]) && self.editing)
  {
    cell.textLabel.text = @"ADD";
        return cell;
  }
  cell.textLabel.text = [arry objectAtIndex:indexPath.row];
  return cell;
}
- (IBAction)AddButtonAction:(id)sender
{
   [arry addObject:@"asd"];
   [tableView1 reloadData];
}
- (IBAction)DeleteButtonAction:(id)sender
{
   [arry removeLastObject];
   [tableView1 reloadData];
}
- (IBAction) EditTable:(id)sender
{
   if(self.editing)
   {
      [super setEditing:NO animated:NO]; 
      [tableView1 setEditing:NO animated:NO];
      [tableView1 reloadData];
      [self.navigationItem.leftBarButtonItem setTitle:@"Edit"];
      [self.navigationItem.leftBarButtonItem setStyle:UIBarButtonItemStylePlain];
   }
   else
   {
      [super setEditing:YES animated:YES]; 
      [tableView1 setEditing:YES animated:YES];
      [tableView1 reloadData];
      [self.navigationItem.leftBarButtonItem setTitle:@"Done"];
      [self.navigationItem.leftBarButtonItem setStyle:UIBarButtonItemStyleDone];
   }
}
-(UITableViewCellEditingStyle)tableView:(UITableView *)aTableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath 
{
   if (self.editing == NO || !indexPath) 
        return UITableViewCellEditingStyleNone;
   if (self.editing && indexPath.row == ([arry count])) 
   {
        return UITableViewCellEditingStyleInsert;
   } 
   else 
   {
    return UITableViewCellEditingStyleDelete;
   }
        return UITableViewCellEditingStyleNone;
}
-(void)tableView:(UITableView *)aTableView commitEditingStyle:UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
{
   if (editingStyle == UITableViewCellEditingStyleDelete) 
   {
      //[arry removeObjectAtIndex:indexPath.row];
      rowIndex=indexPath.row;
      UIActionSheet *actionSheet=[[UIActionSheet alloc]
      initWithTitle:@"Are you sure you want to delete this ?"
      delegate:self
      cancelButtonTitle:@"Cancel"
      destructiveButtonTitle:@"Delete"
      otherButtonTitles:nil,nil];
      [actionSheet showInView:self.view];
      [actionSheet  release];
   } 
   else if(editingStyle == UITableViewCellEditingStyleInsert)
   {
      UIAlertView *alert = [[UIAlertView alloc] 
                       initWithTitle:@"Enter Row value" 
                       message:@"blank" 
                       delegate:self 
                       cancelButtonTitle:@"Dismiss"
                       otherButtonTitles:@"OK!", nil];
      myTextField= [[UITextField alloc] initWithFrame:CGRectMake(12, 45, 260, 25)];
      [myTextField setBackgroundColor:[UIColor whiteColor]];
      [alert addSubview:myTextField];
      [alert show];
      [alert release];
   }
}

-(void) actionSheet:(UIActionSheet *) actionSheet willDismissWithButtonIndex:(NSInteger)buttonIndex;
{
   if(buttonIndex==0)
   {
      [arry removeObjectAtIndex:rowIndex ];
      [tableView1 reloadData];
   }
   else if (buttonIndex==1)
   {
      [tableView1 reloadData];
   }
}
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
   if (buttonIndex == 0)
   {
      [tableView1 reloadData];
   }
   else if (buttonIndex == 1 && myTextField.hasText!=NO)
   {   
      NSString *txt=[myTextField text];
     [arry addObject:txt ];
     [tableView1 reloadData];
   }
}
-(BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
   return YES;
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:01:00.023

出于好奇，您为什么要使用 a`TableVIewController : UIViewController <UITableViewDelegate, UITableViewDataSource>`而不是仅仅`TableViewController`继承 from `UITableViewController`？您是否在此视图中显示任何其他内容？因为如果您不是，您可能应该将视图控制器子类化为最接近您打算拥有的视图控制器 - 这是一个`UITableViewController`.

如果这样做，您还可以通过`tableView`（或`self.tableView`，但不是必需的）属性访问此视图的默认表。这不是你的问题的原因，但它是一种很好的做法。

# c# - C# 检查一个对象是否可以转换为另一个对象失败？

> ID：10041757
> 
> 赞同：5
> 
> 时间：2012-04-06T09:43:29.080
> 
> 标签：c#, inheritance, reflection

我正在尝试检查对象是否可以使用`IsAssignableFrom`. 但是我没有得到预期的结果......**我在这里错过了什么吗？**

```
//Works (= casts object)
(SomeDerivedType)factory.GetDerivedObject(); 

//Fails (= returns false)
typeof(SomeDerivedType).IsAssignableFrom(factory.GetDerivedObject().GetType()); 
```

**编辑：**

上面的例子似乎是错误的，并不能很好地反映我的问题。

我`DerivedType`在代码中有一个对象，它被转换为`BaseType`：

```
BaseType someObject = Factory.GetItem(); //Actual type is DerivedType 
```

我也有一个`PropertyType`反思：

```
PropertyInfo someProperty = entity.GetType().GetProperties().First() 
```

**我想检查是否`someObject`可*分配给*（可转换为）`PropertyType`of `someProperty`。我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T09:52:36.040

当你有

```
 class B { }
 class D : B {} 
```

然后

```
typeof(B).IsAssignableFrom(typeof(D))   // true
typeof(D).IsAssignableFrom(typeof(B))   // false 
```

我认为您正在尝试第二种形式，这并不完全清楚。

最简单的答案可能是测试：

```
 (factory.GetDerivedObject() as SomeDerivedType) != null 
```

* * *

编辑后：

您想知道的不是 someObject 是否可以分配给 SomeProperty ，而是它是否是*castable*。

基础是：

```
bool ok = someProperty.PropertyType.IsInstanceOfType(someObject); 
```

但这仅处理继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T09:51:29.380

尝试使用

```
if (factory.GetDerivedObject() is SomeDerivedType)
{
//do
} 
```

或者

```
var tmp = factory.GetDerivedObject() as SomeDerivedType;
if (tmp != null)
{
//do
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T10:00:02.870

由于我看到您`GetDerivedObject()`的不是通用的，并且您必须将其结果显式转换为`SomeDerivedType`，所以我假设它`GetDerivedObject`被定义为返回一个基类型`SomeDerivedType`（在极端情况下，是 an `object`）。

如果是这样，这一行：

```
typeof(SomeDerivedType).IsAssignableFrom(factory.GetDerivedObject().GetType()); 
```

翻译成

```
typeof(SomeDerivedType).IsAssignableFrom(SomeBaseType); 
```

这通常是错误的，因为您不能将基类型分配给派生类型（您需要显式转换，这就是您所做的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T10:02:53.807

试试这个。它可能会起作用。它可能需要一些小的更改才能编译。

```
TypeBuilder b1 = moduleBuilder.DefineType(factory.GetDerivedObject().GetType().Name, TypeAttributes.Public, typeof(SomeDerivedType));

typeof(SomeDerivedType).IsAssignableFrom(b1)) 
```

# c# - 从字符串动态创建代码，执行它以调用 form.showdialog() 方法；

> ID：10041759
> 
> 赞同：0
> 
> 时间：2012-04-06T09:44:11.227
> 
> 标签：c#, visual-studio

我设法创建了一个动态创建的字符串以编译为代码，它执行 MessageBox.Show 等基本内容或创建整数、字符串等。现在我想从我生成的代码中打开一个实例，我该如何实现那？我使用从网上找到的代码开始，如下所述。问候。

```
 string lcCode = this.memoEdit1.Text;

            lcCode = @"
using System;
using System.IO;
using System.Windows.Forms;

namespace MyNamespace {
public class MyClass {

public object DynamicCode(params object[] Parameters) {
" + lcCode + 
"return (object) DateTime.Now;"+
"}   }    }";

            ICodeCompiler loCompiler = new CSharpCodeProvider().CreateCompiler();
            CompilerParameters loParameters = new CompilerParameters();

            // ref assmbles lazım ekle,mssql vs.
            loParameters.ReferencedAssemblies.Add("System.dll");
            loParameters.ReferencedAssemblies.Add("System.Windows.Forms.dll");

            loParameters.GenerateInMemory = true;

            // yuru
            CompilerResults loCompiled = loCompiler.CompileAssemblyFromSource(loParameters, lcCode);

            #region errör
            if (loCompiled.Errors.HasErrors)
            {
                string lcErrorMsg = "";

                // erörrler
                lcErrorMsg = loCompiled.Errors.Count.ToString() + " Errors:";
                for (int x = 0; x < loCompiled.Errors.Count; x++)
                    lcErrorMsg = lcErrorMsg + "\r\nLine: " + loCompiled.Errors[x].Line.ToString() + " - " +
                        loCompiled.Errors[x].ErrorText;

                MessageBox.Show(lcErrorMsg + "\r\n\r\n" + lcCode, "Erörrz", MessageBoxButtons.OK, MessageBoxIcon.Error);

                return;
            }

            # endregion

            //this.memoEdit1.Text = lcCode;

            Assembly loAssembly = loCompiled.CompiledAssembly;

            // Object dinamik !!!!1!1  o yüzden obje kalsın!

            object loObject = loAssembly.CreateInstance("MyNamespace.MyClass");
            if (loObject == null)
            {
                MessageBox.Show("Class error");
                return;
            }

            object[] loCodeParms = new object[1];
            loCodeParms[0] = "Test";

            try
            {
                object loResult = loObject.GetType().InvokeMember("DynamicCode",BindingFlags.InvokeMethod, null, loObject, loCodeParms);

                //MessageBox.Show("Method Call Result:\r\n\r\n" + loResult.ToString(), "Sonuç", MessageBoxButtons.OK, MessageBoxIcon.Information);
            }
            catch (Exception loError)
            {
                MessageBox.Show(loError.Message, "Erörrz", MessageBoxButtons.OK, MessageBoxIcon.Information);
            } 
```

# c# - 将下拉框中的选定文本保存到数据库时出现无效的列名错误

> ID：10041762
> 
> 赞同：0
> 
> 时间：2012-04-06T09:44:32.120
> 
> 标签：c#, sql-server, database, ado.net

使用平台：Microsoft Visual Studio 2010 (C#)
数据库：SQL Server 2008 R2 Express

我想从下拉列表中获取文本并将其放入数据库表中。我收到错误消息

> 列名“类型”无效。

尽管列存在于数据库表中。

```
da.InsertCommand = new SqlCommand("insert into tblProductMaster ([Name],[Type],[Height],[Width],[Length],[Price]) values( @Name , @Type , @Height , @Width , @Length , @Price )", con);

da.InsertCommand.Parameters.Add("@Name", SqlDbType.VarChar).Value = txtName.Text;
da.InsertCommand.Parameters.Add("@Type", SqlDbType.VarChar, 10).Value = ddlType.SelectedItem.ToString();
da.InsertCommand.Parameters.Add("@Height", SqlDbType.Float).Value = float.Parse(txtHeight.Text);
da.InsertCommand.Parameters.Add("@Width", SqlDbType.Float).Value = float.Parse(txtWidth.Text);
da.InsertCommand.Parameters.Add("@Length", SqlDbType.Float).Value = float.Parse(txtLength.Text);
da.InsertCommand.Parameters.Add("@Price", SqlDbType.SmallMoney).Value = int.Parse(txtPrice.Text);

da.InsertCommand.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:47:15.907

我相信您的问题是您使用的是[SQL Server 保留字（“大小”）](http://msdn.microsoft.com/en-us/library/aa238507%28v=sql.80%29.aspx)，并且您没有正确地将其封装在您的`INSERT`语句中。

试试这个：

```
da.InsertCommand = new SqlCommand("insert into tblProductMaster ([Name], [Size], [Height], [Width], [Length], [Price]) values(@Name, @Size, @Height, @Width, @Length, @Price)", con); 
```

注意列名周围的`[`& `]`... 这将告诉 SQL Server 将它们视为列。

**警告：**如果可以，我*强烈建议您更改这些列名。*使用任何产品的保留字都是非常糟糕的数据库设计，并且会继续给您带来问题和/或额外的工作。最好尽快修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:21:31.027

@Sagar 试试这个

```
string strCmd = @"insert into tblProductMaster ([Name], [Size], [Height], [Width], [Length], [Price]) values(@Name, @Size, @Height, @Width, @Length, @Price)"; 
```

然后

```
SqlCommand cmd = new SqlCommand(strCmd, con);  
cmd.Parameters.Add("@Size", SqlDbType.VarChar, 10, ddlSize.SelectedItem.Value.ToString());  

da.InsertCommand = cmd; 
```

# python - 找不到文件错误

> ID：10041765
> 
> 赞同：1
> 
> 时间：2012-04-06T09:44:46.233
> 
> 标签：python, windows, file

用于将大型数据文件拆分为许多较小文件（大约 100,000 个左右）的小型 python 脚本 - 基本上是地图平铺。

无论如何，在运行脚本很长一段时间（20 小时以上）后，它会死：

```
IOError: [Errno 2] No such file or directory: ...... 
```

现在这让我感到奇怪，因为在脚本运行之前没有文件存在 - 并且 f.close() 在每个文件都被写入后被调用，所以 FD 限制似乎并不负责......（以及大量磁盘空间）

另一个奇怪的事情是，当脚本死亡时，它已经创建/写入的所有文件（大约 55,000 个）与包含目录一起被删除。

我使用多处理模块为每个 CPU 内核创建一个进程，并且所有 4 个在死亡时都吐出相同的消息 - 但在他们正在处理的数据部分中有一个文件（也许这是相关的？）

我希望可以解决这个问题，但我只是好奇为什么会发生这种情况？

*编辑：有关更多上下文，脚本将 GSHHS 地理数据拆分为小“图块”。现在，我已经成功地将数据库的较低分辨率部分执行到包含地球较大区域的文件中 - 在尝试将高分辨率数据拆分为 1x1° 瓷砖时它崩溃了*

# django - django 中更好的架构是不同的应用程序。还是针对不同组件的单个应用程序？

> ID：10041766
> 
> 赞同：0
> 
> 时间：2012-04-06T09:44:46.330
> 
> 标签：django, django-models, django-apps, django-users, django-project-architect

我打算有一个应用程序。我想让不同的事物相互关联，并想知道我应该将它们作为不同的模型还是不同的应用程序。显然，如果这是 LMS 中的学生、教师，那么它们是 LMS 的必要组成部分，而如果这是工作、专业和公司，那么与工作相关的内容可能不同，专业人士可以拥有具有不同特征的完整个人资料，公司可以拥有不同的目录列表等类似功能。

因此，作为用户的公司和专业人士也应该有所作为。应用。并作为不同的应用程序工作。？这种方式会好吗？作为乔布斯应用程序。并非总是到处都需要有专业数据或雇主所有数据，而不仅仅是姓名。因此，将它们作为差异似乎更方便。应用程序，以便它可以在其他地方使用。那是正确的方法吗？

或者

因为我也希望这个项目灵活，所以上面的内容会使其更复杂吗？我是否应该将它们视为差异。模型而不是差异。应用。由于 Company 和 Professional 是 users ，django 也为此提供了 Profile 功能。那么这是正确的方法吗？

哪种方式更好？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:18:34.517

这里没有确切的答案，所以这是我的看法。

拥有多个应用程序而不是一个大应用程序总是好的。原因：

*   应用程序变得更小，更容易维护小段代码；
*   项目结构变得更加清晰，我只需要查看文件管理器即可看到项目的主要部分；
*   应用程序之间的交互变得明确：易于测试并防止不必要的耦合。

并非每个 Django 应用程序都应该是可插拔的。有两个相互依赖的应用程序是可以的（如果您不打算单独分发它们）。这就像有两个依赖函数：它没有任何问题。

# objective-c - 什么是文件名包含“+”的导入语句？

> ID：10041770
> 
> 赞同：3
> 
> 时间：2012-04-06T09:45:07.120
> 
> 标签：objective-c, cocoa, import, header-files

我在一些源代码（由其他开发人员）中看到了这样的内容：

```
#import "SomeClass+SomeOtherClass.h" 
```

是`+`为了什么？这是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T09:49:43.467

假设您想向现有类（exp: `NSString`）添加功能。您可以通过创建子类或使用类别来做到这一点。并且通常使用模式 : 来命名定义类别的文件`MyClass+MyCategory.h`。

例如，我们可以`reverseString`在类别`NSString`中为类添加方法：

```
// File NSString+reversable.h
- (NSString *)reverseString;

// File NSString+reversable.m
- (NSString *)reverseString
{
    // Implementation
} 
```

查看此[文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)以获取有关类别的更多信息。

然后您可以在另一个类中使用该类别：

```
#import "NSString+reversable.h"
// ...

NSString *aString = @"Hello!";
NSString *reversedString = [aString reverseString]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T09:49:52.397

标头/源文件名中的“+” -**按照惯例**- 用于描述`Category`实现。

**例子 ：**

假设您想向现有类（例如`NSString`类）添加一些功能。( `NSString+Utilities.h`)

```
// NSString+Utilities.h

@interface NSString (Utilities)
-(NSString *) doSthWithThisString;
@end 
```

* * *

```
// NSString+Utilities.m

@implementation NSString (Utilities)

-(NSString *) doSthWithThisString
{
  NSMutableString *transformedStr = [self copy];

  // Do sth

  return transformedStr;
}

@end 
```

* * *

**使用它 ：**

```
// in another file

#import "NSString+Utilities.h"

- (void)awakeFromNib
{
    NSString* myString = @"This is a string";

    // you may use our new NSString method as much as any already-existing one
    NSString* newString = [myString doSthWithThisString];
} 
```

* * *

**参考 ：**

*   [Mac OS 开发人员库 - 类别和扩展](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocCategories.html)
*   [Objective-C 类别](http://macdevelopertips.com/objective-c/objective-c-categories.html)- [Wiki](http://en.wikipedia.org/wiki/Objective-C#Categories)

# ruby-on-rails-3 - Rails 3 对存储属性的验证

> ID：10041774
> 
> 赞同：2
> 
> 时间：2012-04-06T09:45:39.200
> 
> 标签：ruby-on-rails-3, validation, activerecord

好吧，我们都知道最后一个[ActiveRecord::Store](http://api.rubyonrails.org/classes/ActiveRecord/Store.html)类的惊人新特性。

但是我们怎样才能安全地进行验证呢？这里有一个例子：

```
class User
  has_many :posts
end

class Post
  belongs_to :user
  store :composed_attribute, accessors: [:attribute_1, :attribute_2]

  validates :attribute_1, presence: true # This works great!
  validates :attribute_2, presence: true,  uniqueness: {scope: :user_id, message: "must be unique."} # This fails!
end 
```

第一个验证效果很好，但第二个验证失败并且无法*理解* `undefined method 'text?' for nil:NilClass`。

在数据库中，所有内容都以 yaml 格式存储。但我们无法确定顺序，那么执行此类验证的最佳方式是什么？

**免责声明**

我知道，也许在这种情况下，将属性存储在一起并不是一个好主意，主要是为了解决性能问题，但无论如何这是一个有趣的话题。

# gwt - GWT - 如何将业务对象关联到小部件

> ID：10041781
> 
> 赞同：0
> 
> 时间：2012-04-06T09:46:08.333
> 
> 标签：gwt, widget

我想要一种方法来轻松地将小部​​件绑定回它正在呈现的业务对象。因此，当用户与小部件交互时，我可以轻松确定持有该小部件数据的业务对象。

例如，如果我们想象一个日历小部件，我们将使用 AbsolutePanel 来实现。对于每个 appt 对象，我们将为日历添加一个标签。然后，当用户单击标签时，他可以更新应用程序。所以我需要知道 label 指的是哪个 appt 对象。

例如，如果我们看下面的代码；如果约会的标签收到点击，我如何找出它代表的应用程序？我能看到的唯一解决方案是为 Label 创建一个 ApptLabel 子类，该子类将包含对其 appt 的引用。这很好，但该示例说明了一个更普遍的需求，即将小部件与数据对象相关联；然而，这意味着在视图中存在的每个对象都需要子类化一个小部件。这似乎很重 - 我希望在框架中找到一些东西，例如我可以设置为对象键的小部件中的字符串属性

我尝试过的其他方法；维护 Map 的地图——这不起作用，因为我创建的标签对象似乎不一样（就 Object.equals 而言，我猜这是 HashMap 使用的）

```
class WidgetCalendar extends Composite { 
    AbsolutePanel m_panel = new AbsolutePanel();
    m_panel.setStylePrimaryName("calendar");
    m_panel.setPixelSize(width, height);

    public WidgetCalendar(ArrayList<BomAppt> appts) {
       initWidget(m_panel);
       for (BomAppt a : appts) {
          Label l = new Label();
          l.addClickHandler(new ClickHandler() {
    public void onClick(ClickEvent event) {
    // how do I know my BomAppt in here ?                   
       }

          m_panel.add(l, someX, someY);
       }
    }
} 
```

理想情况下，我可以做类似此类 WidgetCalendar extends Composite { AbsolutePanel m_panel = new AbsolutePanel(); m_panel.setStylePrimaryName("日历"); m_panel.setPixelSize（宽度，高度）；

```
 public WidgetCalendar(ArrayList<BomAppt> appts) {
       initWidget(m_panel);
       for (BomAppt a : appts) {
          Label l = new Label();
          l.setItemData(a.getUniqueId());
          l.addClickHandler(new ClickHandler() {
            public void onClick(ClickEvent event) {
              BomAppt a = BomAppt.getApptWithId(e.getItemData())
            }
          }
          m_panel.add(l, someX, someY);
       }
    }
} 
```

这是我创建子类的解决方案，这对我来说似乎很重，我更喜欢更简单的东西

```
class ApptLabel extends Label {
    public ApptLabel(BomAppt a) {
      m_a = a;
  this.addClickHandler(new ClickHandler() {
    public void onClick(ClickEvent event) {
      m_a.doSomething();
            });
    }

    BomAppt m_a;
}

class WidgetCalendar extends Composite { 
    AbsolutePanel m_panel = new AbsolutePanel();
    m_panel.setStylePrimaryName("calendar");
    m_panel.setPixelSize(width, height);

    public WidgetCalendar(ArrayList<BomAppt> appts) {
       initWidget(m_panel);
       for (BomAppt a : appts) {
          BomLabel l = new BomLabel();
          l.addClickHandler(new ClickHandler() {
    public void onClick(ClickEvent event) {
    // how do I know my BomAppt in here ?                   
       }

          m_panel.add(l, someX, someY);
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:23:37.830

> 例如，如果我们看下面的代码；如果约会的标签收到点击，我如何找出它代表的应用程序？

通过使用[复合模式](http://www.javaworld.com/javaworld/jw-09-2002/jw-0913-designpatterns.html)，您可以找出单击了哪个小部件，最初您应该创建自己的自定义约会小部件，该小部件负责绘制一个约会。在您的约会小部件中，您可以拥有一组其他小部件，在您的情况下，用于标签添加点击处理程序。一旦用户单击该标签，您就可以使用其数据执行业务逻辑，并且可以表示数据。

```
public class Appointment extends Composite { 
      private AppointmentDetails data;
      public Appointment(AppointmentDetails data){
           draw(data);
      }

      private void draw(AppointmentDetails data){
         Label label = new Label();
         label.addClickHandler(new ClickHandler() {
         public void onClick(ClickEvent event) {
             // do your business logic with this AppointmentDetails
             }
         });
      }

} 
```

之后，您应该有一个包含多个约会的日历小部件。请记住：**您的每个类都服务于一个非常明确定义的目的，与具有其他明确定义目的的其他类分开。**

# maven - Maven 忽略 settings.xml 文件

> ID：10041782
> 
> 赞同：12
> 
> 时间：2012-04-06T09:46:13.870
> 
> 标签：maven, maven-2, maven-3

我在 settigns.xml 文件中添加了代理配置，但 Maven 没有使用它，我通过使 settings.xml 文件无效来确认这一点。我运行了 maven install 命令来更新设置和全局设置以指向正确的文件，仍然没有运气。我正在使用 maven3.0.4。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-07T09:28:09.843

尝试使用 -X 选项运行 Maven。它应该作为调试输出的一部分打印正在使用的设置文件。

由于您已经尝试使用无效文件，我敢打赌您的文件位置有问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T10:07:53.817

确保它在正确的目录中（HOME/.m2/settings.xml）

您可以在此处找到相关路径和代理示例：[Maven 代理设置不起作用](https://stackoverflow.com/questions/10033286/maven-proxy-settings-not-working)

当然，参考总是有用的：[https ://maven.apache.org/settings.html](https://maven.apache.org/settings.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-14T08:13:33.240

说起来几乎是愚蠢的，但它可能会为其他人节省一些时间：如果您使用的是新计算机，请确保显示文件扩展名。否则你的“settings.xml”文件实际上可能是一个“settings.xml.txt”文件......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-02T14:11:49.273

由于没有可接受的答案，而我今天遇到了这个问题，其他答案证明文件路径正确，因此无法解决：

解决方案是重新启动计算机。不，认真的。重新启动后，保证 Maven 再次读取 settings.xml 文件并使用您所做的任何更改。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-08T20:06:59.553

您是否尝试过这些选项：从命令行指定设置文件？

```
mvn -o –Dmaven.repo.local=$HOME/.my_m2path/repository clean install --settings $HOME/.my_m2path/settings.xml  Dcheckstyle.skip=true –DskipTests 
```

一些可能不需要的选项

1.  -o 用于离线（除非您的 m2 中有所有存储库，否则建议跳过此选项）
2.  跳过测试用于在构建时跳过测试
3.  –Dmaven.repo.local - repo path - 如果你有自己的 repo 路径，那么使用这个选项
4.  --settings $HOME/.my_m2path/settings.xml （记住设置和路径之间有空格）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-17T13:51:19.677

## 对于那些使用 Linux 的人

在 Ubuntu 软件包存储库（可能还有其他 disto）中，有两个 maven 软件包：`maven`和`maven2`. 出于某种原因，我已经`maven2`安装了，这似乎`settings.xml`在`~/.m2`.

作为解决方案，我使用删除它

```
sudo apt-get purge maven2 
```

并安装了另一个

```
sudo apt-get install maven 
```

### 这是怎么回事？

我找不到可靠的来源，但显然`maven2`是旧版本（2.x），因为最新的 maven 有 3.x 版本，并提供`maven`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-01T08:19:55.343

请确保您使用的是您修改的 settings.xml。例如：您使用 IDE 的嵌入式 maven，它在您的操作系统中使用不同的 settings.xml。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-09T09:11:44.970

您可以在 Eclipse* 中将设置文件的路径设置为：

1.  在菜单栏中转到 Window -> Preferences

2.  在首选项对话框中，转到 Maven 部分（在左侧）并展开它。

3.  单击用户设置。

4.  使用浏览添加设置文件的路径。大多数用户的默认设置是 (C:\Users\.m2\settings.xml)。它将显示为灰色，但您需要实际输入位置。

5.  点击更新设置！

您还可以通过单击“首选项”对话框中的 Maven 部分并选中“调试输出”标签来启用调试日志和堆栈跟踪以进行调试。

*   PS 我目前在 Windows 10 x64 上使用 Eclipse(Neon)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-01T17:59:54.487

我发现即使我使用 `--settings`or`-s`命令设置了自己的 Maven 设置文件，例如：

`mvn -s $MAVEN_HOME/libexec/conf/my-settings.xml clean`

Maven 仍在读取默认的全局`setting.xml`

有两种方法可以解决这个问题：

1.  将 setting.xml 重命名为类似于目录`setting.xml.bak`中的`$MAVEN_HOME/conf`名称。
2.  首选方法将全局添加到命令中，`-gs`因此最终命令变为：

`mvn -gs $MAVEN_HOME/libexec/conf/my-settings.xml clean`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-15T14:45:38.897

我也一直面临同样的问题。我删除了文件和文件夹，但 maven 仍在选择设置。

对我来说，重新启动系统解决了这个问题。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-10-13T17:21:18.957

今天遇到了这个问题。我正在编辑我的 USER/.m2 目录中的 settings.xml。在我更改 M2_HOME/conf 中的 settings.xml 后，它起作用了 =)

# java - Chesspresso：我怎样才能改变促销片？

> ID：10041783
> 
> 赞同：1
> 
> 时间：2012-04-06T09:46:18.540
> 
> 标签：java, chess

我正在用 Chesspresso 用 Ja​​va 编写一个国际象棋程序。不幸的是，当棋子达到第 8 （第一）级时，我没有找到任何方法来更改晋升棋子。

我一直在谷歌、Javadoc 索引和这个论坛上搜索。

任何帮助将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:59:23.850

从未使用过 chesspresso，但我很好奇，所以我快速浏览了 javadoc。没有[`getPawnMove(int, int, boolean, int)`](http://www.chesspresso.org/javadoc/chesspresso/move/Move.html#getPawnMove%28int,%20int,%20boolean,%20int%29)做你想做的事 - 最后一个论点是促销片？

# vim - 如何使用 sudo 在 vi m 中保存文件？

> ID：10041787
> 
> 赞同：5
> 
> 时间：2012-04-06T09:46:48.047
> 
> 标签：vim

我要映射**w！**在 vim 中使用 sudo**静默**保存文件（无需按 [Enter] 和 [L] 键）。

这是一条完美的线：

```
command! W :execute ':silent w !sudo tee % > /dev/null' | :edit! 
```

但它是**W**，而不是**w！**（带感叹号）

我怎么得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:06:58.543

内置命令不能被用户覆盖。

但是你*可以*这样做

```
 :cnoreabbrev w! W 
```

'神奇地' 将孤独翻译`w`成`W`，这具有预期的效果，AFAICT

# c# - Linq 2 Sql - Already open datareader Issue

> ID：10041792
> 
> 赞同：1
> 
> 时间：2012-04-06T09:47:06.713
> 
> 标签：c#, linq-to-sql

I am busted with a weird bug in my app. It comes in levels or error messages:

1.  There is already and open datareader associated. Then comes
2.  Invalid attempt to call Read when reader is closed. Then comes
3.  Index was outside the bounds of the array. Then comes
4.  Specified cast is not valid.

Let me explain first what's my code is doing: I am using Repository Pattern for my Linq-Sql app. From that repository I calling this method

```
 internal static IEnumerable<ParentChild> GetAllCategoriesAndSubcategories()
        {
            lock (Context) // lock is implemented just before asking question, to check whether it can solve the issue or not...
            {
                return from p in Context.Categories
                       let relatedchilds = (from c in Context.SubCategories
                                            where c.CategoryId == p.Id
                                            select c).Take(5)
                       select new ParentChild
                       {
                           Parent = p,
                           Childs = relatedchilds
                       };
            }

        } 
```

This method is picking rows from two tables, Parent and Child and return the result as a new collection of class

```
public class ParentChild
    {
        public Category Parent { get; set; }
        public IEnumerable<SubCategory> Childs { get; set; }
    } 
```

Sometimes it works fine but when the traffic increases and concurrency then in that case i start getting these errors. Coming to the issue, From UI i am consuming `IEnumerable<ParentChild> GetAllCategoriesAndSubcategories()` to display it in heirarchy.

At UI i am using this method to render the text:

```
 /// <summary>
        /// Write categories Jquery html to the Category usercontrol
        /// </summary>
        private void WriteCategories()
        {

            // retrieves all categories and its subcategories as a generic list of ParentChild
            var dt = CategoryRepository.GetAllCategoriesAndSubcategories();

            //Conversion of dynamic jquery html string starts here
            var sb = new StringBuilder();
            sb.AppendLine(" <div class='widget_box' id='category'>");
            sb.AppendLine("     <div class='wintitle'>");
            sb.AppendLine("         <div class='inner_wintitle'>Categories</div>");
            sb.AppendLine("     </div>");
            sb.AppendLine("     <div class='winbody'>");
            sb.AppendLine("         <ul class='categories'>");
            var i = 1;
            foreach (ParentChild item in dt) //<--* BUGGY PART*
            {
                sb.AppendLine(
                    string.Format("<li class='catetitle' id='catetitle{0}'><a href='subcategory.aspx?cid={1}&cname={2}'>{2}</a></li>", i,
                                  item.Parent.Id, item.Parent.Name));
                sb.AppendLine(
                    string.Format("<li style='display:none;' class='category_sub' id='subcategory{0}' ><div><ul>", i));
                foreach (var subCategory in item.Childs)
                {
                    sb.AppendLine(string.Format("<li><a href='subcategory.aspx?cid={0}&cname={1}&scid={2}&scname={3}'>{3}</a></li>", item.Parent.Id,
                                                item.Parent.Name, subCategory.Id, subCategory.Name));
                }
                sb.AppendLine(
                    string.Format(
                        "<li class='catetitle' id='catetitle{0}'><a href='subcategory.aspx?cid={1}&cname={2}'>View all categories</a></li>",
                        i, item.Parent.Id, item.Parent.Name));
                sb.AppendLine("</ul></div></li>");
                i++;
            }
            sb.AppendLine("</div></ul></div>");
            //Conversion of dynamic jquery html string ends here

            // javascript function to display the subcategories when mouse is hovered to the category
            sb.AppendLine("<script type='text/javascript'>init_categories();</script>");
            ucCategories1.CategoryHtml = sb.ToString(); // Generated text is finally set to the usercontrols property.
        } 
```

I am getting the bug @ `foreach (ParentChild item in dt)`. Please help me.

**Suggestion Required: I am using this as my repo pattern implementation:**

```
 internal sealed class LeadsRepository : IRepository<BuySell>
    {
        private static readonly BusinessBazaarDataContext Context;

        static LeadsRepository()
        {
            Context = new BusinessBazaarDataContext();
        }
} 
```

I don't thinks its a good way to use Datacontext. Please suggest me... Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:52:23.343

Switch to `List<ParentChild>` and return a fully populated `List` from your `GetAllCategoriesAndSubcategories`. Your `lock` would then be doing what you intende (so I assume).

Specifically, you need to do:

```
internal static IList<ParentChild> GetAllCategoriesAndSubcategories()
    {
        lock (Context) // lock is implemented just before asking question, to check whether it can solve the issue or not...
        {
            return (from p in Context.Categories
                   let relatedchilds = (from c in Context.SubCategories
                                        where c.CategoryId == p.Id
                                        select c).Take(5)
                   select new ParentChild
                   {
                       Parent = p,
                       Childs = relatedchilds
                   }).ToList();
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:19:25.083

There are two issues in your code.

The immediate cause of the bug is the one Brett Veenstra identifes. Without the `ToList()` call, you return a query (of type IQueryable). The query will not be executed until it is enumerated (that is, looped through). You don't do that within your `lock` block, instead it is done whenever the result is used.

Brett's remedy to that is correct. Calling `ToList()` on the query will run the query and store the results in a list in memory *within* the `using` block. You need to add one more `ToList()` query though, to the `realtedChilds` statement. Otherwise you'll have the same problem there.

The other, larger issue is that you are sharing one data context between threads. The data context was never designed for that. Instead, the data context is meant to be a *unit of work*. Create one when you need it and dispose of it quickly:

```
using(context = new MyDataContextClass())
{
  return (from p in Context.Categories
          let relatedchilds = (from c in Context.SubCategories
                               where c.CategoryId == p.Id
                               select c).Take(5).ToList()
          select new ParentChild
          {
            Parent = p,
            Childs = relatedchilds
          }).ToList();
} 
```

In your case where you have wrapped the data context in a repository, it might make sense to let the repository be the unit of work and have the context as a member on the repository. That means you would have your repository implement `IDisposable` and dispose of the member data context in the `Dispose()` method.

As a side note, there is yet another problem with your code. It will be executed in two steps. First it will get all the parents, then *for each parent it will hit the database once more* asking for its children. With more than a few 10s of parents this will be a performance issue.

The correct way to do it in linq-to-sql is to ask for all children, doing a `ToList()` followed by a linq-to-objects `GroupBy()`. I wrote a [blog entry](http://coding.abel.nu/2011/11/always-check-generated-sql/) about it some time ago.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T10:26:23.213

Yes, Agree to ToList

Reason:

"IEnumerable" performs all operations in C# code, i.e. linq-to-objects. This means all the action will happen in C#, hence it is Connected in nature

Once you calls the data by using IEnumerable, all the data will fetched from the database and sent to .net. This can degrade performance drastically (For example database indexes won't be used by linq-to-objects), but on the other hand linq-to-objects is more flexible, since it can execute arbitrary C# code instead of being limited by what your linq provider can translate to SQL.

# objective-c - 显示 Yes-No NSAlert 模态并在同一方法中获取值

> ID：10041798
> 
> 赞同：2
> 
> 时间：2012-04-06T09:47:37.530
> 
> 标签：objective-c, cocoa, return, nsalert

所以，假设我有一个这样的方法，用于`document`在实际关闭它之前检查是否已被修改：

```
- (BOOL) canCloseDocument:(id)document
{
     if ([document modified])
     CONFIRM_ALERT(@"Close Document", 
                      @"Are you sure you want to close this document?", 
                      [[core browser] window], 
                      @selector(confirm:code:context:),
                      nil);
     else
          return YES;
} 
```

在这种情况下，该`confirm:code:context:`方法将被调用并且 NOTHING 将被返回`canCloseDocument`。

*这是我的`CONFIRM_ALERT`定义：*

```
#define CONFIRM_ALERT(X,Y,Z,W,V) \
NSAlert* confirmAlert = [NSAlert alertWithMessageText:X \
defaultButton:@"OK" \
alternateButton:@"Cancel" \
otherButton:nil \
informativeTextWithFormat:Y]; \
[confirmAlert beginSheetModalForWindow:Z \
modalDelegate:self \
didEndSelector:W \
contextInfo:V]; 
```

* * *

**问题 ：**

我怎么能这样做，以便显示警报表，并在同一方法（`canCloseDocument:`）中检索值（按下确定？按下取消？），以便它可以返回`YES`或`NO`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:28:58.113

表格是窗口模式的，而不是应用程序模式的。这意味着他们不会按照您希望的方式运作。工作表被显示，但随后执行流程必须返回到主事件循环，以便用户可以继续在应用程序的其他窗口上进行操作。

如果您想在返回之前得到答案，则必须使用模态警报。创建警报，然后调用`-runModal`它，而不是`-beginSheetModalForWindow:modalDelegate:didEndSelector:contextInfo:`.

但是，这会阻止用户对您的应用程序执行任何其他操作，直到他们关闭模式警报。请注意，这不仅是模态警报所固有的，也是您在`-canCloseDocument:`得到答案之前不返回的愿望所固有的。这意味着执行流程不会返回到主事件循环，这是允许与您的应用程序交互的原因。

# android - 为什么输出显示的持续时间如此之短？

> ID：10041802
> 
> 赞同：0
> 
> 时间：2012-04-06T09:48:12.017
> 
> 标签：android, toast

你能告诉为什么输出消失得这么快吗？

如果要运行代码，您需要在 Androidmanifest.xml 文件中添加以下内容

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

下面是代码：

```
package prototype.networking.textfiles;

import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Toast;

public class MainActivity extends Activity 
{
    //-------------------------------------------------------------- OpenHttpConnection()------------------------------------------------//
    private InputStream OpenHttpConnection(String urlString) throws IOException
    {
            InputStream in = null;
            int response = -1;
            URL url = new URL(
                    urlString);
            URLConnection conn = url.openConnection();
            if (!(conn instanceof HttpURLConnection))
            throw new IOException("Not an HTTP connection");
            try
            {
                HttpURLConnection httpConn = (HttpURLConnection) conn;
                httpConn.setAllowUserInteraction(false);
                httpConn.setInstanceFollowRedirects(true);
                httpConn.setRequestMethod("GET");
                httpConn.connect();
                response = httpConn.getResponseCode();
                if(response == HttpURLConnection.HTTP_OK) 
                {
                    in = httpConn.getInputStream();
                }
            }
            catch (Exception ex)
            {
                throw new IOException("Error connecting");
            }
            return in;
            } 
            //--------------------------------------------------OpenHttpConnection ends here-------------------------------------------------------------//
            //--------------------------------------------------Download Plain Text Files (RSS) --------------------------------------------------------------//
    private String DownloadText(String URL)
    {
        int BUFFER_SIZE = 2000;
        InputStream in = null;
        try 
        {
            in = OpenHttpConnection(URL);
        } 
        catch (IOException e1) 
        {
            Toast.makeText(this, e1.getLocalizedMessage(), Toast.LENGTH_LONG)       .show();
            e1.printStackTrace();
            return "";
        }
        InputStreamReader isr = new InputStreamReader(in);
        int charRead;
        String str = "";
        char[] inputBuffer = new char[BUFFER_SIZE];
        try 
        {
            while ((charRead = isr.read(inputBuffer))>0)
            {
                //---convert the chars to a String---
                String readString = String.copyValueOf(inputBuffer, 0, charRead);
                str += readString;
                inputBuffer = new char[BUFFER_SIZE];
            }
            in.close();
        } 
        catch (IOException e) 
        {
            Toast.makeText(this, e.getLocalizedMessage(),    Toast.LENGTH_LONG) .show();
            e.printStackTrace();            
            return "";
        }
        return str;
    }
    //-------------------------------------------------DownloadText() ends here--------------------------------------------------------------------------//
    //-------------------------This method downloads "PLAIN TEXT FILES"-------------------------------------------------------------------------//
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        String str = DownloadText("http://www.appleinsider.com/appleinsider.rss");
                Toast.makeText(getBaseContext(), str,   Toast.LENGTH_LONG)  .show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:50:01.560

你说“输出在一秒钟内消失”。但是你把它显示在一个`Toast`. 这就是 Toast 应该做的：查看[文档](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)- “通知自动淡入淡出，并且不接受交互事件”。这是所需的功能，而不是问题。

Toast 的长度是`Toast.LENGTH_SHORT`或`Toast.LENGTH_LONG`。如果您想在较长时间内显示通知，请考虑使用自定义`Dialog`或`DialogFragment`或 StatusBarNotification。或者，如果您不希望它消失，只需将其放在 View 中，例如`TextView`.

# asp.net-mvc-3 - ViewBag 多个 SelectList 用于下拉列表

> ID：10041805
> 
> 赞同：3
> 
> 时间：2012-04-06T09:48:32.720
> 
> 标签：asp.net-mvc-3, selectlist, viewbag

我正在尝试将 dropdownList 与两个外键一起使用，它们是 modelId 和 categoryId。我正在使用带有 selectList 的 ViewBag。

```
public ActionResult Create()
    {
        ViewBag.categoryId = new SelectList(db.Category, "categoryId", "name");
        ViewBag.modelId = new SelectList(db.Model, "modelId", "name");
        return View();
    } 

    //
    // POST: /Product/Create

    [HttpPost]
    public ActionResult Create(Product product)
    {
        if (ModelState.IsValid)
        {
            db.Product.Add(product);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }
        ViewBag.categoryId = new SelectList(db.Category, "categoryId", "name", product.categoryId);
        ViewBag.modelId = new SelectList(db.Model, "modelId", "name", product.modelId);
        return View(product);
    } 
```

这是我的 Create.cshtml。

```
<div class="editor-label">
        @Html.LabelFor(model => model.Category)
    </div>
    <div class="editor-field">
        @Html.DropDownList("categoryId", "--Select--")
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Model)
    </div>

    <div class="editor-field">
        @Html.DropDownList("modelId", "--Select--")
    </div> 
```

当我按下提交按钮时，出现错误，“已添加具有相同键的项目”有什么问题？模型有问题吗？

这是我的模型。

```
--Prodruct.cs--

public class Product
{
    [Key] public int productId { get; set; }

    [Required(ErrorMessage = "Please select category")]
    public int categoryId { get; set; }

    [Required(ErrorMessage = "Please select model")]
    public int modelId { get; set; }

    [DisplayName("Model name")]
    public String model { get; set; }

    public virtual Category Category { get; set; }
    public virtual Model Model { get; set; }
}

--Category.cs--
public class Category
{
    [Key] public int categoryId { get; set; }
    public String name { get; set; }
}

--Model.cs--
public class Model
{
    [Key] public int modelId { get; set; }
    public String name { get; set; }
}

--RentalDB.cs--
public class rentalDB : DbContext
{
    public DbSet<Product> Product { get; set; }
    public DbSet<Model> Model { get; set; }
    public DbSet<Customer> Customer { get; set; }
    public DbSet<Order> Order { get; set; }
    public DbSet<Cart> Cart { get; set; }
    public DbSet<Category> Category { get; set; }
    public DbSet<OrderDetails> OrderDetails { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }
} 
```

哪里错了？Create中的索引页面可以获取类别数据和模型数据。但是，当我提交它时，它有错误，“已添加具有相同密钥的项目”。你能帮我哪里有问题吗？谢谢你。

--添加了更多编码--

我正在使用这个 LINQ。大概这里有问题。

如何在此处添加“模型”实体？

```
var product = from a in db.Product.Include(a => a.Category)
                      select a; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T13:10:31.697

这就是我会做的..

我建议您不要将域模型发送到视图，而是为每个视图创建一个视图模型。这样做你只会在屏幕上包含需要的内容。

为您的 Create 视图创建一个新的视图模型：

```
public class ProductCreateViewModel
{
     // Include other properties if needed, these are just for demo purposes

     public string Name { get; set; }
     public string SKU { get; set; }
     public string LongDescription { get; set; }

     // This is the unique identifier of your category,
     // i.e. foreign key in your product table
     public int CategoryId { get; set; }
     // This is a list of all your categories populated from your category table
     public IEnumerable<Category> Categories { get; set; }

     // This is the unique identifier of your model,
     // i.e. foreign key in your product table
     public int ModelId { get; set; }
     // This is a list of all your models populated from your model table
     public IEnumerable<Model> Models { get; set; }
} 
```

分类类：

```
public class Category
{
     public int Id { get; set; }
     public string Name { get; set; }
} 
```

型号类：

```
public class Model
{
     public int Id { get; set; }
     public string Name { get; set; }
} 
```

在您的创建视图中，您将拥有以下内容：

```
@model MyProject.ViewModels.ProductCreateViewModel

@using (Html.BeginForm())
{
     <table>
          <tr>
               <td><b>Category:</b></td>
               <td>
                    @Html.DropDownListFor(x => x.CategoryId,
                         new SelectList(Model.Categories, "Id", "Name", Model.CategoryId),
                         "-- Select --"
                    )
                    @Html.ValidationMessageFor(x => x.CategoryId)
               </td>
          </tr>
          <tr>
               <td><b>Model:</b></td>
               <td>
                    @Html.DropDownListFor(x => x.ModelId,
                         new SelectList(Model.Models, "Id", "Name", Model.ModelId),
                         "-- Select --"
                    )
                    @Html.ValidationMessageFor(x => x.ModelId)
               </td>
          </tr>
     </table>

     <!-- Add other HTML controls if required and your submit button -->
} 
```

您的 Create 操作方法：

```
public ActionResult Create()
{
     ProductCreateViewModel viewModel = new ProductCreateViewModel
     {
          // Here you do database calls to populate your dropdowns
          Categories = categoryService.GetAllCategories(),
          Models = modelService.GetAllModels()
     };

     return View(viewModel);
}

[HttpPost]
public ActionResult Create(ProductCreateViewModel viewModel)
{
     // Check that viewModel is not null

     if (!ModelState.IsValid)
     {
          viewModel.Categories = categoryService.GetAllCategories();
          viewModel.Models = modelService.GetAllModels();

          return View(viewModel);
     }

     // Mapping
     Product product = ...  // Do your mapping here

     // Insert product in database
     productService.Insert(product);

     // Return the view where you need to be
} 
```

我还建议您使用[AutoMapper](http://automapper.codeplex.com/)为您在域模型和视图模型之间进行映射。我还建议您查看[Fluent Validation](http://fluentvalidation.codeplex.com/)来处理您的视图模型验证。

我希望这有帮助。

**更新的答案**

用于获取所有类别的服务可能如下所示：

```
public class CategoryService : ICategoryService
{
     private readonly ICategoryRepository categoryRepository;

     public CategoryService(ICategoryRepository categoryRepository)
     {
          // Check if category repository is not null, throw exception if it is

          this.categoryRepository = categoryRepository;
     }

     public IEnumerable<Category> GetAllCategories()
     {
          return categoryRepository.GetAllCategories();
     }
} 
```

categoryRepository 由[Autofac](http://code.google.com/p/autofac/)注入。

分类服务接口：

```
public interface ICategoryService
{
     IEnumerable<Category> GetAllCategories();
} 
```

我目前仍然`Entity Framework 4.1`首先使用代码。

我的类别存储库：

```
public class CategoryRepository : ICategoryRepository
{
     MyContext db = new MyContext();

     public IEnumerable<Category> GetAllCategories()
     {
          return db.Categories
               .OrderBy(x => x.Name);
     }
} 
```

我的分类库界面：

```
public interface ICategoryRepository
{
     IEnumerable<Category> GetAllCategories()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:16:47.173

```
public class Test
{
    rentalDB db = new rentalDB();
    public Product LoadProductById(int pId)
    {
        return db.Products.Include(p => p.Model).Include(p => p.Category).Where(p => p.productId == pId).SingleOrDefault();
    } // To get specific product.

    public IEnumerable<Product> LoadAllProducts()
    {
        return db.Products.Include(p => p.Model).Include(p => p.Category).ToList();
    } // To get all products.
} 
```

我已将您的 DbSet 更改为 Products 以使其更加清晰。这是您加载一个产品或所有产品的所有引用以迭代它们的方式。

# c# - 自动填充 UAC 对话框 Win 7

> ID：10041806
> 
> 赞同：0
> 
> 时间：2012-04-06T09:48:34.070
> 
> 标签：c#, windows-7, uac, autofill

在那里

我在谷歌上搜索了很多，但找不到答案。也许你有一些想法：

我的电脑上有两个帐户，一个管理员帐户和一个用户帐户。我通常在我的用户帐户上工作。当我想运行应用程序或安装新应用程序时，我必须在 UAC 对话框中输入管理员密码。

现在我想编写一个程序，女巫检测 Win 7 UAC 对话框，并自动填充管理员密码。我想，我可以检测到 UAC 对话框，并将管理员密码保存在缓冲区中。然后我只需将密码粘贴到 UAC 对话框中。

如果这可行，有什么想法，以及我如何检测 UAC 对话？

和平！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:48:10.127

UAC 对话框旨在防止这种情况发生！否则任何病毒都可以在没有用户输入的情况下自行安装！为什么要这样做，而不是更改 UAC 设置或更改您的帐户权限？

# wpf - 将 PointAnimation 分配给椭圆

> ID：10041808
> 
> 赞同：0
> 
> 时间：2012-04-06T09:48:41.080
> 
> 标签：wpf

我想用 SplinePointAnimationWithKeyframes 为一些椭圆设置动画，但我不知道我必须为情节提要设置哪个目标属性：

```
 StoryBoard.SetTargetProperty(splineAnimation, Canvas.???); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:16:57.173

[请参阅PointAnimation](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.pointanimation.aspx)中的示例部分，了解如何`Center`为`EllipseGeometry`.

如果您想制作动画，比如说 Ellipse 元素的`Canvas.Left`and `Canvas.Top`，您需要在 Storyboard 中有两个单独的动画。例如，对[TranslateTransform](http://msdn.microsoft.com/en-us/library/system.windows.media.translatetransform.aspx)`X`的和`Y`属性进行动画处理也是如此。

# r - 如何准确地grep一个单词

> ID：10041810
> 
> 赞同：8
> 
> 时间：2012-04-06T09:48:44.020
> 
> 标签：r, regex

我想在以下字符向量中 grep 查找“nitrogen”，并且只想取回包含“nitrogen”的条目，而其余的则一无所有（例如固氮）：

```
varnames=c("nitrogen", "dissolved organic nitrogen", "nitrogen fixation", "total dissolved nitrogen", "total nitrogen") 
```

我试过这样的事情：

```
grepl(pattern= "![[:space:]]nitrogen![[:space:]]", varnames) 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T11:47:11.757

尽管 Dason 的回答更简单，但您可以通过以下方式使用 grep 进行完全匹配：

```
varnames=c("nitrogen", "dissolved organic nitrogen", "nitrogen fixation", "total dissolved nitrogen", "total nitrogen")

grep("^nitrogen$",varnames,value=TRUE)
[1] "nitrogen"

grep("^nitrogen$",varnames)
[1] 1 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-06T14:54:00.717

要获得完全等于“氮”的指数，您可以使用

```
which(varnames == "nitrogen") 
```

根据您想要做什么，您甚至可能不需要“which”，因为`varnames == "nitrogen"`它给出了 TRUE/FALSE 的逻辑向量。如果你只是想做一些事情，比如用“氧”替换所有出现的“氮”，这就足够了

```
varnames[varnames == "nitrogen"] <- "oxygen" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T16:46:44.237

或者`fixed = TRUE`，如果您想匹配实际字符串（`regex`较少），请使用：

```
v <- sample(c("nitrogen", "potassium", "hidrogen"), size = 100, replace = TRUE, prob = c(.8, .1, .1))
grep("nitrogen", v, fixed = TRUE)
# [1]   3   4   5   6   7   8   9  11  12  13  14  16  19  20  21  22  23  24  25
# [20]  26  27  29  31  32  35  36  38  39  40  41  43  44  46  47  48  49  50  51
# [39]  52  53  54  56  57  60  61  62  65  66  67  69  70  71  72  73  74  75  76
# [58]  78  79  80  81  82  83  84  85  86  87  88  89  91  92  93  94  95  96  97
# [77]  98  99 100 
```

不知道速度问题，我喜欢测试东西并声称方法 A 比方法 B 快，但理论上，至少根据我的经验，索引/二元运算符应该是最快的，所以我投票支持 @Dason 的方法。还要注意`regex`es**总是**比`fixed = TRUE` `grep`ing 慢。

下面附上一个小证明。请注意，这是一个蹩脚的测试，`system.time`应该放在里面`replicate`以获得（更）准确的差异，你应该考虑异常值，等等。但肯定这个证明你应该使用`which`！=)

```
(a0 <- system.time(replicate(1e5, grep("^nitrogen$", v))))
# user  system elapsed 
# 5.700   0.023   5.724  
(a1 <- system.time(replicate(1e5, grep("nitrogen", v, fixed = TRUE))))
# user  system elapsed 
# 1.147   0.020   1.168 
(a2 <- system.time(replicate(1e5, which(v == "nitrogen"))))
# user  system elapsed 
# 1.013   0.020   1.033 
```

# gwt - 如何将本地时区中创建的 Date 对象的时区转换为 GWT 客户端中的目标时区？

> ID：10041811
> 
> 赞同：1
> 
> 时间：2012-04-06T09:48:55.247
> 
> 标签：gwt, date, timezone, google-cloud-datastore, gwt2

如何将在本地时区创建的 Date 对象的时区转换为目标时区？

这是我需要的。我希望网络客户端使用[DatePicker](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/datepicker/client/DatePicker.html)选择一个日期，但生成的 Date 对象应该看起来就像**是在另一个 timezone 中选择的**。由于没有办法告诉`DatePicker`我必须手动更改日期。

例如，现在是加利福尼亚州 2012 年 4 月 6 日凌晨 2:42。创建日期将采用 UTC-7 时区。我想在欧洲/莫斯科时区使用 2012 年 4 月 6 日凌晨 2:42 的日期对象。

这是我现在做的：

```
final TimeZoneConstants constTz = GWT.create(TimeZoneConstants.class);
final TimeZone timeZoneMsk = TimeZone.createTimeZone(constTz.europeMoscow());
final TimeZone timeZoneCali = TimeZone.createTimeZone(constTz.americaLosAngeles());

Date curTime = new Date();

DateTimeFormat dateTimeFormat = DateTimeFormat.getFullDateTimeFormat();
Date mskTime = new Date(curTime.getTime() - (curTime.getTimezoneOffset() - timeZoneMsk.getStandardOffset()) * 60 * 1000);

String strLocal = dateTimeFormat.format(curTime, timeZoneCali); // Friday, 2012 April 06 02:42:59 Pacific Daylight Time
String strMsk = dateTimeFormat.format(mskTime, timeZoneMsk);    // Friday, 2012 April 06 02:42:59 Moscow Standard Time 
```

这种方法有两个问题：

*   如果你问我，这看起来很奇怪。
*   时区`mskTime`仍然是-0007。我想知道当我从 Google App Engine 数据存储区反序列化这个对象时，它是否会导致任何问题。

或者我应该只生成带有本地加利福尼亚时间的完整日期的字符串，替换字符串中的时区，然后`Date`通过调用生成新的`DateTimeFormat.parse()`？它看起来也很hacky...

另外，您如何看待[JodaTime for GWT](http://code.google.com/p/gwt-joda-time/)？生产是否足够稳定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:44:27.527

您的代码看起来正确。使用`DateTimeFormat.parse`可能会使不经意的读者更清楚地表达意图。给您时区 A 和 B 以及一个对象的情况并不常见，`Date`您必须生成一个新`Date`对象，当在 B 中格式化时，它与在 A 中格式化时的原始对象具有相同的时间。

> mskTime 中的时区仍然是 -0007。我想知道当我从 Google App Engine 数据存储区反序列化这个对象时，它是否会导致任何问题。

不，不可能有问题。请记住，`Date`对象表示不受时区约束的通用时间点。莫斯科是 4 月 6 日 14:40，加利福尼亚是 4 月 6 日 03:40，所以`Date`对象是相等的。

# iphone - 检测 iphone 上的可用磁盘空间时得到错误值

> ID：10041824
> 
> 赞同：0
> 
> 时间：2012-04-06T09:49:43.533
> 
> 标签：iphone, objective-c, disk

我关注[http://kdbdallas.com/2008/12/27/maciphone-show-availble-useable-diskspace/我](http://kdbdallas.com/2008/12/27/maciphone-show-availble-useable-diskspace/)[如何找出 iphone 磁盘空间](https://stackoverflow.com/questions/2606474/how-do-i-find-out-iphone-disk-space) ？ 检测可用的磁盘空间。但是，似乎结果不正确

我在 iphone 4 ios 4.2.1 上测试过。

在设置中，容量为 29.1 G 可用性为 24.2 G

我想获得 24.2 G 的值。所以我按照上面提到的教程进行操作。

```
int main(int argc, char *argv[]) {
        .....

        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
        NSLog(@"path %@", paths);

        struct statfs tStats;
        statfs([[paths lastObject] UTF8String], &tStats);

        NSString *sizeType;

        float total_space = (float)(tStats.f_blocks * tStats.f_bsize);  
        NSLog(@"total space: %f", total_space);
        NSLog(@"total space: %@", convertUnit(total_space));

        float free_space = (float)(tStats.f_bfree * tStats.f_bsize);
        NSLog(@"free space: %f", free_space);
        NSLog(@"free space: %@", convertUnit(free_space));

        float free_space2 = (float)(tStats.f_bavail * tStats.f_bsize);      
        NSLog(@"free blocks avail to non-superuser: %f", free_space2);
        NSLog(@"free blocks avail to non-superuser: %@", convertUnit(free_space2));

        uint32_t block_size = (tStats.f_bsize);     
        NSLog(@"block size: %d", block_size);
        NSLog(@"block size: %@", convertUnit(block_size));
        .....
}       

NSString* convertUnit (float value) {
    NSString *sizeType;
    if (value > 1024)
    {
        //Kilobytes
        value = value / 1024;

        sizeType = @" KB";
    }

    if (value > 1024)
    {
        //Megabytes
        value = value / 1024;

        sizeType = @" MB";
    }

    if (value > 1024)
    {
        //Gigabytes
        value = value / 1024;

        sizeType = @" GB";
    }

    return [[@"Available Disk Space: " stringByAppendingFormat:@"%.2f", value] stringByAppendingString:sizeType];

} 
```

结果：

```
total space: 17363854862722269184.000000
total space: Available Disk Space: 16171350016.00 GB

free space: 17743592094095638528.000000
free space: Available Disk Space: 16525007872.00 GB

free blocks avail to non-superuser: 17432956969504735232.00000
free blocks avail to non-superuser: Available Disk Space: 16235706368.00 GB

block size: 803203484
block size: Available Disk Space: 765.99 MB 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T04:54:26.557

在对iphone的文件系统进行了更多搜索后，我发现iphone有2个分区：一个用于操作系统，另一个用于用户数据。我得到的值是操作系统分区的属性。所以我将路径更改为“private/var”，这是数据分区的路径。结果，我得到了正确的可用磁盘空间值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:22:14.170

试试这个代码

```
-(uint64_t)getFreeDiskspace {

    uint64_t totalSpace = 0;
    uint64_t totalFreeSpace = 0;
    NSError *error = nil;  
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);  
    NSDictionary *dictionary = [[NSFileManager defaultManager] attributesOfFileSystemForPath:[paths lastObject] error: &error];  

    if (dictionary) {  
        NSNumber *fileSystemSizeInBytes = [dictionary objectForKey: NSFileSystemSize];  
        NSNumber *freeFileSystemSizeInBytes = [dictionary objectForKey:NSFileSystemFreeSize];
        totalSpace = [fileSystemSizeInBytes unsignedLongLongValue];
        totalFreeSpace = [freeFileSystemSizeInBytes unsignedLongLongValue];
        NSLog(@"Memory Capacity of %llu MiB with %llu MiB Free memory available.", ((totalSpace/1024ll)/1024ll), ((totalFreeSpace/1024ll)/1024ll));
    } else {  
        NSLog(@"Error Obtaining System Memory Info: Domain = %@, Code = %@", [error domain], [error code]);  
    }  

    return ((totalFreeSpace/1024ll)/1024ll);
} 
```

这将为您提供以 MB 为单位的总可用空间

# c# - C#：将 *.txt 加载到 RichTextBox 并转换为 UTF8

> ID：10041826
> 
> 赞同：2
> 
> 时间：2012-04-06T09:49:45.573
> 
> 标签：c#, text, encoding, utf-8, richtextbox

我想打开文本文件并将它们加载到 RichTextBox 中。到目前为止一切顺利，但现在我正在努力解决编码问题。

所以我使用了这个 StackOverflow 页面中的 GetType() 方法： [如何找出文件的编码？C#](https://stackoverflow.com/questions/3404199/how-to-find-out-the-encoding-of-a-file-c-sharp) - 它返回“System.Text.UnicodeEncoding”。

我现在的问题是：

*   如何将 Unicode（我猜这就是它们，虽然我没有仔细检查）转换为 UTF8（可能还向后）？
*   我可以切换 RichTextBox 以正确显示 Unicode 吗？以下显示了尴尬的结果：`rtb.LoadFile(aFile, RichTextBoxStreamType.PlainText);`
*   如何定义 SaveFileDialog 应该使用哪种编码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T09:55:56.117

与其让 RichTextBox 从磁盘加载文件，不如自己加载，[同时指定正确的编码](http://msdn.microsoft.com/en-us/library/ms143369.aspx)。（顺便说一句，`Encoding.Unicode`它只是“ *UTF-16 little-endian* ”的同义词。）

```
string myText = File.ReadAllText(myFilePath, Encoding.Unicode); 
```

这将为您处理转换。您得到的字符串是“正确”编码的（即以.NET 内部使用的格式），因此您可以将其分配给`Text`您的 RichTextBox 的属性。

* * *

关于您的第三个问题：这`SaveFileDialog`只是一个让用户选择文件名的工具。您对文件名*所做*的事情（例如：将一些文本保存到其中，或对一些字符串进行编码然后保存）与 SaveFileDialog 无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:56:30.583

SaveFileDialog 只允许您选择保存文件的路径。它不会为你保存它..

使用[Encoding](http://msdn.microsoft.com/en-us/library/system.text.encoding%28v=vs.71%29.aspx)类将一种编码转换为另一种编码。

并阅读[本文](http://www.dijksterhuis.org/encoding-c-strings-as-byte-byte-arrays-and-back-again/)以获取有关如何将其转换并写入文件的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-25T08:32:37.277

您还可以使用：richTextBox.LoadFile(filePath, RichTextBoxStreamType.UnicodePlainText);

# javascript - Backbone JS 模型获取返回嵌套属性

> ID：10041827
> 
> 赞同：0
> 
> 时间：2012-04-06T09:49:45.963
> 
> 标签：javascript, json, model, backbone.js

我的模型返回嵌套在空对象中的 JSON 时遇到问题：

```
Object {} 
```

从服务器返回的实际 JSON 字符串是：

```
{
    "id": 0,
    "label": "Label 0",
    "title": "Title 0",
    "description": "Desc 0",
    "username": "User 0"
} 
```

我需要的是这样返回：

```
Object { title="test" } 
```

有谁知道如何做到这一点？当我检查 this.model 时，它显示了属性中返回的服务器的正确数据，但是当我...

```
console.log(this.model.attributes); 
```

我所看到的只是前面提到的空对象。

# apache - Apache 和 SSL 背后的 Tomcat

> ID：10041830
> 
> 赞同：9
> 
> 时间：2012-04-06T09:49:59.380
> 
> 标签：apache, tomcat, grails, ssl, spring-security

我一直在到处寻找，但找不到针对以下情况的明确解决方案：

我们有一个 web 应用程序（Grails + Spring Security）在 apache 后面的 tomcat 中运行。**部分**应用程序需要在 https 上运行，因此使用 Spring Security Channel Security，每当您导航到应用程序的安全部分时，Spring 都会使用 302 状态代码将您重定向到 https。

现在，tomcat 设置为了解 https 和证书，因此它知道如何处理 ssl。事实上，当通过直接访问 url 和端口直接访问 tomcat 来绕过 apache 时，一切正常 100%。

现在将apache放在tomcat前面时出现了问题。我们目前拥有的 apache 配置适用于应用程序的非安全部分。我们正在使用 mod_jk 代理 apache 和 tomcat。

但是，一旦您尝试转到应用程序的安全部分，Spring 就会重定向您，它会命中

```
<VirtualHost _default_:443> ... </VirtualHost> 
```

apache配置的一部分......这就是问题的开始。

根据我的阅读，apache 可以通过 mod_jk 将 ssl 处理传递给 tomcat。但我们似乎无法获得正确的配置。由于 tomcat 已经为 ssl 设置好了，它知道证书在哪里，并且 Spring Security 设置好了，我们希望 tomcat 处理所有的 ssl，而 apache 只是将它典当给 tomcat。

这是可能的，还是我错过了什么？有人对如何设置有明确的说明吗？任何帮助将不胜感激。

我们正在使用 Apache 2.2 和 tomat 7.0.27

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T13:19:05.953

您不能只将 SSL/TLS 流量从 Apache 中继到 Tomcat。要么您的 SSL 连接在 Apache 结束，然后您应该将流量反向代理到 Tomcat（SSL 在这种情况下很少有用），或者您让客户端直接连接到 Tomcat 并让它处理 SSL 连接。

我不确定您在哪里读到`mod_jk`可以将 SSL 连接本身传递给 Tomcat。它需要直接中继套接字，因此绕过了使用的 AJP 协议`mod_jk`（​​顺便说一下，这`mod_proxy_ajp`是新的方式，甚至是`mod_proxy_http`）。

如果您希望 Tomcat 处理 SSL 请求，我不确定您为什么希望 Apache 位于 Tomcat 前面。如果这与端口号或其他内容有关，请使用防火墙规则将端口 443 转发到 Tomcat 端口。

此外，请注意这些从 HTTP 到 HTTPS 的自动重定向的完成方式：[它们仅在发出初始 HTTP 请求之后发生](https://stackoverflow.com/a/9105894/372643)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T21:02:16.463

从您的帖子中，我无法判断您是否在让 ssl 在 Apache 上工作时遇到问题，或者由于您的应用程序的某些部分是通过 http 进行的，因此 Apache 永远不会通过 ssl 重定向。请注意，在 ssl 上拥有多个“段”是完全可以的（意味着用户 -> Apache over ssl 和 Apache -> tomcat over ssl）。
1\. 如果问题是让 ssl 在 Apache 上运行 - 您需要确保在 Apache 端正确设置了 ssl。
2\. 如果问题是“重定向”，请尝试为 http 和 https 保留单独的 url。像 /something.mysite.com/non_ssl/ 和 /something.mysite.com/ssl/。这将使在 Apache 中编写规则变得更加容易。

# heroku - 无法通过heroku让carrierwave与Rackspace一起使用

> ID：10041831
> 
> 赞同：1
> 
> 时间：2012-04-06T09:50:03.937
> 
> 标签：heroku, rackspace

在我安装carrierwave并尝试设置机架空间之前，我的应用程序在heroku上运行良好。我按照 gem 上提供的说明进行操作，但它并没有帮助我设置我的应用程序。

我在 heroku 上托管我的网站，我有一个 rackspace cloudfile 帐户，我现在正在使用载波。配置 > 初始化载波。

我设置了初始化程序：

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider           => 'Rackspace',
    :rackspace_username => 'my_id',
    :rackspace_api_key  => 'my_api_key'
  }

 config.fog_directory = 'karet'
    config.fog_host = "http://c000000.cdn.rackspacecloud.com"
end 
```

应用上传者？image_uploader.rb

包括 Sprockets::Helpers::RailsHelper 包括 Sprockets::Helpers::IsolatedHelper

# 选择这个上传器使用什么样的存储：# storage :file storage :fog

# 覆盖上传文件的存储目录。# 对于要挂载的上传器，这是一个合理的默认值： def store_dir "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}" end

当我尝试通过浏览器访问我的 hap 时，我收到以下错误消息：

ActionView::Template::Error（未预编译）：

```
 30:                   <tr>
     31:                    <td>

     32:                            <% if karretlink.link == "" %>
     33:                                <%= image_tag(karretlink.link) %>
     34:                            <% else %>
     35:                                <% if karretlink.kind == 'video' %>
     36:                                    <%= youtube_preview_embed(karretlink.link) %>
   app/views/karretlinks/index.html.erb:33:in `block in _app_views_karretlinks_index_html_erb___2945645007174033048_34354840'
   app/views/karretlinks/index.html.erb:29:in `each'
   app/controllers/karretlinks_controller.rb:16:in `index'

   app/views/karretlinks/index.html.erb:29:in `_app_views_karretlinks_index_html_erb___2945645007174033048_34354840'
 cache: [GET /] miss 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:14:00.617

我解决了这个问题。我在 Rackspace 上创建了一个文件夹“karat”，然后我预编译了我的资产，它现在工作正常。

# android - 带有 gprmc servlet 的 OpenGts

> ID：10041832
> 
> 赞同：1
> 
> 时间：2012-04-06T09:50:06.823
> 
> 标签：android, gps

我试图通过使用 gprmc servlet 的开放 gts 来跟踪设备是 [http://192.168.1.99:8080/gprmc/Data?acct=1234&id=test01&code=0xF020&](http://192.168.1.99:8080/gprmc/Data?acct=1234&id=test01&code=0xF020&)
gprmc=$GPRMC,080701.00,A,3128.7540,N,14257.6714, W,000.0,000.0,180707,,,A*1C

这是我在我的 android 应用程序中尝试的 url 的结构，但服务器没有响应，但是当我尝试使用 gps2opengts 应用程序时， ![使用工作服务器的屏幕截图](../Images/347a3bff5074c9acd7fc22cb4cdd9d2e.png)它可以正常工作，所以请告诉哪里是错误...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T04:12:37.687

@维维克，

虽然您已成功在 android 中创建 gprmc 字符串，但您的服务器仍可能不接受该请求，因为您当前的请求包含`id`http 参数，但它应该是`dev`。OpenGTS 具有`acct`帐户字符串和`dev`设备字符串以及`gprmc`gprmc 字符串的参数名称。您可以使用 Android API 直接获取 gprmc 字符串 - [http://developer.android.com/reference/android/location/GpsStatus.NmeaListener.html](http://developer.android.com/reference/android/location/GpsStatus.NmeaListener.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:53:03.800

我正在尝试同样的事情，并且有一些阅读要做。首先阅读 GPRMC 的规范[http://aprs.gids.nl/nmea/#rmc](http://aprs.gids.nl/nmea/#rmc)

接下来，进入OpenGTS源代码中的Nmea0183类，看看你的字符串末尾的校验和（方法calcXORChecksum）是如何生成的。

我做了一个测试，发现您使用的校验和 (1C) 是错误的。它应该是 44。默认情况下，如果您没有在字符串末尾附加校验和，OpenGTS 似乎不会忽略它，因此您始终必须在您的 android 应用程序中计算它并在末尾添加它。如果校验和不正确，则丢弃请求并且不记录任何内容。

最后，确保您在 GPRMC 字符串中使用了正确的日期和时间，否则您将很难在 Web 应用程序的报告中找到它。例如，在您发送的字符串中，日期似乎是 2007 年 7 月 18 日，时间是 GMT 08:07:01。

希望对您有所帮助并期待您的应用。我真的可以使用它。

这就是我在 Nmea0183 的主要方法中所做的（我评论了其他所有内容）。

```
String gprmc = "$GPRMC,080701.00,A,3128.7540,N,14257.6714,W,000.0,000.0,180707,,,A*44";
int cs = calcXORChecksum(gprmc, false);
System.out.println(Integer.toHexString(cs));
Nmea0183 n;

n = new Nmea0183(gprmc, false);
Print.sysPrintln("$GPRMC   : " + gprmc);
Print.sysPrintln("      ==>: " + n.toGPRMC());
Print.sysPrintln("NMEA-0183: \n" + n); 
```

# ruby-on-rails - 如何在设计 authenticate_user 中删除 html 重定向

> ID：10041838
> 
> 赞同：22
> 
> 时间：2012-04-06T09:50:33.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, rabl

我使用该设计的 authenticate_user！控制器中的方法。当请求中提供的 auth_token 正确时，这可以正常工作，但如果身份验证失败，我最终会得到：

```
curl -XGET 'http://localhost:3000/my_obj?auth_token=wrongtoken'

<html><body>You are being <a href="http://localhost:3000/users/sign_in">redirected</a>.</body></html> 
```

当我使用 rabl 时，最好的方法是什么

```
{'error' : 'authentication error'} 
```

返回而不是 html 重定向？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-06T10:15:01.053

我这样做是为了避免使用 :format => :json 响应的过滤器，如果没有 current_user 通过，我会做我自己的过滤器来呈现我的 JSON 响应

```
class MyController < ApplicationController
  before_filter :authenticate_user!, :unless => { request.format == :json }
  before_filter :user_needed, :if => { request.format == :json }

  def user_needed
    unless current_user
      render :json => {'error' => 'authentication error'}, :status => 401
    end
  end
end 
```

另一种更简洁的方法是定义自己的 FailureApp ( [https://github.com/plataformatec/devise/blob/master/lib/devise/failure_app.rb](https://github.com/plataformatec/devise/blob/master/lib/devise/failure_app.rb) )

```
class MyFailureApp < Devise::FailureApp
  def respond
    if request.format == :json
      json_failure
    else
      super
    end
  end

  def json_failure
    self.status = 401
    self.content_type = 'application/json'
    self.response_body = "{'error' : 'authentication error'}"
  end
end 
```

在您的设计配置文件中添加：

```
config.warden do |manager| 
  manager.failure_app = MyFailureApp 
end 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-06-11T17:30:37.630

在较新版本的 Devise（我使用的是 2.2.0）中，您可以使用`navigational_formats`Devise 配置文件中的选项`devise.rb`：

```
# ==> Navigation configuration
# Lists the formats that should be treated as navigational. Formats like
# :html, should redirect to the sign in page when the user does not have
# access, but formats like :xml or :json, should return 401.
#
# If you have any extra navigational formats, like :iphone or :mobile, you
# should add them to the navigational formats lists.
#
# The "*/*" below is required to match Internet Explorer requests.
config.navigational_formats = ["*/*", :html] 
```

只要`:json`不在该列表中，并且您的请求以 结尾`.json`，它就会按照您的意愿行事。

# php - 加入 2 个 mysql 查询，其中第二个查询取决于第一个查询的输出

> ID：10041844
> 
> 赞同：1
> 
> 时间：2012-04-06T09:51:03.743
> 
> 标签：php, mysql

我使用我的第一个查询来获取用户的 ID 和名称，如下所示：

```
select id,name from temp_card where sex='$sex' and city='$city' order by name ASC 
```

然后我有第二个查询，它使用第一个查询的结果，并从另一个表中获取更多数据：

```
select images from temp_card_images where temp_card_id=". $row['id'] ." order by id ASC limit 1 
```

如何结合这两个查询，以便在单个 while 循环中打印出 3 个字段（id、name 和 images）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T09:54:51.000

您需要执行 JOIN 查询

```
select tc.id, tc.name, tci.images from temp_card tc
left join temp_card_images  tci
on tc.id = tci.temp_card_id
where tc.sex='$sex' and tc.city='$city' order by tc.name ASC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T09:55:13.373

您需要了解 JOIN。可以这样实现

```
SELECT tc.id,tc.name,tci.images
FROM temp_card tc
    INNER JOIN temp_card_images tci ON tc.id=tci.temp_card_id
WHERE sex='$sex' 
  AND city='$city' 
GROUP BY tc.id
ORDER BY name ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T09:58:53.783

尽管不相关，但我强烈建议您考虑使用[PDO](http://php.net/pdo)作为您的数据库访问层。它适用于大多数数据库类型，如 MySQL、SQLite 等。它有助于防止 SQL 注入到您的数据库中。

### 编辑

删除了答案，因为给定的连接是更好的答案。

# validation - 使用rails中的范围一起验证两个字段的唯一性的最佳方法

> ID：10041850
> 
> 赞同：0
> 
> 时间：2012-04-06T09:51:41.797
> 
> 标签：validation, ruby-on-rails-3.2, unique, validates-uniqueness-of

在 rails 3.2.3 中，我想验证链接模型是否具有两个字段的唯一组合。我有一个测试和一个通过测试的验证，如下所示，但似乎有更好的方法来做到这一点。例如，使用具有唯一性的索引会更好吗？如果是这样，为什么？

```
# link_test.rb
...
test "cannot create two links with same name and url" do
  Link.create!(:name => 'example', :url => 'http://www.example.com')
  assert_raise(ActiveRecord::RecordInvalid, 'could create two links with same name and url'){Link.create!(:name => 'example', :url => 'http://www.example.com')}
end
...

# link.rb
class Link < ActiveRecord::Base
  ...
  validates :name, :uniqueness => {:scope => :url, :message => 'cannot have two entries with same name and url'}
  ...
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:10:40.923

我会同时使用。

使用唯一索引的优点是数据库也会强制执行它。例如，如果您有六台应用程序服务器，每台服务器都可能创建一条新记录，那么保护 Rails 中的唯一性就很难低估这个问题。缺点是这更难恢复。

在活动记录中执行此操作的优点是您可以轻松调试它，获取干净的异常消息并将问题更有效地传达给用户。缺点是它需要额外的查询，并且更容易受到多线程/多进程类型错误的影响。

通过这两者，您可以获得活动记录验证的可恢复性，当它可能与数据库唯一索引的绝对可靠性相结合时。当两个请求同时发生时，您仍然可以在极少数情况下看到不同的错误，但它会使您的数据与您的约束保持一致。

# android - 为什么我们在使用 AutoCompleteTextView 时需要额外的布局

> ID：10041852
> 
> 赞同：0
> 
> 时间：2012-04-06T09:51:53.390
> 
> 标签：android, xml, autocompletetextview

检查[http://developer.android.com/resources/tutorials/views/hello-autocomplete.html](http://developer.android.com/resources/tutorials/views/hello-autocomplete.html) 或

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp"
    android:textColor="#000">
</TextView>

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:orientation="horizontal"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:padding="5dp">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Country" />
    <AutoCompleteTextView android:id="@+id/autocomplete_country"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"/>
</LinearLayout>

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    AutoCompleteTextView textView = (AutoCompleteTextView) findViewById(R.id.autocomplete_country);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.list_item, COUNTRIES);
    textView.setAdapter(adapter);
} 
```

然后我们有一个静态的最终 String[] COUNTRIES 填充了所有国家。

我的问题是我们为什么要使用 list_item.xml。实际上 list_item.xml 包含代码的第一部分，第二个 xml 代码用于 main.xml，然后是用于活动的 java 代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:00:43.537

自动完成文本视图中的结果以列表形式显示。列表中的每个项目都需要一个布局。R.layout.list_item 是列表中每个项目的布局

# cuda - 就地推力::min_element

> ID：10041853
> 
> 赞同：2
> 
> 时间：2012-04-06T09:51:59.147
> 
> 标签：cuda, thrust

我查看分析结果并看到`thrust::min_element()`调用`cudaMalloc()`，因此使用了额外的内存。减少后我不需要数组数据，因此更愿意就地找到最小元素。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:32:48.130

Thrust 的缩减只使用`O(1)`临时存储（实际上`O(#processors))`，但如果您坚持自己管理分配，您可以[实现自己的自定义分配方案](https://github.com/thrust/thrust/blob/1.6.0/examples/cuda/custom_temporary_allocation.cu)。

# objective-c - 透明 UIImageView 在所有 UI 前面

> ID：10041854
> 
> 赞同：3
> 
> 时间：2012-04-06T09:52:02.517
> 
> 标签：objective-c, ios, uitableview, uinavigationcontroller, uiimageview

在我的应用程序首次启动后，我想向用户展示一个小教程，以解释我的应用程序的功能。

所以我需要设置一个带有一些箭头和标签的透明 UIImageView，其中主 UI（更具体地说，tabbarcontroler 中的 navigationviewcontroller 中的 tableviewcontroller）在教程图像后面仍然可见。

而且，由于教程由多张图片组成，我想添加一个点击手势来切换到另一张图片。

我试图在我的标签栏控制器中添加一个 UIImageView，并添加一个手势识别器，但它不会对我的点击做出反应，它只是工作，就像没有 ImageView 一样 - 选择表中的 roe，按下按钮。

```
 -(void)nextTap:(UIGestureRecognizer*)nextTap
{
    //Show another image
}
-(void)showTutorial
{
    NSLog(@"Show tutorial");
    UIImageView *tutorialImage = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"BG"]];
    [self.navigationController.tabBarController.view addSubview:tutorialImage];
    UITapGestureRecognizer *nextTap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(nextTap:)];
    [tutorialImage addGestureRecognizer:nextTap];
} 
```

谁能告诉我，我应该在哪里添加我的视图，以便它正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T10:01:32.087

用另一个 UIWindow 来做！

像这样：

```
-(void)showTutorial
{
    NSLog(@"Show tutorial");

    CGRect screenBounds = [UIScreen mainScreen].bounds;
    UIWindow *anotherWindow = [[UIWindow alloc] initWithFrame:CGRectMake(0, 0, screenBounds.size.width, screenBounds.size.height)];
    anotherWindow.windowLevel = UIWindowLevelAlert+1;
    [anotherWindow makeKeyAndVisible];

    // make the background of the new window black alpha 0.5
    anotherWindow.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.5];

    // add a test-image (icon)
    UIImageView *image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"icon.png"]];
    [anotherWindow addSubview:image];

    UIImageView *tutorialImage = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"BG"]];
    [anotherWindow addSubview:tutorialImage];
    UITapGestureRecognizer *nextTap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(nextTap:)];
    [tutorialImage addGestureRecognizer:nextTap];
} 
```

**已编辑**！现在它也应该适用于您的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T10:00:15.693

在添加标签栏后尝试将图像视图添加到主屏幕。这可能工作正常。我不明白你的主要要求，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T14:42:30.677

你应该设置 tutorialImage.userInteractionEnabled = YES UIImageView 的 userInteractionEnabled 属性的默认值为 NO，它会阻止 UIImageView 接收任何触摸事件甚至手势

# java - 如何从网页获取 HTML 数据到 Android？

> ID：10041868
> 
> 赞同：0
> 
> 时间：2012-04-06T09:53:27.087
> 
> 标签：java, android

例如，我想从类过滤的 HTML 中获取数据

`<p class="job_list_first_line">`

在那个类中，我想获取一些数据，例如

`<a href="adasdasdasd.html" title="blablabla"> some value text text text < /a >`

标签。

那可能吗？请注意，我有兴趣检索我无法控制的网页的数据。

提前感谢大家，狼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T09:57:20.593

您可以下载整个 html 页面并借助字符串方法和正则表达式对其进行过滤。这里有很多线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T09:58:34.353

也许JSoup可以帮助你？这是一个 HTML 解析器：

> jsoup 实现了 WHATWG HTML5 规范，并将 HTML 解析为与现代浏览器相同的 DOM。

*   从 URL、文件或字符串中抓取和解析 HTML
*   使用 DOM 遍历或 CSS 选择器查找和提取数据
*   操作 HTML 元素、属性和文本
*   根据安全白名单清理用户提交的内容，以防止 XSS 攻击
*   输出整洁的 HTML

[JSoup 链接](http://jsoup.org/)

# xcode - 如何卸载旧版本的 Xcode

> ID：10041871
> 
> 赞同：38
> 
> 时间：2012-04-06T09:53:54.120
> 
> 标签：xcode, uninstallation

我的 Macbook 上都安装了 Xcode 4.0.2 和 3.2.5。如何在不卸载新版本的情况下卸载旧版本？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-06T10:57:16.533

```
sudo <Xcode>/Library/uninstall-devtools --mode=all 
```

Developer 文件夹的路径在哪里`<Xcode>`（其中包含“Xcode 3.2.5”）这不会影响“Xcode 4.0.2”的安装，因为它位于完全不同的文件夹中。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-11-10T10:27:19.857

*   您的**XCode 4.x**安装在您的`/Applications/ folder`
*   旧的**XCode 3.x**已安装，`/Developer/`可以通过运行以下命令独立卸载：

> sudo /Developer/Library/uninstall-devtools –mode=all

这是来自 XCode Apple Developers Team 的一个不错的 mv :)

# javascript - 如何优化 KML 坐标中的标记数量？

> ID：10041873
> 
> 赞同：1
> 
> 时间：2012-04-06T09:54:04.513
> 
> 标签：javascript, google-maps, math, google-maps-api-3, kml

在我的谷歌地图程序中，我有一个简单的 KML 解析器，它只检索坐标并为它们在地图上创建折线，另外在每个点中创建标记，稍后用于编辑线。较长的路线地图会因过多的标记而挂起。我明白了，也许你只能在曲线超过 10 度时创建标记？现在我有`if`它只每两点筛选一次，但这是一个弱点子。

解包数组的说明性：

```
for (var i=0;i<coords.length;i++) { 
    if(i!=0&&i!=coords.length-1){
        var prevpt = new google.maps.LatLng(coords[i-1].lat, coords[i-1].lng);
        var pivot = new google.maps.LatLng(coords[i].lat, coords[i].lng);
        var nextpt = new google.maps.LatLng(coords[i+1].lat, coords[i+1].lng);

        var marker = createMarker(pivot);
        polyMarkers.push(marker);
        var path = polyLine.getPath();
        path.push(pivot);
    }
} 
```

如何计算下一个超过10度？

也许你对如何优化它有一些其他的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T11:02:22.183

看来您需要折线简化 - [Douglas-Peucker algorithm](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)。[这是另一个实现的描述](http://softsurfer.com/Archive/algorithm_0205/algorithm_0205.htm)

# weblogic - Oracle weblogic 性能

> ID：10041876
> 
> 赞同：0
> 
> 时间：2012-04-06T09:54:11.877
> 
> 标签：weblogic

我们计划为我们的应用程序提供生产环境，以规划我们需要以下信息的服务器

*   最多可以有多少用户登录到应用程序/服务器（示例数据）
*   运行 Web 应用程序和企业应用程序所需的最小内存是多少
*   我们可以创建多少个最大托管服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:50:40.150

您的问题非常广泛，需要以目前的形式回答。

所有这一切都***取决于***您使用的硬件、它的优化程度以及每个用户将执行多少事务。

作为起点，您可以查看[有关 Weblogic 服务器容量规划的 Oracle 指南](http://docs.oracle.com/cd/E15051_01/wls/docs103/perform/appc_capplan.html)，该指南将使您了解影响这一点的各种因素。

我们在 32 GB RAM 服务器上运行 Weblogic，每个托管服务器通常使用 4 - 8 GB，并且可以支持 500 个或更多并发用户，具体取决于他们的活动会话。

# c# - Visual Studio 2008 IDE 未正确呈现自定义控件

> ID：10041878
> 
> 赞同：5
> 
> 时间：2012-04-06T09:54:16.743
> 
> 标签：c#, visual-studio-2008, custom-controls

我在设计时遇到了 Visual Studios 2008 中的所有表单和自定义控件的问题。在上次签入之前，所有控件都按预期呈现。当前版本和以前的工作版本之间的唯一主要区别是控件上的属性`UIText`从 重命名`Content`为`Value`。其他更改是添加了一个新表单和 3 个新枚举，但肯定没有明显的更改会影响程序中的所有表单（包括新表单）。

所有控件（在每个窗体上）现在呈现为带有控件名称的框（但是它们都在运行时正确呈现）：

![渲染问题](../Images/7caf27a9f21d5e413bcea2c08b0219db.png)

我尝试在我的项目中创建一个全新的表单，创建一个只有一个标签的全新自定义控件，但我仍然遇到完全相同的问题：

![离奇](../Images/f616e26a6b3f61e0971cea58309572d8.png)

请注意，标准的 .Net 表单控件可以正常工作，因此这只是自定义控件的问题。

如果我从存储库中恢复我以前的版本，那么一切都会重新开始正确呈现：

![正确渲染](../Images/1378bca435ebe6d106201e2752f62dac.png)

我可以恢复到这个工作版本并继续，但我宁愿知道如果问题再次发生如何解决。我在这里发帖希望这是一个与 Visual Studios 2008 问题相对的编程问题（顺便说一下，在 SP1 上）。

## 更新 - 跟踪问题，无法解释

我*解决*了这个问题。好吧，固定并不是真正的正确词。我通过一次删除所有用户控件 1 来定位问题，直到表单再次开始正确呈现。问题出在我的签名控件中（它已经存在了很长时间，只有在我最近一次签到时，我才`iVirtualDocket.CodeLibrary`在主项目中添加了对该项目的引用：

```
 iVirtualDocket
    - References iVirtualDocket.UIControls
    - References iVirtualDocket.CodeLibrary
  iVirtualDocket.UIControls
    -References iVirtualDocket.CodeLibrary 
```

签名有一个名为 的属性`SignatureData`，它正在执行此操作：

```
public byte[] SignatureData
{
    get
    {
        if (_signature == null)
        {
            return null;
        }
        else
        {
            return iVirtualDocket.CodeLibrary.Conversions.ImageToByteArray(
                _signature, ImageFormat.Png);
        }
    }
} 
```

ImageToByteArray 如下所示：

```
public static byte[] ImageToByteArray(Image imageToConvert,
        ImageFormat formatOfImage)
{
    byte[] ret;
    using (MemoryStream ms = new MemoryStream())
    {
        imageToConvert.Save(ms, formatOfImage);
        ret = ms.ToArray();
    }

    return ret;
} 
```

如果我将上述方法移到`UIControls`项目中，那么一切正常。但是，一旦我将该方法放回`CodeLibrary`项目中并在那里调用它，我的所有表单都会停止呈现用户控件。

因此，执行以下操作可以解决问题，但我真的很想知道原因：

```
public byte[] SignatureData
{
    get
    {
        if (_signature == null)
        {
            return null;
        }
        else
        {
            // Need to call this code directly here instead of through 
            // the CodeLibrary conversions, otherwise all user controls stop 
            // rendering in design mode
            byte[] ret;
            using (MemoryStream ms = new MemoryStream())
            {
                _signature.Save(ms, ImageFormat.Png);
                ret = ms.ToArray();
            }

            return ret;
        }
    }
} 
```

*（更奇怪的是我还没有使用这个属性。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T18:54:03.473

我们有一个应用程序有类似的非设计时显示问题。通过做一些研究（我不记得我们在哪里找到它），我们最终创建了一个文件

设计时间属性.xmta

它的类型是“设计时属性文件”的类型

在其中，我们只需要声明我们定义的每个控件类并将其限定为“DesktopCompatible”。通过这种方式，它显然告诉设计者可以绘制，并且某些控件中的实际功能（对我们来说也是手持扫描仪上的签名控件）实际上会在运行时调用设计器中不可用的东西。该文件的内容类似于...

```
<?xml version="1.0" encoding="utf-16"?>
<Classes xmlns="http://schemas.microsoft.com/VisualStudio/2004/03/SmartDevices/XMTA.xsd">
  <Class Name="MyNamespace.MyControl">
    <DesktopCompatible>true</DesktopCompatible>
  </Class>

  <Class Name="MyNamespace.MyOtherControl">
    <DesktopCompatible>true</DesktopCompatible>
  </Class>

  <Class Name="AnotherNamespace.MySignControl">
    <DesktopCompatible>true</DesktopCompatible>
  </Class>
</Classes> 
```

这也是对提供 csauve 答案的评论的补充。如果您的构造函数试图初始化与设备相关的东西并因此引发错误，因为设计时显然没有设备 dll、控件或任何可能/将在设计时杀死该控件的东西。我们创建了两个静态函数来测试任何一种方式

```
public static bool IsDesignTime()
{
  return System.ComponentModel.LicenseManager.UsageMode ==
         System.ComponentModel.LicenseUsageMode.Designtime;
}

public static bool IsRunTime()
{
  return System.ComponentModel.LicenseManager.UsageMode ==
         System.ComponentModel.LicenseUsageMode.Runtime;
} 
```

并在构造函数中分别调用它们......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:44:15.883

我想也许你需要让你的控件知道它们何时处于设计模式。如果可以避免，您的控件的无参数构造函数不应执行任何昂贵或具有副作用的操作（即从磁盘加载文件）。

我通过您的屏幕截图假设您正在使用 WPF。我相信可以使用 DesignerProperties.GetIsInDesignMode(this) 确定设计模式，

请参阅[http://msdn.microsoft.com/en-us/library/system.componentmodel.designerproperties.getisindesignmode.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.designerproperties.getisindesignmode.aspx)

```
public partial class MyControl : UserControl
{
   public MyControl()
   {
      InitializeComponent();
      if (!DesignerProperties.GetIsInDesignMode(this))
      {
        //Do expensive operations here
      }
   }
} 
```

您可能还想阅读[http://blogs.msdn.com/b/jgalasyn/archive/2007/10/29/troubleshooting-wpf-designer-load-failures.aspx](http://blogs.msdn.com/b/jgalasyn/archive/2007/10/29/troubleshooting-wpf-designer-load-failures.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-03T01:34:15.017

当您的组件（用户控件、表单、组件）的设计器端无法在 Visual Studio 设计器编辑器中呈现时。在项目中添加“ClassDiagram”的简单方法，项目上下文菜单（右键单击项目名称），查看类图。编辑类的自定义属性（见图），在“DesignTimeAttributes.xmta”中自动添加条目，我们也可以为“Properties”设置自定义属性。 [![类图/xmta](../Images/d8a193d4278f97bbc1e52de50072a952.png)](https://i.stack.imgur.com/BLigJ.png) [![向属性添加自定义属性](../Images/1c7b0ad343843fd29eefb4117fc85f14.png)](https://i.stack.imgur.com/gikZK.png)

正如我在上面评论的那样，LicenseManager 类在“NETCF”中是不可用的。然后我们可以使用以下内容：

```
using System;
using System.Linq;
using System.Collections.Generic;
using System.Text;

namespace SmartDeviceCommon
{
    public static class SmartDeviceApplication
    {
        public static bool DesignTime
        {
            get
            {
                return Environment.OSVersion.Platform != PlatformID.WinCE;
            }
        }

        public static bool RunTime
        {
            get
            {
                return Environment.OSVersion.Platform == PlatformID.WinCE;
            }
        }

        public static bool IsDesignTime()
        {
            // Determine if this instance is running against .NET Framework by using the MSCoreLib PublicKeyToken
            System.Reflection.Assembly mscorlibAssembly = typeof(int).Assembly;
            if ((mscorlibAssembly != null))
            {
                if (mscorlibAssembly.FullName.ToUpper().EndsWith("B77A5C561934E089"))
                {
                    return true;
                }
            }
            return false;
        }

        public static bool IsRunTime()
        {
            // Determine if this instance is running against .NET Compact Framework by using the MSCoreLib PublicKeyToken
            System.Reflection.Assembly mscorlibAssembly = typeof(int).Assembly;
            if ((mscorlibAssembly != null))
            {
                if (mscorlibAssembly.FullName.ToUpper().EndsWith("969DB8053D3322AC"))
                {
                    return true;
                }
            }
            return false;
        }

    }

} 
```

如果不起作用，则使用**@Phil 的第一条评论**：启动具有管理员权限的 Visual Studio 的另一个实例，附加到第一个实例，使用第一个实例，双击您的自定义用户控件到设计器加载，未渲染的组件可以包含特定于平台的调用 (dllimport) 甚至其他错误。

最后一个你可以清理 appData 中的 CoreCon 文件夹，如 ("C:\Users\anton\AppData\Local\Microsoft\CoreCon\1.0")，将 'anton' 更改为你的用户名。（在此之前关闭视觉工作室）。

希望这可以帮助任何人，netcf 已被弃用且缺乏文档

安东尼奥

# c# - ObjectDataSource 未找到 SelectCountMethod

> ID：10041881
> 
> 赞同：3
> 
> 时间：2012-04-06T09:54:22.783
> 
> 标签：c#, objectdatasource

我正在尝试使用启用分页的 ObjectDataSource。这需要我使用 SelectCountMethod（这样网格才能知道有多少页）。我的 ObjectDataSource 看起来像这样：

```
<asp:ObjectDataSource ID="ItemsDataSource" runat="server" SelectMethod="GetContentGridItems" 
TypeName="ContentItemExtensions" SelectCountMethod="GetContentGridItemsCount" EnablePaging="True">

<SelectParameters>
    <asp:QueryStringParameter Name="contentItemID" QueryStringField="cid" DbType="Guid" />
    <asp:QueryStringParameter Name="contentTypeID" QueryStringField="tid" Type="String" />
    <asp:QueryStringParameter Name="contentTypeGroup" QueryStringField="tgid" Type="String" />
    <asp:QueryStringParameter Name="parentItemID" QueryStringField="pcid" DbType="Guid" />
    <asp:QueryStringParameter Name="parentFieldID" QueryStringField="pfld" type="String" />
</SelectParameters> 
```

对应的静态类如下所示：

```
public static class ContentItemExtensions
{
    public static DataTable GetContentGridItems(Guid? contentItemId,string contentTypeID, string contentTypeGroup, Guid? parentItemID, string parentFieldID,int maximumRows, int startRowIndex)  
    public static int GetContentGridItemsCount(Guid? contentItemId,string contentTypeID, string contentTypeGroup, Guid? parentItemID, string parentFieldID)
} 
```

当我不使用分页时一切正常，但是当我启用分页时，我得到以下异常，它清楚地说明了它需要什么：

> ObjectDataSource“ItemsDataSource”找不到具有以下参数的非泛型方法“GetContentGridItemsCount”：contentItemID、contentTypeID、contentTypeGroup、parentItemID、parentFieldID。

我的方法有这些参数并且是非通用的，所以我不知道。谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T09:58:03.073

您的方法不采用相同的参数，因为参数名称区分大小写：

```
public static int GetContentGridItemsCount(Guid? contentItemId,
    string contentTypeId, string contentTypeGroup,
    Guid? parentItemID, string parentFieldID)
{
} 
```

不一样：

```
public static int GetContentGridItemsCount(Guid? contentItemID,
    string contentTypeID, string contentTypeGroup,
    Guid? parentItemID, string parentFieldID)
{
} 
```

前两个参数的名称必须以大写字母结尾，`D`以匹配`ObjectDataSource`正在查找的方法签名。

# wpf - 命令触发移动焦点在哪里？

> ID：10041885
> 
> 赞同：0
> 
> 时间：2012-04-06T09:54:33.267
> 
> 标签：wpf

我有几个绑定到关键手势的命令。执行命令时，焦点会转到某处，因此必须按下 Tab 键才能将其返回到窗口。

更奇怪的是，LostFocus 并没有在命令执行之前的控件上触发。

我坚持下去。我怎样才能防止这种奇怪的行为？

# sockets - 在网络编程中进行通信的 tcp/ip 协议和 UDP 协议有什么不同

> ID：10041887
> 
> 赞同：0
> 
> 时间：2012-04-06T09:54:44.070
> 
> 标签：sockets, network-programming, udp

我想问一下网络编程中不同的http，TCP，UDP协议，当我想创建游戏时，你会推荐什么协议，你能解释一下吗？因为我刚开始使用 soket 通信开发网络编程。感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:07:51.460

我认为这取决于您制作的游戏类型。对于需要快速、持续更新的游戏，UDP 可能会更好，但我一直使用 TCP。如果您正在制作某种不经常发送数据的回合制游戏，我会使用 TCP。

这也可能有帮助：[UDP vs TCP，它快多少？](https://stackoverflow.com/questions/47903/udp-vs-tcp-how-much-faster-is-it)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:26:02.083

我的朋友，这取决于你的愿望。当您向所有用户发送持续更新时，您应该使用 UDP。因为如果更新丢失，那肯定不会是宇宙的终结。在基于网络的游戏中，每秒要传输如此多的更新，因此如果丢失了一些更新，则不会发生任何非常有害的事情。

另一方面，如果你使用 TCP，如果一个数据包丢失，那么协议的可靠性确保它会被再次发送。但是考虑一下它将在网络上产生的开销。如果您的游戏用户的带宽相对较低，他们将面临严重的麻烦。

# java - 如何在java中获取不同时间服务器的当前时间？

> ID：10041890
> 
> 赞同：-1
> 
> 时间：2012-04-06T09:54:59.953
> 
> 标签：java, android

我有三个时间服务器，time-nw.nist.gov，time1.ucla.edu，time.ien.it 现在我如何在 java/android 中获取所有这些服务器的当前时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:04:47.017

检查 Apache Commons Net 库

[https://commons.apache.org/net/](https://commons.apache.org/net/)

从他们的[例子](https://commons.apache.org/net/examples/ntp/TimeClient.java)：

```
public static final void timeTCP(String host) throws IOException
{
    TimeTCPClient client = new TimeTCPClient();
    try {
          // We want to timeout if a response takes longer than 60 seconds
          client.setDefaultTimeout(60000);
          client.connect(host);
          System.out.println(client.getDate());
    } finally {
          client.disconnect();
    }
} 
```

# c++ - 为什么在定义变量并链接库时出现“未定义的引用”？

> ID：10041897
> 
> 赞同：0
> 
> 时间：2012-04-06T09:55:34.027
> 
> 标签：c++, compiler-errors, cmake

我们有一些应用程序链接到我们自己的几个库。我最近添加了一个链接到这些库的新应用程序，并且可以在 Windows 上成功编译。

但是，在 Linux 上，我看到一个静态变量的“未定义引用”错误，这当然意味着该变量没有定义。错误发生在库中，但仅在链接到新应用程序时（现有应用程序仍然可以正常链接）。

如您所见，编译器说这`kAppVersion`是未定义的。实际上它是在[Version.cpp](http://code.google.com/p/synergy-plus/source/browse/branches/1.4/src/lib/common/Version.cpp)中定义的，并且 common 是链接的（在[CMakeLists.txt](http://code.google.com/p/synergy-plus/source/browse/branches/1.4/src/cmd/synergyd/CMakeLists.txt)中指定）。我们认为这可能与`target_link_libraries`排序有关，但移到`common`之前`base`（发生错误的地方）似乎没有效果。此外，在其他[CMakeLists.txt](http://code.google.com/p/synergy-plus/source/browse/branches/1.4/src/cmd/synergys/CMakeLists.txt)（例如 synergys）中，排序似乎无关紧要，因为此应用程序编译成功。这个类似的问题似乎暗示订购很重要，但我对此没有任何成功：

Qustion：[库已链接，但引用未定义](https://stackoverflow.com/questions/7783345/library-is-linked-but-reference-is-undefined)

我唯一的想法是它在[synergyd.cpp](http://code.google.com/p/synergy-plus/source/browse/branches/1.4/src/cmd/synergyd/synergyd.cpp)或[CDaemonApp.cpp](http://code.google.com/p/synergy-plus/source/browse/branches/1.4/src/lib/synergy/CDaemonApp.cpp)中可能有问题——但我看不到任何在 Linux 上编译但在 Windows 上编译的明显内容。

```
Scanning dependencies of target synergyd
[ 90%] Building CXX object src/cmd/synergyd/CMakeFiles/synergyd.dir/synergyd.o
Linking CXX executable ../../../../../bin/debug/synergyd
../../../../../lib/debug/libarch.a(CArch.o): In function `~XExitApp':
/srv/buildbot/synergy/1.4-linux32/build/src/lib/arch/../synergy/XSynergy.h:114: undefined reference to `vtable for XExitApp'
../../../../../lib/debug/libarch.a(CArch.o): In function `CArchAppUtil::exitApp(int)':
/srv/buildbot/synergy/1.4-linux32/build/src/lib/arch/CArchAppUtil.h:31: undefined reference to `XExitApp::XExitApp(int)'
/srv/buildbot/synergy/1.4-linux32/build/src/lib/arch/CArchAppUtil.h:31: undefined reference to `typeinfo for XExitApp'
../../../../../lib/debug/libarch.a(CArchAppUtilUnix.o): In function `CArchAppUtilUnix::parseArg(int const&, char const* const*, int&)':
/srv/buildbot/synergy/1.4-linux32/build/src/lib/arch/CArchAppUtilUnix.cpp:32: undefined reference to `CApp::isArg(int, int, char const* const*, char const*, char const*, int)'
/srv/buildbot/synergy/1.4-linux32/build/src/lib/arch/CArchAppUtilUnix.cpp:37: undefined reference to `CApp::isArg(int, int, char const* const*, char const*, char const*, int)'
../../../../../lib/debug/libbase.a(CLog.o): In function `CLog::insert(ILogOutputter*, bool)':
/srv/buildbot/synergy/1.4-linux32/build/src/lib/base/CLog.cpp:213: undefined reference to `kAppVersion'
collect2: ld returned 1 exit status
make[2]: *** [../../bin/debug/synergyd] Error 1
make[1]: *** [src/cmd/synergyd/CMakeFiles/synergyd.dir/all] Error 2
make: *** [all] Error 2 
```

完整的代码可以从[我们的存储库](http://code.google.com/p/synergy-plus/source/browse/#svn/branches/1.4/src)中浏览。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T23:12:02.950

**简而言之，真正的问题是：**`arch`和之间的循环库依赖`synergy`。此外， `base`实际上没有链接到`common`库（在 CMakeLists.txt 中`base`）。

有趣的是，这是由库的 CMakeLists.txt 文件中的配置问题引起的。`synergyd`这与我添加的新应用程序的 CMakeLists.txt 无关。

问题是我没有将库相互链接，新调用被添加到其他库中的类。但是，现在循环链接似乎存在问题。

例如，我可以添加...

```
if (UNIX)
    target_link_libraries(arch synergy)
endif() 
```

...到`arch`库中的 CMakeLists.txt，因为`arch`现在调用`synergy`库中的某些内容。但这是无效的，因为`synergy`已经在`arch`.

显然这在 Windows 上无关紧要。

我不太确定是什么导致了这种情况开始发生，因为它是以前编译好的所有旧代码，并且在其他应用程序中仍然如此。我怀疑很可能与最近从 CArch 中删除样板有关，而不是 CDaemonApp 正在做的事情（或者甚至可能是两者的结合）。

# 更新

以防万一有人关心;-)——我认为这与 and 之间糟糕的循环库依赖关系之间的关系有关`arch`，`synergy`再加上`CDaemonApp.cpp`不包括的事实`CApp.h`——这意味着它被包含在其他一些点上，导致奇怪的未定义参考错误。

为了正确解决这个问题，我删除了循环依赖，这似乎是问题的核心。

# 更新 2

代码现在完全编译了，哇！

我仍然看到最后一个错误（这个问题的主题）：

```
[ 90%] Building CXX object src/cmd/synergyd/CMakeFiles/synergyd.dir/synergyd.o
Linking CXX executable ../../../../../bin/debug/synergyd
../../../../../lib/debug/libbase.a(CLog.o): In function `CLog::insert(ILogOutputter*, bool)':
/home/nick/Projects/synergy/branches/1.4/src/lib/base/CLog.cpp:213: undefined reference to `kAppVersion'
collect2: ld returned 1 exit status
make[2]: *** [../../bin/debug/synergyd] Error 1
make[1]: *** [src/cmd/synergyd/CMakeFiles/synergyd.dir/all] Error 2
make: *** [all] Error 2 
```

这仅仅是由于`base`库没有链接到`common`库引起的。将以下代码添加到 base 的 CMakeLists.txt 文件中修复了此问题：

```
if (UNIX)
    target_link_libraries(base common)
endif() 
```

仍然不确定为什么会发生这种情况，只是很高兴它已修复。

# 更新 3

这是提交：[r1354](http://code.google.com/p/synergy-plus/source/detail?r=1354)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T10:05:11.037

首先，链接的顺序确实很重要，至少在 g++ 中是这样。如果`A`使用来自 的符号`B`，`B`则应在 之后提及`A`：`g++ ... -lA -lB`

我还看到一个`undefined reference to vtable for XExitApp`. 此错误意味着您有一个`XExitApp`未定义的虚函数。如果您不想定义该函数，请通过添加使其成为纯虚拟函数`= 0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T13:29:32.820

我注意到的唯一一件事是您`set(inc...`在`/synergyd/CMakeLists.txt`. 这是否与我只能猜测的问题有关。

您遇到的所有链接错误似乎都是由于链接器没有找到它正在寻找的符号。造成这种情况的通常原因是相关的 .o 文件不存在、未包含在构建中或编译不正确。

我将首先清理，更改 CMakeList.txt 文件以尽可能匹配已知的工作版本，并在所有编译器/警告打开的情况下重建所有内容。如果这不起作用（相同的错误或不同的错误），我会更仔细地研究什么起作用和不起作用。您说 Windows 构建有效，但 Linux 构建无效。两者之间有什么区别，哪些可以解释这个问题。与正确构建的一个类似项目类似：这两个项目之间有什么区别。

# entity-framework - 实体框架：正在插入更新的记录（而不是更新）

> ID：10041900
> 
> 赞同：1
> 
> 时间：2012-04-06T09:55:49.230
> 
> 标签：entity-framework, dbcontext, updating

我正在使用以下代码更新数据库中的某些记录：

```
 IList<Item> list;
        using (DbContext context = new DbContext()
        {
            list = Item.ToList();
            foreach (Item item in list)
            {
                // attach the item
                context.Item.Attach(item);

                item.Updated = DateTime.Now; 
                context.Items.Add(item);
                context.SaveChanges();
             }
        } 
```

问题是 EF 正在插入一个新项目而不是更新更新的项目......我在网站上搜索了 abit 并看到了将项目附加到 DbContext 的建议，但这也不起作用？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T10:38:58.290

程序应该是：

```
using (DbContext context = new DbContext()
{
    foreach (Item item in list)
    {
        item.Updated = DateTime.Now; 
        context.Entry(item).State = EntityState.Modified;//attaches automatically
    }
    context.SaveChanges();
} 
```

您正在调用`Add`这意味着 INSERT。

# asp.net - 如何在 asp.net 中使用 Request.Url 获取完整的 URL？

> ID：10041901
> 
> 赞同：2
> 
> 时间：2012-04-06T09:55:53.063
> 
> 标签：asp.net, facebook, twitter

我正在使用**AddThis**插件在**facebook、twitter 和电子邮件上分享我的网站。**

我想从 facebook 和 twitter 中知道，用户从那里单击共享链接以重定向到我的页面。

如果有人点击下面 twitter 的共享链接，则形成的 URL 是：

**http://localhost:54820/Consumer/Categories.aspx?Check=NTI%3D#.T363yjFh748.twitter**

你可以看到在 url 的末尾附加了**twitter 。**

如果有人点击下面的 facebook 共享链接，则形成的 URL 是：

**http://localhost:54820/Consumer/Categories.aspx?Check=NTI%3D#.T366Sb_aqUM.facebook**

你可以看到在 url 的末尾附加了**facebook 。**

我正在使用**Request.Url**从地址栏中获取 url。但我只得到**http://localhost:54820/Consumer/Categories.aspx?Check=NTI%3D**网址。所以我无法检查我的网站的重定向是从 facebook 还是 twitter 完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:17:14.937

无法在服务器端获取“哈希参数”，但可以通过 JavaScript ( `location.hash`) 访问它并将值发布到您的服务器。

这是一个示例：[https ://stackoverflow.com/a/1586300/123297](https://stackoverflow.com/a/1586300/123297)

# javascript - 如何获得位于地图上的指针的纬度和经度？

> ID：10041904
> 
> 赞同：0
> 
> 时间：2012-04-06T09:56:05.540
> 
> 标签：javascript, google-maps, google-maps-api-3

我目前正在使用谷歌 API 来指向谷歌地图上的位置。

这是`google-maps-utility-library-v3`

与链接

```
http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html 
```

我写了这段代码

```
<script type="text/javascript">

        function initialize() {
        var secheltLoc = new google.maps.LatLng(49.47216, -123.76307);
        var myMapOptions = {
             zoom: 15
            ,center: secheltLoc
            ,mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var theMap = new google.maps.Map(document.getElementById("map_canvas"), myMapOptions);
        var marker = new google.maps.Marker({
            map: theMap,
            draggable: true,
            position: new google.maps.LatLng(49.47216, -123.76307),
            visible: true
        });
    }
    function getLatLong(){
    var secheltLoc = new google.maps.LatLng(49.47216, -123.76307);
        var myMapOptions = {
             zoom: 15
            ,center: secheltLoc
            ,mapTypeId: google.maps.MapTypeId.ROADMAP
        };
    var theMap = new google.maps.Map(document.getElementById("map_canvas"), myMapOptions);
    var marker = new google.maps.Marker({
            map: theMap,
            draggable: true,
            position: new google.maps.LatLng(49.47216, -123.76307),
            visible: true
        });
    infoBox = new InfoBox({latlng: marker.getPosition()});
    <!--  var getLat = new InfoBox(); -->
     alert(InfoBox.prototype.getPosition);
    }
</script>

<body onload="initialize()">
   <div id="map_canvas" style="width:100%; height:50%"></div>
   <input type="button" onclick="getLatLong();" />
   <div id="letLong"></div> 
```

我想要的是当我单击此`getLatLong()`功能时，我必须获取当前定位的标记纬度经度。

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:03:53.570

试试这个代码：

```
<script type="text/javascript">
    var marker=null;

    function initialize()
    {
        var secheltLoc = new google.maps.LatLng(49.47216, -123.76307);
        var myMapOptions = {
            zoom:15, center:secheltLoc, mapTypeId:google.maps.MapTypeId.ROADMAP
        };
        var theMap = new google.maps.Map(document.getElementById("map_canvas"), myMapOptions);
        marker = new google.maps.Marker({
            map:theMap,
            draggable:true,
            position:new google.maps.LatLng(49.47216, -123.76307),
            visible:true
        });
    }
    function getLatLong()
    {
        alert(marker.position);
    }
</script> 
```

我希望这对你有帮助。

# php - PHP 日期问题，无法转换 1970-01-01 之前的日期

> ID：10041905
> 
> 赞同：2
> 
> 时间：2012-04-06T09:56:06.703
> 
> 标签：php, mysql, date

以下代码输出**`1970-01-01`**错误。

```
<?php
$dob='17 Jan 1900';
$datetime = strtotime($dob);
$dob = date("Y-m-d", $datetime);
echo $dob;
?> 
```

但是它可以正常工作**`$dob = '17 Jan 2000';`**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T10:01:49.157

如果您的 PHP 版本允许它考虑使用[DateTime](http://www.php.net/manual/en/class.datetime.php)而不是 strtotime ：

```
$date = DateTime::createFromFormat('d M Y','17 Jan 1900');
echo $date->format('Y-m-d'); 
```

对于 >= 5.2 和 <= 5.3 之间的 PHP 版本，只需使用 DateTime 构造函数：

```
$date = new DateTime('17 Jan 1900');
echo $date->format('Y-m-d'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T09:57:36.007

> 时间戳的有效范围通常是从 1901 年 12 月 13 日星期五 20:45:54 GMT 到 2038 年 1 月 19 日星期二 03:14:07 GMT。（这些日期对应于 32 位有符号整数的最小值和最大值）。但是，在 PHP 5.1.0 之前，此范围在某些系统（例如 Windows）上被限制为 01-01-1970 到 19-01-2038。

但是，您可以使用 PHP [DateTIme](http://php.net/manual/en/class.datetime.php)类。

# mysql - 捕捉 sockpuppets

> ID：10041910
> 
> 赞同：0
> 
> 时间：2012-04-06T09:56:40.167
> 
> 标签：mysql, sql

我有一个包含用户 ID、IP 地址和登录日期时间的日志表。我需要通过设置多个帐户来找出谁是冒充其他用户的用户。

这是我的示例日志表：

```
+---------+-------------+---------------------+
| user id | ip address  | log in datetime     |
+---------+-------------+---------------------+
| 17      | 192.168.1.4 | 2012-04-01 00:01:00 |
+---------+-------------+---------------------+
| 21      | 192.168.1.2 | 2012-04-01 00:02:00 |
+---------+-------------+---------------------+
| 11      | 192.168.1.5 | 2012-04-01 00:06:00 |
+---------+-------------+---------------------+
| 1       | 192.168.1.3 | 2012-04-01 00:09:00 |
+---------+-------------+---------------------+
| 3       | 192.168.1.3 | 2012-04-01 00:15:00 |
+---------+-------------+---------------------+
| 8       | 192.168.1.5 | 2012-04-01 00:22:00 |
+---------+-------------+---------------------+
| 9       | 192.168.1.1 | 2012-04-01 00:26:00 |
+---------+-------------+---------------------+
| 13      | 192.168.2.1 | 2012-04-01 00:27:00 |
+---------+-------------+---------------------+
| 2       | 192.168.1.1 | 2012-04-01 00:28:00 |
+---------+-------------+---------------------+
| 33      | 192.168.1.7 | 2012-04-01 00:30:00 |
+---------+-------------+---------------------+
| 27      | 192.168.1.1 | 2012-04-01 00:31:00 |
+---------+-------------+---------------------+
| 22      | 192.168.1.7 | 2012-04-01 00:45:00 |
+---------+-------------+---------------------+ 
```

所以，这是我的问题：如何选择具有相同IP地址且登录时间差小于5分钟的用户ID列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:01:27.347

像这样的东西会起作用

```
SELECT t1.user_id,t2.user_id
FROM login_table t1
    INNER JOIN login_table t2 ON t1.ip_address=t2.ip_address AND t1.user_id!=t2.user_id
WHERE 
    t1.login_time BETWEEN 
        DATE_SUB(t2.login_time, INTERVAL 5 MINUTE) 
    AND DATE_ADD(t2.login_time, INTERVAL 5 MINUTE) 
```

如果您只想要独特的配对并且您不关心订单，那么您可以使用

```
SELECT DISTINCT GREATEST(t1.user_id,t2.user_id),LEAST(t1.user_id,t2.user_id)... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:03:53.680

像这样的东西怎么样 -

```
SELECT *
FROM log l1
INNER JOIN log l2
    ON l1.ip_address = l2.ip_address
    AND l1.user_id < l2.user_id
    AND l1.login _time BETWEEN (l2.login_time - INTERVAL 5 MINUTE) AND (l2.login_time + INTERVAL 5 MINUTE) 
```

# jquery - Jquery/JqGrid - 当网格只包含一列时，网格分页控件被切断

> ID：10041911
> 
> 赞同：1
> 
> 时间：2012-04-06T09:56:43.150
> 
> 标签：jquery, jqgrid

我有一个包含动态生成网格的页面，用户可以在其中选择显示哪些列。可以有合理数量的数据行，因此网格启用了分页。

在大多数情况下都可以正常工作，除非只显示一列。在这种情况下，分页控制在大约一半处被切断，无法分页。

我在 JSFiddle 中创建了两个简单的网格来说明 - [http://jsfiddle.net/2wj2A/](http://jsfiddle.net/2wj2A/)。带有两列的顶部网格看起来与预期的一样，而带有单列的底部网格显示了截断问题。

有没有办法让网格在缩小以适应时考虑分页控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T20:36:54.040

我不清楚您的应用程序是如何渲染网格的。也就是说，如果您可以检测到何时只显示一列，则可以添加代码以确保网格（以及该单列）至少具有某个最小宽度。然后，您只需要使最小值足够宽，以使寻呼机控件不会被截断。

这有帮助吗？

# android - Android AudioRecord 到 FFMPEG 编码原生 AAC

> ID：10041913
> 
> 赞同：3
> 
> 时间：2012-04-06T09:56:56.023
> 
> 标签：android, ffmpeg

我在 android 中进行视频聊天，我想将 ffmpeg 移植到流 rtsp 或 rtmp 但现在我首先尝试使用 RTSP。不知何故，现在的问题是 av_write_frame 或 av_interleaved_write_frame 无法工作或只是崩溃。也许... AudioRecord 样本格式不等于 FFMPEG 设置帧接收不等于

所以代码... AudioRecorder [http://pastebin.com/iWtB3Jhy](http://pastebin.com/iWtB3Jhy) 包 com.curtis.broadcaster.Publisher;

```
import android.app.Activity;
import android.graphics.Bitmap;
import android.media.AudioFormat;
import android.media.AudioRecord;
import android.media.AudioRecord.OnRecordPositionUpdateListener;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.util.Log;

public class Publisher extends Activity {
    private int mAudioBufferSize;
    private int mAudioBufferSampleSize;
    private AudioRecord mAudioRecord;
    private boolean inRecordMode = false;
    private short[] audioBuffer;
    private String Tag = "Publisher/Publisher.java";

    public void onCreate(Bundle savedInstanceState) {
        Log.i(Tag, "|| onCreate()");
        super.onCreate(savedInstanceState);
        initAudioRecord();
        Log.i(Tag, "-- End onCreate()");
    }

    @Override
    public void onResume() {
        Log.i(Tag, "|| onResume()");
        super.onResume();
        inRecordMode = true;
        Thread t = new Thread(new Runnable() {

            public void run() {
                Log.i(Tag, "|| Run Threat t");
                getSamples();
                Log.i(Tag, "-- End Threat t");
            }
        });
        t.start();
        Log.i(Tag, "-- End onResume()");
    }

    protected void onPause() {
        Log.i(Tag, "|| Run onPause()");
        inRecordMode = false;
        super.onPause();
        Log.i(Tag, "-- End onPause()");
    }

    @Override
    protected void onDestroy() {
        Log.i(Tag, "|| Run onDestroy()");
        if (mAudioRecord != null) {
            mAudioRecord.release();
            Log.i(Tag + " onDestroy", "mAudioRecord.release()");
        }
        jniStopAll();
        super.onDestroy();
        android.os.Process.killProcess(android.os.Process.myPid());
        Log.i(Tag, "-- End onDestroy()");
    }

    public OnRecordPositionUpdateListener mListener = new OnRecordPositionUpdateListener() {

        public void onPeriodicNotification(AudioRecord recorder) {
            Log.i(Tag + " mListener(onPeriodicNotification)", "time is "
                    + System.currentTimeMillis());
            jniSetAudioSample(audioBuffer);
        //  audioBuffer = new short[mAudioBufferSampleSize];
        }

        public void onMarkerReached(AudioRecord recorder) {
            Log.i(Tag + " mListener(onMarkerReached)",
                    "time is " + System.currentTimeMillis());
            inRecordMode = false;
            recorder.stop();
            Log.i(Tag, "recorder.stop()");
        }
    };

    private void initAudioRecord() {
        try {
            jniCheck();
            int sampleRate = 44100;
            int channelConfig = AudioFormat.CHANNEL_IN_MONO;
            int audioFormat = AudioFormat.ENCODING_PCM_16BIT;
            mAudioBufferSize = 2 * AudioRecord.getMinBufferSize(sampleRate,
                    channelConfig, audioFormat);
            mAudioBufferSampleSize = mAudioBufferSize / 2;
            Log.i(Tag, "Buffer Size " + mAudioBufferSize);
            Log.i(Tag, "new AudioRecord begin");

            mAudioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC,
                    sampleRate, channelConfig, audioFormat, mAudioBufferSize);
            Log.i(Tag, "new AudioRecord end");

            jniInitFFMpeg();
        } catch (IllegalArgumentException e) {
            Log.i(Tag, "initAudioRecord go Errors");
            e.printStackTrace();
        }

        // mAudioRecord.setNotificationMarkerPosition(10000);
        mAudioRecord.setPositionNotificationPeriod(1024);
        mAudioRecord.setRecordPositionUpdateListener(mListener);

        int audioRecordState = mAudioRecord.getState();
        if (audioRecordState != AudioRecord.STATE_INITIALIZED) {
            finish();
        }

    }

    private void getSamples() {
        Log.i(Tag, "|| getSamples()");
        if (mAudioRecord == null)
            return;

        audioBuffer = new short[mAudioBufferSampleSize];
        mAudioRecord.startRecording();
        int audioRecordingState = mAudioRecord.getRecordingState();
        if (audioRecordingState != AudioRecord.RECORDSTATE_RECORDING) {
            finish();
        }
        while (inRecordMode) {
            int samplesRead = mAudioRecord.read(audioBuffer, 0,
                    mAudioBufferSampleSize);
            Log.i(Tag, "getSamples >>SamplesRead : " + samplesRead);
        }
        mAudioRecord.stop();
        Log.i(Tag, "mAudioRecord.stop()");
    }

    private native void jniCheck();

    private native void jniInitFFMpeg();

    private native void jniSetAudioSample(short[] audioBuffer);

    private native void jniStopAll();

    static {
        System.loadLibrary("ffmpeg");
        System.loadLibrary("testerv4");

    }

} 
```

FFMPEG JNI [http://pastebin.com/hgPva35b](http://pastebin.com/hgPva35b)

```
#include <jni.h>
#include <android/log.h>
#include <android/bitmap.h>

#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <math.h>
#include <sys/time.h>
#include "libavformat/rtsp.h"

#include <libavutil/mathematics.h>
#include <libavformat/avformat.h>
#include <libavcodec/avcodec.h>
#include <libswscale/swscale.h>

#undef exit
/* Log System */
#define  LOG_TAG    "FFMPEGSample - v4a"
#define DEBUG_TAG   "FFMPEG-AUDIO PART"
#define  LOGI(...)  __android_log_print(ANDROID_LOG_INFO,LOG_TAG,__VA_ARGS__)
#define  LOGE(...)  __android_log_print(ANDROID_LOG_ERROR,LOG_TAG,__VA_ARGS__)

/* 5 seconds stream duration */
#define STREAM_DURATION   5.0
#define STREAM_FRAME_RATE 25 /* 25 images/s */
#define STREAM_NB_FRAMES  ((int)(STREAM_DURATION * STREAM_FRAME_RATE))
#define STREAM_PIX_FMT      PIX_FMT_YUV420P /* default pix_fmt */
#define VIDEO_CODEC_ID      CODEC_ID_FLV1
#define AUDIO_CODEC_ID      CODEC_ID_AAC

static int sws_flags = SWS_BICUBIC;
int mode = 1; //1 = only audio, 2 = only video, 3 = both video and audio

AVFormatContext *avForCtx;
//AVFormatContext *oc;
AVStream *audio_st, *video_st;
double audio_pts, video_pts;
int frameCount, audioFrameCount, start;
char *url;

/*Audio Declare*/
float t, tincr, tincr2;
int16_t *samples;
uint8_t *audio_outbuf;
int audio_outbuf_size;
int audio_input_frame_size;

AVFormatContext *createAVFormatContext();
AVStream *add_audio_stream(AVFormatContext *oc, enum CodecID codec_id);
void open_video(AVFormatContext *oc, AVStream *st);
void open_audio(AVFormatContext *oc, AVStream *st);
AVStream *add_video_stream(AVFormatContext *oc, enum CodecID codec_id);
void write_audio_frame(AVFormatContext *oc, AVStream *st);
void write_video_frame(AVFormatContext *oc, AVStream *st);
void init();
void setAudioSample(unsigned char *inSample[]);
void stopAll();

/*/////////////////////////////////JNI Bridge////////////////////////////////////// */
void Java_com_curtis_broadcaster_Publisher_Publisher_jniCheck(JNIEnv* env,
        jobject this) {
    LOGI("-@ JNI work fine @-");
}
void Java_com_curtis_broadcaster_Publisher_Publisher_jniInitFFMpeg(JNIEnv* env,
        jobject this) {
    LOGI("-@ Init Encorder @-");

    /* initialize libavcodec, and register all codecs and formats */
    avcodec_init();
    avcodec_register_all();
    av_register_all();
    avformat_network_init(); //ERROR

    /* allocate the output media context */
    avForCtx = createAVFormatContext();
    frameCount = 1;
    audioFrameCount = 1;
    start = 0;

    /* add the audio and video streams using the default format codecs
     and initialize the codecs */
    video_st = NULL;
    audio_st = NULL;
    if (mode == 1 || mode == 3) {
        audio_st = add_audio_stream(avForCtx, AUDIO_CODEC_ID);
        LOGI("(Init Encorder) - addAudioStream");
    }
    if (mode == 2 || mode == 3) {
        video_st = add_video_stream(avForCtx, VIDEO_CODEC_ID);
        LOGI("(Init Encorder) - addVideoStream");

    }

    //  av_dump_format(avForCtx, 0, "rtsp://192.168.1.104/live/live", 1);
    LOGI("(Init Encorder) - Waiting to call open_*");

    if (audio_st) {
        open_audio(avForCtx, audio_st);
        LOGI("(Init Encorder) - open_audio");
    }

    if (video_st) {
        open_video(avForCtx, video_st);
        LOGI("(Init Encorder) - open_video");
    }

    av_write_header(avForCtx);
    LOGI("-@ Finish Init Encorder @-");

}

void Java_com_curtis_broadcaster_Publisher_Publisher_jniSetAudioSample(
        JNIEnv* env, jobject this, unsigned char *inSample[]) {
    if (audio_st) {
        LOGI("-@ Start setAudioSample @-");
        samples = (int16_t *) inSample;

        write_audio_frame(avForCtx, audio_st);
        LOGI("-@ Finish setAudioSample @-");
    }
}

void Java_com_curtis_broadcaster_Publisher_Publisher_jniStopAll(JNIEnv* env,
        jobject this) {
    LOGI("-@ Stopping All @-");
    //close_audio(avForCtx, audio_st);
    //close_video(avForCtx, video_st);
    LOGI("-@ Stopped All @-");
}
/*/////////////////////////////END JNI Bridge////////////////////////////////////// */

/* New Added Coding */
AVFormatContext *createAVFormatContext() {
    LOGI("-@OPEN - createAVFormatContext@-");

    AVFormatContext *ctx = avformat_alloc_context();
    //  ctx->oformat = av_guess_format("flv", "rtmp://192.168.1.104/live/live",
    //      NULL);
    //  ctx->oformat = av_guess_format("flv", NULL, NULL);

    //if (!av_guess_format("flv", NULL, NULL)) {

    //LOGI("-flv Can not Guess Format-");
    //}

    ctx->oformat = av_guess_format("rtsp", NULL, NULL);

    if (!av_guess_format("rtsp", NULL, NULL)) {

        LOGI("-flv Can not Guess Format-");
    }

    /*
     LOGI("%d",avformat_alloc_output_context2(&ctx, ctx->oformat, "flv",
     "rtmp://192.168.1.104/live/live"));
     if (!ctx) {
     LOGI("-@avformat_alloc_output_context2 fail@-");
     }*/
    //   LOGI("flv %d",avformat_alloc_output_context2(&ctx, ctx->oformat, "flv",
    //   "rtmp://192.168.1.104/live/live"));
    //   LOGI("rtmp %d",avformat_alloc_output_context2(&ctx, ctx->oformat, "rtmp",
    //   "rtmp://192.168.1.104/live/live"));
    //   LOGI("mpeg4 %d",avformat_alloc_output_context2(&ctx, ctx->oformat, "mpeg4",
    //   "rtmp://192.168.1.104/live/live"));
    //   LOGI("NULL %d",avformat_alloc_output_context2(&ctx, ctx->oformat, NULL,
    //   "rtmp://192.168.1.104/live/live"));
    avformat_alloc_output_context2(&ctx, ctx->oformat, "sdp",
            "rtsp://192.168.1.104:1935/live/live");

    if (!ctx) {
        LOGI("-@avformat_alloc_output_context2 fail@-");
    }

    LOGI("-@CLOSE - createAVFormatContext@-");

    return ctx;
}

/**************************************************************/
/* audio output */

/*
 * add an audio output stream
 */
AVStream *add_audio_stream(AVFormatContext *oc, enum CodecID codec_id) {
    LOGI("-@OPEN - add_audio_stream@-");

    AVCodecContext *c;
    AVStream *st = avformat_new_stream(oc, avcodec_find_encoder(codec_id));

    if (!st) {
        LOGI("-@add_audio_stream - Could not alloc stream@-");
        exit(1);
    }
    st->id = 1;

    c = st->codec;
    c->codec_id = AUDIO_CODEC_ID;
    c->codec_type = AVMEDIA_TYPE_AUDIO;

    /* put sample parameters */
    c->sample_fmt = AV_SAMPLE_FMT_FLT;
    //c->sample_fmt = AV_SAMPLE_FMT_S16;
    c->bit_rate = 100000;
    c->sample_rate = 44100;
    c->channels = 1;

    // some formats want stream headers to be separate
    if (oc->oformat->flags & AVFMT_GLOBALHEADER)
        c->flags |= CODEC_FLAG_GLOBAL_HEADER;
    LOGI("-@Close - add_audio_stream@-");

    return st;
}

void open_audio(AVFormatContext *oc, AVStream *st) {
    LOGI("@- open_audio -@");

    AVCodecContext *c;
    AVCodec *codec;

    c = st->codec;
    c->strict_std_compliance = -2;
    /* find the audio encoder */
    codec = avcodec_find_encoder(c->codec_id);
    if (!codec) {
        LOGI("@- open_audio E:codec not found-@");
        exit(1);
    }

    /* open it */
    if (avcodec_open(c, codec) < 0) {
        LOGI("%d",avcodec_open(c, codec));
        LOGI("@- open_audio E:could not open codec-@");
        exit(1);
    }

    /* init signal generator */
    t = 0;
    tincr = 2 * M_PI * 110.0 / c->sample_rate;
    /* increment frequency by 110 Hz per second */
    tincr2 = 2 * M_PI * 110.0 / c->sample_rate / c->sample_rate;

    audio_outbuf_size = 10000;
    audio_outbuf = av_malloc(audio_outbuf_size);

    /* ugly hack for PCM codecs (will be removed ASAP with new PCM
     support to compute the input frame size in samples */
    if (c->frame_size <= 1) {
        audio_input_frame_size = audio_outbuf_size / c->channels;
        switch (st->codec->codec_id) {
        case CODEC_ID_PCM_S16LE:
        case CODEC_ID_PCM_S16BE:
        case CODEC_ID_PCM_U16LE:
        case CODEC_ID_PCM_U16BE:
            audio_input_frame_size >>= 1;
            break;
        default:
            break;
        }
    } else {
        audio_input_frame_size = c->frame_size;
    }
    LOGI("audio_input_frame_size : %d",audio_input_frame_size);
    samples = av_malloc(audio_input_frame_size * 2 * c->channels);
    LOGI("@- Close open_audio -@");

}

/* prepare a 16 bit dummy audio frame of 'frame_size' samples and
 'nb_channels' channels */
void get_audio_frame(int16_t *samples, int frame_size, int nb_channels) {
    LOGI("@- get_audio_frame -@");

    int j, i, v;
    int16_t *q;

    q = samples;
    for (j = 0; j < frame_size; j++) {
        v = (int) (sin(t) * 10000);
        for (i = 0; i < nb_channels; i++)
            *q++ = v;
        t += tincr;
        tincr += tincr2;
        LOGI("@- audio_frame Looping -@");
    }
    LOGI("@- CLOSE get_audio_frame -@");

}

void write_audio_frame(AVFormatContext *oc, AVStream *st) {
    LOGI("@- write_audio_frame -@");

    AVCodecContext *c;
    AVPacket pkt;
    av_init_packet(&pkt);

    c = st->codec;

    //get_audio_frame(samples, audio_input_frame_size, c->channels);
    LOGI("@- write_audio_frame : got frame from get_audio_frame -@");

    pkt.size
            = avcodec_encode_audio(c, audio_outbuf, audio_outbuf_size, samples);
    LOGI("%d",pkt.size);

    if (c->coded_frame && c->coded_frame->pts != AV_NOPTS_VALUE)
        pkt.pts
                = av_rescale_q(c->coded_frame->pts, c->time_base, st->time_base);
    LOGI("%d",pkt.pts);

    pkt.flags |= AV_PKT_FLAG_KEY;
    pkt.stream_index = st->index;
    pkt.data = audio_outbuf;
    LOGI("Finish PKT");

    /* write the compressed frame in the media file */
    //  if (av_interleaved_write_frame(oc, &pkt) != 0) {
    //  LOGI("@- write_audio_frame E:Error while writing audio frame -@");
    //  exit(1);
    //  }

    if (av_interleaved_write_frame(oc, &pkt) != 0) {
        LOGI("Error while writing audio frame %d\n", audioFrameCount);
    } else {
        LOGI("Writing Audio Frame %d", audioFrameCount);
    }

    LOGI("@- CLOSE write_audio_frame -@");
    audioFrameCount++;
    av_free_packet(&pkt);
}

void close_audio(AVFormatContext *oc, AVStream *st) {
    avcodec_close(st->codec);

    av_free(samples);
    av_free(audio_outbuf);
}

/**************************************************************/
/* video output */

AVFrame *picture, *tmp_picture;
uint8_t *video_outbuf;
int frame_count, video_outbuf_size;

/* add a video output stream */
AVStream *add_video_stream(AVFormatContext *oc, enum CodecID codec_id) {
    AVCodecContext *c;
    AVStream *st;
    AVCodec *codec;

    st = avformat_new_stream(oc, NULL);
    if (!st) {
        fprintf(stderr, "Could not alloc stream\n");
        exit(1);
    }

    c = st->codec;

    /* find the video encoder */
    codec = avcodec_find_encoder(codec_id);
    if (!codec) {
        fprintf(stderr, "codec not found\n");
        exit(1);
    }
    avcodec_get_context_defaults3(c, codec);

    c->codec_id = codec_id;

    /* put sample parameters */
    c->bit_rate = 400000;
    /* resolution must be a multiple of two */
    c->width = 352;
    c->height = 288;
    /* time base: this is the fundamental unit of time (in seconds) in terms
     of which frame timestamps are represented. for fixed-fps content,
     timebase should be 1/framerate and timestamp increments should be
     identically 1\. */
    c->time_base.den = STREAM_FRAME_RATE;
    c->time_base.num = 1;
    c->gop_size = 12; /* emit one intra frame every twelve frames at most */
    c->pix_fmt = STREAM_PIX_FMT;
    if (c->codec_id == CODEC_ID_MPEG2VIDEO) {
        /* just for testing, we also add B frames */
        c->max_b_frames = 2;
    }
    if (c->codec_id == CODEC_ID_MPEG1VIDEO) {
        /* Needed to avoid using macroblocks in which some coeffs overflow.
         This does not happen with normal video, it just happens here as
         the motion of the chroma plane does not match the luma plane. */
        c->mb_decision = 2;
    }
    // some formats want stream headers to be separate
    if (oc->oformat->flags & AVFMT_GLOBALHEADER)
        c->flags |= CODEC_FLAG_GLOBAL_HEADER;

    return st;
}

AVFrame *alloc_picture(enum PixelFormat pix_fmt, int width, int height) {
    AVFrame * picture;
    uint8_t *picture_buf;
    int size;

    picture = avcodec_alloc_frame();
    if (!picture)
        return NULL;
    size = avpicture_get_size(pix_fmt, width, height);
    picture_buf = av_malloc(size);
    if (!picture_buf) {
        av_free(picture);
        return NULL;
    }
    avpicture_fill((AVPicture *) picture, picture_buf, pix_fmt, width, height);
    return picture;
}

void open_video(AVFormatContext *oc, AVStream *st) {
    AVCodec *codec;
    AVCodecContext *c;

    c = st->codec;

    /* find the video encoder */
    codec = avcodec_find_encoder(c->codec_id);
    if (!codec) {
        fprintf(stderr, "codec not found\n");
        exit(1);
    }

    /* open the codec */
    if (avcodec_open(c, codec) < 0) {
        fprintf(stderr, "could not open codec\n");
        exit(1);
    }

    video_outbuf = NULL;
    if (!(oc->oformat->flags & AVFMT_RAWPICTURE)) {
        /* allocate output buffer */
        /* XXX: API change will be done */
        /* buffers passed into lav* can be allocated any way you prefer,
         as long as they're aligned enough for the architecture, and
         they're freed appropriately (such as using av_free for buffers
         allocated with av_malloc) */
        video_outbuf_size = 200000;
        video_outbuf = av_malloc(video_outbuf_size);
    }

    /* allocate the encoded raw picture */
    picture = alloc_picture(c->pix_fmt, c->width, c->height);
    if (!picture) {
        fprintf(stderr, "Could not allocate picture\n");
        exit(1);
    }

    /* if the output format is not YUV420P, then a temporary YUV420P
     picture is needed too. It is then converted to the required
     output format */
    tmp_picture = NULL;
    if (c->pix_fmt != PIX_FMT_YUV420P) {
        tmp_picture = alloc_picture(PIX_FMT_YUV420P, c->width, c->height);
        if (!tmp_picture) {
            fprintf(stderr, "Could not allocate temporary picture\n");
            exit(1);
        }
    }
}

/* prepare a dummy image */
void fill_yuv_image(AVFrame *pict, int frame_index, int width, int height) {
    int x, y, i;

    i = frame_index;

    /* Y */
    for (y = 0; y < height; y++) {
        for (x = 0; x < width; x++) {
            pict->data[0][y * pict->linesize[0] + x] = x + y + i * 3;
        }
    }

    /* Cb and Cr */
    for (y = 0; y < height / 2; y++) {
        for (x = 0; x < width / 2; x++) {
            pict->data[1][y * pict->linesize[1] + x] = 128 + y + i * 2;
            pict->data[2][y * pict->linesize[2] + x] = 64 + x + i * 5;
        }
    }
}

void write_video_frame(AVFormatContext *oc, AVStream *st) {
    int out_size, ret;
    AVCodecContext *c;
    struct SwsContext *img_convert_ctx;

    c = st->codec;

    if (frame_count >= STREAM_NB_FRAMES) {
        /* no more frame to compress. The codec has a latency of a few
         frames if using B frames, so we get the last frames by
         passing the same picture again */
    } else {
        if (c->pix_fmt != PIX_FMT_YUV420P) {
            /* as we only generate a YUV420P picture, we must convert it
             to the codec pixel format if needed */
            if (img_convert_ctx == NULL) {
                img_convert_ctx = sws_getContext(c->width, c->height,
                        PIX_FMT_YUV420P, c->width, c->height, c->pix_fmt,
                        sws_flags, NULL, NULL, NULL);
                if (img_convert_ctx == NULL) {
                    fprintf(stderr,
                            "Cannot initialize the conversion context\n");
                    exit(1);
                }
            }
            fill_yuv_image(tmp_picture, frame_count, c->width, c->height);
            sws_scale(img_convert_ctx, tmp_picture->data,
                    tmp_picture->linesize, 0, c->height, picture->data,
                    picture->linesize);
        } else {
            fill_yuv_image(picture, frame_count, c->width, c->height);
        }
    }

    if (oc->oformat->flags & AVFMT_RAWPICTURE) {
        /* raw video case. The API will change slightly in the near
         future for that. */
        AVPacket pkt;
        av_init_packet(&pkt);

        pkt.flags |= AV_PKT_FLAG_KEY;
        pkt.stream_index = st->index;
        pkt.data = (uint8_t *) picture;
        pkt.size = sizeof(AVPicture);

        ret = av_interleaved_write_frame(oc, &pkt);
    } else {
        /* encode the image */
        out_size = avcodec_encode_video(c, video_outbuf, video_outbuf_size,
                picture);
        /* if zero size, it means the image was buffered */
        if (out_size > 0) {
            AVPacket pkt;
            av_init_packet(&pkt);

            if (c->coded_frame->pts != AV_NOPTS_VALUE)
                pkt.pts = av_rescale_q(c->coded_frame->pts, c->time_base,
                        st->time_base);
            if (c->coded_frame->key_frame)
                pkt.flags |= AV_PKT_FLAG_KEY;
            pkt.stream_index = st->index;
            pkt.data = video_outbuf;
            pkt.size = out_size;

            /* write the compressed frame in the media file */
            ret = av_interleaved_write_frame(oc, &pkt);
        } else {
            ret = 0;
        }
    }
    if (ret != 0) {
        fprintf(stderr, "Error while writing video frame\n");
        exit(1);
    }
    frame_count++;
}

void close_video(AVFormatContext *oc, AVStream *st) {
    avcodec_close(st->codec);
    av_free(picture->data[0]);
    av_free(picture);
    if (tmp_picture) {
        av_free(tmp_picture->data[0]);
        av_free(tmp_picture);
    }
    av_free(video_outbuf);
} 
```

Android Manifest 已设置并初始化所有内容。请给我一些想法..一些日志消息给你[http://pastebin.com/uPD5LyH2](http://pastebin.com/uPD5LyH2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:36:00.303

我知道回答这个问题可能为时已晚，但以防万一它对您或将来偶然发现相同问题的其他人有所帮助，这里有一个解决方法。

我一直在从事类似的项目，但不同之处在于，我没有使用 JNI 和编译的本机 FFmpeg 共享库，而是选择了编译的本机二进制文件并使用 Java Process API 与二进制文件进行通信。

FFmpeg 需要提示传入数据的性质。创建的音频帧`AudioRecord`是 PCM - 16 位编码的，您似乎没有指定传入音频流 FFmpeg 的格式。

发给 ffmpeg 的命令可能如下：

```
ffmpeg -f u16le -acodec pcm_s16le -i - -acodec <output-file-codec> <rtsp-stream-address> 
```

从音频源接收到的音频数据被写入 FFmpeg 进程的输入流。

音频数据也可以通过管道流式传输到 ffmpeg。 `ParcelFileDescriptor.createPipe()`可用于在 Android 平台上创建管道，命令行替换`-i -`将是创建管道的读取端的文件描述符在`-i pipe:<fd>`哪里。`fd`

我宁愿建议通过命令行界面而不是使用 JNI 访问 ffmpeg，因为它有据可查，并且还有助于使用调试日志级别检测问题。

# python - Python 和环境

> ID：10041914
> 
> 赞同：0
> 
> 时间：2012-04-06T09:56:56.240
> 
> 标签：python, environment-variables

我有一个包含`myenv.sh`以下内容的文件 ( )

```
export MYVAR="HELLO" 
```

然后我有我的程序（`myhugeprogram.py`）：

```
#!/usr/bin/env python
import os
print os.environ['MYVAR'] 
```

哪个是可执行的：`chmod 755 myhugeprogram.py`

现在我获取我的环境：`source myenv.sh`

并运行我的程序：

```
./myhugeprogram.py
HELLO 
```

正如预期的那样。现在我通过 SSH 以非交互方式运行它：

```
user1@host1:~$ ssh user2@host2 ./myhugeprogram.py
Traceback (most recent call last):
  File "./myhugeprogram.py", line 3, in <module>
    print os.environ['MYVAR']
  File "/usr/lib/python2.5/UserDict.py", line 22, in __getitem__
    raise KeyError(key)
KeyError: 'MYVAR' 
```

这很正常，因为我没有采购`myenv.sh`. 现在的问题：

在通过 SSH 以非交互方式运行时，如何在执行我的 Python 脚本之前获取一个设置一些环境变量的 Bash 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T10:02:35.083

我能想到的两种方法：

*   在您运行的 ssh 命令中包含源命令，例如

    ```
    ssh user2@host2 "source myenv.sh; ./myhugeprogram.py" 
    ```

*   [`.bashrc`](http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29#Startup_scripts)在文件中设置环境变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:00:45.163

编写一个 shell 脚本包装器（在两个环境中都可见），它设置环境并调用程序以及所有参数。您可以使这个 shell 脚本变得智能，以便它只根据当前环境设置环境，因此无论您的上下文如何，您只需要调用该包装脚本，并且可以将其视为一个黑盒子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T10:01:11.653

您应该在脚本本身中导出/获取变量，

因为如果您打开一个 SSH 会话并触发源命令，然后使用另一个会话来执行脚本，

环境变量将不可用，因为将再次加载全新的环境。

您可以使用`os.environ["ASD"] = "asd"`语法为脚本设置环境变量。

# java - 在新线程中创建 Web 服务请求

> ID：10041916
> 
> 赞同：1
> 
> 时间：2012-04-06T09:57:03.373
> 
> 标签：java, android, ios5, android-ksoap2

我正在使用 ksoap2-Android 来制作和解析我的请求。如果我想使用它，我必须异步进行。所以我选择为此创建一个新线程。

它看起来像那样，我没有发布我所有的逻辑请求和解析，因为在这种情况下它并不重要。

```
 new Thread(new Runnable() {
            public void run() {

                String answer = WebServiceRequests.About();

                     try{

                     }catch (Exception e) {
                        // TODO: handle exception
                         e.printStackTrace();
                    }
            }
          }).start(); 
```

**所以我在回答**字符串中收到请求，但现在如何更新我的 GUI？当我尝试时，我得到了我无法在该线程中更新的异常。

请发布您对此的解决方案。如果您使用 Handler 或 AsyncTask 甚至 make 来使用我的示例。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:19:42.447

对于异步任务，Android 提供了一个 AsyncTask 类。

在此类中，您可以覆盖两个方法。第一种方法适用于应该在后台（不同线程）的代码。在第一个方法完成后，在 UI 线程上调用第二个方法。

详情参考android.os.AsyncTask

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:21:14.677

AsnycTask 始终是第一个建议，如果您以前没有这样做过，请阅读此[官方开发指南](http://developer.android.com/reference/android/os/AsyncTask.html)，示例代码：

```
private class MyAsyncTask extends AsyncTask<Void, Void, String> {
 protected String doInBackground(Void... params) {
   String answer = WebServiceRequests.About();
   return answer;
 }

 protected void onPostExecute(String answer) {
   // Update UI.
   showDialog("Answer " + answer);
 } 
```

}

要启动您的 AsyncTask：

```
new MyAsyncTask().execute(); 
```

onPostExecute 方法保证在将来某个时间点在 UI 线程上被调用，只要后台线程（AKA.doInBackground）完成。底层框架为我们处理所有脏活。

希望这可以帮助。

# c# - XML 反序列化和赋值问题

> ID：10041917
> 
> 赞同：0
> 
> 时间：2012-04-06T09:57:04.823
> 
> 标签：c#, xml-serialization

我似乎无法弄清楚以下内容，并且我尝试尽可能多地利用此处的可用主题。

我有以下文件。

```
<?xml version="1.0"?>
<Root>
  <Data>
    <Package>
      <GWT_></GWT_>
      <ALT_></ALT_>
      <SAT__></SAT__>
    </Package>
    <Package>
      <GWT_></GWT_>    
      <ALT_></ALT_>
      <SAT__></SAT__>
    </Package>
  </Data>
</Root> 
```

我编写了类和一个函数来反序列化它。

课程：

```
[Serializable()]
public class Package
{
    [System.Xml.Serialization.XmlElement("GWT_")]
    public string GWT_ { get; set; }

    [System.Xml.Serialization.XmlElement("ALT_")]
    public string ALT_ { get; set; }

    [System.Xml.Serialization.XmlElement("SAT__")]
    public string SAT__ { get; set; }
}

[Serializable()]
[System.Xml.Serialization.XmlRoot("Root")]
public class Root
{
    [System.Xml.Serialization.XmlArray("Data")]
    [System.Xml.Serialization.XmlArrayItem("Package", typeof(Package))]
    public Package[] Package { get; set; }
} 
```

和功能：

```
 private void dataReportToolStripMenuItem_Click(object sender, EventArgs e)
    {
        OpenFileDialog openData = new OpenFileDialog();
        openData.Filter = "Eta file|Data_*.dat
        if (DialogResult.OK == openData.ShowDialog())
        {
            Package package = null;
            string path = openData.FileName;

            XmlSeriallizerSerializer(typeof(Root));

            StreamReader reader = new StreamReader(path);
            package = (Root)serializer.Deserialize(reader);
            reader.Close();          

        }
    } 
```

首先，我得到一个错误，它不能将“Root”隐式转换为“Package”。

而且我需要一种方法来分配读取的值（例如GWT_“值”），让我们说一个标签。如您所见，有多个“包”值，所以我需要一个函数来在这些包之间来回切换。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:17:41.920

这适用于我使用 LinqPAD

```
void Main()
{
    using(var stream = File.Open(@"test.xml", FileMode.Open))
    {
        var serializer = new XmlSerializer(typeof(Root));

        var root = (Root)serializer.Deserialize(stream);

        root.Dump();
    }
}

public class Package
{
    public string GWT_ { get; set; }
    public string ALT_ { get; set; }
    public string SAT__ { get; set; }
}

public class Data
{
    [XmlElement("Package")]
    public Package[] Package { get; set; }
}

public class Root
{
    public Data Data{get;set;}
} 
```

# sql - 在 VB 代码和 oracle 中结合转义特殊字符

> ID：10041919
> 
> 赞同：0
> 
> 时间：2012-04-06T09:57:10.077
> 
> 标签：sql, vb.net

在 SQL 中，我必须用一些包含特殊字符的文本来给列标题起别名，所以为了掩盖这些字符 {}，我必须将它们保留在双引号中。例如：

```
select column1 as "{Ctrix}" from table; 
```

当在 sql 中运行时，结果是

```
{Ctrix}
-------
1

2

3 
```

我遇到的问题是在我用 VB 编写的代码中传递相同的上述查询时。

```
strSQL="select column1 as "{Ctrix}" from table;" 
```

查询被截断并给出错误。请帮助我，如何在 sql/vb 中正确处理这个问题......这两者都满足。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:01:26.733

使用双引号两次：

```
strSQL="select column1 as ""{Ctrix}"" from table;" 
```

正如您在上面看到的，您可以通过将它们加倍来逃脱，而不仅仅是`"`使用`""`.

检查[MSDN 中的字符串数据类型（Visual Basic）](http://msdn.microsoft.com/en-us/library/thwcx436.aspx)：

> 您必须将字符串文字括在引号 (" ") 内。如果必须在字符串中包含引号作为字符之一，则使用两个连续的引号 ("")。

# c# - 将鼠标滚动事件从子 UserControl 转发到父

> ID：10041923
> 
> 赞同：1
> 
> 时间：2012-04-06T09:57:36.863
> 
> 标签：c#, winforms, .net-3.5, user-controls

我想将鼠标滚动事件从控件转发到其直接父级（`UserControl`在我的情况下也是如此）。

这怎么可能？

**编辑**控件被添加到可滚动的控件中。例如备忘录编辑。

当用户在 memo-control 中滚动时，memo-control 会滚动（！）但是当用户在自定义控件上滚动时，不会将事件转发到父控件并且 memo-control 不会滚动。

# linux - 在 debian 上链接 allegro 5

> ID：10041925
> 
> 赞同：0
> 
> 时间：2012-04-06T09:57:48.133
> 
> 标签：linux, linker, allegro

我遵循了这个指南：[http](http://wiki.allegro.cc/index.php?title=Debian_and_Allegro_5) : //wiki.allegro.cc/index.php?title=Debian_and_Allegro_5 一切都很顺利，我在 /usr/lib 中有 /usr/include/allegro5 和 allegro lirary 文件

当我编译简单的程序时，包含被正确解析，但我有链接问题。

pkg-config --libs allegro-5.0 返回“-lallegro”。

当我将 -lallegro（或`pkg-config --libs allegro-50`）放入 makefile 时，我收到消息“找不到 -lallegro”

生成文件：g++ -static -O2 $(INCLUDES) $(SRC) -otest -D USE_THREADS -lboost_thread -lpthread -L/usr/lib/`pkg-config --libs --cflags allegro-5.0`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:52:31.177

If `pkg-config --libs allegro-5.0` is returning the `-lallegro` and the library exists in `/usr/lib`, then you probably just need to run `sudo ldconfig`.

# javascript - 在javascript中自动调用函数的各种方法

> ID：10041926
> 
> 赞同：0
> 
> 时间：2012-04-06T09:57:49.737
> 
> 标签：javascript, html

我听说过一些在页面加载时在 javascript 中自动调用函数的方法。这个问题是要知道哪种方法最好。

**如果您的方法与其他所有方法不同，请在此处提及您的方法，无论它是好是坏。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T10:02:02.397

您的选择是：

1.  只需`script`在页面末尾放置一个标签并将您的函数调用放在那里。如果它正好在结束`</body>`标记之前（或之后），则它上面的所有 DOM 元素都在那里并准备好被操作（[参考](http://groups.google.com/group/closure-library-discuss/browse_thread/thread/1beecbb5d6afcb41)）。图像和其他资源可能已加载，也可能尚未加载。除非出于某些特定原因您需要做其他事情，否则这是您最好的选择，[经常推荐](http://developer.yahoo.com/performance/rules.html)。

2.  使用`window` `load`事件，您可以`addEventListener`在标准浏览器或`attachEvent`旧版本的 IE 上挂钩。在加载所有图像和其他资源之后，这种情况发生在周期**的后期。**（你也可以使用标签上的老式`onload`属性来挂钩它`body`，但我不推荐它。）

3.  在标准浏览器上，当[`DOMContentLoaded`DOM](https://developer.mozilla.org/en/DOM/DOM_event_reference/DOMContentLoaded)准备好但早于`window` `load`. 你通过`addEventListener`.

4.  大多数 JavaScript 库都提供了某种“当 DOM 准备就绪”事件，您可以挂钩。jQuery 使用`ready(yourFunction)`函数，Prototype 使用`document.observe("dom:loaded", yourFunction)`等等。

# .net - 错误 400（错误请求）：我的 WCF 服务未考虑 maxReceivedMessageSize

> ID：10041931
> 
> 赞同：2
> 
> 时间：2012-04-06T09:58:13.107
> 
> 标签：.net, wcf, soap, web-config, wcf-binding

> SO上有多个相关问题（几乎相同的标题），没有一个能帮助我解决我的问题。请不要在阅读之前关闭我的问题作为重复。谢谢。

我目前正在使用 WCF 来公开 Web 服务（SOAP、HTTP）。它现在部署在 IIS Express 中。我的问题是，我无法从客户那里使用我的服务。我的客户收到`HTTP Error 400 Bad request`异常。

然后我在服务器端激活了跟踪以查看实际发生的情况，这就是我得到的：

![在此处输入图像描述](../Images/c49792ecfdc4bd1fa7c2eba5a8c57b16.png)

我已将错误消息翻译成英文：`The maximum message size quota for incoming messages (65536) has been exceeded. To increase the quota, use the MaxReceivedMessageSize property on the appropriate binding element.`.

实际上，不言自明。由于我的 SOAP 消息很重，它可能超过了 64KB 的限制。

我决定在绑定配置中扩展这个限制。所以这是我的 web.config（服务器端）：

```
<services>
  <service name="MyServiceName">
    <endpoint binding="basicHttpBinding"
              bindingConfiguration="MyBindingConfiguration"
              bindingNamespace="http://my_namespace"
              contract="XXX.IMyContract" />
  </service>
</services>

<bindings>
  <basicHttpBinding>
    <binding name="MyBindingConfiguration"
             allowCookies="true"
             maxReceivedMessageSize="2147483647"
             maxBufferSize="2147483647"
             maxBufferPoolSize="2147483647">
      <readerQuotas maxDepth="32" maxArrayLength="2147483647" maxStringContentLength="2147483647" />
    </binding>
  </basicHttpBinding>
</bindings> 
```

如您所见，所有尺寸都设置为`int.MaxValue`.

我还修改了我的客户端 app.config，它是：

```
<bindings>
  <basicHttpBinding>
    <binding name="MyBindingName"
             allowCookies="false"
             bypassProxyOnLocal="false"
             hostNameComparisonMode="StrongWildcard"
             maxBufferSize="2147483647"
             maxBufferPoolSize="2147483647"
             maxReceivedMessageSize="2147483647"
             messageEncoding="Text"
             textEncoding="utf-8"
             transferMode="Buffered"
             useDefaultWebProxy="true">

      <readerQuotas maxDepth="32"
                    maxStringContentLength="2147483647"
                    maxArrayLength="16384"
                    maxBytesPerRead="4096"
                    maxNameTableCharCount="16384" />

      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>

    </binding>
  </basicHttpBinding>
</bindings>

<client>
  <endpoint address="http://localhost:8083/myAddress.svc"
            binding="basicHttpBinding"
            bindingConfiguration="MyBindingName"
            contract="IMyContract"
            name="MyBindingName" />
</client> 
```

然后我重新部署了我的服务，问题仍然存在（`HTTP 400, Bad request`在客户端+`MaxReceivedMessageSize limited to 65536`在服务器端）。

然后我用一个非常小的 SOAP 消息测试了我的服务：**一切都很好**。所以问题实际上是我的消息大于 64KB。

我昨天花了 2 个小时试图找出我的配置有什么问题......可能很明显，但我找不到......

我已经用谷歌搜索了很多关于这个问题的信息，95% 的问题是开发人员忘记`bindingConfiguration`在服务端点中指定属性。正如您在上面的 web.config 中看到的那样，这对我来说没问题。

然后我[在stackoverflow上发现了另一个关于（几乎）相同问题的问题](https://stackoverflow.com/questions/9910566/wcf-binding-configuration-apply-only-as-default-but-as-named-it-fails#comment12845134_9910566)。

正如作者在他的问题中所说，将绑定配置的名称设置为`string.Empty`“修复”问题：

```
<services>
  <service name="MyServiceName">
    <endpoint binding="basicHttpBinding"
              bindingConfiguration=""
...

<bindings>
  <basicHttpBinding>
    <binding name=""
... 
```

使用默认绑定时，一切正常。我不能只使用此解决方法来解决我的问题，因为我需要在同一个 web.config 中指定多个不同的绑定配置。

我在这里重新创建一个问题，因为它实际上不是相同的条件：我的服务不是自托管的，而是托管在 IIS Express（或 IIS 7.5，经过测试，同样的问题）中。

我在[这里发现了一个与自托管服务类似的问题](http://www.codeproject.com/Questions/356197/MaxReceivedMessageSize-does-not-work)，这个问题与这个特殊性有关。所以我认为这两个 SO 问题之间有些不同。

我想我的配置中有一些明显错误，但我找不到什么。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T13:26:02.827

乍一看，一切似乎都很好——唯一的一点是：`<service name=".....">`属性必须与您的**完全**合格的服务实现类（包括所有命名空间等）完全匹配——是这样吗？

我问是因为您已`contract="XXX.IMyContract"`指示名称空间，但您的`<service name="....">`属性没有暗示任何名称空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T07:22:06.510

通过 service 中的以下 web-config 设置尝试：

```
 <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
      multipleSiteBindingsEnabled="true" />
    <standardEndpoints>

            <webHttpEndpoint>
                <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"                                        
                                  crossDomainScriptAccessEnabled="true" 
                                  maxReceivedMessageSize="2147483647" 
                                  maxBufferSize="2147483647" 
                                  maxBufferPoolSize="4194304" />
            </webHttpEndpoint>

    </standardEndpoints>

    <bindings>
        <webHttpBinding>
            <binding>
                <readerQuotas maxStringContentLength="2147483647"/>
            </binding>
        </webHttpBinding>
    </bindings>

</system.serviceModel>

<system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
</system.webServer> 
```

# java - 使用 JPA 和 Hibernate 时如何选择 id 生成策略

> ID：10041938
> 
> 赞同：107
> 
> 时间：2012-04-06T09:58:52.030
> 
> 标签：java, hibernate, jpa, uniqueidentifier, id-generation

我正在阅读 Hibernate 参考指南的 Id generation 部分和“java persistence with Hibernate”

结合 Hibernate 和 JPA 有很多可用的选项。

我正在寻找有关如何选择特定 id 生成策略的进一步文档。

我也在寻找引爆点。

例如，hilo 策略有望减少争用。我假设必须有与此选择相关的权衡。

我想接受有关权衡的教育。

有没有可用的文献？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-04-06T12:59:18.600

[API Doc](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-id)对此非常清楚。

> 所有生成器都实现接口 org.hibernate.id.IdentifierGenerator。这是一个非常简单的界面。一些应用程序可以选择提供自己的专用实现，然而，Hibernate 提供了一系列内置的实现。内置生成器的快捷方式名称如下：
> 
> **增量**
> 
> 生成 long、short 或 int 类型的标识符，这些标识符仅在没有其他进程将数据插入同一个表时才是唯一的。不要在集群中使用。
> 
> **身份**
> 
> 支持 DB2、MySQL、MS SQL Server、Sybase 和 HypersonicSQL 中的标识列。返回的标识符是 long、short 或 int 类型。
> 
> **序列**
> 
> 使用 DB2、PostgreSQL、Oracle、SAP DB、McKoi 中的序列或 Interbase 中的生成器。返回的标识符是 long、short 或 int 类型
> 
> **希洛**
> 
> 使用 hi/lo 算法有效地生成 long、short 或 int 类型的标识符，给定表和列（默认情况下分别为 hibernate_unique_key 和 next_hi）作为 hi 值的来源。hi/lo 算法生成仅对特定数据库唯一的标识符。
> 
> **seqhilo**
> 
> 给定一个命名的数据库序列，使用 hi/lo 算法有效地生成 long、short 或 int 类型的标识符。
> 
> **uuid**
> 
> 使用 128 位 UUID 算法生成在网络中唯一的字符串类型标识符（使用 IP 地址）。UUID 被编码为长度为 32 位十六进制数字的字符串。
> 
> **向导**
> 
> 在 MS SQL Server 和 MySQL 上使用数据库生成的 GUID 字符串。
> 
> **本国的**
> 
> 根据底层数据库的功能选择身份、序列或 hilo。
> 
> **分配**
> 
> 让应用程序在调用 save() 之前为对象分配一个标识符。如果未指定任何元素，这是默认策略。
> 
> **选择**
> 
> 通过按某个唯一键选择行并检索主键值来检索由数据库触发器分配的主键。
> 
> **外国的**
> 
> 使用另一个关联对象的标识符。它通常与主键关联一起使用。
> 
> **序列同一性**
> 
> 一种专门的序列生成策略，它利用数据库序列来生成实际值，但将其与 JDBC3 getGeneratedKeys 结合以返回生成的标识符值作为插入语句执行的一部分。此策略仅在面向 JDK 1.4 的 Oracle 10g 驱动程序上受支持。由于 Oracle 驱动程序中的错误，对这些插入语句的注释被禁用。

如果您正在构建一个并发用户不多的简单应用程序，您可以使用**增量、身份、hilo**等。这些配置简单，不需要在 db 中进行太多编码。

您应该根据您的数据库选择**序列**或**guid 。**这些是安全且更好的，因为`id`生成将发生在数据库内部。

更新： *最近我们遇到了一个身份问题，原始类型 (int) 已通过使用 warapper 类型 (Integer) 来解决。*

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2016-07-15T08:11:41.080

基本上，您有两个主要选择：

*   您可以自己生成标识符，在这种情况下，您可以使用分配的标识符。
*   你可以使用`@GeneratedValue`注解，Hibernate 会为你分配标识符。

对于生成的标识符，您有两个选项：

*   UUID 标识符。
*   数字标识符。

对于数字标识符，您有三个选项：

*   [`IDENTITY`](https://vladmihalcea.com/hibernate-identity-sequence-and-table-sequence-generator/)
*   [`SEQUENCE`](https://vladmihalcea.com/jpa-entity-identifier-sequence/)
*   [`TABLE`](https://vladmihalcea.com/why-you-should-never-use-the-table-identifier-generator-with-jpa-and-hibernate/)

`IDENTITY`仅当您无法使用`SEQUENCE`（例如 MySQL）时才是一个不错的选择，因为它会禁用 JDBC 批量更新。

`SEQUENCE`[`pooled`](https://vladmihalcea.com/hibernate-hidden-gem-the-pooled-lo-optimizer/)是首选选项，尤其是与类似or的标识符优化器一起使用时[`pooled-lo`](https://vladmihalcea.com/hibernate-hidden-gem-the-pooled-lo-optimizer/)。

`TABLE`应避免使用，因为它使用单独的事务来获取可伸缩性较差的标识符和行级锁。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-11-03T09:09:54.953

前段时间我写了一篇关于 Hibernate 密钥生成器的详细文章： [http ://blog.eyallupu.com/2011/01/hibernatejpa-identity-generators.html](http://blog.eyallupu.com/2011/01/hibernatejpa-identity-generators.html)

选择正确的生成器是一项复杂的任务，但重要的是要尽快尝试并使其正确——延迟迁移可能是一场噩梦。

有点离题，但很好的机会提出一个通常被忽视的观点，即在应用程序之间共享密钥（通过 API）。就我个人而言，我总是更喜欢代理键，如果我需要与其他系统通信我的对象，我不会公开我的密钥（即使它是代理键）——我使用额外的“外部密钥”。作为一名顾问，我不止一次看到使用对象键的“出色”系统集成（“它就在那里，让我们使用它”方法）只是在一两年后发现一方存在键范围或其他问题需要在系统上进行深度迁移以暴露其内部密钥的那种。公开你的密钥意味着你的代码的一个基本方面不应该暴露给外部约束。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-06T21:14:51.110

我觉得这个讲座非常有价值[https://vimeo.com/190275665](https://vimeo.com/190275665)，在第 3 点中总结了这些生成器，并在您使用每个生成器时给出了一些性能分析和指南。

# c# - 带有计时器的文本框闪烁

> ID：10041950
> 
> 赞同：0
> 
> 时间：2012-04-06T09:59:59.673
> 
> 标签：c#, winforms, timer

> **可能重复：**
> [如何修复用户控件中的闪烁](https://stackoverflow.com/questions/2612487/how-to-fix-the-flickering-in-user-controls)

我的文本框在更新文本时闪烁。
我用每 100 毫秒计时一次的计时器更新我的文本框。（将其视为日志窗口）。

**问题**
如何防止这种*闪烁*？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T10:34:17.800

我认为你应该：

a) 减慢计时器的滴答速度

b) 启用双缓冲

c) 将*Application.DoEvents(* ) 放在将文本添加到 TextBox 的行之后

不过，这更像是一种解决方法。我只是降低滴答声。

# mysql - #1066 - 错误不是唯一的表别名

> ID：10041954
> 
> 赞同：0
> 
> 时间：2012-04-06T10:00:10.763
> 
> 标签：mysql, sql, mysql-error-1066

我正在学习 mysql，但我的一张表遇到了问题，它产生了 #1066 - 错误不是唯一的表别名。我尝试了许多不同的查询，但结果都相同。有人可以让我摆脱痛苦并帮助指出我做错了什么！- 谢谢

表

```
looks
---------

look_id(Pk)
user_id
title
description
date_modified

Add_Look_Item
-----------------------

look_id (fk from table 1)
item_id (fk from table 3)

Item
--------------

item_id (pk)
name
details

Add_Images
-------------------
image_id (pk)
item_id (fk from table 3)
image_name 
```

我尝试过的查询 - add_look_item 是一个复合键

```
SELECT DISTINCT looks.look_id, looks.title, looks.date_modified, add_look_item.item_id,     add_images.image_name FROM looks JOIN add_look_item ON add_look_item.look_id = looks.look_id
JOIN add_look_item ON add_look_item.item_id = item.item_id WHERE look.user_id = 94

#1066 - error not unique table alias 'add_look_item

SELECT DISTINCT looks.look_id, looks.title, looks.date_modified, add_look_item.item_id,     add_images.image_name FROM looks JOIN 
add_look_item ON add_look_item.looks_id = look.look_id
JOIN add_look_item ON add_look_item.item_id = item.item_id
JOIN add_images ON add_images.item_id = item.item_id WHERE add_look_item.item_id =    item.item_id AND look.user_id = 94

#1066 - error not unique table alias 'add_look_item

SELECT DISTINCT looks.look_id, looks.title, looks.date_modified, add_look_item.item_id,   add_images.image_name FROM looks INNER JOIN add_look_item ON add_look_item.look_id =    look_look_id
INNER JOIN add_images ON add_images.item_id = item.item_id
INNER JOIN add_look_item ON add_look_item.item_id = item.item_id
WHERE look.user_id = 94

#1066 - error not unique table alias 'add_look_item

SELECT DISTINCT looks.look_id, looks.title, looks.date_modified, add_look_item.item_id,    add_images.image_name FROM looks 
INNER JOIN add_look_item ON add_look_item.looks_id = look.look_id
INNER JOIN add_images ON add_images.item_id = item.item_id
INNER JOIN add_look_item ON add_look_item.item_id = item.item_id 
WHERE add_look_item.item_id = item.item_id AND look.user_id = 94

#1066 - error not unique table alias 'add_look_item

SELECT DISTINCT looks.look_id, looks.title, looks.date_modified, add_look_item.item_id,    add_images.image_name FROM looks 
INNER JOIN add_look_item ON add_look_item.looks_id = look.look_id
INNER JOIN add_images ON add_images.item_id = item.item_id
WHERE add_look_item.item_id = item.item_id AND look.user_id = 94

#1054 - Unknown column 'item.item_id' in 'where clause' 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:02:31.777

为 add_look_item 创建一个别名，因为您要多次加入它。

例如：

```
SELECT tbl.a, a.y, b.y 
FROM tbl 
JOIN tbl2 as a ON tbl.x = a.x 
JOIN tbl2 as b ON tbl.x = b.x 
```

否则查询引擎将不知道该怎么做:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T10:16:07.683

试试这个 -

```
SELECT looks.look_id, looks.title, looks.date_modified, add_look_item.item_id, add_images.image_name
FROM looks
JOIN add_look_item
    ON looks.look_id = add_look_item.look_id
JOIN add_images
    ON add_look_item.item_id = add_images.item_id
WHERE look.user_id = 94 
```

# erlang - Erlang确定远程节点的“类型”

> ID：10041956
> 
> 赞同：1
> 
> 时间：2012-04-06T10:00:25.507
> 
> 标签：erlang, nodes, cluster-computing

我有多个节点，有两种类型。

一种类型的节点将在特定服务器上执行一项工作，另一种将执行其他操作。

我们称它们为“type1”和“type2”。

我正在启动它们：

```
erl -pa ebin -name type1@sub1.mydomain.com -setcookie abc
erl -pa ebin -name type2@sub2.mydomain.com -setcookie abc
erl -pa ebin -name type1@sub3.mydomain.com -setcookie abc 
```

sub1.mydomain.com、sub2.mydomain.com 和 sub3.mydomain.com 是 Internet 上的 3 个不同服务器。

显然，type2 节点在这里将两个 type1 互连在一起。Type2 服务器是唯一一个“确定”的节点，它可以让整个事情正常工作。

Type1 服务器是动态的，所以每次我运行一个新的 type1 服务器时，它都会 ping type2 服务器以连接到所有其他节点。

问题是，当至少 2 个 type1 节点启动并运行时，我需要对工作进行集群。

所以我想从nodes()返回中确定哪个节点是type1 ...

我将能够从 atom_to_string 获取字符串，然后使用返回的字符串检查 type1，但这似乎是一种错误的方法......由于限制，也无法使用特定端口。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:44:17.573

在 Erlang 中，节点名称是*原子*，原子是*常量文字*，因此您将无法对原子的某些部分进行模式匹配（在希腊语中，“a-tomos”的意思是“不可分割的”）。

不幸的是，您必须执行一些操作，例如将每个原子转换为字符串（字符列表），然后将您的正则表达式应用于它（看来您已经这样做了）。

说了这么多，我建议你看看：

[http://learnyousomeerlang.com/distributed-otp-applications](http://learnyousomeerlang.com/distributed-otp-applications)

OTP 将帮助您完成您试图通过分布式应用程序实现的许多事情。

# jquery - jquery datepicker：自定义图标

> ID：10041959
> 
> 赞同：0
> 
> 时间：2012-04-06T10:00:37.233
> 
> 标签：jquery, jquery-ui-datepicker

我知道 datepicker 中有一个用于添加日历图标的选项，但它只会在将插件应用到文本框后才会显示。我的问题是：如何使用我自己的图标（由标记添加）来触发日期选择器的文本框？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:25:24.257

我认为您可以在此处添加隐藏字段，而不是使用图像您可以打开 datepicker。喜欢，

```
<input type="hidden" id="datepker" /> 
```

现在使用此代码，

```
$("#datepker").datepicker({
        showOn: "button",
        buttonImage: '../calender.gif', //your own image path
        buttonImageOnly: true,
}); 
```

这不会显示文本框并且工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:04:38.547

您需要使用`.datepicker('show')`（在初始化之后）手动显示日期选择器。其余部分使用标准`showOn: 'focus'`选项。

有关示例，请参[见此 jFiddle](http://jsfiddle.net/enZSA/)（使用 a`button`而不是图像，但原理相同）

# android - Android - 在运行时更改 ImageView 位置

> ID：10041962
> 
> 赞同：2
> 
> 时间：2012-04-06T10:01:01.973
> 
> 标签：android, android-layout, android-relativelayout

我和我的同事正在尝试为安卓开发一款纸牌游戏。某个玩家的牌显示在屏幕的底部，他的对手的牌显示在屏幕的右上角和左上角：

[http://i39.tinypic.com/i1lhsm.jpg](http://i39.tinypic.com/i1lhsm.jpg)

我们非常希望添加以下功能：当用户单击**他的**一张卡片（OnClickListener）时，他选择的卡片会比玩家的其他卡片高几个像素。如果用户选择另一张卡片，前一张卡片会返回到他的初始位置（在屏幕底部）并且新卡片会升起。

整个屏幕以 RelativeLayout 表示：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/game_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="#196DBB">

    <RelativeLayout android:id="@+id/battle_field" 
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    </RelativeLayout>

    <TextView
        android:id="@+id/left_name"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:layout_width="wrap_content"
        android:layout_height="30dp"
        android:textColor="#FFFFFF" />

    <RelativeLayout android:id="@+id/left_cards"
        android:layout_alignParentLeft="true"
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/left_name">
    </RelativeLayout>
    <TextView
        android:id="@+id/my_name"
        android:layout_width="wrap_content"
        android:layout_height="30dp"
        android:textColor="#FFFFFF" 
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="40dp"
        android:layout_centerHorizontal="true"/>

    <TextView
        android:id="@+id/right_name"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:layout_width="wrap_content"
        android:layout_height="30dp"
        android:textColor="#FFFFFF" />

    <RelativeLayout android:id="@+id/right_cards"
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/right_name"
        android:layout_alignParentRight="true">
     </RelativeLayout>  

</RelativeLayout> 
```

显示在屏幕底部的卡片是在运行时添加的，在 onCreate 期间：

```
fillLinearLayout(parseAndFillArray(myCardsArray), R.id.game_layout); 
```

fillLinearLayout 的实现如下：

```
private void fillLinearLayout(LinkedList<Integer> cards, int linearID){
        int myCardsNum = cards.size();
        int cardWidth = (linearID == R.id.game_layout)? cardWidthHorizontal:cardWidthVertical;
        RelativeLayout myCardsLayout = (RelativeLayout) findViewById(linearID);
        if (linearID != R.id.game_layout) myCardsLayout.removeAllViews();
        for (int i = 0 ; i < myCardsNum ; i++){
            ImageView card = (ImageView)LayoutInflater.from(WelcomeScreen.this).inflate(R.layout.card_view, null);
            card.setImageResource(cards.get(i));
            card.setId(cards.get(i));
            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams((int)(cardWidth*dp), LayoutParams.WRAP_CONTENT);
            if (linearID != R.id.game_layout) params.addRule(RelativeLayout.ALIGN_PARENT_TOP, -1);
            else params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, -1);
            int leftMargin = (linearID == R.id.game_layout)? (int)((i*cardMarginVertical)*dp) : 0;
            int topMargin = (linearID == R.id.game_layout)? 0 : (int)(((i % (10))*cardMarginVertical + 35)*dp);
            int rightMargin = 0;
            int bottomMargin = 0;
            params.setMargins(leftMargin, topMargin, rightMargin, bottomMargin);
            card.setLayoutParams(params);
            if (linearID == R.id.game_layout) card.setOnClickListener(OnCardClick(card));
            myCardsLayout.addView(card);
        }
} 
```

`params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, -1)` 卡片用代码行粘在屏幕底部。

当用户按下某个卡片时，会调用 onClick 函数：

```
private View.OnClickListener OnCardClick(final ImageView card)  {
        return new View.OnClickListener() {
            public void onClick(View v) {
                RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams)v.getLayoutParams();
                params.setMargins(params.leftMargin, params.topMargin, params.rightMargin, (int)(10*dp));
            }
        };
    } 
```

问题是这不会影响被按下的卡片的位置。他只是留在他的位置。我猜规则 ALIGN_PARENT_BOTTOM 太“强”，这就是为什么 onClick 函数不会影响卡片的原因。谁能想到解决这个问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:18:44.663

我想到了。对于那些将来会为此苦苦挣扎的人：

我已将卡片的 ImageView 包装在 RelativeLayout 中，并将其放在名为 my_card_view.xml 的单独布局文件中：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content">
    <ImageView android:layout_height="wrap_content"
        android:layout_width="50dp"
        android:scaleType="fitXY"
        android:adjustViewBounds="true">
    </ImageView>
</RelativeLayout> 
```

显示在屏幕底部的卡片是在运行时添加的，在 onCreate 期间：

```
fillMyCards(parseAndFillArray(myCardsArray)); 
```

fillMyCards 的实现如下：

```
private void fillMyCards(LinkedList<Integer> cards){
    int size = cards.size();
    RelativeLayout layout = (RelativeLayout) findViewById(R.id.game_layout);
    for (int i = 0 ; i < size ; i++){
        RelativeLayout card = (RelativeLayout)LayoutInflater.from(WelcomeScreen.this).inflate(R.layout.my_card_view, null);
        card.setGravity(Gravity.CENTER);
        ImageView cardImage = (ImageView)card.getChildAt(0);
        cardImage.setImageResource(cards.get(i));
        card.setId(cards.get(i));
        RelativeLayout.LayoutParams cardParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        cardParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, -1);
        int leftPadding =(int)((i*cardMarginHorizontal)*dp);
        int topPadding = 0;
        int rightPadding = 0;
        int bottomPadding = 0;
        card.setPadding(leftPadding, topPadding, rightPadding, bottomPadding);
        card.setLayoutParams(cardParams);
        cardImage.setOnTouchListener(this);
        layout.addView(card);
    }
} 
```

现在我们可以通过在 onClick 中添加以下代码来改变卡片的位置：

```
RelativeLayout parent = (RelativeLayout) view.getParent();
parent.setPadding(0, 0, 0, (int)(10*dp)); 
```

# c# - CrystalDecisions.CrystalReports.Engine.ReportDocument.Load 挂起

> ID：10041968
> 
> 赞同：0
> 
> 时间：2012-04-06T10:01:40.857
> 
> 标签：c#, visual-studio-2010, crystal-reports-xi

在调试期间，当我到达方法`CrystalDecisions.CrystalReports.Engine.ReportDocument.Load(InfoObject, EnterpriseSession)`时，调试就会停止。

我的意思是我没有通过它，只是永远保持这种方法，没有错误，没有任何东西。我的页面只显示“等待本地主机”，仅此而已。

我正在使用 visualstudio 2010 连接到 Business Objects XI 3.1 实例

编辑：

我现在看到有一个超时错误超时配置为 10 分钟）：

```
objReportDocument.Load(objInfoObject, enterpriseSession); 
```

错误：

```
Request timed out because there has been no reply from the server in 600000 ms. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:05:39.983

我有同样的问题。尝试了所有建议的补救措施，例如设置没有默认打印机，清除打印后台处理程序，但都没有帮助。

由于 .NET Web 应用程序是在 2008 年完成的，因此我将 IIS 上的应用程序池从池更改`DefaultAppPool`为`Classic.NET`；有效！

# jquery - Jquery Timer 在 IE9 中不起作用

> ID：10041976
> 
> 赞同：0
> 
> 时间：2012-04-06T10:02:43.520
> 
> 标签：jquery, asp.net-mvc-3, internet-explorer, timer, signalr

我们在拍卖门户的前端显示计时器。

我们正在使用 SignalR 框架从数据库中广播拍卖时间。

我们能够让它在 Firefox、safari、opera 和 chrome 上运行得非常好。

但它不适用于IE9。

***我们最后完成的清单。***

1.  所有的 javascript 包括已完成

    ```
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/redmond/jquery-ui.css"
        rel="stylesheet" type="text/css" />
    <script src="../../Scripts/modernizr-1.7.js" type="text/javascript"></script> 
    ```

2.  我们已经完成了 connection.hub.start 调用

    ```
    var chat = $.connection.chat;
    $.connection.hub.start(function () {
        chat.send("Finished loading1");
    }); 
    ```

3.  这就是我对控制器进行 ajax 调用的方式。这样我就可以在前端视图中获得相关数据。

    ```
    function getTimer() {
        var tim;
        getAuc();
        var postData = { values: dataArray };
        try {
            $.ajax({
                type: "POST",
                url: "../../Home/PushTimer",
                data: postData,
                success: function (data) {
                    if (data == "Null") {
                        return;
                    }
                    var i = 0;
                    for (var i = data.length - 1; i >= 0; i--) {
                        assignTimer(data[i]);
                    };
                },
                dataType: "json",
                traditional: true
            });
        }
        catch (exception) { }
        return;
    }; 
    ```

4.  如果它在 firefox、chrome、safari 和 opera 中正常工作，那么 Internet Explorer 可能存在问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:13:23.487

我在你的 for 循环之后看到了一个额外的分号。这可能是原因吗？我知道 IE 对脚本中出现的任何额外分号非常严格。只需交叉验证一次

# function - 在Scala中自动将类方法转换为采用显式类参数的函数的方法？

> ID：10041983
> 
> 赞同：6
> 
> 时间：2012-04-06T10:03:10.873
> 
> 标签：function, scala

以下是手动过程

```
case class A(x: Int) { def f(y: Int) = x * y }
val af: (A => Int => Int) = _.f

val a = A(4)
val r = af(a)(2) 
```

有没有一种方便的方法来获得类似的功能`af`？之类的东西`A magic f`，可能不使用反射。能够通过导入类的所有公共方法`import A#magic._`是一个奖励。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-06T10:35:54.883

这种方式缩短了 10 个符号：

```
val af = (_: A).f _ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T10:24:40.950

您可以创建 A 的实例并导入方法：

```
val a = A(4)
import a._ 
```

没有其他方法可以做到这一点，因为`x`需要保存一个值。但是，您可以创建一个单例对象而不是一个类并相应地更改您的方法签名：

```
object A {
  def f(x:Int)(y:Int) = x*y
}

import A._ 
```

据我所知，不可能将一个类的所有方法都变成柯里`(constructor)(method signature)`化函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T10:49:24.917

我不知道你为什么想要那样，但你确实可以实现以下目标：

```
scala> case class A(x:Int){ def f(y:Int)=x*y}
defined class A

scala> val af = A(2).f _
af: (Int) => Int = <function1>

scala> af(3)
res0: Int = 6 
```

# sql - 用于对员工执行负载检查的 Sql 查询

> ID：10041989
> 
> 赞同：-1
> 
> 时间：2012-04-06T10:03:37.530
> 
> 标签：sql, database

我有这样的桌子设计......

*   1个项目-->多个产品。
*   1 产品--> 多种环境。
*   1 名员工--> 多项活动。

状态可以是 = "new"、"inprogress"、"on hold"、"closed"

```
 Activity table- ActID(PK), assignedtoID(FK), Env_ID(FK), Product_ID(FK), project_ID(FK), Status. 
    Product_table - Product_ID(PK), Product_name
    Project_Table- Project_ID(PK), Project_Name. 
    Environment_Table- Env_ID(PK), Env_Name. 
    Employee_Table- Employee_ID(PK), Name.
    Employee_Product_projectMapping_Table -Emp_ID(FK), Project_ID(FK), Product_ID(FK).
    Product_EnvMapping_Table - Product_ID(FK), Env_ID(FK). 
```

**负载检查查询**

首先找出在特定项目中分配给每个员工的活动总数。

（一个）。然后找到该员工在该项目中的活动数量，其中 status = new 或 inprogress。（乙）。划分 A/B。以百分比值计算此 A/B。

所以我的最终查询表输出将包括

*   雇员的名字
*   项目名称
*   总分配行为（计数值）
*   具有新状态或正在进行中的行为（计数）
*   负载（百分比值。）

谁能帮我查询并解释我如何才能达到这个结果？谢谢。

到目前为止，我已经尝试了这么多......得到了 A 和 B 的结果，但现在我需要将这两者结合起来......

```
(A).

SELECT activity_table.assignid, activity_table.projid, Count(activity_table.actid) AS CountOfactid
FROM activity_table
GROUP BY activity_table.assignid, activity_table.projid;

(B).

SELECT activity_table.assignid, activity_table.projid, Count(activity_table.actid) AS CountOfactid
FROM activity_table where status in ('new','inprogress')
GROUP BY activity_table.assignid, activity_table.projid ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:14:41.857

这是第三个结果......不是第四个。

```
select Employee_table.name,Project_table.Project_Name, Count(activity_table.actid) AS CountOfactid

from Activity table,Employee_Table,Project_Table,Employee_Product_projectMapping_Table

where Activity_Table.Product_Id=Project_Table.Product_Id

 and 

aage ka syntax yaad nai aa raha hai...

Employee_Product_projectMapping_Table aur  Employee_Table ko combine karke emp name through equating product id... 
```

第 4 次使用嵌套查询......

将尝试尽快解决此查询.....：P

409008....

# ajax - 在 Rails 3.x 中上传 ajax 文件的最佳方法是什么

> ID：10041990
> 
> 赞同：1
> 
> 时间：2012-04-06T10:03:39.483
> 
> 标签：ajax, file-upload, ruby-on-rails-3.2

在 Rails 中实现 ajax 文件上传的最佳方法是什么。我做了很多研究，对远程表单进行了一些测试，并搜索了一些 jquery 插件。我发现的所有插件似乎都过时了，我不知道哪个插件可以很好地与 rails 3.x 搭配使用。你们对这个话题有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:14:18.523

AFAIK 你现在必须是特定于浏览器的。各种浏览器都在实现允许 javascript 从机器读取文件的文件 API。以前，并没有真正的方法来实现 AJAX 文件上传（我认为是出于安全原因，但我不确定所有细节）。我之前已经实现了拖放 AJAX 文件上传；我不记得确切的细节，但这里是我使用的一些资源。如果我有机会，我会看看我是否能找到我的代码以及我是如何实现它的。

[http://demo.tutorialzine.com/2011/09/html5-file-upload-jquery-php](http://demo.tutorialzine.com/2011/09/html5-file-upload-jquery-php)

[http://www.skuunk.com/2011/04/reading-ajax-xhr-file-uploads-in.html](http://www.skuunk.com/2011/04/reading-ajax-xhr-file-uploads-in.html)

[http://www.centurion-project.org/articles/html5-multiple-file-upload-with-progress-bar](http://www.centurion-project.org/articles/html5-multiple-file-upload-with-progress-bar)

[https://developer.mozilla.org/en/Using_files_from_web_applications](https://developer.mozilla.org/en/Using_files_from_web_applications)（最好 - Mozilla 文档）

Mozilla 文档非常有用，让我大部分时间都在那里。

# javascript - 如何在字符串中使用反斜杠 (\)？

> ID：10041998
> 
> 赞同：52
> 
> 时间：2012-04-06T10:04:35.827
> 
> 标签：javascript, string, substring, backslash

我尝试了很多方法来从**执行的*****单个反斜杠***（我不是指来自 的输入）。 **`html`**

 **我可以将*特殊字符*作为制表符、换行符和许多其他字符，然后将它们转义为`\\t`or`\\n`或，但是当*非特殊字符*旁边 `\\(someother character)`有一个反斜杠时，我无法得到一个反斜杠。

 *我不想要这样的东西：

```
str = "\apple";   // I want this, to return:
console.log(str); // \apple 
```

如果我尝试在 0 处获取字符，那么我会得到`a`而不是`\`.

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-04-06T10:12:46.887

**（请参阅答案末尾的 ES2015 更新。）**

您已将您的问题标记为`string`和`regex`。

在 JavaScript 中，反斜杠在字符串文字和正则表达式中都有特殊的含义。如果你想在字符串或正则表达式中使用实际的反斜杠，你必须写两个：`\\`.

这个字符串以**一个**反斜杠开头，你在文字中看到的第一个是一个转义字符，告诉我们从字面上获取下一个字符：

```
var str = "\\I have one backslash"; 
```

这个正则表达式将匹配一个**反斜杠**（不是两个）；同样，您在文字中看到的第一个字符是转义字符，告诉我们从字面上获取下一个字符：

```
var rex = /\\/; 
```

如果您使用字符串来创建正则表达式（而不是像我上面那样使用正则表达式文字），请注意您正在处理两个级别：字符串级别和正则表达式级别。因此，要使用匹配单个反斜杠的字符串创建正则表达式，您最终会使用**四个**：

```
// Matches *one* backslash
var rex = new RegExp("\\\\"); 
```

那是因为首先，您正在编写一个字符串文字，但您实际上想在其中放置反斜杠。所以你`\\`对每个你想要的反斜杠都这样做。但是你的正则表达式*也*需要两个`\\`你想要的每一个真正的反斜杠，所以它需要在字符串中看到两个反斜杠。因此，一共有四个。这是我尽可能避免使用的原因之一`new RegExp(string)`；我很容易混淆。:-)

### ES2015 和 ES2018 更新

快进到 2015 年，[正如 Dolphin_Wood 指出](https://stackoverflow.com/a/30748739/157247)的那样，新的 ES2015 标准为我们提供了模板文字、标签函数和[`String.raw`](http://www.ecma-international.org/ecma-262/6.0/#sec-string.raw)函数：

```
// Yes, this unlikely-looking syntax is actually valid ES2015
let str = String.raw`\apple`; 
```

`str`最终在其中包含字符`\`, `a`, `p`, `p`, `l`, 和`e`。请注意`${`，您的“字符串”（模板）中没有，因为这是模板文字并`${`开始替换。例如：

```
let foo = "bar";
let str = String.raw`\apple${foo}`; 
```

...最终成为`\applebar`. **更新：**从 ES2018 开始，以下内容不再正确，它更新了模板文字以允许无效的转义序列，详情请[点击此处](https://github.com/tc39/proposal-template-literal-revision)。~~另请注意，这与 C# 或类似中的“逐字”字符串不太一样，因为不允许与规范中的[*LegacyOctalEscapeSequence匹配的序列并导致语法错误。*](http://www.ecma-international.org/ecma-262/7.0/index.html#prod-annexB-LegacyOctalEscapeSequence)所以例如~~

 ~~```
// Fails
let str = String.raw`c:\foo\12\bar`; 
```~~ 

~~...失败，因为`\12`看起来像传统的八进制文字。~~

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-06-10T06:33:14.010

尝试`String.raw`方法：

```
str = String.raw`\apple` // "\apple" 
```

参考这里：[String.raw()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/raw)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-04-06T10:07:56.027

`\`是一个转义字符，当后面跟着一个非特殊字符时，它不会变成文字`\`. 相反，你必须加倍它`\\`。

```
console.log("\apple");  //-> "apple" 
console.log("\\apple"); //-> "\apple" 
```

无法获取原始的原始字符串定义或创建没有转义字符的文字字符串。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-03-23T07:49:04.320

请尝试以下对我有用的方法，我得到带有反斜杠的输出

```
String sss="dfsdf\\dfds";
System.out.println(sss); 
```***