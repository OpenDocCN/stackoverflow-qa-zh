# StackOverflow 问答 12302000-12302999

# security - 如何为 Azure 队列设置共享访问策略？

> ID：12302001
> 
> 赞同：0
> 
> 时间：2012-09-06T14:08:17.170
> 
> 标签：security, azure, queue

显然，可以使用共享访问策略来控制对 Azure 队列的访问。此处的示例[http://msdn.microsoft.com/en-us/library/windowsazure/hh508996](http://msdn.microsoft.com/en-us/library/windowsazure/hh508996)证实了这一点，但仅提供了 blob 共享访问策略的示例。有没有人对队列（和表）如何实现相同的参考有任何参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:15:36.803

您可以在 Windows Azure 存储博客上找到完整的示例：[介绍表 SAS（共享访问签名）、队列 SAS 和更新到 Blob SAS](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-table-sas-shared-access-signature-queue-sas-and-update-to-blob-sas.aspx)。这是将策略分配给队列的部分：

```
// Create the GC queue SAS policy.
QueuePermissions gcQueuePermissions = new QueuePermissions();
SharedAccessQueuePolicy gcQueuePolicy = new SharedAccessQueuePolicy()
{
    // Providing the max duration
    SharedAccessExpiryTime = DateTime.MaxValue,
    // Permission is granted to process queue messages.
    Permissions = SharedAccessQueuePermissions.ProcessMessages
};

// Associate the above policy with a signed identifier
gcQueuePermissions.SharedAccessPolicies.Add(
    gcPolicySignedIdentifier,
    gcQueuePolicy);

// The below call will result in a Set Queue ACL request to be sent to 
// Windows Azure Storage in order to store the policy and associate it with the 
// "GCAccessPolicy" signed identifier that will be referred to
// by the generated SAS token
this.gcQueue.SetPermissions(gcQueuePermissions); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:19:56.220

[表 SAS](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-table-sas-shared-access-signature-queue-sas-and-update-to-blob-sas.aspx) *（特别是示例的 SAS 令牌生产者部分）*的公告帖子是否可以帮助您？在我看来，SAS 可用于从 SDK 1.7 开始的表和队列。

# jquery - 精确 10 位电话号码验证

> ID：12302004
> 
> 赞同：2
> 
> 时间：2012-09-06T14:08:34.003
> 
> 标签：jquery, jquery-validate

我需要一个输入字段来仅验证 10 位数的电话号码，不超过 10 位数并去除任何破折号等。

这是到目前为止的代码：

```
jQuery.validator.addMethod ("phone", function(phone, element) {
if (phone == null) {
return false;
}
var stripped = phone.replace(/[\s()+-]|ext\.?/gi, "");
// 10 is the minimum number of numbers required
return this.optional(element) || ((/\d{10,10}/i).test(stripped));
}, "*Please enter a valid phone number."); 
```

但是，如果用户输入的数字少于 10 位，则验证正常，但如果输入的数字多于 10 位，则不会返回错误消息，他们可以提交表单。

任何帮助都会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:10:37.497

您正在检查字符串中的任何位置是否有 10 位数字，而是检查整个字符串是否为 10 位数字，而不是其他：

```
return this.optional(element) || ((/^\d{10}$/).test(stripped)); 
```

-

`^`= 字符串开头

`$`= 字符串结尾

不需要`/i`，这只适用于 alpha 字符。

# java - 如何在 PDF 文档中添加隐藏图像？

> ID：12302007
> 
> 赞同：0
> 
> 时间：2012-09-06T14:08:40.703
> 
> 标签：java, image, pdf, itext

我有一个程序。它输出为pdf，但这几乎不可能再次读取。所以我需要一个附加到我的 PDF 的附加文件，以便能够在我的程序中对其进行编辑。将文件附加到 PDF 是个好主意，但这对用户来说是可见的，我不希望这样。

另一种方法是将我的可读文件格式隐藏在图像中，该图像将被添加到 PDF 中第一页顶部的某个位置，在其他所有内容之前......如果可能的话，甚至是元数据......

这样我就可以使用 PDF 库（iText）从 pdf 中提取图像，并从中读取。

我的问题是如何将图像添加到 PDF 以尽可能隐藏（视觉和可访问性）。它必须位于与任何创建的文档相同的位置（在顶部的某个位置，或在文档的最底部，或根本不显示的文档部分......我'我真的在这里猜测，我对PDF文件格式并不熟悉）......

有任何想法吗？

PS 它是哪个图像并不重要，我可以是一个完全透明的图像，1x1 像素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:55:41.200

我不确定您所说的图像是什么意思，但您可以“扩展”PDF 参考。

PDF 由以下对象组成：PDF 编号、PDF 名称、PDF 字符串、PDF 数组、PDF 字典、PDF 流。您可能想要的是将一个条目添加到 PDF 参考中未定义的字典（选择一个：根字典、信息字典、页面树的根......） '不在 PDF 查看器中呈现。

此类条目的键必须是 PDF 名称。为避免与现有名称（当前 PDF 规范的一部分或将成为未来规范的一部分的名称）冲突，建议向 ISO 注册一个四字母密钥。例如，Adobe 注册了 adbe，iText 注册了 ITXT 并使用带有下划线的名称。例如，如果我们需要您描述的功能，ITXT_OriginalData 将是一个好名字。

此类条目的值将是 PDF 流。在 iText 中，您需要 PdfStream 类。

# javascript - 为什么在调用父构造函数时在 [] 中发送数据？

> ID：12302008
> 
> 赞同：4
> 
> 时间：2012-09-06T14:08:42.583
> 
> 标签：javascript, extjs

我来自 C/C++ 语法家族，所以这里有些东西对我来说并不熟悉。

```
constructor: function(manufacturer, model, topSpeed, maxAltitude){

   // initialise our config object
   this.initConfig();

   if(maxAltitude){
       this.setMaxAltitude(maxAltitude);
   }

   // call the parent class' constructor
   this.callParent([manufacturer, model, topSpeed]);
} 
```

那么，现在当我调用父级的构造函数时，为什么要在 [] 中包含数据？当我在 C# 中做类似的事情时，我只是像在任何普通函数中一样发送数据。

这不能只是：

```
this.callParent(manufacturer, model, topSpeed); 
```

这个例子来自

> Ext-JS 4 Web 应用程序开发手册

但我认为这是一个 JavaScript 问题。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:13:10.537

Well`.callParent()`是 ExtJS 提供的一个类系统实用程序。它需要将参数作为数组，因为它将`.apply()`用于调用另一个函数。

如果他们愿意，他们可以编写它来构建自己的数组。它可以说在当前形式中更有用，因为它为您提供了更大的灵活性，而且在 JavaScript 中创建数组并不难。

（我不确切知道*它*的作用，因为我不使用 ExtJS。）

# python - 将列表转换为“转置”列表

> ID：12302012
> 
> 赞同：1
> 
> 时间：2012-09-06T14:08:54.643
> 
> 标签：python

这可能是一个初学者问题，但我不知道如何搜索答案（因为我无法“命名”问题）

我有 2 个列表或 2 个列表的元组

```
xxx = ["time1", "time2", "time3"]
yyy = ["value1", "value2", "value3"]
zzz=(xxx,yyy) 
```

现在我想为每个条目结果创建一个列表/元组

```
[['time1', 'value1'], ['time2', 'value2'], ['time3', 'value3']] 
```

我可以使用 for 循环（和 zip）来做到这一点，但没有“更好”的解决方案吗？这是一个[类似的问题](https://stackoverflow.com/questions/8081545/convert-list-of-tuples-to-multiple-lists-in-python)，但我无法将那里给出的分辨率用于我的问题

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T14:09:32.537

使用内置[`zip`](http://docs.python.org/library/functions.html#zip)函数：

```
 zzz = zip(xxx, yyy) 
```

当然，这会创建一个元组列表（或 python3.x 中的一个元组迭代）。如果你真的想要一个列表列表：

```
 #list (python2.x) or iterable(python3.x) of lists
 zzz = map(list,zip(xxx,yyy)) 
```

或者

```
 #list of lists, not list of tuples
 #python 2.x and python 3.x
 zzz = [ list(x) for x in zip(xxx,yyy) ] 
```

如果您使用的是 python3.x 并且您想确保它`zzz`是一个列表，则列表综合解决方案将起作用，或者您可以从`zip`产生的迭代构造一个列表：

```
#list of tuples in python3.x.  
zzz = list(zip(xxx,yyy)) #equivalent to zip(xxx,yyy) in python2.x
                         #will work in python2.x, but will make an extra copy.
                         # which will be available for garbage collection
                         # immediately 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:21:54.910

我注意到您的数据包括时间戳和数字。如果您正在进行数字密集型计算，那么 numpy 数组可能值得一看。它们提供更好的性能，并且转置非常简单。（`arrayname.transpose()`甚至`arrayname.T`）

# android - 如何测试一个android库？

> ID：12302016
> 
> 赞同：1
> 
> 时间：2012-09-06T14:09:01.693
> 
> 标签：android, testing

我正在编写一个 android 库项目并尝试对其进行测试。我发现测试一个库项目比使用我当前的方法更困难。

现在，我正在将库项目导出到 jar 文件中。然后我把它放到测试项目和测试目标项目的libs文件夹中。然后我将它添加到两个项目的构建路径并运行测试。

每次我对库进行更改时，我都必须再次这样做。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:59:10.047

谷歌文档中有一些对此的参考。查看[http://developer.android.com/tools/projects/index.html#testing](http://developer.android.com/tools/projects/index.html#testing)

基本上，最简单的方法是编写一个使用库项目的应用程序，然后将单元测试添加到该应用程序。通过 eclipse 创建测试时，您可以选择从库项目中测试模块。这样，对库项目的更改就会自动应用。

# c# - 使用 C# 检查 IIS 应用程序下是否存在文件夹

> ID：12302018
> 
> 赞同：3
> 
> 时间：2012-09-06T14:09:08.393
> 
> 标签：c#, asp.net, iis, directoryservices, virtual-directory

我正在使用 C# 开发基于 Web 的部署工具，该工具在 IIS 7 上远程部署应用程序。

我已经达到了可以部署应用程序的地步。现在我需要在尝试对其设置权限之前查看已部署的应用程序是否具有某个目录（因为该工具将部署可能具有或不具有该文件夹的不同应用程序）。

我采取了两种方法：

*   我已经检查了我可以在`ServerManager`命名空间下使用的类。我可以使用以下方法处理部署在某个应用程序池下的应用程序：

    `var iis = ServerManager.OpenRemote("serverName")`

    `var iisApplication = iis.Sites[site].Applications["appName"];`.

    现在我可以使用以下命令获取应用程序下的虚拟目录：

    `var virtualDirectory = iisApplication.VirtualDirectories;`

    但是后来我看不到该虚拟目录下的很多文件夹。例如，我的应用程序被部署为测试并`iisApplication.VirtualDirectories.First()`为我提供`/test`. 我希望能够在`/test/_ApplicationLogs`哪个目录上设置权限。

*   我的下一个方法是使用`DirectoryEntry`. 在这里，我无法找出用于我的应用程序的元数据库路径。是否有用于 IIS 7 的标准元数据库路径？

    对于称为`test`本地部署的应用程序，元数据库路径是什么？我能得到所有的孩子以便我可以使用`DirectoryEntry.Exists`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:38:10.073

目前，我有一个解决方法。我可以使用下的`WhatIf`（设置为真）属性`DeploymentSyncOptions`，进行同步，然后检查是否添加了对象。如果是，则该目录不存在。代码 ：

```
var syncOptions = new DeploymentSyncOptions();
syncOptions.WhatIf = true;

using (deploymentObject)
{
   var result = deploymentObject.SyncTo(
   DeploymentWellKnownProvider.SetAcl,
   "Default Web Site/path_to_folder",
   destinationBaseOptions,
   syncOptions);

   if (result.ObjectsAdded != 0)
   {
     syncOptions.WhatIf = false;
     deploymentObject.SyncTo(DeploymentWellKnownProvider.SetAcl,
                            "Default Web Site/path_to_folder",
                             destinationBaseOptions,
                             syncOptions);
   }
} 
```

# php - 使用前端控制器模式和 MVC 嵌套控制器

> ID：12302023
> 
> 赞同：0
> 
> 时间：2012-09-06T14:09:22.957
> 
> 标签：php, model-view-controller, front-controller

我正在使用 MVC 方法（不使用任何框架，纯 PHP）在 PHP 中开发 Web 应用程序。与 MVC 的情况一样，每个请求都到达前端控制器，前端控制器将其路由到相应的控制器，并执行请求的操作。URL 结构如下所示：

```
www.site.com/controller/action 
```

假设我正在构建一个电子商务网站，其中包含不同类别的产品。可能的 URL 可能是：

```
www.site.com/sofas/overview
www.site.com/video-games/overview 
```

对于第一个 URL，加载“沙发”控制器，并执行它的 overview() 方法。这一切都很好，直到我们必须将这些产品嵌套在父类别中。我将使用前两个 URL 来说明我的意思：

```
www.site.com/furniture/sofas/overview
www.site.com/electronics/video-games/overview 
```

现在，“视频游戏”控制器嵌套在“电子”控制器中。但是，对于当前的“加载控制器 -> 执行操作”结构，这将不起作用。

一个可能的解决方案是在父控制器（“电子设备”）中创建一个方法，在请求不存在的操作（“视频游戏”）的情况下执行该方法。此方法检查请求的操作是否作为控制器存在。如果是这样，控制器将被加载并执行它的操作（“概述”）。

我徒劳地寻找解决标准前端控制器模式限制的解决方案，包括[在](https://stackoverflow.com/questions/11962437/multi-level-controllers-for-mvc-architecture)SO 上。我认为我现在对 MVC 的实现是正确的，但是前端控制器仍然带来了限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:20:00.577

我认为您必须为每种不同的产品类型配备不同的“控制器”，这可能是您遇到问题的地方。

除非您对每种产品类型有截然不同的视图，否则我认为控制器将与诸如“目录”（或“产品”或您想称呼它的任何名称）之类的概念相关联。例如，您的 URL 结构可能看起来像

```
www.site.com/catalog/furniture/sofas/overview
www.site.com/catalog/electronics/video-games/overview 
```

URI的`catalog`一部分决定了控制器，而附加的 URI 段本质上是传递给控制器​​的参数，指示请求的细节。

这将与 OOP 继承结构很好地配合，因为您可以拥有一个根“产品”类，然后使用家具、电子产品等的子类扩展该类，每个子类都有自己特定于该类别的属性。你会是沙发、视频游戏等的进一步子类。

您的控制器所要做的就是评估请求 URI 以确定要为请求加载哪个类。所以像：

```
// assume URI has been parsed to get value such as "sofas", "video-games", etc. into a variable called $class_to_load
$product = new $class_to_load;
$product->overview(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:17:22.560

您将 MVC 结构与路由问题混淆了。

控制器应该可能类似于产品控制器或类别控制器。按功能对控制器进行分组。

现在路由处理请求的结构以及它在应用程序中的发送位置。

您应该有一个路由层，它知道（例如）`/<category>/<subcategory>/<action>`使用适当的参数（即类别和子类别）发送到适当的控制器（例如产品控制器），以便它可以构造响应。

仅将 url 直接映射到控制器和操作（即强制执行`/<controller>/<action>`）是构建应用程序架构的一种非常有限的方式。

# firefox - 我在哪里可以获得 Firefox about:home 页面的源文件？

> ID：12302026
> 
> 赞同：0
> 
> 时间：2012-09-06T14:09:30.140
> 
> 标签：firefox

我正在使用 Mozilla Firefox，我喜欢`about:home`页面布局。是否有获取源代码的 GitHub 或存储库？

我想将其转换为 WordPress 基本主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:44:37.327

它位于包含所有 Firefox 代码的[`mozilla-central`存储库](http://hg.mozilla.org/mozilla-central/)[`/browser/base/content/abouthome/`](http://hg.mozilla.org/mozilla-central/file/9677eb19a6a5/browser/base/content/abouthome/)中，当前位于. [当然，您也可以在存储库的](https://github.com/mozilla/mozilla-central/tree/master/browser/base/content/abouthome)[GitHub 副本中`mozilla-centra`](https://github.com/mozilla/mozilla-central/tree/master/browser/base/content/abouthome)找到它。

顺便说一下，使用的许可证是[Mozilla Public License Version 2.0](http://mozilla.org/MPL/2.0/)，请确保遵守其条款（很可能归结为将 MPL 标头保留在主题的相关文件中）。

# android - Android第二次启动Activity时寻找layout而不是layout-large

> ID：12302029
> 
> 赞同：2
> 
> 时间：2012-09-06T14:09:34.627
> 
> 标签：android, android-layout

我想根据应用程序是在智能手机还是平板电脑上运行来提供不同的布局。因此，我分别放置了不同的布局定义`layout-normal`。`layout-large`.

**在平板电脑上进行测试期间，当关联的活动第二次**启动时，我遇到了以下异常：

```
09-06 13:28:43.640: E/AndroidRuntime(26260): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f030005
09-06 13:28:43.640: E/AndroidRuntime(26260):    at android.content.res.Resources.getValue(Resources.java:1010)
09-06 13:28:43.640: E/AndroidRuntime(26260):    at android.content.res.Resources.loadXmlResourceParser(Resources.java:2088)
09-06 13:28:43.640: E/AndroidRuntime(26260):    at android.content.res.Resources.getLayout(Resources.java:849)
09-06 13:28:43.640: E/AndroidRuntime(26260):    at android.view.LayoutInflater.inflate(LayoutInflater.java:389)
09-06 13:28:43.640: E/AndroidRuntime(26260):    at android.view.LayoutInflater.inflate(LayoutInflater.java:347)
09-06 13:28:43.640: E/AndroidRuntime(26260):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:245)
09-06 13:28:43.640: E/AndroidRuntime(26260):    at android.app.Activity.setContentView(Activity.java:1786)
09-06 13:28:43.640: E/AndroidRuntime(26260):    ... 11 more 
```

当第一次启动 Activity 时，一切都很好，并且布局正确膨胀。该错误仅在 Activity 完成并从后堆栈上的前一个 Activity 重新启动后发生。

我可以在运行 Android 3.2 的三星 Galaxy Tab 以及适用于 Android 3.2 和 4.1 的模拟器中重现该问题。布局是通过 加载的`Activity.setContentView(int resId)`，所以此时没有什么魔力。此外，在 stacktrace() 中记录的资源 ID对应于给定`#0x7f030005`的根布局的 id 。`R.layout``Activity.setContentView(int resId)`

如果我将布局从文件夹复制`layout-large`到`layout`文件夹并更改副本中的背景颜色，则不会引发异常，但`layout`会加载具有修改后背景颜色的非特定版本。

在清单中，我已经配置了支持的屏幕

```
<supports-screens
    android:smallScreens="false"
    android:normalScreens="true" 
    android:largeScreens="true"
    android:xlargeScreens="true"
    android:anyDensity="true" /> 
```

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T09:52:04.507

错误的起源是在我使用的外部库中：

他们正在构造一个子类对象`android.content.res.Resources`以伪造内存中的资源。该`Resources`对象的构造需要一个`AssetManager`作为参数之一，该参数是使用Activity的`getAssets()`方法获得的。似乎这正在破坏资源。

似乎构造`Resource`对象的正确方法是传入一个全新的`AssetManager`实例（这也意味着使用私有 AssetManager 构造函数）。

# wpf - 在选定的数据网格上显示一个按钮

> ID：12302031
> 
> 赞同：7
> 
> 时间：2012-09-06T14:09:38.760
> 
> 标签：wpf, button, datagrid, visibility, selected

我有一个带有行数的数据网格。每行都有作为 DeleteRow 按钮。只有被选中的行应该有这个按钮可见。在我看来，可能至少有两种解决方案：

a) 将按钮的 Visibility-property 绑定到包含 DatGridRow 的 IsSelected-property

或者

b）使用按钮中的触发器仅在选择包含行时才可见。

这是我为选项 b 提供的代码，它不起作用：

```
<DataGridTemplateColumn Width="50">
<DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
        <Button Content="X" Tag="{Binding}" Click="DeletRow_Click" Visibility="Hidden">
            <Button.Style>
                <Style x:Name="ButtonVisibility">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type DataGridRow}},Path=IsSelected}" Value="True">
                            <Setter Property= "Button.Visibility" Value="Visible"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>
        </Button>
    </DataTemplate>
</DataGridTemplateColumn.CellTemplate> 
```

这可能真的很容易，但我一直盯着它看，现在让我眼花缭乱：S

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T14:23:01.890

[由于Dependency Property Value Precedence](http://msdn.microsoft.com/en-us/library/ms743230.aspx#listing)，它不起作用。您不能更改`Style`. 搬进去就可以`Visibility.Hidden`了`Style`。

```
<DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
        <Button Content="X" Tag="{Binding}" Click="DeletRow_Click">
            <Button.Style>
                <Style x:Name="ButtonVisibility">
                    <Setter Property="Button.Visibility" Value="Hidden"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGridRow}}, Path=IsSelected}" Value="True">
                            <Setter Property="Button.Visibility" Value="Visible"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>
        </Button>
    </DataTemplate>
</DataGridTemplateColumn.CellTemplate> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T17:39:59.870

您可以使用`BooleanToVisibiltyConverter`WPF 提供的转换器来切换按钮的可见性 -

```
<DataGrid>
            <DataGrid.Resources>
                <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
            </DataGrid.Resources>
            <DataGrid.Columns>
                <DataGridTemplateColumn Width="50">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="X" Tag="{Binding}"
                                    Visibility="{Binding IsSelected, Converter={StaticResource BooleanToVisibilityConverter},
                                                    RelativeSource={RelativeSource FindAncestor, AncestorType=DataGridRow}}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid> 
```

# vbscript - 比较文本文件 - Igonring 使用 VBscripting 的一些文本

> ID：12302039
> 
> 赞同：0
> 
> 时间：2012-09-06T14:10:07.033
> 
> 标签：vbscript, compare, text-files

首先，我不是编程背景，对 VBscript 完全陌生。由于某些原因，我必须在办公室执行此脚本任务。我想将它与 Quick Test Professional 11 一起使用。

我在这里以及其他论坛上浏览了许多帖子，但无法找到所需的信息。

好的，这就是我需要做的：

我必须比较两个文本文件并将差异写入第三个文件。这两个文件在某些​​字段中具有几乎相同的内容，即：日期、订单号等。

例如，文件 1 的日期：00/11/1234 和订单号：1111 和文件 2 的日期：11/00/6789 和订单号：2222 那么有什么方法可以忽略这些字段及其值? 有什么方法可以创建我可以添加的忽略列表，在比较过程中将使用它并在比较过程中跳过这些字段？所以我的差异文件不会有这些差异，因为这些值总是不同的。所以我可以在我的结果文件中得到所有其他的差异。

供您参考，这里是示例文件。

到目前为止，我已经比较了这两个文件，但以最简单的方式，我不知道如何忽略这些字段。我想将这些任务作为一个函数，以便我可以在我的函数库中使用它。

**文件-1**

日期：00/11/1234 / 订单号：1111

价格 1：1111.00 美元

价格 2：2222.00 美元

价格 3：1234.00 美元

ABC def GHI kjl 1111

订单号：1111

期限：2年

日期：00/11/1234

**文件-2**

日期：11/00/6789 和订单号：2222

价格 1：1111.00 美元

价格 2：2222.00 美元

价格 3：5678.00 美元

ABC def GHI kjl 1111

订单号：2222

期限：3年

日期：11/00/6789

**结果文件应显示：**

差异：

文件 1 第 4 行：价格 3：$1234.00

文件 2 第 4 行：价格 3：$5678.00

文件 1 第 7 行：期限：2 年

文件 2 第 7 行：期限：3 年

非常感谢您提前。

嗨@Ekkehard.Horner 非常感谢您的帮助和时间以及容忍我愚蠢的问题。事实是，我越是试图理解你的代码，我就越感到困惑。当我将以下代码放入 Quick Test Pro_11 中时，它会抛出语法错误 @“Dim oDiffer : Set oDiffer = New cDiffer.init("C:......" QTP 说“预期语句结束”在“ ...新的 cDiffer" 和 ".init" QTP 在函数 "TrailVersion" 和函数 "GoldVersion" 中都显示了错误

如果您对此有所了解，那就太好了。是否有必要拥有“预期的”文本文件......？因为我不想包含该部分，否则我必须为每次比较创建“预期”文件。

请原谅我愚蠢的问题。

提前致谢。

```
Class cDiffer   
Option Explicit  
Dim goFS : Set goFS = CreateObject("Scripting.FileSystemObject")  
    WScript.Quit TrialVersion() 
    WScript.Quit TinVersion()  
Function TinVersion()   
    WScript.Echo "can't compare files yet."   
    TinVersion = 1 
End Function ' TinVersion  
HERE I'VE COMMENTED TRIALVERSION FUNCTION 
Function TrialVersion()   
Dim oDiffer : Set oDiffer = New cDiffer.init("C:\Documents and Settings\24800\My Documents\PDF comparison\A_30120625003267.TXT", "C:\Documents and Settings\aa24800\My Documents\PDFcomparison\B_30120502002776.TXT", Array("Quote ID:", "Quote Summary for:", "Quote Date:", "Tracking ID (A):", "Tracking ID (Z):", "Tracking ID:")
    ' the differ should be able to return a result - the differences   
    Dim sRes : sRes = oDiffer.diffs()   
    ' check actual vs. expected result   
    Dim sExp : sExp = goFS.OpenTextFile("Expected").ReadAll()  
    WScript.Echo "--------- Res"   
    WScript.Echo sRes   
    If sExp = sRes Then      
        WScript.Echo "ok"      
        ' save result      
        goFS.CreateTextFile("C:\Documents and Settings\aa24800\My Documents\PDF comparison\Result.TXT", True).Write sRes      
        TrialVersion = 0   Else      
        ' show failure      
        WScript.Echo "--------- Exp"      
        WScript.Echo sExp      
        WScript.Echo "not ok"      
        TrialVersion = 1   
    End If 
End Function ' TrialVersion  
'trivial Differ 
'Class cDiffer   
    Dim m_sLFSpec : m_sLFSpec = "C:\Documents and Settings\aa24800\My Documents\PDF comparison\A_30120625003267.TXT"
Dim m_sRFSpec : m_sRFSpec = "C:\Documents and Settings\aa24800\My Documents\PDF comparison\B_30120502002776.TXT"   
    ' "constructor" with params   
    Public Function init(sLFSpec, sRFSpec)     
        Set init  = Me     
        m_sLFSpec = sLFSpec     
        m_sRFSpec = sRFSpec   
    End Function   
    Public Function diffs()     
        diffs = "cDiffer.diffs() not implemented yet."   
    End Function ' diffs 
'End Class ' cDiffer00
'gold Differ 
'Class cDiffer   
'   Private m_sLFSpec   ' file specs   
'   Private m_sRFSpec   
    Private m_sLFiNa    ' file names   
    Private m_sRFiNa   
    Private m_dicLabels ' store and efficiently find selective labels   
    ' "constructor" with params   
    Public Function init(sLFSpec, sRFSpec, aLabels)     
        Set init  = Me     
        m_sLFSpec = sLFSpec     
        m_sRFSpec = sRFSpec     
        m_sLFiNa  = goFS.GetBaseName(sLFSpec)     
        m_sRFiNa  = goFS.GetBaseName(sRFSpec)     
        Set m_dicLabels = CreateObject("Scripting.Dictionary")     
        m_dicLabels.CompareMode = vbTextCompare ' case-insensitive     
        Dim sKey     
        For Each sKey In aLabels         
            m_dicLabels(sKey) = 0     
        Next   
    End Function   
    Public Function diffs()     ' Use ArrayList to collect the results     
        Dim alRes : Set alRes = CreateObject("System.Collections.ArrayList")     
        ' requested title     
        alRes.Add "Differences:"     
        ' open both input files     
        Dim tsL   : Set tsL   = goFS.OpenTextFile(m_sLFSpec)     
        Dim tsR   : Set tsR   = goFS.OpenTextFile(m_sRFSpec)     
        ' loop over lines     
        Do Until tsL.AtEndOfStream        
            Dim sLL : sLL = tsL.ReadLine()        
            Dim sRL        
            ' second file could be shorter        
            If tsR.AtEndOfStream Then           
                alRes.Add "tsR.AtEndOfStream"           
        Exit Do        
            Else           
                sRL = tsR.ReadLine()        
            End If        
            ' no need for work if lines are equal        
            If sLL <> sRL Then           
                If m_dicLabels.Exists(Split(sLL, ":")(0))Then                  
                Dim sLiNo : sLiNo = CStr(tsL.Line - 1)& ":"              
            alRes.Add Join(Array(m_sLFiNa, "Line", sLiNo, sLL))              
            alRes.Add Join(Array(m_sRFiNa, "Line", sLiNo, sRL))           
            End If        
        End If     
    Loop     
    tsL.Close     
    tsR.Close     
    diffs = Join(alRes.ToArray(), vbCrLf) & vbCrLf   
End Function ' diffs 
End Class ' cDiffer

Function GoldVersion()   
   ' the differ should know about the files to compare   
   ' and the info labels to select   
   Dim oDiffer : Set oDiffer = New cDiffer.init("C:\Documents and Settings\aa24800\My Documents\PDF comparison\A_30120625003267.TXT", "C:\Documents and Settings\aa24800\My Documents\PDF comparison\B_30120502002776.TXT", Array("Quote ID:", "Quote Summary for:", "Quote Date:", "Tracking ID (A):", "Tracking ID (Z):", "Tracking ID:")
   ' the differ should be able to return a result - the differences    
   Dim sRes : sRes = oDiffer.diffs()   
   ' check actual vs. expected result   
   Dim sExp : sExp = goFS.OpenTextFile("Expected").ReadAll()   
   WScript.Echo "--------- Res"   
   WScript.Echo sRes   
    If sExp = sRes Then      
       WScript.Echo "ok"      
       ' save result      
       goFS.CreateTextFile("C:\Documents and Settings\aa24800\My Documents\PDF comparison\Result.TXT", True).Write sRes      
       GoldVersion = 0   Else      
       ' show failure      
       WScript.Echo "--------- Exp"      
       WScript.Echo sExp      
       WScript.Echo "not ok"      
       GoldVersion = 1   
    End If 
End Function ' GoldVersion 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T17:55:11.623

如果您是 VBScript 新手，您可能会从解决当前问题中获益，从而帮助您解决下一个问题。

从放置 SelFileComp.vbs 开始：

```
'' SelFileComp.vbs - selective file compare

Option Explicit

Dim goFS : Set goFS = CreateObject("Scripting.FileSystemObject")

WScript.Quit TinVersion()

Function TinVersion()
  WScript.Echo "can't compare files yet."
  TinVersion = 1
End Function ' TinVersion 
```

进入一些合适的目录。添加您的输入和预期结果文件。启动 SelFileComp.vbs：

```
cscript SelFileComp.vbs
can't compare files yet.
echo %ErrorLevel%
1 
```

添加（并调用）一个 TrialVersion，它准备并使用（微不足道的）Differ 对象在适用于健全性检查实现的骨架中进行繁重的工作：

```
'' SelFileComp.vbs - selective file compare

Option Explicit

Dim goFS : Set goFS = CreateObject("Scripting.FileSystemObject")

WScript.Quit TrialVersion()
WScript.Quit TinVersion()

Function TinVersion()
  WScript.Echo "can't compare files yet."
  TinVersion = 1
End Function ' TinVersion

Function TrialVersion()
  ' the differ should know about the files to compare
  ' we'll worry about the selection later
  Dim oDiffer : Set oDiffer = New cDiffer.init( _
     "File-1", "File-2" _
  )
  ' the differ should be able to return a result - the differences
  Dim sRes : sRes = oDiffer.diffs()
  ' check actual vs. expected result
  Dim sExp : sExp = goFS.OpenTextFile("Expected").ReadAll()
  WScript.Echo "--------- Res"
  WScript.Echo sRes
  If sExp = sRes Then
     WScript.Echo "ok"
     ' save result
     goFS.CreateTextFile("..\data\Result", True).Write sRes
     TrialVersion = 0
  Else
     ' show failure
     WScript.Echo "--------- Exp"
     WScript.Echo sExp
     WScript.Echo "not ok"
     TrialVersion = 1
  End If
End Function ' TrialVersion

' trivial Differ
Class cDiffer
  Private m_sLFSpec
  Private m_sRFSpec
  ' "constructor" with params
  Public Function init(sLFSpec, sRFSpec)
    Set init  = Me
    m_sLFSpec = sLFSpec
    m_sRFSpec = sRFSpec
  End Function
  Public Function diffs()
    diffs = "cDiffer.diffs() not implemented yet."
  End Function ' diffs
End Class ' cDiffer00 
```

输出：

```
cscript SelFileComp.vbs
--------- Res
cDiffer.diffs() not implemented yet.
--------- Exp
Differences:
File-1 Line 4: Price 3: $1234.00
File-2 Line 4: Price 3: $5678.00
File-1 Line 7: Term: 2-Year
File-2 Line 7: Term: 3-Year

not ok

echo %ErrorLevel%
1 
```

如果你然后重命名平凡的 cDiffer

```
' trivial Differ
Class cDiffer00 
```

您可以重新使用名称（以及 TrialVersion() 中的代码）来提出一个 cDiffer，它至少可以进行一些比较：

```
' simple Differ
Class cDiffer
  Private m_sLFSpec
  Private m_sRFSpec
  ' "constructor" with params
  Public Function init(sLFSpec, sRFSpec)
    Set init  = Me
    m_sLFSpec = sLFSpec
    m_sRFSpec = sRFSpec
  End Function
  Public Function diffs()
    ' Use ArrayList to collect the results
    Dim alRes : Set alRes = CreateObject("System.Collections.ArrayList")
    ' requested title
    alRes.Add "Differences:"
    ' open both input files
    Dim tsL   : Set tsL   = goFS.OpenTextFile(m_sLFSpec)
    Dim tsR   : Set tsR   = goFS.OpenTextFile(m_sRFSpec)
    ' loop over lines
    Do Until tsL.AtEndOfStream
       Dim sLL : sLL = tsL.ReadLine()
       Dim sRL
       ' second file could be shorter
       If tsR.AtEndOfStream Then
          alRes.Add "tsR.AtEndOfStream"
          Exit Do
       Else
          sRL = tsR.ReadLine()
       End If
       ' no need for work if lines are equal
       If sLL <> sRL Then
          alRes.Add "??? " & sLL
          alRes.Add "??? " & sRL
       End If
    Loop
    tsL.Close
    tsR.Close
    diffs = Join(alRes.ToArray(), vbCrLf)
  End Function ' diffs
End Class ' cDiffer00 
```

输出：

```
cscript SelFileComp.vbs
--------- Res
Differences:
??? Date: 00/11/1234 / Order no: 1111
??? Date: 11/00/6789 and Order no: 2222
??? Price 3: $1234.00
??? Price 3: $5678.00
??? Order no: 1111
??? Order no: 2222
??? Term: 2-Year
??? Term: 3-Year
??? Date: 00/11/1234
??? Date: 11/00/6789
--------- Exp
Differences:
File-1 Line 4: Price 3: $1234.00
File-2 Line 4: Price 3: $5678.00
File-1 Line 7: Term: 2-Year
File-2 Line 7: Term: 3-Year

not ok 
```

这清楚地显示了哪些子任务仍需完成：

1.  选择相关差异
2.  输出格式

让我们保持乐观，添加并调用 GoldVersion()

```
Function GoldVersion()
  ' the differ should know about the files to compare
  ' and the info labels to select
  Dim oDiffer : Set oDiffer = New cDiffer.init( _
      "File-1", "File-2" _
    , Array("Price 3", "Term") _
  )
  ' the differ should be able to return a result - the differences
  Dim sRes : sRes = oDiffer.diffs()
  ' check actual vs. expected result
  Dim sExp : sExp = goFS.OpenTextFile("Expected").ReadAll()
  WScript.Echo "--------- Res"
  WScript.Echo sRes
  If sExp = sRes Then
     WScript.Echo "ok"
     ' save result
     goFS.CreateTextFile("..\data\Result", True).Write sRes
     GoldVersion = 0
  Else
     ' show failure
     WScript.Echo "--------- Exp"
     WScript.Echo sExp
     WScript.Echo "not ok"
     GoldVersion = 1
  End If
End Function ' GoldVersion 
```

使用更好的 cDiffer：

```
' gold Differ
Class cDiffer
  Private m_sLFSpec   ' file specs
  Private m_sRFSpec
  Private m_sLFiNa    ' file names
  Private m_sRFiNa
  Private m_dicLabels ' store and efficiently find selective labels
  ' "constructor" with params
  Public Function init(sLFSpec, sRFSpec, aLabels)
    Set init  = Me
    m_sLFSpec = sLFSpec
    m_sRFSpec = sRFSpec
    m_sLFiNa  = goFS.GetBaseName(sLFSpec)
    m_sRFiNa  = goFS.GetBaseName(sRFSpec)
    Set m_dicLabels = CreateObject("Scripting.Dictionary")
    m_dicLabels.CompareMode = vbTextCompare ' case-insensitive
    Dim sKey
    For Each sKey In aLabels
        m_dicLabels(sKey) = 0
    Next
  End Function
  Public Function diffs()
    ' Use ArrayList to collect the results
    Dim alRes : Set alRes = CreateObject("System.Collections.ArrayList")
    ' requested title
    alRes.Add "Differences:"
    ' open both input files
    Dim tsL   : Set tsL   = goFS.OpenTextFile(m_sLFSpec)
    Dim tsR   : Set tsR   = goFS.OpenTextFile(m_sRFSpec)
    ' loop over lines
    Do Until tsL.AtEndOfStream
       Dim sLL : sLL = tsL.ReadLine()
       Dim sRL
       ' second file could be shorter
       If tsR.AtEndOfStream Then
          alRes.Add "tsR.AtEndOfStream"
          Exit Do
       Else
          sRL = tsR.ReadLine()
       End If
       ' no need for work if lines are equal
       If sLL <> sRL Then
          If m_dicLabels.Exists(Split(sLL, ":")(0)) Then
             alRes.Add Join(Array(m_sLFiNa, "Line", sLL))
             alRes.Add Join(Array(m_sRFiNa, "Line", sRL))
          End If
       End If
    Loop
    tsL.Close
    tsR.Close
    diffs = Join(alRes.ToArray(), vbCrLf)
  End Function ' diffs
End Class ' cDiffer 
```

输出：

```
cscript SelFileComp.vbs
--------- Res
Differences:
File-1 Line Price 3: $1234.00
File-2 Line Price 3: $5678.00
File-1 Line Term: 2-Year
File-2 Line Term: 3-Year
--------- Exp
Differences:
File-1 Line 4: Price 3: $1234.00
File-2 Line 4: Price 3: $5678.00
File-1 Line 7: Term: 2-Year
File-2 Line 7: Term: 3-Year

not ok 
```

选择完成，格式仍然不好。改善输出：

```
 If sLL <> sRL Then
          If m_dicLabels.Exists(Split(sLL, ":")(0)) Then
'            alRes.Add Join(Array(m_sLFiNa, "Line", sLL))
'            alRes.Add Join(Array(m_sRFiNa, "Line", sRL))
             Dim sLiNo : sLiNo = CStr(tsL.Line - 1) & ":"
             alRes.Add Join(Array(m_sLFiNa, "Line", sLiNo, sLL))
             alRes.Add Join(Array(m_sRFiNa, "Line", sLiNo, sRL))
          End If
       End If 
```

添加尾随 vbCrLf：

```
'   diffs = Join(alRes.ToArray(), vbCrLf)
    diffs = Join(alRes.ToArray(), vbCrLf) & vbCrLf 
```

最终输出：

```
cscript SelFileComp.vbs
--------- Res
Differences:
File-1 Line 4: Price 3: $1234.00
File-2 Line 4: Price 3: $5678.00
File-1 Line 7: Term: 2-Year
File-2 Line 7: Term: 3-Year

ok

echo %ErrorLevel%
0 
```

下一个问题，拜托！

**更新 A（wrt 文件规格/文件名）**

将 File-1 移动/复制到 ..\data\，更改

```
 Dim oDiffer : Set oDiffer = New cDiffer.init( _
      "File-1", "File-2" _
    , Array("Price 3", "Term") _
  ) 
```

到

```
 Dim oDiffer : Set oDiffer = New cDiffer.init( _
      "..\data\File-1", "File-2" _
    , Array("Price 3", "Term") _
  ) 
```

结果将是相同的，因为 cDiffer 使用

```
m_sLFSpec = sLFSpec
  to store the (full) path
m_sLFiNa  = goFS.GetBaseName(sLFSpec)
  to extract the file name for output formatting
Dim tsL   : Set tsL   = goFS.OpenTextFile(m_sLFSpec)
  to open the file 
```

**更新 B（wrt 字典）**

[字典](http://msdn.microsoft.com/en-us/library/x4k5wbx4%28v=vs.84%29.aspx)是在唯一键下存储元素的集合（与数组相反，数组可以通过数字访问其项目）。通过使用标签作为字典的键来查找，diffs() 函数可以有效地（看起来，没有循环！）检查该行的第一部分是否达到：

```
 Split(sLL, ":")(0) 
```

包含在字典中

```
 If m_dicLabels.Exists(Split(sLL, ":")(0)) Then 
```

**更新 C（wrt 类/构造函数）**

类是（一组相似的）对象的定义/规范，它是保存/组合数据（成员）和功能（方法）的**变量**。cDiffer 是一个定义对象的类，它“知道”所有关于要比较的文件和要查找的标签（成员变量，如 m_sLSpec），并且可以“进行”比较（方法/函数，如 diffs()）。New 语句用于根据规范构造/创建对象：

```
 Dim oDiffer : Set oDiffer = New cDiffer 
```

New 创建的对象是 Empty 的，对实际用途毫无用处；您可以实现 Class_Initialize() Sub（在 Class ... End Class 块中），但是由于该代码将用于该类的**所有**对象，因此收益很小。

如果您查看文档中[Class](http://msdn.microsoft.com/en-us/library/4ah5852c%28v=vs.84%29)语句的示例，您会意识到，无参数的“构造函数”（Class_Initialize）对于不按行/小时付费的程序员几乎没有用处。样板代码

```
 Private Sub Class_Initialize
      m_CustomerName = ""
      m_OrderCount = 0
      ... ad nauseam: set all other member data to 'nix'
   End Sub 
```

特别恶心，因为VBScript

*   只要您调用 New，就会自动执行相当于空的 Class_Initialize
*   自动将所有变量初始化为 Empty 并且 Empty 将
    适用于字符串和数字

补救方法是忘记Class_Initialize（特殊情况除外），在一个或多个上投入一些精力

```
 Public Function initXXX(p1, p2, ... pn)
    Set initXXX = Me  ' return VBScript's this to caller
    ... use p1 ... pn to initialize member data to useful values
  End Function 
```

# css - 如何使用 display:inline-block 消除 div 之间的间距？

> ID：12302046
> 
> 赞同：1
> 
> 时间：2012-09-06T14:10:28.027
> 
> 标签：css

我试图对 div 做一些水平布局，但在 div 之后得到一个不需要的“边距”。 [http://jsfiddle.net/Yzxpu/](http://jsfiddle.net/Yzxpu/)

当我更改标记并删除空格或换行符时，水平间距问题得到解决，但 div 下仍然存在垂直间距。而且标记看起来很糟糕。 [http://jsfiddle.net/Yzxpu/1/](http://jsfiddle.net/Yzxpu/1/)

我不想看到任何红色（除了最右边，它会随着右边距 % 的设置而固定）

我正在使用最新的 Chrome 作为网络浏览器。

![在此处输入图像描述](../Images/508e99c93f063aa49c3441652f96ec5f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:15:31.430

通过添加：保证金：0；和填充：0；对于 CSS，它修复了垂直问题，因为浏览器添加了自己的默认设置，建议您使用 reset.css 表将所有内容设置回 0。

修复的小提琴：http: [//jsfiddle.net/ynemx/](http://jsfiddle.net/ynemx/) 重置 CSS： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:16:56.943

试试这个

[http://jsfiddle.net/Yzxpu/10/](http://jsfiddle.net/Yzxpu/10/)

改变你的 CSS

```
#t-newsAndInfo{background-color:red; overflow:hidden}

#t-newsAndInfo div {float:left;} 
```

删除`"DISPLAY"`_`#t-newsAndInfo div`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:19:00.267

您可以尝试浮动：离开内部 div：

[http://jsfiddle.net/Yzxpu/15/](http://jsfiddle.net/Yzxpu/15/)

```
#t-newsAndInfo{background-color:red; overflow:hidden;}

#t-newsAndInfo div {
    background-color:lightyellow;
    display: inline-block;
    float:left;
    position: relative;
    width: 31.11111111111111%;/*((900-(30+30))/3)/900*/
    height: 100px;
    text-align: center;
    /*margin-right: 3.111111111%;*/
    /*margin-right: 2.99999999999%;*/
} 
```

# macos - 有没有什么方法可以在 Mac OS X 上不用鼠标来创建类？

> ID：12302049
> 
> 赞同：4
> 
> 时间：2012-09-06T14:10:35.000
> 
> 标签：macos, intellij-idea, keyboard-shortcuts, shortcut

我只是在 Mac OS X Lion 上工作，并且对 IntelliJ IDEA 完全陌生。有没有什么简单的方法可以在没有鼠标帮助的情况下只用键盘创建一个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-25T18:22:00.477

我这样做的方式是

1.  在导航器中导航到正确的 Java 源目录。我通过打开模块中已经存在的类来做到这一点（`⌘</kbd>-`O`), then use **Select Target**, **Project View** (`option`-`F1`, `1`) to jump to the right place in the Navigator.`

[![在此处输入图像描述](../Images/b15c63018b4d91f0aa03cd4e1be921bd.png)](https://i.stack.imgur.com/bpldA.png)

2.  然后**生成代码**命令，两者`⌘</kbd>-`N` (`Command`-`N`) and `control`-`option`-`N` in the **Mac OS X 10.5+** keymap, will open the **New** pop up where you can type `J`, `A`... to get **Java**`

[![在此处输入图像描述](../Images/d2d6b38853d7f902fb465ad0f93cd7f0.png)](https://i.stack.imgur.com/Vy2Vo.png)

# iphone - 选择点倒置时 CorePlot 显示标注

> ID：12302051
> 
> 赞同：1
> 
> 时间：2012-09-06T14:10:39.103
> 
> 标签：iphone, ios, graph, uikit, core-plot

我在我的 CPTScatterPlotDelegate 中实现了以下代码来显示标注气泡：

```
-(void)scatterPlot:(CPTScatterPlot *)plot plotSymbolWasSelectedAtRecordIndex:(NSUInteger)index
{
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)plot.plotSpace;
    CPTGraph *graph = plot.graph;
    int yIdent = ((NSString*)plot.identifier).intValue;

    NSNumber *yVal = [[_dataRange yForIndex:index] objectAtIndex:yIdent-1];
    NSNumber *xVal = [_dataRange xForIndex:index];
    double doublePrecisionPlotPoint[2];//[x,y]
    doublePrecisionPlotPoint[0] = xVal.doubleValue;
    doublePrecisionPlotPoint[1] = yVal.doubleValue;
    CGPoint touchedPoint = [graph.defaultPlotSpace plotAreaViewPointForDoublePrecisionPlotPoint:doublePrecisionPlotPoint];

    if(_annotation)
        [_annotation dismissCalloutAnimated:YES];
    _annotation = [[SMCalloutView alloc] init];
    //todo appropriate units
    _annotation.title = [NSString stringWithFormat:@"%.2f kg", yVal.doubleValue];
    [_annotation presentCalloutFromRect:CGRectMake(touchedPoint.x, touchedPoint.y, 1, 1) inView:_view constrainedToView:_view permittedArrowDirections:SMCalloutArrowDirectionAny animated:YES];
} 
```

_dataRange 只是一个保存我的数据的自定义类，_annotation 是我标注的实例。

问题是我无法让标注的位置正常工作。如果我将 _view 设置为 ViewController.view 我会得到正确的标注，但在错误的位置，如下所示：

![黄色的点击点](../Images/0fbcbfdd5c95f3dc889761e9a3ac892f.png)

如果我将 _view 设置为 CPTGraphHostingView 而不是我得到正确的点，但标注似乎像这样翻转：

![在此处输入图像描述](../Images/1a162a225a14ac56d41efadde59f49bc.png)

如何获得正确的绘图点坐标来显示标注？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T22:34:28.930

您不应该向宿主视图添加任何子视图——它在 iOS 上使用翻转变换，因此 Core Plot 可以在 iOS 和 Mac 之间共享绘图代码。

使用`-convertPoint:toView:`or`-convertPoint:fromView:`方法将`touchedPoint`宿主视图的坐标系转换为`ViewController.view`坐标系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T03:50:06.847

我已经`CPTGraphHostingView`对一些图表进行了子类化，因此作为替代方案，我发现您添加到其中的任何子视图都应该执行以下操作：

```
subview.transform = CGAffineTransform(1.0, -1.0) 
```

这不会改变坐标系为 (0,0)-bottom-left 的事实，但您添加的 UIView 将在渲染时以正确的方式向上绘制。仍然使用[Eric's Answer](https://stackoverflow.com/a/12309408/622276 "埃里克的回答")在坐标系之间进行转换，但对于发现自己在这里尝试添加子视图的任何人，`CPTGraphHostingView`我希望这会有所帮助。

# php - 连接数组行php

> ID：12302053
> 
> 赞同：0
> 
> 时间：2012-09-06T14:10:43.163
> 
> 标签：php, multidimensional-array

这可能是一个愚蠢的问题，所以如果是这样，请放轻松。

我有一系列返回多维数组的查询（MySQL）。

然后，我使用这些数组项在 foreach 循环中的字符串中填充变量。

然后我需要这个字符串来填充一个 javascript 图表，以便数据的格式是完美的。这个想法适用于 1 个多维数组。

然而。要制作多个图表（例如比较折线图），我需要在同一行中表示所有数据。

所以我需要做的是如果可能的话将行合并到数组的行，而不是将其添加到末尾。

我会告诉你我的工作：

```
foreach ($graph_month as $month) :
        $first .= ' { year: "'.$month['month'].'",';
        endforeach;

        foreach ($graph_data1 as $data) :
        $second1 .= ' "'.$data['title'].'": '.$data['totalValue'].' ';
        endforeach;

        foreach ($graph_data2 as $data) :
        $second2 .= ' "'.$data['title'].'": '.$data['totalValue'].' ';
        endforeach;

        foreach ($graph_data3 as $data) :
        $second3 .= ' "'.$data['title'].'": '.$data['totalValue'].' ';
        endforeach;

        foreach ($graph_data4 as $data) :
        $second4 .= ' "'.$data['title'].'": '.$data['totalValue'].' ';
        endforeach;

        foreach ($graph_data5 as $data) :
        $second5 .= ' "'.$data['title'].'": '.$data['totalValue'].' ';
        endforeach; 
```

所以每个 foreach 都填充了一小部分所需的 javascript，但是我需要能够在彼此的右侧连接所有这些行。

例如

a`foreach`可以产生：

`$first.$second1.$second2.$second3.$second4.$second5`

这可能吗，是否可以将 [i] 和 [i++] 添加到每个变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:24:22.910

首先，您可以`foreach`通过生成如下变量来消除多余的行：

```
foreach ($graph_month as $month):

    for ($i = 1; $i <=5; $i++) {
        //$graph_data$i becomes $graph_data1, then $graph_data2 etc.
        foreach ($graph_data$i as $data) :
            $variable .= ' "'.$data['title'].'": '.$data['totalValue'].' ';
        endforeach;
    }

// and so on
endforeach; 
```

根据您的要求，此脚本的结果是以下形状：

`{year: month, title: value title: value`

我们可以像这样稍微调整一下：

```
foreach ($graph_month as $month):

    $variable .= ' { year: "'.$month['month'].'",';

    for ($i = 1; $i <=5; $i++) {
        //$graph_data$i becomes $graph_data1, then $graph_data2 etc.
        foreach ($graph_data$i as $data) :
            $variable .= ' "'.$data['title'].'": '.$data['totalValue'].' ';
            if ($i != 5) {
                $variable .= ", ";
            }
        endforeach;
    }

    $variable .= 

// and so on
endforeach; 
```

它变成：

`{ year: month, 'title': 'value', 'title': 'value', ... }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:14:32.623

您可以放置​​相同的变量：

```
foreach ($graph_month as $month) {
    $variable .= ' { year: "'.$month['month'].'",';
}

foreach ($graph_data1 as $data) {
    $variable .= ' "'.$data['title'].'": '.$data['totalValue'].' ';
}

foreach ($graph_data2 as $data) {
    $variable .= ' "'.$data['title'].'": '.$data['totalValue'].' ';
}

// and so on 
```

它们将在每个循环上连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:17:25.180

你可以像这样使用for循环......

```
<?php 

for($i=0;$i<count($graph_month);$i++)
{
    $all_values1 = $graph_data1[$i]['title'] . $graph_data1[$i]['totalValue'];
    $all_values2 = $graph_data2[$i]['title'] . $graph_data2[$i]['totalValue'];
    $all_values3 = $graph_data3[$i]['title'] . $graph_data3[$i]['totalValue'];
    $all_values4 = $graph_data4[$i]['title'] . $graph_data4[$i]['totalValue'];
    $all_values5 = $graph_data5[$i]['title'] . $graph_data5[$i]['totalValue'];
} 
```

?>

无需运行也可以 for 循环。执行需要一些额外的时间...

试试这样......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T14:19:09.310

使用空字符串

```
$string = ''; 
```

然后将此变量与每个 for 循环一起使用

```
foreach($array1 as $value){
$string.= $value['some_data'];
}

foreach($array2 as $value){
$string.= $value['some_data'];
} 
```

使用这个 $string 作为最终结果

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T14:27:22.433

让 PHP 担心 JSON 格式只是正确构建对象。

```
<?php

$tojson = array(
     0 => array(),
     1 => array(),
     2 => array(),
     3 => array(),
     4 => array(),
     5 => array()
);

foreach($graph_month as $month)
    $tojson[0]['year'] = $month['month'];

foreach($graph_data1 as $data)
    $tojson[1][$data['title']] = $data['totalValue'];

foreach($graph_data2 as $data)
    $tojson[2][$data['title']] = $data['totalValue'];

foreach($graph_data3 as $data)
    $tojson[3][$data['title']] = $data['totalValue'];

foreach($graph_data4 as $data)
    $tojson[4][$data['title']] = $data['totalValue'];

foreach($graph_data5 as $data)
    $tojson[5][$data['title']] = $data['totalValue'];

$json = json_encode($tojson);

?> 
```

# c++ - C++11：延迟初始化的安全双重检查锁定。可能的？

> ID：12302057
> 
> 赞同：13
> 
> 时间：2012-09-06T14:10:48.853
> 
> 标签：c++, c++11, thread-safety, double-checked-locking

我已经阅读了许多考虑线程安全双重检查锁定的问题（对于单例或惰性初始化）。在某些线程中，答案是模式完全被破坏，其他人提出了解决方案。

所以我的问题是：有没有办法在 C++ 中编写一个完全线程安全的双重检查锁定模式？如果是这样，它看起来如何。

如果这使事情变得更容易，我们可以假设 C++11。据我所知，C++11 改进了可以产生所需改进的内存模型。

我确实知道在 Java 中可以通过使仔细检查保护变量 volatile 来实现。由于 C++11 从 Java 中借用了大部分内存模型，所以我认为这是可能的，但是如何呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-06T14:28:03.290

只需对延迟初始化的 Singleton 使用静态局部变量，如下所示：

```
MySingleton* GetInstance() {
  static MySingleton instance;
  return &instance; 
} 
```

(C++11) 标准已经保证静态变量以线程安全的方式进行初始化，并且看起来它的实现至少与您自己编写的任何东西一样健壮和高性能。

初始化的线程安全可以在 (C++11) 标准的 §6.7.4 中找到：

> 如果在变量初始化时控制同时进入声明，则并发执行将等待初始化完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-19T04:09:11.360

由于您想查看有效的 DCLP C++11 实现，这里有一个。

该行为是完全线程安全的，并且与`GetInstance()`Grizzly 的答案相同。

```
std::mutex mtx;
std::atomic<MySingleton *> instance_p{nullptr};

MySingleton* GetInstance()
{
    auto *p = instance_p.load(std::memory_order_acquire);

    if (!p)
    {
        std::lock_guard<std::mutex> lck{mtx};

        p = instance_p.load(std::memory_order_relaxed);
        if (!p)
        {
            p = new MySingleton;
            instance_p.store(p, std::memory_order_release);
        }
    }

    return p;
} 
```

# android - 安卓添加联系人

> ID：12302061
> 
> 赞同：0
> 
> 时间：2012-09-06T14:10:55.187
> 
> 标签：android

我正在尝试编写一个小应用程序来显示联系人并将其添加到 android 电话簿。我以这种方式添加联系人：

```
ContentValues cv = new ContentValues();
EditText te1 = (EditText)findViewById(R.id.EditText1);
EditText te2 = (EditText)findViewById(R.id.EditText2);
cv.put(ContactsContract.Data.RAW_CONTACT_ID, 400);
cv.put(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
cv.put(ContactsContract.CommonDataKinds.Phone.NUMBER, te2.getText().toString());
cv.put(ContactsContract.CommonDataKinds.Phone.TYPE, ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE);
cv.put(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME, te1.getText().toString());
ContentResolver contentResolver = getContentResolver();
contentResolver.insert(ContactsContract.Data.CONTENT_URI, cv);
setContentView(R.layout.main); 
```

代码成功执行，但看起来不起作用。谁能指出我的错误？日志输出：

```
I/Database(14340): sqlite returned: error code = 1, msg = table data has no column named display_name
E/Database(14340): Error inserting display_name=jsmith data1=57457644 data4=44675475 data2=2 mimetype_id=5 raw_contact_id=400
E/Database(14340): android.database.sqlite.SQLiteException: table data has no column named display_name: , while compiling: INSERT INTO data(display_name, data1, data4, data2, mimetype_id, raw_contact_id) VALUES(?, ?, ?, ?, ?, ?);
E/Database(14340):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
E/Database(14340):  at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
E/Database(14340):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
E/Database(14340):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
E/Database(14340):  at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:41)
E/Database(14340):  at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1157)
E/Database(14340):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1577)
E/Database(14340):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1434)
E/Database(14340):  at com.android.providers.contacts.ContactsProvider2$DataRowHandler.insert(ContactsProvider2.java:1032)
E/Database(14340):  at com.android.providers.contacts.ContactsProvider2$CommonDataRowHandler.insert(ContactsProvider2.java:1388)
E/Database(14340):  at com.android.providers.contacts.ContactsProvider2$PhoneDataRowHandler.insert(ContactsProvider2.java:1638)
E/Database(14340):  at com.android.providers.contacts.ContactsProvider2.insertData(ContactsProvider2.java:2649)
E/Database(14340):  at com.android.providers.contacts.ContactsProvider2.insertInTransaction(ContactsProvider2.java:2478)
E/Database(14340):  at com.android.providers.contacts.SemcContactsProvider2.insertInTransaction(SemcContactsProvider2.java:851)
E/Database(14340):  at com.android.providers.contacts.SQLiteContentProvider.insert(SQLiteContentProvider.java:95)
E/Database(14340):  at com.android.providers.contacts.ContactsProvider2.insert(ContactsProvider2.java:2294)
E/Database(14340):  at com.android.providers.contacts.SemcContactsProvider2.insert(SemcContactsProvider2.java:778)
E/Database(14340):  at android.content.ContentProvider$Transport.insert(ContentProvider.java:198)
E/Database(14340):  at android.content.ContentProviderNative.onTransact(ContentProviderNative.java:146)
E/Database(14340):  at android.os.Binder.execTransact(Binder.java:324)
E/Database(14340):  at dalvik.system.NativeStart.run(Native Method)
E/Database(14340): Error inserting min_match=4467547 normalized_number=44675475 data_id=-1 raw_contact_id=400 using INSERT OR REPLACE  INTO phone_lookup(min_match, normalized_number, data_id, raw_contact_id) VALUES(?, ?, ?, ?); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:22:51.803

您正在访问 EditText 没有在开头显示导致您出现问题所以以这些方式修改您的代码--->

```
setContentView(R.layout.main);// put in the beginning of code
ContentValues cv = new ContentValues();
EditText te1 = (EditText)findViewById(R.id.EditText1);
EditText te2 = (EditText)findViewById(R.id.EditText2);
cv.put(ContactsContract.Data.RAW_CONTACT_ID, 400);
cv.put(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
cv.put(ContactsContract.CommonDataKinds.Phone.NUMBER, te2.getText().toString());
cv.put(ContactsContract.CommonDataKinds.Phone.TYPE,ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE);
cv.put(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME, te1.getText().toString());
ContentResolver contentResolver = getContentResolver();
contentResolver.insert(ContactsContract.Data.CONTENT_URI, cv); 
```

# iphone - 将文本分配给 UITextViews

> ID：12302064
> 
> 赞同：0
> 
> 时间：2012-09-06T14:11:04.100
> 
> 标签：iphone, ios5

我有长文本和 2 个文本视图。我需要将此文本插入 2 个文本视图（它们没有滚动）。这就像书页（第一页是一个 textView，第二页是另一个 textView）。所以，问题是：如何确定我需要插入第一个 textView 的文本长度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:27:51.810

您可以将完整文本设置为第一个 textView，计算可见文本范围并将剩余文本设置为第二个 textView。另一种方法是手动计算将在第一个 textView 中可见的文本范围，但是它需要丑陋的递归`sizeWithFont`，我不敢相信它这么快，我会遵循第一种方式。

请参阅此[答案](https://stackoverflow.com/a/11842530/792677)以了解如何获取可见文本范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:30:49.183

首先弄清楚每行的长度、字体以及可以在每个文本视图中填充多少行。使用以下来执行此操作

```
 CGFloat stringWidth = [text sizeWithFont:[UIFont fontWithName:your_textview_font_name size:your_textview_font_size]].width; 
```

然后使用[子字符串](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)操作。

做到这一点应该不难！

# r - 一个图表中的条形图和折线图，在 ggplot2 下带有图例

> ID：12302070
> 
> 赞同：3
> 
> 时间：2012-09-06T14:11:13.870
> 
> 标签：r, ggplot2

我想将两个独立但相关的系列的条形图和线形图放在同一张图表上，并带有一个图例（条形图是季度增长，线图是年度增长）。

我目前使用宽格式的data.frame和这样的代码来做这件事：

```
p <- ggplot() +
    geom_bar(df, aes(x=Date, y=quarterly), colour='blue') +
    geom_line(df, aes(x=Date, y=annual), colour='red') 
```

但我不知道如何添加一个图例，它有一条标有“年度增长”的红线；和一个标有“季度增长”的蓝色方块。

或者，我无法弄清楚如何为具有长格式 data.frame 的不同系列提供不同的几何图形。

更新：

下面的示例代码让我找到了解决方案的一部分，但有一个非常丑陋的重复图例。仍在寻找一个完整的解决方案......这种方法基于将数据放在长格式中，然后绘制数据的子集......

```
library(ggplot2)
library(reshape)
library(plyr)
library(scales)

### --- make a fake data set
x <- rep(as.Date('2012-01-01'), 24) + (1:24)*30
ybar <- 1:24
yline <- ybar + 1

df <- data.frame(x=x, ybar=ybar, yline=yline)
molten <- melt(df, id.vars='x', measure.vars=c('ybar', 'yline'))
molten$line <- ifelse(molten$variable=='yline', TRUE, FALSE)
molten$bar <- ifelse(molten$variable=='ybar', TRUE, FALSE)

### --- subset the data set
df.line  <- subset(molten, line==TRUE)
df.bar   <- subset(molten, bar==TRUE)

### --- plot it
p <- ggplot() +
geom_bar(data=df.bar, mapping=aes(x=x, y=value, fill=variable, colour=variable),
    stat='identity', position='dodge') +
geom_line(data=df.line, mapping=aes(x=x, y=value, colour=variable)) +

opts(title="Test Plot", legend.position="right") 

ggsave(p, width=5, height=3, filename='plot.png', dpi=150) 
```

还有一个示例情节......

![在此处输入图像描述](../Images/43331fb9121551e86bd3c83a6bdf0d82.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T04:38:40.570

通过使用`subset`geoms 的参数。

```
> x=1:10;df=data.frame(x=x,y=x+1,z=x+2)
> ggplot(melt(df),
    aes(x,value,color=variable,fill=variable))+
  geom_bar(subset=.(variable=="y"),stat="identity")+
  geom_line(subset=.(variable=="z")) 
```

![在此处输入图像描述](../Images/ccc7207158b540ded416bd9bd3a07056.png)

# sse - 英特尔 C 编译器 (icc) 中的错误自动向量化

> ID：12302071
> 
> 赞同：1
> 
> 时间：2012-09-06T14:11:20.210
> 
> 标签：sse, vectorization, simd, icc, papi

我需要用 SSE 对程序中的一些巨大循环进行矢量化。为了节省时间，我决定让ICC来处理。为此，我准备好数据，考虑到对齐，并使用编译器指令 `#pragma simd`, `#pragma aligned`, `#pragma ivdep`. 当使用几个`-vec-report`选项编译时，编译器告诉我循环是矢量化的。快速查看编译器生成的程序集似乎证实了这一点，因为您可以找到大量适用于压缩单精度操作数（串行代码处理程序*浮点*操作数中的所有操作）的矢量指令。

问题是，当我使用 PAPI 进行硬件计数器时，我得到的 FP 操作的数量（`PAPI_FP_INS`和`PAPI_FP_OPS`）在自动矢量化代码和原始代码中几乎相同，而在自动矢量化代码中预期会明显减少. 更重要的是，手动矢量化是一个相关问题的简化问题，在这种情况下，我得到的 FP 操作减少了 3 倍。

有没有人经历过类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-25T13:58:01.070

溢出可能会破坏矢量化的优势，因此 64 位模式可能会比 32 位模式显着提高。此外，icc 可能会版本化循环，即使存在矢量版本，您也可能会遇到标量版本。去年或第二年发布的 icc 版本修复了这方面的一些问题。

# c# - asp.net mvc 和 webforms 使用两个按钮

> ID：12302074
> 
> 赞同：-1
> 
> 时间：2012-09-06T14:11:26.967
> 
> 标签：c#, model-view-controller, events, webforms

我的问题是我正在尝试对 mvc webforms 做一些事情

```
page name = addition.aspx 
event = button1_click
int numberOne = convert.toint32(textbox1.text);
int numberTwo = convert.toint32(textbox2.text);
int myResult = numberOne + numberTwo;
label1.text = myResult.Tostring(); 
```

.

```
page name = addition.aspx (same page) 
event = button2_click
int numberthree = convert.toint32(textbox3.text);
int numberfour = convert.toint32(textbox4.text);
int myResult2 = numberOne + numberTwo;
label2.text = myResult2.Tostring(); 
```

我的问题是我想为 MVC 做同样的事情（事件在哪里......我想我必须在页面发布和页面获取上进行转换......我错了）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:19:58.060

您没有 MVC 的服务器端控件。如果你想让两个按钮触发不同的事件，你有几个选择。JQuery 默认包含在您的 MVC 项目中，并且非常流行。因此，我将向您展示一些示例。

创建两个提交按钮以在提交前切换表单操作。

使用 jquery 的示例：

**HTML**

```
<form action="">
   <input type="submit" id="first" value="first" />
   <input type="submit" id="second" value="second" />
</form> 
```

**JS**

```
$(function(){
    // on document ready wire up click events  

    // handle click event for first button
    $('#first').on('click', function(){
         $('form').prop('action', 'PostActionOne'); // set the action on the form to handle first button post
    });
    // handle click event for second button
    $('#second').on('click', function(){
         $('form').prop('action', 'PostActionTwo'); // set the action on the form to handle second button post
    });
}); 
```

另外的选择：

使用带有单击事件的两个按钮来执行 ajax 请求来处理场景。

**HTML**

**JS**

```
$(function(){
    // on document ready wire up click events  
    $('#first').on('click', function(){
          $.ajax({
             type: 'POST',
             url: 'PostActionOne,
             data: data,
             success: success,
             dataType: dataType
         });
    });

    $('#second').on('click', function(){
          $.ajax({
             type: 'POST',
             url: 'PostActionTwo,
             data: data,
             success: success,
             dataType: dataType
         });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:17:11.687

ASP.NET WebPages 确实可以提供更好的事件驱动编程（可以说），但它不能在客户端运行。因此，无论您使用 WebForms 还是 MVC，如果您希望在浏览器网页上的按钮的单击事件上发生某些事情，请在 javascript、jquery 和使用 ajax 中进行触发器，这样您就不必重新加载整个页面每一次。

同样在 mvc 中你有一个助手叫做

```
@Ajax.ActionLink("linkname", "Action", "etc"); 
```

这可以让你工作得很快，只需阅读它。 [http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.actionlink%28v=vs.108%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.actionlink%28v=vs.108%29.aspx)

# zend-framework - Zend Framework - 如何在其他控制器中声明的视图脚本变量中使用？

> ID：12302076
> 
> 赞同：0
> 
> 时间：2012-09-06T14:11:30.070
> 
> 标签：zend-framework, variables, view, controller

Zend Framework - 如何在其他控制器中声明的视图脚本变量中使用？我是否需要再次传递变量才能在控制器中查看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T02:42:01.173

简短的回答是**肯定的！**，您必须将数据重新分配给视图。

但是有一些选择。

如果此数据将在许多视图脚本中使用，则根据您的用例构建[视图助手](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html)或[操作助手可能是合适的。](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html)

一个简单的视图助手：

```
class Zend_View_Helper_Length extends Zend_View_Helper_Abstract
{

    public function length($minutes)
    {

        $hours = floor($minutes / 60);
        $minutes = $minutes % 60;

        if ($hours > 0) {
            $time = sprintf("%01d Hours %02d Minutes", $hours, $minutes);
        } else {
            $time = sprintf("%02d Minutes", $minutes);
        }
        return $time;
    }
} 
```

一个简单的动作助手：

```
class My_Controller_Action_Helper_Login extends Zend_Controller_Action_Helper_Abstract
{

    public function direct()
    {
        $form = new Application_Form_Login();
        $form->setAction('/index/login');

        return $form;
    }
} 
```

如果您的数据要在单个控制器的多个操作中使用，您可以在 init() 方法中设置数据：

```
public function init()
    {
        //initialize the flash messenger action helper to work in all actions
        if ($this->_helper->FlashMessenger->hasMessages()) {
            $this->view->messages = $this->_helper->FlashMessenger->getMessages();
        }
    } 
```

如果您只是需要在短时间内保存一段数据，您可以将其保存到[注册表](http://framework.zend.com/manual/1.12/en/zend.registry.using.html)中，或者您可以使用[会话](http://framework.zend.com/manual/1.12/en/zend.session.basic_usage.html)较长时间（我觉得这个解决方案特别有用）。

这些只是使应用程序可以使用不同数据的一些更常见的方法。更有针对性的问题可能会得到更有针对性的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:19:42.777

例如：如果您有 2 个控制器：

控制器 A：它有一些变量，变量将传递给视图 A 控制器 B：它有一些变量，变量将传递给视图 B

视图 B 无法访问控制器 A 的变量。

因此，如果您想在视图 B 中使用控制器 A 的变量，则必须在控制器 B 中重新声明它

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T14:17:39.633

如果您有一些想要添加到多个视图实例的“核心”视图变量，那么您可以想象有一个额外的抽象层并在其中声明您的核心视图变量。例如：

```
class myController extends Zend_Controller_Action 
```

可能成为

```
class myController extends myCoreController 
```

和

```
class mySecondController extends myCoreController 
```

和

```
class myCoreController extends Zend_Controller_Action 
```

通过这种方式，您可以让您的核心变量跨控制器可用，并将它们全部保存在一个地方。

# php - 如何计算从查询创建的临时列的总和

> ID：12302078
> 
> 赞同：0
> 
> 时间：2012-09-06T14:11:33.040
> 
> 标签：php, mysql

我的查询正在运行，但我需要计算从查询创建的列的总数，我使用普通的 php 脚本来添加累计工作时间的值（以金钱为单位），这也很有效。但是我如何获得该列的总和或总计，这应该给我一个单一的数字，在回声行中用作“....该期间的累计工资是***_*** ”，请参见我脚本的倒数第二行。

以下是脚本的片段：

```
<?php
    include("../xxx");
    $cxn = mysqli_connect($host,$user,$password,$dbname)
        or die ("Couldn't connect to server.");
    $query = "SELECT 
                ea.`employee_id`, 
                e.`employee_surname`, 
                e.`employee_first_name`, 
                e.`employee_second_name`,
                e.`employee_salary`, 
                FORMAT((IF((SUM(ea.`empl_attendance_total`))<180,(SUM(ea.`empl_attendance_total`)),180)),1) AS nt,
                FORMAT((IF(((SUM(ea.`empl_attendance_total`))-(SUM(CASE WHEN WEEKDAY(ea.empl_attendance_date) > 5 THEN ea.empl_attendance_total END)))<=180,
                    0,(IF(((SUM(ea.`empl_attendance_total`))-(SUM(CASE WHEN WEEKDAY(ea.empl_attendance_date) > 5 THEN ea.empl_attendance_total END)))>180,
                    ((SUM(ea.`empl_attendance_total`))-(SUM(CASE WHEN WEEKDAY(ea.empl_attendance_date) > 5 THEN ea.empl_attendance_total END)))-180,
                0)))),1) AS ot,
                FORMAT((IF((SUM(ea.`empl_attendance_total`))>180,
                IF((SUM(ea.`empl_attendance_total`))-180>=(SUM(CASE WHEN WEEKDAY(ea.empl_attendance_date) > 5 THEN ea.empl_attendance_total END)),
                (SUM(CASE WHEN WEEKDAY(ea.empl_attendance_date) > 5 THEN ea.empl_attendance_total END)),(SUM(ea.`empl_attendance_total`))-180),
                0)),1) AS st,
                FORMAT((SUM(ea.`empl_attendance_total`)),1) AS total
            FROM
                empl_attendance ea 
            JOIN 
                employee e 
            ON ea.`employee_id` = e.`employee_id` 
            WHERE  ea.`empl_attendance_date` BETWEEN '$start_date' AND '$end_date' 
            GROUP BY `employee_id`";
    $result = mysqli_query($cxn,$query)
        or die ("Couldn't execute query.");
$total_salary = 0; 
    /* Displays items already in table */
    echo "<table><br>
    <tr>
     <th>Empl No</th>
     <th>Empl Name</th>
     <th>N/T (1.0)</th>
     <th>O/T (1.5)</th>
     <th>S/T (2.0)</th>
     <th>Total Hrs</th>
     <th>Est Salary</th>
    </tr>";

while($row = mysqli_fetch_assoc($result)) 
{ 
    extract($row); 
    $sal = ((($employee_salary/180)*$nt)+((($employee_salary/180)*$ot)*1.5)+((($employee_salary/180)*$st)*2)); 
    $salary = number_format($sal, 2, '.', ','); 

    // add this salary to the total 
    $total_salary += $sal; 

    echo "<tr>\n
            <td>$employee_id</td>\n
            <td>$employee_surname, $employee_first_name $employee_second_name</td>\n
            <td>$nt</td>\n
            <td>$ot</td>\n
            <td>$st</td>\n
            <td>$total</td>\n
            <td>R $salary</td>\n
            </tr>\n"; 
} 
    // change the format of the salary variable
$acc_sal = number_format($total_salary, 2, '.', ',');
echo "</table><br>"; 
echo "Accumulated Salary for the selected period is<b> R $acc_sal<b>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:55:20.597

一个相当简单的方法是`$total_salary`在循环之前定义一个新变量（例如）`while`并将每个薪水添加到它。

所以你会有（代码被截断了一些）：

```
...
$total_salary = 0;

while($row = mysqli_fetch_assoc($result))
{
    extract($row);
    $sal = ((($employee_salary/180)*$nt)+((($employee_salary/180)*$ot)*1.5)+((($employee_salary/180)*$st)*2));
    $salary = number_format($sal, 2, '.', ',');

    // add this salary to the total
    $total_salary += $sal;

    echo "... row markup ...";
}
echo "</table><br>";
echo "<b> Accumulated Salary for the selected period is $total_salary<b>"; 
```

PS：这是一个很棒的查询！！！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:48:13.533

由于您只对一列使用 GROUP BY，请查看 WITH ROLLUP 选项，它将从数据库中再返回一行。

如果您这样做，请在您的代码中留下大量注释，因为未来的开发人员可能不会期待额外的行。

# c++ - VC++11 映射和多映射迭代器（重载）C2535

> ID：12302079
> 
> 赞同：4
> 
> 时间：2012-09-06T14:11:35.203
> 
> 标签：c++, stl, map, multimap, visual-c++-2012

我只是在玩新的 VS 2012，我可能对新的 C++11 有问题。当我在项目设置中将平台工具集设置为 VS2010 (v100) 时，这种代码可以完美运行。

。H：

```
typedef std::multimap<unsigned, unsigned>   SizeMap;
typedef std::map<unsigned, unsigned>        OffsetMap;

private:
    inline void _RemoveBlockL(SizeMap::iterator sizeI);
    inline void _RemoveBlockL(OffsetMap::iterator offsetI); 
```

.cpp：

```
inline void Foo::_RemoveBlockL(SizeMap::iterator sizeI)
{
// impementation
}

inline void Foo::_RemoveBlockL(OffsetMap::iterator offsetI)
{
// impementation
} 
```

但是当我为 VS2012 (v110) 更改它时，我会收到以下错误：

```
Error   61  error C2535: 'void
Boo::system::Foo::_RemoveBlockL(std::_Tree_iterator<_Mytree>)' : member function already
defined or declared D:\_work\wp-test\boo\system\foo.h 
```

为什么重载在 VC++11 中不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T14:17:30.650

这只是一种可能性，我目前无法检查，但他们改变了在 vc++11 中实现迭代器的方式，因此它们可能是相同的底层类型，因此无法对其进行重载。

是否要求不同容器类型的迭代器本身具有不同的类型？

请参阅此[http://blogs.msdn.com/b/vcblog/archive/2012/04/06/10291485.aspx](http://blogs.msdn.com/b/vcblog/archive/2012/04/06/10291485.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:21:58.167

我能想到的两种可能性是，因为`_RemoveBlockL`是为编译器保留的，所以发生了一些变化，现在它被保留了，或者在新的编译器中，两个迭代器实际上别名相同的类型。您是否真的需要不同的功能行为，具体取决于它是 a`map`还是`multimap`？

假设你这样做（因为 typedef 名称），正确的解决方案是*不使用重载*来解决这个问题。给出代表它们实际工作的函数名称（或者，您可以使用`strong_typedef`创建一个强别名，以便您可以重载，但我无法可视化完整的解决方案）。

# javascript - 为什么脚本标签被分成两个字符串？

> ID：12302082
> 
> 赞同：0
> 
> 时间：2012-09-06T14:11:41.577
> 
> 标签：javascript, optimization, enyo

> **可能重复：**
> [为什么用 document.write() 编写 <script> 标签时要拆分它？](https://stackoverflow.com/questions/236073/why-split-the-script-tag-when-writing-it-with-document-write)

查看 enyo 源代码，我看到了这个（在 enyo.js 中）：

```
document.write('<scri' + 'pt src="' + root + "/source/boot/" + inSrc + '"></scri' + 'pt>'); 
```

为什么`<script`标签被分解成`<scri + pt`? 结束标签也是如此。这是我不知道的 Javascript 忍者的秘密吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:17:07.077

当浏览器的 html 解析器看到字符串 " `</script>`" 时，无论它是否在 javascript 字符串中，它都会将其视为结束脚本标记并结束当前脚本块。将“ `</script>`”标签分成两部分可以防止在您需要它作为 javascript 字符串时发生这种情况。

看到[这个解释](http://www.wwco.com/%7Ewls/blog/2007/04/25/using-script-in-a-javascript-literal/)：

> 标签与内容无关。这意味着 HTML 解析器不知道我们在 JavaScript 字符串的中间。
> 
> 只有在浏览器了解哪些部分是 JavaScript 之后，才会对 JavaScript 进行处理。在它看到关闭标签之前，它并不关心里面有什么——引用与否。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:12:21.737

它旨在获取各种过滤器周围的脚本标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:12:45.670

这是必要的，因为解析器将该子字符串视为`<script>`包含语句本身的结束标记，因此有必要在中间的某处进行拆分

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T14:12:55.850

为了防止浏览器阻止`document.write`. 做这种事情通常是不安全的。

此外，对于旧浏览器，当看到`</script>`正文中的任何位置时，会立即停止执行。这意味着后面的任何内容`document.write`都不会被视为 JavaScript 代码。

看看这个[小提琴](http://jsfiddle.net/amaan/VuC3M/)，看看我的意思。标签在`script`警报后立即关闭。

# iphone - Core Data 中带有自定义对象的可转换集合

> ID：12302083
> 
> 赞同：1
> 
> 时间：2012-09-06T14:11:42.830
> 
> 标签：iphone, objective-c, ios, ipad, core-data

我必须在核心数据数据库中存储一组自定义对象（字典）。到目前为止，一切都很好。字典被存储并且可以作为“可变形”对象毫无问题地加载。

自定义对象包含属性，但在从数据库加载它们后这些属性为零。经过大量搜索，我没有找到任何关于这个问题的东西。似乎属性没有以这种方式存储。（也许是因为只存储地址而不存储数据？？）

当然，最好存储一个 Core Data 支持的数据类型的对象，但在这种情况下，可转换的对象就很好，并且为我节省了很多工作和时间。

感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:00:35.883

[核心数据指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdNSAttributes.html)中涵盖了可转换对象的整个想法。请注意，这使用键控归档器/取消归档器从您的对象创建 NSData 对象，反之亦然。这意味着您的客户反对我遵守 NSCoding，并在被要求时对其中的所有信息进行编码以及处理未编码。

如果您现在不这样做，这是您问题的根本原因。我建议您在一个自定义对象中采用 NSCoding，然后验证实际上您可以将其编码为 NSData 对象，然后从对象中取消编码并返回相同的对象。当你有这个工作时，你可以使用 Core Data 进行测试。

# objective-c - 使用 Objective-C，有没有办法将树转换为快速枚举？

> ID：12302084
> 
> 赞同：4
> 
> 时间：2012-09-06T14:11:43.413
> 
> 标签：objective-c, ios, fast-enumeration

如果有一棵树，它有一个`rootNode`，并且它的子节点指向左和右（二叉树），有没有办法像在 Objective-C 2.0 中那样将它转换为快速枚举？所以我们可以做

```
for (id node in [tree allNodes]) {
    // do something
} 
```

最好不用为内存大小构造 O(n) 对象，而是使用诸如 、 或 的`NSMutableArray`集合`NSSet`对象`NSDictionary`。

顺序并不重要，但它可能会以深度优先顺序出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:24:34.603

当您实现快速枚举时，您不必一次返回所有元素。当然，如果你一次返回一个，你得到的只是快速的枚举语法，而没有太多的性能优势。

您可以在每次`countByEnumeratingWithState:objects:count`调用时返回一个元素，也可以返回所有元素，甚至只返回 N 个元素。

例如，假设您有一棵大树。您可以使用传递给您的堆栈缓冲区及其长度：

```
NSUInteger numItemsToReturn = MIN(100, lengthOfStackBuffer); 
```

然后，您可以继续遍历树，`numItemsToReturn`直到到达树的末端。

内部基础设施将继续调用 `countByEnumeratingWithState:objects:count`，直到它“看到”正确数量的元素。

但是请注意，如果您只返回部分数据，则必须将信息存储在其中，`state`以便您知道下次从哪里恢复。这`extra`就是为了。

**编辑**

看到您对原始帖子的评论...如果您想支持快速枚举，那么这很容易，如上所述。

但是，如果您只想遍历树来做一些事情，您可能需要考虑使用枚举 API。例如：

```
-(void)enumerateWithOptions:(MyTreeEnumerationOptions)options
                 usingBlock:^(id object, unsigned int level, BOOL isLeaf, BOOL *stop)block {
    // In here, you can use the options to determine if you are doing
    // pre/post depth first search, breadth-first, reverse, even concurrent.
    // You also provide an easy way to communicate to the caller not only the
    // object at this node, but the tree-depth of this node, whether it is a
    // leaf, and anything else you want to communicate.
} 
```

然后用户可以调用：

```
[tree enumerateWithOptions:PreOrderDepthFirst
                usingBlock:^(id object, unsigned int level, BOOL isLeaf, BOOL *stop) {
    // Execute whatever code you want with this object...
    // Set *stop = YES to abort the enumeration.
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:32:34.107

正如 Jody 和 waldrumpus 所说，你应该遵守`NSFastEnumeration`. 这将允许您编写：

```
for (id node in tree) {
    // do something
} 
```

除此之外，正如您所说，还有许多枚举方法，即遍历您的树：首先想到的是深度优先（前序、中序、后序）或广度优先。您可以对树进行子类化并根据需要提供委托方法的不同实现`countByEnumeratingWithState:objects:count`，或者（更好）具有描述如何遍历树的 typedef 和属性，并在委托方法中对此提出上诉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:46:09.297

如果您想以多种方式（前序、中序、后序）遍历树，您还可以考虑创建自己的[`NSEnumerator`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSEnumerator_Class/Reference/Reference.html)子类，而不是仅仅遵循`NSFastEnumeration`.

因此，创建知道如何遍历树的 NSPreorderEnumerator、NSInorderEnumerator 和 NSPostOrderEnumerator 子类。

然后让您的树对象通过返回为您的树创建的新枚举器来响应, `-preorderEnumerator`。`-inorderEnumerator``-postorderEnumerator`

然后你可以做

```
for(id node in [tree preorderEnumerator]) {
    // do stuff
}

for(id node in [tree postorderEnumerator]) {
    // do stuff
} 
```

`NSArray`做类似的事情`-reverseObjectEnumerator`，它允许你反向循环。

# java - GWT：在 TABLE 中生成 THEAD

> ID：12302085
> 
> 赞同：1
> 
> 时间：2012-09-06T14:11:44.053
> 
> 标签：java, html, gwt

是否可以在 GWT 的 TABLE 中生成 THEAD？我必须创建自己的 Widget 吗？

我正在关注 GWT 上的 Google 教程，[https://developers.google.com/web-toolkit/doc/latest/tutorial/gettingstarted](https://developers.google.com/web-toolkit/doc/latest/tutorial/gettingstarted) ...但是当看到生成的 HTML 时我会生病：o）

所以我猜是的，我可以使用我需要使用的任何东西来生成更好的 HTML。

事实上，我必须报告我是否可以使用这项技术做好 HTML/CSS/JS。所以我试图知道 GWT 可以做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:41:44.710

s 的列标题`CellTable`将在一个`<thead>`部分中呈现。

如果您不需要动态操作表格的结构（假设您将小部件放在那里，否则您可以很好地用它做任何您想做的事情；这个是因为小部件具有特定的生命周期，以避免事件处理程序的内存泄漏）。

# php - xml和php的字符串比较问题

> ID：12302101
> 
> 赞同：0
> 
> 时间：2012-09-06T14:12:44.560
> 
> 标签：php, xml, xml-parsing

我在 php 中遇到 xml 问题...当我说它`echo $meta2->nodeValue;`显示地址但当我说它`if ($meta2->nodeValue=="Address"){echo $meta2->nodeValue;}`不显示任何内容时...有什么想法吗？节点类型=1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:13:56.713

您应该修剪该值以确保避免所有不可见的字符：

```
if (rtrim($meta2->nodeValue) == "Address")
{
  echo $meta2->nodeValue;
} 
```

# javac - javac分叉模式

> ID：12302107
> 
> 赞同：1
> 
> 时间：2012-09-06T14:13:16.687
> 
> 标签：javac

我正在处理一个项目，并在属性文件中看到以下配置和注释。

```
# Forking just invokes the JVM externally, and doesn't exhibit any performance benefit.

javac.fork.mode=no 
```

我很好奇这意味着什么。经过几次谷歌搜索，我仍然找不到关于此的具体文章。有人可以指点我一个好的资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:11:11.677

蚂蚁`<javac>`任务中的一个选项。

当 fork=true ant 将在它自己的 jvm 中运行 java-Compiler。

[http://ant.apache.org/manual/Tasks/javac.html](http://ant.apache.org/manual/Tasks/javac.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-21T16:31:18.067

分叉允许 javac 在其自己的堆空间中作为外部进程运行，从而限制了外部进程的内存泄漏，而不会影响父 java 进程。

如果您正在使用“javac”Ant 任务，请检查下面的线程，该线程会告诉您与“fork”一起使用的其他选项。

[如何告诉 ant 使用特定的 javac 可执行文件进行构建？](https://stackoverflow.com/questions/7832298/how-to-tell-ant-to-build-using-a-specific-javac-executable)

# java - Java ExecutorService 实施协助

> ID：12302114
> 
> 赞同：0
> 
> 时间：2012-09-06T14:13:34.783
> 
> 标签：java, multithreading, arraylist, executorservice

在以下代码中，`userList`由于发送电子邮件花费的时间过长，因此获取了大量数据。

如何加快应用程序的速度，以便更快地发送 50000 封电子邮件？也许使用`ExecutorService`?

```
List<String[]> userList = new ArrayList<String[]>();
void getRecords() {
    String [] props=null;
    while (rs.next()) {
    props = new String[2];
    props[0] = rs.getString("useremail");
    props[1] = rs.getString("active");
    userList.add(props);
    if (userList.size()>0) sendEmail();   
}
void sendEmail() {
    String [] user=null;
    for (int k=0; k<userList.size(); k++) { 
        user = userList.get(k);
        userEmail = user[0];         
        //send email code
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:29:41.583

尝试以这种方式并行化您的代码：

```
private final int THREADS_NUM = 20;

void sendEmail() throws InterruptedException {
    ExecutorService executor = Executors.newFixedThreadPool( THREADS_NUM );
    for ( String[] user : userList ) { 
        final String userEmail = user[0];         
        executor.submit( new Runnable() {
            @Override
            public void run() {
                sendMailTo( userEmail );
            }
        } );
    }
    long timeout = ...
    TimeUnit timeunit = ...
    executor.shutdown();
    executor.awaitTermination( timeout, timeunit );
}

void sendMailTo( String userEmail ) {
// code for sending e-mail
} 
```

另外，请注意，如果您不想头疼 - 方法`sendMailTo`必须是无状态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:21:51.600

`ExecutorService`您可以使用如下方式执行此类任务：

```
ExecutorService executorService = Executors.newSingleThreadExecutor();

executorService.execute(new Runnable() {
    public void run() {
        System.out.println("Asynchronous task");
        /* Add your logic here */
    }
});

executorService.shutdown(); 
```

### 信息

*   [你可以在这里](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)找到它的 java 文档。
*   更详细的教程`ExecutorService`可以[在这里找到](http://tutorials.jenkov.com/java-util-concurrent/executorservice.html)。

# jquery - 在 jquery 中使用新的 id 和事件处理程序克隆一个 div

> ID：12302116
> 
> 赞同：0
> 
> 时间：2012-09-06T14:13:41.680
> 
> 标签：jquery

我有一个 div，我想在页面的某处添加一个新的 div 副本，但带有新的 id 和新的事件处理程序。新 id 的形式可以是“原始 id + _clone”。我能够提供新的 id，但我希望原始 div 中的所有事件处理程序都附加到映射到新 id 的新 div。有没有办法使用 jQuery 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:17:14.103

如果您查看该[`.clone()`](http://api.jquery.com/clone/)函数的 jQuery 文档，您会看到有两个可选参数包括元素本身和克隆时元素后代的数据和事件处理程序。

这将处理保留事件处理程序（只要它们直接绑定到该元素，而不是被委托），那么您只需要修改`id`结果元素的属性。以下应该做你需要的：

```
$('#myid').clone(true).prop('id', function(i, oldId) {
    return oldId + '_cloned';
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:17:06.163

```
.clone(true); 
```

这样事件处理程序应该与元素一起复制

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:19:04.447

您可以使用`.clone( [withDataAndEvents] [, deepWithDataAndEvents]`复制事件处理程序和数据..

但是我怀疑受 ID 绑定的委托事件是否仍然适用于克隆元素。

**示例：http:** [//jsfiddle.net/Sfrm9/](http://jsfiddle.net/Sfrm9/)

`$(document).on('click'. '#someId', function () { });``#someId`- 克隆并将其更改为后将不起作用`#someId_cloned`

[正如此处](https://stackoverflow.com/questions/12302116/clone-a-div-with-new-ids-and-event-handlers-in-jquery/12302204#comment16505538_12302116)提到的 mcpDESIGNS ，您应该将其映射为使用`class`而不是 id 用于委托处理程序，然后您的克隆应该可以正常工作。

**前任：**

```
<div id="#someId" class="someClass" >Test</div> 
```

**JS：**

`$(document).on('click'. '.someClass', function () { });`

代替

`$(document).on('click'. '#someId', function () { });`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T14:17:13.910

您可以使用 div 的类来绑定事件。然后，您可以将相同的类留给您需要响应该事件的所有 div。

如果您的事件是使用 id 选择器绑定的，它将无法在您的新 div 上运行，因为您必须更改其 id，但它应该适用于类。

# python - 使用列表收集物品

> ID：12302123
> 
> 赞同：1
> 
> 时间：2012-09-06T14:14:23.423
> 
> 标签：python, list

我目前正在阅读“Learning Python The Hard Way”一书，并且正在尝试制作一个简单的游戏。在这个游戏中，我希望能够在一个房间里拿起物品“手电筒”，以便能够进入另一个房间。但是，我不能让它工作:-(

那么问题来了，如何通过多个函数携带同一个列表，又如何将东西放入其中？我希望能够在其中放入多个东西。

我尝试在其中调用 pick() 函数，但不断收到“TypeERROR: 'str' is not callable, 尽管我为我的函数提供了一个列表？

希望你能帮助我，谢谢:-)

代码：

```
def start(bag):
        print "You have entered a dark room"
        print "You can only see one door"
        print "Do you want to enter?"

        answer = raw_input(">")

        if answer == "yes":
            light_room(bag)
        elif answer == "no":
            print "You descidede to go home and cry!"
            exit()
        else:
            dead("That is not how we play!")

def light_room(bag):
    print "WOW, this room is amazing! You see magazines, cans of ass and a flashlight"
    print "What do you pick up?"
    print "1\. Magazine"
    print "2\. Cans of ass"
    print "3\. Flashlight"

    pick(bag)

def pick(bag):    
    pick = raw_input(">")

    if int(pick) == 1:
        bag.append("Magazine")
        print "Your bag now contains: \n %r \n" % bag
    elif int(pick) == 2:
        bag.append("Can of ass")
        print "Your bag now contains: \n %r \n" % bag
    elif int(pick) == 3:
        bag.append("Flashlight")
        print "Your bag now contains: \n %r \n" % bag                    
    else:
        print "You are dead!"
        exit()

def start_bag(bag):
    if "flashlight" in bag:
        print "You have entered a dark room"
        print "But your flashlight allows you to see a secret door"
        print "Do you want to enter the 'secret' door og the 'same' door as before?"

        answer = raw_input(">")

        if answer == "secret":
            secret_room()
        elif answer == "same":
            dead("A rock hit your face!")
        else:
            print "Just doing your own thing! You got lost and died!"
            exit()
    else:
        start(bag)

def secret_room():
    print "Exciting!"
    exit() 

def dead(why):
    print why, "You suck!"
    exit()

bag = []
start(bag) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:19:53.740

> 我尝试在其中调用 pick() 函数，但不断收到“TypeERROR: 'str' is not callable, 尽管我为我的函数提供了一个列表？

这里的问题是在这一行：

```
def pick(bag):    
    pick = raw_input(">") 
```

您绑定`pick`到一个新值（str），因此它不再引用函数。将其更改为：

```
def pick(bag):    
    picked = raw_input(">") 
```

# mysql - 查询选择父母和孩子

> ID：12302127
> 
> 赞同：0
> 
> 时间：2012-09-06T14:14:31.997
> 
> 标签：mysql

我有一个类别表，我想在其中为帖子指定类别

post_category(cat_id,cat_name,parent_id,cat_count)

```
cat_id    cat_name       parent_id       cat_count
   1           C            NULL           300 
   2         Pointers        1             100
   3         Structures      1             200
   4          Java          NULL           700    
   5         Exceptions      5             200
   6         Threading       5             300
   7         Thread Priority 6             200 
```

这里 cat_id 是主键，根元素的父 id 为空，子父 id 是任何有效的 cat_id。我想选择每个父母及其孩子的详细信息。如下

```
 C
         Pointers
         Structures    

      Java
         Exceptions
         Threading 
             Thread priority 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:23:31.717

不幸的是，MySQL 不支持可变数量的 JOIN，就像 MS SQL（我认为是 Postgres？）那样。但是，如果您愿意重新评估模式，那么在这个问题上已经有了一些很好的想法，并且[在 Percona 的 Bill Karwin 的演讲中有几个很好的选择](http://www.percona.tv/percona-webinars/models-for-hierarchical-data-in-sql-and-php)

就目前而言，您基本上有两种选择：

1.  选择任意深度进行查询
2.  选择每条记录并在您的应用程序层中进行聚合（ick！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:18:41.140

在 MS SQL 中，我认为您需要使用[Recursive Queries Using Common Table Expressions](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)。所以也许这可能有助于在 MySQL 空间中找到您正在寻找的内容。

# asp.net - Gridview 内联样式

> ID：12302128
> 
> 赞同：0
> 
> 时间：2012-09-06T14:14:32.610
> 
> 标签：asp.net

我无法弄清楚这一点。我一直使用 CSS 来设置我的 gridview 样式。我需要将 gridview 导出到 word，因此我需要使用内联样式将格式传递给 word。有人可以帮我将以下 CSS 转换为 HeaderStyle 列。

```
.AL_SubTotal_Row_1_RG
 {
    background-color:#77A78C; 
    font-weight:bold;
    border-right: 1px solid #8F8F8F;
    border-bottom: 1px solid #000000;
    text-align: center;
 } 
```

我已经完成了这么多。我不知道如何处理各个边界。

```
 "<HeaderStyle HorizontalAlign="center" BackColor="#77A78C" BorderStyle="Solid" Font- bold="true />" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:23:08.177

我不知道您是否可以灵活地为底部和右侧设置不同的边框。尝试这个

```
<asp:BoundField HeaderStyle-BackColor="#77A78C" 
                HeaderStyle-Font-Bold="true" 
                HeaderStyle-BorderStyle="Solid"
                HeaderStyle-BorderWidth="1" 
                HeaderStyle-HorizontalAlign="Center" /> 
```

**更新：**希望这适用于您的场景

```
protected void Page_Load(object sender, EventArgs e)
{
    foreach(TableCell cell in xyz.HeaderRow.Cells)
    {
        cell.Attributes.Add("style", "background-color:#77A78C; font-weight:bold; border-right: 1px solid #8F8F8F; border-bottom: 1px solid #000000; text-align: center;");
    }
} 
```

# c# - 选择行时修改 ListView 的行行为

> ID：12302130
> 
> 赞同：2
> 
> 时间：2012-09-06T14:14:49.433
> 
> 标签：c#, .net, wpf, listview

我有一个基本的 ListView，它的 XAML 可以在下面找到。基本上，在我填充东西之后，我希望能够删除它们，因此“X”按钮：

```
<ListView Name="selectedPeople" ItemsSource="{Binding Path=map, RelativeSource={RelativeSource AncestorType=Window},
                Mode=OneWay}" Width="480" Height="200" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,225,10,0"
                SelectionChanged="selectedPeople_SelectionChanged">
         <ListView.View>
            <GridView AllowsColumnReorder="True" ColumnHeaderToolTip="Broadcast call targets">
               <GridViewColumn DisplayMemberBinding="{Binding Path=Key}"   Header="ID"      Width="120" />
               <GridViewColumn DisplayMemberBinding="{Binding Path=Value}" Header="Description" Width="320" />
               <GridViewColumn Header="" Width="30">
                  <GridViewColumn.CellTemplate>
                     <DataTemplate>
                        <Button Content=" X " Visibility="Hidden" />
                     </DataTemplate>
                  </GridViewColumn.CellTemplate>
               </GridViewColumn>
            </GridView>            
         </ListView.View>      
      </ListView> 
```

默认情况下，我使 X 按钮不可见，因为所需的行为是它只在选中行时出现。如何做到这一点，即更改所选更改按钮的可见性？此外，一旦单击，我如何关联按钮与哪个行/项目相关联？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:24:10.790

1.  将按钮绑定到 item.IsSelected

    ```
    <Button Content=" X " Visibility="{Binding Path=IsSelected, RelativeSource={RelativeSource AncestorType={x:Type ListViewItem}} Converter={StaticResource yourConverter}}" Command="{Binding DeleteCommand}"/> 
    ```

2.  将转换器从 bool 写入 Visibility ( [IValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx) )

    ```
    [ValueConversion(typeof(bool), typeof(Visibility))]
    public class BoolToVisibilityConverter : IValueConverter
    {
      public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
      {
        var boolValue = (bool) value;
        return boolValue ? Visibility.Visible : Visibility.Collapsed;
      }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
      {
        throw new NotImplementedException();
      }
    } 
    ```

3.  在绑定到 ListView 中的项目的 ViewModel 中创建 DeleteCommand（通过实现 ICommand 接口）并将按钮绑定到它

    ```
    public class ItemViewModel {
      ICommand DeleteCommand {get;set;}
    } 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T14:36:56.480

您可以使用其 IsEnabled 属性更改按钮列模板，如下所示。

```
<GridViewColumn Width="30" Header="">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content=" X " IsEnabled="{Binding RelativeSource={RelativeSource AncestorType={x:Type ListViewItem}}, Path=IsSelected}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn> 
```

或者您可以使用转换器或触发器来提高可见性。

```
 <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter1" />
    </Window.Resources>
  <GridViewColumn Width="30" Header="">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel>

                                    <Button Content=" X " Visibility="{Binding RelativeSource={RelativeSource AncestorType={x:Type ListViewItem}}, Path=IsSelected, Converter={StaticResource BooleanToVisibilityConverter1}}" />
                                </StackPanel>

                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:37:53.040

试试这个：

```
 <ListView Name="selectedPeople" ItemsSource="{Binding Path=map, RelativeSource={RelativeSource AncestorType=Window},
                    Mode=OneWay}" Width="480" Height="200" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,225,10,0"
                   >
 <ListView.Resources>
                <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter1" />
            </ListView.Resources>
             <ListView.View>
                <GridView AllowsColumnReorder="True" ColumnHeaderToolTip="Broadcast call targets">
                   <GridViewColumn DisplayMemberBinding="{Binding Path=Key}"   Header="ID"      Width="120" />
                   <GridViewColumn DisplayMemberBinding="{Binding Path=Value}" Header="Description" Width="320" />
                   <GridViewColumn Header="" Width="30">
                      <GridViewColumn.CellTemplate>
                         <DataTemplate>
                            <Button Content="X" 
                                        Visibility="{Binding Path=IsSelected, RelativeSource={RelativeSource AncestorType={x:Type ListViewItem}}, Converter={StaticResource BooleanToVisibilityConverter1}}"
                                        Command="{Binding DeleteCommand}"
                                        CommandParameter="{Binding}"
                                        />
                         </DataTemplate>
                      </GridViewColumn.CellTemplate>
                   </GridViewColumn>
                </GridView>            
             </ListView.View>      
          </ListView> 
```

不要忘记创建创建删除命令

# javascript - rivets.js 和 [contenteditable]

> ID：12302131
> 
> 赞同：1
> 
> 时间：2012-09-06T14:14:56.993
> 
> 标签：javascript, backbone.js, rivets.js

我正在使用主干和 rivets.js，但想使用表单标签以外的标签进行输入

例子

```
<h2 contenteditable="true" data-text="post.title"></h2> 
```

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:51:06.447

由于您通常在（h1、h2、p 等）上使用 contenteditable 的元素`change`在其文本内容更改时不会触发事件，因此您需要在这些元素上监听不同的事件，例如`blur`，`keyup`或 HTML5`input`事件（此如果您的目标是现代浏览器，这是您的最佳选择）。

为此，您需要编写自己的自定义活页夹。在这个活页夹中，您可以重用与文本绑定相同的例程，但您的绑定/取消绑定回调显然会有所不同。

```
rivets.binders.content = {
  routine: rivets.binders.text,
  bind: function(el) {
    var self = this
    this.callback = function() {
      rivets.config.adapter.publish(self.model, self.keypath, el.textContent)
    }
    el.addEventListener('input', this.callback, false)
  },
  unbind: function(el) {
    el.removeEventListener('input', this.callback, false)
  }
} 
```

[这是一个显示正在使用的自定义活页夹的小提琴](http://jsfiddle.net/3yLQY/5/)（仅在 Chrome 22 和 Safari 6 中测试）。

# blackberry - 黑莓：突出显示水平字段管理器的背景

> ID：12302134
> 
> 赞同：2
> 
> 时间：2012-09-06T14:15:10.413
> 
> 标签：blackberry, focus

我想在滚动时突出显示水平字段管理器的背景。我试过这段代码：

```
public class HorizentalFocus extends HorizontalFieldManager{
  protected void paint(Graphics g) {
    g.setBackgroundColor(isFocus() ? 4210231 : 0xFFFFFF);
    g.getFont();
    g.clear();
    super.paint(g);
  }
  protected void onFocus(int direction) {
    invalidate();
    super.onFocus(direction);
  }
  protected void onUnfocus() {
    invalidate();
    super.onUnfocus();
  }
} 
```

它有效，但我有两个问题：它没有突出整个水平字段，并且我想在聚焦时更改文本的颜色。

![这是一个例子](../Images/35441ba6778d6e1d6bcd7d7be9852849.png)

谢谢你的帮助。

# android - Android facebook SDK 发布到 walll

> ID：12302141
> 
> 赞同：0
> 
> 时间：2012-09-06T14:15:50.657
> 
> 标签：android, facebook

我正在尝试使用 Android SDK 在我的 Facebook 墙上发布消息。我曾经试过这个，它成功了。它张贴了一个矩形框，左下角有一个图标，一个标题和一条消息。这是我的代码。

```
final  Bundle parameters = new Bundle();
                        parameters.putString("to", friendId);
                        parameters.putString("caption", "Little Cast Invitation");
                        parameters.putString("description", "Please View my video");
                        parameters.putString("message","Hello"); 
                        parameters.putString("icon", "http://www.veryicon.com/icon/png/Object/Points%20Of%20Interest/Theater%20Yellow%202.png");
                        parameters.putString("name","Invitation to View Video");
                        Utility.mAsyncRunner.request("me/feed", parameters,"POST", new myPostListener(), 1); 
```

这只会在我的墙上发布一条消息“你好”。其他一切都被忽略了吗？这有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:05:18.890

试试这个：

私人脸书脸书；

```
public void postMessageOnWall(Activity activity, String message, String picture, String caption, String name) {
    if (facebook.isSessionValid()) {
        Bundle parameters = new Bundle();
        parameters.putString("message", message);
        parameters.putString("picture", picture);
        parameters.putString("caption", caption);
        parameters.putString("name", name);
        try {
            String response = facebook.request("me/feed", parameters, "POST");
            System.out.println(response);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

# log4net - 使用 log4net 记录到两个不同的日志文件

> ID：12302142
> 
> 赞同：1
> 
> 时间：2012-09-06T14:15:55.777
> 
> 标签：log4net, log4net-configuration

我正在尝试将错误消息和调试消息记录到两个不同的文件中。我正在使用两个不同的文件附加程序来执行此操作。

这是我的 app.config 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<configSections>
<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
</configSections>
<log4net>
<appender name="DebugFileAppender" type="log4net.Appender.FileAppender">
  <param name="File" value="DebugLog.log" />
  <param name="AppendToFile" value="true" />
  <layout type="log4net.Layout.PatternLayout">
    <param name="ConversionPattern" value="%date %level %logger - %message %newline" />
  </layout>
  <filter type="log4net.Filter.LevelMatchFilter">
    <levelToMatch value="DEBUG"/>
  </filter>
  <filter type="log4net.Filter.DenyAllFilter" />
</appender>

<appender name="ErrorFileAppender" type="log4net.Appender.FileAppender">
  <param name="File" value="ErrorLog.log" />
  <param name="AppendToFile" value="true" />
  <layout type="log4net.Layout.PatternLayout">
    <param name="ConversionPattern" value="%date %level %logger %type %exception %line %location - %message                  %newline" />
  </layout>
  <filter type="log4net.Filter.LevelMatchFilter">
    <levelToMatch value="ERROR"/>
  </filter>
  <filter type="log4net.Filter.DenyAllFilter" />
</appender>

<root>
  <level value="DEBUG" />
  <appender-ref ref="DebugFileAppender" />
</root>

<logger name="ErrorFileAppender" >
  <level value="ERROR"/>
  <appender-ref ref="ErrorFileAppender"/>
</logger> 
```

调试消息工作正常，但是当我更改程序以包含异常错误时，错误不会写入文件。

这是我用来捕获异常的代码：

```
catch (Exception e)
{
    logger.Error(e);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-10T05:08:35.190

修改根以包含以下内容：

```
<root>
  <appender-ref ref="ErrorFileAppender"/>
  <appender-ref ref="DebugFileAppender" /> 
</root> 
```

*为了清楚起见，从评论中移出*

# c# - 使用 ModelState MVC 进行验证

> ID：12302143
> 
> 赞同：3
> 
> 时间：2012-09-06T14:15:57.390
> 
> 标签：c#, asp.net-mvc, validation

我是 MVC 新手，所以请帮我解决我面临的一个简单问题。我有一堂课如下

```
public class FeedbackViewModel
{
    [Required(ErrorMessage="Please enter feedback summary")]
    public string strSummary { get; set; }

    [Required(ErrorMessage = "Please enter feedback details")]
    public string strDetail { get; set; }
} 
```

然后这`FeedbackViewModel`在其他视图模型中用作

```
public class HomeIndexViewModel
{
    public SearchViewModel SearchViewModels { get; set; }
    public FeedbackViewModel FeedBackModel { get; set; }
} 
```

我的问题出在控制器中`ModelState.IsValid`（在控制器中传递给动作的模型是 HomeIndexViewModel）总是正确的，无论我是否在`FeedbackViewModel`模型字段中输入了任何值。我需要`FeedbackViewModel`在此操作中验证模型。

首先是否可能，然后如何。或者如果不可能，那么任何解决方法都在那里。请帮助我卡住了，我希望我的问题很清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:34:54.460

正如四十二在上面的评论中所说，不要在模型中保留复杂的对象，这不值得麻烦。当我开始在 MVC 中工作时，我遇到了类似的问题，这些问题通过扁平化模型得到了解决。

对于您当前的问题，您可以使用

```
public class HomeIndexViewModel
{
    public SearchViewModel SearchViewModels { get; set; } // same thing as below.

    [Required(ErrorMessage="Please enter feedback summary")]
    public string FeedBackModelstrSummary  { get; set; }
    [Required(ErrorMessage = "Please enter feedback details")]
    public string FeedBackModelstrDetail  { get; set; }
} 
```

有了它，您可以使用映射器库来帮助自己从域中的对象中提取和平坦化（ValueInjecter 或 AutoMapper 我都使用）。这样更好:)。

# slickgrid - SlickGrid 下拉框编辑器不起作用

> ID：12302144
> 
> 赞同：0
> 
> 时间：2012-09-06T14:16:01.983
> 
> 标签：slickgrid

我正在尝试按照 [Slickgrid 的方式来实现一些带有下拉选择列表的列？](https://stackoverflow.com/questions/2623161/slickgrid-column-with-a-drop-down-select-list)

我的代码是；slick.editors.js ；

```
(function ($) {
  // register namespace
  $.extend(true, window, {
    "Slick": {
      "Editors": {
        "Text": TextEditor,
        "Integer": IntegerEditor,
        "Date": DateEditor,
        "YesNoSelect": YesNoSelectEditor,
        "Checkbox": CheckboxEditor,
        "PercentComplete": PercentCompleteEditor,
        "LongText": LongTextEditor,
        "SelectOption": SelectCellEditor
      }
    }
  }); 
```

进一步定义函数，

```
function SelectCellEditor(args) {
    var $select;
    var defaultValue;
    var scope = this;

    this.init = function () {

        if (args.column.options) {
            opt_values = args.column.options.split(',');
        } else {
            opt_values = "yes,no".split(',');
        }
        option_str = ""
        for (i in opt_values) {
            v = opt_values[i];
            option_str += "<OPTION value='" + v + "'>" + v + "</OPTION>";
        }
        $select = $("<SELECT tabIndex='0' class='editor-select'>" + option_str + "</SELECT>");
        $select.appendTo(args.container);
        $select.focus();
    };

    this.destroy = function () {
        $select.remove();
    };

    this.focus = function () {
        $select.focus();
    };

    this.loadValue = function (item) {
        defaultValue = item[args.column.field];
        $select.val(defaultValue);
    };

    this.serializeValue = function () {
        if (args.column.options) {
            return $select.val();
        } else {
            return ($select.val() == "yes");
        }
    };

    this.applyValue = function (item, state) {
        item[args.column.field] = state;
    };

    this.isValueChanged = function () {
        return ($select.val() != defaultValue);
    };

    this.validate = function () {
        return {
            valid: true,
            msg: null
        };
    };

    this.init();
} 
```

然后在我的 CSHTML

```
var columns = [

  { id: "color", name: "Color", field: "color", options: "Red,Green,Blue,Black,White", editor: Slick.Editors.SelectOption },
  { id: "lock", name: "Lock", field: "lock", options: "Locked,Unlocked", editor: Slick.Editors.SelectOption },
  ];

    var options = {
        enableCellNavigation: true,
        enableColumnReorder: false
    };

    $(function () {
        var data = [];
        for (var i = 0; i < 20; i++) {
           data[i] = {
           color: "Red",
           lock: "Locked"
            };
   } 
```

网格显示，颜色显示为单元格中的常规文本，但没有下拉菜单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:35:22.513

只有在编辑该单元格时才会出现下拉菜单。我认为添加`editable: true`到您的网格选项应该可行。

# android - 检测布局外的触摸事件

> ID：12302145
> 
> 赞同：1
> 
> 时间：2012-09-06T14:16:04.953
> 
> 标签：android, android-event

我正在使用我在某处找到的开源数字选择器（感谢 Jeffrey F. Cole），但我刚刚发现了一个错误。

numberpicker 有一个处理程序，可以在您触摸按钮时更快地增加数字

```
long`private Handler repeatUpdateHandler = new Handler(); 
```

`

```
 class RepetetiveUpdater implements Runnable {
    public void run() {
        if (autoIncrement) {
            increment();
            repeatUpdateHandler.postDelayed(new RepetetiveUpdater(),
                    REPEAT_DELAY);
        } else if (autoDecrement) {
            decrement();
            repeatUpdateHandler.postDelayed(new RepetetiveUpdater(),
                    REPEAT_DELAY);
        }
    }
}

 .....

public class NumberPicker extends LinearLayout {

 .....

    // Auto increment for a long click
    increment.setOnLongClickListener(new View.OnLongClickListener() {
        public boolean onLongClick(View arg0) {
            autoIncrement = true;
            repeatUpdateHandler.post(new RepetetiveUpdater());
            return false;
        }
    });

    // When the button is released, if we're auto incrementing, stop
    increment.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_UP && autoIncrement) {
                autoIncrement = false;
            }
            return false;
        }
    }); 
```

问题是当您长按按钮时，计数器开始增加，但是当您按住手指并在屏幕上拖动手指时，即使您抬起手指，计数器也会继续增加。

那么如何检测到手指离开我的数字选择器布局并停止计数器呢？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:23:22.000

我不太确定这是一个错误，我什至不确定它是否来自这个数字选择器在 API 本身的数字选择器之上所做的更改。我假设处理选择器递增和递减的按钮设置为继续运行，直到收到 ACTION_UP MotionEvent，但这可能过于简化了。

**编辑：**

我已经在库存的 Android 2.3.3 上对此进行了测试，这正是结果。

**编辑：**

根据您在评论中的澄清，这听起来确实是一个非常糟糕的错误。看起来您需要做的是让处理程序删除对 ACTION_UP 中可运行对象的回调。您可以将我链接到该项目，以便我可以尝试提交补丁吗？

**编辑**

您提供的 NumberPicker 没有正确使用处理程序，IMO。与其保持对同一个 Handler 的引用以便以后可以删除回调，不如在每次发布时创建一个新的。我做了一些更改并修复了这里的问题：[https ://gist.github.com/3657989](https://gist.github.com/3657989)

# php - 匹配被任何字符包围的单词，但任何有效单词或单词的一部分除外

> ID：12302147
> 
> 赞同：0
> 
> 时间：2012-09-06T14:16:31.500
> 
> 标签：php, regex, preg-match

我手头有这个小任务。我需要匹配由以下任何字符 [\n\r\t!@#\$%*\^()_.,] 包围的单词。

对不起，让我澄清一下。截至目前，我可以匹配“To”、“ *to* ”、“$to$”、“#To#”。但是，如果我使用下面的代码搜索“To_Lee”，它不会找到它。我需要能够匹配“To_Lee”，但忽略其中包含“to”的任何单词，如“tomato”。

```
$string = 'This is a random string that contains To_Lee';
preg_match('/\b(_*(to)_*)\b/i', $string, $matches); 
```

除 To_Lee 外，这将对所有情况返回 true。有人可以告诉我我需要做什么才能将 To_Lee 捕获为有效匹配吗？

很抱歉造成混乱，希望这更清楚一点。

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:49:32.317

我想我找到了自己问题的答案。在我的环境中测试代码后，我得到了我期望的结果。

在向阿列克谢解释了我想要什么之后，我基本上得出了我的答案。

这是代码：

```
$string = 'This is a very long string, that contains Sam. sam is just as bad. Not sure what I need but i think it feels the same. Sam_Alex is the same as Alex_Sam. Alex is the same as well..'; 
```

***本质上，我们希望将任何不是字母的内容与括号中的指定字符串匹配。在上面的字符串中，您注意到我添加了类似于“sam”的单词“same”。但是，这个词完全被忽略了，在这种情况下我们要忽略“same”。***

```
$pattern = '([^a-zA-Z])(_*(Sam)_*)([^a-zA-Z])';
preg_match($pattern, $string, $matches); 
```

给我们：

```
var_dump($mathes);
array(1 => "Sam.",2 => " sam", 3 => "Sam_", 4 => "_Sam"); 
```

感谢大家的帮助。我很感激。

# javascript - 制作一个下拉菜单，其宽度取决于其中的部分数量

> ID：12302152
> 
> 赞同：0
> 
> 时间：2012-09-06T14:16:50.350
> 
> 标签：javascript, jquery

我正在为一个站点构建一个下拉菜单，并且我正在尝试根据元素实例在其中包含多少个部分来更改父 div (.drop-down) 的宽度。共有 7 个 .drop-down 实例，每个实例包含不超过 3 个但至少 1 个不同数量的部分。这是我的代码哪里出错了？

```
 $('.drop-down').each(function(index) {
    var numSections = $(this).find('section').length;

        if (numSections = 1) {
            $('.drop-down').css('width','300px');
        }

        else if (numSections = 2) {
            $('.drop-down').css('width','600px');
        }

        else
            $('.drop-down').css('width','840px');
    }); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:45:28.693

```
$('.drop-down').each(function(index)
{
    var numSections = $(this).find('section').length;

    if (numSections == 1) {
        $(this).css('width', 300);
    }
    else if (numSections == 2) {
        $(this).css('width', 600);
    }
    else if (numSections == 3){
        $(this).css('width', 840);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:22:16.880

你没有指定`.drop-down`你的目标是哪一类。尝试`$(this)`：

```
$('.drop-down').each(function(index) {
    var numSections = $(this).find('section').length;

        if (numSections = 1) {
            $(this).css('width','300px');
        }

        else if (numSections = 2) {
            $(this).css('width','600px');
        }

        else
            $(this).css('width','840px');
    }); 
```

您还可以将新宽度声明为整数而不是字符串，如下所示：

```
$(this).css('width',840); 
```

编辑：这是一个基本的 jsFiddle：http: [//jsfiddle.net/MFfgj/](http://jsfiddle.net/MFfgj/)

# javascript - 为什么它会删除数据元素？

> ID：12302154
> 
> 赞同：0
> 
> 时间：2012-09-06T14:16:57.443
> 
> 标签：javascript, arrays, trie

我尝试按照某些教程在 JS 中实现 trie 数据结构。[http://jsbin.com/ilamic/3/edit](http://jsbin.com/ilamic/3/edit)

它有效，但有一个问题：

它仅在我同时调用 insert_key() 和 start_with_prefix() 时才有效 - 如果我注释掉 insert_key() 并仅调用 start_with_prefix() 我什么也得不到！:( 数据就消失了！我如何让它留在那儿，一旦插入？

PS：那个教程是 Python 教程——我把它改编成 JS 代码。也许，我错过了一些东西（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:02:53.050

Actually you missed a very simple thing, every time the code is executed the variable ***tr*** is reinitialized, so if you try to execute **start_with_prefix()** without populating it with **insert_key()** it will be empty. you need to save the state of your variable to reuse it later.

[Here](http://jsbin.com/iyemax/2/edit) I've cloned your original example and added some logic. Hope this help.

# python - 如何扩展pyserial的输入缓冲区大小

> ID：12302155
> 
> 赞同：10
> 
> 时间：2012-09-06T14:16:58.760
> 
> 标签：python, buffer, pyserial

我想通过串口与手机通信。在给手机写了一些命令之后，我曾经`ser.read(ser.inWaiting())`得到它的返回值，但我总是得到`1020 bytes`字符总数，实际上，期望的返回应该是 over `50KB`。

我试图设置`ser.read(50000)`，但解释器会挂断。

我将如何扩展输入缓冲区以一次获得所有返回？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-04-25T14:07:11.903

如果你在 Windows 平台上运行你的代码，你只需要在你的代码中添加一行。

```
ser.set_buffer_size(rx_size = 12800, tx_size = 12800) 
```

其中 12800 是我选择的任意数字。您可以将接收（rx）和传输（tx）缓冲区设为 2147483647（等于 2^31 - 1）

这将允许您扩展输入缓冲区以一次获得所有返回。

请注意，这仅适用于某些驱动程序，因为这是一项建议。驱动程序可能不会接受您的建议，并且会坚持使用其原始缓冲区大小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-14T14:02:26.457

我遇到了完全相同的问题，包括 1020 字节的缓冲区大小，但还没有找到改变它的方法。我的解决方案是实现一个循环，如：

```
in_buff=''
while mbed.inWaiting():
    in_buff+=mbed.read(mbed.inWaiting())    #read the contents of the buffer
    time.sleep(0.11)     #depending on your hardware, it can take time to refill the buffer 
```

如果有人能想出一个调整缓冲区大小的解决方案，我会非常高兴！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T17:23:16.307

我猜您正在读取 1020 个字节，因为缓冲区中只有这些，这就是 ser.inWaiting() 返回的内容。根据波特率，传输 50 KB 可能需要一段时间，或者手机期待的内容与您不同。握手？

检查 ser.inWaiting 的值，然后检查您收到的内容的内容以**获取**提示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-04T18:30:55.770

pySerial 使用本机操作系统驱动程序进行串行接收。在 Windows 的情况下，输入驱动程序的大小取决于设备驱动程序。

如果可能，您可以在设备管理器设置中增加大小，但最终您只需要足够快地读取数据即可。

# sql-server-2005 - mssql 2005 中的对象名称无效

> ID：12302158
> 
> 赞同：0
> 
> 时间：2012-09-06T14:17:02.520
> 
> 标签：sql-server-2005, schema

我们目前的 MSSQL 2005 数据库存在问题。我们最近经历了从 windows server 2003 到 2008 的迁移。SQL Server 保持为 2005。我正在使用 SQL Server Management Studio 进行工作。

数据库中的所有表都遵循以下格式：[SCHEMA].[TABLE_NAME]

当我输入 SQL 时：

```
SELECT * FROM [table_name] 
```

我收到错误消息：无效的对象名称“[table_name]”。

如果我输入：

```
SELECT * FROM [schema].[table_name] 
```

这工作正常。我们登录数据库的用户名拥有所有表名前面的模式。

问题是，我们有第三方公司拥有从数据库导出数据的软件。2 家公司现在尝试运行他们的出口商，但是收到错误“无效的对象名称”。该软件正在使用拥有该架构的用户名登录。

我的问题与我在互联网上找到的问题完全相同： [http ://www.sqlteam.com/forums/topic.asp?TOPIC_ID=99802](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=99802)

然而，该问题的答案似乎充满了关键字而不是实际的句子，这使得它很难理解。

如果有人可以提供帮助，将不胜感激。

非常感谢

菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:57:17.677

将第 3 方用户名的默认架构设置为其无前缀引用应指向的架构：

```
ALTER USER foo WITH DEFAULT_SCHEMA = [bar]; 
```

（这与拥有架构不同。）

并告诉他们正确编写软件。在 SQL Server 中，您应该始终指定架构名称，即使您始终使用`dbo`.

# git - Eclipse 上的 EGit：如何 git push --force？

> ID：12302171
> 
> 赞同：15
> 
> 时间：2012-09-06T14:17:25.547
> 
> 标签：git, egit

我遇到了我的源/分支与本地分支不同步的问题，见下文

![我的提交历史](../Images/bf8005358e8a740c9fb569e0f8b23b75.png)

当我尝试从本地“暂存”分支推送到原始/暂存分支时，我收到“拒绝 - 非快进”错误。

我在 Windows PC 上使用 Eclipse 和 EGit 模块。

从[这里的另一篇文章](https://stackoverflow.com/questions/8939977/git-push-rejected-after-feature-branch-rebase)中，我看到我可以使用“git push --force origin staging”解决我的问题，以用我的本地分支覆盖 origin/staging 分支。

但是，我没有看到 EGit 的那个选项，也没有看到如何在 EGit 中打开控制台来执行此操作？

有谁知道我是否可以在 EGit 中做到这一点？

好的 - 解决了我自己的问题。看来我遇到了尚未被推回原点/暂存的提交的问题。在此处找到有关使用“git reset XXX : without --hard”[的概述，它重置分支标记，但保留本地更改以供以后重新提交。](http://www.opentaps.org/docs/index.php/How_to_Use_Git:_a_Tutorial#Fixing_Commits_Which_Have_Not_Been_Pushed)

谢谢，杰森

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-12-19T17:56:18.063

我刚刚遇到了一个类似的问题，这就是我所做的：

1.  团队 -> 推送分支 <分支名称> ...
2.  如果远程分支存在并且已经发散，则强制覆盖远程分支

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T14:33:35.300

您确定要覆盖远程分支并丢失所有这些提交吗？

如果远程分支上的提交不在本地分支中，则应在推送之前将它们合并到本地分支中

例如，在您当地的`staging`分支机构中：

```
git merge origin/staging 
```

但是，如果您确定，那么我建议您检查 push refspec 上的“强制更新”选项。

这有点复杂，但 EGit 用户指南在讨论[Pushing to other Repositories](http://wiki.eclipse.org/EGit/User_Guide#Pushing_to_other_Repositories)时对其进行了解释，并且提到“强制更新”选项的特定部分在[Push Ref Specifications部分中](http://wiki.eclipse.org/EGit/User_Guide#Push_Ref_Specifications)

**编辑0：**关于您失败的合并，我还没有遇到完全失败而不是导致冲突的合并，它似乎可能是一个[已知问题](https://bugs.eclipse.org/bugs/show_bug.cgi?id=354099)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:26:26.480

如果您进行强制推送，则`origin/staging`在修复标头中缺少的 Location: 字符串后，您将丢失添加的所有内容，并且您将破坏其他所有人的分支。我不认为那是你想要的。你可能想先做一个拉，然后推就可以了。

# android - setVisibility(GONE) 视图变得不可见但仍占用空间

> ID：12302172
> 
> 赞同：67
> 
> 时间：2012-09-06T14:17:27.463
> 
> 标签：android, android-listview, android-view

我有一个实际上是一个按钮的视图。这是它的 XML 布局 (add_new.xml)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">
    <Button
        android:id="@+id/buttonNew"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/bText" 
        android:onClick="addNew"/>
</LinearLayout> 
```

当我像这样将其可见性设置为 GONE 时

```
v = getActivity().getLayoutInflater().inflate(R.layout.add_new, null);
v.setVisibility(View.GONE); 
```

它消失了，但仍然占据空间。像这样：![在此处输入图像描述](../Images/ee3eeeab6a9099506f6bd5af6edcdc80.png)

此按钮是 中的标题`ListView`，由此 xml 定义：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/porno" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="30dp"
        android:layout_height="40dp"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="4dp"
        android:src="@drawable/ic_launcher">
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="20dp" >
    </TextView>

</LinearLayout> 
```

当它的可见性设置为 GONE 时，我不希望它占用额外的列表项。正如文档中所述。

> GONE - 此视图是不可见的，并且它不占用任何空间用于布局目的。

关于如何使它不占用空间的任何想法？

谢谢，丹尼斯XX

PS 我的列表视图在 FoldersFragment 内`ListFragment`，这是我的 MainActivity 的 xml，其中显示了 FoldersFragment

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/foldersFragment"
        android:layout_width="200dip"
        android:layout_height="match_parent"
        class="com.example.fragments.FoldersFragment" >
    </fragment>

    <fragment
        android:id="@+id/detailFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.example.fragments.DetailFragment" >
    </fragment>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-12-26T14:20:29.033

在我看来，这是一个 Android 错误，我们只是解决了这个问题：

```
<FrameLayout android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <LinearLayout android:id="@+id/layout_to_hide"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content">
         //Put here your views
    </LinearLayout>
</FrameLayout> 
```

只需**隐藏 ID 为 LAYOUT_TO_HIDE**的LinearLayout，`Visible.GONE`然后根 FrameLayout 将折叠其高度，从而为您提供一个带有非空白标题的“隐藏”。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-05-28T11:52:20.417

设置`layout_width`并设置`layout_height`到`0`您要隐藏项目的位置，通过这样做

```
//if item's parent layout is LinearLayout, change according to your item xml
holder.itemView.setLayoutParams(new LinearLayout.LayoutParams(0,0)); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-08-19T18:29:00.983

此线程中的所有回复都建议使用新的包装器视图，这是有代价的。完全隐藏视图的正确方法是将边距设置为 0，同时将可见性设置为*GONE*。在此代码示例中，*cardView*是我要隐藏的视图。*cardView*的直接父级是 RecyclerView，这就是我们使用 RecyclerView.LayoutParams 的原因——记得用正确的布局参数替换。

```
if (cardView.getVisibility() != GONE) {
    cardView.setVisibility(GONE);
    RecyclerView.LayoutParams layoutParams = (RecyclerView.LayoutParams) cardView.getLayoutParams();
    layoutParams.setMargins(0, 0, 0, 0);
    cardView.setLayoutParams(layoutParams);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-26T14:13:54.123

如果这仍然需要，有一个很好的方法来处理它：

```
parentView.removeView(childView); 
```

这里有一个例子：

```
final WhatEverLayout parentView, childView;
parentView = (WhatEverLayout)findViewById(R.id.parentView_xml);
childView =(WhatEverLayout)findViewById(R.id.childView_xml);
parentView.removeView(childView); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-12T22:15:42.743

您可以做的是设置一个 if 语句，每当条件将可见性设置为“GONE”时，将视图设置为包装内容并且您的空间将是空闲的，我做到了，它适用于搜索栏

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-09-25T06:44:10.253

这是我的解决方案。创建一个名为“special.xml”的新布局文件，将代码复制到文件中。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
    android:visibility="gone">

</LinearLayout> 
```

使用条件来**膨胀新视图内的空布局**。不要使用**view.setVisibility(View.GONE);** .

```
if(true){
  view=mInflater.inflate ( R.layout.special,parent, false );
}else{
  view=mInflater.inflate(R.layout.normal,parent,false);
  // The view that you want to be visible
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-26T03:51:33.997

header_layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
        <LinearLayout
            android:id="@+id/mHeaderView"
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">
            <TextView
                android:id="@+id/mNoHelpLayout"
                android:layout_width="match_parent"
                android:layout_height="176dip"
                android:background="#ffffffff"
                android:gravity="center"
             />
       </LinearLayout>
   </LinearLayout> 
```

爪哇代码：

```
LayoutInflater mInflater =(LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View outerView =  mInflater.inflate(R.layout.header_layout, null);
mHeaderView = (LinearLayout) outerView.findViewById(R.id.mHeaderView); 
```

使用 mHeaderView.setVisiable() 来控制可见而不是 outerView.setVisiable()。这个对我有用。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-03-16T12:11:38.303

```
If you want to show itemView 

if (ItemBean.isShow()) 
{
   holder.itemView.setVisibility(View.VISIBLE);
   holder.itemView.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT));
 } else
 {
     holder.itemView.setLayoutParams(new LinearLayout.LayoutParams(0, 0));
     holder.itemView.setVisibility(View.GONE);
 } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-08-02T12:07:55.070

我在使用时遇到了类似的问题`TransitionManager.beginDelayedTransition()`，在`Layout Inspector tool`我看到视图是`Gone`，但它仍然占用空间，我认为这是 Android 中的错误，解决方法是执行可见性块`View.post(Runnable action)`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-11-12T21:50:34.473

对我来说，如果我在下一个运行循环中进行显示/隐藏，它就会起作用。

```
parentView.post { 
   childViewToHide.visibility = View.GONE
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-06-12T18:42:23.540

最简单的方法是在孩子可见性改变后强制父视图重新测量自己的高度。
尝试这样的事情：

```
parentView.setLayoutParams(new LinearLayout.LayoutParams(MATCH_PARENT, WRAP_CONTENT)); 
```

在这种情况下，父视图是一个**LinearLayout**。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-09-30T08:22:11.030

您可以使用 ： `viewToHide?.postDelayed({ viewToHide?.visibility = View.GONE }, durationInMillis)`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-03-16T07:49:01.763

> **一个通用且简单的解决方案是避免所有这些代码：**

您需要在要隐藏的**一组视图上添加容器布局或父布局。**它可以是 CardView 或 FrameLayout 等任何东西。

只是它必须是您要隐藏的视图的父级。而且你不会得到所有这些空白。因为它将考虑隐藏整个容器，而不是考虑隐藏单个视图，从而避免空白。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-01-15T14:00:52.663

将视图填充和边距设置为 0，然后将视图可见性设置为消失解决了我的问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-11-05T10:33:09.257

在我的情况下，我使用的是动画，在我的动画中，我有标志

`android:fillAfter="true"`

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:fillAfter="true">

    <translate
        android:duration="300"
        android:fromYDelta="100%"
        android:toYDelta="0%" />

    <alpha
        android:duration="150"
        android:fromAlpha="0"
        android:toAlpha="1" />
</set> 
```

这导致视图被设置为不可见，即使它被设置为`GONE`.

删除后`android:fillAfter="true"`我没有更多问题，然后视图被正确设置为`GONE`.

* * *

## 回答 #16

> 赞同：-5
> 
> 时间：2015-06-10T20:40:17.247

我不认为这是一个错误..只需使用 GONE 使空白空间消失。CSS 做同样的事情。尝试`display: block`与`visibility: hidden`.

# c# - 通过 LINQ 访问子集的更快方法

> ID：12302177
> 
> 赞同：1
> 
> 时间：2012-09-06T14:17:38.410
> 
> 标签：c#, asp.net, sql, asp.net-mvc, linq

这是一个关于速度的问题 - 有很多记录要访问。

**问题基本信息**

例如，我们将在数据库中拥有三个表。

关系：Order-ProductInOrder 是一对多（一个订单可以有多个产品） ProductInOrder-产品是一对一（订单中的一个产品由一个产品表示）

```
public class Order {
  public bool Processed { get; set; }
  // this determines whether the order has been processed
  // - orders that have do not go through this again
  public int OrderID { get; set; } //PK
  public decimal TotalCost{ get; set; }
  public List<ProductInOrder> ProductsInOrder;
  // from one-to-many relationship with ProductInOrder
  // the rest is irrelevant and will not be included here
}
//represents an product in an order - an order can have many products
public class ProductInOrder {
  public int PIOD { get; set; } //PK
  public int Quantity{ get; set; }
  public int OrderID { get; set; }//FK
  public Order TheOrder { get; set; }
  // from one-to-many relationship with Order
  public int ProductID { get; set; } //FK
  public Product TheProduct{ get; set; }
  //from one-to-one relationship with Product
}
//information about a product goes here
public class Product {
  public int ProductID { get; set; } //PK
  public decimal UnitPrice { get; set; } //the cost per item
  // the rest is irrelevant to this question
} 
```

假设我们收到一批订单，我们需要对其应用折扣并找到订单的总价。这可能适用于从 10,000 到超过 100,000 个订单的任何地方。其运作方式是，如果订单有 5 个或更多产品，每个产品的成本为 100 美元，我们将为总价提供 10% 的折扣。

**我试过的**

我尝试了以下方法：

```
//this part gets the product in order with over 5 items
List<Order> discountedOrders = orderRepo
  .Where(p => p.Processed == false)
  .ToList();
List<ProductInOrder> discountedProducts = discountedOrders
  .SelectMany(p => p.ProductsInOrder)
  .Where(q => q.Quantity >=5 )
  .ToList();
discountedProducts = discountedProducts
  .Where(p => p.Product.UnitPrice >= 100.00)
  .ToList();
discountOrders = discountedOrders
  .Where(p => discountProducts.Any(q => q.OrderID == p.OrderID))
  .ToList(); 
```

这非常慢并且需要永远运行，当我在它上面运行集成测试时，测试似乎超时。我想知道是否有更快的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:24:37.473

尽量**不要**`ToList`在每次查询后调用。

当您调用`ToList`查询时，它会被执行，并且对象会从内存中的数据库加载。基于第一个查询结果的任何后续查询都在列表的内存中执行，而不是直接在数据库中执行。您在这里要做的是在数据库上执行整个查询并仅返回那些验证您所有条件的结果。

```
var discountedOrders = orderRepo
  .Where(p=>p.Processed == false);
var discountedProducts = discountedOrders
  .SelectMany(p=>p.ProductsInOrder)
  .Where(q=>q.Quantity >=5);
discountedProducts = discountedProducts
  .Where(p=>p.Product.UnitPrice >= 100.00);
discountOrders = discountedOrders
  .Where(p=>discountProducts.Any(q=>q.OrderID == p.OrderID)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:32:24.023

好吧，一方面，结合这些调用会加快一些速度。试试这个：

```
discountOrders =  orderRepo.Where(p=>p.Processed == false && p.SelectMany(q=>q.ProductsInOrder).Where(r=>r.Quantity >=5 && r.Product.UnitPrice >= 100.00 && r.OrderID == p.OrderId).Count() > 0).ToList(); 
```

请注意，这未经测试。我希望我的逻辑是正确的——我想我做到了，但如果我没有，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:38:11.377

与@PhillipSchmidt 类似，您可以合理化您的 Linq

```
var discountEligibleOrders =
 allOrders
   .Where(order => !order.Processed 
                   && order
                    .ProductsInOrder
                    .Any(pio => pio.TheProduct.UnitPrice >= 100M 
                                && pio.Quantity >= 5)) 
```

删除所有这些讨厌的`ToList`语句是一个很好的开始，因为您从数据库中提取的集合可能比您需要的要大得多。让数据库完成工作。

要获取每个订单及其价格（假设折扣价为 0.9*标价）：

```
var ordersAndPrices =
 allOrders
   .Where(order => !order.Processed)
   .Select(order => new {
                     order, 
                     isDiscounted = order
                       .ProductsInOrder
                       .Any(pio => pio.TheProduct.UnitPrice >= 100M 
                                   && pio.Quantity >= 5)
                    })
   .Select(x => new {
                  order = x.order, 
                  price = x.order
                           .ProductsInOrder
                           .Sum(p=> p.Quantity 
                                    * p.TheProduct.UnitPrice
                                    * (x.isDiscounted ? 0.9M : 1M))}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T14:58:56.867

我知道你有一个可接受的答案，但请尝试这个以提高速度 - PLINQ（并行 LINQ）这将获取 4000 个列表，如果你有 4 个内核，它将在每个内核上过滤 1000 个，然后整理结果。

```
 List<Order> orders = new List<Order>();
  var parallelQuery = (from o in orders.AsParallel()
                       where !o.Processed
                       select o.ProductsInOrder.Where(x => x.Quantity >= 5 &&
                                                           x.TheProduct.UnitPrice >= 100.00 && 
                                                           orders.Any(x => x.OrderID = x.OrderID)); 
```

请看这里：

在许多情况下，PLINQ 可以通过更有效地使用主机上的所有可用内核来显着提高 LINQ to Objects 查询的速度。这种提高的性能为桌面带来了高性能计算能力

[http://msdn.microsoft.com/en-us/library/dd460688.aspx](http://msdn.microsoft.com/en-us/library/dd460688.aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-06T14:29:16.870

将其移至 1 个查询中，但实际上您应该将其移至 SSIS 包或 sql 作业中。您可以轻松地将其设置为在不到一秒的时间内运行的存储过程。

# mysql - MySQL计数查询一对多关系

> ID：12302183
> 
> 赞同：-4
> 
> 时间：2012-09-06T14:17:58.970
> 
> 标签：mysql, sql, count, group-by, one-to-many

我有两个表：“成员”和“问题”。每个成员可以提出多个问题。

我想检索被问到超过 3 个问题的成员的数量

到目前为止我的查询：

```
SELECT DISTINCT  q.question_id, COUNT( q.question_id ) AS question_id_count
FROM member m

inner join question q on m.member_id = q.member_id

GROUP BY m.member_id
HAVING (
COUNT( q.question_id ) >3
) 
```

我可以做些什么来改进这个查询？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:21:16.493

这是不正确的。

如果您按会员分组，则应显示会员！

这`distinct`是不必要的，它只会显示每个成员一次（除非你有重复的成员！）

考虑到这个评论：

> 您要检索提出超过 3 个问题的成员数量还是每个提出超过 3 个问题的成员提出的问题数量？

第一个选项是

```
select count(*) from 
(SELECT m.member_id 
    FROM member m
    inner join question q on m.member_id = q.member_id
    GROUP BY m.member_id
    HAVING COUNT(q.question_id) >3) T 
```

第二个选项将是

```
SELECT m.member_id, COUNT( q.question_id ) AS question_id_count
FROM member m
inner join question q on m.member_id = q.member_id
GROUP BY m.member_id
HAVING COUNT(q.question_id) >3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:23:46.783

根据您的陈述`i want to retrieve count of member whose asked` **`more than 3 question`**，加入表格并将它们分组`memberID`。

```
SELECT  a.member_id, count(b.member_id) totalQuestion
FROM    member a
        INNER JOIN question b
            ON a.member_id = b.member_id
GROUP BY a.member_id
HAVING count(b.member_id) > 3 
```

正如您在这种情况下看到的那样`ON a.member_id = b.member_id`，它通过链接两个表`memberID`（*您可以自由地将 columnName 更改为表上存在的名称。*）

# git - TeamCity 没有将一些新文件推送到 Git 中

> ID：12302186
> 
> 赞同：4
> 
> 时间：2012-09-06T14:18:10.203
> 
> 标签：git, teamcity, teamcity-7.1

最近我在我的 web 项目中添加了一些 JS 文件：`WebProject.csproj`

我在 TeamCity 中有一个 CI 定义，设置为使用 MSBuild 使用以下命令行参数构建解决方案：

```
/p:OutDir=%teamcity.build.workingDir%\ReleaseBuild\;Configuration=Release;UseWPP_CopyWebApplication=True;PipelineDependsOnBuild=False 
```

这样，如果其他构建定义需要，我可以在后续步骤中轻松进行部署。

但是，我添加的一些最近的 js 文件失败了 MSBuild，因为它无法进行管道复制，因为它们不存在于它们存在于 git 中的文件夹中......

我设置了“在构建之前清理所有文件”，如下面的 TeamCity 日志所示：

```
[20:27:33]Updating sources: server side checkout (5s)
[20:27:33][Updating sources] Will perform clean checkout. Reason: "Clean all files before build" turned on
[20:27:33][Updating sources] Transferring cached clean patch for VCS root: GitProjectVCS
[20:27:37][Updating sources] Repository sources transferred: 36.49Mb total
[20:27:37][Updating sources] Removing C:\TeamCity\buildAgent\work\d002fb661417bf57
[20:27:37][Updating sources] Updating C:\TeamCity\buildAgent\work\d002fb661417bf57 
```

当我执行新`git clone`操作时，脚本文件夹中存在 js 文件，就像我添加它们一样。但是，当我检查 TeamCity 将所有文件从 git 放入 js 文件的工作文件夹时，Scripts 文件夹中不存在...

我错过了什么吗？谢谢您的帮助。

# c# - C# 转换问题 - 简洁

> ID：12302187
> 
> 赞同：1
> 
> 时间：2012-09-06T14:18:11.533
> 
> 标签：c#, .net

对不起，糟糕的问题标题。有没有办法在一条线上做到这一点：

```
Button button = (Button)Gridview.Cells[0].FindControl("controlname");
button.Enabled = (some boolean); 
```

例如，vb 中的直接广播将允许：

```
DirectCast(Gridview.Cells(0).FindControl("controlname"), Button).Enabled = (some boolean value) 
```

还是需要在两条线上？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T14:19:02.763

我猜你尝试了明显的但被绑定优先级抓住了。除非另有说明，否则方法和属性将在强制转换之前完成。使用括号，您可以使其先进行强制转换，然后在 now cast 控件上调用该属性。

```
((Button)Gridview.Cells[0].FindControl("controlname")).Enabled = (some boolean); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T14:19:27.837

只需将您的原始表达式括在括号中：

```
((Button)Gridview.Cells[0].FindControl("controlname")).Enabled = true; 
```

# java - Java：什么是最有效的连接池？

> ID：12302192
> 
> 赞同：1
> 
> 时间：2012-09-06T14:18:19.750
> 
> 标签：java, hibernate, deployment, connection-pooling

我已经熟悉了 3 个不同的流行连接池（已经阅读了现有问题和主页的优缺点）：

C3P0、DBCP、BoneCP。

1.  他们是否有任何新的连接池可用，可以提供更好的性能。
2.  这 3 个中的哪一个是**业内最流行的**- 我很乐意阅读以下答案：我们在部署项目中使用 X 连接池，我们强烈建议您使用它而不是...，为什么?.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:34:50.750

对于我们的项目，我们使用 BoneCP：

[http://jolbox.com/](http://jolbox.com/)

它比 C3P0 和 Apache 的 DBCP 性能要好得多。

# ios - 小部件的 iOS UIAppearance 自定义形状

> ID：12302193
> 
> 赞同：-1
> 
> 时间：2012-09-06T14:18:20.643
> 
> 标签：ios, shapes, uiappearance

我一直在查看 UIAppearance 的很多示例代码，并且似乎有很多示例，其中小部件和状态栏是不同的颜色，或者是漂亮的背景图像，但是，如何创建这样的东西是不同的形状？？例如，看看这个[http://i.imgur.com/tb2Qd.jpg](http://i.imgur.com/tb2Qd.jpg) - 这是一个实用应用程序的屏幕截图。一个人是如何制作这些按钮的，尤其是开关（一旦显然有艺术品）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:52:09.460

一种解决方案是使用透明度。只需创建一个带有不对称按钮的矩形图像，使您不用于按钮的所有空间都透明。现在在界面生成器中创建一个新按钮，将类型设置为自定义并将您创建的图像附加到按钮作为背景。

另一方面，您可以只修改标准控件。我不知道是否可以直接操作 UISwitch 控件，但我自己使用 UISlider 来创建一个类似于滑动解锁控件的外观。

例如：

`[slider setThumbImage:[UIImage imageNamed:@"SliderButton_right.png"] forState:UIControlStateNormal]; UIImage *minTrackImage = [UIImage imageNamed:@"Clearpixel.png"]; [slider setMinimumTrackImage:minTrackImage forState:UIControlStateNormal]; [slider setMaximumTrackImage:minTrackImage forState:UIControlStateNormal];`

看起来像：

[滑块.png](http://i.stack.imgur.com/HzNL3.png)

没有背景。

# java - 无法从 AsyncTask 启动 WebView

> ID：12302194
> 
> 赞同：1
> 
> 时间：2012-09-06T14:18:25.293
> 
> 标签：java, android, android-asynctask, android-webview, android-context

我想`WebView`从我的开始，`AsyncTask`但它似乎没有运行。这是我的`onPostExecute`方法的样子：

```
 public class Viewer extends AsyncTask<URI, Integer, URI> {

      private Activity objContext = null;

      public Viewer(Activity objContext) {
        this.objContext = objContext;
      }

      protected void onPostExecute(URI uriWebpage) {
          WebView wbvBrowser = new WebView(this.objContext);
          wbvBrowser.getSettings().setBuiltInZoomControls(true);
          wbvBrowser.getSettings().setJavaScriptEnabled(true);
          wbvBrowser.loadUrl(uriWebpage.toString());
      }

  } 
```

我的任务被我的应用程序中的两个活动使用，因此我的全局`objContext`变量是`Activity`. 如果我将`objContext`变量的类型更改为调用类的名称，它可以正常工作，但是我无法从另一个调用类实例化我的任务。我像这样实例化我的任务。

```
Viewer mytask = new Viewer(this); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:40:42.537

你`setContentView`是从原始布局到 webView 还是你有一个容器来放置 webview？否则我认为不会出现 webView UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:43:24.870

我已经解决了这个问题。`Activity`它与or的使用无关`Context`。两者都工作得很好。某些 URL 似乎没有加载`WebView`. 我将 URL 更改`WebView`为指向 Google 之类的网站，它工作得很好。似乎如果 URL 不正确，`WebView`则不会引发异常，但也不会打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:46:26.977

你确定你执行你的 AsyncTask

```
 @Override
            protected void onPostExecute(Void result){              

            }
        }.execute(); 
```

还需要类名

```
Viewer mytask = new Viewer(YourclassName.this); 
```

// 或者这可能会帮助你

```
 private Context  mcontext;

          public Viewer(Context  objContext) {
            this.mcontext= objContext;
          }

  protected void onPostExecute(URI uriWebpage) {
          WebView wbvBrowser = new WebView(((Activity)(mcontext)));

      } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-06T14:22:46.907

我不知道为什么会发生这种情况，但你为什么不通过`Intent`你的`onPostExecute(Uri uriWebpage)`?

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(uriWebPage);
startActivity(intent); 
```

如果此解决方案不满足您的要求，请从 LogCat 发布错误堆栈跟踪。

# java - 从 Java 中限制 CPU

> ID：12302196
> 
> 赞同：8
> 
> 时间：2012-09-06T14:18:41.987
> 
> 标签：java, multithreading, jvm, cpu, throttling

我在这个（和其他）论坛上看到了很多同名的问题，但似乎没有一个能完全解决我的问题。就是这样：我有一个 JVM，它吃掉了托管它的机器上的所有 CPU。我想限制它，但是我不能依赖Java*外部*的任何限制工具/技术，因为我无法假设这个 Vm 将在哪里运行。因此，例如，我不能使用处理器关联，因为如果 VM 在 Mac 上运行，则操作系统不会使进程关联可用。

我需要的是说明 Java 中是否存在*确保*线程不占用全部 CPU 的方法。

我想直截了当地指出，我不能使用基于交替进程执行和暂停的技术，正如某些论坛所建议的那样，因为线程需要连续生成值。

理想情况下，我想要一些平均值，例如，设置一些 VM 或线程优先级，或者以某种方式限制 CPU 消耗的百分比。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T14:26:23.650

> 我需要的是说明 Java 中是否存在确保线程不占用全部 CPU 的方法。

除了调整您的应用程序以使用更少的 CPU 之外，我不知道在 Java 中执行此操作。

*   您可以在计算方法中添加一些`Thread.sleep(...);`调用。分析器将帮助向您展示热循环/方法/等。
*   分叉更少的线程也会影响使用的 CPU。移动到固定大小的线程池或减少池中的线程数。
*   问题可能不是 CPU，而是其他资源。例如，观察您的 IO 带宽。减慢网络或磁盘读取/写入速度可能会使服务器恢复正常运行。

在 JVM 之外，您可以使用 ~unix`nice`命令来影响正在运行的 JVM 的优先级以不控制系统。如果可用，这将为其提供 CPU，但会让其他应用程序获得更多 CPU。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:28:03.573

我认为您想要比[设置线程优先级更可靠的](https://stackoverflow.com/questions/1617963/setting-priority-to-javas-threads)东西吗？

如果您想要限制某些不断生成值的代码的执行，您需要考虑将线程所做的工作分块，并在您自己的计时器中进行编码。例如，`java.util.Timer`允许以[固定速率调度执行](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html#scheduleAtFixedRate%28java.util.TimerTask,%20long,%20long%29)。

当调度程序没有其他任务优先于您的任务时，任何其他技术仍将消耗尽可能多的 CPU（每个线程 1 个内核，假设没有阻止并发执行的锁）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:37:01.010

细节很简单，您说“必须不断生成值”，如果这是极端的话，那么CPU饱和实际上就是目标。

但是，如果您将“连续”定义为每秒 X 值，那么还有工作空间。

因为那时您可以在 100% CPU 上运行您的进程，随时间测量值的数量，如果您发现它生成的值比必要的多（超过 X/秒），那么您现在可以将暂停插入到进程中直到价值率达到您想要的目标为止。

该计划是持续监控和调整暂停，以随着时间的推移保持您的价值率。然后，您的进程将占用尽可能多的 CPU 来满足您的 values/sec 目标。

附加物：

如果您有一个满意的值/秒基准，那么插入睡眠将为其他应用程序提供“所有必要的优先级”，但仍保持您的吞吐量。另一方面，如果您没有任何可靠的要求，即要求“在没有其他任何运行时尽可能快地运行，如果其他进程控制 CPU，则对任何结果没有实际要求”，那么这确实是主机操作系统的内核问题，而不是 JVM 有任何直接的、可移植的机制来解决的问题。

在 Unix 系统上，你有 nice(1) 命令来调整进程（而不是线程）优先级，而 Windows 有自己的机制。使用这些命令，您可以将 Java 进程的优先级提高到略高于“空闲”（默认“进程”总是在没有其他东西运行时运行）。但它是特定于平台的，因为这是一个固有的特定于平台的问题。这可以通过启动 Java 程序的平台特定启动脚本（或者甚至是检测平台并在执行实际代码之前“做正确的事情”的 Java 启动器）来管理。

大多数系统将允许您降低自己的进程优先级，但除非您是管理员/超级用户或具有适合您的主机操作系统的任何角色，否则很少有人会让您提高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T14:37:39.157

检查您的代码中是否有任何“紧密循环”。

```
while (true) {
  if (object.checkSomething()) {
    ...
  }
} 
```

如果你这样做了，那么你就在数百万次可能不是时间关键的检查上消耗 CPU 周期。JVM 将负责（因为它不知道检查是否“重要”）并且您将获得 100% 的 CPU。

如果你发现这样的循环，像这样重写它们

```
while (true) {
  if (object.checkSomething()) {
    ...
  }
  try {
    Thread.sleep(100);
  } catch (InterruptedException e) {
    // purposefully do nothing
  }
} 
```

并且 sleep 会主动释放循环内的 CPU，防止它运行得太快（并且检查条件太多次）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-07T20:10:52.900

真的很有趣的线程。我发现 Java 没有提供做我想做的事情的方法，唯一的方法是从JVM*之外。*我最终使用*nice*来改变我的测试（Linux）环境中的调度优先级，仍然需要为基于 WIn 的操作系统找到类似的东西。

Everyone's intervention has been much appreciated.

# wcf - WCF 服务在空闲不到 5 分钟后响应缓慢（Azure 上为 4.0）

> ID：12302203
> 
> 赞同：2
> 
> 时间：2012-09-06T14:19:02.773
> 
> 标签：wcf, c#-4.0, azure

我有一个带有 2 个端点的 WCF 服务，使用在 Azure 中的一个实例上运行的 BasicHttpBinding。当第一次调用服务时，响应需要 13-16 秒（这是意料之中的），后续请求在 150 毫秒到 1000 毫秒之间就足够了，具体取决于请求类型（我正在使用 soapUI 进行测试）。

**但是，如果我在几分钟内**（**少于 4 或 5**分钟）没有发送任何请求，则服务实例似乎不会被重用，因为它需要 13 秒以上的第一个请求。

我在我的 ServiceBehavior(s) 中尝试了“InstanceContextMode = InstanceContextMode.Single”，但这并没有解决问题。

在跟踪中，我可以看到只要服务响应缓慢，**线程 ID 就会发生变化。**

我还记录了从 Application_BeginRequest 被击中到客户端调用方法开始的时间，这似乎是这些“慢”调用期间最大的延迟。我有一些相当大的类代表业务接口，并且正在将实体框架用于在 Azure VM 上运行的 MySQL 数据库。（尽管我认为这不一定是 Azure 问题）。

无论我是调用链接到 DB 操作的复杂消息类型还是只是简单的“Hello World”响应，缓慢的响应都是一样的。

*   即使需要一个新的服务实例，在**IIS 重新启动或应用程序池回收后是否需要与初始加载一样长？**

*   使用静态类的包装器做一些魔术有帮助吗？（我认为不是）。

使用 C# 4.0 / VS2010 Professional 构建

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:44:41.917

发生这种情况的原因可能有很多。我建议您从WCF 服务中的一些[跟踪开始。](http://msdn.microsoft.com/en-us/library/ms751526.aspx)

*   **使用TraceSource**在您的应用程序中添加一些日志记录：

    ```
    private TraceSource ts = new TraceSource("MyApp");

    public string GetData(int value)
    {
        ts.TraceInformation("GetData called with {0}", value);

        return string.Format("You entered: {0}", value);
    } 
    ```

*   在 web.config 中配置 TraceSource 以及 System.ServiceModel 源。

* * *

```
 <system.diagnostics>
    <sources>
      <source name="MyApp" switchValue="All">
        <listeners>
          <add name="xml" />
        </listeners>
      </source>
      <source name="System.ServiceModel" switchValue="All" propagateActivity="true">
        <listeners>
          <add name="xml" />
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add initializeData="Logs.svclog" type="System.Diagnostics.XmlWriterTraceListener" name="xml" />
    </sharedListeners>
    <trace autoflush="true" />
  </system.diagnostics> 
```

* * *

*   打开 svclog 文件，您将能够看到服务中发生的所有事情的详细概述以及每个小步骤需要多长时间。这应该可以帮助您指出问题所在。

![在此处输入图像描述](../Images/95436ffb288fe67d28e56fe2691d56cc.png)

# java - 将对象转换为 Xtext DSL

> ID：12302206
> 
> 赞同：4
> 
> 时间：2012-09-06T14:19:06.600
> 
> 标签：java, dsl, xtext

我定义了一个简单的 Xtext 语法，看起来像这样（简化）：

```
grammar org.xtext.example.mydsl.MyDsl with org.eclipse.xtext.common.Terminals
generate myDsl "http://www.xtext.org/example/mydsl/MyDsl"
import "http://www.eclipse.org/emf/2002/Ecore" as ecore

System:
   'Define System'
   (
     'Define Components' '{' components+=Component+ '}'
   )
   'End'
;

Component:
    'Component' name=ID 'Value' value=Double ';'
;

Double returns ecore::EDouble:
    '-'? INT? '.' INT
; 
```

**我想解决的问题是 - 如何将简单的 Java 对象转换为有效的 xtext 文件？**

为了简化我的问题，假设我们在 Java 中创建了一个组件列表：

```
List<Component> components = new ArrayList<Component>();
components.add(new Component("FirstComponent", 1.0));
components.add(new Component("SecondComponent", 2.0));
components.add(new Component("ThirdComponent", 3.0)); 
```

我喜欢创建的输出文件应该是这样的：

```
Define System
   Define Components { 
       Component FirstComponent Value 1.0;
       Component SecondComponent Value 2.0;
       Component ThirdComponent Value 3.0;
   }
End 
```

xtext 语法检查这个文件是很重要的，所以它是有效的。我希望你对我有任何想法。这是我的一些，但到目前为止我不知道如何实现它们：

想法#1：我知道如何读写文件。在我的脑海中，一个解决方案可能如下所示：我的 Java 代码中有列表，现在我想编写一个看起来像上面的输出文件的文件。之后我喜欢阅读这个文件并通过语法检查错误。我怎样才能做到这一点？

想法 #2：如果我想我会使用 JDOM 从 Java 代码创建一个 xml 文件，我希望我可以在 xtext 中做同样的事情。只需定义一个以“End”结尾的父“Define System”（参见我的输出文件），然后添加一个以“}”结尾的子“Define Components {”，然后将子添加到其中，例如“Component FirstComponent Value” 1.0;”。我希望这不会令人困惑:-)

想法#3：我可以使用如下模板并在大括号“{”...“}”之间添加子元素：

```
Define System
   Define Components { ... }
End 
```

顺便说一句：我已经尝试过[Linking Xtext with StringTemplate code generator](https://stackoverflow.com/questions/10917386/linking-xtext-with-stringtemplate-code-generator)，但这是另一个问题。希望你有什么想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T14:36:55.960

您可以为此使用 Xtext 的序列化。与 Java 的默认序列化 API 不同，Xtext 的实现创建了 DSL。

代码如下所示：

```
Injector injector = Guice.createInjector(new  my.dsl.MyDslRuntimeModule());  
Serializer serializer = injector.getInstance(Serializer.class);  
String s = serializer.serialize(eobj); 
```

`eobj`的实例在哪里`System`。

如果你为你的 DSL 编写了一个格式化程序，输出看起来也不错。

相关博文：[使用 Xtext 的序列化器实现 toString](http://jevopisdeveloperblog.blogspot.ch/2011/03/implement-tostring-with-xtexts.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T20:36:04.763

Xtext 为您提供了基于 EMF 的 AST。该 AST 具有 System 和 Component 等类及其对应的属性，例如 Component 的 Value 属性。这些类在您的语言项目的 src-gen 文件夹中可用。

要实例化这些对象，您必须使用同一个包中也提供的工厂类。

要序列化这样的 AST，可以通过创建资源并保存内容来重用标准 EMF 工具。在序列化期间，AST 被验证。

```
System system = ...; //Creating the AST programmatically
ResourceSet set = new ResourceSetImpl();
Resource resource = set.createResource(URI.create...URI("filename")); //Initializing an EMF resource that represents a file
resource.getContents.add(system); //adding your AST to the file resource
resource.save(); 
```

小注：如果您*不*开发 Eclipse 插件，则必须通过调用生成的 «YourLanguage»StandaloneSetup.doSetup() 静态方法来初始化 Xtext 工具。

对于其他编程验证选项，您可以查看 Xtext 测试框架使用的 ParseHelper 和 ValidatorTester 类。

# sql - 如何在sql中列出用户创建的表名？

> ID：12302209
> 
> 赞同：-1
> 
> 时间：2012-09-06T14:19:10.343
> 
> 标签：sql, oracle11g

我在 sql 11g 中创建了 20 个表并丢失了它们的记录。有什么办法可以列出我创建的表名。 `SELECT table_name FROM user_tables`不是解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-22T07:04:53.167

首先，以**sys**身份登录，然后才能查看整个数据库中的表。

其次，使用**sys运行此查询**

```
SELECT owner, table_name FROM dba_tables WHERE owner='HR'; 
```

这应该显示`HR schema`. 请记住为所有者使用大写字母，`(HR)`否则您将收到错误消息。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:30:19.967

[Oracle 数据库参考](http://docs.oracle.com/cd/B28359_01/server.111/b28320/statviews_5197.htm#REFRN26003)可为您提供帮助。

```
SELECT TABLE_NAME FROM USER_ALL_TABLES 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T15:20:07.450

好吧，如果 user_all_tables 不是您想要的结果，您将不得不通过以下方式依赖 dba_tables：

```
SELECT owner, table_name
  FROM dba_tables 
```

但是为此，您显然需要比 user_tables 更多的权限

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T17:24:04.860

解决此问题的最佳方法是考虑名为 **LAST_ANALYZED**的 ALL_ALL_TABLES 的属性， 它给出了最近分析表的日期。

因此，您可以借助 DATE 函数轻松查询数据库。

# jquery - 使用 $(selector).load("myMethod") 后失去一些 Jquery 方法的功能

> ID：12302212
> 
> 赞同：1
> 
> 时间：2012-09-06T14:19:32.063
> 
> 标签：jquery, model-view-controller, partial-views

这是我的场景...

我正在使用部分视图来加载页面。要加载到页面上的部分视图，我使用 JQuery 方法

```
$("#elementA").load("myMethod") 
```

myMethod 执行 ajax 调用，它返回我的部分视图和对象列表。这一切都很好。问题是在我的一个部分视图中，我有一个应该触发的点击事件

```
$("#elementB").modal() 
```

我打电话后

```
$("#elementA").load("myMethod") 
```

这

```
$("#elementB").modal() 
```

方法没有反应...

相同

```
$("#elementB").modal() 
```

如果我不使用 load() 函数，但我不知道如何在将新元素添加到我的数据库而不使用`$("#elementA").load("myMethod")`...后刷新列表。

我会为此提供任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:23:22.560

您需要确保使用类似`on()`（或`live`在旧版本的 jQuery 中，尽管`on`现在是首选）绑定您的点击事件。

这将确保在进行初始绑定后添加到页面的任何元素也将受到相同的事件处理程序的约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:32:00.737

`$("#elementA").load("myMethod")`将替换其中的所有内容，如果`$("#elementB")`是 , 的子项`#elementA`，那么它当然会被删除。但是你怎么称呼 a `$("#elementB").modal()`？如果它在child 的`onclick`处理程序中`$("#elementA")`- 那么您必须使用 jQuery **on/live**方法来绑定您的处理程序而不是**bind/click**。

# extjs - EXTJS MVC 树存储

> ID：12302214
> 
> 赞同：0
> 
> 时间：2012-09-06T14:19:39.347
> 
> 标签：extjs, treeview, extjs4, extjs-mvc

我有一个树视图，它从树存储中获取其数据。但是，我只能看到作为树结构一部分显示的小文件夹。没有显示节点的名称，当我尝试打印记录时，它只是说它是一个空字符串。这是代码：

应用程序/视图

```
Ext.define('App.view.Hierarchy', {
    alias: 'widget.hierarchy',
    extend: 'Ext.panel.Panel',

    initComponent: function () {

        var config = {

            xtype: 'panel',
            border: false,
            autoScroll: true,
            baseCls: 'topMenu',
            html: '<div class="PageTitle" style="width:600px;"><b>' + LANG.HIERARCHYT + '</b><br>' + LANG.HIERARCHYTxt + '<br>' + '</div>',

            items: [{
                xtype: 'toolbar',
                border: false,
                dock: 'top',
                items: [{
                    xtype: 'button',
                    text: LANG.BTADDREG,
                    iconCls: 'icon-add-tb',
                    cls: 'tip-btn',
                    iconAlign: 'right',
                    action: 'addRegion',
                    id: 'ADDREGION'
                }]

            },

            {
                xtype: 'treepanel',
                title: 'Hierarchy Tree',
                id: 'hierarchyTree',
                border: false,
                alias: 'widget.hierarchyTree',
                height: 1000,
                viewConfig: {
                    enableDD: true,
                    plugins: {
                        ptype: 'treeviewdragdrop'
                    }
                },
                collapsible: false,
                useArrows: true,
                rootVisible: false,
                store: Ext.create('Campus.store.HierarchyTree'),
                displayField: 'Title',
                multiSelect: false,
                singleExpand: false,

            }]
        }

        var holder = Ext.getCmp('center');
        holder.remove(0);
        holder.add(Ext.apply(config));
        this.callParent(arguments);
    }
}); 
```

模型

```
Ext.define('App.model.HierarchyTree', {
    extend : 'Ext.data.Model',
    fields : ['Title', 'ID', 'LevelID', 'ParentID'] 
}); 
```

店铺

```
Ext.define('App.store.HierarchyTree', {
    extend: 'Ext.data.TreeStore',
    model: 'App.model.HierarchyTree',
    storeID: 'HierarchyTree',

    proxy: {
        type: 'ajax',
        url: 'data/Locations.aspx',

        reader: {

        },
        actionMethods: {
            create: 'POST',
            read: 'POST',
            update: 'POST'
        },
        extraParams: {
            mode: 'HIERARCHYFULLLIST'

        }
    },
    autoLoad: true
}); 
```

控制器

```
Ext.define('App.controller.Hierarchy', {
    extend: 'Ext.app.Controller',
    stores: ['Me', 'Regions', 'Areas', 'Towns', 'HierarchyTree'],
    model: ['Me', 'Teams', 'Regions', 'User', 'HierarchyTree'],
    views: ['App.view.Hierarchy', 'App.view.AddRegions'],
    refs: [{
        ref: 'myHierarchyTree',
        selector: 'hierarchyTree'
    }],

    init: function () {

        this.getHierarchyTreeStore().load();

        this.control({
            'button[action=addRegion]': {
                click: this.addRegion
            },
            '#hierarchyTree': {
                itemclick: this.itemclick

            }
        })
    },
    itemclick: function (view, record) {
        console.log(record.get('Title'))
    }
}); 
```

此外，返回的 JSON 是：

```
{"text":".","children": [{"text":"Asia Pacific","id":"537","level":"1", "expanded": 
 false,"singleClickExpand":true,"children":[{"text":"Japan", "cls":"xtreenode-Level2-
Indent", "id":"538", "hl1":"537","level":"2","singleClickExpand":true, "expanded":   
false, "children":[]}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:28:15.367

Treepanel 的显示字段默认为文本，这对于返回的 json 来说是可以的，但问题是存储模型，它应该包括文本、cls ..以及您在 json 中具有的其他属性作为字段。否则，这些将不会映射到记录，您会得到空文本。

```
Ext.define('App.model.HierarchyTree', {
extend : 'Ext.data.Model',
fields : ['Title', 'ID', 'LevelID', 'ParentID', 'text', 'level','cls,....] 
```

**编辑**

您已将 displayField 修改为 Title，但 json 不包含 title 属性。您必须进行简单的修复，如果文本实际上是标题，则修改模型。您可以通过设置到该字段的映射来做到这一点。

```
 Ext.define('App.model.HierarchyTree', {
    extend : 'Ext.data.Model',
    fields : [{name:'Title',type:'string',mapping:'text'}, 'ID', 'LevelID', 'ParentID',] 
```

这将导致标题由 json 中的文本值填充。

您也可以删除 displayField 配置，然后应用文本值，但这仍然意味着“标题”值将为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:50:40.160

好的，终于明白了：）将树中的显示字段设置为“文本”

```
 displayfield : 'text' 
```

而且，再次感谢 nscrob

还有一个问题，你能否给我一些指导，告诉我如何根据被点击的树的级别打开不同的视图

这行得通。

```
if (record.get('level')==1) 
    {
        this.erWin = Ext.create('App.view.EditRegions');

        this.erWin.showWin();
    }
    else{
        //open another_view
    } 
```

# java - How to bypass accessDeclaredMembers permission as applet?

> ID：12302230
> 
> 赞同：2
> 
> 时间：2012-09-06T14:20:37.363
> 
> 标签：java, security, reflection, applet, greenfoot

I used some code from another question to access the private field "classes" in the Java ClassLoader. This works fine, however when I move it to an applet it gets messed up with this exception: `access denied (java.lang.RuntimePermission accessDeclaredMembers)`. I've done some searching and tried using PrivlegedExceptionAction to skip that, but it isn't working. So my question is this: is is possible to bypass this, and if not what is another way to get a list of classes?

Reflection Code:

```
final ClassLoader cLoader = getClass().getClassLoader();
            final Field f = ClassLoader.class.getDeclaredField("classes");
            AccessController.doPrivileged(new PrivilegedExceptionAction() {
                    public Object run() throws Exception {
                        f.setAccessible(true);
                        return null;}});
            Vector<Class> classes = (Vector<Class>)f.get(cLoader);
            cList.addAll(classes); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:28:50.500

Digitally sign the applet code (then get the user to accept it when prompted) to gain full privileges.

# python - 进程没有进入后台

> ID：12302234
> 
> 赞同：0
> 
> 时间：2012-09-06T14:20:52.513
> 
> 标签：python

我正在运行如下所示的 python 脚本。该脚本对远程机器执行 ssh 并在后台运行 ac 程序。但是在运行 python 脚本时，我得到以下输出：

这意味着 a.out 已运行并且 pid 为 [1] 2115 。但是，当我登录到远程机器并通过“ps”命令检查 a.out 时，我看不到它。另一个观察结果是，当我在 python 脚本 thread.sleep(20) 中添加延迟语句时，当脚本仍在运行时，如果我签入远程机器，a.out 是活动的。

```
 #!/usr/bin/python
            import HostMod   #where ssh function is wrote
            COMMAND_PROMPT1 = '[#$] ' 
            p = HostMod.HostModule()
            obj1=p.HostLogin('10.200.2.197', 'root', 'newnet') #ssh connection to remote system
            obj1.sendline ('./a.out > test.txt &') #sending program to remote machine to executethere
            obj1.expect (COMMAND_PROMPT1)
            print obj1.before
            #a.out program 
            int main()
            {
                    while(1)
                    {
                            sleep(10);
                    }

                    return 0;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:39:58.807

尝试使用`nohup`

```
...
obj1.sendline ('nohup ./a.out > test.txt &') #sending program to remote machine to executethere 
```

但是您真的不应该使用 shell 通过 ssh 调用命令。ssh 协议内置了对运行命令的支持。我不确定你的 HostMod 模块是如何工作的，但你可以从你的 shell 中尝试这个（很容易移植使用`subprocess`）：

```
ssh somehost nohup sleep 20
<Ctrl+C>

ssh somehost
ps ax | grep sleep 
```

你应该看到你的`sleep`进程仍在运行。此方法不会实例化 shell，这更可靠，因为您可能控制也可能不控制运行哪个 shell、`~/.(...)rc`文件中的内容等。总而言之，更便携。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:24:15.180

请尝试给出 ./a.out 的绝对路径

# php - 如何在基于模块的应用程序中集成 Doctrine 2 和 Zend Framework 1.12

> ID：12302241
> 
> 赞同：2
> 
> 时间：2012-09-06T14:21:16.910
> 
> 标签：php, zend-framework, module, doctrine-orm

我一直在寻找有关如何集成 Doctrine 2 和 Zend Framework 1.12（或 1.11 或其他 - 我真的不知道它是否重要但我使用的是 1.12）的解释。我可以在 Stack Overflow 中找到几篇博客文章，甚至解决问题，但在阅读完一篇之后，我无法得到我想要的东西：**在模块化应用程序中做**。因此，如果有人能给我实现这一目标的钥匙，我将不胜感激。

非常感谢你！

**编辑：**
谢谢你们的回复，但最近发布的 ZF2 让我决定离开 ZF1，以便利用所有新的改进和功能。正如@KTastrophy 所说，现在集成 ZF 和 Doctrine 要容易得多（我什至敢说一切都更容易，更符合 ZF2）。多谢一次！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T16:58:28.917

使用原则 PEAR 安装可以轻松地将原则 2 与 ZF 集成。安装后，您只需将其放入引导程序中：

```
protected function _initDoctrine() {
    require_once "Doctrine/ORM/Tools/Setup.php";
    \Doctrine\ORM\Tools\Setup::registerAutoloadPEAR();

    $options = $this->getOptions();

    $loader = new \Doctrine\Common\ClassLoader('YourNamespace', realpath(APPLICATION_PATH . "/../library"));
    $loader->register();

    $isDevMode = (APPLICATION_ENV == 'production') ? false: true;
    $entityManager = \Doctrine\ORM\EntityManager::create(
        $options['doctrine']['dbal'],
        \Doctrine\ORM\Tools\Setup::createYAMLMetadataConfiguration(array(
            realpath(APPLICATION_PATH."/../library/YourNamespace/Yaml"),
        ), $isDevMode)
    );

    Zend_Registry::set('entityManager', $entityManager);

    return $entityManager;
} 
```

从配置文件中`$this->getOptions()`检索数据库名称、用户和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:22:18.800

如果以本教程为例

[http://christian.soronellas.es/2010/12/19/zend-framework-and-doctrine-2/?lang=en](http://christian.soronellas.es/2010/12/19/zend-framework-and-doctrine-2/?lang=en)

看这部分配置代码

```
$config = new Configuration();         
$config -> setMetadataCacheImpl($cache);         
$driverImpl = $config -> newDefaultAnnotationDriver($options['entitiesPath']);         
$config -> setMetadataDriverImpl($driverImpl);        
 $config -> setQueryCacheImpl($cache);        
 $config -> setProxyDir($options['proxiesPath']);         
$config -> setProxyNamespace('Application\Models\Proxies');         
$config -> setAutoGenerateProxyClasses(('development' == APPLICATION_ENV));        
 $em = EntityManager::create(             $this -> _buildConnectionOptions($options),             $config        ); 
```

函数 newDefaultAnnotationDriver 实际上采用了一个实体路径数组。这为您创造了发挥创造力的机会。当我发现这一点时，我只是在每个模块中创建了一个实体文件夹，并将每个路径沿数组中的 newDefaultAnnotationDriver 参数传递。当然，通过这样做，您需要为每个模块设置命名空间。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-08T13:55:09.260

我用[比斯纳](https://github.com/guilhermeblanco/ZendFramework1-Doctrine2)

您应该应用此补丁[https://github.com/guilhermeblanco/ZendFramework1-Doctrine2/pull/45](https://github.com/guilhermeblanco/ZendFramework1-Doctrine2/pull/45)

这对我很有效。

在控制器中，我有这个功能来检索实体管理器

```
/**
 * Retrieve the Doctrine Container.
 *
 * @return Doctrine\ORM\EntityManager
 */
public function getEntityManager()
{
    return $this->getInvokeArg('bootstrap')->getResource('doctrine')->getEntityManager();
} 
```

# visual-studio-2010 - 在 aspx 标记中设置点并跳转到它

> ID：12302242
> 
> 赞同：1
> 
> 时间：2012-09-06T14:21:23.800
> 
> 标签：visual-studio-2010, resharper

这是否可以使用 resharper 或只是视觉设置来标记 aspx 标记中的某些行，然后滚动页面并跳转到选定的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:58:24.630

你是说书签？使用 ReSharper，您可以按 Ctrl-Shift-1（或 2、或 3...或 9）标记或取消标记某行，然后按 Ctrl-1（或 2、或 3...或 9）跳转到它.

仅使用 Visual Studio 按 Ctrl+B,T 标记或取消标记某行，然后按 Ctrl+B,N 跳转到下一个标记的行。

也许我只是不明白你需要什么，那么请尝试澄清它。

# android - 如何在android中为不同的方向创建不同的布局？

> ID：12302243
> 
> 赞同：0
> 
> 时间：2012-09-06T14:21:26.040
> 
> 标签：android, eclipse, android-layout, orientation, content-assist

我想为不同的方向提供不同的 activity.xml 文件。我创建了另一个名为 name 的文件夹`layout-land`。当我将 activity_main.xml 文件复制并粘贴到其中时，屏幕大小会自动面向横向。

但是这样做之后，代码辅助不起作用。当我按下时它显示以下错误`ctrl+s`

`Content assist not available at the current location`

这是什么原因？我为两个方向创建不同的布局是否做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:25:26.863

对我来说听起来像是 Eclipse 错误（谷歌搜索“当前位置不可用的内容辅助给了我很多点击）；尝试在设备上运行您的应用程序，它很可能会工作。听起来不像你已经完成了哪里不对了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:26:27.270

这听起来更像是一个特定于 IDE 的问题。你这样做的方式是正确的。假设您的布局与 layout-land 的另一个内部名称相同，那么您应该很高兴。试一试。

# vba - 通过代码在 Outlook 中发送/接收

> ID：12302244
> 
> 赞同：3
> 
> 时间：2012-09-06T14:21:42.777
> 
> 标签：vba, excel, outlook

如果我在 Excel VBA 中使用

```
Sub CreateOL()
    On Error Resume Next
        Set myOlApp = GetObject(, "Outlook.Application")
    If Err.Number = 429 Then
        Set myOlApp = CreateObject("Outlook.Application")
    End If
    On Error GoTo 0
End Sub 
```

是否可以强制`myOLAPP`发送/接收。请问有人可以建议它是如何完成的吗？

我已经尝试了以下方法，但它对我不起作用。

```
 Set nsp = myOlApp.GetNamespace("MAPI")
 Set sycs = nsp.SyncObjects
 For i = 1 To sycs.Count
    Set syc = sycs.Item(i)

    syc.Start

 Next 
```

另外，如何使 myOlApp 可见？`myOlApp.Visible = True`并且`myOlApp.Application.Visible = True`不起作用

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:08:46.680

您使用的是哪个 Outlook 版本？我用 Outlook 2010 对此进行了测试，它可以工作。

**注意**：我没有做任何错误处理。我相信你可以解决这个问题。

```
Public Sub Sample()
    Dim oLook As Object
    Dim nsp As Object, objSyncs As Object, objSync As Object
    Dim i As Long

    Set oLook = GetObject(, "Outlook.Application")

    Set nsp = oLook.GetNamespace("MAPI")

    Set objSyncs = nsp.SyncObjects

    For i = 1 To objSyncs.Count
        Set objSync = objSyncs.Item(i)
        objSync.Start
    Next
End Sub 
```

MS Outlook 有 2 种类型的窗口

1.  文件夹资源管理器和
2.  个别项目的检查员。

如果你想显示一个特定的文件夹，你可以为它启动资源管理器，然后使用`.Activate`或`.Display.`另一种方法是使用`MAPIFolder.Display`方法。

# web-config - 生产只读环境的 Sitecore web.config 和文件结构

> ID：12302260
> 
> 赞同：6
> 
> 时间：2012-09-06T14:22:51.063
> 
> 标签：web-config, sitecore, sitecore6

我正在计划 SiteCore 的企业部署...

用户只能在后端服务器上编辑内容..我计划在生产中仅部署正确运行我的站点所需的文件和配置...（从 SiteCore 文件夹中剥离的 Vanilla SiteCore 站点.. .)

所以我想我需要 100% SiteCoreAssemblies 和配置...更具体地说，我想知道如何从配置中删除 Web 编辑和内容批准角色所需的所有未使用的东西...。

让我知道是否有任何指导/最佳实践...或任何建议以提高安全性并部署运行的最低配置，将不胜感激...谢谢 Stelio

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T13:28:22.993

我挖掘这个的唯一原因是因为我在不久的将来会这样做：

看看@Christian Hagelid 指出的“[配置生产环境”文档。](http://sdn.sitecore.net/upload/sdn5/developer/configuring%20production%20environments/configuring%20production%20environments.pdf)

更具体地说：1.2.2 步骤 2\. 清洁溶液（可选）

1.  删除不需要的文件 删除以下文件：
    *   /Indexes 文件夹 - 如果您没有在实现中使用索引。
    *   /sitecore 文件夹中的所有内容，除了： -/service -shell/sitecore.version.xml -/login/default.css -/images
    *   /App_Config/Commands.config
    *   /App_Config/ConnectionStringsSQLite.config
    *   /App_Config/Prefetch/Core.config
    *   /App_Config/Prefetch/Master.config
    *   /App_Config/Icons.config
    *   /App_Config/LanguageDefinitions.config
    *   /App_Config/Portraits.config
    *   /WebSite/web.config.sqlite *
    *   /网站/webedit.css
2.  从 web.config 文件中删除或注释以下部分：
    *   事件
    *   工作流程历史存储
    *   处理器
    *   数据视图
    *   页面扩展器
    *   控制源
    *   替代品
    *   用于“shell”站点的 fastCache。
    *   观察者
    *   命令
    *   语言定义
    *   图标
    *   肖像
    *   出版
    *   观察者媒体和观察者配置
    *   来自 httpModules 和 system.webServer/modules 的 ConfigWatcher
    *   来自数据库的文件系统数据库定义
3.  在 Web.config 中删除或注释以下计划代理：
    *   清理发布队列
    *   如有必要，应调整 CleanupAgent 的时间间隔
    *   如果不使用 HtmlCacheClearAgent

我挑战你勇敢并尝试设置。逐行浏览 web.config 文件并确保您理解它们。我定期这样做是为了提醒自己 Sitecore 具有我没有利用的功能。尝试删除一些您认为不需要的设置，当它们起作用并且您对它们感到满意时，分享您的发现。

充分利用缓存 - Sitecore 有很好的缓存选项，如果配置正确，您的网站会很快，另一方面，如果您没有正确配置缓存，您的网站可能会非常慢，或者在缓存动态内容时遇到奇怪的问题不正确。

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T00:02:04.627

有一个名为“[配置生产环境](http://sdn.sitecore.net/upload/sdn5/developer/configuring%20production%20environments/configuring%20production%20environments.pdf)”的文档涵盖了这一点。它有点旧，但至少可能是一个很好的起点。

其他可能有帮助的文档：

*   [扩展指南](http://sdn.sitecore.net/Reference/Sitecore%206/Scaling%20Guide.aspx)的第 4.6 章（如何：删除对主数据库的引用）
*   [CMS 性能调优指南](http://sdn.sitecore.net/Reference/Sitecore%206/CMS%20Performance%20Tuning%20Guide.aspx)的第 7 章（内容交付服务器优化）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:34:04.070

您可能应该首先查看[Sitecore 安全强化指南](http://sdn.sitecore.net/Reference/Sitecore%206/Security%20Hardening%20Guide.aspx)。它应该为您提供有关设置安全生产内容交付系统的最佳实践的良好开端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T18:56:46.390

我记得，最简单的方法实际上是通过许可证文件。Sitecore 应该能够提供禁用所有编辑功能的“webfarm”许可证。我不知道关于可以删除的文件夹或 web.config 中的部分的指南，这样做可能会产生不良的副作用。

# iphone - 如何从 Storyboard 中获取 NavigationController

> ID：12302266
> 
> 赞同：0
> 
> 时间：2012-09-06T14:23:08.970
> 
> 标签：iphone, objective-c, xcode, ipad, ios5

我有一个带有视图控制器的故事板有我的初始视图。我正在尝试通过单击按钮转到 NavigationController。

单击按钮时，我可以使 segue 工作，但是如何获取对 NavigationController 的引用以便填充 TableView？

另外，如何让表格视图回到初始视图？

我的故事板看起来像这样：

![在此处输入图像描述](../Images/56020659e2268ae84b26f3848ddd5702.png)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:34:59.593

首先，一般来说，我们不会*继续使用*导航控制器，而是*与*他们一起继续使用另一个视图控制器。从理论上讲，如果您已正确设置故事板以使导航控制器成为“初始”视图控制器，并且您的第一个视图控制器是“根视图控制器”，那么您的 segue 只会起作用（除非您做了很多不必要的编码） （最容易通过菜单的“嵌入... > 导航控制器”命令完成）。

然后在您的代码中，您的导航控制器*始终*有一个简单的访问点：当前位于由导航控制器管理的控制器*堆栈*`navigationController`中的任何视图控制器都可以简单地使用它的属性来访问它。然后，您可以使用[它的接口](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)[popViewControllerAnimated:](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006934-CH3-SW3)或类似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:39:03.310

在您的视图控制器中，实现

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

并得到你的`NavigationController`via `segue.destinationViewController`。

但是如果你想返回，你可能希望带有按钮的 ViewController 连接到 NavigationController，而不是相反。

NC => 带有按钮的 VC -> TableVC

其中 => 是关系转场， -> 是推送转场。

# jakarta-ee - 可以将多个 EAR 部署到同一个 Weblogic 节点吗？

> ID：12302269
> 
> 赞同：1
> 
> 时间：2012-09-06T14:23:22.653
> 
> 标签：jakarta-ee, weblogic

如果 Weblogic 有一个在特定端口上运行的托管服务器（即除 AdminServer 之外），

将多个 EAR 部署到该 Manager 服务器（或节点）是否有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:31:07.680

当然是。在这种情况下，您还应该使用 WorkManagers 来确保一个应用程序不会占用线程。

这是 WorkManager 在线文档的链接：http: [//docs.oracle.com/cd/E23943_01/web.1111/e13701/self_tuned.htm](http://docs.oracle.com/cd/E23943_01/web.1111/e13701/self_tuned.htm)

这是 WorkManager 功能的视频演示：[http ://www.youtube.com/watch?v=NnRcM29zJb4](http://www.youtube.com/watch?v=NnRcM29zJb4)

# memory - 大分配 - 像连续虚拟内存一样吗？

> ID：12302272
> 
> 赞同：0
> 
> 时间：2012-09-06T14:23:37.433
> 
> 标签：memory, virtual

在我的程序中，我创建了一个大型（约 1000 万个元素）对象列表，其中每个对象大约 500 字节大。目前的分配是这样的：

```
const int N = 10000000;
object_type ** list = malloc( N * sizeof * list );
for (int i=0; i < N; i++)
    list[i] = malloc( sizeof * list[i]); 
```

这工作正常 - 但我发现，由于大量的小分配，运行时间的很大一部分用于 malloc() 和随后的 free() 调用。因此，我将更改实现以分配更大的块。对我来说最简单的方法是将所有内容分配为一大块。

现在我知道在用户空间内存模型和实际物理内存之间至少有一个虚拟化级别，但是仍然存在获得如此大的“连续”内存块时遇到问题的风险吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:32:29.353

连续的虚拟并不意味着连续的物理。如果您的进程可以单独分配 N 个页面，那么它也可以在一次调用中将它们全部分配（从许多角度来看，一次调用实际上会更好）。在旧的 32 位架构上，虚拟内存地址空间的有限大小是一个问题，但在 64 位上不再是问题。此外，即使在 32 位上，如果您可以单独分配 10MM，您应该能够在一次调用中分配相同的 10MM。

话虽如此，您可能需要仔细重新审视您的设计并重新考虑*为什么*需要在内存中分配 10MM 元素。

# coldfusion - 使用 Coldfusion 通过 HTML 表单将视频上传到 Brightcove

> ID：12302274
> 
> 赞同：1
> 
> 时间：2012-09-06T14:23:43.730
> 
> 标签：coldfusion, brightcove

我想将 HTML 表单中的视频直接上传到 Brightcove。我们在服务器上运行 Coldfusion 9。

我可以找到有关将视频上传到本地服务器的说明，如下所示：

```
<cffile action="upload" nameconflict="makeunique" filefield="form.video_file" destination="#upload_path#" result="uploaded_file"> 
```

...以及将视频从我的本地服务器上传到 Brightcove 的说明，如下所示：

```
<cfhttp url="#variables.apiBaseUrl#" method="post"  timeout="#variables.timeout#" result="resultVar" multipart="true">
    <cfhttpparam type="formfield" name="json" VALUE = "#arguments.jsonArgs#">
    <cfhttpparam type="file" name="#getFileFromPath(arguments.filename)#" file="#arguments.filename#"/>
</cfhttp> 
```

但不能从 HTML 表单直接到 Brightcove。

这可能吗？

谢谢！缺口

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:57:27.423

在他们的[JavaScript Media API 示例中有如何从浏览器直接上传到 Brightcove 的示例](http://support.brightcove.com/en/docs/javascript-media-api-examples)。

但是，正如文档所述，出于以下几个原因，不建议您完成您想要完成的任务：

*   某些浏览器（例如 IE9）会提示您下载响应而不是在表单中显示它，因为浏览器不知道如何处理 mime 类型。
*   如示例源代码中所述，在表单上公开 API 令牌不是一个好习惯。
*   由于缺乏安全性，不建议将客户端媒体 API 调用作为 UGC 上传解决方案。

如果您发现上传到服务器然后上传到 Brightcove 的过程花费的时间太长，您可能需要构建一个队列系统。

1.  用户在浏览器上等待上传到您的服务器。
2.  您的服务器将文件临时存储在某处，并将任务添加到存储排队任务的数据库表中。
3.  用户看到视频仍在排队中时处于“待处理”状态。
4.  计划任务会定期检查队列表并一次上传一个任务。完成任务后，它会将视频更新为“准备就绪”。
5.  用户看到视频已准备就绪。

# c# - C# Linq "GroupBy"

> ID：12302276
> 
> 赞同：1
> 
> 时间：2012-09-06T14:23:47.483
> 
> 标签：c#, linq

我今天写的代码有问题。我想从数据库中选择一些行并按其中一列对它们进行分组。这是我的代码：

```
public class Classes
{
    public IQueryable<ClassData> HomeWorkList { get; set; }
}
public class ClassData
{
    public string Name { get; set; }
    public string English { get; set; }
}

var classesCustomViews = new Classes { 
    HomeWorkList = _repositoryClasses.GetRecords()
        .GroupBy(s => new { s.Name, s.English })
        .Select(s => new ClassData 
            { 
                English = s.Key.English, 
                Name = s.Key.Name 
             })
    };    
return PartialView(classesCustomViews); 
```

这是我得到的错误：

> System.Data.SqlClient.SqlException：列名“英文”无效。列名“English”无效。列名“English”无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:43:09.630

由于您没有撤回除密钥以外的任何聚合信息，因此您应该能够通过仅使用 Distinct 来完成它而无需分组，假设您正在使用 IQueryable 堆栈到数据库：

```
var classesCustomViews = new Classes { 
    HomeWorkList = _repositoryClasses.GetRecords()
        .Select(s => new ClassData 
            { 
                English = s.English, 
                Name = s.Name 
             })
        .Distinct()
    }; 
```

如果您仍然收到错误，我会检查您的映射和表以确保表列名称没有更改。

# internet-explorer - Div 在早期 IE 版本中无法正确显示

> ID：12302279
> 
> 赞同：0
> 
> 时间：2012-09-06T14:23:55.837
> 
> 标签：internet-explorer, html

[http://www.signport.co.uk/test/asg_automotive.html](http://www.signport.co.uk/test/asg_automotive.html)

此页面在 Chrome、Firefox、IE 8 和 IE9 中正确显示，但在 IE6 和 IE7 中，#mainmenu3 div 不会覆盖照片，而是将其向下推。

有谁知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:33:08.877

[检查您在http://validator.w3.org/](http://validator.w3.org/)中的 HTML，您可能会发现一些您忘记关闭的内容。

如果您使用一些 CSS，请注意旧版本的浏览器并不支持所有 CSS 代码。所以要非常小心并检查每一个元素，直到你找到你错过的东西。

# shipping - 定制运输 - 免费升级选项

> ID：12302283
> 
> 赞同：0
> 
> 时间：2012-09-06T14:24:15.133
> 
> 标签：shipping, magento-1.7

我们为英国客户提供 2 种送货方式

花费超过 100 英镑即可免费获得特快专递

消费低于 100 英镑即可免费获得 1 等舱记录，但可选择额外 3 英镑的特快专递。

无法弄清楚如何在 Magento (1.7.0.2) 中启用

那么，如何为 100 英镑以下的购物车添加 3 英镑的免费选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:57:35.847

所以我找到了这个扩展：[http ://www.webshopapps.com/uk/free/matrixrate-shipping-extension.html](http://www.webshopapps.com/uk/free/matrixrate-shipping-extension.html)

这是我使用的表：

> "国家","地区/州","城市","邮政编码发件人","邮政编码发件人","订单小计发件人","订单小计发件人","运费","交货类型" "GBR"," *","* "," *","* ","0","99.99","0","免费 1st Class Recorded" "GBR"," *","* "," *","* " ,"0","99.99","3","下午 1 点前升级至次日特送""GBR"," *,","* "," *",* ","100","9999","0" "次日下午 1 点前免费特快专递”

这就像一个魅力 - 希望这会有所帮助

# google-chrome - 是什么导致 Chrome 时间轴框架有这么多空白区域

> ID：12302286
> 
> 赞同：22
> 
> 时间：2012-09-06T14:24:21.313
> 
> 标签：google-chrome, google-chrome-devtools, frames

有时当我在谷歌浏览器中检查元素时，我发现我有一些大框架，但它们充满了空白。任何人都知道是什么经常导致如此大量的空白空间？我已经看到计时器会导致延长帧长度的问题，但在下面的示例中，我不确定为什么帧会这么大。

希望有一些帮助最小化这些

[![空空间](../Images/2c94614c84747f96e524f5e282201751.png)](https://i.stack.imgur.com/ZepYl.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-20T11:50:39.003

这[在此处](https://developers.google.com/chrome-developer-tools/docs/timeline#frames_mode)进行了记录，请参阅“关于透明或浅灰色框架”部分。有问题的“清晰框架”在那里被描述为

> 显示刷新周期之间的空闲时间。

根据[该视频](https://www.youtube.com/watch?v=z0_jD8nO5Zw&feature=player_detailpage&t=2181)，清除条表示浏览器正在等待 CPU 或 GPU。在“标准”网站上工作时，开发人员无法解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-01T04:52:24.027

我发现了一些有趣的关系，我希望它能为某人节省时间（我花了很多时间才弄清楚这一切）

1.  最重要的是——chrome devtools 成本很高。A mean A LOT，即使它什么也没说。例如：
2.  在我的情况下，性能监视器中的“屏幕截图”将帧时间从 16 毫秒增加到 66 毫秒，并且只是用时间轴中的空白空间填充它 -[没有屏幕截图](https://i.stack.imgur.com/cNUHF.png)和[屏幕截图](https://i.stack.imgur.com/MYEp4.png)。（现在我看到 GPU 上的长时间操作带有屏幕截图，但没有任何关于特定操作的具体操作的信息）
3.  “渲染”工具中的东西，如“油漆闪烁”或“fps Meter”，大大增加了绘画操作时间。**请确保在分析性能之前禁用所有这些！**
4.  “其他”片段（时间轴上的灰色）发生了非常奇怪的事情。它假设是 devtools 本身的成本，但有时它可以随机地在零附近进行大量计算，或者处于 100% 空闲状态。我的建议 - 在新的 chrome 版本中有新的“性能监视器”工具（不是简单的“性能”）。最好将其打开并密切关注“CPU 使用率”时间线。如果您看到灰色曲线的意外行为，只需重新加载页面或整个 chrome - 它可能会为您节省大量时间。
5.  某些扩展可能会对时间线造成随机影响。最好也禁用它。
6.  实际上，工具或扩展中的任何东西都可能会破坏您的测量。在开始搜索代码、dom 或样式中的问题之前将其全部关闭

# c# - 从对象 {object[]} 转换为 List

> ID：12302289
> 
> 赞同：4
> 
> 时间：2012-09-06T14:24:28.770
> 
> 标签：c#

我需要从

```
object {object[]} 
```

到

```
System.Collections.Generic.List<int> 
```

在对象数组的每个元素内都有一个`object {int}`元素。我从一个 COM dll 得到这个结构。

我想知道如何做到这一点的最简单方法。提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T14:26:14.833

尝试

```
List<int> intList = objectArray.Cast<int>().ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T14:30:34.990

```
List<Int> ObjToList(object[] objects)
{
    List<int> intList = new list<int>();
    foreach (object o in objects)
    {
        intList.Add((int)o);
    }
    return intList;
} 
```

确保数组中的所有对象都是 int 类型以避免出现问题

# linux - 如何从 linux 终端删除日志文件的内容？

> ID：12302290
> 
> 赞同：6
> 
> 时间：2012-09-06T14:24:28.593
> 
> 标签：linux, terminal

我在名为的服务器上有一个日志文件，`writelog`它大约是`2GB`.

我想`100,000`从文件中删除第一行。我可以打开文件并删除这些行，但由于文件大小，我需要永远下载它。

那么，是否可以从 Linux 终端执行此操作？如果是怎么办？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T23:45:33.967

如果你想清除*整个文件*，一个快速的方法是

`cat /dev/null > writelog`

另请参阅[unix.com 上的此线程](http://www.unix.com/unix-dummies-questions-answers/150082-create-empty-file-overwrite-file-differences-between-cat-echo-etc.html)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-06T14:29:36.527

保留最后 1000 行可能会更好：

```
mv writelog writelog.bak
tail -1000 writelog.bak > writelog 
```

您应该为该文件启用`logrotate`（[手动）。](http://linux.die.net/man/8/logrotate)然后系统将确保文件不会超出比例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-06T14:27:24.713

如果您正在运行 Linux 服务器，则可以使用`ssh`：

```
ssh username@mydomain.com sed -i '1,100000d' /path/to/logfile 
```

# css - 不能拖动垂直滚动条，IE6和IE7

> ID：12302293
> 
> 赞同：0
> 
> 时间：2012-09-06T14:24:41.120
> 
> 标签：css, internet-explorer-7, internet-explorer-6, scrollbar

我设置`overflow:auto`了一个具有设定高度的 div，我得到了一个默认滚动条，这正是我所期望的。问题是，当我在 IE 6 或 IE 7 中查看此内容时，我无法向下拖动滚动条以显示更多内容。滚动条上方和下方的向下和向上箭头起作用，鼠标滚轮也起作用，但滚动条不正确。

有人遇到过这种情况或知道解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:26:19.630

这听起来像是一个本地问题。如果没有其他计算机这样做，您不必担心。

但是，如果其他计算机的行为相同，请检查是否有任何内容与您的滚动条重叠。

# ruby-on-rails - Ruby on Rails - 无法捆绑更新 ffi

> ID：12302296
> 
> 赞同：0
> 
> 时间：2012-09-06T14:24:51.260
> 
> 标签：ruby-on-rails, installation, ffi

我需要提到版本 1.0.9 的 ffi（它已经在我的 Gemfile 中提到过）。系统建议我制作“bundle update ffi”，所以我做了：

```
$ bundle update ffi
Fetching source index for http://rubygems.org/
You have requested:
  ffi = 1.0.9

The bundle currently has ffi locked at 1.1.5.
Try running `bundle update ffi` 
```

如何打破这种循环？

PS 我已经安装了 ffi 1.0.9。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:30:02.113

您可以删除`Gemfile.lock`并再次捆绑安装。

注意：确保您`Gemfile`没有指定特定版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:29:44.070

删除 Gemfile.lock 文件并确保您的 Gemfile 没有为 ffi 硬编码（即指定）的任何版本，然后`bundle`它将在成功时创建一个新的 Gemfile.lock。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:36:55.067

你可以简单地做一个`bundle update`更新`Gemfile.lock`。

`ffi`通常是其他 gem 使用的依赖项，对于像这样的 gem`bundle update ffi`通常是不够的，因为依赖 gem 的版本也必须重新检查/更新。

# c - 使用 C 程序在 %temp% 中创建文件

> ID：12302297
> 
> 赞同：2
> 
> 时间：2012-09-06T14:25:02.143
> 
> 标签：c, winapi

如何使用 C 程序在 %temp% 文件夹中创建文件。请给我一些想法。

我正在使用 Mingw 在 Windows 中编程。

更新：

我希望文件为 .log 或 .txt 格式。怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:28:38.860

[`GetTempPath`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364992%28v=vs.85%29.aspx)+`GetTempFilename`

[这里的](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363875%28v=vs.85%29.aspx)例子

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T14:30:25.123

您可以使用 Windows API GetTempPath()（请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/aa364992(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364992(v=vs.85).aspx)），构建完整路径，然后使用 Win用于创建文件的 API 或 C 函数

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T14:29:11.467

您可以使用 WinAPI 函数[GetTempPath](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364992%28v=vs.85%29.aspx)来获取临时目录的路径。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T14:28:18.237

用于`[getenv()](http://linux.die.net/man/3/getenv)`读取环境变量，然后只需找出一个文件名和`fopen()`它，例如。

请注意，您“找出文件名”的部分很难，最好使用 eg`[mkstemp()](http://linux.die.net/man/3/mkstemp)`或`[tmpfile()](http://linux.die.net/man/3/tmpfile)`.

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-18T09:43:42.730

```
char * pTemp;

pTemp = getenv ("TEMP"); /*Get temp folder path*/
if (pTemp!=NULL)
{
 printf ("Temp folder path is %s",pTemp);
} 
```

# jsp - 表达式语言异常 - 无法解析简单表达式

> ID：12302298
> 
> 赞同：0
> 
> 时间：2012-09-06T14:25:04.853
> 
> 标签：jsp, tomcat7

我不太确定表达式有什么问题

`${exception.class.simpleName eq 'AccessDeniedException'}`

但它给了我一个`javax.el.ELException`.

```
org.apache.jasper.JasperException: /WEB-INF/jsp/exception/AccessDeniedException.jsp (line: 45, column: 28) "${exception.class.simpleName eq 'AccessDeniedException'}" contains invalid expression(s): javax.el.ELException: Failed to parse the expression [${exception.class.simpleName eq 'AccessDeniedException'}]
org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:42)
org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:408)
org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:199)
org.apache.jasper.compiler.Validator$ValidateVisitor.checkXmlAttributes(Validator.java:1223)
org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:875)
org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1539)
org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2428)
org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:894)
org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1539)
org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2428)
org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2434)
org.apache.jasper.compiler.Node$Root.accept(Node.java:475)
org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)
org.apache.jasper.compiler.Validator.validateExDirectives(Validator.java:1795)
org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:217)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

我使用 Tomcat 7 作为 Spring 的 tc Server 2.7 的一部分，因此使用 javax.el 2.2 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:33:59.423

从[这个评论](https://stackoverflow.com/questions/11348378/how-to-implement-instanceof-in-jstl/11348758#comment16435924_11348758)到我之前的回答：

在 tomcat 7（所以使用 JSP EL 2.2）中，您实际上可以这样做`${foo.getClass().simpleName}`并且它可以工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:24:50.317

谢谢 JB 尼泽特。从 1 周开始，我一直在尝试解决此问题。

${foo.class} 在我同事的系统上运行良好，因为他使用的是 Tomcat6，而我过去常常得到“javax.el.E​​LException”，因为我使用的是 Tomcat7。

${foo.getClass()} 修复了 Tomcat7 上的问题。

# http - 最大 URI 长度是多少？

> ID：12302299
> 
> 赞同：2
> 
> 时间：2012-09-06T14:25:06.187
> 
> 标签：http, browser, uri

客户希望将文章的标题用作 URL。标题的数据库字段是 varchar(512)，所以在最坏的情况下我会

```
http://+domain with 19 chars+512 chars+.html 
```

如果我忽略类别（可以嵌套并且理论上可以无限长），则表示 543 个字符。
我读到在服务器端有 4000 个字符的限制，但可能有浏览器限制为 256（！）个字符。我可以依赖哪些信息？

# javascript - 跟踪 Google Analytics 中的所有出站链接

> ID：12302300
> 
> 赞同：17
> 
> 时间：2012-09-06T14:25:08.190
> 
> 标签：javascript, jquery, google-analytics, outbound

几个月来，我一直在使用脚本来跟踪出站链接。***该脚本 WORKS***，但在 Google Analytics 生成的报告中，许多 URL 的末尾都有一个尾随“:80”（默认端口号）。请阅读以获得更多详情。

*值得一提的是，跟踪这些出站链接的网站有大量的出站流量（将您的幻想乘以∞）。*

## 脚本的目的

*它跟踪所有出站链接并将它们标记为谷歌分析中的“出站链接”。*

该脚本被大量注释，并且有一些 console.log() 实例来帮助调试（这些都被注释掉了）。

“出站链接”显示在 GA 上，如下：

**内容 > 事件 > 热门事件 > “出站链接” [点击它] > [报告显示所有点击的 url]**

## 问题

在“出站链接”报告下，我得到了所有被点击的链接，我在至少 2/3 报告的链接（可能更多）的末尾得到“：80”。GA 将[http://example.com](http://example.com)和[http://example.com:80](http://example.com:80)视为不同的链接，在报告中将它们分开。*这当然是不希望的。*

***值得一提：***

以“:80”结尾的链接总是比没有“:80”的链接有更多的点击率，点击率高出 40% 到 60%。

## 想要的解决方案

*   ***将以“:80”结尾的链接与没有它的链接合并，或者***
*   ***如果可能，请避免将“:80”附加到链接。***
*   奖励：了解为什么我们得到以“：80”结尾的链接。

## 剧本

```
// Outbound Link Tracking with Google Analytics
// Requires jQuery 1.7 or higher (use .live if using a lower version)
$(function() {
    $("a").on('click',function(e){
        var url = $(this).attr("href");
        // Console logs shows the domain name of the link being clicked and the current window
        // console.log('e.currentTarget.host: ' + e.currentTarget.host);
        // console.log('window.location.host: ' + window.location.host);
        // If the domains names are different, it assumes it is an external link
        // Be careful with this if you use subdomains
        if (e.currentTarget.host != window.location.host) {
            // console.log('external link click');
            // Outbound link! Fires the Google tracker code.
            _gat._getTrackerByName()._trackEvent("Outbound Links", e.currentTarget.host, url, 0);
            // Checks to see if the ctrl or command key is held down
            // which could indicate the link is being opened in a new tab
            if (e.metaKey || e.ctrlKey) {
                // console.log('ctrl or meta key pressed');
                var newtab = true;
            }
            // If it is not a new tab, we need to delay the loading
            // of the new link for a just a second in order to give the
            // Google track event time to fully fire
            if (!newtab) {
                // console.log('default prevented');
                e.preventDefault();
                // console.log('loading link after brief timeout');
                setTimeout('document.location = "' + url + '"', 100);
            }
        }
        /*
        else {
            console.log('internal link click');
        }
        */
    });
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-09T10:30:36.280

Fresheyeball 的答案是正确的，但是因为很多人一直在要求一个*完整*的答案，所以我将发布带有 Fresheyeball 贡献的最终脚本。

## 短版

```
// Outbound Link Tracking with Google Analytics
// Wallace Sidhrée - http://dreamyguy.com/
// Requires jQuery 1.7 or higher (use .live if using a lower version)
$(function() {
    $("a").on('click',function(e){
        var url = $(this).attr("href");
        if (e.currentTarget.host != window.location.host) {
            _gat._getTrackerByName()._trackEvent("Outbound Links", e.currentTarget.host.replace(':80',''), url, 0);
            if (e.metaKey || e.ctrlKey || this.target == "_blank") {
                var newtab = true;
            }
            if (!newtab) {
                e.preventDefault();
                setTimeout('document.location = "' + url + '"', 100);
            }
        }
    });
}); 
```

## 完整版本（已注释且“可调试”）

```
// Outbound Link Tracking with Google Analytics
// Wallace Sidhrée - http://dreamyguy.com/
// Requires jQuery 1.7 or higher (use .live if using a lower version)
$(function() {
    $("a").on('click',function(e){
        var url = $(this).attr("href");
        // Console logs shows the domain name of the link being clicked and the current window
        // console.log('e.currentTarget.host: ' + e.currentTarget.host);
        // console.log('window.location.host: ' + window.location.host);
        // If the domains names are different, it assumes it is an external link
        // Be careful with this if you use subdomains
        if (e.currentTarget.host != window.location.host) {
            // console.log('external link click');
            // Outbound link! Fires the Google tracker code.
            _gat._getTrackerByName()._trackEvent("Outbound Links", e.currentTarget.host.replace(':80',''), url, 0);
            // Checks to see if the ctrl or command key is held down
            // which could indicate the link is being opened in a new tab
            // Also checks if target="_blank" on the link tag which indicates it should always be opened in a new tab
            if (e.metaKey || e.ctrlKey || this.target == "_blank")) {
                // console.log('ctrl or meta key pressed');
                var newtab = true;
            }
            // If it is not a new tab, we need to delay the loading
            // of the new link for a just a second in order to give the
            // Google track event time to fully fire
            if (!newtab) {
                // console.log('default prevented');
                e.preventDefault();
                // console.log('loading link after brief timeout');
                setTimeout('document.location = "' + url + '"', 100);
            }
        }
        /*
        else {
            console.log('internal link click');
        }
        */
    });
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T15:30:00.457

输出中的原因`:80`是因为`e.currentTarget.host`

[http://www.w3schools.com/jsref/prop_area_host.asp](http://www.w3schools.com/jsref/prop_area_host.asp)

我不知道你为什么除了你已经功能的变量之外还要跟踪它，但你总是可以通过简单的字符串替换`url`来确保它不存在`:80`

`_gat._getTrackerByName()._trackEvent("Outbound Links", e.currentTarget.host.replace(':80',''), url, 0);`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T01:41:44.480

window.open 的问题是引用者将丢失。更好的解决方案是使用 onmousedown 而不是 onclick。做了一些测试后，我知道这比使用 window.open 或使用 setTimeout 更好。您从人们单击鼠标右键而不选择“在新选项卡中打开”或“在新窗口中打开”得到一些误报，但是 onclick 并不总是在所有浏览器上单击鼠标右键时触发。这是两个邪恶中较小的一个选择。

```
jQuery(function($){
  $('a:not([href*="' + document.domain + '"])').mousedown(function(event){
    // Just in case, be safe and don't do anything
    if (typeof _gat == 'undefined') {
      return;
    }

    var link = $(this);
    var href = link.attr('href');
    var noProtocol = href.replace(/http[s]?:\/\//, '');

    // Track the event
    _gat._getTrackerByName()._trackEvent('Outbound Links', noProtocol);
   });
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-26T08:06:35.213

使用 location.hostname 而不是 location.host 。主机名不包括端口。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-01T13:39:05.593

这段小代码对我有用：

```
 var hostname = window.location.hostname; 

    jQuery("body a").click(function(){

          if(jQuery(this).attr("href").indexOf(hostname)== -1){

               ga('send', 'event', {'eventCategory': "Outbound Links", 'eventAction': "OnClick", 'eventLabel': jQuery(this).attr("href")});

          }
    }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-04T18:53:27.287

Google 有一个官方支持的库，可以为您完成这些工作。

[https://github.com/googleanalytics/autotrack](https://github.com/googleanalytics/autotrack)

因此，您的整个 Analytics 代码段将类似于：

```
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-XXXXX-Y', 'auto');

// Replace the following lines with the plugins you want to use.
ga('require', 'eventTracker');
ga('require', 'outboundLinkTracker');
ga('require', 'urlChangeTracker');
// ...

ga('send', 'pageview');
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<script async src="path/to/autotrack.js"></script> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-15T09:54:03.597

这是我使用[Google 建议代码的解决方案](https://support.google.com/analytics/answer/1136920?hl=en)

将其放在您的 GA 跟踪代码之后（可能在`<head>`）

```
// TRACK OUTBOUND LINKS
document.addEventListener("DOMContentLoaded", function() {
    var trackOutboundLink = function(url) {
       ga('send', 'event', 'outbound', 'click', url, {
         'transport': 'beacon',
         'hitCallback': function(){document.location = url;}
       });
    }

    var a = document.getElementsByTagName('a');

    for(i = 0; i < a.length; i++){
        if (a[i].href.indexOf(location.host) == -1 && a[i].href.match(/^http?s:\/\//i)){
            a[i].onclick = function(){
                trackOutboundLink(this.href);
            }
        }
    }
});
// END 
```

# python - urllib2 为在浏览器中显示正常的网站返回 404

> ID：12302304
> 
> 赞同：9
> 
> 时间：2012-09-06T14:25:26.330
> 
> 标签：python, html, url, urllib2

我无法使用 urllib2 打开一个特定的 url。同样的方法适用于其他网站，例如“http://www.google.com”，但不适用于本网站（在浏览器中也可以正常显示）。

我的简单代码：

```
from BeautifulSoup import BeautifulSoup
import urllib2

url="http://www.experts.scival.com/einstein/"
response=urllib2.urlopen(url)
html=response.read()
soup=BeautifulSoup(html)
print soup 
```

谁能帮我让它工作？

这是我得到的错误：

```
Traceback (most recent call last):
  File "/Users/jontaotao/Documents/workspace/MedicalSchoolInfo/src/AlbertEinsteinCollegeOfMedicine_SciValExperts/getlink.py", line 12, in <module>
    response=urllib2.urlopen(url);
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 400, in open
    response = meth(req, response)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 513, in http_response
    'http', request, response, code, msg, hdrs)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 432, in error
    result = self._call_chain(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 619, in http_error_302
    return self.parent.open(new, timeout=req.timeout)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 400, in open
    response = meth(req, response)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 513, in http_response
    'http', request, response, code, msg, hdrs)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 438, in error
    return self._call_chain(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 521, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 404: Not Found 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T14:42:07.203

我刚试过这个并收到 404 代码和页面返回。

猜测它正在执行用户代理检测，无论是偶然还是故意不向 python urllib 提供内容。

澄清一下`urllib`，我收到了`urlopen`返回的带有 404 代码和 HTML 内容的响应对象。提出了`urllib2.urlopen`一个`urllib2.HTTPError`例外。

我建议您尝试将您的用户代理设置为看起来像浏览器的东西。这里有一个关于这个的问题：[Changing user agent on urllib2.urlopen](https://stackoverflow.com/questions/802134/changing-user-agent-on-urllib2-urlopen)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-14T12:13:57.543

您可以使用`try except`捕获错误

```
try:
    u = urllib2.urlopen(req)
except urllib2.HTTPError, e:
    print e.code
    print e.msg
    return 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T20:13:11.707

嗯...您确定该 URL 有效吗？尝试“http://www.google.com” 我有类似的代码，并且 urllib 没有问题。或者您可以使用 try - except 语句来查看错误的详细信息。当然，MattH 的回答与事实非常相似 :)

# ios - 如何在后台运行 iOS 应用程序

> ID：12302306
> 
> 赞同：1
> 
> 时间：2012-09-06T14:25:32.933
> 
> 标签：ios

我发现除了 voip、音乐播放器和 GPS 应用程序等某些情况外，iphone 应用程序不会在后台运行。我在应用商店中找到了[这个应用](http://itunes.apple.com/in/app/charge-alert-lite/id403024766?mt=8)，它不属于这些类别中的任何一个，在后台运行并在后台提供声音警报。

这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:29:02.520

像这样的应用程序通常会根据您提到的事情来解决问题：

1.  播放“silence.wav”（= 充当音乐播放器）
2.  使用 GPS

**更新：**来自上述应用程序的 Info.plist：

```
UIBackgroundModes
    audio 
```

使用 Xcode[文档](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW22)：

> 音频 | 该应用程序在后台播放有声内容。

因此这个应用程序使用第一种方法（即它模仿音乐播放器）在后台运行。

# android - 获取内部存储器的文件对象列表

> ID：12302311
> 
> 赞同：0
> 
> 时间：2012-09-06T14:25:52.903
> 
> 标签：android

我想写文件管理器之类的东西，但不明白如何获取开始目录（不是 SD 卡），即除了 sd 卡之外的所有目录。我尝试这样：

```
File myDir=new File("/");
File myDir=Environment.getDataDirectory();
File myDir=Environment.getRootDirectory(); 
```

..我尝试使用`myDir.getParent()`，我不知道该怎么做，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:53:53.373

你写的第一行应该有效。

我刚刚尝试了以下代码来列出根目录中的所有文件。

```
File f = new File("/");
if (f.exists() && f.canRead()) {
    String[] list = f.list();
    for (String s : list) {
        Log.d(TAG, s);
    }
} 
```

有效。

# c++ - 在 C/C++ 和 Python 之间交换值的应用程序设计

> ID：12302320
> 
> 赞同：1
> 
> 时间：2012-09-06T14:26:21.290
> 
> 标签：c++, python, c, api, signals-slots

我正在编写一个 C/C++ 应用程序，该应用程序由用户直接使用来提供输入，基本上是数值，如精确值、范围等，考虑一个带有以下部分的 UI：

*   小键盘
*   一个滑块
*   数字的输入字段

这是 C/C++ 部分，我希望从这段代码中得到一堆值，问题是这个值：

*   必须以某种方式发送到 Python
*   可以实时更改，因为我的 C/C++ 就像一个 UI，其中的东西可以改变

我不知道有什么设计可以满足我的要求，主要是因为：

*   我只知道关于 Python 的基本知识，我可以编写一些脚本，但我对 Python 内部结构一无所知
*   我不知道如何让 C++ 和 Python 一起工作，以及如何在信号/槽逻辑中做到这一点（假设信号/槽设计适合这个应用程序）
*   我不知道如何将我的 API 提供给希望将我的值集成到他们自己的脚本中以用于第三方应用程序的用户，想象一个也提供 Python API 的随机应用程序，我想给用户使用编码的选项两个 API 在一个脚本中，并且可能在此第三方应用程序中将此脚本用作任何其他 API 集（在第三方应用程序 Python 环境中编写脚本时可以导入外部 API？）

这就是我如何描述我的问题以及我的目标是什么，如果有不清楚的地方请发表评论。

**回顾**：如何使用信号/插槽设计从 C++ 应用程序实时提供 Python API？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:32:20.047

查看[Boost.Python](http://www.boost.org/doc/libs/1_42_0/libs/python/doc/index.html)。它是一个允许将 Python 用作 C++ 程序的脚本语言的库。

# java - Java POI 删除单元格

> ID：12302321
> 
> 赞同：4
> 
> 时间：2012-09-06T14:26:22.707
> 
> 标签：java, excel, apache-poi

我尝试使用以下方法删除单元格：

```
HSSFCell cell = sheet.getRow(0).getCell(i);
sheet.getRow(0).removeCell(cell); 
```

我认为这应该有明确的价值，但单元格的值刚刚从“012345678”更改为“0”。单元格类型始终为字符串。

此外，该单元格有评论，也没有被删除。然后我在上面两个之间添加这个语句：

```
cell.removeCellComment(); 
```

它没有用。有什么我忘记做的吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:13:06.500

我看不出你的代码有什么问题。删除单元格后，您是否记得保存更改？以下代码对我来说很好。

```
String xlsxPath = "C:\\path\\test.xlsx";

Workbook wb = WorkbookFactory.create(new FileInputStream(xlsxPath));

// get first row
Row row = wb.getSheetAt(0).getRow(0);

// remove second cell from first row
row.removeCell(row.getCell(1));

// save changes
FileOutputStream fileOut = new FileOutputStream(xlsxPath);
wb.write(fileOut);
fileOut.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:22:59.240

您可以尝试将单元格值设置为 null 或空字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-21T09:53:15.957

我也是同样的问题，我的解决方案没什么新意，就是复制表格并排除您需要的原始表格的单元格，然后删除原始表格

```
 int originalTablePos = paragrah.getDocument().getPosOfTable(Original_Table);
        // copy table from original to new table
        paragrah.getDocument().removeBodyElement(originalTablePos); 
```

我希望这可以帮助其他有同样问题的人

问候

# php - Zend 无法定位表单

> ID：12302323
> 
> 赞同：0
> 
> 时间：2012-09-06T14:26:24.383
> 
> 标签：php, class, zend-framework

我有一个小的（非常小的）zend 项目，它涵盖了两个模块，管理模块和前端模块。我还设法在“前端”模块下创建了一个表单，并且还能够在前端模块的控制器中使用它。现在，我的问题是，当我在“管理”模块下创建一个表单并在管理控制器中使用它时，php 无法再检测到该类的位置。因此，显示此错误：

```
Fatal error: Class 'Admin_Form_Login' not found in C:\xampp\htdocs\projects\zend\finder\application\modules\admin\controllers\IndexController.php on line 18 
```

我很困惑，在前面的模块中，它正在工作，但在管理模块上，非常相似的创建和使用方式，它失败了。注意：我使用 zf 工具来创建表单。

这是我的application.ini，也许这可能会有所帮助。

```
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0

resources.modules[] =

resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"

resources.view.helperPath.Finder_View_Helper = APPLICATION_PATH "/../library/Finder/View/Helper" 
```

我为此使用 Zend 1.11.12。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:02:03.137

我猜你没有模块引导类，因为其他一切看起来都很好。因此，您需要做的就是创建一个文件，`application/modules/admin/Bootstrap.php`其中包含以下内容：

```
<?php

class Admin_Bootstrap extends Zend_Application_Module_Bootstrap
{

} 
```

这将由您的应用程序引导程序运行，并`Zend_Application_Module_Bootstrap`默认设置模块资源自动加载器的实例，这反过来将启用以 . 开头的资源类`Admin_`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:42:09.377

如果您要将表单添加到库中，那么您希望它在 library/admin/form/login.php 中（相应地更改路径的大小写） - 而不是在模块 '/modules/Admin/Controllers etc' 文件夹中。我不确定这是否是一个相关点，但我还是做到了......

然后确保使用 application.ini 中的 autoLoadNamespaces 加载模块，并且 Admin 文件夹应该在你的库文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:37:49.227

您是否为这些表单声明了命名空间？在我的模块的 Bootstrap.php (/application/modules/admin/Bootstrap.php) 中，我使用以下代码：

```
 //Loads the autoloader resources

    $moduleName = 'admin';
    $resourceLoader = new Zend_Loader_Autoloader_Resource(array(
            'basePath' => APPLICATION_PATH ."/modules/".$moduleName."/",
            'namespace' => '',
            'resourceTypes' => array(
                    //Tells the application where to find the forms
                    'form' => array(
                            'path' => 'forms/',
                            'namespace' => ucfirst($moduleName).'_Form_'
                    ),
                    //Tells the application where to find the models
                    'model' => array(
                            'path' => 'models/',
                            'namespace' => ucfirst($moduleName).'_Model_'
                    )
            ),
    )); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T14:38:15.943

据我所知，您没有将 Admin 命名空间添加到自动加载器。如果您使用的是 Autloader 并且表单位于 include_dir/Admin/Form/Login.php 下，请尝试

```
autoloaderNamespaces[] = "Admin_" 
```

在你的配置中。

[有关自动装载机的更多信息](http://framework.zend.com/manual/1.12/en/zend.loader.autoloader.html)

# wix - WIX 安装目录不可自定义？

> ID：12302329
> 
> 赞同：2
> 
> 时间：2012-09-06T14:26:31.287
> 
> 标签：wix, windows-installer

我正在为我的设置项目使用 WIX 3.5。如果我在安装过程中更改了安装目录，安装程序坚持使用默认目录。

```
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="LocalAppDataFolder" Name="AppData">
    <Directory Id="InstallationDir" Name="MyApp" />
  </Directory>
</Directory>
...
<DirectoryRef Id="InstallationDir">
   ... component + files ...
</DirectoryRef>
...
<UI>
   <Property Id="WIXUI_INSTALLDIR" Value="InstallationDir" />
   <UIRef Id="WixUI_InstallDir" />
   <UIRef Id="WixUI_ErrorProgressText" />
</UI>

<CustomAction Id="SetARPINSTALLLOCATION" Property="ARPINSTALLLOCATION" Value="InstallationDir" />
<InstallExecuteSequence>
   <Custom Action="SetARPINSTALLLOCATION" After="InstallValidate" />
</InstallExecuteSequence> 
```

我尝试了升级（我总是更改产品代码）和卸载/安装。同样的问题！如果我运行`msiexec /L*v log.txt /i Setup.msi`日志，则会告诉我该`InstallationDir`属性确实已更改。

**问：**我的软件怎么可能安装到默认目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:13:59.670

您必须使用全大写的目录名称才能自定义。大写是 MSI 如何将目录（和属性）声明为 PUBLIC 并因此可自定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T21:25:01.600

感谢您的解决方案。在找到这篇文章之前，我无法弄清楚为什么我的安装程序没有将文件复制到正确的用户指定目录。

我只想强调，如果您的安装程序将文件复制到 INSTALLDIR 下的子目录，那么它们的 ID 不能全部大写，否则当用户通过自定义安装对话框更改 INSTALDIR 时，它们不会被更改。您可以通过使用来验证

```
msiexec /i your_installer.msi /l*v log.log 
```

并且您可以看到所有所有大写 ID 的任何目录都只会设置一次。

# c# - 隐式转换 IQueryable > 键入 IQueryable

> ID：12302330
> 
> 赞同：1
> 
> 时间：2012-09-06T14:26:33.287
> 
> 标签：c#, .net, linq

我在尝试制作演员表或进行正确的转换时遇到了一些麻烦。我有一个`IQueryable<T>`T 类型的查询是一个类：

```
var query = (from x in query
             group x by US.FirstName into g
             select g).Distinct(); 
```

我收到此错误：

> 无法将类型隐式转换`System.Linq.IQueryable<System.Link.IGrouping<string,T>>`为`System.Linq.IQueryable<T>`.>>

实际上我想要执行的是返回查询的唯一值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:28:33.370

```
vQuery = vQuery.GroupBy(x => x.FirstName)
         .Select(g => g.First()); 
```

但这将是相当随意的：你应该做一个`OrderBy`或一个`OrderByDescending`

```
.Select(g => g.OrderBy(x => x.WhatEverYouWant).First()) 
```

用“你的”语法找到

```
vQuery = (from US in vQuery
 group US by US.FirstName into g
 select g.First()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:32:22.993

当您在 LINQ 中执行分组时，您实际上会返回一个`IGrouping<TKey, TValue>`. 您正试图将此结果放回您为原始查询定义的变量中，该变量`vQuery`的类型为`IQueryable<T>`。您需要将 LINQ 查询的结果放入一个单独的变量中，该变量的类型为`IGrouping<TKey, TValue>`：

```
var groupedValues = (from US in vQuery
                     group US by US.FirstName into uniqueFirstName
                     select uniqueFirstName).Distinct(); 
```

# c# - 正则表达式模式匹配

> ID：12302333
> 
> 赞同：-2
> 
> 时间：2012-09-06T14:26:40.440
> 
> 标签：c#, regex

这是模式：

```
((?<active>\*\s)*(fcid\s(?<fcid>0x[0-9a-f]{6})\s)*\[)?pwwn\s(?<pwwn>(([0-9a-f]{2}:){7})[0-9a-f]{2})(]\s\[(?<alias>\w*))* 
```

这是可能的输入 - 每一个都是一行：

```
 1/ *fcid 0xce36c3 [device-alias N2F07D08]
 2/ pwwn c0:50:76:04:52:7e:00:2b [ARAH2KDBP04_STA_2b]
 3/ *fcid 0x19176a  [pwwn c0:50:76:04:52:7e:00:2a] [ARAH2KDBP04_STA_2] 
```

它目前匹配第 2 行和第 3 行。我也需要它来匹配第一行。我在将第二行中的内容作为可选内容时遇到问题。如果我尝试将其设为可选，则最后两行也不匹配。我知道我在模式中没有任何内容与设备别名行匹配，但我试图首先将第二行中的输入作为可选输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:51:07.260

它与第一行不匹配，因为正则表达式需要`pwwn`存在信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:55:51.873

试试这个正则表达式，选中 IgnoreCase 和 MultiLine 选项并检查您的命名组：

```
^(?<active>\*\s?)*(?:fcid\s(?<fcid>0x[0-9a-f]{6})\s+)?(?:\[?pwwn\s(?<pwwn>(?:[0-9a-f]{2}:){7}[0-9a-f]{2})\]?\s+)?\[(?<alias>[^[]+)\]$ 
```

您可以在[RegexHero进行测试](http://regexhero.net/tester/?id=acf33813-58d5-47d6-91e1-3066687f6afa)

C# 代码可以是：

```
string strRegex = @"^(?<active>\*\s?)*(?:fcid\s(?<fcid>0x[0-9a-f]{6})\s+)?(?:\[?pwwn\s(?<pwwn>(?:[0-9a-f]{2}:){7}[0-9a-f]{2})\]?\s+)?\[(?<alias>[^[]+)\]$";
RegexOptions myRegexOptions = RegexOptions.IgnoreCase | RegexOptions.Multiline;
Regex myRegex = new Regex(strRegex, myRegexOptions);
string strTargetString = @"*fcid 0xce36c3 [device-alias N2F07D08]\npwwn c0:50:76:04:52:7e:00:2b [ARAH2KDBP04_STA_2b]\n*fcid 0x19176a  [pwwn c0:50:76:04:52:7e:00:2a] [ARAH2KDBP04_STA_2]";

foreach (Match myMatch in myRegex.Matches(strTargetString))
{
  if (myMatch.Success)
  {
    // Extract your named groups here
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:58:00.220

这**很丑**

```
((\*\s*)?fcid\s*0x\w{6}\s*\[(device-alias.*?|pwwn\s\w{2}(\:\w{2}){7})\]|pwwn\s\w{2}(\:\w{2}){7}) 
```

在[这里工作](http://regexhero.net/tester/)

# ruby-on-rails - 在数据表类中使用路由路径

> ID：12302334
> 
> 赞同：0
> 
> 时间：2012-09-06T14:26:40.083
> 
> 标签：ruby-on-rails, datatable, ruby-on-rails-3.1

我在我的 rails3.1 应用程序中使用数据表并且它可以工作，直到我尝试为返回的字段之一（倒数第二个字段）使用路由路径。不管我使用什么有效的路由路径，我都会收到错误`NoMethodError (undefined method 'active_toggle_user_path' for #<UsersDatatable:0x007f9d16cf0188>):`

有什么建议么？

```
def data
  users.map do |user|
    [
      link_to(user.last_name, user),
      user.first_name,
      user.username,
      user.email,
      user.security_role,
      user.last_login_at,
      user.active == true ? 'Disable' : link_to('Enable', active_toggle_user_path(user, :toggle => true), { :confirm => 'Are you sure you want to ENABLE this User?', :class => "enable" }),
      'Delete User?'
    ]
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T22:25:04.687

使用解决`Rails.application.routes`

```
class UsersDatatable
  delegate :url_helpers, to: 'Rails.application.routes'

  def data
    users.map do |user|
      [
        link_to(user.last_name, user),
        user.first_name,
        user.username,
        user.email,
        user.security_role,
        user.last_login_at,
        user.active == true ? 'Disable' : link_to('Enable', url_helpers.active_toggle_user_path(user, :toggle => true), { :confirm => 'Are you sure you want to ENABLE this User?', :class => "enable" }),
        'Delete User?'
      ]
    end
  end
end 
```

# bash - Bash脚本查找属于彼此的行

> ID：12302338
> 
> 赞同：0
> 
> 时间：2012-09-06T14:26:58.300
> 
> 标签：bash, grep

我有一个包含此类输出的日志文件：

```
 [mvn] Running com.mypackage.MyTest
   ...
  [mvn] Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 104.648 sec
  [mvn] Running com.mypackage.MyNotExecutedTest
   ...
  [mvn] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.525 sec
  [mvn] Running com.mypackage.AnotherNotExecutedTest
   ...
  [mvn] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.569 sec
  [mvn] Running com.mypackage.FailedTest
   ...
  [mvn] Tests run: 5, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 22.357 sec
   ... 
```

而在“...”所在的位置可以有任意数量的行（例如堆栈跟踪，一些调试输出）。我想要实现的是尚未执行的测试列表：

```
 com.mypackage.MyNotExecutedTest
  com.mypackage.AnotherNotExecutedTest 
```

所以我的方法是 grep 模式“测试运行：0，失败：0，错误：0，跳过：0，经过时间”但是我需要一种聪明的方法来找出测试属于 grep 模式。这里有什么好的/优雅的解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:41:06.487

编写一个`awk`存储最新行的脚本 `Running`，然后打印存储的行，如果它看到`Tests run: 0`。

```
awk '/\[mvn\] Running /{ t=$3 }
  /\[mvn\] Tests run: 0/ { print t }'  logfile 
```

编辑：我取出了行开头的锚点，以便正确处理缩进输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:51:41.403

我可能会结合使用`grep`and来做到这一点`awk`：

```
grep -A1 "Tests run: 0" | awk '/Running {print $NF}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T21:24:46.717

我会用几个 grep 命令和一个 awk 来做到这一点，所有这些都通过管道连接在一起。我将引导您了解我的逻辑：

1) 使用`pcregrep`而不是 grep 来匹配以 "Running" 开头并以 "Tests run: 0" 结尾的多行模式，如下所示：

**命令：**

```
pcregrep -M "Running(\n|.)*?Tests run: 0" file.txt 
```

（注意使用`-M`参数来允许多行匹配和`?`星号之后使其不贪婪）

**输出：**

```
[mvn] Running com.mypackage.MyTest
...
[mvn] Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 104.648 sec
[mvn] Running com.mypackage.MyNotExecutedTest
...
[mvn] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.525 sec
[mvn] Running com.mypackage.AnotherNotExecutedTest
...
[mvn] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.569 sec 
```

2）如您所见，不幸的是，这也匹配了一些不需要的项目，所以我会再次使用 pcregrep 删除有问题的条目，如下所示：

**命令：**

```
pcregrep -M "Running(\n|.)*?Tests run: 0" file.txt | \
pcregrep -Mv "Running(\n|.)*?Tests run: [^0]" 
```

（注意在第二个 pcregrep 命令中使用`-v`参数和`[^0]`字符类来仅消除运行非零测试次数的进程）

**输出：**

```
[mvn] Running com.mypackage.MyNotExecutedTest
...
[mvn] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.525 sec
[mvn] Running com.mypackage.AnotherNotExecutedTest
...
[mvn] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.569 sec 
```

3）然后我会找出包含“正在运行”的行：

**命令：**

```
pcregrep -M "Running(\n|.)*?Tests run: 0" file.txt | \
pcregrep -Mv "Running(\n|.)*?Tests run: [^0]" | \
grep -i running 
```

**输出：**

```
[mvn] Running com.mypackage.MyNotExecutedTest
[mvn] Running com.mypackage.AnotherNotExecutedTest 
```

4）最后使用 awk 仅打印我有兴趣看到的变量（进程名称，在您的示例中，它似乎总是行中的第三个“单词”）：

**最终命令：**

```
pcregrep -M "Running(\n|.)*?Tests run: 0" file.txt | \
pcregrep -Mv "Running(\n|.)*?Tests run: [^0]" | \
grep -i running | \
awk '{print $3};' 
```

**最终输出：**

```
com.mypackage.MyNotExecutedTest
com.mypackage.AnotherNotExecutedTest 
```

嗯！

# c# - 通过 C# 管道运行 PowerShell

> ID：12302341
> 
> 赞同：0
> 
> 时间：2012-09-06T14:27:21.667
> 
> 标签：c#, powershell, pipeline

我正在编写将与基于 C# 的 Windows 窗体应用程序集成的 PS 脚本。这是我已经尝试/完成的：

1.  我可以通过运行空间和管道运行 PS 脚本，但是在尝试运行使用函数的脚本时遇到错误，说：**“无法调用此函数，因为当前主机没有实现它。”**

2.  我研究了这个问题，发现遇到类似问题的人很少，但是其中一个解决方案强调我需要使用（添加）以下 $ConfirmPreference = "None", ,-Confirm:$false, -Force

3.  但是，当我尝试出现以下错误消息时：**“一元运算符'-'后缺少表达式。”**您可以看到我试图通过将字符串分配给变量来连接字符串，但这没有帮助。我不知道如何解决它，有没有人有任何想法？任何帮助都感激不尽。

    ```
     // create Powershell runspace
       Runspace runspace = RunspaceFactory.CreateRunspace();
       // open it
       runspace.Open();

       // create a pipeline and feed it the script text
       Pipeline pipeline = runspace.CreatePipeline();

       //allow the functions to be exec
       string sa = "$ConfirmPreference = \"None\" ";
       string se = " -Confirm:$false -Force";
       string s = sa +scriptText + se;
       pipeline.Commands.AddScript(s); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:19:06.427

`-Confirm:$false -Force`应该是函数参数，它们本身并不存在。

```
Do-Something -param1 'foo' -Confirm:$false -Force 
```

但是，即使您使用这些参数修改每个函数调用，它也可能无法解决您的所有问题。有关更多选项，请参见[此处](https://stackoverflow.com/questions/2656610/how-to-run-powershell-scripts-via-automation-without-running-into-host-issues)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-01T12:31:41.887

好的，PowerShell 附带了一个名为 CommonParameters 的对象（[MSDN：System.Management.Automation.Internal.CommonParameters](http://msdn.microsoft.com/en-us/library/windows/desktop/system.management.automation.internal.commonparameters%28v=vs.85%29.aspx)）

可以在这里看到所指的参数：[MSDN: Common Parameter Names](http://msdn.microsoft.com/en-us/library/windows/desktop/dd901844%28v=vs.85%29.aspx)

据我所知，`$ConfirmPreference`设置为您的变量`None`是否不需要为您调用的每个设置。这是隐含的...`Confirm``false``Command`

`Runspace`并且您还必须在创建后或调用您的第一次之前设置此变量一次`Command`，而不是每次使用`Command`or `Script`。

你也可以像这样设置这个变量：

```
runspace.SessionStateProxy.SetVariable("ConfirmPreference", "none"); 
```

# javascript - 在动态加载的对话框中执行 Javascript

> ID：12302342
> 
> 赞同：0
> 
> 时间：2012-09-06T14:27:21.340
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

我有一些关于让 javascript 在对话框中正确触发的问题。

下面是我目前用来加载对话框的 scripts.js 中的代码

```
function LoadDialog(url, title) {
    var DialogBox = $('<div class="dialog-container"></div>').dialog({ modal: true, autoOpen: false, resizeable: true }).dialog({ width: 500, height: 'auto' });
    DialogBox.html('<div class="ajax-load"><img src="/Content/loading.gif" alt="loading"></div>').dialog({ buttons: null, title: 'Loading..' });
    DialogBox.dialog('open').load(url, function () {
        DialogBox.dialog({ title: title, Buttons: null, position: 'center', close: function (ev, ui) { $(this).dialog("destroy"); } });
    });
}

$(function () {
    $('.as-dialog').click(function (e) { LoadDialog($(this).attr('href'), $(this).attr('title')); return false; });
}); 
```

尽管默认情况下对话框内不会触发任何 javascript 代码。例如，我将一个带有不显眼验证的小表单加载到对话框中。没有身体、头部等，只有一个容器 div 和表单本身。默认情况下，验证不起作用，如果我在 script.js $(function(){}) 下为表单添加事件处理程序，它不会触发。如果我添加以下 js 引用和要与表单一起加载的代码块，则可以解决一个问题：

```
<script src="/Scripts/libs/jquery.validate.min.js"></script>
            <script src="/Scripts/libs/jquery.validate.unobtrusive.js"></script>
            <script type="text/javascript">
                $(function () {
                    $('#form_Create').submit(function (e) {
                        e.preventDefault();
                    });
                });
            </script> 
```

关于上述代码的不起作用是验证将始终有效，但如果我打开对话框，关闭它，然后再次打开它，preventdefault 将停止工作并且表单将发布。这可能是脚本问题的多重负载还是什么？虽然如果放在scripts.js中没有“准备好的文档”代码在对话框中工作（尽管标准javascript函数工作），但我真的没有其他选择。有没有更好的方法在动态加载的文件中使用 javascript，或者我必须将整个表单放在父页面中才能可靠地处理它们？关于你应该如何处理这个问题的任何意见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:20:30.993

以下打开对话框的方法似乎解决了我的主要问题：

```
var Box = $('#dialog-container');
    if (Box.length === 0) {
        Box = $('<div id="dialog-container"></div>').appendTo('body');
    } else { Box.empty(); } 
```

不确定 atm 是否需要 empty()，因为似乎 load 无论如何都会这样做。但是使用这段代码，我可以打开对话框多少次我喜欢并且代码块仍将执行。

尽管我的问题/问题是关于我是否必须忍受从加载的页面调用一些脚本文件，或者有更好的方法可以从父母加载的文件中启用脚本运行。但至少现在一切似乎都运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:41:39.423

小提琴确实会受到欢迎，但要开球：

```
DialogBox.dialog({ title: title, Buttons: null, position: 'center', close: function (ev, ui) { $(this).dialog("destroy"); } }); 
```

如果我们应用一些格式并将其分解，这一行可能是一个问题：

```
var obj = {};
obj.title = title;
obj.Buttons = null;
obj.position = 'center';
obj.close = function(ev,ui)
{
    $(this).dialog("destroy");//-->this will point to obj!!
};
DialogBox.dialog(obj); 
```

我认为您想要的是`this`指向，通常称为`that`or 或`_self`.

或者，您可以做的是创建一个闭包，以保留对创建对象的上下文的引用：

```
obj.close = (function(that)
{
    return function(ev,ui)
    {
        that.dialog("destroy");
    };
})($(this)); 
```

也许这与您的问题无关，但只是为了安全起见：设置小提琴

# umbraco - umbraco 4.8.1 节点图标始终显示“未发布”图标

> ID：12302346
> 
> 赞同：0
> 
> 时间：2012-09-06T14:27:31.870
> 
> 标签：umbraco

在 umbraco 4.8.1 中。

当我单击节点的“保存并发布”按钮时，右下角的弹出框显示发布成功，但节点图标仍然显示“未发布”图标。

对此有什么帮助吗？

在我的节点中，我使用一些多节点树选择器数据类型作为我的字段。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:20:31.773

不确定这是否对您有用，但请查看此错误问题。这可能是原因。它处理 Umbraco 4.7，但看起来这个问题也出现在以后的版本中。

[http://issues.umbraco.org/issue/U4-387](http://issues.umbraco.org/issue/U4-387)

# mysql - Mysql insert - 如果键不重复，则执行两个操作

> ID：12302347
> 
> 赞同：0
> 
> 时间：2012-09-06T14:27:33.597
> 
> 标签：mysql, stored-procedures

有没有办法在mysql中做这样的事情：

```
INSERT INTO <sometable> SET 
someRow = inputSomeValue, someOtherRow = inputValue2 AND
call function1()
ON DUPLICATE KEY ID = inNewID AND
call function2(); 
```

基本上，我想在“干净”插入时调用一些外部mysql存储过程，如果插入被重复键阻碍，则调用其他过程。这在 MySql 中可能吗？

**编辑：原始插入已经在存储过程中！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:29:13.557

要执行此类操作，您需要将其放在存储过程本身中，但您必须构建条件逻辑，您无法在这样的单个查询中执行此操作。

你可以在你的存储过程中做这样的事情：

```
DELIMITER $$
DROP FUNCTION IF EXISTS `dbname`.`ConditionalInsert` $$
CREATE FUNCTION `dbname`.`ConditionalInsert` (inputSomeValueVARCHAR(20), inputValue2 VARCHAR(20), oldID INT(10), inNewID INT(10)) RETURNS INT
BEGIN
  DECLARE testval INT;
  DECLARE returnval INT DEFAULT 0;
  SELECT COUNT(1) INTO testval FROM dbname.sometable WHERE ID = oldID;
  IF testval = 0 THEN
    INSERT INTO dbname.sometable someRow, someOtherRow) VALUES (inputSomeValue, inputValue2);
    CALL function1();
    SET returnval = 1;
  ELSE
    UPDATE dbname.sometable SET ID = inNewID WHERE ID = oldID;
    CALL function2();
    SET returnval = 2;
  END IF;
  RETURN returnval;
END $$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:46:54.597

不可以。不能从 INSERT 语句调用存储过程。

有一种方法可以从 INSERT 语句调用存储的程序，但它必须是用户定义的函数，例如：

```
INSERT INTO sometable (col)
SELECT IF( user_defined_function() , 'abc' , 'abc' ) 
```

但是无论结果行是否引发重复键异常，该函数都会被调用。也可以在 ON DUPLICATE KEY 子句中引用用户定义的函数。

```
INSERT INTO sometable (col1)
SELECT IF( user_defined_function() , 'abc' , 'abc' )
ON DUPLICATE KEY UPDATE col1 = IF( udf_duplicate() , VALUES(col1), VALUES(col1) ) 
```

请注意，这些构造的二进制日志记录（行与语句）存在问题，具体取决于这些函数的作用，这种类型的语句对于复制可能不是“安全的”。

所以我不认为你真的想采用这种方法。如果要插入单行，最好执行 INSERT ... ON DUPLICATE KEY UPDATE ... 语句，然后检查受影响的行数。受影响的行值 1 将告诉您插入了一行，受影响的行值 2 表示该行已更新，因此您可以有条件地调用所需的过程。

如果您总是希望在插入或更新任何行时调用这些存储过程中的操作，您可以考虑使用 AFTER INSERT 和 AFTER UPDATE 触发器。（您需要测试以确保从 ON DUPLICATE KEY UPDATE 触发 AFTER UPDATE 触发器......在旧版本的 MySQL 中存在未调用 AFTER UPDATE 触发器的问题。）

* * *

**编辑：**

对原始问题的最新更新指定此 INSERT 语句是从 MySQL 存储过程中执行的。

我会推荐这种方法：

```
DECLARE affected_rows INT;

INSERT INTO sometable (id,foo) VALUES (123,'bar')
ON DUPLICATE KEY UPDATE foo = VALUES(foo);

SELECT ROW_COUNT() INTO affected_rows;

IF affected_rows = 1 THEN
   CALL stored_procedure_after_insert(); 
ELSE
   CALL stored_procedure_after_update(); 
END IF; 
```

* * *

**问：**那么，“更新”后受影响的行数将是 0？

**A：**如果没有对任何行进行修改（通过`INSERT ... ON DUPLICATE KEY UPDATE`语句，ROW_COUNT() 函数将返回 0。

如果没有插入行，并且更新了单行，则 ROW_COUNT() 函数将返回 2。

获得 0 和 2 的区别在于该行是否实际被修改。当更新结果导致该行与该行的当前内容相同时（“未进行任何更改”），则 ROW_COUNT() 返回 0。如果更新导致行更改，则 ROW_COUNT()将是 2。

# html - 如果窗口溢出，如何使用“位置：固定”制作一个 div 以避开屏幕？

> ID：12302349
> 
> 赞同：2
> 
> 时间：2012-09-06T14:27:45.410
> 
> 标签：html, css, positioning, css-position, screen-size

我有两个 div，如下图所示。div #2 的位置是固定的，所以不管它有多小，它都会贴在屏幕的右侧。如果屏幕很小，那么 div #2 开始与 div #1 重叠，这是我不想要的。我知道这个问题是因为两个 div 的左右位置都是百分比，但它们必须只保持百分比。我可以使用 Javascript 解决这个问题，但我正在为可能禁用 Javascript 的用户考虑一个纯 CSS 解决方案。

```
+---------+ +---------+
|         | |         |
|         | |         |
|   #1    | |    #2   |
|         | |         |
|         | |         |
+---------+ +---------+ 
```

如果屏幕很小会发生什么：

```
+------ +---------+
|       |         |
|       |         |
|   #1  |    #2   |
|       |         |
|       |         |
+------ +---------+
-------scrollbar--- 
```

应该发生什么（屏幕在滚动条结束的地方结束）：

```
+---------+ +------
|         | |      
|         | |      
|   #1    | |    #2
|         | |      
|         | |      
+---------+ +------
------scrollbar---- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:31:32.603

如果你不想使用浮动。尝试改用`right:`你可以给`left:`#2 div一个值...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:31:54.710

用于`margin`定位您的 div #2 而不是`position: fixed`.

# typo3 - TYPO3 - 如何构建这种字段类型？

> ID：12302352
> 
> 赞同：0
> 
> 时间：2012-09-06T14:27:50.797
> 
> 标签：typo3

我想用这种字段扩展 tt_news，但我不知道怎么做。我已经尝试了 Kickstarter 上的所有 fiedl 类型，但似乎没有一个适合它。有人可以指出我可以学习如何创建它们的方向吗？

![在此处输入图像描述](../Images/16a44a06434adcfb6f0fe7a2ee05baf2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:35:42.237

这是一个“不相关”的领域。它是“内联”类型，无法通过 kickstarter 获得。

看：

*   [维基](http://wiki.typo3.org/Inline_Relational_Record_Editing)
*   [TER（IRRE 教程）](http://typo3.org/extensions/repository/view/irre_tutorial)
*   [核心文档](http://typo3.org/documentation/document-library/core-documentation/doc_core_tca/4.7.1/view/1/3/#id590095)

# visual-studio-2010 - 在 VS2010 中将按钮添加到解决方案资源管理器上下文菜单

> ID：12302353
> 
> 赞同：1
> 
> 时间：2012-09-06T14:27:56.613
> 
> 标签：visual-studio-2010, vsix, solution-explorer

我正在为 Visual Studio 2010 构建自己的扩展。它包含一个我希望从解决方案资源管理器的项目上下文菜单中可用的命令：

![在此处输入图像描述](../Images/00135dc8099123b9074c865947dd4345.png)

问题是，当我试图像这样（使用[这个解决方案](https://stackoverflow.com/questions/12088469/how-to-add-context-menu-entries-in-website-projects)）在命令表（.vsct）中放置菜单按钮描述时：

```
<Groups>
      <Group guid="guidChickPublisherCmdSet" id="ChickPublishMenuGroup" priority="0x0100">
        <Parent guid="guidSHLMainMenu" id="IDM_VS_CTXT_WEBPROJECT"/>
      </Group>
    </Groups>
    <Buttons>
      <Button guid="guidChickPublisherCmdSet" id="cmdidChickPublish" priority="0x0100" type="Button">
        <Parent guid="guidChickPublisherCmdSet" id="ChickPublishMenuGroup" />
        <Icon guid="guidImages" id="publishImg" />
        <Strings>
          <CommandName>cmdidChickPublish</CommandName>
          <ButtonText>Chick Publish...</ButtonText>
        </Strings>
      </Button>
    </Buttons> 
```

它不适用于 mvc 或简单的 Web 应用程序（仅适用于网站或单个项目项）。我已经尝试了很多 guid:id 对作为值，但没有成功。

有谁知道如何将此命令添加到解决方案资源管理器上下文菜单中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T09:40:00.257

这对我有用（网站除外）

```
<Groups>

  <Group guid="guidWizardPackage2010Project" id="MyMenuGroup" priority="0x0050">
    <Parent guid="guidSHLMainMenu" id="IDM_VS_CTXT_PROJNODE"/>
  </Group>

  <Group guid="guidWizardPackage2010Project" id="MyMenuGroup" priority="0x0050">
    <Parent guid="guidSHLMainMenu" id="IDM_VS_CTXT_WEBFOLDER"/>
  </Group>

  <Group guid="guidWizardPackage2010Project" id="MyMenuGroup" priority="0x0050">
    <Parent guid="guidSHLMainMenu" id="IDM_VS_CTXT_WEBITEMNODE"/>
  </Group>

  <Group guid="guidWizardPackage2010Project" id="MyMenuGroup" priority="0x0050">
    <Parent guid="guidSHLMainMenu" id="IDM_VS_CTXT_WEBPROJECT"/>
  </Group>

</Groups> 
```

# c# - Google Map Javascript API 与 Web 服务 API

> ID：12302357
> 
> 赞同：0
> 
> 时间：2012-09-06T14:28:08.113
> 
> 标签：c#, javascript, jquery, web-services, google-maps

我正在开始一个新项目，其中管理区域允许用户在站点上放置标记，每个标记指向一个单独的位置地址，地址来自数据库，现在我是谷歌地图的新手，我的后端开发人员更喜欢使用谷歌地图Web 服务 API，但我可以找到所有示例和示例都是针对他的 Javascript API

我应该使用哪一个？谷歌地图网络服务 API 或 JavaScript API

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:57:06.470

如果您需要在浏览器中使用谷歌地图功能，请使用**Javascript API 。**例如，您想要显示带有图标的 Google 地图图像。

如果您希望您的服务器端代码能够访问 google 地图功能，请使用**网络服务**api，而不必立即显示给用户。例如，您想获取两个坐标之间的距离并将其存储在数据库中。

**Javascript API** -> 直接显示给用户

**Web Service API** -> 直接显示到服务器端，然后可能作为第二步显示给用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:40:53.763

这取决于您想要做什么的所有意图和目的。如果您需要以简单的方式返回带有自定义叠加层的静态地图，我建议您使用他们的 Web 服务/REST API。您可以简单地将地址文本传递到 REST API，它会返回实际地图的图像，并且您可以传递所有不同的参数，例如您希望在屏幕上返回的图像宽度和高度。您可以放置​​标记，设置缩放级别，以及控制是否需要地图集或卫星视图以及所有相应的标签和标记。你可以在 Javascript 中做同样的事情，但是 REST 非常容易使用和实现。

静态地图 API 示例： [http](http://maps.googleapis.com/maps/api/staticmap?center=Brooklyn+Bridge,New+York,NY&zoom=13&size=600x300&maptype=roadmap) ://maps.googleapis.com/maps/api/staticmap?center=Brooklyn+Bridge,New+York,NY&zoom=13&size=600x300&maptype=roadmap &markers=color:blue%7Clabel:S%7C40 .702147,-74.015794&markers=color:green%7Clabel:G%7C40.711614,-74.012318 &markers=color:red%7Ccolor:red%7Clabel:C%7C40.718217,-73.998284&sensor=false

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:41:09.463

如果您希望显示地图并让用户修改标记，则必须使用 maps javascript API（显示地图需要 js 并且还可以进行地理编码）。

Javascript 文档： [https ://developers.google.com/maps/documentation/javascript/reference](https://developers.google.com/maps/documentation/javascript/reference)

Javascript 地理编码示例： [https ://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)

可拖动标记： [https ://google-developers.appspot.com/maps/documentation/javascript/examples/marker-animations](https://google-developers.appspot.com/maps/documentation/javascript/examples/marker-animations)

**Web 服务 API**更多地用于获取特定信息，例如地理编码、获取方向和地点等。但是，如果您已经在使用 Google 地图的 javascript 前端，您不妨使用那里提供的地理编码服务，这很容易使用并且不需要编写额外的代码来为您完成工作。

Web 服务文档： [https ://developers.google.com/maps/documentation/webservices/](https://developers.google.com/maps/documentation/webservices/)

# makefile - “通配符”函数用于提取目录中的源文件。

> ID：12302358
> 
> 赞同：2
> 
> 时间：2012-09-06T14:28:12.403
> 
> 标签：makefile, gnu-make

我有以下需要实现的场景。我将不得不从特定目录中提取所有源文件。因此过滤掉某些并编译其余部分。我正在按如下方式实施这种情况。

```
SOURCES = $(wildcard $(ROOT_DIR)/SRC/*.c)
FILTERED_SOURCES= $(filter-out $(ROOT_DIR)/SRC/File1.c, $(SOURCES)) 
```

我在这里面临的问题是 File1.c 没有被过滤掉。我预测可能的原因是过滤功能中使用的模式是一个长路径名，其中包含斜线和点。所以这里的问题是

1.  是否可以将文件名而不是整个路径存储在**“SOURCES”中**
2.  在过滤命令中是否有任何其他可疑的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T21:11:03.050

您是否尝试打印出 的值`SOURCES`？或者，是否`$(ROOT_DIR)`包含空格？

```
SOURCES := $(wildcard $(ROOT_DIR)/SRC/*.c)
$(error $(SOURCES)) 
```

就个人而言，我会使用[`abspath`函数](http://www.gnu.org/software/make/manual/make.html#File-Name-Functions)将所有内容转换为绝对路径，然后过滤结果列表。

```
SOURCES          := $(abspath $(wildcard $(ROOT_DIR)/SRC/*.c))
FILTERED_SOURCES := $(filter-out $(abspath $(ROOT_DIR)/SRC/File1.c), $(SOURCES)) 
```

要返回使用原始`$(ROOT_DIR)`前缀（虽然它通常是可选的），可以使用[`patsubst`function](http://www.gnu.org/software/make/manual/make.html#Text-Functions)：

```
SOURCES          := $(patsubst $(abspath $(ROOT_DIR))%,$(ROOT_DIR)%,$(SOURCES))
FILTERED_SOURCES := $(patsubst $(abspath $(ROOT_DIR))%,$(ROOT_DIR)%,$(FILTERED_SOURCES)) 
```

# r - 定位轴标签

> ID：12302366
> 
> 赞同：30
> 
> 时间：2012-09-06T14:28:41.260
> 
> 标签：r, plot, axes

如何在下图中将 y 轴标签从绘图区域的左侧移动到右侧，并将 x 轴标签从绘图区域的下方移动到上方？谢谢

```
xleft<-c(1,2,2.5)
xright<-c(2,2.5,2.75)
ybottom<-c(1,2,2.5)
ytop<-c(2,2.5,2.75)

par(mar = c(15,15,2.75,2.75) + 0.1)
plot(c(1,3),c(1,3),type="n",main="title",xlab="xlab-move me above plot",ylab="ylab-move me      right of plot",axes=F,asp=1)
axis(1,pos=1)
axis(2,pos=1)

rect(xleft,ybottom,xright,ytop,col=c("blue","red","green"))

#Label position along  axes
x.label.position<-(xleft+xright)/2
y.label.position<-(ybottom+ytop)/2

#Labels
x.label<-c("Long species Name1","Long species Name2","Long species Name3")
y.label<-c("Long species Name4","Long species Name5","Long species Name5")

text(par()$usr[1]-0.5,y.label.position,y.label,xpd=TRUE,adj=1)
text(y=par()$usr[3]-0.5,x=x.label.position,x.label,xpd=TRUE,adj=1,srt=90)

par(xpd=TRUE)
legend(-0.1,0,legend=c("Species A","Species B","Species C"),fill=c("blue", "red", "green")) 
```

![在此处输入图像描述](../Images/bbf771b8ddb7375380f54264c95d2572.png)

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-09-06T14:40:44.167

## 在绘图的右侧和顶部绘制轴

默认情况下，R 将绘制绘图区域下方的 x 轴和左侧的 y 轴。您可以通过以下方式更改此行为：

```
plot(1:100, cumsum(rnorm(100)), type="l", axes=FALSE) # Do not plot any axes
axis(3)   # Draw the x-axis above the plot area
axis(4)   # Draw the y-axis to the right of the plot area
box() 
```

![在此处输入图像描述](../Images/107302ce17b50df989e992e0e80968db.png)

还可以移动您设置的标签，`ann=FALSE`或者`xlab="", ylab=""`在之后添加它们`mtext`，其中`side=1`是底部，2 是左侧，3 是顶部，4 是右侧。`line`控制与绘图区域的距离。

```
plot(1:100, cumsum(rnorm(100)), type="l", axes=FALSE, ann=FALSE)
axis(3)
box()
mtext("Top axis", side=3, line=3) 
```

![在此处输入图像描述](../Images/0fad3952ee78cce72fb17c96b29ca40b.png)

## 更改标签、刻度和绘图区域之间的距离。

使用`mgp`参数来控制这些细节，或者在调用之前`plot`，像这样

```
par(mgp=c(axis.title.position, axis.label.position, axis.line.position)) 
```

或在`plot`命令本身中，像这样

```
plot(1:100, cumsum(rnorm(100)), type="l", mgp=c(2,1,.5), las=1) 
```

![在此处输入图像描述](../Images/d5c27702a3bebccb14d49cfd6f3b9e9c.png)

另请注意`las`将所有刻度标签水平转换的参数，这使它们更易于阅读。

# c# - 在 C# 中使用 Ookii.Dialogs.dll

> ID：12302367
> 
> 赞同：0
> 
> 时间：2012-09-06T14:28:55.180
> 
> 标签：c#, dll

`Ookii.Dialogs.dll`在 windows 窗体应用程序 (.net framework 3.5) 中使用会出现错误：

> 你调用的对象是空的

我已将`dll`文件放入其中`bin>>Debug`，然后添加对此的引用`dll`。在按钮单击事件上，当我调用 this 的方法时`dll`，它会给出上述错误。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-22T23:31:19.150

在调用 Show 之前，您必须向 TaskDialog 实例添加至少一个按钮，否则会出现该异常。将它包装在 中也是一个好主意`using`：

```
using (var td = new TaskDialog())
{
    var okButton = new TaskDialogButton(ButtonType.Ok));
    td.Buttons.Add(okButton);

    td.MainInstruction = "This is a dialog!"

    var whichButtonWasPressed = td.Show();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T14:40:02.400

添加参考时。

输入您的班级名称。

`Right click`在你的类和使用`Resolve Namespace`上，生成`using namespace ocrresponding`.

![在此处输入图像描述](../Images/87fb7a0f8f660723269d5893c111dc5f.png)

# html - Nodejs：服务的html页面未链接到css

> ID：12302368
> 
> 赞同：2
> 
> 时间：2012-09-06T14:29:02.120
> 
> 标签：html, css, node.js

我在 nodejs 中运行了以下基本脚本，以提供带有关联 css 样式表的 html 文件：

```
var http = require('http');
var fs = require('fs');
var path = require('path');

var serverPort = 8080;

var server = http.createServer(function(request, response) {

console.log('request starting ...');
var extname = path.extname(request.url);

var contentType = 'text/html';
    switch (extname) {
    case '.js':
        contentType = 'text/javascript';
        break;
    case '.css':
        contentType = 'text/css';
        break;
    }

fs.readFile('js/EmailDisplay/htm/index.html', function(error, content) {
    if (error) {
        console.log(error);
        response.writeHead(500);
        response.end();
    } else {
        console.log(contentType);
        response.writeHead(200, {'Content-Type': contentType});
        response.end(content,'utf-8');
    }
});
});

server.listen(serverPort);
console.log('Server running at localhost:' + serverPort +"/"); 
```

如果我在 Firefox 中打开文件（文件->打开文件），它会正确呈现。如果我去 localhost:8080 提供索引页面，但没有应用样式。为什么？fs.readFile 块中的 console.log 显示两个文件都在被读取。

PS - 我知道有些软件包可以让我盲目地这样做（例如“连接”），但我试图在走这条路线之前了解实际发生的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:39:01.067

问题可能出在这一行：

```
 fs.readFile('js/EmailDisplay/htm/index.html', function(error, content) { 
```

您正在读取并向客户端返回相同的 html 文件，即使在请求时`.js`也是如此。`.css`

您可能应该在代码中前面的开关中沿其内容类型设置文件的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T15:06:19.983

我在使用 nodejs 和 express 时遇到了同样的问题。`server.js`请参阅下面的示例

```
var express= require("express");
var app= express();
app.get("/", function(request, response) {
    response.sendFile("testing.html", {root: "."});
});
app.listen(8080); 
```

可以通过包含以下行来添加静态内容：

```
app.use(express.static("foundation-5.4.6", {index: false})); 
```

这使用[express.static](http://expressjs.com/4x/api.html#express.static)。就我而言，我从[Foundation](http://foundation.zurb.com/)框架提供静态 css 和 js，但您可以轻松地将其修改为您的特定`public`文件夹。

# c# - 从 JsonArray 中提取 JsonObject

> ID：12302374
> 
> 赞同：1
> 
> 时间：2012-09-06T14:29:16.887
> 
> 标签：c#, json, .net-4.5, system.json

我在从 Arry 中提取 JasonObject 时遇到问题，其中包含一些没有名称的对象。我通过批量请求表单 graph.facebook 获得了数组。

```
[
    {
    "code":200,
    "headers":[{...}],
    "body":"{
        \"id\":\"255572697884115_1\",
        \"from\":{
            \"name\":\"xyzk\",
            \"id\":\"59788447049\"},
        \"message\":\"Hey\",
        \"created_time\":\"2011-11-04T21:32:50+0000\"}"},
    {
    "code":200,
    "headers":[{...}],
    "body":"{
        \"id\":\"255572697884115_2\",
        \"from\":{
             \"name\":\"xyzk\",
             \"id\":\"59788447049\"},
        \"message\":\":P\",
        \"created_time\":\"2012-01-03T21:05:59+0000\"}"}
] 
```

现在我必须阅读包含对象的值“消息”，但我不知道如何访问数组中的对象。有人可以帮帮我吗？

我想使用 System.Json，附加 Newtonsoft.Json。

在 Java 中，GetJsonObject() 很容易使用，但是如何使用 VSC# 成功？有一个方法 JsonValueLinqExtensions.ToJsonObject 但我不知道如何使用。sb可以举个例子吗？

到目前为止，谢谢，

多米尼克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:33:27.673

您可以将 JSON 解析为`dynamic`使用[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)对象，例如

```
var serializer = new JavaScriptSerializer();   
var result = serializer.Deserialize<dynamic>(json);
foreach (var item in result)
{
    Console.WriteLine(item["body"]["message"]);
} 
```

# jakarta-ee - JSF 2.0 中的 ViewScoped 问题和替代解决方案

> ID：12302383
> 
> 赞同：0
> 
> 时间：2012-09-06T14:30:00.437
> 
> 标签：jakarta-ee, jsf-2, facelets

我在使用 ViewScoped bean 时遇到了一个相当有趣的问题，如 BalusC 的博客[http://balusc.blogspot.co.uk/2011/09/communication-in-jsf-20.html](http://balusc.blogspot.co.uk/2011/09/communication-in-jsf-20.html)中的详细描述，在“@ViewScoped 失败”部分下在标签处理程序中”。

那些使用这些标签的人有什么替代品？（尤其是 <ui:decorate>、<ui:composition>、<ui:include> 我猜它在 JSF 应用程序中被广泛使用，比如我的）。

有没有办法获取视图的唯一 ID，然后通过使用唯一 ID 和其他任何内容作为键的某种组合将视图的必要数据存储在会话范围内？

谁能指出博客或其他替代方法？每种方法的优缺点可能吗？

# python - Django：OAuth 令牌存储和更新

> ID：12302385
> 
> 赞同：1
> 
> 时间：2012-09-06T14:30:04.250
> 
> 标签：python, django, oauth

我正在运行一个 Django 应用程序，该应用程序需要与外部 API 交互以代表其用户发出请求。

在进行任何调用之前，我必须通过类似 OAuth 的接口获取访问令牌。这个令牌是我的，我的用户不会每个人都有一个。我已经用 测试了入口点和方法`curl`，一切似乎都运行良好，所以我准备好集成服务了。

当令牌过期时，我应该如何请求、存储、重用和更新这个令牌？此外，流程的哪些部分应该在客户端的浏览器上运行，哪些部分应该在 Django 后端运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:08:31.097

我最终创建了一个单行表，更新为包含最新的有效令牌。

主要原因：我知道无论我在哪里部署这个应用程序，无论在多少台机器上服务多少进程，数据库都将用作存储。它也没有太多额外的代码，并且与 Django 的应用程序打包相得益彰。

# symfony - Symfony2 中的教义更新问题

> ID：12302387
> 
> 赞同：0
> 
> 时间：2012-09-06T14:30:08.987
> 
> 标签：symfony, doctrine-orm

我写了一些类并在 DB 上生成相关表，`php app/console doctrine:generate:entities`
突然我明白我做错了什么，我已经将一些内容更改为该类： 有三个类（A、B、C），其中 A 连接到 B 和 C 是独立（现在）），但我的架构必须将 A 连接到 C。所以我以一致的方式修改所有类并启动`php app/console doctrine:schema:update --force`.

大吃一惊，我注意到 DB 上没有发生任何变化！
这怎么可能？有学说他缓存了一些东西或类似的文件吗？

PS：实体之间的关系是多对多的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:10:18.280

您是否尝试使用更新的实体生成新数据库来检查它们是否正确？一种简单的方法是更改`parameters.ini`​​文件上的数据库名称并再次运行生成数据库的控制台命令：

```
app/console doctrine:database:create
app/console doctrine:schema:create 
```

如果新数据库不正确，则您的实体有问题。你如何定义它们（YAML、XML 或注释）？我使用 YAML，有时`doctrine:generate:entities`操作效果不佳。发生这种情况时，我必须删除我的 PHP 实体并再次运行该命令。

除此之外，请检查[Doctrine 文档](http://doctrine-orm.readthedocs.org/en/2.1/reference/association-mapping.html)并确保您按照拥有方和反向方的规则正确定义了关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:24:55.957

如果您更改某些行，您可以通过键入以下内容来查看将执行哪些请求：

```
doctrine:schema:update --dump-sql 
```

如果学说没有看到您的修改，请尝试重新启动 apache，或清理 APC 缓存。上次我遇到这个奇怪的错误时，它对我有用。但是，学说当然会查看您是否删除或添加了字段！

# zeromq - Mongrel2 是否可以设置为每次启动时生成一个新的实例 UUID？

> ID：12302390
> 
> 赞同：3
> 
> 时间：2012-09-06T14:30:11.770
> 
> 标签：zeromq, mongrel2

根据 Mongrel2 手册中的规则 2（第 5.3.2 节），往来于 Mongrel2 的每条消息都将实例的 UUID 作为第一件事。规则 3（第 5.3.3 节）说它后面跟着一个数字，即来自 Mongrel2 的消息的连接 ID。每次我启动 Mongrel2 时，连接 id 从 0 开始，然后递增。所以我担心在重新启动 Mongrel2 后，对来自前一个实例的请求的回复可能会被接受为对来自当前 Mongrel2 实例的完全不同的请求的回复。因此我的问题是，如果 Mongrel2 每次启动时都可以动态创建一个新的 UUID。或者如果有一个很好的解决方法，除了必须保存状态，即检查重复的 UUID、连接 ID。

谢谢

# ios5 - 带有大量高分辨率图像的 iOS 动画

> ID：12302396
> 
> 赞同：-1
> 
> 时间：2012-09-06T14:30:45.387
> 
> 标签：ios5, animation, uiimageview

我对 iOS 编程很陌生，我遇到了这个问题。

我有一个动画是火车冲过去的视图。动画的帧是 60ish (1024x768) png，我将它们放入一个数组中，然后使用`[myUIImageView startAntimating]`.

这效果很好，但我有另一个动画，我想稍后在同一个视图中运行，它是相同分辨率的大约 270 pngs，其中火车停下来并且门打开。`UIImageView`以同样的方式将这些图像添加到 a中会导致应用程序崩溃。事实上，不添加第一组图像而仅添加这些图像会使应用程序崩溃。

克服这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:43:25.003

保存 270 个这样的 PNG 应该占用大约 850 mb 的内存，所以你不能一次保存它们。我可以想到三种方法来解决这个问题 -

1.  不是一次加载所有图像，而是仅在内存中保存（例如）10 个图像，丢弃已经显示的图像并从磁盘加载新图像。
2.  使用专用的电影格式；这些格式具有帧间压缩，其中新帧仅保留它与前一帧之间的差异。这显然减少了内存使用量。查看[`libav`的常见问题解答](http://libav.org/faq.html#How-do-I-encode-single-pictures-into-movies_003f)，了解如何将一系列图像转换为电影。
3.  减小图像的大小。如果您不在 iPad 上，或者不需要视网膜分辨率，则减少像素数将大大降低内存需求。

# java - JTable 和类似 Excel 的公式

> ID：12302398
> 
> 赞同：2
> 
> 时间：2012-09-06T14:31:12.293
> 
> 标签：java, swing, jtable, excel-formula

经过一番研究，我找到了一种在我的 JTable 中实现公式的方法（如果我理解正确的话，这是一种冗长而乏味的方法。）。

这是表格的样子（您可能会说它是用 netbeans 编辑的，不要介意大量的 null 部分，我们稍后会讨论）

```
 contractFlaminiaTable.setModel(new javax.swing.table.DefaultTableModel(
        new Object [][] {
            {"name1", null, null, null, null, null, null, null, null, null, null},
            {"name2", null, null, null, null, null, null, null, null, null, null},
            {"name3", null, null, null, null, null, null, null, null, null, null},
            {"name4", null, null, null, null, null, null, null, null, null, null},
            {"name5", null, null, null, null, null, null, null, null, null, null},
            {"name6", null, null, null, null, null, null, null, null, null, null},
            {"name7", null, null, null, null, null, null, null, null, null, null},
            {"name8", null, null, null, null, null, null, null, null, null, null},
            {"TOTAL", null, null, null, null, null, null, null, null, null, null}
        },
        new String [] {
            "  ", "col1", "col2", "col3", "col4", "col5", "col6", "col7", "col8", "col9", "TOTAL"
        }
    ) {
        Class[] types = new Class [] {
            java.lang.String.class, java.lang.Integer.class, java.lang.Integer.class, java.lang.Integer.class, java.lang.Integer.class, java.lang.Integer.class, java.lang.Integer.class, java.lang.Integer.class, java.lang.Integer.class, java.lang.Integer.class, java.lang.Object.class
        };
        boolean[] canEdit = new boolean [] {
            false, true, true, true, true, true, true, true, true, true, false
        };

        public Class getColumnClass(int columnIndex) {
            return types [columnIndex];
        }

        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return canEdit [columnIndex];
        }
    });
    contractFlaminiaTable.setRowHeight(30);
    contractFlaminiaTable.getTableHeader().setReorderingAllowed(false);
    flaminiaScrollPane2.setViewportView(contractFlaminiaTable);
    contractFlaminiaTable.getColumnModel().getColumn(0).setResizable(false);
    contractFlaminiaTable.getColumnModel().getColumn(1).setResizable(false);
    contractFlaminiaTable.getColumnModel().getColumn(2).setResizable(false);
    contractFlaminiaTable.getColumnModel().getColumn(3).setResizable(false);
    contractFlaminiaTable.getColumnModel().getColumn(4).setResizable(false);
    contractFlaminiaTable.getColumnModel().getColumn(5).setResizable(false);
    contractFlaminiaTable.getColumnModel().getColumn(6).setResizable(false);
    contractFlaminiaTable.getColumnModel().getColumn(7).setResizable(false);
    contractFlaminiaTable.getColumnModel().getColumn(8).setResizable(false);
    contractFlaminiaTable.getColumnModel().getColumn(9).setResizable(false);
    contractFlaminiaTable.getColumnModel().getColumn(10).setResizable(false);
    contractFlaminiaTable.getColumnModel().getColumn(10).setPreferredWidth(48); 
```

所以，问题是，在 name1/2/etc 行和列内应该有数字（而不是由 netbeans 自动生成的空垃圾邮件，我在应用程序中有一个“重置”按钮制作自定义 tableModel 但那是一个旧版本，在这里没有用处）并且在总行/列中应该有相应列/行中的数字总和。

从我读过的许多线程中，我可以使用 getValueAt 方法对相应行/列中的单元格求和。不过，我不太确定这是一个不错的选择，因为每次都需要读取大量单元格（它应该在用户在表格中输入数字时动态更新总数，而不是计算我也不知道如何在特定的单元格中实现它）。

以下是问题：

**a)**是否可以制作一个类似 excel 的公式来添加单元格？（就像添加单元格c2：c6一样，因为我确实将该表导出到一个excel文件中，我想如果这样的事情是可能的......）

**2a）**我是否必须将列类型更改为对象或所述公式仍将被视为整数？（除了作为 String 类型实现的 name 列之外，所有其他列都是 Integer 类型，最终用户也应该只能插入数字以免弄乱公式，但将类型更改为 Object 实际上可以也插入字母）

**b）**是否可以在桌子上使用 eventListeners 来制作一个非 excel 式的公式（以防万一 - 这是不可能的）？（类似于“行（x）中的数据，col（y）改变了，用总和更新了总单元格！”）

**c）**由于表中的数据被导出到 xls 文件（在另一个线程中获得一些指针后已经正确实现），是否可以使用所述文件再次填充表，或者我每次都必须重新绘制它?

很抱歉一起提出所有这些问题（尤其是 c-，因为它与标题无关..）但我并没有真正找到 oracle 提供的 jTable 类教程中的任何内容，也没有在其他类似内容中找到任何建设性的建议线程。

请耐心等待，正如另一个线程中所述，我仍然是一个初学者（如果我可以被认为是一个初学者！）另外，提前感谢您的帮助，另一个中的指针真的帮助了我！

PS：我希望我以一种可以理解的方式解释它，当你必须解释一些东西时，对编程世界的新手并不容易..

再次感谢您的帮助~

**编辑：**

这是我想出的在表格中实现公式的代码（实际上它是 get/setValueAt() 的一种奇怪用法，但它似乎工作得相当好（有点笨拙但有改进的余地只会让我学到更多东西，这总是一天结束时很好）

```
class TotalButton {

public TotalButton(JTable jTable) {
    // get table model
    TableModel model = jTable.getModel();

    // declare for variables
    int x;
    int y;

    // initialize table placeholder
    int totalValue = 0;

    int rowCount = model.getRowCount();
    int columnCount = model.getColumnCount();

    // for loop for the first row
    for (x = 0; x < rowCount; x++) {
        for (y = 1; y < columnCount; y++) {
            if (y == 10) {
                break;           // break when the loop reaches the total column
            }
            if (x == 0) {

                String value = (String) model.getValueAt(x, y);
                if ("".equals(value)) {
                    value = "0";            // avoiding empty string to integer error
                }
                int tempVal = Integer.parseInt(value);           // turn the string into a number

                totalValue = totalValue + tempVal;          // adds the numbers to the total
            }
        }

        String finalValue = Integer.toString(totalValue);           // turn the number to a string
        model.setValueAt(finalValue, 0, 10);            // set total column value
    } 
```

基本上我添加了一个按钮来计算和填充表格的总行/列（在某些时候添加了一个 keyListener，但是，正如我所说，它感觉有点笨拙......不是使用按钮感觉有什么不同但很好......） .

您可以在代码段中阅读的循环是为 Total 行/列中的每个单元格添加的（只发布了一部分，因为每个单元格的内容几乎相同）。

还必须在 jTable 模型中用 ""-s 更改 null-s，以便我可以将列类型设置为 String（后来用于 Integer.parseInt() 和 Integer.toString() ）。

附带说明一下，虽然 keyListener 感觉有点笨拙，但它会“实时”更新表（说“真实”，因为在表中插入新值不会算作 keyPressed() 直到下一次击键一些原因）。

再次感谢您的指点，该程序似乎工作得相当好，即使它真的可以使用一些代码/逻辑抛光（我目前正在处理）。

PS：我知道这远不是最好的解决方案，但我很高兴，因为我在研究了很多之后自己做了它（当然，如前所述，如果没有指针，我将无法编写代码）

PPS：再次，谢谢你：P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:12:23.427

对于数字，让您`TableModel`将表达式存储为`String`并让您的实现`getValueAt()`返回表达式的评估结果。有几个[库](https://stackoverflow.com/q/7258538/230513)可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-09T17:25:27.617

实际上，对于将 String 转换为 int 的那部分，最好使用 try/catch 块，如果它不能是 int，则将其设为 0。这样，如果您将 Bob、3.1415926 等放入其中，它就可以处理。

# mysql - 选择和更新 SQL 表（一键式）

> ID：12302399
> 
> 赞同：0
> 
> 时间：2012-09-06T14:31:19.223
> 
> 标签：mysql, sql, database

我一直想知道如何从数据库中选择多行，并且它们的一个或多个列是即时更新的。让我们以搜索引擎为例，它会抓取数千个结果并更新查看次数（使用单个查询）。

那可能吗？他们是否使用特殊的 SQL 功能来实现这一点？

PS：如果之前有人问过这个问题，请参考我，因为我没有找到相同的问题，如果它很蹩脚，我知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:38:18.550

例如，如果您考虑 Google 是如何做到的，他们使用*Bigtable*（请参阅[此问题](https://stackoverflow.com/questions/362956/what-database-does-google-use)进行讨论）我对它的内部工作原理一无所知，因此无法发表评论。

`select`至于您的问题，不可能`update`一次性完成 - 即在纯 SQL 中。但是，可以使用存储的函数来执行此操作。考虑以下函数（伪代码）

```
create function select_and_update(criteria) returns setof data_rows
  as
begin
    update some_table set view_count = view_count + 1 where criteria;
    return set "select * from some_table where criteria";
end; 
```

然后在应用程序中，您可以进行一次数据库调用：

```
SELECT * FROM select_and_update(criteria) 
```

这样，应用程序只有一次“命中”（即，您只对数据库连接执行来自应用程序的一次查询），但是内部视图计数会更新并返回数据。

当然，具体细节取决于数据库引擎和您的特定需求，但我确实在我的网站中广泛使用了这种技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:42:04.727

假设数据存储在关系数据库中，答案是检索不是通过单选。我可以想到两种方法。

首先是通过存储过程或表值用户定义函数进行检索。该代码将获取结果并进行更新，然后返回结果。

或者，检索可以使用游标。一种类型的游标是可更新游标，它允许调用者在一次调用中读取和更新数据。可更新游标通常相当慢，因此使用不多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:35:35.353

如果我正确理解您的问题，为什么不是`join`两张表？像这样的东西，

```
UPDATE table1 t1 
        INNER JOIN 
        (
            SELECT id, count(*) totalCount
            FROM tableName
            GROUP BY id
        ) t2 
            ON t1.id = t2.id
SET t1.col1 = t2.totalCount 
```

# wpf - 根据在 TextBox 中输入的文本选择 ListBox 中的项目

> ID：12302400
> 
> 赞同：0
> 
> 时间：2012-09-06T14:31:20.810
> 
> 标签：wpf, xaml, mvvm

我正在准备一个示例代码，其中当用户在 TextBox 中输入文本时会自动选择 ListBox 中的文本。到目前为止我已经达到了结果，但是没有不区分大小写的匹配。这是代码。

**XAML**

```
<StackPanel>
    <TextBox Name="txt" />
    <ListBox ItemsSource="{Binding Employees}" DisplayMemberPath="Name" SelectedValuePath="Name" 
             Height="100" SelectedValue="{Binding Text, ElementName=txt}" SelectedItem="{Binding SelectedEmployee}"/>
    <Button Content="OK" Command="{Binding SaveCommand}" />
</StackPanel> 
```

我将此 XAML 与以下 ViewModel 绑定。

**视图模型**

```
public class CheckViewModel : ViewModel.ViewModelBase
{
    IList<Employee> employees;

    Employee _selectedEmployee;

    public CheckViewModel()
    {
        employees = new List<Employee>() { 
            new Employee(1, "Morgan"), 
            new Employee(2, "Ashwin"), 
            new Employee(3, "Shekhar"),
            new Employee(5, "Jack"),
            new Employee(5, "Jill")
        };
    }

    public IList<Employee> Employees
    {
        get
        { return employees; }
    }

    public Employee SelectedEmployee
    {
        get
        { return _selectedEmployee; }
        set
        {
            if (_selectedEmployee != value)
            {
                _selectedEmployee = value;
                this.OnPropertyChanged("SelectedEmployee");
            }
        }
    }

    ICommand _saveCommand;
    public ICommand SaveCommand
    {
        get
        {
            if (_saveCommand == null)
            {
                _saveCommand = new ViewModel.RelayCommand((p) =>
                {
                    if(this._selectedEmployee != null)
                        MessageBox.Show(this._selectedEmployee.Name);
                    else
                        MessageBox.Show("None Selected");
                },
                (p) =>
                {
                    return this._selectedEmployee != null;
                });
            }
            return _saveCommand;
        }
    }
}

public class Employee
{
    public Employee(int id, string name)
    {
        this.Name = name;
        this.Id = id;
    }
    public string Name { get; set; }
    public int Id { get; set; }
} 
```

因此，当我在 TextBox 中键入“Jack”时，选择就正确发生了。但是当我改变大小写时 - “jack” - 选择不会发生并且 SelectedEmployee 变为空。当然，比较是区分大小写的，但是我怎样才能改变这种行为呢？

您能否指导我如何使比较不区分大小写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:38:46.160

您可以将文本框绑定到 ViewModel 中的属性，如下所示：

```
 <TextBox Name="txt" Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"/> 
```

视图模型：

```
 public string SearchText
    {
        get { return _searchText; }
        set
        {
            _searchText = value;
            // provide your own search through your collection and set SelectedEmployee
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:24:17.850

如果您使用 HashSet，那么您可以设置比较器。它还将防止您输入重复的值。

```
HashSet<string> xxx = new HashSet<string>(StringComparer.InvariantCultureIgnoreCase); 
```

不是问题，而是比较两个字符串不区分大小写的使用

[String.Compare 方法（字符串、字符串、布尔值）](http://msdn.microsoft.com/en-us/library/zkcaxw5y.aspx)

# forms - 当有人单击电子邮件中的链接时，如何自动填写电子邮件表单字段？

> ID：12302405
> 
> 赞同：0
> 
> 时间：2012-09-06T14:31:37.727
> 
> 标签：forms, url-parameters

我有一个包含基本字段的表单：姓名、地址、电子邮件等。有人通过单击发送给他/她的电子邮件中的链接来访问此表单。我如何构建链接，当用户单击它并登陆表单页面时，电子邮件字段会自动填写他/她的电子邮件地址？这甚至可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:35:11.610

您可以在查询字符串中传递他的电子邮件 ID，并在表单中检查是否存在，然后将其放入文本框中。

我假设您从另一个页面登陆到您的页面。

# c# - 声明和迭代集合

> ID：12302407
> 
> 赞同：1
> 
> 时间：2012-09-06T14:31:43.740
> 
> 标签：c#, generics, boxing

我有对象的名称和类型以及方法名称。理想情况下，我想实例化对象并调用方法。一切都很好，但我在尝试处理结果时遇到错误。

```
private void GetData(DropDownList ddl)
    {
        ObjectDataSource ods = (ObjectDataSource)ddl.DataSourceObject;
        System.Reflection.Assembly assembly = typeof(ExistingObject).Assembly;

        Type type = assembly.GetType(ods.SelectMethod);
        var instance = Activator.CreateInstance(type);

        IterateCollection(instance, ddl);
    }

    private static void IterateCollection<T>(T instance, DropDownList ddl) 
    {
        ObjectDataSource ods = (ObjectDataSource)ddl.DataSourceObject;
        Type type = instance.GetType();
        MethodInfo methodInfo = type.GetMethod(ods.SelectMethod);

        LinkedList<T> col = (LinkedList<T>)methodInfo.Invoke(null, new object[] { (T)instance });

        foreach (T o in col)
        {
            string textfield = Convert.ToString(GetPropValue(o, ddl.DataTextField));
            string valuefield = Convert.ToString(GetPropValue(o, ddl.DataValueField));
            ListItem li = new ListItem(textfield, valuefield);
            if ((bool?)GetPropValue(o, "Active") != true)
                li.Attributes.CssStyle.Add("background-color", "gray");
            ddl.Items.Add(li);
        }
    } 
```

我在“Invoke”行中收到错误消息 `System.InvalidCastException : Unable to cast object of type 'System.Collections.Generic.LinkedList``1[Business.Objects.MyType]' to type 'System.Collections.Generic.ICollection`1[System.Object]'。

我希望能够遍历集合。我怎样才能做到这一点？如何创建 LinkedList 或类似的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:48:01.787

看起来该类型`T`必须始终提供一个方法，该方法具有存储在其中的名称`ods.SelectMethod`和多个属性。如果`T`必须实现包含此方法的接口，您可以`IterateCollection<T>`使用以下方法约束该接口：

```
 private static void IterateCollection<T>(T instance, DropDownList ddl)
       where T: IMyInterface 
```

假设您不能这样做，请使用`LinkedList<object>`. 您正在使用反射调用方法，因此泛型不会为您提供任何语法帮助。

# sql-server - 如何获取 Mono 的 System.Data.SqlClient 二进制文件？

> ID：12302415
> 
> 赞同：2
> 
> 时间：2012-09-06T14:32:04.980
> 
> 标签：sql-server, mono

我已经下载了 OS X 的 Mono 的最新稳定版本（撰写本文时为 2.10.9），我在[这里](http://www.mono-project.com/SQLClient)看到了 System.Data.SqlClient 的文档，但安装后我找不到 System.Data.SqlClient .dll 文件。我可以在 /Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.Data.dll 找到 System.Data.dll，但我在任何地方都找不到我要找的那个在我的硬盘上。

我下载的版本没有实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:10:20.713

System.Data.SqlClient 命名空间位于 System.Data 程序集中。没有 System.Data.SqlClient.dll。

从您链接的文档中：

> 存在于命名空间 System.Data.SqlClient 和程序集 System.Data

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:37:02.433

获取程序集的 AssemblyInfo 并检查它是从哪个文件加载的

```
Connection cn = new Connection(); // from System.Data.SqlClient;
Assembly assembly = cn.getType().Assembly;
Console.WriteLine(assembly.Location); 
```

或类似的东西。

# .net - 嵌套子报表之间的共享子报表

> ID：12302416
> 
> 赞同：1
> 
> 时间：2012-09-06T14:32:09.313
> 
> 标签：.net, xml, visual-studio, reporting-services, subreport

我有一个 xml 数据，我正在使用报表查看器将其转换为 PDF。我有嵌套数据，所以我正在使用子报表。在其中一种情况下，我有两个子报表 Sub1 和 Sub2 来自 1 个主报表，它们调用一个通用子报表 SubSub1。SubSub1 有一些公共数据，并且进一步有与 Sub1 和 Sub2 专门相关的数据的子报表。

```
<MainReport>
 <Sub1>
  <SubSub1>
   <data>
   </data>
  </SubSub1>
 </Sub1>
 <Sub2>
  <SubSub1>
   <data>
   </data>
  </SubSub1>
 <Sub2>
<MainReport> 
```

我能够在这方面更进一步。这些数据的性质使我有多个 MainReports。目前我正在为第一个 MainReport 获取 Sub1 和 Sub2 的正确数据，但后面的数据显示的是第一个 MainReport 的数据。调试显示正确的数据被添加到 SubSub1 的 reportdatasource，但 reportviewer 显示第一个 MainReport 的数据（而不是 2nd、3rd...）。为什么reportviewer 卡住了来自先前数据源的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T07:19:07.587

通过您评论中添加的信息，我猜这个问题在于报表设计者**对 .data 文件的缓存非常不可预测**，尤其是在处理许多主要报表中使用的子报表时。在 BIDS2008 中使用子报表时，在我看来，子报表的实际*报表定义*甚至被缓存了。

以下是一些让您的设计师重回正轨的“刷新”方法，从小到侵入：

*   进行预览后，明确点击**refresh**。这通常会强制刷新数据和渲染。
*   **删除相应报告**的 .data 文件，然后再进行一次预览。****
***   **关闭所有报表设计**器（子报表和主报表）。删除`.data`文件。*   **关闭 Visual Studio** *并*执行上述所有操作。**

 **如果最后一步不起作用，那么可能还有其他事情在起作用，因为据我所知，这会将设计器完全重置为空白。

PS。您想要的（嵌套和重新使用子报表）是完全可能的。通常只有设计师有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:45:02.333

下面是一个示例 xml 文件：

```
 <MainReport>
    <data>
    </data>
    <A>
      <B>
        <Subreport>
          <data>
          </data>
        </Subreport>
        <data>
        </data>
        <Subreport>
          <data>
          </data>
        </Subreport>
        <Subreport>
          <data>
          </data>
        </Subreport>
        <data>
        </data>
      </B>
    </A>
    <C>
      <B>
        <data>
        </data>
        <Subreport>
          <data>
          </data>
        </Subreport>
          <Subreport>
          <data>
          </data>
        </Subreport>
        <data>
        </data>
      </B>
    </C>
    <data>
    </data>
    <Subreport>
      <data>
      </data>
    </Subreport>
  </MainReport> 
```

B 是 A 和 C 之间的公共子报表，并且有多个 MainReport。对于单个 MainReport，A 和 C 也将有多个 B。加载此 xml 后，我将通过 subreportprocessing 事件处理程序为每个子报表添加数据。**

# html - 如何调整 html 表格列的大小以模拟 Windows 表单 datagridview

> ID：12302424
> 
> 赞同：-1
> 
> 时间：2012-09-06T14:32:23.790
> 
> 标签：html, asp.net, html-table, ajaxcontroltoolkit, collapsiblepanelextender

这是我的困境；我的页面上有一个这样的表格：

```
<table border="1" cellspacing="0" width="100%">
    <tr>
        <td width="40px" valign="top" style="background-color:#5d7b9d" height="5px" >
            <asp:Panel runat="server" ID="pnlLeftTitle" Width="40px" BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" HorizontalAlign="Center">
                <asp:Image runat="server" ID="imgLeftControl" BorderStyle="None" ImageUrl="~/Images/Collapse.gif" />
            </asp:Panel>
        </td>
        <td valign="top" title="Navigation" rowspan="2">
            <asp:Panel runat="server" ID="pnlLeftContent" BorderColor="#999999" BorderStyle="Solid" BorderWidth="1px">
                <asp:Panel ID="pnlLeftTop" runat="server" Width="100%" HorizontalAlign="Right">
                    <asp:LinkButton ID="btnApplyFilter" runat="server" Font-Size="Smaller" CausesValidation="False">Apply Filter</asp:LinkButton>
                    &nbsp;
                    <asp:LinkButton ID="btnClearFilter" runat="server" Font-Size="Smaller" CausesValidation="False">Clear Filter</asp:LinkButton>
                </asp:Panel>
            </asp:Panel>
        </td>
        <td valign="top" title="Order Listing" rowspan="2">
            <uc1:ucOrderListing runat="server" ID="ucOrderListing1" />
        </td>
    </tr>
    <tr>
        <td width="40px" valign="middle" style="background-color:#5d7b9d">
            <asp:Image runat="server" ID="imgLeft" ImageUrl="~/Images/VertWhiteMenu.gif" ImageAlign="Middle" />
        </td>
    </tr>
</table>

<act:CollapsiblePanelExtender runat="server" ID="cpeLeft" AutoCollapse="false" 
    TargetControlID="pnlLeftContent" ExpandedSize="250" ExpandDirection="Horizontal" CollapsedSize="0" 
    CollapsedText="Menu" ExpandedText="Menu" ExpandControlID="pnlLeftTitle" 
    CollapseControlID="pnlLeftTitle" ImageControlID="imgLeftControl" CollapsedImage="~/Images/Expand.gif" 
    ExpandedImage="~/Images/Collapse.gif" >
</act:CollapsiblePanelExtender> 
```

此外，我正在动态添加面板`pnlLeftContent`并将其宽度设置为 100%。

折叠时，左侧 (title="Navigation") 列看起来很完美。展开时，当我的浏览器最大化时，pnlLeftContent 面板和用户控件之间有空白空间。打开表格边框表示空间位于 pnlLeftContent 的左侧边界和“导航”列的左侧边界之间的“导航”列中。

我想要的是左栏适合内容，而我的桌子的右栏占据剩余空间。在 windows 窗体 datagridview 中，我将通过将左列的 AutoSizeMode 设置为 AllCells 并将右列的 AutoSizeMode 设置为 Fill 来完成此操作。

如何使用 html 表完成相同的操作？还是有更好的方法来处理水平`CollapsiblePandelExtender`以与其他控件并排显示？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:54:08.330

我会设置 cellspacing="0"

还为 pnleft 和用户控件添加一个 td，然后将它们设为子表。

使用 css 和 div 会更容易，但表格可以工作，即使样式变得很痛苦。

td 宽度=“25%”

td width="75%" 表 tr td ...pnlLeftContent td .... uc

我也将使用 jquery ( .slide ) 来展开而不是服务器控件。更简单的 jquery 幻灯片 div[1]

[http://designgala.com/how-to-expand-collapse-toggle-div-layer-using-jquery/](http://designgala.com/how-to-expand-collapse-toggle-div-layer-using-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:41:29.593

由于以下原因找到了解决方案：

[如何让一个表格列填满所有空闲的水平空间？](https://stackoverflow.com/questions/7138605/how-do-i-make-one-table-column-fill-all-the-spare-horizontal-space)

长话短说，我将包含我的用户控件的列设置为 99% 的宽度。它在设计器中看起来很乱，但是一旦将所有动态添加的面板添加到 pnlLeftContent 中，它就会完美运行。

谢谢拉纳塔

# c# - 如何在 C# 中加入两个或多个对象？

> ID：12302428
> 
> 赞同：0
> 
> 时间：2012-09-06T14:32:51.227
> 
> 标签：c#, object, join

我想验证一组对象，我需要将它们组合在一起。

```
var mensajesDeValidacion = _validador.Valida();
if (!_validador.EsValido){
throw new ValidacionException("Corrija los siguientes errores", mensajesDeValidacion);}

public class Empresa : IEmpresa
{
  public int IdEmpresa{get;set;}
  public string Nombre{get;set;}
}

public interface IEmpresa
{
  int IdEmpresa{get;set;}
  string Nombre{get;set;}
} 
```

和其他类

```
public class ContactoEmpresa : IContactoEmpresaEmpresa
{
  public int IdContactoEmpresaEmpresa{get;set;}
  public string Direccion{get;set;}
}

public interface IContactoEmpresaEmpresa
{
  int IdContactoEmpresaEmpresa{get;set;}
  string Direccion{get;set;}
} 
```

我怎样才能加入这两个或更多的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:35:28.837

使用字段创建新类`IEmpresa`和`IContactoEmpresaEmpresa` /或使用`Tuple<T1,T2>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:36:16.747

不久前介绍的元组，你可以看看，很简单。

[http://msdn.microsoft.com/en-us/library/dd268536.aspx](http://msdn.microsoft.com/en-us/library/dd268536.aspx)

# java - 无法解析的数据异常

> ID：12302434
> 
> 赞同：1
> 
> 时间：2012-09-06T14:33:07.327
> 
> 标签：java

我想转换此数据：“Thu, 06 Sep 2012 16:15:00 +0200”，格式为 yyyy-MM-dd HH:mm

这是我的代码：

```
private static final SimpleDateFormat rssFormat = new SimpleDateFormat("E, dd MMM yyyy HH:mm:ss Z");
public static final SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date date = rssFormat.parse(pubDate);
date.setHours(date.getHours()+2); //this is for gmt difference
this.pubDate = dateFormat.format(date); 
```

看起来没问题...为什么会抛出这个异常？

```
java.text.ParseException: Unparseable date: "Tue, 04 Sep 2012 16:45:00 +0200" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T14:36:21.263

对我有用 - 但是，我在“Thu”是有效的日期缩写，“Sep”是有效的月份缩写的语言环境。也许你不是？假设您知道您*将*获得美国英语日/月名称，您应该指定它。试试这个：

```
new SimpleDateFormat("E, dd MMM yyyy HH:mm:ss Z", Locale.US); 
```

请注意，您*绝对*不应该这样`Date.setHours`打电话`Date.getHours`。这些方法都已被弃用超过 15 年。

相反，您应该将一`SimpleDateFormat`组格式化为适当的时区......或者最好首先使用[Joda Time](http://joda-time.sf.net)，这是一个更令人愉快的日期/时间 API。

# c# - IBM DB2 9 SQL0206N EntityCommandExecutionException [colname] 在使用它的上下文中无效

> ID：12302436
> 
> 赞同：0
> 
> 时间：2012-09-06T14:33:08.333
> 
> 标签：c#, .net, entity-framework, db2

我在使用 IBM DB2 和 .net Entity Framework 时遇到问题。我目前正在尝试使用 EF 从 DB2 数据库中获取数据。这是代码：

```
 using (DBEntities ent = new DBEntities())
 {
    foreach (Company comp in ent.COMPANIES)
    {
       listBox1.Items.Add(comp.Address);
    }
 } 
```

我遇到了这个异常：“EXTENT1.COMPANY_ID”在使用它的上下文中无效。我注意到我的架构不同。应该是CMIS。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:12:56.823

在您的流体代码中，您可能需要在 DbContext 中指定表模式。

```
 modelBuilder.Entity<MyEntity>().Map(m => m.ToTable("MYTABLE", "MYSCHEMA")); 
```

# asp.net - 在网页中显示两个或更多日历？

> ID：12302439
> 
> 赞同：0
> 
> 时间：2012-09-06T14:33:15.227
> 
> 标签：asp.net, ajax, calendar

我使用 Ajax 控制器来显示弹出式日历。我使用了 Toolkit 脚本管理器、文本框和日历扩展器，但是当我第二次使用它时，我得到了错误：“只有一个 ScriptManager 的实例可以添加到页面中。” 还有其他显示弹出日历的方法吗？

```
 <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </asp:ToolkitScriptManager>
    <asp:TextBox ID="txtstartdate" runat="server" 
        ontextchanged="txtstartdate_TextChanged"></asp:TextBox>
    <asp:CalendarExtender ID="CalendarExtender1" TargetControlID="txtstartdate" 
        runat="server" PopupPosition="Left"></asp:CalendarExtender>
    <br />
    <asp:Label ID="Label3" runat="server" Height="25px" Text="To" Visible="False"></asp:Label>

    <asp:ToolkitScriptManager ID="ToolkitScriptManager2" runat="server">
    </asp:ToolkitScriptManager>
    <asp:TextBox ID="Txtenddate" runat="server" 
        ontextchanged="Txtenddate_TextChanged"></asp:TextBox>
    <asp:CalendarExtender ID="CalendarExtender2" TargetControlID="Txtenddate" runat="server">
    </asp:CalendarExtender> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T08:50:29.600

只放置一个脚本管理器。然后，您可以使用任意数量（几乎 :)）的日历扩展器。

# javascript - RequireJS：有没有办法实现多个基本 URL？

> ID：12302440
> 
> 赞同：36
> 
> 时间：2012-09-06T14:33:17.543
> 
> 标签：javascript, requirejs

我想使用一个单独的域作为 JavaScript 框架，它将创建一个基本的需要配置，我可以从应用程序中扩充它。

```
foo.example.com
    main.js
    lib/foo-specific.js
framework.example.com
    framework.js <-- entry point
    lib/jquery.js
    lib/etc... 
```

理想情况下，我希望能够要求 'lib/foo-specific' 和/或 'lib/jquery' 并且路径可以很好地解析，但是根据我的发现，没有办法做到这一点，除非我为框架中的每个 js 文件使用特定的路径键/值。目前，我有一个自定义插件来加载具有不同基本 url（例如`fw!lib/jquery`）的给定路径，但如果我想使用该`text!`插件，它将无法工作，因为不支持插件链接。

请参阅[https://github.com/jpillora/js-framework](https://github.com/jpillora/js-framework)了解我目前拥有的内容，以及[https://github.com/jpillora/prettyprinter](https://github.com/jpillora/prettyprinter)了解用例。

有没有一种干净的方法来解决这个问题？或实现多个基本 URL？

注意：我还研究了多个 require 实例，但我认为这不会起作用，因为我希望应用程序能够访问框架的配置。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-09T14:52:07.393

James Burke 在 RequireJS Github 问题页面上回答：[问题 #447：多个基本 URL · jrburke/requirejs](https://github.com/jrburke/requirejs/issues/447)。

如果**data-main 是脚本的唯一入口点（更多信息的评论）**，结果会非常简单，我通过以下方式解决了我的特定问题：

我的应用程序`index.html`：

```
<script src="http://framework.jpillora.com/js/lib/require.js" 
  data-main="http://framework.jpillora.com/js/framework" > </script> 
```

将 requirejs 入口点设置为`framework.js`：

```
var framework = ... //set using script elements src attribute

require.config({

    baseUrl: 'js/',

    //Framework paths
    paths: {
      'framework': framework,
      'lib'      : framework + 'js/lib',
      'ext'      : framework + 'js/ext',
      'util'     : framework + 'js/util'
    },

    //Shortcuts
    map: {
      '*': {
        ...
      }
    },

    //Non-modularised libraries with deps
    shim: {
      ...
    }
});

require(['main']); 
```

因此，我们不是通常这样做`index.html->main.js`，而是添加了一个额外的步骤`index.html->framework.js->main.js`，它为应用程序代码提供了框架代码路径的知识。

例如，在应用程序[http://prettyprint.jpillora.com/](http://prettyprint.jpillora.com/)中，一旦加载了 require `framework.js`，它将设置 http://framework.jpillora.com/ 的路径`lib/...`并[设置](http://framework.jpillora.com/)为`baseUrl`这样`./js/`，一旦`main`需要，它将将基本 url 设置为它自己的域并`lib`指向另一个域。

这导致`require(['lib/foo', 'view/bar']);` 解决：

`http://framework.jpillora.com/js/lib/foo.js`和 `http://prettyprint.jpillora.com/js/view/bar.js`

如此处所示，该应用程序只是`main.js`其他一切都来自`framework`：

![chrome devtools 加载的应用程序](../Images/b5713b3002ff3961ada03619653e5271.png)

`main.js`所以最后，每当我通过上述方式加载应用程序时`framework.js`，我就可以访问我所有常用的库和实用程序类。请参阅应用程序源。

另请注意，借助`r.js`优化器和良好的本地文件结构，您还可以将应用程序优化为单个 js 文件，仅从`framework`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-05T10:09:20.267

## 问题

我在尝试设置测试环境时遇到了类似的问题。我有一个这样的文件结构：

```
myApp/
    src/
        js/
            app.js
            data.js
            lib/underscore.js
    test/
        karma.conf.js
        test-main.js
        matchers.js
        spec/
            data.js 
```

这就是它变得棘手的地方：我的应用程序脚本（`app.js`和`data.js`）假设 RequireJS 配置解析`data`为`src/js/data.js`，等等`lib/underscore`，`src/js/lib/underscore.js`所以我在我的测试环境中也需要该配置：

```
test/test-main.js
-----------------
require.config({
  // Karma serves files under /base, which is the basePath from your config file
  baseUrl: '/base/src/js',
  // ...
}); 
```

现在我可以编写我的测试：

```
test/spec/data.js
-----------------
define(['data', '../../test/matchers'], function(dataModule) {
    describe('The data module', function() {
        it('should satisfy my custom matcher', function() {
            expect(dataModule).toSatisfyMyCustomMatcher();
        });
    });
}); 
```

使用一些自定义匹配器：

```
test/matchers.js
----------------
define([], function() {
    beforeEach(function() {
        this.addMatchers({
            toSatisfyMyCustomMatcher: function() {
                return this.actual.isGood;
            },
        });
    });
}); 
```

但是，那`'../../test/matchers'`部分非常丑陋。测试规范不应该为知道其他模块的文件路径而烦恼——这是 RequireJS 的工作。相反，我们想使用符号名称。

## 解决方案

**RequireJS[路径配置](http://requirejs.org/docs/api.html#config-paths)也可以映射目录。**

> 用于模块名称的路径不应包含扩展名，因为路径映射可能用于目录。

因此，解决方案是一个简单的路径配置：

```
test/test-main.js
-----------------
require.config({
  baseUrl: '/base/src/js',
  paths: {
      test: '../../test',
  },
  // ...
}); 
```

现在我可以引用该`test`目录，就好像它是以下目录的子项`baseUrl`：

```
test/spec/data.js
-----------------
define(['data', 'test/matchers'], function(dataModule) {
    // ...
}); 
```

`baseUrl`就我而言，这实际上与我可以拥有多个s几乎相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T03:55:19.870

看看我们是如何在[BoilerplateJS](http://boilerplatejs.org "样板JS")中处理路由和上下文的，它是大规模产品开发的参考架构。我们使用了[crossroads.js](http://millermedeiros.github.com/crossroads.js/)库来路由模块和 UI 组件。所要做的就是将路径/哈希添加到路由集，它将通过框架进行路由。

[例如](https://github.com/ectechno/boilerplatejs/blob/master/src/modules/baseModule/module.js)，UI 组件的所有路径都添加到 URL 控制器对象中。

至于在整个应用程序中访问框架配置信息，可以将配置/设置附加到可以在应用程序内部访问的全局上下文对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-18T22:27:37.163

[requirejs 多版本](https://requirejs.org/docs/api.html#multiversion)

尝试这个

上下文：赋予加载上下文的名称。这允许 require.js 在一个页面中加载多个版本的模块，只要每个顶级 require 调用指定一个唯一的上下文字符串。要正确使用它，请参阅多版本支持部分。

# ibm-mq - MQ SYSTEM.CLUSTER.REPOSITORY.QUEUE 深度不断增加

> ID：12302442
> 
> 赞同：4
> 
> 时间：2012-09-06T14:33:23.180
> 
> 标签：ibm-mq, mq

我有一个 MQ 集群环境。在某些时候，一个部分存储库 qmgr 发生故障，而**`SYSTEM.CLUSTER.REPOSITORY.QUEUE`**另一个 qmgr 中的 queue 深度不断增加。

我有点不明白为什么会这样。我从这个链接[http://www-01.ibm.com/support/docview.wss?uid=swg21193012](http://www-01.ibm.com/support/docview.wss?uid=swg21193012)浏览了技术说明， 但我不明白。有人可以帮助更详细，更清楚地解释吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T16:59:11.640

存储库队列包含表示集群状态的消息。完整存储库跟踪集群中所有对象和 QMgrs 的状态，而集群成员 QMgrs 仅跟踪他们需要了解的对象。由于这通常是一个子集，普通集群 QMgrs 有时被称为“部分存储库”，因为这就是它们包含的内容 - 完整存储库信息的部分子集。

存储库队列上消息的实际格式没有公开记录。技术说明解释的是，信息经常被重新排列和压缩，因此您不应期望集群对象的数量与存储库队列的深度之间存在线性关系。根据时间的不同，存储库队列上的一条消息可能代表多个集群对象的状态或仅代表一个。甚至可能有代表已删除集群对象状态的存储库消息。通常，部分存储库在存储库队列上的消息少于完整存储库，但如果没有，通常不会表明存在问题。

技术说明没有解释的是存储库队列上的消息被保存在同步点下，这会扭曲 QDepth。例如，QMgr 将在启动时读取所有集群存储库消息。如果它需要进行更改，它会在同步点下为相关消息执行 GET。在这些消息处于同步点之下期间，即使消息仍然存在，队列深度也会减少。`COMMIT`只有在 a或之后，表观深度和实际深度才会匹配`ROLLBACK`。随着集群状态的变化，新消息被放入队列以反映新状态。这些会立即增加明显的 QDepth，即使在事务待处理`COMMIT`或`ROLLBACK`. 此外，写入的消息数量可能明显多于或少于任何更新队列所获得的数量。

所以 Technote 的结果和我的建议是接受 SYSTEM.CLUSTER.REPOSITORY.QUEUE 是易变的，不要太担心它的深度。相反，如果您有监控代理，请监控队列上是否始终存在打开的输入句柄或集群存储库管理器进程 ( `amqrrmfa`) 是否正在运行，或两者兼而有之。

# php - memory_limit：它是如何工作的？

> ID：12302446
> 
> 赞同：9
> 
> 时间：2012-09-06T14:33:32.617
> 
> 标签：php, memory, memory-limit

我有一个运行大约 2 小时的 php 脚本。这是一项 cron 工作。cron 作业每 4 小时运行一次。

在脚本的最后，我显示了一些内存值。

```
The memory_get_usage() result is 881568 Bytes (0.840766906738M)
The memory_get_peak_usage() result is 1340304 Bytes (1.27821350098M)
The memory_get_usage(true) result is 1572864 Bytes (1.5M)
The memory_get_peak_usage(true) result is 1835008 Bytes (1.75M) 
```

php.ini 中的 memory_limit 是 128M，但它不起作用。我将它提高到 256M，现在它可以工作了。

但是由于脚本的内存峰值不到2M....

那么 memory_limit 参数是如何工作的呢？

它是脚本使用的总内存吗？如果是这样，我该如何计算？

是脚本的内存峰值吗？如果是这样，我计算对了吗？

我正在使用 php 5.3.16。

**编辑**

我没有任何错误消息。当限制为 128M 时脚本执行，但从未完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:21:37.200

尝试使用使用您的操作系统来报告实际内存的功能，例如这个。

```
function unix_get_usage() { 
      $pid = getmypid(); 
      exec("ps -o rss -p $pid", $output); 
      return $output[1] *1024; 
 }

function windows_get_usage(){
    $output = array();
    exec('tasklist /FI "PID eq '.getmypid().'" /FO LIST', $output );
    return preg_replace( '/[^0-9]/', '', $output[5] ) * 1024;
} 
```

您的脚本可能会消耗大量内存，PHP 在从 memory_get_usage() （顺便说一下查看堆）返回时不会考虑这些内存。堆栈分配的变量将在 memory_get_usage() 被调用并返回时被清除。

您还应该尝试在执行期间的其他时间点运行此函数和其他函数，例如在大型 MySQL 调用或文件处理之后。memory_get_peak_usage() 可能不适用于所有操作系统，尤其是取决于编译选项。

# sql - 带有实体框架的可选自动增量

> ID：12302450
> 
> 赞同：0
> 
> 时间：2012-09-06T14:33:54.493
> 
> 标签：sql, entity-framework, entity-framework-4

我有一个包含 TranRefId 的 Transaction 表（用于将购买和撤消交易组合在一起）。与 SQL 数据库的接口使用的是 Entity Framework 4。我希望能够做两件事......

1.  显式指定 TranRefId 的值
2.  未指定时自动生成一个值（无论是通过查询 MAX 并递增还是通过其他方式）。

由于这是一个 Web 应用程序，我担心可能会有多个线程同时执行此操作。如果我选择 Max(TranRefId) 并增加值，则很有可能多个事务最终会得到相同的值（由于并发性）。 **实体框架中是否有任何解决方案可以帮助解决此类并发问题？**

此外，TranRefId 仅特定于帐户。请参阅下面的示例数据...

**交易表** （我很抱歉，不知道如何在此处制作表......）

TranId_ **_** *TranRefId* **_** _Account

1_ ***_* __ *_* ____** *1* ***_* __ *_* __ *_* _** *A
2* ***_* __ *_* __ *_* __** *1* ***_* __ *_* __ *_* _** *A
3* ***_* __ *_* __ *_* __** *1* ***_* __ *_* ____** *B
4* ***_* __ *_* __ *_* __** *2* ***_* _ *_* ____** *B
5* ***_* __ *_* __*_* __** *1* ***_* __ *_* __ *_*** _C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:55:39.530

如果您不必将 TranRefId 列作为 int，则可以将其设为唯一标识符。然后您可以生成一个新的 Guid 并将其值设置为 - 知道它始终是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T12:07:14.147

我猜你可以在表上添加另一个自动列，并在触发器中（耶！）检查是否设置了值，如果没有移动自动列值。

# xmpp - 从联系人列表中获取用户状态

> ID：12302453
> 
> 赞同：1
> 
> 时间：2012-09-06T14:34:11.200
> 
> 标签：xmpp

我需要从联系人列表中获取用户状态。我使用openfire服务器。在服务器上，我发送以下 xml

```
<iq type="get" from="dezhavi@domen.com" id="3"><query xmlns="jabber:iq:roster"/></iq> 
```

并从服务器获取

```
<iq type="result" id="3" to="dezhavi@domen.com/webi"><query xmlns="jabber:iq:roster"><item jid="user1@im.onmetapoint.com" name="user1" subscription="both"><group>Friends</group></item></query></iq> 
```

但没有地位。

如何获取用户状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T02:12:18.123

# opencv - 数一数站在我们 Kinect 前面的人

> ID：12302454
> 
> 赞同：3
> 
> 时间：2012-09-06T14:34:19.200
> 
> 标签：opencv, kinect

我们正在使用 Kinect 制作交互式装置，我们需要知道有多少人在我们的装置前缓慢地站立/行走。

我们最多算5个人，如果有更多我们不在乎。

为此，我们将 Kinect 检测到的总体积除以 1 人的近似体积。

```
count = Vtotal / Vperson; 
```

最后，为了平滑计数，我们计算 2 秒的平均计数。

```
countAvg = Vtotalavg / Vperson; 
```

这适用于 2-3 人，但当有更多时，斑点重叠，总体积似乎不再相关。

有人知道我们如何解决这个问题并获得可靠的计数……要么使用相同的 blob 体积方法，要么使用更智能的方法！？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T00:10:13.527

天花板安装 kinect。将其直接指向地板。获取原始深度数据并过滤任何比某个阈值更远的像素，该阈值往往仅捕获头部和肩部。（尝试所有高于 4 英尺的东西。）在这些像素中，检查每组连续像素并获得该组的总像素数。如果组像素数小于最小阈值，则忽略它。您现在可以将每组视为一个人，但进一步的改进有助于捕捉站得很近的人：将组像素数除以平均每人像素常数并四舍五入到最接近的值。

有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:07:30.987

但你为什么这样做？Kinect 为他面前被跟踪的每个骨骼提供一个 Skeleton id。简单地制作一个数组（大小为 5）并将跟踪的骨架放在那里。要计算它们，您只需获取数组中的元素数

# sql-server - 更改表所有者

> ID：12302456
> 
> 赞同：26
> 
> 时间：2012-09-06T14:34:35.287
> 
> 标签：sql-server, sql-server-2008

我正在尝试更改表的所有者：

```
sp_changeobjectowner 'OWNER.TABLENAME', 'dbo' 
```

但是在执行时我收到错误消息：

> 消息 15001，级别 16，状态 1，过程 sp_changeobjectowner，第 62 行
> 对象 'OWNER.TABLENAME' 不存在或不是此操作的有效对象。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-06T15:09:55.167

在 SQL Server 2005 及更高版本中执行此操作的正确方法是停止将前缀视为“所有者”。自 SQL Server 2005 以来，该[`sp_changeobjectowner`过程](http://msdn.microsoft.com/en-us/library/ms177519%28v=sql.105%29.aspx)已被弃用，您应该改用[schema DDL](http://msdn.microsoft.com/en-us/library/ms173423%28v=sql.105%29.aspx)，例如：

```
ALTER SCHEMA dbo TRANSFER [current_owner].tablename; 
```

要检查当前的“所有者”（如果您有`tablename`多个模式中的一个以上，这可能会返回多行）：

```
SELECT s.name
  FROM sys.schemas AS s
  INNER JOIN sys.tables AS t
  ON s.[schema_id] = t.[schema_id]
  WHERE t.name = N'tablename'; 
```

还要确保正确拼写对象。例如，在区分大小写的排序规则中，`TABLENAME`和`tablename`不是同一个对象，并且用 InCorrEcT CaSe 拼写也可能导致此错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-06T14:43:12.557

你的说法是正确的：

```
EXEC sp_changeobjectowner '<owner>.<tableName>', '<newOwner>' 
```

如果发生错误，请尝试检查谁是表的当前所有者：

```
EXEC sp_table_privileges '<tableName>' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-19T05:44:42.640

```
SELECT 'Exec sp_changeobjectowner ''<CURRENTOWNER>.' + name + ''',  ''dbo''  '  FROM sys.objects WHERE type IN ('U','P','V','FN') 
```

应用以下步骤

(1) 在 Sql Prompt 上运行以下查询 (2) 复制结果并再次粘贴到新的 Sql 查询并再次执行

这是您的表、视图、存储过程和函数的更改所有者

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-24T02:48:12.863

为了涵盖表存在于像“Common”（与用户名无关）这样的构造模式名称中的情况，那么需要更改的是模式所有者。

```
alter authorization on schema::Common TO dbo; 
```

这会将架构中的对象更改为指定的所有者“dbo”，并将表保持在“Common”内。

列出架构所有者：

```
select db_name() as Db, 
       sch.name as SchemaName, 
       u.Name as Owner
  from sys.schemas sch
  join sys.sysusers u
    on u.uid = sch.principal_id; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-21T19:32:30.620

如果删除表是一个选项，您可以删除并在所需用户下重新创建。只需在创建脚本中指定 dbo。例如：

```
USE [X]
GO

/****** Object:  Table [dbo].[TableName]    Script Date: 4/21/2014 1:26:37 PM ******/

CREATE TABLE [dbo].[TableName](
    [Field1] [bigint] NOT NULL,
    [Field2] [nvarchar](50) NOT NULL,
    [Field3] [datetime] NOT NULL
) ON [PRIMARY]

GO 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-15T09:08:11.477

运行以下查询 EXEC sp_changeobjectowner 'set here object name', 'set here new owner' go

# java - 为什么 Jenkins 不下载我的最新快照？

> ID：12302457
> 
> 赞同：6
> 
> 时间：2012-09-06T14:34:38.750
> 
> 标签：java, maven, jenkins

我有一个 Maven 3 项目的 Jenkins 构建工作。该项目具有 SNAPSHOT 依赖项。构建失败，因为 Maven 找不到部署到 Intranet Sonatype Nexus Repository 的 SNAPSHOT 工件。SNAPSHOT 存储库是“公共”组的一部分，它是`<mirrorOf>*</mirrorOf>`.
Jenkins 配置为在工作区本地创建一个本地 Maven 存储库（每个作业一个存储库）。
所有其他非快照依赖项都已解决并很好地下载。没有 SNAPSHOT 依赖项的项目的其他作业也已成功构建。到目前为止我尝试过的事情（没有成功）：

*   Nexus 中的过期缓存
*   检查本地存储库（在作业目录中） - 没有工件目录
*   在作业配置中将“构建 -> 目标和选项”设置为“-U 全新安装”
*   等一小时

我的设置：
Windows Server 2003
Java 1.6.0_31
Jenkins 1.480
Maven 3.0.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T18:36:54.490

这可能是我也发现的“陷阱”，从 Nexus 下载快照修订。

[Nexus book](http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html)中提供了解决方案，但没有完全解释：

```
<settings>
  <mirrors>
    <mirror>
      <id>nexus</id>
      <url>http://myserver/nexus/content/groups/public</url>
      <mirrorOf>central</mirrorOf>
    </mirror>
  </mirrors>
  <profiles>
    <profile>
      <id>nexus</id>
      <!--Enable snapshots for the built in central repo to direct -->
      <!--all requests to nexus via the mirror -->
      <repositories>
        <repository>
          <id>central</id>
          <url>http://central</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </repository>
      </repositories>
    </profile>
  </profiles>
  <activeProfiles>
    <!--make the profile active all the time -->
    <activeProfile>nexus</activeProfile>
  </activeProfiles>
</settings> 
```

似乎必须明确告诉 Maven Nexus 提供的存储库组也可以包含快照修订。据推测，这会触发 Maven 开始寻找特殊的元数据文件，这些元数据文件用于发现哪个时间戳文件实际上是最新的快照。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-20T08:34:33.877

既然您已经定义了`mirrorOf/*`，只需在您的中添加它`.m2/settings.xml`以指示 maven 也搜索该镜像以获取快照：

```
<profile><id>alwaysactive</id>
    <activation><activeByDefault>true</activeByDefault></activation>
    <repositories>
        <repository><id>unused</id><url>unused</url></repository>
    </repositories>
</profile> 
```

# linq - 使用子字符串执行 linq 搜索 - 有没有更好的方法？

> ID：12302462
> 
> 赞同：0
> 
> 时间：2012-09-06T14:35:10.230
> 
> 标签：linq, entity-framework

我正在使用实体框架并开始使用 linq 编写查询。

我有一个商店表，其中每个商店都有一个名称字段。我想做的搜索之一是首字母，我正在努力寻找实现它的最佳方法。最好我的意思是最有效的。

大多数搜索只查找一个键，“A”、“B”、“C”等，但其中一个搜索的不同之处在于组“0-9”将包含一个键列表，一个用于 0，一个用于 1等等。所以我的出发点是某种列表。

然后我需要说明一个 Store 名称是否以列表中的任何键开头，因为 Store 不会将首字母存储在表中。

有两件事我正在寻求帮助。首先，如何让 linq 像我所概述的那样工作。其次，关于这是否是恢复数据的最佳/唯一方法或是否有更好的方法的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T15:03:47.813

您的问题不是很清楚，但据我了解，您想搜索以在密钥列表中找到的密钥开头的商店。你可以这样实现：

```
List<string> keys = new List<string>() { "A", "B", "M" };
var result = stores.Where(store => keys.Any(key => store.Name.StartsWith(key)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:18:49.840

如果查询可能不同，那么对于字母：

```
stores.Where(s=>s.Name.First == c); 
```

对于数字：

```
stores.Where(char.IsDigit); 
```

如果它们必须相同，那么我建议一个字符范围：

```
stores.Where(s=> c1 <= s.Name.First && s.Name.First <= c2) 
```

如果需要，您可以用元组表示范围：

```
Tuple<char, char> range = Tuple.Create('A', 'A');
//Tuple<char, char> range = Tuple.Create('0', '9');
stores.Where(s=> range.Item1 <= s.Name.First && s.Name.First <= range.Item2) 
```

编辑：使用实体框架中的功能

```
Tuple<char, char> range = Tuple.Create('A', 'A');
//Tuple<char, char> range = Tuple.Create('0', '9');
stores.Where(s=> range.Item1 <= s.Name.Substring(0, 1) && s.Name.Substring(0, 1) <= range.Item2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T19:14:36.273

我在另一个线程上问了一个更具体的问题。

这是答案：

[Linq to entity - 2个键之间的字符串的第一个字母](https://stackoverflow.com/questions/12306034/linq-to-entities-first-letter-of-string-between-2-keys)

# c++ - 模板内模板的 typedef

> ID：12302465
> 
> 赞同：0
> 
> 时间：2012-09-06T14:35:19.043
> 
> 标签：c++, class, templates, typedef, smart-pointers

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

我有一个类，它在创建对象并将所需的类作为模板参数传递时创建一个智能指针。我有另一个类需要在另一个类中使用该智能指针。

```
#include <iostream>
using namespace std; 
```

//智能指针类

```
template<typename T>
class IntrusivePtr
{
public:
    IntrusivePtr()
    {
        cout << "IntrusivePtr()";
    }
}; 
```

//我需要一个智能指针的类，它也是模板

```
template<typename T>
class A
{
public:
    A()
    {
        cout << "A()";
    }
    typedef IntrusivePtr< A<T> > my_ptr;
}; 
```

//使用智能指针的类。

```
template<typename T>
class B
{
public:
    B()
    {
        cout << "B()";
    }

    typedef A<T>::my_ptr x;
};

int main()
{
    B<int> ob;

    return 0;
} 
```

这可以在 C++ 中实现吗？我知道新的 C++11 支持`typedef`s 这样的事情，但我使用的是旧标准 :( 编译这个我遇到了一些糟糕的错误：

> C:\Users\jacob\typedef_template_class-build-desktop-Qt_4_8_1_for_Desktop_-_MSVC2008__Qt_SDK__Debug..\typedef_template_class\main.cpp:41：错误：C2146：语法错误：缺少';' 在标识符“x”之前
> 
> C:\Users\jacob\typedef_template_class-build-desktop-Qt_4_8_1_for_Desktop_-_MSVC2008__Qt_SDK__Debug..\typedef_template_class\main.cpp:41：错误：C2146：语法错误：缺少';' 在标识符“x”之前
> 
> C:\Users\jacob\typedef_template_class-build-desktop-Qt_4_8_1_for_Desktop_-_MSVC2008__Qt_SDK__Debug..\typedef_template_class\main.cpp:41：错误：C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

编辑：对不起，我改变了一些东西和错误代码。这就是我想要的样子。对不起

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:37:30.203

```
template<typename T>
class B
{
public:
    B()
    {
        cout << "B()";
    }

    typedef typename A< B >::my_ptr x;
}; 
```

你应该使用`typename`，因为`my_prt`是`dependent name`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T14:43:38.317

您的问题是这`A<B>::my_ptr`是一个依赖名称（它取决于`B<T>`并因此取决于模板参数`T`）。由于这个原因，编译器在解析模板时不知道它应该是类型还是变量。在那种情况下，它假定那`my_ptr`不是一种类型，除非你明确地告诉它。因此，您需要添加`typename`，就像编译器告诉您的那样：

```
typedef typename A< B >::my_ptr x; 
```

有关更完整的解释[，请查看类似问题的答案](https://stackoverflow.com/a/613132/201270)。

# php - 多用户同时更新同一条记录

> ID：12302467
> 
> 赞同：0
> 
> 时间：2012-09-06T14:35:24.773
> 
> 标签：php, mysql

使用 PHP 和 MySQL 我想使用 PARENT 和多子关系跟踪注册。如果超过 1 个用户尝试使用相同的父代码注册，则会出现问题。父母只会记入 1 个用户而不是 2 个。据我了解，解决方案是锁定记录。或者使用服务器时间和记录时间戳来确定上次更新。

```
#THIS IS NOT PRODUCTION CODE, BUT JUST INTENDED TO DEFINE MY PROCESS
#PLEASE ADVISE AND MAKE ADJUSTMENTS AS YOU SEE FIT

$sqlget = SELCT * record of PARENT and WHERE id is of PARENT
$ts -> timestamp;
$st -> servertime;
$af -> aff_number; 
```

现在我想检查父级时间戳的最新记录更新，如果该更新发生的时间少于 10 秒 - 我想重新运行我的 $sqlget

我如何将 $ts 转换为 INT 并将 $st 转换为 INT 以便我可以运行 IF 语句来循环 $sqlget 如果我的条件失败。

```
if($ts <= $st by 10 seconds) { wait 10 seconds and rerun sqlget } 
else { get current $af (INT) and +1; UPDATE record; close connection; 
META-refresh to next page; } 
```

那么这个过程看起来有用吗？即使有超过 1 个孩子同时签名，这是否能确保每个孩子注册时始终正确记入家长？我不期望多并发注册，但它们可能偶尔发生，我必须确保正确记入 PARENT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:41:54.060

我不明白你的 SQL 结构。

如果您将“信用”与具有相同父 ID 的新孩子的出现相关联，那么任何数量的用户都可以同时关联。

赶紧跑：

```
INSERT INTO affiliations ( id_p, ... ) VALUES ( id_of_parent, whatever_data ); 
```

你就完成了。父母和孩子是否在不同的桌子上无关紧要。重要的是*不能从父级引用到子级*，即您唯一的引用是子行中父级的 id。这样您就不会在父级上出现并发问题。

当您需要知道给定父母有多少孩子时，只需计算他们：

从隶属关系中选择 COUNT(*)，其中 id_p = id_of_parent；

我怀疑您现在正在父行中存储一个计数器。如果是这样，请不要：它看起来更简单，但并发问题使其不值得努力。

# java - 使用 Unsafe 从对象中提取数据（绕过安全管理器0

> ID：12302469
> 
> 赞同：3
> 
> 时间：2012-09-06T14:35:28.923
> 
> 标签：java, memory-management, native, unsafe, bytebuffer

我完全意识到我正在做的是：
1）不安全，我没有更多的保证，类型安全，`JVM`因此可能会崩溃
2）我可以使用 ByteBuffers 进行类似的操作或`JNI`
3）Unsafe 是一个内部类，并且很可能会消失。

我这样做只是为了实验目的，并且知道后果。

考虑到这一点，我尝试使用 Unsafe 和反射从数组中提取数据：

我首先找到数组的字段偏移量：

```
public long findFieldOffset(Event event) {
    try {
        Class cl = event.getClass();            
        Field data_field = cl.getDeclaredField("data");            
        data_field.setAccessible(true);
        long offset = unsafe.objectFieldOffset(data_field);            
        return offset;            
    } catch (NoSuchFieldException e) {
        e.printStackTrace();
    }
    return 0;        
} 
```

我还提取了数组的基本位置：

```
 int base = unsafe.arrayBaseOffset(byte[].class); 
```

我随后尝试从 Event 类中提取数组，并将其复制到缓冲区（`byte_offset`是 的结果`findFieldOffset`）。
在下面的代码中，第一部分只是一个测试函数并打印出正确的字符串，而第二部分提取应该是数组的内容，但是在测试时返回垃圾 unicode 值：

```
 /* Testing  */
                    active_buffer.getBuffer().position(1); 
                    active_buffer.getBuffer().put(event.getData()); 
                    active_buffer.getBuffer().position(1); 
                    active_buffer.getBuffer().get(tuple, 0, (int)tuple_size);
                    System.out.println("Test1: " + new String(tuple)) ;
                   /* Test1 prints out the correct string */

                    unsafe.copyMemory( (Object) event,  byte_offset  +  base, (Object) null, active_buffer.getAddress() + 1, tuple_size);
                    active_buffer.getBuffer().position(1); 
                    active_buffer.getBuffer().get(tuple, 0, (int)tuple_size);
                    System.out.println("Test2: " + new String(tuple)); 
                    /* Garbage unicode values gets printed*/ 
```

任何人都可以看到这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:46:58.260

作为`data`一个字段，它要么是原始的，要么是引用，在任何一种情况下，您都不能将它复制到某个地方并将其视为`byte[]`

If `data`is a byte[] 您需要将其视为真正的对象，而不是事件。

# c# - 配置 COM+ 服务器

> ID：12302472
> 
> 赞同：0
> 
> 时间：2012-09-06T14:35:36.007
> 
> 标签：c#, .net, com+, .net-remoting

COM+ 服务器已经在运行。我可以在服务中看到这一点。

现在，我想安装/配置这个组件的新版本。所以，我停止服务。将新的 com+ dll 和 exe 文件复制到该位置。启动服务，我收到以下错误。

```
Remoting configuration failed with the exception 'System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Net.Sockets.SocketException: Only one usage of each socket address (protocol/network address/port) is normally permitted
   at System.Runtime.Remoting.Channels.Http.HttpServerChannel.StartListening(Object data)
   at System.Runtime.Remoting.Channels.Http.HttpServerChannel.SetupChannel()
   at System.Runtime.Remoting.Channels.Http.HttpServerChannel..ctor(IDictionary properties, IServerChannelSinkProvider sinkProvider)
   at System.Runtime.Remoting.Channels.Http.HttpChannel..ctor(IDictionary properties, IClientChannelSinkProvider clientSinkProvider, IServerChannelSinkProvider serverSinkProvider)
   --- End of inner exception stack trace ---
   at System.RuntimeMethodHandle._InvokeConstructor(Object[] args, SignatureStruct& signature, IntPtr declaringType)
   at System.RuntimeMethodHandle.InvokeConstructor(Object[] args, SignatureStruct signature, RuntimeTypeHandle declaringType)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.RuntimeType.CreateInstanceImpl(BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes)
   at System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes)
   at System.Runtime.Remoting.RemotingConfigHandler.CreateChannelFromConfigEntry(ChannelEntry entry)
   at System.Runtime.Remoting.RemotingConfigHandler.ConfigureChannels(RemotingXmlConfigFileData configData, Boolean ensureSecurity)
   at System.Runtime.Remoting.RemotingConfigHandler.ConfigureRemoting(RemotingXmlConfigFileData configData, Boolean ensureSecurity)'. 
```

当我从设置为服务并使用 COM+ 服务器的控制台应用程序在 Visual Studio 中运行它时，我得到了同样的错误。

需要注意的另一点是控制台应用程序在 RemoteConfiguration.Configure 语句上失败。作为测试，我制作了一个单独的控制台应用程序，使用 'new' 关键字直接调用 COM 组件，效果很好。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:53:28.387

我认为您需要使用控制面板中组件服务中的选项将组件导入 COM 服务。如果您只是将新对象复制到旧对象上，则不会注册新组件。

# c++ - 如何检查发送器是否发送了 UDP 数据包

> ID：12302476
> 
> 赞同：0
> 
> 时间：2012-09-06T14:35:46.117
> 
> 标签：c++, qt, network-programming, udp

我正在尝试使用 UDP 发送数据包。我知道如果通道不空闲，则不会发送数据包。我正在使用 QT`udpSocket->writeDatagram`发送 UDP 数据包。我正在循环中执行此操作，我想确保在发送前一个数据包之前不发送另一个数据包。是否有标志或任何其他方式可以检查并确保数据包已发送？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T14:44:38.873

UDP 在设计上是一种不可靠的协议。它不能保证数据包不会丢失，并且当它们丢失时，发送者不会被告知这一点。所以你永远无法知道对方是否成功接收了UDP数据包。

当然，除非您的应用程序级协议发送某个响应。但是响应也很容易丢失，因此没有响应并不能明确证明没有收到数据包。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T14:39:01.063

[文档](http://doc.qt.nokia.com/4.7-snapshot/qudpsocket.html#writeDatagram)说：

> *将数据*大小为 size*的*数据报发送到端口*port*的主机地址*地址*。返回成功发送的字节数；否则返回 -1。

 *因此，如果它返回的内容不是`-1`您可以认为它“已发送”。但是，如果您真正想知道的是它是否到达了另一边，您会想听听同行的意见。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T15:01:39.563

通常，为了尽可能快地发送 UDP 数据包（但不会更快），您需要将套接字置于非阻塞模式，然后循环发送数据包，直到 send()/sendto() 返回 -1/EAGAIN （又名 EWOULDBLOCK）。当返回结果代码时，跳出你的发送循环并等待套接字再次变为可写。在 Qt 下，你可以设置一个 QSocketNotifier 对象（一次，在你设置你的套接字之后），只要你的套接字有空间容纳更多的传出数据，它就会发出一个激活的（int）信号。当您收到该信号时，您可以发送更多数据包。*

# database - RESTful：何时嵌套 JSON？

> ID：12302477
> 
> 赞同：0
> 
> 时间：2012-09-06T14:35:50.797
> 
> 标签：database, json, api, rest

假设我正在构建一个 API，其调用返回一组城市，每个城市都与一个州有关系。一个州有很多城市，但一个城市只有一个州。

我可以想象像这样扁平化关系并模糊数据的底层结构，

```
{ cities : [
    { id: 1,
      name: "Los Angeles",
      state: "CA" }
]} 
```

或者我可以想象构建 JSON 以使城市和州之间的关系显而易见，

```
{ cities : [
    { id: 1,
      name: "Los Angeles",
      state: { id: 1,
               name: "CA" }
]} 
```

到目前为止，API 的使用者只需要知道状态的名称。他不需要知道其 ID 或获取有关该州的更多信息的方法。以任何一种方式构建 JSON 的优缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:22:16.500

在我看来，你不应该向你的 api 添加无用的信息，但正如@kgb 所说，如果你的 api 容易被扩展，你应该这样设计它。你问到城市和州之间的关系，在我看来，这种关系已经在两者中得到了定义。

所以如果你 100% 确定你的 api 不会扩展状态功能，你应该选择选项 1。如果只有很小的机会，我建议你这样做：

```
{ cities : [{ 
      id: 1,
      name: "Los Angeles",
      state: { name: "CA" }
  }]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:54:22.310

这取决于其他消费者。你有什么？你打算吗？

API 是一种机器接口，消费者的开发人员同样容易使用这两种结构。如果“状态”实体不是复合实体（除了名称没有可用的属性），我最好只显示名称，而不是带有 id 的结构。

如果状态 id 将来可能有用，或者有可能将新属性添加到状态实体​​，那么您应该从一开始就使用第二种方法。以任何方式更改 API 都会破坏已经编写的软件，因此更改它将使您支持两个不同的版本。方法 1 和 2 之间的更改不向后兼容。

我会选择方法 2。它并不比方法 1 复杂多少，并且有可能扩展状态实体。

还有第三种方法。但它明显更复杂（并且更可扩展）。仅返回状态 id 并创建用于状态实体检索的方法。

# javascript - 在静态 HTML 文件中压缩 JS 和 CSS

> ID：12302478
> 
> 赞同：9
> 
> 时间：2012-09-06T14:35:51.273
> 
> 标签：javascript, html, css, minify, python-sphinx

[Python 文档生成器Sphinx](http://sphinx.pocoo.org/)的输出会生成大量 HTML 文件。每个都有一个包含大量 JavaScript 和 CSS 的标题，包括：

```
<link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
<link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
<script type="text/javascript" src="../_static/jquery.js"></script>
<script type="text/javascript" src="../_static/underscore.js"></script>
<script type="text/javascript" src="../_static/doctools.js"></script>
<script type="text/javascript" src="../_static/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<link rel="stylesheet" type="text/css" href="../_static/custom.css" />
<link rel="stylesheet" type="text/css" href="../_static/colorbox/colorbox.css" />
<script type="text/javascript" src="../_static/colorbox/jquery.colorbox-min.js"></script> 
```

其中大部分都是单独缩小的，但这仍然不是最理想的，因为当客户端的缓存为空时，它需要对 Web 服务器进行单独的请求。有没有像 YUI Compressor 或 Closure Compiler 这样的工具，可以将 HTML 文件作为输入，压缩所有单独的外部链接脚本，然后重写输出？这类似于[django_compressor](https://github.com/jezdez/django_compressor)所做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:13:46.900

同意楼上的回答。

你可以做另一件事。

将所有脚本放在正文而不是标题之后。可能会提高您的加载速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:26:51.557

你可以试试[跳板](https://github.com/soulwire/Springboard/blob/master/springboard)。我认为它将非常适合您的需求。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T17:44:04.013

您需要两个组件 - 一个组合和缩小您的资源，另一个重写静态 HTML 文件以使用缩小的资源。

对于第一个组件，我相信你可以使用[这个 minify 引擎](http://code.google.com/p/minify/)；它旨在动态提供页面，但您可以弄清楚如何直接挂钩代码或将输出保存到静态文件（URL 允许您指定多个文件）。

对于第二个元素，将页面解析为 XML（假设它是有效的 XHTML）并找到任何`<link>`或`<script>`标记，存储没有这些元素的文档副本，编译缩小的资源并在`<head>`节点关闭后添加它们应该不难，读取文件的其余部分，并存储构建的 XHTML 文档。如果这太多了，您也许还可以使用正则表达式来查找和替换`<link>`和`<script>`标记；通常正则表达式无法完美解析 XML，但这些标签应该没问题，因为它们不会嵌套。

如果您想整理我所描述的内容但需要更多帮助开始，请询问。

# firefox - 强制为表单输入显示上下文菜单

> ID：12302480
> 
> 赞同：0
> 
> 时间：2012-09-06T14:36:00.717
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在尝试开发一个 ff 插件，它允许用户右键单击表单元素并执行与之关联的任务。

不幸的是，有人认为上下文菜单不应该出现在 ff 中的表单输入中，尽管进行了长时间的讨论[https://bugzilla.mozilla.org/show_bug.cgi?id=433168](https://bugzilla.mozilla.org/show_bug.cgi?id=433168)，但它们仍然没有出现在复选框、收音机或选择中.

我确实找到了这个：[https](https://developer.mozilla.org/en-US/docs/Offering_a_context_menu_for_form_controls) ://developer.mozilla.org/en-US/docs/Offering_a_context_menu_for_form_controls但我想不出如何翻译代码以使用新的附加 SDK。我尝试将显示的 javascript 转储到内容脚本中，也尝试通过观察者服务转储，但无济于事。

我也找不到推荐的扩展[https://addons.mozilla.org/en-US/firefox/addon/form-control-context-menu/](https://addons.mozilla.org/en-US/firefox/addon/form-control-context-menu/)的来源，考虑到它是“专门为演示如何做到这一点而创建的”很令人沮丧。

这似乎是非常基本的插件功能，任何帮助或指向更简单文档的链接将不胜感激。

**** 更新 ****

我在 main 所需的文件中添加了以下代码，这似乎可以解决问题。

```
var {WindowTracker} = require("window-utils");

var tracker = WindowTracker({
  onTrack: function(window){
    if (window.location.href == "chrome://browser/content/browser.xul") {    
      // This is a browser window, replace
      // window.nsContextMenu.prototype.setTarget function
      window.setTargetOriginal = window.nsContextMenu.prototype.setTarget;

      window.nsContextMenu.prototype.setTarget = function(aNode, aRangeParent, aRangeOffset) {
        window.setTargetOriginal.apply(this, arguments);
        this.shouldDisplay = true;
      };
    };
  }
, onUntrack: function(window) {
    if (window.location.href == "chrome://browser/content/browser.xul") {
      // In case we were called because the extension is uninstalled - restore
      // original window.nsContextMenu.prototype.setTarget function
      window.nsContextMenu.prototype.setTarget = window.setTargetOriginal;
    };
  }
}); 
```

不幸的是，这仍然没有显示禁用输入的上下文菜单，但这对我来说不是一个显示停止器。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:44:33.300

可以在[此处查看](https://addons.mozilla.org/en-US/firefox/files/browse/47295/file/chrome/formcontrolcontextmenu.jar/content/overlay.js)此扩展中的重要代码。它非常简单——它替换`nsContextMenu.prototype.setTarget`了每个浏览器窗口中的功能，并确保它`shouldDisplay`为表单控件设置了标志。

将其转换为附加 SDK 的唯一问题是高级模块无法让您直接访问浏览器窗口。您必须使用已弃用的`window-utils`模块。像这样的东西应该工作：

```
var {WindowTracker} = require("sdk/deprecated/window-utils");
var tracker = WindowTracker({
  onTrack: function(window)
  {
    if (window.location.href == "chrome://browser/content/browser.xul")
    {
      // This is a browser window, replace
      // window.nsContextMenu.prototype.setTarget function
    }
  },

  onUntrack: function(window)
  {
    if (window.location.href == "chrome://browser/content/browser.xul")
    {
      // In case we were called because the extension is uninstalled - restore
      // original window.nsContextMenu.prototype.setTarget function
    }
  }
}); 
```

请注意，`WindowTracker`它应该[在未来的一些 SDK 版本中被替换](https://bugzilla.mozilla.org/show_bug.cgi?id=833011)。另外，供参考：[`nsContextMenu`实施](http://hg.mozilla.org/mozilla-central/file/36427d4b2cf6/browser/base/content/nsContextMenu.js)

# python - 运算符 + 将元组添加到存储在多维元组数组中的另一个元组

> ID：12302481
> 
> 赞同：1
> 
> 时间：2012-09-06T14:36:04.023
> 
> 标签：python, arrays, numpy, scipy, tuples

由于 SO 用户的巨大贡献，我最近发现了如何使用元组（参见[此处](https://stackoverflow.com/questions/12265751/tuple-as-index-of-multidimensional-array)）。但是我遇到的问题是我无法将元组添加到存储在元组数组中的另一个元组中。例如，如果我定义：

```
arrtup=empty((2,2),dtype=('int,int'))
arrtup[0,1]=(3,4) 
```

然后，如果我尝试将另一个元组添加到现有元组以提出多维索引：

```
arrtup[0,1]+(4,4) 
```

我收到此错误：

```
TypeError: unsupported operand type(s) for +: 'numpy.void' and 'tuple' 
```

而不是预期的`(3,4,4,4)`元组，我可以通过以下方式获得：

```
(3,4)+(4,4) 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:41:18.513

恐怕你在混合不同的概念。

您的`arrtup`数组**不是**元组数组，它​​是结构化的`ndarray`，即看起来像元组但实际上是记录（`numpy.void`确切地说是对象）的元素数组。在您的情况下，您将这些记录定义为包含 2 个整数。在内部，NumPy 将您的数组创建为 2x2 块数组，每个块占用由您定义的给定空间`dtype`：这里，一个块由 2 个连续大小的块组成`int`（也就是说，每个子块占用`int`您机器上的空间）。

当您使用 检索元素时`arrtup[0,1]`，您将获得相应的块。因为这个块被结构化为两个子块，NumPy 返回一个`numpy.void`（表示结构化块的通用对象），它与`dtype`您的数组相同。

因为您在创建数组时设置了这些块的大小，所以您无法再修改它。这意味着您无法根据需要将 2-int 记录转换为 4-int 记录。

但是，您可以将结构化数组转换为*对象*数组：

```
new_arr = arrtup.astype(object) 
```

瞧，您的元素不再是`np.void`元组，您可以根据需要进行修改：

```
new_arr[0,1] = (3,4) # That's a tuple
new_arr[0,1] += (4,4) # Adding another tuple to the element 
```

Your`new_arr`与 your 是不同的野兽`arrtup`：它具有相同的大小，没错，但它不再是结构化数组，而是对象数组，如图所示

```
>>> new_arr.dtype
dtype("object") 
```

实际上，`arrtup`和之间的内存布局有很大不同`newarr`。`newarr`没有与 相同的约束`arrtup`，因为单个元素可以有不同的大小，但是对象数组不如结构化数组有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:39:32.233

追溯在这里非常清楚。 `arrtup[0,1]`不是元组。它的类型为“numpy.void”。

但是，您可以很容易地将其转换为元组：

```
tuple(arrtup[0,1]) 
```

可以与其他元组连接：

```
tuple(arrtup[0,1]) + (4,4) 
```

# ruby-on-rails-3 - Bluepill 在我的系统上创建哪些文件？

> ID：12302482
> 
> 赞同：0
> 
> 时间：2012-09-06T14:36:06.200
> 
> 标签：ruby-on-rails-3, bluepill

我正在使用 Rails 3.0.3 和 Bluepill 0.0.51。我正在尝试解决在某些情况下 Bluepill 尝试启动我的 ruby​​ 服务器的多个实例的情况，但是由于我必须查看的唯一文件是我的 ruby​​ 服务器 .rb 文件和我的 .pill ，因此无法知道从哪里开始我的rails应用程序根文件夹中的文件。Bluepill 在我的系统上创建的配置/其他文件是什么？提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:04:37.103

当您运行成功的药丸接收器时，它可以根据您的配置创建不同的文件。如果你妖魔化进程，它将为每个进程创建一个 .pid，其中存储一个代表该进程的进程 ID 的值，以便它可以关闭它。它还将创建一个日志文件，有时还会创建 sock 中的文件。它默认使用 /var/run/bluepill 但如果你在 --no-privileged 模式下运行它，它会希望你指定位置，最好是在你的应用程序文件夹中。

它不会创建任何要配置的内容，而是您在药丸文件中配置所有内容。让一切正常工作可能很棘手，但你必须继续努力。我意识到这篇文章很旧，所以我希望你能解决它:)

# android - Zipalign 修改

> ID：12302484
> 
> 赞同：1
> 
> 时间：2012-09-06T14:36:15.520
> 
> 标签：android, signing

在生成 Android 版本时，android 文档指出您应该仅在[签名](http://developer.android.com/tools/help/zipalign.html)后才进行 zipalign 。

但是，签名的全部目的不就是确保您的存档未被修改吗？

我不明白你怎么能签署一些东西，然后修改它，它仍然可以处于签名状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:56:45.917

zipalign 不同于修改。它对齐 zip 标头字节，因此当您的应用程序在设备上运行时，与未对齐的 zip 相比，它启动（在内存中解压缩）更快并且占用更少的内存。它不会修改存档中的文件，因此在它之后签名将是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-18T17:38:32.483

实际上，文档[https://developer.android.com/studio/command-line/zipalign](https://developer.android.com/studio/command-line/zipalign)说您需要在签名之前使用 zipalign 进行对齐，这是有道理的。我猜你误读了文档。

# drupal-6 - 让帖子仅对 Drupal 6 中的管理员可见？

> ID：12302488
> 
> 赞同：0
> 
> 时间：2012-09-06T14:36:21.653
> 
> 标签：drupal-6, drupal-permissions

我有一个管理员帐户`Drupal 6`，我有很多帖子。然后我创建了一个新的经过身份验证的用户。当我使用新帐户登录时，即使我登录的帐户不是管理员帐户，我也可以看到管理员发布的所有帖子。我想指定新帐户只能看到哪些帖子。是关于我的帖子是如何使用管理员帐户发布的，还是我的新帐户是如何创建的。有没有办法管理管理员帖子，只有管理员帐户才能看到它？在这里指导我.. 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:32:39.700

您可能正在寻找[内容访问](http://drupal.org/project/content_access)模块：

> 此模块允许您按角色和作者管理内容类型的权限。它允许您为每种内容类型指定自定义查看、编辑和删除权限。或者，您可以启用每个内容访问设置，以便您可以自定义每个内容节点的访问。

# wso2 - wso2 esb 类中介

> ID：12302490
> 
> 赞同：1
> 
> 时间：2012-09-06T14:36:22.527
> 
> 标签：wso2, wso2esb, esb, mediator

您好，我通过 Carbon Studio 创建了以下类调解器：

```
 package my.mediation;

    import org.apache.synapse.MessageContext; 
    import org.apache.synapse.mediators.AbstractMediator;

    public class Auth extends AbstractMediator { 

        public boolean mediate(MessageContext context) { 
            // TODO Implement your mediation logic here 

            context.setProperty("message","hello world!" );

            return true;
        }

} 
```

顺序如下：

```
<inSequence xmlns="http://ws.apache.org/ns/synapse">
   <property name="message" value="nothing" scope="default" />
   <class name="my.mediation.Auth" />
   <log>
      <property name="Message******" expression="get-property('message')" />
   </log>
</inSequence 
```

> 问题是它总是打印文本“nothing”而不是打印 Message: "HelloWorld"...有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T00:15:29.343

您的方案是完全有效的，您的配置似乎也很好。

我已经绑定了你的场景，它对我来说很好。

以下是我的配置。

班级调解员：

```
package org.wso2.mediator;

import org.apache.synapse.MessageContext; 
import org.apache.synapse.mediators.AbstractMediator;

public class SampleMediator extends AbstractMediator { 

    public boolean mediate(MessageContext context) { 
        context.setProperty("Message", "HelloWorld!");
        return true;
    }
} 
```

我的代理服务：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="SimpleProxy"
    statistics="disable" trace="disable" transports="http,https">
    <target>
        <inSequence>
            <log category="INFO" level="simple" separator=","/>
            <property action="set" name="Message" scope="default"
                type="STRING" value="DefaultMessage"/>
            <class name="org.wso2.mediator.SampleMediator"/>
            <log category="INFO" level="simple" separator=",">
                <property expression="get-property('Message')" name="===========Message Value=========="/>
            </log>
            <drop/>
        </inSequence>
    </target>
</proxy> 
```

当我在没有类中介的情况下调用代理服务时，它会打印

```
INFO - LogMediator To: /services/SimpleProxy.SimpleProxyHttpSoap12Endpoint,WSAction: urn:mediate,SOAPAction: urn:mediate,MessageID: urn:uuid:81150094-cbc4-44f7-83eb-251e28149564,Direction: request,===========Message Value========== = DefaultMessage 
```

当我使用它打印的类中介调用代理服务时，

```
INFO - LogMediator To: /services/SimpleProxy.SimpleProxyHttpSoap12Endpoint,WSAction: urn:mediate,SOAPAction: urn:mediate,MessageID: urn:uuid:e3a04341-907c-40fe-9f58-5a10d2ce346a,Direction: request,===========Message Value========== = HelloWorld! 
```

希望这可以帮助！

哈沙娜

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:17:33.127

问题基于**log4j.properties**。您的课程在 my.mediation 包中；这在 log4j.properties 中不存在。您需要转到**YOUR_WSO2/lib/log4j.properties**并为您的命名空间/包添加日志级别：

```
...
log4j.logger.org.wso2=INFO
log4j.logger.my.mediation=DEBUG 
```

在这里，您还看到了为什么来自 Harashana 的示例有效 - 他只是将包更改为 org.wso2 - 您不应该为自己的自定义调解器这样做。

# iscroll4 - 拉动刷新水平 iScroll

> ID：12302492
> 
> 赞同：0
> 
> 时间：2012-09-06T14:36:26.897
> 
> 标签：iscroll4

最近我成功地将垂直[iScroll](http://www.google.com.ph/url?sa=t&rct=j&q=iscroll4&source=web&cd=1&ved=0CCEQFjAA&url=http://cubiq.org/iscroll-4&ei=fbNIUJ_dHO-KmQWV74DICw&usg=AFQjCNFKjfacOGWvwnoiXyAXZlxT2aZd7w)集成到我的移动网络中。它具有拉动刷新功能。但是，我目前堆叠在我需要将相同功能实现到**水平 iScroll**的部分。有谁知道我在哪里可以看到使用相同功能的任何示例？我真的需要帮助。我所需要的只是知道如何去做，因为到目前为止，我对此一无所知。

问候，Askhole :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:31:18.407

iScroll 默认不支持从水平角度拉动刷新。我确信它可以通过一些 CSS 和代码调整来完成，但你最好在 iScroll 论坛中提问：[https ://groups.google.com/forum/#!forum/iscroll](https://groups.google.com/forum/#!forum/iscroll)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-04-30T07:01:53.643

我猜你是通过使用非官方的 iscroll.js（即修改后的刷新 iscroll）来实现垂直刷新的。如果这是您的情况，此答案可能会有所帮助：

我用官方的iscroll.js 实现了垂直刷新，添加了一个小技巧： 1\. 在next-bottom 保持非常小，使用它的position().top 来检测你页面的实际高度

2.  让你在底部“加载”，将其设置为不可见

3.  Math.abs(myScroll.y) + wrapper.height === $(yourTiny).position().top

4.  滚动开始时，如果向上滚动，请检查 3 中的条件。

5.  对于 4 中的容差，您可以使用，例如： if(Math.abs(myScroll.y - wrapper.height + $(yourTiny).position().top) < 11){ //您要刷新的代码}

以下是示例代码：

1.html

```
 <sapn id="theTinyThing">&nbsp;</span>
      <table id="bottomRefreshImg" style="display:none">
        <tr><td><img src="refreshGreen.gif" /></td></tr>
        <tr><td>loading...</td></tr>
      </table>
    </div> //close scroller
  </div>  //close wrapper
  <div id="footer"></div>
  <script src="./jquery-2.2.3.min.js"></script>
  <script src="./iscroll.js"></script>
  <script src="./mrPage.js"></script>
</body> 
```

2.css

```
#theTinyThing{
  height:1px; //it's ivisible
  font-size:1px;
} 
```

3.js

```
var myScroll;
var myScroolHasCausedAddNew=0;

function loaded () {
    myScroll = new IScroll('#wrapper', {
                   scrollbars: true,
                   scrollbars: 'custom',
                   mouseWheel: true,
                   click:true,
                   interactiveScrollbars: true,
                   shrinkScrollbars: 'scale',
                   fadeScrollbars: true,
                   snap:true,
                   snap:'table',
    });
    myScroll.on('scrollStart',function(){
        if($("#theTinyThing").position().top + myScroll.y-myScroll.wrapperHeight<11){
            if(myScroll.directionY==1){
                $("#bottomRefreshImg").show();
                myScroolHasCausedAddNew=1;
            }
        }       
        return false;
    });
    myScroll.on('scrollEnd',function(){
        if(myScroolHasCausedAddNew==1){
            myScroolHasCausedAddNew=0;
            $("#bottomRefreshImg").hide();
            loadMore();
        }
        return false;
    });
} 
```

# powershell - Powershell - 无法验证参数“名称”的参数。参数中的字符数 (0) 太小

> ID：12302503
> 
> 赞同：3
> 
> 时间：2012-09-06T14:37:27.580
> 
> 标签：powershell

这是我使用 powershell 脚本的第一天我正在尝试使用 VMM Cmdlet Get-SCVirtualMachine 它在我使用它时工作正常

```
PS C:\> $VM = Get-SCVirtualMachine -Name "VM01" 
```

但是当我尝试时它给了我一个错误

```
PS C:\> $vmName = 'VM01'
PS C:\> $VM = Get-SCVirtualMachine -Name "$vmName" 
```

我得到的错误是

> 无法验证参数“名称”上的参数。参数中的字符数 (0) 太少。指定长度大于或等于“1”的参数，然后重试该命令。

有人可以告诉我我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:45:25.200

尝试

```
PS C:\> $vmName = "VM01"
PS C:\> $VM = Get-SCVirtualMachine -Name $vmName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:52:14.450

该命令看起来不错，应该可以工作。您是作为脚本的一部分还是仅通过您发布的示例收到错误？

您提到您正在使用`Get-SCPerformanceData`cmdlet，而您的示例使用了另一个 cmdlet。

尝试从参数中删除引号，它有帮助吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-10T09:54:31.440

尝试这个：

```
$vmName = '-Name VM01'
Get-SCVirtualMachine $vmName 
```

# internet-explorer - IE 9 兼容性视图（IE 7、IE 8）是否与实际浏览器类似？

> ID：12302506
> 
> 赞同：0
> 
> 时间：2012-09-06T14:37:33.230
> 
> 标签：internet-explorer, cross-browser, browser

我的工作涉及跨浏览器测试。由于我不能在同一操作系统上拥有不同版本的 Internet Explorer，我有不同的机器以方便测试目的，即。） Win 7 IE 9.0，Win 7 IE 8.0 等。

注意：我不使用像 IE tester 这样的应用程序，因为我觉得该应用程序无法呈现浏览器的精确复制。

来到 IE 9.0 的 Compatibility View 设置（它模拟其他较低版本的页面，即 IE 7.0、IE 8.0），它是否会使 Browser 的功能与 Compatibility view 设置中选择的浏览器完全一样？

对于具有不同 IE 版本的不同操作系统实例，这是否是一个适当且恰当的解决方案？请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:34:43.943

不，兼容性视图与它试图模拟的浏览器并不完全相同。

看到这个答案： [https ://stackoverflow.com/a/6921057/443954](https://stackoverflow.com/a/6921057/443954)

而这篇博文（关于 IE8 但问题是一样的）：http: [//blogs.popart.com/2009/09/ie8-compatibility-mode-and-ie7-are-not-the-same-thing/](http://blogs.popart.com/2009/09/ie8-compatibility-mode-and-ie7-are-not-the-same-thing/)

因此，您仍然应该尝试在您的测试环境中运行各种浏览器版本，或者作为一个几乎一样好的替代方案，您可能想尝试在线服务，例如 Browserling ( [https://browserling.com](https://browserling.com) ) 甚至 Browsershots ( [http: //browsershots.org/](http://browsershots.org/)）。

# php - mb_stripos 返回不正确的值

> ID：12302507
> 
> 赞同：1
> 
> 时间：2012-09-06T14:37:35.803
> 
> 标签：php, multibyte

我正在将我的工作环境从 ISO-8859-1 编码转换为 UTF-8。我已经修改了 php.ini 以适应这种变化。如果我运行`mb_internal_encoding()`，它确认它实际上是 UTF-8。

但是，在运行以下代码时，我得到了意外的结果：

```
$content = 'eéss';

$substr_pos = mb_stripos($content,'ss');
print_r($substr_pos); 
```

`mb_stripos()`正在返回 1，而我希望它返回 2。任何人都可以对此有所了解吗？

# objective-c - 使用协议和委托

> ID：12302508
> 
> 赞同：0
> 
> 时间：2012-09-06T14:37:38.070
> 
> 标签：objective-c, model-view-controller, xcode4, uiviewcontroller, delegates

我正在尝试在视图中获取一些代码。我已经声明了一个委托并且它没有被实例化，任何想法我错过了什么？我试图在下面总结我是如何做到这一点的。我认为问题在于某个地方，我的 dataSource 委托需要被实例化。

我有一个名为图形视图的视图和一个位于视图控制器 GraphViewController 中的委托。

我知道 GraphView 中的方法正在做某事，因为它调用 AxisDrawing 辅助类并在 Axes 中绘制。

这是相关代码

在 GraphView.h 我设置了协议和 dataSourceDelegate

```
@class GraphView;

@protocol GraphViewDataSourceDelegate
- (float)functionOfX:(float)xValue inGraphView:(GraphView *)sender;
@end

@interface GraphView : UIView

@property(nonatomic, weak) IBOutlet id <GraphViewDataSourceDelegate> dataSourceDelegate;

@end 
```

我在 GraphView.m 中合成的

```
#import "GraphView.h"
#import "AxesDrawer.h"

@implementation GraphView

@synthesize dataSourceDelegate = _dataSourceDelegate; 
```

同样在图形视图中，我尝试按如下方式使用委托（像素是 CGPoint）。这个例程确实运行，如果我不尝试使用我的协议方法，我可以从这里绘制到 GraphView。即我的一些 DrawRect 东西确实被绘制了，它检查了 UIView 到我的自定义视图的链接

```
pixel.y = [self.dataSourceDelegate functionOfX:pixel.x inGraphView:self]; 
```

++++断点放在这里+++++

在 GraphViewController 我声明我实现了协议并按如下方式实现它。编译器会在执行完成时警告我并发现，并关闭警告。（我目前只返回 3.0 作为测试）。

```
@interface  

GraphViewController () <GraphViewDataSourceDelegate>
@property (nonatomic, weak) IBOutlet GraphView *graphView;

@end 
```

...

```
-(float) functionOfX:(float)xValue inGraphView:(GraphView *)sender{
    NSLog(@"fofx accessed");
    return 3.0;
} 
```

如果我在断点之后查看 GraphView* 对象，它似乎没有实例。我错过了什么。

这是来自断点处的跟踪

_dataSourceDelegate 结构 objc_object * 0x0

**编辑：（**除了下面的[@Clays](https://stackoverflow.com/a/12302714/465304)答案）

事实证明，我与自定义视图的连接中断了。这意味着错误在于 View 没有与 Custom ViewController 对话。该链接是通过 ctrl 从 Interface builder 中的 View Controller 按钮拖动到 ViewController 中的 View 来建立的。

这导致 ViewController 被实例化，然后一切正常。

换一种方式。

有问题的链接是奥特莱斯。这必须在 ViewController 中声明为属性，然后在 IB 中使用 ctrl 从 ViewController Name-Bar 拖动到 Controller 中的视图。

如果您已正确添加 Outlet 属性，当您执行 ctrl 拖动时，您的视图将出现一个选项。

IB 中 ViewController 按钮上的上下文按钮弹出信息确实提供了线索。

如果您忽略了将 outlet 属性放入视图控制器中，则链接确实会出现在上下文按钮弹出窗口中，但它是灰色的，并且当您执行链接时，您的视图不会被命名。

放入插座后，名称会出现在菜单中，但不会灰显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:48:55.373

确保您已正确连接所有内容：设置 GraphView 的 dataSourceDelegate 和 GraphViewController 的 graphView。

从跟踪来看，您似乎还没有这样做；或者您在途中的某个地方丢失了参考，因为在某些时候没有任何东西可以抓住它。

# javascript - Javascript运行总数不断增加

> ID：12302511
> 
> 赞同：0
> 
> 时间：2012-09-06T14:37:50.257
> 
> 标签：javascript, jquery, cumulative-sum

昨天我在解决 $NaN 问题时得到了很大的帮助，所以希望我能从昨天的代码中得到另一个答案，小计现在在每行的末尾添加总计并显示一个值，这样很好，但是无论何时我输入一个金额已售出，然后去更改它再次添加的值，因此如果我将数量设置为 2 并且每个 50 美元，则订单项的总额为 100 美元，小计反映，但如果我将数量更改为 1，则订单项变为 50 美元正确，但小计重新添加并变为 150 美元，我对 JS 的了解不够，看不出我做错了什么......

```
$(document).ready(function() {
var subtotal = 0;
var stantot = 0;
var showtot = 0;
$("input").keyup(function() {
    for (var i = 0; i <= 30; i++) {
        var unitp = parseFloat($("#unitp" + i).val()) || 0;
        var casep = parseFloat($("#casep" + i).val()) || 0;
        var units = parseFloat($("#units" + i).val()) || 0;
        var cases = parseFloat($("#cases" + i).val()) || 0;
        var st_disc = parseFloat($("#st_disc").val()) || 0;
        var sh_disc = parseFloat($("#sh_disc").val()) || 0;

        var unitr = (unitp * units);
        var caser = (casep * cases);
        var result = (unitr + caser);
        var st_disc_fix = (st_disc / 100);
        var sh_disc_fix = (sh_disc / 100);
        var st_disc_solo = (st_disc_fix * result);
        var sh_disc_solo = (sh_disc_fix * result);
        var disc_total = (st_disc_fix + sh_disc_fix);
        var disc_whole = (disc_total * result);

        var disc = (result - disc_whole);
        var st_disc_tot = (result - disc_whole);
        var sh_disc_tot = (result - disc_whole);

        $("#line" + i).val(result.toFixed(2));
        $("#disc" + i).val(disc.toFixed(2));
        subtotal += parseFloat((unitp * units) + (casep * cases));
        stantot += parseFloat(st_disc_tot);
        showtot += parseFloat(sh_disc_tot);
    }
    $("#totretail").val(subtotal.toFixed(2));
    $("#standiscount").val(stantot.toFixed(2));
    $("#showdiscount").val(showtot.toFixed(2));

    var totship = ($("#totship").val() * 1);
    var tottax = ($("#tottax").val() * 1);

    var finaltotal = (subtotal + stantot + showtot + totship + tottax);
    $("#total").val(finaltotal.toFixed(2));

    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:47:06.013

`var subtotal = 0;`在侦听器内部移动`input`，因此每次都会重新计算小计：

```
$(document).ready(function() {
  $("input").keyup(function() {
    var subtotal = 0;
    var stantot = 0;
    var showtot = 0;
    for (var i = 0; i <= 30; i++) { 
```

..

否则 total 将继续增长，原因`stantot`和`showtot`正在工作是因为它们是从带有`=`not的 var 设置的`+=`。

我也将其他变量移到了那里，只是因为它更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:49:03.130

您的问题是，您从不重置小计。每次它都会继续添加到以前的小计中。您需要做的是在重新计算之前将其重置为零

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:43:21.650

我认为您的问题在于以下几行：

```
var totship = ($("#totship").val() * 1);
var tottax = ($("#tottax").val() * 1); 
```

jQuery 中的`.val()`方法倾向于返回字符串。但是如果你将一个字符串乘以一个数字，你会得到`NaN`. 您应该强制这些值是数字。这似乎是你想要做的`* 1`，但那是行不通的。试试这个：

```
var totship = +$("#totship").val();
var tottax = +$("#tottax").val(); 
```

或者，如果清晰是你的事，你可以这样做：

```
var totship = Number($("#totship").val());
var tottax = Number($("#tottax").val()); 
```

或者

```
var totship = parseInt($("#totship").val(), 10);
var tottax = parseInt($("#tottax").val(), 10); 
```

任你选。

# javascript - 仅将 document.write 用于标题标签的一部分？

> ID：12302514
> 
> 赞同：0
> 
> 时间：2012-09-06T14:38:02.027
> 
> 标签：javascript, breadcrumbs

我找到了一个 javascript 面包屑路径，它将显示主页、网页所在的文件夹，然后显示页面标题以显示您当前所在的页面。

由于我的页面标题被定义为：页面名称 - 文件夹 - 公司，我宁愿它不显示整个标题。我已经定义了一个变量，但这意味着我需要在每个页面上输入一个自定义变量。

有没有办法让javascript写标题但只在破折号之前？所以不要写页面名称 - 文件夹 - 公司。它只会写第一个破折号之前的内容？

```
if ( typeof pageName != 'undefined') {
document.write(output + pageName);
}
else {
document.write(output + document.title);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:44:14.000

你可以使用[`string.split()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)。然后标题的每一部分都将成为它自己的数组元素。

```
document.write(output + document.title.split(' - ')[0]); 
```

# .htaccess - 为什么我得到一个 301 重定向到带有斜杠的文件夹名称？

> ID：12302516
> 
> 赞同：4
> 
> 时间：2012-09-06T14:38:13.907
> 
> 标签：.htaccess, redirect

一个请求`http://localhost/SAMPLE-CODES/backbone-mysql-reading-json/websites`

被重定向如下：

```
> Request URL:http://localhost/SAMPLE-CODES/backbone-mysql-reading-json/websites
> Request Method:GET
> Status Code:301 Moved Permanently 
```

**响应标头：**

```
> HTTP/1.1 301 Moved Permanently Date: Thu, 06 Sep 2012 14:32:41 GMT
> Server: Apache/2.2.17 (Win32) mod_ssl/2.2.17 OpenSSL/0.9.8o PHP/5.3.4
> mod_perl/2.0.4 Perl/v5.10.1 Location:
> http://localhost/SAMPLE-CODES/backbone-mysql-reading-json/websites/
> Content-Length: 417 Keep-Alive: timeout=5, max=100 Connection:
> Keep-Alive Content-Type: text/html; charset=iso-8859-1 
```

我不确定是什么导致了这种重定向。

我在文件夹中有以下 .htaccess `c:\xampp\htdocs\SAMPLE-CODES\backbone-mysql-reading-json\`：

**.htaccess**

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T16:18:18.860

这可能是因为[mod_dir 和执行重定向的`DirectorySlash`指令](http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryslash)。使用它，当 apache 查看 URI 并认为它正在访问一个目录并且缺少尾部斜杠时，它 301 重定向到带有尾部斜杠的 URI。它始终默认打开，因为如果您将其关闭，则会出现信息泄露安全问题。但是，如果您通过 index.php 脚本路由所有内容，则它甚至可能无关紧要，您可以通过简单地添加`DirectorySlash Off`htaccess 文件来关闭它（并为您可以访问目录的目录打开它，例如 css 或 js 或图像， ETC。

# ruby - 让 Ruby 到 chdir 到 Windows 上的远程服务器

> ID：12302520
> 
> 赞同：0
> 
> 时间：2012-09-06T14:38:19.880
> 
> 标签：ruby, windows, directory, chdir

我坚持将目录更改为“\10.10.10.10\D$\some_dir”

```
FileUtils.chdir("\\\\10.10.10.10\\D$\\some_dir\\") 
```

和

```
Dir.chdir("\\\\10.10.10.10\\D$\\some_dir\\") 
```

不要在 Ruby 1.9.3 中工作！它在 Ruby 1.8.7 中工作

任何想法如何将目录更改为远程框目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:27:18.777

好的，这是 Windows 中的一个问题，它无法访问远程框上的指定文件夹，因为没有指定用于访问该文件夹的凭据，我所做的就是去 win explorer 并在地址行中将远程文件夹的路径框“\10.10.10.10\D$\some_dir” - 之后提示凭据，只需输入它们并在您通过资源管理器访问文件夹后输入“记住凭据”脚本运行正常

# sql - Sql根据计数动态更新登录ID

> ID：12302521
> 
> 赞同：1
> 
> 时间：2012-09-06T14:38:19.880
> 
> 标签：sql, sql-server

我有 2 张桌子。一个是主表，另一个是登录表。我可能在主表中有 10 条记录，在登录表中有 6 条记录。每个登录 ID 都必须平等地分配给主表。任何人都可以给我更新登录信息的最佳解决方案。

例子

```
Create table ##t1 
(id int identity,
name varchar(5),
loginid varchar(10)
divno char(3))

create table ##l1
(
id int identity,
name varchar(10),divno char(3))

insert into ##t1 values
('Jin',null,'001')
insert into ##t1 values
('Anu',null,'001')
insert into ##t1 values
('kir',null'002')
insert into ##t1 values
('Asi',null,'003')
insert into ##t1 values
('Nil',null,'002')
insert into ##t1 values
('sup',null,'003')
insert into ##t1 values
('amu',null,'003')
insert into ##t1 values
('mani',null,'003')

insert into ##l1 values
('A','001')
insert into ##l1 values
('B','001')
insert into ##l1 values
('C','002')
insert into ##l1 values
('D','002')
insert into ##l1 values
('E','002')
insert into ##l1 values
('F','003') 
```

数据示例

```
Main table

id          name  loginid divno
----------- ----- ----------
1           Jin   NULL    001
2           Anu   NULL    001
3           kir   NULL    002
4           Asi   NULL    003
5           Nil   NULL    002
6           sup   NULL    003
7           amu   NULL    003
8           mani  NULL    003

Login Table

id          name    divno
----------- -------------
1           A        001
2           B        001
3           C        002
4           D        002
5           E        002
6           F        003 
```

期望的输出

![在此处输入图像描述](../Images/e0e61b81d0d812d595bc215f2e1da5fa.png)

我们如何在不循环的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:46:45.203

```
 update ##t1 
 set loginid = #l1.name
 from   
      ##t1
           inner join 
      (select *, (ROW_NUMBER() Over (order by id) -1)% (select COUNT(*) from ##l1)+1 as rn from ##t1) v
           on ##t1.id = v.id
           inner join 
      ##l1 
           on v.rn = ##l1.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:50:54.887

让我将其作为选择查询而不是作为更新来执行。

```
select id, name, l.login
from (select mt.*,
             (row_number() over (order by id) % l.loginCount) + 1 as loginSeqnum
      from MainTable mt cross join
           (select count(*) as loginCount from login) l
     ) mt join
     (select l.*, row_number() over (order by id) as seqnum
      from login l
     ) l
     on mt.LoginSeqnum = l.seqnum 
```

这样做是为登录添加一个序列号（以防 loginid 不是 1..n。然后它为第一个表中的每条记录计算一个相似的值。

这种方法的一个好处是您可以通过更改 row_number() 语句中的“order by”子句来修改它以获得更多随机排序。例如，使用“order by newid()”将使分配随机化，而不是以循环方式进行。

# php - 从连接了 2 个属性的表中选择一个产品

> ID：12302524
> 
> 赞同：2
> 
> 时间：2012-09-06T14:38:28.747
> 
> 标签：php, mysql, join

我有一个这样的mysql表

```
PRODUCT
-------
product_id: 1 | name: product .... product_id: 2 | name: product2 .. etc etc 
```

然后我有另一张桌子

```
PROPERTY
---
id: 1 | name: red | product_id: 1 .... id: 2 | name: large | product_id: 1 ..... id: 3 | name : brown | product_id: 2 .... and so on ... 
```

如何选择具有 2 个属性的产品？

例如，我想购买具有 RED 和 LARGE 属性的产品

我试过

```
SELECT * FROM product
JOIN property USING (product_id)
WHERE property.name = "red" AND property.name = "large" .... 
```

但显然它不起作用:)

感谢您的帮助，对不起我的英语！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:43:15.127

你需要计算它的记录实例

```
SELECT  a.productname
FROM    product a
        INNER JOIN property b
            on a.product_ID = b.product_ID
WHERE b.name IN ('red', 'large')
GROUP BY a.productname
HAVING COUNT(a.productname) = 2 
```

如果您单击演示，您可以看到分组结果和使用常规过滤器之间的差异`IN`

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/e491b/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:41:23.077

你应该使用`OR`：

```
SELECT * FROM product
JOIN property USING (product_id)
WHERE property.name = "red" OR property.name = "large" .... 
```

此外，您可以使用`IN`：

```
SELECT * FROM product
JOIN property USING (product_id)
WHERE property.name IN ('red', 'large') .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:44:14.897

也许像

```
SELECT p.* 
  FROM product p
 WHERE EXISTS( SELECT * 
                 FROM property a
                WHERE a.name = 'red' 
                  AND a.product_id = p.product_id)
   AND EXISTS( SELECT * 
                 FROM property a
                WHERE a.name ='large' 
                  AND a.product_id = p.product_id) 
```

可以工作吗？

# javascript - 在链接中搜索文本

> ID：12302525
> 
> 赞同：-12
> 
> 时间：2012-09-06T14:38:42.490
> 
> 标签：javascript, jquery, html

```
​&lt;div id="main">
  <div>
     <div> 
         <a href="/test/number/1">1asd</a>
         <div>
             <div>
                 <a href="/test/number/1/phone/0">1fdf</a>
             </div>
         </div>
      </div>         
  </div>
  <div>
     <div> 
         <a href="/test/number/2">2a2d</a>
      </div>         
  </div>
  <div>
     <div> 
         <a href="/test/number/3">33</a>
         <div>
             <div>
                 <a href="/test/number/3/phone/0">33df</a>
             </div>
         </div>
      </div>         
  </div>
​&lt;/div>​

​function(num)​{
    $('#main a').each(function(){

    })    

    return false;
}​ 
```

我想做：

如果 num == 1 那么这应该返回 TRUE，因为：

伊塞特**`<a href="/test/number/1/phone/0">1fdf</a>`**

这个链接有号码和电话

如果 num == 2 那么这应该返回 FALSE，因为：

伊塞特**`<a href="/test/number/2">2a2d</a>`**

这个链接有号码，没有电话

如果 num == 3 那么这应该返回 TRUE，因为：

伊塞特**`<a href="/test/number/3/phone/0">1fdf</a>`**

这个链接有号码和电话

如果 num > 3 那么这应该返回 FALSE，因为：

not isset 与 number/4 等的链接

感谢帮助！

[http://jsfiddle.net/h7Wda/](http://jsfiddle.net/h7Wda/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:47:51.663

这是解决方案的一个小提琴：http: [//jsfiddle.net/h7Wda/7/](http://jsfiddle.net/h7Wda/7/)

您基本上检查是否`number/1/phone`位于元素的 href 中：

```
 $(this).attr('href').indexOf('number/1/phone') 
```

同样的`number/3/phone`情况。

任何其他值都将返回 false。

# c# - 以“const void * key, void * out”作为参数的元帅？

> ID：12302530
> 
> 赞同：1
> 
> 时间：2012-09-06T14:38:55.817
> 
> 标签：c#, c++, .net, marshalling

我需要通过 dllimport 调用一个 c++ 方法。只要 c++ 方法中没有以下两个参数，一切正常：

```
const void * key,
void * out 
```

我想我需要整理他们。但它是如何工作的？key 应该是一个指向字节数组的指针，out 参数也是一个长度为 16 的字节数组。

在尝试了 Jcl 的建议后，我有以下内容：

使用第一种方法（使用 out byte[] outprm），程序崩溃而没有错误（到达调用点时）。但是使用第二种方式（来自Jcl的评论），我有以下内容：

```
[DllImport(@"MyDLL.dll", SetLastError = true)]
public static extern void MyMethod(IntPtr key, out IntPtr outprm); 

private void button1_Click(object sender, EventArgs e)
    {            
        byte[] hash = new byte[16];
        byte[] myArray = new byte[] { 1, 2, 3 };
        IntPtr outprm = Marshal.AllocHGlobal(hash.Length);
        IntPtr key = Marshal.AllocHGlobal(myArray.Length);
        Marshal.Copy(myArray, 0, key, myArray.Length);
        MyMethod(key, out outprm);
        Marshal.Copy(outprm, hash, 0, 16);
        Marshal.FreeHGlobal(key);                       
    } 
```

现在调用 MyMethod 时没有错误。当我尝试将数据复制回来时，我只是收到以下错误：AccessViolationException

它说我想写入受保护的内存。dll 和 c# 软件是 x64（并且需要是 x64）。也许这就是我的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:42:24.650

用于`IntPtr`键和输出，例如：

```
[DllImport ("whatever.dll")]
public static extern void MyMethod(IntPtr key, IntPtr outprm); 
```

做`key`一个 IntPtr，取`myArray`一个字节数组：

```
IntPtr key = Marshal.AllocHGlobal(myArray.Length);
Marshal.Copy(myArray, 0, key, myArray.Length);
// ... call your function ...
Marshal.FreeHGlobal(key ); 
```

从以下位置获取 16 字节数组`outprm`：

```
IntPtr outprm;
MyMethod(key, outprm);
byte [] myArray = new byte[16];
Marshal.Copy(outprm, myArray, 0, 16); 
```

# ruby-on-rails - CarrierWave MiniMagick 调整大小时出错

> ID：12302534
> 
> 赞同：0
> 
> 时间：2012-09-06T14:39:08.937
> 
> 标签：ruby-on-rails, minimagick

我正在使用带有 MiniMagick 的 CarrierWave 来调整大小和上传文件。我的上传器中有版本指令

```
 version :thumb do
    process :resize_to_limit => [100, 100]
  end 
```

但是当我上传文件时，操作失败。我得到的例外是

```
No such file or directory - identify -ping /var/folders/Au/AuBTXIH8HzCAhKdy0jvi+k+++TI/-Tmp-/mini_magick20120906-64039-1gx1ptu.jpg 
```

我要上传的文件的名称是 hat.jpg。该`/var/folders/Au/AuBTXIH8HzCAhKdy0jvi+k+++TI/-Tmp-/`目录确实存在，但是当我进行上传时，我看不到正在创建有问题的文件。

关于问题可能是什么的任何建议？

**编辑**：我发现具体问题是 MiniMagick 正在生成一个命令来运行`identify`，并且没有找到识别命令。但它在我的系统上——它是`/usr/local/bin/identify`作为 ImageMagick 的一部分安装的。由于某种原因 MiniMagick 没有选择它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:57:30.077

发现问题出在我的 RubyMine IDE 上，而不是我的应用程序、ImageMagick 或 MiniMagick。

似乎当 RubyMine IDE 启动时（通过双击 RubyMine 图标），它不会继承终端会话存在的 PATH。因此`/usr/local/bin/`，当我从 RubyMine 中启动 rails 服务器时，它不在我的服务器路径中。

从命令行启动服务器时，我能够成功运行我的应用程序。我还发现，如果我从命令行启动 RubyMine（使用`open -a RubyMine`），那么会继承终端会话并且一切都按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T19:26:51.600

添加到 /etc/paths 的顶部：

```
/usr/local/bin/ 
```

这将告诉 mac OS 新的 shell 应该有这个变量。我说要添加到顶部，因为使用自制软件，您通常会添加覆盖内置 mac 应用程序的路径

# ruby-on-rails - Rails 子类化和 STI

> ID：12302535
> 
> 赞同：0
> 
> 时间：2012-09-06T14:39:12.610
> 
> 标签：ruby-on-rails, activerecord, inheritance, sti

我正在`OldApp`为某个类 Foo 使用 STI 的 Rails 项目。目前，我们正在进行大规模的、渐进式的重写。为了减轻痛苦，我们选择了一种非常规的方法。新的、命名空间的应用程序`NewApp`现在作为一个引擎存在`OldApp`。

我们将在其中重用的模型`NewApp`已经创建`NewApp`，`OldApp`现在将这些模型用作它们的父类。为什么？现在我们可以将代码从`OldApp`s 模型移动和重构到新模型，`OldApp`仍然有效，测试`OldApp`确保重构`NewApp`不会破坏东西并且`OldApp`基本上可以作为待办事项列表（如果一切`OldApp`都消失了，我们就完成了）。然而 ;-）

问题是，STI 目前有点扼杀了这种（否则工作得非常好）的方法。

```
 class OldApp::Foo < NewApp::Foo; end
   class NewApp::Foo < ActiveRecord::Base; end

   # in the console
   OldApp::Foo.count #=> SELECT COUNT(*) FROM `foos` WHERE `foos`.`type` IN ('Foo')
   NewApp::Foo.count #=> SELECT COUNT(*) FROM `foos` 
```

当然，`OldApp::Foo`这样做是因为它假设它只是 STIish 的子类*，*而`NewApp::Foo`不是. 完全禁用 STI也不起作用，因为事实上我们*正在*将 STI 用于.*`Foo``NewApp``Whatever::Foo`*`Foo`**

 **我基本上是在寻找一些东西来说明`NewApp::Foo`它是 STI 链的基类。

这有意义吗？有点难以解释...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:57:43.187

使用抽象基类并让继承`OldApp::Foo`和`NewApp::Foo`从中可以解决问题：

```
class NewApp::FooBase < ActiveRecord::Base
    self.abstract_class = true
end

class NewApp::Foo < NewApp::FooBase; end
class OldApp::Foo < NewApp::FooBase; end 
```

您可以将所有重构代码放在基类中，以便`OldApp::Foo`作为`NewApp::Foo`STI 的起点。**

# objective-c - UIWebView 委托中的 EXC_BAD_ACCESS

> ID：12302536
> 
> 赞同：4
> 
> 时间：2012-09-06T14:39:18.937
> 
> 标签：objective-c, ios

我遇到了一个问题 - 尝试设置 UIWebView.delegate = self; 时出现 EXC_BAD_ACCESS；

我的代码：

vkLogin.h -

```
#import UIKit/UIKit.h

@interface vkLogin : UIViewController <UIWebViewDelegate>
{
    UIWebView *authBrowser;
    UIActivityIndicatorView *activityIndicator;
}

@property (nonatomic, retain) UIWebView *authBrowser;
@property (nonatomic, retain) UIActivityIndicatorView *activityIndicator;

@end 
```

vkLogin.m -

```
#import "vkLogin.h"
#import "bteamViewController.h"

@implementation vkLogin

@synthesize authBrowser;

- (void) viewDidLoad
{
    [super viewDidLoad];

    activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    activityIndicator.center = CGPointMake(self.view.bounds.size.width / 2, self.view.bounds.size.height / 2);
    activityIndicator.autoresizesSubviews = YES;
    activityIndicator.hidesWhenStopped = YES;

    [self.view addSubview: activityIndicator];
    [activityIndicator startAnimating];

    authBrowser = [[UIWebView alloc] initWithFrame:self.view.bounds];

    authBrowser.delegate = self;
    authBrowser.scalesPageToFit = YES;

    [self.view addSubview:authBrowser];

    NSString *authLink = @"http://api.vk.com/oauth/authorize?client_id=-&scope=audio&redirect_uri=http://api.vk.com/blank.html&display=touch&response_type=token";
    NSURL *url = [NSURL URLWithString:authLink];

    [authBrowser loadRequest:[NSURLRequest requestWithURL:url]];

}

- (void) webViewDidFinishLoad:(UIWebView *)authBrowser
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Lol" message:@"OLOLO" delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil];

    [alert show];

}
@end 
```

所以，如果我正在处理委托字符串 - 一切正常，但我没有收到我的 webViewDidFinishLoad 事件。

我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T16:44:12.397

错误不在您发布的代码中。您的僵尸消息是说您的引用`vkLogin`是错误的。因此，您需要查看创建并保存对您的类的引用的任何`vkLogin`类。

那堂课应该做类似的事情`vkLogin *foo = [[vkLogin alloc] init];`

更新：

根据您的评论，您似乎正在为`vkLogin`. 查看代码创建和使用`vkLogin`以及它是如何被调用的将是最有用的。除此之外，这里有一些猜测。

`vkLogin`您被称为多次创建和添加到子视图的方法。（每次都会创建一个新实例）。您有某种类型的回调，可能在`vkLogin`被删除后发生。

我的猜测`vkLogin`应该是`property`在你的类中，而不是本地方法变量。

在你的 .h 你会添加 `@proprerty (strong, nonatomic) vkLogin *vk;`

在您的 .m 文件中，您可以引用它，`self.vk`以便创建它并将其添加为子视图，例如：

```
self.vk = [[vkLogin alloc] init]; 
[self.view addSubview:self.vk]; 
```

*附带说明一下，约定说我们应该以大写字母开头类名，因此您可以命名该类`VkLogin`，这将使其易于与命名的变量区分开来`vkLogin`（但在解决问题后要担心）*

# solr - Solr4 Cloud Beta版异常org.apache.lucene.store.AlreadyClosedException：这个IndexWriter已关闭

> ID：12302540
> 
> 赞同：2
> 
> 时间：2012-09-06T14:39:53.160
> 
> 标签：solr, solrcloud

我最近从 Solr 3.6 更新到 Solr4 Beta 版本。我在尝试一次又一次地更新和提交相同的记录时遇到以下异常。有人可以帮忙解决这个问题吗？？？

```
SEVERE: org.apache.solr.common.SolrException: Error opening new searcher
    at org.apache.solr.core.SolrCore.openNewSearcher(SolrCore.java:1267)
    at org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1379)
    at org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1157)
    at org.apache.solr.update.DirectUpdateHandler2.commit(DirectUpdateHandler2.java:560)
    at org.apache.solr.update.processor.RunUpdateProcessor.processCommit(RunUpdateProcessorFactory.java:87)
    at org.apache.solr.update.processor.UpdateRequestProcessor.processCommit(UpdateRequestProcessor.java:64)
    at org.apache.solr.update.processor.DistributedUpdateProcessor.processCommit(DistributedUpdateProcessor.java:959)
    at org.apache.solr.update.processor.LogUpdateProcessor.processCommit(LogUpdateProcessorFactory.java:157)
    at org.apache.solr.handler.RequestHandlerUtils.handleCommit(RequestHandlerUtils.java:69)
    at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(ContentStreamHandlerBase.java:68)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1656)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:454)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:275)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.ha.session.JvmRouteBinderValve.invoke(JvmRouteBinderValve.java:219)
    at org.apache.catalina.ha.tcp.ReplicationValve.invoke(ReplicationValve.java:333)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.lucene.store.AlreadyClosedException: this IndexWriter is closed
    at org.apache.lucene.index.IndexWriter.ensureOpen(IndexWriter.java:553)
    at org.apache.lucene.index.IndexWriter.ensureOpen(IndexWriter.java:558)
    at org.apache.lucene.index.IndexWriter.nrtIsCurrent(IndexWriter.java:4061)
    at org.apache.lucene.index.StandardDirectoryReader.doOpenFromWriter(StandardDirectoryReader.java:261)
    at org.apache.lucene.index.StandardDirectoryReader.doOpenIfChanged(StandardDirectoryReader.java:240)
    at org.apache.lucene.index.StandardDirectoryReader.doOpenIfChanged(StandardDirectoryReader.java:230)
    at org.apache.lucene.index.DirectoryReader.openIfChanged(DirectoryReader.java:166)
    at org.apache.solr.core.SolrCore.openNewSearcher(SolrCore.java:1213)
    ... 30 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T16:47:03.720

在 SolrConfig.xml 的查询部分中，增加 MaxWarmingsearches 的数量并将 useColdSearcher 设置为 true。您可以在这里找到更多信息。 [http://wiki.apache.org/solr/FAQ#What_does_.22exceeded_limit_of_maxWarmingSearchers.3DX.22_mean.3F](http://wiki.apache.org/solr/FAQ#What_does_.22exceeded_limit_of_maxWarmingSearchers.3DX.22_mean.3F)

```
<query>
 <useColdSearcher>true</useColdSearcher>
 <maxWarmingSearchers>6</maxWarmingSearchers>
</query> 
```

* * *

参加 SolrCloud 训练营并听取 Solr 团队的意见后进行更新。

*   如果增加Warming Searchers 的数量，将有助于减少上述异常，但对Searching 没有帮助。
*   分面、分组、函数查询等搜索使用 Max Warming Searchers，因此如果您看到上述异常，他们建议减少提交次数。增加 maxWarmingSearchers，对您没有任何帮助。

*   他们建议每秒提交一次。如果您计划每秒执行 100 次提交并希望查看实时更新，您可以通过关闭 maxWarmingSearchers 来实现。但是，如果您将其关闭，则分面和分组等查询将花费更多时间。

# javascript - 鼠标事件在 OpenLaszlo 应用程序中不起作用

> ID：12302541
> 
> 赞同：1
> 
> 时间：2012-09-06T14:39:56.517
> 
> 标签：javascript, dom-events, mouseevent, openlaszlo

我设计了一个可以很好地处理 html 页面的荧光笔，但是当我尝试与 OpenLaszlo 应用程序集成时，我遇到了鼠标事件的问题.....

OpenLaszlo 应用程序有一个按钮，单击该按钮可激活荧光笔。该应用程序已部署为单独的应用程序，并且与该按钮对应的功能已写入生成的“index.html”文件中。

Laszlo 应用程序中定义的按钮代码如下：--

```
 <button name="Highlighter" onclick="highlightController()">Highlighter

                <method name="highlightController">
                    if(parent.check="false"){
                            this.setAttribute("check", true);

                            if(this.check == true){
                                lz.Browser.loadJS('Highlight("true")');
                            }
                            else if(this.check == false){
                                lz.Browser.loadJS('Highlight("false")');
                            }
                    }
                </method>
  </button> 
```

对应的按钮功能如下：--

```
 function Highlight(check) {
        alert("button function");
        var cursor = {},
        divr = {},
        dragging = false,
        dv=document.createElement('div');
        dv.setAttribute('id',"maindiv");
        document.body.appendChild(dv);
        var maindiv=document.getElementById('maindiv');

    function maindivstart(a, b) {

        cursor.a = a;
        cursor.b = b;
        maindivposition();
        dragging = true;
        $('#maindiv').clone().insertAfter("#maindiv");

    }

    function maindivsize(a, b) {

        divr.left = a < cursor.a ? a : cursor.a;
        divr.top = b < cursor.b ? b : cursor.b;
        divr.width = Math.abs(a - cursor.a),
        divr.height = Math.abs(b - cursor.b);
        maindivposition();
        maindivresize();

    }

    function maindivend() {

        dragging = false;

    }

    function maindivposition() {

        maindiv.style.top = divr.top + 'px';
        maindiv.style.left = divr.left + 'px';

    }

    function maindivresize() {

        maindiv.style.width = divr.width + 'px';
        maindiv.style.height = divr.height + 'px';

    }

    window.onmousedown = ( function (e) {

        var a = e.clientX,
            b = e.clientY;
        e.preventDefault();
        maindivstart(a, b);

    });

    window.onmousemove = ( function (e) {

        var a = e.clientX,
            b = e.clientY;
        e.preventDefault();
        if (dragging) {
            maindivsize(a, b);
        }

    });

    window.onmouseup = ( function (e) {

        e.preventDefault();
        maindivend();

    });

} 
```

鼠标事件不起作用...有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:26:18.310

当您有一个使用 DHTML 运行时的应用程序时，您可以直接调用任何 JavaScript 函数，无需通过 lz.Browser。

```
<canvas>

  <!-- Calling the alert function from a DHTML OpenLaszlo app -->
  <button onclick="window.alert('Calling JS from OpenLaszlo')"
      text="Call some JS" />

</canvas> 
```

如果你想为这两个运行时编译，最好使用 lz.Browser：

```
<canvas>

  <button text="Call some JS">
    <handler name="onclick">
       lz.Browser.loadJS("alert('Calling JS from OpenLaszlo')");
    </handler>
  </button>

</canvas> 
```

如果将 OpenLaszlo 应用程序嵌入 HTML 页面的代码不正确，则可能是错误的一种来源。部署应用程序的最佳方式是使用 SOLO 部署工具（我假设您已经这样做了）。如果某些东西不起作用，请检查浏览器 JavaScript 错误控制台以获取错误消息。您也可以直接在控制台中评估表达式。如果在加载应用程序时在控制台中键入以下 JavaScript 表达式会发生什么：

```
lz.Browser.loadJS('alert("true")'); 
```

您是否看到任何错误消息？

# actionscript-3 - 二维生物图像杂交算法

> ID：12302543
> 
> 赞同：1
> 
> 时间：2012-09-06T14:40:08.520
> 
> 标签：actionscript-3, 2d, genetic-algorithm, hybrid, morphing

我想在我的游戏中变异两个怪物来制作一个简单的混合体。每个怪物都是一个 2d 图像女巫，我可以将其实现为复合精灵（以了解更多关于每个身体部位的信息）。问题是不是所有的怪物都是相似的类型，不是所有的都是人形或任何种类的动物。我认为，例如，如果我们有一只有 4 条腿的狮子和有 8 条腿的蜘蛛（例如蜘蛛家族占主导地位），它可能是带有其他颜色的 8 条腿狮子（两种颜色的混合）。但是如果我有一些人形机器人和青蛙，算法应该怎么做？有什么想法或任何有用的算法可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:37:42.400

你可以实现简单的遗传系统。例如，让每个生物由值数组表示，指示脚本如何创建角色：[add_red_human_torso, add_blue_frog_left_leg, .... ]。然后你可以随机混合两个生物阵列并从中构建新生物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:59:50.097

给每个动物的肢体赋予属性怎么样，（狮子腿的力量，青蛙腿的跳跃，人体躯干的高度，蜘蛛颜色的迷彩等）然后做一个多目标优化算法。

# java - AOP 不可序列化 org.springframework.aop.aspectj.annotation.InstantiationModelAwarePointcutAdvisorImpl？

> ID：12302551
> 
> 赞同：5
> 
> 时间：2012-09-06T14:40:38.630
> 
> 标签：java, spring, serialization, spring-aop, aop

我正在使用 Eclipse IDE 和 tomcat 7.0

我有一个客户端-服务器应用程序。在服务器端，我有一个实现 StationInterface 和 Serializable 的 StationInterface 和 Station 类，并且我还在服务器端使用 AOP 来记录 Station 中的一些事件。现在，当我将对象发送给客户端时，我得到了这个异常

```
java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: org.springframework.aop.aspectj.annotation.InstantiationModelAwarePointcutAdvisorImpl
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readArray(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readArray(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readObject(Unknown Source)
at pack.servlets.servlet2.doPost(servlet2.java:90)
at pack.servlets.servlet2.doGet(servlet2.java:47)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: java.io.NotSerializableException: org.springframework.aop.aspectj.annotation.InstantiationModelAwarePointcutAdvisorImpl
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.writeArray(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.writeArray(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.access$300(Unknown Source)
at java.io.ObjectOutputStream$PutFieldImpl.writeFields(Unknown Source)
at java.io.ObjectOutputStream.writeFields(Unknown Source)
at java.util.Vector.writeObject(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.writeObject(Unknown Source)
at pack.my_server.MyServer$ClientHandler.run(MyServer.java:198) 
```

是否可以序列化这个春季课程？

我想将方面类声明为瞬态，但我不知道这是一个好主意还是可能？

# mysql - 如何在 C# 和 MySQL 中根据今天的日期检索日期记录

> ID：12302554
> 
> 赞同：0
> 
> 时间：2012-09-06T14:40:40.097
> 
> 标签：mysql, c#-4.0

我想选择`dateTimefield`等于今天日期的记录。DBMS 是 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:48:42.897

```
SELECT * FROM my_table WHERE DATE(dateTimefield) = CURRENT_DATE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:47:48.133

```
SELECT * FROM tableName WHERE DATE_FORMAT(dateField,'%m-%d-%Y')=DATE_FORMAT(NOW(),'%m-%d-%Y'); 
```

# javascript - 刷新可折叠集合 jquery mobile 中的列表视图。地雷不工作

> ID：12302556
> 
> 赞同：1
> 
> 时间：2012-09-06T14:40:41.743
> 
> 标签：javascript, jquery, jquery-mobile

我的列表视图无法查看时遇到问题。我从 j 查询的 $.post 方法调用 Web 服务并返回一个数据集。我的所有数据和信息都显示在页面上，但在我调用 listview.refresh 后，我在可折叠集中的列表视图没有刷新。这是我的代码：

```
$("#button").on("vclick",function()
{
   data = {}
   $.post("Web service",data,function(data1)
   {
      //clear the page
       $("#list containing the data-role collapsible set").html("");
       type = data.type;
       $.each(data1.ArrayName,function(i,value)
       {
           if(value.type != current)
           {
              $("div data-role='collapsible' data-collapse='false'><h3> +
              current + </h3><p class='add'></p></div>").appendTo("list containing +
               The data-role collapsible set");
               $('.add').append("<ul data-role='listview' class='list2'></ul>");
               current = type;
           }
           $(".list2").append("<li><a><div><span style='float:left'>" + data.info +
           "</span></div></a></li>");
           $("id for div with data-role collapsibleset").collapsibleset("refresh");
           $(".list2").listview("refresh");
       },"json");

   }
}); 
```

# php - 以mysql日期格式计算日期后的'x'天

> ID：12302559
> 
> 赞同：-1
> 
> 时间：2012-09-06T14:40:46.477
> 
> 标签：php, date, time

> **可能重复：**
> [使用 php 格式化 mysql 日期时间](https://stackoverflow.com/questions/136782/format-mysql-datetime-with-php)

例如，我想计算给定日期后的 10 天，使用 strtotime 以“Ymd”格式很容易，但在我的情况下，我正在从“Ymd H:i:s”中的 mysql 读取给定日期格式，现在 strtotime 似乎不适用于此类日期格式。

如何以“Ymd H:i:s”格式计算给定日期后的 10 天？

提前谢谢你，贝扎德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:42:14.307

用于[`DateTime`](http://php.net/datetime)修改日期以增加 10 天：

```
$date = DateTime::createFromFormat( 'Y-m-d H:i:s', $string);
$date->modify( '+10 days');
echo $date->format( 'Y-m-d H:i:s'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T14:42:25.347

或者; 在进入 php 之前在 mysql 中执行此操作：

```
SELECT DATE_ADD(`date_column`, INTERVAL 10 DAY); 
```

# google-earth-plugin - 获取 GE 插件客户端坐标

> ID：12302563
> 
> 赞同：3
> 
> 时间：2012-09-06T14:41:04.067
> 
> 标签：google-earth-plugin

我正在编写一个带有 WebBrowser 控件的 WinForms 应用程序。我在这个应用程序中使用了谷歌地球插件，并且需要在谷歌地球上创建一些地标。根据当前范围（缩放级别），某些地标在屏幕上可能彼此非常接近（当地球足够缩小时）。在这种情况下，我想创建的不是所有地标，而是一些地标，以避免屏幕上的地标过度拥挤地图。

例如，假设我有 1000 个点要创建地标。当我遍历要创建的地标的所有点时，我想将每个点的纬度/经度转换为 WebBrowser 控件的客户端坐标，以便我可以检查它是否非常接近（在屏幕上）已创建的其他地标. 如果它非常接近其他地标，我将跳过创建此地标。因此，如果用户缩小到一定程度，实际创建的地标数量可能远小于 1000 个（例如 400 个）。

这是我有困难的地方。我不知道是否有办法将纬度/经度转换为托管 Google 地球插件的 WebBrowser 控件的客户端坐标。我知道对于鼠标事件，我可以使用客户端坐标，但在这种情况下不涉及鼠标事件。

有人知道如何实现这一目标吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T22:44:26.890

您尝试用于解决问题的方法不正确。但是有几个选项：

采用您当前的方法 - 您有两种选择：

1.  您可以要求当前视图将给定的纬度/经度转换为屏幕 X/Y。

    [https://developers.google.com/earth/documentation/reference/interface_g_e_view#a8c39d0324f2350c54fe2de981f1be418](https://developers.google.com/earth/documentation/reference/interface_g_e_view#a8c39d0324f2350c54fe2de981f1be418)

2.  您可以将客户端鼠标坐标作为从类中触发的 KML 鼠标事件的一部分`GEWindow`：

    [https://developers.google.com/earth/documentation/reference/interface_g_e_window-members](https://developers.google.com/earth/documentation/reference/interface_g_e_window-members)

    被触发的`KMLMouseEvent`包含客户端 X/Y 空间：

    [https://developers.google.com/earth/documentation/reference/interface_kml_mouse_event](https://developers.google.com/earth/documentation/reference/interface_kml_mouse_event)

正确的方法是将 KML 区域标签添加到您的地标，以便地标在用户平移/缩放等时显示/隐藏。

[http://www.google.com/earth/outreach/tutorials/region.html](http://www.google.com/earth/outreach/tutorials/region.html)

# java - 匹配包含子域的 URL

> ID：12302567
> 
> 赞同：0
> 
> 时间：2012-09-06T14:41:20.563
> 
> 标签：java, python, regex

我希望以下正则表达式匹配包含子域的 URL，但不匹配没有子域的 URL：

```
"^https?://(?:www\.)?(.*\.lexpress\.fr).*" 
```

即匹配：

```
http://blah.lexpress.fr/whatever/test.html 
```

不符合：

```
http://www.lexpress.fr/whatever/test.html 
```

我在 Java 和 Python 中都尝试过，并且两个 URL 都匹配 - 为什么会这样，我需要如何更改表达式以仅匹配第一个。

谢谢，

/大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:48:22.343

您需要一个[否定的前瞻性断言](http://www.regular-expressions.info/lookaround.html)：

```
"^https?://(?!www\.)(.*\.lexpress\.fr).*" 
```

这匹配字符后面*没有* 的任何字符串。`www.``://`

Python演示：

```
>>> import re
>>> subdomain = re.compile(r"^https?://(?!www\.)(.*\.lexpress\.fr).*")
>>> subdomain.match('http://www.lexpress.fr') is None
True
>>> subdomain.match('http://lexpress.fr') is None
True
>>> subdomain.match('http://subdomain.lexpress.fr').groups()
('subdomain.lexpress.fr',)
>>> subdomain.match('https://nested.subdomain.lexpress.fr').groups()
('nested.subdomain.lexpress.fr',) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:53:04.763

您可以使用：

```
import re
p = re.compile(r'^https?://((?!www\.).*\.lexpress\.fr).*')
m = p.match('https://www.lexpress.fr')
print m
>>> None 
m = p.match('https://abc.lexpress.fr')
print m.group()
>>> 'https://abc.lexpress.fr.com' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T15:04:48.107

试试这个

```
^(http[s]?://)?(www\.)?[a-zA-Z0-9-\.]+\.(com|org|net|mil|edu|ca|co.uk|com.au|fr|gov|br)\\?[a-zA-Z0-9-\.]*$ 
```

您可以匹配我们可以测试的任何网址：[test regex here](http://tools.lymas.com.br/regexp_br.php#)

# c# - 检测“组合框”所选项目的变化

> ID：12302568
> 
> 赞同：0
> 
> 时间：2012-09-06T14:41:20.027
> 
> 标签：c#, winforms, combobox

我有一个[`ComboBox`](https://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedindexchanged.aspx)我从数据库中填充的项目。我想知道所选项目是否与我最初显示`ComboBox`. 我怎样才能确定这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:44:19.243

这并不简单-尝试处理 EndEdit 事件/但您无法处理下拉列表中的选择更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:47:26.463

您可以尝试将默认值存储在 .Tag 属性中，并在需要时比较两者。

# iphone - 在导航栏上添加两个或更多按钮

> ID：12302571
> 
> 赞同：0
> 
> 时间：2012-09-06T14:41:34.280
> 
> 标签：iphone, ipad, uinavigationbar

> **可能重复：**
> [在导航栏上添加两个以上的按钮](https://stackoverflow.com/questions/6249416/adding-more-than-two-button-on-the-navigationbar)

**如何在导航栏上再添加两个按钮？**. 我的代码如下。如果我使用 rightBarButtonItem 方法，则项目没有问题。

```
UIBarButtonItem *barPrint = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"tool_print.png"]
                                                                     style:UIBarButtonItemStylePlain
                                                                    target:self
                                                                    action:@selector(printAttach:)];
        UISwitch *OnOff = [[UISwitch alloc] init];
        UIBarButtonItem *barOnOff = [[UIBarButtonItem alloc] initWithCustomView:OnOff];

        //[onoff1 addTarget: self action: @selector(flip:) forControlEvents:UIControlEventValueChanged];
        self.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:barOnOff, barPrint, nil];
        [OnOff release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:26:56.350

```
 UIView *iv = [[UIView alloc] initWithFrame:CGRectMake(0,0,32,32)];
 [iv setBackgroundColor:[UIColor whiteColor]];
  self.navigationItem.titleView = iv; 
```

# excel - 有条件地附加到现有的串联列字符串

> ID：12302572
> 
> 赞同：0
> 
> 时间：2012-09-06T14:41:35.307
> 
> 标签：excel

MS excel：使用&（连接）功能：我已将 5 列（B 到 F）附加到我的第 1 列（A），但要附加第 7 列（G），我只想在它具有某些值时附加它，否则避免在现有附加的 Ist 列中附加这 7 列（已经附加了 5 列（B 到 F））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:49:55.747

试试这个公式 A2

`=B2&C2&D2&E2&F2&IF(G2="","","NAME IS: ")&G2`

# javascript - mousemove 在 IE8 及以前的版本中是如何处理的？

> ID：12302573
> 
> 赞同：1
> 
> 时间：2012-09-06T14:41:35.387
> 
> 标签：javascript, internet-explorer, events, internet-explorer-8, event-handling

[http://www.quirksmode.org/dom/events/mousemove.html](http://www.quirksmode.org/dom/events/mousemove.html)在 IE8 上为文档而不是窗口处理了 mousemove 事件，但我目前有：

```
 try
        {
        document.onmousemove = drag.on_mouse_move;
        }
    catch(error)
        {
        if (typeof document.attachEvent !== undefined)
            {
            document.attachEvent("onmousemove", drag.on_mouse_move);
            }
        } 
```

第一个真正的语句在 IE8 中引发错误，最后一个语句也是如此。后一个错误声称类型不匹配；前一个错误抛出“未实现”。

我如何/应该在 IE8(/7/6) 中注册 mousemove 事件侦听器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:52:00.507

你不应该支持IE6，甚至MS都放弃了那个浏览器，谢天谢地。我刚刚在 IE8 中尝试了以下代码：

```
if (document.attachEvent)
{
    document.attachEvent('onmousemove',function(e)
    {
        e = e || window.event;
        alert(e.type);
    });
} 
```

它就像一个魅力。只是一个提示：*正常*的try-catch 序列是：

```
try
{//FF, webkit, opera, IE>8
    document.addEventListener('mousemove',function(){},false);
}
catch (e)
{//IE >6 (7?)
    document.attachEvent('onmousemove',function(){});
}
finally
{//browsers that must die
    try
    {
        document.onmousemove = function(){};
    }
    catch(die)
    {
        alert('Use a decent browser.');
        location.href = 'http://www.mozilla.org/en-US/firefox/new/';
    }
} 
```

attachEvent 用于委托，在大多数情况下优先于直接绑定。

# javascript - 任何人都知道 IE7 设置或更新/补丁会阻止 IE 因为 jquery 错误而无法加载页面？

> ID：12302575
> 
> 赞同：0
> 
> 时间：2012-09-06T14:41:44.247
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-8, internet-explorer-7

这可能是一个很难回答的问题，但是关于[这个问题，有没有人知道在 IE 之前执行](https://stackoverflow.com/q/12292649/985284)*javascript*（更准确地说是 JQuery DateTime Picker）时，哪些更新或设置修复/防止 Internet Explorer 抛出错误而不加载页面加载整个页面？

无需重复很多我的链接问题，我有一个网站，IE6、IE7（没有更新）和一些 IE8 浏览器停止呈现页面并显示此错误

> Internet Explorer 无法打开 Internet 站点 XXX。操作中止

负责的脚本错误是这样的：

> 消息：HTML 解析错误：在关闭子元素之前无法修改父容器元素 (KB927917)

我创建了一个新的*Windows XP*虚拟机并升级到 IE7（没有安装更新），因为我无法在我的测试系统的 IE7 上重现错误。而这个新的 IE7 VM 收到了错误。但是，在关闭时，VM 安装了更新，并且在下次重新启动时，我无法重现该错误。因此，我确信全新安装的 IE7 会收到此错误，并且相当基本的 [基本的意思是系统不需要再次重新启动并安装更多更新，] 更新会阻止它。

我还认为它们也可能是会导致/防止此错误的设置。我有可靠的报告说一些运行 IE8 的系统也遇到了这个问题。但是我无法生产它。

所以我的问题是，有谁知道哪些更新和/或 Internet Explorer 设置会抑制/防止此问题？我知道**为什么**会发生这种情况，但是我对修复/防止 IE 的行为感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:42:53.010

就我而言，我发现 html 的评论语句没有关闭。所以我只是关闭它并解决问题祝你好运

# delphi - 如何为显示为进度条的网格单元激活就地编辑器？

> ID：12302578
> 
> 赞同：10
> 
> 时间：2012-09-06T14:41:56.047
> 
> 标签：delphi, progress-bar, inplace-editing

我的 DBTreeListView 中的一个单元格绑定到作为进度条的存储库项。

我希望能够通过单击此单元格来编辑显示的进度。在这个阶段，我的应用程序应该将其单元格更改为另一个存储库项：我可以在其中插入值的文本字段。一旦焦点改变到另一个单元格，我的进度条应该再次显示，显示一个新值。我该怎么做呢？

DBTreeListView 具有列事件`OnGetEditingProperty`和`OnGetEditProperties`. 我可能会使用其中一个（或两个），但想不出任何好主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T04:18:50.047

这可以很简单。您应该处理单击此进度条并在其上显示编辑器。您需要在另一个地方处理滚动和单击以摆脱编辑器。如果滚动太远 - 应该隐藏编辑器。

脚步：

1.  为进度创建隐藏编辑器
2.  处理树视图项的 OnClick
3.  显示编辑器并设置焦点
4.  在编辑器上输入（或选项卡）保存进度信息
5.  单击表单或树视图的其他部分 - 隐藏编辑器（保存/丢弃更改如何由您的策略指定）
6.  在滚动树视图上移动编辑器，当父级的边界不与编辑器的边界重叠时 - 隐藏它

最好的问候，弗拉基米尔

# java - Android 手机无法从我们的应用 (VAS-App) 接收彩信，而功能手机则可以

> ID：12302579
> 
> 赞同：-2
> 
> 时间：2012-09-06T14:41:58.287
> 
> 标签：java, android, soap, mms, mm7

我们为移动运营商开发了一个应用程序（VAS App）。当用户使用该应用程序时，他最终会收到一条彩信。如果用户有功能手机，这将正常工作。但是，如果用户使用 Android 手机，他就不会收到彩信。只有关于彩信的通知。但无法下载彩信。

请帮助我。我们现在遇到了大麻烦，无法确定问题出在哪里。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T16:17:37.403

**知道发送带有 SMIL 消息的肥皂将解决问题。** 但同样的问题是如何将 SMIL 消息附加到 java 中的 SOAP。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:43:01.297

Android 不喜欢 MMS 消息的格式有些不协调。我对 VAS-Apps 了解不多，无法提供太多帮助，但您可能能够：

1.  比较两种彩信格式，一种有效，一种无效，找出差异
2.  查看 Android 源代码以了解它如何处理 MMS

# process - 如何在 Erlang 中分叉/克隆进程

> ID：12302583
> 
> 赞同：2
> 
> 时间：2012-09-06T14:42:05.017
> 
> 标签：process, erlang, fork

如何在 Erlang 中分叉/克隆一个进程，就像`fork`在 Unix 中一样？

我搜索了很多，但一无所获。

也许用法如下所示：

```
case fork() of
  {parent, Pid} ->
    in_parent_process_now();
  {child, Pid} ->
    in_child_process_now();
  {error, Msg} ->
    report_fork_error(Msg)
end. 
```

有任何想法吗？

编辑：

为了更好地解释我的观点，以下面的 C 代码为例：

```
f();
fork();
g(); 
```

这里的返回值`fork()`被忽略了，所以父进程和子进程接下来的步骤都是一样的，都是执行`g()`。

我可以在 Erlang 中实现这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T15:53:21.707

（这个问题[也在 erlang-questions 邮件列表中得到了回答](http://erlang.org/pipermail/erlang-questions/2012-September/069025.html)。）

Erlang 没有“分叉”操作。但是它有一个`spawn`操作：

```
parent_process() ->
  will_be_executed_by_parent_process(),
  spawn(fun() -> will_be_executed_by_child_process() end),
  will_also_be_executed_by_parent_process(). 
```

...其中函数名称显示它们将在什么上下文中执行。请注意，传递给子进程的任何数据都将被*复制*到新进程的堆中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T16:12:07.550

如您所知，在 erlang 中实现流程有一个通用模式：

```
loop( State ) ->
   receive
      Message ->
         NewState = process( Message, State ),
         loop( NewState )
   end. 
```

在每个 quant 时间过程中都有一个`State`. 因此，如果您想从当前“分叉”某些流程 - 您必须为其传递特定消息。进程必须识别该消息并在生成的进程中使用其当前状态的副本生成新进程。

我创建了示例，以说明上面的文字：

```
-module( test ).
-export( [ fork/1, get_state/1, change_state/2 ] ).
-export( [ loop/1 ] ).

loop( State ) ->
        receive
                { fork, Sender } ->
                        %%
                        %% if you want to link with child process
                        %% call spawn_link instead of spawn
                        %%
                        ClonePid = spawn( ?MODULE, loop, [ State ] ),
                        responseTo( Sender, ClonePid ),
                        loop( State );

                { get_state, Sender } ->
                        responseTo( Sender, { curr_state, State } ),
                        loop( State );

                { change_state, Data, Sender } ->
                        { Response, NewState } = processData( Data, State ),
                        responseTo( Sender, Response ),
                        loop( NewState )
        end.

fork( Pid ) ->
        Ref = make_ref(),
        Pid ! { fork, { Ref, self() } },
        get_response( Ref ).

get_state( Pid ) ->
        Ref = make_ref(),
        Pid ! { get_state, { Ref, self() } },
        get_response( Ref ).

change_state( Pid, Data ) ->
        Ref = make_ref(),
        Pid ! { change_state, Data, { Ref, self() } },
        get_response( Ref ).

get_response( Ref ) ->
        receive
                { Ref, Message } -> Message
        end.

responseTo( { Ref, Pid }, Mes ) ->
        Pid ! { Ref, Mes }.

processData( Data, State ) ->
        %%
        %% here comes logic of processing data
        %% and changing process state
        %%
        NewState = Data,
        Response = { { old_state, State }, { new_state, NewState } },
        { Response, NewState }. 
```

让我们在 erlang shell 中测试它：

```
1> c(test).
{ok,test} 
```

创建具有初始状态的父进程`first_state`

```
2> ParentPid = spawn( test, loop, [ first_state ] ).
<0.38.0>
3> test:get_state( ParentPid ).
{curr_state,first_state}
4> 
```

让我们将父进程的状态更改为`second_state`：

```
4> test:change_state( ParentPid, second_state ).
{{old_state,first_state},{new_state,second_state}} 
```

从父进程分叉新进程：

```
5> ChildPid = test:fork( ParentPid ).
<0.42.0> 
```

检查分叉进程的状态（与父进程相同）：

```
6> test:get_state( ChildPid ).
{curr_state,second_state} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:03:25.097

Erlang 中没有分叉。但是您可以使用作为 erlang 的 BIF 的 spawn/1、spawn/2、spawn/3、spawn/4（另请参阅 spawn_link）中的一个，[请参阅 erlang 模块](http://www.erlang.org/doc/man/erlang.html)。

因此，例如：

```
-module(mymodule).
-export([parent_fun/0]).

parent_fun() ->
    io:format("this is the parent with pid: ~p~n", [self()]),
    spawn(fun() -> child_fun() end),
    io:format("still in parent process: ~p~n", [self()]).

child_fun() ->
    io:format("this is child process with pid: ~p~n", [self()]). 
```

在 erlang shell 中执行如下：

```
mymodule:parent_fun(). 
```

请注意，父进程和子进程具有不同的 pid。

我强烈建议您阅读： http: [//learnyousomeerlang.com/the-hitchhikers-guide-to-concurrency](http://learnyousomeerlang.com/the-hitchhikers-guide-to-concurrency)

# c# - DataRow 上的复杂 LINQ

> ID：12302587
> 
> 赞同：2
> 
> 时间：2012-09-06T14:42:13.783
> 
> 标签：c#, linq

不确定这是否可行，但我有一个 DataRow `row`，我想检索列名以“FK”开头的所有值的字符串数组。

这是可行的还是我对 LINQ 有很多要求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:49:56.813

怎么样：

```
DataRow row = ...

var values = from DataColumn column in row.Table.Columns
             where column.ColumnName.StartsWith("FK")
             select Convert.ToString(row[column]);

var valueArray = values.ToArray(); 
```

如果您希望将结果作为地图，您可以执行以下操作：

```
var result = row.Table
                .Columns
                .Cast<DataColumn>()
                .Where(column => column.ColumnName.StartsWith("FK"))
                .ToDictionary(column => column.ColumnName,
                              column => Convert.ToString(row[column])); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:51:36.247

```
DataTable dt = new System.Data.DataTable();
dt.Columns.Add("FKStuff");
dt.Columns.Add("OtherStuff");
dt.Columns.Add("FKAndMoreStuff");

var row = dt.Rows.Add("ABC", "DEF", "GHI");
var vals = dt.Columns.Cast<DataColumn>().Where(c => c.ColumnName.StartsWith("FK")).Select(col => row[col]).ToArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T14:51:37.307

你可以使用这个：

```
var values = row.Table.Columns.Cast<DataColumn>()
                .Where(x => x.ColumnName.StartsWith("FK"))
                .Select(x => row[x].ToString())
                .ToArray(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T14:53:27.773

```
var sa = (from DataColumn x in row.Table.Columns
          where x.ColumnName.StartsWith("FK")
          select row[x].ToString()).ToArray(); 
```

这里的逻辑是获取名称以“FK”开头的那些列的序列，然后对于其中的每一个，选择该列的行值，将其转换为字符串，然后从结果中创建一个数组。如果您不需要实际的数组，则不要使用`.ToArray()`和 额外的一组括号。

# java - 预定义和随机对象放置算法

> ID：12302589
> 
> 赞同：0
> 
> 时间：2012-09-06T14:42:19.523
> 
> 标签：java, algorithm, libgdx

我已经使用 libgdx复制了经典的[直升机游戏。](http://www.addictinggames.com/action-games/helicoptergame.jsp)这相当容易。现在我想修改它，使障碍物的位置混合预定义和随机生成的位置。通过这种方式，我还可以为预定义的障碍组放置具有漂亮图案的硬币。

为此，我需要在屏幕上使用障碍物大小来虚构网格。然后为障碍物和硬币创建一些预定义位置组。也许创建 10 组这些预定义的级别。一定时间内随机展示一次，让玩家有不一样的感受。

我的问题是如何在考虑不同尺寸、分辨率和密度的手机屏幕上创建虚构的网格？

注意请不要给我 android 开发者页面的链接，以便阅读不同尺寸以及如何处理它们。我已经读了很多遍，但仍然偶尔会读一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:05:19.423

您可以通过对网格使用相对值而不是绝对值来考虑不同尺寸的屏幕。例如，您可以将单元格的高度设置为 screenHeight/8，而不是“40”。这样，无论屏幕是 320 像素还是 400 像素高，您仍然可以确定您的网格将是 8 个“框”高。

# ruby-on-rails - 如何重构这个 Rails 代码？

> ID：12302590
> 
> 赞同：0
> 
> 时间：2012-09-06T14:42:19.983
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refactoring

考虑这个辅助方法：

```
module SomeHelper

  def display_button
    Foo.find_by_id params[:id] and Foo.find(params[:id]).organizer.name != current_name and Foo.find(params[:id]).friends.find_by_name current_name
  end

end 
```

如何重构为更具可读性的东西？

导轨 3.2.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:51:34.823

像这样的东西？

```
module SomeHelper

  def display_button?
    if foo = Foo.find(params[:id])
      foo.organizer.name != current_name if foo.friends.find_by_name(current_name)
    end
  end

end 
```

**注意：**如果辅助方法返回一个布尔值，我会在名称后面附加一个`?`... ruby​​ 约定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:52:33.923

您可以分解调用`Foo.find(params[:id])`并`exists?`用于第三个条件

```
module SomeHelper
  def display_button
    foo = foo.find_by_id params[:id]
    foo and foo.organizer.name != current_name and foo.friends.where(:name => current_name).exists?
  end
end 
```

您还可以创建几种方法来获得可重用性（并且如果您更改模型将节省麻烦）：

```
module SomeHelper
  def display_button
    foo = foo.find_by_id params[:id]
    foo && !is_organizer?(foo, current_name) && has_friend?(foo, current_name)
  end

  def is_organizer?(foo, name)
    foo.organizer.name == name
  end 

  def has_friend?(foo, name)
    foo.friends.where(:name => name).exists?
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:51:51.610

try 在非 nil 对象上调用传递的块。否则返回 nil。因此，根据您的数据，返回将为 nil、true、false。

```
def display_button
    Foo.find_by_id(params[:id]).try do |foo|
       foo.organizer.name != current_name && 
         foo.friends.find_by_name current_name
    end
  end 
```

# c - fopen 文件名错误

> ID：12302596
> 
> 赞同：0
> 
> 时间：2012-09-06T14:42:37.723
> 
> 标签：c

这段代码有什么错误？我只是 C 语言的新手。

```
#define FNAME         "c:\\users\\mahmud\\desktop\\CDs\\"
#define READ_BIN      "rb"

static void open_existing_list()
{
char name[11];
FILE *fptr;

printf("\nPlease enter list name: ");
fflush(stdin);
scanf("%s", name);

fptr = fopen(FNAME name ".dat", READ_BIN);
} 
```

此代码用于从用户那里读取文件名，然后打开此文件。

```
 D:\Mhmud\Mahmud\Programming\C\Videos\VTC - C  Programming\Course_Project\main.c In function `open_existing_list': 
75 D:\Mhmud\Mahmud\Programming\C\Videos\VTC - C  Programming\Course_Project\main.c syntax error before "name" 
 D:\Mhmud\Mahmud\Programming\C\Videos\VTC - C  Programming\Course_Project\Makefile.win [Build Error]  [main.o] Error 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:44:37.970

```
#define FNAME         "c:\\users\\mahmud\\desktop\\CDs\\
                                                        ^
You're missing the ending quotation mark here: ---------+ 
```

（编辑：它似乎只是一个复制粘贴错字。）

添加缺少的报价并修复此问题：

```
fptr = fopen(FNAME name ".dat", READ_BIN); 
```

这仅适用于字符串文字，因为连接发生在编译时。你想写这样的东西：

```
char fname[512];
snprintf(fname, sizeof(fname), "%s%s.dat", FNAME, name);
fptr = fopen(fname, READ_BIN); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T14:44:12.703

您不能将字符串文字（`FNAME`宏扩展）与变量连接起来。

要连接涉及变量的字符串，您需要做更多的工作。查找`strcat()`函数，或`snprintf()`。后者更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T14:44:04.233

> ```
> fptr = fopen(FNAME name ".dat", READ_BIN); 
> ```

您只能像这样连接**字符串文字**，而`name`不是字符串文字。使用`sprintf`或`strcat`来构建你的路径。

```
char path[LENGTH];
snprintf(path, sizeof(path), "%s%s.dat", FNAME, name); 
```

# spring - Spring Mybatis Tomcat - 不使用 Spring 的事务

> ID：12302598
> 
> 赞同：4
> 
> 时间：2012-09-06T14:42:43.613
> 
> 标签：spring, tomcat, transactions, mybatis

Spring Transaction 不适用于使用 TOMCAT 进行的以下配置。

```
spring: version: 3.1.2.RELEASE
spring.ws:version:2.0.5.RELEASE
Mybatis: version:3.1.1
Database: Oracle 11g
Datasource connection:com.oracle.ojdbc6.11.2.0
Server : Tomcat : apache-tomcat-6.0.32 
```

我们正在尝试使用 AOP 声明式事务实现来创建事务服务。设置在集成测试期间按预期创建事务时工作正常，但是在使用端点从 SoapUi 运行测试时，在本地服务器（Tomcat）上，所有事务都是非事务性的（可以在日志文件中看到相同的内容）

春天-DAOS.xml

```
 xml version="1.0" encoding="UTF-8"
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:aop="http://www.springframework.org/schema/aop"
xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd 
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

<!-- enable the configuration of transactional behavior based on annotations -->
<tx:annotation-driven transaction-manager="mywebappActiveTransactionManager" />

<aop:aspectj-autoproxy/>

<!-- ensure that the above transactional advice runs for any execution
of an operation defined by the Service interface -->
<aop:config>
    <aop:pointcut id="transactionalOperation" expression="execution(* com.org1.org2.mywebappgate.services.*.*(..)) "/>
    <aop:advisor advice-ref="txAdvice" pointcut-ref="transactionalOperation"/>
</aop:config>

<!-- the transactional advice (what 'happens'; see the <aop:advisor/> bean below) -->
<tx:advice id="txAdvice" transaction-manager="mywebappActiveTransactionManager">
    <tx:attributes>
        <tx:method name="*" rollback-for="SQLException"/>
        <!-- <tx:method name="*" read-only="false" propagation="REQUIRED" /> -->
        <!--  <tx:method name="*" read-only="false" propagation="REQUIRED" />  -->
    </tx:attributes>
</tx:advice>

<jee:jndi-lookup id="mywebappActiveDataSource" jndi-name="java:/comp/env/jdbc/mywebapp-active" /> 

<bean id="mywebappActiveTransactionManager"
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="mywebappActiveDataSource" />
</bean>

<bean id="mywebappActiveSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="mywebappActiveDataSource" />
    <property name="configLocation" value="classpath:mybatis-config.xml" />
</bean>

<bean id="mywebappActiveMapperScannerConfigurer" class="org.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="basePackage" value="com.org1.org2.mywebappgate.dao" />
    <property name="sqlSessionFactoryBeanName" value="mywebappActiveSessionFactory" />
</bean> 
```

Tomcat 上下文.xml

```
<Context>

<!-- Default set of monitored resources -->
<WatchedResource>WEB-INF/web.xml</WatchedResource>

<Resource auth="Container" driverClassName="oracle.jdbc.driver.OracleDriver" maxActive="20" maxIdle="10" maxWait="-1" name="jdbc/mywebapp-active" password="xxxxxx" type="javax.sql.DataSource" url="jdbc:oracle:thin:@mywebappdc1.company:1521:mywebappdc1" username="xxxxxx"/> 
```

mybatis-config.xml

```
<!DOCTYPE configuration
PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>
<settings>
    <!-- changes from the defaults -->
    <setting name="lazyLoadingEnabled" value="false" />
</settings>

<mappers>
    <mapper resource="company/mywebappgate/dao/SimpleCommentDao.xml" /> 
    <mapper resource="company/mywebappgate/dao/CommentDao.xml"/>
    <mapper resource="company/mywebappgate/dao/ARDAO.xml"/>
    <mapper resource="company/mywebappgate/dao/ASIndicatorsDao.xml"/>
</mappers> 
```

Junit测试日志：

```
org.mybatis.spring.SqlSessionUtils: Creating a new SqlSession
org.mybatis.spring.SqlSessionUtils: Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c3c44]
org.mybatis.spring.transaction.SpringManagedTransaction: JDBC Connection [oracle.jdbc.driver.T4CConnection@1d5d765] will be managed by Spring
org.mybatis.spring.SqlSessionUtils: Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c3c44]
org.mybatis.spring.SqlSessionUtils: Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c3c44] from current transaction
org.mybatis.spring.SqlSessionUtils: Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c3c44]
org.mybatis.spring.SqlSessionUtils: Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c3c44]
org.springframework.context.support.GenericApplicationContext: Closing org.springframework.context.support.GenericApplicationContext@1b4fad5: startup date [Wed Sep 05 14:16:30 EDT 2012]; root of context hierarchy
org.springframework.beans.factory.support.DefaultListableBeanFactory: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@69d02b: defining beans [org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,transactionalOperation,org.springframework.aop.support.DefaultBeanFactoryPointcutAdvisor#0,txAdvice 
```

雄猫日志：

```
org.mybatis.spring.SqlSessionUtils: Creating a new SqlSession
org.mybatis.spring.SqlSessionUtils: SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e55d39] was not registered for synchronization because synchronization is not active
org.mybatis.spring.transaction.SpringManagedTransaction: JDBC Connection [jdbc:oracle:thin:@mywebapp1.company:1521:mywebapp1, UserName=user, Oracle JDBC driver] will not be managed by Spring
org.mybatis.spring.SqlSessionUtils: Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e55d39]
org.mybatis.spring.SqlSessionUtils: Creating a new SqlSession
org.mybatis.spring.SqlSessionUtils: SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b02a6] was not registered for synchronization because synchronization is not active
org.mybatis.spring.transaction.SpringManagedTransaction: JDBC Connection [jdbc:oracle:thin:@mywebappdc1.company:1521:mywebappdc1, UserName=mywebappSOA01, Oracle JDBC driver] will not be managed by Spring 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T10:15:28.903

Should not need to configure the xml in mybatis-*.xml if you are using Spring. You just need to include one property in mywebappActiveSessionFactory:

```
<property name="mapperLocations" 
          value="classpath*:company/mywebappgate/dao//*Mapper.xml"/> 
```

Your mybatis-config.xml will then be

```
<!DOCTYPE configuration
PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>
<settings>
    <!-- changes from the defaults -->
    <setting name="lazyLoadingEnabled" value="false" />
</settings> 
```

# .net - 无法将 Windows 窗体设计器与用 C++/CLI 编写的用户控件一起使用

> ID：12302600
> 
> 赞同：0
> 
> 时间：2012-09-06T14:42:46.497
> 
> 标签：.net, winforms, c++-cli, windows-forms-designer

我用 C++/CLI 写了一个类，它继承自`System.Windows.Forms.UserControl`. 它工作正常，但每当我尝试在设计器视图中查看包含此控件的某个表单时，它会因以下错误而崩溃：

![设计师错误](../Images/93b618208d766471e1c9e51a524ee23c.png)

如果我单击“转到代码”，我会被发送到`MainForm.Designer.cs`，在`mConsole`我的控件实例添加到表单的行中。有人告诉我它没有声明，但在下面几行就完成了。`BeginInit`是 new'ing 之后调用的第一个函数`mConsole`，因此`Init`在设置所有属性之前调用。一切看起来都在这一端。

控件的 dll 是使用`/clr`开关构建的，使用它的 Windows 窗体项目具有引用集。它每次都能完美地构建和运行。唯一的问题是设计视图。每次我需要添加一些组件时，我都必须手动编辑设计器文件，这真的很麻烦。

这是我的一些控件的代码：

```
//Console.h
namespace MConsole {
public ref class MCConsole :    public System::Windows::Forms::UserControl,
                                public System::ComponentModel::ISupportInitialize {
public:
    MCConsole();
    virtual ~MCConsole();
    !MCConsole();
    //Skipping custom properties and methods...
    virtual void BeginInit();
    virtual void EndInit();
protected:
    virtual void OnPaint( System::Windows::Forms::PaintEventArgs ^ pe ) override;
};

//Console.cpp
#include "Console.h"

void MCConsole::Init(){
    if( m_bInitialized )
        return;
    // Initialize native instance
    m_pNativeInstance->Init( (HWND)this->Handle.ToPointer() );
    m_bInitialized = true;
    // Initialize timer
    m_TimerTickHandler = gcnew System::EventHandler( this, &MCConsole::Render );
    m_Timer.Tick += m_TimerTickHandler;
    m_Timer.Interval = Math::Round<float, int>(1000.0f/FRAMES_PER_SECOND);
    m_Timer.Start();
    // Initialize event handlers
    m_MouseWheelHandler = gcnew System::Windows::Forms::MouseEventHandler( this, &MCConsole::MouseWheelHandlerZoom );
    this->MouseWheel += m_MouseWheelHandler;
    m_ResizeHandler = gcnew System::EventHandler( this, &MCConsole::Resize );
    this->SizeChanged += m_ResizeHandler;
    m_MouseDownHandler = gcnew System::Windows::Forms::MouseEventHandler( this, &MCConsole::MouseDownHandler );
    this->MouseDown += m_MouseDownHandler;
    m_MouseLeaveHandler = gcnew System::EventHandler( this, &MCConsole::MouseLeaveHandler );
    this->MouseLeave += m_MouseLeaveHandler;
    m_MouseMoveHandler = gcnew System::Windows::Forms::MouseEventHandler( this, &MCConsole::MouseMoveHandler );
    this->MouseMove += m_MouseMoveHandler;
    m_MouseUpHandler = gcnew System::Windows::Forms::MouseEventHandler( this, &MCConsole::MouseUpHandler );
    this->MouseUp += m_MouseUpHandler;
    m_KeyPressHandler = gcnew System::Windows::Forms::KeyPressEventHandler( this, &MCConsole::KeyPressHandler );
    this->KeyPress += m_KeyPressHandler;
    m_DropHandler = gcnew System::Windows::Forms::DragEventHandler( this, &MCConsole::DropHandler );
    this->DragDrop += m_DropHandler;
    m_VisibleChangedHandler = gcnew System::EventHandler( this, &MCConsole::VisibleChangedHandler );
    this->VisibleChanged += m_VisibleChangedHandler;
    // Initialize layout wrapper
    m_hRegionLayout = gcnew MCLayout( *m_pNativeInstance->getRegionLayout() );
    m_bInitialized = true;
}

void MCConsole::BeginInit(){
    Init();
}

void MCConsole::EndInit(){}

void MCConsole::OnPaint( System::Windows::Forms::PaintEventArgs ^ pe ) {
    System::Windows::Forms::UserControl::OnPaint( pe );
    if( m_bInitialized )
        m_pNativeInstance->Refresh();
} 
```

我错过了什么或搞砸了什么？或者如何调试 Designer 崩溃？

**更新**：我刚刚尝试启动另一个 Visual Studio 实例并附加到另一个 VS 的进程。我将前者配置为中断各种异常，我注意到当我打开设计视图时，我得到**'System.MissingMethodException' 和 Additional information: Attempted to access a missing member**。最终导致（点击继续）屏幕截图中的消息。如果我知道缺少哪种方法就好了……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:33:06.793

它正在查找 DLL 的旧副本。也许工具箱文件夹有一个旧副本，将其从工具箱中删除并重新添加。也许 GAC 有一个旧副本，如果它在运行时运行良好，则不太可能。

如果找不到，请从 Visual Studio 命令提示符运行 Fuslogvw.exe。记录所有绑定，以便您可以查看 CLR 从何处检索程序集。

# c# - 为什么.Concat 方法的返回值类型看起来有点奇怪：System.Linq.Enumerable+(...)？

> ID：12302619
> 
> 赞同：4
> 
> 时间：2012-09-06T14:43:33.857
> 
> 标签：c#, .net, linq, extension-methods, concat

我有 2 个实例：

> ```
>  foo and bar 
> ```

它们的类型是：

```
 foo.GetType().ToString() 
```

返回： **System.Collections.Generic.List`1[MyNameSpace.MyClass]**

```
bar.GetType().ToString() 
```

返回： **System.Collections.Generic.List`1[MyNameSpace.MyClass]**

当我连接它们时：

```
var foobar = foo.Concat(bar); 
```

GetType() 返回 **System.Linq.Enumerable+d__71`1[MyNameSpace.MyClass]**

**问题**：这是什么意思？它不应该是 IEnumerable 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T14:47:11.067

不要混淆声明的返回类型和返回值的实际类型。`Concat`被声明为 return `IEnumerable<T>`，但它实际上返回实现的具体类型的实例`IEnumerable<T>`。`GetType`返回具体类型，而不是声明的返回类型。

至于奇怪的名字，`Concat`是用一个[迭代器块](http://msdn.microsoft.com/en-us/library/dscyy5s0.aspx)来实现的，而迭代器块是由编译器转换成具有类似这样名字的类型的`Enumerable+d__71`implement `IEnumerable<T>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:59:02.510

除了 Thomas 的回答，请注意名称的“`1”部分表示通用参数的数量。每个通用参数的类型在括号“[...]”中。

# nlp - NLTK 可以用来分析某个词在句子中的情绪吗？

> ID：12302622
> 
> 赞同：0
> 
> 时间：2012-09-06T14:43:37.987
> 
> 标签：nlp, nltk

我有一个快速的问题，在互联网上的任何地方都找不到答案：

NLTK 可以用来分析某个词在句子中的情绪吗？

喜欢：对 iPhone 的看法：“即使外面的天气很糟糕，我的 iPhone 让我再次感觉良好。” = 情绪：积极

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:55:07.870

您是否想过将文本分解为子句（“外面天气很糟糕”、“我的 iphone 让我再次感觉良好”），并分别评估它们？您可以为此使用 NLTK 的解析器。但是，这将减少您必须分析的文本量，因此最终可能弊大于利。

在“Microsoft Surface 不是 iPad，它很糟糕”（您的目标是“iPad”）这样的情况下，这对您没有帮助，因为情绪是负面的，但 iPad 在比较中胜出。所以也许你还想检查句法分析，只检查你的目标词是主语或宾语的句子。我认为这些是否会给您带来更好的性能是任何人的猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T04:00:22.350

我对 NLTK 没有太多经验，但我使用 Java 中的 NLP 库进行了一些概念级别的情感分析。[这](https://stackoverflow.com/questions/7594244/identifying-the-entity-in-sentiment-analysis-using-lingpipe/12100778#12100778)是我的做法。如果您能够识别 NLTK 中的依赖关系，那么同样的方法应该适用于您。这种方法适用于简单的规则，但可能不适用于复杂的句子。

# php - 在 wamp 上安装 coordino

> ID：12302623
> 
> 赞同：1
> 
> 时间：2012-09-06T14:43:47.203
> 
> 标签：php, apache

我找到了这个 stackoverflow 的克隆，它在 php 中（这就是我想要它的原因）。

我上周尝试安装它，但没有成功。我正在使用 wamp，mod_rewrite 已启用，并且我将 AllowOverride 全部放入。

但同样它不起作用。当我去本地主机时，我得到的输出是：

```
Warning (512): C:\wamp\www\app\tmp\cache\ is not writable [CORE\cake\libs\cache\file.php, line 267]
Warning (2): include_once(C:\wamp\www\app\config\database.php) [function.include-once]: failed to open stream: No such file or directory [CORE\cake\libs\model\connection_manager.php, line 23]
Warning (2): include_once() [function.include]: Failed opening 'C:\wamp\www\app\config\database.php' for inclusion (include_path='C:\wamp\www;C:\wamp\www\app\;.;C:\php\pear') [CORE\cake\libs\model\connection_manager.php, line 23]css('install.css');?> image('coordino_logo.png');?> 
changer de langue
link(__('english',true),'/lang/eng')?>
link(__('french',true),'/lang/fre')?>
flash(); ?> 
```

coordino 的下载代码在这里：[coordino](https://github.com/Datawalke/Coordino)

如果有人可以帮助我，请这样做。我需要的是有关如何安装此应用程序的教程。感谢您提供任何帮助和有用的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:22:14.530

您的 C:\wamp\www\app\config\ 文件夹中是否有 database.php 文件？该错误使它看起来好像没有。

确保将 database.php.default 文件重命名为 database.php，并确保它位于 C:\wamp\www\app\config\ 文件夹内。

# c - 使用递归的 ShuffleMerge

> ID：12302624
> 
> 赞同：0
> 
> 时间：2012-09-06T14:43:50.483
> 
> 标签：c, recursion, linked-list, tail-recursion

```
struct node* ShuffleMerge(struct node* a, struct node* b) {
struct node* result;
struct node* recur;
 if (a==NULL) return(b); // see if either list is empty
  else if (b==NULL) return(a);
  else {
  // it turns out to be convenient to do the recursive call first --
  // otherwise a->next and b->next need temporary storage.
  recur = ShuffleMerge(a->next, b->next);
  result = a; // one node from a
  a->next = b; // one from b
  return(result);
  }
} 
```

代码不起作用，无法访问 B 之后的元素...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:27:03.427

这是一个简单的“纸笔”调试会话，使用我能想到的最简单的非平凡输入：

```
S(a=1->2, b=3->4)                1->2 2->N 3->4 4->N
recur := S(2, 4)
   recur := S(a=N, b=N)
       return N
   recur := N
   result:= 2
   a     := 2->4                 1->2 2->4 3->4 4->N
recur := N
result:= 1->2->4
a     := 1->3->4                 1->3 2->4 3->4 4->N
return 1->3->4 
```

这是代码应该为这种情况做的吗？如果不是，为什么不呢？

我希望这种技术在将来有用。

# c# - WPF - 从变量类继承的类

> ID：12302625
> 
> 赞同：2
> 
> 时间：2012-09-06T14:44:02.627
> 
> 标签：c#, wpf, inheritance

我有一个应用程序可以以两种不同的方式显示项目，使用 StackPanel 的行或使用 WrapPanel 的图标。显示这些项目的方式取决于配置设置。为了填充这些面板，我有两个单独的类，一个继承自 WrapPanel，另一个继承自 StackPanel。我能够使用 Inferface 减少重复代码。但是我仍然有很多重复的代码，代码之间的唯一区别是对 StackPanel 或 WrapPanel 的引用。

我真正想做的是根据配置设置创建一个从 StackPanel 或 WrapPanel 继承的类。

```
public class ContainerBase : <wrap or stack>
{

//Do stuff!

} 
```

这可能吗？我是在错误地接近这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:55:44.290

您可以为此使用[泛型；](http://msdn.microsoft.com/en-us/library/512aeb7t%28v=vs.80%29.aspx)

```
public class ContainerBase<T>  where T : Panel 
```

然后，您可以使用配置设置来初始化正确的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:20:26.037

当我在第一条评论中说“组合而不是继承”时，我的意思是如下：

```
public class PanelPresentatinLogic
{
    public Panel Panel{get;set;}     

    public void DoSomeDuplicatingStuff()
    {
        //Do stuff! with Panel
    }    
}

public class SortOfStackPanel : StackPanel
{
    private readonly PanelPresentatinLogic _panelPresentatinLogic;

    public SortOfStackPanel(PanelPresentatinLogic presentationLogic)
    {
        _panelPresentatinLogic = presentationLogic;
        _panelPresentatinLogic.Panel = this;
    }

    public void DoSomeDuplicatingStuff()
    {
        _panelPresentatinLogic.DoSomeDuplicatingStuff();
    }
}

public class SortOfWrapPanel : WrapPanel
{
    private readonly PanelPresentatinLogic _panelPresentatinLogic;

    public SortOfWrapPanel(PanelPresentatinLogic presentationLogic)
    {
        _panelPresentatinLogic = presentationLogic;
        _panelPresentatinLogic.Panel = this;
    }

    public void DoSomeDuplicatingStuff()
    {
        _panelPresentatinLogic.DoSomeDuplicatingStuff();
    }
}

public class UsageSample
{
    public void PopulateCollectionOfItemsDependingOnConfigHopeYouveGotTheIdea()
    {
        string configValue = configuration["PanelKind"];
        PanelPresentatinLogic panelPresentatinLogic = new PanelPresentatinLogic();

        Panel panel = configValue == "Wrap" 
            ? new SortOfWrapPanel(panelPresentatinLogic)
            : new SortOfStackPanel(panelPresentatinLogic);
        // TODO: add panel to GUI
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T15:21:03.597

在 WPF 中，您不打算使用控件来填充自身。相反，使用 MVVM 模式。

您可以通过仅一个类提供数据（通常是 ObservableCollection）并将该“视图模式变量”加载到 MVVM 的属性中来实现您的目标。

然后您可以使用带有[DataTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)的 ItemsPanel来选择视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T15:09:41.907

也许你可以使用面板？

```
 public class ContainerBase : <wrap or stack>
    {

    //Do stuff!

    } 
```

# php - PHP Soap 连接立即重置而没有响应

> ID：12302628
> 
> 赞同：3
> 
> 时间：2012-09-06T14:44:05.153
> 
> 标签：php, http, soap, connection

我对 PHP Soap 相当陌生，但我相信我已经掌握了它。我的问题很奇怪，我已经在我的 Apache/cent OS 服务器上安装了 soap-php 模块。玩了一段时间后，我能够连接到公共 Web 服务并将其与 PHP 方法一起使用（使用 SoapClient()）所以我不认为这是配置错误。

当我尝试连接到我想使用的 Web 服务时，该服务托管在本地服务器上。连接立即重置，我尝试使用的 Web 服务没有任何响应。

我试图自己解决这个问题，但在检查其他内容方面遇到了僵局。

我知道 WSDL 在那里并且可以访问，因为当我将 URL 放入浏览器时，我可以看到它。我知道这项服务正在运行，因为它正在被其他应用程序使用。

我认为这不是 PHP/Apache 设置问题，因为我可以连接到其他 Web 服务并访问其中的方法。

但是，当我将我的测试应用程序指向我想要使用的服务时。我立即得到“连接已重置”。我使用了http siffer，我可以看到我试图访问的机器根本没有响应，就好像它不存在一样。以下是嗅探器日志。

> 客户端-> 服务器 192.168.1.190 -> 74.xxx.xxx.xxx
> 
> GET /contact/pipeline/bettertest.php HTTP/1.1 主机：www.harms-software.com 用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1 接受：文本/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8 Accept-Language: en-us,en;q=0.5 Accept-Encoding: gzip, deflate 连接: keep-alive Cookie: userinfo =XXXXXX%2CAdmin; __utma=266616727.1802384666.1343229893.1346876009.1346935926.113; __utmz=266616727.1346763531.101.17.utmcsr=millenniumcentral.com|utmccn=(推荐)|utmcmd=推荐|utmcct=/; __unam=b0971f8-138bebd9a81-7d1a81ba-869; __utmc=266616727; __atuvc=60%7C32%2C0%7C33%2C0%7C34%2C0%7C35%2C1%7C36; 帖子评分=1750
> 
> 没有响应标头，因为“连接已重置
> ，与服务器的连接在页面加载时已重置。”

现在通常我会假设两个服务器之间存在某些端口被阻塞或其他一些连接问题，但是我已经检查过了。端口 80 在托管 WSDL 的机器上打开。我在浏览器中查看 WSDL 也没有问题，所以我知道服务器在那里并且可以在端口 80 上访问。

下面是我正在尝试的 php 测试代码

```
<?php

    ini_set("soap.wsdl_cache_enabled", "0");

    $log = fopen("debug.log","w");
    fwrite($log,"about to create soap object!");   
    $client = new SoapClient("http://millennium.harms-software.com/MillenniumPipeline/MillenniumSDK.asmx?wsdl", array("trace" => 1, "soap_version" => SOAP_1_1, cache_wsdl =>  WSDL_CACHE_NONE));
    fwrite($log,"created soap object!");

    $logonArgs = array('User' => 'testing', 'Password' => 'temppass');

    try{
            $logonResult = $this->client->Logon($logonArgs);

    }catch(SoapFault $soapFault){
            //if failed, display soap message sent, received, and the soapfault generated

            echo "Fault!!!";
            var_dump($soapFault);
            echo "<b>Request</b> :<br>", htmlentities($this->client->__getLastRequest()), "<br>";
            echo "<b>Response</b> :<br>", htmlentities($this->client->__getLastResponse()), "<br>";

    }

?> 
```

我试图写出一个平面文件以查看代码是否正在执行，并且它似乎在创建肥皂对象后立即死亡。但是，我将这个完全相同的脚本指向另一个运行良好的 Web 服务。

在这一点上，我不知道可能导致服务器重置连接的原因。如果有人有类似的事情，请提示我。

# c# - 重构：我们如何抽象这些类

> ID：12302630
> 
> 赞同：0
> 
> 时间：2012-09-06T14:44:10.810
> 
> 标签：c#, abstract-class

某些类中有一些方法和成员变量看起来非常相似，我想我可以重构和抽象它们......但我不确定这是否是正确的方法：

例如，假设我有这两个类：

```
public class CaseField
{
  private int mlObjectKey = CommonIndepClass.GetNextObjectKey();
  public int ObjectKey
  {
    get
    {
      return mlObjectKey;
    }
  }

  // some other specific methods...
} 
```

然后是另一个类：

```
public class AsOfField
{
   private int mlObjectKey = CommonIndepClass.GetNextObjectKey();

   public int ObjectKey
   {
       get
       {
          return mlObjectKey;
       }
   }

   // some specific methods ... 
} 
```

所以我在想是否正确创建一个抽象类并将这些方法和成员变量分解并将它们放入该抽象类中：

```
public abstract class CommonFields
{
   private int mlObjectKey = CommonIndepClass.GetNextObjectKey();

   public int ObjectKey
   {
       get
       {
          return mlObjectKey;
       }
   }

}

public class CaseField: CommonFields
{
  // just its own specific methods and member variables. 
}

public class AsOfField: CommonFields
{
  // just its own specific methods and member variables. 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:46:42.367

这似乎不无道理。

[另一种方法是使用mixins](http://en.wikipedia.org/wiki/Mixin)来实现此功能。这将允许您定义一个具有通用功能的类，但您不必实现通用基类。有关更多详细信息，请参阅[此 SO 答案](https://stackoverflow.com/questions/255553/is-it-possible-to-implement-mixins-in-c)。

# ios - 强制 iOS 设备应用通过本地 WIFI 网络通话

> ID：12302636
> 
> 赞同：4
> 
> 时间：2012-09-06T14:44:19.617
> 
> 标签：ios, networking, wifi, local, reachability

我正在构建一个应用程序，该应用程序将在没有互联网访问的本地 wifi 网络的博物馆中运行，由于某种奇怪的原因，我无法使用 iOS 设备完全“加入”这个网络。在此网络上启用 Internet 访问可以解决问题...

网络应该只提供web服务器和DNS服务器，接入点有DHCP服务器，安卓设备可以正常连接网络。

当我尝试使用设备加入网络时，它仍处于“旋转轮”状态，debian 服务器上的 DHCP 服务器日志说它已为 iOS 设备分配了一个地址，如果我使用应用程序检查 wifi 地址（如 iSys o SBSettings）我看到了 WIFI DHCP 分配的地址。

但是，当我的应用程序（或 safari）尝试连接到 Web 服务器时，请求会通过 3G 连接进行路由并且未完成。

在我的应用程序中，我使用来自 Apple 的标准“可达性”框架来检查通过 wifi 连接提供的主机名的可达性，我在 SCNetworkReachabilityFlags 掩码上得到 0....

我很确定问题是由于 iOS（在我的情况下为 5.1）在通过 WIFI 连接路由流量之前尝试检查网络中某些“标准”主机的可达性。

任何人都知道 iOS 设备如何“验证”WIFI 网络？如果这可以帮助我将设备连接到仅限本地的网络，我可以向服务器计算机添加主机名或简单的虚拟服务:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:40:27.937

似乎 iOS 不喜欢在没有网关的情况下加入网络，如果网络是本地的，您必须设置正确的网关地址。

将网关设置为服务器本身就可以了，设备开始通过我的局域网路由 TCP/IP。

# jakarta-ee - 您可以在 Web 应用程序的 Context.xml 文件中声明非原始对象吗？

> ID：12302638
> 
> 赞同：0
> 
> 时间：2012-09-06T14:44:27.907
> 
> 标签：jakarta-ee, tomcat, servlets, ejb

使用 ServletContext.setAttribute() 您可以将任何类型的对象放入 ServletContext 对象中。有没有办法在 context.xml 文件中做到这一点？据我所知，您只能将原始数据类型放在 context.xml 的“context-param”标签内。

**为什么我不想这样做？**

我有几个 servlet，我想访问一个对象的同一个实例，该实例假设抽象访问数据库中的特定表，有点像实体 bean。这样做不是绝对必要的，但我想探索 ServletContext 的边界。我正在使用 Apache Tomcat 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:14:36.607

答案是不。在 XML 文件中只能声明原始数据类型。它记录在这里-> [http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Context_Parameters](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Context_Parameters)

Spring MVC 也使这变得不必要，但我想避免使用重量级的 DI 框架来完成如此简单的事情。

# google-maps - Google Map Changes 未在浏览器中呈现

> ID：12302639
> 
> 赞同：1
> 
> 时间：2012-09-06T14:44:31.823
> 
> 标签：google-maps, google-maps-api-3

这是我的 JavaScript 代码。

```
(function() {
      window.onload = function() {

    // Creating a reference to the mapDiv
    var mapDiv = document.getElementById('map');

    // Creating a latLng for the center of the map
    var latlng = new google.maps.LatLng(37.09, -95.71);

    // Creating an object literal containing the properties 
    // we want to pass to the map  
    var options = {
      center: latlng,
      zoom: 2,   
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    // Creating the map
    var map = new google.maps.Map(mapDiv, options);
  }
})(); 
```

当我将 disableDefaultUI: true 添加到选项变量并在我的浏览器（Opera、Firefox、Chrome Canary）上测试它时，它不会禁用 UI。我目前在我的 Mac OSX 版本 10.6.8 上使用 Eclipse Indigo。我的浏览器缓存有问题吗？我的代码似乎没问题。我不明白为什么它不能在浏览器上呈现。

```
var options = { 
zoom: 3,
center: new google.maps.LatLng(37.09, -95.71),
 mapTypeId: google.maps.MapTypeId.ROADMAP, 
 disableDefaultUI: true
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:23:14.687

我不记得为什么 disableDefaultUI 属性在我最近处理的地图上没有做任何事情。我绕过它的方法是直接控制每个 ui 元素。

```
var options = {
    // Required map properties here

    // Set how Zoom is to look
    zoomControl : true,
    zoomControlOptions : {
        style : google.maps.ZoomControlStyle.SMALL,
        position : google.maps.ControlPosition.TOP_LEFT
    }
} 
```

虽然上面的示例将缩放控件修改为紧凑的加号和减号而不是滑块，但如果关闭，您可以使用以下方法关闭：

```
zoomControl : false 
```

所有其他 UI 元素也具有这些类型的控件。[你可以在这里看到它们](https://developers.google.com/maps/documentation/javascript/controls)

# dart - query(#idname).innerHTML 和 query(#idname).text 有什么区别

> ID：12302645
> 
> 赞同：1
> 
> 时间：2012-09-06T14:44:59.587
> 
> 标签：dart

我的功能如下所示：

```
 void write (String message) {
    query("#status").innerHTML = message;
    query("#head").text = "Click me!";

  } 
```

它们都捕获 id 并向网络浏览器显示文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:54:58.577

在一般的浏览器文档模型中，`innerHtml`是指所有的内部 HTML，而`text`只是指元素的文本值。dhtml 和 Ajax 经常使用 innerHtml 来更改 div，其中 text 只是设置单个元素的文本值。

这在获取而不是设置时更明确地说明，即

例如给定：

```
<div id="idName">
    Text in the Div
    <p id="anotherId">Inner P</p>
</div> 
```

**innerHtml**返回

```
Text in the Div 
<p id="anotherId">Inner P</p> 
```

**文本**返回：

```
Text in the Div 
Inner P 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:54:09.200

如果你试试这个：

```
String message = """<form method="get" action="#ref"><input name="first_name"/></p><input     type="submit" value="Send"/></form>""";
write (message); 
```

那么你会体会到不同之处。innerHTML 应该将代码（示例中的 html 表单）注入到 HTML 页面中。

# sql-server - 在 sql server 中创建、使用和删除临时表的首选方法是什么？

> ID：12302648
> 
> 赞同：3
> 
> 时间：2012-09-06T14:45:17.637
> 
> 标签：sql-server, temp-tables

在 SQL Server 存储过程中使用临时表时，首选做法是；

1）创建临时表，填充它，使用它然后删除它

```
CREATE TABLE #MyTable ( ... )

-- Do stuff

DROP TABLE #MyTable 
```

2）检查它是否存在，如果存在则删除它，然后创建并使用它

```
IF object_id('tempdb..#MyTable') IS NOT NULL
DROP TABLE #MyTable

CREATE TABLE #MyTable ( ... ) 
```

3) 创建它并在超出范围时让 SQL Server 清理它

```
CREATE TABLE #MyTable ( ... )

-- Do Stuff 
```

[我在这个答案](https://stackoverflow.com/a/1607387/685760)及其相关评论中读到，这在临时表被重用的情况下很有用，SQL Server 将截断表但保留结构以节省时间。

我的存储过程可能会被非常频繁地调用，但它只包含几列，所以我不知道这在我的情况下到底有多有利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:47:42.190

*您可以测试并查看在您的场景中*一种方法是否优于另一种方法。我听说过这种重用好处，但我自己没有进行任何广泛的测试。（我的直觉是明确删除我创建的任何 #temp 对象。）

在单个存储过程中，您永远不必检查表是否存在 - 除非也有可能从另一个可能已创建同名表的过程调用该过程。这就是为什么最好有意义地命名#temp 表而不是使用#t、#x、#y 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:51:55.613

我遵循这种方法：

```
 IF object_id('tempdb..#MyTable') IS NOT NULL

DROP TABLE #MyTable

  CREATE TABLE #MyTable ( ... )

  // Do Stuff

IF object_id('tempdb..#MyTable') IS NOT NULL

DROP TABLE #MyTable 
```

原因：如果 sproc 发生错误，并且创建的 temp table 没有被删除，当调用同一个 sproc 并检查是否存在时，会出现无法创建 table 的错误，并且永远不会成功执行，除非 table 是掉了。所以总是在创建对象之前检查它的存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:05:48.983

使用临时表时，我的首选做法实际上是 1 和 2 的组合。

```
 IF object_id('tempdb..#MyTable') IS NOT NULL
     DROP TABLE #MyTable

  CREATE TABLE #MyTable ( ... )

  // Do Stuff

  IF object_id('tempdb..#MyTable') IS NOT NULL
     DROP TABLE #MyTable 
```

# asp.net - Paypal的支付安全

> ID：12302649
> 
> 赞同：3
> 
> 时间：2012-09-06T14:45:19.793
> 
> 标签：asp.net, paypal, paypal-ipn, paypal-sandbox

我想使用 Paypal 服务，我正在测试过程中并使用 Sandbox，但令人困惑的问题是，当用户从我的网站购买产品并随后被 Paypal 重定向到我的“成功”页面时，我收到的数据是'Querystring'，只有从那里我才能读取数据。我认为这是错误的，因为“Querystring”可以很容易地更改和修改。我想知道如何确定我收到的“查询字符串”属于通过购买请求付款的用户。

```
 string redirecturl = "";
        redirecturl += "https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_xclick&business=" + ConfigurationManager.AppSettings["paypalemail"].ToString();            
        redirecturl += "&first_name=erfanpj";
        redirecturl += "&city=stockholms";
        redirecturl += "&state=stockholms";
        redirecturl += "&item_name=" + l1.Text;
        redirecturl += "&amount=" + l3.Text;           
      //redirecturl += "&business=erfanpj@ymail.com";
        redirecturl += "&shipping=5";
        redirecturl += "&handling=5";
        redirecturl += "&tax=5";
        redirecturl += "&quantity=1";
        redirecturl += "&currency=USD";
        redirecturl += "&return=" + ConfigurationManager.AppSettings["SuccessURL"].ToString();
                 redirecturl += "&cancel_return=" + ConfigurationManager.AppSettings["FailedURL"].ToString();
        Response.Redirect(redirecturl);
    } 
```

此外，我很想知道“notify_url”和“paypal-ipn”参数的作用。来自尊敬的读者的任何反馈都将受到高度赞赏。

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T17:31:51.353

根据您的问题，我不确定您是否对 PayPal 购买流程有很好的了解。

首先，您应该使用 PayPal 生成的按钮（在您的 PayPal 帐户中制作），这些按钮已加密并防止用户更改购买页面上的参数。

其次，在进行交易时，PayPal IPN 将（通过 SSL）发布到您指定的网络服务器上的页面。在这里您可以提取购买的详细信息。（[关于 PayPal IPN 处理程序的 C# 示例](http://www.codeproject.com/Tips/84538/Setting-up-PayPal-Instant-Payment-Notification-IPN)）您应该确保响应是`VERIFIED`，验证接收方电子邮件地址是您的电子邮件地址，并且在执行订单之前，IPN 处理程序中的交易金额是正确的。（更多代码示例位于[PayPal 代码示例](https://www.x.com/developers/paypal/documentation-tools/paypal-code-samples#instantpaymentnotification)。）

# android - Android：布局高度占屏幕分辨率的百分比

> ID：12302651
> 
> 赞同：7
> 
> 时间：2012-09-06T14:45:23.597
> 
> 标签：android, layout, height

我是 Android 的新手，所以这可能是一个愚蠢的问题，但它就在这里。

我有一个活动的相对布局。在这个布局中，我在屏幕底部有另一个布局。有时我将其隐藏或使其可见，这无关紧要。是否可以使另一个布局的高度占屏幕总高度的 27%？这个想法是保留其他内容，除了屏幕上的这个布局。

有没有人尝试过这样的事情？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-06T14:53:43.917

`LinearLayout`可以通过`android:layout_weight`. 例如，这是一个包含三个`Button`小部件的布局，分别占高度的 50%、30% 和 20%：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <Button
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="50"
        android:text="@string/fifty_percent"/>

    <Button
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="30"
        android:text="@string/thirty_percent"/>

    <Button
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="20"
        android:text="@string/twenty_percent"/>

</LinearLayout> 
```

但是，您不能简单地声明布局文件中任意点的任意小部件应占据屏幕大小的任意百分比。不过，欢迎您在 Java 中执行该计算并`LayoutParams`根据需要调整您的小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T14:47:56.347

你可以试试这个，更复杂但有用。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/parent_view"
android:layout_width="match_parent"
android:layout_height="match_parent">

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/app_name" />

<LinearLayout
    android:id="@+id/parent_of_bottom_layout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_alignParentBottom="true" >

    <LinearLayout
        android:id="@+id/content_view"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="27">

       //Add your content here

   </LinearLayout>
</LinearLayout> 
```

# ruby-on-rails-3 - sunspot_solr - NoMethodError（nil:NilClass 的未定义方法 `result='）

> ID：12302654
> 
> 赞同：4
> 
> 时间：2012-09-06T14:45:34.857
> 
> 标签：ruby-on-rails-3, full-text-search, search-engine, sunspot, sunspot-solr

我有一个与使用 sunspot_solr 相关的问题。我有一个使用这个 gem 执行一些搜索的应用程序。有 5 个型号具有此功能，其中只有 1 个显示错误

```
 @search.results

NoMethodError (undefined method `result=' for nil:NilClass):
  app/controllers/financial_dashboards_controller.rb:27:in `index' 
```

这是我的代码：

控制器

```
@search = Sunspot.search(Purchase) do
   fulltext params[:search]
   with(:product_owner).equal_to(current_user.id)
   facet(:status)
   if params[:status].present?
      with(:status).equal_to(params[:status]) 
   end
   facet(:sell_date)
   if params[:sell_date].present?
      with(:sell_date).equal_to(params[:sell_date])
   end
   order_by(:sell_date, :desc)
end

#line 27
@sales = @search.results.paginate(:page => params[:page], :per_page => 5) 
```

型号（购买）：

```
searchable do
  text :product_name
  text :product_short_description
  integer :product_owner
  string :status
  string :sell_date
end         

def product_name
  product.name
end

def product_short_description
  product.short_description
end

def product_owner
  product.user.id
end

def sell_date
  date.to_s(:year_month)
end

#indicates status of the payment and delivery
def status()
    if !self.closed.nil?
    I18n.t('purchases.status.finished')
    elsif !self.measured.nil?
    I18n.t('purchases.status.measured')
    elsif !self.accomplished.nil?
    I18n.t('purchases.status.delivered')
    elsif !self.paid.nil?
    I18n.t('purchases.status.paid')
    elsif !self.canceled.nil?
    I18n.t('purchases.status.canceled')
    elsif !self.date.nil?
    I18n.t('purchases.status.waiting_payment')
    end
end 
```

另一个奇怪的事情是，在我的开发机器上，这段代码运行良好。在使用 nginx 的生产机器上，代码显示此错误。

我检查了 gem 的版本，它们匹配。我试过了

```
rake sunspot:solr:reindex RAILS_ENV=production 
```

重新索引。我试过了

```
rake sunspot:solr:stop RAILS_ENV=production
rake sunspot:solr:start RAILS_ENV=production 
```

重新启动搜索服务器。甚至尝试删除 solr/ 文件夹并让启动脚本再次复制它。

为什么其他模型可以完美运行？任何想法如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-11T18:31:12.557

就我而言，这是一种关键字段（id）不唯一的情况。

发生这种情况是因为我设计了一个带有非不同 id 字段的 mysql 视图。

这就是为什么在下一个非唯一行索引期间太阳黑子总是“下降”到零。

所以

```
hit.result = result 
```

在太阳黑子 gem 代码的某处引发错误

* * *

当我弄清楚时（我已经花了几个小时），我只是让我的 id 字段唯一，重新索引我的模型，问题就消失了。

# c# - LINQ 中扁平父子关联的计数

> ID：12302657
> 
> 赞同：5
> 
> 时间：2012-09-06T14:45:43.673
> 
> 标签：c#, linq, linq-to-entities

我正在尝试计算没有孩子的父母加上父母的孩子。当我写这篇文章时，我意识到用代码更好地解释它。所以，这里是：

使用这些示例类型：

```
public class Customer
{
    public int Id { get; set; }
    public string Name { get; set; }
    public List<Order> Orders { get; set; }
}

public class Order
{
    public int Id { get; set; }
    public string Description { get; set; }
} 
```

而这个数据：

```
var customers = new List<Customer>
{
    new Customer
    {
        Id = 2,
        Name = "Jane Doe"
    },
    new Customer
    {
        Id = 1,
        Name = "John Doe",
        Orders = new List<Order>
        {
            new Order { Id = 342, Description = "Ordered a ball" },
            new Order { Id = 345, Description = "Ordered a bat" }
        }
    }
};

// I'm trying to get a count of customer orders added with customers with no orders
// In the above data, I would expect a count of 3 as detailed below
//
// CId      Name        OId
// ----     --------    ----
//  2       Jane Doe
//  1       John Doe    342
//  1       John Doe    345

int customerAndOrdersCount = {linq call here}; // equals 3 
```

我正在尝试数 3 回来。

预先感谢您的帮助。

-杰西·豪尔

之后添加：

我对所有伟大（和快速）的答案印象深刻。对于其他人来这个问题，寻找一些选项，这里是一个单元测试，下面有一些工作示例。

```
[TestMethod]
public void TestSolutions()
{
    var customers = GetCustomers(); // data from above

    var count1 = customers.Select(customer => customer.Orders).Sum(orders => (orders != null) ? orders.Count() : 1);
    var count2 = (from c in customers from o in (c.Orders ?? Enumerable.Empty<Order>() ).DefaultIfEmpty() select c).Count();
    var count3 = customers.Sum(c => c.Orders == null ? 1 : c.Orders.Count());
    var count4 = customers.Sum(c => c.Orders==null ? 1 : Math.Max(1, c.Orders.Count()));

    Assert.AreEqual(3, count1);
    Assert.AreEqual(3, count2);
    Assert.AreEqual(3, count3);
    Assert.AreEqual(3, count4);
} 
```

再次感谢大家的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T14:51:49.667

怎么样

```
int customerAndOrdersCount = customers.Sum(c => c.Orders==null ? 1 : Math.Max(1, c.Orders.Count())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:11:08.020

如果您想将*“无订单”*计为 1 并计算订单，则此方法有效：

```
int customerOrders = customers.Sum(c => c.Orders == null ? 1 : c.Orders.Count()); 
```

顺便说一句，这个问题非常典型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T15:02:24.143

如果您将使用空列表而不是 null 来初始化 Order 属性，则可以执行以下操作：

```
int count =
  (
    from c in customers
    from o in c.Orders.DefaultIfEmpty()
    select c
  ).Count(); 
```

* * *

如果您决定保留未初始化的属性，则改为：

```
int count =
  (
    from c in customers
    from o in (c.Orders ?? Enumerable.Empty<Order>() ).DefaultIfEmpty()
    select c
  ).Count(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T15:04:50.210

```
customers
    .Select(customer => customer.Order)
    .Sum(orders => (orders != null) ? orders.Count() : 1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T14:58:06.610

您可能正在搜索这样的内容：

```
 customers.GroupBy(customer=>customer).  //group by object iyself
        Select(c=>                       //select
                    new  
                    {
                      ID = c.Key.Id,                             
                      Name = c.Key.Name, 
                      Count = (c.Key.Orders!=null)? c.Key.Orders.Count():0
                    }
               ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T15:09:38.060

```
var orderFreeCustomers = customers.Where(c=>c.Orders== null || c.Orders.Any()==false);

var totalOrders = customers.Where (c => c.Orders !=null).
Aggregate (0,(v,e)=>(v+e.Orders.Count)  ); 
```

结果是这两个值的总和

# html - 响应式设计中的嵌套 DIV - 边距、填充等

> ID：12302658
> 
> 赞同：0
> 
> 时间：2012-09-06T14:45:43.817
> 
> 标签：html, css, responsive-design

自从我真正处理网页设计中的百分比以来已经有一段时间了。我有一个嵌套的 DIV，它位于容器内，但容器的填充将其推到 100% 宽度之外。不想通过反复试验来了解是什么使它尽可能接近 100% 的宽度，我该如何实现舒适贴合？我还注意到，当我调整窗口大小并缩小空间时，右侧的填充变得更小了。

```
<div id="block">
    <div class="inside">ssdfsdfdfsfdf</div>
</div>

#block {
    width: 100%;
    background-color: #CCC;
    padding: 20px;
}
.inside {
    height: 200px;
    background-color: #333;
} 
```

[http://jsfiddle.net/AndyMP/cs2U9/4/](http://jsfiddle.net/AndyMP/cs2U9/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:56:10.187

#block 元素使用`box-sizing`css 属性。

```
#block {
    width: 100%;
    background-color: #CCC;
    padding: 20px;

    -o-box-sizing: border-box; /* Opera */
    -ms-box-sizing: border-box; /* IE */
    -moz-box-sizing: border-box; /* Mozilla */
    -webkit-box-sizing: border-box; /* Chrome, Safari */
    box-sizing: border-box;
} 
```

关于 CSS box-sizing 属性：[http ://www.w3schools.com/cssref/css3_pr_box-sizing.asp](http://www.w3schools.com/cssref/css3_pr_box-sizing.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:56:18.703

我需要一个

```
overflow: hidden 
```

在容器 DIV 上，以使其完美放置。

[http://jsfiddle.net/AndyMP/cs2U9/6/](http://jsfiddle.net/AndyMP/cs2U9/6/)

# flash - 使用 HTML5 创建滑块控件 - flash

> ID：12302661
> 
> 赞同：-1
> 
> 时间：2012-09-06T14:46:10.520
> 
> 标签：flash, html, window, slider

我想要这样的东西 [http://developerdrive.com/demo/slider_control/demo.html](http://developerdrive.com/demo/slider_control/demo.html) 但有闪存（swf 窗口）...有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:11:01.977

世事皆可能！您可以使用此处找到的内置滑块组件：

[使用 Slider 组件](http://help.adobe.com/en_US/ActionScript/3.0_UsingComponentsAS3/WS5b3ccc516d4fbf351e63e3d118a9c65b32-7fa1.html)

首先，您可以像这样将默认起始值​​设置为中间值：

```
var slider:Slider = new Slider();
slider.value = 50; 
```

还将您的文本字段默认设置为 100：

```
someTextField.text = "100%"; 
```

您可以配置更改处理函数，并根据接收到的值更新图像大小和文本字段。

```
slider.addEventListener(SliderEvent.CHANGE, changeHandler);

function changeHandler(e:SliderEvent):void {
    var modifiedPercent:number = 2 * e.value;
    someImage.width *= modifiedPercent / 100;
    someImage.height *= modifiedPercent / 100;
    someTextField.text = modifiedPercent+"%";
} 
```

它将百分比乘以 2，这实际上使滑块的范围从 0 到 200。然后它调整图像尺寸和文本字段值（“someImage”是对图像的引用，“someTextField”是对文本的引用）。

# visual-studio - Visual Studio 脚本调试 - inetinfo.exe 的进程“类型”无效

> ID：12302663
> 
> 赞同：0
> 
> 时间：2012-09-06T14:46:16.023
> 
> 标签：visual-studio, debugging, iis, asp-classic

我在从 Visual Studio 调试经典 ASP 应用程序时遇到问题。当我附加到 inetinfo.exe 进程时，我收到了消息

> 当前不会命中断点。没有为此文档加载任何符号

我认为我已将问题隔离为给 inetinfo.exe 的进程类型不正确。

以下屏幕截图显示了我在 Visual Studio 2010 中选择“调试 -> 附加到进程”时看到的内容：

![inetinfo 不正确的进程类型](../Images/232840f1b5b703b31e795040cdb606dc.png)

inetinfo.exe 进程“类型”报告为

> T-SQL，托管 (v2.0.50727)，x86

然而，我希望它是：

> T-SQL，脚本，x86

我在 IIS 中打开了脚本调试，并且应用程序保护级别较低。顺便说一句，如果我将应用程序级别切换到中或高，我会在 dllhost.exe 上看到相同的结果。

重申一下，我正在尝试调试经典 ASP 脚本应用程序，而不是托管 ASP.NET 应用程序。

有什么理由（我假设）IIS 让自己陷入困境吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:33:49.627

事实证明，我应该已经阅读了我自己的文章（[从 Visual Studio 2010 调试经典 ASP](http://www.jameswiseman.com/blog/2010/10/12/debugging-classic-asp-from-visual-studio-2010/)）：

挣扎着，我跑了这个：

```
regsvr32.exe "C:\Program Files\Common Files\Microsoft Shared\VS7Debug\pdm.dll" 
```

重新启动 IIS 后，我发现这修复了它。

对于其他为这个问题而苦恼的人，以下文章中有一个很好的部分：[如何使用 Visual Studio .NET 调试脚本代码](http://cj-chung.blogspot.co.uk/2007/11/how-to-debug-script-code-using-visual.html)。您正在查找的部分标题为**“没有用于附加到脚本主机的“脚本”选项**”

# security - WP7 设备和 Windows Azure 之间的安全连接

> ID：12302664
> 
> 赞同：0
> 
> 时间：2012-09-06T14:46:21.907
> 
> 标签：security, windows-phone-7, encryption, azure, odata

我已经设置了一个 Windows Azure 数据库，其中的数据可通过 oData 访问。我正在尝试研究如何保护 WP7 设备和数据库之间的连接。所谓安全，我的意思是我只希望应用程序的用户能够从应用程序内访问数据。

我考虑过 SSL，但它对我来说相当昂贵 - 是否有另一种方法来保护这种连接？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:09:26.460

“安全”有多种定义。您将需要身份验证，因此 Azure 只允许正确的用户访问数据。这通常由 WP7 应用程序提供的用户名和密码处理。

WP7 应用程序需要确保它与正确的服务器通信。SSL 使用数字证书处理此问题。还有其他机制，但最好使用基于公钥/私钥对的机制，因为您可以验证您正在连接到正确的服务器，而无需模拟该服务器。然而，大多数情况下使用的[RSA](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)算法计算量很大。

WP7 应用程序和 Azure 之间发送的数据也需要保密，包括用户的密码。这通常由加密处理。您可以选择计算成本较低的算法或仅加密某些数据。

WP7 应用程序和 Azure 之间发送的数据也需要某种形式的篡改检测。否则，有人可能会破坏发送或接收的数据。也许这是您可以为应用程序接受的东西，但它必须是一种攻击无法轻易重现的方式。正如[Shanin 的 Maxim](http://en.wikipedia.org/wiki/Claude_Shannon#Shannon.27s_maxim)所说，攻击者了解系统。

问题是 SSL 为您提供了所有这些。是的，它可能很昂贵，但它是可用的最佳通用解决方案之一。您可以使用[组策略、代码](http://msdn.microsoft.com/en-us/library/windows/desktop/bb870930%28v=vs.85%29.aspx)或[PowerShell](http://derek858.blogspot.com.au/2010/06/powershell-command-to-change-windows.html)更改 Azure 提供的密码套件。

如果您不想使用 SSL，则需要知道可以牺牲什么。一般来说，我不建议您使用自己的加密机制或协议，因为我们人类往往会搞砸它。

# javascript - 检测和显示表单文本区域中的链接

> ID：12302668
> 
> 赞同：4
> 
> 时间：2012-09-06T14:46:33.190
> 
> 标签：javascript, ruby-on-rails-3, forms

当我在 Facebook 的“你在想什么？”中输入链接（视频、图片、URL 等）时 表单，它会自动检测链接并将其转换为缩略图，并在文本区域下方提供简要说明。任何人都可以为我提供见解或链接，让我继续如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:10:51.057

使用类似的东西

```
var input = document.getElementById("textarea");
input.addEventListener("change", checkLink(e));
input.addEventListener("blur", checkLink(e));

function checkText(text){
     var exp = "((ht|f)tp(s?))(:((\/\/)(?!\/)))(((w){3}\.)?)([a-zA-Z0-9\-_]+(\.(com|edu|gov|int|mil|net|org|biz|info|name|pro|museum|co\.uk)))(\/(?!\/))(([a-zA-Z0-9\-_\/]*)?)([a-zA-Z0-9])+\.((jpg|jpeg|gif|png)(?!(\w|\W)))";
     return text.match(exp);
}
function checkLink(e){
     //here you would want to use a regular expression and check for http:

     var regularExpression = !!checkText(e.target.innerHTML); // returns true or false
     if(regularExpression){
       e.target.innerHTML += "<a href='#'><img src="" alt="" /></a>";
     }
} 
```

正则表达式的好资源 - [http://regexlib.com/Search.aspx?k=image&c=-1&m=-1&ps=20](http://regexlib.com/Search.aspx?k=image&c=-1&m=-1&ps=20)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:51:25.527

textarea 更改事件附加了一个 javascript。javascript检测textarea的内容是否为url，如果是，则javascript调用访问该url的webservice来查找页面标题、页面描述等（或开放图形协议元标记），如果是找到它们返回给适当组织的 javascript 的每个标签。

Facebook 也会缓存这些内容，如果另一个用户发布了相同的 url，他会使用缓存值而不是重新访问该页面。

开放图协议元标记：

```
http://developers.facebook.com/docs/opengraphprotocol/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:53:18.160

警告 - 必须离开工作所以不检查正则表达式。

获取链接值并通过正则表达式运行它，该表达式查找`^http:...[^\s]`或`^https:...[^\s]`返回这些值。

然后，将这些 URL 传递给您的服务器，让您的服务器检索文档并返回一个代码段供您放入文档。您必须拥有自己的服务器来提供帮助，因为 Javascript 本身就有安全限制。谷歌`same origin policy`了解更多信息。

# c++ - 关于掉期表现的问题

> ID：12302674
> 
> 赞同：7
> 
> 时间：2012-09-06T14:46:47.653
> 
> 标签：c++

我有三个关于交换的问题，对你来说很可能是非常基本的。

(1) 对于两个相同类型的 STL 容器`a`和`b`，以下两种操作都可以

```
swap(a,b);
a.swap(b); 
```

我知道第二个是专门用于容器的（例如，只涉及一些迭代器交换），而第一个是一个全局算法，用于处理通用数据类型并执行内部复制构造。

我的问题是，如果我编写第一个，编译器是否会使用第二个，或者我是否必须小心检查是否存在适当的专业化？

(2) 会`swap(a,b)`产生与 相同的性能`swap(b,a)`吗？如果涉及复制构造并且对象的大小有很大不同，我怀疑这可能很重要？

(3) 在`==`存在重载运算符且速度较快的情况下，`a == b`在交换之前检查是有意义的，以避免不必要的操作。`std::swap`是先应用此检查，还是不管它是否执行操作？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T14:51:16.883

1.  全局`swap`模板专门用于支持的每种标准库类型`swap`；专业化调用成员`swap`。

2.  `swap(a, b)`和之间应该没有区别`swap(b, a)`。（我可以想象它很重要的反常类型，但这在实践中永远不会发生）。

3.  不，`std::swap` 通常不检查是否相等。在许多情况下，这比仅仅进行交换要慢。

# android - 安卓视图不显示

> ID：12302675
> 
> 赞同：0
> 
> 时间：2012-09-06T14:46:52.203
> 
> 标签：android

我有这样的 Android Activity 布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:background="#184A64">

<ImageView
    android:id="@+id/logoTop"
    android:layout_width="fill_parent"
    android:layout_height="42dip"
    android:layout_alignParentTop="true"
    android:layout_gravity="center"
    android:background="#F1CF2F"
    android:contentDescription="@string/descLogoTop"
    android:padding="4dip"
    android:src="@drawable/logoTop" />

<ImageView
    android:id="@+id/logoBot"
    android:layout_width="fill_parent"
    android:layout_height="42dip"
    android:layout_alignParentBottom="true"
    android:layout_gravity="center"
    android:background="#F1CF2F"
    android:contentDescription="@string/descLogoBot"
    android:padding="4dip"
    android:src="@drawable/logoBot" />

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="6dip" >

    <TextView
        android:id="@+id/data"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="left"
        android:text=""
        android:textColor="#FFFFFF"
        android:textSize="12sp"
        android:textStyle="normal" />

    <ImageView
        android:id="@+id/icon"
        android:layout_width="103dip"
        android:layout_height="62dip"
        android:layout_marginBottom="6dip"
        android:layout_marginRight="6dip"
        android:contentDescription="@string/descLogo"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/toptext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:text=""
        android:textColor="#F1CF2F"
        android:textSize="12sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/bottomtext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:singleLine="false"
        android:text=""
        android:textColor="#FFFFFF"
        android:textSize="12sp" />
</LinearLayout> 
```

这个 xml 定义了一个布局，其中顶部矩形带有一个日志，底部矩形带有一个徽标。这两个元素显示正确。但是中间的组件是一个线性布局，有一个 TextView，然后是一个 Image，然后是 2 个 TextView。该组件不显示。活动的 Java 代码如下所示：

```
public class NewsActivity extends Activity {

private ProgressDialog m_ProgressDialog = null; 
private Runnable viewNews;
private Bundle bundle;
private News m_news = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_news_activity);

     bundle = this.getIntent().getExtras();

    viewNews = new Runnable(){
        @Override
        public void run() {

            getNews();
        }
    };
    Thread thread =  new Thread(null, viewNews, "MagentoBackground");
    thread.start();
    m_ProgressDialog = ProgressDialog.show(NewsActivity.this,    
            this.getString(R.string.wait), this.getString(R.string.receiving, true));

}

public void getNews() {

    m_news = new News();
    m_news.setNewsTitle(bundle.getString("title"));
    m_news.setNewsText(bundle.getString("text"));
    m_news.setNewsDate(bundle.getString("date"));
    m_news.setNewsPhoto(bundle.getString("photo"));

    LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = vi.inflate(R.layout.activity_news_activity, null);

    try{
        ImageView iv = (ImageView) v.findViewById(R.id.icon);
        TextView tt = (TextView) v.findViewById(R.id.toptext);
        TextView bt = (TextView) v.findViewById(R.id.bottomtext);

        if (iv != null) {
            try{
                Bitmap bmp = Utils.getBitmapFromURL("http://www.myServer.com/IMG/" + m_news.getNewsPhoto());
                if (bmp == null){
                    Log.i("PHOTO ERROR", "http://www.myServer.com/IMG/" + m_news.getNewsPhoto());
                }
                iv.setImageBitmap(bmp);                     
            } catch (Exception e){
                Log.e("IMAGE ERROR", e.getMessage() + " - " + e.getStackTrace());
            }
        }
        if (tt != null) {
            tt.setText(m_news.getNewsTitle());
        }
        if(bt != null){
            bt.setText(m_news.getNewsText());
        }   
        TextView dt = (TextView) v.findViewById(R.id.data);         
        Date nd = new Date(Long.parseLong(m_news.getNewsDate())*1000);
        Calendar cal = Calendar.getInstance();
        cal.setTime(nd);
        dt.setText(cal.get(Calendar.DAY_OF_MONTH) + "/" + cal.get(Calendar.MONTH) + "/" + cal.get(Calendar.YEAR));

    } catch (Exception e){
        Log.e("ERROR NEWS", e.getMessage());
    }

    runOnUiThread(returnRes);
}
private Runnable returnRes = new Runnable() {

    @Override
    public void run() {
        m_ProgressDialog.dismiss();
    }
};
} 
```

我在这里做的是从包中提取一些数据（它可以正常工作），然后将内容设置为 TextViews 和 ImageView。但是，当我在模拟器上测试时，Image 和 TextViews 是空的。

我检查了电话

```
ImageView iv = (ImageView) v.findViewById(R.id.icon);
TextView tt = (TextView) v.findViewById(R.id.toptext);
TextView bt = (TextView) v.findViewById(R.id.bottomtext); 
```

而且，显然，然后不要返回null。但如果做

```
tt.setText("some random text here"); 
```

它不起作用。

我觉得我做的不对。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:59:04.883

我认为问题在于您没有访问当前视图，而是正在创建新视图：

```
LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View v = vi.inflate(R.layout.activity_news_activity, null); 
```

您根本不需要这两行，因为您可以直接访问当前视图组件

```
ImageView iv = (ImageView) findViewById(R.id.icon);
TextView tt = (TextView) findViewById(R.id.toptext);
TextView bt = (TextView) findViewById(R.id.bottomtext); 
```

然后设置值。

当然，由于 getNews() 方法是由非 UI 线程调用的，所以它里面所有接触 UI 的代码都必须通过 runOnUiThread 调用：

```
public void getNews() {
    // ...
    runOnUiThread(new Runnable() {
            @Override
            public void run() {

                ImageView iv = (ImageView) findViewById(R.id.icon);
                TextView tt = (TextView) findViewById(R.id.toptext);
                TextView bt = (TextView) findViewById(R.id.bottomtext);

                tt.setText("some random text here");
                //...
            }
        });
    //... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:00:21.680

您应该指定您`LinearLayout`将在`RelativeLayout`. 例如，您可能应该指定：

```
android:layout_below="@+id/logoTop" 
```

此外，如果您希望 中的项目`LinearLayout`垂直对齐，则需要设置

```
android:orientation="vertical" 
```

这将使您的总`LinearLayout`声明看起来像：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/logoTop"
    android:orientation="vertical"
    android:padding="6dip" > 
```

# c# - 为什么javascript有函数而C#有方法？

> ID：12302679
> 
> 赞同：6
> 
> 时间：2012-09-06T14:47:02.720
> 
> 标签：c#, javascript, function, methods

为什么它们的名称不同？

函数的性质/目的/位置不与方法的相同吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T14:53:16.073

函数是独立的，方法是类的成员。就这样。（其实都是一样的。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-06T14:48:56.760

方法是附加到对象的函数。

JavaScript 函数在对象的上下文中使用时通常被称为方法。

例如`document.getElementById('foo')`使用`getElementById`方法。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-06T14:49:17.057

函数是一个非常古老的术语，意思是完成某些任务的一段代码（如果您愿意，可以执行某些功能）。

方法是一个相对较新的术语（随 OO 编程而来），它表示属于对象特定实例的函数。

所有方法都是函数，但并非所有函数都是方法。

请参阅程序员 stackexchange 的这个[相关问题](https://softwareengineering.stackexchange.com/questions/20909/method-vs-function-vs-procedure)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-06T14:49:05.910

在处理过程代码时，您通常会找到术语函数。OOP 使用术语方法，但它们是同一回事。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-06T14:52:15.340

函数是一段按名称调用的代码。它可以传递数据进行操作（即参数），并且可以选择返回数据（返回值）。

传递给函数的所有数据都是显式传递的。

方法是一段代码，通过与对象关联的名称调用。在大多数方面，除了两个关键区别外，它与函数相同。

*   它被隐式传递给它被调用的对象
*   它能够对包含在类中的数据进行操作（记住对象是类的实例——类是定义，对象是该数据的实例）

另外，另一个答案：[功能和方法之间的区别？](https://stackoverflow.com/questions/3280005/difference-between-function-and-method)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-06T14:47:51.757

好吧，这都是关于名称的，但通常函数和方法是相同的，当然也有相同的目的。

这一切都始于第一种编程语言，在那里它们被称为函数，但是随着更高级别的编程语言的出现，我猜他们认为即使它们是方法，也可以将它们命名为方法，并服务于同样的目的。

编辑：

函数不是任何对象或类的一部分。方法是对象或类的成员。

# android - 我的 onTouchListener 无法正常工作

> ID：12302680
> 
> 赞同：0
> 
> 时间：2012-09-06T14:47:03.797
> 
> 标签：android, spinner

对不起我的英语不好，但我是意大利人。我有一个微调器，当它被禁用时，我想要一个祝酒词。但我不能让它工作！我正在使用另一个 onTouchListener 并且效果很好，但是这个监听器不起作用。

这是我的代码：

```
private void buildSpinnerOrdinata(String element) {
    spinnerOrdinata=null;
    spinnerOrdinataArray=new ArrayList<String>();
    spinnerOrdinataArrayAdapter=null;
    try {
        if(element.equals(""))
            spinnerOrdinataArray.add("Seleziona un'ordinata");
        else
            spinnerOrdinataArray=databaseHelper.getOrdinataCpmAnalysis(element);

        spinnerOrdinata = (Spinner) findViewById(R.id.spinnerOrdinata);
        if(addingRecord==true){
            spinnerOrdinataArray.add(0, "Seleziona un'ordinata");
        }
        spinnerOrdinataArrayAdapter = new ArrayAdapter<String>(this, R.layout.spinner, spinnerOrdinataArray);
        spinnerOrdinataArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinnerOrdinata.setAdapter(spinnerOrdinataArrayAdapter);
        if(addingRecord==true){
            spinnerOrdinata.setOnTouchListener(null);
            spinnerOrdinata.setOnTouchListener(SpinnerOrdinataOnTouch);
        }
        if(tabellaGiaScelta==false&&addingRecord==true){
            spinnerOrdinata.setOnTouchListener(null);
            spinnerOrdinata.setEnabled(false);
            spinnerOrdinata.setOnTouchListener(disabledSpinnerOnTouch);
        }
        else{
            spinnerOrdinata.setEnabled(true);
            spinnerOrdinata.setOnTouchListener(null);
        }
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

这是我的听众：

```
private View.OnTouchListener disabledSpinnerOnTouch=new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_UP) {
                Toast.makeText(getApplicationContext(), "Non è possibile selezionare questo campo, è disabilitato", Toast.LENGTH_SHORT).show();
                Spinner spinnerOr=(Spinner)findViewById(R.id.spinnerOrdinata);
                spinnerOr.performClick();
            }
            return true;
        }
}; 
```

错误在哪里？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:51:12.083

因为您通过调用 setEnabled(false) 禁用了微调器。之后它不听触摸事件。

我将扩展 Spinner 类并仅使用一种方法来实现我自己的实现，该方法将是被覆盖的 PeformClick 方法，如果您想显示 Spinner 项目，您将调用父版本，或者您不会调用父版本，而是您的 toast 告诉您被禁用的用户

这是可以做到的。

```
public class CustomSpinner extends Spinner{

private boolean mEnabled;
private final Toast mDisabledToast;

public CustomSpinner(Context context, AttributeSet attrs) {
    super(context, attrs);
    mDisabledToast = Toast.makeText(context, "Non è possibile selezionare questo campo, è disabilitato", Toast.LENGTH_SHORT);
}

@Override
public boolean performClick() {
    if(mEnabled)
        return super.performClick();
    else {
        mDisabledToast.show();
        return true;
    }
}

@Override
public void setEnabled(boolean enabled){
    mEnabled = enabled;
} 
```

}

不要忘记在布局 xml 中使用新创建的 CustomSpinner 类而不是基本 Spinner 类。你可以这样做：

```
 <com.example.CustomSpinner
        android:id="@+id/spinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /> 
```

# c# - 以编程方式为 Outlook 2010 创建自定义通讯簿

> ID：12302683
> 
> 赞同：1
> 
> 时间：2012-09-06T14:47:12.987
> 
> 标签：c#, outlook, vsto, outlook-addin

我想创建一个**自定义联系人列表**（*或称为通讯簿*），以便在 Outlook 中，用户将查看“建议的联系人”、“联系人”等，然后是“自定义联系人”。我去尝试了以下。

```
int count = this.Application.GetNamespace("MAPI").AddressLists.Count; 
```

这给了我 8 的值。所以，自然地，我尝试`Add`了地址列表对象的一些东西，但猜猜是什么 - 没有这样的方法。这并不奇怪，因为 API 明确声明它是只读对象。但是，我需要为我的客户设置一个地址簿/列表（*不管它叫什么*）。

如何将新**通讯簿**添加到 Outlook？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T17:11:27.220

您可以使用以下代码创建**Outlook 通讯簿条目：**

```
Outlook.Folder contacts = this.Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderContacts) as Outlook.Folder;
Outlook.Folder addressBook = contacts.Folders.Add("Business Contacts", Outlook.OlDefaultFolders.olFolderContacts) as Outlook.Folder;
addressBook.ShowAsOutlookAB = true; // force display in Outlook Address Book
Outlook.ContactItem contact = addressBook.Items.Add();
contact.FullName = "Custom Industries, Inc.";
contact.Email1Address = "sales@customindustries.com";
contact.Save(); 
```

# jquery - 如何在 jQuery Mobile 中左对齐标题的文本？

> ID：12302685
> 
> 赞同：0
> 
> 时间：2012-09-06T14:47:18.290
> 
> 标签：jquery, jquery-mobile

如何在[jQuery Mobile](http://en.wikipedia.org/wiki/JQuery_Mobile)中将标题的文本对齐到左对齐？

我已将其指定如下。

```
<div data-role=header data-theme="b">
    <h1 align="left"><font size="1px"> My Contacts -> Doctor </font></h1>
</div> 
```

但它没有出现。我只是想对齐`text in the header`，我还需要调整文本大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:51:06.760

也许这可以帮助你：

```
<div data-role=header data-theme="b" style="text-align: left;font-size: 10px;">
    My Contacts -> Doctor 
</div> 
```

# hadoop - Pig 如何处理否定空值？

> ID：12302687
> 
> 赞同：1
> 
> 时间：2012-09-06T14:47:22.367
> 
> 标签：hadoop, null, apache-pig, negate

我有一个问题，不理解 apache pig（版本 r0.9.2）如何处理空值的否定。我有这样的表达：

```
nonEmpty = FILTER dataFields BY NOT IsEmpty(children); 
```

如果 children 为 null，IsEmpty 函数将返回 null - 所以让我感到困惑的是 NOT 运算符的行为，因为我会有这样的表达式：

```
nonEmpty = FILTER dataFields BY NOT NULL; 
```

pig latin r0.9.2 的文档接下来说：“Pig 不支持布尔数据类型。但是，布尔表达式（包括布尔和比较运算符的表达式）的结果始终是布尔类型（真或假）。” 这只会让我完全困惑。

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T19:55:15.067

无论如何，测试 NULL 是否为空可能不是一个好主意。事实上，我在 0.10.0 上尝试过它，但它确实抛出了一个错误。相反，过滤不为空且不为空：

```
nonEmpty = FILTER dataFields BY (children IS NOT NULL) AND (NOT IsEmpty(children)); 
```

# jsf - 如何在 JSF 1.2 中知道并从 ah:datatable 中的 h:column 获取 id

> ID：12302690
> 
> 赞同：0
> 
> 时间：2012-09-06T14:47:27.600
> 
> 标签：jsf, richfaces, jsf-1.2, richfaces-modal

我有一个数据表，通过单击图像打开该数据表`<rich:modalPanel>`。但是`<rich:componentControl for="panel" attachTo="showPreview"`必须有确切的 id，在我下面的例子中：`showPreview`，但是由于我的链接在 dataTable 中，它会像`1:showPreview` `2:showPreview`......一样生成`n:showPreview`

有什么方法可以知道我在表格的哪一行，以获得动态绑定？

我在 JSF 1.2 中的 XHTML 看起来像这样：

```
<h:dataTable  styleClass="tb_tabletag" id="dtContentPosts" value="#{listOfObjects}" var="object">
    <h:column id="columnnumber" >
        <h:outputLink id="showPreview" value="#">
        <h:graphicImage value="preview.png" />      
        <rich:componentControl for="panel" attachTo="showPreview" operation="show"
            event="onclick"/>
        </h:outputLink>
    </h:column>
</h:dataTable>
...
...
...
<rich:modalPanel id="panel" autosized="true">
  some stuff 
</rich:modalPanel> 
```

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:25:07.510

感谢 Luiggi 提供的链接，以及给定的源代码，这帮助我找到了我的简单技巧：我现在得到了这个数字：`#{listOfObjects.indexOf(object)}`

唯一重要的是，modalPanel`<h:column></h:column>`可以接收正确的数字，效果很好

# c++ - 从函数返回一个 unique_ptr 向量

> ID：12302691
> 
> 赞同：20
> 
> 时间：2012-09-06T14:47:33.330
> 
> 标签：c++, vector, c++11, unique-ptr

我目前正在阅读《Head First Object Oriented Analysis and Design》一书，同时也习惯了 C++11 的一些特性（尤其是 unique_ptr 和移动语义）。在书中，他们以策略棋盘游戏的设计为例。它有一个板，瓷砖和瓷砖上的单位。代码是用 Java 编写的，我试图用 C++ 重写它。在 Java 中，tile 类如下：

```
public class Tile
{
    private List units;

    public Tile()
    {
        units = new LinkedList();
    }

    protected void addUnit(Unit unit)
    {
        units.add(unit);
    }

    protected List getUnits()
    {
        return units;
    }
} 
```

我首先使用 shared_ptr 在 c++ 中做了同样的事情。与我使用原始指针的第二个版本相比，它工作但非常慢。然后我尝试了 unique_ptr：

```
class Tile
{

public:
  Tile();
  virtual ~Tile();

  void addUnit()
  {
    mUnits.push_back(std::unique_ptr<Unit>(new Unit());
  }

  std::vector<std::unique_ptr<Unit>> getUnits()
  {
    return mUnits;
  }

private:
  std::vector<std::unique_ptr<Unit>> mUnits;

}; 
```

编译器不喜欢 getUnits。据我了解，它来自于复制构造函数在 unique_ptr 中被禁用的事实。你将如何返回向量列表？谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-06T14:53:25.873

C++ 中返回的值会产生一个副本——如果这是你想要的，你不能使用`unique_ptr`或必须手动复制`std::move`它。但是，我认为您只想提供对`Unit`s 的访问（无论出于何种原因......），所以只需返回一个引用：

```
std::vector<std::unique_ptr<Unit>> const& getUnits() const
{
  return mUnits;
} 
```

（`const`仅当您不想授予对向量的写访问权限时才需要。）

现在，仍然存在一些问题：为什么`~Tile` `virtual`？我看没必要。

为什么你使用*拥有*的ptr 来指向单位？在原始 Java 代码中，您获得了对外部单元的引用，并且只存储了一个引用 - 如果`Tile`Java 代码中的. 为了在 C++ 中实现完全相同，您正确使用`shared_ptr`.

当然，您可以明确*谁*是单位的真正所有者并进行相应操作 - 如果*不是* `Tile`，请使用原始指针。另请参阅[“我何时使用哪种指针？”](https://stackoverflow.com/q/8706192/500104)

# eclipse-plugin - 如何从另一个视图更新视图的标签？

> ID：12302694
> 
> 赞同：1
> 
> 时间：2012-09-06T14:47:42.550
> 
> 标签：eclipse-plugin

我正在尝试从视图 A 更新视图 B 中的标签文本。

```
if (ResultView.getView() == null)
    PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().showView(MyView.ID);
    ResultView.getView().lblAnalysis.setText("string1");
    ResultView.getView().lblTimeStamp.setText("string2");
    PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().showView(MyView.ID); 
```

B 视图不显示更改。如何让更新显示？

# java - 跨 Java 系统的配置设计模式

> ID：12302702
> 
> 赞同：7
> 
> 时间：2012-09-06T14:48:05.527
> 
> 标签：java, design-patterns, configuration

问题是老帽子——在我们的系统中支持配置文件或系统配置的正确设计是什么？我已经确定了以下要求：

*   应该能够实时重新加载并立即获取更改而无需重新部署
*   对于依赖相同的软件应用程序，例如 SQL 或 memcached 凭证，应该可以在一个孤立的地方引入更改并一举部署，即使应用程序位于不同位置的不同机器上
*   支持运行相同应用程序的许多进程/机器

我正在努力解决的这个设计的部分：

*   每个主要类都应该将自己的“Config”类作为构造函数的输入参数吗？是否应该有一个工厂负责实例化正确的配置？还是每个类都应该从自己的配置中读取并自动重新加载？
*   如果类 B 派生自类 A，或者围绕它进行组合，那么继承 Config 文件是否有意义？
*   假设类 A 由 M1 和 M2（M 代表“main”）构建，M1 负责实例化资源。假设资源依赖于我希望在 M1 和 M2 之间通用的 MySQL 凭据，有没有办法避免打破所有权的权衡并放入 A 的配置 v. 跨 M1 和 M2 的配置复制资源？

这些是我现在正在处理的设计问题，并不真正了解在这里工作的设计模式或框架。我在 Java 中，所以任何解决这个问题的库都非常受欢迎。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T14:50:44.107

您可能想查看[Apache Commons Config](http://commons.apache.org/configuration)，它提供了广泛的功能。您可以指定多个配置源，并将它们排列成层次结构。一个特别感兴趣的特性是提供[配置事件](http://commons.apache.org/configuration/userguide/howto_events.html#Configuration_Events)，允许您的组件注册它们对配置更改的兴趣。

动态更改配置的目标是诱人的，但需要对设计进行一些思考。您需要仔细管理这些更改（例如，如果您缩小队列大小会发生什么 - 您是否丢弃队列中的现有元素？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:52:59.947

**每个主要类都应该将自己的“Config”类作为构造函数的输入参数吗？**

不，这听起来像是一个糟糕的设计，会不必要地使大量代码过于复杂。我建议您将全局配置类实现为单例。单例意味着只有一个配置对象，它是您的 Configuration 类的私有静态变量，可以在需要时通过公共静态 getInstance() 方法获取。

此配置对象应将所有配置参数存储为键/值对。

# android - Android：布局尝试插入 3 个文本视图并向下插入 3 个方块

> ID：12302704
> 
> 赞同：0
> 
> 时间：2012-09-06T14:48:15.730
> 
> 标签：android, android-layout

我正在尝试创建 3 个文本视图和 3 个文本视图向下（总共 9 个文本框）均匀分布，并且当屏幕更改时，即它们移动以调整间距但文本视图的大小保持不变的屏幕的横向和大小。

我是真正的问题，我尝试过线性布局，但可以让它工作，然后是相对布局......我认为正确的布局是桌子......但我就是无法让它工作。

谁能帮忙，我知道这一定是可能的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:10:47.413

好吧，如果你放弃了 RelativeLayout 试试 GridLayout ;)

或更好 - 垂直线性布局填充三个水平线性布局......

但是您可能想使用不同的布局文件夹来指定使用哪一个因此在横向中您将使用一种布局，而在纵向中您将使用不同的布局（两者都使用相同的名称，位于 layout-land 和 layout-port 文件夹中）

[Android 布局文件夹：layout、layout-port、layout-land](https://stackoverflow.com/questions/5407752/android-layout-folders-layout-layout-port-layout-land)

[Android 将布局组织到子文件夹中](https://stackoverflow.com/questions/4571079/android-organise-layouts-into-sub-folders)

我想这是让你得到均匀间距的原因，这就是为什么你可能想尝试使用充满水平布局的垂直布局来做到这一点......

# excel - 通过 .txt 输出到 CSV——寻找更优雅的解决方案

> ID：12302705
> 
> 赞同：0
> 
> 时间：2012-09-06T14:48:17.780
> 
> 标签：excel, csv

我最近编写了一些 python 脚本来计算 csv 文件中的单词数，然后打印输出两列：“Prefix”和“Count”，其中 prefix 是名称中的第一个单词，count 是该名称的所有出现次数的总和。

我的问题是，如果我尝试直接输出到 .csv 文件，所有内容都会放在一列中，看起来不太好。但是，如果我先输出到一个 .txt 文件，然后在 excel 中打开该文件，它要求我制作一个空格分隔符，它看起来是正确的。我敢打赌答案是非常基本的，但我只是想知道是否有比保存为 .txt 然后重新打开为 .csv 更简单的方法。此外，为什么我可以打开一个新的 excel 文件并从那里打开 .txt 文件并且它可以工作，而如果我尝试直接将 .txt 文件“打开”到 excel 中它不起作用（而是给我旧的结果在一列中的所有内容）？

非常感谢您提供的任何帮助！

编辑：当我使用“打开方式”按钮将 .txt 文件作为 csv 打开时，输出如下所示：

```
 Word      Count
    the 333
    Family 54 
```

当我打开一个新的 excel 文件并从那里打开 .txt 文件并使用文件打开之前出现的分隔符选项时，它看起来像这样正确：

```
 Word, Count
    the, 333
    Family, 54 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:14:22.307

CSV = 逗号分隔值

您需要输出以逗号而不是空格分隔的数据。您可以将其另存为 .csv 并双击以在 excel 中打开。然后数据出现在两列中。

> 此外，为什么我可以打开一个新的 excel 文件并从那里打开 .txt 文件并且它可以工作，而如果我尝试直接将 .txt 文件“打开”到 excel 中它不起作用（而是给我旧的结果一列中的所有内容）

同样的原因。如果您在 excel 中打开一个 .txt 文件，它只会以文本形式打开。它不知道如何解释这些数据（哪些内容进入了哪些列）。当您“打开一个新的 excel 文件并从那里打开 .txt 文件”时，您正在“导入”数据，并且您告诉 excel 将数据解释为以空格为分隔符的两列，因此它可以工作。

您还可以使用“打开方式”直接在 Excel 中打开 .txt 文件，然后使用“文本到列”功能以电子表格友好的方式对数据进行重构。

# java - 为什么身份映射器会内存不足？

> ID：12302708
> 
> 赞同：2
> 
> 时间：2012-09-06T14:48:28.710
> 
> 标签：java, hadoop, out-of-memory, amazon-emr

在一个 reduce-only Hadoop 作业中，输入文件由身份映射器处理，并在不修改的情况下发送到 reducer。在我的一些工作中，我很惊讶地看到该工作在映射阶段失败，出现“内存不足错误”和“超出 GC 开销限制”。

据我了解，身份映射器上的内存泄漏是不可能的。这种错误的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T21:35:02.393

经过几个小时的研究和反复试验，我意识到我为 TASK 组配置的机器是内存不多的小型实例，更有趣的是，我内存不足的时候是在洗牌而不是映射期间。

# ruby - Key为数组时选择Hash值

> ID：12302709
> 
> 赞同：0
> 
> 时间：2012-09-06T14:48:32.140
> 
> 标签：ruby

我有一个散列，其中有一些键作为数组，如下所示：

```
foo = {[45, 121]=>:some_field} 
```

如何选择 :some_field 其中 foo 键包含 45？

其次，如果找到匹配项，我如何检索同一键中的其他元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:51:53.550

尽管您可以这样做，但它有点违背了使用哈希的目的，因为您必须对整个事物进行线性扫描。为相同的值设置多个哈希键会更好，因为您可以使用哈希作为索引。

例子：

```
found = foo.find { |k, v| k.include?(n) }
found and found[1] 
```

请记住，如果您在键中有大量条目并且在散列中有大量项目，则此性能将很*糟糕，因为它必须单独针对所有键和所有值进行测试。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:50:35.760

```
foo = {[45, 121]=>:some_field}
foo.detect{ |k,v| k.include? 45 }
#=> [[45, 121], :some_field]
foo.detect{ |k,v| k.include? 45 }.last
#=> :some_field 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:57:55.740

如果它不仅仅是一个元素，我建议反转你的哈希：

```
foo = {[45, 121]=>:some_field, [1, 45, 7] => :some_other_field}

bar = {}
foo.each do |k, v|
  k.each do |x|
    if bar.has_key?(x)
      bar[x] << [[k, v]]
    else
      bar[x] = [[k, v]]
    end
  end
end

p bar[45] 
```

# objective-c - 返回值的内存管理

> ID：12302713
> 
> 赞同：0
> 
> 时间：2012-09-06T14:48:50.447
> 
> 标签：objective-c, memory-management

我想从一个方法返回多个值，我决定使用一个数组来这样做

```
-(NSArray *) foo {
    // some operations here
    return @[node, [NSNumber numberWithInt:i], [NSNumber numberWithBool:flag]];
} 
```

一个例子是

```
-(NSArray *) foo {
    return @[@"hi", [NSNumber numberWithInt:3], [NSNumber numberWithBool:YES]];
} 
```

这是一种首选方式吗，并且由于有一个`NSArray`像这样创建的对象，需要保留，但可以在以后没有新所有者时释放，这是否需要在自动释放池中？

```
-(NSArray *) foo {
    @autorelease {
        // some operations here
        return @[node, [NSNumber numberWithInt:i], [NSNumber numberWithBool:flag]];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:01:27.853

使用 ARC 进行编译时，您不需要做任何事情——它会为您处理这种内存管理。实际上，在这里将对象放入自动释放块中是*错误*的，因为您需要对象在方法结束后存活并返回给调用者。

在 MRR 下，您*将*确保返回值是自动释放的，这就是 ARC 为您做的事情。

然而，它在任一方案下放入的自动释放池处于更高级别 - 在被调用函数之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:55:39.003

该自动释放池是不必要的。runloop 已经有一个自动释放池，并且您在返回时创建的数组被标记为自动释放，因此，这个数组将被释放。

您不会从 Objective-c 方法返回多个值，就像您不会从 c 中返回多个值一样。您可以传递对该方法的引用并在该方法中分配值，或者返回包含您希望返回的数据的集合对象，或者创建一个包含您希望从该方法返回的响应的自定义类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T14:56:11.247

没有。它是自动释放的，目的是为了不必明确地释放它。如果您将`return XYZ..`语句包装在自动释放池中，它将被释放（这不是您想要的，因为它随后被释放并且您返回一个无效的指向调用函数的指针），或者由于函数返回，耗尽pool 永远不会发生，并且您基本上最终会泄漏池本身。你要么不添加这样的东西，要么在**调用者**函数中使用自动释放池。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T14:55:17.633

你有几个选择。

1.  创建并返回字典。这有一个优点（相对于返回 NSArray），您不依赖于数组上的项目的顺序或数量。您可以有条件地退回一些物品。
2.  实现一个表示您需要返回的信息的新类。该类应该具有所有必需的属性，因此您可以创建一个实例，设置属性并返回它。
3.  通过[引用](https://stackoverflow.com/questions/1344476/how-to-pass-values-by-reference-in-objective-c-iphone)返回：

    ```
    - (void)someMethod:(int)argument returnValue1:(int *)ret1 returnValue2:(int *)ret2; 
    ```

    然后你可以这样称呼它：

    ```
    int r1;
    int r2;
    [object someMethod:arg returnValue1:&r1 returnValue2:&r2];
    // r1 and r2 now contain the values that were set in the method implementation. 
    ```

# php - PHP \ MySQL \ AJAX - 动态字段

> ID：12302719
> 
> 赞同：0
> 
> 时间：2012-09-06T14:49:15.357
> 
> 标签：php, mysql, ajax

我无法将不同的变量传递给我的 javascript 函数。开始：

我有基本构建数据行的 PHP 代码。我想要做的是通过 AJAX 调用分别保存每一行。这是我到目前为止所拥有的。发生的事情是第一行工作正常，但所有后续行都没有（javascript变量是第一行的变量）。

前端 PHP 代码

```
 <?php 
  $result = mysql_query("SELECT * FROM scoresheet WHERE matchup_id = '$matchupid' AND   team_id = '$teama' AND status = '1' "); 
  $num_rows = mysql_num_rows($result);
  if ( mysql_num_rows($result) == 0 ) { echo "<div style='float:left;clear:both;'>Nothing found</div>"; } else {
while($row = mysql_fetch_array($result)) 
{
echo "  <form name='input'>";    
echo "  <div class='tablecell'>".$row['full_name']."</div>";
echo "  <div class='tablecell'>".$row['scoresheet_id']."</div>";
echo "  <input type='hidden' id='scoresheet_id' name='scoresheet_id' value='".$row['scoresheet_id']."'></input>";
echo "  <div class='labelAnswer'><input class='standardscore' type='textfield' id='presenta' name='presenta' value='".$row['present']."'></input></div>";
echo "  <div class='labelAnswer'><input class='standardscore' type='textfield' id='sparea' name='sparea' value='".$row['spare']."'></input></div>";
echo "  <div class='labelAnswer'><input class='standardscore' type='textfield' id='goaliea' name='goaliea' value='".$row['goalie']."'></input></div>";
echo "  <div class='labelAnswer'><input class='standardscore' type='textfield' id='goalsa' name='goalsa' value='".$row['goals']."'></input></div>";
echo "  <div class='labelAnswer'><input class='standardscore' type='textfield' id='assistsa' name='assistsa' value='".$row['assists']."'></input></div>";
echo "  <div class='labelAnswer'><input class='standardscore' type='textfield' id='yellowa' name='yellowa' value='".$row['yellow']."'></input></div>";
echo "  <div class='labelAnswer'><input class='standardscore' type='textfield' id='reda' name='reda' value='".$row['red']."'></input></div>";
echo "  <input type='button' class='btnInput'  style='float:left;margin-top:-2px;' onClick='updatescore()' value='Save'></input>";
}    
}
?> 
```

JAVASCRIPT代码

```
function updatescore() {
    var presenta = document.getElementById('presenta').value;
    var sparea = document.getElementById('sparea').value;
    var goaliea = document.getElementById('goaliea').value;
    var scoresheet_id = document.getElementById('scoresheet_id').value;

    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    }
    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("txtuser").innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", "testajax-x.php?presenta="+presenta+"&sparea="+sparea+"&goaliea="+goaliea+"&scoresheet_id="+scoresheet_id, true);
    xmlhttp.send();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:03:20.407

好吧，您的问题是您将回显出一堆具有相同 ID 的表单为了使其正常工作，每个输入项都必须有自己的 ID。

您的 javascript 行：

```
var presenta = document.getElementById('presenta').value;
var sparea = document.getElementById('sparea').value;
var goaliea = document.getElementById('goaliea').value;
var scoresheet_id = document.getElementById('scoresheet_id').value; 
```

会自动选择他们遇到的那些 id 的第一个元素。所以你需要在每次循环迭代时使增量 id 像 presenta1、presenta2 等。然后您需要在对`updatescore()`.

你可以尝试这样的事情：

```
$i=1;
while($row = mysql_fetch_array($result)) 
{
echo "  <form name='input'>";    
echo "  <div class='tablecell'>".$row['full_name']."</div>";
echo "  <div class='tablecell'>".$row['scoresheet_id']."</div>";
echo "  <input type='hidden' id='scoresheet_id' name='scoresheet_id' value='".$row['scoresheet_id']."'></input>";
echo "  <div class='labelAnswer'><input class='standardscore' type='textfield' id='presenta{$i}' name='presenta' value='".$row['present']."'></input></div>";
echo "  <div class='labelAnswer'><input class='standardscore' type='textfield' id='sparea{$i}' name='sparea' value='".$row['spare']."'></input></div>";
echo "  <div class='labelAnswer'><input class='standardscore' type='textfield' id='goaliea{$i}' name='goaliea' value='".$row['goalie']."'></input></div>";
echo "  <div class='labelAnswer'><input class='standardscore' type='textfield' id='goalsa{$i}' name='goalsa' value='".$row['goals']."'></input></div>";
echo "  <div class='labelAnswer'><input class='standardscore' type='textfield' id='assistsa{$i}' name='assistsa' value='".$row['assists']."'></input></div>";
echo "  <div class='labelAnswer'><input class='standardscore' type='textfield' id='yellowa{$i}' name='yellowa' value='".$row['yellow']."'></input></div>";
echo "  <div class='labelAnswer'><input class='standardscore' type='textfield' id='reda{$i}' name='reda' value='".$row['red']."'></input></div>";
echo "  <input type='button' class='btnInput'  style='float:left;margin-top:-2px;' onClick='updatescore({$i})' value='Save'></input>";
$i++;
} 
```

请注意，您需要修改您的 javascript 以将增量值添加到`getElementById`选择器，例如：

```
function updatescore(id) {
    var presenta = document.getElementById('present'+id).value;
    // and so on. 
```

最后，您需要将行 id 值添加到 ajax 调用，以便您知道要更新数据库中的哪一行。

使用数据库中的行 ID（如果您在该表上有一个自动增量值）甚至可能比`$i`我显示的增量变量更好，因为这将为您提供一种直接的方法来将每个 HTML 行绑定到通过 javascript 进行 AJAX 调用。

# android - Android AVD + Eclipse：如何从 Android 文件资源管理器中删除目录？

> ID：12302720
> 
> 赞同：1
> 
> 时间：2012-09-06T14:49:14.310
> 
> 标签：android, eclipse, file, explorer, avd

我正在使用 eclipse 来运行开发 apk。

我可以从 mnt/sdcard 中删除 apk 创建的文件-

但我无法删除创建文件夹。当我点击一个文件夹时，红色的减号图标是灰色和禁用的，但是当我点击一个文件时它是启用的并且是红色的。

那么，如何删除文件夹呢？我不能每次都销毁 sdcard，我正在下载一个非常复杂的文件夹结构

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T15:22:41.717

您可以通过 连接到 Android Emulator 实例`adb`。这允许您通过命令行删除文件和文件夹。

只需执行`adb shell rm -r /mnt/sdcard/yourfoldername`

# asp-classic - 经典 ASP：我的代码将数量从一打转换为件有什么问题（例如 10.3 一打 = 123 件）

> ID：12302722
> 
> 赞同：1
> 
> 时间：2012-09-06T14:49:24.263
> 
> 标签：asp-classic

我想要的是从一块检索数据库中的数量并将其转换为十几个。然后输入为打并转换回碎片并再次保存到数据库。

当我输入数据时，例如。10.3，它应该为我转换为 123 件（（10 * 12）+ 3）。我的代码在没有我的“If 子句”的情况下运行良好，但只有当数据是“单一”类型时。当我输入整数时出错，所以我添加了“If..”语句首先检查它，现在输出对于整数是正确的，但当我输入单个数字时不正确。

我有这个代码..

```
Function DzToPcs(val)

'If CLng(val) = val then <-- not work
'if Fix(val) <> val then <-- work but the output was not correct when input single type number.
if Int(vInt) = vInt then <-- work but the output was not correct when input single type number.
    DztoPcs = val * 12
else
    strInt =  Cstr(val)
    a = Split(strInt,".")

    dz = a(0) 
    pcs = a(1)

    getdz = Cint(dz)
    getpcs = Cint(pcs)

    DztoPcs = (getdz * 12) + getpcs
end if 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:56:57.597

我不确定你的`if`陈述有什么问题（我的 VBScript 有点生疏），但你可以试试这个替代方案：

```
Function DzToPcs(val)

    strInt =  Cstr(val)
    a = Split(strInt,".")
    dz = a(0) 

    if UBound(a) > 0 then
        pcs = a(1)
        getdz = Cint(dz)
        getpcs = Cint(pcs)
        DztoPcs = (getdz * 12) + getpcs
    else
        DztoPcs = dz * 12
    end if 

end function 
```

# ruby-on-rails - 抓取 rake 任务似乎遭受了不必要的缓存

> ID：12302732
> 
> 赞同：4
> 
> 时间：2012-09-06T14:50:00.957
> 
> 标签：ruby-on-rails, caching, mechanize-ruby

我难住了！

我有一个 rake 任务，它每分钟运行一次。

登录后，它会找到我感兴趣的 JSON，但在 rake 任务中注意到 JSON 中的任何更改之前，它最多可以运行 30 次任务。在此期间，我错过了某些 JSON 对象的一些更改。

似乎有一些缓存正在进行，我试图关闭机械化缓存，如图所示，只是不确定我现在还能尝试什么。

任何指针？

提前致谢。

```
 agent = Mechanize.new # {|a| a.log = Logger.new(STDERR) }
  agent.history.clear
  agent.max_history = 0
  agent.user_agent_alias = 'Mac Safari'
  page = agent.get 'http://website.com'
  form = page.forms.first
  form.email = 'me@home.com'
  form.password = 'mypassword'

  page = agent.submit form
  page = agent.get 'http://website.com/password_protected_page'
  jsonDirty = page.search '//script[@type="application/json"]' 
```

来自服务器的响应：

```
{"server"=>"nginx", "date"=>"Thu, 13 Sep 2012 14:16:43 GMT", "content-type"=>"text/html; charset=utf-8", "connection"=>"close", "vary"=>"Cookie", "content-language"=>"plfplen", "set-cookie"=>"csrftoken=pVDg2SJ4KHqONz2OiEkNK7IbKlnJSQQf; expires=Thu, 12-Sep-2013 14:16:43 GMT; Max-Age=31449600; Path=/, affiliate=; expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; Path=/, one-click-join=; expires=Thu,01-Jan-1970 00:00:00 GMT; Max-Age=0; Path=/", "expires"=>"Thu, 01 Jan 1970 00:00:01 GMT", "cache-control"=>"no-cache", "content-encoding"=>"gzip", "transfer-encoding"=>"chunked"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:46:46.110

您可以尝试将随机查询参数附加到 URL。如：

```
page = agent.get "http://website.com/password_protected_page?random=#{Time.now.to_i}" 
```

# sql - 联合中具有聚合函数的子查询

> ID：12302733
> 
> 赞同：0
> 
> 时间：2012-09-06T14:50:18.427
> 
> 标签：sql, sql-server-2008

我正在构建以下帖子中的 SQl 语句：[Union two different tables with a primary ID field](https://stackoverflow.com/questions/12285366/union-two-different-tables-with-a-primary-id-field)

我试图将两个表（md_master 和 cd_personal_checks）合并到一个视图中。这是我目前的声明。

```
CREATE VIEW ViewCR AS  

SELECT id  + 100000000000000000 AS id, a.external_code + CAST(id AS varchar(15)) as crUniqueId,
       m.check_amount, 'C' as crType, m.postprint_date as activationDate,
       m.postprint_date as creationDate, m.memo_explanation as reasonLine1, m.check_no
  FROM MD_Master m
  Join accounts a on m.account_tag = a.acct_id
 WHERE (m.postprint_tag = 2) OR (m.postprint_tag = 4) OR 
       (m.postprint_tag = 5) OR (m.postprint_tag = 7)

 UNION ALL 

SELECT id + 200000000000000000 as id, 'PERCHK' + CAST(id AS varchar(15)) as crUniqueId,
       check_amount, 'P' as crType, business_date as activationDate,
       business_date as creationDate, identify_description as reasonLine1, check_no
  FROM cd_personal_checks 
```

然而，我遇到了另一个障碍。我需要从另一个表中获取数据（它有一个链接到上面提到的两个表中的每一个）

在上面的两个选择语句中，我需要添加一个名为“dispositionAmount”的字段，即 check_amount - SUM(md_cr_pending.current_amount)

`md_cr_pending`表有一个`master_id`与表链接的字段`md_master.id` `md_cr_pending`有一个与表链接的`cd_personal_check_id`字段`cd_personal_checks.id`

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:00:32.020

由于您没有发布第三张表和 forignKeys，我只能对此提供帮助：

```
CREATE VIEW ViewCR AS  

    SELECT id  + 100000000000000000 AS id, 
    a.external_code + CAST(id AS varchar(15)) as crUniqueId, 
    m.check_amount, 
    'C' as crType, 
    m.postprint_date as activationDate, 
    m.postprint_date as creationDate, 
    m.memo_explanation as reasonLine1, 
    m.check_no,
    m.check_amount - sh.sumAmount As Difference 
    FROM MD_Master m
    Join accounts a on m.account_tag = a.acct_id
    INNER JOIN (SELECT forignKeyID, 
                SUM(md_cr_pending.current_amount) as sumAmount 
                FROM Table 3
                Group BY forignKeyID) sh ON sh.forignKeyID = m.ID
    WHERE (m.postprint_tag = 2) OR (m.postprint_tag = 4) OR 
          (m.postprint_tag = 5) OR (m.postprint_tag = 7)

    UNION ALL 

    SELECT id + 200000000000000000 as id, 
    'PERCHK' + CAST(id AS varchar(15)) as crUniqueId, 
    check_amount, 
    'P' as crType, 
    business_date as activationDate, 
    business_date as creationDate, 
    identify_description as reasonLine1, 
    check_no,
    check_amount - sh.sumAmount As Difference 
    FROM cd_personal_checks 
    INNER JOIN (SELECT forignKeyID, 
                SUM(md_cr_pending.current_amount) as sumAmount 
                FROM Table 3
                Group BY forignKeyID) sh 
                ON sh.forignKeyID = cd_personal_checks.ID 
```

# php - 使用 PHP 错误发布到用户墙

> ID：12302736
> 
> 赞同：0
> 
> 时间：2012-09-06T14:50:32.987
> 
> 标签：php, facebook-graph-api

> **可能重复：**
> [Facebook API 错误 191](https://stackoverflow.com/questions/4691782/facebook-api-error-191)

我有一个 Facebook 页面应用程序运行一个竞赛条目，该条目在条目时发布到用户墙上。我已经设置并在我的开发服务器上工作，但是当我尝试从我的专用服务器托管它时，我收到错误：

> API错误代码：191 API错误描述：指定的URL不属于应用程序错误消息：无效的redirect_uri：应用程序配置不允许给定的URL。

这表明我没有在我的应用程序设置中使用正确的 URL，但我已经检查并仔细检查过，一切正常。这似乎只是在我的专用服务器上托管时出现的问题，因为我已经从服务器测试了该应用程序并且它工作正常。不幸的是，对于这个项目，它必须由我的专用服务器托管。

有谁知道解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:58:36.287

每个 Facebook 应用程序都需要它自己的唯一域名。一个 Facebook 应用程序的一个域名。

为您的生产域名创建新应用程序。

# assembly - 可以使用哪些方法/技术来减少已编译汇编代码中的分支数量？

> ID：12302738
> 
> 赞同：3
> 
> 时间：2012-09-06T14:50:35.167
> 
> 标签：assembly, branch

我试图最小化我编译的汇编代码中分支指令的数量，用于特定架构，由于处理器流水线的实现方式，分支指令的成本非常高。

我可以尝试实现自修改代码以减少在条件分支中必须测试条件的次数，但是我还有其他可以做的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:43:42.240

你***不应该***太在意编译代码中可见的分支指令的数量。您***应该***关心运行程序时在 CPU 上执行分支指令的次数。

减少执行分支数量的两种简单方法：

1.  如果您的架构支持谓词指令，则`if`可以使用谓词指令而不是分支生成小块。您可以要求您的编译器为您执行此操作。例如，如果您的编译器是 GCC，则使用 编译`-O1, -O2, -O3 or -Os`或使用`-fif-conversion2`标志应该这样做。
    *请记住：`if`大块不会进行 if 转换，因为无论条件是否为真，谓词指令都会通过 CPU 流水线。这浪费了周期。*

2.  展开循环。循环意味着分支。如果展开它，您可以执行更少的分支（尽管在编译的代码中，您*仍然*“看到”相同数量的分支指令，对吧？）。
    *但请记住：这会增加代码大小。这可能意味着指令缓存上的未命中率增加。*

例如：

```
for (i = 0; i < N; i++)
  {
     LOOP_BODY;
  } 
```

如果已知 N 是偶数，则手动展开两次很简单：

```
for (i = 0; i < N; i++)
  {
     LOOP_BODY;
     i++;
     LOOP_BODY;
  } 
```

当它执行时，执行的分支数量基本上减半。

同样，您的编译器也可能会自动执行此操作。例如，GCC 使用 . 展开一些循环`-funroll-loops`。

编译器还可以为您做一些其他的技巧。例如，如果它是 GCC，那么您可能应该[在此页面中搜索 'branch'](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)。

# php - 清理值后接受输入的php页面

> ID：12302739
> 
> 赞同：-1
> 
> 时间：2012-09-06T14:50:37.133
> 
> 标签：php, javascript

我有一个页面，我修改它以接受用户的输入，然后它会清理输入值，然后比较密码。然后它将重新路由到另一个页面。我唯一关心的是输入值中的 XSS 和脚本插入。这是我的代码：

```
<?php
/**
 * ****************************************************************************
 * Micro Protector
 * 
 * Version: 1.0
 * Release date: 2007-09-10
 * 
 * USAGE:
 *   Define your requested password below and inset the following code
 *   at the beginning of your page:
 *   <?php require_once("microProtector.php"); ?>
 * 
 *   See the attached example.php.
 * 
 ******************************************************************************/

$Password = 'testpass'; // Set your password here

/******************************************************************************/
   if (isset($_POST['submit_pwd'])){

// Clean up the input values 
foreach($_POST as $key => $value) {  
    $_POST[$key] = stripslashes($_POST[$key]); 

    $_POST[$key] = htmlspecialchars(strip_tags($_POST[$key])); 
}

      $pass = isset($_POST['passwd']) ? $_POST['passwd'] : '';

      if ($pass != $Password) {
         showForm("Wrong password");
         exit();     
      }
   } else {
      showForm();
      exit();
   }

function showForm($error="LOGIN"){
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<html>
<head>
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
   <title>IMC - Authentication</title>
   <link href="style/style.css" rel="stylesheet" type="text/css" />
<Script>
<!--
function capitalize(form) {
    value = form.value;
    newValue = '';
    value = value.split(' ');
    for(var i = 0; i < value.length; i++) {
        newValue += value[i].substring(0,1).toUpperCase() +
        value[i].substring(1,value[i].length) + '';
    }
newValue = newValue.replace(/(<([^>]+)>)/ig,"");
form.value = newValue;
}
-->
</Script>
</head>
<body>
<center><a href="http://www.test.com"><img src="http://www.test.com/theImages/topLogo.png" border=0 /></a></center>
<br><br><br>
    <div id="main">
      <div class="caption"><?php echo $error; ?></div>
      <div id="icon">&nbsp;</div>
      <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" name="pwd">
    Your Name:
        <table>
          <tr><td><input class="text" name="name" onBlur="capitalize(this);" maxlength=12 type="text" /></td></tr>
        </table> 
        Password:
        <table>
          <tr><td><input class="text" name="passwd" maxlength=8 type="password" /></td></tr>
          <tr><td align="center"><br/>
             <input class="text" type="submit" name="submit_pwd" value="Login" />
          </td></tr>
        </table>  
      </form>
   </div>
</body>
</html>

<?php   
}
?> 
```

问题：上述 php 页面是否足够安全以确保用户无法插入任何标签或执行 XSS 攻击？

**编辑**： $_POST[$key] = stripslashes($_POST[$key]); **和**$_POST[$key] = htmlspecialchars(strip_tags($_POST[$key])); 可以一起包含吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:58:51.857

嗯...您不会以任何方式输出用户提供的数据，因此它是完全防注入的。

请注意，您的“逃避”是破坏性的。如果我的密码是，`\<I am awesome!>\`那么我将永远无法登录。

# mysql - MySQL交换主键值

> ID：12302745
> 
> 赞同：1
> 
> 时间：2012-09-06T14:50:49.257
> 
> 标签：mysql

[对sql 交换主键值](https://stackoverflow.com/questions/2810606/sql-swap-primary-key-values)的接受答案因错误而失败`Can't reopen table: 't'`- 大概这与打开同一个表以写入两次有关，从而导致锁定。

是否有任何快捷方式，或者我必须同时获得两者，将其中一个设置为`NULL`，将第二个设置为第一个，然后将第一个设置为先前获取的第二个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:00:46.007

不要为此使用临时表。

从[手册](http://dev.mysql.com/doc/refman/5.0/en/temporary-table-problems.html)：

> 您不能在同一查询中多次引用 TEMPORARY 表。例如，以下内容不起作用：

```
mysql> SELECT * FROM temp_table, temp_table AS t2;
ERROR 1137: Can't reopen table: 'temp_table' 
```

> 如果您在存储函数中以不同别名多次引用临时表，也会发生此错误，即使引用发生在函数内的不同语句中也是如此。

**更新：**

对不起，如果我没有做对，但为什么简单的三路交换不起作用？

像这样：

```
create table yourTable(id int auto_increment, b int, primary key(id));

insert into yourTable(b) values(1), (2);
select * from yourTable;

DELIMITER $$
create procedure pkswap(IN a int, IN b int)
BEGIN
select @max_id:=max(id) + 1 from yourTable;
update yourTableset id=@max_id where id = a;
update yourTableset id=a where id = b;
update yourTableset id=b where id = @max_id;
END $$
DELIMITER ;

call pkswap(1, 2);

select * from yourTable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:35:01.057

要交换 1 和 2 的 id 值，我会使用如下 SQL 语句：

**编辑：**根据我的测试，这不适用于 InnoDB 表，仅适用于 MyISAM 表。

 ~~~~```
UPDATE mytable a 
  JOIN mytable b ON a.id = 1 AND b.id = 2 
  JOIN mytable c ON c.id = a.id
   SET a.id = 0
     , b.id = 1
     , c.id = 2 
```~~  ~~要使此语句起作用，表中不能存在 0 的 id 值，任何未使用的值都适合...但是要使其在单个 SQL 语句中起作用，您需要（暂时）使用第三个 id 值.

* * *

此解决方案适用于常规 MyISAM 表，而不适用于临时表。我错过了这是在临时表上执行的，我对您报告的错误消息感到困惑`Can't reopen table:`。

要在临时表中交换 id 值 1 和 2，我将再次运行三个单独的语句，使用临时占位符值 0：

```
UPDATE mytable a SET a.id = 0 WHERE a.id = 1;
UPDATE mytable b SET b.id = 1 WHERE b.id = 2;
UPDATE mytable c SET c.id = 2 WHERE c.id = 0; 
```

编辑：修正错误~~~~

# winapi - 为什么人们无法连接到我的服务器应用程序？

> ID：12302746
> 
> 赞同：0
> 
> 时间：2012-09-06T14:50:50.690
> 
> 标签：winapi, connection, client-server

我有一个在 Windows 下用 C 编写的服务器，但我似乎只能从也连接到我的计算机所连接的路由器的机器上连接到它。任何想法为什么？这是我的代码：

```
#ifndef WIN32_LEAN_AND_MEAN
#define WIN32_LEAN_AND_MEAN
#endif

#include <windows.h>
#include <winsock2.h>
#include <ws2tcpip.h>
#include <iphlpapi.h>
#include <stdio.h>

#pragma comment(lib,"Ws2_32.lib")

#define PORT "1234"
#define BUFLEN 512

DWORD ErrorMessage(char* msg, int error)
{
    printf("ErrorMessage: %s\nCodErr: %d\n", msg, error);
    return -1;
}

void PrintArray(char* v, unsigned int len)
{
        for(unsigned int i = 0 ; i < len ; i++)
    printf("%c",v[i]);
    printf("\n");
}

DWORD WINAPI ClientHandler(LPVOID lpParam)
{
SOCKET ClientSocket = *((SOCKET*)lpParam);

char recvbuf[BUFLEN];

int iResult,iSendResult;

do
{
    iResult = recv(ClientSocket, recvbuf, BUFLEN, 0);

    if(iResult > 0)
    {
        PrintArray(recvbuf,iResult);

        iSendResult = send(ClientSocket, recvbuf, iResult, 0);

        if(iSendResult == SOCKET_ERROR)
        {
            closesocket(ClientSocket);
            WSACleanup();
            return ErrorMessage("send",WSAGetLastError());
        }
    }

    else if(iResult == 0)
        printf("Connection closing...\n");
    else
    {
        closesocket(ClientSocket);
        WSACleanup();
        return ErrorMessage("recv",WSAGetLastError());
    }
}
while(iResult > 0);

return 0;
}

int main()
{
WSADATA wsaData;

int iResult;

iResult = WSAStartup(MAKEWORD(2,2),&wsaData);

if(iResult != 0)
{
    printf("WSAStartup failed and with error code: %d\n",iResult);
    return ErrorMessage("WSAStartup",GetLastError());
}

struct addrinfo *result = NULL, *ptr = NULL, hints;

memset(&hints,0,sizeof(hints));

hints.ai_family = AF_INET;
hints.ai_socktype = SOCK_STREAM;
hints.ai_protocol = IPPROTO_TCP;
hints.ai_flags = AI_PASSIVE;

iResult = getaddrinfo(NULL,PORT,&hints,&result);

if(iResult != 0)
{
    printf("getaddrinfo failed %d\n",iResult);
    WSACleanup();
    return -1;
}

SOCKET ListenSocket = INVALID_SOCKET;

ListenSocket = socket(result->ai_family, result->ai_socktype, result->ai_protocol);

if(ListenSocket == INVALID_SOCKET)
{
    freeaddrinfo(result);
    WSACleanup();
    return ErrorMessage("socket",WSAGetLastError());
}

iResult = bind(ListenSocket, result->ai_addr, (int)result->ai_addrlen);

if(iResult == SOCKET_ERROR)
{
    freeaddrinfo(result);
    closesocket(ListenSocket);
    WSACleanup();
    return ErrorMessage("bind", WSAGetLastError());
}

freeaddrinfo(result);

if(listen(ListenSocket,5) == SOCKET_ERROR)
{
    closesocket(ListenSocket);
    WSACleanup();
    return ErrorMessage("listen",WSAGetLastError());
}

SOCKET ClientSocket = INVALID_SOCKET;

sockaddr sa;

while(true)
{
    ClientSocket = accept(ListenSocket, &sa /*NULL*/, NULL);

    if(ClientSocket == INVALID_SOCKET)
    {
        closesocket(ListenSocket);
        WSACleanup();
        return ErrorMessage("accept",WSAGetLastError());
    }

    printf("New client arrived...\n");

    if(CreateThread(NULL, 0, ClientHandler, &ClientSocket, 0, NULL) == NULL)
        ErrorMessage("CreateThread",GetLastError());
}

iResult = shutdown(ClientSocket,SD_BOTH);

if(iResult == SOCKET_ERROR)
{
    closesocket(ClientSocket);
    closesocket(ListenSocket);
    WSACleanup();
    return ErrorMessage("shutsown",WSAGetLastError());
}

closesocket(ListenSocket);
WSACleanup();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:39:19.843

我无法遵循您的代码，但通常我使用`bind`with `htons`。在您的代码中，如何将字符串“1234”转换为数值并不明显。我在端口 1234 上编写了一个非常粗糙的简单 Web 服务器，它只是提供一个虚拟的“Hello World”页面。已删除所有验证以保持示例简短：

```
#include "stdafx.h"
#include <tchar.h>
#include <windows.h>
#include <winsock.h>

#pragma comment(lib, "wsock32.lib")

int _tmain(int argc, _TCHAR* argv[])
{
    WSADATA wsaData = {0};
    WSAStartup(0x202, &wsaData);
    SOCKET serverSocket = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);
    SOCKADDR_IN sin = {0};
    sin.sin_family = PF_INET;
    sin.sin_port = htons(1234);
    sin.sin_addr.s_addr = INADDR_ANY;
    bind(serverSocket, (LPSOCKADDR) &sin, sizeof(sin));
    listen(serverSocket, 1);
    SOCKET clientSocket = accept(serverSocket, NULL, NULL);
    while (clientSocket != INVALID_SOCKET)
    {
        char request[1024] = {0};
        recv(clientSocket, request, 1024, 0);
        static char html[] =
            "HTTP/1.1 200 OK\n"
            "Content-Type: text/html\n"
            "\n"
            "<HTML><HEAD><TITLE>Hello World!</TITLE></HEAD><BODY>Hello World!</BODY></HTML>\n\n";
        send(clientSocket, html, sizeof(html), 0);
        closesocket(clientSocket);
        clientSocket = accept(serverSocket, NULL, NULL);
    }
    closesocket(serverSocket);
    WSACleanup();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T19:12:46.417

问题不在您的程序中。问题出在路由器的配置上。

尝试从外部连接到计算机上的其他一些 TCP/IP 服务。

# javascript - codeigniter - 表单的操作属性 - 如何在 javascript 中指定完整的应用程序路径

> ID：12302757
> 
> 赞同：0
> 
> 时间：2012-09-06T14:51:14.563
> 
> 标签：javascript, codeigniter

在我看来，我有以下 javascript：

```
 $.ajax({
    url:"<?php echo site_url('switches/showknownvlans/'.$ip.'/'.$hardwaremodel);?>",
    type:'POST',
    dataType:'json',
    success: function(returnDataFromController) {
    //alert(returnDataFromController.length);
    var htmlstring;
    var submitFormHTML;
    htmlstring = "some html stuff";

    for(i = 0; i < returnDataFromController.length; i++) {

    }
    submitFormHTML = "<form method='post' accept-charset='utf-8' action='controllerX/methodABC/"+ $('#ip').val() +"/" + $('#hardwaremodel').val() +"/" + $('#port').val() + "'><input type='text' id='newVlanID' style='width:5em;height:1.5em'/>&nbsp;&nbsp;<button type='submit' class='btn' id='saveVlan' style='width:10em;height:2em'>Reassign Vlan</button></form>";
    alert(submitFormHTML);
    $('#clientajaxcontainer').html(htmlstring);
    $('#newvlanform').html(submitFormHTML); 
```

我当前在“submitFormHTML”字符串中为表单的“action”属性定义的路径不正确。不是将我的用户带到带有所有参数的“http://myserver/myapp/controllerX/methodABC/”，而是将“controllerX/methodABC/”附加到当前 URL 的末尾。所以如果用户在：

```
 http://myserver/mypp/controller23/method123/ 
```

当单击按钮提交表单时，它们最终会出现在：

```
 http://myserver/mypp/controller23/method123/controllerX/methodABC/ 
```

有没有办法在 javascript 中获取 site_url() 或 base_url？有什么建议么？感谢您阅读帖子。

编辑：

根据某人的建议（我认为这是个好主意），我创建了一个名为“global.js”的新 .js 文件，其中有一行：

```
var BASEPATH = "<?php echo base_url(); ?>"; 
```

然后，此文件包含在我的模板 PHP 文件中，用于我的视图，如下所示：

```
<!DOCTYPE html> <!-- aka HTML5 -->
<html lang="en">
<head>
  <meta charset="utf-8">

<link href="<?php echo base_url();?>assets/css/bootstrap.css" rel="stylesheet">
    <script type='text/javascript' src='<?php echo base_url();?>assets/js/global.js' charset="utf-8"></script> 
```

我已经修改了使表单看起来像这样的javascript： submitFormHTML = " Reassign Vlan"; 警报（提交表单HTML）；

编辑2：

有趣的是，当我在 global.js 中定义 BASEPATH 时，我的 javascript 最终生成的 URL 如下所示：

```
 http://myserver/myapp/index.php/switches/showportvlan/parm1/parm2/%3C?php%20echo%20base_url%28%29;?%3E/index.php/switches/changeportvlan/parm1/parm2/parm3\. 
```

如您所见，它没有解释“”，而是按原样包含文本。

但是，如果我忘记包含一个单独的 js 文件并执行以下操作：

```
<link href="<?php echo base_url();?>assets/css/bootstrap.css" rel="stylesheet">
    <script type='text/javascript'>
         var BASEPATH="<?php echo base_url();?>";
     </script> 
```

它工作得很好。

我不明白为什么包含文件失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:16:29.837

该动作实际上被正确调用。与 href 属性类似，如果您在没有斜杠 ( `/`) 的情况下启动它，它只会将该值附加到当前页面的 uri，这就是您描述的行为。

您有 2 个选项可以从 HTTP HOST 的根目录引用此脚本：

以斜线开头的 action 属性：

```
action="/controllerX/methodABC/" 
```

或添加到您的服务器的完整路径，包括协议：

```
action="http://myserver/mypp/controllerX/methodABC/" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:55:56.670

更新答案以匹配您的新问题

**头文件.php**

```
<base href="<?php echo base_url(); ?>" />

<link href="assets/css/bootstrap.css" rel="stylesheet">

<script>
 //global vars, can be used in any external js file
 var BASEPATH = "<?php echo base_url(); ?>";
 var IP       = "<?php echo $_SERVER['REMOTE_ADDR']";
</script>

<script src="assets/js/global.js"></script> 
```

**global.js**

```
(function($){

   var formsObject = {
       init : function(){
           if($("form#id1"))
           {
              this.formOne; //run form one if id is present
           }
       },
       formOne : function(){
           var fOne = $("form#id1");

           fOne.submit(function(){
               var data = {
                  '' : '',
               }

               do_ajax(data);
           });

           var do_ajax = function(data){
                $.ajax({
                     url : BASEPATH + fOne.attr('action'),
                     //and so on
                });
           }
       }
   }

   //ready
   $(function(){
       formsObject.init();
   });

})(jQuery); 
```

# c# - 正则表达式：可选 - 忽略双引号

> ID：12302759
> 
> 赞同：0
> 
> 时间：2012-09-06T14:51:21.163
> 
> 标签：c#, regex

您好我有一个关于基于以下正则表达式匹配组的问题

```
static string partPattern = @"^(?<Key>\w+)\s*(?<Value>.*)$"; 
```

样本数据如下：

```
 TEST_REPLICATE
    {
        REPLICATE_ID            1986
        ASSAY_NUMBER            877
        ASSAY_VERSION           4
        ASSAY_STATUS            "Research"
            } 
```

我能够正确检索值，如果值为 NULL，它也可以正常工作。我想要做的是也检索一个值，例如最后一个模块是双引号。我不确定我是否做得正确，这是否是上述场景的正确正则表达式，我只是在 w 之前添加了引号。请指正，谢谢

```
 static string partPattern = @"^(?<Key>\"w+)\s*(?<Value>.*)$"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:45:03.437

您的正则表达式不正确。至少对于您提供的输入..

如果我理解了您的问题，这就是您需要的正则表达式。

```
^\s*(?<Key>\w+)\s*\"?(?<Value>.*?)\"?$ 
```

它适用于`multiline`模式...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:16:09.770

不知道你的问题出在哪里。这对我有用：

```
\s*(?<Key>[^\s]+)\s*(?<Value>.*) 
```

# python - 使用 Python 请求重新上传文件

> ID：12302761
> 
> 赞同：0
> 
> 时间：2012-09-06T14:51:26.447
> 
> 标签：python, http, python-requests

我需要从一个站点下载一堆图像，然后通过表单将它们上传到另一个站点。为此，我正在使用 Python 请求。我只是这样做：

```
r = requests.get(image_url)
requests.post(form_url,files={'f1':r.content}) 
```

还是我需要对第一个响应的二进制内容做一些事情，以便远程服务器将其理解为文件？

# php - php xml谷歌地理编码错误

> ID：12302764
> 
> 赞同：0
> 
> 时间：2012-09-06T14:51:33.503
> 
> 标签：php, xml, simplexml, google-geocoder

如果我理解谷歌错误 OVER_QUERY_LIMIT 正确，那是因为 IP 请求太多。但是如果我去浏览器并加载以下链接： [http ://maps.googleapis.com/maps/api/geocode/xml?address=Paris&sensor=true](http://maps.googleapis.com/maps/api/geocode/xml?address=Paris&sensor=true)

我可以看到xml！

那为什么呢？

我的代码有问题吗？

这里是：

```
 $the_map = htmlspecialchars($_POST['map'], ENT_QUOTES);

    error_reporting(0);
    $map_query = file_get_contents('http://maps.google.com/maps/api/geocode/xml?address='.rawurlencode($the_map).'&sensor=false');
    error_reporting(1);

    if ($map_query){
        $geo_code = simplexml_load_string(utf8_encode($map_query));

        if ($geo_code){
            $map_lat = $geo_code->xpath("/GeocodeResponse/result/geometry/location/lat");
            $map_lng = $geo_code->xpath("/GeocodeResponse/result/geometry/location/lng");
            $map_lat = $map_lat[0][0];
            $map_lng = $map_lng[0][0];
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:32:44.273

使用**curl**而不是**file_get_contents**：

```
$address = "India+Panchkula";
$url = "http://maps.google.com/maps/api/geocode/json?address=$address&sensor=false&region=India";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_PROXYPORT, 3128);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
$response = curl_exec($ch);
curl_close($ch);
$response_a = json_decode($response);
echo $lat = $response_a->results[0]->geometry->location->lat;
echo "<br />";
echo $long = $response_a->results[0]->geometry->location->lng; 
```

**或查看以下网址**

[将 file_get_contents 用于 google api 时发出警告](https://stackoverflow.com/questions/12293848/warning-while-using-file-get-contents-for-google-api/12294015#12294015)

# java - java MySQL事务/INSERT IGNORE和ON DUPLICATE KEY UPDATE

> ID：12302771
> 
> 赞同：0
> 
> 时间：2012-09-06T14:51:46.993
> 
> 标签：java, mysql, sql, transactions, insert

```
Connection con= DriverManager.getConnection("jdbc:mysql://"+ host, user, pass);
Statement state = con.createStatement();

con.setAutoCommit(false);

state.executeUpdate("INSERT IGNORE `kb_manage`.`serial` (`serial`) VALUES ('10001')");

state.executeUpdate("INSERT `kb_manage`.`serial` (`serial`) VALUES ('10001') ON 
DUPLICATE KEY UPDATE `serial`='10002'");

con.commit(); 
```

这是我在我的一个应用程序中使用的代码的简化版本。应用程序本身是用 java 编写的，并连接到 MySQL 数据库。我正在尝试创建一个事务，该事务具有多个使用 IGNORE 和 ON DUPLICATE KEY UPDATE 的插入查询。此示例中的表包含 1 个名为 serial 的列，该列设置为 PRIMARY KEY。我遇到的问题是我得到了：

```
java.sql.SQLException: DUP_PK_KEY
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2618)
at com.mysql.jdbc.ConnectionImpl.commit(ConnectionImpl.java:1654)
at remote.SerialValue.main(SerialValue.java:19) 
```

起初我认为我在 SQL 上做错了什么，直到我完全删除了事务并且一切正常......只是不是作为一个相当有问题的事务。知道出了什么问题吗？驱动程序是否只是忽略 IGNORE 和 ON DUPLICATE KEY 还是我做错了什么？我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:06:03.230

在更改您的 autoCommit 状态后创建您的语句：

```
con.setAutoCommit(false);
Statement state = con.createStatement(); 
```

# jquery - jQuery 插件 - 1 个月的日历

> ID：12302772
> 
> 赞同：3
> 
> 时间：2012-09-06T14:51:48.133
> 
> 标签：jquery, date, jquery-plugins, calendar

我正在尝试确定一个 jQuery 插件，它将显示整月的日期长度方式（如下所示 - 数字反映了一个月中的天数（仅限工作日）。

```
-3 4 5 6 7- -10 11 12 13 14- -17 18 19 20 21- -24 25 26 27 28- 
```

从理论上讲，这种方法使当月的某一天成为列 - 然后可以在下面将几个人的日历显示为行。如下所示：

```
---------3 4 5 6 7- -10 11 12 13 14- -17 18 19 20 21- -24 25 26 27 28-
Person A X - - - -   -  -  -  X  -    -  -  -  X  X    -  -  -  -  -
Person B X X X - -   -  X  -  X  -    -  -  X  X  X    X  X  X  -  - 
```

我的问题是“如何使用 jQuery 实现上述目标？（我曾查询 Google 以尝试找到合适的插件 - 但我一直无法确定一个）”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:07:56.240

好吧，[让你开始吧](http://jsfiddle.net/XKfu9/)。

```
(function($){
    var getWeekDaysInCurrentMonth = function(){
        // this will operate off of the current month
        // you can make the month an argument
        // and then d.setMonth(m)

        var d = new Date(), 
            daysInMonth = [], 
            currentDay;

        // go to first day of month
        d.setDate(1);
        var firstDay = d.getDate();
        // go to last day of month
        d.setDate(0);
        var lastDay = d.getDate();

        for (var i = firstDay; i <= lastDay; i++){
            d.setDate(i);
            // get the current day of the week in loop
            currentDay = d.getDay();
            // check not sunday or saturday
            if(currentDay !== 0 && currentDay !== 6)
                daysInMonth.push(i);                
        }
        return daysInMonth;
    };

    console.log(getWeekDaysInCurrentMonth());
    // OUTPUT: [1, 2, 3, 6, 7, 8, 9, 10, 13, 
    //            14, 15, 16, 17, 20, 21, 22, 23, 24, 27, 28, 29, 30, 31] 

})(jQuery)​;​ 
```

下一步是将此函数用于 jQuery 插件以输出一些表格标记。然后，您将向您的插件添加配置，以更改标记的显示方式、首先显示的月份等。如果您仔细阅读我的其他一些 jQuery 答案，您可以找到创建 jQuery 插件（或 google）的示例。

# android - 使用 HTML5 删除捕获的图像

> ID：12302781
> 
> 赞同：0
> 
> 时间：2012-09-06T14:52:10.253
> 
> 标签：android, html

我目前正在为移动设备开发一个网站。该网站需要分析手机摄像头拍摄的照片。我目前通过以下方式获取图像数据：

`<input type="file" id="input_photo" accept="image/*;capture=camera" capture="camera"/>`

然而，在我测试的所有 Android 设备上（Android 是目前的主要平台）和所有浏览器（Stock Browser、Chrome、Firefox），图像要么保存到 /sdcard/DCIM/browser_photos/，要么简单地保存到 /sdcard/。我不需要这些图片，所以我的问题是，是否有办法让浏览器知道不永久保存这些图片或在分析它们后删除这些图片。

PhoneGap 或类似的 API 不是一个选项。我想坚持纯 HTML5 和 JavaScript。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:55:07.003

您只是无法访问设备的存储空间以从浏览器中删除某些内容 - 这将是一个安全问题。常规的操作系统浏览器也是如此——你唯一能做的就是使用文件输入来浏览要上传的文件——仅此而已。

# asp.net - asp.net 中的 AdRotator 控件

> ID：12302786
> 
> 赞同：1
> 
> 时间：2012-09-06T14:52:25.853
> 
> 标签：asp.net, adrotator

我正在尝试使用带有时间的 AdRotator 控件来播放图像的幻灯片。为此，我尝试了类似 **XMLFile1 文件的内容**

```
 <?xml version="1.0" encoding="utf-8" ?>
    <Advertisements>
      <Ad>
        <ImageUrl>~\Images\1.jpg</ImageUrl>
        <NavigateUrl>http://www.google.com</NavigateUrl>
        <AlternateText>AdRotator Control sample ads</AlternateText>
        <Impressions>20</Impressions>
        <Keyword>Asp.Net</Keyword>
      </Ad>

      <Ad>
        <ImageUrl>~\Images\2.jpg</ImageUrl>
        <NavigateUrl>http://www.gmail.com</NavigateUrl>
        <AlternateText>AdRotator Control sample ads</AlternateText>
        <Impressions>30</Impressions>
        <Keyword>Asp.Net</Keyword>
      </Ad>
    </Advertisements> 
```

**WebForm1.aspx**

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="TrialVersion.WebForm1" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>
    </head>
    <body>
        <form id="form1" runat="server">
        <div>
        <asp:ScriptManager ID="scriptmanager1" runat="server">
        </asp:ScriptManager>
        <asp:Timer ID="Timer1" runat="server" Interval="500"></asp:Timer>
        <asp:UpdatePanel ID="upanel" runat="server" UpdateMode="Conditional" 
        Visible="False">
        <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
       </Triggers>
       <ContentTemplate>
       <asp:AdRotator id="adrotator" runat="server" AdvertisementFile="~/XMLFile1.xml" KeywordFilter="Asp.Net"/>
       </ContentTemplate>
       </asp:UpdatePanel>

        </div>
        </form>
    </body>
    </html> 
```

在构建这个应用程序时，它给了我一个空白页面，并且没有显示任何图像。为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-07T06:38:16.753

而不是给这个

```
<ImageUrl>~\Images\1.jpg</ImageUrl> 
```

你就这样给

```
<ImageUrl>Images\1.jpg</ImageUrl> 
```

希望它会起作用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T17:43:24.993

您能否检查删除顶部所有不必要的代码（脚本管理器、计时器和更新面板）。因此，您将能够隔离问题。我认为问题不在于您的广告轮播器，而在于您的计时器和更新面板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T18:33:24.110

这是因为您在 UpdatePanel 中有 Visible="False"。把它拿出来，图像应该会出现。

# javascript - 使用 Razor 和 javascript 获取下拉列表元素

> ID：12302789
> 
> 赞同：0
> 
> 时间：2012-09-06T14:52:36.807
> 
> 标签：javascript, asp.net, razor

我正在尝试根据下拉列表中的选定元素更改 div 的文本

这就是我的看法。

```
<select name="Department"  id="Department" onchange="mychange(this.value);">
@foreach (string s in Model.DepartmentList)
{
    <option value="@s.ToString()">@s.ToString()</option>
}
</select>
will be assign to:
<div id="testjs" > @Model.assignedtoList.ElementAt(1) </div> 
```

在我的java脚本中

```
 function mychange(value) {
    var dropDown = document.getElementById("Department");
    var indx = dropDown.selectedIndex;
    document.getElementById("testjs").innerText = "@(Model.assignedtoList.ElementAt(indx))";
    alert(dropDown.selectedIndex);
} 
```

错误是在“@(Model.assignedtoList.ElementAt(indx))”处引起的；因为找不到 indx 变量。我怎样才能绕过它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:06:36.600

JavaScript 代码在服务器端代码之后执行。我认为您无法将**indx**从 javascript 传递到服务器端剃须刀代码。

尝试使用 Ajax。

# java - Java位操作：替换十六进制的半字节

> ID：12302794
> 
> 赞同：0
> 
> 时间：2012-09-06T14:52:58.020
> 
> 标签：java, bitwise-operators, bit-shift

我必须为家庭作业编写此代码，但我什至不知道从哪里开始。这是我必须编写的方法的javadoc。

```
/**
* Sets a 4-bit nibble in an int

* Ints are made of eight bytes, numbered like so: 7777 6666 5555 4444 3333 2222 1111 0000
*
* For a graphical representation of this:
*   1 1 1 1 1 1                 
*   5 4 3 2 1 0 9 8 7 6 5 4 3 2 1 0 
* +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
* |Nibble3|Nibble2|Nibble1|Nibble0|
* +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
* 
* Examples:
*      setNibble(0xAAA5, 0x1, 0) //=> 0xAAA1
*      setNibble(0x56B2, 0xF, 3) //=> 0xF6B2
* 
* @param num int that will be modified
* @param nibble nibble to insert into the integer
* @param which determines which nibble gets modified - 0 for least significant nibble
*            
* @return the modified int
*/ 
```

这就是我所拥有的。我已经让它与 javadoc 中的第一个示例一起工作，但我知道这并不适用于所有情况。特别是当 int which != 0;

```
public static int setNibble(int num, int nibble, int which)
    {
    int newNibble = (num >> 4);
    newNibble = (newNibble << 4) | nibble;
    return newNibble;
    } 
```

我应该使用轮班还是不使用？有人告诉我，我可以在一行代码中执行此方法。感谢您在高级的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T15:04:07.503

我建议你;

*   通过构造掩码并使用来提取要保留的位`&`
*   使用左移将要添加的位放置到正确的位置`<<`
*   将它们与按位或相结合

# javascript - 如何从 getelementbyid 在 javascript 中编写变量

> ID：12302796
> 
> 赞同：0
> 
> 时间：2012-09-06T14:53:02.863
> 
> 标签：javascript, html, getelementbyid

这可能是一个简单的问题（或者我认为是），但是，无论我多么喜欢它，我仍然无法让它工作。我正在尝试在 li 标签内写入一个变量。此变量应将文本保存在另一个 div 标记中，如下所示：

```
<script type="text/javascript">
var item = document.getElementById('thistext').innerHTML;
                    function songlist () {
document.write("<div class='overview'><ul><li> item </li></ul></div>");
}
</script>

<div id="thistext">hello</div>

<!-- I want it to appear here -->
<div class="viewport">
<script type="text/javascript">
songlist ();
</script>
</div> 
```

所以基本上我需要“thistext”div标签内的文本出现在ul等内的li标签内（我不知道这是否是不必要的信息）我也试过把脚本和它的功能放在里面视口标签本身和：

```
document.getElementById("id").innerHTML = "value"; 
```

那个布局也是，但它似乎没有显示工作，我似乎无法理解为什么。我期待着回复，并提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:55:28.363

将其更改为

```
document.write("<div class='overview'><ul><li>" + item + "</li></ul></div>"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T14:55:29.507

```
document.write("<div class='overview'><ul><li> item </li></ul></div>"); 
```

需要是

```
document.write('<div class="overview"><ul><li>' + item + ' </li></ul></div>'); 
```

编辑：

我觉得我应该指出这不是实现这一目标的最佳方式。也许这样的事情会更好......

```
<script type="text/javascript">
   window.onload = function(){
      document.getElementById('viewport').innerHtml = document.getElementById('thistext').innerHtml;
   };
</script> 
```

说到这里，你有没有看过[jQuery](http://jquery.com)框架？它使 DOM 操作变得非常容易。虽然有时间和地点。如果您所做的只是用`<div>`另一个文本替换其中的文本，`<div>`那么它可能不合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:59:58.893

- 现在它可以工作了：您在 getElementById 中缺少 '' 并且必须将函数移动到 div 之后，并且您必须在文档中将变量用 +''+ 包围

jsfiddle：http: [//jsfiddle.net/fMNWt/](http://jsfiddle.net/fMNWt/)

```
<div id="thistext">hello</div>
     <script type="text/javascript">
var item = document.getElementById('thistext').innerHTML;
                    function songlist () {
document.write("<div class='overview'><ul><li>" + item + "</li></ul></div>");
}
</script>  
<!-- I want it to appear here -->
<div class="viewport">
<script type="text/javascript">
songlist ();
</script>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T14:55:37.557

像这样？

```
document.write("<div class='overview'><ul><li>" + item + "</li></ul></div>"); 
```

# machine-learning - 仅对一类朴素贝叶斯表现良好

> ID：12302799
> 
> 赞同：1
> 
> 时间：2012-09-06T14:53:07.530
> 
> 标签：machine-learning, artificial-intelligence, weka, bayesian, sentiment-analysis

我使用 Weka 的 Naive Bayes 进行文本分类。我的句子有两个类，“正面”和“负面”。我收集了大约 207 个积极意义的句子和 189 个消极意义的句子，以创建我的训练集。

当我用一个包含强烈否定意义的句子的测试集运行朴素贝叶斯时，比如“恨”这个词，结果的准确率相当不错，大约 88%。但是当我使用具有积极意义的句子时，例如“爱”这个词中的一个，作为测试集，准确率要差得多，大约为 56%。

我认为这种差异可能与我的训练集有关，尤其是它的“正面”句子。

你能想到任何可以解释这种差异的原因吗？或者也许有一种方法可以帮助我找出问题的根源？

非常感谢您的时间，

南蒂亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T22:26:47.317

我不会创建仅包含正样本或负样本的测试集，而是创建一个包含混合样本的测试集。您可以在 Weka 中查看生成的混淆矩阵，这使您可以查看正样本和负样本的分类情况。此外，我会使用（10 倍）交叉验证来获得更稳定的性能测量（一旦你这样做了，你可能想用混淆矩阵交叉验证结果编辑你的帖子，我们也许可以提供帮助更多的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:45:00.373

可能是您的否定句中出现的词更一致，而您的肯定句中出现的词有更多变化，或者这些词也可能经常出现在否定句中。

如果不知道字典的大小（即属性的数量）、测试集的大小等，很难给出具体的建议。由于朴素贝叶斯分类器计算单个单词出现或不存在的概率的乘积，我将采取一些错误分类的正例并检查正分类和负分类的条件概率，以了解这些示例被错误分类的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T01:05:43.467

为了更好地理解分类器的工作原理，您可以检查参数以查看分类器认为哪些词最能预测句子的正面/负面。你能打印出正面和负面案例的主要预测因子吗？

例如，

```
top positive predictors:
p('love'|positive) = 0.05
p('like'|positive) = 0.016
...

top negative predictors:
p('hate'|negative) = 0.25
p('dislike'|negative) = 0.17
... 
```

# opengl - 使用 2 个摄像头进行头部姿势估计

> ID：12302802
> 
> 赞同：2
> 
> 时间：2012-09-06T14:53:17.507
> 
> 标签：opengl, opencv, computer-vision, camera-calibration, pose-estimation

我正在使用 2 个摄像头进行头部姿势估计项目。对于一个相机系统工作并返回头部相对于每个相机坐标系的旋转矩阵和平移向量。我在 OpenGL 场景中渲染了对象，该对象被旋转和平移以表示头部运动。要显示计算的旋转矩阵和平移向量，我只需使用以下 OpenGL 命令。

```
glMatrixMode(GL_MODELVIEW);
glLoadMatrixd(pose_matrix); 
```

其中姿势矩阵是由头部的旋转矩阵和平移向量构造的 OpenGL ModelView 矩阵。

现在我正在尝试为 2 个校准的相机执行此操作。当第一个相机丢失了脸部的轨迹但第二个相机估计了头部姿势时，我会显示相对于第二个相机的旋转和平移，反之亦然。我想显示一个 OpenGL 对象并为这两种情况移动它。为此，我需要将姿势矩阵转移到公共坐标系中。

我知道 2 个相机相对于彼此的相对几何形状。我假设其中一个相机是世界坐标系，我通过将第二个相机的位姿矩阵和第二个相机的校准矩阵相对于第一个相机相乘，将第二个相机的头部姿势矩阵转移到第一个相机的框架。当我将此相乘矩阵加载到 OpenGL ModelView 矩阵中时，我得到了错误的结果。当第一台相机捕捉到人脸时，对象正在向右移动，但对于第二台相机，对象被平移和旋转，并且与第一台相机的情况不同。

可能是什么问题呢？也许OpenGL显示部分是错误的或者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:48:49.470

安全的默认假设：OpenGL 是正确的，您的代码是错误的。

在没有看到您的代码的情况下，我可以建议您打印您的矩阵并在 Matlab 或 Octave 中使用它们仔细检查数学。

一个常见的错误是忘记默认情况下 OpenGL PRE 将 ROW 向量乘以 modelvie 矩阵（实际上是所有矩阵）。也就是说，它乘以 v_row * M，矩阵以 col-major 顺序存储，而您可能正在考虑将向量视为 COLUMN 的常见数学惯例，并将它们 POST 乘以 M * v_col（存储 M行主要）。

如果您更喜欢使用后一种约定（推荐），请查找[GL_ARB_transpose_matrix](http://www.opengl.org/registry/specs/ARB/transpose_matrix.txt)扩展。

# paypal - PayPal 模块 Prestashop（沙盒模式）

> ID：12302808
> 
> 赞同：0
> 
> 时间：2012-09-06T14:53:33.373
> 
> 标签：paypal, prestashop

我在 PrestaShop 1.2.x 上，我有 PayPal 和 PayPal api 模块，这是唯一的付款方式。

现在，我在沙盒模式下测试它，我可以使用开发人员测试帐户付款，但是当我返回商店时，会创建一个带有错误付款的订单！

有人知道我能做些什么来解决这个问题吗？

这是来自 PayPal 关于订单的消息：

> ```
> En 06-09-2012 16:47:06 desde Privado:
> Pago: Pending 
> ```

谢谢！对不起我的英语不好：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:40:39.447

再试一次`debug sandbox mode`，然后在沙盒中尝试所有方法测试（组合框方法支付）。如果工作正常并且在在线模式下仍然错误。

您应该修改paypal模块，在尝试沙盒方法时创建日志支付以保存txt文件。您将看到记录数据。提交数据时可能有问题。

# android - android 3.1 上的 GCM 推送通知：禁用广播接收器

> ID：12302812
> 
> 赞同：6
> 
> 时间：2012-09-06T14:53:49.830
> 
> 标签：android, broadcastreceiver, push, google-cloud-messaging

android 3.1 上的 android 推送通知 (GCM) 存在问题：当我的应用程序关闭时 - 应该处理 GCM 推送消息 (Intents) 的广播接收器永远不会被调用。

在较低版本的 android 中，一切正常。广播接收器总是被调用（即使应用程序关闭）。

我知道从 Android 3.1 开始有新概念：当应用程序未运行时，它处于“停止”状态：http: [//developer.android.com/about/versions/android-3.1.html#launchcontrols](http://developer.android.com/about/versions/android-3.1.html#launchcontrols)

因此，如果您想通过 Intent 启动“停止”应用程序 - 您应该将 FLAG_INCLUDE_STOPPED_PACKAGES 标志添加到 Intent。

但问题是我无法将 FLAG_INCLUDE_STOPPED_PACKAGES 标志添加到 GCM 意图，因为 GCM 意图（我的意思是“com.google.android.c2dm.intent.RECEIVE”和“com.google.android.c2dm.intent.REGISTRATION”）被抛出由操作系统。

所以我的问题是：在应用程序（其中注册了广播接收器）关闭（处于“停止”状态）的情况下，我如何通过广播接收器处理来自 GCM 的推送消息（在 android 3.1 上）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T14:56:50.217

> 在应用程序（其中注册了广播接收器）关闭（处于“停止”状态）的情况下，我如何通过广播接收器处理来自 GCM 的推送消息（在 android 3.1 上）？

你不能。如果用户强制停止您的应用程序，除非手动调用，否则您的应用程序将不会再次运行（在 Android 3.1+ 上），例如用户启动您的一项活动。您的目标是让用户没有理由强制停止您的应用程序。

# java - 仍然无法在代理 servlet 中处理 HTTPS 请求

> ID：12302816
> 
> 赞同：0
> 
> 时间：2012-09-06T14:54:00.863
> 
> 标签：java, tomcat, servlets, https

我在Tomcat下开发了一个代理servlet，servlet接收客户端的请求并转发到另一个代理服务器，在转发之前，它会与代理服务器进行身份验证。现在它可以很好地处理 HTTP 请求但无法接收 HTTPS 请求。所以这个代理 servlet 并不完美。

我在这个论坛上搜索了谷歌并阅读了很多帖子，尤其是这个：

[开发可以处理 HTTPS 连接的代理 servlet](https://stackoverflow.com/questions/9150578/developing-a-proxy-servlet-that-can-handle-https-connections/12301228#12301228)

我配置Tomcat监听8443端口，如下：

```
<Connector port="8443" protocol="org.apache.coyote.http11.Http11Protocol" SSLEnabled="true"
           keystoreFile="${user.home}/.keystore" keystorePass="changeit"
           maxThreads="150" scheme="https" secure="true"
           clientAuth="false" sslProtocol="TLS" redirectPort="8080"/> 
```

我在 eclipse 中本地部署了 servlet，并将浏览器代理设置为 127.0.0.1:8080，但绕过它访问 localhost。

当我浏览 https://localhost:8443/ 时，我可以看到在 servlet 日志中收到的 https 请求（通过调用 request.getScheme() 和 request.isSecure()）。但是如果我浏览[https://www.google.com](https://www.google.com)，它就无法连接，并且我的代理 servlet 没有捕捉到请求。

我还重写了 service() 方法并打印了 request.getMethod() ，但仍然未能捕获 HTTPS 请求。

我应该怎么办？

我想要的只是获取 HTTPS 请求并添加身份验证并转发到下一个代理服务器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:47:27.257

这不是 SSL 代理的工作方式。如果您将 HTTPS 代理设置为`localhost:8080`，那么您的浏览器将尽职尽责地连接到`localhost:8080`并使用`CONNECT`动词通过 HTTP 代理连接来隧道 SSL 流量。如果不这样做，SSL 将不会特别安全，并且任何代理服务器管理员都可以在下次有人决定从亚马逊购买东西或检查他们的银行余额或注册定期支付成人娱乐网站时轻松读取一个人的信用卡详细信息或如今，无论人们做什么都需要 SSL。

您似乎没有告诉您的浏览器任何关于端口 8443 上的新 SSL 代理的任何信息，所以我不确定您为什么认为它会被使用。它不会。您*可能*可以告诉您的浏览器使用基于 SSL 的代理服务器 - 即将您的代理设置为`https://localhost:8443`，但即便如此，它也会使用`CONNECT`基于 SSL 的隧道，因此除了连接速度较慢之外，真的没有任何意义。

如果您真正需要做的只是将此请求转发到另一个代理，则需要将该`CONNECT`方法转发到上游代理并包含适当的身份验证信息。

# sphinx - Sphinx：组合短语和字段结束运算符

> ID：12302817
> 
> 赞同：1
> 
> 时间：2012-09-06T14:54:01.920
> 
> 标签：sphinx

在组合[短语](http://sphinxsearch.com/docs/current.html#extended-syntax)和[字段结束](http://sphinxsearch.com/docs/current.html#extended-syntax)运算符时，Sphinx（2.0.4-release）似乎忽略了字段结束运算符。

例如搜索时

```
"^some phrase$" 
```

它会正确找到“一些短语”，但它也会找到“一些带有更多单词的短语”，从而忽略字段末端运算符。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:40:20.643

在2.0.5 版本之前[，Sphinx 中](http://sphinxsearch.com/bugs/view.php?id=909)存在一个错误。

作为一种解决方法，在字段结束运算符之后使用空间，所以

```
"^some phrase$" 
```

会变成

```
"^some phrase$ " 
```

# printing - 如何创建可打印的 Twitter-Bootstrap 页面

> ID：12302819
> 
> 赞同：165
> 
> 时间：2012-09-06T14:54:08.073
> 
> 标签：printing, twitter-bootstrap

我正在使用 Twitter-Bootstrap，我需要能够按照浏览器上的外观打印页面。我可以打印使用 Twitter-Bootstrap 制作的其他页面，但我似乎无法打印使用纯 Twitter-Bootstrap 的页面。我在某处缺少标签吗？

打印时的官方 TB 页面： ![Twitter 引导页面](../Images/e07f4f1f7182c29470e1d2a819d59fef.png)

打印时我的页面： ![在此处输入图像描述](../Images/45ade058b2de5c57e09efbeebf828b71.png)

我的页面实际上是什么样的： ![在此处输入图像描述](../Images/b1e7d907a675a3861e188f7aeec568ab.png)

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2013-05-20T06:17:12.247

## Bootstrap 3.2 更新：（当前版本）

当前稳定的 Bootstrap 版本是[3.2.0](http://getbootstrap.com/css/#responsive-utilities-print)。
不推荐使用 3.2 版可见打印，因此您应该像这样使用：

```
Class                        Browser    Print
 -------------------------------------------------
.visible-print-block         Hidden        Visible (as block)
.visible-print-inline        Hidden        Visible (as inline)
.visible-print-inline-block  Hidden        Visible (as inline-block)
.hidden-print                Visible       Hidden 
```

## 引导程序 3 更新：

打印类现在在文档中：http: [//getbootstrap.com/css/#responsive-utilities-print](http://getbootstrap.com/css/#responsive-utilities-print)

```
Similar to the regular responsive classes,
       use these for toggling content for print.

Class            Browser    Print
 ----------------------------------------
.visible-print   Hidden     Visible
.hidden-print    Visible    Hidden 
```

## 引导 2.3.1 版本：

将 bootstrap.css 文件添加到 HTML 后，
找到您不想打印的部分并将`hidden-print`类添加到标签中。因为 css 文件包含以下内容：

```
@media print {
  .visible-print  { display: inherit !important; }
  .hidden-print   { display: none !important; }
} 
```

* * *

## 回答 #2

> 赞同：158
> 
> 时间：2012-09-06T15:06:31.253

一定要为打印分配一个样式表。
它可以是一个单独的样式表：

```
<link rel="stylesheet" type="text/css" media="print" href="print.css"> 
```

或您为所有设备共享的一个：

```
<link rel="stylesheet" type="text/css" href="bootstrap.min.css"> # Note there's no media attribute 
```

然后，您可以在单独的样式表或使用媒体查询的共享样式表中为打印机编写样式：

```
@media print {
    /* Your styles here */
} 
```

* * *

## 回答 #3

> 赞同：114
> 
> 时间：2014-11-11T15:22:40.540

将每个替换`col-md-`为`col-xs-`

例如：将每个替换`col-md-6`为`col-xs-6`.

这是对我有用的东西，可以让我摆脱这个问题，你可以看到你必须更换什么。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-12-04T16:45:13.187

css 文件中有一段`@media print`代码（Bootstrap 3.3.1 [更新：] 到 3.3.5），这几乎去掉了所有的样式，所以即使它正在工作，你也会得到相当平淡的打印输出。

现在我不得不`@media print`从 bootstrap.css 中删除该部分——我真的很**不高兴**，但我的用户想要直接的屏幕抓取，所以现在必须这样做。如果有人知道如何在不更改引导文件的情况下抑制它，我会非常感兴趣。

这是“违规”代码块，从第 192 行开始：

```
@media print {
  *,
  *:before,enter code here
  *:after {
    color: #000 !important;
    text-shadow: none !important;
    background: transparent !important;
    -webkit-box-shadow: none !important;
            box-shadow: none !important;
  }
  a,
  a:visited {
    text-decoration: underline;
  }
  a[href]:after {
    content: " (" attr(href) ")";
  }
  abbr[title]:after {
    content: " (" attr(title) ")";
  }
  a[href^="#"]:after,
  a[href^="javascript:"]:after {
    content: "";
  }
  pre,
  blockquote {
    border: 1px solid #999;

    page-break-inside: avoid;
  }
  thead {
    display: table-header-group;
  }
  tr,
  img {
    page-break-inside: avoid;
  }
  img {
    max-width: 100% !important;
  }
  p,
  h2,
  h3 {
    orphans: 3;
    widows: 3;
  }
  h2,
  h3 {
    page-break-after: avoid;
  }
  select {
    background: #fff !important;
  }
  .navbar {
    display: none;
  }
  .btn > .caret,
  .dropup > .btn > .caret {
    border-top-color: #000 !important;
  }
  .label {
    border: 1px solid #000;
  }
  .table {
    border-collapse: collapse !important;
  }
  .table td,
  .table th {
    background-color: #fff !important;
  }
  .table-bordered th,
  .table-bordered td {
    border: 1px solid #ddd !important;
  }
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-11-04T06:38:50.100

我发现的最佳选择是[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)
[http://jsfiddle.net/nurbsurf/1235emen/](http://jsfiddle.net/nurbsurf/1235emen/)

```
html2canvas(document.body, {  
  onrendered: function(canvas) {
    $("#page").hide();
    document.body.appendChild(canvas);
    window.print();
    $('canvas').remove();
    $("#page").show();
  }
}); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-10-30T09:06:48.813

如果有人在这里寻找**Bootstrap v2.XX**的解决方案。我要离开我正在使用的解决方案。*这并未在所有浏览器上进行全面测试，但它可能是一个好的开始。*

1）确保媒体属性`bootstrap-responsive.css`为`screen`。

```
<link href="/css/bootstrap-responsive.min.css" rel="stylesheet" media="screen" /> 
```

2）创建一个`print.css`并确保其媒体属性`print`

```
<link href="/css/print.css" rel="stylesheet" media="print" /> 
```

3) 在里面`print.css`，在 html & body 中添加你网站的“宽度”

```
html, 
body {
    width: 1200px !important;
} 
```

4.）复制必要的媒体查询类，`print.css`因为它们在里面`bootstrap-responsive.css`，我们在打印时禁用了它。

```
.hidden{display:none;visibility:hidden}
.visible-phone{display:none!important}
.visible-tablet{display:none!important}
.hidden-desktop{display:none!important}
.visible-desktop{display:inherit!important} 
```

以下是完整版`print.css`：

```
html, 
body {
    width: 1200px !important;
}

.hidden{display:none;visibility:hidden}
.visible-phone{display:none!important}
.visible-tablet{display:none!important}
.hidden-desktop{display:none!important}
.visible-desktop{display:inherit!important} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-28T21:23:26.457

2 件事仅供参考 -

1.  目前，他们已经添加了一些切换类。查看最新稳定版本中的可用内容 -[在 responsive-utilities.less 中打印切换](https://github.com/twitter/bootstrap/blob/0fe9148b91eff50b83100b6795fb49cf894caed1/less/responsive-utilities.less "responsive-utilities.less 中的打印切换")
2.  Bootstrap 3.0 中提供了新的和改进的解决方案——他们正在添加一个单独的 print.less 文件。请参阅[单独的 print.less](https://github.com/twitter/bootstrap/blob/0dea8b0c7473c1db4aea7accfd0a68cbf09b9576/less/print.less "单独的 print.less")

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-02T06:38:44.677

要使打印视图看起来像平板电脑或桌面，请将引导程序包含为 .less，而不是 .css，然后您可以在 bootstrap_variables 文件的末尾覆盖引导响应类，例如：

```
@container-sm:      1200px;
@container-md:      1200px;
@container-lg:      1200px;
@screen-sm:         0; 
```

不必担心将这些变量放在文件末尾。LESS 支持延迟加载变量，因此它们将被应用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-20T08:50:29.107

如果您想在 A4 打印（大约 540 像素）上保留列，这是一个好主意

```
@media print {
    .make-grid(print-A4);
}

.make-print-A4-column(@columns) {
    @media print {
        float: left;
        width: percentage((@columns / @grid-columns));
    }
} 
```

你可以像这样使用它：

`<div class="col-sm-4 col-print-A4-4">`

# javascript - 为画布绘图添加鼠标事件

> ID：12302824
> 
> 赞同：0
> 
> 时间：2012-09-06T14:54:47.993
> 
> 标签：javascript, html5-canvas, mouseevent, dom-events

我需要通过Javascript将鼠标事件添加到下面的代码中...我已经添加了触摸事件以便在桌面浏览器中进行测试我需要添加鼠标事件..我尝试将鼠标事件添加到addEventListener但似乎不起作用我不太确定出了什么问题...

```
 <!DOCTYPE html> 
 <html lang="en"> 
 <head> 
 <meta charset="utf-8"> 
<meta name="viewport" content="width=768px, maximum-scale=1.0" /> 
 <title>rsaCanvas</title> 
<script type="text/javascript" charset="utf-8"> 
window.addEventListener('load',function(){
    // get the canvas element and its context
    var canvas = document.getElementById('rsaCanvas');
    var insertImage = document.getElementById('insert');
    var context = canvas.getContext('2d');

    //load image and annotation method
    var loadData = {
        imageLoad: function(){
            var img = new Image();
            img.src = 'the_scream.jpg';
            context.drawImage(img,0,0);
        }
    };

    // create a drawer which tracks touch movements
    var drawer = {
        isDrawing: false,
        touchstart: function(coors){
            context.beginPath();
            context.moveTo(coors.x, coors.y);
            this.isDrawing = true;
        },
        touchmove: function(coors){
            if (this.isDrawing) {
                context.lineTo(coors.x, coors.y);
                context.stroke();
            }
        },
        touchend: function(coors){
            if (this.isDrawing) {
                this.touchmove(coors);
                this.isDrawing = false;
            }
        }
    };

    // create a function to pass touch events and coordinates to drawer
    function draw(event){
        // get the touch coordinates
        var coors = {
            x: event.targetTouches[0].pageX,
            y: event.targetTouches[0].pageY
        };
        // pass the coordinates to the appropriate handler
        drawer[event.type](coors);
    }

    // attach the touchstart, touchmove, touchend event listeners.
    canvas.addEventListener('touchstart',draw, false);
    canvas.addEventListener('touchmove',draw, false);
    canvas.addEventListener('touchend',draw, false);

    insertImage.addEventListener('click',loadData.imageLoad, false);

    // prevent elastic scrolling
    document.body.addEventListener('touchmove',function(event){
        event.preventDefault();
    },false);   // end body.onTouchMove

},false);   // end window.onLoad
</script> 

<style>
    #rsaCanvas{border:5px solid #000;}
</style>    

 </head> 
 <body> 
<div id="container"> 
  <canvas id="rsaCanvas" width="400" height="500"> 
    Sorry, your browser is not supported.
  </canvas> 
  <button id="insert">Insert Image</button> 
</div> 
  </body> 
   </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:00:12.623

试试这个。

```
function init () {
  // ...
  // Attach the mousemove event handler.
  canvas.addEventListener('mousemove', ev_mousemove, false);
}

// The mousemove event handler.
var started = false;
function ev_mousemove (ev) {
  var x, y;

  // Get the mouse position relative to the canvas element.
  if (ev.layerX || ev.layerX == 0) { // Firefox
    x = ev.layerX;
    y = ev.layerY;
  } else if (ev.offsetX || ev.offsetX == 0) { // Opera
    x = ev.offsetX;
    y = ev.offsetY;
  }

  // The event handler works like a drawing pencil which tracks the mouse 
  // movements. We start drawing a path made up of lines.
  if (!started) {
    context.beginPath();
    context.moveTo(x, y);
    started = true;
  } else {
    context.lineTo(x, y);
    context.stroke();
  }
} 
```

来源[http://dev.opera.com/articles/view/html5-canvas-painting/](http://dev.opera.com/articles/view/html5-canvas-painting/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:04:20.153

如果您的问题是`insertImage.addEventListener('click',loadData.imageLoad, false);`单击时不显示图像，那是因为

```
 imageLoad: function(){
        var img = new Image();
        img.src = 'the_scream.jpg';
        context.drawImage(img,0,0);
} 
```

注意 img.src 是异步的，要绘制图像

```
img.onload = (function() {
      var image = img;
      return function() {context.drawImage(image, 0, 0);};
})(); 
```

# ide - Aptana - 并排删除编辑器窗口/选项卡

> ID：12302826
> 
> 赞同：0
> 
> 时间：2012-09-06T14:55:02.247
> 
> 标签：ide, aptana

最近我正在使用 Aptana 并排查看多个文件。不幸的是，现在我无法删除用红色箭头标记的编辑器（并排）窗口。此外，您显然可以看到我一直试图将它们拖走，这使问题变得更糟。我试过谷歌，但没有找到解决方案。我可以卸载并重新安装 Aptana，但如果有修复程序，我宁愿知道它，而不必在每次出现此类问题时都进行重新安装。另外我想补充一点，我可能无法在谷歌上搜索解决方案，因为我不能 100% 确定“编辑器选项卡”的名称。任何帮助将不胜感激。

我的声誉太低，所以这里是我的问题的图片链接：http: [//i.imgur.com/6K3Dq.png](http://i.imgur.com/6K3Dq.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T23:33:45.673

答案非常简单。如果您遇到如上图所示的问题，只需打开新文件并将它们拖到额外的“编辑器窗口”所在的空白处即可。从那里关闭（x）窗口，它将删除额外的窗口。

# c# - MVC Telerik DropDownList 设置第一项 OnLoad

> ID：12302832
> 
> 赞同：0
> 
> 时间：2012-09-06T14:55:24.727
> 
> 标签：c#, asp.net-mvc-3, telerik-mvc

我有一个 MVC Telerik 下拉列表。我通过 Ajax 绑定获取数据。在页面加载上，我希望自动填充第一个 SelectList 项。实现这一目标的最佳方法是什么。

在谷歌搜索和教育 Telerik AjaxBinding 如何工作之后。我得出的结论是，Ajax 绑定仅在单击下拉菜单时才会激活调用。

实现我的要求的最佳方式？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:18:27.950

当页面通过填充方法加载时，您可以强制 DropDownList 获取其数据

```
$('#ComboID').data().tComboBox.fill() 
```

**或者最初通过Items**方法在服务器端添加一个值。

# cmake - 重命名 cpack 自动目标

> ID：12302836
> 
> 赞同：1
> 
> 时间：2012-09-06T14:55:30.613
> 
> 标签：cmake, cpack

当您`INCLUDE(CPack)`在一个`CMakeLists.txt`文件中时，它会将一个名为的目标添加`package`到生成的构建文件中。您可以对生成的目标及其运行方式进行很多配置，但我似乎无法找到更改目标本身名称的方法；即，我希望它包含一个名为（例如）`Makefile`的目标，而不是包含一个名为的目标。有没有办法做到这一点？`package``bundle`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T17:43:59.477

`package`如果名为的包配置文件`CPackConfig.cmake`存在于最外层的二进制构建目录中，CMake 只会添加默认目标。通过强制 CPack 模块以不同的名称生成包文件，可以防止`package`创建目标：

```
set (CPACK_OUTPUT_CONFIG_FILE "${CMAKE_BINARY_DIR}/BundleConfig.cmake")
include(CPack) 
```

您可以手动添加`bundle`目标然后：

```
add_custom_target(bundle
    COMMAND "${CMAKE_CPACK_COMMAND}" 
    "-C" "$<CONFIGURATION>" "--config" "${CMAKE_BINARY_DIR}/BundleConfig.cmake") 
```

`package_source`对于默认目标也是如此。使用该变量`CPACK_SOURCE_OUTPUT_CONFIG_FILE`覆盖默认的包配置文件名`CPackSourceConfig.cmake`。

# php - curl - 在决定如何处理有效负载之前检查内容类型

> ID：12302837
> 
> 赞同：0
> 
> 时间：2012-09-06T14:55:33.653
> 
> 标签：php, api, curl

我正在使用具有 DownloadFile 方法的 API。对该方法的成功请求后，响应将具有**application/octet-stream**的内容类型并包含一个文件。在对该方法的请求不成功时，响应将具有**text/xml**的内容类型并包含适当的错误。

我请求的文件是包含多张照片的档案，可能会变得非常大。因此，我使用`CURLOPT_FILE`将有效负载直接写入文件而不是将其存储在内存中。

我的问题是，有没有办法检查响应的内容类型，然后决定如何处理有效负载？**如果内容类型是application/octet-stream**，我只想将有效负载写入文件。否则我只想从 XML 响应中获取错误并将其返回给用户。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:59:20.890

您可以在下载之前发送一个[`HEAD`http](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.4)请求并解析内容类型字段的响应。为此，您将不得不使用`CURLOPT_NOBODY`和`CURLOPT_HEADER`选项，`CURLOPT_RETURNTRANSFER`这样您就可以从`curl_exec()`.

# java - 写入 ObjectOutputStream 并回收垃圾

> ID：12302838
> 
> 赞同：1
> 
> 时间：2012-09-06T14:55:35.380
> 
> 标签：java

我将一些对象放入流中，然后从中取出字节数组，然后读回所有内容。前两条数据完好无损，然后我得到零，然后是 EOF 异常。为什么？

```
try {
     ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
     ObjectOutputStream objectOutputStream = new ObjectOutputStream(byteArrayOutputStream);
     objectOutputStream.writeObject("abcdef");
     objectOutputStream.writeInt(1);
     objectOutputStream.writeObject(new byte[]{1,2,3,4,5,6,7,8});
     objectOutputStream.writeInt(2);
     objectOutputStream.writeObject(new byte[]{11,12,13,14,15,16,17,18});
     objectOutputStream.close();

     byte[] original = byteArrayOutputStream.toByteArray();
     System.out.println(Arrays.toString(original));

     byte[] b=new byte[8];
     ObjectInputStream objectInputStream = new ObjectInputStream(new ByteArrayInputStream(original));
     String s= (String) objectInputStream.readObject(); // works fine
     objectInputStream.readInt(); // works fine

     objectInputStream.read(b); // why it reads zeroes instead of [1,2,3,4,5,6,7,8]?
     System.out.println(Arrays.toString(b));
     int length = objectInputStream.readInt(); // EOF unexpectedly reached, why?
     objectInputStream.read(b);
}
catch (IOException e) {
     e.printStackTrace();
} catch (ClassNotFoundException e) {
     e.printStackTrace();
} 
```

例外：

```
java.io.EOFException
at java.io.DataInputStream.readInt(DataInputStream.java:375)
at java.io.ObjectInputStream$BlockDataInputStream.readInt(ObjectInputStream.java:2775)
at java.io.ObjectInputStream.readInt(ObjectInputStream.java:949) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T14:57:40.730

我怀疑第一个问题是你需要`close()`你的`objectOutputStream`. 有关示例，请参阅[ObjectOutputStream 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectOutputStream.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T14:58:20.233

除了关闭缓冲流...

您希望每个 writeInt() 都具有 readInt()（正如您所做的那样）您还需要每个 writeObject() 具有 readObject()。

如果你的阅读方式与你写的不同，你就不能指望它有任何意义。

你在做

```
objectOutputStream.writeObject(new byte[]{1,2,3,4,5,6,7,8}); 
```

所以你需要做

```
byte[] bytes = (byte[]) objectInputStream.readObject(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:04:48.573

看看如何`ObjectOutputStream`处理数组`writeObject`（具体来说，看看 `ObjectOutputStream.writeArray()`. 它写入一个数组标记字节（以了解存储的对象类型），然后是数组长度，然后是数组元素本身。

长话短说，你应该用`readObject`, 而不是 plain读回它`read`（除非你想自己实际解析那个字节流，而不是期望你的字节像在原始字节数组中那样被检索）。

`InputStream.read(byte[])`只需获取原始字节流并将它们写入缓冲区。

此外，后续调用（除了`read()`s 之外）预计会失败，因为指针没有放在反序列化器可以理解的数据结构的开头。

# regex - 带有标点正则表达式的字母数字

> ID：12302840
> 
> 赞同：1
> 
> 时间：2012-09-06T14:55:36.943
> 
> 标签：regex, expression

嗨，我想知道是否有人可以帮助我。

首先，我对此很陌生，所以请多多包涵。

我一直在研究许多教程中的一些，以尝试提出一个 preg 匹配表达式，它允许：

*   任何字母数字，
*   逗号，
*   句号和，
*   空间

我想出了以下几点：

```
(!preg_match('/^[A-Za-z0-9 _.,]{5,35}$/', $nameofcontact)) 
```

除此之外，由于该字段是可选的，因此我还希望空白字段通过验证，而这正是我遇到困难的方面。

我只是想知道是否有人可以提供一些指导，说明如何让该字段与上述参数结合使用。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:58:06.317

空白字段：^$

正则表达式中的“或”：|

用这个 ：

```
^$|^[A-Za-z0-9 _.,]{5,35}$ 
```

# routing - 安装 Microsoft 请求路由后出现 503 错误 - 32 位 64 位疯狂

> ID：12302847
> 
> 赞同：2
> 
> 时间：2012-09-06T14:55:46.520
> 
> 标签：routing, windows-server-2008, iis-7.5, asp.net-4.0

我需要为在 Windows 2008 R2 SP1 64 位机器上运行的 IIS 7.5 安装 Microsoft 请求路由组件。

通过 Web 平台安装程序安装 Microsoft 请求路由后，我们的 ASP.NET 4.0 应用程序收到“HTTP 错误 503。服务不可用”。

Windows 事件日志错误详细信息说：

```
The Module DLL 'C:\Program Files\IIS\Application Request Routing\requestRouter.dll' could not be loaded due to a configuration problem. The current configuration only supports loading images built for a AMD64 processor architecture. The data field contains the error number. To learn more about this issue, including how to troubleshooting this kind of processor architecture mismatch error, see http://go.microsoft.com/fwlink/?LinkId=29349. 
```

我可以通过将“启用 32 位应用程序”设置更改为 true，将应用程序池更改为在 32 位模式下运行，从而消除此错误。

但是，我宁愿不必这样做来解决问题。

我的问题是：

1.  为什么 Microsoft 请求路由功能尝试加载 32 位版本，难道没有 64 位版本吗？
2.  如何在无需将应用程序池更改为 32 位模式的情况下解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:17:38.867

您使用的是什么处理器架构？

该错误似乎表明当前仅支持 64 位 AMD 处理器，也许值得研究更具体针对您的处理器的解决方案。

我猜你用的是Intel CPU？

我知道在某些情况下需要在 64 位系统上以 32 位模式运行 IIS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:56:17.233

在这个地址找到的 IIS 站点上查看这些安装指南可能是值得的：

[http://www.iis.net/learn/extensions/installing-application-request-routing-%28arr%29/install-application-request-routing](http://www.iis.net/learn/extensions/installing-application-request-routing-%28arr%29/install-application-request-routing)

如果这些不能解决问题，那么可能值得在 IIS 论坛上发布：

[http://forums.iis.net/](http://forums.iis.net/)

或在 technet 论坛上发帖：

[http://social.technet.microsoft.com/Forums/en-gb/categories/](http://social.technet.microsoft.com/Forums/en-gb/categories/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:08:13.087

对此进行了一些研究后，我可以通知您，目前有两个版本的 Microsoft 应用程序请求路由，一个用于 32 位架构，另一个用于 64 位。

虽然没有说明，但我认为 Web 平台安装程序版本仅适用于 32 位，为了获得 64 位特定版本，您必须从以下两个位置之一下载：

[http://blogs.iis.net/wonyoo/archive/2011/04/20/how-to-install-application-request-routing-arr-2-5-without-web-platform-installer-webpi.aspx](http://blogs.iis.net/wonyoo/archive/2011/04/20/how-to-install-application-request-routing-arr-2-5-without-web-platform-installer-webpi.aspx)

或者

[http://www.microsoft.com/en-us/download/details.aspx?id=7173](http://www.microsoft.com/en-us/download/details.aspx?id=7173)

博客（第一个 URL）提供了下载后如何安装到 IIS 中的详细信息。

希望这被证明是有用的。

# xquery - 如何在 Marklogic 的文档中搜索单词序列？

> ID：12302849
> 
> 赞同：1
> 
> 时间：2012-09-06T14:56:03.967
> 
> 标签：xquery, marklogic

我有一个`xquery`这样的单词序列（和，交易，搜索，业务）。现在我想在文档（如 pdf、doc、ppt）以及`xml`文件中搜索此序列。如果任何单词在任何文档中匹配，`URI`则应返回该文档的。什么是最有效的`Marklogic`方法`xquery`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:30:06.950

听起来第一个问题是从用户提供的字符串中标记单词。这是使用`cts:tokenize` [http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/SearchBuiltins.xml&category=SearchBuiltins&function=cts 的简单方法：标记化](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/SearchBuiltins.xml&category=SearchBuiltins&function=cts:tokenize)

```
cts:tokenize('now is the time')[. instance of cts:word] 
```

一旦有了单词，就可以将它们与`cts:word-query`构造函数和一起使用`cts:search`，或者您可以扩展高级搜索 API 来处理这个问题：也许使用`search:resolve` [http://docs.marklogic.com/5.0doc/docapp.xqy#display。 xqy?fname=http://pubs/5.0doc/apidoc/searchapi.xml&category=Search&function=search:resolve](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/apidoc/searchapi.xml&category=Search&function=search:resolve)

自然，任何二进制内容（pdf、doc、ppt）都需要先进行文档转换：http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http: [//pubs/5.0doc/xml /search-dev-guide/binary-document-metadata.xml](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http://pubs/5.0doc/xml/search-dev-guide/binary-document-metadata.xml)

# proxy - 把玻璃鱼放在后面

> ID：12302857
> 
> 赞同：1
> 
> 时间：2012-09-06T14:56:28.657
> 
> 标签：proxy, glassfish

我有一个可以工作的 Glassfish 应用程序，它提供 Web 服务、对 JMS 队列、servlet、JSP 页面的访问。

有没有可能在 Glassfish 前面放“一些东西”，这样 Glassfish 服务器就不会上网了？我知道我可以将 Apache HTTPD 放在 Glassfish 前面，并且可以将对 HTML、JSP 页面、servlet、Web 服务的访问从 Apache 重定向到 Glasfish。但我不知道如何访问 JMS 队列。有什么建议么？

# python - 按步骤/按顺序循环python

> ID：12302858
> 
> 赞同：0
> 
> 时间：2012-09-06T14:56:40.333
> 
> 标签：python, loops

我有一个文件，我在其中提供步骤，然后根据要遵循的内容的步骤。这是我读入的文本文件：

```
[Steps]
step1 = WebAddress
step2 = Tab
step3 = SecurityType
step4 = Criteria
step5 = Date
step6 = Click1
step7 = Results
step8 = Download
[data]
WebAddress___________________________ Destination___________ Tab_____________ SecurityType___________________________________________________ Criteria___ Date_______ Click1_ Results_ Download    
https://mbsdisclosure.fanniemae.com/  q:\\%s\\raw\\fnmapool  Advanced Search  Interim MBS: Single-Family                                      Issue Date  09/01/2012  Search  100      CSV XML
https://mbsdisclosure.fanniemae.com/  q:\\%s\\raw\\fnmapool  Advanced Search  Preliminary Mega: Fannie Mae/Ginnie Mae backed Adjustable Rate  Issue Date  09/01/2012  Search  100      CSV XML
https://mbsdisclosure.fanniemae.com/  q:\\%s\\raw\\fnmapool  Advanced Search  Preliminary Mega: Fannie Mae/Ginnie Mae backed Fixed Rate       Issue Date  09/01/2012  Search  100      CSV XML 
```

我已经有一个读取文件的工作模型，然后将正确的内容分配给正确的标头（例如标头 WebAdress 的 url）。但是，我想要做的是按照步骤循环。处理数据的代码：

```
from itertools import groupby
count =0
file_name = "FNMA.tbl"
with open(file_name) as f:
      pre_data,post_data =[s.strip() for s in (f.read()).split("[data]")]
post_data_lines = post_data.splitlines()
headers = post_data_lines[0].split()
headers2 = [s.replace("_"," ").strip() for s in headers]
for line in post_data_lines[1:]:
    tmpline  = []
    pos = 0
    for itm in headers:
        tmpline.append(line[pos:pos+len(itm)])
        pos += len(itm)+1
    myDict= dict(zip(headers2,tmpline))
    count += 1
    for key, group in groupby(myDict.iteritems(), lambda x: x[0]):
        for thing in group:
            print "step: %s header: %s" % (thing[1], key)
    print "Finished processing row %s" % count 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:34:12.997

首先，创建一个将步骤名称映射到数字的字典，如下所示：

```
steps = dict((step.split()[2], pos) 
        for (pos, step) in enumerate(pre_data.splitlines()[1:])) 
```

（当然，这是一条非常丑陋的 Python 行，但它似乎可以工作）

现在，您可以通过以下步骤对 dict 中的项目进行排序：

```
sorted_items = sorted(myDict.items(), 
        key=lambda item: steps[item[0]] if item[0] in steps else 999) 
```

并遍历这些项目：

```
for key, thing in sorted_items:
    print "step: %s header: %s" % (thing, key) 
```

# ios - 自定义 UIAlertView 不起作用？

> ID：12302862
> 
> 赞同：0
> 
> 时间：2012-09-06T14:56:55.263
> 
> 标签：ios

![在此处输入图像描述](../Images/46b1ce15d7bb1cfb377972cd7a28aa5c.png)我自定义了 UIAlertView （代码在下面提到）。它工作完美，除非 uialertview（自定义警报视图）被调用两次“ **if ([subview isKindOfClass:[UIImageView class]])** ”部分失败。必须有什么解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T07:22:46.177

请尝试以下任一方法：

1.  您可以覆盖 drawRect: 方法。这是一个关于它的教程：

    **子类 UIAlertView 以自定义警报的外观** [http://joris.kluivers.nl/blog/2009/04/23/subclass-uialertview-to-create-a-custom-alert/](http://joris.kluivers.nl/blog/2009/04/23/subclass-uialertview-to-create-a-custom-alert/)

2.  您可以改为使用警报视图的替代方法。这是一个不错的：

    [https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets](https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets)

    （我不认为覆盖 show 方法是最好的方法，但实现上述任何一种方法都应该快速而轻松。）

# c# - 在 LINQ 中使用函数

> ID：12302869
> 
> 赞同：0
> 
> 时间：2012-09-06T14:57:12.533
> 
> 标签：c#, .net, linq

我正在使用 LINQ 创建一个列表。但是我想在最后使用一个函数来自己生成对象，这是 LINQ 抱怨的

```
LINQ to Entities does not recognize the method 'WashroomStatusItem GetWashroomStatusForItem(WashroomStatus)' method, and this method cannot be translated into a store expression. 
```

我究竟做错了什么？

```
var query = (from c in context.WashroomStatus
    where c.WashroomId == GroupItem.WashroomID
    select GetWashroomStatusForItem(c));

private WashroomStatusItem GetWashroomStatusForItem(WashroomStatus item)
{
    WashroomStatusItem temp = new WashroomMonitorWCF.WashroomStatusItem();
    //do stuff with it
    return temp;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T14:59:47.497

问题是 SQL 转换无法将您的方法转换为 SQL。您应该使用`AsEnumerable()`从进程外提供程序“切换”到 LINQ to Objects。例如：

```
var query = context.WashroomStatus
                   .Where(c => c.WashroomId == GroupItem.WashroomID)
                   .AsEnumerable()
                   .Select(c => GetWashroomStatusForItem(c)); 
```

请注意，如果`GetWashroomStatusForItem`只使用某些属性，您可能需要先分别投影到这些属性，以减少从服务器获取的信息量：

```
var query = context.WashroomStatus
                   .Where(c => c.WashroomId == GroupItem.WashroomID)
                   .Select(c => new { c.Location, c.Date };
                   .AsEnumerable()
                   .Select(p => GetWashroomStatusForItem(p.Location, p.Date)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:23:31.643

Jon Skeet 的回答是正确的，但我要补充一点，根据 的性质`GetWashroomStatusForItem()`，它可能应该被分解为 LINQ 语句并添加到查询本身中，或者应该在查询返回后执行。

所以，假设`GetWashroomStatusForItem()`看起来像这样：请注意，这过于简单化了。

```
public static WashroomStatus GetWashroomStatusForItem(Item c)
{
    return c.WashroomStatus;
} 
```

它应该像这样添加到 LINQ 查询中：

```
var query = (from c in context.WashroomStatus
    where c.WashroomId == GroupItem.WashroomID
    select c.WashroomStatus); 
```

但如果它严重依赖数据库中没有的东西，我会在你得到之前结束 Linq 语句`WashroomStatus`，然后调用`GetWashroomStatusForItem()`结果。由于 Linq 使用惰性求值，因此不会产生性能差异，并且您*通常*希望将数据库操作与“编程”操作分开。

# javascript - 如何使用 jQuery 切换样式表？

> ID：12302872
> 
> 赞同：4
> 
> 时间：2012-09-06T14:57:18.037
> 
> 标签：javascript, jquery, html, css

我设计了一个多色模板，现在我只想在单击颜色图标时更改“CSS”文件，有人可以帮我吗？

这是我的代码，但效果不好，只需更改一次颜色即可。

```
$(document).ready(function() {
  $("a.silver").click(function() {
    $("a.silver").append('<link rel="stylesheet" type="text/css" href="themes/silver/css/template.css"/>');
  });

  $("a.red").click(function() {
    $("a.red").append('<link rel="stylesheet" type="text/css" href="css/template.css"/>');
  });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:25:32.823

所以，正如一些评论所说，你最好的选择是切换 CSS 类。但是，如果您要更改整个页面样式，那么交换样式表对我来说似乎是个好主意。但是每次您想要交换样式表时，您都没有必要“重新生成”元素。您最好根据需要将它们从 DOM 中分离出来。所以是这样的：

```
$(document).ready(function() {
    var sheets = { //a map of sheets. Simply add sheets to this to add more themes (and create appropriate links to them)
        silver: $('<link rel="stylesheet" type="text/css" href="themes/silver/css/template.css"/>'),
        red: $('<link rel="stylesheet" type="text/css" href="css/template.css"/>')
    };

    var currentSheet = sheets.red.appendTo($("head")); //attach default sheet

    $("a.swapStyle").click(function () {
         currentSheet.detach(); //remove the current sheet
         currentSheet = (sheets[$(this).attr("data-theme")]).appendTo($("head")); //attach a new sheet and set the currentSheet variable to remember it.
    });
}); 
```

您需要将链接更改为以下内容：

```
<a href="javascript:void(0)" class="swapStyle" data-theme="red">Change to red theme</a>
<a href="javascript:void(0)" class="swapStyle" data-theme="silver">Change to silver theme</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:02:46.840

css链接必须添加到头部

```
 $(document).ready(function() {
               //load silver automatically in ready

                 $("a.silver").click(function() {
                         $('head > link').last().remove();   //removes red and adds silver
                         $('head').append('<link rel="stylesheet" href="style2.css" type="text/css" />');
                   });

                 $("a.red").click(function() {
                        $('head > link').last().remove();  //remove silver - adds red
                        .append('<link rel="stylesheet" type="text/css" href="themes/silver/css/template.css"/>');
                          });
                    });
             }); 
```

the actual stylesheets in my jQuery aren't correct

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T15:08:37.563

如前所述，切换 css 样式而不是文件可能是最佳实践，但如果需要切换文件，请尝试：

```
$(function(){
    $('a.silver').click(function (){
       $('link[href="css/template.css"]').attr('href','themes/silver/css/template.css');
    });
    $('a.red').click(function (){
       $('link[href="themes/silver/css/template.css"]').attr('href','css/template.css');
    });
}); 
```

在此解决方案中，您还必须像往常一样在头部定义样式...

# unit-testing - 在 Grails 单元测试中注入服务

> ID：12302880
> 
> 赞同：10
> 
> 时间：2012-09-06T14:57:58.190
> 
> 标签：unit-testing, grails, dependency-injection

我知道您可以使用以下方法简单地在单元测试方法中注入服务：

```
defineBeans {
   someService(SomeService)
} 
```

但是当我需要在服务中注入服务时（该服务`someService`称自己为另一个服务`some2Service`）。当我使用上面的代码运行测试时，我收到：

```
Message: Cannot invoke method someMethod() on null object 
```

是否可以在单元测试中将服务注入到服务中？

谢谢。;-)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T16:26:36.470

要在单元测试中使用 spring bean，您需要执行以下操作：

*   `defineBeans`在闭包中包含测试所依赖的所有服务和其他 bean 。
*   为需要注入其他 bean 的 bean设置`autowire`属性。`true`

例如：

```
defineBeans {
    someService(SomeService) { bean ->
        bean.autowire = true
    }
    some2Service(Some2Service)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:57:27.607

您可以使用 ref 设置作为服务的成员变量

```
MyService(MyProvider) {
        userDetailsService = ref("userDetailsService")
        springSecurityService = ref("springSecurityService")
        userService = ref("userService")
    } 
```

希望有帮助

# nhibernate-criteria - NHibernate QueryOver 与组件列表

> ID：12302882
> 
> 赞同：2
> 
> 时间：2012-09-06T14:58:00.933
> 
> 标签：nhibernate-criteria

我有如下课程：

```
public class File {
    public Guid Id { get; set; }
}

public class Customer {
    public Guid Id { get; set; }
    public List<File> Files { get; set; }
} 
```

并且 Customer.Files 被设置为一袋组件（而不是实体）。有什么方法可以让我使用 NHibernate 中的 QueryOver 语法创建一个 QueryOver 来返回具有给定 ID 的文件的客户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:22:05.067

它应该像

```
session.QueryOver<Customer>()
    .JoinQueryOver<File>(c => c.Files)
        .Where(f => f.Id == id)
    .List(); 
```

# windows-phone-7 - Windows 7.1 SDK - 计时通话

> ID：12302884
> 
> 赞同：1
> 
> 时间：2012-09-06T14:58:04.543
> 
> 标签：windows-phone-7, windows-phone-7.1

我目前有一个“dumbphone”，但我正在尝试制作一个应用程序来计时并存储 Windows 7.1（“7.5”）手机来电的通话时间，以供用户调度。

然而，经过广泛的搜索和谷歌搜索，像这样的主题： [Windows Phone 7 - 如何计算通话持续时间或终止](https://stackoverflow.com/questions/5135601/windows-phone-7-how-to-calculate-call-duration-or-termination) 似乎 Windows 7/7.1 SDK 不允许访问识别何时来电。我已经阅读有关模糊和不模糊的内容，但这不是一个好主意，因为它会在 UI 隐藏程序时启动计时器，而不仅仅是调用。

我认为也许我可以从通话历史记录中提取通话持续时间或开始/结束时间，但 Windows 7 SDK 似乎也不支持。

所以我决定寻求帮助。有没有办法使这项工作？是否有一些聪明的方法可以识别何时来电和停止？还是一些巧妙的方法来拉动通话时间/持续时间？或者可能是一种检测用户何时按下“接听来电”按钮的方法？或者也许是一种在呼叫遮盖 UI 时挑出的方法？

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:34:47.927

由于安全原因，您的应用程序没有任何访问历史记录等的权限。所以你在一个发件箱里，你对电话一无所知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:33:12.063

从 Windows Phone SDK 来看，没有办法做到这一点！

我唯一能想到的是，当来电时，当前应用程序会收到通知，该应用程序现在已被遮挡，因为现在在其顶部有一个新屏幕（来电显示屏幕），并且当它重新聚焦时会收到通知.

但事实是，即使屏幕上弹出 SMS 消息通知并且用户点击阅读它，或者某些应用程序收到推送通知，也会发生这种情况......

# drupal - Drupal 与 Knockout Javascript

> ID：12302885
> 
> 赞同：1
> 
> 时间：2012-09-06T14:58:05.190
> 
> 标签：drupal, knockout.js

我正在尝试让 Knockout.js 与 Drupal 一起使用。似乎 Drupal 模板文件中的 Knockout 调用没有读取我的任何 Knockout 调用。有没有人让这两个一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T03:52:18.573

你可能忘记了这一切，但我通过在页脚中包含 js 内联来让它工作：

```
$header = array(
 'type' => 'file'
 );

 $footer = array(
 'type' => 'file',
 'scope' => 'footer'
 );

drupal_add_js(drupal_get_path('theme', 'MyTheme'). '/js/knockout.js', $header);

<p>First name: <input data-bind="value: firstName" /></p>
<p>Last name: <input data-bind="value: lastName" /></p>
<h2>Hello, <span data-bind="text: fullName"> </span>!</h2>

 drupal_add_js('var ViewModel = function(first, last) {
     this.firstName = ko.observable(first);
     this.lastName = ko.observable(last);

     this.fullName = ko.computed(function() {
         // Knockout tracks dependencies automatically. It knows that fullName depends on firstName and lastName, because these get called when evaluating fullName.
         return this.firstName() + " " + this.lastName();
     }, this);
 };

 ko.applyBindings(new ViewModel("Planet", "Earth")); // This makes Knockout get to work

 ',
     array('type' => 'inline', 'scope' => 'footer', 'weight' => 1)
   ); 
```

如果您从文件中找到了一种方法，请告诉我，这样做是没有好处的。

编辑：没关系，如果您在页脚包含文件，它会起作用：

```
drupal_add_js(drupal_get_path('theme', 'MyTheme'). '/js/MyKnockoutScript.js', $footer); 
```

# c# - 让两个并行继承结构跨层交互的方法

> ID：12302890
> 
> 赞同：2
> 
> 时间：2012-09-06T14:58:16.583
> 
> 标签：c#, oop, generics, inheritance, interface

我有一个问题，我在业务层中有一组对象，它们之间有一个继承结构，我还有一组支持它们的 DAL 对象，它们具有大致平行的继承结构。我遇到的问题是必须在 BOL 继承的多个级别上理解 DAL 类型，例如，基础业务对象必须能够访问基础 DAL 对象属性，但是同一属性必须稍后提供特定实例。

由于 C# 不支持返回协方差，我不能简单地在覆盖声明中使用更具体的类型。我也无法使用泛型，因为我必须对类型进行具体规范才能使用它，并且由于相同的返回协方差原因而破坏了进一步的继承。到目前为止，我能够提出的唯一解决方案似乎非常可怕，所以我想在这里发布它以获得反馈或替代想法。

看来这可以通过定义一个通用接口来解决`IHasDal<TDalType>`。然后我可以指定`BOLBase : IHasDal<BaseDAL>`. 这需要在 BOLBase 上实现 .Dal 属性。对于 BolChild，它被声明为`BOLChild : BOLBase, IHasDal<ChildDAL>`，然后指定一个`.Dal`类型为 的属性`ChildDAL`。虽然这两个命令与它们所在的类的级别无关且特定于它们，但我通过在`BOLBase`type中拥有一个私有字段来链接它们`BaseDAL`。然后我可以通过 AS 为每个子属性实现进行转换。

从理论上讲，这似乎应该给我我正在寻找的最小问题。它将可用于实现`IHasDal`我指定的任何类型的对象或任何给定的`BOLBase`派生类。它仍然感觉很难看，因为它似乎有效地依赖方法隐藏，但我想不出更好的方法。

```
public interface IHasDal<TDalType>
    where TDalType : BaseDal
{
    TDalType Dal { get; set; }
}

public class BaseDal
{
}

public class BaseEntity : IHasDal<BaseDal>
{
    protected BaseDal _dal;

    public BaseDal Dal
    {
        get
        {
            return (BaseDal)_dal;
        }
        set
        {
            _dal = value;
        }
    }
}

public class ChildDal : BaseDal
{
}

public class ChildEntity : BaseEntity, IHasDal<ChildDal>
{
    public ChildDal Dal
    {
        get
        {
            return this._dal as ChildDal;
        }
        set
        {
            this._dal = value;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:51:33.417

这里的正确答案似乎是，像这样有两个平行层是一个坏主意，其中一个为另一个提供检索。一方面的返回类型上的泛型可用于满足许多需求，但由于与泛型相关的共/逆变问题，使用泛型的一侧的功能存在一些非常严重的限制。

# events - 在 iframe 中使用 response.flush() 时的客户端事件

> ID：12302898
> 
> 赞同：2
> 
> 时间：2012-09-06T14:58:37.990
> 
> 标签：events, iframe, flush

我有一个正在加载页面的 iframe。我在服务器端使用 response.flush() 因为 iframe 的 html 可能非常大。当响应在服务器上刷新时，是否有任何事件在客户端触发？我尝试了加载，初始化，但是当所有数据都被刷新时它们被调用。

# android - 在android中使用JAXB（xjc）生成的类

> ID：12302902
> 
> 赞同：8
> 
> 时间：2012-09-06T14:58:54.873
> 
> 标签：android, xml, json, xsd, xjc

我正在使用`Rest-Webservice`in `Android`。`Web Service`可以处理`JSON`和，`XML`API 被描述为`XSD`. 所以我曾经`JAXB`从 生成类`XSD`，然后我使用杰克逊`JSON`处理器`JSON`从我的实例中生成。

问题是，`JAXB`( `xjc`) 生成带有`JAXB`注释的类并且`Android`无法处理这些。我试图将其添加`jaxb-api.jar`到我的 android 项目中，但 Dalvik 不会使用核心类。

对于我的第一个实现，我手动删除了注释。但是现在`XSD`已经更新了，我不想每次发生这种情况时都这样做。

你知道如何以更好的方式处理这个问题吗？是否有可能在`jaxb/xjc`没有注释的情况下使用，或者是否有其他代码生成器可以做到这一点？您是否知道从 java 类中删除注释的简单方法（即使它们打印在多行中）？是否有项目的项目设置`Android` `Eclipse`，使 dalvik 允许核心库？

谢谢，cathixx

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T17:29:47.540

因为我是 Ant 的新手，所以我必须做一些额外的研究才能使 cathixx 的答案起作用，所以我会分享这个来帮助其他人。

这些指令将采用 Java 文件，其代码如下：

```
import javax.xml.bind.annotation.XmlElement;

@XmlRootElement
public class Response {... 
```

...并将这些事件注释掉，所以它看起来像：

```
/*import javax.xml.bind.annotation.XmlElement;*/

/*@XmlRootElement*/
public class Response {... 
```

首先，在一个新的 Eclipse 项目中创建一个文件`build.xml`（或者任何你想调用的文件 - 必须是 .xml）（一个“通用”项目就可以了）。

然后，将以下文本添加到`build.xml`文件中：

```
<?xml version="1.0"?>
<project
    name="CommentOutXmlAnnotations"
    basedir="."
    default="commentOutXmlAnnotations" >

<!-- This Ant script comments out the following lines from the Java files in this directory:
    import javax.xml.bind.annotation.*;
    @Xml*
 -->
    <target
        name="commentOutXmlAnnotations"        
        description="Run" >
            <replaceregexp
                byline="false"
                flags="g" >
                <regexp pattern="(@Xml[A-Za-z0-9]+(\([^)]+\))?|import javax\.xml\.bind\.annotation\.[A-Za-z0-9.]+;)[ \t]*(\r?\n)" />
                <substitution expression="/*\1*/\3" />
                <fileset dir="." >
                    <include name="*.java" />
                </fileset>
            </replaceregexp>        
    </target> 
</project> 
```

将`*.java`要注释掉 XML 导入和注释的文件放在与 build.xml 文件相同的目录中。

在 Eclipse 中右键单击 build.xml 文件，然后单击“Run As->Ant Build”。

您应该看到如下输出：

```
Buildfile: D:\Eclipse_Projects\StripAnnotations\build.xml
commentOutXmlAnnotations:
BUILD SUCCESSFUL
Total time: 403 milliseconds 
```

...并且 XML 导入和注释应该从您的文件中注释掉。

完毕！

注意：如果要包含`*.java`build.xml 文件的所有子目录中的所有文件（例如，注释掉为多个包中的一堆 JAXB 类生成的所有 XML 注释/导入），请将`fileset`标记更改为：

```
<fileset dir="." >
    <include name="**/*.java" />
</fileset> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:42:28.687

现在，我通过使用以下`ant`脚本注释所有注释自己解决了这个问题：

```
<replaceregexp flags="g" byline="false">
  <regexp pattern="(@Xml[A-Za-z0-9]+(\([^)]+\))?|import javax\.xml\.bind\.annotation\.[A-Za-z0-9.]+;)[ \t]*(\r?\n)"/>
  <substitution expression="/*\1*/\3"/>
  <fileset dir="path/to/files">
    <include name="*.java"/>
  </fileset>
</replaceregexp> 
```

# haskell - 在设计数据结构时，何时公开数据类型的构造函数？

> ID：12302907
> 
> 赞同：12
> 
> 时间：2012-09-06T14:59:03.600
> 
> 标签：haskell, data-structures, functional-programming, pattern-matching

用函数式语言设计数据结构时，有两种选择：

1.  公开它们的构造函数和模式匹配。
2.  隐藏它们的构造函数并使用更高级别的函数来检查数据结构。

**在什么情况下，什么是合适的？**

模式匹配可以使代码更具可读性或更简单。另一方面，如果我们需要更改数据类型定义中的某些内容，那么我们对它们进行模式匹配（或构造它们）的所有地方都需要更新。

* * *

我自己一直在问这个问题一段时间。我经常会从一个简单的数据结构（甚至是`type`别名）开始，并且似乎构造函数 + 模式匹配将是最简单的方法，并且可以生成干净易读的代码。但是后来事情变得更复杂了，我必须更改数据类型定义并重构大部分代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T15:37:28.190

对我来说，最重要的因素是对以下问题的回答：

> 我的数据类型的结构与外界相关吗？

例如，列表数据类型的内部结构与外部世界非常相关——它有一个归纳结构，这对于暴露给消费者来说肯定非常有用，因为它们构造了通过对列表结构进行归纳的函数。如果列表是有限的，那么这些函数保证会终止。此外，以这种方式定义函数可以很容易地提供关于它们的属性，同样通过归纳。

相比之下，`Set`数据类型最好保持抽象。在内部，它被实现为`containers`包中的树。但是，它也可以使用数组来实现，或者（在功能设置中更有用）使用具有略微不同结构并尊重不同不变量（平衡或不平衡，分支因子等）的树。顺便说一句，在构造函数已经通过其类型强制执行的那些不变量之上和之上强制执行任何不变量的需要排除了让数据类型具体化的可能性。

列表示例和集合示例之间的本质区别在于，`Set`数据类型*仅*`Set`与's上可能的操作相关。而列表是相关的，因为标准库已经提供了许多作用于它们的函数，而且它们的结构*是*相关的。

作为旁注，有人可能会反对实际上列表的归纳结构，它对于编写终止和行为易于推理的函数非常重要，它被两个使用列表的函数抽象地捕获：`foldr`和`foldl`。鉴于这两个基本的列表运算符，大多数函数根本不需要检查列表的结构，因此可以说列表过于抽象。这个论点推广到许多其他类似的结构，例如所有`Traversable`结构、所有`Foldable`结构等。但是，几乎不可能捕获列表上所有可能的递归模式，事实上许多函数根本不是递归的。只给出`foldr`and `foldl`，一个人会写`head`例如，尽管很乏味，但仍然可以使用：

```
head xs = fromJust $ foldl (\b x -> maybe (Just x) Just b) Nothing xs 
```

我们最好只是放弃列表的内部结构。

最后一点是，有时数据类型的实际表示与外部世界无关，因为说它是某种优化的并且可能不是规范表示，或者没有单一的“规范”表示。在这些情况下，您需要保持数据类型抽象，但提供数据类型的“视图”，它确实提供了可以进行模式匹配的具体表示。

一个例子是，如果想要定义一种`Complex`复数数据类型，笛卡尔形式和极坐标形式都可以被认为是规范的。在这种情况下，您将保持`Complex`抽象，但导出两个视图，即函数`polar`，并`cartesian`分别返回一对长度和角度或笛卡尔平面中的坐标。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-06T15:30:04.400

好吧，规则很简单：如果使用实际构造函数很容易构造错误值，那么就不要直接使用它们，而是提供智能构造函数。这是一些数据结构所遵循的路径，例如`Map`and `Set`，很容易出错。

然后是不可能或难以构造不一致/错误值的类型，因为该类型根本不允许这样做，或者因为您需要引入底部。长度索引列表类型（通常称为`Vec`）和大多数 monad 就是这样的例子。

最终这是你自己的决定。站在用户的角度，在方便和安全之间做出权衡。如果没有权衡，则始终公开构造函数。否则你的图书馆用户会因为不必要的不​​透明而讨厌你。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-06T15:26:06.213

如果数据类型服务于一个简单的目的（如），并且通过数据构造函数*直接*构造一个值`Maybe a`不会违反关于数据类型的任何（显式或隐式）假设，我将公开构造函数。

 *另一方面，如果数据类型更复杂（如平衡树）和/或其内部表示可能会发生变化，我通常会隐藏构造函数。使用包时，有一条不成文的规则，即非内部模块公开的接口对于给定数据类型使用应该是“安全的”。考虑平衡树示例，公开数据构造函数允许（意外地）构造一棵不平衡树，因此可能会违反假设的搜索树等运行时保证。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-07T01:40:07.787

如果该类型用于表示具有规范定义和表示的值（许多数学对象属于此类），*并且*不可能使用该类型构造“无效”值，那么您应该公开构造函数。

例如，如果您用自己的类型（包括新类型）表示二维点，您不妨公开构造函数。现实情况是，对这种数据类型的更改不会改变 2d 点的表示方式，而是会改变您使用 2d 点的需求（也许您正在推广到 3d 空间，也许您是添加层的概念或其他），并且几乎可以肯定，无论您做什么，都需要注意使用这种类型的值的代码部分。 [1]

表示特定于您的应用程序或领域的事物的复杂类型很可能会在继续支持类似操作的同时对表示进行更改。因此，您只需要取决于操作的其他模块，而不是内部结构。所以你不应该暴露构造函数。

其他类型表示具有规范定义但不是规范表示的事物。每个人都知道映射和集合所期望的*属性*，但是有很多不同的方式来表示支持这些属性的值。因此，您再次只需要其他模块，具体取决于它们支持的操作，而不是特定的表示。

某些类型，无论它们是否简单，是否具有规范表示，都允许在程序中构造不代表该类型应该表示的抽象概念中的有效值的值。一个简单的例子是表示自平衡二叉搜索树的类型；可以访问构造函数的客户端代码可以很容易地构造无效树。暴露构造函数要么意味着您需要假设从外部传入的这些值可能是无效的，因此即使对于奇怪的值，您也需要做出合理的事情，或者意味着使用您的接口的程序员有责任确保*他们*不这样做'不违反任何假设。通常最好不要直接在模块外部构建此类类型。

基本上它归结为您的类型应该代表的概念。如果您的概念以一种非常简单和明显[2] 的方式直接映射到某些数据类型中的值，由于编译器无法检查所需的不变量，该数据类型并不比概念“更具包容性”，那么这个概念几乎是“与数据类型相同”，并且暴露其结构就可以了。如果没有，那么您可能需要隐藏结构。

* * *

[1] 一个可能的变化是更改您用于坐标值的数字类型，因此您可能必须考虑如何最大限度地减少此类更改的影响。这与您是否公开构造函数非常正交。

[2] 这里的“显而易见”的意思是，如果你让 10 个人独立提出一个代表概念的数据类型，他们都会返回相同的东西，模数更改名称。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T17:44:38.697

我会提出一个不同的、明显比大多数人更严格的规则。中心标准是：

> 你保证这种类型永远不会改变吗？如果是这样，暴露构造函数可能是一个好主意。不过，祝你好运！

但是您可以保证的类型往往是非常简单的通用“基础”类型，例如`Maybe`, `Either`or `[]`，可以说可以编写一次，然后再也不会重新访问。

尽管即使是那些也可能会受到质疑，因为它们确实会不时地被重新审视；出于性能原因，有些人在各种情况下都使用了 Church 编码的版本`Maybe`，例如：`List`

```
{-# LANGUAGE RankNTypes #-}

newtype Maybe' a = Maybe' { elimMaybe' :: forall r. r -> (a -> r) -> r }
nothing = Maybe' $ \z k -> z
just x = Maybe' $ \z k -> k x

newtype List' a = List' { elimList' :: forall r. (a -> r -> r) -> r -> r }
nil = List' $ \k z -> z
cons x xs = List' $ \k z -> k x (elimList' k z xs) 
```

这两个示例强调了一些重要的事情：您可以将`Maybe'`上面显示的类型的实现替换为任何其他实现，只要它支持以下三个功能：

```
nothing :: Maybe' a
just :: a -> Maybe' a
elimMaybe' :: Maybe' a -> r -> (a -> r) -> r 
```

...以及以下法律：

```
elimMaybe' nothing z x  == z
elimMaybe' (just x) z f == f x 
```

这种技术可以应用于任何代数数据类型。对我来说，与具体构造函数的模式匹配不够抽象；它并没有真正为您带来任何您无法摆脱抽象构造函数 + 析构函数模式的东西，并且它失去了实现的灵活性。*

# android - Android Wheel control 在按钮单击时上滑动画

> ID：12302910
> 
> 赞同：1
> 
> 时间：2012-09-06T14:59:11.217
> 
> 标签：android, android-animation

我有以下 android 布局

```
<TableRow style="@style/KeyboardRow" >

    <LinearLayout
        android:id="@+id/from_view"
        android:clickable="true"
        style="@style/TableLayoutSpilt"
        android:gravity="left|center_vertical"
        android:paddingLeft="20dip" >

        <TextView
            android:id="@+id/from_header"
            style="@style/SmallText"
            android:text="Click to select Three different Numbers" />

        <TextView
            android:id="@+id/from_city"
            style="@style/BiggerText"
            android:text="Selected Numbers are" />
    </LinearLayout>
</TableRow>

<TableRow style="@style/KeyboardRow" >

    <LinearLayout
        android:id="@+id/traveller_spinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:background="@drawable/rect_button"
        android:clickable="true"
        android:gravity="left"
        android:orientation="horizontal"
        android:paddingBottom="20dip"
        android:paddingTop="20dip" >

        <kankan.wheel.widget.WheelView
            android:id="@+id/adults"
            android:layout_width="wrap_content"
            android:layout_height="180dp"
            android:layout_gravity="center_vertical"
            android:layout_weight="1" />

        <kankan.wheel.widget.WheelView
            android:id="@+id/childs"
            android:layout_width="wrap_content"
            android:layout_height="180dp"
            android:layout_gravity="center_vertical"
            android:layout_weight="1" />

        <kankan.wheel.widget.WheelView
            android:id="@+id/infants"
            android:layout_width="wrap_content"
            android:layout_height="180dp"
            android:layout_gravity="center_vertical"
            android:layout_weight="1" />
    </LinearLayout>
</TableRow>

<TableRow>

    <LinearLayout
        android:id="@+id/search_button_layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:clickable="true"
        android:gravity="center"
        android:orientation="vertical" >

        <Button
            android:id="@+id/search_flight_booking_btn"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="10dp"
            android:background="@drawable/corners"
            android:text="@string/searchflights"
            android:textColor="#FFF" />
    </LinearLayout>
</TableRow> 
```

在上面的布局中，我有三个使用[http://code.google.com/p/android-wheel/](http://code.google.com/p/android-wheel/)创建的微调器。

最初，线性布局“traveller_spinner”可见性设置为 GONE。

我想制作“traveller_spinner”布局的上滑动画，该布局在按钮单击事件上具有所有三个微调器。

# jquery - 同位素项目未正确显示

> ID：12302911
> 
> 赞同：1
> 
> 时间：2012-09-06T14:59:19.197
> 
> 标签：jquery, jquery-isotope

我正在尝试让同位素插件在[http://www.kindervakantiepas.nl/isotope工作](http://www.kindervakantiepas.nl/isotope)

我没有一个漂亮的砖石网格....

这是我使用的代码`index.php`：

```
<style type="text/css">
/**** Isotope Filtering ****/

#container {
  /* either of these will work for horizontal Isotope layouts */

  height: 480px;
}

.item{
    background-color:#33FF00;
    width:200px;
    height:200px;
    margin:10px;
}

.isotope-item {
  z-index: 2;
}

.isotope-hidden.isotope-item {
  pointer-events: none;
  z-index: 1;
}

/**** Isotope CSS3 transitions ****/

.isotope,
.isotope .isotope-item {
  -webkit-transition-duration: 0.8s;
     -moz-transition-duration: 0.8s;
      -ms-transition-duration: 0.8s;
       -o-transition-duration: 0.8s;
          transition-duration: 0.8s;
}

.isotope {
  -webkit-transition-property: height, width;
     -moz-transition-property: height, width;
      -ms-transition-property: height, width;
       -o-transition-property: height, width;
          transition-property: height, width;
}

.isotope .isotope-item {
  -webkit-transition-property: -webkit-transform, opacity;
     -moz-transition-property:    -moz-transform, opacity;
      -ms-transition-property:     -ms-transform, opacity;
       -o-transition-property:         top, left, opacity;
          transition-property:         transform, opacity;
}

/**** disabling Isotope CSS3 transitions ****/

.isotope.no-transition,
.isotope.no-transition .isotope-item,
.isotope .isotope-item.no-transition {
  -webkit-transition-duration: 0s;
     -moz-transition-duration: 0s;
      -ms-transition-duration: 0s;
       -o-transition-duration: 0s;
          transition-duration: 0s;
}

</style>

<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
<script type="text/javascript" src="jquery.isotope.js"></script>
<script type="text/javascript">

$(document).ready(function() {
    $('#container').isotope({
    //options
        itemSelector : '.item',
        layoutMode : 'masonry'
    });

});

</script>

</head>

<body>
<div id="container">
<?php

include('config.php');
$conn=new mysqli($hostname,$username,$password,$database) or die ('cannot open database');

$sql='SELECT naamAanbieder FROM activiteit LIMIT 100';
$result = $conn->query($sql) or die (mysqli_error($conn));

while ($row = $result->fetch_assoc()) {

    $naamAanbieder = $row['naamAanbieder'];
    echo "<div class='item'>" .$naamAanbieder ."<div>";

    };
 ?>

</div>

</body>
</html> 
```

如何正确显示同位素项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:45:57.450

好吧，对于初学者来说，您没有将 .item div 放入#container，但您已将 .item div 放在彼此内部 - 嵌套它们！Isotope 的设置始终是一个#container，其中包含许多 .item div。

```
<div id="container">
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
    // ... and so forth, whether hard-coded, or loaded dynamically
</div> 
```

# php - 获取给定主题标签的上周推文

> ID：12302915
> 
> 赞同：0
> 
> 时间：2012-09-06T14:59:36.537
> 
> 标签：php, api, twitter

我面临的挑战是从上周进行查询时计算给定主题标签的推文数量。

我查看了[Twitter 搜索 API](https://dev.twitter.com/docs/api/1/get/search)，它提供了参数“直到”，将响应推文限制在给定日期和 since_id - 从具有给定 ID 的推文开始返回推文......这两个选项似乎都不理想在我正在寻找上周给定主题标签的推文并稍后计算它们的情况下。

有没有人遇到过类似的问题？

你们有解决方案的想法吗？

最好的，

亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:01:21.270

您将需要持续监控 twitter，并使用该`until`功能来防止重复计数。

为此将计数存储在数据库中。

据我所知，没有端点可以计算主题标签。

# google-maps - 谷歌地图的 JQuery Mobile 链接未在 iframe 中显示

> ID：12302918
> 
> 赞同：0
> 
> 时间：2012-09-06T14:59:45.127
> 
> 标签：google-maps, iframe, jquery-mobile

我正在使用带有页面的 JQuery Mobile 1.1.1 版。

我有一个显示谷歌地图的 url，我想在页面上显示它，所以我将 url 添加到 iframe src，如下所示：

```
<iframe type="text/html" src="https://maps.google.co.uk/maps/ms?msid=201176082552223167980.0004c49fe52444e8ead96&msa=0" frameborder="0" id="myIframe">
</iframe> 
```

整个页面代码如下所示：

```
<div data-role="page" id="home">

    <div data-role="header">
        <h1>Page Title</h1>
    </div>

    <div data-role="content">   

    <iframe type="text/html" src="https://maps.google.co.uk/maps/ms?msid=201176082552223167980.0004c49fe52217e8ead96&msa=0" frameborder="0" id="myIframe"></iframe>

    </div>

    <div data-role="footer">
        <h1>Footer Title</h1>
    </div>

</div> 
```

我的问题是 iframe 没有显示任何内容。

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:45:55.570

转到[https://maps.google.co.uk/maps/ms?msid=201176082552223167980.0004c49fe52444e8ead96&msa=0](https://maps.google.co.uk/maps/ms?msid=201176082552223167980.0004c49fe52444e8ead96&msa=0)并使用那里提供的嵌入代码。

特别`&output=embed`是URL中需要参数

# forms - 表单值存储在两个地方

> ID：12302921
> 
> 赞同：0
> 
> 时间：2012-09-06T14:59:56.153
> 
> 标签：forms

我想在两个地方存储单个数据，即[http://www.abc.com/post.php](http://www.abc.com/post.php)和[http://www.xyz.com/post.php](http://www.xyz.com/post.php)。我怎样才能做到这一点。请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:19:22.373

最好的办法是使用 jQuery 发布表单。单击按钮时，使用[jQuery.post](http://api.jquery.com/jQuery.post/)提交表单两次。

埃里克

# css - 用 CSS 困惑嵌套 DIV

> ID：12302923
> 
> 赞同：1
> 
> 时间：2012-09-06T15:00:01.703
> 
> 标签：css

我很想嵌套三个 div 并拥有每个。我希望外观看起来像每个父母都比它的孩子大 10 像素，并且在水平宽度发生变化时做出响应。当我使用两个 DIV 执行此操作时，一切正常。

**CSS**

```
#holder
{
 margin:auto;
 width:90%;
 height:150px;
 background-color:#999;
 padding:10px;
 border: 1px solid;
}
#inside
{
 position:relative;
 width:100%;
 height:100%;
 background-color:#9F0;
 border: 1px solid;
} 
```

**HTML**

当我添加第三个孩子时，一切都出错了。中间的孩子（绿色框）部分移出它的父母。

**CSS**

```
#holder
{
 margin:auto;
 width:90%;
 height:150px;
 background-color:#999;
 padding:10px;
 border: 1px solid;
}

#inside
{
 position:relative;
 width:100%;
 height:100%;
 background-color:#9F0;
 border: 1px solid;
 padding:10px;
}

#header
{
 position:relative;
 width:100%;
 height:100%;
 background-color:#C00;
} 
```

**HTML**

```
<div id="holder">
 <div id="inside">
     <div id="header"/>
    </div>
</div> 
```

我确实了解填充和边距，它们会添加盒子的“真实”宽度和高度，但我不知道如何将这些盒子放在彼此的内部。我尝试过的事情如下

1.  使用边距和填充
2.  在子框的宽度上使用不同的 %。这在一定程度上有效，但根据浏览器窗口的宽度，子项之间的距离比率会发生变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:11:32.803

听起来像一个级联类型的评论列表。

嗯...从#inside 和#header 中删除宽度。DIV 是[块级](http://www.codertools.com/css_help_guide/css_block_elements.aspx)元素。

添加

```
#holder div {
    padding-left: 10px;
} 
```

#holder 下的每个 DIV 都将继承`padding-left`css 属性。我认为（并希望：P）这就是您想要的。

# javascript - “！function（）{}”在javascript中是什么意思/做什么？

> ID：12302925
> 
> 赞同：1
> 
> 时间：2012-09-06T15:00:07.520
> 
> 标签：javascript

> **可能重复：**
> [函数前的感叹号有什么作用？](https://stackoverflow.com/questions/3755606/what-does-the-exclamation-mark-do-before-the-function)
> [！javascript中的前置函数？](https://stackoverflow.com/questions/5422585/preceding-function-in-javascript)
> [javascript函数领先砰！句法](https://stackoverflow.com/questions/5827290/javascript-function-leading-bang-syntax)

我最近在 javascript 中看到了这种模式：

```
!function () {
    // do something
}() 
```

关键字前面的 bang`function`应该做什么？我似乎在 intertubez 上找不到任何关于它的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:02:50.447

```
function () {
    // do something
}(); 
```

这是一个立即调用的函数声明。不能立即调用函数声明；这是一个语法错误。

为了解决这个语法错误，大多数人将 IIFD 括在括号中以强制它成为一个表达式 (IIFE)。

```
(function () {
    // do something
})(); 
```

在这种情况下，他们添加了一个感叹号。

# android - 从云服务器保存/检索数据的 Android 应用程序

> ID：12302927
> 
> 赞同：0
> 
> 时间：2012-09-06T15:00:08.853
> 
> 标签：android

我正在计划一个允许用户填写表格并将其作为文件保存到服务器的 Android 应用程序。该应用程序还旨在显示其他人填写并提交到此服务器的表格，并允许用户下载和查看它们。

坦率地说，我不知道从哪里开始。我在制作客户端 Android 应用程序方面经验丰富，但我从未在服务器和云存储方面做过很多工作。我考虑了几个选项，例如设置一个 Dropbox 帐户来存储和检索数据。我还有一台备用计算机，我愿意将其制成专用服务器，我只需要知道如何设置它，以及我可以用来访问服务器以保存和下载文件的方法。理想情况下，我想使用这种方法，因为它可以确保应用程序使用的所有文件都在我自己的个人网络上。

如果有人可以让我先了解如何实现这一目标，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:16:22.697

您可以查看 Parse.com 将一些数据存储在云中，而无需在服务器端编写单个代码行......

实施非常容易。

# .net - 在用户端注册activeX控件

> ID：12302934
> 
> 赞同：0
> 
> 时间：2012-09-06T15:00:27.847
> 
> 标签：.net, visual-studio-2008, activex, activexobject

过去 2 小时我一直在寻找实现 activeX 控制的方法。我实际上是通过生成一个 dll 文件并通过 java 脚本访问它来做到这一点的，如果我使用 regasm 注册它，它就可以正常工作。但是这将如何在用户端发生呢？有什么默认的方法吗？

我发现这篇文章说 generate ocx control 但在 Visual Studio 2008 中不再可用。

对此的任何了解都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:07:16.463

如果您的“activeX 控件”是 COM 控件，请将其注册到 RegSvr32.exe。如果你想创建一个带有 ocx 扩展的 ActiveX 控件，你可能需要使用 VS6.0 或更早版本。

# css - CSS 布局（2 列布局，但如果没有侧边栏，主列必须是 100% 宽）

> ID：12302935
> 
> 赞同：0
> 
> 时间：2012-09-06T15:00:30.267
> 
> 标签：css, layout, responsive-design

Column1（左）用于内容。Column2（右侧/侧边栏）用于相关信息。说布局是 66%/34%。如果没有侧边栏内容，我需要一种方法让 Column1 自动拉伸到 100%。有任何想法吗。我知道这是可以做到的。我只是不记得怎么了。

```
+---------+---------+
| Content | sidebar |
+---------+---------+

+-------------------+
|Content/ no-sidebar|
+-------------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:14:23.497

你可能会尝试这样的事情。以下是两种不同的 HTML 案例：

带侧边栏：

```
<div id="container">
    <div id="sidebar">some content</div>
    <div id="main_content">main content</div>
</div> 
```

没有侧边栏：

```
<div id="container">
    <div id="main_content">main content</div>
</div> 
```

这是有条件地更改`main_content`div 大小的 CSS：

```
#container {
    overflow: hidden;
}

#sidebar {
    width: 34%;
    float: right;
}

#main_content {
    width: 100%;
    float: left;
}
#main_content:nth-child(2) {
    width: 66%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:29:20.203

您可以设置 HTML 之类的；

```
<div id="container">
    <div id="content">content
        <div id="sidebar">sidebar</div>
    </div>
</div> 
```

和 CSS 之类的；

```
#container{
    width: 100%;
}
#sidebar, #content{
    height: 200px;

}
#sidebar{
    width: 200px;
    float: left;
}
#content{
    background: orange;
} 
```

你可以`px`用百分比代替。***[这](http://jsfiddle.net/blasteralfred/aBbtN/)***是一个现场演示。

# firefox - selenium-firefox-driver 2.25.0 无法与 Firefox 15 一起正常工作

> ID：12302940
> 
> 赞同：4
> 
> 时间：2012-09-06T15:00:46.740
> 
> 标签：firefox, selenium-webdriver, selenium-firefoxdriver

自从我升级到 Firefox 15 后，我的 Selenium 测试就停止了工作。我正在使用 selenium-firefox-driver-2.25.0 和 selenium-java-2.25.0。具体来说，测试现在无法“单击”某些元素，例如 GWT 下拉菜单中的项目。

请问只有我一个人有这种问题吗？我认为 Firefox 15 对 Selenium 来说可能只是“太新”，而 2.25.1 版本可能很快就会发布，但 Firefox 15 已经发布了一段时间。

这些测试都适用于 Firefox 14.0.1。Selenium 是否支持 Firefox 15 的“本机事件”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:42:21.930

我在最新版本的 Firefox (15.0) 和当前的 2.25 Selenium 中看到了类似的问题。我有一个基于 Javascript 的水平菜单，当您将鼠标悬停在菜单标题上时，它会显示菜单选项。`IWebDriver`我正在使用的代码是：

```
var menu = driver.FindElement(By.Id("menuId"));
var option = driver.FindElement(By.Id("menuItemId"));

WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));

Actions actions = new Actions(driver);
actions.MoveToElement(menu, 5, 5).Perform();

wait.Until<bool>((d) =>
{
    return option.Displayed;
});

option.Click(); 
```

这适用于 IE 和 Chrome，但不适用于 Firefox -“mouseOver”（`MoveToElement`）操作永远不会发生，因此菜单项永远不会可见并且测试超时（并且失败）。

当我从 NUnit 运行测试时，我的测试代码中内置了一些配置支持，因此我可以控制是直接使用 Web 驱动程序还是使用`WebDriverBackedSelenium`（当然与 RC 服务器一起使用） . 这使我可以解决配置问题，以便如果我在“Firefox 模式”下运行测试，我可以调用服务器，然后`ISelenium`像这样使用接口：

`selenium.Click("id=menuItemId");`

这很好用。我有一个方法可以确定测试运行的“模式”并相应地调用特定的单击操作，即选择`IWebDriver`直接使用接口或将其包装通过`WebDriverBackedSelenium`以使用`ISelenium`接口。

如果 Firefox 驱动程序将来开始工作，我可以再次通过配置切换到本机使用 Firefox Web 驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:59:25.610

我遇到了类似的问题：硒测试套件无法在刚刚更新的 ffox(14.0) 上启动。我为我找到的唯一解决方案是回滚到以前的 ffox 版本。

# r - 通过 RCurl 包将 curl 代码转换为 R？

> ID：12302941
> 
> 赞同：8
> 
> 时间：2012-09-06T15:00:50.277
> 
> 标签：r, api, post, rcurl

我将如何使用 R 和 RCurl 包编写以下 curl POST 方法？

```
curl -k -u myusername:mypassword -d '{"text":"Hello World!","level":"Noob"}' -H "Content-Type: application/json" -H "Accept: application/json" "http://api.website/v1/access?" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-10T08:48:15.390

**最终编辑：在给伟大的 Duncan Temple Lang 发送电子邮件后，我有一个解决方案：**

```
library(RCurl)
library(RJSONIO)
postForm("http://api.website/v1/access?",
         .opts = list(postfields = toJSON(list(text = "Hello World!", level = "Noob")),
                      httpheader = c('Content-Type' = 'application/json', Accept = 'application/json'),
                      userpwd = "Username:Password",
                      ssl.verifypeer = FALSE)) 
```

***我以前的帖子在下面，但现在它都被上面的编辑所取代（我把下面的内容留作参考）：***

我想自己知道这个问题的答案。即使看着 TARehman 的回答，我仍然无法弄清楚该怎么做（我缺乏理解无疑是根源）。

如果您从其网站下载 curl（我使用的是 generic-win 二进制版本），那么这是通过“系统”命令在 R 中执行此操作的一种方法，就像使用窗口的命令行窗口但来自 R：

```
output <- system('C:/+/curl-7.27.0-rtmp-ssh2-ssl-sspi-zlib-idn-static-bin-w32/curl  -k -u "username:password" -d "{\\"text\\":\\"Hello World!\\",\\"level\\":\\"Noob\\"}" -H "Content-Type: application/json" -H "Accept: application/json" "http://api.website/v1/access?"', intern = TRUE)) 
```

以上适用于我使用的 API 之一。然后你可以使用

我真的希望你能找到答案，因为这对我来说也很有用。

***编辑：我尝试通过@TARehman 的示例使用带有 RCurl 的实际 API：***

这是可以正常工作的卷曲代码：

```
x = system('C:/+/curl-7.27.0-rtmp-ssh2-ssl-sspi-zlib-idn-static-bin-w32/curl  -k -u "USERNAME:PASSWORD" -d "{\\"text\\":\\"Have a nice day!\\"}" -H "Content-Type: application/json" -H "Accept: application/json" "http://api.theysay.io:60000/v1/sentiment?"', intern = TRUE) 
```

这是我在 RCurl 中重写它的方式：

```
curl.opts <- list(userpwd = "username:password", 
                  httpheader = "Content-Type: application/json",
                  httpheader = "Accept: application/json",
                  timeout = 20, 
                  connecttimeout = 20, 
                  verbose = TRUE, 
                  useragent = "RCurl",
                  cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl"))

postForm("http://api.theysay.io:60000/v1/sentiment?", .params = c(data = '{\\"text\\":\\"Have a nice day!\\"}'), .opts = curl.opts) 
```

但是，这不起作用并导致以下结果（显然我没有正确理解某些内容）：

```
* About to connect() to api.theysay.io port 60000 (#0)
*   Trying 163.1.94.100... * connected
* Connected to api.theysay.io (163.1.94.100) port 60000 (#0)
> POST /v1/sentiment? HTTP/1.1
User-Agent: RCurl
Host: api.theysay.io:60000
Accept: application/json
Content-Length: 193
Expect: 100-continue
Content-Type: multipart/form-data; boundary=----------------------------7620b19c7a5d

< HTTP/1.1 100 Continue
< HTTP/1.1 401 Unauthorized
< WWW-Authenticate: Basic realm="Secured Resource"
< Content-Type: text/plain
< Server: spray-can/1.0-M2.1
< Date: Wed, 12 Sep 2012 12:26:06 GMT
< Content-Length: 77
< 
* Ignoring the response-body
* Connection #0 to host api.theysay.io left intact
* Issue another request to this URL: 'http://api.theysay.io:60000/v1/sentiment?'
* Re-using existing connection! (#0) with host api.theysay.io
* Connected to api.theysay.io (163.1.94.100) port 60000 (#0)
* Server auth using Basic with user '[USERNAME]'
> POST /v1/sentiment? HTTP/1.1
Authorization: Basic [KEY]==
User-Agent: RCurl
Host: api.theysay.io:60000
Accept: application/json
Content-Length: 193
Expect: 100-continue
Content-Type: multipart/form-data; boundary=----------------------------949d191bdaeb

< HTTP/1.1 100 Continue
< HTTP/1.1 415 Unsupported Media Type
< Content-Type: text/plain
< Server: spray-can/1.0-M2.1
< Date: Wed, 12 Sep 2012 12:26:06 GMT
< Content-Length: 93
< 
* Connection #0 to host api.theysay.io left intact
[1] "There was a problem with the requests Content-Type:\nExpected 'text/xml' or 'application/json'"
attr(,"Content-Type")

"text/plain" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T15:10:39.533

在 RCurl 中，有一个名为 postForm() 的函数，这是您想要使用的。我的通用示例：

```
library(RCurl)

param1 <- "json"
param2 <- "all"
param3 <- "j3kn1kn41" # Hypothetical API token

webobj <- postForm("http://www.thewebsite.com/api/",type=param1,records=param2,token=param3) 
```

基本上，您只需将所需的任何参数作为命名参数连同基本 URL 一起传递给 postForm()，然后它构造并发布它，并将响应放入您声明的任何对象 (webobj) 在这种情况下。

如果您需要设置任何 curl 选项，您可以使用`.opts=curlOptions(OPTIONS HERE)`来更改它们。

# android - 光标循环迭代显示每隔一个值

> ID：12302942
> 
> 赞同：0
> 
> 时间：2012-09-06T15:00:51.483
> 
> 标签：android, loops, cursor

我正在尝试添加用户已选中的所有复选框中的所有值。此外，将跳过所有未选中的复选框。但是，我在每个值之后都跳过一个。我需要帮助。

```
if(cursor.moveToFirst()) 
{
    do
    { 
        if (cursor.getInt(10)>0 == false)
        {   
            cursor.moveToNext();
            n += cursor.getDouble(9);
        }

        else n += cursor.getDouble(9);

    } while(cursor.moveToNext());

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:10:54.987

*每次*调用`cursor.moveToNext()`它都会转到下一行 - 每个循环都调用它两次（在您的`while`子句和 中`do`）

只需删除对中的调用`moveToNext()`，`do`您就应该准备就绪：

```
if(cursor.moveToFirst()) // <-- this will advance the cursor to the first row
{
    do
    { 
        if (cursor.getInt(10)>0 == false)
        {   
            //cursor.moveToNext(); <--you already called this!
            n += cursor.getDouble(9);
        }

        else n += cursor.getDouble(9);

    } while(cursor.moveToNext()); // <-- this advances the cursor

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:12:40.577

你做 moveToNext() 太多了

试试这个删除循环中的那个：

```
if(cursor.moveToFirst()) 
{
  do
  { 
    if (cursor.getInt(10)>0 == false)
    {   
        n += cursor.getDouble(9);
    }

    else n += cursor.getDouble(9);

  } while(cursor.moveToNext());
} 
```

# objective-c - 处理 UITableView 或 NSArray 异常？

> ID：12302943
> 
> 赞同：1
> 
> 时间：2012-09-06T15:00:53.370
> 
> 标签：objective-c, ios, cocoa, exception

我试图更多地理解异常。我在我的 AppDelegate 中安装了一个未捕获的异常处理程序：

```
// in applicationDidFinishLaunching:
NSSetUncaughtExceptionHandler(&HandleExceptions);
...
void HandleExceptions(NSException *exception) {
    // Save application data on crash
    [appDelegate saveData];
} 
```

所以我不完全确定这是如何工作的。假设我访问一个数组越界，这会引发异常。为什么不调用此方法？或者说在从表中插入或删除行后抛出了一个断言异常——在这些情况下，如何在应用程序崩溃之前保存数据？

一般来说，当系统抛出异常时，我如何有机会在应用程序崩溃之前保存数据？或者它不是那样工作的？未捕获的异常处理程序是否仅适用于我抛出的未包含在@catch 或@try 中的异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T17:54:13.440

当您的方法被调用时，'appDelegate' 可能为零。我刚刚将它添加到 viewController：

```
void HandleExceptions(NSException *exception) {
    // Save application data on crash
    NSLog(@"YIKES");
} 
```

然后这样做：

```
NSArray *foo = @[ @1, @2, @3 ];
NSSetUncaughtExceptionHandler(&HandleExceptions);
NSLog(@"%@", [foo objectAtIndex:3]); 
```

得到了这个：

```
2012-09-06 13:51:17.474 Searcher[64798:f803] YIKES
2012-09-06 13:51:17.475 Searcher[64798:f803] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 3 beyond bounds [0 .. 2]'
*** First throw call stack:
(0x67f022 0x1749cd6 0x66b644 0x324d 0xbb8a1e 0xb17401 0xb17670 0xb17836 0xc9addd8 0xb1e72a 0x2fcd 0xaef386 0xaf0274 0xaff183 0xaffc38 0xaf3634 0x2260ef5 0x653195 0x5b7ff2 0x5b68da 0x5b5d84 0x5b5c9b 0xaefc65 0xaf1626 0x2dfc 0x2d95 
```

# c - 我的 c 程序不计算十进制值，只是打印整数

> ID：12302946
> 
> 赞同：1
> 
> 时间：2012-09-06T15:00:54.160
> 
> 标签：c, structure

该程序正在计算整数平均值而不打印十进制值。它将结果打印为整数：*N.000000*。为什么？

```
//Store name, roll no, marks of 4 students using structure
//and calculating average
struct student
{
    char name[10];
    int roll_no;
    int marks;
};

void main()
{
    struct student s1,s2,s3,s4;
    float avg;
    clrscr();
    printf("\nEnter name, rollnumber and marks of student 1 : \n");
    scanf("%s%d%d",&s1\. name,&s1\. roll_no,&s1\. marks);
    printf("\nEnter name, rollnumber and marks of student 2 : \n");
    scanf("%s%d%d",&s2\. name,&s2\. roll_no,&s2\. marks);
    printf("\nEnter name, rollnumber and marks of student 3 : \n");
    scanf("%s%d%d",&s3\. name,&s3\. roll_no,&s3\. marks);
    printf("\nEnter name, rollnumber and marks of student 4 : \n");
    scanf("%s%d%d",&s4\. name,&s4\. roll_no,&s4\. marks);
    avg = (s1\. marks + s2\. marks + s3\. marks + s4\. marks) / 4;
    printf("\nAverage : %f",avg);

    getch();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:03:26.340

```
int marks; 
```

表示每个标记都是一个整数。然后将它们相加，这也是一个整数。然后你将它们除以 4，这也是一个整数，所以这个操作将是一个整数除法 - 一个丢弃结果的小数部分的操作。把它除以`4.0`，你会没事的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:02:09.987

> ```
> avg = (s1\. marks + s2\. marks + s3\. marks + s4\. marks) / 4; 
> ```

由于所有标记都是整数并且 4 也是整数，因此除法将遵循整数规则 - 不会以任何小数开头。

尝试将其中一个标记投射到`double`或`float`，或者您可以`.0`在 4 之后添加一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T15:03:30.310

您计算中的所有操作数都是`int`，所以您的结果是`int`。

在计算中引入浮点数以保留平均值的小数部分：

```
avg = (s1\. marks + s2\. marks + s3\. marks + s4\. marks) / 4.0; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T15:05:57.193

只需将总和除以 4.0

代码如下：

```
avg = (s1\. marks + s2\. marks + s3\. marks + s4\. marks) / 4.0; 
```

这将解决您的问题。

* * *

这是因为您将标记作为一个`int`值并将其除以`int`值（即4）。因此，当您将两个`int`值相除时，结果将是一个`int`值。但是，当我们除以一个`double`值（即 4.0）时，结果将以`double`格式计算，然后`float`在分配给时转换为`avg`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T15:08:11.127

你有两个问题。

1.  您的学生成绩是`int`类型，这意味着当您对其进行除法、加法或对它们进行大多数操作时，将是`int`除法、加法等，返回`int`s。

2.  您的输出语句`%d`用作格式化指令，它将传递的值格式化为 int。

解决第一个问题

```
((float)s1.marks) + ... 
```

将你投`int`给a `float`，而future`ints`加给`floats`yield `floats`。

解决第二个问题

```
printf("... %f ...", value); 
```

将格式化该值，就好像它是一个浮点数（它应该是）。

还有其他解决方案，例如，许多金融系统不希望处理一分钱的小数，因此将值存储为考虑的最小小数的计数，并适当格式化为小数美元（11.03 美元，但存储值为 1103 ）。

# django - 在 django admin 中添加几个对象

> ID：12302948
> 
> 赞同：0
> 
> 时间：2012-09-06T15:01:02.727
> 
> 标签：django, django-admin

我的 Django 模型如下：

```
class Page(models.Model):
    title = models.CharField(max_length=200)

class Section(models.Model):
    page_id = models.ForeignKey(Page)
    title = models.CharField(max_length=200)

class SubSection(models.Model):
    section_id = models.ForeignKey(Section)
    title = models.CharField(max_length=200) 
```

我想`Page`在 django Admin 中添加一个新的，可以添加几个`Section`，我可以在其中添加几个`SubSection`.

我已经成功创建了一个页面，我们可以`Page`在其中添加一个，我们可以在其中添加几个`Section`，但它只要求提供的名称，`Section`并且不可能`SubSection`在同一页面中添加一个。

我试过这个：

```
class SectionInline(admin.TabularInline):
    model = Section
    extra = 3

class PageAdmin(admin.ModelAdmin):
    inlines = [SectionInline]

admin.site.register(Page, PageAdmin) 
```

但我无法添加`SubSectionInline`到`SectionInline`.

有没有办法做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:08:29.423

不幸的是，您不能使用标准的 django 管理应用程序来执行此操作。

django 管理员让您做的所有事情就是添加具有许多部分的页面。也许在部分添加页面中添加许多子部分会做你想要的？

您需要添加：

```
class SubSectionInline(admin.TabularInline):
    model = SubSection
    extra = 3

class SectionAdmin(admin.ModelAdmin):
    inlines = [SubSectionInline]

admin.site.register(Section, SectionAdmin) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:08:39.883

不，Django 管理员不支持内联内联。您可以管理与页面内联的部分，以及与部分内联的子部分，但不能同时管理两者。

# javascript - Angular 没有根据模型更新我的选择元素

> ID：12302952
> 
> 赞同：3
> 
> 时间：2012-09-06T15:01:21.490
> 
> 标签：javascript, angularjs

在我的应用程序中，我有一些分组的选择元素，它们都有相同的选项。当一个选择被更改时，它会检查其他选择以查看新选择的选项是否已经在任何其他选择中被选择。如果它已被选中，则有一些逻辑可以动态选择尚未在其他选择中选择的选项。有时，此逻辑会导致选择与以前相同的选项。发生这种情况时，我的选择元素不会更新，并且与我的模型不同步。

我创建了一个非常简单的 jsFiddle，在这里显示：http: [//jsfiddle.net/wvLHw/](http://jsfiddle.net/wvLHw/)

注释掉了我发现的一种可能的解决方法，但我不知道在我的应用程序中这样做的可能性有多大。有没有更好的方法来让它正常工作？angular 没有根据我的模型更新选择元素有什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:42:26.100

[这是1.0.2](http://jsfiddle.net/tadchristiansen/wvLHw/15/)版本的 angularjs 问题，已在[1.0.3](http://jsfiddle.net/tadchristiansen/wvLHw/16/)中修复。

这现在应该适合你

```
$scope.myOnChange = function() {
    //more logic here, but ends up back at c
    $scope.foo = "c";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:29:15.587

我不确定我是否正确解释了您的问题，但我假设您有多个选择，并且当其中一个选择中的值发生更改时，您想要执行一些逻辑（基于其他选择的值）最终将计算要设置的最终值。

如果以上内容正确，则使用 $scope.$watch 将涵盖您的用例。为了举例，假设我有 2 个选择绑定到 2 个不同的模型值（foo 和 bar）。如果有人更改了 foo 的值并且它等于为 bar 选择的值，那么您希望强制 foo 成为其他值。在这种情况下，这段代码可以解决问题：

```
$scope.$watch('foo', function(fooValue){
    if (fooValue === $scope.bar){
        $scope.foo = 'a';
    }
}); 
```

这是完整的 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/vqjKq/3/](http://jsfiddle.net/pkozlowski_opensource/vqjKq/3/)

我希望我正确地解释了您的用例，但如果没有，请对此答案发表评论，我很乐意提供更新。

# javascript - 使用 jQuery 签入文本

> ID：12302953
> 
> 赞同：0
> 
> 时间：2012-09-06T15:01:22.370
> 
> 标签：javascript, jquery, html

我有链接：

```
<a href="/test/number/3/phone/0">33df</a> 
```

如何检查此链接中是否包含“号码”和“电话”字样？

我想要功能，例如：

```
 check('number', '<a href="/test/number/3/phone/0">33df</a>'); //return TRUE
   check('phone', '<a href="/test/number/3/phone/0">33df</a>'); //return TRUE
   check('mail', '<a href="/test/number/3/phone/0">33df</a>'); //return FALSE 
```

我想使用 jQuery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:04:07.327

不需要 jQuery 只需使用`indexOf()`

[jsFiddle 示例](http://jsfiddle.net/S3HhS/)

```
function check(token, value){
   return value.indexOf(token) >= 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:12:33.363

```
RegExpObject.test(string) 
```

在您的情况下，它将是：

```
if(/(phone)+|(number)+/.test('<a href="/test/number/3/phone/0">33df</a>'))
{
//returns true
}else{
//returns false
} 
```

这应该有效。干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:47:27.443

此函数将检查您的所有`<a>`标签，`<a>`如果它们包含文本，则返回元素列表。**[看看这个 jsFiddle。](http://jsfiddle.net/PfX8R/2/)**

```
function check(text, elements){
    var list = [];
    if(!elements)
        $('a').each(function(){
            if($(this).attr('href').indexOf(text)!=-1)
                list.push(this);
        });
    else
        $.each(elements,function(){
            if($(this).attr('href').indexOf(text)!=-1)
                list.push(this);
        });
    return list;
}
console.log(check('number')); 
```

如果您想测试并确保返回`<a>`包含多个单词的元素，则可以执行以下操作：

```
matches = check('number');
matches = check('phone', matches);
matches = check('mail', matches);
console.log(matches); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T15:03:32.813

```
 var href = $("a").attr("href");
    if(href.indexOf("number") >= 0){
     alert("contains number");   
    }
    if(href.indexOf("phone") >= 0){
     alert("contains phone");   
    }
    if(href.indexOf("mail") >= 0){
     alert("contains mail");   
    } 
```

见演示：http: [//jsfiddle.net/CcLHz/](http://jsfiddle.net/CcLHz/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T15:05:36.540

```
function check(text, str) {
    var r = new RegExp(text, 'gi');
    return r.test(str);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T15:05:53.980

在这里，我什至同意了您使用 jQuery 的请求：

```
var check = function(val, linkHtml) {
    return ($(linkHtml).attr("href").indexOf(val) >= 0);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-06T15:06:20.130

```
function check(word, str) {
    var p = new RegExp(word);
    return str.match(p);
} 
```

# json - 无法让 SignalR Json 进入客户端 javascript

> ID：12302954
> 
> 赞同：1
> 
> 时间：2012-09-06T15:01:24.720
> 
> 标签：json, parsing, c#-4.0, signalr.client

试图将 SignalR JSON 对象（复杂对象）传递给客户端。客户端正在接收它，当在 IE 中查看网络分析器时，格式看起来正确并且数据在那里，但我无法实际获取客户端中的数据。我尝试使用 JQuery JSON parsng，现在我试图让 JSON.parse 工作。

这是我在客户端的代码：

```
// Build connection to hub and wire it up
        var subscriber = $.connection.subscriberHub;

        subscriber.getMessage = function (data) {

            alert("Message Recieved: " + data);
            var parsedObject = JSON.parse(data);
            alert("Object parsed");
            alert(parsedObject.Site);
            alert("Passed everything without error");
        };

        $.connection.hub.url = "http://localhost:8083/signalr";
        $.connection.hub.start();

    }); 
```

服务器我只是在做一个 Clients.getMessage(signalRObject)。

当我获取数据时，第一个警报将数据显示为 [object Object]，所以我认为我已经可以解析 JSON 对象了。

有人能告诉我获取数据的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-30T20:16:01.647

我认为你做得很好，但请确保服务器上的 Json 数据属性在客户端使用相同的名称，我的意思是如果你返回 json 为：

{消息：'你好'，SiteUrl：'www.mysite.com'}

然后在客户端序列化 json 对象后，您可以编写：

警报（parsedObject.SiteUrl）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:17:06.383

忘记这个问题..事实证明 SignalR 将其作为真正的 JSON 对象传递，并且通过执行 data.Property1 很容易使用它

# python - 在 Linux 基础机器上使用 python 蜻蜓的问题

> ID：12302960
> 
> 赞同：3
> 
> 时间：2012-09-06T15:01:43.153
> 
> 标签：python, linux, python-dragonfly

我正在使用 python 中的蜻蜓库。我正在使用 Mac OSX，这将是我的目标平台。但是，当尝试运行我的程序时，我收到以下错误：

```
Traceback (most recent call last):
  File "clock_challenge.py", line 2, in <module>
    from dragonfly.all import Grammar,CompoundRule
  File "/Users/vikash/.virtualenv/clock_challenge/lib/python2.7/site-packages/dragonfly-0.6.5-py2.7.egg/dragonfly/__init__.py", line 22, in <module>
from .log               import get_log
  File "/Users/vikash/.virtualenv/clock_challenge/lib/python2.7/site-packages/dragonfly-0.6.5-py2.7.egg/dragonfly/log.py", line 30, in <module>
    import win32gui
ImportError: No module named win32gui 
```

由于我的目标平台是基于 Linux 的，如何使用 win32gui 库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-15T08:42:15.460

该软件包仅适用于 Windows。如果没有大量代码更改，您将无法在其他操作系统上使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-20T23:55:43.557

Dragonfly 在历史上 (t4ngo/dragonfly) 只是 windows。不管你在什么平台上运行，你都应该在 virtualenv 之外安装蜻蜓。

我建议使用Dragonfly 的[Danesprite 分支](https://github.com/Danesprite/dragonfly)，它集成了来自社区的修复并扩展了功能。使用这个 fork，您可以在 Linux 上使用替代语音识别引擎（CMU Pocket Sphinx）和（即将推出的 Google Speech API）。Dragon NaturallySpeaking 语音识别引擎仍然只适用于 Windows。希望有朝一日这些增强功能将被纳入主要的推广存储库 t4ngo/dragonfly。

我们尚未在 Mac OSX 上进行测试，因此如果您运行并出现问题，请打开一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-31T07:36:58.537

您可以使用 aenea ( [https://github.com/dictation-toolbox/aenea](https://github.com/dictation-toolbox/aenea) ) 控制 Linux 或可能的 OS X 目标，在单独的 Windows 机器上与 Dragonfly 和 Dragon 通信（例如：在 Linux 之上运行的 Windows VM ）。

希望最终，会有一个和 Dragon 一样有用的跨平台语音识别引擎，但这可能需要几年时间。

# google-maps - 加载谷歌地图绘图管理器对象

> ID：12302961
> 
> 赞同：0
> 
> 时间：2012-09-06T15:01:44.953
> 
> 标签：google-maps, google-maps-api-3

所以我正在使用谷歌地图绘图管理器来绘制一些多边形，并将后期长坐标保存到我的数据库中。现在我的问题是，在我将它加载到我的数组之后，如何将保存的多边形重建回我的地图？我似乎找不到代码来理解这一点。

这就是我现在所拥有的：

```
 window.initialize_2 = function () {
    var mapOptions = {
        center: new google.maps.LatLng(-34.397, 150.644),
        zoom: 8,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = maplimits;

    var drawingManager = new google.maps.drawing.DrawingManager({
        drawingMode: google.maps.drawing.OverlayType.MARKER,
        drawingControl: true,
        drawingControlOptions: {
            position: google.maps.ControlPosition.TOP_CENTER,
            drawingModes: [
            google.maps.drawing.OverlayType.POLYGON]
        },
        markerOptions: {
            icon: 'images/beachflag.png'
        },
        polygonOptions: {
            fillColor: '#ffff00',
            fillOpacity: 10,
            strokeWeight: 5,
            clickable: true,
            editable: true,
            zIndex: 1
        }
 });

    var coord_listener = google.maps.event.addListener(drawingManager, 'polygoncomplete', function (polygon) {
        var coordinates = (polygon.getPath().getArray());
        console.log(coordinates);
        window.poly = polygon;
    });

    //delete shape
    google.maps.event.addListener(drawingManager, 'overlaycomplete', function (e) {
        if (e.type != google.maps.drawing.OverlayType.MARKER) {
            // Switch back to non-drawing mode after drawing a shape.
            drawingManager.setDrawingMode(null);

            // Add an event listener that selects the newly-drawn shape when the user
            // mouses down on it.
            var newShape = e.overlay;
            newShape.type = e.type;
            google.maps.event.addListener(newShape, 'click', function () {
                setSelection(newShape);
            });
            setSelection(newShape);
        }
    });

    // Clear the current selection when the drawing mode is changed, or when the
    // map is clicked.
    google.maps.event.addListener(drawingManager, 'drawingmode_changed', clearSelection);
    google.maps.event.addListener(map, 'click', clearSelection);

    drawingManager.setMap(map);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:37:44.497

所以多边形应该留在你的地图上。我猜你的意思是稍后在地图的另一个实例中，你想根据之前的输入来绘制多边形？在这种情况下，您将创建一个[Polygon Overlay](https://developers.google.com/maps/documentation/javascript/overlays#Polygons)。在我刚刚链接到的文档中非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T21:53:31.303

设置一个全局数组（这更容易），并在侦听器处将多边形存储在其上，然后创建一个函数将其设置为地图。

像这样的东西：

```
var polygons = [];

window.initialize_2 = function () {
var mapOptions = {
...
var coord_listener = google.maps.event.addListener(drawingManager, 'polygoncomplete', function (polygon) {
        var coordinates = (polygon.getPath().getArray());
        console.log(coordinates);
        window.poly = polygon;
        poligons = [] // clear the array
        polygons.push(polygon); // insert the polygon into the array
    });
...
    drawingManager.setMap(map);
}

function setPolygon(){
  polygons[0].setMap(map) // set the polygon to the map
} 
```

希望对你有一点帮助。问候。

# git - 对多个 cvs 源代码存储库的访问控制

> ID：12302964
> 
> 赞同：0
> 
> 时间：2012-09-06T15:01:49.370
> 
> 标签：git, svn, cvs

我们有一个服务器，它使用 CVS 存储多个项目的源代码。

问题是，一旦一个人被授予服务器帐户，他就可以查看所有存储库。我们如何实施一些简单的访问控制，使一个帐户只能访问指定的存储库？

SVN 或 GIT 更容易实施这种访问控制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:48:14.443

您应该能够使用服务器的用户管理来管理对项目的访问...

您可以拥有多个存储库和多个用户组。然后，您授予对存储库（服务器上的文件夹）上所需组的访问权限。最后，您只需将人员添加到组中即可实现所需的用户控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:23:36.723

Git 是基于文件的，因此如果用户可以访问 git 跟踪文件夹中的文件，那么他们就可以访问 git 存储库。我建议使用 git，并通过使用服务器的功能来处理基于文件的用户级别访问来管理用户访问级别。

# javascript - 如何确定是否在滚动条或元素中的其他任何地方发生了鼠标按下事件？

> ID：12302970
> 
> 赞同：0
> 
> 时间：2012-09-06T15:02:11.357
> 
> 标签：javascript, html

我有一个 HTML div，它用作包含许多对象的画布。

在这个画布中，用户可以用鼠标绘制一个矩形来选择对象。我的实现有一个缺陷：如果画布太大并且出现滚动条，拖动滚动条也会绘制一个选择矩形。

什么是区分滚动条上的鼠标按下和组件上其他任何地方的鼠标按下的好方法？

**编辑：我不是在问如何删除滚动条。我需要它们时需要它们**

**编辑：这是重现我正在处理的问题的最小小提琴：http: [//jsfiddle.net/jUe8T/](http://jsfiddle.net/jUe8T/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T09:30:48.187

小提琴非常有帮助，因为我虽然你正在使用`<canvas>`元素......我认为这就是你想要的：http: [//jsfiddle.net/jUe8T/1/](http://jsfiddle.net/jUe8T/1/)

我通过向with作为处理程序添加一个`.scroll`事件来做到这一点，如下所示：`$('#canvas')``upHandler`

```
$('#canvas').scroll(upHandler); 
```

# iphone - 为 MonoTouch.Dialog 创建自定义 Section 类？

> ID：12302972
> 
> 赞同：1
> 
> 时间：2012-09-06T15:02:13.223
> 
> 标签：iphone, ios, mono, xamarin.ios, monotouch.dialog

我想从 MonoTouch.Dialog 创建一个自定义部分的类，它覆盖某些方法等。是否有某个 API 可以找到要覆盖的方法或一个很好的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T20:47:12.663

MT.Dialog[源代码](https://github.com/migueldeicaza/MonoTouch.Dialog)托管在 Github 上

# eclipse - 使用 Eclipse 插件追加新谷歌的空指针异常

> ID：12302973
> 
> 赞同：6
> 
> 时间：2012-09-06T15:02:20.073
> 
> 标签：eclipse, google-app-engine, eclipse-plugin

我最近尝试使用 Google eclipse 插件创建一个新的 gwt/gae 项目。我过去成功地做到了这一点，并且我有几个正在开发的项目没有问题。

当我尝试启动 Web 应用程序时收到 NullPointerException。这是堆栈跟踪。

```
WARNING: EXCEPTION 
java.lang.ClassNotFoundException: com.google.api.server.spi.SystemServiceServlet
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:176)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.mortbay.util.Loader.loadClass(Loader.java:91)
    at org.mortbay.util.Loader.loadClass(Loader.java:71)
    at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:73)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:196)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:146)
    at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:97)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311)
Sep 6, 2012 2:42:25 PM com.google.appengine.tools.development.ApiProxyLocalImpl log
SEVERE: javax.servlet.ServletContext log: unavailable
javax.servlet.UnavailableException: com.google.api.server.spi.SystemServiceServlet
    at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:79)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:196)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:146)
    at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:97)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311)

Sep 6, 2012 2:42:25 PM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: failed SystemServiceServlet: java.lang.NullPointerException
Sep 6, 2012 2:42:26 PM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: Failed startup of context com.google.appengine.tools.development.DevAppEngineWebAppContext@75e04ee8{/,/Users/bucky/Documents/workspace/Birthday/war}
java.lang.NullPointerException
    at java.lang.Class.isAssignableFrom(Native Method)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:256)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:196)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:146)
    at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:97)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311) 
```

我不知道去哪里调试这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T19:12:06.220

我使用 Google 插件 (GWT + GAE) 重新安装了 Eclipse Juno。我现在注意到该插件一直在尝试修改我的 web.xml 文件。

它尝试添加这个 servlet 定义：

```
 <servlet>
    <servlet-name>SystemServiceServlet</servlet-name>
    <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
    <init-param>
      <param-name>services</param-name>
      <param-value/>
    </init-param>
  </servlet>

  <servlet-mapping>
    <servlet-name>SystemServiceServlet</servlet-name>
    <url-pattern>/_ah/spi/*</url-pattern>
  </servlet-mapping> 
```

我无法弄清楚如何阻止它发生，但这真的很烦人，因为我需要不断地恢复该文件以避免签入这些更改。

尝试从您的 web.xml 文件中删除该 servlet。它似乎没有任何目的。它可能与谷歌云有关

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T22:46:44.493

当我在 Eclipse 中从 1.6.4 更新到 1.7.3 时，这发生在我身上，并且由于某种原因更新出错，两个版本的部分都留在了库中；我想这就是发生在其他人身上的事情。修复是关闭所有 AppEngine 项目并再次进行更新，然后将 1.7.3 切换为默认版本。如果仍然存在问题，请查看属性 -> 构建路径 -> 库，因为可能仍然有一个 1.6.4 本地支持库，您只需要删除它，然后就可以使用这个 servlet。

很高兴知道这个 servlet 做了什么，我在 Google 上根本找不到任何文档，但如果插件配置正确，它肯定不会造成任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-13T15:35:55.707

对于那些将来会遇到同样问题的人，我也会发布我的解决方案。

显然我的问题只是 GWT 库被损坏了。

所以我所做的是

*   继续项目 --> 属性 --> Google --> Web Toolkit --> 点击“使用特定的 SDK”
*   指定与默认相同的版本（这样 Eclipse 将重新创建 GWT 库和链接）。

之后一切正常。

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T20:46:37.960

虽然这可能不是一个合适的解决方案，但我设法让它在我的环境中工作：

*   将eclipse更新到最新版本的indigo (3.7.2)
*   卸载/安装 Google App Engine 工具
*   从以下教程创建新项目（您可以检查“生成项目示例代码”），这将为您添加所有的 hello world

运行它，它应该很好去。

ps：由于某种原因，我的 Eclipse 没有显示任何调试输出，但 dev_appserver.sh 不再抱怨错误。

# excel - Excel VBA中活动工作簿的设置值

> ID：12302978
> 
> 赞同：7
> 
> 时间：2012-09-06T15:02:30.187
> 
> 标签：excel, vba

我现在以这种方式设置我的工作簿，在工作簿被硬编码到 Set 命令中的地方，我想知道是否有这样做的方法，以便我可以将它放在流动的地方？因此，无论此代码位于何处（在另一个工作簿中），该代码都将适应它的新环境。

这有意义吗？

下面是我现在正在使用的，我想让它做的是代替使用`ActiveWorkbook`或类似的东西。因为这将设置在代码的开头而不是中间。

`Set wbOOR = Application.Workbooks("Open Order Report.xlsm")`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-06T15:09:03.027

你可能在追求`Set wbOOR = ThisWorkbook`

只是为了澄清

`ThisWorkbook`将始终引用代码所在的工作簿

`ActiveWorkbook`将引用处于活动状态的工作簿

在处理多个工作簿时要小心如何使用它。这实际上取决于您想要实现的目标，哪个是最佳选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T15:09:30.610

这就是你所需要的

```
Set wbOOR = ActiveWorkbook 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-29T02:03:25.483

试试这个。

```
Dim Workbk as workbook
Set Workbk = thisworkbook 
```

现在，您编写的所有内容都将仅适用于包含宏的工作簿。

# c++ - 使用 ESC 键关闭 Carbon 模式对话框

> ID：12302981
> 
> 赞同：1
> 
> 时间：2012-09-06T15:02:48.830
> 
> 标签：c++, macos, modal-dialog, macos-carbon

我的应用程序中有一个对话框，它是使用 CreateStandardAlert/RunStandardAlert 创建的。目前我的“确定”按钮正在响应 Return 键，但 Escape 什么也不做。阅读文档，它说模式对话框应该响应 Escape，但这个不是。我是否需要在对 RunStandardAlert 的调用中指定 filterProc（目前我已将其设置为 0），或者问题最有可能在我的代码中的其他地方出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:03:17.837

我假设您的对话框没有取消按钮，这通常会响应 Escape。我不确定 OK 按钮是否应该响应 Escape。`SetDialogCancelItem`如果您能找到按钮的项目编号，您也许可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:56:53.273

事实证明我没有将我的一个按钮设置为取消按钮。基本上我需要输入以下代码来设置它：

```
alertParams.cancelText      = (CFStringRef) kAlertDefaultCancelText;
alertParams.cancelButton    = kAlertStdAlertCancelButton; 
```

（这是在使用 GetStandardAlertDefaultParams 填充 alertParams 之后）

# java - 在执行器服务中实现线程超时

> ID：12302984
> 
> 赞同：3
> 
> 时间：2012-09-06T15:02:58.010
> 
> 标签：java, multithreading

所以现在我有一个相当基本的 Executor 服务，我用它来将我的程序分成线程，如下所示：

```
ExecutorService threadPool = Executors.newFixedThreadPool(12);
for (int i = 0; i < objectArray.length; i++) {
    threadPool.submit(new ThreadHandler(objectArray[i], i));
          // The i is used elsewhere
} 
```

我想知道是否有检测/关闭“崩溃”或“冻结”线程的好方法？我查看了文档，但它似乎完全不适合我使用它的方式......

有人可以帮我弄这个吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:10:34.333

`threadPool.submit`返回`Future<T>`对象。所以使用这个未来的对象，你可以处理你的任务执行。通过使用`isCancelled() and isDone`方法，您可以检查任务是否已取消或完成。更多`get()`的是阻塞调用，它在解释或取消或执行异常时抛出异常。

```
List<Future<?>> list = new ArrayList<Future<?>>();
for (int i = 0; i < objectArray.length; i++) {
    Future<?> task=threadPool.submit(new ThreadHandler(objectArray[i], i));
          // The i is used elsewhere
    list.add(task);
}
for(Future future : list){
   try{
       future.get();
   }catch(CancellationException cx){
   ...
   }catch(ExecutionException ex){
   ...
   }catch(InterruptedException ix){
   ...
   }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:27:10.410

您有一个选择是使用[`ExecutorCompletionService`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorCompletionService.html). 您通过其方法执行任务`submit`，然后有一个单独的线程等待该`poll(long timeout, TimeUnit unit)`方法完成。以异常终止的任务将返回 a `Future`，而后者`get()`将抛出`ExecutionException`.

使用超时，您还可以检测到在任何任务返回之前何时过去了太多时间；但是，此行为的用处很大程度上取决于您的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:06:38.170

您所能做的就是中断已取消的任务。您可以使用 ScheduledExecutorService 安排要取消的任务

如果您的代码不支持中断，则需要对其进行修复以使其正常运行。这很难以接近可靠的方式以编程方式解决。

# .net - 何时是使用 .NET Framework 4 而不是 .NET Framework 4 Client Profile 的合适时机？

> ID：12302985
> 
> 赞同：2
> 
> 时间：2012-09-06T15:03:01.460
> 
> 标签：.net, .net-client-profile

也许这里的问题是我不完全理解 .NET 4 的客户端配置文件和 .NET 4 的（常规？）版本之间的区别......

当我在 Visual Studio 2010 中开始一个新项目时，它默认为 .NET Framework 4 Client Profile 的目标框架。有时，在使用第三方库时，如果我的项目是为 .NET Framework 4 客户端配置文件设置的，我会遇到编译错误 - 切换到 .NET Framework 4 可以解决此问题。

我一直都在处理这个问题，但今天我决定问这个问题并弄清楚何时使用一个而不是另一个，以及为什么有两个版本的框架。

**编辑：**如果我以 .NET 4 为目标，我是否应该担心普通桌面用户不会通过 Windows 更新获得该框架？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T15:10:02.837

关于您的编辑：看看这里：[.Net Framework 4 Full 和 Net Framework 4 Client Profile Targeting](https://stackoverflow.com/q/10027301/114029)

[Scott Hanselman](http://www.hanselman.com/blog/)的这篇文章向您展示了客户资料中的内容和内容：

[迈向更小的 .NET 4 - 有关客户端配置文件和下载 .NET 的详细信息](http://www.hanselman.com/blog/TowardsASmallerNET4DetailsOnTheClientProfileAndDownloadingNET.aspx)

*   支持 Full 的所有操作系统
*   支持 x86 和 x64
*   客户端配置文件是可在 Windows 更新中用于桌面*的框架*
*   支持 VS 的所有方面（例如目标、部署项目等）
*   是几乎所有 VS10 客户端项目模板（Winforms、WPF、VSTO 等）中的默认目标

这是有趣的部分：

> 一般的想法是他们避免在客户端机器上安装你不需要的东西。这意味着他们不会仅仅因为她想要一个游戏就在你妈妈的电脑上安装 ASP.NET。此外，.NET 4 客户端配置文件是 .NET 4“完整”框架的适当子集。

这是更详细的帖子：[.NET Framework 4 Client Profile RTM 中的新增功能](http://blogs.msdn.com/b/jgoldb/archive/2010/04/12/what-s-new-in-net-framework-4-client-profile-rtm.aspx)

> **何时使用 NET4 Client Profile 以及何时使用 NET4 Full Framework？**
> *NET4 客户端配置文件：*
> 始终将 NET4 客户端配置文件用于所有客户端桌面应用程序（包括 Windows 窗体和 WPF 应用程序）。
> 
> *NET4 Full 框架：*
> 仅当您的应用所需的功能或程序集未包含在客户端配置文件中时，才以 NET4 Full 为目标。这包括：
> 
> *   如果您正在构建服务器应用程序。例如：
>     o ASP.Net 应用程序
>     o 服务器端基于 ASMX 的 Web 服务
> *   如果您使用旧版客户端方案。例如：
>     o 使用在 NET4 中已弃用且未包含在客户端配置文件中的 System.Data.OracleClient.dll。
>     o 使用旧版 Windows Workflow Foundation 3.0 或 3.5（WF3.0、WF3.5）
> *   如果您面向开发人员场景并需要 MSBuild 等工具或需要访问 System.Design.dll 等设计程序集

* * *

值得一提的是，从`.NET 4.5`没有更多的`Client Profile`. 它已停产： http: [//msdn.microsoft.com/en-us/library/cc656912.aspx](http://msdn.microsoft.com/en-us/library/cc656912.aspx)（链接由[CodingWithSpike](https://stackoverflow.com/users/28278/codingwithspike)提供）

# javascript - IFrame 真实位置

> ID：12302993
> 
> 赞同：0
> 
> 时间：2012-09-06T15:03:28.983
> 
> 标签：javascript, iframe

我需要在 IFrame 中制作带有导航和内容的页面。现在，在 content(IFrame) 部分有授权过程，所以经过一些步骤后它会移动到一些页面，问题是那时我不能只设置它的 src='next_page' 因为现在我需要一些额外的参数在此身份验证过程中附加在 url 中。

我需要从主页获取这些参数。所以我发现**iframe.location.href**包含真实的网址，我可以从中获取额外的参数。

唯一的问题是这个**位置**在 javascript 中受到保护。

我该如何做到这一点，如果有其他方法仍然很好，尽可能记录我可以实现我的目标。比如，是否可以在 iframe 中注入 javascript 代码并执行它，并以某种方式调用外部函数？我需要真实的当前位置