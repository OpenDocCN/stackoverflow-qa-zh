# StackOverflow 问答 11488000-11488999

# ms-access - 使用命令按钮访问 2010 表单 - OpenQuery 和 PrintPreviewQuery

> ID：11488002
> 
> 赞同：0
> 
> 时间：2012-07-14T22:54:44.707
> 
> 标签：ms-access, openquery, print-preview

我创建了一个 access 2010 表单，其中有一个列表框和两个命令按钮。列表框包含所有查询名称，命令按钮 1 用于“查询打印预览”，命令按钮 2 用于“打开查询”，应与列表框中的“双击查询名称”相同。那么，如何在列表中双击时打开这些按钮和查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T00:49:36.220

编辑：我已经用你需要通过按钮或列表框打开查询的通用代码更新了我的答案。这假定列表框中的值是数据库中的有效查询名称。

这很容易用一点 VBA 完成。

```
Option Explicit
Private Sub List_DblClick(Cancel As Integer)
Call Show_Click
End Sub

Private Sub Show_Click()
DoCmd.OpenQuery Me.List.Value
End Sub 
```

这假定您的列表框称为 List。您的命令按钮称为显示。

基本上，您希望在按钮的 Click 事件中运行的代码并从列表框的 DblClick 事件中调用该子程序。

# javascript - 传单错误：在 LayerGroup 中创建自定义图标标记时，对象函数没有方法“createIcon”

> ID：11488005
> 
> 赞同：3
> 
> 时间：2012-07-14T22:55:34.137
> 
> 标签：javascript, leaflet

我正在从 XML 流创建标记，并在其中设置自定义图标。我想将我的标记放在图层组中，以便我可以支持关闭某种类型的所有标记。当我使用自定义图标将标记添加到我的地图（使用 GroupLayer）时，我收到以下错误：

> 未捕获的类型错误：对象函数 (){this.initialize&&this.initialize.apply(this,arguments)} 没有方法“createIcon”

### 示例图标

```
 var ATVIcon = L.Icon.extend({
     iconUrl: './markers/atv.png',
     shadowUrl: '',
     iconSize: new L.Point(27, 17),
     shadowSize: new L.Point(0, 0),
     iconAnchor: new L.Point(22, 22),
     popupAnchor: new L.Point(-3, -76)
 }); 
```

### 示例层

```
var layerATV = new L.LayerGroup(); 
```

向地图或图层组添加标记

```
var thisMarker = new L.Marker(markerLocation, {title: $(this).attr('name')});
    targetLayerGroup.addLayer(thisMarker);
    thisMarker.setIcon(targetIcon); 
```

我尝试先将图层组添加到地图，然后将标记添加到图层组：

1.  图标变量被实例化
2.  GroupLayer 变量被实例化
3.  GroupLayers 添加到 Map
4.  标记是使用图标选项创建的
5.  标记添加到 GroupLayer

我尝试先将标记添加到图层组，然后将图层组添加到地图：

1.  图标变量被实例化
2.  GroupLayer 变量被实例化
3.  标记是使用图标选项创建的
4.  标记添加到 GroupLayer
5.  GroupLayers 添加到 Map

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T02:13:59.030

引用图标时，您需要在更新它们时使用括号，而不仅仅是分配给变量......

```
case 'church':
    targetLayerGroup = layerChurch;
    targetIcon = new ChurchIcon();
    break; 
```

相对于：

```
case 'church':
    targetLayerGroup = layerChurch;
    targetIcon = ChurchIcon;
    break; 
```

# sql - Access SQL - 两个 Count() 语句合二为一？

> ID：11488006
> 
> 赞同：4
> 
> 时间：2012-07-14T22:55:35.570
> 
> 标签：sql, ms-access

我正在为工作创建一个相当简单的 Access 数据库，但我被困在这个 SQL 语句上：

我有一个表，其中包含手机和它们分配到的站点 ID。我想要做的是查询表格，给我一列中的`NULL`实体数量，另一列显示分配给 X 站点 ID 的手机数量。

我可以`NULL`很容易地获得实体的数量，但是在一个语句中同时获得两个结果超出了我的能力范围。

这是我到目前为止所拥有的：

```
SELECT Handset_Type, COUNT(*) as "Number of null handsets"
FROM tbl_Handsets
WHERE Handset_Site_Id is Null
GROUP BY Handset_Type; 
```

所以现在我有了`null`手机的数量，但现在我还需要分配给 X 的手机数量。

像下面这样的东西应该是输出：

```
HANDSET     ||| NULL |||   X
handset 1   |||   50 |||   5
handset 2   |||   20 |||  10 
```

任何人都可以请帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T23:18:28.193

您可以使用 Access 的`IIF()`函数有条件地聚合：

```
SELECT   handset_type,
         COUNT(IIF(handset_site_id IS NULL, 1, NULL)) AS nullcount,
         COUNT(IIF(handset_site_id = X, 1, NULL)) AS X
FROM     tbl_handsets
GROUP BY handset_type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T23:03:34.137

不确定Access，但这是我通常在MySQL中所做的

`SELECT SUM(IF(handset_site_id IS NULL, 1, 0)) AS number_of_null_handsets`...

# ruby-on-rails - 从 url 下载并保存图像

> ID：11488008
> 
> 赞同：0
> 
> 时间：2012-07-14T22:56:00.253
> 
> 标签：ruby-on-rails

我需要下载图像并将其保存到我的数据库中。我是 Ruby on Rails 的新手。做这个的最好方式是什么？我可以随意使用图像 URL。另外，我的表中存储图像的最佳列类型是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T22:59:32.203

查看这篇题为[“Paperclip 示例应用程序第 3 部分：在数据库 BLOB 列中保存文件附件”的博文](http://patshaughnessy.net/2009/5/29/paperclip-sample-app-part-3-saving-file-attachments-in-a-database-blob-column)

# algorithm - 优化发现中毒 cookie 的天数

> ID：11488009
> 
> 赞同：6
> 
> 时间：2012-07-14T22:56:23.020
> 
> 标签：algorithm

我的一个朋友在面试时被问到这个问题，当时无法解决。以为我会分享同样的。

> 有一千个巧克力曲奇，其中一个中毒了。您每天可以接触 10 只实验室老鼠。每只老鼠可以啃任意数量的饼干，每个饼干可以被任意数量的老鼠啃。老鼠咬了一块有毒的饼干后，需要一天的时间才能看到老鼠中毒后的后果。

优化天数。我能够想出一个算法在 2 天内找到中毒的 cookie，尽管我相信有一种方法可以在 1 天内做到这一点

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-14T23:39:01.727

这是三天内的“简单”解决方案：

*   首先，让每只老鼠啃 100 块饼干。
*   一天后，让每只老鼠啃掉 10 块死老鼠吃的饼干。
*   两天后，让每只老鼠吃掉第二只死老鼠吃的饼干。
*   三天后，你就会知道哪个饼干中毒了。

现在对于一天内的“硬”解决方案：

*   以二进制对所有 cookie 进行编号。
*   每只老鼠都将啃咬那些二进制表示在老鼠索引处有一个设置位的cookie。因此，例如，老鼠 1 将蚕食所有奇数 cookie。
*   换句话说，饼干 37 会被老鼠 1、3 和 6 蚕食。所以如果这三只老鼠在第二天死了，你就知道饼干 37 是中毒的老鼠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T23:13:51.513

我想我明白了。

想象一棵以 1024 个 cookie 为根的二叉树（这个数字更清晰，但这适用于任何小于 1024 的数字）。将 1024 个 cookie 分成两组，每组 512 个，每组都是根的孩子。然后将这些 512 组中的每一个分成 256 组，并让它们成为每个组的孩子，依此类推。您应该最终得到 11 个级别的树。

将每只老鼠分配到除根之外的树的一个级别。每只老鼠只会吃掉他们关卡左边树枝上的饼干。第二天，遍历树，对于每只死去的老鼠，跟随左分支，对于每只活着的老鼠，跟随右分支。生成的 cookie 应该是有毒的。

# java - Android 清单意图问题

> ID：11488010
> 
> 赞同：0
> 
> 时间：2012-07-14T22:56:23.590
> 
> 标签：java, android, android-intent, manifest

在这个应用程序中，我想要一个按钮来打开一个不同的 Java 文件，现在我已经做过很多次了，但我现在似乎无法让它工作。我只是想知道是否有人能看到我做错了什么

这是我的清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.ucas.course"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="5"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".SQLView"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.SQLVIEW" />

            <category android:name="android.intent.category.OTHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

这就是我开始意图的方式

```
public void onClick(View v) {
    if(v.getId() == R.id.button1) {
        Intent temp = new Intent("android.intent.action.SQLVIEW");
        startActivity(temp);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:03:26.287

没有 android.intent.category.OTHER，你的意思可能是 android.intent.category.DEFAULT。

# visual-studio-lightswitch - 将过滤后的查询结果添加到 Lightswitch 中的屏幕

> ID：11488011
> 
> 赞同：0
> 
> 时间：2012-07-14T22:56:28.593
> 
> 标签：visual-studio-lightswitch

我有一个新的 Lightswitch 2012 RC 应用程序，其中包含三个表：问题、产品和版本。输入问题时，用户需要首先从所有已知产品（工作）列表中进行选择，然后从所选产品的版本列表中进行选择。目前在问题-产品、问题-版本和产品-版本之间存在关系。如何过滤版本列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:15:44.047

这称为“级联组合框”或“嵌套组合框”。

这两篇文章应该可以帮助你：

[用于数据输入的嵌套 AutoCompleteBox](http://dotnettim.wordpress.com/2011/03/20/lightswitch-nested-autocompletebox-for-data-entry/)

[用于数据输入的嵌套 AutoCompleteBox 第 2 部分](http://dotnettim.wordpress.com/2011/04/11/lightswitch-nested-autocompletebox-for-data-entry-part-2/)

# ruby-on-rails - group_by 教育-rails 3

> ID：11488012
> 
> 赞同：-2
> 
> 时间：2012-07-14T22:56:42.657
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, facebook-graph-api, activerecord

我正在使用 Rails 3、omniauth 和 facebook graph api 构建教育应用程序的原型。因此，当用户登录我的应用程序时，他使用他的 facebook 帐户，我会获取他所有的教育历史和他的朋友 education_history。

我想将每个用户朋友教育分组如下： ![在此处输入图像描述](../Images/169e0bc41e10dee7c8610977b87bb74c.png)

我尝试过这样的事情：

```
<ul class="friends-list">
<%= current_user.friends.group_by(&:highschool_name) do |highschool_name| 
 p "<li>#{highschool_name}</li>"
 end
 %>
</ul> 
```

我得到一个语法错误。

用户表如下所示：

```
[id, name, image, location, highschool_name, highschool_year, college_name, college_year, graduteschool_name, graduate_year ] 
```

Friend 表如下所示：

```
[id, uid, name, image, higschool_name, college_name, graduateschool_name, user_id] 
```

如何使用活动记录解决我的问题，没有循环，因为它们无效......对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:36:31.113

您不能在 ERB 文件中使用`p`或。`puts`将 ERB 文件视为连接在一起的一个大字符串。喜欢`"string 1" + "string 2" + "string 3"`。

这就是 ERB 所做的一切——它只是将字符串粘贴到一个大字符串中。您不能`puts`在此串联操作中调用。因此，ERB 文件中的所有内容都必须是字符串。调用的输出`puts`只是“烟消云散”，因为`puts`调用不返回字符串，而是写入`stdout`。

接下来我们看`group_by`：它返回一个`Hash`：

```
---------------------------------------------------- Enumerable#group_by
     enum.group_by {| obj | block }  => a_hash
------------------------------------------------------------------------
     Returns a hash, which keys are evaluated result from the block,
     and values are arrays of elements in enum corresponding to the key.

        (1..6).group_by {|i| i%3}   #=> {0=>[3, 6], 1=>[1, 4], 2=>[2, 5]} 
```

所以把所有东西放在一起，我们可以做这样的事情：

```
<% current_user.friends.group_by(&:highschool_name).each do |hsname, friends| %>
   <% next if hsname.blank? %>
   <li><%= hsname %></li> 
   <% friends.each do |friend| %>
     <%= image_tag(friend.img_url) %> # <- Or wherever you get the img url from 
   <% end %>
<% end %> 
```

# javascript - javascript for循环中的异步进程

> ID：11488014
> 
> 赞同：171
> 
> 时间：2012-07-14T22:56:56.383
> 
> 标签：javascript, asynchronous, for-loop, synchronization

我正在运行以下形式的事件循环：

```
var i;
var j = 10;
for (i = 0; i < j; i++) {

    asynchronousProcess(callbackFunction() {
        alert(i);
    });
} 
```

我试图显示一系列显示数字 0 到 10 的警报。问题是，当回调函数被触发时，循环已经经历了几次迭代，它显示了更高的`i`. 有关如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：292
> 
> 时间：2012-07-14T23:18:05.610

在`for`启动所有异步操作时，循环会立即运行完成。当他们在未来某个时间完成并调用他们的回调时，循环索引变量的值`i`将是所有回调的最后一个值。

这是因为`for`循环在继续循环的下一次迭代之前不会等待异步操作完成，并且因为异步回调在将来的某个时间被调用。因此，循环完成了它的迭代，然后当这些异步操作完成时调用回调。因此，循环索引已“完成”并处于所有回调的最终值。

要解决此问题，您必须为每个回调单独保存循环索引。在 Javascript 中，这样做的方法是在函数闭包中捕获它。这可以通过专门为此目的创建一个内联函数闭包来完成（下面显示的第一个示例），或者您可以创建一个将索引传递给的外部函数并让它为您唯一地维护索引（下面显示的第二个示例）。

截至 2016 年，如果您拥有完全符合 ES6 规范的 Javascript 实现，您还可以使用`let`来定义`for`循环变量，它将为循环的每次迭代唯一定义`for`（下面的第三个实现）。但是，请注意这是 ES6 实现中的后期实现功能，因此您必须确保您的执行环境支持该选项。

**使用 .forEach() 进行迭代，因为它创建了自己的函数闭包**

```
someArray.forEach(function(item, i) {
    asynchronousProcess(function(item) {
        console.log(i);
    });
}); 
```

**使用 IIFE 创建自己的函数闭包**

```
var j = 10;
for (var i = 0; i < j; i++) {
    (function(cntr) {
        // here the value of i was passed into as the argument cntr
        // and will be captured in this function closure so each
        // iteration of the loop can have it's own value
        asynchronousProcess(function() {
            console.log(cntr);
        });
    })(i);
} 
```

**创建或修改外部函数并将其传递给变量**

如果您可以修改`asynchronousProcess()`函数，那么您可以将值传递到那里并将`asynchronousProcess()`函数 cntr 返回给回调，如下所示：

```
var j = 10;
for (var i = 0; i < j; i++) {
    asynchronousProcess(i, function(cntr) {
        console.log(cntr);
    });
} 
```

**使用 ES6`let`**

如果你有一个完全支持 ES6 的 Javascript 执行环境，你可以像这样`let`在你的`for`循环中使用：

```
const j = 10;
for (let i = 0; i < j; i++) {
    asynchronousProcess(function() {
        console.log(i);
    });
} 
```

`let`在这样的`for`循环声明中声明将为循环的每次调用创建一个唯一值`i`（这是您想要的）。

**使用 Promise 和 async/await 进行序列化**

如果您的 async 函数返回一个 Promise，并且您希望序列化您的异步操作以一个接一个地运行而不是并行运行，并且您在支持`async`and的现代环境中运行`await`，那么您有更多选择。

```
async function someFunction() {
    const j = 10;
    for (let i = 0; i < j; i++) {
        // wait for the promise to resolve before advancing the for loop
        await asynchronousProcess();
        console.log(i);
    }
} 
```

这将确保一次只有一个调用`asynchronousProcess()`在进行中，并且`for`循环甚至不会在每个调用完成之前进行。这与之前所有并行运行异步操作的方案不同，因此它完全取决于您想要的设计。注意：`await`使用 Promise，因此您的函数必须返回一个在异步操作完成时被解析/拒绝的 Promise。另外，请注意，为了使用`await`，必须声明包含函数`async`。

**并行运行异步操作并用于`Promise.all()`按顺序收集结果**

```
 function someFunction() {
     let promises = [];
     for (let i = 0; i < 10; i++) {
          promises.push(asynchonousProcessThatReturnsPromise());
     }
     return Promise.all(promises);
 }

 someFunction().then(results => {
     // array of results in order here
     console.log(results);
 }).catch(err => {
     console.log(err);
 }); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-06-11T19:21:04.477

`async await`在这里（ES7），所以你现在可以很容易地做这种事情。

```
 var i;
  var j = 10;
  for (i = 0; i < j; i++) {
    await asycronouseProcess();
    alert(i);
  } 
```

**请记住，这仅在`asycronouseProcess`返回一个`Promise`**

如果`asycronouseProcess`不在你的控制范围内，那么你可以让它`Promise`像这样自己返回

```
function asyncProcess() {
  return new Promise((resolve, reject) => {
    asycronouseProcess(()=>{
      resolve();
    })
  })
} 
```

然后将这一行替换`await asycronouseProcess();`为`await asyncProcess();`

**`Promises`甚至在调查之前理解`async await`是必须的** （另请阅读关于对 的支持`async await`）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-14T23:59:46.183

> 关于如何解决这个问题的任何建议？

一些。您可以使用[绑定](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)：

```
for (i = 0; i < j; i++) {
    asycronouseProcess(function (i) {
        alert(i);
    }.bind(null, i));
} 
```

或者，如果您的浏览器支持[let](https://developer.mozilla.org/en/JavaScript/Reference/Statements/let)（它将在下一个 ECMAScript 版本中，但 Firefox 已经支持它一段时间了），您可以：

```
for (i = 0; i < j; i++) {
    let k = i;
    asycronouseProcess(function() {
        alert(k);
    });
} 
```

或者，您可以`bind`手动完成工作（如果浏览器不支持它，但我会说您可以在这种情况下实现一个 shim，它应该在上面的链接中）：

```
for (i = 0; i < j; i++) {
    asycronouseProcess(function(i) {
        return function () {
            alert(i)
        }
    }(i));
} 
```

我通常更喜欢`let`什么时候可以使用它（例如对于 Firefox 插件）；否则`bind`或自定义[柯里](http://en.wikipedia.org/wiki/Currying)化函数（不需要上下文对象）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-01T07:33:29.050

```
var i = 0;
var length = 10;

function for1() {
  console.log(i);
  for2();
}

function for2() {
  if (i == length) {
    return false;
  }
  setTimeout(function() {
    i++;
    for1();
  }, 500);
}
for1();
```

这是此处预期的示例功能方法。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-08-18T01:29:50.880

ES2017：您可以将异步代码包装在一个函数中（比如 XHRPost），返回一个承诺（承诺中的异步代码）。

然后在 for 循环中调用函数（XHRPost），但使用神奇的 Await 关键字。:)

```
let http = new XMLHttpRequest();
let url = 'http://sumersin/forum.social.json';

function XHRpost(i) {
  return new Promise(function(resolve) {
    let params = 'id=nobot&%3Aoperation=social%3AcreateForumPost&subject=Demo' + i + '&message=Here%20is%20the%20Demo&_charset_=UTF-8';
    http.open('POST', url, true);
    http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    http.onreadystatechange = function() {
    console.log("Done " + i + "<<<<>>>>>" + http.readyState);
          if(http.readyState == 4){
              console.log('SUCCESS :',i);
              resolve();
          }
         }
    http.send(params);       
    });
 }

(async () => {
    for (let i = 1; i < 5; i++) {
        await XHRpost(i);
       }
})();
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-14T23:11:02.873

JavaScript 代码在单个线程上运行，因此您不能在不严重影响页面可用性的情况下阻塞等待第一个循环迭代完成后再开始下一个循环。

解决方案取决于您真正需要什么。如果该示例完全符合您的需要，@Simon 建议传递`i`给您的异步进程是一个很好的建议。

# javascript - 从 xmlhttp.responseText 获取数据

> ID：11488017
> 
> 赞同：0
> 
> 时间：2012-07-14T22:57:38.553
> 
> 标签：javascript, html, ajax, xmlhttprequest

在调用该函数后，我一直在尝试获取 xmlhttp.responseText，因为我希望做一些显示和隐藏对象。但似乎我无法匹配 innerhtml 并显示按钮之类的对象。

更新的 Javascript 函数：

```
function ShowHideDisplay(str)
{
   xmlhttp = new XMLHttpRequest();
   //It will echo whatever message into this response.text.
   if (xmlhttp.readyState == 4 && xmlhttp.status == 200) 
   {
   document.getElementById("validate").innerHTML = xmlhttp.responseText;
   }
   //Using test
   var successText = "<img src=\"./images/success.gif\" alt=\"Correct!\">Can be used";
   document.getElementById("validate").innerHTML = responseText;
   if(document.getElementById("validate").innerHTML.test(/success/gmi))
   {
       document.getElementById("submit").style.visibility = 'visible';
   }
   else
   {
       document.getElementById("submit").style.visibility = 'hidden';
   }
} 
```

HTML 表单：

```
 <input name="Numbers" type="text" id="Numbers" onkeyup="ShowHideDisplay(this);" value=""/>
 <span id="validate"></span>
 //wants to hide and show upon onkeyup and getting the span id of validate.innerhtml success message
 <input name="submit" id="submit" type="submit"> 
```

我只需要获取验证值或 innerhtml 文本的 span id 即可显示和隐藏按钮。但我尝试了不同的方法，但它无法匹配 innerhtml 文本。好心提醒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:11:59.043

我创建了一个可能做你想要的**[小提琴。](http://jsfiddle.net/LAcp4/3/)**

**的HTML**

```
<input id="submit" type="submit" />
<span id="validate"></span>​ 
```

**JavaScript** _

 **```
/* Success */
var responseText = "<img src=\"./images/success.gif\" alt=\"Correct!\">Can be used";

/* Failure */
//var responseText = "<img src=\"./images/Failed.gif\" alt=\"Incorrect!\">Can not be used";

/* Assign content */    
document.getElementById("validate").innerHTML = responseText || "";

/* Change visibility based on outcome (success or not) */    
if(document.getElementById("validate").innerHTML.test(/success/gmi)) {
  document.getElementById("submit").style.visibility = 'visible';
} else {

    document.getElementById("submit").style.visibility = 'hidden';
}​ 
```

[使用正则表达式测试](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)结果中是否包含**“成功”**一词。这样，响应中的 HTML 是什么并不重要。

**注意**HTML中没有**<success\>**元素，请使用**span 或 div**与 class success。

PS。如果可以，您应该只返回单词 true 或 false 或 success 或 failure 而不是 HTML 并在客户端上呈现文本和图像。**

# java - Eclipse 插件：将值从一个视图传递到另一个视图

> ID：11488022
> 
> 赞同：1
> 
> 时间：2012-07-14T22:58:16.300
> 
> 标签：java, eclipse, plugins, view, package-explorer

我编写了一个在视图中集成了[prefuse](http://www.prefuse.org)的插件（org.eclipse.ui.views）。第二步，我编写了一个命令菜单并将其添加到 Package Explorer 的上下文菜单中。当我右键单击资源管理器包视图中的任何包时，它会显示菜单。当我单击它时，该命令的 Handler 类将包中的所有 Java 类路径保存到一个列表中。我现在的问题是，如何将更新后的 List 传递给初始化我的 prefuse 类的视图。我忘了提到这是我第一次编写 eclipse 插件。也许有更好的方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T04:45:10.887

您的插件的 plugin.xml 可能定义了两件事：

1.  包资源管理器的上下文菜单贡献
2.  应该接收列表的视图

从包资源管理器调用您的菜单贡献时，您的视图可能已经打开，也可能未打开。如果它已经打开，您希望将数据从菜单命令发送到视图，因此您需要获取对视图的一些引用。如果视图尚未打开，则该命令应打开视图，然后将数据发送到视图。

这两种情况都可以用同样的方法解决。

例如，按照 [Programmatically shows a View from an Eclipse Plug-in 中](https://stackoverflow.com/questions/171824/programmatically-showing-a-view-from-an-eclipse-plug-in)的信息， 您可以激活该视图，无论它是否已经可见。该方法`IWorkbenchPage#showView(id-of-your-view)`将返回对您的视图的引用，因此您可以将其转换为视图的类型并调用其方法，例如包括一些接收您要在视图中显示的列表的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T23:14:58.263

我会在你的插件中使用 Activator 类。在某些时候，Eclipse 将通过在您的插件中构造一个 Activator 类的实例来启动您的插件。始终可以使用 Activator 上的 getDefault() 类方法来引用该实例。

当您的视图被初始化时，它可以将自己注册到 Activator 实例（有一个实例变量来保存对视图对象的引用）。当您的 Handler 有一个列表要提供给视图时，处理程序可以向 Activator 的默认实例请求视图对象，然后可以直接发送列表。

如果您将处理程序放在与视图不同的插件中，则可以使一个插件成为另一个插件的依赖项。然后第二个插件可以访问第一个插件中的类，其中包括第一个插件的 Activator 类。

# iphone - NSArray of UIImages to video error 在输出中有失真

> ID：11488025
> 
> 赞同：5
> 
> 时间：2012-07-14T22:59:28.030
> 
> 标签：iphone, ios, xcode, video, uiimage

我对编程比较陌生，虽然我对正常功能没问题，但我对视频编辑完全陌生

所以我设法在网上找到了一些代码来完成如下所示的工作：

```
- (void)writeImagesAsMovie:(NSArray *)array {
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDirectory, YES);
NSString *documentDirectory = [paths objectAtIndex:0];
NSString *saveLocation = [documentDirectory stringByAppendingString:@"/temp.mov"];

if ([[NSFileManager defaultManager] fileExistsAtPath:saveLocation]) {
    [[NSFileManager defaultManager] removeItemAtPath:saveLocation error:NULL];
}

UIImage *first = [array objectAtIndex:0];

CGSize frameSize = first.size;

NSError *error = nil;
AVAssetWriter *videoWriter = [[AVAssetWriter alloc] initWithURL:
                              [NSURL fileURLWithPath:saveLocation] fileType:AVFileTypeQuickTimeMovie
                                                          error:&error];

if(error) {
    NSLog(@"error creating AssetWriter: %@",[error description]);
}
NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                               AVVideoCodecH264, AVVideoCodecKey,
                               [NSNumber numberWithInt:frameSize.width], AVVideoWidthKey,
                               [NSNumber numberWithInt:frameSize.height], AVVideoHeightKey,
                               nil];

AVAssetWriterInput *writerInput = [AVAssetWriterInput
                                    assetWriterInputWithMediaType:AVMediaTypeVideo
                                    outputSettings:videoSettings];

NSMutableDictionary *attributes = [[NSMutableDictionary alloc] init];
[attributes setObject:[NSNumber numberWithUnsignedInt:kCVPixelFormatType_32ARGB] forKey:(NSString*)kCVPixelBufferPixelFormatTypeKey];
[attributes setObject:[NSNumber numberWithUnsignedInt:frameSize.width] forKey:(NSString*)kCVPixelBufferWidthKey];
[attributes setObject:[NSNumber numberWithUnsignedInt:frameSize.height] forKey:(NSString*)kCVPixelBufferHeightKey];

AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor
                                                 assetWriterInputPixelBufferAdaptorWithAssetWriterInput:writerInput
                                                 sourcePixelBufferAttributes:attributes];

[videoWriter addInput:writerInput];

// fixes all errors
writerInput.expectsMediaDataInRealTime = YES;

//Start a session:
[videoWriter startWriting];

[videoWriter startSessionAtSourceTime:kCMTimeZero];

CVPixelBufferRef buffer = NULL;
buffer = [self pixelBufferFromCGImage:[first CGImage]];
BOOL result = [adaptor appendPixelBuffer:buffer withPresentationTime:kCMTimeZero];

if (result == NO) //failes on 3GS, but works on iphone 4
    NSLog(@"failed to append buffer");

if(buffer) {
    CVBufferRelease(buffer);
}

//int reverseSort = NO;
NSArray *newArray = array;

int fps = 10;

int i = 0;
for (UIImage *image in newArray)
{
    [NSThread sleepForTimeInterval:0.02];
    if (adaptor.assetWriterInput.readyForMoreMediaData) {

        i++;
        CMTime frameTime = CMTimeMake(1, fps);
        CMTime lastTime = CMTimeMake(i, fps);
        CMTime presentTime = CMTimeAdd(lastTime, frameTime);

        UIImage *imgFrame = image;//[UIImage imageWithContentsOfFile:filePath] ;
        buffer = [self pixelBufferFromCGImage:[imgFrame CGImage]];
        BOOL result = [adaptor appendPixelBuffer:buffer withPresentationTime:presentTime];

        if (result == NO) //failes on 3GS, but works on iphone 4
        {
            NSLog(@"failed to append buffer");
            NSLog(@"The error is %@", [videoWriter error]);
            [NSThread sleepForTimeInterval:0.5];
        }

        if(buffer) {
            CVBufferRelease(buffer);
        }

    } else {
        NSLog(@"error");
        i--;
    }
}

//Finish the session:
[writerInput markAsFinished];
[videoWriter finishWriting];
CVPixelBufferPoolRelease(adaptor.pixelBufferPool);

NSLog(@"Movie created successfully");
}

- (CVPixelBufferRef) pixelBufferFromCGImage: (CGImageRef) image
{

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], kCVPixelBufferCGImageCompatibilityKey,
                             [NSNumber numberWithBool:YES], kCVPixelBufferCGBitmapContextCompatibilityKey,
                             nil];
    CVPixelBufferRef pxbuffer = NULL;

    CVPixelBufferCreate(kCFAllocatorDefault, CGImageGetWidth(image),
                        CGImageGetHeight(image), kCVPixelFormatType_32ARGB, (__bridge CFDictionaryRef) options,
                        &pxbuffer);

    CVPixelBufferLockBaseAddress(pxbuffer, 0);
    void *pxdata = CVPixelBufferGetBaseAddress(pxbuffer);

    CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(pxdata, CGImageGetWidth(image),
                                                 CGImageGetHeight(image), 8, 4*CGImageGetWidth(image), rgbColorSpace,
                                                 kCGImageAlphaNoneSkipFirst);

    CGContextConcatCTM(context, CGAffineTransformMakeRotation(0));

    //    CGAffineTransform flipVertical = CGAffineTransformMake(
    //                                                           1, 0, 0, -1, 0, CGImageGetHeight(image)
    //                                                           );
    //    CGContextConcatCTM(context, flipVertical);

    //    CGAffineTransform flipHorizontal = CGAffineTransformMake(
    //                                                             -1.0, 0.0, 0.0, 1.0, CGImageGetWidth(image), 0.0
    //                                                             );
    //
    //    CGContextConcatCTM(context, flipHorizontal);

    CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(image),
                                           CGImageGetHeight(image)), image);
    CGColorSpaceRelease(rgbColorSpace);
    CGContextRelease(context);

    CVPixelBufferUnlockBaseAddress(pxbuffer, 0);

    return pxbuffer;
} 
```

但是我遇到的问题是视频的输出有些损坏（它确实可以播放，尽管它​​有如下所示的有趣的线条： ![在此处输入图像描述](../Images/52e7a0e713083f9dca169c058f65ca12.png)

我会很感激任何帮助

非常感谢

托马斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T09:24:45.197

我一直看到 H264 视频编码硬件存在问题，它可能会破坏与已知宽高比不匹配的输入。例如，我的测试表明，如果一个视频尺寸小于 128 像素，则视频不会编码。

我所看到的工作是 128x128、192x128、240x160、480x320 等。

请参阅此[页面的纵横比](http://en.wikipedia.org/wiki/Computer_display_standard)

PS 您可能会想要使用 ，`AVAssetWriterInputPixelBufferAdaptor`因为它包含一个像素缓冲池，您可以通过`CVPixelBufferPoolCreatePixelBuffer()`. 此外，您需要`assert(adaptor.pixelBufferPool);`在调用`startSessionAtSourceTime`后确保您的适配器可以写入作者。

# ios - 如何在 Xcode 调试窗口中更改浮点数和双精度数的显示格式？

> ID：11488028
> 
> 赞同：2
> 
> 时间：2012-07-14T22:59:38.633
> 
> 标签：ios, xcode, debugging, llvm, lldb

我在 Xcode 中调试 C 并在函数中设置断点以检查各种双精度值的值。Xcode 坚持使用科学计数法来显示它们，这真的很痛苦。我需要查看十进制表示。*右键单击Decimal*的“查看值”菜单选项，会做一些奇怪的事情。任何人都知道如何让这个在 printf'n 我想看到的所有内容中发挥得很好？

![在此处输入图像描述](../Images/ef71f8e48e999a4472506ba404ecc0e0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:43:50.207

查看[LLDB 变量格式](http://lldb.llvm.org/varformats.html)文档，特别是靠近顶部的*类型格式部分。*

您可以使用该`type format`命令更改默认输出。

从上面的链接

> 类型格式使您能够快速覆盖显示原始类型的默认格式（通常的基本 C/C++/ObjC 类型：int、float、char、...）。
> 
> 如果出于某种原因您希望程序中的所有 int 变量都打印为十六进制，您可以将格式添加到 int 类型。
> 
> 这是通过键入
> 
> (lldb) 类型格式添加 --format hex int

要更改 jDate 对象的默认显示，您应该能够执行类似的操作

```
type format add -f float jDate 
```

您可以从调试器本身获得更多信息，`help <format>`但上面链接的页面读起来很好。

如果这不能解决您的问题，您可能需要进一步阅读*类型摘要*。我不记得 Xcode 显示了什么，无论是格式还是摘要。

此外，WWDC2012 session **# 415 “Debugging with LLDB”**展示了更改这些显示格式并添加您自己的格式的方法。相关位在 35 分钟左右，但整个会话都很棒。

希望有帮助！

# apache - VirtualHost ServerAlias 为某些人工作，但不是为其他人工作。mod_rewrite 相关？

> ID：11488032
> 
> 赞同：1
> 
> 时间：2012-07-14T23:00:03.867
> 
> 标签：apache, dns, virtualhost

我希望 4 个 URL 最终出现在同一个地方。我在我的虚拟主机配置中使用 ServerAlias 设置来完成它。对于 2 个 ServerAlias 条目，它有效，但不适用于第三个条目。以下是应该在同一个地方结束的 URL：

*   libbyh.com
*   www.libbyh.com
*   libbyhemphill.com
*   www.libbyhemphill.com

我的 libbyh.com 虚拟主机文件如下所示：

```
<VirtualHost *:80>
ServerName libbyh.com
ServerAlias www.libbyh.com www.libbyhemphill.com libbyhemphill.com
ServerAdmin libbyh@gmail.com
DocumentRoot /var/www/html/libbyh.com
DirectoryIndex index.php
<Directory /var/www/html/libbyh.com/>
  AllowOverride All
  Order Deny,Allow
  Allow from all
</Directory>
</VirtualHost> 
```

.htaccess 的重写相关位：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

libbyhemphill.com 和 www.libbyhemphill.com 最终都在正确的位置，但 www.libbyh.com 返回 404。我在日志中找不到任何告诉我原因的内容。我尝试`dig`了 www.libbyh.com 并获得了我期望的 DNS 设置，但`ping`失败了。这是怎么回事？我还能在哪里看？我在星期四（现在是星期六）更改了两个 DNS 名称服务器并将站点移至新服务器。我在新的名称服务器上添加了 www.libbyh.com 和 libbyh.com 的 A 记录。有没有我搞砸的DNS设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:08:57.647

libbyh.com、libbyhemphill.com 和 www.libbyhemphill.com 都有 216.47。`158`.239 而 www.libbyh.com 有 216.47。`156`.239

您确定您的 DNS 对于 www.libbyh.com 是正确的吗？

# android - 从返回的 Uri 中获取插入数据库的新记录的 ID

> ID：11488035
> 
> 赞同：34
> 
> 时间：2012-07-14T23:01:04.590
> 
> 标签：android, android-sqlite

当您将新项目插入这样的数据库时

```
Uri uri = getContentResolver().insert(Tournaments.CONTENT_URI, values); 
```

有什么方法可以从返回的 uri 中获取 id，所以我不必运行查询来获取 id，因为它已经在返回的 uri 中？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-07-14T23:13:03.750

[ContentUris.parseId()](http://developer.android.com/reference/android/content/ContentUris.html#parseId%28android.net.Uri%29)将最后一个路径段转换为 long。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-14T23:18:48.370

```
long id = Long.valueOf(uri.getLastPathSegment()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-29T11:03:57.690

使用 ContentUris.parseId(uri) 这条语句会将最后一个路径段转换为 long。

[在此处](https://developer.android.com/reference/android/content/ContentUris.html)阅读文档

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-09T10:13:45.983

```
long rowId = Long.valueOf(uri.getLastPathSegment()); 
```

以上是正确的。但是我所做的是，我传递了像 Events.CONTENT_URI.getLastPathSegment() 这样的 uri，它没有给出 id。因为我们必须传递由 insert() 返回的 URI，如下所示。可能对像我这样的人有帮助！

```
Uri uri = getContentResolver().insert(Events.CONTENT_URI, values); 
long rowId = Long.valueOf(uri.getLastPathSegment()); 
```

# heroku - 从 EC2 访问 Heroku Postgres 实例

> ID：11488036
> 
> 赞同：7
> 
> 时间：2012-07-14T23:01:06.427
> 
> 标签：heroku, amazon-ec2

我有一个应用程序，我们目前在多个共置服务器上运行，我有兴趣将所有内容迁移到云端。

我有一个运行 Postgres 的遗留应用程序及其使用 MySql 作为其数据存储的替换应用程序。我有兴趣迁移到 EC2 并希望尽可能轻松地做到这一点。我计划将 Amazon RDS 用于 MySql 数据存储，但正在寻找 Postgres 安装的选项。

我知道 Heroku 是建立在 EC2 之上的，并且有 Postres 支持，我想知道

有没有人有过从 EC2 中运行的应用程序访问 Heroku Postgres 数据库的经验。关于性能、可靠性、易于管理的评论

另一种选择是在带有 EBS 卷的 EC2 上安装 Postgres，但我听到的关于性能、可靠性和易于管理的评价褒贬不一。

在此先感谢，任何经验和建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T20:29:11.093

我已经在东海岸使用了几个并置的盒子来做到这一点。Heroku 实际上有一个完全独立的服务：[Heroku Postgres](https://postgres.heroku.com/)，它是为这个特定的用例而构建的。您创建的数据库都是独立的（与任何 Heroku 应用程序无关）。

# ios - XCode：MasterDetailsView - 横向没有分屏的DetailsView？

> ID：11488041
> 
> 赞同：1
> 
> 时间：2012-07-14T23:02:19.310
> 
> 标签：ios, xcode, pdf, ios5, detailsview

实际上我对 Xcode 很陌生，通过谷歌搜索无法找到以下两个问题的答案：

1.  简而言之：我正在开发一个显示提案的 iPad 应用程序。为此，您应该从 MasterView 的表格中选择一个提案，然后在横向模式下的 DetailsView 中查看详细信息（但在 Spitscreen 上没有 MasterView）。因此，当应用程序以横向模式启动时，我想直接在 DetailsView 上全屏查看第一个提案。当我点击屏幕时，MasterView 应该与表格中的其他建议一起弹出/取消隐藏。这可能吗？

2.  我想在 iBooks 中的 WebView 中显示 PDF。这意味着导航栏是隐藏的，只有当我点击屏幕时，导航栏才会出现在屏幕顶部。

我有点确定这个问题已经在某个地方得到了解决，但我无法通过搜索找到任何东西，所以我希望你能帮助我:-)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:17:46.930

Q1：使用可以使用多种方法中的一种来呈现视图（在“呈现另一个视图控制器的内容”标题下的 UIViewController 上查找[Apple 的文档）。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)我用过的两个是： `– presentModalViewController:animated:` 和`– presentViewController:animated:completion:` （后者是 iOS 5.0 中的最新添加）

因此，假设您有一个名为 的细节控制器`MyDetailViewController`，在您的主视图控制器的实现文件（.m 文件）中，在`viewDidLoad`方法下，您将执行类似这样的操作以将其呈现为全屏视图。

```
MyDetailViewController *myDetailViewController = [[MyDetailViewController alloc] initWithNibName:@"MyDetailViewController" bundle:nil];
[myDetailViewController.view setFrame:CGRectMake(0, 0, 1024, 768)];   //might not need this
[self presentViewController:newDetailViewController animated:YES completion:^{
        NSLog(@"complete");  //optional
    } ]; 
```

要通过点击或触摸关闭或隐藏它`MyDetailViewController`，您可以使用[UITapGestureRecognizer](http://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more)或 touchesEnded 方法并使用其中一种关闭方法（为此再次参考 Apple 的 UIViewController）。

Q2：我个人没有使用 UIWebView 来显示 PDF 并且不确定 iBooks 是否使用 UIWebview 来显示 PDF。但是要显示各种流行的文档格式，您可以使用[QLPreviewController](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/QLPreviewController_Class/Reference/Reference.html)类或[UIDocumentInteractionController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html#//apple_ref/occ/cl/UIDocumentInteractionController)。您可以在显示文档时隐藏工具栏。

祝你好运。

# wordpress - Wordpress 获取最近的帖子并显示标题和类别名称

> ID：11488046
> 
> 赞同：1
> 
> 时间：2012-07-14T23:03:51.980
> 
> 标签：wordpress, categories

我正在尝试列出我最近的帖子，这些帖子还显示我现在拥有的类别

```
<?php   $args = array(  'numberposts' => 30)  ;
$recent_posts = wp_get_recent_posts( $args );
foreach( $recent_posts as $recent ){
echo '<li>
    <a href="'.get_permalink($recent["ID"]).'"  title="Look'.esc_attr($recent["post_title"]).'"   > '.$recent["post_title"].'</a>   </li> ';    } ?> 
```

这会显示帖子，但我希望它也显示类别名称。

任何帮助都会很棒，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T23:13:54.703

```
$cats = get_the_category($recent["ID"]);
$cat_name = $cats[0]->name; // for the first category 
```

您可以在循环中尝试此操作（如果您有多个类别）

```
$cats = get_the_category($recent["ID"]);
foreach($cats as $cat)
{
    echo $cat->name." ";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-10T02:24:46.087

我能够使用以下方法使其正常工作。

```
$cats[0]->name." " 
```

因此，在最近的帖子循环中，您可以像这样使用它：

```
$args = array('numberposts' => 5, 'category' => '4,5' );
$recent_posts = wp_get_recent_posts( $args );    

foreach( $recent_posts as $recent ){
   $cats = get_the_category($recent["ID"]);
   echo '<li><a href="' . get_permalink($recent["ID"]) . '" title="Look '.esc_attr($recent["post_title"]).'">' .   $cats[0]->name." " . $recent["post_title"].'</a> </li> ';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T22:50:57.550

通过使用以下内容，我能够获得一个显示类别然后是标题的列表。

```
 <?php
  $recentPosts = new WP_Query();
  $recentPosts->query('showposts=30');?>
 <?php while ($recentPosts->have_posts()) : $recentPosts->the_post(); ?>
 <?php the_category(" "); ?>-<a href="<?php the_permalink()?>">  <?php the_title(); ?></a> 
 <?php endwhile; ?><?php wp_reset_query()?> 
```

我永远无法让以下代码在我的原始代码中工作它总是显示为“数组”或 Null（我猜我只是不知道写入它的正确方法）我能够得到它如果我创建了一个帖子并且只想显示该类别而没有其他内容，则显示该类别。

```
 $cats = get_the_category($recent["ID"]);
 foreach($cats as $cat){
 echo $cat->name." "; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-05T18:50:45.900

我使用了 Jaco 的答案，但是

```
 $cats[0]->name 
```

给了我每个帖子数组中的第一个类别。我所做的调整是在我的代码中使用增量运算符，一切都很好。

一个非常简化的例子：

```
 $recent_posts = wp_get_recent_posts( $args );

                    foreach( $recent_posts as $recent ){
                        $i = 0;
                        $cats = get_the_category($recent["ID"]);
                        echo $cats[$i]->name;
                        $i++;
                    }

                    wp_reset_query(); 
```

# c++ - 使用 libusb 头文件

> ID：11488048
> 
> 赞同：2
> 
> 时间：2012-07-14T23:03:54.343
> 
> 标签：c++

我需要通过 C++ 与 USB 端口通信。所以我在网上搜索并找到了一个compresd（.rar）文件。它的名字是`usblib-1.0.9.tar.bz2`。我提取了它，它包含几个文件和文件夹，其中一些是头文件 (*.h)。我认为我的必要文件是其中之一，它的名字是`libusb.h`.

此外，在这个压缩文件中有一些示例程序可以通过 USB 进行通信。我将其中一个复制到一个 C++ 空程序中进行测试。该程序使用 libusb 头文件作为库之一。

我将 libusb.h 添加到该程序中（在解决方案资源管理器中右键单击 Header Files 并选择`add > existing item`然后浏览`libusb.h`），但此库 ( `libusb.h`) 仍未指定（`#include <libusb.h>`未指定），我无法调试此示例程序。我是否需要执行其他操作来添加此新库 ( `libusb.h`) 以在此程序中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:31:12.673

在 Windows 中，您可以使用 libusb-win32，可以在以下位置找到：http: [//sourceforge.net/projects/libusb-win32/](http://sourceforge.net/projects/libusb-win32/)

这可能会有所帮助。谢谢

# android - 非法指令运行在android上交叉编译的c代码

> ID：11488050
> 
> 赞同：5
> 
> 时间：2012-07-14T23:04:23.873
> 
> 标签：android, c, cross-compiling

请我在这方面需要帮助:((此问题之前已发布但尚未解决。我正在尝试在模拟器上运行的 Android 2.3.3 平台上运行 C 代码。这是我的代码（甚至不是你好世界）：测试。C

```
void main() { } 
```

交叉编译：arm-linux-gnueabi-gcc -static -o test test.c

```
->adb push test /data/local
->./test 
```

我得到：非法指令./test

我也尝试使用*-march=armv5*进行编译，但结果相同。

中央处理器信息：

```
->adb shell /proc/cpuinfo 
```

CPU架构：5TEJ

我已经迷失了在互联网上寻找解决方案。如果有人解决了这个问题或有任何想法，请分享。我非常感谢您的帮助。

# php - 为站点维护创建 PHP 机器人

> ID：11488052
> 
> 赞同：0
> 
> 时间：2012-07-14T23:04:31.343
> 
> 标签：php

我有一个 PHP 网站，当会员访问页面时，会执行一系列数据库维护操作。

例如，在一个公共页面中，我包含了一个 PHP 脚本，它检查*每个用户*发表了多少帖子，并更新数据库，为他们提供相应的分数。

这种方法的问题是我的网站有 100 多个成员，我担心我的脚本会随着成员数量的增长而变慢。

有没有办法在 PHP 中编写机器人代码，这样我的数据库就可以在没有用户干预的情况下更新？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T23:07:25.073

您应该从`cron`作业中运行 PHP 文件。大多数 PHP 主机（包括共享主机）都提供`cron`访问权限。

您可以安排任务以`cron`间隔运行。然后，这个 PHP 程序将执行您需要的更新。所以......把你现在做的代码移动到一个单独的 PHP 文件中，然后告诉`cron`它可能每小时运行一次，或者你认为是正确的时间间隔。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T23:10:10.207

使用以下命令创建一个每天运行的 cron（例如）：

```
php -q /home/cpaneluser/cron.php 
```

并把所有维护任务放在`cron.php`外面。`public_html`

或者只允许管理员使用管理面板中的链接执行维护任务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T23:13:31.653

为了获得最佳性能，您需要在他发布帖子时更新用户表，而不是每次都需要知道他发布了多少帖子。

# google-app-engine - https 超时，仅适用于 xxx.appspot.com 域？

> ID：11488053
> 
> 赞同：0
> 
> 时间：2012-07-14T23:04:31.417
> 
> 标签：google-app-engine

我有一个应用程序引擎（java）项目。当我尝试使用带有购买域的 https 访问 url 时，页面服务只是超时。例如，我购买了域“example.com”并将其连接到我的应用引擎帐户“example.appspot.com”。所以：

[http://example.com](http://example.com) （作品）

[https://example.com](https://example.com) （超时）

[https://example.appspot.com](https://example.appspot.com)（作品）

我记得在不使用 apppot 模式的域中存在一些关于 https 的问题。是否有可能让它工作，或者如果我们想使用 https，我们必须使用 apppot 模式？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T00:05:09.290

是的，**支持自定义域**

请参阅[https://developers.google.com/appengine/docs/ssl](https://developers.google.com/appengine/docs/ssl)

您需要启用计费功能，并且需要一项已清除才能使其正常工作

此外，**这样做是有代价的**。

您可以在此处查看概述： [https ://www.globalsign.com/blog/ssl-with-google-app-engine.html](https://www.globalsign.com/blog/ssl-with-google-app-engine.html)

[http://googleappengine.blogspot.jp/2012/06/google-app-engine-170-released-at.html](http://googleappengine.blogspot.jp/2012/06/google-app-engine-170-released-at.html)

*   服务器名称指示 (SNI) 这允许多个域共享相同的 IP 地址，同时仍然允许为每个域使用单独的证书。大多数现代 Web 浏览器都支持 SNI。SNI 的价格为每月 9 美元，其中包括 5 个证书的服务。

*   虚拟 IP (VIP)：分配给您的专用 IP 地址用于您的应用程序。所有与 SSL/TLS 兼容的 Web 客户端都支持 VIP，每个 VIP 都可以提供单个主机名、通配符或多域证书。VIP 的费用为每月 99 美元。

# c# - 部署 Windows Server 2012 RC 时，MVC 4 捆绑不起作用

> ID：11488055
> 
> 赞同：0
> 
> 时间：2012-07-14T23:04:36.670
> 
> 标签：c#, asp.net-mvc-4, asp.net-4.5

我在 VS2012 RC 上开发了 MVC 4 Web 应用程序，可以在本地机器上完美运行。但不幸的是，在运行 IIS8 的 Windows Server 2012 上丢失了所有样式和 JS 链接。我通过以下方式在 App_Start/BundleConfig.cs 中使用捆绑：

```
bundles.Add(new StyleBundle("~/Content/themes/brain/css").Include(
                       "~/Content/themes/brain/css/colorpicker.css",
                       "~/Content/themes/brain/css/dataTable.css",
                       "~/Content/themes/brain/css/elfinder.css",
                       "~/Content/themes/brain/css/fullcalendar.css",
                       "~/Content/themes/brain/css/icons.css",
                       "~/Content/themes/brain/css/main.css",
                       "~/Content/themes/brain/css/prettyPhoto.css",
                       "~/Content/themes/brain/css/reset.css",
                       "~/Content/themes/brain/css/ui_custom.css",
                       "~/Content/themes/brain/css/wysiwyg.css")); 
```

开发机器Chrome浏览器按照以下方式呈现它并且一切正常：

```
<link href="/Content/themes/brain/css/reset.css" rel="stylesheet" type="text/css">
<link href="/Content/themes/brain/css/colorpicker.css" rel="stylesheet" type="text/css">
<link href="/Content/themes/brain/css/dataTable.css" rel="stylesheet" type="text/css">
<link href="/Content/themes/brain/css/elfinder.css" rel="stylesheet" type="text/css">
<link href="/Content/themes/brain/css/fullcalendar.css" rel="stylesheet" type="text/css">
<link href="/Content/themes/brain/css/icons.css" rel="stylesheet" type="text/css">
<link href="/Content/themes/brain/css/main.css" rel="stylesheet" type="text/css">
<link href="/Content/themes/brain/css/prettyPhoto.css" rel="stylesheet" type="text/css">
<link href="/Content/themes/brain/css/ui_custom.css" rel="stylesheet" type="text/css">
<link href="/Content/themes/brain/css/wysiwyg.css" rel="stylesheet" type="text/css"> 
```

但是当我在 Windows Server 2012 上部署该 MVC 4 Web 应用程序时，它会丢失所有样式，并且呈现的 URL 更改为以下内容：

```
<link href="/Content/themes/brain/css?v=GrnUd5kGfttlbxsKkSshjvQMYvod-OnNzUX71bmBRPk1" rel="stylesheet" type="text/css"> 
```

请告知是否有人知道解决方案

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T22:56:03.430

页面是否在服务器上正确呈现？这似乎按预期工作。在您的开发机器上，您的 web.config 中可能有。当此标志设置为 false（或丢失）时，即在部署到您的服务器之后，它会打开优化并进行捆绑/缩小。

# ios - 将表格视图单元格中的数据保存在核心数据中

> ID：11488057
> 
> 赞同：1
> 
> 时间：2012-07-14T23:05:38.977
> 
> 标签：ios, uitableview, core-data, uitextfield, custom-cell

您好我正在尝试将数据保存到核心数据中并且遇到了一些麻烦...我有一个团队实体和一个玩家实体团队实体设置为与玩家实体的一对多关系...在我的“NewTeamViewController”上有两个部分，第二部分是您将球员添加到团队的地方。在部分标题中有一个添加新播放器的按钮...按下该按钮时，会出现一个带有三个文本字段的新单元格，每个文本字段中都有默认文本（不是占位符文本），然后我将新播放器添加到 MutableSet将被添加为球队球员。表格视图正在使用自定义单元格（三个文本字段所在的位置）

团队保存正确，但我无法保存玩家单元格中三个文本字段的数据。它只是将默认文本保存在播放器的单元格中。

**我不确定如何或在何处将新添加的单元格中的数据提供给新添加的播放器对象。**

这是一些代码...

```
-(void)saveButtonWasPressed {

self.team =[NSEntityDescription insertNewObjectForEntityForName:@"Team" inManagedObjectContext:self.managedObjectContext];

team.schoolName = _schoolName.text;
team.teamName = _teamName.text;
team.season =  _season.text;
team.headCoach = _headCoach.text;
team.astCoach = _assistantCoach.text;

player.firstName = cell.playerFirstName.text;
player.lastName = cell.playerLastName.text;
player.number = cell.playerNumber.text; 

[self.team addPlayers:_tempSet];

[self.managedObjectContext save:nil];
[self.navigationController popViewControllerAnimated:YES];    
}
//////////////////////////////////////////////////////////////////////////////////////////////////

-(void)addPlayerButton {

player = (Player *)[NSEntityDescription insertNewObjectForEntityForName:@"Player" 
                                                            inManagedObjectContext:self.managedObjectContext];

[_tempSet addObject:player]; 

[self.tableView reloadSections:[NSIndexSet indexSetWithIndex:1]  withRowAnimation:UITableViewRowAnimationFade];     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T05:35:03.317

将您添加为每个文本字段`NewTeamViewController`的控制事件的目标。`UIControlEventEditingChanged`您可以在代码 ( `cellForRowAtIndexPath...`) 或您的 nib 或情节提要中执行此操作。我会为每个单元格中的三个不同文本字段中的每一个使用不同的操作方法。以下是您的操作方法可能的样子：

```
// Helper method
- (Player *)playerForTextField:(UITextField *)textField
{
    NSIndexPath *indexPath = [self.tableView indexPathForCell:textField.superview];
    return [_tempArray objectAtIndex:indexPath.row];
}

- (IBAction)firstNameDidChange:(UITextField *)textField
{
    Player *player = [self playerForTextField:textField];
    player.firstName = textField.text;
}

- (IBAction)lastNameDidChange:(UITextField *)textField
{
    Player *player = [self playerForTextField:textField];
    player.lastName = textField.text;
}

- (IBAction)numberDidChange:(UITextField *)textField
{
    Player *player = [self playerForTextField:textField];
    player.number = textField.text;
} 
```

此外，将您的更改`_tempSet`为 a `_tempArray`，因为了解牌桌中玩家的顺序很有用。

# angularjs - AngularJS 项目的正确名称

> ID：11488062
> 
> 赞同：3
> 
> 时间：2012-07-14T23:06:23.573
> 
> 标签：angularjs

[AngularJS](http://angularjs.org/)项目的正确名称是什么？它的主页使用“AngularJS”，在其他地方它被称为“Angular”（大写 A），在很多地方它被拼写为“angular”（小写形式）。

例如，在[Getting Started](http://docs.angularjs.org/misc/started)中：“ **Angular**编译器是完全可扩展的，这意味着您可以使用**Angular**在 HTML 之上构建自己的声明性语言！”

我特别想知道小写形式是否是“官方”形式，因为它似乎是文档中使用最多的形式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T19:16:57.523

正式名称是“AngularJS”。为简洁起见，它通常被称为“角度”。

# javascript - 如何删除jsPlumb连接

> ID：11488067
> 
> 赞同：12
> 
> 时间：2012-07-14T23:07:11.020
> 
> 标签：javascript, jsplumb

我正在玩[jsplumb](http://jsplumb.org/jquery/demo.html)，但我无法删除只有一个 div 的 id 的两个 div 之间的连接。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-01-31T01:59:49.967

要删除连接，请使用以下代码：

```
jsPlumb.deleteConnection(con) 
```

出于某种原因，分离对我不起作用。他们的文档中没有提到上述方法，可能他们忘记更正他们的文档。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-13T10:31:38.113

> **更新：** jsPlumb 不再实现该`detach`方法。请参阅下面的[Rafik Bari 的回答](https://stackoverflow.com/questions/11488067/how-to-delete-jsplumb-connection#48533334)，了解更新的解决方案。

如果您有多个来自或到元素的连接，则分离所有连接可能不是删除连接的最佳解决方案。有一个（没有很好记录的）函数可以完全分离一个连接：

```
jsPlumb.detach(connection, {
    fireEvent: false, //fire a connection detached event?
    forceDetach: false //override any beforeDetach listeners
}) 
```

在我的示例中，我想在单击连接器时删除连接：

```
 jsPlumb.bind('click', function (connection, e) {
     jsPlumb.detach(connection);
 }); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-15T17:58:40.887

我在文档中找到了解决方案（http://jsplumb.org/doc/usage.html）

```
jsPlumb.detachAllConnections("elementId"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-03T05:57:25.097

如果源 div 或目标 div id 已知，则可以像这样删除连接：

```
var conn = jsPlumb.getConnections({
              //only one of source and target is needed, better if both setted
              source: sourceId,
              target: targetId
            });
if (conn[0]) {
  jsPlumb.detach(conn[0]);
} 
```

您还可以使用 jsPlumb.getAllConnections() 获取所有连接的数组，并测试每个连接的 sourceId 或 targetId 以获得您需要的连接；

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-30T04:53:44.627

删除所有端点连接，到元素和从元素删除后，您需要将其分离，如第 3 行所示

```
jsPlumb.detachAllConnections(divID);
jsPlumb.removeAllEndpoints(divID);
jsPlumb.detach(divID); 
divID.remove() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-06T06:44:45.993

```
jsPlumb.deleteConnectionsForElement(elementId) 
```

作品。虽然它已经过时了，但我想补充一点，找出一个库有哪些方法，只要它足够自描述就很容易了。

[开发工具](https://i.stack.imgur.com/cX6iU.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-10T10:22:34.827

首先，您可以使用 sourceId 和 targetId 找到您的连接

```
var connections = jsPlumb.getConnections({
            source: sourceId ,
            target:targetId  
        }); 
```

这将返回一个 jsPlumb 连接数组，因此您可以删除与此源和目标 ID 相关的所有连接。

```
for(var i=0;i < connections.length;i++) {
            jsPlumb.deleteConnection(connections[i]);
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-15T16:56:26.717

此代码删除了我正在开发的游戏中的所有“错误”连接。我希望它有帮助

```
var wrong_connections = new Array(DB_ID, ANOTHER_DB_ID);
var connections = jsPlumb.getConnections();
$.each(connections, function(index, value) { // going through all connections
  var source_id = value.source.attr('id').substring(28);  // I need the ID from DB so I`m getting it from the source element
  for (var a = 0; a < wrong_connections.length; a++) {  
    if (source_id == wrong_connections[a]) {
      jsPlumb.detach(value);
    }
  }
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-17T09:30:10.607

你好可以参考这个： [分离连接jsPlumb](http://jsfiddle.net/aT63t/161/)

如果单击连接，则此代码块允许分离连接：

```
jsPlumb.bind("click", function(conn) {
    jsPlumb.detach(conn);
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-03T08:10:48.873

删除对我有用的连接

```
jsPlumb.bind("click", function(conn) {
    // alert(JSON.stringify(data));
    jsPlumb.deleteConnection(conn);
 }); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-04T02:32:11.530

我想更新答案。对于 2.5 版，如果您使用

```
jsPlumb.detach() 
```

您可能会收到错误消息：jsPlumb.detach() 不是函数。我也尝试

```
jsPlumb.deleteConnection(conn) 
```

确实删除了连接，但是，我不确定为什么端点只是从 div 中分离出来。最后通过以下方式解决

```
instance.deleteConnection(conn) 
```

# gwt - gwt 中 uibinder 的动态值

> ID：11488069
> 
> 赞同：5
> 
> 时间：2012-07-14T23:07:39.580
> 
> 标签：gwt, uibinder

我是 GWT 的新手，并试图制作一个试图继承复合小部件但复合小部件的值是动态的页面。

我的主页有点像：

```
 .....
         .....
         <g:Button>Open composite widget</g:button>
         .....
         ..... 
```

它正在打开另一个弹出面板，类似于：

```
 .....
         <table>
            <tr><td>Top: <myCompany:userMeasurementUnit/> </td></tr>
            <tr><td>Bottom: <myCompany:userMeasurementUnit/> </td></tr>
            <tr><td>Left: <myCompany:userMeasurementUnit/> </td></tr>
            <tr><td>Right: <myCompany:userMeasurementUnit/> </td></tr>
        </table> 
```

以上应该向我们展示

```
 top (cm)
         bottom (cm)
         left (cm)
         right (cm) 
```

但我不知道如何将值从主页传递到自定义小部件，即 usermeasurementunit

```
 <myCompany:userMeasurementUnit/> 
```

我的 usermeasurementunit 是这样的：

UIBinder：

```
 <htmlpanel tag="span" ui:field="unit"/> 
```

复合小部件是

```
 usermeasurementunit extends Composite {

       public usermeasurementunit(){
           initwidget...
       }

       public onload() { 
         ...
       }

       } 
```

现在我想通过单击按钮传递任何测量单位厘米或英寸或米。我尝试使用事件总线但它没有帮助，因为当我单击按钮时弹出面板不在屏幕上并且它没有捕获事件。如果你们中的任何人可以帮助我解决这个问题，我将非常感激，因为我真的在这件事上苦苦挣扎。

亲切的问候

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-15T08:13:21.183

首先，您需要了解 GWT 中的对象实例化流程。

他们称之为“延迟绑定”，而不是“动态绑定”。

Uibinder xml 文件是一个布局模板。而它背后的 JAva 源 bean 在一般编程术语中被称为“代码隐藏”。

uibinder 布局模板的作用或目的是减轻布局的负担（*在互联网上，许多非英语程序员编写“布局”，虽然语法上很有趣，但其实是一样的*），这样代码隐藏可以专注于控制布局的响应。

这类似于MVP的态度。视图实现与演示控制分离。您甚至可以在不确切知道这些字段的布局位置的情况下编写代码隐藏错误。您甚至可以简单地提供一个模板，其中 ui 元素没有正确布局，以便首先专注于您的代码隐藏。也许在那之后。一个用于移动设备的 uibinder 模板，另一个用于桌面 - 但它们可以共享相同的代码隐藏。

受 uibinder 模板影响的显示值在 uibind 期间一劳永逸地确定。没有将 uibinder 字段动态绑定到代码隐藏中声明的对象/变量的不断变化的值。

要在 uibind 之后动态更改/传播 uibinder 字段的值，您必须故意在代码隐藏中设置其值或编写侦听器来检测其更改。

```
public class Graceland {

  @UiField
  Label pressure;

  @UiField
  Button reset;

  public void setPressure(int value) {
    pressure.setText(value);
  }

  @UiHandler("reset")
  void nameDoesNotMatter(ClickEvent ev) {
    pressure.setText(default);
  }
} 
```

GWT.create() 在编译期间为模板生成 Java 源代码。GWT.create 不是运行时函数。

@UiField 和 @UiHandler 在 uibind 期间绑定到模板中的 uifield。

uibind() 的作用主要不是运行时，而是编译时。虽然它的最终性是在运行时实现的，但所有用于构造对象的 javascript 代码和相应的值都是在编译时生成的，并且在运行时的 uibind 期间执行一次且仅执行一次。

因此，其目的不是要能够完全取代代码隐藏的动态角色，而只是将其从布局的任务中解放出来，这样我们程序员就可以有一块干净的代码隐藏被涂抹为尽可能少地使用布局的意大利面条源。

但是，如果您希望在绑定期间“动态地”影响 uibinder 字段的值，那么`Ui:with`您就是朋友。

```
package z.mambazo;
public class Graceland {
  ....
  String initialPressure(){
    /* "dynamically" obtain the pressure from the
     * pressure gauge in the petroleum distillation stack
     * during uibind
     */
  }
} 
```

Graceland.ui.xml：

```
<ui:UiBinder blah...blah>
  <ui:with type="z.mambazo" field="zulu"/>
  <g:VerticalPanel>
    <g:Label
      ui:field="pressure"
      text="the temperature is :{zulu.initialPressure}"/>
  </g:VerticalPanel>
</ui:UiBinder> 
```

ui:with bean 不必是模板的代码隐藏。ui:with bean 有一个无参数构造函数，或者您必须提供 ui:with 标记，其属性对应于构造函数参数。

您必须注意，为了使用 ui:with，init 值必须在 value 属性中声明，而不是在标签文本中。

```
<g:Label
  ui:field="pressure"
  text="the temperature is : {zulu.initialPressure}"/> 
```

不是

```
<g:Label ui:field="pressure">
  the temperature is : {zulu.initialPressure}
</g:Label> 
```

第二种方式，将简单地复制文本。

但是，您也可以这样做：

```
<g:HtmlPanel>
  the temperature is :&nbsp;
  <g:Label ui:field="pressure"
    text="{zulu.initialPressure}"/>
</g:HtmlPanel> 
```

另外，请注意，所有 GWT UI Java 代码，甚至是临时生成的代码，都被翻译成浏览器 Javascript。因此，您使用 ui:with 引用的任何类都必须是 Java 源代码而不是 Java 字节码。并且那些源代码在任何时候都不能在调用链中调用字节码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T08:36:52.413

您需要的是[共享资源](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder?hl=de#Share_resource_instances)。这是一个例子：

测量常量.java：

```
package com.acme.client;

public class MeasurementConstants {

    private final String measurementUnit;

    public MeasurementConstants(String measurementUnit) {
        this.measurementUnit = measurementUnit;
    }

    public String measurementUnit() {
        return measurementUnit;
    }

} 
```

UiBinderMeasurement.java：

```
package com.acme.client;

import com.google.gwt.core.client.GWT;
import com.google.gwt.uibinder.client.UiBinder;
import com.google.gwt.uibinder.client.UiFactory;
import com.google.gwt.user.client.ui.Composite;
import com.google.gwt.user.client.ui.Widget;

public class UiBinderMeasurement extends Composite {

    private static UiBinderI18nUiBinder uiBinder = GWT
            .create(UiBinderI18nUiBinder.class);
    private MeasurementConstants constants;

    interface UiBinderI18nUiBinder extends UiBinder<Widget, UiBinderMeasurement> {
    }

    public UiBinderMeasurement(MeasurementConstants constants) {
        this.constants = constants;
        initWidget(uiBinder.createAndBindUi(this));
    }

    @UiFactory
    public MeasurementConstants getConstants() {
        return constants;
    }

} 
```

UiBinderMeasurement.ui.xml：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
    xmlns:g="urn:import:com.google.gwt.user.client.ui">

    <ui:with type="com.acme.client.MeasurementConstants" field="constants"></ui:with>

    <g:HTMLPanel>
        <table>
            <tr><td><g:Label text="Top ({constants.measurementUnit}):" /> </td></tr>
            <tr><td><g:Label text="Bottom ({constants.measurementUnit}):" /> </td></tr>
            <tr><td><g:Label text="Left ({constants.measurementUnit}):" /> </td></tr>
            <tr><td><g:Label text="Right ({constants.measurementUnit}):" /> </td></tr>
        </table>
    </g:HTMLPanel>
</ui:UiBinder> 
```

现在你可以这样称呼它：

```
new UiBinderMeasurement(new MeasurementConstants("cm")) 
```

# css - 我的 CSS 布局没有按应有的方式工作

> ID：11488070
> 
> 赞同：0
> 
> 时间：2012-07-14T23:07:59.317
> 
> 标签：css, layout

好的，所以我有我的网页（[http://jsfiddle.net/HVGBf/](http://jsfiddle.net/HVGBf/)），但它没有按照我希望的方式工作。

正如您在小型浏览器上看到的那样，由于行高，徽标文本正在向下跳跃。如果可能的话，我希望项目名称是并列的，否则我希望它是彼此之间的，但我怎样才能做到这一点？

html:

```
<body class="home">    
    <div id="wrapper">

        <div id="logo">
            <span>Project name</span>
        </div><!-- endLogo -->

        <div id="menu">
            <ul>
                <li><a href="">Home</a></li> 
                <li><a href="">Over ons</a></li> 
                <li><a href="">Projecten</a></li> 
                <li><a href="">Vrienden</a></li> 
                <li><a href="">Doneren</a></li> 
                <li><a href="">Contact</a></li> 
            </ul>
        </div><!-- endMenu -->

    </div>
</body>
</html>​ 
```

CSS：

```
 /* Eric Meyer's Reset CSS v2.0 - http://cssreset.com */
html,body,div,span,applet,object,iframe,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{border:0;font-size:100%;font:inherit;vertical-align:baseline;margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:none}table{border-collapse:collapse;border-spacing:0}

html, body { font-family: "helvetica", arial; margin: 0; padding: 0; height:100%;}

#wrapper {
    min-width: 800px;
}

.home #logo { 
    background: #00B65F; 
    width: 22%;
    float: left;
    padding: 0 1% 0 2%; 
    text-align: right;
    -webkit-border-top-right-radius: 15px; 
    -webkit-border-bottom-right-radius: 15px;
    -moz-border-radius-topright: 15px;
    -moz-border-radius-bottomright: 15px;
    border-top-right-radius: 15px;
    border-bottom-right-radius: 15px; 

    line-height: 180px;
    height: 180px;
    font-size: 220%;
}
.home #logo span {
    font-color: #000;
}
.home #menu {
    background-color: #000; 
    float: right; 
    background-repeat: repeat; 
    padding: 56px 5% 56px 1%; 
    -webkit-border-top-left-radius: 15px ;
    -webkit-border-bottom-left-radius: 15px;
    -moz-border-radius-topleft: 15px;
    -moz-border-radius-bottomleft: 15px;
    border-top-left-radius: 15px;
    border-bottom-left-radius: 15px; 
    margin-left: 6%;
    width: 63%;
    height: 70px;
}

#menu ul { 
    float: left; 
    margin: 0; 
    padding: 0; 
    width: 100%;

}
#menu li { 
    float: left; 
    list-style-type: none;  
}
#menu a { 
    float: left;
    text-decoration: none; 

    font-size: 150%;
    color: #fff; 
    padding: 0.4em 0.7em 0.4em 0.7em;
    -webkit-border-radius: 10px; 
    border-radius: 10px;
    display: block;
}

#menu a:hover, #menu .active { background-color: #00B65F; }
​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:21:53.860

如果您只想将“项目”和“名称”这两个词放在一行上，那么这应该可以解决问题：

```
#logo span { white-space: nowrap; } 
```

`#logo`由于您的大小（按百分比），文本可能会延伸到外部，因此要解决此问题，您还可以添加最小宽度，如下所示：

```
#logo { min-width: 200px; } 
```

**编辑：**我注意到你也`margin-left`设置为`6%`. 我建议使用一个常量值，例如`20px`. 此外，这里是一个[jsFiddle](http://jsfiddle.net/HVGBf/1/)，其中包含我提到的建议。

# c++ - VS11是steady_clock，稳定吗？

> ID：11488075
> 
> 赞同：16
> 
> 时间：2012-07-14T23:08:55.120
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, chrono

我刚刚注意到下面的代码`<chrono.h>`，这对我来说没有意义。

```
struct system_clock
{
    static const bool is_monotonic = false; // retained
    static const bool is_steady = false;
};

class steady_clock
    : public system_clock
    {   // wraps monotonic clock
public:
    static const bool is_monotonic = true;  // retained
    static const bool is_steady = true;
    };

typedef steady_clock monotonic_clock;   // retained
typedef system_clock high_resolution_clock; 
```

`steady_clock`单纯源于不稳，怎能`system_clock`稳？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T23:35:56.733

忽略您显示的代码（杰里的答案已经比我更好地解决了这个问题），大概 VC++ 2012`std::steady_clock`并不稳定，目前在[MS Connect](https://connect.microsoft.com/VisualStudio/)上打开的多个错误报告证明了*这*一点：

*   [stable_clock 类和 clock() 函数不符合 C++11 和 C11 标准](https://connect.microsoft.com/VisualStudio/feedback/details/753115/)
*   [[C++] std::chrono::steady_clock 不稳定](https://connect.microsoft.com/VisualStudio/feedback/details/753063/)
*   （可能相关）[C++ 标头的 high_resolution_clock 没有高分辨率](https://connect.microsoft.com/VisualStudio/feedback/details/719443/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-15T00:01:23.603

暂时忽略 Microsoft 实现中的错误，从不稳定的时钟派生出稳定的时钟（或从非单调的时钟派生出单调的时钟）通常非常有意义。

这是典型的“is-a”术语妨碍的地方之一，您需要真正考虑替代。特别是，情况并非“稳定的时钟不是不稳定的时钟，所以推导是错误的”。相反，情况是“在任何情况下都可以用稳定的时钟代替不稳定的时钟，因此推导很好”（同样适用于`is_monotonic`）。

让我们考虑一个极端的例子——将原子钟直接连接到您的计算机。它是单调的，并且与您希望得到的一样稳定。假设它的输出频率足够高（/分辨率），您可以使用它来代替您的系统可能拥有的任何/所有其他时钟。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-12-30T10:39:58.930

我实际上不同意“接受的答案”。这在微软方面是完全错误的，可能会导致不切实际的期望。C++11 标准要求`system_clock`实现`to_time_t`and ，但and`from_time_t`没有这样的要求。这不是“is-a”关系，因为没有实现 ; 的所有必需接口。也不应该。微软的行动对我来说没有意义：你怎么能期望一个有，同时避免时间倾斜的问题？`steady_clock``high_resolution_clock``steady_clock``system_clock``steady_clock``to_time_t`

所以，简单地说，微软犯了一个错误，他们修复它的速度很慢。根据 Stephan T. Lavavej 的说法，他“没有时间在 2013 年的 RTM 中修复这个问题”，并且“所有的时钟都需要重新实现，正如几个活跃的错误所跟踪的那样”。请参阅[https://connect.microsoft.com/VisualStudio/feedback/details/719443/](https://connect.microsoft.com/VisualStudio/feedback/details/719443/)。

我猜一开始写垃圾假实现的不是他。

编辑：我有点惊讶我被否决了，甚至有点沮丧。我的反对者和反对者，你是否意识到你正在合理化一个破碎的实施，可能很快就会改变和修复？给我举一个真正的实现，它`steady_clock`继承自`system_clock`并且没有被破坏......

2014 年 7 月的事实更新：从**Visual Studio 2014 CTP2 开始**，`steady_clock`不再继承自`system_clock`....

# iphone - FPPopover UITableView 返回值

> ID：11488078
> 
> 赞同：2
> 
> 时间：2012-07-14T23:09:18.007
> 
> 标签：iphone, xcode, uipopovercontroller, parentviewcontroller, fppopover

我不知道是否有人在使用这个开源库来替换 iPhone 的 UIPopovercontroller。

我正在尝试将 FPPopover 部署到我的项目中，一切正常，但问题是我无法将任何值返回给我的 ViewController。

我在 didSelectRowAtIndexPath 中尝试这个

```
myParentViewController *parentController =(myParentViewController*)self.parentViewController; 
```

但问题是 self.parentViewController 是（空）

我还有另一个问题，如何从 didSelectRowAtIndexPath 中解除 FPPopoverController。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T04:35:37.610

I dismissed the view by adding a popoverView property to the table view controller that is popping up (in this case ATableViewController), and then assigning the FPPopoverViewController to that property. Like this:

```
ATableViewController *aTableViewController = [[ATableViewController alloc] init]; 

FPPopoverController *aPopoverController = [[FPPopoverController alloc] initWithViewController:aTableViewController]; 

aPopoverController.delegate = aTableViewController;
aTableViewController.popoverView = aPopoverController; 
```

Then in didSelectRowAtIndexPath of aTableViewController you can just call:

```
[self.popoverView dismissPopoverAnimated:YES]; 
```

If you are trying to return values to the "parent"...since the parentViewController property is null here, you can just make your own property for it (let's call it "parentView"). So when setting up the above you would use:

```
aTableViewController.parentView = self; 
```

Then you can access any of the properties of the parentView and return values from the aTableViewController that popped up. A bit of a workaround, but that's what I did...hope it helps!

# css - Internet Explorer 6 css 顺序很重要的错误

> ID：11488079
> 
> 赞同：0
> 
> 时间：2012-07-14T23:09:27.723
> 
> 标签：css, internet-explorer, styles, internet-explorer-6

也许一整天后，我在 IE6 中探索新的错误（对我来说）。css 样式的顺序很重要。该样式仅适用于第一个孩子（在 css 文件中，不在元素中）。这很难解释，但这些例子会告诉你我的意思。

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style>
    #container #p.one
    {
        position: absolute;
        left:50%;
        width: 20px;
        height: 20px;
        background: green;
    }
    #container #p.two
    {
        position: absolute;
        left:50%;
        width: 20px;
        height: 20px;
        background: green;
    }
    #container
    {
        position: absolute;
        z-index: 500;
        width: 100%;
        height: 100%;
    }
    </style>
</head>
<body>
    <div id="container">
        <div id="p" class="one">123</div> <!-- change class "one" with "two" -->
    </div>
</body> 
```

因此，如果您将“one”类更改为“two”类，则 div 将失去样式。样式一和二完全一样。

但如果你改变：

```
<div id="p" class="one"> 
```

和

```
<div id="p" class="two"> 
```

并更改样式：

```
 #container #p.one
    {
        position: absolute;
        left:50%;
        width: 20px;
        height: 20px;
        background: green;
    }
    #container #p.two
    {
        position: absolute;
        left:50%;
        width: 20px;
        height: 20px;
        background: green;
    }
    #container
    {
        position: absolute;
        z-index: 500;
        width: 100%;
        height: 100%;
    } 
```

到：

```
 #container #p.two
    {
        position: absolute;
        left:50%;
        width: 20px;
        height: 20px;
        background: green;
    }
    #container #p.one
    {
        position: absolute;
        left:50%;
        width: 20px;
        height: 20px;
        background: green;
    }
    #container
    {
        position: absolute;
        z-index: 500;
        width: 100%;
        height: 100%;
    } 
```

只需将“一”类与“二”类交换“二”类将起作用，但“一”则不行。如何解决这个问题或这是不可能的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T01:06:12.257

这是一个[已知的 IE6 错误](http://css-discuss.incutio.com/wiki/Multiple_Id_Class_Bug)。它会忽略`#id.class`除第一个之外的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T23:19:06.557

我不明白你为什么在你的 CSS 规则中同时使用 ID 和类。就其本质而言，ID 可以/应该只引用页面中的一个元素，所以 #p.two 和 #p.one 应该只是#p？？？

# c++ - 递归插入二叉树，按值传递指针？

> ID：11488080
> 
> 赞同：1
> 
> 时间：2012-07-14T23:09:28.050
> 
> 标签：c++, binary-tree

这是我的节点类。

```
class Node
{
private:
public:
  T data;
  Node<T>* left;
  Node<T>* right;
  Node(T dat) : data(dat), left(NULL), right(NULL)
  {}
}; 
```

这是我的插入函数，在我的 Btree 类中定义：

```
public:
  Node<T>* root;
  Btree() : root(NULL){}
  void insert(T data, Node<T>* parent)
  {   
      if( !parent  )
      {   
        parent = new Node<T>(data);
        return;
      }   
      else if(data < parent->data)
      {   
        insert(data, parent->left);
      }   
      else if(data > parent->data)
      {   
        insert(data, parent->right);
      }   
  }

}; 
```

这是我的主要功能：

```
int main()
{
  Btree<int> tree;

  tree.insert(5, tree.root);

  cout << tree.root->data << endl;

  tree.insert(6, tree.root);

  cout << tree.root->right->data << endl;

} 
```

当我运行时，我得到一个段错误。

我认为是因为指针变量 parent 是按值传递的，所以当我创建一个由 parent 指向的新节点时，一旦我退出插入函数，我就会丢失它？这是否意味着我必须在这里使用双指针？

有人可以给我一个彻底的解释，说明内存中发生的事情导致这不能按计划进行。我的诊断在这里是正确的还是有其他问题？

当我将 tree.root 作为要插入的第二个参数传递时，我传递的是一个 Node*，我知道很多。现在，即使它是按值传递的，它与我从调用主函数传递的地址是否不同。因此，当我说父级（这是我从 main,tree.root 传递的地址）=新节点时，是否不应该在父级地址的堆上创建一个新节点，也就是 tree.root 的地址？为什么按价值传递会掩盖这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T23:26:37.150

在这种情况下，按值传递的问题在于，对函数内部的形式参数所做的所有分配对调用者都是不可见的。因此，这个任务

```
if( !parent  )
{   
    parent = new Node<T>(data); // <<== HERE
    return;
} 
```

`tree.root`对调用者没有影响：

```
tree.insert(5, tree.root); 
```

函数中指针的值`parent`发生变化，然后及时丢弃；树的`root`遗骸`NULL`。

解决此问题的方法是将指针传递给指针，如下所示：

```
void insert(T data, Node<T>** parent) {
    if( !*parent  )
    {
        *parent = new Node<T>(data);
        return;
    }
    else if(data < (*parent)->data)
    {
        insert(data, &((*parent)->left));
    }
    else if(data > (*parent)->data)
    {
        insert(data, &((*parent)->right));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T23:27:09.080

C++ 按值传递，因此这`parent`是传入指针的副本。因此，分配给它没有持久的影响。解决此问题的最简单方法是更改​​方法的签名，以便它接受对指针的引用。这将自动使编译器更新原始指针，同时避免更改程序的其余部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T23:39:32.220

**dasblinkenlight**回答得最好。但是，有一个更简洁的解决方案：

获取指针的引用（称为对指针的引用）：

```
void insert(T data, Node<T>*& parent)
  {   
      if( !parent  )
      {   
        parent = new Node<T>(data);
        return;
      }   
      else if(data < parent->data)
      {   
        insert(data, parent->left);
      }   
      else if(data > parent->data)
      {   
        insert(data, parent->right);
      }   
  } 
```

在此处查看更多信息：http: [//www.codeproject.com/Articles/4894/Pointer-to-Pointer-and-Reference-to-Pointer](http://www.codeproject.com/Articles/4894/Pointer-to-Pointer-and-Reference-to-Pointer)

# ruby - 红宝石：找不到 RedCloth-4.2.9

> ID：11488086
> 
> 赞同：6
> 
> 时间：2012-07-14T23:10:26.680
> 
> 标签：ruby

我对此很陌生，我该如何解决这个问题？

```
$ rake
Could not find RedCloth-4.2.9 in any of the sources
Run `bundle install` to install missing gems. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T23:14:02.620

你没有`RedCloth`安装 gem 就是这样。

如果您使用的是我想的 Bundler gem，您可以键入`bundle install`安装它，否则您可以通过`gem install RedCloth`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-08T20:18:02.913

我遇到了类似的问题，主要的帮助是运行`bundle update`。

# wordpress - 用于更新或创建 robots.txt 的 Wordpress 功能

> ID：11488092
> 
> 赞同：0
> 
> 时间：2012-07-14T23:11:09.240
> 
> 标签：wordpress, function, robots.txt

我正在为 Wordpress 制作一个插件，该插件具有更新文件 robots.txt 或创建它（如果尚不存在）的功能。

到目前为止，我有这个功能：

```
function roots_robots() {

  echo "Disallow: /cgi-bin\n";
  echo "Disallow: /wp-admin\n";
  echo "Disallow: /wp-includes\n";
  echo "Disallow: /wp-content/plugins\n";
  echo "Disallow: /plugins\n";
  echo "Disallow: /wp-content/cache\n";
  echo "Disallow: /wp-content/themes\n";
  echo "Disallow: /trackback\n";
  echo "Disallow: /feed\n";
  echo "Disallow: /comments\n";
  echo "Disallow: /category/*/*\n";
  echo "Disallow: */trackback\n";
  echo "Disallow: */feed\n";
  echo "Disallow: */comments\n";
  echo "Disallow: /*?*\n";
  echo "Disallow: /*?\n";
  echo "Allow: /wp-content/uploads\n";
  echo "Allow: /assets\n";
  echo "\n";
}

add_action('do_robots', 'roots_robots'); 
```

文件 robots.txt 没有更新，我忘了什么吗？还有一种方法可以先检查文件是否存在以及是否创建文件？

我从插件 kb-robots 中找到了一些东西，但我不是 100% 确定如何将它添加到我的函数中。

```
function kb_robotstxt(){
    # this is to make it work for demos and testing. Without this, plugin would only act when robots.txt is in a valid place. With this, it will act whenever robots.txt is appended to blog URL
    # (even if blog is in a subdirectory)
    $request = str_replace( get_bloginfo('url'), '', 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'] );

    if ( (get_bloginfo('url').'/robots.txt' != 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']) && ('/robots.txt' != $_SERVER['REQUEST_URI']) && ('robots.txt' != $_SERVER['REQUEST_URI']) )
        return;     // checking whether they're requesting robots.txt

    $robotstxt = get_option('kb_robotstxt');

    if ( !$robotstxt)
        return;

    header('Content-type: text/plain');
    print $robotstxt;
    die;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:14:34.027

您应该将数据保存到文件中，而不是将其输出到浏览器。查看[file_put_contents](http://php.net/file_put_contents)。您还必须确保该文件可由 Web 服务器写入。

# c++ - 重新初始化分配在堆栈上的变量

> ID：11488098
> 
> 赞同：0
> 
> 时间：2012-07-14T23:11:47.227
> 
> 标签：c++, variables, initialization, stack

在下面的代码中，`cm`变量分配在堆栈上，并且`addConstraints`是方法的原型：

```
ConstraintManager cm(5);

void addConstraints(ConstraintManager& cm); 
```

当我调用 addConstraints 时，我想重新初始化函数体内的 cm 变量。那就是调用它的构造函数，例如这样做，`cm(3)`以便将其重新初始化为包含 3 而不是 5。但是我无法做到这一点，我唯一能做的就是：

```
ConstraintManager temp(3);
cm = temp; 
```

有没有办法以更简洁的方式实现这一目标？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:18:50.930

> 是的，但很遗憾我无法修改课程

如果在类的公共接口中没有直接的方法来更改该成员，那么在我的书中，这意味着您不应该更改它。

如果必须，您已经拥有的就是这样做的方法，只是不那么冗长：

```
cm = ConstraintManager(3); 
```

# magento - Magento：“已订购产品”报告 - 如何显示可配置产品的子产品？

> ID：11488099
> 
> 赞同：3
> 
> 时间：2012-07-14T23:11:55.013
> 
> 标签：magento, product, configurable

当我在 Magento 中创建“已订购产品”报告时，可配置产品显示为单个产品，其中汇总了所有子产品的销售额。

如何修改此行为，以便 - 另外 - 显示子产品及其销售数量？

使用的版本是 Magento 1.6.2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T08:42:49.803

#magento-de 的 millejano 帮助我并允许我发布这个答案：

为 /app/code/core/Mage/Reports/Model/Resource/Product/Collection.php 创建重写或复制到本地。
在*addOrderedQty()*中，更改行

```
->where('parent_item_id IS NULL') 
```

到

```
->where('e.type_id = ?', 'simple') 
```

你完成了。现在，您将在每个报告甚至仪表板上看到底层的简单产品，而不是汇总的可配置产品。

Millejano 的原帖：[https ://gist.github.com/3149637/](https://gist.github.com/3149637/)

# c++ - 替代全局变量/常量

> ID：11488101
> 
> 赞同：3
> 
> 时间：2012-07-14T23:12:53.953
> 
> 标签：c++

我一直在读到使用全局变量是不好的编程设计，但这是否意味着全局常量也不好？

有什么替代方法可以代替全局变量/常量，以及声明多个源文件中需要的常量的最佳方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-14T23:17:37.947

全局变量不好的主要原因是对共享状态的依赖，这使得程序的不同部分很容易通过以您不打算的方式操纵共享状态来对程序的其他部分造成意外干扰，从而使程序更容易出错、难以调试和难以维护。

另一方面，常量几乎没问题，除了它们会污染全局命名空间（这可能会在编译时通过更改编译单元中符号的含义而导致意想不到的后果）。如果您可以在特定的名称空间/范围中声明它们，那么您会没事的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T23:16:46.877

全局变量的真正问题在于它们鼓励从代码中的许多点进行更改。做某事的函数也有改变全局状态的[副作用](http://en.wikipedia.org/wiki/Side_effect_%28computer_science%29)（事实上，[函数式编程](http://en.wikipedia.org/wiki/Functional_programming)根本不允许副作用来避免这个陷阱）。

这种编程风格很难正确调试和维护。

将数据保存在靠近它使用的地方，以便有一个明确定义的机制来改变它。

全局常量不会遇到同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T00:13:53.473

全局变量会导致大量（通常是未知的）依赖于共享状态的代码的实际问题。这可能（确实）导致难以理解、跟踪等的交互。简而言之，大量代码最终紧密耦合，这通常会导致问题。

全局常数主要是一个（潜在的）哲学问题。由于它们是恒定的，因此大多数来自全局变量的真正问题都不会出现。同时，质疑一个特定的常数是否真的*应该*是全局的也是完全合理的。如果（例如）您正在处理物理学，将光速定义为全局常数可能是有意义的。根据领域的不同，Pi、e 等也可以作为全局变量。另一方面，如果您可以合理地将对此类事物的*需求*限制为更少的代码，那通常是可取的。Pi 的值不会改变，但类似于

```
 x = area(some_circle); 
```

往往比以下更具可读性/可理解性：

```
x = some_circle.radius * some_circle.radius * Pi; 
```

# ruby-on-rails - 参数变量没有被 JSON 发布数据填充......为什么？

> ID：11488102
> 
> 赞同：2
> 
> 时间：2012-07-14T23:12:59.237
> 
> 标签：ruby-on-rails, json, rest, params

我以前在其他一些领域也有过这项服务，但现在我似乎没有让它工作，也不太明白为什么。

我将以下 json 发布到我的 Rails 应用程序（使用 RestClient 2.4，用于测试）：

```
{
    "camp":{
        "total": 100,
        "number": "epw1f6e"
    },
    "machine":{
        "serial_number": "1234567",
        "token": "fONxDN"
    }
} 
```

营地控制器：

```
def create
    if is_it_json?
      logger.debug params.inspect
      machine = Machine.find_by_serial_number(params[:machine][:serial_number])
... 
```

从记录器中，我得到参数是： {"action"=>"create", "controller"=>"camp"}

json信息在哪里？？

我的日志错误：

```
Started POST "/camps" for 127.0.0.1 at 2012-07-15 00:08:21 +0100
Processing by CampsController#create as JSON
WARNING: Can't verify CSRF token authenticity
{"action"=>"create", "controller"=>"camps"}
Completed 500 Internal Server Error in 2ms

NoMethodError (undefined method `[]' for nil:NilClass):
  app/controllers/camps_controller.rb:24:in `create' 
```

我可能做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T13:24:05.053

经过大量阅读和提问，我刚刚找到了解决方案：

参数没有被填满，因为我缺少标题（我有接受，但缺少内容类型）：

```
Accept: application/json
Content-type: application/json 
```

添加标题解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T23:41:46.103

> 无法验证 CSRF 令牌真实性 {"action"=>"create", "controller"=>"camps"}
> Completed 500 Internal Server Error in 2ms

当您的 json 发布无效（或不存在）的 CSRF 令牌时，将引发该错误。CSRF 需要附加到任何已发布数据的标头。为了进行测试，您可以通过将以下内容添加到控制器（对于 Rails 3）来禁用 CSRF 令牌：

> protect_from_forgery :except => :create

当站点投入生产时，不要将其留在控制器中。CSRF 令牌可防止 CSRF 攻击。有关详细信息，请参阅[Ruby on Rails 安全指南](http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf)。

让我知道这是否有用！

# css - 在浏览器中放大或缩小时网站布局“分裂”+一些其他基本 css 问题

> ID：11488114
> 
> 赞同：9
> 
> 时间：2012-07-14T23:14:56.977
> 
> 标签：css, zooming, break

我对 CSS 非常陌生，我现在要做的只是为小型企业设计一个非常简单/基本的启动页面或登录页面。

这是该网站的网址： [我的网站](http://myproblem.struenet.com/)

现在，如果您使用任何浏览器，比如说 google chrome，然后您缩小或缩小 (ctrl -/+)，您会注意到网站布局开始“分裂”，因为我所有的 div 都开始四处移动。我显然不想要这个，只是希望网站在人们放大或缩小时保持不变，就像所有好的网站一样哈哈。

我知道这一定与定位有关，但我无法将其视为我们的生活或我自己。昨晚我花了几个小时浏览类似的问题，但我能弄明白。

我发布代码不是为了占用更多空间，我假设因为我给了你 URL，你就可以从那里检索代码。

我还有一些小问题：

1）如果您在 chrome 上打开我的网站，或者您会注意到在页面底部的“条款和条件”之后，网站结束，就像它应该的那样。但是，如果您继续使用 Firefox，您会注意到在“条款和条件”之后，可以说背景会持续一段时间。为什么会这样，我该如何解决？

2) 你会注意到在不同的浏览器上元素的定位略有不同。最明显的是，如果您查看 chrome/firefox 和 internet explorer 9，您会注意到“条款和条件”略高于 chrome 或 ff，因此略微触及主要内容区域。有没有办法来解决这个问题？

3) 什么是使 div 居中的有效方法？例如，我想在主要内容区域中将“注册”按钮完全居中。我几乎一直在关注它并使用相对定位来居中。什么是更准确的居中方法？

谢谢，如果这些问题看起来有点多余，我很抱歉。如果您需要任何澄清，我会像鹰一样监视这个问题。

干杯

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-15T19:16:44.250

1.  当您放大或缩小时，您会遇到由于四舍五入和文本渲染的问题。确保布局可以承受一点拉伸而不会损坏是个好主意。

2.  相对定位受到#1 中提到的问题的影响，因此不可靠。

3.  研究使用某些东西来删除各种浏览器将应用的属性。您可以使用[重置](http://meyerweb.com/eric/tools/css/reset/)来为您提供更可行的东西，或者尝试[标准化](http://necolas.github.com/normalize.css/)这些值以使它们在浏览器之间更加均匀。

4.  对于（水平）居中，您有一些选择：

    *   如果您有一个带有“text-align:center”的容器，它将使所有内联块或内联的子元素居中。
    *   如果要使块元素居中，可以使用“margin：0 auto”将其水平居中并删除垂直边距。
    *   如果要将绝对定位的元素居中，可以使用“left: 50%, margin-left: -( *width of element* /2)”。

除了尝试摆脱相对定位之外，我建议您不要显式设置 body 元素的高度。通常，您希望元素管理自己的大小，这样它们就会更加健壮。

如果您现在使用“位置：相对”，因为这是您知道如何使用的，我建议您尝试使用“浮动：左”（或右），或更改显示类型（显示：内联块）。这可能会帮助您朝着正确的方向开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:23:44.620

不确定您的第 1 点和第 2 点，但至于第 3 点，我使用的是以下有`div`我想要居中然后使用`width : some-percentage; margin-left : 100-(some_percentage)*0.5 ;`的，其中某个百分比是我想要使用的宽度。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-14T23:23:13.560

在解决放大和缩小问题之前有一些建议。

1.  不要`<div>`用于环绕文本。
2.  使用`<h1>`标签作为标题
3.  将 CSS 存储在单独的 css 文件中。
4.  您定义了很棒的页眉部分，但也为容器和页脚执行此操作。
5.  注释！对于那些试图帮助你的人来说，这会让工作变得更容易。

# python - pygame 中的 sys.exit() 问题

> ID：11488122
> 
> 赞同：5
> 
> 时间：2012-07-14T23:16:53.580
> 
> 标签：python, pygame

我正在学习使用 Pygame，当我使用 时`sys.exit()`，我遇到了问题。这是代码：

```
import pygame, sys,os
from pygame.locals import * 

pygame.init() 

window = pygame.display.set_mode((468, 60)) 
pygame.display.set_caption('Game') 
screen = pygame.display.get_surface() 

file_name = os.path.join("data","image.bmp")

surface = pygame.image.load(file_name)

screen.blit(surface, (0,0)) 
pygame.display.flip() 

def input(events): 
   for event in events: 
      if event.type == QUIT: 
         sys.exit(0) 
      else: 
         print event 

while True: 
   input(pygame.event.get()) 
```

这实际上只是 pygame 教程中的代码。无论我尝试使用什么事件，当我实际尝试退出时都会出现问题`sys.exit()`。

```
Traceback (most recent call last):
  File "C:/Python27/Lib/site-packages/pygame/examples/test.py", line 25, in <module>
    input(pygame.event.get())
  File "C:/Python27/Lib/site-packages/pygame/examples/test.py", line 20, in input
    sys.exit(0)
SystemExit: 0 
```

...然后程序不退出。我在这里做错了什么？因为我确实注意到这段代码是针对 Python 的过时版本的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-15T02:18:04.863

```
sys.exit() 
```

单独使用 pygame 有点邪恶。退出 pygame 应用程序的正确方法是先跳出主循环，然后退出 pygame，然后退出程序。IE。

```
while running == True:
    # catch events
    if event_type == quit:
        running = False  # breaks out of the loop

pygame.quit()  # quits pygame
sys.exit() 
```

在我看来，您似乎没有正确地抓住事件..应该是

```
if event.type == pygame.QUIT: 
```

[您可以在此处](http://www.pygame.org/docs/ref/event.html)阅读有关 pygame 中事件的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T23:21:30.083

`sys.exit`只是抛出一个异常（一个 SystemExit 异常）。这有两个不同寻常的效果：

1.  它只退出多线程应用程序中的当前线程
2.  异常可能已被捕获。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-13T14:47:59.477

我解决了这个问题，正确的代码如下：

```
running = True
while running == True:
    for event in pygame.event.get():
        if event.type == QUIT:
            running = False  # Exiting the while loop

    screen.blit(background, (0,0))
    pygame.display.update()

pygame.quit() # Call the quit() method outside the while loop to end the application. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T12:45:37.827

我在一些资料中读到，运行 Python shell 的 Tkinter 中的 mainloop() 和 sys.exit() 命令遵循的 Pygame.init() 之间存在冲突。

建议是从命令行运行游戏来解决问题，而不是从 shell 使用 run (F5) 加载游戏。

这样做的一个很好的副作用是，在我的太空入侵者游戏中，它进行了大量的变量更新：每秒 35 次，动画运行正确，而从 shell 中运行很差并且很生涩。

如果我使用以下代码：

```
if event.type == QUIT:
    pygame.quit()
    sys.exit() 
```

游戏正确退出，但在 shell 中留下一条错误消息，这对游戏没有影响，而且在很大程度上是多余的。只是有点难看。这不会从命令行发生。

总结：尝试从命令行运行游戏，避免出现Tkinter问题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-13T22:47:31.763

如果您仍然有问题，（在打破循环后）尝试使用`sys.exit(0)`而不是`sys.exit()`. 希望它会有所帮助。它对我有用。似乎 pygame 期望显式传入“状态”参数（即此处为 0）。

请参见以下示例：

```
isRunning = True
while isRunning:
# Catch events
if event.type == pygame.QUIT:
    isRunning = False # Breaks the loop

pygame.quit()
sys.exit(0) 
```

# python - 如何通过预取 ReferenceProperty 属性来防止过多的 RPC 调用？

> ID：11488125
> 
> 赞同：0
> 
> 时间：2012-07-14T23:17:48.353
> 
> 标签：python, google-app-engine, memcached, jinja2

我正在尝试显示一个包含约 800 个实体的表格，并且在阻止它变得非常慢时遇到了问题。（就像慢了 15-20 秒。）我成功实现了 memcache，但是因为我为每个子实体引用了一个父模型，它仍然会导致每个 800 的 datastore_v3.Get 并且非常慢。

然后我实现了 Nick Johnson 的[ReferenceProperty 预取](http://blog.notdot.net/2010/01/ReferenceProperty-prefetching-in-App-Engine)，但无法解决以下错误：

```
[... snipped ...]
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 570, in dispatch
  return method(*args, **kwargs)
File "/myurl/mypythoncode.py", line 67, in get
  prefetch_refprops(entitylist, ChildModel.parent_program.name)
File "/myurl/mypythoncode.py", line 36, in prefetch_refprops
  fields = [(entity, prop) for entity in entities for prop in props]
TypeError: 'NoneType' object is not iterable 
```

**楷模：**

这是两个相关的模型：

```
class ParentModel(db.Model):
  name = db.StringProperty()
  # currently 109 of these

class ChildModel(db.Model):
  name = db.StringProperty()
  parent_program = db.ReferenceProperty(ParentModel)
  website = db.StringProperty()
  # currently 758 of these 
```

**Python代码：**

在我的 Python 代码中，我使用了 Nick Johnson 的[高效模型缓存](http://blog.notdot.net/2009/9/Efficient-model-memcaching)和[ReferenceProperty 预取](http://blog.notdot.net/2010/01/ReferenceProperty-prefetching-in-App-Engine)技术。（我在下面包含了 ReferenceProperty 预取，但没有包含 memcaching 代码。）

```
class AllEntities(webapp2.RequestHandler):
  def get(self):
    entitylist = deserialize_entities(memcache.get("entitylist"))
    entityref = prefetch_refprops(entitylist, ChildModel.parent_program.name)
    if not entitylist:
      entitylist = ChildModel.all().fetch(None)
      entityref = prefetch_refprops(entitylist, ChildModel.parent_program.name)
      memcache.set("entitylist", serialize_entities(entitylist))
    context = {
      'entitylist': entitylist,
    }
    self.response.out.write(template.render(context))

def prefetch_refprops(entities, *props):
    fields = [(entity, prop) for entity in entities for prop in props]
    ref_keys = [prop.get_value_for_datastore(x) for x, prop in fields]
    ref_entities = dict((x.key(), x) for x in db.get(set(ref_keys)))
    for (entity, prop), ref_key in zip(fields, ref_keys):
        prop.__set__(entity, ref_entities[ref_key])
    return entities 
```

**Jinja2 模板：**

我的 Jinja2 模板引用了“entitylist”中的可迭代“条目”，还引用了 parent_program.name 和 parent_program.key().id()

```
{% for entry in entitylist %}
  <tr>
    <td><a href="{{ entry.website}}">{{ entry.website }}</a></td>
    <td><a href="/urlcategory/view?entityid={{ entry.parent_program.key().id() }}">{{ entry.parent_program.name }}</td>
  </tr>
{% endfor %} 
```

我已经更换了这条线：

```
entityref = prefetch_refprops(entitylist, ChildModel.parent_program.name) 
```

和

```
entityref = prefetch_refprops(entitylist, ChildModel.parent_program) 
```

以及包括“.name”和“.key().id()”在内的其他变体。当我使用“.key().id()”时出现错误：

```
AttributeError: 'ReferenceProperty' object has no attribute 'key' 
```

我错过了什么或搞砸了什么？我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T23:19:28.747

杰德，你做对了:)

两个改进：

1.  您不需要分配预取的返回值，因为它没有被使用，并且公司列表将被修改到位。
2.  我使用 prefetch_refprops 的略微修改版本来处理未填充引用属性的情况。

    ```
    def prefetch_refprops(entities, *props):
        fields = [(entity, prop) for entity in entities for prop in props]
        ref_keys_all = [prop.get_value_for_datastore(x) for x, prop in fields]
        ref_keys = [ref_key for ref_key in ref_keys_all if ref_key is not None]
        ref_entities = dict((x.key(), x) for x in db.get(set(ref_keys)))
        for (entity, prop), ref_key in zip(fields, ref_keys_all):
            if ref_key and ref_entities[ref_key]:
                prop.__set__(entity, ref_entities[ref_key])
            else:
                prop.__set__(entity, None)
        return entities 
    ```

我们在生产代码中使用它，它产生了真正的不同。下面是一个在构建模板值的代码上打开/关闭预取的示例。

```
(run:   real_time, Get #rpcs, RunQuery #rpcs)
Before:   5044 ms,       132,    101
After:    2214 ms,        53,     11 
```

我们的代码正在执行的另一个重链梯操作是每个对象的 ref_set 上的 count()，我们将在不久的将来将其替换为缓存对象上的值。

# applescript - 使用 applescript 获取桌面边界

> ID：11488126
> 
> 赞同：4
> 
> 时间：2012-07-14T23:17:54.280
> 
> 标签：applescript

我试图通过使用带有以下代码的applescript来获取我的桌面窗口的边界：

```
tell application "Finder"
    get bounds of window of desktop
end tell 
```

我不断收到“执行错误：Finder 出错：无法获取桌面窗口的边界。（-1728）”。

我正在运行狮子。知道我怎样才能让它工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T23:41:57.760

桌面和窗口是两个不同的东西。桌面实际上是一个位于`Macintosh HD:Users:yourusername:Desktop:`. 如果您的意思是要在 Finder 中获取窗口的边界，那么您需要识别有问题的窗口。像这样的东西会起作用......

```
tell application "Finder"
    set windowCount to (count windows)
    if windowCount > 0 then
        set windowBounds to bounds of window 1 --> Note the '1'
        return windowBounds
    end if
end tell 
```

请注意检查是否确实打开了任何窗口，因为如果没有打开任何窗口，Applescript 将返回错误。

如果您正在寻找屏幕的边界，那么您只需要以下内容......

```
tell application "Finder"
    get bounds of window of desktop --> weird but that's Applescript for you
end tell
--> Result: {0, 0, 1440, 900} 
```

如果启用了退出 Finder 或使其消失的功能，则上述操作将不起作用。

# cakephp - 如何处理从只能在 CakePHP 中使用基本 GET/POST 请求的源发送的数据？

> ID：11488127
> 
> 赞同：1
> 
> 时间：2012-07-14T23:18:00.647
> 
> 标签：cakephp, post, cakephp-2.0

我想知道使用 CakePHP 处理以下 senario 的正确 MVC 方式是什么：

> `GET`我有一个数据源，它以简单/`POST`请求的形式向我的网站发送信息。为了使插图简单，假设它是关于披萨交付的数据。
> 
> 来自源的 A`POST`可能包含驾驶员 ID、比萨饼 ID 和比萨饼当前位置的键/值组合。然后网站需要用一个简单的状态消息来响应这些数据——一个很好的例子就是`received/continue`。

现在，我希望这些数据需要某种基本身份验证......这可以以任何方式工作，只要它验证数据来自有效来源。我正在考虑只包含 POST 数据，添加用户 ID 和密码。

我如何将它合并到 CakePHP 中，以便它不会与网站上的其他操作发生任何冲突，也不会过度暴露于安全风险（请注意，我怀疑这将是一个足够大的网站，有人将梳理它寻找孔）。

谢谢！詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:53:17.590

有几种方法可以做到这一点，所以这是我脑海中的一种：

*   请求数据（$_POST 数据）应该`$this->request->data`在您的控制器中可用，或者在其`$_POST`本身中（或两者都可用）。

*   要进行身份验证，您可以使用旧的[HTTP Auth](http://php.net/manual/en/features.http-auth.php)。也许不是最聪明/最安全的解决方案，但可能足以满足您的需求。此外，它[已经](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#using-digest-and-basic-authentication-for-logging-in)在蛋糕中可用。

*   您可以通过多种方式回复帖子：

    *   通过禁用控制器中的响应呈现和输出响应 ( `$this->autoRender = false; echo 'carry on old chap';`)
    *   或（我的首选方式）将响应布局设置为 ajax 并在您的视图中回显输出。

最后但并非最不重要的一点是，没有任何理由会影响您的应用程序的其余部分，让自己失望！

# html - 如何使用 HTML::TreeBuilder 仅查找直系后代？

> ID：11488132
> 
> 赞同：4
> 
> 时间：2012-07-14T23:18:42.080
> 
> 标签：html, perl, parsing, html-tree

假设我有一个这样的 HTML 树：

```
div
`- ul
   `- li          (*)
   `- li          (*)
   `- li          (*)
   `- li          (*)
      `- ul
         `- li
         `- li
         `- li 
```

如何选择`<li>`标有 的元素`(*)`？它们是第一个`<ul>`元素的直接后代。

这是我找到第一个`<ul>`元素的方法：

```
my $ul = $div->look_down(_tag => 'ul'); 
```

现在我有了`$ul`，但是当我做类似的事情时：

```
my @li_elements = $ul->look_down(_tag => 'li'); 
```

它还查找`<li>`隐藏在 HTML 树中更深的元素。

如何仅找到作为第一个元素`<li>`的直接后代的`<ul>`元素？我的数量不详。（我不能像示例中那样只选择前 4 个）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T00:16:46.317

您可以使用该方法获取[`HTML::Element`](https://metacpan.org/module/HTML%3a%3aElement)对象的所有子节点，因此文档中第一个元素的所有子节点将是`content_list``<ul>`

```
use HTML::TreeBuilder;

my $tree = HTML::TreeBuilder->new_from_file('my.html');

my @items = $tree->look_down(_tag => 'ul')->content_list; 
```

但它的表现力要强得多[`HTML::TreeBuilder::XPath`](https://metacpan.org/module/HTML%3a%3aTreeBuilder%3a%3aXPath)，它可以让您在文档中的任何位置找到元素子元素的所有子元素，就像`<li>`这样`<ul>``<div>`

```
use HTML::TreeBuilder::XPath;

my $tree = HTML::TreeBuilder->new_from_file('my.html');

my @items = $tree->findnodes('//div/ul/li')->get_nodelist; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T00:41:26.023

如果你想使用 look_down 方法，你可以添加一个额外的条件来只获取孩子：

```
my @li_elements = $ul->look_down(_tag => 'li', sub {$_[0]->parent() == $ul}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-08T23:28:18.530

为了使此页面完美完整，我将添加一个选项：

```
@li = grep { $_->tag() eq 'li' } $ul->content_list; 
```

（其中 $ul 是您的顶级元素）

# mysql - MySQL 可以每个数据库有一个文件吗？

> ID：11488140
> 
> 赞同：4
> 
> 时间：2012-07-14T23:19:45.650
> 
> 标签：mysql, ms-access

我喜欢 Microsoft Access 文件在单个文件中包含完整数据库的事实`.mdb`，因此例如`foo.mdb`可能包含一个数据库的所有数据、表结构和查询。

我想转到 MySQL。我知道 MySQL 可以使用许多文件结构。MySQL能否复制一个数据库=一个文件的单文件模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T23:31:10.927

简短的回答：没有。

长答案：这取决于存储引擎。

innodb 存储引擎管理的所有 db 都存储在一个文件中。如果服务器上有 3 个 innodb 数据库，它们都将存储在一个文件中。这可以通过 innodb_file_per_table 进行更改

MISAM 存储引擎将 db 的每个表存储在两个单独的文件中：数据和索引。

为什么你仍然需要一个文件？MySQL 有一个内置的复制机制，你不应该担心这个。

# python - python将stdin中的行直接存储到列表对象

> ID：11488142
> 
> 赞同：1
> 
> 时间：2012-07-14T23:20:49.773
> 
> 标签：python

在 stackoverflow 上研究这个问题的答案时，我学到了很多新东西，但到目前为止还无法完成交易。

我的 python 进程将通过标准输入接收一行输入，例如

```
[{'name':'ry', 'age':28}, {'name':'bo', 'age':11}, {'name':'ed', 'age':99}] 
```

...并且我希望能够将此行直接存储到一个列表对象中，然后我可以对其进行迭代，例如

```
for i in list:
    print i['age'], i['name'] 
```

`sys.stdin()`...但无论我使用还是`fileinput`模块，我都无法让它工作。例如，即使我明确地创建了一个列表，`x = list(stdin.readline())`最终也会使每个字符成为列表中的单独项目，而不是以我想要的方式解析文本。无论如何..回到搜索。（谢谢阅读。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T23:23:12.493

一个不好的方法是使用`input`. 然而，这是不安全的，并且该函数已在 Python 3 中删除（在 Python 3`input`中调用的函数与 Python 2 的函数相同`raw_input`）。

更好的方法是使用[`ast.literal_eval`](http://docs.python.org/library/ast.html#ast.literal_eval).

```
import ast
x = ast.literal_eval(stdin.readline()) 
```

在线查看它：[ideone](http://ideone.com/rVUG3)

# css - 图像和输入字段的 CSS 问题

> ID：11488145
> 
> 赞同：1
> 
> 时间：2012-07-14T23:21:11.803
> 
> 标签：css

我在处理同一行中的输入字段、图像和文本时遇到了困难。我已将浮动设置为图像和文本，但它不能解决问题。如何使所有浏览器的图像、文本和输入都在一行中？

![在此处输入图像描述](../Images/a64b43d80d43590d3482288869ac3f5f.png)

**CSS**

```
h1 {
    letter-spacing: 2px;
    font-style: italic;
    padding: 5px;
    color: #898989;
    font-size: 140%;
    font-weight: lighter;
    margin: 0px;

}

h2 {
    color: #333333;
    font-weight: bold;
    font-size: 105%;
    margin: 0px;

}

input, select {
    border: 1px solid #C3C3C3;
    background: #ffffff;
    padding: 3px 4px;
    color: #222;
    margin: 0px 5px 0px 0px;
    border-radius: 7px 7px 7px 7px;
    font-family: trebuchet, 'trebuchet ms', 'tahoma', sans-serif;
}

input:focus, select:focus {
    outline: none;
}

.InputGroup {
    display: inline-block;
    padding: 3px 4px;
    border: 1px solid #FFF;
    border-radius: 7px 7px 7px 7px;
}

input.medium, select.medium{
    width:55%;
}

.youTubePng {

float:left; padding-right: 5px;

}

.youTubeLink {
padding-right:5px; float:left; padding-top: 3px;

} 
```

**HTML**

```
<form autocomplete="off" enctype="multipart/form-data" method="post"  name="form">
                    <h1 style="padding-left:0;">Video(Optional)</h1>
                     <img src="images/YouTube.png" class="youTubePng" />
                     <h2 id="youTubeLink">Link:</h2>

                    <input id="ytinput" name="ytinput" type="text" class="field text medium" value="<? $url ?>" maxlength="255" tabindex="1"    />

       </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T23:26:42.343

首先：`</html>`从你的`<form>`.
尝试将所需的包装成`<label>`!
删除`<h2>`并将其替换为`<span>`

## *[jsBin 演示](http://jsbin.com/upatob/2/edit)*

```
<label for="ytinput">
    <img src="images/YouTube.png" class="youTubePng" />
    <span id="youTubeLink">Link:</span>
</label> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T23:32:41.760

默认情况下，h2 是一个块元素。它不会与任何东西共享这条线。除非您有充分的理由将其放在 h2 中，否则请听取其他人的建议并改用标签。

# c++ - Error with Boost.Python when returning a reference to a custom object

> ID：11488154
> 
> 赞同：3
> 
> 时间：2012-07-14T23:23:07.380
> 
> 标签：c++, boost, boost-python

EDIT: I noticed my question was not clear enough; I hadn't specified n0 was an attribute of Edge.

I have two classes Nodes and Edges. Edge is defined (I omitted lots of methods and attributes that are of no interest here):

```
class Edge()
{
  Node& n0;
public:
  const Node& N0() const;
}; 
```

The accessor is coded as follows:

```
Node const& Edge::N0() const
{
  return n0;
}; 
```

where n0 is a private reference to a Node() instance. The problem is that, while trying to expose this function with the following code:

```
class_<Edge>("Edge", init<Node&,Node&>())
    .add_property("n0",&Edge::N0,return_internal_reference<>()); 
```

(the class Node is exposed right before) I get the error:

> error: cannot create pointer to reference member ‘Edge::n0’</p>

I could make the accessor return a copy of n0, and it would work fine (tested). However, if n0 were to be really heavy I would prefer for performance issues to return a const reference rather than a copy.

Can anyone explain to me what is wrong with what I am doing? I am pretty new to C++ and Boost.Python and admittedly don't understand much about the call policies yet.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-01-26T09:17:52.593

2 years later, you can still do it via `add_property` if you use `boost::python::make_function`:

```
class_<Edge>("Edge", init<Node&,Node&>())
    .add_property(
        "n0", 
        make_function(&Edge::N0, return_value_policy<reference_existing_object>())); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T22:04:52.643

So, I still don't understand why my orginal program or @ForEveR 's solutions won't work, but I did find a workaround that gives me what I wanted.

First, in the file where the edge class is defined, I defined the following function:

```
Node const& Edge_get_nodes(Edge& self)
{
   return self.N0(); 
}; 
```

And I wrote for the wrapper:

```
class_<Edge>("Edge", init<Node&,Node&>())
   .add_property("length",&Edge::GetLength)
   .def("GetNode",&Edge_get_nodes,return_value_policy<reference_existing_object>()); 
```

Now, when I import the module in python, I can get n0 doing the following:

```
e1.GetNode() 
```

Which is exactly what I wanted. Thanks for your help!

(if someone can explain to me why it works like this and not the other way, I'd be happy to know!)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-15T08:56:06.963

```
// property creation
    template <class Get>
    void add_property(char const* name, Get const& fget, char const* doc=0);
    template <class Get, class Set>
    void add_property(
        char const* name, Get const& fget, Set const& fset, char const* doc=0); 
```

[http://www.boost.org/doc/libs/1_50_0/libs/python/doc/v2/class.html#class_-spec](http://www.boost.org/doc/libs/1_50_0/libs/python/doc/v2/class.html#class_-spec)

so

```
class_<Edge>("Edge", init<Node&,Node&>())
    .add_property("n0",&Edge::N0, "get private edge"); 
```

should works.

# cygwin - Cygwin 在构建 gmp 库时崩溃

> ID：11488158
> 
> 赞同：0
> 
> 时间：2012-07-14T23:23:40.740
> 
> 标签：cygwin, gmp

我正在尝试使用 cygwin 构建 gmp 库。在配置过程中，它崩溃了，告诉我

> $PATH 或 /usr/5bin 中没有可用的 M4

我认为这意味着它正在寻找存在 MSYS 和 M4 的 MinGW。我已经验证我的路径变量包含

> c:\mingw\msys

这就是我相信 M4 存在的地方，不是吗？谁能帮我弄清楚为什么会崩溃？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:39:26.640

没关系。我在解释器下的 cygwin 设置中找到了它。不管怎么说，还是要谢谢你！

# c# - .NET 4.5 中的垃圾收集是否有变化

> ID：11488160
> 
> 赞同：2
> 
> 时间：2012-07-14T23:24:05.557
> 
> 标签：c#, .net, garbage-collection, .net-4.5

.NET 4.5 中的垃圾收集是否有变化？

从 3.5 到 4.0 的变化对于低延迟应用程序来说是巨大的。4.5 中会有类似的东西吗？

网上关于4.5的资料实在是太少了……希望有人能知道更多……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T23:29:30.297

[.NET 4.5 中的大型对象堆改进](http://blogs.msdn.com/b/dotnet/archive/2011/10/04/large-object-heap-improvements-in-net-4-5.aspx) *（Brandon Bray，MSDN 博客）*

# java - 为什么我收到 JVM 最大堆空间错误？

> ID：11488161
> 
> 赞同：0
> 
> 时间：2012-07-14T23:24:08.820
> 
> 标签：java, exception, jvm, heap-memory

我正在尝试运行具有超过 1024M 堆空间的某个 java 程序。即使我有 4GB 的 RAM 和 32 位操作系统，它说最大是 1024M。下面是我试图用来启动程序的批处理代码：

```
@echo off
java -Xmx2048M -Xms2048M -jar program.jar 
```

有人可以解释为什么我会收到 JVM“无法保留足够的空间”错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:34:15.117

您在 Windows 上，单个 32 位程序可以拥有的最大地址空间为 2GB。现在，由于进程和系统需要其中的一些来处理家务（例如 .dll），因此您不能将所有这些 2GB 用于 Java 堆。所以尝试使用更少的内存，例如 1.5 GB。

您可以通过引导开关让 32 位程序获得 3GB 的地址空间，请参见[此处](http://support.microsoft.com/kb/291988)，如果您确实需要更多堆空间，这可以替代切换到 64 位操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T23:36:06.063

您收到“无法保留足够的空间”错误，因为在您的 2048M 大小的 RAM 中必须没有可用的连续内存块。我建议您将 -Xms 减少到 512M，因为我认为最初您不需要 2048M 堆空间。如果这不起作用，那么您将需要减少 -Xmx 值。

# c++ - 添加指针导致类错误重载成员函数未找到

> ID：11488167
> 
> 赞同：0
> 
> 时间：2012-07-14T23:25:56.977
> 
> 标签：c++, visual-c++

我的代码有一些问题。具体来说：

```
bool Customer::checkout(Inventory* inv) {
  double total = 0;
  for( unsigned int i=0; i < _Cart.size(); i++ ) {
      total += _Cart[i].price; // price * quantity??
  }
  if( Customer.balance < total ) {
      return false;
  }
  else {
      unsigned int i =0;
    for ( i =0; i < inv->_Inv.size(); i++) {//go through inventory, check names, if there is a match, 
          if (inv->_Inv[i].name == _Cart[i].name) {     //decrement the quantity accordingly, if there is no match, 
              inv->_Inv[i].quant -= _Cart[i].quant;
              break;
        }
    }
    if( i == inv->_Inv.size() ) {  //you need to push the new food into the inventory vector
        inv->_Inv.push_back(_Cart[i]);
        return true;
    }
} 
```

* * *

在我的头文件中，我有：

```
class Customer {
  public:
    Customer( string n, int c, double b );
    bool addCart( Food f );
    bool removeCart( Food f );
    void report(); //to do
    bool checkout(Inventory* inv); //to do
  protected:
    string name;
    int card;
    double balance;
    //CreditCard _CC;
    vector<Food> _Cart;
};

class Inventory {
  public: 
    vector<Food> _Inv;
    vector<Food> _Purchases;
    int interval;
    void firststock( string fileName );
    void showFirststock( string fileName);
    void restock( string file, int inter );
    void summary(); //to do 
```

我得到的错误如下：

1.  错误 C2061：语法错误：标识符 'Inventory' 错误 C2061：（关于 bool checkout(Inventory* inv);)
2.  语法错误：标识符 'Inventory' bool
3.  Customer::checkout(Inventory *)' : 在 'Customer' 中找不到重载的成员函数，请参阅 'Customer' 的声明 .... (关于 bool Customer::checkout(Inventory* inv))

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T23:29:47.067

您需要`Inventory`在定义之前进行前向声明`Customer`。

```
class Inventory;
class Customer {
    //....
};

class Inventory {
    //....
}; 
```

关于代码的一些注释：

*   通过`const`引用传递复杂的数据类型 - 例如 -`bool addCart( const Food& f );`而不是`bool addCart( Food f );`

*   您对 unqualified 的使用`string`表明您`using namespace std;`在标题中的某个位置。那不行，至少在标题中，您应该没有`using`指令，而是完全限定类型 - `std::string`，它也应该通过引用传递

# haskell - 播种 stdgen 有什么好的价值

> ID：11488169
> 
> 赞同：0
> 
> 时间：2012-07-14T23:26:12.967
> 
> 标签：haskell, prng

我需要找到一个好的价值来`mkStdGen`作为种子喂养。

我通常做的第一件事就是使用从纪元开始以来的刻度，但是，我使用`getClockTime`from来做到这一点`System.Time`，根据[hackage](http://hackage.haskell.org/packages/archive/old-time/1.0.0.2/doc/html/System-Time.html "System.Time hackage 参考")的说法，它已被弃用，有利于[Data.Time](http://hackage.haskell.org/package/time-1.4.0.1 "Data.Time hackage 参考")。后者似乎并没有公开这个功能。

有没有更好的方法来为这个值生成种子？还是我应该忽略弃用警告？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T01:20:53.520

这通常是不必要的，因为[全局`StdGen`](http://hackage.haskell.org/packages/archive/random/latest/doc/html/System-Random.html#g:3)是在启动时使用当前时间播种的。因此，您可以只使用`randomIO`and`randomRIO`并拥有一个隐式`IO`的基于 - 的随机数生成器，或者`getStdGen`使用通常的纯函数来获得更明确的随机数生成器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-14T23:37:14.013

您在寻找`getPOSIXTime`（[文档](http://hackage.haskell.org/packages/archive/time/1.4.0.1/doc/html/Data-Time-Clock-POSIX.html)）吗？

**脚注：**请注意，这**不会**返回自任何纪元开始以来的刻度数，您永远不应声称它确实如此。它返回基于从 UTC 时间的有损转换定义的“POSIX 时间”，并且 UTC 时间对于确定没有最新转换数据库的日期之间的间隔没有用。

# android - android通过蓝牙传输视频/图像

> ID：11488170
> 
> 赞同：2
> 
> 时间：2012-07-14T23:26:24.650
> 
> 标签：android, stream, bluetooth

我有一个带有对象跟踪的项目。现在我使用笔记本电脑上的网络摄像头来开发它，但是当我将它移动到平台上时，我必须得到一个外部摄像头。

我想知道是否可以使用手机的摄像头将视频流式传输到笔记本电脑以通过蓝牙进行处理。

但我不知道这是否足够快以保持体面的帧速率。

# r - 如何在 R 中选择 CRAN 镜像

> ID：11488174
> 
> 赞同：204
> 
> 时间：2012-07-14T23:27:00.120
> 
> 标签：r, package, installation, cran

我正在尝试通过执行以下操作通过 R 提示安装包：

```
install.packages('RMySQL') 
```

但输出如下：

```
--- Please select a CRAN mirror for use in this session --- 
```

没有别的！我找不到这个非常基本的问题的解决方案。为了选择 CRAN 镜像，我应该输入什么？

编辑：

操作系统：Mac-OS X 10.6.8 R 版本：2.15.0

* * *

## 回答 #1

> 赞同：317
> 
> 时间：2012-07-14T23:38:04.257

您应该得到一个带有存储库列表的窗口或一个带有一些选项的文本菜单。但如果没有出现，您始终可以使用`repos`参数指定从哪里下载包的镜像。通过这样做，R 将不再询问您有关存储库的信息。例子：

```
install.packages('RMySQL', repos='http://cran.us.r-project.org') 
```

这里有R[的镜像列表。](http://cran.r-project.org/mirrors.html)

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2012-07-15T01:35:53.203

这是我所做的，基本上直接来自`example(Startup)`页面：

```
## Default repo
local({r <- getOption("repos")
       r["CRAN"] <- "http://cran.r-project.org" 
       options(repos=r)
}) 
```

这是在`~/.Rprofile`。

*编辑：*现在是 2018 年，我们可以补充一点，在过去几年中，该 URL`"https://cloud.r-project.org"`更受欢迎，因为它反映了 a）https 访问和 b）“始终靠近你”的 CDN。

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2012-07-15T03:48:24.853

我是：

```
chooseCRANmirror() 
```

它将在输出中打印镜像列表（无需担心弹出窗口，因为您是从终端运行它），然后输入您想要的数字。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2015-01-06T08:26:02.113

我使用 Dirk 建议的 ~/.Rprofile 解决方案，但我只想指出

```
chooseCRANmirror(graphics=FALSE) 
```

似乎是明智的做法，而不是

```
chooseCRANmirror(81) 
```

，这可能有效，但涉及到神奇的数字 81（或者这可能是将旅游业推广到 81 = 英国（布里斯托尔）:-) 的微妙方式）

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-02-16T10:46:43.100

存储库选择屏幕无法在您的系统 (OS X) 上显示，因为 OS X 不再包含 X11。R 尝试通过 X11 向您显示提示。[从http://xquartz.macosforge.org/landing/](http://xquartz.macosforge.org/landing/)安装 X11 。然后运行安装命令。将显示 repo 选择提示。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-11-11T04:52:57.170

我用了

```
chooseCRANmirror(81) 
```

它会提示您选择国家/地区。然后您可以通过键入那里指定的国家/地区镜像代码来进行选择。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-05-27T18:54:42.610

如果您需要以非交互方式设置镜像（例如在部署脚本中安装 rbundler），您可以通过以下方式进行：

首先手动运行：

```
chooseCRANmirror() 
```

选择最适合您的镜像号码并记住它。然后自动选择：

```
R -e 'chooseCRANmirror(graphics=FALSE, ind=87);library(rbundler);bundle()' 
```

其中 87 是您要使用的镜像编号。此代码段还为您安装了 rbundle。如果你愿意，你可以省略它。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-02-20T09:02:15.233

无论您是在终端中使用 R 还是使用 RStudio 等 IDE，都会弹出一个下拉菜单供您选择（或者您将获得一堆可供选择的数字）。这在 Windows、Mac OS 和大多数 Linux 系统上受支持。但是，它可能需要额外的配置或依赖项，例如 X-windows。

要在使用远程访问时启用 X-windows，请使用以下`-XY`标志：

```
ssh -XY username@server.domain 
```

通常有一个默认 repo，但如果您有任何问题，例如运行脚本或 Rmarkdown/knitr，可以指定它。`repo`每次安装时，您都可以使用opset 镜像或 CRAN 存储库：

```
install.packages("package", repo="<your.nearest.mirror>") 
```

建议使用离您最近的镜像以加快下载速度。例如：

```
install.packages("RMySQL", repos="https://cran.stat.auckland.ac.nz/") 
```

您还可以`repos`在会话中设置该选项，这样每个交互式会话（或脚本）只需设置一次。您可以检查是否`repos`配置有：

```
options(repos) 
```

如果你得到`"Error in options(repos) : object 'repos' not found"`了，那么你可以设置存储库选项。例如：

```
options(repos = "https://cran.stat.auckland.ac.nz/") 
```

然后它应该像往常一样安装软件包。例如：

```
install.packages("RMySQL") 
```

正如其他人所提到的，您可以在`.Rprofile`文件中配置存储库，并在所有脚本中进行这项工作。您是喜欢系统上的这些“全局”选项还是会话或脚本中的“本地”选项取决于您。这些“本地”选项需要更多时间来使用每个会话，但如果其他人没有您的`.Rprofile`.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-01-08T14:18:29.377

您还可以通过运行它或将其放置在您的 Rprofile 中来禁用所有图形菜单

```
options(menu.graphics = FALSE) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-01T15:46:34.630

在 macOS 上，我有你所说的确切内容：“请选择”提示，然后仅此而已。

在我打开（并更新；不知道这是否相关）X-Quartz，然后重新启动 R 并再次尝试后，几秒钟后我得到了一个 X-window 镜像列表可供选择。从第三次开始，速度更快了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-07T03:52:48.703

添加到`~/.Rprofile`

```
local({r <- getOption("repos")
    r["CRAN"] <- "mirror_site"  #for example, https://mirrors.ustc.edu.cn/CRAN/
    options(repos=r)
    options(BioC_mirror="bioc_mirror_site") #if using biocLite
}) 
```

# ruby - 从 UTC 秒数创建 DateTime

> ID：11488178
> 
> 赞同：4
> 
> 时间：2012-07-14T23:27:31.820
> 
> 标签：ruby, ruby-on-rails-3

我不敢相信我在任何地方都找不到这个，但是你怎么能从 UTC 秒创建一个 DateTime 呢？类似于在 Java 中你可以做些什么`Calendar.getInstance().setTimeInMillis(time)`来获得一定的时间。

`DateTime.new 1344899588`没有用，而且我在 DateTime API 文档中没有看到任何显示如何执行此操作的内容。

这可行，但似乎是一种迂回的方式：

```
DateTime.strptime(1344899588.to_s, "%s") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T23:52:13.273

您可以为此使用 Time 类，即

```
t = Time.at(1344899588) 
```

如果您需要 Date 对象而不是 Time 对象，您可以执行以下操作：

```
d = Time.at(1344899588).to_date 
```

而且，如果你需要一个 DateTime 对象，你可以这样做：

```
dt = Time.at(1344899588).to_datetime 
```

顺便说一句，这会产生`Mon, 13 Aug 2012 16:13:08 -0700`

# regex - Bash 正则表达式以匹配冒号分隔的整数

> ID：11488179
> 
> 赞同：0
> 
> 时间：2012-07-14T23:27:35.110
> 
> 标签：regex, bash

我正在尝试解析字幕文件。示例字符串如下所示：

00:00:01,000 --> 00:00:04,074

我有这个正则表达式：

```
#!/bin/bash
while read line
do      
    if [[ "$line" =~ ^[0-9]{2}:[0-9]{2}:[0-9]{2},[0-9]{3}* ]]
    then
            echo $line
    fi           
done < $1 
```

此正则表达式有效并与该行相呼应。但是当我将 if 语句中的模式扩展到：

```
if [[ "$line" =~ ^[0-9]{2}:[0-9]{2}:[0-9]{2},[0-9]{3}*--* ]] 
```

然后它不再起作用了。

同样，此正则表达式有效：

```
while read line
do
       if [[ "$line" =~ [0-9]{2}*[0-9]{2}*[0-9]{2}*[0-9]{3}*--\>*[0-9]{2}*[0-9]{2}*[0-9]{2}*[0-9]{3}* ]]
        then
                echo $line
        fi

done < $1 
```

但是，如果我放置`^`在模式的开头（如第一种情况），或者如果我使用`:`s 和`,`s 它就不再起作用了。

我不明白为什么它会表现出如此奇怪的行为。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T23:30:06.977

`*`不像在命令行中进行文件匹配那样工作。它的意思是“前一个字符的 0 个或多个”，而不是“任何字符的 0 个或多个”。您需要在它前面加上`.`0 个或多个任何字符（因为`.`它是正则表达式中匹配任何字符的特殊字符）。

这将与您的行匹配，并且可能是您最终想要的正则表达式：

```
if [[ "$line" =~ ^[0-9]{2}:[0-9]{2}:[0-9]{2},[0-9]{3}\ ?--\>\ ?[0-9]{2}:[0-9]{2}:[0-9]{2},[0-9]{3}$ ]]; 
```

# smalltalk - Monticello - 一次提交保存到 Squeaksource 和 Filetree

> ID：11488180
> 
> 赞同：4
> 
> 时间：2012-07-14T23:28:02.060
> 
> 标签：smalltalk, pharo, filetree

我想要的是一次将一个包或一组包提交到两个存储库，如果可能的话，使用相同的版本号，因此一个存储库可以是另一个存储库的镜像。

可以使用Gofer吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T01:24:49.280

Gofer 每次操作可以使用多个存储库。尝试：

```
fileTreeRepoDirectory := FileDirectory on: '/path/to/repository/'.
Gofer it
        squeaksource: repoName; "e.g. 'Seaside'"
        repository: (MCFileTreeRepository new directory: fileTreeRepoDirectory);
        package: packageName;
        commit: messageString. 
```

# java - 我应该为高分列表使用什么数据结构？

> ID：11488182
> 
> 赞同：4
> 
> 时间：2012-07-14T23:28:25.227
> 
> 标签：java, sorting, map

> **可能重复：**
> [如何对 Java 中的值对 Map<Key, Value> 进行排序？](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)
> [如何在 Java 中按键对 Map 值进行排序](https://stackoverflow.com/questions/922528/how-to-sort-map-values-by-key-in-java)

我正在尝试跟踪分数，并且我需要能够将分数排序为非升序，而不会使键和值脱节。我的第一个想法是使用地图，但我真的很难找到一种方法来保持地图按价值排序。这些值都是整数对象。我将如何对这样的高分列表进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:33:05.833

这是一个微软/亚马逊求职面试类型的问题。您可以使用优先级队列，或者将最高分作为队列的第一个元素。创建一个节点作为`key | value`对。以通过分值维护键顺序的方式实现它，并实现队列。

* * *

提供更多细节

* * *

这是您的`Node`实现：

```
public class Node{

    private String name;        // the name
    private double score;       // assuming you're using double

    public Node(String name, double score){
        this.name = name;
        this.score = score;         // assuming negative scores are allowed
    }
    public void updateScore(double score){
        this.score += score;
    }
} 
```

并且在使用时`PriorityQueue`，`Comparison`根据分值进行。如果您需要搜索/更新，它是 O(1)，根据[Java API](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)：

> 实现说明：此实现为入队和出队方法（offer、poll、remove() 和 add）提供 O(log(n)) 时间；remove(Object) 和 contains(Object) 方法的线性时间；检索方法（peek、元素和大小）的恒定时间。

阅读 API，我猜您可能需要覆盖`Comparator<? super E> comparator()`，或者至少根据您的需要对其进行修改。那应该这样做。

# bash - 如何并行运行命令列表？

> ID：11488184
> 
> 赞同：14
> 
> 时间：2012-07-14T23:29:17.403
> 
> 标签：bash, parallel-processing, system, systems-programming

我有一个包含要运行的命令行的文件。该文件包含大约 2,000 行。

我有 8 个内核可用。是否可以解析文件并启动 8 个进程，然后在其中一个程序完成时从文件中执行另一个进程？我希望这一直持续到文件末尾。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-15T05:36:56.220

使用[GNU 并行](https://www.gnu.org/software/parallel/)。这是一个非常强大的工具，官方软件包存在大约 20 个左右的 linux 发行版。那是什么？[你有借口为什么你*不能*使用它？](http://oletange.blogspot.com.au/2013/04/why-not-install-gnu-parallel.html)这是一个简单的示例，展示了如何并行运行命令列表或文件：

内容`jobs.txt`：

```
sleep 1; echo "a"
sleep 3; echo "b"
sleep 2; echo "c" 
```

命令：

```
time parallel :::: jobs.txt 
```

结果：

```
a
c
b

real    0m3.332s
user    0m0.170s
sys     0m0.037s 
```

* * *

笔记：

如果您希望保持与输入相同的顺序，请将`-k`标志传递给 GNU 并行。

如果您有八个以上的核心并且只希望使用八个核心进行处理，请添加`-j 8`到 args 列表中。

[手册页](http://www.gnu.org/software/parallel/man.html)很好读，但如果您尚未阅读本[教程](https://www.gnu.org/software/parallel/parallel_tutorial.html)，我强烈建议您花时间投资。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-15T05:26:11.623

您可以使用*xargs*读取文件，同时将最大进程数限制为可用内核数。例如：

```
cores=$(fgrep -c processor /proc/cpuinfo)
xargs --arg-file=/tmp/foo \
      --max-procs=$cores  \
      --replace \
      --verbose \
      /bin/sh -c "{}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T00:11:41.727

您只需运行带有 & 的命令即可在后台启动新进程。[这里](http://pebblesinthesand.wordpress.com/2008/05/22/a-srcipt-for-running-processes-in-parallel-in-bash/)有一个例子描述了你的问题的解决方案。

# c# - PictureBox 从文件到 BLOB 到 SQL Server 数据库，然后从 DB 到 PictureBox

> ID：11488191
> 
> 赞同：1
> 
> 时间：2012-07-14T23:30:39.360
> 
> 标签：c#, winforms, linq-to-sql, blob, picturebox

我有 1 个带有 1 个图片框、1 个文本框和 3 个按钮的 Windows 窗体：LoadFromFile、SaveToDB 和 LoadFromDB。

在 App.config 中使用 LINQ to SQL 连接和以下形式的代码：

```
private void btnLoadFromFile_Click(object sender, EventArgs e)
{
// open file dialog
OpenFileDialog open = new OpenFileDialog();
// image filters
open.Filter = "Image Files(*.jpg; *.jpeg; *.gif; *.bmp; *.png)|*.jpg; *.jpeg; *.gif; *.bmp; *.png";
if (open.ShowDialog() == DialogResult.OK)
{
// display image in picture box
picBox.Image = new Bitmap(open.FileName);
// image file path
textBox1.Text = open.FileName;
}
} 
```

我可以加载图片及其形成路径。

现在我需要将图片保存到`[BLOBData]`我的表中命名的图像类型字段：`tblBLOB (BLOBID, BLOBData)`. 那么将图片转换为图片类型的代码是什么，然后将图片类型转换为图片在`PictureBox`控件中显示的代码又是什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T23:35:32.277

在数据库中存储`Byte Array`为 blob。一些有用的转换方法：

```
public static byte[] ImageToByteArray(Image imageIn)
{
    var ms = new MemoryStream();
    imageIn.Save(ms, System.Drawing.Imaging.ImageFormat.Gif);
    return ms.ToArray();
}

public static Image ByteArrayToImage(byte[] byteArrayIn)
{
    var ms = new MemoryStream(byteArrayIn);
    Image returnImage = Image.FromStream(ms);
    return returnImage;
} 
```

* * *

存储到数据库：

```
OpenFileDialog open = new OpenFileDialog();
if (open.ShowDialog() == DialogResult.OK)
{
    // display image in picture box
    Image img = new Bitmap(open.FileName);
    picBox.Image = img;
    // Byte Array that can store as BLOB in DB
    byte[] blobData = ImageToByteArray(img);
} 
```

并从数据库加载：

```
picBox.Image = ByteArrayToImage(/* Byte Array of image from BLOB cell in DB */); 
```

# d3.js - 如何在 d3.json 命令中使用 d3.min 和 d3.max

> ID：11488194
> 
> 赞同：30
> 
> 时间：2012-07-14T23:30:49.000
> 
> 标签：d3.js

我是 d3 和 Javascript 的新手。我已经玩过 choropleth 示例，但现在想进行一些更详细的更改。其中之一是找到我用作输入的 JSON 的最大值和最小值。

我的问题很简单，因为对象下方的代码片段已正确输出到 console.log(data) 命令的控制台，但是整个对象也为 min 和 max 语句输出，而不仅仅是 min 和最大限度。

```
d3.json("data/unemployment_by_state.json", function(data) {   
  console.log(data);
  console.log(d3.min([data]));
  console.log(d3.max([data]));
}); 
```

这是 JSON 对象的片段：

```
{"01":32710,"02":20280,"03":18002} 
```

我想要帮助的是理解为什么 d3.min([data]) 和 d3.max([data]) 导致整个对象输出到控制台，而不是数据对象中的最小值和最大值.

提前致谢。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2014-07-14T19:49:05.707

如果您的数据是一个数组，那么您的原始代码将起作用，如果您去掉数据周围的括号：

```
 var data = [32710,20280,18002];

  console.log(data);
  console.log(d3.min(data));
  console.log(d3.max(data)); 
```

如果您需要使用键“01”、“02”、“03”来识别数组值，请创建一个对象数组，并对这些值进行操作以获得最小值/最大值：

```
 //data as key/value pairs
   var data = [
     {key: "01",  value:  32710},
     {key: "02",  value:  20280},
     {key: "03",  value: 18002}
  ];

  console.log(data);
  console.log(d3.min(data, function(d) { return d.value; }));
  console.log(d3.max(data, function(d) { return d.value; }));

  // AND IF YOU WANT THE min/max of the KEYS:
  console.log(d3.min(data, function(d) { return d.key; }));
  console.log(d3.max(data, function(d) { return d.key; })); 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-07-15T06:53:32.230

`d3.min()`and`d3.max()`函数作用于数组，而不是对象。您似乎试图通过将`data`对象包装在一个数组（例如`d3.max([data])`）中来解决这个问题，但这实际上是在说“给我一个具有一个值（数据对象）的数组的最大值”。由于数组中只有一个值，因此返回该值。

如果您只想要对象中的最大值/最小值，您可以使用该`d3.values()`函数将数据中的所有值提取为一个数组，然后取该数组中的最大值：

```
var max = d3.max(d3.values(data)); 
// 32710 
```

如果您还想知道键，您可能需要使用`d3.entries()`创建一个对象数组`{ key, value }`，然后对它们进行排序并取顶部：

```
// create an array of key, value objects
var max = d3.entries(data)
    // sort by value descending
    .sort(function(a, b) { return d3.descending(a.value, b.value); })
    // take the first option
    [0];
// { key: "01", value: 32710 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T12:49:28.600

我也是 d3 和 JavaScript 的新手，但我找到了一种解决方法来找到包含对象的三行的最小值和最大值，使用`d3.extent`and `.concat`：

```
y.domain(
  d3.extent(
    d3.extent(data, function(d) {
      return d.line1;     })
    .concat(d3.extent(data, function(d) {
      return d.line2;     })
            .concat(d3.extent(data, function(d) {
      return d.line3;     })
                   ))
  ));
```

# python - 更新 python 字典

> ID：11488196
> 
> 赞同：-2
> 
> 时间：2012-07-14T23:31:13.537
> 
> 标签：python, dictionary

如果我有字典 A：

```
{ 'name': 'Jack',
  'age': 24,
  'friends': ['Bob', 'Alice', 'Karen'],
} 
```

我有字典 B：

```
{ 'name': 'Jack',
  'favorite_color': 'blue',
  'friends': ['Daren'],
} 
```

如何将它们组合在一起，以便结果仅包含字典 A 中的字段，并且两者具有相同的字段根据 B 中的值更新 A 中的值。当字段是数组时，附加到它而不是替换它。

所以结果字典 C 应该是：

```
{ 'name': 'Jack',
  'age': 24,
  'friends': ['Bob', 'Alice', 'Karen', 'Daren'],
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T23:39:58.210

```
a = { 'name': 'Jack',
  'age': 24,
  'friends': ['Bob', 'Alice', 'Karen'],
}

b = { 'name': 'Jack',
  'favorite_color': 'blue',
  'friends': ['Daren'],
}

for key in a.keys():
    if key in b:
        if hasattr(a[key], 'extend'):
            a[key].extend(b[key])
        else:
            a[key] = b[key]

print a 
```

输出：

```
{'age': 24, 'friends': ['Bob', 'Alice', 'Karen', 'Daren'], 'name': 'Jack'} 
```

这假设如果 in 的字段`a`是一个列表，那么 in 的同一个字段`b`也是一个列表。换句话说，如果`b['friends']`不是一个列表，它可能会中断。如果这是一个问题，您将需要检查两个字典中的字段类型并相应地调整行为。

# android - 透明/暗淡的 ListView 背景 - 我想在点击背景时破坏 ListView 活动

> ID：11488198
> 
> 赞同：0
> 
> 时间：2012-07-14T23:32:11.433
> 
> 标签：android

我有一个`ListView`运行良好的列表。它是这样设置的：

```
<style name="Theme.Transparent" parent="android:Theme"> 
    <item name="android:windowIsTranslucent">true </item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">true</item>
</style> 
```

这是我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:padding="0dp" 
   android:background="@drawable/button_pressed"
   android:clickable="false"
   android:id="@+id/ListViewLayout" >

    <ImageView
        android:id="@+id/logo"
        android:layout_width="100dp"
        android:layout_height="50dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="5dp" />

    <TextView
        android:id="@+id/label"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="30dp" >
    </TextView>
</LinearLayout> 
```

我还有一段代码可以创建`ListView`并处理我的点击：

```
public class RandomList extends ListActivity {
    static final String[] randomList = new String[] {"Name 1", "Name 2", "Name 3", "Logo"};

    @Override
    public void onCreate (Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setListAdapter(new RandomArrayAdapter(this, randomList));
    }

    protected void onListItemClick(ListView l, View v, int position, long id){
        //Get selected items
        Log.v("ListView l:", l.toString());
        Log.v("View v:", v.toString());
        Log.v("Position:", ""+position);
        Log.v("ID: ", ""+id);
        String selectedValue = (String) getListAdapter().getItem(position);
        Bundle bundle = new Bundle();
        bundle.putString("Name", selectedValue);
        Intent mIntent = new Intent();
        mIntent.putExtras(bundle);
        setResult(RESULT_OK, mIntent);
        finish();
    }
} 
```

现在，有了`ArrayAdapter`et al，我得到了一个项目列表。由于只有五个项目，并且由于我为其设置的样式，大部分屏幕都变暗（原始`Activity`），并且只有列表居中。`Activity`问题是，如果有人单击列表框外的灰色区域，我想完成。我无法为我的生活弄清楚如何。

我试图实现一个`OnTouchListener`，但`ListView`不允许我这样做，我不知道如何为`LinearLayout`围绕`TextView`. 我对Android相当陌生，所以请为我哑巴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T02:15:09.150

创建此 xml 布局并将其命名为“list_layout.xml”：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:orientation="vertical"
     android:id="@+id/my_background"
     android:layout_width="match_parent"
     android:layout_height="match_parent">

 <ListView android:id="@android:id/list"
           android:layout_width="match_parent"
           android:layout_height="wrap_content"/>
 </LinearLayout> 
```

然后将您的更改`onCreate()`为以下内容：

```
public void onCreate (Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_layout);

    View background = findViewById(R.id.my_background);
    background.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
             RamdomList.this.finish();
         }
     });

    setListAdapter(new RandomArrayAdapter(this, randomList));

} 
```

我在没有运行它的情况下将其从头顶上写下来，因此您可能会反对一些事情，但您会明白这个概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:28:34.853

我找到了第二个问题的解决方案，询问关于盒子的问题。在`Theme.Transparent`，我只好`WindowIsFloating`转向`false`。将其与 Wnafee 的出色答案结合起来，它就像一个魅力。

# asp.net - 在会话中存储数据与从数据库中检索到达时间？

> ID：11488203
> 
> 赞同：0
> 
> 时间：2012-07-14T23:34:10.200
> 
> 标签：asp.net, database, visual-studio-2010, oracle, devexpress

我只是在学习 ASP.net，同时也在为一个朋友制作一个网络应用程序。

现在，在我的应用程序中，有一个表将用户映射到公司的分支机构，另一个表将分支机构映射到客户。当用户登录时，我进行查询以获取他/她可以访问的分支机构列表，然后另一个查询以获取他负责的所有客户列表。这发生了很多次，并且在许多页面上都需要。

另外，我正在使用 DevExpress 的 GridView 和 GridViewLookUp 工具。如果您熟悉它们，它们就像 ASP.net 中的 GridView 一样，并且每次对显示的条目进行排序或选择不同的页面来查看条目时都会导致回发。基本上，我想知道我必须多次触发上述两个查询。

用户通常负责平均 100-150 个客户端。

所以我想知道的是，对于这么高的数字，我是否应该检索所有客户端名称并将它们存储在会话中，这样只要用户登录就不必再次连接到数据库？还是我应该保持原样，让它每次都从数据库中找到客户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:39:28.687

由于此数据特定于登录用户，因此您可以将其保存在`Session`变量中。另一个替代选项是在您的 UI/业务逻辑和数据访问之间实现一个[`Cache`](http://msdn.microsoft.com/en-us/library/xsbfdd8c%28v=vs.71%29.aspx)层。每天查询一次（或您定义的间隔缓存持续时间）并将其保存在`Cache`. 下次当您的 UI 需要时，从那里获取它。如果数据为空，则表示缓存已过期。再次查询并存储。缓存数据对所有用户都是全局的，而会话数据特定于该用户会话。

如果您有这么多请求进入，与将其保存在缓存中相比，在会话中为每个请求保留 150 个客户端对象的副本（它有多大？）似乎有点糟糕。所以我认为你应该选择**缓存层**选项。

# iphone - 播放问题 - 外部屏幕覆盖主屏幕

> ID：11488206
> 
> 赞同：1
> 
> 时间：2012-07-14T23:34:56.723
> 
> 标签：iphone, objective-c, ios, xcode, uiviewcontroller

我正在尝试创建一个非常简单的应用程序来测试 Airplay 镜像和分屏。我的主视图控制器有一个开关，假设在镜像模式和分屏模式之间切换，所有这一切都是在系统坞站上启用镜像之后（所以首先 - 在主坞站上启用镜像，然后使用开关从镜像模式转到拆分应用程序的屏幕模式）。第一个开关工作正常 - 我在 Apple TV 上看到了新寡妇，并且设备屏幕保持不变。再次切换，使外部视图出现在设备屏幕上。在这一点上，我无能为力，因为开关不再存在......（为了练习，外部屏幕只是一个空白屏幕）。

谁能帮我理解我做错了什么？我很确定这是一件小事，但如果我完全离开，我不会感到惊讶......：/

我的一些代码：

应用委托：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES;
} 
```

视图控制器.m：

从 viewDidLoad 调用 screenDidChange。switchAction 在点击开关时被调用。

```
 - (void)screenDidChange:(NSNotification *)notification
 {

NSArray *screens;
screens = [UIScreen screens];
NSUInteger screenCount = [screens count];

if (screenCount > 1) 
{
    self.extScreen = [screens objectAtIndex:1];    
}
else 
{
    // Release external screen and window
    self.extScreen = nil;
    self.mainWindow = nil;
    [self externalWindow:self.mainWindow];
}
}

- (IBAction)switchAction:(id)sender {

NSArray *screens;
screens = [UIScreen screens];
NSUInteger screenCount = [screens count];

if ([sender isOn] == YES)
{
    //Mirror mode
    self.extScreen = [screens objectAtIndex:1]; 
    [mainWindow makeKeyAndVisible];
}
else {
    //Split Screen mode
    self.extScreen = [screens objectAtIndex:0];
    [mainWindow makeKeyAndVisible];
}

self.extWindow2.hidden = NO;

if (extWindow2 == nil || !CGRectEqualToRect(extWindow2.bounds, [extScreen bounds])) 
{
    extWindow2 = [[UIWindow alloc] initWithFrame:[extScreen bounds]];
    extWindow2.screen = extScreen;
    UIView *view = [[UIView alloc] initWithFrame:[extWindow2 frame]];
    view.backgroundColor = [UIColor blueColor];
    [extWindow2 addSubview:view];
    [extWindow2 makeKeyAndVisible];

}
} 
```

# jquery - Intellisense 不适用于 Visual Studio 2012 中的 JavaScript

> ID：11488208
> 
> 赞同：69
> 
> 时间：2012-07-14T23:35:17.517
> 
> 标签：jquery, visual-studio, intellisense, visual-studio-2012, javascript-intellisense

我有一个干净的、开箱即用的 Visual Studio 2012 Web Developer Express 安装，由于某种原因，对 JavaScript（jQuery、jQuery UI 和其他库）的支持已经消失。我相信它之前有效，然后“无缘无故”地停止了。

我按照预期浏览了网页，发现了四个差异。

1.  我的注册表中没有键 HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\JavaScriptLanguageService\ImplicitReferences。事实上，我什至没有 JavaScriptLanguageService 目录。

2.  我检查了引用的文件 domWindows.js 确实是选项指向的位置。

3.  JavaScriptLanguageService 下的输出窗口是空的，在我开发和运行我的应用程序时没有输入任何内容。

4.  我通过选项引用了我正在使用的 jQuery 文件，但它没有产生任何更改。

总而言之，我收到错误消息说：

> “intellisense 无法确定此表达式的准确完成列表，提供的列表包含文件中的所有标识符”

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-08-18T06:47:29.240

向[CraigTP 致敬](http://blog.craigtp.co.uk/post/Javascript-jQuery-Intellisense-in-Visual-Studio-2012)

概括：

1.  导航到 [工具] > [选项] > 文本编辑器 > JavaScript > IntelliSense > 参考选项

2.  选择隐式（Web）

    你可以找到“~/Scripts/_references.js”（如果你想把它放在不同的地方，在这里改变它）

3.  转到 ~/Scripts 并添加新项目“_references.js”

4.  添加`/// <reference path="path\jquery-1.7.1.js" />`“_references.js”

    或者`/// <reference path="~\root\path\jquery-1.7.1.js" />`

快乐编码:)

编辑说明：

请记住将 jquery-1.7.1-vsdoc.js 与 jquery-1.7.1.js 放在同一文件夹中

进行上述更改后，如果仍然无法正常工作，请尝试重新启动 Visual Studio。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-09-27T18:41:59.750

转到菜单*工具*->*选项*->*文本编辑器*-> *JavaScript* -> *Intellisense* ->*参考，然后在**隐式 Web*组中放置对您正在使用的 jQuery 版本的 Intellisense 文件的引用。

![在此处输入图像描述](../Images/18fc5059a78a24be9a0c7e05bf958854.png)

或者

在 _references.js 文件中放置一个对 intellisense 文件的“添加引用”，您可以将其添加到`Scripts`项目的文件夹中。

```
/// <reference path="jquery-1.8.2.js"/>
/// <reference path="jquery-1.8.2.min.js"/>
/// <reference path="jquery-1.8.2.intellisense.js"/> 
```

虽然这只会为您所在的项目提供智能感知，**但第一个将为任何打开的 JavaScript 文件提供智能感知，而不仅仅是您所在项目中的那些。**

要使用 intellisense 获取最新的 jQuery 文件，请使用[NuGet](http://en.wikipedia.org/wiki/NuGet)包安装程序，默认情况下会创建一个脚本文件夹并将 jQuery version.js、min.js 和 intellisense.js 文件放入... 从那里您可以将它们复制到大多数 Microsoft 引用都放置在位置，通常是：

`install-package jquery`在包管理器控制台中。

C:\Program Files (x86)\Microsoft Visual Studio 11.0\JavaScript\References

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-11T18:58:39.097

概括：

1.  将`.js`要引用的文件从[解决方案资源管理器](https://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Other_tools)拖到当前文件中。（Visual Studio 将创建一个参考片段。）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-15T02:59:05.907

尝试将它们添加到您的隐式 JavaScript 引用中。它位于工具 -> 选项 -> 文本编辑器 -> JavaScript -> IntelliSense -> 参考。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-01T23:14:29.547

### 将 jQuery 及其智能感知文件添加到活动/打开的项目/网站

在 Visual Studio 2012 中，执行以下操作：

打开菜单*Tools* -> *Library Packet Manager* -> *Manage Nuget packages for solution*。单击对话框最右侧的在线字段/选择器。在中间列表中找到 jQuery，点击它，然后点击*Install*。

通过查看解决方案资源管理器面板，观察 jQuery 脚本文件现在已插入到您的项目中。您应该看到 jquery-1.xxjs（这里的 x 是实际版本号的占位符。假设 jquery-1.9.0.js 是一个具体示例）。

另外，请注意那里现在有一个 Jquery-1.9.0.intellisense.js 文件。整齐的艾？:-)

但请记住，如果您在 Visual Studio 中创建一个新网站并选择 ASP:NET Web 表单站点（而不是空站点），那么 Web 表单站点将已经包含 jQuery 1.7.1）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-19T18:47:54.163

*我在JavaScript* -> *Intellisense* -> *Reference*中包含了 jquery-xxx.intellisense.js 。它工作了一次，但在我关闭 Visual Studio 并重新启动它后，智能感知不再工作。但我不小心点击了菜单 Edit -> *intellisense* -> *Refresh Remote References*。它再次起作用了。试试看！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-06-22T16:54:49.793

通过从 NuGet 控制台安装它来使用 JQuery 的 NuGet IntelliSense 文档包：

`Install-Package jQuery-vsdoc`

安装软件包后转到：

`Tools>>Options>>Text Editor>>JavaScript>>Intellisense>>References`

`Implicit(Web)`并通过选择硬盘驱动器上安装的包位置添加对组的引用。

重新启动 Visual Studio，您将获得 jQuery 智能感知工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-12T03:09:40.867

最终对我有用的是重新排序 _references.js 中的列表。由于在项目中导入了一堆插件，我有将近 150 行，而 jQuery 接近底部。当我将它的引用移到顶部时，我的智能感知又开始工作了。

它看起来像什么：

```
/// <autosync enabled="true" />
/// <reference path="jquery-2.1.3.js" />
/// <reference path="jquery-ui-1.11.2.js" />
/// <reference path="modernizr-2.8.3.js" />
... more reference lines
```

请注意，该引用是对 jquery-{version}.js 文件的引用。在名为 jquery-{version}.intelliense.js 的同一目录中，还有一个与 Nuget 包一起安装的文件，我假设是使用的文件。希望有帮助。

# performance - 外部http请求有害吗？

> ID：11488210
> 
> 赞同：0
> 
> 时间：2012-07-14T23:35:27.643
> 
> 标签：performance, html, http, httpwebrequest

我正在使用服务来生成代码，并从外部服务获得响应。我经常一次得到30+。

我还使用网站图标服务来获取网站图标。favicon 服务允许为域添加任意数字前缀以绕过浏览器连接限制（例如[http://2245.example.com/?url=example.net](http://2245.example.com/?url=example.net)）

我的网站总共可以发出超过 50-100 个请求，但其中 15 个来自我的服务器，我使用了 yslow 并为此获得了一个很大的 F。这些请求是否被阻止？我可以在单个页面加载时生成 30 个或更多，尽管它似乎在测试中加载良好......我实际页面上的所有内容都会立即加载，我使用 css3 和 jquery 很好地淡入动画

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T23:39:57.853

在大多数浏览器中最多有 4-6 个并发请求，因此其他浏览器会延迟，是的，但这取决于它们是否阻塞。

您应该避免它 - 如果它是您服务的一部分，请考虑通过 AJAX 调用为客户端批量加载服务器上的数据，这样您还可以缓存结果以避免过多的异地请求。

如果您可以显示该页面以获得更全面的建议会有所帮助，代码是什么？他们会改变吗？你可以从你的服务器而不是客户端来做吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T23:56:44.807

浏览器有一个管道，可以同时执行有限数量的请求，因此如果您的网页加载 50-100 多个图像，就会出现瓶颈。

解决此问题的最佳方法是将图像内容作为 sprite 提供。这涉及：

*   让您的服务器代表网页获取图像。
*   在服务器端创建相应的精灵。
*   从您的服务器向网页提供精灵图像以及精灵解码参考点。

# php - 发布到 PHP，不要重新加载页面和更新 div

> ID：11488219
> 
> 赞同：0
> 
> 时间：2012-07-14T23:37:30.233
> 
> 标签：php, jquery, ajax

**编辑：现在可以使用，代码已更新。非常感谢马丁安普斯！**

所以我已经玩了一个星期了，已经破解了很多例子，但它没有奏效，所以我不会费心发布代码，因为它是一团糟！我是一个万事通，一无是处，所以我不知道我哪里错了。

这就是我需要的。

* * *

**后测.php**

```
<html>
<head>
<script type="text/javascript" src="./js/jquery-1.7.2.min.js"></script>
</head>
<body>

<form name="processForm" id="processForm" action="process.php" method="POST">
  <input type="text" id="textField" name="textField" />
  <input type="hidden" id="sessionID" name="sessionID" value="myusername" />
<input type="submit" value="Process!" />
</form>

<div id="mydiv"></div>

FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>
FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>FILLER<BR><BR>

<script type="text/javascript">

$('#processForm').submit(function() {
  var text = $('#textField').val();
  var sid  = $('#sessionID').val();

$.ajax({
  url: "process.php",
  type: "POST",
  data: { 'text' : text, 'sessionID' : sid },
  success: function(data) {
    var result = $.parseJSON(data);
    if (result.success) {           
        // Handle your result and update your form accordingly  
        // result.data.someKey  
        $('#mydiv').text('Success! With ' + result.data);

    }
    else {
        // Error handling as applicable
    }
  }
});

    return false;
});

</script>

</body>
</html> 
```

**进程.php**

```
<?php
$someText=$_POST['text'];

$return = array('success' => false, 
            'data' => $someText
           );

if (isset($_POST['text'], $_POST['sessionID'])) {
    // Do your queries

    $return['success'] = true;
    //$return['data'] = array('someKey' => 'someValue');
    $return['data'] = $someText;
}

echo json_encode($return);
?> 
```

* * *

我已经尝试了很多示例，并尝试从头开始制作自己的示例，但似乎无法使其正常工作！当您在 facebook 上添加评论或新帖子时，我正在尝试完成的一个示例。

我希望有人能帮忙，因为我觉得我已经在这个简单的任务上浪费了一周的时间。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T23:50:37.847

您不需要将会话变量存储在页面中，因为它已经存储在 cookie 中。假设您使用的是 JQuery，这里有一个快速示例：

**标记**

```
<form id="processForm" action="process.php" method="POST">
   <input type="text" id="textField" name="textField" />
   <input type="hidden" id="sessionID" name="sessionID" value="<?=session_id()?>" />
   <input type="submit" value="Process!" />
</form> 
```

**Javascript**

```
$('#processForm').submit(function() {
  var text = $('#textField').val();
  var sid  = $('#sessionID').val();

  $.ajax({
    url: "process.php",
    type: "POST",
    data: { 'text' : text, 'sessionID' : sid },
    success: function(data) {
        var result = $.parseJSON(data);
        if (result.success) {           
            // Handle your result and update your form accordingly  
            // result.data.someKey  
        }
        else {
            // Error handling as applicable
        }
    }
   });

   return false;
}); 
```

**进程.php**

```
<?php

$return = array('success' => false, 
                'data' => array()
               );

if (isset($_POST['text'], $_POST['sessionID'])) {
    // Do your queries

    $return['success'] = true;
    $return['data'] = array('someKey' => 'someValue');
}

echo json_encode($return);
?> 
```

**笔记**

您应该使用绝对 url 并注意表单/javascript 是不突兀的，因此您也应该让它在没有 ajax 的情况下运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T23:42:43.587

您可以为此使用一般的 AJAX 请求，然后在响应时更改 div 吗？

这当然是使用 JQuery。

```
$.ajax({
                    type: "POST",
                    url: "/process.php",    
                    data: "yourData=AwesomeData&SomeOtherData=5",
                    success: function(data){
                        //Update the div
                    },
                    error: function(request){
                        //Something went wrong.
                    },
                }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T23:55:09.867

我假设您只想通过 ajax 从 process.php 加载一些数据。您可以使用`load()`jquery 中的方法。[http://api.jquery.com/load/](http://api.jquery.com/load/)

在您的**index.php**文件中：

```
$('#container').load('process.php', {'variable1' : var1, 'variable2' : var2}); 
```

上面的代码用于使用`POST`请求通过 ajax 提交数据。因此，您必须在**process.php**文件中使用`$_POST['variable1']`然后执行您的查询来访问它们，我假设您已经如何做到这一点，所以我不提供示例。如果它是多行结果，则需要将结果存储在数组中：

```
$store = array();
foreach($result as $row){
  $store[] = array('field1'=>$row['field_name']);
} 
```

最后用于`json_encode`使数组更易于在 javascript 中处理：

```
echo json_encode($store); 
```

如果您需要更多帮助，请随时发表评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T00:12:59.293

以下是收集用户数据的 Web 表单示例：

```
<form class="form">
<input class="name" type="text"/>
<input class="email" type="text"/>

<button class="submit">Send Data</button>
</form> 
```

这是jQuery：

```
$('form button.submit').click(function() {
    $.ajax({
        'data' : $('form').serialize(),
        'type' : 'POST',
        'url' : 'process.php',
        'success' : function(data) {
            $('div.container').html('<p>' + data + '</p>');
        }
    });
}); 
```

这是PHP：

```
<?php
    if (isset($_POST['name']) && isset($_POST['email']) && $_POST['name'] != "" && $_POST['email'] != "") {
    //Do some SQL processing

        echo "success";
        exit;
    }

?> 
```

希望有帮助！

# android - Android 完全控制 BackupAgent

> ID：11488223
> 
> 赞同：0
> 
> 时间：2012-07-14T23:37:40.793
> 
> 标签：android, dropbox, android-backup-service

在有人将我指向此链接[http://developer.android.com/guide/topics/data/backup.html](http://developer.android.com/guide/topics/data/backup.html)之前，让我告诉你，虽然我认为它真的很棒，但它也缺少一些我想在我的应用。

我想要一份包含多个备份（不仅仅是云中的一个）的列表，以及从另一个云存储（比如 Dropbox）备份/恢复文件的选项。

我不知道助手将文件存储在哪里以及如何（如果可以的话）从另一个位置恢复。

该指南对此不是很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:11:13.003

助手不存储文件。Helpers 为 BackupManager 服务提供备份数据，并与注册的传输进行对话。由传输决定对多个设备和备份执行什么操作。

使用 bmgr 工具选择本地传输并运行备份和恢复 - 这是了解系统工作原理的最佳方式。

请记住，BackupAgent 生成的数据是完全不透明的。您可能能够构建您的数据，以便您始终合并新的备份数据并决定在恢复时如何处理它。

# ssis - 抓取 sql 数据并使用 4 个文本文件对其进行 ftp 的 ssis 包

> ID：11488225
> 
> 赞同：1
> 
> 时间：2012-07-14T23:38:09.900
> 
> 标签：ssis, ftp-client

我需要创建一个包，该包将在 ftp 服务器上上传 4 个文件和 4 个文件，其中包含有关行数、处理日期的一些规范......我想知道我将如何解决这个问题。我已经测试了创建和 ftp 一个文本文件，一切正常，但我不确定如何使用 create 4。我是创建 4 个单独的数据流还是在同一个数据流中。如果在同一个数据流中，考虑到所有 4 个文本文件都是从同一个数据源 - sql server 上传的，我可以使用同一个 ole db 源连接吗？我对此很陌生，我不确定是否可以使用 foreach 和 foreach ftp 任务中的数据流任务来完成 ftp。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:48:19.473

理论上你可以。您可以使用变量作为文件名。检查动态文件连接。[在这里](http://www.mssqltips.com/sqlservertip/1084/dynamic-flat-file-connections-in-sql-server-integration-services/)举个例子

# algorithm - heapify 为什么要用堆底的元素交换堆顶？

> ID：11488227
> 
> 赞同：3
> 
> 时间：2012-07-14T23:38:25.900
> 
> 标签：algorithm, heapsort

在最大堆中（假设它由数组表示），堆的顶部（即堆中的最大值）与数组中的最后一个元素（即堆中的最小值之一）交换，最后一个元素被删除，然后新的堆顶元素与其他值交换以回到其适当的位置。

相反，为什么不直接删除顶部元素，然后其他元素可以“填充”堆？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-14T23:52:32.420

堆的关键属性之一是底层二叉树是一棵*完全*二叉树（即除最后一层外的每一层都必须完全“填充”）。这样堆就有`O(lg N)`操作了，因为我们只需要在每一层修改一个元素`O(lg N)`。让我们看一个例子

```
 10
   /  \
  8    7
 / \  / \
5  6  4  3 
```

如果我们按照您的方法并“填充”我们得到的堆

```
 8
   /   \
  6     7
 / \   / \
5  ?   4  3 
```

这棵树不再是一棵完整的二叉树，因为`?`. 由于我们不知道这棵树是否完整，因此我们对树的高度一无所知，因此无法保证`O(lg N)`操作。

这就是为什么我们取出堆中的最后一个元素，将其放在顶部，然后将其洗牌 - 以保持完整的二叉树属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-14T23:59:45.967

> 为什么不只是删除顶部元素，然后其他元素可以“填充”堆？

原因是元素的索引在维护堆结构方面起着重要作用。index 处元素的两个子元素`i`位于 index`2*i+1`和`2*i+2`。如果您“只是删除”顶部元素，您将不会得到另一个堆：索引`1`并且`2`不再包含该元素的子`max`元素，因为该`max`元素将不再存在。从某种意义上说，你最终会得到两个“损坏”的堆，而不是一个正常工作的堆。您必须替换索引零处的值，否则其余元素之间的索引方案将崩溃​​。

虽然从顶部删除一个元素不会被忽视，但删除底部的元素是可以的：您需要做的就是记下最小的元素是 at`last-1`而不是`last`. 所以操作顺序变成如下：

*   移除可以安全移除的元素
*   将它放在无法安全移除的元素的位置
*   将元素向下渗透到堆中，直到它稳定下来，在每一步中选择它的两个父元素中的较高者

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T23:53:09.920

从概念上讲，您的建议可以正常工作。堆的抽象定义允许将最顶部的元素移除另一个以“筛选”。

在实践中，常见的堆实现通过使用连续指针数组来模拟树（当元素*n*的父元素位于位置*n/2*时）。在这个实现中，在指针数组中留下“洞”是不方便的。

解决该问题的“技巧”是交换最后一个元素并通过“筛选”步骤重新定位它。这确保了所有连续的数组元素都是树的一部分，并且序列中没有空洞。这使得算法更容易实现并节省链接字段所需的空间。

**执行摘要**：它只是一个实现细节（非常方便且非常常见）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T23:50:21.093

堆算法的整个想法是，始终保持完整的元素树（由数组表示）。如果您从树的根部删除了某些东西，则必须在其中放置其他东西。在数组中，实现这一目标的最有效方法是将最后一个元素移到那里。

您的担忧似乎是基于数组中的最后一个元素（树中的叶元素）是最小元素的假设。这是不正确的。堆数组未完全排序。堆在每个子树中都有“垂直”排序，但在子树之间没有“水平”排序。数组中的最后一个元素肯定是从根到叶的唯一路径中的最小元素，但一般情况下它*不会*是整个堆中的最小元素。

当您查看大小为 的堆的任何叶元素时`N`，您可以肯定地说它不是整个堆中`log N` *最大的元素之一。*但这就是你能说的。例如，如果您的树中有 256 个元素，那么数组中的最后一个元素（或任何其他叶元素）将排在第 9 到第 256 之间。看？它可能是 256 个中的第 9 个！将这样的元素称为“最小”简直是荒谬的。平均而言，它不仅不是最小的，甚至还不是最小的。

同样，最后一个元素是专门选择的，因为它是维护连续数组的最便宜的方式。如果您以其他方式实现堆，例如通过链接树而不是数组，那么在根删除后恢复堆的最佳方式可能会有所不同。

# git - gerrit rebase review 来自上游分支的最新变化的分支

> ID：11488231
> 
> 赞同：6
> 
> 时间：2012-07-14T23:39:11.103
> 
> 标签：git, gerrit

是否可以通过上游的一些待审核更改来重新设置主题分支？我想保留所有评论评论等，但也要在上游进行最新更改。

我考虑过以下工作流程（不确定它是否有效）：

*   根据上游的最新更改重新设置本地主题分支；
*   强制将本地主题分支中的新提交（没有提交到 gerrit 进行审查）推送到 gerrit 的 refs/heads/thetopicbranch，以便用上游的新更改替换 gerrit 分支中的提交；
*   将本地主题分支头推送到 gerrit 进行审查，即 HEAD:refs/for/thetopicbranch - 这将推送需要审查的更改，并且 gerrit（我希望）匹配已经由其 Change-Id 推送的提交。

相同，但在 git 命令中（一切都在本地主题分支上完成）：

*   git rebase 上游
*   git push gerrit:project `git merge-base upstream localtopicbranch`:refs/heads/thetopicbranch -f
*   git push gerrit:project HEAD:refs/for/thetopicbranch

这个架构会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:54:02.380

当然，将一些主题分支更改放在 Gerrit 中待处理的其他上游更改之上是相当容易的。我通常使用的工作流程：

*   下载您想要作为父级的上游更改。您通常不想为这些更改创建新的补丁集，所以我使用可以从 Gerrit 复制粘贴的“git checkout”命令。使用其他命令（pull 和 cherry-pick），如果自上传上游更改后有其他开发，您将创建一个新提交。
*   Cherry-pick 您想要在您刚刚拉下的上游更改之上的更改。从 gerrit 复制粘贴 git cherry-pick 命令
*   通过上传到gerrit`git push <server> HEAD:refs/for/<topicBranch>`

# node.js - 来自亚马逊 s3 的 node.js expressjs 代理静态

> ID：11488238
> 
> 赞同：3
> 
> 时间：2012-07-14T23:40:22.867
> 
> 标签：node.js, express, amazon-s3, knox-amazon-s3-client

当请求进入页面时，例如`app.get("/")`我想从亚马逊 s3 返回一个静态 HTML 页面。我知道我可以从 S3 请求它然后发送它，但这似乎很慢。无论如何告诉请求者直接从s3获取文件而不更改url？

谢谢。

如果做不到这一点，从 s3 提供文件的最快方法是什么？

本教程显示首先编写文件

[http://www.hacksparrow.com/node-js-amazon-s3-how-to-get-started.html](http://www.hacksparrow.com/node-js-amazon-s3-how-to-get-started.html)

```
// We need the fs module so that we can write the stream to a file
var fs = require('fs');
// Set the file name for WriteStream
var file = fs.createWriteStream('slash-s3.jpg');
knox.getFile('slash.jpg', function(err, res) {
    res.on('data', function(data) { file.write(data); });
    res.on('end', function(chunk) { file.end(); });
}); 
```

有没有办法在不先写的情况下发送文件？写起来似乎很慢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T10:44:37.780

正如您所怀疑的，您无法在不更改 URL 的情况下让请求者直接从 S3 获取。您必须代理远程页面：

```
var http = require('http'),
    express = require('express'),
    app = express();

app.get('/', function(req, res) {
  http.get('http://www.stackoverflow.com', function(proxyRes) {
    proxyRes.pipe(res);
  });
});

app.listen(8080); 
```

您可以缓存远程页面以获得更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T02:43:23.873

如果 s3 页面是真正静态的（例如很少更改），您的服务器当然可以在第一次请求它时加载它并缓存它；这不会导致任何明显的放缓。

否则，我会重新考虑“不更改 URL”的要求；最常见的“解决方案”是通常涉及框架的黑客攻击。

# vim - 一个用于翻译的 vim 插件

> ID：11488241
> 
> 赞同：5
> 
> 时间：2012-07-14T23:41:26.500
> 
> 标签：vim, translation

是否有任何允许拆分翻译的 vim 插件。（例如 2 vetical splits。一个句子每个块左侧，并在右侧挖掘翻译文本。即使翻译文本大于原始文本，它也会在左侧显示适当的突出显示块）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T14:52:36.050

也许这对你有用：

*   使用两个文件，一个包含原始文本，一个包含翻译。
*   两个文件每行一个句子。
*   在垂直拆分窗口 ( `:vs`) 中打开这两个文件。
*   用于`:set wrap`一次查看更多行。
*   仍在第一行时，在两个窗口中输入`:set scrollbind`和。`:set cursorbind`当您使用光标来回跳转时，这将使两个窗口保持同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-16T05:29:13.093

有一个新的 vim 插件：[translate-shell.vim](https://github.com/echuraev/translate-shell.vim)。你可以尝试使用它。

# python - 强制抓取键盘焦点 pygtk

> ID：11488246
> 
> 赞同：2
> 
> 时间：2012-07-14T23:42:23.013
> 
> 标签：python, gtk, pygtk

我使用 pygtk 创建了一个新窗口。我希望系统立即为其提供键盘焦点。我所做的大部分时间都有效，但是当一个窗口已经获得焦点时，我的新窗口将被忽略。有没有办法强制我的窗口进入键盘焦点？我用来打开窗口的代码是：

```
 self.window = gtk.Window()
    self.window.set_position(gtk.WIN_POS_CENTER)
    self.window.connect("key-press-event", self.keypress)
    self.window.connect("focus-out-event", self.cancel)
    self.window.connect("destroy", self.cancel)
    self.entry = gtk.Entry(200)
    button = gtk.Button("go")
    button.connect("clicked", self.command)
    box = gtk.HBox()
    box.add(self.entry)
    box.add(button)
    self.window.add(box)
    self.window.set_keep_above(True)
    self.window.show_all()
    self.window.window.focus() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T02:52:30.903

进行焦点调用时，该窗口不可见。尝试这个：

```
def create_window(self):
    self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
    self.window.set_position(gtk.WIN_POS_CENTER)
    self.window.connect("key-press-event", self.keypress)
    self.window.connect("focus-out-event", self.cancel)
    self.window.connect("destroy", self.cancel)
    self.entry = gtk.Entry(200)
    button = gtk.Button("go")
    button.connect("clicked", self.command)
    box = gtk.HBox()
    box.add(self.entry)
    box.add(button)
    self.window.add(box)
    self.window.set_keep_above(True)
    self.window.show_all()
    gtk.idle_add(self.bring_to_front)

def bring_to_front(self):
    self.window.present() 
```

# asp.net - 从 ASCX <% code %> 调用 MVC 控制器的操作

> ID：11488248
> 
> 赞同：2
> 
> 时间：2012-07-14T23:42:48.033
> 
> 标签：asp.net, asp.net-mvc, controller, ascx

我正在使用一个“遗留系统”，它是一个大型 ASP.NET Web 窗体站点。该系统的一个主要扩展点是编写一个动态加载和呈现的 .ascx 控件。

一个网站项目引用了 ASP.NET MVC 3 依赖项，甚至通过将以下路由引入 ASP.NET 4 路由系统来为 MVC 的使用奠定基础：

```
 routes.MapRoute(
      "Default", // Route name
      "{controller}.mvc/{action}/{pid}", // URL with parameters
      new { controller = "Home", action = "Index", pid = "" } // Parameter defaults 
```

根据这条路线，所有要被 url 模式调用的东西都`{controller}.mvc`将按照 MVC 范式进行渲染。

在我的 ascx 控件中（我无法避免使用 ASCX，我必须忍受它），我正在从代码中调用我的控制器：

```
<% 
    var controller = new NamingsController(DependencyResolver.Current.GetService<InDocContext>());
    var htmlToRender = controller.RenderExistingNamings(); 
%>

   <%=htmlToRender%> 
```

这种调用控制器的方式是错误的——我是手动创建它，而在“正常方式”中它是由控制器工厂创建的。在我的情况下，请求上下文，因此没有填充控制器上下文，并且我的控制器并不比标准逻辑类好。

在我的情况下调用控制器操作的正确方法是什么，以便它像用户通过浏览器调用它一样执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:40:10.420

尝试以下操作：

```
<%
    var routeData = new RouteData();
    routeData.Values["controller"] = "Namings";
    routeData.Values["action"] = "RenderExistingNamings";        
    IController controller = new NamingsController(DependencyResolver.Current.GetService<InDocContext>());
    var rc = new RequestContext(new HttpContextWrapper(Context), routeData);
    controller.Execute(rc);        
%> 
```

请注意，没有`<%=htmlToRender%>`. 输出将立即写入响应。

您应该小心 Content-Type 响应标头，该标头现在将是您的控制器操作设置的内容类型，而不是您的 WebForm 设置的内容类型。如果两者都是`text/html`，那应该是个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T23:51:46.397

您是否尝试过使用`Html.RenderAction()`？

[http://msdn.microsoft.com/en-us/library/system.web.mvc.html.childactionextensions.renderaction.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.childactionextensions.renderaction.aspx)

# c# - 在 MVC 控制器中使用查询字符串变量

> ID：11488249
> 
> 赞同：62
> 
> 时间：2012-07-14T23:43:07.747
> 
> 标签：c#, asp.net-mvc, query-string

我是 C#.net MVC 的新手，正在尝试添加`FullCalendar`到 MVC 应用程序。

该`FullCalendar`脚本会自动添加`?start={}&end={}`到 URL ...这很好，但我不知道如何`querystring`在控制器中使用变量。

我在 Webforms 应用程序中使用的方法不起作用。我需要向控制器添加什么来访问`querystring`变量？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-07-15T01:44:29.957

```
public ActionResult SomeAction(string start, string end) 
```

框架会将查询字符串参数映射到方法参数。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2012-07-14T23:58:11.780

我想通了……终于找到了另[一篇](https://stackoverflow.com/questions/998389/how-can-i-access-the-entire-query-string-in-an-asp-net-controller-action)关于它的文章。

```
string start = Request.QueryString["start"];

string end = Request.QueryString["end"]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-29T12:59:55.200

戴维斯，我和你有同样的问题。MVC 并不直观，而且在他们设计它时，孩子们似乎并不了解直观的 MVC 查询字符串系统的目的或重要性。

根本没有在路由中设置查询字符串（RouteConfig）。它们是控制器中操作的附加“额外”参数。这非常令人困惑，因为 Action 参数旨在处理路径和查询字符串。如果您添加了参数但它们不起作用，请为查询字符串添加第二个，如下所示：

这将是您在 Controller 类中捕获 ID 的操作（实际上只是在 RouteConfig 文件中设置的路径，作为 MVC 中的典型默认路径）：

```
public ActionResult Hello(int id) 
```

但是要捕获查询字符串，需要在控制器中添加一个附加参数（顺便说一下，这不是在您的 RouteConfig 文件中设置的）：

```
public ActionResult Hello(int id, string start, string end) 
```

现在，假设在 RouteConfig.cs 中将“id”设置为可选，这将侦听“/Hello?start=&end=”或“/Hello/?start=&end=”或“/Hello/45?start=&end=”文件。

如果您想在没有“id”路径的 RouteConfig 文件中创建“自定义路由”，您可以在该文件中的操作之后省略“id”或其他参数。在这种情况下，控制器中 Action 方法中的参数将只处理查询字符串。

我发现这让我自己非常困惑，所以你并不孤单！他们应该设计了一种简单的方法来为 RouteConfig 文件配置设计中的特定命名字符串、任何查询字符串名称和任意数量的查询字符串添加查询字符串路由。如果不这样做，它会使 MVC Web 应用程序中查询字符串的整个使用变得可疑，这很奇怪，因为自 1990 年代中期以来，查询字符串一直是万维网的稳定部分。:(

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-29T16:23:26.090

这是我想出的。我在这方面遇到了重大问题，并且相信我现在在 MVC 6 中，但这可能对将来甚至我自己的人有所帮助..

//问题是 Reqest.Form Request.Querystring 和 Request 在 MVC 中不起作用，解决方案是使用 Context.Request.Form 并确保表单已提交，否则会出现空引用或上下文问题错误。

```
 if(Context.Request.ContentLength != null)
     {
         String StartDate = Context.Request.Form["StartMonth"].ToString();
         String EndMonth = Context.Request.Form["EndMonth"].ToString();
        // Vendor

     } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-10T03:07:51.843

我的问题是用默认值覆盖我的查询字符串参数：

```
routes.MapRoute(
    "apiRoute", 
    "api/{action}/{key}", 
    new { controller = "Api", action = "Prices", key = ""}
); 
```

无论我插入查询字符串还是`key=""`结果如何。

然后使用 UrlParameter.Optional 摆脱默认覆盖：

```
routes.MapRoute(
    "apiRoute", 
    "api/{action}/{key}", 
    new { controller = "Api", action = "Prices", key = UrlParameter.Optional }
); 
```

现在

```
prices/{key} 
```

或者

```
prices?key={key} 
```

两者都工作正常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-26T07:12:58.327

我从 ApiController 而不是常规的 Controller 类继承时遇到了这个问题。我通过使用解决了它 `var container = Request.GetQueryNameValuePairs().ToLookup(x => x.Key, x => x.Value);`

我关注了这个线程[如何获取请求查询字符串值？](https://stackoverflow.com/questions/18983790/how-to-get-request-querystring-values/19017745)

编辑：尝试过滤容器后，我收到了奇怪的错误消息。转到我的项目属性后，我取消选中了优化代码复选框，该复选框发生了变化，突然间，我的控制器中的参数从我想要的 url 中填充了。

希望这会帮助有同样问题的人..

# search - Symfony lucene 单独的搜索字段

> ID：11488252
> 
> 赞同：1
> 
> 时间：2012-07-14T23:43:56.047
> 
> 标签：search, symfony1, lucene

我有我想搜索的 4 字段女巫表。我像这样索引字段：

```
$doc->addField(Zend_Search_Lucene_Field::Keyword('pk', $this->getId()));
    $doc->addField(Zend_Search_Lucene_Field::UnStored('username', $this->getUsername(), 'utf-8'));
    $doc->addField(Zend_Search_Lucene_Field::UnStored('firstName', $this->getFirstName(), 'utf-8'));
    $doc->addField(Zend_Search_Lucene_Field::UnStored('lastName', $this->getLastName(), 'utf-8'));
    $doc->addField(Zend_Search_Lucene_Field::UnStored('city', $this->getCity(), 'utf-8')); 
```

我想使用表单选项单独搜索此字段。

```
<select name="contact[subject]" id="contact_subject">
  <option value="0">Username</option>
  <option value="1">First Name</option>
  <option value="2">Last Name</option>
  <option value="3">City</option>
</select> 
```

如何告诉 Lucene 仅在我想要的字段中搜索结果？我读了很多问题和解释，但我不明白:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:06:56.760

您需要在搜索词前加上字段名称：

```
$results = $li->find('username:"foobar"'); 
```

`$li`你的lucene索引在哪里。

# php - 在 date_sub 函数中使用间隔时我们可以使用月和日的间隔吗？

> ID：11488253
> 
> 赞同：1
> 
> 时间：2012-07-14T23:43:57.553
> 
> 标签：php, mysql, sql

如果我需要选择过去一个月的数据库，这是正确的方法吗？

```
$month1=mysql_query("select * from users where date_sub(concat(curdate(), ' 00:00:00'), interval 1 month day(curdate()) day) < start and start < date_sub(concat(curdate(), ' 00:00:00'), interval day(curdate()) day)"); 
```

该字段是否特别正确：`date_sub(concat(curdate(), ' 00:00:00'), interval 1 month day(curdate()) day)`

是否有任何最好的简短替代方案来简单地从数据库中选择一张**JUST 上个月**的表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T00:07:47.540

```
SELECT * FROM users 
   WHERE YEAR(`start`) = YEAR(DATE_SUB(NOW(), INTERVAL 1 MONTH)) 
      AND MONTH(`start`) = MONTH(DATE_SUB(NOW(), INTERVAL 1 MONTH)) 
```

编辑：修正年份条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T23:55:16.747

*   您不需要连接 '00:00:00'
*   您减去 1 个月加上一些天数，而不仅仅是 1 个月。您只能将 1 个参数传递给间隔。

一起去

```
DATE_SUB(CURDATE(), INTERVAL 1 MONTH) 
```

该`day()`函数实际上为您提供了月份中的日期，因此如果您想从月初获取所有记录，您可以使用它

```
DATE_SUB(CURDATE(), INTERVAL DAY(CURDATE()) day); 
```

今天是 7 月 15 日，所以这将获取 1 日到 15 日的所有记录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T00:02:04.017

这应该这样做：

```
SELECT * FROM users WHERE start > DATE_SUB(NOW(), INTERVAL 1 MONTH) 
```

如果您在 2 个确切日期之间需要它：

```
SELECT * FROM users WHERE start BETWEEN  '2012-06-01' AND '2012-06-31' 
```

对于非静态请求：

```
SELECT * FROM users 
WHERE start > DATE_ADD(LAST_DAY(
                            DATE_SUB(NOW(), INTERVAL 2 MONTH
                        )),INTERVAL 1 DAY) 
AND start <= DATE_ADD(LAST_DAY(
                          DATE_SUB(NOW(), INTERVAL 1 MONTH
                      )),INTERVAL 1 DAY) 
```

确保你有一个索引`start`。

# playframework - 我可以在游戏中使用安全社交使用什么字段！脸书的框架？

> ID：11488255
> 
> 赞同：2
> 
> 时间：2012-07-14T23:45:09.577
> 
> 标签：playframework, securesocial

如何确保同一用户已登录？

SecureSocial 返回以下字段：

id, isEmailVerified, avatarUrl, email, password, secret, token, authMethod

有些字段是空的，每次我登录 id 都会发生变化。例如，一次是securesocial.provider.UserId@4bc348d3，另一次是securesocial.provider.UserId@68a895ba。我想使用电子邮件地址来查明是否是同一用户登录，但是可以在 facebook 个人资料中更改用户的电子邮件地址。字段标记为空。我可以使用其他任何字段来确定登录的用户是同一用户吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:25:57.903

每次都是不同的对象（当然！），但在`UserId`类中，您会发现`id`提供者用于识别用户 - 因此，要唯一识别用户，请使用`UserId.id`和的组合`UserId.provider`。

# node.js - 在 Mongoose 中如何声明动态 Schema

> ID：11488256
> 
> 赞同：2
> 
> 时间：2012-07-14T23:45:20.517
> 
> 标签：node.js, schema, mongoose

我是 Mongoose 的新手，在官方文档中我没有找到任何与我需要的东西相关的东西。

如何声明一个动态的子模式？

例如：

```
var A = new Schema({
    name        : String,
    subtype     : String,
    description : String
});

var B = new Schema({
    name        : String,
    description : String
});

var C = new Schema({
    name        : String,
    type        : [if(type.value == 'A') then uses Schema-A;
                   if(type.value == 'B') then uses Schema-B;
                  ]
}); 
```

希望这是有道理的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T23:14:12.873

您可以将架构的自定义部分的类型设置为 {}，然后验证流入的不同结构。请参阅[此要点](https://gist.github.com/aheckmann/2789681)。它不如为不同的情况设置不同的模式那么好，但它应该可以达到目的。从本质上讲，通过这种方式进行设置，您实际上是在说文档的该部分没有架构。将模式视为文档的*确定*部分，这里唯一确定的部分是动态部分的占位符。

我认为，您还可以将每个不同的结构创建为不同的架构，但存储在同一个集合中，预先选择适当的架构。我从未尝试过，但由于底层 MongoDB 的无模式特性，它应该被允许。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T08:22:32.267

你为什么需要这个？

在 Javascript 中，您不需要考虑对象的类。

当你想初始化它以及当你想在 MongoDB 中搜索时，你只需要知道类型。

# c# - 为什么这个“明显”的错误条件返回为真？

> ID：11488258
> 
> 赞同：-2
> 
> 时间：2012-07-14T23:45:45.453
> 
> 标签：c#, wpf, boolean

在我的测试场景中，所有组合框都显示相同的值（“<--Select-->”）。

```
private bool AtLeastOnePlatypusSelected()
{
    string DefaultPlatypusValue = "<--Select-->";
    return (cmbxWeek1.SelectedValue != DefaultPlatypusValue) ||
           (cmbxWeek2.SelectedValue != DefaultPlatypusValue) ||
           (cmbxWeek3.SelectedValue != DefaultPlatypusValue) ||
           (cmbxWeek4.SelectedValue != DefaultPlatypusValue) ||
           (cmbxWeek5.SelectedValue != DefaultPlatypusValue) ||
           (cmbxWeek6.SelectedValue != DefaultPlatypusValue) ||
           (cmbxWeek7.SelectedValue != DefaultPlatypusValue) ||
           (cmbxWeek8.SelectedValue != DefaultPlatypusValue) ||
           (cmbxWeek9.SelectedValue != DefaultPlatypusValue);
} 
```

...但是这个函数正在返回 true。

这是另一个组合框代码：

```
public ObservableCollection<ComboBoxItem> cbItems { get; set; }
public ComboBoxItem SelectedcbItem { get; set; }
private Dictionary<int, int> PointNumToWeekNumPairings = new Dictionary<int, int>();

public MainWindow()
{
    InitializeComponent();
    DataContext = this;

    cbItems = new ObservableCollection<ComboBoxItem>();
    var cbItem = new ComboBoxItem { Content = "<--Select-->" };
    SelectedcbItem = cbItem;
    cbItems.Add(cbItem);
    cbItems.Add(new ComboBoxItem { Content = "Tony Iommi" });
    cbItems.Add(new ComboBoxItem { Content = "Mike McCarthy" });
    cbItems.Add(new ComboBoxItem { Content = "Micah Profit" });
    cbItems.Add(new ComboBoxItem { Content = "Allan Poe" });
    cbItems.Add(new ComboBoxItem { Content = "Bill Bailey" });
    cbItems.Add(new ComboBoxItem { Content = "Duane Eddy" });
    cbItems.Add(new ComboBoxItem { Content = "John Kennedy" });
    cbItems.Add(new ComboBoxItem { Content = "Bert Erneson" });
    cbItems.Add(new ComboBoxItem { Content = "Clyde Valouch" });
    cbItems.Add(new ComboBoxItem { Content = "Micky Thompson" });
} 
```

Pork Link Wray 查尔斯狄更斯在这里发生了什么？！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T00:03:21.770

如果您的示例是 Winforms 示例，[`SelectedValue`](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WINDOWS.FORMS.LISTCONTROL.SELECTEDVALUE%29;k%28SELECTEDVALUE%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)则对象是包含由 ValueMember 属性指定的数据源成员的值。如果您没有分配 ValueMember，请改用该`SelectedItem`属性。

* * *

请注意，WPF 中的 SelectedValue 属性和 SelectedItem 属性返回 ComboBoxItem 对象，因此您将 a`ComboBoxItem`与字符串进行比较。尝试将您的比较更改为以下内容：

```
private bool AtLeastOnePlatypusSelected()
{

    string DefaultPlatypusValue = "<--Select-->";
    return (string)((ComboBoxItem)cmbxWeek1.SelectedValue).Content != DefaultPlatypusValue ||
           (string)((ComboBoxItem)cmbxWeek2.SelectedValue).Content != DefaultPlatypusValue ||
           (string)((ComboBoxItem)cmbxWeek3.SelectedValue).Content != DefaultPlatypusValue ||
           (string)((ComboBoxItem)cmbxWeek4.SelectedValue).Content != DefaultPlatypusValue ||
           (string)((ComboBoxItem)cmbxWeek5.SelectedValue).Content != DefaultPlatypusValue ||
           (string)((ComboBoxItem)cmbxWeek6.SelectedValue).Content != DefaultPlatypusValue ||
           (string)((ComboBoxItem)cmbxWeek7.SelectedValue).Content != DefaultPlatypusValue ||
           (string)((ComboBoxItem)cmbxWeek8.SelectedValue).Content != DefaultPlatypusValue ||
           (string)((ComboBoxItem)cmbxWeek9.SelectedValue).Content != DefaultPlatypusValue;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T00:09:54.380

[SelectedValue](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvalue.aspx)返回一个`object`. 很可能至少有一个涉及的字符串没有被保留，导致`object`比较（始终是参考比较）返回 false。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T00:08:33.907

**编辑：**正如我所想，您手动创建`ListBoxItems`...

选择的值是 a `ListBoxItem`，当然不等于 a `string`，设置`SelectedValuePath`为`"Content"`或者直接删除`ListBoxItems`并添加字符串，控件会为你创建容器（这通常是首选，不应该有 UI 元素数据收集，它还允许虚拟化）

* * *

> 所有组合框都显示相同的值（“<--Select-->”）。

Display != value，有一些属性定义了显示的内容和选择的内容。例如，如果您有数据库条目，您可能希望[`SelectedValue`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvalue.aspx)成为主键（它是某个整数），因此您可以[`SelectedValuePath`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvaluepath.aspx)相应地设置，但对用户而言，数字没有任何意义，因此您将 设置为[`DisplayMemberPath`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.displaymemberpath.aspx)包含有意义名称或描述的某个属性。

检查这些属性的设置（如果没有`SelectedValuePath`，它将是完整的项目，即`SelectedValue == SelectedItem`）。此外，如果您的所有条目都包含在手动创建中，`ListBoxItems`那么您当然会得到`ListBoxItem != string`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T23:50:16.553

试试这个：

```
private bool AtLeastOnePlatypusSelected()
{
    string DefaultPlatypusValue = "<--Select-->";
    return (!cmbxWeek1.SelectedValue.Equals(DefaultPlatypusValue) ||
       (cmbxWeek2.SelectedValue.Equals(DefaultPlatypusValue) ||
       (cmbxWeek3.SelectedValue.Equals(DefaultPlatypusValue) ||
       (cmbxWeek4.SelectedValue.Equals(DefaultPlatypusValue) ||
       (cmbxWeek5.SelectedValue.Equals(DefaultPlatypusValue) ||
       (cmbxWeek6.SelectedValue.Equals(DefaultPlatypusValue) ||
       (cmbxWeek7.SelectedValue.Equals(DefaultPlatypusValue) ||
       (cmbxWeek8.SelectedValue.Equals(DefaultPlatypusValue) ||
       (cmbxWeek9.SelectedValue.Equals(DefaultPlatypusValue));
} 
```

通常，您希望使用“Equals”方法来测试两个对象的“相等性”。

在 C# 中，“==”比较更类似于测试两个对象是否是同一个实例，这是您很少会做的事情（在您的示例中，显然不是您想要的）。

编辑：事实证明，C# 中的字符串不是这种情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-14T23:55:02.873

使用`Array`或`List`组合框：

```
var cmbxWeeks = new List<ComboBox>();
cmbxWeeks.Add(cmbxWeek1 ... 
```

和

```
private bool AtLeastOnePlatypusSelected()
{
    string DefaultPlatypusValue = "<--Select-->";

    bool result = true;
    foreach (var cmbxWeek in cmbxWeeks)
        result = result  || (cmbxWeek.SelectedValue != DefaultPlatypusValue);

    return result;
} 
```

或以 LINQ 方式

```
return cmbxWeeks.Aggregate(true, (current, cmbxWeek) => current || ((string) cmbxWeek.SelectedValue != DefaultPlatypusValue)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-14T23:56:25.260

> Pork Link Wray 查尔斯狄更斯在这里发生了什么？！？

显然，一个或多个组合框`SelectedValue`与您预期的不同。

在调试器中单步执行代码，或打印出值。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-15T00:04:59.890

尝试 SelectedItem 而不是 SelectedValue

我写了一个快速的小测试程序，发现我的组合框的 SelectedValue 等于 null，但 SelectedItem 有我期望的文本并返回 false。

（我很抱歉，我的测试是在 WinForms 中......）

好的，我的*新*测试表明 SelectionBoxItem 将返回字符串，并且应该为您提供所需的结果。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-15T00:24:01.190

我必须将代码更改为此才能工作：

```
return ((!(cmbxWeek1.SelectedValue.ToString().Contains(DefaultPlatypusValue))) ||
        (!(cmbxWeek2.SelectedValue.ToString().Contains(DefaultPlatypusValue))) ||
        (!(cmbxWeek3.SelectedValue.ToString().Contains(DefaultPlatypusValue))) ||
        (!(cmbxWeek4.SelectedValue.ToString().Contains(DefaultPlatypusValue))) ||
        (!(cmbxWeek5.SelectedValue.ToString().Contains(DefaultPlatypusValue))) ||
        (!(cmbxWeek6.SelectedValue.ToString().Contains(DefaultPlatypusValue))) ||
        (!(cmbxWeek7.SelectedValue.ToString().Contains(DefaultPlatypusValue))) ||
        (!(cmbxWeek8.SelectedValue.ToString().Contains(DefaultPlatypusValue))) ||
        (!(cmbxWeek9.SelectedValue.ToString().Contains(DefaultPlatypusValue)))); 
```

# c# - 您如何在 VS 中实际删除数据库？

> ID：11488260
> 
> 赞同：0
> 
> 时间：2012-07-14T23:46:56.530
> 
> 标签：c#, linq

我在 VS 中创建了一个数据库，但它不起作用，所以我删除它并重试，但出现错误

“尝试为文件 C:\db.mdf 附加自动命名的数据库失败。存在同名的数据库，或者无法打开指定的文件，或者它位于 UNC 共享上。”

我以为当我点击删除它删除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T00:15:33.527

听起来您要去文件夹并删除数据库，也许可以尝试通过 Try_Catch 语句中的编程来完成。我在微软的网站上找到了这个。你可以试试。

[http://msdn.microsoft.com/en-us/library/ms171854.aspx](http://msdn.microsoft.com/en-us/library/ms171854.aspx)

```
using System.IO;

namespace MySQLCEApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            // Call the File class Delete method to delete the database.
            File.Delete("Test.sdf");
        }
    }
} 
```

您可能还需要确保程序中的文件路径是您要删除的实际文件路径，并且该数据库未打开或未被其他应用程序使用。

也可能是删除数据库时没有刷新缓存，请尝试手动刷新缓存。几个月前，我在处理一些硬件任务时不得不这样做。这是一篇与之相关的文章： [http ://connectsql.blogspot.com/2011/02/intellisense-in-sql-server-2008-is-time.html](http://connectsql.blogspot.com/2011/02/intellisense-in-sql-server-2008-is-time.html)

希望能帮助到你。

# google-apps-script - 谷歌脚本移动图像

> ID：11488262
> 
> 赞同：0
> 
> 时间：2012-07-14T23:47:48.253
> 
> 标签：google-apps-script

问候！

所以我主要用 Python 编程，对 javascript 比较陌生。我目前正在尝试制作一个基本游戏来开始理解 javascript。我只是在几个小时前偶然发现了谷歌脚本，我认为这是一个非常好的想法，它可以更轻松地开发 Web 应用程序（这似乎是谷歌的全部内容）同时拥有一个 GUI 创建工具也是一个非常好的特征。

但是到我的问题上。我如何在javascript中实际移动图像？我找到了

```
 var obj = document.getElementById('IMG_Yellow_SW');
  obj.style.top = 50;
  obj.style.left = 50; 
```

但是我收到“未定义文档”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:49:19.070

首先，您需要了解 Google Script 和 JavaScript 在功能上非常不同，但共享相同的语法和许多“基本”对象，例如字符串、日期、数组等。

与 Javascript 不同，Google Script 不能与 DOM 一起使用。Google Script 通常驻留在自己的容器中，不能影响其外部的对象。

我建议您先尝试一些来自[https://developers.google.com/apps-script/articles的教程](https://developers.google.com/apps-script/articles)

# qt - Qt纯虚函数报错

> ID：11488272
> 
> 赞同：7
> 
> 时间：2012-07-14T23:50:37.927
> 
> 标签：qt

我正在尝试使用 Qt 创建一个接口，以强制任何子类实现两个主要方法 set 和 get title。但是当我尝试编译它时，我收到一条奇怪的错误消息，上面写着关于 qt_check_for_QOBJECT_macro 和 staticMetaObject 的信息。在 mainwindow.cpp 中，我必须将任何页面转换为界面，以便我可以依赖 getter 和 setter 方法。我看不出有任何其他方法可以做到这一点。

这是我的代码：

```
//IPage.h
#ifndef IPAGE_H
#define IPAGE_H

#include <QString>

class IPage
{
public:
 virtual QString title()=0;
 virtual void setTitle(QString t)=0;
};

#endif // IPAGE_H

//buildings.h:
#ifndef BUILDINGS_H
#define BUILDINGS_H

#include "IPage.h"
#include <QDialog>

class Buildings : public IPage, public QDialog
{
   Q_OBJECT
 private:
   QString m_title;
 //stuff...
};
#endif
//buildings.cpp
//stuff...

void Buildings::setTitle(QString t)
{
   m_title = t;
   setWindowTitle(t);
}

QString Buildings::title()
{
   return m_title;
}

//mainwindow.cpp:
QMdiSubWindow *MainWindow::findChild(const QString &title)
{
    foreach (QMdiSubWindow *window, mdiArea->subWindowList()) {
        IPage *child = qobject_cast<IPage *>(window->widget()); /*line 178*/
        if (child->title() == title)
            return window;
    }
    return 0;
} 
```

编译代码时收到此错误消息：

```
In file included from c:\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtCore/qabstractanimation.h:45,
             from c:\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtCore/QtCore:3,
             from c:\QtSDK\Desktop\Qt\4.8.1\mingw\include\QtGui/QtGui:3,
             from mainwindow.cpp:1:
c:\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtCore/qobject.h: In function 'T qobject_cast(QObject*) [with T = IPage*]':
mainwindow.cpp:178:   instantiated from here
c:\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtCore/qobject.h:378: error: 'class IPage' has no member named 'qt_check_for_QOBJECT_macro'
c:\QtSDK\Desktop\Qt\4.8.1\mingw\include/QtCore/qobject.h:380: error: 'class IPage' has no member named 'staticMetaObject'
mingw32-make.exe[1]: Leaving directory `D:/Dropbox/Programmi/Qt/Scadenziario'
mingw32-make.exe[1]: *** [build/o/mainwindow.o] Error 1
mingw32-make.exe: *** [debug] Error 2
01:23:26: The process "C:\QtSDK\mingw\bin\mingw32-make.exe" exited with code 2.
Error while building project scadenziario (target: Desktop)
When executing build step 'Make' 
```

我无法理解错误信息。我试图用谷歌搜索它，但我找不到任何有用的信息。任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T16:22:05.013

[元对象编译器](http://qt-project.org/doc/qt-4.8/moc.html)要求您继承的第一个类是QObject[派生类](http://qt-project.org/doc/qt-4.8/moc.html#multiple-inheritance-requires-qobject-to-be-first)。

所以你应该改变：

`class Buildings : public IPage, public QDialog`

至：

`class Buildings : public QDialog, public IPage`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T00:26:13.660

使用时`qobject_cast<T *>`，`T`必须继承自`QObject`. 在您的情况下，`T`=`IPage`但`IPage`不继承`QObject`. 这就是你得到错误的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:22:46.490

添加到 air-dex 的答案：

由于 提供的元数据`QObject`，当在`QObject`s 之间转换时不需要 RTTI，这使得操作更快（如果您专门使用它，您可以关闭可执行文件中的 RTTI 支持，使其更小）。但是，它*并非*旨在以您尝试的方式使用 - 作为`dynamic_cast`. 所以只需改变：

```
IPage *child = qobject_cast<IPage *>(window->widget()); /*line 178*/ 
```

至：

```
IPage *child = dynamic_cast<IPage *>(window->widget()); /*line 178*/ 
```

# actionscript-3 - Flex 编译器错误 1120

> ID：11488274
> 
> 赞同：0
> 
> 时间：2012-07-14T23:51:34.327
> 
> 标签：actionscript-3, flash, apache-flex, flex4, compiler-errors

我知道网上有一百万个关于 AS3 编译器错误的问题`1120: Access of undefined property <property>`，但这种情况很奇怪。

我正在`<s:Application>`为 Flex 4.6 中的一个组件设置皮肤，并且我在皮肤 MXML 文件中。该行`super.addEventListener(Event.ADDED_TO_STAGE, positionObjects);`给我的问题是：`1120: Access of undefined property positionObjects`。但是`positionObjects`在它的正下方声明。知道有什么问题吗？

```
<fx:Script>
    <![CDATA[
        /**
         *  @private
         */
        override protected function updateDisplayList(unscaledWidth:Number, 
            unscaledHeight:Number) : void
        {
            bgRectFill.color = getStyle('backgroundColor');
            bgRectFill.alpha = getStyle('backgroundAlpha');
            super.updateDisplayList(unscaledWidth, unscaledHeight);
        }

    //Listen for when objects are added to the stage, before positioning them
        [Bindable]
        private var logoX:Number = 0;

        super.addEventListener(Event.ADDED_TO_STAGE, positionObjects);

        private function positionObjects(e:Event):void {
            this.logoX = stage.stageWidth / 3;
        }
    ]]>
</fx:Script> 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T00:24:03.147

您不能在`fx:Script`块中具有可执行的实现，例如：

```
<fx:Script>
    super.addEventListener(Event.ADDED_TO_STAGE, positionObjects);
</fx:Script> 
```

这应该从生命周期函数中调用，例如创建完成：

```
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:fb="http://ns.adobe.com/flashbuilder/2009"
        alpha.disabled="0.5"
        alpha.disabledWithControlBar="0.5"
        creationComplete="skin1_creationCompleteHandler(event)">

    <fx:Script fb:purpose="styling">
        <![CDATA[

            /* your implementation, same as before... */

            protected function skin1_creationCompleteHandler(event:FlexEvent):void
            {
                // move your event listener to this function.
                super.addEventListener(Event.ADDED_TO_STAGE, positionObjects);
            }
        ]]>
    </fx:Script>
</s:Skin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T00:23:47.900

我弄清楚了为什么我会出错。我没有考虑并假设我可以在初始化处理程序之外添加一个事件侦听器。出于某种原因，我认为 AS3 会`<fx:Script>`像解释器执行程序脚本一样通过编译标签运行。

出于某种原因，我再一次没有想到`addedToStage`要向标签添加一个属性`<s:Skin>`，并让它`positionObjects`从那里执行该方法。现在一切都很好。

# shell - 如何在 awk 的正则表达式中表示 /

> ID：11488281
> 
> 赞同：-4
> 
> 时间：2012-07-14T23:52:15.660
> 
> 标签：shell, awk

我正在寻找 awk 中的正则表达式

```
request/123(Pattern for searching) request(word for matching)
word=request pattern =request/123 
```

**使用正则表达式**

```
if(word ~ /Pattern"/"*/) 
```

我面临一个错误，因为我无法在正则表达式中使用 /。有人可以帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T00:04:24.133

[如http://www.google.co.uk/search?q=awk+search+slashes](http://www.google.co.uk/search?q=awk+search+slashes)的第一个结果中所述，通过在斜杠前面加上反斜杠 [*转义字符*]来表示斜杠是文字斜杠。

```
if(word ~ /Pattern\/*/) 
```

# javascript - 简单的 JavaScript / jQuery 不起作用

> ID：11488286
> 
> 赞同：0
> 
> 时间：2012-07-14T23:52:59.730
> 
> 标签：javascript, jquery, internet-explorer, google-chrome-frame

我可能错过了一些大事，但我已经尝试了几个小时......

因此，为了让 IE 8 及以下版本的用户安装[Chrome Frame](http://www.google.com/chromeframe)，我尝试了提供的 GCF Install JS 文件，但我更喜欢自己的实现 - GCFInstall JS 将让弹出窗口在每个会话中仅打开一次，即使通过按钮调用也是如此第二次。[如果您第二次打开它，我发现](https://stackoverflow.com/questions/8803570/google-chrome-frame-overlay-works-only-once)的唯一解决方案不允许您关闭它。

所以这是我放在页面上的代码：

HTML：

```
<!--[if lt IE 9]><script type="text/javascript" src="/resources/js/getgcf.js"></script>
<div style="border:1px solid black; padding: 3px;"><img src="http://cdn.dustball.com/information.png" alt="info"> You appear to be using an older version of Internet Explorer. This website relies on technology not supported by Internet Explorer. To improve your experience (and fix layout errors):
<br><button id="gcfdl">Activate Google Chrome Frame</button><br>You won't notice anything different in the way you use the internet, except that most websites will look better.</div><![endif]--> 
```

getgcf.js：

```
$("#gcfdl").click(function(){
    var wants_normal_installation = confirm("You will now be taken to google.com/chromeframe where Google Chrome Frame will be activated. Please wait about 10 seconds after clicking Accept and Install, and you will automatically be taken back to this page. Press OK for normal installation (recommended), or Cancel for single-user installation (use if you don't have administrator rights on your computer):");
    if(wants_normal_installation){
        window.location("http://www.google.com/chromeframe?redirect=true");
    }
    else{
        window.location("http://www.google.com/chromeframe?user=true&redirect=true");
    }
}); 
```

是的——就是这么简单。jQuery 通常可以完美运行 :(

IE 确实显示“页面上的错误”，但是当我单击它时，消息显示一个令人困惑的错误，我无法弄清楚它的含义。

我将代码放入 Chrome 中，它给出了另一个控制台消息，我无法理解......

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T00:13:42.570

将您的代码包装在文档就绪事件中......

```
$(document).ready(function () {

    $("#gcfdl").click(function(){
        var wants_normal_installation = confirm("You will now be taken to google.com/chromeframe where Google Chrome Frame will be activated. Please wait about 10 seconds after clicking Accept and Install, and you will automatically be taken back to this page. Press OK for normal installation (recommended), or Cancel for single-user installation (use if you don't have administrator rights on your computer):");
        if(wants_normal_installation){
            window.location("http://www.google.com/chromeframe?redirect=true");
        }
        else{
            window.location("http://www.google.com/chromeframe?user=true&redirect=true");
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T00:55:21.567

我已经更改了代码，这是我的最终版本。经过测试并在 IE8 中运行，所以没有理由它不应该在 IE7 等中运行。它将页面放在 iframe 中，这样用户就不会离开网站。随意在您的网站上使用它。（确保在此之前页面上的某处有 jQuery）

```
<!--[if lt IE 9]><script type="text/javascript" src="/resources/js/getgcf.js"></script>
<div style="border:1px solid black; padding: 3px;"><img src="http://cdn.dustball.com/information.png" alt="info"> You appear to be using an older version of Internet Explorer. This website relies on technology not supported by Internet Explorer. To improve your experience (and fix layout errors):
<br><button id="gcfdl">Activate Google Chrome Frame</button><span id="gcfdl2"></span><div id="gcfiframe"></div><br>You won't notice anything different in the way you use the internet, except that most websites will look better.</div><![endif]--> 
```

把它作为/resources/js/getgcf.js：

```
$(document).ready(function(){
    $("#gcfdl").click(function(){
        var wants_normal_installation = confirm("Press OK for normal installation (recommended), or Cancel for single-user installation (use if you don't have administrator rights on your computer):");
        if(wants_normal_installation){
            $("#gcfdl2").html("&nbsp;<b>When you see that the installation is complete <a href=''>click here</a></b>");
            $("#gcfiframe").html("<iframe height=400 width='100%' src='http://www.google.com/chromeframe'></iframe>");
        }
        else{
            $("#gcfdl2").html("&nbsp;<b>When you see that the installation is complete <a href=''>click here</a></b>");
            $("#gcfiframe").html("<iframe height=400 width='100%' src='http://www.google.com/chromeframe?user=true'></iframe>");
        }
    });
}); 
```

更改`src='http://www.google.com/chromeframe'`为`src='http://www.google.com/chromeframe/eula.html'`跳过第一页并直接进入 EULA。

# javascript - 使用 Ajax 删除评论

> ID：11488287
> 
> 赞同：1
> 
> 时间：2012-07-14T23:53:03.873
> 
> 标签：javascript, php, ajax

使用 div 和 ajax 链接在不刷新页面的情况下传递数据的最佳方式/结果是什么。我希望我的评论和 div 在单击时淡出并且不希望页面刷新。所以它正好在我删除评论的地方。

我试过这个，但它不起作用

```
 <script>
function delete_(pid){
$.ajax({
   type: "POST",
   url: "include/post.delete.php",
   data: "pid="+pid,
   success: function(){
   $("#comment-"+pid).remove();
   }
 });
}
</script>
<? if($streamitem_data['streamitem_creator']==$_SESSION['id']){
echo "<div style='cursor:pointer;' onclick=\"delete_('".$streamitem_data['streamitem_id']."');\">Delete comment</div>"; 
```

但这并没有给我我需要的上述结果。也许我做错了什么，但如果可能的话我需要帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T00:35:00.233

不要使用带有提交操作的表单来删除该评论。提交表单时，页面会自动重新加载。而是使用带有`onclick`处理程序的简单元素来触发 AJAX 请求：

```
<div onclick="delete_('anyID');">Delete comment</div> 
```

**编辑：**示例：

```
<head>
<script src="jquery.min.js"></script>
<script type="text/javascript">
function delete_(pid){
$.ajax({
   type: "POST",
   url: "include/post.delete.php",
   data: "pid="+pid,
   success: function(){
   $("#comment-"+pid).remove();
   }
 });
}
</script>
</head>

<body>
<div id="comment-123">This is a comment.</div>
<div onclick="delete_('123');">Delete comment</div>
</body> 
```

# javascript - str.split(' ') 在可编辑 div 中的不同行为

> ID：11488290
> 
> 赞同：1
> 
> 时间：2012-07-14T23:53:42.443
> 
> 标签：javascript, split, contenteditable

我注意到了这种“有趣”的行为。假设你有一个`<div id="editableDiv" contenteditable="true"></div>`

并且您想获取它的值（在这种情况下，假设您的值类似于“hello”（带有尾随空格）。之后，您想使用 split() 将该字符串转换为数组：

```
var string = window.getSelection().anchorNode.data // hello_ (_ means whitespace)
var myArray = string.split(' ') // ['hello '] -> includes whitespace! 
```

但是，当您操作字符串而不必通过可编辑的 div 获取该值时，一切都会照常进行。

为什么以及如何强制尾随空格在结果数组中产生另一个空值`(['hello', ''])`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T00:51:05.633

问题是可编辑 div 的尾随空格似乎是字符 160，它是一个不间断的空格，而不是字符 32，它是一个“正常”空格。您可以通过拆分匹配“正常”空格*或*字符 160 的正则表达式来解决此问题，如下所示：

```
var string = window.getSelection().anchorNode.data;
var myArray = string.split(/ |\u00A0/);
console.log(myArray); 
```

演示：http: [//jsfiddle.net/zgXUp/2/](http://jsfiddle.net/zgXUp/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T00:03:18.797

在拆分之前检查字符串是否有空格，如果是，则正常拆分并将其添加到包含空格的数组中..

```
...
var splitted;
var array[];
String whitespace = "";
if(string.contains("")){
  splitted = string.split("");
  array.insert(splitted,whitespace);
 }
array.insert(splitted); 
```

代码只是我的幻想，我不是编码大师，但你可以吗？

# git - 如何删除从 .git 中删除的文件？

> ID：11488291
> 
> 赞同：5
> 
> 时间：2012-07-14T23:53:58.537
> 
> 标签：git

当我使用或其他工具删除文件（或重命名）时`mv`，文件显示为已删除：`rm``git status`

```
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   deleted:    ../src/main/..../myFile.java 
```

在创建提交之前，对每个文件执行此操作很麻烦`git rm <file>`，尤其是在终端中没有自动完成不存在的文件的情况下。

是否有更短的方法可以从 git 跟踪的文件集中删除已删除的文件？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T00:02:47.883

从文档中，我相信`git add -u`会做你想做的事：

```
-u
--update
  Only match <filepattern> against already tracked files in the index 
  rather than the working tree. That means that it will never stage new
  files, but that it will stage modified new contents of tracked files
  and that it will remove files from the index if the corresponding file
  in the working tree have been removed. 
```

参考： http: [//git-scm.com/docs/git-add](http://git-scm.com/docs/git-add)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T00:53:43.940

当你删除一些文件时，记得在提交中添加“a”参数：

```
$ git commit -am 'Message' 
```

"a" 将自动从存储库中删除文件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T00:01:53.827

是的，`git add -u`应该做到这一点（它会使用所有修改/删除来更新您的索引）。如果您已经添加了具有新文件名的文件，您甚至会在`git status`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T23:59:57.577

这不完全符合您的要求，但您可以尝试`git commit -a`. 从文档中：

```
Tell the command to automatically stage files that have been modified
and deleted, but new files you have not told git about are not affected. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-15T12:06:03.907

我的回答并没有真正解决这个具体问题，但是......

请注意，与某些其他 VCS 不同，在 Git 中，该命令会从索引*和*`git rm`工作树中删除文件，除非另有说明（使用命令行选项）。因此，建议您首先使用删除跟踪的文件：您将让您的文件名完成工作，而无需将索引状态与工作树同步。*`--cached``git rm`*

# php - 使用 rewrite mod 创建一个友好的 url

> ID：11488294
> 
> 赞同：0
> 
> 时间：2012-07-14T23:54:35.007
> 
> 标签：php, mod-rewrite

我试图使用 php 中的 rewrite mod 创建一个友好的 url，但没有成功！

没有友好的网址

```
http://www.mywebsite.com/lyrics/index.php?letter=a 
```

使用友好的网址

```
http://www.mywebsite.com/lyrics/a/ 
```

我的尝试没有成功：

```
RewriteRule ^lyrics/([A-Z])/?$ /index.php?letter=$1 [L] 
```

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T00:23:08.090

你总是期待一个大写字母吗？如果没有，我将添加不区分大小写的标志`NC`，如下所示：

```
RewriteRule ^lyrics/([A-Z])/?$ /index.php?letter=$1 [NC,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T00:05:12.217

看看[ReWrite Trailing Slash 问题](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T00:32:11.807

好的，明白了...我错过了一些东西（下面以粗体显示的一件事）+添加了 rexmac 提示...

RewriteRule ^lyrics/([az])/?$ /**歌词**/index.php?letter=$1 [NC,L]

# c# - 您如何使用 ExportFactory

> ID：11488297
> 
> 赞同：3
> 
> 时间：2012-07-14T23:54:39.870
> 
> 标签：c#, mef

我是 MEF 的新手，正在尝试使用 ExportFactory。我可以使用 ExportFactory 根据用户插入的对象创建列表吗？示例将类似于下面显示的内容。我可能不了解 ExportFactory 的使用，因为在运行时我在合成过程中收到如下所示的错误。

> 1) 没有找到与约束匹配的有效导出 '((exportDefinition.ContractName == "System.ComponentModel.Composition.ExportFactory(CommonLibrary.IFoo)") AndAlso (exportDefinition.Metadata.ContainsKey("ExportTypeIdentity") AndAlso "System. ComponentModel.Composition.ExportFactory(CommonLibrary.IFoo)".Equals(exportDefinition.Metadata.get_Item("ExportTypeIdentity"))))'，无效的导出可能已被拒绝。

```
 class Program
{
    static void Main(string[] args)
    {
        Test mytest = new Test();
    }
}

public class Test : IPartImportsSatisfiedNotification
{
    [Import]
    private ExportFactory<IFoo> FooFactory { get; set; }

    public Test()
    {
        CompositionInitializer.SatisfyImports(this);
        CreateComponent("Amp");
        CreateComponent("Passive");
    }

    public void OnImportsSatisfied()
    {
        int i = 0;
    }

    public void CreateComponent(string name)
    {
        var componentExport = FooFactory.CreateExport();
        var comp = componentExport.Value;
    }
}

public interface IFoo
{
    double Name { get; set; }
}

[ExportMetadata("CompType", "Foo1")]
[Export(typeof(IFoo))]
[PartCreationPolicy(System.ComponentModel.Composition.CreationPolicy.NonShared)]
public class Foo1 : IFoo
{
    public double Name { get; set; }
    public Foo1()
    {

    }
}

[ExportMetadata("CompType", "Foo2")]
[Export(typeof(IFoo))]
[PartCreationPolicy(System.ComponentModel.Composition.CreationPolicy.NonShared)]
public class Foo2 : IFoo
{
    public double Name { get; set; }
    public Foo2()
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T15:08:33.167

问题似乎是您希望导入单个`ExportFactory<IFoo>`，但您导出了两个不同的`IFoo`实现。在您的示例中，MEF 将无法在两种实现之间做出决定。

您可能想要导入多个工厂，包括这样的元数据：

```
[ImportMany]
private IEnumerable<ExportFactory<IFoo,IFooMeta>> FooFactories 
{ 
    get;
    set;
} 
```

where`IFooMeta`会这样声明：

```
public interface IFooMeta
{
    string CompType { get; }
} 
```

然后你可以`CreateComponent`像这样实现：

```
public IFoo CreateComponent(string name, string compType)
{
    var matchingFactory = FooFactories.FirstOrDefault(
        x => x.Metadata.CompType == compType);
    if (matchingFactory == null)
    {
        throw new ArgumentException(
            string.Format("'{0}' is not a known compType", compType),
            "compType");
    }
    else
    {
        IFoo foo = matchingFactory.CreateExport().Value;
        foo.Name = name;
        return foo;
    }
} 
```

# android - java.lang.IllegalStateException：在 Android 的活动类中找不到方法 sms(View)

> ID：11488301
> 
> 赞同：0
> 
> 时间：2012-07-14T23:55:31.813
> 
> 标签：android

我的应用程序启动正常，但按下发送按钮后它强制关闭。Eclipse 中没有“问题”......我认为这是导致错误的代码：

```
public void sms() {
    Toast.makeText(this, "sms()", Toast.LENGTH_SHORT).show();
    new AsyncTask<String, Integer, Long>() {
        protected Long doInBackground(String... params){
            EditText number = (EditText) Main.this.findViewById(R.id.pnumber);
            EditText message = (EditText) Main.this.findViewById(R.id.pmessage);
            EditText hmany = (EditText) Main.this.findViewById(R.id.hmany);
            String _hmany = hmany.getText().toString();
            final String _number = number.getText().toString();
            final String _message = message.getText().toString();
            final int xtime = Integer.parseInt(_hmany);
            Toast.makeText(null, "number: " + _number + " message: " + _message + " xtime: " + xtime, Toast.LENGTH_LONG).show();
            long totalSize = 0; 
            for (int i = 0; i < xtime; i++) {       
                SmsManager.getDefault().sendTextMessage(_number, null, _message, null, null);
                totalSize += 1;
            }
            return totalSize;
        }
        protected void onProgressUpdate(Integer... progress) {
    }
    protected void onPostExecute(Long result) {
        Toast.makeText(null, "number of texts sent will end up going here. maybe add + totalSize after the quotes?", Toast.LENGTH_LONG).show();
    }
}; 
} 
```

这是LogCat：

> 07-14 19:32:39.742: W/dalvikvm(16712): threadid=1: 线程退出未捕获异常 (group=0x40019560) 07-14 19:32:39.752: E/AndroidRuntime(16712): 致命异常: main 07-14 19:32:39.752: E/AndroidRuntime(16712): java.lang.IllegalStateException: 在视图类 android 的 onClick 处理程序的活动类 com.dillonregi.spamsms.Main 中找不到方法 sms(View)。带有 id 'psend' 的 widget.Button 07-14 19:32:39.752: E/AndroidRuntime(16712): at android.view.View$1.onClick(View.java:2143) 07-14 19:32:39.752: E /AndroidRuntime(16712): 在 android.view.View.performClick(View.java:2497) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 android.view.View$PerformClick.run(View. java:9120) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 android.os.Handler.handleCallback(Handler.java:587) 07-14 19:32:39.752:E/AndroidRuntime(16712): 在 android.os.Handler.dispatchMessage(Handler.java:92) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 android.os.Looper.loop(Looper.java :130) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 android.app.ActivityThread.main(ActivityThread.java:3701) 07-14 19:32:39.752: E/AndroidRuntime(16712):在 java.lang.reflect.Method.invokeNative(Native Method) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 java.lang.reflect.Method.invoke(Method.java:507) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:895) 07-14 19:32:39.752: E/AndroidRuntime(16712):在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:653) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 dalvik.system.NativeStart.main(Native Method) 07-14 19:32:39.752:E/AndroidRuntime(16712): 引起: java.lang.NoSuchMethodException: sms 07-14 19:32:39.752: E/AndroidRuntime(16712): at java.lang.ClassCache.findMethodByName(ClassCache.java:247) 07- 14 19:32:39.752: E/AndroidRuntime(16712): 在 java.lang.Class.getMethod(Class.java:962) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 android.view。 View$1.onClick(View.java:2136) 07-14 19:32:39.752: E/AndroidRuntime(16712): ... 11 更多 07-14 19:32:39.752: E/AndroidRuntime(16712): [蓝色错误处理程序] 为 main 07-14 19:32:39.752 制作调试报告文件：E/AndroidRuntime(16712)：java.lang.IllegalStateException：在活动类 com.dillonregi.spamsms 中找不到方法 sms(View)。主视图类 android.widget.Button 上的 onClick 处理程序，ID 为 'psend' 07-14 19:32:39.752: E/AndroidRuntime(16712): at android.view.View$1。onClick(View.java:2143) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 android.view.View.performClick(View.java:2497) 07-14 19:32:39.752: E/ AndroidRuntime(16712): 在 android.view.View$PerformClick.run(View.java:9120) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 android.os.Handler.handleCallback(Handler.java :587) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 android.os.Handler.dispatchMessage(Handler.java:92) 07-14 19:32:39.752: E/AndroidRuntime(16712):在 android.os.Looper.loop(Looper.java:130) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 android.app.ActivityThread.main(ActivityThread.java:3701) 07-14 19 :32:39.752: E/AndroidRuntime(16712): at java.lang.reflect.Method.invokeNative(Native Method) 07-14 19:32:39.752: E/AndroidRuntime(16712): at java.lang.reflect.Method .invoke(Method.java:507) 07-14 19:32:39。752: E/AndroidRuntime(16712): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:895) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 com.android .internal.os.ZygoteInit.main(ZygoteInit.java:653) 07-14 19:32:39.752: E/AndroidRuntime(16712): at dalvik.system.NativeStart.main(Native Method) 07-14 19:32: 39.752: E/AndroidRuntime(16712): 由: java.lang.NoSuchMethodException: sms 07-14 19:32:39.752: E/AndroidRuntime(16712): at java.lang.ClassCache.findMethodByName(ClassCache.java:247) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 java.lang.Class.getMethod(Class.java:962) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 android. view.View$1.onClick(View.java:2136) 07-14 19:32:39.752: E/AndroidRuntime(16712): ... 11 更多ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:895) 07-14 19:32:39.752: E/AndroidRuntime(16712): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:653) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 dalvik.system.NativeStart.main(Native Method) 07-14 19:32:39.752: E/AndroidRuntime(16712): 由: java.lang.NoSuchMethodException:短信 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 java.lang.ClassCache.findMethodByName(ClassCache.java:247) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 java .lang.Class.getMethod(Class.java:962) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 android.view.View$1.onClick(View.java:2136) 07-14 19: 32:39.752: E/AndroidRuntime(16712): ... 11 更多ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:895) 07-14 19:32:39.752: E/AndroidRuntime(16712): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:653) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 dalvik.system.NativeStart.main(Native Method) 07-14 19:32:39.752: E/AndroidRuntime(16712): 由: java.lang.NoSuchMethodException:短信 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 java.lang.ClassCache.findMethodByName(ClassCache.java:247) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 java .lang.Class.getMethod(Class.java:962) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 android.view.View$1.onClick(View.java:2136) 07-14 19: 32:39.752: E/AndroidRuntime(16712): ... 11 更多main(ZygoteInit.java:653) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 dalvik.system.NativeStart.main(Native Method) 07-14 19:32:39.752: E/AndroidRuntime(16712) ): 引起：java.lang.NoSuchMethodException: sms 07-14 19:32:39.752: E/AndroidRuntime(16712): at java.lang.ClassCache.findMethodByName(ClassCache.java:247) 07-14 19:32: 39.752: E/AndroidRuntime(16712): 在 java.lang.Class.getMethod(Class.java:962) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 android.view.View$1.onClick( View.java:2136) 07-14 19:32:39.752: E/AndroidRuntime(16712): ... 11 更多main(ZygoteInit.java:653) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 dalvik.system.NativeStart.main(Native Method) 07-14 19:32:39.752: E/AndroidRuntime(16712) ): 引起：java.lang.NoSuchMethodException: sms 07-14 19:32:39.752: E/AndroidRuntime(16712): at java.lang.ClassCache.findMethodByName(ClassCache.java:247) 07-14 19:32: 39.752: E/AndroidRuntime(16712): 在 java.lang.Class.getMethod(Class.java:962) 07-14 19:32:39.752: E/AndroidRuntime(16712): 在 android.view.View$1.onClick( View.java:2136) 07-14 19:32:39.752: E/AndroidRuntime(16712): ... 11 更多findMethodByName(ClassCache.java:247) 07-14 19:32:39.752: E/AndroidRuntime(16712): at java.lang.Class.getMethod(Class.java:962) 07-14 19:32:39.752: E/ AndroidRuntime(16712): 在 android.view.View$1.onClick(View.java:2136) 07-14 19:32:39.752: E/AndroidRuntime(16712): ... 11 更多findMethodByName(ClassCache.java:247) 07-14 19:32:39.752: E/AndroidRuntime(16712): at java.lang.Class.getMethod(Class.java:962) 07-14 19:32:39.752: E/ AndroidRuntime(16712): 在 android.view.View$1.onClick(View.java:2136) 07-14 19:32:39.752: E/AndroidRuntime(16712): ... 11 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T00:40:23.057

您的 sms 方法的方法签名是错误的。如果它是在布局文件中分配的，它应该带有一个 View 参数：

```
public void sms(View view) {
    // code to run when button is clicked
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T00:49:21.507

首先，您应该更新您的问题以格式化您的代码。
其次，您尝试在 AsycnTask 的 doInBackground() 中触摸 UI 线程。不要这样做：

```
Toast.makeText(null, "number: " + _number + " message: " + _message + " xtime: " + xtime,    Toast.LENGTH_LONG).show(); 
```

第三，尝试像这样声明 sms 方法：

```
public void sms(View view) {
    //your code goes here  
} 
```

最后，您创建了新的 AsyncTask，但我没有看到您调用了 excute() 方法。尝试调用 excute() 来执行。

**更新**：您可以使用 Handler 制作 Toast 或在 UI 线程中执行某些操作。

```
 //put this Handler in your activity, out site the AsyncTask.(**important**)
 final Handler mHandler = new Handler();

 //Then call it in doInBackground() of AsyncTask to show a Toast.
 protected Long doInBackground(String... params){
     EditText number = (EditText) Main.this.findViewById(R.id.pnumber);
     EditText message = (EditText) Main.this.findViewById(R.id.pmessage);
     EditText hmany = (EditText) Main.this.findViewById(R.id.hmany);
     String _hmany = hmany.getText().toString();
     final String _number = number.getText().toString();
     final String _message = message.getText().toString();
     final int xtime = Integer.parseInt(_hmany);

     //Show a Toast
     mHandler.post(new Runnable() {
       public void run() {
       Toast.makeText(null, "number: " + _number + " message: " + _message + " xtime: " + xtime, Toast.LENGTH_LONG).show(); 
       }
     );
 } 
```

但我建议您阅读[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)和[Handler](http://developer.android.com/reference/android/os/Handler.html)文档以了解如何使用它们。

# java - 同时有多个亚型？

> ID：11488302
> 
> 赞同：0
> 
> 时间：2012-07-14T23:55:36.793
> 
> 标签：java, generics

在 Java 泛型中是否可以同时存储多个子类型？

当你声明你的容器时，我的印象是，泛型参数必须是具体的（而不是接口或抽象超类），所以这只留下使用非抽象超类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T00:08:08.803

抽象超类是允许的。

假设 Shape 是抽象的并且 Rectangle 和 Circle 扩展它；以下代码将编译。

```
List<Shape> shapeList = new ArrayList<Shape>();
Rectangle r = new Rectangle();
Circle c = new Circle();
shapeList.add(r);
shapeList.add(c);

for (int i=0;i<shapeList.size();i++){
    shapeList.get(i).draw();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T00:11:52.907

我想这个代码示例将向您展示有关泛型的基础知识：

```
abstract class A {
    protected String s;
    //getters and setters...
}

class B extends A {
    public B() { s = "I'm B object"; }
}

class C extends A {
    public C() { s = "I'm C object"; }
}

public class Main {

    public static void main(String[] args) {
        List<A> listA = new ArrayList<A>();
        listA.add(new B());
        listA.add(new C());
        List<B> listB = new ArrayList<B>();
        listB.add(new B());
        listB.add(new C()); //compile error: datatype mismatch

        printListA(listA);
        printListA(listB); //compile error: datatype mismatch
        printListAExtended(listA); //this compiles and executes right
        printListAExtended(listB); //this compiles and executes right
    }

    //this method must receive a List<A> object
    public static void printListA(List<A> listA) {
        for(A a : listA) {
            System.out.println(a.getS());
        }
    }

    //this method must receive a List<A or some class that implements A> object
    //that's why List<A>, List<B> or List<C> or any other List<anything implementing A>
    //can be passed here
    public static void printListAExtended(List<? extends A> listA) {
        for(A a : listA) {
            System.out.println(a.getS());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T08:01:41.020

> 当你声明你的容器时，我的印象是，泛型参数必须是具体的（而不是接口或抽象超类），所以这只留下使用非抽象超类？

你不正确。类型参数中的类型可以是任何引用类型。它可以是一个类、一个接口、一个抽象类、一个数组类型，*等等*。它甚至可以是一个类型变量，即你甚至不知道它是什么类型。它也可能是上述类型的交集。

# c - 使用 C 中的函数进行输入验证

> ID：11488304
> 
> 赞同：0
> 
> 时间：2012-07-14T23:56:29.800
> 
> 标签：c, validation

我正在通过函数验证用户输入。

这是我的代码：

```
#include <stdio.h>

void get_income(double *pschool, double *pincome);
double get_double(void);

main()
{
    get_income(&pschool, pincome);
}

void get_income(double *pschool, double *pincome) {
    int tuition, supplies;

    printf("Enter tuition:");
    scanf("%d", &tuition);
    printf("Enter supplies:")
    scanf("%d", &supplies);

    *pSchool = tuition + supplies;
    return;
}

double get_double(void) {
    // validation code should go in here 
} 
```

我需要验证用户提供的值，`tuition`并`supplies`确保它们都是 0 或更大且不为空。不应接受负值或数字以外的任何内容。

验证代码应该在`get_double`函数中，我似乎无法弄清楚如何验证驻留在单独函数中的内容。请寻求指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T00:21:49.013

对我来说，听起来 get_double() 的目的是处理用户输入。所以这就是我要做的：

```
#include <stdio.h>

int get_double(double *in)
{
    scanf("%d", in);
    if (*in < 0) {
        printf("error message");
        return 1;
    }
    return 0;
}

void get_income(double ptuition, double psupplies, double *pschool)
{
    *pschool = ptuition + psupplies;
}

int main(void)
{
    double ptuition, psupplies, pschool;

    printf("Enter tuition: ");
    if (get_double(&ptuition)) {
        return 1;
    }

    printf("\nEnter supplies: ");
    if (get_double(&psupplies)) {
        return 1;
    }

    get_income(ptuition, psupplies, &pschool);
    printf("Total school cost: %f", pschool);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T01:29:38.010

代码有很多问题，包括：

*   不检查`scanf()`函数查找数据
*   不正确的声明`main()`
*   将未使用的指针传递给`get_income()`
*   不从检查功能返回状态
*   不报告输入的数据
*   不声明变量`main()`
*   函数名称不匹配目的
*   读取整数以存储在浮点数中
*   等等

`sscanf()`与“让`scanf()`读取数据”相比，“读取一行并用”解析它可能会做得更好；更容易处理错误报告。

这些观察导致：

```
#include <stdio.h>

int get_tuition_and_supplies(double *ptuition, double *psupplies);
int get_double(double *pvalue);

int main(void)
{
    double tuition, supplies;
    if (get_tuition_and_supplies(&tuition, &supplies) == 0)
        printf("Tuition: %.2f; supplies %.2f\n", tuition, supplies);
    return(0);
}

int get_tuition_and_supplies(double *ptuition, double *psupplies)
{
    int rc = -1;    // Failure
    printf("Enter tuition: ");
    if (get_double(ptuition) == 0)
    {
        printf("Enter supplies: ");
        if (get_double(psupplies) == 0)
            rc = 0;
    }
    return rc;
}

int get_double(double *pvalue)
{
    char buffer[4096];
    int rc = -1;
    if (fgets(buffer, sizeof(buffer), stdin) == 0)
        fprintf(stderr, "EOF (or error) reading data\n");
    else if (sscanf(buffer, "%lf", pvalue) != 1)
        fprintf(stderr, "Did not find a number in input (%.32s)\n", buffer);
    /* Could check for no extracharacters (blanks allowed) up to newline */
    else if (*pvalue < 0.0)
        fprintf(stderr, "Value (%g) may not be negative\n", *pvalue);
    else
        rc = 0;
    return rc;
} 
```

“设置返回码 () 到失败，直到证明成功”的习惯用法`rc`是处理验证的一种有效技术。在`get_double()`函数中包含提示可能会更好，以便其签名变为：

```
int get_double(const char *prompt, double *pvalue); 
```

这使您可以将代码简化`get_tuition_and_supplies()`为：

```
int rc = -1;    // Failure
if (get_double("Enter tuition: ", ptuition) == 0 &&
    get_double("Enter supplies: ", psupplies) == 0)
    rc = 0;
return rc; 
```

这巧妙地扩展到处理多个值，而不仅仅是两个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T01:11:34.313

对我来说，我真的不喜欢`scanf`因为[这个](https://stackoverflow.com/questions/1252132/difference-between-scanf-and-fgets)而使用. 以下是我将如何解决您的问题：

1.  分配字符数组。充当将写入输入的缓冲区。尺寸一般需要体现用途。也就是说，如果我只收到一个不大于`1000`（整数类型）的数字，那么我只会分配 6 个字符。最后两个用于`'\n'`and `'\0'`。
2.  初始化数组中最后一个元素之前的元素`'\n'`以检测溢出。
3.  使用`fegts()`函数接收输入。
4.  通过检查我初始化的最后一个元素之前的元素`'\n'`是否发生变化来检查溢出。如果是，我报告溢出错误，否则继续执行。
5.  使用`atof()`or`atoi()`函数分别转换为双精度或整数值。

我想知道我的方法是否包含任何类型的错误，但据我所知，它工作正常。

# objective-c - Objective-C 静态常量变量

> ID：11488305
> 
> 赞同：4
> 
> 时间：2012-07-14T23:56:34.987
> 
> 标签：objective-c, static, initialization, constants

我正在尝试使用可以从类外部使用的静态 const 变量创建一个类，但我无法弄清楚如何初始化这个变量。

示例代码：

```
@interface ExampleClass
{
 static const int CONST_VAR;
}

- (id) init;

@end
@implementation ExampleClass

- (id) init {
 CONST_VAR = 1;
}

@end 
```

我希望能够像这样引用静态常量变量：

```
ExampleClass.CONST_VAR; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T23:59:21.343

您应该通过执行以下操作为该静态变量赋值：

```
-(id)init{
    ExampleClass.CONST_VAR = 1;
} 
```

因为这是一个静态变量或“类变量”，所以无论您身在何处，都必须使用类名，这包括来自同一类的内部。

希望这可以帮助。

# java - 在 CUDA 上运行 JVM

> ID：11488312
> 
> 赞同：4
> 
> 时间：2012-07-14T23:58:27.320
> 
> 标签：java, cuda, jvm

我见过使用 Java 来访问`CUDA`api，但是

*   是否有任何实现在 GPU 中运行整个 JVM（可能使用 CUDA API）？
*   或者，会有这样做的计划吗？
*   如果是这样，性能是否足以同时运行客户端或服务器应用程序？
*   最重要的是，哪些问题会使 JVM 无法在 GPU 中运行？

我在这里看到的优势是，我可以购买一个不错的 NVidia GPU，并且能够在 CPU 上不进行太多处理的情况下运行 Java 应用程序，从而节省 CPU 用于其他用途。

但是，如果这不可能，是否有任何方法可以强制 JVM 使用 CUDA 将处理卸载到 GPU，而无需重新编译 Java 应用程序以支持 CUDA？我的意思是喜欢添加`VM arguments`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T06:57:15.677

您遇到的主要问题是 CUDA 旨在多次执行简单的*操作*。例如，它通常在每个核心上运行一种方法。您不能让不同的内核运行不同的代码。这并不意味着某些代码无法优化以在 CUDA 处理器上运行。例如向量操作，但在 GPU 上运行整个 JVM 并不是它的设计目的。

顺便说一句：CUDA 处理器不支持 IO，这是大多数服务器花费大部分时间的地方。例如读取/写入磁盘和网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T09:45:34.457

但是我们可以在 CUDA 中实现类似图遍历的东西，因为可以在多个节点中完成多个遍历。在这里，如果 jvm 支持合并 CUDA，我们可以在可以进行并行处理的单个机器中拥有类似于 map-red 的程序。这对于执行 SPARQL 查询的基于图的数据库来说具有很大的优势

# ruby-on-rails - 如何避免在嵌套的 rails 表单上保存空记录

> ID：11488318
> 
> 赞同：22
> 
> 时间：2012-07-14T23:59:18.397
> 
> 标签：ruby-on-rails, nested-forms

我正在为我的关系使用`nested_form`宝石。`AddressBook`当用户将现有的值空白时`Addr`，我想删除它`Addr`而不是用空白保存`value`

```
class Person < ActiveRecord::Base
  has_many :addrs, dependent: :destroy
  attr_accessible :name, :addrs_attributes
  accepts_nested_attributes_for :addrs, reject_if: :addr_blank, allow_destroy: true

  def addr_blank(a)
    valid? && a[:id].blank? && a[:value].blank? 
  end

class Addr < ActiveRecord::Base
  belongs_to :person
  attr_accessible :kind, :label, :value, :person_id 
```

我的`:reject_if`方法效果很好，但它并没有给我我需要的一切

1.  `valid?`通过验证保留我的空白地址
2.  `a[:id].blank?`当用户空白和现有记录时避免拒绝

现在，`Addr`当用户将`value`. 另外，我通过 RESTful API 公开 Persons 和 Addrs。我看到两种可能的选择：

1.  后处理`params`哈希以添加神奇的`_destroy=1`参数。IOW，模拟按下删除按钮的用户活动。
2.  将其封装在`Addr`模型中，以便有效地将带有空白的更新`value`视为删除。

根据这里的建议是我如何实现它：

**people_controller.rb**

```
def update
  @person = Person.find(params[:id])
  @person.destroy_blank_addrs(params[:person])
  respond_to do |format|
  ... 
```

**人.rb**

```
def destroy_blank_addrs(person_params)
  if valid? && person_params[:addrs_attributes]
    person_params[:addrs_attributes].each do |addr_params_array|
      addr_params= addr_params_array[1] 
      addr_params[:_destroy] = '1' if !addr_params[:id].blank? && addr_params[:value].blank? 
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-07-21T12:55:42.447

```
accepts_nested_attributes_for :addrs, 
  allow_destroy: true, 
  :reject_if => proc { |att| att[:name].blank? && attr[:description].blank? } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-21T13:01:18.257

```
accepts_nested_attributes_for :addrs, 
  allow_destroy: true, 
  reject_if: -> { |attr| [name, description].any? &:blank? } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-19T22:18:51.317

第三种选择是`before_save`在 Person 上添加一个回调，它将删除所有空白地址。这个想法有一些优点，但我可能不会接受。

在您提供的两个选项中，我不会对参数进行后处理。会成功的，但工作量太大。此外，控制器代码会变得有点混乱，我坚信非常纤薄的控制器。

在我看来，最简单的选择是在保存后删除空白地址。您可以添加`Person#remove_blank_addresses()`，然后在成功保存时调用它。您不需要传递参数 - 它可以迭代地址并删除空白地址。它的缺点是创建空地址然后销毁它们，但无论如何你都需要它来更新人。

如果我们谈论的是最干净的解决方案（在我看来），我会引入第三个类来处理所有这些逻辑并让控制器委托给它。控制器很容易单独测试，然后您可以编写一个模型规范来检查所有细节。这是一个多一点的工作，我现在想不出一个好名字（`PersonUpdater`？），但这可能是一个值得思考的想法。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-13T13:23:14.437

```
accepts_nested_attributes_for :addrs, 
  allow_destroy: true, 
  reject_if: :all_blank 
```

# c# - 何时忽略服务器 GC？

> ID：11488324
> 
> 赞同：2
> 
> 时间：2012-07-15T00:00:01.550
> 
> 标签：c#, .net, .net-4.0, garbage-collection

我在有关 .NET 4 GC 的 MSDN 文章中发现了这一点：http: [//msdn.microsoft.com/en-us/library/ee787088.aspx](http://msdn.microsoft.com/en-us/library/ee787088.aspx)

“无论设置如何，工作站垃圾收集始终在**只有一个处理器**的计算机上使用。如果指定服务器垃圾收集，CLR 将使用禁用并发的工作站垃圾收集。”

我认为它们的意思是一个物理 CPU。但是，我在具有一个 CPU 但 8 个 HT 逻辑处理器的服务器上以服务器 GC 模式运行我的应用程序（或者至少我认为我这样做了）......

以下代码输出“真”

```
 System.Runtime.GCSettings.IsServerGC 
```

所以我不明白 - 以下代码打印了不正确的信息，或者它们意味着一个没有 HT 的单核 CPU ......

任何人都可以明确地解释它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:05:35.947

似乎“一个处理器”是指单核无超线程CPU。

# c# - 是否曾为 C# 考虑过方法级联？

> ID：11488326
> 
> 赞同：0
> 
> 时间：2012-07-15T00:00:32.077
> 
> 标签：c#

Smalltalk 支持一种称为“消息级联”的语法功能。[Dart 编程语言](http://www.dartlang.org/)[正在采用](http://www.dartlang.org/articles/m1-language-changes/#cascades)级联。

据我所知，C# 不支持这一点。在设计语言的过程中是否考虑过它们？可以想象它们会出现在该语言的未来版本中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T00:08:57.890

在 VB.Net 中，有`with`一个我认为用于此目的的关键字（如果我错了，请纠正我），但是在 C# 中，他们认为它通常会损害可读性并将其忽略（在我看来很好）。

可以在以下链接中找到一些简短的详细信息，但是指向 microsoft 页面的链接不再有效：

[http://blogs.msdn.com/b/csharpfaq/archive/2004/03/11/why-doesn-tc-have-vb-net-s-with-operator.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/11/why-doesn-t-c-have-vb-net-s-with-operator.aspx)

注意：如果有人存档了以下链接，我很乐意阅读它（因为链接不起作用）：

[http://msdn.microsoft.com/vcsharp/team/language/ask/withstatement/default.aspx](http://msdn.microsoft.com/vcsharp/team/language/ask/withstatement/default.aspx)

# python - 在 Parallel Python 中使用回调更新数据库

> ID：11488328
> 
> 赞同：1
> 
> 时间：2012-07-15T00:01:21.527
> 
> 标签：python, sqlalchemy, parallel-python

我正在尝试对使用 SQLAlchemy 访问的 SQlite 数据库中的大约 200,000 个条目进行一些文本处理。我想将它并行化（我正在查看 Parallel Python），但我不确定该怎么做。

我想在每次处理条目时提交会话，这样如果我需要停止脚本，我就不会丢失它已经完成的工作。但是，当我尝试将 session.commit() 命令传递给回调函数时，它似乎不起作用。

```
from assignDB import *
from sqlalchemy.orm import sessionmaker
import pp, sys, fuzzy_substring

def matchIng(rawIng, ingreds):
maxScore = 0
choice = ""
for (ingred, parentIng) in ingreds.iteritems():
    score = len(ingred)/(fuzzy_substring(ingred,rawIng)+1)
    if score > maxScore:
        maxScore = score
        choice = ingred
        refIng = parentIng  
return (refIng, choice, maxScore)

def callbackFunc(match, session, inputTuple):
    print inputTuple
    match.refIng_id = inputTuple[0]
    match.refIng_name = inputTuple[1]
    match.matchScore = inputTuple[2]
    session.commit()

# tuple of all parallel python servers to connect with
ppservers = ()
#ppservers = ("10.0.0.1",)

if len(sys.argv) > 1:
    ncpus = int(sys.argv[1])
    # Creates jobserver with ncpus workers
    job_server = pp.Server(ncpus, ppservers=ppservers)
else:
    # Creates jobserver with automatically detected number of workers
    job_server = pp.Server(ppservers=ppservers)

print "Starting pp with", job_server.get_ncpus(), "workers"

ingreds = {}
for synonym, parentIng in session.query(IngSyn.synonym, IngSyn.parentIng): 
    ingreds[synonym] = parentIng

jobs = []
for match in session.query(Ingredient).filter(Ingredient.refIng_id == None):
    rawIng = match.ingredient
    jobs.append((match, job_server.submit(matchIng,(rawIng,ingreds),    (fuzzy_substring,),callback=callbackFunc,callbackargs=(match,session)))) 
```

会话是从 导入的`assignDB`。我没有收到任何错误，只是没有更新数据库。

谢谢你的帮助。

**更新** 这是模糊子字符串的代码

```
def fuzzy_substring(needle, haystack):
    """Calculates the fuzzy match of needle in haystack,
    using a modified version of the Levenshtein distance
    algorithm.
    The function is modified from the levenshtein function
    in the bktree module by Adam Hupp"""
    m, n = len(needle), len(haystack)

    # base cases
    if m == 1:
        return not needle in haystack
    if not n:
        return m

    row1 = [0] * (n+1)
    for i in range(0,m):
        row2 = [i+1]
        for j in range(0,n):
            cost = ( needle[i] != haystack[j] )

            row2.append( min(row1[j+1]+1, # deletion
                               row2[j]+1, #insertion
                               row1[j]+cost) #substitution
                           )
        row1 = row2
    return min(row1) 
```

我从这里得到的：[Fuzzy Substring](http://ginstrom.com/scribbles/2007/12/01/fuzzy-substring-matching-with-levenshtein-distance-in-python/)。就我而言，“needle”是大约 8000 种可能的选择之一，而 haystack 是我要匹配的原始字符串。我遍历所有可能的“针”并选择得分最高的一根。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T10:05:26.320

在不查看您的特定代码的情况下，可以公平地说：

1.  使用无服务器 SQLite 和
2.  通过并行寻求提高写入性能

是互不相容的欲望。引用[SQLite 常见问题解答](http://www.sqlite.org/faq.html#q5)：

> … 但是，客户端/服务器数据库引擎（例如 PostgreSQL、MySQL 或 Oracle）通常支持更高级别的并发性，并允许多个进程同时写入同一个数据库。这在客户端/服务器数据库中是可能的，因为始终有一个受良好控制的服务器进程可用于协调访问。如果您的应用程序需要大量并发，那么您应该考虑使用客户端/服务器数据库。但经验表明，大多数应用程序需要的并发性远低于其设计者的想象。…</p>

即使没有 SQLAlchemy 使用的任何门控和排序。Parallel Python 作业何时完成（如果有的话）也完全不清楚。

*我的建议：先*让它正常工作，然后再寻找优化。尤其是当`pp`秘制酱汁可能根本不会给你买太多东西时，即使它工作得很好。

**添加以回应评论**：

如果`fuzzy_substring`匹配是瓶颈，它似乎与数据库访问完全分离，您应该牢记这一点。在没有看到`fuzzy_substring`正在做什么的情况下，一个好的*开始*假设是您可以进行算法改进，这可能使单线程编程在计算上可行。[近似字符串匹配](http://en.wikipedia.org/wiki/Approximate_string_matching)是一个经过深入研究的问题，选择正确的算法通常比“投入更多的处理器”要好得多。

从这个意义上说，更好的是你有更干净的代码，不要浪费分割和重组问题的开销，最后有一个更可扩展和可调试的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:49:27.583

@msw 提供[了一个很好的问题概述](https://stackoverflow.com/a/11491056/696793)，提供了一种考虑并行化的一般方法。

尽管有这些评论，但这是我最终要做的工作：

```
from assignDB import *
from sqlalchemy.orm import sessionmaker
import pp, sys, fuzzy_substring  

def matchIng(rawIng, ingreds):
    maxScore = 0
    choice = ""
    for (ingred, parentIng) in ingreds.iteritems():
        score = len(ingred)/(fuzzy_substring(ingred,rawIng)+1)
        if score > maxScore:
            maxScore = score
            choice = ingred
            refIng = parentIng  
    return (refIng, choice, maxScore)

# tuple of all parallel python servers to connect with
ppservers = ()
#ppservers = ("10.0.0.1",)

if len(sys.argv) > 1:
    ncpus = int(sys.argv[1])
    # Creates jobserver with ncpus workers
    job_server = pp.Server(ncpus, ppservers=ppservers)
else:
    # Creates jobserver with automatically detected number of workers
    job_server = pp.Server(ppservers=ppservers)

print "Starting pp with", job_server.get_ncpus(), "workers"

ingreds = {}
for synonym, parentIng in session.query(IngSyn.synonym, IngSyn.parentIng): 
    ingreds[synonym] = parentIng

rawIngredients = session.query(Ingredient).filter(Ingredient.refIng_id == None)
numIngredients = session.query(Ingredient).filter(Ingredient.refIng_id == None).count()
stepSize = 30

for i in range(0, numIngredients, stepSize):
    print i
    print numIngredients

    if i + stepSize > numIngredients:
        stop = numIngredients
    else:
        stop = i + stepSize

    jobs = []
    for match in rawIngredients[i:stop]:
        rawIng = match.ingredient
        jobs.append((match, job_server.submit(matchIng,(rawIng,ingreds),    (fuzzy_substring,))))

    job_server.wait()

    for match, job in jobs:
        inputTuple = job()
        print match.ingredient
        print inputTuple
        match.refIng_id = inputTuple[0]
        match.refIng_name = inputTuple[1]
        match.matchScore = inputTuple[2]
    session.commit() 
```

本质上，我已经把问题分成了几块。并行匹配 30 个子字符串后，将结果返回并提交到数据库。我有点随意地选择了 30，所以优化这个数字可能会有所收获。它似乎已经加快了一点，因为我现在正在使用处理器中的所有 3(!) 个内核。

# c# - 我在 C# 中遇到 SMTP 身份验证问题

> ID：11488333
> 
> 赞同：0
> 
> 时间：2012-07-15T00:02:17.433
> 
> 标签：c#, smtp

我有一个 MVC 3 应用程序，我在新的托管服务提供商上尝试的所有内容最终都会引发此异常：

**“/”应用程序中的服务器错误。信箱不可用。服务器响应是：中继需要身份验证**

我尝试使用来自

[如何使 SMTP 在 C# 中进行身份验证](https://stackoverflow.com/questions/298363/how-can-i-make-smtp-authenticated-in-c-sharp)

有很多赞成票，但我仍然得到例外。

我的主机有让我创建邮件帐户的典型面板。我不确定是否要创建 NetworkCredentials，我应该使用什么作为用户名和密码？我一直在使用的是电子邮件地址和电子邮件帐户的密码。

这是我的代码：

```
public static void sendMail(Joiner request) {
  SmtpClient smtpClient = new SmtpClient();
  NetworkCredential basicCredential =
      new NetworkCredential("garbage@stopthedumpcoalition.org", "REDACTED");
  MailMessage message = new MailMessage();
  MailAddress fromAddress = new MailAddress("garbage@stopthedumpcoalition.org");

  smtpClient.Host = "mail.stopthedumpcoalition.org";
  smtpClient.UseDefaultCredentials = false;
  smtpClient.Credentials = basicCredential;

  message.From = fromAddress;
  message.Subject = "Join the Coalition request from - " + request.FirstName + " " + request.LastName;
  //Set IsBodyHtml to true means you can send HTML email.
  message.IsBodyHtml = true;
  message.Body = "Name: " + request.FirstName + " " + request.LastName + "<br>"
        + "EMail: " + request.Email + "<br>"
        + "Wants to Volunteer: " + request.Volunteer.ToString() + "<br>"
        + "Organization: " + request.Organization + "<br>"
        + "Wants to become a Partner: " + request.Partner.ToString() + "<br>"
        + "Comments: " + request.Comments;
  message.To.Add("nivram509@gmail.com");

  smtpClient.Send(message);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:10:18.163

谢谢萨尼。它甚至比那更愚蠢。My Site Host 的 web 面板有两个用于更改密码的文本框，II 都填写并点击保存。

它还有一个“更改密码”复选框，我从未注意到它。

所以我输入了错误的密码。代码很好。:)

# variables - Lua 调用一个 nil 值

> ID：11488334
> 
> 赞同：-2
> 
> 时间：2012-07-15T00:02:22.067
> 
> 标签：variables, lua, null, computercraft

这是在我的世界中，所以有些代码可能没有意义。

运行时它说第 77 行正在调用一个 nil 值

[http://pastebin.com/RqWDpVqD](http://pastebin.com/RqWDpVqD)

（对不起pastebin，但这里的代码相当大）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T00:48:40.877

我在任何地方都看不到你需要一个实现“http”表/用户数据的文件，而且你永远不会在 getHttpBody() 的范围之外声明 http，所以 http 是一个 nil 值。因此，您尝试在尚未定义的变量 http 上调用函数 request()。

看起来您只是忘记了需要必要的文件。

# jsf - 查看使用我的自定义 facelet-taglib 的页面时出现 FileNotFound 异常

> ID：11488335
> 
> 赞同：1
> 
> 时间：2012-07-15T00:02:36.870
> 
> 标签：jsf, richfaces, taglib

## 这是我的上下文：

*   我使用 Netbeans 作为 IDE
*   我的测试 web 应用程序中的richfaces 4。
*   玻璃鱼 3.1.2

## 这是我的详细问题：

*   我有一个菜单栏，希望能够在其他几个页面中重复使用。
*   我相信这就是 facelet-taglibs 的用途，所以我想创建一个。

## 这是我所做的：

*   创建了包含我的菜单的文件：menu.xhtml

> ```
> <?xml version='1.0' encoding='UTF-8' ?>
> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
> <html xmlns="http://www.w3.org/1999/xhtml"
>       xmlns:h="http://java.sun.com/jsf/html"
>       xmlns:f="http://java.sun.com/jsf/core"
>       xmlns:rich="http://richfaces.org/rich"
>       xmlns:ui="http://java.sun.com/jsf/facelets">
>     <h:body>
>         <ui:composition id="PAC-MENU">
>             <rich:toolbar width="50%">
>                 <rich:dropDownMenu>
>                 <f:facet name="label"> 
>                     <h:panelGroup>
>                         <h:graphicImage value="./images/icons/create_doc.gif" styleClass="pic"/>
>                         <h:outputText value="Declaration"/>
>                     </h:panelGroup>
>                 </f:facet>
> 
>                 <rich:menuItem label="Upload" icon="${facesContext.externalContext.requestContextPath}/images/icons/create_doc.gif" action="/pages/uploadDeclarationBatch"/>
>                 </rich:dropDownMenu>
>                 <rich:toolbarGroup location="right">
>                     <rich:dropDownMenu label="Profile" direction="bottomLeft" jointPoint="bottomRight">
>                         <rich:menuItem label="Update" action="/pages/updateProfile"/>
>                         <rich:menuItem label="Change password" action="/pages/changePassword"/>
>                     </rich:dropDownMenu>
>                 </rich:toolbarGroup>
>             </rich:toolbar>
>         </ui:composition>
>     </h:body>
> </html> 
> ```

*   创建了 taglib 文件：pac-taglibs.xhtml

    > ```
    > <?xml version='1.0'?>
    > <!DOCTYPE facelet-taglib PUBLIC
    >   "-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN"
    >   "http://java.sun.com/dtd/facelet-taglib_1_0.dtd">
    > 
    > <facelet-taglib version="2.0">
    >     <namespace>http://www.myproduct.com/jsf</namespace>
    >     <tag>
    >         <tag-name>pac-menu</tag-name> 
    >         <source>/resources/tags/menu.xhtml</source>
    >     </tag>
    > </facelet-taglib> 
    > ```

*   修改了 web.xml y 添加这个：web.xml

    > ```
    > <context-param>
    >      <param-name>javax.faces.FACELETS_LIBRARIES</param-name> 
    >      <param-value>/resources/taglibs/pac-taglibs.xhtml</param-value>
    > </context-param> 
    > ```

*   在我的页面中引用了我的 taglib 并使用这样的标签：home.xhtml

    > ```
    > <?xml version='1.0' encoding='UTF-8' ?>
    > <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    > <html xmlns="http://www.w3.org/1999/xhtml"
    >       xmlns:h="http://java.sun.com/jsf/html"
    >       xmlns:f="http://java.sun.com/jsf/core"
    >       xmlns:a4j="http://richfaces.org/a4j"
    >       xmlns:rich="http://richfaces.org/rich"
    >       xmlns:a3c="http://www.myproduct.com/jsf">
    >     <h:head>
    >         <link rel="stylesheet" type="text/css" ref="${facesContext.externalContext.requestContextPath}/resources/css/styles.css"/>
    >         <title>My Product V1.0 Beta</title>
    >     </h:head>
    >     <h:body styleClass="backGroundimage">
    >         <center>
    >             <h:form>
    >                 <h:outputText id="outtxt" styleClass="h1" value="Welcome ${pAC_USER.name}"/><BR/><BR/>
    >                 <a3c:pac-menu/>
    >             </h:form>
    >         </center>
    >     </h:body>
    > </html> 
    > ```

*   这是目录结构：

> ```
> WebContent
>    |
>    ---> META-INF
>    |
>    ---> WEB-INF
>    |
>    ---> resources
>    |      |
>    |      ---> css
>    |      |
>    |      ---> taglibs
>    |      |      |
>    |      |      ---> pac-taglibs.xhtml
>    |      |      
>    |      ---> tags
>    |      |      |
>    |      |      ---> menu.xhtml
>    |     
>    ---> index.xhtml 
> ```

每次我尝试访问我的页面时，我都会收到以下错误消息：

> ```
> java.io.FileNotFoundException
>   at org.apache.naming.resources.DirContextURLConnection.getInputStream(DirContextURLConnection.java:403)
>   at com.sun.faces.facelets.impl.DefaultFaceletCache._getLastModified(DefaultFaceletCache.java:172)
>   at com.sun.faces.facelets.impl.DefaultFaceletCache.access$000(DefaultFaceletCache.java:62)
>   at com.sun.faces.facelets.impl.DefaultFaceletCache$1.newInstance(DefaultFaceletCache.java:82)
>   at com.sun.faces.facelets.impl.DefaultFaceletCache$1.newInstance(DefaultFaceletCache.java:78)
>   at com.sun.faces.util.ExpiringConcurrentCache$1.call(ExpiringConcurrentCache.java:99)
>   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
>   at java.util.concurrent.FutureTask.run(FutureTask.java:138)
>   at com.sun.faces.util.ExpiringConcurrentCache.get(ExpiringConcurrentCache.java:114)
>   at com.sun.faces.facelets.impl.DefaultFaceletCache.getFacelet(DefaultFaceletCache.java:121)
>   at com.sun.faces.facelets.impl.DefaultFaceletCache.getFacelet(DefaultFaceletCache.java:62)
>   at com.sun.faces.facelets.impl.DefaultFaceletFactory.getFacelet(DefaultFaceletFactory.java:256)
>   at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:366)
>   at com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:326)
>   at com.sun.faces.facelets.tag.UserTagHandler.apply(UserTagHandler.java:142)
>   at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
>   at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
>   at org.richfaces.view.facelets.html.BehaviorsAddingComponentHandlerWrapper.applyNextHandler(BehaviorsAddingComponentHandlerWrapper.java:53)
>   at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
>   at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
>   at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
>   at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:137)
>   at org.richfaces.view.facelets.html.BehaviorsAddingComponentHandlerWrapper.applyNextHandler(BehaviorsAddingComponentHandlerWrapper.java:53)
>   at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:184)
>   at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:120)
>   at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
>   at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
>   at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:98)
>   at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
>   at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152)
>   at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:774)
>   at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
>   at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
>   at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
>   at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
>   at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
>   at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
>   at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
>   at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
>   at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
>   at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
>   at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
>   at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
>   at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
>   at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
>   at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
>   at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
>   at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
>   at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
>   at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
>   at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
>   at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
>   at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
>   at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
>   at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
>   at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
>   at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
>   at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
>   at java.lang.Thread.run(Thread.java:662) 
> ```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T10:07:03.233

我通过更改在标签库中引用标签文件的方式来解决这个问题。

首先，我发现使用 tomcat7 而不是 glassfish 导致问题的文件，由于某种原因，它没有给出文件的名称。

然后在 pac-taglib.xhtml 我改变了：

> `<source>/resources/tags/menu.xhtml</source>`

和

> `<source>../tags/menu.xhtml</source>`

但是，如果有人知道如何引用相对 ref 以外的标签，我会很高兴知道。再次感谢那些花时间搜索的人。仍然欢迎任何其他信息。

# ruby-on-rails - 在nested_form_for 中，带有单选按钮的link_to_add 未发送有关所选项目的足够信息

> ID：11488337
> 
> 赞同：1
> 
> 时间：2012-07-15T00:02:57.123
> 
> 标签：ruby-on-rails, nested-forms, nested-form-for

我正在使用 Ryan Bates 的nested_form 代码，并且在带有单选按钮字段的嵌套表单中遇到问题（该字段是集合中的一个布尔值，其中只有一个成员应该为真）。

我在 nested_form_for 中呈现单选按钮的代码是：

```
<%= radio_button_tag "correct_distractor", d.object.id, d.object.correct %> 
```

（如果我使用通常的 form_for 语法并在 nested_form_for 对象上调用 radio_button ，则单选按钮的行为不像单选按钮，因为选中不会取消选中其他按钮）

现在通常当用户单击其中一个单选按钮来更改所选项目时，新项目的 id 会在参数中发送，所以很好（在控制器的更新方法中进行了一些有点难看的解析之后）。但是...在运行时使用 link_to_add 添加的新项目上，没有要发送的 id，所以发送的只是：

```
"correct_distractor" => "on" 
```

那么当集合中只有一个元素应该打开值时，有人可以向我解释以嵌套形式实现单选按钮的正确方法吗？

# authentication - IBM Websphere Portal 中的认证

> ID：11488342
> 
> 赞同：0
> 
> 时间：2012-07-15T00:03:50.687
> 
> 标签：authentication, websphere-portal, tivoli

我参与了一个到 IBM Websphere Portal (IBM WP) 平台的 Java Web 应用程序迁移项目。

生产环境中的实际应用程序根据存储数据的数据库表手动验证用户凭据（用户名和密码）。我了解门户应用程序背后的想法是门户容器处理此安全问题，但我不确定 IBM WP 如何使用现在在数据库上的凭据。

公司有一个全新的 Tivoli Directory Server，我知道我无法将 IBM WP 连接到这个 LDAP 服务器，所以我需要将数据库中的每个用户迁移到这个 LDAP 服务器，还是有一种方法可以Tivoli 识别数据库上的凭证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:44:38.987

信任关联拦截器很强大，但它们完全覆盖了 Websphere 身份验证机制，所以一定要写一个相当健壮的！正如 Carlos Gavidia 建议的那样，我还想看看自定义用户注册表。我还建议考虑属性扩展存储库（也称为 Lookaside），因此您可以定义自己的属性并直接从 Portal API 读取/写入它们

[http://www-01.ibm.com/support/docview.wss?uid=swg21248674](http://www-01.ibm.com/support/docview.wss?uid=swg21248674)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T21:27:30.560

您可以使用[Trust Association Interceptor](http://www.ibm.com/developerworks/websphere/techjournal/0508_benantar/0508_benantar.html)挂接您需要的任何类型的自定义身份验证。您的自定义身份验证器可能很像您现有系统中的身份验证代码。它将显示一个页面，提示用户输入他们的凭据，然后根据数据库检查它们。

我不确定这与您的 Tivoli LDAP 有何关系，但似乎为 TAM 集成提供了 TAI：[Tivoli Access Manager Trust Association Interceptor (TAI++)](http://www.ibm.com/developerworks/websphere/techjournal/0508_benantar/0508_benantar.html)

# objective-c - 解析 XML CDATA 块

> ID：11488344
> 
> 赞同：5
> 
> 时间：2012-07-15T00:03:59.477
> 
> 标签：objective-c, xml, parsing, nsxmlparser, cdata

我正在尝试从网站 librarything.com 解析 XML 文件（使用 NSXMLParser）。这是我解析过的第一个文件，但在大多数情况下，它看起来相当简单。尝试解析 CDATA 块时出现我的问题；方法 parser:foundCDATA: 没有被调用，我不明白为什么。我知道我的解析器设置正确，因为 parser:foundCharacters: 方法工作正常。我试图解析的 XML 数据看起来像这样[http://www.librarything.com/services/rest/1.1/?method=librarything.ck.getwork&isbn=030788743X&apikey=d231aa37c9b4f5d304a60a3d0ad1dad4](http://www.librarything.com/services/rest/1.1/?method=librarything.ck.getwork&isbn=030788743X&apikey=d231aa37c9b4f5d304a60a3d0ad1dad4)并且 CDATA 块出现在具有属性的元素内名称“描述”。

关于为什么不调用该方法的任何帮助将不胜感激！

编辑：我在描述 CDATA 块上运行 parser:foundCharacters: 方法，它返回“<”。我假设这意味着解析器没有正确看到 CDATA 标记。我有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:50:19.703

似乎`<fact>`标签中的 CDATA 内容正在通过`parser:foundCharacters`. 在符合 NSXMLParserDelegate 的类中，尝试通过将 CDATA 附加到 NSMutableString 实例来构建 CDATA，如下所示：

（注意：这里 _currentElement 是一个 NSString 属性，_factString 是一个 NSMutableString 属性）

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict {    
    self.currentElement = elementName;
    if ([_currentElement isEqualToString:@"fact"]) {
        // Make a new mutable string to store the fact string
        self.factString = [NSMutableString string];
    }

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    if ([elementName isEqualToString:@"fact"]) {
        // If fact string starts with CDATA tags then just get the CDATA without the tags
        NSString *prefix = @"<![CDATA[";
        if ([_factString hasPrefix:prefix]) {
            NSString *cdataString = [_factString substringWithRange:NSMakeRange((prefix.length+1), _factString.length - 3 -(prefix.length+1))];
            // Do stuff with CDATA here...
            NSLog(@"%@", cdataString);
            // No longer need the fact string so make a new one ready for next XML CDATA
            self.factString = [NSMutableString string];

        }
    }

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    if ([_currentElement isEqualToString:@"fact"]) {
        // If we are at a fact element, append the string
        // CDATA is returned to this method in more than one go, so build the string up over time
        [_factString appendString:string];
    }

} 
```

# mysql - Select 语句计算一个表中不同条目的总数，具体取决于另一表中的数据

> ID：11488348
> 
> 赞同：0
> 
> 时间：2012-07-15T00:04:41.517
> 
> 标签：mysql, database

我有两个表：DATA 和 USERS

用户

```
id       sqft       postal       province       city
==========================================================
1          1          Y7R          BC          Vancouver
2          2          Y7R          BC          Vancouver
3          1          L5B          ON          Toronto 
```

和

数据

```
id     uid     power
=======================
1       1       1000
2       2       1300
3       1       1500 
```

表 DATA 中的 uid 与表 USERS 中的 id 匹配

我希望能够计算 DATA 中不同 uid 的数量，`postal code`其中*Y7R*为*1*`sqft`

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T01:17:53.990

Try this one:

```
SELECT COUNT(DISTINCT a.id)
  FROM   USERS a
            INNER JOIN  DATA b 
                ON a.id = b.uid
 WHERE  a.sqft = 1 AND
        a.postal = 'Y7R' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T00:08:29.750

```
SELECT COUNT(id) 
   FROM `DATA` AS `d` 
   INNER JOIN `USERS` AS `u` 
   ON u.id=d.uid 
   WHERE u.postal='Y7R' AND u.sqft=1 
   GROUP BY u.id; 
```

如果您有适当的模式，它们无论如何都应该是不同的，如果是这样，只需删除 group by 子句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T00:09:42.110

```
SELECT COUNT(DISTINCT D.UID) FROM DATA D 
LEFT JOIN USERS U ON D.UID=U.ID 
WHERE U.POSTAL='Y7R' AND U.SQFT=1) 
```

如果您需要不同的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T00:14:02.243

您可以使用此解决方案：

```
SELECT COUNT(DISTINCT a.id)
FROM   USERS a
JOIN   DATA b ON a.id = b.uid
WHERE  a.sqft = 1 AND
       a.postal = 'Y7R' 
```*

# linux - 汇编器浮点运算

> ID：11488350
> 
> 赞同：0
> 
> 时间：2012-07-15T00:05:01.357
> 
> 标签：linux, assembly, floating-point

我在 linux 下使用带有 AT&t 语法的汇编程序。我需要除以和乘以 3 个数字（a，b，c）。该操作可能是 a/b*c，我尝试过使用 idiv 和 imul 指令，但当然这些适用于整数，所以我从它们那里得到完全不准确的结果。我还尝试使用 fidiv 和 fimul istruction 在计算中使用浮点数，但我得到了完全错误的结果。所以可能我在错误的寄存器上进行操作。有人可以给我一个关于如何在 AT&T 下使用 fidiv/fimul 的例子吗？这些指令使用哪些寄存器？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T00:25:20.010

由于 AT&T 是 gas (GNU Assembler) 的输出语法，你不应该想太久。只需用 C 语言编写它并使用 -S 开关生成汇编程序输出。

示例：

如果它在源文件 abc.c 中键入以下程序

```
main(){
    int a = 7;
    int b = 3;
    int c = 2;
    return (double)a/(double)b*(double)c;
} 
```

然后使用编译它`gcc -S abc.c`

我得到以下汇编源代码：

```
.file   "abc.c"
.text
.globl  main
.type   main, @function
main:
.LFB0:
.cfi_startproc
pushq   %rbp
.cfi_def_cfa_offset 16
.cfi_offset 6, -16
movq    %rsp, %rbp
.cfi_def_cfa_register 6
movl    $7, -4(%rbp)
movl    $3, -8(%rbp)
movl    $2, -12(%rbp)
cvtsi2sd    -4(%rbp), %xmm0
cvtsi2sd    -8(%rbp), %xmm1
movapd  %xmm0, %xmm2
divsd   %xmm1, %xmm2
movapd  %xmm2, %xmm1
cvtsi2sd    -12(%rbp), %xmm0
mulsd   %xmm1, %xmm0
cvttsd2si   %xmm0, %eax
popq    %rbp
.cfi_def_cfa 7, 8
ret
.cfi_endproc
.LFE0:
.size   main, .-main
.ident  "GCC: (Debian 4.6.3-1) 4.6.3"
.section    .note.GNU-stack,"",@progbits 
```

它的作用应该很清楚：在堆栈上为 3 个 int 保留空间，在其中存储常量值，将它们转换为双精度（cvtsi2sd），执行除法（注意：您`a/b`按顺序写入`div b, a`，结果进入第二个寄存器）。等等。显而易见的是，编译器不会费心使用旧的 FPU 8087 指令集，因为现在有更简单的方法来执行浮点计算，而无需使用 FPU 堆栈。由于问题没有在目标系统上说明任何内容，因此我将按照编译器的方式执行此类计算。

由于某些人可能仍不清楚（我的回答被否决），我对 gcc 输出进行了一些重新排序（以避免无用的移动）并添加了评论。唯一可能的陷阱是 div 的参数顺序。在哪个寄存器中放置数据并获得结果取决于读者。

```
 .file   "abc.c"
    .text
    .globl  main
    .type   main, @function
    main:
    .LFB0:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6

    # Load integer 7 (variable a), convert it to double
    movl    $7, -4(%rbp)
    cvtsi2sd    -4(%rbp), %xmm0

    # Load integer 3, (variable b) convert it to double
    movl    $3, -8(%rbp)
    cvtsi2sd    -8(%rbp), %xmm1

    # Load integer 2, (variable c) convert it to double
    movl    $2, -12(%rbp)
    cvtsi2sd    -12(%rbp), %xmm2

    #   a / b -> written "div b, a" result goes in a (%xmm0)
    divsd   %xmm1, %xmm0 

    #   b * c -> result goes in c (%xmm2)
    mulsd   %xmm0, %xmm2 

    # convert result back to integer
    cvttsd2si   %xmm2, %eax
    popq    %rbp
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
    .LFE0:
    .size   main, .-main
    .ident  "GCC: (Debian 4.6.3-1) 4.6.3"
    .section    .note.GNU-stack,"",@progbits 
```

在 Linux 上，您可以编译执行并显示结果（截断为 int 并截断为 256，因为它是进程结果）只需执行以下操作：

```
gcc abc.s ; ./a.out ; echo $? 
```

为了使答案更完整，您可以使用旧的 FPU 轻松编写等效程序（它没有设置 FPU 的截断模式，因此您可能会得到 5 而不是 4 它截断到最接近的整数）：

```
 .file   "abc.c"
    .text
    .globl  main
    .type   main, @function
main:
.LFB0:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6

    # Load integer 7 (variable a), convert it to double
    movl    $7, -4(%rbp)

    # Load integer 3, (variable b) convert it to double
    movl    $3, -8(%rbp)

    # Load integer 2, (variable c) convert it to double
    movl    $2, -12(%rbp)

    fild    -12(%rbp)
    fild    -8(%rbp)
    fild    -4(%rbp)

    #   a / b -> written "div b, a" result goes in a (%mm0)
    fdivp   %st(0), %st(1) 

    #   b * c -> result goes in c (%mm2)
    fmulp   %st(0), %st(1) 

    # convert result back to integer
    fist    -4(%rbp)
    movl    -4(%rbp), %eax
    popq    %rbp
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE0:
    .size   main, .-main
    .ident  "GCC: (Debian 4.6.3-1) 4.6.3"
    .section    .note.GNU-stack,"",@progbits 
```

# google-maps-api-3 - 按 ID 参考标记

> ID：11488355
> 
> 赞同：2
> 
> 时间：2012-07-15T00:05:45.280
> 
> 标签：google-maps-api-3

我的地图上有一组标记，正在尝试通过 ajax 调用更新它们的位置... ajax 调用工作正常，我可以循环遍历新值；但是我找不到引用标记的方法（比如通过 ID），所以我可以更新它们的 latLng。

基本上最后我需要.. 1.）通过唯一 id 获取对标记的引用 2.）可能循环遍历所有标记

在此先感谢-我是新手，需要一点帮助才能开始-希望我能在可能的时候传递善意:)

下面的 ajax 代码 - 关于修改标记位置的部分是我不知道该怎么做的部分 - 所以在下面的代码中，我只添加一个新标记，我真的需要更新位置

```
var json = $.getJSON("json/tracking.php",function(data){

        console.log("updated");

        $.each(data,function(key,value){
        //console.log(value.unit + " " + value.lat + " " + value.lng);

        new google.maps.Marker({
        map:map,
        position: new google.maps.LatLng(value.lat,value.lng),
        });

        });
    })
    .success(function(){
        //console.log("success");
        })
    .error(function(){
        //console.log("error");
        })
    .complete(function(){
        //console.log("complete");
    });
},2000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T00:55:07.570

我倾向于在创建对象时将它们存储在对象数组中，并将任何其他信息（例如 id）存储为对象的属性。所以在适当的范围内创建一个标记数组（可能在 json 回调的范围之外）：

```
var markers = [];

var json = ...

  markers.push({
    id: //.. your unique id, or index
    obj: new google.maps.Marker(...
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T01:16:10.360

试试这个方法：我假设你的 JSON 在标记的顺序上是一致的。`newData`假装是新的 JSON 数据，当点击地图（标记外）时，会获取“新数据”。

这是[**演示**](http://jsfiddle.net/yV6xv/167/)

```
function initialize() {
  map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

  var data = [{unit:1, lat:0, lng:0},
              {unit:2, lat:10, lng:0},
              {unit:3, lat:20, lng:0}
             ];

  var newData = [{unit:1, lat:0, lng:10},
                 {unit:2, lat:10, lng:20},
                 {unit:3, lat:20, lng:30}
                ];

  var markers = {};

  $.each(data,function(key,value){
    //console.log(value.unit + " " + value.lat + " " + value.lng);

    markers[key] = markers[key] || new google.maps.Marker({ map: map });
    markers[key].setPosition(new google.maps.LatLng(value.lat,value.lng));
    markers[key].setTitle(value.unit.toString());
  });

  google.maps.event.addListener(map, 'click', function() {
    $.each(newData,function(key,value){
      //console.log(value.unit + " " + value.lat + " " + value.lng);

      markers[key] = markers[key] || new google.maps.Marker({ map: map });
      markers[key].setPosition(new google.maps.LatLng(value.lat,value.lng));
      markers[key].setTitle(value.unit.toString());
    });

  });
} 
```

# c++ - 具有 __stdcall 行为的 __thiscall

> ID：11488358
> 
> 赞同：1
> 
> 时间：2012-07-15T00:06:25.227
> 
> 标签：c++, calling-convention

我正在对旧的 C++ 代码进行逆向工程，但我发现了一些我无法理解如何从普通 C++ 代码中实现的东西。来自 DLL 的函数签名是一个可以恢复为`public: void __thiscall MyClass::MyClass(int)`.

从 MS 文档中，`__thiscall`函数具有`this`使用 ECX 寄存器传递的非静态方法的成员。嗯，这个特殊的函数正确使用了ECX寄存器传递，而且，从反汇编代码来看，第一个参数不是`int`参数，而是指向对象的指针。

这是我从 DLL 公共名称中可以看到的：

```
void __thiscall MyClass::MyClass(int);  
main() {  
  MyClass *pmc;  
  MyClass *pmc2;  
  pmc = new MyClass(pmc2,0);  
} 
```

因此，在这种情况下，构造函数（以及其他方法）似乎被定义为：

```
void __thiscall MyClass:MyClass(MyClass *arg0, int arg1) 
```

有什么想法可以完成这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-22T10:46:43.697

我找到了答案。当函数或方法返回非基本类型时，内存分配在调用方进行，函数（或方法）只需接收指针。

例如

```
ClassB __thiscall functionName(param1) 
```

将被编译为

```
ClassB var1;
ClassB * __thiscall functionName(&var1, param1) 
```

在汇编级别，返回类型地址将最后推入堆栈。如果 functionName 是类方法，ECX 将指向类实例。否则，ECX 将被忽略。

# objective-c - lldb 错误：使用未声明的标识符

> ID：11488361
> 
> 赞同：3
> 
> 时间：2012-07-15T00:07:07.393
> 
> 标签：objective-c, ios, xcode, lldb

任何人都知道这里发生了什么：

```
@implementation Test
{
    NSData *_data;
}

- (id)initWithData:(NSData *)data
{
    self = [super init];
    if (self)
    {
        _data = data;
    } 
    return self;  // BREAKPOINT HERE
} 
```

来自 lldb：

```
(lldb) p data
(NSData *) $1 = 0x07f911e0 30308 bytes
(lldb) p _data
error: use of undeclared identifier '_data'
error: 1 errors parsing expression 
```

为什么我看不到`_data`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-15T04:52:47.683

我只见过在`@interface`块中声明的数据字段；您似乎正在定义`@implementation`.

尝试将其放在标题中，例如

```
@interface Test
{
    NSData *_data;
}
. . .
@end 
```

# magento - 我该如何使用 在 Magento 中用于 system.xml 的文本框？

> ID：11488363
> 
> 赞同：-1
> 
> 时间：2012-07-15T00:07:54.193
> 
> 标签：magento

因为它是用于文本框的，所以我不确定该数组应该如何工作。

**这失败了。**

```
public function getDefault_dailymatches()
{
    return array(
      array('value' => 0, 'label' => Mage::helper()->__('First item')),
      array('value' => 1, 'label' => Mage::helper()->__('Second item')),
      array('value' => 2, 'label' => Mage::helper()->__('third item')),
     // and so on...
    );    
} 
```

**这也失败了。**

```
public function getDefault_dailymatches()
{
    $default = 100;
    return $default;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:48:22.087

我通过搜索`Magento.zip`明显的默认文本框变量自己找到了答案。

将此添加到`config.xml`标签之间`<config></config>`。

```
<default>
    <showdown> <!-- section -->
        <dagroup> <!-- group -->
            <dailymatches>1</dailymatches>
            <maxmatchvotes>100</maxmatchvotes>
            <field>default value</field>
            <!-- <blah><![CDATA[<strong>html tags</strong>]]></blah>
            <blah2><![CDATA[cdata@foremail.addresses]]></blah2> -->
        </dagroup>
    </showdown>        
</default> 
```

# java - Java使用jbutton在卡片之间切换

> ID：11488364
> 
> 赞同：3
> 
> 时间：2012-07-15T00:08:00.753
> 
> 标签：java, swing, cardlayout

我正在使用卡片布局，我想让它让第一张卡片有一个按钮，当点击它时，它将把它带到卡片 2，它有一个按钮可以把它带回卡片 1。这是我当前的代码，和我已经尝试在 actionPerformed 方法中添加一些东西，但我没有成功让它工作。此外，我在 button1.addActionListener(this); 的行上收到关于“this”的语法错误；和 button2.addActionListener(this); 我认为这是因为我的 actionPerformed 方法设置不正确。任何有关设置按钮的帮助将不胜感激。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Main implements ItemListener {

JPanel cards;

public void addComponentToPane(Container pane) {        
    //create cards
    JPanel card1 = new JPanel();
    JPanel card2 = new JPanel();
    JButton button1 = new JButton("Button 1");
    JButton button2 = new JButton("Button 2");
    button1.addActionListener(this);
    button2.addActionListener(this);
    card1.add(button1);
    card2.add(button2);

    //create panel that contains cards
    cards = new JPanel(new CardLayout());
    cards.add(card1);
    cards.add(card2);        
    pane.add(cards, BorderLayout.CENTER);
}

public void itemStateChanged(ItemEvent evt) {
    CardLayout cl = (CardLayout)(cards.getLayout());
    cl.show(cards, (String)evt.getItem());
}

public static void createAndShowGUI() {
    //create and setup window
    JFrame frame = new JFrame("Frame");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //create and setup content pane
    Main main = new Main();
    main.addComponentToPane(frame.getContentPane());

    //display window
    frame.pack();
    frame.setVisible(true);
}

public void actionPerformed(ActionEvent ae) {

}            

public static void main(String[] args) {
    //set look and feel
    try {
        UIManager.setLookAndFeel("javax.swing.plaf.metal.MetalLookAndFeel");
    } catch (UnsupportedLookAndFeelException ex) {
        ex.printStackTrace();
    } catch (IllegalAccessException ex) {
        ex.printStackTrace();
    } catch (InstantiationException ex) {
        ex.printStackTrace();
    } catch (ClassNotFoundException ex) {
        ex.printStackTrace();
    }
    //turn off metal's bold fonts
    UIManager.put("swing.boldMetal", Boolean.FALSE);        

    //schedule job for the event dispatch thread creating and showing GUI        
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });     
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T00:36:04.810

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CardTest implements ActionListener {

    private JPanel cards;
    private JButton button1;
    private JButton button2;

    public void addComponentToPane(Container pane) {
        // create cards
        JPanel card1 = new JPanel();
        JPanel card2 = new JPanel();
        button1 = new JButton("Button 1");
        button2 = new JButton("Button 2");
        button1.addActionListener(this);
        button2.addActionListener(this);
        card1.add(button1);
        card2.add(button2);

        // create panel that contains cards
        cards = new JPanel(new CardLayout());
        cards.add(card1, "Card 1");
        cards.add(card2, "Card 2");
        pane.add(cards, BorderLayout.CENTER);
    }

    public void itemStateChanged(ItemEvent evt) {
        CardLayout cl = (CardLayout) (cards.getLayout());
        cl.show(cards, (String) evt.getItem());
    }

    public static void createAndShowGUI() {
        // create and setup window
        JFrame frame = new JFrame("Frame");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // create and setup content pane
        CardTest main = new CardTest();
        main.addComponentToPane(frame.getContentPane());

        // display window
        frame.pack();
        frame.setVisible(true);
    }

    public void actionPerformed(ActionEvent ae) {
        if (ae.getSource() == button1) {

            CardLayout cl = (CardLayout) (cards.getLayout());
            cl.show(cards, "Card 2");

        } else if (ae.getSource() == button2) {

            CardLayout cl = (CardLayout) (cards.getLayout());
            cl.show(cards, "Card 1");
        }
    }

    public static void main(String[] args) {
        // set look and feel
        try {
            UIManager.setLookAndFeel("javax.swing.plaf.metal.MetalLookAndFeel");
        } catch (UnsupportedLookAndFeelException ex) {
            ex.printStackTrace();
        } catch (IllegalAccessException ex) {
            ex.printStackTrace();
        } catch (InstantiationException ex) {
            ex.printStackTrace();
        } catch (ClassNotFoundException ex) {
            ex.printStackTrace();
        }
        // turn off metal's bold fonts
        UIManager.put("swing.boldMetal", Boolean.FALSE);

        // schedule job for the event dispatch thread creating and showing GUI
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

# php - Mod_rewrite 无法静默重定向

> ID：11488366
> 
> 赞同：1
> 
> 时间：2012-07-15T00:08:17.440
> 
> 标签：php, mod-rewrite

挣扎了 2 天，头发少了一磅，我想是时候寻求帮助了。我最近将我的项目迁移到一个主子目录，因此结构如下：

```
-application/
   -index.php
   -signup/
      -index.php
      -signup_set.php
-css/
-js/ 
```

我一直在尝试让 mod_rewrite 为我完成我的工作，以从所有 url 中排除“application/”。这是我进入根 .htaccess 的位置：

```
RewriteEngine On 

#first round through, prepend 'application/' to request
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !^application

RewriteRule ^(.*)$ application/$1 [L]

#second round through, if the new url is not directory or file, append .php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(.*)$ $1.php [L] 
```

我可能对 regex/mod_rewrite 有很糟糕的理解，但这实际上似乎部分有效。部分地。奇怪的是，当我路由到“漂亮的 url”（例如 www/signup）时，顶部栏中的 url 被物理重写以包含“application/”（例如 www/application/signup）。所以不知何故，这个“无声”的重写过程变得非常响亮......有什么建议吗？我意识到我可以更改我的根目录，但这需要重写引用 css/js 文件的代码。我比什么都好奇，只是尝试了一些htaccess。任何帮助，将不胜感激！谢谢 StackOverflow，你摇滚。

PS 我在 Windows 7 上运行 Apache 并使用虚拟主机（以防万一）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T00:48:11.843

以下规则适用于我使用虚拟主机在 Windows 7 上运行 Apache。我改变的只是第二个`RewriteCond`。

```
RewriteEngine On

# Append trailing slash
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(?:\.\w+|/)$
RewriteRule ^(.*)$ /$1/ [L]

# First round through, prepend 'application/' to request
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !^/application
RewriteRule ^(.*)$ application/$1 [L]

# Second round through, if the new url is not directory or file, append .php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !\.\w+$
RewriteRule ^(.*)/$ $1.php [L] 
```

# php - 按字母顺序对 UTF-8 字符串数组进行排序，忽略重音符号/变音符号

> ID：11488372
> 
> 赞同：0
> 
> 时间：2012-07-15T00:09:01.323
> 
> 标签：php, arrays, sorting, joomla

我对字符编码没有足够的了解。我用`utf-8`我想。我有一个数组，我想按字母顺序和区分大小写的顺序排列它。

我正在这样做，但我在数组中使用了一些字符串，其中一些以开头，`ç,ı,ö,ğ`然后到达排序数组的末尾。

我想要像`abcç gğ oö ıi sş`. 我在 Joomla 中使用它，如果`JArrayHelper::sortObjects`适用，我该如何使用它？我不明白我应该为第二个参数做什么。谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T00:17:02.097

```
php> $foo = array("ç", "öooo", "öaaa");
php> sort($foo);
php> print_r($foo);

Array
(
    [0] => ç
    [1] => öaaa
    [2] => öooo
) 
```

# asp.net-mvc - MVC 架构和自定义membershipProvider

> ID：11488376
> 
> 赞同：0
> 
> 时间：2012-07-15T00:09:42.267
> 
> 标签：asp.net-mvc

谢谢你的任何想法。

我正在尝试学习 MVC 架构，并在一个小项目上工作，这与我学习该工具的重要性不亚于项目的要求。

我需要弄清楚什么是好的、可接受的和不好的做法，以及为什么。我完全理解不会有具体的正确答案，但必须有适合任何好 -> 坏范围的架构。虽然从某种意义上说不仅仅是一个问题，但我希望良好设计实践的逻辑流程意味着它们都与一个单一的封装答案相关联。

我正在使用Darko Pečnik 的[Code First Membership 提供程序](http://codefirstmembership.codeplex.com/)

User 实现了一个接口 IUser ，它隐藏了许多属性，例如主键和密码，应该通过属于 Membership 类的方法来访问/更改这些属性。它还对字符串数组使用 getter 和 setter，而不是通过以下方式使用 User.Roles 集合：

```
public virtual String[] RoleNames
{
    set 
    {
        this.Roles = (ICollection<Role>)value.Select(r => 
            new Role { RoleName = r }).ToList(); 
```

问题 1.) 我怀疑这个属性可能是不好的做法，但我不确定具体原因。这些作为 GetRoleNames 和 SetRoleNames 方法会更好，还是 Icollection 本身会更好地包含在 IUser 接口中？

存在两个单独的 viewModel，它们使用 AutoMapper 从 IUser 映射。这些模型与用户是自己注册/更新有关他们的详细信息，还是由网站管理员注册/更新有关。

一个视图模型包含角色和部门的 IEnumerable。这些属性当前正在通过 automapper 进行映射：

```
internal class RoleStringArrayToSelectListResolver 
    : ValueResolver<String[], IEnumerable<SelectListItem>>
{
    protected override IEnumerable<SelectListItem> ResolveCore(String[] source) 
    {
        return Roles.GetAllRoles().Select(x => new SelectListItem 
        {
            Value = x,
            Text = StringExtensions.ToSeparatedWords(x),
            Selected = source.Contains(x) 
```

问题 2.) autoMapper 是一个可以接受的放置这种逻辑的地方吗？如果不是，它应该放在哪里？

问题 3.) 回发后，业务逻辑通过存储库方法 createUser 和 updateUser 进行验证。这些方法接受 IUser 实例作为参数是否是最佳选择，或者对于接受各种视图模型作为参数的几个重载来说更可取，如果是，为什么？

非常感谢您提出任何想法并帮助我理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:37:08.243

为什么要创建 IUser 界面？我在您的问题中没有看到任何原因来解释它为什么有用。你预计换掉它的不同实现吗？或者 1 个项目是否依赖于其属性，而无法访问具体的 User 类？

> 问题 1.) 我怀疑这个属性可能是不好的做法，但我不确定具体原因。这些作为 GetRoleNames 和 SetRoleNames 方法会更好，还是 Icollection 本身会更好地包含在 IUser 接口中？

在我看来，您想要做的是仅使用角色名称字符串访问和操作 ICollection Roles 属性中的角色项。您可以单独保留该类（不要创建属性或方法），并将其作为扩展方法实现：

```
public static class UserExtensions
{
    public static string[] GetRoleNames(this User user)
    {
        return user.Roles.Select(r => r.Name).ToArray();
    }

    public static void SetRoleNames(this User user, params string[] roleNames)
    {
        user.Roles = roleNames.Select(s => new Role { RoleName = s }).ToList();
    }
} 
```

有了这个，您可以相应地获取和设置角色名称。扩展方法只针对已经在 User 类中定义的内容起作用，而不会因重载而混乱。扩展方法可以很容易地针对 IUser 接口而不是具体的 User 类来编写。你只需要写`this IUser user`而不是`this User user`.

```
var user = MethodToGetOrCreateUser();
string[] roleNames = user.GetRoleNames();
if (!roleNames.Any())
    user.SetRoleNames("StandardUser", "SomeOtherRole"); 
```

> 问题 2.) autoMapper 是一个可以接受的放置这种逻辑的地方吗？如果不是，它应该放在哪里？

我想我明白你在做什么：你有一个角色名称的字符串 []（可能来自你的 User.GetRoleNames 属性/方法）。给定该字符串数组，您希望创建一个 SelectListItems 的 IEnumerable。每个角色都应该有一个 SelectListItem，但只应选择与数组中的字符串匹配的角色。由于您的客户端代码没有所有角色名称，因此您将该责任交给了值解析器。您的客户端代码可能如下所示：

```
var user = MethodToGetOrCreateUser();
string[] roleNames = user.GetRoleNames();
var rolesMenu = Mapper.Map<IEnumerable<SelectListItem>>(roleNames); 
```

从本质上讲，您正在使 automapper 足够“智能”，以知道如何获取该用户不属于的所有其他角色名称。 Automapper 不应该这么聪明；让任何类型的自动映射解析器访问数据存储通常不是一个好主意，如果可能，您应该避免它。否则，您最终会使用静态引用来访问数据存储。像这样的东西可以进入你的控制器，并且更清晰：

```
// this should actually go in Application_Start
Mapper.CreateMap<IEnumerable<Role>, IEnumerable<SelectListItem>>()
    .ForMember(d => d.Value, o => o.MapFrom(s => s.RoleName))
    .ForMember(d => d.Text, o => o.MapFrom(s => s.RoleName.ToSeparatedWords()))
;

// create your menu with all roles
var rolesMenu = Mapper.Map<IEnumerable<SelectListItem>>(Roles.GetAllRoles());

// select only the roles that the user is in
var user = MethodToGetOrCreateUser();
user.GetRoleNames().ToList().ForEach(r => 
{
    var match = rolesMenu.SingleOrDefault(i => i.Value == r);
    if (match != null) match.Selected = true;
}); 
```

我发现您可以完全避免使用 ValueResolver 类。任何你可以用 ValueResolver 类做的事情，你也可以用 lambda 重载 .ResolveUsing() 做。

> 问题 3.) 回发后，业务逻辑通过存储库方法 createUser 和 updateUser 进行验证。这些方法接受 IUser 实例作为参数是否是最佳选择，或者对于接受各种视图模型作为参数的几个重载来说更可取，如果是，为什么？

你的业务层不应该接受视图模型作为参数。它们是视图的模型，而不是业务模型。将业务代码视为您的 MVC 项目的客户端。如果您曾经将业务代码移到 MVC 项目之外，并且您的业务代码将 ViewModels 作为参数，那么代码将无法编译。为什么？因为视图模型在 MVC 项目中，而 MVC 项目依赖于业务项目——反之则不然。

# groovy - Groovy DSL：从字符串创建动态闭包

> ID：11488378
> 
> 赞同：1
> 
> 时间：2012-07-15T00:10:14.657
> 
> 标签：groovy, closures, dsl

这里还有一些其他问题相似但完全不同，我需要将其作为一个新问题提出：

我创建了一个空类，我们称之为测试。它没有任何属性或方法。然后我遍历键/值对的映射，动态创建以键命名并包含值的属性......就像这样：

```
def langMap = [:]
langMap.put("Zero",0)
langMap.put("One",1)
langMap.put("Two",2)
langMap.put("Three",3)
langMap.put("Four",4)
langMap.put("Five",5)
langMap.put("Six",6)
langMap.put("Seven",7)
langMap.put("Eight",8)
langMap.put("Nine",9)

langMap.each { key,val ->
    Test.metaClass."${key}" = val
} 
```

现在我可以通过这样创建的新方法访问这些：

```
Test.metaClass.twoPlusThree = { return Two + Three }
println test.twoPlusThree() 
```

不过，我想做的是从字符串动态加载一组指令，例如“二+三”，动态创建一个方法来评估结果，然后对包含表达式的许多字符串迭代重复此过程我碰巧有。

问题：a）首先，是否有更好，更优雅的方式来做到这一点（基于我提供的信息）？b）假设这条路径是可行的，从字符串动态构造这个闭包的语法是什么，其中字符串引用的变量名仅在此类的方法中有效？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T01:34:07.943

我认为正确的答案取决于您实际尝试做的事情。输入字符串可以是更复杂的表达式，比如`'(Two + Six) / Four'`？

如果您希望允许更复杂的表达式，您可能希望直接将字符串计算为 Groovy 表达式。在 GroovyConsole 或 Groovy 脚本中，您可以直接调用`evaluate`，这将在该脚本的上下文中计算表达式：

```
def numNames = 'Zero One Two Three Four Five Six Seven Eight Nine'.split()

// Add each numer name as a property to the script.
numNames.eachWithIndex { name, i ->
    this[name] = i
}

println evaluate('(Two + Six) / Four') // -> 2 
```

如果您不在这些脚本友好的世界之一，您可以使用[`GroovyShell`](http://groovy.codehaus.org/api/groovy/lang/GroovyShell.html)该类：

```
def numNames = 'Zero One Two Three Four Five Six Seven Eight Nine'.split()
def langMap = [:]
numNames.eachWithIndex { name, i -> langMap[name] = i }

def shell = new GroovyShell(langMap as Binding)
println shell.evaluate('(Two + Six) / Four') // -> 2 
```

但是，请注意[使用 eval 是非常危险](http://www.saunalahti.fi/~s7l/blog/2005/09/06/Eval%20considered%20harmful.html)的。如果输入字符串是用户生成的，我不建议你这样做；用户可以输入类似的`"rm -rf /".execute()`内容，并且根据脚本的权限，从执行该脚本的任何位置删除所有内容。您可以首先验证输入字符串是否“安全”（可能检查它是否仅包含已知的运算符、空格、括号和数字名称），但我不知道这是否足够安全。

另一种选择是为这些表达式定义自己的迷你语言，然后使用[ANTLR](http://www.antlr.org/)之类的东西解析它们。但是，同样，这真的取决于你想要完成什么。

# haskell - Haskell 错误：无法导出良好类型的实例/类型不匹配

> ID：11488379
> 
> 赞同：3
> 
> 时间：2012-07-15T00:10:20.537
> 
> 标签：haskell, types, ghc

我在`Typeable1`为 Haskell 中的日期结构派生实例时遇到问题。

这是我的代码：

```
 {-# LANGUAGE StandaloneDeriving #-}
    {-# LANGUAGE DeriveDataTypeable #-}

    import Data.Typeable (Typeable,Typeable1)

    newtype FooM m a = Foo { unFoo :: (a -> Bar m) -> Bar m }
    newtype Bar m = Atom (m (Maybe (Bar m)))
    type Baz m = Waldo (FooM m ())
    type Waldo a = a

    data Qux m = Qux {
        baz :: Baz m
      , num :: Int
    } -- deriving Typeable1 [1]

    -- deriving instance Typeable1 Qux [2] 
```

取消注释第一条评论 [1] 会出现此错误：

```
 Cannot derive well-kinded instance of form `Typeable1 (Qux ...)'
          Class `Typeable1' expects an argument of kind `* -> *'
        In the data type declaration for `Qux' 
```

取消注释 [2] 会出现此错误：

```
 Kind mis-match
    The first argument of `Typeable1' should have kind `* -> *',
    but `Qux' has kind `(* -> *) -> *'
    In the stand-alone deriving instance for `Typeable1 Qux' 
```

我的问题是：请问如何添加`Typeable`/`Typeable1`实例`Qux`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T01:22:27.423

您不能创建`Qux`的实例`Typeable1`，但在现代 GHC 中，您应该能够派生 的实例`Typeable`，该实例现在具有足够的种类多态性，可以处理此类更高种类的类型，因此`Typeable1`无需再进行类似操作。

过时的答案，保留，因为在提出问题时它是被接受的答案：不幸的是，你不能：`Typeable`层次结构没有任何类型类用于 kind `(* -> *) -> *`。既然 GHC 开始支持种类多态性，这可能会在未来某个时间得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:09:30.990

似乎这个问题目前正在 ghc 票证中考虑，[#5391](http://hackage.haskell.org/trac/ghc/ticket/5391)。所以这个`deriving Typeable`问题有可能在 GHC 7.6 中消失。

# assembly - x86 程序集 - MASM32 - 乘以 3 个数字

> ID：11488381
> 
> 赞同：1
> 
> 时间：2012-07-15T00:10:23.283
> 
> 标签：assembly, masm32

我有一个将 3 个数字相乘的程序，我正在努力理解。我有一些问题，我希望有人能解释这个程序发生了什么，并告诉我我是否走在正确的轨道上。我知道我有不止一个问题，所以我很抱歉。

```
.data?
  num1 dd ?
  num2 dd ?
  num3 dd ?

.data
sum dd 0
prod dd 0

.code

start:

main proc

mov EAX, sval(input("Enter a number: "))
mov num1, EAX
mov EAX, sval(input("Enter a number: "))
mov num2, EAX
mov EAX, sval(input("Enter a number: "))
mov num3, EAX

mov EAX, num1
mov EBX, num2
mul BL                 

mov EBX, num3
mul BX              

mov prod, EDX 
```

这让我很困惑......

```
mov EBX, num3
mul BX 
```

那么，我们将 num3 存储到 BL 中？但是由于 num1 和 num2 的结果是 16 位并存储到 AX 我们 mul BX? 而不是BL？但是BL中不是num3吗？

对不起，没有一个具体的问题。如果我的逻辑不正确或接近，你能解释一下发生了什么，为什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T00:25:06.730

当您执行 8 位乘法`mul bl`时，它需要`al`，将其乘以指定的输入，然后将结果放入`ax`.

当您像 一样进行 16 位乘法运算`mul bx`时，它需要`ax`，将其乘以指定的输入，然后将结果放入`dx:ax`（即，结果的 16 个最高有效位放入`dx`，结果的 16 个最低有效位放入`ax`）。

（只是为了完整性）：如果你做一个 32 位乘法`mul ebx`，它会乘以`eax`，`ebx`并将结果放入`edx:eax`（我不确定，但我猜 64 位乘法的工作方式大致相同） .

就`BL`vs.`BX`而言（或`AL`/ `AH`/`AX`等），你所拥有的并不是真正独立`AL`的寄存器——实际上是`AX`. `AH`是 AX 的 8 个最高有效位。BL 是 BX 的 8 个最低有效位，BH 是 BX 的 8 个最高有效位（对于 CL/CH/DL/DH，依此类推）。

例如，如果您执行如下代码：

```
xor bx, bx
mov bl, 1 
```

然后 BH 将等于 0（由 mov 设置为零`xor bx, bx`），BL 将等于 1（由 mov 设置）并且 bx 也将等于 1（因为它现在包含位模式 00000000 00000001）。

# api - mongo节点驱动对象引用

> ID：11488386
> 
> 赞同：0
> 
> 时间：2012-07-15T00:11:25.503
> 
> 标签：api, node.js, mongodb

为了编写一个处理数据库响应的应用程序，我需要知道普遍存在的错误参数的可能结构和值。

所有回调都有：

函数（错误，res）...

有谁知道 err 对象的结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:56:30.407

当提供给回调时，该`err`参数包含一个[`Error`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Error)基于 - 的对象。对象的`name`属性可用于区分错误的类型，该`message`属性包含错误的字符串描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T00:25:47.190

看起来 $err 通常是字符串类型。见[http://jp.wiki.mongodb.org/display/DOCS/Error+Handling+in+Mongo+Drivers](http://jp.wiki.mongodb.org/display/DOCS/Error+Handling+in+Mongo+Drivers)

# c# - 使用 TaskEx.WhenAll() 时，异步多线程会产生 TypeCasting 错误

> ID：11488393
> 
> 赞同：0
> 
> 时间：2012-07-15T00:12:55.563
> 
> 标签：c#, multithreading, async-await

在下面的代码中，我试图在另一个线程中执行一个返回值的方法。但是，它只是不起作用！

```
 public void main()
    {
       lstChapters.DataContext = await TaskEx.WhenAll(LoadChapters());
    }

   //CAN'T use  async in this function, it requires Task<> which
   //Error appears on the code inside []

   public [async Task<object>] Convert(object[] values, Type targetType,
     object parameter, System.Globalization.CultureInfo culture)
   {
      dictChapters data = await IQ_LoadQuranXML.LoadChapters(TypeIndex);
   }

    internal static async Task< IEnumerable<dictChapters>> LoadChapters()
    {
        var element = XElement.Load("xml/chapters.xml");

        Task < IEnumerable < dictChapters >>  something = (Task<IEnumerable<dictChapters>>)  await TaskEx.Run(delegate
        {

        IEnumerable<dictChapters> Chapters =  
           from var in element.Descendants("chapter")
           orderby var.Attribute("index").Value
           select new dictChapters
           {
              ChapterIndex = Convert.ToInt32(var.Attribute("index").Value),
              ChapterArabicName = var.Attribute("name").Value,
              ChapterType = var.Attribute("type").Value,
           };
            return Chapters;}
        );

        return something; //An ERROR on this line
     }

    //Overriding method which does not return IEnumerable type. And it accepts index as integer.
    internal static dictChapters LoadChapters(string chIdx = "0")
    {
        int chIdxInt = Convert.ToInt32(chIdx);
        List<dictChapters> Chapters = (List<dictChapters>)  LoadChapters(); // ERROR is on this line too
        return Chapters.ElementAt(chIdxInt - 1); //index of chapter in the element starts from 0
    } 
```

错误是：

> 无法将类型“ `System.Threading.Tasks.Task<System.Collections.Generic.IEnumerable<iq_main.dictChapters>>`”隐式转换为“ `System.Collections.Generic.IEnumerable<iq_main.dictChapters>`”。存在显式转换（您是否缺少演员表？）

另一个错误是..

> 无法将类型“ `System.Threading.Tasks.Task<System.Collections.Generic.List<iq_main.dictChapters>>`”转换为“`System.Collections.Generic.List<iq_main.dictChapters>`

当我`return (IEnumerable<dictChapters>) something`在运行时明确地投射“某物”时，我得到“InvalidCastException”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T00:38:50.480

实际上，您会更早地收到运行时强制转换错误。问题是你的`TaskEx.Run`结果。当你有`await`东西时，`Task`包装被移除。

```
public void main()
{
  lstChapters.DataContext = await LoadChapters();
}

internal static Task<List<dictChapters>> LoadChapters()
{
  return TaskEx.Run(delegate
  {
    var element = XElement.Load("xml/chapters.xml");
    IEnumerable<dictChapters> Chapters =  
        from var in element.Descendants("chapter")
        orderby var.Attribute("index").Value
        select new dictChapters
        {
          ChapterIndex = Convert.ToInt32(var.Attribute("index").Value),
          ChapterArabicName = var.Attribute("name").Value,
          ChapterType = var.Attribute("type").Value,
        };
    return Chapters.ToList();
  });
} 
```

您的代码还有一些其他问题。请记住，像这样的枚举是延迟执行的。您可能希望`return Chapters.ToList();`XML 解析发生在线程池线程上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T00:56:54.717

由于您确实在 TaskEx.Run 上等待，因此您将返回可枚举，而不是任务。

对于您正在做的事情，我建议将 LoadChapters 保留为正常/同步代码，然后通过 Task.Run 调用它，或者按原样调用它。

由于延迟执行，AFAICT 您当前的代码并没有真正帮助任何事情，因为您仍在同步加载。

可以删除 main 中的 Task.WhenAll ，只需等待 LoadChapters （或任何异步方法

# arduino - 为初学者将 Arduino 'AF_Wave' 项目转换为 'waveHC' 的提示？

> ID：11488395
> 
> 赞同：2
> 
> 时间：2012-07-15T00:13:01.977
> 
> 标签：arduino

`AF_Wave`为了将使用（旧的，不受支持的）库的 Arduino 草图转换为使用`waveHC`（新的和闪亮的），需要更改哪些内容的分步列表？

（我已经四处寻找这个，但我似乎找不到它。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T03:52:09.013

我会回答我自己的问题..

优秀教程： [http ://www.ladyada.net/make/waveshield/libraryhcplay6.html](http://www.ladyada.net/make/waveshield/libraryhcplay6.html)

# java - 确定自动装箱是否完成

> ID：11488400
> 
> 赞同：1
> 
> 时间：2012-07-15T00:14:30.253
> 
> 标签：java, autoboxing

Java中有没有办法确定自动装箱是否完成？

例如

```
void functionInt(Integer i) {
//Determine if Integer was passed or int was passed. Is it possible?
}

int i = 1;
int ii = new Integer(1);
functionInt(i);
functionInt(ii); 
```

被调用者可以区分这两个调用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T00:18:36.303

`functionInt`将始终传递一个`Integer`，并且无法确定它是否`Integer`是由于自动装箱而创建的。

您可以做的是创建重载函数：

```
void functionInt(Integer i);
void functionInt(int i); 
```

/编辑

如果您有以下课程：

```
public class Foo {
    public Foo(int primitive) {
        System.out.println("Created!");
    }
} 
```

您可以`Foo.class.getConstructor(int.class).newInstance(new Integer(5))`毫无问题地拨打电话。检查是否`Constructor`有`int.class`作为参数的 a 应该是相当简单的，而不是`java.util.Integer`如果`java.util.Integer`找不到带有的。

# c# - 列表 .Remove() 如何作用于完全相同的对象

> ID：11488401
> 
> 赞同：2
> 
> 时间：2012-07-15T00:14:59.073
> 
> 标签：c#, generics

抱歉，如果是非常原始的问题，但我不确定这如何与 List 一起使用，当您调用`Remove()`方法并将对象传递给它时，集合中确实已经存在具有完全相同字段和值的对象。

我有这样的课：

```
public class Test
{
    private List<string> _names;

    public void Add(string name)
    {
        _names.Add(name);
    }

   public void Remove(string name)
   {
        _names.Remove(name)
   }
} 
```

如果`name`列表中已经有多个相同的（实例）会发生什么？考虑从另一个类调用此 Remove 方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T00:17:28.153

[阅读文档](http://msdn.microsoft.com/en-us/library/cd666k3e.aspx)。

它说`.Remove(T item)`：

“从 . 中删除特定对象的第一个匹配项`List<T>`。”

如果要删除所有出现，请使用`.RemoveAll(Predicate<T> match)`，如下所示：

```
public void Remove(String name) {
    _names.RemoveAll( s => s.Equals( name ) );
} 
```

# c++ - [数字] -F 出现在字符串的末尾？

> ID：11488402
> 
> 赞同：2
> 
> 时间：2012-07-15T00:15:01.033
> 
> 标签：c++

我是 C++ 的新手，周日凌晨 1 点正在处理一个回文程序，因为！我遇到了这个问题：

输入：测试反向：tset3-F

3-F 是从哪里来的？有时它只是-F 或另一个数字-F。这是从哪里来的？

这是我的代码：

```
 #include <iostream>
 #include <string>

 using namespace std;

int main() {

 string eString;

 int length;
 int counter = 0;

 cout << "Enter String: ";
 cin >> eString;

 length = eString.length();

 char reverseChar[length];

  for(int x = eString.length() -1; x > -1; x--) {

     reverseChar[counter] = eString[x];

     counter++;

 }
 cout << "Reverse: " << reverseChar;

  } 
```

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T00:17:06.170

您没有在字符串的末尾添加空终止符。它是碰巧在内存中的随机数据。

reverseChar 应该是长度 + 1 的大小

最终字符应设置为 '\0'

reverseChar[长度] = '\0';

见：[http ://en.wikipedia.org/wiki/Null-terminated_string](http://en.wikipedia.org/wiki/Null-terminated_string)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T00:19:47.953

您需要在`reverseChar`字符串中添加一个空终止符。C 中所有字符串的最后一个字符后面都有一个 0，它告诉字符串操作函数字符串在内存中的结束位置。0 永远不会包含在长度中，因此您必须记住在为字符串分配空间时为其添加空间。

```
char reverseChar[length + 1]; 

for(int x = eString.length() -1; x > -1; x--) { 

     reverseChar[counter] = eString[x]; 
     counter++; 

} 

reverseChar[length] = 0; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T00:19:47.353

我认为： char reverseChar[length+1] 因为您需要为字符串分隔符 reverseChar[length]='\0' 的末尾留出空间

# asp.net-mvc-3 - ASP.NET MVC 3 IClientValidatable 属性 - 清除参数缓存

> ID：11488405
> 
> 赞同：1
> 
> 时间：2012-07-15T00:15:50.803
> 
> 标签：asp.net-mvc-3, client-side-validation, validationattribute

我正在使用 ASP.NET MVC 3。我添加了自己的自定义验证属性：

```
public class CustomAttribute : ValidationAttribute, IClientValidatable {
    private readonly string _parameter1;

    public CustomAttribute(string parameter1) {
        _parameter1 = Global.Settings[parameter1];
    }

    protected override ValidationResult IsValid(object value, ValidationContext context) {
        ...
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context) {
        yield return new ModelClientValidationRule() { 
            ErrorMessage = FormatErrorMessage(metadata.DisplayName), 
            ValidationType = "custom", 
            ValidationParameters = { { "parameter1", _parameter1 } } 
        };
    }
} 
```

注意它是如何实现`IClientValidatable`的。这`parameters1`会将设置作为 HTML 5 数据属性呈现到页面上的字段中。

我遇到的问题是设置的值可以更改，但每次更改时它仍然会在数据属性中呈现旧值。我猜这是缓存在某个地方。反正有没有删除缓存？

我会很感激帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:46:16.240

我找到了解决这个问题的方法。您需要重新启动应用程序。这可以使用 HttpRuntime.UnloadAppDomain() 以编程方式完成。如果您的应用程序未处于完全信任模式，请参阅[http://www.west-wind.com/weblog/posts/2006/Oct/08/Recycling-an-ASPNET-Application-from-within](http://www.west-wind.com/weblog/posts/2006/Oct/08/Recycling-an-ASPNET-Application-from-within)。

# c++ - 如何迭代 Quad/Oct 树

> ID：11488413
> 
> 赞同：3
> 
> 时间：2012-07-15T00:17:14.397
> 
> 标签：c++, containers, quadtree, octree

我很难掌握如何迭代八叉树或四边形。这可能是因为我没有经历过不同的迭代神话。但是让我们假设我生成了一个四叉树，它包含 float x,y,z; 双字颜色。现在，我们还假设这个节点一次只能产生 4 个孩子（这些孩子都可以产生 4 个孩子，等等），直到： 达到 7 个级别（这样孩子就不能再创建孩子了，但是它兄弟/姐妹可以），创建的所有 4 个孩子都是相同的 dword 颜色（同样，如果发生这种情况，其兄弟/姐妹仍然可以生产），或者创建的节点总数等于 87380。发生上述情况时，将其放入容器。这个过程还在继续。

现在这个包含节点的容器（例如）有 7 层深，所有子节点的子节点的所有子节点都有不同的 x、y、zs 和颜色。我遇到的问题是我如何迭代这个容器，我怎样才能遍历所有的孩子，姐妹们？由于根导致 4 个孩子，而这 4 个孩子有 4 个孩子，依此类推，依此类推：4^1+4^2....+4^7。如何在不编写复杂的 if 语句和遍历整个节点（从根开始）的情况下找到我想要的节点？容器（产生节点的容器）是否需要额外的代码来简化这个过程？

对不起，如果问题是一般性的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T00:40:22.157

遍历整个树很容易，您可以递归地进行。

```
void iterate(node *n) {
    // do something with n
    if (n->child1 != NULL) iterate(n->child1);
    if (n->child2 != NULL) iterate(n->child2);
    if (n->child3 != NULL) iterate(n->child3);
    if (n->child4 != NULL) iterate(n->child4);
} 
```

然后调用`iterate(root)`并且`do something`将发生在四叉树中的每个节点上。

不过，我怀疑这不是您真正要问的。如果这就是您所做的一切，那么将您的数据保存在四叉树中是没有意义的。如果你想在四叉树中*找到*一个特定的节点，那么你需要别的东西。假设您想`x,y`在四叉树中找到一个点。然后你做类似的事情：

```
void find(node *n, float x, float y) {
    if (x == n->x && y == n->y) // you've found it!
    if (x < n->x) {
        if (y < n->y) {
            if (n->child1 != NULL) {
                find(n->child1, x, y);
            } else {
                // point not in quadtree
            }
        } else {
           ...same, but child2
        }
    } else {
        ...same, child3 & 4
    }
} 
```

请注意，四叉树通常不会在它们自己存储的点上分割，它们通常通过将分割坐标与点分开存储来分割（仅存储在四叉树的叶子上）。有关示例，请参见[维基百科图片。](http://en.wikipedia.org/wiki/Quadtree)

# performance - 这里的“内容切换阈值”是什么意思，这是否会使 FF 更快？

> ID：11488415
> 
> 赞同：-1
> 
> 时间：2012-07-15T00:17:49.693
> 
> 标签：performance, firefox

在这个[Firefox 速度提示](http://www.techradar.com/news/software/applications/8-hacks-to-make-firefox-ridiculously-fast-468317)页面（有点过时，2008 年）上，它说：

> 如果您在 0.75 秒（内容切换阈值）内没有移动鼠标或触摸键盘，那么 Firefox 会进入低频中断模式，这意味着其界面的响应速度会降低，但您的页面加载速度会更快。那么，降低内容切换阈值可以提高性能，而且只需要一点时间。键入 about:config 并按 [Enter]，在窗口中单击鼠标右键并选择 New > Integer。输入 content.switch.threshold，点击 OK，输入 250000（四分之一秒）点击 OK 完成。

这个“内容切换阈值”是什么意思——例如切换标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T00:24:31.663

[该设置记录在 MozillaZine 中（当我 google 搜索 "firefox content.switch" 时的第一个结果](http://kb.mozillazine.org/Content.switch.threshold)。

文档说 Firefox 的解析器可以以更高的频率“中断”，这使得 UI 响应更快，但意味着可以花费更少的时间（在给定的时间范围内）进行文档解析，因此页面加载速度会更慢（从用户的角度来看） ）。

我不知道为什么它被称为“content.switch”或者为什么解析器可以被“中断”——这听起来像是进程是单线程的，而 Firefox 正在使用用户线程，但我不知道 Gecko。

# ios - ios在ipad上泄漏但在模拟器中很好

> ID：11488420
> 
> 赞同：1
> 
> 时间：2012-07-15T00:18:55.927
> 
> 标签：ios, ipad, ios-simulator, libxml2

我是 iOS 开发的新手。我正在开发一个 iPad 应用程序。我正在使用 libxml2。我正在使用 TouchXML arc 端口解析 HTML。

在模拟器中运行应用程序并使用 Instruments 对其进行测试时，一切似乎都运行良好。另一方面，在 iPad 上运行应用程序时，我不断遇到内存泄漏。

这是相同的代码。

这可能是什么原因造成的？

# javascript - Twitter Bootstrap 模式没有出现

> ID：11488426
> 
> 赞同：4
> 
> 时间：2012-07-15T00:20:05.980
> 
> 标签：javascript, jquery, html, twitter-bootstrap, modal-dialog

我使用 twitter bootstrap 创建的任何模式都不会出现。我不确定自己做错了什么，因为我使用引导程序提供的代码设置了测试模式，但它仍然无法正常工作。

这是我的代码（仅正文）：您需要链接到 bootstrap.js、bootstrap-modal.js、jquery.js 和 bootstrap.css

```
<body>
    <div class="modal hide" id="myModal">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
                &times;
            </button>
            <h3>Modal header</h3>
        </div>
        <div class="modal-body">
            <p>
                Modal body would go here...
            </p>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">Close</a>
            <a href="#" class="btn btn-primary">Save changes</a>
        </div>
    </div>

    <a data-toggle="modal" href="#myModal">Show Modal</a>
</body> 
```

以下是引导模式所需的引导包和 jquery 的链接： [bootstrap package](http://twitter.github.com/bootstrap/index.html) [jquery](http://code.jquery.com/jquery-1.7.2.js)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T18:54:45.460

我的问题是我同时包含了 boostrap.js 和 bootstrap-modal.js。显然，如果你包含 bootstrap.js，你不应该也包含 bootstrap-modal.js，因为 boostrap.js 导入了所有它兼容的 javascript 插件。类似的东西。删除我的 boostrap-modal.js 脚本链接后，它起作用了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T01:03:55.733

您必须致电：

```
<script>
   $('#myModal').modal('show')
</script> 
```

`</body>`标签之后。或者，如果您只想在用户单击某些内容时调用它：

```
$('#button_id').click(function(){
    $('#myModal').modal('show')
}); 
```

# php - 用于此数据库建模/设计的最佳方法是什么？

> ID：11488428
> 
> 赞同：2
> 
> 时间：2012-07-15T00:20:49.390
> 
> 标签：php, mysql, database-design

我正在编写一个厨房/食谱管理程序。截至目前，该程序可以将新成分添加到数据库中。我的下一步是使用成分将新食谱添加到数据库中。

由于每个食谱将有多种成分，并且可以将无限数量的成分添加到食谱中，因此为所选的每种成分创建单独的列不会有效（我假设）。

所以我想出的存储成分选择的方法是：

1.  将 recipe_ingredients 列添加到数据库中的配方表中，并将每种成分的名称存储在 1 个单个（文本）字段中，以逗号分隔（CSV 样式）。

2.  编写一个 PHP 脚本，将 recipe_ingredients 列表存储到一个数组中。

3.  对所有其他属性（recipe_ingredients_serving_size、recipe_ingredients_calories 等）执行相同操作

**所以问题是：**这种方法是最优的，如果不是，有什么更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T00:35:19.490

这**不是**解决这个问题的理想方法。

列中的逗号分隔值使这些值非常无用 - 如果您只是将一堆成分连接到一个字符串中，则按成分查询食谱会很痛苦。

此外，如果您将单个成分的卡路里计数存储为逗号分隔的字符串，您将如何将它们与一种成分联系起来？

理想的解决方案是为成分创建一个新表，并将名称和相关信息存储在该表中。例如

```
ingredients
-----------
id 
name
num_calories 
```

有许多包含许多成分的食谱，因此创建一个将成分链接到特定食谱的表，这使得成分与食谱的关系是多对多的，而不是直接的多对多。

```
recipe_ingredients
------------------
recipe_id
成分ID

```

你应该在这里阅读[规范化](http://en.wikipedia.org/wiki/Database_normalization)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T00:50:11.383

这是一个简单的 N:M（多对多）关系，您提出的方法可能会在效率和管理方面造成灾难。

* * *

**这是你的情况：**

*   您有两个实体：`recipes`和`ingredients`。
*   **一种**成分可能是**许多**食谱的一部分。
*   **一个**食谱可能由**许多**成分组成。

每当您在任何两个实体之间建立这种关系时，您都不会想要两个，而是三个表：

```
+-----------+     +-------------------------+     +-------------------+
| recipes   |     | recipes_has_ingredients |     | ingredients       |
+-----------+     +-------------------------+     +-------------------+
| recipe_id |     | recipe_id               |     | ingredient_id     |
| name      |     | ingredient_id           |     | name              |
| ...       |     +-------------------------+     | calories          |
+-----------+                                     +-------------------+ 
```

`recipes`并且`ingredients`是所谓的*基表*，它们存储有关该特定实体的内在信息。

该`recipes_has_ingredients`表就是所谓的*交叉引用表*（或“XREF”），它存储两个实体之间的***关联。***此表中的字段：`recipe_id`并且`ingredient_id`都链接到它们各自的基表，并且在外部参照表的每一行中两者的组合是唯一的。`recipe_id`它基本上将每个可能具有的许多关联映射到不同`ingredient_id`的关联，反之亦然。

为什么这种设计会促进多对多关系？因为允许该 XREF 表中的数据如下所示：

```
+-----------------------------+
| recipe_id  |  ingredient_id |
+-----------------------------+
| 1          |  1             |
| 1          |  2             |
| 1          |  3             |
| 2          |  1             |
| 2          |  2             |
| 2          |  3             |
| 3          |  1             |
| 3          |  2             |
| 3          |  3             |
+-----------------------------+ 
```

您可以清楚地看到：一种配方与许多 (3) 种成分相关联，一种成分与许多 (3) 种配方相关联。还要注意任何一列中的值是如何允许重复的，但两列的***组合***是唯一的——这确实是这种设计的关键方面，它使 N:M 关系起作用。

因此，这里有一些简单的示例，说明如何使用此设计轻松检索和管理数据：

```
// Given a particular recipe_id, retrieve all ingredients used in that recipe:   

SELECT     name
FROM       recipes_has_ingredients
INNER JOIN ingredients USING (ingredient_id)
WHERE      recipe_id = <id> 
```

* * *

```
// Retrieve the name of recipe (of id 4), and total amount of calories it has:

SELECT      a.name, 
            SUM(c.calories) AS calorie_count
FROM        recipes a
INNER JOIN  recipes_has_ingredients b ON a.recipe_id = b.recipe_id
INNER JOIN  ingredients c ON b.ingredient_id = c.ingredient_id
WHERE       a.recipe_id = 4
GROUP BY    a.recipe_id, 
            a.name 
```

* * *

```
// Given a list of ingredient_id's, retrieve all recipes that contain 
// ALL of the listed ingredients

SELECT     name
FROM       recipes
INNER JOIN recipes_has_ingredients USING (recipe_id)
WHERE      ingredient_id IN (1,2,3)
GROUP BY   recipe_id
HAVING     COUNT(*) = 3 
```

* * *

```
// Given a particular recipe_id (id 6), add two more ingredients 
// that it has (ids 4 & 9):

INSERT INTO recipes_has_ingredients VALUES (6,4), (6,9); 
```

* * *

```
// Delete a particular recipe:

DELETE FROM recipe WHERE recipe_id = 4 
```

`DELETE`^如果您正确定义了关系之间的 CASCADE 规则，上述操作也会删除该配方的所有关联。

* * *

回顾您的原始设计，如果您想更新或删除食谱中的某些成分，或者更改成分的名称怎么办？您将需要 hacky 程序代码来修改 csv 字符串中的正确位置，或者您需要更新表中的每一行以反映单个成分中最轻微的变化。

您还可以回答许多更引人注目的问题，而这些问题是使用原始设计无法真正解决的，例如：

*   卡路里最高/最低的食谱？
*   大多数食谱中包含的成分？

...不胜枚举，实施此设计的好处将为您提供良好的服务。通过正确的方式做事，您将避免自己遭受很多困难和痛苦。=)

# css - 溢出的嵌套div不起作用

> ID：11488429
> 
> 赞同：-1
> 
> 时间：2012-07-15T00:20:55.753
> 
> 标签：css, html, nested

当我将滚动`div`（即`<div style="width:200;height:200;overflow-y:scroll;">`）放在另一个`div`具有`overflow`属性的内部时，它会将第二个视为`div`我没有设置尺寸（高度 200 和宽度 200）。右侧的滚动条出现了，但它不起作用，因为每次我添加内容时，div 都会下降而不是使其滚动。

第一个div css：

```
#slide1_container 
{
        width:976px;
        height:520px;
        overflow:hidden;
        position:relative;
        margin:0 auto;
    } 
```

嵌套的 div：

```
overflow-y:scroll; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T00:23:11.400

您缺少`px`div 的内联样式中的尺寸。

```
<div style="width:200;height:200;overflow-y:scroll;"> 
```

应该

```
<div style="width:200px;height:200px;overflow-y:scroll;"> 
```

# javascript - 动画页面重排？

> ID：11488434
> 
> 赞同：5
> 
> 时间：2012-07-15T00:23:15.330
> 
> 标签：javascript, html, css, css-transitions

我正在切换 div 的内容（淡出旧内容，然后淡入新内容），因为它们的内容略有不同，所以当它们发生变化时，它们下面的所有内容都会发生不和谐的重组。

我的问题是，有没有办法让这个动作顺利进行？

我怀疑几乎唯一可行的方法是使用javascript提前确定起始和结束元素的高度（在我的情况下我只处理垂直对齐移动的块），并分配这些直接取值。一旦我这样做了，我确信 CSS3 过渡将应用一个令人愉快的动画。

有没有办法在不指定明确尺寸的情况下得到这个？我似乎记得在某些时候有经验的项目以动画方式在页面上移动。这让我希望它可以只使用 CSS 来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T01:27:47.853

我通常会创建一个临时（不可见）元素来保存新内容，以便计算它的高度。之后，原始元素可以从其当前高度动画到新计算的高度。

重要的是，创建的临时元素是*原始元素的同级元素*，以便所有必要的样式级联并正确继承（例如，如果没有正确`font-size`应用，计算新的内容高度是无用的）

虽然可以使用 CSS3 ( ) 来实现显式设置的不同高度之间的动画（即使用上述 JS `transition: height .5s ease;`），但它不适用于隐式设置的不同高度（即使用 修改元素内容`height:auto`）

# asp.net-mvc - ASP.NET MVC 3：如何强制 ActionLink 执行 HttpPost 而不是 HttpGet？

> ID：11488442
> 
> 赞同：6
> 
> 时间：2012-07-15T00:24:52.903
> 
> 标签：asp.net-mvc, asp.net-mvc-3

是否可以强制 a`@Html.ActionLink()`做 a`POST`而不是 a `GET`？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T02:16:54.210

`ActionLink`helper 方法将呈现一个`anchor`标签，点击它总是一个`GET`请求。如果你想提出`POST`请求。您应该使用一点 javacsript 覆盖默认行为

```
@ActionLink("Delete","Delete","Item",new {@id=4},new { @class="postLink"}) 
```

现在一些`jQuery`代码

```
<script type="text/javascript">
  $(function(){
    $("a.postLink").click(function(e){
      e.preventDefault();
      $.post($(this).attr("href"),function(data){
          // got the result in data variable. do whatever you want now
          //may be reload the page
      });
    });    
  });    
</script> 
```

确保你有一个类型的`Action`方法`HttpPost`来处理这个请求

```
[HttpPost]
public ActionResult Delete(int id)
{
  // do something awesome here and return something      
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-15T01:59:22.373

我想如果你需要这样的东西是为了一个动作，它将在服务器端做一些“永久”的事情。例如，删除数据库中的对象。

这是使用链接和发布进行删除的完整示例： [http ://www.squarewidget.com/Delete-Like-a-Rock-Star-with-MVC3-Ajax-and-jQuery](http://www.squarewidget.com/Delete-Like-a-Rock-Star-with-MVC3-Ajax-and-jQuery)

**从上一个链接（无论如何推荐阅读）：**

您视图中的删除链接：

```
@Ajax.ActionLink("Delete", "Delete", "Widget",
                new {id = item.Id},
                new AjaxOptions {
                    HttpMethod = "POST",
                    Confirm = "Are you sure you want to delete this widget?",
                    OnSuccess = "deleteConfirmation"
                }) 
```

一点JS：

```
function deleteConfirmation(response, status, data) {

        // remove the row from the table
        var rowId = "#widget-id-" + response.id;
        $('.widgets').find(rowId).remove();

        // display a status message with highlight
        $('#actionMessage').text(response.message);
        $('#actionMessage').effect("highlight", {}, 3000);
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-15T00:33:03.163

我要做的是将你的 html 包裹在一个表单上

```
@using(Html.BeginForm("YourAction","YourController", FormMethod.Post)){

<button>Hello</button>

} 
```

您可能想要使用按钮，而不是使用链接。

如果你真的想使用链接，你可能需要一些 javascript

像这样的东西：

```
$("#idOfYourLink").click(function(){
var form = $(this).parents('form:first');
form.submit();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T01:22:55.640

It's not possible to have a `<a>` element perform a POST to a web server.

You can use Javascript to capture the click event, stop the navigation, and perform an AJAX POST to the server, but if the user has Javascript disabled nothing will happen.

Do you have to use a `<a>` element, or just something that *resembles* a `<a>` element?

Also worth mentioning is to have a look at `AjaxLink`. It allows you to easily use a `<a>` element to perform an AJAX POST.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T01:03:52.853

如果您认为... HTML 中没有用于 POST 的链接标签。这就是为什么您不能强制链接进行 POST（这没有任何意义）。要使用“POST”，你应该“POST”一些东西。这应该是一个表单，或者你可以使用 AJAX 的 javascript 函数进行 POST。无论如何，如果您需要在不发布任何内容的情况下发布，您应该查看您的资源模型，有些东西很臭。

# java - Spring MVC——请求的资源（）不可用

> ID：11488443
> 
> 赞同：3
> 
> 时间：2012-07-15T00:25:05.207
> 
> 标签：java, spring-mvc

我正在开发一个 Spring 3.1 MVC 应用程序，并且我的浏览器中根本没有呈现一个 JSP。相反，我看到一条消息“请求的资源 () 不可用”。任何人都可以帮忙吗？这是我的错误信息。

```
 HTTP Status 404 - 

--------------------------------------------------------------------------------

type Status report

message 

description The requested resource () is not available. 
```

这是GuestBook.jsp。

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<%@ taglib prefix="myTag" uri="commentsTag"%>
<html>
<head>
<title>Granada High School Class of 1986 Comment Page</title>
<!-- Put a confirmation message here once you
     figure out how to do it with Spring -->
<style type="text/css">
p {
    text-align: justify;
}

h1 {
    text-align: center;
}
</style>
</head>
<body>
    <h1>Granada High School Class of 1986 Guest Book</h1>
    <%@ include file="menu.jsp"%><br>
    <b><font color="red"><c:out value='${confirmation}' /></font></b>
    <c:remove var="confirmation" scope="session" />
    <p>This page is a place where you can share memories from high
        school, what you're doing these days, comments about this web site
        (good or bad), etc. The comments will appear at the bottom of the
        page.</p>
    <form:form method="post" action="GuestBook.jsp" modelAttribute="comment">
        <table>
            <tr>
                <td><form:label path="name">Name</form:label></td>
                <td><form:input path="name" /></td>
            </tr>
            <tr>
                <td><form:label path="message">Message</form:label></td>
                <td><form:textarea path="message" rows="10" cols="50" /></td>
            </tr>
            <tr>
                <td><input type="submit" value="Submit comment" /></td>
                <td>&nbsp;</td>
            </tr>
        </table>
    </form:form>
    <br>
    <myTag:comments />
    <%@ include file="footer.jsp"%>
</body>
</html> 
```

这是 com.controller.CommentController.java。

```
package com.controller;

import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

import com.dao.CommentDAO;
import com.model.Comment;

@Controller
@RequestMapping("/GuestBook.jsp")
public class CommentController {
    Comment comment;

    public Comment getComment() {
        return comment;
    }

    public void setComment(Comment comment) {
        this.comment = comment;
    }

    @RequestMapping(value = "/GuestBook", method = RequestMethod.POST)
    public String addComment(@ModelAttribute("comment") Comment comment, BindingResult result) {
        CommentDAO commentDAO = new CommentDAO();
        java.util.Date today = new java.util.Date();
        java.sql.Date date = new java.sql.Date(today.getTime());
        comment.setDate(date);

        if (commentDAO.writeComment(comment) == true) {
            return "redirect:GuestBook.jsp";
        }

        return "redirect:Oops.jsp";
    }

    @RequestMapping("/GuestBook")
    public ModelAndView showComments() {
        return new ModelAndView("comments", "command", new Comment());
    }
} 
```

这是 web.xml。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>Granada High School Class of 1986</display-name>
    <servlet>
        <servlet-name>ghs1986</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>ghs1986</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

    <listener>
        <listener-class>com.configuration.ConfigurationListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <welcome-file-list>
        <welcome-file>home.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

这是 applicationContext.xml。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                http://www.springframework.org/schema/context
                http://www.springframework.org/schema/context/spring-context-3.0.xsd
                http://www.springframework.org/schema/mvc
                http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <mvc:annotation-driven />

    <context:component-scan base-package="com.controller" />

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

</beans> 
```

这是 ghs1986-servlet.xml。

```
<?xml version="1.0" ?>
<!DOCTYPE beans PUBLIC
"-//SPRING//DTD BEAN//EN"
"http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
    <bean name="comment" class="com.model.Comment" />

    <bean name="/GuestBook.jsp" class="com.controller.CommentController">
        <property name="comment" ref="comment" />
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T19:39:35.050

尝试以下操作：

1）在web.xml中，改变

```
<url-pattern>/*</url-pattern> 
```

至

```
<url-pattern>/</url-pattern> 
```

2）移动代码

```
<mvc:annotation-driven />

<context:component-scan base-package="com.controller" />

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean> 
```

从 applicationContext.xml 到 ghs1986-servlet.xml

3) 在 CommentController 中，更改`@RequestMapping("/GuestBook.jsp")`为`@RequestMapping("/GuestBook")`

4) 还在 CommentController 中，改变

```
@RequestMapping("/GuestBook")
public ModelAndView showComments() {
...
} 
```

类似于

```
@RequestMapping("/showComments")
public ModelAndView showComments() {
...
} 
```

现在再次尝试使用`http://localhost:<your_port>/GuestBook/showComments`. 您应该有权访问您的页面。可能还有其他错误，但我们这里只处理 404 错误。

5) 可选（但强烈推荐）：阅读一些文档 + 一个很好[的入门教程](http://blog.springsource.com/2011/01/04/green-beans-getting-started-with-spring-mvc/)，以了解基本的最佳实践以及如何进行设置。

# scala - Scala：是否是唯一的选择？

> ID：11488446
> 
> 赞同：3
> 
> 时间：2012-07-15T00:25:21.853
> 
> 标签：scala, error-handling, either, scala-option

关于潜在的运行时故障，如数据库查询，似乎必须使用某种形式的`Either[String, Option[T]]`才能准确捕获以下结果：

1.  一些（找到的记录）
2.  无（未找到记录）
3.  SQL 异常

选项根本没有足够的选项。

我想我需要深入研究 scalaz，但现在它是直接的，除非我在上面遗漏了一些东西。

我的 DAO 实现让自己陷入了困境，只使用 Either 进行写入操作，但现在我看到一些 Either 写入依赖于 Option 读取（例如检查新用户注册时是否存在电子邮件），这是一个非常糟糕的赌博.

在我全力以赴之前，是否有人有替代解决方案来处理成功/失败/异常的运行时三重奏？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T00:48:39.760

`Box`从奇妙的`lift`框架中尝试。它提供了你想要的。

有关详细信息，请参阅[此 wiki](http://www.assembla.com/spaces/liftweb/wiki/Box)（以及顶部的链接）。幸运的是，电梯项目被很好地模块化，唯一要使用的依赖项`Box`是`net.lift-web % lift-common`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T17:16:13.617

`Option[T]`在 SQLException 的情况下使用`records found`并`no records found`抛出异常。

只需将异常包装在您自己的异常类型中，`PersistenceException`这样您就不会有泄漏的抽象。

我们这样做是因为我们不能也不想从意外的数据库异常中恢复。异常在顶层被捕获，我们的 Web 服务`500 Internal server error`在这种情况下返回 a。

在我们想要恢复的情况下，我们使用`Validation`scalaz，这很像 Lift 的`Box`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:45:10.280

这是我修改后的方法

保留返回查询写入操作（对于我们想要回滚以理解左结果的事务块很有用）。

然而，对于返回查询读取的选项，我没有用 None 吞下异常（并记录它），而是创建了一个 500 错误屏幕，让异常冒泡。

在处理查询异常等运行时失败时，为什么不默认使用 Either 结果类型？使用 Option[T] 读取比使用 Either[Why-Fail, Option[T]] 更方便一些，您必须折叠/映射才能到达 T。离开 Either 来编写操作可以简化事情（更所以鉴于这就是应用程序当前的设置方式，不需要重构 ;-))

唯一需要的其他更改是针对 AJAX 请求。我们不是在 AJAX 状态 div 容器中显示整个 500 错误页面响应，而是检查状态类型并相应地显示 500 错误消息。

```
if(data.status == 500) 
  $('#status > div').html("an error occurred, please try again") 
```

在发送响应之前可能会在服务器端进行 isAjax 检查；在这种情况下，我只能发回状态 + 消息而不是错误页面本身。

# html - css div的表结构

> ID：11488451
> 
> 赞同：1
> 
> 时间：2012-07-15T00:26:38.733
> 
> 标签：html, css

我真的需要帮助将这个简单的表结构转换为 css div。有没有简单的应用程序之类的。CSS div 快把我逼疯了。

```
<table width="100%" border="0">
  <tr>
<td colspan="3" id="Header"></td>
 </tr>
<tr>
<td width="20%" id="Nav2"></td>
<td width="40%" id="ContentMiddleLeft"></td>
<td width="40%" id="ContentMiddleRight"></td>
 </tr>
<tr>
<td colspan="3" id="BottomContent"></td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T00:30:43.943

测试这个：

编辑：http: [//jsfiddle.net/DCbgg/](http://jsfiddle.net/DCbgg/)

```
<style type="text/css" media="screen">
    .container {
        width: 100%;
    }
    .left20 {
        width: 20%;
        float: left;
        background: red;
    }
    .left40 {
        width: 40%;
        float: left;
        background: green;
    }
    .clear {
        clear: both;
    }
</style>

<div class="container">
    <div class="left20">
        Left
    </div>
    <div class="left20">
        Left        
    </div>
    <div class="left40">
        Left
    </div>
<div class="clear"></div>
    <div class="left20">
        Left
    </div>
    <div class="left20">
        Left        
    </div>
    <div class="left40">
        Left
    </div>
</div>
<div class="clear"></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T00:55:08.710

## 第一件事

从通常适用于所有新学习体验`table`的布局更改时，需要记住一些非常重要的事情。`div`

1.  不要因为某事不工作而感到沮丧。休息一下，看看别的东西，记住这是新的东西，它并不总是第一次起作用。在它最终起作用之前，可能需要许多不同的方法和尝试。你最终会掌握它的窍门。

2.  尤其是在这种情况下，请记住它们与`divs`有很大不同`tables`，尤其是在将它们用作网站的主要结构部分时。每个背后的思考过程是完全不同的，可能需要很多时间来习惯它才能点击。因为这：

3.  并非所有设计都从 转移`table`到`div`. 有些事情只有`tables`通过`divs`. 虽然这不是特别是其中一种情况，但在更改站点结构时必须对必须进行一些设计更改持开放态度。

话虽如此，我们现在可以正确回答这个问题。

## 一个答案

这就是我将使用以下方式设置结构的方式`divs`：

```
<div id="wrap">
  <div id="header"></div>

  <div id="content">
    <div id="nav2"></div>
    <div id="content_right"></div>

    <div style="clear: both"></div>
  </div>

  <div id="footer"></div>
</div> 
```

这就是 css 的样子：

```
#wrap {
  width: 100%;
}

#header {
  width: 100%;
  height: /* some height value */;
}

#content {
  width: 100%;
  height: /* some height value */;
}

  #nav2 {
    width: 20%;
    float: left;
  }

  #content_right {
    width: 40%;
    float: right;
  }

#footer {
  width: 100%;
  height: /* some height value */;
} 
```

## 笔记

正如我上面所说的，背后的思考过程`tables`是`divs`相当不同的。使用`tables`，您习惯于使用百分比 ( `%`) 来定义宽度。这有效，不一定是坏事。它完成了工作并且很容易做到。

但是当您使用 时`divs`，更常见的方法是使用像素 ( `px`) 定义的固定宽度。这样可以实现更恒定的设计，不会在页面上延伸，并为您提供更多的设计自由度，因为您知道页面将始终保持相同的宽度。

有关固定宽度设计的更多信息，我建议您查看[960 网格系统](http://960.gs/)。它非常容易遵循，并导致易于构建和样式的干净、美观的设计。

最重要的是，享受带来的新发现的自由`divs`。他们没有被任何东西锁定，可以做任何事情，在任何地方，看起来像页面上的任何东西。他们可以做的事情并没有真正的限制。我听说他们称之为网页唯一需要的部分（你真的可以设计和创建一个只`divs`包含文本的输入页面）。

祝您旅途愉快！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T00:38:34.753

CSS3 样式（使用“display:table;”）：

检查[http://jsfiddle.net/reKfe/](http://jsfiddle.net/reKfe/)（jsFiddle 由[http://query7.com/exploring-the-power-of-css3](http://query7.com/exploring-the-power-of-css3)制成）

# linux - 我可以同时从多个线程为一个套接字调用 accept() 吗？

> ID：11488453
> 
> 赞同：9
> 
> 时间：2012-07-15T00:27:05.817
> 
> 标签：linux, multithreading, sockets, pthreads, posix

我正在使用 Linux 3.2.0、x86_64。我可以同时从多个线程为一个套接字调用 accept() 吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-15T00:45:36.783

是的，您可以从多个线程和多个进程调用`accept()`同一个侦听套接字，尽管它可能没有您想象的那么重要。内核只允许一个成功。当这通过进程完成时，它被称为预分叉，它可以节省`fork()`每个新连接的费用。但是当您处理线程时，您可以更轻松地拥有一个等待新连接队列的现有线程池。一个线程执行`accept`并写入队列，工作线程读取队列并执行其操作。它更干净，这是一个很好理解的模式，你几乎没有损失任何东西。

# java - 偏好活动中的广告“没有足够的空间来展示广告！想要：<480, 75>，有：<432, 1073741823>”

> ID：11488454
> 
> 赞同：4
> 
> 时间：2012-07-15T00:27:16.230
> 
> 标签：java, android, admob

我正在尝试在偏好活动中展示广告，但它从未出现。Logcat 总是显示消息“没有足够的空间来展示广告！想要：<480, 75>，有：<432, 1073741823>”

这就是我制作广告的方式。我对广告有自定义偏好

```
public class AdmobPreference extends Preference {

public AdmobPreference(Context context, AttributeSet attrs, int defStyle) {super    (context, attrs, defStyle);}
public AdmobPreference(Context context, AttributeSet attrs) {super(context, attrs);}
public AdmobPreference(Context context) {super(context);}

@Override
protected View onCreateView(ViewGroup parent) {
    // this will create the linear layout defined in ads_layout.xml
    View view = super.onCreateView(parent);

    // the context is a PreferenceActivity
    Activity activity = (Activity)getContext();

    // Create the adView
    AdView adView = new AdView(activity, AdSize.BANNER, "MY KEY");

    ((LinearLayout)view).addView(adView);

    // Initiate a generic request to load it with an ad
    AdRequest request = new AdRequest();
    adView.loadAd(request);     

    return view;    
}
} 
```

然后我有一个广告放入的布局

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
   android:orientation="vertical"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content">

</LinearLayout> 
```

并使用以下行将其放入首选项 xml 中：

```
<com.my.package.name android:layout="@layout/admob_preference" /> 
```

我可以更改它，以便将布局设置为 width=480dip height=75dip 而不是 wrap_content。这确实会显示广告，但它会被推到屏幕的右侧，并且占用的尺寸略小于预期尺寸的一半（并切断了一半的广告）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T19:54:16.450

看到[类似的问题](https://stackoverflow.com/questions/18274807/not-enough-space-to-show-ad-wants-480-75-has-432-1073741823?rq=1)

将父视图组的填充设置为 0 为我解决了这个问题。

```
@Override
protected View onCreateView(ViewGroup parent) {
    //Next line solves the error by adjusting the padding of the parent ViewGroup
    parent.setPadding(0, 0, 0, 0);

    // this will create the linear layout defined in ads_layout.xml
    View view = super.onCreateView(parent);

    // the context is a PreferenceActivity
    Activity activity = (Activity)getContext();

    // Create the adView
    AdView adView = new AdView(activity, AdSize.BANNER, "MY KEY");

    ((LinearLayout)view).addView(adView);

    // Initiate a generic request to load it with an ad
    AdRequest request = new AdRequest();
    adView.loadAd(request);     

    return view;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T01:06:34.940

我假设您尝试遵循此示例： [PreferenceActivity 中的 Android Admob 广告](https://stackoverflow.com/questions/5019834/android-admob-advert-in-preferenceactivity)

我认为问题在于：您扩展了“首选项”，但随后您尝试从中定义线性布局。相反，只需将其直接添加到您的首选项屏幕即可。

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

...

<com.example.AdmobPreference android:layout="@layout/admob_preference"/>

...
</PreferenceScreen> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-26T07:23:18.857

这可以通过使用`AdSize.FLUID`或`AdSize.SMART_BANNER`动态调整 AD 的宽度和高度来轻松解决。了解更多[信息](https://developers.google.com/android/reference/com/google/android/gms/ads/AdSize)

# .net - 当 GC 进入用户线程时，到底发生了什么？

> ID：11488456
> 
> 赞同：1
> 
> 时间：2012-07-15T00:28:14.350
> 
> 标签：.net, .net-4.0, garbage-collection

我在这里看到了这些图表：http: [//msdn.microsoft.com/en-us/library/ee787088.aspx](http://msdn.microsoft.com/en-us/library/ee787088.aspx) 好几年了，我以为我理解了它们。但是当我试图想象发生了什么时线程实际上我不能..

可以说 - 当 GC 不是在专用线程上而是在触发 GC 的线程上运行时。

查看名为“垃圾收集期间发生的情况”的部分。

查看红色箭头 - 这应该是在用户线程上运行的 GC。

因此，假设我有一个在线程中运行的工作方法，并且该工作人员运行一个循环。然后在某个时间点 GC kciks in..

我的问题是——当 GC 开始然后结束时，我的线程到底会发生什么。

*   **会有上下文切换吗？**
*   **是否会分配新的线程上下文并加载新的堆栈以供 GC 运行？**
*   **GC 代码究竟是如何在别人的线程中执行的**（对我来说最令人费解）......线程分配了堆栈并加载了代码.. GC 代码是如何执行的 - 我什至无法想象这件作品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:50:19.587

GC如何在别人的线程上执行？它没有，因为“你的”线程并不是你的线程；它们是 CLR 的线程！

CLR 可以处理你的线程堆栈，更不用说你的线程代码，它允许它做一些叫做`thread hijacking`. 基本上，它会修改调用堆栈上的返回指针，这样，一旦当前方法返回，您的代码就会被转移到一个允许垃圾收集器运行的特殊函数中。一旦 GC 完成，程序就可以返回到您的用户代码中的适当位置，一切照常进行。

# model - 在 Maya 中构建手部模型及其投影

> ID：11488458
> 
> 赞同：0
> 
> 时间：2012-07-15T00:29:15.690
> 
> 标签：model, projection, maya

作为手部检测问题的一部分，我想构建 3D 手部模型并将其投影（例如 X 轴旋转 15..+15 度，Z 轴 -5..+5 度...，缩放...）到用于模板匹配的图像。

Maya 是否适合这个（我不知道如何构建和导出模型投影（> 300） - 不是手动）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:06:20.837

如果您已经知道执行单个操作的手动过程，并且想要创建一个脚本以自动方式重现该方法，那么最简单的方法是在执行单个过程并记录所有过程时观看脚本编辑器执行的命令。由此，您可以拼凑出一个脚本。

Maya 提供[高级 python 命令模块](http://download.autodesk.com/global/docs/maya2012/en_us/CommandsPython/index.html)，以及[与 C++ API 的低级 python 绑定](http://download.autodesk.com/global/docs/mayasdk2012/en_us/index.html)。

如果你刚开始学习 Maya 脚本，我可以做一个不要脸的插件，推荐我的 2 个 Python 编程学习教程：[Vol1](http://www.cmivfx.com/tutorials/view/320/Python+Introduction+Vol+01+-+Maya) & [Vol2](http://www.cmivfx.com/tutorials/view/328/Python+For+Maya+Vol+02)

# python - 为什么这个集合理解不起作用？

> ID：11488459
> 
> 赞同：13
> 
> 时间：2012-07-15T00:30:21.157
> 
> 标签：python

在 Python 2.6.5 中，给定这个列表 mylist = [20, 30, 25, 20]

为什么这个集合理解不起作用？

```
>>> {x for x in mylist if mylist.count(x) >= 2}
  File "<stdin>", line 1
    {x for x in mylist if mylist.count(x) >= 2}
         ^
SyntaxError: invalid syntax 
```

谢谢你。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-15T00:35:50.210

```
$ python2.6
>>> mylist = [20, 30, 25, 20]
>>> {x for x in mylist if mylist.count(x) >= 2}
  File "<stdin>", line 1
    {x for x in mylist if mylist.count(x) >= 2}
         ^
SyntaxError: invalid syntax

$ python2.7
>>> mylist = [20, 30, 25, 20]
>>> {x for x in mylist if mylist.count(x) >= 2}
set([20]) 
```

您可以在 python2.6 中使用显式`set`和 a来完成结果`generator`：

```
>>> set(x for x in mylist if mylist.count(x) >= 2)
set([20]) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-15T00:32:59.983

你使用的是什么版本的 Python？集合[推导出现在 2.7.x+ 和 3.x+](http://en.wikipedia.org/wiki/List_comprehension#Set_comprehension)中。如果您使用的是旧版本，您将获得`SyntaxError: invalid syntax`：

```
>>> {x for x in mylist if mylist.count(x) >= 2}
  File "<stdin>", line 1
    {x for x in mylist if mylist.count(x) >= 2}
         ^
SyntaxError: invalid syntax 
```

Python 2.7.x+ / 3.x+ 并非如此：

```
>>> {x for x in mylist if mylist.count(x) >= 2}
set([20]) 
```

# php - zencoder 通知 json

> ID：11488460
> 
> 赞同：1
> 
> 时间：2012-07-15T00:30:27.233
> 
> 标签：php, json, video

我正在处理一些关于 PHP 的视频，使用 zencoder 对视频进行编码，将它们保存在 s3 上，然后在完成后通知我的网站。一切正常，直到我必须处理以 json 形式返回的通知并将新 url 拉出到保存的视频。

这个：

```
$notification = $zencoder->notifications->parseIncoming();

if($notification->job->state == "finished")
{
    $encode_id=$notification->job->id;
} 
```

工作正常。我只需要一些关于访问 url 的指示。

通知发送为：

```
{
    "output": {
        "frame_rate": 30.0,
        "label": "video_id_",
        "total_bitrate_in_kbps": 3115,
        "md5_checksum": null,
        "channels": "2",
        "audio_codec": "aac",
        "duration_in_ms": 4225,
        "video_codec": "h264",
        "url": "http://my_url/597bd3592bf4a9d70f04dc676c44de6d.mp4",
        "thumbnails": [{
            "label": null,
            "images": [{
                "url": "http://my_url/_key__0000.png",
                "format": "PNG",
                "dimensions": "640x360",
                "file_size_bytes": 482422
            }]
        }],
        "video_bitrate_in_kbps": 3052,
        "width": 640,
        "format": "mpeg4",
        "height": 360,
        "audio_sample_rate": 44100,
        "state": "finished",
        "audio_bitrate_in_kbps": 63,
        "id": 41424918,
        "file_size_in_bytes": 1625847
    },
    "input": {
        "frame_rate": 30.0,
        "total_bitrate_in_kbps": 3867,
        "md5_checksum": null,
        "channels": "2",
        "audio_codec": "aac",
        "duration_in_ms": 4167,
        "video_codec": "h264",
        "video_bitrate_in_kbps": 3764,
        "width": 640,
        "format": "mpeg4",
        "height": 360,
        "audio_sample_rate": 44100,
        "state": "finished",
        "audio_bitrate_in_kbps": 103,
        "id": 22371764,
        "file_size_in_bytes": 2028809
    },
    "job": {
        "created_at": "2012-07-14T22:25:08Z",
        "test": true,
        "updated_at": "2012-07-14T22:25:47Z",
        "submitted_at": "2012-07-14T22:25:08Z",
        "pass_through": null,
        "state": "finished",
        "id": 22377083
    }
} 
```

但类似： `$video_file=$notification->output->url;`没有。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T23:34:15.493

If you don't want to use the parseIncoming method... Use:

```
$notification = json_decode(trim(file_get_contents('php://input')), true); 
```

as apposed to:

```
$notification = $zencoder->notifications->parseIncoming(); 
```

The second paramater of 'true' will format the results as an array as apposed to an object. From there, you can access all the values like:

```
$notification['output']['file_size_in_bytes']; 
```

The parseIncoming method will return a stdClass, so referencing values within it is done with:

```
$notification->key 
```

# asp.net - 使用 SignalR 进行表单身份验证

> ID：11488461
> 
> 赞同：6
> 
> 时间：2012-07-15T00:30:42.250
> 
> 标签：asp.net, authentication, signalr

我已经浏览了 SignalR 上的 wiki，但仍然无法弄清楚如何使用 SignalR 进行表单身份验证。我想使用用户名/密码调用对集线器（或持久连接）的调用，并能够将重定向返回到经过身份验证的页面，以及设置表单身份验证 cookie。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T09:44:23.623

不要通过 SignalR 进行表单身份验证。在 SignalR 之外执行此操作（就像您通常那样），然后您可以检查以确保传入呼叫和集线器的订阅者经过身份验证。

# html - Chrome Div 区域没有扩展到全宽？

> ID：11488465
> 
> 赞同：1
> 
> 时间：2012-07-15T00:30:55.853
> 
> 标签：html, css

我四处搜索，找不到这个已经问过的问题，但我敢肯定它之前一定出现过，但我找不到。很抱歉，如果这是一个重复的问题。

我正在处理一个简单的站点布局。我今天在 chrome 中注意到 2 个 div 区域没有完全扩展到宽度。在 Firefox 和 IE 中，它们确实完全扩展。2 个有问题的 div 区域确实包含表格。这可能是原因吗？

这是一张图片，右侧是 Chrome，顶部 div 和底部页脚 div 上有间隙：

![铬间隙](../Images/c8a45b7d893dd88d1cb6e783a458f6b2.png)

这是两个区域的 CSS：

```
.topbar{
    margin: 0;  <---Added this in a hope to fix it.
    width:76%;
    height: 34px;
    background-image:url('img/topImgBg.png');
    background-repeat:repeat-x;
    padding-left: 12%;
    padding-right: 12%; 
    color:white;
    font-size:12px;
    text-align:right;
}

.footer{
    height:15%;
    width:76%;
    padding-left:12%;
    padding-right:12%;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#A1A1A1', endColorstr='#ffffff'); 
    background: -webkit-gradient(linear, left top, left bottom, from(#A1A1A1), to(#ffffff)); 
    background: -moz-linear-gradient(top,  #A1A1A1,  #ffffff);
} 
```

和正文 CSS：

```
html, body {    
    margin: 0; 
    padding: 0;
    width: 100%; 
    min-width:1024px;
    font-family:Verdana;
    font-size:14px;
} 
```

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T01:39:51.377

您已`width`设置为`76%`. `padding`左右也是百分比。我认为这是浏览器中的百分比舍入差异。

如果您以非常小的增量更改浏览器宽度，您可能会发现间隙会发生变化。

如果您没有指定任何内容`width`，而只是保留了`padding`您现在所拥有的内容，该怎么办。那应该行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T23:33:09.327

如果您将父容器设置为

```
display: table; 
```

和孩子阻止

```
display: table-cell; 
```

chrome 将正确计算百分比（只要它们加起来为 100%）。例如：

```
<ul>
    <li class="forty">asdf
    <li class="forty">asdf
    <li class="twenty">asdf
</ul>

<style>
    ul { display: table; width: 100%; list-style: none; margin: 0; padding: 0; }
    li.forty { display: table-cell; width: 40%; }
    li.twenty { display: table-cell; width: 20%; }
</style> 
```

# report - 微软报告如果有足够的空间 rdlc 会在同一页重复表格

> ID：11488467
> 
> 赞同：2
> 
> 时间：2012-07-15T00:31:28.077
> 
> 标签：report, rdlc, tabular

我在报告中需要帮助 (.rdlc)

该报告有表格，它的宽度只占宽度的一半，其余空间为空。

如果有足够的空间，我需要让表格在同一页重复。

例如，如果页面是这样的：

**第 1 页：** 序列名称

1.  玛丽
2.  拉里
3.  卡尔
4.  杰斯

**第2页：** 序列名称

5.  保罗
6.  哈利

它应该是这样的：

**第 1 页：** 序列名称

1.  玛丽 5\. 保罗
2.  拉里 6\. 哈利
3.  卡尔
4.  杰斯

# javascript - 带有单击以在鼠标离开时显示和隐藏的 jQuery 菜单

> ID：11488475
> 
> 赞同：0
> 
> 时间：2012-07-15T00:33:15.660
> 
> 标签：javascript, jquery, html

目前它显示 div 而不是隐藏它们，单击它会隐藏，以便您可以看到运动。应该是 .show 而不是 .hide。单击链接时， li 应向下滑动，而在 mouseleave 上应向上滑动。

工作示例[http://jsfiddle.net/DTqDD/3/](http://jsfiddle.net/DTqDD/3/)

jQuery：

```
$(function() {
     var toggleMenu = function(e) {
         var self = $(this),
             elemType = self[0].tagName.toLowerCase(),
             //get caller
             menu = null;
         if (elemType === 'a') {
             //anchor clicked, nav back to containing ul
             menu = self.parents('ul').not('ul#mainmenu');
         } else if (elemType === 'ul') {
             //mouseleft ul, ergo menu is this.
             menu = self;
         }
         if (menu) {
             menu.hide('medium');
         }
         e.preventDefault();
         return false;
     };

    $(document).ready(function() {
         $('a.drop').click(function(e) {
             $('li#mainmenudrop').show('medium');
             console.log('div clicked');
             e.preventDefault();
             return false;
         });
         $('li#mainmenudrop a').click(toggleMenu);
         $('li#mainmenudrop').mouseleave(toggleMenu);
     });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:07:06.410

On`li`标签更改`id="mainmenudrop"`为，`class="mainmenudrop"`因为它不是有效的 HTML。然后使用下面的 jQuery 代码。

```
$(document).ready(function() {
     $('a.drop').click(function(e) {
         $(this).next("div").show('medium');
         console.log('div clicked');
         e.preventDefault();
         return false;
     });
    $('li.mainmenudrop').mouseleave(function() {
        $(this).children("div").hide('medium');
    });
});​ 
```

这可能是你想要完成的事情吗？

**编辑：** 如果您希望在开头隐藏 div，只需添加以下 CSS：

```
.mainmenudrop div {
    display: none;
} 
```

# java - 如何检查输入字符串是否包含空格？

> ID：11488478
> 
> 赞同：28
> 
> 时间：2012-07-15T00:34:27.123
> 
> 标签：java, regex

我有一个询问 XML 元素名称的输入对话框，我想检查它是否有空格。

我可以做类似 name.matches() 的事情吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-15T00:37:16.110

为什么使用正则表达式？

```
name.contains(" ") 
```

这应该同样有效，而且速度更快。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-06-17T14:44:29.543

如果您将使用 Regex，它已经为任何非空白字符提供了预定义的字符类“\S”。

```
!str.matches("\\S+") 
```

告诉您这是否是一个至少包含一个字符的字符串，其中所有字符都是非空格

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-01-30T22:01:30.687

一个与前面类似的简单答案是：

```
str.matches(".*\\s.*") 
```

*   第一个“.*”表示空格前面可以有零个或多个任何字符的实例。
*   "\\s" 表示它必须包含任何空白字符。
*   最后一个“.*”表示空格后​​面可以有零个或多个任何字符的实例。

将所有这些放在一起时，如果字符串中的任何位置有一个或多个空格字符，则返回 true。

这是一个简单的测试，您可以运行它来对您的解决方案进行基准测试：

```
boolean containsWhitespace(String str){
    return str.matches(".*\\s.*");
}

String[] testStrings = {"test", " test", "te st", "test ", "te   st", 
                        " t e s t ", " ", "", "\ttest"};
for (String eachString : testStrings) {
        System.out.println( "Does \"" + eachString + "\" contain whitespace? " + 
                             containsWhitespace(eachString));
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-15T00:36:44.890

```
string name = "Paul Creasey";
if (name.contains(" ")) {

} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-15T01:48:26.243

```
if (str.indexOf(' ') >= 0) 
```

会（稍微）快一些。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-15T00:42:15.170

如果你真的想要一个正则表达式，你可以使用这个：

```
str.matches(".*([ \t]).*") 
```

从某种意义上说，与此正则表达式匹配的所有内容都不是有效的 xml 标记名称：

```
if(str.matches(".*([ \t]).*")) 
      print "the input string is not valid" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-04T03:33:59.843

**这是在 android 7.0 到 android 10.0 中测试的，它可以工作**

使用这些代码检查字符串是否包含空格/空格可能位于第一个位置、中间或最后一个位置：

```
 name = firstname.getText().toString(); //name is the variable that holds the string value

 Pattern space = Pattern.compile("\\s+");
 Matcher matcherSpace = space.matcher(name);
 boolean containsSpace = matcherSpace.find();

 if(constainsSpace == true){
  //string contains space
 }
 else{
  //string does not contain any space
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-17T05:21:33.123

您可以使用此代码检查输入字符串是否包含空格？

```
public static void main(String[]args)
{
    Scanner sc=new Scanner(System.in);
    System.out.println("enter the string...");
    String s1=sc.nextLine();
    int l=s1.length();
    int count=0;
    for(int i=0;i<l;i++)
    {
        char c=s1.charAt(i);
        if(c==' ')
        {
        System.out.println("spaces are in the position of "+i);
        System.out.println(count++);
        }
        else
        {
        System.out.println("no spaces are there");
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-10T14:52:20.963

要检查字符串是否不包含任何空格，您可以使用

```
string.matches("^\\S*$") 
```

例子：

```
"name"        -> true
"  "          -> false
"name xxname" -> false 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-18T14:31:49.663

您可以使用正则表达式“\\s”</p>

计算空格数的示例程序**（Java 9 及更高版本）**

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Main {
  public static void main(String[] args) {

    Pattern pattern = Pattern.compile("\\s", Pattern.CASE_INSENSITIVE);        
    Matcher matcher = pattern.matcher("stackoverflow is a good place to get all my answers");        

    long matchCount = matcher.results().count();   

    if(matchCount > 0) 
      System.out.println("Match found " + matchCount + " times.");           
    else 
      System.out.println("Match not found");        
  }
} 
```

对于**Java 8 及更低**版本，您可以在 while 循环中使用 matcher.find() 并增加计数。例如，

```
int count = 0;
while (matcher.find()) {
  count ++;
} 
```

# c++ - 架构 x86_64 的未定义符号 - 编译继承的类

> ID：11488486
> 
> 赞同：0
> 
> 时间：2012-07-15T00:35:31.293
> 
> 标签：c++, g++, undefined, abstract

我目前有一个抽象的用户类和一个从用户继承的学生类。我正在尝试从 main 初始化 Student 类的实例。我收到此错误

> 架构 i386 的未定义符号：“Student::Student()”，引用自：ccJo7npg.o 中的 _main “Student::~Student()”，引用自：ccJo7npg.o 中的 _main ld：未找到符号架构 i386 collect2：ld 返回 1 个退出状态

用户等级：

```
#include <iostream>
#import <stdio.h>
#import <string.h>
using namespace std;

class User
    {
public:
    void setName(const string n)
{
    name = n;
}
string getName()
{
    return name;
}
void setUsername(const string u)
{
    username = u;
}
string getUsername()
{
    return username;
}
void setPassword(const string p)
{
    password = p;
}
string getPassword()
{
    return password;
}
void setID(const int ID)
{
    this->ID=ID;
}
int getID()
{
    return ID;
}
void setClassID(const int cid)
{
    classID=cid;
}
int getClassID()
{
    return classID;
}
void logOut()
{
    cout<<"you have logged out"<<endl;
}
void print()
{
    cout<< "Student : "<< ID << name << " "<< username << " " << password << endl;
}
virtual void menu()=0;
protected:
   int classID, ID;
   string name, username, password;
}; 
```

学生班级：

```
#include <iostream>
#include "User.h"
using namespace std;

class Student: public User
{
public:
Student()
{
    classID=0;
    ID=0;
    username="";
    name="";
    password="";
}
~Student()
{
    cout<<"destructor"<<endl;
}
void studyDeck(const int i)
{

}
void viewScores(const int)
{

}
void viewScores()
{

}
virtual void menu()
{
    cout << "Student menu" << endl;
}
}; 
```

主要.cpp：

```
#include <iostream>
#include "User.h"
#include "Student.h"
using namespace std;

int main()
{
    Student s;
    return 0;
} 
```

我正在使用带有“ g++ User.cpp Student.cpp main.cpp ”的 g++ 进行编译

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:06:26.413

GCC 没有为 Student 构造函数和析构函数生成代码，因为它们是在类声明中定义的。这就是为什么这些符号丢失并产生链接错误的原因。至少，您需要将 Student 构造函数和析构函数的函数体移到类声明之外，并在定义中仅提供签名（无主体）：

```
class Student: public User 
{
Student();
~Student();
...
}; 
```

您可以在类定义之后在 Student.cpp 中定义这些函数体，如下所示：

```
Student::Student()
{
    classID=0;
    ID=0;
    username="";
    name="";
    password="";
}

Student::~Student()
{
    cout<<"destructor"<<endl;
} 
```

虽然这不是必需的，但您*应该*将*所有*函数定义与其实现分开。为此，您将省略 Student.cpp 文件中的类定义；而是在 Student.cpp 中包含 Student.h（即使您没有发布 Student.h，它似乎是正确的，否则程序不会编译）。换句话说，“Student.h”将包含“class Student { ... };” 只有函数签名，大括号内没有函数体，“Student.cpp”将包含所有具有函数体的函数定义，例如：

```
void Student::menu()
{
    cout << "Student menu" << endl;
} 
```

如果这样做，您还需要在 .h 文件中使用 #ifndef 保护，正如 Kevin Grant 解释的那样。您将以相同的方式对待 User.cpp 和 User.h。

# python - Tkinter 顶级通信

> ID：11488487
> 
> 赞同：0
> 
> 时间：2012-07-15T00:35:35.273
> 
> 标签：python, tkinter

如果我有一个按钮执行与一个顶级窗口或根相关的处理程序 - 它可以修改另一个顶级窗口中的小部件吗？这样做的标准方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T00:41:43.917

我在 Tkinter 方面没有经验，但我确信它与 PyQt4 没有什么不同。通常你想要父子关系。父小部件包含子小部件并且可以修改它们。孩子们通常不应该对他们的父母了解太多，并且会通过信号或事件进行交流。

当处理程序触发时，它应该可以自由地修改它知道的小部件。也就是说，如果您的顶级窗口有 10 个小部件，并且包含作为方法的处理程序，则应该允许该方法通过`self`属性修改这 10 个小部件。

就像是：

```
class MyTopWindow:

    def __init__(self):
        self.widget1 = Widget
        self.widget2 = Widget
        self.button = Button

        #self.button.clicked -> self.handler   

    def handler(self):
        self.widget1.someAttribute = 1

button.click() # -> handler() 
```

您利用组合在小部件内部构建小部件。您应该避免的是处理程序对它实际上不拥有的全局小部件进行一些引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:10:34.747

是的，按钮（或任何事件）的处理程序可以修改任何其他顶层中的任何小部件。只要该处理程序具有对小部件的引用，处理程序就可以对其进行修改。在这方面没有限制。

# c++ - vector::push_back 坚持使用复制构造函数，尽管提供了移动构造函数

> ID：11488490
> 
> 赞同：18
> 
> 时间：2012-07-15T00:36:01.980
> 
> 标签：c++, gcc, c++11, move-constructor

我从 gcc 收到一个奇怪的错误，不知道为什么。我制作了以下示例代码以使问题更加清晰。基本上，定义了一个类，我将其复制构造函数和复制赋值运算符设为私有，以防止意外调用它们。

```
#include <vector>
#include <cstdio>
using std::vector;

class branch 
{
public:
  int th;

private:
  branch( const branch& other );
  const branch& operator=( const branch& other );

public:

  branch() : th(0) {}

  branch( branch&& other )
  {
    printf( "called! other.th=%d\n", other.th );
  }

  const branch& operator=( branch&& other )
  {
    printf( "called! other.th=%d\n", other.th );
    return (*this);
  }

};

int main()
{
  vector<branch> v;
  branch a;
  v.push_back( std::move(a) );

  return 0;
} 
```

我希望这段代码能够编译，但是 gcc 失败了。实际上 gcc 抱怨“branch::branch(const branch&) 是私有的”，据我所知不应该被调用。

赋值运算符有效，因为如果我将 main() 的主体替换为

```
branch a;
branch b;
b = a; 
```

它将按预期编译和运行。

这是 gcc 的正确行为吗？如果是这样，上面的代码有什么问题？任何建议对我都有帮助。谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-15T02:25:08.833

尝试将“noexcept”添加到移动构造函数的声明中。

我不能引用标准，但最近版本的 gcc 似乎要求复制构造函数是公共的，或者将移动构造函数声明为“noexcept”。无论“noexcept”限定符如何，如果您将复制构造函数设为公开，它将在运行时按您预期的方式运行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-17T20:00:34.737

与上一个答案所建议的不同，gcc 4.7拒绝此代码是错误的，该错误已*在*[gcc 4.8 中得到纠正](http://ideone.com/MVTJ0G)。

完全符合标准的行为`vector<T>::push_back`是：

*   如果只有一个复制构造函数而没有移动构造函数，`push_back`将复制它的参数，并给出强大的异常安全保证。也就是说，如果由于重新分配向量存储引发的异常而导致 push_back 失败，则原始向量将保持不变且可用。这是 C++98 中的已知行为，也是随后出现混乱的原因。
*   如果 , 有一个`noexcept`移动构造函数`T`，`push_back`将从它的参数*移动*，并给出强异常保证。这里没有惊喜。
*   如果存在*不* `noexcept`存在的移动构造函数并且也存在复制构造函数，`push_back`则会*复制*对象并给予强大的异常安全保证。这乍一看是出乎意料的。虽然`push_back`可以移到这里，但这只能以牺牲强大的异常保证为代价。如果您将代码从 C++98 移植到 C++11 并且您的类型是可移动的，那将默默地改变现有`push_back`调用的行为。为了避免这个陷阱并保持与 C++98 代码的兼容性，C++11 回退到较慢的副本。这就是 gcc 4.7 行为的全部内容。但还有更多...
*   如果存在移动构造函数，`noexcept`但根本没有复制构造函数——即元素只能移动而不能复制——`push_back`将执行移动但*不会*提供强大的异常安全保证。这就是 gcc 4.7 出错的地方。在 C++98 中，对于可移动但不可复制的类型没有`push_back`s。所以在这里牺牲强大的异常安全性并不会破坏现有的代码。这就是为什么它被允许并且原始代码实际上是合法的 C++11。

请参阅[cppreference.com](http://en.cppreference.com/w/cpp/container/vector/push_back)：`push_back`

> 如果抛出异常，此函数无效（强异常保证）。
> 
> 如果 T 的 move 构造函数不是 noexcept 并且无法访问复制构造函数，则 vector 将使用 throwing move 构造函数。如果它抛出，则放弃保证并且未指定效果。

或者来自 C++11 标准的更复杂的第 23.3.6.5 条（重点由我添加）：

> 如果新大小大于旧容量，则导致重新分配。如果没有发生重新分配，则插入点之前的所有迭代器和引用仍然有效。如果异常被 T 的复制构造函数、移动构造函数、赋值运算符或移动赋值运算符或任何 InputIterator 操作引发，则没有任何影响。**如果非 CopyInsertable T 的移动构造函数抛出异常，则未指定效果。**

或者，如果您不喜欢阅读，[Scott Meyer 的 Going Native 2013 演讲](http://channel9.msdn.com/Events/GoingNative/2013/An-Effective-Cpp11-14-Sampler)（从 0:30:20 开始，有趣的部分大约在 0:42:00）。

# r - 根据第二个数据集中的元数据从数据集中提取数据

> ID：11488492
> 
> 赞同：2
> 
> 时间：2012-07-15T00:36:42.823
> 
> 标签：r, subset

有没有人建议如何根据存储在第二个数据集中的元数据从数据集中提取列？只是想知道是否有一种相对简单的方法（例如使用“colnames”或“subset”）。我的原始数据集非常大，有 100 多列和 30,000 多行。打开文件并在 Excel 中选择是一种痛苦。

这里有两个示例数据集：

```
set1 <- data.frame(ID = rnorm(5, 5000, 1000), Sample1 = rnorm(5, 50000, 2500), 
Sample2 = rnorm(5, 50000, 2500), Sample3 = rnorm(5, 50000, 2500), 
Sample4 = rnorm(5, 50000, 2500), Sample5 = rnorm(5, 50000, 2500))

meta.data <- data.frame(Sample_name = c("Sample1", "Sample2", "Sample3", 
"Sample4", "Sample5"), Location = c("Loc1", "Loc2", "Loc3", "Loc1", "Loc1"), 
Time = c("M0", "M01", "M02", "M02", "M03"), 
Conc = c("lo", "hi", "lo", "lo", "lo")) 
```

(1) 我怎样才能提取（作为一个新的数据集）位置 Loc1 的所有样本或时间 M02 的所有样本？

(2) 如何提取具有特定 ID 号的行并仅选择该行中具有 Conc“lo”的样本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T00:55:55.903

这是一种方法，涉及转换`set1`为长数据格式，然后将其加入`meta.data`：

```
library(reshape2)
set1.m <- melt(set1)
merge(set1.m, meta.data, by.x = "variable", by.y = "Sample_name", all = TRUE)
#-----
   variable     value Location Time Conc
1        ID  4168.153     <NA> <NA> <NA>
2        ID  5402.048     <NA> <NA> <NA>
..
..
29  Sample5 49668.695     Loc1  M03   lo
30  Sample5 52869.040     Loc1  M03   lo 
```

我不确定 ID 列是否应该被熔化。如果没有，您可以简单地将`melt`呼叫更改为`set1.m <- melt(set1, id.vars = "ID")`。

无论如何，这种格式的数据现在可以直接使用`subset()`或`[`运算符进行子集化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T01:50:45.310

不确定这是否是最好的方法，合并可能更合适，但这里是如何做一些子集：

(1) 我如何从 Location Loc1 中提取（作为新数据集）所有样本......

```
#get a list of the samples all from Location Loc1
as.character(meta.data$Sample_name[meta.data$Location=="Loc1"])
#use this list of samples to subset the set1 data
set1[c("ID",as.character(meta.data$Sample_name[meta.data$Location=="Loc1"]))]

        ID  Sample1  Sample4  Sample5
1 3836.499 53304.29 47720.79 49504.96
2 4620.443 49406.93 49123.49 50419.93
3 5614.903 44413.93 50387.27 48652.29
4 6676.880 52732.63 48282.92 53544.17
5 3926.077 52593.59 50204.96 49563.13 
```

(2) 如何提取具有特定 ID 号的行并仅选择该行中具有 Conc“lo”的样本？

由于示例是随机数，我刚刚用作此处`set1$ID[1]`选择的替代品。`ID`只需用类似的东西替换它`set1$ID=="idnum1"`

```
subset(set1,set1$ID==set1$ID[1])[c("ID",as.character(meta.data$Sample_name[meta.data$Conc=="lo"]))]

        ID  Sample1  Sample3  Sample4  Sample5
1 3836.499 53304.29 49706.58 47720.79 49504.96 
```

# php - PHP通过AJAX更新字段值

> ID：11488498
> 
> 赞同：-2
> 
> 时间：2012-07-15T00:37:58.463
> 
> 标签：php, javascript, ajax

我有一个项目表，当用户选择一个项目时，我想将该 id 设置为一个 php 变量，因此当它点击“确定”按钮时，我将该项目与用户相关联。他一次只能选择一项。我尝试了一些 php / ajax 教程，但似乎没有用。

以下是代码：

```
<table id="tableItens" style="border:1px solid #000000;" cellpadding="0" cellspacing="0">
<tbody>
    <?php foreach($produtoList as $produto) {
        if ($columnCounter == 0) { ?>
            <tr style="background-color:#FFFFFF;">
        <?php    
        } 
    ?>              
            <td id="<?php echo $produto['id'] ?>" width=160px; height="110" onclick="<?php echo 'selectRow(' . $produto['id'] . ');' ?>" style="text-align: center; border:1px solid #000000;border-bottom:0;"><?php echo'<img align="center" width="150" height="100" src="/resources/images/' . $produto['nome_imagem'] . '"></img>' ?></td>
            <?php $columnCounter++; ?>                  
        <?php if ($columnCounter == 3) { 
            $columnCounter = 0; ?>
            </tr>
        <?php } ?>      
    <?php } ?>
</tbody> 
```

```
<script type="text/javascript">
function selectRow(id) {
  var table = document.getElementById("tableItens");
  document.getElementById(id).style.backgroundColor = 'red';

  $.ajax
  ({
      type: "POST",
      url: "vote.php",
      data: id,
      cache: false,
      success: function(data)
      {

        alert("ok");
      }
 });    
}
</script> 
```

我必须包含一个ajax文件或其他东西吗？也许是一个 jquery 参考？

我在页面开头使用了 var_dump($_POST) 并且没有显示任何内容。我正在将值发送到我所在的同一页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T01:32:13.530

关于数据字段不正确的答案是正确的，但这种简单的东西不应该是“POST”，而应该只是一个 GET，根本不需要“数据”字段。只需将 URL 字段更改为："vote.php?id=" + id

像这样：

```
$.ajax 
({ 
    type: "GET", 
    url: "vote.php?id=" + id, 
    cache: false, 
    success: function(data) 
    {  
       alert("ok"); 
    } 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T00:47:27.483

您没有正确设置 ajax 请求的数据。参考[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

> **data**：要发送到服务器的数据...对象必须是键/值对

**注意：**它也可以是字符串，但您必须正确格式化

尝试

```
 data: {uid : id}, 
```

当然，你必须包含对 jQuery 的引用，你正在使用 jQuery

为了测试这样的东西，我建议使用大多数现代浏览器通常附带的 JS 控制台。您可以将 POST 更改为 GET 并查看生成的 URL 类型。

# php - PHP 问题与备选方案

> ID：11488499
> 
> 赞同：0
> 
> 时间：2012-07-15T00:38:07.650
> 
> 标签：php

我在这里遇到了 PHP 的一个大问题，我需要你的帮助。我在 PHP 中用替代方法创建问题。每个问题将有 4 个选项。问题将被插入到一个名为 questions 的表中，所有备选方案将被插入到另一个名为 Alternatives 的表中。每个问题都有自己的 id，甚至每个备选方案也都有自己的 id。但是每组备选方案也会有问题 id，以了解哪个备选方案属于哪个问题。然后我将它们选为单选按钮。例如，如果我们有两个问题，例如

1.  澳大利亚首都叫什么名字？（假设这个问题的 id 编号为 1）
    A）悉尼
    B）新德里
    C）堪培拉
    D）麦米
    以上所有这些替代方案都有自己的 id，在这种情况下，问题 id 为 1。

2.  什么是 89 + (3*9) （假设这个问题的编号为 3）
    A）116
    B）117
    C）115
    D）112

在这种情况下，上面所有这些替代方案都将有自己的 id 和问题 id 为 3。

3\. 一个物体从 100 米高的塔顶掉下。t秒后其离地高度为100-4.9t2 m。掉落后 2 秒失败的速度有多快？
A）98m
B） 78m
C）56m
D）没有一个
等等......

这是我的代码：

```
if (isset($_REQUEST['submit']) && $_REQUEST['submit'] != "") {
    $questions = $_POST['questions']; 

    $alternatives = $_POST['alternatives']; 

    if(isset($_POST['questions']) && $_POST['questions'] != '')
    {

        foreach($questions as $q) {

            if($q !='') {

                $sql1 = " INSERT INTO questions (question) ".
                        " VALUES ('".$q."'); ";
                if (!db_query($sql1)) 
                    $errors['err']='Unable to create question';
                $question_id[] = mysql_insert_id(); 
            }

        }

        foreach($question_id AS $q_id) { // I think here is the problem but I don't know how to solv'

            foreach($alternatives as $alt){

                if($alt !=''){
                    $sql =  " INSERT INTO alternatives (alternative, question_id) ".
                                " VALUES ('".$alt."', ".$q_id."); ";
                                if (!db_query($sql))
                    $errors['err']='Unable to create alternatives';
                 }

            }

        }

    }

}

<form action="test.php" method="POST" enctype="multipart/form-data"><br /><br /><br />
for($i=1; $i<=10; ++$i){
$i.") "?><input type="text" name="questions[]" value="" size="100"/><br />
<br /><p>Alternatives:</p><br /> 
for($j=1; $j<=4; ++$j){
<input type="text" name="alternatives[]" value="" /><br /> } }
<input type="submit" name="submit" value="Send"></input>
 <input class="button" type="reset" value="Reset" />

</form> 
```

对不起我的代码..在这里写起来很困难。但正在发生的是：

所有 12 个备选方案都插入了 3 次，每次都得到相同的 question_id。我的意思是前 12 个备选方案得到 question_id 1 ，然后再次插入这 12 个备选方案，它们得到 question_id = 2 ，依此类推....我想要的是前四个备选方案得到 question_id 1，第二个问题的备选方案将有 question_id nr 2 等等。我不知道如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T01:21:55.160

Why don't you add the question number to the name of the input as a key:

```
<form action="test.php" method="POST" enctype="multipart/form-data"><br /><br /><br />
<?php 
for($i=1; $i<=10; ++$i){?>
<input type="text" name="questions[<?php echo $i;?>]" value="" size="100"/><br />
<br /><p>Alternatives:</p><br /> 
<?php for($j=1; $j<=4; ++$j){?>
<input type="text" name="alternatives[<?php echo $i;?>][]" value="" /><br />
<?php } } ?>
<input type="submit" name="submit" value="Send"></input>
 <input class="button" type="reset" value="Reset" />

</form> 
```

that way you'll end with two very easy to loop arrays such as

```
 ["questions"]=>
  array(10) {
    [1]=>
    string(4) "What's the name of Australian capital city?"
    [2]=> ....

  ["alternatives"]=>
  array(10) {
    [1]=>
    array(4) {
      [0]=>
      string(6) "Sidney"
      [1]=>
      string(4) " New Delhi"
      [2]=>
      string(4) " Canberra"
      [3]=>
      string(2) "Maimi"
    }
    [2]=>
    array(4) {... and so on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T00:53:00.913

`foreach($question_id AS $q_id)`遍历您的问题列表。

在该循环内，`foreach($alternatives as $alt)`迭代您的答案列表。因此，您将浏览整个答案列表，每个问题一次。

相反，您需要将每个答案与其适用的问题相关联。最简单的方法可能是一次插入一个问题。有多种其他方法可以做到这一点，但是如果没有看到您用来提交这些方法的界面，很难说什么方法会起作用。

# android - 我的应用程序停止响应

> ID：11488501
> 
> 赞同：0
> 
> 时间：2012-07-15T00:38:18.600
> 
> 标签：android, sdk

因此，每当我在我的设备上启动我的应用程序时，它运行良好，但是当我按下按钮时，它什么也不做，除了保持高亮，然后弹出说它没有响应这里是代码。我认为这是我在 OnClickListerner 中拥有代码的方式。包 com.dicamillo.alarm；

```
import java.util.Calendar;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.DigitalClock;
import android.widget.TimePicker;

public class AlarmlockActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */
    TimePicker tp;
    Button set;
    int hour;
    int minuet;
    DigitalClock dc;
    Calendar calendar = Calendar.getInstance();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tp = (TimePicker) findViewById(R.id.tpAlarmTime);
    set = (Button) findViewById(R.id.bSet);
    dc = (DigitalClock) findViewById(R.id.digitalClock1);
    hour = calendar.get(Calendar.HOUR);
    minuet = calendar.get(Calendar.MINUTE);
    set.setOnClickListener(this);

}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.bSet:
        while (tp.getCurrentHour().intValue() != hour
                && tp.getCurrentMinute().intValue() != minuet) {
            tp.getCurrentHour().intValue();
            tp.getCurrentMinute().intValue();
            if (tp.getCurrentHour().intValue() == hour
                    && tp.getCurrentMinute().intValue() == minuet) {
                MediaPlayer mp = MediaPlayer.create(AlarmlockActivity.this,
                        R.raw.alarm);
            } 
        }
        break;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T00:55:38.617

onClick 方法中的任何内容都在 UI 线程上运行。您的 while 循环正在挂起应用程序，并且操作系统（正确地）强制它停止。

研究使用[AsyncTask](http://android-developers.blogspot.com/2009/05/painless-threading.html)让您的代码脱离 UI 线程。您还应该在每次循环迭代后暂停，以避免不必要的 CPU 使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T01:52:39.723

您`while`将基本上在主 UI 线程上永远循环，直到您的小时/分钟`TimePicker`与当前时间匹配。这就是导致操作系统发出 ANR 消息的原因。

您不应该在 UI 线程上运行长时间的操作。使用 Threads 或 Handlers 或 AsyncTasks 来实现您想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T22:49:50.173

你试过检查logcat吗？！

# xslt - XSLT 测试是否存在任何键控节点

> ID：11488503
> 
> 赞同：1
> 
> 时间：2012-07-15T00:38:36.713
> 
> 标签：xslt

一个变量`$rows`有一个节点 ID 列表，这些节点 ID 是一些源 XML 的键。

```
<row>
   <node id="d0113" />
   <node id="d0237" />
   <node id="d0321" />
</row>
<row>
   <node id="c0278" />
   <node id="d0137" />
   <node id="e0021" />
</row> 
```

在处理每个节点之前，有什么好方法可以测试`<row>`是否有键控节点实际存在于节点集中`$set`？

我想出的只是

```
<xsl:for-each select="row">
  <xsl:variable name="test">  
    <xsl:for-each select="node">
      <xsl:value-of select="boolean($set//*[generate-id()=current()/@id]) * 1"/>
    </xsl:for-each>                  
  </xsl:variable>
  <xsl:if test="$test&gt;0">
    <!-- go ahead and process the row -->
  </xsl:if>
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:32:57.087

> ```
>  <xsl:value-of select="boolean($set//*[generate-id()=current()/@id]) * 1"/> 
> ```

**这在大多数情况下会返回`false()`，因此整个“索引”方法是不正确的**。

这是因为`generate-id()`XML 文档中任何节点的值不能保证在转换之间是相同的。

即使在提供的 XML 文档`node/@id`中生成的任何属性`generate-id()`在第二个文档的某个特定节点上的值都`generate-id()`为各自的`node/@id`.

**建议**：

对于此类索引，请使用更稳定的节点函数——此类函数的一个示例是恰好选择该节点的 XPath 表达式。

如果文档没有被修改，那么 XPath 表达式将始终选择该节点。

**更新**：

在评论中，OP 认为`node/@id`属性是在同一个转换中生成和使用的。

在这种情况下，这个单一的 XPath 表达式生成一个布尔值，指示是否`$set`至少包含一个节点，该节点`generate-id()`是`node/@id`另一个文档的属性之一：

```
boolean($set[generate-id() = someExpression/row/node/@id]) 
```

在`test`条件指令的属性中，只能`boolean()`使用上述参数。

**说明**：

表达方式：

```
$set[generate-id() = someExpression/row/node/@id])] 
```

`$set`选择其值`generate-id()`等于至少一个属性值的所有节点`someExpression/row/node/@id`（这里的 someExpression 代表缺失的位置步骤，我们对此一无所知，因为没有提供 XML 文档）。

根据定义，`boolean($someNodeSet)`如果`true()`节点集`$someNodeSet`至少包含一个节点，则为 false，如果`$someNodeSet`为空节点集，则为 false。

# php - 在 Wordpress 上显示 x 最近的帖子，包括标题、日期和摘录

> ID：11488504
> 
> 赞同：0
> 
> 时间：2012-07-15T00:38:37.370
> 
> 标签：php, wordpress

我正在寻找一种方法来在我的 Wordpress 网站主页上显示最后 5 个帖子，所以我认为我需要使用短代码来执行此操作，但是我找不到任何预先存在的代码来添加到 functions.php这将显示标题、日期和帖子摘录。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T01:23:39.730

有多种方法可以做到这一点，但基本思想类似于您将在主题的**INDEX.PHP**页面中看到的代码。您进行查询，循环显示帖子，然后在最后重置查询，这样您所做的就不会干扰您的主页。

```
function Last5posts()
{
    $args = array( "showposts" => 5 );                  
    query_posts($args);

    $content = "";

    if( have_posts() ) : 

        while( have_posts() ) :

            the_post();
            $link = get_permalink();
            $title = get_the_title();
            $date = get_the_date();                              

            $content .= "<div style='padding: 5px; border: 1px solid red'>";
            $content .= "<h3><a href='$link' target='_top'>$title / $date</a></h3>\n";
            $content .= "<p class='excerpt'>" . get_the_excerpt() . "</p>";
            $content .= "</div>";

        endwhile;

        wp_reset_query();

    endif;

    // Leave one line commented out depending on usage
    echo $content;   // For use as widget
    //return $content; // for use as shortcode
} 
```

要将其注册为小部件，请在末尾启用“echo”，然后将此行添加到文件底部：

```
register_sidebar_widget(__('Last 5 Posts'), 'Last5posts'); 
```

您可能需要添加一些额外的代码来将输出放入小部件包装器 DIV 中，就像您的其他侧边栏小部件一样。（或者，如果您在传统侧边栏以外的地方使用它，则不会。）

您还可以使用下面的行将其注册为简码处理程序。注释掉最后的“echo”，取消注释“return”。

```
add_shortcode('Last5Posts', 'Last5posts' ); 
```

您需要确保不在博客文章中使用短代码，否则您可能最终会递归调用它。恐怕是件坏事。

您可能还希望在函数名称中添加特定于主题的前缀以避免命名空间冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T01:02:39.477

```
<?php 

    $args = array('numberposts' => 5);

    $recent_posts = wp_get_recent_posts($args);

    foreach( $recent_posts as $recent ){
      echo $recent["post_title"].' '.$recent['post_date'].' '.$recent['post_excerpt'].'<br />';
    }
?> 
```

[Wordpress Codex](https://codex.wordpress.org/Function_Reference/wp_get_recent_posts)还不错。

# ios - 检测 ABPersonCreatePeopleInSourceWithVCardRepresentation() 中的错误

> ID：11488505
> 
> 赞同：3
> 
> 时间：2012-07-15T00:38:48.993
> 
> 标签：ios, vcf-vcard, abrecord

## 问题

当我尝试使用损坏的 vCard 数据创建`ABPerson`应用程序时`ABPersonCreatePeopleInSourceWithVCardRepresentation()`，我的应用程序崩溃了。这是控制台输出：

```
2012-07-14 20:20:37.530 vCardTest[4418:707] vCard Syntax Error, character: 7 : /
2012-07-14 20:20:37.531 vCardTest[4418:707] Malformed BEGIN
2012-07-14 20:20:37.534 vCardTest[4418:707] vCard Syntax Error, character: 14 : n
2012-07-14 20:20:37.536 vCardTest[4418:707] Malformed BEGIN
2012-07-14 20:20:37.539 vCardTest[4418:707] vCard Syntax Error, character: 21 : i
2012-07-14 20:20:37.543 vCardTest[4418:707] Malformed BEGIN
2012-07-14 20:20:37.546 vCardTest[4418:707] vCard Syntax Error, character: 28 : o
2012-07-14 20:20:37.548 vCardTest[4418:707] Malformed BEGIN
2012-07-14 20:20:37.550 vCardTest[4418:707] vCard Syntax Error, character: 35 : s
2012-07-14 20:20:37.553 vCardTest[4418:707] Malformed BEGIN
2012-07-14 20:20:37.555 vCardTest[4418:707] vCard Syntax Error, character: 42 : g
2012-07-14 20:20:37.556 vCardTest[4418:707] Malformed BEGIN
2012-07-14 20:20:37.559 vCardTest[4418:707] Malformed BEGIN 
```

## 我试图做些什么来解决它

*   [Apple 的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html)没有提到数据损坏时会发生什么。
*   我试过了`@try`，`@catch`但没有真正抛出异常。
*   由于框架正在记录所有这些语法错误，我确信它知道发生了什么事。我只是不知道如何抓住它。

## 为什么我关心损坏的数据

生成 vCard 的输入字符串来自我无法控制的不同来源，因此很多时候输入数据甚至根本不是 vCard。我只关心解析有效的 vCard，这就是为什么能够检测到非 vCard 数据并将其丢弃很重要的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:47:14.793

我遇到了完全相同的问题，做了很多研究，但也找不到任何方法来捕获异常。

由于这些错误似乎不会影响我的应用程序，我只是忽略它们并检查在扫描数据中找到了多少有效 vCard - 在我的情况下，vCard 来自 QR 码，我希望它只包含一个 vCard。

```
CFArrayRef vCardPeople = ABPersonCreatePeopleInSourceWithVCardRepresentation(defaultSource, scannedVCard);

if(vCardPeople != NULL && CFArrayGetCount(vCardPeople) == 1) {
    // Successfully read one vCard, save it to contacts
    ABRecordRef person = CFArrayGetValueAtIndex(vCardPeople, 0);
    // ...
}
else {
    // Display an alert view to inform the user about malformed input data
} 
```

你说你的应用程序崩溃了——我认为这只是与格式错误的 vCard 间接相关。也许直到几行之后当您的代码不准备处理空数组时它才会崩溃。

# c++ - Curl openssl 编译 mingw 很多链接器错误

> ID：11488508
> 
> 赞同：0
> 
> 时间：2012-07-15T00:39:12.510
> 
> 标签：c++, curl, openssl, mingw

我已经为此工作了几个小时，并且不断收到一整页的链接器错误。所有这些都以某种形式或方式与 SSL 有关。

g++ -DCURL_STATICLIB -L ..\lib -o testing testing.cpp -lcurl

我确定我错过了这个命令的一些参数，任何想法它们可能是什么，或者我可以在哪里找到一个列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:06:46.307

如果您不想要 SSL 支持，请编辑配置并取消定义预处理器宏`USE_SSLEAY`和`SSL_OPENSSL`，链接器错误将消失。

如果您*确实*需要 SSL 支持，您需要自己编译和链接它，因为它不附带 libcurl。有关如何在 Windows 上执行此操作的详细说明，请参阅[此问题（我假设您正在使用它，因为您提到了 MinGW）。](https://stackoverflow.com/questions/197444/building-libcurl-with-ssl-support-on-windows)

其他一些操作系统，例如 Linux 和 Mac OS X，附带 OpenSSL，因此您无需跳过任何环节——您只需将`-lssl`、`-lopenssl`、 或之一添加`-lcrypto`到命令行，它应该可以正常工作（确切的库名称因操作系统而异）。

# django - django + celery + redis + postgres 挂了

> ID：11488516
> 
> 赞同：2
> 
> 时间：2012-07-15T00:41:50.373
> 
> 标签：django, azure, celery, gevent, eventlet

我正在将我的项目部署到 ms azure linux vm 中。

每个服务都部署在不同的服务器上。实际上对于服务器。

但是，它不起作用。

celeryd 总是挂在超过 20~30 个 http 请求中。

然后在 ctrl+c 并重新启动 celeryd 之后就可以工作了。但是..它也很快挂起。

Eventlet 和 gevent 也在使用.. 但是.. eventlet 不能正常工作.. gevent 更好..

我认为 postgres 或模型的使用是问题之一。但是..我不知道为什么..

有人帮帮我吗？！！！

下面的django模型是否正确使用？

> sync_service_log = SyncServiceLog.objects.get(pk = sync_log["service"])
> sync_service_log.save()
> 。
> .
> {{一些代码}}
> 。
> .
> sync_service_log.save()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:18:59.697

你有没有应用 eventlet/gevent 猴子补丁？您应该这样做以使 psycopg（postgres 驱动程序）异步。没有猴子补丁，它总是会阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T22:33:20.033

提供的信息不足以确定确切的根本原因。您是否将所有这些模块都安装在一个 Linux 虚拟机上？最好的选择是首先在本地构建一个 Linux VM，其中包含所有必要的模块，然后部署到 Windows Azure 并配置所有必要的端口以与之连接。

# python - 你如何在python中获得小数？

> ID：11488523
> 
> 赞同：12
> 
> 时间：2012-07-15T00:45:43.990
> 
> 标签：python

在一次真正超现实的体验中，我花了 20 分钟完成一项我认为需要 20 秒的任务。

我想使用 3 位或更多位的小数。我不能得到任何超过 1 位的东西，即使在那种情况下，这也是无稽之谈。

例如，我无法显示为or`1/3`以外的任何内容。`0``0.0`

谷歌搜索把我带到了十进制，但十进制*也*没有帮助。

请结束这种折磨，告诉我我必须做什么`1/3`才能出现`.333`！

**编辑**谢谢大家清除它！显然，计算机科学家发明了一种叫做整数除法的东西来迷惑和激怒数学家。谢谢你好心驱散了我的困惑。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-15T00:47:50.667

在 Python 2 中，`1/3`会进行整数除法，因为两个操作数都是整数。你需要做浮点除法：

```
1.0/3.0 
```

或者：

```
from __future__ import division 
```

这将进行`/`真正的除法和`//`整数除法。这是 Python 3 的默认设置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-15T00:48:29.603

如果你将 2 个整数相除，你最终会得到一个*截断*的整数结果（即，结果的任何小数部分都被丢弃），这就是为什么

```
 1 / 3 
```

给你：

```
 0 
```

为了避免这个问题，*至少有*一个操作数需要是浮点数。例如，`1.0 / 3`或`1 / 3.0`或（当然）`1.0 / 3.0`将避免整数[截断](http://en.wikipedia.org/wiki/Truncation)。顺便说一下，这种行为并不是 Python 独有的。

（**编辑**：正如@Ivc 在下面的有用评论中所提到的，如果整数操作数之一为*负数*，则结果是[floor()](http://mathworld.wolfram.com/FloorFunction.html) 'ed - 请参阅[这篇文章](http://python-history.blogspot.com/2010/08/why-pythons-integer-division-floors.html)了解原因）。

*此外，数字的内部*和*外部*表示可能存在一些混淆。数字是什么，但我们*可以确定*它的显示方式。

您可以使用格式说明控制外部表示。例如，一个数字可以在小数点后显示 5 位数字，如下所示：

```
n = 1/3.0

print '%.5f' %n
0.33333 
```

获取小数点后 15 位。

```
print '%.15f' %n
0.333333333333333 
```

最后，有一种“新的和改进的”使用该函数格式化字符串/数字的方法，它的使用时间可能比我上面显示的 -formatting`.format()`长得多。`%`一个例子是：

```
print 'the number is {:.2}'.format(1.0/3.0) 
```

会给你：

```
the number is 0.33 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T00:48:08.457

您的值需要是一个浮点数

```
In [1]: 1/3
Out[1]: 0

In [2]: 1/3.0
Out[2]: 0.33333333333333331 
```

或者

```
In [1]: from __future__ import division

In [2]: 1/3
Out[2]: 0.33333333333333331 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-15T00:52:06.583

在 Python2 中，您必须将至少一个操作数指定为浮点数。要仅取 3 位小数，您可以使用以下`round()`方法：

```
>>> a = 1.0 / 3
>>> round(a, 3)
0.333 
```

在 Python3 中，它们似乎默认不执行整数除法，所以你可以这样做：

```
>>> a = 1/3
>>> round(a, 3)
0.333 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-06T10:27:58.800

使用十进制。您可以在点后面获得 100 位数字。

```
from decimal import *
getcontext().prec = 100
Decimal(1)/Decimal(3) 
```

# java - Class的Java泛型映射 到解析器

> ID：11488524
> 
> 赞同：5
> 
> 时间：2012-07-15T00:47:14.283
> 
> 标签：java, generics, type-safety, generic-collections

我有一个解析数据流的类。每个数据块称为一个`Box`. `Box`es有很多种。我想`Parser`为每种类型的盒子设置不同的。所以基本上我需要一个`Registry`或类似的东西，让我为每个`Box`. 这是我的问题的简化版本：

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class GenericsTest {
    class Box {
        private String data;

        public String getData() {
            return data;
        }
    }

    class BoxA extends Box {
        private String adata;

        BoxA( String adata ) {
            this.adata = adata;
        }

        public String getAData() {
            return adata;
        }
    }

    class BoxB extends Box {
        private String bdata;

        BoxB( String bdata ) {
            this.bdata = bdata;
        }

        public String getBData() {
            return bdata;
        }
    }

    interface Parser<T> {
        public void parse( T box );
    }

    class ParserA implements Parser<BoxA> {
        @Override
        public void parse( BoxA box ) {
            System.out.print( "BoxA: " + box.getAData() );
        }
    }

    class ParserB implements Parser<BoxB> {
        @Override
        public void parse( BoxB box ) {
            System.out.print( "BoxB: " + box.getBData() );
        }
    }

    class Registry {
        Map<Class<?>, Parser<?>> unsafeMap = new HashMap<>();

        <T extends Box, S extends Parser<T>> void add( Class<T> clazz, S parser ) {
            unsafeMap.put( clazz, parser );
        }

        <T extends Box> boolean containsKey( Class<T> clazz ) {
            return unsafeMap.containsKey( clazz );
        }

        @SuppressWarnings( "unchecked" )
        <T extends Box, S extends Parser<T>> S get( Class<T> clazz ) {
            return (S) unsafeMap.get( clazz );
        }
    }

    public void runTest() {
        Registry registry = new Registry();
        registry.add( BoxA.class, new ParserA() );
        registry.add( BoxB.class, new ParserB() );

        List<Box> boxes = new ArrayList<>();
        boxes.add( new BoxA( "Silly" ) );
        boxes.add( new BoxB( "Funny" ) );
        boxes.add( new BoxB( "Foo" ) );
        boxes.add( new BoxA( "Bar" ) );

        for ( Box box : boxes ) {
            Class<? extends Box> clazz = box.getClass();
            registry.get( clazz ).parse( clazz.cast( box ) );
        }
    }

    public static void main( String[] args ) {
        new GenericsTest().runTest();
    }
} 
```

如果您使用该代码并尝试编译它，您会看到以下错误：

> GenericsTest.Parser 类型中的方法 parse(capture#4-of ? extends GenericsTest.Box) 不适用于参数 (capture#5-of ? extends GenericsTest.Box)

那么问题来了，如何

```
(capture#4-of ? extends GenericsTest.Box) 
```

与......不同

```
(capture#5-of ? extends GenericsTest.Box) 
```

?

而且，有没有比我的`Registry`方法更好的方法不需要使用`@SuppressWarnings( "unchecked" )`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T05:42:05.467

首先，让我们回答OP的问题。`(capture#4-of ? extends GenericsTest.Box)`和 和有什么不一样`(capture#5-of ? extends GenericsTest.Box)`？

编译器发现传递给的类对象`registry.get()`具有`Class<x>`某些未知`x`扩展的类型`Box`。因此，类型推断实例化了 with 的类型`T`，`get()`并`x`得出结论，它返回的解析器具有`Parser<x>`相同的`x`扩展类型`Box`。（不幸的是，编译器使用诸如“capture#4-of ？”之类的术语来表示“对于某些 x4，例如 x4”。）到目前为止，一切都很好。

通常发生的情况是，只要您有两个单独的表达式（甚至是语法相同的表达式），其类型被推断为通配符类型，存在变量就会被独立捕获。如果表达式出现在非通配符上下文中，您可以“统一”这些变量，通常是单独的泛型方法。

看一下这个：

```
public class WildcardTest {
    private < T > void two( Class< T > t1, Class< T > t2 ) {}
    private < T > void one( Class< T > t1 ) {
        two( t1, t1 ); // compiles; no wildcards involved
    }
    private void blah() {
        two( WildcardTest.class, WildcardTest.class ); // compiles
        one( WildcardTest.class );                     // compiles

        Class< ? extends WildcardTest > wc = this.getClass();
        two( wc, wc ); // won't compile! (capture#2 and capture#3)
        one( wc );     // compiles
    }
} 
```

和这个：

```
public class WildcardTest {
    interface Thing< T > {
        void consume( T t );
    }
    private < T > Thing< T > make( Class< T > c ) {
        return new Thing< T >() {
            @Override public void consume(T t) {}
        };
    }
    private < T > void makeAndConsume( Object t, Class< T > c ) {
        make( c ).consume( c.cast( t ) );
    }

    private void blah() {
        Class< ? extends WildcardTest > wc = this.getClass();
        make( wc ).consume( wc.cast( this ) ); // won't compile! (capture#2 and capture#3)
        makeAndConsume( this, wc );            // compiles
    }
} 
```

第二个例子是这里的相关例子。以下转换消除了所有警告，除了您已经在注册表中抑制的警告：

```
private < T extends Box > void getParserAndParse(
    Registry registry, Class< T > clazz, Object box
) {
    registry.get( clazz ).parse( clazz.cast( box ) );
}
public void runTest() {
    Registry registry = new Registry();
    registry.add( BoxA.class, new ParserA() );
    registry.add( BoxB.class, new ParserB() );

    List<Box> boxes = new ArrayList< Box >();
    boxes.add( new BoxA( "Silly" ) );
    boxes.add( new BoxB( "Funny" ) );
    boxes.add( new BoxB( "Foo" ) );
    boxes.add( new BoxA( "Bar" ) );

    for ( Box box : boxes ) {
        Class< ? extends Box > clazz = box.getClass();
        getParserAndParse( registry, clazz, box ); // compiles
    }
} 
```

至于您的第二个问题，您正试图通过相当于变体类型（Box）的方式执行临时多态性。有两种方法可以在没有类型警告的情况下实现这样的事情：

1.  我从问题中收集到的`parseSelf`经典OO 分解（即向`Box``Box`
2.  访问者模式，它至少有两个缺点：
    1.  您必须为所有风格添加一个访问者接受器`Box`，这似乎是一个问题，原因与经典的 OO 分解相同
    2.  在定义你的Visitor界面时，你必须提前知道所有可能的`Box`es类型

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T08:34:53.483

当您使用通配符时，他们可能会“失去”他们的身份。一旦在表达式中使用了通配符，它​​可能会产生一个涉及通配符的新类型，但不知道该通配符与原始通配符相同（您可能知道它们是相同的）。

您的情况的问题是类型`clazz`包含通配符，并`clazz`在两个地方使用，但是当他们再次相遇时，编译器不再知道它们是同一类型。

您可以做的是编写一个捕获助手，这是一个带有显式类型参数 T 的私有泛型方法，它将防止通配符的身份在此方法中丢失。由于捕获，您仍然可以将包含通配符的变量传递给此方法。

```
private <T extends Box> void helperMethod(Class<T> clazz, Box box, Registry registry) {
    registry.get( clazz ).parse( clazz.cast( box ) );
}

// then you use it like in the place you had before:
for ( Box box : boxes ) {
    Class<? extends Box> clazz = box.getClass();
    helperMethod(clazz, box, registry);
} 
```

* * *

在不相关的说明中，您的 Registry 类中的方法类型是不安全的。例如，`get`返回不存在于任何参数中的类型 S，因此该方法的调用者可以请求作为结果扩展的*任何类型*`Parser<T>`，并且该方法将返回该类型。那怎么可能安全？它应该这样写：

```
@SuppressWarnings( "unchecked" )
<T extends Box> Parser<T> get( Class<T> clazz ) {
    return (Parser<T>) unsafeMap.get( clazz );
} 
```

此外，该`add`方法不必要地冗长。它可以简化为（完全等效）：

```
<T extends Box> void add( Class<T> clazz, Parser<T> parser ) {
    unsafeMap.put( clazz, parser );
} 
```

# ios - 按下按钮时应用程序退出

> ID：11488525
> 
> 赞同：1
> 
> 时间：2012-07-15T00:47:22.903
> 
> 标签：ios, xcode

我正在制作一个音板应用程序，当我在 Xcode 中运行它时，单击其中一个按钮播放声音后，我得到一个错误。这是崩溃的日志

> 2012-07-14 20:24:34.395 SoundBoard[15374:c07] 无法加载从标识符为“Apple.SoundBoard”的捆绑包中的笔尖引用的“BG.png”图像 2012-07-14 20:24:41.645 SoundBoard[15374:c07] -[ViewController playSound1]: unrecognized selector sent to instance 0x93a99b0 2012-07-14 20:24:41.648 SoundBoard[15374:c07] (null) libc++abi.dylib: 调用终止抛出异常 ( lldb)

有什么帮助吗？我想不通

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T01:10:00.757

你还没有在你的类上定义`-playSound1`方法。`ViewController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T03:15:03.557

您的视图控制器上没有 -playsound1 的实现。它在标题中定义，但未实现，因此发出警告。

只需实现该方法（使其播放声音）即可。

# visual-studio - Visual Studio 2012：Qvec 报告：2 链接错误

> ID：11488529
> 
> 赞同：1
> 
> 时间：2012-07-15T00:47:52.883
> 
> 标签：visual-studio, vectorization

我正在尝试在编译期间将 /Qvec-report:2 与 Visual Studio 2012 一起使用，以查看我的代码的哪些循环已被自动矢量化。但是，我不断收到此错误消息：

链接：警告 LNK4044：无法识别的选项“/Qvec-report:2”；忽略

有人可以请教吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T17:29:19.183

我认为您错误地将该选项添加为链接器选项。请在 C/C++ 编译器命令行部分。并确保您的优化级别设置为 /O2（最大化速度）

# android - 获取AndroidPlot中点的正确位置

> ID：11488532
> 
> 赞同：3
> 
> 时间：2012-07-15T00:48:27.560
> 
> 标签：android, androidplot

我试图在我的 AndroidPlot 中获取一个值的像素位置，但我无法让它工作。这个想法是将光标放置在图上显示的确切点上，在特定条件下。你们中有人遇到/解决过类似的问题吗？

问候杰斯珀

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-05T19:17:54.670

我不知道是否有更好的内置解决方案，但这是一种手动方法。
以下代码将光标放置在用户触摸屏幕的 X 坐标和绘图的第一个数据系列的相应 Y 坐标上。

```
//NOTE about XYPlotZoomPan: when an OnTouchListener is set, zooming is disabled. Subclass to avoid it.
mPlot.setOnTouchListener(new View.OnTouchListener(){
    @Override
    public boolean onTouch(View v, MotionEvent me) {
        float touchX = me.getX();
        float touchY = me.getY();
        XYGraphWidget widget = mPlot.getGraphWidget();
        RectF gridRect = widget.getGridRect();
        if(gridRect.contains(touchX, touchY)){ //Check the touch event is in the grid
            XYSeries xyData = mPlot.getSeriesSet().iterator().next();
            long targetValX = Math.round(widget.getXVal(touchX));
            Log.d(TAG, "Touched at " + touchX + ", " + touchY + ". Target val X: " + targetValX);
            Long targetValY = null; 
            Long prevValX = null;
            if(mPlot.getSeriesSet().size() > 1){
                Log.w(TAG, "More than one series in plot. Using only the first one");
            }
            for(int i = 0; i < xyData.size(); ++i){
                long currValX = xyData.getX(i).longValue();
                long currValY = xyData.getY(i).longValue();
                //Calculate the range value of the closest domain value (assumes xyData is sorted in ascending X order)
                if(currValX >= targetValX){
                    long currDiff = currValX - targetValX; 
                    if(prevValX != null && (targetValX - prevValX) < currDiff){
                        targetValY = xyData.getY(i-1).longValue();
                    }else{
                        targetValY = currValY;
                    }
                    break;
                }
                prevValX = currValX;
            }
            if(targetValY != null){
                long maxValY = mPlot.getCalculatedMaxY().longValue();
                long minValY = mPlot.getCalculatedMinY().longValue();
                float pixelPosY = gridRect.top + ValPixConverter.valToPix(
                        (double)targetValY, (double)minValY, (double)maxValY, (float)gridRect.height(), true);
                widget.setRangeCursorPosition(pixelPosY);
                widget.setDomainCursorPosition(touchX);
                Log.d(TAG, String.format("Domain cursor set at Y %.2f, val %.2f = %d, min-maxValY (%d, %d)",
                        pixelPosY,
                        widget.getRangeCursorVal(), targetValY,
                        minValY, maxValY));
            }else{
                Log.w(TAG, "Couldn't find the closest range to the selected domain coordinate");
            }
            mPlot.invalidate();
        }else{
            Log.d(TAG, "Touched outside the plot grid");
        }

        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T09:01:32.767

我找到了解决方案。我的意图是找到给定像素的值（例如，通过点击图，我想要表示值）。所以，经过一番搜索，我找到了助手类 ValPixConverter。它提供了一些适合我需要的方法。不幸的是，没有这些方法的文档，但我找到了一个解决方案：

```
 private float pixelToValueY(float y) {
    //Parameters: 1=input y-value, 2=minmal y-value that is shown,  3=maximal y-value that is shown, 4=Hight of the view, 5=flip
    return (float) ValPixConverter.pixToVal(y, minXY.y, maxXY.y, mySimpleXYPlot.getHeight(), false);
    }

    private float pixelToValueX(float x) {
    //Parameters: 1=input y-value, 2=minmal y-value that is shown,  3=maximal y-value that is shown, 4=Hight of the view, 5=flip
    return (float) ValPixConverter.pixToVal(x, minXY.x, maxXY.x, mySimpleXYPlot.getWidth(), false);
    } 
```

你只需要另一种方式。方法 valToPix() 将执行此操作。它与上面的代码非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-17T04:16:31.510

# 更新的解决方案

我尝试遵循 rbarriuso 方法，但我发现它已经过时且过于复杂。

使用 rbarriuso 答案作为指导，我想出了以下内容：

```
private void placeMarkerOnGraph(XYPlot plot, XYSeries plotSeries, XValueMarker xMarker, YValueMarker yMarker, float touchX, float touchY) {
    if(plot.getRegistry().getSeriesList().contains(plotSeries)) {
        if (plot.getGraph().getGridRect().contains(touchX, touchY)) {
            int targetValX = plot.screenToSeriesX(touchX).intValue();
            int targetValY = plot.screenToSeriesY(touchY).intValue();
            int threshold = (int)(plot.getBounds().getHeight().intValue() * 0.1f); //How close to a trace does the user have to click to move the markers?

            if (plotSeries.getY(targetValX).intValue() - targetValY < threshold) {
                Log.w(TAG, "Touched within threshold to trace line");
                xMarker.setValue(targetValX);
                yMarker.setValue(plotSeries.getY(targetValX).intValue());
            }
        } else {
            Log.w(TAG, "Touched outside graph");
        }
    } else {
        Log.w(TAG, "Plot does not contain series provided");
    }
} 
```

## 这个怎么运作

步骤 1\. 检查您是否实际触摸了图表内部

步骤 2\. 从触摸线转换为屏幕图形坐标

步骤 3\. 取 X 值（已转换为图形坐标）并找到它的 Y 值

第 4 步。如果您触摸的距离足够近，请移动标记/光标

## 其他提示

*   我在示例中使用标记而不是光标，因为一个绘图可以有多少个标记没有限制，但您只能有一个光标。

*   该功能仅更改标记位置，您必须先选择格式化并将标记添加到绘图中。

*   XYSeries 现在使用数字，因此请使用必要的值，例如：如果您的系列从`0.0f`使用`1.0f``.floatValue()`

*   在您使用之前，任何东西都不会在视觉上发生变化`plot.redraw()`

*   阈值是考虑缩放的绘图总高度的百分比

## 更先进的解决方案

第一个解决方案适用于不是很陡峭的图形，但在其他方面它没有很高的准确性，因为它没有考虑不直接低于用户在图形上触摸的数据点。

下面我添加了一个更强大的解决方案，它依赖于 for 循环，但更准确。它的工作原理与第一个解决方案非常相似。

```
private void placeMarkerOnGraph(XYPlot plot, XYSeries plotSeries, XValueMarker xMarker, YValueMarker yMarker, float touchX, float touchY) {
    if(plot.getRegistry().getSeriesList().contains(plotSeries)) {
        if (plot.getGraph().getGridRect().contains(touchX, touchY)) {
            int targetValX = plot.screenToSeriesX(touchX).intValue();
            int targetValY = plot.screenToSeriesY(touchY).intValue();
            int threshold = (int)(plot.getBounds().getWidth().intValue() * 0.1f); //How close to a trace does the user have to click to move the markers?
            Integer closestValue = null;
            Integer xPos = null;
            Integer yPos = null;

            for(int i = targetValX - threshold; i < targetValX + threshold; i++){
                //If the user touches near either end of the graph we need to make sure we don't go out of the arrays bounds
                if(i > 0 && i < graphSize) {
                    int closeness = Math.abs(Math.abs(plotSeries.getY(i).intValue() - targetValY) + Math.abs(i - targetValX));
                    Log.d(TAG,"Distance to nearest trace: " + closeness);
                    if ((closestValue != null && closeness < closestValue) || (closestValue == null && closeness < threshold)) {
                        closestValue = closeness;
                        xPos = i;
                        yPos = plotSeries.getY(i).intValue();
                    }
                }
            }

            if (xPos != null) {
                Log.d(TAG, "Touched within threshold");
                xMarker.setValue(xPos);
                yMarker.setValue(yPos);
            } else {
                Log.d(TAG, "Touched outside threshold");
            }
        } else {
            Log.w(TAG, "Touched outside graph");
        }
    } else {
        Log.w(TAG, "Plot does not contain series provided");
    }
} 
```

# android - cygwin中的android facebook哈希键

> ID：11488538
> 
> 赞同：1
> 
> 时间：2012-07-15T00:48:51.163
> 
> 标签：android, linux, facebook, unix

我尝试使用此命令为我的 android 应用程序创建哈希键

```
keytool.exe -exportcert -alias mykeystorealias -keystore "C:/Projects/mykeystore" | "C:\openssl\bin\openssl" sha1 -binary | "C:\openssl\bin\openssl" base64 
```

但是在[facebook](https://developers.facebook.com/apps)上输入密码并复制粘贴生成的密钥后，我的密钥不起作用

我下载了 Cygwin，我想尝试使用 Cygwin 生成相同的哈希键。

我对unix不是很熟悉，任何人都可以帮助我并给我Cygwni-linux解释（我读到linux和windows哈希键可以产生不同的结果）：

```
 keytool.exe -exportcert -alias mykeystorealias -keystore "C:/Projects/mykeystore" | "C:\openssl\bin\openssl" sha1 -binary | "C:\openssl\bin\openssl" base64 
```

谢谢

# javascript - 复制原型进行继承？

> ID：11488540
> 
> 赞同：20
> 
> 时间：2012-07-15T00:49:17.037
> 
> 标签：javascript, inheritance

我在玩 JavaScript，特别是用类和诸如此类的东西模拟面向对象的编程。

我知道这种实现继承的方式

```
MyClass.prototype = new AnotherClass(); 
```

但我并不满意，我不喜欢我需要调用`AnotherClass`. 所以我在玩，我想出了一些似乎有效的东西，基本上想要第二个意见。

```
function clone (obj)
{
    function CloneFactory () {}
    CloneFactory.prototype = obj;

    return new CloneFactory();
}

MyClass.prototype = clone(AnotherClass.prototype); 
```

通过克隆原型，我们得到它的一个新副本并将其分配给`MyClass`' 原型，这样更改继承的属性就不会影响父原型的属性。像这样会`MyClass.prototype = AnotherClass.prototype`。

我进行了压力测试，这在某些情况下效率更高，即当父构造函数中有很多代码时，其他情况大致相同。另一个好处（或者至少我发现它是有益的）是它允许在某种程度上隐藏子类的信息。任何特权方法和成员都不会被继承。

是否有一些我忽略的重大陷阱？

我不是 JavaScript 专家，实际上我对 JavaScript 还很陌生，所以我想对此发表第二意见，因为我似乎无法通过 Google 找到任何东西。我不想实现糟糕的代码:)！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-15T01:01:48.877

这*几乎*就是`Object.create`这样做的。您编写的函数是该方法的一个非常标准的“polyfill”。

这是一种非常常见的抽象对象创建方式，更接近地反映了“真正的”原型继承。绝对是一种安全的做事方式。

`Object.create`哦，如果您有兴趣，这里是 MDN 条目的链接： [https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create/](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create/)

您会在底部注意到它们实际上包含 polyfill，这与您的代码几乎相同，除了一些安全检查和变量名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-04T09:50:09.600

我遇到了这个问题，因为我自己正在寻找解决方案。我认为最好的解决方案是从工厂函数创建函数。

```
let functionFactory = function(){

    let o = function(o, ...args){

    }
    o.prototype.foo = 'bar'

    return o

} 
```

然后，要使用它，您只需：

```
let myinstance = new functionFactory;
myinstance.bar = 'bar' 
```

这样，您仍然可以获得共享原型等的好处，但可以创建一个新副本，然后您可以覆盖每个实例，而无需其他实例踩踏您的更改。

# opencv - 我可以使用计算出的 Homography 将 2D 坐标从一台摄像机转换到另一台立体摄像机吗？

> ID：11488543
> 
> 赞同：2
> 
> 时间：2012-07-15T00:49:59.893
> 
> 标签：opencv, 2d, projection, coordinate, homography

对不起，如果这听起来很愚蠢，但我真的需要问这个。

一旦计算出单应性，我可以使用它将在一个相机中检测到的物体中心的 2D 坐标投影到另一个立体相机作为 2D 坐标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:02:55.477

一旦你有了映射两个相机之间转换的单应性，转换就非常简单了。

你所要做的就是打电话

```
cv::perspectiveTransform(leftCamPts, rightCamPts, H ); 
```

它将用正确的点填充 rightCamPts。

但是您必须确保您具有正确的单应性（描述左右摄像机之间变换的单应性，而不是在立体引擎中计算的众多变换之一）。此外，检查从左到右呼叫的正确顺序。您可能需要在应用之前反转矩阵。

# c# - VS 2010 C#：Intellisense 解析库引用，但编译器没有

> ID：11488551
> 
> 赞同：2
> 
> 时间：2012-07-15T00:52:28.480
> 
> 标签：c#, visual-studio-2010, compiler-errors, intellisense

我引用了从[这篇 CodeProject 文章中](http://www.codeproject.com/Articles/36482/How-to-Create-Google-Calendar-Events-Using-NET)获得的以下库：

*   Google.GData.AccessControl
*   Google.GData.Calendar
*   Google.GData.Client
*   Google.GData.Extensions

我能够成功构建并运行示例项目。然后我在自己的项目（.NET 4.0 C# WinForms 应用程序）中引用了这些库。我使用 Intellisense 添加`using`语句（键入类名，然后将鼠标悬停在类型上并选择“添加'使用 Google.GData.Calendar'”。太好了。Intellisense 正确找到了上述库中的所有类型，以及转到定义标题发电机也可以。

然后，我尝试运行我的项目，但构建失败，将 Google 库中包含的每个类都标记为未找到。找不到`using`Intellisense 添加的语句中指定的任何类或命名空间。我可以从我的参考文献中删除这些库并重新添加它们，Intellisense 会找到所有内容。然后我再次构建，编译器会丢失它们。我见过很多 Intellisense 错误的情况，但编译器会发现它，但从来没有相反的情况。我想，一切都是第一次。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T01:09:06.223

这是因为 zip 文件中捆绑的 DLL 是为 .NET 2.0 编译的。

你有两个选择

1) 更改您的 WinForm 应用程序以针对 .NET 2.0 进行编译。这意味着您不能使用任何 .NET 4.0 功能

2) zip 文件还带有源代码。因此，重新编译 DLL 并将新的 DLL 定位到 .NET 4.0 平台。

# c# - 执行多次后删除一段代码？

> ID：11488552
> 
> 赞同：0
> 
> 时间：2012-07-15T00:52:43.050
> 
> 标签：c#, .net, jit

我们如何在多次执行后从应用程序中删除一段代码？让我举个例子，现在，我有这个应用程序`SomeSoftware`，每个月左右都会备份数据。它的作用是，在客户端机器上安装时（部署时），它会在数据库中创建一个关于安装日期的条目，然后在每次运行时检查类似

```
var con = InitializeDB.StartConnection(); // start the connection
var cmd = con.CreateCommand();
var cmdOther = con.CreateCommand();
// check if its the first run of the software
#region onlyUsefulForFirstTime
cmd.CommandText = "SELECT Count(*) FROM Misc WHERE ItemName='FirstRun'"
if (Int32.Parse(cmd.ExecuteScalar().ToString()) == 0)
    // it is the first run, add the entry
    cmd.CommandText = "INSERT INTO Misc(ItemName, Val) VALUES('FirstRun'," +  DateTime.Now + ")";
else
#endregion
    // it is not the first run
    cmd.CommandText = "SELECT Val FROM Misc WHERE ItemName='LastRun'";
    cmdOther.CommandText = "SELECT Val FROM Misc WHERE ItemName='FirstRun'";
    // now after this, we compare the value of LastRun and the date in FirstRun, if it's more than a month, we take the steps to backup the database 
```

当前发生的情况是，在每次启动应用程序时，它都在执行 region 内的代码`onlyUsefulForFirstTime`，尽管它仅对第一次运行有用。如果客户一天要运行这个应用程序 10 次，那么继续让这个代码执行将是一种完全的浪费。我知道，如果它第一次运行，我需要检查某个地方，以便添加值，但在那之后它只是浪费。那么，有什么办法可以删除这段代码，而不是完全删除，而是让代码`onlyUsefulForFirstTime`不再执行，或者类似的东西，好吧！你明白了！

ps：我不是在问其他备份方法或其他备份策略，我知道还有其他方法，但这不是问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T00:54:18.897

如果您修改程序集的 CIL 并重新保存它，这在技术上是可行的，但它的麻烦多于其价值。为什么不能只使用本地可写 INI 文件甚至 Windows 注册表来存储“上次运行”值，以便有条件地分支？

请注意，更改可执行文件会破坏程序集上的任何强名称，当然还有 Authenticode。

此外，由于 DEP/NX 会阻止执行可写内存页面，因此您无法在内存中执行此操作。

编辑：

顺便说一句，您的代码中有一个错误。

`System.DateTime`的隐含`ToString()`用途`CultureInfo.CurrentCulture`来提供格式信息。在美国，它将在 6 月 7 日输出“06/07/2012”，但如果您在欧洲运行该程序，它将在同一日期输出“07/06/2012”。您的 SQL Server 可能需要某种格式的日期，而您的日期突然变得非常不准确。我强烈建议您将 DateTime 值转换为 ISO-8601 格式以避免歧义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T00:54:33.843

[在 Windows 注册表中添加一个键](http://msdn.microsoft.com/en-us/library/h5e7chcf.aspx)，表示代码已经运行。在您的应用程序启动时检查此注册表项。

或者，您可以使用[应用程序设置](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)：

```
if (Properties.Settings.Default.alreadyExecuted == false)
{
     // run one-time code.

     Properties.Settings.Default.alreadyExecuted = true;
     Properties.Settings.Default.Save();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-15T01:06:27.963

除非有问题，否则不要[优化。](http://c2.com/cgi/wiki?PrematureOptimization)一旦您的分析器显示该功能是一个瓶颈，就开始做一些事情。

# scala - <:<、<%<、=:= 的 Scala 实现究竟如何在编译器中工作？

> ID：11488554
> 
> 赞同：7
> 
> 时间：2012-07-15T00:53:04.390
> 
> 标签：scala, compiler-construction, operators, type-equivalence

我现在看到有一个相关的问题，询问这些运算符 (<:<, <%<, =:=) 在这里做什么：

[<:<、<%< 和 =:= 在 Scala 2.8 中是什么意思，它们在哪里记录？](https://stackoverflow.com/questions/3427345/what-do-and-mean-in-scala-2-8-and-where-are-they-documented)

但我仍然对他们的实施感到困惑。特别是，我假设一旦您放置了一个断言特定关系的隐式参数，那么您就可以使用变量，就好像它们已经自动正确地强制转换一样，例如，这将编译：

```
class Foo[T](a: T) {
  def splitit(implicit ev: T <:< String) = a split " "
} 
```

但是这在编译器中实际上是如何工作的呢？这些运算符是否有一些神奇的编译器支持，如果没有，允许它从定义中推断出这种关系的底层机制是什么？（这个机制是为了让这些运算符工作而特别添加的吗？它对这些特定的运算符有多具体？）你可以像这样放置一个额外的隐式参数似乎有点神奇，它会以某种方式改变编译器对类型的解释。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T05:57:49.230

实现有点棘手，但没有什么神奇的。

有一个隐式方法`Predef`可以`A <:< A`为任何类型提供一个值`A`

```
implicit def conforms[A]: A <:< A 
```

当您尝试调用您的方法时，它会查找 type 的隐式值`T <:< String`。编译器将检查是否`conforms[T]`为有效值。假设`T`那么在范围内`Nothing`会有一个隐式值`Nothing <:< Nothing`，它将允许您的方法调用进行编译。由于方式`<:<`已定义

```
sealed abstract class <:<[-From, +To] 
```

`From`可以向上变化，`To`也可以向下变化。所以 a`Nothing <:< Nothing`仍然是有效的`Nothing <:< String`，因为`Nothing`它是 的子类型`String`。A`String <:< String`也是有效的`Nothing <:< String`，因为`String`它是的超类型`Nothing`（但编译器似乎总是只选择第一种类型）。

您可以调用它的方法，`String`因为它`<:<`也扩展了`=>`aka`Function1`并用作从`T`to的隐式转换`String`，这基本上最终会进行安全转换。

`=:=`是一样的，只是它没有任何方差注释定义，所以类型必须完全匹配。

`<%<`定义类似`<:<`但隐式方法有点不同，它添加了另一个参数来指定视图绑定

```
implicit def conformsOrViewsAs[A <% B, B]: A <%< B 
```

它也已被弃用。

# python - Flask 和 Webapp2 (GAE) 的区别

> ID：11488555
> 
> 赞同：9
> 
> 时间：2012-07-15T00:53:06.587
> 
> 标签：python, google-app-engine, flask, webapp2

我仍在收集信息，但似乎我无法弄清楚这两个框架的区别是什么。

目前我正在使用带有 jinja2 和 wtforms 的 webapp2。它在 GAE 中开箱即用并且运行良好。

如果我比较flask和webapp2，我只能看到flask已经集成了jinja和wtforms，所以没什么大不了的。

如果我比较这两个文档，似乎两个框架有很多共同点

[http://webapp-improved.appspot.com/](http://webapp-improved.appspot.com/)

[http://flask.pocoo.org/docs/](http://flask.pocoo.org/docs/)

只是有一些烧瓶启动问题才能在我的 Windows 机器上本地运行。

至少烧瓶的文档似乎非常好。写得真的很好，也很清楚。

我已经在网上搜索过，但找不到有关差异的任何信息。

[Google App Engine 的 Flask 与 webapp2](https://stackoverflow.com/questions/6774371/flask-vs-webapp2-for-google-app-engine)

那么，有什么区别呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T10:21:04.973

Flask 比 webapp2 更抽象一点。它（可选）基于函数，因此您不需要为所有内容创建处理程序类。用于路由处理的装饰器语法更简洁一些。不过，总而言之，它们同样强大，你可以在一个中做的任何事情都可以在另一个中完成。如果您已经了解 webapp2，那么我没有理由想到开始使用 Flask。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-06T05:59:00.417

我全神贯注于 webapp2，多年来在 GAE 上托管我的应用程序。但是，如果您的长期计划包括从 GAE 迁移到 Google Compute Engine 或 Container Engine，或者迁移到 AWS EC2，您可能会考虑 Flask。认为 webapp2[提供了一些对 out-of-GAE 的支持](http://webapp-improved.appspot.com/tutorials/quickstart.nogae.html)，它仍然更特定于 GAE，至少这是我的感觉。

我自己确实考虑离开 GAE，所以 Django 和 Flask 在我的雷达上进行评估。据我所知，Flask 是轻量级的（就像 webapp2 一样）并且都使用 Jinja2 模板，所以我将从 Flask 开始。

# mysql - ASP.NET MVC 显示数据库表

> ID：11488557
> 
> 赞同：1
> 
> 时间：2012-07-15T00:53:47.620
> 
> 标签：mysql, razor, asp.net-mvc-4

我刚刚开始学习 MVC 4 ASP.NET。我使用名为 MVC Music Store 的教程作为起点。我有一个名为“订单”的数据库表，其中包含许多记录。我决定尝试在表格中显示所有订单。这是订单模型：

```
using System.Collections.Generic;
using System.ComponentModel;
using System.ComponentModel.DataAnnotations;
using System.Web.Mvc;

namespace MvcMusicStore.Models
{
[Bind(Exclude = "OrderId")]
public partial class Order
{
    [ScaffoldColumn(false)]
    public int OrderId { get; set; }

    [ScaffoldColumn(false)]
    public System.DateTime OrderDate { get; set; }

    [ScaffoldColumn(false)]
    public string Username { get; set; }

    [Required(ErrorMessage = "First Name is required")]
    [DisplayName("First Name")]
    [StringLength(160)]
    public string FirstName { get; set; }

    [Required(ErrorMessage = "Last Name is required")]
    [DisplayName("Last Name")]
    [StringLength(160)]
    public string LastName { get; set; }

    [Required(ErrorMessage = "Address is required")]
    [StringLength(70)]
    public string Address { get; set; }

    [Required(ErrorMessage = "City is required")]
    [StringLength(40)]
    public string City { get; set; }

    [Required(ErrorMessage = "State is required")]
    [StringLength(40)]
    public string State { get; set; }

    [Required(ErrorMessage = "Postal Code is required")]
    [DisplayName("Postal Code")]
    [StringLength(10)]
    public string PostalCode { get; set; }

    [Required(ErrorMessage = "Country is required")]
    [StringLength(40)]
    public string Country { get; set; }

    [Required(ErrorMessage = "Phone is required")]
    [StringLength(24)]
    public string Phone { get; set; }

    [Required(ErrorMessage = "Email Address is required")]
    [DisplayName("Email Address")]
    [RegularExpression(@"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}",
        ErrorMessage = "Email is is not valid.")]
    [DataType(DataType.EmailAddress)]
    public string Email { get; set; }

    [ScaffoldColumn(false)]
    public decimal Total { get; set; }

    public List<OrderDetail> OrderDetails { get; set; }
   }
   } 
```

我可以使用剃刀视图显示数据库结果，但它会在一个很长的表中的一页上显示每个视图。

我的问题是，有没有办法让页面只显示 20 个订单，然后我可以单击下一页查看接下来的 20 个？只是为了让您知道整个过程是如何工作的，我只是在使用实体框架执行“代码优先”（微软似乎在他们的大多数教程中都鼓励这种方法）：

```
using System.Data.Entity;

namespace MvcMusicStore.Models
{
public class MusicStoreEntities : DbContext
{
    public DbSet<Order> Orders { get; set; }
    public DbSet<OrderDetail> OrderDetails { get; set; }
}
} 
```

控制器：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MvcMusicStore.Models;

namespace Test.Controllers
{
public class OrdersController : Controller
{
    private MusicStoreEntities db = new MusicStoreEntities();

    //
    // GET: /Orders/

    public ActionResult Index()
    {
        return View(db.Orders.ToList());
    }

}
} 
```

这是剃刀视图：

```
@model IEnumerable<MvcMusicStore.Models.Order>

@{
ViewBag.Title = "Index";
}

<h2>Orders Overview</h2>
<br />
<div class="CSSTableGenerator" >
<table>
<tr>
    <td>
        @Html.DisplayNameFor(model => model.OrderId)
    </td>
     <td>
        @Html.DisplayNameFor(model => model.OrderDate)
    </td>
    <td>
        @Html.DisplayNameFor(model => model.Username)
    </td>
    <td>
        @Html.DisplayNameFor(model => model.Total)
    </td>
    <td>
        @Html.DisplayNameFor(model => model.FirstName)
    </td>
    <td>
        @Html.DisplayNameFor(model => model.LastName)
    </td>
    <td>
        @Html.DisplayNameFor(model => model.Address)
    </td>
    <td>
        @Html.DisplayNameFor(model => model.City)
    </td>
    <td>
        @Html.DisplayNameFor(model => model.State)
    </td>
    <td>
        @Html.DisplayNameFor(model => model.PostalCode)
    </td>
    <td>
        @Html.DisplayNameFor(model => model.Country)
    </td>
    <td>
        @Html.DisplayNameFor(model => model.Phone)
    </td>
    <td>
        @Html.DisplayNameFor(model => model.Email)
    </td>

</tr>

@foreach (var item in Model) {
<tr>
     <td>
        @Html.DisplayFor(modelItem => item.OrderId)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.OrderDate)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Username)
    </td>
      <td>
        @Html.DisplayFor(modelItem => item.Total)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.FirstName)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.LastName)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Address)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.City)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.State)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.PostalCode)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Country)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Phone)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Email)
    </td>
    <td>

        @Html.ActionLink("Details", "Details", new { id=item.OrderId }) |
        @Html.ActionLink("Delete", "Delete", new { id=item.OrderId })
    </td>
    </tr>
    }

    </table>
    </div> 
```

第二个问题，表格中每个订单的总价格始终为 0.0。但是所有其他字段都是正确的。感谢您的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:14:23.613

关于你的第一个问题......分页是你想要完成的，并且有几个很好的指南来说明如何完成这个。就个人而言，我建议学习使用 Linq/Entity Framework/MVC 框架，因为一旦你对这些有所了解，分页位应该很容易添加。

[**分页教程**](http://msdn.microsoft.com/en-us/magazine/gg650669.aspx)

关于你的第二个问题...

您可以使用服务器资源管理器检查数据库的内容，这是我将开始验证 Total 实际存在的地方！

![服务器资源管理器](../Images/d7da04a3c4f75fbda2c3463c4ff02a4b.png)

为此，您可能必须使用图片中“数据”中“t”正上方的“添加连接”实用程序（如果尚未设置）。

# python - Python：msg.get_payload() 丢弃需要的数据，需要解决方案

> ID：11488558
> 
> 赞同：1
> 
> 时间：2012-07-15T00:54:06.297
> 
> 标签：python, regex, parsing, email, pop3

嗨，我在这里浏览了各种帖子，但没有一个回答我的问题，我有两个问题，1\. 我编写了一个脚本来使用 poplib 获取电子邮件，一切正常，直到我尝试解析电子邮件的正文摆脱标签和其中的数据，我现在放弃了，在这里寻求帮助，希望你们能引导我走向正确的方向，因为我在哪里做错了，或者我应该怎么做才能让它发挥作用。

这是解析器脚本的来源

```
import sys
import socket
import poplib
import email
import csv
import re
try:
  host = "mail.someserver.com"
  mail = poplib.POP3(host)
  print mail.getwelcome()
  print mail.user("username@someserver.com")
  print mail.pass_("qaiaJWkvZT")
  print mail.stat()
  print mail.list()
  print ""

  emailWriter = csv.writer(open('emailMessages.csv', 'wb'), delimiter=',', quotechar='\'', quoting=csv.QUOTE_MINIMAL)
  emailWriter.writerow(['Messages'])
  if mail.stat()[1] > 0:
      print "You have new mail."
  else:
      print "No new mail."

  print ""

  numMessages = len(mail.list()[1])
  for i in range(numMessages):
      for j in mail.retr(i+1)[1]:
          #print j
          msg = email.message_from_string(j) # new statement
          print msg.get_payload(decode=True)
          #emailWriter.writerow([msg.get_payload(decode=True)]) # new statement

  mail.quit()
  input("Press any key to continue.")
except socket.error as e:
  print "Something went wrong! :(\nREASON:\n{0}:{1}".format(e.errno, e.strerror)
  raise
except:
  print "Something went wrong!", sys.exc_info()[0]
  raise 
```

这是上面脚本生成的输出

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.or
g/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style type="text/css">
BODY {

}
TD {

}
TH {

}
H1 {

}
TABLE,IMG,A {

}
</style>
</head>
<body>

<p><strong>PO Number:</strong> 35164</p>

<p><strong>Ship To:</strong><br />
Joe Pasloski<br />
16 Redwood Drive<br />Yorkton, SK  S3N2X7<br />
204-473-2218</p>

<table cellspacing="0" cellpadding="5" border="1" width="710" align="left">
<tr>

</tr>
<tr>

</tr>
</table>
</body>
</html> 
```

但是，如果我将脚本更改为直接在循环内打印 j 变量，它会给我这个

```
Return-Path: <orders@someserver.com>
Delivered-To: username@someserver.com
Received: (qmail 7636 invoked by uid 48); 14 Jul 2012 23:29:11 -0000
Date: 14 Jul 2012 23:29:11 -0000
Message-ID: <20120714232911.7635.qmail@b.inetuhosted.net>
To: username@someserver.com
Subject: Drop Ship Order - Joe Pasloski
From: Someserver.com <orders@someserver.com>
X-Mailer: PHP/5.2.17
MIME-Version: 1.0
Content-Type: multipart/alternative;
         boundary="2631183869_50020"
Reply-to: SomeServer.com <orders@someserver.com>
X-Antivirus: avast! (VPS 120714-2, 07/15/2012), Inbound message
X-Antivirus-Status: Clean

--2631183869_50020
Content-Type: text/plain;
        charset="iso-8859-1"
Content-Transfer-Encoding: 8bit

--2631183869_50020
Content-Type: text/html;
        charset="iso-8859-1"
Content-Transfer-Encoding: 8bit

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.or
g/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style type="text/css">
BODY {
        MARGIN-TOP: 10px;
        MARGIN-BOTTOM: 10px;
        MARGIN-LEFT: 10px;
        MARGIN-RIGHT: 10px;
        FONT-SIZE: 12px;
        FONT-FAMILY: arial,helvetica,sans-serif
        PADDING: 0px;
}
TD {
        FONT-SIZE: 12px;
        FONT-FAMILY: arial,helvetica,sans-serif
        COLOR: #000000;
}
TH {
        FONT-SIZE: 13px;
        FONT-FAMILY: arial,helvetica,sans-serif
}
H1 {
    FONT-SIZE: 20px
}
TABLE,IMG,A {
        BORDER: 0px;
}
</style>
</head>
<body>

<p><strong>PO Number:</strong> 35164</p>

<p><strong>Ship To:</strong><br />
Joe Pasloski<br />
16 Redwood Drive<br />Yorkton, SK  S3N2X7<br />
204-473-2218</p>

<p><strong>Items:</strong>
<table cellspacing="0" cellpadding="5" border="1" width="710" align="left">
<tr>
        <th align="left" width="100">SKU</th>
        <th align="left" width="550">Product</th>
        <th align="left" width="60">Qty</th>
</tr>
<tr>
        <td>JJ-Hamper-Firetruck</td>
        <td>Frankie's Fire Truck Laundry Hamper</td>
        <td>1</td>
</tr>
</table>
</body>
</html> 
```

如果我需要处理原始消息，我怎样才能有效地让消息的正文部分去除不必要的 html 标签而不丢失任何数据？或者，如果可以通过使用 get_payload() 方法，我该怎么做才能使其工作。

请帮忙！

2\. 还有没有办法使用正则表达式获取表中包含的所有 SKU 信息？如果你也能提供给我，那将是一个加号。万分感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:59:58.707

好的，我自己找到了答案，文档说明了所有内容以及[Python 上的帖子：如何使用 poplib 获取电子邮件的 HTML 正文？](https://stackoverflow.com/questions/10668658/python-how-to-get-html-body-of-an-email-message-using-poplib)帮助我朝着正确的方向前进。据我所知，我正在处理的消息不是多部分类型的，并且在应用 get_payload() 时会丢失 html 数据，这就是为什么我必须实现一些正则表达式例程来去除 html 标记的原因原始消息，为此我在原始消息上下载并使用了 Aaron Swartz 的 html2text 库，然后执行 msg.get_payload() .. 这就是我所做的

```
import html2text # added to my source
numMessages = len(mail.list()[1])
  for i in range(numMessages):
      for j in mail.retr(i+1)[1]:

          msg = email.message_from_string(html2text.html2text(j)) 
          print msg.get_payload(decode=False) 
```

这反过来又给了我

```
charset="iso-8859-1"

BODY {

}

TD {

}

TH {

}

H1 {

}

TABLE,IMG,A {

}

**PO Number:** 35170

**Ship To:**

Tami Curtis

67 E. Spring Creek Pkwy

Providence, UT 84332

4357553197

SKU

Product

Qty

JJ-Panel-Isabella-BK-PRT

Isabella Black Damask Curtains (2 Panels)

1 
```

现在我只需要使用正则表达式对其进行更多清理，以获得不必要的换行符/空格和 css 标记。

希望它对其他人也有帮助:)干杯！

# c# - 如何将 cookie 保存到 Metro 中的文件中？

> ID：11488563
> 
> 赞同：3
> 
> 时间：2012-07-15T00:55:16.100
> 
> 标签：c#, .net, microsoft-metro, .net-4.5

基本上，我需要知道如何在 .net 4.5 中编写此代码。我在 MSDN 中找不到它。

```
private void Savecookie(string filename, CookieContainer rcookie)
{
    Stream stream = File.Open(filename, FileMode.Create);
    BinaryFormatter bFormatter = new BinaryFormatter();
    bFormatter.Serialize(stream, rcookie);
    stream.Close();
} 
```

文件已被存储文件夹替换，我找不到 binaryformatter 的替代品。我不知道如何序列化文件的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T01:19:08.867

You can use a `MemoryStream` to get the data as an array of bytes, which you can then save to a StorageFile.

```
private byte[] SerializeCookies(CookieContainer rcookie) 
{ 
    MemoryStream stream = new MemoryStream();
    BinaryFormatter bFormatter = new BinaryFormatter(); 
    bFormatter.Serialize(stream, rcookie); 
    stream.Close(); 
    return stream.ToArray();
} 
```

# grails - Cookie 插件，路径问题

> ID：11488566
> 
> 赞同：3
> 
> 时间：2012-07-15T00:55:37.447
> 
> 标签：grails

因此，我正在尝试使用 cookie 插件（参见此处： http: [//grails.org/plugin/cookie](http://grails.org/plugin/cookie)），总的来说，它运行良好。但是，由于路径问题，我遇到了从应用程序的不同部分访问我的 cookie 的问题。

根据我在应用程序中的位置，我将相同的 cookie 存储在不同的位置。

根据插件页面的建议，我已将此添加到我的 Config.groovy 中：

```
com.studentuniverse.grails.plugins.cookie.services.CookieService.metaClass.setCookie = { response, name, value, maxAge ->
def cookie = new javax.servlet.http.Cookie(name, value)
cookie.setMaxAge(maxAge)
cookie.setPath("/")
response.addCookie(cookie) 
```

}

但这似乎并没有改变什么。我仍然得到两个 cookie，一个存储在 /[AppName]/[Controller1]，另一个存储在 /[AppName]/[Controller2]。理想情况下，我希望两者都存储在 /[AppName] 中。但是，我对 setPath 变量所做的任何更改似乎都没有效果。我什至尝试将其更改为

```
cookie.setPath("/cookies") 
```

例如，预计它将存储在 /[AppName]/[Controller1]/cookies 中，但没有进行任何更改。我是否需要在其他地方传递路径变量，或者以不同的方式修改该路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T03:43:10.687

您是否尝试过添加域。

这是我的代码，它工作正常

```
def myCookie = new Cookie(cookieName, cookieValue)
        myCookie.setMaxAge(cookieExpTime)
        myCookie.setDomain(cookieDomain)
        myCookie.setPath("/")
        // Force all cookie to only be able to be transmitted over SSL if true.
        myCookie.setSecure(isSecure)
        response.addCookie(myCookie) 
```

# jquery - Chrome 20.x 问题（错误？）通过 jQuery 每隔一段时间应用/删除类

> ID：11488569
> 
> 赞同：7
> 
> 时间：2012-07-15T00:55:59.480
> 
> 标签：jquery, google-chrome, radial, radmenu

对于那些喜欢用头撞电脑键盘的人来说，这是一个有趣的游戏。

网站：[http ://blduke.com.php53-27.dfw1-2.websitetestlink.com](http://blduke.com.php53-27.dfw1-2.websitetestlink.com)

有趣的 jQuery 小东西就在导航下方。它实际上是一个径向菜单（[插件](http://www.tikku.com/jquery-radmenu-plugin#radmenu_tutorial_2)）。该插件包括将触发顺时针和逆时针旋转的功能，默认情况下不显示径向菜单。所以我有了初始化径向菜单的代码，立即显示它的代码，以及每隔一段时间触发下一次旋转的代码。最后，我使用插件的 API 连接到 afterAnimation 选项，以确保将“活动”类应用于“活动”菜单项 - 我将使用它来做一些有趣的 CSS 东西，旋转一些到此图形的右侧等。您可以看到列表项上的“活动”类现在只是添加了一个红色背景。

这在 IE8+、Firefox、Safari 和 17.0-19.0 版本的 Chrome 中绝对完美。在 Chrome 20.x 中，它以一种奇怪的方式中断。

活动类仍然会在应该切换到适当的列表项时，但是浏览器正在做一些奇怪的事情，比如延迟活动类在新项目上的呈现，或者在某些时候完全跳过它，或者在两个项目上显示它（上一个项目，以及下一个项目）

没有脚本错误，我很困惑，插件开发人员也是如此。任何人有任何想法，见解？

我的代码：

```
jQuery(document).ready(function($) {
    $("#radial_container").radmenu({
        listClass: 'list', // the list class to look within for items
        itemClass: 'item', // the items - NOTE: the HTML inside the item is copied     into the menu item
        radius: 130, // radius in pixels
        animSpeed:400, // animation speed in millis
        centerX: 0, // the center x axis offset
        centerY: 0, // the center y axis offset
        angleOffset: 30, // in degrees,
        afterAnimation: function($m){ // after the animation triggers, grab the     "active" menu item (object) to recieve the "active" class
            $("#radial_container").radmenu(2); 
        }
   }).radmenu("show"); // Show the menu straight off, we don't need to trigger with a click

    setInterval(function() { // automatically rotate the menu at intervals
        $('#radial_container').radmenu('next');
    }, 4000);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T01:17:23.047

为什么你需要一个插件呢？您只是在为三个简单元素的顶部和左侧设置动画。为什么不手动写。您确定提供的示例代码不会再长了。

```
function setPosition(element, position) {
   var placements = [[100,100], [200, 200], [0, 200]] ; //for instance

   $(element).stop().animate({left: placements[position][0]+ 'px', top: placements[position][1] + 'px'});

   if (position == 0) { $(element).addClass('activeMenuItem');}
}

var state = 0;

function rotateMenu(direction) {
    state += direction;
    if (state < 0) state = 2;
    if (state > 2) state = 0;

    $('.menuItem').removeClass('activeMenuItem');

    setPosition('#item0', state  % 3);
    setPosition('#item1', (state + 1) % 3);
    setPosition('#item2', (state + 2) % 3);
} 
```

就是这样。`rotateMenu(1)`向一个方向`rotateMenu(-1)`旋转，同时向另一个方向旋转。

您的菜单项将具有 class="menuItem" 和 id="item"。

这是[jsFiddle](http://jsfiddle.net/kfTYN/)的一个小演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T01:53:26.367

我在本地测试时稍微编辑了您的代码：

```
setInterval(function() { // automatically rotate the menu at intervals
    $('.radial_div div').removeClass('active'); //add this line
    $('#radial_container').radmenu('next');
}, 4000); 
```

在 Chrome 20 和 FF16a 上测试。

这将确保在您调用旋转插件时所有 div 都会丢失该类，并在函数运行`active`时将其正确添加回顶部项目。`afterAnimation`

* * *

然后新问题似乎很难调试，因为我不能让它不断发生。但是，试试这个：

```
afterAnimation: function($m){ // after the animation triggers, grab the "active" menu item (object) to recieve the "active" class
    setTimeout(function() {
        $("#radial_container").radmenu(2);
    }, 0); 
} 
```

这将确保`radmenu`仅在当前函数堆栈完成处理后才调用该函数，我观察了几分钟，它甚至没有出现一次错误。

此外，如果您想已经开始使用`active`该类的顶部项目，您可以添加：

```
$('.radial_div div:nth-child(3)').addClass('active'); 
```

函数内部的任何地方`.ready`。

# asp.net - ASP 在整个项目中更改了 ContentPlaceHolder，现在找不到我更改的内容

> ID：11488571
> 
> 赞同：0
> 
> 时间：2012-07-15T00:57:33.887
> 
> 标签：asp.net

我收到错误消息：在母版页中找不到 ContentPlaceHolder 'ContentPlaceHolder1'。

这是正确的，我将其更改为 ContentPlaceHolderBottom，这就是我这样做的原因，我对整个项目执行了查找和替换。这个错误到底是从哪里来的，还有另一个地方我必须改变它吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T01:00:05.433

您是否选择了正确的“在文件中查找”选项？您可能只告诉它搜索 *.master 文件而不是 *.aspx 文件。

无论如何，问题是因为你有`<asp:Content runat="server" ContentPlaceHolderId="ContentPlaceHolder1">`你的 *.aspx 文件之一。

如果您不使用 MVC，应该很容易找到罪魁祸首（提示：检查地址栏）。

狩猎愉快。

# memory - 如果每次启动游戏时内存地址都发生变化，DLL 注入如何与游戏一起工作？

> ID：11488573
> 
> 赞同：1
> 
> 时间：2012-07-15T00:58:38.007
> 
> 标签：memory, dynamic, memory-address

好的，当谈到内存黑客/内存管理（无论你想怎么称呼它）时，我几乎是一个业余爱好者，但我遵循了一个关于编写 DLL 的简单教程。我用Cheat Engine找到了某个值的某个地址，然后关闭游戏重新启动。我试图找到相同的值，但它有不同的地址（我假设是动态内存）。

所以，好吧，我应该复制这个地址并在注入它之前将它放入 DLL 的代码的一部分中（它应该是一个 while(true) 循环来不断地将该地址中的值重置为 0），但不会如果每次启动游戏时地址都会改变，那么使用DLL注入不是没用，还是我在这里遗漏了什么？如何继续查找具有动态地址的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:53:28.203

我也是一个业余爱好者，在某些方面可能比你知道的还要少。

但是，根据我的经验，我相信有一些方法可以在内存编辑器中找到“指针”，指针（我相信）是一小段代码，可以随机生成您真正想要的地址，找到静态指针地址，您应该能够将您的 .dll 路由到动态值地址。

希望对您有所帮助，我会研究指针，它们如何工作以及如何使用它们。

# c# - Visual Studio 2010 高级 MSTest 错误？

> ID：11488575
> 
> 赞同：1
> 
> 时间：2012-07-15T00:58:44.637
> 
> 标签：c#, visual-studio-2010, mstest

以下是测试代码。

```
namespace ConsoleApplication2
{
    class MyClass {}
    class Program
    {
        static void Main(string[] args) { }

        List<MyClass> Test() { return new List<MyClass>(); }
    }
} 
```

然后使用 Visual Studio 为方法创建一个联合测试`Test()`。

```
 [TestMethod()]
    [DeploymentItem("ConsoleApplication2.exe")]
    public void TestTest()
    {
        Program_Accessor target = new Program_Accessor(); // TODO: Initialize to an appropriate value
        List<MyClass_Accessor> actual;
        actual = target.Test();
        Assert.IsTrue(actual != null);
    } 
```

运行测试时会出现以下异常。如何解决该问题？

```
测试方法 TestProject1.ProgramTest.TestTest 抛出异常：  
System.InvalidCastException：无法将“System.Collections.Generic.List`1[ConsoleApplication2.MyClass]”类型的对象转换为“System.Collections.Generic.List`1[ConsoleApplication2.MyClass_Accessor]”类型。

```

我尝试了以下方法，它也不起作用。

```
IEnumerable<MyClass> Test1() { return new List<MyClass>(); } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T01:24:03.383

您的程序和您的方法不是公开的，因此 MSTest 和任何其他代码都无法调用它。MS Test 构建的包装器`Program_Accessor`通过反射使用您的代码。

更改您的代码以使用`public`访问修饰符并重新生成测试。这是学习单元测试的最简单方法。

```
public class Program
{
   public class MyClass{}

   static void Main(string[] args) { }

   public List<MyClass> Test() { return new List<MyClass>(); }
} 
```

`InternalsVisibleToAttribute`如果您不想`MyClass`公开，您可以使用。

[MSDN 中的友元程序集](http://msdn.microsoft.com/en-us/library/0tke9fxk.aspx)

# svn - 颠覆：在没有工作副本的情况下合并

> ID：11488576
> 
> 赞同：7
> 
> 时间：2012-07-15T00:59:13.713
> 
> 标签：svn, merge

我想从命令行 svn 恢复一个错误的提交。通常的建议是将提交反向合并到您的工作副本中，然后提交更改。就我而言，错误的提交是一个错误的输入`svn import`，它破坏了我在其他任何地方都没有签出的存储库的一部分。我可以检查受影响的目录，然后按照通常的建议进行操作，但如果我可以完全使用 URL 进行反向合并，而不需要工作副本，那会更优雅。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T04:57:00.603

不，您不能简单地通过 URL 进行合并，因为这意味着在没有看到合并结果的情况下进行合并——这是一种非常糟糕的做法。

有一种情况不会很糟糕：

*   有人对当前版本 455 进行了可怕而巨大的更改。您可以轻松地将存储库恢复到版本 454，而无需过多担心。没有真正需要看到最终结果会是什么。

但是，想象一下：

*   有人在修订版 455 中进行了可怕而巨大的更改。当前修订版现在是 460。Subversion 现在有五个新更改。您可以像在上一个示例中所做的那样退出更改集 455，但不会获得修订版 454。相反，您会获得修订版 454 以及修订版 456 到 460 中所做的更改。其中一些更改可能与混乱无关修订版 455。其中一些更改可能是由于修订版 455 中所做的更改。

我知道现在有一个很大的混乱需要清理，但你有这个混乱的原因是因为有人通过*svn import*命令提交了更改，而无需在提交之前先验证它们。这就是我不鼓励使用*svn merge*命令的原因。

# xml - SQL Server XML 粉碎性能

> ID：11488577
> 
> 赞同：5
> 
> 时间：2012-07-15T00:59:24.260
> 
> 标签：xml, performance, sql-server-2008-r2

我正在使用 NOAA 当前的观察 XML（例如：[Washington DC](http://w1.weather.gov/xml/current_obs/WASD2.xml)）并将 4000 多个站点的文件切碎到 SQL Server 2008 R2 表中。在尝试了许多不同的方法之后，我有了一个正在推进的方法。

这个问题是关于不同方法之间的性能，最重要的是为什么它如此激烈。

**第一次尝试**

在 C# 中工作时，我使用 Linq to XML 解析所有文件，并使用 Linq to SQL 将结果记录写入数据库。这个代码是可预测的，所以我不会让你厌烦它。

用 linq 重写到实体框架没有帮助。

这导致应用程序运行了一个多小时，并且只处理了 1600 个左右的文件。缓慢是 Linq to SQL 和 Linq to Entities 为每条记录执行插入和选择的结果。

**第二次尝试**

仍在使用 C# 我试图通过使用在线提供的批量插入方法来加速它（例如：[使用 Linq-to-SQL 加速插入 - 第 1 部分](http://blog.tanneryd.com/2011/11/speeding-up-inserts-using-linq-to-sql.html)）。

仍然很慢，尽管比第一次尝试要快得多。

在这一点上，我开始使用存储过程来处理 XML 粉碎和插入，使用 C# 代码将文件连接成一个 XML 字符串并添加一个包装器标记。

**第三次尝试**

使用类似于此的 SQL Server 的 XML 查询（@xml 是 xml 文件）[来自内存]：

```
select credit = T.observation.value('credit[1]', 'varchar(256)')
       ,... -- the rest of the elements possible in the file.
from @xml.nodes('wrapper') W(station)
    cross apply W.station.nodes('current_observation') T(observation) 
```

我让它运行了 15 分钟，并取消了处理 250 条左右的记录。

**第四次尝试**

我将查询更改为使用 OpenXML：

```
declare $idoc int

exec sp_xml_preparedocument @idoc output, @xml

select Credit
       ,... -- the rest of the elements
from openxml(@idoc, '/wrapper/current_observations', 2)
    with (
        Credit varchar(256) 'credit'
        ,...) -- the rest of the elements

exec sp_xml_removedocument @idoc 
```

这在 10 秒内处理了所有 4000 多条记录！完全可以接受。

虽然我预计这些方法之间会有一些差异，但我没想到差异会如此巨大。

所以我的问题很简单，

*“为什么不同方法之间的性能差异如此之大？”*

我很高兴被证明我使用了前 3 个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:53:36.513

为了加快 XQuery 选项的速度，您*可以*做的一件事是避免交叉连接。

我看不到您的 XML 是什么样子——华盛顿特区示例只包含一个节点——但假设 XML 只包含一个`<wrapper>`，然后是其中的一个列表`<current_observation>`，那么您可以优化您的 XQuery 以读取：

```
select 
    credit = T.observation.value('credit[1]', 'varchar(256)')
    ,... -- the rest of the elements possible in the file.
from 
    @xml.nodes('wrapper/current_observation') T(observation) 
```

这应该比您在测试中看到的速度快得多。

如果您有时间尝试这个 - 我最感兴趣的是了解这种修改后的方法如何叠加 - 与您原来的 XQUery 和`OPENXML`解决方案相比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:39:35.213

你能确认你没有在查询中使用父轴（'..'）吗？这会破坏性能。您还可以添加 text() 访问器，这也应该可以提高性能，如下所示：

```
select
o.c.value('(credit/text())[1]', 'varchar(max)'),
--...
from @xml.nodes('wrapper/current_observation') o(c) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:17:46.637

您是否尝试过文本访问器？相对于其中包含 4,096 条记录的 6MB xml 文件，我的重现提高了 15-20%，尽管这仅适用于无类型的 XML（SQL Server 中没有关联的 XSD）。

我还发现我的查询在 10-12 秒内运行，所以你的 43 秒仍然让我有些困惑。您使用的是什么版本/服务包的 SQL Server？我记得在 SQL 2005 中插入表变量时曾经出现过问题，但认为这已解决。

# qt - 具有管理员权限的 QProcess

> ID：11488582
> 
> 赞同：2
> 
> 时间：2012-07-15T01:00:25.817
> 
> 标签：qt, root, privileges, administrator, qprocess

我想使用 QProcess 从 .sh 文件运行 shell 脚本。我遇到的问题是用户权限。如何提示用户输入管理员的用户名和密码，以获得正确的权限来使用 .sh 文件？

我希望有一个看起来像这样的提示： ![在此处输入图像描述](../Images/024d362d7207b5a60e2f2376d3bf1fef.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:44:01.033

AFAIK，Qt 还没有为此提供任何跨平台工具。

您最好的选择可能是将该逻辑放入 shell 脚本（即提出一个新的非 Qt 标记问题）。

# php - 将 PHP 变量从一个插件文件传递到另一个 WordPress

> ID：11488585
> 
> 赞同：0
> 
> 时间：2012-07-15T01:02:35.510
> 
> 标签：php, wordpress, plugins, paypal

我正在开发一个 WordPress 插件，但遇到了一个小障碍。我正在编写与 PayPal 的 IPN 交互的脚本的一部分。我在插件目录中有一个 ipn.php 文件，该文件收集来自 PayPal 的响应并验证所有交易细节。这部分工作正常，但第二部分是我必须将变量插入 WordPress 数据库以标记成功购买。由于ipn.php文件中没有$wpdb，所以我必须将数据传递给插件的核心进行处理。

我对这方面的其他解决方案持开放态度，非常感谢您的帮助。谢谢！

这是一个示例，此文件将用于 $.load() 以填充管理面板中的区域

```
<?php
    global $wpdb;
    $promos = $wpdb->get_results("SELECT * FROM ". $wpdb->prefix ."voltbam_promocodes");

    foreach($promos as $promo){
        ?>
            ID: <?php echo $promo->id ?><br />
            Name: <?php echo $promo->name ?><br />
            Value: <?php echo $promo->value ?><br />
            Type: <?php echo $promo->type ?><br /><br />

        <?
    }

?> 
```

这是输出

```
Fatal error: Call to a member function get_results() on a non-object in (filename) on     line 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T05:16:30.170

要求`../../../wp-load.php`将引入 WordPress 核心并让您访问 $wpdb 全局。这通常是您上方的三个目录，但如果您的脚本位于更远的子目录中，则可能更多。

如果您使用的是多站点安装，请确保 $_SERVER['HTTP_HOST'] 与您要访问的 WordPress 站点的 URL 匹配，然后再要求 wp-load.php。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:17:39.267

在我自己的设置中，所有 IPN 处理代码都在我的插件中。我有一个短代码，可以在需要时调用它。

我创建了一个自定义页面模板，除了基本的帖子循环之外，它几乎没有任何内容。这个页面永远不会向用户显示，所以任何面向显示的东西都不重要。然后我基于该模板创建了一个名为“ipnhandler”的页面，其中仅包含短代码作为内容。

我已将此页面设置为 PayPal 的 IPN 处理程序。因为它是一个常规页面，所以没有指向 WordPress 文件夹或类似内容的链接。只是这个：

[http://www.mysite.com/ipnhandler](http://www.mysite.com/ipnhandler)

当 PayPal 调用此页面时，Wordpress 会看到简码并调用我的插件，该插件会执行所需的 IPN 处理。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-15T04:50:47.703

要么提交您的 ajax 请求，`wp-admin/admin-ajax.php`要么`include 'wp-load.php';`我个人建议`admin-ajax.php`。请参阅[插件中的 AJAX](http://codex.wordpress.org/AJAX_in_Plugins)。

# ide - 用多个平台/IDE 项目维护组织的好方法是什么？

> ID：11488590
> 
> 赞同：0
> 
> 时间：2012-07-15T01:03:31.283
> 
> 标签：ide, cross-platform, organization

我正在开发一些可在 Windows 和 Mac 上运行的游戏，并且正在使用 Visual Studio 2010 和 Xcode 4.3。

对于使用多个 IDE 的开发人员，您的组织在主要项目文件、资源文件（声音、纹理、设置）和平台特定文件方面是什么样的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T01:11:32.130

大多数开发人员使用相同的 IDE 和版本（例如 VS2010），但对于其他人和使用不同工具的人来说，维护自己的项目文件是他们的责任（好吧，VS2008 和 VS2010 可以共享 *.csproj 文件，但他们有不同的 *.sln文件，所以这不是一个大问题）。

项目以通常的方式布局：根目录中的解决方案文件（根据 IDE 命名，例如“Foobar-VS2008.sln”和“Foobar-VS2010.sln”），然后每个项目都存在于根目录下和根目录中每个项目的 *.csproj 文件在 IDE 之间共享。

然而，我从事过更复杂的项目，尤其是大型和流行的开源项目，人们喜欢在 vim 和 VC 中破解 C。在这些情况下，项目和解决方案文件实际上存在于它们自己的根目录下，并且和以前一样，每个 IDE 的开发人员都负责维护他们的项目文件。结构如下所示：

```
PopularProject        (Empty)
PopularProject\src    (Root for all the *.c and *.h goodness)
PopularProject\bin    (Where the myriad build systems dump their output in a suitable subdirectory (e.g. \bin\VC9\IA-64 or \bin\gcc\x86)
PopularProject\prj\VC9 (Where VC9 project and SLN files go)
PopularProject\prj\gcc (Where GCC makefiles and other files go)
PopularProject\prj\Eclipse (Ditto, but for Eclipse) 
```

它使项目井井有条，但它只适用于大型项目。对于小型的来说，这太过分了，通常只有一个项目和 *.sln 文件更容易，如果有人想添加自己的，那么他们可以这样做，但只能在他们自己的机器上（即不要让少数群体添加自己的文件，不是歧视性的，而是为了让事情变得简单和易于管理）。

对于使用平台特定代码的项目，源代码中定义了#if WIN32 或#if LINUX 预处理器的自由应用程序。

所有第三方或导入的库都倾向于放在项目根目录之外的“lib”或“ref”子目录中。

我没有直接参与过游戏，但资产存储在文件系统的另一棵树中。开发人员不希望在本地机器和源代码控制之间进行差异时包含它们（二进制文件也是差异的婊子）。毕竟，他们是（应该是）不同团队的艺术家的责任。

# php - mysql链接语句不返回没有链接的记录

> ID：11488594
> 
> 赞同：0
> 
> 时间：2012-07-15T01:04:21.873
> 
> 标签：php, mysql

我的数据库中有一个名为 Users 的表。一个用户可以有多个地址，但在某些情况下他们不会有任何地址。我的 mysql 链接语句只返回具有至少一个地址的记录：

```
$query = ' SELECT DISTINCT a.id FROM users as a, addresses as b' ;
$query.= ' WHERE a.id = b.userId ' ; 
```

我怎样才能改变它，以便仍然返回没有地址的用户？

我猜有一个简单的解决方案，我只是想念！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T01:13:35.927

改用`LEFT JOIN`：

```
SELECT DISTINCT a.id
FROM   Users a LEFT JOIN Addresses b
        on a.ID = b.UserID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T01:13:47.650

您需要使用`LEFT JOIN`：

```
$query = ' SELECT DISTINCT a.id FROM users as a LEFT JOIN addresses as b' ;
$query.= ' ON a.id = b.userId ' ; 
```

# html - 为什么从网站下载后图片质量会发生变化？

> ID：11488603
> 
> 赞同：-1
> 
> 时间：2012-07-15T01:06:20.727
> 
> 标签：html, parsing, image

我正在编写解析代码以从网站中提取图像。它基于获取标签并获取图像的源链接。

如果我们以网站 BBC 为例（[新闻文章](http://www.bbc.co.uk/news/world-asia-pacific-18844149)），他们显示的第一张图片的来源是（[链接](http://news.bbcimg.co.uk/media/images/61576000/jpg/_61576956_015313589.jpg)），但如果我直接打开该链接，图像的质量会发生巨大变化。

我无法理解 BBC 如何使用相同的链接显示高质量的图片，以及我如何无法通过下载获得相同质量的 BBC 节目。

您能告诉我如何通过下载获得相同质量的图片吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T01:09:45.017

实际图片在这里：http: [//news.bbcimg.co.uk/media/images/61576000/jpg/_61576754_015313589.jpg](http://news.bbcimg.co.uk/media/images/61576000/jpg/_61576754_015313589.jpg)

您提供的 URL 只是缩略图。

这里没有诡计。您只是在查看缩略图而不是图像。因为这是他们使用的一些精美的 JavaScript 库，所以您必须对其工作方式进行逆向工程并检查实际的 DOM（如我所做的那样）以获取真实的图像 URL。

# php - php：使用 xPath 显示 rss 提要的标题和图像

> ID：11488608
> 
> 赞同：0
> 
> 时间：2012-07-15T01:08:48.900
> 
> 标签：php, xpath, rss, feed

我正在尝试使用 php 中的 xpath 来显示 rss 提要的标题和图像。但它只显示 1 个标题。没有显示所有标题，也没有显示任何图像。我的代码：

```
function getImage($xml){
    $items=$xml->xPath('/rss/channel/item');
    foreach($items as $item){
        echo($item->title);
        $encl=$xml->xPath('//enclosure');
        print_r('<img src='.$encl->attributes()->url.'/>');
        echo('<br>');
    } 
```

有人可以指出我要去哪里错了吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-20T17:48:06.253

你可以简单地称它为

```
if($item->enclosure)
 print_r('<img src='.$encl->attributes()->url.'/>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:04:18.097

好的，我让它工作了。:) 为每个标题显示一个图像。我的代码：

首先，我正在使用 curl 下载 rss 提要：

```
<?php
if (function_exists("curl_init")){
    $ch=curl_init();
    curl_setopt($ch,CURLOPT_URL, 'http://menmedia.co.uk/manchestereveningnews/news/rss.xml');
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
    //curl_setopt($ch,CURLOPT_HEADER,0);
$data=curl_exec($ch);

curl_close($ch);

$doc=new SimpleXmlElement($data,LIBXML_NOCDATA); 
```

然后我正在解析 RSS 提要。方法 1 和方法 2 都产生相同的输出。

```
function parseRSS($xml){
    $encl_array=array();
    $x=0;
    $i=0;

    $encls=$xml->xPath('/rss/channel/item/enclosure'); 
        foreach($encls as $encl) { 
            $encl_array[$x]=$encl->attributes()->url;
            $x+=1;
        }
            //method 1
    /*$cnt=count($xml->channel->item);
    for($i=0;$i<$cnt;$i++){
        $title=$xml->channel->item[$i]->title;
        print_r('<img src='.$encl_array[$i].'/>');
        echo $title.'<br>';
    }*/

            //method 2 - using xPath
    $items=$xml->xPath('/rss/channel/item');
    foreach ($items as $item){
        echo('<img src='.$encl_array[$i].'/>');
        echo($item->title.'<br>');
        $i+=1;
    }

}//end function parseRSS

    if (isset($doc->channel)) parseRSS($doc);
}//end if (function_exists("curl_init"))

?> 
```

# css - CSS：如何缩进一个文本区域而不缩进另一个？

> ID：11488612
> 
> 赞同：0
> 
> 时间：2012-07-15T01:09:30.757
> 
> 标签：css, ruby-on-rails-3

我正在尝试缩进整个表格：

```
 <%= form_for([micropost, micropost.comments.build], :html => { :id => "blah_form" }) do |f| %>

        <div class="field">
          <p2>Who are you?</p2>
          <%= f.text_field :commenter %>
        </div>
        <div class="field">
          <p2>What deal are you offering?</p2>
          <%= f.text_area :body %>
        </div>
        <div class="actions">
          <%= f.submit "Submit"%>
        </div>
      <% end %> 
```

但我不想以这种形式缩进这个其他文本区域：

```
 <%= form_for(@micropost) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>
      <div class="field">
        <%= f.text_area :content, placeholder: "What's something else you want to buy?" %>
      </div>
      <%= f.submit "Post", class: "btn btn-large btn-primary" %>
    <% end %> 
```

现在我的 CSS 文件说：

```
#blah_form input, textarea, b4 {margin-left:80px} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T01:23:08.093

```
#blah_form input, textarea, b4 {margin-left:80px} 
```

是三个单独的声明，请尝试使用此方法以使您的 CSS 本地化为该表单

```
#blah_form input,
#blah_form textarea,
#blah_form b4 
    {margin-left:80px} 
```

或者可能创建一个缩进类：

```
.indent {
    margin-left:80px;
} 
```

这可以用于所有需要缩进的元素。您可以使该类更智能，以将缩进应用于特定的嵌套元素，例如

```
.indent > div {
    margin-left:80px;
} 
```

（在 ie6 中不起作用）这是说将`margin-left`.indent 的所有直接子级应用到 div 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T01:23:37.713

将另一个类添加到 textarea 周围的 div 并使用它来删除 margin-left

例如。

```
<div class="field no-indent"> 
```

在你的 CSS 中：

```
.no-indent textarea { margin-left:0 } 
```

还有你的 CSS

```
#blah_form input, textarea, b4 {margin-left:80px} 
```

应用于#blah_form 内的任何输入以及所有textarea 和b4（我认为您的意思是b4 类，在这种情况下它应该是.b4）

# javascript - 来自另一个域的正则表达式？

> ID：11488613
> 
> 赞同：0
> 
> 时间：2012-07-15T01:09:42.510
> 
> 标签：javascript, html, regex

我正在尝试创建一个自动化过程来从我的工作网络上的站点检索一些信息。

```
var duderegex = new RegExp("Title for Mr. [^\n]+","m");
var dude = duderegex.exec(input); 
```

到目前为止，一切都很好。问题是我在我的工作计算机上写这个，可能无法说服任何人将它存储在与托管它的站点相同的域中。所以这在技术上使它成为 XSS。而且我宁愿不必获得批准来安装任何非常时髦的东西（所以我不能保证 JQuery 或一个更容易复制/粘贴的 powershell，例如）。

下载文件并在下载后通过网页操作它们没有任何问题，但这增加了一个单击另存为的步骤...

有没有人有任何可行的解决方案来在来自不同域的 HTML 源代码上运行正则表达式？我不需要将其限制为 Javascript，但例如，让 PHP 工作可能需要比我拥有的更多的资源。

一位评论者要求澄清，所以这里。假设我每天要联系 50 个版权所有者（这与知识产权无关，但它会起作用）。现在，我有一个表格可以带我去

```
(1) http://foo.bar/form.htm?action=search&type=ArtistAlbum&Artist=Beatles&Album=White 
```

并重定向到

```
(2) http://foo.bar/form.htm?id=4578469 
```

从那里，我单击一个下拉列表（比如说曲目列表），然后

```
(3) http://foo.bar/form.htm?id=4578469&track=7 
```

在那里，我按字母顺序列出了在赛道上工作的每个人、他们的代理人和法律代表。我只对三个名字感兴趣，歌词版权持有人姓名，旋律版权持有人姓名，录音版权持有人姓名。所以我必须搜索文档三遍。

由于每个名称都有一个标准标题，我应该能够编写一个脚本来询问艺术家和专辑，生成指向 (1) 的链接，从 (2) 的 url 复制参数或使用正则表达式找到它从链接到 (3)，加载页面 (3)，然后为字符串上的正则表达式生成输出

```
/Lyrics Copyright Holder [^\n]+/
/Melody Copyright Holder [^\n]+/
/Performance Copyright Holder [^\n]+/ 
```

我可以下载所有文件（这需要*很长时间*），但信息有时会发生变化，我想确保我始终获取最新信息。

但我似乎无法绕过 XSS 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T01:22:28.657

You don't say what problem you're really trying to solve so it's a little hard to know what solutions make the most sense for you, but you can write javascript that works on any web page in a browser plug-in (like in Chrome or Firefox) or by using a scripting language outside of a browser (Python, Javascript, PHP, etc...) where you load the page contents and then manipulate the contents using the language tools.

# c - 为什么 C 字符串文字的最大长度与 max char[] 不同？

> ID：11488616
> 
> 赞同：20
> 
> 时间：2012-07-15T01:10:39.540
> 
> 标签：c, standards

**澄清**：鉴于字符串文字可以重写为 a `const char[]`（见下文），对文字施加比对 `char[]`s 更低的最大长度只是语法上的不便。为什么 C 标准鼓励这样做？

* * *

C89 标准对字符串文字有翻译限制：

> 字符串文字或宽字符串文字中的 509 个字符（连接后）

char 数组没有限制；也许

> 对象中的 32767 字节（仅在托管环境中）

适用（我不确定对象或托管环境的含义），但无论如何它是一个更高的限制。

我的理解是字符串文字相当于包含字符的 char 数组，即：总是可以重写如下内容：

```
const char* str = "foo"; 
```

进入这个

```
static const char __THE_LITERAL[] = { 'f', 'o', 'o', '\0' };
const char* str = __THE_LITERAL; 
```

那么为什么对文字有如此严格的限制呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-15T01:26:47.797

字符串文字的限制是编译时要求；逻辑源代码行的长度也有类似的限制。编译器可能使用固定大小的数据结构来保存源代码行和字符串文字。

（C99 将这些特定限制从 509 个字符增加到 4095 个字符。）

另一方面，`char`可以在运行时构建对象（例如 的数组）。这些限制可能是由目标机器架构强加的，而不是编译器的设计。

请注意，这些*不是*强加于程序的上限。编译器根本不需要施加任何有限的限制。如果编译器确实对行长度施加了限制，则它必须至少为 509 或 4095 个字符。（我认为，大多数实际编译器不会施加固定限制；而是动态分配内存。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-15T01:25:55.880

不是说 509 个字符是字符串的限制，而是 ANSI 兼容性所需的最低要求，如此[处](http://msdn.microsoft.com/en-us/library/sx08afx2.aspx)所述。

我认为标准的制定者将数字 509 从他们的屁股中拉了出来，但除非我们从中获得一些官方文件，否则我们无法知道。

至于字符串文字中实际可以包含多少个字符，这取决于编译器。

这里有些例子：

*   MSVC: 2048
*   GCC：无限制（最多 100,000 个字符），但在 510 个字符后发出警告：

    > 长度为 100000 的字符串文字超过了 C90 编译器需要支持的最大长度 509

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T09:47:07.553

对于迟到的答案感到抱歉，但我想说明这两种情况之间的区别（Richard J. Ross 已经指出它们不等价。）

假设你试试这个：

```
const char __THE_LITERAL[] = { 'f', 'o', 'o', '\0' };
const char* str = __THE_LITERAL;
char *str_writable = (char *) str;  // Not so const anymore
str_writable[0] = 'g'; 
```

现在`str`包含“goo”。

但如果你这样做：

```
const char* str = "foo";
char *str_writable = (char *) str;
str_writable[0] = 'g'; 
```

结果：段错误！（至少在我的平台上。）

这是根本区别：在第一种情况下，您有一个初始化为“foo”的数组，但在第二种情况下，您有一个实际的字符串文字。

顺便说一句，

```
const char __THE_LITERAL[] = { 'f', 'o', 'o', '\0' }; 
```

完全等同于

```
const char __THE_LITERAL[] = "foo"; 
```

这里`=`充当数组初始值设定项而不是赋值。这与

```
const char *str = "foo"; 
```

其中字符串文字的地址分配给`str`.

# java - 如何在按下按钮时停止循环

> ID：11488620
> 
> 赞同：0
> 
> 时间：2012-07-15T01:11:09.040
> 
> 标签：java, android, loops, button, android-activity

我希望onClick方法不仅可以为新页面创建一个新的活动，还可以触发循环结束，这样如果有人点击启动画面的背景，循环停止后新屏幕不会重新加载.

这是我的代码，

```
package clouds.clouds;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;

public class splash extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
     Thread logotimer = new Thread() {

            @Override
            public void run(){
                try{
                    int logotimer = 0;
                    while(logotimer <5000) {
                        sleep(100);
                        logotimer = logotimer +100;

                    }
                    startActivity(new Intent("clouds.clouds.SPLASH"));
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                finally{
                    finish();
                }

            }

        };
      logotimer.start();

}

    public void onClickz(View v){}
    public void speed2 (View v){

        startActivity(new Intent("clouds.clouds.BUTTONZ"));
    }

} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T01:16:16.133

向您的类添加一个`volatile`布尔变量（调用它`cancelled`）。将其设置`true`为单击按钮时，并检查`cancelled == false`您的`while`情况。

```
public class splash extends Activity {

    volatile bool cancelled = false;
...

protected void onCancel(...)
{
    cancelled = true;

...

while(!cancelled && logotimer <5000) {
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T01:46:01.863

调用`logotimer.interrupt()`你的`onClick()`方法。这应该会导致`InterruptedException`你的线程中出现一个你应该不做任何事情来处理的问题（或者当你中断你的线程时你想做的任何其他事情）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T02:23:17.647

```
boolean exit = false;
int logotimer = 0;
while(logotimer <5000 && exit != false) {
  sleep(100);
  logotimer = logotimer +100;
  // value = ???    
  if(logotimer == value) {
      exit = true;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T22:40:20.673

```
package clouds.clouds;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;

public class splash extends Activity {
Thread logotimer;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

     logotimer = new Thread();
     Thread logotimer = new Thread() {

            @Override
            public void run(){
                try{
                    int logotimer = 0;
                    while(logotimer <5000) {
                        sleep(100);
                        logotimer = logotimer +100;
                    }
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                finally{
                    finish();
                }
                startActivity(new Intent("clouds.clouds.SPLASH"));
            }

        };
      logotimer.start();

}

public void onClickz (View v){}
public void speed2 (View v){
    logotimer.interrupt();
    startActivity(new Intent("clouds.clouds.BUTTONZ"));
}

} 
```

# php - flash/php 网络摄像头头像--在 php web 应用程序中集成 flash

> ID：11488626
> 
> 赞同：0
> 
> 时间：2012-07-15T01:12:18.353
> 
> 标签：php, flash, actionscript, webcam

我有一个 php/mysql 我们的应用程序，并希望让用户通过网络摄像头为他们的个人资料拍摄自己的快照，类似于它在 Facebook 和 Google+ 上的工作方式，然后使用 php 上传到我的服务器。我的问题是我对 Flash 几乎一无所知。我从其他帖子中的理解是，您必须像 FB 和 Google 一样在客户端使用 flash。我找到了使用 actionscript 和 PHP 来执行此操作的教程和脚本。

这是教程。

[http://www.beautifycode.com/webcam-flash-php-upload-to-server](http://www.beautifycode.com/webcam-flash-php-upload-to-server)

我的问题是我不知道 actionscript 是如何工作的。我对 Flash 的了解几乎仅限于播放 flv 或 swf 文件。我已经在 Google 和 SO 上进行了一些搜索，看来您将操作脚本放在 fla 文件中，但我不知道您如何从 html 页面访问它。

我假设客户端必须有闪存，但服务器端不需要闪存。我们只是从用户那里获取 jpg，然后使用普通的 php 技术上传它。

有人可以指出我在 php/mysql Web 应用程序中集成 Actionscript 和 flash 的正确方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:30:02.743

首先，您需要一些东西来构建`.swf`包含 Flash“电影”的文件。通常，Adobe Flash 用于此目的。

您必须学习一些 ActionScript。如果您熟悉其他语言，这并不是很困难。

构建您的 Flash 电影，将其编译为文件，然后使用[SWFObject](http://code.google.com/p/swfobject/)或类似工具`.swf`将该文件嵌入到您的页面中。从那里，您可以处理服务器端部分，听起来您已经知道该怎么做。

# cocos2d-iphone - Cocos2d Kobold2d reorderChildren 无法正确订购 CCSprites

> ID：11488627
> 
> 赞同：0
> 
> 时间：2012-07-15T01:13:02.660
> 
> 标签：cocos2d-iphone, ccsprite, kobold2d

我在 Kobold2d-Cocos2d 中遇到了关于 CCSprite 对象分层的问题。

我所有的代码都可以正常工作，除了一个保存在数组中的某个图块（CCSprite）应该始终位于顶部。该代码有一个对 CCSprites (Tile) 的引用数组，并沿着所有瓷砖相互交换它们。所以元素 0 和 1 切换（在数组和屏幕上使用 moveTo），然后新元素 1 和 2 切换，然后新元素 2 和 3 切换等等......

这个想法是链开始处的 Tile 跨越到线的前面！

我总是希望第一块瓷砖保持在顶部，但事实并非如此。它只是有时会这样做（当它在另一个 Tile 上方时，它会在屏幕上切换位置，这意味着它是稍后添加的）

这是有问题的CCScene代码：

```
//reference first CCSprite in array -works
Tile *firstTile = [tileArray objectAtIndex:(int)[[[selTracker oldSelectionArray] objectAtIndex:0]element]];

//How much time should be spend leapfrogging each two tiles broken up over 1 second.
    float intervalTime = .75/(float)[[selTracker oldSelectionArray] count];

    //Will use this to count each tile set we leapfrog
    float currentPass = 0;

    //TODO: destroy this wrapper class that holds number, use NSNumber. Fine for now.
     SimpCoord *lastCord;

    //Make moving sprite higher than all others. DOESN'T WORK?
    [self reorderChild:firstTile z:100];

    //Loop through all the tiles that were selected
    for (SimpCoord *coord in [selTracker oldSelectionArray])
    {                   
        if (lastCord)
        {
            //Queue each tile to leapfrog with our moving tile 
            if ([self respondsToSelector:@selector(switchTilesFuncWrapper:)])
            {
                NSArray *argArray = [NSArray arrayWithObjects:
                                     [NSNumber numberWithInt:[lastCord element]],
                                     [NSNumber numberWithInt:[coord element]], 
                                     [NSNumber numberWithFloat:(intervalTime)], nil];
                [self performSelector:@selector(switchTilesFuncWrapper:) withObject:argArray afterDelay:((currentPass) * intervalTime)];
            }
            currentPass++; 
        }
        lastCord = coord; 

    }
` 
```

这通过实际交换两个 Tiles 的方式调用以下代码（我排除了多个参数所需的函数包装中间人）：

（如果它更容易理解，而不是使用 2d 数组来保存我所有的图块，我每行只绘制 10 个，因此 tileCoordsByElement 方法 - 但这不应该是重要的）

```
//
// Switch two tiles on the screen and in the holder array
// onlySwitchArray pass in true to only swap tiles in organization array
// but provide no animation.
- (void) switchTiles:(NSNumber*)elePosVal secPos:(NSNumber*)elePos2Val timeToSwitch:(NSNumber*)time
{
    float switchTime = [time floatValue];
    int elePos = [elePosVal intValue];
    int elePos2 = [elePos2Val intValue];

    Tile *tmpTile = [tileArray objectAtIndex:elePos];
    Tile *tmpTile2 = [tileArray objectAtIndex:elePos2];

    //Move actual tiles on screen
    //Move Tile is elePos (1) to elePos2
    int curCol = 0;
    int curRow = 0;

    [self tileCoordsByElement:elePos2 x:&curRow y:&curCol];
    CCSequence *tmpTile1_Seq = [CCSequence actions:
                                [CCMoveTo actionWithDuration:switchTime position:ccp((curRow-1)*tmpTile.width + tmpTile.width/2,
                                                                                     (curCol-1)*tmpTile.height + tmpTile.height/2)], nil];
    [tmpTile runAction:[CCRepeat actionWithAction:tmpTile1_Seq times:1]];  

    //Move Tile that is elePos2 to elePos(1)
    [self tileCoordsByElement:elePos x:&curRow y:&curCol];
    CCSequence *tmpTile1_Seq2 = [CCSequence actions:
                                 [CCMoveTo actionWithDuration:switchTime position:ccp((curRow-1)*tmpTile.width + tmpTile.width/2,
                                                                                      (curCol-1)*tmpTile.height + tmpTile.height/2)], nil];
    [tmpTile2 runAction:[CCRepeat actionWithAction:tmpTile1_Seq2 times:1]];

    //Swap tiles in array second
    [tileArray replaceObjectAtIndex:elePos withObject:tmpTile2];
    [tileArray replaceObjectAtIndex:elePos2 withObject:tmpTile];

} 
```

好吧。

我知道我正在做的一些事情并不完全有效，如果它不相关，我真的不想过多地关注它们。这对我来说只是一个学习练习——老实说，我真的不明白为什么原来的 Tile 不会保持领先。

我已经尝试了所有可能找到答案的资源或示例（示例包含代码、在线教程、我买的糟糕的书、随机的一些相关的 stackoverflow 文章），但我什么也没得到：\

万一这很重要，这就是我最初将精灵添加到场景中的方式：

```
//Set up A CCSpriteBatchNode to load in pList/pngs of images
[[CCSpriteFrameCache sharedSpriteFrameCache]
 addSpriteFramesWithFile:@"zAtl_BasicImages_64.plist"];
nodeBasicImages = [CCSpriteBatchNode batchNodeWithFile:@"zAtl_BasicImages_64.png" capacity:100];

//Initialize array used to track tiles in scene
tileArray = [[NSMutableArray alloc] init];
for (int i = 0; i<100; i++)
{
    Tile *tmpTile = [[Tile alloc] init];
    [tileArray addObject:tmpTile];
    [self reorderChild:tmpTile z:-1];
} 
```

注意：我检查了两个 Tiles 上的 zOrder 在 MoveTo 动画开始之前的行上是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:00:16.083

我没有将精灵添加到我的图层，而是添加到图像节点，因为我使用的是 Sprite Atlas。所以我试图访问甚至不存在的精灵。- 我是新用户，所以要等 8 小时才能关闭。和平。为什么它没有抛出错误我永远不会知道。

# cocoa - Cocoa/CoreFoundation : List of connected drives but not mounted & how to mount them ?

> ID：11488631
> 
> 赞同：0
> 
> 时间：2012-07-15T01:14:13.140
> 
> 标签：cocoa, core-foundation

Like in the Disk Utility, how can I get the list of connected drives who are not mounted. And then, how can I mount them ?

Thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T05:12:55.450

磁盘仲裁框架可以处理各种任务，例如挂载磁盘：

[https://developer.apple.com/library/mac/#documentation/Darwin/Reference/DiscArbitrationFramework/DiskArbitration_h/](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/DiscArbitrationFramework/DiskArbitration_h/)

我不太确定磁盘实用程序如何知道可用驱动器，但一种可能性是它监视挂载/卸载活动（使用上面的框架）并简单地记住过去使用过的磁盘。例如，它可能会自动将磁盘的路径名保存在某个设置文件中，并在每次启动时恢复该列表。

# git - git rebase 第二次和第三次提交

> ID：11488632
> 
> 赞同：1
> 
> 时间：2012-07-15T01:14:46.353
> 
> 标签：git

假设我最重要和最新的提交是 A，然后是 B，然后是 C。如果我想结合提交 B 和 C，我该如何做 git rebase？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T01:19:00.707

最简单的是使用交互式变基

```
git rebase -i HEAD~3 
```

这将`pick`在每个提交前面显示您的最后三个提交。如果您更改 to 的第二个实例，`pick`然后`squash`保存文件并退出，这会将两个提交压缩在一起。

# html - Make Disable-Enable Option with jQuery

> ID：11488635
> 
> 赞同：0
> 
> 时间：2012-07-15T01:15:51.913
> 
> 标签：html

i need some help to make a button for enable or disable 2 div with jquery. i have 2 kind of navigation code in my page. these are my codes:

First:

```
<div class="nextprev">
[prev-link]Previous[/prev-link]
[next-link]Next[/next-link]
</div> 
```

Second:

```
<div id="page_navigation1" class="page_navigation1">[next-link]Next[/next-link]</div> 
```

Now, i need some jquery code for enable or disable these div's. for example, when we click on enable button just first div will be working and when we click on disable, just second div will be working!

i hope u guys undrstand my question and im sorry for my bad english.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T01:35:14.800

toggle() 函数切换 div 的可见性。所以也许是这样的？

[http://jsfiddle.net/UvWEu/17/](http://jsfiddle.net/UvWEu/17/)

```
<script type="text/javascript">
    function toggleDivs() {
        $("#nav1").toggle();
        $("#nav2").toggle();
    }
</script>

<div id="nav1" 
     style="background-color:red;width:50px;height:50px;display:none;">nav1
</div>
<div id="nav2" 
     style="background-color:green;width:50px; height:50px;display:visible;">nav2
</div>
<button text="toggle" style="width:50px; height=18px" onclick="toggleDivs();" />​ 
```

# django - A manytomany add with a difficulty because of a form

> ID：11488643
> 
> 赞同：0
> 
> 时间：2012-07-15T01:17:47.670
> 
> 标签：django, forms

I am trying to add in a manytomany an object but I have a problem because the user in not the request.user and I can't make a get because the info comes from a form..

My code (in the view):

```
editedcourse = Course.objects.get(id=Course_id)
# Use the model ChangeCourseOwnerForm.
form = ChangeCourseOwnerForm(instance=editedcourse)
# Test if its a POST request.
if request.method == 'POST':
    # Assign to form all fields of the POST request.
    form = ChangeCourseOwnerForm(request.POST, instance=editedcourse)
    if form.is_valid():
        # Save the course.
        obj = form.save()
        newusername = form['owner'] # Return an User
        newusername.userprofile.courses_list.add(editecourse) 
```

The problem is in last two lines because the form doesn't have a "userprofile"... All other code is for comprehension but it works.

The model of the form :

```
class ChangeCourseOwnerForm(forms.ModelForm):
    class Meta:
        model = Course
        fields = ('owner',) 
```

The model of a Course(I am not english, is it ok at singular the world Course?) :

```
class Course(models.Model):
name = models.CharField(max_length=30)
description = models.TextField(max_length=30)
owner = models.ForeignKey(User, limit_choices_to={'is_staff': True})
years = models.CharField(max_length=11, choices=YEARS_CHOICES,
                         default='%d - %d' % (date.year, date.year + 1))

# In Admin panel : object = username
def __unicode__(self):
    return self.name 
```

Thanks you for your help, hours of work over that make me foolish :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:40:32.270

It's ok, I have done that :

```
 newowner = form['owner'].value()
        new = User.objects.get(id=newowner)
        addcourse = new.userprofile.courses_list.add(obj) 
```

# newline - Qt QTcpSocket QByteArray/QString issues with special characters and proper syntax

> ID：11488645
> 
> 赞同：0
> 
> 时间：2012-07-15T01:17:59.517
> 
> 标签：newline, quotes, qtcpsocket, qbytearray

I'm having trouble some special characters in Qt, the 2 being the quote and newline. I'm connecting to the server using telnet, and the server automatically puts quotes at the beginning and end of the input for some reason. I'm having trouble removing both the quotes and newline.

```
void MyClient::readyRead()
{
    if(WaitingForString())
    {
        if(socket->canReadLine())
        {
            qDebug() << "Ready to read, string expected";
            qDebug() << socket->readLine();
        }
    }
    else 
    {
        if(socket->canReadLine())
        {
            qDebug() << "Ready to read line, number expected";
            QString data = QString(socket->readLine().replace("\n", "").replace("\"", "");
            qDebug() << data;
            waitForStrings(1);
        }
    }
} 
```

The problem with replacing the newline is described below:

My input from telnet: Hello

After the program replaces the newline: " ello (Normal output with quotes would be "Hello")

And replacing the quotes has no effect at all. I have tried also using dual backslashes since it is a RegEx, but both still have the same problems as if there were one. Help is appreciated, thanks.

Edit: This turned out to be qDebug's formatting, not a result of using Telnet or anything.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:05:32.353

您确定换行符和引号不仅是使用 qDebug() 的效果吗？

QDebug 总是在字符串周围加上引号，然后写一个换行符

# django - south not creating tables for third party installed app

> ID：11488646
> 
> 赞同：4
> 
> 时间：2012-07-15T01:18:00.477
> 
> 标签：django, postgresql, django-south

I am using django to create a blog. It is installed inside a virtual environment and django-tagging has been installed. I'm doing DB migrations with south and everything seems to work ok with my migrations, but it seems the tagging tables are not being created, so when I go to add a blog post via the admin I get the famous postgresql error:

```
Exception Type: DatabaseError at /admin/bppsite/blogpost/add/
Exception Value: relation "tagging_tag" does not exist
LINE 1: ...ECT "tagging_tag"."id", "tagging_tag"."name" FROM "tagging_t... 
```

Here is relevant parts of my models.py:

```
from south.modelsinspector import add_introspection_rules
add_introspection_rules([], ["^tagging\.fields\.TagField"])

from tagging.models import Tag
from tagging.fields import TagField

class BlogPost(models.Model):
    title = models.CharField(max_length = 255)
    text = models.TextField()
    author = models.ForeignKey(User)
    created = models.DateTimeField(auto_now_add = True)
    modified = models.DateTimeField(auto_now = True)
    status = models.CharField(max_length = 10, choices=POST_STATUS_CHOICES,     default='DRAFT')
    slug = models.SlugField(max_length = 255, blank=True)
    category = models.ManyToManyField(Category)
    tags = TagField()

    def __unicode__(self):
        return self.title

    class Meta:
        ordering = ["-created"]

    def save(self):
        if not self.id:
            self.slug = slugify(self.title)
        super(BlogPost, self).save()

    def set_tags(self, tags):
        Tag.objects.update_tags(self, tags)

    def get_tags(self, tags):
        return Tag.objects.get_for_object(self) 
```

and, installed apps from settings.py:

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'south',
    'tinymce',
    'tagging',
    'bppsite',
) 
```

I have tried moving the ordering of the apps around in INSTALLED_APPS (thinking the tagging might need to come before my app) but it doesn't seem to make any difference.

I know it's going to be something simple but can't figure it out.

thanks Aaron

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T11:54:59.660

好的。我不敢相信它是多么简单，答案就在我面前。但是，如果其他人碰巧处于相同的位置，希望他们会偶然发现这个问题，我现在将自行回答。

这个问题与 django-tagging 无关。这与南方只会迁移我告诉它迁移的事实有关！和南一样棒（我永远不会使用没有它的 django 项目，因为我已经找到了它）——它不会迁移第三方应用程序。我曾假设南会查看我的 settings.py 并确定哪些已安装的应用程序需要与数据库同步并选择它们，就好像我只是正常运行 syncdb 一样。这不是 south 所做的，因此每个安装的第三方应用程序都需要自行迁移，以确保它存在于数据库中。所以，我所要做的就是将表放入我的数据库：

```
./manage.py schemamigration tagging --initial
./manage.py migrate tagging 
```

我确信有一种方法可以将所有迁移集中在一起，但我现在可以为我的小规模的东西一个一个地做 - 很高兴有人详细说明这个答案并揭示迁移所有应用程序的最佳方法同时使用一个命令——这可能吗？

# python - Error in my bonus calculator

> ID：11488653
> 
> 赞同：-5
> 
> 时间：2012-07-15T01:19:12.897
> 
> 标签：python

Here is my code so far:

```
# This program will determine the appropriate bonus to be given to both the store
# and the employess.

# Lab 3-4

# The main function
def main():
    monthlySales = getSales() # Call to get sales
    salesIncrease = getIncrease() # Call to get sales increase
    storeAmount = storeBonus(monthlySales) # Call to get the store bonus
    empAmount = empBonus(monthlySales) # Call to get the employee bonus
    printBonus (storeAmount, empAmount) # Call to print amounts    

# This function gets the monthly sales
def getSales():
    monthlySales = input('Enter the monthly sales $')
    monthlySales = float(monthlySales)
    return monthlySales

# This function gets the percent of increase in sales
def getIncrease():
    salesIncrease = input('Enter percent of sales increase. For example, 4% should be entered as 4: ')
    salesIncrease = float(salesIncrease)
    salesIncrease = salesIncrease / 100
    return salesIncrease

# This function determines storeAmount bonus
def storeBonus(monthlySales):
    if monthlySales >=110000:
        storeAmount = 6000
    elif monthlySales >=100000:
        storeAmount = 5000
    elif monthlySales >=90000:
        storeAmount = 4000
    elif monthlySales >=80000:
        storeAmount = 3000
    else:
        storeAmount = 0
    return storeAmount

# This function determines empAmount bonus
def empBonus(salesIncrease):
    if salesIncrease >= .05:
        empAmount = 75
    elif salesIncrease >= .04:
        empAmount = 50
    elif salesIncrease >= .03:
        empAmount = 40
    else:
        empAmount = 0
    return empAmount

# This function prints the bonus information
def printBonus(storeAmount, empAmount):
    print('The store bonus is $', storeAmount)
    print('The employee bonus is $', empAmount)
    if storeAmount == 6000 and empAmount == 75:
        print('Congrats! You have reached the highest bonus amounts possible!')

# Calls main
main() 
```

Now in order to test this code I was give these following scenarios:

> 1) monthlySales = 120500 salesIncrease = 5
> 
> 2) monthlySales = 93400 salesIncrease = 5
> 
> 3) monthlySales = 75000 salesIncrease = 1.5
> 
> 4) monthlySales = 82000 salesIncrease = 3.6
> 
> 5) monthlySales = 125000 salesIncrease = 4.5

Now all is well up until 3-5\. The "employee bonus amount" is not supposed to be $75, however that is what comes out. Any ideas on how to fix this problem? Anyone see any errors in my code that I failed to see?

*Edit: What the code is supposed to output for each input value is as follows;

1) $ 6000 $ 75

2) $ 4000 $ 75

3) $ 0 $ 0

4) $ 3000 $ 40

5) $ 6000 $ 50

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T01:22:07.070

It's hard to tell what your problem is because your question doesn't explain what you are trying to do but I would hazard a guess that you're off by a factor of 100:

```
def empBonus(salesIncrease):
    if salesIncrease >= 5:
        empAmount = 75
    elif salesIncrease >= 4:
        empAmount = 50
    elif salesIncrease >= 3:
        empAmount = 40
    else:
        empAmount = 0
    return empAmount 
```

To use your third example, you were checking `1.5 >= 0.05` which is of course `True` so `empAmount` was being set to `75`.

# cocoa - NSTextView 不会成为第一响应者

> ID：11488657
> 
> 赞同：1
> 
> 时间：2012-07-15T01:20:49.530
> 
> 标签：cocoa, nstextview, first-responder

这是我的小测试应用程序的布局：

1.  `AppDelegate`拥有`WindowController`.
2.  `WindowController`拥有`CustomTextContainerView`.
3.  `CustomTextContainerView`拥有一个`NSScrollView`which embeds `MyCustomTextView`（一个`NSTextView`子类）。

标准和我的窗口控制器的 xib`MainMenu`都比较空。我的窗口控制器`-windowDidLoad`看起来像这样：

```
- (void)windowDidLoad {
    [super windowDidLoad];
    // create CustomTextContainerView
    [[self window] setContentView:self.customTextContainerView];
} 
```

我想要做的是为 textView**设置第一响应者**，但我已经尝试了我能想到的一切来让它工作。

我已经做到了，所以`CustomTextContainerView`只是转发`-becomeFirstResponder`到它的 textView。我试过直接在容器和 textView 上调用它，但我不能让它自动成为第一响应者。

**注意：**用户仍然可以单击文本区域并开始输入，但我要做的是自动设置第一响应者状态，因此我不必在开始输入之前单击。我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T04:58:05.913

要强制窗口的第一响应者，请调用：

```
[[self window] makeFirstResponder:self.customTextContainerView]; 
```

（这假设所有其他必要的第一响应者状态都已启用，例如视图不能被覆盖`acceptsFirstResponder`以返回`NO`。）

# php - PHP Dynamic Profiles

> ID：11488659
> 
> 赞同：0
> 
> 时间：2012-07-15T01:20:56.070
> 
> 标签：php, url, url-rewriting

> **Possible Duplicate:**
> [Custom URL for each user in PHP](https://stackoverflow.com/questions/1569733/custom-url-for-each-user-in-php)

I'm starting a new project building an online community. I would like to use a profile similar to Facebook in the way that each user has a unique url (ie [http://www.facebook.com/username](http://www.facebook.com/username)). I am familiar with using the $_GET function to get an ID from the URL but would much rather make the URLs short and memorable. As of today I noticed Facebook uses both /username and profile.php?id=1234 methods. Can anyone explain to me how this works? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T01:26:49.777

对于这种规模的项目，它将涉及身份验证、收集用户输入以及许多其他程序员已经完成并经过安全测试的其他任务。您应该考虑使用 PHP 框架，例如 CodeIgniter、Symphony 或 CakePHP。从长远来看，这将使您的生活轻松 10000000 倍。

至于您的问题，在您的 .htaccess 文件中使用 mod_rewrite 可以使 url 看起来不错。

# javascript - javascript bookmark to render code

> ID：11488665
> 
> 赞同：0
> 
> 时间：2012-07-15T01:22:21.460
> 
> 标签：javascript, bookmarklet

I recently learned in the chat section that if you use a bookmark you can render LaTeX:

[http://meta.math.stackexchange.com/a/3297](http://meta.math.stackexchange.com/a/3297)

The stackexchange sites all render code `like this`. Anything in between `` gets rendered as code.

I find this feature quite nice and useful. I was wondering if anyone knows how to get the javascript that does this in the stackexchange sites and put it as a bookmark just like the mathjax bookmarks found here:

[http://www.math.ucla.edu/~robjohn/math/mathjax.html](http://www.math.ucla.edu/~robjohn/math/mathjax.html)

That way if I write something with the backtick escapes say in facebook or any other site I could just click on my bookmark that says renderCode and the javascript will do what the same as it is doing in this site.

Anyone know if this has been asked before and/or how to achieve this? Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T02:08:45.883

这是你的一个开始：

```
var replacer = function(s, match) {return "<code>" + match + "</code>";};

"some `delimited` code `sections` here". replace(/`([^`]*)`/g, replacer);
    // ==> "some <code>delimited</code> code <code>sections</code> here" 
```

您可以使用任何您喜欢的标记来代替“<code>”和“</code>”来创建您喜欢的效果。

你也可以使用这样的函数：

```
processTextNodes = function(element, fn) {
    var children = element.childNodes;
    for (var i = 0; i < children.length; i++) {
        var node = children[i];
        var type = node.nodeType;
        if (type == 1) processTextNodes(node, fn);
        if (type == 3) fn.call(this, node);
    }
} 
```

像这样：

```
processTextNodes(someElement, function(node) {
    node.value = node.value.replace(/`([^`]*)`/g, replacer);
}); 
```

为了将其应用于元素内的所有文本节点。

您仍然必须将其变成书签，并弄清楚如何找到正确的元素。你需要标记和 CSS 来显示你喜欢的输出。但这可能是一个好的开始。

# java - How to create a compound index in MongoDB through Java driver?

> ID：11488669
> 
> 赞同：11
> 
> 时间：2012-07-15T01:22:42.103
> 
> 标签：java, mongodb, indexing, mongodb-java

I want to create compound index on `Age` and `Name` in MongoDB through Java driver and here is my syntax:

```
coll.ensureIndex(new BasicDBObject("Age", 1),new BasicDBObject("Name", -1));
List <DBObject> list = coll.getIndexInfo();

  for (DBObject o : list) {
       System.out.println(o);
    } 
```

but it create only 1 index not compund index and give me result this:

```
{ "v" : 1 , "key" : { "_id" : 1} ,"ns" :"EmployeeData.EmpPersonalData", "name":"_id_"}
{ "v" : 1 , "key" : { "Age" : 1} , "ns" : "EmployeeData.EmpPersonalData" , "name" : "Age_1" , "Name" : -1} 
```

So how can compund index on collection can be created through java driver?

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-15T04:16:49.967

如果您查看您的代码，您实际上已经调用`ensureIndex`了两个参数。你的第一个参数是键，你的第二个参数变成了一些额外的字段：`Name: -1`.

您要传入的第一个参数是 this object `{"Age":1, "Name":-1}`。你实际通过的是`{"Age":1}, {"Name":-1}`.

所以你想做这样的事情：

```
BasicDBObject obj = new BasicDBObject();
obj.put("Age", 1);
obj.put("Name", -1);
coll.ensureIndex(obj); 
```

请注意，将使用默认名称创建索引。要提供特定名称，请执行以下操作：

```
coll.ensureIndex(obj, "MyName"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-27T09:46:58.800

你可以根据官方文档试试这个。

```
import org.bson.Document;
db.getCollection("restaurants").createIndex(new Document("cuisine", 1).append("address.zipcode", -1)); 
```

[官方 Mongo DB 驱动程序 Java 文档](http://docs.mongodb.org/getting-started/java/indexes/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-05T23:23:38.020

一种更现代且可能更流畅的方法可能是：

```
import com.mongodb.client.model.Indexes;

collection
    .createIndex(
        Indexes.compoundIndex(
            Indexes.ascending("Age"),
            Indexes.descending("Name")
        )
    ); 
```

[在手册](https://mongodb.github.io/mongo-java-driver/3.5/driver/tutorials/indexes/#compound-indexes)中找到。为清晰起见格式化；根据自己的喜好后期格式。

# php - 我可以做些什么来更好地构建我的文件目录？

> ID：11488670
> 
> 赞同：2
> 
> 时间：2012-07-15T01:22:50.757
> 
> 标签：php, xml, dynamic, content-management-system, file-structure

# 我正在开发一个动态博客/投资组合：

参考链接：[http ://www.andrewryan.me/](http://www.andrewryan.me/)

我已经在我的个人网站上工作了一个多月了。我一直在修改东西，因为我觉得我把整个事情都设置错了。我知道我在某种程度上是这样或那样的，我终于寻求帮助。

我一直在研究动态站点结构，我想知道一些事情：

1.  **动态内容的最佳实践。**

    *   我在根文件夹中有网站的框架。这包括索引和样式。
        *（连同脚本文件夹、图像文件夹和其他杂项文件类型..）*

    *   最新的博客条目被拉到索引页面上。如果他们想查看我所有的专业帖子/主题，他们只需转到任何给定的子部分。
        *（例如：index.php?p=professional）*

    *   从那里; 如果用户想要完整地查看一篇博文，他们只需点击该博文，然后它就会被进一步动态拉起。
        *（例如：index.php?p=professional/thispost (idfk)）*

2.  **如何在动态内容中创建动态内容。**

    *   页面和子页面然后继续在个人文件夹中的链上。*（例如：index.php > index.php?p=personal）*
3.  **如何制作可更新的内容，一旦页面上传到其各自的文件夹，这些内容将被归档。**

    *   我应该考虑为此使用数据库还是 XML？如果是这样，任何人都可以向我指出有关制作此类网站的任何好的教程吗？对此无需过多解释。

*这是我的文件结构：*

```
root/   
  > images/  
    ||--> x.png   
  > pages/  
    ||--> personal.php  
    ||--> professional.php  
    ||--> contact.php   
    ||--> 404.php  
    ||--> contact.php 
    > personal/  
        |||--> personalposts.php  
    > professional
        |||--> professionalposts.php  
    > gallery/  
        |||--> galleryposts.php   
  > scripts  
    ||--> scripts.php/js/etc
  |--> .htaccess
  |--> index.php  
  |--> style.css    
  |--> robots.txt  
  |--> humans.txt 
```

...以及动态页面的代码：

```
<?php
    $pages_dir = 'pages'; //Scans the pages directory

    if (!empty($_GET['p'])) { //If not empty it will get the file
        $pages = scandir ($pages_dir, 0); //Sets up files as array
        unset ($pages[0], $pages[1]); //Unsets the first two. These are just dots.
        $p = $_GET['p'];

        if (in_array($p.'.php',$pages)) {
            include ($pages_dir.'/'.$p.'.php');
        } else {
        include($pages_dir.'/404.php'); //DENIED!
        }
    } else {
        include($pages_dir.'/blog.php'); //if it's the index page
    }
?> 
```

我或多或少想知道我的结构是否正确，或者是否有更好的方法来做到这一点。我希望能够制作这个网站一次，并在需要时自动更新它的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T01:38:46.423

啊哈，我一直在等待的问题。我正在一个做这个的网站上工作。首先，您必须将您的网站分成页面（每个页面都有不同的布局）。例如，要注销，您将有如下内容：sitename.com/?action=logout

要回家，您可以访问 sitename.com，如果您尝试 /?p=somethingThatDoesntExist，您仍然可以访问主页（或错误页面）

如果您可以访问 Web 根目录下的某些内容，那就更好了。然后，您应该将所有 .php 文件保留在 /root/content/ 中，并且在 /root/www/ 中仅保留一个 index.php

如果玩家已登录（如果他是管理员，则可选）此代码是我用来为玩家提供页面的代码

```
// Check if alternate page requested
if (!empty($_GET["p"]) and !empty($_SESSION['id']))
{
    $page = $_GET["p"];

    if (!empty($pages[$page]))
    {
        $page_array = $pages[$page];
        if ( (!empty($page_array['auth'])) && ($user['Auth'] < $page_array['auth']) )
        {
            $page_array = $pages['index'];
        }
    }
    else
    {
        $page = '';
    }
} 
```

然后，你做你的基本工作：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang='en'>  
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
        <title><? echo $page_array['title'] ?></title>

        <link rel="stylesheet" href="css/3p/reset.css" type="text/css"/>
        <link rel="stylesheet" href="css/3p/formalize.css" type="text/css"/>

        <link href="css/bootstrap.css" rel="stylesheet">
        <link href="css/main.css" rel="stylesheet">
        <link href="css/bootstrap-responsive.css" rel="stylesheet">
    </head>  
    <body>  
            <?php
                    require("../content/header.php");
                    require($page_array['require']);
                    require("../content/footer.php");
            ?>
    </body>
</html> 
```

以下是 page_array 的内容：

```
$pages = Array();
$pages['admin'] = Array(
    'auth' => 3,
    'require' => "../admin/index.php",
    'title' => "Administration - NPG CP"
);

$pages['index'] = Array(

    'require' => "../content/index.php",
    'title' => "Home - NPG CP"
);

$pages['friends'] = Array(

    'require' => "../content/index.php",
    'title' => "Friends - NPG CP"
);

$pages['pm'] = Array(

    'require' => "../content/index.php",
    'title' => "Messages - NPG CP"
);

$pages['stats'] = Array(

    'require' => "../content/index.php",
    'title' => "Statistics - NPG CP"
); 
```

在我的网站上，我只使用一个可查看的文件来处理其他所有内容。我希望我对你有所帮助。我可以给你我网站的源代码，只需给我发电子邮件到 [my_username]@gmail.com 就可以了 :)

# php - 如何构造一个在字符串周围加上引号而不是数字的mysql查询？

> ID：11488676
> 
> 赞同：0
> 
> 时间：2012-07-15T01:24:12.823
> 
> 标签：php, mysql

我有使用函数将数据插入到我的 sql 中。数据是

```
function mysql_insert($table, $arr){
if($arr!=''){
    $values = array_map('mysql_real_escape_string', array_values($arr));
    $keys = array_keys($arr);
    $q=('INSERT INTO `'.$table.'` (`'.implode('`,`', $keys).'`) VALUES (\''.implode('\',\'', $values).'\')');
    //$res = mysql_query($q)OR die(mysql_error());
    return $q;
}else{
    return false;
} 
```

数据和查询来自：

```
if($crud=='insert'){
$field= array(  'col1' => 'apel',
        'c0l2' => 'box1',
        'col3' => 200,//integer Quantity
    );
$data=mysql_insert('wh',$field);}echo json_encode($data); 
```

结果是 = "INSERT INTO `wh`( `col1`, `c0l2`, `col3`) VALUES ('apel','box1','200')" col3 的值为字符串。我需要 col3 作为整数。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T01:28:33.953

在以下代码中：

`implode('\',\'', $values)`

内爆将值数组转换为字符串，将每个值分开`','`

并且在 implode 代码之前和之后，还有引号，它将包含所有值，`'`使其看起来像所有值都是字符串

但是像 octern 我不明白为什么查询会失败，即使您使用整数值包装，`'`如果在数据库中选择了正确的数据类型，它应该可以正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T09:26:51.693

如果您仍想在字符串周围使用 quates，但不想在整数或布尔值周围使用，请尝试此处的 php 函数[json_encode()](http://php.net/json_encode) 示例：http: [//codepad.org/Hpvzjnjc](http://codepad.org/Hpvzjnjc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T01:30:02.907

发生这种情况是因为命令`implode('\',\'', $values)`告诉它将数组`$values`转换为字符串，每个元素之间有单引号和逗号。如果您不想在数字周围加上引号，则需要使用更具体的函数对 $values 进行迭代。

然而，这实际上并不重要。如果你给 MySQL 一个包含数字字段的数字的字符串，它只会将它转换为适当类型的数字。你可以保持原样，一切都应该工作。

# git - 执行 Git 合并所需的步骤数

> ID：11488677
> 
> 赞同：4
> 
> 时间：2012-07-15T01:24:27.787
> 
> 标签：git, git-extensions

我需要一些关于将我的开发分支合并到主分支的建议。另请注意，我正在使用 Git 扩展，因此请尽量避免使用过多的命令行术语。

假设我在**dev**分支上进行了 3 次提交（我目前仍将其签出，并且在我分支之后， **mst**分支有 1 次提交。

```
dev:    1 ---> 2 ---> 3
       /
      /
mst: 0 --- X 
```

现在我想将我的**dev**分支合并到**mst**分支中，但实际上我只想合并提交 1 和 2。

我的理解是，我需要检查**mst**（为任何正在进行的工作预先存储或临时提交）并将**mst**与提交 2 合并。

```
dev:    1 ---> 2 ---> 3
       /        \
      /          \
mst: 0 --- X ---- 4 
```

现在，提交 3*不同步*，所以接下来要做的是重新*同步***dev**分支。为此，我需要检查**dev并将****dev**与**mst**合并或 rebase **dev**到**mst**

IE。

```
dev:     1 ---> 2 ---> 3 --- 5
        /        \          /
       /          \   ------
      /            \ /
mst: 0 ---- X ----- 4 
```

或者

```
dev:    1 ---> 2     5
       /        \   /
      /          \ /
mst: 0 --- X ---- 4 
```

与其他开发人员不太满意的主要问题是合并可能会浪费大量时间，因为

1.  您需要“保存”您当前的工作，然后 checkout **mst**然后返回 checkout **dev** （我们使用的是 VB6，因此我们还需要关闭并重新打开 VB6 以重新加载文件，因为潜在的合并冲突和 VB6 无法识别外部修改过的文件）
2.  双重合并过程（一个*更新* **mst**另一个*重新同步* **dev**）

此外，我在 stash 方面遇到了一些可靠性问题（有时 stash pop 会阻止我弹出），这就是为什么我建议我的开发人员同事进行临时提交（在提交 3 之后），然后在最后进行混合重置.

我们是一家小公司，所以尽快把事情做好是当务之急（但我们不能把所有事情都推出来，因为有些事情会被推迟）。真的需要这么多步骤，还是有更快的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:42:02.733

**使用分支**

正如评论中所建议的，最简单的方法是在第二次提交之后创建一个新分支（如，在您开始处理提交 #3 的更改之前）。

如果你这样做，无论你做什么进一步的工作，你都会有一个干净的合并点。

您的工作流程似乎受到先前使用集中式 vcs 的经验的影响。仅仅因为你的权威仓库上有一个分支'master'（mst）或'develop'（dev）并不意味着你必须将它们称为相同的，或者需要一对一的对应关系。

我觉得在 git 中，创建短期分支（无论名称）通常更容易，然后在推送到您的公共或权威 repo 时简单地合并适当的分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T01:36:27.723

你使用的是什么工具？我为 github 使用 Mac 客户端：

[http://mac.github.com/](http://mac.github.com/)。

使用这个出色的工具，对我来说，分支、合并、更改分支只需 30 秒的操作。当然，你工作的抽象级别相当高，但对于日常使用，这正是我所需要的。

它也有一个 windows 版本，但我没有使用过，也不知道那里是否存在任何限制：

[http://windows.github.com/](http://windows.github.com/)

* * *

主要有3个级别的源码管理工具：

1) VSS 样式阻止结帐：这是这样做的历史方式。如果您有一个或多个不同时处理相同文件的开发人员，这可能对您有用。

2) SVN 风格的非阻塞结帐：所有开发人员都在一个中央仓库上工作，但他们可能同时在同一个文件上工作。如果存在冲突，则需要在提交前解决（更新/提交前解决）

3) Git 风格的分布式 SCM：当您的开发人员在较长时间内使用本地存储库进行独立开发时，这会带来最大的价值。一旦他们对结果感到满意，他们可能会决定将他们的更改发布到父仓库。主要用于开源开发。

您需要选择最适合您的开发风格的模型。对于大多数拥有紧密合作团队的商业组织来说，SVN 模型的效果相当不错。如果你有更复杂的开发团队，Git 可以帮你处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T07:46:54.210

Git 需要在合并操作期间使用工作目录和索引，因为您需要它们来解决出现的任何合并冲突。

如果您需要在进行合并时将工作目录保持在脏状态，那么您可以使用您的主要本地存储库作为源来创建一个克隆的存储库。然后在克隆中进行所有合并，并将更改取回主存储库

您可以使用 Git Extensions 进行克隆，也可以使用以下命令：

```
cd C:\Users\Basewq\Code
git clone MyProject MyProjectForMerging 
```

然后，当您想在不中断工作目录的情况下进行合并时，将更改从 MyProject 拉入 MyProjectForMerging，进行合并，然后将提交取回 MyProject（警告：不要将更改推送到 MyProject，始终获取/拉取）。同样，您可以使用 Git 扩展，也可以使用命令行：

```
cd C:\Users\Basewq\Code\MyProjectForMerging
git checkout mst
git pull
git merge dev 
```

并将更改带回您的主存储库：

```
cd ..\MyProject
git fetch ..\MyProjectForMerging 
```

现在提交将在 MyProject 存储库中，准备好被推回原点或任何地方。如果需要，您还可以从 MyProjectForMerging 推送到任何其他遥控器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T08:04:41.387

Git 需要在合并操作期间使用工作目录和索引，因为您需要它们来解决出现的任何合并冲突。

如果您在进行合并时需要将工作目录保持在脏状态，那么您可以告诉 Git 临时使用替代工作目录和索引。但是，这需要命令行，可能会造成混淆。

目标是创建一个临时索引文件和一个临时工作目录。将 Git 指向它们，进行合并，然后恢复正常的索引和工作目录。

```
:: Create a temporary working directory, but use my normal repository

mkdir C:\Temp\MyProject
set GIT_DIR=C:\Users\Basewq\Code\MyProject  -- (path to my normal repo)
set GIT_INDEX_FILE=C:\Temp\index
set GIT_WORK_TREE=C:\Temp\MyProject

:: Now do the merge in C:\Temp\MyProject

git checkout mst
git merge dev

:: Now put everything back

set GIT_DIR=
set GIT_INDEX_FILE=
set GIT_WORK_TREE=
del C:\Temp\index
rd /q /s C:\Temp\MyProject 
```

# mysql - SQL - 创建一个包含两个没有默认值的时间戳列的表

> ID：11488678
> 
> 赞同：1
> 
> 时间：2012-07-15T01:24:42.393
> 
> 标签：mysql

我想创建一个包含两列的表，一列“创建”，一列“修改”，时间戳类型。我不希望它们具有默认值。但是当我创建它们时，它会自动将 CURRENT_TIMESTAMP 作为其中至少一个的默认值，并且还会在更新时。

我如何才能为我的任何列设置没有默认值或更新值的类型时间戳？

编辑：我使用 MySQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T01:43:46.010

如果您使用 SQL Server，则该`timestamp`类型用于行版本控制，而不是用于存储实际日期或时间值。 [请参阅 MSDN](http://msdn.microsoft.com/en-us/library/ms182776.aspx?queryresult=true)。

您可以使用数据类型创建列，`datetime`然后使用触发器设置您的`created`和`modified`值。

```
CREATE TRIGGER trg_SetDateCreated ON MyTable
FOR INSERT AS 
    UPDATE MyTable 
    SET created = CURRENT_TIMESTAMP
    WHERE MyTable.id = (SELECT Id FROM Inserted);
GO

CREATE TRIGGER trg_SetDateModified ON MyTable
FOR UPDATE AS 
    UPDATE MyTable
    SET modified = CURRENT_TIMESTAMP
    WHERE MyTable.id = (SELECT Id FROM Inserted);
GO 
```

# c# - 如何通过 C# 代码访问系统属性中高级选项卡中的设置..？

> ID：11488679
> 
> 赞同：3
> 
> 时间：2012-07-15T01:24:47.360
> 
> 标签：c#, windows, controlpanel

我想知道是否有任何方法可以从 C# 访问并更改性能选项（视觉效果）中的复选框。

现在我通过以下方式仅到达高级选项卡：

```
control.exe sysdm.cpl,0,3 
```

但我不知道如何继续下去..

另外，一般来说，有没有一种方法可以通过代码更改控制面板中的某些内容？就像提高鼠标指针速度，或调整屏幕分辨率..等（通过代码导航）真的很酷.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T02:30:00.333

您可以直接设置值：[msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724947%28v=vs.85%29.aspx)。[这里](https://stackoverflow.com/questions/9897310/can-you-change-the-visual-effects-performance-settings-from-an-application)已经讨论了一个类似的主题。[您还可以使用UI 自动化](http://msdn.microsoft.com/en-us/library/ms747327.aspx)单击窗口上的控件。

# c - 数字验证 - 无限循环

> ID：11488681
> 
> 赞同：0
> 
> 时间：2012-07-15T01:25:35.783
> 
> 标签：c, validation

我有这段代码来验证用户输入。条件：输入的值只能是零或正数。不接受负值和字母字符。

这是我的代码，它一直在循环：

```
#include <stdio.h>

int main ()
{
   int a, b, c, d;

   printf ("enter value for a:");
   do {
      b = 0;
      scanf ("%d", &a);
      if (!isdigit(a)) {
         printf("Number must be numeric!:\n");
         b++;
      }
      else if (a < 0) {
         printf ("number must be postive\n");
         b++;
      } else {
         printf("\neverything is goood\n");
      }
   } while (b != 0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T01:39:03.717

`isdigit()`期待一个 ASCII 编码的字符，但是`scanf`使用`%d`参数将 ASCII 编码的数字（字符串）转换为实际数字。

IE。如果您输入`'1'`ASCII 码`0x31`，`scanf("%d",...`会将其转换为值`1`。ASCII 码 1**不是**数字。

要解决此问题，请执行以下任一操作：

*   制作`a`类型`char`并使用`scanf`格式说明符`%c`，然后`isdigit()`会做你想做的事。
*   用于`strtol`读取多个字符并使用`char **endptr`参数执行您自己的错误检查。

此外，您应该打开编译器警告并包含包含`isdigit()`函数的头文件，`ctype.h`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T01:50:26.493

我可以发现您的代码存在以下几个问题：

1.  您使用已经将输入解析为整数值的格式说明符`scanf`。`%d`因此，无需检查它是否为数字`isdigit`。事实上，`isdigit`是检查一个十进制数字*字符*，所以你的用法是不正确的。
2.  你从不检查`scanf`退货。你应该。如果出现错误（即值不是数字），则不会从流中删除输入。换句话说，你会在试图一遍又一遍地解析相同的错误值时陷入困境。
3.  您有未使用的变量并且忘记包含某些头文件。但在您的情况下，这些都是次要的事情（但在某些情况下可能是主要的！）。

话虽如此，这里有一些可能适合您的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

static void skip_input(FILE *stream)
{
    int c;
    do {
        c = fgetc (stream);
    } while (c != EOF && c != '\n');
}

int main()
{
    int a;
    int r;

    printf("Please enter a value: ");

    for (;;) {
        r = scanf("%d", &a);
        if (r == EOF)
            return EXIT_FAILURE;
        if (r != 1) {
            printf("Number must be numeric!\n");
            skip_input(stdin);
        } else if (a < 0) {
            printf("Number must be postive\n");
            skip_input(stdin);
        } else {
            printf("Everything is goood\n");
            break;
        }
    }

    return EXIT_SUCCESS;
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T01:33:21.953

一旦用户出错，b 总是 > 0。您需要在输入正确信息后添加一行设置 b = 0（即在您的 printf("\neverything is good\n"); 语句之后。请确定将 { & } 添加到它前面的 else 语句中，以便 printf & new b = 0; 语句将包含在该分支中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T02:52:48.357

这里有几个问题。

首先是没有检查 scanf() 的返回值。如果输入可用，则 scanf 返回已分配的变量数，在这种情况下可以是 0 或 1（因为您只尝试分配一个变量）。如果用户输入非数字字符，则循环将重复执行而无需等待更多用户输入，因为有可用输入但它永远不会匹配您的“%d”转换。如果你想使用 scanf() 那么你必须检查返回值。如果返回值为零，则输入了一个非数字值，这意味着您必须通过读取直到行尾将该值从输入缓冲区中清除。如果返回值等于 EOF，那么要么发生了 I/O 错误，要么您到达了流的末尾。

例程 isdigit() 接受一个整数参数，但它希望该整数值代表一个字符。由于您使用 scanf() 将输入转换为整数，因此存储在 a 中的值不再代表字符；它代表一个实际数字。因此，只有当用户输入与数字字符对应的数字时，对 isdigit() 的调用才会返回真值。在我的语言环境中，这意味着只有当用户输入介于 48 和 57 之间的数字（包括 48 到 57）时，验证才会成功。如果您使用的是 scanf()，则不需要进行 isdigit() 检查，因为仅当用户输入数字值时，scanf() 才会返回值 1。

然而，老实说，如果我可以避免它，我不会使用 scanf() 来读取用户输入，因为如果用户输入错误则需要刷新输入缓冲区。我不完全确定您的要求是什么，但我假设您应该从命令行读取一个正整数并且位数无关紧要。

在这种情况下，您可能希望使用 fgets() 读取用户输入，然后使用 strtol() 将值转换为有符号长整数并同时执行验证：

```
#include <stdio.h>
#include <stdlib.h>
#include <inttypes.h>
#include <errno.h>
#include <ctype.h>
#include <string.h>

int main () {
  long result;
  long len;
  int is_valid = 0;
  char buf[128];
  char *arg;
  char *end;

  while (!is_valid) {

    /* Prompt the user for the integer. */
    printf("Enter a non-negative integer: ");
    if (fgets(buf, sizeof(buf), stdin) == NULL) {
      printf("Giving up so soon?\n");
      break;
    }

    /* Verify that the input doesn't exceed our buffer length. */
    len = strlen(buf);
    if (buf[len] != '\n') {
      printf("Input buffer length exceeded - aborting.\n");
      exit(1);
    }

    /* Skip any leading whitespace. */
    for (arg = buf; isspace(*arg); arg++);

    /* Attempt to convert the argument. */
    errno = 0;
    result = strtol(arg, &end, 10);
    if (errno == EINVAL) {
      printf("Please enter a numeric value.\n");
      continue;
    }
    if (errno == ERANGE) {
      printf("Numeric value out of range.\n");
      continue;
    }

    /* Check for non-whitespace characters after the end of the integer. */
    for (; isspace(*end); end++);
    if (*end != '\0') {
      printf("Please enter a numeric value.\n");
      continue;
    }

    /* Verify that the number is non-negative. */
    if (result < 0) {
      printf("Please enter a positive value.\n");
      continue;
    }

    /* The number is valid. */
    printf("Excellent!\n");
    is_valid = 1;
  }

  return 0;
} 
```

这并不完美。如果超过输入缓冲区长度则中止并不完全是用户友好的。但是，它应该处理验证问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T01:33:19.863

您正在使用 b 作为错误标志。

在“一切都很好”块中，尝试设置`b=0;`
此外，如果你这样做，你可以摆脱这些`b++;`行，并简单地初始化`b=1;`
你应该只在`b++`你需要报告用户搞砸了多少次时才这样做，我就是假设你不需要？

# objective-c - 是否有任何类型的交互式 Objective-C 编程工具？

> ID：11488692
> 
> 赞同：1
> 
> 时间：2012-07-15T01:27:33.947
> 
> 标签：objective-c, ios

> **可能重复：**
> [Mac 是否有 Objective-C 解释器？](https://stackoverflow.com/questions/7211404/is-there-an-objective-c-interpreter-for-the-mac)

我正在使用 CGPaths + CALayers 等为 iOS 进行大量图形编程，并在 iPhone 模拟器中进行预览。一切正常，但查看结果太慢了——每次在模拟器中运行程序需要 20 多秒——调整和测试变得非常乏味（而且似乎是头韵）。

是否有任何类型的 Objective-C 工具可以让我输入代码行并立即查看结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T03:49:15.227

听起来您想要的是一种改变绘图的某些参数并立即查看结果而无需重新编译的方法。我不知道有什么工具可以做到这一点，但你可以通过制作一个可以设置所需参数的系统来自己做。例如，可能某个手势会调出一个包含一些滑块或文本字段的视图，您可以更改值，点击“确定”，它会使用新值重新渲染。它只会在调试版本中，所以用户永远看不到它。在这种情况下，您可能不得不自己动手。

# ruby-on-rails - 我应该如何仅向活动设备发送推送通知？

> ID：11488696
> 
> 赞同：0
> 
> 时间：2012-07-15T01:28:13.843
> 
> 标签：ruby-on-rails, ios

我有一个带有 Rails 后端（和前端）的 iOS 应用程序。我正在使用 Parse 进行推送通知。

我正在尝试找出仅发送将收到的推送通知的最佳方法；也就是说，我想避免将它们发送到：

*   仅使用 Web 应用且没有 iOS 应用的用户
*   拥有 iOS 应用但随后将其卸载的用户

Parse Push API 的工作方式是我可以在某个频道上广播通知，并且任何正在收听该频道的设备都会收到通知。因此，我计划为每个用户制作单独的频道。

显然，我需要在服务器端存储一些关于谁在运行 iOS 应用程序的信息。我很好奇那里是否有人有解决此类问题的经验并且可以提供任何智慧。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:02:56.333

Parse 已经存储了有关谁在运行 iOS 和 Android 应用程序的信息。查看数据浏览器，有一个带有 deviceType 字段的安装表。

让 iOS 应用注册一个唯一的（每个用户）频道。如果您只在用户频道上发送推送通知，它只会发送给安装了 iOS 应用程序的用户。

对于拥有 iOS 应用但卸载它的用户，您无能为力。Apple 没有为应用程序提供在卸载之前运行任何代码的方法，因此您无法使用 Parse 取消注册设备。我不确定 Parse 是否这样做，但 Urban Airship 会轮询 APNS 服务器并删除在一定天数后卸载应用程序的设备。

# jquery - 具有 Backbone 依赖项的 requireJS

> ID：11488698
> 
> 赞同：4
> 
> 时间：2012-07-15T01:28:39.633
> 
> 标签：jquery, backbone.js, requirejs

我正在使用 requireJS 构建一个网站。

这是我第一次使用 requireJS。

我用 main.js 中的路径配置了 requireJS：

```
require.config({
  paths: {
    'jquery': 'libs/jquery/1.7.2/jquery',
    'underscore': 'libs/underscore/1.3.3-amdjs/underscore', // AMD support
    'backbone': 'libs/backbone/0.9.2-amdjs/backbone', // AMD support
    'marionette': 'libs/marionette/0.9.3-amd/backbone.marionette', // AMD support
    'templates': '../templates'
}
}); 
```

在我正在使用的模型、视图、集合中；

```
define([    
'jquery',
'backbone'
], function ($) {
    var Geo = Backbone.Model.extend({});

    return Geo;
}); 
```

我不清楚的是：为什么我必须继续将 jquery 和骨干定义为依赖项。我的意思是这个项目和模型永远不会在没有 jquery / 骨干的情况下运行。

那么为什么不将 jquery 和主干添加到 index.html 作为脚本标签，并在每个可能的对象中保存引用它们。我知道它会污染全局命名空间，但这不是很合理吗？

任何建议。

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T05:31:27.480

@Guy，定义它们是可选的，但如果你想保持一致，它比你做的更好。这是 Require.JS 建议的架构。这并不意味着每次将 jQuery 或 Backbone 定义为 deps 时它都会尝试加载它们。

此外，在您的示例中，您不需要`$`在回调`function()`参数中使用。jQuery 和 $ 已经在窗口中了。

```
define([    
'jquery',
'backbone'
], function ($) {
    var Geo = Backbone.Model.extend({});

    return Geo;
}); 
```

此外，在生产中，因为我们有时会使用很多依赖项，所以我们这样做：每次`require`在依赖项中列出然后显式分配 var，因为某些依赖项不支持 AMD 并且不会返回您期望的结果：

```
define([    
  'require'
  'moduleA',
  'moduleB'
], function (require) {
    var moduleA = require('moduleA'),
        moduleB = require('moduleB');

    /* code */
    return;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T03:24:56.957

我认为你的理解是正确的，因为jQuery无处不在，将index.html页面作为全局引用完全在我的项目中，我这样做了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T04:06:22.510

如果你使用 r.js 来优化你的项目，我认为在 RequireJS 中添加每个 js 文件是非常有用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T05:13:46.740

如果您创建模块 A 和 B 并希望将它们放到另一个项目中，则依赖项会被明确声明。如果另一个项目只使用没有 jQuery 的 ExtJS 怎么办？或者如果他们使用 zepto 而你特别需要 jquery 的库怎么办？只需为 jquery 添加配置就足够了.. jquery 将在需要时加载。

您不能依赖公共库的存在。将模块包装在 requirejs shell 中可以保证库的依赖项将存在。而且它有点快:) [http://jsperf.com/requirejs-include-faster](http://jsperf.com/requirejs-include-faster)（嗯。显然除了ie ..去图）

此外，除非您实际使用 jquery，否则您不必要求它。为什么要在骨干模型中使用？即使在视图中，您也可以使用 this.$el 来返回一个 jquery 对象以进行搜索 - this.$el.find('.someclass')

# wtforms - 在 WTForms 中覆盖 html 格式的 FormField

> ID：11488699
> 
> 赞同：1
> 
> 时间：2012-07-15T01:28:46.153
> 
> 标签：wtforms

使用 wtforms 我正在尝试格式化以下表单。所以我有 evrything 工作，但我不需要 'FormField' 被包​​裹的 html 表 - 那么如何绕过/覆盖它呢？

```
class WeekdayHoursForm(BaseForm):

   hours = [(str(x+1), str(x+1)) for x in range(12)]
   mins=[('00',':00'),('15',':15'),('30',':30'),('45',':45')]

   fromHour = SelectField('',choices=hours)
   fromMin  = SelectField('',choices=mins)
   toHour   = SelectField('',choices=hours)
   toMin    = SelectField('',choices=mins)
   closed   = BooleanField('Closed','0')

class AddListingForm(BaseForm):
   monday    = FormField(WeekdayHoursForm)
   tuesday   = FormField(WeekdayHoursForm)

   etc... 
```

我的观点

```
<div class="wrapper-block weekday" id="mon">
   {{ form.monday.label }} {{ form.monday() }}  
</div>

<div class="wrapper-block weekday" id="tues">
   {{ form.tuesday.label }} {{ form.tuesday() }}
</div> 
```

我省略了生成的 HTML，但如果需要，我可以将其粘贴 - 我知道 wtforms FormField 使用“TableWidget”，但我不知道在哪里设置它`'with_table_tag = False'`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:18:54.743

每个[`wtforms.fields.Field`](http://wtforms.simplecodes.com/docs/1.0.1/fields.html#wtforms.fields.Field)子类都采用一个名为的关键字参数`widget`，该参数可用于覆盖字段的呈现。[您可以在他们的文档](http://wtforms.simplecodes.com/docs/1.0.1/widgets.html)中阅读有关可用 WTForms 小部件的更多信息。

如果您只想使用列表而不是表格，则可以使用内置的 ListWidget：

```
# ... snip ...
class AddListingForm(BaseForm):
   monday    = FormField(WeekdayHoursForm, widget=ListWidget)
   tuesday   = FormField(WeekdayHoursForm, widget=ListWidget) 
```

# ruby-on-rails - Friendly_id 使用来自 belongs_to 关联的值

> ID：11488700
> 
> 赞同：5
> 
> 时间：2012-07-15T01:29:14.407
> 
> 标签：ruby-on-rails, associations, friendly-id, after-create

我有以下型号：

```
class User < ActiveRecord::Base
  extend FriendlyId
  friendly_id :first_name, :use => :slugged

  has_one :professor
  after_create :create_professor

  def create_professor
    self.professor = Professor.create 
  end

end 

class Professor < ActiveRecord::Base
  extend FriendlyId
  friendly_id :first_name, :use => :slugged

  belongs_to :user
  def first_name
    user.first_name 
  end

end 
```

在`create_professor`被调用并因此执行传递到教授模型（`self.professor = Professor.create`）时，当它开始尝试在此方法中创建**slug时：**

```
def first_name
  user.first_name 
end 
```

我得到一个`undefined method first_name for nil:NilClass`，所以教授对象似乎不知道他的关联用户是什么。

关于如何解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T16:03:46.790

你不需要：

```
 def create_professor
    self.professor = Professor.create 
  end 
```

由于 create_professor 是由您的协会创建的。

# r - Rprofile.site 无法工作

> ID：11488704
> 
> 赞同：1
> 
> 时间：2012-07-15T01:30:07.430
> 
> 标签：r, rprofile

我的系统：控制台中的debian：nano /home/tiger/R-2.15.1/etc/Rprofile.site
这是我的内容：

```
.First <- function(){    
     cat("\nWelcome at", date(), "\n")
     }

.Last <- function(){
    cat("\nGoodbye at ", date(), "\n")
    } 
```

当我保存它时，重新打开我的 R，为什么我的 R 中没有
Welcome at Sun Jul 15 07:53:58 2012？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T01:37:47.853

仔细检查正在读取哪些文件。通过这里工作`~/.Rprofile`。使用

```
edd@max:~$ tail -4 .Rprofile

.First <- function(){
    cat("\nWelcome at", date(), "\n")
} 
```

得到欢迎信息：

```
edd@max:~$ R -q

Welcome at Sat Jul 14 20:36:57 2012 
R> 
```

# git - 如何修改第二个最新提交

> ID：11488708
> 
> 赞同：3
> 
> 时间：2012-07-15T01:30:34.577
> 
> 标签：git, github

我知道您可以`git --amend`更改最新提交的提交消息。但是如何更改第二条最新的提交消息？这是我的提交现在的样子：

```
commit eca1b2db14da8ace66aed172056c6e7aaf323093
Author: Adam Sandler
Date:   Fri Jul 13 18:00:13 2012 -0700

    Pre-final work on appending new items on top

commit 7d21bbfea24cb72eafbe0213cad6339354078a81
Author: Adam Sandler
Date:   Fri Jul 13 11:57:40 2012 -0700

    Pre-final work on appending new item on top.

    Loading more  when user reaches the end of the scroll view 
```

我想更改`7d21bbfea24cb72eafbe0213ca`其中包含两条消息的提交。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T01:45:51.137

在 git 中似乎总是有很多方法可以做事，而且我不是专家，但这是我在这种情况下所做的：

```
$ git rebase -i HEAD~2 
```

这带来了一个类似于以下内容的编辑器：

```
pick eca1b2d Pre-final work on appending new items on top
pick 7d21bbf Pre-final work on appending new item on top. 
```

下面有一些说明。如果您在要更改其消息的`pick`提交上更改为`reword`，然后保存并退出编辑器，您将打开另一个编辑器，您可以在其中改写提交消息。

我只在尚未推送的提交上执行此操作。如果您已经推送了要更改其消息的提交，您将需要阅读以下内容：[在有人将 rebase 或重置推送到已发布的分支后，如何恢复/重新同步？](https://stackoverflow.com/questions/4084868/how-do-i-recover-resynchronise-after-someone-pushes-a-rebase-or-a-reset-to-a-pub)

# python - 如何在应用引擎（python）中导入 TemplateDoesNotExist？

> ID：11488716
> 
> 赞同：1
> 
> 时间：2012-07-15T01:33:36.740
> 
> 标签：python, google-app-engine

我不敢相信我找不到这个，但这很简单：

```
from google.appengine.ext.webapp import template

try :
  content = template.render(...)
except TemplateDoesNotExist:
  content = ... 
```

那我就不知道怎么导入TemplateDoesNotExist了！谁能告诉我它的模块路径？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T01:59:05.397

`TemplateDoesNotExist`在 django.template 中定义但是从你正在做的事情看来，你在 Python 2.7 下走上了一条不推荐的道路。如果您查看刚刚导入的 template.py，`from google.appengine.ext.webapp import template`您将看到以下弃用警告。

```
_PYTHON27_DEPRECATION = (
'google.appengine.ext.webapp.template is deprecated. Please use another '
'templating system such as django.template or jinja2.') 
```

您还没有说您使用的是 python 2.5 还是 python 2.7 。如果您开始一个新项目，谷歌的建议是使用 2.7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T02:17:44.120

如果您使用 python 2.7 并将模板导入为

`from google.appengine.ext.webapp import template`

然后您可以将异常导入为

`from google.appengine._internal.django.template import TemplateDoesNotExist`

进而

`try: template.render(...) except TemplateDoesNotExist: # do something useful`

# ruby-on-rails - 远程模型回调 - rails 3？

> ID：11488717
> 
> 赞同：1
> 
> 时间：2012-07-15T01:33:51.867
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我没有在标题中正确地表达这个问题，但这是我想做的。

我有一个方法，像这样：

```
class User < ActiveRecord::Base
   def myMethod(abc, xyz)
     #do stuff
   end
end 
```

我希望我的应用程序中有 5 个不同的模型在他们的 after_create 回调中调用这个函数。

在每个模型中放置一个函数来调用这个函数似乎非常反 DRY。

在这个模型（上图）中是否有一种方法可以保存该方法 - 远程使用其他模型的回调？

或者任何人都可以建议一种不同的方式我应该接近这样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T01:57:08.750

这就是我会做的：

创建一个模块：

```
module MyCallbacks

    extend ActiveSupport::Concern

    included do
        after_create :my_method
    end

    def my_method
        #do stuff
    end

end 
```

然后，您只需将此模块包含在您选择的模型中：

```
class MyModel < ActiveRecord::Base
    include MyCallbacks
end 
```

# c# - 添加行然后使用 EF 更新行时出错

> ID：11488720
> 
> 赞同：0
> 
> 时间：2012-07-15T01:34:35.793
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework

目前我正在尝试通过 AJAX 向数据库表中添加一个新行，这工作正常。但后来我尝试更新另一个表，但出现错误。这是我的代码和我遇到的错误。

## 错误

无法附加该对象，因为它已经在对象上下文中。一个对象只有在它处于未更改状态时才能重新附加。

第 41 行：_db.ChampionCounters.Attach(champion);

## 代码

```
[HttpPost]
    public ActionResult VoteYes(int id)
    {
        string results;

        if (Request.IsAuthenticated)
        {
            var checkFirst =
                from c in _db.UserCounterLinks
                where c.counterId == id && c.userName == User.Identity.Name
                select c;

            if (checkFirst.Any())
            {
                results = "You have already voted on this counter.";
                return Json(results);
            }

            var userVoteLink = new UserCounterLink { counterId = id, userName = User.Identity.Name, userAgree = true };

            _db.UserCounterLinks.AddObject(userVoteLink);

            var champion = _db.ChampionCounters.SingleOrDefault(c => c.id == id);

            if (champion != null)
            {
                champion.positiveVotes++;
                _db.ChampionCounters.Attach(champion);
            }
            _db.SaveChanges();
            results = "Voted";
        } else
        {
            results = "You must be logged in to vote.";
        }

        return Json(results);
    } 
```

## 概括

上面的代码来自处理 Ajax 帖子的控制器。就像我说的 userVoteLink 表创建一个记录就好了。但是当我尝试更新另一个表 ChampionCounters 时，会抛出错误。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T02:09:23.763

您不需要附加该实例，因为上下文已经在跟踪该实例。只需删除该`_db.ChampionCounters.Attach(champion);`行。

# installation - 无法在 Windows 2003 上启动 Portal Express 7

> ID：11488723
> 
> 赞同：0
> 
> 时间：2012-07-15T01:34:53.353
> 
> 标签：installation, websphere-portal

我有一个 Windows 2003 SP2 Virtual Box 来宾，我正在尝试在其中安装 Portal Express 7。

在安装过程中有一个提示说服务器无法启动，我必须手动启动。当我尝试使用 startServer.bat 启动它时，每次都会收到以下消息：

```
ADMU3011E: Server launched but failed initialization. startServer.log,SytemOut.log(or job log in zOS) and other log files under C:\IBM\WebSphere\AppServer/profiles\default\logs\server1 should contain failure information.

ADMU7704E: Failed while trying to start the Windows Service associated with server: WebSphere_Portal;probable error executing WASService.exe: com.ibm.ws.management.tools.ProblemInWASServiceException: ADMU7711E: Unexpected exception associated with WASService.exe: exitCode = -1 during processing of server with name: WebSphere_Portal 
```

在日志中我只找到`java.lang.NoClassDefFoundError:com/ibm/ffdc/impl/EmptyProvider$EmptyFfdc`了几个`verbosegc.txt`文件。有没有人在 Windows 2003 上成功安装 IBM WP 7？

[PS：我的问题与这个 DeveloperWorks 帖子](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14853422)非常相似。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:50:13.560

如果您可以手动启动它，但不能通过 Windows 服务启动它，则可能是服务定义中的某些内容已损坏。没问题，你可以很简单地删除它（WASService.exe -remove servicename in AppServer/bin目录），然后重新添加

我使用这样的语法

wasservice -add "Cluster1_server1" -serverName "Cluster1_server1" -profilePath "D:\IBM\WebSphere\AppServer\profiles\AppSrv01" -wasHome "D:\IBM\WebSphere\AppServer" -stopArgs " -username youradmin-password yourpassword" -编码参数

或者您也可以在soap.client.props 中插入用户名和密码，这样您就不需要一直更改它。

# objective-c - 更新标签两次并在其间调用 sleep() —— 只看到第二次更新

> ID：11488724
> 
> 赞同：-1
> 
> 时间：2012-07-15T01:35:07.333
> 
> 标签：objective-c, cocoa, sleep

> **可能重复：**
> [Obj-C -> 增加一个数字（并在 Cocoa 标签上显示步骤）](https://stackoverflow.com/questions/237621/obj-c-incrementing-a-number-and-showing-steps-on-a-cocoa-label)

我想知道为什么这不起作用：睡眠和“任何”都按预期显示，而不是`NSString`在睡眠功能之前（计算......）。标签为空 1 秒，然后显示第二个字符串。这是为什么？

```
if ([label.text isEqualToString : @"1"]) {
    [label2 setText : [NSString stringWithFormat : @"Computing..."]];
    sleep (1);
    [label2 setText : [NSString stringWithFormat : @"Whatever"]];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T01:39:53.773

这大概发生在主线程上。通过休眠，您可以停止屏幕更新，因此不会显示第一个更改。然后，一旦线程恢复，您再次更改文本，使其看起来好像文本从未设置过。

编辑：
如果你想修复它，最简单的方法是更改​​睡眠呼叫，第二个`-setText:`是`[label2 performSelector:@selector(setText:) withObject:[NSString stringWithFormat:@"Whatever"] afterDelay:1.0];`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T01:55:51.033

您可以致电：

```
[self performSelector:@selector(updateLabel) withObject:nil afterDelay:1.0f]; 
```

然后有方法updateLabel：

```
[label2 setText:@"Whatever"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T01:41:24.350

我的猜测是，当您调用 sleep() 函数时，实际的屏幕更新尚未发生，因此当您立即再次更新该字段时，这就是您最终在屏幕上看到的内容。

如果您确实需要确保第一个字符串在第二个字符串之前出现在屏幕上，您将必须确保显示已实际更新，而不仅仅是执行 sleep()。

# html - 如何在文本框后面“发回图像”？

> ID：11488730
> 
> 赞同：5
> 
> 时间：2012-07-15T01:37:12.810
> 
> 标签：html, css, image, button, textbox

你可以查看我的问题：

![在此处输入图像描述](../Images/e2ec9915125b65d1cb50422f4fbab972.png)

[http://i.stack.imgur.com/cGoEU.png](https://i.stack.imgur.com/cGoEU.png)

该图像覆盖了我的登录表单。如何让它在文本框和登录按钮后面移动？

这是我的代码：

```
<img src="C:\Users\George\Documents\HTML\My Local Soccer\pics\icons\gradient box.gif" 
    style="position:absolute; top: 155px; left: 480px; width:auto; height:auto;">
<input type="text" class="tb7" value="Username" style="margin-left: 563px" 
    maxlength="20" onfocus="if(this.value == 'Username') {this.value='';}" />         
</br>
<input type="text" class="tb8"  value="Password" style="margin-left: 563px;"   
    maxlength="20" onfocus="if(this.value =='Password') {this.value='';}"/>
<input type="image" height="25px"   width="67px" style="vertical-align:top;"
    src="C:\Users\George\Documents\HTML\My Local Soccer\pics\icons\sign in.gif" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T01:44:34.207

尝试使用 style="z-index:-5;" 和位置相对或绝对

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T01:43:35.687

最简单的方法是通过 CSS 的 z-Index。基本上它的作用是定义元素的堆叠位置。数字越高，其他元素越多。由于您没有为这些输入字段提供顶级 HTML，因此我无法为您提供具体示例来说明如何执行此操作，但如果您提供更多代码，我很乐意为您提供进一步帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T01:45:16.873

将输入包装在 div 中，并使用背景中的图像对其进行样式设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T01:42:28.320

我不确定您的橙色矩形如何适合您的 HTML，但可以使用`z-index`您可以附加到 style 属性的 style 属性将元素放置在其他元素的前面或后面。

更多信息可以在这里找到：http: [//htmldog.com/reference/cssproperties/z-index/](http://htmldog.com/reference/cssproperties/z-index/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-15T01:44:52.500

您需要在 css 中设置 z-indexes。

```
<img src="C:\Users\George\Documents\HTML\My Local Soccer\pics\icons\gradient box.gif" 
    style="position:absolute; z-index: 50; top: 155px; left: 480px; width:auto; height:auto;">

<input type="text" class="tb7" value="Username" style="margin-left: 563px; z-index: 50;position: relative;" maxlength="20"
    onfocus="if(this.value == 'Username') {this.value='';}" />      
</br>

<input type="text" class="tb8"  value="Password" style="margin-left: 563px; z-index: 50;position: relative;"   maxlength="20"
    onfocus="if(this.value =='Password') {this.value='';}" />

<input type="image" height="25px"   width="67px" style="vertical-align:top; z-index: 50; position: relative;"
    src="C:\Users\George\Documents\HTML\My Local Soccer\pics\icons\sign in.gif" /> 
```

请记住，对于使用 z-index，您需要像我一样指定位置，即使您想使用默认位置。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-15T21:02:09.343

尝试：

```
<div id="form_wrapper" style="background-image:url('img/yellow.png');">
<img src="C:\Users\George\Documents\HTML\My Local Soccer\pics\icons\gradient box.gif" 
    style="position:absolute; top: 155px; left: 480px; width:auto; height:auto;">
<input type="text" class="tb7" value="Username" style="margin-left: 563px" 
    maxlength="20" onfocus="if(this.value == 'Username') {this.value='';}" />         
</br>
<input type="text" class="tb8"  value="Password" style="margin-left: 563px;"   
    maxlength="20" onfocus="if(this.value =='Password') {this.value='';}"/>
<input type="image" height="25px"   width="67px" style="vertical-align:top;"
    src="C:\Users\George\Documents\HTML\My Local Soccer\pics\icons\sign in.gif" />
</div> 
```

享受和好运！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-16T22:39:43.823

如果您使用“渐变框”作为背景，您可能应该考虑使用 CSS 来获得类似的效果。

# python - 电子邮件消息 python 抓取消息的一部分

> ID：11488735
> 
> 赞同：1
> 
> 时间：2012-07-15T01:39:05.833
> 
> 标签：python, email, imap

好的，所以我正在使用 imap 库来下载消息。我不想下载整个邮件只看附件。例如，当消息被接收并作为一个整体下载时，会显示以下 .txt 附件：

```
------=_Part_1476882_26131288.1342315902872--
------=_Part_1476883_28164997.1342315902872--
Content-Type: application/octet-stream; 
name=textplain_2.txt
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
filename=textplain_2.txt
Bhh
------=_Part_1476883_28164997.1342315902872-- 
```

上述消息中的 Bhh 是文本文件的内容。有什么方法可以下载附件吗？[我在http://www.devshed.com/c/a/Python/Python-Email-Libraries-part-2-IMAP/3/](http://www.devshed.com/c/a/Python/Python-Email-Libraries-part-2-IMAP/3/)上看到了一个教程，它正在谈论这个，但我不知道如何下载或仅获取附加文本文件的内容...

他们建议做类似的事情......

```
r, data = server.fetch(‘6’, ‘(UID BODY[TEXT])’)
r, data = server.fetch(‘6’, ‘(UID ENVELOPE)’)
r, data = server.fetch(‘2:5’, ‘(BODY[HEADER.FIELDS (SUBJECT FROM)]) 
```

我在想它会是这样的：

```
server.fetch(‘6’, ‘(UID BODY[ATTACHMENT???<-------])’) 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T07:57:23.640

您将需要解析邮件的[BODYSTRUCTURE](https://www.rfc-editor.org/rfc/rfc3501#section-7.4.2)以确定相关附件的部分编号。

```
server.fetch(‘6’, ‘(UID BODYSTRUCTURE)’) 
```

然后您将需要实际获取您要查找的附件，查询将如下所示：

```
server.fetch('6', '(BODY[2.1])') 
```

请注意，此示例中的部分部件 ID 为“2.1”。

# c# - 动态访问类中的字段

> ID：11488745
> 
> 赞同：0
> 
> 时间：2012-07-15T01:41:29.423
> 
> 标签：c#, .net-4.0, system.reflection

我在这里有这段代码，我试图将类实例中的每个字段保存到单独的文件中。我已经把它都写出来了，但有些东西看起来不太对劲。问题是它没有引用包含数据的实例，只是类型。这对我来说似乎不太正确。我正在使用 System.Reflection。现在，我如何引用实例？还是我已经不知道了。这是我的代码：

```
public static void Save(appData data)
{
    string filename;
    // this does not accept the variable "data", only the class spec "appData"
    var fields = typeof(appData).GetFields(BindingFlags.Instance);
    foreach (FieldInfo field in fields)
    {
        try
        {
            filename = (string)field.GetValue("dataFile");
        }
        catch (Exception e)
        {

            Console.WriteLine(e.Message);
            Console.ReadLine();
        }
        dataStream = new FileStream(filename,
            FileMode.Truncate, FileAccess.Write,
            FileShare.Read);
        serial.Serialize(dataStream, field );
        dataStream.Flush();
        dataStream.Close();
        dataStream = null;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T02:00:15.567

尽管您的代码不完整，但我想我可以告诉您您要做什么。

您的示例实际上是序列化`FieldInfo`对象，而不是字段。你想替换：

`filename = (string)field.GetValue("dataFile");`

和：

`filename = field.Name;`

同时替换：

`serial.Serialize(dataStream, field );`

和：

`serial.Serialize(dataStream, field.GetValue(data);`

只需确保您的所有字段都能够被您的`serial`对象序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T02:02:02.990

您没有正确调用[FieldInfo.GetValue 方法](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.getvalue.aspx)。它的参数应该是您要提取其字段值的对象，或者对于静态字段为 null。

也许你试图通过这个来实现：

```
filename = (string)field.GetValue("dataFile"); 
```

这是（假设*数据*是感兴趣的实例）吗？

```
if (field.Name == "dataFile")
{
    filename = (string)field.GetValue(data);
} 
```

# java - HashMap 的 Getter 和 Setter

> ID：11488747
> 
> 赞同：-4
> 
> 时间：2012-07-15T01:41:56.593
> 
> 标签：java, getter, getter-setter

我知道如何做 getter/setter，但我想知道如何用 hashmaps 做它们？

我尝试将用户放入 HashMap 中，然后放入另一个类中，以便在 HashMap 中为用户创建一个 if 语句。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T06:38:40.880

如果您只是想进出对象：

```
map.put(key, value);
value = map.get(key); 
```

如果我没有正确地解释你的问题，请原谅我。

# javascript - getElementById 并动态创建 div？

> ID：11488748
> 
> 赞同：0
> 
> 时间：2012-07-15T01:42:05.813
> 
> 标签：javascript, html

我只是想知道如何使这段代码更有效率。我觉得这里有很多代码来完成一个简单的任务。但我不确定如何改善它？有没有办法动态创建div？或者是一种减少“getElementById”调用次数的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T02:29:18.190

您可能会做出许多改进，无论是在速度、可读性还是可维护性方面。这是我脑海中的一些清单：

1.  如果要重用它，请将 note 元素缓存在变量中。这使您的代码更快，因为您不必再​​次抓取元素来使用它。

    ```
    var noteDiv = document.getElementById("A");
    noteDiv.note = notes[9];
    noteDiv.onmouseover = displayIt; 
    ```

2.  您可以迭代跟踪您的笔记的东西，而不是重复您的代码。在此示例中，我使用了一个 id 数组和一个包含 id 和注释作为属性值对的对象。

    ```
    var noteDivs = ["Middle", "D", "E", "F", ... ]
    // note that the order you put notes in here does not matter
    var notes = { Middle: "Middle C",
                  D: "D",
                  E: "E",
                  F: "F",
                  ... }
    function MakingNoise () {
        for (var i = 0; i < noteDivs.length ; i++) {
            document.getElementById(noteDivs[i]).note = notes[noteDivs[i]];
            document.getElementById(noteDivs[i]).onmouseover = displayIt;
        }
    } 
    ```

3.  该`box`元素也可以通过全局变量进行缓存。可能不是很好的风格，但这应该比每次从 DOM 中获取要快。

    ```
    var screen=document.getElementById("box"); 
    function displayIt() {
        if (this.note && screen) {
            screen.innerHTML += note + "  ";
        }
    } 
    ```

将所有内容放在一起，您将拥有以下内容：

```
var screen=document.getElementById("box"); 
var noteDivs = ["Middle", "D", "E", "F", ... ]
var notes = { Middle: "Middle C",
              D: "D",
              E: "E",
              F: "F",
              ... }

function MakingNoise () {
    for (var i = 0; i < noteDivs.length ; i++) {
        var noteDiv = document.getElementById(noteDivs[i]);
        noteDiv.note = notes[noteDivs[i]];
        noteDiv.onmouseover = displayIt;
    }
}
function displayIt() {
    if (this.note && screen) {
        screen.innerHTML += note + "  ";
    }
} 
```

只要确保顺序与数组相同，保留`notes`数组而不是使用我上面的对象可能会更好。它会更快，但维护工作也会稍微多一些。您还需要为 中的每个元素设置一个，而您目前没有。`notes``noteDivs``div``notes`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T03:02:40.753

一种不使用 jQuery 或任何此类库的解决方案可能如下所示：

```
var notes = ["Middle C","C#","D","D#","E","F","F#","G", "G#", "A", "A#", "B", "C"];
var note, div, name;

var myKeys = document.getElementById("myKeys");

for (var i = 0, len = notes.length; i < len; i++) {
    note = notes[i];
    name = note.replace(/\s/g, "").replace(/#/g, "S");
    div = document.createElement("DIV");
    div.className = name;
    div.id = name;
    div.note = note;
    div.appendChild(document.createTextNode(note));
    div.onmouseover = displayIt;
    myKeys.appendChild(div);
}​ 
```

[你可以在这个 fiddle](http://jsfiddle.net/CrossEye/dcUag/1/)看到它的作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T01:46:57.650

一项改进是将 DOM 元素存储在一个变量中并重新使用它，而不是使用 getElementById 再次找到它。它也更有效率。

如果您使用 jQuery 之类的框架，那么您可以像进行链接一样节省代码。

# java - 为什么当前目录不是目标\类？

> ID：11488750
> 
> 赞同：0
> 
> 时间：2012-07-15T01:42:28.550
> 
> 标签：java, maven, maven-2

使用 maven 进行项目说 myproject

它有以下 myproject\src 和 myproject\target，所有的类和资源都复制到 myproject\target\classes。

但是我发现user.dir或当前目录仍然是myproject，为什么不是myproject\target\classes，如何将当前目录更改为myproject\target\classes？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T02:28:04.010

如果要获取类文件夹路径，可以按照以下代码：

```
 String path  = YourClassName.class.getResource("").getPath(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T06:36:06.950

因为 maven 总是在 pom.xml 的工作目录中运行东西，除非你以不同的方式配置它（我认为你可以在运行测试用例的 surefire 插件中做到这一点）。

# php - 字符串到 php 中的压缩流

> ID：11488752
> 
> 赞同：2
> 
> 时间：2012-07-15T01:43:45.407
> 
> 标签：php, file, stream, zip, ziparchive

我有一个带有我的数据库的处理服务器和一个服务数据库，以低带宽成本提供文件。在处理服务器上，php 无法创建文件，因此在发送到另一台服务器进行下载之前，必须使用流完成所有操作和/或保留在内存中。几天前，我发现了关于 'php://memory' 的流抽象，我可以做类似的事情

```
$fp=fopen('php://memory','w+');
fwrite($fp,"Hello world");
fseek($fp,0,SEEK_SET);

//make a ftp connection here with $conn_id
$upload = ftp_fput($conn_id,"targetpath/helloworld.txt",$fp,FTP_BINARY); 
```

在内存中制作文件，然后允许我将其通过 ftp 传输到我的另一台服务器。这正是我想要的，除了我还想在发送数据之前压缩数据——最好只使用 php 的本机部分，如 ziparchive，而不是额外的自定义类来进行特殊的流操作。我知道我与以下内容非常接近...

```
$zip = new ZipArchive();
if($zip->open('php://memory', ZIPARCHIVE::CREATE)) {
  $zip->addFromString('testtext.txt','Hello World!');
  $fp = $zip->getStream('test'); if(!$fp) print "no filepointer";

  //make a ftp connection here with $conn_id
  $upload = ftp_fput($conn_id,"targetpath/helloworld.zip",$fp,FTP_BINARY);
} else print "couldn't open a zip like that"; 
```

失败的地方是对 getStream 的调用（尽管我认为我使用正确，但它总是返回 false）。似乎 zip 可以很好地在 'php://memory' 中制作文件，但由于某种原因 getStream 仍然失败，尽管我可能不太了解 ZipArchive 是如何制作 zip 的......

如何从字符串转到压缩文件指针，以便将 zip 文件通过 ftp 传输到其他服务器？请记住，我不能制作任何文件，否则我只会制作 zip 文件，然后将其 ftp 传输过来。

**编辑：**根据下面skinnynerd的建议，我尝试了以下

```
$zip = new ZipArchive();
if($zip->open('php://memory', ZIPARCHIVE::CREATE)) {
  $zip->addFromString('testtext.txt','Hello World!');
  $zip->close(); 

  $fp = fopen('php://memory','r+');
  fseek($fp,0,SEEK_SET);

  //connect to ftp
  $upload = ftp_fput($conn_id,"upload/transfer/helloworld.zip",$fp,FTP_BINARY);
} 
```

这确实会创建一个 zip 并将其发送过去，但 zip 的大小为 0 字节，因此我认为 'php://memory' 的工作方式与我想象的不同……它实际上在最后一步失败了——$zip ->close() 返回 false，这让我想知道我是否可以将 zips 打开到 'php://memory' 中。有谁知道我可以沿着这条线尝试什么来获得拉链？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T02:08:29.177

`$zip->getStream('test')`正在获取一个流以`'test'`从存档中提取文件。由于存档中没有文件`'test'`，因此失败。这*不是*您要使用的功能。

正如您所说，您要做的是将完成的存档发送到 ftp 服务器。在这种情况下，您可能希望关闭 zip 存档，然后`php://memory`作为普通文件重新打开（使用`fopen`）以发送它。

我不知道，但是您也可以`$zip`直接将其用作资源，而无需关闭并重新打开文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T03:00:25.280

而且我认为您可以尝试直接从 ftp 服务器创建流管道

```
<?php
    $zip = new ZipArchive();
    if($zip->open('ftp://user:password@ftp.host.com/upload/transfer/helloworld.zip', ZipArchive::CREATE)) 
    {
        $zip->addFromString('testtext.txt','Hello World!');                         
        $zip->close();
    } 
    else 
        print "couldn't open zip file on remote ftp host."; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T02:46:35.280

它必须是 Zip 存档吗？由于您正在尝试保存带宽，因此它也可能是 gzip。

```
<?php
 $ftp_credentials = "ftp://USER:PASSWORD@HOST/helloworld.gz";
 $gz = gzencode("Hello World!", 9);
 $options = array('ftp' => array('overwrite' => true));
 $stream_context = stream_context_create($options);
 file_put_contents($ftp_credentials, $gz, 0, $stream_context);
?> 
```

# java - 规范路径和绝对路径有什么区别？

> ID：11488754
> 
> 赞同：25
> 
> 时间：2012-07-15T01:43:49.910
> 
> 标签：java

> **可能重复：**
> [Java 中的 getPath()、getAbsolutePath() 和 getCanonicalPath() 有什么区别？](https://stackoverflow.com/questions/1099300/whats-the-difference-between-getpath-getabsolutepath-and-getcanonicalpath)

这两者有什么区别吗？

规范路径和绝对路径？

如果有差异，将需要一个真实世界的例子。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-15T01:51:40.847

^(不同之处在于文件[1])只有一个规范路径，而文件可以有多个绝对路径（取决于系统）。例如，在 Unix 系统`/usr/local/../bin`上，与`/usr/bin`. `getCanonicalPath()`解决这些歧义并返回（唯一）规范路径。所以如果当前目录是`/usr/local`，那么：

```
File file = new File("../bin");
System.out.println(file.getPath());
System.out.println(file.getAbsolutePath());
System.out.println(file.getCanonicalPath()); 
```

会打印：

> ../bin
> /usr/local/../bin
> /usr/bin

Per Voo 的建议：在 Unix 系统上，`getCanonicalPath()`如果符号链接存在，也会解析符号链接。硬链接被视为普通文件（基本上就是它们的样子）。但是请注意，这些方法无需存在文件即可成功。

^([1]) [嗯，不完全是。正如@Tom Hale 在评论中指出的那样，如果文件系统支持硬链接目录，则给定文件可能有多个规范路径。]

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-15T02:17:59.787

这是一个**规范**的路径。

> C:/files/foo.txt

这是**绝对**路径

*   C:/文件/FOO.TXT

*   C:/files/FOO.txt

*   C:/文件/foo.TXT

*   C:/文件/FOO.TXT

规范路径是文件的*绝对唯一路径*。一个文件只能有一个规范路径和多个绝对路径。

一个文件只能有一个规范路径，即文件的文件路径。一个文件可以有许多指向该文件的绝对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T01:49:29.067

一个文件可以有许多绝对路径。但是，文件只能有一个规范路径。[读这个](http://www.xyzws.com/Javafaq/what-is-the-difference-between-absolute-relative-and-canonical-path-of-file-or-directory/60)

# android - 如何创建“标题图片”

> ID：11488764
> 
> 赞同：0
> 
> 时间：2012-07-15T01:46:32.790
> 
> 标签：android, android-layout

对于我的应用程序，我想要一个像我在右上角制作的这个例子的设计。 ![在此处输入图像描述](../Images/bd1dc347a145cf9fef6ed2ff51c28806.png)

我将如何创建这个？它必须是带有文本视图的图像，还是我可以通过编程制作一个？感谢所有帮助-Lijap

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T02:26:21.997

这可以使用带有[9-patch 背景的 TextView 来实现](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)

# ios - 如何在访问功能中访问多个按钮？

> ID：11488765
> 
> 赞同：0
> 
> 时间：2012-07-15T01:46:52.533
> 
> 标签：ios, xcode

我在表格视图的每一行中有两个按钮。一个标记为“拥有它”，另一个标记为“想要它”。当应用程序启动时，每个按钮都以 20% 的不透明度开始。当点击一个按钮时，不透明度设置为 100% 。我需要逻辑，如果一个按钮设置为 100% 不透明度，另一个设置为 20% 被点击，第一个按钮需要设置为 20%，第二个按钮设置为 100%（所以不透明度需要反转）。

每个按钮都有自己的动作，按下时会运行。我可以访问按下的按钮并使用 (UIButton *senderButton = (UIButton *)sender) 设置不透明度。但是我还需要设置另一个按钮的不透明度。如何在按下一个按钮时调用我的操作/函数中的另一个按钮（未按下的按钮）？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T02:30:05.260

您可以为每个按钮创建一个插座。这样您就可以从其容器类中的任何位置设置其属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:55:33.300

如果我正确理解您的问题，您可以在头文件中声明您的按钮，如下所示：

```
@interface myController : UIViewController
{
  UIButton *b1;
  UIButton *b2;
} 
```

m-file 中的 tmen（在 viewDidLoad 中）您可以使用一个选择器和不同的标签设置此按钮：（有关创建按钮的更多信息：[如何以编程方式创建基本 UIButton？](https://stackoverflow.com/questions/1378765/how-do-i-create-a-basic-uibutton-programmatically)）

```
-(void)viewDidLoad
 {
     [super viewDidLoad];

     b1 = [UIButton buttonwithType:UIButtonTypeCustom];
     [b1 addTarget:self withAction:@selector(clickINMyButtons:) forState:UIControlTouchUPInside];  // sorry, I don't remember correct syntax, i'll correct this some later if you needed in it.
     b1.tag = 1;  
     b1.frame = CGRectMake(0,0,12,12); //example
     [self.view addSubView:b1];

 } 
```

同样声明 b2 不同：

```
b2.tag = 2; 
```

所以，然后你用改变不透明度来实现你的选择器：

```
 -(void)clickINMyButtons:(UIButton *)sender
 {
      if (sender.tag == 1)
       {
         sender.alpha = 1; // or b1.alpha = 1;
         b2.alpha = 0.2;
       }
       else if (sender.tag == 2)
       {
         sender.alpha = 1; // or b2.alpha = 1;
         b1.alpha = 0.2;
       }
 } 
```

# jms - JMS - 一个队列和多个接收者（消费者）

> ID：11488770
> 
> 赞同：2
> 
> 时间：2012-07-15T01:48:27.673
> 
> 标签：jms, consumer

我有一个第三方发布的 JMS 队列。我想在不同的机器上设置多个消费者，只有一台特定机器的消费者，确认该队列上的消息。简而言之，如果特定机器的消费者没有收到消息，则不应从队列中删除该消息。这是可以实现的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:54:12.170

好的，您可能有此设置的原因，并且很容易实现。

我会使用本地会话事务。根据某些标准提交或回滚事务相当容易，例如哪个服务器正在使用消息。如果回滚，则消息将再次首先出现在队列中。

示例代码可能如下所示：

```
public class MyConsumer implements MessageListener{ 
  Session sess;

  public void init(Connection conn, Destination dest){
    // connection and destination from JNDI, or some other method.
    sess = conn.createSession(true, Session.AUTO_ACKNOWLEDGE);
    MessageConsumer cons = sess.createConsumer(dest);
    cons.setMessageListener(this);
    conn.start();
  }

  @Override
  public void onMessage(Message msg) {
    // Do whatever with message
    if(isThisTheSpecialServer()){
       sess.commit();
    }else{
       sess.rollback();
    }
   }

   private boolean isThisTheSpecialServer(){
      // figure out if this server should delete messages or not
   }
} 
```

如果您在带有 JTA 的 Java EE 容器中执行此操作并且正在使用 UserTransactions，则只需调用 UserTransaction.setRollBack(); 或者，如果您使用的是声明性事务，则可以在阅读消息并完成操作后抛出运行时异常以使事务失败并将消息回滚到队列中。请注意，使用这种方法也将回滚数据库更改（如果您使用的是 JTA 而不是本地 JMS 事务）。

更新：

你真的应该使用交易而不是确认来做到这一点。

可以在此处找到该主题的摘要（针对 ActiveMQ，但通常针对 JMS 编写）。 [http://activemq.apache.org/should-i-use-transactions.html](http://activemq.apache.org/should-i-use-transactions.html)

我不知道这种行为是否与所有 JMS 实现一致，但对于 ActiveMQ，如果您尝试使用带有 Session.CLIENT_ACKNOWLEDGEMENT 的非事务性会话，那么它的行为将不会像您预期的那样。已读取但未确认的消息仍在队列中，但不会“释放”并传递给其他 JMS 消费者，直到与第一个消费者的连接中断（即 connection.close()、崩溃或相似的）。

使用本地事务，您可以通过 session.commit() 和 session.rollback() 显式控制它。我认为不使用事务没有任何意义。确认只是为了保证交付。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:07:11.253

另一种看待这个问题的方法是转发队列。您可以通过执行以下操作将其应用于您的设计：

1.  在第三方发布的队列上创建消费者。
2.  这个消费者有一项工作——将每条消息分发到其他队列。
3.  创建您的真正订阅者将收听的其他队列。
4.  对您的消息侦听器进行编码以获取每条消息并将其转发到各个目的地。
5.  更改每个侦听器以从其特定队列中读取。

通过这样做，您可以确保每个侦听器都能看到每条消息，每个事务都按预期工作，并且您不对消息的发送方式做出任何假设（例如，如果发布方正在做什么`AUTO_ACKNOWLEDGE`？）

# java - Nimbus 上的 JTextArea 在不同机器上不一致

> ID：11488773
> 
> 赞同：1
> 
> 时间：2012-07-15T01:48:49.647
> 
> 标签：java, swing, user-interface, jtextarea, nimbus

我有一个扩展类`JPanel`，我想嵌入到`JFrame`. L&F 设置为 Nimbus，我用于面板的布局是`GridBagLayout`.

* * *

当我将 JAR 给朋友时，`JTextArea`我打算用作日志控制台的一个开始起作用并且不会保持我设置的大小。

`textAreaLog.setMinimumSize(new Dimension(295, 48));`

我使用的是 WinXP SP2，而我的朋友使用的是 Win7 64 位。这是它在我的电脑（左）和他的电脑（右）上的样子：

[图片](https://dl.dropbox.com/u/17850283/parser_comparison.png)

显然，我打算让它成为我在我的机器上的方式。

* * *

这是相关代码（几乎是面板使用的整个类）：

```
package com.sassilization.mapfix.gui;

// Imports the package with the inner-workings of the application
import com.sassilization.mapfix.MapFixGenerator;

import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

public class LogPanel extends JPanel {
    private static final long serialVersionUID = 8324191587703173738L;

    /*
    * Constructor
    */
    public LogPanel() {
        setPreferredSize(new Dimension(350, 70));
        // Creates a default Nimbus border
        setBorder(BorderFactory.createTitledBorder((String) null));
        setOpaque(false);

        setLayout(new GridBagLayout());
        // Calls the method which initializes all the components
        initComponents();
    }

    /*
    * Component declarations
    */
    private JButton buttonFgd;
    private JButton buttonHelp;
    private JButton buttonLogCopy;
    private JButton buttonLogDown;
    private JButton buttonLogUp;
    private JTextArea textAreaLog;
    private JToggleButton toggleButtonAppend;

    /*
    * Initializes and adds all the components to the panel
    */
    private void initComponents() {
        // The constraints used to lay out the components in a GBL
        GridBagConstraints gbc = new GridBagConstraints();

        // The brick button
        toggleButtonAppend = new JToggleButton(appendIcons[0]);
        toggleButtonAppend.setBorder(BorderFactory.createEmptyBorder());
        toggleButtonAppend.setToolTipText("Turn append mode on");
        toggleButtonAppend.addItemListener(new ItemListener() {
            public void itemStateChanged(ItemEvent event) {
                buttonAppendItemStateChanged(event);
            }
        });
        add(toggleButtonAppend, gbc);

        // The question mark button
        buttonHelp = new JButton(new ImageIcon(getClass().getResource("resources/help.png")));
        buttonHelp.setBorder(BorderFactory.createEmptyBorder());
        buttonHelp.setToolTipText("Open help");
        buttonHelp.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent event) {
                // buttonHelpActionPerformed(event);
            }
        });
        gbc.gridy = 1;
        add(buttonHelp, gbc);

        // The white page button
        buttonFgd = new JButton(new ImageIcon(getClass().getResource("resources/page_white_put.png")));
        buttonFgd.setBorder(BorderFactory.createEmptyBorder());
        buttonFgd.setToolTipText("Extract FGD file");
        buttonFgd.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent event) {
                // buttonFgdActionPerformed(event);
            }
        });
        gbc.gridy = 2;
        add(buttonFgd, gbc);

        // The problematic JTextArea
        textAreaLog = new JTextArea();
        textAreaLog.setMinimumSize(new Dimension(295, 48));
        textAreaLog.setBorder(BorderFactory.createMatteBorder(0, 12, 0, 0,
                new ImageIcon(getClass().getResource("resources/border.png"))));
        textAreaLog.setBackground(new Color(0, 0, 0, 0));
        textAreaLog.setForeground(new Color(171, 193, 207));
        textAreaLog.setFont(new Font(null, Font.PLAIN, 9));
        textAreaLog.setLineWrap(true);
        textAreaLog.setWrapStyleWord(true);
        textAreaLog.setEditable(false);
        gbc.gridx = 1;
        gbc.gridy = 0;
        gbc.gridheight = 3;
        add(textAreaLog, gbc);

        // The up arrow button
        buttonLogUp = new JButton(new ImageIcon(getClass().getResource("resources/bullet_arrow_up.png")));
        buttonLogUp.setBorder(BorderFactory.createEmptyBorder());
        buttonLogUp.setContentAreaFilled(false);
        buttonLogUp.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent event) {
                // buttonLogUpActionPerformed(event);
            }
        });
        gbc.gridx = 2;
        gbc.gridheight = 1;
        add(buttonLogUp, gbc);

        // The floppy disk button
        buttonLogCopy = new JButton(new ImageIcon(getClass().getResource("resources/bullet_disk.png")));
        buttonLogCopy.setBorder(BorderFactory.createEmptyBorder());
        buttonLogCopy.setContentAreaFilled(false);
        buttonLogCopy.setToolTipText("Copy log to clipboard");
        buttonLogCopy.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent event) {
                // buttonLogCopyActionPerformed(event);
            }
        });
        gbc.gridy = 1;
        add(buttonLogCopy, gbc);

        // The down arrow button
        buttonLogDown = new JButton(new ImageIcon(getClass().getResource("resources/bullet_arrow_down.png")));
        buttonLogDown.setBorder(BorderFactory.createEmptyBorder());
        buttonLogDown.setContentAreaFilled(false);
        buttonLogDown.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent event) {
                // buttonLogDownActionPerformed(event);
            }
        });
        gbc.gridy = 2;
        add(buttonLogDown, gbc);
    }

    private ImageIcon appendIcons[] = { new ImageIcon(getClass().getResource("resources/brick.png")),
            new ImageIcon(getClass().getResource("resources/brick_add.png")) };

    /*
    * Event listener methods for the components go here.
    */
} 
```

此外，这是实例化 的主`JFrame`类`LogPanel`，尽管没有注释。还包括 JAR 的下载链接。

[关联](https://privatepaste.com/5293d3d238)

* * *

我正在使用`JPanel.setMinimumSize()`，所以我可以在`JTextArea`不使用`JScrollPane`. *我认为显示不一致与此有关。*如果我确实使用 a `JScrollPane`，它会完全弄乱面板布局，所以我宁愿远离。

提前致谢。

* * *

**编辑1：**

如果我将 L&F 更改为默认值或系统 L&F，我会遇到与朋友相同的问题；因此，这很可能与 Nimbus 本身有关。

* * *

**编辑2：**

> 事实证明，我使用的 JDK6 和 JDK7 之间的 Nimbus 代码存在差异。从那以后，我已经更新并替换了错误的代码`setPreferredSize()`——它现在很好用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T23:29:03.243

我找到了一个解决方案：

> 事实证明，我使用的 JDK6 和 JDK7 之间的 Nimbus 代码存在差异。从那以后，我已经更新并替换了错误的代码`setPreferredSize()`——它现在很好用。

# php - 在网站上显示 SQL 表数据

> ID：11488775
> 
> 赞同：0
> 
> 时间：2012-07-15T01:49:40.100
> 
> 标签：php, mysql

所以我以为我把这件事搞砸了，它确保让我知道我又搞砸了。

```
<?php
        $username="root";
        $password="**********";
        $database="website";
        $server="localhost";
        $connect=mysql_connect($server,$username,$password);
        ;
        @mysql_select_db($database) or die( "Unable to select database");
        mysql_select_db($database, $connect) or die ("Error selecting specified database on this server: ".mysql_error());
        $cdquery="SELECT content FROM homepage";
        $cdresult=mysql_query($cdquery) or die ("Query to get data from the first table failed: ".mysql_error());
        echo "<p>$cdresult</p>";

        mysql_close();
        ?> 
```

是我目前拥有的代码来显示来自我的表格网站和列数据的信息。我不确定 Resource id #4 是什么，但它显示的是自身而不是内容。有人知道我做错了什么，因此它不会显示我在内容中拥有的信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T01:53:01.047

您需要[通过`mysql_fetch_assoc()`](http://php.net/manual/en/function.mysql-fetch-assoc.php). 查询成功后返回结果资源，数据库连接使用该资源来后台处理结果。在获取行之前，它本身不包含行数据：

```
$cdresult = mysql_query($cdquery) or die ("Query to get data from the first table failed: ".mysql_error());
while ($row = mysql_fetch_array($cdresult)) {
  // The column is an array key in $row
  // Wrapped in htmlspecialchars() to escape for HTML output
  echo "<p>" . htmlspecialchars($row['cdresult']) . "</p>";
} 
```

旧`mysql_*()`函数已开始弃用，最终将从 PHP 中删除。建议您花一些时间学习支持准备好的语句的更现代的 API 之一，例如 MySQLi 或 PDO，而不是花太多时间学习这些`mysql_*()`函数。

还有一些提示：

您有两次调用`mysql_select_db()`. 你只需要其中之一。避免使用`@`错误抑制运算符，因为它隐藏了您在开发代码时需要能够看到的错误信息。

```
// Don't do this. Just do the next one
// @mysql_select_db($database) or die( "Unable to select database");
mysql_select_db($database, $connect) or die ("Error selecting specified database on this server: ".mysql_error()); 
```

# php - 如何在php中同步来自客户端的多个请求

> ID：11488791
> 
> 赞同：0
> 
> 时间：2012-07-15T01:53:27.070
> 
> 标签：php, multithreading, synchronization, xmlhttprequest, webserver

我将 xampp 与 apache php 服务器一起使用

我将请求 A 发送到服务器并使其保持忙碌。然后在服务器完成执行之前我发送另一个立即请求B。但是服务器在完成A请求的先前执行之前不会响应B，让B在客户端继续等待。所以我希望服务器不会自动对来自客户端的请求进行多线程处理。我的问题是

1.  就是它

    客户端是为了在发送下一个请求之前接收上一个请求的响应？我尝试将 ajax 设置为同步，但它仍然无法正常工作

    或者

    我们可以使用php多线程特性来处理它

2.  如果有办法，我们可以在请求之间共享资源吗？假设 req A 将一些值放入 $_SESSION 并且 req B 想要读取它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:14:56.397

确保不要混淆特定 PHP 进程是多线程的与 Web 服务器本身是多线程的。PHP 并不真正支持 PHP 代码中的多线程。但是，服务器是多线程的，可以同时处理多个 PHP 请求。

当您发送请求“A”时，网络服务器将开始在新线程中处理该请求。当请求“B”进来时，服务器将启动另一个新线程来处理它。如果“B”在“A”完成之前启动，那么它们将同时运行，但实际上没有办法同步它们。

如果“A”需要在“B”有意义之前完成，你真的需要让客户端等到它听到“A”完成，然后发送请求“B”。通常的方法是让“A”请求的“成功”代码发送请求“B”。

如果您希望“B”从“A”设置的会话中读取某些内容，您肯定需要确保“A”在执行“B”之前在客户端完成。

# php - PHP AMQP 消费者：服务器通道错误：404，消息：NOT_FOUND

> ID：11488796
> 
> 赞同：1
> 
> 时间：2012-07-15T01:55:55.967
> 
> 标签：php, rabbitmq

我在 pecl 1.0.3 中使用 amqp 扩展，用 2.7.1 rabbitmq 编译。

我试图让一个基本的消费者/生产者示例正常工作，但我不断收到错误。关于这个扩展的 php 文档很少，而且很多似乎已经过时或错误。

我使用了用户发布的代码，但似乎无法让消费者部分正常工作

联系：

```
function amqp_connection() {
    $amqpConnection = new AMQPConnection();
    $amqpConnection->setLogin("guest");
    $amqpConnection->setPassword("guest");
    $amqpConnection->connect();

    if(!$amqpConnection->isConnected()) {
       die("Cannot connect to the broker, exiting !\n");
    }

    return $amqpConnection;
} 
```

发件人：

```
function amqp_send($text, $routingKey, $exchangeName){
    $amqpConnection = amqp_connection();

    $channel = new AMQPChannel($amqpConnection);
    $exchange = new AMQPExchange($channel);

    $exchange->setName($exchangeName);
    $exchange->setType("fanout");

    if($message = $exchange->publish($text, $routingKey)){
       echo "sent";
    }

    if (!$amqpConnection->disconnect()) {
        throw new Exception("Could not disconnect !");
    }
} 
```

接收者：

```
function amqp_receive($exchangeName, $routingKey, $queueName) {
    $amqpConnection = amqp_connection();

    $channel = new AMQPChannel($amqpConnection);
    $queue = new AMQPQueue($channel);
    $queue->setName($queueName);
    $queue->bind($exchangeName, $routingKey);

    //Grab the info
    //...
} 
```

然后发送它：

```
amqp_send("Abcdefg", "action", "amq.fanout"); 
```

并接收它：

```
amqp_receive("amq.fanout","action","action"); 
```

我一直在运行脚本并指向 amqp 接收问题：

> PHP致命错误：未捕获的异常'AMQPQueueException'与消息'服务器通道错误：404，消息：NOT_FOUND - /home/jamescowhen/test.php:21中的vhost'/'中没有队列'action'

谁能指出我正确的方向？整个示例来自此处的用户注释： [http ://www.php.net/manual/en/amqp.examples.php#109024](http://www.php.net/manual/en/amqp.examples.php#109024)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:46:55.633

该异常似乎是由未声明您的队列引起的（因为错误消息描述了 404 - 未找到队列“操作”）。该示例适用于原始发帖人的原因可能是因为他之前已经声明了队列，而没有意识到他的示例中缺少它。

您可以通过在队列对象上调用 ->declare() 来声明队列。您还必须对交换对象执行此操作，除非您在尝试将队列挂接到它时确定它已经存在。

# magento - Magento 销售水印

> ID：11488797
> 
> 赞同：-1
> 
> 时间：2012-07-15T01:56:36.467
> 
> 标签：magento

由于是 Magento 世界的新手，我对它的编码模式了解有限。

我创建了一个可以正常工作的购物车价格规则。但是现在我想在产品列表页面上显示促销水印图像，使促销产品对客户更加突出。销售期结束时不得显示此销售水印。

我的方法如下

1.  修改购物车价格规则表格，让管理员上传相应的销售水印。然后更新 list.php 以确定规则，然后将销售水印图像添​​加到产品列表中。由于购物车价格规则指定销售日期，我假设到期日规则将变为非活动状态并且图像不会显示。

但是，在我开始为它编码之前，我想知道是否有人有更简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T06:28:48.317

如果产品在打折，这意味着你正在使用特价？？

如果是，那么您可以使用特价并按照这些简单的方法来实现您想要的

[http://www.pauldonnelly.net/magento-display-sale-icon-if-special-price/](http://www.pauldonnelly.net/magento-display-sale-icon-if-special-price/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:46:50.607

这种扩展可能会为您节省大量时间。

我已经从他们那里买过很多次了，它们很棒。

[AheadWorks 促销扩展（附属链接）](http://ecommerce.go2cloud.org/aff_c?offer_id=1&aff_id=1200&source=stackoverflow&url=http://ecommerce.aheadworks.com/magento-extensions/on-sale.html)

# opencv - 为 64 位 (Mac) 编译 OpenCV 源代码

> ID：11488799
> 
> 赞同：1
> 
> 时间：2012-07-15T01:56:48.010
> 
> 标签：opencv, 64-bit

我在尝试编译 64 位 OpenCV 库时遇到了一些问题。这是我到目前为止所做的：

1.  使用svn获取源代码
2.  在`opencv`我有`mkdir build`然后`cd build`
3.  `cmake -G "Unix Makefiles" -D CMAKE_OSX_ARCHITECTURES=x86_64 -D CMAKE_C_FLAGS=-m64 -D CMAKE_CXX_FLAGS=-m64 ..`

这让我得到了输出（下图），这让我很担心，因为找不到许多包。我已经尝试按照这篇文章[在 OSX Snow Leopard 上构建 EmguCV](https://stackoverflow.com/questions/10342682/building-emgucv-on-osx-snow-leopard)`WITH_CUDA`中的建议禁用该标志，但它似乎没有帮助。

```
-- Extracting svn version, please wait...
-- SVNVERSION:  svn:9029
-- checking for module 'libdc1394-2'
--   package 'libdc1394-2' not found
-- checking for module 'libdc1394'
--   package 'libdc1394' not found
-- checking for module 'libavcodec'
--   package 'libavcodec' not found
-- checking for module 'libavformat'
--   package 'libavformat' not found
-- checking for module 'libavutil'
--   package 'libavutil' not found
-- checking for module 'libswscale'
--   package 'libswscale' not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - not found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named sphinx
-- 
-- General configuration for OpenCV 2.4.9 =====================================
-- Version control:                 svn:9029
-- 
--   Platform:
--     Host:                        Darwin 11.4.0 i386
--     CMake:                       2.8.8
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               Release
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++
--     C++ flags (Release):         -m64   -O3 -DNDEBUG 
--     C++ flags (Debug):           -m64   -g 
--     C Compiler:                  /usr/bin/gcc
--     C flags (Release):           -m64   -O3 -DNDEBUG 
--     C flags (Debug):             -m64   -g 
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         NO
-- 
--   OpenCV modules:
--     To be built:                 core imgproc flann highgui features2d calib3d ml video objdetect contrib nonfree legacy gpu photo python stitching ts videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera java
-- 
--   GUI: 
--     QT 4.x:                      NO
--     Cocoa:                       YES
--     OpenGL support:              NO
-- 
--   Media I/O: 
--     ZLib:                        build (ver 1.2.6)
--     JPEG:                        build (ver 62)
--     PNG:                         build (ver 1.5.9)
--     TIFF:                        build (ver 42 - 4.0.1)
--     JPEG 2000:                   build (ver 1.900.1)
--     OpenEXR:                     NO
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  NO
--     FFMPEG:                      NO
--       codec:                     NO
--       format:                    NO
--       util:                      NO
--       swscale:                   NO
--       gentoo-style:              NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     QuickTime:                   NO
--     QTKit:                       YES
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use TBB:                     NO
--     Use Cuda:                    NO
--     Use Eigen:                   NO
--     Use Clp:                     NO
-- 
--   Python:
--     Interpreter:                 /usr/bin/python (ver 2.7.1)
--     Libraries:                   /usr/lib/libpython2.7.dylib (ver 2.7.1)
--     numpy:                       /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/core/include (ver 1.5.1)
--     packages path:               lib/python2.7/site-packages
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           /usr/texbin/pdflatex
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     Examples:                    NO
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/build
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/build 
```

如果我然后尝试`make -j8`我得到一些像这样开始并持续一段时间的东西：

```
[  0%] [  0%] [  0%] [  1%] [  1%] [  1%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/adler32.c.o
Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/compress.c.o
Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/crc32.c.o
Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngerror.c.o
Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/png.c.o
Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/deflate.c.o
[  1%] [  1%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_cm.c.o
Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcapimin.c.o
In file included from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/pngerror.c:19:
/Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/pngpriv.h:45:20: error: stdlib.h: No such file or directory
In file included from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/pngpriv.h:127,
                 from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/pngerror.c:19:
/Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/png.h:442:26: error: setjmp.h: No such file or directory
/Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/png.h:450:24: error: time.h: No such file or directory
In file included from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/png.c:14:
/Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/pngpriv.h:45:20: error: stdlib.h: No such file or directory
In file included from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/pngpriv.h:127,
                 from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/png.c:14:
/Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/png.h:442:26: error: setjmp.h: No such file or directory
/Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/png.h:450:24: error: time.h: No such file or directory
In file included from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/zlib/zlib.h:34,
                 from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/zlib/compress.c:9:
/Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/build/3rdparty/zlib/zconf.h:403:48: error: sys/types.h: No such file or directory 
```

**指示**

1.  [从https://github.com/Itseez/opencv](https://github.com/Itseez/opencv)下载 zip
2.  当你解压缩它时，你应该留下一个名为'opencv-master'的文件夹，cd进去。
3.  mkdir 构建
4.  cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_PYTHON_SUPPORT=ON ..
5.  制作
6.  须藤使安装

# image - matplotlib 中 imshow 的非线性轴

> ID：11488800
> 
> 赞同：20
> 
> 时间：2012-07-15T01:56:51.747
> 
> 标签：image, plot, matplotlib, logarithm

我在对数间隔轴上生成 2D 数组（例如，x 像素坐标是使用`logspace(log10(0.95), log10(2.08), n)`.

我想使用普通的旧 imshow 以原始分辨率和缩放显示图像（我不需要[拉伸它](https://stackoverflow.com/q/1679126/125507)；数据本身已经对数缩放），但我想添加刻度线、标签、线对数轴上的正确位置。我该怎么做呢？

理想情况下，我可以只使用命令行`axvline(1.5)`，并且该行将位于正确的位置（距左侧 58%），但如果唯一的方法是在对数坐标和图像坐标之间手动转换，那也没关系。

对于线性轴，`extents=`在对 imshow 的调用中使用可以满足我的要求，但我看不到用对数轴做同样事情的方法。

例子：

```
from matplotlib.colors import LogNorm

x = logspace(log10(10), log10(1000), 5)
imshow(vstack((x,x)), extent=[10, 1000, 0, 100], cmap='gray', norm=LogNorm(), interpolation='nearest')
axvline(100, color='red') 
```

这个例子不起作用，因为extent=只适用于线性刻度，所以当你在100处做axvline时，它不会出现在中心。我希望 x 轴显示 10、100、1000，并`axvline(100)`在 100 点的中心放置一条线，而像素保持等距。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-16T17:17:33.253

在我看来，最好使用`pcolor`常规（未转换的）x 和 y 值。`pcolor`为您提供更大的灵活性，并且常规的 x 和 y 轴不那么令人困惑。

```
import pylab as plt
import numpy as np
from matplotlib.colors import LogNorm
from matplotlib.ticker import LogFormatterMathtext

x=np.logspace(1, 3, 6)
y=np.logspace(0, 2,3)
X,Y=np.meshgrid(x,y)
z = np.logspace(np.log10(10), np.log10(1000), 5)
Z=np.vstack((z,z))

im = plt.pcolor(X,Y,Z, cmap='gray', norm=LogNorm())
plt.axvline(100, color='red')

plt.xscale('log')
plt.yscale('log')

plt.colorbar(im, orientation='horizontal',format=LogFormatterMathtext())
plt.show() 
```

![在此处输入图像描述](../Images/d12f1419ec63fc0ad656e5048c322448.png)

由于`pcolor`速度较慢，因此使用更快的解决方案`pcolormesh`。

```
im = plt.pcolormesh(X,Y,Z, cmap='gray', norm=LogNorm()) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-18T14:13:53.847

实际上，它工作正常。我很困惑。

以前我收到关于“非线性轴不支持图像”的错误，这就是我问这个问题的原因。但是现在当我尝试它时，它可以工作：

```
import matplotlib.pyplot as plt
import numpy as np

x = np.logspace(1, 3, 5)
y = np.linspace(0, 2, 3)
z = np.linspace(0, 1, 4)
Z = np.vstack((z, z))

plt.imshow(Z, extent=[10, 1000, 0, 1], cmap='gray')
plt.xscale('log')

plt.axvline(100, color='red')

plt.show() 
```

这比`pcolor()`和更好，`pcolormesh()`因为

1.  它不是非常慢而且
2.  当图像未以原始分辨率显示时，可以很好地插值而不会产生误导性伪影。

# bash - Bash：随机“？” 附加到开始屏幕的名称

> ID：11488803
> 
> 赞同：0
> 
> 时间：2012-07-15T01:57:36.563
> 
> 标签：bash

我目前在 bash 中有一个 case 语句，如下所示：

```
restart)
    if kill -0 PID; then
        while kill -0 PID; do
            //exit script
        done
        screen -dmS screen1^M
        screen -S screen1 -p 0 -X stuff '//code here'^M
    else
        //other stuff
    fi
    ;; 
```

当我使用这个脚本时，屏幕本来应该以启动方式`screen1`启动`screen1?`。这是什么原因，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T02:00:38.007

在某些行的末尾有额外的[回车符](http://en.wikipedia.org/wiki/Carriage_return)（那些有趣的 s）。`^M`Windows 使用回车后跟换行符 (CRLF) 作为其行结尾，但 Linux 仅使用普通换行符，因此任何无关的回车有时会被解释为常规字符，尤其是在您的情况下。

要解决此问题，请手动从脚本中删除回车，或使用诸如[`dos2unix(1)`](http://linux.die.net/man/1/dos2unix)转换行尾之类的程序（许多其他程序也可以这样做）。

# uitableview - 在不同部分设置不同的行高（故事板）

> ID：11488805
> 
> 赞同：4
> 
> 时间：2012-07-15T01:57:45.903
> 
> 标签：uitableview, height, cgfloat

我有一个表格视图，其中包含我在情节提要中设计的多个原型单元格，但我遇到了高度问题，因为我的第一个单元格与第二个单元格不同，依此类推......我每个单元格都有不同的标识符，并且因为我在情节提要中设计了它们，所以我知道它们是高度的。我的代码中有这个，但它不起作用，有谁知道如何修复它？：

```
-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

UITableViewCell *cell = [[UITableViewCell alloc]init];
switch (indexPath.section) 

{
    case 1:

        cell = [tableView dequeueReusableCellWithIdentifier:@"cell1"];
        return 743.0f; 

        break;

    case 2:

        cell = [tableView dequeueReusableCellWithIdentifier:@"cell2"];
        return 300.0f;

} 
```

}

谢谢你的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T22:56:36.380

看起来您正在尝试将此方法用于其并非设计用于的目的......您将要覆盖该方法：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    switch (indexPath.section)
        case 1:
           static NSString *CellIdentifier = @"cell1";
           break;
        case 2:
           static NSString *CellIdentifier = @"cell2";
           break;

    UITableViewCell *cell = [tableView 
      dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    return cell;
} 
```

仅更改 heightForRowAtIndexPath 中的行高：

```
-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

switch (indexPath.section) 

{
    case 1:

        return 743.0f; 

        break; //technically never used

    case 2:

        return 300.0f;

} 
```

查看本教程 [http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)它是一个很好的资源

# cmake - CMake安装动态生成的文件列表

> ID：11488810
> 
> 赞同：3
> 
> 时间：2012-07-15T02:00:29.373
> 
> 标签：cmake

我有一个 cmake 项目，在安装时它将调用一个 python 脚本，该脚本将为我输出一个我还必须安装的文件列表。

我使用此输出并将其传递给 FILE(INSTALL ${output}) 但此命令没有将文件放在正确的位置。

如何安装作为命令输出的文件列表？（请注意，命令取决于构建的目标）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T00:27:43.220

制作一个生成此列表的目标，以便在构建步骤中获取它。将文件列表写入某处，用于`install(SCRIPT <file>)`运行 CMake 脚本，该脚本使用该文件将文件复制/修改/任何文件到正确的位置。脚本本身可能需要`configure_file`用于获取安装目录和生成的文件路径正确（我没有看到将参数传递给运行脚本的 cmake 命令的方法）。

# opencv - opencv 2.4 SIFT 编译错误

> ID：11488813
> 
> 赞同：4
> 
> 时间：2012-07-15T02:00:57.463
> 
> 标签：opencv, compiler-errors, sift

openCV 已经用新版本改变了特征检测器/描述符（和往常一样）。我已经找到了，我需要添加

```
#include "opencv2/nonfree/nonfree.hpp"
#include "opencv2/nonfree/features2d.hpp" 
```

但是，它仍然不起作用。我得到的错误是：

```
error: ‘cv::SIFT::DetectorParams’ has not been declare 
```

我使用标准命令进行构建

```
gcc `pkg-config --cflags --libs opencv` -o descriptorExtractor main.cpp 
```

并且所有库等都应该正确链接

```
pkg-config --cflags --libs opencv

-I/opt/ros/fuerte/include/opencv -I/opt/ros/fuerte/include  -L/opt/ros/fuerte/lib -lopencv_calib3d -lopencv_contrib -lopencv_core -lopencv_features2d -lopencv_flann -lopencv_gpu -lopencv_highgui -lopencv_imgproc -lopencv_legacy -lopencv_ml -lopencv_nonfree -lopencv_objdetect -lopencv_photo -lopencv_stitching -lopencv_ts -lopencv_video -lopencv_videostab 
```

openCV又怎么了？请不要问我为什么我需要来自 openCV 而不是来自其他软件或二进制文件的 SIFT，我只需要它......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-14T18:02:53.793

我记不太清了……但我认为问题在于我没有使用

```
cv::initModule_nonfree(); 
```

# objective-c - 用于高级网络使用的最佳 iOS 框架？

> ID：11488816
> 
> 赞同：4
> 
> 时间：2012-07-15T02:01:31.037
> 
> 标签：objective-c, networking, ios5

我需要一个可以发布原始数据（例如 0x01）的网络框架。或我需要发布到服务器的任何原始数据。不仅仅是一个 HTTP 请求。我似乎找不到任何这样的网络框架。另外，如果目前没有。我将如何编写套接字？我似乎无法理解这一点。这就是为什么我正在寻找一个现有的框架。谢谢你的帮助。我曾尝试使用套接字，但无法转换 CFArrayRef。我尝试了很多东西，但是，每次我测试它都会崩溃。所以，我没有选择，只能使用预构建的框架。

请注意，我不想只做如下请求：

```
POST / HTTP/1.1
Host: localhost
Content-Length: 4

0x01 
```

不，我想发送 RAW 数据，以下将通过套接字发送到远程服务器。

```
0x01 
```

但是，这将不是可见的原始文本，它将被转换为数据字符串然后发送。我知道如何转换我需要做的大部分事情，它发送和接收我需要框架的响应或可以工作的东西。任何在线教程或关于如何做类似事情的示例，我可以修改以适应我的需要，将不胜感激。

如何将原始数据发送到套接字？我在哪里可以找到这样的框架？你能提供我可以修改以满足我的需要的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:05:30.507

您可以使用[原始套接字](https://discussions.apple.com/message/7815634?messageID=7815634)或[CFStream API](https://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Streams/Articles/NetworkStreams.html)。我推荐后者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T02:33:56.100

最好的框架是[CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket/)。虽然它允许在套接字上发送任意数据，但它还提供了对许多繁忙的套接字管理工作的非常有用的抽象。尤其是替换旧的基于 RunLoop 的代码的 GCD 版本。

我在这个堆栈上构建了几个低级协议。我强烈推荐它。

# ios - iOS6命令执行

> ID：11488818
> 
> 赞同：0
> 
> 时间：2012-07-15T02:02:04.203
> 
> 标签：ios, ios6

由于某种原因，下面的代码在 iOS6 中执行了两次。我对较低版本的 iOS 没有任何问题。如果我运行我的应用程序的精简版，输出是

```
Lite Version
Lite Version 
```

知道如何解决这个问题..

谢谢..

```
#ifdef LITE_VERSION
    NSLog(@"Lite Version");
#else
    NSLog(@"Pro Version");

#endif 
```

# r - 为什么使用 c() 来定义向量？

> ID：11488820
> 
> 赞同：76
> 
> 时间：2012-07-15T02:03:01.190
> 
> 标签：r

`c`在英文中不是vector的缩写，那为什么`c()`在R中定义一个vector呢？

```
v1<- c(1,2,3,4,5) 
```

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-07-15T02:14:43.320

这是一个很好的问题，但答案有点奇怪。信不信由你，“c”代表“组合”，这是它通常所做的：

```
> c(c(1, 2), c(3))
[1] 1 2 3 
```

但碰巧在 R 中，数字只是长度为 1 的向量：

```
> 1
[1] 1 
```

因此，当您使用`c()`创建向量时，您实际上正在做的是将一系列长度为 1 的向量组合在一起。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-15T02:59:51.673

欧文的回答很完美，但要注意的另一件事是 c() 可以连接的不仅仅是向量。

```
> x = list(a = rnorm(5), b = rnorm(7))
> y = list(j = rpois(3, 5), k = rpois(4, 2), l = rbinom(9, 1, .43))
> foo = c(x,y)
> foo
$a
[1]  0.280503895 -0.853393705  0.323137905  1.232253725 -0.007638861

$b
[1] -2.0880857  0.2553389  0.9434817 -1.2318130 -0.7011867  0.3931802 -1.6820880

$j
[1]  5 12  5

$k
[1] 3 1 2 1

$l
[1] 1 0 0 1 0 0 1 1 0

> class(foo)
[1] "list" 
```

第二个例子：

```
> x = 1:10
> y = 3*x+rnorm(length(x))
> z = lm(y ~ x)
> is.vector(z)
[1] FALSE
> foo = c(x, z)
> foo
[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

[[4]]
[1] 4

[[5]]
[1] 5

[[6]]
[1] 6

[[7]]
[1] 7

[[8]]
[1] 8

[[9]]
[1] 9

[[10]]
[1] 10

$coefficients
(Intercept)           x 
   0.814087    2.813492 

$residuals
         1          2          3          4          5          6          7 
-0.2477695 -0.3375283 -0.1475338  0.5962695  0.5670256 -0.5226752  0.6265995 
         8          9         10 
 0.1017986 -0.4425523 -0.1936342 

$effects
 (Intercept)            x                                                     
-51.50810097  25.55480795  -0.05371226   0.66592081   0.61250676  -0.50136423 

  0.62374031   0.07476915  -0.49375185  -0.26900403 

$rank
[1] 2

$fitted.values
        1         2         3         4         5         6         7         8 
 3.627579  6.441071  9.254562 12.068054 14.881546 17.695038 20.508529 23.322021 
        9        10 
26.135513 28.949005 

$assign
[1] 0 1

$qr
$qr
   (Intercept)            x
1   -3.1622777 -17.39252713
2    0.3162278   9.08295106
3    0.3162278   0.15621147
4    0.3162278   0.04611510
5    0.3162278  -0.06398128
6    0.3162278  -0.17407766
7    0.3162278  -0.28417403
8    0.3162278  -0.39427041
9    0.3162278  -0.50436679
10   0.3162278  -0.61446316
attr(,"assign")
[1] 0 1

$qraux
[1] 1.316228 1.266308

$pivot
[1] 1 2

$tol
[1] 1e-07

$rank
[1] 2

attr(,"class")
[1] "qr"

$df.residual
[1] 8

$xlevels
named list()

$call
lm(formula = y ~ x)

$terms
y ~ x
attr(,"variables")
list(y, x)
attr(,"factors")
  x
y 0
x 1
attr(,"term.labels")
[1] "x"
attr(,"order")
[1] 1
attr(,"intercept")
[1] 1
attr(,"response")
[1] 1
attr(,".Environment")
<environment: R_GlobalEnv>
attr(,"predvars")
list(y, x)
attr(,"dataClasses")
        y         x 
"numeric" "numeric" 

$model
           y  x
1   3.379809  1
2   6.103542  2
3   9.107029  3
4  12.664324  4
5  15.448571  5
6  17.172362  6
7  21.135129  7
8  23.423820  8
9  25.692961  9
10 28.755370 10 
```

# objective-c - iOS 从 applicationDidFinishLaunching 升级到 didFinishLaunchingWithOptions

> ID：11488824
> 
> 赞同：1
> 
> 时间：2012-07-15T02:03:45.887
> 
> 标签：objective-c, ios, cocoa-touch

我正在重做一些旧代码（使用 Cocos2d v0.99），它仍在使用`applicationDidFinishLaunching`，想知道在切换到它时是否有什么我应该关注的`didFinishLaunchingWithOptions`

我所做的只是`return YES`在方法的底部添加一个，然后我换掉了这个： `-(void)applicationDidFinishLaunching:(UIApplication*)application`

为了这： `-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

一切似乎都运行良好，但只是想知道是否有任何我需要检查或调查的内容，可能稍后会弹出。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T02:07:20.283

不，你应该没事的。除了返回 0 之外，我使用我的一些应用程序执行此操作。但是这样做不应该有任何副作用。

# c++ - c++临时变量解释

> ID：11488827
> 
> 赞同：0
> 
> 时间：2012-07-15T02:04:54.327
> 
> 标签：c++, visual-c++

我已经搜索了临时变量是什么意思，但我无法理解。我已经完成了没有临时变量的 if-else 结构，现在我正在尝试执行 if-else 结构和临时变量。我找不到区别。

问题是

1.  编写一个程序，读取三个整数（a、b 和 c）并使用 if else 结构和临时变量打印最大的值。
2.  if else 没有临时变量的结构。

我已经完成了第一个问题。

```
#include <iostream>
#include <conio.h>
using namespace std;
int main()
{
int a,b,c;

cout<<"a : ";
cin>>a;
cout<<"b : ";
cin>>b;
cout<<"c : ";
cin>>c;

if(a>b && a>c)
{
    cout<<"largest : "<<a;
}else{
    if(b>a && b>c)
    {
        cout<<"largest : "<<b;
    }else{
        if(c>a && c>b)
        {
            cout<<"largest : "<<a;
        }else{
            cout<<"error!";
        }
    }
}

getch();
return 0;
} 
```

但是对于第二个问题是这样的吗？

```
#include <iostream>
#include <conio.h>
using namespace std;
int main()
{
int a,b,c;
int max;

cout<<"a : ";
cin>>a;
cout<<"b : ";
cin>>b;
cout<<"c : ";
cin>>c;

if(a>b && a>c)
{
    max=a;
    cout<<"largest : "<<max;
}else{
    if(b>a && b>c)
    {
        max=b;
        cout<<"largest : "<<max;
    }else{
        if(c>a && c>b)
        {
            max=c;
            cout<<"largest : "<<max;
        }else{
            cout<<"error!";
        }
    }
}

getch();
return 0;
} 
```

我只是想确认一下，因为我不完全理解临时变量是什么意思。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T02:07:37.243

“临时”的确切含义可能会有所不同，但在这种情况下，它只是表示一个变量，而不是用于保存输入的变量。我认为更好的术语可能是“中级”。

当您只试图找到三个值中的最大值时，有点难以看出使用中间变量的优势，但想象一下，如果您试图找到 100 个值中的最大值。如果没有中间变量，你会怎么做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T02:20:41.097

实际上，您已经完成了第二个问题作为您的第一个结果。第二个版本（回答第一个问题）应该更像这样：

```
int max;
if (a > b && a > c) max = a;
else if (b > a && b > c) max = b;
else max = c;
cout << max; 
```

“临时”变量的目的是避免像第一个示例那样重复所有打印语句。

我不喜欢临时使用这个词。临时变量在 C++ 中具有特殊含义，与您使用某些代码结构时编译器隐式创建的变量完全相关。从这个意义上说，“max”不是一个临时变量。您的讲师可能在使用该术语时很松散。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T20:56:51.703

也许练习的目的是证明为什么临时变量是好的？如果是这样，也许这就是提问者想要的：

```
int a, b, c;

...

// No temporary variable - your code is the simplest possible
if(a>b && a>c)
{
    cout<<"largest : "<<a;
}else{
    if(b>a && b>c)
    {
        cout<<"largest : "<<b;
    }else{
        if(c>a && c>b)
        {
            cout<<"largest : "<<a;
        }else{
            cout<<"error!";
        }
    }
}

// May use a temporary variable - code can be simplified
int max = a;
if (max < b)
    max = b;
if (max < c)
    max = c;
cout<<"largest : "<<max; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-28T03:08:49.383

实际上，您引用的“临时”变量不是真正的临时变量。在编译器看来，它只是一个中间变量。用户无法访问真正的临时文件，但编译器无法访问。

# c++ - 错误的架构 C++？Xcode 4.3

> ID：11488828
> 
> 赞同：0
> 
> 时间：2012-07-15T02:04:56.197
> 
> 标签：c++, xcode, architecture

我正在我的 Mac 上构建一个基于 Windows 的项目。我已经修复了很多错误，但是当我去编译时，它给出了以下错误：

```
 Undefined symbols for architecture x86_64:
  "Timer::reset()", referenced from:
      Timer::Timer() in main.o
  "Log::Log()", referenced from:
      __static_initialization_and_destruction_0(int, int)in main.o
  "Log::~Log()", referenced from:
      ___tcf_1 in main.o
  "Render::initSDL(int, int, int)", referenced from:
      init()    in main.o
  "Log::writeError(char*, ...)", referenced from:
      init()    in main.o
      _SDL_main in main.o
  "EntityManager::init(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, int)", referenced from:
      init()    in main.o
  "EntityManager::loadAssets()", referenced from:
      init()    in main.o
  "Level::getBlockCount()", referenced from:
      EntityManager::getBlockCount()       in main.o
  "Level::getBombCount()", referenced from:
      EntityManager::getBombCount()       in main.o
  "Level::getItemCount()", referenced from:
      EntityManager::getItemCount()       in main.o
  "Render::renderElement(int, int, SDL_Surface*, SDL_Rect*)", referenced from:
      renderScene()     in main.o
  "EntityManager::getElement(int, ElementType)", referenced from:
      renderScene()     in main.o
  "Render::finishRender()", referenced from:
      renderScene()     in main.o
  "EntityManager::update()", referenced from:
      _SDL_main in main.o
  "EntityManager::interpolate(double)", referenced from:
      _SDL_main in main.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我很好奇为什么它只引用了几个函数？这些功能是否包含非 Mac 兼容的内容？

例如：

```
int Level::getItemCount()
{
    return itemVec.size();
} 
```

itemVec 是一个向量，只是为了清楚。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T03:51:36.427

看起来您没有链接到 SDL 框架或库（但是它是打包的）。

在 Xcode 中，单击您的项目（文件树视图的顶部），然后单击您的 Target。然后单击摘要选项卡。这就是您要添加 SDL 框架的地方。

（如果它以 .lib 的形式出现，则需要向链接器添加一个额外的标志，例如“-lsdl”）。

与 SDL 链接应该处理您未解决的外部问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T03:40:59.243

如果遇到链接器错误，则意味着编译器可以找到**声明**，但链接器找不到**定义**

我想你已经知道了，但以防万一：

对于一个方法，声明只是它的签名，例如：

```
class foo 
{
    public:
        void bar(); 
} 
```

那是方法“void Foo::bar()”的声明，它进入头文件（.h，.hpp，...）

现在这个方法的定义也包含了主体。它必须与声明相匹配。同样的例子：

```
void Foo::bar()
{
std::cout << "Hello, world !" << std::endl;
} 
```

那是方法“void Foo::bar()”的定义，它（通常）进入源文件（.cpp，.cxx，...）

在您的情况下，编译器找到了声明，但链接器没有找到定义。因此，您必须找到 Timer::reset() 的定义位置，并检查该位置是否可用于链接器。

最典型的原因是 Timer::reset() 是在 cpp 文件中定义的，并且该文件未包含在您的 xcode 项目中（别担心，如果您没有良好的构建配置工具，例如 Premake、Cmake 或其他...）

在这种情况下，将声明符号，因为您的代码中有某个地方 #include "timer.h" 或类似的东西，但未定义，因为匹配的 cpp 未包含在您的项目中。它（可能）存在于您的硬盘上，但未在您的项目中引用。

要解决这个问题：

1.  查找 Timer::reset 的定义位置
2.  如果它没有在任何地方定义，那么你就发现了你的问题。如果它被调用，它必须被定义
3.  如果已定义，请检查 cpp 是否包含在您的项目中，**与 main.cpp 位于同一模块中**

您提到它仅针对特定功能发生。我可能会补充一点，如果从未调用过函数，您将不会收到错误消息。您是否只有在 main.cpp 中实际调用的函数才会收到此错误消息？

更多细节 ：

据我所知（我可能错了，因为这不是我通常遇到的情况）编译器一次处理一个文件，声明但未定义的东西是完全合法的（毕竟它可以在另一个文件中定义)**在编译阶段**

链接器将所有文件放在一起，因此如果使用了符号（在您的情况下称为）并且未定义，他肯定会抱怨。

高温高压

# oracle11g - 从 oracle 11g 存储过程调用部署在 JbossAS7.1 上的 EJB3

> ID：11488834
> 
> 赞同：0
> 
> 时间：2012-07-15T02:05:58.700
> 
> 标签：oracle11g, ejb-3.0, jboss7.x, jdk1.6, jdk1.5

作为我们应用程序的一部分，我们需要从 Oracle 11g 存储过程调用 EJB3 SLSB 方法。

EJB3 应用程序在 JbossAS7.1 上运行，JbossAS7.1 支持使用其远程 API 远程查找 EJB。Jboss 客户端 7.1 jar 与 oracle 11G 中支持的 Jdk1.5 VM 不兼容。

据我所知，Oracle 11G VM 支持无法升级，还有其他方法可以完成这项工作吗？

我们如何从 Oracle 11g 存储过程访问 EJB3 部署的 JBossAs7.1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:33:21.803

经过一些研究，我发现无法升级 Oracle 使用的内部 JVM。

所以我们使用 apache HttpCommons 来调用一个 Spring servlet，它执行 EJB3 服务调用。

# memory - 如何告诉 kmalloc 使用大 (>2M) 页面？

> ID：11488836
> 
> 赞同：2
> 
> 时间：2012-07-14T19:30:23.103
> 
> 标签：memory, pager, opensuse, kmalloc

我正在编写一个设备驱动程序来为 DMA 分配一个大缓冲区。我的系统正在使用（或者我相信）4k 页面，我希望它使用更大的页面，即至少 2M 页面。

我怎样才能：

*   在系统中启用大页面（或检查它们是否已启用）？
*   指定当前`kmalloc`应该使用大页面？

# python - 使用 django 的多个应用程序

> ID：11488838
> 
> 赞同：25
> 
> 时间：2012-07-15T02:06:37.510
> 
> 标签：python, django, frameworks

我正在研究 Django 框架，阅读文档，但没有找到关于如何在同一个项目上创建多个应用程序的参考资料，其中每个应用程序都有多个应用程序。例如，应用程序博客，应用程序用户，评论，帖子，......，实施和任务应用程序客户端，用户，附件......我应该怎么做？

```
localhost
localhost/blog/ (posts, user, comment, ...)
localhost/tasks/ (task, user, attachment, ...)

<my project>
-- manage.py
-- <project name>
-- -- blog
-- -- -- posts
-- -- -- -- views.py
-- -- -- -- urls.py
-- -- -- -- models.py
...
-- -- tasks
-- -- -- attachments
-- -- -- -- views.py
-- -- -- -- urls.py
-- -- -- -- models.py
... 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-15T12:35:10.447

每个应用程序的文件夹中都有这些：

*   视图.py
*   模型.py
*   其他选项（admin.py ...）

所以你有了 ：

```
Project
-- manage.py
-- Project
-- -- views.py
-- -- models.py
-- -- others
-- -- APP1
-- -- -- views.py
-- -- -- models.py
-- -- -- others
-- -- APP2
-- -- -- views.py
-- -- -- models.py
-- -- -- others
-- -- APPX
-- -- -- views.py
-- -- -- models.py
-- -- -- others 
```

该实用程序是功能之间的区别（如果您有通知应用程序和通知模型，请调用 Notification.models.notification）。

模型是对象的架构。因此，您将调用例如 User.username 或 Task.name。Django 在数据库中自动创建表。

Django 的另一个工具：您可以使用管理视图（可以编辑、创建、编辑使用您的模型的对象）或更改此界面（查看[该页面](https://docs.djangoproject.com/en/4.0/howto/overriding-templates/)）

如果您愿意，您可以创建一个识别系统并创建表单，您可以使用自己的管理系统。

用你的例子：

```
<my project>
-- manage.py
-- <project name>
-- -- urls.py
-- -- models.py <--- User model exists in Django and here you can add informations to the defaut model it is in this file because I suppose it will be used in all your project.
-- -- views.py

-- -- blog    <--- It's an app.
-- -- -- -- views.py 
-- -- -- -- urls.py
-- -- -- -- models.py <--- Posts, Comments are models for the blog, so you explain them here.

-- -- tasks   <--- Another app.
-- -- -- attachments
-- -- -- -- views.py
-- -- -- -- urls.py
-- -- -- -- models.py  <--- Task model for exemple 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-15T09:16:11.140

关于 django 你应该了解的事情：

1.  URL 映射与文件系统或应用程序代码无关。这意味着您的 URL 与您的代码没有一对一的关系。您可以有多个 URL 指向同一段代码（指向同一视图）。例如，这与 PHP 不同，其中 URL 映射到文件系统。

2.  应用程序不是“小部件”或“portlet”。应用程序只是一个 python 模块，其中包含一些文件（`views.py`和`models.py`）`__init__.py`；您可以拥有任意数量的应用程序。您还可以拥有使用 URL 无法访问的应用程序——它们只是为了支持其他应用程序；并且您的应用程序也不必与 URL 具有相同的名称。

所以记住这一点......你可以创建一个应用程序，调用它`www`，并在它的内部`views.py`，定义这些非常有创意的命名方法：

```
def blog(request):
   pass

def tasks(request):
   pass 
```

现在在您的 中`urls.py`，您可以拥有：

```
url(r'^blog/$','www.views.blog',name='blog-index'),
url(r'^blog/posts/$','www.views.blog',name='blog-posts',kwargs={'view_posts': True}),
url(r'^tasks/$','www.views.tasks',name='task-index'),
url(r'^tasks/attachments/$','www.views.tasks',name='task-attachments'), 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-15T02:57:22.190

您对应用程序是什么感到困惑。应用程序只是相关功能的集合，通常（但不一定）包括模型、视图和模板。

“用户”不是一个应用程序——它是一个模型，但您通常会使用内置的 django.contrib.auth 应用程序来提供用户功能。任何应用程序都可以使用任何其他应用程序的代码，包括模型。您可以在一个应用程序中拥有任意数量的模型。

# javascript - 如何在页面加载时自动启动 jquery 功能，并保持它的用户交互

> ID：11488841
> 
> 赞同：-1
> 
> 时间：2012-07-15T02:07:07.857
> 
> 标签：javascript, jquery, html, css

我在我的页面上有一个使用 Jquery 的 javascript 函数。我想让它在页面加载时自动启动此功能，但用户仍然可以与该功能进行交互。这是一个涉及选择将隐藏和淡入新 div 的链接的功能。我也试图让这种情况自动发生。

```
$(document).ready(function() {

        $('#tablecell1').click((function () {
    var last_image = null;

    return function () {
        if (last_image) {
            $('#tablecell1 .selected').attr('src', last_image).removeClass('selected');
        }

        var $clicked_image = $('img', this);
        last_image = $clicked_image.attr('src');
        $clicked_image.attr('src', 'NewsBarAZ/Article-Nav-Bar2_01.gif').addClass('selected');
        $('#img2').attr('src','NewsBarAZ/Article-Nav-Bar1_02.gif');
        $('#img3').attr('src','NewsBarAZ/Article-Nav-Bar1_03.gif');
        $('#img4').attr('src','NewsBarAZ/Article-Nav-Bar1_04.gif');
        $('#img5').attr('src','NewsBarAZ/Article-Nav-Bar1_05.gif');

    }
})());

    $('#tablecell2').click((function () {
    var last_image = null;

    return function () {
        if (last_image) {
            $('#tablecell2 .selected').attr('src', last_image).removeClass('selected');
        }

        var $clicked_image = $('img', this);
        last_image = $clicked_image.attr('src');
        $clicked_image.attr('src', 'NewsBarAZ/Article-Nav-Bar2_02.gif').addClass('selected');
        $('#img1').attr('src','NewsBarAZ/Article-Nav-Bar1_01.gif');
        $('#img3').attr('src','NewsBarAZ/Article-Nav-Bar1_03.gif');
        $('#img4').attr('src','NewsBarAZ/Article-Nav-Bar1_04.gif');
        $('#img5').attr('src','NewsBarAZ/Article-Nav-Bar1_05.gif');

    }
})());

    $('#tablecell2').click((function () {
    var last_image = null;

    return function () {
        if (last_image) {
            $('#tablecell2 .selected').attr('src', last_image).removeClass('selected');
        }

        var $clicked_image = $('img', this);
        last_image = $clicked_image.attr('src');
        $clicked_image.attr('src', 'NewsBarAZ/Article-Nav-Bar2_02.gif').addClass('selected');
        $('#img1').attr('src','NewsBarAZ/Article-Nav-Bar1_01.gif');
        $('#img3').attr('src','NewsBarAZ/Article-Nav-Bar1_03.gif');
        $('#img4').attr('src','NewsBarAZ/Article-Nav-Bar1_04.gif');
        $('#img5').attr('src','NewsBarAZ/Article-Nav-Bar1_05.gif');

    }
})());

    $('#tablecell3').click((function () {
    var last_image = null;

    return function () {
        if (last_image) {
            $('#tablecell3 .selected').attr('src', last_image).removeClass('selected');
        }

        var $clicked_image = $('img', this);
        last_image = $clicked_image.attr('src');
        $clicked_image.attr('src', 'NewsBarAZ/Article-Nav-Bar2_03.gif').addClass('selected');
        $('#img1').attr('src','NewsBarAZ/Article-Nav-Bar1_01.gif');
        $('#img2').attr('src','NewsBarAZ/Article-Nav-Bar1_02.gif');
        $('#img4').attr('src','NewsBarAZ/Article-Nav-Bar1_04.gif');
        $('#img5').attr('src','NewsBarAZ/Article-Nav-Bar1_05.gif');

    }
})());

    $('#tablecell4').click((function () {
    var last_image = null;

    return function () {
        if (last_image) {
            $('#tablecell4 .selected').attr('src', last_image).removeClass('selected');
        }

        var $clicked_image = $('img', this);
        last_image = $clicked_image.attr('src');
        $clicked_image.attr('src', 'NewsBarAZ/Article-Nav-Bar2_04.gif').addClass('selected');
        $('#img1').attr('src','NewsBarAZ/Article-Nav-Bar1_01.gif');
        $('#img2').attr('src','NewsBarAZ/Article-Nav-Bar1_02.gif');
        $('#img3').attr('src','NewsBarAZ/Article-Nav-Bar1_03.gif');
        $('#img5').attr('src','NewsBarAZ/Article-Nav-Bar1_05.gif');

    }
})());

    $('#tablecell5').click((function () {
    var last_image = null;

    return function () {
        if (last_image) {
            $('#tablecell5 .selected').attr('src', last_image).removeClass('selected');
        }

        var $clicked_image = $('img', this);
        last_image = $clicked_image.attr('src');
        $clicked_image.attr('src', 'NewsBarAZ/Article-Nav-Bar2_05.gif').addClass('selected');
        $('#img1').attr('src','NewsBarAZ/Article-Nav-Bar1_01.gif');
        $('#img2').attr('src','NewsBarAZ/Article-Nav-Bar1_02.gif');
        $('#img3').attr('src','NewsBarAZ/Article-Nav-Bar1_03.gif');
        $('#img4').attr('src','NewsBarAZ/Article-Nav-Bar1_04.gif');

    }
})());

     $('.preview').hide();

  $('#link_1').click(function(){ 
      $('#latest_story_preview1').hide();
       $('#latest_story_preview2').hide();
      $('#latest_story_preview3').hide();
      $('#latest_story_preview4').hide();
      $('#latest_story_main').fadeIn(800);
  });   

  $('#link_2').click(function(){ 
      $('#latest_story_main').hide();
      $('#latest_story_preview2').hide();
      $('#latest_story_preview3').hide();
      $('#latest_story_preview4').hide();
      $('#latest_story_preview1').fadeIn(800);
  });

  $('#link_3').click(function(){ 
      $('#latest_story_main').hide();
      $('#latest_story_preview1').hide();
      $('#latest_story_preview3').hide();
      $('#latest_story_preview4').hide();
      $('#latest_story_preview2').fadeIn(800);
  });

    $('#link_4').click(function(){ 
      $('#latest_story_main').hide();
       $('#latest_story_preview1').hide();
      $('#latest_story_preview2').hide();
      $('#latest_story_preview4').hide();
      $('#latest_story_preview3').fadeIn(800);
  });
    $('#link_5').click(function(){ 
      $('#latest_story_main').hide();
       $('#latest_story_preview1').hide();
      $('#latest_story_preview2').hide();
      $('#latest_story_preview3').hide();
      $('#latest_story_preview4').fadeIn(800);
  });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:12:43.807

您可以使用[.trigger()](http://api.jquery.com/trigger/)触发代码中的任何事件

作为

```
 $('#link_1').trigger('click'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T02:13:28.033

给函数起一个名字，然后在适当的地方用参数调用它。

```
function hideLinkFadeDiv(link, div) {
  link.hide();
  div.fadeIn();
};

$(function() { //Personal Preference Instead of $(document).ready(function() {

  hideLinkFadeDiv($('#foo'), $('#bar'));
  //Runs when the document loads

  $('#foo').on('click', function() { 
    hideLinkFadeDiv($(this), $('#bar'));
    //runs when #foo is clicked
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T02:41:38.617

我保留了您提供的函数的内部工作原理，但您应该考虑使用类而不是 id。

```
// Once the DOM is ready
$(function(){
    tableClick("1", {"2", "3", "4", "5"});
    tableClick("2", {"1", "3", "4", "5"});
    tableClick("3", {"1", "2", "4", "5"});
    tableClick("4", {"1", "2", "3", "5"});
    tableClick("5", {"1", "2", "3", "4"});

    $('.preview').hide();

    linkClick("1", {"1", "2", "3", "4"});
    linkClick("2", {"0", "2", "3", "4"});
    linkClick("3", {"0", "1", "3", "4"});
    linkClick("4", {"0", "1", "2", "4"});
    linkClick("5", {"0", "1", "2", "3"});
});

// tableClick
var tableClick = function(el, order){
    $("#tablecell" + el).click(function(){
        var last_image = null;

        return function () {
            if (last_image) {
                $(this).find(".selected").attr("src", last_image).removeClass("selected");
            }

            var $clicked_image = $("img", this);
            last_image = $clicked_image.attr("src");
            $clicked_image.attr("src", "NewsBarAZ/Article-Nav-Bar2_0" + el +".gif").addClass("selected");
            for (var i = 1; i <= order.length; i++ ){
                $("#img" + order[i]).attr("src","NewsBarAZ/Article-Nav-Bar1_0" + order[i] + ".gif");
            }
        }
    });
};

// linkClick
var linkClick = function(el, hideElements){
    $("#link_" + el).click(function(){
        // hide elements
        for (var i = 0; i < hideElements.length; i++){      
            if (hideElements[i] == "0") $("#latest_story_main").hide();
            else $("#latest_story_preview" + hideElements[i]).hide();
        }

        // show active
        var active = parseInt(el) - 1;

        if (active == 0) active = "main";
        else active = "preview" + active;

        $("#latest_story_" + active).fadeIn(800);
    });
}; 
```

# jquery - Jquery：剥离某些 Wordpress 段落

> ID：11488851
> 
> 赞同：1
> 
> 时间：2012-07-15T02:11:12.147
> 
> 标签：jquery, wordpress, tags, parent

由于 Wordpress 在所有内容上都添加了段落标签，因此我需要在某些条件下去除段落标签。在这种情况下，我希望它们脱离图像。我得到了那部分工作：

```
 $(".scroller img").unwrap(); 
```

但我认为 Wordpress 可能不会永远在图像周围添加段落标签，所以我的代码会中断，而是会剥离父级，这是我不想要的。

我如何对此进行检查，上面写着“如果父标签是图像上的 p，则将其剥离”？

或者如何告诉 Wordpress 不要将段落标签包裹在单独的图像周围也可以。:)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T02:22:23.070

```
$(".scroller p>img").unwrap(); 
```

这将只选择并打开带有 p 父级的 img 标签（在 .scroller 内）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T02:16:38.860

将此用作每个图像的测试

```
 image.parent().get(0).tagName​​​​​ == "P" 
```

它获取父块，获取块中的第一个元素并检查其标记名是否为 P

祝你好运！

# java - Java 反射库，它具有为具有任何构造函数的任何类创建 NewInstance 的功能

> ID：11488861
> 
> 赞同：-1
> 
> 时间：2012-07-15T02:14:20.867
> 
> 标签：java, oop, generics, reflection

我正在寻找一个提供这样的函数的 Java 库， [invokeConstructor](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/Reflector.java#L150)。（不想导入clojure.lang）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T06:33:29.590

apache commons-beanutils：

```
Object args[] = ...;
Class<?> argTypes[] = ...;
Object obj = ConstructorUtils.invokeConstructor(clazz, args, argTypes);
Object obj = ConstructorUtils.invokeExactConstructor(clazz, args, argTypes); 
```

“invokeConstructor”和“invokeExactConstructor”之间的最大区别在于前者会找到一个类型分配兼容的构造函数，而后者只会匹配您提供的确切参数类型。（参见 java.lang.Class.isAssignableFrom）

# jquery - 声明一个不在页面上的变量还错误

> ID：11488871
> 
> 赞同：0
> 
> 时间：2012-07-15T02:16:06.737
> 
> 标签：jquery, ajax

所以我现在有这个代码：

```
$(document).ready(function(){
$window = $(window),
$sidebar = $(".sidebar"),
sidebarTop = $sidebar.position().top,
sidebarHeight = $sidebar.height(),
$footer = $(".footer"),
footerTop = $footer.position().top,    
$sidebar.addClass('fixed');

$window.scroll(function(event) {
    scrollTop = $window.scrollTop(),
    topPosition = Math.max(0, sidebarTop - scrollTop),
    topPosition = Math.min(topPosition, (footerTop - scrollTop) - sidebarHeight);
    $sidebar.css('top', topPosition);
});
}); 
```

这产生了一个**未捕获的类型错误：无法读取 null 的属性“顶部”**

我还是 jQuery 的新手，但我猜这是因为 .sidebar 还没有出现在页面上，它是通过 AJAX 注入的外部 html 文件中的 div。

我在想我需要更改 $(document).ready(function(){ 行，以便当 .sidebar 实际上在页面上时它会抓取变量，但我真的不知道该怎么做。我已经一直在玩 .on() 方法，但还没有运气。

任何帮助将非常感激！

谢谢！

# **编辑：**

所以有了这个更新的代码：

```
$(document).ready(function(){

    $(window).scroll(function(event) {
        var $sidebar = $('.sidebar'),
            sidebarTop = $sidebar.position().top,
            sidebarHeight = $sidebar.height(),
            $footer = $('#footer'),
            footerTop = $footer.position().top,    
            $sidebar.addClass("fixed");

        scrollTop = $(window).scrollTop(),
        topPosition = Math.max(0, sidebarTop - scrollTop),
        topPosition = Math.min(topPosition, (footerTop - scrollTop) - sidebarHeight);
        $sidebar.css('top', topPosition);
});
}); 
```

我现在得到一个**Uncaught SyntaxError: Unexpected Identifier** under the $sidebar.addClass("fixed"); 线。

这意味着 $sidebar 被声明了吗？但它是！？正确的？

任何帮助家伙，这让我发疯！

# **编辑2：**

因此再次更新代码，由于未定义窗口变量而出现错误，因此使其成为全局变量：

```
$(document).ready(function(){
$window = $(window);

$window.scroll(function(event) {
    var $sidebar = $(".sidebar"),
        sidebarTop = $sidebar.position().top,
        sidebarHeight = $sidebar.height(),
        $footer = $("#footer"),
        footerTop = $footer.position().top;    

    $sidebar.addClass('fixed');
    scrollTop = $window.scrollTop(),
    topPosition = Math.max(0, sidebarTop - scrollTop),
    topPosition = Math.min(topPosition, (footerTop - scrollTop) - sidebarHeight);
    $sidebar.css('top', topPosition);
});

}); 
```

但是现在 .sidebar 有一个常量**style="top: -370px;**附加到它上面。

任何人？哈哈……啊！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:19:07.533

首先，您应该使用`var`关键字声明变量，否则它们将被添加到全局范围中。

其次，如果您将`$sidebar`选择器和所有其他变量放在滚动函数中，那么它将在滚动时进行选择，而不是仅在文档加载时进行一次选择。因此，如果侧边栏在用户滚动时可用，那么一切都应该正常运行。

本质上，它应该如下所示：

```
$(document).ready(function(){

    $window.scroll(function(event) {
        var $window = $(window),
            $sidebar = $(".sidebar"),
            sidebarTop = $sidebar.position().top,
            sidebarHeight = $sidebar.height(),
            $footer = $(".footer"),
            footerTop = $footer.position().top;    

        $sidebar.addClass('fixed');
        scrollTop = $window.scrollTop(),
        topPosition = Math.max(0, sidebarTop - scrollTop),
        topPosition = Math.min(topPosition, (footerTop - scrollTop) - sidebarHeight);
        $sidebar.css('top', topPosition);
    });

}); 
```

# php - PHP教程代码不起作用

> ID：11488875
> 
> 赞同：0
> 
> 时间：2012-07-15T02:17:00.510
> 
> 标签：php, database

按照在线教程并设法获得此代码：

```
class RedeemAPI {
private $db;

// Constructor - open DB connection
function __construct() {
    $this->db = new mysqli('localhost', 'username', 'password', 'promos');
    $this->db->autocommit(FALSE);
}

// Destructor - close DB connection
function __destruct() {
    $this->db->close();
}

// Main method to redeem a code
function redeem() {
    // Print all codes in database
    $stmt = $this->db->prepare('SELECT id, code, unlock_code, uses_remaining FROM rw_promo_code');
    $stmt->execute();
    $stmt->bind_result($id, $code, $unlock_code, $uses_remaining);
    while ($stmt->fetch()) {
        echo "$code has $uses_remaining uses remaining!";
    }
    $stmt->close();
}
} 
```

紧接着，那家伙说我应该运行该页面并看到以下内容：

```
 test has 10000 uses remaining! 
```

但什么也没发生，页面只是空白。数据在数据库中，并且凭据是 100% 正确的。

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T02:36:02.523

您的代码应该包括：`$api = new RedeemAPI();`和`$api->redeem();`，仅仅因为本教程不包括进一步下降并不意味着您不使用它。

所以试试：

```
error_reporting(E_ALL);
class RedeemAPI {
private $db;

// Constructor - open DB connection
function __construct() {
    $this->db = new mysqli('localhost', 'username', 'password', 'promos');
    $this->db->autocommit(FALSE);
}

// Destructor - close DB connection
function __destruct() {
    $this->db->close();
}

// Main method to redeem a code
function redeem() {
    // Print all codes in database
    $stmt = $this->db->prepare('SELECT id, code, unlock_code, uses_remaining FROM rw_promo_code');
    $stmt->execute();
    $stmt->bind_result($id, $code, $unlock_code, $uses_remaining);
    while ($stmt->fetch()) {
        echo "$code has $uses_remaining uses remaining!";
    }
    $stmt->close();
}
}

$api = new RedeemAPI();
$api->redeem(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T02:25:00.047

为了使用打印进行调试，您可以使用`echo`如下：

改变：

```
function redeem() {
    // Print all codes in database
    $stmt = $this->db->prepare('SELECT id, code, unlock_code, uses_remaining FROM rw_promo_code');
    $stmt->execute();
    $stmt->bind_result($id, $code, $unlock_code, $uses_remaining);
    while ($stmt->fetch()) {
        echo "$code has $uses_remaining uses remaining!";
    }
    $stmt->close();
} 
```

到：

```
function redeem() {
    // Print all codes in database
    echo "1\n";
    $stmt = $this->db->prepare('SELECT id, code, unlock_code, uses_remaining FROM rw_promo_code');
    echo "2\n";
    $stmt->execute();
    echo "3\n";
    $stmt->bind_result($id, $code, $unlock_code, $uses_remaining);
    echo "4\n";
    while ($stmt->fetch()) {
    echo "5\n";
        echo "$code has $uses_remaining uses remaining!";
    }
    echo "6\n";
    $stmt->close();
    echo "7\n";
} 
```

这样你就可以看到你在哪条线上失败了。
另一种选择是使用`try`and `catch`：

```
function redeem() {
      try{
        // Print all codes in database
        $stmt = $this->db->prepare('SELECT id, code, unlock_code, uses_remaining FROM rw_promo_code');
        $stmt->execute();
        $stmt->bind_result($id, $code, $unlock_code, $uses_remaining);
        while ($stmt->fetch()) {
            echo "$code has $uses_remaining uses remaining!";
        }
        $stmt->close();
       }
      catch(Exception $e) {
          echo 'Caught exception: ',  $e->getMessage(), "\n";
      }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T02:33:53.907

您是否创建了类的实例？

您应该创建类的实例，然后调用`redeem()`函数以获得所需的输出。

```
<?
    $someVar = new RedeemAPI();
    $someVar->redeem();
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-18T19:49:24.503

这里可能会发生许多不同的事情。在你打开之后

```
 <?php 
```

添加

```
ini_set("display_errors", 1); 
```

查看错误。通过使用在浏览器中查看结果

```
http://localhost/promos 
```

如果代码在您正在执行本教程的机器上运行。如果它在另一台机器上，请将“localhost”替换为远程机器的 IP 地址。从我在你的代码中看到的你没有使用

```
 $api = new RedeemAPI();
    $api->redeem(); 
```

可能就像被排除在外一样简单。如果你添加了这个并且你仍然看到一个空白页面，这可能是由于一个错误或者你在设置 mysql 服务器时错过了一些东西。这是我在完成同一教程时遇到的问题。我将删除数据库表并重新添加它们，确保您按照 mysql 部分的说明添加到“t”。

# python - 在线程中实时定期执行函数，每 N 秒

> ID：11488877
> 
> 赞同：16
> 
> 时间：2012-07-15T02:17:18.017
> 
> 标签：python, multithreading, real-time

我有一个线程类，其循环需要每秒执行 4 次。我知道我可以做类似的事情

```
do_stuff()
time.sleep(0.25) 
```

但问题是这并没有考虑到它需要的时间`do_stuff()`。实际上，这需要是一个实时线程。有没有办法做到这一点？理想情况下，线程在不执行代码时仍会进入睡眠状态。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-15T02:26:30.283

### 简单的解决方案

```
import threading

def work (): 
  threading.Timer(0.25, work).start ()
  print "stackoverflow"

work () 
```

* * *

以上将确保`work`以每秒四次的间隔运行，其背后的理论是它将*“排队”*对自身的调用，该调用将在未来*0.25*秒后运行，而无需等待发生.

正因为如此，它可以（几乎）完全不间断地工作，并且我们非常接近每秒执行 4 次该函数。

* * *

`threading.Timer`可以通过以下指向 python 文档的链接阅读更多信息：

*   **[docs.python.org - 16.2.7。定时器对象](http://docs.python.org/library/threading.html#timer-objects)**

* * *

### 推荐]更高级/动态的解决方案

即使前面的函数按预期工作，您也可以创建一个辅助函数来帮助处理未来的定时事件。

对于这个例子来说，下面的内容就足够了，希望代码会自己说话——它并不像看起来那么先进。

当您可以实现自己的包装器以满足您的确切需求时，将此视为灵感。

```
import threading

def do_every (interval, worker_func, iterations = 0):
  if iterations != 1:
    threading.Timer (
      interval,
      do_every, [interval, worker_func, 0 if iterations == 0 else iterations-1]
    ).start ()

  worker_func ()

def print_hw ():
  print "hello world"

def print_so ():
  print "stackoverflow"

# call print_so every second, 5 times total
do_every (1, print_so, 5)

# call print_hw two times per second, forever
do_every (0.5, print_hw) 
```

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-28T01:10:21.160

我对一个线程做了一些不同的方法，在一个while循环中循环。对我来说优点是：

*   只有一个线程，这里提到的其他解决方案为每个间隔启动和停止线程
*   `.stop()`对间隔的更多控制，您可以使用方法 停止 IntervalTimer

代码：

```
from threading import Thread, Event

# StoppableThread is from user Dolphin, from http://stackoverflow.com/questions/5849484/how-to-exit-a-multithreaded-program
class StoppableThread(Thread):  

    def __init__(self):
        Thread.__init__(self)
        self.stop_event = Event()        

    def stop(self):
        if self.isAlive() == True:
            # set event to signal thread to terminate
            self.stop_event.set()
            # block calling thread until thread really has terminated
            self.join()

class IntervalTimer(StoppableThread):

    def __init__(self, interval, worker_func):
        super().__init__()
        self._interval = interval
        self._worker_func = worker_func

    def run(self):
        while not self.stop_event.is_set():
            self._worker_func()
            sleep(self._interval) 
```

用法：

```
def hw():
    print("Hello World")

interval = IntervalTimer(1,hw)
interval.start()

sleep(10)

interval.stop() 
```

# google-app-engine - Golang GAE - 联合登录示例

> ID：11488880
> 
> 赞同：4
> 
> 时间：2012-07-15T02:18:10.933
> 
> 标签：google-app-engine, login, openid, go, federated-identity

我正在尝试使用 Google App Engine Go SDK 实现联合登录，但我能找到的关于该主题的唯一示例是关于[如何在 Python 和 Java 中执行此操作](https://developers.google.com/appengine/articles/openid)。我知道我需要调用[这个函数](https://developers.google.com/appengine/docs/go/users/reference#LoginURLFederated)来获取 URL，但是我不确定要传递的参数。有人可以为几个主要平台（Facebook、Twitter 等）提供 GAE Golang 中的联合登录示例吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T15:17:18.107

Facebook 和 Twitter 不使用 OpenID 进行身份验证。

Facebook 使用[OAuth 2](http://oauth.net/2/) - 您需要使用[goauth2](http://code.google.com/p/goauth2/)进行身份验证。

Twitter 使用：[OAuth](http://oauth.net/)。您需要使用[goauth](http://code.google.com/p/goauth2/)进行身份验证。

也就是说，如果您仍然想为 Yahoo、Google、MySpace 等提供商使用联合登录，它看起来像这样：

```
c := appengine.NewContext(r)
// url is the OpenID url other possiblities include:
//   - yahoo.com
//   - myspace.com
//   - aol.com
//   - flickr.com/USERNAME
url := "gmail.com"
// redirectURL is where you want the User to be redirected to after login.
redirectURL := "/callback"
loginUrl, err := user.LoginURLFederated(c, redirectURL, url)
// Then redirect the user to the url.
http.Redirect(w, r, loginUrl, http.StatusFound) 
```

对于 Facebook 和 Twitter 身份验证，您可以查看[go.auth](https://github.com/bradrydzewski/go.auth)包。它可能不适用于 App Engine，但它可能会为您提供一些线索。

我也在研究[HAL/auth](https://github.com/scotch/hal/tree/master/auth)包中这个问题的解决方案，但到目前为止它还不完整。以下是 HAL 处理[应用引擎 openid](https://github.com/scotch/hal/blob/master/auth/appengine_openid/appengine_openid.go)的方式。

# ruby-on-rails - 路由工作时没有解释 Ruby 代码

> ID：11488882
> 
> 赞同：1
> 
> 时间：2012-07-15T02:18:27.483
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我遇到了这种非常奇怪的行为，我的应用程序中的基本路由有时可以正常工作，有时不能正常工作，并且在我的视图文件中，<%= ...... %> 内部的 ruby​​ 代码没有呈现在全部。这部分（里面的那个 <%= %> ）只是显示空白。我知道控件在这里，因为如果我在这些分隔符之外写任何字符串，那么它会显示在页面上。

在路由方面，我遇到的问题是我的创建控制器要索引。[我正在关注来自http://www.noupe.com/ajax/create-a-simple-twitter-app.html](http://www.noupe.com/ajax/create-a-simple-twitter-app.html)的示例教程

我正在使用 ruby​​ 版本 1.9.3p194 和 rails 版本 3.2.6

我的源文件如下。

**路由.rb**

```
resources :posts  
match '/create', :to => 'posts#create'

match ':controller(/:action(/:id))(.:format)' 
```

**index.html.erb**

```
In posts index file

<% form_tag(:controller => "posts", :action => "create") do %>  
  <%= label_tag(:message, "What are you doing?") %><br />  
  <%= text_area_tag(:message, nil, :size => "44x6") %><br />   
  <%= submit_tag("Update") %>  
<% end %> 
```

**创建.html.erb**

```
<%= debug(params) %>
<%= render :partial => "message_form" %>
<%= render :partial => @posts %> 
```

**显示.html.erb**

```
buddy, here I am in show now . 
```

**post_controller.rb**

```
class PostsController < ApplicationController
  def index
    puts "I am in Posts#index"
    @posts = Post.all(:order=>"created_at DESC")
    respond_to do |format|
      format.html
    end
  end

  def show
    puts "I am in Posts#show"
  end

  def edit
    puts "I am in Posts#edit"
  end

  def new
    puts "I am in Posts#new"
  end

  def create
    puts "I am in Posts#create"

    @post = Post.create(:message=>params[:message])
    respond_to do |format|
      if @post.save
        format.html {redirect_to posts_path}
      else
        flash[:notice] = "Message failed to save"
        format.html {redirect_to posts_path}
      end
    end
  end
end 
```

当我输入`http://localhost:3000/posts/create`时，它显示“伙计，我现在在表演中”。这是 show.html.erb 的渲染，不执行任何 ruby​​ 代码

当我键入`http://localhost:3000/posts`时，它显示“在帖子索引文件中”，它正在为索引文件呈现，但没有执行任何部分 ruby​​ 代码

任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T07:08:14.850

您`=`在帖子索引中缺少此行的标志，这就是未呈现表单的原因。

这条线

```
<% form_tag(:controller => "posts", :action => "create") do %> 
```

应该

```
<%= form_tag(:controller => "posts", :action => "create") do %> 
```

那至少应该解决第二个问题。

# javascript - 需要检测是否使用 useragent 安装了 .NET 4.5

> ID：11488887
> 
> 赞同：1
> 
> 时间：2012-07-15T02:21:48.167
> 
> 标签：javascript, .net

为了运行我们的 WPF xbap 应用程序，我们需要确保我们的客户端机器上有 .NET 4.5。4.5 中有一个大错误修复，纠正了 4.0 E 版本中的线程错误。

我们正在使用 javascript 检查客户端版本。

安装 4.5 RC 后，用户代理字符串仍然只报告 4.0E。我们需要能够判断是否安装了 4.5，如果是，我们可以让用户运行应用程序而不会收到更新通知。这可以做到吗？4.5 会为 useragent 调用创建正确的字符串吗？

谢谢哈罗德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:27:47.877

永远不要依赖用户代理字符串来告诉你任何事情——测试是否存在某些东西的最佳方法是实际使用它。

我建议您修改您的 XBAP 以查看它运行的 .NET 版本。如果它检测到低于 4.5 的任何内容，那么它应该向用户显示一条消息并且不继续。

如果您不想修改您的 XBAP，您可以尝试“ [Dotnetlet](http://weblogs.asp.net/spano/archive/2007/09/19/hosting-a-windows-form-control-in-a-web-page.aspx) ”（Java Applet 的 .NET 等效项），它是托管在`<object>`IE 网页元素中的 WinForms UserControl（它显然不会在任何其他浏览器）。您可以在那里进行 .NET 版本测试。

# android - 在真实设备上模拟慢速互联网连接？

> ID：11488888
> 
> 赞同：12
> 
> 时间：2012-07-15T02:21:52.720
> 
> 标签：android, android-wifi, android-networking, android-internet

我需要在甚至 2G 互联网连接没有完全覆盖（即 2 条而不是 4 条 2G）的条件下测试我的应用程序。

我更喜欢通过 WiFi 进行这些测试。

有没有办法（以编程方式或其他方式）告诉**真实**设备上的 Android 操作系统减慢或限制互联网连接 56 Kbit/s？

注意：我知道如何在[emulator上执行](https://stackoverflow.com/a/7026341)[此](https://stackoverflow.com/a/8693184)操作。我正在寻找一种在**真实设备**上执行此操作的方法。

 **这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T11:42:55.173

在您的一条评论中，您提到您有一个 DD-WRT 路由器，它实际上是一个小型 Linux 机器。因此，您也许可以使用[tc](http://lartc.org/howto/lartc.ratelimit.single.html)命令获得一种方法：

```
tc qdisc add dev $DEV root handle 1: cbq avpkt 1000 bandwidth 10mbit 
tc class add dev $DEV parent 1: classid 1:1 cbq rate 512kbit allot 1500 prio 5 bounded isolated 
tc filter add dev $DEV parent 1: protocol ip prio 16 u32 match ip dst 195.96.96.97 flowid 1:1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T02:34:41.953

这有点取决于您在上游方面拥有什么。如果您要传输某种测试负载，请在上游端编写一个驱动程序，实际上它会减慢自身速度——尽管 sleep() 是一个糟糕的选择。如果您希望获得类似于真实工作负载的任何东西，那么您将要编写的内容本质上是一个相当困难的实时程序。

（顺便说一句，当我说“驱动程序”时，我并不一定是设备驱动程序，只是某种驱动程序。）

但是，您真的是在尝试模拟*慢速*连接，还是有效数据速率低的退化和嘈杂的连接？**

# php - 我可以使用 die 来填充变量吗？

> ID：11488897
> 
> 赞同：3
> 
> 时间：2012-07-15T02:24:39.327
> 
> 标签：php

当我填充变量时，我可以做这样的事情吗？：

```
$type = isset( $_GET['type'] ) ?  $_GET['type'] : die(); 
```

通过这样做，如果请求中没有“类型”，我的函数将退出。这是使用 die() 的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T02:26:38.610

如果您只想退出*函数*`return`，请使用. 但是，它不是表达式，因此您需要将其更改为`if`语句：

```
if(!isset($_GET['type'])) {
    return;
}

$type = $_GET['type']; 
```

如果您确实希望整个页面停止执行，那么是的，那是正确的（但为了清楚起见，我仍然使用 an `if`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T02:27:29.043

是和不是。是的，你所做的在技术上是正确的，如果变量不存在，它将终止脚本，但如果你想测试你的代码，你不应该使用该`die`构造。PHP 是一种面向对象的语言（从第 5 版开始），并且是一种非常强大的语言。它支持使用您可能想在此处使用的高级错误处理异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T02:27:45.377

你不能`die()`用来填充变量。`die()`终止您的代码。相反，您可以考虑以下代码：

`$type = isset( $_GET['type'] ) ? $_GET['type'] : null;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T02:52:26.640

[三元运算符文档](http://www.php.net/manual/en/language.operators.comparison.php)说：

```
$type = isset( $_GET['type'] ) ?  $_GET['type'] : die(); 
```

与此 if/else 语句相同：

```
if ( isset( $_GET['type'] ) )
    $type = $_GET['type'];
else 
    $type = die(); 
```

它之所以有效，是因为`die()`将被调用并停止脚本执行，但这不是一个好习惯。对此，您最好使用 if/else 语句并简单地调用`die()`if $_GET['type'] 不存在，如下所示。

```
if ( isset( $_GET['type'] ) )
    $type = $_GET['type'];
else 
    die('type not found'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T02:35:32.977

**die()**函数将结束你的整个 PHP 进程，而不仅仅是退出你所在的函数。除此之外，代码依赖于 PHP 有点愚蠢的事实。**die()**严格应该是一个 void 函数，但是您的调用取决于它返回的*东西*——它确实如此，但不应该如此。

你真正想要的是一个简单的**if**语句：

```
if( ! isset($_GET['type']) )
    return;

$type = $_GET['type']; 
```

另一件事是，如果此代码在函数中，则 $type 的值将不会被保留，除非它被声明为全局。

# java - 在 Video 中释放视频导致 InvalidStateException

> ID：11488908
> 
> 赞同：0
> 
> 时间：2012-07-15T02:27:37.223
> 
> 标签：java, android, android-mediaplayer

我创建了一个介绍视频，一旦完成，就会进入菜单活动。我认为当时发布视频以释放资源会很好，但这样做会导致`java.lang.InvalidStateException`. 下面是完成代码：

```
videoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener()
{
    public void onCompletion(MediaPlayer mp)
    {
        mp.release();
        startActivity(new Intent(menu));
    }
}); 
```

我不知道这有什么问题。

# android - 具有自定义光标适配器的 ListView 为空/空白

> ID：11488915
> 
> 赞同：1
> 
> 时间：2012-07-15T02:29:13.760
> 
> 标签：android, sqlite, listview, android-cursoradapter

所以几天来我一直在尝试让 ListView 显示来自 SQLite 数据库的数据，但我仍然找不到解决方案。

ListView XML 看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button 
    android:id="@+id/gotoEntry"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="New Entry" />

<ListView 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@android:id/list" >
</ListView>

</LinearLayout> 
```

行项目如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:textSize="15dp"
android:padding="15dp"
android:id="@+id/thetext"
>
</TextView> 
```

我的光标适配器看起来像：

```
public class ItemAdapter extends CursorAdapter{
private Cursor iCursor;
private Context iContext;
private final LayoutInflater iInflater;

public ItemAdapter(Context context, Cursor c) {
    super(context, c);
    iInflater=LayoutInflater.from(context);
    iContext=context;
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
TextView itemName = (TextView) view.findViewById(R.id.thetext);

    itemName.setText(cursor.getString(cursor.getColumnIndex(db_Setup.KEY_NAME)));
    }
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) throws InflateException {
    final View view = iInflater.inflate(R.layout.single_item, parent, false);
    return view;
}
} 
```

使用此方法制作光标：

```
public static Cursor getName() {
    Cursor q = myDatabase.query(DATABASE_TABLE, new
        String[] {db_Setup.KEY_NAME}, null, null, null, null, null);
q.moveToFirst();

return q;
} 
```

并在 listactivity 中实例化，如下所示：

```
Cursor cursor = db_Setup.getName(); 
```

我试图在我的 ListActivity 中执行此操作以将列表视图绑定到光标：

```
ItemAdapter ia = new ItemAdapter(getBaseContext(), cursor);
ia.bindView(findViewById(R.id.thetext), getApplicationContext(), cursor); 
```

当我运行应用程序时没有错误......在这篇文章的顶部有一个来自 XML 的按钮，并且空白（没有 listView）......我已经在 SQLite 数据库中输入了一些值，比如 14值左右。为什么什么都没有显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T02:40:21.127

最后一行不正确。创建 ItemAdapter 后，只需调用 ListActivity.setListAdapter(ia)。有关更多详细信息，请参阅[显示查询结果](http://developer.android.com/guide/topics/providers/content-provider-basics.html#DisplayResults)。

# jquery - 如何设置 ajaxed 照片的宽度和高度？

> ID：11488919
> 
> 赞同：0
> 
> 时间：2012-07-15T02:29:59.767
> 
> 标签：jquery, ajax, image

我的网页上有几张缩略图。当用户单击其中一个缩略图时，将打开全尺寸图片。对于浏览器窗口，全尺寸图片可能太大。为了使它适合，我有一个名为“setImageDimensions()”的 javascript 函数。此函数获取照片的宽度和高度，它们存储在页面上的“隐藏”输入字段中。问题是，当我单击缩略图时，会打开较大的图片，但未调整大小（如果它大于浏览器窗口）。我注意到（在“检查”HTML 时）`height`和`width`属性被添加到全尺寸图片（通过`setImageDimensions()`函数），但仅在一瞬间，之后这些值被删除。我的代码阻止这些属性“保留”的原因是什么？

Javascript：

```
function viewImage(photoID) {
    $('div#photo_container'+photoID).load('get_photo.php);
    // the above will load something like <img src="path-to-full-size-pic" />
    setImageDimensions(photoID);
}

function setImageDimensions(photoID) {
    var width = $('#photoWrap'+photoID+ ' input#photoWidth').val();
    var height = $('#photoWrap'+photoID+ ' input#photoHeight').val();

    var windowWidth = $('body').width();
    var windowHeight = $('body').height();

    var newWidth = width; // initialize variable
    var newHeight = height; // initialize variable
    var ratio = 1; // intialize variable

    if( width > windowWidth )
    {
        newWidth = windowWidth;
        ratio = newWidth / width;
        height = ratio * height;
        width = newWidth;

    if( height > windowHeight )
    {
        newHeight = windowHeight;
        ratio = newHeight / height;
        width = ratio * width;
        height = newHeight;
    }

    $('div#photo_container'+photoID+' > img').attr('height', height);
    $('div#photo_container'+photoID+' > img').attr('width', width);
    }
    else if( height > windowHeight )
    {
        newHeight = windowHeight;
        ratio = newHeight / height;
        width = ratio * width;
        height = newHeight;

    if( width > windowWidth )
    {
        newWidth = windowWidth;
        ratio = newWidth / width;
        height = ratio * height;
        width = newWidth;
    }

    $('div#photo_container'+photoID+' > img').attr('height', height);
    $('div#photo_container'+photoID+' > img').attr('width', width);
    }

    var halfWidth = width / 2;
    var halfHeight = (height / 2);

    $('#photo_container'+photoID).css('margin-left', -halfWidth);
    $('#photo_container'+photoID).css('margin-top', -halfHeight);
} 
```

HTML：

```
<div class="photoWrap" id="photoWrap3">
    <input type="hidden" id="photoWidth" value="someWidth"/>
    <input type="hidden" id="photoHeight" value="someHeight"/>
    <div class="photo_container" id="photo_container3"></div>
    <img id="previewPic3" src="path-to-thumbnail-pic" alt="" onclick="viewImage('3')" />
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T02:32:43.717

在 上设置回叫。`load()`

```
$('div#photo_container'+photoID).load('get_photo.php', function(){
    setImageDimensions(photoID);
}); 
```

# mysql - 在sql查询中使用exists的两种情况

> ID：11488924
> 
> 赞同：0
> 
> 时间：2012-07-15T02:32:06.223
> 
> 标签：mysql, sql

我正在尝试进行查询，`If the customer has no invoice, but has an appointment in the last 6 months, please give me their clientId and name` 显示以下结果返回和空集。

```
SELECT clients.clientId, clients.studentFirstName, clients.studentLastName 
FROM  clients, invoices, appointments 
WHERE (NOT EXISTS 
          (SELECT * 
           FROM invoices, clients 
           WHERE invoices.clientId = clients.clientId)) 
AND (EXISTS 
         (SELECT * FROM appointments, clients 
         WHERE appointments.clientId = invoices.clientId 
         AND appointments.date >= DATE_ADD(curdate(), INTERVAL 6 MONTH))); 
```

编辑：最终工作的查询是在对约翰的回答稍作调整后创建的：

```
 SELECT  a.clientID,
    a.studentFirstName,
    a.studentLastName
FROM    clients a 
        LEFT JOIN invoices b
            on a.clientID = b.clientID
        LEFT JOIN appointments c
            on a.clientID = c.clientID
WHERE   b.clientId IS NULL AND
    c.`date` >= DATE_SUB(curdate(), INTERVAL 6 MONTH) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T02:38:23.957

改为使用`LEFT JOIN`。

```
SELECT  a.ClientID,
        a.studentFirstName,
        a.clients.studentLastName
FROM    clients a 
            LEFT JOIN invoices b
                on a.ClientID = b.ClientID
            LEFT JOIN appointments c
                on a.ClientID = c.ClientID
WHERE   b.Client IS NULL AND
        c.`Date` >= DATE_SUB(curdate(), INTERVAL 6 MONTH) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T02:35:51.597

你确定它应该是 DATE_ADD 而不是 DATE_SUB 吗？

您可以使用连接：

```
SELECT    a.clientId,
          a.studentFirstName,
          a.studentLastName
FROM      clients a
JOIN      appointments b ON a.clientId = b.clientId 
          AND b.date >= CURDATE() - INTERVAL 6 MONTH
LEFT JOIN invoices c ON a.clientId = c.clientId
WHERE     c.clientId IS NULL 
```

# java - 与 Java 服务器的 PHP tcp 连接挂在 socket_read() 上

> ID：11488925
> 
> 赞同：3
> 
> 时间：2012-07-15T02:32:17.987
> 
> 标签：java, php, sockets, tcp, client

我正在尝试创建一个 PHP 客户端来连接到一个简单的 java 服务器，发送一些数据，然后接收响应。java 服务器在与用 Java 编码的简单客户端交互时响应良好，但是一旦从 PHP 客户端发送请求，它会在调用 socket_read() 时无限期挂起。如果注释掉这一行，数据就可以正常到达，但是当它没有时，Java 服务器似乎根本没有接收到数据。这与之前提出的问题非常相似：[Simple Java TCP Server and PHP Client Problems](https://stackoverflow.com/questions/9714694/simple-java-tcp-server-and-php-client-problems)，但据我所知，我的代码在操作上与给出的解决方案几乎相同。

Java 服务器是多线程的，即用于程序的其他部分，我不相信这是导致问题的原因。php 脚本有一个用于测试的 UI。有谁知道发生了什么？

Java 服务器：

```
 import java.io.*;
    import java.net.*;
    import java.lang.*;

    class TCPRelayServer
    {
        String clientSentence;
        String responseString;
        ServerSocket socket;
        Socket connection;

       public void TCPRelayServer() throws Exception{
             System.out.println("Created Relay");
        }

        public void run() throws Exception{            
                clientSentence = "";
                responseString = "";
                // Open socket to all localhost connections on port
                socket = new ServerSocket(9090, 100, InetAddress.getByName(null));
                socket.setSoTimeout(5000);

             while(true)
             {
                try{
                    System.out.println("**Relay Server**  Relay Server Waiting");

                    // Setup buffers and connection
                    connection = socket.accept();
                    InputStreamReader inputStream = new InputStreamReader(connection.getInputStream());
                    BufferedReader input = new BufferedReader(inputStream);
                    DataOutputStream response = new DataOutputStream(connection.getOutputStream());

                    // Get server input
                    clientSentence = input.readLine();
                    System.out.println("**Relay Server**  Received: " + clientSentence);

                    // Perform logic
                    responseString = clientSentence.toUpperCase() + "\n";

                    // send response
                    response.writeBytes("IT WORKED!\n");
                    response.flush();
                    response.close();

                }
                catch(Exception e){
                    continue;
                }
             }
        }
    }

    class Relay implements Runnable {

        Thread runner;
        public Relay() {
        }
        public Relay(String threadName) {
            runner = new Thread(this, threadName); // (1) Create a new thread.
            System.out.println(runner.getName());
            runner.start(); // (2) Start the thread.
        }
        public void run(){
            //Display info about this particular thread
            System.out.println("Thread Started: " + Thread.currentThread());

            TCPRelayServer relay = new TCPRelayServer();
            try{
                relay.run();
            }
            catch(Exception e){
                System.out.println("Relay Server Failed to Run");
                return;
            }
        }
    }

    public class Triplestore {

        public static void main(String[] args) {
            Relay RELAY = new Relay("Relay");
            //Server SERVER = new Server("Server");
            //Client CLIENT = new Client("Client");

            //Display info about the main thread
            System.out.println("Main Thread: " + Thread.currentThread());

            while(true){

            }
        }
    } 
```

PHP客户端：

```
<html>
    <head>
    <style type="text/css">

    input, textarea, label, div, a, form {
        display:inline;
        float:left;
        clear:left;
    }
    #messageLabel{
        clear:left;
        margin-top:20px;
    }
    form{
        width:600px;
    }
    textarea, input{
        font-size:14px;
        margin-left:30px;
    }
    input{
        padding:3px;
    }
    textarea{
        width:500px;
        height:300px;
        padding:10px;
    }
    input[type=submit]{
        float:right;
        margin-right: 70px;
        margin-top: 10px;
    }
    #results{
        font-family: monospace;
        clear: none;
        padding: 20px;
        background-color: black;
        color: white;
        margin-top: 30px;
        height: 299px;
        width: 500px;
        border: 3px solid #CCC;
        overflow:auto;
    }
    #results .success{color:#3ba13d;}
    #results .error{color:#c2291a;}

    </style>

    </head>
    <body>
        <form action="/test/tcp/tcp.php" method="post">
            <label for="port">Port Number: </label>
            <input type="text" name="port" id="port" value="9090"><br>

            <label for="message" id="messageLabel">Message: </label>
            <textarea placeholder="Type Message Here" id="message" name="message"></textarea><br>
            <input type="submit">
        </form>

        <div id="results">     
        <?php
            if(isset($_POST['port']) && isset($_POST['message'])){

                // Get port by service name or by port number
                $port = $_POST['port']; //getservbyname('www', 'tcp');

                // Get the IP address for the target hostname or by ip. 
                $address = '127.0.0.1'; //gethostbyname('localhost');

                // Get user message
                $message = $_POST['message'];
                $output = '';
                $next = '';

                // Create a TCP/IP socket.
                echo "Creating TCP/IP socket...";
                $socket = @socket_create(AF_INET, SOCK_STREAM, getprotobyname('tcp'));
                //SOL_TCP
                if ($socket === false) {
                    echo "<br>&nbsp;&nbsp;&nbsp;<span class='error'><br>&nbsp;&nbsp;&nbsp; FAILED Reason: socket_create() - " . socket_strerror(socket_last_error()) . "<br></span>";
                } else {
                    echo "<br>&nbsp;&nbsp;&nbsp;<span class='success'>OK</span><br>";
                }

                // Connect to address on port
                echo "Connecting to '$address' on port '$service_port'...";
                $connect = @socket_connect($socket, $address, $port);
                if ($connect === false) {
                    echo "<br>&nbsp;&nbsp;&nbsp;<span class='error'>FAILED <br>&nbsp;&nbsp;&nbsp;Reason: socket_connect() - " . socket_strerror(socket_last_error($socket)) . "<br></span>";
                } else {
                    echo "<br>&nbsp;&nbsp;&nbsp;<span class='success'>OK</span><br>";
                }

                // Send Message
                echo "Sending message...";
                $sent = @socket_sendto($socket, $message, strlen($message), MSG_EOF, $address, $port);
                if ($sent === false) {
                    echo "<br>&nbsp;&nbsp;&nbsp;<span class='error'>FAILED<br>&nbsp;&nbsp;&nbsp;Reason: socket_write() - " . socket_strerror(socket_last_error($socket)) . "<br></span>";
                } else {
                    echo "<br>&nbsp;&nbsp;&nbsp;<span class='success'>OK</span><br>";
                }

                // Read Response
                echo "Reading response...<br>";

                //$line = socket_read($socket, 1024, PHP_NORMAL_READ);
                //$output .= $line;

                while($next = socket_read($socket, 4096, PHP_NORMAL_READ)){
                    $output .= $str;
                    if($next == "" || strpos($output,"\n") !== false)
                        break;
                }

                echo 'Output: ' . $output;
                if ($output === false) {
                    echo "<br>&nbsp;&nbsp;&nbsp;<span class='error'>FAILED <br>&nbsp;&nbsp;&nbsp;Reason: socket_read() - " . socket_strerror(socket_last_error($socket)) . "<br></span>";
                } else {
                    echo "&nbsp;&nbsp;&nbsp;" . $output . "<br>";
                }

                // Close Socket
                echo "Closing socket...";
                socket_close($socket);
                echo "<br>&nbsp;&nbsp;&nbsp;<span class='success'>OK</span><br>";
            }
            else{
                echo "Please enter a port number and message.<br>";
            }
        ?>
        </div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T03:35:29.457

您在 java 中使用 readline() ，它会阻塞直到找到新行。我不认为你曾经在你的 php 代码中发送一个以新行结尾的字符串。因此，您的 java 和 php 代码都应该无限期地阻塞。

# python - 使用扭曲时循环中的延迟函数中的参数

> ID：11488926
> 
> 赞同：2
> 
> 时间：2012-07-15T02:32:18.733
> 
> 标签：python, twisted

当我使用带扭曲的延迟函数时，参数让我很困惑。

我考虑如果函数的参数是**INT-VALUE**，或者除了 list 和 dict 之外的其他基本类型，它应该传递值而不是引用。

```
from twisted.internet import defer, reactor

def deferFunc(x):
    print "11111 %d" % x
    d = defer.Deferred()
    reactor.callLater(1, d.callback, x)
    return d

@defer.inlineCallbacks
def inlineDeferFunc(x):
    print "11111 %d" % x
    d = defer.Deferred()
    reactor.callLater(1, d.callback, x)
    result = yield d
    defer.returnValue(result)

def loop():
    x = [1,2,3,4]
    d = defer.succeed(0)
    for i in x:
        d.addCallback(lambda _ : inlineDeferFunc(i))

if __name__ == '__main__':
    loop()

    try:
        reactor.run()
    except:
        reactor.stop() 
```

结果是：

```
11111 1
11111 4
11111 4
11111 4 
```

结果让我很困惑。

我怎样才能得到正确的输出，如 1,2,3,4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T02:57:49.303

> 我怎样才能得到正确的输出，如 1,2,3,4

像这样：

```
def loop():
    x = [1,2,3,4]
    d = defer.succeed(0)
    for i in x:
        d.addCallback(lambda _, i = i : inlineDeferFunc(i))

11111 1
11111 2
11111 3
11111 4 
```

请注意，我们正在复制函数定义中的值`i = i`。
问题是，毕竟它会如何知道它是什么值，但由于性能原因，我认为它不会在定义过程中复制它，但父环境会不断更新`lambda`循环。`i``for`

这是一个简单的测试。

```
>>> def test_closures():
...     i = 2
...     def test():
...         return i
...     i = 3
...     return test
... 
>>> test_closures()()
3 
```

# objective-c - 比较特定时间发生的事情的方法？

> ID：11488929
> 
> 赞同：-1
> 
> 时间：2012-07-15T02:32:48.913
> 
> 标签：objective-c, ios, xcode, timer

所以我在给定时间有多个计时器，有什么办法可以说，

```
if (randomTimer isGoingOnAtTheSameTimeAs randomTimer2)
[self doSomethingAwesome]; 
```

任何回应将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T04:49:26.353

```
if ([randomTimer isValid] && [randomTimer2 isValid]) {
    [self doSomethingAwesome];
} 
```

# zend-framework - 在 zend 框架中添加自定义验证

> ID：11488932
> 
> 赞同：0
> 
> 时间：2012-07-15T02:34:05.350
> 
> 标签：zend-framework, zend-form, zend-form-element

我有一个名为 users 的 mysql 表，其中包含字段：用户名、密码、电子邮件我有这样的控制器/操作，用于添加新用户和 'user/update/id/{user_id}' 我有两个控制器相同的 Zend_Form . 为了添加新用户，我使用以下代码检查了用户名是否已经存在：

```
$username->addValidator('Db_NoRecordExists', true, array('table' => 'user', 'field' => 'username')); 
```

这在添加新用户时效果很好，但在编辑用户时，即使用户离开用户名字段，我也会收到用户名已经存在错误。它们是 zend 为编辑字段提供类似于 Db_NoRecordExists 的验证。在编辑案例中，我想要这样的查询：

```
SELECT COUNT(*) FROM users WHERE username='$username' AND id!=$update_id 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:26:24.713

您可以将您的 sql 查询转换为 Zend_Db_Select

```
$select = Zend_Db_Table::getDefaultAdapter()->select()->from('users')->where('username =?',$username)
                                                                    ->where('id != ?',$update_id);

$validator =  new Zend_Validate_Db_NoRecordExists($select); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T02:39:23.427

[Zend_Validate_Db_NoRecordExists](http://framework.zend.com/manual/en/zend.validate.set.html#zend.validate.db.excluding-records)对于这种情况有一个排除选项：

```
$validator = new Zend_Validate_Db_NoRecordExists(
    array(
        'table' => 'users',
        'field' => 'username',
        'exclude' => array(
            'field' => 'id',
            'value' => $user_id
        )
    )
); 
```

# java - 如何在运行时设置 JTextField 的宽度？

> ID：11488936
> 
> 赞同：3
> 
> 时间：2012-07-15T02:34:47.230
> 
> 标签：java, swing, runtime, jtextfield

有人可以帮我如何`JTextField`在运行时设置 a 的宽度吗？我希望我的文本字段在运行时调整大小。它会询问用户的长度，然后输入会改变文本字段的宽度。

```
if(selectedComponent instanceof javax.swing.JTextField){
    javax.swing.JTextField txtField = (javax.swing.JTextField) selectedComponent;
    //txtField.setColumns(numInput); //tried this but it doesn't work
    //txtField.setPreferredSize(new Dimension(numInput, txtField.getHeight())); //also this
    //txtField.setBounds(txtField.getX(), txtField.getY(), numInput, txtField.getHeight()); 
    //and this
    txtField.revalidate();
} 
```

我正在`null`为此使用布局，因为我处于编辑模式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T03:50:52.680

您只需要使用[`jTextFieldObject.setColumns(int columnSize)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html#setColumns%28int%29). 这将让您在运行时增加它的大小。您最终无法做到的原因是`null`布局。`null Layout/Absolute Positioning`这是不鼓励使用的主要原因之一。这是一个尝试动手的小例子：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class JTextFieldExample
{
    private JFrame frame;
    private JPanel contentPane;
    private JTextField tfield;
    private JButton button;
    private int size = 10;

    private ActionListener action = new ActionListener()
    {
        public void actionPerformed(ActionEvent ae)
        {
            String input = JOptionPane.showInputDialog(
                                frame, "Please Enter Columns : "
                                                , String.valueOf(++size));
            tfield.setColumns(Integer.parseInt(input));                 
            contentPane.revalidate();
            contentPane.repaint();
        }
    };

    private void createAndDisplayGUI()
    {
        frame = new JFrame("JTextField Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);           

        contentPane = new JPanel();
        contentPane.setLayout(new FlowLayout(FlowLayout.LEFT, 5, 5));

        tfield = new JTextField();
        tfield.setColumns(size); 

        JButton  button = new JButton("INC Size");
        button.addActionListener(action);

        contentPane.add(tfield);
        contentPane.add(button);

        frame.getContentPane().add(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new JTextFieldExample().createAndDisplayGUI();
            }
        });
    }
} 
```

对于绝对定位，您需要调用[`setSize()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#setSize%28int,%20int%29)以`JTextField`获得结果，但您应该始终牢记不鼓励这种方法的原因，如[Java Doc 的](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)第一段中所述：

> 尽管可以不使用布局管理器，但您应该尽可能使用布局管理器。布局管理器可以更轻松地适应依赖外观的组件外观、不同的字体大小、容器的不断变化的大小以及不同的语言环境。布局管理器也可以很容易地被其他容器以及其他程序重用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T04:08:45.007

我只是通过使用来调整文本字段的大小`setBounds`。查看以下示例：

```
import java.awt.Dimension;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.JButton;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class Resize extends JFrame{
    public JTextField jtf = new JTextField();

    public Resize(){
    //frame settings
    setTitle("Resizable JTextField");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(null);
    setSize(new Dimension(600,400));
    setResizable(false);

    //init and add text field to the frame
    add(jtf);
    jtf.setBounds(20,50,200,200);

    //button to change text field size
    JButton b = new JButton("Moar.");
    add(b);
    b.setBounds(20,20,b.getPreferredSize().width,b.getPreferredSize().height);
    b.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent evt){
            jtf.setBounds(20,50,jtf.getSize().width+10,jtf.getSize().height); //THIS IS WHERE THE RESIZING HAPPENS
        }
        });

    setVisible(true);
    }
    public static void main(String[] args){
    Resize inst = new Resize();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-21T15:27:36.747

“有趣”的小型自助解决方案：

```
public static void main(String[] args) {
    JFrame frame = new JFrame();
    JTextField jTextField = new JTextField("Alice");
    JPanel panel = new JPanel();
    JButton grow = new JButton("DRINK ME");
    JButton shrink = new JButton("EAT ME");
    panel.add(jTextField);
    panel.add(grow);
    panel.add(shrink);
    frame.add(panel);
    frame.setVisible(true);
    frame.pack();
    grow.addActionListener(l -> resize(frame, jTextField, 2));
    shrink.addActionListener(l -> resize(frame, jTextField, 0.5f));
}

private static void resize(JFrame frame, Component toResize, float factor) {
    System.out.println(toResize.getPreferredSize());
    toResize.setPreferredSize(new Dimension((int)(toResize.getPreferredSize().width * factor),
                                            (int)(toResize.getPreferredSize().height * factor)));
    toResize.setFont(toResize.getFont().deriveFont(toResize.getFont().getSize() * factor));
    frame.pack();
} 
```

[**注意：**请注意，食用过多的蛋糕会杀死您。]

# c++ - 是 SQL Server .Net 应用程序还是 C++ (VC++ windows SDK) 应用程序？我的猜测肯定是原生的，所以.Net代码调用原生的东西？

> ID：11488947
> 
> 赞同：-2
> 
> 时间：2012-07-15T02:37:59.030
> 
> 标签：c++, .net, sql-server, interop, winapi

当我们安装 SQL Server 时，它不会要求安装**.Net Framework**，但所有最新版本的 Windows 都默认安装了 .Net。我最近对 ​​SSIS 引擎进行了一些编程（使用 C#），我看到了以下 DLL。

![在此处输入图像描述](../Images/4d93c1f959daa53dc28f80eb3747e279.png)

现在我可以在 .Net 项目中引用这个 DLL 并开始从中调用功能......我不需要做任何互操作。我的理解是这都是 .Net DLL SQL Server 引擎也将使用它们，所以它是一个 .Net 应用程序吗？

我正在寻找这些信息，因为我想知道我们使用本机（Windows SDK）的性能，因为 .Net Frameworks SDK 带有稳定性开销，并且企业 RDBMS 肯定需要显示性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:45:36.673

SQL Server 2005 及更高版本已开始在内部支持 .NET 对象。您可以引用 .NET 程序集等。

您确实需要 .NET 框架来安装 SQL Server。

但是，SQL Server 的核心数据库引擎仍然是用本机代码编写的。

# regex - Perl 正则表达式捕获

> ID：11488953
> 
> 赞同：2
> 
> 时间：2012-07-15T02:39:01.853
> 
> 标签：regex, perl

我有以下文字：

```
GET /mac/_base_v1/images/chrome/background_repeat.jpg HTTP/1.1  
Host: www.microsoft.com  
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:13.0) Gecko/20100101 Firefox/13.0  
Accept: image/png,image/*;q=0.8,*/*;q=0.5  
Accept-Language: en-us,en;q=0.5  
Accept-Encoding: gzip, deflate  
Referer: http://www.microsoft.com/mac/base-css  
DNT: 1  
Connection: keep-alive  
HTTP/1.1 200 OK  
Cache-Control: max-age=900  
Content-Type: image/jpegGET /mac/_base_v1/modules/button/images  /buttonlarge_yellownormal.png HTTP/1.1  
Host: www.microsoft.com  
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:13.0) Gecko/20100101 Firefox/13.0   
Accept: image/png,image/*;q=0.8,*/*;q=0.5  
Accept-Language: en-us,en;q=0.5  
Accept-Encoding: gzip, deflate  
Referer: http://www.microsoft.com/mac/css  
DNT: 1 
```

和下面的 Perl 正则表达式

```
while ($1 =~m/((GET|PUT|POST|CONNECT)\s+\S+)(?:(?!GET|PUT|POST|CONNECT\s+\S+).)*?Host:\s([^\n]+).*?User-Agent:\s([^\n]+).*?Referer:\s([^\n]+).*?Connection:/msg) {
    # do something
} 
```

它匹配这个很好

```
GET /mac/_base_v1/modules/button/images/buttonlarge_yellownormal.png  
www.microsoft.com  
Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:13.0) Gecko/20100101 Firefox/13.0  
http://www.microsoft.com/mac/css 
```

但是，我还需要它来检查以下文本：

```
GET /vi/k_dbVP4r4V4/hqdefault.jpg HTTP/1.1  
Host: i.ytimg.com  
User-Agent: Apple iPad v4.3.5 YouTube v1.0.0.8L1  
Accept-Language: en-us, *;q=0.5  
Gdata-Version: 2  
X-Gdata-Client: ytapi-apple-ipad  
Accept: */*  
Accept-Encoding: gzip, deflate  
Connection: keep-alive  
Q2J} 
```

并匹配以下内容：

```
GET /vi/k_dbVP4r4V4/hqdefault.jpg HTTP/1.1  
i.ytimg.com  
Apple iPad v4.3.5 YouTube v1.0.0.8L1 
```

同时仍然能够匹配成功呈现的先前文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T03:25:57.313

因此，如果我正确理解您的问题，您需要将 Referrer 标头设为可选。您可以通过在与该标题匹配的正则表达式部分周围添加非捕获括号并在右括号后放置一个问号来做到这一点：

```
(?:Referer:\s([^\n]+))? 
```

如果任何其他标题是可选的，您可以对它们执行相同的操作。

编辑：在第一个丢失的标头之后数据停止被捕获。

这还不完美，因为如果单个数据文件中有多个 HTTP 请求，它就不起作用，但它应该让你朝着正确的方向前进：

```
use warnings;
use strict;

my $str = <<'END_OF_STR';
GET /vi/k_dbVP4r4V4/hqdefault.jpg HTTP/1.1
Host: i.ytimg.com
User-Agent: Apple iPad v4.3.5 YouTube v1.0.0.8L1
Accept-Language: en-us, *;q=0.5
Gdata-Version: 2
X-Gdata-Client: ytapi-apple-ipad
Accept: */*
Accept-Encoding: gzip, deflate
Connection: keep-alive
END_OF_STR

my @lines = split m/[\n]/xms, $str;

# Build the regex to match the HTTP methods we care about.
my @methods = qw(GET PUT POST CONNECT);
my $methods_re = join '|', map { quotemeta $_ } @methods;

# Skip to the first request line and print it.
while ( $lines[0] !~ m/ \A $methods_re /xms ) {
    shift @lines;
}
print "$lines[0]\n";
shift @lines;

# Build the regex to match the headers we care about.
my @headers = qw(Host User-Agent Referer Connection);
my $headers_re = join '|', map { quotemeta $_ } @headers;

# Find the headers that we matched.
for my $line (@lines) {
    if ( $line =~ m/ \A (?:$headers_re):\s*(.*) /xms ) {
        print "$1\n";
    }
}

exit; 
```

我将很快添加另一个更新，它将在单个文件中处理多个 HTTP 请求。

编辑：此解决方案正确打印您正在寻找的值，但它只打印它们。如果您想获取每个特定请求的值，则需要更复杂的东西。

```
use warnings;
use strict;

my $str = <<'END_OF_STR';
GET /vi/k_dbVP4r4V4/hqdefault.jpg HTTP/1.1
Host: i.ytimg.com
User-Agent: Apple iPad v4.3.5 YouTube v1.0.0.8L1
Accept-Language: en-us, *;q=0.5
Gdata-Version: 2
X-Gdata-Client: ytapi-apple-ipad
Accept: */*
Accept-Encoding: gzip, deflate
Connection: keep-alive
END_OF_STR

my @lines = split m/[\n]/xms, $str;

# Build the regexes to match the HTTP methods and headers we care about.
my @methods = qw(GET PUT POST CONNECT);
my $methods_re = join '|', map { quotemeta $_ } @methods;
my @headers = qw(Host User-Agent Referer Connection);
my $headers_re = join '|', map { quotemeta $_ } @headers;

for my $line (@lines) {
    if ( $line =~ m/ \A $methods_re /xms ) {
        print "$line\n";
    }
    elsif ( $line =~ m/ \A (?:$headers_re):\s*(.*) /xms ) {
        print "$1\n";
    }
}

exit; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T05:47:33.553

HTTP 请求和响应标头并不像预期的那样容易解析。例如，以下都是等价的：

```
Accept-Encoding: gzip, deflate

Accept-Encoding: gzip,
    deflate

Accept-Encoding: gzip
Accept-Encoding: deflate 
```

因此，我建议您使用现有的解析器

```
use strict;
use warnings;
use feature qw( say );
use HTTP::Request qw( );

my $s = <<'__EOI__';
GET /mac/_base_v1/images/chrome/background_repeat.jpg HTTP/1.1  
Host: www.microsoft.com  
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:13.0) Gecko/20100101 Firefox/13.0  
Accept: image/png,image/*;q=0.8,*/*;q=0.5  
Accept-Language: en-us,en;q=0.5  
Accept-Encoding: gzip, deflate  
Referer: http://www.microsoft.com/mac/base-css  
DNT: 1  
Connection: keep-alive  
HTTP/1.1 200 OK  
Cache-Control: max-age=900  
Content-Type: image/jpegGET /mac/_base_v1/modules/button/images  /buttonlarge_yellownormal.png HTTP/1.1  
Host: www.microsoft.com  
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:13.0) Gecko/20100101 Firefox/13.0   
Accept: image/png,image/*;q=0.8,*/*;q=0.5  
Accept-Language: en-us,en;q=0.5  
Accept-Encoding: gzip, deflate  
Referer: http://www.microsoft.com/mac/css  
DNT: 1  
__EOI__

my ($raw_req, $raw_resp) = split qr{(?=^HTTP/)}m, $s;
my $req = HTTP::Request->parse($raw_req);
say $req->method;
say $req->url;
say $req->user_agent;
say $req->header('User-Agent');  # Same as previous 
```

# macos - 在 Mac OS Lion 上安装 cairo

> ID：11488956
> 
> 赞同：2
> 
> 时间：2012-07-15T02:39:34.533
> 
> 标签：macos, haskell, osx-lion, cairo, cabal

我刚买了一台新的 mac，我正在努力安装 Cairo 以与 Haskell 一起使用（特别是图表）。我记得我以前的机器有很多问题，但这次我陷入了死胡同。

```
$ cabal install cairo
Resolving dependencies...
[1 of 2] Compiling SetupWrapper     ( /var/folders/7s/6fn_d5px0hs2204xfztw88v40000gp/T/cairo-0.12.3.1-66116/cairo-0.12.3.1/SetupWrapper.hs, /var/folders/7s/6fn_d5px0hs2204xfztw88v40000gp/T/cairo-0.12.3.1-66116/cairo-0.12.3.1/dist/setup/SetupWrapper.o )
[2 of 2] Compiling Main             ( /var/folders/7s/6fn_d5px0hs2204xfztw88v40000gp/T/cairo-0.12.3.1-66116/cairo-0.12.3.1/Setup.hs, /var/folders/7s/6fn_d5px0hs2204xfztw88v40000gp/T/cairo-0.12.3.1-66116/cairo-0.12.3.1/dist/setup/Main.o )
Linking /var/folders/7s/6fn_d5px0hs2204xfztw88v40000gp/T/cairo-0.12.3.1-66116/cairo-0.12.3.1/dist/setup/setup ...
[1 of 2] Compiling Gtk2HsSetup      ( Gtk2HsSetup.hs, dist/setup-wrapper/Gtk2HsSetup.o )
[2 of 2] Compiling Main             ( SetupMain.hs, dist/setup-wrapper/Main.o )
Linking dist/setup-wrapper/setup ...
Configuring cairo-0.12.3.1...
setup: The program pkg-config version >=0.9.0 is required but it could not be
found.
cabal: Error: some packages failed to install:
cairo-0.12.3.1 failed during the configure step. The exception was:
ExitFailure 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:31:47.387

该程序`pkg-config`需要安装。有多种方法可以做到这一点（例如，我想它可以作为 MacPorts 和类似包管理器的一部分使用）但是如果您需要从源代码下载和安装它，这里就是：

[http://www.freedesktop.org/wiki/Software/pkg-config/](http://www.freedesktop.org/wiki/Software/pkg-config/)

# c# - 获取具有完整格式的段落

> ID：11488957
> 
> 赞同：0
> 
> 时间：2012-07-15T02:39:38.600
> 
> 标签：c#, asp.net, vb.net, openxml, openxml-sdk

使用 C# & OpenXML，我需要创建一个文档。该文档在文档正文下创建了一系列段落。我**需要准备几个段落**。为了完成这一点，**整个文档被设为只读**。使用 permStart 和 permEnd 标签提供了对几个段落的编辑权限。生成的文档发送给用户。

用户可以编辑可编辑的段落，可以使用表格、段落添加大量信息，并且可以使用不同的颜色、字体大小、字体类型来格式化文本。进行这些更改后，用户将文档发送回服务器，我需要在其中提取具有完整格式和结构的每个可编辑区域的文本并存储到数据库表中。每个可编辑区域的文本转到表格的一列。将所有可编辑区域的文本保存到相应的列后，docx 文件被丢弃。

将来当用户请求相同的文档时，我们需要从数据库中获取存储的内容并创建一个文档，方法是使用所有原始格式/结构重新创建内容。

我的问题是我们如何才能完整地提取所有格式的段落并将其存储到数据库表中并在将来请求同一文档时在另一个文档中重新创建内容。

我正在使用 OpenXML SDK 2.0、MS-Visual Studio 2010、.NET 4.0 和 Win7 操作系统。用户将使用 Office 2007/2010 编辑内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:20:57.087

最后（几个月前）我能够使用 Eric White 出色的[OpenXML PowerTools OpenSource](http://powertools.codeplex.com)从 word 文档中提取可编辑的段落。查看 Eric 的 DocumentBuilder 示例以从 doc 中提取 paras

# django - Django-Social-Auth 错误

> ID：11488958
> 
> 赞同：2
> 
> 时间：2012-07-15T02:40:02.770
> 
> 标签：django, facebook, django-socialauth

**更新** 我尝试用以下内容替换自定义管理器中的所有内容：

```
def create_user(self, username, email):
        return self.model._default_manager.create(username=username) 
```

这会引发错误。然后我尝试从我的自定义用户管理器返回用户，我得到“无法分配”：“UserSocialAuth.user”必须是“Barbuser”实例。从 associate_user 抛出。它来自 django.db.models.fields.related.py 的内部。基本上，我坚持知道如何从我的自定义模型经理中正确创建用户。我直接离开了导致我从 django 内置的 ModelManager 中复制所有内容的文档。帮助？ **更新**

我在配置 django-social-auth 时遇到问题。我已经在这里待了 3-4 天，我正准备认输。我安装了一个可用的现有用户注册应用程序，然后我安装并遵循了 django-social-auth github 站点上的文档。我将以下内容添加到我的 settings.py

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'polls',
    'barbuser',
    'social_auth',
)

AUTHENTICATION_BACKENDS = (
    'social_auth.backends.facebook.FacebookBackend',
    'django.contrib.auth.backends.ModelBackend',
)

FACEBOOK_APP_ID              = os.environ.get('FACEBOOK_APP_ID')
FACEBOOK_API_SECRET          = os.environ.get('FACEBOOK_SECRET')

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'social_auth.context_processors.social_auth_by_type_backends',
)

#SOCIAL_AUTH_ENABLED_BACKENDS = ('facebook',)
SOCIAL_AUTH_DEFAULT_USERNAME = 'new_social_auth_user'

LOGIN_URL          = '/login/'
LOGIN_REDIRECT_URL = '/profile/'
LOGIN_ERROR_URL    = '/login-error/'

SOCIAL_AUTH_USER_MODEL = 'barbuser.Barbuser' 
```

我的 models.py 看起来像：

```
from datetime import date
from django.db import models
from django.contrib.auth.models import User
from django.db.models import BooleanField
from django.db.models.fields import DateTimeField
from django.utils import timezone
from django.utils.crypto import get_random_string

class BarbuserManager(models.Manager):
    @classmethod
    def normalize_email(cls, email):
        """
        Normalize the address by converting the domain part of the email address to lowercase.
        """
        email = email or ''
        try:
            email_name, domain_part = email.strip().rsplit('@', 1)
        except ValueError:
            pass
        else:
            email = '@'.join([email_name, domain_part.lower()])
            return email

    def create_user(self, username, email=None, password=None):
        """
        Creates and saves a User with the given username, email and password.
        """
        email = 'you@email.com' if email.strip() == '' else email
        now = timezone.now()
        if not username:
            raise ValueError('The given username must be set')
        email = BarbuserManager.normalize_email(email)
        user = User(username=username, email=email,
            is_staff=False, is_active=True, is_superuser=False,
            last_login=now, date_joined=now)
        user.set_password(password)
        user.save()
        barbuser = Barbuser(user=user, birthday=date.today(), last_login=user.last_login, name=username)
        barbuser.save()
        return barbuser

    def create_superuser(self, username, email, password):
        u = self.create_user(username, email, password)
        u.is_staff = True
        u.is_active = True
        u.is_superuser = True
        u.save(using=self._db)
        return u
    def make_random_password(self, length=10,
                             allowed_chars='abcdefghjkmnpqrstuvwxyz'
                                           'ABCDEFGHJKLMNPQRSTUVWXYZ'
                                           '23456789'):
        """        Generates a random password with the given length and given        allowed_chars. Note that the default value of allowed_chars does not        have "I" or "O" or letters and digits that look similar -- just to        avoid confusion.        """
        return get_random_string(length, allowed_chars)

    def get_by_natural_key(self, username):
        return self.get(username=username)

class Barbuser(models.Model):
    user = models.OneToOneField(User)
    username = models.CharField(max_length=200)
    last_login = DateTimeField(blank=True)
    is_active  = BooleanField(default=True)
    birthday = models.DateField()
    name = models.CharField(max_length=200)
    objects = BarbuserManager()

    def __init__(self, *args, **kwargs):
        me = super(Barbuser, self).__init__(*args, **kwargs)
        barbuser = me
        return me

    def __unicode__(self):
        return self.name

    def is_authenticated(self):
        return self.user.is_authenticated() 
```

我已经更新了我的 urls.py 以包含“social_auth.urls”，并且在身份验证后，用户从我的 views.py 被重定向到 ViewProfile 视图：

```
# Create your views here.
from barbuser.forms import RegistrationForm, LoginForm
from barbuser.models import Barbuser
from django.contrib.auth import authenticate, login, logout
from django.contrib.auth.models import User
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response
from django.template.context import RequestContext

def create_Barbuser(form):
    user = User.objects.create_user(form.cleaned_data['username'], form.cleaned_data['email'], form.cleaned_data['password'])
    user.save()
    barbuser = Barbuser(user=user, name=form.cleaned_data['name'], birthday=form.cleaned_data['birthday'])
    barbuser.save()

def process_form(form, request_context):
    if form.is_valid():
        create_Barbuser(form)
        return HttpResponseRedirect('/profile/')
    else:
        return render_to_response('register.html', {'form': form}, context_instance=request_context)

def render_blank_registration_form(request):
    '''When the user is not submitting the form, show them the blank registration form.'''
    form = RegistrationForm()
    context = {'form': form}
    return render_to_response('register.html', context, context_instance=RequestContext(request))

def BarbuserRegistration(request):
    """
    Handles the registration of new Barbwire users.
    """
    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile/')
    if request.method == "POST":
        return process_form(RegistrationForm(request.POST), RequestContext(request))
    else:
        return render_blank_registration_form(request)

def LoginRequest(request):
    '''
    Handles Login requests.
    '''
    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile/')
    if request.method == 'POST':
        form = LoginForm(request.POST)
        if form.is_valid():
            username = form.cleaned_data['username']
            password = form.cleaned_data['password']
            barbuser = authenticate(username=username, password=password)
            if barbuser is not None:
                login(request, barbuser)
                return HttpResponseRedirect('/profile/')
            else:
                return render_to_response('login.html', {'form' : form}, context_instance=RequestContext(request))
        else:
            return render_to_response('login.html', {'form' : form}, context_instance=RequestContext(request))
    else:
        form = LoginForm()
        return render_to_response('login.html', {'form' : form}, context_instance=RequestContext(request))

def LoginError(request):
    return render_to_response('login.html', {'form' : LoginForm()}, context_instance=RequestContext(request))

def LogoutRequest(request):
    logout(request)
    return HttpResponseRedirect('/')

def ViewProfile(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect('/login/')
    else:
        return render_to_response('profile.html',{'barbuser' : request.user.barbuser }, context_instance=RequestContext(request)) 
```

我的问题是 2 倍。当我在我的 models.py 中添加这些额外的东西时：

```
def facebook_extra_values(sender, user, response, details, **kwargs):
    return False

from social_auth.signals import pre_update
from social_auth.backends.facebook import FacebookBackend

pre_update.connect(facebook_extra_values, sender=FacebookBackend) 
```

我在服务器启动时遇到错误：assert isinstance(to, basestring), "%s(%r) is invalid. ForeignKey 的第一个参数必须是模型、模型名称或字符串 %r" % ( **self.class** ._ *name* _, to, RECURSIVE_RELATIONSHIP_CONSTANT) AssertionError: ForeignKey(None) 无效。ForeignKey 的第一个参数必须是模型、模型名称或字符串“self”

当我删除它时，我可以通过 facebook 流程登录，但我得到：/complete/facebook/ 'NoneType' 对象的 AttributeError 没有属性 'extra_data'

我不确定我错过了什么或哪里出错了。有人可以帮助解释我哪里出错了吗？

**更新** 我已经在调试中跟踪了这个问题，显然当它尝试“UserSocialAuth.objects.create”时，我在 associate_user 函数中的 social_auth.backends.pipeline.social.py 中得到了一个 IntegrityError。然后它回退到调用 social_auth_user() 的 except 块中，并且此函数为 social_user 返回 None。我得到的 IntegrityError 是：

```
insert or update on table "social_auth_usersocialauth" violates foreign key constraint "social_auth_usersocialauth_user_id_fkey"
DETAIL:  Key (user_id)=(17) is not present in table "auth_user". 
```

我不够熟悉，不知道如何、在哪里或为什么将 social_user 与在我的 models.py 中的 CustomUserManager 中创建的用户相关联。此外，我还删除了 models.py 底部的 facebook_extra_values、额外导入和 preupdate.connect 内容，因为我真的不明白它的作用或用途。我只是从示例应用程序中复制东西，试图解决我的第一个问题，即缺少关联。帮助？ **更新**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T03:46:25.983

第一个问题——ForeignKey 错误——是由循环导入引起的。解决方案很简单并且遵循惯例。在 models.py 末尾获取该信号注册代码块并将其移动到一个名为`barbuser/signals.py`. 然后`barbuser/__init__.py`放入线，`from .signals import *`

我还没有运行足够远的代码来得到你的第二个错误——“NoneType”对象没有属性“extra_data”——但我发现了其他几个问题。

从 settings.py 中删除`SOCIAL_AUTH_ENABLED_BACKENDS`设置。我不确定你是从哪里得到的，但它不在当前 social-auth 0.7.0 的文档中。它也不在 social_auth 代码中。应该是老环境了。

`social_auth_login_redirect`您在 settings.py ( )中引用了一个不存在的上下文处理器。同样，也许是一个旧功能。确保您正在运行最新的 social-auth（可通过 PyPi 使用`pip install django-social-auth`）。此外，仅使用您需要的上下文处理器，而**不是全部使用**。（上下文处理器将变量添加到模板上下文中。如果您没有`social_auth`在模板中使用该变量，那么您不需要任何社交身份验证上下文处理器。）这很重要，因为其中两个处理器相互冲突。从[文档](http://pypi.python.org/pypi/django-social-auth/0.7.0#configuration)中，

> social_auth_backends 和 social_auth_by_type_backends 不能一起玩。

确保您已运行`./manage.py syncdb`为 social-auth 模型设置数据库。如果模型没有数据库表，则会导致“UserSocialAuth.objects.create()”中断。

最后一个想法，Django 不喜欢你定义自己的用户模型所做的事情。最好不要管 auth.User 并创建一个[UserProfile](https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users)。

### 更新

检查您的数据库结构；我怀疑索引不正确。更好的是，只需再次删除三个`social_auth_*`表`syncdb`。UserSocialAuth 表对用户模型有一个 ForeignKey 约束。它应该将“user_id”映射到“Barbuser.id”，但如果表是在您设置`settings.py/SOCIAL_AUTH_USER_MODEL`值之前创建的，那么该表将永远被破坏，因为在运行初始 SQL 时，SocialAuth 默认为 Django 的 Auth.User。说得通？无论如何，现在您已经配置了社交身份验证，只需重新创建表即可。

**注意：**您最近使用`self.model._default_manager.create()`的实验没有完成任何事情。“self”是一个 BarbuserManager；“模型”是 Barbuser；“_default_manager”又回到了 BarbuserManager。为什么？“Barbuser.objects”**是**模型的默认管理器。

哦，你第一次就正确了。BarbuserManager.create_user() 需要返回一个 Barbuser。

# html - 如何将我的网站徽标作为浏览器选项卡中的图标图像？

> ID：11488960
> 
> 赞同：130
> 
> 时间：2012-07-15T02:40:11.070
> 
> 标签：html, favicon

浏览器选项卡中页面标题旁边的图像 - 如何在此处链接图像？

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2013-10-15T21:00:23.717

该图像称为**“ [favicon](http://en.wikipedia.org/wiki/Favicon) ”**，它是一个小的方形`.ico`文件，是 favicon 的标准文件类型。您也可以使用`.png`or `.gif`，但您应该遵循标准以获得更好的兼容性。

要为您的网站设置一个，您应该：

1.  制作徽标的方形图像（最好是 32x32 或 16x16 像素，据我所知没有最大尺寸*），然后将其转换为`.ico`文件。您可以在 Gimp、Photoshop（借助[插件](https://graphicdesign.stackexchange.com/questions/9422/how-to-open-or-save-as-ico-in-photoshop-cs6)）或[Favicon.cc](http://www.favicon.cc)或[RealFaviconGenerator](http://realfavicongenerator.net/)等网站上执行此操作。

2.  然后，您有两种设置方法：

    A) 将其放在您网站的**根文件夹/目录**中（旁边`index.html`），名称为`favicon.ico`。

    或者

    B）在您网站上每个文件的`<head></head>`标签之间链接到它，如下所示：`.html`

    ```
    <head>
      <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    </head> 
    ```

如果您想`favicon`从任何网站查看，只需写`www.url.com/favicon.ico`一下，您就会（可能）看到它。[Stackoverflow 的](https://cdn.sstatic.net/Sites/stackoverflow/img/favicon.ico?v=4f32ecc8f43d)图标是 16x16 像素，[维基百科](https://en.wikipedia.org/favicon.ico)是 32x32。

*：甚至没有文件大小限制的浏览器问题。您可以轻松地使浏览器与一个非常大的 favicon 崩溃，更多信息[在这里](https://www.popularmechanics.com/technology/apps/a16040/favicon-bug-crashes-browser/)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-08-14T04:48:22.043

它被称为“ **favicon** ”，您需要将以下代码添加到您网站的**标题**部分。

只需将其添加到该`<head>`部分。

```
<link rel="icon" href="/your_path_to_image/favicon.jpg"> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-15T02:41:56.810

这是[图标](http://www.w3.org/2005/10/howto-favicon)，并在链接中进行了说明。

例如来自 W3C

```
 <link rel="icon" 
     type="image/png" 
     href="http://example.com/myicon.png"> 
```

另外，当然图像文件在适当的位置。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-15T02:42:46.893

将一个名为“favicon.ico”的图标文件添加到您网站的根目录。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-24T11:48:06.490

```
<link rel="apple-touch-icon" sizes="114x114" href="${resource(dir: 'images', file: 
'apple-touch-icon-retina.png')}"> 
```

或者你可以使用这个

```
<link rel="shortcut icon" sizes="114x114" href="${resource(dir: 'images', file: 'favicon.ico')}"
type="image/x-icon"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-29T21:56:37.220

1.  添加这个

```
**<HEAD>**

  < link rel="icon" href="directory/image.png"> 
```

然后运行并享受它

# android - 在eclipse中如何保存logcat错误信息

> ID：11488965
> 
> 赞同：1
> 
> 时间：2012-07-15T02:41:05.533
> 
> 标签：android, eclipse

在eclipse中如何保存logcat错误消息..？可以保存一条消息.. 我怎样才能保存全部消息..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T02:46:32.593

选择一条（或多条）消息并单击“Export Selected Items to Text File ...”按钮（logcat 视图中右起第四个按钮）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:01:25.737

选择要导出的行，然后单击此按钮：

![在此处输入图像描述](../Images/57c9612070fa1fa4a2854555dbce8b2e.png)

# c# - ThreadPool 挫折 - 线程创建超过 SetMaxThreads

> ID：11488966
> 
> 赞同：8
> 
> 时间：2012-07-15T02:41:18.103
> 
> 标签：c#, multithreading, threadpool

*   我有一个 I/O 密集型操作。
*   我只想要一次运行最多 5 个线程。
*   我有 8000 个任务要排队和完成。
*   每个任务大约需要 15-20 秒来执行。

我环顾四周 ThreadPool，但是

```
 ThreadPool.SetMaxThreads(5, 0);

        List<task> tasks = GetTasks();

        int toProcess = tasks.Count;
        ManualResetEvent resetEvent = new ManualResetEvent(false);

        for (int i = 0; i < tasks.Count; i++)
        {
            ReportGenerator worker = new ReportGenerator(tasks[i].Code, id);
            ThreadPool.QueueUserWorkItem(x =>
            {
                worker.Go();
                if (Interlocked.Decrement(ref toProcess) == 0)
                    resetEvent.Set();
            });
        }

        resetEvent.WaitOne(); 
```

我不知道为什么......我的代码一次执行超过 5 个线程。我试过 setmaxthreads、setminthreads，但它一直在执行超过 5 个线程。

怎么了？我错过了什么？我应该以另一种方式这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T03:28:13.637

任务并行库可以帮助您：

```
List<task> tasks = GetTasks();

Parallel.ForEach(tasks, new ParallelOptions { MaxDegreeOfParallelism = 5 }, 
  task => {ReportGenerator worker = new ReportGenerator(task.Code, id); 
           worker.Go();}); 
```

[MaxDegreeOfParallelism 有什么作用？](https://stackoverflow.com/questions/9538452/what-does-maxdegreeofparallelism-do)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-06T15:01:34.383

SetMaxThreads 有一个限制，您不能将其设置为低于系统上的处理器数量。如果您有 8 个处理器，则将其设置为 5 与根本不调用该函数相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T03:25:41.440

我认为有一种不同的更好的方法来解决这个问题。（如果我不小心对某些语法进行了 Java 化，请原谅我）

这里的主线程在“任务”中有一个要做的事情列表——而不是为每个任务创建线程，当你有这么多项目时，这真的效率不高，而是创建所需数量的线程，然后让它们从根据需要列表。

要做的第一件事是向该代码所来自的类添加一个变量，用作指向列表的指针。我们还将为所需的最大线程数添加一个。

```
// New variable in your class definition
private int taskStackPointer;
private final static int MAX_THREADS = 5; 
```

创建一个方法，该方法返回列表中的下一个任务并递增堆栈指针。然后为此创建一个新接口：

```
// Make sure that only one thread has access at a time
[MethodImpl(MethodImplOptions.Synchronized)] 
public task getNextTask()
{
    if( taskStackPointer < tasks.Count )
        return tasks[taskStackPointer++];
    else
        return null;
} 
```

或者，您可以返回 tasks[taskStackPointer++].code，如果有可以指定为“列表结尾”的值。但是，这样做可能更容易。

界面：

```
public interface TaskDispatcher
{
     [MethodImpl(MethodImplOptions.Synchronized)] public task getNextTask();
} 
```

在 ReportGenerator 类中，更改构造函数以接受调度程序对象：

```
public ReportGenerator( TaskDispatcher td, int idCode )
{
    ...
} 
```

您还需要更改**ReportGenerator**类，以便处理有一个外部循环，该循环通过调用**td.getNextTask()**来请求新任务，并在返回 NULL 时退出循环。

最后，把线程创建代码改成这样：（这只是给你一个想法）

```
taskStackPointer = 0;
for (int i = 0; i < MAX_THREADS; i++) 
{ 
    ReportGenerator worker = new ReportGenerator(this,id);
    worker.Go(); 
} 
```

这样您就可以创建所需数量的线程并让它们都以最大容量工作。

（我不确定我是否完全正确地使用了“[MethodImpl(MethodImplOptions.Synchronized)]”...我比 C# 更习惯 Java）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T03:55:53.263

您的任务列表中将包含 8k 项，因为您告诉代码将它们放在那里：

```
List<task> tasks = GetTasks(); 
```

也就是说，这个数字与使用了多少线程无关，因为调试器总是会显示您添加到列表中的项目数量。

有多种方法可以确定正在使用的线程数。也许最简单的方法之一是使用调试器进入应用程序并查看线程窗口。你不仅会得到一个计数，而且你会看到每个线程在做什么（或不做什么），这导致我......

关于您的任务正在做什么以及您如何获得一个数字来“限制”线程池，需要进行重要的讨论。在大多数用例中，线程池会做正确的事情。

现在回答你的具体问题......

要显式控制并发任务的数量，请考虑一个简单的实现，该实现将涉及将任务集合从 List 更改为 BlockingCollection（将在内部使用 ConcurrentQueue）和以下代码来“使用”工作：

```
var parallelOptions = new ParallelOptions
{
    MaxDegreeOfParallelism = 5
};

Parallel.ForEach(collection.GetConsumingEnumerable(), options, x =>
{
    // Do work here...
}); 
```

将 MaxDegreeOfParallelism 更改为您确定适合您正在做的工作的任何并发值。

您可能会感兴趣以下内容：

[Parallel.ForEach 方法](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)

[阻塞集合](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

克里斯

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-03T19:15:21.817

它对我有用。这样你就不能使用小于“minworkerThreads”的工作线程数。问题是如果您最多需要五个“workerthreads”而“minworkerThreads”是六个则不起作用。{

```
ThreadPool.GetMinThreads(out minworkerThreads,out minportThreads);
ThreadPool.SetMaxThreads(minworkerThreads, minportThreads); 
```

}

[MSDN](https://docs.microsoft.com/en-us/dotnet/api/system.threading.threadpool.setmaxthreads?view=net-5.0#remarks)

## **评论**

您不能将工作线程或 I/O 完成线程的最大数量设置为小于计算机上处​​理器数量的数字。要确定存在多少处理器，请检索 Environment.ProcessorCount 属性的值。此外，您不能将工作线程或 I/O 完成线程的最大数量设置为小于相应的工作线程或 I/O 完成线程的最小数量。要确定最小线程池大小，请调用 GetMinThreads 方法。

如果公共语言运行时由 Internet 信息服务 (IIS) 或 SQL Server 托管，则主机可以限制或阻止对线程池大小的更改。

更改线程池中的最大线程数时要小心。虽然您的代码可能会受益，但更改可能会对您使用的代码库产生不利影响。

将线程池大小设置得太大会导致性能问题。如果同时执行的线程太多，任务切换开销就成为一个重要因素。

# django - Django - 在用户创建时创建用户配置文件

> ID：11488974
> 
> 赞同：24
> 
> 时间：2012-07-15T02:43:02.820
> 
> 标签：django, django-registration, user-profile

我在[这里](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)关注 Django 文档以实现一个简单的目标：创建新用户后立即创建用户配置文件。

我有一个“帐户”应用程序，我的 accounts.models 看起来像这样：

```
# -*- coding: utf-8 -*-
from django.db import models
from django.db.models.signals import post_save
from django.contrib.auth.models import User
from main.models import Store

class UserProfile(models.Model):

    GENRE_CHOICES = (
        ('m', 'Masculino'),
        ('f', 'Feminino'),
    )
    MARITAL_STATUS_CHOICES = (
        ('s', 'Solteiro'),
        ('c', 'Casado'),
        ('d', 'Divorciado'),
        ('v', 'Viúvo'),
    )

    user = models.ForeignKey(User, unique=True)
    birth_date = models.DateField()
    genre = models.CharField(max_length=1, choices=GENRE_CHOICES)
    address = models.CharField(max_length=150)
    postal_code_4 = models.PositiveIntegerField()
    postal_code_3 = models.PositiveIntegerField()
    locatity = models.CharField(max_length=30)
    marital_status = models.CharField(max_length=1, choices=MARITAL_STATUS_CHOICES)
    child_amount = models.PositiveSmallIntegerField()
    is_merchant = models.BooleanField(default=False)
    store = models.ForeignKey(Store, null=True)

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

对我来说一切都很好，但是当尝试添加新用户（使用 django admin）时，我没有新创建的用户和用户配置文件，而是收到以下错误： **/admin/auth/user/add/ 当前事务的 InternalError 是中止，命令被忽略，直到事务块结束**

这是回溯错误部分：

```
/djangoProjects/lwboanova/lwboanova/apps/accounts/models.py in create_user_profile

34: UserProfile.objects.create(user=instance) 
```

这似乎是一个完整性错误，但我没有得到它的原因。

如果你们中的任何一个可以在这方面给我一些帮助，那就太好了。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-15T03:17:38.763

刚刚想通了。

我忘了添加`null=True`到其余的`UserProfile`模型字段。

所以`accounts.models.UserProfile`字段现在看起来像：

```
user = models.ForeignKey(User, unique=True)
birth_date = models.DateField(null=True)
genre = models.CharField(max_length=1, choices=GENRE_CHOICES, null=True)
address = models.CharField(max_length=150, null=True)
postal_code_4 = models.PositiveIntegerField(null=True)
postal_code_3 = models.PositiveIntegerField(null=True)
locatity = models.CharField(max_length=30, null=True)
marital_status = models.CharField(max_length=1, choices=MARITAL_STATUS_CHOICES, null=True)
child_amount = models.PositiveSmallIntegerField(null=True)
is_merchant = models.BooleanField(default=False)
store = models.ForeignKey(Store, null=True) 
```

...一切都按预期工作！

为帮助阿什雷干杯^^

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-03-15T02:07:08.483

你不应该使用：

```
user = models.ForeignKey(User, unique=True) 
```

而是使用这个：

```
from django.conf import settings
..
user = models.OneToOneField(settings.AUTH_USER_MODEL) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-09-09T20:43:21.820

您可以使用 Django Signals 创建它。参考[https://docs.djangoproject.com/en/2.2/topics/signals/](https://docs.djangoproject.com/en/2.2/topics/signals/)

将此添加到 settings.py 中的 installed_apps

```
# settings.py

INSTALLED_APPS = [
    ...
    'accounts.apps.AccountsConfig',
    ...

] 
```

注意：如果你`accounts`在 INSTALLED_APPS 中使用，你必须在**init** .py中初始化

在 models.py 中删除 create_user_profile

```
# models.py

from django.db import models
from django.db.models.signals import post_save
from django.contrib.auth.models import User
from main.models import Store

class UserProfile(models.Model):

    GENRE_CHOICES = (
        ('m', 'Masculino'),
        ('f', 'Feminino'),
    )
    MARITAL_STATUS_CHOICES = (
        ('s', 'Solteiro'),
        ('c', 'Casado'),
        ('d', 'Divorciado'),
        ('v', 'Viúvo'),
    )

    user = models.OneToOneField(User)
    birth_date = models.DateField()
    genre = models.CharField(max_length=1, choices=GENRE_CHOICES)
    address = models.CharField(max_length=150)
    postal_code_4 = models.PositiveIntegerField()
    postal_code_3 = models.PositiveIntegerField()
    locatity = models.CharField(max_length=30)
    marital_status = models.CharField(max_length=1, choices=MARITAL_STATUS_CHOICES)
    child_amount = models.PositiveSmallIntegerField()
    is_merchant = models.BooleanField(default=False)
    store = models.ForeignKey(Store, null=True) 
```

在signals.py中添加create_user_profile

```
# signals.py

from django.contrib.auth.models import User
from django.db.models.signals import post_save
from django.dispatch import receiver
from .models import UserProfile

@receiver(post_save, sender=User)
def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

@receiver(post_save, sender=User)
def save_user_profile(sender, instance, **kwargs):
    instance.profile.save() 
```

最后，编辑apps.py

```
# apps.py

from django.apps import AppConfig

class AccountsConfig(AppConfig):
    name = 'accounts'

    def ready(self):
        import accounts.signals 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-07T15:08:32.933

```
def create_profile(sender,**kwargs ):
    if kwargs['created']:
        user_profile=UserProfile.objects.create(user=kwargs['instance'])

post_save.connect(create_profile,sender=User) 
```

我想这会对你有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-04T18:28:50.053

```
@receiver(post_save, sender=User)
 def save_profile(sender, instance, **kwargs):
     instance.profile.save() 
```

像这样它会很容易阅读代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-15T14:34:31.853

```
@receiver(post_save, sender=User)
def create_or_update_user_profile(sender, instance, created, **kwargs):
    if created:
        Profile.objects.create(user=instance)
    instance.profile.save() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-08T00:14:02.830

```
 @receiver(post_save, sender=User)
    def create_user_profile(sender, instance, created, **kwargs):
        if kwargs.get('created', True) and not kwargs.get('raw', False):
            Profile.objects.create(user=instance) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-01T04:58:53.020

我成功尝试了这种方法

```
def create_profile(sender,**kwargs ):
    if kwargs['created']:
        user_profile=UserProfile(user=kwargs['instance'])
        user_profile.save()

post_save.connect(create_profile, sender=User) 
```

# php - 所有可能的组合，如何制作图案？php？

> ID：11488977
> 
> 赞同：1
> 
> 时间：2012-07-15T02:43:57.050
> 
> 标签：php, algorithm, combinations

我正在编写一个代码来消除不需要的组合，例如我（ABCDE）不想要 AAA BBB AB BA 只想要 ABC ABD ABE .... 等等，希望它在任何情况下都有效，我确实工作的示例代码那样：他在 3 上做了一组组合 (1-6) 3 ...但我希望他在 (1-15) 中使用 4 上 4 或 10 到 10 的组合 .... 更好地参见示例理解。

```
$lista = array(1,2,3,4,5,6);
$b=1;
for ($i=0; $i<=3; $i++) {
    for ($j=$b; $j<=4;$j++) {
    //  printf('valor do j = '.$j.'<br>');
        for ($k=$j+1; $k<count($lista); $k++) {
            printf($lista[$i].$lista[$j].$lista[$k].'<br>');
        }
    }
    $b++;
} 
```

结果

123
124
125
126
134
135
136
145
146
156
234
235
236
245
246
256
345
346
356
456

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T02:57:05.163

```
require_once 'Math/Combinatorics.php';
$combinatorics = new Math_Combinatorics;
$set = range(1,6);
$combosWithoutRepetition = $combinatorics->combinations($set, 3);
foreach ($combosWithoutRepetition as $combo) {
    echo join(',', $combo), "\n";
} 
```

[http://pear.php.net/package/Math_Combinatorics](http://pear.php.net/package/Math_Combinatorics)

您不需要安装 pear，只需下载该软件包并使用它即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T03:10:39.237

原始代码：[https](https://stackoverflow.com/a/2617080/661872) ://stackoverflow.com/a/2617080/661872我只是添加了`$len`一部分。

```
<?php 
// function to generate and print all N! permutations of $str. (N = strlen($str)).
function permute($str,$i,$n,$len) {
    global $ret;
    if ($i == $n){
        if(in_array(substr($str,0,$len),$ret)==false){$ret[]=substr($str,0,$len);}
    }else {
        for ($j = $i; $j < $n; $j++) {
            swap($str,$i,$j);
            permute($str, $i+1, $n, $len);
            swap($str,$i,$j); // backtrack.
        }
    }
}

// function to swap the char at pos $i and $j of $str.
function swap(&$str,$i,$j) {
    $temp = $str[$i];
    $str[$i] = $str[$j];
    $str[$j] = $temp;
}
$ret = array();
$str = "123456";
permute($str,0,strlen($str), 3); // call the function.

print_r($ret);
/**
 * Array
(
    [0] => 123
    [1] => 124
    [2] => 125
    [3] => 126
    [4] => 132
    [5] => 134
    [6] => 135
    [7] => 136
    [8] => 143
    [9] => 142
    [10] => 145
    [11] => 146
    [12] => 153
    [13] => 154
    [14] => 152
    [15] => 156
    [16] => 163
    [17] => 164
    [18] => 165
    [19] => 162
    [20] => 213
    [21] => 214
    [22] => 215
    [23] => 216
    [24] => 231
    [25] => 234
    [26] => 235
    [27] => 236
    [28] => 243
    [29] => 241
    [30] => 245
    [31] => 246
    [32] => 253
    [33] => 254
    [34] => 251
    [35] => 256
    [36] => 263
    [37] => 264
    [38] => 265
    [39] => 261
    [40] => 321
    [41] => 324
    [42] => 325
    [43] => 326
    [44] => 312
    [45] => 314
    [46] => 315
    [47] => 316
    [48] => 341
    [49] => 342
    [50] => 345
    [51] => 346
    [52] => 351
    [53] => 354
    [54] => 352
    [55] => 356
    [56] => 361
    [57] => 364
    [58] => 365
    [59] => 362
    [60] => 423
    [61] => 421
    [62] => 425
    [63] => 426
    [64] => 432
    [65] => 431
    [66] => 435
    [67] => 436
    [68] => 413
    [69] => 412
    [70] => 415
    [71] => 416
    [72] => 453
    [73] => 451
    [74] => 452
    [75] => 456
    [76] => 463
    [77] => 461
    [78] => 465
    [79] => 462
    [80] => 523
    [81] => 524
    [82] => 521
    [83] => 526
    [84] => 532
    [85] => 534
    [86] => 531
    [87] => 536
    [88] => 543
    [89] => 542
    [90] => 541
    [91] => 546
    [92] => 513
    [93] => 514
    [94] => 512
    [95] => 516
    [96] => 563
    [97] => 564
    [98] => 561
    [99] => 562
    [100] => 623
    [101] => 624
    [102] => 625
    [103] => 621
    [104] => 632
    [105] => 634
    [106] => 635
    [107] => 631
    [108] => 643
    [109] => 642
    [110] => 645
    [111] => 641
    [112] => 653
    [113] => 654
    [114] => 652
    [115] => 651
    [116] => 613
    [117] => 614
    [118] => 615
    [119] => 612
)
 */
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T15:02:28.693

我编写了一个类来处理处理二项式系数的常用函数，这是您的问题所属的问题类型。它执行以下任务：

1.  将任何 N 选择 K 的所有 K 索引以良好的格式输出到文件。K-indexes 可以替换为更具描述性的字符串或字母。这种方法使得解决这类问题变得非常简单。

2.  将 K 索引转换为已排序二项式系数表中条目的正确索引。这种技术比依赖迭代的旧已发布技术快得多。它通过使用帕斯卡三角形固有的数学属性来做到这一点。我的论文谈到了这一点。我相信我是第一个发现并发表这种技术的人，但我可能是错的。

3.  将已排序二项式系数表中的索引转换为相应的 K 索引。我相信它可能比您找到的链接更快。

4.  使用[Mark Dominus](http://blog.plover.com/math/choose.html)方法计算二项式系数，它不太可能溢出并且适用于更大的数字。

5.  该类是用 .NET C# 编写的，并提供了一种通过使用通用列表来管理与问题相关的对象（如果有）的方法。此类的构造函数采用一个名为 InitTable 的 bool 值，当它为 true 时，将创建一个通用列表来保存要管理的对象。如果此值为 false，则不会创建表。无需创建表即可执行上述 4 种方法。提供了访问器方法来访问表。

6.  有一个关联的测试类，它显示了如何使用该类及其方法。它已经用 2 个案例进行了广泛的测试，并且没有已知的错误。

要了解此类并下载代码，请参阅[制表二项式系数](http://tablizingthebinomialcoeff.wordpress.com/)。

将此类转换为 Perl 应该不难。另一种选择可能是将其转换为 Java，然后从 Perl 调用它。

从上面的示例中，您似乎正在使用 6 选择 3 的情况，这意味着一次有 6 个可能的项目要取 3 个。因此，执行此操作的一些示例代码如下所示：

```
// Create the binomial coefficient object for the 6 choose 3 case and
// do not bother to create the list of objects table.
BinCoeff<int> BC = new BinCoeff<int>(6, 3, false);
int[] KIndexes = new int[3];
int NumCombos6Choose3 = BinCoeff<int>.GetBinCoeff(6, 3);
// Loop through all of the combinations for this case.
for (int Loop = 0; Loop < NumCombos6Choose3; Loop++)
{
   // Get the K-Indexes for this combination.
   // The combinations are returned in rank order.
   BC.GetKIndexes(Loop, KIndexes);
   // Print out the K-Indexes or any other processing.
   ...
} 
```

# sql - 如何使用sql server中的每个循环？

> ID：11488978
> 
> 赞同：1
> 
> 时间：2012-07-15T02:43:59.503
> 
> 标签：sql, sql-server, foreach

我有一个`tblEmpDetail`包含一列的表`CreatedDate`。

我想为每个创建日期**添加 72 小时**，所以如果创建日期是，`2012-07-14 07:21:19.180`那么我希望输出为`2012-07-17 07:21:19.180`.

有人可以让我知道我该怎么做吗？

实际上我想要做的是去每一行然后检查是否

```
getdate() - createddate 
```

等于或少于72小时；那么我需要将 72 小时添加到`createddate`. 否则我希望该列为空。我正在粘贴我所做的代码。

```
Declare @PassedTime datetime
set @PassedTime= DATEDIFF(HH,Createddate, GETDATE())

if CONVERT(varchar(20),@PassedTime,108)>=CONVERT(varchar(20),'72:00:00',108)
begin
    select empno,empName,CreatedDate,dateadd(HH,72,CreatedDate)BD from tblEmpDetail 
end
else
begin
   select empno,empName,CreatedDate,'' as BD from tblEmpDetail
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T02:47:26.367

不需要循环。

SQL Server 擅长执行“基于集合”的查询。

要获得投影：

```
select
    CreatedDate,
    DateAdd(hour, 72, CreatedDate) [NewDate]
from
    tblEmpDetail 
```

要永久更新表：

```
update
    tblEmpDetail
set
    CreatedDate = DateAdd(hour, 72, CreatedDate) 
```

如果你必须有一个循环，你可以使用游标：

```
declare cur cursor fast_forward read_only for
select
    CreatedDate,
    DateAdd(hour, 72, CreatedDate) [NewDate]
from
    tblEmpDetail

-- here, you would use the cursor. 
```

此处有关游标的更多信息：http: [//msdn.microsoft.com/en-us/library/ms180169.aspx](http://msdn.microsoft.com/en-us/library/ms180169.aspx)

## 编辑

您上面的查询可以以基于集合的方式完成，如下所示：

```
select
    CreatedDate,
    CASE
        WHEN DateAdd(hour, 72, CreatedDate) <= GetDate() THEN NULL
        ELSE DateAdd(hour, 72, CreatedDate)
    END [NewDate]
from
    tblEmpDetail 
```

# android - 如何在点击收件箱中的对话时锁定屏幕？

> ID：11488980
> 
> 赞同：0
> 
> 时间：2012-07-15T02:44:26.910
> 
> 标签：android, sms

我是 android 新手，请帮助我，当我点击收件箱中的对话时，如果密码正确，则必须出现第一个锁屏，然后应该打开消息。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T03:19:01.013

当您单击对话时，打开一个[Dialog](http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)。执行密码验证。如果验证成功，[关闭对话框](http://developer.android.com/guide/topics/ui/dialogs.html#DismissingADialog)并打开消息。您可以启动另一个执行密码验证的活动，而不是对话框。使用[startActivityForResult()](http://developer.android.com/guide/components/activities.html#StartingAnActivityForResult)。

# json - jsonobject 不支持索引 0

> ID：11488981
> 
> 赞同：0
> 
> 时间：2012-07-15T02:44:53.140
> 
> 标签：json

我在一个android应用程序中有这个代码，它需要一个数组，其中每个元素都是一个包含jsonObject格式的字符串，但我想获取每个对象的值，所以使用它。问题是JsonObject不带索引 0，所以它盯着 1，我从来没有看到第一个对象的值 1。

```
for(int i=0;i<a.length;i++){
    try {
        JSONObject jsonn = new JSONObject(a[i]);
        g=jsonn.getString(TAG_ID);
        builder.append("\n"+i+"."+"id swicht: "+"\n"+g+"\n");
    }
} catch (JSONException e) {//e.printStackTrace();} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-20T08:45:45.960

根据您的评论，代码应为：

```
jsonStr = jsonStr.substring(1, jsonStr.length() - 1); // (remove the "[" and "]")
String[] a = jsonStr.split(",");
for(int i=0;i<a.length;i++){
    try {
        JSONObject jsonn = new JSONObject(a[i]);
        g = jsonn.getString(TAG_ID);
        builder.append("\n"+i+"."+"id swicht: "+"\n"+g+"\n");
    } catch (JSONException e) {//e.printStackTrace();}
} 
```

如果你不做第一行，数组中的第一个和最后一个元素将格式错误，无法转换 JSONObject -- "[{"dpid":"00:00:00:00:00:00:00:0c "}" 不是 JSONObject 的良好格式。

# ruby-on-rails - Rails 的 Active Recorded CUD 指南

> ID：11488984
> 
> 赞同：0
> 
> 时间：2012-07-15T02:45:10.423
> 
> 标签：ruby-on-rails

Rails 的官方站点有关于 Active Record 迁移、验证、关联和查询（读取）的良好[指南](http://guides.rubyonrails.org/)，但我找不到关于 C（创建）、U（更新）、D（删除）的指南。我错过了什么吗？作者是否认为初学者应该从 API 文档中弄清楚这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:24:34.643

看脚手架。试试这个作为开始：

```
$ rails g scaffold Foo bar:string 
```

查看生成了哪些文件以及它们是如何工作的。

# php - 用php检测远程url的重定向

> ID：11488985
> 
> 赞同：2
> 
> 时间：2012-07-15T02:45:33.023
> 
> 标签：php, redirect, curl

我有一个 php 页面，它在其中加载一些预定义的选项和带有 html 代码的文本框。
稍后它会在远程页面上发布数据。

```
<img src="data:<?php echo $captchaQuery['content_type'] ?>;base64,<?php echo $captcha ?>" alt="Captcha" height="30" align="absbottom" id="msg_captcha" name="msg_captcha">
<input type="text" name="f_captcha" size="8" maxlength="5">
<input type="submit" value="SEND" class="btnorange"> 
```

大部分时间一切正常，包括远程验证码验证。当我按下发送按钮时，页面提交到远程 url 并重新加载 php 页面。

我的问题是，'当用户在文本框中输入错误数据时，远程站点会重定向到另一个页面，我怎样才能抓住该重定向链接并将用户重定向到该页面而不是重新加载我的 php？

提交数据的目标 url 是： $baseurl 。?psean=。

如果有错误重定向到： $baseurl 。?psean=验证码错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T03:37:44.010

查看服务器是否在响应标头中发送重定向位置

```
$url = "http://www.fb.com";
$headers = get_headers($url, 1);
if(!empty($headers['Location'])) {
  $location = (array) $headers['Location'];
  header('Location:' . end($location));
} 
```

# java - 为什么我在 Java 中收到 Unreachable Statement 错误？

> ID：11488988
> 
> 赞同：0
> 
> 时间：2012-07-15T02:45:39.877
> 
> 标签：java, file-io, compiler-errors

当我尝试编译[这个程序](http://ideone.com/7KfWn)时，我在第 21 行收到“无法访问的语句”错误：

```
import java.util.*;
import java.io.*;
import java.nio.file.*;
import java.lang.StringBuilder;

class FilePrep {
    public static void main(String args[]) {
    }
    public String getStringFromBuffer() {
        try {
            Path file = Paths.get("testfile2.txt");
            FileInputStream fstream = new FileInputStream("testfile2.txt");
            BufferedReader br = new BufferedReader(new InputStreamReader(fstream));  
                String inputLine = null;                    
            StringBuffer theText = new StringBuffer();  

            while((inputLine=br.readLine())!=null) {
                theText.append(inputLine+" ");
            }
            return theText.toString();
            System.out.println(theText); // <-- line 21
        }
        catch (Exception e)
        {
            System.err.println("Error: " + e.getMessage());
            return null;
        }
    }
} 
```

完整的编译器输出是：

```
Main.java:21: error: unreachable statement
            System.out.println(theText);
            ^
Main.java:28: error: missing return statement
    }
    ^
2 errors 
```

我*认为*这些`return`陈述在正确的地方......至少对我来说它们似乎是，与我克隆它的程序相比，该程序似乎如此简单，我很难弄清楚为什么会这样声明无法访问。

复制代码时我做错了什么，我需要如何更正？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T02:49:40.530

假设您的问题在这里，您是对的：

```
return theText.toString();
System.out.println(theText); 
```

该`return`函数将**终止**您的方法，这意味着不会执行任何超过它的代码行。如果您希望打印通过，则应将其移至返回语句上方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T02:48:45.957

您在 return 声明之后有一个声明。这是两个有问题的行：

```
return theText.toString();
System.out.println(theText); 
```

切换它们。

```
System.out.println(theText);
return theText.toString(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T02:49:19.417

当`return`语句被执行时，该方法将控制权交给它的调用者。这就是为什么`println`不会运行；这就是编译器抱怨的原因。

无法访问的语句是程序中逻辑错误的确定且可靠的指标。这意味着您输入了不会执行的语句，但您假设它们会执行。编译器分析流程，并将这些语句作为错误消息报告给您。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T02:49:59.243

print 语句出现在**return**语句之后。该函数将始终在到达 print 语句之前退出。“遥不可及”

```
 return theText.toString(); 
        System.out.println(theText); 
```

交换两行的顺序，它将起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-15T06:48:16.847

该`return`语句应始终位于定义块的末尾或最后一行。如果您在语句之后保留任何语句，则`return`这些语句是控制器无法访问的语句。通过 using`return`语句，我们告诉控制应该明确地返回给它的调用者。

例如

```
public class Z
{
    public int test()
    {
        System.out.println(10);
        return 10;
        System.out.println(20);
    }
} 
```

在这个例子中，我们得到编译时错误，`unreachable code`因为控制无法到达最后一个执行语句。

因此，always`return`语句应该是定义块的最后一条语句。

# javascript - 这是一个有效的 jQuery 插件模式吗？

> ID：11488991
> 
> 赞同：0
> 
> 时间：2012-07-15T02:46:13.657
> 
> 标签：javascript, jquery, design-patterns, jquery-plugins, plugins

```
(function( $ ){  
    MY_SINGLETON_OBJ = MY_SINGLETON_OBJ || (function () { // initialize the singleton using an immediate anonymous function which returns an object
        // init here (only happens once even if this plugin is included multiple times)
        console.log("Initialized");
        return {
            version: "0.1"
            // return values that are to be accessible from the singleton
        };
    })();
    $.fn.MyJqueryObjectMethod = function (a, b, c) {
        // perform tasks
        return this; // maintain chainability
    };
})(jQuery); 
```

单例正在污染全局命名空间。有没有更好的方法来定义它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T02:55:31.493

在我看来它会起作用，尽管我认为你至少应该全局声明你的单例而不是使用隐式定义。

你不必那么棘手。你可以很容易地做到这一点，我认为它更具可读性和明显性：

```
// explicit global definition
var MY_SINGLETON_OBJ;

(function( $ ){  
    if (!MY_SINGLETON_OBJ) {
        // initalize the singleton here
        MY_SINGLETON_OBJ = {};
        MY_SINGLETON_OBJ.prop1 = 1;
    }
    $.fn.MyJqueryObjectMethod = function (a, b, c) {
        // perform tasks
        return this; // maintain chainability
    };
})(jQuery); 
```

# c# - 在这种情况下，如何处理/释放字符串文件？

> ID：11488995
> 
> 赞同：1
> 
> 时间：2012-07-15T02:46:53.403
> 
> 标签：c#

我试图使用 using 但在使用它时遇到错误。

```
public void Save(string path , bool Locked , PictureBox pb)
        {
            string fn;
            string t = Path.GetFileNameWithoutExtension(wo_name);
            if (File.Exists(path + "\\" + "DATABASE" + "\\" + t + "\\" + wo_name))
            {
                using  (string f = Path.Combine(path + "\\" + "DATABASE" + "\\" + t + "\\" + wo_name))
                {
                    File.Delete(f);
                }

                fn = path + "\\" + "DATABASE" + "\\" + t + "\\" + wo_name;
            }
            else
            {
                fn = path + "\\" + "DATABASE" + "\\" + wo_name + "\\" + wo_name + ".txt";
            }
            OptionsFile setting_file = new OptionsFile(fn);
            setting_file.SetKey("File Name", fn);
            setting_file.SetKey("Version", version);
            setting_file.SetKey("Button Lock", Locked.ToString());

            setting_file.SetKey("picturebox.Width", pb.Width.ToString());
            setting_file.SetKey("picturebox.Height", pb.Height.ToString());
                setting_file.SetListFloatKey("Coordinates_X", woc.Point_X);
                setting_file.SetListFloatKey("Coordinates_Y", woc.Point_Y);

                setting_file.SetListIntKey("ConnectionStart", connectionStart);
                setting_file.SetListIntKey("ConnectionEnd", connectionEnd);

        } 
```

在上面的这个保存功能中，我做了：

```
using  (string f = Path.Combine(path + "\\" + "DATABASE" + "\\" + t + "\\" + wo_name))
                    {
                        File.Delete(f);
                    } 
```

在它之前只有 string f = ....Path.... 和 Fiel.Delete 我刚刚添加了 using 但在 using 上出现错误：'string': type used in a using statement must be implicitly convertible to 'System.IDisposable'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T04:42:59.373

类上有`Close`or`Dispose`方法`OptionsFile`吗？在退出`Save`and`Load`函数之前，您应该确保调用其中一个或另一个。如果你不这样做，那么你可能不得不等到`setting_file`实例被垃圾回收之后，文件上的锁才会被释放。如果您不分配大量内存，则可能需要一段时间！

如果`OptionsFile.Dispose`存在，则将您的使用包含`OptionsFile`在一个`using`语句中，该语句将`Dispose`在语句末尾自动为您调用，即使抛出异常也是如此。

```
 public void Save(string path , bool Locked , PictureBox pb) 
    { 
        string fn; 
        string t = Path.GetFileNameWithoutExtension(wo_name); 
        if (File.Exists(path + "\\" + "DATABASE" + "\\" + t + "\\" + wo_name)) 
        { 
            string f = Path.Combine(path + "\\" + "DATABASE" + "\\" + t + "\\" + wo_name); 
            File.Delete(f); 

            fn = path + "\\" + "DATABASE" + "\\" + t + "\\" + wo_name; 
        } 
        else 
        { 
            fn = path + "\\" + "DATABASE" + "\\" + wo_name + "\\" + wo_name + ".txt"; 
        } 

        using (OptionsFile setting_file = new OptionsFile(fn))
        {
            setting_file.SetKey("File Name", fn); 
            setting_file.SetKey("Version", version); 
            setting_file.SetKey("Button Lock", Locked.ToString()); 

            setting_file.SetKey("picturebox.Width", pb.Width.ToString()); 
            setting_file.SetKey("picturebox.Height", pb.Height.ToString()); 
            setting_file.SetListFloatKey("Coordinates_X", woc.Point_X); 
            setting_file.SetListFloatKey("Coordinates_Y", woc.Point_Y); 

            setting_file.SetListIntKey("ConnectionStart", connectionStart); 
            setting_file.SetListIntKey("ConnectionEnd", connectionEnd); 
        }
    } 

    public void Load( string path) 
    { 
        string fn = path + "\\" + wo_name;  
        using (OptionsFile setting_file = new OptionsFile(fn))
        {
            woc.Point_X = new List<float>(); 
            woc.Point_Y = new List<float>(); 

            woc.Point_X = setting_file.GetListFloatKey("Coordinates_X"); 
            woc.Point_Y = setting_file.GetListFloatKey("Coordinates_Y"); 

            connectionStart = new List<int>(); 
            connectionEnd = new List<int>(); 

            connectionStart = setting_file.GetListIntKey("ConnectionStart"); 
            connectionEnd = setting_file.GetListIntKey("ConnectionEnd"); 

            lockObject = setting_file.GetKey("Button Lock"); 
        }
    } 
```

如果`OptionsFile.Close`存在，则将您的使用包含`OptionsFile`在一个块中，这样即使抛出异常`try/finally`，您也可以确保被调用。`Close`

```
 public void Save(string path , bool Locked , PictureBox pb) 
    { 
        string fn; 
        string t = Path.GetFileNameWithoutExtension(wo_name); 
        if (File.Exists(path + "\\" + "DATABASE" + "\\" + t + "\\" + wo_name)) 
        { 
            string f = Path.Combine(path + "\\" + "DATABASE" + "\\" + t + "\\" + wo_name); 
            File.Delete(f); 

            fn = path + "\\" + "DATABASE" + "\\" + t + "\\" + wo_name; 
        } 
        else 
        { 
            fn = path + "\\" + "DATABASE" + "\\" + wo_name + "\\" + wo_name + ".txt"; 
        } 

        OptionsFile setting_file = null;
        try
        {
            setting_file = new OptionsFile(fn);

            setting_file.SetKey("File Name", fn); 
            setting_file.SetKey("Version", version); 
            setting_file.SetKey("Button Lock", Locked.ToString()); 

            setting_file.SetKey("picturebox.Width", pb.Width.ToString()); 
            setting_file.SetKey("picturebox.Height", pb.Height.ToString()); 
            setting_file.SetListFloatKey("Coordinates_X", woc.Point_X); 
            setting_file.SetListFloatKey("Coordinates_Y", woc.Point_Y); 

            setting_file.SetListIntKey("ConnectionStart", connectionStart); 
            setting_file.SetListIntKey("ConnectionEnd", connectionEnd); 
        }
        finally
        {
            if (setting_file != null)
                setting_file.Close();
        }
    } 

    public void Load( string path) 
    { 
        string fn = path + "\\" + wo_name;  

        OptionsFile setting_file = null;
        try
        {
            setting_file = new OptionsFile(fn);

            woc.Point_X = new List<float>(); 
            woc.Point_Y = new List<float>(); 

            woc.Point_X = setting_file.GetListFloatKey("Coordinates_X"); 
            woc.Point_Y = setting_file.GetListFloatKey("Coordinates_Y"); 

            connectionStart = new List<int>(); 
            connectionEnd = new List<int>(); 

            connectionStart = setting_file.GetListIntKey("ConnectionStart"); 
            connectionEnd = setting_file.GetListIntKey("ConnectionEnd"); 

            lockObject = setting_file.GetKey("Button Lock"); 
        }
        finally
        {
            if (setting_file != null)
                setting_file.Close();
        }
    } 
```

如果您没有一个`Dispose`或一个`Close`方法，那么您需要修改您的`OptionsFile`类以实现`IDisposable`或拥有一个`Close`方法，然后您将关闭或处置任何`Stream`基于实例的实例。

# android - 在不更改源代码的情况下将 iPhone 应用程序转换为 Android 的可能性？

> ID：11488996
> 
> 赞同：0
> 
> 时间：2012-07-15T02:46:56.950
> 
> 标签：android, iphone, apk, ipa, iphone-developer-program

我曾经看到一个网站提供将 IPA 文件转换为 APK 的服务。假设您只需在 Xcode 中安装他们的 SDK。您不需要将代码从 Objective-C 移植到 Java。

但我再也找不到它了。有谁知道这样的网站/服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T03:01:28.417

[将iOS游戏移植到Android的合适](http://www.apportable.com/)提议，但我自己从未使用过它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:26:34.337

我想在这里做同样的事情，我偶然发现了这个网站： [http](http://www.yeecco.com) ://www.yeecco.com 它提供了一项服务，可以根据我所知道的情况为三星商店准备好的应用程序转换 ipa 文件。但我没有使用它，因为它的拼写和语法很差，看起来不太合法。

# ruby-on-rails - 如何检查类或模块是否已命名空间？

> ID：11488999
> 
> 赞同：4
> 
> 时间：2012-07-15T02:47:19.407
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, class, namespaces

我正在使用 Ruby on Rails 3.2.2，我想知道是否可以检查类或模块是否已命名空间。也就是说，我想运行类似下面的东西

```
ANamespaceName::AnotherNamespaceName::AClassName.is_namespaced?
#=> true
ANamespaceName::AClassName.is_namespaced?
#=> true
AClassName.is_namespaced?
#=> false 
```

在上面的代码中，问题与声明/实现该`is_namespaced?`方法有关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T03:02:56.993

从“[如何在 Ruby on Rails 中以编程方式找到命名空间/模块名称？](https://stackoverflow.com/questions/133357/how-do-you-find-the-namespace-module-name-programatically-in-ruby-on-rails) ”工作，您可以使用`::`类名中的存在来测试是否存在关联的模块。

```
def self.is_namespaced?
    self.name.include? "::"
end 
```