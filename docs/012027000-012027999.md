# StackOverflow 问答 12027000-12027999

# iphone - 如何向后播放音频？

> ID：12027003
> 
> 赞同：3
> 
> 时间：2012-08-19T13:53:45.063
> 
> 标签：iphone, ios, ipad, audio, core-audio

有人建议从头到尾读取音频数据并创建一个从头到尾写入的副本，然后简单地播放反转的音频数据。

是否有 iOS 的现有示例如何做到这一点？

我找到了一个名为 MixerHost 的示例项目，它在某些时候使用 `AudioUnitSampleType`保存从文件中读取的音频数据，并将其分配给缓冲区。

这被定义为：

```
typedef SInt32 AudioUnitSampleType;
#define kAudioUnitSampleFractionBits 24 
```

根据苹果的说法：

> iPhone OS 中音频单元和其他音频处理的规范音频样本类型是具有 8.24 位定点样本的非交错线性 PCM。

所以换句话说，它保存了非交错线性 PCM 音频数据。

但我无法弄清楚这些数据在哪里被读取，以及它存储在哪里。这是加载音频数据并对其进行缓冲的代码：

```
- (void) readAudioFilesIntoMemory {

    for (int audioFile = 0; audioFile < NUM_FILES; ++audioFile)  {

        NSLog (@"readAudioFilesIntoMemory - file %i", audioFile);

        // Instantiate an extended audio file object.
        ExtAudioFileRef audioFileObject = 0;

        // Open an audio file and associate it with the extended audio file object.
        OSStatus result = ExtAudioFileOpenURL (sourceURLArray[audioFile], &audioFileObject);

        if (noErr != result || NULL == audioFileObject) {[self printErrorMessage: @"ExtAudioFileOpenURL" withStatus: result]; return;}

        // Get the audio file's length in frames.
        UInt64 totalFramesInFile = 0;
        UInt32 frameLengthPropertySize = sizeof (totalFramesInFile);

        result =    ExtAudioFileGetProperty (
                        audioFileObject,
                        kExtAudioFileProperty_FileLengthFrames,
                        &frameLengthPropertySize,
                        &totalFramesInFile
                    );

        if (noErr != result) {[self printErrorMessage: @"ExtAudioFileGetProperty (audio file length in frames)" withStatus: result]; return;}

        // Assign the frame count to the soundStructArray instance variable
        soundStructArray[audioFile].frameCount = totalFramesInFile;

        // Get the audio file's number of channels.
        AudioStreamBasicDescription fileAudioFormat = {0};
        UInt32 formatPropertySize = sizeof (fileAudioFormat);

        result =    ExtAudioFileGetProperty (
                        audioFileObject,
                        kExtAudioFileProperty_FileDataFormat,
                        &formatPropertySize,
                        &fileAudioFormat
                    );

        if (noErr != result) {[self printErrorMessage: @"ExtAudioFileGetProperty (file audio format)" withStatus: result]; return;}

        UInt32 channelCount = fileAudioFormat.mChannelsPerFrame;

        // Allocate memory in the soundStructArray instance variable to hold the left channel, 
        //    or mono, audio data
        soundStructArray[audioFile].audioDataLeft =
            (AudioUnitSampleType *) calloc (totalFramesInFile, sizeof (AudioUnitSampleType));

        AudioStreamBasicDescription importFormat = {0};
        if (2 == channelCount) {

            soundStructArray[audioFile].isStereo = YES;
            // Sound is stereo, so allocate memory in the soundStructArray instance variable to  
            //    hold the right channel audio data
            soundStructArray[audioFile].audioDataRight =
                (AudioUnitSampleType *) calloc (totalFramesInFile, sizeof (AudioUnitSampleType));
            importFormat = stereoStreamFormat;

        } else if (1 == channelCount) {

            soundStructArray[audioFile].isStereo = NO;
            importFormat = monoStreamFormat;

        } else {

            NSLog (@"*** WARNING: File format not supported - wrong number of channels");
            ExtAudioFileDispose (audioFileObject);
            return;
        }

        // Assign the appropriate mixer input bus stream data format to the extended audio 
        //        file object. This is the format used for the audio data placed into the audio 
        //        buffer in the SoundStruct data structure, which is in turn used in the 
        //        inputRenderCallback callback function.

        result =    ExtAudioFileSetProperty (
                        audioFileObject,
                        kExtAudioFileProperty_ClientDataFormat,
                        sizeof (importFormat),
                        &importFormat
                    );

        if (noErr != result) {[self printErrorMessage: @"ExtAudioFileSetProperty (client data format)" withStatus: result]; return;}

        // Set up an AudioBufferList struct, which has two roles:
        //
        //        1\. It gives the ExtAudioFileRead function the configuration it 
        //            needs to correctly provide the data to the buffer.
        //
        //        2\. It points to the soundStructArray[audioFile].audioDataLeft buffer, so 
        //            that audio data obtained from disk using the ExtAudioFileRead function
        //            goes to that buffer

        // Allocate memory for the buffer list struct according to the number of 
        //    channels it represents.
        AudioBufferList *bufferList;

        bufferList = (AudioBufferList *) malloc (
            sizeof (AudioBufferList) + sizeof (AudioBuffer) * (channelCount - 1)
        );

        if (NULL == bufferList) {NSLog (@"*** malloc failure for allocating bufferList memory"); return;}

        // initialize the mNumberBuffers member
        bufferList->mNumberBuffers = channelCount;

        // initialize the mBuffers member to 0
        AudioBuffer emptyBuffer = {0};
        size_t arrayIndex;
        for (arrayIndex = 0; arrayIndex < channelCount; arrayIndex++) {
            bufferList->mBuffers[arrayIndex] = emptyBuffer;
        }

        // set up the AudioBuffer structs in the buffer list
        bufferList->mBuffers[0].mNumberChannels  = 1;
        bufferList->mBuffers[0].mDataByteSize    = totalFramesInFile * sizeof (AudioUnitSampleType);
        bufferList->mBuffers[0].mData            = soundStructArray[audioFile].audioDataLeft;

        if (2 == channelCount) {
            bufferList->mBuffers[1].mNumberChannels  = 1;
            bufferList->mBuffers[1].mDataByteSize    = totalFramesInFile * sizeof (AudioUnitSampleType);
            bufferList->mBuffers[1].mData            = soundStructArray[audioFile].audioDataRight;
        }

        // Perform a synchronous, sequential read of the audio data out of the file and
        //    into the soundStructArray[audioFile].audioDataLeft and (if stereo) .audioDataRight members.
        UInt32 numberOfPacketsToRead = (UInt32) totalFramesInFile;

        result = ExtAudioFileRead (
                     audioFileObject,
                     &numberOfPacketsToRead,
                     bufferList
                 );

        free (bufferList);

        if (noErr != result) {

            [self printErrorMessage: @"ExtAudioFileRead failure - " withStatus: result];

            // If reading from the file failed, then free the memory for the sound buffer.
            free (soundStructArray[audioFile].audioDataLeft);
            soundStructArray[audioFile].audioDataLeft = 0;

            if (2 == channelCount) {
                free (soundStructArray[audioFile].audioDataRight);
                soundStructArray[audioFile].audioDataRight = 0;
            }

            ExtAudioFileDispose (audioFileObject);            
            return;
        }

        NSLog (@"Finished reading file %i into memory", audioFile);

        // Set the sample index to zero, so that playback starts at the 
        //    beginning of the sound.
        soundStructArray[audioFile].sampleNumber = 0;

        // Dispose of the extended audio file object, which also
        //    closes the associated file.
        ExtAudioFileDispose (audioFileObject);
    }
} 
```

哪个部分包含必须反转的音频样本数组？是`AudioUnitSampleType`吗？

```
bufferList->mBuffers[0].mData = soundStructArray[audioFile].audioDataLeft; 
```

注意：audioDataLeft 被定义为一个`AudioUnitSampleType`，它是一个 SInt32 但不是一个数组。

[我在Core Audio 邮件列表](http://www.mailinglistarchive.com/coreaudio-api@lists.apple.com/msg04441.html)中找到了一条线索：

> 好吧，据我所知，与 iPh*n* 无关（除非省略了某些音频 API ——我不是该程序的成员）。AFAIR、AudioFile.h 和 ExtendedAudioFile.h 应该为您提供读取或写入 caf 并访问其流/通道所需的内容。基本上，您想向后读取每个通道/流，因此，如果您不需要音频文件的属性，那么一旦您处理了该通道的数据，假设它不是压缩格式，它就非常简单。考虑到 caf 可以表示的格式数量，这可能需要比您想象的多几行代码。一旦你处理了未压缩的数据，它应该和反转字符串一样简单。然后你当然会用反转的数据替换文件的数据，

这是我尝试过的，但是当我将反向缓冲区分配给两个通道的 mData 时，我什么也没听到：

```
AudioUnitSampleType *leftData = soundStructArray[audioFile].audioDataLeft;
AudioUnitSampleType *reversedData = (AudioUnitSampleType *) calloc (totalFramesInFile, sizeof (AudioUnitSampleType));
UInt64 j = 0;
for (UInt64 i = (totalFramesInFile - 1); i > -1; i--) {
    reversedData[j] = leftData[i];
    j++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T07:54:10.503

我开发了一个示例应用程序，它记录用户所说的内容并向后播放。我已经使用 CoreAudio 来实现这一点。[链接到应用程序代码](https://github.com/kiranb/iReversePlay)。

/* 因为每个样本的大小为 16 位（2 字节）（单通道）。您可以通过从记录结束开始并向后读取将其复制到不同的缓冲区来一次加载每个样本。当您到达数据的开头时，您已经反转了数据并且播放将被反转。*/

```
// set up output file
AudioFileID outputAudioFile;

AudioStreamBasicDescription myPCMFormat;
myPCMFormat.mSampleRate = 16000.00;
myPCMFormat.mFormatID = kAudioFormatLinearPCM ;
myPCMFormat.mFormatFlags =  kAudioFormatFlagsCanonical;
myPCMFormat.mChannelsPerFrame = 1;
myPCMFormat.mFramesPerPacket = 1;
myPCMFormat.mBitsPerChannel = 16;
myPCMFormat.mBytesPerPacket = 2;
myPCMFormat.mBytesPerFrame = 2;

AudioFileCreateWithURL((__bridge CFURLRef)self.flippedAudioUrl,
                       kAudioFileCAFType,
                       &myPCMFormat,
                       kAudioFileFlags_EraseFile,
                       &outputAudioFile);
// set up input file
AudioFileID inputAudioFile;
OSStatus theErr = noErr;
UInt64 fileDataSize = 0;

AudioStreamBasicDescription theFileFormat;
UInt32 thePropertySize = sizeof(theFileFormat);

theErr = AudioFileOpenURL((__bridge CFURLRef)self.recordedAudioUrl, kAudioFileReadPermission, 0, &inputAudioFile);

thePropertySize = sizeof(fileDataSize);
theErr = AudioFileGetProperty(inputAudioFile, kAudioFilePropertyAudioDataByteCount, &thePropertySize, &fileDataSize);

UInt32 dataSize = fileDataSize;
void* theData = malloc(dataSize);

//Read data into buffer
UInt32 readPoint  = dataSize;
UInt32 writePoint = 0;
while( readPoint > 0 )
{
    UInt32 bytesToRead = 2;

    AudioFileReadBytes( inputAudioFile, false, readPoint, &bytesToRead, theData );
    AudioFileWriteBytes( outputAudioFile, false, writePoint, &bytesToRead, theData );

    writePoint += 2;
    readPoint -= 2;
}

free(theData);
AudioFileClose(inputAudioFile);
AudioFileClose(outputAudioFile); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:29:45.227

> 通常，当使用 ASBD 时，这些字段描述了由该描述表示的缓冲区中样本数据的完整布局 - 通常这些缓冲区由包含在 AudioBufferList 中的 AudioBuffer 表示。
> 
> 但是，当 ASBD 具有 kAudioFormatFlagIsNonInterleaved 标志时，AudioBufferList 具有不同的结构和语义。在这种情况下，ASBD 字段将描述列表中包含的一个 AudioBuffer 的格式，并且列表中的每个 AudioBuffer 都被确定为具有单个（单声道）音频数据通道。然后，ASBD 的 mChannelsPerFrame 将指示 AudioBufferList 中包含的 AudioBuffers 的总数 - 其中每个缓冲区包含一个通道。这主要用于此列表的 AudioUnit（和 AudioConverter）表示 - 并且不会在此结构的 AudioHardware 使用中找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T04:24:44.787

您不必分配单独的缓冲区来存储反转的数据，这可能会占用相当多的 CPU，具体取决于声音的长度。要向后播放声音，只需让 sampleNumber 计数器从 totalFramesInFile - 1 开始。

您可以像这样修改 MixerHost，以达到预期的效果。

替换`soundStructArray[audioFile].sampleNumber = 0;`为 `soundStructArray[audioFile].sampleNumber = totalFramesInFile - 1;`

制作 sampleNumber SInt32 而不是 UInt32。

用这个替换你写出样本的循环。

> ```
> for (UInt32 frameNumber = 0; frameNumber < inNumberFrames; ++frameNumber) {
>     outSamplesChannelLeft[frameNumber]                 = dataInLeft[sampleNumber];
>     if (isStereo) outSamplesChannelRight[frameNumber]  = dataInRight[sampleNumber];
> 
>     if (--sampleNumber < 0) sampleNumber = frameTotalForSound - 1;
> } 
> ```

这有效地使它向后播放。嗯。我已经有一段时间没有听到 MixerHost 的音乐了。我必须承认我觉得这很令人愉快。

# character-encoding - html表单帖子中奇怪的前导unicode

> ID：12027007
> 
> 赞同：0
> 
> 时间：2012-08-19T13:53:50.603
> 
> 标签：character-encoding

有时我会发生这些错误：

```
An invalid character was found in the mail header: '‎' 
```

这没有任何意义，经过调查，那里似乎有一些看不见的角色。

我知道这是哪个用户，所以我从数据库中选择它们：

```
select email from user where email = 'their@address.com' 
```

用户的电子邮件显示为`their@address.com`，但将其复制到文本编辑器中，会显示一个奇怪的前导字符：

![在此处输入图像描述](../Images/7ca7fa19bc944b41ea77b1e88cd9e2fd.png)

那么，当它不是同一个字符串时，为什么 sql 相等运算符匹配？因为它有一些看不见的字符？

~~如果我将文本文件中的前导字符保存为 unicode 并在十六进制编辑器中打开它，我会看到：~~

 ~~```
FF FE 0E 20 
```~~  ~~**更新：**有问题的字节是：

```
E2 80 8E 
```

这是什么疯狂，它是如何到达那里的？

将来如何防止这种情况，以及如何清理我的数据库（因为其中有一些）

这些是创建用户时的相关标头：

```
Content-Type: application/x-www-form-urlencoded
Accept: application/json, text/javascript, */*; q=0.01
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:10:24.170

字节FF FE是UTF-16BE编码的U+FEFF BYTE ORDER MARK，同样编码的0E 20是U+200E LEFT-TO-RIGHT MARK。在文件的开头，它们是无害的，至少如果内容是从左到右的书写系统，比如拉丁字母。

我无法猜测它们的来源，特别是因为我不太了解正在讨论的文件以及它是如何创建的（来自表单帖子？来自数据库？其他方式？如何？）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T13:57:53.270

FFFE 是[Unicode 字节顺序标记 (BOM)](http://www.unicode.org/faq/utf_bom.html)。

**编辑：**

0E20 是[泰语字符 PHO SAMPHAO](http://www.fileformat.info/info/unicode/char/0e20/index.htm)。不知道那可能来自哪里。~~

# javascript - 防止 qtip 文本呈现 html

> ID：12027010
> 
> 赞同：2
> 
> 时间：2012-08-19T13:54:21.617
> 
> 标签：javascript, html, qtip2

我想使用基于 jQuery 的工具提示[qTip2](http://craigsworks.com/projects/qtip2/)来提供代码片段，以便用户可以复制将我的网站嵌入他们网站的代码。我只想提供代码，但我不知道如何使 qTip2 不呈现 html。以下代码导致网站在工具提示中显示为 iframe（这很酷，但不是我想要的！）。

```
$('.myclass').qtip({
    content: {
        text: $('<pre><code><iframe src="http://mysite.com/" style="width: 100%; height: 700px"></iframe></<code></pre>')
    },
    position: {
           my: 'bottom center',
           at: 'top center'
        }
}); 
```

我试过使用`<pre>`and `<!-- ,,, -->`。`<pre>`不起作用（站点仍然出现）并`<!-- -->`破坏工具提示。我也试过`text: '<iframe> ... '`把`$('`这块放在外面。如何禁用此代码的呈现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:06:04.140

也许尝试这样的事情？

```
$('.myclass').qtip({
    content: {
        text: '<pre>&lt;iframe src=&quot;http://mysite.com/&quot; style=&quot;width: 100%; height: 700px&quot;&gt;&lt;/iframe&gt;</pre>')
    },
    position: {
       my: 'bottom center',
       at: 'top center'
    }
}); 
```

我不确定 qTip 是否也会尝试将该`<pre>`部分转义`&lt;pre%gt;`。如果最终是这种情况，我将删除我的答案！

有关更多信息，请参阅[使用 jQuery 转义 HTML 字符串。](https://stackoverflow.com/questions/24816/escaping-html-strings-with-jquery)

# java - 防止向用户显示任何异常？

> ID：12027014
> 
> 赞同：2
> 
> 时间：2012-08-19T13:54:40.977
> 
> 标签：java, jsf, exception, jakarta-ee

如何防止向用户显示发生的任何异常？*如果发生任何*错误，我可以想象将用户重定向到特定页面。

特别是我想防止像这样的 HTTP 状态 500 视图异常：

```
javax.faces.application.ViewExpiredException: /index.xhtmlNo saved view state could be found for the view identifier: /index.xhtml
    at org.apache.myfaces.lifecycle.RestoreViewExecutor.execute(RestoreViewExecutor.java:132)
    at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:170)
    at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:117)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:197) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T13:57:44.497

基本上，您可以将异常处理程序添加到 MyFaces 配置中。

您需要提供一个工厂方法，然后提供一个实现。您还需要设置错误页面重定向。

[https://cwiki.apache.org/MYFACES/handling-server-errors.html](https://cwiki.apache.org/MYFACES/handling-server-errors.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:43:02.197

为什么不在您的 ? 中定义自定义错误页面`web.xml`？您可以指定 HTTP 错误代码，如下所示：

```
<error-page>
    <error-code>500</error-code>
    <location>/myerror.jsp</location>
</error-page> 
```

...或 Java 异常类：

```
<error-page>
    <exception-type>java.lang.Throwable</exception-type>
    <location>/myerror.jsp</location>
</error-page> 
```

这个解决方案的优点是不需要任何额外的实现——除了错误页面本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T13:57:55.957

在 catch 块中**删除**`printStackTrace()`方法...并**编写重定向**代码

**例如：**

```
try{

        // Your code

     }catch(Exception ex){

       // Redirection Code

     } 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-19T14:16:52.147

同意@Kumar Vivek Mitra，但我认为您可以在 finally 块中添加重定向

```
 try{

    // Your code

 }catch(Exception ex){

   // syserr

 }finally{
      //redirect
 } 
```

# php - PHP 中 MySQL 二进制 GEOMETRY 字段的转换

> ID：12027025
> 
> 赞同：3
> 
> 时间：2012-08-19T13:56:01.670
> 
> 标签：php, geospatial, mysql-spatial

我正在开发一个集成 mapquest 地图并使用 mapquest API 的应用程序。

此时我想实现以下目标：注册用户必须输入纬度和经度信息，并且在数据库中必须将这些信息存储为几何类型字段。相反，查看其帐户的用户应该会看到输入的纬度和经度信息。

在较早的简化代码库中，我通过使用 MySQL 函数`AsText`和`GeomFromText`. 但现在我在 CodeIgniter 上，需要在 PHP 中进行转换

PHP 中是否有与 MySQL`AsText`和`GeomFromText`函数等效的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T14:42:40.263

看来该`PHP` `unpack`函数是提取坐标信息所需要的。

`MySQL`以 WKB（众所周知的二进制）格式存储几何字段。当提供正确的格式说明符时，该`unpack`函数能够提取该信息。以下代码来自成功提取所需信息的测试脚本。

请注意，我`format`的 for unpack 与参考的略有不同。这是因为 WKB 字符串不是使用该`AsWKB()`函数从 MySQL 中检索到的，因此它[包含额外的 padding](https://bugs.mysql.com/bug.php?id=69798)。

```
<?php
    $padding = 0;
    $order   = 1;
    $gtype   = 1;
    $lon     = -73.91353;
    $lat     = 42.80611;

    $bindata = pack('LcLd2', $padding, $order, $gtype, $lat, $lon);

    printf("Packed: %s\n\n", bin2hex($bindata));

    $result = unpack('Lpadding/corder/Lgtype/dlatitude/dlongitude', $bindata);
    var_dump($result);
?> 
```

参考[MySQL](http://dev.mysql.com/doc/refman/5.7/en/gis-data-formats.html#gis-wkb-format)和[ESRI 网络](http://edndoc.esri.com/arcsde/9.0/general_topics/wkb_representation.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:49:36.293

我也在尝试提取几何字段数据。我正在使用`MySQLi`该类来检索数据行并根据字段类型显示它。

虽然我还没有弄清楚如何解码几何字段数据，但我可以使用该`bin2hex`函数查看它。`GeomFromText('POINT(-73.91353 42.80611)')` 使用using存储的点`bin2hex`给了我一个 50 个字符的字符串值

```
0000000001010000008d7a8846777a52c0417dcb9c2e674540 
```

可以在[此处](http://php.net/manual/en/mysqli-result.fetch-field-direct.php)找到字段类型编号的部分列表。

我希望这对你有帮助！如果我发现更多，我会在这里传递。

# java - 增量共轭梯度算法

> ID：12027026
> 
> 赞同：2
> 
> 时间：2012-08-19T13:56:03.863
> 
> 标签：java, algorithm, optimization

我编写了这段代码，应该可以实现这里描述的内容：

[来自维基百科的共轭梯度](http://en.wikipedia.org/wiki/Conjugate_gradient_method#The_conjugate_gradient_method_as_an_iterative_method)

但经过一些迭代后，变量`denomAlpha`变为零，所以我得到了一个 NAN `alpha`。那么我的算法有什么问题？

```
import Jama.Matrix;

public class ConjugateGrad {

    private static final int MAX_IT = 20;
    private static final int MAX_SIZE = 50;

    public static void main(String[] args)  {
        Matrix A = Matrix.random(MAX_SIZE, MAX_SIZE);
        Matrix b = Matrix.random(MAX_SIZE, 1);

        double[][] d = new double[MAX_SIZE][1];
        for(int ii=0;ii<MAX_SIZE;ii++) {
            d[ii][0] =0;
        }

        Matrix x = Matrix.constructWithCopy(d);
        Matrix r = b.minus(A.times(x));
        Matrix p = r;
        Matrix rTrasp_r = r.transpose().times(p);

        for (int i = 0; i < MAX_IT; i++) {
            Matrix denomAlpha = p.transpose().times(A.times(p));
            double numeratorAlpha = rTrasp_r.getArray()[0][0];
            double Alpha = numeratorAlpha / denomAlpha.getArray()[0][0];
            x = x.plus(p.times(Alpha)); 
            r = r.minus(A.times(p));  
            Matrix rNew = r.transpose().times(r); 
            if (Math.sqrt(rNew.getArray()[0][0]) <1.0e-6) {
                break;
            }
            double Beta = rNew.getArray()[0][0] / rTrasp_r.getArray()[0][0];
            p = r.plus(p.times(Beta));
            rTrasp_r = rNew;           
        }
    }
} 
```

与这些参数相同：

```
double[][] matrixA = {{4,1},{1,3}};
Matrix A = Matrix.constructWithCopy(matrixA);    
double[][] vectorb = {{1},{2}};
Matrix b = Matrix.constructWithCopy(vectorb);
double[][] d = {{2},{1}};
Matrix x = Matrix.constructWithCopy(d); 
```

在算法的第一步，事情很好，但在第二步不是......

```
r: -8.0, -3.0
Alpha: 0.22054380664652568
Beta:   12.67123287671233
x:  0.2356495468277946, 0.33836858006042303, 
```

第二步 ：

```
Alpha: 0.0337280177221555
Beta:  159.11259655226627
x:  -2.2726985108925097, -0.47156587291133856, 
```

好的，我发现了一个错误：

```
r = r.minus(A.times(p).times(Alpha)); 
```

现在它起作用了：

```
r: -8.0, -3.0, 
Alpha: 0.22054380664652568
rNew: 0.6403099643121183, 
Beta: 0.008771369374138607
p:  -0.3511377223647101, 0.7229306048685207, 
x:  0.2356495468277946, 0.33836858006042303, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T17:22:06.943

对不起，黑客回答但是......使用维基百科文章中的数字示例参数并在每一步将矩阵输出到终端可能会发现差异。

# php - 安全第一 - 防止 SQL 注入。

> ID：12027027
> 
> 赞同：0
> 
> 时间：2012-08-19T13:56:11.253
> 
> 标签：php, mysqli

> **可能重复：**
> [防止 PHP 中的 SQL 注入的最佳方法 PHP中的](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)
> [mysqli 类是否 100% 防止 sql 注入？](https://stackoverflow.com/questions/606099/does-mysqli-class-in-php-protect-100-against-sql-injections)

因此，我一直在阅读有关防止 SQL 注入的安全性的信息，而 PDO 似乎是对抗任何此类攻击的最安全方法，但我决定从 MYSQL_ 迁移到 MYSQLI_。

因此，在转换后，我决定是时候开始让我的网站足够安全了。

举个例子，我已经开始使用 mysqli_real_escape_string。下面的代码是否足够安全..或者我可以进一步构建它吗？我需要将它添加到我的 SELECT 语句中，还是只添加到我的 INSERT 语句中？

```
$sql_follows="SELECT * FROM friends WHERE user1_id=".mysqli_real_escape_string($mysqli,$user1_id)." OR user2_id=".mysqli_real_escape_string($mysqli,$user2_id);
$query_follows=mysqli_query($mysqli,$sql_follows) or die("Error finding friendships"); 
```

# python - Django多张照片下载

> ID：12027033
> 
> 赞同：0
> 
> 时间：2012-08-19T13:56:23.900
> 
> 标签：python, django

我用python开发了一个照片库，现在我想插入一个新功能，“下载多张照片”：用户可以选择一些照片来下载，系统会用这些照片创建一个压缩文件。

在您看来：在前端发送 id 的最佳方式是什么？杰森？输入隐藏？并且在后端有一个 django 库，可以压缩所选照片并返回压缩文件？

谢谢，马可

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:58:45.733

在客户端中获取所有选定图像的 ID 后，您可以使用[zipfile](http://docs.python.org/library/zipfile.html)或[tarfile](http://docs.python.org/library/tarfile.html)模块对它们进行压缩。收集要压缩的文件的方式完全取决于您如何保存图像。如果保存上传的日期/id/等图片，那么在客户端，您需要将这些信息也发送回服务器以减少服务器负载。在这种情况下隐藏字段是可以的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T14:05:42.037

我认为唯一的方法是在后端，因为在前端，您只需选择要下载的照片并将 id 或一些标识符发送到服务器端，然后从文件系统中检索这些选定的照片（基于标识符），将它们压缩到单个文件中，并在响应中将该压缩文件作为附加内容返回。

如果您在前端执行此操作，您将如何获取每个文件并将它们全部压缩？

在我看来，在服务器端做是最好的解决方案:)

# c - 是否可以将指针传递给 C 中的结构？

> ID：12027036
> 
> 赞同：1
> 
> 时间：2012-08-19T13:56:42.393
> 
> 标签：c, pointers

我从`main`函数调用`init_latent_variables`并将指针传递给`sample`类型的结构`SAMPLE`

```
int main(){
    SAMPLE sample;
    sample = read_struct_examples();
    init_latent_variables(&sample);
    return 0;
}

SAMPLE read_struct_examples() {
    SAMPLE sample;        
    sample.examples = (EXAMPLE *) malloc(1*sizeof(EXAMPLE));
    if(!sample.examples) die("Memory error.");
    return(sample); 
} 
```

以下是函数定义。此函数中的内存分配工作正常，但原始变量 in`main`保持不变。

```
void init_latent_variables(SAMPLE *sample) {
    sample->examples[0].h.h_is = (int *) malloc(5*sizeof(int));
    if(!sample->examples[0].h.h_is) die("Memory error.");       
} 
```

以下是结构定义：

```
typedef struct latent_var {
  int *h_is;
} LATENT_VAR;

typedef struct example {
  LATENT_VAR h;
} EXAMPLE;

typedef struct sample {
  EXAMPLE *examples;
} SAMPLE; 
```

我传递一个指向结构的指针是对的吗？可以在C中这样做吗？

**更新**：不确定之前出了什么问题。清理并重新编译似乎有效。感谢并为浪费您的时间道歉。已经标记了这个问题，以便版主可以删除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:09:33.950

您在`sample->examples`分配之前取消引用：

```
void init_latent_variables(SAMPLE *sample) {
    sample->examples[0].h.h_is = (int *) malloc(5*sizeof(int));
    if(!sample->examples[0].h.h_is) die("Memory error.");       
} 
```

这应该是：

```
void init_latent_variables(SAMPLE *sample, int num_examples) {
    sample->examples = (EXAMPLE *) malloc(sizeof EXAMPLE * num_examples);
    if(!sample->examples) die("Memory error.");   
    sample->examples[0].h.h_is = (int *) malloc(5*sizeof(int));
    if(!sample->examples[0].h.h_is) die("Memory error.");       
} 
```

考虑使用 calloc() 而不是 malloc，或者在使用之前使用 memset 将结构清除为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:09:40.827

首先，您必须分配 SAMPLE 结构的示例成员......据我所知，它必须是一个对象数组......当然，C 中没有引用，只有“值”或“指针”。

# javascript - 添加高亮效果，css浮动

> ID：12027039
> 
> 赞同：1
> 
> 时间：2012-08-19T13:57:40.253
> 
> 标签：javascript, jquery, css

我正在尝试创建突出显示效果，其中悬停的文本标记为黑色。html 的结构将使该内容向右浮动。

[http://jsfiddle.net/6hj5D/](http://jsfiddle.net/6hj5D/)

问题是我只想突出显示单词，而不是`div`标签的整个区域。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:02:39.093

一个简单的解决方案是将文本内容包装在一个附加元素中并为其添加背景颜色属性。例如一个`<span>`元素。

```
<div id="item 4" class="command"><span>item 4</span></div> 
```

然后你的 jQuery 代码看起来像这样 -

```
$('.command').hover(function() {
    $(this).find('span').addClass("select");
    },function() {
    $(this).find('span').removeClass("select");
}); 
```

或者您可以将悬停事件添加到内部`<span>`-

```
$('.command > span').hover(function() {
    $(this).addClass("select");
    },function() {
    $(this).removeClass("select");
}); 
```

### [工作演示](http://jsfiddle.net/6hj5D/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T14:30:16.573

假设通过“单词”，您的意思是为*文本*的背景着色（而不是每个单独的单词），以下应该通过使用类名将悬停`.command`元素的内容包装在 a中来实现该目标：`span``select`

```
$('.command').hover(function() {
    $(this).html(
        function(i,h){
            return '<span class="select">' + h + '</span>';
        });
}, function() {
    $(this).closest('.command').find('span').contents().unwrap();
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/6hj5D/10/)。

正如 Lix 在评论中正确指出的那样，重要的是要记住，使用此解决方案，悬停元素的所有内容都将被包裹在 a 中`span`（鉴于这可能包括块级元素，也许 a`div`会更好选择），并且，`mouseleave` 这将从元素中删除所有包含的跨度。这些评论是准确的，我会将以上内容修改为以下内容，以便在`mouseenter`具体和更具体的方面更有效`mouseleave`：

```
$('.command').hover(function() {
    $(this).html(
        function(i,h){
            return '<div class="select">' + h + '</div>';
        });
}, function() {
    $(this).closest('.command').find('div.select').contents().unwrap();
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/6hj5D/12/)。

有了后一个建议，我修改了 CSS，以便仅突出显示文本（因为 a 的`div`行为与 a 不同`span`），如下所示：

```
.select {
    background: #000;
    color: #FFF;
    white-space: pre;
    padding: 0;
    display: inline;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T14:02:27.237

将 .select 类更改为：

```
.select{ color:red; white-space:pre} 
```

背景颜色已被删除（从您的原始 .select 中）。color 属性可以是您想要作为突出显示颜色的任何颜色。

您可以在此处找到有关 css 的更多信息：[https ://developer.mozilla.org/en-US/docs/CSS/CSS_Reference](https://developer.mozilla.org/en-US/docs/CSS/CSS_Reference)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T16:37:03.410

您不需要 JS，只需将其修改/添加到您的`CSS`：

```
.command{
   margin-left:50%;
   display:inline;
}
.command:hover{
    background:#000;
    color:#FFF;
} 
```

# jquery - IE8/9 中溢出滚动列表的相对顶部位置

> ID：12027047
> 
> 赞同：2
> 
> 时间：2012-08-19T13:58:21.283
> 
> 标签：jquery, css, internet-explorer, scroll, position

我有一个交互，我有`<ul>`一个长长的`<li>`s 列表包裹在一个`<div>`容器中，以使它们可滚动。

现在我将列表转换到我想将特定显示`<li>`为顶部项目的状态。我不能通过使用该`scrollTop`属性来做到这一点，因为该项目可能离底部很远，以便能够在容器顶部的所需位置滚动它。

这就是为什么我将 ul 的相对顶部位置设置为所需值的原因。

请看看这个 jsFiddle：http: [//jsfiddle.net/pJfNp/13/](http://jsfiddle.net/pJfNp/13/)

在除 IE8 和 9 之外的所有浏览器中，活动/红色项目显示在顶部，但 Internet Explorer 似乎无法从 底部“分离” `<ul>`，`<div>`它以某种方式固定在那里。如果我试图用`scrollTop`它作为第一项来显示它会发生什么。

我对如何做类似事情的新想法持开放态度！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:06:25.610

在 IE8 中测试，应该也可以在 IE9 中工作:)

## *[jsFiddle 演示](http://jsfiddle.net/pJfNp/14/)*

```
var liHeight = $('li.active').height();
$('ul').height( $('ul').height() + (liHeight*3) );
var activePos = $('li.active').position().top;
$('div').animate({scrollTop:activePos},1000); 
```

如果您有时需要显示最后一个`li`，这意味着您需要额外的 3 `li heights`，因此只需将其乘以 3 并将结果添加到`ul`元素高度。
比动画，动画`scrollTop`你的`div`

# php - 使用 MySQL 排序

> ID：12027048
> 
> 赞同：1
> 
> 时间：2012-08-19T13:58:28.980
> 
> 标签：php, mysql

我有一个网站，用户可以在其中查找其他用户。这是一个基本的搜索功能，但我希望用户的结果是基于位置的。所以也许他们搜索“大卫”。的基本查询是

```
SELECT * 
FROM   users 
where  fname = 'David' or 
       lname= 'David' 
ORDER BY distance ASC 
```

问题是必须首先计算每个用户和搜索者之间的距离。我怎样才能做到这一点？不要求展示如何计算距离或任何东西，只是如何从逻辑上解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:10:31.467

编辑：问题是直接在您的选择语句中计算距离并根据此计算对结果进行排序。

因此，如果您将纬度/经度存储在数据库中，您应该能够执行以下操作：

```
$lat = {CURRENT_USER_LATITUDE};
$long = {CURRENT_USER_LONGITUDE};
SELECT users.*,
6371 * 2 * ASIN(SQRT( POWER(SIN(($lat - ABS(users.latitude)) * pi()/180 / 2), 2) + COS($lat * pi()/180 ) * COS( ABS(users.latitude) * pi() / 180 ) * POWER(SIN(($long - users.longitude)*pi()/180 / 2),2))) AS distance
FROM users
ORDER BY distance 
```

如果您在 MySQL 中使用地理数据类型，您可能会有一个更简单的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T14:11:28.003

如果您使用的是计算字段，例如

```
select
    someColumn,
    abs(someValue-someValue2)
from 
    myTable 
```

并且您需要按`abs()`需要将其添加到 order by 子句中的最小值进行排序，如下所示：

```
select
    someColumn,
    abs(someValue-someValue2)
from 
    myTable
order by
    abs(someValue-someValue2) asc 
```

或者您可以使用以下语法：

```
select
    someColumn,
    abs(someValue-someValue2)
from 
    myTable
order by
    2 asc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T14:09:44.367

您可以执行以下操作：

```
SELECT users.*, <distance calculation> AS distance
FROM users
WHERE fname = 'David' or
      lname = 'David'
ORDER BY distance ASC 
```

# java - Flume 将输出格式从 .csv 更改为 .json

> ID：12027051
> 
> 赞同：2
> 
> 时间：2012-08-19T13:58:59.530
> 
> 标签：java, logging, hadoop, flume, hadoop-plugins

我在其仅节点（测试）模式下使用水槽；我的水槽以下列方式启动：

水槽节点 -1 -c $FQDN':amqp("exchangeName=[exchange name]", "bindings=[binding name]", "host=127.0.0.1", "port=5672", "userName=[user] ", "password=[pass]", "exchangeType=direct", "durableExchange=false", "queueName=[queue name]", "durableQueue=true", "exclusiveQueue=false", "autoDeleteQueue=false", " useMessageTimestamp=true")|collectorSink("s3n://[Amazon key]:[Amazon secret]@[path at S3]","server");' -s "$@" > "$log" 2>&1

我有兴趣使用水槽传递 .csv 文件。不幸的是，flume 将 .csv 文件转换为 .json，添加了一些字段。

例子：

原消息：

```
"a,b,c" 
```

水槽将消息转换为：

```
{"body":"\""a,b,c\"","timestamp":1345380385605,"pri":"INFO","nanos":275832626718182,"host":[host name],"fields":{"rolltag":"20120819-124542793+0000.275789814494811.00000011"}} 
```

如何配置水槽以按原样传递消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:34:55.040

您可以只解析 json 并提取“body”标签。

# android - 如何在Horizo ntalScrollView android中让所有孩子在屏幕上可见

> ID：12027055
> 
> 赞同：1
> 
> 时间：2012-08-19T13:59:30.450
> 
> 标签：android, horizontalscrollview

我添加了很多`ImageView`，`HorizontalScrollView`每个都`ImageView`从互联网加载图像。但屏幕只显示 3 `ImageView`。

我想知道`ImageView`屏幕上的内容，因为我想从另一个屏幕上删除`ImageView`不显示的图像。

反正有这样做吗？

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T00:18:44.977

您需要考虑使用[`lazy ListView`](https://stackoverflow.com/search?q=android%20lazy%20listview)而不是`<ScrollView>`图像。使用惰性 ListView，应用程序不会下载隐藏的图像，直到用户滚动查看它们。

我不熟悉这样的 ListView 但我认为这些链接可能会对您有所帮助：

*   [问题：如何在 ListView 中延迟加载图像？](https://stackoverflow.com/q/541966/543711)
    *   [已实施的解决方案](https://github.com/thest1/LazyList)
*   [项目：Android 通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)

# android - Android 2.1 平板全屏应用

> ID：12027056
> 
> 赞同：1
> 
> 时间：2012-08-19T13:59:42.290
> 
> 标签：android, fullscreen, tablet, statusbar

我需要在 Android 2.1 上运行的 Wooky Reader 平板电脑（很可能与 Archos 70b 相同）上以全屏模式（或只是不可离开）启动应用程序。我做了一些没有用的尝试：在清单中：

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen 
```

我添加了权限：

```
 uses-presmission android:name="android.permission.STATUS_BAR 
```

只是为了这个案子。在我尝试的代码中：

```
super.onCreate(savedInstanceState);

requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
WindowManager.LayoutParams.FLAG_FULLSCREEN);
getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);

setContentView(R.layout.main); 
```

以及这些的组合。我知道在平板电脑上“禁止”删除状态栏，但我找到了一些适用于 Android 3.0+ 版本的方法。那么有没有办法在这个特定的平板电脑上做到这一点？我会很高兴有任何想法。

编辑：现在我尝试了：

```
uses-permission android:name="archos.permission.FULLSCREEN.FULL" 
```

-> 没用

# javascript - 获取 javascript/jquery 中相应元素列表的最接近元素

> ID：12027059
> 
> 赞同：1
> 
> 时间：2012-08-19T13:59:56.767
> 
> 标签：javascript, jquery

我有一个元素列表：

```
var checked_inputs = $('.select-feedback:checked'); 
```

现在我想得到他们最接近的划分元素，其类是'MessageRow'。我已经做了这个技巧来得到它：

```
 $('.radiusRight').click(function(event) {
    event.preventDefault();
    var feedbacks = new Array();
    var checked_inputs = $('.select-feedback:checked');
    for (var i=0; i<checked_inputs.length; i++) {
        feedbacks.push($(checked_inputs[i]).closest('.messageRow').attr('id'));
    }
    var feedback_ids = feedbacks.map(function(val) { return val.split('-')[1] });
    var feedback_divs = feedbacks.map(function(val) { return '#' + val }).join(',');
    $.ajax({
        url: '/business/feedback/delete/',
        type: 'POST',
        data: {'ids': feedback_ids},
        success: function(data) {
            $(feedback_divs).fadeOut();
        }
    })
}) 
```

有没有更好的方法来实现这一点？或者这是一个好方法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:14:45.003

你的方式有点复杂 - 恕我直言......

```
$('.radiusRight').click(function(event) {
    event.preventDefault();

    var feedback_ids = $(".select-feedback:checked").map(function() {
        var id = $(this).closest(".messageRow").attr("id");
        return id.split("-")[1];
    });

    $.ajax({
        url: "/business/feedback/delete",
        type: "POST",
        data { "ids": feedback_ids },
        success: function() {
        $("#" + feedback_ids.join(", #")).fadeOut();
        }
    });
}) 
```

# android - android项目添加新活动错误？

> ID：12027060
> 
> 赞同：0
> 
> 时间：2012-08-19T13:59:58.183
> 
> 标签：android, android-activity

由于此错误错误消息，我无法向我的 android 项目添加新活动：R 无法解析为变量 testActivity.java
我真的很想知道将新活动添加到我的项目的正确方法以及如何解决此错误?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:04:38.930

你需要清理你的项目几次。保存代码并清理项目并确保您**没有使用过** `import andorid.R;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:25:12.370

如何添加新活动：

*   右键单击您的项目
*   新建 > 类
*   输入您的活动名称。
*   在`super class`字段中：android.app.Activity

此外，请确保清理您的项目，关闭 Eclipse 并再次启动它。

最后，仔细检查您是否在清单文件中包含了新活动。

# wordpress - 更改站点 URL 应该更改表或创建 .htaccess？

> ID：12027062
> 
> 赞同：1
> 
> 时间：2012-08-19T14:00:19.170
> 
> 标签：wordpress, .htaccess, alter-table

我不知道在哪里发布服务器故障，超级用户或在这里，但请接受我的道歉。

我会说我尝到了很大的滋味，因为我自己之前从来没有这样做过。

有一个网站他们在 Wordpress 上运行了一年多，他们刚刚购买了一个新域名。

所以他们问我他们只想将域名更改为`http://oldsite.com`之前`http://newsite.com`发生在我身上的事情，当我遇到同样的情况时，我只是从一台服务器移动到另一台服务器并同时使用 wordpress 更改了域名，他们存储了`absolute url`像这样的图像的 URL`relative`肯定不会显示很多图像。

因此，在他的情况下，他们仍将使用同一台服务器，这意味着所有图片仍将位于同一文件夹中`/wp-content/uploads/*`

所以我的问题是如何在更改域名后不影响他网站中的图片的情况下更改他的域名？

做alter table？或 .htaccess mod 重写？

如果有更好的选择，请建议我，我会非常感激:)

谢谢，再次请接受我不知道在哪里发帖的道歉。

**更新**

唯一也是最重要的是，如何使所有帖子中的所有图片在更改域后仍然出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T22:44:25.997

尝试将其放入 oldsite.com 域的文档根目录中的 htaccess 文件中：

```
Redirect 301 / http://newsite.com/ 
```

# java - JSF 2.0 视图范围不起作用

> ID：12027065
> 
> 赞同：1
> 
> 时间：2012-08-19T14:00:36.770
> 
> 标签：java, jsf, jsf-2, primefaces

我在我的应用程序中使用 PrimeFaces，其中我有一个填充了数据的数据表。我也有一个编辑命令按钮。

现在我想打开一个新的 JSF 页面。执行此操作的操作绑定到视图范围内的支持 bean。在操作方法中，我可以访问 bean 的值，但在新的 JSF 页面上，我无法再访问该 bean 的任何值。

这是我的代码：

```
<p:commandLink title="Edit" id="editBtn" action="#{personRegisterController.selectPerson}">
    <f:setPropertyActionListener value="#{person}" target="#{personRegisterController.personBean}"/>
</p:commandLink> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T15:03:30.763

The view scope in JSF is the scope that entails only a single view (page). So, as long as you post-back to the same view, you'll retain the data of view scoped beans.

However, as soon as you navigate to a new view a new view scope starts. In other words, you cannot use the view scope to transfer data between views (between requests to different pages).

See this answer for one possible solution on how you can do this transferring: [p:commandButton doesn't execute f:setPropertyActionListener in JSF 2](https://stackoverflow.com/questions/12025720/pcommandbutton-doesnt-execute-fsetpropertyactionlistener-in-jsf-2/12026496#12026496)

Incidentally, note that the `setPropertyActionListener` isn't necessary for what you're doing here. You can provide the data directly to your action method:

```
<p:commandLink action="#{personRegisterController.selectPerson(person)}"/> 
```

# xcode - 在 Xcode 中找不到 Allegro 框架

> ID：12027066
> 
> 赞同：1
> 
> 时间：2012-08-19T14:01:02.587
> 
> 标签：xcode, allegro, allegro5

> **可能重复：**
> [Xcode 4 和 Allegro 5.1 - 链接器找不到框架](https://stackoverflow.com/questions/12487487/xcode-4-and-allegro-5-1-linker-cant-find-framework)

我一直在尝试让 Allegro 在运行 OS X 10.8 的 Mac 上工作。我按照以下说明进行操作：

[http://wiki.allegro.cc/index.php?title=OSX,_Xcode_4,_Framework](http://wiki.allegro.cc/index.php?title=OSX,_Xcode_4,_Framework)

我为一个简单的 Xcode 应用程序做了他们所说的一切，但它在构建过程中失败并出现以下错误：

> ld：找不到框架 Allegro-5.1
> 
> clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我尝试过使用 Allegro 5.0.7 和 5.1.3，两次都得到相同的结果，即找不到框架。我错过了什么吗？这是我正在尝试运行的非常基本的应用程序。

```
#include <allegro5/allegro.h>

int main(int argc, char **argv) {
    al_init();
    al_create_display(640, 480);
    al_clear_to_color(al_map_rgb_f(1, 1, 0));
    al_flip_display();
    al_rest(5.0);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T20:32:41.610

“ [Xcode 4 and Allegro 5.1 - Linker can't find Framework](https://stackoverflow.com/questions/12487487/xcode-4-and-allegro-5-1-linker-cant-find-framework) ”的答案帮助了我。

在项目目标中，转到“构建设置”并将“框架搜索路径”更改为`/Library/Frameworks`.

# mysql - 生成用户访问的页面的 html 表，按用户排序，然后按从 MySQL 表访问的最后一页

> ID：12027067
> 
> 赞同：0
> 
> 时间：2012-08-19T14:01:02.300
> 
> 标签：mysql, group-by, distinct

我有一个 MySQL 表，用于记录登录用户对网站每个页面的访问。它有一个用户栏，一个是访问页面的名称，一个是访问的时间/日期。

我想使用 MySQL 查询生成一个表，以以下格式汇总该表中的信息，即我希望该表主要按用户上次访问的日期排序，然后为他们拥有的每个页面排列一行访问过（每个访问过的页面一行（我用三页来说明，但我真的希望列出所有页面），即使他们多次访问过该页面），按最后一次访问此页面的时间/日期排序，并有一列表示用户对页面的总访问次数：

![在此处输入图像描述](../Images/712808d1951c6c2b6368e4088c5338ff.png)

我已经尝试使用 GROUP by 和 DISTINCT 进行各种查询，但我并没有很接近，所以很高兴能得到一些帮助来完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:40:25.400

试试这个。您可能需要对此进行调整，因为我无法完全复制您的场景

```
Select * from
(
select 

    page, 
    visitdate
    userid,
    @rank:=case when @tmpuserid<>userid then 1
    else
      IFNULL(@rank,0)+1 
    end as rank,
    @tmpuserid:=userid as tmpuserid

from pages
order by visitdate
) p
Where  p.rank <=3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:57:43.303

可能有更好的方法，但我最终使用两个查询解决了这个问题。第一个为每个名称返回一个唯一的行：

```
SELECT *,COUNT(DISTINCT Page) AS count_page FROM visits GROUP by Name ORDER BY MAX(Date) DESC"; 
```

然后我使用 count_page 为每个单元格设置一个行跨度，其中名称为：

```
echo "<tr><td ROWSPAN=\"".$row['count_page']."\">"; 
```

然后，在每个名称的循环中，我运行了第二个查询，该查询为每个名称的每个唯一页面返回一行：

```
"SELECT Page, unix_timestamp(NOW()) - unix_timestamp(MAX(Date)) as time_page, COUNT(Page) as Count FROM visits WHERE Name='".$row['Name']."' GROUP by Page ORDER BY MAX(Date) DESC" 
```

然后我可以使用`$row['Page']`,`$row['time_page']`并`$row['Count']`返回我想要的附加信息。

# windows-phone-7 - 如何在 Windows Phone 上检测“从边缘滑动”？

> ID：12027068
> 
> 赞同：1
> 
> 时间：2012-08-19T14:01:20.943
> 
> 标签：windows-phone-7, windows-8

这里有一个问题 - 在使用 Windows 8 Metro 应用程序时，我们使用从边缘滑动手势来显示以前的应用程序、超级按钮栏或应用程序栏。

如果我想实现类似的应用栏行为，如何在 Windows Phone 7 中检测类似的手势？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T14:18:48.923

我们对 SurfCube 所做的是我们在屏幕边缘添加了一个透明边框，宽度为 5 像素（虽然可能更多）。这些边框上的 MouseButtonDown 事件应该可以解决问题。确保边框在 z 顺序中位于顶部。

但要小心：如果您想要向下滑动手势，请关闭系统托盘，因为这会窃取焦点并且边框不会接收到事件。

# c# - 按属性汇总列表

> ID：12027069
> 
> 赞同：0
> 
> 时间：2012-08-19T14:01:21.790
> 
> 标签：c#, list

我有一个这样的对象列表：

```
List<ClassName> list = new List<ClassName>();
list.Add(new ClassName()
{
    Name = 1,
    Amount = 5
});
list.Add(new ClassName()
{
    Name = 2,
    Amount = 10
});
list.Add(new ClassName()
{
    Name = 1,
    Amount = 20
});
list.Add(new ClassName()
{
    Name = 3,
    Amount = 10
});
list.Add(new ClassName()
{
    Name = 3,
    Amount = 15
}); 
```

现在我想通过属性来总结这个列表`Name`。结果应该包含每个条目和具有相同条目`Name`的总和。所以这将是预期的结果：`Amount``Name`

```
List<ClassName> list = new List<ClassName>();
list.Add(new ClassName()
{
    Name = 1,
    Amount = 25
});
list.Add(new ClassName()
{
    Name = 2,
    Amount = 10
});
list.Add(new ClassName()
{
    Name = 3,
    Amount = 25
}); 
```

我该如何存档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:11:33.897

通过 LINQ 执行此操作：

```
var result = list.GroupBy(x => x.Name)
    .Select(x => new ClassName { Name = x.Key, Amount = x.Sum(i => i.Amount) })
    .ToList(); 
```

在此处阅读有关 LINQ 的更多信息：http: [//code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T14:06:45.787

```
 var lst = list.GroupBy(g = > g.Name).Select(t = > new
 ClassName()
 {
     Amount = t.Sum(s=>s.Amount), Name = t.Key
 }).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T14:08:56.927

```
var result = list.GroupBy(x => x.Name).Select(x => new MyClass() {Name=x.Key, Amount= x.Sum(y => y.Amount)); 
```

或者

```
List<MyClass> result = list.GroupBy(x => x.Name).Select(x => new MyClass() {Name=x.Key, Amount= x.Sum(y => y.Amount)).ToList(); 
```

# c - ANSI C - 将节点附加到任意树

> ID：12027073
> 
> 赞同：0
> 
> 时间：2012-08-19T14:02:00.810
> 
> 标签：c, struct, tree

将新节点附加到任意树时，您会从根遍历树吗？或者你会构建子树并将它们组合成一棵完整的树吗？

我的节点和树结构看起来像：

**节点.h**

```
struct _Node;
typedef struct _Node Node; 
```

**节点.c**

```
struct _Node
{
    char *pName;
    unsigned char *pValue;
    struct _Node *pFirstChild;
    struct _Node *pNextSibling;
};

Node* NodeCreate(char *pName, uint32_t uLength, unsigned char *pValue)
{
    if (!pValue)
        return NULL;

    Node *pNode = (Node*)malloc(sizeof(Node));
    if (!pNode)
        return NULL;

    pNode->pName = pName;
    pNode->pValue = (unsigned char*)malloc(uLength * sizeof(pValue[0]));
    pNode->pFirstChild = NULL;
    pNode->pNextSibling = NULL;

    return pNode;
} 
```

**树.h**

```
struct _Tree;
typedef struct _Tree Tree; 
```

**树.c**

```
struct _Tree
{
    Node *pRoot;
};

Node* TreeNodeCreate(char *pName, uint32_t uLength, unsigned char *pValue)
{
    return NodeCreate(pName, uLength, pValue);
}

Node* TreeNodeAppend(Node **ppParent, Node *pNode)
{
    if (!((*ppParent)->pFirstChild))
    {
        (*ppParent)->pFirstChild = pNode;

        return (*ppParent)->pFirstChild;
    }

    Node *pLastChild = (*ppParent)->pFirstChild;
    while (pLastChild->pNextSibling)
        pLastChild = pLastChild->pNextSibling;

    pLastChild->pNextSibling = pNode;

    return pLastChild;
}

Node* TreeGetRoot(Tree *pTree)
{
    if (!pTree)
        return NULL;

    return pTree->pRoot;
}

void TreeSetRoot(Tree **ppTree, Node *pNode)
{
    (*ppTree)->pRoot = pNode;
} 
```

**主程序**

```
int main()
{
    unsigned char value[] = { 0x01, 0x02, 0x03 };
    uint32_t uLength = sizeof(value) / sizeof(value[0]);

    Tree *pTree = TreeCreate();

    Node *pRoot = TreeNodeCreate("Root", uLength, value);
    TreeSetRoot(&pTree, pRoot); 

    Node *pA = TreeNodeCreate("A", uLength, value);
    Node *pB = TreeNodeCreate("B", uLength, value);
    Node *pC = TreeNodeCreate("C", uLength, value);
    Node *pD = TreeNodeCreate("D", uLength, value);
    Node *pE = TreeNodeCreate("E", uLength, value);
    Node *pF = TreeNodeCreate("F", uLength, value);

    TreeNodeAppend(&pRoot, pA);
    TreeNodeAppend(&pRoot, pB);

    TreeNodeAppend(&pA, pC);
    TreeNodeAppend(&pA, pD);

    TreeNodeAppend(&pB, pE);
    TreeNodeAppend(&pE, pF);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:06:25.493

好吧，这取决于你的树是如何组织的。“任意树”，并且您使用任意数量的子节点通常不用于节点具有确定顺序的事物；在大多数情况下，当父/子关系很重要时，就会出现这样的树。

在这种情况下，您的追加通常更像是“将此节点添加为该父节点的子节点”，允许快速插入，因为父节点是已知的，如果子节点的顺序无关紧要，则允许快速插入。

否则，您可能必须按照应用程序必须找到的正确位置来放置节点的任何规则遍历树。

# c++ - CRTP + enable_if 的好友功能不起作用？

> ID：12027076
> 
> 赞同：3
> 
> 时间：2012-08-19T14:02:34.507
> 
> 标签：c++, templates, c++11, variadic-templates, crtp

以下代码无法编译，我不知道为什么：

```
#include <type_traits>

// Base class definition
template<template<typename> class CRTP, typename T> class Base
{
    // Friend function declaration
    public:
        template<template<typename> class CRTP0, typename T0, class>
        friend int func(const Base<CRTP0, T0>& rhs);

    // Protected test variable
    protected:
         int n;
};

// Friend function definition
template<template<typename> class CRTP0, typename T0,
class = typename std::enable_if<true>::type>
int func(const Base<CRTP0, T0>& rhs)
{
    return rhs.n;
}

// Derived class definition
template<typename T> class Derived : public Base<Derived, T> {};

// Main
int main()
{
    Derived<int> x;
    func(x);
    return 0;
} 
```

GCC 4.6.2（和 LWS 上的 GCC 4.7.1）告诉我：

```
error: 'int Base<Derived, int>::n' is protected 
```

这意味着基本上没有正确检测到友谊。由于这只是我的代码的摘录，我想将友元函数的定义放在类定义之外，就像这里一样。那么，问题是什么以及如何解决呢？

编辑：我已经修改了代码以尝试隔离问题并使其更具可读性。当前的 enable_if 始终为真，但对于我的真实代码，我将有一个“真实”条件，这里只是为了隔离问题。

EDIT2：liveworkspace 在这里：[朋友功能问题](http://liveworkspace.org/code/f9fe6d67deae457e35bac2e2860353ba)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:47:02.920

我对 gcc 也有类似的问题。我认为这是一个编译器错误：因为您的函数模板具有三个模板参数，而不是朋友声明中的两个，所以它不匹配它们。为了使您的意图正确地使用 gcc，您必须*完全*匹配朋友声明。这很容易通过在函数返回类型上使用 SFINAE 来实现

```
 // Friend function definition
 template<template<typename> class CRTP0, typename T0>
 typename std::enable_if<true,int>::type
 func(const Base<CRTP0, T0>& rhs)
 {
    return rhs.n;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:41:54.993

如果您尝试`func`显式调用：

```
func<Derived, int, void>(x); 
```

g++ 抱怨：

```
source.cpp:31:31: error: call of overloaded 'func(Derived<int>&)' is ambiguous
source.cpp:31:31: note: candidates are:
source.cpp:19:5: note: int func(const Base<CRTP0, T0>&) [with CRTP0 = Derived; T0 = int; <template-parameter-1-3> = void]
source.cpp:9:20: note: int func(const Base<CRTP0, T0>&) [with CRTP0 = Derived; T0 = int; <template-parameter-2-3> = void; CRTP = Derived; T = int] 
```

我认为问题在于`friend`声明没有被函数定义正确识别；相反，正在声明另一个函数模板。即使预先声明了类和函数模板，也会发生这种情况。

# visual-studio-2010 - 将 CodedUI 测试从 VS2010 迁移到 VS2012 时出现问题

> ID：12027079
> 
> 赞同：3
> 
> 时间：2012-08-19T14:02:48.113
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012

在将编码的 UI 测试从 VS2010 迁移到 VS2012 时，我遇到了一些严重的问题。该问题与程序集参考有关。我尝试引用新的 11.0 版本 CodedUI 程序集，但是当 VS2012 尝试在测试查看器中查找所有案例并列出时，系统会一直在寻找旧的 10.0 版本。如：

> 'Microsoft.VisualStudio.TestTools.UITest.Extension，版本 = 10.0.0.0，文化 = 中性，PublicKeyToken = b03f5f7f11d50a3a'

我找到了这个 MSDN 链接： http: [//msdn.microsoft.com/en-us/library/tfs/hh506981 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/tfs/hh506981(v=vs.110).aspx)

它提到了一些与汇编参考相关的问题。但我不明白以下引用：

> 在 Visual Studio 2010 中，引用已添加到 csproj 文件的“选择”语句中。在 Visual Studio 2012 中，我们使用 **反馈目标文件**来包含编码的 UI 测试程序集引用。

什么是**反馈目标文件**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:16:05.457

我已经用[这篇博文中的答案](http://www.vlaquest.com/2012/12/migrating-coded-ui-tests-to-vs-2012-small-issue-with-project-dependencies/)解决了你的问题。

您需要打开您的 proj 文件并检查已添加的逻辑以正确引用测试工具程序集的 11.0.0.0 版本。

我认为反馈目标文件是 VS 2012 文件夹中为 msbuild 目标导入的 msbuild 文件。这是一个实现细节，您只需要根据“修复”向导应该做的事情集中精力升级项目文件，我在我的帖子中给出了精确的步骤。问候和祝你好运（如果我还不算太晚的话）

# php - 使用 wkhtmltopdf 将文件转换为 pdf 比实际文件小

> ID：12027081
> 
> 赞同：1
> 
> 时间：2012-08-19T14:03:02.223
> 
> 标签：php, python, wkhtmltopdf

当我将一个 158 像素的文件转换为 pdf 文件时，我得到了一个 100% 缩放的 121 像素的 pdf 文件。

wkhtmltopdf --dpi 100 c:\1.svg c:\2.pdf

当我更改 DPI 时，我发现它不起作用。--dpi 100 与 --dpi 1000 相同。

wkhtmltopdf版本为0.11，在windows和linux下测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T20:45:48.747

尝试使用该`--disable-smart-shrinking`选项

# c# - c#异步调用方法

> ID：12027082
> 
> 赞同：3
> 
> 时间：2012-08-19T14:03:04.110
> 
> 标签：c#, asynchronous

这个类`unit`有一个属性`bool status`，用于标记是否`request`应该在单元上调用方法。我有我的另一个类，其中有一个方法应该调用`request`. 为了避免阻塞主线程，我想异步调用该方法。问题是状态更改没有事件，我不想让我的异步调用做一些丑陋的事情，比如：

```
while(!status){}unit.request(args); 
```

或者

```
while(!status){Thread.Sleep(100)}unit.request(args); 
```

尤其是当我不知道轮到的时间尺度`status`时`true`。

我该怎么做呢？

更新：我忘了说我不能改变`unit`。对此感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:06:47.817

您想在属性更改时调用函数（无论是否异步）。你有两个选择：

1.  附加到属性更改时发出信号的偶数
2.  定期检查财产的价值

你不能做第一个，所以你必须做第二个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T14:22:01.407

这是一个如何使用*事件*来管理它的示例。

假设这是你的课

```
public class Unit
{
    private readonly object _syncRoot = new object();
    private bool _status;

    public event EventHandler OnChanged;    

    public bool Status
    {
        get
        {
            lock (_syncRoot)
            {
                return _status;    
            }
        }
        set
        {
            lock (_syncRoot)
            {
                _status = value;
                if (_status && OnChanged != null)
                {
                    OnChanged.Invoke(this, null);        
                }
            }
        }
    }

    public void Process()
    {
        Thread.Sleep(1000);
        Status = true;
    }
} 
```

这是您如何使用它的方法

```
class Program
{
    static void Main(string[] args)
    {
        var unit = new Unit();
        unit.OnChanged += Unit_OnChanged;
        Console.WriteLine("Before");
        Task.Factory.StartNew(unit.Process);
        Console.WriteLine("After");

        Console.WriteLine("Manual blocking, or else app dies");
        Console.ReadLine();
    }

    static void Unit_OnChanged(object sender, EventArgs e)
    {
        //Do your processing here
        Console.WriteLine("Unit_OnChanged before");
        Task.Factory.StartNew(()=>
        {
            Thread.Sleep(1000);
            Console.WriteLine("Unit_OnChanged finished");
        });
        Console.WriteLine("Unit_OnChanged after");
    }
} 
```

这输出

```
前
后
手动阻止，否则应用程序死机
Unit_OnChanged before
Unit_OnChanged after
Unit_OnChanged 完成

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T14:29:27.350

这是经典的轮询问题，在轮询方面确实没有一个优雅的解决方案。但是我们可以使用一些函数式编程来获得一些不是噩梦的东西。

```
 public static CancellationTokenSource Poll(
        Func<bool> termination,
        Action<CancellationToken> onexit,
        int waitTime = 0,
        int pollInterval = 1000)
    {
        var cts = new CancellationTokenSource();
        var token = cts.Token;
        Action dispose = cts.Cancel;

        var timer = new Timer(_ =>
        {
            if (termination() || token.IsCancellationRequested)
            {
                onexit(token);
                dispose();
            }
        }, null, waitTime, pollInterval);

        dispose = timer.Dispose;
        return cts;
    } 
```

例子：

```
 var condition = false;

    Poll(() => condition == true, ct => Console.WriteLine("Done!"));

    Console.ReadLine();

    condition = true;

    Console.ReadLine(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T14:22:47.517

如果可能，使用 a[`System.Threading.AutoResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)而不是 a ：`bool`

```
AutoResetEvent status = new AutoResetEvent(); 
```

在您的异步方法中，等待它：

```
status.WaitOne();
unit.request(args); 
```

然后，要在您的其他班级发出信号，请致电`Set`：

```
status.Set(); 
```

# backbone.js - 主干.js 是否将模型与视图进行任何隐式关联

> ID：12027083
> 
> 赞同：1
> 
> 时间：2012-08-19T14:03:09.680
> 
> 标签：backbone.js

查看codeschoo.com 上的一些backbonejs 示例，我看不到视图与其模型之间的任何明确关联。视图如何知道它应该与什么模型相关联？是否按照惯例，例如 TodoView 假定 this.model 是 Todo 类型？

要将模型显式设置为视图，是否只是在构造函数中传入模型的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:10:38.910

如果您将`model`属性传递给视图构造函数，它将直接将其设置为视图实例的属性，例如`view.model`. 一组选定的其他属性也是如此。除此之外，传递给视图构造函数的属性设置在`view.options`.

所以是的，你可以这样做：

```
var view = new Backbone.View( {

  model : new Backbone.Model

} ); 
```

或者随时通过分配来更改现有视图实例的模型`model`：

```
view.model = new Backbone.Model; 
```

有些人在模型中设置对视图的引用（例如`model.view`），但到目前为止我已经避免了。

[http://backbonejs.org/#View-constructor](http://backbonejs.org/#View-constructor)

> 创建新视图时，您传递的选项将附加到视图中`this.options`...有几个特殊选项，如果通过，将直接附加到视图：`model`、`collection`、`el`、`id`、`className`和。`tagName``attributes`

# authentication - 获取 Auth Token 以查看公开帖子

> ID：12027085
> 
> 赞同：0
> 
> 时间：2012-08-19T14:03:37.927
> 
> 标签：authentication, facebook-access-token

我正在构建一个类似于公共页面提要的 RSS 阅读器的应用程序。我的问题是我不希望用户必须登录（因为我不关心他们是谁），但要访问公共供稿 Facebook 要求应用程序具有 access_token。我想知道是否有办法获得“应用程序”的令牌，让我可以查看公共提要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:20:42.677

您应该能够使用应用访问令牌访问任何可公开访问的页面。

如果这不起作用，请检查您的应用程序是否未在应用程序设置中设置为“本机/桌面”模式，如果是，则应用程序访问令牌不受信任，因为假定您的本机应用程序与应用程序一起分发二进制中的秘密。在这种情况下，您会看到错误消息，暗示即使有访问令牌，也没有访问令牌等。

# magento - Magento 创建带有注册字段的登录页面

> ID：12027086
> 
> 赞同：1
> 
> 时间：2012-08-19T14:03:39.513
> 
> 标签：magento, custom-controls, user-registration

我在magento中建立了电子商务商店。从营销的角度来看，我们计划创建一个包含所有注册字段的登录页面，并且我们将运行一个单独的广告活动来收集用户信息。

我没有任何想法这样做。

请给我一个建议，使之成为可能。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:10:36.220

不完全符合您的要求，但如果您需要让用户在访问您的网站时立即登录/注册，您可以使用这个可爱的扩展程序。

[http://www.magentocommerce.com/magento-connect/catalog/product/view/id/12921/](http://www.magentocommerce.com/magento-connect/catalog/product/view/id/12921/)

# grails - Grails 2 应用程序不会在 JBOSS 上部署：BeanCreationException

> ID：12027088
> 
> 赞同：2
> 
> 时间：2012-08-19T14:04:11.987
> 
> 标签：grails, jboss, jboss5.x, grails-2.0

在将我的一个应用程序从 Grails 1.3.7 升级到 2.1.0 并安装了几个额外的插件后，该应用程序将不再部署在用于生产的 JBOSS AS 5.1 上。我从 JBOSS 服务器日志中得到的错误如下：

```
13:39:10,263 ERROR [[/]] Exception sending context initialized event to listener instance of class org.codehaus.groovy.grails.web.context.GrailsContextLoaderListener
            org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Found class org.hibernate.cfg.Mappings, but interface was expected
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
                at org.codehaus.groovy.grails.commons.spring.ReloadAwareAutowireCapableBeanFactory.doCreateBean(ReloadAwareAutowireCapableBeanFactory.java:126)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
                at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
                at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
                at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
                at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
                at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:707)
                at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:449)
                at org.codehaus.groovy.grails.commons.spring.DefaultRuntimeSpringConfiguration.getApplicationContext(DefaultRuntimeSpringConfiguration.java:153)
                at org.codehaus.groovy.grails.commons.spring.GrailsRuntimeConfigurator.configure(GrailsRuntimeConfigurator.java:170)
                at org.codehaus.groovy.grails.commons.spring.GrailsRuntimeConfigurator.configure(GrailsRuntimeConfigurator.java:127)
                at org.codehaus.groovy.grails.web.context.GrailsConfigUtils.configureWebApplicationContext(GrailsConfigUtils.java:121)
                at org.codehaus.groovy.grails.web.context.GrailsContextLoader.initWebApplicationContext(GrailsContextLoader.java:104)
                at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
                at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3910)
                at org.apache.catalina.core.StandardContext.start(StandardContext.java:4393) 
```

为了解决我之前遇到的另一个问题（LifecycleException/ReflectionException: 找不到方法 addChild...），我在我的 WEB-INF 目录中引入了一个 jboss-classloading.xml。目前有以下内容：

```
<classloading xmlns="urn:jboss:classloading:1.0" name="ROOT.war" domain="DefaultDomain" top-level-classloader="true" export-all="NON_EMPTY" import-all="true" parent-first="false"> </classloading> 
```

我怀疑当前的问题也与类加载有关，特别是因为我看到有问题的类是从 JBOSS lib 文件夹加载的，而不是从 war 的 lib 文件夹中的 jar 加载：

```
 [Loaded org.hibernate.cfg.Mappings from jar:file:/usr/local/jboss-5.1.0.GA/common/lib/hibernate-core.jar!/] 
```

显然，org.hibernate.cfg.Mappings 类既存在于 hibernate-core.jar 中，也存在于应用程序的 lib 文件夹中（hibernate-core-3.6.10.Final.jar）。因此，我尝试以不同的方式调整 jboss-classloading.xml 文件，以强制 JBOSS 从 war 文件中加载这个特定的类，但无论我做什么，我都会收到相同的错误（或者更早之前的不同错误）在部署周期中）。

我的战争的 WEB-INF/lib 目录的全部内容：

```
activation-1.1.jar                        google-collections.jar                     h2-1.3.164.jar                                 sitemesh-2.4.jar
antlr-2.7.7.jar                           grails-bootstrap-2.1.0.jar                 hamcrest-all-1.1.jar                           smartsprites-0.2.1.jar
aopalliance-1.0.jar                       grails-core-2.1.0.jar                      hibernate-commons-annotations-3.2.0.Final.jar  spring-aop-3.1.0.RELEASE.jar
asm-3.1.jar                               grails-crud-2.1.0.jar                      hibernate-core-3.6.10.Final.jar                spring-asm-3.1.0.RELEASE.jar
aspectjrt-1.6.10.jar                      grails-datastore-core-1.0.9.RELEASE.jar    hibernate-ehcache-3.6.10.Final.jar             spring-aspects-3.1.0.RELEASE.jar
aspectjweaver-1.6.10.jar                  grails-datastore-gorm-1.0.9.RELEASE.jar    hibernate-jpa-2.0-api-1.0.1.Final.jar          spring-beans-3.1.0.RELEASE.jar
avalon-framework-4.1.3.jar                grails-datastore-simple-1.0.9.RELEASE.jar  hibernate-validator-4.1.0.Final.jar            spring-binding-2.0.8.RELEASE.jar
axis-1.4.jar                              grails-hibernate-2.1.0.jar                 javase-1.7.jar                                 spring-context-3.1.0.RELEASE.jar
axis-jaxrpc-1.4.jar                       grails-logging-2.1.0.jar                   javassist-3.12.0.GA.jar                        spring-context-support-3.1.0.RELEASE.jar
axis-saaj-1.4.jar                         grails-plugin-codecs-2.1.0.jar             javassist-3.7.ga.jar                           spring-core-3.1.0.RELEASE.jar
axis-wsdl4j-1.5.1.jar                     grails-plugin-controllers-2.1.0.jar        jcaptcha-all-1.0-RC6.jar                       spring-expression-3.1.0.RELEASE.jar
cas-client-core-3.2.1.jar                 grails-plugin-converters-2.1.0.jar         jstl-1.1.2.jar                                 spring-jdbc-3.1.0.RELEASE.jar
cglib-2.2.jar                             grails-plugin-datasource-2.1.0.jar         jta-1.1.jar                                    spring-jms-3.1.0.RELEASE.jar
commons-beanutils-1.8.3.jar               grails-plugin-domain-class-2.1.0.jar       jul-to-slf4j-1.6.2.jar                         spring-js-2.0.8.RELEASE.jar
commons-codec-1.5.jar                     grails-plugin-filters-2.1.0.jar            logkit-1.0.1.jar                               spring-orm-3.1.0.RELEASE.jar
commons-collections-3.2.1.jar             grails-plugin-gsp-2.1.0.jar                mail-1.4.3.jar                                 spring-test-3.1.0.RELEASE.jar
commons-dbcp-1.4.jar                      grails-plugin-i18n-2.1.0.jar               mysql-connector-java-5.1.6.jar                 spring-tx-3.1.0.RELEASE.jar
commons-discovery-0.2.jar                 grails-plugin-log4j-2.1.0.jar              ognl-2.7.3.jar                                 spring-web-3.1.0.RELEASE.jar
commons-el-1.0.jar                        grails-plugin-mimetypes-2.1.0.jar          oro-2.0.8.jar                                  spring-webflow-2.0.8.RELEASE.jar
commons-fileupload-1.2.2.jar              grails-plugin-scaffolding-2.1.0.jar        pjl-comp-filter-1.7.jar                        spring-webmvc-3.1.0.RELEASE.jar
commons-io-2.1.jar                        grails-plugin-services-2.1.0.jar           quartz-1.6.1.jar                               tomcat-catalina-ant-7.0.27.jar
commons-lang-2.6.jar                      grails-plugin-servlets-2.1.0.jar           quartz-2.1.5.jar                               tomcat-embed-core-7.0.27.jar
commons-logging-1.1.jar                   grails-plugin-tomcat-2.1.0.jar             selenium-java-client-driver-1.0.2.jar          tomcat-embed-jasper-7.0.27.jar
commons-pool-1.5.6.jar                    grails-plugin-url-mappings-2.1.0.jar       servlet-api-2.5.jar                            tomcat-embed-logging-juli-7.0.27.jar
commons-validator-1.3.1.jar               grails-plugin-validation-2.1.0.jar         shiro-cas-1.2.0.jar                            tomcat-embed-logging-log4j-7.0.27.jar
concurrentlinkedhashmap-lru-1.2_jdk5.jar  grails-resources-2.1.0.jar                 shiro-core-1.2.0.jar                           utils-0.0.2.jar
core-1.7.jar                              grails-spring-2.1.0.jar                    shiro-ehcache-1.2.0.jar                        validation-api-1.0.0.GA.jar
dom4j-1.6.1.jar                           grails-web-2.1.0.jar                       shiro-quartz-1.2.0.jar                         xpp3_min-1.1.4c.jar
ecj-3.6.2.jar                             grails-webflow-2.1.0.jar                   shiro-spring-1.2.0.jar                         yuicompressor-2.4.2.jar
ehcache-core-2.4.6.jar                    groovy-all-1.8.6.jar                       shiro-web-1.2.0.jar 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:15:23.267

有一个插件可以做到这一点:)

[http://grails.org/plugin/jbossas](http://grails.org/plugin/jbossas)

文档位于此处：

[http://grails-plugins.github.com/grails-jbossas/](http://grails-plugins.github.com/grails-jbossas/)

这就是发生这种情况的原因：

[https://community.jboss.org/thread/156441](https://community.jboss.org/thread/156441)

您将需要配置 JBoss 以排除休眠 jar。JBoss 安装中的 common/lib 中的 JBoss Hibernate jar 会首先加载，而不是 Grails Hibernate jar。这是一个类加载器顺序/偏好问题。

一个非常肮脏的解决方案是删除 common/lib 下的 jar，或者按照建议让类加载器工作以排除这些 jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T01:12:39.183

我正在为一个项目使用 JBoss 6.1。我们从 1.3.7 开始，然后移动到 2.0.3，现在是 2.1。

我从来没有遇到过确切的问题，也没有遇到过与 Hibernate 的任何冲突，但我们确实遇到了与 Quartz 的冲突。

这是我用来隔离事物的方法...

我在 /WEB-INF/jboss-scanning.xml 中有这个：

```
<?xml version='1.0' encoding='UTF-8' ?>
<scanning xmlns='urn:jboss:scanning:1.0'>
    <path name='WEB-INF/lib/grails-datastore-gorm-*.jar'>
        <include name='org.grails.datastore' />
    </path>
</scanning> 
```

我在 /WEB-INF/jboss-classloading.xml 中有这个：

```
<?xml version="1.0" encoding="UTF-8" ?>
<classloading
        xmlns="urn:jboss:classloading:1.0"
        domain="hotdesk.war"
        export-all="NON_EMPTY"
        import-all="true"
/> 
```

最后，我在 BuildConfig.groovy 中有这个：

```
dependencies {
    //Added to deal with problems running Quartz on JBoss
    //NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(I)V]
    compile ('cglib:cglib-nodep:2.2')
}

//Added to deal with problems running Quartz on JBoss
//NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(I)V]
grails.war.resources = { stagingDir, args ->
    println "Removing export jars from WEB-INF/lib/"
    delete(file: "${stagingDir}/WEB-INF/lib/cglib-2.2.jar")
} 
```

希望这能让你更接近解决你的问题。

# jquery - 使用 jQuery 检测 HTML5 视频播放/暂停状态

> ID：12027092
> 
> 赞同：12
> 
> 时间：2012-08-19T14:05:06.617
> 
> 标签：jquery, html, video, html5-video, detect

我正在构建一个 jQuery 幻灯片，其中一张幻灯片上有一个 HTML5 视频播放器。当它检测到视频正在播放时，除了“幻灯片播放/暂停”按钮之外，还有什么方法可以让 jQuery 幻灯片从原本自动运行的状态暂停？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-19T15:00:10.730

您可以使用以下属性检查视频是否已暂停`paused`：

```
$("#videoID").get(0).paused; 
```

您可以使用以下方法暂停视频`pause()`：

```
$("#videoID").get(0).pause(); 
```

`play()`然后，您可以使用以下方法恢复视频的播放：

```
$("#videoID").get(0).play(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T09:18:22.993

```
var video = $('video');

var videoElement = video.get(0);

if (!videoElement.paused) {} 
```

使用 Jquery 的一种方法

# android - Android SQLLite 表列缺失错误

> ID：12027093
> 
> 赞同：0
> 
> 时间：2012-08-19T14:05:17.813
> 
> 标签：android, sqlite

这是我要创建的代码：

```
private static final String TABLE_CURRENT_GAME = "current";
    private static final String C_KEY_ID = "C_id";
    private static final String C_SCORE_1 = "C_score_1";
    private static final String C_SCORE_2 = "C_score_2";
    private static final String C_K_1 = "C_k_1";
    private static final String C_K_2 = "C_k_2";

public void onCreate(SQLiteDatabase db) {
            String CREATE_CURRENT_GAME_TABLE = "CREATE TABLE " + TABLE_CURRENT_GAME + "("
        + C_KEY_ID + " INTEGER PRIMARY KEY," + C_SCORE_1+"INT,"+C_SCORE_2+"INT,"+C_K_1+"INT,"+C_K_2+"INT)";

        db.execSQL(CREATE_CURRENT_GAME_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed

        db.execSQL("DROP TABLE IF EXISTS " + TABLE_CURRENT_GAME);
        // Create tables again
        onCreate(db);
    } 
```

和我的插入代码：

```
void addCurrentGameData(CurrentGameTable data) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(C_SCORE_1, data.getScore1()); // score player1
        values.put(C_SCORE_2, data.getScore2());//score player2
        values.put(C_K_1, data.getKseres1());//kseres player1
        values.put(C_K_2, data.getKseres2());//kseres player2
        // Inserting Row
        db.insert(TABLE_CURRENT_GAME, null, values);
        db.close(); // Closing database connection
    } 
```

CurrentGameData 是我的构造函数。

然后当尝试像这样插入表格时：

```
 DatabaseHandler db = new DatabaseHandler(this);

         /**
          * CRUD Operations
          * */
         // Inserting Contacts
         Log.d("Insert: ", "Inserting ..");
         db.addCurrentGameData(new CurrentGameTable(1,2,3,4)); 
```

在我的手机中，我收到此错误：

```
08-19 16:36:23.876: E/Database(3996): Error inserting current
08-19 16:36:23.876: E/Database(3996): android.database.sqlite.SQLiteException: table current has no column named C_score_2: , while compiling: INSERT INTO current(C_score_2, C_k_1, C_score_1, C_k_2) VALUES(?, ?, ?, ?); 
```

在我的模拟器中，我收到此错误：

```
08-19 13:48:19.036: E/AndroidRuntime(519): FATAL EXCEPTION: main
08-19 13:48:19.036: E/AndroidRuntime(519): android.database.sqlite.SQLiteException: no such table: current: , while compiling: SELECT  * FROM current
08-19 13:48:19.036: E/AndroidRuntime(519):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method) 
```

使用相同语法创建的其他表可以正常工作，但第二个表不能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:35:36.193

例如 ：

```
C_SCORE_1+"INT," 
```

创建一个名为 C_score_1INT 的列，不带类型，

您的代码应该是（添加空格）：

```
 String CREATE_CURRENT_GAME_TABLE = "CREATE TABLE " + TABLE_CURRENT_GAME + "("
      + C_KEY_ID + " INTEGER PRIMARY KEY, " + C_SCORE_1+" INT, "+C_SCORE_2+" INT, "+C_K_1+" INT, "+C_K_2+" INT)"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T14:08:13.653

转到设置 -> 管理应用程序 -> 您的应用程序 -> 清除所有应用程序数据。

在您在表中添加此列之前，它可能正在使用存储在手机中的旧表。

# php - PHP/MySQL 并发 - 写入依赖于读取 - 关键部分

> ID：12027096
> 
> 赞同：3
> 
> 时间：2012-08-19T14:05:56.547
> 
> 标签：php, mysql, multithreading, concurrency, critical-section

我有一个运行 PHP+MySQL 的网站。它是一个多用户系统，大多数 MySQL 表都是基于 MyISAM 的。

在过去的几个小时里，以下情况让我感到困惑：我有两个（并发）用户 A，B。他们俩都会这样做：

1.  对表 1 执行读取操作
2.  对另一个表 2 执行写操作（仅当先前的读操作将返回不同的结果时，例如 STATUS="OK"）

B 向 A 方向延迟了一点。

所以它会像这样发生：

*   用户 A 对表 1 执行读取并看到 STATUS="OK"。
*   （用户 A 安排写在表 2 上）
*   用户 B 对表 1 执行读取，仍然看到 STATUS="OK"。
*   用户 A 对表 2 执行写入（导致 STATUS="NOT OK" 不再）
*   用户 B 对表 2 执行写入（假设 STATUS="OK"）

如果将读取表 1 和写入表 2 定义为关键部分并以原子方式执行，我想我可以防止这种情况发生。我知道这在带有线程等的 Java 中工作得非常好，但是据我所知，在 PHP 中没有线程通信。

所以我的问题的解决方案一定是和数据库相关的吧？有任何想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T14:26:16.127

**正确的方法：**使用 InnoDB 和[transactions](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-transactions.html)。

**Wrong-But-Works 方法：**在执行数据库操作之前，使用[GET_LOCK()](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_get-lock) MySQL 函数获取一个独占命名锁。完成后，使用[RELEASE_LOCK()](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_release-lock)释放锁。由于只有一个客户端可以拥有一个特定的锁，这将确保同时在“关键部分”中不会有超过一个脚本实例。

伪代码：

```
SELECT GET_LOCK('mylock', 10);
If the query returned "1":
    //Read from Table 1
    //Update Table 2
    SELECT RELEASE_LOCK('mylock');
Else:
    //Another instance has been holding the lock for > 10 seconds... 
```

# html - 为什么 img 和 address 元素不会在最平凡的页面中垂直对齐？

> ID：12027099
> 
> 赞同：0
> 
> 时间：2012-08-19T14:06:05.007
> 
> 标签：html, css

我有一个包含两个元素的简单页面 - 地址和 img。我已将地址元素的显示更改为内联，并期望这两个元素将垂直对齐，两者都是内联元素。

这不是真的，请注意 - [http://jsfiddle.net/mark69_fnd/Q8ygG/19/](http://jsfiddle.net/mark69_fnd/Q8ygG/19/)

怎么了？

谢谢。

**编辑1**

我希望地址和徽标水平对齐，即在同一水平面上：

```
+-------+  +----+
|ADDRESS|  |LOGO|
+-------+  +----+ 
```

**编辑2**

我想我把每个人都搞糊涂了。我希望元素在同一行，这可能意味着垂直对齐而不是水平对齐。我已经修正了问题的措辞。对不起。

**编辑3**

一个重要的补充。调整窗口大小时，我希望地址和徽标保留它们的相对位置，而不是徽标浮动在地址下方。如果需要，应该会出现滚动条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:16:27.323

我更新了你的小提琴： http: [//jsfiddle.net/Q8ygG/4/](http://jsfiddle.net/Q8ygG/4/)我猜你就是你想要的？...

我不是使用 inline 或 inline-block 的忠实粉丝。当你想让它们在旧版本的 IE 中工作时，它们会给你带来巨大的痛苦。我更喜欢使用浮点数，它们更容易预测并且可以跨浏览器工作。

**编辑：**

刚刚看到你的编辑。您必须更改我小提琴中 img 和地址的顺序才能获得您所追求的东西，但这可能很明显......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T21:44:15.557

我总是将它包含在我的样式表中：

```
img{border:0;vertical-align:bottom} 
```

这可确保在大多数情况下正确对齐。唯一可能出现问题的情况是图像短于行高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T14:08:13.377

将两个元素的显示更改为`inline-block`：

```
#own_address {
    outline: green solid 1px;
    display: inline-block;
}

#logo {
    outline: green solid 1px;
    display: inline-block;
} 
```

# android - 如何使用 Android Canvas 进行缩放

> ID：12027100
> 
> 赞同：1
> 
> 时间：2012-08-19T14:06:10.840
> 
> 标签：android, canvas

我有一张矢量图形的大地图，我在我的自定义视图中显示。我使用 canvas.translate() 函数移动地图，因此我不需要再次重新计算我的线条的所有路径。

有没有类似的机制来实现缩放功能？我想用这些值保持我的路径并缩小和缩小，或者我是否必须从头开始重新计算我的路径的所有点。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:17:27.953

[Canvas.scale()](https://developer.android.com/reference/android/graphics/Canvas.html#scale%28float,%20float%29)将缩放画布（放大/缩小）。绘制路径后尝试执行缩放。如果它不起作用，您将需要重新计算积分。

# c++ - 可以从 stl:map 与 find 同时擦除吗

> ID：12027104
> 
> 赞同：1
> 
> 时间：2012-08-19T14:06:32.213
> 
> 标签：c++, stl

我想知道是否可以在 find 的同时从 stl:map 中删除？并发意味着 - 两个线程同时尝试，一个用于擦除，一个用于调用 find。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T14:08:40.803

当然不是。`stl::map`基于自动平衡二叉树（通常是红黑）。`erase`最终可能会导致重排树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T14:30:18.653

在同一个对象上同时调用一个`const`方法和一个非`const`方法是不行的，同时调用两个非`const`方法也是不行的。但是，可以同时调用 2 个`const`方法。这适用于*所有**`const`正确的代码，而不仅仅是标准库。

所以，在你的情况下，不，它不安全。

[*除非它是内部线程安全的，这是糟糕的设计。标准库中没有任何内容。]

# php - 使用 php/ajax/mysql 将记录添加到数据库的最佳方法？

> ID：12027105
> 
> 赞同：2
> 
> 时间：2012-08-19T14:06:35.620
> 
> 标签：php, javascript, mysql, ajax, methodology

想知道是否有人可以为我目前集成 php/js/mysql 的方法提出更好的方法。

我使用这种方法返回样本数据、设置唯一值等效果很好，而且效果很好（使用各种身份验证方法来减缓攻击尝试）。但是，我现在想添加相对大量的数据，想知道是否有更好的方法？

目前我这样做：

**JS**

```
$.ajax( {
    type : "GET",
    url : "_dbGetSomeData",
    dataType : "html",
    success: function(data) {
        parseData(data);
    }
}); 
```

**PHP**

```
<?php 
include '_common.php'; 
include '_auth.php';

$INPUT_EMAIL= mysql_real_escape_string($_GET["e"]);
$INPUT_FINGERPRINT = $_SESSION[SESH_VAR_NAME];

//--- Do some SQL stuff in the DB
?> 
```

这适用于一次性数据请求或设置一个值，但我可以使用此方法保存更多数据吗？我真的不想开始搞乱 _db PHP 文件的巨大查询字符串帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T23:40:16.837

这是一个如何使用 jQuery/PHP/MySQL 执行 Ajax 请求的示例

**JS**

```
var postData = {
    first_name: 'Foo',
    last_name: 'Bar',
    phone: '1-555-432-1234'
};

$.post('path/to/ajax/url.php', postData)
 .done(function(response) {
    alert("Data Loaded: " + response);
 }); 
```

**PHP**

```
// Connect to MySQL
$dbh = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);

// We want do some validation on the data so we can make a function called
// `validate()` if you want.
$data = validate($_POST);

$stmt = $dbh->('INSERT INTO my_table (first_name, last_name, phone) 
    VALUES (:first_name, :last_name, :phone)');

$stmt->execute($data); 
```

# mysql - 带有最小值和最大值的 sql 语句

> ID：12027111
> 
> 赞同：0
> 
> 时间：2012-08-19T14:07:09.877
> 
> 标签：mysql, sql, database

我需要一起使用 min 和 max 编写一个语句。

```
SELECT companyname  FROM companies JOIN stocklist 
USING (companyid) where price =some(
( select max(price) from stocklist) , ( select min(price) from stocklist) ) ; 
```

我需要获得最低和最高价值的公司名称，但这不起作用（因为最后一行）出了什么问题，我应该怎么做？

更新：

```
select companyname from stockList join companies using (companyid) WHERE price IN (select min(price) from stocklist) ; 
```

这对我有用，但只有一个操作数，我怎样才能得到两个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:21:40.197

I don't like the idea of having two subqueries in an IN clause. Here is another way with the join being made explicit:

```
SELECT companyname 
FROM companies c JOIN
     stocklist s
     c.companyid = s.companyid join
     (select min(price) as minprice, max(price) as maxprice
      from stocklist
     ) sm
     on s.price = minprice or s.price = maxprice 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:24:22.277

尝试这个：

```
SELECT companyname  FROM companies c
INNER JOIN stocklist s
ON c.companyid = s.companyid
WHERE price IN
((SELECT MAX(price) FROM stocklist ), 
 (SELECT MIN(price) FROM stocklist )) 
```

[看这个小提琴](http://sqlfiddle.com/#!2/eb6dd/4)

# objective-c - 回到第一个 viewController 并从他的子 viewController 启动 firstVIewController 的功能

> ID：12027112
> 
> 赞同：0
> 
> 时间：2012-08-19T14:07:14.807
> 
> 标签：objective-c, uiviewcontroller, navigation

我正在从 WebView 运行一个启动 ViewControllerA 的插件 (myPluginj)。从那个 viewControllerA 我移到 viewControllerB，然后移到 viewControllerC。

现在我尝试通过在 viewControlerC 中选择一些东西（在 tableView 中）回到起始位置（定义了 ViewController1 的位置）并在那里启动一个函数 myFUNC`dismissModalViewControllerAnimated`

当我第一次启动我正在使用的 ViewControllerA 时：

```
ViewControllerA *ts = [[ViewControllerA alloc] initWithNibName: @"tss" bundle:nil]; 
UINavigationController *myController = [[UINavigation alloc] initWithRootViewCOntroller:ts];
appDelegate.viewController presentModalViewController:myController animated:YES]; 
```

我应该如何从 viewControllerC 回来...我试过`popViewControllerAnimated`了，但它只返回到一个控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:29:49.487

如果要Back Root View Controller

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

如果您想返回特定视图。您可以设置堆栈的弹出值。

```
[self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:0] animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T15:08:52.880

我想你想来ViewControllerA，如果是的话，试试dismissModelViewController as

视图控制器A |^ 视图控制器B -> 视图控制器C

**viewControllerA** PresentModelView viewControllerB **Push** viewControllerC

所以**从 viewControllerC 返回到 viewControllerA**

您可以直接**关闭 ModelView viewControllerC** |v viewControllerA

然后它会释放导航控制器实例，因此堆栈viewControllerB和viewControllerC中的所有视图控制器都将被释放。

# iphone - 应用内购买测试在 IOS 4.01 上失败，适用于 iOS 5+

> ID：12027115
> 
> 赞同：1
> 
> 时间：2012-08-19T14:07:29.740
> 
> 标签：iphone, ios, ipad, ios4, in-app-purchase

这真让我抓狂。

我正在尝试调试使用应用内购买的应用。

我使用以下简单的代码来获取我的产品（我只有一个产品）：

```
NSSet *productIdentifiers = [NSSet setWithObject:PRODUCT_ID];       
SKProductsRequest *request = [[[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers] autorelease];
request.delegate = self;
[request start]; 
```

`response.products`在运行 iOS5 及更高版本的设备上，我将我的产品重新置于`productsRequest:didReceiveResponse:`. 我还可以在这些设备上下订单（使用测试用户）。

在运行 iOS 4.01 的设备上，我得到一个空数组，`response.products`我的产品 id 在`response.invalidProductIdentifiers`. 如果我尝试忽略产品信息并 `addPayment:`使用相同的产品 ID 在此设备上调用，我将`SKPaymentTransactionStateFailed`进入`paymentQueue:updatedTransactions:`.

显然我的设置是正确的，因为在我的 iOS5+ 设备上一切正常。

我还检查并尝试了[http://troybrant.net/blog/2010/01/invalid-product-ids/](http://troybrant.net/blog/2010/01/invalid-product-ids/)中的所有内容，但均无济于事。

有任何想法吗？你认为我在这种情况下提交应用程序安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:24:15.357

当我调试类似问题时，这对我有帮助 - [http://teewe.com/2011/10/24/ios-in-app-purchase-programming-troubleshooting-guide-continuously-updating/](http://teewe.com/2011/10/24/ios-in-app-purchase-programming-troubleshooting-guide-continuously-updating/)

# c++ - 学习特定于 Linux 的 API 有什么意义吗？

> ID：12027117
> 
> 赞同：0
> 
> 时间：2012-08-19T14:07:37.237
> 
> 标签：c++, c, linux, boost, cross-platform

我开始从 Windows 转向 Linux 开发。在这个过程中，我需要“忘记”所有熟悉的 Windows API（`WaitForSingleObject`等等`CreateTimer`），而是学习一堆 Linux 特定的 API。
所以，我的问题是……我应该吗？[我的意思是，如果像Boost](http://www.boost.org/)
这样的 跨平台库在 Linux 社区中普遍使用，我真的需要提前学习 Linux 特定的 API 吗？

我很清楚，至少熟悉 API 是个好主意，但是……在专业行业中最常见的是什么？大多数专注于 Linux 的软件公司是否使用跨平台库或特定于操作系统的 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T14:19:56.310

这取决于您要使用/需要的复杂程度。例如，Linux 具有`SEM_UNDO`System V 信号量选项，当使用 boost 时，该选项不可用。一般来说，增强可移植性并不是免费的，您将只能使用不同 O/S 可能性的公共子集。如果这对你来说已经足够了，那就去提升，不要处理（有时）晦涩的低级 API。这不仅应该使您的程序更便携（在某种程度上），而且更不容易出错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T14:22:50.450

作为一名纯 C 程序员，我依赖于长期成功的[POSIX 标准](http://pubs.opengroup.org/onlinepubs/9699919799/)。对我来说，这是我在基于 UNIX 的系统中使用过的最好的可移植 API。正如@Shi 在评论中指出的那样，无论您是为嵌入式计算机还是台式机/服务器计算机进行开发都很重要，因为 Boost 非常重。我也是一名嵌入式系统开发人员，即使对于[uCLinux](http://uclinux.org/)（嵌入式系统的微型 Linux 端口），POSIX 标准也非常可移植。

我认为 POSIX 标准的优势在于它的低级实现。它处理多年来不太可能发生变化的基本计算机概念（设备 I/O、内存管理、IPC...）。我们习惯于看到我们与计算机交互方式的变化，而不是计算机实际工作方式的变化，而 POSIX 标准由于其在处理计算机工作方式方面的成熟度而非常强大。确实，我爱上了那些神奇的函数，比如 fork()、pipe()、read() 和 write() :-)

# javascript - 如何让一个 DOM 元素旁边的所有东西都变暗？

> ID：12027127
> 
> 赞同：0
> 
> 时间：2012-08-19T14:09:20.907
> 
> 标签：javascript, css, dom

我想通过一个 DOM 元素旁边的 CSS 使屏幕变暗，它是子元素

我怎么做？

**编辑**：我想做一些类似于 chrome 的开发工具“检查元素”用户界面的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:13:59.340

`div`在整个视口之上创建一个图层。给它一些透明度或简单的纯色背景色。使用 CSS 提升您想要位于该层之上的元素`z-index`。

正如@jfriend00 指出的那样，您首先需要将`position`元素更改为`absolute`or `relative`。`left`然后，您必须使用和`top`（例如）再次定位元素。

# vba - 每个月和每年的最大值和最小值的条件格式公式帮助

> ID：12027128
> 
> 赞同：1
> 
> 时间：2012-08-19T14:09:25.973
> 
> 标签：vba, excel, conditional, formula

```
=$B2=MAX(IF(MONTH($A2)=MONTH($A$2:$A$252… 
```

这个公式每个月都适用，但我如何让它按年和月做到呢？

现在，它只是突出显示所有年份中最高月份的最大值。我有大约 2600 行我必须突出显示每年每个月的每个最大值和最小值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:56:25.240

尝试使用 TEXT 功能，例如像这样

`=B2=MAX(IF(TEXT(A$2:A$2600,"mm-yyyy")=TEXT(A2,"mm-yyyy"),B$2:B$2600))`

# php - PHP OOP 新手 - 需要将 $_POST 数据放入变量中

> ID：12027132
> 
> 赞同：2
> 
> 时间：2012-08-19T14:09:45.730
> 
> 标签：php, oop

我基本上是在玩 OOP，当我开始遇到问题清理然后执行进一步验证时，我正在创建一种验证和清理输入的方法。我正在寻找的是获取发布的`$_POST['name']`数据，清理输入以删除任何数字并验证留下的数据既不是数字字符也不是`null`数字字符。

但是我无法将经过清理的输入保存到`$sanitised`，它似乎是空的，但是当我替换时

```
$sanitised=$fv->noNumbers($_POST['name']); 
```

和

```
$sanitised=preg_replace('/[0-9]/', '', $_POST['name']); 
```

一切正常，所以我认为我在这个`$sanitised`变量中搞砸了一些东西。

我想学习所以要么解决这个问题，要么“你是个白痴，做错了”，将不胜感激。

```
<?php
    class formSanitise {

        public function noNumbers($value) {
            $value = preg_replace('/[0-9]/', '', $value);
        }
        public function isEmpty($value) {
                    return (!isset($value) || trim($value) == '') ? true : false;
        }
        public function isAlpha($value) {
            return preg_match('/[^a-z]/i', $value) ? false : true;
        }
?> 
```

> 处理器.php

```
<?php
    include('class.formSanitise.php');
    $fv = new formSanitise();

    $sanitised= $fv->noNumbers($_POST['name']);

    if ($fv->isEmpty($sanitised)) {
        $fv->addError('Name', 'Please enter something');
    }
    if (!$fv->isAlpha($sanitised)) {
        $fv->addError('Name', 'Please enter your name');
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:13:51.960

您要么需要创建一个[return](http://php.net/manual/en/functions.returning-values.php) in`noNumbers`要么通过`$value` [reference](http://php.net/manual/en/language.references.pass.php)传递。

退货方式：

```
public function noNumbers($value) {
            return preg_replace('/[0-9]/', '', $value);
        } 
```

参考

```
public function noNumbers(&$value) {
            $value = preg_replace('/[0-9]/', '', $value);
        } 
```

`returning`一个值意味着它`$value`是一个完全不同的变量，`$sanitized`当它从函数返回时将被分配给它。通过引用传递意味着它`$value`与您传递给的*变量完全相同*`noNumbers`，因此，函数内部变量发生的任何事情都会发生在已传入的变量上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:21:40.003

在上面的代码片段中，函数 noNumbers 不返回任何值。传递给函数的参数仅在该函数内具有范围，为了使该值可用于调用函数，函数内必须有一个 return 语句，它将返回调用函数的值。或者，您可以通过引用将值传递给函数。

# javascript - 在 execCommand 中“粘贴为纯文本”的 Javascript 技巧

> ID：12027137
> 
> 赞同：127
> 
> 时间：2012-08-19T14:10:34.277
> 
> 标签：javascript, html, dom-events, execcommand

我有一个基于`execCommand`此处介绍的示例的基本编辑器。在区域内粘贴文本的方法有以下三种`execCommand`：

*   `Ctrl`+`V`
*   右键单击->粘贴
*   右键单击->粘贴为纯文本

我想只允许粘贴没有任何 HTML 标记的纯文本。如何强制前两个操作粘贴纯文本？

**可能的解决方案：**我能想到的方法是为 ( `Ctrl`+ `V`) 设置 keyup 事件的侦听器，并在粘贴之前去除 HTML 标签。

1.  这是最好的解决方案吗？
2.  避免粘贴中的任何 HTML 标记是防弹的吗？
3.  如何将侦听器添加到右键单击-> 粘贴？

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2012-08-19T16:34:52.053

它将拦截`paste`事件，取消`paste`并手动插入剪贴板的文本表示：http:
[//jsfiddle.net/HBEzc/](http://jsfiddle.net/HBEzc/)。这应该是最可靠的：

*   它捕获各种粘贴（`Ctrl`+ `V`，上下文菜单等）
*   它允许您直接以文本形式获取剪贴板数据，因此您不必做丑陋的 hack 来替换 HTML。

不过，我不确定是否支持跨浏览器。

```
editor.addEventListener("paste", function(e) {
    // cancel paste
    e.preventDefault();

    // get text representation of clipboard
    var text = (e.originalEvent || e).clipboardData.getData('text/plain');

    // insert text manually
    document.execCommand("insertHTML", false, text);
}); 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2016-01-19T12:23:37.677

I couldn't get the accepted answer here to work in IE so I did some scouting around and came to this answer which works in IE11 and the latest versions of Chrome and Firefox.

```
$('[contenteditable]').on('paste', function(e) {
    e.preventDefault();
    var text = '';
    if (e.clipboardData || e.originalEvent.clipboardData) {
      text = (e.originalEvent || e).clipboardData.getData('text/plain');
    } else if (window.clipboardData) {
      text = window.clipboardData.getData('Text');
    }
    if (document.queryCommandSupported('insertText')) {
      document.execCommand('insertText', false, text);
    } else {
      document.execCommand('paste', false, text);
    }
}); 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-10-11T22:05:40.987

A close solution as pimvdb. But it's working of FF, Chrome and IE 9:

```
editor.addEventListener("paste", function(e) {
    e.preventDefault();

    if (e.clipboardData) {
        content = (e.originalEvent || e).clipboardData.getData('text/plain');

        document.execCommand('insertText', false, content);
    }
    else if (window.clipboardData) {
        content = window.clipboardData.getData('Text');

        document.selection.createRange().pasteHTML(content);
    }   
}); 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-07-09T09:53:44.183

当然，这个问题已经得到解答，而且这个话题很老，但我想提供我的解决方案，因为它很简单：

这是在我的 contenteditable-div 上的粘贴事件中。

```
var text = '';
var that = $(this);

if (e.clipboardData)
    text = e.clipboardData.getData('text/plain');
else if (window.clipboardData)
    text = window.clipboardData.getData('Text');
else if (e.originalEvent.clipboardData)
    text = $('<div></div>').text(e.originalEvent.clipboardData.getData('text'));

if (document.queryCommandSupported('insertText')) {
    document.execCommand('insertHTML', false, $(text).html());
    return false;
}
else { // IE > 7
    that.find('*').each(function () {
         $(this).addClass('within');
    });

    setTimeout(function () {
          // nochmal alle durchlaufen
          that.find('*').each(function () {
               // wenn das element keine klasse 'within' hat, dann unwrap
               // http://api.jquery.com/unwrap/
               $(this).not('.within').contents().unwrap();
          });
    }, 1);
} 
```

其他部分来自另一个我再也找不到的 SO-post...

* * *

更新 19.11.2014： [另一个 SO-post](https://stackoverflow.com/questions/21257688/paste-rich-text-into-content-editable-div-and-only-keep-bold-and-italics-formatt)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-01-29T13:53:58.490

发布的答案似乎都不能跨浏览器工作，或者解决方案过于复杂：

*   `insertText`IE 不支持该命令
*   在IE11中使用该`paste`命令导致堆栈溢出错误

对我有用的（IE11、Edge、Chrome 和 FF）如下：

```
$("div[contenteditable=true]").off('paste').on('paste', function(e) {
    e.preventDefault();
    var text = e.originalEvent.clipboardData ? e.originalEvent.clipboardData.getData('text/plain') : window.clipboardData.getData('Text');
    _insertText(text);
});

function _insertText(text) { 
    // use insertText command if supported
    if (document.queryCommandSupported('insertText')) {
        document.execCommand('insertText', false, text);
    }
    // or insert the text content at the caret's current position
    // replacing eventually selected content
    else {
        var range = document.getSelection().getRangeAt(0);
        range.deleteContents();
        var textNode = document.createTextNode(text);
        range.insertNode(textNode);
        range.selectNodeContents(textNode);
        range.collapse(false);

        var selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
    }
};
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<body>
<textarea name="t1"></textarea>
<div style="border: 1px solid;" contenteditable="true">Edit me!</div>
<input />
</body>
```

请注意，自定义粘贴处理程序仅对`contenteditable`节点需要/工作。由于 both`textarea`和 plain`input`字段根本不支持粘贴 HTML 内容，所以这里不需要做任何事情。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-16T18:46:32.093

Firefox 不允许您访问剪贴板数据，因此您需要进行“破解”才能使其正常工作。我无法找到完整的解决方案，但是您可以通过创建 textarea 并粘贴到它来修复 ctrl+v 粘贴：

```
//Test if browser has the clipboard object
if (!window.Clipboard)
{
    /*Create a text area element to hold your pasted text
    Textarea is a good choice as it will make anything added to it in to plain text*/           
    var paster = document.createElement("textarea");
    //Hide the textarea
    paster.style.display = "none";              
    document.body.appendChild(paster);
    //Add a new keydown event tou your editor
    editor.addEventListener("keydown", function(e){

        function handlePaste()
        {
            //Get the text from the textarea
            var pastedText = paster.value;
            //Move the cursor back to the editor
            editor.focus();
            //Check that there is a value. FF throws an error for insertHTML with an empty string
            if (pastedText !== "") document.execCommand("insertHTML", false, pastedText);
            //Reset the textarea
            paster.value = "";
        }

        if (e.which === 86 && e.ctrlKey)
        {
            //ctrl+v => paste
            //Set the focus on your textarea
            paster.focus();
            //We need to wait a bit, otherwise FF will still try to paste in the editor => settimeout
            window.setTimeout(handlePaste, 1);
        }

    }, false);
}
else //Pretty much the answer given by pimvdb above
{
    //Add listener for paster to force paste-as-plain-text
    editor.addEventListener("paste", function(e){

        //Get the plain text from the clipboard
        var plain = (!!e.clipboardData)? e.clipboardData.getData("text/plain") : window.clipboardData.getData("Text");
            //Stop default paste action
        e.preventDefault();
        //Paste plain text
        document.execCommand("insertHTML", false, plain);

    }, false);
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-10T21:03:15.287

我也在做纯文本粘贴，我开始讨厌所有的 execCommand 和 getData 错误，所以我决定用经典的方式来做，它就像一个魅力：

```
$('#editor').bind('paste', function(){
    var before = document.getElementById('editor').innerHTML;
    setTimeout(function(){
        var after = document.getElementById('editor').innerHTML;
        var pos1 = -1;
        var pos2 = -1;
        for (var i=0; i<after.length; i++) {
            if (pos1 == -1 && before.substr(i, 1) != after.substr(i, 1)) pos1 = i;
            if (pos2 == -1 && before.substr(before.length-i-1, 1) != after.substr(after.length-i-1, 1)) pos2 = i;
        }
        var pasted = after.substr(pos1, after.length-pos2-pos1);
        var replace = pasted.replace(/<[^>]+>/g, '');
        var replaced = after.substr(0, pos1)+replace+after.substr(pos1+pasted.length);
        document.getElementById('editor').innerHTML = replaced;
    }, 100);
}); 
```

可以在这里找到带有我的符号的代码： [http ://www.albertmartin.de/blog/code.php/20/plain-text-paste-with-javascript](http://www.albertmartin.de/blog/code.php/20/plain-text-paste-with-javascript)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-25T08:10:15.503

```
function PasteString() {
    var editor = document.getElementById("TemplateSubPage");
    editor.focus();
  //  editor.select();
    document.execCommand('Paste');
}

function CopyString() {
    var input = document.getElementById("TemplateSubPage");
    input.focus();
   // input.select();
    document.execCommand('Copy');
    if (document.selection || document.textSelection) {
        document.selection.empty();
    } else if (window.getSelection) {
        window.getSelection().removeAllRanges();
    }
} 
```

上面的代码在 IE10 和 IE11 中适用于我，现在也适用于 Chrome 和 Safari。未在 Firefox 中测试。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-04-20T04:28:14.093

在 IE11 中，execCommand 不能正常工作。我使用下面的 IE11 代码 `<div class="wmd-input" id="wmd-input-md" contenteditable=true>` 是我的 div 框。

我从 window.clipboardData 读取剪贴板数据并修改 div 的 textContent 并给出插入符号。

我给设置插入符超时，因为如果我不设置超时，插入符会转到 div 的末尾。

并且您应该通过以下方式阅读 IE11 中的剪贴板数据。如果您不这样做，则换行符处理不当，因此插入符号出错。

```
var tempDiv = document.createElement("div");
tempDiv.textContent = window.clipboardData.getData("text");
var text = tempDiv.textContent; 
```

在 IE11 和 chrome 上测试。它可能不适用于 IE9

```
document.getElementById("wmd-input-md").addEventListener("paste", function (e) {
    if (!e.clipboardData) {
        //For IE11
        e.preventDefault();
        e.stopPropagation();
        var tempDiv = document.createElement("div");
        tempDiv.textContent = window.clipboardData.getData("text");
        var text = tempDiv.textContent;
        var selection = document.getSelection();
        var start = selection.anchorOffset > selection.focusOffset ? selection.focusOffset : selection.anchorOffset;
        var end = selection.anchorOffset > selection.focusOffset ? selection.anchorOffset : selection.focusOffset;                    
        selection.removeAllRanges();

        setTimeout(function () {    
            $(".wmd-input").text($(".wmd-input").text().substring(0, start)
              + text
              + $(".wmd-input").text().substring(end));
            var range = document.createRange();
            range.setStart(document.getElementsByClassName("wmd-input")[0].firstChild, start + text.length);
            range.setEnd(document.getElementsByClassName("wmd-input")[0].firstChild, start + text.length);

            selection.addRange(range);
        }, 1);
    } else {                
        //For Chrome
        e.preventDefault();
        var text = e.clipboardData.getData("text");

        var selection = document.getSelection();
        var start = selection.anchorOffset > selection.focusOffset ? selection.focusOffset : selection.anchorOffset;
        var end = selection.anchorOffset > selection.focusOffset ? selection.anchorOffset : selection.focusOffset;

        $(this).text($(this).text().substring(0, start)
          + text
          + $(this).text().substring(end));

        var range = document.createRange();
        range.setStart($(this)[0].firstChild, start + text.length);
        range.setEnd($(this)[0].firstChild, start + text.length);
        selection.removeAllRanges();
        selection.addRange(range);
    }
}, false); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-29T12:07:08.227

经过搜索和尝试，我找到了某种最佳解决方案

> 重要的是要记住

```
// /\x0D/g return key ASCII
window.document.execCommand('insertHTML', false, text.replace('/\x0D/g', "\\n"))

and give the css style white-space: pre-line //for displaying 
```

```
var contenteditable = document.querySelector('[contenteditable]')
            contenteditable.addEventListener('paste', function(e){
                let text = ''
                contenteditable.classList.remove('empty')                
                e.preventDefault()
                text = (e.originalEvent || e).clipboardData.getData('text/plain')
                e.clipboardData.setData('text/plain', '')                 
                window.document.execCommand('insertHTML', false, text.replace('/\x0D/g', "\\n"))// /\x0D/g return ASCII
        })
```

```
#input{
  width: 100%;
  height: 100px;
  border: 1px solid black;
  white-space: pre-line; 
}
```

```
<div id="input"contenteditable="true">
        <p>
        </p>
</div> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-03-06T17:22:10.160

好的，因为每个人都在尝试解决剪贴板数据、检查按键事件和使用 execCommand。

我想到了这个

代码

```
handlePastEvent=()=>{
    document.querySelector("#new-task-content-1").addEventListener("paste",function(e)
    {

        setTimeout(function(){
            document.querySelector("#new-task-content-1").innerHTML=document.querySelector("#new-task-content-1").innerText.trim();
        },1);
    });

}
handlePastEvent();
```

```
<div contenteditable="true" id="new-task-content-1">You cann't paste HTML here</div>
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-18T02:27:05.083

在 2022 年，您可以使用 CSS user-modify: read-write-plaintext-only 来归档这个

```
 ```
.plain-text-only {
  user-modify: read-write-plaintext-only;
  -moz-user-modify: read-write-plaintext-only;
  -webkit-user-modify: read-write-plaintext-only;
}

div[contenteditable] {
  padding: 1rem 0.5rem;
  border: 2px solid #eee;
  border-radius: 4px;
  margin-bottom: 2rem;
}
```

```
<div contenteditable class="plain-text-only">Can't paste HTML here</div>

<div contenteditable>HTML styled text free</div>
``` 
```

# javascript - 从 Object 调用 Object.Prototype 中的函数

> ID：12027139
> 
> 赞同：0
> 
> 时间：2012-08-19T14:10:38.830
> 
> 标签：javascript, function, prototype

我添加了一个函数来`Object.prototype`使用`Object.prototype.func = function () {...}`，但是当我尝试使用`Object.func()`它调用它时会抛出一个错误，它没有在 Object.xml 中定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:18:39.270

JavaScript 中的一切都是对象，并且继承自 Object（包括 Object）。如果 Object.prototype 上有一个属性，那么一切都可以访问它，因为它在一切的原型中。

[http://jsfiddle.net/PxLDu/1/](http://jsfiddle.net/PxLDu/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T14:19:39.220

似乎对我来说工作正常（来自节点 REPL）：

```
Object.prototype.something = function() { console.log("Something!"); }
[Function]
> b = new Ob
Object  

Object  

> b = new Object()
{}
> b.something()
Something! 
```

# java - 在java中创建一个类实例数组

> ID：12027141
> 
> 赞同：3
> 
> 时间：2012-08-19T14:11:15.217
> 
> 标签：java, arrays

我对java很陌生。

我想要一个类的数组，其长度在运行时可能会有所不同

代码：

```
class Num
{
  ......
  ......
} 
```

如果 Num 是我的班级，我将如何创建新实例。我当前的代码非常类似于：

```
Num n[ ];
int length=0;
.
.
.
n[length++]=new Num(); 
```

从这段代码我得到错误：

```
"Uncompilable source code - variable factors might not have been initialized" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T14:13:08.140

您可以[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)为此目的使用一个。

```
ArrayList<Num> myListOfNum = new ArrayList<Num>(); 
```

然后`Num`在需要时继续添加 as 的对象。

```
Num num1 = new Num();
myListOfNum.add(num1);
Num num2 = new Num();
myListOfNum.add(num2); 
```

编辑：

要访问，您可以使用该`get()`方法以及特定索引。

```
Num tempNum = myListOfNum.get(indexGoesHere); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T14:15:06.953

您需要先创建数组本身，然后再尝试在其中设置元素。

```
 Num[] n = new Num[SIZE]; 
```

请注意，这`Num n[];`只是`Num[]`使用标识符声明类型变量`n`。

但是请注意，在 java 中，数组是固定长度的。如果您正在寻找可变长度数组，那么数组可能不是您所需要的。@KazekageGaara 为此提出了一个替代方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T14:29:02.140

使用 Java 集合

`List`**如果顺序**更重要会很好。

`Set`如果**唯一性**很重要

`Map`当**键值对**很重要时

```
List<MyClass> arrList = new ArrayList<MyClass>();

arrList.add(mobj1);
arrList.add(mobj2);
arrList.add(mobj3);

for(MyClass m : arrList){

      // m is the Values of arrList stored in

 } 
```

# php - 如何提交 which is outside my

[My website](http://shoutkey.com/surprise) is separated into two parts - a large (CodeMirror) `<textarea></</h1> <blockquote> <p>ID：12027143</p> <p>赞同：1</p> <p>时间：2012-08-19T14:11:28.533</p> <p>标签：php, html, css, forms</p> </blockquote> <hr/> <h2>回答 #1</h2> <blockquote> <p>赞同：3</p> <p>时间：2012-08-19T14:28:59.590</p> </blockquote> <p>从技术上讲，您可以使用该<code>form</code>属性将 a<code>textarea</code>与表单相关联：</p> <pre><code><form ... id="foobar"> ... </form> ... <textarea form="foobar" ...> </code></pre> <p>这是例如 Chrome 和 Firefox 支持的 HTML5 功能，但 IE 9 不支持。</p> <p>因此，请查看其他选项，主要是按照 @niomaster 的建议重新组织页面，或者按照 @Fluffeh 的建议使用 JavaScript。但是，在基本功能方面依赖启用 JavaScript 并不是一个好主意。在重新组织页面时，应注意避免弄乱可能依赖于当前标记的任何样式（或脚本）。另请注意，当前标记是无效的，因为<code>li</code>元素只允许作为<code>ol</code>or的子元素<code>ul</code>，因此无论如何都建议进行重组（如果可行）。</p> <p>最简单的情况是，将开始标签移动到元素<code><form ...></code>的最开始，将结束标签移动到元素结束之前就足够了。那么页面上的<em>所有</em>表单字段元素都将是该表单的字段。<code>body</code><code></form></code><code>body</code><em/></p> <hr/> <h2>回答 #2</h2> <blockquote> <p>赞同：3</p> <p>时间：2012-08-19T14:13:39.403</p> </blockquote> <p>您可以使表单成为最外层的标签。它不会改变文档的流程。</p> <hr/> <h2>回答 #3</h2> <blockquote> <p>赞同：1</p> <p>时间：2012-08-19T14:33:02.810</p> </blockquote> <p>使用 jQuery</p> <p>//从文本区域获取文本 </p> <p><code>var textareadata = $("#code").val();</code> </p> <p>//动态地将隐藏字段附加到您的表单 </p> <p><code>$('form').append('<input type="hidden" name="myfieldname" value="myvalue" id='myvalue'/>');</code></p> <p>// 动态将您的文本 adtea 数据写入隐藏字段附加到表单</p> <pre><code>$('#myvalue').val(textareadata); </code></pre> <hr/> <h2>回答 #4</h2> <blockquote> <p>赞同：1</p> <p>时间：2012-08-19T14:13:33.213</p> </blockquote> <p>您不能直接 - 如果它不在表单中，则无法提交。</p> <p>您可以做的最好的事情是编写一个自定义的 javascript 函数来替换您的“提交（图像类型）”操作，并将文本表单中的数据复制到表单<em>内</em>的隐藏字段中，然后将表单作为最后一个操作提交。这将获得您想要的结果，而用户并不真正知道您在幕后做什么。</p> <p>编辑：正如 niomaster 正确指出的那样，表单可以跨越的不仅仅是单个<code><div></code>或<code><li></code>属性。您可以轻松扩展它而无需更改代码结构。</p> <hr/> <h2>回答 #5</h2> <blockquote> <p>赞同：0</p> <p>时间：2012-08-19T15:00:58.890</p> </blockquote> <p>阿米雷格尔兹，</p> <p>您可以在表单标签中添加一个 id。使用 jquery 获取文本区域的值 [$("#text-areaID").val();] 并使用 jquery/javascript 添加隐藏字段，然后在验证表单后将值传递给您动态创建的隐藏字段提交表格。您也可以在 php 页面中获取 textarea 的值。 </p> <p>希望它会帮助你。如果有帮助，请将其标记为答案。</p> </body> </html></textarea>`

# android - FMOD如何在android中使用mp3文件名作为参数加载mp3文件

> ID：12027145
> 
> 赞同：2
> 
> 时间：2012-08-19T14:11:34.593
> 
> 标签：android, file, load, mp3, fmod

我在加载 mp3 文件时遇到问题。当我将 char 数组或 jstring 参数提供给 android java 本机方法时，c 源文件不起作用。

可能路径参数无法正常工作。它出什么问题了？

请回答我的问题。

主程序

* * *

void Java_com_chocolate_player_PlayerMain_cPlaySound(JNIEnv *env, jobject thiz, const char* path) { FMOD_RESULT 结果 = FMOD_OK;

```
result = FMOD_System_CreateSound(gSystem, path, FMOD_CREATECOMPRESSEDSAMPLE | FMOD_OPENMEMORY, 0, &gSound);
CHECK_RESULT(result);

__android_log_write(ANDROID_LOG_INFO, "path", path);

result = FMOD_System_PlaySound(gSystem, FMOD_CHANNEL_FREE, gSound, 0, &gChannel);
CHECK_RESULT(result); 
```

}

安卓java源码

* * *

在播放方法... char[] fmodPath = songPath.replace("/mnt", "").toCharArray(); cPlaySound(fmodPath);

本地方法 ... public native void cPlaySound(char[] path);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:24:16.057

为您的项目清单添加 READ_EXTERNAL_STORAGE 权限：

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> 
```

并且路径必须以“/”符号开头：

```
/sdcard/myfile.mp3 
```

# c++ - sublime text 2 C++ 在 Windows 上运行错误

> ID：12027159
> 
> 赞同：1
> 
> 时间：2012-08-19T14:13:59.903
> 
> 标签：c++, sublimetext2

我正在使用 Windows 7 x32 并且已经安装了 sublime text 2，MinGW，还在系统变量中为 minGW 设置了 PATH，但它仍然无法正常工作。我尝试构建它 [Finished in 0.8s] 然后我尝试运行，得到这个：

```
[Error 2] The system cannot find the file specified
[cmd:  [u'bash', u'-c', u"g++ 'C:\\Users\\air\\Desktop\\test.cpp' -o 'C:\\Users\\air\\Desktop/cc' && 'C:\\Users\\air\\Desktop/test'"]]
[dir:  C:\Users\air\Desktop]
[path: C:\Program Files\NVIDIA Corporation\PhysX\Common;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;D:\Program Files\MySQL\MySQL Server 5.5\lib;D:\QtSDK\Desktop\Qt\4.7.4\mingw\bin;D:\QtSDK\Desktop\Qt\4.8.1\mingw\bin;D:\Program Files\CodeBlocks\MinGW\bin]
[Finished] 
```

好像是因为linux使用的是“/”，而windows在文件路径中使用的是“\”。我尝试更改“C++.sublime-build”，但失败了。我真的不知道如何解决它，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:31:42.713

我遇到了同样的问题，答案很简单，为 42：因为 bash 需要在`cmd`命令中运行，所以它必须在`path`变量中。就我而言，bash 包含在 MSYS 中（可以选择使用 MinGW 安装），我添加`C:\MinGW\msys\1.0\bin`到路径，重新启动 Sublime Text，现在运行命令正在运行。

# mysql - 最新消息的 SQL 查询

> ID：12027160
> 
> 赞同：2
> 
> 时间：2012-08-19T14:14:05.230
> 
> 标签：mysql

我正在尝试实现一个与 facebook 非常相似的消息系统。消息表是：

```
+--------+----------+--------+-----+----------+
| msg_id | msg_from | msg_to | msg | msg_time |
+--------+----------+--------+-----+----------+ 
```

这里包含用户 ID 和`msg_from`包含消息的时间戳。一个用户的用户 ID 可以同时出现在 to 和 from 列中，并且对于另一个用户可以多次出现。我应该如何编写一个 SQL 查询来选择两个用户之间最近发送的消息？（消息可以来自任何一个） 1 to 2 或 2 to 1 。`msg_to``msg_time`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T15:46:52.377

由于 John Woo 澄清它不是定向的，这是我的新答案：

```
select *
from msgsList
where (least(msg_from, msg_to), greatest(msg_from, msg_to), msg_time)       
in 
(
    select 
       least(msg_from, msg_to) as x, greatest(msg_from, msg_to) as y, 
       max(msg_time) as msg_time
    from msgsList 
    group by x, y
); 
```

输出：

```
| MSG_ID | MSG_FROM | MSG_TO |    MSG |                       MSG_TIME |
------------------------------------------------------------------------
|      1 |        1 |      2 |  hello | January, 23 2010 17:00:00-0800 |
|      5 |        1 |      3 | me too | January, 23 2012 00:15:00-0800 |
|      6 |        3 |      2 |  hello | January, 23 2012 01:12:12-0800 | 
```

对于此输入：

```
create table msgsList
(
  msg_id int,
  msg_from int, 
  msg_to int,
  msg varchar(10),
  msg_time datetime
);

insert into msgslist VALUES

(1, 1, 2, 'hello', '2010-01-23 17:00:00'),      -- shown
(2, 2, 1, 'world', '2010-01-23 16:00:00'),

(3, 3, 1, 'i am alive', '2011-01-23 00:00:00'),
(4, 3, 1, 'really', '2011-01-22 23:15:00'),
(5, 1, 3, 'me too', '2012-01-23 00:15:00'),     -- shown

(6, 3, 2, 'hello', '2012-01-23 01:12:12');      -- shown 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/0a575/17)

* * *

如果 ANSI SQL 是您的一杯茶，那么可以这样做：[http ://sqlfiddle.com/#!2/0a575/19](http://sqlfiddle.com/#!2/0a575/19)

```
select *
from msgsList z
where exists
(
    select null
    from msgsList
    where 
      least(z.msg_from, z.msg_to) = least(msg_from, msg_to)
      and greatest(z.msg_from, z.msg_to) = greatest(msg_from, msg_to)
    group by least(msg_from, msg_to), greatest(msg_from, msg_to)
    having max(msg_time) = z.msg_time  
) ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T15:01:01.977

会不会这么简单？[http://www.sqlfiddle.com/#!2/50f9f/1](http://www.sqlfiddle.com/#!2/50f9f/1)

```
set @User1 := 'John';
set @User2 := 'Paul';

select *
from
(
  select *
  from messages 
  where msg_from = @User1 and msg_to = @User2
  order by msg_time desc
  limit 1
) as x
union
select *
from
(
  select *
  from messages 
  where msg_from = @User2 and msg_to = @User1
  order by msg_time desc
  limit 1
) as x
order by msg_time desc 
```

输出：

```
| MSG_ID | MSG_FROM | MSG_TO |         MSG |                      MSG_TIME |
----------------------------------------------------------------------------
|      2 |     Paul |   John | Hey Johnny! | August, 20 2012 00:00:00-0700 |
|      1 |     John |   Paul | Hey Paulie! | August, 19 2012 00:00:00-0700 | 
```

* * *

如果只有 MySQL 支持窗口功能，可能会简单得多：[http ://www.sqlfiddle.com/#!1/e4781/8](http://www.sqlfiddle.com/#!1/e4781/8)

```
with recent_message as
(
select *, rank() over(partition by msg_from, msg_to order by msg_time desc) as r
from messages
)
select * 
from recent_message 
where r = 1 
    and 
    (
      (msg_from = 'John' and msg_to = 'Paul') 
      or
      (msg_from = 'Paul' and msg_to = 'John')
    )
order by msg_time desc; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T15:47:53.500

对于像这样的任何复杂查询，请使用 TDQD — 测试驱动的查询设计。逐步设计答案，步骤的大小取决于您的经验以及您对问题的理解程度。

### 第 1 步 — 查找给定用户之间最新消息的时间

在整个过程中，我假设用户 ID 是整数。我正在使用值 1000 和 2000。

```
SELECT MAX(msg_time) AS msg_time
  FROM message
 WHERE ((msg_to = 1000 AND msg_from = 2000) OR
        (msg_to = 2000 AND msg_from = 1000)
       ) 
```

### 第 2 步 — 查找与最新消息对应的记录

```
SELECT m.*
  FROM message AS m
  JOIN (SELECT MAX(msg_time) AS msg_time
          FROM message
         WHERE ((msg_to = 1000 AND msg_from = 2000) OR
                (msg_to = 2000 AND msg_from = 1000)
               )
       ) AS t
    ON t.msg_time = m.msg_time
 WHERE ((m.msg_to = 1000 AND m.msg_from = 2000) OR
        (m.msg_to = 2000 AND m.msg_from = 1000)
       ) 
```

如果这些字符之间恰好有两个（或更多）消息具有相同的最新时间戳，那么它们都会被选中；目前没有在碰撞之间进行选择的依据。如果您认为这是一个问题，您可以安排`MAX(msg_id)`使用上面的查询（作为子查询）来查找：

```
SELECT m2.*
  FROM message AS m2
  JOIN (SELECT MAX(m.msg_id) AS msg_id
          FROM message AS m
          JOIN (SELECT MAX(msg_time) AS msg_time
                  FROM message
                 WHERE ((msg_to = 1000 AND msg_from = 2000) OR
                        (msg_to = 2000 AND msg_from = 1000)
                       )
               ) AS t
            ON t.msg_time = m.msg_time
         WHERE ((m.msg_to = 1000 AND m.msg_from = 2000) OR
                (m.msg_to = 2000 AND m.msg_from = 1000)
               )
       ) AS i
    ON i.msg_id = m2.msg_id 
```

**警告**：*代码未经任何 DBMS 正式测试。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T14:16:39.620

经过一番思考，我想出了这个：

```
SELECT min_user AS min(msg_from, msg_to), max_user AS max(msg_from, msg_to), 
max(msg_date) FROM msg GROUP BY min_user, max_user 
```

我仍然不太确定如何从消息中获取附加数据，但我会考虑一下。

# jquery - CSS“真实”阴影（光源）

> ID：12027161
> 
> 赞同：11
> 
> 时间：2012-08-19T14:14:19.827
> 
> 标签：jquery, effects, css, light

看看下面的图片：

![摩天大楼](../Images/97323f38993ad9317ab183da20efccbc.png)

蓝色框是 div。现在我要做的是实现一种 2.5D 功能：

我希望灰色阴影有点 3D 风格。起初我想给 box-shadow 值分配“Y”轴，如下所示：

```
"box-shadow: -5px -5px 10px" + value.tallness +  "#888" 
```

但结果是上面的图像。

关于如何只在一侧制作阴影的任何想法，就像某个地方有光源一样？

EXTRA -*移动*的“光源”怎么样？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-19T14:50:30.213

你去：http: [//jsfiddle.net/KaCDN/15/](http://jsfiddle.net/KaCDN/15/)

拖动光源以影响阴影。

更高的方块：

*   有更大的顶部，左边框
*   进一步阴影
*   他们的影子更模糊

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T15:08:57.253

如何更简单地移动阴影：

```
$(document).on('mousemove', function(e) {
    var elm = $("#test"),
        x = ~Math.round((e.pageX - elm[0].offsetLeft - 150) / 30),
        y = ~Math.round((e.pageY - elm[0].offsetTop - 150) / 30),
        z = 10+Math.abs(x)+Math.abs(y),
        cssVal = x+'px '+y+'px '+z+'px 10px #525252';

    elm.css({'-webkit-box-shadow' : cssVal, 'box-shadow' : cssVal });
}); 
```

​<a href="http://jsfiddle.net/2f5kw/3/" rel="nofollow"> **FIDDLE**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-17T08:07:39.037

一个更新的答案是使用像 Shine.js ( [http://bigspaceship.github.io/shine.js/](http://bigspaceship.github.io/shine.js/) ) 这样的库来为你处理这个确切的问题。

# java - 在 Netbeans 中反应包后，我不能再提交了

> ID：12027162
> 
> 赞同：1
> 
> 时间：2012-08-19T14:14:20.540
> 
> 标签：java, svn, netbeans

在重构了一些包/类之后，当我尝试提交我的项目时，我收到了这个错误：

org.tigris.subversion.javahl.ClientException: svn: Commit failed (详情如下): svn: Item 'One-of-my-project's-package' is out of date svn: DELETE of '/svn/Repository/!svn/ wrk/fe1d333f-3901-0010-acd1-d750d86b0019/One-of-my-project's-package'：409 冲突 (https://mysvnrepositoryserver.com)

SVN 命令返回一个错误，表明您的工作副本中的某些文件已过期。运行更新并再次尝试您的命令。

我该如何解决？运行“更新”不会覆盖我的课程，删除所有最新的修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:27:18.703

这在我身上发生了很多次，非常令人沮丧。如果在此期间没有其他人提交，更新不会干扰任何事情，即使有其他提交，也只会发生定期更新，将更改合并到您的文件中（或者，在发生冲突的情况下，生成通常的提交标记）。但是，更新可能也无济于事。通常手头是“树冲突”，它不涉及任何特定文件，而是目录信息。您可能重命名了一个包，重命名了一个目录并创建了您的情况。

尝试更新，如果没有帮助，您可能必须进行备份并手动恢复工作树的部分内容，然后重新应用更改的文件。

# wso2 - WSO2 ESB 代理服务示例不起作用

> ID：12027163
> 
> 赞同：0
> 
> 时间：2012-08-19T14:14:22.037
> 
> 标签：wso2, wso2esb

我正在尝试运行在 WSO2 站点上找到的“ESB 代理服务示例”： [http](http://wso2.org/project/carbon-studio/1.0.11/docs/esb_proxy_service_sample.html#CreatingaProxyServiceUsingCarbonStudioIDE) : //wso2.org/project/carbon-studio/1.0.11/docs/esb_proxy_service_sample.html#CreatingaProxyServiceUsingCarbonStudioIDE 我正在使用 WSO2 Developer Studio 2.0.1 和 ESB 4.0.3 与 Eclipse。我遵循了所有步骤：

1 - 创建了一个 Carbon 应用程序项目，然后使用 WSO2 Developer Studio IDE 创建了一个代理服务。

2 - 向 Developer Studio IDE 添加了一个基于 WSO2 ESB Carbon 3.2 的服务器（使用 jdk1.6.0_31 作为 JRE）并启动了服务器

3 - 尝试在 Eclipse 的服务器实例中部署创建的代理服务

该示例指示指向文件系统中的一个文件 - file:repository/samples/resources/proxy/sample_proxy_1.wsdl - 作为 WSDL URL。问题出现在上面的第 3 步 - 从 Eclipse 部署 carbon 应用程序时，Carbon 应用程序已成功部署：

```
[2012-08-19 10:01:02,391]  INFO - ApplicationManager Successfully Deployed Carbon Application : StockQuoteCapp {super-tenant}
but then I can see the following error in Eclipse's console and the Proxy Service is not created:
Caused by: java.net.URISyntaxException: Illegal character in opaque part at index 15: file:repository\samples\resources\proxy\sample_proxy_1.wsdl 
```

请让我知道如何解决这个问题，以及为什么在我的情况下样本不能“开箱即用”。

这是来自 Eclipse 控制台的整个消息堆栈：

```
[2012-08-19 09:58:39,381]  INFO - Main Initializing system...
[2012-08-19 09:58:39,506]  INFO - HttpTransport Created Connector [HTTP_11_NIO://*:9763]
[2012-08-19 09:58:39,506]  INFO - HttpTransport Created Connector [HTTPS_11_NIO://*:9443]
[2012-08-19 09:58:39,584]  INFO - TomcatCarbonWebappDeployer Deployed Carbon webapp: StandardEngine[Tomcat].StandardHost[defaulthost].StandardContext[/]
[2012-08-19 09:58:39,757]  INFO - TransactionFactory Starting Atomikos Transaction Manager 3.7.0
[2012-08-19 09:58:48,087]  INFO - CarbonCoreActivator Starting WSO2 Carbon...
[2012-08-19 09:58:48,087]  INFO - CarbonCoreActivator Operating System : Windows 7 6.1, x86
[2012-08-19 09:58:48,087]  INFO - CarbonCoreActivator Java Home        : G:\WORK\VFA\jdk1.6.0_31\jdk1.6.0_31\jre
[2012-08-19 09:58:48,087]  INFO - CarbonCoreActivator Java Version     : 1.6.0_31
[2012-08-19 09:58:48,087]  INFO - CarbonCoreActivator Java VM          : Java HotSpot(TM) Client VM 20.6-b01,Sun Microsystems Inc.
[2012-08-19 09:58:48,087]  INFO - CarbonCoreActivator Carbon Home      : G:/WORK/VFA/wso2esb-4.0.3/wso2esb-4.0.3
[2012-08-19 09:58:48,103]  INFO - CarbonCoreActivator Java Temp Dir    : G:/WORK/VFA/wso2esb-4.0.3/wso2esb-4.0.3/tmp
[2012-08-19 09:58:48,103]  INFO - CarbonCoreActivator User             : Dan, en-US, America/New_York
[2012-08-19 09:58:49,102]  INFO - LDAPConfigurationBuilder KDC server is disabled.
[2012-08-19 09:58:49,102]  INFO - DirectoryActivator Initializing Directory Server with working directory G:\WORK\VFA\wso2esb-4.0.3\wso2esb-4.0.3\repository\data\org.wso2.carbon.directory and port 10389
[2012-08-19 09:58:52,114]  INFO - ApacheLDAPServer LDAP server started.
[2012-08-19 09:58:52,676]  INFO - InputOutputAdaptersComponent There is no adapters-component.conf.. Using the default configuration
[2012-08-19 09:58:58,499]  INFO - RegistryCoreServiceComponent Registry Mode    : READ-WRITE
[2012-08-19 09:59:01,137]  INFO - CarbonServerManager Starting Carbon initialization...
[2012-08-19 09:59:01,184]  INFO - CarbonServerManager Creating super-tenant Axis2 ConfigurationContext
[2012-08-19 09:59:01,278]  INFO - ClusterBuilder Clustering has been disabled
[2012-08-19 09:59:01,387]  INFO - DeploymentInterceptor Deploying Axis2 module: wso2xfer-3.20 {super-tenant}
[2012-08-19 09:59:01,418]  INFO - DeploymentInterceptor Deploying Axis2 module: rampart-1.61-wso2v3 {super-tenant}
[2012-08-19 09:59:01,465]  INFO - DeploymentInterceptor Deploying Axis2 module: sandesha2-3.20 {super-tenant}
[2012-08-19 09:59:01,481]  INFO - DeploymentInterceptor Deploying Axis2 module: rahas-1.61-wso2v3 {super-tenant}
[2012-08-19 09:59:01,512]  INFO - DeploymentInterceptor Deploying Axis2 module: wso2caching-3.20 {super-tenant}
[2012-08-19 09:59:01,528]  INFO - DeploymentInterceptor Deploying Axis2 module: wso2mex-3.20 {super-tenant}
[2012-08-19 09:59:01,543]  INFO - DeploymentInterceptor Deploying Axis2 module: wso2throttle-3.21 {super-tenant}
[2012-08-19 09:59:01,559]  INFO - DeploymentInterceptor Deploying Axis2 module: relay-3.20 {super-tenant}
[2012-08-19 09:59:01,590]  INFO - DeploymentInterceptor Deploying Axis2 module: addressing-3.21 {super-tenant}
[2012-08-19 09:59:01,699]  INFO - HttpCoreNIOSSLSender Loading Identity Keystore from : repository/resources/security/wso2carbon.jks
[2012-08-19 09:59:01,715]  INFO - HttpCoreNIOSSLSender Loading Trust Keystore from : repository/resources/security/client-truststore.jks
[2012-08-19 09:59:01,746]  INFO - HttpCoreNIOSender HTTPS Sender starting
[2012-08-19 09:59:01,762]  INFO - HttpCoreNIOSender HTTP Sender starting
[2012-08-19 09:59:01,855]  INFO - DeploymentInterceptor Deploying Axis2 service: echo {super-tenant}
[2012-08-19 09:59:01,918]  INFO - DeploymentEngine Deploying Web service: Echo.aar - file:/G:/WORK/VFA/wso2esb-4.0.3/wso2esb-4.0.3/repository/deployment/server/axis2services/Echo.aar
[2012-08-19 09:59:02,042]  INFO - DeploymentInterceptor Deploying Axis2 service: Version {super-tenant}
[2012-08-19 09:59:02,074]  INFO - DeploymentEngine Deploying Web service: Version.aar - file:/G:/WORK/VFA/wso2esb-4.0.3/wso2esb-4.0.3/repository/deployment/server/axis2services/Version.aar
[2012-08-19 09:59:02,074]  INFO - ApplicationManager Deploying Carbon Application : ServiceChainingCapp_1.0.0.car...
[2012-08-19 09:59:02,074]  WARN - ApplicationManager No artifacts found to be deployed in this server. Ignoring Carbon Application : ServiceChainingCapp_1.0.0.car
[2012-08-19 09:59:02,370]  INFO - CarbonServerManager Completed super-tenant Axis2 ConfigurationContext creation in 1.186 sec
[2012-08-19 09:59:02,370]  INFO - HttpCoreNIOSSLListener Loading Identity Keystore from : repository/resources/security/wso2carbon.jks
[2012-08-19 09:59:02,370]  INFO - HttpCoreNIOSSLListener Loading Trust Keystore from : repository/resources/security/client-truststore.jks
[2012-08-19 09:59:02,933]  INFO - JMXServerManager JMX Service URL  : service:jmx:rmi://[myIP]:11111/jndi/rmi://[myIP]:9999/jmxrmi
[2012-08-19 09:59:02,995]  INFO - ModuleDeployer Deploying module: addressing-1.6.1-wso2v1 - file:/G:/WORK/VFA/wso2esb-4.0.3/wso2esb-4.0.3/repository/deployment/client/modules/addressing-1.6.1-wso2v1.mar
[2012-08-19 09:59:03,042]  INFO - ModuleDeployer Deploying module: rampart-1.6.1-wso2v1 - file:/G:/WORK/VFA/wso2esb-4.0.3/wso2esb-4.0.3/repository/deployment/client/modules/rampart-1.6.1-wso2v1.mar
[2012-08-19 09:59:03,042]  INFO - TCPTransportSender TCP Sender started
[2012-08-19 09:59:04,992]  WARN - DefaultSchemaGenerator We don't support method overloading. Ignoring [saveEndpointTemplate]
[2012-08-19 09:59:04,992]  WARN - DefaultSchemaGenerator We don't support method overloading. Ignoring [saveDynamicEndpointTemplate]
[2012-08-19 09:59:04,992]  WARN - DefaultSchemaGenerator We don't support method overloading. Ignoring [addDynamicEndpointTemplate]
[2012-08-19 09:59:05,040]  INFO - DeploymentEngine Deploying Web service: org.wso2.carbon.message.processor - 
[2012-08-19 09:59:05,055]  INFO - DeploymentEngine Deploying Web service: org.wso2.carbon.message.store - 
[2012-08-19 09:59:06,568]  INFO - DeploymentInterceptor Deploying Axis2 service: wso2carbon-sts {super-tenant}
[2012-08-19 09:59:06,867]  INFO - DeploymentEngine Deploying Web service: org.wso2.carbon.sts - 
[2012-08-19 09:59:07,179]  INFO - DeploymentEngine Deploying Web service: org.wso2.carbon.tryit - 
[2012-08-19 09:59:07,350]  INFO - DeploymentInterceptor Deploying Axis2 service: XKMS {super-tenant}
[2012-08-19 09:59:07,413]  INFO - DeploymentEngine Deploying Web service: org.wso2.carbon.xkms - 
[2012-08-19 09:59:07,428]  INFO - DeploymentEngine Deploying Web service: org.wso2.carbon.xkms.mgt - 
[2012-08-19 09:59:07,631]  INFO - CarbonServerManager Repository       : G:/WORK/VFA/wso2esb-4.0.3/wso2esb-4.0.3/repository/deployment/server/
[2012-08-19 09:59:08,038]  INFO - PermissionUpdater Permission cache updated for tenant 0
[2012-08-19 09:59:08,038]  INFO - CarbonServerManager ConfigurationContextService registered in 407ms
[2012-08-19 09:59:10,690]  INFO - Main Qpid broker TCP port : 5672
[2012-08-19 09:59:10,690]  INFO - Main Qpid broker TLS port : 8672
[2012-08-19 09:59:10,690]  INFO - QpidServiceComponent Successfully connected to the server on port 5672
[2012-08-19 09:59:10,738]  INFO - ServiceBusInitializer Starting ESB...
[2012-08-19 09:59:12,032]  INFO - CarbonUIServiceComponent Mgt Console URL  : https://[myIP]:9443/carbon/
[2012-08-19 09:59:12,048]  INFO - ServiceBusInitializer Initializing Apache Synapse...
[2012-08-19 09:59:12,048]  INFO - SynapseControllerFactory Using Synapse home : G:\WORK\VFA\wso2esb-4.0.3\wso2esb-4.0.3\.
[2012-08-19 09:59:12,048]  INFO - SynapseControllerFactory Using synapse.xml location : G:\WORK\VFA\wso2esb-4.0.3\wso2esb-4.0.3\.\.\repository\deployment\server\synapse-configs\default
[2012-08-19 09:59:12,048]  INFO - SynapseControllerFactory Using server name : [myIP]
[2012-08-19 09:59:12,065]  INFO - SynapseControllerFactory The timeout handler will run every : 15s
[2012-08-19 09:59:12,127]  INFO - Axis2SynapseController Initializing Synapse at : Sun Aug 19 09:59:12 EDT 2012
[2012-08-19 09:59:12,127]  INFO - Axis2SynapseController Loading mediator extensions...
[2012-08-19 09:59:12,127]  INFO - CarbonSynapseController Loading the mediation configuration from the file system
[2012-08-19 09:59:12,127]  INFO - MultiXMLConfigurationBuilder Building synapse configuration from the synapse artifact repository at : .\.\repository/deployment/server/synapse-configs\default
[2012-08-19 09:59:12,143]  INFO - XMLConfigurationBuilder Generating the Synapse configuration model by parsing the XML configuration
[2012-08-19 09:59:12,423]  INFO - SynapseConfigurationBuilder Loaded Synapse configuration from the artifact repository at : .\.\repository/deployment/server/synapse-configs\default
[2012-08-19 09:59:12,423]  INFO - RegistryBasedSynapseConfigSerializer Persisting the SynapseConfiguration to the registry...
[2012-08-19 09:59:12,548]  INFO - Axis2SynapseController Deploying the Synapse service...
[2012-08-19 09:59:12,548]  INFO - Axis2SynapseController Deploying Proxy services...
[2012-08-19 09:59:12,548]  INFO - Axis2SynapseController Deploying EventSources...
[2012-08-19 09:59:12,548]  INFO - ServerManager Server ready for processing...
[2012-08-19 09:59:12,642]  INFO - HttpCoreNIOListener HTTPS Listener started on port : 8243
[2012-08-19 09:59:12,657]  INFO - HttpCoreNIOListener HTTP Listener started on port : 8280
[2012-08-19 09:59:13,094]  INFO - RegistryEventingServiceComponent Successfully Initialized Eventing on Registry
[2012-08-19 09:59:13,110]  INFO - StartupFinalizerServiceComponent Started Transport Listener Manager
[2012-08-19 09:59:13,110]  INFO - StartupFinalizerServiceComponent Server           :  WSO2 ESB-4.0.3
[2012-08-19 09:59:13,110]  INFO - StartupFinalizerServiceComponent WSO2 Carbon started in 31 sec
[2012-08-19 09:59:13,579]  INFO - EventBrokerBuilderDS Successfully registered the event broker
[2012-08-19 10:00:04,901]  INFO - CarbonAuthenticationUtil 'admin' logged in at [2012-08-19 10:00:04,0901] from IP address [myIP]
[2012-08-19 10:01:02,171]  INFO - ApplicationManager Deploying Carbon Application : StockQuoteCapp_1.0.0.car...
[2012-08-19 10:01:02,391]  INFO - ApplicationManager Successfully Deployed Carbon Application : StockQuoteCapp {super-tenant}
[2012-08-19 10:01:17,460] ERROR - ProxyServiceFactory Error creating uri for proxy service wsdl
[2012-08-19 10:01:17,460] ERROR - ProxyServiceFactory Error creating uri for proxy service wsdl
java.net.URISyntaxException: Illegal character in opaque part at index 15: file:repository\samples\resources\proxy\sample_proxy_1.wsdl
    at java.net.URI$Parser.fail(URI.java:2810)
    at java.net.URI$Parser.checkChars(URI.java:2983)
    at java.net.URI$Parser.parse(URI.java:3020)
    at java.net.URI.<init>(URI.java:577)
    at org.apache.synapse.config.xml.ProxyServiceFactory.createProxy(ProxyServiceFactory.java:236)
    at org.apache.synapse.deployers.ProxyServiceDeployer.deploySynapseArtifact(ProxyServiceDeployer.java:58)
    at org.wso2.carbon.proxyadmin.ProxyServiceDeployer.deploySynapseArtifact(ProxyServiceDeployer.java:53)
    at org.apache.synapse.deployers.AbstractSynapseArtifactDeployer.deploy(AbstractSynapseArtifactDeployer.java:172)
    at org.apache.axis2.deployment.repository.util.DeploymentFileData.deploy(DeploymentFileData.java:136)
    at org.apache.axis2.deployment.DeploymentEngine.doDeploy(DeploymentEngine.java:810)
    at org.apache.axis2.deployment.repository.util.WSInfoList.update(WSInfoList.java:144)
    at org.apache.axis2.deployment.RepositoryListener.update(RepositoryListener.java:371)
    at org.apache.axis2.deployment.RepositoryListener.checkServices(RepositoryListener.java:254)
    at org.apache.axis2.deployment.RepositoryListener.startListener(RepositoryListener.java:365)
    at org.apache.axis2.deployment.scheduler.SchedulerTask.checkRepository(SchedulerTask.java:59)
    at org.apache.axis2.deployment.scheduler.SchedulerTask.run(SchedulerTask.java:67)
    at org.wso2.carbon.core.deployment.CarbonDeploymentSchedulerTask.run(CarbonDeploymentSchedulerTask.java:66)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
[2012-08-19 10:01:17,491]  WARN - ProxyServiceDeployer Proxy service hot deployment from file: G:\WORK\VFA\wso2esb-4.0.3\wso2esb-4.0.3\repository\deployment\server\synapse-configs\default\proxy-services\StockQuoteSvc-1.0.0.xml failed - Continue in fail-safe mode
org.apache.synapse.SynapseException: Error creating uri for proxy service wsdl
    at org.apache.synapse.config.xml.ProxyServiceFactory.handleException(ProxyServiceFactory.java:374)
    at org.apache.synapse.config.xml.ProxyServiceFactory.createProxy(ProxyServiceFactory.java:240)
    at org.apache.synapse.deployers.ProxyServiceDeployer.deploySynapseArtifact(ProxyServiceDeployer.java:58)
    at org.wso2.carbon.proxyadmin.ProxyServiceDeployer.deploySynapseArtifact(ProxyServiceDeployer.java:53)
    at org.apache.synapse.deployers.AbstractSynapseArtifactDeployer.deploy(AbstractSynapseArtifactDeployer.java:172)
    at org.apache.axis2.deployment.repository.util.DeploymentFileData.deploy(DeploymentFileData.java:136)
    at org.apache.axis2.deployment.DeploymentEngine.doDeploy(DeploymentEngine.java:810)
    at org.apache.axis2.deployment.repository.util.WSInfoList.update(WSInfoList.java:144)
    at org.apache.axis2.deployment.RepositoryListener.update(RepositoryListener.java:371)
    at org.apache.axis2.deployment.RepositoryListener.checkServices(RepositoryListener.java:254)
    at org.apache.axis2.deployment.RepositoryListener.startListener(RepositoryListener.java:365)
    at org.apache.axis2.deployment.scheduler.SchedulerTask.checkRepository(SchedulerTask.java:59)
    at org.apache.axis2.deployment.scheduler.SchedulerTask.run(SchedulerTask.java:67)
    at org.wso2.carbon.core.deployment.CarbonDeploymentSchedulerTask.run(CarbonDeploymentSchedulerTask.java:66)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.URISyntaxException: Illegal character in opaque part at index 15: file:repository\samples\resources\proxy\sample_proxy_1.wsdl
    at java.net.URI$Parser.fail(URI.java:2810)
    at java.net.URI$Parser.checkChars(URI.java:2983)
    at java.net.URI$Parser.parse(URI.java:3020)
    at java.net.URI.<init>(URI.java:577)
    at org.apache.synapse.config.xml.ProxyServiceFactory.createProxy(ProxyServiceFactory.java:236)
    ... 21 more
[2012-08-19 10:01:17,804]  WARN - ProxyServiceStore Name of the configuration item is not given 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T06:17:36.487

您收到此错误是因为您提到了带有 Windows 文件分隔符格式的 wsdl 文件 url，例如“file:repository\samples\resources\proxy\sample_proxy_1.wsdl”。您可能已经知道“\”字符是转义字符。

因此，您需要将文件 url 提供为“file:repository/samples/resources/proxy/sample_proxy_1.wsdl”，这是文章中指示的方式。

# asp.net - MVC 填充模型中的项目集合

> ID：12027167
> 
> 赞同：0
> 
> 时间：2012-08-19T14:14:48.373
> 
> 标签：asp.net, asp.net-mvc-3

我刚开始学习 MVC 3，我可以就实现某事的最佳方式提出一些建议。

我有一个基本场景，我可以创建一个包含一些文本和标签对象集合的博客文章。每个博客可以有多个标签，每个标签可以附加到多个博客。

```
public class BlogPost
{
    public int ID { get; set; }
    public string BlogText { get; set; }

    public virtual ICollection<Tag> Tags { get; set; }
}

public class Tag
{
    public int ID { get; set; }
    public string TagText { get; set; }

    public virtual ICollection<BlogPost> Blogs { get; set; }
} 
```

这将创建 2 个模型表，其中 id 为预期的连接表。

向 BlogPost 模型的创建视图添加一个部分的最佳方法是什么，这将允许我添加、编辑和删除一组标签（如在索引视图中）？

我最初的想法是使用通过 Model.Tags 属性传递的标记对象的部分视图，但看起来 Model 属性为空。这是一个好方法还是有更好的方法？

* * *

好的，因此创建视图的操作是生成的标准操作：

```
 // GET: /Blog/Create

    public ActionResult Create()
    {
        return View();
    } 
```

视图代码如下：

```
@model MVC_ManyToManyTest.Models.BlogPost

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>BlogPost</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.BlogText)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.BlogText)
            @Html.ValidationMessageFor(model => model.BlogText)
        </div>

        <div id="HolderForPartialView">
            @Html.Partial("ViewUserControl1", Model.Tags);
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

创建的部分视图是：

```
@model IEnumerable<MVC_ManyToManyTest.Models.Tag>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            TagText
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.TagText)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.ID }) |
            @Html.ActionLink("Details", "Details", new { id=item.ID }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.ID })
        </td>
    </tr>
}

</table> 
```

**我的问题**

一旦我加载部分视图，我在这一行得到空引用：

`@Html.Partial("ViewUserControl1", Model.Tags);`

模型对象为空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:37:08.647

模型为空，因为您的操作方法没有发送一个：

```
return View(); 
```

您需要给它一个带有空标签集合的空模型。就像是：

```
var model = new BlogPost { Tags = new Collection<Tag>() };
return View(model); 
```

或者，您也可以创建空集合作为模型构造函数的一部分：

```
public class BlogPost
{
    public BlogPost()
    {
        this.Tags = new Collection<Tag>();
    }

    public int ID { get; set; }
    public string BlogText { get; set; }

    public virtual ICollection<Tag> Tags { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:37:10.537

我觉得你的代码应该是这样的，

```
public class MainModel
{
  public BlogPost MyBlogPost {get; set;}
  public Tags MyTags {get; set;}
} 
```

**第一个视图**

```
@model MVC_ManyToManyTest.Models.MainModel

// Use model.MyBlogPost.variables here
...

@Html.Partial("ViewUserControl1", Model.Tags);

.... 
```

**局部视图**

```
@model IEnumerable<MVC_ManyToManyTest.Models.Tag>

// Use model.MyTags.variables here
... 
```

我对此不太确定，但我曾经遇到过类似的问题，我已经使用它解决了。希望这可以帮助。

# asp.net - ASP.NET，关闭浏览器窗口

> ID：12027169
> 
> 赞同：0
> 
> 时间：2012-08-19T14:14:52.227
> 
> 标签：asp.net

假设我有一个 ASP.NET 注册向导。单击“下一步”时，为每个步骤收集的信息临时存储在数据库表中。现在假设用户关闭了浏览器窗口，或者计算机意外关闭。因此，应用程序应该删除所有临时注册信息。怎么可能做到？

附加信息：我不能使用不能使用 Session 对象，因为应用程序是从 webfarm 提供的。

我已经考虑过使用存储过程来清理表格。但想找出其他的可能性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:17:56.257

只是不要将不完整的数据存储到数据库中。改为使用会话作为临时存储。它不仅为您提供更好的性能（避免数据库命中），而且完全避免了像您这样的问题。仅在输入所有必要信息后才存储到数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:18:09.877

在这种情况下，您可以为每个会话/尝试分配一个临时注册 ID。如果窗口关闭，下一次尝试将是一个新的尝试，并且应用程序应该每晚运行一次清理作业以删除未完成的尝试。

# linux - Shell：将 stdout 重定向到 /dev/null 并将 stderr 重定向到 stdout

> ID：12027170
> 
> 赞同：62
> 
> 时间：2012-08-19T14:14:59.237
> 
> 标签：linux, bash, shell, sh

[我在cyberciti.biz](http://www.cyberciti.biz/faq/how-to-redirect-output-and-errors-to-devnull/)上的评论中看到了这个有趣的问题。

我发现我什至找不到一种灵活的方法来使用 sh 在单行命令中执行此操作。

就我的解决方案而言，我的想法是：

```
tmp_file=`mktemp`
(./script 2>$tmp_file >/dev/null; cat $tmp_file) | ./other-script
rm tmp_file 
```

但是你看，这不是同步的，而且致命的是，它太丑陋了。

欢迎分享你的想法。:)

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-08-19T14:22:12.140

你要

```
./script 2>&1 1>/dev/null | ./other-script 
```

这里的顺序很重要。假设 stdin (fd 0)、stdout (fd 1) 和 stderr (fd 2) 最初都连接到一个 tty，所以

```
0: /dev/tty, 1: /dev/tty, 2: /dev/tty 
```

首先要设置的是管道。其他脚本的标准输入连接到管道，脚本的标准输出连接到管道，所以脚本的文件描述符到目前为止看起来像：

```
0: /dev/tty, 1: pipe, 2: /dev/tty 
```

接下来，重定向发生，从左到右。`2>&1`使 fd 2 走到 fd 1 当前去的任何地方，也就是管道。

```
0: /dev/tty, 1: pipe, 2: pipe 
```

最后，`1>/dev/null`将 fd1 重定向到`/dev/null`

```
0: /dev/tty, 1: /dev/null, 2: pipe 
```

最终结果，脚本的标准输出被静音，它的标准错误通过管道发送，最终在其他脚本的标准输入中。

另请参阅[http://bash-hackers.org/wiki/doku.php/howto/redirection_tutorial](http://bash-hackers.org/wiki/doku.php/howto/redirection_tutorial)

另请注意，它`1>/dev/null`是同义词，但比`>/dev/null`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-19T14:25:27.143

这个怎么样：

```
./script 3>&1 1>/dev/null 2>&3 | ./other-script 
```

这个想法是“备份”标准输出描述符，关闭原始标准输出，然后将 strerr 重定向到保存的标准输出。

它与 geirha 提供的解决方案非常相似，但更明确（bash 编码很容易变得非常模糊）。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-19T14:22:32.220

嗯，那是因为你做不到。STDOUT 和 STDERR 只是两个文件，由文件描述符表示，它们只是整数，特别是 1 和 2。

您要问的是将描述符 2 设置为`/dev/null`，然后将描述符 3 设置为相同的文件描述符 2 并将该输出转到其他位置。

# javascript - jQuery表单提交查询参数

> ID：12027184
> 
> 赞同：1
> 
> 时间：2012-08-19T14:17:14.663
> 
> 标签：javascript, jquery

我来自Java，对jQuery一无所知，我的应用程序需要与openid集成，我必须选择[openid-selector](http://code.google.com/p/openid-selector/)作为我的客户端，它是一个jQuery插件，可以向服务器发送带有查询参数的表单，我希望提交带有附加的表格

> openid_provider=谷歌

根据用户的选择查询参数对，我该如何修改js文件来实现这一点？

请看下面的演示：

[http://openid-selector.googlecode.com/svn/trunk/demo.html](http://openid-selector.googlecode.com/svn/trunk/demo.html)

我知道我什么时候设置 openid.setDemoMode(false); 它将向服务器发送请求，如下所示：

```
http://myserver/examples/consumer/try_auth.php?action=verify&openid_identifier=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid 
```

我想在上面提到的这个请求中添加一个查询对，我该怎么做？

使用的文件：

[http://code.google.com/p/openid-selector/source/browse/trunk/demo.html](http://code.google.com/p/openid-selector/source/browse/trunk/demo.html)

[http://code.google.com/p/openid-selector/source/browse/trunk/js/openid-en.js](http://code.google.com/p/openid-selector/source/browse/trunk/js/openid-en.js)

[http://code.google.com/p/openid-selector/source/browse/trunk/js/openid-jquery.js](http://code.google.com/p/openid-selector/source/browse/trunk/js/openid-jquery.js)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:41:25.157

您可以在表单中添加另一个隐藏字段，例如，

```
<input type="hidden" name="param" value="value" /> 
```

# asp.net-mvc - 使用 ASP.NET MVC 检查会话有效性

> ID：12027186
> 
> 赞同：0
> 
> 时间：2012-08-19T14:17:37.297
> 
> 标签：asp.net-mvc

当我启动应用程序时，我设置了一个会话变量。我想在每个操作（每个控制器操作）上检查此变量是否仍然可用或/如果是这种情况，则 Session 为 null 将操作重定向到 /Account/LogOn

我尝试使用 Application_BeginRequest 但没有成功。我认为循环有问题（如何先完成）Session_Start，Application_Start，...

你知道我该怎么做吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:05:03.430

检查 Global.asx.cs 上的预请求可能会起作用。

```
 protected void Application_PreRequestHandlerExecute(object sender, EventArgs e)
    {
         //Check session value  
    } 
```

# http - HTTP响应标头中“允许”和“访问控制允许方法”之间的区别？

> ID：12027187
> 
> 赞同：17
> 
> 时间：2012-08-19T14:17:41.343
> 
> 标签：http, node.js, backbone.js, cors, express

我已经为 NodeJS 使用 ExpressJS 编写了一个 RESTful API。我正在使用 BackboneJS 来调用这个 API。

这是我的 API 通过 OPTIONS 返回的示例标头：

```
Access-Control-Allow-Headers:Content-Type
Access-Control-Allow-Origin:http://localhost
Allow:GET,PUT,DELETE
Connection:keep-alive
Content-Length:14
Content-Type:text/html; charset=utf-8
Date:Sun, 19 Aug 2012 13:52:35 GMT
X-Powered-By:Express 
```

我已经修改了标题以包含首先出现的两个 Access-Control-Allow 字段。其余部分由 express 自动生成，包括 Allow 字段。我能够毫无问题地获得。但是，当我尝试使用 BackboneJS 进行 PUT 或 DELETE 时，我遇到：

```
Method PUT is not allowed by Access-Control-Allow-Methods.
Method DELETE is not allowed by Access-Control-Allow-Methods. 
```

当然，我可以修改我的响应标头以包含这两种方法来解决这个问题。

但我希望了解这些与 ExpressJS 根据我绑定到路由的内容自动添加的基本“允许”之间的区别。有什么区别？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-19T14:21:46.843

标题`Allow`表明您完全接受哪些方法。
浏览器不使用它；仅供参考。

`Access-Control-Allow-Methods`用于跨域 AJAX 请求；浏览器将在允许您从其他域发送 AJAX 请求之前检查该标头。

# c - 如何在位置无关代码中使用绝对符号

> ID：12027188
> 
> 赞同：1
> 
> 时间：2012-08-19T14:17:49.720
> 
> 标签：c, linux, shared-libraries, symbols, objcopy

我使用以下推荐创建了一个 elf 文件：

```
 objcopy -F elf64-x86-64 -B i386 -I binary binary_file output_file.o 
```

精灵有 3 个绝对符号（binary_start、binray_end、binary_size）

我试图把这个精灵编译成一个共享库。

问题是我在使用 -fpic 时无法到达 size_symbol 和 end_symbol （符号的地址错误）。

那么，在位置无关代码中使用这种符号的正确方法是什么？

# visual-studio - Visual Studio 2012 和 Itanium 目标

> ID：12027196
> 
> 赞同：1
> 
> 时间：2012-08-19T14:19:19.957
> 
> 标签：visual-studio, visual-studio-2012, itanium

我在 Visual Studio 2012 中找不到有关 Itanium 支持的明确指示。IDE（包含在 MSDN 订阅中的 VS 2012 高级版本）允许您为 C++ 或 C++/CLR 项目设置相应的目标，但在您尝试时抱怨缺少工具集编译安腾目标。我确实发现较早的文章说在 VS 2012 中将完全放弃对 Itanium 的支持，但是可以创建目标，所以我很困惑。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:36:43.607

看起来您需要为 Itanium 目标设置 Platform Toolset 选项为 v100，然后可以构建目标（我安装了 VS 2010，所以我假设工具集 v100 随 VS 2010 一起提供，并且可能无法在只有 VS 的清晰机器上使用2012 年安装）。

# tcl - 在 tcl 中查找两个列表的交集

> ID：12027197
> 
> 赞同：2
> 
> 时间：2012-08-19T14:19:20.733
> 
> 标签：tcl

是否有一个命令可以让我获得两个列表的交集（出现在两个列表中的成员）？

例如，如果列表是：

`a b c d h`和`c e f g h`

结果应该是`c h`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T02:47:48.820

假设您真正拥有的是一个集合（具有唯一元素的列表），您可以使用 tcllib：

[::struct::set 相交？设置1...？](http://tcllib.sourceforge.net/doc/struct_set.html)

```
package require Tcl 8.0
package require struct::set

set list1 {a b c d h}
set list2 {c e f g h}
::struct::set intersect $list1 $list2
> c h 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-19T15:32:03.050

没有命令，但通常我这样做的方式是在构建一个或多个列表*期间缓存元素，以节省时间。*例如，给定以下内容：

```
foreach x {a b c d h} {
    lappend list_x $x
}

foreach y {c e f g h} {
    lappend list_y $y
} 
```

我要补充：

```
foreach x {a b c d h} {
    lappend list_x $x
    set cache($x) 1
}

foreach y {c e f g h} {
    lappend list_y $y
    if {[info exists cache($y)]} {
        lappend list_xy $y
    }
}

puts $list_xy 
```

输出：

```
c h 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T15:53:12.613

```
package require Tcl 8.5
set a {1 2 3 4 5}
set b {3 4 5 6 7}
set intersect [list]

foreach elem $a {
    if {$elem in $b} {
        lappend intersect $elem
    }
} 
```

# asp.net - 将 Microsoft Access 表单导出为 HTML 的工具

> ID：12027201
> 
> 赞同：3
> 
> 时间：2012-08-19T14:19:41.160
> 
> 标签：asp.net, ms-access

我的任务是将一个非常大的 Microsoft Access 应用程序转换为 ASP.NET。我的客户希望保持 Web 布局与 Access 布局有些相似。是否有任何工具可以帮助我将这些表单转换为 HTML？我会很高兴有一个工具可以导出文本框和标签的 HTML 布局，而忽略所有数据绑定和代码隐藏逻辑。

我正在使用 Access 2010 并尝试将表单导出为 HTML，但结果完全无法使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T17:25:33.480

真正的问题是你真的在处理不同的架构。我的意思是这有点像告诉某人你需要某种交通工具。重型卡车和轻型小型飞机的设计目标截然不同。

只是门的重量，甚至卡车上的门把手机构，对于那架小型飞机来说都是 100% 不合适的（甚至只是重量和使用的材料都是错误的）。

另一个问题当然是 Access 的几个“著名”和长期使用的功能会产生您要求在此处复制的“外观”和布局。第一个特征当然是连续形式。这意味着您在表单上放置一行控件，但数据+控件一遍又一遍地重复。您在 asp.net 中没有这个简单的 UI，尤其是没有数据绑定 seutp。

这种系统的美妙之处在于您可以在大约一分钟的时间内在 Access 中创建这样的表单：

![在此处输入图像描述](../Images/f9635ace1898be4f2c10bfb74dd213f5.png)

另一种很酷的功能是如何在 Access 中“建模”一对多或关系数据。这里使用的常用方法是我们所说的子表单。与子表单相结合的主表单允许构建+维护父子关系数据设置，并且无需任何代码即可再次发生这种情况。我们谈论一个看起来像这样的表格：

![在此处输入图像描述](../Images/bd48492e51996690b6b9b33c3a23ddf1.png)

（所以在上面，您会看到设备列表 - 这是一个子表格，一个连续表格，以及如前所述的父级“子”表。这样的设计在 Access 中采用零代码）。所以我不确定某些布局转换器是否会有所帮助，因为该子表单的数据绑定与主表单 100% 分开，并且在转换过程中混合控件和布局会使更多的工作和可能更多的混乱，你必须取消-纠纷。简而言之：这是非常不同的！

现在公平地说，我使用的以上屏幕截图是 Access Web 表单。您确实意识到对于 Access 2010，您具有 Web 发布能力。您可以在我的以下视频中看到我切换到中途点并在浏览器中 100% 运行 Access 应用程序。此功能不需要 ActiveX 或 Silverlight。

[http://www.youtube.com/watch?v=AU4mH0jPntI](http://www.youtube.com/watch?v=AU4mH0jPntI)

上面的关键建议是，这将使基于 Web 的应用程序保持相同的外观和感觉，因为您实际上将使用 Access 来构建 Web 表单。

不幸的是，现有的 VBA 表单不会自动转换为 2010 年的这些新 Web 表单。我认为无论如何重新布局表单会更好。并且如前所述，UI 与数据处理代码的数据库绑定和分离使得这样的设置无论如何都完全不同。

*如果没有继续表单，也没有子表单，那么无论如何都不*存在用于 asp.net 表单的一对一映射类型 - 但如果您选择使用 Access Web 表单，则存在这种映射。

归根结底，由于 Web 非常不同，我认为重新构建表单仍然有意义，但是根据这里的目标，使用 Access 的新 Web 表单发布功能会让你得到相同的结果外观和感觉——包括那些“经典”连续形式的使用，以及子形式的使用。

# visual-c++ - 使用 msxml/IXMLDOMDocument 解析在线 HTML 页面

> ID：12027205
> 
> 赞同：-1
> 
> 时间：2012-08-19T14:20:12.840
> 
> 标签：visual-c++, xhtml, html-parsing, msxml

关于使用 msxml/IXMLDOMDocument 解析在线 HTML 页面的任何好的教程？

我需要使用 XPATH 表达式解析 HTML 页面。

很可能某些 HTML 页面不会 100% 有效，因此我需要将解析器配置为更“友好”或对此类页面不那么严格。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:03:09.063

您可以使用 tidy 或 tidy 包装库来整理无效的 html。完成此操作后，您可以使用 MSXML 指定 xhtml 命名空间来解析 html。
[**EfTidy**](http://www.codeproject.com/Articles/8974/EfTidy-The-Tidy-Library-wrapper)是一个很好的、最新的开源 tidy 包装器项目，用于整理 html。
我想展示一个用 VBScript 编写的示例，以使用 XPath 进行寻址以获取此问题的标题。

```
'EfTidy constants
Const XhtmlOut = 1
Const DoctypeLoose = 3 'for transitional

Dim EfTidy, sInvalidHTML, sValidHTML

With CreateObject("MSXML2.XMLHTTP.6.0")
    .open "GET", "http://stackoverflow.com/q/12027205/"
    .send
    sInvalidHTML = .responseText
End With

Set EfTidy = CreateObject("EfTidy.tidyCom")
With EfTidy.Option 'config
    .Clean = True
    .OutputType = XhtmlOut
    .DoctypeMode = DoctypeLoose
End With
sValidHTML = EfTidy.TidyMemToMem(sInvalidHTML)

With CreateObject("MSXML2.DomDocument.6.0")
    .async = False
    .validateOnParse = False
    .resolveExternals = True
    .setProperty "ProhibitDTD", False
    If .LoadXml(sValidHTML) Then
        .setProperty "SelectionLanguage", "XPath"
        .setProperty "SelectionNamespaces", "xmlns:xhtml='http://www.w3.org/1999/xhtml'"
        WScript.Echo .SelectSingleNode("//xhtml:div[@id='question-header']/xhtml:h1").Text
    End If
End With 
```

希望能帮助到你。

# php - 如果没有任何内容进入自定义字段，如何阻止显示？

> ID：12027206
> 
> 赞同：0
> 
> 时间：2012-08-19T14:20:19.997
> 
> 标签：php, wordpress, custom-fields

我可以想办法用 CSS 做到这一点，但我宁愿以一种更简洁的方式来做，如果后端的自定义字段中没有输入任何内容，则根本不会出现代码。继承人的代码：

```
<li class="price">
   <?php echo get_post_meta($post->ID, 'Price', true); ?>
</li> 
```

我试过这个：

```
<?php if get_post_meta($post->ID, 'Price', true); { ?>
    <li class="price">
        <?php echo get_post_meta($post->ID, 'Price', true); ?>
    </li>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:23:46.603

您可以对变量进行简单检查以查看它是否为空：

```
<li class="price">
   <?php echo (!empty($post->ID)) ? 'Price': 'empty'; ?>
</li> 
```

如果你想`<li>`完全取消它，如果它是空的：

```
<?php echo (!empty($post->ID)) ? '<li class="price">Price</li>': ''; ?> 
```

# sql - 如何在我的表中创建 sql 约束

> ID：12027207
> 
> 赞同：1
> 
> 时间：2012-08-19T14:20:34.413
> 
> 标签：sql, oracle, constraints, oracle-sqldeveloper

我有这张桌子：

```
id | product_group_id | percentage
1  | 1                | 0.2
2  | 1                | 0.3
3  | 1                | 0.5
4  | 2                | 0.4
5  | 2                | 0.6 
```

我想知道是否有一种方法可以为每个 product_group_id 创建约束，百分比将等于 1（如果 product_group_id = 1 所以 0.2 + 0.3 + 0.5 = 1）。
例如，如果我将 id = 2 的百分比更改为 0.8 或 0.1，则更新（或插入）将失败，因为总和不是 1。

先谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T17:35:36.730

通常，在您在表顶部构建的 API 中强制执行这种约束以操纵百分比会更有意义。当然，假设每个`product_group_id`会话一次最多被一个会话操作。

如果您确实想强制执行这种限制，您可以创建一个在提交时刷新的物化视图，并在该物化视图上创建一个约束。就像是

```
SQL> create table table_name(
  2    id number primary key,
  3    product_group_id number,
  4    percentage number
  5  );

Table created.

SQL> create materialized view log on table_name;

Materialized view log created.

SQL> ed
Wrote file afiedt.buf

  1  create materialized view mv_table_name
  2    refresh on commit
  3  as
  4  select product_group_id, sum(percentage) total_percentage
  5    from table_name
  6*  group by product_group_id
SQL> /

Materialized view created.

SQL> alter table mv_table_name
  2    add( constraint sum_of_1 check( total_percentage = 1 ));

Table altered. 
```

这将允许您插入总和为 1 的行

```
SQL> insert into table_name values( 1, 1, 0.5 );

1 row created.

SQL> insert into table_name values( 2, 1, 0.5 );

1 row created.

SQL> commit;

Commit complete. 
```

并且当您尝试提交导致总和不是 1 的更改时会引发错误

```
SQL> insert into table_name values( 3, 1, 0.1 );

1 row created.

SQL> commit;
commit
*
ERROR at line 1:
ORA-12008: error in materialized view refresh path
ORA-02290: check constraint (SCOTT.SUM_OF_1) violated 
```

请注意，这是在提交时检查的，这是您真正需要的，因为当您想要插入多行时，您需要在事务期间违反约束。

而且，正如已经指出的那样，如果存在舍入误差的可能性，您可能希望`CHECK`约束允许总和为 1 +/- 一些小 epsilon（即在 0.999999 和 1.000001 之间）

# javascript - 下拉选项增量值

> ID：12027210
> 
> 赞同：0
> 
> 时间：2012-08-19T14:20:51.417
> 
> 标签：javascript, loops, for-loop, increment

编辑 - 谢谢大家 - 我知道这很简单......看不到树上的木头！

```
var abc = new Array('Perth','Auckland');

case '1':
    document.getElementById(q15).options.length = 0;
    for (i = 0; i < abc.length; i++) {
        createOption(document.getElementById(q15), abc[i], abc.[i]);
        }
break; 
```

我相信这很容易，但我有一个心理障碍。

当上面的 Javascript 输出包含数组值的下拉列表时，它会生成以下内容：

```
<option value="Perth">Perth</option>
<option value="Auckland">Auckland</option> 
```

但是，我真的需要以下内容：

```
<option value="1">Perth</option>
<option value="2">Auckland</option> 
```

所有选项的`value=`数字都会增加。

有任何想法吗？

谢谢，

H。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:24:09.543

看起来这个调用设置了值：

createOption(document.getElementById(q15), abc[i], abc.[i]);

所以尝试将第一个或第二个 abc[i] 更改为仅 i。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:26:16.070

使用 i 代替`abc[i]`OR`abc.[i]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T14:24:58.500

假设`createOption`函数的第二个参数是`value`属性的值：

```
createOption(document.getElementById(q15), i + 1, abc[i]); 
```

# php - 调用未定义的方法 App::uses() - cakephp - CakeEmail

> ID：12027222
> 
> 赞同：0
> 
> 时间：2012-08-19T14:22:27.047
> 
> 标签：php, email, cakephp

我正在尝试设置 CakeEmail 以使用我的 gmail 作为我的 isp 阻止端口 25。

但是，我在尝试加载 App::uses 类时遇到了一个非常令人沮丧的问题。

我尝试将其放置在许多不同的位置，但仍然出现以下错误。

```
Fatal error: Call to undefined method App::uses() in C:\www\ash\app\controllers\songrequests_controller.php on line 3 
```

我不确定发生了什么。我是否没有正确加载某些东西，或者我没有将其放置在正确的位置？

```
<?php

App::uses('CakeEmail', 'Network/Email');
class SongrequestsController extends AppController { 
```

[http://book.cakephp.org/2.0/en/core-utility-libraries/email.html](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html)

谢谢你的帮助。问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:23:05.960

`App::uses()`是 CakePHP 2.x 中引入的一种方法，而您似乎使用的是 CakePHP 1.x，因此出现错误。

因此，您要么必须升级到 CakePHP 2.x（我推荐），要么使用 CakePHP 1.x 的方法来发送[http://book.cakephp.org/1.3/en/view/1283/Email](http://book.cakephp.org/1.3/en/view/1283/Email)中描述的电子邮件。

# nhibernate - Fluent NHibernate 内存泄漏

> ID：12027224
> 
> 赞同：4
> 
> 时间：2012-08-19T14:22:44.443
> 
> 标签：nhibernate, memory-leaks, fluent-nhibernate

我把头发拉到似乎是内存泄漏的地方，但我找不到原因:(

我在自己的 PC 上构建了一个应用程序，这是一个拥有大量内存的重型野兽，所以我从未意识到我的进程消耗了这么多内存。我是在将代码发布到内存有限的生产环境后才意识到的。

我使用了很多不同的技术和模式，包括 WCF，但我现在已经到了我剥离大部分代码以找出消耗这么多内存的地步......

这是应用程序的最简化版本，1 个实体，1 个映射，以及一个从数据库中检索的简单程序，在它运行时，我可以看到任务管理器中的进程无限增长：

```
using System;
using System.Linq;
using FluentNHibernate.Cfg;
using FluentNHibernate.Cfg.Db;
using FluentNHibernate.Mapping;
using NHibernate;
using NHibernate.Linq;

namespace ConsoleApplication18
{
    public class Program
    {
        private static void Main()
        {
            var i = 0;

            while ( i < 1000000 )
            {
                ISession session = BuildSessionFactory().OpenSession();
                ITransaction transaction = session.BeginTransaction();
                var users = session.Query< User >().ToList();
                transaction.Commit();
                transaction.Dispose();
                transaction = null;
                session.Dispose();
                session = null;
                Console.WriteLine( users.Count );
                users = null;
                i++;
            }
        }

        private static ISessionFactory BuildSessionFactory()
        {
            return Fluently.Configure()
                .Database( MsSqlConfiguration
                               .MsSql2008
                               .ConnectionString( "Data Source=SEB-PC\\SEBPC;Initial Catalog=Nice;Integrated Security=True" ) )
                .Mappings( m => m.FluentMappings.AddFromAssemblyOf<User>() )
                .BuildSessionFactory();
        }
    }

    public class User
    {
        public virtual Guid Id { get; set; }
        public virtual string FirstName { get; set; }
        public virtual string LastName { get; set; }
        public virtual string Email { get; set; }
    }

    public class UserMap : ClassMap< User >
    {
        public UserMap()
        {
            Id( x => x.Id ).UnsavedValue( Guid.Empty );
            Map( x => x.FirstName )
                .Length( 50 )
                .Not.Nullable();
            Map( x => x.LastName )
                .Length( 50 )
                .Not.Nullable();
            Map( x => x.Email )
                .Length( 254 )
                .Not.Nullable()
                .Unique();
        }
    }
} 
```

难道我做错了什么？

我使用 nuget 获得了第 3 方 DLL，版本如下：

*   FluentNHibernate：1.3.0.733

*   Iesi.Collections：1.0.1.0

*   NHibernate：3.3.1.4000

对不起，如果这是一个新手问题，但我已经在整个地方搜索了一个多星期了:(

谢谢！

塞布:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T19:55:44.143

我是个菜鸟，确实我不应该每次都创建一个新的会话工厂，而是使用现有的。导致我走错方向的是，最初我的代码托管在 WCF 服务中，我认为我每次都必须创建一个新工厂。

我现在确保整个代码中只存在 1 个工厂并且内存消耗是稳定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T14:33:00.207

您正在创建 1000000 个 Hibernate 会话对象，为什么要创建这么多会话对象，只需创建 1 个会话对象并仅使用 1 个会话对象运行查询。

# python - 在python中一起播放2个视频

> ID：12027228
> 
> 赞同：-1
> 
> 时间：2012-08-19T14:23:15.160
> 
> 标签：python, python-gstreamer

我想用 python 一起播放 2 个视频。除此之外，我想在其他视频中的特定时间暂停、前进和后退 1 个视频。我开始使用 Python Gstreamer 实现这一点，它可以一起播放 2 个视频，但第二部分很复杂。有谁知道可以做到这一点的python库？

非常感谢， Thothadri

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:30:20.987

看看[GStreamer GNonLin](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gnonlin/html/)插件。

# android - Phonegap 和 nexus s - 输入类型=文本不接受输入

> ID：12027230
> 
> 赞同：0
> 
> 时间：2012-08-19T14:23:22.667
> 
> 标签：android, jquery-mobile, cordova, nexus-s

我正在使用 Phonegap 和 jQuery mobile 构建应用程序...

在我的`index.html`页面上，我有一个`anchor`标签可以打开另一个页面`dialog`

`<a href="passcode.html" data-rel="dialog" data-transition="pop">`

我的`passcode.html`文件是这样的

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Page Title</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <link rel="stylesheet" href="styles/jquery.mobile-1.1.1.min.css" />
        <script src="js/jquery-1.7.1.min.js"></script>
        <script src="js/jquery.mobile-1.1.1.min.js"></script>

    </head>

    <body> 
        <div idata-role="dialog">

            <div data-role="header" data-theme="d">
                <h1>Enter Passcode</h1>
            </div>

            <div data-role="content" data-theme="c">
                <input type="password"/>
                <br/>
                <input type="button" value ="Access Cards"/>
            </div>
        </div>
    </body>
</html> 
```

当我单击第一个时，会`anchor`弹出此对话框。现在的问题是一切正常`iPhone` `iPad` `Android Simulator` 但是当我点击`Nexus S`键盘上的文本输入时会弹出但是当我尝试键入时 inout 字段中没有显示任何内容。

显示光标，这意味着它的焦点。键盘也显示。但是输入字段没有被输入。

这是屏幕截图...有人遇到过类似的问题吗？

![在此处输入图像描述](../Images/130d9a168a5b818d5a27439d5d6a0e56.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:03:26.857

[这个问题的答案](https://stackoverflow.com/questions/11568239/cant-edit-input-type-text-or-textarea-with-cordova-1-9-0-and-android-jelly-be)表明，如果您使用的是 android 4.1，则需要将您的 phonegap 项目升级到 2.0。

# mysql - sql-从一个表中获取数据以在触发器中插入另一个表

> ID：12027232
> 
> 赞同：0
> 
> 时间：2012-08-19T14:23:30.670
> 
> 标签：mysql, sql

我有一个触发器，我需要在插入轨道之后将轨道中的 ID 插入到事件表中。我只需要从曲目中选择ID，仅此而已。轨道表中的 ID 具有指向另一个名为 members 的表中的 ID 的外键。我怀疑这很重要，但以防万一。我不应该想象您需要有关表格的任何信息，而只是询问您是否需要。

这是我的触发器

```
 delimiter $$

   CREATE

   TRIGGER tracks_event AFTER INSERT
   ON tracks FOR EACH ROW 

     BEGIN

        INSERT into events(ID, action)
        VALUES (?, has uploaded a track.);

    END$$

delimiter ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:13:05.473

如果您想要插入曲目行中的 ID，则可以使用`NEW.ID`. 这将为您提供已插入行的 ID 列。

有关更多触发器示例和一些提示，MySQL 参考手册有帮助（以及作为语法等的很好参考）： [http ://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html](http://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html)

# mysql - 使用 2 个字段的组合更新表而不使用主键

> ID：12027235
> 
> 赞同：0
> 
> 时间：2012-08-19T14:24:00.577
> 
> 标签：mysql, cakephp

我试图将此直接更新查询转换为蛋糕的更新方式。

```
$this->Test->query("UPDATE tests SET rating=3 WHERE goal_id=1 AND employee_id=28"); 
```

通常当我们更新时，我们设置 id 然后保存，对吗？

```
$this->id = 1;
$this->Test->save($data); 
```

但是这里我利用 (goal_id+employee_id) 的组合来识别行。那么我该如何更新呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:46:21.910

您可以使用`updateAll()`，您只是碰巧更新了 1 条记录，而不是方法名称所暗示的许多记录。

```
Model::updateAll(array $fields, array $conditions) 
```

因此，对于您的测试，您将使用：

```
$this->Test->updateAll(
    array('rating' => 3),
    array('goal_id' => 1, 'employee_id' => 28)
); 
```

# php - php，检查一个键是否存在，但可以是多个键

> ID：12027236
> 
> 赞同：1
> 
> 时间：2012-08-19T14:24:01.243
> 
> 标签：php, arrays

如何检查一个键是否存在于数组中，但它可以是多个键？我的意思是：

```
$a['b'] = 'Im exists!';
var_dump (isset($a['b'])); 
```

但我的情况很复杂：

```
$a['c'] = 'c';
$a['xxc'] = 'value';
$a[2][4] = 'more complex!';
$a['b']['d']['g'] = 4; 
```

此时， isset() 将不起作用，但 array_key_exists 都不存在。那么如何检查，如果我想知道 [2][4] 是否存在，或者 ['b']['d']['g'] 是否存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:28:48.883

这对你有用吗（多维数组的递归函数）？

```
function array_key_exists_r($needle, $haystack)
{
    $result = array_key_exists($needle, $haystack);
    if ($result) return $result;
    foreach ($haystack as $v) {
        if (is_array($v)) {
            $result = array_key_exists_r($needle, $v);
        }
        if ($result) return $result;
    }
    return $result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T15:11:18.267

这是一个有趣的问题，你去吧：

```
function key_exists_recursive($keys, $array)
{
    if(!is_array($keys) or !is_array($array))
    {
        return false;
    }

    if(count($keys) > 1)
    {
        return key_exists_recursive(array_slice($keys, 1), $array[$keys[0]]);
    }

    return isset($array[$keys[0]]);
} 
```

用法：`key_exists_recursive(array('c'), $a);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T02:14:58.763

isset() 实际上应该为此工作。尝试运行以下命令：

```
$a = array();
$a['b']['d']['g'] = 4;

if (isset($a['b']['d']['g']))
{
  print_r('b,d,g exists!');
}

if (!isset($a['1']['2']['3']))
{
  print_r('1,2,3 does not exist!');
} 
```

输出：

b,d,g 存在！1,2,3不存在！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-18T14:10:04.330

这是否回答了：

```
function array_keys_exist($searchForKeys = array(), $inArray) {
    $inArrayKeys = array_keys($inArray);
    return count(array_intersect($searchForKeys, $inArrayKeys)) == count($searchForKeys); 
}
```

# python - 从python中的df -h输出中选择特定列

> ID：12027237
> 
> 赞同：9
> 
> 时间：2012-08-19T14:24:06.720
> 
> 标签：python, parsing, unix

我正在尝试创建一个简单的脚本，它将从 unix`df - h`命令中选择特定的列。我可以使用 awk 来做到这一点，但我们如何在 python 中做到这一点？

这是`df -h`输出：

```
已使用的文件系统大小可用使用百分比已安装在
/dev/mapper/vg_base-lv_root 28G 4.8G 22G 19% /
tmpfs 814M 176K 814M 1% /dev/shm
/dev/sda1 485M 120M 340M 27% /boot

```

我想要类似的东西：

第 1 列：

```
文件系统
/dev/mapper/vg_base-lv_root           
tmpfs                 
/dev/sda1

```

第 2 栏：

```
尺寸
28G
814M
485M   

```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-19T15:06:17.390

您可以使用[`op.popen`](http://docs.python.org/library/os.html#os.popen)运行命令并检索其输出，然后[`splitlines`](http://docs.python.org/library/stdtypes.html#str.splitlines)拆分[`split`](http://docs.python.org/library/stdtypes.html#str.split)行和字段。如果列太长，则运行[`df -Ph`](http://pubs.opengroup.org/onlinepubs/009695399/utilities/df.html)而不是不拆分行。`df -h`

```
df_output_lines = [s.split() for s in os.popen("df -Ph").read().splitlines()] 
```

结果是行列表。要提取第一列，可以使用`[line[0] for line in df_output_lines]`（注意列从 0 开始编号）等等。您可能想要使用`df_output_lines[1:]`而不是`df_output_lines`剥离标题行。

如果您已经将输出`df -h`存储在某个文件中，则需要先加入这些行。

```
fixed_df_output = re.sub('\n\s+', ' ', raw_df_output.read())
df_output_lines = [s.split() for s in fixed_df_output.splitlines()] 
```

请注意，这假定文件系统名称和挂载点都不包含空格。如果他们这样做了（在某些 unix 变体上进行一些设置是可能的），则几乎不可能解析`df`, 甚至`df -P`. 您可以使用[`os.statvfs`](http://docs.python.org/library/os.html#os.statvfs)获取给定文件系统的信息（这是[C 函数](http://pubs.opengroup.org/onlinepubs/009695399/functions/statvfs.html)的Python 接口，它在`df`内部为每个文件系统调用），但没有可移植的方法来枚举文件系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T15:11:25.120

这是完整的示例：

```
import subprocess
import re

p = subprocess.Popen("df -h", stdout=subprocess.PIPE, shell=True)
dfdata, _ = p.communicate()

dfdata = dfdata.decode().replace("Mounted on", "Mounted_on")

columns = [list() for i in range(10)]
for line in dfdata.split("\n"):
    line = re.sub(" +", " ", line)
    for i,l in enumerate(line.split(" ")):
        columns[i].append(l)

print(columns[0]) 
```

它假设挂载点不包含空格。

这是不硬核列数的更完整（和复杂的解决方案）：

```
import subprocess
import re

def yield_lines(data):
    for line in data.split("\n"):
        yield line

def line_to_list(line):
    return re.sub(" +", " ", line).split()

p = subprocess.Popen("df -h", stdout=subprocess.PIPE, shell=True)
dfdata, _ = p.communicate()

dfdata = dfdata.decode().replace("Mounted on", "Mounted_on")

lines = yield_lines(dfdata)

headers = next(lines, line_to_list)

columns = [list() for i in range(len(headers))]
for i,h in enumerate(headers):
    columns[i].append(h)

for line in lines:
    for i,l in enumerate(line_to_list(line)):
        columns[i].append(l)

print(columns[0]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T18:28:35.093

不是问题的答案，但我试图解决问题。:)

```
from os import statvfs

with open("/proc/mounts", "r") as mounts:
    split_mounts = [s.split() for s in mounts.read().splitlines()]

    print "{0:24} {1:24} {2:16} {3:16} {4:15} {5:13}".format(
            "FS", "Mountpoint", "Blocks", "Blocks Free", "Size", "Free")
    for p in split_mounts:
        stat = statvfs(p[1])
        block_size = stat.f_bsize
        blocks_total = stat.f_blocks
        blocks_free = stat.f_bavail

        size_mb = float(blocks_total * block_size) / 1024 / 1024
        free_mb = float(blocks_free * block_size) / 1024 / 1024

        print "{0:24} {1:24} {2:16} {3:16} {4:10.2f}MiB {5:10.2f}MiB".format(
                p[0], p[1], blocks_total, blocks_free, size_mb, free_mb) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T15:13:38.160

不使用 os.popen，因为它已被弃用（http://docs.python.org/library/os#os.popen）。

我已将 df -h 的输出放在一个文件中：test.txt 并从该文件中读取。但是，您也可以使用 subprocess 阅读。假设您能够阅读 df -h 输出的每一行，以下代码将有所帮助：-

```
f = open('test.txt')

lines = (line.strip() for line in f.readlines())
f.close()    
splittedLines = (line.split() for line in lines)
listOfColumnData = zip(*splittedLines)
for eachColumn in listOfColumnData:
    print eachColumn 
```

eachColumn 将显示您想要的整个列作为列表。你可以迭代它。如果你需要，我可以给出从 df -h 读取输出的代码，这样你就可以删除对 test.txt 的依赖，但是，如果你去 subprocess 文档，你可以很容易地找到如何做到这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-11T01:32:03.297

我有一个安装点，里面有一个空格。这抛弃了大多数例子。这从@ZarrHai 的[示例](https://stackoverflow.com/a/12027562/2444609)中借鉴了很多，但将结果放在`dict`

```
#!/usr/bin/python
import subprocess
import re
from pprint import pprint

DF_OPTIONS = "-laTh" # remove h if you want bytes.

def yield_lines(data):
    for line in data.split("\n"):
        yield line

def line_to_list(line):
    pattern = re.compile(r"([\w\/\s\-\_]+)\s+(\w+)\s+([\d\.]+?[GKM]|\d+)"
                          "\s+([\d\.]+[GKM]|\d+)\s+([\d\.]+[GKM]|\d+)\s+"
                          "(\d+%)\s+(.*)")
    matches = pattern.search(line)
    if matches:
        return matches.groups()
    _line = re.sub(r" +", " ", line).split()
    return _line

p = subprocess.Popen(["df", DF_OPTIONS], stdout=subprocess.PIPE)
dfdata, _ = p.communicate()

dfdata = dfdata.replace("Mounted on", "Mounted_on")

lines = yield_lines(dfdata)

headers = line_to_list(lines.next())

columns = [list() for i in range(len(headers))]
for i,h in enumerate(headers):
    columns[i].append(h)

grouped = {}
for li, line in enumerate(lines):
    if not line:
        continue
    grouped[li] = {}
    for i,l in enumerate(line_to_list(line)):
        columns[i].append(l)
        key = headers[i].lower().replace("%","")
        grouped[li][key] = l.strip()

pprint(grouped) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-11T12:33:24.083

我发现这是一种简单的方法......

```
df -h |  awk '{print $1}' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-19T15:18:50.490

这有效：

```
#!/usr/bin/python

import os, re

l=[]
p=os.popen('df -h')
for line in p.readlines():
    l.append(re.split(r'\s{2,}',line.strip()))

p.close()

for subl in l:
    print subl 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-10T12:41:07.003

在我可以访问的所有系统中，我注意到一件事：带有选项 -P 的 df 在空白对齐的列中打印。这意味着标题与其余项目的宽度相同（用空格填充）。基于[7erm 的答案](https://stackoverflow.com/a/29573032/2319591)，这使用标头的大小来确保它获得整个安装点，即使其中有空格也是如此。

这已经在 Ubuntu 14.04、16.04 和 FreeBSD 9.2 上进行了测试。

我已经解决了这两种不同的方法，第一种是对 OP 问题的直接回答，给出 6 列，每列以标题开头，然后在其下方按顺序排列每个挂载点：

```
import pprint
import subprocess
import re

DF_OPTIONS = "-PlaTh" # remove h if you want bytes.

# Get the entire output of df
dfdata = subprocess.getoutput("df " + DF_OPTIONS)

# Split it based on newlines
lines = dfdata.split("\n")

dfout = {}
headers = []

# Grab the headers, retain whitespace!
# df formats in such a way that each column header has trailing whitespace 
# so the header is equal to the maximum column width. We want to retain
# this for len()
headersplit = re.split(r'(\s+)', lines[0].replace("Mounted on","Mounted_on "))
headers = [i+j for i,j in zip(headersplit[0::2],headersplit[1::2])]

for hi,head in enumerate(headers):
  dfout[hi] = [head.strip()]

for line in lines[1:]:
  pos = 0
  dfstruct = {}
  for hi,head in enumerate(headers):
    # For the last item, grab the rest of the line
    if head == headers[-1]:
      item = line[pos:]
    else:
      # Get the current item
      item = line[pos:pos+len(head)]

    pos = pos + len(head)

    #Strip whitespace and add it to the list

    dfstruct[head.strip()] = item.strip()
    dfout[hi].append(item.strip())

pprint.pprint(dfout) 
```

第二个对我更有用，并且解决了我首先偶然发现这个问题的原因。这会将信息放入一个字典数组中：

```
import pprint
import subprocess
import re

DF_OPTIONS = "-PlaTh" # remove h if you want bytes.

# Get the entire output of df
dfdata = subprocess.getoutput("df " + DF_OPTIONS)

# Split it based on newlines
lines = dfdata.split("\n")

dfout = []
headers = []

# Grab the headers, retain whitespace!
# df formats in such a way that each column header has trailing whitespace 
# so the header is equal to the maximum column width. We want to retain
# this for len()
headersplit = re.split(r'(\s+)', lines[0].replace("Mounted on","Mounted_on "))
headers = [i+j for i,j in zip(headersplit[0::2],headersplit[1::2])]

for line in lines[1:]:
  pos = 0
  dfstruct = {}
  for head in headers:
    # For the last item, grab the rest of the line
    if head == headers[-1]:
      item = line[pos:]
    else:
      # Get the current item
      item = line[pos:pos+len(head)]

    pos = pos + len(head)
    #Strip whitespace for our own structure
    dfstruct[head.strip()] = item.strip()

  dfout.append(dfstruct)

pprint.pprint(dfout) 
```

# iphone - SInt32 AudioUnitSampleType 实际上保存了整个音频数据吗？

> ID：12027247
> 
> 赞同：1
> 
> 时间：2012-08-19T14:25:18.827
> 
> 标签：iphone, ios, ipad, audio, core-audio

SInt32 让我感到困惑，因为我认为音频数据样本是在数组中表示的。那么 SInt32 AudioUnitSampleType 是如何存储音频数据的呢？或者这基本上是一个包含许多 SInt32 值的数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:28:38.183

整个音频流存储为样本数组，是的。但是有不同的方法可以将这些样本实际存储在内存中——有符号整数、无符号整数、浮点数等等。这正是`AudioUnitSampleType`常量告诉您的内容 - 单个样本存储在哪种格式中。使用32 位宽 ( )`SInt32AudioUnitSampleType`的有符号 ( `S`) 整数 ( ) 来存储单个样本。但是，它并没有告诉您有关该音频流的任何其他信息。`Int``32`

# macos - 有没有办法让带有原生扩展（如“RMagick”）的 gem 的自制更新安全？

> ID：12027250
> 
> 赞同：1
> 
> 时间：2012-08-19T14:26:06.973
> 
> 标签：macos, imagemagick, bundler, rmagick, homebrew

有没有办法让带有本机扩展（如“RMagick”）的 gem 的 brew 更新安全？

Homebrew 对 ImageMagick 的最后一次更新使用“RMagick”破坏了我的捆绑包（虽然没有它也能正常工作）。这是它返回的内容：

```
9): Library not loaded: /usr/local/lib/libMagickCore.4.dylib (LoadError)
Referenced from: /Users/denis/code/questick/vendor/bundle/gems/rmagick-2.13.1/lib/RMagick2.bundle
Reason: image not found - /Users/denis/code/questick/vendor/bundle/gems/rmagick-2.13.1/lib/RMagick2.bundle 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:50:58.810

您可以在升级时保留旧版本的 ImageMagick，只是不要`brew cleanup imagemagick`。

# wpf - 图像源更改时播放情节提要

> ID：12027251
> 
> 赞同：2
> 
> 时间：2012-08-19T14:26:09.523
> 
> 标签：wpf, storyboard

属性绑定更改时如何开始情节提要？

我的图像源每 5 秒更改一次（在我的 ViewModel 中），我想在图像更改时播放故事板。

```
<Grid>
   <Image x:Name="image" Source="{Binding CurrentImage}"/>       
</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:26:46.117

您通常会为`Source`属性更改时触发的事件添加 EventTrigger。不幸的是，Image 控件没有定义这样的事件，因此您必须通过从 Image 派生来创建自己的事件：

```
public class MyImage : Image
{
    public static readonly RoutedEvent SourceChangedEvent = EventManager.RegisterRoutedEvent(
        "SourceChanged", RoutingStrategy.Direct, typeof(RoutedEventHandler), typeof(MyImage));

    static MyImage()
    {
        Image.SourceProperty.OverrideMetadata(typeof(MyImage), new FrameworkPropertyMetadata(SourcePropertyChanged));
    }

    public event RoutedEventHandler SourceChanged
    {
        add { AddHandler(SourceChangedEvent, value); }
        remove { RemoveHandler(SourceChangedEvent, value); }
    }

    private static void SourcePropertyChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        Image image = obj as Image;
        if (image != null)
        {
            image.RaiseEvent(new RoutedEventArgs(SourceChangedEvent));
        }
    }
} 
```

现在您可以`SourceChanged`在 EventTrigger 中使用该事件：

```
<local:MyImage Source="{Binding Image}">
    <local:MyImage.Triggers>
        <EventTrigger RoutedEvent="local:MyImage.SourceChanged">
            <BeginStoryboard>
                <Storyboard>
                    ...
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </local:MyImage.Triggers>
</local:MyImage> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T15:49:41.880

我认为您最好在 ViewModel 中添加一个事件，并在源更改时启动它。当然，在该事件上使用 EventTrigger 来执行您的 Storyboard。

# php - 通过 javascript/jquery 运行 php sql 查询以隐藏条目

> ID：12027254
> 
> 赞同：0
> 
> 时间：2012-08-19T14:26:15.607
> 
> 标签：php, javascript, jquery, mysql, ajax

在我的网站上，我试图在不刷新屏幕的情况下删除（隐藏）表中的 sql 条目。

目前，每个可见条目都显示在一个 id 为 schedule000 的 div 中，其中 000 是条目的 id 号。每个都有一个删除按钮：

```
<div id="btn_delete" class="schedule-delete" onclick="deleteEvent(schedule'.$row['id'].');"></div> 
```

而函数是

```
function deleteEvent(id) {
    var delurl = "..schedule/index.php?d="+String(id.id.substring(8));
    $.get(delurl);
    $(id).hide('slow');
    return false;
} 
```

我在搜索互联网后发现了 get 功能，但我似乎无法让它工作。我正在寻找建议或新的解决方案。

谢谢

作为旁注：这是它正在调用的页面的一部分

```
if (isset($_GET['d'])) {
    $id = $_GET['d'];
    $query = "UPDATE schedule SET visible=0 WHERE id='$id'";
    if (!(mysql_query($query) or die(mysql_error()))) {
        echo 'failed to delete';
    } 
```

编辑：使用斯文的方法，我现在有：

```
function del_item() {
    try {
        var item_id = $(this).attr('item_id'); 
        var item = $(this).parent().parent(); //parent().paren... until you reach the element that you want to delete 
        $.ajax({
          type: 'POST',
          url: "../schedule/index.php",
          data: { id: item_id},
          success: function() {
              //fade away and remove it from the dom
              $(element).fadeOut(300, function() { $(this).remove(); });
          },
          error: function() {
              alert('failed to delete');
          }
        });
    } catch (err) {
        alert(err.message);
    }
} 
```

连同文件准备功能和

```
if (isset($_POST['action'])) {
    if ($_POST['action'] == 'd' && isset($_POST['id'])) {
        $id = $_POST['id'];
        $query = "UPDATE schedule SET visible=0 WHERE id='$id'";
        if (!(mysql_query($query) or die(mysql_error()))) {
            echo 'failed to delete';
        }
        die("J! :)");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:46:31.517

我会这样做：

将项目 ID 添加到删除按钮，如下所示：

```
<div id="btn_delete" class="schedule-delete" item_id="' . $row['id'] . '"></div> 
```

该页面的javascript：

```
function del_item() {
    var item_id = $(this).attr('item_id'); 
    var item = $(this).parent(); //parent().paren... until you reach the element that you want to delete 

    $.ajax({
      type: 'POST',
      url: "url_to_your_remove_script.php",
      data: { id: item_id},
      success: function() {
          //fade away and remove it from the dom
          $(item).fadeOut(300, function() { $(this).remove(); });
      },
      error: your_error_func
    });
}

​$(document).ready(function() {
    $('.schedule-delete').click(del_item);
});​ 
```

对于 php 删除页面 ( `url_to_your_remove_script.php`)：

```
<?php
    if(isset($_POST['id'])) {
        //your update query here

        die("J! :)");
    }

    //no id, return error
    header('HTTP/1.1 500 Internal Server Error :(');
?> 
```

您可以在此处找到有关 $.ajax 的更多信息：[单击](http://api.jquery.com/jQuery.post/)。

希望这可以帮助。

PS：没有测试代码，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:41:02.193

您正在将要删除的 id 作为字符串发送。查询变为“WHERE id='001'，但应该是“WHERE id=1”。因此，在将 javascript 中的 id 解析为带有 'parseInt' 的整数，然后再将其添加到 delurl 变量中。

```
 var id = parseInt(id.id.substring(8));
var delurl = "../schedule/index.php?d="+id;
...etc 
```

从查询中删除“”

# .net - 异常处理任务并行

> ID：12027256
> 
> 赞同：0
> 
> 时间：2012-08-19T14:26:30.177
> 
> 标签：.net, task-parallel-library

我不会得到聚合异常没有被执行

```
namespace ExceptionTest
{
    class Program
    {
        static void Main(string[] args)
        {
            Task<int> t1 = new Task<int>(() => Add());
            try
            {
                t1.Start();
            }
            catch (AggregateException ag)
            {
                Console.WriteLine(ag.Message);
            }
            Console.ReadLine();
        }
        static int Add()
        {
            try
            {
                throw new ArgumentException("Exception");
            }
            catch(Exception e) { throw e; }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:55:25.750

[`Start()`](http://msdn.microsoft.com/en-us/library/dd270682)永远不会陷入这样的境地。它只启动`Task`, 并立即返回；它不会等到`Task`完成。

如果你想捕捉异常，你应该使用[`Wait()`](http://msdn.microsoft.com/en-us/library/dd235635)：

```
Task<int> t1 = Task.Factory.StartNew(() => Add());
try
{
    t1.Wait();
}
catch (AggregateException ag)
{
    Console.WriteLine(ag.Message);
} 
```

如果您使用`Wait()`，则可以使用`Task.Factory.StartNew()`（或`Task.Run()`在 .Net 4.5 上）而不是使用 .Net 的构造函数`Start()`。而且你也不再需要`Console.ReadLine()`了。（以上代码都反映了这两个变化。）

# templates - Joomla 可以在模板中获取没有站点名称的页面标题吗？

> ID：12027258
> 
> 赞同：1
> 
> 时间：2012-08-19T14:26:52.143
> 
> 标签：templates, joomla

需要打印没有站点名称的页面标题，可以吗？

我尝试使用它：

`$doc = JFactory::getDocument(); $doc->getTitle()`

但是用站点名称打印...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:48:58.367

几天前我用这个作为测试。它对我有用并打印了页面名称

```
$doc =& JFactory::getDocument();
$mytitle = $doc->getTitle();
echo $mytitle; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:08:51.997

为什么不直接删除变量中的站点名称？（基于Lodder一的PHP代码）：

```
$doc =& JFactory::getDocument();
$mytitle = str_replace("My Site Name", "", $doc->getTitle());
echo $mytitle; 
```

# cakephp - HasOne 和 HasAndBelongsToMany 不保存

> ID：12027260
> 
> 赞同：1
> 
> 时间：2012-08-19T14:27:17.800
> 
> 标签：cakephp, has-and-belongs-to-many, save, has-one

我将从我的表格的结构开始。我有一个使用 hasOne 关系与 Tutors 表链接的 Contacts 表。Tutors 表使用 HABTM 关系与 Disciplines 表链接，其中 Disciplines_Tutors 作为连接表。现在，我将 Contacts 和 Tutors 属性都放在一个统一的联系表单中。Disciplines 表属性也是如此。发生的情况是我能够将联系人和导师保存到各自的表中，但我无法保存到 Disciplines_Tutors 连接表中。

下面是表格结构，便于理解：

![表结构](../Images/b73dfbf1453061fd2c804533e3fec477.png)

如果从 Tutors 添加表单保存，则不会出现此问题。它完美保存。

Contacts 表有：id，自己的属性
Tutors 表有：id，自己的属性，contact_id
学科表有：id，学科
Disciplines_Tutors 表有：id，学科id，tutor_id

在统一的联系表中，我可以查看可用的学科并进行选择。但是保存时，它不会保存到连接表中。

导师型号：

```
public $hasAndBelongsToMany = array(
    'Discipline' => array(
        'className' => 'Discipline',
        'joinTable' => 'disciplines_tutors',
        'foreignKey' => 'tutor_id',
        'associationForeignKey' => 'discipline_id',
        'unique' => 'keepExisting',
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    )
); 
```

学科模型：

```
public $hasAndBelongsToMany = array(
    'Tutor' => array(
        'className' => 'Tutor',
        'joinTable' => 'disciplines_tutors',
        'foreignKey' => 'discipline_id',
        'associationForeignKey' => 'tutor_id',
        'unique' => 'keepExisting',
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    )
); 
```

学科导师模型：

```
public $belongsTo = array(
    'Tutor' => array(
        'className' => 'Tutor',
        'foreignKey' => 'tutor_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
    'Discipline' => array(
        'className' => 'Discipline',
        'foreignKey' => 'discipline_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
); 
```

ContactsController 有：

```
 $disciplines = $this->Contact->Tutor->Discipline->find('list'); 
```

在公共功能添加部分。因此，使选择列表的检索成为可能。

Tutors、Disciplines、DisciplinesTutors 控制器都在使用 saveAll 方法。

在统一联系人表单的添加表单中。它有：

```
echo $this->Form->input('Tutor.Discipline',array('type'=>'select','multiple'=>true)); 
```

这允许我检索可供选择的学科列表。

我不确定还需要什么其他信息。随意提问，我会将它们添加到这个问题中。

另外，请对我放轻松，因为我对 CakePHP 还很陌生。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T04:21:00.407

您应该使用`'deep' => true`带有 saveAll() 方法的选项来保存多个关联记录。您可以尝试以下代码来保存多个关联数据：

```
 $this->Contact->saveAll($this->data, array('deep' => true)); 
```

您也可以使用[saveAssociated()](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array)方法进行尝试。

只有当您收到与通过`find()`方法选择任何联系人时获得结果相同的数组时，它才会起作用。

# maven - Maven命令返回前一天的快照

> ID：12027262
> 
> 赞同：1
> 
> 时间：2012-08-19T14:27:26.533
> 
> 标签：maven, maven-3

我在我的项目中使用以下 spring neo4j 快照依赖项，

```
<dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-neo4j</artifactId>
            <version>2.1.0.BUILD-SNAPSHOT</version>
        </dependency> 
```

今天早上，在 mvn install 之后，我从存储库中获得了最新的快照。但是，我想使用以前的快照而不是最新的快照。

是否有任何 mvn 命令来执行此操作？我发现了离线工作或获取最新命令的命令，但没有找到返回特定快照的命令。

请让我知道是否有任何这样的命令。

谢谢， 阿卜杜勒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:45:56.353

假设您的 Maven 设置指向[http://repo.springsource.org](http://repo.springsource.org)，您始终可以搜索特定版本，例如[spring-data-neo4j-2.1](http://repo.springsource.org/webapp/search/artifact?13&q=spring-data-neo4j-2.1)。

单击 2.1.0.RC2 之类的版本后，您可以查看**Show In Tree**，然后查看 maven pom 设置示例：

```
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-neo4j</artifactId>
    <version>2.1.0.RC2</version>
</dependency> 
```

或者您可以翻页以查找您正在寻找的特定快照版本，例如：

```
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-neo4j</artifactId>
    <version>2.1.0.BUILD-20120817.105144-37</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T14:48:34.990

检查这篇[文章](https://stackoverflow.com/a/2553485/1297972)：

```
...
<dependency>
<groupId>groupid</groupId>
<artifactId>artifact-id</artifactId>
<version>1.0.0-20090610.041042-5</version>
</dependency>
... 
```

# visual-studio-2010 - 未找到导入的项目“c:\program > files\msbuild\microsoft\visualstudio\v10.0\windows azure > tools\1.6\microsoft.windowsAzure.targets”

> ID：12027263
> 
> 赞同：1
> 
> 时间：2012-08-19T14:27:42.793
> 
> 标签：visual-studio-2010, azure

当我尝试在 Visual Studio 2010 中加载我的项目时出现此错误。我已经安装`Windows Azure SDK`并`Visual Studio Cloud Service`在我的计算机中，但它仍然无法正常工作。

> 未找到导入的项目“c:\program files\msbuild\microsoft\visualstudio\v10.0\windows azure tools\1.6\microsoft.windowsAzure.targets”。确认声明中的路径正确，并且该文件存在于磁盘上。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:42:00.533

您还需要安装[适用于 Visual Studio 的 Windows Azure 工具](http://download.microsoft.com/download/D/F/4/DF442AB0-FAAE-44FF-A04E-F41E72FE6B6F/WindowsAzureTools.VS100.exe)。请注意，您仍在使用 1.6。1.7 版是今天的最新版本，因此如果您正在开始一个新项目，您可能希望查看该版本以访问[新的 Windows Azure 功能](http://michaelcollier.wordpress.com/2012/06/15/whats-new-for-the-windows-azure-developer-lots-2/)。

# common-lisp - PURI:URI 如何获取表示的实际字符串

> ID：12027264
> 
> 赞同：4
> 
> 时间：2012-08-19T14:27:44.037
> 
> 标签：common-lisp, drakma

[Drakma](http://weitz.de/drakma/)返回一个`PURI:URI`对象作为第四个返回值。但我想提取实际的字符串而不是弄乱对象。

`puri:uri-string`直接访问相应插槽的访问器的名称是什么，在包中不公开，并且[文档](http://puri.b9.com/documentation.html)不[存在](http://opensource.franz.com/uri/uri-dist/uri.htm)。

任何有使用该软件包的经验的人？

目前我正在`(FORMAT nil "~a" URI)`用作快速修复，但这不是作者的意图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T17:54:37.183

使用`puri:render-uri`. 请注意，它需要一个流来将 uri 渲染为第二个参数。

# eclipse - MAC OS X 上的 M2Eclipse 问题

> ID：12027265
> 
> 赞同：1
> 
> 时间：2012-08-19T14:27:48.257
> 
> 标签：eclipse, macos, eclipse-plugin, m2eclipse, m2e

我尝试在带有 Eclipse 的 MAC OS X（Mountain Lion）上使用 m2eclipse...我在 Eclipse JUNO 中安装了插件并重新启动，但我看不到 Maven 集成...

*   无法创建 Maven 项目（未在项目类型中列出）

*   无法在我作为“常规项目”导入的 Maven 项目上运行 Maven clean

我在 Windows7 上对这个插件没有问题，在 MAC OS X 上有问题吗？

问候，

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T10:17:02.750

确保安装正确的插件。第一个（也是大多数人似乎安装的）是 m2eclipse for WTP 插件，*它不*安装 m2eclipse。您想要的是“Eclipse 的 Maven 集成”。

一旦完成并工作，您需要右键单击您的项目并选择“配置 - >配置为 Maven 项目”

# c# - C#如何在子类中使用父类属性

> ID：12027266
> 
> 赞同：-1
> 
> 时间：2012-08-19T14:27:54.553
> 
> 标签：c#

我有以下类，其父类 Shapes 具有属性 Radius，我正在将此属性访问到其子类（HeaxGon），但它在子类中给我错误（预期获取或设置访问器）

请指教。

```
class Shapes
{
    int _radius;

    public int Radius
    {
        get { return _radius; }
        set { _radius = value; }
    }
}

class HeaxGon:Shapes
{
    int points;
    public void SetRadius
    {
        **Radius=20;**
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T14:31:38.590

我猜你正在尝试创建一个名为 的函数`SetRadius`，在这种情况下，它应该是这样的：

```
public void SetRadius(int radius)
{
    this.Radius = radius;
} 
```

或者，如果您真的想`20`在所有情况下都将其设置为：

```
public void SetRadius()
{
    this.Radius = 20;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T14:34:07.757

你写的不好，应该是这样的：

```
class Shapes
{
    int _radius;

    public int Radius
    {
        get { return _radius; }
        set { _radius = value; }
    }
}

class HeaxGon:Shapes
{
    int points;

    public void SetRadius()
    {
        Radius=20;
    }
} 
```

没有必要像其他人建议的那样称呼“这个”。

或者简单地使用您已经在基类中公开的属性

```
HeaxGon hg = new HeaxGon();
hg.Radius = 20; 
```

这将调用您在基类（形状）中指定的设置器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T14:30:59.457

进行保护，`_radius`然后简单地调用`this.Radius`子类。所以：

```
public class Shape
{
    protected int _radius;

    public int Radius
    {
        get { return _radius; }
        set { _radius = value; }
    }
}

public class Hexagon : Shape
{
    int _points;

    public void SetRadius(int radius)
    {
        this.Radius = radius;
    }
} 
```

# java - 为什么 Android 解析 XML 不正确？

> ID：12027268
> 
> 赞同：0
> 
> 时间：2012-08-19T14:28:20.667
> 
> 标签：java, android, xml, rss

我正在为我的一个客户编写一个 Android 应用程序，它将显示他的 RSS 提要。他有 2 个不同的提要。其中之一与我使用示例编写的代码完美配合。当我用他的第二个提要替换 URL 时，我到处都得到随机换行符（特别是在左括号 < 之后和右括号 < 之前）。

这是工作提要的链接 - [http://prgk.ca/wD](http://prgk.ca/wD)

这是似乎无法使用相同代码正确解析的 rss 提要 - [http://prgk.ca/ps](http://prgk.ca/ps)

* * *

这是来自 logcat 的示例。您可以看到每个 < 和 > 由于某种原因它也会换行...

```
08-19 09:43:46.444: I/RSSReader(6045): Get the Android App to  know when your advisor is available!
08-19 09:43:46.444: I/RSSReader(6045): http://www.keen.com/CommunityServer/UserBlogPosts/r00tman/Get-the-Android-App-to--know-when-your-
08-19 09:43:46.452: I/RSSReader(6045): advisor-is-available/624194.aspx
08-19 09:43:46.452: I/RSSReader(6045): Thu, 16 Aug 2012 19:39:00 GMT
08-19 09:43:46.452: I/RSSReader(6045): 8ca05964-da1c-4176-9dbc-9d0bc609bb83:624194
08-19 09:43:46.452: I/RSSReader(6045): r00tman
08-19 09:43:46.452: I/RSSReader(6045): 0
08-19 09:43:46.452: I/RSSReader(6045): http://www.keen.com/CommunityServer/blogs/642011/comments/624194.aspx
08-19 09:43:46.452: I/RSSReader(6045): http://www.keen.com/CommunityServer/blogs/642011/commentrss.aspx?PostID=624194
08-19 09:43:46.452: I/RSSReader(6045): http://www.keen.com/CommunityServer/blogs/rsscomments/624194.aspx
08-19 09:43:46.452: I/RSSReader(6045): <
08-19 09:43:46.452: I/RSSReader(6045): a href="http://majesticvision.com/downloads/android/love-tarot.apk"
08-19 09:43:46.452: I/RSSReader(6045): >
08-19 09:43:46.452: I/RSSReader(6045): <
08-19 09:43:46.452: I/RSSReader(6045): img src="http://www.majesticvision.com/keen/2012-08-16_App-Shot.png" height="75" width="385" /
08-19 09:43:46.460: I/RSSReader(6045): >
08-19 09:43:46.460: I/RSSReader(6045): <
08-19 09:43:46.460: I/RSSReader(6045): /a
08-19 09:43:46.460: I/RSSReader(6045): >
08-19 09:43:46.460: I/RSSReader(6045): <
08-19 09:43:46.460: I/RSSReader(6045): br /
08-19 09:43:46.460: I/RSSReader(6045): >
08-19 09:43:46.460: I/RSSReader(6045): <
08-19 09:43:46.460: I/RSSReader(6045): br /
08-19 09:43:46.460: I/RSSReader(6045): > 
```

* * *

这是显示问题的屏幕截图。在这个特殊的例子中，来自 <link></link> 标签的 URL 被拆分在一个奇怪的地方，所以部分 URL 丢失了，而我从 <description></description> 标签得到的只是“< "什么时候应该有整篇文章

![手机截图](../Images/ee69bb2126ec41d8defb097e47340bbe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T04:14:03.830

我最终解决了这个问题。在我的 RSSHandler 类中，我注释掉了重置状态的部分

```
public void characters(char ch[], int start, int length) {
    String theString = new String(ch, start, length);

    switch (currentstate) {
    case RSS_TITLE:
        _item.setTitle(theString);
        // currentstate = 0;
        break;
    case RSS_LINK:
        _item.setLink(theString);
        // currentstate = 0;
        break;
    case RSS_DESCRIPTION:
        _item.setDescription(theString);
        // currentstate = 0;
        break;
    case RSS_CATEGORY:
        _item.setCategory(theString);
        // currentstate = 0;
        break;
    case RSS_PUBDATE:
        _item.setPubDate(theString);
        // currentstate = 0;
        break;
    default:
        return;
    } 
```

然后在我的 RSSitem 类中，我将字符串添加到自身而不是每次都重置它

```
void setDescription(String description) {
    _description = _description + Html.fromHtml(description).toString();
} 
```

它可能不是最好的解决方案，但它最终对我来说完美无缺！

# f# - 将 F# 3.0 中的 Amazon WSDL Web 服务与类型提供程序一起使用

> ID：12027270
> 
> 赞同：2
> 
> 时间：2012-08-19T14:28:28.687
> 
> 标签：f#, wsdl, type-providers

我使用内置的 WSDL 类型提供程序编写了以下 F# 3.0 程序，以自动生成 Amazon WSDL 的 F# 版本：

```
open Microsoft.FSharp.Data.TypeProviders

type azn = WsdlService<"http://soap.amazon.com/schemas2/AmazonWebServices.wsdl">

let authorRequest author =
    azn.ServiceTypes.AuthorRequest(author=author)

do
    let client = azn.GetAmazonSearchPort()
    let response = client.AuthorSearchRequest(authorRequest "Harrop")
    printfn "%s" response.TotalResults 
```

当我运行它时，我会在运行时从 Microsoft 工具堆栈中得到一个令人兴奋的内部异常：

```
Unhandled Exception: System.ServiceModel.ProtocolException: The remote server returned an unexpected response: (410) Gone. ---> System.Net.WebException: The remote server returned an error: (410) Gone.
   at System.Net.HttpWebRequest.GetResponse()
   at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   --- End of inner exception stack trace ---

Server stack trace:
   at System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory`1 factory, WebException responseException, ChannelBinding channelBinding)
   at System.ServiceModel.Channels.HttpChannelFactory`1.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]:
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Program.azn.ServiceTypes.AmazonSearchPort.AuthorSearchRequest(AuthorRequest AuthorSearchRequest1)
   at Program.azn.ServiceTypes.AmazonSearchPortClient.AuthorSearchRequest(AuthorRequest AuthorSearchRequest1)
   at Program.azn.ServiceTypes.SimpleDataContextTypes.AmazonSearchPortClient.AuthorSearchRequest(AuthorRequest )
   at <StartupCode$ConsoleApplication2>.$Program.main@() in c:\users\jon\documents\visual studio 11\Projects\ConsoleApplication2\ConsoleApplication2\Program.fs:line 5 
```

从那以后，我发现这里有一个更新的模式：

```
type azn = WsdlService<"http://soap.amazon.com/schemas2/AmazonWebServices.wsdl"> 
```

但这并不能解决我令人兴奋的错误消息。有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:03:46.877

我不知道端到端解决方案，但可能可以帮助您更进一步

您现在使用的 URL 对应于 API 的陈旧版本，我相信最近的一个是[http://webservices.amazon.com/AWSECommerceService/AWSECommerceService.wsdl](http://webservices.amazon.com/AWSECommerceService/AWSECommerceService.wsdl)

如果您只是将此 url 传递给 WsdlService 类型提供程序，那么在设计时一切都会很好，但在运行时会出现奇怪*的错误，例如“序列化消息 ItemSearchRequest1 正文时出错：'无法生成临时类（结果 = 1 ). 错误 CS0030：无法将类型“Program.Amazon.ServiceTypes.ImageSet[]”转换为“Program.Amazon.ServiceTypes.ImageSet”；错误 CS0029：无法将类型“Program.Amazon.ServiceTypes.ImageSet”隐式转换为“Program.Amazon.ServiceTypes.ImageSet”。 Amazon.ServiceTypes.ImageSet[]'* "。

这似乎是已知错误（[此处](https://forums.aws.amazon.com/thread.jspa?threadID=72429)），要修复它，您应该设置 ForceUpdate=false, 和 LocalSchemaFile='your local schema file'，然后在本地模式文件中修复 ImagesSet 的定义

```
<xs:element minOccurs="0" maxOccurs="unbounded" name="ImageSets"> 
```

至

```
<xs:element minOccurs="0" maxOccurs="1" name="ImageSets">

type Amazon = Microsoft.FSharp.Data.TypeProviders.WsdlService<
                @"http://webservices.amazon.com/AWSECommerceService/AWSECommerceService.wsdl", 
                ForceUpdate=false, 
                LocalSchemaFile="amazon.wsdlschema"
                >

let searchAuthor author = 
    Amazon.ServiceTypes.ItemSearch(Request = [| Amazon.ServiceTypes.ItemSearchRequest(Author = author) |])

[<EntryPoint>]
let main argv = 
    let amazon = Amazon.GetAWSECommerceServicePort()
    let result = amazon.ItemSearch (searchAuthor "Harrop")
    0 
```

然而，这仍然不是故事的结局——这段代码抛出 MessageSecurityException：“HTTP 请求被客户端身份验证方案‘匿名’禁止”。它看起来也是已知问题（即[此处](https://stackoverflow.com/questions/3278158/amazon-api-authentication-error)），但要检查解决方案，您需要 Amazon 用户 ID 和密钥（我没有）。

# python - 在带有嵌套字典的 Python 中，我应该检查类型吗？我还可以使用什么其他方法？

> ID：12027271
> 
> 赞同：4
> 
> 时间：2012-08-19T14:28:34.057
> 
> 标签：python, python-2.7

免责声明：*您好所有 Python 大师和粉丝。我要感谢大家的关心支持和宝贵的建议，这对我帮助很大。我是一名 Python 新手，正在努力学习和进步，同时牢记最佳实践的重要性。这是一个问题，我正在寻找一种快速的方法来避免类型检查，就好像我在这里学到了一件事，这不是一件好事，必须有另一种方法来做。*

我正在构建一个数据对象来表示站点地图。我希望它在内存中，这样我就可以在查询数据库之前快速映射 URL。

每个节点必须有 2 个元素。一个（网站部分的）**名称和一个****ID**（它在 DB 中的 ID）（通常为 4 到 8 位数字，但这里仅用一位数字表示）。

如果此节点有子节点（在页面上），则它具有名称、ID***和另一个代表子节点的字典***。

出于性能、易于迭代和记忆的原因，我决定使用以下内容： *我过去尝试只列出 [name, id, [name, id, ..]]，字典，我认为这不是这样的不好的方式。*

```
sitemap = {'section_one': 0,
           'section_two': [1, {'c_sect_2_1': 10,
                         'c_sect_2_2': [11, {'c_sect_2_2_1': 110,
                                           'c_sect_2_2_2': 111,
                                           'c_sect_2_2_3': 112}],
                          'c_sect_2_3': 12,
                          'c_sect_2_4': 13}],
           'section_three': 2,
           'section_four': 3,
           'section_five': 4} 
```

*我选择列表是因为我可能需要修改它们（因此没有元组）* 我正在使用字典（可散列）并且我可以轻松检查它们是否包含一个部分。

使用这个数据集和下面的函数，我映射一个 URL（例如 /section_two/c_sect_2_2/c_sect_2_2_3）并查看它是否存在以从数据库中获取数据。我的功能：

```
def map_url(url): #url here is a list e.g. ['section_two', 'c_sect_2_2', 'c_sect_2_2_3']
    sm = sitemap
    for e in url:
        if e in sm:
            if isinstance(sm[e], int):
                return sm[e] #e = where it stops matching due to no children
            sm = sm[e][1] #if not INT it's a list. list[1] has another dict to go-through
    return False #the URL could not be matched-mapped 
```

我的问题是：

1.  而不是检查字典中项目的值是否是整数来查看它是否有孩子，我应该怎么做？我能做些什么？
2.  什么可能是整个事情的替代品？（数据结构的构建方式和/或通过它的迭代）

*我需要这种 url 映射方式，因为我的网站可以有很多嵌套的部分，我不想多次查询数据库来查看它是否存在。*

最后，感谢大家宝贵的时间和建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T14:57:19.180

> 而不是检查字典中项目的值是否是整数来查看它是否有孩子，我应该怎么做？我能做些什么？

问题似乎是您对有孩子的部分和没有孩子的部分使用了不同的表示形式。没有孩子的部分实际上应该只是一个包含空子列表的部分：

```
sitemap = {'section_one': [0, {}],
           'section_two': [1, {'c_sect_2_1': [10, {}],
                               'c_sect_2_2': [11, {'c_sect_2_2_1': [110, {}],
                                                   'c_sect_2_2_2': [111, {}],
                                                   'c_sect_2_2_3': [112, {}]}],
                               'c_sect_2_3': [12, {}],
                               'c_sect_2_4': [13, {}]}],
           'section_three': [2, {}],
           'section_four': [3, {}],
           'section_five': [4, {}]} 
```

现在你的代码应该变得更简单了。

> 什么可能是整个事情的替代品？（数据结构的构建方式和/或通过它的迭代）

您可以在程序开始时将站点地图转换为平面字典，使其类似于

```
flat_sitemap = { 
    'section_one': 0,
    'section_two': 1,
    'section_two/c_sect_2_1': 10,
       # ...
    'section_two/c_sect_2_2/c_sect_2_2_1': 110
       # ...
    } 
```

这样，您的查询将以`O(1)`更高的空间使用为代价在预期的时间内工作。

至于以不同的方式处理原始结构，您可以使用递归。我经常发现以递归方式在树状结构上制定算法更容易，但这有点取决于你的思维方式。这是一个示例（我假设其格式`sitemap`显示在我的第一个示例中）：

```
def map_url(url, sm=[None, sitemap]):
    if not url: return sm[0]
    if url[0] not in sm[1]: return False
    return map_url(url[1:], sm[1][url[0]])

print map_url(['section_two', 'c_sect_2_2', 'c_sect_2_2_3']) # => 112
print map_url(['section_two', 'c_sect_2_2'])                 # => 10
print map_url(['section_two', 'notexisting'])                # => False
print map_url([])                                            # => None 
```

如您所见，这使得传递空 URL 的特殊情况变得明确。您绝对应该考虑在这种特殊情况下应该发生什么。

你甚至可以离开函数的第二行。在这种情况下，`KeyError`如果无法匹配 URL，则会抛出 a（这似乎也很合理）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T14:57:19.773

更一致的方法是始终使用 id 和 dict 的组合，但如果没有孩子，则使用空 dict。

```
sitemap = {'section_one': [0, {}],
           'section_two': [1, {'c_sect_2_1': [10,{}],
                         'c_sect_2_2': [11, {'c_sect_2_2_1': [110,{}],
                                           'c_sect_2_2_2': [111,{}],
                                           'c_sect_2_2_3': [112,{}]}],
                          'c_sect_2_3': [12,{}],
                          'c_sect_2_4': [0,{}]}],
           'section_three':[2,{}],
           'section_four': [3,{}],
           'section_five': [4,{}]} 
```

这样你就可以随时检查剩余的 url 部分是否在子字典中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T14:52:57.177

对于您的第一个问题：pythonic 方法不是检查类型，而是尝试捕获异常：

```
sm = sitemap
for e in url:
    if e in sm:
        try:
            sm = sm[e][1]
        except TypeError:
            return sm[e]
return False 
```

在这里，如果`sm[e]`是一个整数，它不能被索引并`TypeError`引发异常：然后您可以返回您的项目。如果`sm[e]`可以被索引，则更新您的`sm`. 如果索引失败（例如，因为只有一个元素），则会引发另一个您也可以捕获的异常。

# ruby-on-rails - 奇怪的失踪'dir？方法

> ID：12027273
> 
> 赞同：1
> 
> 时间：2012-08-19T14:28:53.370
> 
> 标签：ruby-on-rails, ruby, cucumber

我最近开始在 Cucumber 测试中看到一个奇怪的错误。不幸的是，我无法追溯到引入它的时间。

沿线的不同地方有许多错误

```
undefined method `dir?' for #<Order:0x000000098447f8> (NoMethodError) 
```

我在代码中的任何地方都没有（也没有）名为“dir”的方法？

任何想法可能会调用它以及如何解决这个问题？

更新。正常查看页面时，代码失败并显示相同的消息。代码是：

```
def index
  search = {"meta_sort" => "id.desc"}.merge(params[:search] || {})
  @search = @company.orders.search(search)
  @orders = @search.paginate(:page => params[:page], :per_page => 20).includes(:premise).includes(:address)
end 
```

其他地方的一些几乎相同的代码可以正常工作。

```
def index
  @search = @company.users.shoppers.search(params[:search])
  @customers = @search.paginate :page => params[:page], :per_page => 20
end 
```

我尝试更改非工作代码以模仿工作代码，但这没有任何区别。搜索方法由我们愉快地使用了一段时间的元搜索 gem 提供。

更新 2：

似乎是由于引入了[delayed_job](https://github.com/collectiveidea/delayed_job_active_record)和[workless](https://github.com/lostboy/workless) gems 而出现了故障。Workless 依赖于[Rush](https://github.com/adamwiggins/rush)，它有一个 'dir?' 方法。我仍然不知道为什么故障会出现在它的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:51:13.033

*这是 Rush 中定义的搜索*方法的名称冲突并使用*目录？*使用 meta_search gem 搜索方法

使用metasearch方法而不是使用 meta_search***进行****搜索*

# javascript - 在 WinJS 应用程序中导航总是会引发异常

> ID：12027274
> 
> 赞同：1
> 
> 时间：2012-08-19T14:28:58.130
> 
> 标签：javascript, windows-8, winjs

每次我尝试在页面的就绪功能中执行导航时，应用程序都会崩溃。

具体来说，它在以下行失败`WinJS.Navigation.navigate("/pages/login/login.html", {});`：

```
// This function is called whenever a user navigates to this page. It
// populates the page elements with the app's data.
ready: function (element, options) {            

    var listView = element.querySelector(".groupeditemslist").winControl;
    listView.groupHeaderTemplate = element.querySelector(".headertemplate");
    listView.itemTemplate = element.querySelector(".itemtemplate");
    listView.oniteminvoked = this._itemInvoked.bind(this);

    // Set up a keyboard shortcut (ctrl + alt + g) to navigate to the
    // current group when not in snapped mode.
    listView.addEventListener("keydown", function (e) {
        if (appView.value !== appViewState.snapped && e.ctrlKey && e.keyCode === WinJS.Utilities.Key.g && e.altKey) {
            var data = listView.itemDataSource.list.getAt(listView.currentItem.index);
            this.navigateToGroup(data.group.key);
            e.preventDefault();
            e.stopImmediatePropagation();
        }
    }.bind(this), true);

    this._initializeLayout(listView, appView.value);
    listView.element.focus();

    initialize();
}

function initialize() {
    // Check if user is logged in
    if (is_logged_in !== true) {
        WinJS.Navigation.navigate("/pages/login/login.html", {});
    }
    else {
        // TODO: Replace the data with your real data.
        // You can add data from asynchronous sources whenever it becomes available.
        generateSampleData().forEach(function (item) {
            list.push(item);
        });
    }
} 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T00:00:10.730

您可以在这里采取几条路线：

1.  捕获未处理的异常并忽略它
2.  构建代码以避免设置错误条件

要忽略该错误，您可以设置一个 WinJS.Application.onerror 处理程序来处理未处理的异常。这是一个论坛帖子，可指导您使用此解决方案：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/686188b3-852d-45d5-a376-13115dbc889d](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/686188b3-852d-45d5-a376-13115dbc889d)

一般来说，我会说你最好一起避免异常。为此 - 这里发生的是一次只能发生一个导航事件（承诺）。当您在 ready 函数中时，用于导航到 groupedItems 的导航承诺仍在运行。当你调用初始化，然后调用 WinJS.Navigation.navigate("/pages/login/login.html", {}); 它看到这一点并尝试首先取消当前正在运行的导航承诺，这会导致您看到的异常。

相反，您可以使用[window.setImmediate](http://msdn.microsoft.com/en-us/library/windows/apps/hh453394.aspx)函数来设置您对 initialize() 的调用，以便在当前脚本块退出后运行。为此，请将您对 initialize() 的调用替换为：

```
window.setImmediate(this.initialize.bind(this)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T15:03:03.667

If your running your code on the RTM version after coming from the Release Preview this should sort your problem.

```
function initialize() {
    // Check if user is logged in
    if (is_logged_in !== true) {
        WinJS.Navigation.navigate("/pages/login/login.html", {});
    }
    else {
        // TODO: Replace the data with your real data.
        // You can add data from asynchronous sources whenever it becomes available.
        generateSampleData().forEach(function (item) {
            list.push(item);
        });
    }
}

var markSupportedForProcessing = WinJS.Utilities.markSupportedForProcessing;
var requireSupportedForProcessing = WinJS.Utilities.requireSupportedForProcessing;

markSupportedForProcessing(initialize);
requireSupportedForProcessing(initialize); 
```

You should probably take a look at the migration docs which details what the above is actually for and why: [http://www.microsoft.com/en-us/download/details.aspx?id=30706](http://www.microsoft.com/en-us/download/details.aspx?id=30706)

# css - 火狐css问题

> ID：12027277
> 
> 赞同：0
> 
> 时间：2012-08-19T14:29:10.780
> 
> 标签：css, wordpress, firefox

我试图使用以下代码实现 Firefox 特定的 CSS：

```
 @-moz-document url-prefix() { 
      #orbit-inside img.orbit-slide {
          width:100%!important;
          max-width:100%!important;
          height:auto;
          margin-top: 30px;
      }
 } 
```

但这在 Fx 上不起作用，我能知道为什么这不起作用吗？

我正在实施的网站[http://trichometechnology.com/](http://trichometechnology.com/)（标题滑块）。

我需要 Fx 中的上边距，因为没有其他浏览器显示的联系方式，问题仅出在 firefox 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:10:35.823

您的代码适用于我（Win XP 上的 Firefox 14.0.1）

无论如何，如果添加，则无需添加边距

```
.custom-slider{clear:both;} 
```

浮动元素后记得清除！

# c - c函数充当指针？

> ID：12027278
> 
> 赞同：0
> 
> 时间：2012-08-19T14:29:25.877
> 
> 标签：c

我见过在参数中传递指针的函数，它们在动态使用中很常见，在几个步骤后执行不同的函数。但是我在头文件中遇到了这种表示：

```
void *allocate_mem(u_int32_t n); 
```

关于如何使用它的任何线索？函数是指针还是返回指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T14:43:16.993

见[我的评论](https://stackoverflow.com/questions/12027278/c-function-acting-as-a-pointer#comment16051518_12027278)。

每当您有这样的问题时，请使用[cdecl.org](http://cdecl.org)`void *allocate_mem(u_int32_t)` ... 输入，我们得到以下信息。

> 声明`allocate_mem`为 function( `u_int32_t`) 返回指向`void`.

所以，我们知道`allocate_mem`return `void *`。现在，您可能想知道为什么您会想要一个指向`void`...

C99 标准的 §6.3.2.3.1 规定如下。

> 指向的指针**`void`**可以转换为指向任何不完整或对象类型的指针或从指针转换。指向任何不完整或对象类型的指针可以转换为指向**`void`**和返回的指针；结果应与原始指针比较。

因此，您可以转换结果`allocate_mem`以满足您的需求，例如

```
float *data = allocate_mem(1024 * sizeof(float)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T14:31:33.957

该函数返回一个指向新分配内存的指针。

返回类型是 void*，原因是函数不知道你想用它做什么。

如果要将其用作整数数组，请将其转换为 int*

例如。

```
int *p = allocate_mem(4*10); 
```

参数是需要分配的内存大小（字节）。因此，为 4 字节整数分配 40 字节会形成一个由 10 个 4 字节整数组成的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T14:35:31.170

A`void *`是指向某物的指针。它所指向的内容尚不清楚，但其想法是让它充当一种中性指针。`void*`参数可以采用任何类型的指针类型。然而，在处理这些指针时需要非常小心，因为它们有自己的一组限制。您不能取消引用 void* 它必须强制转换为有效类型。应用指针算法也是如此。

有关更多详细信息，请参阅此讨论 - [C - 函数中的指针和 void 变量类型？](https://stackoverflow.com/questions/6977499/c-pointers-in-functions-and-void-variable-type)

# google-apps-script - Apps 脚本图表仪表板绑定到 Google 电子表格作为数据源

> ID：12027280
> 
> 赞同：4
> 
> 时间：2012-08-19T14:29:32.570
> 
> 标签：google-apps-script, google-visualization

它在[图表仪表板教程](https://developers.google.com/apps-script/articles/charts_dashboard)中说，仪表板可以绑定到 Google 电子表格范围作为数据源。但这没有在教程中演示，我也无法在[Apps Script docs](https://developers.google.com/apps-script/class_datatable)中找到相关信息。似乎 Datatable 不能绑定到电子表格范围，因为这些方法仅提供手动添加行和列。

有谁知道如何将仪表板绑定到 Google 电子表格的范围？

在我当前的代码中，我假设仪表板可以像这样绑定到 Google 电子表格中的一个范围，但是 setDataTable 函数调用让我很难过。

```
var ss = SpreadsheetApp.openById(spreadsheetId);
var data = ss.getRangeByName("DataWithColHeadings");
var dashboard = Charts.newDashboardPanel()
  .setDataTable(data) // throws error here! I think it is expecting a DataTableBuilder
  .bind([durationFilter, lineFilter], [pieChart, tableChart])
  .build(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:05:45.277

您可以使用点表示法指定数据范围：

```
var datasource = ss.getSheetByName("SheetName").getRange("A1:J20"); 
```

然后按如下方式使用它：

```
var dashboard = Charts.newDashboardPanel()
      .setDataTable(**datasource**) 
```

以这种方式使用时，您可以消除指定列名和行值的代码。只需确保指定范围内的值一致且非空即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T05:26:25.273

这相当于绑定到电子表格中命名范围的教程。命名范围包括列标题。

```
 function doGet() {
      var uiApp = UiApp.createApplication();
      var ssKey = "0At0FGJizRd-gdFo5bWZUUFRrUnRabENiRFdmT2o4WUE";
      var ss = SpreadsheetApp.openById(ssKey);
      var datasource = ss.getRangeByName("myRange").getValues();
      Logger.log(datasource);
      var data = Charts.newDataTable()
          .addColumn(Charts.ColumnType.STRING, datasource [0] [0])
          .addColumn(Charts.ColumnType.STRING, datasource [0] [1])
          .addColumn(Charts.ColumnType.NUMBER, datasource [0] [2])
          .addColumn(Charts.ColumnType.NUMBER, datasource [0] [3])
          for (i=1;i<=datasource.length-1;i++){
        Logger.log(datasource [i]);
        data.addRow([datasource [i] [0], datasource [i] [1], datasource [i] [2], datasource [i] [3]])
          };

      data.build();
      var ageFilter = Charts.newNumberRangeFilter()
          .setFilterColumnLabel("Age")
          .build();

      var genderFilter = Charts.newCategoryFilter()
          .setFilterColumnLabel("Gender")
          .build();

      var pieChart = Charts.newPieChart()
          .setDataViewDefinition(Charts.newDataViewDefinition()
                         .setColumns([0,3]))
          .build();

      var tableChart = Charts.newTableChart()
          .build(); 
      var dashboard = Charts.newDashboardPanel()
          .setDataTable(data)
          .bind([ageFilter, genderFilter], [pieChart, tableChart])
          .build();
      dashboard.add(uiApp.createVerticalPanel()
            .add(uiApp.createHorizontalPanel()
                 .add(ageFilter).add(genderFilter)
                 .setSpacing(70))
            .add(uiApp.createHorizontalPanel()
                 .add(pieChart).add(tableChart)
                 .setSpacing(10)));
      uiApp.add(dashboard);
      return uiApp;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T11:17:33.817

您还可以使用名为 .getDataTable() 的对象 RANGE 的 API 函数。下面的示例适用于我的两列多行工作表。

```
function doGet() {
   var uiApp = UiApp.createApplication().setTitle("My Dashboard");

   var dataRange = sheet.getDataRange();
   var dataTable = dataRange.getDataTable(true);

   var catFilter = Charts.newCategoryFilter()
       .setFilterColumnLabel("Category")
       .build();

   var chart = Charts.newPieChart()
       .build();

   var dashboard = Charts.newDashboardPanel()
       .setDataTable(dataTable)
       .bind([catFilter], [chart])
       .build();

   var panel = uiApp.createVerticalPanel()
     .add(chart)
     .add(catFilter);

   dashboard.add(panel);
   uiApp.add(dashboard);
   return uiApp;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-28T05:36:24.227

附件是一个示例，其中 Applescript 直观地获取从谷歌电子表格第一张表的单元格 A1 开始的数据范围。

这是我的第一个 stackoverflow 答案，所以请提供反馈

我重新创建了为引用下面的电子表格而修改的 google [piechart Applescript 仪表板教程：](https://developers.google.com/apps-script/articles/charts_dashboard)

```
 function doGet() {
    var uiApp = UiApp.createApplication();
    // type the SpreadsheetKey below within quotes for 
    // example "1MfXR_ELFevumQwEOjWneNL5j2M8aVLgELBOsS41LD5o"
    var ssKey = "1MfXR_ELFevumQwEOjWneNL5j2M8aVLgELBOsS41LD5o";
    var ss = SpreadsheetApp.openById(ssKey);
    var dataRange = ss.getDataRange();
    var data = dataRange.getDataTable(true);

    var ageFilter = Charts.newNumberRangeFilter()
        .setFilterColumnLabel("Age")
        .build();

    var genderFilter = Charts.newCategoryFilter()
        .setFilterColumnLabel("Gender")
        .build();

    var pieChart = Charts.newPieChart()
        .setDataViewDefinition(Charts.newDataViewDefinition()
        .setColumns([0,3]))
        .build();

    var tableChart = Charts.newTableChart()
        .build(); 

    var dashboard = Charts.newDashboardPanel()
        .setDataTable(data)
        .bind([ageFilter, genderFilter], [pieChart, tableChart])
        .build();  
    dashboard.add(uiApp.createVerticalPanel()
          .add(uiApp.createHorizontalPanel()
               .add(ageFilter).add(genderFilter)
               .setSpacing(70))
          .add(uiApp.createHorizontalPanel()
               .add(pieChart).add(tableChart)
               .setSpacing(10)));
    uiApp.add(dashboard);
    return uiApp;
    } 
```

# c#-4.0 - Windows Phone 获取来电的电话号码

> ID：12027281
> 
> 赞同：0
> 
> 时间：2012-08-19T14:29:33.203
> 
> 标签：c#-4.0, mobile, windows-phone-7, phone-call

是否可以使用 Windows Mobile 7.0 或更高版本获取来电的电话号码并记录它。我已经尝试过 OpenNETCF.IoC(1.0.12221) 但我找不到方法。浪费了大约 2 天的时间来寻找这个。如果有人可以帮助我，那将是一个很大的帮助。**只需该应用程序必须能够检测来电的电话号码**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:54:58.697

不它不是。没有用于处理呼叫的 Windows Phone API。Microsoft 提供了一组有意限制的 API，以便开发人员无法干扰手机的核心功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-06T03:28:46.510

为 Android 编写它并在几个月后在 Windows 上运行它。这就是我认识的大多数 WP 开发人员计划做的事情。Android“意图”很好地处理了这种情况。

# javascript - JavaScript 属性继承

> ID：12027282
> 
> 赞同：12
> 
> 时间：2012-08-19T14:29:35.977
> 
> 标签：javascript, inheritance, properties

我正在尝试拥有一个通用的“列表”类，它将具有：

*   属性：Items - 这将是一个“what-ever”数组
*   方法：Add() - 这将是抽象的并由特定的“列表”对象实现
*   方法：Count() - 返回“项目”的数量

然后创建将从'List'继承的子类：

```
// Class 'List'
function List(){
    this.Items = new Array();
    this.Add = function(){ alert('please implement in object') }
}

// Class CDList - which inherits from 'List'
function CDList(){
    this.Add = function(Artist){
        this.Items.push(Artist)
    }
}
CDList.prototype = new List();
CDList.prototype.constructor = CDList;

// Create a new CDList object
var myDiscs = new CDList();
myDiscs.Add('Jackson');
myDiscs.Count()  <-- this should be 1

// Create a second CDList object
var myDiscs2 = new CDList();
myDiscs2.Add('Walt');
myDiscs2.Add('Disney');
myDiscs2.Count()  <-- this should be 2 
```

...但这似乎为所有“CDList”实例创建了一个共享的“项目”列表。我需要以某种方式为每个“CDList”实例创建一个“Items”列表的新继承实例。

我怎样才能做到这一点？

*我在本例中使用“项目”列表作为示例。我希望能够在我的子类中为任何类型的继承属性提供一个新实例 - 不一定是 Array 对象。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-19T14:51:51.763

只有一个数组，因为您只创建一个。该数组附加到“CDList”的原型，因此在所有实例之间共享。

解决这个问题：不要将它附加到原型上，而是附加到实例上。这只能在构建时完成：

```
// This is the constructor of the parent class!
function List() {
    this.Items = new Array();
}

// Add methods to the prototype, not to the instance ("this")
List.prototype.Add = function() { alert('please implement in object'); };

// Constructor of the child
function CDList() {
    List.call(this); // <-- "super();" equivalent = call the parent constructor
}

// "extends" equivalent = Set up the prototype chain
// Create a new, temporary function that has no other purpose than to create a
// new object which can be used as the prototype for "CDList". You don't want to
// call "new List();", because List is the constructor and should be called on
// construction time only. Linking the prototypes directly does not work either,
// since this would mean that overwriting a method in a child overwrites the
// method in the parents prototype = in all child classes.
var ctor = function() {};
ctor.prototype = List.prototype;
CDList.prototype = new ctor();
CDList.prototype.constructor = CDList;

// Overwrite actions
CDList.prototype.Add = function(Artist) {
    this.Items.push(Artist);
}; 
```

演示：http: [//jsfiddle.net/9xY2Y/1/](http://jsfiddle.net/9xY2Y/1/)

* * *

一般概念是：每个实例必须有自己的副本（如本例中的“Items”数组）必须在构造时创建并附加到“this”（= 实例），即在执行`new List()`or时`new CDList()`。可以跨实例共享的所有内容都可以附加到原型上。这实质上意味着像“添加”函数这样的属性只被创建一次，然后被所有实例使用（导致原始问题的原因）。

链接原型时，您不能（通常）直接链接它们，例如：

```
CDList.prototype = List.prototype;
DVDList.prototype = List.prototype;

// Now add a new function to "CDList"
CDList.prototype.Foo = function() { alert('Hi'); }; 
```

因为“List”、“CDList”和“DVDList”这三个函数的原型是直接相连的，它们都指向一个原型对象，即`List.prototype`. 所以，如果你添加一些东西，`CDList.prototype`你实际上是把它添加到`List.prototype`——这也是“DVDList”的原型。

```
var dvd = new DVDList();
dvd.Foo(); // <-- alerts "hi" (oops, that wasn't intended...) 
```

诀窍是将原型链接到父类的新实例：

```
CDList.prototype = new List(); 
```

这将创建一个“List()”类型的新对象，其特殊功能是“List()”函数的原型链接到新对象，使您能够直接在对象上调用原型的属性：

```
var l = new List();
alert( l.hasOwnProperty("Add") );  // <-- yields "false" - the object l has no
                                   // property "Add"
l.Add("foo"); // <-- works, because the prototype of "List" has a property "Add" 
```

但是，请记住，我们打算使用函数“List()”的主体在每个实例的基础上创建像这个数组“Items”这样的东西？这是您放置任何“构造函数”代码的地方，例如

```
function User(userId) {
    $.getJSON('/user/' + userId, ...
}

function Admin() {}
Admin.prototype = new User( // ... now what? 
```

一个非常干净的解决方案是使用另一个函数来创建原型对象：

```
var ctor = function() {}; // <-- does nothing, so its super safe
                          // to do "new ctor();" 
```

现在可以直接链接原型，因为我们永远不会添加任何东西`ctor.prototype`：

```
ctor.prototype = List.prototype; 
```

如果我们这样做：

```
CDList.prototype = new ctor(); 
```

“CDList()”的原型变成了一个“ctor”类型的新对象，它没有自己的属性但可以扩展，例如通过一个新的“Add”函数：

```
CDList.prototype.Add = function() { /* CD specific code! */ }; 
```

然而，如果你不给这个新的原型对象添加一个“Add”属性，“ctor()”的原型就会起作用——这就是“List()”的原型。这就是期望的行为。

此外，“List()”中的代码现在仅在您执行此操作`new List()`或直接从另一个函数（在子类中通过`List.call(this);`）调用它时执行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-19T14:33:05.900

试试这个：

```
function CDList(){
    List.call( this )
    this.Add = function(Artist){
        this.Items.push(Artist)
    }
} 
```

你需要调用超级构造函数...

我喜欢[MDN 网络上关于 JavaScript 继承的这篇文章](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_Revisited)。我尝试了这种方法/技术，它在我测试的所有浏览器（Chrome、Safari、Internet Explorer 8+ 和 Firefox）中都运行良好。

# java - 如何为 TableViews 使用自定义 cellFactories

> ID：12027285
> 
> 赞同：8
> 
> 时间：2012-08-19T14:29:46.843
> 
> 标签：java, javafx, javafx-2

如何轻松地将自定义（可重用）cellFactories 应用于`javafx.scene.control.TableCell;`or `javafx.scene.control.TableView;`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-19T14:29:46.843

要应用自定义 CellFactories 来格式化单元格中显示的文本、其颜色等，以下示例可能会有所帮助。

# 初始情况

假设您有一个 Bean/POJO `Person`：

```
public class Person {
    private double levelOfGrowth = 0;

    public Person() {};

    public Person(double levelOfGrowth) {
        this.levelOfGrowth = levelOfGrowth;
    };

    public double getLevelOfGrowth() {
        return levelOfGrowth;
    }
} 
```

`levelOfGrowth`一个人的成长完成的百分比值在哪里。

它可能设置在 0.00 到 1.00 之间。

还假设您已经在绑定到控制器的 FXML 中创建了视图`MainWindowController`。您还设置了列以显示`levelOfGrowth`id`levelOfGrowthColumn`

```
public class MainWindowController implements Initializable {
    @FXML
    public TableColumn levelOfGrowthColumn;

    /**
     * Initializes the controller class.
     */
    @Override
    public void initialize(URL url, ResourceBundle rb) {
        ObservableList<Person> persons = FXCollections.observableArrayList();

        persons.add(new Person(0));
        persons.add(new Person(0.5));
        persons.add(new Person(1));

        levelOfGrowthColumn.setCellValueFactory(new PropertyValueFactory<Person, Double>("levelOfGrowth"));

    }
} 
```

# 意向

上面示例中的*问题是视图中显示的值是 0.5 而不是 50%。*我们还可能希望将值的颜色（例如 100%）更改为绿色。

# 解决方案

我们需要的是一个（可重用）类，它描述了如何在视图中格式化/打印双值并将该类与`levelOfGrowthColumn`.

## “格式化程序”类

```
public class PercantageFormatCell extends TableCell<Object, Double> {

    public PercantageFormatCell() {
    }

    @Override
    protected void updateItem(Double item, boolean empty) {
        super.updateItem(item, empty);

        // If the row is not empty but the Double-value is null,
        // we will always display 0%
        if (!empty && null == item) {
            item = new Double(0.0d);
        }

        // Here we set the displayed text to anything we want without changing the
        // real value behind it. We could also have used switch case or anything you
        // like.
        setText(item == null ? "" : NumberFormat.getPercentInstance().format(item));

        // If the cell is selected, the text will always be white
        // (so that it can be read against the blue background),
        // if the value is 1 it will be green.
        if (item != null) {
            double value = item.doubleValue();
            if (isFocused() || isSelected() || isPressed()) {
                setTextFill(Color.WHITE);
            } else if (value < 1) {
                setTextFill(Color.BLACK);
            } else {
                setTextFill(Color.GREEN);
            }
        }
    }
} 
```

## 在您的控制器中使用它

```
public class MainWindowController implements Initializable {
    @FXML
    public TableColumn levelOfGrowthColumn;

    /**
     * Initializes the controller class.
     */
    @Override
    public void initialize(URL url, ResourceBundle rb) {
        ObservableList<Person> persons = FXCollections.observableArrayList();

        persons.add(new Person(0));
        persons.add(new Person(0.5));
        persons.add(new Person(1));

        // New code START

        // In case we have multiple columns with percent-values it
        // might come in handy to store our formatter
        Callback<TableColumn, TableCell> percantageCellFactory =
            new Callback<TableColumn, TableCell>() {
                public TableCell call(TableColumn p) {
                    return new PercantageFormatCell();
                }
            };

        // Now all we have to do is to apply it
        levelOfGrowthColumn.setCellFactory(percantageCellFactory);

        // New code END

        levelOfGrowthColumn.setCellValueFactory(new PropertyValueFactory<Person, Double>("levelOfGrowth"));

    }
} 
```

# php - 如何实现一个也显示结果的表单验证页面？

> ID：12027291
> 
> 赞同：0
> 
> 时间：2012-08-19T14:30:25.107
> 
> 标签：php, validation

目前，我有一个页面显示查询选项并进行表单验证，另一个页面处理查询并在验证成功时显示结果。我试图将这两个页面组合在一起，这样用户就不需要每次来回两个页面来进行一些查询更改。

两页进程的结构如下：

```
**Validation Page**
if (post detected)
{
 validate input
 if (no error)
 {
  record query options
  redirect to results page
  exit
 }
 else
 {
  output error message
 }
}
display form

**Results Page**
if (query options are set)
{
 process query
 display results
}
else
{
 redirect to validation page
} 
```

我已经看到这个概念只是在搜索框和结果在一个页面中的搜索引擎页面中实现的。我正在寻找使用 POST 方法和包含选择框和输入框的表单来实现类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:34:45.113

您可以将表单操作设置为自身（或将其保留为空白，`action = ""`无论如何它都会指向自身，然后使用简单的检查来查看是否已提交任何表单数据以确定您是否应该显示空白页面或搜索结果：

```
if(isset($_REQUEST['searchStuffs']) // Not sure if you are GET or POST'ing
{
    if(!empty($_REQUEST['searchStuffs'])
    {
        // do stuff here to get the form result, then display it
    }
    else
    {
        // The form was submitted empty, so show an error
    }
}
else
{
    // Display the normal search/form page as it hasn't been sent.
} 
```

您还可以使用以下方法（尽管它是一些额外的工作，但我可能会使用它）：

```
$searchBool=false;
if(isset($_REQUEST['searchStuffs']) // Not sure if you are GET or POST'ing
{
    if(!empty($_REQUEST['searchStuffs'])
    {
        if(...)// valid search criteria
        {
            $searchBool=true;
            // Do stuff to get search results
            $searchResults='some output or data';
        }
    }
}

// Echo normal input form
if($searchBool)
{
    echo $searchResults;
} 
```

# c++ - if语句不起作用VS2010

> ID：12027301
> 
> 赞同：-1
> 
> 时间：2012-08-19T14:31:17.187
> 
> 标签：c++

(slopeDegrees=90 type long double)

```
cout<<slopeDegrees<<endl;

if(slopeDegrees==90)cout<<"0"<<endl; 
```

此代码不起作用...控制台仅打印 90（它需要为 90 \n 0）为什么？我用VS2010

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T14:35:14.283

您尝试将 90 与浮点数进行比较。因为浮点数现在总是正好是 90.0000，但也可以是 89.9998 或 90.0001。当直接与另一个 int 或 float 值比较时，比较不成立。

这不应该那样做，而是像：

```
if (Math.Abs(slopeDegrees - 90.0) < 0.001) 
```

0.001 是您可以自己定义的一些精度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T14:34:51.920

将相等性与双精度数和其他浮点类型进行比较是充满危险的。double 中的 90 是一个近似值，而不是**整数**90。

最好将其与阈值内进行比较，而不是与确切的不平等进行比较。就像是：

```
if (slopeDegrees > 89.9 && slopeDegrees < 90.1)
{
    cout << "0" << endl;
} 
```

如果某些重要值需要精确表示，您需要研究一种[固定点](http://en.wikipedia.org/wiki/Fixed-point_arithmetic)方式来表示这些值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T14:36:03.860

因为您不想比较`double`完全相等。而是在一个范围内测试。前任：

```
const double THRESHOLD = 0.005;
double slopeDegrees = 90;

cout<<slopeDegrees<<endl;

if((slopeDegrees <= (90 + THRESHOLD)) && (slopeDegrees >= (90 - THRESHOLD)))
{
    cout<<"0"<<endl;
} 
```

# java-me - 使用蓝牙 L2Cap 连接到 HID 设备

> ID：12027310
> 
> 赞同：3
> 
> 时间：2012-08-19T14:33:17.153
> 
> 标签：java-me, bluetooth, jsr82, l2cap

是否有任何解决方法可以在 JAVA ME 中使用 L2CAP 连接到 HID 设备（使用移动设备原生的 JSR-82 规范实现而不是 BlueCove 等）？

我知道 HID 设备通常使用值为 0x0011 的 PSM（协议服务多路复用器）。不幸的是，我发现：

> 合法的 PSM 值在 (0x1001..0xFFFF) 范围内，最低有效字节必须是奇数，所有其他字节必须是偶数。

上面解释了为什么`javax.microedition.io.Connector connect()`当我尝试以下代码时方法会抛出异常：

```
Connector.open("btl2cap://600010120296:11"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-05T04:02:23.973

[此页面](https://jcp.org/aboutJava/communityprocess/maintenance/jsr082/MR4changes.html)表明该限制已在 JSR-82 1.2 中删除：

> 合法的 PSM 值在 (0x0005..0xFFFF) 范围内，最低有效字节必须是奇数，所有其他字节必须是偶数。当服务器连接字符串没有 psm 参数时，实现分配的服务器 PSM 值必须不小于 0x1001。

和评论：

> 从 L2CAP PSM 值中删除保留范围，以允许 Java 应用程序使用基于“保留”范围内的 PSM 值构建在 L2CAP 之上的蓝牙协议。

此外，“中断端点”是 PSM 0x13（这是键盘、鼠标等发送主动报告的地方，就像它们在控制通道 (0x11) 上发送响应 GET_REPORT 一样）。

# grails - Gradle / Grails 应用程序

> ID：12027313
> 
> 赞同：16
> 
> 时间：2012-08-19T14:34:01.343
> 
> 标签：grails, gradle

几个小时以来，我一直在尝试配置 Gradle 来管理 Grails 项目，但没有成功。我在 Stack Overflow 和 Internet 上的其他地方找到的建议对我不起作用。

你能给我关于如何配置 Gradle+Grails 项目的最新指导吗？理想情况下，它应该与 Grails (2.1.0) 和 Gradle (1.1) 的当前版本相关。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-29T04:08:00.760

## 构建脚本

```
import org.grails.gradle.plugin.GrailsTask

buildscript {
        repositories {
            mavenCentral()
            mavenRepo name: "grails", url: 'http://repo.grails.org/grails/repo' 
        }
        dependencies {
            classpath "org.grails:grails-gradle-plugin:1.1.1-SNAPSHOT"
        }
}
repositories {
    mavenCentral()
    mavenRepo name: "grails", url: 'http://repo.grails.org/grails/repo' 
}
version = "1.0"
grailsVersion = "2.1.0"
apply plugin: "grails"
dependencies {
    ['dependencies', 'resources', 'core', 'hibernate', 'plugin-datasource', 'plugin-domain-class', 'plugin-tomcat', 'plugin-services'].each { plugin ->
        compile "org.grails:grails-$plugin:2.1.0"
    }
    bootstrap "org.codehaus.groovy:groovy-all:1.8.6"
}

GRAILS_TASK_PREFIX = "grails-"
if (name.startsWith(GRAILS_TASK_PREFIX)) {
    project.task(name, type: GrailsTask) {
        command "${name - GRAILS_TASK_PREFIX}"
    }
} 
```

## 初始化

然后你可以做`gradle init`初始化项目结构

## 命令

用于`gradle grails-[grails script]`执行 grails 命令。例如：`gradle grails-run-app`相当于`grails run-app`

希望这可以帮助！

## 更新

这似乎适用于 Grails 2.3.2：

```
buildscript {
        repositories {
            mavenCentral()
            maven { url 'http://repo.grails.org/grails/repo' }
        }
        dependencies {
            classpath "org.grails:grails-gradle-plugin:2.0.0-SNAPSHOT"
        }
}
repositories {
    mavenCentral()
    maven { url 'http://repo.grails.org/grails/repo'  }
}
version = "1.0"
apply plugin: "grails"
apply plugin: 'idea'
grails {
  grailsVersion = "2.3.2"
}
dependencies {
    ['dependencies', 'core', 'spring', 'web', 'plugin-datasource', 'plugin-domain-class', 'plugin-controllers', 'plugin-services'].each { plugin ->
        compile "org.grails:grails-$plugin:2.3.2"
    }
    compile 'org.grails.plugins:tomcat:7.0.42'
    compile 'org.grails.plugins:hibernate:3.6.10.3'
    compile 'com.h2database:h2:1.3.173'
    bootstrap "org.codehaus.groovy:groovy-all:2.1.9"
} 
```

A note, throws Exception when generating Grails wrapper, but `gradle init` seems to initialize the project structure properly otherwise. And, `gradle grails-run-app` seems to work fine too.

# php - 在同一页面上计算源中的元素

> ID：12027314
> 
> 赞同：2
> 
> 时间：2012-08-19T14:34:05.297
> 
> 标签：php, html

通过将其添加到第二页，我可以在另一个页面上显示页面 html 中出现的次数：

```
 <?php
 $htmlsource = file_get_contents("http://website.com/page1.php");
 echo substr_count($htmlsource, '<test>');
 ?> 
```

因此，如果第 1 页有来源：

```
 <test>word1</test><test>word2</test> 
```

第 2 页将有“2”作为输出。

现在，我的问题是我想让“2”（即出现次数）不显示在第二页上，而是显示在与 php 搜索源的同一页面上。这对于上面的代码是不可能的，因为页面一直在加载，这是合乎逻辑的。

那么有没有办法只获取html的一部分（不是基于字符数，而是例如在“开始”和“完成”css之间）。还是有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T00:18:31.597

有一个 jquery 解决方案，您可以使用每个函数。一个示例如下。

jQuery

```
$(document).ready(function(){
    var counter = 0;

    $('test').each(function(){
        counter++;
    });

    alert(counter);

}); 
```

jsfiddle 示例在这里[http://jsfiddle.net/pdWZP/2](http://jsfiddle.net/pdWZP/2)

# javascript - 如何防止用户使用浏览器选项禁用脚本

> ID：12027317
> 
> 赞同：0
> 
> 时间：2012-08-19T14:34:13.347
> 
> 标签：javascript, jquery, html, web-applications, browser

在浏览器中，有网站用户可以禁用脚本的选项，因此这可能是禁用掩码和使用 jquery 和其他脚本编写的其他代码，并且网站将出现异常或可能是网站黑客攻击。如何使用这些选项保护网站？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T14:36:21.233

您（幸运的是）无法控制用户对他的用户代理所做的事情（如果我理解您的问题的话）。

您唯一能做的就是显示该网站在禁用 javascript 的情况下无法工作的消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T14:37:35.717

如果用户不想打开它，您不能阻止他们禁用 javascript。

您唯一的办法是在允许他们使用您的网站之前要求使用 javascript。

这可以通过将所有内容包装在“显示：无”中来完成，例如。

```
<div id="content" style="display: none">
PAGE CONTENT HERE
</div> 
```

还有一条信息：

```
<div id="javascriptrequired">You need javascript to use this website.</div> 
```

然后使用javascript重新设置显示，并关闭消息：

```
<script>
  $("#content").css("display: block;"); // assuming you have jquery
  $("#javascriptrequired").css("display: none;"); // turn javascript message off
</script> 
```

# jquery - Autosuggest tag-it jquery - 如何在回发时获取 ID 和标题？

> ID：12027319
> 
> 赞同：6
> 
> 时间：2012-08-19T14:34:14.847
> 
> 标签：jquery, asp.net, autosuggest, tag-it

我正在使用这个自动建议插件：[http ://aehlke.github.com/tag-it/](http://aehlke.github.com/tag-it/)

我从数据库中获取一组项目（现在只是一个普通数组）。该列表包括 ID 和标题。当我提交表单时，我想同时获得 ID 和 Title。现在我只能获得标题。我想获取这两个值，以便可以创建新的引用（ID = 0），并且可以插入现有的引用而无需任何数据库查找。

这是我的代码。

book.aspx - book.aspx.cs 的代码隐藏：

```
 ...

    protected void btnSave_Click(object sender, EventArgs e)
    {
        Response.Write(txtReferences.Text); // this contains Titles, but I would like both values.
    }

    public class Reference
    {
        public string Title;
        public int ID;
    }

    [WebMethod]
    public static Array GetReferences(string title)
    {
        // this will be replaced by lookup in database.
        List<Reference> References = new List<Reference>{
            new Reference{ID=1, Title="My ref 1"},
            new Reference{ID=2, Title="Ref ref 2"},
            new Reference{ID=3, Title="Blah ref 3"},
            new Reference{ID=0, Title=title} // for new tags set ID 0 to indicate that this should be created in db
        };

        return References.ToArray();
    }
    .... 
```

这是我当前的脚本：

```
<script type="text/javascript">
$(document).ready(function () {
    var failure = function (result) {
        alert(result.status + " " + result.statusText);
    }

        var ref = $("#<%=txtReferences.ClientID %>");
    ref.tagit({
        allowSpaces: true,
        removeConfirmation: true,
        tagSource: function (title, showChoices) {
            var params = '{"title":"' + title.term + '"}';
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                error: failure,
                url: "book.aspx/GetReferences",
                data: params,
                success: function (data) {
                    var assigned = ref.tagit("assignedTags");
                    var filtered = [];
                    for (var i = 0; i < data.d.length; i++) {
                        if ($.inArray(data.d[i].Title, assigned) == -1) { filtered.push(data.d[i].Title); }
                    }
                    showChoices(filtered);
                }
            });
        }
    });
});
</script> 
```

当然，我在 book.aspx 页面上有一个文本框：

```
<asp:TextBox ID="txtReferences" runat="server" /> 
```

欢迎任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:30:34.087

在查看了 tag-it [docs](https://github.com/aehlke/tag-it/blob/master/README.markdown)和[sources](https://github.com/aehlke/tag-it/blob/d64a7940ff052675c897b5e989d601cc9d6dc1eb/js/tag-it.js)之后，恐怕这个插件不支持除了简单的字符串作为标签之外的任何东西，所以如果你想来回发送更多信息，你必须自己做。假设`Title`属性是唯一的（即没有两个标签具有相同`Title`但不同`ID`的 s），但应该不难......

您需要的第一件事是，在检索时，映射`Title`到`ID`某个地方：

```
var ids = {}
...
                for (var i = 0; i < data.d.length; i++) {
                    ids[data.d[i].Title] = data.d[i].ID;
                    if ($.inArray(data.d[i].Title, assigned) == -1) { ... }
                } 
```

现在你有很多选择。我的建议是使用隐藏字段，每次添加或删除标签时都会更新：

```
function updateHidden() {
    var chosenTags = $.map(ref.tagit("assignedTags"), function(tag) {
        return { Title:tag, ID:(ids[tag] || 0) }; // If the tag is new, use 0 as the ID
    });
    $("#<%=yourHiddenField.ClientID %>").val(JSON.stringify(chosenTags));
}
...
ref.tagit({
   ...
   onTagAdded:updateHidden,
   onTagRemoved:updateHidden
} 
```

（注意：我建议使用 JSON，但您可以使用更方便您的服务器处理的任何格式）

```
protected void btnSave_Click(object sender, EventArgs e)
{
    Response.Write(yourHiddenField.Text); // this contains both values, encoded in JSON format.
} 
```

# emacs - 如何自定义 volatile-highlights 背景颜色？

> ID：12027321
> 
> 赞同：1
> 
> 时间：2012-08-19T14:34:27.530
> 
> 标签：emacs, lisp, elisp

我使用[volatitle-highlights-mode(VHL)](https://github.com/k-talo/volatile-highlights.el)来突出显示最后一个编辑区域。但是 VHL 的背景颜色对于[solarized-theme](https://github.com/sellout/emacs-color-theme-solarized)来说太浅了。所以我想改变 VHL 的背景颜色。

我从 VHL 中找到了片段，如下所示：

```
(defface vhl/default-face
  (cond
   ((or vhl/.xemacsp
        (vhl/.face-inheritance-possible-p))
    '((((class color) (background light))
       (:background "yellow1"))
      (((class color) (background dark))
       (:background "SkyBlue4"))
      (t :inverse-video t)))
   (t
    '((t
       :inherit secondary-selection
       ))))
    "Face used for volatile highlights."
    :group 'volatile-highlights) 
```

此片段指定 VHL 背景的颜色，那么如何在我的 .emacs.d 中自定义背景颜色以覆盖默认的 VHL 背景颜色。

欢迎摘录！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T04:08:58.233

您也可以只使用`M-x customize-face RET vhl/default-face`. 脸的定义方式无关紧要：您仍然可以使用自定义来自定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:51:52.577

上面的代码看起来很奇怪：似乎检查了是否可以继承人脸，如果没有，请尝试从`secondary-selection`人脸继承（！！）

无论如何，最简单的做法是使用`customize-face`，就像在对您的问题的评论中建议的 wvxvw 一样。我不太明白你对他的回答的回应：设置一个不存在的面孔不会导致任何错误。但是，如果您担心，可以剪切`(custom-set-face .... )`出现在 .emacs 中的表单并将其粘贴到 .emacs.d 中的文件中：关于仅在 .emacs 中使用一个实例的警告是为了让自定义基础架构知道如何编辑文件。

# c# - Damerau–Levenshtein 距离算法，禁用删除计数

> ID：12027324
> 
> 赞同：3
> 
> 时间：2012-08-19T14:34:47.077
> 
> 标签：c#, algorithm, levenshtein-distance, fuzzy

在 Damerau-Levenshtein 距离算法的这个实现中，我如何禁用删除计数，或者如果已经实现了其他算法，请指出它。

**示例（禁用删除计数）：**

string1：你好吗？

string2：怎么oyu？

**距离：** 1（对于**转置**，4 次删除**不算**）

这是算法：

```
 public static int DamerauLevenshteinDistance(string string1, string string2, int threshold)
    {
        // Return trivial case - where they are equal
        if (string1.Equals(string2))
            return 0;

        // Return trivial case - where one is empty
        if (String.IsNullOrEmpty(string1) || String.IsNullOrEmpty(string2))
            return (string1 ?? "").Length + (string2 ?? "").Length;

        // Ensure string2 (inner cycle) is longer_transpositionRow
        if (string1.Length > string2.Length)
        {
            var tmp = string1;
            string1 = string2;
            string2 = tmp;
        }

        // Return trivial case - where string1 is contained within string2
        if (string2.Contains(string1))
            return string2.Length - string1.Length;

        var length1 = string1.Length;
        var length2 = string2.Length;

        var d = new int[length1 + 1, length2 + 1];

        for (var i = 0; i <= d.GetUpperBound(0); i++)
            d[i, 0] = i;

        for (var i = 0; i <= d.GetUpperBound(1); i++)
            d[0, i] = i;

        for (var i = 1; i <= d.GetUpperBound(0); i++)
        {
            var im1 = i - 1;
            var im2 = i - 2;
            var minDistance = threshold;
            for (var j = 1; j <= d.GetUpperBound(1); j++)
            {
                var jm1 = j - 1;
                var jm2 = j - 2;
                var cost = string1[im1] == string2[jm1] ? 0 : 1;

                var del = d[im1, j] + 1;
                var ins = d[i, jm1] + 1;
                var sub = d[im1, jm1] + cost;

                //Math.Min is slower than native code
                //d[i, j] = Math.Min(del, Math.Min(ins, sub));
                d[i, j] = del <= ins && del <= sub ? del : ins <= sub ? ins : sub;

                if (i > 1 && j > 1 && string1[im1] == string2[jm2] && string1[im2] == string2[jm1])
                    d[i, j] = Math.Min(d[i, j], d[im2, jm2] + cost);

                if (d[i, j] < minDistance)
                    minDistance = d[i, j];
            }

            if (minDistance > threshold)
                return int.MaxValue;
        }

        return d[d.GetUpperBound(0), d.GetUpperBound(1)] > threshold
            ? int.MaxValue
            : d[d.GetUpperBound(0), d.GetUpperBound(1)];
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T08:48:07.323

```
 public static int DamerauLevenshteinDistance( string string1
                                            , string string2
                                            , int threshold)
{
    // Return trivial case - where they are equal
    if (string1.Equals(string2))
        return 0;

    // Return trivial case - where one is empty
    // WRONG FOR YOUR NEEDS: 
    // if (String.IsNullOrEmpty(string1) || String.IsNullOrEmpty(string2))
    //      return (string1 ?? "").Length + (string2 ?? "").Length;

    //DO IT THIS WAY:
    if (String.IsNullOrEmpty(string1))
        // First string is empty, so every character of 
        // String2 has been inserted:
        return (string2 ?? "").Length;
    if (String.IsNullOrEmpty(string2))
        // Second string is empty, so every character of string1 
        // has been deleted, but you dont count deletions:
        return 0;

    // DO NOT SWAP THE STRINGS IF YOU WANT TO DEAL WITH INSERTIONS
    // IN A DIFFERENT MANNER THEN WITH DELETIONS:
    // THE FOLLOWING IS WRONG FOR YOUR NEEDS:
    // // Ensure string2 (inner cycle) is longer_transpositionRow
    // if (string1.Length > string2.Length)
    // {
    //     var tmp = string1;
    //     string1 = string2;
    //     string2 = tmp;
    // }

    // Return trivial case - where string1 is contained within string2
    if (string2.Contains(string1))
        //all changes are insertions
        return string2.Length - string1.Length;

    // REVERSE CASE: STRING2 IS CONTAINED WITHIN STRING1
    if (string1.Contains(string2))
        //all changes are deletions which you don't count:
        return 0;

    var length1 = string1.Length;
    var length2 = string2.Length;

    // PAY ATTENTION TO THIS CHANGE!
    // length1+1 rows is way too much! You need only 3 rows (0, 1 and 2)
    // read my explanation below the code!
    // TOO MUCH ROWS: var d = new int[length1 + 1, length2 + 1];
    var d = new int[2, length2 + 1];

    // THIS INITIALIZATION COUNTS DELETIONS. YOU DONT WANT IT
    // or (var i = 0; i <= d.GetUpperBound(0); i++)
    //    d[i, 0] = i;

    // But you must initiate the first element of each row with 0:
    for (var i = 0; i <= 2; i++)
        d[i, 0] = 0;

    // This initialization counts insertions. You need it, but for
    // better consistency of code I call the variable j (not i):
    for (var j = 0; j <= d.GetUpperBound(1); j++)
        d[0, j] = j;

    // Now do the job:
    // for (var i = 1; i <= d.GetUpperBound(0); i++)
    for (var i = 1; i <= length1; i++)
    {
        //Here in this for-loop: add "%3" to evey term 
        // that is used as first index of d!

        var im1 = i - 1;
        var im2 = i - 2;
        var minDistance = threshold;
        for (var j = 1; j <= d.GetUpperBound(1); j++)
        {
            var jm1 = j - 1;
            var jm2 = j - 2;
            var cost = string1[im1] == string2[jm1] ? 0 : 1;

            // DON'T COUNT DELETIONS!  var del = d[im1, j] + 1;
            var ins = d[i % 3, jm1] + 1;
            var sub = d[im1 % 3, jm1] + cost;

            // Math.Min is slower than native code
            // d[i, j] = Math.Min(del, Math.Min(ins, sub));
            // DEL DOES NOT EXIST  
            // d[i, j] = del <= ins && del <= sub ? del : ins <= sub ? ins : sub;
            d[i % 3, j] = ins <= sub ? ins : sub;

            if (i > 1 && j > 1 && string1[im1] == string2[jm2] && string1[im2] == string2[jm1])
                d[i % 3, j] = Math.Min(d[i % 3, j], d[im2 % 3, jm2] + cost);

            if (d[i % 3, j] < minDistance)
                minDistance = d[i % 3, j];
        }

        if (minDistance > threshold)
            return int.MaxValue;
    }

    return d[length1 % 3, d.GetUpperBound(1)] > threshold
        ? int.MaxValue
        : d[length1 % 3, d.GetUpperBound(1)];
} 
```

* * *

**这是我为什么只需要 3 行的解释：**

看看这一行：

```
var d = new int[length1 + 1, length2 + 1]; 
```

如果一个字符串的长度为 n，而另一个字符串的长度为 m，那么您的代码需要一个 (n+1)*(m+1) 个整数的空间。每个整数需要 4 个字节。如果你的字符串很长，这会浪费内存。如果两个字符串都是 35.000 字节长，那么您将需要超过 4 GB 的内存！

在此代码中，您计算​​并写入 的新值`d[i,j]`。为此，您从其上邻居 ( `d[i,jm1]`)、左邻居 ( `d[im1,j]`)、左上邻居 ( `d[im1,jm1]`) 和最后从其双上双左邻居 ( `d[im2,jm2]`) 中读取值。因此，您只需要实际行和之前的 2 行中的值。

您永远不需要来自任何其他行的值。那么为什么要存储它们呢？三行就足够了，我的更改使您可以使用这 3 行，而不会随时读取任何错误的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T20:09:49.267

我建议不要重写这个特定的算法来处理“免费”编辑的特定情况。他们中的许多人从根本上简化了问题的概念，以至于度量标准无法传达任何有用的信息。

例如，当替换是免费的时，所有字符串之间的距离就是它们的长度之差。只需将较小的字符串转换为较大字符串的前缀并添加所需的字母。（您可以保证没有更小的距离，因为编辑距离的每个字符都需要插入一次。）

当转置是自由的问题减少到确定字母计数差异的总和。（由于所有字谜之间的距离为 0，因此对每个字符串中的字母进行排序并交换或删除较大字符串的非常见元素是最好的策略。数学论证类似于前面的例子。）

在插入和删除自由的情况下，任何两个字符串之间的编辑距离为零。如果只有插入或删除是自由的，这会破坏距离度量的对称性——在自由删除的情况下，从 a 到 aa 的距离为 1，而从 aa 到 a 的距离为 1。根据应用程序，这可能是可取的；但我不确定它是否是您感兴趣的东西。您将需要大大改变所提出的算法，因为它使提到的一个字符串总是比另一个字符串长的假设。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:37:06.413

尝试更改`var del = d[im1, j] + 1;`为`var del = d[im1, j];`，我认为这可以解决您的问题。

# facebook - 充当插件的 Facebook 应用程序

> ID：12027325
> 
> 赞同：-1
> 
> 时间：2012-08-19T14:34:50.977
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, facebook-apps

快速提问，是否可以为 facebook 编写一个插件式的应用程序？例如，我可以让我的应用程序更改 facebook 徽标或在新消息上添加新的 ding 声音吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:39:16.990

不。

您所说的是浏览器插件或用户脚本。Facebook 应用程序根本不处理 Facebook 界面......

# macos - 如何在 OSX 上安装 JSON.pm perl 模块

> ID：12027327
> 
> 赞同：17
> 
> 时间：2012-08-19T14:34:51.523
> 
> 标签：macos, perl, perl-module

我正在尝试使用 JS gettext 库 ( [http://jsgettext.berlios.de/](http://jsgettext.berlios.de/) ) 中的 po2json 解析器/转换器，但是当我尝试转换时出现此错误：

```
Can't locate JSON.pm in @INC (@INC contains: /Library/Perl/5.12/darwin-thread-multi-2level /Library/Perl/5.12 /Network/Library/Perl/5.12/darwin-thread-multi-2level /Network/Library/Perl/5.12 /Library/Perl/Updates/5.12.4 /System/Library/Perl/5.12/darwin-thread-multi-2level /System/Library/Perl/5.12 /System/Library/Perl/Extras/5.12/darwin-thread-multi-2level /System/Library/Perl/Extras/5.12 .) at ./po2json line 23.
BEGIN failed--compilation aborted at ./po2json line 23. 
```

据我了解，我缺少一个 perl 模块，即 JSON.pm，我认为是这个：[http ://cpansearch.perl.org/src/MAKAMAKA/JSON-2.53/lib/JSON.pm](http://cpansearch.perl.org/src/MAKAMAKA/JSON-2.53/lib/JSON.pm)

现在，我如何在 OSX 上安装它？我正在使用山狮。

我试着做`cpan install JSON`，但它不起作用，我收到以下错误：

```
Writing Makefile for JSON
  MAKAMAKA/JSON-2.53.tar.gz
  make -- NOT OK
'YAML' not installed, will not store persistent state
Running make test
  Can't test without successful make
Running make install
  Make had returned bad status, install seems impossible 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-05-05T07:30:47.613

使用[自制软件](http://mxcl.github.io/homebrew/)安装 cpanm：

`brew install cpanm`

然后你可以安装 JSON

`sudo cpanm install JSON`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-19T14:41:21.157

输出说`make`没有返回成功。可能是由于一些依赖。尝试使用 cpanm [http://search.cpan.org/~miyagawa/App-cpanminus-1.5017/bin/cpanm](http://search.cpan.org/~miyagawa/App-cpanminus-1.5017/bin/cpanm)，它真的很方便并且引导得很好（不需要安装其他东西）。

使用这个安装：

`curl -L http://cpanmin.us | perl - --sudo App::cpanminus`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-05-23T21:08:24.290

`cpan install JSON`全部大写的 JSON 使它对我有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-11T04:52:04.660

我知道这是一个老话题，但是在发现我在尝试使用 zap2xml（基于 perl）时需要 JSON 之后想分享我的解决方案。通过 Homebrew 安装 perl 后，我收到错误消息：“ *Can't locate JSON.pm in @INC... ”。*

这就是我通过 Homebrew 安装 JSON 的方式。我还将包括安装 Homebrew 所需的步骤（对于那些想知道的人）。;)

**先决条件：**

**从 App Store 安装 Xcode（下载）：**

[https://itunes.apple.com/us/app/xcode/id497799835](https://itunes.apple.com/us/app/xcode/id497799835)

**为 Xcode 安装命令行工具（在终端中运行）：**

`xcode-select --install`

**安装 Homebrew（在终端中运行）：**

`ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"`

**更新 Homebrew（在终端中运行）：**

`brew update`

`brew upgrade`

`brew doctor`（brew医生发现的正确问题。医生将给出说明。：P）

**安装 cpanminus（在终端中运行）：**

`brew install cpanm`

**检查 perl（在终端中运行）：**

`which perl`

`perl -V`（带有大写字母-V）

**检查/安装 JSON 模块（在终端中运行）：**

`sudo cpanm -v JSON`

**完毕。**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-29T09:31:45.093

以下对我有用：
在终端上运行：
`sudo perl -MCPAN -e shell`

你应该得到 cpan shell 提示符并在 cpan shell 的 commond 下运行：

```
cpan[1]> install JSON 
```

问候，
阿南德·乔贝

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-11-28T03:18:49.253

这种方式是可以的，遵循命令：`sudo apt-get install libjson-perl`

# java - 弹簧自动装配/Java

> ID：12027328
> 
> 赞同：0
> 
> 时间：2012-08-19T14:35:06.820
> 
> 标签：java, spring, autowired

如果我有两个类，例如：

```
Class A {
     public String importantValue = "stringvalue";

     @Autowire
     public B b;
}

@Component
@Scope("prototype");
Class B {
     // This should be set automatically
     // from IOC Container upon injection.
     public String importantValueFromA;
} 
```

这甚至可能吗？一旦 B 类被注入到 A 中，它应该自动设置 B 中的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T14:40:24.420

你想让班级`A`对注入的班级做一些设置`B`吗？这很简单：

```
@Service
class A {
    private String importantValue = "stringvalue";

    @Autowire
    private B b;

    @PostConstruct
    public void initB() {
        b.importantValueFromA = this.importantValue;
    }
} 
```

显然你不能`b.importantValueFromA`在`A.A`构造函数中访问，因为注入还没有发生。但是`@PostConstruct`回调保证在注入后被调用。

另一种方法是使用 setter 注入，但感觉有点 hacky：

```
private B b;

@Autowire
public void setB(B b) {
    this.b = b;
    b.importantValueFromA = this.importantValue;
} 
```

两个建议：

*   保留您的字段`private`并使用设置器/方法来访问它们。
*   将原型作用域 bean 注入单例 bean 可能会产生一些意想不到的结果。可以说只`B`创建一个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:39:49.097

不。B 在 A 之前创建（因为 A 依赖于 B）所以它不会更新值本身。您必须使用构造函数注入：

```
Class A {
     public String importantValue = "stringvalue";

     @Autowire
     public A(B b) {
          b.importantValueFromA = this.importantValue;
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T15:00:52.430

做这样的事情怎么样：

将您的 B 类声明为范围代理，其底层将向 A 公开代理而不是真正的 B，并将尊重原型范围。

```
@Component
@Scope(value="prototype", proxyMode=ScopedProxyMode.TARGET_CLASS)
class B { 
```

然后您可以通过这种方式在 B 中注入 A 的属性：

```
@Value("#{a.importantValue}")
private String importantValueFromA; 
```

这是一个完整的工作示例：

[https://gist.github.com/3395329](https://gist.github.com/3395329)

# sql - sql server 动态计算字段

> ID：12027332
> 
> 赞同：1
> 
> 时间：2012-08-19T14:35:37.030
> 
> 标签：sql, sql-server-2000

我需要一个基于 sql server 2000 中每条记录的计算字段。例如有一个这样的表：

```
col1 col2 calcfield
-------------------
1     2   col1+col2
3     5   col1*col2 
```

我需要一个查询来计算每条记录的最后一个字段，例如：

```
1     2     3
3     5     15 
```

实际上这是一个为某些人计算数字的系统。有一些参数存储在表格的字段中，还有另一个字段存储如何根据这些参数计算数字（即公式）。每个人都有不同的参数和不同的公式。我想设计一个可以直接从表中提取参数和计算列的查询

有没有办法做到这一点，如果有什么是最好和最快的方法......

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:19:44.457

您只需进行数学运算并为其命名。例：

```
SELECT 
  field1,
  field2,
  field1 + field2 AS 'CalcField'
FROM table 
```

如果您需要根据记录进行不同的计算，请使用 CASE 语句：

```
SELECT 
  field1,
  field2,
  CASE 
    WHEN (some condition) THEN field1 + field2 
    WHEN (some other condition) THEN field1 * field2
    ELSE (some default value or calculation)
    END AS 'CalcField'
FROM table 
```

# c# - asp.net mysql数据库中的两个下拉列表和一个表

> ID：12027342
> 
> 赞同：0
> 
> 时间：2012-08-19T14:37:08.550
> 
> 标签：c#, asp.net, mysql, webforms

我是 asp.net 的新手。我正在尝试创建两个链接的下拉列表，即如果第一个更改了，那么第二个列表的内容应该相应地更改。此外，基于这些选择，我想显示一个数据表（请建议使用列表视图、网格视图或中继器）。我的数据库在 mysql.using c#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:51:08.050

“我是新手”这句话在这里无关紧要，因为原则都是一样的。您要创建两个链接的下拉列表。就这样做吧。

那你会在php中做什么？你猜对了，对服务器进行 ajax 调用。

在这里，您有多种选择。由于您来自 php 背景，我建议您使用 jquery.ajax 进行调用。因此，您将使用所需的值创建第一个下拉列表，并使用 jquery 挂钩事件，以便在用户更改所选值时进行处理。使用 jquery 调用具有所选值的 Web 服务。您从 web 服务收到答案（搜索教程，网上有很多教程）并再次使用 jquery，这次填充第二个下拉列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:49:55.260

你基本上需要做这样的事情：

```
<asp:DropDownList ID="DDL1" AutoPostBack="true" runat="server" OnSelectedIndexChanged="DDL1_SelectedIndexChanged">
</asp:DropDownList> 
```

在代码隐藏中，您基本上在调用的方法中为您的第二个下拉列表进行绑定`DDL1_SelectedIndexChanged`（即在有人更改第一个下拉列表中的选择之后）

```
protected void DDL1_SelectedIndexChanged(object sender, EventArgs e)
{
  // databind for second drop down list
} 
```

# c# - 如何将字符串列表转换为 C# 中的类列表？

> ID：12027345
> 
> 赞同：0
> 
> 时间：2012-08-19T14:37:17.980
> 
> 标签：c#, string, list

我有一个`string`这样的列表：

```
public List<string> Subs { get; set; } 
```

我有一个`list<Category> Cat { get; set; }`此类：

```
public class Category
    {
        public int ID { get; set; }

        public string Name { get; set; }

        public int SubCat_ID { get; set; }
    } 
```

我只需要将中的所有值`list<string> Subs`放入`List<Category> Cat`. 当然， 中的每个字符串都`list<string>`应该放在 的每个*Name* 参数中`List<Category>`。

那么它是如何完成的呢？是否有任何转换方法可以做到这一点？它是如何工作的 ？

提前致谢 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T14:41:20.457

是的，你可以用 LINQ 做到这一点：

```
var cats = (from sub in Subs
            select new Category
            {
                Name = sub
            }).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T14:44:31.423

您可以使用该类的`ConvertAll`方法`List`：

```
Cat = Subs.ConvertAll(s => new Category { Name = s }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T14:54:12.153

如果两个列表都存在，则应使用 Zip：

```
 var result = categories.Zip(subs, (cate, sub) =>
            {
                cate.Name = sub;
                return cate;
            }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T14:44:03.313

使用“选择”可枚举扩展方法：

[http://msdn.microsoft.com/en-us/library/bb548891.aspx](http://msdn.microsoft.com/en-us/library/bb548891.aspx)

然后是这样的“ToList()”：

```
var newList = Subs.Select(name => new Category { Name = name}).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T14:41:33.987

你必须手动创建一个函数，否则程序很难理解列表中的字符串对应的属性是什么。

# oracle - 嵌入在 Outlook 电子邮件中的 Apex 交互式报告

> ID：12027351
> 
> 赞同：0
> 
> 时间：2012-08-19T14:38:09.410
> 
> 标签：oracle, email, outlook, report, embed

我想在 Outlook 电子邮件中嵌入 Apex 交互式报告。有人知道我该怎么做吗？

提前非常感谢。

最好的问候 FS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:19:57.877

我不相信有任何方法可以做到这一点。您不能真正通过电子邮件将表单提交回服务器，也不能使用 Javascript。没有这些东西，你就没有一个非常互动的报告。

不过，您可以使用交互式报告添加指向页面的链接。

# ios - iOS：如何通过按下按钮向我的 FetchedResultsController 添加/删除 NSPredicate？

> ID：12027353
> 
> 赞同：1
> 
> 时间：2012-08-19T14:39:01.613
> 
> 标签：ios, uitableview, toggle, nspredicate

我有一个按钮，目前已设置为切换按钮。它目前仅在按下时更改其文本。我想让它过滤掉我的 uitableview 中的条目。我猜我会通过向我的 fetchedresultscontroller 添加一个 NSPredicate 来做到这一点，但我不确定如何做到这一点。如果这不是执行此任务的正确方法，任何人都知道我如何能够做到这一点或将我送到正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:57:19.903

单击按钮时，您需要释放 fetchedresultscontroller 的实例（如果在内存中），因为您需要在其中重新创建带有 Predicate 的 FetchRequest。

之后，您可以调用执行 api。因为，fetchedresultscontroller 将需要一个新的谓词。

首选是使用来自 Core Data 的 1 级 fetchedResultsController api 调用。因为与过滤内存中已加载对象的对象相比，从数据库中获取成本高昂。

在您的情况下，使用 fetchedresultscontroller 来获取所有必需的 api，并且根据切换，只需在内存数组/记录上使用谓词。这将提高性能，其次，由于记录将是核心数据管理对象，因此如果它们不再使用，它​​们可能会出错。

# c# - 在 C# 中使用 D DLL 时出现 BadImageFormatException

> ID：12027354
> 
> 赞同：0
> 
> 时间：2012-08-19T14:39:11.397
> 
> 标签：c#, dll, d, badimageformatexception

因此，作为一个实验，我决定尝试找出是否可以在 C# 中使用 D DLL。我做了一些谷歌搜索，找到[了这个](http://www.digitalmars.com/d/archives/digitalmars/D/C_Interop_128362.html)线程。我复制（键入，而不是 C&P）在 C# 的第 4 篇文章中为该类提供的代码`DString`，并使用[此处](http://dlang.org/dll.html#Cinterface)的 DllMain() 代码。

我的 D 代码：

```
// dllmain.d
import std.c.windows.windows;
import core.sys.windows.dll;

__gshared HINSTANCE g_hInst;

extern (Windows) {
    BOOL DllMain(HINSTANCE hInstance, ULONG ulReason, LPVOID pvReserved) {
        switch (ulReason)
        {
            case DLL_PROCESS_ATTACH:
                g_hInst = hInstance;
                dll_process_attach(hInstance, true);
                break;

            case DLL_PROCESS_DETACH:
                dll_process_detach(hInstance, true);
                break;

            case DLL_THREAD_ATTACH:
                dll_thread_attach(true, true);
                break;

            case DLL_THREAD_DETACH:
                dll_thread_detach(true, true);
                break;
        }
        return true;
    }
} 
```

以及我在 C# 中导入的实际函数：

```
// hello.d
module sbned;

import std.string;

export extern(C) {
    ref string helloWorld() {
        return "Hello World!"; }
} 
```

像这样导入函数 helloWorld()：

```
[DllImport("sbned.dll")]
[return: MarshalAs(UnmanagedType.CustomMarshaler, MarshalTypeRef=typeof(DString))]
public static extern string helloWorld(); 
```

这一切都编译得很好，D 或 C# 编译器都没有错误，但是每当我尝试运行程序（有或没有调试器）时，它都会崩溃。使用调试器时，它给了我以下错误：

`BadImageFormatException was unhandled`
`An attempt was made to load a program with an incorrect format. (Exception from HRESULT: 0x8007000B)`

任何人都可以了解正在发生的事情，以及我该如何解决它？

# google-apps-script - 将时间格式化为 appendTable（Google Apps 脚本）

> ID：12027359
> 
> 赞同：0
> 
> 时间：2012-08-19T14:40:13.080
> 
> 标签：google-apps-script, google-sheets

我对 Google Apps 脚本有疑问。

我搜索了许多论坛和文档，但没有找到解决方案。

我有这个代码： `var tablecell2 = table1row1.appendTableCell([range[i][1]]);`

节目：`Sun Aug 19 2012 16:30:51 GMT+0200 (CEST)`

我想要时间，例如：`16:30:51`

我怎么做？

谢谢

拉斐尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:58:02.990

您需要做的就是相应地格式化日期对象。请查看[Utilties.formatDate](https://developers.google.com/apps-script/class_utilities#formatDate)函数。

# php - 如果页面加载时间超过 10 秒，如何刷新页面？

> ID：12027372
> 
> 赞同：3
> 
> 时间：2012-08-19T14:41:48.930
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [主体 onLoad 上的退出功能](https://stackoverflow.com/questions/12019126/quit-function-on-body-onload)

如果页面加载时间超过 10 秒，我想刷新我的页面。解决方案可以是 PHP 或 JavaScript/jQuery。我怎样才能做到这一点？

```
<meta http-equiv="refresh" content="0"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T14:45:36.010

将`<meta http-equiv="refresh" content="10">`每 10 秒重新加载一次页面（第一次是页面加载后 10 秒）。

但是，直到页面加载*后才能访问它。*

就 PHP 而言，您可以查看 PHP 脚本的执行时间是否超过 10 秒（通过在代码的开头和结尾使用片段来捕获时间戳），但如果执行的输出耗时超过 10 秒，则无法查看秒为用户加载。

您无能为力来查看用户的连接速度是否很慢。

**[编辑：]**您*可以*在代码开头设置一个时间戳并将其回显给用户，并让一些 javascript 检查它是否在请求初始化后超过 10 秒，但这可能会开始有问题，因为用户可能会或可能不会启用 JS；然后你进入潜在的检查时区等。整个编辑开始很快变得“yicky”，但这是你可以考虑的另一种途径，所以我想我会添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:46:30.593

尝试：

```
var redirect = setTimeout(function(){
                  document.location.reload(true)
               }, 10000)

window.onload = function(){
    clearTimeout(redirect);
} 
```

# android - 相对布局堆栈按钮

> ID：12027375
> 
> 赞同：0
> 
> 时间：2012-08-19T14:42:09.287
> 
> 标签：android, android-layout, xamarin.android

我想对齐包裹在线性布局内的相对布局底部的两个按钮。

我无法让查看收藏夹按钮位于搜索按钮的顶部。如图所示，有一个很大的空间：

![在此处输入图像描述](../Images/47ee915a87641bd19f5e1e0d0ebe4660.png)

这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<TextView
    android:text="@string/SearchRestaurantsCity"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/tvRestaurantSearchCity" />
<EditText
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/etRestaurantSearchCity" />
<TextView
    android:text="@string/SearchRestaurantsState"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/tvRestaurantSearchState" />
<EditText
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/etRestaurantSearchState" />
<TextView
    android:text="@string/SearchRestaurantsCategories"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/tvRestaurantSearchCategories" />
<Spinner
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/spRestaurantSearchCategories" />
<RelativeLayout
    android:id="@+id/InnerRelativeLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true">
    <Button
        android:text="@string/btnViewFavoriteRestaurants"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btnViewFavoriteRestaurants"
        style="@style/ButtonText"
        android:padding="5dp"
        android:layout_below="btnSearchRestaurants" />
    <Button
        android:text="@string/btnSearchRestaurants"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/btnSearchRestaurants"
        style="@style/ButtonText"
        android:layout_alignParentBottom="true"
        android:padding="5dp" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:52:48.370

XML 有两个问题。

对于初学者，您不能`btnSearchRestaurants`在定义之前引用按钮。

其次，您已定义`btnSearchRestaurants`为对齐父底部，然后尝试定义`btnViewFavoriteRestaurants`该按钮下方的位置。它应该在它上面（根据您的描述）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:52:08.270

我认为问题出在

```
android:layout_below="btnSearchRestaurants" 
```

它应该是

```
android:layout_below="@id/btnSearchRestaurants" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T15:01:35.847

如果您尝试将我可以看到的第一个按钮放在 RelativeLayout 中，我会尝试更改以下行：

android:layout_below="btnSearchRestaurants" />

对于这个：

android:layout_above="@+id/btnSearchRestaurants" />

部分空间是为我在 LinearLayout 中可以看到的所有布局元素保留的，而 + 是因为按钮 btnSearchRestaurants 在下方，因此尚未创建

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T12:48:25.520

在您的 xml 代码中，我认为您应该更正这一行

```
android:layout_below="btnSearchRestaurants" 
```

如您所愿，它应该位于“搜索餐厅”按钮上方

```
android:layout_above="@id/btnSearchRestaurants" 
```

出于明显的原因，我将其从下方更改为上方（您希望它位于另一个按钮上方而不是下方）并添加了@id/，因为您将搜索按钮 ID。

# mysql - 在这个 MySQL 过程中，我怎样才能在列名中保持干燥？

> ID：12027377
> 
> 赞同：5
> 
> 时间：2012-08-19T14:42:11.657
> 
> 标签：mysql, sql, stored-procedures

我是referencig`name`和表格`description`的`user_id`列`meta`。未来两次，甚至更多（谁知道？）。这些列用于计算我的元资源的 ETag。

添加一列有助于将来计算 ETag 将迫使我将代码更改 N 次，这很糟糕。

有没有办法让它干燥并将这些列名存储在其他地方？因为我想`INSERT`在执行元数据时也使用这些列名。

```
IF only = true THEN
    -- Calculate ETag on meta fields only
    UPDATE meta
    SET etag = etag(CONCAT(name, description, user_id))
    WHERE id = meta_id;
ELSE
    -- Calculate Etag on meta fields and meta customers
    BEGIN
        DECLARE c_etags VARCHAR(32);

        -- Compute c_etags

        UPDATE meta
        SET etag = etag(CONCAT(etag(name, description, user_id), c_etags))
        WHERE id = meta_id;
    END;
END IF; 
```

免责声明：此代码未经测试，我对 MySQL 的东西很陌生，除了简单的语句。

**编辑**：`etag`是`MD5`MySQL 函数。也许这是一种选择：

```
CREATE PROCEDURE set_meta_etag(IN meta_id INT, IN related TEXT)
    NOT DETERMINISTIC
BEGIN
    UPDATE meta
    SET etag = etag(CONCAT(name, description, user_id,
        IF(related IS NOT NULL, related, '')))
    WHERE id = meta_id;
END //

-- First call
CALL set_meta_etag(meta_id, NULL);

-- Second call
CALL set_meta_etag(meta_id, c_etags); 
```

但它不适用于`INSERT`声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T17:50:06.610

显而易见的事情（foreach 列，如果它是我想要的，使用它来帮助制作 etag）在 SQL 中无法轻松工作，因为 SQL 从历史上看并不考虑存储在变量中的列名。

您可以用您最喜欢的非 SQL 编程语言（Java、PHP 等）编写程序来创建并定义您的过程。

如果您愿意做这项工作并承受轻微的性能损失，您也可以使用所谓的“动态 sql”来执行此操作。看

[如何在 MySQL 存储过程中使用动态 SQL](https://stackoverflow.com/questions/190776/how-to-have-dynamic-sql-in-mysql-stored-procedure)

有关如何在存储过程中使用语句的`PREPARE`信息。`EXECUTE`

顺便说一句，我在构建系统方面取得了很好的成功，这些系统在列内容中存储了各种元数据。例如，您可以编写代码在列内容中查找字符串“[etag]”。列的注释存储在

```
information_schema.COLUMNS.COLUMN_COMMENT 
```

并且在您的程序启动时非常容易处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:45:41.793

如果您知道这仅限于一张表，您可以添加一个触发器。使用`AFTER`触发器应该允许您的存储过程同时适用于`INSERT`和`UPDATE`。请参阅[MySQL Fire Trigger 的 Insert 和 Update](https://stackoverflow.com/questions/1318224/mysql-fire-trigger-for-both-insert-and-update)。

# php - 添加 PHP 代码的 Javascript 下拉框

> ID：12027380
> 
> 赞同：2
> 
> 时间：2012-08-19T14:43:17.620
> 
> 标签：php, javascript, select, drop-down-menu, options

```
var abc = new Array('Perth','Auckland');

case '1':
    document.getElementById(q15).options.length = 0;
    for (i = 0; i < abc.length; i++) {
        createOption(document.getElementById(q15), abc[i], abc.[i]);
    }
break;

var opt = document.createElement('option');
    opt.value = value;
    opt.text = text;
ddl.options.add(opt); 
```

上面的代码输出如下：

```
<option value="1">Perth</option>
<option value="2">Auckland</option> 
```

但是，我需要添加一些 PHP 来计算页面加载时是否选择了该选项，因此输出应如下所示：

```
<option value="1" <?php if ($results['abc']==1) echo "selected";?>>Perth</option>
<option value="2" <?php if ($results['abc']==2) echo "selected";?>>Auckland</option> 
```

但是，我正在努力使用`Selected`Javascript 中的选项来添加这个选项并将其添加到下拉列表中。

任何帮助表示赞赏。

谢谢，

H。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:47:05.633

两件事情，

第一的，

您可以`selected`通过执行使用 JavaScript 设置属性`domelement.setAttribute("selected","selected");`

我认为这就是您最初的问题所在。

第二，

您不能使用 javascript 添加 PHP 代码，因为 PHP 在您的浏览器获取代码之前在服务器上运行。

我会使用 PHP 将`$results`变量存储到 javascript 变量中并使用它来设置`selected`.

```
var results = ["<?php echo implode ('","', $results); ?>"]   /*Get the results array from PHP to javascript.*/

var abc = new Array('Perth','Auckland');

case '1':
    document.getElementById(q15).options.length = 0;
    for (i = 0; i < abc.length; i++) {
        createOption(document.getElementById(q15), abc[i], abc.[i]);
    }
break;

var opt = document.createElement('option');
    opt.value = value;
    opt.text = text;
ddl.options.add(opt);
/*add the "selected" attribute to options that results['abc'] == <number>*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:04:02.937

`$results`来自哪里？如果它是您在页面创建期间在 PHP 逻辑中操作的东西，那么我假设您专门询问为什么选择项没有被正确选择？

```
<option value="1" <?php if ($results['abc']==1) echo "selected";?>>Perth</option> 
```

这实际上应该将 selected 属性设置为“selected”值（而不是单独打印选定的单词）。所以，它应该是：

```
<option value="1" <?php if ($results['abc']==1) echo "selected=\"selected\"";?>>Perth</option> 
```

# asp.net - 如何向 Azure SQL 的 ASP.NET Membership Provider 添加重试逻辑？

> ID：12027383
> 
> 赞同：4
> 
> 时间：2012-08-19T14:43:32.840
> 
> 标签：asp.net, azure, asp.net-membership, azure-sql-database, membership-provider

我们在 Azure SQL 数据库上有一个基于 ASP.net sqlMembershipProvider 的用户数据库。很明显，开箱即用的 sqlMembershipProvider 4.0 没有 Azure SQL 连接所需的重试逻辑，这些连接可能由于限制而退出或过期。

可以实现我们自己的具有此功能的成员资格提供程序，但它必须与标准 sqlMembershipProvider 4.0 完全相同的数据库交互才能与我们数据库中的现有用户一起工作。但是，为此需要查看原始 sqlMembershipProvider 4.0 的源代码，此代码自 2.0 版以来尚未公开发布，所以我的问题是：

将重试逻辑放入 sqlMembershipProvider 的最省力的方法是什么？或者这会反映 System.web.security.sqlMembershipProvider 中的 sqlMembershipProvider 4.0 的代码，并创建一个与 sqlMembershipProvider 具有相同功能但使用重试逻辑（例如 Microsoft 的 TransientFaultHandling ReliableSqlConnection）的自定义 membersProvider？考虑到微软对 asp.net 库的许可，做这样的事情（反映和创建类似的代码但具有附加功能）是否合法。系统.Web？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T15:09:13.070

我认为今天最好的解决方案是继承 System.Web.Providers （[ASP.NET Universal Providers 程序](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)集）中可用的提供程序，并为每个公共方法简单地注入重试策略：

```
public class MyDefaultProfileProvider : System.Web.Providers.DefaultProfileProvider
{
    private RetryPolicy retryPolicy;

    public MyDefaultProfileProvider()
    {
        var retryStrategy = new Incremental(5, TimeSpan.FromSeconds(1), TimeSpan.FromSeconds(2));
        this.retryPolicy = new RetryPolicy<SqlAzureTransientErrorDetectionStrategy>(retryStrategy);
        retryPolicy.Retrying += retryPolicy_Retrying;
    }

    private void retryPolicy_Retrying(object sender, RetryingEventArgs e)
    {
        // Log, whatever...
    }

    public override System.Web.Profile.ProfileInfoCollection GetAllProfiles(System.Web.Profile.ProfileAuthenticationOption authenticationOption, int pageIndex, int pageSize, out int totalRecords)
    {
        int tempTotalRecords = 0;
        var profiles = retryPolicy.ExecuteAction(() =>
        {
            return base.GetAllProfiles(authenticationOption, pageIndex, pageSize, out tempTotalRecords);
        });
        totalRecords = tempTotalRecords;
        return profiles;
    }

    ...
} 
```

要知道重用代码是否合法，您应该[查看许可证](http://www.microsoft.com/web/webpi/eula/providers_1_eula_enu.htm)。

# c# - 我无法使 ValidateInput(False) 工作 - 从客户端检测到潜在危险的 Request.Form 值

> ID：12027389
> 
> 赞同：4
> 
> 时间：2012-08-19T14:44:44.700
> 
> 标签：c#, asp.net-mvc, razor

我尝试了很多组合，但无法在此代码块上关闭验证

```
[ValidateInput(false)]
    public ActionResult aSavePageCopy()
    {
        aLoggedIn();
        int id = Convert.ToInt32(Request.Form["id"]);
        PagesDataContext pdc = new PagesDataContext();
        Page p = pdc.Pages.Single(row => row.ID == id);

        p.PageCopy = Request.Form["PageCopy"];

        pdc.SubmitChanges();

        return Redirect("/Admin/aViewPages");
    } 
```

似乎这对其他人有用，所以我看不出我在这里缺少什么。我得到的错误是从客户端检测到潜在危险的 Request.Form 值

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T14:51:17.127

您可以使用`FormCollection`which is safe to access 而不是`Request.Form`（但请不要使用它，请参阅下面的问题的真正解决方案）：

```
[ValidateInput(false)]
public ActionResult aSavePageCopy(FormCollection fc)
{
    aLoggedIn();
    int id = Convert.ToInt32(fc["id"]);
    PagesDataContext pdc = new PagesDataContext();
    Page p = pdc.Pages.Single(row => row.ID == id);

    p.PageCopy = fc["PageCopy"];

    pdc.SubmitChanges();

    return Redirect("/Admin/aViewPages");
} 
```

当然，这是解决问题的绝对荒谬和糟糕的方法。正确的做法是使用视图模型（当然）：

```
public class MyViewModel
{
    public int Id { get; set; }
    public string PageCopy { get; set; }
} 
```

进而：

```
[ValidateInput(false)]
public ActionResult aSavePageCopy(MyViewModel model)
{
    aLoggedIn();
    PagesDataContext pdc = new PagesDataContext();
    Page p = pdc.Pages.Single(row => row.ID == model.Id);

    p.PageCopy = model.PageCopy;

    pdc.SubmitChanges();

    return Redirect("/Admin/aViewPages");
} 
```

或者，如果您使用的是 ASP.NET MVC 3，并且只想对视图模型上的单个属性禁用验证，而不是对整个请求执行此操作，则可以使用属性装饰此视图模型`[AllowHtml]`属性：

```
public class MyViewModel
{
    public int Id { get; set; }
    [AllowHtml]
    public string PageCopy { get; set; }
} 
```

然后您不再需要`[ValidateInput(false)]`您的操作的属性：

```
public ActionResult aSavePageCopy(MyViewModel model)
{
    aLoggedIn();
    PagesDataContext pdc = new PagesDataContext();
    Page p = pdc.Pages.Single(row => row.ID == model.Id);

    p.PageCopy = model.PageCopy;

    pdc.SubmitChanges();

    return Redirect("/Admin/aViewPages");
} 
```

不仅我们已经解决了这个问题，而且正如您所看到的，您不再需要在控制器操作中编写任何管道代码来解析整数和模型绑定器所扮演的角色。

# php - Wordpress IXR_Date 错误日期

> ID：12027390
> 
> 赞同：0
> 
> 时间：2012-08-19T14:44:47.057
> 
> 标签：php, wordpress, strtotime

这是我的 php 代码：

```
echo date('m/d/Y h:i:s A T'),"<br>";
$match_date = strtotime(date('m/d/Y h:i:s A T'));
echo "match_date= ", $match_date, "<br>";

$test = new IXR_Date($match_date);
print_r($test); 
```

但返回错误的月份和日期值：

```
08/19/2012 07:38:10 AM PDT
match_date= 1345387090
IXR_Date Object ( [year] => 2012 [month] => 2012 [day] => 2012 [hour] => 07 [minute] => 38 [second] => 10 ) 
```

怎么了？如何正确使用 IXR_Date？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:10:56.147

使用over`time()`的函数插入：`strtotime``date`

```
$test = new IXR_Date(time()); 
```

# c++ - OpenCV RGB 比较

> ID：12027391
> 
> 赞同：1
> 
> 时间：2012-08-19T14:44:48.927
> 
> 标签：c++, opencv, compare, rgb, pixel

我正在尝试获取两张图片之间的差异数量。当我比较 2 个灰度图像时，pixDiff <> 0 但当涉及 RGB 时，pixDiff 始终为 0。

我使用了 openCV 的比较和自定义循环。

```
Mat frame, oldFrame;
cap >> oldFrame;

if(analyseMod == MONOCHROME)
    cvtColor(oldFrame, oldFrame, CV_BGR2GRAY);

nbChannels = oldFrame.channels();

while(1)
{
    pixDiff = 0;
    cap >> frame;

    //Test diff
    Mat diff;
    compare(oldFrame, frame, diff, CMP_NE);
    imshow("video 0", diff);
    imshow("video 1", frame);

    if(analyseMod == MONOCHROME)
    {
        cvtColor(frame, frame, CV_BGR2GRAY);

        for(int i=0; i<frame.rows; i++)
            for(int j=0; j<frame.cols; j++)
                if(frame.at<uchar>(i,j) < oldFrame.at<uchar>(i,j) - similarPixelTolerance || frame.at<uchar>(i,j) > oldFrame.at<uchar>(i,j) + similarPixelTolerance)
                    pixDiff++;
    }
    else if(analyseMod == RGB)
    {
        uint8_t *f = (uint8_t *)frame.data;
        uint8_t *o = (uint8_t *)oldFrame.data;

        for(int i=0; i<frame.rows; i++)
        {
            for(int j=0; j<frame.cols; j++)
            {
                if(f[nbChannels*i*frame.cols + j + RED] < o[nbChannels*i*oldFrame.cols + j + RED])
                    pixDiff++;
            }
        }
    }          

    frame.copyTo(oldFrame);

    cout << pixDiff;
    if(waitKey(30) >= 0) break;
} 
```

谢谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T17:02:45.820

我还是不明白，你为什么不在 RGB 情况下使用你的增量，但如果你想分别考虑颜色通道，这里是两种情况的解决方案。单色情况设置`CN`为 1，RGB 情况设置为 3。

```
const int CN = 3; // 3 for RGB, 1 for monochrome

uint8_t *f = frame.ptr<uint8_t>();
uint8_t *o = oldFrame.ptr<uint8_t>();

for(int i = 0; i < frame.rows; ++i)
{
  for(int j = 0; j < frame.cols; ++j)
  {
    for (int c = 0; c < CN; ++c)
    {
      if (abs(*f - *o) > similarPixelTolerance) ++pxDiff;
      ++f, ++o;
    }
  }
} 
```

以这种方式访问​​像素比调用`at`每个像素更有效。唯一可能的问题是图像中有一些填充，但默认情况下 OpenCV 使用连续分配。

# wordpress - WP_Query 和标签 ID

> ID：12027396
> 
> 赞同：0
> 
> 时间：2012-08-19T14:46:06.120
> 
> 标签：wordpress, loops

我在尝试使用 tag_id 作为过滤器在 Wordpress 中构建以下查询时遇到问题：

```
 <?php 
        $the_query = new WP_Query( array ( 
        'posts_per_page' => '-1', 
        'tag_id' => '' 
        ) );
        while ( $the_query->have_posts() ) : $the_query->the_post();
    ?> 
```

如您所见，“tag_id”值是空的，因为我试图从这里检索值：

```
 <?php echo of_get_option('slideshow-tags', 'no entry' ); ?> 
```

此回声返回一个值，因此它可以工作，但我不知道如何使其适应查询而不会出现 php 错误。

我试过：

```
 <?php 
        $the_query = new WP_Query( array ( 
        'posts_per_page' => '-1', 
        'tag_id' => 'echo of_get_option('slideshow-tags', 'no entry' );             '
        ) );
              while ( $the_query->have_posts() ) : $the_query->the_post();
    ?> 
```

但它不会工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:51:36.203

尝试使用这个：

```
$code_to_display = of_get_option('slideshow-tags', 'no entry' );
'tag_id' => '$code_to_display' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T15:00:19.070

你不想`echo`返回的值`of_get_option`，你想在你的数组中使用它：

```
$the_query = new WP_Query(array( 
    'posts_per_page' => -1, 
    'tag_id' => of_get_option('slideshow-tags', 'no entry')
));

// Now just do the loop... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-28T21:11:32.903

这是 OP 的答案，添加到问题中，并移至此处以符合站点指南。

* * *

以下是未来参考的答案：

```
 <?php 
        $the_query = new WP_Query( array ( 
        'posts_per_page' => '-1', 
        'tag_id' => of_get_option('slideshow-tags', 'no entry') 
        ) );
        while ( $the_query->have_posts() ) : $the_query->the_post();
        ?> 
```

# java - 为什么我的 Java 字符串用空值填充？

> ID：12027397
> 
> 赞同：1
> 
> 时间：2012-08-19T14:46:12.513
> 
> 标签：java, android

我有以下代码，从方法中复制/粘贴：

```
String harmonicFile;
...
...
harmonicFile = String.format("%04d%s",this.number, this.suffix.toUpperCase()) + ".tch"; 
```

结果***看起来***不错，但我有一些时髦：

我将此字符串传递给另一个方法，其中包括：

```
if(filename.equals(file)){
   return file;
} 
```

fileName 是传入的值，file 是资产文件系统的匹配项。假设文件是​​“0062.tch”。在 Intellij IDEA 调试器中检查文件名显示它等于“0062.tch”，但返回语句从未被命中。仔细检查，我可以看到文件名填充了 8 个空字符 (\u0000)。

我有两个问题：

1.  为什么要填充字符串？

2.  在 IDEA 中，中断 if 语句然后使用表达式评估器 (Alt-F8) 显示 filename.equals(file) 为真，但在运行时单步执行我的代码表明它不是。我认为这是 IDEA 评估表达式和 Dalvik VM 方式的一些低级差异？我假设虚拟机是正确的，因为文件名确实不等于文件。

感谢您的任何见解。

西蒙

[编辑] 我相信其余的代码是不相关的，但无论如何，为了节省空间，删除了注释。

```
public String filePathForHarmonicFile(){

    String harmonicFile;
    int number = this.number;

    if(this.number < 0){ return "";}

    if(number<10000 && this.suffix.length()<=1){
        harmonicFile = String.format("%04d%s",this.number, this.suffix.toUpperCase()) + ".tch";
    }else{
        harmonicFile = String.format("%s%s",this.number,this.suffix.toUpperCase()) + ".tch";
    }

    return SCFileManager.getAssetFilePath("",harmonicFile);
}

public static String getAssetFilePath(String rootOfSearch, String filename){

    try {

        // get a list of all file entries in the search root
        String[] files = ThisApplication.getContext().getAssets().list(rootOfSearch);

        for (String file:files){

            String newRoot;
            if (rootOfSearch.equals("")){
                newRoot = file;
            } else {
                newRoot = rootOfSearch + File.separator + file;
            }

            if (TidesPlannerApplication.getContext().getAssets().list(newRoot).length>0){

                String thisFile = getAssetFilePath(newRoot,filename);

                if (!thisFile.equals("")){
                    return thisFile;
                }
            } else {
                if(file.equals(filename)){
                    return file;
                }
            }
        }

    } catch (IOException e) {
        e.printStackTrace();  
    }

    return "";

} 
```

我知道最后一种方法很难看，但如果有人知道更好的方法来处理资产子文件夹中的 7.5k 文件，我全都听好了——AssetManager 是 $%^&* 脑死！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:49:54.277

1）除非我遗漏了什么，否则您的字符串是填充的，因为格式语句`"%04d%s"`将用零填充以达到 4 位数字，因此是“0062.tch”。我错过了什么吗？

对于空字符的正确填充，请注意几点。首先，每个十六进制字符是半个字节，因此 (\u0000) 是两个字节，因此是一个字符。此外，IDE 会显示在 中分配的所有字节`String`，但是在打印、比较等时，它会在第一个空字符处停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T15:18:06.863

在评论中你写了这个。

> 正确的。如果我检查后备字符数组，它看起来像这样：`[0] [0] [6] [2] [.] [t] [c] [h] [\u0000] [\u0000] [\u0000] [\u0000] [\u0000] [\u0000] [\u0000] [\u0000]`

这并不一定意味着 String 与 NUL 一起传递。

字符串的状态由从`value[offset]`到的字符组成`value[offset + count - 1]`。我推测这`offset`一定是零，但没有真正的证据表明它的价值`count`是......

这些 NUL 很可能超出了 String 状态的结尾，因此不是问题的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T15:23:18.693

呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜 怎么可能花超过 3 个小时来解决一个问题，为 SO 寻求帮助，然后在 5 分钟后发现愚蠢之处？感谢所有花时间回复的人，并为浪费空间和时间而道歉。

第二种方法是对资产文件夹的递归搜索。可以看到递归调用的结果存储在thisFile中。因此，if 语句应为：

```
if(thisFile.equals(filename)){} 
```

也就是说，我仍然很好奇为什么 filename 用空值填充而 file 和 thisFile 没有。然而，深奥的兴趣只是因为代码现在可以工作......

# x86 - 如何判断二进制序列是否是 x86 机器码？

> ID：12027405
> 
> 赞同：2
> 
> 时间：2012-08-19T14:48:21.670
> 
> 标签：x86, machine-code

我们都知道，在 x86 arch 中，数据和代码混合在内存或磁盘中。但是如何告诉他们呢？

论文需要这个方法，我不指望100%的准确率。80% 还可以，即使是一些想法也可以：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T14:55:17.673

统计确定哪些命令在可执行文件中是常见的。

例如。一些命令可能是加/减等。

对于未知的二进制序列，将其视为机器代码，并查看使用的各种命令的频率（在这里您可以假设命令在字节边界处正确开始）。

如果使用了无效命令，显然它不是机器码。

否则，请查看使用的命令的百分比频率是否与通常情况相匹配。

* * *

此外，当使用接受地址（例如寄存器或内存/数据位置）的命令时，记录它们。然后检查附近是否正在访问相同的位置。

这可以通过按使用频率递减排序使用的任何数据位置来完成，并且看到递减频率的形状与通常的情况有些匹配。

* * *

数据（非机器代码）不太可能与这些统计测试相匹配。

请注意，当我说合身时，您可以检查是否合身。即使它与正常情况有很大差异，它可能仍然是代码，除非在统计上几乎没有相关性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T13:00:36.477

请参阅[所有数据都是有效的 x86 16 位机器代码吗？](https://stackoverflow.com/q/16337851/309483).

1.  将您的数据放入文件中
2.  运行`ndisasm -m 32 > program.dump`（当然适用时使用 16、32 或 64）
3.  以十六进制删除地址和机器码：`cut -b29- < program.dump > program.dump2`
4.  如果您在上面使用 64 位，大指令会中断行，我们现在需要删除这些空行：`grep -v '^$' < program.dump2 > program.asm`
5.  （该文件现在可以组装）
6.  要确定它是否仅包含指令，请运行`grep -l '^db' < program.asm > /dev/null; echo $?`
7.  如果你看到`0`了，那并不是所有的说明（`grep`找到了一些东西）。如果你不这样做，那就是:)

# php - 无法访问链接

> ID：12027409
> 
> 赞同：1
> 
> 时间：2012-08-19T14:49:15.287
> 
> 标签：php, curl

我有一个小问题。我正在尝试向 [http://www.fikeandfike.com/propertytax/Grundy/Inquiry.aspx提交表格](http://www.fikeandfike.com/propertytax/Grundy/Inquiry.aspx)

但即使在浏览器中也无法直接导航（我真的不知道为什么？）要转到上面的链接，必须点击 [http://www.fikeandfike.com/propertytax/Grundy/上的“包裹查询” MainMenu.aspx?c=32](http://www.fikeandfike.com/propertytax/Grundy/MainMenu.aspx?c=32)

所以我想点击并使用 php 脚本点击“包裹查询”链接。如果我使用 cURL 直接访问前一个链接，我会得到“对象引用未设置为对象的实例”。错误

请指导我如何点击并点击链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:57:01.730

要使用 PHP 获得相同的结果，您需要使用在 PHP 脚本中单击“包裹查询”时调用的 Javascript 函数来模拟结果：

PHP 脚本中链接的 HTML：

```
<a id="ctl00_Main_lnkParcelInquiry" style="color:Blue;" href="javascript:__doPostBack('ctl00$Main$lnkParcelInquiry','')">Parcel Inquiry</a> 
```

JS 在您的 PHP 脚本中定义 __doPostBack 函数和表单：

```
 <script type="text/javascript">
//<![CDATA[
var theForm = document.forms['aspnetForm'];
if (!theForm) {
theForm = document.aspnetForm;
}
function __doPostBack(eventTarget, eventArgument) {
if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
theForm.__EVENTTARGET.value = eventTarget;
theForm.__EVENTARGUMENT.value = eventArgument;
theForm.submit();
}
}
//]]>
</script>
<script src="/PropertyTax/Grundy/WebResource.axd?d=k82Y5NDDJDDbxvQs15CYbKKGrXzg8maOqY0bqltbogQI3NDmBuf75gWfcLjILBbAmbWOYgfVPqLiO6Kf2KileNBCke01&amp;t=634622168376055000" type="text/javascript"></script> 
```

因此，您还需要该表单 ,`<form name="aspnetForm" action="http://www.fikeandfike.com/propertytax/Grundy/Inquiry.aspx">`存在于您的脚本中。

只需以相同的方式进行即可；所以复制代码和函数，你应该得到相同的结果。

# c++ - 已弃用的 OpenGL 功能

> ID：12027420
> 
> 赞同：3
> 
> 时间：2012-08-19T14:50:49.917
> 
> 标签：c++, windows, opengl, deprecated

我最近阅读[了这个](http://www.opengl.org/wiki/History_of_OpenGL#Deprecation_Model)列表，我注意到我从 OpenGL 红皮书中研究的几乎所有内容都被认为已弃用。我说的是像素传输操作、像素绘图、累积缓冲区、开始/结束函数（！？）、自动 mipmap 生成和当前光栅位置。

为什么他们将这些功能标记为已弃用？仍然可以使用它们吗？有哪些解决方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-19T15:09:24.850

在我看来，它是更好的。但是这个所谓`Immediate Mode`的在 OpenGL 3.0 中确实被弃用了，主要是因为它的性能不是最优的。

`glBegin`在即时模式下，您可以使用和之类的调用`glEnd`。所以图元的渲染依赖于程序的命令，OpenGL在从CPU得到适当的命令之前不能前进。相反，您可以使用缓冲区对象来存储所有顶点和数据。然后告诉 OpenGL 使用这个缓冲区来渲染它的图元，使用类似的命令，`glDrawArrays`甚至`glDrawElements`更专业的命令，如`glDrawElementsInstanced`. 当 GPU 忙于执行这些命令并将缓冲区绘制到目标`FrameBuffer`（基本上是渲染目标）时。该程序可以关闭并发出一些其他命令。这样 CPU 和 GPU 都会同时忙碌，不会浪费时间。

这不是最好的解释，但我的建议是：尝试学习这个新的渲染管道。到目前为止，它优于即时模式。我推荐以下教程：

[http://www.arcsynthesis.org/gltut/index.html](http://www.arcsynthesis.org/gltut/index.html)

[http://www.opengl-tutorial.org/](http://www.opengl-tutorial.org/)

[http://ogldev.atspace.co.uk/](http://ogldev.atspace.co.uk/)

从字面上试着忘记你到目前为止所知道的，立即模式早已被弃用，不应该再使用，相反，专注于新技术;）

**编辑** *对不起，如果我使用“中间”而不是“立即”，我认为它实际上被称为“立即”，我倾向于将它们混淆。*

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-19T15:23:39.957

> 为什么他们将这些功能标记为已弃用？

首先，一些术语：它们没有被[弃用](http://www.opengl.org/wiki/Deprecation)。在 OpenGL 3.0 中，它们已被弃用（意思是“可能在以后的版本中被删除”）；在 3.1 及以上版本中，大部分都被*删除了*。[兼容性配置文件](http://www.opengl.org/wiki/Core_And_Compatibility_in_Contexts)将删除的功能带回来。虽然它在 Windows 和 Linux 上广泛实施，但 Apple 的 3.2 实施只实施了核心配置文件。

*至于删除*背后的原因，这取决于您正在谈论的功能。我们真的只能推测为什么 ARB 有任何特定功能：

> 像素转移操作

[像素传输操作](http://www.opengl.org/wiki/Pixel_Transfer)没有*被删除*。如果您在谈论`glDrawPixels`，那是一个像素传输操作，但它是*一个*像素传输。不是所有的人。

说到这里：

> 像素图

因为一开始这是一个*可怕*的想法。`glDrawPixels`是一个性能陷阱；听起来不错，*很*整洁，但性能很差，而且因为它很简单，所以人们会尝试使用它。

有一些容易做但性能很差的事情会鼓励人们编写糟糕的 OpenGL 应用程序。

> 累积缓冲器

着色器可以很好地做到这一点。事实上更好；他们有比累积缓冲区更多的选择。

> 开始/结束函数（！？），

这是另一个性能陷阱。即时模式渲染非常慢。

> 自动生成mipmap

因为一开始这是一个糟糕的主意。让 OpenGL 决定何时执行诸如生成纹理的 mipmap 之类的重量级操作并不是一个好主意。ARB 更好的想法是让你说，[“好的，OpenGL，现在为这个纹理生成一些 mipmaps。”](http://www.opengl.org/wiki/GLAPI/glGenerateMipmap)

> 当前光栅位置。

另一个性能陷阱/坏主意。

> 仍然可以使用它们吗？

随你（由你决定。NVIDIA 已有效地承诺永久支持兼容性配置文件。这意味着 AMD 和英特尔可能也必须这样做。这涵盖了 Windows 和 Linux。

在 MacOSX 上，Apple 更加严格地控制 GL 实现，而且他们似乎承诺*不*支持兼容性配置文件。然而，他们似乎对推进 OpenGL 没什么兴趣，因为他们停止了 3.2。甚至 Mountain Lion 也没有更新 OpenGL 版本。

> 有哪些解决方法？

停止使用性能陷阱。像其他人一样为您的顶点数据使用缓冲区对象。使用着色器。使用`glGenerateMipmap`.

# objective-c - UINavigationBar Back Button 可拉伸图像太长

> ID：12027421
> 
> 赞同：0
> 
> 时间：2012-08-19T14:50:57.647
> 
> 标签：objective-c, ios, uiimage, uinavigationbar, stretching

我正在使用以下代码来自定义 UINavigationBar 的后退按钮。但是，图像被拉伸得太远，导致图像如下所示。请问你能告诉我如何防止这种情况吗？

谢谢！

```
[[UIImage imageNamed:@"back_button"] stretchableImageWithLeftCapWidth:14 topCapHeight:0] 
```

![在此处输入图像描述](../Images/f8c791373bb8ee3015aa16d8ea6eb7d3.png)

原始后退按钮图像：![在此处输入图像描述](../Images/5bece1f83b09e2286b89c4a9f4f11999.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T15:01:37.967

的最小宽度`UIBarButtonItem`很大程度上取决于您提供的图像的大小。您应该从编辑器中导出后退箭头图像，以便图像的中间列中只有 1 个像素的可平铺图像内容，这样左右部分可以用作左右大写：

![后退栏按钮项目箭头示例](../Images/5e5e68447ce013cf8dcfaf8a2be9bf85.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T15:01:15.720

根据图像，似乎图像已正确拉伸。只需检查后退按钮框架。另外请验证字符串“Profile”的末尾是否没有空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:11:48.220

我有一张带有噪点纹理的图像，并且想做同样的事情。我终于找到了这个解决方案，我相信它完全符合您的要求（至少在 iOS 6 中）：

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] init];
UIImage *buttonBg = [[UIImage imageNamed:@"back-arrow.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 16, 0, 6)];
[backButton setBackButtonBackgroundImage:buttonBg forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
backButton.title = @"Back"; 
```

您可以自定义边缘插图以排除不应拉伸的部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T22:53:38.573

`stretchableImageWithLeftCapWidth:topCapHeight`在 iOS 5 中已弃用。

这不能回答你的问题。这只是一个提示。

[不推荐使用的 UIImage 方法](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImage_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIImage/stretchableImageWithLeftCapWidth%3atopCapHeight%3a)

# tomcat - Tomcat：限制本地主机的带宽

> ID：12027422
> 
> 赞同：4
> 
> 时间：2012-08-19T14:51:02.200
> 
> 标签：tomcat, configuration, localhost, bandwidth, dial-up

是否可以限制 Tomcat 服务器的带宽？我需要它来模拟慢速（拨号）Internet 连接上的站点工作。所有测试都在本地主机中进行。

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:43:22.027

通过创建阀门，这在 Tomcat 中很容易实现。

创建一个从 tomcat 扩展 ValveBase 类的类。

里面的代码应该是这样的：

```
/**
 * {@inheritDoc}
 */
@Override
public void invoke(final Request request, final Response response) 
                   throws IOException, ServletException {

    if (randomDelay != 0) {
        long delay = minDelay + randomizer.nextInt(randomDelay);
        try {
            if (LOGGER.isDebugEnabled()) {
                LOGGER.debug("sleeping for " + delay + " ms");
            }
            Thread.sleep(delay);
        } catch (InterruptedException e) {
            if (LOGGER.isDebugEnabled()) {
                LOGGER.debug("someone wake me up : " + e.getMessage());
            }
        }
    }

    // let's continue !
    getNext().invoke(request, response);
} 
```

将它编译到一个 jar 中，然后放入 tomcat lib 目录（通常是 {catalina.home}/lib）。

最后在 server.xml 中添加阀门声明：

```
<Server ...>
  <Service name="Catalina">
   <Engine name="Catalina" defaultHost="localhost">
     (...)
     <Host name="localhost" ...>
       <Valve className="tools.tomcat.RandomDelayValve" /> 
```

HIH

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T14:59:53.897

这在 Tomcat 中是不可能的，您应该在外面的某个地方寻找提供[此类功能](http://www.faqs.org/docs/Linux-HOWTO/Bandwidth-Limiting-HOWTO.html)的 HTTP 代理，并通过该代理进行测试。在最坏的情况下自己编写这样一个代理，不应该超过十几行代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T00:45:30.793

您可以使用 jmeter 执行此操作，请参阅：- [http://jmeter.512774.n5.nabble.com/httpclient-socket-http-cps-td524481.html](http://jmeter.512774.n5.nabble.com/httpclient-socket-http-cps-td524481.html)

另见：

*   [模拟慢速网络连接的网络工具](https://stackoverflow.com/questions/1094760/network-tools-that-simulate-slow-network-connection)

# c# - 将类属性作为方法的参数传递

> ID：12027425
> 
> 赞同：0
> 
> 时间：2012-08-19T14:51:20.000
> 
> 标签：c#

我想重构我的一些代码，所以我想为一些重复任务创建方法。根据上下文，其中一种方法包括使用属性处理某些东西。大多数属性是字符串，但也有 enum 和 int 类型。例如，方法应如下所示：

```
private void someMethod (int i, 'here should be property') {
//enter code here
} 
```

那么，有人知道如何传递这些属性吗？

提前致谢！

另一种解释。此代码应更改标签属性：文本、字体...但是，应根据输入参数更改 label.Text。

它应该看起来像这样

```
private void setLabel (Label label, 'I dont know what goes here to pass a property') {
label.Text = user.'property'.toString();
//some more code
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:32:12.017

如果您没有任何特殊原因要实际传递该属性，则可以只传递该属性的*值*：

```
private void setLabel (Label label, object propertyValue)
{
    label.Text = propertyValue.ToString();
} 
```

然后这样称呼它：

```
setLabel(myLabel, user.ThePropertyIWant); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T17:27:00.730

你应该可以用反射来做这样的事情：http: [//www.dotnetperls.com/reflection-field](http://www.dotnetperls.com/reflection-field)

# .htaccess - htaccess - mod_rewrite“相同”规则必须同时适用于两者

> ID：12027428
> 
> 赞同：0
> 
> 时间：2012-08-19T14:51:49.767
> 
> 标签：.htaccess

我真的很难做一个标题。所以如果你有更好的东西，请编辑它。

现在的问题：

我正在尝试在我的 .htaccess 文件中使用 mod_rewrite 重写一些 URL。

所以，我想做的是做两个相同的查询，这当然是行不通的。仅适用于其中一项规则。所以我在想是否有某种方法可以告诉如果第一条规则失败则转到下一条？或者 - 如果一个规则失败，继续寻找另一个？

这些是我的规则，除了最后一个参数外是相同的。

```
RewriteRule ^udforsk/([a-z-]+)/([0-9]+)$ index.php?page=udforsk&q=1&s=$1&val=$2
RewriteRule ^udforsk/([a-z-]+)/([0-9]+)$ index.php?page=udforsk&q=1&s=$1&p=$2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:03:44.567

Correct me if I'm wrong but, if you are passing the arguments in via GET, then index.php should handle the error that would happen if it were missing a GET variable.

In index.php, treat `$_GET["p"]` like you would treat `$_GET["val"]`, actually, why not use `isset()` and set `p` equal to `val` (if `p` isn't already set)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:19:00.113

重写不会检查您在规则中调用的页面是否实际有效。它只会尝试提供它，然后因为您没有 [L] 它也会尝试提供下一个。

您可能应该做的是更改您的第一个 URL 以将该 $2 值作为两个不同的参数传递

```
RewriteRule ^udforsk/([a-z-]+)/([0-9]+)$ index.php?page=udforsk&q=1&s=$1&val=$2
RewriteRule ^udforsk/([a-z-]+)/([0-9]+)$ index.php?page=udforsk&q=1&s=$1&p=$2 
```

应该

```
RewriteRule ^udforsk/([a-z-]+)/([0-9]+)$ index.php?page=udforsk&q=1&s=$1&val=$2&p=$2 
```

然后让您的 index.php 根据 php 脚本中的逻辑来选择使用“val”或“p”的参数。

确保在您的 php 代码中使用“isset”来测试变量。

```
$value = (isset($_REQUEST["val"]) ? $_REQUEST["val"] : (isset($_REQUEST["p"]) ? $_REQUEST["p"] : "error")); 
```

$value 将保存 "val" 或 "p" 的内容或单词 "error" 如果两者都没有设置。

# xcode - Xcode 无法识别键绑定

> ID：12027432
> 
> 赞同：0
> 
> 时间：2012-08-19T14:52:25.647
> 
> 标签：xcode, osx-lion, xcode4.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:40:43.720

好的，原来看似相同的功能有多个条目，如下图所示：

![绑定](../Images/0f3140552778396f545150f12407f9d8.png)

将两者设置为相同的绑定就可以了。

# java - 在 init 之外的 java 中创建一个对象

> ID：12027435
> 
> 赞同：3
> 
> 时间：2012-08-19T14:52:48.280
> 
> 标签：java, oop, class

所以对于我正在创建的游戏，我有一些扩展 GameDriver 的类。

到目前为止，在所有其他类上我已经能够扩展 GameDriver 然后在 GameDriver 中我可以做到：

```
ArrayList<Card>  library = new ArrayList<Card>(); 
```

今天我开始学习 GameAI 课程并扩展了 GameDriver，当我把：

```
GameAI Enemy = new GameAI(); 
```

在同一个地方，我放了另一行代码（在公共类 GameDriver 的正下方）

我得到：

```
java.lang.StackOverflowError
at java.util.WeakHashMap.expungeStaleEntries(Unknown Source)
at java.util.WeakHashMap.getTable(Unknown Source)
at java.util.WeakHashMap.get(Unknown Source)
at java.awt.Component.checkCoalescing(Unknown Source)
at java.awt.Component.<init>(Unknown Source)
at java.awt.Container.<init>(Unknown Source)
at java.awt.Panel.<init>(Unknown Source)
at java.awt.Panel.<init>(Unknown Source)
at java.applet.Applet.<init>(Unknown Source)
at GameDriver.<init>(GameDriver.java:14)
at GameAI.<init>(GameAI.java:8)
at GameDriver.<init>(GameDriver.java:40)
at GameAI.<init>(GameAI.java:8) 
```

如果我把它放在我的小程序的 public void init() 中，那么它在运行时不会出错，但是我将无法从我的其他方法访问它，我是不是在看东西？通宵达旦通常对我的大脑没有帮助...

这就是 GameAI 现在的样子：

```
public class GameAI extends GameDriver {

    public int life;
    public int energy;

    public void drawPhase(){

    }

    public GameAI(){
        life = 20;
        energy = 2;
    }
} 
```

然后是 GameDriver 的一些内容：

```
public class GameDriver extends Applet implements MouseMotionListener,MouseListener {

Graphics g; 
Image offscreen;
Dimension dim; 

int playerLife = 20;
int playerEnergy = 8;

int xMouse; 
int yMouse;
int lineThickness = 4;
int handSize = 6;
int currentHover;
boolean slotHover;
int currentSelected;
boolean slotClicked;
int currentHoverBoard;
boolean slotHoverBoard;
boolean slotClickedBoard;
int currentSelectedBoard;

boolean canPlace;
ArrayList<Card>  library = new ArrayList<Card>();
ArrayList<Card>  hand = new ArrayList<Card>();
ArrayList<Card>  playerBoard = new ArrayList<Card>();
GameAI Enemy;
int[] handBoxX = new int[handSize];
int[] handBoxY = new int[handSize];
int[] handBoxW = new int[handSize];
int[] handBoxH = new int[handSize];

int[] playerBoardX = new int[8];
int[] playerBoardY = new int[8];
int[] playerBoardW = new int[8];
int[] playerBoardH = new int[8];

public void init(){
    this.setSize(640, 480);
    dim = this.getSize();
    addMouseMotionListener(this);
    addMouseListener(this);
    createLibrary();
    drawFirstHand();
    printHand();

    GameAI Enemy = new GameAI();
    checkEnemy();

    offscreen = createImage(this.getSize().width,this.getSize().height);
    g = offscreen.getGraphics(); 
}

public void checkEnemy(){
    System.out.println(Enemy.energy);
}

... Alot more methods and stuff below, but nothing to do with the GameAI enemy 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T15:19:41.237

您正在 GameDriver 内部创建一个 GameAI 对象，它是它扩展的类。这将导致递归继续，直到内存不足。

解决方案：不要这样做。您的 GameAI 类不应扩展 GameDriver，因为这是共享信息的错误方式，即使您没有这种递归噩梦，它也根本无法工作。而是给 GameAI 一个 GameDriver 字段，并通过其构造函数将 GameDriver 实例传递给 GameAI。

IE，

```
class GameAI {
   private GameDriver gameDriver;

   public GameAI(GameDriver gameDriver) {
      this.gameDriver = gameDriver;
   }

   //.... more code
} 
```

**编辑 2**
如果你想要一个 GameAI 对象，你会这样做

```
GameAI gameAi = new GameAI(this); 
```

如果您想要一个数组或它们的列表，您可以循环执行此操作。

# c++ - 终端在 C++ 中打开一个弹出窗口

> ID：12027439
> 
> 赞同：1
> 
> 时间：2012-08-19T14:53:40.063
> 
> 标签：c++, c++11, ubuntu-12.04

我的 c++ 应用程序需要通过弹出窗口或替代方式显示消息。我的应用程序在 Ubuntu 12.04 版本上运行。我可以对应用程序进行编程以打开 Ubuntu 类型的弹出窗口吗？如果可能，怎么做？

我需要使用 gnome 窗口或类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:58:08.177

从不使用 GUI 的程序显示弹出窗口的最简单方法可能只是执行一个命令行工具来完成这项工作：

*   要显示没有按钮的通知，您可以使用*notify-send*

    ```
    system("/usr/bin/notify-send MessageSubject \"message body here\""); 
    ```

*   如果您想要按钮以便用户可以给出响应，您可以使用（更丑陋）`xmessage`

    ```
    system("/usr/bin/xmessage") 
    ```

（有关所有选项，请参阅每个工具的手册页）

* * *

替代方案实际上是使用完整的 GUI 框架（可能是 gtk+），这通常不是一个小改动。

For example, you can use [libnotify](http://developer-next.gnome.org/libnotify/) directly (giving you the same basic capabilities as `notify-send`, but more control), but this also depends on [glib](http://developer-next.gnome.org/glib/unstable/). So, now you've added two external dependencies when you could just have run `system`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:20:32.463

为了显示弹出窗口或任何类型的窗口，您必须在应用程序/程序中引用 gtk+ 或 qt 库。gtk+ 是可取的，因为 ubuntu unity 桌面也基于 gtk+ - 这样你的程序在 ubuntu 上运行时将有更少的开销和更多的性能提升。您可以使用默认的 C 库 (libgtk2.0) 或 C++ 的 gtkmm (libgtkmm)。

您可以在以下位置获取有关如何引用这些库、在 main() 函数中初始化 gtk_main 等的更多信息：[http ://www.gtk.org/documentation.php](http://www.gtk.org/documentation.php)

# android - Set size of customView with a variable

> ID：12027440
> 
> 赞同：0
> 
> 时间：2012-08-19T14:53:40.103
> 
> 标签：android

I have a customm view which generates an arc and i've put in the xml like this

```
<com.example.application.ArcView
        android:id="@+id/arcView1"
        android:layout_width="@string/arc_size"
        android:layout_height="@string/arc_size"
        android:layout_centerInParent="true" /> 
```

I have the height and width that change based on the screen density

I've coded it like this but it doesn't work

```
Resources res = getResources();
    String arcSizeString = res.getString(R.string.arc_size);

    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    switch(metrics.densityDpi){
         case DisplayMetrics.DENSITY_LOW:
             arcSize = 170;
             arcSizeString = (arcSize + "px");
                    break;
         case DisplayMetrics.DENSITY_MEDIUM:
             arcSize = 227;
             arcSizeString = (arcSize + "px");
                     break;
         case DisplayMetrics.DENSITY_HIGH:
             arcSize = 342;
             arcSizeString = (arcSize + "px");
                     break;
    } 
```

How can i set the width and height to a variable?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T15:14:46.640

可能，您想问“如何将宽度和高度设置为视图”。

您需要在 Activity 类中引用 ArcView 的实例，更准确地说是在 Activity 的 onCreate 方法中，如下所示：

```
ArcView arcView = (ArcView)findViewById(R.id.arcView1); 
```

之后，根据密度计算宽度和高度，并将其设置为您的视图

```
arcView.setLayoutParams(myLayoutParams); 
```

[线性布局.LayoutParams](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html)

# ipad - How to bind the HTML5::stalled event from soundmanager?

> ID：12027442
> 
> 赞同：2
> 
> 时间：2012-08-19T14:54:33.407
> 
> 标签：ipad, html, soundmanager2, stalled

I'm trying to to write a javascript app that use the [SoundManager 2][1] api and aim to run in all desktop and mobile browsers. On the iPad platform, Soundmanager is using the HTML5 audio api since there is on flash support. Now, when I'm trying to play two audio files back to back, both loaded in response to a click event, a [HTML5::stalled][2] event is occasionally raised. How do I set an event handler to catch the stalled event?

Since sound objects in my app are created on the fly and I don't know how to access directly to tags that are created by SoundManager, I tried to use a delegate to handle the stalled event:

```
 document.delegate('audio', 'stalled', function (event) {...}); 
```

It doesn't work. the event did not raised in respond to stalled. (I had an alert in my handler).

Also tried to use [Sound::onsuspend()][3] to listen for stalled, but onsuspend pops out on the end of sound::play(). How can we distinguish between stalled and other events that may raise the audio::suspend? Is there any other way to access the tags that SoundManager must create in order to play HTML audio?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-15T19:54:07.950

我用以下解决方案解决了它。逆向工程没有记录和发现这一点。这完全是关于访问 html 音频对象，该对象位于 _a 下。

```
currentSound = soundManager.createSound({..});
currentSound._a.addEventListener('stalled', function() {
     if (!self.currentSound) return;
    var audio = this;
    audio.load();
    audio.play();
}); 
```

该方法的主体基于[this post about html5stalled callback in safari](https://stackoverflow.com/questions/4201576/html5-audio-files-fail-to-load-in-safari)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-14T19:57:45.547

我可以建议使用 html5 平台（三星智能电视）使用不同的“修复”：

```
var mySound = soundManager.createSound({..});  
mySound.load();  
setTimeout(function() {
    if (mySound.readyState == 1) {
        // this object is probably stalled
        }
}, 1500); 
```

这是因为在 html5 中，与 flash 不同，“readystate”属性几乎瞬间从“0”跳到“3”，跳过“1”。（因为如果轨道开始缓冲它是可播放的......）。

希望这也适用于你。

# ios - UITableViewController 不显示数据

> ID：12027443
> 
> 赞同：0
> 
> 时间：2012-08-19T14:54:57.277
> 
> 标签：ios, uitableview

> **可能重复：**
> [UITableViewController 未加载数据](https://stackoverflow.com/questions/12032555/uitableviewcontroller-not-loading-data)

我通过以下方式创建了一个 UITableViewController

```
#import "KLActionsViewController.h"

@interface KLActionsViewController ()

@end

@implementation KLActionsViewController
@synthesize actionList,delegate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)loadView
{

}

- (void)viewDidLoad {
    [super viewDidLoad];
    NSMutableArray* list = [[NSMutableArray alloc] init];
    self.tableView = [[UITableView alloc] init];
    self.tableView.delegate = self;
    self.tableView.dataSource = self;
    self.actionList = list;
    self.clearsSelectionOnViewWillAppear = NO;
    self.contentSizeForViewInPopover = CGSizeMake(320.0, 400.0);
    [self.actionList addObject:@"Obj1"];
    [self.actionList addObject:@"Obj2"];
    [self.actionList addObject:@"Obj3"];
    [self.actionList addObject:@"Obj4"];

}

- (int)numberOfSectionsInTableView:(UITableView *)tableView
{
    NSLog(@"in number of section");
    return 1;
}

- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    NSString* lab = [self.actionList objectAtIndex:indexPath.row];
//    NSLog(lab);
    NSLog(@"here in there");
    cell.textLabel.text = lab;
    return cell;
}

- (NSInteger)numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"Total entries : %i ",[self.actionList count]);
    return [self.actionList count];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (self.delegate != nil) {
        [self.delegate actionSelected:indexPath.row];
    }
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    self.actionList = nil;
    self.delegate = nil ;
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

但是当我尝试创建它的实例并显示它时，`UIPopoverController`我只能看到一个空表，其中没有数据。此外，`numberOfRowsInSection`永远`cellForRowAtIndexPath`不会被调用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:17:12.417

您正在内部创建一个新的表视图，`viewDidLoad:`但没有使其成为该控制器视图的子视图。既然你说你看到一个空表，这让我相信你正在从你的 .xib 文件中加载一个表，但设置了`dataSource`这个新表中的唯一一个。

如果这是它的结构，请使用 .xib 中从表视​​图到`self.tableView`属性的连接，不要创建新对象……只需配置您拥有的对象。

# c# - Solr.Net 查询：Windows 窗体中的 ArgumentException

> ID：12027451
> 
> 赞同：3
> 
> 时间：2012-08-19T14:56:18.860
> 
> 标签：c#, windows, forms, solrnet

因此，我启动并运行了一个 Windows 窗体项目。它使用 Lucene.Net 库，我用它创建了一个 Lucene 索引。该程序接受用户请求，通过一些算法运行它们并在 DataGridView 中显示结果集。

之后我安装了 XAMPP，使用 Tomcat 服务设置 Solr 3.6.1。我将 schema.xml 配置如下（感谢[Can a raw Lucene index be loaded by Solr?](https://stackoverflow.com/questions/2715973/can-a-raw-lucene-index-be-loaded-by-solr)）：

```
<fieldType name="tdouble" class="solr.TrieDoubleField" precisionStep="0" omitNorms="true" positionIncrementGap="0"/>
[...]
<field name="LuminaireId" type="string" indexed="true" stored="true"/>
<field name="LampCount" type="tdouble" multiValued="true" indexed="true" stored="true" required="false"/>
[...] 
```

我搜索了一些关于如何设置所有东西的示例，并提出了一个用于映射值的 Product-Class（还有一些值，但为了获得图片，我认为这已经足够了），如下所示：

```
public class SolrProduct
{
      [SolrUniqueKey("LuminaireId")]
      public string LuminaireId { get; set; }

      [SolrField("LampCount")]
      public ICollection<double> LampCount { get; set; }
} 
```

一个简单的测试查询（使用这种方法）

```
internal override List<KeyValuePair<Int64, Double>> CalculateRanking(List<T> checkedAttributes)
{
    Startup.Init<SolrProduct>("http://localhost:8983/solr/");
    var solr = ServiceLocator.Current.GetInstance<ISolrOperations<SolrProduct>>();
    var results = solr.Query("LampCount:1");
    // as is: no mapping for result-return for now, returning "null" instead
    return(null);
} 
```

产生一个 ArgumentException，告诉我“System.Collections.ArrayList”类型的对象无法转换为“System.String”类型。即使在互联网上搜索该问题并调试程序后，我仍然不明白异常。“LampCount”是一个多值字段（Lucene 索引中的前 NumericField），其 schema.xml 和 Product.cs 中的映射应该可以工作。

它在 localhost:8983/solr/admin/ 上使用 web 界面时有效，我可以将查询设为“LampCount:1”，它会返回一堆正确找到的文档。这可能是另一个问题，但是在所有“按原样设置”的情况下，Solr 网络界面的结果集 XML 显示（在每个找到的文档中）：

```
<arr name="LampCount">
<str>ERROR:SCHEMA-INDEX-MISMATCH,stringValue=1</str>
</arr> 
```

我为 Lucene 索引文档的 LampCount 字段编制了索引

```
 var valueField = new NumericField(internalname, Field.Store.YES, true);
 valueField.SetDoubleValue(value);
 doc.Add(valueField); 
```

这会是问题吗，因为我现在看不到大局，感觉完全迷失了。如果你能解开我的脑结，将不胜感激。;-)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-26T07:50:04.397

您的架构和 POCO 之间不匹配。基本上 Solr 正在尝试将“tdouble”字段类型转换为您的集合。您可以做的最好的事情是执行，您在管理控制面板中的查询并观察返回的内容，然后问自己您认为它将如何处理输入到您的 POCO 中的内容。

# java - 在 JTable 中仅更改一个单元格的颜色

> ID：12027461
> 
> 赞同：3
> 
> 时间：2012-08-19T14:58:10.770
> 
> 标签：java, jtable, cell, background-color

我知道我可以使用此代码设置整个列的背景颜色，但是如何为每个单元格设置不同的颜色？我有一个有两列和一到一千行的表。

```
words.getColumn("columnNameHere").setCellRenderer(
    new DefaultTableCellRenderer() {
        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            setText(value.toString());
            setBackground(Color.RED);
            return this;
        }
    }
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T15:03:41.820

行号和列号被传递到`getTableCellRendererComponent`. 因此，您可以执行以下操作：

```
public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
    setText(value.toString());
    if (row==12 && column==2) {
        setBackground(Color.RED);
    }
    return this;
} 
```

# c# - 复发计算器

> ID：12027462
> 
> 赞同：5
> 
> 时间：2012-08-19T14:58:13.093
> 
> 标签：c#, .net

我正在开发一个严重依赖重复事件的 C# 应用程序。支持以下类型的重复：

1.  每日重复
2.  每周重复
3.  每月重复

基本上，该应用程序支持 MS Outlook 支持的所有不同的重复组合。

问题：

系统为重复事件计算的个别事件未考虑夏令时，因此系统显示错误的发生日期时间。是否有可以处理重复日期计算的标准库或第三方模块？基本上我想要一个以下格式的 API。

```
List<Occurence> GetAllOccurences(DateTime startTimeInUTC, DateTime EndTimeInUTC,    TimeZone targetTimeZone)

class Occurrence
{
    DateTime OccurenceStartDateTime {get;set;}
    DateTime OccurenceEndDateTime {get;set;}
} 
```

这样的 API 可用吗？它可以让我的生活更轻松。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:16:45.180

这可能有助于[任务计划程序](http://taskschedulerengine.codeplex.com/) 或搜索 Cron 库，有几个不同的库，其中一个应该按照您的意愿执行。

# javascript - Node.js 加密输入/输出类型

> ID：12027463
> 
> 赞同：4
> 
> 时间：2012-08-19T14:58:29.983
> 
> 标签：javascript, node.js, encryption, aes, node-crypto

我正在尝试找出 Node.js Crypto 库以及如何根据我的情况正确使用它。

我的目标是：

键入十六进制字符串 3132333435363738313233343536373831323334353637383132333435363738

十六进制字符串中的文本 46303030303030303030303030303030

十六进制字符串中的密文 70ab7387a6a94098510bf0a6d972aabe

我正在通过 AES 256 的 ac 实现和通过[http://www.hanewin.net/encrypt/aes/aes-test.htm的网站对此进行测试](http://www.hanewin.net/encrypt/aes/aes-test.htm)

这是我必须要做的，它没有按照我期望的方式工作。我最好的猜测是密码函数的输入和输出类型不正确。唯一有效的是utf8，如果我使用十六进制它会失败并出现v8错误。关于我应该转换或更改以使其正常工作的任何想法。

```
var keytext = "3132333435363738313233343536373831323334353637383132333435363738";
var key = new Buffer(keytext, 'hex');
var crypto = require("crypto")
var cipher = crypto.createCipher('aes-256-cbc',key,'hex');
var decipher = crypto.createDecipher('aes-256-cbc',key,'hex');

var text = "46303030303030303030303030303030";
var buff = new Buffer(text, 'hex');
console.log(buff)
var crypted = cipher.update(buff,'hex','hex') 
```

在这个例子中，crypted 的输出是 8cfdcda0a4ea07795945541e4d8c7e35，这不是我所期望的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-12T15:48:54.637

`aes-256-cbc`当您从中派生测试向量的网站正在使用模式时，您的代码正在使用`ecb`。另外，您正在调用`createCipher`，但是对于 ECB，您应该不使用`createCipheriv`IV（请参阅[nodeJS: can't get crypto module to give me the right AES cipher results](https://stackoverflow.com/questions/15004951/nodejs-cant-get-crypto-module-to-give-me-the-right-aes-cipher-outcome)），

下面是一些演示这一点的代码：

```
var crypto = require("crypto");

var testVector = { plaintext : "46303030303030303030303030303030",
    iv : "",
    key : "3132333435363738313233343536373831323334353637383132333435363738",
    ciphertext : "70ab7387a6a94098510bf0a6d972aabe"};

var key = new Buffer(testVector.key, "hex");
var text = new Buffer(testVector.plaintext, "hex");
var cipher = crypto.createCipheriv("aes-256-ecb", key, testVector.iv);
var crypted = cipher.update(text,'hex','hex');
crypted += cipher.final("hex");
console.log("> " + crypted);
console.log("? " + testVector.ciphertext); 
```

运行该代码的输出并不完全符合我的预期，但加密输出的第一个块符合您的预期。可能是另一个需要调整的参数。：

```
$ node test-aes-ecb.js 
> 70ab7387a6a94098510bf0a6d972aabeeebbdaed7324ec4bc70d1c0343337233
? 70ab7387a6a94098510bf0a6d972aabe 
```

# ios - 如何使用一个 NSURLConnection 向 Web 服务器发出多个经过身份验证的请求？

> ID：12027465
> 
> 赞同：0
> 
> 时间：2012-08-19T14:58:47.927
> 
> 标签：ios, cookies, webserver, nsurlconnection, nsurlrequest

我想从[http://mycompany.com/jsonpage1..etc](http://mycompany.com/jsonpage1..etc)获取 JSON 。网络服务器需要初始登录[http://mycompany.com/login](http://mycompany.com/login)，然后为用户维护一个 cookie。如何在不要求每次登录的情况下使用 NSURLCredentialStorage 获得这种行为？这是使用 NSURLCredential Storage 的非工作代码

```
- (IBAction)getJSON:(id)sender
{

//  [self establishSession];

NSURLCredential *credential = [NSURLCredential credentialWithUser:@"user"
                                                         password:@"pass"
                                                          persistence:NSURLCredentialPersistenceForSession];

NSURLProtectionSpace *protectionSpace = [[NSURLProtectionSpace alloc]
                                         initWithHost:@"myCompany.com"
                                         port:0
                                         protocol:@"http"
                                         realm:nil
                                         authenticationMethod:nil];

[[NSURLCredentialStorage sharedCredentialStorage] setDefaultCredential:credential
                                                    forProtectionSpace:protectionSpace];

//////////GET JSON//////////////

NSError *error;
NSURL *url = [NSURL URLWithString:@"http://mycompany.com.jsonpage1"];
 NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[[NSURLConnection alloc] initWithRequest:request delegate:self];
}

 //I am NOT getting JSON in this delegate
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

NSString *responseString = [[NSString alloc] initWithData:responseData    encoding:NSUTF8StringEncoding];

NSLog(@"%@",responseString);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:06:29.577

您可以尝试[AFNetworking](https://github.com/AFNetworking/AFNetworking/)库和子类[AFHTTPClient](http://engineering.gowalla.com/AFNetworking/Classes/AFHTTPClient.html)，您可以在其中封装每个请求的身份验证。

# android - 如何在销毁时回收单个活动的内存？

> ID：12027466
> 
> 赞同：0
> 
> 时间：2012-08-19T14:58:49.113
> 
> 标签：android, memory, android-activity, dalvik

我们如何在销毁时回收活动资源？我们是否有可能从内存中删除 Activity 并立即回收资源？如何在 Android 中释放 Ram 资源？我知道如何使用 Process.killProcess(Process.myPid()) 杀死应用程序并回收资源，但我希望这适用于具有多个活动的应用程序，我们只从内存中删除单个活动..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T15:02:43.100

> How to reclaim memory of single activity on destroy?

So long as you are not holding onto the activity via some static reference (e.g., static data member, background thread, etc.), the activity will be eligible for garbage collection after `onDestroy()` completes. If you are concerned that perhaps you are indeed preventing your activity from being garbage collected, [use MAT to try to determine what is keeping it around](http://android-developers.blogspot.com/2011/03/memory-analysis-for-android.html).

> Is is possible that we delete Activity from memory and reclaim resource immediately?

No, no more than you can "delete" anything in a garbage-collected runtime environment.

> How to free Ram resource in Android ?

Let go of the "Ram resource" when you no longer need it, and it will be garbage collected.

> I know how to kill an application using Process.killProcess(Process.myPid())

Please don't do that.

# iphone - 在 iPhone 中，要支持蓝牙耳机，我必须做些什么吗？

> ID：12027469
> 
> 赞同：3
> 
> 时间：2012-08-19T14:59:03.073
> 
> 标签：iphone, ios, bluetooth, headphones

我正在开发音乐应用程序。

我没有做任何事情来支持普通的有线耳机或耳机，但我可以用耳机听到音乐。

我是否必须编写一些代码来支持蓝牙耳机或蓝牙耳机？

我必须购买蓝牙耳机才能检查它的工作原理吗？

**编辑**

抱歉，我做了一些事情来支持有线耳机。
我编写了代码来检测耳机拔出的事件。
拔下耳机后，我的音乐应用程序暂停了。
此代码是否也适用于蓝牙耳机？

**[我正在使用与此答案](https://stackoverflow.com/a/1832449/709950)**相同的代码来检测未插入事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:05:07.513

这应该正常工作，无需编写。也许您可以在 facebook 上要求某人对其进行测试。但它应该工作

# c# - 是否回收调用Application_Start？

> ID：12027471
> 
> 赞同：14
> 
> 时间：2012-08-19T14:59:19.743
> 
> 标签：c#, iis, iis-7

IIS 7 中是否会调用 Application_Start 进行回收？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-19T14:59:58.337

不，当 IIS 实际加载应用程序时，它会在回收后的第一个请求时调用。

# codeigniter - CodeIgniter 会话 - 我没有在其他控制器中获取我的用户数据

> ID：12027478
> 
> 赞同：0
> 
> 时间：2012-08-19T15:00:37.357
> 
> 标签：codeigniter

这是我设置会话的代码

```
$login_data = array('logged_in'=>TRUE, 'user_id'=>$userid);
$this->session->set_userdata($login_data);
redirect('dashboard'); 
```

上面的代码在我的数据库中的 ci_session 表中创建了一个新条目，并且它具有 logs_in 值

在仪表板控制器中，我正在检查会话。下面是我在仪表板控制器中的代码

```
function __construct(){
        parent::__construct();
        $logged_in = $this->session->userdata('logged_in');
        if(!$logged_in){
            redirect("welcome");
        }
    } 
```

在上面的构造函数块中，我没有得到logged_in 的值。

我也尝试使用打印所有用户数据，`var_dump($this->session->all_userdata)`但我得到的只是一个空字符串。

请告诉我可能是什么原因。我还搜索了 cookie，但在我的计算机中没有找到。下面是我的配置细节

```
$config['sess_cookie_name']     = 'ci_session';
$config['sess_expiration']      = 7200;
$config['sess_expire_on_close'] = FALSE;
$config['sess_encrypt_cookie']  = TRUE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = 'ci_sessions';
$config['sess_match_ip']        = TRUE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T12:19:40.493

我已经解决了我的问题。我只是忘记在配置中更改我的 Cookie 相关变量。——</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:10:34.890

我的第一个猜测是您在初始化类时执行的 __construct 方法中执行此操作 - 在页面甚至加载并且设置会话数据之前。

```
$logged_in = $this->session->userdata('logged_in');
    if(!$logged_in){
        redirect("welcome");
    } 
```

如果您添加到页面方法的开头，它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T15:44:48.837

库是否正在自动加载？检查`config/autoload.php`：

`$autoload['libraries'] = array('database', 'session', 'form_validation');`

或`$this->load->library('session');`在使用课程之前立即致电。

# asp.net - ASP.NET 会话对象和网络场

> ID：12027484
> 
> 赞同：0
> 
> 时间：2012-08-19T15:01:30.733
> 
> 标签：asp.net, web-farm

当应用程序从 Web 场提供时，不能使用 Session 对象。真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:03:03.473

No, you can use SQL-based sessions which can then in theory be accessed by any server in the web farm, with the correct configuration.

For a little more information : [Configure SQL Server to Store ASP.NET Session State](http://support.microsoft.com/kb/317604)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:51:34.573

没有那么多不能。

这取决于您使用什么以及如何使用它。如果您使用的是粘性负载均衡器并且它是这样配置的，那么来自用户的每个后续请求将始终命中场中的同一个成员节点，在这种情况下会话使用是可以的。

如果您没有这样的负载均衡器，或者它被配置为可以由任何节点处理任何请求，那么您需要使用 3rd 方状态服务，例如 asp.net 提供的，或者禁用会话。但是，第 3 方或进程外会话服务对您如何使用它有一定的限制，因此如果您走这条路，您将需要研究和测试任何解决方案。

# visual-studio-2012 - Visual Studio 2012 中宏的替代方法

> ID：12027485
> 
> 赞同：51
> 
> 时间：2012-08-19T15:01:32.590
> 
> 标签：visual-studio-2012, visual-studio-macros

[我在XAML](http://en.wikipedia.org/wiki/Extensible_Application_Markup_Language)开发中将宏广泛用于 ViewModel 属性。[我在WCF](http://en.wikipedia.org/wiki/Windows_Communication_Foundation)中更多地使用它们来生成 Message 和 DataContract 属性。

令我失望的是，我构建的宏无法在 Visual Studio 2012 中使用。

我正在谈论的一个例子，对于一个虚拟机，我会输入这样的东西。

```
int id;
string name; 
```

选择这两行，运行宏并最终得到

```
private int _id;
private string _name;

public int Id
{
   get {return _id;}
   set
   {
      if(_id != value)
      {
        _id = value;
        RaisePropertyChanged("Id");
      }
}

public string Name
{
   if(_name != value)
   {
      _name = value;
      RaisePropertyChanged("Name");
   }
} 
```

我正在寻找其他解决方案的想法来处理丢失的宏。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-09-12T19:28:56.707

宏的最简单替代方法是创建**插件**。我知道，我知道，我也不对此感到兴奋，但实际上它非常容易。它有三个简单的部分：

1.  创建宏项目，逐步完成向导 UI。
2.  编写你的代码。
3.  将宏的 .addin 和 .dll 文件复制到 Visual Studio`Addins`目录。

让我们使用[我编写的一个简单宏来显示关闭解决方案后的起始页](https://stackoverflow.com/questions/523220/awesome-visual-studio-macros/1545872#1545872)并将其转换为加载项。

## 创建宏项目

*   运行 VS 2012 并创建一个新项目。
*   转到 Templates > Other Project Types > Extensibility 并选择**Visual Studio Add-in**。
*   给它一个名称，例如 ShowStartPage。
*   单击确定。这将打开加载项向导。
*   逐步完成向导，选择：
    *   编程语言：我们将使用 C#
    *   应用主机：应选择VS 2012
    *   加载项的名称和说明
    *   在加载项选项页面上，仅选中第二个选项（“我希望我的加载项在主机应用程序启动时加载”）
    *   暂时跳过关于框的内容，然后单击完成。

现在您有一个加载项项目。这是你用它做的事情：

## 编写代码

打开`Connect.cs`文件。（它可能已经打开。一些“DTE”的东西应该看起来很熟悉。）

在类级别添加此代码：

```
SolutionEvents solutionEvents; 
```

将此代码添加到`OnConnection`方法中，就在以下`_addInInstance = (AddIn)addInInst;`行之后：

```
solutionEvents = _applicationObject.Events.SolutionEvents;

solutionEvents.AfterClosing += () =>
{
    _applicationObject.ExecuteCommand("View.StartPage");
}; 
```

点击“运行”按钮来测试你的代码。一个新的 Visual Studio 2012 实例启动，加载项加载。现在测试加载项并确保它可以正常工作。（打开一个解决方案，然后将其关闭；当您这样做时，起始页应该会返回。）

## 部署它

一旦加载项工作，要定期将其与 Visual Studio 2012 一起使用，您只需部署两个文件：

*   `ShowStartPage.AddIn`（来自您的主项目目录）
*   `ShowStartPage.dll`（来自项目的构建目录；例如 bin\Debug 或 bin\Release）

将这两个文件放在您的 VS 2012 插件目录中，可能位于此处：

`C:\Users\[your user name]\Documents\Visual Studio 2012\Addins`

然后退出并重新启动 Visual Studio，您应该会看到加载项正常工作。当您转到“工具”>“加载项管理器”时，您还应该看到它列出。

虽然这比仅仅打开宏编辑器并在其中粘贴宏代码有点麻烦，但它确实具有您可以使用任何您想要的语言的优点，而不是被有点片状的类似 VB 的编辑器困在Visual Studio 的过去版本。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-01T17:31:34.170

我会坚持将文本剪切成[Notepad++](http://en.wikipedia.org/wiki/Notepad%2B%2B)并在那里使用宏，然后再粘贴回来。遗憾的是，该功能不再出现在 Visual Studio 2012 中......

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-09-19T07:10:17.017

[Visual Commander](http://visualstudiogallery.msdn.microsoft.com/deda8ac1-75e6-4068-89ab-b607cee38f2d)扩展（由我开发）是 Visual Studio 2012/2013/2015 中宏的替代品。您甚至可以在新的 VB 命令中重用现有的 Visual Studio 宏代码。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-08T20:30:24.967

Visual Studio有一个加载项[VSScript](http://www.softerg.com/vsscript)，它替换了缺少的宏功能。虽然它不使用 Visual Basic，但使用[Lua](http://en.wikipedia.org/wiki/Lua_%28programming_language%29)脚本语言，您可能想尝试一下。

有一个记录器、带有 IntelliSense 的宏代码编辑器窗口和一个简单的调试器。该加载项还支持早期版本的 Visual Studio，因此如果您更喜欢 Lua 语言而不是 Visual Basic，则可以使用它来代替原始的 Visual Studio 宏。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-27T17:58:55.050

I was very sad to see Macros go too. You can get close with substitutions using the regular expression search and replace inside of Visual Studio 2012\. In your case:

Find:

```
(.*) (.*); 
```

Replace with:

```
private $1 _$2;\npublic $1 $2\n{\n  get {return _$2;}\n  set\n  {\n    if(_$2 = value;\n    RaisePropertyChanged("$2");\n  }\n}\n 
```

That will get you everything except capitalization of property names which Macros would be better for.

But one advantage of the regular expression approach is when the input isn't as simple (e.g. database table DDL statements).

Here are a couple of useful links from MSDN:

[Substitutions in Regular Expressions](http://msdn.microsoft.com/en-us/library/ewy2t5e0.aspx)

[Using Regular Expressions in Visual Studio](http://msdn.microsoft.com/en-us/library/2k3te2cs%28v=VS.110%29.aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-21T02:54:31.903

我将 Notepad++ 与这样的正则表达式一起使用：

寻找：

```
public (.\*) (.)(.*) \\{ get; set; \\} 
```

代替：

```
private \1 \l(\2)\3; \r\n public \1 \2\3 \\{ get \\{ return \l(\2)\3; \\} \r\n set \\{ \l(\2)\3 = value; OnPropertyChanged\(para => this\.\2\3\); \\}\\} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-08T23:52:13.580

Visual Studio 2012 缺少宏让我很失望，因为我有一些宏，我一直使用它来通过单个按键插入标准的小段文本。因此，我编写了一个非常简单的脚本扩展包[VSScripts](https://github.com/tom-seddon/VSScripts)，它允许从命令行程序操作当前选择。

这并不声称是对旧宏系统的全面替代，并且它不提供键盘宏，但它确实可以重新创建多种类型的文本操作宏。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-22T11:31:02.910

查看[http://devexpress.com/coderush](http://devexpress.com/coderush)

模板功能几乎可以满足您的需求。

还有一个免费的“Express”版本。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-07-20T16:02:16.230

这是我为保持宏功能所做的事情......

1.  [在此处](http://www.microsoft.com/en-us/download/details.aspx?id=30668)下载并安装 Visual Studio 2012 SDK （它包含“Visual Studio 包”模板）
2.  新项目 -> Installed.Templates.Visual C#.Extensibility.Visual Studio 包

    向导第 1 页，共 7 页

    ```
    language = C#
    gen new key is fine, or use another if you have one 
    ```

    向导第 3 页，共 7 页

    ```
    check "menu command" 
    ```

    向导第 7 页，共 7 页

    ```
    uncheck both integration and unit test project options 
    ```

    点击完成

3.  在 .cs 文件中：

    ```
    using EnvDTE;
    using EnvDTE80;

    ...
    private void MenuItemCallback(object sender, EventArgs e)
    {
        MenuCommand cmd = sender as MenuCommand;

        // This should start to look like familiar macro code...
        EnvDTE80.DTE2 dte2 = Package.GetGlobalService(typeof(EnvDTE.DTE)) as DTE2;
        TextSelection selection = (TextSelection)dte2.ActiveDocument.Selection;

        dte2.UndoContext.Open("macro command replacement");
        selection.Text = "inserted from macro replacement";
        selection.NewLine(1);
        dte2.UndoContext.Close();
        ... 
    ```

4.  运行项目。一个新的 Visual Studio 实例将从加载的包开始。
5.  在“工具”菜单顶部找到您的命令作为第一个条目。单击它以查看它是否有效。
6.  要真正安装，请转到您的 bin\debug(/release) 目录并双击 .vsix 文件
7.  下次运行时应该安装它
8.  转到菜单*工具*->*选项...* -> environment.keyboard 并将击键映射到您的工具

    ```
    Mapping theme : Visual C# 2005
    Command       : Tool.yourFunctionName (functions defined in the .vsct file) 
    ```

如果您需要多个命令，则需要在 PkgCmdID.cs 中添加菜单 id，在 Guids.cs 中添加 Guids，在 .vsct 中添加布局以及在 *package.cs 中添加一个函数（以及在初始化函数）为每一个。这一切都可以在同一个项目中完成。

我用这个项目用我的旧宏代码创建了几个新的“工具”，然后将我的键映射到它们。前面还有很多工作（和头痛），但没有宏所具有的滞后时间。

可能有一种方法可以在不占用工具菜单的情况下做到这一点。我昨晚开始看这个，终于让它工作了，所以我现在已经完成了（至少在微软决定放弃它之前）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-17T07:44:00.447

我个人喜欢这个[——Visual Commander](http://componentwanted.com/visual-commander-professional-includes-1-year-of-software-updates-and-technical-support/)扩展允许您在 Visual Studio 中自动执行重复性任务。

# ios - 从音频队列会话中删除静音在 ios 中录制的音频

> ID：12027489
> 
> 赞同：0
> 
> 时间：2012-08-19T15:02:34.270
> 
> 标签：ios, ios5, audioqueueservices

我正在使用音频队列从 iphone 的麦克风录制音频，并在检测到静音时停止录制（10 秒内没有音频输入），但我想丢弃音频文件中的静音。

在`AudioInputCallback`函数中，我使用以下代码来检测静音：

```
AudioQueueLevelMeterState meters[1];
UInt32 dlen = sizeof(meters);
OSStatus Status AudioQueueGetProperty(inAQ,kAudioQueueProperty_CurrentLevelMeterDB,meters,&dlen);
if(meters[0].mPeakPower < _threshold)
{ // NSLog(@"Silence detected");} 
```

但是如何删除这些数据包？或者有没有更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T23:23:14.860

您可以通过先将其写入缓冲区来延迟写入，而不是从 AudioQueue 中删除数据包。可以通过将缓冲区放在 inUserData 中轻松定义缓冲区。

完成录制后，如果最后 10 秒没有静音，则将其写回要写入的任何文件。否则只需释放缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T23:48:46.777

记录并关闭文件后，只需打开并截断您不感兴趣的示例数据（注意：您可以使用 AudioFile/ExtAudioFile API 来正确更新任何相关的块/标题大小）。

# c# - 从列表框中的项目下载多个文件

> ID：12027496
> 
> 赞同：0
> 
> 时间：2012-08-19T15:02:55.060
> 
> 标签：c#, winforms

我试图找出以下问题，但由于我一个月前才开始编程，所以我无法做到。

我有一个包含 20 个项目的列表框：

```
private void loadDownloadXMLListBox()
{
    var items = new[] { "BARC", "DEV", "DOM", "EZJ", "GFS", 
                        "IHG", "JD.", "LAD", "LLOY", "MRW", 
                        "NXT", "OCDO", "RBS", "SMWH", "SPD", 
                        "STAN", "SYR", "TALK", "TSCO", "WMH" };
    foreach (var item in items) listDownloadXML.Items.Add(item);

    listDownloadXML.SelectedIndex = -1;
} 
```

这是我从网站下载单个选定文件的代码：

```
private void btnDownloadXML_Click(object sender, EventArgs e)
{
    using (WebClient client = new WebClient())
    {
        client.DownloadFile("http://www.lse.co.uk/chat/" + listDownloadXML.SelectedItem,
                                                    @"..\..\sharePriceXML\" +
                                         listDownloadXML.SelectedItem + ".xml");
    }
    MessageBox.Show("Download Completed! File has been placed in the folder sharePriceXML!");
} 
```

我想单击“全部下载”按钮，然后将下载网站上的所有 20 个项目。我可以知道如何循环浏览列表框中的 20 个项目并将它们全部下载到一个文件夹中而不选择项目吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T15:07:45.323

```
foreach (var item in listDownloadXML.Items)
{
    //... your code to download "item".
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T15:06:33.700

您可以首先将下载单个文件的功能外部化为一个单独的、可重用的方法：

```
public void DownloadFile(string item)
{
    using (var client = new WebClient())
    {
        client.DownloadFile(
             "http://www.lse.co.uk/chat/" + item,
             @"..\..\sharePriceXML\" + item + ".xml"
        );
    }
    MessageBox.Show("Download Completed! File has been placed in the folder sharePriceXML!");
} 
```

进而：

```
private void btnDownloadXML_Click(object sender, EventArgs e)
{
    DownloadFile((string)listDownloadXML.SelectedItem);
} 
```

现在关于多个文件的问题=>您使用循环并`DownloadFile`为列表框中的每个元素调用该方法：

```
foreach (string item in listDownloadXML.Items)
{
    DownloadFile(item);
} 
```

# php - Peripheral Interface Controller (PIC) using PHP language

> ID：12027502
> 
> 赞同：0
> 
> 时间：2012-08-19T15:03:35.113
> 
> 标签：php

Can I program the Peripheral Interface Controller (PIC) using PHP language?
I searched many websites and they didn't mention any clues. I hope someone here can help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:09:27.950

是和否，取决于您对“使用”PHP 的理解。

如果你想使用股票 PHP 安装，那么没有，没有这种方法。但是，您可以使用例如 C 语言创建自己的 PHP 扩展。这样，您可以将底层系统提供的任何内容导入 PHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:12:36.210

最简洁的答案是不。PHP 解释器对于 PIC 处理器的限制来说太重了。

您可以使用 HipHop 之类的工具将 PHP 转换为 c/c++，但您的 PHP 代码将无法访问任何寄存器或输入/输出引脚。

现在长答案是您可以创建一个 PHP 扩展来支持 PIC，然后将其交叉编译到 PIC。那将是一个非常酷的项目。

# .htaccess - 在 .htaccess 中使用多次重写来删除重复的内容

> ID：12027506
> 
> 赞同：0
> 
> 时间：2012-08-19T15:04:08.530
> 
> 标签：.htaccess, url-rewriting

所以基本上我希望每个询问 example.com/index.php 的人都能将 301 重定向到 example.com/，
每个询问任何 www 的人。将 301 重定向到相应的非 www 站点
(www.examle.com/foo -> example.com/foo)的 urls
并且每个请求站点的人都在 url 中使用双斜杠 [还有三重等] 斜杠以将 301
重定向到 url删除了双斜杠（example.com////foo -> example.com）。

如果有人应该对这三种情况进行任何组合，他仍然应该得到 301 重定向到正确的 url (www.example.com////index.php -> example.com)。

所以我想出了这个：

```
RewriteCond %{HTTP_HOST} !^example.com$
RewriteRule ^(.*)$ http://example.com/$1 [R=301]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\ HTTP/ 
RewriteRule ^index\.php$ / [R=301,N] 

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/{2,} [NC]
RewriteRule ^(.*)$ /$1 [R=301] 
```

但是，www.example.com//foo -> [http://example.com/http:/example.com/foo](http://example.com/http:/example.com/foo) = 404！

如何让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:49:03.433

试试这些行：

```
RewriteCond %{HTTP_HOST} !^example.com$
RewriteRule ^(.*)$ http://example.com/$1 [L,QSA,R=301]

RewriteRule ^index.php$ / [L,QSA,R=301]

RewriteRule ^(.*)/{2,}(.*)$ /$1/$2 [L,N,QSA,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:12:17.753

搞逻辑，说真的……

我发现，.htaccess 中的以下内容确实正确（几乎没有什么怪癖）301 重定向到正确的位置......

```
RewriteBase /
RewriteEngine on 
```

...在顶部，重写规则本身：

```
RewriteCond %{HTTP_HOST} !^example.com$
RewriteRule ^(.*)$ http://example.com/$1 [L,QSA,R=301]

RewriteRule ^index\.php$ / [QSA,R=301] 
```

我发誓这些只是我的 .htaccess 中的重写规则。

怪癖是，www.example.com//foo 重定向（301）到 example.com/foo，然后 example.com/foo 再次重定向（301）到 example.com/foo，机器人只有一次......（没有循环）
www.example.com//foo -> example.com/foo -> example.com/foo

Also when www and any other condition is met, redirection happens in steps:
www.example.com/index.php -> example.com/index.php -> example.com/
www.example.com//index.php -> example.com/index.php -> example.com/

But that's not really big problem...

# ruby-on-rails - Avoid "bundle install" to use pre-compiled gems

> ID：12027508
> 
> 赞同：2
> 
> 时间：2012-08-19T15:04:24.893
> 
> 标签：ruby-on-rails, gem, rvm, passenger, bundler

This is my very first question here :)

On a rails 3.2.6 (using rvm and ruby 1.8.7), my Gemfile contains two gems that cause problems when using the `bundle install` command.

Those gems are specified using:

```
gem 'libv8', "~> 3.11.8.3"
gem 'therubyracer', '~> 0.11.0beta6' 
```

My problem is the following: when running `bundle install` command, bundler fetches binaries (precompiled) gems (libv8-3.11.8.3-x86_64-linux.gem and therubyracer-0.11.0beta6-x86_64-linux.gem) and not the plain source ones (libv8-3.11.8.3.gem and therubyracer-0.11.0beta6.gem).

The x86_64 version is incompatible with my server setup: included dynamic library uses an unknown symbol (rb_intern2, out of my old memory, I could be wrong) that makes that the precompiled gems cant be loaded by the application.

So that I *must* install gem from the source packages.

At the moment, I have to `bundle install`, then remove the precompiled gems from my `~/.rvm/gems/...` and then `gem install ~/tmp/libv8-3.11.8.3.gem` and `gem install ~/tmp/therubyracer-0.11.0beta6.gem`, which is not very practical.

Is there any way to force Bundler to fetch the sources release and compile them ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:29:47.447

尝试：

```
bundle install --without x86_64-linux 
```

`x86_64-linux`是一个平台，bundler/rubygems 使用它。

它应该相当于：

```
gem install libv8 -​-platform ruby 
```

细节：

*   [http://gembundler.com/man/gemfile.5.html](http://gembundler.com/man/gemfile.5.html)
*   [http://guides.rubygems.org/command-reference/#gem_install](http://guides.rubygems.org/command-reference/#gem_install)

# web-applications - Multimodule Groovy web application

> ID：12027509
> 
> 赞同：1
> 
> 时间：2012-08-19T15:04:47.633
> 
> 标签：web-applications, groovy

I about to create a multi-module Groovy web application. It should consists of the following parts:

```
* a web frontend,
* a simple web crawler. 
```

The web frontend would communicate with the crawler through a relational database.

I am new to the world of Groovy. **Could you recommend technologies to use (e.g. build system, web framework, etc.) which would fit well together?**

* * *

I wanted to build the web application on Grails and use Gradle to build the whole project. I wasn't able to make the two tools cooperate though.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:39:40.343

Gradle 最适合您的需求。

您可以在此处找到更多重新分级多项目构建的信息：http: [//gradle.org/docs/current/userguide/multi_project_builds.html](http://gradle.org/docs/current/userguide/multi_project_builds.html)

关于 Groovy 编译，您可以在此处阅读：http: [//gradle.org/docs/current/userguide/groovy_plugin.html](http://gradle.org/docs/current/userguide/groovy_plugin.html)

关于 WebApp 处理，您可以在此处阅读：http: [//gradle.org/docs/current/userguide/war_plugin.html](http://gradle.org/docs/current/userguide/war_plugin.html)

**更新**：这里还有一个有趣的帖子（有点旧，但仍然有效）：

[http://mrhaki.blogspot.com/2009/11/gradle-goodness-groovy-multi-project.html](http://mrhaki.blogspot.com/2009/11/gradle-goodness-groovy-multi-project.html)

# javascript - 在自己的墙上发送消息和发布功能不再起作用

> ID：12027511
> 
> 赞同：2
> 
> 时间：2012-08-19T15:04:59.037
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

2-3 个月前，我在 Facebook 中使用 javascript SDK 和图形 API 为我的应用程序创建了社交订阅功能（向朋友发送消息并在自己的墙上发布）。它在我创建时运行良好，但现在，当我访问我的应用程序并尝试再次使用它们时，它不再有效。这很奇怪，因为我在实现它们之后从未接触过该代码。我什至尝试复制和粘贴 Facebook 文档中给出的确切示例 javascript 代码，但它也不起作用。即使我重新编写了我的代码，它仍然无法正常工作。我不知道出了什么问题。任何人都面临与 javascript SDK 类似的问题？提前致谢。

你好，

代码在这里：抱歉回复晚了。

```
<script src='http://connect.facebook.net/en_US/all.js'></script>
      <script> 
      FB.init({
         appId  : 'id',
         status : true, // check login status
         cookie : true, // enable cookies to allow the server to access the session
         xfbml  : true  // parse XFBML
       });
      </script>
      <script>

        function share_wall() {
          // calling the API ...
          var obj = {
            method: 'feed',
            link: 'https://apps.facebook.com/id/',

            name: 'test',
            description: 'blalala'
          };
          FB.ui(obj);
        }   
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:19:25.237

我意识到我实际上和你有同样的问题=\ 转到您的应用程序设置并在基本设置下进行附加配置。

如果您的域名是[http://inspiration.nyp.edu.sg](http://inspiration.nyp.edu.sg)

![在此处输入图像描述](../Images/d690edfb41d808f458a0ba3459368b0f.png)

如果您在本地主机上工作

![在此处输入图像描述](../Images/bc4f4cabb7479cb0b65ff461bc8116e3.png)

**“症状”**

*   以前，您的 JavaScript SDK 函数运行良好。现在，执行 JavaScript SDK 函数会提示您 API 错误代码 191 或错误。 ![在此处输入图像描述](../Images/7f11229e5a6e7ada828f112c228c6f8a.png) ![在此处输入图像描述](../Images/7454a7cca7a0692697b3dcdfd53a5402.png)
*   您的 PHP SDK 功能运行良好。
*   当您将应用程序作为 Facebook 上的应用程序运行时，您的 JavaScript SDK 功能可以正常工作，但当您将应用程序作为页面选项卡运行时则不能。

（就我而言，我最后一次检查的日期是 2012 年 8 月 7 日，我的 JavaScript SDK 函数工作正常。直到 2012 年 9 月 3 日我再次检查它们，然后我遇到了上面提到的错误。）

**我强烈建议大家检查他们的 Page Tab 应用程序的 JavaScript SDK 功能，例如`feed`对话框`apprequests`等。**

# javascript - Event handler with parameters in dynamically created elements

> ID：12027517
> 
> 赞同：1
> 
> 时间：2012-08-19T15:05:28.327
> 
> 标签：javascript

When I assign the event handler without parameters, it works: [http://jsfiddle.net/mUj43/](http://jsfiddle.net/mUj43/)

```
function show(){
    alert('work');
}

var myButton = document.createElement("input");  
myButton.type="button";  
myButton.value="click";   
myButton.onclick=show;

var where = document.getElementById("where");
where.appendChild(myButton);  ​ 
```

but if I pass parameters, it doesn't work: [http://jsfiddle.net/mUj43/1/](http://jsfiddle.net/mUj43/1/)

```
myButton.onclick = show('test'); 
```

How can I use function with parameters in dynamically created elements?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T15:07:19.510

你不能这样做，你可以通过创建一个新函数来使用部分应用程序，然后将其附加为事件处理程序：

```
myButton.onclick=show.bind( myButton, 'test'); 
```

[http://jsfiddle.net/mUj43/2/](http://jsfiddle.net/mUj43/2/)

文档（我建议您阅读，因为此功能对许多其他事情也很有用）和兼容性信息：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T15:08:41.343

您必须创建自己的闭包：

```
myButton.onclick = function () {
    show.call(this, 'test');
}; 
```

你也可以使用@Esailija 的`bind`方法，但是这个方法有更深的浏览器支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T15:08:28.980

尝试：

```
myButton.onclick = function(){show("test");} 
```

或者 ：

```
myButton.onclick = function(){ show.call( this, "test");} 
```

如果要在 show 函数中保留元素对象上下文

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T15:15:48.733

那是因为当您添加事件时，您需要一个函数引用。

在您的第一个示例中，`show`是对函数的引用。

在您的第二个示例中，`show('test')`是对 function 的调用`show`，它不返回任何内容，并且 nothing 不是函数引用。

这就是为什么当您加载页面时，它会提示“工作”（调用该函数），但是当您单击按钮时不会调用任何函数。

然后，你需要一个函数。

你可以声明它：

```
myButton.onclick=f;
function f(){
   show('test')
} 
```

或者您可以使用匿名的：

```
myButton.onclick=function(){
   show('test')
} 
```

# memory - Virtual memory without secondary storage

> ID：12027518
> 
> 赞同：2
> 
> 时间：2012-08-19T15:05:54.987
> 
> 标签：memory, operating-system

Can you have virtual memory without a secondary storage ( hard disk ) ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T15:16:11.057

从纯粹意义上说，是的，您可以：[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)

使内存`virtual`成为现实的事实是，进程的所有内存访问都在 CPU 级别被拦截，并且硬件[内存管理单元](http://en.wikipedia.org/wiki/Memory_management_unit)用于管理进程地址空间到物理内存的映射，无论该存储当前实际位于何处.

您可以拥有没有虚拟内存的计算系统`backing storage`（当您可以将内存页面移出磁盘以供以后检索时，人们称之为它）。

在这种情况下，虚拟内存系统用于允许操作系统拦截和防止非法内存引用，但不是为了增加进程的工作集大小超过已安装的物理内存量。

# android - Listfragment 不显示列表

> ID：12027528
> 
> 赞同：0
> 
> 时间：2012-08-19T15:06:53.597
> 
> 标签：android, android-listview, android-asynctask, android-fragments, android-activity

我试图修改此代码[http://code.google.com/p/krvarma-android-samples/source/browse/trunk/RSSReader/src/com/varma/samples/rssreader/ui/RSSListActivity.java](http://code.google.com/p/krvarma-android-samples/source/browse/trunk/RSSReader/src/com/varma/samples/rssreader/ui/RSSListActivity.java)

为了使它与我的程序一起工作，看起来我的解析工作正常，但列表没有显示，我确定我的其余资源与上面的链接相同，我是否希望搞砸一些明显的东西?

```
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;

import com.actionbarsherlock.app.SherlockListFragment;
import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class newsFragment extends SherlockListFragment{

    private ArrayList<RSSItem> itemlist = null;
    private RSSListAdaptor rssadaptor = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getActivity().setContentView(R.layout.news_layout);

        itemlist = new ArrayList<RSSItem>();

        new RetrieveRSSFeeds().execute();
    }

    @Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    RSSItem data = itemlist.get(position);

    Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse(data.link));

    startActivity(intent);
}

private void retrieveRSSFeed(String urlToRssFeed,ArrayList<RSSItem> list)
{
    try
    {
       URL url = new URL(urlToRssFeed);
       SAXParserFactory factory = SAXParserFactory.newInstance();
       SAXParser parser = factory.newSAXParser();
       XMLReader xmlreader = parser.getXMLReader();
       RSSParser theRssHandler = new RSSParser(list);

       xmlreader.setContentHandler(theRssHandler);

       InputSource is = new InputSource(url.openStream());

       xmlreader.parse(is);
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
}

private class RetrieveRSSFeeds extends AsyncTask<Void, Void, Void>
{
    private ProgressDialog progress = null;

    @Override
    protected Void doInBackground(Void... params) {
        retrieveRSSFeed("http://www.krvarma.com/feed",itemlist);

        rssadaptor = new RSSListAdaptor(getActivity(), R.layout.rssitemview,itemlist);

        return null;
    }

    @Override
    protected void onCancelled() {
        super.onCancelled();
    }

    @Override
    protected void onPreExecute() {
        progress = ProgressDialog.show(
                getActivity(), null, "Loading RSS Feeds...");

        super.onPreExecute();
    }

    @Override
    protected void onPostExecute(Void result) {
        setListAdapter(rssadaptor);

        progress.dismiss();

        super.onPostExecute(result);
    }

    @Override
    protected void onProgressUpdate(Void... values) {
        super.onProgressUpdate(values);
    }
}

private class RSSListAdaptor extends ArrayAdapter<RSSItem>{
    private List<RSSItem> objects = null;

    public RSSListAdaptor(Context context, int textviewid, List<RSSItem> objects) {
        super(context, textviewid, objects);

        this.objects = objects;
    }

    @Override
    public int getCount() {
        return ((null != objects) ? objects.size() : 0);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public RSSItem getItem(int position) {
        return ((null != objects) ? objects.get(position) : null);
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;

        if(null == view)
        {
            LayoutInflater vi = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = vi.inflate(R.layout.rssitemview, null);
        }

        RSSItem data = objects.get(position);

        if(null != data)
        {
            TextView title = (TextView)view.findViewById(R.id.txtTitle);
            TextView date = (TextView)view.findViewById(R.id.txtDate);
            TextView description = (TextView)view.findViewById(R.id.txtDescription);

            title.setText(data.title);
            date.setText("on " + data.date);
            description.setText(data.description);
        }

        return view;
    }
}
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:35:18.127

我认为您的代码的主要问题是这一行：

```
getActivity().setContentView(R.layout.news_layout); 
```

您是否有理由决定从片段的`onCreate()`方法（可能在该布局文件中声明的片段）设置活动的内容视图？删除上面的行，让活动管理自己的布局文件。

# asp.net - sql中带日期的价格差异表

> ID：12027529
> 
> 赞同：0
> 
> 时间：2012-08-19T15:06:53.970
> 
> 标签：asp.net, sql

我的数据库中有下表。

```
ID  DATE            HOTEL_NAME   PRICE
1   16-01-2012      AA           32.00
2   16-01-2012      BC           45.00
3   16-01-2012      DE           47.00
4   17-01-2012      AA           33.20
5   17-01-2012      BC           43.00
6   17-01-2012      DE           51.40 
```

我想要这样的结果：

```
ID  DATE_1       DATE_2       HOTEL_NAME  PRICE_1   PRICE_2   DIFFERENCE
1   16-01-2012   17-01-2012   AA          32.00     33.20     1.20
2   16-01-2012   17-01-2012   BC          45.00     43.00     -2.00
3   16-01-2012   17-01-2012   DE          47.00     51.40     4.40 
```

请告诉我优化此结果的 sql 查询。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T15:38:22.273

您没有指定正在使用的 RDBMS。但是这个解决方案应该适用于所有人：

```
select t1.id, t1.dt date_1, t2.dt date_2, t1.hotel,
    t1.price price_1, t2.price price_2, t1.price - t2.price difference
from test t1
inner join
(
    select id, dt, hotel, price
    from test
) t2
    on t1.hotel = t2.hotel
    and t1.dt < t2.dt 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f29d0/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:19:10.403

我相信这个查询应该做你想做的事：

```
SELECT a.id, a.date, b.date, a.hotel_name, a.price, b.price, (a.price - b.price) FROM  table AS a, table AS b WHERE a.hotel_name = b.hotel_name; 
```

# php - php.ini 阻止 PHP PDO

> ID：12027533
> 
> 赞同：0
> 
> 时间：2012-08-19T15:07:43.023
> 
> 标签：php, mysql

我最近尝试安装 kayako fusion helpdesk (ioncube) 并发现了一个奇怪的行为。当安装正在进行时，我被要求关闭 GPC 魔术引号，所以我创建了一个 php.ini 文件，但令我恐惧的是，在创建自定义 php.ini 后，设置页面在进一步检查时变为空白，我发现无论是什么写在 php.ini 中，或者即使它是空的，添加一个 php.ini 文件也会使设置页面变为空白。向 kayako 寻求帮助，他们只会说 PDO 未启用，我要启用它。检查我发现没有 php.ini 文件启用了 PDO，但是当我添加 php.ini 文件时，PDO 被禁用。

知道为什么 php.ini 文件会阻止 PDO 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T15:13:14.803

在每次我向他们寻求帮助时，我的托管服务支持台一直处于离线状态的几个小时后，我终于发现了问题所在。

IonCube 默认安装在服务器上，但是如果您需要添加自定义设置，例如增加内存大小、文件上传大小或更改服务器上默认的其他变量，则需要创建自定义`php.ini`文件进行处理。如果您`php.ini`在您的站点上使用自定义文件，如果您不添加 IonCube 引用，您的站点上需要 IonCube 才能工作的任何脚本将不再起作用。PDO 功能也是如此。

为了取回它，您需要将以下行添加到`php.ini`文件底部：

```
[Zend]
zend_extension="/usr/local/IonCube/ioncube_loader_lin_5.3.so"
zend_extension_ts="/usr/local/IonCube/ioncube_loader_lin_5.3_ts.so"
extension=pdo.so
extension=pdo_sqlite.so
extension=sqlite.so
extension=pdo_mysql.so 
```

以上仅适用于 PHP 5.3。如果您运行的是 PHP 5.2，则上述数字必须更改为 5.2，您还可以添加其他 Zend Optimizer 参考。请参阅这篇关于[为 PHP 5.2 站点添加 IonCube 和 Zend 的文章](https://billing.handsonwebhosting.com/knowledgebase.php?action=displayarticle&id=224)

# ios - 将下载计数器数据发送到站点

> ID：12027535
> 
> 赞同：-1
> 
> 时间：2012-08-19T15:08:13.813
> 
> 标签：ios, iphone, xcode, download, counter

我想在我的应用程序中制作一个下载计数器，当您下载图像时，计数器会将数据发送到一个我可以读取计数的站点，但我知道如何制作下载计数器，但如何让我将数据发送到一个站点，以便该站点在下载一次时显示 1，在两次下载时显示 2，依此类推..

有人可以让我走上正确的道路吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T15:14:36.957

您将使用 Web 服务器和存储当前计数的数据库。

您将从 0 开始计数。

然后每次请求该图像时，您将向计数器添加一个，将该计数渲染到图像上，并将该图像发送给任何请求它的图像（网络服务器通常会处理最后一个）。

# c - carmack 在 asm 中的 invsqrt

> ID：12027540
> 
> 赞同：1
> 
> 时间：2012-08-19T15:08:59.133
> 
> 标签：c, optimization, assembly, x86, fpu

你好，我对asm没有太多经验，我想在汇编中重写carmack的倒平方根c例程

```
 ;   float InvSqrt (float x){
    ;
    @173:
    push      ebp
    mov       ebp,esp
    add       esp,-8
    ;
    ;       float xhalf = 0.5f*x;
    ;
    fld       dword ptr [@174]
    fmul      dword ptr [ebp+8]
    fstp      dword ptr [ebp-4]
    ;
    ;       int i = *(int*)&x;
    ;
    mov       eax,dword ptr [ebp+8]
    mov       dword ptr [ebp-8],eax
    ;
    ;       i = 0x5f3759df - (i>>1);
    ;
    mov       edx,dword ptr [ebp-8]
    sar       edx,1
    mov       ecx,1597463007
    sub       ecx,edx
    mov       dword ptr [ebp-8],ecx
    ;
    ;       x = *(float*)&i;
    ;
    mov       eax,dword ptr [ebp-8]
    mov       dword ptr [ebp+8],eax
    ;
    ;       x = x*(1.5f - xhalf*x*x);
    ;
   fld       dword ptr [ebp-4]
   fmul      dword ptr [ebp+8]
   fmul      dword ptr [ebp+8]
   fsubr     dword ptr [@174+4]
   fmul      dword ptr [ebp+8]
   fstp      dword ptr [ebp+8]
   ;
   ;        return x;
   ;
   fld       dword ptr [ebp+8]
   ;
   ;    }
   ;
   @176:
   @175:
    pop       ecx
    pop       ecx
    pop       ebp
    ret 
```

这是编译器生成的，但我想对其进行优化并重写为 asm 例程

（生成的此代码远非最佳 i 事物 - 将 fpu 与整数运算混合，也许有意识的人重新编写会大大改善它）

如何优化？

编辑：

至于回答@harold

有一个改进：

*   1.0/sqrt(100.0) 在我的旧机器上需要 140 个周期

*   InvSqrt - c 版本 - 需要 44 个周期（尽管准确度并不惊人）

*   asm 中的 ansver 与 c 版本相同，需要 29 个周期

（测量值可能有些近似，但 IMO 总体上似乎没问题，由 rtdsc 1000x for loop 完成，然后产生 140000/1000 = 140cycles 29000/1000 = 29cycles 等等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:02:01.573

许多进出内存的移动并不是真正必要的。不过，这可能并没有*太大*的改进（尤其是与一开始不做任何事情而只使用 SSE 相比）。

未测试：

```
; i = 0x5f3759df - (reinterpret_cast<int32>(number) >> 1)
mov eax, dword ptr [ebp+8]
sar eax,1
mov edx, 0x5f3759df
sub edx, eax
mov dword ptr [ebp-4], edx
; y = reinterpret_cast<float>(i)
fld dword ptr [ebp-4]
; x2 = numer * 0.5f
fld dword ptr [ebp+8]
fmul dword ptr [half]
; (x2 * y) * y
fmul st(0), st(1)
fmul st(0), st(1)
; 1.5f - (stuff)
fld dword ptr [threehalfs]
fsubrp st(1), st(0)
; y * (stuff)
fmulp st(1), st(0) 
```

它不应该真的太难理解，但如果你想要它们，我会制作一些堆栈图。

# c# - Visual Studio 2012 Web API 项目无法运行 - 找不到 Newtonsoft.Json

> ID：12027543
> 
> 赞同：59
> 
> 时间：2012-08-19T15:09:07.487
> 
> 标签：c#, visual-studio-2012, asp.net-web-api

运行干净的解决方案并重建后，我的 MVC 4 Web API 项目停止工作。它找不到 Newtonsoft.Json。

我知道 MS 现在使用它作为默认的 JSON 序列化程序 - 但它不在项目的引用列表中，我无法从 NuGet 添加它，因为它说它已经安装。

有没有人知道这里可能出了什么问题？

完整的堆栈跟踪：

> [FileNotFoundException：无法加载文件或程序集“Newtonsoft.Json，版本=4.5.0.0，文化=中性，PublicKeyToken=30ad4fe6b2a6aeed”或其依赖项之一。系统找不到指定的文件。]
> MvcWebRole1.WebApiApplication.Application_Error() in d:\Data\Source Controlled Projects\georace\georace\Server\GeoRaceServer\MvcWebRole1\Global.asax.cs:70
> 
> [HttpException（0x80004005）：无法加载文件或程序集“Newtonsoft.Json，版本=4.5.0.0，文化=中性，PublicKeyToken=30ad4fe6b2a6aeed”或其依赖项之一。系统找不到指定的文件。]
> System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +12838633
> System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +175
> System.Web。 HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context)
> +304 System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +404
> System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +475
> 
> [HttpException（0x80004005）：无法加载文件或程序集“Newtonsoft.Json，版本=4.5.0.0，文化=中性，PublicKeyToken=30ad4fe6b2a6aeed”或其依赖项之一。系统找不到指定的文件。]
> System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +12851296 System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +159 System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) + 12679949

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-08-19T15:35:37.387

好的 - 在我自己周围找到了一个工作，发布以防其他人被这个 MS 错误所困扰。问题是您无法添加 NuGet 引用，因为默认情况下它已包含在包中。所以...

1.  打开 packages.config
2.  删除 Newtonsoft.Json 条目。
3.  保存并构建
4.  从 NuGet 重新添加 Newtonsoft.Json。
5.  构建并运行

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-01-16T20:16:28.270

对于您想要重新安装的 NuGet*已*安装的任何包，只需在**包管理器控制台**中键入以下命令：

在任何项目中更新：

```
Update-Package Newtonsoft.Json -Reinstall 
```

在特定项目中更新

```
Update-Package Newtonsoft.Json -Reinstall -Project My.App 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2014-02-06T20:35:05.487

对我来说，修复此错误的唯一方法是将缺少的部分添加到我的 web.config 文件中，我从这里的答案中得到： [https ://stackoverflow.com/a/20414714/940783](https://stackoverflow.com/a/20414714/940783)

这是我需要添加的内容：

```
 <dependentAssembly>
    <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0" />
  </dependentAssembly> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-11T01:00:43.947

我结合了其他 SO 贡献者所说的几个选项，以及一个新选项。

首先，事实证明 Nuget 2.1 有一些问题，这个问题被记录在一个 bug 中，并在 2.2.2 中得到修复。见这里：[https ://nuget.codeplex.com/workitem/3050](https://nuget.codeplex.com/workitem/3050)

所以，我做了以下步骤：

1.  根据链接将 Nuget 版本更新为 2.2.2
2.  通过从 NUget 卸载删除了我项目中对 Json 的所有引用（右键单击项目并找到包，然后卸载（即使这样也没有这样做）
3.  从计算机中物理删除了包文件。我在这里找到了包文件：//projectdir/packages/Newtonsoft.JSON
4.  从物理目录（//projectname/packages.config）中删除了packages.config文件
5.  完成这一切后，我通过 Nuget 再次添加了 Newtonsoft，然后进行了重建，并且成功了。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-04T13:44:57.020

我有同样的问题（在 VS2012 中）。没有答案对我有帮助。最后我解决了这个问题：

1) 转到工具-> 扩展和更新这里更新（或安装）“NuGet 包管理器”接下来转到“在线”并安装“快速添加 NuGet”和“NuGet 参考”

2）在您的项目中安装所有1）后，右键单击“参考”并在“已安装的包”中选择“管理Nuget包”找到Json.NET。单击卸载 - 您现在无法执行此操作，但它会显示您必须首先卸载的内容（某些 ASP Web Api 客户端）。所以卸载所有这些并再次尝试卸载“Json.NET”。现在转到“在线”并安装“Json.NET”、“ASP.NET WEB API 客户端库”和“ASP.NET WEB API 客户端 OData”。

3) 在 Global.asax 中删除行“WebApiConfig.Register(GlobalConfiguration.Configuration);”

构建解决方案，一切都应该没问题..我希望这可以帮助某人:) gl

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-15T02:58:28.117

检查您是否有对 JSON.NET 的“旧样式”（nuget 前）引用，指向嵌入在您的项目中的过时本地副本。

我有一个旧的`Reference\Lib\JSON.NET`，它在我的参考路径中并获得优先权。

检查 JSON.NET 属性页是否指向预期的 Nuget 包版本。

我在实时部署的 Team Server 构建中遇到了这个问题。我必须修复我原来的解决方案并进行干净的构建，以确保旧的`Reference\Lib\`DLL 没有被拾取。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-18T20:40:52.330

就我而言，我检查了一个同事的项目，该项目不知何故使我的 Newtonsoft.Json 参考变坏了——所以我不得不删除它。右键单击项目-> 管理 NuGet 包。在左侧单击“Installed Packages”，然后选择 Json.NET 并卸载它。在我的情况下，我还必须卸载其他依赖包（Microsoft ASP.Net Web API 和其他）。选择左侧的“在线”，搜索Json.Net，重新安装。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-24T15:15:54.517

我遇到了相同的 FileNotFoundException，事实证明我已经在我的项目中引用了 Newtonsoft.Json，但是“复制本地”属性未设置为 TRUE。只需将其设置为 TRUE，这样 dll 就会被复制到输出目录（如果您也是这种情况）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-02-20T18:31:02.323

我测试了这里所说的一切，但没有任何效果。就我而言，我有一个这样的路径文件夹。

*   #项目/网络/应用程序/...

# 我的问题的原因。我删除了 # 并且工作正常。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-03-16T14:13:49.480

导致我的 Newtonsoft.json 问题的原因略有不同。我开发了一个针对 .Net 4.5 构建的 Windows 应用程序。后来发现客户的环境只支持.Net 4.0。我已将解决方案复制到一个新区域以保留 .Net 4.5 的工作并将解决方案属性更改为 Microsoft.Net 4.0。我得到了 Newtonsoft.json 找不到的错误，我错过了一个参考。

我按照上述程序删除了 packages.config；删除 Newtonsoft.json；确保 Newtonsoft.json 已从 \packages 目录中删除；然后从 NuGet 重新安装 Newtonsoft.json。我能够使用 .Net 4.0 编译和运行应用程序

在此之前，packages.config 文件显示 Newtonsoft.json 所针对的 .Net 版本是 .Net 4.5。删除和添加 Newtonsoft.json 现在将目标设为 .Net 4.0。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-26T15:10:35.393

我错误地做到了这一点，它自我整理得很好。

开始一个新的 VS 2012 项目后，我使用 NuGet 安装 Newtonsoft.JSON，如前所述，已经安装了 4.5.6 版，看到它被卸载并安装了 4.5.10 给我留下了深刻的印象。

甜的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-02-18T09:51:29.463

您可以尝试使用 -IgnoreDependencies 标志安装 SocialAuth.Net 包，然后手动安装依赖项并确保仅安装最新版本的 Json.Net 库。

然后在运行时 SocialAuth.Net 包将尊重程序集重定向并加载 Json.Net (v4.5) 而不是旧版本。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-07-16T12:09:28.340

我在 VS2012 express 中遇到了同样的问题，我设法从

> 工具 -> NuGet 包管理器 -> 管理解决方案的 NuGet 包

在那里我找到并安装了 Newtonsoft Json。到那时，它还没有安装在解决方案的任何项目中。

# python - 判断Django是否在开发服务器下运行

> ID：12027545
> 
> 赞同：12
> 
> 时间：2012-08-19T15:09:18.463
> 
> 标签：python, django

有没有办法确定 Django 是否在 localhost 上运行并相应地设置`DEBUG`变量`settings.py`。

因此，如果我在本地运行服务器，它将设置`DEBUG`为`True`，否则将其设置为`False`.

本地`python manage.py runserver`
主机：不是本地主机：`python manage.py runserver 0.0.0.0:8000`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-19T16:54:46.637

正如 Bernhard Valant 所建议的那样，您只需检查`runserver`.`sys.argv`

你可以用这个替换你的`DEBUG`作业`settings.py`：

```
DEBUG = (sys.argv[1] == 'runserver') 
```

您还应该`import sys`在`settings.py`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-17T09:31:33.580

这不是最好的方法，但它有效:)
为了更好的东西，你可以使用[django-configurations](https://django-configurations.readthedocs.io/en/stable/)

```
import sys    
# Determine if in Production or Development
if (len(sys.argv) >= 2 and sys.argv[1] == 'runserver'):
    DEBUG = True 
    #...       
else:
    DEBUG = False
    #... 
```

或者您可以将它用作**little_birdie**在评论中提到的[单线：](https://stackoverflow.com/users/2945815/little-birdie)
`DEBUG = (len(sys.argv) > 1 and sys.argv[1] == 'runserver')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T15:43:37.427

对于您的问题，无法获得此已接受且相关的答案的永久链接。所以，只需粘贴它：-

```
server = request.META.get('wsgi.file_wrapper', None)
if server is not None and server.__module__ == 'django.core.servers.basehttp':
    print 'inside dev' 
```

*当然，wsgi.file_wrapper 可能会设置在 META 上，并且在另一个服务器环境上非常巧合地有一个名为 django.core.servers.basehttp 的模块中的类，但我希望这能涵盖您。*

PS：请参考[如何判断我的 Django 应用程序是否在开发服务器上运行？](https://stackoverflow.com/questions/1291755/how-can-i-tell-whether-my-django-application-is-running-on-development-server-or)更多细节

# python - 内置 Numpy 异常？

> ID：12027547
> 
> 赞同：6
> 
> 时间：2012-08-19T15:09:25.620
> 
> 标签：python, exception, numpy

在 numpy 中是否有可以调用的通用异常？从 numpy 文档中，我只看到了特定的文档，例如[`LinAlgError`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.LinAlgError.html#numpy.linalg.LinAlgError)

例如，我知道 Python 内置了以下错误类型：

*   `Exception`
*   `StandardError`
*   `ArithmeticError`
*   `ImportError`
*   `IndexError`
*   `KeyError`
*   `NotImplementedError`

等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T15:19:41.917

不，`LinAlgError`不继承任何东西。这是线性代数失败时的一般错误。

```
>>> numpy.linalg.LinAlgError.__bases__
(<type 'exceptions.Exception'>,) 
```

如果您解释了您想提出此“一般例外”的特定情况，我们可能会建议使用什么。

# ios - MonoGame iOS：资产去哪儿了？

> ID：12027549
> 
> 赞同：0
> 
> 时间：2012-08-19T15:09:31.193
> 
> 标签：ios, monogame

我可以转换最简单的 WP7 项目，但是没有运气弄清楚 sprite 字体文件等应该去哪里......我看了一些 Android 示例，但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:17:34.283

您只需将 Content 文件夹添加到 MonoDevelop 项目并将文件设置为“Content”构建类型。所有这些文件都将与可执行文件一起打包。

# css - .eot 字体奇怪的行为

> ID：12027551
> 
> 赞同：0
> 
> 时间：2012-08-19T15:09:59.623
> 
> 标签：css, fonts, font-face

这是演示：http: [//jsfiddle.net/ENqy6/](http://jsfiddle.net/ENqy6/)

.rur div 中有 3 个西里尔字母。

自定义字体“Rouble”将第一个字母转换为 rur 符号并隐藏其他两个字母（字形宽度设置为 0）。

它工作正常。但是 ie8 将最后两个字母显示为空格！猜猜它的 .EOT 字体格式问题。

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:14:57.263

# database-design - 在线评价系统的数据库设计

> ID：12027553
> 
> 赞同：0
> 
> 时间：2012-08-19T15:10:29.020
> 
> 标签：database-design, database-schema

我正在开发一个在线员工评估系统，但在试图为这个项目找到最佳的桌子设计时我发现自己遇到了麻烦。到目前为止，我有以下表格：用户、活动、表格、章节、问题。每个评估活动必须有一个或多个表格，每个表格必须有一个或多个章节，每个章节必须有一个或多个问题。我当前的表格布局在这里：[http ://cl.ly/image/3z441W2J3t1r](http://cl.ly/image/3z441W2J3t1r)

有两种类型的用户：员工和经理。在评估方面，员工必须填写一份表格（自我评估），而经理必须完成他们的自我评估和对每个员工的评估。

考虑到这一点，我应该如何设计表格来为每个用户分配表格？

任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:06:34.583

不要混淆经理和员工。在完成自我评估时，所有经理都是员工，但只有经理会撰写对其他员工的评估。

因此，对于自动评估，您只需要在 USER_ID 上的 FORMS 和 USERS 之间有一个外键。对于管理评估，您需要在 (MANAGER_GUID, USER_ID) 上的 FORMS 和用户之间有一个外键。

顺便说一句，为什么 MANAGER_GUID 和 USER_ID 有两种不同的数据类型？Manager 只是管理其他用户的 USER，因此 MANAGER_ID 应该是 USER_ID 上的外键。

# macos - 如何以编程方式获取 diskutil 列表类型的输出

> ID：12027556
> 
> 赞同：0
> 
> 时间：2012-08-19T15:10:36.517
> 
> 标签：macos, cocoa, filesystems

我正在尝试读取 hfs 标头，因此我需要首先打开卷磁盘文件，例如 /disk/disk01 ...

diskutil list 提供相同的输出，但如何在可可/碳应用程序中获得它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T17:58:02.100

您可以为此使用[DiskArbitration 框架](http://developer.apple.com/library/mac/ipad/#documentation/Darwin/Reference/DiscArbitrationFramework/_index.html)。

# iphone - 如何从位置列表中获取最近的区域？

> ID：12027558
> 
> 赞同：0
> 
> 时间：2012-08-19T15:11:08.610
> 
> 标签：iphone, objective-c, ios, geolocation, latitude-longitude

我有一个 API，它返回一个城市内不同区域的列表以及该区域的天气。我想根据我当前的位置获取最近的区域。

API 返回

*   区域
*   纬度
*   经度
*   天气

如何根据这些数据找到最近的区域？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T15:25:38.763

您必须为所有区域创建 CLLocation 对象，并为用户的当前位置创建一个对象。然后使用类似于下面的循环来获取最近的位置：

```
NSArray *allLocations; // this array contains all CLLocation objects for the locations from the API you use

CLLocation *currentUserLocation;

CLLocation *closestLocation;
CLLocationDistance closestLocationDistance = -1;

for (CLLocation *location in allLocations) {

    if (!closestLocation) {
        closestLocation = location;
        closestLocationDistance = [currentUserLocation distanceFromLocation:location];
        continue;
    }

    CLLocationDistance currentDistance = [currentUserLocation distanceFromLocation:location];

    if (currentDistance < closestLocationDistance) {
        closestLocation = location;
        closestLocationDistance = currentDistance;
    }
} 
```

需要注意的一点是，这种计算距离的方法使用 A 点和 B 点之间的直线。没有考虑道路或其他地理对象。

# php - 颜色提取脚本 - ForEach 错误

> ID：12027561
> 
> 赞同：1
> 
> 时间：2012-08-19T15:11:21.340
> 
> 标签：php, foreach

所以我从互联网上下载并编辑了一个脚本来提取图像并找出它包含的十六进制值及其百分比：

脚本在这里：

```
<?php
$delta = 5;
$reduce_brightness = true;
$reduce_gradients = true;
$num_results = 5;

include_once("colors.inc.php");
$ex=new GetMostCommonColors();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Colour Verification</title>

</head>
<body>
    <div id="wrap">
    <img src="http://www.image.come/image.png" alt="test image" />
    <?php
        $colors=$ex->Get_Color("http://www.image.come/image.png", $num_results, $reduce_brightness, $reduce_gradients, $delta);
        $success = true;
        foreach ( $colors as $hex => $count ) {
            if ($hex !== 'e6af23') {$success = false; }
        if ($hex == 'e6af23' && $count > 0.05) {$success = true; break;}
        }

        if ($success == true) { echo "This is the correct colour. Success!"; } else { echo "This is NOT the correct colour. Failure!"; }

?>
    </div>

</body>
</html> 
```

这是文件 colors.inc.php 的 pastebin 链接

[http://pastebin.com/phUe5Pad](http://pastebin.com/phUe5Pad)

现在，如果我使用服务器上的图像，脚本可以正常工作，例如在 Get_Color 函数中使用 /image.png。但是，如果我尝试使用来自另一个网站的图像，包括[http://www.site.com/image.png](http://www.site.com/image.png)，那么脚本将不再有效，并且会出现以下错误：

**警告：在第 22 行的 ... 中为 foreach() 提供了无效参数**

有没有人能够看到我可以热链接到图像的方式，因为这是使用脚本的全部意义！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:39:15.533

您必须将文件下载到服务器并将其完整文件名`Get_Color($img)`作为`$img`参数传递给方法。

因此，您需要调查另一个 SO 问题：[从 URL 下载文件到服务器](https://stackoverflow.com/questions/3938534/download-file-to-server-from-url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:39:03.950

该错误表明返回的值`Get_Color`不是可以迭代的有效对象，可能不是集合。你需要知道`Get_Color`内部是如何工作的，以及当它没有得到它想要的东西时会返回什么。

同时，您可以 [使用 PHP] 将外部 url 中的图像下载到您的站点，然后进入所需的文件夹并从那里读取图像。

```
$image = "http://www.image.come/image.png";
download($image, 'folderName'); //your custom function
dnld_image_name = getNameOfImage();

$colors=$ex->Get_Color("/foldername/dnld_image_name.png"); 
```

顺便问一下，您确认图片网址正确吗？

# html - 逐渐斜体？

> ID：12027563
> 
> 赞同：6
> 
> 时间：2012-08-19T15:11:27.117
> 
> 标签：html, css, text, typography

有没有办法从普通文本逐渐过渡到斜体，每个字符都会稍微改变倾斜角度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T16:12:12.387

Robin 的想法确实有效（[**DEMO**](http://dabblet.com/gist/3395805)），但是那个小提琴有很多问题，我不确定我是否可以将它们放入一条评论中。

首先，`span`是一个`inline`元素并且`transform`作用于`block`元素。因此，您要么使用类似or的`block`元素，要么在.`div``p``display: block``span`

**不要使用`skew`**！**使用`skewX`**. `skew`出现在早期草稿中，此后已被删除。Firefox 14 甚至不支持它，尽管由于兼容性原因它在 Firefox 15 中重新引入，并且仍然适用于 Chrome、Safari 和 Opera。

始终将无前缀版本放在最后。在即将到来的 Firefox、Opera 和 IE 版本中，[转换应该没有前缀。](http://caniuse.com/#feat=transforms2d)

您还需要在类名前加一个点。

像这样的东西：

```
<div class="skewme">Tyrannosaurus Rex</div> 
```

CSS部分很简单

```
.skewme {
   -webkit-transform: skewX(-20deg);
      -moz-transform: skewX(-20deg);
        -o-transform: skewX(-20deg);
           transform: skewX(-20deg);
} 
```

为了从普通文本逐渐过渡到倾斜文本，您需要[**过渡**](https://developer.mozilla.org/en-US/docs/CSS/transition)或[**关键帧动画**](https://developer.mozilla.org/en-US/docs/CSS/@keyframes)。

HTML：

```
<div class="skewme1">Tyrannosaurus Rex</div> 
```

CSS：

```
.skewme1 {
    -webkit-animation: slowskew 1.5s infinite alternate;
           -moz-animation: slowskew 1.5s infinite alternate;
             -o-animation: slowskew 1.5s infinite alternate;
                animation: slowskew 1.5s infinite alternate;
}
@-webkit-keyframes slowskew {
    to { -webkit-transform: skewX(-20deg); }
}
@-moz-keyframes slowskew {
    to { -moz-transform: skewX(-20deg); }
}
@-o-keyframes slowskew {
    to { -o-transform: skewX(-20deg); }
}
@keyframes slowskew {
    to { transform: skewX(-20deg); }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T15:32:01.343

你的字体很可能有完全不同的斜体字形和普通文本，所以即使使用 SVG crazy-clever 在它们之间变形也可能看起来很奇怪。

另一种方法是应用[CSS3 2D 倾斜变换](http://www.w3schools.com/css3/css3_2dtransforms.asp)。这不会在正常形式和斜体形式之间转换，而只会倾斜正常形式。这可能会或可能不会给您带来视觉上吸引人的结果，具体取决于您的字体。旧浏览器也不支持它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T15:35:14.140

不是斜体不，你只能选择`normal`或`italic`（`oblique`它在排版中具有特定含义，但通常不适用于标准网络字体）。

但是，您可以使用 CSS 转换以非常讨厌的方式伪造它。例如：

```
<span class="skew0">R</span><span class="skew1">R</span><span class="skew2">R</span><span class="skew3">R</span> 
```

和：

```
span { display: inline-block; }
.skew1 { transform: skewX(-5deg); }
.skew2 { transform: skewX(-10deg); }
.skew3 { transform: skewX(-15deg); } 
```

`skew()`有被从规范中删除的危险——它已经从 Mozilla 中删除，但由于不兼容的问题被重新添加——显然你需要添加标准的供应商前缀。

测试：http: [//jsfiddle.net/GtQXw/1/](http://jsfiddle.net/GtQXw/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T15:14:03.540

是的 - 你必须创建一个图像。否则没有

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-19T15:15:42.133

您可能可以通过 SVG 来做到这一点，但是您将失去通过图像获得的浏览器支持。IE8 及更早版本不支持 SVG、IIRC。

# python - python __init__ 参数变成一个元组

> ID：12027568
> 
> 赞同：4
> 
> 时间：2012-08-19T15:12:32.783
> 
> 标签：python, init

代码：

```
class MyClass:
    def __init__(self, aa  ):
        print('aa='+str(aa)+' of type '+str(type(aa)))
        self.aa = aa,
        print('self.aa='+str(self.aa)+' of type '+str(type(self.aa)))

DEBUG = MyClass(aa = 'DEBUG') 
```

输出：

```
aa=DEBUG of type <type 'str'>
self.aa=('DEBUG',) of type <type 'tuple'> 
```

为什么`self.aa`变成元组而不是字符串？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-19T15:14:27.567

因为这里有逗号：

```
self.aa = aa, 
```

这是[包含一个元素的元组的语法](http://wiki.python.org/moin/TupleSyntax)。

# asp.net - VS 2012：RouteTable.Routes.Add 不起作用？

> ID：12027576
> 
> 赞同：0
> 
> 时间：2012-08-19T15:13:41.817
> 
> 标签：asp.net, visual-studio, rest, visual-studio-2012

我在 VS 2010 中有一个 WCF REST 服务项目，我在应用程序启动时更改 RouteTable 添加一个路由：

RouteTable.Routes.Add(new ServiceRoute("AppServer", new WebServiceHostFactory(), typeof(MyService)));

它在 vs 2010 中工作，在开发服务器中运行时，我可以从浏览器调用方法，例如：

```
http://localhost:12345/AppServer/MyMethod 
```

然后我安装了 VS 2012，转换了项目，它编译得很好，但我不能再通过 AppServer 路由访问方法了。它只是说“找不到资源。”。

我检查了服务，仍然调用了添加路由的行。

任何想法可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:04:12.630

在配置中找到一个pb，关闭。

# css - 在文本和图标字体之间保持相同的距离

> ID：12027579
> 
> 赞同：0
> 
> 时间：2012-08-19T15:13:54.023
> 
> 标签：css, tabs, twitter-bootstrap

我有一个带有 Css Icon 字体的折叠选项卡，我想在 Title 和 Icon 字体箭头之间保持相同的距离。

这里的例子

[http://jsfiddle.net/2D3V5/2/](http://jsfiddle.net/2D3V5/2/)

如果左边的文本长度相同，图标字体箭头保持相同的距离，这没关系，但这不会在我的标签中发生，因为显然文本会有所不同，所以我需要找出如何保持箭头图标与文本的距离相同，与文本的长度无关。

希望解释清楚。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:42:47.130

您可以将图像浮动到右侧。这是管理等距的简单方法。另外，其余部分的图像是倒置的。改变他们的课程。

这是编辑过的小提琴：[**小提琴**](http://jsfiddle.net/2D3V5/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:29:11.543

见[http://jsfiddle.net/2D3V5/3/](http://jsfiddle.net/2D3V5/3/)

如果您想让箭头图标与文本保持相同的距离，但又希望箭头对齐，则必须将箭头放在标题的左侧。

# android - 如何在 android 中为 ARM v7I 编译模块？

> ID：12027589
> 
> 赞同：-3
> 
> 时间：2012-08-19T15:15:22.017
> 
> 标签：android, linux, android-ndk, linux-kernel, arm

我是 Linux 世界的新手，对编译器了解不多。所以有人知道如何为 arm v7I 编译 tun.ko 模块吗？我面临一些问题。

```
<3>[16823.190948] tun: version magic '2.6.29 preempt mod_unload ARMv6 ' should be '2.6.38.6 preempt mod_unload ARMv7 ' 
```

我正在使用最新的 NDK，但每次都遇到同样的问题，我也使用了其他编译​​器，但仍然如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:30:07.003

你有很多交叉编译器工具链，比如我正在使用的一个是 gcc-4.3.3,Multi-lib,gnueabi 使用它进行编译你需要设置 ARCH = arm 和 PATH =“交叉编译器路径”和 CROSS_COMPILE=arm -linux-

# .net - 在 Windows 8 上安装 Visual Studio 2012 Ultimate

> ID：12027597
> 
> 赞同：20
> 
> 时间：2012-08-19T15:16:23.383
> 
> 标签：.net, visual-studio, windows-8, visual-studio-2012, .net-4.5

在尝试在 Windows 8 Release Preview 上安装 Visual Studio 2012 Ultimate 试用版时，我收到以下错误消息

> 此机器上安装的 .Net Framework 不满足最低要求版本：4.5.50709。

所以我尝试安装所需的 .net 框架版本，但这给了我以下错误

> Microsoft .NET Framework 4.5 已经是该操作系统的一部分。您不需要安装 .NET Framework 4.5 可再发行组件。

我正在 32 位 Intel Core2Duo 系统上运行 Windows 8 发布预览版，并且已经安装了 Visual Studio Express。

如果您有任何猜测，有人可以帮忙。这种“追尾”问题令人沮丧。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T08:05:26.397

该解决方案至少适用于 32 位 Windows 8 Release Preview 上的 Express 2012 for Web：

1.  在注册表中找到 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full 节点
2.  右键单击节点，选择权限，然后单击“高级”按钮并将该节点的所有者更改为管理员，然后单击确定并授予管理员完全控制权限
3.  将“版本”参数的值更改为“4.5.50709”

[我在http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/e968a2e7-a996-4492-b0c6-da94a1403cb6](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/e968a2e7-a996-4492-b0c6-da94a1403cb6)找到了这条指令。它还包含 64 位 Windows 注册表路径。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-08T10:37:04.767

其他解决方案：

解决方案 A)

*   下载 .NET 4.5 安装程序并解压（使用 /x 运行，或在 WinRAR 中打开等）
*   转到提取的文件夹并打开 ParameterInfo.xml。完全删除 TAG 阻止程序：删除分支 <blockers>。
*   执行 SEtup.exe 并尝试再次安装。

（它在 Windows 8 Ultimate 版本中对我有用）。

解决方案 B)

*   运行 regedit.exe。
*   编辑框架版本密钥。
    *   WIN64 位：转到以下键：HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\NET Framework Setup\NDP\v4\Full
    *   WIN32 位：转到 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full

注意：您需要先更改权限，然后才能编辑任何内容。首先，将所有者更改为 Administrators，然后为 Administrators 主体分配完全控制权。- 最后，只需将“版本”的值更改为“4.5.50709”。要更改编辑注册表的权限，请在 Regedit 中选择您的键，右键单击-->权限-->高级-->所有者，选择管理员、应用。然后将完全控制权授予“管理员”

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-19T15:23:56.293

这不受支持，也不会起作用。VS 和 Windows 都在发展，只有少数非常具体的 OS 和 IDE 组合可以协同工作。由于两者现在都是 RTM，这应该不再是问题，而且 MS 肯定不会不遗余力地让这些一次性测试平台确保兼容性。

如果您是 MSDN 或 technet 订阅者，您应该能够下载 Win8 RTM 映像*用于开发目的*（测试、验证等）。否则，您将不得不购买并安装 Windows 8 零售版，或者在您现有的操作系​​统（大概是 Windows 7）上安装 VS2012。同样，可以从 MSDN 获得 VS 2012 RTM。请注意，VS2012 仅支持 Windows 8 上的“现代 UI”开发（或本周所称的任何内容）（Windows 7 和 Windows 8 都支持常规 .NET 框架开发）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T14:29:19.783

您现在还可以从这里获得 Windows 8 Enterprise 的 90 天试用版

[http://msdn.microsoft.com/en-us/evalcenter/jj554510.aspx](http://msdn.microsoft.com/en-us/evalcenter/jj554510.aspx)

# html - 反正有这样的HTML变量吗？

> ID：12027602
> 
> 赞同：1
> 
> 时间：2012-08-19T15:17:08.470
> 
> 标签：html, variables

我正在一个不允许使用客户端脚本的网页中工作。该网页使用了一个非常巨大的详细标签，其形状如下：

```
<embed src="X" flashvars="Y"/> 
```

它是模板的一部分，所以它会在很多页面中使用，所以我必须以一种简单的方式更改硬编码的参数。

我想知道是否有办法在 HTML 中做这样的事情：

```
<var name="X" content="foo">
<var name="Y" content ="bar">

<embed src="<X/>" flashvars="<Y/>"/> 
```

所以最后一部分不会在模板和所有子继承页面中更改

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T15:19:11.430

不，这是不可能的。HTML 是静态的。

如果您不能使用客户端脚本，您是否考虑过服务器端脚本？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T15:21:37.800

仅 HTML 无法做到这一点。HTML 是一种标记语言，而不是一种编程语言。它甚至没有变量。

您需要为此进行服务器端编码。PHP 是最受欢迎的，尽管还有许多其他可用的。然后你可以这样做：

```
<?php
    $x = 'something';
    $y = 'somethingElse';
?>
<embed src="<?php echo $x; ?>" flashvars="<?php echo $y; ?>"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T15:19:22.177

不直接通过 HTML。

您可以使用 JavaScript 来注入值，但 HTML 本身不存储变量。

# c# - 从数据网格获取数据到视图模型

> ID：12027604
> 
> 赞同：0
> 
> 时间：2012-08-19T15:17:14.477
> 
> 标签：c#, wpf, mvvm

我有一个包含 DataGrid 的用户控件（datagrid 允许用户在网格上编辑），但是当我通过 viewmodel 属性从 datagrid 获取集合数据时，但集合只获取行数但不获取 datagrid 内容。

看法

```
<UserControl>
    <Grid>
        <DataGrid ItemsSource="{Binding}" SelectionUnit="CellOrRowHeader" CanUserAddRows="True" CanUserDeleteRows="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Day" Binding="{Binding Monday}"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl> 
```

视图模型

```
public class RuleDetailViewModel : UserControlViewModelBase
{
    ObservableCollection<RuleDetailExpViewModel> _ruleDetailList;

    public RuleDetailViewModel()
    {
        _ruleDetailList = new ObservableCollection<RuleDetailExpViewModel> 
        { 
            new RuleDetailExpViewModel(), 
            new RuleDetailExpViewModel() 
        };
    }

    public ObservableCollection<RuleDetailExpViewModel> RuleDetailList
    {
        get { return _ruleDetailList; }
        set 
        { 
             _ruleDetailList = ruleDetailList;
            OnPropertyChanged("RuleDetailList");
        }
    }
} 
```

我尝试了 ItemsSource="{Binding RuleDetailList}" 和 ItemsSource="{Binding}" DataContext="{Binding RuleDetailList}" 但没有成功。

如何从视图获取数据到视图模型？

对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:59:04.877

改变你的看法

```
<UserControl>
    <Grid>
        <DataGrid ItemsSource="{Binding RuleDetailList}" SelectionUnit="CellOrRowHeader" CanUserAddRows="True" CanUserDeleteRows="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Day" Binding="{Binding Monday}"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl> 
```

并且`RuleDetailExpViewModel`必须包含该属性`Monday`

# matlab - 从 matlab 打开一个特定的应用程序？

> ID：12027606
> 
> 赞同：0
> 
> 时间：2012-08-19T15:17:51.980
> 
> 标签：matlab, pdf

我想使用 winopen 或 open 函数从 matlab 打开 PDF。我只想在我的程序中使用 Adob​​e PDF 阅读器，但通常希望 Windows 的默认应用程序是 Adob​​e 专业的。有没有办法确保打开 Adob​​e 阅读器并打开我想要打开的文件，而无需使用 Adob​​e 专业版并更改我的首选项默认设置？

我希望能够做这样的事情：

```
x = 'row6col8.pdf'
!start acrord32.exe x 
```

但这对解决这个问题没有任何办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:00:13.237

[`winopen`](http://www.mathworks.com/help/techdoc/ref/winopen.html)文档表明用于打开文件的程序由文件名的扩展名决定 。

您不能通过`!your-pdf-viewer file.pdf`matlab 使用系统命令，并指定要使用的 pdf 查看器和要查看的 pdf 文件吗？就像是：

```
>> !start acrord32.exe file.pdf 
```

我不在 Windows 机器上，所以我不确定如何从 Windows 终端打开文件的确切命令......

编辑：

我懂了。然后你可以这样做：

```
x = 'filename.pdf';
str = sprintf('start acrord32.exe %s', x);
system(str); 
```

# html - 嵌入 Flash 元素并使其不可点击

> ID：12027607
> 
> 赞同：0
> 
> 时间：2012-08-19T15:17:53.087
> 
> 标签：html, embed, swfobject

我正在尝试将此 Flash 横幅嵌入其中，但其上的 url 被弄乱了。所以我用正确的 url 在它上面放置了一个不可见的 div 。问题是当我点击它时，我会同时转到正确的网址和不正确的网址。

```
<div class="invisible" onmousedown="window.open('http://ags.gns.co.il/cdn/DigitalCloud/iMarkets/2012/Gadi_Back_To_News/?Media=maof')" style="z-index:10000">
   <object type="application/x-shockwave-flash" data="http://s-maof.com/stuff/Imarkets_150x75.swf" width="150" height="75">
        <param name="movie" value="http://s-maof.com/stuff/Imarkets_150x75.swf" />
        <param name="quality" value="high" />
        <param name="wmode" value="transparent" />
        <param name="loop" value="false" />
   </object>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:35:49.510

你没有覆盖闪光灯，你只是在包含它！
试试这个html：

```
<div class="invisible">
   <a class="overlay" href="http://ags.gns.co.il/cdn/DigitalCloud/iMarkets/2012/Gadi_Back_To_News/?Media=maof"></a>
   <object type="application/x-shockwave-flash" data="http://s-maof.com/stuff/Imarkets_150x75.swf" width="150" height="75">
        <param name="movie" value="http://s-maof.com/stuff/Imarkets_150x75.swf" />
        <param name="quality" value="high" />
        <param name="wmode" value="transparent" />
        <param name="loop" value="false" />
   </object>
</div>​​​ 
```

现在我们将链接设置为覆盖闪光灯

```
.invisible{
 position:relative;
 width:150px;
 height:75px;
}
.​overlay{
 z-index:10000; 
 display:block;
 width:150px;
 height:75px;
 position:absolute;
 top:0px;
 left:0px;
 background:red; 
 opacity:0.3;    
}​ 
```

**[DEMO](http://jsfiddle.net/unloco/FvhVC/2/)**
你可以去除不透明度和背景，它们只是为了演示。

# ios - iOS：改变 UISegmentedcontrol 的高度

> ID：12027608
> 
> 赞同：67
> 
> 时间：2012-08-19T15:17:58.673
> 
> 标签：ios, uisegmentedcontrol

我正在尝试更改 UISegmentedcontrol 的高度，但在 Interface Builder 中是不允许的。有什么办法可以改变还是不可能？

谢谢

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-07-11T20:19:49.883

在 IB 中添加约束也可以解决问题：

![IB中的约束](../Images/04496302f625714507800292a22a9da2.png)

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2012-08-19T15:51:07.497

是的，您可以`[mySegmentedControl setFrame:frame]`在代码中使用。不幸的是，你不能在 IB 中做到这一点。

所以，如果你只想改变高度：

```
CGRect frame= mySegmentedControl.frame;
[mySegmentedControl setFrame:CGRectMake(frame.origin.x, frame.origin.y, frame.size.width, fNewHeight)]; 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-10-27T16:47:52.180

添加一个新的高度约束并设置它的值。

[![在此处输入图像描述](../Images/919492a4133733e1b21d0f3b088ab17f.png)](https://i.stack.imgur.com/Nk9Ri.png)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-07-10T06:53:37.927

如果您正在使用自动布局并且对[卢克的回答](https://stackoverflow.com/a/12027824/575162)有疑问，这对我来说非常有效：

```
NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:mySegmentedControl
                                     attribute:NSLayoutAttributeHeight 
                                     relatedBy:NSLayoutRelationEqual
                                     toItem:nil
                                     attribute:NSLayoutAttributeNotAnAttribute
                                     multiplier:1 
                                     constant:fNewHeight];
[mySegmentedControl addConstraint:constraint]; 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-08-30T21:32:48.890

要在 Interface Builder 中执行此操作，您可以在“用户定义的运行时属性”下选择控件并添加框架属性

![在 IB 中添加 frame 属性](../Images/f5924af774032f084abe816dc85c001f.png)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-12-06T07:20:05.833

最好和最简单的方法是将高度约束设置为分段控件并根据需要增加其值。

[![在此处输入图像描述](../Images/978a6bee84841cf7df67f57de9bce530.png)](https://i.stack.imgur.com/PYPYT.png)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-01-27T07:52:14.790

Swift 3 IBInspectable 解决方案：

```
@IBDesignable class MySegmentedControl: UISegmentedControl {

    @IBInspectable var height: CGFloat = 29 {
        didSet {
            let centerSave = center
            frame = CGRect(x: frame.minX, y: frame.minY, width: frame.width, height: height)
            center = centerSave
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-08-28T07:45:26.203

只需转到id **UisegmentContrrole**所在的情节提要，并使用您的自定义**高度设置****高度约束**为

 **[![在此处输入图像描述](../Images/f62814ff5ba9a7c625995d12ad719a14.png)](https://i.stack.imgur.com/ysqEg.png)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-03-05T20:28:24.513

快速解决方案：

```
segmentedControl.frame = CGRect(x: segmentedControl.frame.origin.x, y: segmentedControl.frame.origin.y, width: segmentedControl.frame.size.width, height: 40); 
```

将 SegmentedControl 的高度设置为 40。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-03-12T06:34:21.227

**`xib`幸运的是，您也可以更改高度**。

您也可以通过 这样做`xib`。只需在`xib`. 然后`xib`在 TextEdit 中打开。在那里你会找到代码：

```
<segmentedControl opaque="NO" contentMode="scaleToFill" fixedFrame="YES" contentHorizontalAlignment="left" contentVerticalAlignment="top" segmentControlStyle="plain" selectedSegmentIndex="0" translatesAutoresizingMaskIntoConstraints="NO" id="B99-Tt-vJG">

<rect key="frame" x="222" y="82" width="123" height="44"/> 
```

在这里，您可以将高度从 44 更改为任何所需的高度。`UIConponent`你可以改变任何这样的高度。即使对于`UIPickerView`.

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-06-09T04:41:28.547

快速解决方案：

```
override func viewDidAppear(animated: Bool) {
    super.viewDidAppear(animated)
    let rect = CGRect(origin: segment.frame.origin, size: CGSize(width: segment.frame.size.width, height: 100))
    segment.frame = rect
} 
```

或者

```
override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()
    let rect = CGRect(origin: segment.frame.origin, size: CGSize(width: segment.frame.size.width, height: 100))
    segment.frame = rect
} 
```

或者

```
 override func viewWillLayoutSubviews() {
    super.viewWillLayoutSubviews()
    let rect = CGRect(origin: segment.frame.origin, size: CGSize(width: segment.frame.size.width, height: 100))
    segment.frame = rect
} 
```

将 SegmentedControl 的高度设置为 100。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-12-11T02:04:41.940

只需`MySegmentedControl.frame = CGRectMake(15,5, 290, 50);`更改坐标以适合您的视图（这是针对 iOS 7 更新的）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-11-20T14:33:29.190

纪方的解决方案对我不起作用。我必须对分段控件进行子类化并添加这些方法。基于自动布局的解决方案在 iOS7.0 /7.1 中并不健壮。有时它会跳回默认高度。

```
const static CGFloat kViewHeight = 35;

- (void) layoutSubviews {

    [super layoutSubviews];

    CGRect frame = self.frame;
    [self setFrame:CGRectMake(frame.origin.x, frame.origin.y, frame.size.width, kViewHeight)];

}

- (CGSize) intrinsicContentSize {

    CGSize defaultSize = [super intrinsicContentSize];
    return CGSizeMake(defaultSize.width, kViewHeight);
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-03-26T03:54:16.990

您可以尝试以下方法：

```
segmentedControll.addConstraint(
        NSLayoutConstraint(
            item: segmentedControll,
            attribute: NSLayoutAttribute.Height,
            relatedBy: NSLayoutRelation.Equal,
            toItem: nil,
            attribute: NSLayoutAttribute.NotAnAttribute,
            multiplier: 1,
            constant: 40.0
        )
    ) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-09-16T11:59:35.133

如果您选择“使用自动布局”，重置框架不起作用，您应该更改约束。也许这就是最佳答案对某人不起作用的原因，因为在 xcode 5 中默认选择了它

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2014-03-10T17:24:06.040

对我来说，解决方案是： -

```
CGRect frame = CGRectMake (20, 20, 180, 50);
self.segmentedControl.frame = frame; 
```

它适用于每个版本，甚至不使用自动调整大小。**

# php - PHP 无法加载某些库

> ID：12027614
> 
> 赞同：1
> 
> 时间：2012-08-19T15:18:50.233
> 
> 标签：php, wamp, firebird, interbase

首先，我使用的是 Windows 7 64 位、WAMP 32 位和 firebird 32 位。

我正在尝试将 PHP 与 firebird 或 interbase 一起使用，因此我取消了 php.ini 文件中以下行的注释：

```
extension=php_pdo_firebird.dll 
extension=php_interbase.dll 
```

然后，当我启动 WAMP 时，会发生以下错误：

```
1)PHP Startup: Unable to load dynamic library 'c:/wamp/bin/php/php5.3.13/ext/php_interbase.dll' - The specified module could not be found.
2)PHP Startup: Unable to load dynamic library 'c:/wamp/bin/php/php5.3.13/ext/php_pdo_firebird.dll' - The specified module could not be found.
3)The program can not start because your computer is missing fbclient.dll. Try to reinstall it to resolve this issue. 
```

我已经尝试过的：

```
1) Restart computer :)
2) Copy fbclient.dll to system32
3) Copy fbclient.dll to system32 and rename it to gds32.dll
4) Copy php_pdo_firebird.dll and php_interbase.dll from C:\wamp\bin\php\php5.3.13\ext to system32
5) Copy all dll from C:\wamp\bin\php\php5.3.13 and C:\wamp\bin\php\php5.3.13\ext to system32
6) Add C:\wamp\bin\php\php5.3.13\ext to my system PATH variable 
```

有谁知道我该如何解决这个问题？谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T18:25:17.657

WAMP 来自这个站点？[http://www.wampserver.com/](http://www.wampserver.com/)如果是这样；你为什么不构建 64 位而不是 32 位？我不确定 DLL 32 位是否可以在 Windows7 64 位上使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T13:29:41.103

修复了 WAMPServer 和 BitNami WappStack 上的相同问题，搜索 php_interbase.dll 和 php_pdo_firebird.dll 的错误确实具有误导性：这些库总是在那个路径中！

* * *

对于 WAMP：在 Windows 密钥注册表上，我在安装 wamp 后找到了新密钥：C:\wamp\...\fb; 但该地址没有“fb”文件夹。

因此，我创建了该文件夹并将“fbclient.dll”放入其中。

我在安装 firebird ODBC 驱动程序后找到了“fbclient.dll”，[http://www.firebirdsql.org/en/odbc-driver/](http://www.firebirdsql.org/en/odbc-driver/)，但我认为如果你能以其他方式找到该 dll，则没有必要安装 firebird。

* * *

对于 BitNami WappStack。

只需在 C:ProgramFiles/BitNami/..../bin/php 上添加“fbclient.dll”，一切运行良好。

* * *

要查看您的 firebird 驱动程序是否运行良好，此代码片段会打印（在 php 页面上）所有当前工作的 PDO 驱动程序：

```
<?php
 foreach(PDO::getAvailableDrivers() as $driver) {
  echo $driver.'<br />';
}?> 
```

# ssl - 如何在 WSDL First CXF Framework Web 服务中配置 SSL？

> ID：12027623
> 
> 赞同：1
> 
> 时间：2012-08-19T15:20:25.360
> 
> 标签：ssl, wsdl, cxf, top-down

我是 CXF 框架的新手。最近使用 CXF 和 Spring Endpoint 成功创建了 Web 服务。我正在使用 WSDL 第一种方法。您能否建议如何将 SSL(https) 用于 Web 服务。我对信任库和密钥库有想法。我正在使用 Apache Tomcat 服务器。下面是我的 ApplicationContext.xml -->

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:cxf="http://cxf.apache.org/core"
xmlns:jaxws="http://cxf.apache.org/jaxws"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
    http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd
    http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd"
default-autowire="byName">

 <!-- Service endpoint -->
<jaxws:endpoint id="CalculatorWebService"
        implementorClass="com.web.calculator.service.CalculatorContractImpl"
        implementor="#CalculatorImpl"
        address="/CalculatorWS">
</jaxws:endpoint>

<bean id="CalculatorImpl" class="com.web.calculator.service.CalculatorContractImpl"/> 
```

我相信我需要在此处为​​信任库创建一些配置条目，并在某些 xml 中为客户端中的密钥库进行类似的一些配置。另外我认为我需要一些 Passwordcallback 类来使用密钥库。

您能否帮助我进行启用 SSL 的配置。

非常感谢您的帮助...

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:25:01.880

[这是一个很棒的教程，如何在 CXF 中使用 SSL 设置您需要的一切](http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html)。请参阅章节`Configuring SSL Support`。并且不要忘记`https`在您的 tomcat 中启用。[此处](http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html)提供了完整的“如何执行此操作” 。我假设你还没有尝试任何东西。所有你需要做的只是按照这些步骤，因为一切都解释得很清楚。

# jquery - 循环遍历 json 数组：读取第一行并从第二行循环

> ID：12027627
> 
> 赞同：0
> 
> 时间：2012-08-19T15:21:05.037
> 
> 标签：jquery

使用像我下面这样的数组，如何仅读取第一行的值以及从第二行开始通过另一行的循环？我在代码中包含了注释，让您了解我想要实现的目标。

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>PHP, jQuery search demo</title>
<link rel="stylesheet" type="text/css" href="my.css">
<script type="text/javascript" src="http://localhost/dev/ajax/jquery.js"></script>
<script type="text/javascript">
$(function() {

    $(".errCheck").click(function() {
             $.ajax({
                type: "GET",
                url:  "test_errors.php",
                dataType:"json",
                cache:false,

                success: function(data){
                //if 1st line of array: success == True How can I do this?
                //Redirect
                //else
                $('#errors div').empty();
                $.each(data, function (loc, msg) {//start from the second array value, in this case errOne
                $(loc).html(msg);
                });              

              },

            });    

        return false;
    });
});
</script>

</head>
<body>
<div id="container">
<div id="errors">
<div id="errOne"></div>
<div id="errTwo"></div>
<div id="errThree"></div>
</div> 
<input type="submit" class="errCheck" value="Check">
</div>
</body>
</html> 
```

我的测试错误消息文件：

```
<?php

$errors['success'] = "false";
$errors['#errOne'] = "Enter a valid username";
$errors['#errTwo'] = "Enter a valid email";
$errors['#errThree'] = "Enter a valid password";

echo json_encode($errors);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:25:38.700

假设 的值`data.success`是一个字符串`true`or `false`，使用这个：

```
if ( data.success == 'true' ) {
    window.location = 'http://new_url.com';
    return;
}

delete data.success;
// Now just run the loop 
```

但理想情况下，您应该将真正的布尔值存储在`success`. 所以在你的 PHP 代码中你应该使用：

```
$errors['success'] = false;
// or
$errors['success'] = true; 
```

然后，在您的 JavaScript 中，您会检查它是否为真正的布尔值：

```
if ( data.success ) {
    // redirect...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T16:13:13.053

~~您可以使用 shift() 返回数组中的第一个元素并将其从数组中删除~~

~~var 错误 = data.shift();~~

~~因此，var error 将是您的检查，然后可以在您的 $.each() 中使用数据~~

@Joseph Silber - 恭喜你在上面发现了我的故意错误；-P

采用

```
delete myObject.property; // or myObject[property] 
```

根据[如何从 JavaScript 对象中删除属性？](https://stackoverflow.com/questions/208105/how-to-remove-a-property-from-a-javascript-object)

**编辑**我想这现在与另一个答案相同，但我觉得我不妨将代码写在......

并使用正确的布尔值，如别处所述

```
success: function(data) {
  if(data.success == false) {
    delete data.success;
    $.each(data,function(loc, msg){
      $(loc).html(msg);
    })
  } else {
    // passed validation code
  }
} 
```

* * *

虽然我更喜欢这样安排 Json

```
{
  success: false,
  errors: [
    {fieldKey: 'string'},
    {fieldKey: 'string'}
  ]
} 
```

等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T15:30:31.440

您可以只使用计数器，因为对象上没有索引，只有键：

```
$(function() {
    $(".errCheck").click(function() {
        $.ajax({
            type: "GET",
            url: "test_errors.php",
            dataType: "json",
            cache: false,
            success: function(data) {
                if (data.success) document.location.href = 'http://google.com';
                $('#errors div').empty();
                $.each(data, function(loc, msg) {
                    $(loc).html(msg);
                });
            },
        });
        return false;
    });
});​ 
```

# php - 按尺寸自动换行

> ID：12027632
> 
> 赞同：0
> 
> 时间：2012-08-19T15:22:01.377
> 
> 标签：php, image, width

今天我想做一个函数，将文本解析成行，由`imageTTFBbox()`. 我创建了这段代码，但仅限于 2 行。我想做同样的事情，但是用无限的线条。谢谢你的帮助！:D

```
function printe($image, $image_width, $string, $font_size, $y, $color, $font){
    $font = "fonts/" . $font . ".ttf";

    $limit = $image_width - 20;
    $tsize = @imageTTFBbox($font_size,0, $font, $string);
    $twidth = abs($tsize[4] - $tsize[0]);

    $words = explode(" ", $string);
    $text = ''; $text1 = '';$a = 0;$o = 0;

    for($i = 0; $i < count($words); $i++){          
        $tsize = @imageTTFBbox($font_size,0, $font, $words[$i]." ");
        $twidth = abs($tsize[4] - $tsize[0]);
        $nw = $twidth + $a;
        if($nw > $limit OR $o > 0){
            $o++;   
            $text1 .= $words[$i]." ";
        }else{
            $text .= $words[$i]. " ";
            $a =$a+$twidth;
        }
    }

    $txtcolor   = processColor($color); 

    $t1size = @imageTTFBbox($font_size,0, $font, $text);
    $t1width = abs($t1size[4] - $t1size[0]);

    $t2size = @imageTTFBbox($font_size, 0, $font, $text1);
    $t2width = abs($t2size[4] - $t2size[0]);

    $center = ceil($image_width / 2);

    $y1 = $y; $y2 = $y; 

    $xcord1 = ($image_width/2)-($t1width/2)+3;
    $xcord2 = ($image_width/2)-($t2width/2)+3;

    $y2 = $y + ($font_size * 1.5);

    imagettftext($image, $font_size, 0, $xcord1, $y1, $txtcolor, $font, $text);
    imagettftext($image, $font_size, 0, $xcord2, $y2, $txtcolor, $font, $text1);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T16:31:59.290

即使没有经过全面测试，我还是从[PHP 手册中的一个示例](http://www.php.net/manual/en/function.imagettfbbox.php#109589)开始编写此代码：

```
<?php

function write_multiline_text($image, $font_size, $color, $font, $text, $start_x, $start_y, $max_width) { 
    //split the string 
    //build new string word for word 
    //check everytime you add a word if string still fits 
    //otherwise, remove last word, post current string and start fresh on a new line 
    $words = explode(" ", $text); 
    $string = ""; 
    $tmp_string = ""; 

    for($i = 0; $i < count($words); $i++) { 
        $tmp_string .= $words[$i]." "; 

        //check size of string 
        $dim = imagettfbbox($font_size, 0, $font, $tmp_string); 

        if($dim[4] < ($max_width - $start_x)) { 
            $string = $tmp_string; 
            $curr_width = $dim[4];
        } else { 
            $i--; 
            $tmp_string = ""; 
            $start_xx = $start_x + round(($max_width - $curr_width - $start_x) / 2);        
            imagettftext($image, $font_size, 0, $start_xx, $start_y, $color, $font, $string); 

            $string = ""; 
            $start_y += abs($dim[5]) * 2; 
            $curr_width = 0;
        } 
    } 

    $start_xx = $start_x + round(($max_width - $dim[4] - $start_x) / 2);        
    imagettftext($image, $font_size, 0, $start_xx, $start_y, $color, $font, $string);
}

// Create a 300x300 image
$im = imagecreatetruecolor(300, 300);
$black = imagecolorallocate($im, 0, 0, 0);
$white = imagecolorallocate($im, 255, 255, 255);

// Set the background to be white
imagefilledrectangle($im, 1, 1, 298, 298, $white);

// Path to our font file
$font = 'c:/windows/fonts/arial.ttf';

$text = "This is a very ";
$text .= "long long long long long long long long long long long long long long long long ";
$text .= "long long long long long long long long long long long long long long long long ";
$text .= "line of text";

write_multiline_text($im, 12, $black, $font, $text, 10, 22, 298);

// Output to browser
header('Content-Type: image/png');

imagepng($im);
imagedestroy($im);

?> 
```

这是生成的输出图像：

![在此处输入图像描述](../Images/f5f7b5c59551431a5520f44f880f28ac.png)

如果您不希望文本居中，则必须在对函数的两次调用中将变量`$start_xx`替换为。`$start_x``imagettftext`

# asp.net - VS 2012 中的验证模式

> ID：12027634
> 
> 赞同：1
> 
> 时间：2012-08-19T15:22:25.773
> 
> 标签：asp.net, visual-studio-2012, doctype

好的，所以我刚刚安装了 VS 2012 并发现了一件让我有点困惑的事情。验证模式。

`DOCTYPE:XHTML5`和到底是`XHTML5`什么，它们之间有什么区别？据我所知，没有像 XHTML5 doctype 这样的东西。

到目前为止，我试图对谷歌进行一些研究，但没有成功......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:17:21.507

**XHTML5**指[的是 XHTML 语法的第 5 版](http://dev.w3.org/html5/spec/introduction.html#html-vs-xhtml)，是 VisualStudio 中的验证方案之一。

**XHTML5 doctype**是指 HTML5 的 XML 序列化。

例如，以下是有效的 HTML5 但不是 XHTML5（注意缺席`</li>`）：

```
<ul>
  <li>one
  <li>two
  <li>three
</ul> 
```

# mongodb - 猫鼬中的 .in() 和 all.() 运算符有什么区别？

> ID：12027636
> 
> 赞同：12
> 
> 时间：2012-08-19T15:22:30.190
> 
> 标签：mongodb, mongoose

我只是好奇猫鼬查询中的 .in() 和 .all() 方法有什么区别？你能用一个简单的例子来解释一下。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-19T15:42:03.817

以下是来自 mongodb.org 的解释：

**$全部**

$all 运算符类似于 $in，但不是匹配指定数组中的任何值，而是必须匹配数组中的所有值。例如，对象

{一：[1,2,3]}

将被匹配

db.things.find( { a: { $all: [ 2, 3 ] } } );

但不是

db.things.find( { a: { $all: [ 2, 3, 4 ] } } );

数组可以包含比 $all 条件指定的元素更多的元素。$all 指定必须匹配的最小元素集。

[在此处](http://www.mongodb.org/display/DOCS/Advanced+Queries)阅读有关 mongodb 运算符的更多信息

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-06-02T19:22:58.410

`$all`运算符检索包含我们传递的值的子集的所有文档。子集可以按任何顺序排列。

`$in`运算符检索包含我们传递的任何一个值的所有文档。

例如，考虑包含以下文档的集合“技能”：

```
{ "Name" : "Balaji", "skills" : [ "Dancing", "Cooking", "Singing" ] }
{ "Name" : "Ramesh", "skills" : [ "Cooking", "Singing" ] }
{ "Name" : "Suresh", "skills" : [ "Dancing", "Singing" ] } 
```

`db.skills.find({skills: { $all : ["Cooking", "Singing" ] } } )`将仅返回包含烹饪和唱歌技能的文件，即 Balaji 和 Ramesh。

`db.skills.find({skills: { $in : ["Cooking", "Singing" ] } } )`将返回所有文档，因为所有文档都包含烹饪或唱歌。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-11T17:03:12.800

```
$all - This an array operator that is equivalent to an $and operation.

[
    {name:'Shubham',hobbies:['cricket','dancing','football']},
    {name:'Chandrakesha',hobbies:['cricket','singing','dancing','football']},
    {name:'Nitish',hobbies:['cricket','singing','dancing','football']},
    {name:'Lovish',hobbies:['readingbooks','singing','dancing','football']},
]

Query:->

{hobbies: { $all : ["readingbooks", "singing" ] } }
                OR
can write like below query
{ 
    $and: [
        {"hobbies": "readingbooks"},
        {"hobbies": "singing"},
    ]
}

will return only the documents which contains both readingbooks and singing hobbies

output:->

[
    {name:'Lovish',hobbies:['readingbooks','singing','dancing','football']},
]

-------------------------------
$in operator retrieves all the documents which contains the either of the values we pass.

[
    {name:'Shubham',hobbies:['cricket','dancing','football']},
    {name:'Chandrakesha',hobbies:['cricket','singing','dancing','football']},
    {name:'Nitish',hobbies:['cricket','singing','dancing','football']},
    {name:'Lovish',hobbies:['readingbooks','singing','dancing','football']},
]

Query:->

{hobbies: { $in : ["readingbooks", "singing" ] } }

                OR
can write like below query
{ 
    $or: [
        {"hobbies": "readingbooks"},
        {"hobbies": "singing"},
    ]
}

will return all the documents which contains any of them readingbooks or singing hobbies

output:->

[
    {name:'Chandrakesha',hobbies:['cricket','singing','dancing','football']},
    {name:'Nitish',hobbies:['cricket','singing','dancing','football']},
    {name:'Lovish',hobbies:['readingbooks','singing','dancing','football']},
] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-28T04:42:58.113

考虑以下集合“gamesapp”

```
{
   _id: ObjectId("7892de7a123be821ebcca757"),
   name: "kid1",
   games: [ "Chess", "Cricket", "Football", "Hockey", "Carrom" ],
   favourite_games: [ "Chess", "Cricket", "Football" ]
}

{
   _id: ObjectId("7892de7a123be821ebcca758"),
   name: "kid2",
   games: [ "Chess", "Cricket", "Football", "Hockey", "Carrom" ],
   favourite_games: [ "Chess", "Cricket" ]
}

{
   _id: ObjectId("7892de7a123be821ebcca759"),
   name: "kid3",
   games: [ "Chess", "Cricket", "Football", "Hockey", "Carrom" ],
   favourite_games: [ "Chess" ]
}

{
   _id: ObjectId("7892de7a123be821ebcca760"),
   name: "kid4",
   games: [ "Chess", "Cricket", "Football", "Hockey", "Carrom" ],
   favourite_games: [ "Chess", "Cricket" ]
} 
```

$all - 这是一个等效于 AND 操作的数组运算符。*如果它与指定数组*中的**所有值匹配**，这将返回集合中的文档。下面有助于确定所有具有 'Chess' 'Cricket' 价值的**文件**。

 ***> db.gamesapp.find({"favourite_games":{$all:["Chess","Cricket"]}})
> 
> 这将列出 ObjectId 为 7892de7a123be821ebcca757、7892de7a123be821ebcca758 和 7892de7a123be821ebcca760 的文档

$in - 这是一个比较查询运算符，它基于列出可能条件的数组。它有助于查询各种值它列出与查询中*指定数组*中存在的**任何值****匹配** 的文档。以下有助于确定所有具有“国际象棋”**或**“板球”值的文档

 *****> db.gamesapp.find({"favourite_games":{$in:["Chess", "Cricket"]}})
> 
> 这将列出 ObjectId 7892de7a123be821ebcca757、7892de7a123be821ebcca758、7892de7a123be821ebcca759 和 7892de7a123be821ebcca760 的所有文档********

# php - 如何用段落（新行）保存评论并用段落从数据库中获取它？

> ID：12027639
> 
> 赞同：-4
> 
> 时间：2012-08-19T15:23:18.060
> 
> 标签：php, mysql, newline

在我的网站中，我希望用户写下他们的评论。但是当他们在文本字段中按下“输入”时，我想将此评论作为新段落保存到 mysql。我想用段落从mysql中获取这个评论。

我用谷歌搜索了很多人建议“nl2br()”，但我不明白我是如何使用它的。我怎样才能使它成为可能？谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T15:40:40.563

新行会自动保存为 mysql 中的新行，无需为此做任何特别的事情。

但是，当您将新行输出到 html 时，它们将显示为空格（通常...），因此当您输出到 html 时，您必须使用`nl2br()`以便在`<br>`每个新行中添加一个标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T15:31:21.197

```
<?php echo nl2br($comment); ?> 
```

[http://php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)

# postgresql - 在rails 3.2中默认使用postgresql并避免使用testunit的方法？

> ID：12027640
> 
> 赞同：9
> 
> 时间：2012-08-19T15:23:33.030
> 
> 标签：postgresql, rspec, ruby-on-rails-3.2, rspec-rails, rails-postgresql

`$ rails new [app name] -d postgresql --skip-test-unit`每次启动新的 Rails 应用程序时，我都厌倦了打字。我正在使用rails 3.2。

有没有办法让使用 postresql 和跳过测试单元成为新 Rails 应用程序的默认值？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-19T15:23:33.030

是的。`~/.railsrc`Rails 3.2 通过更新文件使设置这些默认值变得容易。

在命令行：

```
$ echo -d postgresql -T > ~/.railsrc 
```

现在每个新的 Rails 应用程序都将使用 postgresql 并避免使用 testunit。

```
$ rails new [my new app]
[my computer]:[my directory] [my name]$ rails new [my new app]
Using -d postgresql -T from /Users/benjaminunger/.railsrc
  create  
  create  README.rdoc
  create  Rakefile
.
.
. 
```

通过更新 ~/.railsrc 文件，rails 新生成器的任何标志都可以成为默认值。

# java - 在Java中，如何从父方法访问子实例的私有静态属性？

> ID：12027643
> 
> 赞同：5
> 
> 时间：2012-08-19T15:23:42.680
> 
> 标签：java, static, attributes, extends

这是一个例子：

```
class Parent {
    protected int A;

    public void displayA() {
        System.out.println(A);
    }
}

class Child extends Parent {
    protected static int A=2;
}

Child intance = new Child();
intance.displayA();

=> return null !!! 
```

从父方法中检索子属性的方法是什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T15:25:56.240

您可以在 Child 的构造函数中设置 A 变量：

```
class Child extends Parent {
   // protected static int A=2; // this redeclares the variable -- it's a different variable

   public Child() {
      A = 2;
   }
} 
```

但我认为你最好给父母的变量一个getter和setter，并根据需要从孩子或父母那里设置或获取它。在我看来，这比直接操作字段要好，因为您可以监视字段的更改并在更改的数据不合适时执行操作。

其他建议：学习并遵守 Java 命名规则。此外，您发布的代码中有许多粗心的错误，包括拼写错误。如果您要求其他人努力尝试免费帮助您，那么要求您做同样的事情并不是要求太多 - 努力用*真实*代码提出一个体面的问题，以免帮助您你比它需要的更困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T15:28:28.037

在您的实例中，如果您使用 Child 类构造函数来设置 A 的值而不是重新声明变量，那么父类应该能够获取该值。

上述实例的问题在于，您正在重新声明子类中的变量，而不仅仅是更改超类中变量的值。

有没有理由将子变量声明为静态？如果您只需要该类变量的值，则可以直接引用它。然而，让多个子类设置变量值并由超类使用的一种更简洁的方法是让子类设置您想要的值，然后让超类引用该变量（可能使用 getter）子类已设置的值。

# apache - 如何为 Zend Framework 设置虚拟服务器？

> ID：12027644
> 
> 赞同：2
> 
> 时间：2012-08-19T15:23:49.443
> 
> 标签：apache, zend-framework, virtualhost

我无法使用 ZEND 启动和运行虚拟服务器。我已经按照安装程序在我的 C:/ 驱动器中设置了一个项目。但是，浏览器不会选择该站点。

我更改了 appache 配置文件以取消注释以下行。

> # 虚拟主机
> 
> ```
>  Include conf/extra/httpd-vhosts.conf 
> ```

我根据 zend 网站上包含的快速入门信息，使用以下代码更改了 vhosts.conf 文件。项目文件夹位于 C:\zendProject\quickstart\public

```
<VirtualHost *:8080>
    ServerName local
    DocumentRoot /zendProject/quickstart/public

    SetEnv APPLICATION_ENV "development"

    <Directory /zendProject/quickstart/public>
       DirectoryIndex index.php
       AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>

    </VirtualHost> 
```

然后，我将主机文件更改为使用以下几行进行读取。

> 127.0.0.1 本地主机
> 
> 127.0.0.1 本地
> 
> ::1 本地主机

然后我使用 vista 服务管理器重新启动了 appache 服务器。我检查了 ZEND 控制面板的基本网页，这是正常的，因此服务器肯定可以运行，但我收到一条消息，说浏览器无法连接到本地。

有谁知道我做错了什么？

我刚刚查看了错误日志并发现了以下条目 - 不确定这是否有帮助 [Sun Aug 19 12:05:38 2012] [warn] NameVirtualHost *:8080 has no VirtualHosts

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:37:39.453

您几乎可以将所需的任何端口与 vhost 一起使用，只需确保您有如下一行： `NameVirtualHost *:80`vhost 文档中的某处。此行指定 apache 用于路由的端口。大多数预构建的服务器（WAMP、Xampp、Zend Server）都会附带一个`httpd-vhosts.conf`通常包含此行的模板。有时它仍然被注释，无论哪种方式确保它在那里并且未注释并反映您要使用的端口。

此外，如果您在虚拟主机中使用 Zend Framework MVC 项目，您希望***FollowSymlinks***

这是一个工作 httpd-vhosts.conf 的完整示例：

```
#
# Virtual Hosts
#
# If you want to maintain multiple domains/hostnames on your
# machine you can setup VirtualHost containers for them. Most configurations
# use only name-based virtual hosts so the server doesn't need to worry about
# IP addresses. This is indicated by the asterisks in the directives below.
#
# Please see the documentation at 
# <URL:http://httpd.apache.org/docs/2.2/vhosts/>
# for further details before you try to setup virtual hosts.
#
# You may use the command line option '-S' to verify your virtual host
# configuration.
#
# Use name-based virtual hosting.
#
NameVirtualHost *:80
#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
<VirtualHost *:80>
    DocumentRoot "C:\Zend\Apache2/htdocs"
    ServerName localhost
</VirtualHost>
<VirtualHost *:80>
    DocumentRoot "E:\www\home-local\public"
    ServerName home.local
    ErrorLog "E:\www\home-local\logs\error.log"
    <Directory "E:\www\home-local" >
        Options Indexes FollowSymLinks
        AllowOverride all
        Order deny,allow
        Allow from all
    </Directory>   
</VirtualHost> 
```

这是为我的开发环境修改的 Zend Server CE 提供的 httpd-vhosts.conf。

*还有一些笔记。*

*   如果您希望使用 localhost，请确保将其添加到您的 vhosts 文件并使其成为第**一个**vhost
*   如果您有多个托管站点的目录，您可以将目录定义放在您的虚拟主机中，事实上，对顶级目录应用严格的访问权限并只放松您在虚拟主机中需要的内容是有帮助的
*   与往常一样，请确保您记得确保未注释 mod_rewrite：
    `LoadModule rewrite_module modules/mod_rewrite.so`
*   *对httpd.conf*或*http-vhosts.conf进行***任何**更改后，始终重新启动 Apache

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:51:53.237

首先，您已将端口设置为 8080 ，将其更改为 *.80

您的配置应如下所示：

```
<VirtualHost *:80>
    ServerName local
    DocumentRoot C:\zendProject\quickstart\public
    SetEnv APPLICATION_ENV "development"
</VirtualHost> 
```

在 Windows 中，路径以`C:\`而不是开头`/`

也看看这个[启动教程](http://net.tutsplus.com/tutorials/php/zend-framework-from-scratch/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T21:14:00.627

如果您的服务器上除 Apache 之外的任何其他设备都没有使用端口 80，请切换`<VirtualHost *:8080>`到`<VirtualHost *:80>`并重新启动 Apache。

然后，您应该能够通过导航到访问您的虚拟主机`http://local`

除非您已经在端口 80 上运行某些东西，否则无需使用端口。如果是这种情况，那么当您在浏览器中访问您的站点时，您`8080`别无选择，只能在主机名后面包含。`:8080`**

# javascript - 手动加载 CSS 文件时无法查找元素的 CSS 属性

> ID：12027646
> 
> 赞同：2
> 
> 时间：2012-08-19T15:24:01.590
> 
> 标签：javascript, jquery, css

我`CSS`在页面加载后使用以下代码加载样式表：

```
$("head").append($("<link>", {
    rel: "stylesheet",
    href: 'http://cdn.sstatic.net/stackoverflow/all.css',
    type: "text/css"
})); 
```

虽然这很好用（即，新添加的样式表中带有类的元素已正确装饰），但我无法`CSS`使用以下方法查询该样式表中的属性`jQuery`：[我已经创建了一个`jsFiddle`来显示问题](http://jsfiddle.net/jUsPh/7/)

**我如何（理想情况下`jQuery`）查找与`CSS`页面加载后添加的 CSS 样式表相对应的元素的属性？**

PS：我遇到了问题，`Firefox 14.0.1`但不是`Chrome 21.0.1180.79`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T15:26:56.527

如果您`console.log()`在“加载”处理程序中进行调用，它可以正常工作：

```
$("head").append($("<link>", {
    rel: "stylesheet",
    href: 'http://cdn.sstatic.net/stackoverflow/all.css',
    type: "text/css",
    load: function() {
      console.log($('#test1').css('color'));
      console.log($('#test2').css('color'));
      console.log($('#test3').css('color'));
      console.log($('#test4').css('color'));    
      }
  })); 
```

[小提琴，更新了。](http://jsfiddle.net/Pointy/jUsPh/8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T15:32:43.107

问题可能是由于在您执行 console.logs 时样式表尚未完全加载。与使用 jquery 将图像动态呈现到页面类似，样式表是一种外部资源，您需要考虑浏览器在执行所利用的代码之前下拉并应用样式表所花费的时间。

可以在此处找到解决此问题的更好方法（和解决方案）： [加载 CSS 后触发的 jQuery 事件？](https://stackoverflow.com/questions/2571164/jquery-event-that-triggers-after-css-is-loaded)

# c++ - 从 C++ 中的不同项目中调用函数（在 Linux 中）

> ID：12027647
> 
> 赞同：-1
> 
> 时间：2012-08-19T15:24:38.763
> 
> 标签：c++, linux, methods, callback

**问题：**我有两个 C++ 项目：

1.  项目 01
2.  项目 02

在项目 01 中，我们有 P01Raja.cpp 和`method1(argc, argv)`. 在项目 02 中，我们有 P02Rani.cpp 和`method2()`.

现在，我想在 method2（来自 P01Rani.cpp）中调用我的 method1（来自 P01Raja.cpp）。

P01Raja.cpp 位于 /home/krishna/Project 01/src/P01Raja.cpp P02Rani.cpp 位于 /usr/local/project 02/P02Rani.cpp

我在 GNU Linux 中工作，但不在 Windows 环境中。

注意：我是 Java 专家并且了解 C++ 基础知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:43:36.617

`#include "/home/krishna/Project 01/src/P01Raja.cpp"`

# inno-setup - Inno Setup - 显示 MessageBox 以运行附加文件

> ID：12027650
> 
> 赞同：2
> 
> 时间：2012-08-19T15:25:03.323
> 
> 标签：inno-setup

我是 Inno Setup 的新手，很难找到这个答案......

我在安装程序中包含了一个 DirectX9 安装文件，但我想向用户显示一个 MessageBox 来询问“你想安装 DirectX9 吗？” 这是在常规安装我的游戏之前完成的......如果他说是，那么我想运行我包含的这个附加文件，否则就继续安装游戏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-28T07:51:27.630

以下代码将在安装开始之前运行。它要求用户确认，然后运行“InstallDirectX.exe”（安装程序必须可用）。

```
[Code]

function PrepareToInstall(var NeedsRestart: Boolean): String;
var
  ResultCode: integer;
begin
  if (msgbox('Do you want to install DirectX ?', mbConfirmation, MB_YESNO) = IDYES) then
  begin
    if Exec(ExpandConstant('InstallDirectX.exe'), '', '', SW_SHOW, ewWaitUntilTerminated, ResultCode) then
    begin
      // handle success if necessary; ResultCode contains the exit code
      MsgBox('Everything is proceeding according to plan', mbInformation, MB_OK);
    end
    else
    begin
      // handle failure if necessary; ResultCode contains the error code
      MsgBox('Something went horribly wrong', mbError, MB_OK);
    end;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-06T09:39:25.850

如果要在安装完成后显示消息框，可以使用以下代码：

```
[Code]

procedure CurStepChanged(CurStep: TSetupStep);
var
  ResultCode: Integer;
begin
   if CurStep = ssPostInstall then
   begin
      if (msgbox('Do you want to install DirectX ?', mbConfirmation, MB_YESNO) = IDYES) then
        begin
           if Exec(ExpandConstant('{src}\dxwebsetup.exe'), '', '', SW_SHOW, ewWaitUntilTerminated, ResultCode) then
           begin
              MsgBox('Installing DirectX completed', mbInformation, MB_OK);
           end
           else
           begin
              MsgBox('Installing Error', mbError, MB_OK);
           end;
       end; 
   end;
end; 
```

# java - 为什么我的查询或 jpa 查询在春季不起作用

> ID：12027653
> 
> 赞同：0
> 
> 时间：2012-08-19T15:25:40.307
> 
> 标签：java, spring, jpa, named-parameters

当我在我的 spring 项目中运行这个查询时，它只会返回一个错误。我尝试了不同的方法但没有任何结果，如果有人可以帮助我，将非常感激。我有 3 个表：用户、角色和用户角色，并且我的地址是嵌入的。也使用连接表。

所有其他类是：[User、Role 和 User_Role spring security](https://stackoverflow.com/questions/12019290/user-role-and-user-role-spring-security)

```
 public List<User> getUsersByNameOrLogin(final String value){
    List<User> result = new ArrayList<User>(0);

    if(value ==null){
        return result;
    }

    final StringBuilder jpql = new StringBuilder("SELECT u FROM User u WHERE ");
    jpql.append(" u.lastname like  "+value);
   jpql.append(" OR u.firstname like  "+value);
    jpql.append(" OR u.email like  "+value);

    final String valueLike = "%"+value+"%";

    result =  entityManager.createQuery(jpql.toString(), User.class)
            .setParameter("lastname", valueLike)
           .setParameter("firstname", valueLike)
           .setParameter("email", valueLike)
            .getResultList();

    return result;
} 
```

错误是：

无法解析属性：姓氏：用户 [SELECT u FROM User u WHERE u.lastname like pappo OR u.firstname like pappo OR u.email like pappo]

和所有的错误信息：

```
 Exception in thread "main" java.lang.IllegalArgumentException: org.hibernate.QueryException:      could not resolve property: lastname of: User [SELECT u FROM se.guard.User u WHERE  u.lastname like  pappo OR u.firstname like  pappo OR u.email like  pappo]
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1222)
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1168)
at             org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:292)
at se.datalayer.service.UserService.getUsersByNameOrLogin(UserService.java:189)
at se.datalayer.main.Main.getUserByParam(Main.java:131)
at se.datalayer.main.Main.main(Main.java:31)
     Caused by: org.hibernate.QueryException: could not resolve property: lastname of:      User [SELECT u FROM se.guard.User u WHERE  u.lastname like  pappo OR u.firstname like      pappo OR u.email like  pappo]
at       org.hibernate.persister.entity.AbstractPropertyMapping.propertyException(AbstractPropertyMapping.java:81)
at        org.hibernate.persister.entity.AbstractPropertyMapping.toType(AbstractPropertyMapping.java:75)
        at    org.hibernate.persister.entity.AbstractEntityPersister.toType(AbstractEntityPersister.java:1451)
at org.hibernate.hql.ast.tree.FromElementType.getPropertyType(FromElementType.java:312)
at org.hibernate.hql.ast.tree.FromElement.getPropertyType(FromElement.java:487)
at org.hibernate.hql.ast.tree.DotNode.getDataType(DotNode.java:611)
at org.hibernate.hql.ast.tree.DotNode.prepareLhs(DotNode.java:263)
at org.hibernate.hql.ast.tree.DotNode.resolve(DotNode.java:210)
at org.hibernate.hql.ast.tree.FromReferenceNode.resolve(FromReferenceNode.java:117)
at org.hibernate.hql.ast.tree.FromReferenceNode.resolve(FromReferenceNode.java:113)
at org.hibernate.hql.ast.HqlSqlWalker.resolve(HqlSqlWalker.java:868)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.expr(HqlSqlBaseWalker.java:1323)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.exprOrSubquery(HqlSqlBaseWalker.java:4387)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.comparisonExpr(HqlSqlBaseWalker.java:4004)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:1909)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:1859)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.logicalExpr(HqlSqlBaseWalker.java:1859)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.whereClause(HqlSqlBaseWalker.java:824)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:610)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:294)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:237)
at org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:254)
at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:185)
at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:101)
at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:98)
at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:156)
at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:135)
at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1760)
at    org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:277)
... 3 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T15:30:50.370

`value`如果要使用命名参数，为什么要包含变量？此外，属性名称区分大小写。改成：

```
final String jpql = "SELECT u FROM User u WHERE "
  "    u.lastName  like :lastname" +;
  " OR u.firstName like :firstname" +;
  " OR u.email     like :email"; 
```

是的，`StringBuilder`这里没有必要。您可以通过仅使用一个参数来进一步简化它：

```
final String jpql = "SELECT u FROM User u WHERE "
  "    u.lastName  like :valueLike" +;
  " OR u.firstName like :valueLike" +;
  " OR u.email     like :valueLike";

result =  entityManager.createQuery(jpql, User.class)
        .setParameter("valueLike", valueLike)
        .getResultList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:39:44.463

Tomasz回答后的解决方案是：

```
 public Collection<User> findUserByAnyValue(String value)
{
    List<User> result = new ArrayList<User>(0);

    if(value ==null){
        return result;
    }

    final String searchParam = "%"+value+"%";

    final String query = "SELECT u FROM User u WHERE "+

              " u.firstname like :searchParam" +
              " OR u.firstname like :searchParam" +
              " OR u.lastname  like :searchParam" +
              " OR u.username  like :searchParam" +
              " OR u.password  like :searchParam" +
              " OR u.email     like :searchParam"+
              " OR u.address.street  like :searchParam"+
              " OR u.address.zipcode  like :searchParam"+
              " OR u.address.city like :searchParam";

            result =  entityManager.createQuery(query, User.class)
                    .setParameter("searchParam", searchParam)
                    .getResultList();

    return result;

} 
```

再次感谢托马斯。

# c++ - 不允许指向不完整类类型的指针

> ID：12027656
> 
> 赞同：69
> 
> 时间：2012-08-19T15:26:03.087
> 
> 标签：c++, list, class, pointers, iterator

由于某种原因，我不能使用附加到我想使用的对象的函数。我在不起作用的行中添加了注释。作为一个错误，我得到“错误；不允许指向不完整类类型的指针”请帮助

这是 dokter.ccp 中的代码

```
int counter = 0;        
for (list<Wielrenner*>::iterator it = wielrenners.begin(); it != wielrenners.end(); it++){
    Wielrenner* wielrennerOB = *it;
    cout << "\nID: " << counter;
    cout << "List size: " << persons.size() << endl;

    wielrennerOB->print();  // This is not working
    counter++;
 } 
```

这是 wielrenner.h 中的代码

```
#ifndef WIELRENNER_H_

#define WIELRENNER_H_

//#include <fstream>

#include "persoon.h"

#include "Onderzoek.h"

class Wielrenner :
public Persoon
{
public:
    Wielrenner(string, string, Adres, string, Datum, Datum, string, int, float, float, float,list<Onderzoek>* );
    ~Wielrenner(void);
    int     getLengte() const;
    float   getGewicht() const;
    float   getVo2max() const;
    float   getMaxVermogen() const;
    list<Onderzoek> getOnderzoekenList();

    void    setLengte(int);
    void    setGewicht(float);
    void    setVo2max(float);
    void    setMaxVermogen(float);
    void    voegOnderzoekToeList(Onderzoek);
    void    showOnderzoeksList();
    void    setOnderzoeksLijst(list<Onderzoek>&);
    void    print();
    void    printFile(ofstream&);

private:
int     lengte;
float   gewicht;
float   vo2max;
float   maxVermogen;
list<Onderzoek> onderzoeken;
};

#endif /* WIELRENNER_H_ */ 
```

wielrenner.CCP 中的代码

```
using namespace std;
#include <string>

#include "Wielrenner.h"
/*
#include "Onderzoek.h"

*/
Wielrenner::Wielrenner(string voornaam, string achternaam, Adres adres, string telefoon, Datum datumInDienst, Datum geboorteDatum, 
                    string persoonType, int lengte, float gewicht, float vo2max, float maxVermogen,list<Onderzoek>* onderzoeken)
        : lengte(lengte), 
    gewicht(gewicht), 
    vo2max(vo2max), 
    maxVermogen(maxVermogen),
    Persoon(voornaam, achternaam, adres, telefoon, datumInDienst, geboorteDatum, persoonType)
{
}

Wielrenner::~Wielrenner(void)
{
}

//setten van gegevens
void    Wielrenner::setLengte(int newLengte){
lengte = newLengte;
}
void    Wielrenner::setGewicht(float newGewicht){
gewicht = newGewicht;
}
void    Wielrenner::setVo2max(float newVo2max){
vo2max = newVo2max;
}
void    Wielrenner::setMaxVermogen(float newMaxVermogen){
maxVermogen = newMaxVermogen;
}
void    Wielrenner::voegOnderzoekToeList(Onderzoek newOnderzoek){
onderzoeken.push_back(newOnderzoek);            
}

void    Wielrenner::showOnderzoeksList(){
int teller=0;

for (list<Onderzoek>::iterator it = onderzoeken.begin(); it != onderzoeken.end();     it++){
    Onderzoek onderzoekOB = *it;
    cout << teller << " - ";
    onderzoekOB.print();
    teller++;
 }  
}

void    Wielrenner::setOnderzoeksLijst(list<Onderzoek>& newOnderzoeksLijst){
onderzoeken = newOnderzoeksLijst;
}

void    Wielrenner::print(){

cout << "(" << persoonID << ") Persoon: " << endl;
cout << persoonType << endl;
cout << voornaam << " " << achternaam << endl;
adres.print();
cout << telefoon << endl;
cout << "Datum in dienst: ";
datumInDienst.print();
cout << "Geboortedatum: ";
geboorteDatum.print();
cout << "> Extra wielrenner gegevens: " << endl;
cout << "Lengte: " << lengte << endl;
cout << "Gewicht: " << gewicht << endl;
cout << "vo2max: " << vo2max << endl;
cout << "maxVermogen: " << maxVermogen << endl;
}
void Wielrenner::printFile(ofstream &myfile){

myfile <<  persoonID << "\n";
myfile << persoonType << "\n";
myfile << voornaam << " " << achternaam << "\n";
adres.printFile(myfile);
myfile << telefoon << "\n";
datumInDienst.printFile(myfile);
geboorteDatum.printFile(myfile);
myfile << lengte << "\n";
myfile << gewicht << "\n";
myfile << vo2max << "\n";
myfile << maxVermogen << "\n";
}
// returnen van gegevens

int     Wielrenner::getLengte() const{
return lengte;
}
float   Wielrenner::getGewicht() const{
return gewicht;
}
float   Wielrenner::getVo2max() const{
return vo2max;
}   
float   Wielrenner::getMaxVermogen() const{
return maxVermogen;
}
list<Onderzoek> Wielrenner::getOnderzoekenList(){
return onderzoeken;
} 
```

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-08-19T15:30:17.787

“不完整的类”是一种已声明但未定义的类。例如

```
class Wielrenner; 
```

与

```
class Wielrenner
{
    /* class members */
}; 
```

你需要`#include "wielrenner.h"`在`dokter.ccp`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-01-19T17:01:00.303

要检查的一件事...

如果您的类被定义为 typedef：

```
typedef struct myclass { }; 
```

然后你尝试`struct myclass`在其他任何地方引用它，你会左右得到不完整的类型错误。忘记类/结构是类型定义的有时是错误的。如果是这种情况，请从以下位置删除“struct”：

```
typedef struct mystruct {}...

struct mystruct *myvar = value; 
```

而是使用...

```
mystruct *myvar = value; 
```

常见的错误。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-01T16:43:03.023

在错误的命名空间中声明前向引用时会出现此错误，从而声明新类型而不定义它。例如：

```
namespace X
{
  namespace Y
  {
    class A;

    void func(A* a) { ... } // incomplete type here!
  }
} 
```

...但是，在 A 类中定义如下：

```
namespace X
{
  class A { ... };
} 
```

因此，A 被定义为`X::A`，但我将其用作`X::Y::A`。

解决方法显然是将前向引用移动到正确的位置，如下所示：

```
namespace X
{
  class A;
  namespace Y
  {
    void func(X::A* a) { ... } // Now accurately referencing the class`enter code here`
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-02T12:17:41.467

我遇到了同样的问题，并通过检查我的#includes 解决了它。如果你使用 QKeyEvent 你必须确保你也包括它。

我有一个这样的课程，在 .cpp 文件中使用“事件”时出现了我的错误。

我的文件.h

```
 #include <QKeyEvent> // adding this import solved the problem.

    class MyClass : public QWidget
    {
      Q_OBJECT

    public:
      MyClass(QWidget* parent = 0);
      virtual ~QmitkHelpOverlay();
    protected:
        virtual void  keyPressEvent(QKeyEvent* event);
    }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-09T08:29:48.257

检查您是否缺少某些导入。

# ios - ios - 尝试将启动和应用程序图像添加到应用程序，但 pList 文件没有该行

> ID：12027659
> 
> 赞同：0
> 
> 时间：2012-08-19T15:27:00.183
> 
> 标签：ios, ios5

我正在浏览一些关于为应用程序添加应用程序图像的文档，它说要在 Xcode 中编辑 Info.plist，并找到“图标文件”并编辑该条目。

我正在查看 pList 文件，但没有这样的条目。我尝试制作一个，但似乎只允许通过界面添加小节。我应该只在 VI 中编辑该文件还是我做错了什么？

这是我当前 pList 文件的屏幕截图

![在此处输入图像描述](../Images/de72bbd95de18a4bee0d122ad95f7856.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T15:37:40.550

打开应用程序的目标配置，并将图像拖到其中。

![在此处输入图像描述](../Images/2a4875217d0cba028de575d0133749ff.png)

# android - 仅在 android 上显示的 div

> ID：12027660
> 
> 赞同：3
> 
> 时间：2012-08-19T15:27:28.780
> 
> 标签：android, css, html5-video, jwplayer

是否可以有一个仅在特定设备中可见的 div 标签？

我们有一个具有 HTML5 后备的视频页面，可以在桌面和 iOS 设备上很好地播放，但在 Android（特别是三星 S3）上却不行

我做了一些研究，其背后的可能原因是 .m3u8 在 android 中不受完全支持，并且 RTSP 有更多成功报告。

我想在我们的视频嵌入代码下放置一个 div 标签，它只会在 android 设备上显示。

就像是...

```
<div id="androids"><a href="rtsp_url">Android user please click here to watch video</a></div> 
```

这可能吗？

顺便一提。我在我的页面上使用 JW Player。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:43:05.713

尝试这个：

**HTML：**

```
<div id="video"></div> 
```

**JavaScript：**

```
var ua = navigator.userAgent.toLowerCase();
var isAndroid = ua.indexOf('android') > -1;

var videoDiv = document.getElementById('video'); 

if(isAndroid) {
  videoDiv.innerHTML = '<a href="rtsp_url">Android user please click here to watch video</a>';
} else {
  //add something else
  videoDiv.innerHTML = '<video>This is HTML 5 video for non-Android users</video>';
} 
```

解释一下：JavaScript 判断用户是否使用 Android。如果用户使用 Android，它会添加`<a href="rtsp_url">Android user please click here to watch video</a>`到`<div id="video">`，如果不是，它会添加常规 HTML 5`<video>`标签。

***注意：***而不是`<video>This is HTML 5 video for non-Android users</video>`添加您的视频代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:32:00.247

如果您可以使用 JavaScript，您可以`navigator.userAgent`尝试确定它是否是移动浏览器和 Android 设备，并注入适当的 HTML 元素。

这是一个示例 Android UA 字符串：
`Mozilla/5.0 (Linux; U; Android 4.0.2; en-us; Galaxy Nexus Build/ICL53F) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T17:31:15.683

如果你使用php，你可以这样：</p>

```
function isMobile(){
$useragent_commentsblock=preg_match(’|\(.*?\)|’,$useragent,$matches)>0?$matches[0]:”;

function CheckSubstrs($substrs,$text)
{
foreach($substrs as $substr)
if(false!==strpos($text,$substr))
return true;
return false;
}

$mobile_os_list=array(’Google Wireless Transcoder’,'Windows CE’,'WindowsCE’,'Symbian’,'Android’,'armv6l’,'armv5′,’Mobile’,'CentOS’,'mowser’,'AvantGo’,'Opera Mobi’,'J2ME/MIDP’,'Smartphone’,'Go.Web’,'Palm’,'iPAQ’);

$found_mobile=CheckSubstrs($mobile_os_list,$useragent_commentsblock);

if ($found_mobile) return true;
else return false;

} 
```

如果你只想要android显示，可以编辑$mobile_os_list这个arry。</p>

# vim - Vim上的Ruby缩进带点

> ID：12027663
> 
> 赞同：0
> 
> 时间：2012-08-19T15:28:05.307
> 
> 标签：vim

我注意到像 janus 这样的一些 vim 发行版会自动为 ruby​​ 缩进添加一些点/标记，例如

```
 .....module Models
 .......class User < Base 
```

我确实为 ruby​​ 尝试了一些 ruby`.vimrc`​​ 示例，但我似乎没有找到类似的东西。

有没有一种简单的方法来实现这一点，而不必使用完整的 vim 发行版，例如通过简单的`.vimrc`配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:47:11.380

尝试使用: `set list listchars=tab:\ \ ,trail:·`，它将显示所有尾随制表符和带点的空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:36:00.703

如果`:echo has("conceal")`返回 1，那么你的 vim 被编译并可以使用隐藏。然后你应该可以使用

```
set conceallevel=1
syn match Conceal /\s/ conceal cchar=·
hi Conceal guibg=black 
```

# java - JLabel 右对齐图标和文本

> ID：12027664
> 
> 赞同：7
> 
> 时间：2012-08-19T15:28:10.393
> 
> 标签：java, swing, icons, jlabel

是否可以创建一个`JLabel`带有右对齐图标和文本的图标，并且图标在右侧，如下所示：

![在此处输入图像描述](../Images/2187e7a5dc9db373e80c7bd9c6aeb6c2.png)

我已经看到[了这个](https://stackoverflow.com/questions/2932389/how-to-right-justify-icon-in-a-jlabel)问题，但这真的是最好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T16:14:13.287

也许这将是您正在寻找的更多内容？它应该对齐面板右侧的所有内容（比您正在查看的示例更多）：

![代码截图](../Images/30f23cedb6368e15cc5a7c69fe6935c0.png)

```
import java.awt.*;
import javax.swing.*;

public class TempProject
{
    public static void main(String args[])
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                Box mainContent = Box.createVerticalBox();
                mainContent.add(TempProject.getLabel("abc"));
                mainContent.add(TempProject.getLabel("Longer"));
                mainContent.add(TempProject.getLabel("Longerest"));
                mainContent.add(TempProject.getLabel("Smaller"));

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
                frame.setContentPane(mainContent);    
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public static JLabel getLabel(String text){
        JLabel c = new JLabel(text);
        c.setHorizontalTextPosition(SwingConstants.LEADING);
        c.setAlignmentX(SwingConstants.RIGHT);
        c.setIcon(UIManager.getIcon("FileChooser.detailsViewIcon"));
        return c;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-19T16:01:19.957

[引用](https://stackoverflow.com/questions/2932389/how-to-right-justify-icon-in-a-jlabel/2933256#2933256)的示例使用布局和标签属性进行右/左对齐。

此外，考虑在[渲染器](https://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)`Icon`中实现接口，其中和可用于控制相对几何。这相关说明了原理。`JList` `setHorizontalAlignment()``setVerticalAlignment()`[`TableCellRenderer`](https://stackoverflow.com/questions/2833482/how-to-represent-double-values-as-circles-in-a-2d-matrix-in-java/2834484#2834484)

[![图片](../Images/53ce7bcea3725ed0eab33d417c495c28.png)](https://i.stack.imgur.com/ZEZQB.png)

# html - 下拉菜单与图像碰撞

> ID：12027666
> 
> 赞同：1
> 
> 时间：2012-08-19T15:28:25.677
> 
> 标签：html, css

我创建了一个简单的 CSS 下拉菜单，问题是我有一个图像库，当我将鼠标悬停在图像所在区域的菜单上时，图像将获得焦点，而不是菜单。任何建议如何解决它？Z指数可能吗？

[这是有问题的页面](http://ogjewels.co.il/content/galleries/amulets/goldfilled/galleryPage1.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:32:46.563

```
#nav ul li {z-index: 9;} 
```

似乎工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T15:32:51.947

z-index 绝对是。

```
#menu{
  z-index: 2;
}

#gallery{
  z-index: 1;
} 
```

我还注意到您使用了大量的不透明度。当两个半透明元素重叠时，它们的颜色都会受到影响。

提示：尝试为这些图像使用缩略图生成器，它们需要一段时间才能加载

祝你好运！-布赖恩

# spring - 在 Spring MVC 中管理自定义 Accept 标头

> ID：12027668
> 
> 赞同：2
> 
> 时间：2012-08-19T15:28:35.663
> 
> 标签：spring, rest, spring-mvc

我有一个使用 Spring MVC 开发的 RESTful Web 服务，并且没有任何配置，我可以从我的带`@ResponseBody`注释的控制器方法返回对象，这些方法被序列化为 JSON。只要请求中的 Accept 标头未设置或为`application/json`.

当我受到 GitHub API 规范的启发时，我想像[GitHub 那样](http://developer.github.com/v3/mime/)为我的 API 实现自定义 mime 类型，例如：`application/vnd.myservice+json`. 但是我需要告诉 Spring MVC 我的控制器可以提供这种 mime 类型并且它应该由 Json 序列化（即 org.springframework.web.servlet.view.json.MappingJacksonJsonView 类）。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T23:14:24.493

您可能完全可以使用`org.springframework.http.converter.json.MappingJacksonHttpMessageConverter`. 由于它不是最终类，因此您可以通过以下方式从中派生转换器：

```
class MyCustomVndConverter extends MappingJacksonHttpMessageConverter{
    public MyCustomVndConverter (){
        super(MediaType.valueOf("application/vnd.myservice+json"));
    }
} 
```

然后以这种方式注册您的转换器：

```
<mvc:annotation-driven> 
   <mvc:message-converters register-defaults="true">
       <bean class="MyCustomVndConverter "/>
   </mvc:message-converters>
</mvc:annotation-driven> 
```

它应该只适用于这些更改

# c - 如何在 C 中打印级别顺序树（不是二进制）？

> ID：12027669
> 
> 赞同：1
> 
> 时间：2012-08-19T15:28:38.923
> 
> 标签：c, data-structures, tree

我正在查看此处提出的问题，但仅找到有关二叉树的答案。我想按级别打印具有 0 - n 个孩子的树。我知道孩子的数量，但我的代码不起作用

我认为的算法是：

*   打印根
*   打印所有子数据
*   为每个孩子
    *   打印数据

但问题是我不知道在哪里停下来，当我递归尝试时，我失败了。

这是我写的函数：

```
void printBFS(myStruct s)
   {
      int i = 0;
      printAllChildrenData(s);
      for (i = 0; i < s->number_of_children; i++)
        {
            myStruct childCurr = getChildAtIndex(s, i);
            printBFS(chilCurr);
        }
   } 
```

我在这里搞事情。我希望功能清晰：`printAllChildrenData`打印 S 的所有孩子的所有数据；它遍历子列表并打印出来。

*编辑* 如果我有这棵树，例如：

```
 1
     2        7        8
  3    6            9     12
 4 5              10 11 
```

它应该打印：

```
1 2 7 8 3 6 4 5 9 12 10 11 
```

代替：

```
1 2 7 8 3 6 9 12 4 5 10 11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:57:38.930

此代码密切基于您的代码（但扩展为[SSCCE](http://sscce.org/)），产生输出：

```
 1 2 7 8 3 6 4 5 9 12 10 11 
```

该代码使用 C99 的指定初始化程序功能（C99 最有用的补充之一，IMNSHO）。我选择使用比`myStruct`结构“更好”的名称；它代表一棵树，所以这就是它的名称。我也没有在 typedef 中隐藏指针，并使打印代码 const 正确（打印代码通常不应该修改它正在操作的数据结构）。它还使用 C99 选项在`for`循环的第一个子句中声明一个变量。我引入了一个额外的函数，`printTree()`它从根节点打印数据，调用 your`printBFS()`来打印树的主体，并打印一个换行符来标记输出的结束；调用该`printTree()`函数来打印一棵树。注意系统的使用`printData()`打印节点的数据。如果数据比单个整数更复杂，这将允许您编写一次打印代码。

仔细研究代码会发现`printBFS()`下面的代码与你展示的内容是同构的，这反过来表明你的问题不在你展示的代码中。这意味着它可能存在于您用于构建树的代码中，而不是用于打印它的代码中。由于您没有向我们展示构建树的代码，因此我们很难预测问题所在。

```
#include <stdio.h>
#include <assert.h>

enum { MAX_CHILDREN = 3 };
typedef struct Tree Tree;

struct Tree
{
    int data;
    int number_of_children;
    Tree *children[MAX_CHILDREN];
};

static void printData(const Tree *s)
{
    printf(" %d", s->data);
}

static void printAllChildrenData(const Tree *s)
{
    for (int i = 0; i < s->number_of_children; i++)
        printData(s->children[i]);
}

static const Tree *getChildAtIndex(const Tree *s, int i)
{
    assert(s != 0 && i >= 0 && i < s->number_of_children);
    return(s->children[i]);
}

static void printBFS(const Tree *s)
{
    printAllChildrenData(s);
    for (int i = 0; i < s->number_of_children; i++)
    {
        const Tree *childCurr = getChildAtIndex(s, i);
        printBFS(childCurr);
    }
}

static void printTree(const Tree *s)
{
    printData(s);
    printBFS(s);
    putchar('\n');
}

/*
**             1
**       2        7        8
**    3    6            9     12
**   4 5              10 11
*/

static Tree nodes[] =
{
    [ 1] = {  1, 3, { &nodes[ 2], &nodes[ 7], &nodes[ 8] } },
    [ 2] = {  2, 2, { &nodes[ 3], &nodes[ 6], 0          } },
    [ 3] = {  3, 2, { &nodes[ 4], &nodes[ 5], 0          } },
    [ 4] = {  4, 0, { 0,          0,          0          } },
    [ 5] = {  5, 0, { 0,          0,          0          } },
    [ 6] = {  6, 0, { 0,          0,          0          } },
    [ 7] = {  7, 0, { 0,          0,          0          } },
    [ 8] = {  8, 2, { &nodes[ 9], &nodes[12], 0          } },
    [ 9] = {  9, 2, { &nodes[10], &nodes[11], 0          } },
    [10] = { 10, 0, { 0,          0,          0          } },
    [11] = { 11, 0, { 0,          0,          0          } },
    [12] = { 12, 0, { 0,          0,          0          } },
};

int main(void)
{
    printTree(&nodes[1]);
    return(0);
} 
```

您可以轻松地修改测试以依次打印每个节点：

```
enum { NUM_NODES = sizeof(nodes) / sizeof(nodes[0]) } ;

int main(void)
{
    for (int i = 1; i < NUM_NODES; i++)
        printTree(&nodes[i]);
    return(0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T16:52:06.973

你可以有一个像 printElementsAtLevelN(int n) 这样的函数来遍历树，跟踪它的深度，并且只打印正确级别的元素。如果你让它返回打印的元素数量，你可以有一个循环来做类似的事情：

```
while (printElementsAtLevelN( n ))
{
    n++;
} 
```

这样做的缺点是您多次遍历树的各个部分，但如果树不是很大，那可能不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T15:47:12.910

您需要一个列表结构（或其他一些容器）。伪代码将类似于：

```
ListOfNodes list
ListOfNodes children
add_node(list, root)
repeat {
    while (list not empty) {
        print top_node(list)
        add_children(children, top_node)
        pop_top(list)
    }
    list = children
    clear_all(children)
} until (list is empty) 
```

# jquery - 在textarea中进行焦点模糊并使用jquery显示隐藏范围

> ID：12027674
> 
> 赞同：0
> 
> 时间：2012-08-19T15:29:23.477
> 
> 标签：jquery, focus, show-hide, blur

我有这个文本区域：

```
<textarea  name="comment" id="comment" cols="75" rows="5" class="txtarea"></textarea> 
```

这个跨度显示字符限制：

```
<span style="display:none" id="chars_left">1000</span> 
```

现在我需要在 textarea 框中聚焦/模糊时显示/隐藏跨度。我创建了这个 jquery 函数，但这对我不起作用。什么问题 ？如何根据我的需要使用 jquery？

```
<script>
 $('textarea').focus(function(){

      jQuery(this).find('#chars_left').show();       
})

// this function will hide divs when you leave that textarea
$('textarea').blur(function(){

      jQuery(this).find('#chars_left').hide();       
})
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:31:10.403

有几处需要更正，您将在下文中看到。当您有 id 时，您可以直接访问控制，也可以在 script 标签中提供类型。您试图在不需要的 textarea 的子项中找到 chars_left。您可以将焦点事件与焦点一起使用。

**[现场演示](http://jsfiddle.net/rajaadil/BGLV9/)**

```
<script type="text/javascript">
 $('textarea').focus(function(){    
      jQuery('#chars_left').show();       
})

// this function will hide divs when you leave that textarea
$('textarea').focusout(function(){

      jQuery('#chars_left').hide();       
})
</script> 
```

# c# - XAML 绑定到 ViewModel 中的控件

> ID：12027677
> 
> 赞同：1
> 
> 时间：2012-08-19T15:30:14.450
> 
> 标签：c#, .net, wpf, mvvm, binding

视图模型类：

```
class MyViewModel : ViewModelBase, INotifyPropertyChanged
{
    public string SomeText { get{...} set {...}}
    public AnyNonMVVMControl MyControl { get {...} set {...}}
    ...
} 
```

窗口 XAML：

```
<Grid>
...
<TextBlock Text="{Binding SomeText}" />
<??? Content="{Binding MyControl}" /> <!-- how to bind MyControl to the View? -->
...
</Grid> 
```

分配模型

```
...
window.DataContext = new MyViewModel(...);
... 
```

我有一个控件，它不是为 MVVM 设计的。渲染和数据是强耦合的（糟糕的设计解决方案）。我的视图模型中有这个控件，并希望将它绑定到我的窗口。但我不想直接在 XAML 中添加控件，因为此控件还包含业务逻辑和数据 -> 我需要在视图模型中访问它以执行操作。

那么，如何通过 Bindings 将控件“添加”到窗口中呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T15:37:49.817

使用`ContentPresenter`或`ContentControl`：

```
<ContentControl Content="{Binding MyControl}" /> 
```

# inno-setup - 提示在 Inno 安装程序中安装 DirectX

> ID：12027679
> 
> 赞同：0
> 
> 时间：2012-08-19T15:30:19.440
> 
> 标签：inno-setup

我正在使用 Inno 设置为游戏创建和安装程序，我想提示用户并询问他们是否要安装 DirectX9（我已经在子文件夹中拥有完整的安装 Directx 文件），然后如果他们说的话为他们安装它是或否...我不确定如何执行此操作并且编程知识有限。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T05:03:48.200

使用此代码显示带有问题和是/否按钮的消息框：

```
 // Ask the user a Yes/No question
  if MsgBox('Are you sure?', mbConfirmation, MB_YESNO) = IDYES then
  begin
     // User clicked Yes
     // Install the DirectX now... (see below)
  end; 
```

这段代码执行（启动）DXSETUP.exe

```
var
  ResultCode: Integer;

  // Launch DXSETUP and wait for it to terminate
  Exec('DXSETUP.exe', '', '', SW_SHOW, ewWaitUntilTerminated, ResultCode); 
```

我认为您需要将 DirectX 文件打包到安装程序中并将其解压缩到 {tmp} 目录 - 或者您可以从 CD/DVD 运行它（如示例所示）。

请参阅此问题以了解高级 DXSETUP：[如何从 Inno-setup 安装 DirectX redistributable？](https://stackoverflow.com/questions/8723836/how-to-install-directx-redistributable-from-inno-setup)

如果您需要检测 DX 版本，请检查：[http ://www.vincenzo.net/isxkb/index.php?title=DirectX_-_How_to_detect_DirectX_version](http://www.vincenzo.net/isxkb/index.php?title=DirectX_-_How_to_detect_DirectX_version)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T20:19:36.827

您可以使用一个`[Tasks]`条目在其中一个向导页面上显示一个复选框，提示他们是否安装/升级 DX（并且您可以选择默认情况下是勾选还是取消勾选）。

对于实际安装，最简单的选择是使用`[Run]`带有`Tasks:`参数的条目链接到`[Tasks]`您创建的条目；但请记住，这将在您的游戏之后安装，您将无法捕捉到它可能引发的任何错误。（不过，这通常不是这类事情的问题。）

另一种选择是在;中使用`PrepareToInstall`事件函数。`[Code]`为此，您将需要使用`ExtractTemporaryFile`and `Exec`。这将在您的游戏之前安装它，并让您检查退出代码以处理错误并在需要时重新启动请求。有关更多详细信息，请参阅 Inno 随附的示例脚本，但这可能比 DX 安装所需的复杂。

您还需要决定是要捆绑 DX 的 Web 安装程序还是完整安装程序。前者较小，但需要在安装时访问 Internet；后者将使您的安装程序更大，但不需要 Internet 访问。如果您从 DVD 安装，那么后者是最好的选择（在这种情况下，您可以直接从 DVD 运行它，`{src}`而不是捆绑它`[Files]`）。

# .net - CSS 中的 img url - .NET MVC 想要一个控制器

> ID：12027687
> 
> 赞同：-1
> 
> 时间：2012-08-19T15:31:32.640
> 
> 标签：.net

我正在尝试将标准 CSS 与诸如'background: url('../images/sort_asc.png') no-repeat center right;'之类的语句一起使用

运行时，我收到指示未找到控制器的 Visual Studio 消息。我如何告诉框架直接解析图像 URL，而不需要控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:36:53.310

如果它位于内容文件夹中，则不需要控制器。您的 CSS 位于何处？图像与 CSS 位置相关，而不是 CSS 所在的文档。

我怀疑您可能在（父）的 URL 中返回太多`..`，然后生成一个 URL，例如`yourhost.com/images/sort_asc.png`这会触发框架查找“图像”控制器。

例如尝试：

```
background: url('images/sort_asc.png') no-repeat center right; 
```

（假设 CSS 直接在`Contents`文件夹中，并且文件夹中还有一个`images`包含您的位图的`Contents`文件夹）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:47:38.007

相对路径不适用于 MVC。原因是 /Home 和 /Home/Index （例如）可能指向同一个页面，因此无法构建适用于两者的相对路径。

解决方案是使用“/Content/Images/img.png”或“http://mydomain.com/Content/Images/img.png”之类的绝对路径（即，至少对于 .css 文件等静态资源）不允许您使用动态语法）。

# html - 优雅的方式来用图像皮肤表单元素？

> ID：12027688
> 
> 赞同：0
> 
> 时间：2012-08-19T15:31:45.987
> 
> 标签：html, css, forms, themes

我花了一天的大部分时间寻找一个一流的解决方案，用精灵图像为表单元素蒙皮，但我想出的很少。有几种基于 JS-CSS 样式的产品，但没有一个产品为每个元素使用图像。

我对为文本字段、文本区域、提交按钮以及可能的选择菜单设置皮肤特别感兴趣——其他元素很简单，可以使用纯 CSS 设置皮肤。

是否有一种功能强大、灵活且兼容的方式来做到这一点？

# ios - 如何在多个 IOS 视图控制器中引用变量

> ID：12027689
> 
> 赞同：0
> 
> 时间：2012-08-19T15:31:49.243
> 
> 标签：ios, model-view-controller, design-patterns, xamarin.ios, monodevelop

我在问什么可能是一个基本问题，但我对 iOS 和面向对象编程相对较新：

问题：如果我有一个简单的应用程序，它有 2 个视图和视图控制器，每个都接收输入，我应该如何构建我的程序，以便我可以引用在每个视图控制器中输入的值并获取这些值，将它们加在一起（如一个例子），然后输出它说第三个视图控制器？

如果这一切都在同一个控制器中完成，那么我可以做到，但问题是我可以将其存储在哪里，以便数据可跨多个控制器使用？

从根本上说，我不确定应该在哪里进行“处理（添加）”。这应该在另一个类还是 AppDelegate 中？这在 MVC 中被称为“模型”吗？多个视图控制器可以引用同一个模型吗？

我确信这确实是基本的东西，但是一个示例或对材料的参考确实有助于我澄清这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:46:09.373

我的个人模式是模型-视图-控制器模式的变体。对于每个屏幕，我都有一个 ViewController、一个 UIView、一个用于保存视图显示的数据的模型类和一个用于保存该视图的所有业务逻辑的辅助类。这些类相互引用，因此如果您知道一个，您可以访问其他类。我还将我的模型类和助手类链接到与控制器层次结构相对应的层次结构中，这就是我解决您描述的问题的方式。对于给定的视图，您可以访问它的助手和模型类实例，然后您可以从那里导航到整个应用程序的任何助手和模型实例。

可能有更好的方法可以做到这一点，但我就是这样做的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-19T15:45:35.650

您可以使用 NSUserDefaults 来存储共享数据，或者您可以将自己的共享存储对象实现为[singleton](http://en.wikipedia.org/wiki/Singleton_pattern)，[这是](http://db-in.com/blog/2011/12/objective-c-singleton/)一个使用演示项目在 obj-c 中创建单例对象的教程。

# iphone - 使用 NSSortDescriptor 时发现的一些错误

> ID：12027695
> 
> 赞同：0
> 
> 时间：2012-08-19T15:32:24.570
> 
> 标签：iphone, ios, xcode, nsdate, nssortdescriptor

我使用 NSSortDescriptor 以日期为键对对象进行排序。我的代码：

```
 NSLog(@"Before sorting: %@", temp);
    NSSortDescriptor *dateSortDescriptor = [NSSortDescriptor sortDescriptorWithKey: @"date" ascending: YES];
    NSArray *sortedArray2 = [temp sortedArrayUsingDescriptors:[NSArray arrayWithObject: dateSortDescriptor]];
    NSLog(@"After sorting: %@", sortedArray2);
    NSMutableArray *afterSorting = [[(NSArray*)sortedArray2 mutableCopy]autorelease]; 
```

当日期是

```
22/08/2012
23/08/2012
25/09/2012 
```

但是，我发现 NSSortDescriptor 似乎只按前面的前两个数字排序，因为当我的日期稍微改变时，我的结果变成了这样：

```
10/09/2012
22/08/2012
23/08/2012 
```

有人可以请教吗？看到许多其他使用 NSSortDescriptor 的帖子与我上面的代码类似，但它们似乎在任何地方都没有错误。对我来说，它只按天排序，而不是按月排序！我所做的是对日期较近的对象进行排序。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:00:16.263

您显示的排序顺序实际上是正确的。问题是您正在排序字符串而不是日期。如果可能，请使用 的实例而不是 的实例填充`date`属性，然后排序将按照您的预期进行。`NSDate``NSString`

如果由于某种原因您不能`NSDate`在`date`属性中使用实例（这看起来有点奇怪，但谁知道），您可以改为通过向数组发送`sortedArrayUsingComparator:`消息来对数组进行排序，并传入一个定义自定义排序的块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:22:33.380

排序工作正常，因为它只比较字符串。因此，您首先需要将 NSDate 转换为 NSString，然后对 NSDate 进行排序操作，然后恢复为排序后的日期字符串数组，如下所示：

```
- (NSArray *) sortArrayOfDateStrings:(NSArray*)array {

NSMutableArray *sortedArray = [NSMutableArray arrayWithCapacity:0];
NSMutableArray *sortedDateArray = [NSMutableArray arrayWithCapacity:0];
NSDate *dateObject;

for(NSString *dateString in array){

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

[dateFormatter setDateFormat:@"dd/MM/yyyy"];
NSDate *dateFromString = [[NSDate alloc] init];

dateFromString = [dateFormatter dateFromString:dateString];
[dateFormatter release];

[sortedArray addObject:dateFromString];
}

NSSortDescriptor *dateSortDescriptor = [NSSortDescriptor sortDescriptorWithKey: @"date" ascending: YES];
[sortedDateArray addObjectsFromArray:[sortedArray sortedArrayUsingDescriptors:[NSArray arrayWithObject: dateSortDescriptor]]];

[sortedArray removeAllObjects];

for (NSDate* sortedDate in sortedDateArray){

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd/MM/yyyy"];
NSString *strDate = [dateFormatter stringFromDate:sortedDate];
NSLog(@"%@", strDate);
[dateFormatter release];

[sortedArray addObject:strDate];
}

return sortedArray
} 
```

# c# - ASP.NET 默认.aspx

> ID：12027701
> 
> 赞同：1
> 
> 时间：2012-08-19T15:33:27.967
> 
> 标签：c#, asp.net

无法找到该资源。

说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

请求的 URL：/Customer/Reservation/Default.aspx

我应该如何解决这个问题？如果我将 Default.aspx 添加到文件夹保留中，这将解决我的问题，但有什么方法可以解决此错误？:)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:41:47.847

我假设`Default.aspx`位于虚拟目录`Customer`或根目录中，并且您正在开发可能已添加到页面中的用户控件`/Customer/Reservation`？如果是这样，在服务器端，使用`ResolveUrl`

```
Response.Redirect(ResolveUrl("~/Default.aspx")); 
```

或者要在标记中从该目录创建链接，请使用：

```
<a href="<% = ResolveUrl("~/Default.aspx") %>">Click here to go home</a> 
```

但是，如果您只是尝试使用 IIS 中`/Customer/Reservation`设置的默认页面导航到`Default.aspx`，那么您必须将`Default.aspx`页面添加到虚拟子目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:35:25.987

只需添加文件。它给你这个错误的原因是因为它找不到文件夹的默认文档，而且（如果我没记错的话）IIS 默认情况下不会显示文件夹中的文件列表。

我真的不明白你是如何在这里遇到问题的。该错误具有相当的描述性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T15:41:04.990

你基本上有两个选择：

要么`create that file`要么`use routing to map that address to a desired file`。

第二种方法的示例：

```
protected void Application_Start(object sender, EventArgs e)
{
   RegisterRoutes(RouteTable.Routes);
}

private void RegisterRoutes(RouteCollection routes)
{
   routes.MapPageRoute("customer-reservation", // name of the route
                       "Customer/Reservation", // url to look for
                       "~/Pages/reservation.aspx");  // existing file to map to
} 
```

请注意，如果您使用 Web 表单，则至少需要 .NET 版本 4 或更高版本，或者使用 MVC 才能工作。如果您使用的是较低的 .NET 版本而不使用 MVC，则需要一个 url 重写模块（在 Google 上搜索，返回大量结果）。

注意2：这个例子属于`Global.asax.cs`文件内。

注意3：可以在这里找到另一个示例，例如：[http ://weblogs.asp.net/jalpeshpvadgama/archive/2011/12/11/easy-url-rewriting-in-asp-net-4-0-web-forms .aspx](http://weblogs.asp.net/jalpeshpvadgama/archive/2011/12/11/easy-url-rewriting-in-asp-net-4-0-web-forms.aspx)

如果您需要找到有关此主题的更多资源，只需输入“asp.net routing”即可，这将为您提供足够的学习成果。

# c++ - 在模块加载/卸载时在外部 C++ 模块中构造/销毁对象

> ID：12027706
> 
> 赞同：0
> 
> 时间：2012-08-19T15:34:03.570
> 
> 标签：c++, python, cython, boost-python

我用 C++ 编写了一个 python 模块。一切正常，但现在我想添加日志记录。我的记录器类（第 3 方）需要类似于以下内容的初始化：

```
int main()
{
    Logger logger("log.log");
    Logger::Register(&logger);

    DoSomethingAndLog();
    return 0;
} 
```

如您所见`logger`，在程序初始化时创建并在程序终止时销毁。

我将在哪里创建`Logger`对象，以便在模块加载时构建它并在模块卸载时销毁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:24:40.457

您可以将对象包装`Logger`到一个类中并声明该类的全局实例。这种方法比原始全局变量有一点优势，`Logger`因为您可以在构造函数和析构函数中控制初始化和取消初始化。您还可以限制对`Logger`对象的访问。

```
class TheLogger
{
public:
  TheLogger() { Logger::Register(&_logger); }
  ~TheLogger() { Logger::Unregister(&_logger); }

  Logger& GetLogger() { return _logger; }

private:
  Logger _logger;
};

TheLogger theLogger;

int main()
{
  DoSomethingAndLog();

  theLogger.GetLogger().Log("...");

  return 0;
} 
```

# java - Tomcat 中间证书“sec_error_unknown_issuer”

> ID：12027707
> 
> 赞同：0
> 
> 时间：2012-08-19T15:34:24.543
> 
> 标签：java, tomcat, ssl, x509, keytool

我有一个测试场景，其中一个名为*Root的根证书颁发机构签署了一个名为**Intermediate*的中间证书颁发机构创建的证书签名请求，该证书颁发机构又签署了一个名为*Subject*的主题创建的证书签名请求。

我使用 Tomcat 作为我的 Web 服务器，我已将其配置为使用*主题*密钥存储（其中包含*根*证书、*中间*证书、*主题*证书链和*主题*私钥），我启动它以侦听端口 80 (HTTP) 和 443 (HTTPS)。

我在 Firefox 中安装了*根*证书（作为受信任的证书），然后打开了我的域，这就是我得到的：

```
subject.usip.me uses an invalid security certificate.
The certificate is not trusted because no issuer chain was provided.
(Error code: sec_error_unknown_issuer) 
```

显然，Firefox 无法验证链或类似的信任。现在，在详细介绍我的配置和我采取的步骤之前：我已经更改了我的 Tomcat 配置，以便它使用*中间*密钥库而不是使用*主题*密钥库（*中间*密钥库包含*根*证书，*中间*证书链和*中间*私钥）。使用此配置一切正常。

我使用以下工具：

*   爪哇：1.7.0_05
*   雄猫：7.0.29
*   火狐：14.0.1

[我使用粘贴在此处的以下脚本创建有问题的密钥存储](http://pastebin.com/raw.php?i=BpVJ4JfU)（它很长）。任何拥有 Java*密钥*工具的人都可以运行它（由于 4096 RSA 密钥大小，它可能不会太快运行）。

脚本运行后，我可以验证我的*主题*密钥存储是否包含完整的信任链（如我所见）：

```
c:\>keytool -list -keystore c:\subject.jks -storepass changeit -rfc 
```

[它打印出粘贴在此处的以下（同样，非常冗长）输出](http://pastebin.com/raw.php?i=AkJshyWZ)。对我来说似乎没问题（至少，经过数小时的挣扎，我似乎看*不出*有什么问题）。

我像这样通过它的*server.xml*设置了 Tomcat（[遵循这个方法](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html#Configuration)） （除了这个默认注释掉的单个标签之外，我什么都没有改变）。

 *```
<Connector port="443" protocol="HTTP/1.1" SSLEnabled="true"
           maxThreads="150" scheme="https" secure="true"
           clientAuth="false" sslProtocol="TLS"
           keystoreFile="c:/subject.jks"
           keystorePass="changeit"
           keystoreType="jks"
           keyAlias="subject"
           keyPass="changeit" /> 
```

（在我启动 Tomcat 后，连接到它 - 当它使用*主题*或*中间*密钥存储时 - 没有记录错误。）

在寻找解决方案时，我发现使用*openssl*我可以验证我的服务，作为该工具的新手用户，我对我的域运行了以下命令（使用 Cygwin）：

```
$ openssl s_client -connect subject.usip.me:443 -CAfile /cygdrive/c/root.pem -showcerts &> /cygdrive/c/openssl.log 
```

再一次，[我在这里粘贴了冗长的输出](http://pastebin.com/raw.php?i=xAHBjrfa)。

它说`Verify return code: 24 (invalid CA certificate)`，这很奇怪，因为它（如我所见）指的是*根*证书。现在，当我说我之前重新配置 Tomcat 以使用*中间*密钥存储时，我也运行了相同的命令，然后使用`Verify return code: 0 (ok)`. 所以我来宾*根*证书就可以了。

我通过帖子和粘贴提到的域名和子域名是在[http://freedns.afraid.org/](http://freedns.afraid.org/)注册的免费域名，它们每个都指向我当前的地址（我想我会提到它，也许这很重要）。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:33:59.377

好的，我已经设法弄清楚了。当我生成对我的证书签名请求的回复时，我没有指定一些重要的 X.509 证书扩展。

[*Java 的keytool*文档中有一些关于此的](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/keytool.html#Commands)信息。（搜索`-ext`。）

关键点是正确生成、*签署* 中间*证书*

```
keytool -gencert^
 -alias root^
 -ext BasicConstraints:critical=ca:true,pathlen:0^
 -ext KeyUsage:critical=keyCertSign,cRLSign^
 -infile intermediate.csr^
 -keypass changeit^
 -keystore root.jks^
 -outfile intermediate.pem^
 -rfc^
 -sigalg sha512withrsa^
 -storepass changeit^
 -storetype jks^
 -v 
```

和*主题*证书

```
keytool -gencert^
 -alias intermediate^
 -ext BasicConstraints:critical=ca:false^
 -ext ExtendedkeyUsage:critical=serverAuth,clientAuth^
 -ext KeyUsage:critical=digitalSignature,keyEncipherment^
 -infile subject.csr^
 -keypass changeit^
 -keystore intermediate.jks^
 -outfile subject.pem^
 -rfc^
 -sigalg sha512withrsa^
 -storepass changeit^
 -storetype jks^
 -v 
```

当我有时间并发布我的完整解决方案时，我会更新我的答案。

## 更新

[我在 GitHub 上建立了一个小示例存储库](https://github.com/kohanyirobert/keytool-certificate-chain-example)，其中包含我为生成必要的密钥存储文件、证书等而编写的脚本。我在 Bash 中重新编写了我的脚本，并向其中添加了很多配置参数。它可以在没有任何配置的情况下运行。在这种情况下，它将为*root.lvh.me*、*intermediate.lvh.me*和*subject.lvh.me*域创建证书（[第二级，*lvh.me*域默认指向*127.0.0.1*](http://matthewhutchinson.net/2011/1/10/configuring-subdomains-in-development-with-lvhme)）。将*主题*密钥存储与 Tomcat 一起使用并将*Root*证书安装到 Firefox 将导致与*https://subject.lvh.me的经过验证的安全连接*（没有其他地方，所以*https://intermediate.lvh.me*不会验证）。*

# c - C Socket 请求被缓冲

> ID：12027708
> 
> 赞同：1
> 
> 时间：2012-08-19T15:34:33.297
> 
> 标签：c, sockets

我有一个简单的服务器 - 客户端模型。服务器在其中向客户端发送一些加密消息。客户端然后使用消息的前几个字符来决定处理。问题是这些消息一个接一个地被缓冲，因此我丢失了在第一个消息之后缓冲的所有消息。有没有一种简单的方法来防止缓冲或告诉发送函数刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:57:49.573

您的客户端必须确定应该读取多少字节才能处理。服务器将一个接一个地发送一条消息，但流式套接字允许字节流动，就好像它是一条长消息一样。您的消息需要某种方式让客户知道一个消息何时结束，下一个消息何时开始。

在流式套接字中执行此操作的最简单方法是在消息前面加上消息的长度。所以客户端首先读取长度，然后客户端读取那么多字节。

```
int send_message (int sock, const void *message, uint32_t len) {
    int r;
    uint32_t mlen = htonl(len);
    r = send(sock, &mlen, 4, 0);
    /* ...error checking... */
    r = send(sock, message, len, 0);
    /* ...error checking... */
    return ok ? len : error;
}

int recv_message (int sock, void *buf, uint32_t size) {
    int r;
    uint32_t mlen;
    r = recv(sock, &mlen, 4, 0);
    /* ...error checking... */
    mlen = ntohl(len);
    /* ...check buf is large enough... */
    r = recv(sock, buf, mlen, 0);
    /* ...error checking... */
    return ok ? mlen : error;
} 
```

# spring - 如何从单个配置文件生成模型层、持久层和服务层

> ID：12027709
> 
> 赞同：-1
> 
> 时间：2012-08-19T15:34:38.873
> 
> 标签：spring, hibernate, ant, model, persistence

我正在使用休眠将数据保存在 MySql 数据库中。

现在我已经在 hibernate 配置文件中配置了我的业务模型。我正在寻找的是，是否有任何工具可以在构建/部署应用程序时生成模型层（POJO）、持久层和服务层（业务逻辑），以便控制器与数据库服务器进行通信。简而言之，我希望从一个配置点生成所有基本要素。

Ant 或 Spring 或其他框架的组合，任何可以实现的解决方案。

任何对存在线程或少数文档的引用都将受到高度赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:47:43.233

你最接近的赌注是[Grails](http://grails.org/)。

我不喜欢你想做的事。代码生成会导致系统脆弱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:58:48.553

spring roo 也是一个不错的选择，因为您的堆栈基于 spring 框架。另一个可以使用的选项是 MyEclipse IDE for Spring，它支持基于域/表的代码生成。

# ios - 用于 iPhone 上语音识别的 shazam

> ID：12027710
> 
> 赞同：3
> 
> 时间：2012-08-19T15:34:58.327
> 
> 标签：ios

我正在尝试构建一个应用程序，允许用户记录个人讲话，然后将录音保存在设备上，并用讲话人的姓名标记每条记录。然后是检测模式，我记录某人，如果他在本地数据库中，我可以知道他的名字。

首先 - 这可能吗？我对 iOS 开发非常陌生，对可用的 API 不太熟悉。

更重要的是，我应该使用哪个 API（最好是免费的）来关联传入的语音和我在本地数据库中的记录？这应该表现得像 Shazam，但更简单，因为我正在寻找匹配的数据库要小得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T17:39:46.060

如果您是 iOS 开发新手，我会从核心应用程序开始录制音频，然后让人们手动选择配置文件/名称以将其附加到，然后再担心说话人识别部分。

对于事物的识别方面，您显然有两种选择：您可以绑定其他人的语音认证/说话者识别库（可能是 C 或 C++），或者您可以尝试编写自己的。

有多少人会使用你的应用程序？您也许可以自己创建一些基本的东西：如果这是男人和女人之间的区别，您可以通过对音频进行 FFT 频谱分析并找出频率峰值在哪里来弄清楚这一点。显然，用于发音不同音素的频率会有所不同，因此解决两个听起来非常相似的一般情况可能很困难。您需要用一堆文本训练系统并建立某种频率分布模型。您可以尝试进行聚类或其他操作，但您很快就会遇到一些数学问题（[高斯混合模型](http://speech.ee.ntu.edu.tw/previous_version/Speaker%20Verification%20Using%20Adapted%20Gaussain%20Mixture%20Models.pdf)等）。有图书馆/项目可以做到这一点。您也许可以从 matlab 移植它，例如：[https://github.com/codyaray/speaker-recognition](https://github.com/codyaray/speaker-recognition)

如果您想使用现成的东西，我会选择像 misral 这样的直接 C 库，因为从 Objective-C 调用它应该相对容易。

SpeakHere[示例](https://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html)代码应该让您开始录制和播放音频。

此外，用户训练您的应用程序以识别他们可能需要更长的时间，而不是从列表中选择他们的名字所节省的时间。除非您打算让他们的声音成为某种安全护照类型的东西，否则可能不值得打扰。

# c++ - 在 C++ 应用程序后面运行的 C++ 计时器

> ID：12027711
> 
> 赞同：1
> 
> 时间：2012-08-19T15:35:05.093
> 
> 标签：c++, c++11, ubuntu-12.04

我有一个在前台运行的 C++ 应用程序。我需要一个与应用程序同时运行的计时器。当计时器到零时，我需要计时器弹出一个窗口。

我不能使用 sleep() 因为`who`应用程序休眠。请就如何做到这一点提出建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-19T15:46:46.480

由于您使用的是 C++11，我建议使用[`thread`库](http://en.cppreference.com/w/cpp/thread).

您可能想要的是[`std::this_thread::sleep_for`](http://en.cppreference.com/w/cpp/thread/sleep_for)or [`std::this_thread::sleep_until`](http://en.cppreference.com/w/cpp/thread/sleep_until)，它可以在您的计时器线程的上下文中调用。

像这样的东西...

```
std::thread timer([]() {
  std::this_thread::sleep_for(std::chrono::seconds(5));
  std::cout << "hello, world!" << std::endl;
});
std::cout << "thread begun..." << std::endl;
timer.join(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:19:20.043

我建议下载[Boost](http://www.boost.org)库，然后使用[这个](http://www.drdobbs.com/cpp/the-boostthreads-library/184401518)非常简单的教程来创建一个 boost 线程。

如果您不想花时间下载/安装/配置 Boost，请使用[Windows 线程](http://www.codeproject.com/Articles/438/Introduction-to-Multi-threaded-Code)。（我假设您正在尝试使用`sleep()`您在 Windows 上）。不过，Windows 线程比 Boost 线程更难理解。

在实际程序中，您需要包含类似这样的内容（以 Boost 为例）：

```
void timer() {

    sleep(x);
    //Whatever code here to make your popup window.
    return NULL;
}

int main() {

    boost::thread prgmTimer(&timer);
    //Regular code here.
    //prgmTimer.join(); //Remove the comment on that command if you want something to
                        //to happen after your timer runs down and only if your
                        //timer runs down. (Ex. the program exits).
    return 0;
} 
```

# java - 使用 JSP 和 Ajax 的指导

> ID：12027714
> 
> 赞同：0
> 
> 时间：2012-08-19T15:35:27.467
> 
> 标签：java, javascript, ajax, jsp

> **可能重复：**
> [如何使用 Servlet 和 Ajax？](https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax)

今天早上早些时候，我创建了一个 Java Web 应用程序，通过 HTML 表单接收员工数据并返回信息。我将信息显示在与 show hide div 中的表单相同的页面上。工作得很好！

所以我认为这将是一个练习/学习一些 ajax 的好地方！因此，我不会在表单下方显示和隐藏带有 jsp 标签的 div，而是将 jsp 标签放在另一个页面中，并在必要时填充 div。好吧，这就是计划！

所以这是我第一次尝试使用 ajax，所以我一直在关注[w3schools](http://www.w3schools.com/ajax/) Ajax 教程，但不幸的是我的程序无法正常工作。没有从 result.jsp 获取所需的信息。任何有关如何获取内容并将其正确显示在 div 中的指导将不胜感激。感谢您的阅读！澄清一下，在我添加 ajax 之前，这作为一个显示隐藏 div 非常有用。

Ajax（遵循 w3schools 模板）

```
function writeInformation()
{
    var xmlhttp;

    if (window.XMLHttpRequest)
        xmlhttp = new XMLHttpRequest();
    else
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
            document.getElementById("empInformation").innerHTML = xmlhttp.responseText;
    }

    xmlhttp.open("get", "result.jsp", true);
    xmlhttp.send();
} 
```

result.jsp（我想要在 div 中显示的内容。目前没有显示此代码。）

```
<h2>Employee Information Below:</h2>
${empAttribute.getResult()}
<p />
<input type="button" onClick="closeEmpInfo()" value="Clear Information" /> 
```

div（位于 index.jsp 中，与 result.jsp 位于同一根文件夹中）

```
<div id="empInformation">

</div> 
```

# excel - 运行时错误 1004 尝试保存文件名中包含日期的文件时未保存文档

> ID：12027718
> 
> 赞同：2
> 
> 时间：2012-08-19T15:36:10.387
> 
> 标签：excel, save, runtime-error, vba

所以我有一个宏，它工作得很好，如下所示。它遍历数据验证下拉列表，并在下拉列表中为每个国家/地区保存一个 pdf。但是，当我尝试编辑宏以使文件名包括国家名称 (D14) 之外的日期时，我遇到运行时错误 1004 无法保存文档。我对 VBA 很陌生，所以我不知道如何解决这个问题......我真的很感激一些帮助

斯蒂芬

```
Sub Create_PDFs()
'
' Create_PDFS Macro
'
' Keyboard Shortcut: Ctrl+y
'
Const sheetToExportName = "Graphs"
Const sheetWithCountryList = "Master Sheet"
Const CountryListAddress = "AQ6:AQ38"
Const chosenCountryCell = "D14"
Const sheetWithChosenCell = "Graphs"

Dim CountryList As Range
Dim anyCountry As Range

Set CountryList = _
ThisWorkbook.Worksheets(sheetWithCountryList). _
Range(CountryListAddress)
For Each anyCountry In CountryList
ThisWorkbook.Worksheets(sheetWithChosenCell). _
Range(chosenCountryCell) = anyCountry
ThisWorkbook.Worksheets(sheetToExportName).ExportAsFixedFormat Type:=xlTypePDF, Filename:= _
        "N:\International Finance Division\RAT Advanced Economies - Chartpacks\Country Risks\Created PDFs\" & ActiveSheet.Range("D14").Value & " - Country Risk Indicators.pdf" _
        , Quality:=xlQualityStandard, IncludeDocProperties:=False, _
        IgnorePrintAreas:=False, OpenAfterPublish:=False
        Next
        Set CountryList = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:46:40.223

清除特殊字符的日期值。

假设范围始终是日期，请替换：

```
ActiveSheet.Range("D14").Value 
```

像这样：

```
format(ActiveSheet.Range("D14").Value,"YYYYMMDD") 
```

随意使用与 . 不同的格式`"YYYYMMDD"`，但请确保不要使用 shahkalpesh 的评论所指示的“/”。

# javascript - 用于电话验证的 JavaScript 正则表达式

> ID：12027722
> 
> 赞同：2
> 
> 时间：2012-08-19T15:36:39.107
> 
> 标签：javascript, regex, validation, phone-number

我需要一行正则表达式的帮助来验证电话号码，它是这样的： `tel:/^(?:(?:\+?1\s*(?:[\.\-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[\.\-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[\.\-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/`

这些是它验证的格式：

> *555 5555*
> *1-555-555-5555*
> *1.555.555.5555*
> *15555555555 分机 555*
> *15555555555 分机 555*
> *15555555555 #555*
> *15555555555 x。555*

我想验证以下数字：

> +263 772 485 384
> 773456284
> 0773456284

主要是国际号码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:04:59.857

首先，拆分一大块正则表达式。`verbose`如果有语言选项，您可能想使用它。我为你分了大部分：

```
Telephone Numbers (should be 'orred'):
  \+?\d{3}(?:\ \d{3,4})+
  \d[-.]\d{3}[-.]\d{3}[-.]\d{4}
  \d{9,11}

Extensions (should be 'anded' with the previous regexes)
  (\ ext(?:\.|ension)(?:\ \#)?\ \d{3,4})? 
```

# android - 无法从列表视图开始新活动

> ID：12027724
> 
> 赞同：-1
> 
> 时间：2012-08-19T15:36:44.440
> 
> 标签：android

当我单击列表项时，没有任何反应。为什么会这样，我该如何解决？

```
public class SecondActivity extends Activity {
    TextView selection ;
    private String[] menus = {"MainActivity","spam"};
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_second);
        ListView listview = (ListView)findViewById(R.id.list) ;
        listview.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, menus));  
    }

    public void onListItemClick(ListView parent, View v,int position, long id) {
        Intent intent = new Intent (SecondActivity.this,ThirdActivity.class);
        startActivity(intent);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_second, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:42:46.537

您的活动应该扩展 ListActivity

[http://developer.android.com/reference/android/app/ListActivity.html](http://developer.android.com/reference/android/app/ListActivity.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:43:18.337

您必须覆盖 onListItemClick 方法：

```
@Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        //start activity
    } 
```

也不要忘记在您的活动类中扩展 ListActivity。

编辑：

你的班级应该是这样的：

```
public class SecondActivity extends ListActivity{

//onCreate {...}

@Override
        protected void onListItemClick(ListView l, View v, int position, long id) {
            //start activity
        } 
```

它已经完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T15:50:51.250

将侦听器设置为列表视图。这可能有助于解决您的问题

# ruby-on-rails - 在 Rails 中使用 Feedzirra 定期导入每个用户的 RSS 提要

> ID：12027725
> 
> 赞同：0
> 
> 时间：2012-08-19T15:36:51.860
> 
> 标签：ruby-on-rails, activerecord, feedzirra

我正在尝试定期将一组 RSS 提要导入我在 Rails 中的 Posts 表中。我暂时试图避开 Cron。这是我到目前为止所拥有的（在我的应用程序控制器中）。

```
require 'rubygems'
require 'rufus/scheduler'
require 'feedzirra'
scheduler = Rufus::Scheduler.start_new
scheduler.every '60m' do
  @users = User.all(:joins => :roles, :conditions => {:roles => {:name => "writer"}})
  @users.each do |user|
    if user.feed.blank? 

    else
      FEEDZIRRA IMPORT CODE??
    end
  end 
```

正如您可能已经得出的结论，RSS 提要数组来自具有 Writer 角色的用户，这些用户设置了提要字段。该脚本每 60 分钟执行一次。

我的问题是如何在不重新导入任何以前导入的帖子的情况下导入提要？而且由于我是编程新手，并且只是将其作为一个学习曲线项目进行，因此如果对使我的代码更有效有任何建设性的批评，我会全力以赴。

编辑：再想一想，这是否适合在我的应用程序控制器中？每次加载页面时都会创建此调度程序的新实例，对吗？如果我是正确的，那么我可以安全地将这段代码放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T22:01:49.540

回答你的第二个问题：不，这不应该在你的控制器中运行。有几种流行的 gem 可以用来制作计划任务。我会推荐“无论何时”：

[https://github.com/javan/无论何时](https://github.com/javan/whenever)

他们有很好的文档，应该很容易理解。这些任务将在 config/schedule.rb 文件而不是您的应用程序控制器中指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T22:46:15.420

为了避免导入以前导入的提要，您可以考虑在您的数据库中创建一个字段，例如“id_unique”，将每个提要中的任何常量变量添加到该字段，例如来自 RSS 提要的日期/时间，然后您可以在您的模型中验证 id_unique 的唯一性，或者通过 id_unique 添加一个方法到 find_or_create。

# php - 使用 PHP 清理 url

> ID：12027730
> 
> 赞同：2
> 
> 时间：2012-08-19T15:37:32.227
> 
> 标签：php

我有以下 PHP 行：

`echo "<li>".str_replace("http://", "", rtrim($row['website'],"/"))."</li>";`

这会从 url 中删除 http:// 和尾部斜杠。但是我也希望它删除 https:// 但不想将其包装在另一个 str_replace 中。

他们是一种更好、更有效的方法吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T15:39:17.387

尝试：

```
str_replace(array("http://","https://"), "", rtrim($row['website'],"/") 
```

# jquery - 当我的 jQuery 对话框被隐藏时做一些事情

> ID：12027741
> 
> 赞同：0
> 
> 时间：2012-08-19T15:39:22.770
> 
> 标签：jquery, jquery-dialog

我的页面上有一个 jquery 对话框。当我不再需要我的对话框时，我会像这样“隐藏”它：

```
$('#modal-dialog').modal('hide'); 
```

我的问题：如何在对话框的“隐藏”（不是真正关闭......）上绑定一个事件来做一些事情。

我已经这样了：

```
$('#modal-dialog').bind('dialogclose', function (event) {
    // do something here
}); 
```

但它不起作用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:41:39.493

假设您使用的是引导模式库：

```
$('#modal-dialog').on('hidden', function () {
  // do something…
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:58:50.990

根据您的模态隐藏方式（以及您想要的事件），您可以在隐藏后将您想要的内容串起来。如果您的隐藏是即时的，那么您可以添加更多方法： `$('#modal-dialog').modal('hide').append("<p>append some text</p>");`否则我建议只制作一个小模态插件来调用窗口，然后使用`$("#modal-container").hide(function(){ //events events events });`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T17:49:31.903

这对我有用：

```
$("#dialog-modal").on('dialogclose', function (event, ui) {
        changeImage()
    }) 
```

# c# - 如何避免在servicestack中序列化为json的子类属性

> ID：12027748
> 
> 赞同：2
> 
> 时间：2012-08-19T15:40:37.790
> 
> 标签：c#, servicestack

假设我有 3 节课。

```
public Class1{
public string field1{get;set;}
}

public Class2:Class1 {
public string field2{get;set;} 
}

public Class3:Class2 {
public string field3{get;set;} 
}

Class3 obj3 = new Class3();
Class2 obj2 = obj3;

Class1 obj1 = obj2; 
```

* * *

```
public class MyInfoService : ServiceBase<MyReuest>
{
      protected override object Run(MyReuest request)
        {
           Class3 obj3= FindObjClass3("someid");
           Class2 obj2 = DoSomethingObj3Class3(obj3);
           Class1 obj1= obj2; // service users have to get only Class1 fields 
           return obj1;

        }
} 
```

当我想使用 format=json 返回 obj1 作为响应时，问题就开始了，输出 json 包含来自 obj2 和 obj3 的属性。

我只希望 obj1 仅以其属性序列化为响应。

有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:55:13.457

不要尝试滥用继承，它们对 DTO 来说是不好的做法： [让 ServiceStack 保留类型信息](https://stackoverflow.com/questions/10750571/getting-servicestack-to-retain-type-information/10759250#10759250)

对 DRY 属性使用继承也是一个坏主意——应该避免这些不必要的抽象。自动属性是一种简洁的方式来表达你的类型的结构字段。在需要时使用接口：http: [//ayende.com/blog/4769/code-review-guidelines-avoid-inheritance-for-properties](http://ayende.com/blog/4769/code-review-guidelines-avoid-inheritance-for-properties)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T16:13:05.953

如果您无法触及序列化级别，请在返回之前尝试克隆对象。

```
public class Class1 : ICloneable {
    public string Prop1 { get; set; }

    public object Clone() {
        return new Class1 { Prop1 = Prop1 };
    }
}

public class Class2 : Class1 {
    public string Prop2 { get; set; }

    public new object Clone() {
        return new Class2 { Prop1 = Prop1, Prop2 = Prop2 };
    }
} 
```

然后使用：

```
public class MyInfoService : ServiceBase<MyReuest>
{
    protected override object Run(MyReuest request)
    {
       Class3 obj3 = FindObjClass3("someid");
       Class2 obj2 = DoSomethingObj3Class3(obj3); 
       return ((Class1) obj2).Clone();
    }
} 
```

注意：对于 Clone 方法的不同实现，取决于类型使用`new`关键字而不是`override`

# windows - windows - 如何编写一个在关机时弹出提醒的脚本

> ID：12027750
> 
> 赞同：0
> 
> 时间：2012-08-19T15:41:01.863
> 
> 标签：windows

我想写一个简单的脚本来提醒我在关机/睡眠时服药。我该如何开始？（寻找最简单的方法）

谢谢，李

# spring - 在 Roo 项目中捕获控制器创建的方面 - 如何？

> ID：12027751
> 
> 赞同：0
> 
> 时间：2012-08-19T15:41:03.483
> 
> 标签：spring, aop, spring-roo

我希望我在 Roo 项目中的第一个方面能够在 Web 控制器启动时运行建议。但我无法让切入点匹配。

控制器有一个以 Cfx 开头的类名。我尝试过以下形式：

```
pointcut setBrand() : initialization(Cfx*.new (..));

before()  : setBrand()
{
    log.info("xxxxxxxxxxxx  setting brand");
} 
```

除了“初始化”之外，我还尝试过（来自 AspectJ Cookbook）调用（签名）新关键字、预初始化、静态初始化。公式是什么？

也许这是相关的 - Roo 方面没有这种形式 - 例如没有切入点。他们是如何工作的？这是在哪里记录的？

谢谢

PS道歉，这是一个重新发布。我将此发布到 Spring Roo 论坛，但没有得到回应。[http://forum.springsource.org/showthread.php?129374-Aspect-to-trap-Controller-creation-how-to](http://forum.springsource.org/showthread.php?129374-Aspect-to-trap-Controller-creation-how-to)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:28:15.163

我对 Roo 或 Spring 几乎一无所知，只知道一些 AspectJ，所以我将仅从 AspectJ 的角度回答您的问题，假设您是 AOP 新手（对不起，如果我的假设不正确）：

*   如果您想在加载类时执行某些操作，请使用`staticinitialization(TypePat)`切入点。
*   如果您想在创建对象（实例）时执行某些操作，请使用类似`execution(ConstructorPat)`. 这`initialization`是用于特殊目的，并且`preinitialization`很少需要。我假设第一个会为你做，不知道你的确切目的。
*   进一步假设类似`execution(Cfx*.new (..))`的东西基本上是您想要的东西，我建议您查看可能的错误或警告，例如“...中定义的建议尚未应用 [Xlint:adviceDidNotMatch]”，因为它可能只是一个切入点匹配问题。请注意，您使用的类型模式假定匹配的构造函数与切面在同一个包中，并且它们具有标准的可见性（不是公共的或其他任何东西）。因此，除非存在类加载问题，否则您可能只想更准确地（或更一般地）指定要匹配的内容。例子：
    *   `com.bigboxco.my_app.Cfx*.new(..)`
    *   `com.bigboxco..Cfx*.new(..)`
    *   `public com.bigboxco..Cfx*.new(..)`
    *   `!private com.bigboxco..Cfx*.new(..)`
    *   `* com.bigboxco..Cfx*.new(..)`

一个好的策略可能是尝试通过复制其确切签名并使用其完全限定的类名来匹配您的构造函数，然后从该点开始使其更通用。

更新：我知道您可以自己进行网络搜索，但无论如何这里有一些有用的链接：

*   [AspectJ 快速参考](http://www.eclipse.org/aspectj/doc/released/quick5.pdf)
*   [AspectJ 语言语义](http://www.eclipse.org/aspectj/doc/next/progguide/semantics.html)，包含关于签名、匹配等的主题。

# asp.net - 在 viewbag 中传递数据

> ID：12027758
> 
> 赞同：0
> 
> 时间：2012-08-19T15:42:08.847
> 
> 标签：asp.net, asp.net-mvc-3

我想从表中检索小时列`db.instantservices` 我无法做到。我正在使用`EF code`并且在浏览器上我可以看到这个详细信息页面，但看不到中的信息`viewbag`。提前谢谢你

```
Classes-:

 public class InstantService
{
    public int InstantServiceID { get; set; }
    public string ServiceName { get; set; }
    public string InstantUserName { get; set; }
    public string Title { get; set; }``
    public string Description { get; set; }
    public int Hours { get; set; }
    public int InstantID { get; set; }
    public Instants CurrentInstant { get; set; }
    public virtual ICollection<Review> Reviews { get; set; }
}

public class Review
{
    public int ReviewID { get; set; }
    public InstantService Service { get; set; }
    public int InstantServiceID { get; set; }
    public string MyReview{ get; set; }
} 
```

但是当使用这段代码时，我没有得到任何价值。代码 -：

```
public ViewResult Details(int id)
         {
           Review review = db.ReviewDB.Find(id);
            ViewBag.ServiceHours = db.InstantServiceDB.Select(model => model.Hours);
            return View(review);
          } 
```

查看代码-：

```
 @{
          ViewBag.Title = "Details";
                  }

             <fieldset>
            <legend>Review</legend>

             <div class="display-label">Service</div>
             <div class="display-field">
             @Html.DisplayFor(model => model.Service.Title)
             </div>

             <div class="display-label">MyReview</div>
             <div class="display-field">
             @Html.DisplayFor(model => model.MyReview)
             </div>
             </fieldset>

             <p>
             @Html.ActionLink("Edit", "Edit", new { id=Model.ReviewID }) |
             @Html.ActionLink("Back to List", "Index")
             </p>
             <div>
             Total Hours required were -:
             <div>
             @ViewBag.ServiceHours
             </div>
             </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:01:12.380

此方法（Linq *Select*）返回一个*IEnumerable*：

```
db.InstantServiceDB.Select(model => model.Hours); 
```

当您将其直接转储到 Razor 视图中时，它将使用*ToString*进行渲染，这是您不希望的。如果您期望该数据库调用的单个结果，那么您可以使用*FirstOrDefault*来获取实际值：

```
ViewBag.ServiceHours = db.InstantServiceDB
    .Where(model => model.ForeignKey == id)
    .Select(model => model.Hours)
    .FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:01:13.900

目前尚不清楚您希望如何`ViewBag.ServiceHours`显示数据。因为，由赋值给出，它是一个整数的集合，你可以在视图中以这种方式显示它：

```
<div>
    @(String.Join(", ", ((IEnumerable<int>) ViewBag.ServiceHours).Select(x => x.ToString())))
</div> 
```

这将显示以逗号分隔的所有值。您可以调整格式以满足您的需求。

# c# - 在没有savefiledialogue的c#webbrowser中保存页面

> ID：12027761
> 
> 赞同：2
> 
> 时间：2012-08-19T15:42:49.563
> 
> 标签：c#

我正在使用`C#`网络浏览器，我想在按下某个键时保存一些页面，但是当我使用 SaveFileDialgue 时会弹出一个窗口并询问目的地！有什么方法可以在不提示我的情况下将其直接保存到特定目的地？

这是我的代码：

```
private void btnSubmit_Click(object sender, EventArgs e)
{
  browser.Navigate("https://www.google.com/");
  SaveFileDialog sfd = new SaveFileDialog();
  sfd.Filter = " TEXT File |*.txt";
  if (sfd.ShowDialog() == DialogResult.OK)
  {
    browser.SaveDocument(sfd.FileName);
  }        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T18:40:57.137

删除以下行

```
 SaveFileDialog sfd = new SaveFileDialog();
            sfd.Filter = " TEXT File |*.txt";
            if (sfd.ShowDialog() == DialogResult.OK)
            {
                browser.SaveDocument(sfd.FileName);
            } 
```

添加

```
 browser.SaveDocument("c:\\outputfile.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T08:07:53.013

您可以使用阅读所有页面

```
private void BtnSaveHtml_Click(object sender, EventArgs e)
        {
           // webBrowser1.ShowSaveAsDialog();
            string html;

            html = webBrowser1.DocumentText.ToString();
        } 
```

并且在流编写器的帮助下，您可以将所有数据保存在您想要保存的位置。

# php - 收集电子邮件和网站地址的 PHP 表单

> ID：12027764
> 
> 赞同：0
> 
> 时间：2012-08-19T15:43:20.593
> 
> 标签：php, security

我已经构建了以下表单，该表单从人们那里收集电子邮件地址和网站 url。在数据库中，电子邮件和网站 url 设置为唯一的，因此一个人不能两次输入相同的电子邮件和网站。

然而，作为 PHP 新手，我想仔细检查表单是否包含任何可能允许人们对表单进行恶意操作和/或存在可被利用的验证问题的严重问题。此外，因为我想在回发时隐藏表单但再次显示错误，我最终复制了表单，这并不理想但在这种情况下并不是什么大问题，因为它只是一个快速表单。主要因素是确保验证非常强大，并且表单中的服务器/sql 攻击不存在漏洞。

```
<?php

if($_SERVER['REQUEST_METHOD'] == 'POST')
{
    // DATABASE CONNECTION HERE

    $email = mysql_real_escape_string($_POST['EMAIL']);
    $website = mysql_real_escape_string($_POST['WEBSITE']);

    if ( $email == '' || $website == '' || !filter_var($website, FILTER_VALIDATE_URL) || !filter_var($email, FILTER_VALIDATE_EMAIL) )
    {
        echo '<p style="color:red;">You must fill out all fields correctly and duplicate emails/websites are not permitted!</p>';

    ?>
        <form action="./" method="post">

            <label for="EMAIL">Email Address</label>
            <input type="email" value="" name="EMAIL" id="EMAIL" required>
            <label for="WEBSITE">Website URL</label>
            <input type="url" value="" name="WEBSITE" id="WEBSITE" required>
            <input type="submit" value="Join" name="join">

        </form>

    <?php

    }
    else
    {
        $query = "INSERT INTO list VALUES (NULL, '$email','$website')";

        $result = mysql_query($query);
        echo '<p>THANKS!</p>';
    }
}
else
{

?>

<form action="./" method="post">

    <label for="EMAIL">Email Address</label>
    <input type="email" value="" name="EMAIL" id="EMAIL" required>
    <label for="WEBSITE">Website URL</label>
    <input type="url" value="" name="WEBSITE" id="WEBSITE" required>
    <input type="submit" value="Subscribe" name="subscribe">

</form>

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:52:31.657

您可以使用[这些验证过滤器](http://php.net/manual/en/filter.filters.validate.php)来验证这些值。您可以[在此处](http://php.net/manual/en/filter.examples.validation.php)找到一些相关说明。

为防止跨站点脚本和类似的攻击媒介，除非已验证，否则不应将电子邮件或 URL 插入数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:04:51.653

我认为只要您使用真正的转义和验证 url nd 电子邮件等重要功能，它就应该很好用。保持

谢谢

# magento - 从管理后端调用 Magento API 脚本

> ID：12027765
> 
> 赞同：0
> 
> 时间：2012-08-19T15:43:27.567
> 
> 标签：magento

我编写了一个小 Magento API 脚本，它获取一些订单数据并将其写入 *.csv 文件。

是否有可能使 scipt 可以从管理后端运行？例如，我可以在管理区域添加一个按钮来运行我的脚本吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:14:37.707

是的，这是可能的……但我认为这不是正确的方法。您能否详细说明一下您必须通过使用 API 从 Magento 获取订单信息的需求是什么？

如果您要从另一个系统中提取 Magento 的信息，那么 API 将是您最好的解决方案，但如果反过来您可以访问管理员，请尝试考虑其他方法来完成这项工作而不使用 api。

# c++ - 在 netbeans 7.1.1 中编译项目时出现链接器错误

> ID：12027766
> 
> 赞同：0
> 
> 时间：2012-08-19T15:43:35.077
> 
> 标签：c++, gcc, openssl, linker-errors, netbeans-7.1

我在编译项目时遇到很多链接器错误：

我在链接器选项中添加了所有必需的文件，并在链接器选项中专门添加了 libregistration.dll

```
build/Debug/MinGW_1-Windows/_ext/1996578364/stdsoap2_ssl_cpp.o: In function `fsend':
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:587: undefined reference to `BIO_write'
build/Debug/MinGW_1-Windows/_ext/1996578364/stdsoap2_ssl_cpp.o: In function `frecv':
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:918: undefined reference to `BIO_read'
build/Debug/MinGW_1-Windows/_ext/1996578364/stdsoap2_ssl_cpp.o: In function `soap_rand':
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:2969: undefined reference to `RAND_pseudo_bytes'
build/Debug/MinGW_1-Windows/_ext/1996578364/stdsoap2_ssl_cpp.o: In function `soap_ssl_init':
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3087: undefined reference to `OPENSSL_add_all_algorithms_noconf'
C:\repos\impression\trunk\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3091: undefined reference to `RAND_load_file'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3093: undefined reference to    `RAND_seed'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3096: undefined reference to  `RAND_seed'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3094: undefined reference to `RAND_status'
build/Debug/MinGW_1-Windows/_ext/1996578364/stdsoap2_ssl_cpp.o: In function `soap_ssl_error':
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3131: undefined reference to `ERR_peek_error'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3130: undefined reference to `ERR_error_string'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3135: undefined reference to `ERR_error_string_n'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3134: undefined reference to `ERR_get_error'
build/Debug/MinGW_1-Windows/_ext/1996578364/stdsoap2_ssl_cpp.o: In function `ssl_auth_init':
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3167: undefined reference to `ERR_clear_error'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3177: undefined reference to  `RAND_load_file'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3217: undefined reference to `RSA_generate_key'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3220: undefined reference to `RSA_free'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3223: undefined reference to `RSA_free'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3231: undefined reference to `DH_generate_parameters'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3234: undefined reference to `BIO_new_file'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3237: undefined reference to `PEM_read_bio_DHparams'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3238: undefined reference to `BI O_free'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3240: undefined reference to `DH_check'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3242: undefined reference to `DH_free'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3245: undefined reference to `DH_free'
build/Debug/MinGW_1-Windows/_ext/1996578364/stdsoap2_ssl_cpp.o: In function   `ssl_verify_callback_allow_expired_certificate':
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3374: undefined reference to `X509_STORE_CTX_get_error'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3379: undefined reference to `X509_STORE_CTX_set_error'
make[2]: Leaving directory `/c/repos/impression/trunk/Registration'
 build/Debug/MinGW_1-Windows/_ext/1996578364/stdsoap2_ssl_cpp.o: In function `soap_ssl_accept':
make[1]: Leaving directory `/c/repos/impression/trunk/Registration'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3451: undefined reference to `BIO_new_socket'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3489: undefined reference to `X509_verify_cert_error_string'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:3496: undefined reference to `X509_free'
build/Debug/MinGW_1-Windows/_ext/1996578364/stdsoap2_ssl_cpp.o: In function `tcp_connect':
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:4115: undefined reference to `BIO_new_socket'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:4163: undefined reference to  `X509_verify_cert_error_string'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:4178: undefined reference to   `X509_get_ext_count'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:4182: undefined reference to `X509_get_ext'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:4183: undefined reference to `X509_EXTENSION_get_object'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:4183: undefined reference to `OBJ_obj2nid'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:4183: undefined reference to `OBJ_nid2sn'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:4185: undefined reference to `X509V3_EXT_get'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:4199: undefined reference to `ASN1_item_d2i'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:4216: undefined reference to `sk_value'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:4215: undefined reference to `sk_num'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:4222: undefined reference to `X509V3_conf_free'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:4222: undefined reference to `sk_pop_free'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:4226: undefined reference to `ASN1_item_free'
C:\Registration/../include/gsoap/stdsoap2_ssl_cpp.cpp:4238: undefined reference to `X509_get_subject_name'
 ..................
 collect2: ld returned 1 exit status
 make[2]: *** [dist/Debug/MinGW_1-Windows/libRegistration.dll] Error 1
 make[1]: *** [.build-conf] Error 2
 make: *** [.build-impl] Error 2

 BUILD FAILED (exit value 2, total time: 8m 28s) 
```

谢谢，

# objective-c - NSSortDescriptor - 按位置排序

> ID：12027769
> 
> 赞同：4
> 
> 时间：2012-08-19T15:43:38.407
> 
> 标签：objective-c, ios, cocoa-touch, core-data, core-location

我在 Core Data 中有一个地理位置列表（实体名称是“Stops”）。

我想按当前位置对它们进行排序，以便向用户显示附近的位置。我正在使用 NSFetchedResultsController 以便结果可以轻松地显示在 UITableView 中。

我正在使用以下代码来尝试这种排序：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"stop_lat" ascending:YES comparator:^NSComparisonResult(Stops *obj1, Stops *obj2) {
    CLLocation *currentLocation = locationManager.location;

    CLLocation *obj1Location = [[CLLocation alloc]initWithLatitude:[obj1.stop_lat doubleValue] longitude:[obj1.stop_lon doubleValue]];
    CLLocation *obj2Location = [[CLLocation alloc]initWithLatitude:[obj2.stop_lat doubleValue] longitude:[obj2.stop_lon doubleValue]];

    CLLocationDistance obj1Distance = [obj1Location distanceFromLocation:currentLocation];
    CLLocationDistance obj2Distance = [obj2Location distanceFromLocation:currentLocation];

    NSLog(@"Comparing %@ to %@.\n  Obj1 Distance: %f\n  Obj2 Distance: %f",obj1.stop_name, obj2.stop_name, obj1Distance, obj2Distance);

    if (obj1Distance > obj2Distance) {
        return (NSComparisonResult)NSOrderedDescending;
    }

    if (obj1Distance < obj2Distance) {
        return (NSComparisonResult)NSOrderedAscending;
    }

    return (NSComparisonResult)NSOrderedSame;
}];

NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
[fetchRequest setSortDescriptors:sortDescriptors];
[fetchRequest setEntity:[NSEntityDescription entityForName:[Stops entityName] inManagedObjectContext:context]];

frcNearby = [[NSFetchedResultsController alloc]
          initWithFetchRequest:fetchRequest
          managedObjectContext:context
          sectionNameKeyPath:nil
          cacheName:nil];

NSError *error;
BOOL success = [frcNearby performFetch:&error];
if (error) NSLog(@"ERROR: %@ %@", error, [error userInfo]); 
```

但是，我的 NSFetchedResultsController 只是返回按我指定的键（“stop_lat”）排序的所有项目，而不是按用户当前位置排序。

看起来我的比较器块从未被调用过，因为那里的 NSLog 从不打印。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T15:51:38.130

基于 Objective-C 的排序描述符不能用于获取请求。

来自“核心数据编程指南”：

> ...总而言之，如果您直接执行 fetch，则通常不应将基于 Objective-C 的谓词或排序描述符添加到 fetch 请求中。相反，您应该将这些应用于获取的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T14:14:37.527

对此的另一种看法是在您的“停止” managedObject 上有一个名为 meanSquared 的属性（可能是 NSDecimalNumber）。

当您的设备 lat/long 移动到足以改变“最近停止”数据时，您将使用均方距离（即 (yourLat-stopLat)^2+(yourLong-stopLong)^2）更新所有“停止”对象，然后只需在您的 sortDescriptor 中使用“meanSquared”。

根据您更新用户位置的次数、停靠点之间的距离和停靠点的数量，这可能是最佳解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T19:47:28.573

无论如何，您不能按纬度/经度排序，您需要计算每个点的距离并按此排序。或者获取用户附近的一系列纬度/经度值，获取该子集，为它们计算距离并显示。范围就像用户的纬度 +/- 0.1 度，等等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-09T17:38:28.587

我会推荐以下方法：

[请参阅http://www.objc.io/issue-4/core-data-fetch-requests.html](http://www.objc.io/issue-4/core-data-fetch-requests.html)的“地理位置谓词”部分

它使用谓词获得近似结果，然后在内存中对它们进行准确排序。

# xml - 标签和元素有什么区别？

> ID：12027770
> 
> 赞同：31
> 
> 时间：2012-08-19T15:43:39.580
> 
> 标签：xml, terminology

在一些关于 XML 的文本中，术语*标签*和*元素*似乎可以互换使用。它们的意思是一样的，还是这些术语代表不同的东西？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-19T15:47:21.487

标签标记元素的开始和结束。

*   `<foo>`— 开始标签
*   `</foo>`— 结束标签
*   `<foo></foo>`- 元素

见[规格](http://www.w3.org/TR/2008/REC-xml-20081126/#sec-logical-struct)：

> 每个 XML 文档包含一个或多个元素，其边界由开始标记和结束标记分隔，或者对于空元素，由空元素标记分隔。

* * *

另请参阅[NOT the comp.text.sgml FAQ 的第 5 节](http://www.flightlab.com/~joe/sgml/faq-not.txt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-01T23:52:10.517

```
<address category = "residence">
    <name>name content</name>
    <company>company content</company>
    <phone>(011) 123-4567</phone>
</address> 
```

这`<address>`是一个具有属性的元素`category`

`tags`an 的开头和结尾`element`必须相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-05T06:50:47.843

HTML 元素由开始标签定义，可能包含一些内容和结束标签，而标签是 HTML 元素的开始和结束部分。

[![在此处输入图像描述](../Images/55e7a0a1db0ca7ad6ce15056c84123a9.png)](https://i.stack.imgur.com/ChfqW.png)

# python - Matplotlib：极坐标图颜色条上的固定边界

> ID：12027774
> 
> 赞同：4
> 
> 时间：2012-08-19T15:43:58.977
> 
> 标签：python, matplotlib, contour, colorbar

正如标题中所说，我正在尝试修复极坐标图的颜色条值（vmin=-3 和 vmax=+3）。我将生成几十个这样的图表，并且颜色条的自动缩放使比较变得非常困难。

绘图本身由以下代码生成：

```
fig, ax = subplots(subplot_kw=dict(projection='polar'))
cax = ax.contourf(thetas, r, values, 130)
cb1 = fig.colorbar(cax) 
```

我已经浏览了[http://matplotlib.sourceforge.org](http://matplotlib.sourceforge.org)几个小时，但仍然没有找到解决方案。我会指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T15:58:51.970

您可以通过自己传递轮廓级别来做到这一点。

不要仅仅尝试设置 vmin=3、vmax=3，而是在 vmin 和 vmax 之间选择 130 个值，这样它们对于所有图表都是相同的，而与数据范围无关。

尝试：

```
contour_levels = arange(-3, 3, 0.05)

fig, ax = subplots(subplot_kw=dict(projection='polar'))
cax = ax.contourf(thetas, r, values, contour_levels)
cb1 = fig.colorbar(cax) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-29T01:05:54.093

另一种解决方案可能是遵循[此响应](https://stackoverflow.com/a/3374216/6417219)中使用的逻辑来回答关于设置颜色条的最小值和最大值的类似问题。主要内容是使用`set_clim(self, vmin=None, vmax=None)`. 在这个问题的背景下，以下其中一项可能有效：

```
fig, ax = subplots(subplot_kw=dict(projection='polar'))
cax = ax.contourf(thetas, r, values, vmin=-3, vmax=3)
cb1 = fig.colorbar(cax) 
```

或者

```
cb1.set_clim(vmin=-3, vmax=3) 
```

[这个答案](https://stackoverflow.com/a/51971804/6417219)是相同的，但解决了对多个图表使用相同颜色条最小值/最大值的必要性。

# .net - .Net - 使用 HttpClient 发布文件？

> ID：12027777
> 
> 赞同：6
> 
> 时间：2012-08-19T15:44:29.077
> 
> 标签：.net, asp.net-mvc, httpclient, asp.net-web-api

我有一个调试方法，我试图用它来将多个文件发布到本地端点以模拟一系列上传。

我有以下代码：

```
var fi = new FIleInfo(....);
var form = new MultipartFormDataContent();
form.Add(new StreamContent(fi.OpenRead()), "file", fi.Name);
client.PostAsync(@"http://localhost:12372/TemplateManagement/Asset/Create", form); 
```

我想发布到具有以下签名的方法（资产来自自定义活页夹，但这并不重要）：

```
public JsonResult Create(HttpPostedFileBase file, DynamicBuilderAsset asset) 
```

帖子正常，但文件参数为空。我在这里想念什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T07:54:00.690

尝试引用名称和文件名：

```
form.Add(new StreamContent(fi.OpenRead()), "\"file\"", "\"" + fi.Name + "\""); 
```

如果您发送标准密钥也是如此：

```
form.Add(new StringContent("some asset data"), "\"asset\""); 
```

# c# - SQLite3 为 Metro 应用程序准备的语句

> ID：12027778
> 
> 赞同：1
> 
> 时间：2012-08-19T15:44:29.587
> 
> 标签：c#, sqlite, windows-8, microsoft-metro, windows-runtime

我正在使用 Windows 8 发布预览版和 C#(VS 2012) 开发 Metro 应用程序，我从[链接下载了 SQLite 3.7.13 并使用](http://www.sqlite.org/download.html)[此](http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx)过程成功地与我的应用程序集成，通过使用下面的代码，我可以创建表并插入数据

```
var dbpath = Path.Combine(Windows.Storage.ApplicationData.Current.LocalFolder.Path, "test.db");
            using (var db = new SQLite.SQLiteConnection(dbpath))
            {
                db.CreateTable<Test>();
                db.RunInTransaction(() =>
                    {
                        for (int i = 0; i < 10; i++)
                        {
                            db.Insert(new Test() { id = i,dept = "CS", Firstname = "First" + i.ToString(), Lastname = "Last" + i.ToString() });
                        }
                    });                
            } 
```

在哪里测试我的内心阶级

```
class Test
    {
        [AutoIncrement,PrimaryKey]
        public int id { get; set; }
        public string dept { get; set; }
        public string Firstname { get; set; }
        public string Lastname { get; set; }
        public override string ToString()
        {
            return string.Format("{0},{1}", Lastname, Firstname);
        }
    } 
```

通过使用下面的代码，我可以检索测试表中的所有记录

```
var dbpath = Path.Combine(Windows.Storage.ApplicationData.Current.LocalFolder.Path, "test.db");
            using (var db = new SQLite.SQLiteConnection(dbpath))
            {   
                var data = db.Table<Test>();                    
            } 
```

所以我的问题是我们如何在 SQLLite 中给出准备好的语句？例如：如果我想在我的表中找到部门“CS”的记录数，如果我想从我的表中只找到部门“CS”的记录，请帮助我，提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:06:11.430

您应该能够使用 Linq 语句：

*   *数数*

    var count = db.Table<Test>().Count();

*   *过滤*

    var data = db.Table<Test>().Where(test => test.dept == "CS");

# php - PHP如何sha1得到这个？

> ID：12027779
> 
> 赞同：0
> 
> 时间：2012-08-19T15:44:45.793
> 
> 标签：php, sha1, encryption, smf

我有自己的小网站并使用 sha1 加密，现在我尝试将其连接到 SMF 论坛，但 sha1 代码不一样？

我的代码

```
$password = "thisisatestpass";
$encrypted_password=sha1($password);
echo $encrypted_password; //03d858ce5f3b29b153b0392f196cff6f6e8684d0 
```

SMF: 78481983d348ce4fbfabaccbb59af8ea95471f0c

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:49:46.773

[根据这个线程](http://www.simplemachines.org/community/index.php?topic=341776.0)，SMF 在通过 sha1 之前使用小写用户名对密码进行加盐处理。

尝试`sha1(strtolower($your_username) . $password);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T16:16:00.730

您需要找到使用的盐，然后尝试使用

```
sha1($the_salt.$password); 
```

您应该尝试使用 phpMyAdmin 在 SMF 使用的表中查找散列。而且根据我在 smf 支持论坛上看到的内容，使用与钩子的替代集成必须更加健壮（请记住以前版本中对散列所做的更改）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T15:48:55.760

据我所知，SMF 使用盐作为哈希值。因此，尝试在数据库中查找盐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-25T08:45:25.307

查看 SMF 2.0.8 的源代码（Profile-Modify.php）可以看到密码生成如下：

```
// Go then.
$passwd = sha1(strtolower($cur_profile['member_name']) . un_htmlspecialchars($_POST['passwrd1'])); 
```

请注意，您需要 SMF [un_htmlspecialchars()](http://support.simplemachines.org/function_db/index.php?action=view_function;id=601)函数才能获得 100% 正确的结果。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-08T15:49:15.460

我明白了，您不需要 SALT 来执行此操作，您只需要用户名和密码即可。

PHP 代码如下所示：

```
$username = "name";
$password = "pass";

$login = sha1($username.$password); 
```

我要求这个，我只需要一些时间来尝试很多方法，然后这个就奏效了。谢谢大家:)

# sql - 计算列可能具有不同值的行

> ID：12027782
> 
> 赞同：0
> 
> 时间：2012-08-19T15:44:55.317
> 
> 标签：sql, count, oracle11g, intersect

我有一个如下表：

```
id letter number
1       A      1
2       A      2
3       A      3
4       B      1
5       C      1
6       C      2 
```

我需要计算字母 A 有数字 1**或**2 的 id 的数量。这很简单，我明白了。但现在我需要计算 id 的字母 A 有一个数字 1**和**一个数字 2，等等。然后每个字母都一样。所以我会得到：

```
letter count
A          3
C          2 
```

我不在乎 B，因为计数是 1。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:00:14.830

使用分析函数 (PARTITION BY) 和 GROUP BY 的组合：

```
with v_data as (
select 1 id, 'A' letter, 1 num from dual union all
select 2 id, 'A' letter, 2 num from dual union all
select 3 id, 'A' letter, 3 num from dual union all
select 4 id, 'B' letter, 1 num from dual union all
select 5 id, 'C' letter, 1 num from dual union all
select 6 id, 'C' letter, 2 num from dual
)
select letter, sum(cnt1) as cnt1, sum(cnt2) as cnt2, count(*) cnt_overall from (
select v1.*, 
  sum(case when num = 1 then 1 else 0 end) over (partition by letter) as cnt1, 
  sum(case when num = 2 then 1 else 0 end) over (partition by letter) as cnt2
 from v_data v1
) 
group by letter
having sum(cnt1) > 0 and sum(cnt2) > 0 
```

解释：

*   内部查询返回所有行并计算行 id 的 1 / 2 出现次数
*   外部查询计算给定 id 的行数，并删除不具有值 1 和 2 的 id

# java - Android 应用接受本地但不接受远程 TCP 连接

> ID：12027790
> 
> 赞同：4
> 
> 时间：2012-08-19T15:46:45.330
> 
> 标签：java, android, sockets, tcp, network-programming

非常坚持这个，所以我很感激你能给的任何帮助！

我有两个程序，一个**Android 应用程序**和一个多套接字**Java 服务器**。Android 应用首先建立到服务器的出站连接（端口 21），然后接受来自服务器的入站连接（端口 1025）。为了保持一致性，我将始终将 Android 应用程序称为客户端，将 Java 应用程序称为主机，无论建立连接的方向如何。

这些**程序在本地网络上完美运行**，我的 android 手机连接到我的本地服务器 ip`192.168.1.103`或托管服务器的 PC 上的模拟器连接到`10.0.2.2`。

但是，当我移出本地 Intranet 时，我仍然可以在端口 21 上建立 android->server 连接，但**尝试从服务器连接到**端口 1025 上的电话时会超时。

我正在考虑的事情清单：

1.  Android 模拟器已重定向端口 1025
2.  Windows（Win 7 服务器主机）防火墙被禁用，其他已知防火墙被禁用
3.  传入的连接侦听器不在主线程上（SDK 2.1 所以没关系）
4.  正在转发路由器端口 21 和 1025

测试及其结果列表：

1.  从本地网络上的模拟器/android手机/远程网络上的android手机连接到服务器的公共IP（存在路由器）-**无法建立服务器->手机连接**
2.  移除路由器并从模拟器或远程安卓手机连接 -**无法建立服务器 - >手机连接**
3.  从模拟器连接到`10.0.2.2`路由器是否存在 -**成功**
4.  从本地网络上的 android 手机连接到`192.168.1.103`-**成功**

最后是一些代码，**服务器的输出连接尝试**（连接是在构造函数中创建的，因为在服务器收到入站连接时已经为该客户端创建了一个子线程）

```
OutputSocketServer(InetAddress inetAddress, int port, int count , LinkedBlockingQueue<Packet> outQueue) {
    this.outQueue = outQueue;
    SocketAddress sockaddr = new InetSocketAddress(inetAddress,port);

    try {
        outConnection = new Socket();
        System.out.println("Connecting to " + sockaddr.toString()); 
        outConnection.connect(sockaddr, timeout);
        System.out.println("Connected to port " + outConnection.getPort() + " of " +outConnection.getInetAddress().toString() + " from local port " + outConnection.getLocalPort());
        osw = new ObjectOutputStream(outConnection.getOutputStream());
    } catch (IOException e) {
        System.out.println("Output Socket Server: Could not establish outbound connection" + e.toString());
        e.printStackTrace();
    }
} 
```

以及Android客户端的连接接受代码的相关部分

```
public void run() {
try {
        System.out.println("Listening for connection on local port " + inSocket.getLocalPort());
        this.inConnection = inSocket.accept();
        System.out.println("Accepted connection on port " + inConnection.getPort() + " from ip " + inConnection.getInetAddress().toString());
        isr = new ObjectInputStream(inConnection.getInputStream());
}
catch (Exception e) {
        System.out.println("Inbound Socket Server: " + e.toString());
    }
} 
```

android 客户端的堆栈跟踪只是说`SocketTimeoutException: operation timed out`和服务器`ConnectException: connection refused: connect`。在此之前客户端的 LogCat 显示`Listening for connection on port 1025`和服务器`Connecting to /my.ip.he.re:1025`

感谢您的任何指导！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T15:59:21.727

大多数无线服务仅将不可路由的 RFC1918 地址分配给设备，并通过 NAT 路由“互联网”。这意味着您的设备可以进行出站连接 - 但您**无法**从外部（入站）连接到它。原因之一是缺乏免费的 IPv4 地址空间。

由于您的帖子提到了端口 21：如果您想要 FTP，请使用被动模式。在这种模式下，Android 设备将与服务器建立数据连接。

# java - 处理类之间的事件

> ID：12027798
> 
> 赞同：4
> 
> 时间：2012-08-19T15:47:21.053
> 
> 标签：java, swing, class, events, communication

我有一个带有 Editor 类（带有 JTextPane）和 Toolbar 类（带有 JList 和 Jbutton，我不想使用 JToolBar）的主类。这两个类由许多组件组成，我不想将它们混合到同一个类中。我希望编辑器和工具栏进行通信。假设我在工具栏中写了“Hello”，然后单击提交。我希望文本窗格显示“你好”。我以这种方式构建类：

```
public class Main{
    public MainGUI(){
        initComponents();
    }

    private void initComponents(){
        JFrame mainframe=new JFrame("Main Frame");
        Editor editor=new Editor();
        Toolbar toolbar=new Toolbar();
        mainframe.getContentPane().setLayout(new BorderLayout());
        mainframe.getContentPane().add(editor, BorderLayout.CENTER);
        mainframe.getContentPane().add(toolbar, BorderLayout.NORTH);
        mainframe.setVisible(true);
    }
}

public class Editor extends JPanel{
    public Editor(){
        super();
        initComponents();
    }

    private void initComponents(){
        JTextPane textpane=new JTextPane();

        this.setLayout(new BorderLayout());
        this.add(textpane, BorderLayout.CENTER);
    }
}

public class Toolbar extends JPanel{
    public Toolbar(){
        super();
        initComponents();
    }

    private void initComponents(){
        JTextField textfield=new JTextField();
        JButton submitbutton=new JButton("Submit");

        this.setLayout(newFlowLayout());
        this.add(textfield);
        this.add(submitbutton);
    }
} 
```

我应该如何实现工具栏和编辑器之间的事件处理？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T15:59:21.023

您可以创建一个界面`ValueSubmittedListener`

```
interface ValueSubmittedListener {
    public void onSubmitted(String value);
} 
```

并`Editor`实现它。

```
class Editor implements ValueSubmittedListener{

    ...

    public void onSubmitted(String value) {
        // add text to JTextPane.
    }
} 
```

然后有`Toolbar`提供方法

```
class Toolbar {

    private List<ValueSubmittedListener> listeners = new ArrayList<ValueSubmittedListener>();

    public void addListener(ValueSubmittedListener listener) {
        listeners.add(listener);
    }

    private void notifyListeners() {
        for (ValueSubmittedListener listener : listeners) {
            listener.onSubmitted(textfield.getText());
        }
    }

} 
```

然后每次您需要向 Editor 发送新值（即： in `submitButton`'s `ActionListener`）时，只需调用 method `notifyListeners`。

更新：

我忘了提到在`initComponents`of 中`Main`，你必须注册`Editor`到`Toolbar`：

```
private void initComponents() {
   JFrame mainframe = new JFrame("Main Frame");
   Editor editor = new Editor();
   Toolbar toolbar = new Toolbar();
   toolbar.addListener(editor); // register listener
   ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T16:07:25.847

关键原则是适当地传递引用，以便每个对象都可以访问它需要的对象。

例如，如果您的“提交”意味着将文本字段（您在工具栏中的）中的文本附加到编辑器的文本窗格，那么您可以执行以下操作：

```
public class Main{
    public MainGUI(){
        initComponents();
    }

    private void initComponents(){
        JFrame mainframe=new JFrame("Main Frame");
        Editor editor=new Editor();
        Toolbar toolbar=new Toolbar(editor);
        mainframe.getContentPane().setLayout(new BorderLayout());
        mainframe.getContentPane().add(editor, BorderLayout.CENTER);
        mainframe.getContentPane().add(toolbar, BorderLayout.NORTH);
        mainframe.setVisible(true);
    }
}

private final JTextPane textpane=new JTextPane();
public class Editor extends JPanel{
    public Editor(){
        super();
        initComponents();
    }

    private void initComponents(){
        this.setLayout(new BorderLayout());
        this.add(textpane, BorderLayout.CENTER);
    }

    public void appendText(final String text) {
        this.textpane.setText( this.textpane.getText()+text );
    }
}

public class Toolbar extends JPanel{
    private final Editor editor;
    public Toolbar(final Editor editor){
        super();
        this.editor = editor;
        initComponents();
    }

    private void initComponents(){
        final JTextField textfield=new JTextField();
        JButton submitbutton=new JButton("Submit");
        submitbutton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(final ActionEvent event) {
                editor.appendText( textfield.getText() );
            }
            });

        this.setLayout(newFlowLayout());
        this.add(textfield);
        this.add(submitbutton);
    }
} 
```

# java - hibernate支持分区吗？

> ID：12027807
> 
> 赞同：0
> 
> 时间：2012-08-19T15:48:28.087
> 
> 标签：java, hibernate

我在我的项目中使用了[Hibernate3](http://www.hibernate.org/)和 Oracle 数据库，现在我需要将我的数据库从 oracle 更改为 Microsoft SQl Server。

oracle 中有[Partition Table](http://docs.oracle.com/cd/B10501_01/server.920/a96524/c12parti.htm)，Microsoft SQl Server 中没有。有谁知道hibernate是否有对表分区的内置支持？

在hibernate中实现这样的功能似乎不是一个大问题。如果休眠中没有内置的表分区，我可以实现自己的表分区吗？——有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:50:57.977

我认为在分区成为一项功能之前完成的方式是为每个分区创建一个表，然后创建一个表示完整表的视图，购买在所有分区表之间进行联合。

在 Sql Server 中也应该是可操作的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T04:34:11.723

MSSQL 2000 不支持数据库分区。但是您可以尝试一些替代方法，例如休眠分片。请向 ibm学习[这篇文章以进行休眠分片。](http://www.ibm.com/developerworks/java/library/j-javadev2-11/)

# php - yii 用户身份错误代码

> ID：12027808
> 
> 赞同：1
> 
> 时间：2012-08-19T15:48:29.160
> 
> 标签：php, yii

```
class UserIdentity extends CUserIdentity
{
    const ERROR_USERNAME_INACTIVE=67;
    private $_id;

    public function authenticate()
    {
        $username=strtolower($this->username);
        $user=User::model()->find('LOWER(username)=?',array($username));
        if($user===null)
            $this->errorCode=self::ERROR_USERNAME_INVALID;
        else if(!$user->validatePassword($this->password))
            $this->errorCode=self::ERROR_PASSWORD_INVALID;
        else if($user->active == 0)
            $this->errorCode=self::ERROR_USERNAME_INACTIVE; 
        else
        {
            $this->_id=$user->id;
            $this->username=$user->username;
            $this->errorCode=self::ERROR_NONE;
        }
        return $this->errorCode==self::ERROR_NONE;
    }

    public function getId()
    {
        return $this->_id;
    }
} 
```

但是，在我看来，它返回不正确的用户名或密码而不是 ERROR_USERNAME_INACTIVE 消息，我应该怎么做才能纠正这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T17:33:23.903

在您的`LoginForm`模型中的 authenticate 函数中，您需要根据 error_code 添加错误。

```
public function authenticate($attribute,$params)
{
    if(!$this->hasErrors())
    {
        $this->_identity=new UserIdentity($this->email,$this->password);
        if(!$this->_identity->authenticate()) {
            if($this->_identity->errorCode === UserIdentity::ERROR_USERNAME_INACTIVE)
                $this->addError('username','My custom error');
            else
                $this->addError('password','Incorrect email or password.');
        }
    }
} 
```

# android - 是否有适用于 Android 的自定义 UI 工具包？

> ID：12027809
> 
> 赞同：3
> 
> 时间：2012-08-19T15:48:30.113
> 
> 标签：android, android-widget, twitter-bootstrap, android-ui

标准 UI 调色板的选项虽然可以，但并不是最令人兴奋的。在我开始制作一些自定义元素之前，我想知道是否存在人们知道的任何用于 Android 的 UI 工具包？或者是否有任何主题工具包（除了 Android 附带的工具包）可以让事情看起来更好或添加更多功能？

我正在寻找类似 Twitter 的 Bootstrap for Android 之类的东西。或者像 jQuery 这样让 JS 变得更好的东西。Android是否存在这样的事情或类似的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-19T17:39:05.347

是的，有很多可用的库。这里有几个：

[http://www.droidux.com/](http://www.droidux.com/)
[http://code.google.com/p/android-misc-widgets/](http://code.google.com/p/android-misc-widgets/)
[https://github.com/ragunathjawahar/simple-section-adapter](https://github.com/ragunathjawahar/simple-section-adapter)
[https://github.com /jgilfelt/android-viewbadger](https://github.com/jgilfelt/android-viewbadger)
[https://github.com/ragunathjawahar/deselectable-radio-button](https://github.com/ragunathjawahar/deselectable-radio-button)
[http://code.google.com/p/android-wheel/](http://code.google.com/p/android-wheel/)
[https://github.com/johannilsson/android-pulltorefresh](https://github.com/johannilsson/android-pulltorefresh)
[http://actionbarsherlock.com/](http://actionbarsherlock.com/)
[http://www.senab.co.uk/portfolio/pull-to-refresh-for-android/](http://www.senab.co.uk/portfolio/pull-to-refresh-for-android/)
[https://github.com/cyrilmottier/GreenDroid](https://github.com/cyrilmottier/GreenDroid)
[http://hansel-and -gretel.com/](http://hansel-and-gretel.com/)
[https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)
[https://github.com/pakerfeldt/android-viewflow](https://github.com/pakerfeldt/android-viewflow)
[http://code.google.com/p/android-coverflow/](http://code.google.com/p/android-coverflow/)

# php - AS3 -> PHP 外来字符提供不正确的信息

> ID：12027811
> 
> 赞同：0
> 
> 时间：2012-08-19T15:48:56.073
> 
> 标签：php, actionscript-3

我远非 PHP 专家，我正在努力解决我在这里遇到的问题。

我正在做的是从这个 URL 中提取核心信息：http: [//us.battle.net/wow/en/arena/kelthuzad/3v3/W%C3%BCstenfuchs%20zu%20gro%C3%9F/](http://us.battle.net/wow/en/arena/kelthuzad/3v3/W%C3%BCstenfuchs%20zu%20gro%C3%9F/)

在 AS3 中，这为我提供了来自团队名称的以下信息：

[http://us.battle.net/wow/en/arena/kelthuzad/3v3/W%C3%BCstenfuchs%20zu%20gro%C3%9F/](http://us.battle.net/wow/en/arena/kelthuzad/3v3/W%C3%BCstenfuchs%20zu%20gro%C3%9F/)

现在，这很好。如果我 decodeURI 它，它会给我：

[http://us.battle.net/wow/en/arena/kelthuzad/3v3](http://us.battle.net/wow/en/arena/kelthuzad/3v3) /Wüstenfuchs zu groß/

当我将信息从 AS3 发送到 PHP 时，我的问题就出现了。我正在使用完整的编码进行操作，但是无论我尝试什么，PHP 都会错误地读取代码。这是输出：

var9=http://us.battle.net/wow/en/arena/kelthuzad/3v3/WÃ¼stenfuchs zu groÃ/

即使我尝试对此进行解码，它也会给出完全相同的输出。如果我将它从 AS3 发送到已经解码的 PHP，它再次给出与上面相同的结果。

我的 AS3 代码是：

```
var phpVars:URLVariables = new URLVariables();            

phpVars.team = _team;

urlRequest.method = URLRequestMethod.POST;
urlRequest.data = phpVars;

urlLoader.dataFormat = URLLoaderDataFormat.VARIABLES;
urlLoader.addEventListener(Event.COMPLETE, returnResult);
urlLoader.load(urlRequest); 
```

我的 PHP 代码是：

```
header("Content-type: text/html; charset=utf-8");
    function updateData(){    
         $team2 = mysql_real_escape_string($_POST['team']);
         echo("var9=".$team2);
         $sql = "INSERT INTO title_test SET field1='$team2'";
         mysql_query($sql);
     } 
```

这将放入数据库：

```
http://us.battle.net/wow/en/arena/kelthuzad/3v3/WÃ¼stenfuchs zu groÃŸ/ 
```

还值得注意的是，我正在尝试使用 PHP 中的 $team2 数据进行查询，该数据也失败了，因为它没有正确编码。

我在这里缺少什么步骤？

编辑：在数据库上启用了 utf-8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:06:45.747

根据[http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html)添加

```
mysql_query('SET NAMES UTF8'); 
```

就在之前

```
mysql_query($sql); 
```

如果这不起作用，请确保将 UTF8 发送到服务器：

```
echo 'team2=', bin2hex($team2); 
```

你应该看到

```
team2=57c3bc7374656e6675636873207a752067726fc39f 
```

如果您发送的是 UTF8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:04:34.277

好的，在经历了很多心痛和头痛之后，我现在已经开始工作了……但是使它工作的方法似乎很奇怪，而且不是最佳实践。

AS3 现在是：

```
var phpVars:URLVariables = new URLVariables();            

phpVars.team = decodeURI(_team);

urlRequest.method = URLRequestMethod.POST;
urlRequest.data = phpVars;

urlLoader.dataFormat = URLLoaderDataFormat.VARIABLES;
urlLoader.addEventListener(Event.COMPLETE, returnResult);
urlLoader.load(urlRequest); 
```

PHP 现在是：

```
$team2 = ($_POST['team']);
echo("var9=".$team2);
$sql = "INSERT INTO title_test SET field1='$team2'";
mysql_query($sql); 
```

Connect.php 现在是

```
mysql_connect($db_host, $db_username, $db_password, $db_name);

mysql_query('SET NAMES utf8'); 

mysql_select_db($db_name) or die (mysql_error()); 
```

这现在可以正确地将信息返回到数据库并允许 URL 查询工作。但是，回显到 Flash 中的回显信息仍然显示不正确。

我将保持打开状态，因为我确定这种方法是不正确的。我几乎可以肯定，您应该将其从 AS3 中编码出来并在 PHP 中取消编码。

# python - 运行 python 代码的 Web 服务器

> ID：12027815
> 
> 赞同：0
> 
> 时间：2012-08-19T15:49:38.647
> 
> 标签：python, webserver, hosting

如果我的问题太初级，我很抱歉。我有一些 python 代码，它使用“twisted”库使机器充当透明代理服务器。基本上我想要我自己的透明代理在我的内部网络之外，因为我希望能够监控流量，所以我需要有自己的服务器。所以我需要一台可以 24/7 运行我的脚本并监听 http 连接的机器。我需要什么样的服务器/主机？任何主机提供商的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:56:51.113

python有很多专门的商业主机。[Python 在其wiki](http://wiki.python.org/moin/SpecializedCommercialHosts)上维护了它们的列表。有些甚至有可用的扭曲框架。另一种选择是获取虚拟专用服务器并安装您需要的所有专用库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T16:01:31.423

选择 Amazon Ec2 实例，Ubantu 服务器。如果您的进程消耗的内存不多，您可以使用第一年免费的 Micro instance（617 Mb ram，8 Gb HD）。或者您可以使用小型实例（1.7 GB 内存和 8Gb HD），这可能会花费您更多。

要将 python 代码设置为 24/7 运行，您可以在实例中创建一个守护进程。您也可以将扭曲库/任何其他库放入其中。如果您使用过 Amazon AWS，应该不会花费太多时间。

# android - Android地图setZoom(19)

> ID：12027829
> 
> 赞同：0
> 
> 时间：2012-08-19T15:51:40.943
> 
> 标签：android, google-maps

我`ItemizedOverlay`在地图中显示并居中显示了一个标记，目前我调用`setZoom(19)`.

但是如何控制缩放级别？即我想尽可能详细地放大，但仍以卫星模式清晰显示地图。

我注意到，如果你放大到远处，一切都会变黑。如何在不走远的情况下放大到最详细的级别？

任何帮助最受赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:14:20.613

解决方案是：查看 api v2 参考中的 UiSettings，有“setMaxZoomLevel”和“setMinZoomLevel”。将最大缩放级别设置为不显示黑屏的级别（进行一些测试），然后调用 setZoom(mapview.getMaxZoomLevel());

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:26:36.113

只需使用

```
setZoom(mapview.getMaxZoomLevel()); 
```

[https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapView](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapView)

# android - 获取Android设备/模拟器根目录

> ID：12027830
> 
> 赞同：2
> 
> 时间：2012-08-19T15:52:05.527
> 
> 标签：android, android-emulator

我正在使用 Eclipse/Ubuntu 开发一个 Android 应用程序。像往常一样，我在 AVD 模拟器上进行了第一次拍摄。我想建立一个独特的文件夹结构，我可以在当前模拟器和最终物理设备（SD 存储卡）上使用它。对于虚拟和物理设备类型，通过程序（当然是 Java）获取根目录的 Android 环境变量是什么，以便我可以有我的起始参考？谢谢 PS：我打开了 DDMS 文件资源管理器，以防答案是指那里的结构

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:03:53.227

您可以看到[http://developer.android.com/reference/android/os/Environment.html](http://developer.android.com/reference/android/os/Environment.html)`getExternalStorageDirectory()`使用方法获取“相同”目录

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-09T09:44:58.857

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

如果要在存储中写入，则需要用户权限

```
File root = Environment.getExternalStorageDirectory(); 
```

这将创建您的根目录的实例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-19T17:20:44.910

`Environment.getExternalStorageDirectory()`已**弃用**，应改为使用 Context#getExternalFilesDir(String)、MediaStore 或 Intent#ACTION_OPEN_DOCUMENT。

> 此方法在 API 级别 29 中已弃用。为了提高用户隐私，不建议直接访问共享/外部存储设备。当应用程序以 Build.VERSION_CODES.Q 为目标时，从此方法返回的路径不再可供应用程序直接访问。通过迁移到 Context#getExternalFilesDir(String)、MediaStore 或 Intent#ACTION_OPEN_DOCUMENT 等替代方案，应用程序可以继续访问存储在共享/外部存储上的内容。

[https://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory()](https://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory())

# css - 在悬停时添加 CSS 菜单下拉菜单时，它会在模板上腾出很多可用空间

> ID：12027831
> 
> 赞同：0
> 
> 时间：2012-08-19T15:52:14.073
> 
> 标签：css, drop-down-menu

当尝试在悬停“下拉菜单”上的菜单上添加一个包含内容的框时，它会执行以下操作：

[![](../Images/e9f550a1cd70d7a941b9cfdb68a018a8.png)](https://i.stack.imgur.com/ZT6st.png)
[（来源：[gyazo.com](http://gyazo.com/9d055e63b06c6770cca6382fda7e5d34.png)）]

当我将鼠标悬停在类别菜单项上时，我希望下拉菜单弹出。

这是我用于它的代码：

```
 <div class="secondheader">

      <div class="container">

               <div class="span12">

                          <ul class="nav6">

                          <li><a href="#">Home</a></li>

                          <li class="dropdown1"><a href="#">Categories</a> </li>

                          <li><a href="#">Buy</a></li>

                          <li><a href="#">Sell</a></li>

                          <li><a href="#">Forums</a></li>

                          <li><a href="#">Contact</a></li>

                          <li><a href="#">item 1</a></li>

                          <li><a href="#">Forums</a></li>

                          <li><a href="#">Contact</a></li>

                          <li><a href="#">item 1</a></li>

                          </ul>

                          </div>

               </div>

       </div>

</div> 
```

CSS：

```
.secondheader {
background-image: url("../img/second.png");
width: 100%;
height: 66px;
border-bottom: solid 6px #f0e8ce;
}    

.nav6  {
list-style: none;
font-family: 'Dosis', sans-serif;
float: left
font-size: 20px;
margin-top: 13px;
margin-left: -35px;
}

.nav6  li {
display: inline;
margin: 0px;
font-size: 18px;
font-family: 'Dosis', sans-serif;
float: left;
margin-top: 10px;
}

.nav6 a {
color: #7d7253;
padding-top: 20px;
padding-bottom: 20px;
padding-left: 20px;
padding-right: 20px;
}

.nav6 a:hover {
background-image: url("../img/hoverbg.png");
color: #53410f;
text-decoration: none;
} 
```

我尝试过使用教程，但我真的不明白如何为我的布局制作相同的东西，我的意思是它有不同的方式和类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:08:09.970

你想要类似[http://jsfiddle.net/b76Qc/](http://jsfiddle.net/b76Qc/)的东西吗？

**编辑：**

在您的情况下，子菜单是水平的，因为您使用后代选择器而不是子选择器：

替换`.nav6 li`为`.nav6>li`和`.nav6 li ul`_`.nav6>li>ul`

如果您想要完整的代码，请参阅我的 jsfiddle。

**编辑2：**

如果你想让每个元素有不同的背景，

```
<li class="dropdown1"><a href="#">Categories</a>
    <ul>
        <li style="background:red"><a href="#">Buy</a></li>
        <li style="background:blue"><a href="#">Sell</a></li>
        <li style="background:green"><a href="#">Forums</a></li>
        ...
    </ul>
</li> 
```

但是您可以提供指向您网站的链接而不是图片吗？[http://gyazo.com/35835f003d0d8b776248196632cc1d4a.png](http://gyazo.com/35835f003d0d8b776248196632cc1d4a.png)中显示的正方形很奇怪，但我不知道仅使用图像会发生什么......

**编辑3：**

你必须改变

```
.nav6 a {
    color: #7D7253;
    padding: 20px;
} 
```

进入

```
.nav6>li>a {
    padding: 20px;
}
.nav6 a {
    color: #7D7253;
} 
```

和

```
.nav6 a:hover {
    background-image: url("../img/hoverbg.png");
    color: #53410F;
    text-decoration: none;
} 
```

进入

```
.nav6 a:hover {
    color: #53410F;
    text-decoration: none;
}
.nav6 > li > a:hover {
    background-image: url("../img/hoverbg.png");
} 
```

**编辑4：**

抱歉，我没有解释为什么我要告诉你使用选择器和`>`，我以为你知道。

你的html是这样的：

```
<ul class="nav6">
    <li><a href="#">Home</a></li>
    <li class="dropdown1"><a href="#">Categories</a>
        <ul>
            <li><a href="#">Buy</a></li>
            <li><a href="#">Sell</a></li>
            <li><a href="#">Forums</a></li>
            <li><a href="#">Contact</a></li>
            <li><a href="#">item 1</a></li>
            <li><a href="#">Forums</a></li>
            <li><a href="#">Contact</a></li>
            <li><a href="#">item 1</a></li>
        </ul>
    </li>
</ul> 
```

如果使用`.nav6 a`，样式会应用到所有`<a>`里面`.nav6`。那是一个**后代选择器**。

然后，这将应用于菜单的链接和子菜单的链接：

`<ul class="nav6">`

`<li>`**`<a href="#">Home</a>`**`</li>`

`<li class="dropdown1">`**`<a href="#">Categories</a>`**

`<ul>`

`<li>`**`<a href="#">Buy</a>`**`</li>`

`<li>`**`<a href="#">Sell</a>`**`</li>`

`...`

`</ul>`

`</li>`

`</ul>`

但是，如果您使用类似的**子选择器**，`.nav6>li>a`则该样式仅适用于作为`<li>`a 的子级`.nav6`的链接（仅菜单的链接）。通过这种方式，我们可以设置要应用于所有链接的样式以及菜单链接的样式：

`<ul class="nav6">`

`<li>`**`<a href="#">Home</a>`**`</li>`

`<li class="dropdown1">`**`<a href="#">Categories</a>`**

`<ul>`

`<li><a href="#">Buy</a></li>`

`<li><a href="#">Sell</a></li>`

`...`

`</ul>`

`</li>`

`</ul>`

**编辑5：**

要解决背景问题，

改变

```
.nav6 a:hover {
    color: #53410F;
    text-decoration: none;
} 
```

到

```
.nav6>li:hover>a, .nav6 .dropdown1 li:hover>a {
    color: #53410F;
    text-decoration: none;
} 
```

和

```
.nav6 > li > a:hover
    background-image: url("../img/hoverbg.png");
} 
```

到

```
.nav6>li:hover>a {
    background-image: url("../img/hoverbg.png");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:27:04.243

为了向您展示完成这项工作实际上需要多少代码，我在这里设置了一个小示例：http: [//jsfiddle.net/fS5WV/](http://jsfiddle.net/fS5WV/)

我把解释放在css中。

关键在于正确嵌套菜单，并给子菜单一个绝对位置，以防止它们将内容向下推。

我希望这是有道理的。如果您需要进一步的解释，请随时询问。

# php - mysql_fetch_array() 处的 MySql 错误：

> ID：12027837
> 
> 赞同：0
> 
> 时间：2012-08-19T15:52:51.483
> 
> 标签：php, mysql

我正在 FB 上收集数据并将其发送到我的数据库。我的应用程序正在运行，我可以看到数据已插入到我的数据库中，但我收到了一个我不知道如何解决的错误。我对此进行了研究并尝试了一些没有结果的解决方案。我添加了一行代码来查看错误是什么。请指导我解决它。谢谢

错误：

```
 Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource
 Unknown column 'id' in 'where clause' 
```

错误将我指向这一行：

```
 $result = mysql_fetch_array($query) or die ( mysql_error () ); 
```

这是我的代码：

```
<?php
define('db_user','xxx');
define('db_password','xxx');
define('db_host','xxx.xxx.com');
define('db_name','xxx');

// Connect to MySQL
 $dbc = @mysql_connect (db_host, db_user, db_password) OR die ('Could not connect to      MySQL: ' . mysql_error() );
// Select the correct database
mysql_select_db (db_name) OR die ('Could not select the database: ' . mysql_error() );
mysql_set_charset('utf8',$dbc);

require 'src/facebook.php';

// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(array(
'appId'  => 'xxxx',
'secret' => 'xxxx',
  'cookie' => true));

// Get User ID
 $user = $facebook->getUser();

// We may or may not have this data based on whether the user is logged in.
//
// If we have a $user id here, it means we know the user is logged into
// Facebook, but we don't know if the access token is valid. An access
// token is invalid if the user logged out of Facebook.

if ($user) {
try {
// Proceed knowing you have a logged in user who's authenticated.
$fbuid = $facebook->getUser();
 $user_profile = $facebook->api('/me');

   } catch (FacebookApiException $e) {
   error_log($e);
   $user = null;
   }
     }else{
   header('Location: index.php');

    }

      $query = mysql_query("SELECT * FROM users WHERE oauth_provider = 'facebook' AND     oauth_uid = ". $user_profile['id']);  
      $result = mysql_fetch_array($query);  

    if(empty($result)){ 
      $query = mysql_query("INSERT INTO users (oauth_provider, oauth_uid, username, first_name, last_name, birthday, email, pic_square ) VALUES    ('facebook', {$user_profile['id']}, '{$user_profile['name']}', '{$user_profile['first_name']}','{$user_profile['last_name']}','{$user_profile['birthday']}','{$user_profile['email']}', '{$user_profile['pic_square']}')");  
  $query = mysql_query("SELECT * FROM users WHERE id = " . mysql_insert_id());  
  $result = mysql_fetch_array($query) or die ( mysql_error () );  

 }  

   // Login or logout url will be needed depending on current user state.
    if ($user) {
     $paramsout = array('next'=>'http://www.mywebsite.com/test/logout.php');
     $logoutUrl = $facebook->getLogoutUrl($paramsout);
     }
     ?>
     <html><body>welcome</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:58:54.250

我相信失败的查询是这个：

```
$query = mysql_query("SELECT * FROM users WHERE id = " . mysql_insert_id()); 
```

如错误消息所述，该表`users`不包含名为`id`.

检查数据库中的字段名称，更新查询，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:05:26.493

> 'where 子句'中的未知列'id'

您实际上有一个名为 id 的列吗？检查以确保这确实是您为该列命名的内容。

如果您没有名为 id 的列，则可以使用以下命令添加：

```
ALTER TABLE `users` ADD `id` INT( 11 ) NOT NULL AUTO_INCREMENT FIRST 
```

使用 AUTO_INCREMENT 列 'id' 将自动为您插入数据库的每一行分配一个新的 id 号，并且您在此处提供的代码将起作用。

# rule-engine - 具有 UI 支持的动态规则引擎

> ID：12027845
> 
> 赞同：2
> 
> 时间：2012-08-19T15:53:46.553
> 
> 标签：rule-engine

我想了解具有动态规则的规则引擎。就像我有多个消费者，我需要根据这些客户设定的规则以不同的价格销售他们的产品。我想允许客户使用 UI 设置规则并将规则存储在数据库中。

# java - onStop() 方法出现空指针异常

> ID：12027846
> 
> 赞同：2
> 
> 时间：2012-08-19T15:53:52.613
> 
> 标签：java, android, timer, nullpointerexception

我在类似的时钟应用程序中使用了这个示例代码：http: [//about-android.blogspot.in/2010/04/create-apps-to-show-digital-time-in_19.html](http://about-android.blogspot.in/2010/04/create-apps-to-show-digital-time-in_19.html)

它工作正常，但是当使用后退或主页按钮时，我在日志中得到一个空指针异常。它说无法停止应用程序。如果我删除方法：

`timer.cancel();
timer.purge();
timer = null;`

它工作正常，但我想这会消耗内存？/米

> 08-19 19:00:13.438: E/AndroidRuntime(1064): 致命异常: main
> 08-19 19:00:13.438: E/AndroidRuntime(1064): java.lang.RuntimeException: 无法停止活动 {se.macke .binarycounter/se.macke.binarycounter.MainActivity}：java.lang.NullPointerException
> 08-19 19:00:13.438：E/AndroidRuntime(1064)：在 android.app.ActivityThread.performDestroyActivity(ActivityThread.java:2624)
> 08- 19 19:00:13.438: E/AndroidRuntime(1064): 在 android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:2690)
> 08-19 19:00:13.438: E/AndroidRuntime(1064): 在 android.app。 ActivityThread.access$2100(ActivityThread.java:117)
> 08-19 19:00:13.438: E/AndroidRuntime(1064): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:964)
> 08-19 19:00:13.438: E/AndroidRuntime(1064): 在 android.os.Handler.dispatchMessage(Handler.java:99)
> 08-19 19:00:13.438: E/AndroidRuntime(1064): 在 android. os.Looper.loop(Looper.java:123)
> 08-19 19:00:13.438: E/AndroidRuntime(1064): 在 android.app.ActivityThread.main(ActivityThread.java:3683)
> 08-19 19:00: 13.438: E/AndroidRuntime(1064): 在 java.lang.reflect.Method.invokeNative(Native Method)
> 08-19 19:00:13.438: E/AndroidRuntime(1064): 在 java.lang.reflect.Method.invoke( Method.java:507)
> 08-19 19:00:13.438: E/AndroidRuntime(1064): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
> 08-19 19:00: 13.438: E/AndroidRuntime(1064): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
> 08-19 19:00:13.438: E/AndroidRuntime(1064): at dalvik.system.NativeStart.main(Native Method)
> 08-19 19:00:13.438: E/AndroidRuntime(1064): Caused by: java.lang .NullPointerException 08-19 19:00:13.438: E/AndroidRuntime(1064): 在 se.macke.binarycounter.MainActivity.onStop(MainActivity.java:209)
> 08-19 19:00:13.438: E/AndroidRuntime(1064) : 在 android.app.Instrumentation.callActivityOnStop(Instrumentation.java:1170)
> 08-19 19:00:13.438: E/AndroidRuntime(1064): 在 android.app.Activity.performStop(Activity.java:3873)
> 08-19 19:00:13.438: E/AndroidRuntime(1064): 在 android.app.ActivityThread.performDestroyActivity(ActivityThread.java:2619)
> 08-19 19:00:13.438: E/AndroidRuntime(1064): ... 还有 11 个
> 08-19 19:00:16.398: I/Process(1064): 发送信号。PID: 1064 SIG: 9 08-19 19:00:16.450: I/ActivityManager(61): 进程 se.macke.binarycounter (pid 1064) 已经死亡。08-19 19:00:16.450: E/InputDispatcher(61): channel '4079da00 se.macke.binarycounter/se.macke.binarycounter.MainActivity (server)' ~ 消费者关闭输入通道或发生错误。events=0x8
> 08-19 19:00:16.450: E/InputDispatcher(61): channel '4079da00 se.macke.binarycounter/se.macke.binarycounter.MainActivity (server)' ~ Channel 已不可恢复地损坏，将被处理！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T15:58:42.417

an的[可见生命周期](http://developer.android.com/reference/android/app/Activity.html)`Activity`介于`onStart()`和之间`onStop()`。通过将计时器设置为`null`然后使用后退按钮或主页按钮并再次访问应用程序并不能确保`Activity`已终止，它根本不再可见。所以你最终访问了指向的东西，`null`因此`NPE`.

# php - AES 在 PHP 中使用 OpenSSL 加密/在 Node.js 中解密

> ID：12027847
> 
> 赞同：5
> 
> 时间：2012-08-19T15:54:26.210
> 
> 标签：php, node.js, php-openssl

我正在使用 PHP 和 Nodejs 使用 OpenSSL 进行对称加密。PHP 使用 OpenSSL 库，Node.js 解密基于实现的加密。问题是 Node.js 中的解密文本只是**部分正确**。

### 用于加密的 PHP 函数

```
function encrypt($text, $pw, $base64 = true) {

    $method = 'aes-256-cbc';
    $iv_len = openssl_cipher_iv_length($method);
    $iv = openssl_random_pseudo_bytes($iv_len);

    $pw = substr(md5($pw),0,32);

    $cipher =  openssl_encrypt ($text ,$method ,$pw ,!$base64 ,$iv );

    if($base64) {
            $pw = base64_encode($pw);
            $iv = base64_encode($iv);
        }

    return array(
        'iv' => $iv,
        'pw' => $pw,
        'text' => $text,
        'cipher' => $cipher
    );
} 
```

### nodejs中的解密

```
var cipher = new Buffer(data.cipher, 'base64');
var iv = new Buffer(data.iv, 'base64');
// the password is the same returned by the php function, so 100% correct
var key = new Buffer(data.pw, 'base64');

var dec = crypto.createDecipheriv('aes-256-cbc',key,iv);
var dec_data = dec.update(cipher,'binary','utf8');

// the script is based on socket.io 
socket.emit('debug',{decrypted : dec_data}); 
```

### 结果

```
# Encrypting in php...
>> encrypt('1\. Lorem ipsum dolor sit amet! 2\. Lorem ipsum dolor sit amet!', 'password');

# ...makes nodejs giving me something like
>> 1, 6+r@o ipsum /olor sit amet! 2\. Lorem ipsum do 
```

我猜这个问题可能与填充有关 - 但老实说：我不知道。

感谢您阅读帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-27T22:56:31.923

在您的节点代码中，您缺少消息的*最后*一部分：

```
var dec = crypto.createDecipheriv('aes-256-cbc',key,iv);
var dec_data = dec.update(cipher,'base64','utf8') + dec.final('utf8'); 
```

此外，使用*base64*进行解码，而不是二进制（因为您可能会陷入此处提到的场景[https://stackoverflow.com/a/8770975/3739618](https://stackoverflow.com/a/8770975/3739618)）

我在其他帖子中有此示例代码，请查看： [https ://stackoverflow.com/a/28181444/3739618](https://stackoverflow.com/a/28181444/3739618)

问候， 伊格纳西奥

# caching - 如何从固定（锁定页面）RAM 中读取，而不是从 CPU 缓存中读取（使用 DMA 零拷贝和 GPU）？

> ID：12027849
> 
> 赞同：0
> 
> 时间：2012-08-19T15:55:07.753
> 
> 标签：caching, synchronization, cuda, gpgpu, dma

如果我在 CUDA C++ 上将 DMA 用于 RAM <-> GPU，我如何确定内存将从固定（锁定页面）RAM 中读取，而不是从 CPU 缓存中读取？

毕竟，使用 DMA，CPU 对有人更改内存以及需要同步 CPU（缓存<->RAM）这一事实一无所知。据我所知，来自 C++11 的 std :: memory_barier () 对 DMA 没有帮助，也不会从 RAM 中读取，而只会导致缓存 L1/L2/L3 之间的一致性。此外，一般来说，CPU上的缓存和RAM之间没有解决冲突的协议，而只是在NUMA中同步不同级别的CPU缓存L1/L2/L3和多CPU的协议：MOESI / MESIF

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T17:19:57.663

在 x86 上，CPU 会监听总线流量，所以这不是问题。在 Sandy Bridge 类 CPU 上，PCI Express 总线控制器集成到 CPU 中，因此 CPU 实际上可以从其 L3 缓存中为 GPU 读取提供服务，或者根据 GPU 的写入更新其缓存。

# android - 具有海量数据的 Android 应用程序的最佳数据库设计选项

> ID：12027852
> 
> 赞同：19
> 
> 时间：2012-08-19T15:56:34.073
> 
> 标签：android, database

我是 Android 应用程序开发的新手，也是 stackoverflow 的新成员。我目前正在尝试设计一个食谱应用程序。我已经决定了应用程序的功能及其涵盖的范围。就涵盖来自世界各地的所有食谱而言，范围对我来说非常广泛。在这个过程中我要处理很多数据。

我目前正在尝试寻找一种在我的应用程序中处理数据的好方法。到目前为止，根据我在不同论坛上阅读的内容，我相信在数据库选择方面我有两个选择：1）SQLite 2）远程服务器上的数据库（MySql/Postgre）

以下是我在两者之间做出决定时的一些想法：

1) SQLite：这可能是一个不错的选择，但会很慢，因为它需要访问文件系统。我可以通过在 AsyncTask 中执行数据库数据获取任务来消除缓慢。但是，不同手机上的存储可能会受到限制。此外，我相信与使用远程数据库相比，使用 SQLite 会更容易。

2）远程数据库：我在这里看到的问题是多个数据库请求同时出现的速度很慢。我可以在这里以某种方式使用线程来对多个请求进行排队并一一处理吗？有没有一种有效的方法来做到这一点。

一旦我从上述数据库中提取数据，我还有一个关于数据格式的问题。有没有办法可以保留我的数据格式？

如果有人可以分享他们对上述情况的知识渊博和专家评论，我将不胜感激。这对我来说也不是功课，我也不是在寻找任何现成的代码解决方案。我只是在寻找可以帮助我理清思路并帮助我做出决定的提示/建议。我一直在寻找这个一段时间，但无法找到具体信息。我希望我能从可能遇到过类似情况的有经验的人那里得到一些好的建议。

感谢您阅读这篇长文。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-19T17:35:12.480

将这两种方法结合起来怎么样？

*   具有最近最少使用收据的本地 SQLite 数据库，因此您不需要一直使用网络。网络比访问文件系统慢得多。

*   一些远程数据库通过一些 HTTP 接口访问，您可以在其中读取/写入整个数据库。如果您希望用户能够添加收据以供其他用户查看，则无论如何您都需要一个外部数据库。

> SQLite：这可能是一个不错的选择，但会很慢，因为它需要访问文件系统。

访问本地数据库非常快，如果只是对小型数据库的简单只读查询，则需要 5 毫秒左右。

> 但是，不同手机上的存储可能会受到限制

取决于您对大型数据库的定义。如果它只有 2MB 就可以存储大量纯文本收据。

> 此外，我相信与使用远程数据库相比，使用 SQLite 会更容易。

是的，Android 有一个很好的内置 SQLite API，但没有远程数据库 API。而且您不需要设置数据库服务器和接口。

> 我在这里看到的问题是多个数据库请求同时出现的速度很慢。

一个体面的数据库服务器可以处理数千个请求。取决于您的服务器硬件和软件。[https://dba.stackexchange.com/](https://dba.stackexchange.com/)应该有更多信息。所需的性能取决于您拥有/期望的用户数量。

我建议为您的数据库提供一个简单的 REST 接口，因为它非常轻量级，但不会将您的数据库直接暴露给网络。有大量关于创建此类数据库接口的[教程](https://stackoverflow.com/questions/4771485/exposing-mysql-database-table-using-rest)和[书籍。](http://www.amazon.com/s/?field-keywords=RESTful)甚至还有像[nextDb](http://nextdb.net/index.html)这样的托管数据库服务可以为您完成大部分工作。

> 有没有办法可以保留我的数据格式？

您可以将 HTML 格式的数据存储在您的数据库中并以 a[`WebView`](http://developer.android.com/reference/android/webkit/WebView.html)或 a `TextView`(via [`Html#fromHtml()`](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)) 显示它——两者都可以显示格式化的文本。

数据库不关心您存储的文本类型，为了通过 Internet 传输，您可能需要对文本进行编码，使其不会干扰传输格式（XML、JSON 等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T17:44:00.633

A simple way is to integrate [Parse](http://parse.com) into your app. They have a nice framework that easily integrates into iOS and Android. Their plan is freemium, so you'll be able to use up to 1 million API request for no charge, and then its 7 cents for every request after that.

You'll have 1gb to store all your data sets / images, etc.

I don't use parse for everything, but I HIGHLY recommended it for large data schemes because they do all the scaling for you. Check out the [API](https://parse.com/docs/android/api/?com/parse/ParseObject.html), I think it would be worth your time.

I just started to work on a few of my own projects, and I'm using Parse again. I have to say it's improved a lot over the last 6-8 months. Especially with the Twitter and Facebook integration.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T16:42:33.970

这完全取决于您的软件要求。如果您需要处理少量数据，那么您可以选择 SQLite，但对于大量数据，最好使用远程数据库。

**SQLite：**它在少量数据的情况下运行良好，我体验到它的响应时间很好。

**远程数据库：**我认为您可以使用小型服务器端应用程序将数据提交到您的客户端应用程序。它将解决/减少与线程相关的问题/复杂性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T16:08:10.997

这里的关键问题是数据的大小 - 任何重要的食谱数据库都太大而无法存储在手机上恕我直言，因此您似乎坚持使用远程数据库解决方案。

与尝试从 android 访问远程数据库相反，我建议您在 Web 应用程序之间使用 aa go，它将处理来自应用程序的请求并返回您需要的 JSON 对象。

# java - JSP - 连接和插入数据到 MySQL 数据库

> ID：12027853
> 
> 赞同：0
> 
> 时间：2012-08-19T15:56:45.647
> 
> 标签：java, mysql, jsp, servlets, netbeans

对，这是我的情况，我在页面 (index.jsp) 上有一个表单，它将数据提交到 JSP 页面 (output.jsp)，然后它将处理数据并输出结果。我想将结果插入 MySQL 数据库。

我曾尝试在 JSP 中直接使用 MySQL 做一些事情，但我相信我被建议不要这样做，因为它会打开安全漏洞。

因此，我创建了一个 SubmitServlet.java（默认情况下，Netbeans 已将其放入 Source Packages/default 包中，而不是 JSP 文件的位置，在网页中）。我知道我必须在这里做很多连接，尽管我不完全确定如何将提交到数据库的数据从 JSP 获取到 servlet。我需要做什么？

我在 RoseIndia 阅读了几篇教程，但它们只是让我对实际需要什么感到更加困惑，因此任何帮助都会非常有用！

PS：还值得指出的是，我对 Java Web 应用程序完全陌生，所以你越把我当成一个完全的白痴，越好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:00:50.367

玫瑰印度不是一个学习的好地方。

不，您需要一个或两个中间 servlet。

将问题分成几块：模式、CRUD 操作、中间层模型、服务、将 HTTP 请求编组为对象并返回、HTML、CSS 和 JavaScript。不要试图一次完成所有的事情。从一个单一的垂直开始并使其工作，然后移动到下一个。

分解是计算机科学和问题解决的标志。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-07T13:06:17.450

从 output.jsp 调用所需的方法，它将数据插入数据库

```
<%
<jsp:useBean id="obj" class="yourPackage.className" />
String Success="";
Success=sobj.myRequiredMethod("this is my result");
%> 
```

在 yourPackage.className 类中你应该有 myRequiredMethod()

```
package yourPackage;
import java.sql.*;
import java.util.*;

public class className
    {
    String mySqlPassword="root";
    String mySqlUsername="root";
    String mySqlDatabase="jdbc:mysql://localhost:3306/yourDatabse";

ResultSet res;

    public String myRequiredMethod(String result)
        {

        String success="";
        try
            {

            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection(mySqlDatabase,mySqlUsername,mySqlPassword);

                String q="insert into myTable (resultColumn) values('" + result + "')";
            System.out.println(q);
            PreparedStatement stmt = con.prepareStatement(q);
            int pos = stmt.executeUpdate();
            System.out.println(pos);
        if(pos==1)
                {
                    success="Successfull";
                }
            } 

        catch(Exception e)
            {
        }

        return success;

        }
} 
```

# php - php需要更改字符串中子字符串的第二次出现

> ID：12027854
> 
> 赞同：0
> 
> 时间：2012-08-19T15:56:47.267
> 
> 标签：php

有没有办法在字符串中找到子字符串的所有实例。这是我到目前为止所拥有的，但似乎当我搜索“ed”子字符串时，它会在找到第一个子字符串时停止查找。因此，当我尝试改变结尾时，“对冲”这个词不受影响。

```
<?php

$wordList2 = array('kissed','hoped','learned','wanted','sounded', 'hedged');

for ($i = 0; $i<sizeof($wordList2);$i++){
    $wrongAnswers2[$wordList2[$i]] = array();
}

for ($i = 0; $i < sizeof($wordList2); $i++){

    if(strpos($wordList2[$i], 'ed')===(strlen($wordList2[$i])-2)) {

    $pos = strpos($wordList2[$i], 'ed');
    if(
    substr($wordList2[$i], -3, 1) ==='p' || 
    substr($wordList2[$i], -3, 1) ==='f' ||
    substr($wordList2[$i], -3, 1) ==='s' ||
    substr($wordList2[$i], -3, 1) ==='k' ||
    substr($wordList2[$i], -3, 1) ==='h' 
    ){
        $replacement = substr_replace($wordList2[$i], 't', $pos,2);
        array_push($wrongAnswers2[$wordList2[$i]],$replacement);
    } else if   
    (
    substr($wordList2[$i], -3, 1) ==='b' || 
    substr($wordList2[$i], -3, 1) ==='v' ||
    substr($wordList2[$i], -3, 1) ==='z' ||
    substr($wordList2[$i], -3, 1) ==='g' ||
    substr($wordList2[$i], -3, 1) ==='n' 
    ){
        $replacement = substr_replace($wordList2[$i], 'd', $pos,2);
        array_push($wrongAnswers2[$wordList2[$i]],$replacement);
    } else if   
    (
    substr($wordList2[$i], -3, 1) ==='d' || 
    substr($wordList2[$i], -3, 1) ==='t' 
    ){
        $replacement = substr_replace($wordList2[$i], 'id', $pos);
        array_push($wrongAnswers2[$wordList2[$i]],$replacement);
    }

} 
}
?> 
```

这是我得到的输出。我基本上想要一种让程序改变“对冲”结尾的方法。谢谢。

```
 Array
(
[kissed] => Array
    (
        [0] => kisst
    )

[hoped] => Array
    (
        [0] => hopt
    )

[learned] => Array
    (
        [0] => learnd
    )

[wanted] => Array
    (
        [0] => wantid
    )

[sounded] => Array
    (
        [0] => soundid
    )

[hedged] => Array
    (
    ) 
```

)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:01:04.207

对于您的特定要求，您可以使用 strrpos 而不是 strpos - 它是同一件事，除了它找到子字符串的最后一次出现而不是第一次出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:18:24.947

我只是更改了打开 IF 条件并调整了 $pos 变量：

```
if((strlen($wordList2[$i]) - strrpos($wordList2[$i], 'ed'))===2) {

    $pos = strrpos($wordList2[$i], 'ed');

...etc. 
```

现在工作得更好了，谢谢 moopet。

# ruby-on-rails - 找不到回形针照片时，由于 nil 方法，默认不显示

> ID：12027856
> 
> 赞同：0
> 
> 时间：2012-08-19T15:56:53.497
> 
> 标签：ruby-on-rails

```
class Photo < ActiveRecord::Base
  belongs_to :attachable, :polymorphic => true, :counter_cache => true

  has_attached_file :data,
    :styles => {
      :ppc_full => "500x375>", 
      :ppc_preview => "250x250", 
      :ppc_thumb => "76x76#",
      :default_url => "shop/:style.jpg"
    }
end

class Shop < ActiveRecord::Base
  has_many :photos, :as => :attachable, :dependent => :destroy
end 
```

当我这样做时，我希望在没有关联照片时返回默认照片：

```
image_tag(@shop.photos.last.data.url(:ppc_preview)) 
```

但它给了我这个错误：

```
undefined method `data' for nil:NilClass 
```

我有其他人工作正常，但不是这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:01:36.240

您可以使用视图助手解决此问题：

```
def show_img_for shop
  unless shop.images.blank?
    image_tag(shop.photos.last.data.url(:ppc_preview))
  else
    image_tag('/path/to/default/img.png', :alt => 'derp')
  end
end 
```

在 app/helpers/shop_helper.rb 中暗示它，然后在你的视图中调用它，通过商店，它应该可以解决问题。您也可以将其作为模型函数添加，但由于它确实是一个与视图相关的问题，因此助手可能是最合适的解决方案。

# vb.net - VB 2010 将 UTC 日期转换为 dd-MMM-yyyy 格式

> ID：12027859
> 
> 赞同：2
> 
> 时间：2012-08-19T15:57:59.650
> 
> 标签：vb.net, visual-studio-2010, time, format, utc

我使用以下方法获取 UTC 日期和时间：

```
Dim UTCN As Date = (Date.UtcNow) 
```

它输出 2012 年 8 月 19 日下午 3:48:24

我需要 FTP 一个必须使用 dd-MMM-yyyy 格式的文件（2012 年 8 月 19 日）

我的问题是我必须使用 UTC 并且它必须是上述格式。这将在不同的时区运行，所以我不想使用固定的偏移量将本地转换为 UTC。我知道如何 FTP 和其他一切，但我不知道如何格式化**UTCM**以满足我的需求？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T16:00:05.363

```
Date.UtcNow.ToString("dd-MMM-yyyy") 
```

# haskell - Haskell - 如何在尾递归函数中更新参数时绕过惰性求值

> ID：12027865
> 
> 赞同：1
> 
> 时间：2012-08-19T15:58:30.990
> 
> 标签：haskell, pattern-matching, lazy-evaluation, fibonacci, tail-recursion

这是一个 Haskell 函数，它接受一个数字`n`并返回第 n 个斐波那契数。（我使用的索引方案是第 0 个数字是 0，第一个数字是 1，第 2 个数字是 1，第 3 个数字是 2，依此类推。）

```
fib :: (Integral a) => a -> a
fib 0 = 0
fib n = fibhelper n 0 1

fibhelper :: (Integral a) => a -> a -> a -> a
fibhelper 1 x y = y
fibhelper n x y = fibhelper (n-1) y (x+y) 
```

现在，假设为了提高效率，我想绕过 Haskell 的惰性求值并强制对更新的参数进行求值（`$!`例如，使用运算符？）最优雅/惯用的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T16:05:38.640

您可以使用 bang 模式来执行此操作。

```
{-# LANGUAGE BangPatterns #-}

fib :: (Integral a) => a -> a
fib 0 = 0
fib n = fibhelper n 0 1

-- Everything with a ! before it will be evaluated before the function body
fibhelper :: (Integral a) => a -> a -> a -> a
fibhelper 1 _ (!y) = y
fibhelper (!n) (!x) (!y) = fibhelper (n-1) y (x+y)
-- The above line is equivalent to:
--fibhelper n x y = n `seq` x `seq` y `seq` fibhelper (n-1) y (x+y) 
```

另请注意，您对`Integral`类型类的使用有点过分热心。您真的希望斐波那契数列的索引与值的类型相同吗？我建议您改用签名：

```
fib :: (Integral a, Integral b) => a -> b 
```

此外，如果您正在寻找性能，`Integral`则应完全避免使用。

# android - 为什么 wrap_content 大于实际像素大小？

> ID：12027866
> 
> 赞同：3
> 
> 时间：2012-08-19T15:58:32.863
> 
> 标签：android, imageview, pixel

我试图理解一些事情。我看到的一件奇怪的事情是，当我`wrap_content`输入宽度和高度时，图像大于插入图像的实际 px（像素）大小。为什么呢？

我的代码`wrap_content`：

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="false"
    android:src="@drawable/header" /> 
```

这就是我的代码，具有图像的精确像素大小：

```
 <ImageView
    android:id="@+id/imageView1"
    android:layout_width="378px"
    android:layout_height="155px"
    android:adjustViewBounds="false"
    android:src="@drawable/header" /> 
```

如您所见，这就是确切的像素大小：

[![](../Images/8b7afc21263ec00eb4b1f844b1b02387.png)](https://i.stack.imgur.com/51coG.png)

这是为什么？我认为`wrap_content`应该将视图包装到内容大小，那么为什么它在屏幕上更大？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T08:49:17.400

如果您确实需要按原样使用图像的像素，并使用屏幕实际像素，请执行以下操作：

1）创建一个`res/drawable-nodpi`并在其中移动您的固定像素非缩放图像。

2）然后您可以使用`wrap_content`as`layout_width`和`layout_height`，并且图像像素将匹配设备像素，而不会因为 dpi 放大。

来自[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)， nodpi 的定义：

适用于所有密度的资源。这些是与密度无关的资源。无论当前屏幕的密度如何，系统都不会缩放带有此限定符标记的资源。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T16:29:53.677

支持多个屏幕的一个非常好的解释在

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)。

您需要在缩放后将图像放在相应的文件夹中。

例如，如果你想要 100*100 的图像然后放置

`75*75 in drawable-ldpi for Low density devices`

`100*100 in drawable-mdpi for Medium density devices`

`150*150 in drawable-hdpi for High density devices`

`200*200 in drawable-xhdpi for Extra High density devices`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T17:07:43.243

`wrap_content`意味着您想要图像的原始大小。即如果图像的大小是200*200，那么它将显示200*200，如果图像大小是400*400，它将显示400*400 的大小。因此，您获得更大图像的原因是您使用真实像素对其进行硬编码时实际获得的图像是因为图像的 LARGE SIZE。即图像实际上很大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T16:07:30.353

根据我的经验，我可以说`wrap_content`始终尽可能利用最大可用大小。所以有时它会拉伸图像，有时会缩小图像的大小。要使用精确的图像使用`android:scaleType="fitXY"`

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="false"
    android:scaleType="fitXY"
    android:src="@drawable/header" /> 
```

**在第 2 条评论后更新：**

根据 android 文档：

* * *

您可以使用精确的测量值指定宽度和高度，但您可能不想经常这样做。更常见的是，您将使用以下常量之一来设置宽度或高度：

**wrap_content**告诉您的视图将**自身**调整到其内容所需的尺寸

**fill_parent**（在 API 级别 8 中重命名为 match_parent）告诉您的视图变得与其父视图组允许的一样大。

通常，不建议使用像素等绝对单位指定布局宽度和高度。相反，使用与密度无关的像素单元 (dp)、wrap_content 或 fill_parent 等相对测量是一种更好的方法，因为它有助于确保您的应用程序能够在各种设备屏幕尺寸上正确显示。可接受的测量类型在可用资源文档中定义。

* * *

我发现术语**大小本身**很重要，它会自动调整图像大小。这就是为什么我告诉我，根据我的经验，我发现有时它会拉伸图像，有时会缩小图像的大小

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T16:30:08.390

你需要看看你把图像放在哪里。如果它在 hdpi 中，它在屏幕上看起来会更大，然后如果它在 hdpi 中，则在使用 wrap_content 时。因此，为了使其具有准确的大小，请将其放入正确的库中。

# macos - Mountain Lion X11 库无法 ./configure

> ID：12027868
> 
> 赞同：7
> 
> 时间：2012-08-19T15:58:37.673
> 
> 标签：macos, x11, cabal, osx-mountain-lion, xmonad

我正在尝试在 Mountain Lion 中构建 xmonad 以与 Xquartz 2.7.2 一起运行，教程在[这里](http://sourcematters.org/2012/06/27/xmonad-on-os-x-lion.html)找到。

我正在使用 cabal 获取所需的 X11 库`cabal install X11-1.5.0.1`。那没有用，所以我得到了 tar 并尝试用 ghc 构建它，同样的错误。它不会配置：

```
Resolving dependencies...
Configuring X11-1.5.0.1...
configure: WARNING: unrecognized options: --with-compiler, --with-gcc
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.outchecking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking for X... no
configure: error: in `/private/var/folders/vr/6swz_qtn60q0ld9lp_pbdqk80000gn/T/X11-1.5.0.1-78620/X11-1.5.0.1':
configure: error: X11 libraries not found, so X11 package cannot be built
See `config.log' for more details
cabal: Error: some packages failed to install:X11-1.5.0.1 failed during the configure step. The exception was:ExitFailure 1 
```

我的配置日志：

```
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by Haskell X11 package configure 1.4.6, which was
generated by GNU Autoconf 2.68\.  Invocation command line was

  $ configure --with-hc=ghc --with-gcc=/usr/bin/gcc

## --------- ##
## Platform. ##
## --------- ##

hostname = ilikeplantss-MacBook.local
uname -m = x86_64
uname -r = 12.0.0
uname -s = Darwin
uname -v = Darwin Kernel Version 12.0.0: Sun Jun 24 23:00:16 PDT 2012; root:xnu-2050.7.9~1/RELEASE_X86_64

/usr/bin/uname -p = i386
/bin/uname -X     = unknown

/bin/arch              = unknown
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = Mach kernel version:
     Darwin Kernel Version 12.0.0: Sun Jun 24 23:00:16 PDT 2012; root:xnu-2050.7.9~1/RELEASE_X86_64
Kernel configured for up to 2 processors.
2 processors are physically available.
2 processors are logically available.
Processor type: i486 (Intel 80486)
Processors active: 0 1
Primary memory available: 2.00 gigabytes
Default processor set: 96 tasks, 410 threads, 2 processors
Load average: 1.90, Mach factor: 0.72
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: /opt/local/bin
PATH: /opt/local/sbin
PATH: /usr/bin
PATH: /bin
PATH: /usr/sbin
PATH: /sbin
PATH: /usr/local/bin
PATH: /opt/X11/bin

## ----------- ##
## Core tests. ##
## ----------- ##

configure:2169: checking for gcc
configure:2185: found /usr/bin/gcc
configure:2196: result: gcc
configure:2425: checking for C compiler version
configure:2434: gcc --version >&5
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

configure:2445: $? = 0
configure:2434: gcc -v >&5
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.11~28/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.11~28/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
configure:2445: $? = 0
configure:2434: gcc -V >&5
llvm-gcc-4.2: argument to `-V' is missing
configure:2445: $? = 1
configure:2434: gcc -qversion >&5
i686-apple-darwin11-llvm-gcc-4.2: no input files
configure:2445: $? = 1
configure:2465: checking whether the C compiler works
configure:2487: gcc -m32   conftest.c  >&5
configure:2491: $? = 0
configure:2539: result: yes
configure:2542: checking for C compiler default output file name
configure:2544: result: a.out
configure:2550: checking for suffix of executables
configure:2557: gcc -o conftest -m32   conftest.c  >&5
configure:2561: $? = 0
configure:2583: result: 
configure:2605: checking whether we are cross compiling
configure:2613: gcc -o conftest -m32   conftest.c  >&5
configure:2617: $? = 0
configure:2624: ./conftest
configure:2628: $? = 0
configure:2643: result: no
configure:2648: checking for suffix of object files
configure:2670: gcc -c -m32  conftest.c >&5
configure:2674: $? = 0
configure:2695: result: o
configure:2699: checking whether we are using the GNU C compiler
configure:2718: gcc -c -m32  conftest.c >&5
configure:2718: $? = 0
configure:2727: result: yes
configure:2736: checking whether gcc accepts -g
configure:2756: gcc -c -g  conftest.c >&5
configure:2756: $? = 0
configure:2797: result: yes
configure:2814: checking for gcc option to accept ISO C89
configure:2878: gcc  -c -m32  conftest.c >&5
configure:2878: $? = 0
configure:2891: result: none needed
configure:2917: checking how to run the C preprocessor
configure:2948: gcc -E  conftest.c
configure:2948: $? = 0
configure:2962: gcc -E  conftest.c
conftest.c:9:28: error: ac_nonexistent.h: No such file or directory
configure:2962: $? = 1
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "Haskell X11 package"
| #define PACKAGE_TARNAME "X11"
| #define PACKAGE_VERSION "1.4.6"
| #define PACKAGE_STRING "Haskell X11 package 1.4.6"
| #define PACKAGE_BUGREPORT "dons@galois.com"
| #define PACKAGE_URL ""
| /* end confdefs.h.  */
| #include <ac_nonexistent.h>
configure:2987: result: gcc -E
configure:3007: gcc -E  conftest.c
configure:3007: $? = 0
configure:3021: gcc -E  conftest.c
conftest.c:9:28: error: ac_nonexistent.h: No such file or directory
configure:3021: $? = 1
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "Haskell X11 package"
| #define PACKAGE_TARNAME "X11"
| #define PACKAGE_VERSION "1.4.6"
| #define PACKAGE_STRING "Haskell X11 package 1.4.6"
| #define PACKAGE_BUGREPORT "dons@galois.com"
| #define PACKAGE_URL ""
| /* end confdefs.h.  */
| #include <ac_nonexistent.h>
configure:3050: checking for X
configure:3158: gcc -E  conftest.c
conftest.c:9:22: error: X11/Xlib.h: No such file or directory
configure:3158: $? = 1
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "Haskell X11 package"
| #define PACKAGE_TARNAME "X11"
| #define PACKAGE_VERSION "1.4.6"
| #define PACKAGE_STRING "Haskell X11 package 1.4.6"
| #define PACKAGE_BUGREPORT "dons@galois.com"
| #define PACKAGE_URL ""
| /* end confdefs.h.  */
| #include <X11/Xlib.h>
configure:3189: gcc -o conftest -m32   conftest.c -lX11  >&5
conftest.c:9:22: error: X11/Xlib.h: No such file or directory
configure:3189: $? = 1
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "Haskell X11 package"
| #define PACKAGE_TARNAME "X11"
| #define PACKAGE_VERSION "1.4.6"
| #define PACKAGE_STRING "Haskell X11 package 1.4.6"
| #define PACKAGE_BUGREPORT "dons@galois.com"
| #define PACKAGE_URL ""
| /* end confdefs.h.  */
| #include <X11/Xlib.h>
| int
| main ()
| {
| XrmInitialize ()
|   ;
|   return 0;
| }
configure:3228: result: no
configure:3744: gcc -E   conftest.c
conftest.c:10:22: error: X11/Xlib.h: No such file or directory
configure:3744: $? = 1
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "Haskell X11 package"
| #define PACKAGE_TARNAME "X11"
| #define PACKAGE_VERSION "1.4.6"
| #define PACKAGE_STRING "Haskell X11 package 1.4.6"
| #define PACKAGE_BUGREPORT "dons@galois.com"
| #define PACKAGE_URL ""
| #define X_DISPLAY_MISSING 1
| /* end confdefs.h.  */
| #include <X11/Xlib.h>
configure:3759: error: in `/Users/gav/Desktop/X11-1.6.0':
configure:3761: error: X11 libraries not found, so X11 package cannot be built
See `config.log' for more details

## ---------------- ##
## Cache variables. ##
## ---------------- ##

ac_cv_c_compiler_gnu=yes
ac_cv_env_CC_set=
ac_cv_env_CC_value=
ac_cv_env_CFLAGS_set=set
ac_cv_env_CFLAGS_value=-m32
ac_cv_env_CPPFLAGS_set=
ac_cv_env_CPPFLAGS_value=
ac_cv_env_CPP_set=
ac_cv_env_CPP_value=
ac_cv_env_LDFLAGS_set=
ac_cv_env_LDFLAGS_value=
ac_cv_env_LIBS_set=
ac_cv_env_LIBS_value=
ac_cv_env_XMKMF_set=
ac_cv_env_XMKMF_value=
ac_cv_env_build_alias_set=
ac_cv_env_build_alias_value=
ac_cv_env_host_alias_set=
ac_cv_env_host_alias_value=
ac_cv_env_target_alias_set=
ac_cv_env_target_alias_value=
ac_cv_have_x=have_x=no
ac_cv_objext=o
ac_cv_prog_CPP='gcc -E'
ac_cv_prog_ac_ct_CC=gcc
ac_cv_prog_cc_c89=
ac_cv_prog_cc_g=yes

## ----------------- ##
## Output variables. ##
## ----------------- ##

BUILD_PACKAGE_BOOL=''
CC='gcc'
CFLAGS='-m32'
CPP='gcc -E'
CPPFLAGS='  -INONE'
DEFS=''
ECHO_C='\c'
ECHO_N=''
ECHO_T=''
EGREP=''
EXEEXT=''
EXTRA_LIBRARIES=''
GREP=''
LDFLAGS=''
LIBOBJS=''
LIBS=''
LTLIBOBJS=''
OBJEXT='o'
PACKAGE_BUGREPORT='dons@galois.com'
PACKAGE_NAME='Haskell X11 package'
PACKAGE_STRING='Haskell X11 package 1.4.6'
PACKAGE_TARNAME='X11'
PACKAGE_URL=''
PACKAGE_VERSION='1.4.6'
PATH_SEPARATOR=':'
SHELL='/bin/sh'
X11_BUILD_PACKAGE=''
XMKMF=''
X_CFLAGS=''
X_EXTRA_LIBS=''
X_LIBS=''
X_PRE_LIBS=''
ac_ct_CC='gcc'
bindir='${exec_prefix}/bin'
build_alias=''
datadir='${datarootdir}'
datarootdir='${prefix}/share'
docdir='${datarootdir}/doc/${PACKAGE_TARNAME}'
dvidir='${docdir}'
exec_prefix='NONE'
host_alias=''
htmldir='${docdir}'
includedir='${prefix}/include'
infodir='${datarootdir}/info'
libdir='${exec_prefix}/lib'
libexecdir='${exec_prefix}/libexec'
localedir='${datarootdir}/locale'
localstatedir='${prefix}/var'
mandir='${datarootdir}/man'
oldincludedir='/usr/include'
pdfdir='${docdir}'
prefix='NONE'
program_transform_name='s,x,x,'
psdir='${docdir}'
sbindir='${exec_prefix}/sbin'
sharedstatedir='${prefix}/com'
sysconfdir='${prefix}/etc'
target_alias=''

## ----------- ##
## confdefs.h. ##
## ----------- ##

/* confdefs.h */
#define PACKAGE_NAME "Haskell X11 package"
#define PACKAGE_TARNAME "X11"
#define PACKAGE_VERSION "1.4.6"
#define PACKAGE_STRING "Haskell X11 package 1.4.6"
#define PACKAGE_BUGREPORT "dons@galois.com"
#define PACKAGE_URL ""
#define X_DISPLAY_MISSING 1

configure: exit 1 
```

我需要添加什么来更正指向 Xquartz 库的路径吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-19T17:22:18.073

工具链在`/opt`. 您需要将 X11 安装到默认情况下编译器/链接器可以找到它的位置，或者将相关`-I`和`-L`标志传递给相应的工具。我听说这有效：

```
 env CPPFLAGS="-I/opt/X11/include" LDFLAGS="-L/opt/X11/lib" your-build-command 
```

虽然我个人只是将所有内容符号链接到`/usr/{lib,include}`.

# ruby-on-rails - Rspec 在“ 。零？或者 .field.empty?” 当应用程序工作时

> ID：12027874
> 
> 赞同：0
> 
> 时间：2012-08-19T15:58:56.703
> 
> 标签：ruby-on-rails, activerecord, rspec, tdd, conditional-statements

使用 Rspec 开始我的 TDD 之旅并遇到一些问题。不明白为什么我的 rspec 在 if ... OR 条件下失败。

```
 def director
    @movie = Movie.find_by_id(params[:id])
    if @movie.nil? or @movie.director.empty?
      flash[:notice] = "The movie has no director info"
      redirect_to movies_path
    else
      # success
    end
  end 
```

Rspec 测试：

```
before ... #stubs
it 'assigns movies array in director action' do
    Movie.stub(:find_by_id).and_return(@movie)
    get "director", :id => 1
    ... 
end 
```

错误：

```
 1) MoviesController assigns movies array in director action
     Failure/Error: get "director", :id => 1
     NoMethodError:
       You have a nil object when you didn't expect it!
       You might have expected an instance of Array.
       The error occurred while evaluating nil.empty? 
```

如果没有找到记录，那么@movie.nil？应该满足条件和@movie.director.empty？不应该评估；那是对的吗？

在这种情况下，我不在乎是否没有这样的记录或请求记录的主管字段为空白，我会以同样的方式处理。

感谢你的帮助。

* * *

更新

我已经将一些控制器的东西删除到模型中，如下所示：

控制器：

```
 def director
    @movies = Movie.same_director_by_id(params[:id])
    if @movies.blank?
      redirect_to movies_path
    end
  end 
```

电影：

```
 def self.same_director_by_id (id)
    movie = self.find_by_id(id)
    if movie.nil? or movie.director.blank?
      return []
    else
      return self.where("id != ?", id).find_all_by_director(movie.director)
    end
  end 
```

规格：

```
it 'assigns movies array in director action' do
    Movie.should_receive(:same_director_by_id).and_return([@movie])
    get "director", :id => 1
    assigns(:movies).should be_kind_of(Array)
end 
```

现在所有控制器规格都完美通过了。我将单独测试模型。

更新 2：

问题是我在模型上存根 :director，而不是在模拟上！呼吸暂停是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:28:08.243

正如评论中所讨论的，必须模拟/存根每个对象/方法。`directory`在这里失踪了。

# javascript - 寻找一个很好的答案来串化圆形物体

> ID：12027882
> 
> 赞同：1
> 
> 时间：2012-08-19T15:59:48.057
> 
> 标签：javascript, json, circular-reference

因此，我在脑海中环顾了很多断开的链接和解释。

我要求这是一个游戏应用程序，例如所有者将拥有一个项目，并且该项目也由所有者持有。

我的服务器存储循环引用没有问题。但是当客户端第一次登录时，我将播放器对象发送给客户端。我无法思考如何执行此操作。物品可以由玩家在库存槽中持有，例如玩家将手放在头上......物品也可能在x，y位置的地面上我考虑过某种容器，其ID刚好充当指针。而不是传递 JSON 字符串对象。

能够传递圆形对象会很棒，或者是一个可以使用 Id 来引用项目所在位置的简单函数。

这是我对解决方案的最佳尝试

```
//create an object
//   run this function
function createRefrence(ref){
    container = io.sockets.containersById.push(ref)
    io.sockets.containersById[container-1]={ref:ref}
    return (container-1)
} 
```

//将返回值存储为对象的属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:28:50.207

简短的回答是不要！循环引用并没有真正让你得到任何东西。以非循环方式表示此类数据有三种基本方式。当你说只有一个 id 作为指针时，你正朝着正确的方向前进。

我这样做的方法不是尝试拥有一个巨大的对象，它包含所有其他对象，具有列出用户角色的数据格式，并且仅引用项目，但实际上并未将它们放入角色的数据结构中.

每个对象都会有某种类型的 id，然后将两者连接起来。在 XML 中执行此操作（因为需要更好的语法）可能看起来像这样......

```
<character>
   <possession ref='1' status='worn' />
   <possession ref='2' status='inventory' />
</character>

<world>
   <item ref='3' xpos='3' ypos='4' />
</world>

<object id='1' name='clothing' hp='12' />
<object id='2' name='gadget' hp='0' />
<object id='3' name='cash' hp='0' /> 
```

当您解析时，您会看到 refs 将对象连接到角色或世界。因此，当您构建实际对象时，您会为它们提供相互引用。

或者你可以做这样的事情......

```
<character>
   <object id='1' name='clothing' hp='12' />
   <object id='2' name='gadget' hp='0' />
</character>

<world>
   <object id='3' name='cash' hp='0' />
</world> 
```

再次注意，虽然角色拥有的对象是显式的，但另一种方式的链接是隐式的，您的解析器必须知道重建它。

或者你甚至可以做一些类似于链接表的事情，其中​​连接完全从其他对象中删除并外部化。这种形式的好处是没有任何暗示。双向链接非常明确，重建它们的解析器将非常简单。

```
<character id='1'>
   ...
</character>

<object id='1' ... />

<link character='1' object='1' /> 
```

当然，相同的语义可以以您选择的格式表示，因此您可以使用 JSON 或您喜欢的格式来执行此操作。

您可能还会发现这很有用，[https://stackoverflow.com/a/3341439/51031](https://stackoverflow.com/a/3341439/51031)它为库提供了一些选项，可以被告知排除某些链接，但问题仍然是当您再次将对象缝合在一起时反序列化。因此，以一种或另一种方式，您最终会遗憾地编写一些解析代码！

# unit-testing - 如何在 Visual Studio 2012 中分析单元测试？

> ID：12027885
> 
> 赞同：51
> 
> 时间：2012-08-19T16:00:07.627
> 
> 标签：unit-testing, profiling, visual-studio-2012

是否可以在不使用任何外部分析工具的情况下在**Visual Studio 2012 Ultimate中****分析**MSTest 单元测试？

 *** * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-22T19:54:47.120

在即将发布的 Visual Studio 2012 Quarterly Update 1 中重新添加了此功能。在测试资源管理器中右键单击要分析的测试，然后从上下文菜单中选择“分析测试”。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-09-20T19:18:01.183

在 Visual Studio 中，这是一个非常强大的功能！和你一样，我在 VS2012 中找不到它（MSDN 或博客中没有参考，...）

现在，我发现的用于分析单元测试的唯一解决方案是将 Profiler 附加到名为 vstest.executionengine.x86.exe 的进程（对我来说是 x86，但对于 64 位可能会有所不同）

右键单击后，您可以在“性能资源管理器”选项卡中执行此操作。

![在此处输入图像描述](../Images/375f108562ea7798daba9abdf57976e8.png)

探查器启动后，您可以根据需要运行任意数量的测试。然后停止分析，您将看到此会话的所有详细信息。

这种技术有两个注意事项：

*   由于某些原因，列表中缺少该过程。也许它在空闲时停止。只需开始一项测试即可。
*   您必须为每个会话附加探查器。我还没有找到编写脚本的方法。

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-28T19:01:37.127

在 Visual Studio 2015 中，按照 Cyber​​maxs 提供的说明进行操作，但选择`TE.ProcessHost.Managed`. 不幸的是，其中似乎有两个，因此您必须选择 CPU 使用率较高的一个。

[![http://i.stack.imgur.com/1Wko1.png](../Images/e9315872b86ac38a5fd08908acf5b2b8.png)](https://i.stack.imgur.com/1Wko1.png)**

# sql - 文本搜索条件问题

> ID：12027890
> 
> 赞同：0
> 
> 时间：2012-08-19T16:00:33.353
> 
> 标签：sql

我刚刚进入SQL。小迷糊吃了以下。也许你可以帮忙。此查询有效

```
SELECT topics.topic FROM topics 
LEFT JOIN daybook 
ON topics.topic_id = daybook.topic_id
WHERE daybook.daybook_id = 7 
```

这个查询失败的地方

```
SELECT topics.topic FROM topics 
LEFT JOIN daybook 
ON topics.topic_id = daybook.topic_id
WHERE daybook.test = “test text” 
```

我不明白为什么。daybook.test 是一个字符串字段。它正在传递一个字符串。如果写作没有改善，我已经尝试了所有品种。你能帮我吗？

谢谢G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:02:32.493

使用单引号而不是双引号来分隔 SQL 字符串文字。换句话说，在这种情况下使用“测试文本”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:12:13.367

像这样“测试文本”使用单引号

```
SELECT topics.topic FROM topics 
LEFT JOIN daybook 
ON topics.topic_id = daybook.topic_id
WHERE daybook.test = 'test text'; 
```

重要的：

您必须在 sql/mysql 中的 varchar 值周围使用 ''（单引号）。但是，在 int 的情况下，查询的工作方式与单引号和不带单引号相同

原因：

如果您不在 varchar 周围使用 '' 您的查询**会将其作为变量**。所以给出错误

# c++ - 检查 std:array of unsigned char 是否已初始化的好习惯

> ID：12027892
> 
> 赞同：1
> 
> 时间：2012-08-19T16:00:35.467
> 
> 标签：c++, stl

我需要检查 std:array 是否已初始化（或一些默认的公共值）。该数组是可选的，所以我需要检查它是否有价值。我不使用升压。我试过这个：

```
array<unsigned char, 2> testArr;
testArr.fill(0);
if(testArr.empty()){
    cout << "testArr is empty" <<endl ;
} 
```

我正在寻找一种简单的方法来初始化默认值并检查默认值是否没有迭代（我自己），有什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T16:07:04.143

如果没有可选的或其他的东西，就没有办法做到这一点，因为`std::array::empty()`

**检查容器是否没有元素，即是否 begin() == end()。**

因此，检查容器（即`std::array<T, 0>`）中没有元素，没有其他元素。您应该使用任何可选类，或遍历数组并检查值。如果您不想使用`boost::optional`- 编写您自己的可选选项，例如`boost::optional`. 这很简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T16:02:42.743

是的。只是不要让它未初始化。考虑一下，`boost::optional<array<unsigned char, 2>>`如果它并不总是携带有用的数据。

# python - 通过 if 块和变量的故事进展：失败

> ID：12027895
> 
> 赞同：0
> 
> 时间：2012-08-19T16:01:06.653
> 
> 标签：python, if-statement, save

好的。我正在设计一个基于文本的小型 RPG，但是，我需要让玩家能够保存游戏。我已经通过使用 pickle 模块成功地做到了这一点，但我试图让玩家能够通过使用这个我称之为“storypointe”的变量回到故事情节中的前一个点。基本上它会像这样工作：

```
if storypointe == 0:
    #Story, story, stuff happens here...
    storypointe += 1

if storypointe == 1:
    #More story, more story, more stuff happens here.... 
```

然后我会腌制变量storypointe，当游戏加载时（意味着使用pickle.load从我腌制到的任何文件中获取玩家统计数据和故事点），理想情况下它会从故事点对应的任何代码块开始。实际代码对作者和（也许）读者来说工作量太大，所以我编写了以下代码来模拟相同的环境并复制相同的问题。

```
storypointe = 0
jump = 0
spin = 0
dive = 0
roar = 0
savefile = "C:\Users\Sammu\The Folder\databin.txt"
import pickle, sys

def save ():
    with open(savefile, 'w') as savebin:
        actions = [jump, spin, dive, roar, storypointe]
        pickle.dump (actions, savebin)

def load ():
    with open(savefile, 'r') as loadbin:
        actions2 = pickle.load (loadbin)
        print actions2

        jump = actions2[0]
        spin = actions2[1]
        dive = actions2[2]
        roar = actions2[3]
        storypointe = actions2[4]

#Begin the code#

gameIO = raw_input ('Would you like to load previous game?\n>>> ')

if gameIO in ['yes', 'load', 'load game', 'Yes', 'Load', 'Load game']:
    load () 

if storypointe == 0:
    action = raw_input ('Would you like to jump, spin, dive or roar?\n>>> ')

    if action in ['jump', 'Jump']:
        jump += 1
        print jump

    if action in ['spin', 'Spin']:
        spin += 1
        print spin

    if action in ['dive', 'Dive']:
        dive += 1
        print dive

    if action in ['roar', 'Roar']:
        roar += 1
        print roar

    storypointe += 1

if storypointe == 1:
    print "\n\nYou have progressed to the next stage"
    save () 
```

所以如果storypointe等于actions2[4]，那么这一定意味着它应该等于1。但这里的问题是它总是跟随第一个代码块，从

```
action = raw_input ('#yadayadayada') 
```

代替：

```
print "You have progressed to the next stage" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:14:07.667

我认为您对 Python 作用域感到困惑。

在这里，您在模块级别创建了一个新变量：

```
storypointe = 0

[...] 
```

但在这儿：

```
def load ():
    with open(savefile, 'r') as loadbin:
        actions2 = pickle.load (loadbin)

[...]
        storypointe = actions2[4] 
```

您只需在函数中创建一个新的*本地*名称“storypointe” `load`。它不会影响`storypointe`模块级别的内容。我会将您的变量存储在一个类或一个字典中，这也将避免不得不做这些`actions2[i]`事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T16:09:59.277

与其将您的叙述表达为一堆 if 语句，不如将其视为一个状态机，如果您将故事情节表达为一[棵树](http://en.wikipedia.org/wiki/Tree_%28data_structure%29)，那么您可以轻松地将游戏中的路线存储为`node`树中下一个的参考，您还可以存储每个节点的引用（唯一），允许轻松保存和加载位置。

参见例如

```
class Node(object):
    def __init__(self, parent, children=None):
        self.parent = parent
        self.children = children or {}

story = {}
story['a'] = Node(None)
story['b'] = Node(a)
story['a'].children['b'] = story['b'] 
```

# php - jquery mobile w/php登录表单

> ID：12027899
> 
> 赞同：1
> 
> 时间：2012-08-19T16:01:20.413
> 
> 标签：php, html, jquery-mobile

我是使用 php 的 jquery mobile 的新手。提交后，带有提交按钮的登录表单有一点问题，它转到“home.php”页面，但 url 也没有转到 home.php。（仍然是 /login.php）。我怎样才能解决这个问题？

```
<?php

include 'core/config.init.php';     //include all sql connect,function etc.
if(logged_in() === true)
{
    header('Location: home.php');   
}

if(empty($_POST) === false)
{

    $check_user = true;
    $check_pass = true;
    $username = $_POST['username'];
    $password = $_POST['password']; 

    if(empty($username) === true || empty($password) === true)
    {
        $error = 'You need to enter username and password!';
        $check_user = false;
        $check_pass = false;
    }
    else if(user_exists($username) === false )
    {
        $check_user = false;
    }

    $login = login($username, $password);

    if($login === false)
    {
        $error = 'Username/password is incorrect!'; 
        $check_pass = false;
    }
    else
    {
        setcookie("username", "$username", time()+1720000); 
        header('Location: home.php');
    }
}
//print_r($error);

?>

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <link rel="stylesheet" href="core/css/login.css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
    <script type="text/javascript" src="core/jquery/jquery-latest.js"></script>  
    <script src="core/jquery/login.js"></script>
</head>
<body>
        <div data-role="page" data-theme="a">
            <div id = "header-text-area">
                <span id= "header-text">Login</span>
            </div>
            <div data-role="content" style="padding: 15px">
                <form action="login.php" method="POST">
                    <div data-role="fieldcontain" class="ui-hide-label">
                        <input name="username" id="textinput1" placeholder="Username" value="test" type="text" />
                    </div>
                    <div data-role="fieldcontain" class="ui-hide-label">
                        <input name="password" id="textinput2" placeholder="Password" value="test" type="password" />
                    </div>
                    <div id = "submit-area">
                        <input type="submit" data-theme="b" value="Submit" id = "sub1"/>
                    </div>
                </form>

            </div>
        </div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:14:24.750

您需要添加`data-ajax="false"`到表单标签。这将在不使用 jquery mobile 内置的 Ajax 导航的情况下将表单提交到您的操作 URL。此外，您应该在表单操作中使用完整的 URL。（jquery mobile 有时会感到困惑）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-19T16:10:45.240

每次调用后

```
header("Location: home.php"); 
```

你需要添加这样的一行：

```
exit(); 
```

这应该可以解决您的问题。

# java - Java双输入

> ID：12027900
> 
> 赞同：1
> 
> 时间：2012-08-19T16:01:21.070
> 
> 标签：java, formatting, decimal

我试图让用户以自己的风格自由输入数字，就像他可以选择输入 2 或 2.00 一样，但正如您所知，双精度数不能接受这个 (2)。我希望双精度只接受小数点后 2 位（基本上我代表金钱）。这就是我不确定如何获取输入并将其转换为 2decimals 格式的内容。java.tks 的新手

试过谷歌，但找不到我可以在输入本身格式化的地方，这意味着甚至不要让用户输入除 2 个小数位以外的任何小数位，而不是在输入多个不同的变量后进行后处理。，tks

```
public static void add()
{
 double accbal;
   Scanner sc = new Scanner(System.in);
    DecimalFormat df = new DecimalFormat("0.00");

        System.out.println("Enter account balance");
        accbal =  sc.nextDouble();
 //this is the part where i need to know the entered value is formated to only 2 decimal places

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:05:09.673

试试这个：

```
 DecimalFormat  df = new DecimalFormat ("#.##");//format to 2 places
    accbal =  sc.nextDouble();
    System.out.print(df.format(aacbal));//prints double formatted to 2 places 
```

但是我看到你说：

> 试过谷歌，但找不到我可以在输入本身格式化的地方，这意味着甚至不要让用户输入除 2 个小数位以外的任何小数位

如果出于某种原因以上是您的意图，那么只需使用读取输入`nextLine()`，然后检查以确保在小数点后它的长度仅为 2：

```
double accbal=0;
Scanner sc = new Scanner(System.in);

while (true) {
    System.out.println("Enter account balance");
    String s = sc.nextLine();

    if (s.substring(s.indexOf('.') + 1).length() <= 2)//accept input and convert to double
    {
        accbal = Double.parseDouble(s);
        break; //terminates while loop
    } else {
        System.out.println("Incorrect input given! Decimal places cant exceed 2");
    }
}
System.out.println("Balance: "+accbal); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T16:12:24.597

由于显示小数位对最终用户来说实际上是一种形式，因此您可以将您的值读取为 a`String`并将其转换为 a `Double`or `BigDecimal`，如果您正在处理实际财务问题，则后者是首选。

相关： [每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

```
public static void add() {
    BigDecimal accbal; // could declare a Decimal
    Scanner sc = new Scanner(System.in);
    DecimalFormat df = new DecimalFormat("#.00");

    System.out.println("Enter account balance");
    accbal = new BigDecimal(sc.nextLine());
    System.out.println(df.format(accbal.doubleValue()));

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T16:15:49.470

如果您想接受“#.##”形式的输入，只需为[`Scanner.hasNext`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNext%28java.util.regex.Pattern%29):-)指定自定义正则表达式

```
final Scanner input = new Scanner(System.in);
final Pattern pattern = Pattern.compile("\\d+\\.\\d{2}?");
while (input.hasNext()) {
  System.out.println((input.hasNext(pattern) ? "good" : "bad")
    + ": " + input.nextDouble());
} 
```

使用以下输入：

```
2.00
3.14159
2 
```

结果是：（也在[这里](http://ideone.com/OzLGE)找到）

```
good: 2.0
bad: 3.14159
bad: 2.0 
```

通过这种方式，您可以验证他们输入的金额有两位小数。

* * *

即使您说您**不**想要一个简单的后处理解决方案，如果您已经有一个金额并希望将其转换为使用 2 个小数位，**并且**您专注于精度（因为这是金钱），也许可以尝试使用[`BigDecimal`](http://goo.gl/9C8Ey)- 特别是，请参阅[`BigDecimal.setScale`](http://goo.gl/c41Uy)：

```
while (input.hasNextBigDecimal()) {
  System.out.println(input.nextBigDecimal().setScale(2, RoundingMode.HALF_UP));
} 
```

因此[输出](http://ideone.com/NSXVN)是：

```
2.00
3.14
2.00 
```

# android - Android 应用程序中的播客提要

> ID：12027905
> 
> 赞同：1
> 
> 时间：2012-08-19T16:01:54.117
> 
> 标签：android, feed, podcast, church

我正在为我的教会开发一个安卓应用程序，并希望将我们的布道放在上面。我们上传布道的公司会自动为其制作播客提要。基本上我正在寻找一种在应用程序内列出播客的方法。我希望将其硬编码到一个播客中。我在网上看过，但真的找不到任何东西。我不确定如何编写播客部分。实际播放很可能会移交给辅助应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-08T15:48:04.657

我推荐两个步骤。A) 使用 Aquery 库解析播客提要链接返回的 xml 或 json。看看[https://code.google.com/p/android-query/](https://code.google.com/p/android-query/)。无论您使用什么布局来显示播客项目。B）然后您可以使用 MediaPlayer 从 A URL 流式传输音频。[http://www.tutorialspoint.com/android/android_mediaplayer.htm](http://www.tutorialspoint.com/android/android_mediaplayer.htm)

祝你好运

# matrix - 在 Prolog 中检查矩阵项

> ID：12027912
> 
> 赞同：1
> 
> 时间：2012-08-19T16:03:05.263
> 
> 标签：matrix, prolog

我需要编写一个 Prolog 谓词来检查：

1.  如果行上的所有矩阵元素都是奇数，程序应该在行的末尾添加`1`。
2.  如果行中有 1 个或多个偶数，程序应在行尾添加`0`。

```
?- f([[1,2,3],[5,5,5],[4,4,4]], Xss).
Xss = [[1,2,3,0],[5,5,5,1],[4,4,4,0]]. 
```

这就是我现在所拥有的：

```
f([],[]).
f(matrix,Xss).
f([Xs|T],Xss):-
    Xs=[X|T2],
(X mod 2 =:= 0 ->
add2end(0,[X|T2],[X|Result]):-
add2end(0,T2, Result),
add2end(0,[],[0]), Xss=[Xs|T] ;
   add2end(1,[X|T2],[X|Result]):-
add2end(1,T2,Result),
    add2end(1,[],[1])), Xss=[Xs|T].. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-19T10:01:34.593

clpfd和[Prolog lambdas](https://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/ISO-Hiord)[没](/questions/tagged/clpfd "显示标记为“clpfd”的问题")问题！

```
:- use_module(library(lambda)).
:- use_module(library(clpfd)). 
```

我们`f/2`基于[元谓词](/questions/tagged/meta-predicate "显示标记为“元谓词”的问题") [`maplist/3`](https://stackoverflow.com/a/6683502/4609915)、[`sum/3`](http://www.swi-prolog.org/man/clpfd.html)、[`(#=)/2`](http://www.swi-prolog.org/man/clpfd.html)和定义[`append/3`](https://www.complang.tuwien.ac.at/ulrich/iso-prolog/prologue)：

```
f(Xss,Yss) :-
   maplist(\Xs^Ys^(sum(Xs,#=,S),P #= S mod 2,append(Xs,[P],Ys)), Xss, Yss). 
```

示例查询：

```
?- f([[1,2,3],[5,5,5],[4,4,4]], Xss)。
Xss = [[1,2,3, 0 ], [5,5,5, 1 ], [4,4,4, 0 ]]。% 确定性地成功   

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:53:46.207

你可以这样做：

```
f([], []).
f([Row|Matrix], [NRow|NMatrix]):-
  f(Row, 1, NRow),
  f(Matrix, NMatrix).

f([], LastElem, [LastElem]).
f([Elem|Row], CurLastElem, [Elem|NRow]):-
  Elem mod 2 =:= 0 -> f(Row, 0, NRow) ; f(Row, CurLastElem, NRow). 
```

过程`f/2`将递归计算（并添加）每行的最后一个元素的行。第一个子句是结束递归的基本情况。第二个子句将调用一个辅助过程`f/3`，其中第一个参数将是要计算的行，第二个参数是最后一个元素的当前值，第三个参数将保存结果。

辅助过程的第一个子句`f/3`处理每一行的基本情况。它将当前 LastElement 添加到行中。第二个子句测试行首，看它是偶数还是奇数。如果是偶数，则当前 LastElement 设置为零并继续递归。如果元素是奇数，那么它将继续递归，保持当前 LastElement 不变。

如果您注意到当您在一行中看到一个偶数元素时，则可以优化此过程，那么实际上不需要继续递归，`f/3`因为您知道最后一个元素将为 0...但是该优化保留为锻炼 ;）

# java - Hooked JSP 中的自定义服务生成器方法

> ID：12027919
> 
> 赞同：2
> 
> 时间：2012-08-19T16:03:59.377
> 
> 标签：java, hook, liferay

我想扩展位于控制面板中的**用户管理 portlet 。**我挂钩了 jsp，并希望使用与 jsp 处于同一挂钩中的服务构建器中的方法。

问题是jsp找不到类。所以我将*** -service.jar 复制到了 tomcat lib/ext 文件夹中，并在部署时将其从钩子中移除。

但这不起作用。过了一会儿，我得到一个异常，说**Cache is not alive**或者**这个 Web 应用程序实例已经停止**。

有没有办法在挂钩的 jsp 中使用我的自定义服务构建器中的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:47:20.350

你采取的方法是正确的，即把罐子放在`*-service.jar`里面`[TOMCAT_HOME]/lib/ext`，然后从钩子上**取下罐子。**

该错误可能是因为钩子可能没有正确取消部署，您可能会从这个[论坛帖子](http://www.liferay.com/community/forums/-/message_boards/message/11912637)中得到一些想法。所以我的建议是：

1.  取消部署钩子
2.  停止服务器
3.  将罐子复制到`[TOMCAT_HOME]/lib/ext`
4.  清除临时和工作目录
5.  重启服务器
6.  部署钩子

每当您`jar`从插件项目中删除 a 然后只部署而不取消部署 portlet 时，有时您可能会注意到该`jar`文件可能仍存在于已部署`webapps/plugin-project`的目录中，这也可能是这种情况。此外，每当您在全局类路径（即`[TOMCAT_HOME]/lib/ext`）中放入某些内容时，您都需要重新启动服务器。

另外，不要忘记`import`JSP中的类:-)，以防万一......

# cpu - Sandy-Bridge CPU 规格

> ID：12027922
> 
> 赞同：4
> 
> 时间：2012-08-19T16:04:40.460
> 
> 标签：cpu, intel, cpu-registers, cpu-architecture, cpu-cache

我能够在这里和那里汇总有关 Sandy Bridge-E 架构的一些信息，但我并不完全确定所有参数，例如 L2 缓存的大小。任何人都可以确认他们都是正确的吗？我的主要来源是[64-ia-32-architectures-optimization-manual.pdf](http://www.intel.com/content/dam/doc/manual/64-ia-32-architectures-optimization-manual.pdf)

![在此处输入图像描述](../Images/62cc4689a221c1ab9e1869036e82ead9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:32:09.537

在沙桥上，每个内核都有 256KB 的 L2（[参见数据表，第 1.1 节](http://www.intel.com/content/www/us/en/processors/core/core-i7-lga-2011-datasheet-vol-1.html)）。对于 6 个核心，即 1.5MB，但由于每个核心只访问自己的核心，因此最好始终将其视为每个核心 256KB。

此外，峰值 gflops 看起来完全错误。AVX 是 16 次浮点数/周期（作为单次浮点数）。有 6 个内核，在 3.2GHz 时约为 307 gflops/s。

其余大部分数据看起来都不错（特别是查看数据表和该[模型的规范](http://ark.intel.com/products/63697/Intel-Core-i7-3930K-Processor-%2812M-Cache-up-to-3_80-GHz%29)），尽管我不确定每个缓存的关联性。

# css - 强制 FF / chrome 使用greasemonkey（或其他方式）忽略元标记

> ID：12027924
> 
> 赞同：1
> 
> 时间：2012-08-19T16:04:47.500
> 
> 标签：css, cross-browser, greasemonkey

我必须访问一个可以在 IE 上正常工作的网站，但不能在 FF / chrome 上工作。由于以下元标记，我怀疑 CSS 未在 FF / chrome 中加载：

```
<meta content="http://schemas.microsoft.com/intellisense/ie5" name="..."> 
```

（尽管我可能走错了树）。我可以以某种方式（greasemonkey 或其他方式）删除此标签并强制 IE 行为吗？我尝试了用户代理插件，并尝试了以下 GM 脚本：

```
var microsoft = document.getElementsByTagName('meta');

while(microsoft.length > 0) { 
  microsoft[0].parentNode.removeChild(microsoft[0]);
} 
```

但无济于事。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:13:16.950

我做了一些[研究](http://www.velocityreviews.com/forums/t97952-can-i-remove-this-meta-tag.html)，似乎该标签不会改变页面的显示方式，您是否尝试过删除标签并查看会发生什么？毕竟，编程就是修修补补:)

# java - 高效的可扩展序列生成器实现

> ID：12027933
> 
> 赞同：1
> 
> 时间：2012-08-19T16:06:09.767
> 
> 标签：java, memcached, redis, sequence-generators

问题：
我需要实现多个共享序列生成器，它们将被 50-100 个 Tomcat 服务器使用。每个序列生成器应从 1 开始，并在每次请求后递增 1。序列生成器实现应该有原子增量命令。Java 客户端应该可用。

规模：
多达 50000 个积极使用的序列生成器，对于每个生成器，我们预计在 5-10 秒内有一个增量请求。每秒最多 20000 个请求
50-100 个 Java 客户端（Tomcat 服务器）。对序列生成器的访问在这些服务器之间共享。重要提示：只有 2 个客户端使用相同的序列生成器。
50-100 次 - 每个序列生成器的平均使用次数。
24 h TTL - 一个生成器最多应在创建后 24 小时后被清理 - 因此实际上可能有超过 50000 个序列生成器，但预计最多只有 50000 个会同时主动接收请求。

性能：
<1ms 优选平均响应时间。平均超过 2ms 绝对不够好。

我们排除了 Oracle 的 Sequence 对象。
我们目前正在考虑 Redis 和 Memcached。
两者都很快。

推荐/足够好的实现是什么？
为此目的还有其他更好的技术吗？

另一个重要的问题：
incr、Redis 或 Memcached 哪个性能更好？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T11:42:43.247

Redis 应该让你轻松做到这一点。

1.  为每个序列生成器创建一个键
2.  使用[INCR](http://redis.io/commands/incr)命令获取下一个序列号
3.  如果返回的数字为 1，则表示该键以前不存在。在这种情况下，您还应该发出[PEXPIRE](http://redis.io/commands/pexpire)命令以在 24 小时后使密钥过期

为了进一步减少延迟，您可以做几件事 -

1.  仅为序列生成器维护 Redis 服务器。换句话说，不要在此服务器上存储任何其他数据。
2.  不要使用 AOF；而是使用 RDB 持久性。AOF 将在日志文件中附加每个 INCR 命令，另一方面，RDB 将简单地存储每个序列的当前值。

您应该通读[诊断延迟问题](http://redis.io/topics/latency)以及有关[redis 持久性](http://redis.io/topics/persistence)的页面。

此外，expire 命令必须在 24 小时内最多发出一次，这将需要两次往返 redis。如果你想避免这种情况，你可以创建一个 lua 脚本。[速率限制 lua 脚本](http://evalsha.com/scripts/71927ba3cf040801b6a3b3d7081191d403c8d110)是一个很好的起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T18:10:45.240

我有以下建议：

天真的方法是有问题的，因为它涉及对保存当前序列值的记录进行非常细粒度的锁定。有这么多客户 - 它会产生难以忍受的争执。

我的建议是允许客户对*一系列*序列进行预订。因此，客户第一次订购了一个范围，例如从 1 到 1000。此订单的处理是同步的。因此，如果另一个人同时要求一个范围 - 它应该阻止并稍后接收范围 1001 到 2000。

每个客户端都会获得一个不相交的序列池并从中提取值。一旦池耗尽，它就会向数据库询问另一个范围。如前所述，这涉及锁定。

问题是您可以微调范围的大小以权衡锁争用和资源利用率（不能保证完全使用保留的范围 - 客户端可能会决定它不再需要任何序列，或者它可能会完全崩溃）。

# mime - 在 MIME base64 编码中包含文件名

> ID：12027937
> 
> 赞同：1
> 
> 时间：2012-08-19T16:06:39.853
> 
> 标签：mime

例如，在将图片编码为 MIME base64 字符串时，是否有一种标准方法也可以包含其文件名，或者至少包含建议的文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T19:28:40.533

`Content-Disposition: attachment; filename="picture.jpg"`. 标`Content-Type`头也可以包含`name=`属性，但不建议这样做。

我假设使用电子邮件，但 IIRC 也适用于 HTTP。

# postgresql - fe_sendauth：发送密码验证时出错

> ID：12027938
> 
> 赞同：1
> 
> 时间：2012-08-19T16:06:55.627
> 
> 标签：postgresql, python-2.7, database-connection, postgis, django-settings

我现在正在学习 Django，并且正在一步一步地学习[Django 书。](http://www.djangobook.com/en/2.0/chapter05/)

当我继续第 5 章将我的 Django 项目连接到我的数据库时，我无法连接它。我得到错误：

```
FATAL:  password authentication failed for user "postgres" 
```

这是代码：

`settings.py`配置：

```
DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.postgresql_psycopg2', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
    'NAME': 'postgis',                      # Or path to database file if using sqlite3.
    'USER': 'postgres',                      # Not used with sqlite3.
    'PASSWORD': 'XXXXXXX',                  # Not used with sqlite3.
    'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
    'PORT': '8904',                      # Set to empty string for default. Not used with sqlite3.
}
} 
```

但是当我使用这些代码在 Python shell 中测试连接和设置时：

```
from django.db import connection
cursor=connection.cursor() 
```

外壳回复错误：

```
Traceback (most recent call last):
File "<console>", line 1, in <module>
File "E:\Python27\lib\site-packages\django-1.4.1-    py2.7.egg\django\db\backends\__init__.py", line 306, in cursor
cursor = self.make_debug_cursor(self._cursor())
File "E:\Python27\lib\site-packages\django-1.4.1-py2.7.egg\django\db\backends\
postgresql_psycopg2\base.py", line 177, in _cursor
self.connection = Database.connect(**conn_params)
File "E:\Python27\lib\site-packages\psycopg2\__init__.py", line 179, in connect
connection_factory=connection_factory, async=async)
OperationalError: FATAL:  password authentication failed for user "postgres" 
```

然后我重新安装了 PostgreSQL 和 pycopg2 包。我启动 pgAdminIII 运行服务器并连接到数据库，然后我在 python shell 中运行相同的代码，但问题仍然存在。

需要帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T02:17:41.887

猜测是您使用了错误的密码，或者您的密码`pg_hba.conf`配置不正确。

您可以使用`psql`所需的凭据进行连接吗？尝试：

```
psql -U postgres -W -p 8904 postgis 
```

如果没有，请检查`pg_hba.conf`用户`postgres`正在使用`ident`或`md5`安全性。如果要使用密码连接，则必须是`md5`. 如果您更改设置，请使用`pg_ctl reload`或仅重新启动 PostgreSQL 以使更改生效。

您可以`pg_hba.conf`通过连接到您的数据库`psql`并运行`SHOW hba_file;`. 例如：

```
sudo -u postgres psql -c 'SHOW hba_file;' 
```

请注意，无论如何，**您都不应该使用 PostgreSQL 超级用户进行应用程序连接。**创建一个新用户并让 Django 在新数据库上使用该用户。例如，要创建一个名为的用户和一个由该用户拥有的名为`django`的数据库：`django_db``django`

```
sudo -u postgres createuser -SDR -P django
sudo -u postgres createdb -O django_db django; 
```

使`-SDR`默认值显式，即`django`用户不应该是超级用户并且不应该拥有`CREATEDB`或`CREATEUSER`权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-03-01T17:18:00.813

使用 PostgreSQL 14+ 有一种新的方法来获取`fe_sendauth: error sending password authentication`错误。

如[PostgreSQL 14 发行说明](https://www.postgresql.org/docs/14/release-14.html)中所述，客户端和服务器现在都使用 OpenSSL EVP API，它强制执行 FIPS 模式。如果您的密码使用`md5`，如果您的 FIPS 配置不允许，您将无法使用 PostgreSQL 14 登录`md5`。

您可以使用 来检查您的默认`password_encryption`设置`SHOW password_encryption;`，并使用以下命令手动更新单个用户：

```
SET password_encryption  = 'scram-sha-256'; 
ALTER USER "user" with password 'password'; 
```

要永久更改新用户密码的默认`password_encryption`设置，请更新`postgresql.conf`：

```
password_encryption = scram-sha-256 
```

来自 PostgreSQL 14 发行说明：

> *   更改 SHA1、SHA2 和 MD5 哈希计算以使用 OpenSSL EVP API (Michael Paquier)
>     
>     
>     
>     这是更现代的并且支持 FIPS 模式。
>     
>     
> *   将 password_encryption 服务器参数的默认值更改为`scram-sha-256`(Peter Eisentraut)
>     
>     
>     
>     以前是`md5`. 除非更改此服务器设置或以 MD5 格式指定密码，否则所有新密码都将存储为 SHA256。`md5`此外，不再接受以前是同义词的遗留（和未记录的）类似布尔值的值。

# python - 如何在 Python（sqlite）中返回光标？

> ID：12027939
> 
> 赞同：0
> 
> 时间：2012-08-19T16:07:02.367
> 
> 标签：python, sqlite, cursor, etl

使用 Python (2.7) 和 sqlite (3) 我正在尝试将查询结果复制到表中。因为查询的结果很大，所以想批量使用“fetchmany”。查询工作正常，也可以批量检索结果。问题是当我尝试复制表中的结果时，它会在第一批之后停止。

我怀疑问题出在光标的位置。

如何在 python 中返回光标？

PS：我在这里看到很多关于光标（关闭）的帖子，但还没有看到我的问题的答案。另请注意，我是 Python 的新手，所以如果问题微不足道，我们深表歉意。

这是我的代码片段：（示例）

```
 import sqlite3

                dbLocation = 'P:/XXX/db1.db'
                connection = sqlite3.connect(dbLocation)
                cursor = connection.cursor()

                strSQLStatement = """
                        SELECT
                            whatever1,
                            whaterver2
                        from wherever
                        LIMIT 10"""

                cursor.execute(strSQLStatement)

                #the following codes works 
                # printing the 10 results

                while True:
                    results = cursor.fetchmany(2)
                    if not results:
                      break
                    print results   

                #the following codes does NOT work  
                # Only 2 results are processed 

                while True:
                    results = cursor.fetchmany(2)
                    if not results:
                      break
                    print results   
                    cursor.executemany ('INSERT INTO NewTable (?,?)',results)
                    connection.commit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:11:59.840

您`executemany()`对**原始光标**的调用破坏了之前的内容。创建第二个光标以执行插入。

# ruby-on-rails - 使用 form_tag 在视图中显示验证错误消息 - Rails

> ID：12027941
> 
> 赞同：0
> 
> 时间：2012-08-19T16:07:09.420
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我想在我的模型未验证时显示此错误

模型：

```
 validates_length_of  :name ,:minimum => 6,:on => :create
  validates_length_of :password ,:minimum => 6,:on => :create 
```

但在我看来，这并没有出现我的观点是

```
<h1>Cadastro</h1>
    <% if flash[:note] %>
    <%= flash[:note] %>
    <%end%>
    <%= error_messages_for :user %>
    <% for erro in @user.errors.full_messages %>
    <%= erro %>
    <% end %>
<%= form_tag users_path do %> 

     <%= label_tag :name %><br />
    <%= text_field_tag :name,params[:name] %><br />
  <%= label_tag :password %><br />
   <%= password_field_tag :password,params[:password] %>
<%= submit_tag "Cadastrar" %>
<%end%> 
```

和我的控制器，如果需要的话

```
class SessionsController < ApplicationController

  def new

  end
  def create
        @user = User.find_by_name(params[:name])
     if @user && @user.authenticate(params[:name],params[:password])
          session[:user_id] = @user.id
          session[:user_name] = @user.name
          flash[:note] = 'Voce esta logado.'
          redirect_to finances_url
     else
       flash[:note] = 'Falha no login.'
       render 'new'
     end
  end 
```

感谢您的帮助，我非常感谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-19T17:17:36.957

谢谢我解决了验证问题，并出现在 user_create 中，代码如下：

```
<% for erro in @user.errors.full_messages %>
    <%= erro %>
    <% end %> 
```

# linux - Linux 绑定中的“聚合器”和“绑定”有什么区别？

> ID：12027944
> 
> 赞同：0
> 
> 时间：2012-08-19T16:07:41.787
> 
> 标签：linux

最近，我正在查看 Linux 中的绑定代码。但我只是没看懂一些术语：bond、aggregator、slave 和 port。我认为'bond'和'aggregator'是同一个概念，一个bond有很多slave，当一个port被添加到一个bond上时，它被称为slave。虽然我看到有关函数 __get_next_agg 的评论：获取债券中的下一个聚合器。似乎一个债券可以有很多聚合器……谁能解释这些术语，谢谢！

# android - Onlistitemclick 不工作

> ID：12027945
> 
> 赞同：2
> 
> 时间：2012-08-19T16:07:52.413
> 
> 标签：android, arrays, listview

我正在将数组加载到列表视图中，当我单击列表项时，我想在同一活动中的文本视图中显示该项目。该列表当前正在加载，但单击某个项目时程序会崩溃。有什么想法为什么？

```
import java.util.ArrayList;
import android.app.ListActivity;
import android.content.res.Resources;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class WordList extends ListActivity {
    /**
     * @see android.app.Activity#onCreate(Bundle)
     * 
    */
    //public final static String TERM_EXTRA="com.myapp._word";
    //public final static String DEF_EXTRA="com.myapp._pic";

    TextView selection;
    ArrayList<String> words=new ArrayList<String>();

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        selection=(TextView)findViewById(R.id.selection);
        Resources res=getResources();
        String[] words = res.getStringArray(R.array.words);
        setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,words));
    }

    public void onListItemClick(ListView parent, View v, int position,long id) {
        selection.setText(words.get(position).toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:19:46.073

因为`words.get(position).toString()`如果您没有将任何对象附加到“words”，则返回 null，它是这样声明的 ArrayList：

```
ArrayList<String> words=new ArrayList<String>(); 
```

`"String[] words"`不是您在中使用的`onListItemClick`，而是`"ArrayList<String> words"`。

编辑：

注释 arraylist，并在 onCreate 之外定义“String[] words”。

```
//ArrayList<String> words=new ArrayList<String>();
String[] words; 
```

然后在你的 onListItemClick 中；

```
selection.setText(words[position]); 
```

你很高兴。

# hash - 使用 OpenSSL 计算文件的哈希值会根据块大小给出不同的结果

> ID：12027946
> 
> 赞同：1
> 
> 时间：2012-08-19T16:08:00.837
> 
> 标签：hash, openssl

我想用 openssl 生成文件的哈希值。

```
CFile file;
CFileException fileException;
file.open(filename, CFile::modeRead, &fileException);
file.SeekToBegin();
unsigned char buffer[1024];
SHA_CTX context;
SHA1_Init(&context);
while(unsigned int bytesRead = file.Read(buffer, sizeof(buffer)) > 0)
{
    SHA1_Update(&context, buffer, bytesRead);
}
unsigned char hash[SHA_DIGEST_LENGTH];
SHA1_Final(hash, &context); 
```

它似乎有效，但如果我更改块大小，我会在哈希中得到不同的结果。这里出了什么问题？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:19:17.613

这是问题所在：

`while(unsigned int bytesRead = file.Read(buffer, sizeof(buffer)) > 0)`

这可以作为：

`bytesRead = ( file.Read(buffer, sizeof(buffer)) > 0 )`

并不是

`(bytesRead = file.Read(buffer, sizeof(buffer))) > 0`.

比较的优先级高于分配。添加另一组括号将解决您的问题。请参阅[http://en.wikipedia.org/wiki/Order_of_operations#Programming_languages](http://en.wikipedia.org/wiki/Order_of_operations#Programming_languages)

# c++ - 有条件地使用 boost transform_iterator 到 std::transform

> ID：12027951
> 
> 赞同：1
> 
> 时间：2012-08-19T16:08:50.947
> 
> 标签：c++, boost, iterator

`_pimpl->_connections`是一个`std::map`所以它的元素是`std::pair<KeyType, gcl::SectionConnectionT*>`我想使用一个谓词`gcl::SectionConnectionT::NotConnectedTo(r)`来过滤掉不必要的值。但如果我使用

```
std::remove_copy_if(it_pair.first, it_pair.second, std::back_inserter(sectionConnections), gcl::SectionConnectionT::NotConnectedTo(r)); 
```

它尝试将 插入`pair`向量中。但是向量的类型是`<gcl::SectionConnectionT*>`一些谷歌搜索带我去的地方[`transform_iterator`](http://www.boost.org/doc/libs/1_42_0/libs/iterator/doc/transform_iterator.html#id3)，我无法理解如何理解。我是这样用的。但得到编译错误

```
std::pair<CollectionT::iterator, CollectionT::iterator> it_pair = _pimpl->_connections.equal_range(l);
std::vector<gcl::SectionConnectionT*> sectionConnections;
std::remove_copy_if(it_pair.first, it_pair.second, boost::make_transform_iterator(std::back_inserter(sectionConnections), util::shorthand::pair_second()), gcl::SectionConnectionT::NotConnectedTo(r)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T22:01:51.877

Boost.Iterator 库可能无法推断 的返回类型`until::shorthand::pair_second::operator()(CollectionT::value_type&) const`，因此返回`transform_iterator`的不是可写左值迭代器概念建模，因为它需要用于`std::remove_copy_if`（输出迭代器）的第三个参数。

但是，以下工作：

```
//#include <boost/lambda/bind.hpp>
//#include <boost/lambda/lambda.hpp>
//#include <boost/range/adaptor/map.hpp>
//#include <boost/range/algorithm/remove_copy_if.hpp>

//namespace gcl {
//struct SectionConnectionT {
//    bool NotConnectedTo(RType r) const;
//    // ...
//};
//}

boost::remove_copy_if(it_pair | boost::adaptors::map_values,
    std::back_inserter(sectionConnections),
    boost::lambda::bind(&gcl::SectionConnectionT::NotConnectedTo, boost::lambda::_1, r)); 
```

# android - RevokePermissionListener 无法解析为类型

> ID：12027952
> 
> 赞同：0
> 
> 时间：2012-08-19T16:08:51.477
> 
> 标签：android, facebook

为什么我的日食向我显示这个错误？我正在尝试为 android 实现 facebook APi，但它给了我上述错误，为什么？

他们在[文档](https://developers.facebook.com/docs/mobile/android/build/#token)中提到将其放置以进行注销。这是代码。

```
String method = "DELETE";
Bundle params = new Bundle();
/*
* this will revoke 'publish_stream' permission
* Note: If you don't specify a permission then this will de-authorize the application completely.
*/
params.putString("permission", "publish_stream");
mAsyncRunner.request("/me/permissions", params, method, new RevokePermissionListener(), null); 
```

`onComplete`我把它放在`mAsyncRunner.logout`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:04:58.113

您必须创建`RevokePermissionListener`实现的类`AsyncFacebookRunner.RequestListener()`。在同一文件中，添加以下代码：

```
public class RevokePermissionListener implements AsyncFacebookRunner.RequestListener {

    @Override
    public void onComplete(String response, Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onIOException(IOException e, Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onFileNotFoundException(FileNotFoundException e, Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onMalformedURLException(MalformedURLException e, Object state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onFacebookError(FacebookError e, Object state) {
        // TODO Auto-generated method stub

    }

} 
```

# android - 无法使用平台证书 (ICS) 签署 apk

> ID：12027954
> 
> 赞同：0
> 
> 时间：2012-08-19T16:09:12.540
> 
> 标签：android, android-4.0-ice-cream-sandwich

我尝试使用平台证书签署 Trebuchet 启动器，但之后无法安装：

```
 $ java -jar out/host/darwin-x86/framework/signapk.jar build/target/product/security/platform.x509.pem build/target/product/security/platform.pk8 out/target/product/crespo/system/app/Trebuchet.apk CapsuleLauncher.apk
    $ adb -e install -r CapsuleLauncher.apk
    1916 KB/s (7946887 bytes in 4.049s)
        pkg: /data/local/tmp/CapsuleLauncher.apk
    Failure [INSTALL_PARSE_FAILED_INCONSISTENT_CERTIFICATES] 
```

如果我不签名 - 它安装成功。怎么签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:25:04.567

`INSTALL_PARSE_FAILED_INCONSISTENT_CERTIFICATES`意味着您使用了错误的证书来签署您的应用程序。

仅当您为您知道证书的自定义固件 rom 构建应用程序时，使用平台证书签名才有效。如果您使用设备的标准固件，则它不起作用，因为制造商将其证书保密。

如果您不签名，该应用程序将不会获得任何系统权限，但仍会运行。

# c# - Linq 和实体框架更新问题

> ID：12027956
> 
> 赞同：0
> 
> 时间：2012-08-19T16:09:38.033
> 
> 标签：c#, asp.net, sql-server, linq, entity-framework

使用以下代码：

```
using (ICMSEntities db = new ICMSEntities())  
{  
    productObj.Sectors.Clear();  
    int[] selected_sectors = cblSectors.Items.Cast<ListItem>()  
        .Where(n => n.Selected).Select(n => Convert.ToInt32(n.Value)).ToArray();  
    for (int i = 0; i < selected_sectors.Length; i++)  
    {  
        int SectorID = selected_sectors[i];  
        Sector sectorObj = db.Sectors.SingleOrDefault(x => x.sector_id == SectorID);  
        productObj.Sectors.Add(sectorObj);  
        }  
    db.SaveChanges();  
    Response.Redirect("~/Products.aspx", true);  
} 
```

我正在尝试更新多对多关系表。每个部门可以有一组产品，每个产品可以有一组部门。尝试更新产品实体时，我将清除所有扇区，以防用户从`.Clear()`上面使用的复选框列表中选择其他可用扇区。然后从复选框列表中读取并更新。我没有更新记录，而是在具有新的自动递增 ID 的产品中获得了一个新的相同行。所以它正在执行插入而不是更新，我从未指定`.AddObject()`.

我在这里做错了什么？或者我应该如何正确实施？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:23:02.720

而不是这个：

```
Sector sectorObj = db.Sectors.SingleOrDefault(x => x.sector_id == SectorID); 
```

做这个：

```
Sector sectorObj = db.Sectors.Find(SectorID); 
```

* * *

[如果您不希望](http://www.ienablemuch.com/2011/08/entity-frameworks-nhibernate_02.html)您的代码与`.Find`.

```
public static class Helpers
{

    public static Ent LoadStub<Ent>(this DbContext db, object id) where Ent : class
    {
        string primaryKeyName = typeof(Ent).Name + "Id";
        return db.LoadStub<Ent>(primaryKeyName, id);
    }

    public static Ent LoadStub<Ent>(this DbContext db, string primaryKeyName, object id) where Ent: class
    {
        var cachedEnt = 
            db.ChangeTracker.Entries().Where(x => ObjectContext.GetObjectType(x.Entity.GetType()) == typeof(Ent)).SingleOrDefault(x =>
            {
                var entType = x.Entity.GetType();
                var value = entType.InvokeMember(primaryKeyName, System.Reflection.BindingFlags.GetProperty, null, x.Entity, new object[] { });

                return value.Equals(id);
            });

        if (cachedEnt != null)
        {
            return (Ent) cachedEnt.Entity;
        }
        else
        {
            Ent stub = (Ent) Activator.CreateInstance(typeof(Ent));

            typeof(Ent).InvokeMember(primaryKeyName, System.Reflection.BindingFlags.SetProperty, null, stub, new object[] { id });

            db.Entry(stub).State = EntityState.Unchanged;

            return stub;
        }

    }
} 
```

你的代码应该是这样的：

```
Sector sectorObj = db.LoadStub<Sector>(SectorID); 
```

示例用法：[http ://www.ienablemuch.com/2011/07/using-checkbox-list-on-aspnet-mvc-with_16.html](http://www.ienablemuch.com/2011/07/using-checkbox-list-on-aspnet-mvc-with_16.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:23:28.427

我不认为删除和重新创建是一个好主意。此外， using`Clear`不会从数据库中删除，只是从内存中删除。这是你必须做的：

```
using (ICMSEntities db = new ICMSEntities())  
{ 
    foreach (ListItem item in cblSectors.Items)
    {
        int SectorID = item.Convert.ToInt32(item.Value);
        if (item.Selected && !productObj.Sectors.Any(s => s.SectorID == SectorID))
        {
            Sector sectorObj = db.Sectors.Single(x => x.sector_id == SectorID);  
            productObj.Sectors.Add(sectorObj);  
        } 
        else if (!item.Selected && productObj.Sectors.Any(s => s.SectorID == SectorID))
        {
            var sector = productObj.Sectors.Single(s => s.SectorID == SectorID);
            productObj.Sectors.Remove(sector);
        }
    }
    db.SaveChanges();  
    Response.Redirect("~/Products.aspx", true);  
} 
```

# jquery - Wordpress 循环中的 Bx 滑块在 Chrome 中不起作用，但在 Firefox 中起作用

> ID：12027958
> 
> 赞同：0
> 
> 时间：2012-08-19T16:10:21.977
> 
> 标签：jquery, wordpress, bxslider

我基于 Wordpress 为朋友制作了一个页面。

基于[BX Slider](http://bxslider.com/)制作了一个滑块，该滑块从某个类别中吐出帖子并使其成为滑块。

有趣的是 - 它在 Firefox 中完美运行，但在 Chrome 中根本不起作用。无法真正弄清楚似乎是什么问题？

[链接到网页。](http://www.cloudpictures.se/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:05:40.673

@Fruxelot，我调查了这个问题，我在标记中发现了问题，您正在使用父 div 中的 span 元素创建 bx 滑块结构，即

```
<div id="slider1" class="latestposts">
   <span> Stuff 1 </span>
   <span> Stuff 2 </span>
   <span> Stuff 3 </span>
</div> 
```

例如，在嵌套元素中使用 div 而不是这个

```
<div id="slider1" class="latestposts">
   <div> Stuff 1 </div>
   <div> Stuff 2 </div>
   <div> Stuff 3 </div>
</div> 
```

它将解决您的问题。

# java - PHP限制仅输入数字+数字只能达到特殊数量

> ID：12027960
> 
> 赞同：-4
> 
> 时间：2012-08-19T16:10:27.813
> 
> 标签：java, php

好的，所以我在编码这个东西，我希望人们在`<input type='text'>`右边选择一个 1-100 的数字，所以我希望他们只能选择 1-100 内的一个数字，所以如果他们输入 101 或类似 300 它会回显错误，或者如果他们键入字母而不是数字，它也会回显错误。另外，我希望此代码使用 Java 或 PHP。什么都好。

如果有人能给我这个代码，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:18:46.140

不要使用文本输入。使用[HTML5 数字输入](http://diveintohtml5.info/forms.html#type-number)( [demo](http://diveintohtml5.info/examples/input-type-number-min-max-step.html) )：

```
<input type="number" min="1" max="100"/> 
```

确保在服务器端也验证用户的输入。

# objective-c - CAGradientLayer 类型——有什么意义？

> ID：12027964
> 
> 赞同：3
> 
> 时间：2012-08-19T16:11:06.767
> 
> 标签：objective-c, ios, cocoa, core-graphics, cagradientlayer

根据 iOS [CAGradientLayer 文档](https://developer.apple.com/library/prerelease/ios/#documentation/GraphicsImaging/Reference/CAGradientLayer_class/Reference/Reference.html#//apple_ref/doc/uid/TP40008320)，type 属性只有一个有效值 kCAGradientLayerAxial，它也恰好是默认值。这个属性的目的对我来说是个谜，因为我想在不覆盖 drawLayer: inContext 的情况下实现径向 CAGradientLayer，并希望找到类似于 kCAGradientLayerRadial 的东西。任何照明赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-19T17:27:19.947

它允许 Apple 稍后添加新类型的渐变，而不会破坏 API 与现有程序的兼容性。

# c# - 如何模拟 shift/ctrl/alt 键状态？

> ID：12027966
> 
> 赞同：3
> 
> 时间：2012-08-19T16:11:34.023
> 
> 标签：c#, javascript, keyboard, keypress

有谁知道我如何模拟 `shift`//键状态`ctrl`？`alt`

基本上我正在创建一个远程桌面应用程序，客户端使用 a`HTML5 canvas`和服务器端运行`C#`应用程序。服务器端应用程序捕获屏幕，发送它并模拟客户端发送的任何按键。

除了按键之外，我一切正常。客户端发送：

```
 kd; KEYCODE HERE 
```

当一个键被按下并且

```
ku; KEYCODE HERE 
```

当它被释放时（keyup）。我正在使用这段代码：

```
[System.Runtime.InteropServices.DllImport("user32.dll")]
static extern void keybd_event(byte bVk, byte bScan, uint dwFlags, int dwExtraInfo);
const int KEYEVENTF_EXTENDEDKEY = 0x1;
const int KEYEVENTF_KEYUP = 0x2;

// - - - - -

// Keyboard events
if (receivedData[0] == "kd")
{
    // Shift key pressed
    if (receivedData[1] == "16")
    {
        keybd_event((byte)Convert.ToInt32(Keys.LShiftKey), 0, KEYEVENTF_EXTENDEDKEY, 0);
        return;
    }

    keybd_event((byte)Convert.ToInt32(receivedData[1]), 0, KEYEVENTF_EXTENDEDKEY, 0);
}
if (receivedData[0] == "ku")
{
    // Shift key released
    if (receivedData[1] == "16")
    {
        keybd_event((byte)Convert.ToInt32(Keys.LShiftKey), 0, KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP, 0);
        return;
    }

    keybd_event((byte)Convert.ToInt32(receivedData[1]), 0, KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP, 0);
} 
```

普通键工作正常，但任何有状态的键都不能正常工作。左移收到的 javascript 键码是 16。有什么想法可以让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:13:43.903

我最终使用了[Windows 输入模拟器](http://inputsimulator.codeplex.com/)库。非常适合模拟按键和按键，包括 shift、ctrl 和 alt 键。

# javascript - 如何在 Firefox 中将画布扩展到整个视口？

> ID：12027972
> 
> 赞同：1
> 
> 时间：2012-08-19T16:12:18.220
> 
> 标签：javascript, firefox, canvas

我在此处托管了我的网站的静态测试版本：

[http://alexgolec.staticloud.com/](http://alexgolec.staticloud.com/)

但是当我在 Firefox 中启动它时，画布没有正确调整大小。我认为有问题的代码行在这里：

```
 var _docHeight = (document.height !== undefined) ? document.height : 
                      document.body.offsetHeight;
    var _docWidth = (document.width !== undefined) ? document.width : 
                     document.body.offsetWidth;

    ctx.canvas.width = _docWidth;
    ctx.canvas.height = _docHeight; 
```

这段代码在 WebKit 浏览器中可以正常工作，但 Gecko 似乎对它嗤之以鼻。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T16:27:25.857

页面看起来很棒。但我不认为你在 Chrome 上也做对了，因为调整大小后没有重新绘制背景。

您应该将事件侦听器附加到 onResize 事件，并`canvasMain()`从该处理程序调用以使用新的画布大小重新绘制每个事物。

关于大小问题，您应该使用`window.innerWidth`and `window.innerHeight`。因为`<body>`被打包到只有 320px 高度的内容，所以它不会填满整个页面。

# sql - 时区转换 - 从表中选择时区并在 TO_TIMESTAMP_TZ 函数中使用它

> ID：12027974
> 
> 赞同：0
> 
> 时间：2012-08-19T16:12:35.910
> 
> 标签：sql, oracle, oracle-sqldeveloper

我想学习时区转换我尝试了此代码进行时区转换

```
select 
    ( TO_TIMESTAMP_TZ 
         ( TO_CHAR
             ( sysdate, 'YYYY/MM/DD HH24:MI:SS' ) 
             || ' GMT' ,   'YYYY/MM/DD HH24:MI:SS TZR' 
         ) 
    AT TIME ZONE  DECODE
        (1,1,'US/PACIFIC',2,'EUROPE/LONDON',3,'ASIA/TOKYO',4,'ASIA/CALCUTTA'); 
```

但相反，如果我尝试从表中获取时区而不是使用解码语句，我会收到错误

```
select
    (TO_TIMESTAMP_TZ 
        ( TO_CHAR 
            ( sysdate, 'YYYY/MM/DD HH24:MI:SS' ) 
            || ' GMT' , 'YYYY/MM/DD HH24:MI:SS TZR' 
         ) 
    AT TIME ZONE 
        (select t_zone from table where region_code=1); 
```

你能帮我理解是什么问题吗。

我什至尝试过`new_time()`，但还是不行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:17:54.917

首先，您发布的所有查询都缺少`FROM`类似的子句`FROM dual;`，因此无论如何它们都会出错。以下是我的结果-

```
SQL> ALTER SESSION SET NLS_DATE_FORMAT='DD-MON-YYYY HH24:MI:SS';

Session altered.

SQL> select TO_TIMESTAMP_TZ (sysdate,'YYYY-MM-DD HH24.MI.SSXFF TZR') from dual;

TO_TIMESTAMP_TZ(SYSDATE,'YYYY-
---------------------------------------------------------------------------
20-AUG-20 12.13.15 PM -05:00

SQL> select from_tz(to_timestamp(sysdate,'DD-MON-YYYY HH24:MI:SS'), 'US/Eastern') 
at time zone 'Turkey' from dual;

FROM_TZ(TO_TIMESTAMP(SYSDATE,'
---------------------------------------------------------------------------
20-AUG-12 08.15.20 PM TURKEY

SQL> create table tzone (tm_zone varchar2(30));
Table created.

SQL> insert into tzone values('Turkey');

SQL> select * from tzone;

TM_ZONE
------------------------------
Turkey

SQL> select from_tz(to_timestamp(sysdate,'DD-MON-YYYY HH24:MI:SS'), 'US/Eastern') at time zone (select tm_zone from tzone) from dual;

FROM_TZ(TO_TIMESTAMP(SYSDATE,'
---------------------------------------------------------------------------
20-AUG-12 08.16.29 PM TURKEY 
```

# c++ - 带有字符串的奇怪 Qt 代码

> ID：12027977
> 
> 赞同：11
> 
> 时间：2012-08-19T16:12:51.880
> 
> 标签：c++, qt, qstring

我找到了我朋友的 Qt 代码，他在两个`QString`s 上使用了模运算符，如下所示：

```
QString result = oneString % twoString; 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-19T16:15:43.453

`QString`如[手册](http://qt-project.org/doc/qt-4.8/qstring.html)中所述，这只是连接 s 的另一种（更有效）方法

> QStringBuilder 使用表达式模板并重新实现 '%' 运算符，这样当您使用 '%' 而不是 '+' 进行字符串连接时，多个子字符串连接将被推迟，直到最终结果即将分配给 QString。此时，最终结果所需的内存量是已知的。然后调用内存分配器一次以获得所需的空间，并将子字符串一一复制到其中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-19T16:16:07.817

它是 Qt 特定的字符串构造方式。看看这个[页面](http://doc.qt.nokia.com/4.7-snapshot/qstring.html)。

> QStringBuilder 使用表达式模板并重新实现 '%' 运算符，这样当您使用 '%' 而不是 '+' 进行字符串连接时，多个子字符串连接将被推迟，直到最终结果即将分配给 QString。此时，最终结果所需的内存量是已知的。然后调用内存分配器一次以获得所需的空间，并将子字符串一一复制到其中。

# javascript - 单击特定日期后如何调用js函数？

> ID：12027978
> 
> 赞同：1
> 
> 时间：2012-08-19T16:13:00.903
> 
> 标签：javascript, jquery, jquery-ui

单击日期选择器中的特定日期后，如何调用 Javascript 函数？

我猜 onSelect 和 onClose 函数可以解决问题，但我似乎无法让事情正常进行。

提前致谢。

例如：

我想做的是根据在日期选择器中选择的日期在不同的文本框中显示年龄。我已经制作了执行此操作的 JS 函数，但我不知道在单击日期选择器中的日期后如何调用它。

这个 JS 函数根据给定的日期计算年龄。

```
// Calculates age based on birth date
function calAge() {
var now = new Date();
var bday = form1.elements['bday'].value;

bD = bday.split('/');
if (bD.length == 3) {
    born = new Date(bD[2], bD[1] * 1 - 1, bD[0]);
    years = Math.floor((now.getTime() - born.getTime()) / (365.25 * 24 * 60 * 60 * 1000));
    form1.elements['age'].value = (years - 100);
} 
```

}

这是日期选择器。我在调用 JS 函数时是对的吗？

```
$(".datepicker2")
    .datepicker({
        showOn: "button",
        buttonImage: "images/calendar.gif",
        buttonImageOnly: true,
        dateFormat: "dd/mm/y",
        changeMonth: true,
        changeYear: true,
        onSelect: calAge
    }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:23:01.570

当你初始化你的日期选择器时，你可以像这样定义一个 onSelect 函数：

```
$('#datepicker').datepicker({ onSelect: function(date) {alert(date);}}); 
```

这是一个简单的例子：

[http://jsfiddle.net/7jTNL/](http://jsfiddle.net/7jTNL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:22:45.240

将更改事件绑定到输入。

```
$("#theInput")    .datepicker({params...})
                  .change(function(e){
                       //what you want to happen when a date is changed.
                  }) 
```

# android - 如何创建带有菜单项的滑动抽屉？

> ID：12027980
> 
> 赞同：12
> 
> 时间：2012-08-19T16:13:07.263
> 
> 标签：android

如何像 YouTube 和 Facebook 应用一样创建水平滑动抽屉。

![在此处输入图像描述](../Images/79d3668f97c808209ce7b85f1a52b88c.png)

许多其他应用程序似乎使用相同的样式，所以我猜测这是默认 Androind UI 框架的一部分，但我似乎无法将它拼凑在一起。

[您可以在此处](http://www.android-app-patterns.com//category/navigation)查看更多示例。

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-19T16:18:00.350

这是一个滑动菜单，您可以通过编写自定义视图来实现。有很多很好的开源示例。我建议你使用[这个](https://github.com/jfeinstein10/SlidingMenu)。

您可以通过在布局中定义它来使用它：

```
<com.slidingmenu.lib.SlidingMenu
    xmlns:sliding="http://schemas.android.com/apk/res-auto"
    android:id="@+id/slidingmenulayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    sliding:viewAbove="@layout/YOUR_ABOVE_VIEW"
    sliding:viewBehind="@layout/YOUR_BEHIND_BEHIND"
    sliding:touchModeAbove="margin|fullscreen"
    sliding:touchModeBehind="margin|fullscreen"
    sliding:behindOffset="@dimen/YOUR_OFFSET"
    sliding:behindWidth="@dimen/YOUR_WIDTH"
    sliding:behindScrollScale="@dimen/YOUR_SCALE"
    sliding:shadowDrawable="@drawable/YOUR_SHADOW"
    sliding:shadowWidth="@dimen/YOUR_SHADOW_WIDTH" /> 
```

## 编辑：

Android 团队在 Google IO 2013 上引入了官方滑动模式。在[此处](http://developer.android.com/design/patterns/navigation-drawer.html)阅读有关它的所有信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T02:31:46.637

据我所知，它不是默认框架的一部分。这是我在 Android 文档[http://developer.android.com/design/patterns/actionbar.html](http://developer.android.com/design/patterns/actionbar.html)中唯一能找到它的地方，而且我搜索了很多。

到目前为止，这是我最喜欢的库[https://bitbucket.org/verdigo/drawer/](https://bitbucket.org/verdigo/drawer/)直截了当且易于使用。

最近 HoloEverywhere 库还添加了一个您可以使用的抽屉。这个我很感兴趣，因为我在大多数应用程序中都使用 HoloEverywhere，它看起来与 Foursquares 非常相似。 [https://github.com/Prototik/HoloEverywhere](https://github.com/Prototik/HoloEverywhere)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-08T15:26:11.723

```
How can I create a horizontal sliding drawer like the YouTube and Facebook app has. 
```

仅供参考：这些不是滑动抽屉。那是[导航抽屉](http://developer.android.com/design/patterns/navigation-drawer.html)。[您可以按照此示例项目](http://developer.android.com/training/implementing-navigation/nav-drawer.html#DrawerLayout)创建导航抽屉。

# php - 更新Mysql中的多行

> ID：12027982
> 
> 赞同：1
> 
> 时间：2012-08-19T16:13:12.957
> 
> 标签：php, mysql

我的数据库“帐户”中有一个 sql 表，其结构如下所示。

```
 ItemNo  CostPrice  SellingPrice  Discount(10%)  Price(INR)  
  100       $100      $150            $135         Rs.7425   
  101       $200      $250            $225         Rs.10395  
  102       $150      $200            $180         Rs.7920   
  103       $500      $550            $495         Rs.25245 
```

这里每一列都依赖于前一列。

```
SellingPrice = CostPrice + 50

Discount = SellingPrice + (0.1 * SellingPrice)

Price(INR) = SellingPrice * ($_Conversion_rate_to_Rs) 
```

我需要计算 SellingPrice 并在表中更新它。然后我计算折扣并更新表格然后我计算价格（INR）并更新表格。

我正在尝试以下代码，但它似乎不起作用。

```
$i = 0;
foreach($item_no as $item ){
mysql_query("UPDATE accounts SET SellingPrice = CostPrice + 50 WHERE item_no = '$item[$i]'") or die(mysql_error());
++$i;
} 
```

现在更新 SellingPrice 后，我需要计算折扣并更新数据库。

```
$i = 0;
foreach($item_no as $item ){
mysql_query("UPDATE accounts SET Discount = SellingPrice + (0.1 * SellingPrice) WHERE item_no = '$item[$i]'") or die(mysql_error());
++$i;
} 
```

等等..

我的疑问可能很简单，但我尝试了很多并找不到正确的解决方案。

我可以知道我的错误和正确的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:19:25.133

*编辑！*

我编辑多个字段的方式是使用自定义更新功能。该函数采用“字段”=>“新值”的关联数组。这是功能：

```
function update($table,$values,$conditions){

    $query = "UPDATE `" . $table . "` SET ";
    foreach($values as $key => $value){
        if($key == "password")
            $query .= "`password` = PASSWORD('" . $mysqli->real_escape_string($value) . "'),";
        else if(is_numeric($value))
            $query .= "`" . $mysqli->real_escape_string($key) . "` = " . $mysqli->real_escape_string($value) . ",";
        else
            $query .= "`" . $mysqli->real_escape_string($key) . "` = '" . sanitize($value) . "',";
    }
    $query = substr($query,0,-1);

    if(!is_string($conditions)){
        $conditionStr = "";
        foreach($conditions as $key => $value){

            if($key == "password")
                $conditionStr .= "`password` = PASSWORD('" . $mysqli->real_escape_string($value) . "') AND ";
            else if(is_numeric($value))
                $conditionStr .= "`" . $mysqli->real_escape_string($key) . "` = " . $mysqli->real_escape_string($value) . " AND ";
            else
                $conditionStr .= "`" . $mysqli->real_escape_string($key) . "` = '" . sanitize($value) . "' AND ";
        }
        $conditionStr .= substr($conditionStr,0,-4);
        $conditions = $conditionStr;
    }

    $query .= " WHERE " . $conditions . " ;";
    $mysqli->query($query);
} 
```

您可以这样使用它： update("theTable",array("username"=>"whateverTheNewNameIs"),array("userID"=>55));

这会更新 userID=55 并使用户名变得新。您可以扩展第二个数组以更新更多内容。

我认为您的更新和 where 子句存在问题

我会为你的新成本价格做一个变量，

```
$newSellingPrice = $item[$i]['sellingPrice'] + 50; 
```

在您的更新中，您可以使用 $newSellingPrice

然后在你的位置，你有一个错字，你没有使用 $ 来获取项目数组。

如果您使用方括号表示法，则需要保留查询字符串

```
"... WHERE item_no = " . $item[$i] . " ;"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T16:19:37.770

要回答您的问题，如果要更新表中的所有字段，则无需添加`WHERE`条件，只需使用：

```
UPDATE accounts SET SellingPrice = CostPrice + 50 
```

并且总共只运行一个查询，而不是每个项目一个查询。

**但是**，依赖于其他列的所有列实际上不需要是单独的列，使用只有 2 列的表并根据需要计算价格会好得多。现在您有很多重复的信息，因为成本价格和乘数是您真正需要存储的唯一值。

# directory - 如何复制名称中带有空格的目录

> ID：12027987
> 
> 赞同：29
> 
> 时间：2012-08-19T16:13:46.580
> 
> 标签：directory, spaces, robocopy

我正在尝试使用 robocopy 但由于目录名称中的空格而无法使其工作。
我正在尝试将 3 个目录：我的文档、我的音乐和我的图片复制到 'C:\test-backup' 但希望最终结果是
'C:\test-backup\My Documents'
'C:\test-backup \我的音乐'
'C:\test-backup\我的图片'

我的命令不起作用：
`robocopy C:\Users\Angie C:\test-backup "My Documents" /B /E /R:0 /CREATE /NP /TEE /XJ /LOG+:"CompleteBackupLog.txt"`

无论我做什么，它都不会发生。有人有什么建议或技巧吗？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2015-05-14T17:53:34.103

经过一些试验和错误并观察结果（换句话说，我破解了它），我让它工作了。

使用带空格的路径名需要引号。诀窍是在结束引号之前的路径名之后必须有一个空格......就像这样......

```
robocopy "C:\Source Path " "C:\Destination Path " /option1 /option2... 
```

这几乎看起来像一个错误，当然不是很直观。

托德·K。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-04-01T13:46:01.347

如果路径不包含尾随反斜杠，则无需在结束引号之前添加空格，因此以下命令应该可以工作：

```
robocopy "C:\Source Path" "C:\Destination Path" /option1 /option2... 
```

但是，以下将不起作用：

```
robocopy "C:\Source Path\" "C:\Destination Path\" /option1 /option2... 
```

这是由于[此处](http://ss64.com/nt/syntax-esc.html)描述的转义问题：

> \ 转义可能会导致包含尾随反斜杠的引用目录路径出现问题，因为行尾的右引号 " 将被转义 \"。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-19T16:37:36.683

分开`My Documents`是`C:\test-backup`怎么回事？为什么引号只在周围`My Documents`？

我假设这是一个错字，请尝试使用`robocopy C:\Users\Angie "C:\test-backup\My Documents" /B /E /R:0 /CREATE /NP /TEE /XJ /LOG+:"CompleteBackupLog.txt"`

**[编辑：]**由于文档指定的语法 ( `robocopy <Source> <Destination> [<File>[ ...]]`) 说*File*，它可能不适用于*Folders*。

你必须使用`robocopy "C:\Users\Angie\My Documents" "C:\test-backup\My Documents" /B /E /R:0 /CREATE /NP /TEE /XJ /LOG+:"CompleteBackupLog.txt"`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-09-18T01:43:14.420

robocopy 在解释源名称时存在错误。如果您在路径末尾包含一个反斜杠来描述一个文件夹，它会一直将源的字符串包含在该行的其余部分中。IE

robocopy "C:\back up\" %destination% /e 这里什么都不会转到目标字符串

robocopy "C:\back up" %destination% /e 但这有效

我可能错了，但我认为两者都应该起作用！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-19T16:25:08.930

```
robocopy "C:\Users\Angie\My Documents" "C:\test-backup\My Documents" /B /E /R:0 /CREATE /NP /TEE /XJ /LOG+:"CompleteBackupLog.txt"
robocopy "C:\Users\Angie\My Music" "C:\test-backup\My Music" /B /E /R:0 /CREATE /NP /TEE /XJ /LOG+:"CompleteBackupLog.txt"
robocopy "C:\Users\Angie\My Pictures" "C:\test-backup\My Pictures" /B /E /R:0 /CREATE /NP /TEE /XJ /LOG+:"CompleteBackupLog.txt" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-31T17:22:37.143

当您指定路径上的最后一个目录时，请删除最后一个 .

例如“\server\directory with space\directory with space”。

应该这样做。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-12-18T07:55:36.310

如果此文件夹是命令中的第一个文件夹，则它不能与文件夹名称中的空格一起使用，因此请用下划线替换文件夹名称中的空格。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2015-02-11T14:20:51.957

你应该只在路径之前写括号：`"c:\program files\`

# ffmpeg - Debian Squeeze 中的“未知编码器：libx264”错误

> ID：12027990
> 
> 赞同：1
> 
> 时间：2012-08-19T16:14:19.280
> 
> 标签：ffmpeg, debian, x264

[我按照此处所述](http://www.zoharbabin.com/build-and-install-ffmpeg-and-x264-on-debian-squeeze-the-dumb-guide)构建并安装了 FFMPEG 。

但是当我执行这个命令来运行视频时：

```
ffmpeg -i "source.mkv" -an -b 700k -r 25 -vcodec libx264 "output.mp4" 
```

我收到此错误：

```
unknow encoder : libx264 
```

我使用 Debian 挤压。我怎样才能解决这个问题？请帮忙

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:06:41.727

您的 ffmpeg 版本似乎是在没有 libx264 支持的情况下编译的。尝试 $ ffmpeg -codecs 查看所有支持的编解码器列表。

公平（我所有的挤压盒都是我不想安装ffmpeg的服务器），x264不是挤压的一部分。最简单的方法（无需将系统升级到 wheezy），就是从[backports](http://backports.debian.org/)安装更新的版本。

我同意 Kuf 的观点，这不是一个真正的编程问题，所以它应该去[serverfault](http://serverfault.com)或[超级用户](http://superuser.com)

# ios - iOS上的小背景图片使用什么元素

> ID：12027994
> 
> 赞同：0
> 
> 时间：2012-08-19T16:15:28.417
> 
> 标签：ios, uibutton, label, background-image

我应该为 iOS 应用程序中的背景图像使用什么 UI 元素？图片非常小（98*51），我需要在上面放一个小标签和两个按钮。我尝试使用标签（但找不到更改尺寸的位置，我无法仅使用鼠标将其更改为正确的标签）和 UIImageView。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:33:06.410

如果您使用的是界面生成器，那么使用具有适当尺寸的 UIImageView 应该没有问题，然后将标签和按钮放在它上面。您可以从右侧面板中的尺寸检查器访问任何元素的尺寸（图标看起来像一个小尺子）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:33:46.137

您尝试过的两种方式都应该有效。您的第一种方法听起来更容易实现，但您的第二种方法更灵活。

使用您的第一种方法，您可以使用[此答案中描述的技术将](https://stackoverflow.com/a/3037930/335858)图像放置在标签后面，通过设置整个标签的尺寸来设置它`label.frame = CGMakeRect(x, y, 98, 51)`。

路线`UIImageView`也应该相当简单。请记住将标签的背景设置为透明，[如本答案中所述](https://stackoverflow.com/a/2325813/335858)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T16:56:48.840

我不确定我是否完全理解你的问题，但如果你想要一个平铺的背景图像，简单的方法是使用这个：

```
[self.view setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imagedNamed:@"myImage.png"]]]; 
```

# java - system.in 的 BufferReader readline() 方法挂起

> ID：12027996
> 
> 赞同：-1
> 
> 时间：2012-08-19T16:15:41.503
> 
> 标签：java

我正在eclipse中执行一个简单的java应用程序。

示例代码：

```
 BufferedReader input = new BufferedReader( new InputStreamReader(System.in));
    String line;
    while((line = input.readLine()) != null && line.length() != 0) 
    {
    System.out.println("------"+line);
    } 
```

在上面的代码中，readline() 方法在读取我输入的最后一行时挂起。我经历了一些线程并理解它等待行尾。我不想在控制台输入的末尾给出任何 '\n' 或 '\r' 。那么如何在代码中处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:38:12.763

除非您按回车，否则代码如何知道您何时不输入其他内容？

这个问题没有解决方案。您需要重新考虑您的用例。