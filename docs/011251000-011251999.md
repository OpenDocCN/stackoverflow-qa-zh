# StackOverflow 问答 11251000-11251999

# c# - 使用c#在字符串或句子中查找直接对象

> ID：11251000
> 
> 赞同：4
> 
> 时间：2012-06-28T18:45:30.117
> 
> 标签：c#, string, grammar

有没有办法或者图书馆可以在句子中找到直接对象？

例如，给定句子：

```
Jack scored a touchdown. 
```

触地得分是直接对象。或者另一个例子。

```
I dislike vegetables. 
```

蔬菜是直接对象。

现在做到这一点的一种方法是找到特定的动词然后选择下一个单词，但当然这并不总是准确的，因为下一个单词可能是形容词、介词等。

那么有没有什么特别的方法可以通过编程方式找到句子中的直接宾语呢？或者甚至是间接宾语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:51:45.733

msdn中有一个语音识别库，可以让你创建语法和规则

[http://msdn.microsoft.com/en-us/library/hh361659.aspx](http://msdn.microsoft.com/en-us/library/hh361659.aspx)

也许你会在那里找到你需要的东西，我从未使用过那部分，但语音识别效果很好，我会假设语法创建和规则系统就是这样。

祝你好运

# android - Android单元测试：如何等待Activity更新UI

> ID：11251001
> 
> 赞同：2
> 
> 时间：2012-06-28T18:45:46.457
> 
> 标签：android, unit-testing, junit, android-testing

我正在尝试在 Activity 中测试我的 UI。但是，此 Activity 执行一些后台网络操作，并在响应更新时将其片段更新为我正在尝试测试的实际组件。

我的单元测试失败了，因为它试图在已经呈现到屏幕上的视图上断言NotNull。

我将如何向我的单元测试发出 Activity 已执行此后台操作并且一切都应该准备好进行设置和测试的信号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:43:19.067

在做了一些研究和更多的尝试之后，似乎有两种方法可以做到这一点。首先，您可以按照@yorkw 的建议，使用 sleep() 并尝试为所有事情计时。

我的直觉告诉我，这不是最好的主意。您可能会遇到很多问题。更好的解决方案是在编写应用程序时考虑测试。我看过一些关于单元测试的视频，这一次谷歌谈话很突出。[Clean Code Talks](http://www.youtube.com/watch?v=wEhu57pih5w)看完这篇文章，然后尝试为难以测试的代码编写测试，我对编写单元测试并将我的业务逻辑与实现/显示逻辑分离有了全新的认识。

因此，简单的答案是更好地实现您的应用程序以避免出现这些问题。

# jquery - 从函数中显示 JqueryUI 模态窗口时出错

> ID：11251003
> 
> 赞同：1
> 
> 时间：2012-06-28T18:45:58.430
> 
> 标签：jquery, jquery-ui

我确信有一个简单的解决方案，但到目前为止它一直在逃避我。我正在尝试使用 jqueryui 从函数中打开模式窗口，但失败并显示消息“对话框不是函数”。最终，我将使用通过 ajax 拉取的内容来填充模态，但我已将其剥离到最简单的部分以找出为什么我无法实例化模态窗口。我正在使用来自 google CDN 的 jquery 1.7.2 和 jqueryui 1.8.18。

```
<!-- as a link -->
<a href="javascript:view_log('1');">Log 1</a>

<!-- as a button -->
<input type="button" id="thebutton" value="View Log" />

<script type="text/javascript">

/* this works on page load */
var test1 = $(document.createElement('div'));
test1.dialog({ modal:true });
test1.html('Testing');

/* this also works (on page load) */
function displayModal(content) {
    var newDiv = $(document.createElement('div'));
    newDiv.dialog({ modal:true });
    newDiv.html(content);
}
displayModal('Testing by calling displayModal() function');

/* this fails with error "newDiv.dialog is not a function" */
function view_log(id) {
    displayModal('Log for id ' + id);
}

/* this also fails, same error ... */
$('#thebutton').bind('click', function() {
    displayModal('Testing again...');
});

</script> 
```

任何 jquery 专家可以指出我的错误？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:04:19.060

它对我来说很好。我唯一能想到的是你应该使用`$(document).ready(function() {});`

```
$(document).ready(function() {
    $('#thebutton').bind('click', function() {
        displayModal('Testing again...');
    });
}); 
```

[现场演示](http://jsfiddle.net/9rEcQ/2/)

# c# - WPF 在代码中查找嵌套的菜单项

> ID：11251005
> 
> 赞同：0
> 
> 时间：2012-06-28T18:46:06.393
> 
> 标签：c#, wpf, xaml, find

我有一个在 XAML 中定义的嵌套上下文菜单的图像（如下所示）。

我正在尝试使用 for 循环查找菜单并使用 IsChecked=false 取消选中它。

我的代码如下：

```
for (int i = 1; i <= 16; i++)
        {
            MenuItem theMenu = (MenuItem)this.FindName("beat" + i.ToString());
            theMenu.IsChecked = false;
        } 
```

以上不起作用并返回null。

我究竟做错了什么！

摘自 XAML

```
<Image x:Name="Options" Height="35" Source="Images/pad-options-button.png" Stretch="Fill" Width="47" Canvas.Left="740" Canvas.Top="293"
           MouseUp="Options_MouseUp">
        <Image.ContextMenu>
    <ContextMenu>
        <MenuItem Header="Beats">
            <MenuItem Name="beat1" Header="1" Click="MenuBeats_Click"/>
            <MenuItem Name="beat2" Header="2" Click="MenuBeats_Click"/>
            <MenuItem Name="beat3" Header="3" Click="MenuBeats_Click"/>
            <MenuItem Name="beat4" Header="4" Click="MenuBeats_Click"/>
            <MenuItem Name="beat5" Header="5" Click="MenuBeats_Click"/>
            <MenuItem Name="beat6" Header="6" Click="MenuBeats_Click"/>
            <MenuItem Name="beat7" Header="7" Click="MenuBeats_Click"/>
            <MenuItem Name="beat8" Header="8" Click="MenuBeats_Click"/>/>
            <MenuItem Name="beat9" Header="9" Click="MenuBeats_Click"/>
            <MenuItem Name="beat10" Header="10" Click="MenuBeats_Click"/>
            <MenuItem Name="beat11" Header="11" Click="MenuBeats_Click"/>
            <MenuItem Name="beat12" Header="12" Click="MenuBeats_Click"/>
            <MenuItem Name="beat13" Header="13" Click="MenuBeats_Click"/>
            <MenuItem Name="beat14" Header="14" Click="MenuBeats_Click"/>
            <MenuItem Name="beat15" Header="15" Click="MenuBeats_Click"/>
            <MenuItem Name="beat16" Header="16" Click="MenuBeats_Click"/>
        </MenuItem>
        <MenuItem Header="Beat Type">
            <MenuItem Name="Whole" Header="Whole" Click="MenuBeatType_Click"/>
            <MenuItem Name ="Half" Header="Half" Click="MenuBeatType_Click"/>
            <MenuItem Name ="Quarter" Header="Quarter" Click="MenuBeatType_Click"/>
            <MenuItem Name ="Eighth" Header="Eighth" Click="MenuBeatType_Click"/>
            <MenuItem Name ="Sixteenth" Header="Sixteenth" Click="MenuBeatType_Click"/>
        </MenuItem>
    </ContextMenu>
</Image.ContextMenu>
    </Image>
</Canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:10:17.827

另一种选择是从图像中获取上下文菜单。

```
var items = Options.ContextMenu.Items
foreach(MenuItem item in items)
{ 
    // do your work with the item 
} 
```

请注意，您将不得不处理子项目！您的箱子中只有 2 件物品

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:01:43.800

您的标记不正确。最后两个符号不应该存在：

```
<MenuItem Name="beat8" Header="8" Click="MenuBeats_Click"/>/> 
```

但是，您的示例非常适合我，但是带有意外项目：

> "/>"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:06:18.747

只是在代码后面的类的构造函数中写`NameScope.SetNameScope(contextMenu, NameScope.GetNameScope(this));`contextMenu 是图像上下文菜单的名称。实际上 ContextMenu 不是 Visual 树的一部分，因此它找不到名称。但是上面的代码行将在可视树范围内设置上下文菜单，因此会找到名称。希望这会有所帮助。

# jqgrid - jqGrid - 在编辑表单中设置选择值

> ID：11251007
> 
> 赞同：0
> 
> 时间：2012-06-28T18:46:11.530
> 
> 标签：jqgrid

我很难在编辑表单中设置选择框的值。例如，我有这样的 colModel 设置。

```
colModel:[
         {name:'communication_id', key: true, index:'communication_id', width:30},            
         {name:'communication_type_id', index:'communication_type_id', width:30},
         {name:'communication_type_select',index:'communication_type_select',hidden:true,width:150, editable:true,edittype:'select',formatter:'select',editrules: {edithidden:true},
                                    formoptions:{label:'Communication Type'},
                                    editoptions:{dataUrl:"working_data_url",
                                        buildSelect: function(json){                                                
                                            var response = $.parseJSON(json);

                                            var s = '<select>';

                                            $.each(response.results,function(i,com){
                                                s += ('<option value="' + com.communication_type_id + '">'+ com.communication_type_desc + '</option>');
                                            });

                                            return s + "</select>";

                                        },dataInit: function(elem){
                                            alert(temp);
                                            //alert($('#com_table_communication_type_id').val());
                                            //$(elem).val($('#com_table_communication_type_id').val());
                                        }}},
         {name:'communication_send_dt', index:'communication_send_dt', width:150, sortable:true, sorttype: 'date',
                                    firstsortorder: 'desc', datefmt:'m/d/Y', editable:true},                                         

                            editoptions: {recreateForm:true},
                            rowNum:10,
                            width:'100%',
                            rowList:[10,20,30],
                            pager: '#com_pager',
                            sortname: 'communication_send_dt',
                            viewrecords: true,
                            sortorder: "desc",
                            loadonce:true,
                            caption: "Communication",
                            jsonReader: {
                                    repeatitems : false,
                                    root: "results"
                            },
                            height: '100%',
                            onSelectRow: function(communication_id){

                                var comtype = $(this).getRowData(communication_id);
                                var temp = comtype['communication_type_id'];

                            }
                    });

                    grid.jqGrid('navGrid','#com_pager',{edit:true,add:false,del:false}); 
```

当我单击编辑按钮时，它会正确加载选择选项，但我在选择哪个选项时遇到问题。我希望将communication_type_id 中的值加载到communication_type_select 中，并且我尝试了不同的方法来实现这一点。基本上，如果communication_type_id 中的id 为2，那么我希望编辑表单中的选择框在加载编辑表单时也设置为2。对此有什么帮助吗？

更新 1：我现在主要通过使用 beforeShowForm 来工作，但现在我遇到了一件奇怪的事情。当我在 beforeShowForm 中有警报时，一切正常，但是当它被注释掉时，它就不起作用了！感谢您的帮助@Oleg！

```
grid.jqGrid('navGrid','#com_pager',{edit:true,add:false,del:false},
                            {closeOnEscape:true, recreateForm:true,beforeShowForm: function(formid){  
                                //alert("com type id = "+comidvar + " response id = "+comrespvar + " com form type id = "+comfrmtypevar);
                                $("#communication_type_select", formid).attr("value",comidvar);
                                $("#form_response_select", formid).attr("value",comrespvar);
                                $("#form_type_select", formid).attr("value", comfrmtypevar);
                            }}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T21:34:53.017

如果我理解你是正确的，你应该使用带有属性`ajaxSelectOptions`的 jqGrid 选项。`data`你可以定义一些额外的选项，比如`communication_type_id`你`data`可以通过使用返回哪个值`$("#list").jqGrid('getGridParam', 'selrow')`，然后`getCell`从`communication_type_id`列中获取值。有关详细信息，请参阅[答案](https://stackoverflow.com/a/9240517/315935)。

# ruby-on-rails - 验证用户！来自 Devise，在 spree (spree commerce) 中，用作 before_filter 时无法按预期工作

> ID：11251008
> 
> 赞同：0
> 
> 时间：2012-06-28T18:46:16.290
> 
> 标签：ruby-on-rails, devise, spree

我正在使用带有设计（2.1.2）的Rails（3.2.6）并且有一个控制器，我想确保在继续之前对用户进行身份验证。

乐观地，我试过...

```
module Spree
class MyAppController < Spree::BaseController

before_filter :authenticate_user!

...remainder of MyAppController code... 
```

并且我没有被重定向到登录或登录页面。我被重定向到“产品”页面，顶部有一条礼貌的消息说我需要登录或注册才能继续。

我*想要*发生的是我被重定向到注册/登录，当成功完成后，原始控制器路径恢复。

环顾四周，我读到了authenticate_user！from Devise 与 Spree 的交互方式导致无限重定向，因此 Spree 中的某些东西禁用了这一点，导致我在上面描述的蹩脚行为。

有没有人设法让这个工作或有一个好的解决方法的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:35:20.810

你尝试添加

```
before_filter :check_authorization 
```

到你的控制器？

我认为这可能会满足您的需求。

谢谢

灰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T11:44:04.593

我找到了解决方法，但我不是一个经验丰富的 Rails 开发人员，不知道这个解决方案有多合理。

我写了一个方法来进行过滤并使用它而不是authenticate_user！...

```
def require_authentication
  unless current_user 
    # setting this in the session allows devise to return us to
    # the original invocation path, once sign up / sign in is complete
    session[:user_return_to] = request.env['PATH_INFO']
    redirect_to new_user_session_url and return 
  end 
end 
```

# android - 横向和纵向安卓应用

> ID：11251016
> 
> 赞同：1
> 
> 时间：2012-06-28T18:46:51.420
> 
> 标签：android, android-layout, orientation

我用两个 xml 文件创建了两个文件夹 layout 和 layout-land，一个用于纵向，另一个用于横向。这两个 xmls 都可以工作，但这是问题所在。

我的第一个屏幕是登录屏幕，第二个屏幕是主屏幕。如果我以纵向登录，然后在主屏幕上转动我的手机横向。布局将横向转动，但它使用纵向 xml 作为主屏幕。

如果我从横向开始并稍后尝试移动到纵向，则会发生相同的错误。

似乎我为我的 main 所做的任何布局都是将用于应用程序其余部分的布局。有没有办法解决这个问题？

还。我已经在我的活动清单中使用了 android:configChanges="orientation" 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:54:21.537

使用`android:configChanges="orientation"`意味着您将处理代码中的方向变化。如果你想让它自动切换布局，你不应该在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:10:02.460

如果您正在使用，那么您可以在配置更改后`android:configChanges="orientation"`覆盖以扩展新布局。`onConfigurationChanged`

```
@Override
protected void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);                
    setContentView(...);
} 
```

确保您有充分的理由阻止在方向更改时重新创建 Activity ......最重要的是不要仅仅因为方向更改会使您的应用程序崩溃而这样做。自己处理配置更改会使使用替代资源变得更加困难，因为系统不会自动为您应用它们。当您必须避免由于配置更改而重新启动并且不建议用于大多数应用程序时，应将此技术视为最后的手段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T08:58:13.920

确保两个不同文件夹中的两个 xml 文件具有相同的名称。

# jquery - JQuery Isotope 插件不允许自定义 CSS 动画

> ID：11251022
> 
> 赞同：0
> 
> 时间：2012-06-28T18:47:35.330
> 
> 标签：jquery, jquery-isotope

我正在开发一个项目并使用 Isotope 库进行 jquery。在合并 Isotope 之前，我创建了一个基本的 css 类，其中包含一些代码来执行 css 转换以旋转元素。我使用 jquery 来应用该类 onclick 并触发转换。现在，当我尝试应用该类来触发同位素容器内元素的变换时，变换将不适用。我可以添加/删除其他类，但转换类没有效果。我可以说同位素中的某些东西不允许转换触发，我希望有人能够告诉我 A）它可能是什么和 B）我是否/如何关闭它（如果它是一个选项）

谢谢

# java - 如何在android中获取纬度和经度？

> ID：11251023
> 
> 赞同：3
> 
> 时间：2012-06-28T18:47:36.870
> 
> 标签：java, android, geolocation

android2.3.3如何获取当前经纬度？

我尝试关注[这个](https://stackoverflow.com/questions/2227292/how-to-get-latitude-and-longitude-of-the-mobiledevice-in-android?answertab=active#tab-top)，但我无法运行程序。

我的代码

```
 LatView = (TextView)findViewById(R.id.LatText);
    LngView = (TextView)findViewById(R.id.LngText);
    LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
    Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    double longitude = location.getLongitude();
    double latitude = location.getLatitude(); 
```

在 android manifest 我把这个。

```
<uses-permission android:name="android.permission.INTERNET" /> 
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T06:44:24.177

这是我在我的应用程序中找到设备当前位置的内容，它工作正常：

```
public class MyLocationActivity extends Activity implements LocationListener {
    private LocationManager mgr;
    private String best;
    public static double myLocationLatitude;
    public static double myLocationLongitude;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mgr = (LocationManager) getSystemService(LOCATION_SERVICE);

        dumpProviders();

        Criteria criteria = new Criteria();

        best = mgr.getBestProvider(criteria, true);
        Log.d("best provider", best);

        Location location = mgr.getLastKnownLocation(best);
        dumpLocation(location);

            //may be some intent here
    }

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        dumpLocation(location);

    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onPause() {

        super.onPause();
        mgr.removeUpdates(this);
    }

    @Override
    protected void onResume() {

        super.onResume();
        mgr.requestLocationUpdates(best, 15000, 1, this);
    }

    private void dumpLocation(Location l) {

        if (l == null) {

            myLocationLatitude = 0.0;
            myLocationLongitude = 0.0;
        } else {

            myLocationLatitude = l.getLatitude();
            myLocationLongitude = l.getLongitude();
        }
    }

    private void dumpProviders() {

        List<String> providers = mgr.getAllProviders();
        for (String p : providers) {

            dumpProviders(p);
        }
    }

    private void dumpProviders(String s) {

        LocationProvider info = mgr.getProvider(s);
        StringBuilder builder = new StringBuilder();
        builder.append("name: ").append(info.getName());
    }

} 
```

这里 MyLocationLatitude 和 MyLocationLongitude 给出了你需要的 lat 和 long 的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T18:50:27.607

您需要检查最后一个位置是否为空，如果是，则向 GPS 提供商询问新位置，如下所示：

```
public class Example extends Activity implements LocationListener {
    LocationManager mLocationManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        Location location = mLocationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if(location != null && location.getTime() > Calendar.getInstance().getTimeInMillis() - 2 * 60 * 1000) {
            // Do something with the recent location if it is less than two minutes old
        }
        else {
            // Request a new location if necessary
            mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
        }
    }

    public void onLocationChanged(Location location) {
        if (location != null) {
        // Do something withthe current location

        // If you only want one location update un-comment this line
        //mLocationManager.removeUpdates(this);
        }
    }

    public void onProviderDisabled(String arg0) {}
    public void onProviderEnabled(String arg0) {}
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {}
} 
```

# javascript - Extjs4.1.0中的动态加载

> ID：11251024
> 
> 赞同：2
> 
> 时间：2012-06-28T18:47:50.710
> 
> 标签：javascript, model-view-controller, dynamic, extjs4

我是 Extjs 的新手，我读过在 Extjs 4 中它利用类的动态加载，但我不太明白这个概念。extjs中的动态加载实际上是什么意思，是否意味着它将按需加载javascript文件。例如，如果我有 10 个不同的组件（比如说在卡片布局中）但在初始加载时只需要显示一个，那么在必须显示这些组件之前，不会加载其余 9 个组件的 javascript 文件？我尝试了 Pandora 应用程序（Extjs 4 版本），但我发现它在初始加载时将所有 JavaScript 文件预先加载到浏览器（甚至为未显示的组件加载了 JavaScript 文件）。如果是这种情况，那么动态加载解决的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:35:31.497

你答对了。如果您仔细阅读指南，尽管它说动态加载并不意味着在生产中使用。这意味着一次加载一个文件并不是最佳选择，但它确实对调试代码有很大帮助。它所做的另一件事是无需在要运行应用程序的页面的 html 中逐一列出所有文件。您不必为您正确的每个类创建脚本标签 - 相信我，使用 MVC 应用程序您可以正确处理很多类，每个类都在它自己的文件中。那么该怎么办？推荐的方法是使用 Sencha SDK 构建工具来连接和缩小所有类，关闭 Loader 并只包含一个文件。

说得通？

# javascript - javascript 检查并替换两个字符串

> ID：11251026
> 
> 赞同：0
> 
> 时间：2012-06-28T18:47:53.440
> 
> 标签：javascript, string, compare, indexof

我有两个字符串`str1`和`str2`. 检查它们并查看是否有任何一个字符串为空。

如果是，则将该 str 替换为另一个。

```
if(indexOf(str1) < -1 || indexOf(str2) < -1){
   str1 = str2;
 } 
```

这行得通吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T18:49:24.773

不，这行不通的原因有很多。不过，这将：

```
if(!str1)
    str1 = str2;
else if(!str2)
    str2 = str1; 
```

# bash - Bash 脚本错误

> ID：11251028
> 
> 赞同：0
> 
> 时间：2012-06-28T18:48:05.293
> 
> 标签：bash, mv

嘿伙计们，我在第二个嵌套的 else 周围遇到了一个错误，我认为这与将文件移动到名称中带有空格的文件夹有关，但我不确定，所以我尝试添加另一个嵌套的 if这将允许我重命名，但它也会引发关于格式化的错误？

我认为真正的问题是我嵌套 ifs 错误？

错误

```
/bin/y2m: line 16: syntax error near unexpected token `then'
/bin/y2m: line 16: `        if[ -z "$newname" ]; then' 
```

代码

```
#!/bin/bash

address=$1
newname=$2
regex='v=(.*)'
if [[ $address =~ $regex ]]; then
    video_id=${BASH_REMATCH[1]}
    video_id=$(echo $video_id | cut -d'&' -f1)

    if[ -z "$newname" ]; then
        video_title="$newname"
    else
        video_title="$(youtube-dl --get-title $address)"
    fi

    youtube-dl -o "$video_title".flv $address
    ffmpeg -i "$video_title".flv -acodec libmp3lame -ac 2 -ab 256k -vn -y "$video_title".mp3

        if [ -d "/media/SDHC CARD/Music/y2m" ]; then
            mv "$video_title".mp3 "/media/SDHC CARD/Music/y2m"
            echo "Moving to Phone Card"
        else
            mv "$video_title".mp3 ~/Music
            echo "Moving to Music Folder"
        fi

    rm "$video_title".flv
else
    echo "Sorry but you seemed to broken the interwebs."
fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:53:37.460

我忘了空格我`if[`应该是`if [`

我把它改成了这个

```
 #!/bin/bash
    # Youtube to MP3 Bash Script

    # CPR : Jd Daniel :: Ehime-ken
    # REQ : sudo apt-get install youtube-dl && youtube-dl -U
    # REQ : sudo apt-get install lame
    # REQ : ffmpeg [use: http://ubuntuforums.org/showpost.php?p=4907079&postcount=1]

    address=$1
    newname=$2
    regex='v=(.*)'

    if [[ $address =~ $regex ]]; then
            video_id=${BASH_REMATCH[1]}
            video_id=$(echo $video_id | cut -d'&' -f1)

            if [ -n "$newname" ]; then
                    video_title="$newname"
            else
                    video_title="$(youtube-dl --get-title $address)"
            fi

            youtube-dl -o "$video_title".flv $address
            ffmpeg -i "$video_title".flv -acodec libmp3lame -ac 2 -ab 256k -vn -y "$video_title".mp3

                    if [ -d "/media/SDHC CARD/Music/y2m" ]; then
                            cp "$video_title".mp3 ~/Music && mv "$video_title".mp3 "/media/SDHC CARD/Music/y2m"
                            echo "Saving to Phone"
                    else
                            mv "$video_title".mp3 ~/Music
                            echo "Saving to Local"
                    fi

            rm "$video_title".flv
    else
            echo "Sorry but you seemed to broken the interwebs."
    fi 
```

# windows - 从 MSI 文件中查找 GUID

> ID：11251034
> 
> 赞同：13
> 
> 时间：2012-06-28T18:48:29.667
> 
> 标签：windows, windows-installer, guid

如何在 Windows 中列出已安装程序的 GUID？或者，如果我有 MSI 文件，是否更容易找到 GUID？

我正在使用 Orca 浏览 MSI 文件，但不确定在哪里可以找到 GUID。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-29T12:02:59.303

Windows Installer 数据库的三个主要 GUID 是[Package Code](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370568.aspx)、[ProductCode](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370854.aspx)和[UpgradeCode](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372375.aspx)。第一个存储在摘要信息流中（Orca 中的查看菜单），其他存储在属性表中。（其他形式的数据库，例如合并模块和补丁，在类似的地方有类似的 GUID，例如合并模块的 GUID 或补丁代码 GUID——每个都与包代码存储相同。）

要在机器上找到它们，您可以查看经常使用 ProductCode 的 Uninstall 键。或者更好的是，如果您希望枚举机器上当前安装的内容，您可以调用[MsiEnumProducts](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370101.aspx)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-29T08:17:55.160

有几种方法可以**找到已安装软件包的产品**G **​​UID**。请**选择第 3 个选项**。

最常见的是：

1.  **使用 regedit.exe 在以下基本路径下**检查注册表。**搜索应用程序名称（或浏览每个子文件夹直到找到它）。找到它后，您可以将其传递给 msiexec.exe：**

 **```
- 32-BIT SECTION:

 HKLM\Software\Microsoft\Windows\CurrentVersion\Uninstall
 HKCU\Software\Microsoft\Windows\CurrentVersion\Uninstall (per user section) 
```

```
- 64-BIT SECTION:

 HKLM\Software\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall 
```

```
- MERGED SECTION (supposedly all of the above merged together, I have not verified):

 HKCR\Installer\Products 
```

2.  检查**%SystemRoot%\Installer**中本地**缓存的 MSI 包**。这是最初用于在您的计算机上安装产品的原始 MSI 的缓存版本。 ***   您将需要一个能够打开 MSI 文件的工具。以下是功能列表和比较：[使用什么安装产品？InstallShield、WiX、Wise、高级安装程序等](https://stackoverflow.com/questions/1544292/what-installation-product-to-use-installshield-wix-wise-advanced-installer/1546941#1546941)。
    *   MSI 是伪装的 MS SQL 数据库，您还应该能够使用任何兼容的 MS SQL 数据查看器工具打开它。
    *   [**Windows SDK**](http://en.wikipedia.org/wiki/Microsoft_Windows_SDK)中的免费 MSI 工具**“ [Orca](https://msdn.microsoft.com/en-us/library/aa370557(v=vs.85).aspx) ”**是这个简单数据检索任务的首选工具。它快速、小巧且可靠。[](http://en.wikipedia.org/wiki/Microsoft_Windows_SDK)
    ***   然后按照 Michael Uhrman 上面的回答中的建议，在摘要流中找到包代码，在属性表中找到升级和产品代码。包代码也可以从 Windows 资源管理器中的 MSI 文件的属性页中看到。**** 
*****   使用**Powershell**列出包信息。我发现这是最简单和最实用的选择。请参阅此答案以获取屏幕截图和示例：**[如何找到已安装的 MSI 设置的产品 G​​UID？](https://stackoverflow.com/questions/29937568/how-can-i-find-the-product-guid-of-an-installed-msi-setup/29937569)******

 ****如果您要卸载有问题的产品，请参阅此全面的卸载 MSI 答案：**[Uninstalling an MSI file from the command line without using msiexec](https://stackoverflow.com/questions/450027/uninstalling-an-msi-file-from-the-command-line-without-using-msiexec/1055933#1055933)**

如果您觉得使用**VBScript**而不是 Powershell 更舒服，请尝试 Phil Wilson 的回答：[如何找出已安装的产品 - 已安装较新的产品 MSI windows](https://stackoverflow.com/questions/28963089/how-to-find-out-which-products-are-installed-newer-product-are-already-install/28971679#28971679)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-08-28T08:39:31.487

如果您只想知道给定 MSI 包含的 ProductName 和 ProductCode (ProductId)，而无需安装该 MSI 并检查注册表，您可以使用 PowerShell 使用类似这样的函数查询 MSI 本身（灵感来自[http://www.scconfigmgr .com/2014/08/22/how-to-get-msi-file-information-with-powershell](http://www.scconfigmgr.com/2014/08/22/how-to-get-msi-file-information-with-powershell)）：

```
function Get-MSIProperties {
  param (
    [Parameter(Mandatory=$true)]
    [ValidateNotNullOrEmpty()]
    [System.IO.FileInfo] $path,

    [string[]] $properties = @('ProductCode', 'ProductVersion', 'ProductName', 'Manufacturer', 'ProductLanguage')
  )
  begin {
    $windowsInstaller = (New-Object -ComObject WindowsInstaller.Installer)
  }
  process {
    $table = @{}
    $msi = $windowsInstaller.GetType().InvokeMember('OpenDatabase', 'InvokeMethod', $null, $windowsInstaller, @($Path.FullName, 0))
    foreach ($property in $properties) {
      try {
        $view = $msi.GetType().InvokeMember('OpenView', 'InvokeMethod', $null, $msi, ("SELECT Value FROM Property WHERE Property = '$($property)'"))
        $view.GetType().InvokeMember('Execute', 'InvokeMethod', $null, $view, $null)
        $record = $view.GetType().InvokeMember('Fetch', 'InvokeMethod', $null, $view, $null)
        $table.add($property, $record.GetType().InvokeMember('StringData', 'GetProperty', $null, $record, 1))
      }
      catch {
        $table.add($property, $null)
      }
    }
    $msi.GetType().InvokeMember('Commit', 'InvokeMethod', $null, $msi, $null)
    $view.GetType().InvokeMember('Close', 'InvokeMethod', $null, $view, $null)
    $msi = $null
    $view = $null
    return $table
  }
  end {
    [System.Runtime.Interopservices.Marshal]::ReleaseComObject($windowsInstaller) | Out-Null
    [System.GC]::Collect()
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T02:04:47.127

通常（尽管不普遍）如果一个软件使用基于 MSI 的安装，则 GUID 可以在卸载条目中找到。它通常是键名或出现在 UninstallString 和/或 UninstallPath 值中。有时生活很轻松，并且有一个 ProductGuid 值。

卸载条目可以在这里找到：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall 
```

在 64 位版本的 Windows 上，有两个这样的密钥，一个用于 64 位软件，另一个用于 32 位软件：

```
HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\Windows\CurrentVersion\Uninstall 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-17T05:57:26.447

我的解决方案是我编写了一个小型控制台应用程序，它返回任何 MSI 文件的 ProductCode（名称作为程序参数传递）。我通过从 .msi 文件本身读取 guid 来做到这一点。基本上，我将该 msi 文件作为字符串打开并查找以“ProductCode”开头的文本，获取其索引并在该索引位置之前取 38 个字符。这是屏幕截图：[![截屏](../Images/b2b65c42746bd27b0282808dde8cd959.png)](https://i.stack.imgur.com/O972B.png)******

# sql - 从从查询返回表的函数中获取结果

> ID：11251040
> 
> 赞同：1
> 
> 时间：2012-06-28T18:48:52.693
> 
> 标签：sql, sql-server, tsql

我想从父结果的每一行的函数中获取结果集。这里是`table1`：

```
column
------
a1
a2
a3
a4
a5 
```

我想遍历 table1 并获取列中每个项目的函数结果。该函数返回一个表。

```
SELECT (SELECT * FROM functionReturnsTable(a.column))
FROM (SELECT column FROM table1) a 
```

我已经尝试了上面的查询但是我得到了错误

> 当不使用 EXISTS 引入子查询时，选择列表中只能指定一个表达式。

如何编写一个查询/函数来循环遍历 table1 并将每个项目的结果组合到一个表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:51:49.620

也许是这样的：

```
SELECT * FROM dbo.table1 AS a
CROSS APPLY dbo.functionReturnsTable(a.column) AS f; 
```

尽管您可能不会`SELECT *`在生产版本中使用，而且您可能总是使用模式前缀和语句终止符，对吧？:-)

另外，请停止将其视为“循环”...

# c# - C# PostMessage CTRL + V

> ID：11251042
> 
> 赞同：0
> 
> 时间：2012-06-28T18:49:00.773
> 
> 标签：c#, copy-paste, postmessage

我正在尝试在另一个表单上发送粘贴功能。我给那个窗口焦点，然后发送这个消息......

```
 PostMessage(WoWVar.WindowHandle, (uint)WM_KEYDOWN, ((IntPtr)VK_CONTROL), (IntPtr)0x1);
        PostMessage(WoWVar.WindowHandle, (uint)WM_KEYDOWN, ((IntPtr)0x56), (IntPtr)0x0);
        PostMessage(WoWVar.WindowHandle, (uint)WM_KEYUP, ((IntPtr)VK_CONTROL), (IntPtr)0x0); 
```

我使用了 Spy++ 并手动按下粘贴，我正在发送相同的数据。粘贴效果很好，但在所有内容之后都会留下一个尾随的“v”。因此，如果我粘贴的数据是“PastedData”，它将发送消息，并且看起来像“PastedDatav”。我不确定如何避免这种情况？

# putty - 使用 pscp 或其他工具将文件从 Linux 传输到 Windows

> ID：11251047
> 
> 赞同：3
> 
> 时间：2012-06-28T18:49:13.613
> 
> 标签：putty, pscp

**问题陈述 - 我想将一些文件从远程机器（linux）复制到我的 windows 机器。我知道我可以使用 pscp 做到这一点。**

我尝试在互联网上查找，我找到了几篇文章，但在这些文章中我无法理解，并且在将文件从 Linx box 复制到 Windows 时遇到了很多问题。

谁能在这里提供我一步一步的方法，以便我可以按照它来传输文件。这对我会有很大帮助。

我`cli.vip.host.com`使用 putty 连接到主机，即使用用户名`rkost`和密码 as-的 linux `password`。我想将文件`a.txt`从linux复制到windows。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-01-05T06:09:42.827

1.  从以下链接下载 PSCP

    [https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html)

2.  运行 PSCP

3.  进入命令提示符

4.  使用下面的代码

    ### 复制单个文件

    ```
    pscp user@host:remote_path/file_name host_path\file_name

    eg: pscp user1@192.168.1.10:/home/user2/a.txt c:\Desktop\a.txt 
    ```

    ### 复制文件夹中的所有文件

    ```
    pscp user@host:remote_path/* host_path\ 

    eg: pscp user1@192.168.1.10:/home/user2/* c:\Desktop\test\ 
    ```

    ### 复制文件夹中的所有文件和文件夹

    ```
    pscp -r user@host:remote_path/ host_path\

    eg: pscp -r user1@192.168.1.10:/home/user2/ c:\Desktop\test\ 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:11:36.823

对于这类问题，我一直使用 netcat。首先，在具有 ip IP_address 的机器上启动 netcat 作为服务器，然后从另一台机器发送文件。

```
nc -l -p <port-number> > out_file 
```

将它作为服务器启动为“监听”状态，并将您发送给它的内容保存在文件“out_file”中。（查看您的版本的手册页以获取更多参数。）

从另一台机器发送文件如下：

```
 < file_to_send nc IP_address 
```

（如果要发送整个目录，请使用 tar ）

我从未在 Windows 下使用过它（因为我是 linux 工程师）。但是你可以找到适用于 windows 的 nc，它的工作方式与在 linux 中相同......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T07:26:49.547

如果你想使用 pscp，你可以这样做：

```
pscp -pw password rkost@cli.vip.host.com:/path/to/file c:\path\ 
```

如果这不起作用，请尝试添加环境变量：

```
set PATH=C:\path\to\putty\directory;%PATH% 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-16T11:36:37.993

1.  确保您已连接到您的 vpn 服务器，（即 cli.vip.host.com）
2.  在您的 Windows 机器上使用以下命令

    `pscp -v rkost@remote_ip_addr:/path/to/file/a.txt c:/some_location/`

3.  您可以使用 -v 标志查看详细信息。

4.  如果您想将目录从远程 linux 机器复制到您的 windows，只需参考我在此 [PSCP 中的答案，将文件从 godaddy 复制到我的 windows 机器](https://stackoverflow.com/questions/10136326/pscp-copy-files-from-godaddy-to-my-windows-machine/41675353)

# javascript - 调整大小后 Google Map API 不会重新定位

> ID：11251049
> 
> 赞同：0
> 
> 时间：2012-06-28T18:49:19.947
> 
> 标签：javascript, api

因此，我在隐藏的 div 中嵌入了一个地图，当单击链接时，该分区会下降并显示出来，但是，它不会保持在我设置的 LatLng 的中心。我已经阅读了一些关于此的文章，他们说您必须在显示 div 后初始化地图，但我无法将其应用于我的代码。这是我当前的标头代码的样子。我应用于链接的类是“动作”，它包含的下拉分区的类称为“内容”。

[http://pastebin.com/wQc6RrSJ](http://pastebin.com/wQc6RrSJ)

对不起，如果我错过了什么。提前感谢您的帮助，Bc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:52:54.967

你可以尝试两件事：

触发地图的调整大小事件：

```
google.maps.event.trigger(map, 'resize') 
```

如果这不起作用，只需在调整 div 大小后再次调用 setCenter 方法。

# c# - 将 UTF 8 流转换为 UTF 16 编码

> ID：11251053
> 
> 赞同：-1
> 
> 时间：2012-06-28T18:49:28.140
> 
> 标签：c#, utf-8, utf-16

我得到一个 UTF8 格式的流，但我想得到 UTF16 格式的流，因为我在 C# 中得到了一些不受支持的国际字符。我如何实现这一目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:39:25.580

如果您获得不受支持的国际字符，您可能想要使用的编码**不是** `UTF16`：`iso-8859-1`

它正确编码字符，例如：æ、ø、å

因此，当您声明您`StreamReader`想要设置要使用的编码时：

```
var sReader = new StreamReader(hResponse.GetResponseStream,
                               Encoding.GetEncoding("ISO-8859-1")); 
```

希望这可以帮助。

# python - Jython 比 Python 快吗？

> ID：11251054
> 
> 赞同：6
> 
> 时间：2012-06-28T18:49:33.910
> 
> 标签：python, serial-port, jython

我正在尝试获取一个通过 RS232 发送十六进制的小程序。从我所见，Python 是一种非常好的语言。

3 年前，我在高中一年级的时候在 into to compsci 课程中学到了它，语法非常棒。这很像伪代码。

然而，从大一开始，我就一直在使用 Java、Objective-C（上帝保佑我可怜的灵魂）和 C#。

无论如何，我想使用 Python 来学习如何使用串行通信。现在我再次查看它，我“发现”了 Jython，它看起来是 python，但它使用 Java 运行时（对吗？）

使用 Jython 这样的东西而不是旧的 Python 会更快乐吗？或者对于像通过串行端口发送十六进制这样的“小”任务，我不会注意到有什么不同吗？

如果您要否决我的问题，请至少告诉我为什么？ - 谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T20:27:56.897

对于我的一个项目，我决定使用项目的最内层循环对 Jython、CPython 和 Pypy 进行基准测试。Jython 比使用 Cython 的 CPython 慢一点，但比未增强的 CPython 快。一般来说，Jython 对于长进程来说速度相当快，但需要一段时间才能开始。

如果您想使用 Jython，请继续使用 Jython。Python != CPython 了。

Here's the comparison _for_one_microbenchmark_: [http://stromberg.dnsalias.org/~strombrg/backshift/documentation/performance/index.html](http://stromberg.dnsalias.org/~strombrg/backshift/documentation/performance/index.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T19:39:47.217

就像你说的，Jython 是在 JVM 之上实现的 Python，请参阅[Jython](http://en.wikipedia.org/wiki/Jython) 据我所知，它通常比 CPython 慢（这就是你所说的老式 Python）。

Jython 的真正优势在于它可以导入和使用任何 Java 类（同样适用于 .NET 和 IronPython）。

# informix - Informix 错误：发生了语法错误。错误代码：-201

> ID：11251060
> 
> 赞同：1
> 
> 时间：2012-06-28T18:50:04.007
> 
> 标签：informix

我的 SQL 代码中的唯一语句是

```
DEFINE p_starttime DATETIME YEAR TO SECOND; 
```

我从 Informix 10.5 收到此错误：错误：发生语法错误。错误代码：-201

查询 = DEFINE p_starttime DATETIME YEAR TO SECOND

有人知道为什么会发生这种情况吗？这是一个如此简单的声明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T21:35:11.550

它不是有效的 SQL，就这么简单。`DEFINE`不是您可以在查询中使用的关键字。它是存储过程语言或 SPL 语法的一部分，即：

```
CREATE FUNCTION foo();
    DEFINE p_starttime DATETIME YEAR TO SECOND;
    -- do stuff
    RETURN p_starttime;
END FUNCTION; 
```

# android - Android 片段丢失日期

> ID：11251062
> 
> 赞同：1
> 
> 时间：2012-06-28T18:50:17.280
> 
> 标签：android, android-fragments, android-viewpager

嗨！我在我的 Android 应用程序中使用带有 Fragmenst 的 ViewPager。片段正在工作，但会丢失显示的数据。所以在第一次调用我的视图适配器时，我可以将数据从片段 1 和 2 设置到线性布局，片段 3 不可用。所以我将数据放在片段 1 和 2 上。当我现在将片段从 1 切换到 3 时，第一个片段会丢失数据并变为空白。如何修复数据以显示它一直显示？如果要动态创建信息而不是在 xml 文件中。我希望你能理解我并能帮助我。

```
public class PageAdapter extends FragmentStatePagerAdapter {
private int num_pages;
private String[] titles;

public PageAdapter(FragmentManager fm) {
    super(fm);
    // TODO Auto-generated constructor stub
}

@Override
public Fragment getItem(int pos) {
    PageFragment f = new PageFragment(pos);
    return f;
}       

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return num_pages;
}

@Override
public CharSequence getPageTitle(int position){
    return titles[position];        
}

public void set_num_pages(int num){
    num_pages=num;
}

public void set_titles(String[] a_titles){
    titles=a_titles;
} 
```

}

下一节课：

```
public class PageFragment extends Fragment {
private int fragmentNR;

public PageFragment(){}

public PageFragment(int nr) {
    this.fragmentNR = nr;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View v = new View(getActivity());
    if (fragmentNR == 0)
        v = inflater.inflate(R.layout.info_1, container, false);
    else if (fragmentNR == 1)
        v = inflater.inflate(R.layout.info_2, container, false);
    else if (fragmentNR == 2)
        v = inflater.inflate(R.layout.info_3, container, false);
    return v;
} 
```

}

下一节课：

```
public class MannschaftInfos extends FragmentActivity {
private String mannschaftInfos;
private int mannschaftID;
private int anzahl;
private String[] titel = new String[3];

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // set the callback listener, to receive a message when an ad was loaded
    mannschaftID = getIntent().getExtras().getInt("id");
    titel[0]=(String) this.getText(R.string.Info);
    titel[1]=(String) this.getText(R.string.aufstellung);
    titel[2]=(String) this.getText(R.string.miStatistik);
    anzahl=3;
    new AbrufMannschaftInfo(this).laden(mannschaftID);
    AbrufMannschaftInfo.setMannschaftListesListener(new Datenlistener());
}

private class Datenlistener implements MannschaftInfosListener {

    public void mannschaftInfosListenerrueck(String rueck) {
        setContentView(R.layout.info_mannschaft);
        PageAdapter mPageAdapter = new PageAdapter(getSupportFragmentManager());
        ViewPager mViewPager = (ViewPager) findViewById(R.id.viewpager);
        mPageAdapter.set_num_pages(anzahl);
        mPageAdapter.set_titles(titel);
        mViewPager.setAdapter(mPageAdapter);
        mannschaftInfos=rueck;
        LinearLayout llf1 = (LinearLayout) findViewById(R.id.ll_fragment1);
        llf1.removeAllViews();
        llf1.setPadding(5, 5, 5, 5);
        llf1.setOrientation(LinearLayout.VERTICAL);

        LinearLayout llf2 = (LinearLayout) findViewById(R.id.ll_fragment2);
        llf2.removeAllViews();
        llf2.setPadding(5, 5, 5, 5);
        llf2.setOrientation(LinearLayout.VERTICAL);

        LinearLayout llf3 = (LinearLayout) findViewById(R.id.ll_fragment3);
        llf3.removeAllViews();
        llf3.setPadding(5, 5, 5, 5);
        llf3.setOrientation(LinearLayout.VERTICAL);

        View ruler_1 = new View(MannschaftInfos.this); ruler_1.setBackgroundColor(Color.parseColor("#FFFFFF"));
        View ruler_2 = new View(MannschaftInfos.this); ruler_2.setBackgroundColor(Color.parseColor("#FFFFFF"));
        View ruler_3 = new View(MannschaftInfos.this); ruler_3.setBackgroundColor(Color.parseColor("#FFFFFF"));
        View ruler_4 = new View(MannschaftInfos.this); ruler_4.setBackgroundColor(Color.parseColor("#FFFFFF"));

        MannschaftInfosAufbereiten mInfos = new MannschaftInfosAufbereiten(mannschaftInfos);
        mInfos.show_wappen(llf1, MannschaftInfos.this);
        llf1.addView(ruler_1,new ViewGroup.LayoutParams( ViewGroup.LayoutParams.FILL_PARENT, 3));
        mInfos.show_stadion(llf1, MannschaftInfos.this);
        llf1.addView(ruler_2,new ViewGroup.LayoutParams( ViewGroup.LayoutParams.FILL_PARENT, 3));
        mInfos.show_ligen(llf1, MannschaftInfos.this);

        mInfos.show_stat(llf2, MannschaftInfos.this);
    }
} 
```

}

# c++ - 字符串运算符 += 有时在 string::resize() 之后不起作用

> ID：11251063
> 
> 赞同：0
> 
> 时间：2012-06-28T18:50:20.850
> 
> 标签：c++, stl

假设：

```
std::string ToShow,NumStr; 
```

以下显示“这是 19 ch00”：

```
ToShow = "This is nineteen ch";
ToShow.resize(ToShow.length()+0);
NumStr = "00";
ToShow += NumStr;
mvaddstr(15,0,ToShow.c_str()); 
```

以下显示“这是 19 ch”：

```
ToShow = "This is nineteen ch";
ToShow.resize(ToShow.length()+1);
NumStr = "0";
ToShow += NumStr;
mvaddstr(16,0,ToShow.c_str()); 
```

在第二种情况下，operator+= 没有将字符串“0”添加到 ToShow 的末尾。有谁知道为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T18:55:13.560

我的猜测是：

您没有指定要调整大小的值，因此在`ToShow.Resize(ToShow.length()+1)`您的字符串如下所示之后：

```
"This is nineteen ch\0" 
```

之后`+= NumStr`：

```
"This is nineteen ch\00" 
```

在调用 c_str 之后，它被修剪为第一个`\0`，看起来像：

```
"This is nineteen ch" 
```

（C 字符串以 null 结尾，std::strings 不是）

试着打电话`.resize(someLength, ' ')`。

# android - 如何删除arraylist项目然后更新listview

> ID：11251065
> 
> 赞同：0
> 
> 时间：2012-06-28T18:50:28.123
> 
> 标签：android, listview, android-listview

```
ListView listView;
Activity activity;
public ArrayList<Tasks> tasks;
View v;

public TaskAdapter(Activity activity, ArrayList<Tasks> tasks)
{
    super(activity, R.layout.presenterlayout, tasks);
    this.activity = activity;
    this.tasks = tasks;
}

static class ViewHolder {
    public TextView taskTitleTextView;
    public TextView taskDescriptionTextView;
    public TextView taskDueTimeTextView;
    public CheckBox checkBox;
}

public View getView(final int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;
    v = convertView;
    if (v == null) {
        LayoutInflater inflator = activity.getLayoutInflater();
        v = inflator.inflate(R.layout.presenterlayout, null, false);
        listView = (ListView) v.findViewById(R.id.listView);
        holder = new ViewHolder();
        holder.taskTitleTextView = (TextView)      v.findViewById(R.id.taskTitleTextView);
        holder.taskDescriptionTextView = (TextView) v.findViewById(R.id.taskDescriptionTextView);
        holder.taskDueTimeTextView = (TextView) v.findViewById(R.id.taskDueTimeTextView);
        holder.checkBox = (CheckBox) v.findViewById(R.id.checkBox);
        holder.taskTitleTextView.setText(tasks.get(position).getTasksTitleString());
        holder.taskDescriptionTextView.setText(tasks.get(position).getTasksDescriptionString());
        holder.taskDueTimeTextView.setText(tasks.get(position).getTasksDueTimeString());
        holder.checkBox.setId(position);
        holder.checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if(holder.checkBox.isChecked())
                {
                    System.out.println("postion: " + position);
                    if(tasks.get(position).isTasksCompleted().equals("true"))
                    {
                        tasks.get(position).setTasksCompleted("false");                         
                    }
                    else if(tasks.get(position).isTasksCompleted().equals("false"))
                    {
                        tasks.get(position).setTasksCompleted("true");                          
                    }
                    updateThisTask(tasks.get(position));
                    tasks.remove(position);
                    notifyDataSetChanged();
                }
            }
        });
    }
    else {
        v = convertView;
    }
    return v;
}

private void updateThisTask(Tasks tasks) {
    DBAdapter dbAdapter = new DBAdapter(getContext());
    int id = dbAdapter.getID(tasks);
    dbAdapter.updateTask(tasks, id);
}

} 
```

我想从数组列表中删除项目。如您所见，我正在使用复选框。第一次单击复选框时，会删除正确的项目。如果我第二次单击该复选框，应用程序由于索引超出范围而崩溃。如何从名为 tasks 的数组列表中删除一个项目并更新列表视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T19:12:45.310

从数组中删除一个项目`tasks`后，之后的所有项目都会获得一个新索引，因此`position`您保存在持有者中并传递给的所有值`OnCheckedChangeListener`都是错误的。如果你想这样做，你不能依赖使用数组中的位置作为查找条目的方式。您需要使用对象本身并搜索数组以找到匹配的对象。使用类似的东西

```
int arrayIndexOfThisTask = tasks.indexOf(objectThatIsInTheArray); 
```

**编辑：添加代码示例：**

试试这个：

```
public View getView(int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;
    v = convertView;
    if (v == null) {
        LayoutInflater inflator = activity.getLayoutInflater();
        v = inflator.inflate(R.layout.presenterlayout, null, false);
        listView = (ListView) v.findViewById(R.id.listView);
        holder = new ViewHolder();
        v.setTag(holder); // Attach the holder to the view so we can find it again
        holder.taskTitleTextView = (TextView)      v.findViewById(R.id.taskTitleTextView);
        holder.taskDescriptionTextView = (TextView) v.findViewById(R.id.taskDescriptionTextView);
        holder.taskDueTimeTextView = (TextView) v.findViewById(R.id.taskDueTimeTextView);
        holder.checkBox = (CheckBox) v.findViewById(R.id.checkBox);
    } else {
        // Get the ViewHolder from the recycled view
        holder = (ViewHolder)v.getTag();
    }
    // Get the task at this position in the array
    final Task task = tasks.get(position);

    holder.taskTitleTextView.setText(task.getTasksTitleString());
    holder.taskDescriptionTextView.setText(task.getTasksDescriptionString());
    holder.taskDueTimeTextView.setText(task.getTasksDueTimeString());
    holder.checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if(holder.checkBox.isChecked())
            {
                // Try to find the position in the array for this object (it may already have been removed)
                int position = tasks.indexOf(task);
                System.out.println("postion: " + position);
                // If this object is no longer in the array, just ignore this action
                if (position >= 0) {
                    if(tasks.get(position).isTasksCompleted().equals("true"))
                    {
                        tasks.get(position).setTasksCompleted("false");                         
                    }
                    else if(tasks.get(position).isTasksCompleted().equals("false"))
                    {
                        tasks.get(position).setTasksCompleted("true");                          
                    }
                    updateThisTask(tasks.get(position));
                    tasks.remove(position);
                    notifyDataSetChanged();
                }
            }
        }
    });
    return v;
} 
```

我可能没有完全正确，但你应该明白。

您的代码实际上有很多问题：

1.  您没有`ViewHolder`正确使用该模式。您从未通过 using将其附加`ViewHolder`到`View`自身，`setTag()`并且您从未`ViewHolder`在.`View``convertView`
2.  如果`convertView`是非空的，你只是返回它而不用它做任何事情。这是错误的，因为适配器会以任何它想要的方式回收视图，并且它可能会`View`从位置 6 传递给您并要求`View`位置 1。在这种情况下，您将刚刚返回`View`位置 6（这是不正确的）。
3.  我已经将实际`Task`对象传递给`onCheckChanged()`方法而不是传递位置，并且我已经习惯于`indexOf()`获取该对象在数组中的当前位置。

我希望这是有帮助的。

# vb.net - VB.net 多线程 webclient 循环

> ID：11251067
> 
> 赞同：0
> 
> 时间：2012-06-28T18:50:36.270
> 
> 标签：vb.net, multithreading, webclient

我有一个简单的程序来检查网页的字符串，例如：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim urls() As String = TextBox1.Lines()
    Dim links() As String = TextBox2.Lines()
    For Each url As String In urls
        CheckForLinks(url, links)
    Next

End Sub
Private Sub CheckForLinks(ByVal url As String, ByVal links() As String)
    Dim wc As New WebClient()
    Dim source As String = wc.DownloadString(url)
    'MessageBox.Show(source)
    For Each link As String In links
        If (source.IndexOf(link) <> -1) Then
            TextBox3.AppendText("url: " + url + " link: " + link + vbCrLf)
            Exit For
        Else
            TextBox3.AppendText("url: " + url + " link: " + "NOT FOUND" + vbCrLf)
        End If
    Next

End Sub 
```

它工作正常，但速度很慢，因为它一次检查一个网页。

我意识到我可以在 button1_click 子中使用 parallel.for each，但我担心它可能会生成大量线程并使 Web 连接过载。

我希望能够设置它使用的确切线程数，但我不确定从哪里开始。例如，我如何将每个 url 分配给线程等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:54:36.400

好吧，您当然可以使用[此重载](http://msdn.microsoft.com/en-us/library/dd782721.aspx)`Parallel.ForEach`并指定最大并行化程度，您可以在其中指定.[`ParallelOptions`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.aspx)

请注意，您*不应该*在您的点击处理程序中执行此操作 - 您的 UI 将阻塞，直到它全部完成。您要么想`Parallel.ForEach`在新线程中执行，要么开始新任务（使用`Task.Factory.StartNew`）并依赖其中的并行度限制。（或者为此目的创建一个自定义任务工厂。我相信 TPL 文档中有相关文档。）

同样，您的`CheckForLinks`方法*不得*尝试在非 UI 线程中更新 UI。对于 WinForms，您可以使用`Control.Invoke`返回到 UI 线程 - 或者如果您正在使用任务，您可以添加一个延续 ( `Task.ContinueWith`) 并指定一个绑定到 UI 同步上下文的任务调度程序。

坦率地说，在*控制台*应用程序中执行此操作会简单得多 - 只需使用就`Parallel.ForEach`可以了 :)

# jquery - 我的 jQuery 对话框按钮如何在后面执行我的代码？

> ID：11251070
> 
> 赞同：0
> 
> 时间：2012-06-28T18:50:48.427
> 
> 标签：jquery, asp.net, dialog, jquery-ui-dialog, server-side

`enter code here`我的 jquery ui 对话框包含一个 iframe，并有两个按钮选项，应用和关闭。这是我的 javascript 生成的：

```
$(function () {
    $(".btn").click(function() {
        var $this = $(this);
        $('<iframe id="PDFDialog"  frameborder="0" src="' + this.href + '" />').dialog({
            title: ($this.attr('title')) ? $this.attr('title') : 'External Site',
            autoOpen: true,
            width: 700,
            height: 600,
            modal: true,
            resizable: true,
            buttons: {
                Apply: function () {
                    $("#<%= applyHiddenBtn%>").click();                        
                    $(this).dialog("close");
                },
                Close: function () {
                    $(this).dialog("close");
                }
            }
        }).width(650).height(550);
        return false;
    });
}); 
```

我不确定如何执行我为对话框按钮“应用”准备的代码。作为尝试`<asp:Button runat="server" ID="applyHiddenBtn" OnClick="applyHiddenBtn_Click"/>`，我尝试同时触发另一个服务器按钮。

目标是触发这个：

```
Sub applyHiddenBtn_Click(sender As Object, e As EventArgs)
    lblTest1.Text = "HelloWorld!!!1!"
End Sub 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:55:01.343

以下将对执行`POST`您的处理程序的服务器执行`applyHiddenBtn`：

```
__doPostBack('applyHiddenBtn', ''); 
```

* * *

[http://weblogs.asp.net/yousefjadallah/archive/2010/06/27/insure-that-dopostback-function-implemented-on-the-page.aspx](http://weblogs.asp.net/yousefjadallah/archive/2010/06/27/insure-that-dopostback-function-implemented-on-the-page.aspx)

# drag-and-drop - 有没有人使用带有更新的拖动功能 jquery.event.drag-2.2.js 的 SlickGrid？

> ID：11251071
> 
> 赞同：0
> 
> 时间：2012-06-28T18:50:54.853
> 
> 标签：drag-and-drop, slickgrid

我从[threedubmedia网站](http://threedubmedia.com/code/event/drag#)上读到“这个插件的先前版本允许这个方法被参数重载，以便在一次调用中额外绑定“dragstart”和“dragend”的处理程序，但这不再受支持。但是由于我实际上并没有阅读代码的每一行，所以我想知道这是否已经被考虑到了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:07:55.753

是的，我升级到 v2.2（更新：2012-05-21），它对我来说很好用。实际上，我有时会在 v2.0 中错过“dragend”事件。我在'dragend'事件结束时做了一些操作（比如当用户停止调整列宽时），但有时操作不会触发，因为这个事件被错过了。实际上，在 v2.0 中，必须相当快地调整大小并尽快释放鼠标才能解决问题。

升级到 v2.2 后，这些问题就消失了。

# regex - 你如何找到一个“。”？

> ID：11251072
> 
> 赞同：-1
> 
> 时间：2012-06-28T18:50:58.213
> 
> 标签：regex, pcre, autoit

我正在尝试创建一个正则表达式来从完整文件路径中查找文件名，但它不应该只返回一个目录。例如，`C:\Users\IgneusJotunn\Desktop\file.doc`应该返回`file.doc`，而`C:\Users\IgneusJotunn\Desktop\folder`应该找不到匹配项。这些都是 Word 或 Excel 文件，但我不想依赖它。这个：

```
StringRegExp($string, "[^\\]*\z",1) 
```

查找最后一个斜杠之后的任何内容，但无法区分文件和文件夹。这个：

```
StringRegExp($string, "[^\\]*[dx][ol][cs]\z",1) 
```

几乎可以工作，但这是一个丑陋的黑客，可能有 docx 或 xlsx 文件。另外，文件可以命名为`MyNamesDoc.doc`. 如果我可以搜索一个句点很容易解决，但`.`它是一个似乎不适用于转义的已使用字符（它表示除换行符之外的任何单个字符）。这个：

```
StringRegExp($ue_string, "[^\\]*\..*\z",1) 
```

应该可以工作，在最后一个反斜杠之后找到任何东西，只捕获带有句点的东西。如何合并句号？或者任何方式来匹配文件？

编辑：回答了我自己的问题。我对它为什么不起作用以及是否有更优雅的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:11:21.100

```
Local $string = StringRegExp($string, "[^\\]*\.doc\z|[^\\]*\.docx\z|[^\\]*\.xls\z|[^\\]*\.xlsx\z",1) 
```

句点实际上与大多数特殊字符使用的相同转义斜线一起工作。至于文档类型，Or 管道和不同的扩展名效果很好。如果由于某种原因您需要添加扩展，只需添加另一个 Or。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T00:40:21.687

嗯，我很无聊。你可以这样做：

```
$sFile = StringRegExp($sPath, "[^\\]+\.(?:doc|xls)x?$", 1)
```

不能保证文件夹不会被命名，因此要绝对确定您必须检查文件/文件夹属性。然而，任何人都会用“.docx”之类的东西命名一个文件夹是值得怀疑的

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-30T22:34:41.140

*   反转字符串。
*   寻找“。”
*   使用 StringInStr（和/或“/”）查找“\”
*   从 StringinStr 的返回中修剪右侧
*   再反过来。

# facebook - Facebook 缩略图永远无法正常工作（打开图表）

> ID：11251073
> 
> 赞同：2
> 
> 时间：2012-06-28T18:51:01.487
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

目标：我们所有产品下方都会有一个 Facebook [赞] 和 [发送] 选项，它会显示正确的缩略图。

问题：所有 OG（开放图）标签都已到位。根据[Facebook 的测试](http://developers.facebook.com/tools/debug/og/object?q=http://dev.loveculture.com/Item/ItemDetailView.aspx?StyleId=1044214)，它可以工作。*我可以在他们的测试站点*上看到预览图像（我应该这样做）。在那里，它有效！实际上，这根本行不通。在 Facebook 的测试页面之外......它从来没有工作过。

[直接链接到显示问题的示例页面](http://dev.loveculture.com/Item/ItemDetailView.aspx?StyleId=1044214)

Open Graph 标签已就位，包括：

```
`<meta property="og:image" content="http://img.loveculture.com/ProductImages/1044214_15_1.jpg" />` 
```

现在它在整个页面中随机选择图像。我非常沮丧。

我想排除几件事。

是的，图像位于子域中。即使在同一域上使用图像也会产生随机缩略图。是的，我已就此联系过 Facebook，但该问题被忽略了。我对这个问题失去了希望。

**更新** 太棒了....现在它决定使用其中一个粉红色箭头作为缩略图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:24:48.207

不，根据 Facebook 调试器，它不起作用：

> **应该修复的打开图形警告：**
> 
> **Tiny og:image：所有 og:image 引用的图像在两个维度上都**必须至少为200 像素。请检查给定 url 中带有标签 og:image 的所有图像，并确保其符合最低规格。

您传递的文件是 180x258px。通过全尺寸图像，它应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T16:45:54.663

好的，问题解决了。谢谢你们。

问题在于 HTML 中使用的 URL。

`<div class='fb-like' data-send='true' data-width='450' data-href='http://www.loveculture.com/Item/ItemDetailView.aspx?StyleId=1043361' data-show-faces='true'></div>`

这是两个合法网址之间的战争。

[http://www.loveculture.com/Item/ItemDetailView.aspx?StyleId=1043361](http://www.loveculture.com/Item/ItemDetailView.aspx?StyleId=1043361)
与
[http://www.loveculture.com/Item/ItemDetail.aspx?StyleId=1043361](http://www.loveculture.com/Item/ItemDetail.aspx?StyleId=1043361)

我很高兴这已经解决了。

# sql-server - 如何在 SQL Server 中切换列中的数据并使用结果信息更新列

> ID：11251074
> 
> 赞同：0
> 
> 时间：2012-06-28T18:51:10.447
> 
> 标签：sql-server

我有一个表`USERS`，它有一列`FULLNAME`包含格式中的完整用户名，`FirstName LastName`我需要切换数据，并使用这种格式在同一列中更新它`LastName, FirstName`。

前任。`James Brown`需要`Brown, James`在同一列中切换和更新（`FULLNAME`）

有什么办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:01:24.887

假设它们的名称中只有 1 个空格：

```
UPDATE USERS
SET FULLNAME = RIGHT(FULLNAME,len(FULLNAME) - CHARINDEX(' ',FULLNAME)) +', '+ LEFT(FULLNAME,charindex(' ',FULLNAME)-1)
WHERE LEN(FULLNAME) - LEN(REPLACE(FULLNAME, ' ', '')) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:03:48.263

最好的解决方案是将元素分成两列（姓氏、名字）。但是，如果您想尝试将其压缩到 1 列中，并且您假设每个名称都由一个空格分隔

```
DECLARE @Users TABLE ( Name VARCHAR(100) )

    INSERT  INTO @Users
            ( Name 
            )
            SELECT  'James Brown'
            UNION ALL
            SELECT  'Mary Ann Watson'

    SELECT  RIGHT(Name, CHARINDEX(' ', REVERSE(Name)) - 1) + ', ' + LEFT(Name,
                                                                  LEN(Name)
                                                                  - CHARINDEX(' ',
                                                                  REVERSE(Name)))
    FROM    @Users 
```

这也假设如果他们有两个以上的名字，用空格分隔，那么最后一个单词就是姓氏，其他的都是名字。如果“Tucker Jones”是姓氏，则适用于“Mary Ann Watson”，但不适用于“George Tucker Jones”。

# objective-c - UITableView 中的 ARC 奇怪的释放行为

> ID：11251080
> 
> 赞同：0
> 
> 时间：2012-06-28T18:51:44.320
> 
> 标签：objective-c, ios, automatic-ref-counting, exc-bad-access

我最近两次发生这种行为，我想知道问题的根本原因是什么（也就是我如何确保这种情况永远不会发生，所以我不必浪费大量时间来修复它）。

当我在计划重用的 tableview 单元格内分配某些内容时，一旦加载了另一个单元格并重新加载了表，有时该对象就会被释放。

例子：

```
SubHolder *dataStorage;

- (void) initializeLicenseTable
    {
        LicenseCell *sampleLicense = [LicenseCell new];
        self.licenseData = [[NSMutableArray alloc] initWithObjects:sampleLicense, nil];
        nib = [UINib nibWithNibName:@"LicenseCell" bundle:nil];

    if (dataStorage == nil)
    {
        dataStorage = [SubHolder new];
        dataStorage.owner = self;
        [dataStorage addStorageLocation];
    }
} //cellForRowAtIndexPath and stuff 
```

如果没有 if 语句，此代码将无法工作（它会导致 dataStorage 变成僵尸）

是什么导致了这种行为？似乎测试 dataStorage 是否为零，然后才分配它与解决僵尸问题的方法相反。

**-编辑-**

如果这种行为是由共享变量引起的，我怎样才能使每次创建该对象的实例时都创建自己的数据存储对象？每个表都有自己的信息，不与其他表共享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:16:18.130

由于`dataStorage`是一个全局变量（在您的类的文件范围内可见），它将由您的类的所有实例共享。

现在，如果您的类的第二个实例已初始化并且您不检查

```
if (dataStorage == nil) 
```

那么你的全局对象将被覆盖，因此在某些时候通过 ARC 释放。如果某个其他对象已将其值存储在某处，它将尝试访问旧对象并且您获得僵尸访问。

编辑：

如果每个对象都需要自己的`dataStorage`，您只需声明

```
SubHolder *dataStorage; 
```

在您的`interface`声明中，或类似以下的属性：

```
@property (nonatomic, strong) SubHolder *dataStorage; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:05:53.800

看起来您只是一直在创建新单元格，而不是重复使用它们。

您应该像这样重复使用单元格：

```
UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:@"myCell"];
if(cell == nil) 
{
    cell = [[UITableViewCell alloc] initWithStyle:aStyle reuseIdentifier:@"myCell"];
} 
```

# .net - 无法在 Excel 中编辑 Web 查询

> ID：11251084
> 
> 赞同：0
> 
> 时间：2012-06-28T18:51:52.860
> 
> 标签：.net, wcf-data-services, excel-2003

拥有一个带有 ADO.NET 实体数据的 WFC 数据服务。还使用 Netflix ODATA 进行了测试。可以在浏览器中查看和查询。在 Excel 中，我可以通过导入数据查询 Web 服务。但我无法在 Excel 中编辑查询。编辑显示为灰色。我必须清除数据并重新开始。如何让 Excel 让我编辑 Web 查询。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:51:17.540

Excel 版本 2010 及更高版本包括一个 OData ADO.NET 提供程序，该提供程序实际上旨在连接到 OData 源。在 Excel 2010 中，您需要让[PowerPivot](http://www.microsoft.com/en-us/bi/powerpivot.aspx)获得完整的 OData 支持，并且该支持将针对 v2 源。在未来的某个地方，我们将为具有 v3 支持的提供商发布更新。

当您使用 PowerPivot 时，您应该能够修改用于访问 OData 源的 URL。

# java - 带有 RSA 签名的 SHA256 在各种 Android 设备上返回不同的输出

> ID：11251088
> 
> 赞同：9
> 
> 时间：2012-06-28T18:52:22.363
> 
> 标签：java, android, rsa, digital-signature

我正在开发一个 Android 应用程序，我需要使用[java`Signature`类](http://developer.android.com/reference/java/security/Signature.html)进行数据认证。

在每台 Android 设备上，我都可以对数据进行签名并验证其签名。但是，给定要签名的明确数据块、明确的模数、明确的私有指数和明确的公共指数，我的签名输出是不同的，具体取决于设备。我确实尝试了一堆设备，我获得了 Android 3.2 和 3.2.1 的相同签名，但对于 Android 2.2.x 设备却不同。

我从之前`KeyFactory`在 java 项目中使用 RSA 生成的常量字段计算这些签名。密钥大小为 2048 位。

这是我用来调用签名和验证的代码的引用。

```
public byte[] signData(byte[] data, PrivateKey privateKey) throws ... {
        Signature signature = Signature.getInstance("SHA256withRSA");
        signature.initSign(privateKey);
        signature.update(data);
        return signature.sign();
}

public boolean verifyData(byte[] data, byte[] sigBytes, PublicKey publicKey) throws ... {
        Signature signature = Signature.getInstance("SHA256withRSA");
        signature.initVerify(publicKey);
        signature.update(data);
        return signature.verify(sigBytes);
} 
```

如果我没记错的话，使用带有 RSA 的 SHA256 的签名是确定性的。那么我该如何解释这种行为呢？另一个有趣的问题，我怎样才能让它跨设备工作，即签名是一样的，不管我使用哪个设备？

提前谢谢你，弗兰克！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T21:14:53.710

是的，`SHA256withRSA`是完全确定的。

从理论上讲，您可能会受到其中一个 Android 版本上的旧修改 BouncyCastle 库版本中的错误（[参见示例）的影响。](http://bouncy-castle.1462172.n4.nabble.com/Incorrect-Hash-header-gets-added-for-SHA256-in-signed-message-td1463380.html)`SHA512withRSA`如果您改为使用这样的错误，那么至少引用的错误可能会被消除。

但是，在您开始深入研究哈希算法之前，请在家附近进行检查。

也许您已经通过调用`String.getBytes`. 此调用取决于Android 2.2 和 Android 2.3 之间[不同的默认平台编码。](https://stackoverflow.com/questions/11212173/different-charset-in-android-os-version)这意味着虽然您的字符串在两种情况下都相同，但字节数组可能不同。

要控制编码并使您的代码平台独立，请将编码指定为参数：

```
plainText.getBytes("UTF-8") 
```

如果做不到这一点，还有更多的策略来获得独立于平台的实现。

*   等到 2.2 与大概有缺陷的库消失
*   随您的软件分发一个已知良好的库 (jar)。如果那将是 BouncyCastle，您将无法确保加载您而非 Android 的类。该解决方案称为 SpongyCastle。
*   玩对齐/填充。通过添加您自己的固定填充，尝试使消息长度（以字节为单位）与 0、55、56 或 63 模 64 一致，并希望这些选项之一将开始提供可移植签名。选择这些值是为了与可疑算法的最外层部分交互，该部分填充到 512 位块。

# java - 如何提高java性能速度？

> ID：11251097
> 
> 赞同：0
> 
> 时间：2012-06-28T18:53:03.830
> 
> 标签：java, for-loop

我的 Java 代码有一个外循环和几个嵌套循环。表现并不令人满意。我可以遵循哪些策略来提高整体性能？

```
For(int I = 0; I < 20000000; < i++) // 20 million iterations in outer loop
{    
    For(…)

    For(…)

    For(…)

    method...

    method...    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T18:55:04.467

你遗漏了很多细节。然而...

如果 4 个不同`for`循环所做的事情不必按顺序发生，您可以`for`在单独的线程上运行每个循环。

如果您有超过 1 个 CPU 内核运行代码，整体性能将会提高。

除此之外，了解您是否可以提高性能的最佳方法是查看时间花在了哪里。在分析器中运行您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:56:17.747

不知道细节很难说 :-) 运行一个 for 循环不应该花这么长时间。

如果你有小操作，你应该做一些微**基准测试**（见[这里](https://www.ibm.com/developerworks/java/library/j-benchmark1/)和[这里](https://www.ibm.com/developerworks/java/library/j-benchmark2/)）。

如果你做一些复杂的东西，你需要做**一些分析**（Eclipse，NetBeans 带有它自己的分析器，你也可以尝试[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html?gclid=CPX_07TO8bACFYrP3wodhxHsuw)但有[很多替代品](http://www.infoq.com/articles/java-profiling-with-open-source)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:56:20.983

如果您可以并行化循环，则可以在多个内核上运行它。或者您可以购买更快的 CPU。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T19:02:44.563

我在 C# for 循环中使用`yield return`. 我认为您绝对应该评估使用它。

检查[这个](https://stackoverflow.com/q/1980953/376382)指示如何在**Java**中使用它的 SO 问题。

这是指向 Java 库的直接链接——来自答案——：

1.  [文章](http://jimblackler.net/blog/?p=61)
2.  [图书馆](http://svn.jimblackler.net/jimblackler/trunk/IdeaProjects/YieldAdapter/)

# c# - 在运行时将 URL 传递给 XAML

> ID：11251101
> 
> 赞同：0
> 
> 时间：2012-06-28T18:53:14.027
> 
> 标签：c#, xbox360, smf

我想在运行时将 URL 传递给 SMFPlayer，有没有办法在没有 Binding 的 XAML 中做到这一点？而不是像我在下面所做的那样静态设置源。

所以基本上用户单击与特定对象关联的按钮。提取 URL 字段并将其传递给播放器。

```
<Core:SMFPlayer x:Name="smf" LogLevel="Error"  LogWriters="ConsoleDebug" RetryInterval="00:00:15" RetryDuration="00:01:00">
    <Core:SMFPlayer.Playlist>
        <Media:PlaylistItem>
            "MediaSource="http://az30243.vo.msecnd.net/ss-video/HawaiiSurfing_H264_EE4_CBR_1080p_Xbox.ism/manifest"
            MediaAssetId="asdf"                 
            DeliveryMethod="AdaptiveStreaming"       
            />
    </Core:SMFPlayer.Playlist>
</Core:SMFPlayer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T23:43:23.163

我认为没有办法在运行时在 XAML 中执行此操作，但您可以在运行时以编程方式执行此操作。在您后面的代码中，您可以使用以下内容。

```
 Microsoft.SilverlightMediaFramework.Core.Media.PlaylistItem mp = new    Microsoft.SilverlightMediaFramework.Core.Media.PlaylistItem();
            mp.MediaSource = strPath;
            smf.CurrentPlaylistItem = mp;
            smf.Play(); 
```

这样，您可以将 strPath 设置为任何 Uri。例如，根据您的 UI，此按钮会播放此视频等。将每个按钮设置为不同的 strPath 将允许您交换视频。

# git - Git Vincent Driessen 模型测试服务器

> ID：11251102
> 
> 赞同：0
> 
> 时间：2012-06-28T18:53:18.207
> 
> 标签：git, testing, branching-and-merging

我正在使用[http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/) 据我了解，此模型中的主要仓库应该是一个裸仓库。

在博客中声明“我们使用的存储库设置并且与这种分支模型配合良好，是具有中央“真实”存储库的设置。” （http://nvie.com/posts/a-successful-git-branching-model/）这是否意味着中央回购应该是裸露的？

我可以在哪里进行测试和错误修复？遵循最好的方法吗？

1）设置一个测试服务器作为中央仓库的克隆。2) 定期从中央仓库拉取新功能和错误修复（针对测试服务器中报告的错误）。3) 对开发人员回购本身的大功能进行测试和错误修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:38:25.687

“真相”回购我认为他只是意味着每个人都同意它是核心：这个回购上的任何变化、分支等都是世界的真实状态。开发人员个人回购中的任何内容都只是他们的问题。不管他是否是这个意思，中央存储库几乎肯定是光秃秃的。

您认为测试服务器应该在每次测试运行之前克隆中央存储库并拉取更改的想法是完全明智和正常的。通常，您需要在当前发布分支和“开发”分支上运行测试，并且可能在每次向其推送更改时在“主”分支上运行。使用`git-bisect`，如果有人在测试运行之间的分支上引入了缺陷，很容易找到哪个提交引入了错误。测试服务器可能会为您要构建和测试的每个分支提供一个单独的中央存储库克隆，或者如果需要，您甚至可以在单独的测试服务器上执行此操作。

# android - 支持 Phonegap 最小平台版本

> ID：11251106
> 
> 赞同：3
> 
> 时间：2012-06-28T18:53:38.600
> 
> 标签：android, windows-phone-7, blackberry, cordova, symbian

我的公司有一个大项目，我必须开发到 IOS、Android、symbian、Windows Phone 和黑莓，在听到和研究了 Phonegap 之后，我真的在考虑使用它，但是我想知道是否有以及哪个是有关使用 Phonegap 为这些平台开发的现有要求/限制。

是否有某种标记表明哪个“一代”移动设备 Phonegap 最适合这些平台？是否有用于 Phonegap 的上述操作系统的最佳版本？是否存在不适用于所述操作系统版本/设备的功能？

我仍在网上研究这个，但如果这里有人可以帮我解决这个问题，那就太棒了！

PS：似乎 symbian 的开发是基于诺基亚的 Web Runtime (WRT)，所以它是最低的 Symbian S60 5th Edition 和 S60 3rd Ed。FP2。

PS'：黑莓似乎支持 4.5 RIM，直到最近的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T19:06:49.530

*   Android 2.1 - API 级别 7
*   黑莓 OS5 - 但浏览器很烂，所以 OS6 更真实
*   iOS 目前是 3.X，但当我们在 7 月发布 PhoneGap 2.0 时，iOS 版本将达到 4.2。因为超过 90% 的用户使用的是 iOS 5.X，所以这没什么大不了的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:32:26.687

我宁愿建立一个 HTML5 移动网站，只为每部手机创建一个皮肤。这在很大程度上取决于您希望应用程序做什么，但从长远来看，混合解决方案的痛苦要小得多。

# button - PayPal 按钮通过 IPN 发送自定义变量

> ID：11251109
> 
> 赞同：17
> 
> 时间：2012-06-28T18:54:08.697
> 
> 标签：button, paypal, paypal-ipn, paypal-subscriptions

几天来，我一直试图穿过丛林（真的，PayPal，你为什么不把它清除掉......），以找到解决我非常简单的问题的方法。

我有一个会员订阅网站。客户在我的网站上使用他们的电子邮件和密码进行注册。然后他们去 PayPal 支付订阅费用。

我的问题是我如何在整个交易中传递密钥 -**他们的电子邮件- 以便我知道付款给谁？**

这是因为他们有时可能会使用一封电子邮件注册并使用另一封电子邮件付款。以及如何使用（安全）加密按钮完成所有操作。

我想我可以在 PayPal“**创建 PayPal 付款按钮**”页面上制作加密按钮。

在**步骤 3**中，添加（x-ed out real url）高级变量：

```
notify_url=http://xxxxxxxxxx.com/xxxxx.php
test_ipn=1 
```

获取代码：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="N6UMVCMXSWMYG">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

并将给定的代码粘贴到我的 php 页面中，但添加一个名为“ **custom** ”的隐藏字段，并给它手头的电子邮件并更改表单操作以转到**沙箱**。

有点像这样：

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">

<input type="hidden" name="custom" value="<?=$signUpEmail ?>">

<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="N6UMVCMXSWMYG">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

这个自定义变量我以后可以在我的 ipn 页面上找到，这样我就知道会员资格是谁了..

我想对了吗？或者我应该用“手写”代码做按钮吗？或者有什么更好的方法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-05T07:59:28.947

您可以在 Paypal 表单中使用一个字段来放置您想要的任何内容。归档的名称是“custom”。因此，您可以编写如下内容：

```
<input name="custom" value="blablabla" type="hidden"> 
```

我建议对自定义值的值进行编码。例如，某种 base64_encode 可能有助于阻止好奇的人。但是，手册中也很好地解释了您可以使用 Paypal 做什么。此[链接](https://www.paypal.com/cgi-bin/webscr?cmd=p/pdn/howto_checkout-outside)和 此链接[是](https://cms.paypal.com/it/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables)摘录。

此外，正如评论中所建议的，在您的网站和贝宝之间的退避通信中，不可能使用与您的前端相关的会话变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T19:18:03.667

上述方式可行，尽管我在**PayPal 沙箱**不接受**“常规 PayPal”** hosted_button_id 时遇到了一些问题——这是通过在沙箱中重新创建 hosts_button_id 来处理的。

```
<input type="hidden" name="hosted_button_id" value="RECREATENEWINPAYPALSANDBOX"> 
```

# c - 如何更改英特尔 icc 编译器的缓存写入策略

> ID：11251115
> 
> 赞同：2
> 
> 时间：2012-06-28T18:54:29.553
> 
> 标签：c, caching, intel, compiler-optimization

有没有办法在使用英特尔编译器时更改缓存写入策略。我发现 Intel Core i7 处理器的一级缓存是回写缓存。

我的问题是：是否有任何可能的方法来调整编译器以将缓存策略从回写更改为直写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:05:01.800

从阅读[*Understanding the Linux Kernel*](http://www.amazon.co.uk/Understanding-Linux-Kernel-Daniel-Bovet/dp/0596005652/ref=sr_1_1?ie=UTF8&qid=1340910229&sr=8-1)开始，我相信这是可能的，尽管我自己从未做过。报价：

> [处理器寄存器](http://en.wikipedia.org/wiki/Control_register#CR0)的`CD`标志用于启用或禁用高速缓存电路。同一寄存器中的标志指定缓存是使用直写策略还是回写策略。[`cr0`](http://en.wikipedia.org/wiki/Control_register#CR0)`NW`

通过在页表中设置标志，也可以在每页的基础上控制缓存策略。我怀疑英特尔编译器将具有指定单个内存分配行为的功能。我当然在 Fortran 编译器上看到过这一点。

我不知道其中有多少专门适用于 i7。

# python - 有什么方法可以知道参数的值是默认值还是用户指定的值？

> ID：11251119
> 
> 赞同：4
> 
> 时间：2012-06-28T18:54:45.110
> 
> 标签：python, arguments

我正在寻找类似于 Lisp 的 arg-supplied-p 变量的东西，以帮助区分默认值和用户指定的相同值。

例子：

```
def foo(a=10):
    pass 
```

我想在 foo 中知道它是否被这样调用：

```
foo() 
```

或像这样：

```
foo(10) 
```

甚至像这样：

```
foo(a=10) 
```

最后两个对我来说是同义词；我不需要知道那个细节。我稍微浏览了检查模块，但 getargspec 为所有 3 个调用返回完全相同的结果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T18:57:32.207

除了检查源代码之外，没有办法区分这三个函数调用——它们*应该*具有完全相同的含义。如果您需要区分它们，请使用不同的默认值，例如`None`.

```
def foo(a=None):
    if a is None:
        a = 10
        # no value for a provided 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T19:02:51.550

正如 Sven 所指出的，通常使用 None 作为默认参数。如果您甚至需要区分无参数和提供的显式 None 之间的区别，您可以使用 sentinel 对象：

```
sentinel = object()

def foo(a=sentinel):
    if a is sentinel:
        # No argument was provided
        ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T19:05:32.337

并不真地。您可以使用`foo.func_defaults`来获取函数的默认参数列表，因此您可以使用它来检查传递参数的对象身份。但这只会对可变对象可靠地工作。就像您的示例一样，无法判断某人是通过了 10 还是使用了默认的 10，因为这两个 10 很可能是同一个对象。

无论如何，这只是一个粗略的近似，因为它没有告诉你函数是如何被调用的：它告诉你默认参数是什么，你查看实际参数，并尝试猜测它们是否相同。无法访问用于调用该函数的句法形式。

这是一个示例，它显示了它有时如何工作，有时又如何不工作。

```
>>> def f(x="this is crazy"):
...     print x is f.func_defaults[0]
>>> f()
True
>>> f("this is crazy")
False
>>> def f(x=10):
...     print x is f.func_defaults[0]
>>> f()
True
>>> f(10)
True 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T19:17:31.790

被调用的函数只获取最终的参数值，无论是默认值还是传入的东西。所以你需要做的是能够判断调用者是否传入了一些东西是使默认值成为*他们无法传递的东西在。*

他们可以通过`None`，所以你不能使用它。你能用什么？

最简单的解决方案是创建某种 Python 对象，将其用作函数中的默认值，然后`del`用户无法引用它。从技术上讲，用户可以从你的函数对象中挖掘出来，但他们很少会这样做，如果他们这样做，你可以争辩说他们应得的。

```
default = []

def foo(a=default):
    if a is default:
        a = 10
    print a

del default 
```

我在这里使用的“默认值”是一个空列表。由于列表是可变的，它们永远不会被重用，这意味着每个空列表都是一个唯一的对象。（Python 实际上对所有空元组使用相同的空元组对象，所以不要使用空元组！字符串文字和较小的整数同样可以重用，所以也不要使用它们。）一个`object`实例就可以了。任何东西，只要它是可变的，因此不能共享。

现在的问题是上面的代码实际上不会运行，因为你已经完成了`del default`。如何在运行时在函数中获取对该对象的引用，以便对其进行测试？一种方法是使用不用于实际参数的默认参数值。

```
default = []

def foo(a=default, default=default):
    if a is default:
          a = 10
     print a

del default 
```

这将在定义函数时将对象绑定到参数的默认值，因此全局名称在一秒钟后被删除并不重要。但问题是，如果有人`help()`对您的函数进行了处理，或者以其他方式对其进行了反省，看起来他们可以传入一个额外的参数。更好的解决方案是闭包：

```
default = []

def foo(default=default):   # binds default to outer func's local var default
    def foo(a=default):     # refers to outer func's local var default
        if a is default:
            a = 10
        print a
    return foo
foo = foo()

del default 
```

这都是相当多的工作要做，所以真的，不要打扰。

# asp.net - 根据上一页的按钮单击显示或隐藏面板

> ID：11251123
> 
> 赞同：0
> 
> 时间：2012-06-28T18:54:54.260
> 
> 标签：asp.net, c#-4.0, pageload, buttonclick

我的主页侧栏导航上有一个链接按钮控件。当用户单击此按钮时，他们将被带到另一个称为 CRM 的页面。我在 CRM 页面上有许多带有网格的面板。这些都设置为隐藏或显示在页面加载事件中。

但是，当用户从主页单击特定链接按钮并被带到 CRM 页面时，我需要隐藏所有网格并显示一个新的文本框面板。

在类似的任务中，我在页面上有一个单选按钮，如果用户从另一个页面单击特定的链接按钮，我需要在用户到达页面时已经单击或按下单选按钮。

我希望这是有道理的。

我如何确定用户是否因为单击了我的侧边栏导航中的一个特定按钮而访问了我的 CRM 页面并基于该按钮显示/隐藏面板？单选按钮也是如此。如何设置`radiobutton.clicked = true;`如果用户单击了上一页中的特定链接按钮？

谢谢 EB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:56:41.410

您必须通过查询字符串、会话、cookie 或缓存传递一个值，以表明他们选择了需要检查单选按钮的功能。默认情况下没有任何东西可以自动触发它。所以你设置：

```
Session("ClickRadioButton") = true 
```

并在代码中，在页面 init 上，第一次执行以下操作：

```
if (Session("ClickRadioButton") = true) then
   radiobutton.Checked = true
end if 
```

# c# - C# 确定是否使用单声道编译

> ID：11251124
> 
> 赞同：0
> 
> 时间：2012-06-28T18:54:55.813
> 
> 标签：c#, .net-4.0, mono

> **可能重复：**
> [如何有条件地为 Mono 与 Microsoft .NET 编译我的 C#？](https://stackoverflow.com/questions/329043/how-can-i-conditionally-compile-my-c-sharp-for-mono-vs-microsoft-net)

我正在用 C# 编写代码，相当积极地使用 .NET 反射，包括 Mono 中尚不可用的一些功能。我处理这个问题的简单方法是使用少量条件：

```
 #if MONO
        ... stuff that works on mono ....
 #else
        ... stuff that works on .NET 4.0 but not (yet) on mono ...
 #endif 
```

所以这是我的问题：是否有任何预定义的标志我可以这样测试，或者 Mono csharp 编译器会自动定义，或者如果没有，.NET csharp 编译器预定义，我可以这样测试？

它需要是一个编译时测试（我知道如何在运行时确定平台，但这为时已晚）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:47:59.207

在运行时确定平台是首选。使用 Mono 的 C# 编译器编译程序并在 .NET 上运行的情况并不少见（甚至可以直接在 .NET 运行时运行 Mono 的 C# 编译器）。

`__MonoCS__`仅用于编译器变通方法，绝不能用于限制目标平台。

# php - 找不到“GET /user/register”的路由：不允许的方法（允许：POST）

> ID：11251126
> 
> 赞同：6
> 
> 时间：2012-06-28T18:55:03.773
> 
> 标签：php, symfony

当我去：`http://mysite.com/web/app_dev.php/user/register`

我正进入（状态：

```
MethodNotAllowedHttpException: No route found for "GET /user/register": Method Not Allowed (Allow: POST) 
```

这是我的代码：

```
MainUserBundle_register:
    pattern:  /user/register/
    defaults: { _controller: MainUserBundle:UserAuthWebService:register, _format:json}
    requirements:
        _method:  POST 
```

我的控制器是：

```
 public function registerAction($email="test", $username="test", $password="test123")
    {

       //some code

    } 
```

为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T19:09:17.153

您可以将路由限制为仅匹配给定的 HTTP 方法。在您发布的代码中，路由只会匹配`POST`请求。您将需要同时允许`POST`and`GET`或删除该要求。

```
MainUserBundle_register:
    pattern:  /user/register/
    defaults: { _controller: MainUserBundle:UserAuthWebService:register, _format:json}
    requirements:
        _method:  POST|GET 
```

[http://symfony.com/doc/current/book/routing.html#adding-http-method-requirements](http://symfony.com/doc/current/book/routing.html#adding-http-method-requirements)

# netbeans - Netbeans 7.1.2 - 树（分层）视图中的项目源文件夹，而不是平面视图？

> ID：11251128
> 
> 赞同：0
> 
> 时间：2012-06-28T18:55:07.080
> 
> 标签：netbeans, package, treeview, netbeans-7, netbeans-7.1

如何获得 Netbeans 7.1.2 的树视图？FAQ [http://wiki.netbeans.org/FaqTreePackageView](http://wiki.netbeans.org/FaqTreePackageView)似乎适用于旧版本的 Netbeans。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:55:33.520

如果你的意思是你要翻包清单

```
java.io
java.lang
java.net
java.util
java.util.concurrent 
```

进入包树

```
java
  io
  lang
  net
  util
    concurrent 
```

这是 NetBeans 7.2 中的一个新选项，现在处于测试阶段。我今天安装了它，还没有任何问题。顺便说一句，您是否尝试过常见问题解答中的建议？可能只有常见问题解答已过时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-06T21:36:33.680

**RMB 在项目窗口中的空白处 > View Java packages As > Tree / Reduced tree**

我个人建议减少树。

# php - 使用 PHP 和 cURL 向 Web 服务发送请求

> ID：11251131
> 
> 赞同：0
> 
> 时间：2012-06-28T18:55:14.323
> 
> 标签：php, web-services, curl

我正在学习如何使用 PHP 和 cURL 向 Web 服务发送请求。我找到了这个链接，并且能够让“邮政编码”示例工作。

[使用 php 使用 WebService](https://stackoverflow.com/questions/1379339/consume-webservice-with-php)

WebserviceX.NET 也有“股票报价”网络服务。

[http://www.webservicex.net/ws/WSDetails.aspx?CATID=2&WSID=9](http://www.webservicex.net/ws/WSDetails.aspx?CATID=2&WSID=9)

我正在使用与“邮政编码”示例相同的方法，但我无法使用这个方法。这是代码。

```
$url = "http://www.webservicex.net/stockquote.asmx/GetQuote?symbol=AAPL";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
curl_close($ch);
$xmlobj = simplexml_load_string($result); 
```

代码成功运行，但我无法访问 XML 对象。我以为这会奏效。

```
echo $xmlobj->StockQuotes->Stock->Symbol; 
```

问题似乎是 $result 的格式不正确，或者它没有正确加载到 XML 对象中。我已经尝试了许多使用 DOMDocument 和 SimpleXMLElement 的方法，但我无法弄清楚。

# asp.net - ASP 到 ASP.NET 会话变量

> ID：11251137
> 
> 赞同：11
> 
> 时间：2012-06-28T18:55:47.960
> 
> 标签：asp.net, session, asp-classic

我们有一个经典 ASP 网站，我们正在根据需要慢慢迁移到 ASP.NET。

问题当然是经典的 asp 和 ASP.NET 如何处理 Session。在花了最后几个小时研究网络之后，我发现了很多文章，但没有一篇比其他文章更突出。

是否有将会话变量从经典 asp 和 asp.net 传输到经典 asp 和 asp.net 的最佳实践？安全性是必须的，非常感谢任何带有示例的解释。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T11:35:05.403

将单个会话变量从经典 asp 传递到 .net 服务器端（向客户端隐藏会话值）的简单桥接器是这样的：

*   在 ASP 端：一个用于输出会话的 asp 页面，称之为 asp2netbridge.asp

    ```
    <%
    'Make sure it can be only called from local server '
    if (request.servervariables("LOCAL_ADDR") = request.servervariables("REMOTE_ADDR")) then
        if (Request.QueryString("sessVar") <> "") then
            response.write Session(Request.QueryString("sessVar"))
        end if
    end if
    %> 
    ```

*   在.net 端，远程调用该asp 页面。：

    ```
    private static string GetAspSession(string sessionValue)
     {
        HttpWebRequest _myRequest = (HttpWebRequest)WebRequest.Create(new Uri("http://yourdomain.com/asp2netbridge.asp?sessVar=" + sessionValue));
        _myRequest.ContentType = "text/html";
        _myRequest.Credentials = CredentialCache.DefaultCredentials;
        if (_myRequest.CookieContainer == null)
            _myRequest.CookieContainer = new CookieContainer();
        foreach (string cookieKey in HttpContext.Current.Request.Cookies.Keys)
        {
            ' it is absolutely necessary to pass the ASPSESSIONID cookie or you will start a new session ! '
            if (cookieKey.StartsWith("ASPSESSIONID")) {
                HttpCookie cookie = HttpContext.Current.Request.Cookies[cookieKey.ToString()];
                _myRequest.CookieContainer.Add(new Cookie(cookie.Name, cookie.Value, cookie.Path, string.IsNullOrEmpty(cookie.Domain)
                    ? HttpContext.Current.Request.Url.Host
                    : cookie.Domain));
            }
        }
        try
        {
            HttpWebResponse _myWebResponse = (HttpWebResponse)_myRequest.GetResponse();

            StreamReader sr = new StreamReader(_myWebResponse.GetResponseStream());
            return sr.ReadToEnd();
        }
        catch (WebException we)
        {
            return we.Message;
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T20:29:03.577

我使用了一个 ajax 桥接器（需要一个更好的术语），特别是一个经典的 asp 页面，它将所有会话变量读入带有 guid 的数据库，然后重定向到一个 .net 页面，在查询字符串中传递 guid， asp.net 页面从 sql 中读取给定的 guid，并将这些变量创建为会话。

例如，在经典的 asp 中（伪代码 - 只是为了给你一个想法，在你的等中使用参数化查询）：

```
'#### Create GUID
Dim GUID 'as string
GUID = CreateWindowsGUID() '#### Lots of methods on http://support.microsoft.com/kb/320375

'#### Save session to sql
For Each SessionVar In Session.Contents
   db.execute("INSERT INTO SessionBridge (GUID, Key, Value) VALUES ('" & GUID & "', '" & SessionVar & "', '" & session(SessionVar) & "')")
Next 
```

然后，在 .net 页面中：

```
'#### Fetch GUID
Dim GUID as string = Request.QueryString("GUID")
session.clear

'#### Fetch from SQL
db.execute(RS, "SELECT * FROM SessionBridge WHERE GUID = '" & GUID & "'")
For Each db_row as datarow in RS.rows
    Session(db_row("Key")) = db_row("Value")
Next 
```

正如我所说，这是非常粗糙的伪代码，但您可以使用简单的背景 ajax 函数调用 asp，然后调用给定 GUID 的 .net 页面。

这具有不将所有变量和值暴露给客户端的优点（如 post 方法等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:09:10.023

他们使用不同的会话，因此您需要自己设计一些传输变量的方法。您可以将它们包含在 cookie 中，或者通过 HTTP POST（即带有隐藏字段的表单）将它们发送到 asp.net 端。

或者，您可以废弃使用会话存储并将每个用户/会话的所有内容都粘贴到数据库中，然后通过上述建议之一将会话密钥从经典 ASP 传递到 ASP.NET。我知道这听起来像是你在重新发明轮子，但这可能是你无法绕过的情况之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T19:46:07.113

我有一个网站可以执行该操作。秘诀是使用带有 asp 函数 response.redirect 的中间页面

```
<%
client_id = session("client_id")
response.redirect "aspx_page.aspx?client_id=" & client_id
%> 
```

这是一个提取经典 asp 会话变量 client_id 并将其传递给 aspx 页面的示例。您的 aspx 页面将需要从那里处理它。

这需要位于经典 asp 页面的顶部，上面没有任何类型的 HTML。IIS 将在服务器上处理这个并重定向到带有附加查询字符串的 aspx 页面，而不将数据发送到客户端计算机。它非常快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-20T13:53:46.787

万一其他人偶然发现这里寻求帮助，另一种可能的选择是使用 cookie。cookie 的好处是您可以存储合理数量的数据，然后将该数据保存到您的 .Net 应用程序（或其他 Web 应用程序）。暴露 cookie 存在安全风险，因为该数据很容易被操纵或伪造。我不会在 cookie 中发送敏感数据。这里 cookie 仅存储一个唯一标识符，可用于从表中检索数据。

该方法：

1.  从您的经典 asp 页面中获取您需要的会话数据。将此数据与唯一哈希和时间戳一起存储在表中。
2.  将哈希值存储在一个短暂的 cookie 中。
3.  重定向到您需要去的任何页面并读取 cookie 中的哈希值。
4.  检查 cookie 中的哈希值在数据库中是否过期。如果有效，请将您需要的数据发送回您的页面，然后使哈希过期，使其无法重复使用。

我使用了一个 SHA 256 哈希，它是用户的唯一标识符、会话 ID 和当前时间戳的组合。哈希仅在几分钟内有效，并在读取时过期。这个想法是为需要在有效哈希过期之前猜测有效哈希的攻击者限制窗口。

# struts2 - 使用 Struts 2 从两场战争中获取 ClassNotFoundException

> ID：11251141
> 
> 赞同：1
> 
> 时间：2012-06-28T18:55:59.707
> 
> 标签：struts2, websphere, classloader, websphere-6.1

在安装了 Web 服务功能包的情况下，我已经一次性将多个战争部署到了 WAS 6.1。在耳朵内部，有两场战争使用了 Struts 2。

其中一场战争可以正常工作，因为应用程序按预期工作。

第二个应用程序返回以下错误：

> [6/27/12 17:20:26:240 EDT] 0000002e WebApp E [Servlet 错误]-[过滤器 [struts2]：找不到所需的过滤器类 - org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter。类]：java.lang.ClassNotFoundException：org.apache.s truts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter

我知道这里突出显示的问题：http: [//struts.apache.org/2.2.1/docs/multiple-struts-2-wars-in-a-single-ear.html](http://struts.apache.org/2.2.1/docs/multiple-struts-2-wars-in-a-single-ear.html)

这个确切的耳朵在 WAS 6.1 测试环境中正确工作，**但**在完整的 WAS 6.1 安装中不正确。

两个 WAS 安装的类加载器都定义为 MULTIPLE 和 CHILD_FIRST，因此两场战争都有自己的类加载器。

1.  问题：WAS 测试环境和完整生产安装之间的类加载器有区别吗？

2.  附带问题：我需要在耳朵中创建一个共享库来解决这个问题吗？

# matlab - 在 MATLAB 中使用其他矩阵的元素创建矩阵

> ID：11251142
> 
> 赞同：1
> 
> 时间：2012-06-28T18:56:02.993
> 
> 标签：matlab, matrix, conditional-statements

我有两个矩阵`a`和`b`（列数相等）。我想`c`使用条件创建第三个矩阵：

例如，我有：

```
a = [1  2  3  4  1  2  3  4  1  2  3  4; 
     1  1  1  1  2  2  2  2  3  3  3  3]

b = [5  6  7  8  9  10 11 12 13 14 15 16;    
     17 18 19 20 21 22 23 24 25 26 27 28;    
     29 30 31 32 33 34 35 36 37 38 39 40] 
```

条件是：`a(2, :) == 2`，所以得到的矩阵应该是：

```
c = [1 2 3 4;
     2 2 2 2;
     9 10 11 12;
     21 22 23 24;
     33 34 35 36] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T19:14:02.563

试试这个

```
%With your a and b

cols = a(2,:) == 2;
c = [a(:,cols) ; b(:,cols)];

c =

 1     2     3     4
 2     2     2     2
 9    10    11    12
21    22    23    24
33    34    35    36 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:19:38.280

这是应该起作用的东西。无论如何，这可能不是最好和最有效的方法。

```
a=[1 2 3 4 1 2 3 4 1 2 3 4;  
   1 1 1 1 2 2 2 2 3 3 3 3];

b=[5 6 7 8 9 10 11 12 13 14 15 16;     
  17 18 19 20 21 22 23 24 25 26 27 28;     
  29 30 31 32 33 34 35 36 37 38 39 40];

truthtable = a(2,:)==2;
c = []
for idx = 1:length(truthtable)
    if truthtable(idx) == 1
       c(:,end+1) = [a(:,idx);b(:,idx)];
    end
end 
```

# python - 距离矩阵的并行构造

> ID：11251148
> 
> 赞同：14
> 
> 时间：2012-06-28T18:56:28.613
> 
> 标签：python, performance, parallel-processing, distance, hierarchical-clustering

我在大量多维向量上进行层次凝聚聚类，我注意到最大的瓶颈是距离矩阵的构建。此任务的一个简单实现如下（在 Python 中）：

```
''' v = an array (N,d), where rows are the observations
and columns the dimensions'''
def create_dist_matrix(v):
   N = v.shape[0]
   D = np.zeros((N,N))
   for i in range(N):
      for j in range(i+1):
          D[i,j] = cosine(v[i,:],v[j,:]) # scipy.spatial.distance.cosine()
   return D 
```

我想知道哪个是为这个例程添加一些并行性的最佳方法。一种简单的方法是中断外循环并将其分配给多个作业，例如，如果您有 10 个处理器，则为不同的范围创建 10 个不同的作业，`i`然后将结果连接起来。然而，这种“水平”解决方案似乎不太正确。此任务是否有任何其他并行算法（或现有库）？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-04-15T00:06:04.173

看起来有一个名为[pairwise_distances](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise_distances.html)`scikit-learn`的并行版本的 pdist

```
from sklearn.metrics.pairwise import pairwise_distances

D = pairwise_distances(X = v, metric = 'cosine', n_jobs = -1) 
```

where`n_jobs = -1`指定将使用所有 CPU。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-14T13:14:40.787

请参阅@agartland 答案-您可以在 sklearn.metrics.pairwise.pairwise_distances 中指定或`n_jobs`在[sklearn.cluster中](http://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise.pairwise_distances.html)[查找](http://scikit-learn.org/stable/modules/classes.html#module-sklearn.cluster)带有`n_jobs`参数的聚类算法。例如。`sklearn.cluster.KMeans`.

不过，如果您喜欢冒险，您可以实现自己的计算。例如，如果您需要一维距离矩阵，`scipy.cluster.hierarchy.linkage`您可以使用：

```
#!/usr/bin/env python3
from multiprocessing import Pool
import numpy as np
from time import time as ts

data = np.zeros((100,10)) # YOUR data: np.array[n_samples x m_features]
n_processes = 4           # YOUR number of processors
def metric(a, b):         # YOUR dist function
    return np.sum(np.abs(a-b)) 

n = data.shape[0]
k_max = n * (n - 1) // 2  # maximum elements in 1D dist array
k_step = n ** 2 // 500    # ~500 bulks
dist = np.zeros(k_max)    # resulting 1D dist array

def proc(start):
    dist = []
    k1 = start
    k2 = min(start + k_step, k_max)
    for k in range(k1, k2):
        # get (i, j) for 2D distance matrix knowing (k) for 1D distance matrix
        i = int(n - 2 - int(np.sqrt(-8 * k + 4 * n * (n - 1) - 7) / 2.0 - 0.5))
        j = int(k + i + 1 - n * (n - 1) / 2 + (n - i) * ((n - i) - 1) / 2)
        # store distance
        a = data[i, :]
        b = data[j, :]
        d = metric(a, b)
        dist.append(d)
    return k1, k2, dist

ts_start = ts()
with Pool(n_processes) as pool:
    for k1, k2, res in pool.imap_unordered(proc, range(0, k_max, k_step)):
        dist[k1:k2] = res
        print("{:.0f} minutes, {:,}..{:,} out of {:,}".format(
            (ts() - ts_start)/60, k1, k2, k_max))

print("Elapsed %.0f minutes" % ((ts() - ts_start) / 60))
print("Saving...")
np.savez("dist.npz", dist=dist)
print("DONE") 
```

如您所知，`scipy.cluster.hierarchy.linkage`实现不是并行的，其复杂性至少为 O(N*N)。我不确定是否`scipy`有此功能的并行实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-31T13:30:35.813

我怀疑你会比`pdist`在`scipy`模块中更快地获得它。可能这就是为什么它说

> 请注意，您应该避免传递对此库中定义的距离函数之一的引用。例如，：

```
dm = pdist(X, sokalsneath)

```

> 将使用 Python 函数 sokalsneath 计算 X 中向量之间的成对距离。这将导致 sokalsneath 被调用 n 次选择 2 次，这是低效的。相反，优化后的 C 版本效率更高，我们使用以下语法调用它：
> 
> ```
> dm = pdist(X, 'sokalsneath')
> 
> ```
> 
> 因此，如果您使用`pdist(X, 'cosine')`. 当我运行它时，在我看来，它只使用一个核心，所以如果你有很多核心，你可能会更快。但请记住，要实现这一点，您的本机实现必须与 SciPy 的一样快。这不会是微不足道的。您宁愿耐心等待或采用不同的聚类方法，例如支持空间索引的算法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-01T17:46:54.863

除了@agartland 提出的建议之外，我还喜欢使用[`pairwise_distances`](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise_distances.html)或[`pairwise_disances_chunked`](https://scikit-learn.org/stable/modules/generated/sklearn.metrics.pairwise_distances_chunked.html#sklearn.metrics.pairwise_distances_chunked)使用[`numpy.triu_indices`](https://docs.scipy.org/doc/numpy-1.14.2/reference/generated/numpy.triu_indices.html)来获得压缩距离向量。这是由提供的确切输出[`scipy.spatial.distance.pdist`](https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.pdist.html)

重要的是要注意用于控制对角线偏移的`k`kwarg 。`triu_indices`默认值`k=0`将返回零的对角线以及实际距离值，应设置`k=1`为避免这种情况。

对于大型数据集，我遇到了从工作线程返回值时`pairwise_distances`引发`ValueError`from的问题。`struct.unpack`因此我使用`pairwise_distances_chunked`下面。

```
gen = pairwise_distances_chunked(X, method='cosine', n_jobs=-1)
Z = np.concatenate(list(gen), axis=0)
Z_cond = Z[np.triu_indices(Z.shape[0], k=1) 
```

对我来说，这比使用`pdist`和使用可用内核数量很好地扩展要快得多。

**注意**，我认为还值得指出的是，过去对这些论点存在一些混淆`scipy.cluster.hierarchy.linkage`，因为文档在某一时刻表明用户可以传递一个压缩的或方形的距离向量/矩阵（[linkage() 函数将距离矩阵错误为观察向量#2614](https://github.com/scipy/scipy/issues/2614)）。事实上并非如此，传递给链接的值应该是压缩距离向量或原始观测值的 mxn 数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-22T16:23:47.340

如果您决定自己编排多处理，您可能希望在 CPU 之间平均分配计算数量，以便最大限度地缩短计算时间。然后回答[这个关于等分对角矩阵的问题](https://stackoverflow.com/questions/46237201/how-to-split-diagonal-matrix-into-equal-number-of-items-each-along-one-of-axis/46240745#46240745)可能会派上用场。

# c# - Dispose 中的成员变量访问

> ID：11251152
> 
> 赞同：1
> 
> 时间：2012-06-28T18:56:49.853
> 
> 标签：c#, dispose

我正在尝试了解有关 Dispose 方法的更多信息，以及其中发生的事情如何可能会停止该对象的垃圾收集。

所以，如果我有：

```
DateTime _date = DateTime.UtcNow;

public void Dispose()
{
   bool append = true;
   using(var log = new System.IO.StreamWriter("log.txt", append))
   {
       log.WriteLine("Logged on: " + _date);
   }
} 
```

我在 Dispose 方法中调用 _date 的事实是否会重新设置变量并且不允许 GC 收集它？

这是从我的问题[开始的](https://stackoverflow.com/questions/11248937/streamwriter-inside-dispose)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T18:58:30.727

垃圾收集器与**没有任何**关系`Dispose()`，所以简单的答案是：根本没有。GC 涉及终结器 ( `~YourType()`)，但*不* `Dispose()`涉及，除非您指的是通用`Dispose(bool disposing) {...}`模式。

其次， a`DateTime`是 a `struct`，因此不会被垃圾收集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T18:59:35.163

绝对不。Dispose 本质上与垃圾收集无关（除了许多实现会调用`GC.SuppressFinalize(this)`.）

dispose 模式允许对象的消费者有礼貌，并尽快释放非托管资源。垃圾收集是在适当时释放托管资源的标准方法。

一些一次性类*也*将实现一个终结器，以便如果对象在没有被释放的情况下被收集，则可能会紧急释放非托管资源。

# c# - 如何使 DataGrid 始终在 WPF 中显示其列标题？

> ID：11251153
> 
> 赞同：3
> 
> 时间：2012-06-28T18:56:53.797
> 
> 标签：c#, wpf

我正在为工作中的项目将 Silverlight 应用程序移植到 WPF，但我遇到了一个小问题。在 Silverlight 应用程序中，Datagrid 的 ItemsSource 是一个最初为空的 ObservableCollection。当我第一次加载应用程序时，会显示列标题，即使 DataGrid 本身是空的。我现在正试图在 WPF 应用程序中实现相同的目标。ObservableCollection 和 Datagrid 都是相同的，但现在列标题仅在我向 Datagrid 添加行时出现。我的 Datagrid 的 XAML 如下：

```
<DataGrid ColumnWidth="196" GridLinesVisibility="All"
                        AutoGenerateColumns="True" IsReadOnly="True" HorizontalAlignment="Center"
                        Height="375" Width="775" ItemsSource="{Binding source}"
                        RowBackground="#A5BACA" AlternatingRowBackground="LightGray"
                        VerticalAlignment="Center" Name="documentsDG"
                        FontWeight="Normal" FontSize="13" HeadersVisibility="Column"
                        Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="4">
</DataGrid> 
```

就像我说的，添加和删除行可以正常工作，只是我想找到一种方法使列标题显示在 Datagrid 中没有任何数据。此外，我尝试在 Datagrid 中使用空行启动应用程序，这确实使列标题出现，但看起来很乱。如果我从应用程序中删除该行，列标题仍然存在，但如果我在窗口加载时将其删除，它们就会消失。

因此，任何帮助将不胜感激。让我知道您是否需要更多关于我的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:20:15.807

您正在自动生成列。如果您手动定义列，即使您的集合为空，它们也会可见。

另请参阅： [WPF Toolkit Datagrid Headers and Empty Source](https://stackoverflow.com/questions/3682586/wpf-toolkit-datagrid-headers-and-empty-source)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T17:15:39.743

我看到您有 AutoGenerateColumns="True"，但是，您没有指定任何 Grid 列。从您描述的行为来看，似乎一旦填充了网格的上下文，它就可以读取集合中基础对象类型的属性。在此之前，网格不知道这些属性，因此无法生成任何列。

这里没有免费的午餐，如果您想在填充上下文之前查看它们，则必须在 xaml 中指定网格列。

# excel - 独立 Excel 宏

> ID：11251156
> 
> 赞同：6
> 
> 时间：2012-06-28T18:57:08.160
> 
> 标签：excel, vba

我每周从系统运行一次报告，并将数据导出到 Excel 文档中。我已经设置了将数据导出到 excel 的工具，以便在格式化方面做得不错，但是一旦数据在 excel 中，我还需要做更多的事情。

是否可以创建一个独立的宏，将其保存在 Microsoft Office 文件夹中，并在我打开此文件后调用它？我写了很多宏，它们是 ONE 给定电子表格的一部分，但从未尝试过对许多电子表格开放的宏。

是否有可能，以及我可以学习如何实现这一目标的良好资源的起始方向？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T19:14:34.410

> ...并且可以在我打开此文件后调用它？...

你有 2 个很好的选择

**1）**将您的宏写入并保存到个人文件中。有关更多信息，请参阅此链接

**主题**：从中央文件部署 Excel 宏

**链接**： http: [//office.microsoft.com/en-us/excel-help/deploy-your-excel-macros-from-a-central-file-HA001087296.aspx](http://office.microsoft.com/en-us/excel-help/deploy-your-excel-macros-from-a-central-file-HA001087296.aspx)

**从上面的链接引用**：

> 您是否曾经想在所有 Excel 工作表中使用这个非常方便的宏？你可以。本专栏介绍如何将宏放在名为 personal.xls 的文件中，并在每次启动 Excel 时使它们可用。

**2)**创建加载项

**主题**：创建 Excel 加载项

**链接**：http: [//msdn.microsoft.com/en-us/library/aa140936%28v=office.10%29.aspx](http://msdn.microsoft.com/en-us/library/aa140936%28v=office.10%29.aspx)

**从上面的链接引用**：

> 您可以通过创建工作簿、向其中添加代码和自定义工具栏和菜单项并将其保存为 Excel 加载项文件来创建 Microsoft® Excel 加载项。

# c++ - 用户输入的十六进制到十六进制数组

> ID：11251161
> 
> 赞同：0
> 
> 时间：2012-06-28T18:57:20.157
> 
> 标签：c++, hex

我需要做的是以下。

```
const char *arrayHex[4];
for( int i = 0; i < 5; i++ )
{    
cin << uHex;
arrayHex[i] = uHex;
} 
```

但我需要 arrayHex 的成员用 \x 进行十六进制转义。我该怎么做呢？

这真的措辞模糊，编辑修复（希望如此）

如果输入是 41，我希望打印时的结果是“A”，就好像值是“\x41”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:06:38.490

```
#include <iostream>
#include <string>
#include <cstdlib> // for strtol()
#include <cstdio>  // for printf()
#define countof(array) (sizeof(array)/sizeof(array[0]))

int main()
{
    std::string uHex;
    long arrayValues[4];
    for( int i = 0; i < countof(arrayValues); ++i )
    {
        std::cin >> uHex;
        char* end;
        arrayValues[i] = std::strtol(uHex.c_str(), &end, 16);
        // At this point, we expect end to be pointing at the '\0'
        // (the C-string nul terminator).  If it's not, then we have
        // invalid chars in our input, and arrayValues[i] is bogus.
        if (*end != '\0')
        {
           std::cout << "Invalid characters: \"" << uHex << "\" (please try again)\n";
           --i; // compensate for the ++i above to re-try this again
        }
    }

    for( int i = 0; i < countof(arrayValues); ++i )
    {
        std::cout << i << " --> " << arrayValues[i] << " --> "
                  << static_cast<char>(arrayValues[i]) << '\n';
//      std::printf("%d --> %d --> %c\n", i, arrayValues[i], arrayValues[i]);
    }
} 
```

请注意，我以两种方式打印完全相同的输出：使用 cout 或使用 printf()。就我个人而言，我喜欢 printf() 不是因为这是我首先学到的，而是因为 printf() 格式化的输出比 cout 更具有表达性（对于大多数内置类型），尽管 cout 更灵活，因为你可以创建 cout用户定义类型的输出函数。但是如果你的编译器不做 printf()/scanf() 格式参数类型检查（GCC 做，如果你启用它），那么你可以很容易地创建一些有趣且令人困惑的输出与不匹配的类型，并创建很好的非确定性通过指定比格式字符串指示的更少的参数，SEGV 生成器非常容易。

# iphone - 尝试比较某些字符串时获取 SIGABRT

> ID：11251163
> 
> 赞同：-1
> 
> 时间：2012-06-28T18:57:22.107
> 
> 标签：iphone, objective-c, ios

我正在我的 NSMutableArray 中进行某种搜索，但我经常得到 SIGABRT。我是objective-c的新手，所以我不知道我是否错过了一些重要的东西......

```
-(IBAction)findButtonPushed:(id)sender
{
    Data *stuff = [Data getInstance];
    [stuff.results removeAllObjects];
    NSMutableArray *tempResults = [[NSMutableArray alloc] init];

    for (Company *company in stuff.companies) {
        if ([company.Description rangeOfString:[sbWhat text] options:NSCaseInsensitiveSearch].location != NSNotFound
            || [company.Name rangeOfString:[sbWhat text] options:NSCaseInsensitiveSearch].location != NSNotFound
            || [company.Url rangeOfString:[sbWhat text] options:NSCaseInsensitiveSearch].location != NSNotFound
            || [company.FirstName rangeOfString:[sbWhat text] options:NSCaseInsensitiveSearch].location != NSNotFound
            || [company.LastName rangeOfString:[sbWhat text] options:NSCaseInsensitiveSearch].location != NSNotFound
            || [company.Keywords rangeOfString:[sbWhat text] options:NSCaseInsensitiveSearch].location != NSNotFound) {
            [tempResults addObject:company];
        }
    }

    if (![[sbWhere text] isEqualToString:@""]) {
        for (Company *company in tempResults) {
            if ([company.Street rangeOfString:[sbWhere text] options:NSCaseInsensitiveSearch].location != NSNotFound
                || [company.City rangeOfString:[sbWhere text] options:NSCaseInsensitiveSearch].location != NSNotFound
                || [company.ZipCode rangeOfString:[sbWhere text] options:NSCaseInsensitiveSearch].location != NSNotFound
                || [company.State rangeOfString:[sbWhere text] options:NSCaseInsensitiveSearch].location != NSNotFound
                || [company.AddressPt1 rangeOfString:[sbWhere text] options:NSCaseInsensitiveSearch].location != NSNotFound
                || [company.AddressPt2 rangeOfString:[sbWhere text] options:NSCaseInsensitiveSearch].location != NSNotFound
                || [company.Country rangeOfString:[sbWhere text] options:NSCaseInsensitiveSearch].location != NSNotFound) {
                [stuff.results addObject:company];
            }
        }
    }
    else{
        stuff.results = tempResults;
    }

    [self performSegueWithIdentifier:@"ShowResults" sender:self];
} 
```

顺便说一句，sbWhere 和 sb什么是 UISearchBars

我在这两个 if 语句上得到了 SIGABRT。我通过解析 json 字符串得到的公司。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:26:01.567

您不检查`nil`文本。如果传递`nil`给`rangeOfString:`它将抛出异常。此外，您应该存储字符串而不是多次调用相同的方法。

```
NSString *what = [sbWhat text];
//Make sure what is not nil or empty
if([what length])
    for (Company *company in stuff.companies) {
        ...

NSString *where = [sbWhere text];
//Make sure where is not nil or empty
if ([where length]) {
    for (Company *company in tempResults) {
        ... 
```

* * *

从现在开始，控制台也可能会反刍一些您应该在帖子中包含的文本。例如：

> `*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSCFConstantString rangeOfString:options:range:locale:]: nil argument' *** First throw call stack: (0x149c022 0x162dcd6 0x1444a48 0x14449b9 0x9360f6 0x96e17c 0x2a5f 0x2825 0x1) terminate called throwing an exception`

# java - 动态壁纸导致纹理在首次启动时在应用程序中显示为白色

> ID：11251166
> 
> 赞同：0
> 
> 时间：2012-06-28T18:57:42.157
> 
> 标签：java, android, andengine, live-wallpaper

我正在尝试为我的应用创建动态壁纸。

不幸的是，当我在安装动态壁纸时第一次打开我的应用程序时，一切正常，一切都显示为白色。当我离开并恢复我的应用程序时，突然一切正常。

以下是一些日志：

破碎的：

```
06-28 13:21:19.936: D/AndEngine(6680): main.onCreateScene @(Thread: 'GLThread 58')
06-28 13:21:19.960: D/AndEngine(6680): main.onPopulateScene @(Thread: 'GLThread 58')
06-28 13:21:19.960: D/AndEngine(6680): main.onGameCreated @(Thread: 'GLThread 58')
06-28 13:21:19.967: D/AndEngine(6680): main.onSurfaceChanged(Width=480,  Height=854) @(Thread: 'GLThread 58') 
```

工作时，简历上：

```
 06-28 13:21:53.944: D/AndEngine(6680): main.onSurfaceCreated @(Thread: 'GLThread 58')
 06-28 13:21:53.944: D/AndEngine(6680): main.onReloadResources @(Thread: 'GLThread 58')
 06-28 13:21:53.944: D/AndEngine(6680): main.onResumeGame @(Thread: 'GLThread 58')
 06-28 13:21:53.952: D/AndEngine(6680): main.onSurfaceChanged(Width=480,  Height=854) @(Thread: 'GLThread 58') 
```

我应该在哪里调试这个问题？有什么方法可以像在简历中加载资源一样强制重新加载资源？

如果您需要有关该错误的更多信息，请告诉我。

提前谢谢！<3

# python - 执行数千个独立交易的可靠方式？

> ID：11251167
> 
> 赞同：13
> 
> 时间：2012-06-28T18:57:42.743
> 
> 标签：python, google-app-engine, google-cloud-datastore, python-2.7

我的应用程序遇到了瓶颈，并且很难找到解决方案。一点**背景：**

*   我的应用程序 ping API 以收集有关数十万个项目的信息并将它们存储到数据存储区
*   我们需要对这些项目的混合维度执行简单的聚合，我们在存储项目期间尝试和计算

**当前实施：**

*   我们会根据需要手动启动这些项目的下载，这会在专门用于下载这些项目的后端创建任务。每个任务将根据分页和获取每个项目所需的 API 调用数启动更多任务。
*   每个任务都将下载、解析和批量存储项目，同时通过使用字典将我们想要的聚合保存在内存中。
*   在每个任务执行结束时，我们将聚合字典写入拉取队列。
*   一旦我们检测到我们即将结束 API 调用，我们就会启动一个聚合任务到第二个后端配置
*   这个“聚合任务”从拉队列中拉出（一次 20 个），并在尝试存储每个聚合之前合并每个任务中找到的字典（进一步在内存聚合中进行）。该任务还将启动其他任务以对拉取队列中的剩余任务（数百个）执行聚合
*   我们使用分[片计数器](https://developers.google.com/appengine/articles/sharding_counters)方法来帮助缓解存储到数据存储时的任何争用
*   每个聚合任务可以尝试存储 500-1500 个聚合，它们应该都是相互独立的

那里有额外的检查等，以确保正确处理所有拉队列任务并下载所有项目。

**问题：**

我们希望尽快下载和存储所有项目和聚合。我为每个描述的后端配置启用了 20 个实例（我将它们称为“聚合器”后端和“下载器”后端）。下载器后端似乎相当快地通过 API 调用。我大量使用 NDB 库和异步 URL Fetches/Datastore 调用来获得它。我还启用了 threadsafe:true 以便在开始下一个任务之前没有实例会等待 RPC 调用完成（所有任务都可以相互独立地操作并且是幂等的）。

聚合器后端是重要的时间汇发挥作用的地方。通过事务异步存储 500-1500 个这些聚合需要 40 秒或更长时间（我什至不认为所有事务都被正确提交）。我使用 threadsafe:false 保留此后端，因为我使用 300 秒的拉取队列到期期限，但如果我允许在单个实例上执行多个任务，它们可能会级联并在 300 秒内完成一些任务标记，从而允许另一个任务第二次拉同一个任务，并可能重复计算。

日志显示`BadRequestError: Nested transactions are not supported.`先前的错误（在堆栈跟踪中）为`TransactionFailedError: too much contention on these datastore entities. please try again.`. 我经常看到的另一个错误是`BadRequestError(The referenced transaction has expired or is no longer valid.)`

据我了解，有时这些错误意味着事务仍然可以在没有进一步交互的情况下提交。我怎么知道这是否已正确提交？我是以一种合乎逻辑/有效的方式来做这件事，还是有更多的并发空间而不会有把一切搞砸的风险？

相关代码：

```
class GeneralShardConfig(ndb.Model):
    """Tracks the number of shards for each named counter."""
    name = ndb.StringProperty(required=True)
    num_shards = ndb.IntegerProperty(default=4)

class GeneralAggregateShard(ndb.Model):
    """Shards for each named counter"""
    name = ndb.StringProperty(name='n', required=True)
    count = ndb.FloatProperty(name='c', default=0.00) #acts as a total now

@ndb.tasklet
def increment_batch(data_set):
    def run_txn(name, value):
        @ndb.tasklet
        def txn():
            to_put = []
            dbkey = ndb.Key(GeneralShardConfig, name)
            config = yield dbkey.get_async(use_memcache=False)
            if not config:
                config = GeneralShardConfig(key=dbkey,name=name)
                to_put.append(config)
            index = random.randint(0, config.num_shards-1)
            shard_name =  name + str(index)
            dbkey = ndb.Key(GeneralAggregateShard, shard_name)
            counter = yield dbkey.get_async()
            if not counter:
                counter = GeneralAggregateShard(key=dbkey, name=name)
            counter.count += value
            to_put.append(counter)
            yield ndb.put_multi_async(to_put)
        return ndb.transaction_async(txn, use_memcache=False, xg=True)
    res = yield[run_txn(key, value) for key, value in data_set.iteritems() if value != 0.00]
    raise ndb.Return(res) 
```

鉴于实现，我看到的“争用”的唯一空间是 2 个或更多聚合任务是否需要更新相同的聚合名称，这不应该太频繁地发生，并且对于分片计数器，我希望这种重叠很少，如果有的话， 发生。我假设 `BadRequestError(The referenced transaction has expired or is no longer valid.)`当事件循环正在检查所有小任务的状态并点击对已完成事务的引用时会出现错误。这里的问题是它出错了，这是否意味着所有交易都被过早地切断了，还是我可以假设所有交易都通过了？我进一步假设这条线`res = yield[run_txn(key, value) for key, value in data_set.iteritems() if value != 0.00]`需要被分解成一个 try/except 以检测这些错误。

在我为此发疯之前，我将不胜感激有关如何优化此过程并以可靠方式进行的任何指导/帮助。

**编辑1：** 我修改了聚合器任务行为如下：

*   如果从队列中租用了多个任务，则将这些任务聚合到内存中，然后将结果存储到拉入队列中的另一个任务中，并立即启动另一个“聚合器任务”
*   否则，如果租用了 1 个任务，请尝试保存结果

这有助于减少我所看到的争用错误，但它仍然不是很可靠。最近，我遇到`BadRequestError: Nested transactions are not supported.`了一个堆栈跟踪，表明`RuntimeError: Deadlock waiting for <Future fbf0db50 created by transaction_async(model.py:3345) for tasklet transaction(context.py:806) suspended generator transaction(context.py:876); pending>`

我相信这种修改应该通过允许聚合过程中所有可能的重叠在单个实例中组合和尝试所有可能的重叠来优化过程，而不是多个实例都执行可能发生冲突的事务。我仍然无法以可靠的方式保存结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T20:07:21.033

通过减少数据存储 I/O（将工作留给自动批处理程序并禁用索引），您可以更加确定数据存储写入完成（更少争用）并且应该更快。

配置（重命名的计数器）获取在事务之外，并且可以在遍历事务的同时并发运行。

方法和总属性被添加到 Counter 以（希望）使其更容易在将来修改。

为十进制支持创建了一个新的 ndb 属性（假设这就是您指定 0.00 而不是 0.0 的原因）。

**编辑：**

消除了对交易的需求并更改了分片系统以提高可靠性。

```
import webapp2

import copy
import decimal
import logging
import random
import string

from google.appengine.api import datastore_errors
from google.appengine.datastore import entity_pb
from google.appengine.ext import deferred
from google.appengine.ext import ndb

TEST_BATCH_SIZE = 250
TEST_NAME_LEN = 12

class DecimalProperty(ndb.Property):
    """A Property whose value is a decimal.Decimal object."""

    def _datastore_type(self, value):
      return str(value)

    def _validate(self, value):
      if not isinstance(value, decimal.Decimal):
        raise datastore_errors.BadValueError('Expected decimal.Decimal, got %r'
                                             % (value,))
      return value

    def _db_set_value(self, v, p, value):
        value = str(value)
        v.set_stringvalue(value)
        if not self._indexed:
            p.set_meaning(entity_pb.Property.TEXT)

    def _db_get_value(self, v, _):
        if not v.has_stringvalue():
            return None
        value = v.stringvalue()
        return decimal.Decimal(value)

class BatchInProgress(ndb.Model):
    """Use a scheduler to delete batches in progress after a certain time"""

    started = ndb.DateTimeProperty(auto_now=True)

    def clean_up(self):
        qry = Shard.query().filter(Shard.batch_key == self.key)
        keys = qry.fetch(keys_only=True)
        while keys:
            ndb.delete_multi(keys)
            keys = qry.fetch(keys_only=True)

def cleanup_failed_batch(batch_key):
    batch = batch_key.get()

    if batch:
        batch.clean_up()
        batch.delete()

class Shard(ndb.Model):
    """Shards for each named counter"""

    counter_key = ndb.KeyProperty(name='c')
    batch_key = ndb.KeyProperty(name='b')
    count = DecimalProperty(name='v', default=decimal.Decimal('0.00'),
                            indexed=False)

class Counter(ndb.Model):
    """Tracks the number of shards for each named counter"""

    @property
    def shards(self):
        qry = Shard.query().filter(Shard.counter_key == self.key)
        results = qry.fetch(use_cache=False, use_memcache=False)
        return filter(None, results)

    @property
    def total(self):
        count = decimal.Decimal('0.00') # Use initial value if no shards

        for shard in self.shards:
            count += shard.count

        return count

    @ndb.tasklet
    def incr_async(self, value, batch_key):
        index = batch_key.id()
        name = self.key.id() + str(index)

        shard = Shard(id=name, count=value,
                      counter_key=self.key, batch_key=batch_key)

        yield shard.put_async(use_cache=False, use_memcache=False)

    def incr(self, *args, **kwargs):
        return self.incr_async(*args, **kwargs).get_result()

@ndb.tasklet
def increment_batch(data_set):
    batch_key = yield BatchInProgress().put_async()
    deferred.defer(cleanup_failed_batch, batch_key, _countdown=3600)

    # NOTE: mapping is modified in place, hence copying
    mapping = copy.copy(data_set)

    # (1/3) filter and fire off counter gets
    #       so the futures can autobatch
    counters = {}
    ctr_futs = {}
    ctr_put_futs = []
    zero_values = set()
    for name, value in mapping.iteritems():
        if value != decimal.Decimal('0.00'):
            ctr_fut = Counter.get_by_id_async(name) # Use cache(s)
            ctr_futs[name] = ctr_fut
        else:
            # Skip zero values because...
            zero_values.add(name)
            continue

    for name in zero_values:
        del mapping[name] # Remove all zero values from the mapping
    del zero_values

    while mapping: # Repeat until all transactions succeed

        # (2/3) wait on counter gets and fire off increment transactions
        #       this way autobatchers should fill time
        incr_futs = {}
        for name, value in mapping.iteritems():
            counter = counters.get(name)
            if not counter:
                counter = counters[name] = yield ctr_futs.pop(name)
            if not counter:
                logging.info('Creating new counter %s', name)
                counter = counters[name] = Counter(id=name)
                ctr_put_futs.append(counter.put_async())
            else:
                logging.debug('Reusing counter %s', name)
            incr_fut = counter.incr_async(value, batch_key)
            incr_futs[(name, value)] = incr_fut

        # (3/3) wait on increments and handle errors
        #       by using a tuple key for variable access
        for (name, value), incr_fut in incr_futs.iteritems():
            counter = counters[name]
            try:
                yield incr_fut
            except:
                pass
            else:
                del mapping[name]

        if mapping:
            logging.warning('%i increments failed this batch.' % len(mapping))

    yield batch_key.delete_async(), ctr_put_futs

    raise ndb.Return(counters.values())

class ShardTestHandler(webapp2.RequestHandler):

    @ndb.synctasklet
    def get(self):
        if self.request.GET.get('delete'):
            ndb.delete_multi_async(Shard.query().fetch(keys_only=True))
            ndb.delete_multi_async(Counter.query().fetch(keys_only=True))
            ndb.delete_multi_async(BatchInProgress.query().fetch(keys_only=True))
        else:
            data_set_test = {}
            for _ in xrange(TEST_BATCH_SIZE):
                name = ''
                for _ in xrange(TEST_NAME_LEN):
                    name += random.choice(string.letters)
                value = decimal.Decimal('{0:.2f}'.format(random.random() * 100))
                data_set_test[name] = value
            yield increment_batch(data_set_test)
        self.response.out.write("Done!")

app = webapp2.WSGIApplication([('/shard_test/', ShardTestHandler)], debug=True)
app = ndb.toplevel(app.__call__) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T22:15:53.700

特别是关于“引用的事务已过期或不再有效”BadRequestError 的主题，这是一个鲜为人知的事实，即事务将比请求更快地超时。从创建开始，您将免费获得 15 秒的生命，之后如果事务连续闲置 15 秒（因此有效的最小生命周期为 30 秒）将被杀死，并且在 60 秒后无论如何都会被硬杀死。这使得并行运行大量事务变得困难，因为 CPU 争用和不公平的 tasklet 调度算法可能会导致一些事务空闲时间过长。

ndb 的事务方法的以下猴子补丁通过重试过期事务来提供一些帮助，但最终您必须调整批处理以将争用减少到可管理的水平。

```
_ndb_context_transaction = ndb.Context.transaction

@ndb.tasklet
def _patched_transaction(self, callback, **ctx_options):
  if (self.in_transaction() and
      ctx_options.get('propagation') != ndb.TransactionOptions.INDEPENDENT):
    raise ndb.Return((yield _ndb_context_transaction(self, callback, **ctx_options)))

  attempts = 1
  start_time = time.time()
  me = random.getrandbits(16)
  logging.debug('Transaction started <%04x>', me)
  while True:
    try:
      result = yield _ndb_context_transaction(self, callback, **ctx_options)
    except datastore_errors.BadRequestError as e:
      if not ('expired' in str(e) and
              attempts < _MAX_BAD_REQUEST_RECOVERY_ATTEMPTS):
        raise
      logging.warning(
          'Transaction retrying <%04x> (attempt #%d, %.1f seconds) on BadRequestError: %s',
          me, attempts, time.time() - start_time, e)
      attempts += 1
    else:
      logging.debug(
          'Transaction finished <%04x> (attempt #%d, %.1f seconds)',
           me, attempts, time.time() - start_time)
      raise ndb.Return(result)

ndb.Context.transaction = _patched_transaction 
```

# powershell - 从 powershell/WMI 脚本输出到文本文件

> ID：11251169
> 
> 赞同：0
> 
> 时间：2012-06-28T18:58:04.027
> 
> 标签：powershell, file-io, batch-file

在编程方面，我是一个完全的菜鸟，所以请多多包涵。我确实对该网站进行了彻底的搜索，但没有找到任何可以帮助我找出问题的东西。

我正在针对域中的 PC 列表运行以下 WMI 脚本，以从计算机列表中远程静默卸载 Java Auto Updater。

```
wmic /failfast:on /node:@"c:\names.txt" product where "name like 'Java Auto 
Updater'" call uninstall /nointeractive 
```

我想做的是这个。我想让这个脚本的输出转到一个文本文件，并显示卸载是否成功。当我运行脚本时，我收到一条消息“工作站名称” - 如果当时 PC 处于脱机状态，则没有可用的实例。我希望在运行脚本时将其显示在文本文件输出中，因为我的老板希望我记录我成功卸载软件的事实。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:23:32.017

尝试以下操作：

```
wmic /failfast:on /node:@"c:\names.txt" product where "name like 'Java Auto 
Updater'" call uninstall /nointeractive | Out-File -FilePath C:\results.txt 
```

# asp.net-mvc - MVC 将 null 反序列化为“null”（字符串）

> ID：11251174
> 
> 赞同：4
> 
> 时间：2012-06-28T18:58:34.047
> 
> 标签：asp.net-mvc

我通过 $.ajax POST 将一个对象从 jQuery 传递到 MVC3 控制器。在使用开发人员工具进行调试时，我可以看到我分配给 ajax 数据属性的对象。该对象包含值为 null 的属性。当我调试控制器时，JS 调试器中为空的属性现在是“空”（字符串）。

为什么是这样？我能做些什么来防止这种情况发生？

C# 对象

```
public class User
{
   public string Name { get; set; }
} 
```

Javascript 对象

```
var user = {
Name: null
} 
```

控制器方法

```
public JsonResult HelloWorld(User user) { .. some logic .. } 
```

ajax 调用

```
var data = user;
$.ajax({
url: '/Controller/HelloWorld/',
data: data,
type: 'post',
success: ...
error: ...
}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T19:52:25.763

是的，这是默认模型绑定器的一个不幸的副作用。您可以通过在请求中完全不包含 null 属性或使用 JSON 请求来避免它：

```
$.ajax({
    url: '@Url.Action("HelloWorld", "Controller")',
    data: JSON.stringify({ Name: null }),
    contentType: 'application/json',
    type: 'post',
    success: function (result) {
        // ...
    }
}); 
```

注意事项：

*   `contentType: 'application/json'`.
*   `JSON.stringify`围绕 data 参数，以便将请求转换为 JSON 字符串。

# php - 链式选择框 - 基本

> ID：11251175
> 
> 赞同：1
> 
> 时间：2012-06-28T18:58:35.640
> 
> 标签：php, javascript, jquery, mysql, html

我已经为即将举行的双人锦标赛建立了这个页面： [http ://excelwrestling.com/poola.php。](http://excelwrestling.com/poola.php)我从 mySQL 数据库中提取了大部分数据，现在只有一些示例数据。

我正在寻找链接选择框，因此当用户选择 TEAM 1（在顶部）时，它将更新所有 WRESTLER 1 选择框，其中仅包含该团队的名称。第 2 队也是如此。

另一部分是，当一个人选择 WRESTLER 1 与 WRESTLER 2 时，我希望这两个名称填写 WINNER 字段，因此用户只能在这两个名称之间进行选择。

您可以向我解释的任何内容或您可以发布的代码将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:02:42.287

您可能希望使用特殊查询从团队中获取摔跤手。然后使用 while 循环从数组中更新团队中的所有摔跤手。然后将数组分配给数据库中的特殊选择索引号。你能显示数据库中的内容吗？我需要知道才能提供帮助。因为我不知道你的数据库中有什么。我只是猜测您的数据库是如何组织的。假设您的团队下拉列表名为 team_select，并且 wrestler 表中的每个 wrestler 都有一个 wrestler_id wrestler_name 和一个 team_id。

您将执行以下代码

```
 $team_select = $_POST['team_select']

            $wrestler_query = "SELECT wrestler_name FROM wrestler WHERE team_id = " 
. $team_select;

            $query = mysqli_query($connection, $wrestler_query);
            //Repeat code from here... (see bottom)
            while( $team_select = mysqli_fetch_assoc($query));
            {
               echo '<option class="Select1" value="' . $team_select['wrestler_name'] . '">'</option>
            } 
        <?
          </select>

        <?php
        mysqli_data_seek($accounts,0);
     //..to here for other drop down lists (except give the different names of different drop down lists in the html.) 
```

也不要忘记，连接变量是数据库访问凭据。

# mysql - MySQL第一次UPDATE查询很慢，后续UPDATE很快

> ID：11251177
> 
> 赞同：2
> 
> 时间：2012-06-28T18:58:50.557
> 
> 标签：mysql, performance

我有一个查询：

```
Update users set Numreviews = 1 where userID = 12345 
```

'numreviews' 和 'userID' 两个字段都有帮助无关 SELECT 查询的索引。

我遇到的问题是在运行第一个 UPDATE 查询时。最多可能需要 1 分钟。当我在几秒钟后为另一个用户 ID 运行它时，通常需要几毫秒。

这种模式非常一致。

任何建议，将不胜感激。这是在 Windows Server 2008 R2 Datacenter 上运行的 MySQL 5.1.11 上。我已经尝试过多次重新启动 IIS 并重新启动数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:04:52.013

也许最初的时间基本上是醒来，连接/握手等。

看来这可能是由[MySQL 使用 DNS](http://mirrors.dotsrc.org/mysql/doc/refman/5.5/en/dns.html)的方式引起的。该链接更详细地解释了这一点，但基本上当您第一次连接时，当您第一次连接时会进行反向查找。有几种方法可以解决这个问题。最简单的（假设您从应用程序运行它）是为您的应用程序设置池。无论如何，这很好。

您还可以使用[--skip-name-resolve](http://mirrors.dotsrc.org/mysql/doc/refman/5.5/en/server-options.html#option_mysqld_skip-name-resolve)启动服务器，或增加您的 HOST_CACHE_SIZE

# php - 用户身份验证，不识别西里尔字符

> ID：11251178
> 
> 赞同：0
> 
> 时间：2012-06-28T18:58:53.637
> 
> 标签：php

我在使用西里尔字符在登录系统中插入用户名和密码时遇到问题。

密码被解码为 SHA1，当我创建一个带有西里尔字符的用户时，它对我不起作用！

你能告诉我是否需要在其中插入一些特殊的东西吗？

代码：

```
<?php
define(DOC_ROOT,dirname(__FILE__)); // To properly get the config.php file
$username = $_POST['username']; //Set UserName
$password = $_POST['password']; //Set Password
$msg ='';
if(isset($username, $password)) {
ob_start();
include(DOC_ROOT.'/config.php'); //Initiate the MySQL connection
// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($username);
$mypassword = stripslashes($password);
$myusername = mysqli_real_escape_string($dbC, $myusername);
$mypassword = mysqli_real_escape_string($dbC, $mypassword);
$sql="SELECT * FROM login_subadmin WHERE user_name='$myusername' and user_pass=SHA1('$mypassword')";
$result=mysqli_query($dbC, $sql);
// Mysql_num_row is counting table row
$count=mysqli_num_rows($result);
// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){
// Register $myusername, $mypassword and redirect to file "admin.php"
session_register("myusername");
session_register("mypassword");

header("location:index.php");
}
else {
$msg = "Wrong Username or Password. Please retry";
header("location:login.php?msg=$msg");
}
ob_end_flush();
}
else {
header("location:login.php?msg=Please enter some username and password");
}
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:10:36.073

确保将您的数据库和代码 + 标头设置为将页面处理为 UTF-8。它必须是整个页面的相同字符集。您还可以将 PHP 的散列函数用于 SHA1。

**示例代码：**

```
<?php
$myUsername=mysqli_real_escape_string($_POST['username']);
$password=$_POST['password'];
$msg="";

if(isset($username, $password))
{
    ob_start();
    include(DOC_ROOT.'/config.php'); //Initiate the MySQL connection

    $password=sha1($password);
    $result=mysqli_query("SELECT * FROM `login_subadmin` WHERE user_name='$myUsername' AND `user_pass`='$password'", $sql);

    // Mysql_num_row is counting table row
    $count=mysqli_num_rows($result);
}
?> 
```

请记住，使用 mysqli_real_escape_string(); 时，哈希可能会得到不同的结果；在密码哈希中。如果您已经对密码进行了散列：加密，只需在散列之前转义密码。

# javascript - AngularJS - 创建一个服务对象

> ID：11251181
> 
> 赞同：8
> 
> 时间：2012-06-28T18:58:57.887
> 
> 标签：javascript, angularjs

我认为这可能更多的是 javascript 问题，而不是在 Angular 邮件列表中发布。希望 SO 社区也能给予更快的响应。

我正在尝试将数据封装在服务中并注入控制器。

```
angular.module('myApp.services', ['ngResource']).
    factory('Player', function($resource){
        var Player ;
        Player = {
            resource: $resource('/api/Player/:_id', {} )
        };
        return Player
});

function PlayerDetailCtrl(Player, $routeParams, $scope) {
    $scope.resource = Player.resource.get({_id:$routeParams._id});
}
PlayerDetailCtrl.$inject = ['Player', '$routeParams', '$scope']; 
```

它抛出一个异常

```
TypeError: Object #<Object> has no method 'query' 
```

`$scope.resource = Player.Player.resource.get({_id:$routeParams._id});`也会抛出错误

```
TypeError: Object #<Object> has no method 'query' 
```

以下作品。

```
angular.module('myApp.services', ['ngResource']).
    factory('Player', function($resource){
        var Player ;
        Player= $resource('/api/Player/:_id', {} )
        return Player
});

function PlayerDetailCtrl(Player, $routeParams, $scope) {
    $scope.resource = Player.Player.get({_id:$routeParams._id});
}
PlayerDetailCtrl.$inject = ['Player', '$routeParams', '$scope']; 
```

我的意图是向`Player`. 那么我怎样才能使第一个（对象形式）起作用！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T20:32:12.370

您正在创建工厂，这是非典型的做法。你不想返回一个实例。Angular 会在你的控制器中给你一个实例。

```
 factory('Player', function ($resource) { 
    return $resource('/api/Player/:_id', { });
 }) 
```

这是我编写的用于与 cakephp REST 服务交互的服务。我前段时间写的，所以只是作为一个例子，我可能会重构。

```
 factory('CommentSvc', function ($resource) {
    return $resource('/cakephp/demo_comments/:action/:id/:page/:limit:format', { id:'@id', 'page' : '@page', 'limit': '@limit' }, {
      'initialize' : { method: 'GET', params: { action : 'initialize', format: '.json' }, isArray : true },
      'save': { method: 'POST', params: { action: 'create', format: '.json' } },
      'query' : { method: 'GET', params: { action : 'read', format: '.json' } , isArray : true },
      'update': { method: 'PUT', params: { action: 'update', format: '.json' } },
    }); 
```

}）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:50:02.220

Ok, after few tries the following worked.

```
Player = {
            resource: function() {
                     return $resource('/api/Player/:_id', {} )
            }
        }; 
```

In this I explicitly return resource object. But cannot explain how it differ from

`resource: $resource('/api/Player/:_id', {} )`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:12:06.527

看起来 JS 正在抱怨 Player 的一些代码。我猜`Player= $resource('/api/Player/:_id', {} )`有`Player`一个属性调用`query`。您更改为的表单不`Player`具有该属性。

# audio - 如何使用 ffmpeg 转换为 Nellymoser 16kHz？

> ID：11251185
> 
> 赞同：1
> 
> 时间：2012-06-28T18:59:11.243
> 
> 标签：audio, ffmpeg, flv

我正在尝试使用以下命令：

```
ffmpeg -i Fairytale.mp3 -acodec nellymoser -ar 16000 -ac 1 output.flv 
```

并得到一个错误

```
Input #0, mp3, from 'Fairytale.mp3':
  Duration: 00:03:03.64, start: 0.000000, bitrate: 96 kb/s
    Stream #0.0: Audio: mp3, 44100 Hz, 2 channels, s16, 96 kb/s
[nellymoser @ 0x7fa8c0]flv does not support that sample rate, choose from (44100, 22050, 11025).
Output #0, flv, to 'output.flv':
    Stream #0.0: Audio: nellymoser, 16000 Hz, 1 channels, s16, 64 kb/s
Stream mapping:
  Stream #0.0 -> #0.0
Could not write header for output file #0 (incorrect codec parameters ?) 
```

我肯定知道，FLV+Nellymoser 确实支持 16 KHz，但它应该设置为单独的格式，在速率字段中使用零（任意 Nellymoser 是格式号 6，而 16kHz 是 4）。

是否可以将声音重采样参数与 ffmpeg 中的标题填充分开设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:36:55.327

@Dims，与您认为自己知道的相反，ffmpeg 告诉您它接受的用于编码 nellymoser 的唯一采样率，当然不包括 16K。请参阅 Nellymoser 的文档，您将看到确认的硬编码率正是日志消息告诉您的

# ruby - Ruby方法在字符串数组中查找字符串

> ID：11251187
> 
> 赞同：4
> 
> 时间：2012-06-28T18:59:21.230
> 
> 标签：ruby

我有一个字符串数组，如下所示：

```
[noindex,nofollow] 
```

或 [“索引”、“关注”、“全部”]

我称这些为“tags_array”。我有一个看起来像这样的方法：

```
return true if self.tags_array.to_s.include? "index" and !self.tags_array.to_s.include? "noindex" 
```

但我认为运行此代码有一种更聪明的方法，而不是获取整个数组并将其转换为字符串。

问题是，有时信息以单个元素数组的形式出现，而有时它以字符串数组的形式出现。

关于最聪明的方法的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T19:21:03.043

您不必将 Array 转换为 String，因为 Array 包含一个`include?`方法。

```
tags_array.include?("index") #=> returns true or false 
```

但是，就像您说的那样，有时信息以单个字符串的数组形式出现。如果该数组的单个字符串元素包含始终由空格分隔的单词，那么您可以使用该[`split`](http://ruby-doc.org/core-1.9.3/String.html#method-i-split)方法将字符串转换为数组。

```
tags_array[0].split.include?("index") if tags_array.size == 1 
```

或者如果单词总是用逗号分隔：

```
tags_array[0].split(",").include?("index") if tags_array.size == 1 
```

编辑：

或者，如果您不知道它们将被什么分隔，但您知道这些单词只会包含字母：

```
tags_array[0].split(/[^a-zA-Z]/).include?("index") if tags_array.size == 1 
```

# c# - 绑定列表 没有出现在它也被绑定的datagridview中

> ID：11251189
> 
> 赞同：1
> 
> 时间：2012-06-28T18:59:25.647
> 
> 标签：c#, windows, winforms

我已经看了一遍，似乎无法弄清楚为什么我的 c# windows 窗体应用程序不工作。

所以我有一个带有一些私有成员的 Item 类：

```
public class Item : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private string name_;

    public string name { 
        get { return name_;}
        set
        {
            name_ = value;
            this.NotifyPropertyChanged("Name");
        }
    }
    private void NotifyPropertyChanged(string name)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(name));
    }
} 
```

然后我有另一个类包含项目的绑定列表

```
public class ItemList
{
    public BindingList<Item> listItems { get; set; }

    // Default constructor
    public ItemList()
    {
        listItems = new BindingList<Item>();
    }
    public BindingList<Item> returnList()
    {
        return listItems;
    }
    public void addItem(Item newItem)
    {
        listItems.Add(newItem);
    }
} 
```

然后我有一个从 listItems 链接到 datagridview 的 BindingSource

问题是我将项目添加到 listItems 并且它们没有显示在 datagridview 中。datagridview 正在查看我的所有数据成员并为它们创建列，但它没有显示项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:11:18.540

试试这个，我感觉你一直在添加 ItemList 实例而不是 listItems。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        ItemList list = new ItemList();
        list.listItems.Add(new Item() { name = "Sample" });
        list.listItems.Add(new Item() { name = "Sample" });
        list.listItems.Add(new Item() { name = "Sample" });
        list.listItems.Add(new Item() { name = "Sample" });
        list.listItems.Add(new Item() { name = "Sample" });
        list.listItems.Add(new Item() { name = "Sample" });

        dataGridView1.DataSource = list.listItems;

    }
}

public class Item : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private string name_;

    public string name
    {
        get { return name_; }
        set
        {
            name_ = value;
            this.NotifyPropertyChanged("name");
        }
    }
    private void NotifyPropertyChanged(string name)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(name));
    }
}

public class ItemList
{
    public BindingList<Item> listItems { get; set; }

    // Default constructor 
    public ItemList()
    {
        listItems = new BindingList<Item>();
    }
    public BindingList<Item> returnList()
    {
        return listItems;
    }
    public void addItem(Item newItem)
    {
        listItems.Add(newItem);
    }
} 
```

# gcc - 带有较新 GCC 的 OpenEmbedded 工具链

> ID：11251190
> 
> 赞同：1
> 
> 时间：2012-06-28T18:59:33.473
> 
> 标签：gcc, toolchain, cross-compiling, openembedded

我想使用具有 gcc 4.6 版或 linaro gcc 而不是默认提供的 gcc 4.5 版的 OpenEmbedded 构建一个交叉编译工具链。这可能吗？我想我应该只需要在 local.conf 文件中进行一些更改，但我无法弄清楚是什么。需要明确的是，我使用的是 OE 经典而不是 OE-core。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:22:26.767

您将在配置中设置以下内容：

```
PREFERRED_GCC_VERSION ?= "4.6" 
```

不过，oe-dev 中没有 GCC 4.6 的配方。oe-core 附带 GCC 4.7。

您可能会发现以下页面也很有趣：

[https://wiki.linaro.org/KenWerner/Sandbox/OpenEmbedded-Core](https://wiki.linaro.org/KenWerner/Sandbox/OpenEmbedded-Core)

# magento - Magento超属性配置

> ID：11251193
> 
> 赞同：2
> 
> 时间：2012-06-28T18:59:38.367
> 
> 标签：magento, configuration, attributes, super

我有一家商店，安装了 Mico AVP 价格变化扩展。这使您可以根据选定的属性数据确定价格并应用折扣。

这是基于基本的公共标志。健康与安全、一般注意事项等。作为配置产品流程的一部分……产品有 2 个自定义选项。高度和宽度。我有一个观察者，可以在新产品或更新产品时将它们添加到产品中……如果它们不存在。

我有第三种选择，称为材料。我已经为每种材料创建了三个简单的产品……onr。这些被分配给“标志”产品。在超级属性配置部分...我添加了设置价格，用于帮助计算产品的最终价格。

目前......我需要为我创建的每个可配置标志添加此信息。我想自动化这个。我想，如果我将价格添加到实际的简单产品（例如，我创建的材料产品）中，它将使用此信息。但它没有。我必须设置“超级属性配置”价格。

我试图更多地了解这个领域，因为它没有按预期工作。为什么我必须设置“sac”价格……如果没有设置 sac 价格，为什么不使用设置的产品价格？

希望这是有道理的。这是一个屏幕截图。我想更改产品价格（目前显示为 0.02）..并使用这些而不是您看到的十进制“价格”。然后，我只需要在特定材料的价格发生变化时更新“材料”产品。

谢谢

![在此处输入图像描述](../Images/a325d13d8b8e8bb85444412fe12f98e7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:22:31.313

如果我正确理解您的问题，我会看到 Magento 本身说“相关产品的价格不用于计算”。在可配置产品中。

查看[http://www.magentocommerce.com/knowledge-base/entry/additional-configurable-product-settings](http://www.magentocommerce.com/knowledge-base/entry/additional-configurable-product-settings) 尤其是我刚刚在上面引用的最后一行。

希望这可以帮助。

# jpa - 无法将 play.db.jpa.Model 导入我的模型

> ID：11251194
> 
> 赞同：5
> 
> 时间：2012-06-28T18:59:40.243
> 
> 标签：jpa, model, playframework

我无法以某种方式将`play.db.jpa.Model`lib 导入到我的模型中，它只能找到`play.db.ebean.Model`. 有没有办法导入这个？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T19:04:49.313

那是因为`play.db.jpa.Model`Play 1.x 和`play.db.ebean.Model`Play 2.x。

要在 Play 2.x 中使用 JPA，请参阅[http://www.playframework.org/documentation/2.0/JavaJPA](http://www.playframework.org/documentation/2.0/JavaJPA)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-19T11:54:49.293

play.db.jpa.Model 类从 play 2.0 开始不可用。我发现这个问题的解决方案是：

*   在`YourProject/conf/application.conf`中，声明 JPA 配置：

> db.default.driver=org.h2.Driver
> db.default.url="jdbc:h2:mem:play"
> db.default.jndiName=DefaultDS

和持久化单元：

> jpa.default=defaultPersistenceUnit

*   在 YourProject/conf/ 创建一个名为 META-INF 的新包

*   在这个包中创建一个名为的文件`persistence.xml`：

> ```
>  <persistence xmlns="http://java.sun.com/xml/ns/persistence"
>                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>                  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
>                  http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
>                  version="2.0">
> 
>         <persistence-unit name="defaultPersistenceUnit" transaction-type="RESOURCE_LOCAL">
>             <provider>org.hibernate.ejb.HibernatePersistence</provider>
>             <non-jta-data-source>DefaultDS</non-jta-data-source>
>             <properties>
>                 <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
>             </properties>
>         </persistence-unit>
> 
> </persistence> 
> ```

*   在`YourProject/project/Build.scala`修改依赖项以添加以下内容：

> val appDependencies = Seq(
> // 在这里添加你的项目依赖，
> javaCore,
> javaJdbc,
> javaJpa,
> "org.hibernate" % "hibernate-entitymanager" % "4.2.1.Final"
> )

如果您不打算使用 Ebean，您也可以禁用它：

```
val main = play.Project(appName, appVersion, appDependencies).settings(
  ebeanEnabled := false 
) 
```

*   在此之后，在您的项目上运行 play eclipse 并刷新。

希望这可以帮助。

# php - 有混合内容时检索 XML 子节点

> ID：11251197
> 
> 赞同：2
> 
> 时间：2012-06-28T19:00:06.193
> 
> 标签：php, simplexml

我在这里阅读了几个似乎与我遇到的问题相关（直接或间接）的问题，但到目前为止没有一个问题能满足我的具体需求，所以我想我会解释一下我的情况，看看是否我们可以一起想出一个答案。

我有一个 XML 类别数据库（特别是 AIML），我想使用 simpleXML 函数来解析它，以提供合适的输出。此解析后的输出是从所选类别中的标签处理的。一个简单的示例类别如下所示：

```
<category>  
  <pattern>HOW ARE YOU</pattern>  
  <template>I am fine, how are you?</template> 
</category> 
```

上面显示的 <template> 标记可以包含文本（如上所示），也可以包含任意数量的不同 AIML 标记中的一个或多个，可以单独保存，也可以散布在文本中。可能性几乎是无穷无尽的。这是一个更复杂的例子：

```
<category>
  <pattern>NESTED RANDOM TEST</pattern>
  <template>
    <random>
      <li>
        <random>
          <li>Choice #1-1</li>
          <li>Choice #1-2</li>
          <li>Choice #1-3</li>
        </random>
      </li>
      <li>
        This is some example text, along with another RANDOM tag:
        <random>
          <li>Choice #2-1</li>
          <li>Choice #2-2</li>
          <li>Choice #2-3</li>
        </random>
      </li>
      <li>
        <random>
          <li>Choice #3-1</li>
          <li>Choice #3-2</li>
          <li>Choice #3-3</li>
        </random>
        This is some text that appears [i]after[/i] a RANDOM tag.
      </li>
    </random>
  </template>
</category> 
```

如果模板标签只包含文本，或者它只包含其他 AIML 标签，我解析它的内容没有问题，但如果它有文本和标签的组合，如第二和第三个外部 <li> 部分上面的例子，我要么丢失标签，如果有文本，或者文本，如果有一个标签在它之前。无论标签内的文本有多“深”或“浅”，都会出现此问题。因此，我在这里有点问题。

正如我已经提到的，我已经阅读了几个这种性质的问题，但到目前为止我还没有找到满意的答案。但是，我怀疑这可能是因为我没有完全理解所涉及的一些概念，因此可能没有正确实施某些解决方案。例如，[这篇文章](https://stackoverflow.com/questions/10065648/parsing-mixed-text-and-xml-nodes-with-xstream)提到了使用 xslt 对 xml 进行“预处理”，这*似乎*可以解决我的问题，但我完全不知道如何实现它。另外，我没有使用 xStream，所以我什至不知道这是否**可以**实现。恐怕我从未接受过正式的 PHP 培训，所以我的经验有点参差不齐。:)

我希望我已经提供了足够的信息来清楚我的情况，而不会太“罗嗦”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-10T17:07:30.297

尽管提出的答案确实很聪明，但我发现自己完全放弃了 SimpleXML，而是使用 PHP 的内置[DOMElement 类](http://php.net/manual/en/class.domelement.php)。它支持将裸文本内容公开为自己的谨慎节点的类和方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:40:34.800

虽然这可能不是解决我的问题的**最佳**方法，但我找到了一种相当简单且（至少对我而言）有点优雅的方法来处理我的问题，方法是使用 preg_replace() 将任何纯文本实例包含在 XML 中<text> 标签中的字符串。这是我想出的：

```
//First, some simple mixed-content XML:
$myTemplate = '<template>Hello, <get name="name" />. I\'m glad to meet you.</template>';
$myTemplate = preg_replace('~>(.*?)<~', '><text>$1</text><', $myTemplate);
/*
This can add unnecessary, empty <text> tags under certain circumstances, so the next line
removes empty tag sets
*/
$myTemplate = str_replace('<text></text>', '', $myTemplate);
/*
This makes the template look like this:

<template><text>Hello, </text><get name="name" /><text>. I\'m glad to meet you.</text></template>

Now, to load my template as XML.
*/
$xml = new SimpleXMLElement($myTemplate); 
```

从那里，我可以根据需要解析 XML。正如我所说，这可能不是最好的方法，但它很有效，并且只添加了几行代码。我仍然很想听听其他处理这个问题的方法，但现在，这将是可行的。我希望这对其他人有帮助。:)

# linux - 是否可以在 linux 上使用 xcodebuild？

> ID：11251202
> 
> 赞同：20
> 
> 时间：2012-06-28T19:00:24.673
> 
> 标签：linux, xcode, compiler-construction, xcodebuild

假设我在 linux 机器上有一个 Xcode 项目，我想像我在 Mac 上做的那样，安装和使用`xcodebuild`来简单地编译项目，而不是运行它或任何花哨的东西，只是简单地编译它以检查错误。

是否可以`xcodebuild`在 Linux 机器上安装，或者完全不可能，如果可以，我有什么替代方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T19:06:31.917

您不能在 Linux 上使用标准的 Apple 开发人员工具，因为它们是为 Mac OS X 编译的。

但是，如果您正在为 iOS 编译，则可以为 linux 构建一个开源 iOS 工具链并使用它来编译您的应用程序。不过，您需要一个越狱设备来上传二进制文件。

如果您使用的是普通的 OS X 应用程序，那么，只要您有必要的库和框架，您就可以使用 make 为 Linux 构建项目。

# c# - SQLite DataAdapter UpdateBatchSize 错误

> ID：11251205
> 
> 赞同：0
> 
> 时间：2012-06-28T19:00:53.603
> 
> 标签：c#, sqlite, dataadapter

背景：

我正在尝试将 DataTable 复制到 SQLite 数据库。与在 SQLServer 数据库上运行的等效数据集相比，SQLite 版本需要大约 5 倍的时间。为了简化这一点，我尝试使用我正在使用的 SQLiteDataAdapter 的 UpdateBatchSize 属性来启用批处理。

问题：

但是，任何设置该值的尝试都会导致 System.NotSupportedException。您如何正确设置该值？见代码：

```
public int InsertDataTable(DataTable dt, string selectCommand)
{
    SQLiteDataAdapter myAdapter = new SQLiteDataAdapter(selectCommand, m_conn);
    myAdapter.UpdateBatchSize = 0;
    int rowsAffected = myAdapter.Update(dt.Select());
    return rowsAffected;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:18:50.233

UpdateBatchSize 的目的是在将 SQL 语句通过线路发送到数据库服务器之前将它们组合在一起。在 SQLite 中，您不需要这样做，因为没有网络连接：您使用的是直接文件访问。这可能就是您收到错误的原因，大概是驱动程序意识到它对该设置没有做任何事情，所以它出错了。

如果您使用的是 SQL Server，那么将该设置增加到 2 意味着它将两个 UPDATE 语句组合在一起并发送它们，而不是一次发送一个。将其设置为更大的数字意味着与服务器的往返次数更少。因此，如果您使用 SQL Server，您可以将其设置为更大的数字，以减少网络延迟的影响。将其设置为 0 意味着每个批次的语句数量没有限制，但这可能意味着您的批次非常大。

创建显式事务解决了您的性能问题的原因是，如果您不在事务中执行 sqlite 操作，那么每个 sql 语句都会隐式创建一个。这使得它需要更长的时间，大概它必须为每个语句执行文件锁定和日志记录以及各种事情。因此，在使用 SQLite 时，您应该始终明确地创建事务，这将使您比不这样做有一个数量级的改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:27:19.517

可以通过另一种方法实现相同的性能提升。与其尝试修改 UpdateBatchSize，不如创建一个包含更新的 SQLiteTransaction。

```
public int InsertDataTable(DataTable dt, string selectCommand)
    {
        SQLiteDataAdapter adapter = new SQLiteDataAdapter(selectCommand, m_conn);
        SQLiteCommandBuilder builder = new SQLiteCommandBuilder(adapter);
        SQLiteTransaction transaction = m_conn.BeginTransaction();
        builder.GetInsertCommand().Transaction = transaction;
        int rowsAffected = adapter.Update(dt.Select());
        transaction.Commit();            
        return rowsAffected;
    } 
```

来源：

[SQLite 事务](http://www.devart.com/dotconnect/sqlite/docs/Devart.Data.SQLite~Devart.Data.SQLite.SQLiteTransaction.html)

# ios - 是否可以在其他 UI 元素后面显示 Popover？

> ID：11251208
> 
> 赞同：1
> 
> 时间：2012-06-28T19:01:20.580
> 
> 标签：ios, uiview, uikit, uipopovercontroller

在 iOS 应用程序中，是否可以在其他元素后面显示弹出框？

例如，如果我有一个`UIView* myView`已经包含几个子视图，并且我创建了一个新的子视图，并在视图中`UIView* popopverView`调用，它仍然显示在其他子视图中的元素前面，即使我调用`presentPopoverFromRect``popopverView``[myView sendSubviewToBack:popoverView]`

我测试了其他元素，例如按钮，它们显示在其他元素的后面。弹出窗口是否固有地显示在所有子视图之上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:08:07.517

从[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html)中：

> 您可以使用弹出框临时呈现信息，但不会像模态视图那样占据整个屏幕。弹出内容在特殊类型的窗口中叠加在现有内容之上。弹出框保持可见，直到用户在弹出框窗口之外点击或您明确将其关闭。

不可能“隐藏” a `UIPopoverController`- 您将其关闭（或用户关闭）。无论如何，您不需要在 a 上显示其他视图`UIPopoverController`- 这就是*它的*目的。

# spotify - libspotify API：sp_album_year 并不总是返回发布年份

> ID：11251209
> 
> 赞同：0
> 
> 时间：2012-06-28T19:01:24.407
> 
> 标签：spotify

如果我用“tag:new”搜索，spotify 会返回一个新专辑列表，但有些专辑没有显示发行年份。但如果我用专辑名称搜索这些专辑，发行年份确实存在。这两个搜索在内部使用相同的 API（使用**sp_search_create**开始搜索并使用**sp_album_year**在 search_complete 回调中获取年份），为什么结果不同？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:54:59.483

在您对专辑执行操作之前，专辑年份不存在`sp_album_browse()`。我猜这些搜索之一是在内部触发相册浏览。

# uitableview - prepareForSegue 和设置属性设置

> ID：11251215
> 
> 赞同：0
> 
> 时间：2012-06-28T19:01:38.127
> 
> 标签：uitableview, ios5, properties, storyboard, segue

我有一个 UITableViewController 显示默认的单元格。可以触摸每个单元格并将其带到第一个视图中每个单元格所拥有的“帐户”内的列表中。

我用一个 segue 连接了所有东西，然后在我的第一个视图中我调用：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        Account *nextAccount = [self.list objectAtIndex:indexPath.row];
        DetailViewController *viewController = (DetailViewController *)[segue destinationViewController];
        viewController.account = nextAccount;
    } 
} 
```

然后在详细视图的 viewDidAppear:(BOOL)animated 我说：

```
 - (void)viewDidAppear:(BOOL)animated {
self.list = [self.account.list mutableCopy];
} 
```

然后我在详细视图上有一个 UITableViewController 但在 cellForRowAtIndexPath: 方法中我访问了 self.list 但它似乎不起作用。我知道我的 cellForRowAtIndexPath: 有效，因为之前我使用该方法做了一些模板工作并且效果很好。似乎只是 prepareForSegue: 不起作用或未设置属性。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:21:24.807

使用 NSLog 并检查每个元素是否 != nil。（nextAccount 等）Objective C 很乐意让您向 nil 对象发送消息而不会抛出错误消息。

还要在你的 segue 条件语句中添加一个日志语句，以确保它被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:05:36.530

它可能在调用 viewDidAppear 之前很久就尝试设置详细信息表视图。而是尝试覆盖数据模型的设置器：

```
-(void)setList:(List*)list    // or whatever type list is
{
    if (_list != list) {
        _list = [list mutableCopy];
    }
} 
```

然后它应该在加载视图之前创建副本。

此外，如果您要覆盖 viewDidAppear，请务必调用 super：

```
[super viewDidAppear]; 
```

# php - 由于出站端口阻塞，无法访问 phpMyAdmin

> ID：11251228
> 
> 赞同：0
> 
> 时间：2012-06-28T19:03:00.137
> 
> 标签：php, mysql, phpmyadmin, webserver

我有一个在一些工具中使用的远程 mySQL 表，有时我需要临时从特定测试站点内部访问该表。问题是我无法访问 phpMyAdmin，因为该站点的出站端口被阻止。我的 phpMyAdmin 是通过我的远程服务器（端口 8443）上的 Plesk 控制面板访问的。

我相当擅长网络编程，并且可以想出几种方法来为远程管理界面公开表格，该界面将在端口 80 上运行并带有一个小的登录屏幕，但考虑到解决端口阻塞似乎需要做很多工作以及我只会使用它几次。

我也可以在服务器上的其他地方安装另一个 phpMyAdmin 实例并使用它，但是我觉得我暴露了一大堆安全问题，再次只是为了克服特定客户端的端口阻塞。

我很确定我不能更改现有的 phpMyAdmin 端口号，因为它必须通过 Plesk 访问。

说了这么多，我希望有人可以推荐一个简单的解决方案，这将有助于解决这种情况。也许是一个开箱即用的元素，它允许我编辑一个表，如果我的正确密码发布到页面上，我就可以开始一个会话？

我正在寻找任何具体的答案只是一个一般的想法

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T21:25:45.400

您可以配置 Apache 以便它[侦听多个端口](http://httpd.apache.org/docs/2.2/mod/mpm_common.html#listen)。

这不会造成另一个潜在的安全漏洞。事实上，它只是在端口 80 上暴露了与在端口 8443 上已经暴露的相同的潜在安全漏洞。除了端口 80 是众所周知的端口，更容易被扫描。

您可以（应该？）还配置 Apache，使其[仅允许来自一小组 IP 的](https://httpd.apache.org/docs/2.2/howto/access.html)连接。

您可以在 Apache 配置中添加类似这样的内容：

```
Listen 80
NameVirtualHost *:80

<Directory /path/to/phpMyAdmin>
    Order Deny,Allow
    Deny From All
    Allow From [space-separated list of authorised IP here]
</Directory>

<VirtualHost *:80>
    DocumentRoot /path/to/phpMyAdmin
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T23:36:20.930

如果您对远程主机（安装了 Plesk 和 phpMyAdmin）具有 SSH 访问权限，您可以使用该命令创建一个 SSH 隧道，`ssh user@host.tld -L 80:127.0.0.1:8443`然后通过`http://localhost/`.

如果本地主机上已经存在网络服务器，请相应地更改`80`SSH 命令中的端口。

Also, you should consult SSH's man page. SSH tunneling offers great possibilities (you could just bind an admin console to 127.0.0.1 and still access it from your own computer, using an SSH tunnel).

# jquery - 使用 JQuery 查找 HTML 视频

> ID：11251229
> 
> 赞同：5
> 
> 时间：2012-06-28T19:03:23.330
> 
> 标签：jquery, html, video

我正在尝试寻找视频的特定部分，并且我想使用 JQuery。

`$('#video').currentTime`给我未定义。有什么我想念的吗？

（`document.getElementById("video").currentTime`作品）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T19:10:48.637

了解 jQuery 选择器函数返回一个 jQuery 对象很重要。因此，您不能直接访问属性，除非 jQuery 设置了一个特殊的函数来处理它们。

您想要做的是获取`currentTime`属性，以便您可以使用[`prop()`](https://api.jquery.com/prop/)

```
$('#video').prop('currentTime'); 
```

或者，如果你感觉更香草：

```
$('#video')[0].currentTime; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-05T03:08:17.797

注意设置时间（seek），您应该将值作为第二个参数传递。

```
$('#video').attr('currentTime', 0); 
```

# c# - ASP.NET 的 Dundas 图表 - 强制图表显示 100%

> ID：11251230
> 
> 赞同：0
> 
> 时间：2012-06-28T19:03:24.627
> 
> 标签：c#, asp.net, charts, dundas

我正在使用 C# .NET 3.5、Dundas Charts 7.2。这是我在 .aspx 文件中的图表。

```
<DCWC:Chart ID="Chart2" Height="140px" Width="245px" runat="server" DataSourceID="ObjectDataSource1"
    Palette="Pastel">
    <Legends>
        <DCWC:Legend Name="Default" Enabled="False">
        </DCWC:Legend>
    </Legends>
    <BorderSkin PageColor="AliceBlue" />
    <Titles>
        <DCWC:Title Name="Title1">
        </DCWC:Title>
    </Titles>
    <Series>
        <DCWC:Series CustomAttributes="BarLabelStyle=Outside" BorderColor="64, 64, 64" Color="#3782EE" ChartType="Bar" Name="Series1"
            ShadowOffset="1" ShowLabelAsValue="True" ValueMemberX="Title" ValueMembersY="Score">
        </DCWC:Series>
    </Series>
    <ChartAreas>
        <DCWC:ChartArea Name="Default">
            <AxisY>

                <LabelStyle IntervalOffset="20" Interval="20" Format="P0" />
                <MajorTickMark Style="none" />
            </AxisY>
            <AxisX>
                <MajorGrid Enabled="False" />
                <MajorTickMark Style="none" />
            </AxisX>
        </DCWC:ChartArea>
    </ChartAreas>

</DCWC:Chart> 
```

Y 轴设置为以百分比显示值，因为图表中的最高数字数据是 42%，它在图表的 Y 轴上最多只能显示 60%（因为我将间隔设置为 20）。我正在寻找的是一种强制图表显示 Y 轴高达 100% 的方法，即使这将留下几乎 60% 的空白空间。在 aspx 图表参数或代码隐藏中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:27:29.497

对我来说，图表代码设置中的这条简单线有效：

```
Chart2.ChartAreas("Default").AxisY.Maximum = 100 
```

# xpages - 从Xpages中的editDocument重定向到openDocument？

> ID：11251232
> 
> 赞同：0
> 
> 时间：2012-06-28T19:03:37.750
> 
> 标签：xpages

如果用户输入带有 action=editDocument 的 URL，我希望能够将他们重定向到相同的 URL，但使用 action=openDocument。

我假设我会使用 beforePageLoad 事件？

我怎样才能阻止他们转到 action=editDocument 并将它们重定向到 action=openDocument url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:51:07.823

如果参数操作是“editDocument”，则以下内容将重定向回同一页面（从而阻止用户编辑文档）：

```
<xp:this.beforePageLoad>
    <![CDATA[#{javascript:
        if (param.get("action")=="editDocument") {
            context.redirectToPage(view.getPageName())
        }
    }]]>
</xp:this.beforePageLoad> 
```

**更新：**正如马克在他的回答中指出的那样，如果包含上述答案，则不会保留 documentId 参数。您可以检查是否包含 documentId 参数，然后使用该参数进行正确的重定向：

```
<xp:this.beforePageLoad>
    <![CDATA[#{javascript:
        if (param.get("action")=="editDocument") {
            context.redirectToPage(view.getPageName() + "?action=openDocument&documentId=" + param.get("documentId")
        }
    }]]>
</xp:this.beforePageLoad> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:59:59.820

如果你有editDocument，你可能会在请求中有一个docID，在这种情况下`view.getRequestUrl()`比`view.getpageName()`

# state-diagram - 用于打印 SDL/PR 图的工具

> ID：11251234
> 
> 赞同：1
> 
> 时间：2012-06-28T19:03:48.467
> 
> 标签：state-diagram

可悲的是，UML 实际上已经扼杀了[SDL](http://en.wikipedia.org/wiki/Specification_and_Description_Language)（规范和描述语言，ITU Z.100），并且在今天很难找到支持 SDL 的有用工具。

我想打印状态图，我记得几年前我使用过一个免费工具。这是很久以前某家公司（如果我没记错的话来自巴西）开发的 Windows 二进制文件，但由于他们不再对它有任何商业兴趣，他们提供免费下载（只是二进制文件，没有源代码） . 它至少可以打印我正在寻找的 SDL/PR 文件。

我试图搜索它，但找不到它。有没有人有这个工具的链接（或名称）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:13:17.383

我不知道这个工具，但如果您对免费的 SDL 流程编辑器感兴趣，那里有一个：[http ://www.opengeode.net](http://www.opengeode.net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-02T22:53:41.433

我创建了一个用于解释 SDL 进程的 C++ 库。它不完全是您正在寻找的东西，但是使用这个库您还可以生成 SDL/GR 图。

图书馆：[https ://github.com/trodevel/fsm](https://github.com/trodevel/fsm)

例子：

[![在此处输入图像描述](../Images/e83a8aecda47f322df1f1970663aca37.png)](https://i.stack.imgur.com/5Om4Y.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:44:05.793

最后我找到了。它被称为[SDLT](http://www.labcomsistemas.com.br/f_eng_sdlt.htm)：

> 什么是
> 
> SDLT 是用于 SDL-PR 语言的免费 SDL 编译器，可生成 PostScript 格式的 SDL-GR。
> 
> SDL 语言是一种非常适合用于面向服务的应用程序的规范和描述的语言。
> 
> SDLT 程序 comp.exe、pag.exe 和 form.exe 最初是在 CPqD TELEBRAS 中开发的，并于 1986 年与 TROPICO R 产品一起转让给合同制造商。
> 
> 如果您安装了 CutePDFTM 打印机，SDLT 还会生成 PDF 格式的 SDL-GR。

更新：

出于某种原因，从 sdlt 程序运行编译时出现“找不到文件”错误。由于它只是一个图形前端，我已经弄清楚如何从 Makefile 运行所需的后端：

```
# Variables assigned with = are evaluated at each substitution.
# Variables assigned with := are evaluated at assignment.
SDLT_CONF := $(shell mktemp sdlt.conf.XXXXXXXXXX)

all: basics1.pdf

%.pdf: %.ps
        ps2pdf $^ $@

%.ps: %.prg
        ./mk_dosbox_conf.sh `pwd` `echo $@ | sed 's/\.ps$$//'` > $(SDLT_CONF)
        dosbox -conf $(SDLT_CONF)
        rm $(SDLT_CONF)
        mv \
                `echo $@ | tr "[:lower:]" "[:upper:]"` \
                `echo $@ | tr "[:upper:]" "[:lower:]"` 
```

并具有以下内容`mk_dosbox_conf.sh`：

```
#!/bin/sh

# Makes a dosbox.conf file that automates what SDLT.exe does

if [ $# -ne 2 ]
then
        echo "Usage: $0 <directory> <filenamebase>"
        exit 1
fi

cat <<EOF
[autoexec]
mount c: $1
c:
comp $2
pag  $2
form $2
del $2.SBL
del $2.LST
del $2.RSP
del $2.TXT
exit
EOF 
```

# android - Android 支持 ViewPager 是不可见的

> ID：11251236
> 
> 赞同：2
> 
> 时间：2012-06-28T19:03:52.550
> 
> 标签：android, android-layout, android-viewpager

我已经在我的应用程序中实现了来自 android 支持库的 ViewPager，并且由于某种原因它现在是不可见的。应用程序布局有点嵌套，我确信这会导致一些问题。我将尝试将其压缩为有意义的代码。我的布局膨胀代码：

```
LinearLayout ll = (LinearLayout) findViewById(R.id.root);

View v = getLayoutInflater().inflate(R.layout.project_row, null);

TextView header = (TextView) v.findViewById(R.id.rowheader);
header.setText(rowHeader);

ViewPager projectRow = (ViewPager) v.findViewById(R.id.pager);
projectRow.setAdapter(new ProjectPagerAdapter(tiles));

LinePageIndicator lineIndicator = (LinePageIndicator)v.findViewById(R.id.pagerIndicator);
lineIndicator.setViewPager(projectRow);
lineIndicator.setStrokeWidth(7);
lineIndicator.setLineWidth(50);
lineIndicator.setSelectedColor(Color.parseColor("#555555"));
lineIndicator.setUnselectedColor(Color.parseColor("#DCDCDC"));

ll.addView(v); 
```

项目行.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

<TextView
    android:id="@+id/rowheader"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="@color/SectionHeaderColor" />

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="280dp" />

<com.viewpagerindicator.LinePageIndicator
    android:id="@+id/pagerIndicator"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

如果我使用这个膨胀代码，ViewPager 会自行工作：

```
LinearLayout ll = (LinearLayout) findViewById(R.id.root);

View v = getLayoutInflater().inflate(R.layout.pageronlytest, null);
ViewPager vp = (ViewPager)v.findViewById(R.id.pager);
vp.setAdapter(new ProjectPagerAdapter(tiles));

ll.addView(v); 
```

pageronlytest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="280dp"
    android:orientation="vertical" >

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="280dp" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T19:10:03.423

在`project_row.xml`您没有明确声明 的方向时`LinearLayout`，这意味着它将默认为“水平”。由于第一个元素 ( `TextView`) 定义了`match_parent`/`fill_parent`宽度，它将有效地将所有其他元素推到右侧并离开屏幕。

话虽这么说，您可能只需要添加`android:orientation="vertical"`到，`LinearLayout`就可以了。

# javascript - jQuery ajax 调用“未找到”错误

> ID：11251240
> 
> 赞同：8
> 
> 时间：2012-06-28T19:04:25.440
> 
> 标签：javascript, jquery, ajax

您好我一直在尝试对 JSP 页面进行 ajax 调用。这是JS函数的一部分。

```
<script>
$(function(){

  function myAjaxCall() {
     $.ajax({
        type: "post",
        url: "jsp/common/myJavascriptPage.jsp",
        dataType: "text",
        success: 
            function (result) {
               alert("Got the result: " + result);
            },
            error: function (xhr,status,error) {
               alert("Status: " + status);
               alert("Error: " + error);
               alert("xhr: " + xhr.readyState);
            },
            statusCode: {
               404: function() {
                   alert("page not found");
               }
            }
        });
   }
 });
 </script> 
```

即使提到的 URL 中存在 JSP，我也经常找不到文件。请注意，我正在计算相对于 webapp 目录的 JSP 文件位置。

我尝试使用普通的 AJAX 调用（没有 jQuery），但最终出现了同样的错误。

你能帮我理解为什么它无法找到jsp吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T19:07:56.253

> 请注意，我正在计算相对于 webapp 目录的 JSP 文件位置。

这就是你出错的地方。

AJAX 是从客户端的 Web 浏览器执行的，这意味着它与服务器上的任何内容都无关。

如果您要在网络浏览器中访问该页面，您会去哪里？

这就是您希望请求 URL 所在的位置。

**编辑：我显然没有很好地解释这一点，所以再试一次！**

假设我的服务器上有一个文件存储如下：

`my_website/src/webapp/jsp/common/myFile.jsp`

如果我想通过可*公开访问的 URL*访问此资源，它与上面的文件路径不同。它可能类似于`common/myFile.jsp`或什至是`common/myFile`.

如果是这种情况，那么我必须使用可*公开访问的 URL*来将 AJAX 请求发送到该 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:07:46.357

您的网址似乎不完整。错误的最可能原因是您没有完全限定的 URL。

尝试指定完整路径，看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T06:01:03.987

请检查页面未找到错误上的以下两点。我也面临同样的问题。我的情况是调用 json 文件来加载数据。更正以下更正后，它开始正常工作。

**(1) 文件路径（URL）应该是相对于脚本执行的当前页面**

**(2) 在 IIS 服务器中添加 .json (text/plain) MIME 扩展名。**

# c++ - Boost.Parameter：命名模板参数与 CRTP 结合

> ID：11251242
> 
> 赞同：1
> 
> 时间：2012-06-28T19:04:38.713
> 
> 标签：c++, templates, crtp, named-parameters, boost-parameter

**警告**：前面需要冗长的介绍来解释问题。在 Vandevoorde 和 Josuttis 的 ch 16.1 中首次描述的命名模板参数习语可以使用**Boost.Parameter**库方便地编写

```
 #include <iostream>
    #include <typeinfo>
    #include <boost/parameter.hpp>
    #include <boost/static_assert.hpp>

    struct DefaultPolicy1 {};
    struct DefaultPolicy2 {};

    typedef boost::parameter::void_ DefaultSetter;

    BOOST_PARAMETER_TEMPLATE_KEYWORD(Policy1_is)
    BOOST_PARAMETER_TEMPLATE_KEYWORD(Policy2_is)

    typedef boost::parameter::parameters<
            boost::parameter::optional<tag::Policy1_is>,
            boost::parameter::optional<tag::Policy2_is>
    > PolicySelector;

    template
    <
            class PolicySetter1 = DefaultSetter,
            class PolicySetter2 = DefaultSetter
    >
    class BreadSlicer
    {
            typedef typename PolicySelector::bind<
                    PolicySetter1, 
                    PolicySetter2
            >::type Policies;

    public:
            // extract policies:
            typedef typename boost::parameter::value_type<
                    Policies, tag::Policy1_is, DefaultPolicy1
            >::type P1;

            typedef typename boost::parameter::value_type<
                    Policies, tag::Policy2_is, DefaultPolicy2
            >::type P2;
    }; 
```

上面的代码允许通过命名它们和覆盖`BreadSlicer`任意顺序的可选模板参数。这使得使用许多默认参数进行基于策略的设计非常方便。`Policy1_is``Policy2_is`

```
int main()
{
        typedef BreadSlicer<> B1;

        // can override any default policy
        typedef BreadSlicer< Policy1_is<int> > B2;
        typedef BreadSlicer< Policy2_is<char> > B3;

        // order of policy-setting is irrelevant
        typedef BreadSlicer< Policy1_is<int>, Policy2_is<char> > B4;
        typedef BreadSlicer< Policy2_is<char>, Policy1_is<int> > B5;

        // similar static asserts work for B1 ... B4     
        BOOST_STATIC_ASSERT((std::is_same<B5::P1, int >::value));
        BOOST_STATIC_ASSERT((std::is_same<B5::P2, char>::value));

        return 0;
} 
```

为了避免基于策略的设计非常微妙的 ODR 违规（有关解释，请参阅 Alexandrescu 的这篇旧[帖子](http://lists.boost.org/Archives/boost/2002/04/28906.php)），我希望能够在命名模板参数上应用 CRTP 模式：

```
 int main() 
    {
            // ERROR: this code does NOT compile!
            struct CuriousBreadSlicer
            :
                    BreadSlicer< Policy1_is<CuriousBreadSlicer> >
            {};

            typedef CuriousBreadSlicer B6;

            BOOST_STATIC_ASSERT((std::is_same<B6::P1, CuriousBreadSlicer>::value));
            BOOST_STATIC_ASSERT((std::is_same<B6::P2, DefaultPolicy2    >::value));

            return 0;
    } 
```

但是，上面的 Boost.Parameter 实现无法编译，因为一些内部 static_assert 失败并显示类似 (VC10 SP1) 的消息

> 'main::CuriousBreadSlicer' ：不允许将未定义的类作为编译器内在类型特征 '__is_base_of' 的参数

**问题**：这个静态检查可以关闭吗？通过宏或模板技巧？

至于可能的解决方法：

1.  上面的代码在功能上等同于[这个手写代码](http://www.mpi-inf.mpg.de/~kettner/courses/lib_design_03/notes/design.html#NamedTemplateArgs)。对于该代码，CRTP 模式确实有效。然而，它需要大量的样板代码，Boost.Parameter 库可以方便地自动化。
2.  我可以要求 CRTP 参数在模板参数列表中始终排在第一位，而不是将其包装在一个 `Policy1_is`类中。这解决了编译时错误，但它失去了覆盖的顺序独立性。

所以看起来我就是高尔夫球手所说的“在俱乐部之间”。哪种解决方案最好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:45:25.873

没有 CRTP 的最小示例：

```
#include <boost/parameter.hpp>
#include <boost/static_assert.hpp>

BOOST_PARAMETER_TEMPLATE_KEYWORD(Policy1_is)
BOOST_PARAMETER_TEMPLATE_KEYWORD(Policy2_is)

typedef boost::parameter::parameters<
           boost::parameter::optional<tag::Policy1_is>,
           boost::parameter::optional<tag::Policy2_is>
        > PolicySelector;

struct foo {};
struct bar {};
struct baz;
typedef typename PolicySelector::bind<foo, baz>::type Policies;
boost::parameter::value_type<Policies, tag::Policy1_is, bar>::type x; // <- !!! 
```

因此`boost::parameter::value_type`要求策略选择器基于完整类型，而您的手写类并非如此。

我不完全确定为什么一个班级需要自己作为自己的政策。如果您需要，也许您可​​以将不完整的类型包装在完整的东西中：

```
struct CuriousBreadSlicer : BreadSlicer <
          Policy1_is<CuriousBreadSlicer *> > // <- compiles 
```

或者，为了清楚起见，您可以使用自己的`wrap_incomplete_type<>`模板。

当您使用该策略时，您可以检查它是否已包装，然后将其打开。

# css - div内链接之间的CSS间隙

> ID：11251243
> 
> 赞同：0
> 
> 时间：2012-06-28T19:04:43.303
> 
> 标签：css, positioning

CSS新手在这里。奇怪的事情正在发生，我的链接之间有差距，我不知道为什么。

我正在使用 html html5 样板 css 进行重置。

HTML 代码：

```
 <div id="style-switcher">
    <a href="#" id="theme-1" data-theme="css/theme1.css">Link 1</a>
    <a href="#" id="theme-2" data-theme="css/theme2.css">Link 2</a>
    <a href="#" id="theme-3" data-theme="css/theme3.css">Link 3</a>
    <a href="#" id="theme-4" data-theme="css/theme4.css">Link 4</a>
    </div> 
```

CSS

```
 #style-switcher
  {
     position: fixed;
     top:0;
     left: 0;
  }
  #style-switcher a
  {
     color: #EEEEEE;
     text-decoration: none;
     font-size: 3.3em;
     text-align: center;
     background-color: #333333;
  } 
```

JS 小提琴：http: [//jsfiddle.net/RX7cg/](http://jsfiddle.net/RX7cg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:10:45.690

就像西蒙说的那样，你的锚元素是内联的。这意味着元素之间的空格将呈现为字符空格。（它在视觉上可能看起来像边距，但实际上不是。）它与单词之间的空格相同。您可以浮动，如果这是您正在寻找的那种布局，或者如果您想让它们保持内联，您可以通过重写标记来消除字符空间，如下所示：

```
 <div id="style-switcher">
      <a href="#" id="theme-1" data-theme="css/theme1.css">Link 1</a
      ><a href="#" id="theme-2" data-theme="css/theme2.css">Link 2</a
      ><a href="#" id="theme-3" data-theme="css/theme3.css">Link 3</a
      ><a href="#" id="theme-4" data-theme="css/theme4.css">Link 4</a>
  </div> 
```

仔细查看结束标签是如何被撞倒的。这种模式使代码相对清晰。处理该问题的其他模式在[此处](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)进行了编目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:16:34.080

您的 links 元素呈现为**inline**。
我建议你添加`float:left;`它们，
这样就不会再有差距了。
查看示例：http: [//jsfiddle.net/RX7cg/3/](http://jsfiddle.net/RX7cg/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T20:11:55.617

尝试添加 word-spacing 和 letter-spacing 属性：http: [//jsfiddle.net/RX7cg/17/](http://jsfiddle.net/RX7cg/17/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T17:06:39.387

我发现最好的解决方案是在显示为 inline-block 的元素的父元素上声明 font-size:0。

# javascript - JavaScript 基础

> ID：11251251
> 
> 赞同：3
> 
> 时间：2012-06-28T19:05:10.537
> 
> 标签：javascript

```
function Add(a, b) {      } 
```

如果我们调用一个 javascript 函数，例如 - `onclick="Add(1)"`

为什么即使我们只传递一个参数甚至超过 2 个参数（在上面的例子中）我们也没有得到错误？Java 脚本如何处理上述场景？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T19:09:16.797

Javascript 是一种动态的弱类型语言。因此，它没有严格执行方法签名。

`Add`是一个函数对象。它有一个名为的属性`arguments`，它是一个类似数组的对象，其中包含您传入的参数。为方便起见，它还将创建名为的局部变量`a`，`b`并将第一个和第二个元素分配`arguments`给它们。在您只有一个输入参数的情况下，`b`将是未定义的。

所以，Javascript 会处理

```
 Add(1) 
```

和

```
 Add(1, undefined) 
```

几乎相同。这里的区别在于`arguments`变量的长度为 2 而不是 1。不过，从纯粹实用的角度来看，它们几乎是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-11T18:57:13.027

这是因为Javascript中的**提升概念。**在实际执行您的 Javascript 代码之前，解析器会运行您的代码并识别您创建函数的位置以及创建变量的位置。在您的代码开始由 Javascript 引擎逐行执行之前，Javascript 引擎已经在内存中为代码中编写的变量和函数留出了空间。因此，在代码执行开始之前，所有变量和函数都已在内存中可用。因此，我们将以有限的方式访问它们。

当 Javascript 引擎在您的代码中找到一个函数时，它会设置一个内存空间并将整个函数定义放入其中。

但是，当它在您的代码中找到一个变量时，它会设置一个内存空间；给它变量的名称并设置一个占位符，即“未定义”作为它的值（而不是实际分配的值）。

请查看下面的链接以更好地了解正在发生的事情 - [https://developer.mozilla.org/en-US/docs/Glossary/Hoisting](https://developer.mozilla.org/en-US/docs/Glossary/Hoisting)

# java - 生产环境 - http 500 错误页面 - 请不要堆栈跟踪

> ID：11251252
> 
> 赞同：9
> 
> 时间：2012-06-28T19:05:22.007
> 
> 标签：java, websphere, stack-trace, production-environment, custom-error-pages

这是上下文：

我为一家非常大的企业工作。在这里，我们有许多 WebSphere Application Server 集群，每个集群都运行许多 Java EE Web 应用程序。大多数（但不是全部）这些应用程序在其 web.xml 中包含特殊指令，以在发生意外异常时显示自定义错误页面。这是一个例子：

```
<error-page>
    <error-code>500</error-code>
    <location>/500.jsp</location>
</error-page> 
```

当然，这样做是为了向我们的客户显示一个友好的错误页面，但此外，我们的主要目标是隐藏通常包含在标准 http 500 错误页面中的堆栈跟踪。

如您所知，这些堆栈跟踪包含大量敏感数据，例如包名、类名甚至方法名。最糟糕的是，有时这些堆栈跟踪包含 SQL 异常，这些异常通常会显示使用了哪些数据库服务器软件。更糟糕的是，有时，这些堆栈跟踪包含文件和文件夹路径，而这些路径又可以揭示我们的 WebSphere Application Server 在哪个操作系统系列上运行。

我是否需要提及这些堆栈跟踪可以揭示的所有其他更敏感的数据？（用户名、端口号、IP 地址、计算机/服务器名称、JNDI 对象的名称……）

因此，这里没有什么大的惊喜，每个大型企业都需要向他们的客户隐藏这些堆栈跟踪。

**但是，这是我们的问题：**

有时，即使在 web.xml 文件中很好地配置了自定义错误页面，WebSphere 也会将基本错误页面发送到客户的 Web 浏览器。我非常理解 WebSphere 为什么要这样做。例如，我知道当 http 响应的标头已经提交时，WebSphere 无法重置其缓冲区以发送自定义错误页面，因此无法比发送基本错误页面做得更好。

**这是我的问题：**

(1) 是否可以配置 WebSphere，使其永远不会在其基本错误页面中包含任何堆栈跟踪？这样，即使由于某种技术原因，WebSphere 无法发送我们的自定义错误页面，至少基本错误页面不会包含任何敏感数据。

我们应该怎么做？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:03:46.523

您有权访问 WAS 的配置设置吗？如果是这样，您应该能够在 httpd.conf 的 ErrorDocument 指令中设置一个新的默认基本错误页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-15T13:31:07.917

正如 closeBrace 所说，您应该通过配置 Websphere 应用程序服务器来防止打印堆栈跟踪。

试试这个：
**com.ibm.ws.webcontainer.suppressHtmlRecursiveErrorOutput**是 Web 容器定制属性，用于抑制错误文本的 HTML 输出，而不更改消息的内部日志记录。

您可以将此定制属性设置为 true 以禁用向用户输出错误消息的 HTML 并向用户显示带有 500 错误代码的空白页面。

自定义参数应该放在：*应用服务器>server_name>Web Container>自定义属性>*

# xml - 对 XSLT 元素进行分组 (XSLT 1.0)

> ID：11251253
> 
> 赞同：1
> 
> 时间：2012-06-28T19:05:23.023
> 
> 标签：xml, xslt, grouping

我正在尝试创建一个 XSLT 来转换 XML 文档并且遇到分组问题。我为单个对象提取信息没有问题，但多个对象是我失败的地方。我已经通读并尝试了许多预先存在的分组问题/解决方案，但在 XML 方面我不是超级精明。

要转换的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<File xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<Building>
<BuildingName>Abbotsford 607 Spruce</BuildingName>
<BuildingCode>80255</BuildingCode>
<BuildingAddress>607 East Spruce St</BuildingAddress>
<BuildingCity>Abbotsford</BuildingCity>
<BuildingState>Wisconsin</BuildingState>
<BuildingStateCode>WI</BuildingStateCode>
<BuildingCountry>United States</BuildingCountry>
<ZipCode>54405-9659</ZipCode>
<Room>
<ID>32182</ID>
<Name>001B</Name>
<FloorName>01</FloorName>
</Room>
</Building>
<Building>
<BuildingName>Allouez 2001 Webster</BuildingName>
<BuildingCode>80006</BuildingCode>
<BuildingAddress>2001 S Webster Avenue</BuildingAddress>
<BuildingCity>Green Bay</BuildingCity>
<BuildingState>Wisconsin</BuildingState>
<BuildingStateCode>WI</BuildingStateCode>
<BuildingCountry>United States</BuildingCountry>
<ZipCode>54301</ZipCode>
<Room>
<ID>22320</ID>
<Name>001B</Name>
<FloorName>01</FloorName>
</Room>
<Room>
<ID>22319</ID>
<Name>002B</Name>
<FloorName>02</FloorName>
</Room>
</Building>
</File> 
```

预期成绩：

```
<?xml version="1.0" encoding="UTF-8"?>
<FMRequest>
<Transaction Type="UpdateAdd">
<BusinessObjectList>
    <BusinessObject Name="LocationGroup.EmployeeSite">
        <FieldList>
            <Field Name="ABC_PropertyManagementName" identifier="true" UpdateOverride="None">Abbotsford 607 Spruce</Field> 
            <Field Name="[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.Purpose">Work</Field> 
            <Field Name="[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.Address">607 East Spruce St</Field> 
            <Field Name="[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.City">Abbotsford</Field> 
            <Field Name="[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.State">WI</Field> 
            <Field Name="[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.Zip">54405-9659</Field> 
        </FieldList>
    <RelatedBusinessObjectList>
        <BusinessObject Name="LocationGroup.ABC_Floor">
            <FieldList>
                <Field Name="ABC_Building" identifier="true" UpdateOverride="None">Abbotsford 607 Spruce</Field> 
                <Field Name="ABC_Floor">01</Field>
            </FieldList>
        </BusinessObject>
        <BusinessObject Name="LocationGroup.ABC_Room">
            <FieldList>
                <Field Name="ABC_RoomID" identifier="true" UpdateOverride="None">32182</Field>
                <Field Name="ABC_Building">Abbotsford 607 Spruce</Field> 
                <Field Name="ABC_Floor">01</Field>
                <Field Name="ABC_Room">001B</Field>
            </FieldList>
        </BusinessObject>
    </RelatedBusinessObjectList>
    </BusinessObject>
    <BusinessObject Name="LocationGroup.EmployeeSite">
        <FieldList>
            <Field Name="ABC_PropertyManagementName" identifier="true" UpdateOverride="None">Allouez 2001 Webster</Field> 
            <Field Name="[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.Purpose">Work</Field> 
            <Field Name="[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.Address">2001 S Webster Avenue</Field> 
            <Field Name="[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.City">Green Bay</Field> 
            <Field Name="[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.State">WI</Field> 
            <Field Name="[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.Zip">54301</Field> 
        </FieldList>
    <RelatedBusinessObjectList>
        <BusinessObject Name="LocationGroup.ABC_Floor">
            <FieldList>
                <Field Name="ABC_Building" identifier="true" UpdateOverride="None">Allouez 2001 Webster</Field> 
                <Field Name="ABC_Floor">01</Field>
            </FieldList>
        </BusinessObject>
        <BusinessObject Name="LocationGroup.ABC_Floor">
            <FieldList>
                <Field Name="ABC_Building" identifier="true" UpdateOverride="None">Allouez 2001 Webster</Field> 
                <Field Name="ABC_Floor">02</Field>
            </FieldList>
        </BusinessObject>
        <BusinessObject Name="LocationGroup.ABC_Room">
            <FieldList>
                <Field Name="ABC_RoomID" identifier="true" UpdateOverride="None">22320</Field>
                <Field Name="ABC_Building">Allouez 2001 Webster</Field> 
                <Field Name="ABC_Floor">01</Field>
                <Field Name="ABC_Room">001B</Field>
            </FieldList>
        </BusinessObject>
        <BusinessObject Name="LocationGroup.ABC_Room">
            <FieldList>
                <Field Name="ABC_RoomID" identifier="true" UpdateOverride="None">22319</Field>
                <Field Name="ABC_Building">Allouez 2001 Webster</Field> 
                <Field Name="ABC_Floor">02</Field>
                <Field Name="ABC_Room">002B</Field>
            </FieldList>
        </BusinessObject>
    </RelatedBusinessObjectList>
    </BusinessObject>
</BusinessObjectList>
</Transaction> 
```

可以拉出单个建筑物的示例 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" version="1.0" encoding="UTF-16" indent="yes"/> 
<xsl:template match="Building">
    <xsl:element name="FMRequest">
        <xsl:attribute name="ID"><xsl:value-of select="BuildingName"/></xsl:attribute>
        <xsl:attribute name="TimeStamp"><xsl:value-of select="TimeStamp"/></xsl:attribute>
        <xsl:attribute name="Encryption"><xsl:text>false</xsl:text></xsl:attribute>
        <xsl:element name="Origin">
            <xsl:text>PMLocationImport</xsl:text>
        </xsl:element>
        <xsl:element name="Destination">
            <xsl:text>FI</xsl:text>
        </xsl:element>
        <xsl:element name="Transaction">
            <xsl:attribute name="Type"><xsl:text>UpdateAdd</xsl:text></xsl:attribute>
            <xsl:element name="BusinessObjectList">
                <!--<xsl:apply-templates/>-->
            </xsl:element>
        </xsl:element>
        <xsl:element name="BusinessObject">
            <xsl:attribute name="Name"><xsl:text>LocationGroup.EmployeeSite</xsl:text></xsl:attribute>
            <BusinessObjectList>
                <BusinessObject Name="LocationGroup.EmployeeSite">
                    <xsl:element name="Field">
                        <xsl:attribute name="Name"><xsl:text>ABC_PropertyManagementName</xsl:text></xsl:attribute>
                        <xsl:attribute name="identifier"><xsl:text>true</xsl:text></xsl:attribute>
                        <xsl:attribute name="UpdateOverride"><xsl:text>None</xsl:text></xsl:attribute>
                        <xsl:value-of select="BuildingName"/>
                    </xsl:element>
                    <xsl:element name="Field">
                        <xsl:attribute name="Name"><xsl:text>[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.Purpose</xsl:text></xsl:attribute>
                        <xsl:text>Work</xsl:text>
                    </xsl:element>
                    <xsl:element name="Field">
                        <xsl:attribute name="Name"><xsl:text>[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.Address</xsl:text></xsl:attribute>
                        <xsl:value-of select="BuildingAddress"/>
                    </xsl:element>
                    <xsl:element name="Field">
                        <xsl:attribute name="Name"><xsl:text>[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.City</xsl:text></xsl:attribute>
                        <xsl:value-of select="BuildingCity"/>
                    </xsl:element>
                    <xsl:element name="Field">
                        <xsl:attribute name="Name"><xsl:text>[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.State</xsl:text></xsl:attribute>
                        <xsl:value-of select="BuildingStateCode"/>
                    </xsl:element>
                    <xsl:element name="Field">
                        <xsl:attribute name="Name"><xsl:text>[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.Zip</xsl:text></xsl:attribute>
                        <xsl:value-of select="ZipCode"/>
                    </xsl:element>
                </BusinessObject>
            </BusinessObjectList>
        </xsl:element>
    </xsl:element>
</xsl:template> 
```

我知道我需要使用一些 for-each 和键，但我不确定下一步要采取哪些步骤来正确分组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T01:03:37.093

这个样式表怎么样？其中大部分是直截了当的模板。楼层使用 Muenchian 分组进行分组。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/> 

<xsl:key name="floor" match="Room" use="FloorName" />  

<xsl:template match="/">
 <Transaction Type="UpdateAdd">
  <BusinessObjectList>
    <xsl:apply-templates select="File/Building"/> 
  </BusinessObjectList>
 </Transaction>
</xsl:template>

<xsl:template match="Building">
    <BusinessObject Name="LocationGroup.EmployeeSite">
        <FieldList>
          <Field Name="ABC_PropertyManagementName" identifier="true" UpdateOverride="None"><xsl:value-of select="BuildingName" /></Field> 
            <Field Name="[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.Purpose">Work</Field> 
            <Field Name="[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.Address"><xsl:value-of select="BuildingAddress" /></Field> 
            <Field Name="[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.City"><xsl:value-of select="BuildingCity" /></Field> 
            <Field Name="[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.State"><xsl:value-of select="BuildingStateCode" /></Field> 
            <Field Name="[EmployeeSiteContainsAddress,PrimaryAddressLink]Address.Mail.Zip"><xsl:value-of select="ZipCode" /></Field> 
        </FieldList>
    <RelatedBusinessObjectList>
      <xsl:for-each select="Room[ generate-id() =
                                  generate-id( key('floor',FloorName)[1]) ]">   
       <BusinessObject Name="LocationGroup.ABC_Floor">
        <FieldList>
         <Field Name="ABC_Building" identifier="true" UpdateOverride="None"><xsl:value-of select="../BuildingName" /></Field> 
         <Field Name="ABC_Floor"><xsl:value-of select="FloorName" /></Field>
        </FieldList>
       </BusinessObject>  
      </xsl:for-each>
      <xsl:apply-templates select="Room" />
    </RelatedBusinessObjectList>
    </BusinessObject>
</xsl:template>

<xsl:template match="Room">
 <BusinessObject Name="LocationGroup.ABC_Room">
  <FieldList>
   <Field Name="ABC_RoomID" identifier="true" UpdateOverride="None"><xsl:value-of select="ID" /></Field>
    <Field Name="ABC_Building"><xsl:value-of select="../BuildingName" /></Field> 
   <Field Name="ABC_Floor"><xsl:value-of select="FloorName" /></Field>
   <Field Name="ABC_Room"><xsl:value-of select="Name" /></Field>
  </FieldList>
 </BusinessObject>
</xsl:template>

</xsl:stylesheet> 
```

# database - Django model.save() 不写入数据库

> ID：11251255
> 
> 赞同：3
> 
> 时间：2012-06-28T19:05:31.880
> 
> 标签：database, django, save, django-forms

我是 Django 新手，只是尝试使用 ModelForms 提交表单以创建新事件并将其保存到数据库中。

我正在尝试将行插入三个表：Location、Event（具有 location_id FK）和 EventSchedule（作为 event_id FK）。

这是保存表单的方法。当它被调用时，不会返回错误，但是新的行不会插入到数据库中。：

**addNewEvent()**（在views.py中）

```
def addNewEvent(self, event_form, location_form, event_sched_form, latitude, longitude):

    new_event = event_form.save(commit=False)
    new_location = location_form.save(commit=False)
    new_event_sched = event_sched_form.save(commit=False)
    # set any necessary values and save forms
    new_location.latitude = latitude
    new_location.longitude = longitude
    new_location.save()
    new_event.flagged = False
    new_event.location = new_location
    new_event.save()
    new_event_sched.event = new_event
    new_event_sched.save() 
```

**模型.py**

```
class Location(models.Model):
    name = models.CharField(max_length=200)
    #address = models.CharField(max_length=200)
    city = models.CharField(max_length=200)
    state_code = models.CharField(max_length=100)
    zip = models.CharField(max_length=100, blank=True)
    country = models.CharField(max_length=100)
    latitude = models.DecimalField(max_digits=9, decimal_places=6)
    longitude = models.DecimalField(max_digits=9, decimal_places=6)
    class Meta:
        db_table = 'location'

class Event(models.Model):
    CATEGORIES = (
        ('KID', 'Kids'),
        ('FAM', 'Family'),
        ('NIT', 'Nightlife'),
        ('OUT', 'Outdoors'),
        ('ART', 'Arts'),
        ('MSC', 'Music'),
        ('SPT', 'Sports'),
        ('SAL', 'Sale'),
        ('EDU', 'Educational'),
        ('POL', 'Political'),
        ('FOD', 'Food'),
        ('OTH', 'Other')
    )
    location = models.ForeignKey(Location)
    name = models.CharField(max_length=200)
    description = models.CharField(max_length=200)
    category = models.CharField(max_length=20, choices=CATEGORIES)
    age_req = models.IntegerField(null=True)
    cost_per_person = models.DecimalField(max_digits=5, decimal_places=2, null=True)
    flagged = models.BooleanField()
    users = models.ManyToManyField(User, through='UserEvent')
    class Meta:
        db_table = 'event'

class EventSchedule(models.Model):
    event = models.ForeignKey(Event)
    start_date_time = models.DateTimeField()
    end_date_time = models.DateTimeField()
    class Meta:
        db_table = 'event_schedule' 
```

**表格.py**

from django.forms import ModelForm, forms from models import Event, Location, EventSchedule

```
class EventForm(ModelForm):
    class Meta:
        model = Event
        fields = ('name','description','category','age_req','cost_per_person')

class LocationForm(ModelForm):
    class Meta:
        model = Location
        fields = ('name','city','state_code','zip','country')

class EventScheduleForm(ModelForm):
    class Meta:
        model = EventSchedule
        fields = ('start_date_time', 'end_date_time') 
```

任何帮助深表感谢。

谢谢，

彼得

**编辑：**

我什至无法保存模型，更不用说 ModelForm（即使我在其他地方成功地做到了）。我添加了以下代码以将用户与事件相关联。没有错误，但它不会向数据库添加一行：

```
new_user_event = UserEvent(user=user,
                                event=new_event,
                                datetime_created=datetime.datetime.now())
new_user_event.save() 
```

有任何想法吗？

**编辑2：**

new_user_event 截图：http: [//imgur.com/JUauG](http://imgur.com/JUauG)

**编辑 3：**

这就是我实例化 ModelForms 的方式：

```
event_form = EventForm(request.POST or None)
location_form = LocationForm(request.POST or None)
event_sched_form = EventScheduleForm(request.POST or None) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-01T02:23:28.040

哇，我真是个白痴。由于某些代码用虚拟数据填充数据库，我在实际显示事件之前删除了表中的行。

我可以删除这个问题还是应该继续证明我的愚蠢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T22:47:57.750

[https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method)

`commit=false`是原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T11:44:36.033

您没有在这里发布最重要的部分 IHMO：您的表单是如何实例化的？ModelForm 可用于创建新实例或更新现有实例。如果您将现有实例传递给您的表单，那么您的代码只会更新它们。

# python - 澄清python中的类

> ID：11251257
> 
> 赞同：2
> 
> 时间：2012-06-28T19:05:42.497
> 
> 标签：python, class

我是 Python 新手（来自 MATLAB），并且开始了解到类是模块化程序的好方法。我理解它们就像一个可以简化流程的“蓝图”，但我认为我对此的理解是错误的。我正在阅读[文档](http://docs.python.org/tutorial/classes.html)并遇到了这个例子：

```
class Complex:
    def __init__(self, realpart, imagpart):
        self.r = realpart
        self.i = imagpart

x = Complex(3.0, -4.5)
x.r, x.i 
```

输出为

```
(3.0, -4.5) 
```

它难倒了我。没有已知`realpart`或`imagpart`要传递的函数，但它们被重命名为`r`and`i`并立即工作。它们似乎也不是内置函数。怎么样？在`realpart`做`imagpart`什么？

注意：我为模棱两可的标题和标签道歉，我不确定这会被称为什么。我很感激建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:10:42.377

> realpart 和 imagpart 是怎么做的？

他们什么也没做：他们只是给`__init__`. `apple`如果我们愿意，我们可以打电话给他们`pear`。当您键入

```
x = Complex(3.0, -4.5) 
```

`__init__`传递了三个参数：

```
def __init__(self, realpart, imagpart): 
```

实例本身（传统上称为`self`），第一个显式参数传递（3.0），第二个显式参数传递（-4.5）。然后它将这些作为实例变量存储在`self.r`和中`self.i`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T19:10:53.203

`realpart`并且`imagpart`是类初始化器的参数`__init__`。当您调用 时`Complex(3.0, -4.5)`，这些参数将传递给该函数。该函数恰好在对象上设置了一些属性以保存这些参数的值。它用线条做到这一点

```
 self.r = realpart
    self.i = imagpart 
```

这些行在对象上创建属性。当您创建一个名为 的对象`x`时，它将具有可作为`x.r`和访问的那些属性`x.i`。

我不确定您为什么要询问名为 realpart 和 imagpart 的“函数”。它们只是普通的变量。

您应该阅读[Python 教程](http://docs.python.org/tutorial/)以熟悉 Python 的基础知识。

# c# - 修复代码分析错误或违反 Liskov 替换原则/使代码效率低得多

> ID：11251258
> 
> 赞同：1
> 
> 时间：2012-06-28T19:05:45.127
> 
> 标签：c#, visual-studio-2010, code-analysis

我正在`PriorityQueue<T>`上课，现在我正在`List<T>`用作后备商店。以下是我得到的错误：

有正确的后缀/没有错误的后缀

不要暴露`List<T>`

对于 -Queue 后缀，我需要继承`Queue<T>`，但要对 a 进行排序`Queue<T>`，我需要清空队列，排序，然后重新填充队列。另外，如果我从 继承`Queue<T>`，我会违反 LSP，因为优先级队列不是 FIFO 集合。

对于我正在制作的其中一种 PriorityQueues 是使用`IComparer<T>`来比较元素，但`IComparer<T>`仅在数组和`List<T>`.

我确实看到[了这个问题](https://stackoverflow.com/questions/1232108/c-difference-between-listt-and-collectiont-ca1002-do-not-expose-generic)，但它与我的问题并不完全相关。

所以这是我的问题：我应该禁止这些代码分析警告吗？我是否应该继承`Queue<T>`并重写我的类来解决它，即使它效率较低？如果没有，我还应该换`List<T>`别的东西吗？

编辑：我不知道这是否会有所不同，但以下是我对每个课程的设置：

*   `PriorityQueue<T>`-- 抽象基类（Sort() 是抽象的）

*   `PriorityQueue<T, TComparer>`-- 使用比较器进行排序的子类

*   `ReflectionPriorityQueue<T>`-- 使用反射进行排序的子类，细节对这个问题并不重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T19:11:16.863

这些错误与使用 a 无关`List<T>`- 它们与公共 API 有关。

> 有正确的后缀/没有错误的后缀

这个值得商榷 - 就我个人而言，我会禁用此警告，因为`PriorityQueue<T>`我认为应该使用 name `PriorityQueue<T>`。

> 不要暴露列表

这只是意味着您不能*公开*将. 如果您正在封装列表，则它永远不会出现。只要您将列表设为*私有*，此警告就会消失。`List<T>``List<T>`

 *> 我是否应该从 Queue 继承并重写我的类以解决它，即使它效率较低？如果没有，我是否还应该将 List 换成其他东西？

我怀疑问题在于您正在尝试子类化`List<T>`，这是一个坏主意。将其封装为私有成员，并改为实现*适当的接口。**

# javascript - 将字符串传递给 AJAX/Json

> ID：11251261
> 
> 赞同：1
> 
> 时间：2012-06-28T19:05:58.650
> 
> 标签：javascript, jquery, asp.net, ajax, json

```
function s() {
    data = "192,273,182,347,13,34,52,2524";
    var jsondata = $.toJSON(data);
    $.ajax({
        type: "POST",
        url: "index.aspx/s",
        data: jsondata,
        contentType: "application/json; charset=utf-8",
        dataType: "text json",
        beforeSend: function (xhr) {
            xhr.setRequestHeader("Content-type",
                         "application/json; charset=utf-8");
        },
        success: function (msg) {
            if (msg.d == "OK") {
                //WIN!
            }
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            if (typeof (errorThown) != "undefined")
                alert("ERROR: SaveWidgetSettings() " + textStatus + '\n' + errorThrown);
            else {
                var errdetail = eval("(" + XMLHttpRequest.responseText + ")");
                alert("ERROR: SaveWidgetSettings() " + textStatus + '\n' + errdetail.Message);
            }
        }

    }); 
```

我将问题调试为：

```
cannot convert object of type 'system.string' to type 'system.collections.generic.idictionary 2 system.string system.object ' 
```

逗号弄乱了字符串吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:15:13.500

您可能需要在序列化之前将值包装在对象中，以便 ASP.NET 知道该值的名称：

```
data = { csv: "192,273,182,347,13,34,52,2524" }; 
```

ASP.NET 经常使用键名来确定将值分配给哪个参数（假设`WebMethod`URL 为`index.aspx/s`）：

```
[WebMethod]
public static object s(string csv) ... 
```

此外，如果目标是一个集合，`data`也可以是一个`Array`：

```
data = { ids: [192, 273, 182, 347, 13, 34, 52, 2524] };

// then...
[WebMethod]
public static object s(IEnumerable<int> ids) ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:32:56.207

```
data = "192,273,182,347,13,34,52,2524";
var jsondata = $.toJSON(data); 
```

[http://www.jquerysdk.com/api/jQuery.toJSON](http://www.jquerysdk.com/api/jQuery.toJSON)

它需要一个对象参数，而不是字符串。

# sql - 根据以下内容将总计分解为多行

> ID：11251262
> 
> 赞同：0
> 
> 时间：2012-06-28T19:06:10.163
> 
> 标签：sql, rows

我有一张表，上面有我的发票号和付款金额，例如：

```
invoice 1234   1000 
```

我有另一个表，其中包含金额分配到的作业，例如：

```
Job 1   500   Invoice 1234
Job 2   200   Invoice 1234
Job 3   300   Invoice 1234 
```

如何让 1000 正确分配到下面的行。工作分配上可能有一行或多于上面显示的内容...仅取决于发票。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:38:40.433

好吧，让我假设您使用的是 Oracle，因为这在该数据库中是最简单的。

您需要的是与支付金额相比的累积金额。因此，让我假设您想将付款应用于最早的发票。以下查询执行此操作：

```
select i.*,
       (case when cumAmount <= p.payment then Amount
             when cumAmount - i.Amount < p.payment then p.payment - (i.cumAmount - i.Amount)
             else 0
        end) as AppliedPayment
from (select p.InvoiceId, sum(p.payment) as payment
      from Payment p
      group by p.InvoiceId
     ) join
     (select i.*,
             sum(i.amount) over (partition by i.InvoiceId order by i.JobNum) as cumAmount
      from Invoices i
     ) i
     on p.InvoiceId = i.InvoiceId 
```

因此，想法是您从发票中创建金额的累积总和。然后，您将其与付款进行比较。当累计金额小于付款时，您可以应用整个发票金额。当累计金额远大于支付金额时，则不能申请。您有一个边界条件，您可能会获得部分付款。

第一个子查询累积发票的所有付款，以避免重复。第二个子查询计算累计发票金额。

其他一些数据库直接支持累积和（SQL Server 2012）。在其他情况下，您需要进行自联接才能获得此结果。

# css - 在 div 内居中 3 个框

> ID：11251268
> 
> 赞同：0
> 
> 时间：2012-06-28T19:06:29.013
> 
> 标签：css, html

我试图将蓝色框居中在灰色框内，但是一旦我将它们居中，它们甚至都不是水平的。我无法弄清楚是什么导致它们不均匀。谁能看到是什么原因造成的？

```
div.event_container{
width:100%;
overflow: hidden;
height:245px;
padding: 5px;
margin-top: 0px;
margin-bottom: 5px;
margin-left: auto;
margin-right: auto;
background-color:#999;
border-top: 0px;
position:relative;
top: 65px;
left: 0px;
clip: rect(5px, 0px, 0px, 0px);
z-index: 1;
}

div.event_box{
    display: inline-block;
    width:27%;
height:190px;
    padding: 10px;
margin: 10px auto;
background-color:#B9DAF4;
    position: relative;
border-top: 0px;
    border-radius: 5px 10px 5px 10px / 10px 5px 10px 5px;
}

.event_text {
width:90%;
min-width:700px;
max-width:2000px;
min-height:100px;
    position: relative;
    top: 40px;
padding: 15px;
margin-top: 60px;
margin-bottom: 0px;
    margin-left: auto;
    margin-right: auto;
background-color:#fff;
    text-align: left;
border-top: 1px solid #A3A3A3;
    z-index:1;
}

.div_center3 {
margin:0 auto;
width:850px;
background-color: #666;
text-align: center;
position: relative;
}

#content{
    width:99%;
    max-width: 1200px;
height:100%;
    margin-top: 0px;
margin-bottom: 5px;
    margin-left: auto;
    margin-right: auto;
    text-align:center;
background-color:222;
border-top: 0px;
    position:relative;
    z-index:1px;
    padding-bottom: 130px;
} 
```

* * *

编码

```
<div id="content">
 <div class="div_center3">

<!--Start header text-->
       <div class="event_text">
        <p class="htext"> Information & Innovation at USM hosts a variety of     business     and industry tours through the academic year, 
            as well as showcases projects and hosting job fairs.  I&I is very active     in coordinating efforts with Maine business and industry 
            leaders in many capacities.</p>
        <p class="htext">I&I hosts tours of local IT industry leaders, such as Texas     Instruments and Wright Express in South Portland.
              In December of 2010, I&I showcased an array of research and     development     projects at the fifth Business and Industry Homecoming event 
            where technology leaders and staffing specialists from major Maine         corporations were in attendance for the corporate event at the John 
            Mitchell Center at USM Gorham's campus.</p>  

    </div><!--End event_text div-->
   <!--End Header text-->

<!--Start event boxes-->
    <div class="event_container">

 <div class="event_box">       
        <h3>State of IT in Maine Conference</h3>
            Oct 18, 2012
           <p style="text-align: justify;">Stay Tuned for more information!!</p> 
          <!--<a href="#">Read more</a>-->
       </div>

<div class="event_box">       
        <h3>Business & Industry Tours</h3>
            Fall of 2012
           <p style="text-align: justify;">Each year, company representatives conduct     business tours for IT students where they describe their
            particular industry, as well as types of jobs and needed skills. This is a     great opportunity for students to network and 
            get real world knowledge of the workforce.</p>
            <p>Stay tuned for more information!! </p> 
          <!--<a href="#">Read more</a>-->
       </div>

       <div class="event_box">       
        <h3>IT Job Fair</h3>
            Fall of 2012
            <p style="text-align: justify;">This is an exclusive opportunity for IT     and Computer Science students.<br />  
                 Come meet potential employers offering internships and employment in     Information Technology and Computer Science feilds.
            </p>
            <p style="text-align: justify;">Stay Tuned for more information!!</p> 
            <!--<a href="#">Read more</a>-->

       </div>
   </div>

   <div id="pipe_container">
       <div id="event_pipe">     
           <script src="http://l.yimg.com/a/i/us/pps/listbadge_1.6.js">         {"pipe_id":"2a44070dcf6974aea04ad155a76caef4","_btype":"list","width":"80%","height":"350px    ", "margin":"auto"}</script>
       </div>
    </div>
   </div>
   </div>
 <!--end holder--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:13:17.420

问题是垂直对齐；添加`verical-align:top`到`div.event_box`

默认情况下，元素具有垂直对齐基线，它将元素的基线与父元素的基线对齐。

[小提琴](http://jsfiddle.net/74P3T/)

# java - 如何实现如下所述的并行类

> ID：11251276
> 
> 赞同：1
> 
> 时间：2012-06-28T19:07:09.790
> 
> 标签：java

下面的代码完成了 10 到 20 代所需的操作。

“开关”代表“植物的算法之美”，第 5 页中的 L 系统问题的上下文无关有限状态自动机，而不是家庭作业。我打算在 Xilinx Spartan3 FPGA 上使用 MicroBlaze 处理器对此进行建模，但我最初是在软件中开发仿真以识别尽可能多的问题。

但是，我现在希望修改程序，以便可以使用“开关”部分来提供并行操作，而不是像现在这样按顺序操作。

我知道我可以用 if .. else's 块替换开关。

因此，我不想做的是将开关封装到一个具有类似于现在的字符输入和字符输出的类中。然后创建一个 switch 对象的 ArrayList，使得每个新对象都有一个与正确的 cellType 索引匹配的索引，因此对于每一代，所有的单元格都是并行更新的，而不是顺序更新的。收藏可能是前进的方向。

任何指针都会有所帮助。

斯图尔特。

```
import javax.swing.*;
import java.awt.event.*;
import java.util.*;

public abstract class D0Lsimple1 extends JFrame implements ActionListener {

  //private static Object celltype;

  public static void d0lSimple1() {
  // Open a window to get the time cycle length and convert from a string
  // to an integer.
  String tc = JOptionPane
            .showInputDialog("Enter number of generation cycles, must be between 10 and 20.");
  int tcycle = Integer.parseInt(tc);

 // create an ArrayList with seed cell A.
List<Character> cellType = new ArrayList<Character>();
cellType.add('A');
System.out.println("cellType: " + cellType);
List<Character> newType = new ArrayList<Character>();

while (tcycle > 0) {

    int procid = (cellType.size() - cellType.size());

    while (procid != cellType.size()) {
        char type = cellType.get(procid).charValue();

        switch (type) {
        case 'A':
            newType.add('C');
            newType.add('B');
            break;
        case 'B':
            newType.add('A');
            break;
        case 'C':
            newType.add('D');
            newType.add('A');
            break;
        case 'D':
            newType.add('C');
            break;
        default:
            System.out.println("Invalid cell type." + type);
            break;
            }
    procid++;
    }
    List<Character> temp = new ArrayList<Character>(cellType);
    cellType.clear();
    cellType.addAll(newType);
    newType.clear();
    // newType.addAll(temp);

    System.out.println("procid: " + procid);
    System.out.println("cellType: " + cellType);
    /*
     * When using this program do not input a number for growth cycles
     * greater than 37, as my computer ran out of resources.
     * For inputs greater than 8 one of the println line should be // out
     * dependent on which is more important.
     * 
     */
    tcycle--;
    }
      }

    public static void main(String[] args) {
   // Schedule a job for the event-dispatching thread:
   // creating and showing this application's GUI.
   javax.swing.SwingUtilities.invokeLater(new Runnable() {
    @Override
    public void run() {
        d0lSimple1();
        }
      }
   );
}
} 
```

# visual-c++ - C++ dll框架问题

> ID：11251277
> 
> 赞同：0
> 
> 时间：2012-06-28T19:07:10.180
> 
> 标签：visual-c++

我对堆栈溢出非常陌生，所以如果我在遵循这个论坛约定时犯了一些错误，我深表歉意。

如果此站点上的任何专业 C++ 编码人员对我在 Visual C++ 2010 中的现有代码中遇到的当前问题有一些想法，我就会徘徊。

有没有一种更简单的方法可以在两个动态加载的 dll 之间共享类、成员和函数，而无需使用大量的 GetProcAdress() 函数。

对于任何阅读或回复此内容的人；感谢您的时间和帮助。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:20:45.920

您是否看过这个示例：
[如何导出标准模板库 (STL) 类和包含作为 STL 对象的数据成员的类的实例化](http://support.microsoft.com/kb/168958)

# javascript - jquery最接近（）不起作用

> ID：11251280
> 
> 赞同：2
> 
> 时间：2012-06-28T19:07:17.783
> 
> 标签：javascript, jquery

我正在尝试获取与该类最近的链接`a.tariff-link`并将其发送到一个方法，但看起来`closest()`找不到它，因为它总是传递一个未定义的元素。

```
$(".ui-icon-triangle-1-e").click(function () {

    GetRuleData($(this).closest("a.tariff-link"));

}); 
```

HTML 的示例如下所示：

```
<h3 class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all" role="tab" aria-expanded="false" tabindex="-1">
<span class="ui-icon ui-icon-triangle-1-e"></span>
<a id="41965" class="tariff-link" href="#" tabindex="-1">
</h3> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T19:08:03.440

你需要[`.siblings()`](http://api.jquery.com/siblings/)而不是`.closest()`. 后者检查当前元素及其祖先，但您`a`是当前元素的*兄弟*，而不是祖先。

如果它总是紧跟在当前元素之后的元素，你也可以使用[`.next()`](http://api.jquery.com/next/).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T19:08:22.190

尝试：

```
GetRuleData($(this).next("a.tariff-link")); 
```

# regex - 正则表达式提取字符串

> ID：11251282
> 
> 赞同：2
> 
> 时间：2012-06-28T19:07:37.137
> 
> 标签：regex

我有这个表情

```
accordionMain_i0_accordion_i0_ctl01_0_ddl_xxxxxxxx_iy_tblItem 
```

其中 xxx 也可以包含 '_' 并且它的数量会有所不同，并且 y 从 0 开始递增。我想使用正则表达式提取 xxxxxx。我尝试了 split 函数，但 xxxx 可以包含多个 '_' ，因此通过从 split 中删除数组的最后 2 个元素，我必须检查 ddl，然后加入 xxx 的所有部分等。你知道使用 REGEX 的更好方法吗? 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:20:20.747

如果您的 RegEx 引擎支持`lookahead`and `lookbehind`，则使用：

```
(?<=_ddl_)\w+?(?=_i\d+) 
```

别的

```
(:_ddl_)(\w+?)(?:_i\d+) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:17:42.800

如果找到匹配，Regex`accordionMain_i0_accordion_i0_ctl01_0_ddl_(.*?)_i\d+_tblItem`将返回您的**xxxxxxxx 。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T19:17:31.860

您应该指定您使用的语言。但这里有一个尝试：

```
/accordionMain_i0_accordion_i0_ctl01_0_ddl_([x_]+)_i\d+_tblItem/ 
```

然后，您的 x 将存储在第一个捕获中，`$1`.

这是一个演示：[http](http://rubular.com/r/MH4GbMStdf) ://rubular.com/r/MH4GbMStdf 。

**编辑：**

如果您的意思是“任何东西”而不是文字“x”，那么：

```
/accordionMain_i0_accordion_i0_ctl01_0_ddl_(.+)_i\d+_tblItem/ 
```

# postgresql - 使用 SQLAlchemy 继承 Postgres：SQLAlchemy 关系

> ID：11251283
> 
> 赞同：1
> 
> 时间：2012-06-28T19:07:46.300
> 
> 标签：postgresql, sqlalchemy

我有许多类型的身份验证，因此我有一个基本的 postgres 表（称为“**身份验证**”），其他类型的*身份验证*都是从它派生的。例如，使用密码进行身份验证的实体称为“ **password_authentications** ”，它使用 postgres从“ **authentications** ”表继承。因此，架构是：

```
CREATE TABLE authentications (
 id 
)

CREATE TABLE password_authentications (
 id
 password
) inherits (authentications) 
```

这非常优雅，因为我还有一个名为“Users”的表，它在身份验证表中有一个外键：

```
CREATE TABLE users (
 id
 username
 authentications_id
) 
```

因此，用户可以通过继承自身份验证的任何内容进行身份验证。因此，将来，如果我们需要使用 RSA（例如）对用户进行身份验证，我要做的就是从描述 RSA 身份验证的身份验证中创建一个基类。

现在我想使用 SQLAlchemy 在 Python 类和这个结构之间建立一个映射。具体来说，我想将一个名为“User”的类映射到名为“ **users** ”的表（这很容易完成），但我想要一个关于 password_authentication 的关系（而不是关于身份验证）。事实上，我希望动态地建立这种关系，所以如果一个用户使用密码进行身份验证，那么 SQLAlchemy 会将“Users”表链接到“Password_Authentications”表。如果存在其他类型的身份验证，则应将用户链接到该表。用户将链接到的所有表的唯一共同点是它们是从 Authentications 表派生的。因此，“用户”表在该表中有一个外键。

我怎样才能完成上述工作？甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T20:46:53.157

SA 在模型对象继承方面不支持`INHERITS`of `postgresql`。但是，请查看[PostgreSQLInheritance](http://www.sqlalchemy.org/trac/wiki/UsageRecipes/PostgreSQLInheritance) recipe，其中[Mike](https://stackoverflow.com/users/34549/zzzeek)展示了如何将两者结合使用及其局限性。

[另请参阅Python, SQLAlchemy 和 Postgresql](https://stackoverflow.com/a/7675115/99594)的答案：了解继承，其中[TokenMacGuy](https://stackoverflow.com/users/65696/tokenmacguy)`Inheritance in terms of OOP`解释了和之间的区别`postgresql table inheritance`。

* * *

*从链接资源中发布代码示例会导致不必要的重复和相当冗长的答案，仍然无法为您提供完整的解决方案。*

# php - pdo 异常：到许多连接

> ID：11251285
> 
> 赞同：0
> 
> 时间：2012-06-28T19:07:48.173
> 
> 标签：php, mysql, pdo

我有一个名为 Server.php 的类。在那个类中，我有一个连接到我的数据库的函数。我已经尝试扩展 max_connections，但并没有解决问题。也可以说，如果我删除一个连接到我的数据库的函数，问题就会消失。有人可以告诉我可能是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:26:33.953

每个 PDO 实例都是一个单独的连接，因此如果一个函数与数据库建立连接，则每次调用它都会创建一个连接。可能的解决方案是，按优先顺序：

1.  `Dependancy Injection`: 将 PDO 实例作为参数，或者在对象的情况下，作为对象属性。
2.  使 PDO 实例成为`Singleton`.
3.  `static`如果这是您使用它的唯一点，请将 PDO 实例设置为函数内部。
4.  使用连接创建一个`global`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:17:30.600

例子：

连接到mysql：

```
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
    if ($link) { // here all your operations
    } 
```

紧密连接：

```
mysql_close($link); 
```

# vba - Excel 范围内的平均行数

> ID：11251286
> 
> 赞同：2
> 
> 时间：2012-06-28T19:07:49.323
> 
> 标签：vba, excel, excel-formula

我有一个这样的excel表：

```
+--id---+--val--+--timestamp--+
|  01   |  1.2  | 1340769912  |
|-------|-------|-------------|
|  02   |  1.6  | 1340769928  |
+-------+-------+-------------+ 
```

我想获得 60 秒范围内的平均值，或时间戳列中 60 的方差。我在 Excel 公式等方面尝试了很多东西，但我无法让它正常工作。VBA是要走的路吗？

编辑：有很多数据和很多分钟，如果我将它复制到一列中，我需要这个公式才能工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T19:45:17.883

如果您有 excel 2007 或更高版本
`=AVERAGEIFS($B$1:$B$2,$C$1:$C$2,"<"&C1+60,$C$1:$C$2,">"&C1-60)`

对于任何版本的 excel：
`=AVERAGE(IF(AND($C$1:$C$2<C1+60,$C$1:$C$2>C1-60),$B$1:$B$2))`作为数组公式输入，使用 CTRL+SHIFT+ENTER 输入公式，而不仅仅是 ENTER

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:44:38.057

不确定这是否万无一失，但我认为这是一个好的开始，而且没有 VBA。

图片未正确粘贴，D 列的公式应为：

```
=ABS(TEXT($F$2,"hmmss")-TEXT(C2,"hmmss")) 
```

![在此处输入图像描述](../Images/856884683b1759265bac763950f76b6c.png)

# jquery - Pinterest 悬停按钮

> ID：11251287
> 
> 赞同：0
> 
> 时间：2012-06-28T19:07:51.817
> 
> 标签：jquery, css, pinterest

如何制作仅在悬停时显示但位于图片内部的“类似pinterest”的按钮？

我当然使用 jQuery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T05:05:38.147

我相信这正是您正在寻找的：

[http://joshkoberstein.com/blog/2012/09/jquery-pinterest-hover-button](http://joshkoberstein.com/blog/2012/09/jquery-pinterest-hover-button)

```
(function($){
     $(window).load(function(){

        //the URL to be shared
        $PinItURL = $(location).attr('href');

        //for each img tag with 'pinit' class
        $('.pinit').each(function(){

            //the media to be shared - full image url
            $media = $(this).prop('src');
            //the description of media - use the image title
            $description = $(this).attr("title");

            //place 'pin it' button after the image in the DOM
            $(this).after(getButtonHTML($media, $description));

            //define the hover target as the image
            $target = $(this);
            //define pinit as the button we just placed after the image
            $pinit = $(this).next(".pinit-wrapper");

            //calculate the left position for the pinit button
            $targetX = $(this).position().left + parseInt($target.css("padding-left")) + parseInt($target.css("margin-left"));
            //calculate the top position for the pinit button
            $targetY = $(this).position().top + parseInt($target.css("padding-top")) + parseInt($target.css("margin-top"));

            //place the pinit button as an overlay on top of image
            $pinit.css({"top":$targetY+20,"left":$targetX+20});

        });

        //loadin the pinterest js to render the actual button iframe
        $.ajax({    url: 'http://assets.pinterest.com/js/pinit.js', dataType: 'script', cache:true}).done(function(){

            //load complete... bind the handlers...

            //on image mouseenter, show the pinit button
            $('.pinit').bind('mouseenter', function(){
                $(this).next('.pinit-wrapper').stop().fadeTo(200, 1.0, function(){ $(this).show(); });
            });
            //on image mouseleave, hide the pinit button
            $('.pinit').bind('mouseleave', function(){
                $(this).next('.pinit-wrapper').stop().fadeTo(200, 0.0, function(){ $(this).hide(); });
            });

            //on pinit button mouseenter, do not fade out
            $('.pinit-wrapper').bind('mouseenter', function(){
                $(this).stop().stop().fadeTo(200, 1.0, function(){ $(this).show(); });
            });

        });

    });
})(jQuery);

//returns pinit link wrapped in a hidden div
function getButtonHTML($media, $description){
    $HTML = '<div class="pinit-wrapper" style="position:absolute;display:none;z-index:9999;cursor:pointer;"><a href="http://pinterest.com/pin/create/button/?url='+$PinItURL+'&media='+$media+'&description='+$description+'" class="pin-it-button" count-layout="none">Pin It</a></div>';
    return $HTML;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:15:51.460

我将按钮放在容器 div 内，并默认隐藏它。然后，当您将鼠标悬停在容器上时，显示里面的按钮。

容器需要有一个相对的位置，按钮需要是绝对的才能有浮动效果。根据容器中的内容，您可能需要将 z-index 属性添加到 div.button

它会是这样的（显然包括 jQuery）：

```
<html>
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$(function() {
    $('div.container').on({
        hover: 
          function() {
            var buttonDiv = $(this).children('div.button');
            buttonDiv.toggle();
          }
    });
});
</script>

<style>
div.container {
    position: relative;
    width: 500px;
    height: 200px;
    border: 1px solid #000;
}
div.button {
    position: absolute;
    left: 20px;
    top: 20px;
    width: 20px;
    height: 10px;
    display: none;
    border: 1px solid #000;
}
</style>
</head>

<body>
<div class="container">
    <div class="button">button text</div>
</div>
</body>
</html> 
```

来吧，把它扔进一个jsfiddle：http: [//jsfiddle.net/5txv4/1/](http://jsfiddle.net/5txv4/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T02:00:52.293

**编辑：**修饰小提琴。看起来更像 pinterest。

这是小提琴（实际上是修补匠）-> [http://tinkerbin.com/Tr7ZZTsx](http://tinkerbin.com/Tr7ZZTsx)

*没有 jquery、javascript 或任何需要的东西。*

小提琴更令人印象深刻，但这就是实现该功能所需的一切。

HTML：

```
<div class="box">

    <ul class="btn-list">
        <li><button>Button 1</button></li>
        <li><button>Button 2</button></li>
        <li><button>Button 3</button></li>
    </ul>

    ... 

</div>​ 
```

CSS：

```
.box {
    width: 200px;
    height: 300px;
}

.btn-list {
    display: none;
}

.box:hover .btn-list {
    display: block
} 
```

# java - 如何从 Class 文件夹外部读取 java 中的属性文件？

> ID：11251289
> 
> 赞同：23
> 
> 时间：2012-06-28T19:07:59.477
> 
> 标签：java, file, file-io, properties

我对主类有以下路径结构：

```
D:/java/myapp/src/manClass.java 
```

我想把属性文件放进去

```
D:/java/myapp/config.properties 
```

这将包含一个文件名和一些其他配置。我将在属性文件中设置文件名，如下所示：`file=file_to_read.txt`

这`file_to_read.txt`将位于`D:/java/myapp/folder_of_file/`

主类将首先从属性文件中读取文件名，然后从文件中获取内容。

如果两者都在，我`config.properties`可以`file_to_read.txt`这样`src/`做`mainClass.java`。但无法以我想要的方式成功。

有人可以帮我吗？如果我想将`myapp`文件夹放在驱动器中的任何位置，并且内部结构与上面描述的相同，并且程序将正确完成工作，我需要您的建议。

我还需要您的建议，如果我想从构建项目后创建的 jar 中完成这项工作，那么我可以毫无问题地做到这一点吗？

我尝试如下只是为了读取属性文件：

```
 URL location = myClass.class.getProtectionDomain().getCodeSource().getLocation();

        String filePath = location.getPath().substring(1,location.getPath().length());

        InputStream in = myClass.class.getResourceAsStream(filePath + "config.properties");
        prop.load(in);

        in.close();

        System.out.println(prop.getProperty("file")); 
```

但是，当尝试从属性文件中获取属性时，这会出错。谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-28T19:12:50.037

> *如何从**Class 文件夹外部**读取 java 中的属性文件？*

`FileInputStream`与固定磁盘文件系统路径一起使用。

```
InputStream input = new FileInputStream("D:/java/myapp/config.properties"); 
```

更好的是将其移动到类路径覆盖的现有路径之一，或者将其原始路径添加`D:/java/myapp/`到类路径。然后你可以得到它如下：

```
InputStream input = getClass().getResourceAsStream("/config.properties"); 
```

或者

```
InputStream input = Thread.currentThread().getContextClassLoader().getResourceAsStream("config.properties"); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-28T21:11:05.783

谢谢大家的建议。我通过这种方式完成了这项工作：

```
 Properties prop = new Properties();
        String dir = System.getProperty("user.dir");
        InputStream in = new FileInputStream(dir + "/myapp/config.properties");
        prop.load(in);
        in.close();
        String filePath = dir + "/myapp/folder_of_file/" + prop.getProperty("file"); /*file contains the file name to read*/ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-20T09:57:17.337

```
Properties property=new Properties();
property.load(new FileInputStream("C:/java/myapp/config.properties")); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-18T07:46:58.190

您需要指定绝对路径，但不应对其进行硬编码，因为这会使在开发和生产环境等之间切换变得更加困难。

您可以从系统属性中获取文件的基本路径，您可以在代码中使用 System.getProperty("basePath") 访问该属性，并且应该将其添加到文件名之前以创建绝对路径。

在运行应用程序时，您可以在 java 命令行中指定路径，如下所示：

```
java -DbasePath="/a/b/c" ... 
```

... 表示您的 Java 命令的当前参数以运行您的程序。

# php - 检索和更改 MySQL 视图中使用的 SQL 以重新执行

> ID：11251291
> 
> 赞同：-1
> 
> 时间：2012-06-28T19:08:05.500
> 
> 标签：php, mysql, database

如何使用 php 和 mysql 语句“显示创建视图视图名称”获取当前视图标准

我想将当前条件放入一个变量中，修改该变量，然后重新运行查询。我只是不明白如何使用 PHP 中的语句。

谢谢你的帮助

- 编辑 -

可能的代码：

```
if($_POST['flag']=='flag'){
    $sqlShow = 'show create view `filter_tbl`';
    $result = mysql_query($sqlShow);
    $resultQuery = $result;
    $resultQuery .= ' AND `lead_id`!="'.$idval.'"';
    $result2 = mysql_query($resultQuery);
    echo $result;
    if($result){
        echo true;
    }
    else{
        echo mysql_error();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:19:20.523

使用它来获取视图使用的 SQL 语句：

```
$viewSQL = "SELECT VIEW_DEFINITION FROM INFORMATION_SCHEMA.VIEWS 
WHERE TABLE_SCHEMA = 'myDatabase' AND TABLE_NAME = 'filter_tbl'";

$result = mysql_query($viewSQL);
$resultQuery = mysql_fetch_assoc($result);
$SqlUsedByView = $resultQuery['VIEW_DEFINITION'];
// Now alter the WHERE clause to your needs:
$MyNewSQL = str_ireplace( "WHERE ", "WHERE `lead_id`!=".$idval." AND " , $SqlUsedByView); 
```

**请注意**，我不知道您的 View 的实际 WHERE 子句是什么，因此上面的 str_ireplace() 只是您如何进行更改的一个示例。

# python - 在 Python 中计算列表中列的平均值

> ID：11251293
> 
> 赞同：1
> 
> 时间：2012-06-28T19:08:11.163
> 
> 标签：python

我必须计算特定嵌套列表中每一列的平均值，然后将平均值保存到新列表中。到目前为止，在我的代码中，我已将原始列表设置为嵌套列表并将其转置以在列中读取。我只是不确定如何编写平均值。

```
#First open the data text file
import re

f = open('C:\Python27\Fake1.txt', 'r')

#Convert to a nested list
nestedlist = []
q = f.read()
f.close()
numbers = re.split('\n', q) #Splits the \n and \t out of the list
newlist = []
for row in numbers:
   newlist.append(row.split('\t'))

#Reading in columns
def mytranspose(nestedlist):
   list_prime = []
   for i in range(len(nestedlist[0])):
          list_prime.append([])
   for row in nestedlist:
          for i in range(len(row)):
                 list_prime[i].append(row[i])
   return(list_prime)
print (mytranspose(newlist))

#Average of Columns
def myaverage(nestedlist):
   avg_list = []
   a = 0
   avg = 0
   for i in newlist:
          a = sum(newlist[i])
          avg = a/len(row)
          avg_list.append(avg[i])
   return(list_prime)

print(myaverage(newlist)) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T19:18:23.203

这是一个更简单的方法来完成整个事情：

```
with open('C:\Python27\Fake1.txt', 'r') as f:
    data = [map(float, line.split()) for line in f]

num_rows = len(data)
num_cols = len(data[0])

totals = num_cols * [0.0]
for line in data:
    for index in xrange(num_cols):
        totals[index] += line[index]

averages = [total / num_rows for total in totals]
print averages 
```

但是，我建议将[numpy](http://numpy.scipy.org/)用于此类事情，因为它变得微不足道（并且速度更快）：

```
import numpy as np
data = np.loadtxt('C:\Python27\Fake1.txt')
print data.mean(0) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T19:24:09.610

假设您有列表列表

```
table = [[1, 2, 3],  [10, 20, 30], [100, 200, 300]] 
```

您可以使用 zip 转置它并将原始列表列表作为参数列表传递（星号的作用）：

```
transposed = zip(*table)
: [(1, 10, 100), (2, 20, 200), (3, 30, 300)] 
```

要获得这些列的总和，您可以使用映射函数映射每个条目：

```
sums = map(sum, transposed)
: [111, 222, 333] 
```

由于平均值是总和除以长度，我们可以用一个函数来做到这一点：

```
def avg(items):
    return float(sum(items)) / len(items) 
```

或者您可以在 lambda 中执行此操作：

```
avg = lambda items: float(sum(items)) / len(items) 
```

并用它代替 sum：

```
averages = map(avg, transposed) 
```

您可以将所有这些放在一个函数中，如下所示：

```
table = [[1, 2, 3],  [10, 20, 30], [100, 200, 300]]
averages = map(lambda items: float(sum(items)) / len(items), zip(*table)) 
```

但这有点难以理解，所以分解它通常更清楚：

```
table = [[1, 2, 3],  [10, 20, 30], [100, 200, 300]]
transposed = zip(*table)
avg = lambda items: float(sum(items)) / len(items)
averages = map(avg, transposed) 
```

# php - 用于从 SET 列中获取最常用项目的 SQL 查询

> ID：11251295
> 
> 赞同：2
> 
> 时间：2012-06-28T19:08:22.753
> 
> 标签：php, mysql, sql, zend-framework

我们在 mysql 数据库中有一个用户配置文件表，其中一个字段是`SET`跟踪用户组的列。

表结构为：

```
CREATE TABLE IF NOT EXISTS `users_profiles` (
  `userId` mediumint(9) NOT NULL DEFAULT '0',
  `birthday` date DEFAULT NULL,
  `groups` set('1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20')
 ); 
```

我想在排序的降序列表中获取最受欢迎的组，但是我们使用`SET`列的事实使得使用诸如`COUNT`.

我可以通过运行以下查询来获得特定的组数：

```
SELECT count(NULLIF(`interests` & 1,0)) as Count1stVal FROM users_profiles; 
```

但是，我不想为每个组运行查询，然后计算最受欢迎的组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:38:15.227

像这样的东西应该工作：

```
SELECT 
    groups, # get the group number
    COUNT(groups) AS group_cnt # use this for sorting
FROM users_profiles
GROUP BY groups
ORDER BY group_cnt DESC 
```

我在这台机器上没有服务器，所以我无法测试它，但我认为它应该可以按预期工作。

编辑：该查询仅在组列中只有一个值时才有效。

如果您有一个不同的表，其中组将被列为条目，其 id 对应于集合中的数字，您可以执行以下操作：

```
SELECT
    g.id, # the group id corresponds to the groups in the set
    COUNT(up.userId) as g_cnt # count the number of users with the group
FROM (
    users_profiles up,
    groups g
)
WHERE
    FIND_IN_SET(g.id, up.groups) > 0
GROUP BY g.id
ORDER BY g_cnt DESC 
```

但是，如果您要引入组表，那么最好将其规范化为用户和组之间的多对多关系

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:30:51.117

我有一个建议，但不是实际代码（因为我对 set 数据类型不太熟悉）。

首先，创建一个临时表或子查询，该表或子查询对于集合的每个元素都有一行。每一行的集合中都会有该元素。称之为元素。

其次，执行以下查询：

```
select e.element, count(*)
from user_profiles up join
     Elements e
     on up.groups like concat('%', e.element, '%')
group by e.element
order by 2 desc 
```

现在，唯一的问题是您的设定值彼此重叠。所以，你有“1”和“10”，所以这不太行。您可以执行以下操作之一来解决此问题。

1.  重命名设置值（例如，您的实际表可能没有这个问题）。
2.  使用“&”操作和生成的数字列表。在这种情况下，on 语句更改为：

    在 up.groups & e.element > 0

该页面[http://www.vbmysql.com/articles/mysql/the-mysql-set-datatype](http://www.vbmysql.com/articles/mysql/the-mysql-set-datatype)很好地概述了您可以使用集合做什么。这也解释了为什么他们经常气馁。. . 因为它们不提供规范化表的功能。

# asp.net - 在多个客户端请求期间，Cassette 的性能有多好？

> ID：11251297
> 
> 赞同：1
> 
> 时间：2012-06-28T19:08:27.310
> 
> 标签：asp.net, iis, caching, cassette

我们正在考虑在我们的 asp.net Web 应用程序中使用 Cassette，它可能被数百名用户同时访问。Cassette 通过 HTTP 处理程序工作，该处理程序处理这样开始的请求：

```
'_cassette\assets\*' 
```

我注意到在硬盘驱动器上没有创建任何包。看起来资源在运行时在内存中被编译和压缩并返回给用户。

这是否意味着 Cassette 依赖代理或 IIS 缓存，而不是浏览器缓存来处理其他用户对同一捆绑包的所有后续请求？添加到每个包响应是否`Cache-Control: public`意味着 URL 的包将*始终*由 IIS/代理缓存，并且 Web 应用程序不会做双重工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T02:28:00.970

盒式磁带将生成的捆绑包缓存在服务器磁盘上的独立存储中。（但仅在发布模式下）

# mysql - 构造查询以获取基于单个字段的所有匹配项

> ID：11251309
> 
> 赞同：0
> 
> 时间：2012-06-28T19:09:19.977
> 
> 标签：mysql, subquery

我有一个包含两个表、链接和旅游的数据库。旅游定义为

```
+----+-------------+-----+-----+--------+---------+-------+---------+
| ID | FileName    | Lat | Lon | Name   | Heading | Width | Height  |
+----+-------------+-----+-----+--------+---------+-------+---------+ 
```

和链接被定义为

```
+-----+------------+--------+
| ID  | locationID | linkID |
+-----+------------+--------+ 
```

`links.locationID`是 tour.ID 的外键。我想要做的是获取与特定链接匹配的所有链接`tour.name`

现在，我必须运行这两个查询，并使用第一个的 ID 作为第二个的变量

```
SELECT * FROM tour WHERE tour.name = 'name'

SELECT * FROM tour
  INNER JOIN links ON tour.ID = links.linkID 
  WHERE links.locationID = ID of first query 
```

我怎样才能使它适应一个单一的搜索？

我试过一个子查询：

```
SELECT * FROM tour 
  INNER JOIN links ON tour.ID = links.linkID 
  WHERE links.locationID = ( SELECT * FROM tour WHERE tour.name = 'name') 
```

这给了我一个错误 1241，说操作数应该包含一列。

我查找了一些子查询的示例，但是它们都缺少我正在使用的内部连接语句。此查询需要进行哪些修改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:05:24.487

```
SELECT links.*, tour.*
FROM links
JOIN tour ON tour.ID = links.linkID
JOIN tour AS location ON location.ID = links.locationID -- you must create an alias, in order to refer to this table without ambiguity
WHERE location.name = 'name'; 
```

至于您的带有子查询的版本，您可以这样做：

```
SELECT * FROM tour 
INNER JOIN links ON tour.ID = links.linkID 
WHERE links.locationID = (
    SELECT ID -- "operand should contain one column"
    FROM tour WHERE tour.name = 'name'
); 
```

但更喜欢第一种选择。

# javascript - Escape Dust.js 标签

> ID：11251313
> 
> 赞同：4
> 
> 时间：2012-06-28T19:09:42.880
> 
> 标签：javascript, templates, node.js, dust.js

**TLDR；跳到主要问题的底部段落。**

我将尝试通过省略我*为什么*要这样做以及围绕它的上下文来保持这种简洁明了。但至少，我在后端运行 Node.js，使用 Dust.js 渲染每个视图。

然后我还有一个 Dust 的客户端副本，它可以根据需要动态呈现界面元素。当它投入生产时，我将预编译我所有的客户端 Dust 模板，并完全避免这个问题。但是，在开发过程中，如果我可以将模板保存在 DOM 元素中，测试会简单得多。然而，这些“子模板”被破坏了，因为用于客户端模板的标签被填充了空值（因为我未能将它们提供给服务器端渲染器）。

假设我有这个模板：

```
<!DOCTYPE html>
<html>
<head>
    <title>{title}</title>
</head>
<body>
    <div id="some_template_to_be_rendered_client_side">
        <p>{description}</p>
    </div>
</body>
</html> 
```

我希望在渲染模板时由 Node.js Dust 填充 {title} 模板标签，但我正在寻找一种方法来*转义*{description} 标签，以便我可以动态编译和渲染模板在客户端使用 div 中的 HTML 作为模板。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T03:25:18.323

您可以使用特殊的逃生标签来逃生`{`或`}`在灰尘中逃生。它们是`{~lb}`和`{~rb}`。

例如

```
{~lb}hello{~rb} 
```

将呈现为

```
{hello} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-01T18:45:19.523

您只能转义五个特殊字符 [ docs: https://www.dustjs.com/docs/syntax/ ]

> {~special} 特殊字符转换为特殊字符
> 
> 一个特殊的是一个单开大括号 {，后跟一个波浪号 ~，后跟一个引用中的任何字符，然后是一个单闭大括号 }。Dust 支持五种“特价商品”：
> 
> {~s} 变为单个空格 {~n} 变为新行 {~r} 变为回车 {~lb} 变为左花括号 { {~rb} 变为右花括号 }

# jquery - jquery setInterval 与 ajax 冲突

> ID：11251314
> 
> 赞同：0
> 
> 时间：2012-06-28T19:09:48.137
> 
> 标签：jquery, ajax, setinterval

我有一个 setinterval 方法，它每 3 秒调用一次 php 脚本来检查新数据。

```
 setInterval($.proxy(function(){
                    var dataString =  options.url+'table_id='+options.table_id
                    $.ajax({
                            type : 'POST', 
                            url : options.url+"check", 
                            data : dataString, 
                            success: $.proxy(function(data){
                            if(data != ""){
                            var json = $.parseJSON(data);

                            if(json.num >= 1){
                                this.callOtherMethod(json.user_id);

                                    }, this));
                            }
                        }
                            }, this)
                        });
                }, this), 3000); 
```

如果 num >= 1 将显示按钮。

如果用户单击添加按钮，则 callOtherMethod 的 url 在调用第一个方法时会加载很多次。示例：如果用户在 30 秒后单击添加按钮 example.com/add 将被调用 10 次。

我的呼叫其他方法

```
 this.callOtherMethod = function(id)
                {
                this.id = id;
                $('#button').show();
                $(".add").bind('click', $.proxy(function(){
                if(this.user_id > 0){
                    $.ajax({
                        type: "POST",
                        url: "add",
                        data: options.url+"text="+this.text+"&user_id="+this.user_id,
                        success: $.proxy(function(data){
                            if(data != ""){

                            // add action
                            }                                
                        }, this)
                    });
                }
                },this)); 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:40:35.600

问题是您正在显示按钮并进行绑定，`callOtherMethod`而您应该只分配新的`id`. `$('#button').show()`and `$(".add").bind('click', $.proxy(function(){ ...`应该在一个单独的方法中调用，该方法只从该方法触发一次`setInterval`。（您可以使用并检查布尔变量以使其仅触发一次）。

希望这可以帮助

# javascript - Safari 没有单击我克隆的表单上的输入 [type=file]

> ID：11251320
> 
> 赞同：1
> 
> 时间：2012-06-28T19:10:05.553
> 
> 标签：javascript, jquery, safari, frontend

我有一个包含在表单中的表，因为它用于包含所有行的批处理操作。

如果没有附加文件，每一行都应该有一个上传按钮。我可以为表格内隐藏的每一行呈现一个表格，但由于包装形式，我不能。

所以我在这个表之外创建了一个虚拟模板表单。一旦用户单击该行上的虚假上传按钮，它就会克隆虚拟表单，使用该行的信息设置其信息，将克隆的表单插入 DOM，然后单击克隆表单内的 input[type=file] 现在是插入到 DOM 上。

在 Chrome、Firefox、Opera、IE 上像魅力一样工作，但在 Safari 上却不行。

在这个 JSFiddle URL 上，您会找到我正在尝试做的事情的复制品。请注意，一旦您单击 Div，它将克隆表单并触发对输入的单击（如果您不在 Safari 中）。如果是，它会克隆表单，但不会单击克隆的表单输入。一旦表单已经被克隆，如果再次单击 Div，它将触发单击。

[http://jsfiddle.net/WWqK8/5/](http://jsfiddle.net/WWqK8/5/)

如果我没有清楚地解释自己，请告诉我。

# backbone.js - 当项目没有 ID 时更新主干视图项目

> ID：11251329
> 
> 赞同：0
> 
> 时间：2012-06-28T19:10:39.180
> 
> 标签：backbone.js

我有一个带有日历页面的应用程序。在那个页面上，我有代表约会的元素。到目前为止，这是我一直在显示约会的方式：

1.  将所有元素打印到页面上，每个元素都带有`position: absolute`.
2.  遍历元素，获取每个元素并根据约会开始的时间晚点`appointment_id`设置该元素的属性。`top`

换句话说，我在 , 处将所有约会彼此叠放`top: 0`，`left: 0`然后将每个约会垂直移动到正确的位置。（这是一个多人日程日历，而不是常规挂历。）我做了类似的事情来将约会安排成列，但现在这并不重要。

这是我的问题：在初始页面加载时，一切正常，因为每个约会元素都有一个与之关联的 id。**但是，当我更新约会时，它的 ID 会被清除，并且在我重新安排时会错过约会。它只是停留在左上角。**

发生这种情况的原因很清楚，也很有意义。我只是不知道该怎么办。**在 Backbone 中，如果我不能使用其模型的 ID，我如何引用一个元素？**

为了使事情变得更复杂，除非我在渲染视图*后*执行此重新排列，否则这些重新排列都不起作用 - 换句话说，我必须在路由器中进行重新排列。这似乎是错误的，在路由器的范围内，我不再有权访问各个元素。我只能访问包含约会模型的集合，并且我只能将每个模型与它的元素匹配，如果它的元素知道它自己的约会 ID，更新后它不知道！

希望这一切都说得通。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:21:45.220

每个代表约会的 DOM 元素都应该是一个单独的视图，并绑定了 Appointment 模型。

当 Appointment 模型发生变化时，您需要做的就是重新渲染该单个视图（仅重新计算一个位置并减少 DOM 操作）。

预约查看：

```
AppointmentView = Backbone.View.extend
    # model: Appointment
    tagName: "div"
    events: {}

    initialize: ->
        @model.on 'change:time', @render, @

    render: ->
        # calculate the position and append to the DOM
        # you can take a look at setElement function, if needed - http://documentcloud.github.com/backbone/#View-setElement 
```

# css - 当鼠标悬停时，在带有图像和文本的 Div 上显示灰色 Div

> ID：11251332
> 
> 赞同：2
> 
> 时间：2012-06-28T19:10:51.550
> 
> 标签：css, html, mouseover

我想做这个：

![在此处输入图像描述](../Images/eddc86828dcb3f46a2f5f9eddd2a8c63.png)

我有一个带有项目的 div：标题、图像、一些文本。当我将鼠标放在那个 div 上时，我需要这个 div 变成灰色，如图 2 所示。我有这样的代码：

CSS

 `````
.container div {
    display: none;
    width: 250px;
    height: 250px;
}

.container:hover div {
    display: block;
}

.graydiv {
    background-image:url(over.png); // transparent gray png
    position: absolute;
    margin-top: -250px; 
} 
````  `HTML：

```
<div class="container">
<img src="someimg.jpg" alt="" />
<p>some text</p>
<p>some text</p>
<div class="graydiv"></div></div> 
```

但是IE8不显示灰色div...Chrome、Firefox等都可以！

**另外我需要整个 Div 是一个链接......**

那么有什么想法可以做什么和使用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:35:33.483

试试这个。[http://jsfiddle.net/QZbRw/](http://jsfiddle.net/QZbRw/)

HTML

```
<a href="#">
    <div class="container">
        <img src="someimg.jpg" alt="" />
        <p>some text</p>
        <p>some text</p>
    </div>
    <span class="hover"></span>
</a>​ 
```

CSS

```
.container {
 width: 250px;
 height: 250px;
 background:#FFF;
}

a:hover .hover{
 width: 250px;
 height: 250px;
 background:#000;
 opacity:0.5;
 -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
 filter: alpha(opacity=50);
 z-index:100;
 float:left;
 position:relative;
 top:-250px;
} 
```

​</p>``

# ruby-on-rails - 生产环境中的 Rails 路由

> ID：11251333
> 
> 赞同：0
> 
> 时间：2012-06-28T19:10:51.723
> 
> 标签：ruby-on-rails, routing

将 Rails 应用程序移至生产环境并遇到路由问题。我读过这个答案：

[ActionController::Base.relative_url_root 的替代品是什么？](https://stackoverflow.com/questions/3181746/what-is-the-replacement-for-actioncontrollerbase-relative-url-root)

但我仍然无法理解完整的解决方案，以及如何在不关心应用程序放置位置的情况下继续开发。

我在以下位置运行应用程序：`http://dev.mycompany.com:8081/myapp/`

所以我把它放在production.rb中：

config.action_controller.relative_url_root = "/myapp"

我把它放在路线中：

```
 scope "/myapp" do
    root :to => 'application#index'
    match 'login/index' => 'logins#index',        :as => 'logins_index'
  end 
```

在我的表单标签中，我有：

```
<form class="loginForm" name="loginForm" id="loginForm" action="<%= url_for('/login') %>" method="post"> 
```

我以为一切都会神奇地起作用，但事实上我需要把

```
 action="<%= url_for('/myapp/login') %>" 
```

让它工作。这是预期的吗？我不想担心我的应用程序在哪里进行生产，但是这个解决方案要求它在我的代码中。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:17:56.857

您已经定义了 helper `logins_index_xxx`（`xxx`可以在哪里`path`或`url`），但您不使用它。为什么？试试这个：

```
... action="<%= logins_index_path %>" ... 
```

# sql-server - 如何在另一个表变量中使用一个表变量的字段（列）

> ID：11251337
> 
> 赞同：0
> 
> 时间：2012-06-28T19:11:03.453
> 
> 标签：sql-server, foxpro

我在将我们的数据库从 Foxpro 迁移到 SQL 时遇到了这种情况。

下面是示例场景..（我的原始代码有点复杂，所以只是尝试创建我自己的示例）

我在我的 sql server 函数中创建了几个表变量来获得我需要的东西。

```
DECLARE @temp_1 TABLE(ID INT,
Name NCHAR(7),
bday DATE,
m_status NVARCHAR(10)); 

INSERT INTO @temp_1
SELECT Name, bday, m_status from Employee_Info

DECLARE @temp_2 TABLE(ID INT,
City NCHAR(7),
Country NVARCHAR(10),
zip NVARCHAR(10)); 

INSERT INTO @temp_2
SELECT City, Country, zip from Employee_Address 
```

接下来是一种情况，我需要使用上述表变量中的每个字段来将数据派生到我的第三个表变量中。

例如，

```
DECLARE @temp_full TABLE (
Name NCHAR(7),
City NCHAR(7));

INSERT INTO @temp_full
SELECT @temp_1.Name, @temp_2.City FROM @temp_1, @temp_2 WHERE @temp_1.ID = @temp_2.ID

[EDITED TO INCLUDE INSERT USING JOINS]

INSERT INTO @temp_full
SELECT @temp_1.Name, @temp_2.City FROM @temp_1 INNER JOIN @temp_2 ON @temp_1.ID = @temp_2.ID 
```

但是，当我执行@temp_1.Name，@temp_2.City 时，我收到一条错误消息，提示我必须删除标量变量@temp_1，@temp_2。

谁能告诉我如何解决这个问题。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:58:06.993

This is not foxpro and @variable_tables are not cursors like in foxpro, there are no any current record pointer for table, tables are sets of records and you must work with it as with sets.

If you need to fill @temp_full with records combined from tables @temp_1 and @temp_2, you must use select with joining this two tables like this:

```
INSERT INTO @temp_full
SELECT 
    temp_1.Name, 
    temp_2.City 
FROM @temp_1 temp_1 
JOIN @temp_2 temp_2 on temp_2.ID = temp_1.ID 
```

Also note that you must use alias for variable tables

# ios - 在 UIImage 和 Base64 字符串之间转换

> ID：11251340
> 
> 赞同：254
> 
> 时间：2012-06-28T19:11:10.023
> 
> 标签：ios, swift, uiimage, base64, nsdata

有谁知道如何将 a 转换`UIImage`为 Base64 字符串，然后将其反转？

我有以下代码；编码前的原始图像是好的，但我编码和解码后只得到一个空白图像。

```
NSData *imageData = UIImagePNGRepresentation(viewImage);

NSString *b64EncStr = [self encode: imageData];

NSString *base64String = [self encodeBase64:imageData]; 
```

* * *

## 回答 #1

> 赞同：604
> 
> 时间：2012-06-28T19:22:03.510

## 迅速

**首先我们需要有图像的 NSData**

```
//Use image name from bundle to create NSData
let image : UIImage = UIImage(named:"imageNameHere")!
//Now use image to create into NSData format
let imageData:NSData = UIImagePNGRepresentation(image)!

//OR next possibility

//Use image's path to create NSData
let url:NSURL = NSURL(string : "urlHere")!
//Now use image to create into NSData format
let imageData:NSData = NSData.init(contentsOfURL: url)! 
```

**Swift 2.0 > 编码**

```
let strBase64:String = imageData.base64EncodedStringWithOptions(.Encoding64CharacterLineLength) 
```

**Swift 2.0 > 解码**

```
let dataDecoded:NSData = NSData(base64EncodedString: strBase64, options: NSDataBase64DecodingOptions.IgnoreUnknownCharacters)! 
```

**Swift 3.0 > 解码**

```
let dataDecoded : Data = Data(base64Encoded: strBase64, options: .ignoreUnknownCharacters)! 
```

**编码**：

```
let strBase64 = imageData.base64EncodedString(options: .lineLength64Characters)
print(strBase64) 
```

**解码**：

```
let dataDecoded:NSData = NSData(base64EncodedString: strBase64, options: NSDataBase64DecodingOptions(rawValue: 0))!
let decodedimage:UIImage = UIImage(data: dataDecoded)!
print(decodedimage)
yourImageView.image = decodedimage 
```

**斯威夫特 3.0**

```
let dataDecoded : Data = Data(base64Encoded: strBase64, options: .ignoreUnknownCharacters)!
let decodedimage = UIImage(data: dataDecoded)
yourImageView.image = decodedimage 
```

* * *

## Objective-C

## iOS7 > 版本

您可以使用`NSData's` `base64EncodedStringWithOptions`

**编码**：

```
- (NSString *)encodeToBase64String:(UIImage *)image {
 return [UIImagePNGRepresentation(image) base64EncodedStringWithOptions:NSDataBase64Encoding64CharacterLineLength];
} 
```

**解码**：

```
- (UIImage *)decodeBase64ToImage:(NSString *)strEncodeData {
  NSData *data = [[NSData alloc]initWithBase64EncodedString:strEncodeData options:NSDataBase64DecodingIgnoreUnknownCharacters];
  return [UIImage imageWithData:data];
} 
```

* * *

## iOS 6.1 及 < 版本

**第一个选项**：使用[此](http://www.imthi.com/blog/programming/iphone-sdk-base64-encode-decode.php)链接`encode`和`decode`图像

在[你](http://www.imthi.com/wp-content/uploads/2010/08/base64.zip)的`project`.

**编码**：

```
 NSData* data = UIImageJPEGRepresentation(yourImage, 1.0f);
 NSString *strEncoded = [Base64 encode:data]; 
```

**解码**：

```
 NSData* data = [Base64 decode:strEncoded ];;
 image.image = [UIImage imageWithData:data]; 
```

**另一种选择**：使用[QSUtilities](https://github.com/mikeho/QSUtilities/blob/master/QSStrings.h)和`encoding``decoding`

* * *

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2018-07-18T05:55:14.010

# 斯威夫特 5

**编码**

```
func convertImageToBase64String (img: UIImage) -> String {
    return img.jpegData(compressionQuality: 1)?.base64EncodedString() ?? ""
} 
```

**解码**

```
func convertBase64StringToImage (imageBase64String:String) -> UIImage {
    let imageData = Data(base64Encoded: imageBase64String)
    let image = UIImage(data: imageData!)
    return image!
} 
```

> 注意：在 xcode 10.2 中测试

# 斯威夫特 4

**编码**

```
func convertImageToBase64String (img: UIImage) -> String {
    let imageData:NSData = UIImageJPEGRepresentation(img, 0.50)! as NSData //UIImagePNGRepresentation(img)
    let imgString = imageData.base64EncodedString(options: .init(rawValue: 0))
    return imgString
} 
```

**解码**

```
func convertBase64StringToImage (imageBase64String:String) -> UIImage {
    let imageData = Data.init(base64Encoded: imageBase64String, options: .init(rawValue: 0))
    let image = UIImage(data: imageData!)
    return image
} 
```

> 注意：在 xcode 9.4.1 中测试

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2017-12-02T17:48:30.980

**Swift 4.2 扩展方法**

```
extension UIImage {
    func toBase64() -> String? {
        guard let imageData = self.pngData() else { return nil }
        return imageData.base64EncodedString(options: .lineLength64Characters)
    }
} 
```

**XCode 9.1 和 Swift 4.0**

```
//
// Convert UIImage to a base64 representation
//
class func convertImageToBase64(image: UIImage) -> String {
    let imageData = UIImagePNGRepresentation(image)!
    return imageData.base64EncodedString(options: Data.Base64EncodingOptions.lineLength64Characters)
}

//
// Convert a base64 representation to a UIImage
//
class func convertBase64ToImage(imageString: String) -> UIImage {
    let imageData = Data(base64Encoded: imageString, options: Data.Base64DecodingOptions.ignoreUnknownCharacters)!
    return UIImage(data: imageData)!
} 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-10-19T06:16:18.530

**SWIFT 3.0、XCODE 8.0**

将字符串替换为您的 URL。testImage 是 ImageView 的一个出口

```
// Put Your Image URL
let url:NSURL = NSURL(string : "http://.jpg")!
// It Will turn Into Data
let imageData : NSData = NSData.init(contentsOf: url as URL)!
// Data Will Encode into Base64
let str64 = imageData.base64EncodedData(options: .lineLength64Characters)
// Now Base64 will Decode Here
let data: NSData = NSData(base64Encoded: str64 , options: .ignoreUnknownCharacters)!
// turn  Decoded String into Data
let dataImage = UIImage(data: data as Data)
// pass the data image to image View.:)
testImage.image = dataImage 
```

希望它有帮助谢谢。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-02-10T11:01:52.947

斯威夫特iOS8

```
// prgm mark ---- 

// convert images into base64 and keep them into string

func convertImageToBase64(image: UIImage) -> String {

    var imageData = UIImagePNGRepresentation(image)
    let base64String = imageData.base64EncodedStringWithOptions(.allZeros)

    return base64String

}// end convertImageToBase64

// prgm mark ----

// convert images into base64 and keep them into string

func convertBase64ToImage(base64String: String) -> UIImage {

    let decodedData = NSData(base64EncodedString: base64String, options: NSDataBase64DecodingOptions(rawValue: 0) )

    var decodedimage = UIImage(data: decodedData!)

    return decodedimage!

}// end convertBase64ToImage 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-10-02T15:17:16.923

```
@implementation UIImage (Extended)

- (NSString *)base64String {
    NSData * data = [UIImagePNGRepresentation(self) base64EncodedDataWithOptions:NSDataBase64Encoding64CharacterLineLength];
    return [NSString stringWithUTF8String:[data bytes]];
}

@end 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-01-22T14:14:49.520

**斯威夫特 3.0**

将图像转换为 base64 字符串

**在操场上测试**

```
 var logo = UIImage(named: "image_logo")
    let imageData:Data =  UIImagePNGRepresentation(logo)
    let base64String = imageData.base64EncodedString()
    print(base64String) 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2015-10-23T17:33:23.450

在 swift 2.0 中使用这个扩展（感谢 Jonas Franz）

```
extension UIImage{
  func toBase64() -> String{
    let imageData = UIImagePNGRepresentation(self)!
    return imageData.base64EncodedStringWithOptions(.Encoding64CharacterLineLength)
  }
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-12-15T06:37:10.263

# 在 Swift 3.0 和 Xcode 8.0 中

## 编码：

```
let userImage:UIImage = UIImage(named: "Your-Image_name")!
let imageData:NSData = UIImagePNGRepresentation(userImage)! as NSData
let dataImage = imageData.base64EncodedString(options: .lineLength64Characters) 
```

## 解码：

```
let imageData = dataImage
let dataDecode:NSData = NSData(base64Encoded: imageData!, options:.ignoreUnknownCharacters)!
let avatarImage:UIImage = UIImage(data: dataDecode as Data)!
yourImageView.image = avatarImage 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-07-02T15:38:11.053

快速扩展：

```
extension UIImage{
     func toBase64() -> String{
          var imageData = UIImagePNGRepresentation(self)
          return imageData.base64EncodedStringWithOptions(.allZeros)
     }
} 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-11-21T20:00:04.017

**斯威夫特 4**

```
enum ImageFormat {
    case png
    case jpeg(CGFloat)
}

extension UIImage {
    func base64(format: ImageFormat) -> String? {
        var imageData: Data?

        switch format {
        case .png: imageData = UIImagePNGRepresentation(self)
        case .jpeg(let compression): imageData = UIImageJPEGRepresentation(self, compression)
        }

        return imageData?.base64EncodedString()
    }
}

extension String {
    func imageFromBase64() -> UIImage? {
        guard let data = Data(base64Encoded: self) else { return nil }

        return UIImage(data: data)
    }
} 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2020-02-15T07:33:42.440

对于 Base64 代码，例如：

> “数据：图像/ JPG; BASE64，iVBORw0KGgoAAAANSUhEUgAAAMgAAADIAQAAAACFI5MzAAAB9klEQVR42u2YQYorMQxEBbqWQFc36FoG / 6pyOpNZ / J20mGGaTiftF2hbLpWU2PnfYX / k55Jl5vhUVTu8luUdaCeFcydejjdwDUyQ5XV2JOcSZnkHZgiejusK51QGycrl2yIR1BwjjKivSFz8YC7fY91GKIj6PL5pp4 / wWL54t3MHt / AjFxoJwmkYwosbh6 / UEHE817hvi / vGex8gEkTdVRo1 / 55BM7kjUIgpoMW1DxB6kD + GtCX4PUFws40OwcUm0 / lRYjOB3pG9YcguBFQuO0ISJ9UIrUP5CKy / MriXHDkETYmLDax1 + RkgWBglQgUyq6T / HCAHBq7iJHd9KWWAlIKoGpiLc6HNDhDkETNYwqeVhym72snKKxA6BJL4UPM5QPYtgGwZeNZ5O0UvgSb0VGdcmVfJCQwQrM + pRiGnYJ497SUlv2NOYfOCX3qU2Equ7W3JAslsN7oDBDWWojcZq + KbEwQRdRYl1wD3ML52rpGc6w24qCXaKh4DRHWJbUPemqtEGyBMKC4Q / QmWiDWzRxkgO1UtSLh3svMaILeDpEGwrwvZ4Bkg9LynK1Y1LJWQdqKGnm3K7VTCz7vS9hIuUyYRd / xKcYRIHGqAViisQ4S / Uozmqo41Pn6bNRI1xS / fk2fMEKpDZYkpjP6B1T0HyN9 / Nb的+M/AORXDdE4Lb/mQAAAABJRU5ErkJggg==

使用 Swift5.0 代码，如：

```
func imageFromBase64(_ base64: String) -> UIImage? {
    if let url = URL(string: base64), let data = try? Data(contentsOf: url) {
        return UIImage(data: data)
    }
    return nil
} 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-09-02T13:17:49.773

**斯威夫特 5。**

```
class ImageConverter {

    func base64ToImage(_ base64String: String) -> UIImage? {
        guard let imageData = Data(base64Encoded: base64String) else { return nil }
        return UIImage(data: imageData)
    }

    func imageToBase64(_ image: UIImage) -> String? {
        return image.jpegData(compressionQuality: 1)?.base64EncodedString()
    }

} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-09-07T13:46:41.753

**Swift 版本 - 为图像创建 base64**

在我看来，在不安全的情况下隐式展开可选`UIImagePNGRepresenatation()`是不安全的，所以我建议使用如下扩展：

```
extension UIImage {

    func toBase64() -> String? {
        let imageData = UIImagePNGRepresentation(self)
        return imageData?.base64EncodedStringWithOptions(NSDataBase64EncodingOptions.Encoding64CharacterLineLength)
    }
} 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-07-19T15:51:36.397

我尝试了所有解决方案，但没有一个对我有用（使用 Swift 4），如果将来有人遇到同样的问题，这是对我有用的解决方案。

```
let temp = base64String.components(separatedBy: ",")
let dataDecoded : Data = Data(base64Encoded: temp[1], options: 
 .ignoreUnknownCharacters)!
let decodedimage = UIImage(data: dataDecoded)

yourImage.image = decodedimage 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2020-03-11T09:35:53.267

正如**Tyler Sheaffer**所说，您是否通过前缀非常好理解。但由于某种原因，您可能需要这个前缀来描述 base64 字符串开头的 mime 类型，所以我建议这段代码在编码之前传递一些选项（**Swift 5**）：

```
extension UIImage {

    enum Format: String {
        case png = "png"
        case jpeg = "jpeg"
    }

    func toBase64(type: Format = .jpeg, quality: CGFloat = 1, addMimePrefix: Bool = false) -> String? {
        let imageData: Data?
        switch type {
        case .jpeg: imageData = jpegData(compressionQuality: quality)
        case .png:  imageData = pngData()
        }
        guard let data = imageData else { return nil }

        let base64 = data.base64EncodedString(options: Data.Base64EncodingOptions.lineLength64Characters)

        var result = base64
        if addMimePrefix {
            let prefix = "data:image/\(type.rawValue);base64,"
            result = prefix + base64
        }
        return result
    }
} 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-07-23T17:09:08.100

使用便利初始化程序解码 - Swift 5

```
extension UIImage {
    convenience init?(base64String: String) {
        guard let data = Data(base64Encoded: base64String) else { return nil }
        self.init(data: data)
    }
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-10-13T08:47:27.733

```
See my class -  AppExtension.swift

// MARK: - UIImage (Base64 Encoding)

public enum ImageFormat {
    case PNG
    case JPEG(CGFloat)
}

extension UIImage {

    public func base64(format: ImageFormat) -> String {
        var imageData: NSData
        switch format {
        case .PNG: imageData = UIImagePNGRepresentation(self)
        case .JPEG(let compression): imageData = UIImageJPEGRepresentation(self, compression)
        }
        return imageData.base64EncodedStringWithOptions(.allZeros)
    }
} 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-10-19T14:01:59.753

**在 Swift 3.0 中**

```
func decodeBase64(toImage strEncodeData: String) -> UIImage {

    let dataDecoded  = NSData(base64Encoded: strEncodeData, options: NSData.Base64DecodingOptions.ignoreUnknownCharacters)!
    let image = UIImage(data: dataDecoded as Data)
    return image!

} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-10-05T13:03:58.400

斯威夫特 4.2 | Xcode 10

```
extension UIImage {

    /// EZSE: Returns base64 string
    public var base64: String {
        return self.jpegData(compressionQuality: 1.0)!.base64EncodedString()
    }
} 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-12-13T08:45:00.597

**斯威夫特 5，Xcode 10。**

```
 let imageData = UIImage(named:"imagename").pngData()?.base64EncodedString(options: .lineLength64Characters)

print(imageData)
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2019-10-05T06:49:34.793

```
//convert Image to Base64 (Encoding)

let strBase64 = imageData.base64EncodedString(options: .lineLength64Characters)

print(strBase64)

// convert Base64 to Image (Decoding)

let dataDecoded:NSData = NSData(base64EncodedString: strBase64, options: NSDataBase64DecodingOptions(rawValue: 0))!

let decodedimage:UIImage = UIImage(data: dataDecoded)!

print(decodedimage)

yourImageView.image = decodedimage 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-12-24T00:50:48.033

对于 iOS 7+，Objective-C，以下是从图像 URL 开始进行转换的方法：

```
NSURL *url = [NSURL URLWithString:self.groove.thumbnailURL];

UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:url]];

NSString *base64String = [UIImagePNGRepresentation(image)
base64EncodedStringWithOptions:NSDataBase64Encoding64CharacterLineLength]; 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-01-09T11:20:55.297

斯威夫特 3.0 和 Xcode 8.0

```
let imageData = UIImageJPEGRepresentation(imageView.image!, 1)

    let base64String = (imageData! as Data).base64EncodedString(options: NSData.Base64EncodingOptions(rawValue: 0))
    print(base64String) 
```

# xsd - 如何在 XSD 规范中设置层次结构？

> ID：11251342
> 
> 赞同：2
> 
> 时间：2012-06-28T19:11:17.870
> 
> 标签：xsd

我是 xsd 规范领域的新手，我需要 stackoverflow 社区的帮助。我想要做的是定义一个类别层次结构。

例子：

1.  A 类
    1.1。B
    类 1.1.1 C 类

我如何在 xsd 规范中定义它？也许有一些最佳实践解决方案。

克里斯

我试图以这种方式指定它。但我不确定这是否是一种可行的方法。

```
<xs:element name="category">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="maincategory">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="subcategory">
              <xs:complexType>
                <xs:sequence>
                  <xs:element ref="subcategory"/>
                </xs:sequence>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
</xs:element>

<xs:element name="maincategory" type="xs:string"/>
<xs:element name="subcategory" type="xs:string"/> 
```

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T11:43:33.183

您有两个名为“子类别”的东西。我已将元素重命名为“元素”。

这就是我要做的：

```
<xs:complexType name="category_t">
  <xs:sequence>
    <xs:element name="maincategory" type="main_category_t" />
  </xs:sequence>
</xs:complexType>

<xs:complexType name="main_category_t">
  <xs:sequence>
    <xs:element type="subcategory_t" />
  </xs:sequence>
</xs:complexType>

<xs:complexType name="subcategory_t">
  <xs:sequence>
    <xs:element name="element" type="xs:string" />
  </xs:sequence>
</xs:complexType>

<xs:element name="category" type="category_t" /> 
```

我认为您可能不需要使用该`ref`属性。这有一个非常具体的用例，并且该`type`属性看起来更接近您想要的。

# javascript - JS 如何处理这个 JSON 数据

> ID：11251345
> 
> 赞同：-1
> 
> 时间：2012-06-28T19:11:27.027
> 
> 标签：javascript, json

我有这样的数据：

```
{
"1":{
    "id":"1",
    "boarding":"",
    "atak":"3",
    "pw":4,
    "zwrotnosc":3,
    "marynarze":130,
    "zolnierze":0},
 "2":{
    "id":"2",
    "boarding":"",
    "atak":"5",
    "pw":4,
    "zwrotnosc":4,
    "marynarze":0,
    "zolnierze":222}
} 
```

我尝试了 for (i in data) 或 for (i = 1; i < data.length; i++) 但这是错误的。

拥有像 php foreach 这样的东西或者像数组 data[1][pw] 这样处理它会很好

编辑：

当我执行 for 循环时，我得到了 194 次迭代，并且 data[i] 保存了数据中的单个字符。

编辑2：

这是我在 json 响应之前的数据：

```
Array
(
[1] => Array
    (
        [id] => 1
        [boarding] => 
        [atak] => 2
        [pw] => 4
        [zwrotnosc] => 4
        [marynarze] => 146
        [zolnierze] => 0
    )

[2] => Array
    (
        [id] => 2
        [boarding] => 
        [atak] => 5
        [pw] => 5
        [zwrotnosc] => 5
        [marynarze] => 0
        [zolnierze] => 250
    )

) 
```

我用

```
echo json_encode($players); 
```

编辑3：

它看起来像这样：http: [//img20.imageshack.us/img20/4798/screenwlz.png](http://img20.imageshack.us/img20/4798/screenwlz.png)

JSON 看起来不错：http: [//img822.imageshack.us/img822/2871/screenmuj.png](http://img822.imageshack.us/img822/2871/screenmuj.png)

编辑：已解决

好的。谢谢

它帮助：

```
data = jQuery.parseJSON( data );

for (i in data){
   // code
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:13:03.297

您可能只是没有意识到 JS`for`对键进行迭代。

```
for(var key in data) {
    var value = data[key];
    // do stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:18:11.017

您需要运行嵌套`for`循环：

```
// var data = <?php echo json_encode($players); ?>;
//            ^                                  ^
//            +----------------------------------+---- no quotes
var data = {
    "1": {
        "id": "1",
        "boarding": "",
        "atak": "3",
        "pw": 4,
        "zwrotnosc": 3,
        "marynarze": 130,
        "zolnierze": 0
    },
    "2": {
        "id": "2",
        "boarding": "",
        "atak": "5",
        "pw": 4,
        "zwrotnosc": 4,
        "marynarze": 0,
        "zolnierze": 222
    }
}
for (var i in data) {
    for (var j in data[i]) {
        console.log("data[" + i + "][" + j + "]", data[i][j]);
    }
} 
```

# php - 关于属性选项 id 的小事情的数据库或 php 代码？

> ID：11251350
> 
> 赞同：3
> 
> 时间：2012-06-28T19:11:51.173
> 
> 标签：php, mysql

用户资料。我有一些只有 2 或 3 个选项的属性。例如，我将表中的性别存储为 tinyint (male=1, female=2)。所以在表中我有 tinyint 但在前端我需要显示字符串。我有大约 4 个属性，只有大约 2 个选项。

所以我有两个选项如何显示选项中的字符串：

创建将存储所有属性选项的额外表。但在这种情况下，每次额外加入时，我都需要为这样一个小东西创建。

或者我可以在 profile_helper.php 中放入此类属性的所有函数。例如

```
function getGender($optionId){
  $gender = $optionId == 1 ? "male" : "female";
  return $gender;
} 
```

说到性能，这么小的东西值得额外加入吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:15:37.570

您可以让您的生活更轻松并[枚举](http://dev.mysql.com/doc/refman/5.5/en/enum.html)所有可能性，如下所示：

```
`gender` ENUM( 'MALE', 'FEMALE') 
```

这样，您实际上将值`'MALE'`或`'FEMALE'`插入到数据库中，当您从数据库中检索值时，您将返回其中一个字符串，并且您可能需要的唯一帮助函数是[`ucfirst()`](http://php.net/ucfirst)or [`strtolower()`](http://php.net/strtolower)。

我只会推荐这种方法用于不太可能改变的事情（其中性别是一个很好的例子）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:19:22.650

我不喜欢属性表。SQL 也没有优化。有些东西应该规范化到另一个表。有些事情不应该。这真的取决于你的结构和你想要做什么。

在性别的情况下，如果您正在构建一个多语言应用程序，无论如何都需要映射到您的语言工具，因此数据库中的函数或常量或 ENUMs 对于任何不太可能改变的数据真的都很好.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:14:34.863

我肯定会走 SQL 路线。未来可扩展性更强。显然，性别不是问题，但取决于其他选项，它可能会为您节省一些时间。所以像：

```
SELECT tblGender.gender FROM tblGender, tblUser WHERE tblUser.genderID = tblGender.genderID AND tblUser.userID = "x" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T19:25:38.963

这得看情况。如果它是性别并且它肯定不会增长 - 我会做一个常量类。

```
class Constants {

    public static $gender = array(0 => 'male', 1 => 'female');

    public static function getGender( $value ) {

        if ( !empty(self::$gender[$value])) {
            return self::$gender[$value];
        }
    }
} 
```

非常有用，如果你想封装并做，即：

```
echo Constants::getGender($user->gender); 
```

但是，如果您想要经常更改的值，请采用 SQL 方式，因为硬编码东西不好，除非它是“类似性别”的问题。

恕我直言，无需为此进行连接，因为性别永远不会超过男性和女性。

干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T19:34:25.153

我会有第二张桌子。它灵活、可扩展、易于更改或添加性别（即未指定）

```
SELECT person.id, gender.name
FROM person
INNER JOIN gender
ON person.genderid = gender.id 
```

它在性能方面仍然非常有效。这似乎很愚蠢，因为现在只有两个值，但这并不意味着您不应该遵循规范化规则。

# python - 爬取网站时如何表现得像登录用户？

> ID：11251355
> 
> 赞同：3
> 
> 时间：2012-06-28T19:12:25.643
> 
> 标签：python, authentication, web-crawler

有一个可以抓取的网站，带有 POST 身份验证。

拥有登录名和密码后，我如何抓取本网站的封闭部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:39:11.033

当然，您可以使用 urllib2 进行 POST 身份验证并进行爬网。`requests`但是，如果您还没有学习 urllib2，那么使用 nice库可能会好得多。

[您可以在http://docs.python-requests.org/en/latest/index.html](http://docs.python-requests.org/en/latest/index.html)找到说明和非常好的教程。

要安装软件包，请执行`pip install requests`. 在 Mac 或其他 Unix 系统上，您需要在命令前加上`sudo`，像这样`sudo pip install requests`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T20:41:00.447

您应该观看*Asheesh Laroia*最近的 PyCon 演讲，标题为“ [*Web 抓取：可靠且高效地提取数据*](http://pyvideo.org/video/609/web-scraping-reliably-and-efficiently-pull-data)”

讲座时间为 2 小时 39 分钟，但涵盖了很多内容，而且节奏很友好。事实上，这是我看过的最好的编程视频之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T19:16:17.507

这个类似的问题可能会有所帮助：[如何使用 Python 登录网页并检索 cookie 以供以后使用？](https://stackoverflow.com/questions/189555/how-to-use-python-to-login-to-a-webpage-and-retrieve-cookies-for-later-usage)还有这个：[Python Site Login](http://www.daniweb.com/software-development/python/code/278635/python-site-login)，最后这个：[Login to website using python](https://stackoverflow.com/questions/8316818/login-to-website-using-python)展示了如何在会话的其余部分登录和使用登录的 cookie，从而让您解析/抓取“关闭”部分。查看[urllib](http://docs.python.org/library/urllib2.html)以获得更多帮助

# mongodb - 大量文档的分片键 (MongoDB)

> ID：11251356
> 
> 赞同：1
> 
> 时间：2012-06-28T19:12:34.567
> 
> 标签：mongodb, sharding

我正在开发一个 Web 应用程序，用户将在其中将大量文档上传到系统，并对文档执行不同类型的操作，包括聚合。然而，每个用户上传的文件数量差异很大——有些可能会上传十几个文件，有些可能会上传一百万个文件。

文件看起来像这样：

```
doc{
    _id: <self generated UUID>,
    uid: <id of user who uploaded the document>,
    ctime: <creation timestamp>,
    ....
        <other attributes, etc>
    ....
} 
```

现在是选择分片键的问题：
1、如果我选择UUID作为分片键，同一个用户上传的文档不太可能最终在同一个分片中，聚合操作会很昂贵。
2.如果我使用uid作为shard key，那么shards中存储的数据就不会是偶数了。

谁能建议实现这一目标的最佳方法？

我对分区和分片非常陌生，我对谷歌以及堆栈溢出的研究没有产生任何结果。如果需要，我可以更改文档的架构，因为项目仍处于设计阶段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:40:25.517

这是我见过的关于选择分片键的最佳指南：[http ://www.kchodorow.com/blog/2011/01/04/how-to-choose-a-shard-key-the-card-game /](http://www.kchodorow.com/blog/2011/01/04/how-to-choose-a-shard-key-the-card-game/)

您必须决定如何查询数据。也许 uid 和 ctime 的组合会产生一个好的分片键，但我不确定这是否会在查询时让您感到悲伤，因为您对计划如何查询没有太多了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:33:54.583

您可以阅读有关 shardkey 选择和缩放的更多信息

1] Kristina Chodrow 的书《Scaling MongoDB》 [http://shop.oreilly.com/product/0636920018308.do](http://shop.oreilly.com/product/0636920018308.do)

2]Antoine Girbal 关于分片最佳实践的演讲 [http://www.10gen.com/presentations/MongoNYC-2012/Sharding-Best-Practices-Advanced](http://www.10gen.com/presentations/MongoNYC-2012/Sharding-Best-Practices-Advanced)

# css - CSS3渐变参考

> ID：11251362
> 
> 赞同：2
> 
> 时间：2012-06-28T19:12:52.287
> 
> 标签：css

我正在尝试找到一个好的、当前的 css3 渐变参考，包括供应商前缀。

我已经使用了许多在线生成器，但它们似乎发出了非常不同的 css 规则。很难说当前和旧版浏览器当前/支持什么。

**编辑**

通过引用，我指的是涵盖该主题的信誉良好、准确的网站。

对不起，伙计们，这可能应该被关闭。

[是否有“官方”/标准 CSS3 渐变语法？](https://stackoverflow.com/questions/2621632/is-there-an-official-standard-css3-gradient-syntax?rq=1)

不知道我怎么没有先找到这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:41:20.980

如果你想要一个 css3 梯度生成器，你可以使用***voithos***解决方案或

*   [http://gradients.glrzad.com/](http://gradients.glrzad.com/)
*   [http://webdesignerwall.com/tutorials/cross-browser-css-gradient](http://webdesignerwall.com/tutorials/cross-browser-css-gradient)

但是，如果您想要“如何使用它”，您可以阅读[mozilla 上的文档](https://developer.mozilla.org/en/CSS/linear-gradient)。

希望对你有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:55:03.297

这是另一个很酷的 CSS3 渐变生成器，它可以让你通过视觉调整来学习。

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

他们还在“关于”部分链接到几个 CSS3 渐变文档的来源。

*   [火狐](https://developer.mozilla.org/en/CSS/-moz-linear-gradient)
*   [Safari 和 Chrome (Webkit)](http://www.webkit.org/blog/1424/css3-gradients/)
*   [IE浏览器](http://msdn.microsoft.com/en-us/library/ms532997%28VS.85,loband%29.aspx)
*   [歌剧](http://www.opera.com/docs/specs/presto28/css/imagevalues/#gradients)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T19:14:33.853

[http://css3please.com/](http://css3please.com/)非常好 - 它允许您以交互方式摆弄 CSS。

# ruby - 只允许破折号和数字的正则表达式？

> ID：11251364
> 
> 赞同：2
> 
> 时间：2012-06-28T19:13:01.647
> 
> 标签：ruby, regex

什么是只允许破折号和数字的正则表达式？

一个很好的例子是在电话号码中使用。例如 555-555-555、12-2314-425。

我不想要这样的条目：`-------------`虽然但`-34--53-343`现在很好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T19:16:55.393

因此，在上述问题中，您至少需要一位数字，否则需要 0-9 或破折号中的任何一个。

```
/^[\d-]*\d[\d-]*$/

%w{555-555-555 12-2314-425 -34--53-343 -------------}.each{|s| puts "#{s} #{s.match(/^[\d-]*\d[\d-]*$/) ? 'does' : 'does not'} match"}

555-555-555 does match
12-2314-425 does match
-34--53-343 does match
------------- does not match 
```

如果您尝试识别电话号码，您可能想要识别数字序列的东西，可选地用单破折号分隔，请尝试以下操作：

```
/^\d+(?:-\d+)*$/ 
```

其中不包括前导或尾随破折号和双破折号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T19:16:34.030

不知道红宝石，但我认为正则表达式是：

```
/^[0-9]([0-9]|-(?!-))+$/ 
```

1.  以数字开头，
2.  后跟一个数字，或前面没有破折号的破折号。可能多次（`555-54-456`有效，`555--54-456`无效）

# javascript - 我们如何在 lift 中使用 net.liftweb.http.js.JsCmds.Script 对象？

> ID：11251367
> 
> 赞同：3
> 
> 时间：2012-06-28T19:13:10.927
> 
> 标签：javascript, templates, scala, rendering, lift

我正在将旧系统从 rails 移植到 lift 中。它有很多我想渲染成 html 页面的硬编码连接的 javascript。

根据[这里的对话](https://groups.google.com/forum/?fromgroups#!topic/liftweb/V4mjRNJWZJ0)，我们可以这样使用 net.liftweb.http.js.JsCmds.Script 对象：

```
Script("""
var x = "Here's my JavaScript & it looks good";
""") 
```

但是，我得到了这个编译器消息：

```
error: type mismatch;
[INFO]  found   : java.lang.String
[INFO]  required: net.liftweb.http.js.JsCmd 
```

正确的使用方法是`net.liftweb.http.js.JsCmds.Script`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:29:55.950

好吧，谈话显然是错误的。

的`apply`方法`net.liftweb.http.js.JsCmds.Script`将 JsCmd 作为参数 - 这是编译器错误的来源。

现在对于这种特定情况，您可以将其修复为以下内容：

```
Script(JsCrVar("x", new Str("Here's my JavaScript & it looks good"))) 
```

（强度为`net.liftweb.http.js.JE.Str`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-11T22:51:19.193

正如唐纳德所说， JsCmds.Script() 方法将 JsCmd 作为参数。因此，您可以使用 JsRaw 编写直接的 JS 语句。

前任。

```
Script(JsRaw("""var x = "Here's my JavaScript & it looks good";""")) 
```

以下是关于此主题的讨论：[https ://groups.google.com/forum/#!topic/liftweb/1roPxxHIFJk/discussion](https://groups.google.com/forum/#!topic/liftweb/1roPxxHIFJk/discussion)

# ruby-on-rails - 搜索 Ruby on Rails 应用程序

> ID：11251370
> 
> 赞同：0
> 
> 时间：2012-06-28T19:13:21.457
> 
> 标签：ruby-on-rails, search, full-text-search, search-engine

我是 Ruby on Rails 3 的初级程序员。我目前想在网站上实现一个简单的 nfull-text 搜索引擎，它将搜索网站本身以查找您输入的任何内容。网站的后端对于安全原因（模型不能直接访问数据库，他们在需要数据库中的某些内容时调用这些编码的 Web 服务）所以我不确定我是否可以在搜索引擎上使用任何插件导轨。我以前也从未尝试过对搜索做任何事情。

有人对我应该如何处理有任何建议吗？或者是否有任何搜索资源对我想要实现的目标有用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:19:59.367

您可以使用 Solr。有一个很好的宝石[太阳黑子](https://github.com/sunspot/sunspot)，可以为 solr 添加一个不错的 dsl。还有另一个全文引擎，ElasticSearch，带有[轮胎宝石](https://github.com/karmi/tire)

# java - 启用 SSL 的主机

> ID：11251373
> 
> 赞同：0
> 
> 时间：2012-06-28T19:13:28.133
> 
> 标签：java, ssl, client, host

问题 - 我想连接到启用 SSL 的服务器主机（具有来自威瑞信的签名证书）。该主机批准/拒绝付款交易。

假设 - 1\. ClientAuth 不是必需的。2\. 我不是在处理 HTTPS

我想编写一个与该主机连接并发送请求和接收响应的 java 客户端。如果我的理解不正确，请更正。

1.  Java 客户端需要使用包 - 'javax.net.ssl.*' 。这个包有 'SSLSocket' 类来与 SSL 主机建立连接。
2.  对于 Java 客户端“密钥库”/客户端证书（由威瑞信签名）不是必需的。仅当启用 clientAuth (TRUE) 时才需要它。
3.  我是否需要在我的客户端代码中提供先验证服务器证书然后传输数据的规定？这一步是强制性的吗？
4.  我是否绕过了一些强制性步骤？

谢谢，拉吉赫巴尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:35:43.733

要创建安全套接字（客户端），您可以使用：

```
//An SSL socket can't be created from scratch. We need a Factory that
//handles the underlying logic that allows create a SSL socket
SocketFactory socketFactory = SSLSocketFactory.getDefault();

//Get the socket from the Factory
SSLSocket  socket = (SSLSocket) socketFactory.createSocket(host, port); 
```

现在，在运行时，当您创建 java 客户端/套接字时，工厂将执行著名的“SSL 握手”并执行一些验证。默认情况下，Java 客户端/套接字将：

*   **检查服务器的证书是否与“主机”相对应**：每个证书都有一个“服务器名称”，并且该证书只能从该服务器下载。因此，如果您从“www.oracle.com”服务器获得“www.google.com”证书，则此验证将失败。
*   **检查证书是否是受信任的**：如果它没有由权威机构签名，或者无法检查权威链，或者它不包含在您的“受信任的证书存储库”中，则此验证将失败。

***重要提示：解释主机名检查的第一个要点是错误的：这不会发生在 SSLSocket 上，而是发生在 HTTPS 客户端上。感谢@EJP 和@Gergely Szilagyi 指出这一点***

**注意：**有一种方法可以解决这些验证问题，例如：

*   要绕过/关闭服务器检查，请阅读这篇[文章](http://www.mkyong.com/webservices/jax-ws/how-to-bypass-certificate-checking-in-a-java-web-service-client/)（不推荐！）
*   要将证书添加到客户端受信任的存储库，请查看此[帖子](http://java.ggarciao.com/2009/12/how-to-create-secure-socket-ssl-in-java.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T21:45:27.873

1.  正确的。
2.  正确的。
3.  不，它会自动发生。您可以添加一个检查证书的握手侦听器，或从 SSLSession 获取对等证书，但没有它也可以继续。
4.  是的。

# c++ - 如何检查类型是否是给定类模板的实例化？

> ID：11251376
> 
> 赞同：17
> 
> 时间：2012-06-28T19:13:41.080
> 
> 标签：c++, templates, template-meta-programming

是否可以检查类型是否是特定模板的实例化？

我有一个类模板，其中一个模板参数必须是特定模板的实例化或其他类型。例如，考虑一个类型列表的这个简单定义：

```
struct null_type;

template <typename Head, typename Tail>
struct typelist
{
    // Tail must be a typelist or null_type

    typedef Head head;
    typedef Tail tail;
}; 
```

现在，我想确保为`Tail`模板参数提供的类型始终是`typelist`or的实例化`null_type`。我可以使用部分特化来仅为这些情况定义模板，如下所示：

```
template <typename Head, typename Tail>
struct typelist; // default, not defined

template <typename Head, typename H, typename T>
struct typelist< Head, typelist<H,T> > // Tail = typelist, ok
{
    typedef Head head;
    typedef typelist<H,T> tail;
};

template <typename Head>
struct typelist< Head, null_type > // Tail = null_type, ok
{
    typedef Head head;
    typedef null_type tail;
}; 
```

但是，我最终会重复代码，这是我想避免的。理想情况下，我需要一个特征来测试一个类型是否是模板的实例化，以便将它与静态断言一起使用`enable_if`或在静态断言中使用：

```
#include <boost/mpl/or.hpp>
#include <type_traits>

struct null_type;

template <typename Head, typename Tail>
struct typelist
{
    static_assert(
        boost::mpl::or_<
            is_instantiation_of< typelist, Tail >,
            std::is_same< Tail, null_type >
        >::value,
        "Tail must be a typelist or null_type" );

    typedef Head head;
    typedef Tail tail;
}; 
```

`is_instantiation_of`标准库或 Boost 中是否已经提供了这样的 trait ( )？可以写一个吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-28T19:16:45.910

我提出了以下解决方案，使用 C++11 可变参数模板和简单的偏特化：

```
#include <type_traits>

template < template <typename...> class Template, typename T >
struct is_instantiation_of : std::false_type {};

template < template <typename...> class Template, typename... Args >
struct is_instantiation_of< Template, Template<Args...> > : std::true_type {}; 
```

它可以通过使用预处理器为不同数量的模板参数生成版本来适应 C++03，但可能有更简单的方法。

# ios - 如何将基于页面的应用程序转换为基于选项卡的应用程序 (iOS)

> ID：11251378
> 
> 赞同：0
> 
> 时间：2012-06-28T19:14:12.033
> 
> 标签：ios, xcode

如果您选择了一种预设的应用程序格式，Xcode 中是否有任何方法可以删除该格式并实现其他内容？（不创建新应用程序。）

目前我有一个基于页面（看起来像一本书）的应用程序，只有一个“页面”，使用标签实现这个应用程序会更有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:18:32.117

在 appdelegate 中创建一个 Tab bar Member IbOutlet。将其添加为窗口上的根视图控制器。

为每个选项卡采用不同的导航控制器。将每个导航栏与预期的 Viewcontroller 连接起来。

这是基于 Viewcontroller 的应用程序的主要优点。

# c# - ASP.NET C# 清除控件中的空值

> ID：11251379
> 
> 赞同：1
> 
> 时间：2012-06-28T19:14:28.747
> 
> 标签：c#, asp.net, forms, controls, .net

我有一个带有各种输入的表单，其中一些使用“标题”属性将提示文本放入输入中。提交表单时，会发送一封电子邮件，其中包含每个输入的值。但是，如果该字段尚未填写，它将使用标题作为值。我可以检查一个空字段并手动删除该值，如下所示：

```
if (a_eventSelect.Attributes["title"] == a_eventSelect.Value)
     {
          a_eventSelect.Value = "";
     } 
```

这样做的问题是，如果表单有许多输入检查每个输入可能会变得不必要的麻烦。我开始制作一个函数来检查每个控件并清除它是否为空。

```
protected void Page_Load(object sender, EventArgs e)
{
     //initialize
     base.Initialize();

     //on reload of page
     if (IsPostBack)
     {
          //clear blank values
          clear(mainform);

          //send email
          SendEmail();

          //display thank you
          thankyou.Visible = true;

          //hide main
          main.Visible = false;
      }
}

public void clear(Control location)
{
     //for each control in location
     foreach (Control c in location.Controls)
     {
          //if the control has child controls
          if (c.HasControls())
          {
               //call function with new location
               clear(c);
          }
          //some code to check value and title
     }
} 
```

我似乎无法弄清楚如何获取每个控件并实际比较它的标题和值，甚至在函数中更改它的值。有没有人知道什么可能会有所帮助？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:16:54.777

迭代主窗体控件，转换为“根”类（我认为 Control 会这样做），然后检查它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:56:25.633

答案基于我注意到的两点

1.  您想清除所有输入控件
2.  代码行 (a_eventSelect.Attributes["title"] == a_eventSelect.Value) 表示您在网络表单中使用 HtmlInputControl

将值设置为空的示例

```
 private void SetControlValueToEmpty()
    {
        IEnumerable<HtmlInputControl> htmlInputControls = form1.Controls.OfType<System.Web.UI.HtmlControls.HtmlInputControl>();
        foreach (var htmlInputControl in htmlInputControls)
        {
            if (htmlInputControl.Attributes["title"] == htmlInputControl.Value)
            {
                htmlInputControl.Value = "";
            }
        }
    } 
```

# list - 使用 scala.util.Random 在 Set vs List 上随机播放的行为

> ID：11251380
> 
> 赞同：11
> 
> 时间：2012-06-28T19:14:30.863
> 
> 标签：list, scala, random, set, shuffle

```
 scala> Random.shuffle((1 to 10).toSet)
 res10: scala.collection.immutable.Set[Int] = Set(5, 10, 1, 6, 9, 2, 7, 3, 8, 4)

 scala> Random.shuffle((1 to 10).toSet)
 res11: scala.collection.immutable.Set[Int] = Set(5, 10, 1, 6, 9, 2, 7, 3, 8, 4)

 scala> Random.shuffle((1 to 10).toSet)
 res12: scala.collection.immutable.Set[Int] = Set(5, 10, 1, 6, 9, 2, 7, 3, 8, 4)

 scala> Random.shuffle((1 to 10).toList)
 res13: List[Int] = List(3, 9, 8, 5, 7, 6, 10, 2, 1, 4)

 scala> Random.shuffle((1 to 10).toList)
 res14: List[Int] = List(5, 10, 2, 9, 4, 7, 8, 6, 1, 3)

 scala> Random.shuffle((1 to 10).toList)
 res15: List[Int] = List(5, 9, 10, 6, 8, 3, 4, 1, 7, 2) 
```

所以 shuffle 可以很好地处理列表，但不能处理集合？不能洗牌吗？为什么 res10 == res11 == res12 ？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-28T19:25:02.690

Scala 的集合不是有序的（就像数学集合一样）。然而，它们是可迭代的——你不能依赖于获取项目的顺序。集合的许多实现将以相同的顺序迭代相同的元素——即，

```
scala> Set(1, 2, 3, 4, 5).toList == Set(5, 4, 3, 2, 1).toList
res0: Boolean = true 
```

这解释了您在这里看到的效果。但是，您永远不应该依赖这一点——可能有一个完美的有效`Set`实现，上面的内容不适用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-09T18:55:35.940

随机是“洗牌”的集合；它只是没有明显的效果，因为集合没有顺序。REPL 碰巧每次都以相同的方式打印打乱的集合：

```
scala> Set(1,2,3,4,5) 
res29: scala.collection.immutable.Set[Int] = Set(5, 1, 2, 3, 4)

scala> Set(5,4,3,2,1)
res30: scala.collection.immutable.Set[Int] = Set(5, 1, 2, 3, 4)

scala> util.Random.shuffle(res30)
res31: scala.collection.immutable.Set[Int] = Set(5, 1, 2, 3, 4) 
```

# css - 你能在一个css选择中多次使用first-child伪选择器吗

> ID：11251386
> 
> 赞同：0
> 
> 时间：2012-06-28T19:14:39.680
> 
> 标签：css, css-selectors

我想在 ul 的第一个 li 中选择第一个 div，有没有更简单的方法呢？...我无法修改 html 并添加一个 id。

感谢您的输入！

```
#subNav>li:first-child>div:first-child 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:17:44.980

是的，这是有效的，您正在选择`#subNav>li`div 元素的每个第一个子元素的每个第一个子元素和其中的每个第一个子元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:18:06.243

你已经拥有的东西和它一样好。我没有看到任何混乱 -毕竟*你**只*想要第一个`div`孩子的第一个`li`孩子......`#subNav`

# javascript - jQuery 是否提供带有背景淡入淡出小部件的叠加层？

> ID：11251390
> 
> 赞同：0
> 
> 时间：2012-06-28T19:15:15.107
> 
> 标签：javascript, jquery, modal-dialog

我正在寻找一个非常常见的元素 - 我想在网页顶部弹出一个模式对话框，并在后台淡出页面，直到对话框被关闭。

这个功能是 jQuery 提供的吗？如果没有，是否有许多人用于此目的的 jQuery 兼容小部件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:16:27.167

jQuery UI 对话框会为你做这件事。

[http://jqueryui.com/demos/dialog/#modal](http://jqueryui.com/demos/dialog/#modal)

# encryption - 在 Windows Azure 错误中保护连接字符串：解密失败

> ID：11251392
> 
> 赞同：3
> 
> 时间：2012-06-28T19:15:23.423
> 
> 标签：encryption, azure

[遵循本教程](http://blogs.msdn.com/b/sqlazure/archive/2010/09/07/10058942.aspx)后，我收到一条解析错误消息。错误说

“无法使用提供程序'CustomProvider'解密。来自提供程序的错误消息：值不能为空。参数名称：keyObject”

任何想法这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:47:02.517

我相信如果您在 Web 服务器中安装的密钥没有适当的访问权限，则会出现此问题。

我相信当您安装密钥时，您必须具有以下命令：

*   aspnet_regiis -px "CustomKeys" "C:\CustomKeys.xml" -pri
*   aspnet_regiis -pi "CustomKeys" "C:\CustomKeys.xml"

我认为上述博客中缺少以下步骤，因为我找不到这些重要步骤。

**授予对 ASP.NET 应用程序标识的访问权限**

```
aspnet_regiis –pa “CustomKeys” “domain\your_service_AccountName” 
```

该命令应提供以下输出：

```
Adding ACL for access to the RSA Key container...Succeeded! 
```

此处定义了以上额外步骤：[使用 RSA 加密 ASP.NET 2.0 中的配置部分](http://msdn.microsoft.com/en-us/library/ff650304.aspx) 您还可以从上面的链接中进行验证，以查看您的步骤中是否缺少某些内容。

# python - 安装模块时没有模块错误

> ID：11251394
> 
> 赞同：1
> 
> 时间：2012-06-28T19:15:25.667
> 
> 标签：python, module, python-2.7, swampy

在过去的几天里，我一直在使用 Think Python 来学习编程。今天我到了第 4 章，它开始谈论需要 Swampy，这是一个用于在本章中教授界面设计的包（正确的术语？）。

所以，谈到我的问题，我被告知输入的第一段代码是

```
from swampy.TurtleWorld import * 
world = TurtleWorld()
bob = Turtle()
wait_for_user() 
```

当我运行它时，我收到以下错误

```
Traceback (most recent call last):
File "/Users/dylanevans/Documents/Code/Python/TurtleWorld.py", line 1, in <module>
from swampy.TurtleWorld import *
ImportError: No module named swampy.TurtleWorld 
```

我已经使用 pip 和 distutils 安装和卸载了 swampy，swampy 在站点包中，当我询问解释器安装了哪些模块时，swampy 出现了。我只是不明白为什么我会收到错误消息。

另外，我的 PYTHONPATH 末尾有“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/swampy”。虽然它确实有两次，但我不知道这是否重要。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T13:59:09.513

打开一个终端并输入`env | grep ^PYTHONPATH`希望你得到这样的东西：

```
PYTHONPATH=/python/path/with/write/access:/another/python/path 
```

选择您具有写入权限的路径之一，这将是`OURPYPKGPATH=/python/path/with/write/access`

如果不存在这样的 PYTHONPATH，我们将在我们的主目录中创建自己的 PYTHONPATH，并确保 python 将来可以看到它：

```
mkdir ~/.ourPyPkgPath
echo 'export PYTHONPATH=$PYTHONPATH:~/.ourPyPkgPath' >> ~/.profile 
```

在这种情况下，我们将使用`OURPYPKGPATH=~/.ourPyPkgPath`

现在安装沼泽

```
easy_install -d $OURPYPKGPATH 'http://pypi.python.org/packages/source/s/swampy/swampy-2.1.1.tar.gz' 
```

现在它应该只是一个`source ~/.profile`或注销并再次登录的情况，以便设置 PYTHONPATH 环境变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T15:12:13.330

> 另外，我的 PYTHONPATH 末尾有“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/swampy”。虽然它确实有两次，但我不知道这是否重要。

你是手动添加的吗？`PYTHONPATH`如果你在非标准位置安装包，你应该修改——换句话说，如果你**不**使用`pip`或者`easy_install`但希望包对 Python 全局可用。

为了消除这样的麻烦，建议使用虚拟 python 环境，您可以使用[`virtualenv`](http://pypi.python.org/pypi/virtualenv/). 安装 virtualenv 后：

```
burhan@lenux:~$ virtualenv --no-site-packages swampy
The --no-site-packages flag is deprecated; it is now the default behavior.
New python executable in swampy/bin/python
Installing distribute.............................................................................................................................................................................................done.
Installing pip...............done.
burhan@lenux:~$ source swampy/bin/activate
(swampy)burhan@lenux:~$ pip install swampy
Downloading/unpacking swampy
  Downloading swampy-2.1.1.tar.gz (46Kb): 46Kb downloaded
  Running setup.py egg_info for package swampy

Installing collected packages: swampy
  Running setup.py install for swampy

Successfully installed swampy
Cleaning up...
(swampy)burhan@lenux:~$ python
Python 2.7.3 (default, Apr 20 2012, 22:44:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from swampy.TurtleWorld import *
>>> quit()
(swampy)burhan@lenux:~$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:20:42.170

您是否安装了沼泽模块？如果没有，请按照[这些说明](http://www.greenteapress.com/thinkpython/swampy/install.html)进行操作。

要运行独立脚本，您可以将代码放在以下块中：

```
if __name__ == '__main__':
    world = TurtleWorld()
    bob = Turtle()
    wait_for_user() 
```

如果直接调用脚本，这会告诉 python 执行代码。因此，如果您将其放在类似的函数中`swampFunction`并从不同的脚本中调用它，则上述块将不会运行。

# c# - 查看用户在 Windows 7 中是否为管理员？

> ID：11251395
> 
> 赞同：0
> 
> 时间：2012-06-28T19:15:36.010
> 
> 标签：c#, windows-7, admin

我想创建一个函数来确定通过参数传递其 ID 的用户是否是管理员。我可以为当前登录的用户执行此操作 -

```
 public static bool IsAuthorizedUser()
    {

        WindowsIdentity identity = WindowsIdentity.GetCurrent(); 
        WindowsPrincipal principal = new WindowsPrincipal(identity); 
        return principal.IsInRole(WindowsBuiltInRole.Administrator); 
    } 
```

但我想检查任何传入的用户。所以签名将更改为

```
public static bool IsAuthorizedUser(string username_to_check) 
```

我怎样才能做到这一点？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:52:25.400

我能够使用 UserPrincipal 让它按照我想要的方式工作。感谢所有的反馈。

```
 public static bool IsAuthorizedUser(string userId) 
 {
     PrincipalContext ctx = new PrincipalContext(ContextType.Machine);
     UserPrincipal usr = UserPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, userId);

     bool result = false;
     if(usr == null)
     {
         Console.WriteLine("usr is null");
     }
     else
     {
         foreach (Principal p in usr.GetAuthorizationGroups())
         {
             if (p.ToString() == "Administrators")
             {
                 result = true;
             }
         }
      }
      return result;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:19:29.283

看来您需要查看 WindowsIdentity 的声明，以查看是否有方法可以从其字符串名称中检索用户身份。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:20:56.663

您可以尝试使用此代码

```
if(principal.Identity.IsAuthenticated)
{
    //Passed
} 
```

# android - 将 Click 事件侦听器添加到 Pushpin

> ID：11251401
> 
> 赞同：5
> 
> 时间：2012-06-28T19:16:18.243
> 
> 标签：android, bing-maps

我在使用`EntityClickedListener`Bing 地图时遇到问题。我按照给出的示例对其进行了编码：

```
map.setEntityClickedListener(new EntityClickedListener()
{
   @Override
   public void onAvailableChecked(String layerName, int entityId)
   {
      HashMap<String, Object> metadata = map.getLayerManager.GetMetadataByID(layerName, entityId);
      Toast.makeText(Activity.this, metadata.toString(), Toast.LENGTH_LONG)
           .show();
   }
}); 
```

但是，单击`Pushpin`没有任何作用。我创建了一条 Toast 消息以准确查看元数据中的内容，但没有任何反应。查看应用程序的路径，我可以看出 Bing 使用数据服务来检索其信息：

```
bsds.FindByAreaCompleted = new Handler(){
     public void handleMessage(Message msg) {
     if(msg.obj != null){
        Record[] records = (Record[])msg.obj;
        EntityLayer el = (EntityLayer)bingMapsView.getLayerManager().getLayerByName(Constants.DataLayers.Search);
        double maxLat = -90, minLat = 90, maxLon = -180, minLon = 180;

        for(Record r : records){
            Pushpin p = new Pushpin(r.Location);
            p.Title = r.DisplayName;
            HashMap<String, Object> metadata = new HashMap<String, Object>();
            metadata.put("record", r);
            el.add(p, metadata);
        }

     bingMapsView.setMapView(new LocationRect(maxLat, maxLon, minLat, minLon));

     el.updateLayer();
     }
}; 
```

我还编辑了 JavaScript 文件以删除一些可能阻止其`Listener`工作的检查：

```
this.ShowInfobox = function(entity){
        window.BingMapsInterlop.entityClicked(entity.layerName, entityId);
    };

var Layer = function(name, map, dataLayer)
{
    this.Name = name;

    var entities = new MM.EntityCollection(),
    _map = map;

    this.AddEntities = function(data)
    {
        if(data != null)
        {
            var i = data.length - 1;
            if (i >= 0)
            {
                do
                {
                    data[i].Entity.entityId = data[i].EntityId;
                    data[i].Entity.layerName = name;

                    // Commented out
                    // if(data[i].title != null && data[i].title != undefined && data[i].title != '')
                    // {
                        data[i].Entity.title = data[i].title;

                        MM.Events.addHandler(data[i].Entity, 'click', function(e)
                        {
                            BingMapsAndroid.ShowInfobox(e.target);
                        });
                    // }
                    entities.push(data[i].Entity);
                }
                while (i--)
            }
        }
    };
    // fluff
}; 
```

我是否正确编辑了 JavaScript 文件？我自己不了解 JavaScript，我一直在关注[本指南](http://bingmapsandroidsdk.codeplex.com/discussions/263960)。`Pushpin`正在添加，我在我的 上看到，`BingMapsView`但该`OnClick`方法没有执行。有什么我想念的吗？

在我看来，必应为`Pushpin`点击事件创建监听器和事件的路径几乎是一个迷宫。必须有一种更简单的方法来做到这一点，我错过了。任何人都可以提供任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T17:54:34.217

I have finally found the answer! Edit the following methods in JavaScript file like so such that the script doesn't check for metadata that doesn't exist.

```
var Layer = function(name, map, dataLayer)
{
    this.Name = name;

    var entities = new MM.EntityCollection(),
    _map = map;

    this.AddEntities = function(data)
    {
        if(data != null)
        {
            var i = data.length - 1;
            if (i >= 0)
            {
                do
                {
                    data[i].Entity.entityId = data[i].EntityId;
                    data[i].Entity.layerName = name;

                    // Commented out
                    // if(data[i].title != null && data[i].title != undefined && data[i].title != '')
                    // {
                        data[i].Entity.title = data[i].title;

                        MM.Events.addHandler(data[i].Entity, 'click', function(e)
                        {
                            BingMapsAndroid.ShowInfobox(e.target);
                        });
                    // }
                    entities.push(data[i].Entity);
                }
                while (i--)
            }
        }
    };
    // fluff
}; 
```

Then, change the `ShowInfoBox` method in the JavaScript file to

```
this.ShowInfobox = function (entity) {
        window.BingMapsInterlop.entityClicked(entity.layerName, entity.entityId);
    }; 
```

This code funnels straight to the click listener you code in your `Activity` instead of messing around with it in the JavaScript. The difference from the JavaScript I edited earlier is that the parameter for the `entityClicked` method should actually be `entity.entityId` not `entityId`.

# c# - 路径和 XAML 控件

> ID：11251416
> 
> 赞同：0
> 
> 时间：2012-06-28T19:17:06.890
> 
> 标签：c#, wpf, xaml

为了在工具箱上显示对象并允许用户将其拖放到画布上，我使用以下控件：

```
<HeaderedItemsControl x:Key="itemABC" 
                Width="100"
                Height="100"
                Canvas.Left="210"
                Canvas.Top="220"
                Margin="0,0,0,0"
                Style="{StaticResource ABC_Style}">

</HeaderedItemsControl> 
```

和

在风格上有定义：

```
<Style x:Key="ABC_Style" TargetType="HeaderedItemsControl">
    <Setter Property="Data" Value="M10.395,0.5 L30.237,0.5 30.237,5.0359993 39.499999,5.0359993 39.499999,22.75 30.237,22.75 30.237,42.660999 39.499999,42.660999 39.499999,60.375 30.237,60.375 30.237,65 10.395,65 10.395,58.124999 0.5,58.124999 0.5,10 10.395,10 z"/>
</Style> 
```

但是，问题是 HeaderdItemsControl 没有 Path 属性（据我所知），所以我想知道我在这里还有什么其他选择。

事实上，我需要在 XAML 中的 HeaderedItemsControl 中显示路径。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T22:03:08.977

这个例子有效：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style TargetType="HeaderedItemsControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type HeaderedItemsControl}">
                        <StackPanel>
                            <Grid>
                                <Rectangle Fill="{TemplateBinding Background}"/>
                                <ContentPresenter ContentSource="Header"/>
                            </Grid>
                            <Grid>
                                <Rectangle Stroke="{TemplateBinding BorderBrush}"/>
                                <ItemsPresenter Margin="2,0,0,0"/>
                            </Grid>
                        </StackPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <PathGeometry x:Key="ABC_Style">
            M10.395,0.5 L30.237,0.5 30.237,5.0359993 39.499999,5.0359993 39.499999,22.75 30.237,22.75 30.237,42.660999 39.499999,42.660999 39.499999,60.375 30.237,60.375 30.237,65 10.395,65 10.395,58.124999 0.5,58.124999 0.5,10 10.395,10 z
        </PathGeometry>
    </Window.Resources>
    <Grid>
        <HeaderedItemsControl>
            <HeaderedItemsControl.Header>
                <Path Stroke="Black" Data="{StaticResource ABC_Style}" />
            </HeaderedItemsControl.Header>
        </HeaderedItemsControl>
    </Grid>
</Window> 
```

由于我以外的原因，默认样式`HeaderedItemsControl`通常实际上并不包含标题。此外，您尝试将标头设置为您拥有的路径数据的方式也不正确，因此我通过将 定义`PathGeometry`为静态资源然后将其包含`Path`为`Header`.

# php - 在php中获取特定的日期格式？

> ID：11251418
> 
> 赞同：1
> 
> 时间：2012-06-28T19:17:30.300
> 
> 标签：php, date, format

我怎样才能得到一个看起来像这种格式的日期？

年-月-日-时-分-秒

2012-06-29-09-06-11

这就是我到目前为止所拥有的。

```
$date = new DateTime;
$time = $date->format('y-m-d-h-m-s'); 
```

上面的结果给出了这个

12-06-29-09-06-11

我在东部时间下午 3:07 运行了这个。

正如你所看到的，它不是我想要的。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:20:54.647

`DateTime`除了使用大写字母来获取`Y`四位数年份和`i`分钟之外，您还需要为构造函数指定时区：

```
$date = new DateTime( "now", new TimeZone( "America/New_York"));
$time = $date->format('Y-m-d-h-i-s'); 
```

[支持的时区列表](http://us3.php.net/manual/en/timezones.php)将允许您选择所需的时区（我相信我为 EST 选择了正确的时区）。

您当前的字符串`m`用于月份和分钟，这是不正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:20:42.470

```
$date = new DateTime;
$time = $date->format('Y-m-d-h-m-s'); 
```

y - 2 位数字

Y - 4 位数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:24:53.730

尝试这个：

```
$date->format('Y-m-d-h-i-s'); 
```

另外不要忘记使用[date_default_timezone_set()](http://www.php.net/manual/en/function.date-default-timezone-set.php)设置您的时区， 例如：

```
date_default_timezone_set('America/Los_Angeles'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T20:27:31.890

您可以使用 DATE 的 PEAR 库并阅读其文档以获得所需的结果。

# asp.net - Sharepoint .aspx 页面

> ID：11251424
> 
> 赞同：0
> 
> 时间：2012-06-28T19:17:53.797
> 
> 标签：asp.net, .net, sharepoint

有人告诉我，如果我不能在一天结束时解决这个问题，我将在本周末放手。我需要帮助来解决这个问题。我正在尝试为共享点站点创建一个 .aspx 页面。这是我的代码...

```
<script  runat="server">
Sub submit(Source As Object, e As EventArgs)
   button1.Text="You clicked me!"
End Sub
</script>

<!DOCTYPE html>
<html>
<body>

<form runat="server">
<asp:Button id="button1" Text="Click me!" runat="server" OnClick="submit" />
</form>

</body>
</html> 
```

每次加载页面时，我都会收到错误消息。我从互联网上撕下了这段代码，当我加载页面时，它说：

```
Server Error in '/' Application.
--------------------------------------------------------------------------------

Parser Error 
Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately. 

Parser Error Message: Code blocks are not allowed in this file.

Source Error: 

Line 3:     button1.Text="You clicked me!"
Line 4:  End Sub
Line 5:  </script>
Line 6:  
Line 7:  <!DOCTYPE html> 
```

请帮我。为什么我会收到此消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T21:05:53.537

默认情况下，SharePoint 不允许在 .aspx 文件中使用内联代码。如果您想这样做，您需要在 web.config 中更改该设置，但不建议这样做。请参阅评论中发布的链接@Mark。

作为替代方案，您可以创建一个 Web 部件，并将其添加到页面中。有关如何执行此操作的更多帮助，请参阅[本文。](http://msdn.microsoft.com/en-us/library/ee231519.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:41:48.667

您可以通过在 web.config 文件中添加以下行来允许在共享点页面中添加代码

```
<PageParserPaths>    
  <PageParserPath VirtualPath="/pages/test.aspx" CompilationMode="Always" AllowServerSideScript="true" />    
</PageParserPaths> 
```

其中“/pages/test.aspx”是您页面的路径，或者您可以将其添加为“/_catalogs/masterpage/*”，例如添加所有母版页文件。

# ios - 后台线程的行为取决于何时调用它

> ID：11251430
> 
> 赞同：0
> 
> 时间：2012-06-28T19:18:27.880
> 
> 标签：ios, multithreading, core-data, uisearchbar, nsfetchedresultscontroller

在 CoreDataTableViewController（由斯坦福大学的人完成的子类）上，我从 sqlite 数据库中获取数据。

在模拟器和设备上提取速度非常快，但为了使其对旧设备友好，我想在后台执行提取并在完成时添加一个微调器。所以我添加了一个预取方法。整个事情看起来像这样：

```
-(void)setupFetchedResultsController{

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:self.entity];

    request.propertiesToFetch=[NSArray arrayWithObject:self.attribute];
    request.resultType=NSDictionaryResultType;
    request.returnsDistinctResults=YES;

    NSPredicate *predicate1 = [NSPredicate predicateWithFormat:@"%K != nil", self.attribute]; 
    NSPredicate *predicate2 = [NSPredicate predicateWithFormat:@"%K != ''", self.attribute];
    NSPredicate *predicate3=  [NSPredicate predicateWithFormat:@"%K contains[cd] %@", self.attribute, self.seachBar.text];

    NSArray *prepredicateArray;

    if ([self.seachBar.text length]) {
         prepredicateArray = [NSArray arrayWithObjects:predicate1, predicate2, predicate3,nil];

    }else {
         prepredicateArray = [NSArray arrayWithObjects:predicate1, predicate2,nil];

    }

    request.predicate=[NSCompoundPredicate andPredicateWithSubpredicates:prepredicateArray];
    request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:self.attribute ascending:YES ]];

    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.managedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];

    [self performFetch];
}

-(void)prefetch{

    UIView *translucentView=[[UIView alloc]initWithFrame:CGRectMake(110, 102, 100, 100)];
    [translucentView setCornerRadius:7.0];
    translucentView.backgroundColor=[UIColor blackColor];
    translucentView.alpha=0.65;

    UIActivityIndicatorView *spinner=[[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    spinner.frame=CGRectMake(0, 31.5, 100, 37);
    [translucentView addSubview:spinner];

    [spinner startAnimating];

    [self.view addSubview:translucentView];

    dispatch_queue_t fetchQueue = dispatch_queue_create("fetch stuff", NULL);

    dispatch_async(fetchQueue, ^{

        [self setupFetchedResultsController];

        dispatch_async(dispatch_get_main_queue(), ^{

            [translucentView removeFromSuperview];

        });

    });

    dispatch_release(fetchQueue);

} 
```

问题是，当我从一切调用该`prefetch`方法时，`viewWillAppear`一切都很好，但是当我从编辑 searchBar 时调用的方法调用它（在 searchBar 上键入时，获取动态显示获取的结果）时，它会给出以下错误：

```
void _WebThreadLockFromAnyThread(bool), 0x6b9b730: Obtaining the web lock from a thread other than the main thread or the web thread. UIKit should not be called from a secondary thread. 
```

我的理解是 UI 的东西应该在主线程上执行，但我看不到错误在哪里。

任何指针？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:31:08.417

我相信这可能是由访问搜索栏的文本引起的。我在我的一个后台线程方法上遇到了类似的警告，我将问题追溯到搜索栏的文本方法。我注意到你也在这样做。

如果是这种情况，警告的一个简单解决方案是在仍在主线程上时获取搜索栏的文本。

它确实解决了我的问题，但我真的很想知道为什么会出现警告。一段时间以来，我一直试图在网络和 Apple 的文档中找到有关此的内容，但还没有运气。

# java - 将 List 实例写入 Excel 文件 - Apache POI

> ID：11251432
> 
> 赞同：1
> 
> 时间：2012-06-28T19:18:39.460
> 
> 标签：java, apache-poi

我有一个用管道分隔`List`的`String`对象。像这样的东西：

```
String1|String2|String3
String4|String5|String6
... 
```

使用 Apache POI 作为 excel 库，是否可以遍历整个 List，将字符串对象写为 excel 文件中的每一行？即类似的东西：

```
for (String inst : <List instance>)
       <sheetInstance>.write(inst) 
```

即直接将字符串作为行条目输出到excel，而不是用字符串设置每个单元格值，即

> ```
> setting row 1, cell 1 = String1
> setting row 1, cell 2 = String2
> setting row 1, cell 3 = String3
> setting row 2, cell 1 = String4 ... 
> ```

目前，看起来我需要为每个值设置单个单元格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T22:13:09.223

您需要将其拆分`String`为一个数组以填充单元格，如下所示：

```
for (short rowIndex = 0; rowIndex < stringList.length(); rowIndex++) {
    Row row = sheet.createRow(rowIndex);
    String[] cellValues = stringList.get(rowIndex).split("|");
    for (int colIndex = 0; colIndex < cellValues.length; colIndex++) {
        Cell cell = row.createCell(colIndex);
        cell.setCellValue(cellValues[colIndex]);
    }
} 
```

# javascript - 将数据附加到所有 Socket.io 客户端发出

> ID：11251435
> 
> 赞同：1
> 
> 时间：2012-06-28T19:18:54.713
> 
> 标签：javascript, socket.io

我在几个共享一些 Socket.io 初始化代码的网站上工作。还共享一个全局变量。如果这个 var 有一个值，我需要在所有套接字发射中发送它。

我还没有找到一种将这个变量附加到所有传出发射的好方法。我希望 Socket.io 有一个方法，只要触发发射（就在发送数据之前）就会调用该方法，允许您根据需要添加到数据中。但是，如果它存在，我找不到它。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:46:32.830

这很难看，但是您可以保存现有的，并编写自己的`emit`函数来执行您想要的操作，然后调用原始的`emit`.

# android - Android SDK 工具 R20，用于 3rd 方库和 Ant 构建的 javadocs

> ID：11251438
> 
> 赞同：2
> 
> 时间：2012-06-28T19:19:07.623
> 
> 标签：android, ant

自昨天发布 SDK API 16 和 SDK 工具 R20 以来，我一直无法使用新工具的组合，无法在 Eclipse 中看到 javadoc 悬停，也无法从命令行进行 Ant 构建。

当 R17 工具发布时，必须将所有 3rd 方 jar 放在新的 libs 目录中。不幸的是，这意味着您无法为其中的 jar 指定 javadocs 的位置。广泛使用的解决方法是将 jar 放在另一个文件夹中，在构建属性中指定并导出它。这对我有用，直到 R20 出现。

在最简单的示例中，我的 build.xml 是新创建的示例项目中的标准版本，除了从属性文件中传入项目名称。（我把罐子放在一个'lib'目录中）

我有一个 ant.properties 格式的文件：

```
projectname=MyProject

jar.libs.dir=lib

build.sysclasspath=last
workspace.dir=/dev/projects/EclipseIndigo/AndroidWorkTwo
outbasebase.dir=/dev/projects/AntBuilds
base.dir=${workspace.dir}/${projectname}

source.dir=${base.dir}/src
outbase.dir=${outbasebase.dir}/${projectname}
ant.project.name=${projectname}
out.dir=${outbase.dir}/bin
layout.dir=${base.dir}/res/layout

key.store=<hidden>
key.alias=<hidden>
key.store.password=<hidden>
key.alias.password=<hidden> 
```

这现在在 Ant 命令行构建（ant 版本）中的编译目标处失败，因为它在 jar 中找不到类。*设置project.all.jars.path*和*tested.project.classpath*的各种组合也不会使其工作。

有人对恢复旧功能有什么建议吗？

[尽管在本期](http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=27490)的评论 21 中有评论，但如果 jar 位于库中，则添加 .properties 文件不会启用 javadocs。（尽管将 jars 放在 libs 中，我的自定义 build.xmls 仍然可以与 Ant 一起使用，所以这很重要！）似乎修复库项目和测试制度的复杂集成被认为很重要，同时破坏了 javadocs 支持等基本功能可以安全地忽略 IDE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T09:00:54.543

我发现唯一有效的是[这里](https://stackoverflow.com/a/12468873/780694)的答案。我将此添加到我的`custom_rules.xml`模板中，它似乎工作正常。我想它只比添加`ant.properties`文件路径多几行，直到我们得到更好的解决方案。

```
<target name="-pre-compile">
    <path id="project.all.jars.path">
    <path path="${toString:project.all.jars.path}"/>
    <fileset dir="${jar.libs.dir}">
        <include name="*.jar"/>
    </fileset>
    </path>
</target> 
```

# php - 如何在php中更改字符串上的单词

> ID：11251439
> 
> 赞同：-2
> 
> 时间：2012-06-28T19:19:09.720
> 
> 标签：php, string

如何在 PHP 中更改长字符串（文本）上的单词？

示例：文本：stackoverflow 站点是最佳站点。

1）我想将第一个“站点”字符串更改为“网站”，但我不想更改第二个“站点​​”。

2）如何在不更改第一个“站点”的情况下更改第二个“站点​​”？

3）我怎样才能改变所有的“网站”？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:33:24.780

## 所有出现

最简单的方法是替换所有出现。只需[`str_replace`](http://www.php.net/manual/en/function.substr-replace.php)在您的字符串上使用

```
$str = 'stackoverflow site is best site';
$str = str_replace('site', 'website', $str); 
```

[**活生生的例子**](http://codepad.viper-7.com/Xq41W7)

## 首次出现

要替换单个实例（如第一个或第二个等），您可以使用[`substr_replace`](http://www.php.net/manual/en/function.substr-replace.php)which 允许您用文本替换某个字符范围。不过，您必须先找到该范围。你可以使用[`strpos`](http://www.php.net/manual/en/function.strpos.php)它。

```
$str = 'stackoverflow site is best site';
$search = 'site';
$start = strpos($str, $search);
$str = substr_replace($str, 'website', $start, strlen($search)); 
```

[**活生生的例子**](http://codepad.viper-7.com/8Lfk9W)

## 任何特定的事件

现在扩展之前的代码以替换第二个或第三个实例，您需要随后调用[`strpos`](http://www.php.net/manual/en/function.strpos.php)并提供之前结果的偏移量。这是一个使用`for`循环的简单方法。

```
$str = 'stackoverflow site is best site';
$search = 'site';
$count = 2;
$start = strpos($str, $search);
for($i = 0; $i < $count - 1; $i++)
    $start = strpos($str, $search, $start + 1);
$str = substr_replace($str, 'website', $start, strlen($search)); 
```

[**活生生的例子**](http://codepad.viper-7.com/eAZTUi)

我正在使用`$count`变量来确定要替换的单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:25:40.127

1）这是您更改第一个“站点”的方式：

```
<?php
$string="stackoverflow site is best site.";
echo "<strong>First:</strong> ".$string;

$string_replace=preg_replace('/site/', 'website', $string, 1);
echo "<br /><strong>After:</strong> ".$string_replace;
?> 
```

2) 以下是更改最后一个“站点”的方法：

```
<?php
$string="stackoverflow site is best site.";
echo "<strong>First:</strong> ".$string;

$pos=strrpos($string, 'site');
$string_replace=substr_replace($string, 'website', $pos, strlen('site'));
echo "<br /><strong>After:</strong> ".$string_replace;
?> 
```

3) 以下是更改所有“站点”的方法：

```
<?php
$string="stackoverflow site is best site.";
echo "<strong>First:</strong> ".$string;

$string_replace=str_replace("site", "website", $string);
echo "<br /><strong>After:</strong> ".$string_replace;
?> 
```

这会将所有“站点”更改为“网站”。

# c# - 使用链接按钮打开文件

> ID：11251446
> 
> 赞同：0
> 
> 时间：2012-06-28T19:19:50.660
> 
> 标签：c#, html, webforms, asplinkbutton

***已编辑*** 有谁知道如何通过标记或以编程方式使用链接按钮在 Intranet 上的共享位置上传/打开文件？

```
 <asp:LinkButton runat="server" ID="btnGetFile" CommandName="GetFile" CommandArgument='<%# Eval("Id") %>' Visible="false" Text='<%# Eval("FormName") %>'></asp:LinkButton> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:26:06.177

您在谈论本地计算机上的文件，对吗？如果根据[此站点](http://forums.asp.net/t/1076148.aspx/2/10)，则无法在 ASP.NET 中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:26:08.807

如果您使用 Web 应用程序工作，则在访问本地文件时会有很多安全限制。如果您正在编写应用程序以在本地使用，您可以通过授予 DefaultAppPool 用户访问相关文件的权限来授予打开本地文件的权限。

另一方面，如果您打算将您的应用程序放到网络上，那么您的选择非常有限。

希望这可以帮助！

# javascript - 在 ruby on rails 上带有 javascript 的组合框

> ID：11251447
> 
> 赞同：0
> 
> 时间：2012-06-28T19:19:55.340
> 
> 标签：javascript, ruby-on-rails, combobox

我正在使用 Ruby on rails。有人知道如何在组合框上插入 javascript 函数吗？我的组合框从我的数据库中获取信息（只有三行），我有这个：

```
<%=select("post", "user_id", @usertype.collect {|p| [p.type_user]},{:include_blank => 'None'}) %> 
```

我想要相当于：

```
select id="post_user_id" name="post[user_id]" onChange="showUsersFromThatType()">
option value="">None</option>
option value="boss">boss</option>
option value="student">student</option>
option value="technicial">technicial</option></select> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:31:44.723

```
<%= select_tag("post", @usertype.collect {|p| [ p.type_user, p.type_user ] }, {:include_blank => 'None'})  %> 
```

`@usertype`是一个集合并且有变量\方法`type_user`

# javascript - 如何找到“最便宜的酒店价格”？

> ID：11251456
> 
> 赞同：-3
> 
> 时间：2012-06-28T19:20:20.843
> 
> 标签：javascript, algorithm

> 酒店管理
> 
> 一家著名的酒店在迈阿密拥有三个分店。即x，y和z（实际上他们给了名字）。每个人都有两种类型的客户。定期和受奖者。此外，每个分支都有自己的评级，x 获得 3 星评级，y 获得 5 星评级，z 获得 4 星评级。
> 
> 每家酒店都有周末和工作日的具体价格。x 平日对普通客户收取 100 美元，周末收取 120 美元，而平日对受奖者收取 90 美元，周末收取 60 美元。同样，y 平日向常客收取 130 美元，周末收取 150 美元。平日为 100 美元，周末为 95 美元。而 z 在工作日对普通客户收取 195 美元，在周末收取 150 美元。平日为 120 美元，周末为 90 美元。现在，当客户要求特定细节时，您需要找到哪家酒店会为客户带来利润。如果酒店之间出现平局，请比较评级并提供结果。
> 
> 输入格式：
> 
> 常规：2010 年 3 月 16 日（周日）、2010 年 3 月 19 日（周三）、2010 年 3 月 21 日（周五）

我已经制作了这段代码......请告诉我我是否朝着正确的方向前进。还有我怎样才能使酒店价格动态

```
getTheday = function(aText,typeofcustomer)
    {

        this.typeofcustomer = typeofcustomer;
        myDays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
        if(new Date(aText).getDay() == 0 || new Date(aText).getDay() == 5 || new Date(aText).getDay() == 6)
        {
            console.log("its weekend!!!");
            this.weekend(this.typeofcustomer);
        }

        console.log("it is ", myDays[new Date(aText).getDay()]);

    }

    getTheday.prototype.weekend = function(typeofcustomer)
    {
        console.log(typeofcustomer);
        this.hoteloptionsforweekend();
    }

    getTheday.prototype.hoteloptionsforweekend = function()
    {

        if(this.typeofcustomer == "rewardee")
        {
            this.hotelpricex_ = 60;
            this.hotelpricey_ = 95;
            this.hotelpricez_ = 90;
            this.minhotelprice = Math.min(this.hotelpricex_, this.hotelpricey_, this.hotelpricez_)

            console.log("min price is of hotel", this.minhotelprice);

        }

        if(this.typeofcustomer == "regular")
        {
            this.hotelpricex_ = 120;
            this.hotelpricey_ = 150;
            this.hotelpricez_ = 150;

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:46:13.313

```
// Put your price listings outside of the constructor
// so that you could fetch them from somewhere else
// later
var hotelPrices = [
        {
            name:    'Hotel X',
            daily:   { regular: 120, rewardee: 60 },
            weekend: { regular: 140, rewardee: 70 }
        },
        {
            name:    'Hotel Y',
            daily:   { regular: 150, rewardee: 95 },
            weekend: { regular: 180, rewardee: 110 }
        },
        {
            name:    'Hotel Z',
            daily:   { regular: 150, rewardee: 90 },
            weekend: { regular: 180, rewardee: 110 }
        }
    ];

// Be consistent and use correct camelCase for naming.
// And, btw, `getTheDay` name is misleading and confusing.
getTheDay = function( aText, typeOfCustomer, prices ) {
    var day = ( new Date( aText ) ).getDay();

    this.typeOfCustomer = typeOfCustomer;
    this.prices = prices;

    // isWeekend is a Boolean, indicating whether the date passed
    // is a weekend. 
    this.isWeekend = day == 0 || day == 5 || day == 6;
};

getTheDay.prototype.getMinimumPrice = function() {
    var prices = [],
        i, len;

    for( i = 0, len = this.prices.length; i < len; i += 1 ) {
        // Taking the appropriate price from the price list
        // and moving it to the new list
        prices.push( this.prices[i][ this.isWeekend ? 'weekend' : 'daily' ][ this.typeOfCustomer ] )
    }

    // A small trick to feed Math.min an array
    // instead of a list of arguments
    return Math.min.apply( Math, prices );
};

// Example usage:
var hotelRates = new getTheDay( aText, typeOfCustomer, hotelPrices );
console.log( hotelRates.getMinimumPrice() ); 
```

现在您的主要任务是创建一个返回最便宜酒店名称的方法。DailyJS 上正在发布一系列适合 JavaScript 初学者的好文章：[JS 101](http://dailyjs.com/tags.html#js101)

# c++ - 奇怪的 C++ 控制台应用程序错误

> ID：11251459
> 
> 赞同：0
> 
> 时间：2012-06-28T19:20:45.607
> 
> 标签：c++

代码看起来像这样

```
#include <cstdlib>
#include <iostream>

using namespace std;
#define n 3;
#define m 4;

int main(int argc, char* argv[])
{
    int arr[n][m];
    bool f=true;
    for (int i=0; i<n; i++)
        for (int j=0; j<m; j++)
            cin>>arr[i][j];
    for (int i=0; i<n; i++)
        for (int j=0; j<m; j++)
            if(arr[i][j]!=a[0][j])
                f=false;
    if(f)
            cout<<"Setirler eynidir.";
    else 
        cout<<"muxtelifdir";
    system("pause");
    return 0;
} 
```

得到一堆错误

![在此处输入图像描述](../Images/3bb33e31bef9fb23905d617ecbf32f25.png)

我看不到任何有问题的代码。有什么建议么？我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T19:22:17.193

`#define`s 不以 s 结尾`;`，因此分号实际上也粘贴在那里，产生

```
int arr[3;][4;]; 
```

这是无效的代码。

永远记住，避免像瘟疫一样的预处理器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T19:22:30.780

由于`#define`是预处理器指令，因此您在数组声明中犯了一些错误。

```
#define n 3;
#define m 4;

int arr[m][n];

// This translates into 
int arr[3;][4;]; 
```

您可以通过删除`;`定义之后的来修复它：

```
#define n 3
#define m 4 
```

甚至更好：

```
static const size_t n = 3;
static const size_t m = 3; 
```

由于上述内容将为您提供您可能使用的其他地方的类型安全性`n`或`m`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T19:22:37.170

```
#define 
```

语句后面没有分号。

**[EDIT1]** 实际上他们可以，但是要小心，因为像这样的预处理器语句会变成严格的文本替换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T19:22:43.167

删除`#define`.

通过或多或少地将内容复制+粘贴到源文件中来扩展定义。因此

```
int arr[n][m]; 
```

扩展为

```
int arr[3;][4;]; 
```

这显然是一个语法错误。你的 for 循环也是如此。

# javascript - 正则表达式：获取 Kleene-star 表达式中每个匹配项的匹配值？

> ID：11251465
> 
> 赞同：2
> 
> 时间：2012-06-28T19:20:58.227
> 
> 标签：javascript, regex

特别是，这可以用 Javascript 实现吗？

```
>> "Version 1.2.3.4".match(/\S+ (\d+)(\.\d+)*/)
["Version 1.2.3.4", "1", ".4"] 
```

很明显，$2 被设置为最后一个 Kleene-“匹配”。是否没有内置方法来检索其余部分（`".2"`，`".3"`）？

如果这不能在 JS 中轻松完成，Perl 可以做到吗？

更新：到目前为止，许多答案都是“解决方法”，因为我的示例很简单。如果我想匹配的重复部分不仅仅是一个数字，它们就不起作用。

但是，确实存在一个非常有效的解决方案：使用`/expr/g`全局正则表达式匹配：只需过滤掉重复的部分并使用它。我发现这与更普遍适用的`*`运算符相比不太灵活，但在大多数情况下它显然可以完成工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T22:40:27.553

JavaScript 中的正则表达式与大多数其他正则表达式风格一样，仅在重复匹配时捕获捕获组的最后一个值。唯一一个众所周知的正则表达式库（据我所知）是 .NET 中的一个，您可以在其中访问所有以前匹配的捕获。

所以不，你不能在 JS 中这样做。

在 Perl 中有几种方法可以完成这些事情。更优雅的一种可能是使用`\G`（它也适用于 PCRE）。

例如：

```
"Version 1.2.3.4" =~ /(?:\S+ |\G(?!^)\.)(\d+)/g 
```

返回（在列表上下文中）：

```
(1, 2, 3, 4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:30:04.237

为什么不匹配整个版本字符串，然后拆分`.`？

```
>> "Version 1.2.3.4".match(/\S+ (\d+(?:\.\d+)*)/)[1].split('.') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:23:37.417

正则表达式`\.?\d+`会返回你所需要的，但你必须为所有匹配运行这个正则表达式，而不仅仅是一个......

```
var n=str.match(/\.?\d+/g); 
```

如果您只想匹配没有前导点的数字，请使用 regex `\d+`。

```
var n=str.match(/\d+/g); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T19:26:46.470

只需捕获整个版本号字符串，然后在句点字符上拆分。

用于匹配整数的正则表达式：`/((?:\d+)(?:\.\d+)*)/`

然后只需调用`split`生成的捕获。

# c# - WCF 数据同步

> ID：11251467
> 
> 赞同：1
> 
> 时间：2012-06-28T19:21:12.043
> 
> 标签：c#, wcf

假设我有一个活期银行账户，当余额不足时，它会自动从我的储蓄账户中转账。所以，我在下面写了 WCF 代码：

```
//Servicer side:

[ServiceContract]
public interface IBankAccount
{
    [OperationContract]
    double withdraw(double amount);

    [OperationContract]
    double enquiry();
}

class BankAccountService:IBankAccount
{
    public double enquiry()
    {
        return balance;
    }
    public double withdraw(double amount)
    {
        while (balance < amount)
        {
            transferMoreMoney();
        }

        deduct(amount);

        return balance;
    }

    public void deduct(double amount)
    {
        System.Threading.Thread.Sleep(10000);
        balance -= amount;
    }

    public void transferMoreMoney()
    {
        System.Threading.Thread.Sleep(10000); 
        balance += maximizeTransferAmount;
    }

    private static double balance;
    private double maximizeTransferAmount = 100.0;
}

//Client side:
    ServiceReference1.BankAccountClient client = new ServiceReference1.BankAccountClient();
        while (true)
        {
            try
            {

                string tmpStr = Console.ReadLine();
                if (tmpStr == "")
                    break;

                double v0 = client.enquiry();
                Console.WriteLine("Current balance is:{0}", v0);

                double v1 = Convert.ToDouble(tmpStr);
                Console.WriteLine("Amount withdrawn is:{0}", v1);

                double v2 = client.withdraw(v1);
                Console.WriteLine("Remaining balance is:{0}", v2);
            }
            catch (CommunicationException e)
            {
                Console.WriteLine(e.Message);
            }
        } 
```

问题是，当我有多个客户调用同一个服务时，余额可能是负数。我怎样才能确保余额将按时补充而不会出现负数？

另外，我还有其他客户端只运行余额查询，所以如果他们只查询，他们不应该一直等待，谁来确保这一点？

这只是一个说明我需要什么的例子。这个例子说明了我需要解决的技术问题，但不是真实案例。我不能使用数据库，因为我的真实案例是需要在内存中进行高性能实时计算的案例，所以数据库不是一个选项。

更基本的是，当多个客户端调用共享相同数据的相同服务时，WCF 服务中是否存在类似于“锁定”的东西？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T04:36:04.637

Actually you must be using ConcurrencyMode.Single, concurentcy mode single will queue all call to service BankAccountService and request will be executed one after other. If you go for ConcurrencyMode.Multiple you yourself have to implement thread lock.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T19:33:38.197

```
you must define behavior specific for your service wcf ( Singleton Instance Mode +  Concurrency Mode Multiple)

    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single,
        ConcurrencyMode = ConcurrencyMode.Multiple)]
    public class BankAccountService: IBankAccount
    {

    }

Note : You can also define your behavior in config file 
```

# c# - Metro MediaCapture MFT 效果说明

> ID：11251470
> 
> 赞同：0
> 
> 时间：2012-06-28T19:21:30.607
> 
> 标签：c#, microsoft-metro, webcam, effect, ms-media-foundation

我正在尝试对要移植到 Metro 的 WPF 应用程序的媒体捕获流应用效果。在 WPF 应用程序中，我使用像素着色器来修改源设置为网络摄像头流的位图，但由于 Metro 的效果已被删除，我正在寻找替代解决方案。

我发现的最好的、最符合 Metro 标准的方法是构建我自己的 MFT 并通过该方法将它们添加到我的`MediaCapture`元素中。`addEffectAsync()`我已经下载了 MFTGrayscale 和 MediaExtension 示例，它们展示了如何将这些效果应用于`MediaCapture`元素，但我在理解实际的 C++ MFT 代码时遇到了问题。有人可以指出或给出一个体面的演练/解释我将如何从头开始构建自己的 MFT 效果吗？我对C/C++了解不多，只够看懂一些示例代码。我在 MFT 的概念和架构方面确实遇到了麻烦，因此对源代码感到非常困惑。

非常感激你的帮助。

编辑：

我会考虑的另一个选择是使用 SharpDX。但是，我在获取`MediaCapture`要在 xaml 图像元素上显示的对象流时遇到问题。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-16T17:27:30.197

你绝对应该看看以下 git repo：[https ://github.com/mmaitre314/VideoEffect](https://github.com/mmaitre314/VideoEffect)

它展示了如何将来自 Lumia Imaging SDK、Win2D 和 DirectX HLSL 像素着色器的图像效果应用到适用于 Windows Phone 8.1 和 Windows 8.1 的 Universal Store Apps 中的视频。

可以通过 MediaTranscoder、MediaComposition、MediaCapture 或 MediaElement 应用效果。并且可以通过 NuGet 获得二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T13:21:40.180

这是完全可行的……我刚刚重写了样本中的一个 MF 转换，以使用诺基亚成像 SDK 并将过滤器实时应用于网络摄像头视频。您可以在下面的链接中看到我是如何做到的（另外下载一些源代码）。这并不完全是您需要做的，但在 wiki 页面中，我解释了您需要从 MS 提供的样板样本中更改的内容。

[http://developer.nokia.com/community/wiki/Template_universal_app_for_video_recording_with_MediaCapture_using_Imaging_SDK_Filters](http://developer.nokia.com/community/wiki/Template_universal_app_for_video_recording_with_MediaCapture_using_Imaging_SDK_Filters)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:00:49.387

我最终在 MSDN 论坛上得到了答案。这不是一个理想的答案，但这是我一直担心的。

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/f3a6934e-df7a-44da-bfd8-7b95d494ff43/#90690f89-e57d-4043-9881-60fcc587f736](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/f3a6934e-df7a-44da-bfd8-7b95d494ff43/#90690f89-e57d-4043-9881-60fcc587f736)

# c# - 引入 viewmodel 会使应用程序崩溃

> ID：11251473
> 
> 赞同：0
> 
> 时间：2012-06-28T19:21:42.397
> 
> 标签：c#, asp.net-mvc-3

我正在尝试自学 C# 和 MVC 3。

我通过创建一个简单的博客应用程序来学习。我被困在博客的详细信息页面。此页面显示帖子并且工作正常 - 即显示帖子和帖子上的评论。但是，我想添加一个表单来添加新评论。

我认为这样做的方法是创建一个包含博客和评论类的视图模型，然后我应该能够创建一个调用评论控制器的创建操作的评论表单。

但是，当我这样做时，博客显示页面不会显示，因为它需要一个“BlogDetailViewModel”类型的模型。我猜这是因为“博客”控制器的“详细信息”操作将“博客”模型传递给视图，而不是“博客详细视图模型”。我该如何纠正这个错误。

这是处理这个问题的最好方法吗。

我正在详细说明以下所有代码：

博客控制器 - 详细信息方法

```
public ViewResult Details(int id)
{

    Blog blog = db.Blogs.Find(id);
    return View(blog);
} 
```

博客.cs

```
 public class Blog
    {
        public int BlogID { get; set; }
        public string Title { get; set; }
        public string Writer { get; set; }

        [DataType(DataType.MultilineText)]
        public string Excerpt { get; set; }

        [DataType(DataType.MultilineText)]
        public string Content { get; set; }

        [DataType(DataType.Date)]
        public DateTime PublishDate { get; set; }

        public virtual ICollection<Comment> Comments { get; set; }
    } 
```

评论.cs

```
 public class Comment
    {
        public int CommentID { get; set; }
        public string Name { get; set; }

        [DataType(DataType.EmailAddress)]
        public string Email { get; set; }

        [DataType(DataType.MultilineText)]
        public string CommentBody { get; set; }

        public int BlogID { get; set; } 
        public virtual Blog Blog { get; set; }
    } 
```

BlogDetailViewModel.cs

```
public BlogDetailViewModel
{
    public Blog Blog{ get; set; }
    public Comment comment{ get; set; }
} 
```

博客详情视图

```
@model NPLHBlog.ViewModels.BlogDetailViewModel

@{
    ViewBag.Title = @Model.Blog.Title;
} 
```

……

我试图从博客详细信息视图中评论所有内容并保留标题。然而，即使这样也行不通。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:23:48.140

您的视图将强类型模型设置为 ViewModel 类，但您从操作中仅返回一个 Blog 对象。要修复错误，请执行以下任一操作：

*   创建一个接受 Blog 对象的新视图。
*   修改您的视图以接受 Blog 对象。
*   修改您的操作以实例化 ViewModel 对象并设置该对象（博客、评论）上的变量以将其传递给视图。

所有这些都是简单的选择，所以这取决于你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:27:20.080

传递给`View()`控制器​​的类型必须与`@model`视图中的类型匹配。

```
public ViewResult Details(int id)
{
    Blog blog = db.Blogs.Find(id);
    BlogDetailViewModel viewModel = new BlogDetailViewModel {Blog = blog, Comment = ""};
    return View(viewModel);
} 
```

# java - Apache Tomcat 自定义 JNDI

> ID：11251475
> 
> 赞同：1
> 
> 时间：2012-06-28T19:21:48.540
> 
> 标签：java, tomcat, amazon, jndi, amazon-elastic-beanstalk

一个简短的问题：如何替换 Tomcat 中默认的只读 JNDI 实现？

我正在开发一个使用 JNDI 数据源（连接池）连接到各种 DBMS 的 Web 应用程序。我需要能够将此应用程序部署到 Amazon Elastic Beanstalk 以实现可扩展性。Amazon Elastic Beanstalk 目前不支持使用 JNDI 数据源，但按照 Amazon 的建议直接通过 JDBC 驱动程序（没有连接池）访问数据库从性能和架构的角度来看并没有吸引力。但是，可以使用经过修改的 Tomcat 创建自定义 AMI，该 Tomcat 使用 JNDI 数据源。我的应用程序的另一个要求是数据源可以动态创建，并且数据源定义存储在一个集中位置，以便参与 Elastic Beanstalk 集群的所有机器都可以访问它们。

我创建了一个自定义读/写 JNDI 实现，它将数据源定义存储在 S3 中，并将数据源实例（连接池）缓存在内存中。要替换 Tomcat 的默认只读 JNDI 实现，我必须使用以下键启动 Tomcat：`-Dcatalina.useNaming=false -Djava.naming.factory.initial=com.company.product.AwsContextFactory -Djava.naming.factory.url.pkgs=com.company.product.awsjndi`. 这`com.company.product.AwsContextFactory`是我的上下文工厂`com.company.product.awsjndi`的名称，并且是包含`AwsContextFactory`. 但是，要使这项工作在`AwsContextFactory.getInitialContext`我必须`java.naming.factory.url.pkgs`从环境中显式删除预先存在的引用并添加对我的包的引用，如下所示：

```
public Context getInitialContext(Hashtable environment) throws NamingException {
    environment.remove("java.naming.factory.url.pkgs");
    environment.put("java.naming.factory.url.pkgs", "com.company.product.awsjndi");
    AwsContext context = new AwsContext((Hashtable) environment, null);
    return context;
} 
```

如果不这样做，Tomcat 的默认只读 JNDI 将占上风，并且不使用我的 AwsContextFactory。据我了解，这是一种黑客行为，没有必要这样做。指定 JVM`-Djava.naming.factory.url.pkgs=com.company.product.awsjndi`应该是我需要做的所有事情。这是Tomcat中的错误还是我做错了什么？

感谢您的建议。

P。

# c - Xcode 4.3.3 上的预期标识符或“(”

> ID：11251476
> 
> 赞同：0
> 
> 时间：2012-06-28T19:21:52.107
> 
> 标签：c, xcode, macos, object

在“int RandomA，RandomB”这一行上，我不断收到错误消息。错误表示预期标识符或“（”。结构卡和卡名称之间也会弹出相同的错误。我不知道如何解决它。这是我第一次在这个网站上提问。我'm 使用 mac osx 应用程序命令行工具。

main.c 文件

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

struct card {
    char* name;
    char* suit;
    int value;
};

void shuffle(struct card* deck){
    // Seed the random number generator
    srandom(time (NULL ) );
    int i = 0;
    int randomA, randomB;
    struct card tempCard;

    do {
        // Generate 2 random numbers to determine which cards to swap
        randomA = random() % 52;
        randomB = random() % 52;

        // Swap slots A and B
        tempCard = deck[randomA];
        deck[randomA] = deck[randomB];
        deck[randomB] = tempCard;

        // Increment the counter
        ++i;
    }
    while (i<1000000);

}

void printDeck(struct card* deck){
    // Print out the shuffled deck
    int i=0;
    while (i<52) {
        if (deck[i].value == 1) {
            printf("The ace of %s is great!\n", deck[i].suit);
        }
        else {
            switch (deck[i].value){
                case 11:
                    printf("A Jack of all trades (%s)\n",deck[i].suit);
                    break;
                case 12:
                    printf("A Queen of the castle (%s)\n",deck[i].suit);
                    break;
                case 13:
                    printf("The King of the world (%s)\n",deck[i].suit);
                    break;
                default:
                    printf("The card is %s of %s\n", deck[i].name,deck[i].suit);
                    break;
            }

        }

        i++;

    }
}

        int main(int argc, const char * argv[]);
{

    struct card deck[] =

    {

    {"ace", "spades", 1}, {"two", "spades", 2}, {"three", "spades", 3},
    {"four", "spades", 4}, {"five", "spades", 5}, {"six", "spades", 6},
    {"seven", "spades", 7}, {"eight", "spades", 8}, {"nine", "spades", 9},
    {"ten", "spades", 10}, {"jack", "spades", 11}, {"queen", "spades", 12},
    {"king", "spades", 13},
    {"ace", "clubs", 1}, {"two", "clubs", 2}, {"three", "clubs", 3},
    {"four", "clubs", 4}, {"five", "clubs", 5}, {"six", "clubs", 6},
    {"seven", "clubs", 7}, {"eight", "clubs", 8}, {"nine", "clubs", 9},
    {"ten", "clubs", 10}, {"jack", "clubs", 11}, {"queen", "clubs", 12},
    {"king", "clubs", 13},
    {"ace", "hearts", 1}, {"two", "hearts", 2}, {"three", "hearts", 3},
    {"four", "hearts", 4}, {"five", "hearts", 5}, {"six", "hearts", 6},
    {"five", "hearts", 7}, {"eight", "hearts", 8}, {"nine", "hearts", 9},
    {"ten", "hearts", 10}, {"jack", "hearts", 11}, {"queen", "hearts", 12},
    {"king", "hearts", 13},
    {"ace", "diamonds", 1}, {"two", "diamonds", 2}, {"three", "diamonds", 3},
    {"four", "diamonds", 4}, {"five", "diamonds", 5}, {"six", "diamonds", 6},
    {"seven", "diamonds", 7}, {"eight", "diamonds", 8}, 
    {"nine", "diamonds", 9}, {"ten", "diamonds", 10}, {"jack", "diamonds", 11}, 
        {"queen", "diamonds", 12},{"king", "diamonds", 13}};

// Run the function to shuffle the deck
        shuffle(deck);

        // Print the deck
        printDeck(deck);

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T19:24:33.773

也许是这样：

```
int main(int argc, const char * argv[])  /* -------> */ ; /* <------- */ 
```

紧随其后的是`{`，它在上下文之外打开了一个范围......

# c# - C# 中的 XML 默认命名空间和 XSLT 转换问题

> ID：11251479
> 
> 赞同：0
> 
> 时间：2012-06-28T19:22:08.817
> 
> 标签：c#, xml, xslt, transformation, xml-namespaces

在这篇文章的 PS 中，您可以找到一个 C# 代码片段，它使用 XSLT 转换 + RegEx 匹配从 XML 文档中获取货币汇率值。请阅读我的问题内联引用

//+

...

//-

注释行组。

谢谢你。

PS代码：

```
 string currencyCode = "RUB";
var xml = new StringReader( 
    @"<gesmes:Envelope 
        xmlns:gesmes='http://www.gesmes.org/xml/2002-08-01' 
        xmlns{{EmptyNameSpace}} ='http://www.ecb.int/vocabulary/2002-08-01/eurofxref'>
        <gesmes:subject>Reference rates</gesmes:subject>
        <gesmes:Sender>
        <gesmes:name>European Central Bank</gesmes:name>
    </gesmes:Sender>
    <Cube>
        <Cube time='2012-06-27'>
        <Cube currency='USD' rate='1.2478' />
        <Cube currency='RUB' rate='41.1252' />
        <Cube currency='ZAR' rate='10.4601' />
        </Cube>
    </Cube>
    </gesmes:Envelope>"
            .Replace("{{EmptyNameSpace}}", ":ns1")
            //+
            // I'd like to get this code working the same way as it does now
            // producing
            //
            // Result: EUR/RUB => 41.1252
            //
            // output but when the above code line will be commented
            // and the below code line uncommented
            //-
            //.Replace("{{EmptyNameSpace}}", "") 
);

var xslt = new XmlTextReader(new StringReader(
@"<xsl:stylesheet version='2.0' 
    xmlns:xsl='http://www.w3.org/1999/XSL/Transform'
    xmlns:gesmes='http://www.gesmes.org/xml/2002-08-01' 
    xmlns:ns1 ='http://www.ecb.int/vocabulary/2002-08-01/eurofxref'
    >

<xsl:variable name='x1' select='gesmes:Envelope/Cube/Cube/Cube[@currency=""{0}""]' />
<xsl:template match='gesmes:Envelope'>
  [<xsl:apply-templates select='$x1' />]
</xsl:template>
<xsl:template match='Cube'>
    <xsl:value-of select='@rate' />
</xsl:template>
</xsl:stylesheet>".Replace("{0}", currencyCode)  

));

var xDoc = new XPathDocument(xml);
var xTr = new System.Xml.Xsl.XslCompiledTransform(); 
xTr.Load(xslt) ;

StringBuilder sb = new StringBuilder(); 
StringWriter writer = new StringWriter(sb); 
xTr.Transform(xDoc, null, writer);

string pattern = @"\[(?'name'[0-9]*\.[0-9]*)\]";

System.Console.WriteLine(
    "Result: EUR/{0} => {1}",
    currencyCode, 
    Regex.Match(sb.ToString(), pattern)
   .Groups["name"].Value);    

// Result: EUR/RUB => 41.1252 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:39:44.450

据我查看该代码可以看出，您的问题是处理 XPath 中的默认命名空间：

*   只要`{{EmptyNameSpace}}`是`:ns1`，一切都很好 - 在您的 Xml 文档中，命名空间`http://www.gesmes.org/xml/2002-08-01`和`http://www.ecb.int/vocabulary/2002-08-01/eurofxref`带有前缀`gesmes`和`ns1`被定义；您的 Xml 文档使用诸如`<gesmes:Envelope>`from`gesmes`和其他标识符，即`<Cube>`不与任何命名空间相关联的标识符。在 XSLT 代码中，您正在使用 XPath 表达式，例如 (here shorted) `gesmes:Envelope/Cube/Cube/Cube`，这很好，因为该表达式引用了`<Envelope>`使用前缀声明的命名空间中的元素`gesmes`，以及`<Cube>`没有命名空间的元素。
*   一旦设置`{{EmptyNameSpace}}`为空字符串，情况就会发生变化：现在，`http://www.ecb.int/vocabulary/2002-08-01/eurofxref`是文档的默认命名空间。因此，`<Cube>`文档中的元素被认为属于该命名空间。但是，您的 XPath 表达式仍然认为`<Cube>`出现在 XPath 中的元素没有命名空间——它们没有任何命名空间前缀，并且 XPath 不知道默认命名空间。

作为一种解决方案，您应该在 XPath 表达式中添加命名空间前缀 - 如果`<Cube>`元素属于`http://www.ecb.int/vocabulary/2002-08-01/eurofxref`命名空间，您的 XPath 应该如下所示：

```
gesmes:Envelope/ns1:Cube/ns1:Cube/ns1:Cube 
```

（当然，您的 XSLT 中的其他 XPath 表达式必须相应地进行调整。）

如果您需要对此进行任何进一步的解释，或者我的假设是否走错了路，请告诉我。

**更新：**如果 Xml 文档具有默认命名空间，XSLT 应该如下所示：

```
<xsl:stylesheet version="2.0" xmlns:xsl='http://www.w3.org/1999/XSL/Transform' xmlns:gesmes='http://www.gesmes.org/xml/2002-08-01' xmlns:ns1='http://www.ecb.int/vocabulary/2002-08-01/eurofxref'>

    <xsl:variable name='x1' select='gesmes:Envelope/ns1:Cube/ns1:Cube/ns1:Cube[@currency="RUB"]'/>

    <xsl:template match='gesmes:Envelope'>
        [<xsl:apply-templates select='$x1'/>]
    </xsl:template>

    <xsl:template match='ns1:Cube'>
        <xsl:value-of select='@rate'/>
    </xsl:template>

</xsl:stylesheet> 
```

# git - 如何在 Ticgit 中使用里程碑？

> ID：11251480
> 
> 赞同：0
> 
> 时间：2012-06-28T19:22:12.787
> 
> 标签：git

**谜题 1：我在哪里可以看到里程碑？**

```
$ ti milestone Couchdb -n "instructions for backbone" -a "Read https://github.com/jeffWelling/ticgit and http://backbone.iriscouch.com/backbone-couchapp/_design/backbone_example/index.html
$ ti milestone
$ I cannot understand why here nothing?! 
```

**难题 2：我应该编辑哪个分支来编辑工单、里程碑等？**

```
$ git branch
* master
  ticgit 
```

**谜题 3：为什么谜题 1 命令不起作用？看什么都没有？！**

```
$ ti list

   TicId  Title                    State Date  Assgn    Tags                
--------------------------------------------------------------------- 
```

**也许相关**

1.  [票证的版本控制？](https://stackoverflow.com/questions/11218069/version-control-for-tickets)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:13:22.033

我是 TicGit-ng 当前的活跃维护者，大概是您正在使用的（与 TicGit 不同，现在未维护的版本）。

1）由于某种原因，老开发人员编写了该命令的文档甚至“--help”输出`milestone`，但从未真正实现过该命令。:( 这是一个非常明显的错误，[因此已经提交了](https://github.com/jeffWelling/ticgit/issues/45)TicGit-ng 的 Github 问题页面，我将尽快解决。

2）除非出于某种原因需要进行手动修复，否则您永远不必检查`ticgit`（或）分支。`ticgit-ng`例如，要向您当前已签出的票证添加评论，如果您当前在 master 分支上，则留在该分支上，并使用 command `ti comment`。它将打开在您键入所需评论的位置[定义的编辑器，然后关闭编辑器。](http://kb.eukhost.com/changing-the-default-text-editor-in-linux/) `EDITOR`然后要查看带有新评论的票证，请使用命令`ti show`，它将向您显示当前已签出的票证。

3）3因为1没用。不知道为什么最初是这样写的，但我会尽快实现该功能。

4) 在 2 中，我提到了“当前已签出”票证的想法，为了在 TicGit-ng 中对票证进行评论或以其他方式操作，通常的做法是签出该票证。这不是必需的，因为可以通过将要操作的票据指定为参数来使用某些命令。要判断您当前是否有一张票已签出或判断哪个票当前已签出，请使用命令`ti list`，并`*`在最左侧的列中查找该票 -`*`表示您已签出的票。要结帐不同的票，您可以执行`ti checkout 2`这将签出从顶部倒数第二个的票，或者您可以执行（例如）`ti checkout e17222`这将检查 ID 为“e17222”的票。票证 ID 由票证的一部分的哈希确定，并且是不可变的。工单 ID 是 的输出中左起第二列`ti list`。

因为 StackOverflow 不是提交错误的地方，所以我不得不要求我们继续讨论与错误本身相关的问题，并在上​​面链接到的 Github 问题上进行讨论。如果您需要有关 TicGit-ng 的更多帮助，请随时通过 Github 或电子邮件与我联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:00:55.497

它们尚未实现，并且缺少文档——arg。[此处](https://github.com/jeffWelling/ticgit/issues/45)报告的错误：

> 似乎有很多这些未完成的小存根，其中原始作者记录了他/她实际上尚未编写的行为，或者相反没有完整记录该行为。正如我在另一个问题上所提到的，目前我在处理其他现实世界的问题时时间紧迫，但我打算尽快纠正这些问题。

5 个月大，arg...ticgit 还没有准备好成熟使用？

# asp.net - 使用 REST 服务 pb

> ID：11251489
> 
> 赞同：1
> 
> 时间：2012-06-28T19:23:17.817
> 
> 标签：asp.net, web-services, api, rest

我在使用 REST 服务时遇到了一些问题，想弄清楚我在实现中缺少什么。

```
https://<server-name-or-address>/api/sessions 
```

如果我使用 cURL 调用这个 rest api，它可以通过以下脚本正常工作

```
curl -i -k -H "Accept:application/*+xml;version=1.5" -u username:password -X POST https://<server-name-or-address>/api/sessions 
```

但是，它根本不适用于 C# asp.net。我不确定我在这里缺少什么。这是我的尝试：

1) 使用 HTTP Web 请求

```
Uri address = new Uri(url);
HttpWebRequest request = WebRequest.Create(address) as HttpWebRequest;
request.Method = "POST";
request.Accept = "application/*+xml;version=1.5";

request.Credentials = new NetworkCredential(username,password);

HttpWebResponse response = request.GetResponse() as HttpWebResponse; 
```

// 调用上述语句时引发以下异常底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。

2) 使用 Hammock.net

```
Hammock.RestClient client = new Hammock.RestClient();
string encodedAPIKey = Convert.ToBase64String(Encoding.UTF8.GetBytes(string.Format("{0}:{1}", username, password)));
client.AddHeader("Accept", "application/*+xml;version=1.5");
client.AddHeader("Authorization", "Basic " + username + ":" + password);
client.Authority = url;
Hammock.RestRequest req = new Hammock.RestRequest();
req.Path = url;
Hammock.RestResponse response = client.Request(req);
string _result = client.Request(req).Content; // exception 
```

3) 使用 RestSharp

```
string _loginInfo = Convert.ToBase64String(Encoding.UTF8.GetBytes(string.Format("{0}:{1}", username, password)));
RestSharp.RestClient client = new RestSharp.RestClient();
client.AddDefaultHeader("Accept", "application/*+xml;version=1.5");
client.AddDefaultHeader("Authorization", "Basic " + _loginInfo);
client.BaseUrl = url;
RestSharp.RestRequest request = new RestSharp.RestRequest();
request.AddUrlSegment("method", "POST");
request.AddUrlSegment("uri", url);
string result = client.Execute(request).Content; 
```

我也尝试过使用 HttpClient、WebRequest、WebClient，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:14:57.400

尝试在 HTTP 请求中手动设置 Authorization 标头。

```
string credentials = String.Format("{0}:{1}", username, password);
byte[] bytes = Encoding.ASCII.GetBytes(credentials);
string base64 = Convert.ToBase64String(bytes);
string authorization = String.Concat("Basic ", base64);
request.Headers.Add("Authorization", authorization); 
```

编辑：

看起来好像可能是由于自签名、过期或其他无效证书。尝试以下

```
ServicePointManager.ServerCertificateValidationCallback = delegate { return true; }; 
```

从这个 SO 收集：[https ://stackoverflow.com/questions/5595049/servicepointmanager-servercertificatevalidationcallback-question](https://stackoverflow.com/questions/5595049/servicepointmanager-servercertificatevalidationcallback-question)

# php - 如何让symfony中的复选框为空？

> ID：11251490
> 
> 赞同：13
> 
> 时间：2012-06-28T19:23:27.630
> 
> 标签：php, symfony

我在我的应用程序的实体中定义了以下变量。我有这个，以及可以通过表单界面更新的其他字段，我希望能够在该表单上选中和取消选中此框。

我可以选中该框并提交表单，但是当我取消选中该框时，我似乎无法提交表单。它给了我一个`Please check this box if you want to proceed`.

```
/**
 * @var boolean $updatesNeeded
 *
 * @ORM\Column(name="updates_needed", type="boolean", nullable=false)
 */
private $updatesNeeded; 
```

我尝试更改`nullable=false`和`nullable=true`更新架构，但它似乎不起作用。任何想法将不胜感激。

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class BlahType extends AbstractType
{
    /**
     * @param \Symfony\Component\Form\FormBuilder $builder
     * @param array                               $options
     */
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('stuff')
            ->add('updatesNeeded', 'choice', array('required' => false))
            ->add('anothervar');
    }
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-28T19:32:32.130

此错误是因为输入标记有 HTML5 属性`required="required"`。`required`在您的表单类型中，您可以通过在此复选框上将选项设置为 false 来禁用此功能。

```
$builder->add('updatesNeeded', 'choice', array('required' => false)); 
```

[http://symfony.com/doc/current/book/forms.html#book-forms-html5-validation-disable](http://symfony.com/doc/current/book/forms.html#book-forms-html5-validation-disable)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T19:29:47.650

只是使用呢`nullable=""`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-29T16:17:06.043

好吧，看来我使用了错误版本的网站。提到的所有方法都有效，我只想在下面总结它们，以供将来遇到此类问题的任何人使用。

这里的问题是 HTML5 喜欢自己验证表单并将 a 添加`required="required"`到任何表单输入。通常，这可能是一件有用的事情，但对于复选框之类的东西，您希望选择不选中它们并提交表单，而浏览器不会在客户端抱怨。

有几种方法可以解决这个问题，有些方法比其他方法更好。

第一种是简单地禁用所有使用 HTML5 的表单验证，正如官方[symfony 文档](http://symfony.com/doc/current/book/forms.html#book-forms-html5-validation-disable)所述。

另一种是在注释中为实体变量添加信息，使`nullable=true`. 这允许数据库中的相应列具有空值，这可能会或可能不适合您的情况。这如下所示。

```
/**
 * @var boolean $varName
 *
 * @ORM\Column(name="var_name", type="boolean", nullable=true)
 */
private $varName; 
```

最后，在构建表单时，您可以使用某些选项在表单中进行验证。[文档](http://symfony.com/doc/current/book/forms.html#form-validation)详细说明并提供了更多示例，但出于我们的目的，重要的部分是您可以设置`'required' => false`，如下所示。

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class BlahType extends AbstractType
{
    /**
     * @param \Symfony\Component\Form\FormBuilder $builder
     * @param array                               $options
     */
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('stuff')
            ->add('checkbox_var', 'checkbox', array('required' => false))
            ->add('anothervar');
    }
} 
```

感谢所有帮助我解决这个问题的人。我希望这对将来必须处理此类问题的人有所帮助。

# haskell - 如何在 Haskell 中为 b->a 创建 Show 实例？

> ID：11251500
> 
> 赞同：2
> 
> 时间：2012-06-28T19:24:10.447
> 
> 标签：haskell

我正在尝试构建一个本质上是二叉树的数据类型：每个节点的左分支是一个函数，可以作用于每个节点右分支中的变量。我是 Haskell 的新手，我不确定我是否以正确的方式进行此操作，但我目前的问题是我无法弄清楚如何将我的类型添加到 Show 类型类中。这是我的尝试：

```
{-# LANGUAGE ExistentialQuantification #-}
-- file: TS.hs                                                                                                                                                       

data TypeSentence a = forall b. Apply (TypeSentence (b->a)) (TypeSentence b)
                    | Expr a

instance (Show a) => (Show (TypeSentence a)) where
        show (Expr x) = show x
        show (Apply x y) = (show x) ++ " " ++ (show y)

instance (Show (TypeSentence b->a)) where
    show (Expr x) = show "hello"

x = Expr 1
f = Expr (+1)
s = Apply f x 
```

但是，当我将其加载到 ghci 中时，出现以下错误：

```
TS.hs:9:24:                                                                                                                                                          
     Could not deduce (Show (b -> a)) from the context ()                                                                                                             
     arising from a use of `show' at TS.hs:9:24-29                                                                                                                  
      Possible fix:                                                                                                                                                    
      add (Show (b -> a)) to the context of the constructor `Apply'                                                                                                  
      or add an instance declaration for (Show (b -> a))                                                                                                             
        In the first argument of `(++)', namely `(show x)'                                                                                                               
        In the expression: (show x) ++ " " ++ (show y)                                                                                                                   
        In the definition of `show':                                                                                                                                     
           show (Apply x y) = (show x) ++ " " ++ (show y)                                                                                                               
 Failed, modules loaded: none. 
```

关于如何添加 Show (b->a) 声明的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T20:59:33.780

您编写的代码存在一些问题，因此我将一一解决。

1.  您不能为`Show (a -> b)`. 考虑一下你必须如何编写它：

    ```
    instance Show (a -> b) where
      show f = error "What goes here?" 
    ```

    既然`f`是一个函数，除了将它应用到一个值之外，你无能为力；并且由于`a`是完全多态的类型，因此您无法创建`a`要应用的类型值`f`。所以你唯一的选择是

    ```
    instance Show (a -> b) where
      show _ = "<function>" 
    ```

    正如 Daniel Fischer 在评论中所说，这在[Text.Show.Functions](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Text-Show-Functions.html)模块中可用。不过，我实际上不会为此烦恼；我只想写一些类似的东西

    ```
    instance Show a => Show (TypeSentence a) where
      show (Apply _ x) = "Apply _ " ++ show x -- This still won't work; see below
      show (Expr x)    = "Expr " ++ show x 
    ```

    由于`show`只能为任何函数返回一个字符串，因此直接内联即可。

2.  尽管如此，您*仍然*无法编写该`Show`实例。如果您尝试编译上面的实例，则会收到以下错误：

    ```
    TS.hs:8:36:
        Could not deduce (Show b) arising from a use of `show'
        from the context (Show a)
          bound by the instance declaration
          at TS.hs:7:10-40
        Possible fix:
          add (Show b) to the context of
            the data constructor `Apply'
            or the instance declaration
        In the second argument of `(++)', namely `show x'
        In the expression: "Apply _ " ++ show x
        In an equation for `show': show (Apply _ x) = "Apply _ " ++ show x 
    ```

    问题是，在您的定义中`TypeSentence`，隐藏了一个由任意存在隐藏类型参数化的变量（与的定义中的`Apply`绑定）。但是不能保证它是可显示的，所以不会类型检查，这是上面产生的错误：没有实例 for ，因为是任意的。所以要摆脱它，最简单的方法是`x``show``TypeSentence``b``b``show x``Show b``b`

    ```
    instance Show a => Show (TypeSentence a) where
      show (Apply _ _) = "Apply _ _"
      show (Expr x)    = "Expr " ++ show x 
    ```

    这并不是特别有用。所以也许没有一个好的`Show`例子`TypeSentence`。（这很好。许多有用的类型没有`Show`实例。）

3.  这个与其他一切无关。该`instance Show (TypeSentence b -> a)`声明试图声明一个`Show`for 函数的实例 from `TypeSentence b`to `a`; 如果你把它重新括起来`instance Show (TypeSentence (b -> a))`，你仍然需要`FlexibleInstances`和`OverlappingInstances`扩展来编译它。所以你可能应该只是斧头。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T20:43:37.450

好吧，让我们推理一下。您提议`Show`的实例的`show`方法将被调用一些函数`f :: b -> a`。

```
instance Show (b -> a) where
    show f = ... 
```

你的`show`方法能做什么？好吧，它必须产生一些`String`，但它会怎么做呢？

好吧，既然 type`f`是`b -> a`，你唯一能做的`f`就是把它应用到 type 的东西上`b`。然而`show`没有 type 的参数`b`，并且你的`Show`类没有任何 type 的常量`b`，所以这个方法唯一`show`能做的`f`就是将它应用到`undefined`. 这可能会或可能不会产生错误，具体取决于是否`f`严格 - 您无法控制，而且我相信您无论如何都不想`show`在某些参数上出错。

但无论如何，即使你确实从 得到了一个结果`f undefined`，这个结果也会有 type `a`，而且你的定义真的不能用 an`a`做任何事情，因为你没有任何`a -> whatever`可用的 type 函数。（如果你确实有一个，除非`whatever`是，否则`String`你仍然处于相同的位置。）

所以你不能用 做任何明智的事情`f`，因为你没有其他参数，这意味着你的方法唯一能做的就是返回一个不依赖于`f`或任何其他参数的值。因此，您的方法的返回值必须是一个常量，或者`undefined`. 因为使用`undefined`会很傻，所以这个`show`方法唯一能做的就是返回一个常量`String`：

```
instance Show (b -> a) where
    show _ = "<function>" 
```

正如 Daniel Fischer 在他对您的问题的评论中提到的那样，这已经在`Text.Show.Functions`.

但这里的教训是以这个为例，说明如何通过你的问题进行推理。这是有关 Haskell 的巧妙之处之一：您通常可以通过查看类型来证明一个函数可以做什么、不能做什么或必须做什么。例如，如果您有`foo :: (a -> b) -> [a] -> [b]`, 假设`foo`是不够傻的 不`undefined`无偿使用，您可以推断结果中的`b`s`[b]`是通过将`a -> b`类型参数应用于参数的元素来获得的`[a]`。没有其他方法`foo`可以产生 type 的值`b`。（如果您还没有猜到，该类型中最自然的函数是`map :: (a -> b) -> [a] -> [b]`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-29T01:54:08.543

我认为@Davorak 的评论是你想要的。

[https://stackoverflow.com/a/15846061/6289448](https://stackoverflow.com/a/15846061/6289448)

我只是在这里分享。中通过测试`ghc 8.6.5`。

对于使用 Data.Typeable 的所有函数，有一个部分解决方案超出了固定字符串的范围。

```
{-# LANGUAGE ScopedTypeVariables #-}

import Data.Typeable

instance (Typeable a, Typeable b) => Show (a->b) where
  show _ = show $ typeOf (undefined :: a -> b) 
```

在 ghci

```
> let test :: Int->Int; test x = x + x
> test
Int -> Int 
```

不幸的是，如果没有类型签名，类型将默认使用。

```
> let test x = x + x
> test
Integer -> Integer 
```

该解决方案适用于多个函数，因为 a -> b -> c 与 a -> (b -> c) 相同，您不妨将其写为 a -> d where d = b -> c。

```
> let m10 a b c d e f g h i j = a * b * c * d * e * f * g * h* i * j
> m10
Integer -> Integer -> Integer -> Integer -> Integer -> Integer -> Integer
        -> Integer -> Integer -> Integer -> Integer 
```

但是，当不知道函数的参数是否具有可类型类时，此方法不起作用，但是，虽然 map (+1) 将起作用，但 map 不会。

```
> map (+1)
[Integer] -> [Integer]
> map

<interactive>:233:1:
... 
```

在浏览了 Data.Data 的内部结构和一两个实验之后，似乎可以对其进行重构，使其更加通用，涵盖更多功能。

* * *

* * *

如果你不喜欢上面的实现，就自己实现吧！（如果有更好的方法，请告诉我！）

```
{-# LANGUAGE FlexibleInstances #-}
{-# LANGUAGE InstanceSigs #-}
{-# LANGUAGE ScopedTypeVariables #-}

newtype GenType a =
    GenType
        { asTypeStr :: String
        }

class GenTypeArbitrary a where
    gtArbitrary :: a -> GenType a

instance GenTypeArbitrary String where
    gtArbitrary :: String -> GenType String
    gtArbitrary _ = GenType "String123"

instance GenTypeArbitrary Bool where
    gtArbitrary :: Bool -> GenType Bool
    gtArbitrary _ = GenType "Bool123"

instance GenTypeArbitrary Int where
    gtArbitrary :: Int -> GenType Int
    gtArbitrary _ = GenType "Int123"

instance (GenTypeArbitrary a, GenTypeArbitrary b) => GenTypeArbitrary (a -> b) where
    gtArbitrary :: (GenTypeArbitrary a, GenTypeArbitrary b) => (a -> b) -> GenType (a -> b)
    gtArbitrary _ = GenType $ aTypeStr' ++ " --> " ++ bTypeStr
      where
        aTypeStr = asTypeStr (gtArbitrary (undefined :: a))
        aTypeStr' =
            if "-->" `isInfixOf` aTypeStr
                then "(" ++ aTypeStr ++ ")"
                else aTypeStr
        bTypeStr = asTypeStr (gtArbitrary (undefined :: b))

instance  (GenTypeArbitrary a, GenTypeArbitrary b) => Show (a -> b) where
  show f = asTypeStr $ gtArbitrary f

test1 :: Int -> String
test1 x = ""

test2 :: Int -> String -> Int -> Bool -> Bool
test2 _ _ _ _ = False

test3 :: Int -> ((String -> Int) -> Bool) -> Bool
test3 _ _ = False

test4 :: Int -> (Bool -> (String -> Int)) -> Bool
test4 _ _ = False 
```

```
 λ > show  (test4)
    "Int123 --> (Bool123 --> String123 --> Int123) --> Bool123"
it :: String

...

λ > show  (test3)
    "Int123 --> ((String123 --> Int123) --> Bool123) --> Bool123"
it :: String 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T22:00:53.643

如果您的函数的域是有限集，那么您可以在所有点打印函数的值。在 Haskell 中，您可以使用类型类`Ix`并`Bounded`使用如下函数来做到这一点：

```
rangeF :: (Ix a, Bounded a) => [a]
rangeF = range (minBound, maxBound) 
```

# javascript - 如何加载 jquery 和其他 javascript 文件

> ID：11251501
> 
> 赞同：0
> 
> 时间：2012-06-28T19:24:27.457
> 
> 标签：javascript, jquery

这是我第一次使用使用 jquery 框架的灯箱。但是当我将 jQuery 和 Lightbox javascript 文件粘贴到我的 html 页面中时，我当前的 javascript 代码无法正常工作。我设置它们的方式是错误的吗？谢谢你。这是我放置 js 文件的顺序

我得到的错误是：
Uncaught TypeError: Object [object Object] has no method 'dispatchEvent'prototype.js:5734
编辑：

```
<script src="https://ajax.googleapis.com/ajax/libs/prototype/1.7.0.0/prototype.js"     type="text/javascript"></script>
<script src="random.js" type="text/javascript"></script>

<script src="js/jquery-1.7.2.min.js"></script>
<script src="load-poll.js" type="text/javascript"></script>
<script src="js/lightbox.js"></script> 
```

这是页面加载时我自己的 js 文件的开头：

```
var POLL_WIDTH = 200;
document.observe("dom:loaded", function() {
    if ($("favChar")){
        fetchPoll("favChar");
    }else if ($("favVoice")){
        fetchPoll("favVoice");
    }else if ($("CMTvote")){
        fetchPoll("CMTvote");
    }else if ($("BLdesign")){
        fetchPoll("BLdesign");
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:30:33.113

尝试使用这个

```
$(function() {
  // your init code
}); 
```

代替

```
document.observe("dom:loaded", function() {
  // your init code
}); 
```

# java - 当从 JComboBox 中选择项目时，如何让 JLabel 显示数组中的值？

> ID：11251502
> 
> 赞同：0
> 
> 时间：2012-06-28T19:24:28.860
> 
> 标签：java, swing, user-interface, jcombobox, itemlistener

我正在尝试创建一个算命先生，让您从一个 JCombobox 中选择一种颜色，然后让您根据您选择的颜色从另一个 JCombobox 中选择一个数字。例如，如果我选择“红色”或“黄色”，则会显示这组#'s - {1,3,4,7}。但是，如果我选择“蓝色”或“绿色”，则会显示这组# - {2,6,8,5}。一旦选择了一个数字，我想在屏幕底部的状态栏（JLabel）上显示与该数字相关的“财富数组”中的财富。到目前为止，这是我的代码：-

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;

public class Example2 extends JFrame implements ItemListener {

    private JComboBox maincombobox;
    private JComboBox subcombobox;
    private JLabel labels;

    public Example2(){
        String[] items = {"Select a Color","Red","Blue","Yellow","Green"};
        maincombobox =  new JComboBox(items);
        maincombobox.addItemListener(this);

        getContentPane().add(maincombobox);

        subcombobox = new JComboBox();
        subcombobox.addItemListener(this);      
        subcombobox.setEnabled(true);
        subcombobox.setPrototypeDisplayValue("XXXXXXXXXXXXX");
        getContentPane().add(subcombobox,BorderLayout.EAST);

        labels =  new JLabel("Default");
        getContentPane().add(labels, BorderLayout.SOUTH);

             }
    public void itemStateChanged(ItemEvent e) {
        String[] subitems1 = {"Choose a number","1","3","4","7"};
        String[] subitems2= {"Choose a number","2","6","8","5"};

        String[] fortune = {"Today is you lucky day", "You will get strange looks from people", "Don't touch your left foot today", 
                "You will forget a crucial thing today", "You will meet a mysterious person", "Will win a million dollars", 
                "Good day in the financial market", "Get a life","Think hard, you will find the answer"};

        if (e.getSource() == maincombobox) {

            if (maincombobox.getSelectedItem().equals("Select a Color")) {
               subcombobox.setEnabled(false);
            }    
            else if (maincombobox.getSelectedItem().equals("Red") ||
                maincombobox.getSelectedItem().equals("Yellow") ){

                subcombobox.setEnabled(true);
                subcombobox.removeAllItems();
                for (int i = 0; i < subitems1.length; i++) {
                    subcombobox.addItem(subitems1[i]);
                }

            }

            else if (maincombobox.getSelectedItem().equals("Blue") ||
                maincombobox.getSelectedItem().equals("Green") ){

                subcombobox.setEnabled(true);
                subcombobox.removeAllItems();
                for (int i = 0; i < subitems2.length; i++) {
                    subcombobox.addItem(subitems2[i]);
                }

            }
        }

    }

    public static void main(String[] args){
        JFrame frame = new Example2();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(300,200);
        frame.setVisible(true);
        frame.setLocationRelativeTo(null); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:18:53.897

添加以下代码：

```
if(e.getSource()==subcombobox){
    int choice=Integer.parseInt(subcombobox.getSelectedItem());
    //here the selected number gets stored into the int variable choice
    labels.setText(fortune[choice]);
    //here the text for "labels" is set from your fortune string array
} 
```

根据您的喜好更改代码，但这本身是不言自明的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:12:20.627

我写的逻辑完美地检查了这个

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;

public class Example2 extends JFrame implements ItemListener {

private JComboBox maincombobox;
private JComboBox subcombobox;
private JLabel labels;

public Example2(){
    String[] items = {"Select a Color","Red","Blue","Yellow","Green"};
    maincombobox =  new JComboBox(items);
    maincombobox.addItemListener(this);

    getContentPane().add(maincombobox);

    subcombobox = new JComboBox();
    subcombobox.addItemListener(this);      
    subcombobox.setEnabled(true);
    subcombobox.setPrototypeDisplayValue("XXXXXXXXXXXXX");
    getContentPane().add(subcombobox,BorderLayout.EAST);

    labels =  new JLabel("Default");
    getContentPane().add(labels, BorderLayout.SOUTH);

         }
public void itemStateChanged(ItemEvent e) {
    String[] subitems1 = {"Choose a number","1","3","4","7"};
    String[] subitems2= {"Choose a number","2","6","8","5"};

    String[] fortune = {"Today is you lucky day", "You will get strange looks from people", "Don't touch your left foot today", 
            "You will forget a crucial thing today", "You will meet a mysterious person", "Will win a million dollars", 
            "Good day in the financial market", "Get a life","Think hard, you will find the answer"};

    if (e.getSource() == maincombobox)
    {

        if (maincombobox.getSelectedItem().equals("Select a Color"))
        {
            subcombobox.setEnabled(false);
        }
        else if (maincombobox.getSelectedItem().equals("Red") || maincombobox.getSelectedItem().equals("Yellow"))
        {

            subcombobox.setEnabled(true);
            subcombobox.removeAllItems();
            for (int i = 0; i < subitems1.length; i++)
            {
                subcombobox.addItem(subitems1[i]);

            }

        }

        else if (maincombobox.getSelectedItem().equals("Blue") || maincombobox.getSelectedItem().equals("Green"))
        {

            subcombobox.setEnabled(true);
            subcombobox.removeAllItems();
            for (int i = 0; i < subitems2.length; i++)
            {
                subcombobox.addItem(subitems2[i]);

            }
        }

    }

    else if (subcombobox.getItemCount()>0)
    {
        for(int i=0;i<8;i++)
        {
                if (subcombobox.getSelectedItem().equals(Integer.toString(i)))
                {
                    labels.setText(fortune[i]);
                }

        }
    }

}

public static void main(String[] args){
    JFrame frame = new Example2();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(300,200);
    frame.setVisible(true);
    frame.setLocationRelativeTo(null); 
} 
```

}

我刚刚在底部添加了代码是

```
else if (subcombobox.getItemCount()>0)
{
    for(int i=0;i<8;i++)
    {
            if (subcombobox.getSelectedItem().equals(Integer.toString(i)))
            {
                labels.setText(fortune[i]);
            }

    }
} 
```

如果有效，请将其标记为正确答案

# sql-server - 选择有条件的计数和分组

> ID：11251503
> 
> 赞同：1
> 
> 时间：2012-06-28T19:24:33.803
> 
> 标签：sql-server, count, group-by

对于这里的一些人来说，一些简单的点，请看下面的数据表：

```
EventCode  ProcessId
---------- ---------
2          1
-6         3
42         1
-6         2
-12        2
23         4
4          2
-23        1
12         3
-26        1 
```

我需要一个查询，该查询将计算所有有负面事件代码的进程 ID。因此，从上面的数据集中，结果将是 3（进程 ID 的 1,2 和 3 具有负事件代码，进程 ID 4 没有）

可能真的很简单，涉及团体，但我只是看不到树木的树林。

顺便说一句，该表中有数百万行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T19:28:36.367

```
SELECT COUNT(DISTINCT ProcessID) FROM table
WHERE EventCode < 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:29:33.677

快速的答案是

```
SELECT COUNT(DISTINCT t.ProcessId)
  FROM mytable t
 WHERE t.EventCode < 0
   AND t.ProcessId IS NOT NULL 
```

（没有必要在 ProcessId 上包含谓词；我在这里指出 COUNT 不会包含 NULL 值。）

这是最简单的方法，但不是唯一的方法。

其他可能查询的性能实际上将取决于表的组织（HEAP 或 CLUSTERED），以及可用的索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T19:30:02.030

如果有多个负值具有相同的 ProcessId：

```
SELECT COUNT(DISTINCT ProcessId) FROM table WHERE EventCode < 0; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T19:30:24.867

如果您希望按以下方式分组计数`ProcessId`：

```
SELECT COUNT(*), [ProcessId] 
FROM TBL
WHERE [EventCode] < 0
GROUP BY [ProcessId] 
```

如果你想要整个负数：

```
SELECT COUNT(DISTINCT([ProcessId])) FROM Tbl WITH (NOLOCK) WHERE [EventCode] < 0 
```

**为了提高性能：** 在 column 上创建一个过滤的非聚集索引`EventCode`并包含 column `ProcessId`，其中`EventCode`< 0。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-28T19:27:10.697

希望你的意思是：

`select count(*) from (YourTableNameHere) where EventCode < 0`

# android - 如何在 Android 中解析 XML（特定结构）？

> ID：11251513
> 
> 赞同：0
> 
> 时间：2012-06-28T19:25:00.280
> 
> 标签：android, xml-parsing

我需要解析从 http 请求获得的 XML 的特定部分，但我不知道该怎么做！

我返回了以下 XML 结构：

```
<categorias type="array">
    <categoria>
        <nome>
        Alimentação
        </nome>
        <idcategoria>
        5
        </idcategoria>
        <subcategorias>
            <subcategoria>
                <nome>
                Todos
                </nome>
                <id>
                5
                </id>
            </subcategoria>
        </subcategorias>
    </categoria>
</categorias> 
```

我需要解析 subcategorias 标记内的数据，因为使用我现在拥有的代码，我只能从根标记类别中获取上部标记，例如 nome 和 idcategoria。

我在 for 循环中创建了一个 NodeList，但它返回了 Document 中的所有子类别标签。而且我只需要获取唯一类别标签中的那些。这是我现在拥有的代码：

```
menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);

    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));

        // adding HashList to ArrayList
        menuItems.add(map);
    } 
```

有人可以帮我解决这个问题吗！？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:34:26.107

查看描述**XMLPullParser**[的 Android 官方文档](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)。

 **您必须根据您的 XML 结构来实现您的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T23:43:16.973

除了 XMLPullParser，解析 XML 的另一个选择是使用[Simple XML library](http://simple.sourceforge.net/)。它将允许您轻松地将该 XML 反序列化为您可以随心所欲地操作的对象。您可以忽略类别中的所有其他子元素，而仅通过使用松散对象映射来捕获子类别。查看简单框架文档以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:44:21.970

@Android Coader 是对的，“你必须根据你的 XML 结构来实现你的逻辑”

为什么你有一个 KEY_ITEM，当你的 XML 中没有“项目”标签时？您需要在代码中指定要检索的标签。例如，如果您定义了一个 KEY_SUBCATEGORIA = "subcategoria"，那么要获取所有子类别节点，您可以这样做

```
NodeList nl = doc.getElementsByTagName(KEY_SUBCATEGORIA); 
```

然后您应该浏览每个节点，像现在一样提取名称和 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T17:20:23.070

我知道了！我只使用了与以前相同的结构！

我在 for 循环中添加了这段代码：

```
NodeList nlSubcategorias = e.getElementsByTagName("subcategoria");
        ArrayList<HashMap<String, String>> subcategorias = new ArrayList<HashMap<String, String>>();

        for (int j = 0; j < nlSubcategorias.getLength(); j++) {
            HashMap<String, String> mapSub = new HashMap<String, String>();

            Element eSub = (Element)nlSubcategorias.item(j);

            mapSub.put(KEY_ID_SUB, parser.getValue(eSub, KEY_ID_SUB));
            mapSub.put(KEY_NAME_SUB, parser.getValue(eSub, KEY_NAME_SUB));

            subcategorias.add(mapSub);

            System.out.println("subcategorias: " + subcategorias.get(j).get(KEY_NAME_SUB));
        }
        subcategoriasItems.add(subcategorias); 
```**

# batch-file - 启动 cmd.exe 并更改目录？

> ID：11251517
> 
> 赞同：3
> 
> 时间：2012-06-28T19:25:10.430
> 
> 标签：batch-file, cmd, cd

我想要一个存储在桌面上的 .bat 文件来执行 2 个简单的任务： 1\. 启动 cmd.exe 2\. 将目录更改为 c:\executionsdktest_10.2.2 我有：

```
 @echo off 
 start cmd.exe \k
 cdsdad c:\ExecutionSDKTest_10.2.2 
```

但是当我双击 .bat 文件时，这会启动 cmd.exe 但 cd 到 c:\users\qestester\desktop。有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-28T19:28:13.720

您可以使用

```
cmd /k "cd /d c:\ExecutionSDKTest_10.2.2" 
```

而且您不需要批处理文件。这可以放在一个普通的快捷方式中。

如果你有一个普通的快捷方式，你可以指定它的工作目录并`cmd`直接运行而无需任何参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-04T23:40:42.213

这对我有用：

```
start cmd.exe @cmd /k "cd /d C:\Users\Michael && node test.js" 
```

我需要的是...来自 PHP 提供的本地主机页面，打开终端，更改目录，然后启动节点脚本。实现如下：

```
pclose(popen("start /B ". $cmd, "r")); 
```

.. 其中 $cmd 是上面的第一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:29:52.033

`start cmd.exe /k "C: && cd \ExecutionSDKTest_10.2.2"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-09T23:00:40.073

我想：

*   打开命令提示符
*   更改目录（转到另一个目录）
*   从那里运行命令

对我有用的解决方案：

```
@echo off
d:
cd\Path\to\wherever
my command 
```

**笔记：**

*   `d:`之后`@echo off`告诉该路径在 D 驱动器上。写一个`c`而不是`d`你将在驱动器C上。
*   第三行以强制开头`cd`，之后是路径开头，前面是`\`.
*   `my command`可以是您想要的任何内容，并且可以包含多个单词（或仅一个单词）。我用它来运行`jupyter notebook`。

# network-programming - 如何在环回时拦截来自 RTP 流的数据包并通过 C++ 代码访问数据？

> ID：11251518
> 
> 赞同：0
> 
> 时间：2012-06-28T19:25:12.060
> 
> 标签：network-programming, video-streaming, rtp, rtcp

我希望能够拦截该流的数据包并从 C++ 代码访问数据。如何在 C++ 代码中执行此操作？RTP-媒体流使用此服务器进行流式传输：[link](https://metacpan.org/source/REVMISCHA/RTSP-Server-0.06)

然后我将对数据包进行 FEC 编码；通过网络发送它们；在接收端对它们进行 FEC 解码，并将数据流传递给 RTCP 客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:00:35.063

评估一些用于媒体流的开源堆栈，例如（live555、openRTSP、VLC、mPlayer）。使用其中任何一个，您都可以执行以下操作：

```
 - install    
instrument    
build    
run with sample streams    
observe debug and   or logger 
```

例如，在 live555 源中...

./live/liveMedia/MultiFramedRTPSource.cpp:MultiFramedRTPSource::~MultiFramedRTPSource()

你会在[这里找到帧处理程序](http://snipplr.com/view/57979/rtp-packet-handler/)

对于另一个示例，请参阅[此处](http://pastebin.com/2uDn1HSi)以获取从任何 Youtube 条目中获取流 (rtsp / rtp) 的播放器 (VLC) 的日志。如果需要，您可以钻取任何 youtube videoID 以获得相关的流媒体链接。然后，您可以将该链接用作测试中的来源。

# javascript - 用于搜索的通配符表达式

> ID：11251519
> 
> 赞同：0
> 
> 时间：2012-06-28T19:25:13.657
> 
> 标签：javascript, search, titanium, appcelerator

我有一个按钮，我想在搜索结果的末尾显示它。为此，我在表格行中添加了“过滤器”属性。无论在搜索栏中输入什么内容，我都需要一种方法来调用该行（例如过滤器匹配）。我想我需要某种形式的通配符。做了一些研究，我还没有找到任何简单地显示通配符的东西。我的大部分结果似乎都使用了正则表达式。那么，有可能做到这一点吗？

```
search : Ti.UI.createSearchBar({
        barColor : '#666',
        height : '45dp',
        top : 0,
        showCancel : false
    }),
    filterAttribute : 'filter',
//Above is from the Table code, below is the row's code.
var buttonRow = Ti.UI.createTableViewRow({
        backgroundImage : $$.components.RowBG,
        selectionStyle : 'none',
        height : '60dp',
                filter : 'I NEED THIS FILTER TO RETURN NO MATTER WHAT IS INPUTTED IN SEARCH'
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:13:06.637

我不确定您将如何使用通配符来执行此操作，但您可以动态地将最后一行的“过滤器”属性更改为与搜索值相同：

```
var data = ['oranges', 'grapes', 'lemons', 'kiwi', 'apples', 'limes'];

var rows = [];

for (var i = 0; i < data.length; i++) {
    var row = Ti.UI.createTableViewRow({
        title : data[i],
        filter : data[i]
    });
    rows.push(row);
}

var magicRow = Ti.UI.createTableViewRow({
    title : 'I am always here',
    filter : 'set by code'
});
rows.push(magicRow);

var search = Titanium.UI.createSearchBar({
    barColor : '#000',
    showCancel : true,
    height : 43,
    top : 0,
});

search.addEventListener('change', function(e) {
    // Set the last row filter to the current search value
    magicRow.filter = e.source.value;//
    //table.updateRow(rows.length - 1, magicRow,{animationStyle:Ti.UI.iPhone.RowAnimationStyle.NONE}); <- Should work but flickers
    // setting the data seems to work better
    table.data = rows;
});

var table = Ti.UI.createTableView({
    data : rows,
    filterAttribute : 'filter',
    search : search
}); 
```

这是在 iOS 上使用 Titanium SDK 2.0.1.GA2 测试的

# c# - 如何检测/找到while循环的结束？

> ID：11251523
> 
> 赞同：2
> 
> 时间：2012-06-28T19:25:39.470
> 
> 标签：c#, asp.net, .net, loops

我在 C# 中执行“while”循环，这是通过从数据库中提取的一些记录。检测/查找循环中最后一条记录的最佳方法是什么？这可能吗？

这是我的代码：

```
 while (sdr.Read())
    {
        //Pull each line from DB
        the_title = sdr["the_title"].ToString();
        the_cats = sdr["the_category"].ToString();
        the_tags = sdr["the_tags"].ToString();
        the_date = sdr["the_date"].ToString();

        //Start file creation
        writer.WriteLine("[");
        writer.WriteLine("\"" + the_title + "\", ");
        writer.WriteLine("\"" + the_cats + "\", ");
        writer.WriteLine("\"" + the_tags + "\", ");
        writer.WriteLine("\"" + the_date + "\", ");
        writer.WriteLine("\"<a href=\\\"#\\\" class=\\\"sepV_a\\\" title=\\\"Edit\\\"><i class=\\\"icon-pencil\\\"></i></a>\"");

        writer.WriteLine("],");

    }
    writer.WriteLine("]");
    writer.WriteLine("}");
    writer.Close(); 
```

我遇到的问题是最后一行代码“writer.WriteLine("],");" 我需要删除从数据库中提取的最后一条记录上的逗号。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:28:54.033

反过来做：

```
bool is_first = true;

while (sdr.Read()) {

    if (is_first) {
        is_first = false;
    } else {
        writer.Write(",");
    }

    // Do your other writes here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:35:14.560

我建议你只删除最后一个字符。它是循环中最有效的解决方案。

```
StringBuilder sb = new StringBuilder();

    while (sdr.Read())
    {
       sb.Append("Value");
       ....
    }

if(sb.Length > 0)
{
sb.Remove(sb.Length - 1, 1)
}
var result = sb.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:45:15.967

另一种应该有效的方法：

```
List<String> bufferList = new List<String>();
while (sdr.Read())
{
    //Pull each line from DB
    the_title = sdr["the_title"].ToString();
    the_cats = sdr["the_category"].ToString();
    the_tags = sdr["the_tags"].ToString();
    the_date = sdr["the_date"].ToString();

    StringBuilder tempSb = new StringBuilder();
    tempSb.AppendLine();

    //Start file creation
    tempSb.AppendLine("[");
    tempSb.AppendLine("\"" + the_title + "\", ");
    tempSb.AppendLine("\"" + the_cats + "\", ");
    tempSb.AppendLine("\"" + the_tags + "\", ");
    tempSb.AppendLine("\"" + the_date + "\", ");
    tempSb.AppendLine("\"<a href=\\\"#\\\" class=\\\"sepV_a\\\" title=\\\"Edit\\\"><i class=\\\"icon-pencil\\\"></i></a>\"");
    tempSb.AppendLine(("]");

    bufferList.Add(tempSb.ToString());

}

String.Join(",", bufferList); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T19:49:40.067

另一种方法

```
if(sdr.Read()) {
    while (true) {
        ...
        writer.WriteLine("[");  
        ...
        if (!sdr.Read()) {
            writer.WriteLine("]"); 
            break;
        }
        writer.WriteLine("],");  
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-28T19:32:29.793

你不能知道最后一个（直到你到达/通过它），但你可以知道第一个。您可以将代码修改为：

```
bool isFirst = true;
while (sdr.Read())
{
    if (isFirst) isFirst = false;
    else writer.WriteLine(",");

    //Pull each line from DB
    the_title = sdr["the_title"].ToString();
    the_cats = sdr["the_category"].ToString();
    the_tags = sdr["the_tags"].ToString();
    the_date = sdr["the_date"].ToString();

    //Start file creation
    writer.WriteLine("[");
    writer.WriteLine("\"" + the_title + "\", ");
    writer.WriteLine("\"" + the_cats + "\", ");
    writer.WriteLine("\"" + the_tags + "\", ");
    writer.WriteLine("\"" + the_date + "\", ");
    writer.WriteLine("\"<a href=\\\"#\\\" class=\\\"sepV_a\\\" title=\\\"Edit\\\"><i class=\\\"icon-pencil\\\"></i></a>\"");

    writer.Write("]");
}
writer.WriteLine(); 
```

否则，为了避免检查循环的每个实例，您可以使用：

```
var sb = new StringBuilder();
while (sdr.Read())
{
    //Pull each line from DB
    the_title = sdr["the_title"].ToString();
    the_cats = sdr["the_category"].ToString();
    the_tags = sdr["the_tags"].ToString();
    the_date = sdr["the_date"].ToString();

    //Start file creation
    sb.AppendLine("[");
    sb.AppendLine("\"" + the_title + "\", ");
    sb.AppendLine("\"" + the_cats + "\", ");
    sb.AppendLine("\"" + the_tags + "\", ");
    sb.AppendLine("\"" + the_date + "\", ");
    sb.AppendLine("\"<a href=\\\"#\\\" class=\\\"sepV_a\\\" title=\\\"Edit\\\"><i class=\\\"icon-pencil\\\"></i></a>\"");

    sb.AppendLine("],");
}
if (sb.Length > 0)
{
    // Write result, sans characters for last newline (Environment.NewLine) and comma.
    writer.WriteLine(sb.ToString(0, sb.Length - (Environment.NewLine.Length + 1));
} 
```

**编辑：**通过使用使剪裁长度动态化`Environment.NewLine.Length`。

# sql-server - SQL UNION 不使用单个列名

> ID：11251532
> 
> 赞同：-5
> 
> 时间：2012-06-28T19:26:27.357
> 
> 标签：sql-server

我想合并两个表。它们都有不相等的列数，其中一些是共同的，有些则不是。

我如何在不使用单个列名的情况下将它们联合起来（在中间插入虚拟列）。

我必须查询并取几个表的联合，并且将在不同的数据库上进行测试，这些数据库对于同一个表有不同的列名。因此，我不能使用解决单个列名和插入虚拟列来获得联合的常用方法。

谢谢，高尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:29:43.343

> 我如何在不使用单个列名的情况下将它们联合起来

你不能。

使用 UNION 时，列的数量和类型*必须*匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:31:32.987

`SELECT...UNION...SELECT`您可以通过检查`INFORMATION_SCHEMA.COLUMNS`有问题的两个（或更多）表来综合适当的语句。有了这些列，您可以构建 SQL，以便只包含公共列。

使用 T-SQL：

```
SELECT  COLUMN_NAME
FROM    INFORMATION_SCHEMA.COLUMNS
WHERE   TABLE_NAME = 'FirstTable'
UNION
SELECT  COLUMN_NAME
FROM    INFORMATION_SCHEMA.COLUMNS
WHERE   TABLE_NAME = 'SecondTable' 
```

以C#为例来描述逻辑：

```
List<string> sharedColumnNames = CallTheAforementionedSql();
string unionStatement = string.Format(
  "SELECT [{0}] FROM FirstTable UNION SELECT [{0}] FROM SecondTable",
  string.Join("],[", shareColumnNames.ToArray())
);

var stuff = ExecuteSql(unionStatement); 
```

# python - 如何为使用 sys.arg 获取的 3 个参数设置变量

> ID：11251534
> 
> 赞同：0
> 
> 时间：2012-06-28T19:26:36.370
> 
> 标签：python, variables, arguments

这是定义变量的地方，现在它应该作为参数 a (directory,filename,slicesize) 但是当我将它插入时它给我一个“列表索引超出范围”的错误，里面有什么问题吗这段代码？还是我叫错了？

```
if __name__=="__main__":
    dirname = sys.argv[1]
    filename = sys.argv[2]
    slicesize = int(sys.argv[3])
    sort_big_text_file(dirname,filename,slicesize)

sort_big_text_file('C:/Python/','dotcom_data.txt', 100000) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:54:54.787

数组通常从索引 0 开始。你的意思是使用

```
if __name__=="__main__":
  dirname = sys.argv[0]
  filename = sys.argv[1]
  slicesize = int(sys.argv[2])
  sort_big_text_file(dirname,filename,slicesize) 
```

你有3个论据吗？你可以检查使用

```
if len(sys.argv) < 3:
  sys.stderr.write('error: not enough arguments') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T21:15:17.250

我正在做的问题是我在最后执行时调用了该函数，并且应该在最后一个函数之前出现，我相信你会称之为 main. 因此，而不是我所做的，像这样：

```
sort_big_text_file('C:/Python/','com_data.txt', 100000)

if __name__=="__main__":
    dirname = sys.argv[1]
    filename = sys.argv[2]
    slicesize = int(sys.argv[3])
    sort_big_text_file(dirname,filename,slicesize) 
```

# jquery-ui - 在 dataTables 插件中单击列而不是行

> ID：11251535
> 
> 赞同：1
> 
> 时间：2012-06-28T19:26:37.583
> 
> 标签：jquery-ui, jquery, jquery-plugins, datatables

我有以下代码非常适合行点击，但我希望第一列和最后一列是可点击的，并且我希望能够知道点击了哪一列。我有以下代码

```
$(document).ready(function() {
    oTable = $('#mytable').dataTable();
    var fa = 0;
    $('#submit tbody td ').click(function() {
    var gCard = $('#mytable tbody').delegate("tr", "click", rowClick);

    });
    function rowClick() {
        fa = this;
        var id  = $("td:eq(1)", this).text();
        cardNumber = $.trim(id);    
        $.ajax({
            url : 'myurltopostto',
            type : 'POST',
            data : {
                id  :   id

            },
            success : function(data) {
                oTable.fnDraw(); //wanted to update here
            },
            error : function() {
                console.log('error');
            }
        });
    }

}); 
```

这里的代码是行点击

```
var gCard = $('#mytable tbody').delegate("tr", "click", rowClick); 
```

我可以做些什么来点击单元格并获取信息。

使用 jquery 插件 dataTables 谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T19:45:59.153

当你这样做时，`$('#submit tbody td ').click(function() ...`你将点击事件绑定到`td`.
因此，要获取第一列和最后一列，请单击使用以下命令：

```
$('td:first, td:last', '#submit tbody tr').on('click', function() {
    // do what you want
}); 
```

[**演示1**](http://jsfiddle.net/hua8Z/)

**更新 1**：获取最后两列：

```
jQuery('#mytable tr').each(function() {
    jQuery('td', this).slice(-2).on('click', function() {
        // do what you want
    });
}); 
```

[**演示2**](http://jsfiddle.net/hua8Z/2/)

**更新2**：点击最后两列获取每列数据

```
jQuery('#mytable tr').each(function() {
    jQuery('td', this).slice(-2).on('click', function() {
        // do what you want
        var $columns = jQuery(this).siblings('td').andSelf();
        jQuery.each($columns, function(i, item) {
            alert(jQuery(item).html());
        });
    });
}); 
```

[**演示3**](http://jsfiddle.net/hua8Z/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-14T22:06:31.960

只需指定列号而不是第一个、最后一个等。下面的示例显示第 12 列。零是第一个。这样更容易。

```
td:eq(11) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-14T09:48:17.053

```
$(document).ready(function() {
    var table = $('#tableID').DataTable();

    $('#tableID').on('click', 'tr', function () {
        var data = table.row( this ).data();
        alert( 'You clicked on '+data[0]+'\'s row' );
    } );
} ); 
```

有关更多信息，请参阅此[链接](https://datatables.net/examples/advanced_init/events_live.html)

# arm - ARM 弱内存模型保证了哪些排序

> ID：11251536
> 
> 赞同：3
> 
> 时间：2012-06-28T19:26:42.147
> 
> 标签：arm, multicore, memory-model

我了解弱记忆模型和强记忆模型的基本区别。但是弱的没有确切的定义，它取决于架构（这里是 ARM）。

我已经浏览了 ARM 信息中心的文档，但仍然不清楚很多事情。有人可以列出 -

*   **ARM 保证了哪些内存访问顺序。***   因此，在为多核 ARM 系统编码时， **汇编程序员必须在代码中明确强制执行哪些顺序。**

    *任何能够解释黑白 ARM 和 PPC（Power PC）内存模型差异的人都可以获得奖励积分。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T12:29:54.870

查看[Cortex-A 系列程序员指南](http://infocenter.arm.com/help/topic/com.arm.doc.den0013b/index.html)，其中有一章是关于内存排序的。例如：

> ARM 体系结构中定义了三种内存类型。所有内存区域都配置为这三种类型之一。
> 
> *   强序
> *   设备
> *   普通的。
> 
> 此外，对于普通内存和设备内存，可以指定内存是否可共享（由其他代理访问）。对于普通内存，可以指定内部和外部缓存属性。

# mocking - 起订量：设置一种方法与另一种方法的返回值

> ID：11251548
> 
> 赞同：1
> 
> 时间：2012-06-28T19:27:57.557
> 
> 标签：mocking, moq

我有一个测试，我正在模拟在控制器中调用的 2 个服务调用。第一次调用（用户 POCO）的返回值用于调用第二次。问题是它似乎与第二个不匹配，因为它一直返回 null。如果我将服务更改为返回字符串而不是 User 对象，则它可以正常工作。

测试：

```
 [Test]
    public void GivenExternalReturnUrl_ReturnsHomePage()
    {
        var model = new Login
        {
            Username = "user1",
            Password = "password1",
            ReturnUrl = "http://google.com"
        };
        UserService.Setup(x => x.ValidateUser(model.Username, model.Password)).Returns(User);
        var cookie = new HttpCookie("test");
        UserService.Setup(x => x.BuildLoginCookie(User, model.RememberMe)).Returns(cookie);

        var result = Controller.Login(model) as RedirectToRouteResult;
        result.Should().Not.Be.Null();
        result.RouteValues["controller"].Should().Equal("Home");
        result.RouteValues["action"].Should().Equal("Index");
        UserService.Verify(x => x.BuildLoginCookie(User, model.RememberMe), Times.Once());
    } 
```

BuildLoginCookie 返回 null 而不是 cookie 对象。

它正在测试的操作：

```
 [HttpPost]
    public ActionResult Login(Login model)
    {
        if (ModelState.IsValid)
        {
            var user = _userService.ValidateUser(model.Username, model.Password);
            if (user != null)
            {
                var cookie = _userService.BuildLoginCookie(user, model.RememberMe);
                Response.Cookies.Add(cookie);

                if (Url.IsLocalUrl(model.ReturnUrl))
                    return Redirect(model.ReturnUrl);
                return RedirectToAction("Index", "Home");
            }
            ModelState.AddModelError("InvalidCredentials", "The user name or password provided is incorrect.");
        }

        // If we got this far, something failed, redisplay form
        model.Password = null;  //clear the password so they have to re-enter it
        return View(model);
    } 
```

我需要做什么才能使 Moq 匹配第二次调用并返回我告诉它返回的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:51:07.433

问题出在你的财产上`public UserWithRolesPermissions User { get { new UserWithRolesPermissions(); } }`

每次调用它时，它都会创建一个新实例，因此对它的两个引用各自接收一个新实例，它们不相等。因此，对 setup 的调用将与调用不匹配。

如果您将代码更改为使用单个实例，它应该可以正常工作。

```
var user = new UserWithRolesPermissions();
UserService.Setup(x => x.ValidateUser(model.Username, model.Password)).Returns(user);
var cookie = new HttpCookie("test");
UserService.Setup(x => x.BuildLoginCookie(user, model.RememberMe)).Returns(cookie); 
```

另一种选择是避免对实例进行比较，而只匹配一个属性。

```
UserService.Setup(x => x.BuildLoginCookie(It.Is<User>(u => u.Username == model.Username), model.RememberMe)).Returns(cookie); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:50:31.063

我想到了。我将第二个设置更改为以下设置，它现在可以工作了。

```
UserService.Setup(x => x.BuildLoginCookie(It.Is<UserWithRolesPermissions>(u => u.Username == User.Username), model.RememberMe)).Returns(cookie); 
```

它一定很难匹配自定义类对象或其他东西。

# c# - 我应该使用 WPF 用户控件吗？还是只是一个网格？

> ID：11251549
> 
> 赞同：1
> 
> 时间：2012-06-28T19:28:11.700
> 
> 标签：c#, wpf, user-controls, menu, grid

所以我有一个分为两部分的应用程序 - 左侧有一个自定义菜单，右侧有一个包含所有“内容”（不同屏幕）的网格。

它看起来像这样：

![在此处输入图像描述](../Images/de3c3079496fba07c947222ce079f0c2.png)

此外，当点击不同的按钮时，左侧的菜单将填满不同的按钮（例如，如果您点击查看按钮，菜单将变成类似的东西）：

```
Start Date
End Date

Employee
Project
... 
```

我很确定我希望每个屏幕（在右侧）成为他们自己的用户控件。

但我的问题是：每个菜单都应该是用户控件吗？这使得使用它们有点困难。然后我不得不担心有 getter/setter 以便主窗口可以监听菜单按钮等。

另一种选择是以编程方式在 mainWindow 中添加按钮，这样我就可以在 mainWindow.cs 中添加侦听器（到网格中）

哪种方法更好？还是有另一种受欢迎的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:35:04.273

整个窗口可以轻松完成`Grid`。

左侧可以`StackPanel`使用您的按钮仅保留一个或其他布局控件。

您可以使用 a`ContentPresenter`来保存右侧的内容。当您触发按钮时，只需更改绑定的内容，它将使用您相应的用户控件进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:49:28.790

我想你可以像里德所说的那样用网格来做。但是，如果您需要在其他地方重用它，我认为您应该改用单独的 UserControl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:09:08.093

也许我误解了你，但我会使用`TabControl`, with `TabStripPlacement="Left"`。

如果你需要在左边有额外的空间来显示其他东西，你可以覆盖默认的 TabControl`ControlTemplate`并`TabPanel`在`ControlTemplate`. 或者，您可以让`TabItem`' 的标题在选中时与未选中时显示不同。

# ruby-on-rails - 使 Rails 调试器的 `Step` 方法工作

> ID：11251550
> 
> 赞同：1
> 
> 时间：2012-06-28T19:28:12.183
> 
> 标签：ruby-on-rails

很多时候，我会进行破坏测试。

所以我会去测试，就在断线之前，我会投入一个调试器。

让我们看看它要做什么，对吧？

但是当我的应用程序点击调试器时。我打了`s`or `step`，它只做了最微小的微不足道的步骤。从字面上看，我将永远在做同样的事情，但仍然无法使其更接近我的目标，即我编写的​​下一个代码，而不是 Ruby 如何解析它，或者 ApplicationController 如何在基本级别上运行。

我在这里遗漏了一些重要的细节吗？或者这就是每个人都使用调试器的方式？

如果这是一个白痴问题，我很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T20:50:44.007

您可以在控制台中键入`continue`以继续到下一个断点或到过程结束。[http://guides.rubyonrails.org/debugging_rails_applications.html#resuming-execution](http://guides.rubyonrails.org/debugging_rails_applications.html#resuming-execution)

# php - WordPress 和 current_menu_item

> ID：11251553
> 
> 赞同：1
> 
> 时间：2012-06-28T19:28:24.077
> 
> 标签：php, wordpress

出于某种原因，Wordpress 中的小部件中的菜单没有获得分配的类，例如“current_menu_item”类 - 最重要的是，在 Worddpress > 外观 > 菜单中向菜单项添加类时，它们没有被分配相应的类.

我希望能够分配一个 current_page_item 类或任何与此相关的类，以突出显示小部件中当前活动的菜单项。我不确定为什么小部件内的菜单中省略了类，但我想这是开发人员的疏忽之类的。

谁能帮我实现上述目标？

问候，尼克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:35:49.823

```
#access .current-menu-item > a,
#access .current-menu-ancestor > a,
#access .current_page_item > a,
#access .current_page_ancestor > a {
    font-weight: bold;
} 
```

这是您将 .current-menu-item 样式设置为粗体的地方。但是，左侧的菜单不在 access nav 元素内。current-menu-item 类**在**您的活动菜单项上：

```
<li id="menu-item-40" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-40"><a href="/jason/bill-payment">Bill Payment</a></li> 
```

# database - 需要了解 Playframework 的逻辑

> ID：11251555
> 
> 赞同：0
> 
> 时间：2012-06-28T19:28:50.537
> 
> 标签：database, playframework, playframework-2.0

我有一个简单的问题。如果我`play.db.ebean.Model`曾经让我的模型从模型扩展，我怎样才能将它保存到数据库中？更清楚：在 Django 中，创建数据库文件并保存对象，它将保存到 db 文件中，我不执行任何 sql 语句来检索或保存对象..这在 playframework 中如何工作？

假设我已经在 application.conf 文件中配置了我的数据库文件，如下所示：

```
db.default.driver=org.h2.Driver
db.default.url="jdbc:h2:tcp://localhost/~/microblogdb"
db.default.user="sa"
db.default.password="" 
```

现在我在系统某处有一个数据库文件。

现在我有一个类用户，如上所述，它扩展了模型。现在我想将一个用户对象保存到数据库中。所以我会这样做：

```
User user = new User();
user.username = "testusername";
user.fullname = "userfullname";
user.save(); 
```

那个`save()`电话之后会发生什么？我现在可以直接在数据库文件中查看我的用户对象吗？

感谢任何帮助！

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T19:43:09.963

是的，如果你没有犯任何错误，它会的。

确保`application.conf`您也取消注释该行：

```
ebean.default="models.*" 
```

检查您下载的 Play 包的示例文件夹中的示例应用程序。以 ComputerDatabase（不是 JPA 版本）为例，了解使用 Ebean 的基础知识。

此外，您可以在模型中创建构造函数以简化创建用户模型：

```
public User(String username, String fullname) {
    this.username = username;
    this.fullname = fullname;
} 
```

并在控制器中使用它：

```
User user = new User("doniyor", "Doniyor The Great");
user.save(); 
```

# c# - 在字符串中查找 .NET 可识别的 Guid

> ID：11251557
> 
> 赞同：0
> 
> 时间：2012-06-28T19:29:02.350
> 
> 标签：c#, .net, regex, guid

我正在寻找一种在.NET 可识别模式中的字符串中查找 Guid 的方法。

这个[流行的库](http://www.regexlib.com/Search.aspx?k=guid&c=-1&m=5&ps=100)中提供了一些正则表达式，但我找不到适用于这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/96ff78dc.aspx)中列出的所有可能的 Guid 的一个。

例如，假设我有一个这样的字符串：

> 活动：“{0xCA761232, 0xED42, 0x11CE, {0xBA, 0xCD, 0x00, 0xAA, 0x00, 0x57, 0xB2, 0x23}}”，时间：09:09:09:09

这应该返回：

> {0xCA761232, 0xED42, 0x11CE, {0xBA, 0xCD, 0x00, 0xAA, 0x00, 0x57, 0xB2, 0x23}}

另一个例子可能是：

> 随机串 CA761232-ED42-11CE-BACD-00AA0057B223 随机串

这应该返回：

> CA761232-ED42-11CE-BACD-00AA0057B223

关于如何解决这个问题的任何想法？正则表达式是要走的路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:41:27.273

*解决方案是：*

```
using System;
using System.Text.RegularExpressions;

class Program
{
  static void Main()
  {
    string input = "Random string CA761232-ED42-11CE-BACD-00AA0057B223 random string";
    Match match = Regex.Match(input,
      @"((?:(?:\s*\{*\s*(?:0x[\dA-F]+)\}*\,?)+)|(?<![a-f\d])[a-f\d]{32}(?![a-f\d])|" +
      @"(?:\{\(|)(?<![A-F\d])[A-F\d]{8}(?:\-[A-F\d]{4}){3}\-[A-F\d]{12}(?![A-F\d])(?:\}|\)|))");
    if (match.Success)
    {
      string key = match.Groups[1].Value;
      Console.WriteLine(key);
    }
    else
    {
      Console.WriteLine("NO MATCH");
    }
  }
} 
```

*[在此处](http://ideone.com/sibn7)查看并测试此代码。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:37:50.047

试试这个正则表达式：

```
(\{0x[0-9A-F]{8}, 0x[0-9A-F]{4}, 0x[0-9A-F]{4}, \{(?:0x[0-9A-F]{2}, ){7}0x[0-9A-F]{2}\}\}) 
```

证明：

![](../Images/aecfcf058cf6387730041dcb8ecd7b96.png)

# javascript - Javascript - 确定数组中的值是正数还是负数（使用开关）

> ID：11251566
> 
> 赞同：0
> 
> 时间：2012-06-28T19:29:49.050
> 
> 标签：javascript

好的，所以我正在尝试编写一些代码来确定静态数组中的值是正数、负数还是等于零。

因此数组被填充，我将使用 switch 语句来遍历值并输出文本，具体取决于它是否高于、低于或等于零。

这是到目前为止我一直在做的一些代码。

请保留有关开关使用的答案！提前致谢。

注意：我正在自学 JS，所以我是新手。到目前为止，这是我的代码：

```
// JavaScript Document

var numbers=new Array();
numbers[0]="1";       
numbers[1]="2";
numbers[2]="3";
numbers[3]="-1";       
numbers[4]="-2";
numbers[5]="-3";
numbers[6]="0";

switch (numbers) {
    case "positive":
        if (numbers>0) 
        {alert("DERP")};
    break;
    case "negative":
        if (numbers<0) 
        {alert("NO DERP")};
    break;
   case "zero":
        if (numbers==0) 
        {alert("STILL DERP")};
    break;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:47:56.470

您需要遍历数组，并检查每个元素。A`switch`在这里不是正确的工具，它不会做你想做的事。 `switch`es 可能是一种做法`if/else`，但它们只检查相等性，而不是小于/大于。

```
var str = 'a'

switch(str){
    case 'a':
        alert(1);
        break;
    case 'b':
        alert(2);
        break;
    default:
        alert(0);
        break;
} 
```

这会发出警报`1`。

如果 的值`str`与其中一个`case`语句匹配（您不能在 中使用`<`或），则代码将运行。否则会运行。它们不是“标签”，因此检查s 中的值是没有意义的。`>``case``defualt``case`

您需要循环，然后只需使用`if/else`.

```
for(var i=0, len=numbers.length; i<len; i++){
    var num = numbers[i];

    if(num > 0) alert('DERP');
    else if(num < 0) alert("NO DERP");
    else alert("STILL DERP");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:41:35.733

你比较字符串和数字。数组中的数字被 "" 包围：这使字符串。您应该在您的阵列中删除这些“”或在您的开关中添加“”。

# c++ - 是否应该使用 typedef 触发 static_assert？

> ID：11251569
> 
> 赞同：5
> 
> 时间：2012-06-28T19:29:54.763
> 
> 标签：c++, templates, static-assert

我注意到当实例化被`typedef`'ed 时，类模板中的静态断言不会被触发。

```
#include <type_traits>

template <typename T>
struct test_assert
{
    static_assert( std::is_same< T, int >::value, "should fail" );
};

typedef test_assert< float > t; 
```

此代码编译没有错误。如果我尝试创建一个实例，则断言失败：

```
t obj; // error: static assertion failed: "should fail" 
```

最后，如果我用 替换条件`false`，即使我没有实例化类模板，断言也会失败：

```
template <typename T>
struct test_assert
{
    static_assert( false, "always fails" );
}; 
```

我在 gcc-4.5.1 和 gcc-4.7.0 上尝试了这段代码。这种行为正常吗？编译器应该在什么时候验证静态断言？我想涉及到两阶段查找，但是 typedef 不应该触发第二阶段吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T19:37:36.947

> 我在 gcc-4.5.1 和 gcc-4.7.0 上尝试了这段代码。这种行为正常吗？

是的

> 编译器应该在什么时候验证静态断言？

这是个有趣的问题。在实例化期间，这将是非依赖名称的第一阶段查找和依赖于模板参数的断言的第二阶段查找。

> 猜测涉及两阶段查找，但 typedef 不应该触发第二阶段吗？

模板是按需编译的，typedef 只是为模板创建一个别名并且不会触发实例化。考虑以下代码：

```
template <typename T> class unique_ptr;
typedef unique_ptr<int> int_unique_ptr; 
```

模板只被声明，但对于 typedef 来说就足够了，因为它只为该类型生成一个*别名。*另一方面，如果创建类型的对象，则必须实例化模板（再次按需实例化成员函数）。

# javascript - 点击更改图片

> ID：11251575
> 
> 赞同：0
> 
> 时间：2012-06-28T19:30:04.747
> 
> 标签：javascript, html

我有一张桌子，我想在`<td>`单击它时更改其中的图像，但它必须是我之前确定的图像的 URL。

我输入到页面链接的图像 URL（例如通过单击 img）

```
index.html?type=dog 
```

然后脚本将从链接中读取变量。我将为脚本创建变量。

```
type = httpGetVars["type"] 
```

现在，当我单击 cat 的 img 在哪里时，脚本应该将**cat** .png 替换为**dog** .png，我以这种方式进行了尝试。

```
<img src="cat.png" onClick="document.write("<img src=\""+ type + ".png\">); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:33:31.817

```
<img id="foo" src="cat.png /> 
```

给它`<img>`一个 id -`foo`例如：

```
document.getElementById('foo').src = type +".png"; 
```

您只需将现有的`<img>`src 更改为新图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:42:17.120

您可以定义`img`如下：

```
<img src="some_image_url.extension" onclick="switchImage(this)" />​ 
```

然后在`switchImage`功能上您可以检查当前图像并更改为不同的图像：

```
var switchImage = function(image) {
    if(image.src == dogImage) {
        image.src = catImage;
    } else {
        image.src = dogImage;
    }
};​ 
```

我制作了一个[**Sample Fiddle**](http://jsfiddle.net/schawaska/zBJjB/)，所以你可以看到它正在运行。

# scala - Scala Play Framework：将数组传递给视图

> ID：11251576
> 
> 赞同：1
> 
> 时间：2012-06-28T19:30:04.707
> 
> 标签：scala, playframework

我正在从 json 生成一个数组：

```
val product_array:Option[Any] = scala.util.parsing.json.JSON.parseFull(products_json) 
```

然后我想将它传递给这样的视图：

```
Ok(views.html.payment(product_array)) 
```

在“payment.scala.html”视图中，我想知道在视图顶部放什么。像这样的东西：

```
@(product_array: Array) 
```

但这是不正确的。我在视图的顶部放了什么？

第二个问题：

如何在视图“payment.scala.html”中循环遍历该数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:40:10.927

我不是 Scala 或 Play 专家，所以我不知道您是否能够传递数组，或者在您的特定情况下是否需要使用数组，但我知道您可以传递List[Type] 所以可能你可以使用 List 而不是 Array 将是一种选择。如果你这样去做，那就是

```
@(class_list: List[Class] 
```

然后遍历它只是

```
@for(class <- class_list){ 
```

然后访问当前迭代将是

```
@class.doStuff() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:38:45.240

从[文档](http://www.playframework.org/documentation/2.0.2/ScalaJson)中，为了解析，你为什么不使用：

```
val json: JsValue = Json.parse(jsonString) 
```

然后将其传递给您的视图，然后浏览 Json 树？

# comments - 分析 Facebook 上的帖子

> ID：11251579
> 
> 赞同：0
> 
> 时间：2012-06-28T19:30:16.730
> 
> 标签：comments

我想弄清楚谁在我们的 Facebook 粉丝页面上谈论过（查看、喜欢和评论）特定帖子的方式。我们想检查粉丝的日常活动对特定帖子的时间和数量的影响。应收集影响者和每个“喜欢”或“评论”的出现时间。是否有任何工具可以对帖子数据进行建模和聚类？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:33:12.450

这绝对是可能的。我知道这不是宣传特定产品的论坛，但我确实在过去几个月为我们公司写了这个确切的东西。查看[http://napkinlabs.com/apps/](http://napkinlabs.com/apps/)它被称为 SuperFans。

# android - 如何从自定义适配器获取 TextView id

> ID：11251580
> 
> 赞同：3
> 
> 时间：2012-06-28T19:30:22.020
> 
> 标签：android, android-listview

我的 ListView 有一个自定义适配器，它有多个 TextView。我想为我的 ListView 设置一个 onItemClickListener 并从 TextViews 中提取文本。我尝试使用这个：

```
String s =(String) ((TextView) mListView.findViewById(R.id.myNr)).getText(); 
```

但正如预期的那样，默认情况下它总是返回第一个列表项的值！（我猜是因为它没有从列表中指定项目 ID）

我也试过这个：

```
String s =  (((TextView) mListView.getItemAtPosition(myItemInt)).
                          findViewById(R.id.myNr)).toString(); 
```

没用！有什么建议么？

这是在以下功能下实现的：

```
mListView.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> myAdapter, View myView, 
                        int myItemInt, long mylng) {

             // String s statements

} 
```

**编辑：**

这是完整的代码：

```
 mListView_myentries.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> myAdapter, View myView, 
                        int myItemInt, long mylng) {

                    String workRequestSelected = (String) ((TextView) mListView_myentries.findViewById(R.id.work_request)).getText();
                    String activitySelected = (String) ((TextView) mListView_myentries.findViewById(R.id.activity)).getText();
                    String statusSelected = (String) ((TextView) mListView_myentries.findViewById(R.id.status)).getText();
                    String workRequestDescSelected = (String) ((TextView) mListView_myentries.findViewById(R.id.desc)).getText();
                    String actualHoursString = (String) ((TextView) mListView_myentries.findViewById(R.id.actual_hours)).getText();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:39:40.097

试试下面的代码

```
mListView.setOnItemClickListener(new OnItemClickListener() {
public void onItemClick(AdapterView<?> myAdapter, View myView,int myItemInt, long mylng) {
             String s =(String) ((TextView) myView.findViewById(R.id.myNr)).getText();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T19:55:02.623

这对我来说很完美，但是当我直接调用我的 listContacts(listview) 时，它总是给我第一条记录，但是当我调用传递给我的视图时，它就像一个魅力。

```
public void onItemClick(AdapterView<?> parent, View view, int position,
        long id) {
    String item = (((TextView)view.findViewById(R.id.txtVwConID)).getText().toString());
    Toast.makeText(getApplicationContext(), "you selected: " + item, Toast.LENGTH_SHORT).show(); 
```

如果您对我的代码有疑问，请在此处发布更多信息

# tsql - TSQL合并插入重复

> ID：11251581
> 
> 赞同：2
> 
> 时间：2012-06-28T19:30:22.533
> 
> 标签：tsql, insert, merge, duplicates

我有一个具有重复电子邮件地址的表，我需要将其中一个与其他两个字段一起插入到一个临时表中。这里有很多例子，但我可以让其中任何一个工作，

我最终调查了 MERGE 我得到了相同的结果。所有的记录都被插入我迷路了。我尝试了许多不同的样本，但它总是插入所有记录。我回去确保电子邮件地址真的是骗子，他们是......下面是我现在......

```
MERGE #EmailTable2 AS Target
USING (SELECT EMAIL, NAME, JOB_TITLE FROM b2b_cmas_list$ WHERE EMAIL IS NOT NULL) AS Source
ON (Target.EMAIL = Source.EMAIL)
 WHEN NOT MATCHED BY TARGET THEN
    INSERT (EMAIL, NAME, JOB_TITLE)
    VALUES (Source.EMAIL, Source.NAME, Source.JOB_TITLE)

OUTPUT $action, inserted.*, deleted.*; 
```

因此，任何有助于正确解决此问题的帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:41:34.123

这不起作用，因为 SQL 不知道要选择包含相同电子邮件的两行中的哪一行。我的意思是：如果 EMAIL 相同，那么（NAME 和 JOB_TITLE）对中的哪一个是重要的，哪一个可以丢弃？

一些提示：

1.  如果选择哪个项目并不重要，只需通过 EMAIL 选择 MAX(NAME) 和 MAX(JOB_TITLE) 进行分组，即

    按 EMAIL 从 b2b_cmas_list$ 组中选择 EMAIL、max(NAME)、max(JOB_TITLE)

    但是请注意，这可能会破坏 NAME-JOB_TITLE 对（因为选择了 max）。

2.  尝试使用 ROW_NUMBER() OVER() 任意选择每组中的第一行。

3.  使用 CURSOR 遍历行并跳过重复项。

4.  使用 .NET CLR 聚合来连接同一电子邮件的名称和职位。

还有一点注意你的 MERGE 声明。这没有按预期工作，因为 SQL 一次检查所有行，而不是逐行检查。因此，如果一封电子邮件不是这样。IE。"a@a.com" 被插入，然后另一个不会。仅当“a@a.com”位于语句开头的表格中时才重要。

# ms-word - VSTO 选择和修改现有有序列表

> ID：11251584
> 
> 赞同：2
> 
> 时间：2012-06-28T19:30:29.243
> 
> 标签：ms-word, vsto, office-interop

我的 Word 文档中有一个有序列表，我想在元素 2 和 3 之间添加一个新元素。最简单的方法可能是获取第二个元素末尾的位置，但我没有知道如何做到这一点。有谁知道如何做到这一点？

非常感谢所有帮助，我总是接受答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T07:13:14.880

给定一个只包含一个简单 ListParagraph 的文档：

1.  清单项目 1
2.  清单项目 2
3.  清单项目 3

如果要在 2 到 3 之间插入一个列表项，可以获取第二个列表段落并添加一个段落：

```
 MSWord.Application app = (MSWord.Application)System.Runtime.InteropServices.Marshal.GetActiveObject("Word.Application");
  MSWord.Document doc = app.ActiveDocument;

  doc.ListParagraphs[2].Range.Paragraphs.Add(); 
```

这将插入一个新的第三个列表段落：

1.  清单项目 1
2.  清单项目 2
3.  ---->代码将添加这个
4.  项目清单

# java - 如何在Java中使用一个类的变量？

> ID：11251586
> 
> 赞同：7
> 
> 时间：2012-06-28T19:30:42.857
> 
> 标签：java, class, variables, call

我只是在为即将到来的考试做一些练习，但有一件事我无法理解，那就是使用一个属于一个班级的变量，在另一个班级。

我有一个课程班和一个学生班。Class course 存储所有不同的课程，我只想在学生类中使用课程的名称。

这是我的课程：

```
public class Course extends Student
{
    // instance variables - replace the example below with your own
    private Award courseAward;
    private String courseCode;
    public String courseTitle;
    private String courseLeader;
    private int courseDuration;
    private boolean courseSandwich;

    /**
     * Constructor for objects of class Course
     */
    public Course(String code, String title, Award award, String leader, int duration, boolean sandwich)
    {
        courseCode = code;
        courseTitle = title;
        courseAward = award;
        courseLeader = leader;
        courseDuration = duration;
        courseSandwich = sandwich;

    }

} 
```

这是学生：

```
public class Student 
{
    // instance variables - replace the example below with your own
    private int studentNumber;
    private String studentName;
    private int studentPhone;
    private String studentCourse;

    /**
     * Constructor for objects of class Student
     */
    public Student(int number, String name, int phone)
    {
        studentNumber = number;
        studentName = name;
        studentPhone = phone;
        studentCourse = courseTitle;
    }

} 
```

我在课程中使用“**扩展”是否正确？**或者这是不必要的？

在我的学生构造函数中，我试图将课程课程中的“课程标题”分配给变量“学生课程”。但我根本无法弄清楚如何做到这一点！

提前感谢您的帮助，我期待您的回音！

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T19:36:00.287

> 我在课程中使用“扩展”是否正确？或者这是不必要的？

不幸的是，如果您想知道您的继承是否正确，请将**extends**替换为**is-a**。课程是学生？答案是不。这意味着你`Course`不应该扩展`Student`

一个学生可以参加一个`Course`，因此`Student`该类可以有一个类型的成员变量`Course`。如果您的模型指定（一个学生可以参加几门课程），您可以定义一个课程列表。

这是一个示例代码：

```
public class Student{
    //....
    private Course course;
    //...
    public void attendCourse(Course course){
       this.course = course;
    }
    public Course getCourse(){
       return course;
    }
} 
```

现在，您可以拥有以下内容：

```
Student bob = new Student(...);
Course course = new Course(...);
bob.attendCourse(course); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T19:34:35.200

我假设 Course**不是**Student，因此这些类之间的继承可能是一个坏主意。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-28T19:34:48.627

您必须将它们公开。

更好的方法是将它们保持私有，并为该变量编写一个公共 getter。例如：

```
public Award getCourseAward(){
         return this.courseAward;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T19:35:26.720

`Course`不应延长`Student`。如果要访问 的`courseTitle`字段`Course`，则需要将`Course`对象的引用传递给`Student`，然后执行 course.CourseTitle。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-28T19:35:45.593

您不能从另一个类访问一个类的私有属性，这是 OOP 的主要原则之一：封装。您必须提供对这些属性的访问方法，您希望在类之外发布。常见的方法是 setter/getters - 如果你想让你的类不可变，那么只有 getters。看这里：[http ://en.wikipedia.org/wiki/Mutator_method#Java_example](http://en.wikipedia.org/wiki/Mutator_method#Java_example)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-28T19:38:45.550

任意扩展类是没有意义的。学生不是课程，反之亦然，因此您不能像那样扩展它们。

你需要做的是：

首先创建一个课程：

```
 Course aCourse = new Course(..); 
```

创建学生：

```
 Student aStudent = new Student(..); 
```

将课程分配给学生：

```
 aStudent.setCourse(aCourse.title); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-28T19:39:40.610

**扩展** `Student`，`Couse`因为它们不是同一类。当专攻一个更通用的（在某种意义上）一个类时，就会用另一个类扩展一个类。解决方案是作为构造函数的参数
传递`courseTitle``Student`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-06-28T19:39:56.133

这里应该有 3 个单独的对象，一个课程、一个学生和一个注册。一个注册将一个学生连接到一个课程，一个课程有很多学生，一个学生可以注册很多课程。它们都不应该相互扩展。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-28T19:40:43.153

也许您不需要将课程名称添加到学生。我要做的是将学生添加到课程中的一些数据结构中。这样更简洁，减少了 Course 和 Student 之间的耦合。这也将允许您让学生参加不止一门课程。例如：

```
public class Course extends Student{
    private Award courseAward;
    private String courseCode;
    public String courseTitle;
    private Student courseLeader;//change to a student Object
    private int courseDuration;
    private boolean courseSandwich;
    private Set<Student> students;//have course hold a collection of students

/**
 * Constructor for objects of class Course
 */
public Course(String code, String title, Award award, Student leader, int duration, boolean sandwich){
    courseCode = code;
    courseTitle = title;
    courseAward = award;
    courseLeader = leader;
    courseDuration = duration;
    courseSandwich = sandwich;
    this.students=new HashSet<Student>();
}

public boolean addStudent(Student student){
    return students.add(student);
}

public Set<Student> getStudents(){
    return students;
} 
```

}

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-06-28T19:41:03.847

第一的，

您在 Course 类中扩展 Student 类，这意味着，学生类获取所有 coruse 类属性。因此，学生类没有 courseTitle 属性。

其次，是的，这是不必要的 - 您需要执行以下操作：

```
public class Course
{
    private Award courseAward;
    private String courseCode;
    public String courseTitle;
    private String courseLeader;
    private int courseDuration;
    private boolean courseSandwich;

    public Course(String code, String title, Award award, String leader, int duration, boolean sandwich)
    {
        courseCode = code;
        courseTitle = title;
        courseAward = award;
        courseLeader = leader;
        courseDuration = duration;
        courseSandwich = sandwich;

    }

}

public class Student 
{
    private int studentNumber;
    private String studentName;
    private int studentPhone;

    // This is where you keep the course object associated to student
    public Course studentCourse;

    public Student(int number, String name, int phone, Course course)
    {
        studentNumber = number;
        studentName = name;
        studentPhone = phone;
        studentCourse = course;
    }  
} 
```

示例用法如下所示：

```
Course course = new Course("ASD", "TITLE", null, "ME", 50, true);   
Student student = new Student(1, "JOHN", "5551234", course); 
```

然后，通过以下方式从学生那里获取您需要的课程信息：

```
student.studentCourse.courseTitle; 
```

从现在起 student.studentCourse 将是一个具有所有属性的课程对象。

干杯，

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-06-28T22:05:55.400

如前所述，请远离“扩展”。一般来说，除非“is-a”关系有意义，否则不应使用它。

您可能应该为 Course 类的方法提供 getter：

```
public class Course {
   ...
   public String getTitle() {
       return title;
   }
} 
```

然后，如果 Student 类需要它，它会以某种方式获取课程（这取决于您的设计），并调用 getter：

```
public class Student {
   private Set<Course> courses = new HashSet<Course>();

   public void attendCourse(Course course) {
       courses.add(course);
   }

   public void printCourses(PrintStream stream) {
       for (Course course : courses) {
           stream.println(course.getTitle());
       }
   }
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-05-27T11:07:25.897

在下面找到您的问题的解决方案，如果您想在您的机器上检查以下代码，请创建一个名为 Test.java 的文件并粘贴以下代码：

包com；

```
class Course
{
    private Award courseAward;
    private String courseCode;
    public String courseTitle;
    private String courseLeader;
    private int courseDuration;
    private boolean courseSandwich;

    public Course(String code, String title, Award award, String leader, int duration, boolean sandwich)
    {
        courseAward = award;
        courseCode = code;
        courseTitle = title;
        courseLeader = leader;
        courseDuration = duration;
        courseSandwich = sandwich;

    }

    public Award getCourseAward() {
        return courseAward;
    }

    public void setCourseAward(Award courseAward) {
        this.courseAward = courseAward;
    }

    public String getCourseCode() {
        return courseCode;
    }

    public void setCourseCode(String courseCode) {
        this.courseCode = courseCode;
    }

    public String getCourseTitle() {
        return courseTitle;
    }

    public void setCourseTitle(String courseTitle) {
        this.courseTitle = courseTitle;
    }

    public String getCourseLeader() {
        return courseLeader;
    }

    public void setCourseLeader(String courseLeader) {
        this.courseLeader = courseLeader;
    }

    public int getCourseDuration() {
        return courseDuration;
    }

    public void setCourseDuration(int courseDuration) {
        this.courseDuration = courseDuration;
    }

    public boolean isCourseSandwich() {
        return courseSandwich;
    }

    public void setCourseSandwich(boolean courseSandwich) {
        this.courseSandwich = courseSandwich;
    }
}

class Student 
{
    private int studentNumber;
    private String studentName;
    private int studentPhone;
    private Course studentCourse;
    /**
     * Constructor for objects of class Student
     */
    public Student(int number, String name, int phone, Course course)
    {
        studentNumber = number;
        studentName = name;
        studentPhone = phone;
        studentCourse = course;
    }

    public int getStudentNumber() {
        return studentNumber;
    }
    public void setStudentNumber(int studentNumber) {
        this.studentNumber = studentNumber;
    }
    public String getStudentName() {
        return studentName;
    }
    public void setStudentName(String studentName) {
        this.studentName = studentName;
    }
    public int getStudentPhone() {
        return studentPhone;
    }
    public void setStudentPhone(int studentPhone) {
        this.studentPhone = studentPhone;
    }
    public Course getStudentCourse() {
        return studentCourse;
    }
    public void setStudentCourse(Course studentCourse) {
        this.studentCourse = studentCourse;
    }
}

class Award{
    private long awardId;
    private String awardName;

    Award(long awardId, String awardName){
        this.awardId = awardId;
        this.awardName = awardName;
    }

    public long getAwardId() {
        return awardId;
    }

    public void setAwardId(long awardId) {
        this.awardId = awardId;
    }

    public String getAwardName() {
        return awardName;
    }

    public void setAwardName(String awardName) {
        this.awardName = awardName;
    }
}

public class Test{
    public static void main(String ar[]){

        // use your all classes here

    }
} 
```

# gstreamer - 网络流 GStreamer C++

> ID：11251587
> 
> 赞同：1
> 
> 时间：2012-06-28T19:30:46.933
> 
> 标签：gstreamer, networkstream

我正在使用 GStreamer 获取网络摄像头提要，通过 OpenCV 对其进行编辑，然后将其流式传输到网络。我正在使用的管道没有抛出任何异常或错误，但它也没有流式传输。我一点也不知道可能出了什么问题。

这是代码示例。

```
res = sprintf(pipeline2_str, "appsrc name=\"%s\" ! ffmpegcolorspace ! x264enc ! rtph264pay ! queue ! udpsink port=9001", app_src_name); 
```

appsrc 名称是从 OpenCV 回来的。

# xpath - 使用 Selenium 和 XPath，将 By 元素转换为字符串

> ID：11251589
> 
> 赞同：3
> 
> 时间：2012-06-28T19:30:51.473
> 
> 标签：xpath, selenium

我有一个接受 By 元素的函数，By by = By.xpath("xpathString")。在我的方法中，我使用以下语句来查找另一个 WebElement

```
findElement(by).findElements(By.xpath(anotherXPathString)) 
```

有谁知道一种方法来操作第一个，以便我可以将它们组合起来，以便我可以使用一个 findElement 函数？我查看了 Selenium By 类页面，它无法将 By 转换为 String 或组合到不同的 By 元素。我的目标是让它看起来像

```
By newby = (however we will combine the two by statements);
findElements(newby); 
```

或者

```
String newXPath = (however we convert the by to a string) + anotherXPathString;
findElements(By.xpath(newXPath)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T02:35:53.510

你知道 ByChained 类吗？

您可以通过 ByChained 使用来总结 By chain。

见：javadoc（[http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/pagefactory/ByChained.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/pagefactory/ByChained.html)）

希望能帮助到你。

# apache - 具有多个应用程序的tomcat DNS转发

> ID：11251591
> 
> 赞同：0
> 
> 时间：2012-06-28T19:30:55.543
> 
> 标签：apache, tomcat, dns, forwarding, cloaking

我最近在 tomcat 6 上安装了业务对象软件。我有 2 个域 - domain1 和 domain2。该软件允许通过以下 URL 访问其两个应用程序：

xxxxxhttp://myservername.domain1:8080/BO/APP1 和 xxxxhttp://myservername.domain1:8080/BO/APP2

而不是这些网址，我希望最终用户通过[http://bobj.domain2.com:8080/BO/APP1](http://bobj.domain2.com:8080/BO/APP1)和[http://bobj.domain2.com:8080/BO/APP2](http://bobj.domain2.com:8080/BO/APP2)之类的方式访问这些应用程序。

我无法弄清楚如何做到这一点。我研究了 http 重定向选项（不好，因为目标地址显示在地址栏中），域转发（不确定它是否适用于多个应用程序并从一个域转发到另一个域）以及使用 apache tomcat mod_jk 通过使用虚拟主机（不确定从一个域转发到另一个域中的子域时是否可能）？

专家，请告知我最好的选择以及如何完成。

谢谢一堆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T00:35:54.830

bobj.domain2.com 必须有一个 DNS 条目以指向您的 IP 地址。然后向 Apache 添加一个 ServerAlias 指令应该可以解决问题。您还可以使用通配符，例如 *.domain2.com 的 DNS 条目和 ServerAlias *.domain2.com。

# sharepoint - sharepoint 对文档历史使用什么策略？

> ID：11251592
> 
> 赞同：0
> 
> 时间：2012-06-28T19:31:09.713
> 
> 标签：sharepoint

使用具有不同版本的相同文档与保存不同文档相比，是否可以更好地利用可用存储空间并更快地访问网络？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:08:50.817

性能方面，版本控制将带来一些性能优势。这是因为任何搜索引擎要索引的数据都会减少。除此之外，我看不到性能方面的任何差异。

存储空间不应受到显着影响。

我的建议是，对未成年人使用版本控制。

# javascript - 传递给 MVC 控制器操作的 URL 字符串参数以 null 形式到达

> ID：11251596
> 
> 赞同：2
> 
> 时间：2012-06-28T19:32:07.180
> 
> 标签：javascript, asp.net-mvc, string, controller, null

有控制器：

```
public class MyController : Controller
{
    [HttpGet]
    public ActionResult MyAction(int iMode, string strSearch)
    {
        return View();
    }
} 
```

在我看来，我有一个 id=center 的 div

我在javascript中执行以下代码

```
url = "/MyController/MyAction?iMode=7&amp;strSearch=as";
$('#center').load(url); 
```

当调试器在我的操作中的第一行断点时，iMode 变量显示正确的值 7，strSearch 参数到达为空。

任何帮助/建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T19:39:16.933

只需使用与号而不是`&amp;`

`url = "/MyController/MyAction?iMode=7&strSearch=as";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T14:43:41.727

感谢 Innatepirate 的提示。浪费了足够的时间试图弄清楚为什么控制器得到空值。`&amp;`用＆符替换就可以了。顺便说一句，我正在做简单的古老的 window.location.href = link 并且仍然有问题。可能是它的 MVC 解析和路由搞砸了。

# php - 获得意外的 xpath 结果

> ID：11251603
> 
> 赞同：0
> 
> 时间：2012-06-28T19:32:35.190
> 
> 标签：php, xml, xpath

这是源xml：[xml](http://testvipd7.scene7.com/is/agm/papermusepress/HOL_12_F_green?&fmt=fxgraw)

这是 Adob​​e 制作的 fxg 文件的 xml。FXG 文档是有效的 xml，它基本上包含了可以编辑的文档的所有信息。此特定问题与可以在 FXG 中更改的文本有关，以便内容可以更改。

我正在尝试获取该元素中具有`s7:elementID`使用 xpath 相对位置的属性的所有 RichText 元素和属性。

源 XML 总共只有三个`RichText`元素，其中只有两个具有`s7:elementID`

```
<?php

$url = "http://testvipd7.scene7.com/is/agm/papermusepress/HOL_12_F_green?&fmt=fxgraw";    
$xml = simplexml_load_file($url);       
$xml->registerXPathNamespace('default', 'http://ns.adobe.com/fxg/2008');
$xml->registerXPathNamespace('s7', 'http://ns.adobe.com/S7FXG/2008');
$textNode = $xml->xpath("//default:RichText/@s7:elementID");

print("<pre>".print_r($textNode,true)."</pre>");

?> 
```

在另一个问题的帮助下，我走了这么远。但是返回的数组不是我所期望的。像我一样设置 xpath，我希望它选择所有具有 的`RichText`元素，`s7:elementID`以及该元素的其他属性。但是，它没有获取这些元素的任何其他属性。这是它的输出：

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [elementID] => smalltext
                )

        )

    [1] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [elementID] => largetext
                )

        )

) 
```

如果我采用完全相同的 php 但像这样更改 xpath：

```
$textNode = $xml->xpath("//default:RichText"); 
```

我得到这个数组结果：

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [x] => 278.418
                    [y] => 115.542
                    [columnGap] => 18
                    [columnCount] => 1
                    [textAlign] => left
                    [fontFamily] => Trade Gothic LT Pro Bold Cn
                    [fontSize] => 11
                    [color] => #518269
                    [whiteSpaceCollapse] => preserve
                    [width] => 212.582
                    [height] => 33
                )

            [content] => SimpleXMLElement Object
                (
                    [p] => Array
                        (
                            [0] => SimpleXMLElement Object
                                (
                                    [span] => Scott, Anna, and Conner
                                )

                            [1] => SimpleXMLElement Object
                                (
                                    [span] => and our little one on the way
                                )

                        )

                )

        )

    [1] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [x] => 278.998
                    [y] => 86.7168
                    [columnGap] => 18
                    [columnCount] => 1
                    [textAlign] => left
                    [fontFamily] => Bootstrap
                    [fontSize] => 19
                    [color] => #518269
                    [whiteSpaceCollapse] => preserve
                    [trackingRight] => 4%
                    [width] => 240
                    [height] => 29
                )

            [content] => SimpleXMLElement Object
                (
                    [p] => SimpleXMLElement Object
                        (
                            [span] => THE JOHNSONS
                        )

                )

        )

    [2] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [x] => 278.418
                    [y] => 77.2373
                    [columnGap] => 0
                    [columnCount] => 1
                    [textAlign] => left
                    [fontFamily] => Trade Gothic LT Pro Bold Cn
                    [fontSize] => 11
                    [color] => #518269
                    [whiteSpaceCollapse] => preserve
                )

            [content] => SimpleXMLElement Object
                (
                    [p] => SimpleXMLElement Object
                        (
                            [span] => Array
                                (
                                    [0] => W
                                    [1] => ishing you the best this season.
                                )

                        )

                )

        )

) 
```

如果您注意到，前两个数组项甚至没有 的信息`s7:elementID`，但它们是应该的两个。第三个没有`s7:elementID`设计。

谁能解释为什么我得到这些意想不到的数组结果，显示了一些属性，而另一些则没有？

**更新**

Per dusan，我将 php 更新为：

`$textNode = $xml->xpath("//default:RichText[@s7:elementID]");`

现在数组只返回没有前缀的元素的属性。我需要所有属性，前缀而不是。

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [x] => 278.418
                    [y] => 115.542
                    [columnGap] => 18
                    [columnCount] => 1
                    [textAlign] => left
                    [fontFamily] => Trade Gothic LT Pro Bold Cn
                    [fontSize] => 11
                    [color] => #518269
                    [whiteSpaceCollapse] => preserve
                    [width] => 212.582
                    [height] => 33
                )

            [content] => SimpleXMLElement Object
                (
                    [p] => Array
                        (
                            [0] => SimpleXMLElement Object
                                (
                                    [span] => Scott, Anna, and Conner
                                )

                            [1] => SimpleXMLElement Object
                                (
                                    [span] => and our little one on the way
                                )

                        )

                )

        )

    [1] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [x] => 278.998
                    [y] => 86.7168
                    [columnGap] => 18
                    [columnCount] => 1
                    [textAlign] => left
                    [fontFamily] => Bootstrap
                    [fontSize] => 19
                    [color] => #518269
                    [whiteSpaceCollapse] => preserve
                    [trackingRight] => 4%
                    [width] => 240
                    [height] => 29
                )

            [content] => SimpleXMLElement Object
                (
                    [p] => SimpleXMLElement Object
                        (
                            [span] => THE JOHNSONS
                        )

                )

        )

) 
```

**更新 2**

将 php 更改为此似乎可以获得所有属性，包括默认属性和`s7`前缀：

```
<?php
$url = "http://testvipd7.scene7.com/is/agm/papermusepress/HOL_12_F_green?&fmt=fxgraw";    
$xml = simplexml_load_file($url);       
$xml->registerXPathNamespace('default', 'http://ns.adobe.com/fxg/2008');
$xml->registerXPathNamespace('s7', 'http://ns.adobe.com/S7FXG/2008');
$textNode = $xml->xpath("//default:RichText[@s7:elementID]"); // //default:RichText[@s7:elementID]/@*

function pr($var) { print '<pre>'; print_r($var); print '</pre>'; }

foreach($textNode as $node){
    pr($node->attributes('http://ns.adobe.com/S7FXG/2008'));
    pr($node->attributes());
}
?> 
```

和 XML 结果：

```
SimpleXMLElement Object
(
    [@attributes] => Array
        (
            [caps] => none
            [colorName] => 
            [colorValue] => #518269
            [colorspace] => rgb
            [elementID] => smalltext
            [fill] => true
            [fillOverprint] => false
            [firstBaselineOffset] => ascent
            [joints] => miter
            [maxFontSize] => 11
            [miterLimit] => 4
            [referencePoint] => inherit
            [rowCount] => 1
            [rowGap] => 18
            [rowMajorOrder] => true
            [stroke] => false
            [strokeOverprint] => false
            [warpBend] => 0.5
            [warpDirection] => horizontal
            [warpHorizontalDistortion] => 0
            [warpStyle] => none
            [warpVerticalDistortion] => 0
            [weight] => 1
        )

)
SimpleXMLElement Object
(
    [@attributes] => Array
        (
            [x] => 278.418
            [y] => 115.542
            [columnGap] => 18
            [columnCount] => 1
            [textAlign] => left
            [fontFamily] => Trade Gothic LT Pro Bold Cn
            [fontSize] => 11
            [color] => #518269
            [whiteSpaceCollapse] => preserve
            [width] => 212.582
            [height] => 33
        )

)
SimpleXMLElement Object
(
    [@attributes] => Array
        (
            [caps] => none
            [colorName] => 
            [colorValue] => #518269
            [colorspace] => rgb
            [elementID] => largetext
            [fill] => true
            [fillOverprint] => false
            [firstBaselineOffset] => ascent
            [joints] => miter
            [maxFontSize] => 19
            [miterLimit] => 4
            [referencePoint] => inherit
            [rowCount] => 1
            [rowGap] => 18
            [rowMajorOrder] => true
            [stroke] => false
            [strokeOverprint] => false
            [warpBend] => 0.5
            [warpDirection] => horizontal
            [warpHorizontalDistortion] => 0
            [warpStyle] => none
            [warpVerticalDistortion] => 0
            [weight] => 1
        )

)
SimpleXMLElement Object
(
    [@attributes] => Array
        (
            [x] => 278.998
            [y] => 86.7168
            [columnGap] => 18
            [columnCount] => 1
            [textAlign] => left
            [fontFamily] => Bootstrap
            [fontSize] => 19
            [color] => #518269
            [whiteSpaceCollapse] => preserve
            [trackingRight] => 4%
            [width] => 240
            [height] => 29
        )

) 
```

现在它能够检索`RichText`元素的所有属性。如何将某些属性存储为特定变量？例如，如何为`s7:elementID`和`fontSize`属性设置变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:17:22.273

随着`//default:RichText/@s7:elementID`您选择`elementID`属性，而不是`RichText`标签。

用这个：

```
$textNode = $xml->xpath("//default:RichText[@s7:elementID]"); 
```

**更新：** SimpleXMLElement [::attributes 文档](http://www.php.net/manual/en/simplexmlelement.attributes.php)说：

> SimpleXML 制定了一个规则，为大多数方法添加迭代属性。不能使用 var_dump() 或其他任何可以检查对象的东西来查看它们。

因此`print_r`，没有向您显示所有信息。尝试使用它们的命名空间获取属性：

```
foreach($textNode as $node){
    var_dump($node->attributes('http://ns.adobe.com/S7FXG/2008'));
} 
```

# xpages - 如何允许使用日历按钮选择日期，但禁止在 Dojo 日期文本框中输入日期？

> ID：11251604
> 
> 赞同：1
> 
> 时间：2012-06-28T19:32:36.250
> 
> 标签：xpages

如何允许使用日历按钮选择日期，但禁止在 Dojo 日期文本框中输入日期？

有没有办法做到这一点？如果有怎么办？

基本上我希望用户能够使用日历按钮选择日期，但不允许他们手动输入日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T03:22:51.347

创建客户端 onfocus 事件：

```
thisEvent.target.blur(); 
```

这不会阻止字段的值通过日期助手以编程方式填充，但如果他们尝试手动聚焦（即单击或 Tab 进入）该字段，它将再次将它们踢出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T03:40:13.197

我在日期时间字段上尝试了[showReadonlyAsDisabled](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/showReadonlyAsDisabled_Show_disabled_control_for_readonly_ddxl853)的一个新属性。但它最终创建了一个禁用字段，但令人惊讶的是，它在编辑框的情况下创建了一个只读字段。因此，我必须在加载页面时[通过 javascript 设置 readonly 属性](http://naveegator.blogspot.in/2011/12/read-only-edit-box-in-xpage.html)来创建解决方法。下面是代码片段：

```
<xp:inputText id="dateTimeField">
    <xp:dateTimeHelper id="dateTimeHelper1"></xp:dateTimeHelper>
    <xp:this.converter>
        <xp:convertDateTime type="date"></xp:convertDateTime>
    </xp:this.converter>
</xp:inputText>
<xp:br></xp:br>
<xp:scriptBlock>
    <xp:this.value><![CDATA[XSP.addOnLoad(
    function() {
        document.getElementById("#{id:dateTimeField}").readOnly = true;
    }
);]]></xp:this.value>
</xp:scriptBlock> 
```

我不知道这是否是最佳解决方案，但它有效！

# ruby - 在 CentOS 中使用 RVM 和最新 Ruby 安装乘客会导致此错误

> ID：11251606
> 
> 赞同：0
> 
> 时间：2012-06-28T19:32:48.960
> 
> 标签：ruby, apache, centos, rvm, passenger

我正在尝试安装passenger-install-apache2-module，但收到此错误：

```
[root@devserver redmine]# passenger-install-apache2-module
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/yaml.rb:56:in `<top (required)>':
It seems your ruby installation is missing psych (for YAML output).
To eliminate this warning, please install libyaml and reinstall your ruby.
/usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/resolver.rb:287:in `resolve': Could not find gem 'rails (= 3.2.6) ruby' in the gems available on this machine. (Bundler::GemNotFound)
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/resolver.rb:161:in `start'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/resolver.rb:128:in `block in resolve'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/resolver.rb:127:in `catch'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/resolver.rb:127:in `resolve'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/definition.rb:192:in `resolve'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/definition.rb:127:in `specs'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.4/lib/bundler/environment.rb:27:in `specs'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.3/lib/rubygems-bundler/noexec.rb:41:in `candidate?'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.3/lib/rubygems-bundler/noexec.rb:60:in `setup'
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rubygems-bundler-1.0.3/lib/rubygems-bundler/noexec.rb:75:in `<top (required)>'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:9:in `<main>' 
```

我想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T00:11:22.510

看起来像`passenger`在您的 中`Gemfile`，您可以通过以下几种方式修复它：

1.  跑`bundle install`
2.  跑`NOEXEC=0 passenger-install-apache2-module`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T19:54:58.560

在 Rails 项目文件夹中运行乘客安装 apache2 模块似乎是不可能的。上一个文件夹，然后重试。-伊里斯

# ruby-on-rails-3 - 这个 rails 语法有什么问题？

> ID：11251609
> 
> 赞同：0
> 
> 时间：2012-06-28T19:33:01.090
> 
> 标签：ruby-on-rails-3

好吧，我讨厌将 SO 仅用作语法检查器，但是对于我的一生，我无法弄清楚为什么会出现此错误

```
where line #8 raised:
unexpected $end, expecting keyword_end 
```

这是有问题的代码：

```
5:   <%= f.input :allele2 %>
6:   <%= f.input :run_date %>
7: 
8:   <%=f.association :gmarkers, :collection => Gmarker.all(:order => 'marker'), :prompt => "Choose a Marker", :label => "Marker" %>
9: 
```

我正在使用 SimpleForm gem，但还不太熟悉（显然！）

蒂亚，--瑞克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:58:15.180

你在`<% end %>`最后一行之后缺少一个，第 8 行。

# android - WiFi Direct (Android 4.0) 与多个 (3+) 设备

> ID：11251610
> 
> 赞同：23
> 
> 时间：2012-06-28T19:33:11.797
> 
> 标签：android, wifi-direct

像这里：[Android WiFi Direct 的自动身份验证](https://stackoverflow.com/questions/9206043/automatic-authentication-for-android-wifi-direct)我想用 Android 设备创建一个移动 ad-hoc Wifi 网络。但与上面的链接问题不同，我想使用自 Android 4.0 以来可用的官方 Android WiFi Direct API。

那么有没有一种方法不仅可以通过 WiFi Direct 连接 2 个设备，还可以连接三个或更多设备？那么消息可以使用中间的几个其他设备从一个设备传递到另一个设备（因此在发送者和接收者之间跨越更大的距离）？

[Wifi Direct 演示](http://developer.android.com/guide/topics/connectivity/wifip2p.html)仅适用于配对两个设备，我找不到其他方法。

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-28T20:18:40.337

> 有没有办法不仅可以通过 WiFi Direct 连接 2 个设备，还可以连接三个或更多设备？

是的，Wi-Fi Direct 规范说明可以创建一对多连接。其中一个设备将充当组所有者（将其视为接入点）。在一些测试中，我已经能够创建一个包含 3 个设备的 Wi-Fi Direct 网络。

由于所有设备都必须在组所有者的范围内，因此您可以确定您的消息将到达第二个客户端。第一个客户 -> 组所有者 -> 第二个客户

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-29T05:48:53.077

是的，没有任何限制。我们已经对 5-6 台设备进行了试验——除此之外，它目前还不能很好地扩展。

这是 JellyBean 上的挂毯视频 - [http://www.youtube.com/watch?v=6emgRvH4mTo&list=UUQmz9albYeqArJvmpmaQpGQ&index=1&feature=plcp](http://www.youtube.com/watch?v=6emgRvH4mTo&list=UUQmz9albYeqArJvmpmaQpGQ&index=1&feature=plcp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-03T19:04:42.623

您可以使用 Java NIO（非阻塞 IO）执行此操作 Wifi Direct 中还有一个选项来创建组，使用该组，组自己将用作服务器并可以广播消息。使用多个客户端和一个服务器，所有设备都可以通过使用组相互通信。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-05-06T15:33:28.563

将另一台设备连接到 p2p 组：在 GO 设备类型上：

```
sudo wpa_cli wps_pbc 
```

在你想加入的新设备上：

```
sudo wpa_cli p2p_connect <GO-MAC-address> pbc join 
```

关注本网站： http: [//processors.wiki.ti.com/index.php/OMAP_Wireless_Connectivity_NLCP_WiFi_Direct_Configuration_Scripts#Connect_in_pbc_.28Push_button_Control.29](http://processors.wiki.ti.com/index.php/OMAP_Wireless_Connectivity_NLCP_WiFi_Direct_Configuration_Scripts#Connect_in_pbc_.28Push_button_Control.29)

# eclipse - 是否有 Eclipse 插件允许两个人同时编辑同一个项目？

> ID：11251615
> 
> 赞同：1
> 
> 时间：2012-06-28T19:33:36.447
> 
> 标签：eclipse, eclipse-plugin

我和一个朋友想从事同一个项目。有没有一种方法可以让我们同时处理同一个项目并将文件存储在 Google Drive 或 Dropbox 上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:37:18.360

你真的想使用版本控制系统，比如[mercurial](http://mercurial.selenic.com)或[git](http://git-scm.com)。两者都有很多托管选项，例如[github](http://github.com)、[bitbucket](http://bitbucket.com)等。

编辑：正如评论中所观察到的，您还可以查看 Subversion 或 CVS。无论哪种方式最适合您的情况。

至于 Eclipse 集成，大多数系统都有解决方案：

*   [http://javaforge.com/project/HGE](http://javaforge.com/project/HGE)用于 Mercurial
*   [http://www.eclipse.org/egit/](http://www.eclipse.org/egit/)用于 Git
*   [http://www.eclipse.org/subversive/](http://www.eclipse.org/subversive/)用于 SVN

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:38:37.913

您可以设置远程 git 服务器或使用 bitbucket 和 egit 进行 eclipse :) 我昨天已经这样做了，效果很好

//还是太慢了：P

# php - 将 Drupal 功能扩展到自定义 PHP 页面

> ID：11251619
> 
> 赞同：0
> 
> 时间：2012-06-28T19:33:56.567
> 
> 标签：php, drupal

我有运行良好的 Drupal 7 站点。我在我的站点的根目录中添加了一个自定义 PHP 页面。我想将 Drupal 应用程序功能扩展到该页面，以便我可以访问不同的 Drupal 类并基本上通过我的页面扩展 Drupal。我需要在页面顶部包含哪些内容才能像在 Drupal 站点中一样访问 Drupal 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:40:34.350

```
define('DRUPAL_ROOT', getcwd());

require_once DRUPAL_ROOT . '/includes/bootstrap.inc';
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);

// Your code here 
```

# command-line - 有没有办法为 Windows 命令列表创建快捷方式？

> ID：11251620
> 
> 赞同：0
> 
> 时间：2012-06-28T19:33:58.897
> 
> 标签：command-line

不太确定这是否是正确的询问方式，但我想知道是否有可能“捆绑/组合”这些命令：

```
cd %webapps%
cls
mvn clean install
copy etc\environment\dev\yao\env.conf.bat webapps-dist\target\classes
yes
cd %jboss%
run.bat -c server -b 0.0.0.0
shutdown.bat -S 
```

进入一个命令，例如：%runserver% 或类似的东西？

另外，当我尝试复制文件时，有没有办法摆脱提示？

每次我重新安装我的应用程序时，我都会这样做，所以快捷方式会很棒。我已经只是复制并粘贴了这些命令，但我很懒，所以我想要更短的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:45:52.223

如果您从同一位置运行这些命令，则可以制作一个批处理文件并只运行该批处理文件。

# asp.net - 日期数据类型为 12:00 am

> ID：11251627
> 
> 赞同：-1
> 
> 时间：2012-06-28T19:34:24.727
> 
> 标签：asp.net, visual-studio-2010, types, sqldatatypes

好的。在 Visual Studio 中，我有一个表格来显示数据的摘要。我所有具有“日期”数据类型的数据都带有我们输入的日期。但是，它们都在日期之后显示 12:00 AM。以下是我将此表绑定到网络表单时的一些示例输出。

编辑删除详细信息 6/20/2012 12:00:00 AM 28
编辑删除详细信息 6/21/2012 12:00:00 AM 11
编辑删除详细信息 6/25/2012 12:00:00 AM 34
编辑删除详细信息 6/ 26/2012 12:00:00 AM 14
编辑删除详细信息 6/27/2012 12:00:00 AM 45
编辑删除详细信息 6/29/2012 12:00:00 AM

我可以将 12:00 AM 固定为输入的时间或当前时间吗？

我不想使用 varchar 或 int 或任何其他数据类型，因为当我们的员工查看我们的数据摘要时，它会按主键对其进行排序。对于其他数据类型，它排序错误。

再次感谢。

我正在使用 Visual Studio 2010，它是一个 C# Web 应用程序和 SLQ Server 2012 Enterprise。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:21:36.940

在您的数据控件中，您将数据绑定到可视元素，您必须添加 dd/MM/yyyy 的 StringFormat

例如，如果您要绑定到 asp.net GridView，则必须设置绑定到 DateTime 类型字段的字段，如下所示：

`<asp:BoundField DataField="MyDateField" DataFormatString="{0:dd/MM/yyyy}" HeaderText="MyDateFieldHeader" SortExpression="MyDateField" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-18T05:27:57.120

在要删除时间的 .aspx 文件中，只需将数据格式化为日期，如下面的代码所示

# jquery - Blueimp Bootstrap 文件上传 - 检测尚未上传的文件

> ID：11251633
> 
> 赞同：2
> 
> 时间：2012-06-28T19:34:36.183
> 
> 标签：jquery, file-upload, twitter-bootstrap, blueimp

我正在使用 blueimp jQuery File Uploader，它工作正常，没有任何问题。但是，我在也提交的页面上使用它，因此我想确保在提交页面之前已上传所有选定的图像。

我从 blueimp wiki 看到，获取有关添加/上传/完成的文件的反馈的方法是通过 bind() 方法，它工作正常。根据 blueimp wiki，各种绑定选项如下：

```
$('#fileupload')
.bind('fileuploadadd', function (e, data) {/* ... */})
.bind('fileuploadsubmit', function (e, data) {/* ... */})
.bind('fileuploadsend', function (e, data) {/* ... */})
.bind('fileuploaddone', function (e, data) {/* ... */})
.bind('fileuploadfail', function (e, data) {/* ... */})
.bind('fileuploadalways', function (e, data) {/* ... */})
.bind('fileuploadprogress', function (e, data) {/* ... */})
.bind('fileuploadprogressall', function (e, data) {/* ... */})
.bind('fileuploadstart', function (e) {/* ... */})
.bind('fileuploadstop', function (e) {/* ... */})
.bind('fileuploadchange', function (e, data) {/* ... */})
.bind('fileuploadpaste', function (e, data) {/* ... */})
.bind('fileuploaddrop', function (e, data) {/* ... */})
.bind('fileuploaddragover', function (e) {/* ... */}); 
```

从这里我可能可以弄清楚何时添加文件以及何时上传文件。但是我无法确定文件在上传之前是否被删除。wiki 建议使用其他绑定，如下所示：

```
Note: Adding additional event listeners via bind method is the preferred option to preserve callback settings by the jQuery File Upload UI version. 
```

但是 wiki 中显示的链接是一个损坏的链接。

有谁知道如何检测文件何时被删除？我是否必须采用不那么优雅的 jQuery 选择器方法，还是有更好的方法？这肯定不是文件上传的罕见用例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T15:11:48.873

如果 wiki 上的链接损坏，请在[https://github.com/blueimp/jQuery-File-Upload/issues上报告问题](https://github.com/blueimp/jQuery-File-Upload/issues)

# text - 如何在 newform.aspx 的两个字段之间插入自定义标签？

> ID：11251635
> 
> 赞同：0
> 
> 时间：2012-06-28T19:34:40.560
> 
> 标签：text

我有一个包含许多字段的表单。我想将 4-5 个字段分组，以便它们可以低于自定义标签。如何创建这个？我对编码的了解非常有限。

我想要如图所示的自定义标签：

[http://i45.tinypic.com/33agm0y.png](http://i45.tinypic.com/33agm0y.png)

我从网上拿起一个编码并插入它，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:10:32.877

首先，创建你的 webusercontrol

WebUserControl1.ascx

这段代码是

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="WebUserControl1.ascx.cs" Inherits="WebApplication1.WebUserControl1" %>
<asp:Label ID="label" runat="server" >
        </asp:Label>
        <table>
            <tr>
                <td>
                </td>
                <td>
                    <asp:TextBox ID="textbox1" runat="server"></asp:TextBox>
                </td>
            </tr>
            <tr>
                <td>

                </td>
                <td>
                    <asp:TextBox ID="textbox2" runat="server"></asp:TextBox>
                </td>

            </tr>
            <tr>
                <td>
                </td>
                <td>
                    <asp:TextBox ID="textbox3" runat="server"></asp:TextBox>
                </td>

            </tr>
            <tr>
                <td>
                </td>
                <td>
                    <asp:TextBox ID="textbox4" runat="server"></asp:TextBox>
                </td>

            </tr>
            <tr>
                <td>
                </td>
                <td>
                    <asp:TextBox ID="textbox5" runat="server"></asp:TextBox>
                </td>

            </tr>
        </table> 
```

为您的用户控件添加此代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication1
{
    public partial class WebUserControl1 : System.Web.UI.UserControl
    {
        public string MyProperty { get; set; }

        protected void Page_Load(object sender, EventArgs e)
        {
            label.Text = MyProperty;
        }
    }
} 
```

其次创建你的aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication1.WebForm1" %>
<%@ Register TagName="test" TagPrefix="uc" Src="~/WebUserControl1.ascx" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

     <uc:test id="uc1" runat="server" MyProperty="Texte1"></uc:test>
     <uc:test id="uc2" runat="server" MyProperty="Texte2"></uc:test>
     <uc:test id="uc3" runat="server" MyProperty="Texte3"></uc:test>
     <uc:test id="uc4" runat="server" MyProperty="Texte4"></uc:test>

    </div>
    </form>
</body>
</html> 
```

# c - 为什么 malloc 真的是不确定的？(Linux/Unix)

> ID：11251639
> 
> 赞同：8
> 
> 时间：2012-06-28T19:34:53.487
> 
> 标签：c, linux-kernel, malloc, non-deterministic

*malloc*不能保证返回 0'ed 内存。传统观点不仅如此，而且内存*malloc*返回的内容实际上[是非确定性的](http://en.wiktionary.org/wiki/non-determinism)，例如[openssl 将它们用于额外的随机性](http://lists.debian.org/debian-security-announce/2008/msg00152.html)。

然而，据我所知，*malloc*建立在*brk/sbrk*之上，它“返回”0'ed内存。**我可以看到为什么*malloc*返回的内容可能是非 0**，例如来自以前*释放*的内存，但为什么它们在“普通”单线程软件中是[不确定的？](http://en.wiktionary.org/wiki/non-determinism)

1.  传统智慧真的是真的吗（假设相同的二进制文件和库）
2.  如果是这样，为什么？

**编辑**有几个人回答解释了为什么内存可以为非0，我已经在上面的问题中解释过。我要问的是为什么使用 malloc 返回的内容的程序可能是不确定的，即为什么它每次运行时都会有不同的行为（假设相同的二进制文件和库）。**非 0 不暗示非确定性行为。**换一种说法：为什么每次运行二进制文件时它都有不同的内容。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T19:38:46.687

Malloc 不*保证*不可预测性……它只是不保证可预测性。

例如，考虑一下

```
 return 0; 
```

是 malloc 的有效实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T19:40:23.450

返回的内存的初始值`malloc`是未指定的，这意味着C和C++语言的规范对可以返回的值没有任何限制。这使得该语言更容易在各种平台上实现。虽然在 Linux`malloc`中使用`brk`和实现可能是真的`sbrk`并且内存应该归零（顺便说一句，我什至不确定这是否一定是真的），在其他平台上，也许是嵌入式平台，没有理由必须如此。例如，嵌入式设备可能不想将内存归零，因为这样做会消耗 CPU 周期，从而消耗功率和时间。此外，为了提高效率，例如，内存分配器可以回收先前已释放的块，而无需先将它们清零。这意味着即使来自操作系统的内存最初被清零，来自的内存`malloc`也不需要。

值是非确定性的传统观点可能是一个很好的观点，因为它迫使您意识到您返回的任何内存都可能包含可能导致程序崩溃的垃圾数据。也就是说，您不应该假设这些值是真正随机的。但是，您应该意识到，返回的值不会神奇地成为您想要的。您有责任正确设置它们。假设这些值是真正随机的是一个非常糟糕的主意，因为根本没有任何迹象表明它们会是随机的。

如果您想要保证清零的内存，请`calloc`改用。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T19:39:51.553

`malloc`定义在许多可以用 C/C++ 编程的系统上，包括许多非 UNIX 系统，以及许多完全没有操作系统的系统。要求`malloc`将内存清零违背了 C 尽可能节省 CPU 的理念。

该标准提供了一个归零校准`calloc`，如果您需要将内存归零，可以使用该校准。但是，如果您打算在获得内存后立即自己初始化内存，则确保将块清零所花费的 CPU 周期是一种浪费；C 标准旨在尽可能地避免这种浪费，通常以牺牲可预测性为代价。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-28T19:40:38.553

返回的内存`malloc`没有归零（或者更确切地说，不*保证*归零），因为它不需要。重用从您自己的进程地址空间或页面池中提取的未初始化内存没有安全风险。你已经知道它在那里，你已经知道它的内容。实际上，内容也没有问题，因为无论如何你都会覆盖它。

顺便说一句，返回的内存在第一次分配`malloc` *时*归零，因为操作系统内核无法承担将一个进程数据提供给另一个进程先前拥有的风险的风险。因此，当操作系统在新页面中出现故障时，它只会提供已归零的页面。然而，这与`malloc`.

（有点题外话：你提到的 Debian 安全问题比使用未初始化的内存来实现随机性有更多的含义。一个不熟悉代码内部工作并且不知道确切含义的打包者修补了几个地方Valgrind 报告的，大概是出于好意，但结果却是灾难性的。其中有“来自未初始化记忆的随机事件”，但它远不是最严重的。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-28T20:22:48.000

我认为它是非确定性的假设是完全错误的，特别是当您要求非线程上下文时。（由于调度 alea 在线程上下文中，您可能会有一些不确定性）。

试试看。创建一个顺序的、确定性的应用程序

*   做了一大堆分配
*   用某种模式填充内存，例如用计数器的值填充它
*   释放这些分配的每一秒
*   新分配相同的金额
*   运行这些新分配并注册文件中第一个字节的值（作为每行一个文本数字）

运行该程序两次并将结果注册到两个不同的文件中。我的想法是这些文件将是相同的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-28T19:39:04.610

即使在“正常”的单线程程序中，内存也会被多次释放和重新分配。Malloc 会返回给你之前使用过的内存。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-28T19:39:27.937

甚至单线程代码也可以先执行 malloc 然后释放然后 malloc 并取回以前使用的非零内存。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-28T19:39:53.893

不保证`brk`/`sbrk`返回 0ed-out 数据；这是一个实现细节。对于操作系统来说，这样做通常是一个*好主意*，以减少来自一个进程的敏感信息进入另一个进程的可能性，但规范中没有任何内容表明会出现这种情况。

此外，在/`malloc`之上实现的事实也是依赖于实现的，甚至可以根据分配的大小而变化；例如，Linux 上的大分配传统上使用/dev/zero 来代替。`brk``sbrk``mmap`

基本上，您既不能依赖`malloc()`包含垃圾的 ed 区域，也不能依赖它全为 0，并且任何程序都不应该假设一种或另一种方式。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-28T19:56:33.547

我能想到的最简单的答案是这样的：

如果我正在寻找墙壁空间来画壁画，我不在乎它是白色的还是被旧涂鸦覆盖的，因为我要给它打底并在上面画画。我只关心我是否有足够的平方英尺来容纳这幅画，我关心的是我没有在属于别人的区域上绘画。

malloc就是这么想的。每次进程结束时将内存归零将浪费计算量。这就像每次完成绘画时都要重新涂刷墙壁。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-06-28T20:22:24.730

计算机内存中有一个完整的程序生态系统，您无法控制 malloc 和 free 发生的顺序。

想象一下，当您第一次运行您的应用程序和 malloc() 时，它会为您提供一个带有一些垃圾的地址。然后您的程序关闭，您的操作系统将该区域标记为空闲。另一个程序将它与另一个 malloc() 一起使用，写了很多东西然后离开。你再次运行你的程序，它可能会发生 malloc() 给你相同的地址，但现在那里有不同的垃圾，前一个程序可能已经写了。

我实际上不知道 malloc() 在任何系统中的实现，也不知道它是否实现了任何类型的安全措施（比如随机化返回的地址），但我不这么认为。

这是非常确定的。

# ruby-on-rails - 提交“记住我”复选框

> ID：11251642
> 
> 赞同：2
> 
> 时间：2012-06-28T19:35:12.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我目前正在使用 Rails 的“设计”插件来处理登录/身份验证。我正在使用一个非常基本的`form_for`标签来处理登录表单。这是代码：

```
<div class="well-outer splash-signin-block">
  <div class="well-inner">
    <h2>Sign in</h2>
    <div>
      <%= form_for(resource, as: resource_name, url: user_session_path, html: {
        class: "form-inline"
      }) do |f| %>
        <p><%= f.text_field :email, placeholder: "Email", autofocus: true %></p>
        <p><%= f.password_field :password, placeholder: "Password" %></p>
        <p>
          <%= f.submit 'Sign in', class:"btn btn-primary btn-large" %>
          <%= f.check_box :remember_me, class: "checkbox" %>
          <%= f.label :remember_me %>
        </p>
      <% end %>
    </div>
  </div>
</div> 
```

但是，我想将“记住我”复选框更改为一个按钮。用户体验将是他们可以单击“登录”（默认操作），也可以单击“记住我”以持续登录。

在幕后，我想这可以通过使用将`resource[remember_me]`属性设置为“1”的隐藏字段来实现。然而，作为一个 Rails 新手，我不知道如何编写这个代码。我想它需要一些 javascript，这很好，但是谷歌搜索只发现了 AJAX-y 的东西，我认为这没有必要。不过，如果有必要，我不会回避它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:51:01.017

您将创建一个带有一些 id 的按钮，然后使用 javascript 绑定到该按钮的单击事件。单击按钮时，您想要更改隐藏字段的值。如果您使用的是 jQuery，那将类似于...

```
 $('#id_of_button').click(function() {
     $('#id_of_hidden_field').val("true");
   }); 
```

然后，您只需像往常一样在控制器中检查该值。

如果您不使用 jQuery，那么它的工作量并不大，我只是不知道它在我的脑海中。顺便说一句，此代码应位于 assets/javascript 文件夹中的 .js 文件中

# jquery - 用于动画 div 的 Jquery 悬停效果在动画时留下空间

> ID：11251646
> 
> 赞同：0
> 
> 时间：2012-06-28T19:35:18.887
> 
> 标签：jquery, html

我有一个页面，我已经开始在这里设置[http://www.brandybrowauto.com/NEW.html](http://www.brandybrowauto.com/NEW.html)，它有一个简单的 3 窗格窗口切换器。悬停时它将展开该窗格并使其他窗格变小，然后在鼠标悬停时它会恢复正常。制作动画时，左侧窗格和中间窗格之间没有间隙，但中间窗格和右侧窗格之间打开了一个小条。所有窗格的大小都相同，并且同时以相同的速度进行动画处理，我不确定是什么导致了这种差距，以及是否我可以摆脱它。这可能很简单，但任何帮助表示赞赏。

```
$(document).ready(function(){
  $("#left").hover(function(){
    $("#left").stop().animate({width:754},"fast");
    $("#right, #middle").stop().animate({width:100},"fast");
  }, function() {
    $("#left").stop().animate({width:318},"fast");
    $("#right, #middle").stop().animate({width:318},"fast");
  });

  $("#middle").hover(function(){
    $("#middle").stop().animate({width:754},"fast");
    $("#right, #left").stop().animate({width:100},"fast");
  }, function() {
    $("#middle").stop().animate({width:318},"fast");
    $("#right, #left").stop().animate({width:318},"fast");
  });

  $("#right").hover(function(){
    $("#right").stop().animate({width:754},"fast");
    $("#left, #middle").stop().animate({width:100},"fast");
  }, function() {
    $("#right").stop().animate({width:318},"fast");
    $("#left, #middle").stop().animate({width:318},"fast");
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:12:39.027

原来这与jquery无关。再次查看后，这是因为我右侧的窗格设置为向右浮动，而中间和左侧的窗格向左浮动。这会在动画制作时造成小的间隙，因为在动画完成之前，它们的动画彼此远离。改变了，所有的浮动都离开了，它起作用了。感谢那些为我调查的人。

# java - JasperServer 错误 - 无法获取下一条记录

> ID：11251647
> 
> 赞同：2
> 
> 时间：2012-06-28T19:35:21.557
> 
> 标签：java, sql, jasper-reports, jasperserver

我有一个非常简单的报告，可以在我的工作站上的 iReports (4.5.0) 中完美运行。当我上传 JasperServer CE (4.5.0) 时，我收到以下错误。

```
1 - Unable to get next record. 
java.lang.Exception: 1 - Unable to get next record.
at com.jaspersoft.ireport.jasperserver.ws.WSClient.runReport(WSClient.java:403)
at com.jaspersoft.ireport.jasperserver.ws.WSClient.runReport(WSClient.java:320)
at com.jaspersoft.ireport.jasperserver.ReportRunner.run(ReportRunner.java:70)
at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:572)
at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997) 
```

JasperServer 上运行的其他更复杂的查询和报告没有问题。数据库系统是运行BBJ（Business Basic Java）的Basis/Pro5。我使用相同的本地 JDBC 基础驱动程序 (BBjJDBS.jar) 连接到 iReports 和 JasperServer 中的数据库。JasperServer 与 BBj 数据库在同一个 RHEL 机器上运行。Jasper 服务器使用内置 DB 和 Tomcat 作为捆绑包安装。不存在其他已知冲突。

以下单表查询旨在获取给定月份的交易总额。该报告有一个仅打印查询输出的详细信息部分。

```
SELECT
    Month(INHI.TRANSACTION_DATE) AS TransMonth,
    admin.INHI.ITEM_ID,
    admin.INHI.TRANSACTION_TYPE,
    SUM(admin.INHI.TRANS_QUANTITY) as TransQty
FROM
    admin.INHI
WHERE
    admin.INHI.ITEM_ID = 'R-CBSH-3300'
AND (
        admin.INHI.TRANSACTION_TYPE = 'B2'
    OR  admin.INHI.TRANSACTION_TYPE = 'P1')
AND admin.INHI.TRANSACTION_DATE BETWEEN '2012-01-01' AND '2012-03-31'
GROUP BY
    Month(INHI.TRANSACTION_DATE),
    admin.INHI.ITEM_ID,
    admin.INHI.TRANSACTION_TYPE
Order By
admin.INHI.TRANSACTION_TYPE 
```

我已经四处寻找，试图找到更多的故障排除技巧，但已经没有办法尝试了。非常感谢任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T00:44:33.510

In my case I was able to get an extended error from the JasperServer web interface which lead me to an Date/Time issue. The crux of the whole problem was the "Order By" clause. Once I removed the order by the query worked fine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-03T17:52:36.273

如果您将关闭的结果集作为报表的数据源传递，您也可能会收到此错误。

在我的情况下，我将`JasperReportBuilder`对象传递到某个地方（过早地）关闭`Connection`了结果集绑定到的对象。

# vba - 使用 VBA 的 PowerPoint 幻灯片的度量单位是什么？

> ID：11251649
> 
> 赞同：9
> 
> 时间：2012-06-28T19:35:29.827
> 
> 标签：vba, powerpoint

我正在使用 VBA 将图表/图形从 Access 粘贴到 PowerPoint。粘贴后，我将使用 VBA 调整它们的大小，但它不允许我使用英寸（即使当我通过形状属性手动执行时，大小值以英寸为单位）。

我的问题是我在 VBA 中使用的数字是什么计量单位？我假设像素并尝试使用每英寸 96 像素的因子进行转换，但这并不正确。现在我很好奇它是否基于我的屏幕分辨率？我可以快速编码（通过反复试验）以在我的机器上看起来不错，但我担心如果其他人运行它，并且他们有不同的分辨率，幻灯片看起来会有所不同。（请注意，图表必须适合其他形状。）

如果它不是基于屏幕分辨率，有没有人知道幻灯片的尺寸在它所在的任何单位？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-28T20:16:24.417

ppt VBA中的单位是Points（一个point大约是1/72英寸）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-01T18:00:42.620

请原谅我的迂腐，但一英寸*正好是*72 分，至少就 PowerPoint 和几乎所有数字系统而言。

在计算机接管之前，“关于”确实适用。更是如此，因为这一点有几种不同的“标准”定义。

[http://en.wikipedia.org/wiki/Point_（排版）](http://en.wikipedia.org/wiki/Point_%28typography%29)

AAMOF，在一个……呃……点上，微软重新定义了厘米（2.4 到英寸而不是 2.54）以适应自己的目的，当公制中的人们在 PowerPoint 中精确指定测量值时，导致混淆，然后发现东西没有按预期的大小打印。

他们在 PPT 2002 中修复了这个问题，但我仍然会在其周围浮动文件，当在当前版本的应用程序中打开时，显示奇怪的页面大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-18T11:12:19.577

在 Windows 上，它是[每英寸 96 像素](https://blogs.msdn.microsoft.com/fontblog/2005/11/08/where-does-96-dpi-come-from-in-windows/)。

在 Mac 上，它是[每英寸 72 像素](https://blogs.msdn.microsoft.com/fontblog/2005/11/08/where-does-96-dpi-come-from-in-windows/)。

# html - 没有样式表的 Z-Index

> ID：11251650
> 
> 赞同：3
> 
> 时间：2012-06-28T19:35:32.990
> 
> 标签：html, css, web

您可以在不编写或嵌入样式表的情况下为 HTML 中的图像设置 Z-Index 吗？我正在将一些内容上传到网络论坛，我需要能够在图像顶部放置一些文本，在表格内格式化，但图像只是被推开。没有办法“送回”。我一直在对 HTML 本身进行微小的更改，但我一直试图避免它，因为基于 GUI 的编辑器往往会在 HTML 中添加大量额外的填充物，并使其阅读起来令人敬畏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T19:37:10.430

你的意思是使用内联样式？所以像

```
<img src="http://path/to/img/" style="position: absolute; z-index: 3" /> 
```

# php - PHP 包含范围类

> ID：11251652
> 
> 赞同：0
> 
> 时间：2012-06-28T19:35:35.677
> 
> 标签：php, class, include, scope

所以我有这个问题我有3个文件，比如

2.php

```
<?php
$variable = 4;
?> 
```

1.php

```
<?php
class foo {
function bar() {include_once('2.php');}
}
?> 
```

索引.php

```
<?php
include_once('1.php');
$foo = new foo;
foo->bar();
echo $variable;
?> 
```

为什么它告诉我变量没有价值？如果我喜欢这样

```
<?php
include_once('1.php');
$foo = new foo;
foo->bar();
include_once('2.php');
echo $variable;
?> 
```

它也行不通。只有这样

```
<?php
include_once('1.php');
$foo = new foo;
//foo->bar();
include_once('2.php');
echo $variable;
?> 
```

它会起作用，有什么解释吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:37:48.847

的范围`$variable`仅在`bar()`函数内

见： http: [//php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:41:01.770

你很困惑[`include`](http://php.net/include)和[`include_once`](http://php.net/include_once)。

当您使用后者时，文件加载和变量声明只会发生*一次*。如果你在方法范围内这样做，它不会在全局范围内再次声明。或相反亦然。

# wpf - WPF Grid - 绘制自定义网格线

> ID：11251657
> 
> 赞同：8
> 
> 时间：2012-06-28T19:35:44.980
> 
> 标签：wpf, xaml

假设我有一个非常简单的 WPF 网格（6 行 x 6 列），定义如下：

```
<Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
</Grid.RowDefinitions>

<Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
</Grid.ColumnDefinitions> 
```

我想要如下绘制以下网格线（一条实线和两条虚线）（我在 Excel 中绘制了这个，所以忽略了浅色 Excel 网格线）：

![在此处输入图像描述](../Images/6c036e384179beca4f1ec55090849f05.png)

我该如何在 XAML 中执行此操作？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T21:00:06.380

您可以将`Line`s 放置在所需单元格的顶部，方法是设置`VerticalAlignment="Top"`、适当`Grid.ColumnSpan`的 和设置`StrokeDashArray`以获得虚线。

编辑：以上只是我的想法，我显然忘记了 WPF 的一些“功能”。

这是我开始工作的样本。我把它放在一个有 5 行和 5 列的网格中，星形大小。

```
<Line Grid.Row="0" Grid.Column="1" Grid.RowSpan="2" Grid.ColumnSpan="2"
    VerticalAlignment="Center" Stroke="Black" StrokeThickness="1"
    X2="{Binding Path=ActualWidth, RelativeSource={RelativeSource Self}}" />
<Line Grid.Row="1" Grid.Column="2" Grid.RowSpan="2" Grid.ColumnSpan="2"
    VerticalAlignment="Center" Stroke="Black" StrokeThickness="2" StrokeDashArray="5,3"
    X2="{Binding Path=ActualWidth, RelativeSource={RelativeSource Self}}" /> 
```

注意：如果行的大小不同，那将不起作用，因为它将行居中在两行中。如果它们的大小不同，您将需要`VerticalAlignment="Top"`，但请注意，行的上半部分将被剪裁。

# iphone - NSString 变量值在重新分配后消失

> ID：11251660
> 
> 赞同：1
> 
> 时间：2012-06-28T19:35:57.463
> 
> 标签：iphone, objective-c, ios, cocoa-touch, nsstring

一些奇怪的事情正在发生。当我将 NSString 重新分配给靠近代码底部的 subString 变量时。输出中 subString 的值似乎为空。我不知道 objectAtIndex 是返回一些奇怪的东西还是内存问题。如果我创建一个新变量而不是重新分配 subString 的值，我可以在输出控制台中打印看到正确的值。如果有人可以帮我解决这个问题。将不胜感激。

```
NSString *subString = @"";
if ([text length] > 0) 
{
    UITextRange *selectedRange = [_textView selectedTextRange];
    UITextPosition *cursorPosition = [_textView positionFromPosition:selectedRange.start offset:0];
    UITextRange *subTextRange = [_textView textRangeFromPosition:_textView.beginningOfDocument toPosition:cursorPosition];
    subString = [textView textInRange:subTextRange];
}

NSLog(subString);
NSLog(@" %s", [subString hasSuffix:@" "] ? "TRUE" : "FALSE");
BOOL hasSpaceSuffix = [subString hasSuffix:@" "];
NSLog(@" %s", _taggingInProgress ? "TRUE" : "FALSE");
NSArray *substringArray = [[subString componentsSeparatedByString:@" "] retain];
if ([substringArray count] > 1) {
    int index = [substringArray count];
    if ([[substringArray objectAtIndex:index-1] isEqualToString:@" "])
    {
        NSLog(@"1st");
        subString = [substringArray objectAtIndex:index-2];
        NSLog(subString);
    }
    else
    {
        NSLog(@"2nd");
        subString = [substringArray objectAtIndex:index-1];
        NSLog(subString);
    }
    NSLog(@"AFTER");
    NSLog(subString);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:43:00.803

我认为你需要使用：

```
subString = [NSString stringWithString:[substringArray objectAtIndex:index]]; 
```

...固定的...

# smalltalk - Polymorph 和 Spec 有什么区别？

> ID：11251663
> 
> 赞同：6
> 
> 时间：2012-06-28T19:36:10.877
> 
> 标签：smalltalk, pharo, morphic

最近[网上发布](http://hal.inria.fr/docs/00/70/80/67/PDF/SpecTechReport.pdf)了一个 Spec 文档，它与 Polymorph 项目有什么关系？很高兴了解这些项目的未来。多晶型停产了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T11:26:28.083

Polymorph 是一个 UI 框架。Spec 是一个基于字面量数组的 UI*描述框架。*

换句话说，您在屏幕上看到的小部件来自 Polymorph。UI 构建器采用 Spec 规范并构建这些小部件：“这是一个这种大小的按钮，这就是它的名称”。

在 Squeak 中，Morphic 或 MVC 与 ToolBuilder 之间存在相同的关系。

# perl - 在 Perl 中，如何查看目录的更改？

> ID：11251666
> 
> 赞同：1
> 
> 时间：2012-06-28T19:36:27.393
> 
> 标签：perl, filesystems, change-notification

```
use Text::Diff;
for($count = 0; $count <= 1000; $count++){
   my $data_dir="archive/oswiostat/oracleapps.*dat";
   my $data_file= `ls -t $data_dir | head -1`;
   while($data_file){
      print $data_file;
      open (DAT,$data_file) || die("Could not open file! $!");
      $stats1 = (stat $data_file)[9];
      print "Stats: \n";
      @raw_data=<DAT>;
      close(DAT);
      print "Stats1 is :$stats1\n";
      sleep(5);
      if($stats1 != $stats2){
         @diff = diff \@raw_data, $data_file, { STYLE => "Context" };
         $stats2 = $stats1;
      }
      print @diff || die ("Didn't see any updates $!");
   }
} 
```

输出：

```
$ perl client_socket.pl
archive/oswiostat/oracleapps.localdomain_iostat_12.06.28.1500.dat
Stats:
Stats1 is :
Didn't see any updates  at client_socket.pl line 18. 
```

您能告诉我为什么缺少统计信息以及如何解决吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T20:21:29.287

真正的修复是[File::ChangeNotify](http://search.cpan.org/perldoc/File::ChangeNotify)或[File::Monitor](http://search.cpan.org/perldoc/File::Monitor)或类似的东西（例如，在 Windows 上，[Win32::ChangeNotify](http://search.cpan.org/perldoc/Win32::ChangeNotify)）。

```
use File::ChangeNotify;

my $watcher = File::ChangeNotify->instantiate_watcher(
    directories => [ 'archive/oswiostat' ],
    filter => qr/\Aoracleapps[.].*dat\z/,
);

while (my @events = $watcher->wait_for_events) {
    # ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:59:04.077

*请注意，我正在回答您最初的问题，为什么`stat()`似乎失败了，而不是新编辑的问题标题，它提出了不同的问题。*

这是修复：

```
my $data_file= `ls -t $data_dir | head -1`;
chomp($data_file); 
```

这是修复的*原因*有点模糊。没有那个`chomp()`，`$data_file`包含一个尾随换行符： `"some_filename\n"`. 两个参数形式`open()` [*忽略*文件名中的尾随换行符，~~我不知道为什么~~](https://stackoverflow.com/q/11253450/132382)，因为两个参数 open 模仿 shell 行为。但是，您对 的调用`stat()`不会忽略文件名中的换行符，因此它是`stat()`一个不存在的文件，因此`$stats1`是`undef`.

# c# - 如何读取文本文件中的特定部分？

> ID：11251670
> 
> 赞同：0
> 
> 时间：2012-06-28T19:37:03.660
> 
> 标签：c#, io

我有一个非常大的文本文件（500mb），我需要获取它的文本。当然问题是内存异常，但我想通过获取字符串（或字符数组）并将它们放入列表中来解决它。我在谷歌搜索，我真的不知道如何参与特定的部分。* 这是一条很长的线，如果有帮助的话。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T19:46:17.887

去做：

```
using (FileStream fsSource = new FileStream(pathSource,
        FileMode.Open, FileAccess.Read))
    {

        // Read the source file into a byte array.
        int numBytesToRead = // Your amount to read at a time
        byte[] bytes = new byte[numBytesToRead];

        int numBytesRead = 0;
        while (numBytesToRead > 0)
        {
            // Read may return anything from 0 to numBytesToRead.
            int n = fsSource.Read(bytes, numBytesRead, numBytesToRead);

            // Break when the end of the file is reached.
            if (n == 0)
                break;

            // Do here what you want to do with the bytes read (convert to string using Encoding.YourEncoding.GetString())
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:42:14.920

您可以使用[StreamReader](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)类来读取文件的一部分。

# c# - Validation.ErrorTemplate 确实在绑定到对象属性时触发

> ID：11251673
> 
> 赞同：1
> 
> 时间：2012-06-28T19:37:11.127
> 
> 标签：c#, wpf, validation, mvvm, .net-4.0

就像这样，我有一个 wpf 绑定

```
<TextBox
        Name="txtRackNo"
        Grid.Column="5"
        Grid.ColumnSpan="7"
        Grid.Row="4"
        Grid.RowSpan="1"
        Style="{StaticResource ResourceKey=styleValidationTextBox}"
        Text="{Binding Path=rack_no, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=LostFocus}">
</TextBox> 
```

如果我实现 IDataErrorInfo 并直接在我的视图模型中拥有属性，那么它可以工作，它会显示工具提示和红色验证框。
如果我在作为视图模型属性的类中实现 IDataErrorInfo，则样式会创建工具提示，但不会显示红色错误框。我确信我的风格是有效的，只是如果我改变这条线

```
Text="{Binding Path=rack_no, Mode=TwoWay, ...}" 
```

使用我的数据类型“RACK”

```
Text="{Binding Path=rack.rack_no, Mode=TwoWay, ...}"

private Rack _rack;
public Rack rack
{
    get { return _rack; }
    set
    {
        _rack = value;
        createPropertyObserver();
        base.RaisePropertyChanged("rack");
    }
} 
```

然后它只显示工具提示而不是红色验证错误框。

编辑：这里有更多代码，也许这会帮助别人更好地理解我的问题？

```
class Rack : ObservableObject, IDataErrorInfo
{
    public String _rack_no;
    public String rack_no
{
         get { return _rack_no; }
    set
    {
    if (value != null)
    {
        _rack_no = value;
        base.RaisePropertyChanged("rack_no");
    }
    }
}

     public String Error
    {
        get { return this[null]; }
    }

    public String this[String propertyName]
    {
        get
        {
            String result = String.Empty;
            propertyName = propertyName ?? String.Empty;
            if (propertyName == String.Empty || propertyName == "dc_name")
            {
                if (String.IsNullOrEmpty(this.dc_name))
                {
                    result += "Datacenter name is mandatory." + Environment.NewLine;
                }
            }

            if (propertyName == String.Empty || propertyName == "rack_no")
            {
                if (String.IsNullOrEmpty(this.rack_no) || this.rack_no.Length > 5)
                {
                    result += "Rack number is mandatory and must be 5 letters or less."
                        + Environment.NewLine;
                }
            }
            Debug.WriteLine(result);
            return result.TrimEnd();
        }
    } 
```

然后这是我的视图模型的一部分：

```
 private Rack _rack;
    public Rack rack
    {
        get { return _rack; }
        set
        {
            _rack = value;
            createPropertyObserver();
            base.RaisePropertyChanged("rack");
        }
    } 
```

如果在我看来，我将文本框绑定到 rack.rack_no，如果出现验证错误，则工具提示会起作用并显示正确的错误消息。但是，它不会更改文本框以使用验证样式。

如果我创建相同的属性 (rack_no) 并在我的视图模型中实现 idataerrorinfo，然后我绑定到它，它可以完美运行。

我只想知道我是否在这里做错了什么，比如这不是有效的验证绑定吗？有没有办法让我继续绑定到 rack.rack_no 类并使用验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T15:32:49.833

放弃了这个想法，而是决定使用下面给出的方法：http: [//www.codeproject.com/Articles/15239/Validation-in-Windows-Presentation-Foundation](http://www.codeproject.com/Articles/15239/Validation-in-Windows-Presentation-Foundation) 和 [http://www.codeproject.com/Articles /97564/WPF-MVVM-应用程序中基于属性的验证](http://www.codeproject.com/Articles/97564/Attributes-based-Validation-in-a-WPF-MVVM-Applicat)

这将 idataerrorinfo 与 System.ComponentModel.DataAnnotations 结合使用；执行验证。我还更改了我的验证样式以手动创建红色框，这似乎解决了在验证绑定到子对象的数据绑定时使用默认验证样式的问题。

# ios - 通过 RestKit 发布 ManagedObject 会导致“无法更新从未插入的对象”

> ID：11251674
> 
> 赞同：2
> 
> 时间：2012-06-28T19:37:16.800
> 
> 标签：ios, core-data, restkit

我创建一个托管对象保存上下文并像这样发布：

```
 [[RKObjectManager sharedManager] postObject:tag mapResponseWith:tagMappingForPOST delegate:tagLoader]; 
```

`tagLoader`获取对象但未能保存在 RestKit 的上下文中说：

```
Failed to save managed object context after mapping completed: The operation couldn’t be completed. (Cocoa error 134030.)

NSUnderlyingException=Cannot update object that was never inserted. 
```

我正在使用具有相同类的相同后端服务器（Parse.com）做同样的事情，并且工作正常。关于获得“无法更新从未插入的对象”的潜在原因的任何线索。错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:58:54.217

所以事实证明，RestKit 期望在将消息发送到*之前*保存上下文。我的问题是我在消息之后立即保存了上下文（我认为这没关系，因为这仍然是在加载程序从 web 服务得到响应之前。我正在做这样的事情：`postObject:mapResponseWith:delegate``RKObjectManager``postObject:mapResponseWith:delegate`

```
NSManagedObject *myObj = [NSEntityDescription insertNewObjectForEntityForName:@"MyObjects" inManagedObjectContext:context];
[[RKObjectManager sharedManager] postObject:myObj mapResponseWith:objMappingForPOST delegate:myObjLoader];
[context save:&error]; 
```

...然后`myObjLoader`将得到响应并尝试更新`myObj`（createdAt、parse 的 objectId 等）中的属性并抛出一个错误，指出 myObj 不存在。

我真的应该通读 RestKit 代码以确认，但我很确定正在发生的事情是在收到消息`RKObjectManager`的时间点从托管对象存储创建后台线程和上下文，`postObject:mapResponseWith:delegate`并且永远不会更新任何潜在的合并在响应返回之前可能存在。老实说，我希望在收到回复后创建上下文。

所以要做的是在发送`postObject:mapResponseWith:delegate`消息之前保存上下文，如下所示：

```
NSManagedObject *myObj = [NSEntityDescription insertNewObjectForEntityForName:@"MyObjects" inManagedObjectContext:context];
[context save:&error];
[[RKObjectManager sharedManager] postObject:myObj mapResponseWith:objMappingForPOST delegate:myObjLoader]; 
```

# php - 如何从 PHP 中的表中获取 td 数据

> ID：11251676
> 
> 赞同：0
> 
> 时间：2012-06-28T19:37:34.580
> 
> 标签：php, csv, file-upload, html-table

我目前正陷入这个问题，我似乎不知道如何实现这一点。我有这个表，它是从 php 中的 csv 文件填充的，我想获取记录的数据以计算白天时间。

**我如何从 td“dateLogged”中获取数据，我在使用 children 之前在 jquery 中做到了这一点，但我似乎无法在 php 中做到这一点**

```
//print out uploaded file.csv
            echo "<html><body><table BORDER=1>\n\n";
            echo "  <tr><th>AvgCrown</th><th>MinCrown</th><th>MaxCrown</th><th>dateLogged</th><th>DaylightHours</th></tr>";
            $f = fopen("./uploads/" . $_FILES["uploadedfile"]["name"], "r");

        while (($line = fgetcsv($f)) !== false) {
                echo "<tr>";
                foreach ($line as $cell) {
                        echo "<td>" . htmlspecialchars($cell) . "</td>";
                }
                echo "<td>" . calcDaylight() . "</td>";

                echo "<tr>\n"; 

        }
        fclose($f);
        echo "\n</table></body></html>"; 
```

![这是表格的外观示例](../Images/88aa650840daffc3c0f7c08b1d970396.png)

这是表格的外观示例，欢迎提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:57:24.653

如果您可以在生成数据时获取数据，则无需解析 HTML。像这样的东西应该是你所需要的：

```
while (($line = fgetcsv($f)) !== false) {
    echo "<tr>";
    foreach ($line as $cell) {
        // Save the value before you output
        $lastColValue = htmlspecialchars($cell);
        echo "<td>" . $lastColValue . "</td>";
    }
    // If you want to store all log dates in an array:
    $logDates[] = $lastColValue;
    // Or if you want to do something with that value in calcDaylight:
    echo "<td>" . calcDaylight( $lastColValue ) . "</td>";
    echo "<tr>\n"; 
}
fclose($f); 
```

顺便说一句，如果你确实发现你需要解析 HTML 并且只熟悉 jQuery，那么这个库可能会让你喜欢：

[http://code.google.com/p/phpquery/](http://code.google.com/p/phpquery/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T20:10:18.390

这？

```
while (($line = fgetcsv($f)) !== false) {
   echo "<tr>";
   foreach ($line as $cell) {
      echo "<td>".htmlspecialchars($cell)."</td>";
   }
   echo "<td>" . calcDaylight( $cell[3] ) . "</td>";
   echo "<tr>\n"; 
} 
```

我可能错了，但第 4 列是您想要的字段，不是吗？

# c# - 跳过 SSL TCP 连接的验证过程

> ID：11251678
> 
> 赞同：1
> 
> 时间：2012-06-28T19:37:37.360
> 
> 标签：c#, .net, ssl

> **可能重复：**
> [C#忽略证书错误？](https://stackoverflow.com/questions/2675133/c-sharp-ignore-certificate-errors)

我正在编写代码以通过 SSL 连接到远程服务器。我目前使用的代码如下。我收到“根据验证程序，远程证书无效。”

经过一番研究，我发现我必须跳过 SSL setup 的证书验证部分。我应该写什么代码来跳过证书验证？

```
 System.Net.ServicePointManager.ServerCertificateValidationCallback =
        (sender, certificate, chain, errors) => true;

        TcpClient client = new TcpClient("IPADDDRESSHERE", 80);
        Console.WriteLine("Client connected.");

        SslStream sslStream = new SslStream(
            client.GetStream(),
            false,
            ValidateServerCertificate,
            null
            );

        try
        {

            sslStream.AuthenticateAsClient("IPADDDRESSHERE");
        }
        catch (AuthenticationException e)
        {
            Console.WriteLine("Exception: {0}", e.Message);
            if (e.InnerException != null)
            {
                Console.WriteLine("Inner exception: {0}", e.InnerException.Message);
            }
            Console.WriteLine("Authentication failed - closing the connection.");
            client.Close();
            return;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:00:05.333

我认为在您的代码中：

```
SslStream sslStream = new SslStream(
        client.GetStream(),
        false,
        ValidateServerCertificate,
        null
        ); 
```

您正在添加一个证书验证器`ValidateServerCertificate`，覆盖您之前对 的分配`ServerCertificateValidationCallback`。

尝试简单地使用：

```
SslStream sslStream = new SslStream(
        client.GetStream(),
        false
        ); 
```

# jquery - 如何在javascript中将两个对象与嵌套数组合并？

> ID：11251687
> 
> 赞同：2
> 
> 时间：2012-06-28T19:38:05.637
> 
> 标签：jquery, arrays

我在 JSON 中有两个数组，例如：

```
proj1                   proj1
  taska                   taska
    charge1                 charge1
    charge2               taskb
  taskb                     charge1
    charge1                 charge2
proj2                   proj2
  taska                    taska
  taskb                      charge1
   charge1                 taskb
                             charge1
                           taskc
                        proj3
                           taska 
```

我希望他们合并成类似的东西：

```
proj1
  taska
    charge1
    charge2
  taskb
    charge1
    charge2
proj2
   taska
     charge1
   taskb
     charge1
   taskc
proj3
   taska 
```

我尝试使用 jQuery 的`extend`方法递归合并，但这失败了，因为我需要合并数组，`extend`而是替换数组。我需要遍历每个列表的每个级别，还是有更优雅的解决方案，比如`extend`合并对象*和*数组？

**编辑**这里是我的列表之一的 JSON 示例：

```
{
    "projects": [
        {
            "projectName": "JobIdTooManyChar",
            "tasks": [
                {
                    "name": "Process Graphics",
                    "charges": [
                        {
                            "date": "2012-06-18",
                            "hours": 1
                        },
                        {
                            "date": "2012-06-28",
                            "hours": "5"
                        }
                    ]
                },
                {
                    "name": "Custom Software",
                    "charges": [
                        {
                            "date": "2012-06-18",
                            "hours": 1
                        },
                        {
                            "date": "2012-06-19",
                            "hours": 24
                        }
                    ]
                },
                {
                    "name": "Consulting",
                    "charges": [
                        {
                            "date": "2012-06-18",
                            "hours": 1
                        },
                        {
                            "date": "2012-06-21",
                            "hours": 1
                        }
                    ]
                }
            ]
        },
        {
            "projectName": "JobIdTooManyChar",
            "tasks": [
                {
                    "name": "CAD Drawings",
                    "charges": [
                        {
                            "date": "2012-06-18",
                            "hours": 5
                        },
                        {
                            "date": "2012-06-19",
                            "hours": 6
                        },
                        {
                            "date": "2012-06-21",
                            "hours": 9
                        }
                    ]
                }
            ]
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:41:21.110

jQuery 和 underscore.js 都将数组视为属性*值*，因此它们将*值*替换为另一个值。

老实说，我相信您只需要编写（扩展他们已经完成的工作）以您需要的方式扩展对象的方法。例如，对于一个数组，键位置 1 是否有特殊含义，或者它仅仅是一个堆栈/队列？

您需要帮助编写这样一个合并实用程序吗？

# c# - MVC3 / C# - 无效的转换异常 - 指定的转换无效

> ID：11251688
> 
> 赞同：3
> 
> 时间：2012-06-28T19:38:12.443
> 
> 标签：c#, asp.net-mvc-3, .net

有谁知道如何纠正这个错误？

*指定的演员表无效。*

*说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。*

*异常详细信息：System.InvalidCastException：指定的强制转换无效。*

这是它中断的代码行 -

```
var id = (int)httpContext.Request.RequestContext.RouteData.Values["id"]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T19:40:58.077

`httpContext.Request.RequestContext.RouteData.Values["id"]`可能是一个字符串，因此您需要解析它：

```
var idStr=(string)(httpContext.Request.RequestContext.RouteData.Values["id"]);
int id;
if(int.TryParse(idStr, out id))
{
    //w00t
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:47:00.630

您的价值，`httpContext.Request.RequestContext.RouteData.Values["id"]`可能没有 int 等价物。

如果它是一个字符串，正如spender所说，你会尝试，

```
var id = int.Parse("httpContext.Request.RequestContext.RouteData.Values["id"]); 
```

智能可能会告诉你什么类型：

`httpContext.Request.RequestContext.RouteData.Values["id"]`

在您键入时。您还可以在调试器的“监视”选项卡中找到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-22T12:04:45.820

第一次通话`ToString()`

然后`parse`它`to int`

```
int.Parse(Url.RequestContext.RouteData.Values["id"].ToString()) 
```

# javascript - 单击后如何获取整个对象作为响应？

> ID：11251698
> 
> 赞同：0
> 
> 时间：2012-06-28T19:38:38.053
> 
> 标签：javascript, jquery, javascript-events

我有简单的 JavaScript 片段：

```
var obrazek = [{nazwa: "Sniadanie", wiek: 100, autor: "Alicja"},{nazwa: "Kolacja", wiek: 10, autor: "Misiek"}];

function galeria(nazwa, wsad) {
    this.nazwa = nazwa;
    this.wsad = wsad;
    this.print = function(element) {
        for (var i=0;i<this.wsad.length;i++) {
            var text = "<li>"+this.wsad[i].nazwa+"</li>"
            element.append(text);
        }
    }
}
$(document).ready(function() {
    gal = new galeria('test', obrazek);
    gal.print($('#galeriaTest'))
}); 
```

它给了我：

*   斯尼亚达涅*   科拉恰

我想要的是在点击事件后返回对象的简单方法：

```
Object { nazwa="Sniadanie", wiek=100, autor="Alicja"} (in FireBug) 
```

如何编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:09:23.560

**只要您的数据集是静态的**，您就可以使用该`data()`函数将对象与 DOM 元素相关联。

[这是一个例子](http://jsfiddle.net/2bwwj/)。

如果您的数据集是动态的，您仍然可以将引用`Galeria`与某些 ID 类型的信息相关联，以获得类似但改进的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:42:09.130

```
$("selector").on('click', function(e){
   console.log( obrazek );  // would put object in a console, you can check it via firebug
 }); 
```

# macos - 可可 CGWindowListCopyWindowInfo & AXUIElementSetAttributeValue

> ID：11251700
> 
> 赞同：3
> 
> 时间：2012-06-28T19:38:42.670
> 
> 标签：macos, cocoa

我正在使用以下代码来获取所有窗口：

```
CFArrayRef windows = CGWindowListCopyWindowInfo(kCGWindowListOptionOnScreenOnly | kCGWindowListExcludeDesktopElements, kCGNullWindowID); 
```

这给了我一个字典数组，如下所示：[Front most window using CGWindowListCopyWindowInfo](https://stackoverflow.com/questions/5286274/front-most-window-using-cgwindowlistcopywindowinfo)

然后我检查他们的界限，看看鼠标是否在里面，我发现的第一个是我的鼠标在上面的那个。

然后我希望能够移动它。我知道如何使用`AXUIElementSetAttributeValue`来移动窗口，但我需要一个`AXUIElementRef`，但我不知道如何摆脱字典。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T22:51:41.633

没有办法从窗口编号转到`AXUIElementRef`.

最接近的方法是找到窗口的所有者，然后通过 Accessibility 询问它的窗口并寻找具有相同标题的窗口——但一个应用程序可能有多个具有相同标题的窗口，因此您需要弄清楚在这种情况下你会做什么。

移动另一个应用程序窗口的唯一方法是通过*AppleScript*或*Accessibility*。使用*Accessibility*比*AppleScript*可靠得多（如果不是大多数，许多应用程序的脚本支持不完整和/或不稳定）。您可以从提供窗口编号的同一个窗口字典中获取进程 ID 和窗口标题，但这与您所能获得的一样具体。使用 AppleScript，您只能在其应用程序的窗口列表中使用窗口的索引，并希望列表在您计算索引和尝试使用它之间的瞬间没有改变顺序。

# xml - VBA 创建 XML 但需要 CSV

> ID：11251701
> 
> 赞同：-1
> 
> 时间：2012-06-28T19:38:43.747
> 
> 标签：xml, vba, soap

我有这个 VBA 脚本，它将调用 Web 服务并将数据保存到 XML 文件中。除了 XML，我如何修改脚本以将数据另存为 CSV 文件？

```
Sub Call_Pipeline_Macros()

    Dim sURL As String
    Dim sEnv As String
    Dim xmlhtp As New MSXML2.XMLHTTP
    Dim xmlDoc As New DOMDocument
    sURL = "http://service.leads360.com/ClientService.asmx"

    sEnv = "<?xml version=""1.0"" encoding=""utf-8""?>"
    sEnv = sEnv & "<soap:Envelope xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"">"
    sEnv = sEnv & "  <soap:Body>"
    sEnv = sEnv & "    <GetReportResults xmlns=""https://service.leads360.com"">"
    sEnv = sEnv & "      <username>vtorralbes@globalhealtheducation.com</username>"
    sEnv = sEnv & "      <password>XXXXX</password>"
    sEnv = sEnv & "      <reportId>565</reportId>"
    sEnv = sEnv & "    </GetReportResults>"
    sEnv = sEnv & "  </soap:Body>"
    sEnv = sEnv & "</soap:Envelope>"

    With xmlhtp
        .Open "post", sURL, False
        .setRequestHeader "Host", "service.leads360.com"
        .setRequestHeader "Content-Type", "text/xml; charset=utf-8"
        .setRequestHeader "soapAction", "https://service.leads360.com/GetReportResults"
        .setRequestHeader "Accept-encoding", "zip"
        .send sEnv
        xmlDoc.LoadXML .responseText
        xmlDoc.Save "X:\share\Reporting Database\XML Files" & "\565_pipeline_report.xml"

    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:45:50.577

可以在此处找到回复示例：[http ://service.leads360.com/Documentation/Examples/Client/GetReportResults.templateValues.txt](http://service.leads360.com/Documentation/Examples/Client/GetReportResults.templateValues.txt)

看起来 web 服务不能返回除了肥皂 xml 之外的任何东西。如前所述，您必须遍历已加载的 XML 字符串`xmlDoc`并根据需要输出值，以便为每条记录创建一个 CSV 字符串，用 vbCrLf（换行符）分隔，然后另存为文本文件。

# python - 检查项目是否在数组/列表中

> ID：11251709
> 
> 赞同：277
> 
> 时间：2012-06-28T19:39:16.780
> 
> 标签：python, arrays, contains

`for`如果我有一个字符串数组，我可以在不循环的情况下检查字符串是否在数组中吗？具体来说，我正在寻找一种在`if`语句中执行此操作的方法，因此如下所示：

```
if [check that item is in array]: 
```

* * *

## 回答 #1

> 赞同：519
> 
> 时间：2012-06-28T19:40:26.790

假设你的意思是你说“数组”的“列表”，你可以这样做

```
if item in my_list:
    # whatever 
```

这适用于任何集合，而不仅仅是列表。对于字典，它检查给定的键是否存在于字典中。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-28T19:43:54.647

当您说“数组”时，我还将假设您的意思是“列表”。Sven Marnach 的解决方案很好。如果您要对列表进行重复检查，那么将其转换为 set 或 freezeset 可能是值得的，这样每次检查都会更快。假设您的 strs 列表称为`subjects`：

```
subject_set = frozenset(subjects)
if query in subject_set:
    # whatever 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-09-11T16:33:59.217

使用 lambda 函数。

假设您有一个数组：

```
nums = [0,1,5] 
```

检查 5 是否`nums`在**Python 3.X**中：

```
(len(list(filter (lambda x : x == 5, nums))) > 0) 
```

检查 5 是否`nums`在**Python 2.7**中：

```
(len(filter (lambda x : x == 5, nums)) > 0) 
```

* * *

这个解决方案更健壮。您现在可以检查数组中是否有任何满足特定*条件*`nums`的数字。

例如，检查是否存在任何大于或等于 5 的数字`nums`：

```
(len(filter (lambda x : x >= 5, nums)) > 0) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-25T11:06:10.113

您必须将 .values 用于数组。例如，假设您有一个具有列名的数据框，即 test['Name']，您可以这样做

```
if name in test['Name'].values :
   print(name) 
```

对于普通列表，您不必使用 .values

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2015-12-11T23:32:01.037

您也可以对数组使用相同的语法。例如，在 Pandas 系列中搜索：

```
ser = pd.Series(['some', 'strings', 'to', 'query'])

if item in ser.values:
    # do stuff 
```

# shell - Cron：压缩一周的日志文件而不重新压缩前一个。单线

> ID：11251711
> 
> 赞同：1
> 
> 时间：2012-06-28T19:39:17.650
> 
> 标签：shell, cron

我有很多日志，我需要每周压缩它们，也就是每个星期六。我设法做到这一点，但我不想重新压缩已经压缩的文件。例如：

```
ls  myDir/
test1 test2 test3 
```

**在第 1 周**的星期六，我将拥有：

```
ls myDir/
test1.bz2 test2.bz2 test3.bz2 
```

在**第 2 周**，我会：

```
ls  myDir/
test1.bz2 test2.bz2 test3.bz2 newTest1 newTest2 
```

在第 2 周的星期六，我**想要**：

```
ls  myDir/
test1.bz2 test2.bz2 test3.bz2 newTest1.bz2 newTest2.bz2 
```

这是：压缩文件，但**不重新压缩已经压缩的文件**

这是我的 crontab oneliner：

```
0 2 * * 6 find /myDir -name "log*" -ctime +7 -exec bzip2 -zv {} \;
This is:
   Find all the log files, 7 days of older and compress them.
   (could be obvious! but I'm a newbie) 
```

这只会压缩文件。但不知道如何进行验证或如何避免我所说的情况。如果我再次尝试运行该命令，似乎压缩的文件不会受到影响，但我不确定这是否会一直如此。不想弄乱公司的生产服务器！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T19:43:25.000

尝试以下命令：

```
find /myDir -name 'log*' -and -not -name '*.bz2' -ctime +7 -exec bzip2 -zv {} \; 
```

# arrays - 将数组中的多个不相邻元素重新排序到特定索引的算法

> ID：11251720
> 
> 赞同：2
> 
> 时间：2012-06-28T19:39:44.143
> 
> 标签：arrays, algorithm, sorting

我一直在努力解决这个问题，但它不起作用。

我正在使用一些专有技术，一次只允许移动一个元素。超级烦。将其视为 list.moveRow（之前，之后）。

所以想象一个包含 10 个项目的待办事项列表：`1, 2, 3, 4, 5, 6, 7, 8, 9, 10`

我想要做的是在那里重新排序多个项目，所以说我选择 items `2, 6, 7, and 8`。

然后我拖放到位置`4`。

这个想法是元素现在应该是有序的：`1, 3, 2, 6, 7, 8, 4, 5, 9, 10`.

有没有一种简单的方法可以做到这一点？我尝试使用额外的变量来跟踪由于移动的元素会抛出索引而导致的偏移量，但它非常混乱。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:43:39.270

这真的取决于语言。

假设您有一种简单的方法来获取每个项目的 isSelected() ，最简单和最通用的似乎是将一个新数组构建为列表（即从第一个索引添加到最后一个索引）：

*   按顺序添加未选中的项目，直到插入位置
*   添加所选项目
*   添加剩余的未选择项目

然后替换旧数组。

在伪代码中：

```
func(int[] items, bool[] isselected, int insertpos) {
   newitems = new int[items.length]
   i=0
   for (j=0; j<items.length; j++) {
      if j==insertpos {
          for (k=0; k<items.length; k++) {
              if isselected[k] {
                  newitems[i++] = items[k]
              }
          }
      } else if !isselected[j] {
          newitems[i++] = items[j]
      }
   }
   return newitems
} 
```

如果你想要高性能和就地修改......那是另一回事......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T21:22:34.523

坐下来把它写出来，想出了一个合理的解决方案。这似乎工作正常：

```
// Reorder list
function reorder(items, index)
{        
    // When we move, we have to account for previously moved rows too
    //  Go from bottom-most selected row first to preserve order
    for (var i = items.length - 1, itemOffset = 0, indexOffset = 0; i >= 0; --i) 
    {
        // Move
        list.moveRow(items[i] + itemOffset, index + indexOffset);

        // Change offsets based on location
        //  If next row index is after target index, add to row offset
        if (i-1 >= 0 && items[i-1] >= index) {
            itemOffset++;
        } else {    // If next index is before target, subtract from target
            itemOffset= 0;
            indexOffset--;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-20T20:01:11.110

我希望我能早点找到这个。无论如何，在现代 JS 中，可以（并且希望！）在没有条件的情况下做到这一点，并且有一个优雅的算法可以通过使用占位符来实现这一点。

具体来说，我们可以使用 a`Symbol`作为在有序集中移动的元素的替代。这样，索引算术就被消除了（并且随之而来的是大量的条件和地方错误恶化的地方）。

工作原理基本上是这样的：

```
withGroupRepositioned(["a", "b", "c", "d"], ["a", "b"], 0) // [ 'a', 'b', 'c', 'd' ]
withGroupRepositioned(["a", "b", "c", "d"], ["a", "b"], 1) // [ 'a', 'b', 'c', 'd' ]
withGroupRepositioned(["a", "b", "c", "d"], ["a", "b"], 2) // [ 'a', 'b', 'c', 'd' ]
withGroupRepositioned(["a", "b", "c", "d"], ["a", "b"], 3) // [ 'c', 'a', 'b', 'd' ]
withGroupRepositioned(["a", "b", "c", "d"], ["b", "a"], 2) // [ 'b', 'a', 'c', 'd' ]
withGroupRepositioned(["a", "b", "c", "d"], ["b", "a"], 3) // [ 'c', 'b', 'a', 'd' ]
withGroupRepositioned(["a", "b", "c", "d"], ["a", "c"], 4) // [ 'b', 'd', 'a', 'c' ] 
```

整个功能是：

```
const PLACEHOLDER = Symbol();
function withGroupRepositioned(inOrderedSet, valuesToReposition, toIndex) {
  // Do not damage the given set
  const cpy = [].concat(inOrderedSet);

  // Step 1\. Replace all traveling elements with placeholders, in place.
  valuesToReposition.forEach((v) => cpy[cpy.indexOf(v)] = PLACEHOLDER);

  // Step 2\. Reinsert values as a group, where we want them.
  cpy.splice(toIndex, 0, ...valuesToReposition);

  // Step 3\. Remove placeholders.
  return cpy.filter((v) => v !== PLACEHOLDER);
} 
```

如果要就地执行重新排列，可以删除第一个数组复制操作。

# java - 如何使用 Active Directory 或 LDAP 登录 Business Objects

> ID：11251727
> 
> 赞同：3
> 
> 时间：2012-06-28T19:40:00.387
> 
> 标签：java, authentication, active-directory, sap, business-objects

**编辑：**将“或 LDAP”附加到问题标题以表明我可以有一个解决方案，使我可以使用 LDAP 凭据进行身份验证。

**我的问题：**如何使用 Active Directory 的凭据对[BusinessObjects 会话进行身份验证？](http://help.sap.com/javadocs/boe/xi/ws/en/com/businessobjects/dsws/session/Session.html)

**示例：**我（我认为）有一个来自 SAP 的示例，说明如何在其中执行此操作，`.NET`但我似乎无法为`Java`. （请参阅[此 pdf](http://devlibrary.businessobjects.com/businessobjectsxir2sp2/en/en/WS_SDK/wssdk_consumer/doc/wssdk_dg.pdf)并搜索“修改 .NET Web 应用程序以启用 Kerberos”）。

**目前：**我有一个使用企业帐户进行身份验证的解决方案：

```
/**
* Logs into BusinessObjects. Sets the reportEngine and biPlatform
*/
public void loginToBusinessObjects() throws AxisFault, MalformedURLException, Exception {
  LogHelper.println("Server connection: " + boServer);

  URL boConURL = new URL(boServer);//set connection URL
  connection = new com.businessobjects.dsws.Connection(boConURL);

  boSession = new Session(connection); //setup new session

  EnterpriseCredential credential = EnterpriseCredential.Factory.newInstance();
  credential.setLogin(boUsername);
  credential.setPassword(boPassword);
  LogHelper.println(boUsername + ": ##password##");
  boSession.login(credential); //login to server
  ...
} 
```

上面的代码效果很好。

**现在：**我希望能够允许用户提供他们的 Active Directory 凭据并使用这些凭据进行身份验证。但是，我似乎无法找到一种方法来做到这一点。上面代码的文档可以在[同一个 pdf](http://devlibrary.businessobjects.com/businessobjectsxir2sp2/en/en/WS_SDK/wssdk_consumer/doc/wssdk_dg.pdf)中找到，搜索“登录到服务器”。

**注意**：我可能做错了。我的组织对 Active Directory 和 LDAP 身份验证使用相同的凭据。如果有办法使用 LDAP 做到这一点可能就足够了。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:25:32.317

答案假定您已经为用户设置了 Active Directory 和/或 LDAP 身份验证，并且用户具有该身份验证方法的别名。这应该可以通过登录 InfoView 来验证。

您应该可以通过使用 credential.setAuthType(authType) 来做到这一点。
其中 authType 是

*   “secEnterprise” *默认值*
*   “secLDAP”
*   “secWinAD”

似乎并且有意义的是，默认情况下 AuthType 设置为 secEnterprise。

*注意：我仍在使用 R3，它的身份验证机制略有不同，我还没有专门尝试过这个解决方案。*

* * *

**重要编辑：**文档（这对于 BusinessObjects 来说很糟糕，任何阅读此内容的人可能已经知道）说对于活动目录，您使用“secAD”。但是，在我的测试中，我能够使用“secWinAD”成功地进行身份验证，它根本不会出现在他们的文档中的任何地方：-/（我可以找到）。

# java - （代码审查）Java if 语句涉及逻辑与（&&）运算符

> ID：11251740
> 
> 赞同：1
> 
> 时间：2012-06-28T19:40:58.153
> 
> 标签：java, android

几周前我开始在 java/android 中编程。我想编写一个小型井字游戏作为 android 应用程序，但我在检查获胜者的方法时遇到了问题。如下：

```
 public void checkForWinner() { 

        if( taken[0] && taken[3] && taken[6]  ||
            taken[0] && taken[1] && taken[2] ||
            taken[2] && taken[5] && taken[8] ||
            taken[6] && taken[7] && taken[8] ||
            taken[0] && taken[4] && taken[8] ||
            taken[2] && taken[4] && taken[6] ||
            taken[1] && taken[4] && taken[7] ||
            taken[3] && taken[4] && taken[5] == 1 ){}
} 
```

在这里，我有一个名为 take 的数组，它包含 9 个整数，每个整数要么是一，意味着玩家一拥有该块，要么是二，意味着玩家二拥有该块。目前，我正在尝试所有可能的情况，其中玩家一将成为赢家，但日食告诉我`The operator && is undefined for the argument type(s) int, int`。该错误似乎仅针对 if 语句的每一行的第一个逻辑和操作显示。例如，第一个错误上升到`taken[0] && taken[3]`然后消失，直到下一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:46:59.340

或者，您可以检查 take[n] 值以查看它们是 1 还是 2，如果您认为这会使您的代码更清晰：

```
(taken[0]==1 && taken[3]==1 && taken[6]==1) 
```

请记住，&& 运算符需要布尔操作数......因此它不会像您期望的那样与您的 int 数组一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:44:07.213

将您的 && 交换为 ==，您正在尝试查看它们是否与我假设的值相同，这将显示获胜者，并确保使用括号对其进行排序，因此一个获胜条件看起来像

```
((taken[0] == taken[3]) && (taken[0] == taken[6])) 
```

但是，这只会告诉您某个玩家赢了，而不是哪个玩家赢了。我想一旦确定某人获胜并宣布该玩家为获胜者，您可以检查一下哪个玩家最后一步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T19:44:47.340

在java中，

```
if (a && b) or if (a || b) 
```

仅当 a 和 b 是布尔/布尔表达式时才有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T19:52:22.800

1）您不能在变量上使用`&&`或`||`运算符，`int`因为它们是用于`boolean`值的。

2）也使用括号来分组条件，如

```
 if (
      (taken[0]==1 && taken[3]==1 && taken[6]==1)||
      (taken[0]==1 && taken[1]==1 && taken[2]==1)||
      ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T20:03:44.823

> 在这里，我有一个名为 take 的数组，其中包含 9 个整数，每个整数要么为 1，即玩家一拥有该块，要么为二，即玩家二拥有该块。

在这种情况下，您可以将逻辑运算符替换为位运算符：

```
int winner = taken[0] & taken[3] & taken[6]
           | taken[0] & taken[1] & taken[2]
           | taken[2] & taken[5] & taken[8]
           | taken[6] & taken[7] & taken[8]
           | taken[0] & taken[4] & taken[8]
           | taken[2] & taken[4] & taken[6]
           | taken[1] & taken[4] & taken[7]
           | taken[3] & taken[4] & taken[5]; 
```

然后变量`winner`将包含 1 如果玩家 1 赢了，如果玩家 2 赢了，则为 2，如果他们都没有赢，则为 0，或者他们都赢了 3（这在您的游戏中可能是不可能的）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T19:44:50.740

好的，这里有两个主要问题。

首先，`taken[0]`需要返回 true 或 false 才能在 if 语句中保持原样。您提到它是一个整数，因此要返回 true 或 false，您需要进行比较，例如`taken[0] == 1`.

其次，您需要使用括号并进行一些分组。Java 不尊重空格。而不是`if( taken[0] && taken[3] && taken[6] || ...`，你需要做`if( (taken[0] && taken[3] && taken[6]) || ...`。也就是说，您需要在每组分组周围加上括号。

Eclipse 出错的原因是该`&&`运算符仅用于比较布尔值。那就是`true && true`。你给它整数，它不喜欢那样。

您可能想要解决此问题的一种方法是编写一个函数来确定是否达到了解决方案。所以也许是这样的：

```
private boolean isSolutionPresent(int[] taken, int index1, int index2, int index3) {
    return (taken[index1] == 1 ) && (taken[index2] == 1) && (taken[index3] == 1);
} 
```

然后你可以将你的 if 语句转换为：

```
if (isSolutionPresent(taken, 0, 3, 6) ||
    isSolutionPresent(taken, 0, 1, 2) ||
    isSolutionPresent(taken, 2, 5, 8) || //... etc, removing the final ==1 
```

由于该`isSolutionPresent`方法返回一个布尔值（即真/假），您可以将`||`运算符应用于它。

# c# - 用非法字符解析 XML - 在 VB6 中加载正常

> ID：11251747
> 
> 赞同：0
> 
> 时间：2012-06-28T19:41:34.143
> 
> 标签：c#, .net, xml

我正在尝试将使用 ADODB 在 VB6 应用程序中生成的 XML 文件加载到 .Net 应用程序中。这些 XMl 文件中的一些包含在 .Net 端引发错误但通过原始 VB6 应用程序加载完美的无效字符。例如

VB6 代码（这工作正常）：

```
Dim xmlDoc As MSXML.DOMDocument
xmlDoc.Load(XMLfilename) 
```

C# 代码（这会引发错误 'john' is an unexpected token）

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc .Load(XMLfilename); 
```

这是引发错误的行示例：'Cliff' 是意外标记。期待留白

```
<rs:data>
<z:row ID="1234" ENRODATE="2010-11-12" LastName="Van "Cliff" Anderson" FirstName="Mark" GENDER="MALE"/>
</rs:data> 
```

我明白以上不是有效的 XML，但 VB6 可以毫无问题地接受这一点。有没有办法处理这样的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:44:35.530

您在 Cliff 周围有额外的引号导致无效的 XML 语法

> 姓氏="范“克里夫”安德森"

显然 VB6 解析器以某种方式原谅了这一点。您将需要删除引号或[正确转义它们](https://stackoverflow.com/questions/3961505/how-to-escape-double-quotes-in-xml-attributes-values)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T20:02:14.070

要解决此问题，您必须分析 XML。

`LastName="Van "Cliff" Anderson"`- 是无效的，因为有“字符”，它以姓氏结尾。你有姓氏=“范”，你有一些无效的悬崖“安德森”。

为了解决这个问题，你必须找到这个属性的开始和这个属性的结束 LastName = (start)"Van "Cliff" Anderson"(end)。

您必须将 VB6 生成的 XML 更改为不使用属性，而是使用新的 XML Element `<LastName>Van "Cliff" Anderson"<\LastName>`。如果您无法更改 VB6 的输出，则必须先手动更改，然后再执行`xmlDoc .Load(XMLfilename);`.

结果 XML：

```
 <z:row ID="1234" ENRODATE="2010-11-12" FirstName="Mark" GENDER="MALE">
     <LastName>Van "Cliff" Anderson<\LastName>
 <\z:row> 
```

# sql-server - 哪种连接语法更好？

> ID：11251751
> 
> 赞同：4
> 
> 时间：2012-06-28T19:41:51.470
> 
> 标签：sql-server, tsql, join, informix, ansi

所以我们正在从 Informix 迁移到 Sql Server。我注意到在 Informix 中查询是以这种方式编写的：

```
select [col1],[col2],[col3],[col4],[col5]
from tableA, tableB
where tableA.[col1] = table.[gustavs_custom_chrome_id] 
```

而我在 SQL Server 中编写的所有查询都写成：

```
select [col1],[col2],[col3],[col4],[col5]
from tableA 
inner join tableB on tableA.[col1] = table.[gustavs_custom_chrome_id] 
```

现在，我的第一个想法是：第一个查询很糟糕。它可能会创建这个巨大的记录集，然后使用 Where 子句减少到实际的记录集。因此，这对性能不利。而且它不是ansi。所以它是双重的坏。

然而，经过一番谷歌搜索，从理论上讲，它们似乎几乎相同。它们都符合 ANSI 标准。

所以我的问题是：

1.  两个查询执行相同吗？IE。运行速度一样快，并且总是给出相同的答案。
2.  两者都真的符合 ANSI 标准吗？
3.  有什么突出的理由让我应该推动一种风格而不是另一种风格？还是我应该独自离开足够好？

    **注意：这些只是查询的示例。我见过一些查询（第一类）一次最多连接 5 个表。**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-28T19:47:04.730

好吧，“更好”是主观的。这里有一些风格。但我会直接回答你的问题。

1.  两者执行相同
2.  两者都符合 ANSI。
3.  第一个例子的问题是

    *   很容易无意中得出叉积（因为更容易省略连接条件）

    *   随着您将越来越多的表添加到连接中，调试连接条件也变得困难

    *   由于旧式外连接 (*=) 语法已被弃用（[它早已被记录为返回不正确的结果](http://web.archive.org/web/20110830211650/http://www.sqlmag.com/article/sql-server/old-join-syntax-vs-new)），当您需要引入外连接时，您需要混合使用新式和旧式连接...为什么要推广不一致？

    *   虽然它不完全是最佳实践的权威，但[Microsoft 建议使用明确的 INNER/OUTER JOIN 语法](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2010/dd172122(v=vs.100))

    *   使用后一种方法：

        *   无论内部/外部如何，您都使用一致的连接语法
        *   意外导出叉积更难（并非不可能）
        *   将连接条件与过滤条件隔离开来可以使调试更容易

我写[了凯文指出的帖子](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)。

# java - 级联保存不适用于 Hibernate 4 和 @OneToMany

> ID：11251754
> 
> 赞同：6
> 
> 时间：2012-06-28T19:42:04.940
> 
> 标签：java, hibernate, jpa, dao

我一直遇到 Hibernate 4 中没有发生在 Hibernate 3 中的问题。我正在测试一个基本 dao 类，它具有用于保存、查询等的通用方法。（不是作业）。我正在使用带有 hibernate.hbm2ddl.auto=create-drop 的嵌入式 derby 连接进行测试。

编辑：修复 cascadeType。仍然是相同的行为。即使我从 CascadeType 枚举中添加了所有可用的级联类型，它仍然会失败，除非我输入 CascadeType.ALL。不确定所有您无法具体列举的内容。

在我的测试中，我有以下映射类：

```
@Entity
@Table(name="FOO_CHILD")
public class FooChild {
    @Id
    @Column(name="FOO_ID")
    private Long id;

    @Column(name="NAME")
    private String name;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}

@Entity
@Table(name="FOO_PARENT")
public class FooParent {
    @Id
    @Column(name="FOO_PARENT_ID")
    private Long id;

    @Column(name="NAME")
    private String name;

    @Fetch(FetchMode.SELECT)
    @Type(type="long")
    @OneToMany(cascade={CascadeType.PERSIST, CascadeType.MERGE})
    @JoinTable(name="FOO_PARENT_FOO",
            joinColumns={@JoinColumn(referencedColumnName="FOO_PARENT_ID")},
            inverseJoinColumns={@JoinColumn(referencedColumnName="FOO_ID")})
    private List<Foo> fooChild;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public List<Foo> getFooChild() {
        return fooChild;
    }

    public void setFooChild(List<Foo> fooChild) {
        this.fooChild = fooChild;
    }
} 
```

然后我尝试保存：

```
FooChild fooChild = new FooChild();
fooChild.setId(1L);
fooChild.setName("fooChild");

FooParent fooParent = new FooParent();
fooParent.setId(1L);
fooParent.setName("fooParent");
fooParent.setFooChild(new ArrayList<FooChild>(Arrays.asList(fooChild)));

session.save(fooParent);
session.flush();
session.clear(); 
```

我得到以下跟踪：

```
org.hibernate.exception.ConstraintViolationException: INSERT on table 'FOO_PARENT_FOO' caused a violation of foreign key constraint 'FKF18290CAECA19CB8' for key (1).  The statement has been rolled back.
    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:74)
... 
```

我注意到正在执行以下 sql：

```
Hibernate: 
    insert 
    into
        foo_parent
        (name, foo_parent_id) 
    values
        (?, ?, ?, ?)
Hibernate: 
    insert 
    into
        foo_parent_foo
        (foo_parent, foo_child) 
    values
        (?, ?) 
```

似乎它试图在将保存级联到 FooChild 对象之前插入集合。

如果我将 FooParent 更改为：

```
@OneToMany(cascade={CascadeType.ALL}) 
```

问题消失了。

正如我所说，这适用于休眠 3，所以我不确定为什么它的行为不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T21:52:19.340

`save()`,是三种不同的操作`persist()`。`merge()`如果要级联`save()`操作，需要使用Hibernate注解

```
@Cascade(CascadeType.SAVE_UPDATE) 
```

或者

```
cascade = CascadeType.ALL 
```

，其中还包括 Hibernate 专有操作。

# ajax - 如何在 AngularJS 中制作 AJAX 嵌套列表？

> ID：11251756
> 
> 赞同：0
> 
> 时间：2012-06-28T19:42:09.693
> 
> 标签：ajax, angularjs

我列出了通过 AJAX 加载内容的列表，它按预期工作。

我现在想让每个列表条目加载（通过 AJAX）并在单击时显示一个子列表。

这在AngularJS中可能吗？（我是 AngularJs 的新手，对 $scope 有点困惑。）

```
<div ng-controller="StockGroupCtrl">
  <ul>
    <li ng-repeat="group in groups">
      <span>{{group.prod_grp}}</span>
      <span>{{group.desc}}</span>
      <!-- something like
        <ul ng-controller="WhatShouldItBe?">
          <li ng-repeat="item in items">
            <span>{{item.name}}</span>
            <span>{{item.price}}</span>
          </li>
        </ul>
      -->
    </li>
  </li>
</div> 
```

我已经使外部代码与：

```
function StockGroupCtrl($scope, $http) {
    $scope.groups = [];
    $scope.handleGroupsLoaded = function(data, status) {
        $scope.groups = data;
    }
    $scope.fetch = function() {
        $http.get('/api/stock/groups/').success($scope.handleGroupsLoaded);
    }
    $scope.fetch();
} 
```

但我真的看不出从内部列表开始的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T21:52:54.143

这个怎么样？你不需要另一个控制器。

```
 <ul>
      <li ng-repeat="item in group.items">
        <span>{{item.name}}</span>
        <span>{{item.price}}</span>
      </li>
    </ul> 
```

# json - Node.js 返回 JSON 作为文件

> ID：11251760
> 
> 赞同：0
> 
> 时间：2012-06-28T19:42:19.817
> 
> 标签：json, api, node.js

我正在编写一个 node.js 应用程序，当我尝试从第三方 API 获取数据时发生了最奇怪的事情。我将 JSON 结果作为文件获取。在控制台中，它会正确输出文本，但是当我从浏览器中点击它时，它会下载一个包含 json 字符串的文件。我试过做 JSON.stringify 但这只是打印出我相信的十六进制。

如何告诉 node.js 将结果的内容输出到浏览器？

```
 https.get({ host: 'api.bookshare.org', path: '/book/searchFTS/"+keyword+"/page/1/limit/250/format/json?api_key=2msxgk595nke8rhwmbzh8sut' }, function(res) {
  console.log("statusCode: ", res.statusCode);
  console.log("headers: ", res.headers);

  res.on('data', function(d) {
    console.log(d);
  });

}).on('error', function(e) {
  console.error(e);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:59:02.853

Chrome 将内容类型标头 text/json 视为文件。将其设置为 text/plain 就可以了。

# dynamics-crm-2011 - 如何在 LinqPad 中执行 ODATA 扩展

> ID：11251763
> 
> 赞同：6
> 
> 时间：2012-06-28T19:42:29.893
> 
> 标签：dynamics-crm-2011, odata, linqpad

我正在使用 LINQPad 连接到本地 CRM 组织上的 ODATA 服务，但我不知道如何使用 LINQPad 执行“连接”或遍历关系。

这是我的网址

```
OrganizationData.svc/New_locationSet?$select=new_state_new_location/new_Region$expand=new_state_new_location 
```

这在浏览器中工作得很好。这是我在 LINQPad 中所做的事情：

```
from l in new_locationSet
from s in l.new_state_new_location
select s.new_Region 
```

但我收到一个错误：

```
An expression of type 'LINQPad.User.New_state' is not allowed in a subsequent from clause in a query expression with source type 'System.Data.Services.Client.DataServiceQuery<LINQPad.User.New_location>'.  Type inference failed in the call to 'SelectMany'. 
```

有任何想法吗？我发现 LINQPad OData 文档非常缺乏......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T21:02:36.200

您只需要投影出您想要扩展的内容，例如：

```
from p in Products
select new {p.Name, CategoryName = p.Category.Name} 
```

或者

```
Products.Select(p => new { p.Name, CategoryName = p.Category.Name}) 
```

将产生

```
http://services.odata.org/(S(readwrite))/OData/OData.svc/Products()?$expand=Category&$select=Name,Category/Name 
```

在 LinqPad 的请求日志选项卡中。

# javascript - 查找在其上初始化了 jquery 小部件的元素

> ID：11251765
> 
> 赞同：3
> 
> 时间：2012-06-28T19:42:39.560
> 
> 标签：javascript, jquery, widget

我正在使用[jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)小部件（尽管我相信这个问题可以推广到任何 jQuery 小部件）。[API](https://github.com/blueimp/jQuery-File-Upload/wiki/API)指示用户使用该方法初始化小部件，`fileupload`因此：

```
$('#fileupload').fileupload(); 
```

我的问题是：在不知道 ID 的情况下，我怎么能找到`#fileupload`（以及任何其他已经`.fileupload()`调用它们的元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T19:48:51.240

jQuery File Upload 在后台使用 jQuery UI 小部件工厂，并且众所周知，该工厂使用它们使用[data()](http://api.jquery.com/data/)扩展的元素注册小部件实例。

因此，您可以使用[filter()](http://api.jquery.com/filter/)并编写如下内容：

```
// Restrict ancestor if you can, $("*") is expensive.
var uploadified = $("#yourAncestor *").filter(function() {
    return $(this).data("fileupload");
}); 
```

***更新：***从 jQuery UI 1.9 开始，[键`data()`成为小部件的完全限定名称，点被替换为破折号](http://jqueryui.com/upgrade-guide/1.9/#changed-naming-convention-for-data-keys)。因此，上面的代码变为：

```
var uploadified = $("#yourAncestor *").filter(function() {
    return $(this).data("blueimp-fileupload");
}); 
```

1.9 中仍支持使用非限定名称，但已弃用，并且将在 1.10 中删除支持。

# android - 收到内存不足警告，但我似乎没有泄漏内存

> ID：11251766
> 
> 赞同：3
> 
> 时间：2012-06-28T19:42:44.903
> 
> 标签：android, android-activity, android-lifecycle

我的应用程序正在关闭而没有任何错误消息，并在切换活动大约 20 或 30 次后自动重新启动。我正在通过点击一个按钮来测试这一点，该按钮使用不同的数据重新启动当前活动（一旦到达数据末尾，就会循环回到开头）。该活动是使用`FLAG_ACTIVITY_CLEAR_TOP`标志启动的，因此一次在内存中应该只有一个活动实例。如果我设置`FLAG_ACTIVITY_NO_HISTORY`问题仍然存在。

当应用程序崩溃时，这会出现在 logcat 输出中：

```
06-28 19:32:10.472: I/ActivityManager(115): Process com.mypackage.myapp (pid 3718) has died.
06-28 19:32:10.476: I/WindowManager(115): WIN DEATH: Window{406d06e0 com.mypackage.myapp/com.mypackage.myapp.welcome.LoginActivity paused=false}
06-28 19:32:10.480: E/InputDispatcher(115): channel '406ade20 com.mypackage.myapp/com.mypackage.myapp.matchup.MatchUpActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
06-28 19:32:10.480: E/InputDispatcher(115): channel '406ade20 com.mypackage.myapp/com.mypackage.myapp.matchup.MatchUpActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
06-28 19:32:10.535: I/WindowManager(115): WIN DEATH: Window{406ade20 com.mypackage.myapp/com.mypackage.myapp.matchup.MatchUpActivity paused=false}
06-28 19:32:10.539: I/WindowManager(115): WIN DEATH: Window{407a8230 com.mypackage.myapp/com.mypackage.myapp.fightcard.FightCardActivity paused=false}
06-28 19:32:10.566: I/ActivityManager(115): Start proc com.mypackage.myapp for activity com.mypackage.myapp/.fightcard.FightCardActivity: pid=3915 uid=10053 gids={3003}
06-28 19:32:10.574: I/ActivityManager(115): Low Memory: No more background processes. 
```

通常这会告诉我应用程序正在泄漏内存，但是如果我在 Eclipse 中查看 DDMS 透视图时执行此测试，我可以看到分配的内存是稳定的，实际上即使使用的百分比是，应用程序也会经常崩溃坐在 50% 左右（这是它大部分时间的位置）。堆大小和分配的内存没有增加。

我`MAT`在该应用程序上广泛使用过，虽然我之前确实发现了内存泄漏，但我已经解决了这些问题，并且无法再找到该工具的任何其他问题。

我已经能够在运行 Gingerbread 的 Nexus S 上重现此问题，但在运行 4.0.4 的 Galaxy Nexus 上似乎无法重现此问题（但这可能是因为 Galaxy 上的堆更大）。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T19:12:41.157

David Wasser 的上述建议使我找到了解决方案。我注意到当我运行上述命令时，我得到了一大堆自定义字体资产分配：

```
zip:/data/app/com.mypackage.myapp-2.apk:/assets/DINNextLTPro-MediumCond.otf: 98K 
```

随着我改变活动，这些分配似乎正在迅速增加。一些谷歌搜索让我找到了这个链接：[http ://code.google.com/p/android/issues/detail?id=9904](http://code.google.com/p/android/issues/detail?id=9904)

因此，似乎存在与使用自定义字体相关的 Android 错误。以下解决方法取自上面的链接：

```
public class Typefaces {
    private static final String TAG = "Typefaces";

    private static final Hashtable<String, Typeface> cache = new Hashtable<String, Typeface>();

    public static Typeface get(Context c, String assetPath) {
        synchronized (cache) {
            if (!cache.containsKey(assetPath)) {
                try {
                    Typeface t = Typeface.createFromAsset(c.getAssets(),
                            assetPath);
                    cache.put(assetPath, t);
                } catch (Exception e) {
                    Log.e(TAG, "Could not get typeface '" + assetPath
                            + "' because " + e.getMessage());
                    return null;
                }
            }
            return cache.get(assetPath);
        }
    }
} 
```

本质上，我们正在缓存自定义字体资源的实例，因此每个实例只需要实例化一次。

# java - Spring、Hibernate、C3P0 和 Jetty

> ID：11251768
> 
> 赞同：0
> 
> 时间：2012-06-28T19:42:55.890
> 
> 标签：java, spring, hibernate, jetty, c3p0

我继承了一个项目，并试图让它通过 jetty:run 运行但无济于事。使用 run-war 或 run-exploded 可以正常工作，但似乎无法确定普通旧运行的问题。它给了我以下堆栈：

```
2012-06-28 15:02:32.247:INFO:/:Initializing Spring root WebApplicationContext
WARN [main] JDBCExceptionReporter.logExceptions(233) | SQL Error: 0, SQLState: null
ERROR [main] JDBCExceptionReporter.logExceptions(234) | Cannot create PoolableConnectionFactory (Access denied for user 'root'@'localhost' (using password: NO))
WARN [main] SettingsFactory.buildSettings(147) | Could not obtain connection to query metadata
org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'root'@'localhost' (using password: NO))
    at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:855)
    at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:540)
    at org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:82)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:114)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2833)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2829)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1840)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:814) 
```

/src/main/resources/applicationContext-resources.xml

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:jdbc.properties</value>
            <value>classpath:mail.properties</value>
        </list>
    </property>
</bean>

<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" >
    <property name="driverClass"  value="${jdbc.driverClassName}"/>
    <property name="jdbcUrl" value="${jdbc.url}"/>
    <property name="user" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
    <property name="initialPoolSize" value="8"/>
    <property name="minPoolSize" value="8"/>
    <property name="maxPoolSize" value="32"/>
    <property name="idleConnectionTestPeriod" value="600"/>
    <property name="maxIdleTime" value="0"/>
    <property name="maxStatements" value="0"/>
    <property name="maxStatementsPerConnection" value="0"/>
    <property name="acquireIncrement" value="3"/>
    <property name="acquireRetryAttempts" value="3"/>
    <property name="acquireRetryDelay" value="1000"/>
    <property name="autoCommitOnClose" value="false"/>
    <property name="maxConnectionAge" value="14400"/>
    <property name="forceIgnoreUnresolvedTransactions" value="false"/>
    <property name="numHelperThreads" value="20"/>
    <property name="testConnectionOnCheckin" value="false"/>
    <property name="testConnectionOnCheckout" value="false"/>
    <property name="preferredTestQuery" value="select id from xtcirc101themes where rownum = 1"/>
    <property name="maxAdministrativeTaskTime" value="0"/>
    <property name="debugUnreturnedConnectionStackTraces" value="false"/>
    <property name="maxIdleTimeExcessConnections" value="0"/>
    <property name="breakAfterAcquireFailure" value="false"/>
    <property name="checkoutTimeout" value="0"/>
    <property name="unreturnedConnectionTimeout" value="0"/>
    <property name="usesTraditionalReflectiveProxies" value="false"/>
</bean> 
```

/src/main/resources/applicationContext.xml

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="annotatedClasses">
        <list>
            .
            .
            .
        </list>
    </property>
</bean> 
```

/WEB-INF/web.xml 中的上下文配置

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        classpath:/applicationContext-resources.xml
        classpath:/applicationContext-dao.xml
        classpath:/applicationContext-service.xml
        classpath*:/applicationContext.xml
        /WEB-INF/applicationContext*.xml
        /WEB-INF/classes/applicationContext*.xml
        /WEB-INF/classes/tbmJobs*.xml
        /WEB-INF/xfire-servlet.xml
        /WEB-INF/security.xml
    </param-value>
</context-param> 
```

/src/main/resources/jdbc.properties

```
jdbc.driverClassName=${jdbc.driverClassName}
jdbc.url=${jdbc.url}
jdbc.username=${jdbc.username}
jdbc.password=${jdbc.password}

hibernate.dialect=${hibernate.dialect}

# Needed by Hibernate3 Maven Plugin defined in pom.xml
hibernate.connection.username=${jdbc.username}
hibernate.connection.password=${jdbc.password}
hibernate.connection.url=${jdbc.url}
hibernate.connection.driver_class=${jdbc.driverClassName} 
```

在 pom.xml 中配置的属性

```
<properties>
    <dbunit.dataTypeFactoryName>org.dbunit.ext.oracle.OracleDataTypeFactory</dbunit.dataTypeFactoryName>
    <dbunit.schema>SYSTEM</dbunit.schema>
    <hibernate.dialect>org.hibernate.dialect.Oracle10gDialect</hibernate.dialect>

    <jdbc.groupId>com.oracle</jdbc.groupId>
    <jdbc.artifactId>ojdbc14</jdbc.artifactId>
    <jdbc.version>10.2.0.3.0</jdbc.version>
    <jdbc.driverClassName>oracle.jdbc.OracleDriver</jdbc.driverClassName>
    <jdbc.url>jdbc:oracle:thin:@${oracle.host}:1521:${oracle.sid}</jdbc.url>
    <jdbc.username>*******</jdbc.username>
    <jdbc.password>*******</jdbc.password>
</properties> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:56:31.530

因此，经过大量研究和反复试验，罪魁祸首似乎是 jetty-maven-plugin。该项目使用的是 6.1.9 版本，当我意识到它在执行 jetty:run 时不允许战争覆盖时，我立即将其更改为 6.1.26。这导致了上述错误。

通过反复试验，我能够确定 dataSource bean 和 applicationContext-resources.xml 文件存在问题。由于未定义数据源，在尝试创建 sessionFactory 时，注释掉 xml 文件中的 bean 定义应该会导致 BeanCreationException。然而，这被证明是不真实的并导致相同的错误，这意味着它指的是不同的数据源，可能在 Spring 中配置为默认值？目前不确定。将 dataSource 重命名为 dataSource2 解决了这个问题，但我不喜欢这个解决方案。

阅读有关 jetty 插件的更多信息后，我决定迁移到最新版本的 jetty 7。我最初决定继续使用 6，因为我不想一次进行太多更改，但迁移到 7 被证明是一个明智的决定。数据源文件的问题立即消失了。这导致了下一组问题，即struts。似乎我们在 struts.xml 中覆盖并重用了 default 和 admin 的包名称。这同样适用于 run-war 或 run-exploded，但运行时会导致 struts 错误。我们目前使用的是 appfuse 版本 2.0.2，但我也在考虑更新它。

一旦我能够解决 struts 问题，我就会遇到 web.xml 的问题。我们一直在使用资源过滤来动态设置 web.xml 和几个 jsp 中的一些值。这是 jetty:run 的问题，因为它假定 webapp 文件是静态的并且不应用资源过滤。使用标签我能够告诉码头和战争插件使用 web.xml 的资源过滤版本。不过，jsp 是另一个问题。

有点谷歌搜索，我发现。使用属性文件，我能够对 is 应用资源过滤，然后使用 spring，在访问 jsp 时从属性文件中读取值。最后，我可以让 jetty:run 启动我的应用程序。但是，现在似乎在尝试热交换代码时出现 PermGen 空间错误。看起来它经历了多次重启并最终导致 PermGen 错误。我目前将 PermGen 大小设置为 -XX:PermSize=64M -XX:MaxPermSize=128M。猜猜它更多的试错时间。

# intellij-idea - 如何快速创建编辑器折叠？

> ID：11251770
> 
> 赞同：23
> 
> 时间：2012-06-28T19:43:06.243
> 
> 标签：intellij-idea, netbeans, ide

当我编辑 GUI 类时，我发现编辑器折叠。

```
// <editor-fold defaultstate="collapsed" desc="Generated Code">
...
// </editor-fold> 
```

我已经开始将它用于我自己的目的，但是要写几句话。所以我正在寻找更快的方法。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-10-08T01:57:57.997

在 Netbeans 中，您可以键入“fcom”并按“TAB”。

更多快捷方式[在这里](http://netbeans.dzone.com/top-10-interesting-netbeans-shortcuts)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-07-30T18:13:23.523

它现在是 Netbeans 7.3.1 中的默认行为。

只需选择行并单击`Surround with ...`如下快照。

![在此处输入图像描述](../Images/d60721a56f51afc9e09c4ac259cf041c.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-06T19:07:32.003

我找到了，很简单:)

[http://wiki.netbeans.org/SurroundWithCodeFolding](http://wiki.netbeans.org/SurroundWithCodeFolding)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-03-20T04:17:40.980

以前的解决方案对我不起作用（可能是因为我在 Mac 上）所以我是这样做的：

1.  转到 IntelliJ IDEA >**首选项**>**编辑器**>**实时模板**
2.  单击右上角的`+`按钮，输入您的模板名称和以下代码：

```
// <editor-fold defaultstate="collapsed" desc="$DESCRIPTION$">
$SELECTION$$END$
// </editor-fold> 
```

3.  在描述选项卡中，输入“**代码折叠**”，单击“**定义**”（在“尚无适用的上下文”旁边）并选择“ **Java** ”（或者您可以根据需要更具体），选中“根据样式重新格式化”复选框并单击 Ok Now，如果您在编辑器中选择多行文本，请按
    `⌥</kbd>+`⌘</kbd>+`T` (`CTRL`+`ALT`+`T` in Windows) and select the "Code folding" template, enter a description and you're done.``

# python - 在 PyDev 中运行时，对 multiprocessing.Process.start() 的一次调用会在 Windows 中产生 100 个进程

> ID：11251773
> 
> 赞同：0
> 
> 时间：2012-06-28T19:43:13.653
> 
> 标签：python, multiprocessing, pydev

我试图在 PyDev 中使用多处理模块的组件上工作，但是在运行代码时遇到问题，会在操作系统中产生 100 多个 python 进程并杀死我的机器。我有我的代码调用`run()`而不是`start()`，它运行良好（当然，除了它都是单线程的，因为`start()`它实际上产生了进程），所以这向我表明我的代码至少没有做任何疯狂的事情，比如无限生成过程什么的。此外，我整理了一些测试代码来看看发生了什么：

```
from multiprocessing import Process
import time

def create_processes(num_processes, method, *args):

    processes = []
    for i in range(num_processes):
        processes.append(Process(target=method, args=args))
    return processes

def start_all(processes, stagger):

    for process in processes:
        process.start()
        if stagger:
            time.sleep(stagger)

processes = create_processes(2, time.sleep, 4)
start_all(processes, 0) 
```

当我在 cli 中运行它时，它工作正常；它产生 2 个在超时后结束的新进程。但是，当我在 PyDev 中运行它时，它会生成大约 600 个进程（或者至少这是我的机器无响应之前任务管理器显示的数量）。我做了一点调试，它似乎在`Process.start()`上线`self._popen = Popen(self)`。

我做了一些搜索，但找不到任何似乎相关的东西。CLI 是否自动`join()`将所有`start()`ed 进程分配给某个单独的管理器以保持控制？我的代码中是否需要一个线程来处理我的`join()`所有进程？PyDev 是否​​在尝试维护日志记录和控制？有其他事情发生吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:49:37.963

如果这是代码的起点，您应该将最后两行包装起来`if __name__ == '__main__'`，以防止子进程启动自己的子进程：

```
if __name__ == '__main__':
    processes = create_processes(2, time.sleep, 4)
    start_all(processes, 0) 
```

# database - 一个细节可以有两个主人吗？

> ID：11251776
> 
> 赞同：1
> 
> 时间：2012-06-28T19:43:34.310
> 
> 标签：database, delphi, ms-access

我正在为如何为有人（非匿名）填写问卷的情况建立数据库而苦苦挣扎。人与问卷的关系是多对多的——一个人完成多份问卷，一份问卷由多人完成。所以，我有一个 PERSON 表、一个 QUESTIONNAIRE 表和一个连接表 (PERSON-QUESTIONNAIRE)。

但是我应该把问卷中出现的信息放在哪里呢？问卷项目有两个部分（两个字段），一个带有人们将回答的问题或陈述（ITEM），另一个带有用于回答的空间（RESPONSE）。假设所有这些都放在一个单独的表中，该表与什么连接？（QUESTIONNAIRE 表……一个 QUESTIONNAIRE 可以有多个 QUESTIONNAIRE-ITEMS？）

而且，如果我对最后一点是正确的，我一生都无法弄清楚如何设置一个数据库网格（在 Delphi 中），它将显示选定问卷和选定人员的 ITEM 和 RESPONSE 字段。（我知道如何用 db-aware 组件编写 master/detail 关系，但这就像两个 master 的细节。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T19:52:51.933

You will have a table QUESTIONNAIRE-ITEMS (the questions) and a separate table QUESTIONNAIRE-RESPONSES (the answers), because there will be multiple answers for a single question, those from multiple persons. The former gets a foreign key to QUESTIONNAIRE, while the latter gets foreign keys to both QUESTIONNAIRE-ITEMS and PERSON.

In fact, the PERSON-QUESTIONNAIRE table could be omitted, since that information could be queried from the other tables. So for the design I suggest:

*   Surveys: ID (PK), Description, etc...
*   Users: ID (PK), Name, etc...
*   Questions: ID (PK), SurveyID (FK), Question, etc...
*   Answers: ID (PK), QuestionID (FK), UserID (FK), Answer, etc...

The view for the DBGrid will be based on a query like:

```
SELECT 
  Question, 
  Answer,
  ...
FROM 
  Questions INNER JOIN Answers ON Questions.ID = Answers.QuestionID
WHERE
  Questions.SurveyID = :SurveyID AND Answers.UserID = :UserID 
```

In another part of you GUI, you select the `SurveyID` and `UserID` parameters.

And as a bonus: the query to acquire surveys and users, as an alternative to your separate join table, will look like :

```
SELECT
  Surveys.ID,
  Users.ID
FROM
  Users INNER JOIN (
    Answers INNER JOIN (
      Questions INNER JOIN (
        Surveys
      ) ON Questions.SurveyID = Surveys.ID
    ) ON Answers.QuestionID = Questions.ID
  ) ON Users.ID = Answers.UserID
GROUP BY
  Surveys.ID,
  Users.ID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T19:54:31.407

ITEM 和 RESPONSE 应该是不同的表；它们之间存在一对多的关系。（一个项目属于一个问卷，但很多人可以提供对该项目的响应，因此每个项目将有多个响应。）

我推荐这样的设置：

```
PERSON  <---- PERSON_QUESTIONNAIRE ----> QUESTIONNAIRE
                        ^                       ^
                        |                       |
                        |                       |
                     RESPONSE      ----->     ITEM 
```

我对如何设置 DB 网格（不是 Delphi 大师）没有任何建议，但有时解决设计问题将有助于技术解决方案变得更清晰。

# c# - C# - 将参数约束为 Type 的实例

> ID：11251778
> 
> 赞同：1
> 
> 时间：2012-06-28T19:43:48.133
> 
> 标签：c#, types, constraints

我想创建将 a`Dictionary`映射`Type`到 a 的a `Action`，但我希望键是来自特定父类的类型。所以我想做类似的事情：

```
class Container
{
    private Dictionary<Type, Action> dict;

    public void AddAction(Type t, Action a) where t : typeof(SomeParentClass)
    {
        dict[t] = a;
    }
} 
```

该`AddAction`方法仅接受`t`作为某些特定类的子类的类类型的值。我已经看到在 Java 中使用`extends`关键字完成了类似的操作，但如果可能的话，我无法弄清楚如何在 C# 中执行此操作。

编辑：为了澄清，我不希望 AddAction 方法采用 SomeParentClass 的实例，而是采用作为 SomeParentClass 子类的类的类型。有没有比使用类型更好的方法？

编辑：我实际上要做的是创建一个调度服务，其中应用程序的各个部分可以注册对 Event 类型的兴趣，并提供一个在触发该类型的事件时调用的 Action。所以想象一下

```
service.RegisterInterest(typeof(MyEvent), myAction) 
```

Where `myAction`is of type `Action<MyEvent>`（我没有在原始帖子中放入但应该有而不是 plain 的东西`Action`）。

然后应用程序的其他部分可以做

```
service.TriggerEvent(typeof(MyEvent)) 
```

这会导致所有`Action<MyEvent>`按上述方式注册的实例都被调用......所以实际上`Dictionary`将 a 映射`Type`到 a `List<Action<Event>>`，而不是单个`Action`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T19:52:12.753

If you require compile-time checking you can use generics:

```
public void AddAction<T>(Action a) where T : SomeParentClass
{
    dict[typeof(T)] = a;
} 
```

You may also want to keep the non-generic version

```
public void AddAction(Type t, Action a)
{
    if(! typeof(SomeClass).IsAssignableFrom(t)) throw new ArgumentException();
    dict[t] = a;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:53:02.953

I'd go with something like this:

```
class Container
{
    private Dictionary<Type, Action> dict;

    public bool AddAction(Type t, Action a) 
    {
        if (typeof(SomeParentClass).IsAssignableFrom(t))
        { 
            dict[t] = a;
            return true;
        }
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:46:14.987

代替`Type t`,`SomeParentClass t`用作参数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T19:57:05.247

向方法添加断言。

```
Debug.Assert(t.IsAssignableFrom(typeof(SomeParentClass))); 
```

# javascript - 将元标记的内容返回给 JavaScript 变量？

> ID：11251780
> 
> 赞同：-3
> 
> 时间：2012-06-28T19:43:52.957
> 
> 标签：javascript, variables, meta-tags

> **可能重复：**
> [如何使用 javascript 从元标记中获取信息？](https://stackoverflow.com/questions/7524585/how-do-i-get-the-information-from-a-meta-tag-with-javascript)

我有一个可以在自定义页面上填写内容的元标记，我需要将内容作为 JavaScript 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:46:51.877

[http://www.webmasterworld.com/javascript/3224334.htm](http://www.webmasterworld.com/javascript/3224334.htm)有示例代码，更多信息请参见其讨论。

```
function getMetaContents(mn){
    var m = document.getElementsByTagName('meta');
    for(var i in m){
        if(m[i][i].name == mn){
            return m[i].content;
        }
    }
} 
```

# javascript - JavaScript 在 Raphael.js 地图上动态绘制点

> ID：11251782
> 
> 赞同：1
> 
> 时间：2012-06-28T19:43:57.933
> 
> 标签：javascript, raphael

我正在使用 John Emerson 的[世界地图](https://github.com/bcks/javascript_world)按纬度/经度绘制一些度假目的地。如果我对所有内容进行硬编码，我可以将鼠标悬停在上面并单击该点，这将显示假期标题。但是，由于尝试通过检索 JSON 来动态绘制我的目的地，我无法再单击。任何 JavaScript 专家都可以帮助我找出我做错了什么吗？

这是我的代码：

```
window.onload = function () {
  var current = null;
  var map = {};
  var m = {};       
  var attr = {
    fill: "#333",
    stroke: "#888",
    "stroke-width": .5,
    "stroke-linejoin": "round"
  };        
  var map = {};
  var R = Raphael("holder_570");
  render_map(R,map,attr);   
  for (var state in map) {                      
            map[state].color = Raphael.getColor();
            (function (st, state) {
      st[0].style.cursor = "pointer";
      st[0].onmouseover = function () {
        current && map[current].animate({fill: "#333", stroke: "#666"}, 300);
        // st.animate({fill: st.color, stroke: "#ccc"}, 300);
        R.safari();
        // current = state;
      };
      st[0].onmouseout = function () {
        st.animate({fill: "#333", stroke: "#666"}, 300);
        R.safari();
      };

      // st[0].onclick = function () {
      //   alert(state);
      // };
    })(map[state], state);
  }; // end for

  function lon2x(lon) {
      var xfactor = 1.5255;
      var xoffset = 263.58;
      var x = (lon * xfactor) + xoffset;
      return x;
  }
  function lat2y(lat) {
    var yfactor = -1.5255;
    var yoffset = 130.5;
    var y = (lat * yfactor) + yoffset;
    return y;
  }

  var city_attr = {
    fill: "#0f0",
    stroke: "none",
    opacity: .3
  };
  function plot(lat,lon,size) {
    size = size * .5 + 4;
    return R.circle(lon2x(lon), lat2y(lat), size).attr(city_attr);
  }

  var vacations = {};

  $.getJSON("/vacations_lat_long", function(data) {
    var datum, _i, _len, _results;
    _results = [];
    for (_i = 0, _len = data.length; _i < _len; _i++) {
      datum = data[_i];
      _results.push(vacations[datum.city] = plot(parseFloat(datum.latitude), parseFloat(datum.longitude), 1));
    }
    return _results;
  });

  // HARD CODED EXAMPLES
  // vacations.Nellysford        = plot(37.9069562,-78.8527841,1);
  // vacations.Charles_Town      = plot(39.2536975,-77.9335429,1);

  var current_city = null;
  var city_box = null;
  for (var city in vacations) {                      
            map[state].color = Raphael.getColor();
            (function (st, city) {
      st[0].style.cursor = "pointer";
      st[0].onmouseover = function () {
        current_city && vacations[current_city].animate({fill: "#0f0", opacity: .3}, 300);
        st.animate({fill: "#0f0", opacity: 1}, 300);
        R.safari();
        current_city = city;
      };
      st[0].onmouseout = function () {
        st.animate({fill: "#0f0", opacity: .3}, 300);
        R.safari();
      };

      st[0].onclick = function () {
        if (t = document.getElementById(city_box)) { t.style.display = "none"; }
        if (t = document.getElementById(city)) { t.style.display = "block"; }
        city_box = city;
      };

      if (t = document.getElementById(city)) {
          t.style.left = vacations[city].attr('cx') + 'px';
          t.style.top = vacations[city].attr('cy') -20 + 'px';
      }

    })(vacations[city], city);
  }; // end for

}; 
```

我遇到问题的地方是这段代码：

```
$.getJSON("/vacations_lat_long", function(data) {
    var datum, _i, _len, _results;
    _results = [];
    for (_i = 0, _len = data.length; _i < _len; _i++) {
      datum = data[_i];
      _results.push(vacations[datum.city] = plot(parseFloat(datum.latitude), parseFloat(datum.longitude), 1));
    }
    return _results;
  }); 
```

正如我所说，这些点被绘制了，但是当我将鼠标悬停在这些点上时我看不到不透明度的过渡，当我点击这个点时我也看不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T23:02:08.020

根据给定的信息很难看到这一点，所以这里有一个 jsfiddle，你的例子有问题：

[http://jsfiddle.net/mmrobins/wQYEf/19/](http://jsfiddle.net/mmrobins/wQYEf/19/)

这是修复：

[http://jsfiddle.net/mmrobins/wQYEf/18](http://jsfiddle.net/mmrobins/wQYEf/18)

真的很难看，但问题只是 jquery 调用是异步的，所以到下面的代码设置点击操作时它还没有返回数据。因此，当您在假期中遍历城市时，假期实际上是空的。

修复只是简单地移动 getJSON 回调中的所有代码，以便在数据返回之前它不会运行。

# jquery - 如何检索 JQuery 数据表的排序状态

> ID：11251787
> 
> 赞同：8
> 
> 时间：2012-06-28T19:44:07.087
> 
> 标签：jquery, html, css, dom, datatables

我对 JQuery 数据表很陌生，

我正在尝试检索有关数据表的两个信息

1.  当前正在对哪个列索引进行排序（又名选定）
2.  排序的顺序（升序或降序）

不知道我应该如何解决这个问题（使用 jquery 来查找列索引或者 Datatables 是否有一个 API 可以让我检索这些信息。

非常感谢 :D

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-28T20:15:22.533

我不确定“检索”是什么意思，但是如果您`datatable`这样定义：

```
myDataTable = $('#my-table').dataTable({
              .
              .
              .
              }); 
```

您可以通过以下方式访问其设置：

```
myDataTable.fnSettings(); 
```

也可以看看：

1.  [http://datatables.net/api#fnSettings](http://datatables.net/api#fnSettings)
2.  [http://datatables.net/docs/DataTables/1.9.0/DataTable.models.oSettings.html](http://datatables.net/docs/DataTables/1.9.0/DataTable.models.oSettings.html)

例如，要获取已排序的列数组，请尝试：

```
myDataTable.fnSettings().aaSorting; 
```

[http://datatables.net/docs/DataTables/1.9.0/DataTable.models.oSettings.html#aaSorting](http://datatables.net/docs/DataTables/1.9.0/DataTable.models.oSettings.html#aaSorting)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-01T17:30:42.617

方法 order() 返回包含索引和方向排序的数组数组。

[看看api](https://datatables.net/reference/api/order%28%29)

# javascript - JavaScript 设置和获取 cookie？

> ID：11251791
> 
> 赞同：1
> 
> 时间：2012-06-28T19:44:33.217
> 
> 标签：javascript, html, cookies

我有一个保存 cookie 的功能

```
 cookievalue= escape(document.passwordCheck.oldPassword.value) + ";";
    document.cookie="oldCookie=" + cookievalue
    cookievalue= escape(document.passwordCheck.oldPassword.value) + ";";
    document.cookie="newCookie=" + cookievalue 
```

如何检索 oldCookie 和 newCookie 的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T19:49:02.873

W3CSchool 的功能是错误的。如果有多个 cookie 具有相同的后缀，则它会失败，例如：

```
ffoo=bar; foo=baz 
```

当您搜索`foo`它时，将返回*ffoo*而不是*foo*的值。

现在这就是我要做的：首先，您需要了解 cookie 如何传输的语法。[Netscape 的原始规范（在 haxx.se](http://curl.haxx.se/rfc/cookie_spec.html)中只有这样的副本）使用分号分隔多个 cookie，而每个名称/值对具有以下语法：

> *NAME* `=`*VALUE*
> 这个字符串是一个字符序列，不包括分号、逗号和空格。如果需要在名称或值中放置此类数据，则建议使用一些编码方法，例如 URL 样式`%XX`编码，尽管没有定义或要求编码。

因此`document.cookie`以分号或逗号分隔字符串是一个可行的选择。

除此之外，[RFC 2109](https://www.rfc-editor.org/rfc/rfc2109)还指定 cookie 用分号或逗号分隔：

> ```
> cookie          =       "Cookie:" cookie-version
>                         1*((";" | ",") cookie-value)
> cookie-value    =       NAME "=" VALUE [";" path] [";" domain]
> cookie-version  =       "$Version" "=" value
> NAME            =       attr
> VALUE           =       value
> path            =       "$Path" "=" value
> domain          =       "$Domain" "=" value 
> ```

虽然两者都是允许的，但逗号是首选的，因为它们是 HTTP 中列表项的默认分隔符。

> `;`注意：为了向后兼容，Cookie 标头中的分隔符处处都是分号 ( )。服务器还应该接受逗号 ( `,`) 作为 cookie 值之间的分隔符，以便将来兼容。

此外，名称/值对还有一些进一步的限制，因为*VALUE*也可以是[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616)中指定的带引号的字符串：

> ```
> attr        =     token
> value       =     token | quoted-string 
> ```

所以这两个cookie版本需要分开处理：

```
if (typeof String.prototype.trimLeft !== "function") {
    String.prototype.trimLeft = function() {
        return this.replace(/^\s+/, "");
    };
}
if (typeof String.prototype.trimRight !== "function") {
    String.prototype.trimRight = function() {
        return this.replace(/\s+$/, "");
    };
}
if (typeof Array.prototype.map !== "function") {
    Array.prototype.map = function(callback, thisArg) {
        for (var i=0, n=this.length, a=[]; i<n; i++) {
            if (i in this) a[i] = callback.call(thisArg, this[i]);
        }
        return a;
    };
}
function getCookies() {
    var c = document.cookie, v = 0, cookies = {};
    if (document.cookie.match(/^\s*\$Version=(?:"1"|1);\s*(.*)/)) {
        c = RegExp.$1;
        v = 1;
    }
    if (v === 0) {
        c.split(/[,;]/).map(function(cookie) {
            var parts = cookie.split(/=/, 2),
                name = decodeURIComponent(parts[0].trimLeft()),
                value = parts.length > 1 ? decodeURIComponent(parts[1].trimRight()) : null;
            cookies[name] = value;
        });
    } else {
        c.match(/(?:^|\s+)([!#$%&'*+\-.0-9A-Z^`a-z|~]+)=([!#$%&'*+\-.0-9A-Z^`a-z|~]*|"(?:[\x20-\x7E\x80\xFF]|\\[\x00-\x7F])*")(?=\s*[,;]|$)/g).map(function($0, $1) {
            var name = $0,
                value = $1.charAt(0) === '"'
                          ? $1.substr(1, -1).replace(/\\(.)/g, "$1")
                          : $1;
            cookies[name] = value;
        });
    }
    return cookies;
}
function getCookie(name) {
    return getCookies()[name];
} 
```

***来源：[https ://stackoverflow.com/a/4004010](https://stackoverflow.com/a/4004010)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:47:13.077

来自[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)：

```
function getCookie(c_name) {
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++) {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");
        if (x==c_name) {
            return unescape(y);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:48:22.937

使用 cookie 库或其他函数来获取价值。

[http://www.java2s.com/Code/JavaScript/Development/Cookiesetdeletegetvalueandcreate.htm](http://www.java2s.com/Code/JavaScript/Development/Cookiesetdeletegetvalueandcreate.htm)

```
function getCookieVal (offset) {
  var endstr = document.cookie.indexOf (";", offset);
  if (endstr == -1) { endstr = document.cookie.length; }
  return unescape(document.cookie.substring(offset, endstr));
}

function getCookie (name) {
  var arg = name + "=";
  var alen = arg.length;
  var clen = document.cookie.length;
  var i = 0;
  while (i < clen) {
    var j = i + alen;
    if (document.cookie.substring(i, j) == arg) {
      return getCookieVal (j);
      }
    i = document.cookie.indexOf(" ", i) + 1;
    if (i == 0) break; 
    }
     return null;
  } 
```

# python - 在 Python 中将对象添加到本地范围的所有方法是什么？

> ID：11251794
> 
> 赞同：0
> 
> 时间：2012-06-28T19:44:41.597
> 
> 标签：python

```
my_var = 3
assert('my_var' in locals())

import a_module
assert('a_module' in locals())

from sys import *
assert('stdin' in locals()) 
```

我也认为你可以注入对`locals()`and的调用`globals()`？

无论如何，我喜欢 python，因为它对导入非常明确。如果使用了名称，您通常可以准确地追溯到该名称的定义位置。但是，我最近遇到了一些模块，我想在其中找到名称`qux`的定义位置。模块本身包含 no `from something import *`， no `locals`​​or `globals`，但是当我 CTRL+F 为该名称时，我只在表达式的 RHS 上找到它，没有定义！

所以我的问题是：一个名字可以通过哪些机制进入本地命名空间？正常导入可以注入我的本地命名空间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:02:52.197

其他一些模块可能会在此模块中注入名称：

```
#x.py
import y
y.lol = 1
y.func() 
```

而且这个模块没有定义它：

```
#y.py
def func():
    print(lol) 
```

另一种可能有人在另一个模块中注入代码的疯狂方式是：

```
#a.py
import sys
sys._getframe(1).f_globals['lol'] = 1 
```

因此，`a.py`将名称注入`lol`任何导入它的人

```
#b.py
import a
print(lol) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:57:43.423

很多东西基本上只是花哨的赋值语句：

```
# mod1.py
a = 1
import b
from mymodule import c
def d(): pass
class e(object): pass

# mod2.py
import mod1
mod1.f = 17 
```

在这里，我们以六种不同的方式定义 mod1 中的名称 a、b、c、d、e、f。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T20:03:02.050

在您的具体示例中，`iac`很可能是由以下库/模块之一导出/注入的全局变量：

```
from PyQt4 import QtGui, QtCore
import xml.etree.ElementTree as etree
import threading
from OSC import ThreadingOSCServer, OSCMessage
import socket
from AddMIDIForwardWindow import AddMIDIForwardWindow 
```

我的猜测是它与 OSC 软件/硬件（OSC 导入）有关。看起来 ISC 是您的 MIDI 硬件的驱动程序，并且`iac`是库创建的对象引用，允许您与 ISC 驱动程序交互。

那么，为了回答您的问题，如果事物是​​变量/对象，则通过在同一块中定义来进入本地命名空间。如果您子类化另一个类，您的“本地”命名空间中也可能有一些东西。因此，变量可以进入您可以使用的命名空间的方式是：

1.  它们是在本地定义的。
2.  他们是你的超类的成员。
3.  它们是从模块显式导入的。
4.  它们被注入到您由另一个模块导入的模块中 - 例如由您显式导入的模块之一导入的模块。

# python - 在鼠标悬停时显示文本 - 标题元素不一致，标题属性不执行任何操作

> ID：11251798
> 
> 赞同：1
> 
> 时间：2012-06-28T19:44:51.463
> 
> 标签：python, html, svg, title, twistd

我正在尝试做类似的事情[（](http://mbostock.github.com/d3/talk/20111018/calendar.html)当用户将鼠标悬停在元素上时显示一些文本）。这是我的脚本生成的 html 片段：

```
<svg width="400" height="400">
  <rect x="100" y="100" width="40" height="45" fill="darkred">
    <title>Some_Text, 50, 20.09%</title>
  </rect>
</svg> 
```

当我将鼠标悬停在我的矩形上时，什么都没有出现，这是不一致的，因为当我将鼠标悬停在上面链接中的矩形上时，文本确实出现了。我还尝试将 rect 中的 title 元素更改为 title 属性，但这并没有解决问题。我该如何解决？

我最终想要的是在将鼠标悬停在某些元素上时显示文本。有没有更一致的方法来做到这一点？我更喜欢简单的方法，不要太复杂，因为这是一个小功能，而且我通常不接触 HTML。

谢谢！

更新：我正在使用 twistd (python) 来提供 html。当我保存它并通过 chrome 重新打开保存的 html 时，它可以正常工作。对我来说听起来像是扭曲的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:03:46.347

我对 jsFiddle 进行了快速测试，似乎在 Chrome 中为我工作？

[http://jsfiddle.net/bnUDE/1/](http://jsfiddle.net/bnUDE/1/)

假设您正在寻找用户将鼠标悬停在矩形上时出现的文本？就我而言，顶部、中间和底部框取决于盒子。

# silverlight - Silverlight：卸载浏览器外应用程序不会删除“..\Silverlight\OutOfBrowser\index”文件

> ID：11251800
> 
> 赞同：1
> 
> 时间：2012-06-28T19:44:56.920
> 
> 标签：silverlight, out-of-browser

无论好坏，我都有另一个应用程序扫描该目录，以查看是否在浏览器之外安装了 silverlight 应用程序。即使在卸载应用程序时，它也会留下该文件。有没有办法配置 SL 应用程序以在卸载时删除该文件？

或者有没有更有效的方法来查看是否安装了 SL OOB 应用程序？

# objective-c - ARC奇怪的双重释放？

> ID：11251802
> 
> 赞同：1
> 
> 时间：2012-06-28T19:45:03.263
> 
> 标签：objective-c, cocoa, memory-management, automatic-ref-counting

我有一个视图控制器的子类。将此视图控制器的视图添加到另一个视图后，与视图的任何交互`MyViewController`都会导致崩溃。运行僵尸时，它显示双重释放，保留计数`myViewController`已变为 -1。

我正在调用`alloc`这个对象，它应该使保留计数为 1，并且我还将视图添加`myViewcontroller`到另一个视图，这应该使保留计数为 2。那么我如何获得双重释放？**这只会在 ARC 上崩溃**

```
- (void)viewDidLoad {
   [super viewDidLoad];

   MyViewcontroller *myViewcontroller = [[MyViewController alloc] init];
   [self.view addSubview:myViewcontroller.view];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T19:49:26.030

这里没有“双重”版本，只有一个。

您将视图控制器存储在此处的局部变量中。ARC 在此方法结束时正确释放它——否则会导致泄漏，因为您将不再引用它。*

> 我还将视图添加`myViewcontroller`到另一个视图中，这将使保留计数变为 2。

不; `addSubview:`拥有*视图*的所有权，而不是*控制器*。视图本身稍后仍将处于活动状态，但控制器不会。

* * *

*所以，有趣的是，这不会在 MRR 下崩溃，但会是不正确的。

# php - 动态加载 foreach 循环

> ID：11251803
> 
> 赞同：0
> 
> 时间：2012-06-28T19:45:07.133
> 
> 标签：php, ajax

我有以下 foreach 循环：

```
 <?php
            ob_start();
            foreach ($streams as &$stream) {
                $array = stream($stream);
            ?>
                <a href="livestreams.php?stream=<?=$stream;?>">
                    <div class="channel-preview" style="background-image:url(<?=$array[2];?>);">
                        <div class="container">
                            <hgroup>
                                <h1><?=$array[4];?></h1>
                                <h2><?=$array[3];?></h2>
                            </hgroup>

                            <div class="meta">
                                <span class="live-viewers">Live Viewers:</strong> <?=$array[1];?></span>
                            </div>

                            <span class="game-badge starcraft-2" title="Starcraft 2"><span class="hide">Starcraft 2</span></span>
                        </div>
                    </div>
                </a>
            <?php
                    ob_flush();
                    flush();
                }
                ob_end_flush();
            ?> 
```

请注意，这只是整个脚本的一部分。它的问题是，它的加载速度相当慢。我曾尝试使用 ob_flush(); 如您所见，加快速度，但没有太大区别。

我的问题是整个页面的加载时间。页面甚至需要一些时间才能显示在浏览器中。是否可以在页面已经呈现时使用 AJAX 加载循环？或者还有其他方法吗？

**编辑：**

正在循环的内容是从外部服务器接收的，这很可能是导致延迟的原因。我应该早点说明这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:59:22.070

像这样的简单技巧可能会起作用[如 php.net 上所建议的]

```
<?php
// All you need is 256 spaces first
echo str_repeat(" ", 256)."<pre>"; flush();

// and ANY TAG before \r\n
echo "working...<br/>\r\n"; flush(); sleep(1); // this in cycle
?> 
```

编辑：在刷新后添加延迟也可以解决问题：

```
usleep(50000);// delay minimum of .05 seconds to allow ie to flush to screen 
```

请在此处阅读有关冲洗问题的更多信息和建议的解决方法：http: [//php.net/manual/en/function.flush.php](http://php.net/manual/en/function.flush.php)

# xml - 在 Oracle 11g 函数中解析 Soap 响应

> ID：11251804
> 
> 赞同：1
> 
> 时间：2012-06-28T19:45:07.303
> 
> 标签：xml, web-services, soap, oracle11g, clob

我在 Oracle 11g 中有一个函数，它使用 UTL_HTTP 来使用 Web 服务。我将 SOAP 响应存储在 CLOB 中。

经过几个小时的研究，我仍然没有找到直接解析 clob 中的 XML 字段的方法。

Clob 中的 SOAP 响应如下所示：

```
(CLOB) <?xml version="1.0" ?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GET_PERMITOutput xmlns="http://xmlns.oracle.com/orawsv/DBUSER/MYSERV">
      <RETURN>
        <STATUS_CODES>
          <stat>REC</stat>
        </STATUS_CODES>
      </RETURN>
    </GET_PERMITOutput>
  </soap:Body>
</soap:Envelope> 
```

我希望能够解析出该值“REC”（在其他情况下会有多个状态代码）并在我的函数中对其进行处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:28:32.763

首先，将 XML 存储在`XMLType`列中可能会更容易。否则，为了解析数据，您必须在运行时将 转换`CLOB`为。`XMLType`

但是，假设您从 a 开始`CLOB`，您应该能够执行类似的操作

```
select xmltype( xml_response ).extract('//stat/text()',
                                       'xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" ' ||
                                       'xmlns="http://xmlns.oracle.com/orawsv/DBUSER/MYSERV').getStringVal()
 from foo 
```

提取数据。对于我的测试，我创建了一个表`CLOB`

```
SQL> create table foo(
  2    xml_response clob
  3  );

Table created. 
```

插入您的示例数据

```
SQL> insert into foo values( '<?xml version="1.0" ?>
  2  <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  3    <soap:Body>
  4      <GET_PERMITOutput xmlns="http://xmlns.oracle.com/orawsv/DBUSER/MYSERV">
  5        <RETURN>
  6          <STATUS_CODES>
  7            <stat>REC</stat>
  8          </STATUS_CODES>
  9        </RETURN>
 10      </GET_PERMITOutput>
 11    </soap:Body>
 12  </soap:Envelope>');

1 row created. 
```

然后编写查询来提取它

```
SQL> ed
Wrote file afiedt.buf

  1  select xmltype( xml_response ).extract('//stat/text()',
  2                                         'xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" ' ||
  3                                         'xmlns="http://xmlns.oracle.com/orawsv/DBUSER/MYSERV').getStringVal()
  4*  from foo
SQL> /

XMLTYPE(XML_RESPONSE).EXTRACT('//STAT/TEXT()','XMLNS:SOAP="HTTP://SCHEMAS.XMLSOA
--------------------------------------------------------------------------------
REC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:42:51.980

我找到了一种无需插入临时表即可执行此操作的方法。我的函数以 CLOB 的形式获取 SOAP 响应，并将其存储在一个名为“resp”的变量中，该变量在下面使用，无需将 clob 插入任何临时对象：

```
with t as (select xmltype(resp) xcol from dual)
  select status
  into tmp FROM t, XDBUSER.XDBUSER_XML
     , XMLTABLE( XMLNAMESPACES ('http://schemas.xmlsoap.org/soap/envelope/' as "soap", 'http://xmlns.oracle.com/orawsv/DBUSER/MYSERV' as "a")
        ,'/soap:Envelope/soap:Body/a:GET_PERMITOutput/a:RETURN/a:STATUS_CODES'
              PASSING XMLTYPE.CreateXML(XML_CLOB)
              COLUMNS "STATUS"  VARCHAR2(500) PATH 'a:stat'); 
```

与 XMLType 相比，clob 是处理soap 请求的更安全的方法，因为返回的数据可能超过 32767 字节。

# ios - 崩溃：presentViewController

> ID：11251807
> 
> 赞同：0
> 
> 时间：2012-06-28T19:45:21.150
> 
> 标签：ios

单击应用程序中的按钮时出现此错误：

```
2012-06-28 21:43:36.860 AppName[2403:707] *** Terminating app due to uncaught exception 'NSInvalidUnarchiveOperationException', reason: 'Could not instantiate class named NSLayoutConstraint'
*** First throw call stack:
(0x3568788f 0x37a2e259 0x35687789 0x356877ab 0x333a254d 0x333a26bb 0x333a2423 0x33333001 0x332a13c7 0x3317ec59 0x330f4c17 0x330ff267 0x330ff1d5 0x3319e59b 0x3319d367 0x331f86a7 0x8fb11 0x355e13fd 0x330d6e07 0x3319c5e7 0x355e13fd 0x330d6e07 0x330d6dc3 0x330d6da1 0x330d6b11 0x330d7449 0x330d592b 0x330d5319 0x330bb695 0x330baf3b 0x3727a22b 0x3565b523 0x3565b4c5 0x3565a313 0x355dd4a5 0x355dd36d 0x37279439 0x330e9cd5 0x8f6cb 0x8f628)
terminate called throwing an exception 
```

错误发生在这段代码中：

```
-(IBAction) goToAbout {
    About *screen = [[About alloc] initWithNibName:nil bundle:nil];
    screen.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentModalViewController:screen animated:YES];
} 
```

为什么？请帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:51:07.007

如果您在手机上使用 IOS 5，这将崩溃，因为**presentModalViewController**已被弃用。改用**presentViewController**，因为这是他们这样做的新方式。如果您想支持所有版本的 IOS，您必须在使用新功能之前使用条件来测试新功能是否正常工作。**dismissModalViewController**也是如此。

我希望我为您指明了正确的方向。

# build - 如何在 Linux 上构建 MuPDF？

> ID：11251811
> 
> 赞同：2
> 
> 时间：2012-06-28T19:45:57.623
> 
> 标签：build, makefile, mupdf

任何人都可以分享他们在 Ubuntu 12.04 上构建 MuPDF 的经验吗？如果你能提供一个循序渐进的指南，那就太棒了！

我想构建 mupdf-1.0-source 但在调用 make 时遇到了一些麻烦。

我担心的一个问题是，您将第三方内部的内容复制到哪里？

我将内容复制到源文件夹中，但 make =(

[@Jure] 它给出了： `Package freetype2 was not found in the pkg-config search path.`

但是，我想使用`thirdparty`mupdf 文件夹中包含的 freetype 库。所以我主要关心的是你如何告诉 make 包含第三方库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T17:32:43.640

如果你在谈论分享经验，我最近构建了 Mupdf。目录和功能有一些问题，但都解决了。

1.  确保您已从其主要网站链接下载 Mupdf 及其第三方库：
    *   [http://git.ghostscript.com/?p=mupdf.git;a=summary](http://git.ghostscript.com/?p=mupdf.git;a=summary)
    *   [http://code.google.com/p/mupdf/downloads/list](http://code.google.com/p/mupdf/downloads/list)
        我犯了从不同站点下载第三方库的错误。
2.  正如您所写，您正确提取了 mupdf/thirdparty 目录中的第三方库。
3.  `usr/lib/..`pkg-config 错误表示它在包所在的目录中找不到包。如果您没有在正确的位置提取第三方，则可能会发生这种情况。或`make`在错误的目录中运行。

希望这可以帮助！

# bash - 逐行重新格式化命令输出的脚本

> ID：11251814
> 
> 赞同：-1
> 
> 时间：2012-06-28T19:46:01.287
> 
> 标签：bash

我有一个程序，它在每个输出行上输出一对被空格包围的单词：

```
 aa  bb
  ccc ddd
  ee  fff 
```

我想在 bash 脚本中重新格式化它们以删除空格并用“/”分隔单词

```
aa/bb 
ccc/ddd
ee/fff` 
```

到目前为止，我想出的唯一方法是两个脚本：

脚本1：

```
#!/bin/bash

while read line
do
  ./script2 $line
done 
```

脚本2：

```
#!/bin/bash

echo $1/$2 
```

在我没有看到的一个脚本中是否有一些明显的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:48:24.810

```
#!/bin/bash

while read a b 
do 
    echo "$a/$b" 
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:50:55.340

```
awk '{print $1 "/" $2}' inputfilename.txt 
```

# sha256 - 除了自己编写算法之外，如何在 Progress 9.1 中计算 SHA-256 哈希？

> ID：11251824
> 
> 赞同：1
> 
> 时间：2012-06-28T19:46:25.827
> 
> 标签：sha256, progress-4gl

我目前正在更新我们的工资系统（正在编写中）以实施 RTI。RTI 需要创建一个 SHA-256 哈希，以将 BACS 付款链接到每条记录的 RTI 提交。我可以在 OE10 中调用一个 SHA-1 对象来完成这项工作（尽管只有 SHA1）。我意识到 SHA-256 已在最新版本的 OE 11 中实现，但我们的一些客户没有或不想升级到 OE11。目前，我使用旧的 JAR 例程生成 SHA1 哈希，以便通过政府门户发送 p45/46 等。我想停止使用 java，因此想在进行中实现它

非常感谢任何建议/指示

亲切的问候

克雷格 H

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:25:15.850

Progress 版本 9 是在 1990 年代后期设计和发布的。这种功能当时并不在雷达上，现在 v9 已经退役——所以没有更多的版本。

OpenEdge 10 更新很多，是一个简单的升级，并且支持开箱即用的 SHA-256。建议你升级。

# java - Java 通信通过使用 Apache HttpClient 的 Web 代理失败

> ID：11251826
> 
> 赞同：5
> 
> 时间：2012-06-28T19:46:38.603
> 
> 标签：java, http, proxy, desktop-application

我有一个将数据发送到 Web 服务器的桌面客户端，但我似乎无法通过代理服务器。

**更新**：尝试通过代理进行通信时出现 407 HTTP 错误。

从我的网络服务器下载信息时，一切都很好。一旦用户配置了代理服务器（使用我编写的对话框），下载工作正常。[但是使用org.apache.http.client.HttpClient](http://hc.apache.org/httpcomponents-client-ga/)上传数据不起作用。

从 JDialog 收集信息后，我正在使用这样的代码配置代理服务器。

```
 System.setProperty("http.proxyHost", proxyHost);
        System.setProperty("http.proxyPort", "" + portNumber); 
```

现在，一旦我们这样做了，简单的下载就可以正常工作了。例如，我有从我的网络服务器读取一些 xml 数据的代码（见下文）。在客户的网络上，我的 catch 块中的错误在配置代理设置之前显示，然后在设置正确的代理后一切正常。

```
/**
 * Loads a collection of exams from the web site. The URL is determined by
 * configuration or registration since it is State specific.
 */
public static int importExamsWS(StringBuilder msg) {
    try {
        java.net.URL onlineExams = new URL(examURL);
        //Parse the XML data from InputStream and store it.
        return importExams(onlineExams.openStream(), msg);

    } 
    catch (java.net.UnknownHostException noDNS) {
        showError(noDNS, "Unable to connect to proctinator.com to download the exam file.\n"
                + "There is probably a problem with your Internet proxy settings.");
    }
    catch (MalformedURLException | IOException duh) {
        showFileError(duh);
    }
    return 0;
} 
```

但是，当我尝试将数据发送到 Web 服务器时，就好像代理设置被忽略并抛出了 IOException。即：

```
org.apache.http.conn.HttpHostConnectException: Connection to http://proctinator.com:8080 refused 
```

现在我知道 8080 端口没有被客户的网络过滤器阻止，因为我们在网络浏览器中测试了该地址。

这是我用于验证用户输入的注册 ID 的代码： **更新：现在我也在此方法中设置代理。**

```
//Registered is just an enum with ACTIVE, INACTIVE, NOTFOUND, ERROR
public static Registered checkRegistration(int id) throws IOException {    
    httpclient = new DefaultHttpClient();
    Config pref = Config.getConfig(); //stores user-entered proxy settings.
    HttpHost proxy = new HttpHost(pref.getProxyServer(), pref.getProxyPort());
    httpclient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy);
    URIBuilder builder = new URIBuilder();
    String path = "/Proctorest/rsc/register/" + id;
    try {
        builder.setScheme("http").setHost(server).setPort(8080).setPath(path);
        URI uri = builder.build();
        System.out.println("Connecting to " + uri.toString());
        HttpGet httpget = new HttpGet(uri);
        HttpResponse response = httpclient.execute(httpget);
        System.out.println(response.getStatusLine().toString());
        if(response.getStatusLine().getStatusCode()==200) {
            String msg = EntityUtils.toString(response.getEntity());
            GUI.globalLog.log(Level.INFO, "Server response to checkRegistration(" + id + "): " + msg);
            return Registered.stringToRegistered(msg);
        }
        else {
            GUI.globalLog.log(Level.INFO, "Server response status code to checkRegistration: " + 
                    response.getStatusLine().getStatusCode());
            return Registered.ERROR;
        }
    }
    catch(java.net.URISyntaxException bad) {
        System.out.println("URI construction error: " + bad.toString());
        return Registered.ERROR;
    }
} 
```

我几乎可以肯定问题来自代理服务器配置，但[SystemDefaultHttpClient 的文档](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/SystemDefaultHttpClient.html)声称它需要使用系统属性 `http.proxyHost`和`http.proxyPort`. 我知道属性已正确设置，但我仍然收到此身份验证错误。查看从我的程序生成的日志向我展示了这一点：

```
checkRegistration INFO: Server response status code to checkRegistration: 407 
```

如何解决此身份验证错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T23:08:02.277

我会拍的。如果代理服务器使用基本身份验证，您可以使用以下代码段作为示例：

```
DefaultHttpClient httpclient = new DefaultHttpClient();
httpclient.getCredentialsProvider().setCredentials(
    new AuthScope("PROXY HOST", 8080),
    new UsernamePasswordCredentials("username", "password"));

HttpHost targetHost = new HttpHost("TARGET HOST", 443, "https");
HttpHost proxy = new HttpHost("PROXY HOST", 8080);

httpclient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy); 
```

如果代理服务器使用 NTLM 身份验证，我认为 NTLM 支持不适用于所有代理服务器版本（它将适用于某些 NTLM 身份验证代理服务器版本 - 检查代理使用的是 v1 还是 v2 的 NTLM 身份验证）。有关参考和解决方法，您可以检查以下内容：

[http://hc.apache.org/httpcomponents-client-ga/ntlm.html](http://hc.apache.org/httpcomponents-client-ga/ntlm.html)

[http://htmlunit.sourceforge.net/ntlm.html](http://htmlunit.sourceforge.net/ntlm.html)

[http://devsac.blogspot.com/2010/10/supoprt-for-ntlmv2-with-apache.html](http://devsac.blogspot.com/2010/10/supoprt-for-ntlmv2-with-apache.html)

根据您的代理服务器，您可能需要查看 NTCredentials 而不是 UserPasswordCredentials。

我还建议您可能希望考虑使用wireshark 来捕获网络数据包并检查来自代理服务器的响应以绝对确定导致问题的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:08:59.213

只是为了完整起见，因为这个问题是在搜索 JVM http.proxy 属性时发现的，如果使用 JVM 基础架构代理，可以使用以下方式提供用户名和密码：

```
System.setProperty("http.proxyUser",proxyUserName)
System.setProperty("http.proxyPassword",proxyUsePassword). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T15:41:17.607

出于某种原因，在客户端上设置参数对我不起作用。

但是使用http方法。

# c++ - C++11：is_member_pointer 不适用于许多 STL 容器函数

> ID：11251827
> 
> 赞同：2
> 
> 时间：2012-06-28T19:46:39.837
> 
> 标签：c++, c++11

我正在尝试使用 type_traits 标头中的 is_member_pointer ，具有以下语法，例如：

```
cout << is_member_pointer<decltype(&vector<int>::member)>::value; 
```

在向量的情况下，我得到一个“模板参数无效”和一个冗长的“......类型未知”消息，用于所有迭代器函数和除 clear 之外的所有修饰符函数。其他容器功能也有类似的故障。我有 mingw g++ 4.6.2。

有没有办法帮助这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T19:56:43.233

问题可能是您[检查了重载方法的类型](http://ideone.com/wD9fq)。这是不可能的，因为像这样的表达式`&std::vector<int>::begin`没有类型（有两个重载）。只有在转换为所需类型之后，它才会成为成员函数指针。演员表看起来像这样：

```
std::cout << std::is_member_pointer<decltype((std::vector<int>::iterator(std::vector<int>::*)())&std::vector<int>::begin)>::value; 
```

不是很美观。

使用非重载方法，它可以工作。

```
std::cout << std::is_member_pointer<decltype(&std::vector<int>::reserve)>::value; 
```

顺便说一句，使用 gcc-4.7，您甚至会收到更清晰的错误消息：

```
test.cpp:6:70: error: decltype cannot resolve address of overloaded function 
```

# unit-testing - 有没有办法从子蚂蚁目标中冒出 ANT 属性？

> ID：11251828
> 
> 赞同：1
> 
> 时间：2012-06-28T19:46:49.020
> 
> 标签：unit-testing, ant, junit, automated-tests

我们将大型构建分解为许多构建文件，主构建使用`ant`目标调用每个构建文件。在单元测试的情况下，我们希望能够运行所有测试（因此生成报告），然后在最后出现错误或失败时使整个构建失败。我了解`errorProperty`并且`failureProperty`（[doc](http://ant.apache.org/manual/Tasks/junit.html)）可用于将属性设置为 true 以在构建结束时引用，但不知道如何将其恢复到顶层构建。我们如何才能从子构建中冒出 JUnit 失败或错误，但只有在所有测试完成后才会失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:40:16.100

一种选择是使用[AntUnit](http://ant.apache.org/antlibs/antunit/)：

> 该`<antunit>`任务驱动测试很像`<junit>`JUnit 测试。
> 
> 当在构建文件上调用时，该任务将为该构建文件启动一个新的 Ant 项目并扫描名称以“test”开头的目标。对于每个这样的目标，它将
> 
> *   执行名为 setUp 的目标，如果有的话。
> *   执行目标本身 - 如果此目标依赖于其他目标，则应用正常的 Ant 规则并首先执行依赖的目标。
> *   执行目标名称 tearDown，如果有的话。

AntUnit 为每个测试的子项目提供摘要，如果其中一个子项目失败，则整个构建失败。

## 在主 build.xml

```
<target name="test" depends="compile" description="Run tests.">            
  <antunit>
    <plainlistener loglevel="info" />
    <fileset dir="${subprojects.dir}" includes="**/*.xml" />
  </antunit>
</target> 
```

## 子项目 build.xml

```
<target name="testJUnit">
  <junit printsummary="on" fork="true" forkmode="once" showoutput="true">
    ...
  </junit>
</target> 
```

# regex - Simple Regex Match - two pages with similar string

> ID：11251839
> 
> 赞同：0
> 
> 时间：2012-06-28T19:47:29.213
> 
> 标签：regex

Best way to match 2 pages for Google analytics.

Pages to Query:

1.) this_google.html
2.) this_print_google.html

This is what I got so far: **/this_|print_|google.html/g**

Seems like there is a better way to do this...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:49:03.203

How about this?

```
/this_(print_)?google.html/ 
```

# r - R - 通过向量运算进行逻辑操作

> ID：11251840
> 
> 赞同：1
> 
> 时间：2012-06-28T19:47:38.663
> 
> 标签：r, for-loop, logic, binary-data, vectorization

我想用纯矩阵运算而不是 for 循环来转换这段逻辑。逻辑是，在我的二进制值向量中，我想注意每个转换点（即 0 变为 1 和 1 变为 0 的位置）。否则我想保留原始值。虽然一个简单的循环对于小向量来说足够快，但我需要在大型数据集上多次执行此操作，因此需要通过矩阵提高效率。

```
x <- c(1,0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,0,1);
y <- rep(-2, length(x));
y[1] <- x[1];
for(i in 2:length(x)){
     if((x[i]==1 && x[i-1]==0) || (x[i]==0 && x[i-1]==1)){
       y[i] = -1;
    }
    else{
       y[i] = x[i];
     }
} 
```

y 的最终值为 1 -1 0 0 0 -1 1 -1 0 -1 -1 -1 -1 -1 -1 0 0 -1

我是 R 的新转换者，非常感谢提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T20:04:06.363

您可以`rle`为此使用：

```
x.rle <- rle(x)$lengths

x[cumsum(x.rle[1:(length(x.rle) - 1)]) + 1] <- -1

> x
 [1]  1 -1  0  0  0 -1  1 -1  0 -1 -1 -1 -1 -1 -1  0  0 -1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T20:33:02.107

这是另一种可能的解决方案：

```
x2 <- c(x[1], x[1:(length(x) - 1)])

x_out <- x
x_out[x != x2] <- -1
x_out
 [1]  1 -1  0  0  0 -1  1 -1  0 -1 -1 -1 -1 -1 -1  0  0 -1 
```

# hibernate - Intellij Hibernate Entity 生成配置

> ID：11251841
> 
> 赞同：3
> 
> 时间：2012-06-28T19:47:46.467
> 
> 标签：hibernate, intellij-idea

有没有办法在 IntelliJ IDEA 中使用 JPA 注释自定义 Hibernate Entity 生成。默认情况下，POJO 具有方法 accessType（在 getter 中），在表注释中添加模式信息，并且所有注释都不会导入，而是在适当位置展开。还有方法和参数的排序稍有偏差（属性声明、getter 和 setter）。

注意：我使用的是 IntelliJ 版本 11。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-09T05:20:00.060

在生成之前，您必须在 persistence.xml 附近添加默认的 orm.xml，请参见以下链接：

[IDEA-64709 JPA：生成字段访问](http://youtrack.jetbrains.com/issue/IDEA-64709)

# django - 有 Django 处理数据库中奇怪编码的信息吗？

> ID：11251845
> 
> 赞同：0
> 
> 时间：2012-06-28T19:48:04.937
> 
> 标签：django, encoding

我的 Django 应用程序使用的数据库在执行任何编码规则时都非常松懈。当有人在数据库中存储类似 emdash 的内容（在 Windows-1252 字符集中为 0x97）时，这会导致问题。当我的 Django 应用程序尝试加载该数据并将其呈现为 utf-8 时，它会引发 DjangoUnicodeDecodeError，因为 0x97 不是有效的 utf-8 字节序列（它似乎是一个延续指令）。

有没有人有一个聪明的方法来捕捉这些错误并修复它们？该数据库接受来自各种不同应用程序的数据，所以我不能确定它们是否会很好，并且只在其中放入合理的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:47:22.420

确保您的数据库排序规则和字符集支持您计划或允许使用的字符。例如，在 MySQL 中，您需要以下内容：

```
CREATE DATABASE `mydb`
    DEFAULT CHARACTER SET utf8
    DEFAULT COLLATE utf8_general_ci; 
```

有关如何在 MySQL 中更改排序规则和字符集的更多详细信息如下：

[http://dev.mysql.com/doc/refman/5.0/en/charset-database.html](http://dev.mysql.com/doc/refman/5.0/en/charset-database.html) [http://dev.mysql.com/doc/refman/5.1/en/alter-database.html](http://dev.mysql.com/doc/refman/5.1/en/alter-database.html)

# android - 用于在 android 上生成 pdf 的 droidText

> ID：11251850
> 
> 赞同：3
> 
> 时间：2012-06-28T19:48:29.617
> 
> 标签：android, pdf-generation, android-droidtext

我正在研究使用 droidText，这显然是专门用于 android 的 iText 版本。但我找不到任何教程？有人用过吗？你能指点我任何教程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T17:54:03.957

~~我刚刚修改了 droidText 项目站点，因为开始时没有太多文档。要了解如何开始，请查看此处的新 wiki 页面：[http ://code.google.com/p/droidtext/wiki/GettingStarted](http://code.google.com/p/droidtext/wiki/GettingStarted)~~

~~如果您有任何其他问题/疑问，请与我联系~~

droidText 已关闭，不再维护

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T09:26:13.727

^

1.  那是一个错误。

您的客户端无权从此服务器获取 URL /p/droidtext/wiki/GettingStarted

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T03:27:04.197

您可以使用 iText 中使用的相同代码，您可以在[此处下载 pdf](http://code.google.com/p/agilepractice/downloads/detail?name=iText%20in%20Action.pdf&can=2&q=)

# ruby-on-rails - How do you index attachment in Elasticsearch with Tire?

> ID：11251851
> 
> 赞同：2
> 
> 时间：2012-06-28T19:48:47.930
> 
> 标签：ruby-on-rails, attachment, elasticsearch, tire

Having difficulty indexing an attachment type in **elasticsearch** via the **Tire** gem. Not able to set attachment `type` correctly.

I've taken [ActiveModel Integration example](https://github.com/karmi/tire#activemodel-integration) referenced from the Tire gem and added a field, `filename`, to reference name of PDFs on local filesystem that I want to index with the record.

```
#app/models/article.rb
class Article < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks

  attr_accessible :title, :content, :published_on, :filename

  mapping do
    indexes :id, :type =>'integer'
    indexes :title
    indexes :content
    indexes :published_on, :type => 'date'
    indexes :attachment, :type => 'attachment' 
  end

  def to_indexed_json
    to_json(:methods => [:attachment])
  end

  def attachment
    if filename.present?
       path_to_pdf = "/Volumes/Disk41402/test_proj/sample_pdfs/#{filename}.pdf"
       Base64.encode64(open(path_to_pdf) { |pdf| pdf.read })
    end
  end
end 
```

FWIW - the PDFs appear to have been added to the index:

```
$ curl -XGET 'http://localhost:9200/articles/_all/2?pretty=true'  
{
  "_index" : "articles",
  "_type" : "article",
  "_id" : "2",
  "_version" : 1,
  "exists" : true, "_source" : {"content":"Consectetur adipisicing elit, sed do eiusmod tempor incididunt. working?","created_at":"2012-06-21T17:19:03Z","filename":"sample2","id":2,"published_on":"2012-06-20","title":"Two","updated_at":"2012-06-28T00:00:59Z","attachment":"JVBERi0xLjMKJcTl8uXrp/Og0MTGCjQgMCBvYmoKPDwgL0xlbmd0aCA1IDAg\nUiAvRmlsdG...  ... ...4+CnN0YXJ0eHJlZgo4\nNTAzCiUVPRgo=\n"
}
} 
```

But the attachment type is still `"type" : "string"` when it should be `"type" : "attachment"`

```
$ curl -XGET 'http://localhost:9200/articles/_mapping?pretty=true'
{
  "articles" : {
    "article" : {
      "properties" : {
        "attachment" : {
          "type" : "string"
        },
        "content" : {
          "type" : "string"
        },
        "created_at" : {
          "type" : "date",
          "format" : "dateOptionalTime"
        },
        "filename" : {
          "type" : "string"
        },
        "id" : {
          "type" : "long"
        },
        "published_on" : {
          "type" : "date",
          "format" : "dateOptionalTime"
        },
        "title" : {
          "type" : "string"
        },
        "updated_at" : {
          "type" : "date",
          "format" : "dateOptionalTime"
        }
      }
    }
  }
} 
```

I've tried rebuilding the index `rake environment tire:import CLASS=Article FORCE=true` but type remains a string. Anyone see where I'm messing up?

**Log** (not exactly sure what 'no handler' means!?):

```
[2012-06-28 17:30:58,711][INFO ][cluster.metadata         ] [Kofi Whitemane] [articles] deleting index
[2012-06-28 17:30:58,765][WARN ][cluster.metadata         ] [Kofi Whitemane] [articles] failed to create
org.elasticsearch.index.mapper.MapperParsingException: mapping [article]
    at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService$1.execute(MetaDataCreateIndexService.java:263)
    at org.elasticsearch.cluster.service.InternalClusterService$2.run(InternalClusterService.java:211)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: org.elasticsearch.index.mapper.MapperParsingException: No handler for type [attachment] declared on field [attachment]
    at org.elasticsearch.index.mapper.object.ObjectMapper$TypeParser.parseProperties(ObjectMapper.java:259)
    at org.elasticsearch.index.mapper.object.ObjectMapper$TypeParser.parse(ObjectMapper.java:217)
    at org.elasticsearch.index.mapper.DocumentMapperParser.parse(DocumentMapperParser.java:161)
    at org.elasticsearch.index.mapper.MapperService.parse(MapperService.java:271)
    at org.elasticsearch.index.mapper.MapperService.add(MapperService.java:174)
    at org.elasticsearch.cluster.metadata.MetaDataCreateIndexService$1.execute(MetaDataCreateIndexService.java:260)
    ... 4 more
[2012-06-28 17:30:58,805][INFO ][cluster.metadata         ] [Kofi Whitemane] [articles] creating index, cause [auto(bulk api)], shards [5]/[1], mappings []
[2012-06-28 17:30:58,891][INFO ][cluster.metadata         ] [Kofi Whitemane] [articles] update_mapping [article] (dynamic) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T07:23:27.137

Do you have the [mapper attachment](https://github.com/elasticsearch/elasticsearch-mapper-attachments) plugin installed?

See [the tutorial at elasticsearch.org](http://www.elasticsearch.org/tutorials/2011/07/18/attachment-type-in-action.html).

# spotify - libspotify API：密码 blob 何时过期？

> ID：11251853
> 
> 赞同：1
> 
> 时间：2012-06-28T19:48:50.893
> 
> 标签：spotify

根据 API 文档，在更新可存储凭证时调用**credentials_blob_updated**回调。但是在“spshell”示例中，即使没有凭证更改，存储的 blob 也会不时刷新。正常吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:57:03.943

是的，这很正常。在创建新的 blob、用户更改密码或达到 blob 本身的 TTL 之前，blob 是有效的（这是一个非常长的时间，我相信很多年）。

每当您收到`credentials_blob_updated`回调时，只需将该用户的现有 blob 替换为新用户即可。

# c# - 只读局部变量不能用作赋值目标

> ID：11251855
> 
> 赞同：9
> 
> 时间：2012-06-28T19:48:51.080
> 
> 标签：c#

如果我有：

```
var myObjects = new ConcurrentBag<object>(); 
```

并尝试通过以下方式删除对象：

```
foreach (var myObject in myObjects.ToArray())
{
    myObjects.TryTake(out myObject);
} 
```

编译器抱怨：“只读局部变量不能用作赋值目标”

但是，如果我在 foreach 中添加本地引用，它会编译：

```
foreach (var myObject in myObjects.ToArray())
{
    var localReference = myObject;
    myObjects.TryTake(out localReference);
} 
```

这里到底发生了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-28T19:52:09.100

The iteration variable in a `foreach` (i.e. `myObject`) **cannot** be assigned a new value inside the `foreach`. It is not allowed.

In the first scenario, the `out` tries to do this. In the second scenario, you *never try to reassign to `myObject`, so it is fine.

To quote from the ECMA specification, 15.8.4, emphasis mine:

> 1.  The type and identifier of a foreach statement declare the iteration variable of the statement.
>     
>     
> 2.  The iteration variable corresponds to a **read-only local variable** with a scope that extends over the embedded statement.
>     
>     
> 3.  During execution of a foreach statement, the iteration variable represents the collection element for which an iteration is currently being performed.
>     
>     
> 4.  A **compile-time error occurs** if the embedded statement attempts to modify the iteration variable (via assignment or the ++ and --operators) or pass the iteration variable **as a ref or out parameter**.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T20:08:00.610

如果要将检索到的对象分配给数组，请改用 for 语句，因为您无法为循环变量分配值

```
object[] arr = myObjects.ToArray();
for (int i = 0; i < arr.Length; i++) {
    myObjects.TryTake(out arr[i]); 
} 
```

现在数组包含检索到的对象或 null ，其中没有对象可以被获取。

* * *

### 更新

读完之后`ConcurrentBag<T>`，我想我开始明白你的想法了。我上面的第一个解决方案在多线程场景中遇到了竞争条件（使用 a 的唯一原因`ConcurrentBag<T>`）。试试这个

```
var removedObjects = new List<object>();
object obj;
while (myObjects.TryTake(out obj)) {
    removedObjects.Add(obj);
} 
```

注意：将包中的对象分配给一个数组然后循环遍历它不是一个好主意，因为其他线程可能同时添加或删除了对象。因此，您必须使用这种直接方法。

* * *

如果您只想删除对象而不同时检索它们：

```
object obj;
while (myObjects.TryTake(out obj)) {
} 
```

# filemaker - Filemaker Pro 在导入时不会运行脚本触发器

> ID：11251856
> 
> 赞同：0
> 
> 时间：2012-06-28T19:48:52.373
> 
> 标签：filemaker

我正在使用 Filemaker Pro 12 Advanced。我有几张桌子，但实际上只和几张桌子一起工作过。我设置了一个 onObjectSave 脚本触发器以在名为 departmentName 的字段上运行。当我导入 Excel 电子表格时，它会添加包含此字段的记录，但它不会运行脚本。

我的问题是是否导入运行脚本，以及如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:52:59.580

导入不会触发脚本。但是，您可以在导入完成后编写一个循环脚本来为每条记录运行脚本。

# c++ - 在多线程应用程序中使用 OpenSSL

> ID：11251859
> 
> 赞同：2
> 
> 时间：2012-06-28T19:49:08.443
> 
> 标签：c++, multithreading, soap, openssl, pthreads

我一直在 Ubuntu 上用 C++ 编写一个 SOAP 客户端应用程序，使用 OpenSSL 进行 HTTPS 传输，使用 pthreads 进行线程处理。我有许多线程 - 一个中央数据采集线程定期获取工作线程以通过共享互斥保护队列发出 SOAP 请求。

阅读 OpenSSL 的文档，我发现[OpenSSL 线程安全吗？](http://www.openssl.org/support/faq.html#PROG1)在 OpenSSL FAQ 中描述了使用 OpenSSL 时确保线程安全所需的机制。我实现了这一点，一切正常。

我提出问题的原因实际上是一个概念上的困难。我正在考虑实现我的应用程序已经拥有的相同功能，但我将创建 2 个单独的**应用程序**，而不是使用线程：一个用于工作线程（其中将运行多个副本），另一个用于主数据采集线程。然后，我将使用 TCP 套接字在两者之间进行通信，而不是使用互斥体保护的队列。这可能是一个坏主意，但这并不是很重要 - 让我感到困惑的是**，我是否必须在第二种方法中实现确保 OpenSSL 线程安全所需的相同功能？**

我的猜测是我不必这样做，它们可以被视为独立的（确实肯定它必须是因为有这么多应用程序使用 OpenSSL）但是它的原因是什么？**使用共享库代码的多个*****应用程序*****和共享相同代码的多个*****线程*****之间有什么不同？** **几年来，我一直在成功编写多线程应用程序，我担心我无法回答这个问题。**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T07:38:19.777

不同的是，当多个*线程*共享相同的库代码时，它们也共享相同的全局数据结构；当多个进程共享该库代码时，它们不会。

例如，如果 OpenSSL 中的许多加密算法具有可用的大型预计算表，则它们的速度会更快。该表在调用相同 OpenSSL 函数的多个线程之间共享，但必须使用锁定来确保只有一个线程在第一次使用时尝试初始化该表。

再举一个例子，许多 OpenSSL 函数在内部访问随机数生成器，但它的状态是一个全局数据结构，它的访问必须跨线程同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:50:02.540

我认为主要区别在于，在**共享相同代码的多个线程中**，如果需要，可以进行同步，而在**使用共享库代码的多个应用程序中**，除了文件锁定等机制之外，这是不容易实现的。此外，还会有可观的性能增益。

考虑一个示例应用程序，它包含一个仅写入屏幕的**display(msg)方法和一个调用 display(msg) 的 main()。**如果有**五个线程**调用此方法，我们将能够同步调用，这样输出就不会出现乱码。但是，如果 display(msg) 方法在**五个不同的应用程序**中实现，并且 TCP 套接字用于从主应用程序发送 msg，则输出将出现乱码。

所以在你的情况下，这取决于工作线程试图用 OpenSSL 做什么。据我了解，他们正在建立单独的 SSL 连接，因此在应用程序中不需要线程安全。但是当一个简单的函数调用转换为两个应用程序之间的 TCP 通信时，会有性能开销，而且我认为所产生的开销将远远超过拥有单线程应用程序的好处。**

# android - Android 平板电脑到串口设备连接

> ID：11251861
> 
> 赞同：1
> 
> 时间：2012-06-28T19:49:12.533
> 
> 标签：android, android-emulator, serial-port

我有一台可以使用串行端口连接与外部设备通信的自动售货机。我已经能够使用 USB → 串行端口设置将我的计算机与自动售货机桥接。我想对我的 Android 平板电脑做同样的事情。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:42:02.383

我能想象的最简单的是[蓝牙套接字](http://developer.android.com/reference/android/bluetooth/BluetoothSocket.html)和蓝牙->串行加密狗。要驱动您的 USB-> 串行端口设置，您需要平板电脑具有 USB 主机功能（它可能具有），但也可能是平板电脑操作系统的根源。如果你是DIY类型，可以考虑[IOIO](http://www.sparkfun.com/products/10748)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T21:33:14.073

最终使用 Slick USB

应用链接：[https ://play.google.com/store/apps/details?id=slickdevlabs.apps.usbtoserialterm&hl=en](https://play.google.com/store/apps/details?id=slickdevlabs.apps.usbtoserialterm&hl=en)

# jquery - 首次访问页面时，旋转图像全部加载一秒钟

> ID：11251862
> 
> 赞同：0
> 
> 时间：2012-06-28T19:49:16.030
> 
> 标签：jquery, content-management-system, rotator

我正在尝试创建一组简单的旋转幻灯片（共 5 个），其中包含指向其各自页面的链接。我发现了一个似乎可以工作的简单代码，但是当第一次加载页面时，它会在幻灯片开始之前加载所有五个图像一秒钟。有没有办法在页面首次加载时隐藏其他图像？

我的测试页面位于：[http ://www.northeastern.edu/test/coe/test.html](http://www.northeastern.edu/test/coe/test.html)

该页面是较大 CMS 的一部分，我正在编辑的部分位于页面中心的全景 div 中。当我尝试将这部分加载到 CMS 之外时，它似乎可以正常工作，但我无法让它一起工作。

这是我添加的代码：

```
 <div id="panoramic">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" ></script>
      <script src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js" ></script>
      <script>
        $('.rotator').cycle({
          speed: 500,
          fx: 'fade',
          timeout: 6000
        });
      </script>

      <div class="rotator">
        <div><p><a href="link0"><img alt="" src="header00.png" /></a></p></div>
        <div><p><a href="link1"><img alt="" src="header01.png" /></a></p></div>
        <div><p><a href="link2"><img alt="" src="header02.png" /></a></p></div>
        <div><p><a href="link3"><img alt="" src="header03.png" /></a></p></div>
        <div><p><a href="link4"><img alt="" src="header04.png" /></a></p></div>
      </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:00:26.523

使用内联 css 隐藏所有在开始时不可见的内容。

```
 <div class="rotator">
    <div><p><a href="link0"><img alt="" src="header00.png" /></a></p></div>
    <div style="display: none;"><p><a href="link1"><img alt="" src="header01.png" /></a></p></div>
    <div style="display: none;"><p><a href="link2"><img alt="" src="header02.png" /></a></p></div>
    <div style="display: none;"><p><a href="link3"><img alt="" src="header03.png" /></a></p></div>
    <div style="display: none;"><p><a href="link4"><img alt="" src="header04.png" /></a></p></div>
  </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:10:52.983

您的问题主要与 css 相关......您根本没有为幻灯片容器或幻灯片元素设置任何 css。如果您在页面上禁用 javascript，您将看到您的`rotator`容器只是扩展至其所有内容的高度。这一切都可以用 css 控制。

目前，您正在等待页面就绪事件为您设置 css，这是页面加载过程的后期，而 css 会立即得到处理。

给幻灯片容器一些尺寸。然后，当您添加`overflow:hidden`超出元素边界的图像时，将无法看到。

放置在样式表中的示例 css 规则：

```
.rotator{
   width: 700px;
   height:300px;
   overflow:hidden;
} 
```

# c# - SystemSound.PlaySystemSound() 不会在一台 iOS 设备上产生任何声音

> ID：11251863
> 
> 赞同：0
> 
> 时间：2012-06-28T19:49:17.180
> 
> 标签：c#, ios, xamarin.ios

在 Monotouch 中开发。在一台设备上 (iOS 5.1.1) SystemSound.PlaySystemSound() 不会产生声音。检查音量、静音等。其他应用程序会发出声音。运行相同版本的 iOS、app、sdk 等的其他测试设备听起来还不错。

这是我的代码。

开始时

```
AudioSession.Initialize(); 
AudioSession.Category = MonoTouch.AudioToolbox.AudioSessionCategory.MediaPlayback;   
AudioSession.SetActive(true); 
```

这是调用 PlaySystemSound 的代码

```
 static SystemSound WhitSound=null;
    public static void PlayWhit()
    {               
        int _mute=NSUserDefaults.StandardUserDefaults.IntForKey("mute");
        if(WhitSound==null)
        {
            WhitSound=SystemSound.FromFile(new NSUrl("Images/whit.aiff"));
            Console.WriteLine("WhitSound = "+WhitSound+"  _mute="+_mute);
        }
        if(WhitSound!=null && _mute == 0)
        {
            Console.WriteLine("PLAYING WhitSound....");
            WhitSound.PlaySystemSound();
        }
    } 
```

此 _mute 变量为 0，并且控制台显示“正在播放 WhitSound....”消息，而没有发出声音。我认为收集 WhitSound 的不是 GC，因为它是一个静态类变量。我在这里缺少什么？

有什么想法吗？

# django - Changing Django template editor in Aptana

> ID：11251866
> 
> 赞同：1
> 
> 时间：2012-06-28T19:49:26.747
> 
> 标签：django, templates, aptana, syntax-highlighting

Currently, when I have code like this:

```
series: {{ traffic_json|safe }}, 
```

Aptana flags the second of the double brackets as "Syntax error: unexpected token '{'" and "Syntax error: unexpected token '}'" AFAIK, that's valid syntax for printing a variable's value in Django's templating language, is there any way to get Aptana to recognize this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:24:14.123

在 Package Explorer 中右键单击您希望使用不同编辑器打开的文件 --> 打开方式 --> 选择您想要的任何编辑器，我有大约 10 种不同的编辑器可供选择。

# java - Refresh entire webpage but not applet

> ID：11251873
> 
> 赞同：0
> 
> 时间：2012-06-28T19:49:54.127
> 
> 标签：java, html, applet

On a webpage I open a Java applet into another independent window. I have to refresh the entire webpage where the applet is called. This has the effect to close and reopen the applet. I wish to let the applet and not refresh it. How could we do such a thing?

Sorry for my English.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:48:20.077

使用 AJAX 刷新您要更新的页面部分。这也可能使重新加载更顺畅并使用更少的带宽。

# c# - Nested Transaction DbContext SaveChanges Throws Exception

> ID：11251875
> 
> 赞同：0
> 
> 时间：2012-06-28T19:50:00.220
> 
> 标签：c#, transactions, entity-framework-4.1

Suppose I have two nested transactions and both have transactionScope RequiresNew and now suppose the outer transaction saves the entity but the transaction is not committed yet and now the inner transaction make some updation on the entity saved above and saves it to db but on Committing transaction it throws exception. Yes it is logically true since the changes made by outer transaction are not Committed but I would like to know exactly why is it so? I am using EF 4.1 DbContext and TransactionScope.Any help will be highly appericiable.

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-28T20:04:07.670

虽然嵌套事务在技术上是可行的，但它们在逻辑/概念上没有任何意义。我会简单地避免嵌套事务。

# c - Simple collision detection?

> ID：11251881
> 
> 赞同：2
> 
> 时间：2012-06-28T19:50:25.263
> 
> 标签：c, opengl, collision-detection

Edit: Turns out I just had some values -switched-.

* * *

I'm working with OpenGL and coding with C on my Windows computer, and I'm trying to get a really, really basic collision detection going on. Right now, I'm trying this to see if a point Ox,Oz is inside of two boxes:

```
int collision(int box[2][4]) {
    int col;
    int i;
    for (i=0;i<2;i++){
    col = 0;
    printf("x1:%.0f y1:%.0f x2:%.0f y2:%.0f \n",colbox[i][0],colbox[i][1],colbox[i][2],colbox[i][3]);
    printf("Ox:%.1f Oy:%.1f Oz:%.1f \n" , Ox,here,Oz);
    if ((colbox[i][0] < Ox) && (Ox < colbox[i][2])&& (colbox[i][1] < Oz) && (colbox[i][3] > Oz)) 
        return 1;
    else
        return 0;
    }

} 
```

I've also tried variations, like having nothing pass through to the function, putting the loop outside the function, etc. The problem seems to be with equality check?

At the very lowest level of what I'm trying to do is to see if a point (the camera) is within a boundary (which is a set of 4 points kept in a 2D array), and if it is in -any- of the boundaries listed, return 1\. If the point is NOT in any of the boundaries, return 0.

When this does work, it only does it for one area, IE if I move over to the first listed bounded area, it returns properly, but the second area doesn't return properly.

Full Code if it's really helpful:

```
//  Values
double Ox=0, Oz=0;
float Oy=1.0;
double asp=1;       //  Aspect ratio
double dim=20;      //  Size of world
double fov=55;      //  Field of View
double ph,th = 0;
// angle of rotation for the camera direction
float angle = 0.0;
// actual vector representing the camera's direction
float lx=0.0,lz=-1.0;
// the key states. These variables will be zero
//when no key is being presses
float deltaAngle = 0.0;
float deltaMove = 0;
double here;
int collide;

// {x1,y1,x2,y2}
double colbox[2][4] = {
    {3,3,6,6},  
    {-1,-14,-3,-16}
};

//front-1 back-2 left-3 right-4
int collision(double box[2][4]) {
    int i;
    for (i=0;i<2;i++){
    col = 0;
    printf("x1:%.0f y1:%.0f x2:%.0f y2:%.0f \n",colbox[i][0],colbox[i][1],colbox[i][2],colbox[i][3]);
    printf("Ox:%.1f Oy:%.1f Oz:%.1f \n" , Ox,here,Oz);
    if ((colbox[i][0] < Ox) && (Ox < colbox[i][2])&& (colbox[i][1] < Oz) && (colbox[i][3] > Oz)) 
        return 1;
    else
        return 0;
    }

}               

//test
static void ball(double x,double y,double z,double r)
{
   //  Save transformation
   glPushMatrix();
   //  Offset, scale and rotate
   glTranslated(x,y,z);
   glScaled(r,r,r);
   //  White ball
   glColor3f(1,1,1);
   glutSolidSphere(1.0,16,16);
   //  Undo transofrmations
   glPopMatrix();
}
static void square(double r) {
    glPushMatrix();
    glScaled(r,r,r);
    glColor3f(1,0,0);
    glBegin(GL_QUADS);
    glVertex3f(-1,0,-1);
    glVertex3f(1,0,-1);
    glVertex3f(1,0,1);
    glVertex3f(-1,0,1);
    glEnd();
    glPopMatrix();
}

//test
void computePos(float deltaMove) {
    Ox += deltaMove * lx * 0.1f;
    Oz += deltaMove * lz * 0.1f;
}
void computeDir(float deltaAngle) {
    angle += deltaAngle;
    lx = sin(angle);
    lz = -cos(angle);
}

// display
void display() {
    here = 2.0f*Oy;
    if (deltaMove)
        computePos(deltaMove);
    if (deltaAngle)
        computeDir(deltaAngle);
                const double len=2.0;
    //  Erase the window and the depth buffer
    glClearColor(0.3,0.5,1.0,1);
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
    //  Enable Z-buffering in OpenGL
    glEnable(GL_DEPTH_TEST);
    //  Set perspective
    glLoadIdentity();
    gluLookAt(Ox,2,Oz, Ox+lx, here, Oz+lz, 0,1,0);

    ball(5,5,5,2); ball(-2,0,-15,1);
    square(15);
    glColor3f(1,1,1);
      glBegin(GL_LINES);
      glVertex3d(0.0,0.0,0.0);
      glVertex3d(len,0.0,0.0);
      glVertex3d(0.0,0.0,0.0);
      glVertex3d(0.0,len,0.0);
      glVertex3d(0.0,0.0,0.0);
      glVertex3d(0.0,0.0,len);
      glEnd();
      //  Label axes
      glRasterPos3d(len,0.0,0.0);
      Print("X");
      glRasterPos3d(0.0,len,0.0);
      Print("Y");
      glRasterPos3d(0.0,0.0,len);
      Print("Z");
    //  Render the scene and make it visible
    glColor3f(0,0,0);
    glWindowPos2i(5,5);
    Print("Ox:%.1f Oy:%.1f Oz:%.1f  lx:%.1f lz:%.1f Collide:%d", Ox,here,Oz,lx,lz,collide);
    ErrCheck("display");
    glFlush();
    glutSwapBuffers();
}

void key(unsigned char ch,int x,int y) {
    //  Exit on ESC
    if (ch == 27)
        exit(0);
    // WASD controls
    else if (ch == 'a' || ch == 'A')
        deltaAngle = -0.05;
    else if (ch == 'd' || ch == 'D')
        deltaAngle = 0.05;
    else if (ch == 'w' || ch == 'W') {
            collide=collision(colbox);
            deltaMove = 1; }

    else if (ch == 's' || ch == 'S') {
            collide=collision(colbox);
            deltaMove = -1; }

    else if ((ch == 'e' || ch == 'E') && here < 4)
        Oy += 0.01;
    else if ((ch == 'c' || ch == 'C') && here > .5)
        Oy -= 0.01;

    Project(fov,asp,dim);
    glutPostRedisplay();
}

void reshape(int width,int height) {
    //  Ratio of the width to the height of the window
    asp = (height>0) ? (double)width/height : 1;
    //  Set the viewport to the entire window
    glViewport(0,0, width,height);
    //  Set projection
    Project(fov,asp,dim);
}

void releaseKey(unsigned char ch, int x, int y) {
    if (ch == 'a' || ch == 'A')
        deltaAngle = 0;
    else if (ch == 'd' || ch == 'D')
        deltaAngle = 0;
    else if (ch == 'w' || ch == 'W')
        deltaMove = 0;
    else if (ch == 's' || ch == 'S')
        deltaMove = 0;
    Project(fov,asp,dim);
    glutPostRedisplay();
}

int main(int argc,char* argv[]) {
   //  Initialize GLUT
   glutInit(&argc,argv);
   //  Request double buffered, true color window with Z buffering at 600x600
   glutInitDisplayMode(GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE);
   glutInitWindowSize(800,500);
   glutCreateWindow("Haunted House");
   //  Set callbacks
   glutDisplayFunc(display);
   glutReshapeFunc(reshape);
//   glutSpecialFunc(special);
   glutKeyboardFunc(key);

    glutKeyboardUpFunc(releaseKey);
   //  Pass control to GLUT so it can interact with the user
   ErrCheck("init");
   glutMainLoop();
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:20:59.050

我想当你有 i=1 第二行

```
if ((colbox[i+1][0] < Ox) && (Ox < colbox[i+1][2])&& (colbox[i+1][1] < Oz) && (colbox[i+1][3] > Oz)) 
```

离开大小为 2 的数组。（因为它的最大索引是 1。）

因此，鉴于它正在读取不在数组内部的内存（我*认为*这通常是可以的），您会发现这种情况可能会失败很多，甚至可能在大多数情况下都失败，因为它基本上是在处理随机数据。所以它然后返回 0。

# css - 导航栏显示不正确

> ID：11251889
> 
> 赞同：0
> 
> 时间：2012-06-28T19:51:18.320
> 
> 标签：css

请在我的链接上需要某人的专业知识；[http://360webmedia.com/Store/development/index.html](http://360webmedia.com/Store/development/index.html)

在我的 menu_left.jpg 显示正确但我没有显示我的 menu_right.jpg - 应该有一个圆形末端来关闭导航栏。

此导航栏在我正在处理的另一个页面上正确显示，并且该页面没有额外的 bootstrap.css、bootstrap-responsive.min.css 和 custom.css，所以我不确定其中一个是否影响导航栏. 我对 bootstrap.css 一无所知，所以不知所措......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:54:00.113

将宽度`.menuCntr .right`从 700px 更改为 630px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:08:26.490

尝试从 .menuCntr .left 类和 .menuCntr .right 类中删除“width:700px”，您可以看到 menu_right 图像。我用萤火虫做了这个，它对我有用。Firebug 对此类问题非常有帮助。希望能帮助到你。

# php - 在 PHP 中引用表单数据时出现语法错误

> ID：11251890
> 
> 赞同：2
> 
> 时间：2012-06-28T19:51:22.797
> 
> 标签：php, phpmailer

当用户提交表单时，我正在使用 PHPMailer 在 HTML 表单中发送表单数据。`fullName`在电子邮件正文中加上引号时会出现语法错误。如果没有引号，则不会显示错误。我是 PHP 新手，当我声明一组代码是 HTML 时，我不确定如何从 PHP 中引用 HTML 表单。这是我的代码：

注意：我正在使用 Dreamweaver 对此进行编码，有时语法更正不正确，但我想在忽略它并对整个文档进行编码之前确定。

```
<?php
require("class.phpmailer.php");
$mail = new PHPMailer();$mail = new PHPMailer();
$mail->IsSMTP();
$mail->Host = "smtp1.example.com;smtp2.example.com";
$mail->SMTPAuth = true;
$mail->Username = 'smtpusername';
$mail->Password = 'smtppassword';

$mail->From="mailer@example.com";
$mail->FromName="My site's mailer";
$mail->Sender="mailer@example.com";

$mail->AddAddress("email@example.com");
$mail->Subject = "Test 1";

$mail->IsHTML(true);
$mail->Body = "
<h1>Graphics Request</h1>

Name: $_POST['fullName']<br />
";
$mail->AltBody="This is text only alternative body.";

if(!$mail->Send())
{
   echo "Error sending: " . $mail->ErrorInfo;;
}
else
{
   echo "Letter is sent";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:54:46.287

也就是说，实际上是 PHP 中的语法错误。因为你在一个双引号字符串中，你可以（而且必须）写`$_POST[fullname]`在那里。

这是 PHP 设计者试图*帮助*你的一个例子。就像他们破坏布尔运算符和`continue`inside a的行为时所做的那样`switch`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T20:29:39.797

我把所有的帖子结果都放在变量中，你应该养成这个习惯，它会让事情像上面那样工作。只是我的 0.02 美分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:56:46.663

改写为：

```
$mail->Body = "
<h1>Graphics Request</h1>

Name: {$_POST['fullName']}<br />
"; 
```

# php - 如何制作 PHP 错误页面？

> ID：11251893
> 
> 赞同：-1
> 
> 时间：2012-06-28T19:51:35.000
> 
> 标签：php

当 PHP 中有一个错误时，如何制作一个脚本来告诉我错误是什么？

我会假设我会制作一个 500.shtml 文档，但我会在里面放什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:09:25.673

我最近创建了一个。也许你可以使用它。

```
<?php

Class ErrorHandler
{
    private function __construct() { }

    public static function SetHandler($errTypes = ERROR_TYPES)
    {
        return set_error_handler(array('ErrorHandler' , 'Handler'), $errTypes);
    }

    public static function Handler($errNo, $errStr, $errFile, $errLine)
    {
        $backtrace = ErrorHandler::GetBacktrace(2);
        //Creating error message.
        $error_message = "\nErrNo: $errNo\n TEXT: $errStr\n LOCATION: $errFile\n LINE: $errLine at" . date('F j, Y, g:i:a') . " Showing Backtrace: $backtrace". "\n";

        if(LOG_ERRORS)
            error_log($error_message, 3 , LOG_ERROR_FILE);

        if(SEND_ERROR_MAIL == true)
            error_log($error_message, 1, ADMIN_ERROR_MAIL, "From: ". SENDMAIL_FROM . "\r\nTo: " . ADMIN_ERROR_MAIL);

        if( ($errNo == E_WARNING && IS_WARNING_FATAL ==false) || ($errNo == E_NOTICE || $errNo == E_USER_NOTICE) )
        {
            if(DEBUGGING)
                echo '<div class="error_box"> <b> <pre>' . $error_message. '</pre> </b> </div>';
        } else {
            if(DEBUGGING)
                echo '<div class="error_box"> <b> <pre>' . $error_message. '</pre> </b> </div>';
            else
            {
                echo SITE_GENERIC_FORM_MESSAGE;
                /*ob_clean();
                include '500.php';
                flush();
                ob_flush();
                ob_end_clean();
                exit();*/
            }
            exit();
        }
    }

    public static function GetBacktrace($irrelevantFirstEntries)
    {
        $s = '';
        $MAXSTRLEN = 64;
        $trace_array = debug_backtrace();

        for ($i = 0; $i < $irrelevantFirstEntries; $i++)
            array_shift($trace_array);

        $tabs = sizeof($trace_array) - 1;

        foreach($trace_array as $arr)
        {
            $tabs = $tabs - 1;
            if(isset($arr['class']))
                $s = $s . $arr['class'] . '.';
            $args = array();

            if(!empty($arr['agrs']))

                foreach($arr['args'] as $v)
                {
                    if(is_null($v))
                    $args[] = 'null';
                    elseif (is_array($v))
                        $args[] = 'Array[' . sizeof($v) . ']';
                    elseif (is_object($v))
                        $args[] = 'Object: ' . get_class($v);
                    elseif (is_bool($v))
                        $args[] = $v?'true':'false';
                    else
                    {
                        $v = (string)@$v;
                        $str = htmlspecialchars(substr($v, 0, $MAX STRLEN));
                        if (strlen($v) > $MAXSTRLEN)
                            $str = $str . "...";
                        $args[] = '"'.$str.'"';
                    }
                }

                $s = $s . $arr['function'] . '(' . implode(', ', $args). ')';
                $line = (isset ($arr['line']) ? $arr['line'] : "unknown");
                $file = (isset ($arr['file']) ? $arr['file'] : "unknown");
                $s = $s . sprintf(' # line %4d, file: $s', $line, $file);
                $s = $s . '\n';
        }
        return $s;

    }
}

?> 
```

显然，需要进行一些更改。只需将此文件包含在您的 index.php 中即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:57:19.503

某些服务器的默认配置设置为不显示 PHP 错误。您可以使用类似的东西覆盖它

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:58:26.650

您无需在 php 中询问即可收到警告和错误，只需设置

```
error_reporting(E_ALL); 
```

您将知道何时发生错误。

# c# - Disable buttons in Repeater

> ID：11251894
> 
> 赞同：2
> 
> 时间：2012-06-28T19:52:03.923
> 
> 标签：c#, asp.net, button, repeater

How do I access a particular row in asp Repeater and disable the buttons in it ? This program disables all the down buttons. I want to check if the userId exists in Database it should disable the up button and only the down button should be enabled.

```
 public void Repeater1_ItemDatabound(Object Sender, RepeaterItemEventArgs e)
    {

        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            String userID = User.Identity.Name.Split('\\')[1]; 
             if (isOwner(userID) == true)
             {

                 Button b = e.Item.FindControl("btnmoveup") as Button;
                    b.Enabled = false;

            }

public bool isOwner(string user_ID)
    {
        using (SqlConnection connection = new SqlConnection(WebConfigurationManager.ConnectionStrings["ctd_priority_dbConnectionString"].ConnectionString))
        {
            connection.Open();
            SqlCommand cmd = new SqlCommand("Select POwner from Projects WHERE POwner = @userid", connection);
            cmd.Parameters.AddWithValue("@userid", user_ID);
            SqlDataReader reader = cmd.ExecuteReader();

            if (reader.HasRows)
            {

                return true;
            }
            else
            {
                return false;
            }
            connection.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:57:49.127

不是直接回答你的问题...

但是我用于启用、可见和其他属性的一种技术是将该值拉入您用来填充转发器的查询中。例如，您的查询/存储过程可能会返回一个名为“is_enabled”的列，其值为 1 或 0。然后你的按钮的 .enabled 属性可以这样设置：`.enabled = '<%# eval(is_enabled) %>'`

希望有帮助

# java - BufferedImage drawn to JPanel before its compltely drawn in Java

> ID：11251895
> 
> 赞同：1
> 
> 时间：2012-06-28T19:52:05.963
> 
> 标签：java, animation, graphics, drawing, drawimage

I cant find any answer to this. I am trying to use active painting in loop in Java. I create a new `BufferedImage` and in my paint method get its graphics, draw to its graphics normal `Image` and also various shapes like `fillRect() etc.` Then I draw the `BufferedImage` to `JPanel` (with variable name *canvas*) graphics.

```
Graphics gr = buffer.createGraphics();
gr.drawImage(img, 0, 0, 500, 500, null);

for (int i = 0; i<200; i++){        
gr.drawOval(i*10,i*20,50,50);
etc.
}

gr.dispose();
canvas.getGraphics().drawImage(buffer, 0, 0, 500, 500, null); 
```

Why do I see in the JPanel all the shapes drawn but without Image , which comes only with delay I thought that first everything is drawn to BufferedImage and that is subsequently drawn on another graphics at once (isnt that whats buffers about?). Can someone please explain this to me? What thread is supposed to draw stuff on graphics object? In which is this Image drawing running (when using active rendering, not calling paintComponent())

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:20:43.790

> 什么线程应该在图形对象上绘制东西？

你想要的任何线程。不久前，我编写了一个 GIS 应用程序，我必须在其中执行此类操作（绘制图像和形状并显示它们）。这是我如何进行的：

1.  有一个背景线程将图像和所有形状绘制到`BufferedImage`
2.  从`JPanel.paintComponent()`后台线程获取结果并将其绘制到 JPanel 的图形中

运行这段代码

```
canvas.getGraphics().drawImage(buffer, 0, 0, 500, 500, null); 
```

外面`paintComponent`真的是一个坏主意，可能会解释你遇到的问题。这是因为您从中获得的图形`canvas.getGraphics()`并非用于渲染，而仅用于打印等操作

您绝对应该使用可以解决很多问题`BufferedImage`的方法`JPanel.paintComponent()`

# css - How to make row of elements centered with flexible width

> ID：11251897
> 
> 赞同：0
> 
> 时间：2012-06-28T19:52:09.613
> 
> 标签：css, centering

[http://jsfiddle.net/c3tGR/](http://jsfiddle.net/c3tGR/)

I want these elements to be centered, but with variable number of items per row based on the width of the window.. so on a wide window you'd have all 5 side by side, centered; on a narrower one you'd have 3 on the first row and 2 on the second, but each row is centered.

Is there any way to do this with CSS?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:55:21.783

添加一个父块并给它`text-align: center`，[jsfiddle](http://jsfiddle.net/c3tGR/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:55:22.437

把这个放在父母身上

```
text-align: center; 
```

[http://jsfiddle.net/c3tGR/2/](http://jsfiddle.net/c3tGR/2/)

# android - Check whether database is empty

> ID：11251901
> 
> 赞同：14
> 
> 时间：2012-06-28T19:52:21.733
> 
> 标签：android, sqlite

I am trying to check if a sqlite database is empty using

```
public boolean chkDB(){
        boolean chk = false;
        Cursor mCursor = db.rawQuery("SELECT * FROM " + DATABASE_TABLE, null);
        if (mCursor != null){
            mCursor.moveToFirst();
            if (mCursor.getInt(0) == 0){
                chk = false;
            }
        }else{
            chk = true;
        }
        return chk;
    } 
```

but every time i call that method i get null pointer exception

**My Logcat shows this**

```
06-28 22:35:19.519: E/AndroidRuntime(441):  at com.android.id.DBAdapter.chkDB(DBAdapter.java:82)
06-28 22:58:06.269: E/AndroidRuntime(621): FATAL EXCEPTION: main
06-28 22:58:06.269: E/AndroidRuntime(621): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.id/com.android.id.MainActivity}: java.lang.NullPointerException
06-28 22:58:06.269: E/AndroidRuntime(621):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
06-28 22:58:06.269: E/AndroidRuntime(621):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-28 22:58:06.269: E/AndroidRuntime(621):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-28 22:58:06.269: E/AndroidRuntime(621):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-28 22:58:06.269: E/AndroidRuntime(621):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-28 22:58:06.269: E/AndroidRuntime(621):  at android.os.Looper.loop(Looper.java:123)
06-28 22:58:06.269: E/AndroidRuntime(621):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-28 22:58:06.269: E/AndroidRuntime(621):  at java.lang.reflect.Method.invokeNative(Native Method)
06-28 22:58:06.269: E/AndroidRuntime(621):  at java.lang.reflect.Method.invoke(Method.java:521)
06-28 22:58:06.269: E/AndroidRuntime(621):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-28 22:58:06.269: E/AndroidRuntime(621):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-28 22:58:06.269: E/AndroidRuntime(621):  at dalvik.system.NativeStart.main(Native Method)
06-28 22:58:06.269: E/AndroidRuntime(621): Caused by: java.lang.NullPointerException
06-28 22:58:06.269: E/AndroidRuntime(621):  at com.android.id.DBAdapter.chkDB(DBAdapter.java:82)
06-28 22:58:06.269: E/AndroidRuntime(621):  at com.android.id.MainActivity.enterDB(MainActivity.java:66)
06-28 22:58:06.269: E/AndroidRuntime(621):  at com.android.id.MainActivity.onCreate(MainActivity.java:23)
06-28 22:58:06.269: E/AndroidRuntime(621):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-28 22:58:06.269: E/AndroidRuntime(621):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
06-28 22:58:06.269: E/AndroidRuntime(621):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-28T20:18:31.003

`mCursor.moveToFirst()`返回是否成功找到元素的布尔值。用它移动到游标的第一行，同时检查一行是否真的存在。

```
Cursor mCursor = db.rawQuery("SELECT * FROM " + DATABASE_TABLE, null);
Boolean rowExists;

if (mCursor.moveToFirst())
{
   // DO SOMETHING WITH CURSOR
  rowExists = true;

} else
{
   // I AM EMPTY
   rowExists = false;
} 
```

无论是否存在，您都试图访问游标中的一行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-28T19:54:59.290

```
if(mCursor.getCount() == 0) 
```

应该做的伎俩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-22T15:37:58.590

我知道这为时已晚，但我之前遇到了同样的错误，为了修复它，将您的代码更改为：

```
public boolean chkDB(){
        boolean chk = false;
        Cursor mCursor = db.rawQuery("SELECT * FROM " + DATABASE_TABLE, null);
        if (mCursor != null){
           while(mCursor.moveToFirst()){
           if (mCursor.getInt(0) == 0){
                chk = false;
            }
        }else{
            chk = true;
        }

}

        return chk;
    } 
```

您必须添加`while`语句 not if 否则会导致`IndexOutOfBound`异常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-03T06:14:17.347

```
if(mCursor!=null&&mCursor.getCount>0) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-28T10:55:15.827

您可以使用总行数查询数据库。如果它 > 0 那么你可以运行你的下一个代码。下面的函数将从数据库返回行值。

```
 public BigDecimal getTotalRecordCount() {
    SQLiteDatabase db = getReadableDatabase();

    String sql = "select count(*) from " + DatabaseHelperTable.TABLE_NAME ;

    Cursor cursor = db.rawQuery(sql, null);

    try {
        cursor.moveToFirst();
        String sum = cursor.getString(0);

        if (sum == null)
            return new BigDecimal("0");
        return new BigDecimal(sum);
    } finally {
        cursor.close();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-20T17:56:34.753

设置查询方法（直接在您的 ContentProvider 中）或在另一个类中使用您的 ContentResolver 和一列的投影（ID 应该可以解决问题）。然后查看光标是否包含任何内容。

我在任务类中的 ContentProvider 之外执行了此操作：

```
//Is database empty?
public static boolean isDbEmpty(Context context) {
    ContentResolver contentResolver = context.getContentResolver();

    String[] projection = new String[] {#_ID#};

    Cursor csr = checkResolver.query(#CONTENT_URI#, projection, null,
            null, null);
    if (csr != null && csr.moveToFirst()) {
        csr.close();
        return  false;
    } else {
        return true;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-10T16:03:25.280

在 Kotlin 中，你可以做到这一点

```
package myapp.package.name
import android.content.Context

class SQLiteDatabaseCrud(context: Context) {
    private val dbHelper: DBHelper = DBHelper(context)
    private var chk = false
    fun isEmpty(): Boolean? {
        val db = dbHelper.readableDatabase
        val cursor = db.rawQuery("SELECT * FROM " + Business.TABLE, null)
        chk = if (cursor != null){
            cursor.moveToFirst()
            cursor.count != 0
        }else{
            true
        }
        cursor.close()
        return chk
    }
} 
```

因此，在您的活动中，您只需调用该函数

```
 private var mSQLiteDatabaseCrud: SQLiteDatabaseCrud? = null

 mSQLiteDatabaseCrud = SQLiteDatabaseCrud(applicationContext)
    if(mSQLiteDatabaseCrud?.isEmpty()!!){
        Toast.makeText(applicationContext,"database is not empty", Toast.LENGTH_SHORT).show()       
    }else{
        performRequest()
        Toast.makeText(applicationContext,"empty database", Toast.LENGTH_SHORT).show()
    } 
```

# spring-mvc - Spring MVC Breadcrumb Framework

> ID：11251906
> 
> 赞同：1
> 
> 时间：2012-06-28T19:52:45.837
> 
> 标签：spring-mvc, breadcrumbs

What is the preferred method of maintaining breadcrumbs in a Spring MVC application?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T01:02:03.367

不确定“首选方式”，但我使用 Sitemesh 来做到这一点。[Atlassian 开发人员在此 Slideshare 演示文稿](http://www.slideshare.net/guest9fefea/sitemesh)中有一个示例（第 30 张幻灯片）。

诀窍是在各个页面的元标记中指定面包屑级别/元素。Sitemesh 装饰器然后查找这些并将它们合并到最终布局中。

# sharepoint-2010 - SSRS 2008 Dynamic Sharepoint Query from report parameter

> ID：11251907
> 
> 赞同：1
> 
> 时间：2012-06-28T19:52:47.760
> 
> 标签：sharepoint-2010, reporting-services, ssrs-2008

We are reporting against a SharePoint List that is replicated in more than 10 subsites, and would like to have the SharePoint Query element for the ListName be dynamic. Reason is, we want a single report to be used for all 10 subsites since each subsite the same list...just different data.

We would like to be able to pass the list name in the query string as a parameter so the report can be dynamic, and we won't have to have 10 exact copies of the same report. We've already figured out the subsite dynamic part which resides in the datasource portion, and that's working...it's just down to the SharePoint Query XML and the element where we need to insert the parameter.

We have tried the following 4 ideas with our parameter @List, but we get a "List Not Found" error when trying to view the report for each scenario:

1.  List [@] ...

2.  List {@}/ListName> ...

3.  @List ...

4.  =Parameters!List.Value ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:19:07.890

您需要将查询字符串设置为如下表达式：

```
="<xml.... " + Parameters!List.Value + "... /xml>" 
```

确保首先单击表达式按钮 (fx)。

# iphone - 如何防止 AVPlayer 在缓冲时暂停音频？

> ID：11251909
> 
> 赞同：1
> 
> 时间：2012-06-28T19:53:00.643
> 
> 标签：iphone, objective-c, cocoa-touch, core-audio, avplayer

我`AVPlayer`用来播放从 Internet 流式传输的实时音频，但是当它缓冲时，它会暂停音频，然后再次播放。

如何在缓冲时防止这种暂停？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:42:08.620

温斯顿，

您可以做的一件事是观察当前 AVPlayerItem 上的[loadedTimeRanges](https://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVPlayerItem_Class/Reference/Reference.html#//apple_ref/occ/instp/AVPlayerItem/loadedTimeRanges)属性，以及[PlaybackLikelyToKeepUp](https://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVPlayerItem_Class/Reference/Reference.html#//apple_ref/occ/instp/AVPlayerItem/playbackLikelyToKeepUp)、[duration](https://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVPlayerItem_Class/Reference/Reference.html#//apple_ref/occ/instp/AVPlayerItem/duration)和[PlaybackBufferEmpty](https://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVPlayerItem_Class/Reference/Reference.html#//apple_ref/occ/instp/AVPlayerItem/playbackBufferEmpty)属性。在这四个之间，您应该能够计算出一些关于轨道缓冲量的逻辑，以及允许播放的最小缓冲阈值应该是多少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:57:27.900

如果您在播放时不得不暂停，则流音频的瞬时比特率对于您正在测试的网络连接来说必须太高。使用更大的缓冲区、降低比特率或使网络连接更好。

# cocoa - 正确关闭 CVDisplayLink

> ID：11251913
> 
> 赞同：3
> 
> 时间：2012-06-28T19:53:37.540
> 
> 标签：cocoa, opengl

我正在编写一个 Cocoa OpenGL 应用程序并`CVDisplayLink`按照[此技术说明](https://developer.apple.com/library/mac/#qa/qa2004/qa1385.html)运行我的主循环。它适用于运行循环。

问题是有时当我退出时，在我的应用程序已经退出后，我的显示链接回调将在它自己的线程上被调用。这会导致我的渲染代码在我调用任何 OpenGL 函数（`glClear`在本例中）时立即被调用并崩溃，因为我的上下文不再存在。

我有`CVDisplayLinkRelease(displayLink);`我的 NSView 的`dealloc`功能，但它似乎从未被调用，我假设是因为 ARC。有什么办法可以确保我的显示链接在我的视图之前被破坏？

**编辑：**我没有注意到崩溃实际上是由我拥有的断言触发的。我在每次调用 OpenGL 后都会断言，`glGetError`以确保我可以及早发现错误。致电`glClear`or后，`[[view openGLContext] flushBuffer];`我收到错误 1286，即`GL_INVALID_FRAMEBUFFER_OPERATION`.

这是合乎逻辑的，因为我的窗口和视图正在被释放，但这无助于解决问题。我不想忽略这些错误，因为它们显然可能在更多情况下发生，而不仅仅是这个。我仍然需要找到“正确”的方式来确保我的显示链接在我的视图之前被关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T23:05:27.070

当应用程序终止时，其自动释放池中的任何内容都不会被释放——应用程序只是简单地`exit`让操作系统清理内存。由于没有任何内容被释放，因此没有任何内容会收到`dealloc`消息。

这意味着两件事：

*   您不应将文件、连接或任何其他不仅仅驻留在内存中的东西的生命周期与对象的生命周期联系起来。
*   您应该确保结束这些事物的生命周期以响应终止和释放。

有两种处理终止的方法。我通常在单窗口应用程序中执行此操作的方式是让我的应用程序的委托不是别的，并直接拥有我的主窗口控制器。另一种方法是将自己添加为`NSApplicationWillTerminate`通知的观察者并通过例如停止显示链接来响应通知。

如果清理的任何部分可能需要一些时间，您的应用程序的委托应该`applicationShouldTerminate:`通过返回来响应`NSTerminateLater`，并且您应该`replyToApplicationShouldTerminate:`在完成您需要做的任何事情后向应用程序发送一条消息。

原始问题的另一个解决方案——在你有机会关闭链接之前调用你的 CVDisplayLink 回调——完全相反：启用[突然终止](http://developer.apple.com/library/mac/documentation/General/Conceptual/MOSXAppProgrammingGuide/CoreAppDesign/CoreAppDesign.html#//apple_ref/doc/uid/TP40010543-CH3-SW22)。启用后，您的应用程序将通过发送自身退出`SIGKILL`（通过命令行调用更清楚`kill -9`），这意味着您的每个线程*都将*立即停止。

当然，如果您确实有任何需要清理的东西（锁定文件、网络连接等），那么您应该在这些东西的生命周期内禁用突然终止，并准备在此期间定期终止。

# java - 如何使用 Selenium 从输入元素中一致地删除默认文本？

> ID：11251916
> 
> 赞同：12
> 
> 时间：2012-06-28T19:54:18.477
> 
> 标签：java, gwt, selenium, webdriver

我正在尝试使用 Selenium WebDriver 将文本输入到具有默认文本“输入用户 ID”的 GWT 输入元素。以下是我尝试使其工作的几种方法：

```
 searchField.click();
        if(!searchField.getAttribute("value").isEmpty()) {
            // clear field, if not already empty 
            searchField.clear();
        }
        if(!searchField.getAttribute("value").isEmpty()) {
            // if it still didn't clear, click away and click back
            externalLinksHeader.click();
            searchField.click();
        }

        searchField.sendKeys(username); 
```

奇怪的是，上述方法仅在某些时候有效。有时，它最终会搜索“输入用户 IDus”，基本上是在默认文本之后开始输入“用户名”——甚至没有完成。

还有其他更好、更可靠的方法来清除 GWT 元素中的默认文本吗？

**编辑添加：**输入元素的 HTML。不幸的是，由于 JS/GWT 的火爆，没什么可看的。这是未选中时的字段：

```
<input type="text" class="gwt-TextBox empty" maxlength="40"> 
```

在我单击它并手动赋予它焦点后，默认文本和“空”类将被删除。

如果更改导致空文本字段，则`setDefaultText()`调用JS 。猜猜这就是为什么没有帮助。`onBlur()``onChange()``searchField.clear()`

我也在调试模式下逐步完成了这个方法，在这种情况下，它永远不会起作用。正常运行时，它大部分时间都在工作。不过，我不能说为什么。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-01T07:43:33.560

好的，脚本显然会在`clear()`方法清除`input`并将其留空时，脚本显然会启动。它提出的解决方案如下。

1.  天真的，按[`Backspace`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/Keys.html)10 次：

    ```
    String b = Keys.BACK_SPACE.toString();
    searchField.sendKeys(b+b+b+b+b+b+b+b+b+b + username); 
    ```

    （[`StringUtils.repeat()`](http://commons.apache.org/lang/api-3.0.1/org/apache/commons/lang3/StringUtils.html#repeat%28java.lang.String,%20int%29)来自 Apache Commons Lang 或 Google Guava 的[`Strings.repeat()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Strings.html#repeat%28java.lang.String,%20int%29)可能会派上用场）

2.  更好的使用[`Ctrl`+ `A`,`Delete`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/Keys.html) :

    ```
    String del = Keys.chord(Keys.CONTROL, "a") + Keys.DELETE; 
    searchField.sendKeys(del + username); 
    ```

3.  `input`通过 JavaScript删除内容：

    ```
    JavascriptExecutor js = (JavascriptExecutor)driver;
    js.executeScript("arguments[0].value = '';", searchField);
    searchField.sendKeys(username); 
    ```

4.  完全设置`input`via JavaScript 的值：

    ```
    JavascriptExecutor js = (JavascriptExecutor)driver;
    js.executeScript("arguments[0].value = '" + username + "';", searchField); 
    ```

请注意，javascript 可能并不总是有效，如下所示：[Why can't I clear an input field with javascript?](https://stackoverflow.com/questions/38948096/why-cant-i-clear-an-input-field-with-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:41:53.037

对于它的价值，我有一个非常相似的问题。WebDriver 2.28.0 和 FireFox 18.0.1

我也在使用 GWT，但可以用简单的 HTML/JS 重现它：

```
<html>
<body>
<div>
<h3>Box one</h3>
<input id="boxOne" type="text" onfocus="if (this.value == 'foo') this.value = '';" onblur="if (this.value == '') this.value = 'foo';"/>
</div>
<div>
<h3>Box two</h3>
<input id="boxTwo" type="text" />
</div>
</body>
</html> 
```

这个测试大部分时间都失败了：

```
@Test
public void testTextFocusBlurDirect() throws Exception {
  FirefoxDriver driver = new FirefoxDriver();

  driver.navigate().to(getClass().getResource("/TestTextFocusBlur.html"));

  for (int i = 0; i < 200; i++) {
      String magic = "test" + System.currentTimeMillis();
      driver.findElementById("boxOne").clear();
      Thread.sleep(100);
      driver.findElementById("boxOne").sendKeys(magic);
      Thread.sleep(100);
      driver.findElementById("boxTwo").clear();
      Thread.sleep(100);
      driver.findElementById("boxTwo").sendKeys("" + i);
      Thread.sleep(100);
      assertEquals(magic, driver.findElementById("boxOne").getAttribute("value"));
  }

  driver.quit();
} 
```

它可能只是操作系统以 WebDriver 无法控制的方式将焦点从浏览器上移开。我们似乎没有在 CI 服务器上遇到这个问题，也许是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-15T01:16:38.970

我还不能添加评论，所以我把它作为答案在这里。我想通知您，如果您只想使用 javascript 来清除和/或编辑输入文本字段，那么[@slanec](https://stackoverflow.com/users/1273080/slanec)提供的 javascript 方法将不起作用。这是一个示例：[为什么我不能使用 javascript 清除输入字段？](https://stackoverflow.com/questions/38948096/why-cant-i-clear-an-input-field-with-javascript)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-05T18:19:43.513

```
In case you use c# then solution would be :

// provide some text
webElement.SendKeys("aa");
// this is how you use this in C# , VS
String b = Keys.Backspace.ToString();

// then provide back space few times 
webElement.SendKeys(b + b + b + b + b + b + b + b + b + b); 
```

# c++ - 基于模板参数的 C++ 模板添加/启用构造函数

> ID：11251917
> 
> 赞同：1
> 
> 时间：2012-06-28T19:54:24.563
> 
> 标签：c++, templates, template-specialization

在以下场景中是否可以为模板的某些特化定义专用构造函数：

```
template<typename T, size_t D>
class vector {
  T values[D];
public:
  vector();
}; 
```

我想添加依赖于 D 参数的构造函数：

```
template<typename T>
vector<T, 2>::vector(T t1, T t2) { ... }

template<typename T>
vector<T, 3>::vector(T t1, T t2, T t3) { ... }

template<typename T>
vector<T, 4>::vector(T t1, T t2, T t3, T t4) { ... } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T19:58:13.217

```
template<bool B>
using EnableIfB = typename std::enable_if<B, int>::type;

template<typename T, size_t D>
class vector {
  T values[D];
public:
  template<size_t D1 = D, EnableIfB<D1 == 2> = 0>
  vector(T t1, T t2) { ... }

  template<size_t D1 = D, EnableIfB<D1 == 3> = 0>
  vector(T t1, T t2, T t3) { ... }

  template<size_t D1 = D, EnableIfB<D1 == 4> = 0>
  vector(T t1, T t2, T t3, T t4) { ... }
}; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:58:03.053

考虑为主模板定义所有构造函数`vector<T, D>`，然后`static_assert`在每个构造函数中确保数量匹配。例如：

```
vector(T t0, T t1)
{
    static_assert(D == 2, "Eeeeeeeekkkkk!  Wrong constructor!");
} 
```

# couchbase - 对沙发库中的视图数据执行过滤的最佳方法

> ID：11251919
> 
> 赞同：0
> 
> 时间：2012-06-28T19:54:37.133
> 
> 标签：couchbase

根据 couchbase 中的标签从视图中过滤记录的最佳方法是什么？我的意思是我知道我可以从文档中提取标签，并使用视图中的地图功能将它们用作键。但是有没有办法根据记录的键（可以是多个值）是否包含标签来从视图中选择记录？

示例：我有一个具有以下标签（标签 1、标签 2、标签 3、标签 4）的事务，并且每个视图记录（来自发出函数）看起来像这样

发出 ([tag1,tag2,tag3,tag4], null)

我想要得到的是所有有 tag2 的记录。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:59:01.690

两个建议...如果视图的唯一目的是查找具有特定标签的记录，您可以简单地为每个标签发出一个视图行。

```
function (doc) {
  if (doc.tags) {
    for(var idx in doc.tags) {
      emit(doc.tags[idx], null);
    }
  }
} 
```

此地图功能将为您提供如下行：

```
{"total_rows":13,"rows":[
{"id":"foo_doc_1","key":"a","value":null},
{"id":"foo_doc_3","key":"a","value":null},
{"id":"foo_doc_1","key":"b","value":null},
{"id":"foo_doc_2","key":"b","value":null},
{"id":"foo_doc_3","key":"b","value":null},
{"id":"foo_doc_1","key":"c","value":null},
{"id":"foo_doc_2","key":"c","value":null},
{"id":"foo_doc_1","key":"d","value":null},
{"id":"foo_doc_4","key":"d","value":null},
{"id":"foo_doc_4","key":"e","value":null}
]
} 
```

当您通过键（例如，key="a"）查询时，您将获得该键的结果。但是，如果您关心的是“给我所有第二个标签为 'xyz' 的文档”，那么您也可以发出索引。

```
function (doc) {
  if (doc.tags) {
    for(var idx in doc.tags) {
      emit([parseInt(idx), doc.tags[idx]], null);
    }
  }
} 
```

在此示例中，行将如下所示：

```
{"total_rows":13,"rows":[
{"id":"foo_doc_1","key":[0,"a"],"value":null},
{"id":"foo_doc_3","key":[0,"a"],"value":null},
{"id":"foo_doc_2","key":[0,"b"],"value":null},
{"id":"foo_doc_4","key":[0,"d"],"value":null},
{"id":"foo_doc_1","key":[1,"b"],"value":null},
{"id":"foo_doc_3","key":[1,"b"],"value":null},
{"id":"foo_doc_2","key":[1,"c"],"value":null},
{"id":"foo_doc_4","key":[1,"e"],"value":null},
{"id":"foo_doc_1","key":[2,"c"],"value":null},
{"id":"foo_doc_4","key":[2,"f"],"value":null}
]
} 
```

然后，您将使用数组键查询以获取特定位置的键（例如，key=[1, "b"]）。

# python - 尝试使用python将字符串格式化为列

> ID：11251923
> 
> 赞同：2
> 
> 时间：2012-06-28T19:55:01.130
> 
> 标签：python, string, label, pygtk, pango

我正在尝试格式化字符串以显示高分表的两列。Python 在使用 print 时能够很好地做到这一点

```
print '{0:2d} {1:3d} {2:4d}'.format(x, x*x, x*x*x) 
```

但是当尝试使用格式化的字符串时，它似乎变得更具挑战性。这是我想要得到的结果：

```
#for name, score in list: prints the following
1\. FirstName LastName   45000
2\. First LastName       78000
3\. Fst Lst              11123
4\. Name Name            40404
5\. llll lll             12345 
```

这是进入 pygtk 标签的所有字符串。目前我有这个：

```
score_string += "%i. %-15.12s\t%15s\n" % (index, name, score) 
```

这会产生不可信的结果。我当前的测试数据显示如下：

```
1\. Firstname Lastname          49900
2\. First Last              93000
3\. Name Name               6400 
```

因为该列表中的第一个名字比其他名字长（在宽度上，不是字符数），所以选项卡会强制分数不在位置上。有没有办法做到这一点，不仅要考虑字符串的长度，还要考虑字符串的宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:07:39.157

这样的事情可以接受吗？

```
>>> names = ["Firstname Lastname", "First Last", "Name Name"]
>>> scores = [49900, 93000, 6400]
>>> for i,v in enumerate(zip(names, scores)):
...     name, score = v[0], v[1]
...     print "% *d. % -*s %d" % (3, i, 30, name, score)
... 
  0\. Firstname Lastname             49900
  1\. First Last                     93000
  2\. Name Name                      6400 
```

这里的“名称”字段用空格填充，最大宽度为 30 个字符。

编辑：我现在看到字体的宽度也是一个问题。起初我没有从你的问题中意识到这一点。我会留下这个，以防未来的 Google 员工因为不同的原因来到这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:58:57.890

你有两个选择：

1.  将 PyGTK 标签的字体更改为具有等宽字符的字体（在游戏中并非不合理，它让我们想起了过去的街机时代）。你可以用[`set_markup`](http://www.pygtk.org/docs/pygtk/class-pangolayout.html#method-pangolayout--set-markup)of做到这一点`pango.Layout`。

2.  使用相邻的两个标签并使用[`set_alignment`](http://www.pygtk.org/docs/pygtk/class-pangolayout.html#method-pangolayout--set-alignment)类的方法`pango.Layout`。第一个标签将名称对齐到左侧，第二个标签包含分数并且对齐到右侧。只要它们有足够的空间，名称和分数就会分别很好地左右对齐。

# ruby-on-rails-3 - 视图未在 rails 中正确渲染

> ID：11251934
> 
> 赞同：0
> 
> 时间：2012-06-28T19:56:15.777
> 
> 标签：ruby-on-rails-3, layout, views, render

我有一个模型 - Products、ProductsController 和一个布局产品。我在控制器内声明了布局。将 css/js/images 添加到应用资产文件夹。当我想要自定义布局时，我做了 Rails 指南告诉我要做的所有事情。但它仍然没有显示我声明的布局，而是显示没有任何格式和设置的默认页面。

我的文件如下

产品控制器

```
class ProductsController < ApplicationController
  layout "product"

  # GET /products
  # GET /products.json
  def index
    @products = Product.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @products }
    end
  end
end 
```

我的布局文件是

```
<!DOCTYPE html>
<html>
<head>
  <title>Cool Amazon Products</title>
  <%= stylesheet_link_tag    "application" %> 
  <%= stylesheet_link_tag    "bootstrap" %>
  <%= stylesheet_link_tag    "bootstrap-responsive" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="#">Cool Products from Amazon</a>
        </div>
       </div>
     </div>

<%= yield %>

<%= javascript_include_tag "bootstrap" %>

</body>
</html> 
```

index.html.erb 是默认生成的！

我正在为 UI 使用 twitter 引导程序。请让我知道我是否遗漏了某些内容以显示正确的布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T18:56:50.480

好的，很奇怪，这应该可以。

所以，要检查的事情：

1.  您是在*开发*环境中，还是重新启动了 Rails 应用程序？
2.  您是否正在使用页面或动作缓存，而您没有清除它们？
3.  会不会是 Web 服务器上的缓存问题？

这就是所有可能导致这种情况的原因。

# git - 如何查看 Github 风格的东西，例如打孔卡和 git -repo 的时间线？

> ID：11251941
> 
> 赞同：2
> 
> 时间：2012-06-28T19:56:40.880
> 
> 标签：git

我正在寻找一种可以可视化使用 git -repo 的软件。我喜欢 Github 的一些特性和 Bitbucket 的一些特性，所以我不想使用它们，因为它们并不完美。我正在寻找创建类似视觉特征的方法。您可以在下面找到一些部分，但仍然缺少很多谜题——那么如何创建 Github 风格的东西，例如打孔卡和 git -repo 的时间线？

**一些部分**

> 1.  Gource [here](http://code.google.com/p/gource/) to vizualise commits
>     
>     
> 2.  Gitolite[在这里](https://github.com/sitaramc/gitolite/)管理烫发。
>     
>     
> 3.  Ticgit[在这里管理工单但非常不完整（很多](https://github.com/jeffWelling/ticgit)[东西](https://stackoverflow.com/questions/11251480/how-to-use-milestones-in-ticgit)没有打补丁，例如里程碑显然没有打更多补丁）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-02T20:03:18.837

![enter image description here](../Images/c825cc203e82eb2c600240a177890210.png) **Installation on Ubuntu:**

```
sudo apt-get install python python-cairo 
git clone https://github.com/guanqun/git-punchcard-plot.git
cd git-punchcard-plot/
sudo cp git-punchcard /usr/local/bin 
```

**Usage:**

1.  Go to your repository directory.
2.  Type in console: git punchcard!
3.  Open: output.png

reference : git repo : [https://coderwall.com/p/lxygq](https://coderwall.com/p/lxygq)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T20:25:54.753

据我所知，目前没有工具允许这样做。我自己研究了这个话题，找不到任何真正有用的东西。尽管如此，已经在以下位置提出了一个非常类似的问题：

[从 Git 存储库生成统计信息](https://stackoverflow.com/questions/1828874/generating-statistics-from-git-repository)

你应该看看那里发布的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T21:19:37.747

Dustin Sallings在 github 上有[不错的考勤脚本和其他一些脚本。](https://github.com/dustin/bindir)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-03T09:38:31.113

[tig](https://github.com/jonas/tig)是一个很棒的 git 命令行客户端。它使用 ncurses，并有许多 vim 风格和 emacs 风格的键绑定。虽然 tig 是一个 git 客户端（不是 GitHub 客户端），但您仍然可以浏览提交、查看提交历史记录树、进行提交、编辑阶段、查看差异等等。有关 git repo 更具体方面的可视化工具，请参阅其他答案。

**主视图和差异视图** ![](../Images/bcda00e8f45f059219c688c41af3ddf3.png)

**树视图** [（来源：][[nitro.dk](http://jonas.nitro.dk/tig/screenshots/tree-view.png)][）][![](../Images/c6c948b43abb35a457e11564060b3b8a.png)](https://i.stack.imgur.com/Y2mEx.png)

# javascript - 使用 pdf.js 从原始数据显示 pdf

> ID：11251947
> 
> 赞同：16
> 
> 时间：2012-06-28T19:57:04.133
> 
> 标签：javascript, pdf, pdf.js

我刚刚开始使用 pdf.js，我正在尝试从原始 pdf 数据加载一个 pdf 文件。我看过代码：

```
PDFJS.getPdf('cwpdf.pdf', function getPdfHelloWorld(data) { 
   ...
} 
```

但我想知道是否有任何方法可以从原始 pdf 数据而不是文件名加载 pdf。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-08-14T15:11:16.237

我整理了一些完整的代码，并能够通过以下解决方案找到问题：

```
var int8View = new Uint8Array(...); //populate int8View with the raw pdf data
PDFJS.getDocument(int8View).then(function(pdf) {
} 
```

使用此解决方案时，我遇到了其他用户看到的问题（@MurWade 和@user94154） -`stream must have data`错误消息。看起来问题出在以下行：

```
var int8View = new Uint8Array(...); 
```

包含数据的数组未正确创建，因为数据不是预期的格式。因此，这条线适用于某些情况，但可能不适用于一般情况。

我已经整理了一个完整的解决方案，似乎效果更好。它加载一个 PDF 文件，并将其转换为原始 PDF 流。这仅用于测试目的，在现实世界的示例中，PDF 流可能会以不同的方式接收。您可以在调试器中检查流，它将显示为纯文本。下面是使该示例工作的代码的关键行。而是将原始 PDF 流转换为数组，将其转换为数据。

```
var docInitParams = { data: pdfraw }; 
```

然后继续加载数据。下面是如何加载标准原始 PDF 流并显示它的完整工作示例。我曾经以 PDF JS hello world 示例为起点。如果需要对此进行任何澄清，请在评论中告诉我。

```
'use strict';

PDFJS.getDocument('helloworld.pdf').then(function(pdf) {

  pdf.getData().then(function(arrayBuffer) {
    var pdfraw = String.fromCharCode.apply(null, arrayBuffer);

    var docInitParams = {
      data: pdfraw
    };
    PDFJS.getDocument(docInitParams).then(function(pdfFromRaw) {
      pdfFromRaw.getPage(1).then(function(page) {
        var scale = 1.5;
        var viewport = page.getViewport(scale);

        var canvas = document.getElementById('the-canvas');
        var context = canvas.getContext('2d');
        canvas.height = viewport.height;
        canvas.width = viewport.width;

        var renderContext = {
          canvasContext: context,
          viewport: viewport
        };
        page.render(renderContext);
      });
    });
  });
});
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T14:33:54.600

好吧，由于没有其他人回答，我将发布我的发现。我发现是的，可以从原始数据中加载 pdf 文件。可以做到这一点的方法是使用填充了数据的 UInt8Array 来代替存储 pdf 文件的 url。

执行此操作的示例代码如下：

```
var int8View = new Uint8Array(...); //populate int8View with the raw pdf data
PDFJS.getDocument(int8View).then(function(pdf) {

} 
```

# webkit - 尝试使用 Raspberry Pi 在 Debian 上制作 Webkit Kiosk

> ID：11251948
> 
> 赞同：7
> 
> 时间：2012-06-28T19:57:04.513
> 
> 标签：webkit, debian, kiosk

我正在尝试在 Raspberry Pi 上构建一个 Webkit Kiosk。

我找到了一个好的开始：[https ://github.com/pschultz/kiosk-browser](https://github.com/pschultz/kiosk-browser)

我想做的事情：

1) 在不登录的情况下启动信息亭（使用 inittab？）

Peter Schultz 指出添加以下行：

```
1:2345:respawn:/usr/bin/startx -e /usr/bin/browser http://10.0.0.5/zfs/monitor tty1 /dev/tty1 2>&1 
```

但他没有解释完成这项工作的步骤（对于新手）。

我所做的是将他的代码添加到个人 git 存储库中，并将此存储库克隆到`/usr/bin/kiosk`and`sudo apt-get install libwebkit-dev`和`sudo make`.

添加到 inittab 的行将是：

```
1:2345:respawn:/usr/bin/startx -e /usr/bin/kiosk/browser http://my-kiosk-domain.com tty1 /dev/tty1 2>&1 
```

如果我这样做，我会生成一个循环或某种......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T18:09:04.233

如果您想在每次打开 rpi 时以 kiosk 模式自动加载浏览器全屏，您可以将这两行之一添加到文件 /etc/xdg/lxsession/LXDE/autostart

```
@chromium --kiosk --incognito www.google.it
@midori -i 120 -e Fullscreen -a www.google.it -p 
```

第一个用于 chromium，后者用于 midori，rpi 默认的轻量级浏览器。

提示：由于我们将 rpi 用作信息亭，我们希望防止屏幕变黑并禁用屏幕保护程序。编辑自动启动文件：

```
sudo pico /etc/xdg/lxsession/LXDE/autostart 
```

找到以下行并使用 # 对其进行注释（它应该位于底部）

```
#@xscreensaver -no-splash 
```

并附加以下行

```
@xset s off 
@xset -dpms 
@xset s noblank 
```

保存，重启。

[有关http://pikiosk.tumblr.com/post/38721623944/setup-raspberry-ssh-overclock-sta](http://pikiosk.tumblr.com/post/38721623944/setup-raspberry-ssh-overclock-sta)的更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-29T02:09:25.080

赞成的答案建议为它运行 LXDE。你也可以在没有如此沉重的桌面环境的情况下做到这一点。您可以在 X 会话中启动 midori 或 chromium：

```
xinit /usr/bin/midori -e Fullscreen -a http://www.examples.com/
xinit chromium --kiosk http://www.examples.com/ 
```

有时 midori 的全屏模式无法按预期工作，并且 midori 未使用全屏。在这些情况下，您可以将其映射到一个非常简单的窗口管理器（如 MatchBox）中以获得真正的全屏显示。由于 xinit，您必须将所有内容包装在 shell 脚本中。

```
#!/bin/sh
matchbox-window-manager &
midori -e Fullscreen -a http://dev.mobilitylab.org/TransitScreen/screen/index/11 
```

只需使用 /etc/rc.local 即可完成自动启动。

可以在此处找到有关屏幕保护程序问题和自动重启的更多信息：[https ://github.com/MobilityLab/TransitScreen/wiki/Raspberry-Pi#running-without-a-desktop](https://github.com/MobilityLab/TransitScreen/wiki/Raspberry-Pi#running-without-a-desktop)

Chromium 对 arm 架构的某些 debian 衍生版本存在依赖性问题。对于Cubian，您可以在[此处](https://github.com/cubieplayer/Cubian/issues/139)找到错误报告。我不确定您是否可以毫无问题地在最新的 Raspbian 上安装 chromium。

但我真的可以推荐midori。它非常快，并且对现代网络技术的支持非常好。作为 Chromium，它使用 webkit 作为渲染引擎。如果您错过了一些 html5 / css3 功能，请考虑更新 libwebkitgtk（例如通过使用 debian 测试包）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T21:53:04.700

您可能没有设置 DISPLAY 环境变量。

尝试：

```
export DISPLAY=:0
/usr/bin/startx /usr/bin/browser 
```

或者，浏览器也可以采用显示参数（因此您不需要环境变量）：

```
/usr/bin/startx /usr/bin/browser :0 
```

这适用于我在标准终端 shell 上的 Raspbian（我通过 SSH 登录）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T09:11:56.617

> I'm trying to build a Webkit Kiosk on a Raspberry Pi.

I think **Instant WebKiosk for Raspberry Pi** could be useful for you. See: [http://www.binaryemotions.com/raspberry-digital-signage/](http://www.binaryemotions.com/raspberry-digital-signage/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T08:34:17.417

您可能应该首先检查 /usr/bin/kiosk/browser 是否正常工作。您应该在您的 RaspberryPi 上启动正常的 X 会话（图形环境），启动终端，尝试运行以下命令：

```
/usr/bin/kiosk/browser http://my-kiosk-domain.com 
```

并查看它在终端上打印的内容。这管用吗？您是否看到任何错误消息？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-28T16:08:13.760

更新了当前版本的 Raspbian（带有 Pixel 桌面）安装与 noop 2.0。

我发现您需要在两个不同的地方进行编辑才能使其正常工作。

1.  /etc/xdg/lxsession/LXDE/autostart
2.  /home/pi/.config/lxsession/LXDE-pi/autostart

所以我的配置文件是：

```
# @xscreensaver -no-splash

@xset s off 
@xset -dpms 
@xset s noblank 

@chromium-browser --kiosk --incognito http://localhost 
```

就是这样。

# xml - 如何在 XML 中嵌入特殊字符并让 XDocument 解析它

> ID：11251964
> 
> 赞同：0
> 
> 时间：2012-06-28T19:58:21.343
> 
> 标签：xml, linq-to-xml

如何在 XML 中嵌入特殊字符并让 XDocument 解析它？

```
<?xml version="1.0" encoding="utf-8"?>
<Customers>
<Customer>
<CustomerID>BLAUS</CustomerID>
<CompanyName>Blauer See Delikatessen</CompanyName>
<ContactName>Hanna Moos</ContactName>
<Region>testing</Region>
</Customer>
<Customer>
<CustomerID>SPLIR</CustomerID>
<CompanyName>Split Rail Beer &#x25BA Ale</CompanyName>
<ContactName>Art raunschweiger</ContactName>
<Region>WY</Region>
</Customer>
</Customers> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:07:35.680

您发布的文件不是有效的 XML，这就是它无法解析的原因。

问题出在这一行：

```
<CompanyName>Split Rail Beer &#x25BA Ale</CompanyName> 
```

应该是：

```
<CompanyName>Split Rail Beer &#x25BA; Ale</CompanyName> 
```

正确编码的数字实体是`&#x25BA;`（注意尾随`;`） - 这转换为字符 ►。

# objective-c - 有什么方法可以区分 iOS 5 上的 iTunes Match 和 DRMed 曲目？

> ID：11251966
> 
> 赞同：1
> 
> 时间：2012-06-28T19:58:34.640
> 
> 标签：objective-c, ios5, drm, mpmediaitem, avasset

对于代表 iOS5 用户音乐库中曲目的给定 MPMediaItem，我们如何确定曲目是否为：

*   尚未从 iCloud 下载的 iTunes Match 曲目

对比

*   一个 DRMed 轨道

?

在这两种情况下，MPMediaItemPropertyAssetURL 返回的 NSURL 都是 nil。因此，实例化一个 AVAsset 来检查可导出标志不是一个可行的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:33:23.803

据我了解，这取决于您使用的 iOS 版本。我认为可能在 4.3 之前，资产退回`nil`仅意味着该项目已被 DRMed 并且您无权访问它。但是，在当前版本 (5) 中，nil 意味着它只是 iCloud。也许您有一些您认为只是 DRM 的曲目，但实际上是 iCloud 存储的歌曲。在我正在开发的当前应用程序中，我最初根本没有考虑 iCloud 轨道（因为我将应用程序定位为 iOS 的早期版本），所以根据我使用的设备，我遇到了崩溃。为了解决问题并测试 iCloud/DRM，我使用：

```
AVURLAsset* asset;
NSURL* realAssetUrl = [item valueForProperty:MPMediaItemPropertyAssetURL];
if(!realAssetUrl){
    //track is iCloud
}

asset = [[AVURLAsset alloc]initWithURL:realAssetUrl options:nil];
if(asset == nil || asset.hasProtectedContent){
    //asset is DRMed such that it cannot be played back.
            //most apps can stop here but I need to be able to export the song

}
if (!asset.exportable || !asset.readable){
    //the asset cannot be exported and thus cannot be cached to a file
            //the current app directory and cannot be transferred over network
            //if asset passed earlier check, can still be used for local playback
}
[asset release]; 
```

这对我来说似乎很好，但你也暗示你已经走上了同样的道路，所以我不确定这对你有多大帮助。然而，祝你的项目好运，我希望你能找到你正在寻找的答案！

# mysql - MySQL全文索引下划线

> ID：11251967
> 
> 赞同：2
> 
> 时间：2012-06-28T19:58:38.813
> 
> 标签：mysql, localization, full-text-search, collation, stop-words

我对 MySQL 的全文索引有疑问，它将下划线视为单词的一部分（为什么？不知道）。这是我桌子上的字符串，`VA_-_Some_Album`

这是它的查询：

```
SELECT 
  * 
FROM
  `mytable`
WHERE
 MATCH (`name`) AGAINST ('+Some* +Album*' IN BOOLEAN MODE)
ORDER BY `sdate` DESC 
LIMIT 3 
```

MySQL为此查询返回一个空集，除非我将其更改为，`+*Some*`因为下划线是单词的一部分（`_Some`而不是`Some`）。这对我不利，因为当添加额外的星号 (*) 时，加号停止运行，我没有完成“AND”。

我试图更改字符集定义，并重建全文索引但没有。

有任何想法吗？改变字符串的存储方式不取决于我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:37:41.220

我不是很清楚你的问题，但看看这里：

[http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html)

他们在那里解释了布尔模式下_、+、*、-、<>等之间的区别

# mahout - LDA Mahout 只有一个主题

> ID：11251972
> 
> 赞同：2
> 
> 时间：2012-06-28T19:58:49.487
> 
> 标签：mahout, lda

我正在尝试按照 Mahout In Action 书中的说明在路透社数据上使用 LDA 的示例。但是，无论我运行多少次，我总是只得到一个主题。

我按照指示运行了命令：

```
mahout lda -i reuters-vectors/tf-vectors -o reuters-lda-sparse -k 10 -v 34262 -x 20 -ow 
```

我从运行 seqdumper 中得到了这个号码。命令运行后，我按照书中的说明运行 LDAPrintTopics 并获得以下信息：

```
Topic 0
===========
billion [p(billion|topic_0) = 0.04580929884162013
pct [p(pct|topic_0) = 0.043323700764985575
dlrs [p(dlrs|topic_0) = 0.031395871939373196
3 [p(3|topic_0) = 0.027311386657272094
1987 [p(1987|topic_0) = 0.025690077982656934
1 [p(1|topic_0) = 0.022727304049111215
reuter [p(reuter|topic_0) = 0.019572283708227903
mln [p(mln|topic_0) = 0.014569551610736616
april [p(april|topic_0) = 0.014453636611524965
march [p(march|topic_0) = 0.014359948846622552 
```

有没有办法从 LDA 中获得更多主题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T10:05:20.750

您的命令说 -k 10 指定需要有 10 个主题。

看到这个[https://cwiki.apache.org/MAHOUT/latent-dirichlet-allocation.html](https://cwiki.apache.org/MAHOUT/latent-dirichlet-allocation.html)

尝试更改您的数据集，可能它太小而无法生成 10 个不同的主题

# ruby-on-rails - Rails crashing when accessing belongs_to model from current model

> ID：11251979
> 
> 赞同：0
> 
> 时间：2012-06-28T19:59:01.310
> 
> 标签：ruby-on-rails, ruby-on-rails-3

I feel a bit stupid but this is not working (and I expected it should work):

```
class MembershipCard < ActiveRecord::Base
  belongs_to :association
  belongs_to :personal_record

  validates :number, :presence => true

  def dis
    print "---------------------------- #{personal_record.as_json}---------------------"
    number
  end

  def value
    id
  end
end

class PersonalRecord < ActiveRecord::Base
  has_many :membership_card, :dependent => :nullify

  def dis
    "#{name} #{surname}"
  end

  def val
    id
  end
end 
```

`print "---------------------------- #{personal_record.as_json}---------------------"`

It's not printing. Any suggestion about why this is happening?

I can't access any associated model in this way and it's a disaster, basically I can't use activerecord.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T23:05:58.280

I solved the problem by myself: it seems that `association` is used inside rails (damn me), expecially this was crashing my application. Commenting it solved the issue, so I'm going to rename models/controllers and so on.

# reflection - 如何发现abap开发对象的属性？

> ID：11251983
> 
> 赞同：2
> 
> 时间：2012-06-28T19:59:16.310
> 
> 标签：reflection, abap, discoverability

我来自java世界，我想知道是否有任何东西可以帮助我理解abap开发对象的属性......比如反射。

知道 ABAP 中发生的所有事情都保存在数据库中的某个地方，我想知道我将如何去找出对象的保存方式和位置。

例如，我想知道是否有任何函数可以枚举结构的字段或枚举对象的属性，或者如果没有这样的东西（但属性显然仍然存在），那么将是什么表持有那些（这样我就可以创建自己的函数或类）

另外，您知道的任何其他可发现性技巧都很好...我知道这个问题有点笼统，但是由于我是abap的新手，所以我真的不知道该问什么：P

Thx，你们统治。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T21:01:46.230

如果您正在寻找类似反射的东西，请查看[RTTI](http://help.sap.com/abapdocu_70/en/ABENRTTI.htm)。这涵盖了您将遇到的大多数内容的运行时结构。如果您想了解 cevelopment 工具表面下发生的事情，只需打开 SQL 跟踪 (ST05)，在编辑器中打开有问题的对象并检查访问了哪些表...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T20:53:36.853

很难回答你的问题，也许会更容易，如果你把它分成多个问题和你想要的特定任务。

一些我记得的话题（请验证一下，如果我记得正确我现在无法检查）：

DDIC 对象存储在带有`DD*`.

表格（和那里的属性）存储在 中`dd02l`，`dd02t`包括文本。`dd03l`包含字段。`dd04tl`包含数据元素的文本。

但是，如果您在此表中添加一些内容，它不会帮助您。后台数据库将无法获取定义。

如果你想创造一些动态*魔法*，你可以看看`field-symbols`and `assign`-command。

# c - 基数排序工作

> ID：11251986
> 
> 赞同：1
> 
> 时间：2012-06-28T19:59:26.483
> 
> 标签：c, radix-sort

我想知道遵循基数排序程序的逻辑。

```
#include <stdio.h>
#include <limits.h>
#include <stdlib.h>

typedef unsigned uint;
#define swap(a, b) { tmp = a; a = b; b = tmp; }
#define each(i, x) for (i = 0; i < x; i++)

/* sort unsigned ints */
static void rad_sort_u(uint *from, uint *to, uint bit)
{
    if (!bit || to < from + 1) return;

uint *ll = from, *rr = to - 1, tmp;
while (1) {
    /* find left most with bit, and right most without bit, swap */
    while (ll < rr && !(*ll & bit)) ll++;
    while (ll < rr &&  (*rr & bit)) rr--;
    if (ll >= rr) break;
    swap(*ll, *rr);
}

if (!(bit & *ll) && ll < to) ll++;
bit >>= 1;

rad_sort_u(from, ll, bit);
rad_sort_u(ll, to, bit);
}

/* sort signed ints: flip highest bit, sort as unsigned, flip back */
static void radix_sort(int *a, const size_t len)
{
size_t i;
uint *x = (uint*) a;

each(i, len) x[i] ^= INT_MIN;
rad_sort_u(x, x + len, INT_MIN);
each(i, len) x[i] ^= INT_MIN;
}

static inline void radix_sort_unsigned(uint *a, const size_t len)
{
rad_sort_u(a, a + len, (uint)INT_MIN);
}

int main(void)
{
int len = 16, x[16], i;
size_t len = 16, i;
each(i, len) x[i] = rand() % 512 - 256;

radix_sort(x, len);

each(i, len) printf("%d%c", x[i], i + 1 < len ? ' ' : '\n');

return 0;
} 
```

我被卡住了，因为我不太了解 while(1) 循环..

到目前为止，我所知道的是：

```
INT_MIN=-2147483648 
```

`bit`这与in的值相同`rad_short_u()`

我已经调试了程序，由于`rand() % 512-256`，还生成了一些 -ve 值，

在第一次传递期间，它将所有 -ve 值交换到一侧（从开始）和 +ve 之后从下一次传递它向左移动到 1 位，因此位的值从那时变为 1073741824 直到它变成 1 数组保持不变。

请帮助我理解程序逻辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T20:07:06.697

要理解这个程序，你需要理解快速排序和最高有效位基数排序。

与快速排序一样，它将数组划分为多个部分，然后递归地对这些部分进行排序。它首先根据最高有效位的值进行分区。然后它在两半上递归。但是这一次，对于每一半，它根据第二个最高有效位进行分区。然后它再次划分，对于每 1/4，它在第 3 个最高有效位上划分......

请注意，虽然我说的是“1/2”、“1/4”等，但它通常不会将数组精确地划分为 1/2、1/4 等。每个划分的大小取决于数组中的数字分布。对于普通的快速排序，每个分区的大小将取决于选择为“枢轴”的元素，但对于这种“基数快速排序”来说，情况并非如此——“枢轴”的顺序是固定的。

另请注意，与正常的快速排序不同，它可能会变成二次方并且在某些输入上变得非常慢，这种“快速排序”保证在固定数量的通过中完成。实际上，无论输入如何，所需的通过次数都是一个常数。（这是基数排序的一个典型属性——性能往往对输入不敏感。）

另一个有趣的属性：普通的快速排序会将数组分成 3 部分——小于、等于和大于枢轴的部分。但是这种“快速排序”*总是*在每次通过时将其输入精确地划分为 2 部分——那些在被测试的位置有 0 位的部分，以及那些有 1 位的部分。

我认为这个算法的名称实际上是“二进制快速排序”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:21:04.087

您的`while(1)`循环对无符号整数按位运行。对于每个位，它从列表的顶部和底部开始，找到该位设置在底部而不是顶部的第一对整数，然后交换它们。这更正了这些值在该位的顺序。

它继续这样做，直到顶部/底部相遇。最后，每次通过`while(1)`循环将导致列表在列表底部具有未设置该位的所有数字，并且在列表顶部具有该位设置的所有数字。

然后按位对列表进行排序，从 MSB 开始，然后是第二个 MSB，...，最后是 LSB。对于有符号整数，该值为`INT_MIN`负数，但对应于二进制补码的 MSB。

这些`x[i] ^= INT_MIN`行允许基数排序正确处理负数。有符号整数以二进制补码形式存储。这实际上意味着负数设置了它们的 MSB。

如果你天真地对有符号整数应用基数排序，你最终会得到排序为比负数更低的正数。

`x[i] ^= INT_MIN`翻转 MSB，解决了这个问题。第二个`x[i] ^= INT_MIN`翻转位。

# iphone - 如何使 UIView 的子视图居中

> ID：11251988
> 
> 赞同：141
> 
> 时间：2012-06-28T20:00:04.103
> 
> 标签：iphone, objective-c, ios, ipad

我有一个`UIView`内部`UIView`m，我希望内部`UIView`始终位于外部内部的中心，而不必调整宽度和高度。

我已经设置了支柱和弹簧，使其位于顶部/左侧/右侧/底部，而无需设置调整大小。但它仍然没有居中。任何想法？

* * *

## 回答 #1

> 赞同：297
> 
> 时间：2012-06-28T22:08:14.743

你可以这样做，它总是有效的：

```
child.center = [parent convertPoint:parent.center fromView:parent.superview]; 
```

对于斯威夫特：

```
child.center = parent.convert(parent.center, from:parent.superview) 
```

* * *

## 回答 #2

> 赞同：230
> 
> 时间：2012-06-28T22:03:03.847

### Objective-C

```
yourSubView.center = CGPointMake(yourView.frame.size.width  / 2, 
                                 yourView.frame.size.height / 2); 
```

### 迅速

```
yourSubView.center = CGPoint(x: yourView.frame.size.width  / 2,
                             y: yourView.frame.size.height / 2) 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2015-07-22T14:29:34.950

在开始之前，让我们提醒一下原点是视图的左上角`CGPoint`。了解观点和父母很重要。

让我们看一下这个简单的代码，一个视图控制器，它在视图中添加了一个黑色方块：

```
class ViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()
        // Do any additional setup after loading the view, typically from a nib.
        createDummyView()
        super.view.backgroundColor = UIColor.cyanColor();
    }

    func createDummyView(){
        var subView = UIView(frame: CGRect(x: 15, y: 50, width: 50 , height: 50));
        super.view.addSubview(subView);
        view.backgroundColor = UIColor.blackColor()
    }

} 
```

这将创建这个视图：黑色矩形的原点和中心确实适合与其父级相同的坐标

[![在此处输入图像描述](../Images/574cab9dd6294a3ed86abb61e8b05ec9.png)](https://i.stack.imgur.com/kNM0f.png)

现在让我们尝试将 subView 添加另一个 SubSubView，并赋予 subSubview 与 subView 相同的来源，但使 subSubView 成为 subView 的子视图

我们将添加以下代码：

```
var subSubView = UIView();
subSubView.frame.origin = subView.frame.origin;
subSubView.frame.size = CGSizeMake(20, 20);
subSubView.backgroundColor = UIColor.purpleColor()
subView.addSubview(subSubView) 
```

这是结果：

[![在此处输入图像描述](../Images/e78c519d7e6b760b71047b7cd0990546.png)](https://i.stack.imgur.com/viHzv.png)

因为这条线：

```
subSubView.frame.origin = subView.frame.origin; 
```

您期望紫色矩形的原点与其父级（黑色矩形）相同，但它位于其下方，这是为什么呢？因为当您将视图添加到另一个视图时，子视图框架“世界”现在是它的父 BOUND RECTANGLE，如果您认为它在主屏幕上的原点在所有子视图的坐标 (15,15) 处，则左上角将是 (0,0)

这就是为什么你需要总是通过它的绑定矩形来引用父级，这是它的子视图的“世界”，让我们将此行修复为：

```
subSubView.frame.origin = subView.bounds.origin; 
```

看看魔术，subSubview 现在正好位于它的父原点：

[![在此处输入图像描述](../Images/cdee9f173ba7e13b4fa1357348a32446.png)](https://i.stack.imgur.com/fpudG.png)

所以，你喜欢“好吧，我只想以我父母的观点为中心，有什么大不了的？” 好吧，这没什么大不了的，您只需要通过执行以下操作将从其框架中获取的父中心点“翻译”到父边界中心：

```
subSubView.center = subView.convertPoint(subView.center, fromView: subSubView); 
```

您实际上是在告诉他“获取父母视图中心，并将其转换为 subSubView 世界”。

你会得到这个结果：

[![在此处输入图像描述](../Images/f877008ea4940791868bb2042ccdc015.png)](https://i.stack.imgur.com/XDbSd.png)

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2015-01-18T19:41:33.370

我会使用：

```
self.childView.center = CGPointMake(CGRectGetMidX(self.parentView.bounds),
                                    CGRectGetMidY(self.parentView.bounds)); 
```

我喜欢使用`CGRect`选项...

斯威夫特 3：

```
self.childView.center = CGPoint(x: self.parentView.bounds.midX,
                                        y: self.parentView.bounds.midY); 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-06-28T21:22:33.547

### 1\. 如果您启用了自动布局：

*   提示：要使用自动布局将视图居中在另一个视图上，您​​可以对共享至少一个父视图的任何两个视图使用相同的代码。

首先禁用子视图自动调整大小

```
UIView *view1, *view2;
[childview setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

1.  如果您是 UIView+Autolayout 或[Purelayout](https://github.com/smileyborg/PureLayout)：

    ```
    [view1 autoAlignAxis:ALAxisHorizontal toSameAxisOfView:view2];
    [view1 autoAlignAxis:ALAxisVertical toSameAxisOfView:view2]; 
    ```

2.  如果你只使用 UIKit 级别的自动布局方法：

    ```
    [view1 addConstraints:({
        @[ [NSLayoutConstraint
           constraintWithItem:view1
           attribute:NSLayoutAttributeCenterX
           relatedBy:NSLayoutRelationEqual
           toItem:view2
           attribute:NSLayoutAttributeCenterX
           multiplier:1.f constant:0.f],

           [NSLayoutConstraint
            constraintWithItem:view1
            attribute:NSLayoutAttributeCenterY
            relatedBy:NSLayoutRelationEqual
            toItem:view2
            attribute:NSLayoutAttributeCenterY
            multiplier:1.f constant:0.f] ];
    })]; 
    ```

### 2.没有自动布局：

我更喜欢：

```
UIView *parentView, *childView;
[childView setFrame:({
    CGRect frame = childView.frame;

    frame.origin.x = (parentView.frame.size.width - frame.size.width) / 2.0;
    frame.origin.y = (parentView.frame.size.height - frame.size.height) / 2.0;

    CGRectIntegral(frame);
})]; 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2016-02-17T16:37:24.477

最简单的方法：

```
child.center = parent.center 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2017-09-15T08:52:03.077

您可以使用

```
yourView.center = CGPointMake(CGRectGetMidX(superview.bounds), CGRectGetMidY(superview.bounds)) 
```

在 Swift 3.0 中

```
yourView.center = CGPoint(x: superview.bounds.midX, y: superview.bounds.midY) 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2014-04-14T11:43:46.390

![在此处输入图像描述](../Images/a029d28fa7ee97ad8fc1f9bd2b5bbca1.png)

将此自动调整大小蒙版设置为您的内部视图。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2016-06-24T01:17:56.410

使用 IOS9，您可以使用布局锚 API。

代码如下所示：

```
childview.centerXAnchor.constraintEqualToAnchor(parentView.centerXAnchor).active = true
childview.centerYAnchor.constraintEqualToAnchor(parentView.centerYAnchor).active = true 
```

`CGPointMake`与or相比，这样做的优势`CGRect`在于，使用这些方法可以将视图的中心设置为一个常数，但是使用这种技术，您可以设置两个视图之间的关系，无论`parentview`变化如何，都将永远保持。

请确保在执行此操作之前：

```
 self.view.addSubview(parentView)
        self.view.addSubView(chidview) 
```

并将`translatesAutoresizingMaskIntoConstraints`每个视图的 设置为 false。

这将防止崩溃和 AutoLayout 干扰。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-07-17T22:38:21.383

在视图和子视图中使用相同的中心是最简单的方法。你可以做这样的事情，

```
UIView *innerView = ....;
innerView.view.center = self.view.center;
[self.view addSubView:innerView]; 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-05-15T17:01:44.367

[PureLayout](https://github.com/smileyborg/PureLayout)的另一种解决方案是使用`autoCenterInSuperview`.

```
// ...
UIView *innerView = [UIView newAutoLayoutView];
innerView.backgroundColor = [UIColor greenColor];
[innerView autoSetDimensionsToSize:CGSizeMake(100, 30)];

[outerview addSubview:innerView];

[innerView autoCenterInSuperview]; 
```

这就是它的样子：

![PureLayout 居中](../Images/cc666da898852331d9361baec085866d.png)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-06-07T04:19:02.230

在 c# 或 Xamarin.ios 中，我们可以这样使用

imageView.Center = new CGPoint(tempView.Frame.Size.Width / 2, tempView.Frame.Size.Height / 2);

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-02-19T06:17:34.067

这对我有用

```
childView.centerXAnchor.constraint(equalTo: parentView.centerXAnchor).isActive = true
childView.centerYAnchor.constraint(equalTo: parentView.centerYAnchor).isActive = true 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-07-23T23:34:30.803

我会使用：

```
child.center = CGPointMake(parent.bounds.height / 2, parent.bounds.width / 2) 
```

这很简单，简短而甜蜜。如果您在上面使用@Hejazi 的答案并`parent.center`设置为您的子视图以外的任何内容，`(0,0)`则不会居中！

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-08-23T16:48:22.730

```
func callAlertView() {

    UIView.animate(withDuration: 0, animations: {
        let H = self.view.frame.height * 0.4
        let W = self.view.frame.width * 0.9
        let X = self.view.bounds.midX - (W/2)
        let Y = self.view.bounds.midY - (H/2)
        self.alertView.frame = CGRect(x:X, y: Y, width: W, height: H)
        self.alertView.layer.borderWidth = 1
        self.alertView.layer.borderColor = UIColor.red.cgColor
        self.alertView.layer.cornerRadius = 16
        self.alertView.layer.masksToBounds = true
        self.view.addSubview(self.alertView)

    })

}// calculation works adjust H and W according to your requirement 
```

# javascript - Illustrator Javascript：基于色板选择

> ID：11251990
> 
> 赞同：1
> 
> 时间：2012-06-28T20:00:07.053
> 
> 标签：javascript, adobe-illustrator

有没有办法制作一个 Javascript Illustrator 脚本来选择文档中具有特定颜色的所有内容？我在任何地方都找不到任何信息。我知道您可以使用“选择”下拉菜单执行我所要求的操作，但我需要将其作为脚本的一部分。

我试过类似的东西：

`myDoc.selection = Spot.name("CutContour");`

和

`myDoc.selection = myDoc.spots.item("CutContour");`

但两者都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:52:49.103

这应该可以帮助你。对象的 fillColor 属性不是对样本对象的引用（因此我们可以检查其名称）。它是对颜色本身的描述（样本面板上没有附加字符串）。话虽如此，我们需要寻找颜色类型名称及其值以进行匹配。但是，如果您指定 CutContour 并且两种颜色具有此名称，则结果可能不是预期的。

```
function getObjectsByColor ( colorName )
{
var doc, items, i = 0, n = 0, item, color, selectionArray = [];

if ( app.documents.length == 0 ){ 
    alert("No documents open");
    return;
}

doc = app.activeDocument;
try
{
    color = doc.swatches.getByName ( colorName );
}
catch(e)
{
    alert( "No such color !");
    return;
}

color = color.color ;

items = doc.pageItems;
n = items.length;
if ( items.length == 0 )
{
    alert( "No items found");
    return;
}

for ( i = 0; i < n ; i++ )
{
    item = items[i];
    if ( item.fillColor.typename == color.typename
    && item.fillColor.cyan == color.cyan
    && item.fillColor.magenta == color.magenta
    && item.fillColor.yellow == color.yellow
    && item.fillColor.black == color.black )
    {
        selectionArray [ selectionArray.length ] = item;
    }
}

if ( selectionArray.length == 0 )
{
    alert( "Nothing found" );
    return;
}

app.selection = selectionArray;
}

getObjectsByColor ("CutContour"); 
```

洛伊克

PS：您使用的是 Caldera RIP 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-09T18:52:03.960

是的，有办法做到这一点。此脚本与 Illustrator 中的“选择相同的填充颜色”操作相同。注释代码以及您的帮助。它在 Illustrator CC 2017 中完美运行

```
app.selection = null;
if (app.activeDocument.length > 0) {
    try {
        var swatch = app.activeDocument.swatches.getByName('CMYK Red');
        var temp = app.documents[0].pathItems.rectangle(10, 10, 150, 150);
        temp.fillColor = swatch.color;

        // To select object that have CMYK Red swatch applied to stroke and fill.
        app.executeMenuCommand('Find Fill & Stroke menu item');

        // To select object that have CMYK Red swatch applied to fill.
        app.executeMenuCommand('Find Fill Color menu item');

        // To select object that have CMYK Red swatch applied to stroke.
        app.executeMenuCommand('Find Stroke Color menu item');

        temp.remove();
    } catch (e) {
        alert('CMYK Red swatch does not exists!!')
    }
} 
```

# java - 与祖先具有相同属性值的项目的 Xpath

> ID：11251991
> 
> 赞同：1
> 
> 时间：2012-06-28T20:00:10.657
> 
> 标签：java, xml, xpath, substitution, pmd

我将如何编写一个 xpath 查询来匹配`<subitem>`下面 XML 片段中的元素？

具体来说，我想匹配具有与根的“名称”属性值匹配的“名称”属性的任何元素。`<root>`和之间可能有任意数量的祖先`<subitem>`。

```
<root name="xyz">
  <anything>
    <subitem name="xyz" />
  </anything>
</root> 
```

我的目标是编写一个 PMD 规则来查找 Logger.getLogger() 使用与语句所在的类不同的类的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T04:14:57.473

**使用这个 XPath 表达式**：

```
//*[@name = /*/@name] 
```

这将选择任何元素（包括名为 的顶部元素`root`），其属性与顶部元素的`name`属性具有相同的字符串值`name`。当针对提供的 XML 文档评估此 XPath 表达式时，会选择两个元素 -`root`和`subitem`。

**我认为只需要这两个元素中的第二个元素。为此，请使用以下 XPath 表达式**：

```
//*/*[@name = /*/@name] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
   <xsl:copy-of select="//*/*[@name = /*/@name]"/>
========
   <xsl:copy-of select="//*[@name = /*/@name]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root name="xyz">
    <anything>
        <subitem name="xyz" />
    </anything>
</root> 
```

**计算两个 XPath 表达式并将所选节点复制到输出：**

```
<subitem name="xyz"/>
========
   <root name="xyz">
    <anything>
      <subitem name="xyz"/>
    </anything>
   </root>
   <subitem name="xyz"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:10:44.457

`//*[@name=(ancestor::*/@name)]`

这应该可以解决问题。我会将其读作“查找所有具有相同祖先的节点`name`。”

* * *

**编辑**（加上第二个，它仍然选择了太多）

编辑问题后：

`//*[@name=(/@name)]`

`name`这读作“查找与根节点相同的所有节点”。请注意，根节点可能不是您认为的那样（并且您希望与名为 的最顶层节点匹配`root`，而不是[root](http://www.w3.org/TR/xpath/#root-node)），您可能需要将其实现为

`//*[@name=(/root/@name)]`或者`//*[@name=(/*/@name)]`

* * *

这选择了两个元素，你的`subitem`和`root`不需要的，你只想选择*不是最顶层*的节点（是 的后代`root`）。这要归功于 Dimitre Novatchev。

`//*/*[@name=(/*/@name)]`

# ios - 您需要采取哪些步骤将 UIPanGestureRecognizer 触摸转换为 ScrollView 缩放？

> ID：11251992
> 
> 赞同：1
> 
> 时间：2012-06-28T20:00:15.527
> 
> 标签：ios, uiscrollview, uigesturerecognizer, cgaffinetransform, uipinchgesturerecognizer

我正在创建一个手势识别器来处理滚动视图的缩放（一次仅沿一个轴滚动）。我有手势识别器工作，但我无法使用来自手势识别器的数据来正确转换我的视图。这就是我现在所做的：

```
- (void)handlePinch:(GPinchGestureRecognizer *)pinchRecognizer
{
 CGSize contentSize = [[self scrollView] contentSize];

 if (pinchRecognizer.pinchType == VerticalPinchZoomIn || pinchRecognizer.pinchType == VerticalPinchZoomOut)
 {

    [[self scrollView] containerView].transform = CGAffineTransformScale([pinchRecognizer transformBeforeTouches], 1, [pinchRecognizer scale]);
    [[self scrollView] setContentSize:CGSizeMake(contentSize.width, [pinchRecognizer initialContentSize].height * [pinchRecognizer scale])];
 }
 ... 
 ...
} 
```

这很好地调整了视图的大小，但是，它让它到达屏幕上的奇怪位置，有时滚动视图将无法一直滚动到它的边缘（它认为它的边界在中间查看某处并反弹回来）。

所以基本上，我的问题是，我需要对其他对象的哪些其他属性进行操作才能使其正常工作？View.transform，ScrollView.contentSize，还有什么？如果只有 Apple 的 UIScrollView 实现文件是开源的 xD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:11:08.560

您确实需要添加 UIPinchGestureRecognizer 或既不维护它。

只需按照[此](http://forums.pragprog.com/forums/83/topics/1488)链接在滚动视图中添加图像以进行缩放

# scala - Scala 2.8.1 => 2.9.2 RangeByOne NoSuchMethod 错误

> ID：11251996
> 
> 赞同：1
> 
> 时间：2012-06-28T20:00:27.877
> 
> 标签：scala, scala-2.8

所以我使用了一个图形库，它对 Scala 的依赖项在 build.sbt 中列为 2.8.1。我尝试将其更改为 Scala 2.9.2，它编译得很好，但是出现了这个运行时错误：

```
[error] (run-main) java.lang.NoSuchMethodError: scala.runtime.RichInt.until(I)Lscala/collection/immutable/Range$ByOne;
java.lang.NoSuchMethodError: scala.runtime.RichInt.until(I)Lscala/collection/immutable/Range$ByOne; 
```

它还列出了乱七八糟的错误中的行号，我将其追溯到一行代码，例如：

```
for (i <- 0 to x) 
```

我很确定 Scala 2.9.2 确实有这个`to`方法..我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:23:41.487

这看起来像您正在使用一些为 2.8.x 编译的库以及用 2.9.x 编译的代码。这样做是不可能的。

**编辑**

好的，我检查了 Cassovary，我想您没有更改 Scala 版本的规格。我检查了哪些版本可用，我建议您将其更改为：

```
libraryDependencies += "org.scala-tools.testing" % "specs_2.9.1" % "1.6.9" % "test" withSources() 
```