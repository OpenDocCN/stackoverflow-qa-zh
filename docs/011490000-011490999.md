# StackOverflow 问答 11490000-11490999

# html - 如何沿着曲线制作图像的边框？

> ID：11490000
> 
> 赞同：2
> 
> 时间：2012-07-15T06:42:15.540
> 
> 标签：html, css

我制作了一个 JS Fiddle，在其中嵌入了一个圆角的图像。

[http://jsfiddle.net/JDRSc/](http://jsfiddle.net/JDRSc/)

这是 img 标签的 CSS。

```
img {
  -webkit-border-radius: 20px;
  border: 20px solid #000;
  border-radius: 20px;
}​ 
```

如何使图像的边框跟随圆角的曲线？现在，图像本身仍然有尖角。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:40:35.880

在这里，[http://jsfiddle.net/JDRSc/7/](http://jsfiddle.net/JDRSc/7/)

**HTML**

```
<div id="wrapper">
    <img src="http://kittens-for-sale.net/wp-content/uploads/2011/11/kittens-for-sale-5.jpg" alt="" />
</div> 
```

​<strong>CSS

```
#wrapper {
    display:inline-block;
    border: 10px solid black;
    -moz-border-radius: 30px; /*Sum of #wrapper border + img border-radius*/
    -webkit-border-radius: 30px; /*Sum of #wrapper border + img border-radius*/
    border-radius: 30px; /*Sum of #wrapper border + img border-radius*/
}    

img {
    display: block;
    -moz-border-radius: 20px;
    -webkit-border-radius: 20px;
    border-radius: 20px;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T07:13:24.493

要管理边界半径以使其在内部和外部生效，您应该将边界半径的值设置为大于边界大小。

这将解决它。

尝试：

```
border-size:10px;
border-radius:15px; 
```

它会起作用的。

# maven - 使用maven创建java资源webapp文件夹结构

> ID：11490001
> 
> 赞同：4
> 
> 时间：2012-07-15T06:42:19.850
> 
> 标签：maven, maven-2, archetypes

我想在 . `/java`_`/resources``/webapp/WEB-INF/web.xml``src`

我已经使用了，`-DarchetypeArtifactId=maven-archetype-webapp`但它创建`/resources /webapp/WEB-INF/web.xml`但不创建`/java`文件夹。

因此，尽管`/java`在 eclipse 中手动创建了文件夹，但还有其他方法可以创建一些`-DarchetypeArtifactId=`，以便创建上述文件夹结构。

如果有人能告诉我如何自定义和设计我的文件夹结构并在不使用现有模板的情况下使用 maven 创建它，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T15:35:37.367

当您使用 -DarchetypeArtifactId=maven-archetype-webapp 时，不会创建 java 文件夹。它需要手动创建。

它创建了以下结构

```
src
└── main
    └── resources
        └── webapp
            └── WEB-INF 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T08:36:00.293

最好的选择是遵循 Maven 标准目录布局：

[http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)

由于可以使用不同的编程语言进行 Web 开发，因此原型被最小化：

[http://cvs.peopleware.be/training/maven/maven2/standardDirLayout.html](http://web.archive.org/web/20110723201350/http://cvs.peopleware.be/training/maven/maven2/standardDirLayout.html)（链接到 web.archive，因为主链接已经失效）

它将最大限度地减少插件的配置，还将简化对 Maven 项目的理解和维护

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T06:48:34.497

您可以使用以下原型创建 Maven Webapp

```
-DarchetypeArtifactId=maven-archetype-webapp 
```

这将自动创建所需的文件夹结构

在你的情况下，它除了`src\main\java`

```
src\main\resources
src\main\webapp 
```

# android - Eclipse 应用程序选项卡

> ID：11490004
> 
> 赞同：0
> 
> 时间：2012-07-15T06:42:50.143
> 
> 标签：android, eclipse

**当我打开我的项目清单并选择应用程序选项卡时，它是一个空白选项卡！**

![应用程序选项卡](../Images/eedb4583f043096f2ba857ea5955c613.png)

**在清单中，我没有应用程序节点，因此我无法通过此表单插入或编辑活动。**

![显现](../Images/da87e2e853a7666e7a40e772674ce5ba.png)

**我的 Eclipse 版本是 3.6.2**

**有什么问题？**

**为什么应用程序选项卡是空白的？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:31:33.770

解决方案：

*   打开应用程序选项卡，然后在此选项卡打开时关闭 Eclipse IDE。
*   运行日食

它很奇怪，但它有效！

![在此处输入图像描述](../Images/5e816e9e1912e43c4389d9b7c0a2055d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:55:09.660

这么奇怪！也许你应该下载新版本的eclipse 4.2

# java - Servlet 在 tomcat 上部署时抛出异常

> ID：11490007
> 
> 赞同：-1
> 
> 时间：2012-07-15T06:43:45.570
> 
> 标签：java, tomcat, servlets

我正在开发一个计数器的应用程序，下面是我的应用程序的结构..

首先是监听器类

```
 package com.saral;

import javax.servlet.*;

public class AppListener implements ServletContextListener
{
ServletContext ctx;
public void contextInitialized(ServletContextEvent e)
{
ctx=e.getServletContext();
ctx.setAttribute("hitCount",new Integer(0));
}
public void contextDestroyed(ServletContextEvent e)
{}
} 
```

然后过滤类..

```
 package com.saral;

import javax.servlet.*;

public class CounterFilter implements Filter
{
ServletContext ctx;
public void init(FilterConfig config){
ctx=config.getServletContext();
}
public void destroy(){}
public void doFilter(ServletRequest request,ServletResponse response,FilterChain chain)
{
try
{
Integer ct=(Integer)ctx.getAttribute("hitCount");
int c=ct.intValue();
c++;
ctx.setAttribute("hitCount",new Integer(c));
chain.doFilter(request,response);
}catch(Exception e)
{
System.out.println(e);
}
}
} 
```

其次是登录servlet ..

```
 package com.saral;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import java.sql.*;
public class LoginServlet extends HttpServlet
{
public void doGet(HttpServletRequest request,HttpServletResponse response) 
{
try{
String name=request.getParameter("txtName");
String pass=request.getParameter("txtPass");
Class.forName("oracle.jdbc.driver.OracleDriver");
Connection con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe");
PreparedStatement stmt=con.prepareStatement("select * from logininfo where username=? and password=?");
stmt.setString(1,name);
stmt.setString(2,pass);
ResultSet rset=stmt.executeQuery();
response.setContentType("text/html");
PrintWriter out=response.getWriter();
if (rset.next())
{
request.getSession().setAttribute("username",name);
RequestDispatcher rd=request.getRequestDispatcher("aa");
rd.forward(request,response);
}
else
{
System.out.println("in else");
out.println("<b>Invalid user name or password.</b><br>");
RequestDispatcher rd=request.getRequestDispatcher("home.html");
rd.include(request,response);
}
out.close();
con .close();
}catch(Exception e)
{
System.out.println(e);
}
}
} 
```

其次是servlet2 ..

```
package com.saral;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class ServletTwo extends HttpServlet
{
public void doGet(HttpServletRequest request,HttpServletResponse response) throws ServletException,IOException
{
HttpSession ses=request.getSession();
String name=(String)ses.getAttribute("username");
response.setContentType("text/html");
PrintWriter out=response.getWriter();
out.println("welcome,"+name);
out.println("<br> <a href=viewServlet>View Hit Count</a>");
out.close();
}
} 
```

最后查看servlet ..

```
package com.saral;

import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;

public class ViewServlet extends HttpServlet
{
public void doGet(HttpServletRequest request,HttpServletResponse response) throws ServletException,IOException
{
ServletContext ctx=getServletContext();
int c=((Integer)ctx.getAttribute("hitCount")).intValue();
response.setContentType("text/html");
PrintWriter out=response.getWriter();
out.println("hit count is:"+c);
out.close();
}
} 
```

我以这种方式编写了web.xml..

```
 <web-app>

<listener>
<listener-class>AppListener</listener-class>
</listener>

<filter>
<filter-name>counter</filter-name>
<filter-class>com.saral.CounterFilter</filter-class>
</filter>
<filter-mapping>
<filter-name>counter</filter-name>
<url-pattern>*</url-pattern>
</filter-mapping>
<servlet>
<servlet-name>hello</servlet-name>
<servlet-class>com.saral.LoginServlet</servlet-class>
<init-param>
<param-name>driverClass</param-name>
<param-value>oracle.jdbc.driver.OracleDriver</param-value>
</init-param>
<init-param>
<param-name>connectionString</param-name>
<param-value>jdbc:oracle:thin:@localhost:1521:xe</param-value>
</init-param>
<init-param>
<param-name>userName</param-name>
<param-value>saral</param-value>
</init-param>
<init-param>
<param-name>password</param-name>
<param-value>saral</param-value>
</init-param>

</servlet>
<servlet-mapping>
<servlet-name>hello</servlet-name>
<url-pattern>/loginServlet</url-pattern>
</servlet-mapping>
<servlet>
<servlet-name>two</servlet-name>
<servlet-class>com.saral.ServletTwo</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>two</servlet-name>
<url-pattern>/aa</url-pattern>
</servlet-mapping>
<servlet>
<servlet-name>three</servlet-name>
<servlet-class>com.saral.ViewServlet</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>three</servlet-name>
<url-pattern>/viewServlet</url-pattern>
</servlet-mapping>
<welcome-file-list>
<welcome-file>home.html</welcome-file>
</welcome-file-list>
</web-app> 
```

我的主要html是..

```
<html>
<head>
<title> A Simple web Application</title>
</head>
<body>
<form method="get" action="loginServlet">
Name<input type="text" name="txtName"/>
Password<input type="password" name="txtPass"/>
<input type="submit" value="Login"/>
</form>
</body>
</html> 
```

但是在 tomcat 7 上部署此应用程序时，它会引发错误。

```
NFO: Starting Servlet Engine: Apache Tomcat/7.0.27
15 Jul, 2012 12:05:14 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Error configuring application listener of class AppListener
java.lang.ClassNotFoundException: AppListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:525)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:507)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:124)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4715)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
15 Jul, 2012 12:05:14 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Skipped installing application listeners due to previous error(s)
15 Jul, 2012 12:05:14 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
15 Jul, 2012 12:05:14 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/Counter] startup failed due to previous errors 
```

请告知申请中有什么问题

按照 web.xml 中的建议完成此更改

```
<listener>
    <listener-class>com.saral.AppListener</listener-class>
</listener> 
```

但仍然出现错误..

```
SEVERE: Error configuring application listener of class com.saral.AppListener
java.lang.ClassNotFoundException: com.saral.AppListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:525)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:507)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:124)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4715)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
15 Jul, 2012 12:21:13 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Skipped installing application listeners due to previous error(s) 
```

请指教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:46:00.753

在您的 web.xml 中，您有此侦听器配置

```
<listener>
    <listener-class>AppListener</listener-class>
</listener> 
```

`AppListener`找不到类，必须设置全名（包括包名）：

```
<listener>
    <listener-class>com.saral.AppListener</listener-class>
</listener> 
```

# email - 使用 Automator 通过电子邮件发送 Word 文档

> ID：11490008
> 
> 赞同：0
> 
> 时间：2012-07-15T06:43:49.887
> 
> 标签：email, ms-word, applescript, automator

我确实在几台电脑上工作，并使用我的电子邮件地址来保存我的文件的额外副本。我想为 Microsoft Word 提供 Automator 服务，该服务向我自己发送一封电子邮件，其中当前的 word 文档作为附件，标题作为主题。如果我可以在 Word 中有一个宏来做同样的事情，那也很棒。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:54:11.303

您可以单独将其作为 AppleScript 运行，也可以将 AppleScript 插入您的 Automator 工作流程中。

```
 tell application "Microsoft Word"
    try
        set theTitle to name of front document
    end try
    send mail front document
end tell

tell application "Mail"
    activate
    tell its outgoing message 1
        set subject to theTitle
    end tell
end tell 
```

# jquery - slideUp 和 slideDown 导致 Firefox 12 中的文本跳转？

> ID：11490009
> 
> 赞同：2
> 
> 时间：2012-07-15T06:44:16.633
> 
> 标签：jquery, html, css, slidedown

我有如下代码：

```
$(function(){

    $("#ani").slideUp(600,function(){
         $(this).text('13').slideDown(600);        
    });
}) 
```

和HTML代码如下：

```
<div>Comment: <span id="ani">12</span></div> 
```

页面加载后，幻灯片会影响`Comment:`文本。[我已经在 jsFiddle 中编写了这段代码，你可以在那里观看。](http://jsfiddle.net/uYXMB/2/) 问题是什么。我为外部 div 编写了`display`css`height`属性，但没有成功；（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:08:11.600

像下面这样的东西应该这样做。div 应该有一个标准宽度，内部跨度是`float: right`

```
<div>Comment:
    <span id="ani">12</span>
</div>​ 
```

CSS

```
div{width:100px;}
span{float:right;} 
```

[演示](http://jsfiddle.net/VRvuW/1/)

希望这可以帮助

**编辑**

此更新基于 OP 的回答：

```
<div><span>Comment:</span>
    <span id="ani">12</span>
</div> 
```

**css**

```
span{float:left;display:inline-block;min-height:30px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T07:25:32.793

问题已解决！您可以[在 jsFiddle 中看到输出](http://jsfiddle.net/VRvuW/4/) 谢谢@Dhiraj_Bodicherla，您的帮助解决了问题 +1。我实际上需要将评论浮动到左侧，如下所示：

```
<div><span style="float:left;display:inline-block;min-height:30px;">Comment:</span>
    <span id="ani">12</span>
</div> 
```

jQuery部分：

```
$(function(){

    $("#ani").slideUp(600,function(){
         $(this).text('13').slideDown(600);        
    });
}) 
```

仅这些代码就足够了。

# javascript - 单击链接时如何更改document.title？

> ID：11490011
> 
> 赞同：-3
> 
> 时间：2012-07-15T06:44:27.720
> 
> 标签：javascript, jquery

似乎不可能……也许这里有天才！

# 仅限 jquery

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:45:52.930

不需要 jQuery。我只使用它是因为它更容易绑定事件：

```
$('#your-link').on('click', function(event) {
  event.preventDefault();
  document.title = 'The new title';
}); 
```

另外，出于好奇，您尝试过什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T07:49:50.870

```
$(document).ready(function(){
 $('a').click(function(){
  $('head title').text('HelloWorld'); 
 });
}); 
```

并且可能需要这样的html

```
<a href="#">Click here to change title</a> 
```

# php - 在 codeigniter HMVC 架构中使用自定义身份验证库中的回调函数

> ID：11490012
> 
> 赞同：0
> 
> 时间：2012-07-15T06:44:29.153
> 
> 标签：php, codeigniter, hmvc

我正在使用 codeigniter HMVC 架构开发应用程序。我对 HMVC 很陌生，刚刚开始探索它。最近我开始在codeigniter中将我的代码从MVC转换为HMVC。我开发了一个自定义身份验证库，它位于我的应用程序/库文件夹中，其中包含注册和登录表单的身份验证规则。我在我的验证中编写了一些回调函数，当我选择 HMVC 框架时它们突然停止工作。我遇到了一些解决此问题的参考资料，但都是徒劳的。我无法以某种方式使我的代码正常工作。根据一个常见的建议，我建立了一个 MY_Form_validation 如下：

```
class MY_Form_validation extends CI_Form_validation
{
    public $CI;
} 
```

然后在我的身份验证库中，我正在使用它：

```
 $this->CI = & get_instance();
                $this->CI->load->library('form_validation');
                $this->CI->form_validation->CI = $this->CI; 
```

为了验证我使用这个：

```
if($this->CI->form_validation->run($this->CI)==FALSE) 
```

但不知何故，我的验证检查没有被执行。它曾经在我的 MVC 框架上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:53:41.800

“$this->CI->form_validation->CI = $this->CI;” 为什么要做很多交叉引用？

这就是我拥有扩展表单验证库的方式，并且它正在工作。

```
class MY_Form_validation extends CI_Form_validation {
    public function valid_url($url) {
        $pattern = '/^http(s)?:\/\/[a-z0-9]{1}[0-9a-zA-Z\-]*([\.a-zA-Z])+([a-zA-Z0-9\-\/\?=])*$/';
        if (preg_match($pattern, $url)) {
            return true;
        } else {
            $this->set_message('valid_url', "%s is not a valid url.");
            return false;
        }
    }
} 
```

然后你可以像使用表单验证库一样使用。

# cron - 设置 cronjob 时间

> ID：11490014
> 
> 赞同：0
> 
> 时间：2012-07-15T06:44:41.290
> 
> 标签：cron

我试图制作一个代码来自动从服务器发送邮件。我希望它在每小时 15 分钟和 30 分钟每次运行一个 php。

```
Example at 08:15, 08:30, 09:15, 09:30, etc.. 
```

谢谢你，丹尼尔！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T06:50:19.003

这个怎么样？

```
15-30/15 * * * * * php foo.php 
```

显然，替换`php foo.php`为您要运行的命令。语法指示：分钟 15 到 30，增量为 15。这`15-30/15`将使您的作业在 xx:15 和 xx:30 每小时运行一次。

# php - 我是否需要更改 Codeigniter 中的购物车类中的某些内容以同时使用会话变量和数据库数据？

> ID：11490015
> 
> 赞同：0
> 
> 时间：2012-07-15T06:44:42.557
> 
> 标签：php, codeigniter

默认情况下，Codeigniter 购物车类使用其内置的会话功能。CI 中的 Session 类可以配置为使用 cookie 或数据库，这意味着购物车将使用数据库或**cookie**来存储会话变量。

但是对于我的网站，我想实现这一点：当用户未登录时，购物车使用 cookie 数据；当用户登录时，购物车使用存储在数据库中的数据。这意味着购物车类应该能够在 cookie 和数据库之间切换。

如何在不更改内置购物车类的情况下实现这一目标？如果那不可能，我可能不得不重写需要一些工作的购物车类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T06:54:21.013

有两种可能的方法。

1.  继承您的内置卡片类并覆盖 product_insert、product_update 和 product_delete 方法。这更清洁，并为您提供更好的可定制性。您需要的功能非常简单，您可以使用类似的方法来实现。

    ```
    function product_insert() {   
      checkUserSignedIn();   
      if(true) {
        parent::product_insert();   
      } else {
        doYourthingHere();   
      } 
    } 
    ```

覆盖所有像这样的 crud 方法，你可以实现你想要的。

1.  使用自定义库

[http://codeigniter.com/forums/viewthread/212926/P10/#1006680](http://codeigniter.com/forums/viewthread/212926/P10/#1006680)

它具有您需要的一些功能，但您仍然必须对其进行调整以完全适合您的要求

# webgl - Three.js 使用滑块变量更新立方体比例

> ID：11490017
> 
> 赞同：1
> 
> 时间：2012-07-15T06:44:50.143
> 
> 标签：webgl, three.js, jquery-ui-slider

我在一个 div 中创建了一个带有 jQ​​ueryUI 滑块的 html 页面，在另一个 div 中创建了一个 THREE.CubeGeometry（请参阅[http://codesigntools.com/sample7](http://codesigntools.com/sample7)）。这个想法是使用由滑块控制的全局变量 (slider1val) 来缩放立方体。[我在这里](https://github.com/mrdoob/three.js/wiki/Updates)和[这里](http://aerotwist.com/tutorials/getting-started-with-three-js/)都看过 ，但无济于事。您可以从链接代码中看到我正在尝试在“动画”函数中对多维数据集进行更改。那正确吗？

我对 js 和 Three.js 还很陌生，但我已经使用了很多处理，所以也许我会以错误的方式处理这个问题。有没有我可以查看的类似示例，或者有人可以引导我完成使用全局变量访问和操作多维数据集大小的过程？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T21:49:05.240

回答我自己的问题，希望它会帮助别人：

两条评论都是正确的：

*   我必须全局定义多维数据集，然后从我的 updateGeom() 函数内部对其进行操作
*   Cory Gross 有一个很好的例子（现在是一个死链接）。

有关深入的示例，请在 github 上[查看](https://github.com/fabripod/coDesignTools)

# macos - 如何在 Core Animation 中创建 CIFilter 的图形

> ID：11490018
> 
> 赞同：0
> 
> 时间：2012-07-15T06:45:00.813
> 
> 标签：macos, core-animation, core-image

在 Interface Builder 中，我可以创建一堆内容过滤器。

如果我有 n 个过滤器，则结果计算为： f [n] o f [n-1] o..of [1]。现在我想创建几个堆栈并将它们组合成一个过滤器。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:18:16.863

我以前没有做过一堆过滤器，但我想 IB 会创建一个过滤器的 NSArray。您应该能够创建一个包含不同过滤器堆栈的所有内容的数组，并将其安装为您的视图的过滤器堆栈。

我假设这是 Mac OS，而不是 iOS？（我认为 iOS 还不支持过滤器堆栈。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:18:09.173

解决方案是使用[CIFilterGenerator 类](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CIFilterGenerator_Class/Reference/Reference.html)。

*CIFilterGenerator 类提供了通过将现有 CIFilter 对象链接在一起来创建复杂效果的方法来创建 CIFilter 对象。（过滤器链是指在CIFilterGenerator对象中连接的CIFilter对象。）复杂的效果可以封装为CIFilterGenerator对象并保存为文件，以便再次使用。过滤器生成器文件包含链接在一起的所有 CIFilter 对象的存档实例。*

它可以作为 CIFilter 使用：

*当调用 CIPlugIn 类提供的任何加载方法时，将加载复制到 /Library/Graphics/Image Units/ 的任何过滤器生成器文件。CIFilterGenerator 对象通过其文件名注册，或者如果存在，则通过您在其描述中提供的类属性注册。*

# ruby-on-rails - 使用“has_many :through”进行验证

> ID：11490019
> 
> 赞同：2
> 
> 时间：2012-07-15T06:45:09.363
> 
> 标签：ruby-on-rails, validation, orm, associations

我`validate :my_validate`在我的用户模型中有，但`my_validate`如果“has_may :through”属性被更改，则永远不会被调用。是正确的行为吗？

我的代码：

```
class User < ActiveRecord::Base

  has_many :roles, :through => :user_roles

  validate :my_validate
  def my_validate
    raise 123
  end 
```

这会引发异常：

```
User.find(1).name = 'new_name' 
```

这有效：

```
User.find(1).roles = [] 
```

我知道用户表没有更新，所以 rails 认为验证是不必要的，但它看起来真的很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:55:18.183

```
User.find(1).name = 'new_name' 
```

它抛出异常是因为您想为名称分配一些值并尝试将值保存到用户表中，在验证方法“my_validate”中您会引发一些错误，这意味着如果您想保存任何值，它将引发错误。

```
User.find(1).roles = [] 
```

但是在第二种方法中，您为角色表分配了一些值，而不是在用户表中。明智的是，它不会引发任何错误。

# html - 如何在所有缩放和浏览器中保持相同的网站布局？

> ID：11490029
> 
> 赞同：0
> 
> 时间：2012-07-15T06:46:22.827
> 
> 标签：html, css, layout

我对网页设计非常陌生，我的网站几乎即将上线。[http://cloudchowk.com/future/](http://cloudchowk.com/future) 但我在最后一刻发现了一些严重的问题。当我的网站放大或缩小时，内容会以一定比例的缩放比例错位。在 iPad 和 iPhone 中正常查看时，我的页脚也会向左对齐。如果您需要我的代码，我认为 firebug 和 chrome 检查器会为您提供帮助，因为我不知道具体要在此处插入什么代码。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:30:53.240

您不能对所有可能的浏览器/设备都这样做。

没有编程方式来锁定您的网站，因此没有浏览器能够缩放它。

# android - 引起：java.lang.IllegalArgumentException：provider=network

> ID：11490031
> 
> 赞同：3
> 
> 时间：2012-07-15T06:46:41.937
> 
> 标签：android

试图找到我的设备的当前位置。代码在这里。

```
package com.example.location;

import android.app.Activity;    
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.widget.Toast;

public class LocationActivity extends Activity
{

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  /* Use the LocationManager class to obtain GPS locations */
  LocationManager mlocManager = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);

  LocationListener mlocListener = new MyLocationListener();
  mlocManager.requestLocationUpdates( LocationManager.NETWORK_PROVIDER, 0, 0, mlocListener);
}

/* Class My Location Listener */
public class MyLocationListener implements LocationListener
{

  @Override
  public void onLocationChanged(Location loc)
  {

    loc.getLatitude();
    loc.getLongitude();

    String Text = "My current location is: " +
    "Latitud = " + loc.getLatitude() +
    "Longitud = " + loc.getLongitude();

    Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();
  }

  @Override
  public void onProviderDisabled(String provider)
  {
    Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_SHORT ).show();
  }

  @Override
  public void onProviderEnabled(String provider)
  {
    Toast.makeText( getApplicationContext(), "Gps Enabled", Toast.LENGTH_SHORT).show();
  }

  @Override
  public void onStatusChanged(String provider, int status, Bundle extras)
  {

  }
}
} 
```

和 logcat 是

```
07-15 12:42:49.294: E/AndroidRuntime(3322): FATAL EXCEPTION: main
07-15 12:42:49.294: E/AndroidRuntime(3322): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.location/com.example.location.LocationActivity}: java.lang.IllegalArgumentException: provider=network
07-15 12:42:49.294: E/AndroidRuntime(3322):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at android.os.Looper.loop(Looper.java:137)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at android.app.ActivityThread.main(ActivityThread.java:4424)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at java.lang.reflect.Method.invokeNative(Native Method)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at java.lang.reflect.Method.invoke(Method.java:511)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at dalvik.system.NativeStart.main(Native Method)
07-15 12:42:49.294: E/AndroidRuntime(3322): Caused by: java.lang.IllegalArgumentException: provider=network
07-15 12:42:49.294: E/AndroidRuntime(3322):     at android.os.Parcel.readException(Parcel.java:1331)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at android.os.Parcel.readException(Parcel.java:1281)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at android.location.ILocationManager$Stub$Proxy.requestLocationUpdates(ILocationManager.java:646)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at android.location.LocationManager._requestLocationUpdates(LocationManager.java:589)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at android.location.LocationManager.requestLocationUpdates(LocationManager.java:453)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at com.example.location.LocationActivity.onCreate(LocationActivity.java:26)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at android.app.Activity.performCreate(Activity.java:4465)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-15 12:42:49.294: E/AndroidRuntime(3322):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-15 12:42:49.294: E/AndroidRuntime(3322):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-03T10:17:29.173

我通过检查 LocationManagers NETWORK_PROVIDER 是否启用来解决这个问题

```
if (locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
}
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T06:55:17.097

您是否在真实设备上尝试过相同的代码。我认为它应该在设备上运行，网络提供商会导致模拟器出现问题。

**编辑：-**基于@Felipe 评论，许多设备可能不支持网络提供商。使用以下方法检查提供程序是否实际启用。

```
/*Pass context as well as Provider name, you can get provider name via LocationManager class*/
     public boolean isProviderEnabled(Context ctx, String provider){
        LocationManager manager = (LocationManager) ctx.getSystemService(Context.LOCATION_SERVICE);
        return manager.isProviderEnabled(provider);
    } 
```

# highlighting - StyledDocument 为文件的每一行添加额外的计数到 indexof

> ID：11490033
> 
> 赞同：0
> 
> 时间：2012-07-15T06:46:52.680
> 
> 标签：highlighting, indexof, styleddocument

我有一个奇怪的问题（至少看起来是这样），当在 textPane 中搜索字符串时，我会为使用 StyledDoc 时搜索并返回的每个行号获得一个额外的索引，而不是从 textPane 中获取文本。我从同一个窗格中得到相同的文本，只是一个来自纯文本，另一个来自样式化的文档。我在这里错过了什么吗？我将尝试列出我正在使用的两个版本之间的尽可能多的更改。

纯文本版本：

```
public int displayXMLFile(String path, int target){
    InputStreamReader inputStream;
    FileInputStream fileStream;
    BufferedReader buffReader;

    if(target == 1){

        try{                
            File file = new File(path);
            fileStream = new FileInputStream(file);
            inputStream = new InputStreamReader(fileStream,"UTF-8");
            buffReader = new BufferedReader(inputStream);
            StringBuffer content = new StringBuffer("");
            String line = "";
            while((line = buffReader.readLine())!=null){
                content.append(line+"\n");
            }
            buffReader.close();
            xhw.txtDisplay_1.setText(content.toString());
        }
        catch(Exception e){
            e.printStackTrace();
            return -1;
        }
    }
} 
```

与 Styled Doc 对比（未应用样式）

```
 protected void openFile(String path, StyledDocument sDoc, int target) 
                throws BadLocationException {

    FileInputStream fileStream;
    String file;
    if(target == 1){
        file = "Openning First File";
    } else {
        file = "Openning Second File";
    }

    try {
        fileStream = new FileInputStream(path);

        // Get the object of DataInputStream
        //DataInputStream in = new DataInputStream(fileStream);

        ProgressMonitorInputStream in = new ProgressMonitorInputStream(
                xw.getContentPane(), file, fileStream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine;

        //Read File Line By Line
        while ((strLine = br.readLine()) != null)   {                   
            sDoc.insertString(sDoc.getLength(), strLine + "\n", sDoc.getStyle("regular"));
        xw.updateProgress(target);
        } 

        //Close the input stream
        in.close();
    } catch (Exception e){//Catch exception if any
        System.err.println("Error: " + e.getMessage());
    } 
```

这就是我搜索的方式：

```
 public int searchText(int sPos, int target) throws BadLocationException{

    String search = xhw.textSearch.getText();
    String contents;
    JTextPane searchPane;

    if(target == 1){
        searchPane = xhw.txtDisplay_1;              
    } else {
        searchPane = xhw.txtDisplay_2;
    }

    if(xhw.textSearch.getText().isEmpty()){
        xhw.displayDialog("Nothing to search for");
        highlight(searchPane, null, 0,0);
    } else {

        contents = searchPane.getText();

        // Search for the desired string starting at cursor position
        int newPos = contents.indexOf( search, sPos );

        // cycle cursor to beginning of doc window
        if (newPos == -1 && sPos > 0){
            sPos = 0;
            newPos = contents.indexOf( search, sPos );
        } 

        if ( newPos >= 0 ) {
            // Select occurrence if found

            highlight(searchPane, contents, newPos, target);

            sPos = newPos + search.length()+1;
        } else {
            xhw.displayDialog("\"" + search + "\"" + " was not found in File " + target);
        }
    } 
    return sPos;
} 
```

示例文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<AlternateDepartureRoutes>
  <AlternateDepartureRoute>
    <AdrName>BOIRR</AdrName>
    <AdrRouteAlpha>..BROPH..</AdrRouteAlpha>
    <TransitionFix>
      <FixName>BROPH</FixName>
    </TransitionFix>
  </AlternateDepartureRoute>
  <AlternateDepartureRoute>
</AlternateDepartureRoutes> 
```

还有我的荧光笔：

```
 public void highlight(JTextPane tPane, String text, int position, int target) throws BadLocationException {
    Highlighter highlighter =  new DefaultHighlighter();
    Highlighter.HighlightPainter painter = new DefaultHighlighter.DefaultHighlightPainter(Color.LIGHT_GRAY);
    tPane.setHighlighter(highlighter);

    String searchText = xhw.textSearch.getText();
    String document = tPane.getText();
    int startOfSString = document.indexOf(searchText,position);

    if(startOfSString >= 0){
        int endOfSString = startOfSString + searchText.length();
        highlighter.addHighlight(startOfSString, endOfSString, painter);
        tPane.setCaretPosition(endOfSString);
        int caretPos = tPane.getCaretPosition();
        javax.swing.text.Element root = tPane.getDocument().getDefaultRootElement();
        int lineNum = root.getElementIndex(caretPos) +1;
        if (target == 1){
            xhw.txtLineNum1.setText(Integer.toString(lineNum));
        } else if (target == 2){
            xhw.txtLineNum2.setText(Integer.toString(lineNum));
        } else {
            xhw.txtLineNum1.setText(null);
            xhw.txtLineNum2.setText(null);
        }

    } else {
        highlighter.removeAllHighlights();
    }

} 
```

当我使用 indexof() 搜索 Alt 时，我得到 40 的纯文本（这是它应该返回的）和 41 搜索样式文档时。对于 Alt 出现的每一行，我都会得到额外的索引（以便 indexof() 调用返回 2 比第 3 行中需要的多）。这发生在它找到的每一行。我错过了一些明显的东西吗？（如果我需要将其推送到较小的单个班级以便更容易检查，我可以稍后在我有更多时间时执行此操作）。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:40:22.963

如果您使用的是 Windows，则 TextComponent 文本 (searchPane.getText()) 可以包含回车+换行符 (\r\n)，但 TextComponent 的样式化文档 (sSearchPane.getText(0, sSearchPane.getLength()) ) 仅包含换行符 (\n)。这就是为什么你的 newPos 总是大于 newPosS 的换行数。要解决此问题，您可以在搜索功能中更改：

```
contents = searchPane.getText(); 
```

至：

```
contents = searchPane.getText().replaceAll("\r\n","\n"); 
```

这样，搜索就会使用样式化文档使用的相同索引进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:47:48.510

好的，我找到了解决方案（基本上）。我从以两种不同方式从同一文本组件获取文本的方面来处理这个问题......

```
 String search = xw.textSearch.getText();
    String contents;
    String contentsS;
    JTextPane searchPane;
    StyledDocument sSearchPane;

    searchPane = xw.txtDisplay_left;
    sSearchPane = xw.txtDisplay_left.getStyledDocument();

    contents = searchPane.getText();
    contentsS = sSearchPane.getText(0, sSearchPane.getLength());

    // Search for the desired string starting at cursor position
    int newPos = contents.indexOf( search, sPos );
    int newPosS = contentsS.indexOf(search, sPos); 
```

因此，当比较“newPos”和“newPosS”这两个变量时，newPos 为找到搜索字符串的每一行返回 1 比 newPosS 多。因此，当查看示例文件并搜索“Alt”时，第一个实例位于第 2 行。“newPos”返回 41，“newPosS”返回 40（然后突出显示正确的文本）。下一次出现（在第 2 行中找到） 3）“newPos”返回 71，“newPosS”返回 69。如您所见，每一个新行都会通过出现开始的行号来增加计数。我怀疑每个新行都会添加一个额外的字符来自 StyledDoc 中不存在的 textPane。

我确信有一个合理的解释，但我现在没有。

# php - 是否有更短的方法来指定要运行的类？

> ID：11490035
> 
> 赞同：2
> 
> 时间：2012-07-15T06:47:31.767
> 
> 标签：php, class

通常，我必须这样做：

```
$str = "classname"; //classname is the name of a class

switch($str)
{
  case "class1":
    class1::run(); break;
  case "class2":
    class2::run(); break;
  case "class3":
    class3::run(); break;
  case "class4":
    class4::run(); break;
  case "classname":
    classname::run(); break;
  default:
    die("Fatal error: no such class");
}
//in my case, there are hundreds of cases and more being added 
```

有没有办法简化这一点，也许是一行？妄想？

```
$str::run() 
```

当然，我有责任确保 $str 实际上是一个对象的名称。但是管理它比管理像上面这样的庞大列表要容易得多。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:50:08.613

是的; 如您所料，`$str::run();`有效。

```
php> class A { public static function run() { echo "A!"; } }

php> class B { public static function run() { echo "B!"; } }

php> $n = "A";

php> $n::run();
A!
php> $n = "B";

php> $n::run();
B! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T06:53:50.323

您可以执行以下操作：

```
if (class_exists($str) && method_exists($str,'run')){
  {$tr}::run();
} 
```

# perl - grep -f 的快速替代方案

> ID：11490036
> 
> 赞同：10
> 
> 时间：2012-07-15T06:48:00.470
> 
> 标签：perl, awk

file.contain.query.txt

```
ENST001

ENST002

ENST003 
```

file.to.search.in.txt

```
ENST001  90

ENST002  80

ENST004  50 
```

因为 ENST003 在第二个文件中没有条目，而 ENST004 在第一个文件中没有条目，所以预期的输出是：

```
ENST001 90

ENST002 80 
```

要在特定文件中 grep 多查询，我们通常执行以下操作：

```
grep -f file.contain.query <file.to.search.in >output.file 
```

因为我在 file.to.search.in 中有 10000 个查询和近 100000 个原始查询，所以需要很长时间才能完成（比如 5 小时）。是否有快速替代 grep -f 的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T07:12:15.607

如果您想要一个纯 Perl 选项，请将您的查询文件键读入哈希表，然后根据这些键检查标准输入：

```
#!/usr/bin/env perl
use strict;
use warnings;

# build hash table of keys
my $keyring;
open KEYS, "< file.contain.query.txt";
while (<KEYS>) {
    chomp $_;
    $keyring->{$_} = 1;
}
close KEYS;

# look up key from each line of standard input
while (<STDIN>) {
    chomp $_;
    my ($key, $value) = split("\t", $_); # assuming search file is tab-delimited; replace delimiter as needed
    if (defined $keyring->{$key}) { print "$_\n"; }
} 
```

你会像这样使用它：

```
lookup.pl < file.to.search.txt 
```

哈希表可能会占用大量内存，但搜索要快得多（哈希表查找是在恒定时间内进行的），这很方便，因为要查找的键比要存储的键多 10 倍。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-15T08:17:50.887

如果您有固定字符串，请使用`grep -F -f`. 这比正则表达式搜索要快得多。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-15T07:07:13.083

这个 Perl 代码可以帮助你：

```
use strict;
open my $file1, "<", "file.contain.query.txt" or die $!;
open my $file2, "<", "file.to.search.in.txt" or die $!;

my %KEYS = ();
# Hash %KEYS marks the filtered keys by "file.contain.query.txt" file

while(my $line=<$file1>) {
    chomp $line;
    $KEYS{$line} = 1;
}

while(my $line=<$file2>) {
    if( $line =~ /(\w+)\s+(\d+)/ ) {
        print "$1 $2\n" if $KEYS{$1};
    }
}

close $file1;
close $file2; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-15T11:01:57.233

如果文件已经排序：

```
join file1 file2 
```

如果不：

```
join <(sort file1) <(sort file2) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-15T15:13:27.437

如果您使用 perl 5.10 或更高版本，您可以将“查询”项加入正则表达式，查询项由“管道”分隔。（如`ENST001|ENST002|ENST003`：） Perl 构建了一个“trie”，就像一个哈希一样，在恒定时间内进行查找。它应该与使用查找哈希的解决方案一样快。只是为了展示另一种方法来做到这一点。

```
#!/usr/bin/perl
use strict;
use warnings;
use Inline::Files;

my $query = join "|", map {chomp; $_} <QUERY>;

while (<RAW>) {
    print if /^(?:$query)\s/;
}

__QUERY__
ENST001
ENST002
ENST003
__RAW__
ENST001  90
ENST002  80
ENST004  50 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-15T07:18:12.043

mysql：

将数据导入 Mysql 或类似软件将提供巨大的改进。这可行吗？您可以在几秒钟内看到结果。

```
mysql -e 'select search.* from search join contains using (keyword)' > outfile.txt 

# but first you need to create the tables like this (only once off)

create table contains (
   keyword   varchar(255)
   , primary key (keyword)
);

create table search (
   keyword varchar(255)
   ,num bigint
   ,key (keyword)
);

# and load the data in:

load data infile 'file.contain.query.txt' 
    into table contains fields terminated by "add column separator here";
load data infile 'file.to.search.in.txt' 
    into table search fields terminated by "add column separator here"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-15T07:26:56.863

```
use strict;
use warings;

system("sort file.contain.query.txt > qsorted.txt");
system("sort file.to.search.in.txt  > dsorted.txt");

open (QFILE, "<qsorted.txt") or die();
open (DFILE, "<dsorted.txt") or die();

while (my $qline = <QFILE>) {
  my ($queryid) = ($qline =~ /ENST(\d+)/); 
  while (my $dline = <DFILE>) {
    my ($dataid) = ($dline =~ /ENST(\d+)/);
    if ($dataid == $queryid)   { print $qline; }
    elsif ($dataid > $queryid) { break; } 
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-14T14:49:07.993

这可能有点过时，但它是为简单的 UNIX 实用程序量身定制的。鉴于：

*   键是固定长度的（这里是 7 个字符）
*   文件已排序（在示例中为 true），允许使用快速合并排序

然后：

```
$ sort -m file.contain.query.txt file.to.search.in.txt | tac | uniq -d -w7

ENST002  80

ENST001  90 
```

变体：

要去除键后打印的数字，请删除 tac 命令：

```
$ sort -m file.contain.query.txt file.to.search.in.txt | uniq -d -w7 
```

要保持排序顺序，请在末尾添加一个额外的 tac 命令：

```
$ sort -m file.contain.query.txt file.to.search.in.txt | tac | uniq -d -w7 | tac 
```

# c++ - 浮点处理器的非确定性？

> ID：11490038
> 
> 赞同：5
> 
> 时间：2012-07-15T06:48:20.533
> 
> 标签：c++, python, floating-point

在不涉及不必要的细节的情况下，浮点数 (x86_64) 上的操作是否有可能基于相同的输入返回结果的微小变化？甚至一点点不同？

我正在模拟一个基本混乱的系统，我希望数据的微小变化会产生明显的影响。但是我希望，使用相同的数据，程序的行为将是固定的。不是这种情况。每次运行程序时，我都会看到明显但可以接受的差异。

我在想我在某处留下了一些未初始化的变量......

我使用的语言是 C++ 和 Python。

## 回答

罗素的回答是正确的。浮点运算是确定性的。非确定性是由悬空指针引起的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T07:04:52.843

是的，这是可能的。引用[C++ 常见问题解答](http://www.parashift.com/c++-faq/floating-point-arith2.html)：

> 事实证明，在某些安装中，即使 x == y，cos(x) != cos(y) 也是如此。那不是错字。如果您不感到震惊，请再读一遍：某事物的余弦可能不等于同一事物的余弦。（或正弦，或正切，或对数，或任何其他浮点计算。）

为什么？

> [F] 浮点计算和比较通常由通常包含特殊寄存器的特殊硬件执行，并且这些寄存器的位数通常多于双精度数。这意味着中间浮点计算通常具有比 sizeof(double) 更多的位，并且当浮点值写入 RAM 时，它通常会被截断，通常会丢失一些位精度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T08:03:32.527

康特拉托马斯的回答，浮点运算不是非确定性的。它们非常微妙，但是给定的程序应该为相同的输入提供相同的输出，如果它不使用未初始化的内存或故意随机化的数据。

我的第一个问题是，您所说的“相同数据”是什么意思？这些数据是如何进入你的程序的？

# django - 在 Django 中使用用户配置文件检索用户的最有效方法

> ID：11490039
> 
> 赞同：5
> 
> 时间：2012-07-15T06:48:26.887
> 
> 标签：django, performance, user-profile, django-select-related

在 Django 中，在推荐的设置中，UserProfile 实例通过 OneToOneField 与其 User 实例链接。

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    data = ... 
```

在视图中检索用户和个人资料的最有效方法是什么？我可以执行 select_related() 内部联接查询，以通过一次数据库命中来获取两个对象吗？还是总是归结为两个单独的电话？可能，Django 的身份验证中间件甚至在调用视图之前检索用户实例......有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:24:09.890

可以使用 检索用户配置文件`get_profile()`。

请参阅文档：[https ://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)

# php - 什么版本的 PHP 开始支持以下语法？

> ID：11490045
> 
> 赞同：0
> 
> 时间：2012-07-15T06:49:35.740
> 
> 标签：php

在我的服务器（Centos5）上，我有 PHP 5.2，我无法更新它，我在某处读到 PHP 5.4 无法在 Centos5 上运行，因为我处于很多项目的中间，所以没有进行足够的检查，无论如何，这里是语法：

```
$data['trees'] = (new Tree())->where('parent_id',0)->get(); 
```

在我的 WAMP 上它在 PHP 5.4.3 上运行，在服务器上它给了我以下错误：

> 解析错误：语法错误，意外的 T_OBJECT_OPERATOR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:50:33.263

支持[在 PHP 5.4 中引入](http://docs.php.net/manual/en/migration54.new-features.php)`new`表达式后直接访问实例成员（最终）。请注意，表达式周围需要括号，就像在您给定的代码行中一样，否则它将不起作用。`new`

我没有听说过任何特定的服务器配置或平台在运行 PHP 5.4 时不起作用。如果它在安装 PHP 5.4 的服务器上导致错误，很可能不是解释您的脚本的版本（检查您的服务器配置、.htaccess 和 INI 指令）。

# mysql - 选择对系列进行更改的记录（MySQL/rails）

> ID：11490053
> 
> 赞同：0
> 
> 时间：2012-07-15T06:50:33.760
> 
> 标签：mysql, ruby-on-rails, select

我有一个记录一系列值的表，所以......

```
ID.   VAL
1\.    18
2\.    18
3\.    20
4\.    20
5\.    18 
```

我正在尝试弄清楚如何选择系列更改的记录（例如记录 1、3 和 5）。我正在使用 rails，但我猜原始 MySQL 可能是前进的方向。

将不胜感激您可以提供的任何帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T06:56:27.430

假设您的表格如下所示：

```
CREATE TABLE records (
  id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  val INT UNSIGNED NOT NULL
); 
```

你想要做的是自我加入它自己，像这样：

```
SELECT 
  records2.id
FROM 
  records AS records1
  JOIN records AS records2 ON (records1.id = records2.id-1)
WHERE
  records1.val != records2.val 
```

这样我们就可以将记录与前面的记录连接起来。如果两条记录的值不同 - 我们有答案。

# javascript - 淘汰赛.js - 如何设置一个可见性 在填充有 data-bind='options: [...]' 的选择中

> ID：11490058
> 
> 赞同：0
> 
> 时间：2012-07-15T06:51:34.620
> 
> 标签：javascript, knockout.js

我有这样的情况：

```
<select data-bind='options: [...], optionsText: "foo", optionsValue: "bar"'></select> 
```

这是按预期填充我的选择。是否还可以根据某些条件设置生成选项的可见性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:47:17.500

我建议在您的视图模型上添加一个计算函数，该函数返回所需的集合，并使用 Underscore.js 的过滤器函数（或根据您的逻辑要求构建）进行过滤。然后绑定到该函数作为绑定上的选项参数。

# c++ - 有人可以向我解释我的代码的哪一部分导致 *** glibc 检测到 *** ./a2: free(): invalid next size (fast)

> ID：11490061
> 
> 赞同：0
> 
> 时间：2012-07-15T06:52:27.660
> 
> 标签：c++

我一直在尝试解决这个问题一段时间，并决定是时候从外部角度看待问题了。我已经尽可能多地用谷歌搜索，从我读到的类似问题中，这（我认为）与我分配的内存少于所需的内存有关。我已经多次检查我的代码，但找不到我的错误在哪里。

我的教授编写了一个打印函数，并且仅在调用该函数时才会出现问题，因此我将搜索范围缩小到我编写的这个函数。

```
IntStore& IntStore::operator=(const IntStore& rhs)
{
   if(this != &rhs)
   {
      int* newData = new int[rhs.capacity];
      int* newFreq = new int[rhs.capacity];
      for(int i=0; i < rhs.used; i++)
      {
        newData[i] = rhs.data[i];
        newFreq[i] = rhs.freq[i];
      }
      delete [] data;
      delete [] freq;
      data = newData; 
      freq = newFreq;
      capacity = rhs.capacity;
      used = rhs.used;
   }
   return *this;      
} 
```

他的打印功能如下：

```
void print_to_cout(IntStore src)
{
   // NOTE:
   // - first for-loop below looks silly but is purposely added
   // - don't try to remove/disable when doing the assignment
   // - Why is it added?
   for (int i = 1; i < 2; ++i)
   {
      src = src;
      IntStore copy1;
      copy1 = src;
   }

   int countDist = src.countDistinct();
   for (int i = 1; i <= countDist; ++i)
      cout << setw(5) << src.valAt(i);
   cout << endl;
   cout << "        (freq)";
   for (int i = 1; i <= countDist; ++i)
      cout << setw(5) << src.freqAt(i);
   cout << endl;
} 
```

当我运行程序时，这是我得到的：

```
*** glibc detected *** ./a2: free(): invalid next size (fast): 0x0000000005714010 *** 
```

任何帮助表示赞赏并提前感谢。

我包括构造函数以显示代码的更具体部分以帮助解决我的问题。至于打印功能。我不知道为什么它是这样写的。主 cpp 文件中的所有内容均由教授创建，不可编辑。我们所做的唯一编辑是对 Instore.cpp 文件。标题也是预制的。

```
#include "IntStore.h"
#include <iostream>
#include <cstdlib>
#include <cassert>
using namespace std;

void IntStore::resize(int new_capacity)
{
   if(new_capacity < used)
     new_capacity = used;
   if(new_capacity < 1)
     new_capacity = 1;
   capacity = new_capacity;
   int* newData = new int[capacity];
   int* newFreq = new int[capacity];
   for(int i=0; i < used; i++)
   {
       newData[i] = data[i];
       newFreq[i] = freq[i];
   }
   delete [] data;
   delete [] freq;
   data = newData;
   freq = newFreq;
}

IntStore::IntStore(int init_capacity) : capacity(init_capacity), used(0)
{
   if(capacity < 1)
     capacity = DEFAULT_CAPACITY;
   data = new int(capacity);
   freq = new int(capacity);
}

IntStore::IntStore(const IntStore& src) : capacity(src.capacity),
                                                  used(src.used)
{
   data = new int(capacity);
   freq = new int(capacity);
   for(int i = 0; i < used; i++)
   {
     data[i] = src.data[i];
     freq[i] = src.freq[i];
   }
}

IntStore::~IntStore()
{
   delete [] data;
   delete [] freq;
} 
```

这是打印功能的情况：

```
 case 'p': case 'P':
     objectNum = get_object_num();
     switch (objectNum)
     {
     case 1:
        if ( is1.empty() )
           cout << "   is1: (empty)" << endl;
        else
        {
           cout << "   is1: (data)";
           print_to_cout(is1);
        }
        break;
     case 2:
        if ( is2.empty() )
           cout << "   is2: (empty)" << endl;
        else
        {
           cout << "   is2: (data)";
           print_to_cout(is2);
        }
        break;
     case 3:
        if ( is3.empty() )
           cout << "   is3: (empty)" << endl;
        else
        {
           cout << "   is3: (data)";
           print_to_cout(is3);
        }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T08:36:50.580

在您的复制构造函数中`new int(capacity)`，您应该拥有`new int[capacity]`. 这些根本不是一回事。

您可能会考虑为您的赋值运算符使用复制和交换习语——您所拥有的大部分是正确的，但相当可怕，并且可能更短更简单。

# c# - 如何在 GridView 中修改此复选框？

> ID：11490062
> 
> 赞同：0
> 
> 时间：2012-07-15T06:52:31.433
> 
> 标签：c#, asp.net, checkbox

我有以下数据库设计：

```
Employee Table: Username, Name, JobTitle, BadgeNo, IsActive, DivisionCode
Divisions Table: SapCode, DivisionShortcut 
```

我有一个 GridView，我用它来添加、删除和更新/编辑员工信息。此信息是员工用户名、姓名、徽章编号、职位名称、IsActive 和部门快捷方式。***IsActive 是一个标志，它指示员工是否有空或在分配***中。我将其设置为复选框，该列应显示两个值；活跃和不活跃。在编辑模式下，将显示复选框。如果选中，则表示该员工可用，否则表示不活动。

我编写了代码，一切正常，但现在我面临两个问题，我不知道如何让它们与我的代码一起工作。

1.  GridView 显示 True 或 False 而不是 Active 和 Inactive，我不知道为什么。
2.  在编辑模式下，复选框将被显示，并且值（活动或非活动）将显示在旁边，不应显示。我只想显示复选框。

**那么如何修改它们呢？**

![在此处输入图像描述](../Images/13926a4953619035b0a570f410aa2d44.png)

ASP.NET 代码：

```
<%-- GridView for User Management Subsystem --%>
        <asp:GridView ID="GridView1" runat="server" AllowSorting="True" 
            AutoGenerateColumns="False" DataKeyNames="Username" 
            DataSourceID="SqlDataSource1" BorderWidth="1px" BackColor="#DEBA84" 
             CellPadding="3" CellSpacing="2" BorderStyle="None" 
             BorderColor="#DEBA84">
            <FooterStyle ForeColor="#8C4510" 
              BackColor="#F7DFB5"></FooterStyle>
            <PagerStyle ForeColor="#8C4510" 
              HorizontalAlign="Center"></PagerStyle>
            <HeaderStyle ForeColor="White" Font-Bold="True" 
              BackColor="#A55129"></HeaderStyle>
            <Columns>
                <asp:CommandField ButtonType="Image" ShowEditButton="true" ShowCancelButton="true"
                                EditImageUrl="Images/icons/edit24.png" UpdateImageUrl="Images/icons/update24.png" 
                                CancelImageUrl="Images/icons/cancel324.png" />

                <asp:TemplateField HeaderText="Division">
                    <ItemTemplate>
                        <%# Eval("DivisionShortcut")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:DropDownList ID="DivisionsList" runat="server" DataSourceID="DivisionsListDataSource"
                                          DataTextField="DivisionShortcut" DataValueField="SapCode"
                                          SelectedValue='<%# Bind("DivisionCode")%>'>
                        </asp:DropDownList>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:BoundField DataField="Username" HeaderText="Network ID" ReadOnly="True" 
                    SortExpression="Username" />

                <asp:TemplateField HeaderText="Name">
                    <ItemTemplate>
                        <%# Eval("Name")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtEmployeeName" runat="server" Text='<%# Bind("Name")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Job Title">
                    <ItemTemplate>
                        <%# Eval("JobTitle")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtJobTitle" runat="server" Text='<%# Bind("JobTitle")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Badge No.">
                    <ItemTemplate>
                        <%# Eval("BadgeNo")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtBadgeNo" runat="server" Text='<%# Bind("BadgeNo")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Is Active?">
                    <ItemTemplate>
                        <%# Eval("IsActive")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:CheckBox ID="isActive" runat="server" 
                                      AutoPostBack="true" OnCheckedChanged="isActive_OnCheckedChanged"
                                      Checked='<%# Convert.ToBoolean(Eval("IsActive")) %>'
                                      Text='<%# Eval("IsActive").ToString().Equals("True") ? " Active " : " Inactive " %>'/>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Delete?">
                    <ItemTemplate>
                        <span onclick="return confirm('Are you sure to Delete the record?')">
                            <asp:ImageButton ID="lnkB" runat="server" ImageUrl="Images/icons/delete24.png" CommandName="Delete" />
                        </span>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

代码隐藏：

```
//for updating the (IsActive) column using checkbox inside the GridView
    protected void isActive_OnCheckedChanged(object sender, EventArgs e)
    {
        CheckBox chkStatus = (CheckBox)sender;
        GridViewRow gvrow = (GridViewRow)chkStatus.NamingContainer;

        //Get the ID which is the NetworkID of the employee
        string username = gvrow.Cells[2].Text;
        bool status = chkStatus.Checked;

        string connString = ConfigurationManager.ConnectionStrings["UsersInfoDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);

        string updateIsActive = "UPDATE Employee SET IsActive = @IsActive WHERE Username = @Username";

        SqlCommand cmd = new SqlCommand(updateIsActive, conn);

        cmd.Parameters.AddWithValue("@IsActive", status);
        cmd.Parameters.AddWithValue("@Username", username);

        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
        }
        catch (SqlException se)
        {
            throw se;
        }
        finally
        {
            cmd.Dispose();
            conn.Close();
            conn.Dispose();
        }
    } 
```

**更新：**

我更新我的代码如下： ASP.NET 代码：

```
<asp:GridView ID="GridView1" runat="server" AllowSorting="True" 
            AutoGenerateColumns="False" DataKeyNames="Username" 
            DataSourceID="SqlDataSource1" OnRowDataBound="GridView1_RowDataBound" BorderWidth="1px" BackColor="#DEBA84" 
             CellPadding="3" CellSpacing="2" BorderStyle="None" 
             BorderColor="#DEBA84">
            <FooterStyle ForeColor="#8C4510" 
              BackColor="#F7DFB5"></FooterStyle>
            <PagerStyle ForeColor="#8C4510" 
              HorizontalAlign="Center"></PagerStyle>
            <HeaderStyle ForeColor="White" Font-Bold="True" 
              BackColor="#A55129"></HeaderStyle>
            <Columns>
                <asp:CommandField ButtonType="Image" ShowEditButton="true" ShowCancelButton="true"
                                EditImageUrl="Images/icons/edit24.png" UpdateImageUrl="Images/icons/update24.png" 
                                CancelImageUrl="Images/icons/cancel324.png" />

                <asp:TemplateField HeaderText="Division">
                    <ItemTemplate>
                        <%# Eval("DivisionShortcut")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:DropDownList ID="DivisionsList" runat="server" DataSourceID="DivisionsListDataSource"
                                          DataTextField="DivisionShortcut" DataValueField="SapCode"
                                          SelectedValue='<%# Bind("DivisionCode")%>'>
                        </asp:DropDownList>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:BoundField DataField="Username" HeaderText="Network ID" ReadOnly="True" 
                    SortExpression="Username" />

                <asp:TemplateField HeaderText="Name">
                    <ItemTemplate>
                        <%# Eval("Name")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtEmployeeName" runat="server" Text='<%# Bind("Name")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Job Title">
                    <ItemTemplate>
                        <%# Eval("JobTitle")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtJobTitle" runat="server" Text='<%# Bind("JobTitle")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Badge No.">
                    <ItemTemplate>
                        <%# Eval("BadgeNo")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtBadgeNo" runat="server" Text='<%# Bind("BadgeNo")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Is Active?">
                    <ItemTemplate>
                        <asp:Label ID="lblIsActive" runat="server" Text='<%# Eval("IsActive")%>'></asp:Label>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:CheckBox ID="isActive" runat="server" 
                                      AutoPostBack="true" OnCheckedChanged="isActive_OnCheckedChanged"
                                      Checked='<%# Convert.ToBoolean(Eval("IsActive")) %>'
                                      Text='<%# Eval("IsActive")%>'/>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Delete?">
                    <ItemTemplate>
                        <span onclick="return confirm('Are you sure to Delete the record?')">
                            <asp:ImageButton ID="lnkB" runat="server" ImageUrl="Images/icons/delete24.png" CommandName="Delete" />
                        </span>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

代码隐藏：

```
//For showing Active or Inactive in the IsActive column instead of True or False
    protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            //Here we will select the IsActive column and modify its text
            Label isActive = new Label();
            isActive = (Label)e.Row.FindControl("lblIsActive");
            //Now, after getting the reference, we can set its text
            isActive.Text = "Active or Inactive";

            // First check Checkedbox is check or not, if not make it grey
            //if (e.Row.Cells[6].Text == "False")
            //    GridView1.BackColor = Color.Gray;

        }
    } 
```

我收到以下错误，我不知道为什么： ![在此处输入图像描述](../Images/dd9f731007b175523dd9cd25d4ecb98c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:05:38.410

**对于问题号： 1** 您必须在网格视图中添加一个 Row_DataBound 事件，在该事件中选择 IsActive 列并将其文本替换为 Active 和 InActive。但在编写后面的代码之前，对您的 aspx 代码进行一些更改：在您的项目模板中，而不是直接绑定，放置一个标签控件并像我在下面的代码中那样绑定它：

```
<asp:TemplateField HeaderText="Is Active?">
                <ItemTemplate>
                      <asp:Label ID="lblIsActive" runat="server" Text='<%# Eval("IsActive") %>' ></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:CheckBox ID="isActive" runat="server" 
                                  AutoPostBack="true" OnCheckedChanged="isActive_OnCheckedChanged"
                                  Checked='<%# Convert.ToBoolean(Eval("IsActive")) %>'
                                  Text='<%# Eval("IsActive").ToString().Equals("True") ? " Active " : " Inactive " %>'/>
                </EditItemTemplate>
            </asp:TemplateField>

protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)

{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        // here you will select the IsActive column and modify it's text
        Label isActive=new Label();
        isActive = (Label) e.row.FindControl("lblIsActive");
        // after getting the reference set its text
        isActive.Text="Active or InActive";            

    }
} 
```

对于问题 2：从这里删除条件

```
Eval("IsActive").ToString().Equals("True") ? " Active " : " Inactive " %>' 
```

并将其替换为

```
 Eval("IsActive") 
```

现在将显示复选框。

**更新答案：** `You are receiving an object reference not found error, Please debug your site and check it why you are unable to get the exact reference. I saw you code and it looks that your code is fine.` 为了证明我的代码有效，我创建了一个带有单列的 gridview

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" OnRowDataBound="GridView1_RowDataBound">
        <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                     <asp:Label ID="Label1" runat="server" Text='<%# Bind("name") %>'></asp:Label>
                </ItemTemplate>                   
            </asp:TemplateField>
        </Columns>            
    </asp:GridView>
    // and bind this grid view in the Page_Load of my Page
    protected void Page_Load(object sender, EventArgs e)
    { 
    DataTable dt = new DataTable();
    dt.Columns.Add("name");

    DataRow row = dt.NewRow();
    row[0] = "Waqar Janjua";
    dt.Rows.Add(row);

    GridView1.DataSource = dt;
    GridView1.DataBind();
    }

    // When I view this page in the browser it shows "Waqar Janjua"
    // Now to update the columns text, I add the following code and it works.
    protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
      if (e.Row.RowState != DataControlRowState.Edit)
      {
      if (e.Row.RowType == DataControlRowType.DataRow)
      {
        Label l = new Label();
        l = (Label)e.Row.FindControl("Label1");
        l.Text = "waqar";           
       }
      }
    }

   // When I run this page now, it shows me "Waqar" not "Waqar Janjua" The code works for me. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T07:06:59.297

1.  它返回“true”或“false”，因为它期望来自 IsActive 的布尔数据类型。如果您想更改输出，我怀疑您需要根据网格的 ItemDataBound 事件有条件地修改它。

# c++ - c++ 异构类型数组

> ID：11490071
> 
> 赞同：1
> 
> 时间：2012-07-15T06:55:11.283
> 
> 标签：c++, metaprogramming, boost-mpl

我需要在 C++ 中构建一个异构类型的数组。数组是在编译时构建的，但是它的构建分散在不同的编译单元（即不同的源文件）中。随着应用程序的编程进展，该数组应该很容易扩展以包含新类型。应在运行时访问生成的数组。

那可能吗？

我对 boost mpl 和 boost fusion 进行了一些研究，但没有找到答案。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T07:46:48.360

> 数组是在编译时构建的，但是它的构建分散在不同的编译单元中

这是不可能的。一个翻译单元不知道其他翻译单元。由于除了 TU 之外什么都没有，因此不可能协调任何事情。

假设您要在 中填充数组`foo.cpp`，添加一个类型为 的对象`Foo`。应该放在哪个索引？无法确定，因为不知道还有哪些其他索引。

链接器知道所有的 TU。唉，链接器仍然相当愚蠢，无法在链接时运行用户代码。如果链接器更聪明一点，它可以`myarray.push_back(Foo())`为你的 TU 做一些事情。但它不能。

当然，您仍然可以`push_back`在运行时执行。

也许如果您描述您的*真正*问题，集体将能够找到解决方案。

# java - @Autowired bean 在控制器上与 @Valid 一起使用，但在 CRUD 存储库中失败

> ID：11490075
> 
> 赞同：8
> 
> 时间：2012-07-15T06:55:23.530
> 
> 标签：java, spring, spring-mvc

我正在开发带有用户注册表单的 Spring MVC + Hibernate + JPA 应用程序，我决定使用 JSR-303 验证器来检查数据库中是否已经存在用户名：

```
public class UniqueUsernameValidator implements ConstraintValidator<VerifyUniqueUsername, String> {

    @Autowired
    UserService userService;

    @Override
    public void initialize(VerifyUniqueUsername constraintAnnotation) {     
    }

    @Override
    public boolean isValid(String username, ConstraintValidatorContext context) {                       

        return  username!=null &&  userService.findByUsername(username) == null;        
    }
} 
```

这非常简单，并且验证在我的控制器上效果很好：

```
....
    public String signup(@Valid @ModelAttribute("newUser") User user, BindingResult newUserBeanResult)
..... 
```

我目前面临的问题是，在我`User`验证了我的对象并调用之后：

```
userService.save(user); 
```

哪个实现`CrudRepository`，我得到一个`NullPointerException`。由于某种原因`UserService`，在控制器上的验证过程中被注入，但**在**我调用`CrudRepository.save()`.

我看到了类似的帖子，例如： [@Autowired bean null in ConstraintValidator when called by Sessionfactory.getCurrentSession.merge](https://stackoverflow.com/questions/8413492/autowired-bean-null-in-constraintvalidator-when-invoked-by-sessionfactory-getcu) 和 this: [hibernate validator without using autowire](https://stackoverflow.com/questions/7428909/hibernate-validator-without-using-autowire) 但我想知道是否有人以前遇到过这个问题。我认为注入 bean 以访问验证器上的数据库是相当普遍的。

作为一种解决方法，我添加了对 null 的检查，`userService`但感觉不对。

1.  这是预期的行为吗？这些验证是否应该在调用之前触发`CrudRepository.save()`？
2.  我应该处理“手动”休眠事件吗？在这种情况下`pre-insert`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:53:01.717

我最终通过指示 Spring`EntityManagerFactoryBean`使用我的验证器 bean 解决了这个问题（更准确地说，hibernate 现在将使用 Spring 的验证器）：

```
<bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
        </property>        
        <property name="packagesToScan" value="some.packages"/>
        <property name="jpaPropertyMap">
            <map>
                <entry key="javax.persistence.validation.factory" value-ref="validator"  />           
            </map>
        </property>
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.max_fetch_depth">3</prop>
                <prop key="hibernate.jdbc.fetch_size">50</prop>
                <prop key="hibernate.jdbc.batch_size">10</prop>
                <prop key="hibernate.show_sql">true</prop>              
            </props>        
        </property>
    </bean> 
```

但是，这引发了 StackOverflow 错误:)

显然，这个问题的原因是我的验证器使用了 finder 方法 ( `findByUsername`)，而 finder 方法触发了休眠刷新，进而触发了验证。这会无限循环，直到你得到最著名的异常。

所以...我通过将验证器更改为直接使用 EntityManager（而不是 CRUD 存储库）并临时将 FlushModeType 更改为 COMMIT 来解决此问题。这是示例：

```
public class UniqueUsernameValidator implements ConstraintValidator<UniqueUsername, String> {

    @PersistenceContext
    private EntityManager em;

    @Autowired
    UserService userService;

    @Override
    public void initialize(UniqueUsername constraintAnnotation) {       
    }

    @Override
    public boolean isValid(String username, ConstraintValidatorContext context) {
        try { 
            em.setFlushMode(FlushModeType.COMMIT);          
            return userService.findByUsername(username) == null;

            } finally { 
           em.setFlushMode(FlushModeType.AUTO);
           }    
    }
} 
```

这解决了验证器使用 finder 函数触发休眠刷新的问题，这反过来又触发了验证器导致 StackOverflowError。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T17:14:00.823

当验证逻辑被调用以响应保存方法时，它由休眠完成。验证器对象是由 hibernate 创建的，因此 spring @AutoWired 将不起作用。

解决此问题的一种选择是使用 @Configurable 注释并启用加载时间编织，以确保即使当 hibernate 实例化验证器对象时，spring 也可以将依赖项注入其中。

# ios - iOS：如何加载较大文件的一部分进行上传？

> ID：11490078
> 
> 赞同：1
> 
> 时间：2012-07-15T06:56:22.090
> 
> 标签：ios, ios5, nsstream, alasset

我正在使用 ALAsset 的大型实例，并且正在尝试将资产拆分为较小的块以进行上传。

将大文件拆分成更小的块而不将整个文件加载到内存中的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:47:11.847

我在文本编辑器中做了这个，但它应该编译。NSFileHandle 是 UNIX 文件实用程序的一个瘦包装器。

```
 #define CHUNK_SIZE 2048

        NSFileHandle *fh = [NSFIleHandle fileHandleForReadingAtPath:<the file path as a 

string>];

    while(YES) {
        NDSata *chunk = [fh readDataOfLength:CHUNK_SIZE];

        NSUInteger length = [chunk length];
        if(length == 0) break; // done

        // send the data
    }
    fh = nil; // under arc this releases the object 
```

# c# - 在另一个测试中使用一种方法

> ID：11490079
> 
> 赞同：1
> 
> 时间：2012-07-15T06:56:23.670
> 
> 标签：c#, selenium, nunit

这看起来很简单，但由于某种原因，我没有让它工作。

我将 Selenium 与 Nunit 一起使用。

我有一个名为“Registration_Test”的类，其中我有一个名为“completeRegistrationForm()”的方法，它按照描述进行。

我希望这种方法可供我调用许多不同的测试。

这是我第二次测试的结果。

```
Registration_Test reg = new Registration_Test();
reg.completeRegistrationForm(); 
```

这编译得很愉快，但是当我在 Nunit 中运行它时，我得到以下信息：

```
SeleniumTests.Check_Links.Check_linksTest:
System.NullReferenceException : Object reference not set to an instance of an object. 
```

它表示 reg.completeRegistrationForm(); 线是罪魁祸首。

感谢您提供的任何帮助。

这是我的两个测试：

注册-test.cs

```
namespace SeleniumTests
{
[TestFixture]
public class Registration_Test
{
    private ISelenium selenium;
    private StringBuilder verificationErrors;

    [SetUp]
    public void SetupTest()
    {
        selenium = new DefaultSelenium("localhost", 4444, "*iexplore", "http://custom-creative-404-dropbox:8080/");
        selenium.Start();
        verificationErrors = new StringBuilder();
    }

    [TearDown]
    public void TeardownTest()
    {
        try
        {
            selenium.Stop();
        }
        catch (Exception)
        {
            // Ignore errors if unable to close the browser
            Console.Write("Unable to Stop Selenium and/or close the browser");
        }
        Assert.AreEqual("", verificationErrors.ToString());
    }

    [Test]
    public void Registration()
    {

        completeRegistrationForm();

        //back to home page.
        selenium.Click("link=Home");
        selenium.WaitForPageToLoad("30000");
    }

    public void completeRegistrationForm()
    {
        selenium.Open("/");
        selenium.Click("link=Register");
        selenium.WaitForPageToLoad("30000");

        string uniqueVal = selenium.GetEval("\"AutomatedTest\" + (new Date().getDate()) + (new Date().getTime())");
        //use moment instead.

        selenium.Type("id=RegistrationForm_TxtName", uniqueVal);

        selenium.Type("id=RegistrationForm_TxtUserName", uniqueVal + "@creative-404.com");
        selenium.Type("id=RegistrationForm_TxtPassword", uniqueVal);
        selenium.Type("id=RegistrationForm_TxtRePassword", uniqueVal);
        selenium.Click("id=RegistrationForm_Button1");
        selenium.WaitForPageToLoad("30000");

        for (int second = 0; ; second++)
        {
            if (second >= 60) Assert.Fail("timeout");
            try
            {
                if (selenium.IsTextPresent("Registration was successful!")) break;
            }
            catch (Exception)
            {
                Console.Write("Unable to find the Registration successful message. Something has gone wrong..");
            }
            Thread.Sleep(1000);
        }
    }

}
} 
```

和 Test-Links.cs（这个测试真的只是为了测试它）

```
namespace SeleniumTests
{
[TestFixture]
public class Check_Links
{
    private ISelenium selenium;
    private StringBuilder verificationErrors;

    [SetUp]
    public void SetupTest()
    {
        selenium = new DefaultSelenium("localhost", 4444, "*iexplore", "http://custom-creative-404-dropbox:8080/");
        selenium.Start();
        verificationErrors = new StringBuilder();
    }

    [TearDown]
    public void TeardownTest()
    {
        try
        {
            selenium.Stop();
        }
        catch (Exception)
        {
            // Ignore errors if unable to close the browser
        }
        Assert.AreEqual("", verificationErrors.ToString());
    }

    [Test]
    public void Check_linksTest()
    {
        Registration_Test reg = new Registration_Test();
        reg.completeRegistrationForm();

        selenium.Open("/home.aspx");
        selenium.Click("link=Home");
        selenium.WaitForPageToLoad("30000");
        selenium.Click("link=Gallery");
        selenium.WaitForPageToLoad("30000");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T08:43:51.487

您可以附加到 nUnit 进程以调试失败的行[http://frater.wordpress.com/2010/05/04/debugging-nunit-tests-under-visual-studio-2010/](http://frater.wordpress.com/2010/05/04/debugging-nunit-tests-under-visual-studio-2010/)。

您可以将 Visual Studio 配置为在“调试”>“异常”中中断异常。在“公共语言运行时异常”旁边选择“用户未处理”。

![在此处输入图像描述](../Images/cc61f8799d9d43425a6f1b2cc6fc1ec7.png)

# android - 在 Android 应用程序中自动执行 ContentResolver.setMasterSync 是不好的做法还是粗鲁？

> ID：11490082
> 
> 赞同：3
> 
> 时间：2012-07-15T06:56:39.080
> 
> 标签：android, android-service, android-syncadapter

我在我的应用程序中广泛使用同步适配器来实现其核心功能。我还使用同步适配器提供的定期刷新。因此，如果手机上的“帐户和同步”被禁用，我的应用程序将毫无用处。执行 ContentResolver.setMasterSyncAutomatically(true) 来打开同步是否被认为是一种不好的做法或粗鲁。仅仅做一个 ContentResolver.setIsSyncable 并没有帮助，因为如果主帐户和同步被禁用，那么定期同步就不起作用。处理这种情况的常用方法是什么？

提前致谢，

-v-

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T14:09:06.617

我称之为不好的做法。

同步有两个不同的启用标志，它们提供不同的功能。

无论帐户类型或内容类型如何，主同步都是所有同步的单个启用标志。此设置是“帐户与同步”页面上的“自动同步”，用户通常将其关闭以节省电量。一些用户可能（ab）使用它进入一种“请勿打扰”模式。以编程方式，这是通过检查和取消检查的`ContentResolver.setMasterSyncAutomatically()`

其次，您的帐户/权限对有一个启用标志。所以，说一个谷歌帐户。你点击谷歌账户，然后你会得到一个子页面......同步驱动器，同步谷歌播放音乐，同步联系人，同步gmail......等等。每个都是一个帐户（com.google）和一个权限（com.google）。 android.contacts），配对在一起。它们是单独可控的，所以我可以拥有一个同步联系人但不能同步我的日历的谷歌帐户。此外，即使列表中的可用项目可能会有所不同——我可能有一个帐户安装了谷歌音乐，但另一个没有安装——因此该子页面中的内容列表可能会有所不同，选中或未选中的内容可能会有所不同。请注意，如果附加了可同步的授权，则该帐户会显示一个绿色的同步圆圈，但该帐户本身不是孤立的 sycable。以编程方式，`ContentResolver.setSyncAutomatically()`, 并通过 启用/禁用（灰显）`ContentResolver.setIsSyncable()`。未配置时，您会将其变灰。

您的应用完全有权为其自己的帐户/权限对打开和关闭同步（尽管您应该尊重用户的意愿。）像应用同步设置页面上的“同步启用”复选框一样思考，它反映了与/从的状态A&S 子页面通过`(get/set)SyncAutomatically()`

是的，您的应用程序*可以*更改主同步标志——但在这样做时，您确实需要考虑您是否会越过用户的头脑来决定他们的手机如何工作。这可以帮助不知道如何使用手机的用户，并且会*认真*惹恼这样做的用户。我会在未经我许可的情况下立即卸载更改了我的手机范围同步设置的应用程序。我个人最想走的可能是在用户配置同步时向用户弹出一个对话框——“同步已配置，但在“帐户和同步”页面中打开自动同步之前不会执行。你想打开开启自动同步？” 然后发出一个意图，将他们带到 A&S 页面，如果他们同意，则将其打开。这有助于用户了解他们的手机是如何工作的，而不是仅仅在背后改变一些东西，让它变得更加神秘。

总体而言，您不应该在未经用户同意的情况下重新配置手机。

# object - 对象和结构成员访问和地址偏移计算

> ID：11490085
> 
> 赞同：2
> 
> 时间：2012-07-15T06:57:04.867
> 
> 标签：object, struct, offset, member, memory-access

我正在编写一个简单的 VM，并且我对实现对象和结构成员访问有疑问。

由于程序的开始地址在每次运行时都是任意的，因此其每个对象的地址也是任意的。

因此，我能想到的访问对象或其成员对象的唯一方法是访问“基”指针的偏移量，这意味着访问程序结构中的任何内容都需要算术运算。

我的问题是这是否是它在专业编译器中完成的方式，因为显然这种方法会给运行时增加一些开销，而且我自己想不出任何方法来从运行时卸载这个过程，因为缺乏对内存分配及其地址的一致性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:04:52.450

几十年来，大多数计算机都提供寻址模式，允许您将地址指定为基数和偏移量的组合，并且实际计算是在硬件中执行的，不会增加 CPU 时钟周期的成本。

最近（过去几十年）的计算机提供了用于虚拟化内存布局的硬件，这意味着即使每次运行时项目的物理地址都不同，但它在虚拟地址空间中的地址保持不变。同样，使用基地址没有额外的成本，因为计算是隐式执行的，并且对于程序的执行二进制代码是不可见的。

# c# - 包含字符串数组的结构的编组数组

> ID：11490087
> 
> 赞同：3
> 
> 时间：2012-07-15T06:57:17.930
> 
> 标签：c#, c++

您好我正在尝试从 c# 访问结构的 c++ 数组。该结构本身还包含一个字符串数组和一个字符串。详情如下。它不工作..不会崩溃，但不会传输数据（例如，在数组中获取空​​值，在结构/类的 numberOfRows 整数中获取随机数）。请参阅代码清单末尾的我的评论。有什么建议么？

## 时间：2019-05-10 标签：c++cppClassLib.cpp

```
// This is the main DLL file.

  #include "stdafx.h"
    #include <Objbase.h>

    #include "cppClassLib.h"

    #include <string.h>
    //#include <malloc.h>

    namespace cppClassLib {

    /*
    http://msdn.microsoft.com/en-us/magazine/cc164123.aspx
    http://stackoverflow.com/questions/9093292/use-a-c-library-from-c-sharp-code
    http://stackoverflow.com/questions/5671658/what-does-invalid-managed-unmanaged-type-combination-mean
    http://stackoverflow.com/questions/2338146/returning-pointers-from-unmanaged-to-managed-code
    CoTaskMemAlloc http://msdn.microsoft.com/en-us/library/windows/desktop/ms692727%28v=vs.85%29.aspx
    */

    char *createStr(char *input)
    {
        int len = strlen(input)+1;

        // can't use malloc because it needs to
        //  be accessible from another process.
        // can't use CoTaskMemAlloc because get an
        // error when trying to link, not found.
        //char *newStr = (char *)CoTaskMemAlloc(len);
        //char *newStr = (char *)malloc(len);

        char *newStr = (char *)GlobalAlloc(GPTR,len);
        //char* newStr = new char[len];
        strcpy_s(newStr, len, input);
        return newStr;
    }

    int Class1::getMatrixNumberOfRowsInColumnZero(int maxColumns, Class1::columnT *matrix)
    {
        if (maxColumns < 1) {
            return 0;
        }
        return matrix[0].numberOfRows;
    }

    int Class1::getMatrix(int maxColumns, Class1::columnT *matrix)
    {
        if (maxColumns < 2) {
            return 0;
        }
        int numberOfColumns = 2;

        //Class1::columnT *column0 = (Class1::columnT *)GlobalAlloc(GPTR,sizeof(Class1::columnT));
        Class1::columnT *column0 = &(matrix[0]);
        column0->columnName = createStr("Col0");
        int numRows = 2;
        column0->numberOfRows = numRows;
        char **rows = (char **)GlobalAlloc(GPTR,sizeof(char *)*numRows);
        rows[0] = createStr("C0R0");
        rows[1] = createStr("C0R1");
        column0->rows = rows;

        Class1::columnT *column1 = &(matrix[1]);
        //Class1::columnT *column1 = (Class1::columnT *)GlobalAlloc(GPTR,sizeof(Class1::columnT));
        column1->columnName = createStr("Col1");
        numRows = 2;
        column1->numberOfRows = numRows;
        rows = (char **)GlobalAlloc(GPTR,sizeof(char *)*numRows);
        rows[0] = createStr("C1R0");
        rows[1] = createStr("C1R1");
        column1->rows = rows;

        //matrix[0]=column0;
        //matrix[1]=column1;
        //(matrix[0])->columnName = createStr("Test0");

        return numberOfColumns; // 2
    }

    int Class1::getInt(void)
    {
        return 1234;
    }

    char* Class1::getHi(void)
    {
        //char *result = createStr("Hello");
        //return result;
        //return createStr("hello");
        return createStr("hello");
    }

    char** Class1::getHeaderList(void)
    {
        char** list;
        list = (char **)GlobalAlloc(GPTR,sizeof(char *)*2);
        list[0]=createStr("test1");
        list[1]="test2";
        return list;
    }

    int Class1::getHeaderListTwo(int maxsize, char ***result)
    {
        char** list;
        int len = 2;
        if (maxsize < len) {
            return NULL;
        }
        list = (char **)GlobalAlloc(GPTR,sizeof(char *)*maxsize);
        list[0]=createStr("test01");
        list[1]="test02";
        for (int i=2; i<maxsize; ++i) {
            list[i]="";
        }
        *result = list;
        return len;
    }

    char* Class1::getHi2(void)
    {
        return "Hi";
    }

    char* Class1::getHi3(void)
    {
        return "Hi!";
    }

    void Class1::getData(int *totalColumns,
                    char** headers[2],
                    char** items[2][3])
    {
        *totalColumns = 2;
        *headers[0]=createStr("Testing");
        *headers[1]=createStr("Pets");
        *items[0][0]=createStr("test1");
        *items[0][1]=createStr("test2");
        *items[0][2]=createStr("test3");
        *items[1][0]=createStr("Cats");
        *items[1][1]=createStr("Dogs");
        *items[1][2]=createStr("Fish");
    }

} 
```

* * *

## c++ cppClassLib.h

```
 // cppClassLib.h

    #pragma once

    using namespace System;

    #define DllExport   __declspec( dllexport )

    // http://msdn.microsoft.com/en-us/library/3y1sfaz2.aspx

    namespace cppClassLib {

    public class Class1 {
        public:
            struct columnT {  
                int numberOfRows;
                char **rows;
                char *columnName;
            };
            static DllExport int getMatrix(int maxColumns, columnT *matrix);
            static DllExport int getMatrixNumberOfRowsInColumnZero(int maxColumns, columnT *matrix);
            static DllExport void getData(int *totalColumns,
                    char** headers[2],
                    char** items[2][3]);
            static DllExport char *getHi(void);
            static DllExport char *getHi2(void);
            static DllExport char *getHi3(void);
            static DllExport int getInt(void);
            static DllExport char** getHeaderList(void);
            static DllExport int getHeaderListTwo(int maxsize, char ***result);
    };
} 
```

* * *

## c# Form1.cs

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

    using System.Runtime.InteropServices;

    /*

    http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx
    http://ondotnet.com/pub/a/dotnet/2002/03/18/customcontrols.html?page=2
    http://www.codeproject.com/Articles/2995/The-Complete-Guide-to-C-Strings-Part-I-Win32-Chara
    http://msdn.microsoft.com/en-us/library/z6cfh6e6.aspx

    */

    namespace listViewFromC
    {
    public partial class Form1 : Form
    {
        /*
        [DllImport("cppClassLib.dll",
        CallingConvention = CallingConvention.Cdecl,
        EntryPoint = "?getInt@Class1@cppClassLib@@QAEHXZ")]
            public static extern int getInt();
        */

        // get EntryPoint using
        // "DLL Export Viewer" software

        [DllImport("cppClassLib.dll",
        CallingConvention = CallingConvention.Cdecl,
        EntryPoint = "?getHi2@Class1@cppClassLib@@SAPADXZ")]
            public static extern String getHi2();

        [DllImport("cppClassLib.dll",
        CallingConvention = CallingConvention.Cdecl,
        EntryPoint = "?getHi@Class1@cppClassLib@@SAPADXZ")]
        [return: MarshalAs(UnmanagedType.LPStr)]  
        public static extern string getHi();

        [DllImport("cppClassLib.dll",
        CallingConvention = CallingConvention.Cdecl,
        EntryPoint = "?getHeaderList@Class1@cppClassLib@@SAPAPADXZ")]
        [return: MarshalAs(UnmanagedType.LPArray, 
            ArraySubType=UnmanagedType.LPStr, SizeConst=2)]
        public static extern String[] getHeaderList();

        [DllImport("cppClassLib.dll",
        CallingConvention = CallingConvention.Cdecl,
        EntryPoint = "?getHeaderListTwo@Class1@cppClassLib@@SAHHPAPAPAD@Z")]
        public static extern int getHeaderListTwo(int maxsize,
            [MarshalAs(UnmanagedType.LPArray,
            ArraySubType = UnmanagedType.LPStr, SizeParamIndex = 0)]
            ref String[] result
            );

        [StructLayout(LayoutKind.Sequential)]  
        public class columnType
        {
            public int numberOfRows;
            [MarshalAs(UnmanagedType.LPArray,
            ArraySubType = UnmanagedType.LPStr)]
            public String[] rows;
            [MarshalAs(UnmanagedType.LPStr)]
            public String columnName;
        }  

        [DllImport("cppClassLib.dll",
        CallingConvention = CallingConvention.Cdecl,
        EntryPoint = "?getMatrix@Class1@cppClassLib@@SAHHPAUcolumnT@12@@Z")]
        public static extern int getMatrix(int maxColumns,
            [MarshalAs(UnmanagedType.LPArray,
            ArraySubType = UnmanagedType.Struct, SizeParamIndex = 0)]
            columnType[] matrix);

        [DllImport("cppClassLib.dll",
        CallingConvention = CallingConvention.Cdecl,
        EntryPoint = "?getMatrixNumberOfRowsInColumnZero@Class1@cppClassLib@@SAHHPAUcolumnT@12@@Z")]
        public static extern int getMatrixNumberOfRowsInColumnZero(int maxColumns,
            [MarshalAs(UnmanagedType.LPArray,
            ArraySubType = UnmanagedType.Struct, SizeParamIndex = 0)]
            columnType[] matrix);

        /*
        [DllImport("kernel32.dll")]
        static extern IntPtr GlobalAlloc(uint uFlags, uint dwBytes);

        const uint GMEM_FIXED = 0x0000;
        const uint GMEM_ZEROINIT = 0x0040;
        const uint GPTR = GMEM_FIXED | GMEM_ZEROINIT;
        */

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            //label1.Text = getInt().ToString();
            label1.Text = getHi2();
            listView1.Items.Clear();
            listView1.Items.Add(label1.Text);
            //listView1.
        }

        private void button2_Click(object sender, EventArgs e)
        {
            label1.Text = getHi();
        }

        private void button3_Click(object sender, EventArgs e)
        {
            const int maxsize = 2;
            String[] headerList = new String[maxsize];
            int len = getHeaderListTwo(maxsize, ref headerList);
            MessageBox.Show("Got length " + headerList.Length+" ("+len+")");
            label1.Text="";
            for (int i = 0; i < headerList.Length; ++i)
            {
                if (headerList[i].Length>0)
                {
                    label1.Text += headerList[i].ToString() + " // ";
                }
                else
                {
                    label1.Text += " // ";
                }
            }
        }

        private void button4_Click(object sender, EventArgs e)
        {
            int maxColumns=5;
            int numberOfColumns = 0;
            columnType[] matrix = new columnType[maxColumns];
            for (int i = 0; i < maxColumns; ++i)
            {
                matrix[i] = new columnType();
            }
            matrix[0].numberOfRows = 1; // pick something just to see if we can get it back
            //uint sz = (uint)maxColumns*4;
            //IntPtr matrixIP = GlobalAlloc(GPTR, sz);
            //columnType[] matrix = matrixIP;

            //IntPtr pointerArr = Marshal.AllocHGlobal(maxColumns*4);

            //numberOfColumns = getMatrix(maxColumns, matrix);
            label1.Text = getMatrixNumberOfRowsInColumnZero(maxColumns,matrix).ToString();

            //label1.Text = matrix[0].columnName;
        }
    }
} 
```

button1、button2 和 button3 点击事件工作正常，因此它表明一些 c++ 编组到 c# 的工作正常。button4_click 不起作用。

label1.Text 应该返回 1 因为它只是返回 matrix[0].numberOfRows 但实际上它返回了一些巨大的数字。

此外，如果未注释 getMatrix 调用，它也不起作用，它运行时不会崩溃，但是数组的所有元素都是空的（没有填充 getMatrix 应该填充它们的数据）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:43:01.777

这是我的解决方案。这个解决方案的唯一怪癖是结构中需要固定长度的数组，我更喜欢可变长度的数组，但它不接受 LPArray 的 Marshall。也许这是不可能的。

我遇到的主要问题是我将它声明为一个类而不是一个结构。另一个问题是结构中的数组是 LPArray 非托管 marshall 类型，尝试使用可变长度数组，但这不起作用，因为它需要是 ByValArray（或 SafeArray）才能工作。

* * *

## cppClassLib.h

```
// cppClassLib.h

#pragma once

using namespace System;

#define DllExport   __declspec( dllexport )

// http://msdn.microsoft.com/en-us/library/3y1sfaz2.aspx

#define maxRowsCpp 100

namespace cppClassLib {

public class Class1 {
    public:
        struct columnT {  
            int numberOfRows;
            char *rows[maxRowsCpp];
            char *columnName;
        };
        struct columnT2 {  
            int numberOfRows;
        };
        static DllExport int __thiscall getMatrix(int maxColumns, int maxRows, columnT *matrix[]);
        static DllExport int __thiscall getMatrixNumberOfRowsInColumnZero(int maxColumns, columnT matrix[]);
        static DllExport int __thiscall getMatrixNumberOfRowsInColumnZero2(int maxColumns, columnT2 matrix[]);
        static DllExport void getData(int *totalColumns,
                char** headers[2],
                char** items[2][3]);
        static DllExport char *getHi(void);
        static DllExport char *getHi2(void);
        static DllExport char *getHi3(void);
        static DllExport int getInt(void);
        static DllExport char** getHeaderList(void);
        static DllExport int getHeaderListTwo(int maxsize, char ***result);
}; 
```

}

* * *

## cppClassLib.cpp

```
// This is the main DLL file.

#include "stdafx.h"
#include <Objbase.h>

#include "cppClassLib.h"

#include <string.h>
//#include <malloc.h>

namespace cppClassLib {

/*
http://msdn.microsoft.com/en-us/magazine/cc164123.aspx
http://stackoverflow.com/questions/9093292/use-a-c-library-from-c-sharp-code
http://stackoverflow.com/questions/5671658/what-does-invalid-managed-unmanaged-type-combination-mean
http://stackoverflow.com/questions/2338146/returning-pointers-from-unmanaged-to-managed-code
CoTaskMemAlloc http://msdn.microsoft.com/en-us/library/windows/desktop/ms692727%28v=vs.85%29.aspx
*/

char *createStr(char *input)
{
    int len = strlen(input)+1;

    // can't use malloc because it needs to
    //  be accessible from another process.
    // can't use CoTaskMemAlloc because get an
    // error when trying to link, not found.
    //char *newStr = (char *)CoTaskMemAlloc(len);
    //char *newStr = (char *)malloc(len);

    char *newStr = (char *)GlobalAlloc(GPTR,len);
    //char* newStr = new char[len];
    strcpy_s(newStr, len, input);
    return newStr;
}

int Class1::getMatrixNumberOfRowsInColumnZero(int maxColumns, Class1::columnT matrix[])
{
    if (maxColumns < 1) {
        return 0;
    }
    return (matrix[0]).numberOfRows;
}

int Class1::getMatrixNumberOfRowsInColumnZero2(int maxColumns, Class1::columnT2 matrix[])
{
    if (maxColumns < 1) {
        return 0;
    }
    return (matrix[0]).numberOfRows;
}

int Class1::getMatrix(int maxColumns, int maxRows, Class1::columnT *matrix[])
{
    // require at least able to have 2 rows and 2 columns
    if ((maxColumns < 2) || (maxRows < 2)) {
        return 0;
    }
    int numberOfColumns = 2;
    int numberOfRows = 2;
    //return matrix[0].columnName[0];

    //Class1::columnT *column0 = (Class1::columnT *)GlobalAlloc(GPTR,sizeof(Class1::columnT));
    Class1::columnT *column0 = &(*matrix[0]);
    column0->columnName = createStr("Col0");
    column0->numberOfRows = numberOfRows;
    //char **rows = (char **)GlobalAlloc(GPTR,sizeof(char *)*numRows);
    column0->rows[0] = createStr("C0R0");
    column0->rows[1] = createStr("C0R1");

    Class1::columnT *column1 = &(*matrix[1]);
    //Class1::columnT *column1 = (Class1::columnT *)GlobalAlloc(GPTR,sizeof(Class1::columnT));
    column1->columnName = createStr("Col1");
    column1->numberOfRows = numberOfRows;
    //rows = (char **)GlobalAlloc(GPTR,sizeof(char *)*numRows);
    column0->rows[0] = createStr("C1R0");
    column0->rows[1] = createStr("C1R1");

    return numberOfColumns;
}

int Class1::getInt(void)
{
    return 1234;
}

char* Class1::getHi(void)
{
    //char *result = createStr("Hello");
    //return result;
    //return createStr("hello");
    return createStr("hello");
}

char** Class1::getHeaderList(void)
{
    char** list;
    list = (char **)GlobalAlloc(GPTR,sizeof(char *)*2);
    list[0]=createStr("test1");
    list[1]="test2";
    return list;
}

int Class1::getHeaderListTwo(int maxsize, char ***result)
{
    char** list;
    int len = 2;
    if (maxsize < len) {
        return NULL;
    }
    list = (char **)GlobalAlloc(GPTR,sizeof(char *)*maxsize);
    list[0]=createStr("test01");
    list[1]="test02";
    for (int i=2; i<maxsize; ++i) {
        list[i]="";
    }
    *result = list;
    return len;
}

char* Class1::getHi2(void)
{
    return "Hi";
}

char* Class1::getHi3(void)
{
    return "Hi!";
}

void Class1::getData(int *totalColumns,
                char** headers[2],
                char** items[2][3])
{
    *totalColumns = 2;
    *headers[0]=createStr("Testing");
    *headers[1]=createStr("Pets");
    *items[0][0]=createStr("test1");
    *items[0][1]=createStr("test2");
    *items[0][2]=createStr("test3");
    *items[1][0]=createStr("Cats");
    *items[1][1]=createStr("Dogs");
    *items[1][2]=createStr("Fish");
} 
```

}

* * *

## c# Form1.cs

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

using System.Runtime.InteropServices;

/*

http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx
http://ondotnet.com/pub/a/dotnet/2002/03/18/customcontrols.html?page=2
http://www.codeproject.com/Articles/2995/The-Complete-Guide-to-C-Strings-Part-I-Win32-Chara
http://msdn.microsoft.com/en-us/library/z6cfh6e6.aspx

 */

namespace listViewFromC
{
public partial class Form1 : Form
{
    const int maxRows = 100;
    /*
    [DllImport("cppClassLib.dll",
    CallingConvention = CallingConvention.Cdecl,
    EntryPoint = "?getInt@Class1@cppClassLib@@QAEHXZ")]
        public static extern int getInt();
    */

    // get EntryPoint using
    // "DLL Export Viewer" software

    [DllImport("cppClassLib.dll",
    CallingConvention = CallingConvention.Cdecl,
    EntryPoint = "?getHi2@Class1@cppClassLib@@SAPADXZ")]
        public static extern String getHi2();

    [DllImport("cppClassLib.dll",
    CallingConvention = CallingConvention.Cdecl,
    EntryPoint = "?getHi@Class1@cppClassLib@@SAPADXZ")]
    [return: MarshalAs(UnmanagedType.LPStr)]  
    public static extern string getHi();

    [DllImport("cppClassLib.dll",
    CallingConvention = CallingConvention.Cdecl,
    EntryPoint = "?getHeaderList@Class1@cppClassLib@@SAPAPADXZ")]
    [return: MarshalAs(UnmanagedType.LPArray, 
        ArraySubType=UnmanagedType.LPStr, SizeConst=2)]
    public static extern String[] getHeaderList();

    [DllImport("cppClassLib.dll",
    CallingConvention = CallingConvention.Cdecl,
    EntryPoint = "?getHeaderListTwo@Class1@cppClassLib@@SAHHPAPAPAD@Z")]
    public static extern int getHeaderListTwo(int maxsize,
        [MarshalAs(UnmanagedType.LPArray,
        ArraySubType = UnmanagedType.LPStr, SizeParamIndex = 0)]
        ref String[] result
        );

    [StructLayout(LayoutKind.Sequential, Pack = 4)]
    public struct columnType
    {
        public int numberOfRows;
        // note: can't marshal rows field as LPArray must be ByValArray or SafeArray
        // for maximum of maxRows rows
        [MarshalAs(UnmanagedType.ByValArray,
        ArraySubType = UnmanagedType.LPStr,
        SizeConst=maxRows)]
        public String[] rows;
        [MarshalAs(UnmanagedType.LPStr)]
        public String columnName;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct columnType2
    {
        public int numberOfRows;
    }

    [DllImport("cppClassLib.dll",
    CallingConvention = CallingConvention.ThisCall,
    EntryPoint = "?getMatrix@Class1@cppClassLib@@SEHHHQAPAUcolumnT@12@@Z")]
    public static extern int getMatrix(int maxColumns,
        int maxRows,
        [MarshalAs(UnmanagedType.LPArray,
        ArraySubType = UnmanagedType.Struct, SizeParamIndex = 0)]
        ref columnType[] matrix);

    [DllImport("cppClassLib.dll",
    CallingConvention = CallingConvention.ThisCall,
    EntryPoint = "?getMatrixNumberOfRowsInColumnZero@Class1@cppClassLib@@SEHHQAUcolumnT@12@@Z")]
    public static extern int getMatrixNumberOfRowsInColumnZero(int maxColumns,
        [MarshalAs(UnmanagedType.LPArray,
        ArraySubType = UnmanagedType.Struct, 
        SizeParamIndex = 0)]
        columnType[] matrix);

    [DllImport("cppClassLib.dll",
    CallingConvention = CallingConvention.ThisCall,
    EntryPoint = "?getMatrixNumberOfRowsInColumnZero2@Class1@cppClassLib@@SEHHQAUcolumnT2@12@@Z")]
    public static extern int getMatrixNumberOfRowsInColumnZero2(int maxColumns,
        [MarshalAs(UnmanagedType.LPArray,
        SizeParamIndex = 0,
        ArraySubType = UnmanagedType.Struct)]
        columnType2[] matrix);

    /*
    [DllImport("kernel32.dll")]
    static extern IntPtr GlobalAlloc(uint uFlags, uint dwBytes);

    const uint GMEM_FIXED = 0x0000;
    const uint GMEM_ZEROINIT = 0x0040;
    const uint GPTR = GMEM_FIXED | GMEM_ZEROINIT;
    */

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        //label1.Text = getInt().ToString();
        label1.Text = getHi2();
        listView1.Items.Clear();
        listView1.Items.Add(label1.Text);
        //listView1.
    }

    private void button2_Click(object sender, EventArgs e)
    {
        label1.Text = getHi();
    }

    private void button3_Click(object sender, EventArgs e)
    {
        const int maxsize = 2;
        String[] headerList = new String[maxsize];
        int len = getHeaderListTwo(maxsize, ref headerList);
        MessageBox.Show("Got length " + headerList.Length+" ("+len+")");
        label1.Text="";
        for (int i = 0; i < headerList.Length; ++i)
        {
            if (headerList[i].Length>0)
            {
                label1.Text += headerList[i].ToString() + " // ";
            }
            else
            {
                label1.Text += " // ";
            }
        }
    }

    private void button4_Click(object sender, EventArgs e)
    {
        int maxColumns=5;
        int numberOfColumns = 0;
        columnType[] matrix = new columnType[maxColumns];
        for (int i = 0; i < maxColumns; ++i)
        {
            matrix[i] = new columnType();
        }
        matrix[0].numberOfRows = 1; // pick something just to see if we can get it back
        matrix[0].columnName = "ABC";
        // numberOfRows must be less than or equal to maxRows

        columnType2[] matrix2 = new columnType2[maxColumns];
        for (int i = 0; i < maxColumns; ++i)
        {
            matrix2[i] = new columnType2();
        }
        matrix2[0].numberOfRows = 1; // pick something just to see if we can get it back

        //uint sz = (uint)maxColumns*4;
        //IntPtr matrixIP = GlobalAlloc(GPTR, sz);
        //columnType[] matrix = matrixIP;

        //IntPtr pointerArr = Marshal.AllocHGlobal(maxColumns*4);

        //int result = getMatrixNumberOfRowsInColumnZero(maxColumns,matrix);
        //label1.Text = result.ToString();

        numberOfColumns = getMatrix(maxColumns, maxRows, ref matrix);
        label1.Text = matrix[0].columnName;

    }
}
} 
```

# ios - 加载 UIwebview 时如何集成 MBProgressHUD？

> ID：11490090
> 
> 赞同：0
> 
> 时间：2012-07-15T06:58:03.227
> 
> 标签：ios, uiwebview, mbprogresshud

我是ios开发新手。我已经在我的应用程序中集成了一个 UIWebView 来加载一个网页。此加载在 viewdidLoad 函数中完成。

我想在加载网页期间集成 MBProgressHUD。

你能帮我吗？你有一些例子吗？

谢谢你的帮助。

BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:27:21.263

您[`UIWebViewDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)为您提供了三种可用于此目的的方法：

```
– webViewDidStartLoad:
– webViewDidFinishLoad:
– webView:didFailLoadWithError: 
```

您可以在或中显示进度视图`webViewDidStartLoad:`并将其删除。`webViewDidFinishLoad:``webView:didFailLoadWithError:`

[在这里](http://blog.elucidcode.com/2011/03/using-a-hud-to-display-alerts-in-ios/)您可以找到显示/隐藏 MBProgressHUD 的示例。

# android - 阅读电话状态接收器无法在真实设备上运行

> ID：11490091
> 
> 赞同：0
> 
> 时间：2012-07-15T06:58:22.387
> 
> 标签：android, broadcastreceiver

我已经在模拟器上测试了我的接收器并模拟了对模拟器的面部呼叫，并且可以记录电话状态甚至获取呼叫号码，但是如果我在真实设备上尝试这个，它就不起作用。我添加了一个活动，如果它在后台工作，它就可以工作。但我为什么要添加它？为什么必须在后台运行活动？

```
@Override
public void onReceive(Context cnx, Intent nt) {
    Bundle bnd = nt.getExtras();
    Log.e("EXTRA", "EXTRA");
    if (bnd != null) {
        String state = bnd.getString(TelephonyManager.EXTRA_STATE);
        Log.i("PHONE STATE", state);

        if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
            Log.i("PHONE STATE",
                    bnd.getString(TelephonyManager.EXTRA_INCOMING_NUMBER));
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:03:28.223

活动应该在前台运行，如果你想在后台运行你的进程，你应该使用服务。 [在这里阅读更多](http://developer.android.com/guide/components/fundamentals.html)

对于您的问题，您应该有*单独的接收器类*，在清单文件中注册接收器以进行电话状态更改操作并有权读取电话状态。

# core-audio - 从 AudioGraph 渲染样本

> ID：11490099
> 
> 赞同：1
> 
> 时间：2012-07-15T07:00:00.437
> 
> 标签：core-audio

我想要实现的目标应该很简单，但显然我误解了一些小而基本的东西。

我编写了一个 AudioGraph，它从 Render 回调函数接收其输入（在这种情况下，来自 AVAssetReaderOutput 的 CMSampleBufferRefs - 这部分没问题）。

我想渲染输出（离线处理），基本上是把处理后的输出写回 AVAssetWriter。从文献、邮件列表和 Stack Overflow 中，我了解到我需要使用 GenericOutput 输出单元。

我可以回答几个具体的问题，但如果有人能从我为实现这一目标需要采取的步骤的基本大纲开始，那就太棒了。

谢谢！

# python - sqlite3中整数主键没有自动增量

> ID：11490100
> 
> 赞同：22
> 
> 时间：2012-07-15T07:00:00.750
> 
> 标签：python, sqlite

在 sqlite3 [faq](http://www.sqlite.org/faq.html#q1)中，提到了输入空值的整数主键将自动递增。但这对我来说并没有发生。

在 sqlite3 中复制一个表，`CREATE TABLE dummy( serial_num INTEGER PRIMARY KEY, name TEXT);`并使用 python 填充它，

```
import sqlite3 as lite
con = lite.connect('some.db')
cur=con.cursor()
data = "someone's name"
cur.execute("INSERT INTO dummy VALUES(NULL, ?)", data)
con.commit() 
```

第一个属性 serial_num 显示为空白，而 name 属性很好。当我这样做时，`SELECT serial_num FROM dummy`我只会得到一堆空白。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-15T07:16:02.360

这是 SQLite 的怪癖之一。来自[精美手册](http://www.sqlite.org/lang_createtable.html#primkeyconst)：

> 根据 SQL 标准，PRIMARY KEY 应始终暗示 NOT NULL。不幸的是，由于长期的编码疏忽，SQLite 并非如此。除非该列是 INTEGER PRIMARY KEY SQLite 允许在 PRIMARY KEY 列中使用 NULL 值。我们可以更改 SQLite 以符合标准（我们将来可能会这样做），但是当疏忽被发现时，SQLite 已被广泛使用，以至于如果我们解决了问题，我们担心会破坏遗留代码。

关于[INTEGER PRIMARY KEY](http://www.sqlite.org/lang_createtable.html#rowid)的文档有点不清楚列需要什么才能成为这个自动递增的特殊 INTEGER PRIMARY KEY 但实际情况是，如果您想使用 NULL 值来插入时的意思是“给我下一个自动递增值”：

```
create table dummy (
    serial_num integer primary key not null,
    name text
); 
```

如果省略`not null`，则需要像这样进行插入：

```
insert into dummy (name) values (?) 
```

获取 的自动增量值`serial_num`。否则，SQLite 无法区分 NULL 表示“给我下一个自动增量值”和 NULL 表示“放入 NULL 值，`serial_num`因为该列允许 NULL”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-10T06:53:21.907

上面提供的插入语法在没有`not null`.

这是一个示例 - 请注意，即使我使用您在上面指定的插入格式，ID 字段也不会自动递增。

```
sqlite> .schema logTable
CREATE TABLE logTable (ID INTEGER PRIMARY_KEY, ts REAL, level TEXT, message TEXT);
sqlite> INSERT into LOGTABLE (ts, level, message) VALUES (111, "autoinc test", "autoinc test");
sqlite> select * from logtable where ts = 111;
|111.0|autoinc test|autoinc test
sqlite> 
```

它确实适用于 NOT NULL 解决方法。

```
sqlite> create TABLE logTable (ID INTEGER PRIMARY KEY NOT NULL, ts REAL, level TEXT, message TEXT);
sqlite> INSERT into LOGTABLE (ts, level, message) VALUES (222, "autoinc test", "autoinc test"); 
sqlite> select * from logtable where ts = 222;
1|222.0|autoinc test|autoinc test 
```

对于将其发布为新答案而不是评论先前的答案，我深表歉意，但我的声誉得分太低而无法添加评论，我认为重要的是要注意备用插入语句不是一个足够的解决方法。

# php - PHP exceptions, how to handle them

> ID：11490101
> 
> 赞同：0
> 
> 时间：2012-07-15T07:00:17.227
> 
> 标签：php

I have a PHP script that will throw exceptions (e.g. cannot connect to server). In the development arena I would like as much information to be on the screen, but in production I do not want to give the game away. But I would like some code that works in both environments and also enables me to further develop the code.

Is there a prescribed technique to achieve this?

**EDIT**

Yes using apache with PHP

But how to distinguish between the production environment and the development environment without having to change the code base.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:22:04.023

You usually deal with this with environment variables. It can be a configuration file .php (or .ini, .yml, .xml, whatever you use for config files) that you load on startup, and has environment-specific values. For example, in your production server, your environment config file might look like this:

```
$config['environment'] = 'production'; 
```

Another option is to use environment variables provided by your web server. Both approaches are fine, though I prefer the former.

Then you catch ALL uncaught exceptions (and also turn errors into exceptions. Having errors disabled can be annoying during development, and having errors enabled and not catching them can be a huge security hole in production) with an ['universal error catcher'](https://github.com/makasim/UniversalErrorCatcher#readme) (I haven't tried this one, but looks good. In the past I used one I wrote myself, but it was very tricky, I don't recommend writing your own catcher, other than for learning purposes). Then just do something like this:

```
if($config['environment'] == 'production') {
    echo 'Oops, something went wrong';
} else {
    // print full backtrace and stuff
} 
```

As a sidenote, this is the kind of problem a 'framework' is supposed to solve for you. If you use Silex or Symfony 2, this functionality is available by default.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T07:37:45.570

You can build a custom exception class that handles exceptions in a user-friendly way.

```
class MyCoolException extends Exception
{
  //Throw exceptions in a friendly way.
  //Perhaps redirect them to a custom error page?

  public function __construct( $error )
  {
    //do whatever with your error data
  }

  public function redirect()
  {
  }
} 
```

Then, setup your try/catch pattern to accept it:

```
try
{
}
catch( MyCoolException $e )
{
}
catch( Exception $e )
{
} 
```

As another answer says, you can direct the flow of throwing exceptions based on environment configuration.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T07:51:10.070

There is a much simpler way using PHP. Use set_exception_handler() [http://php.net/manual/en/function.set-exception-handler.php](http://php.net/manual/en/function.set-exception-handler.php).

What this function does is, whenever an exception is thrown, it calls a particular function always. You can use this function to check the current environment and act accordingly.

But you will have to tell your script which environment it is in. For that, I agree with what ChocoDeveloper has said in his answer.

For example:

```
<?php
function custom_exception_handler_function($exception) {
  global $config;
  if ($config['environment'] == 'production') {
    continue;
  } else {
    throw $exception;
  }
}

set_exception_handler('custom_exception_handler_function');
?> 
```

This way all your uncaught exceptions (i.e. those which are not in try-catch block) will be tackled uniformly.

# c# - 将数据从桌面上传到 PHP 网站的最简单方法？

> ID：11490103
> 
> 赞同：-3
> 
> 时间：2012-07-15T07:00:25.150
> 
> 标签：c#, php

这一定很简单，但我不是网络背景，我对 PHP 不太了解。

我有基于 C# 的桌面应用程序，它应该在后台将一些数据上传到基于 php 的网站。假设我有几个基于文本的字段，如姓名、年龄、日期等。我必须将此信息上传到一个基于 php 的网站，该网站最终将存储在 MySQL 数据库中。

实现这一目标的最简单方法是什么？我应该在服务器端做什么？托管将被称为 C# 应用程序的 Web 服务？我应该使用 HTTP Post 吗？想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:06:23.753

在您的 PHP 服务器端编写一个 Web 服务。如果它是一个 Restful Web 服务，您将很容易访问它。您的服务必须在 URL 上运行。您的服务必须具有公开的方法来执行 CRUD 操作或您要使用的 CRUD 中的任何操作。例如

```
class MyService()
{
  public function insert_data()
  {
    if($_SERVER["request_code"] == "POST") {
      //handle json data here
    }
  } 
```

因此，编写这样的服务并托管在公共可查找的 URL 中，例如

[https://mydomain.com/api/insert_data](https://mydomain.com/api/insert_data)

现在向它发送一个 POST 请求以及来自客户端的一些 json 数据，这对于任何 C# 应用程序都是微不足道的。

当您的服务收到它时，您必须编写代码来解析输入验证它并将数据存储在 mysql DB 中。

如果传入请求是安全数据服务，您可能还想尝试验证传入请求。

对于使用 php 编写宁静的 Web 服务，请尝试

[http://recessframework.org](http://recessframework.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T07:07:20.900

我会做这些事情。

1.  从 c# 桌面应用程序通过 post 方法发送所需的数据。
2.  创建一个接收 post 变量的 php 脚本。
3.  此脚本将连接到 mysql 并将接收到的数据存储到 mysql 数据库。

php代码：

```
if(isset($_POST['postvariable']))  {

    mysql_connect("host","user","pass");
    mysql_select_db("dbname");
    mysql_query(insert all the data here);

} 
```

# c# - 具有通用基类型的 FluentNHibernate 异常

> ID：11490104
> 
> 赞同：0
> 
> 时间：2012-07-15T07:00:35.520
> 
> 标签：c#, fluent-nhibernate

我有一些实现泛型基类型的类。IE：

```
public class TreeItem<TEntity> : Entity
where TEntity : TreeItem<TEntity>
{
    public virtual IList<TEntity> Children{get;set;}
    public virtual TEntity Parent {get;set;}
}

public class Category : TreeItem<Category>
{
    public virtual string Description{get;set;}
}

... 
```

使用 Automapping 和构建映射时，FluentNHibernate 会引发异常，提示“关联引用未映射的类”。是否使用与 NHibernate 不兼容的通用基类型？（我没有`TreeItem<>`在我的映射中映射）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:05:39.927

`IgnoreBase(typeof(TreeItem<>))`照顾这个。

# javascript - 是否可以在javascript中动态创建具有ID的函数

> ID：11490109
> 
> 赞同：1
> 
> 时间：2012-07-15T07:01:44.707
> 
> 标签：javascript, function, dynamic, anonymous

我可以使用以下内容在 javascript 中动态创建函数：

```
var MyClass = new Function("console.log('Hello World!');"); 
```

但是当我这样做时，ID 将设置为“匿名”。我真的很想给这样一个函数一个 ID 用于调试目的；这就是您在控制台记录此类函数（类）的实例时显示的 id。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:37:33.943

您可以通过创建这样的`create`函数来做到这一点：

```
var create = (function() { 
    var id = 0;

    return function(f) {
        return eval('(function id' + (id++) + (f + '').substr(8) + ')' );
    };
})();

var a = create(function() { alert(0); });
var b = create(function() { alert(1); });

alert(a); // function id0() { alert(0); }
alert(b); // function id1() { alert(1); }
a();      // 0
b();      // 1 
```

### [演示](http://jsfiddle.net/DKGgB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T07:04:28.030

简短的回答：没有。

更长的答案：不可能，甚至没有设置`function.name`。老实说，我什至不明白这一点，因为`Function`构造函数是用于动态创建的临时、动态函数。所以把它们放在 viariables 上，你就完成了。

如果您希望它们有一个名称，因为您正在创建一个类，请使用语法

```
function MyClass(...) { 
```

请注意，无论如何，一些开发人员工具（如 Chrome 网络检查器）对此非常聪明，`MyClass`即使您这样定义它也会显示：

```
var MyClass = function() {... 
```

# java - 线程不会唤醒

> ID：11490111
> 
> 赞同：2
> 
> 时间：2012-07-15T07:01:58.783
> 
> 标签：java, multithreading, wait

我正在尝试使用多线程模拟一个简单的恒温器。我在 lblDesiredTemp 和另一个标签上保存了所需的温度值来显示当前温度 lblCurrentTemp。当系统中有两个以上的活动线程时会出现此问题。正在等待的线程不会被唤醒！

这是我的方法：

```
'private synchronized void ApplySetting()
    {
        Thread tempetureUpdater = new Thread() 
             {
                @Override
                public synchronized void run() 
                {
                    txtLog.setText(txtLog.getText() + "\n" + this.getName());
                    try 
                    {
                        while(!isDone)
                            this.wait();
                    } 
                    catch (InterruptedException ex) 
                    {
                        txtLog.setText(txtLog.getText() + "\n" + ex.getMessage());
                    } `int Max = Integer.parseInt(lblDesiredTemp.getText());
                int Current = Integer.parseInt(lblCurrentTemp.getText());

                txtLog.setText(txtLog.getText() + "\n" + Current +  " to " + Max);

                if(Current > Max)
                {
                    isDone = false;

                    for (int i = Current; i > Max; i--)
                    {
                        lblGasStatus.setText("Off");
                        try 
                        {
                            Thread.sleep(3000);
                            decreaseTemeture();
                        } 
                        catch (InterruptedException ex) 
                        {
                            txtLog.setText(txtLog.getText() + "\n" + ex.getMessage());
                        }
                    }

                    txtLog.setText(txtLog.getText() + "\n" + this.getName() + " done!");
                    isDone = true;
                    this.notifyAll();
                } 
                else
                {
                    isDone = false;

                    for (int i = Current; i < Max; i++)
                    {
                        lblGasStatus.setText("On");
                        try 
                        {
                            Thread.sleep(3000);
                            increaseTemeture();
                        } 
                        catch (InterruptedException ex) 
                        {
                            txtLog.setText(txtLog.getText() + "\n" + ex.getMessage());
                        }
                    }

                    txtLog.setText(txtLog.getText() + "\n" + this.getName() + " done!");
                    isDone = true;
                    this.notifyAll();
                }
                // Report the result using invokeLater().
                SwingUtilities.invokeLater(new Runnable()   
                {
                    @Override
                    public void run() 
                    {
                        setEnabled(true);
                    }
                });
            }
         };
         tempetureUpdater.start();
}` 

有什么问题？！

            回答 #1

赞同：4

时间：2012-07-15T07:08:25.693

当系统中有两个以上的活动线程时会出现此问题。正在等待的线程不会被唤醒！

那么你希望他们怎么做？您只通知“当前”对象，这是一个新线程。当一个线程完成时，它会调用`this.notifyAll`，但不会唤醒*其他*线程。

此外，我*强烈*敦促您更改有关如何编写此内容的其他内容：

*   这种规模的匿名内部类迫切需要分解成一个适当的命名类
*   `ApplySetting`方法名称不遵循 Java 命名约定。同上各种变量名。
*   扩展通常是一个坏主意`Thread`-`Runnable`改为实现，并将其传递`Runnable`给线程构造函数
*   你不应该在对象上调用`wait`和`notify`/ ，因为它用于信号本身`notifyAll``Thread``Thread`
*   在私有引用上进行同步通常是一个好主意，其他代码*不会*将其用于同步或信令
*   正如 Marko 的回答中所指出的，使`run`方法同步几乎总是一个坏主意。鉴于前面的要点，我不希望同步任何整个*方法*，而是同步方法中的单个引用
*   看起来您正在尝试在非 UI 线程中更新 UI 元素；我相信那会失败。（你需要使用`invokeLater`）

            回答 #2

赞同：0

时间：2012-07-15T07:28:12.510

您需要更改`this`引用，`this.wait()`以便`this.notifyAll()`它引用外部对象，而不是匿名`Thread`类的对象。这可以像编写`MyClass.this.wait()`and一样简单，你的方法`MyClass.this.notifyAll()`所在`MyClass`的类在哪里。`applySettings`

但是，我也建议进行 Jon Skeet 列出的更改。

            回答 #3

赞同：0

时间：2012-07-15T07:05:07.553

`run`永远不要将方法标记为`synchronized`. 不仅在这里，**永远**。此外，您`notifyAll`将尝试唤醒它运行的线程。这是行不通的。

```

# visual-studio-2012 - 如何在 Visual Studio 2012 中使用 PEX

> ID：11490116
> 
> 赞同：27
> 
> 时间：2012-07-15T07:02:48.020
> 
> 标签：visual-studio-2012, pex

VS 2010 powertools 安装有助于在 VS 2010 中使用 PEX 和 Moles。现在有了 VS 2012，我了解到 Moles 变得丰富为假货，但希望保留 PEX，请确认。此外，如何在 2012 年使用 PEX。需要安装什么（如 VS 2010 powertool）才能使其在 2012 年正常工作。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T01:33:56.193

据我所知，他们正在等待 Visual Studio 2012 的最终版本发布与之兼容的 Pex 版本。我不明白为什么微软不把这件事说清楚......：/

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-13T12:40:56.867

以下是来自[http://visualstudiogallery.msdn.microsoft.com/fb5badda-4ea3-4314-a723-a1975cbdabb4的评论](http://visualstudiogallery.msdn.microsoft.com/fb5badda-4ea3-4314-a723-a1975cbdabb4)

> > Pex for Visual Studio 2012 2 帖子 | 最后发表 2013 年 4 月 23 日
> > 
> > 写于 2013 年 4 月 23 日 *Flynn*嗨，我想知道：Visual Studio 2010 有 PEX，Visual Studio 2012 有 Code Digger 和可移植库，但 Visual Studio 2012 和所有其他库格式没有。这是为什么？
> > 
> > 写于 2013 年 4 月 23 日 Nikolai Tillmann Code Digger（用于便携式类库）是 Pex 团队为 Visual Studio 2012 推出的第一个 Visual Studio 扩展。请继续关注未来的扩展，这些扩展将带来 Pex Visual Studio 2010 Power 丰富体验的更多方面最新版 Visual Studio 的工具。如果您正在寻找 Visual Studio 2012 的特定 Pex 功能，请发送电子邮件至 pexdata@microsoft.com。*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-02T14:50:24.170

看起来他们介绍了[Code Digger](http://visualstudiogallery.msdn.microsoft.com/fb5badda-4ea3-4314-a723-a1975cbdabb4)。从[PEX](http://research.microsoft.com/en-us/projects/pex/)网页：

> Visual Studio 2012 的 Code Digger 是 Pex 的轻量级版本，它允许您直接从代码编辑器探索可移植类库中的公共 .NET 方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-15T02:54:32.663

即使您通常在 VS 2012 中工作，您也可以通过在 VS 2010 中打开解决方案来继续使用 PEX 进行测试生成。VS 项目架构在 VS 2010 和 VS 2012 之间非常兼容。

您还可以考虑从 2010 插件运行命令行 PEX。请参阅[从 Pex 自动创建 NUnit 测试用例](https://stackoverflow.com/questions/5897295/create-nunit-test-cases-automatically-from-pex/6809669#6809669)中的[答案](https://stackoverflow.com/a/6809669)。[在使用 Microsoft Pex 进行参数化单元测试](http://research.microsoft.com/en-us/projects/pex/pextutorial.pdf)的练习 5 中阅读有关此内容的更多信息

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T20:04:46.597

据我从微软文档中读到的，Visual Studio 2012 的 PEX 现在是一个称为“Fakes and Moles”的组成部分，请看这里：
[http ://research.microsoft.com/en-us/projects/pex/](http://research.microsoft.com/en-us/projects/pex/)

在这里：http:
[//msdn.microsoft.com/en-us/library/hh549175.aspx](http://msdn.microsoft.com/en-us/library/hh549175.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-22T16:31:44.483

## 根据[此网络广播](http://channel9.msdn.com/Shows/Going+Deep/Nikolai-Tillman-and-Peli-de-Halleux-Inside-Code-Digger)

[Code Digger](http://visualstudiogallery.msdn.microsoft.com/fb5badda-4ea3-4314-a723-a1975cbdabb4)的发布是为了让人们在发布 Visual Studio 2012 版本之前可以看到 PEX 在正确使用时的强大功能，人们将它分开，因为它不能处理特定于平台的案例。

他们没有提及发布日期，但由于 Visual Studio 2013 现在是 RTM，您认为它很快就会发布。我绝对想念 PEX，因为它有助于参数化单元测试。

# signalr - 如何确定客户端是否使用 SignalR 接收到消息

> ID：11490123
> 
> 赞同：5
> 
> 时间：2012-07-15T07:03:55.127
> 
> 标签：signalr

如果我使用 SignalR 发送消息，客户端是否可能没有收到消息？您如何验证通信中是否出现任何错误？我正在考虑在发送服务器通知后将消息发送回服务器，但是有没有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T11:33:13.583

是的，客户端可能没有收到消息。SignalR 将消息在内存中保留 30 秒（默认情况下，您可以对其进行调整或使用持久消息总线），因此如果客户端由于某种原因未连接并且此超时时间过去，客户端将错过消息。请注意，如果他在此期间重新连接，他会收到他尚未收到的所有消息，包括那些在他断开连接时发送的消息。

我不知道 SignalR 是否提供了一种在广播失败时告诉您的方式，因此将确认发送回服务器可能更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:28:46.007

只要客户端连接，它就会得到消息。您可以订阅客户端代码中的连接状态更改。在服务器端代码中，您可以实现 IConnected 和 IDisconnect 接口来处理 Connect、Disconnect 和 Reconnect 事件。

# c# - EF 中的错误 TVP

> ID：11490126
> 
> 赞同：0
> 
> 时间：2012-07-15T07:04:23.130
> 
> 标签：c#, stored-procedures, entity-framework-4, table-valued-parameters

我在 EF + SP 中使用 EF + 函数在 sql 2008 中发送和获取值。

SP：

```
ALTER proc [dbo].[InsertIntoScore]
(
@DateReg datetime,
@stdLastName nvarchar(50),
@stdFirstName nvarchar(50),
@Description nvarchar(500),
@tvpScore ScoreType READONLY
)
AS
DECLARE @Id AS INT
BEGIN TRY
BEGIN TRANSACTION
INSERT INTO Student(DateReg,stdLastName,stdFirstName,[Description])
VALUES (@DateReg,@stdLastName,@stdFirstName,@Description)

set @Id = SCOPE_IDENTITY() 

insert tblScore(...)
Select ... FROM @tvpScore 

COMMIT
END TRY
BEGIN CATCH
IF @@TRANCOUNT > 0
ROLLBACK
END CATCH 
```

电视节目：

```
CREATE TYPE dbo.ScoreType AS TABLE ( ScoreID int, StudentID int, etc.... ) 
```

但在将 SP 添加到 EF 时显示此错误：

生成的模型带有警告或错误。

有关详细信息，请参阅错误列表。在运行您的应用程序之前，必须解决这些问题。

从数据库加载元数据耗时 00:00:02.5618735。

生成模型耗时 00:00:01.2346890。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T07:30:09.997

Ef 不支持 TVP。您必须使用 ADO.NET 直接调用此存储过程。

[Edti：您可以在Data UserVoice](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015347-table-valued-parameters)上投票支持 TVP 。

# php - 在 codeigniter 中同时使用活动记录和学说

> ID：11490129
> 
> 赞同：0
> 
> 时间：2012-07-15T07:04:32.180
> 
> 标签：php, codeigniter, activerecord, doctrine

除了在某些情况下同时使用教义之外，我很想知道如果我使用 codeigniter 的活动记录查询是否可以。因为在某些情况下，我发现主动记录比编写学说查询更容易和快速地完成任务。例如，考虑以下情况，我需要在学说中返回表中的总行数：

```
$query = $this->em->createQueryBuilder()
  ->select("count(c)")
  ->from($this->entity, "c")
  ->getQuery();
return $query->getSingleScalarResult(); 
```

与通过活动记录相比：

```
return $this->db->count_all_results($this->table); 
```

您可以看到它在活动记录中是多么容易。可能还有更多这样的案例。那么，两者都使用有什么优缺点呢？

另外，他们会使用两个不同的数据库连接来执行他们的操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:11:56.123

> 我很想知道，除了在某些情况下同时使用教义之外，如果我使用 codeigniter 的活动记录查询是否可以

是的，没关系。没有规则反对它。

> 另外，他们会使用两个不同的数据库连接来执行他们的操作吗？

取决于你如何使用它们。PHP 中的连接池与其他语言不同。您可能必须编写一个自定义类来将它们连接起来以使用公共连接，但如果我赶时间的话，这不是我花时间做的事情。

关于利弊

就 codeigniter 而言，坚持使用活动记录是件好事，因为它更清洁、更高效，并且是 codeigniter 的一部分，几乎可以为您提供您可能需要的一切。您可以从在基类上扩展的 codeigniter 论坛获取扩展的活动记录类，以提供一些复杂的连接功能。

但从技术上讲，使用两层并不是问题，除了它会变得凌乱，并建立两个独立的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T00:12:34.270

你可以同时使用 Doctrine 和 ActiveRecord。剑鱼突出了一些问题。除此之外，如果您引入新的开发团队，学习曲线将会更多。

我建议选择一个并坚持下去。IMO，两者都一样好。您应该根据您当前的项目和个人喜好进行选择。你可以在这里找到很好的比较

[Doctrine 在 Active Record 之上添加了什么 - CodeIgniter？](https://stackoverflow.com/questions/8838147/what-does-doctrine-add-above-active-record-codeigniter)

关于你提到的两个查询，如果你使用 DQL，它可能看起来很简单

```
$query = $em->createQuery('SELECT COUNT(u.id) FROM Entities\User u');
$count = $query->getSingleScalarResult(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T07:30:26.367

[在 CI https://github.com/mitul69/codeigniter-doctrine-integration](https://github.com/mitul69/codeigniter-doctrine-integration)中找到学说集成的链接

我将在几天内更新更多文件。

# jquery - jQuery 移动。动态填充选择菜单。选项最初不显示

> ID：11490133
> 
> 赞同：5
> 
> 时间：2012-07-15T07:05:10.993
> 
> 标签：jquery, jquery-mobile, cordova

我在 jQuery mobile 中动态填充选择菜单时遇到问题。

当我附加选项时，没有显示初始值，我只是得到一个空行。单击菜单时可以选择这些值，但这只是初始视图。当我将菜单硬编码到页面中时，它工作正常。我认为这是因为我最初有一个空的下拉列表，它应该按原样显示，并且在附加时，视图不知道要更新，所以一直显示一个空行。无论如何，我可以在附加后强制更新视图吗？我试过`.trigger("create")`了，但这什么也没做。

这是一个显示我的意思的屏幕。“位置”下拉列表是我遇到的问题，而“测试”下拉列表是我硬编码以显示我想要实现的目标。

![在此处输入图像描述](../Images/8ebfdcd5651a671d81f3c135ed62d4ce.png)

这是HTML：

```
<label for="location" class="select">Location</label>
<select name="location" id="location"></select>
<label for="test" class="select">Test DD</label>
<select name="test" id="test">
  <option value="test1">Test 1</option>
  <option value="test2">Test 2</option>
  <option value="test3">Test 3</option>
  <option value="test4">Test 4</option>
  <option value="test5">Test 5</option>
</select> 
```

这是JS：

```
tx.executeSql('SELECT * FROM locations WHERE lDeleted != 1',
  [],
  function(tx,results){
    var len = results.rows.length;
    for (var i=0; i<len; i++){
      $('#location').append('<option value="'+results.rows.item(i).ID+
        '" class="dropDownBlk">'+results.rows.item(i).lTitle+'</option>');
    }
    $('#location').append('<option value="0">Add new location...</option>')
  },
  errorCB
); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-15T07:29:21.963

这已经成功了：

```
$("#location").trigger("change"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T11:04:01.297

后：

```
$('#location').append('<option value="0">Add new location...</option>'); 
```

尝试：

```
$("#location").selectmenu('refresh', true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T07:18:53.003

将所有选项附加到菜单后：

```
$("#location option[value='test1']").attr("selected", "selected"); 
```

或者如果您只想选择第一个值：

```
$("#location option:first").attr("selected", "selected"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-25T20:55:38.970

这对我有用

```
$(document).on('change', "body", function(){
    $( ".ui-selectmenu" ).selectmenu();
}); 
```

如果不起作用，则手动触发正文更改事件。

```
$('body').trigger('change'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-28T17:27:35.180

我使用了它，它对我有用：

```
$.each(AllTxnDAT_PRV, function(index, item) {

        var DocCode =  item.DocCode;
        var DocName =  item.DocName;        
        htmlDOC += '<option value="' + DocCode + '">' + DocName + '</option>';

    });         

$('#DocType > option').remove();
$('#DocType').append($(htmlDOC));   
$('#DocType').selectmenu();
$('#DocType').selectmenu('refresh', true); 
```

# java - 在 Java 应用程序中实现插件？

> ID：11490140
> 
> 赞同：1
> 
> 时间：2012-07-15T07:06:36.993
> 
> 标签：java, plugins

有没有办法在 Java 应用程序中实现简单的插件，可以在需要时启动并且有据可查？

我正在寻找类似于 OSGI、JPF 和 JSPF 的东西。但是，OSGI 很复杂，JPF 没有很好的文档记录，而且 JSPF 不允许您仅在需要时启动插件。

例如，有一个插件文件夹。任何人都可以通过实现我提供的接口来创建插件。创建插件后，任何想使用它的人都可以简单地将它放入我的应用程序的插件文件夹中，应用程序将加载它。

或者，一个更好的词是“附加”。

我的问题有一些类似的问题，但我想了解更多。这些问题的答案很模糊。

```
http://stackoverflow.com/questions/2369499/how-to-make-java-plugins?rq=1
http://stackoverflow.com/questions/7587318/how-can-i-write-my-own-plugin-in-java 
```

如果您不知道，请告诉我如何在我的应用程序中使用 JPF。非常感谢您花时间阅读本文。

编辑：我已经解决了我的问题。我现在正在使用 JSPF - 它非常适合我的目的。感谢所有试图提供帮助的人，对于没有提出“真正的问题”，我深表歉意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T07:17:20.083

如果您为您的 Jar 启动一个[ClassLoader](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html)，您可以随时加载或卸载代码。

[http://viralpatel.net/blogs/java-dynamic-class-loading-java-reflection-api/](http://viralpatel.net/blogs/java-dynamic-class-loading-java-reflection-api/)

[http://www.javalobby.org/java/forums/t18345.html](http://www.javalobby.org/java/forums/t18345.html)

[http://zeroturnaround.com/blog/reloading-objects-classes-classloaders/](http://zeroturnaround.com/blog/reloading-objects-classes-classloaders/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T07:10:50.003

是的，您可以实施它们。只是为了语义，`plugins`在 java 中被调用`libraries`（这应该让你更容易在谷歌上搜索）。通常，Java 中的库在构建时显示为 .jar 文件

以下是一些可以帮助您的链接：

```
http://www.digilife.be/quickreferences/PT/Build%20your%20own%20Java%20library.pdf
https://stackoverflow.com/questions/3612567/how-to-create-my-own-java-libraryapi 
```

* * *

回复编辑和对此帖子的评论：

那么你应该阅读这篇文章：[如何设计可扩展软件（插件架构）？](https://stackoverflow.com/questions/323202/designing-extensible-software-plugin-architecture)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T07:27:04.753

本[教程](http://www.vogella.com/articles/EclipseRCP/article.html)向您展示了如何轻松地为您的应用程序实现插件方法，但这需要您的应用程序支持 Eclipse RCP。您将找到所需的一切，包括“插件目录”，然后将按需加载。RCP 不是唯一的 OSGI 实现，还有其他实现，但我建议您使用它，因为有更广泛的社区支持。

自从我开始写答案的那一刻起，我看到你的问题有很多更新。在我看来，您不应该害怕深入研究建议的框架，请选择一个看起来复杂但经过验证的框架，而不是仅仅因为您是新手而堆积或重新发明自行车。

# java - 如何防止空白的 JOptionPane 窗口

> ID：11490142
> 
> 赞同：2
> 
> 时间：2012-07-15T07:06:44.927
> 
> 标签：java, swing, joptionpane

> **可能重复：**
> [如何在 EDT 上运行 JOptionPane？](https://stackoverflow.com/questions/13093499/how-do-i-run-joptionpane-on-edt)

在看似随机的时间（即如果程序运行足够多次），`JOptionPane`我编写的窗口将显示一个空白窗口，关闭和确定按钮在那里，但没有我编码的文本。这似乎`JOptionPane`最终发生在任何编写的程序中；有什么方法可以防止这种情况发生吗？FWIW 这很少（如果有的话）连续发生两次。

我刚刚写了这个，连续运行了15次，没有任何问题。这与我*在*使用`JOptionPane`. 有什么遗漏吗？

```
import javax.swing.JOptionPane;
public class SimpleJOptionPane
{
    public static void main(String[] args)
    {
        JOptionPane.showMessageDialog(null, "Hello, World!");
    }//end main
}//end class SimpleJOptionPane 
```

一般*不会*出现这个问题。`JOptionPane`通常与预期的文本一起显示。当它不起作用时，在我不知情的情况下会发生什么变化？

正如评论中所建议的，我正在研究使用 EventQueue.isDispatchThread()

如您所见，下面的代码使用另一种方法来显示 JOptionPane。这是一个适当的解决方案吗？

```
final String ERR_TITLE = "Error";
final String ERR_MSG = "An exception has occured; please start over.";
                    showError(ERR_MSG, ERR_TITLE);

public static void showError(final String MESSAGE, final String TITLE)
{
    JOptionPane.showMessageDialog(null, MESSAGE, TITLE, JOptionPane.ERROR_MESSAGE);
}//end showError 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T08:22:28.650

如果我是你，我会这样做：

1.  创建一个委托执行 JOptionPane 的静态方法
2.  确保我的所有代码都引用该方法而不是 JOptionPane
3.  在该静态方法中检查空字符串和空值。

-

```
public static void myShowMessage(String s) {
    if(s == null || "".equals(s)) {
        System.out.println("AHA!  gotcha ...");
    }
    JOptionPane.showMessageDialog(null, s);
} 
```

我知道这听起来可能有点傻，但从经验来看，这在 API 本身不是问题......

# lftp - 为什么 lftp mirror --only-newer 不传输“仅更新”文件？

> ID：11490145
> 
> 赞同：11
> 
> 时间：2012-07-15T07:07:18.887
> 
> 标签：lftp

我想自动上传我网站的文件。但是，远程服务器不支持 ssh，所以我尝试下面的 lftp 命令而不是 rsync。

```
lftp -c "set ftp:use-mdtm no && set ftp:timezone -9 && open -u user,password ftp.example.com && mirror -Ren local_directory remote_directory" 
```

如果本地文件未更改，则此命令不会上传任何文件。但是，我更改了一个文件并运行命令，所有文件都已上传。

我知道 lftp/ftp 的 MDTM 问题。所以，我尝试了“set ftp:use-mdtm no && set ftp:timezone -9”，但是虽然我只更改了一个文件，但所有文件都已上传。

有谁知道为什么 lftp mirror --only-newer 不传输“仅更新”文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T09:42:48.733

在下一页

[http://www.bouthors.fr/wiki/doku.php?id=en:linux:synchro_lftp](http://www.bouthors.fr/wiki/doku.php?id=en:linux:synchro_lftp)

作者指出：

> 上传时，无法在上传的文件上设置日期/时间，这就是为什么需要–>ignore-time。

因此，如果您使用标志组合 --only-newer 和 --ignore-time 您可以获得不错的备份属性，这样所有大小不同的文件都会被替换。当然，如果您真的需要依赖时间同步，这将无济于事，但如果只是为了执行数据的定期备份，它就可以完成这项工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-12T21:55:34.563

`mirror -R -n`对我来说是一个非常简单的新文件备份

# c# - .net WebBrowser 控件修改html？

> ID：11490151
> 
> 赞同：-1
> 
> 时间：2012-07-15T07:08:21.943
> 
> 标签：c#, .net, internet-explorer, webbrowser-control

我正在抓取网页，当我在带有 IE 8 的 Windows XP 机器上运行我的抓取应用程序时（它是 Windows XP 支持的最大），它从 webBrowser.Body.OuterHtml 返回不同的 HTML 源代码，而不是在带有 IE9 的 Windows 7 上运行。有谁知道如何从 webbrowser 控件中获取未修改的原始 html ？？？我知道 IE 会修改 HTML，所以我想知道如何获取从 Web 服务器返回的原始 html。这很烦人，因为我在我的 Windows 7 开发盒上编写了刮板，然后当我将它托管在 Windows XP 盒上时它就不起作用了。如果您回答不要告诉我使用 WebClient 并下载页面，我想轻松支持浏览页面，而不必担心由 webbrowser 控件处理的其他小网页内容。我使用网络浏览器控件是有原因的。是否有网络浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:13:09.293

从根本上说，您有两个相反的担忧：

*   您想获得原始源，未经浏览器可以做的任何修改
*   您想让浏览器做一些事情，因为您显然发现它很有用。（您说过您使用`WebBrowser`“出于某种原因”，但您实际上并没有告诉我们那个原因是什么。）

如果您*确实*出于某种原因需要使用`WebBrowser`，您可能需要两次获取每个页面：一次在浏览器中（以便它可以执行您需要的任何操作）和一次`WebClient`（以便您可以在没有任何混乱的情况下获得响应） .

也有可能在浏览器控件中禁用脚本会做你需要的一切 - 但由于你没有首先给我们使用浏览器控件的原因，这可能无济于事......

# c - uthash add malloc strcpy printf 打印垃圾值

> ID：11490153
> 
> 赞同：1
> 
> 时间：2012-07-15T07:08:33.333
> 
> 标签：c, struct, malloc, printf

我正在使用 uthash (http://uthash.sourceforge.net/userguide.html) 在我的 C 程序中使用哈希表实现。

我试图在添加之前和之后打印添加到哈希表中的数据，并且在 malloc 之后打印它时得到垃圾值。请看下面的代码。

```
void add_user(int user_id, char *name)
{
    printf("User ID : %d Name : %s, user_id,name); // Prints fine !!
    struct my_struct *s;
    s = malloc(sizeof(struct my_struct));
    s->id = user_id;
    strcpy(s->name, name);

    printf("User ID : %d Name : %s, s->user_id,s->name); // Prints User ID fine, but for Name, only half of it is printed right, rest is Garbage !!

    HASH_ADD_INT( users, id, s );
} 
```

如果我执行以下操作：

```
void add_user(int user_id, char *name)
{
    printf("User ID : %d Name : %s, user_id,name); // Prints fine !!

    struct my_struct *s;
    s = malloc(sizeof(struct my_struct));

    printf("User ID : %d Name : %s, user_id,name); // Printing same as previous printf then I get Garbage values printed for Name

} 
```

但是，如果我也注释掉 malloc，那么两个 printf 语句都会正确打印。

帮助 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:55:51.457

当`r.name`是一个指针，那么你必须手动为它分配内存，`strcpy`不关心这个。当它是 char 数组时，内存已经存在。此外，如果指针未初始化，则它可能指向任何（无效）内存地址。`strcpy`也不关心这个，所以你会尝试将字符串复制到这个地址，无论它在哪里。

正如 YePhIcK 所评论的，这同样适用于您的结构。当`s.name`是一个指针，那么你需要为它分配内存：

```
s = malloc(sizeof(struct my_struct));
s->id = user_id;
s->name = malloc(strlen(name) + 1);
strcpy(s->name, name); 
```

如果你分配一个固定的数量或者它是一个 char 数组，那么不要**使用**它`strcpy`，因为它也不关心目标大小。`name`当给定的空间长于可用空间时，您将以潜在的缓冲区溢出结束。这是一个完整的讨论，只需在此处搜索 strcpy。

最后，`malloc`可能会失败然后返回`NULL`。您应该始终检查这一点并采取适当的措施。这是另一个自己的讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T07:27:34.470

天哪，我发布了这个问题，在接下来的 2 分钟内我想通了。

YePHlcK，你说得对。但是，这里没有分配内存的是 *name 。

该函数是这样调用的：

```
add_user(r.user_id, r.name); // r itself is a struct where name was a pointer and not a char array. 
```

将 name 更改为 char 数组，然后使用 strcpy(r.name,"blah"); 对其进行初始化 然后调用 add 解决了这个问题。因为 strcpy 会处理内存分配？！？！！如果我错了，请纠正我。

谢谢！

# jquery - 从 CRM 2011 中的 aspx 网页引用 jquery

> ID：11490154
> 
> 赞同：0
> 
> 时间：2012-07-15T07:09:01.433
> 
> 标签：jquery, asp.net, dynamics-crm-2011, webpage, webresource

我用 jquery 脚本创建了一个网络资源，这是 url：

“http://dynamics:port/somelib/WebResources/new_orgName/scripts/jquery1.7.2.min”

我创建了一个新的 aspx 网页并将其以“帐户”形式放在导航栏中。

我已将 jquery 脚本添加到“帐户”表单属性中，但是当 aspx 网页加载时，它无法识别 jquery 的“$”符号。

如何从网页中引用 jquery？我还需要专门从网页中引用 jquery 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:31:22.230

根据我们上面的对话：

将此添加到您的页面顶部或母版页中。

**脚本**

```
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>‌

​&lt;script type="text/javascript" src="http://code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script> 
```

如果您有任何冲突，请进一步查看 .noConflict API。

<根据您的需要/目的>以任何方式使用它；或者[引用谷歌的 JQuery 库是否安全？](https://stackoverflow.com/questions/6382639/is-it-safe-to-reference-googles-jquery-librar)可能有助于做出决定。

休息这将有助于事业。

# servlets - HttpSessionAttributeListener 和 HttpSessionBindingListener

> ID：11490166
> 
> 赞同：0
> 
> 时间：2012-07-15T07:11:57.720
> 
> 标签：servlets, servlet-filters, servlet-listeners

当我阅读文档时，两者似乎都是一样的。那么这两者有什么区别呢？请举例说明两者之间的区别，例如在哪个场景中使用。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:33:32.843

第一个是会话的通用侦听器。每当向会话添加或删除任何类型的属性时都会调用它。当您想要了解任何会话属性添加/删除时使用它。

第二个是回调接口，可以由特定的类实现。当该对象与会话绑定/解除绑定时，在实现此接口的对象上调用回调方法。当您希望一个对象被告知它自己在会话中的添加/删除时使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T06:23:43.657

```
HttpSessionBindingListener: 
```

如果一个对象实现了`HttpSessionBindingListener`，它会在绑定到会话或从会话中解除绑定时收到通知。例如，

```
MyObject implements HttpSessionBindingListener
{
// class definition
} 
```

如果我打电话

```
session.setAttribute ("Object", MyObject) 
```

方法`valueBound`和/或`valueUnbound`（定义在`HttpSessionBindingListener`，实现在`MyObject`被调用）实现`HttpSessionBindingListener`仅适用于实现它的对象

`HttpSessionAttributeListener`：当任何类实现`HttpSessionAttributeListener`接口时，当会话的属性列表发生任何变化时都会通知它。例如

```
MyClass implements HttpSessionAttributeListener
{
// implementations of methods
}
session.setAttribute ("anything", AnyObjectNotOnlyMyClass); 
```

指示属性列表中的更改。实现`HttpSessionAttributeListener`侦听任何添加、删除或替换的属性。

# php - 使用 session 和 cookies 哪个更好

> ID：11490167
> 
> 赞同：3
> 
> 时间：2012-07-15T07:12:11.887
> 
> 标签：php

我想获取页面第一次加载时的当前时间，然后将该时间与当前时间进行比较，仅当与第一次加载页面时的差异超过 30 分钟时，才应打开一个新窗口。我想问我应该使用会话还是 cookie 来完成这一切？我已经厌倦了使用以下内容：

```
<input type="hidden" name="time_last_loaded" value="<?php echo strtotime(date("Y-m-d H:i:s")); ?>">

<?
if(isset($_POST['time_last_loaded']))
{
    $current_time = strtotime(date("Y-m-d H:i:s"));
    $time_last_loaded_plus_30_mins = strtotime('+30 minutes',  $_POST['time_last_loaded']));
    if($time_last_loaded_plus_30_mins <  $current_time)
    {
             echo "code works";
     }
}
?> 
```

但它不起作用，有人可以尝试在我的编码中找到问题吗？谢谢！

我也试过这个

```
$time=time();
$timeend= $time + (1*60);
 for($i=1;$i<100;$i++)
  {
  while($time > $timeend)
  {
      echo "it works";
      $time=time();
      }
  } 
```

这段简单的代码不起作用？任何人都可以告诉吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T07:19:00.397

client side.cookies 是要走的路。它会让服务器不知道客户端上发生的事情（在内存和处理时间方面）。如果应该通过javascript在客户端上打开窗口，并且您与服务器上存储的时间没有任何关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T07:41:05.713

会话通常用于为您的应用程序逻辑唯一地标识客户端（类似于用户登录会话）。如果您不必唯一地识别用户，我建议您使用 Cookie。您也可以使用会话，但这将不必要地在服务器端进行一些处理，这看起来对您没有任何用处。由您决定。但是，如果您不需要唯一地识别用户，那么就选择 Cookie。

“如果相差超过 30 分钟，我会将该时间与当前时间进行比较，新窗口将打开”。我不太明白你的意思，所以我会尽量回答你的问题。

将打开新窗口可能意味着两件事：打开一个新窗口 (target="_blank") 或重定向到一个新 URL。如果您想做第一个，那么您想做的时间处理必须由 Javascript 完成和处理，因为您无法从服务器端在浏览器中打开新窗口。如果你想做第二个，你可以在客户端使用 JS 或在服务器端使用你使用的任何语言来实现。

至于您的代码片段，我认为您没有正确使用 strtotime() 。阅读： http: [//php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

我对你的代码做了一个小的改动。这应该可行，但我自己没有尝试过：>

```
<?
if(isset($_POST['time_last_loaded']))
{
    $current_time = strtotime(date("Y-m-d H:i:s"));
    $time_last_loaded_plus_30_mins = strtotime($_POST['time_last_loaded']) + 30*60;
    if($time_last_loaded_plus_30_mins <  $current_time)
    {
             echo "code works";
    }
}
?> 
```

# c++ - 指向静态成员变量的指针

> ID：11490170
> 
> 赞同：0
> 
> 时间：2012-07-15T07:12:45.950
> 
> 标签：c++, pointers, static-variables

> **可能重复：**
> [C++：对静态类成员的未定义引用](https://stackoverflow.com/questions/272900/c-undefined-reference-to-static-class-member)

以下 C++ 代码编译良好（使用`g++ -c`），但没有链接给出错误：`undefined reference to`Abc::X'`

```
#include <iostream>

using namespace std;

class Abc {

public:
    const static int X = 99;
};

int main()
{
    Abc a1;
    cout << &(Abc::X) << endl;
} 
```

我想知道为什么不允许这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T07:15:26.053

您需要实际定义该静态成员，而不仅仅是声明...

在你的之前添加这一行`main()`：

```
const int Abc::X = 99; 
```

从 C++17 开始，您还可以执行内联静态，在这种情况下，不需要 .cpp 文件中的上述附加代码行：

```
class Abc {

public:
    inline const static int X = 99; // <-- "inline"
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T07:24:55.437

如果您不喜欢考虑翻译单元、静态初始化顺序和类似的东西，只需将您的静态常量更改为方法。

```
#include <iostream>
using namespace std;

class Abc {

public:
    inline static const int& X(){ 
      static int x=99;
      return x; 
    }
};

int main()
{
//    Abc a1;
    cout << &(Abc::X()) << endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T10:24:03.207

如果静态成员以需要左值的方式使用（即以需要它有地址的方式），那么它必须有一个定义。请参阅[GCC wiki](http://gcc.gnu.org/wiki/VerboseDiagnostics#missing_static_const_definition)上的说明，其中包括对标准的引用以及如何修复它。

# blackberry - 安装新应用程序后在 BlackBerry 中处理受信任的应用程序状态对话框事件

> ID：11490176
> 
> 赞同：1
> 
> 时间：2012-07-15T07:13:31.153
> 
> 标签：blackberry, java-me, blackberry-eclipse-plugin, blackberry-jde, blackberry-webworks

每当我在黑莓设备上安装我的应用程序时，我都会收到一个询问“信任应用程序”的提示，其中包含是、否和帮助选项。如果选择“是”，一切正常，如果我选择“否”，由于我的应用程序使用定位服务时出现权限问题，我会一次又一次地收到其他提示，包括允许和拒绝。

我想要的是每当受信任的应用程序对话框出现并且在用户选择是或否之后我想显示一个警报或信息告诉“请在受信任的应用程序对话框中选择是以确保此应用程序的正确工作，如果您选择否，那么您可以重新启动应用程序并选择“是”。如果出现受信任的应用程序对话框，这只是在加载应用程序的主屏幕或主屏幕之前出现的祝酒词或信息。我该如何处理这种情况，任何人都可以帮助我解决这个问题......

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:18:45.970

如果您使用的是 Blackberry Webworks SDK，您可以使用 System API 找出可用权限（以及有关系统的其他信息） [https://developer.blackberry.com/html5/apis/blackberry.system.html#.hasPermission](https://developer.blackberry.com/html5/apis/blackberry.system.html#.hasPermission)

您应该能够检查这些参数并显示对话框警告用户他们没有提供权限。

如果您想找到一些示例代码，请查看：[https ://github.com/blackberry/WebWorks-Samples/tree/master/kitchenSink](https://github.com/blackberry/WebWorks-Samples/tree/master/kitchenSink)

# c# - DLL 版本控制错误

> ID：11490177
> 
> 赞同：16
> 
> 时间：2012-07-15T07:13:37.540
> 
> 标签：c#, asp.net, iis, dll, sharpziplib

我有一个网站偶尔会抛出以下错误：

> “/”应用程序中的服务器错误。
> 
> 无法加载文件或程序集 'ICSharpCode.SharpZipLib, Version=0.85.3.365, Culture=neutral, PublicKeyToken=1b03e6acf1164f73' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

现在我知道我确实依赖于这个 DLL，但我的系统上有 0.85.5 版本。我系统地从服务器中删除了**所有**旧版本的 DLL，重新编译所有内容并重新发布。但无论我做什么，似乎每次重新发布后，有人访问该网站的前一两次，他们都会收到此错误。然后刷新一次或两次后，错误消失并且站点正常运行。

更奇怪的是，如果我查看引发错误的代码行：

```
URLRewriter.ProcessRewritingResult(status, excludedEnum, siteName, viewMode, relativePath); 
```

`URLRewriter`是来自 3rd 方包 ( [Kentico CMS](http://www.kentico.com/) - CMS.URLRewritingEngine.dll) 的类。我在那个 DLL 上运行了 Dependency Walker，发现 ICSharpCode.SharpZipLib 上没有任何依赖关系。

任何想法如何解决这一问题？

**编辑：**在@JeremyThompson 的建议下，我运行进程监视器来捕获错误。这是一个屏幕转储，突出显示了相关部分（出于隐私原因，一个文件夹名称被隐藏了）。您可以通过右键单击它来查看它的全尺寸等...

![在此处输入图像描述](../Images/909c62b32b8470eb284126dc40260240.png)

**编辑：**这是来自错误的负载跟踪。这有帮助吗？

> === 预绑定状态信息 ===
> 
> 日志：用户 = MY-SERVER-12\Administrator
> 
> 日志：DisplayName = ICSharpCode.SharpZipLib，版本=0.85.3.365，文化=中性，PublicKeyToken=1b03e6acf1164f73（完全指定）
> 
> 日志：Appbase = file:///C:/inetpub/wwwroot/MySite/
> 
> 日志：初始 PrivatePath = C:\inetpub\wwwroot\MySite\bin
> 
> 调用程序集：CMS.WebAnalytics，Version=6.0.4377.2467，Culture=neutral，PublicKeyToken=834b12a258f213f9。
> 
> ===
> 
> LOG：此绑定在默认加载上下文中开始。
> 
> 日志：使用应用程序配置文件：C:\inetpub\wwwroot\MySite\web.config
> 
> LOG：使用主机配置文件：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet.config
> 
> LOG：使用 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config 中的机器配置文件。
> 
> 日志：政策后参考：ICSharpCode.SharpZipLib，版本=0.85.3.365，文化=中性，PublicKeyToken=1b03e6acf1164f73
> 
> 日志：正在尝试下载新的 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/9760eb69/275bb3db/ICSharpCode.SharpZipLib.DLL。
> 
> 日志：正在尝试下载新的 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/9760eb69/275bb3db/ICSharpCode.SharpZipLib/ICSharpCode.SharpZipLib.DLL。
> 
> 日志：尝试下载新的 URL 文件：///C:/inetpub/wwwroot/MySite/bin/ICSharpCode.SharpZipLib.DLL。
> 
> 日志：正在尝试下载新的 URL 文件：///C:/inetpub/wwwroot/MySite/bin/ICSharpCode.SharpZipLib/ICSharpCode.SharpZipLib.DLL。
> 
> 日志：正在尝试下载新的 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/9760eb69/275bb3db/ICSharpCode.SharpZipLib.EXE。
> 
> 日志：正在尝试下载新的 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/9760eb69/275bb3db/ICSharpCode.SharpZipLib/ICSharpCode.SharpZipLib.EXE。
> 
> 日志：正在尝试下载新的 URL 文件：///C:/inetpub/wwwroot/MySite/bin/ICSharpCode.SharpZipLib.EXE。
> 
> 日志：正在尝试下载新的 URL 文件：///C:/inetpub/wwwroot/MySite/bin/ICSharpCode.SharpZipLib/ICSharpCode.SharpZipLib.EXE。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T07:43:04.090

> 现在我知道我确实依赖于这个 DLL，但我的系统上有 0.85.5 版本。我系统地从服务器中删除了所有**旧**版本的 DLL，重新编译所有内容并重新发布。

听起来像“依赖”是期待 DLL 的**旧**版本。为什么不用旧版本 (0.85.3.365) 替换系统上的**所有**新**版本(** **0.85.5** ) 副本？（确保检查您的 Web 应用程序的“bin”文件夹和“GAC”：c:\windows\assemblies）

如果需要，可以在此处下载旧版本：http: [//sourceforge.net/projects/sharpdevelop/files/SharpZipLib/0.85.3/](http://sourceforge.net/projects/sharpdevelop/files/SharpZipLib/0.85.3/)

笔记：

*   替换 DLL 后，停止 IIS 并清除所有 Temporary ASP.Net 文件。例如：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files
*   另外：请记住更新您的 Visual Studio 解决方案，以便它引用旧版本。

干杯

皮特

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T09:23:01.187

所以事实证明，Kentico 有它自己的依赖`ICSharpCode.SharpZipZip.dll`——它期待找到旧版本。[我在这里](https://stackoverflow.com/a/4188166/7850)找到了类似的解决方案。通过将以下块插入到我的 web.config 文件中，我似乎终于消除了这个错误！

```
<runtime>
  <assemblyBinding>
    <dependentAssembly>
      <assemblyIdentity name="ICSharpCode.SharpZipLib" publicKeyToken="1b03e6acf1164f73"/>
      <bindingRedirect oldVersion="0.85.3.365" newVersion="0.85.5.452"/>
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

我仍然不明白的是，为什么 Dependency Tracker 没有显示这种依赖关系？

**编辑：**哦，亲爱的，这毕竟没有解决它。现在似乎不太频繁了，但是今天重新启动 IIS 后，我们的一位测试人员又收到了旧的错误消息！:-(

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-15T07:37:31.403

您提到用户访问该站点的第一次或两次您收到错误。

要解决这个问题，我建议您运行[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)并查看它在哪里寻找和加载程序集。

-iisreset -
在服务器上启动进程监视器-查看
几个页面并尽快重现问题-
停止 ProcessMonitor 跟踪
-在进程监视器跟踪中搜索`ICSharpCode.SharpZipLib`

如果失败了，看看还有什么原因：

-将 ProcessMonitor 结果保存为 CSV
- 在 Excel 中打开 CSV -
过滤所有列
- 选择拒绝访问的列的下拉列表或...

这应该告诉您错误的问题所在`Could not load file or assembly`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T14:02:56.823

我认为您在绑定重定向方面走在了正确的轨道上。但是，我建议不要将您的应用程序与旧版本绑定，而是尝试将依赖程序集与较新版本绑定。

通常，强制使用旧版本是更糟糕的选择，因为虽然它可能会修复依赖程序集，但您可以将兼容性错误注入到依赖于新版本的代码中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T08:08:39.733

尝试附加到 AppDomain.CurrentDomain.AssemblyResolve，这样您就可以查看何时/什么程序集加载并明确设置加载位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T12:44:05.893

Kentico CMS 和您的应用程序是否定义在同一个应用程序池中？尝试在自己的应用程序池中运行您的应用程序。

可能发生的情况是，当工作进程被回收时，有时您的应用程序是第一个被添加的，有时 Kentico CMS 是第一个被添加的，这会改变 ICSharpCode.SharpZipLib 的解析方式。

当您偶然刷新一次或两次时，您的应用程序首先被加载，这意味着它可以工作。

[IIS 和 Asp.Net 中的应用程序池是什么？](https://stackoverflow.com/questions/2659571/how-does-application-pool-work-in-iis)

更新：您的应用程序是网站（首次访问时编译）还是 Web 项目（在 Visual Studio 中预编译）。如果它是一个网站，那么您可以转换为一个 Web 项目并尝试一下吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-17T12:48:49.557

您可以使用 Fuslogvw.exe 应用程序记录程序集加载并提供有关加载错误的详细信息。

在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/e74a18c4.aspx](http://msdn.microsoft.com/en-us/library/e74a18c4.aspx)

# php - 匹配变量中的第一个和最后一个完整单词

> ID：11490182
> 
> 赞同：3
> 
> 时间：2012-07-15T07:14:26.307
> 
> 标签：php, regex, preg-match

我使用 php [preg_match](http://php.net/preg_match/ "预匹配")将变量中的第一个和最后一个单词与给定的第一个和最后一个特定单词匹配，

例子：

```
$first_word = 't'; // I want to force 'this'
$last_word = 'ne'; // I want to force 'done'
$str = 'this function can be done';

if(preg_match('/^' . $first_word . '(.*)' . $last_word .'$/' , $str))
{
     echo 'true';
} 
```

但问题是我想强制匹配整个单词（开始和结束）而不是第一个或最后一个字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T07:21:44.793

我会以稍微不同的方式来解决这个问题：

```
$firstword = 't';
$lastword = 'ne';
$string = 'this function can be done';
$words = explode(' ', $string);
if (preg_match("/^{$firstword}/i", reset($words)) && preg_match("/{$lastword}$/i", end($words)))
{
    echo 'true';
} 
```

===========================================

这是实现相同目标的另一种方法

```
$firstword = 'this';
$lastword = 'done';
$string = 'this can be done';
$words = explode(' ', $string);

if (reset($words) === $firstword && end($words) === $lastword)
{
    echo 'true';
} 
```

这总是会回显真，因为我们知道第一个字和最后一个字是正确的，尝试将它们更改为其他内容，它不会回显真。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T07:45:56.327

在搜索中使用**\b**作为边界*字数*限制：

```
$first_word = 't'; // I want to force 'this'
$last_word = 'ne'; // I want to force 'done'
$str = 'this function can be done';
if(preg_match('/^' . $first_word . '\b(.*)\b' . $last_word .'$/' , $str))
{
     echo 'true';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T08:14:09.830

我写了一个函数来获取句子的开头，但它不是任何正则表达式。
你可以这样写。最后我没有添加功能，因为它很长......

```
<?php
function StartSearch($start, $sentence)
{
    $data = explode(" ", $sentence);
    $flag = false;
    $ret = array();
    foreach ($data as $val)
    {
        for($i = 0, $j = 0;$i < strlen($val), $j < strlen($start);$i++)
        {
            if ($i == 0 && $val{$i} != $start{$j})
                break;

            if ($flag && $val{$i} != $start{$j})
                break;

            if ($val{$i} == $start{$j})
            {
                $flag = true;
                $j++;
            }
        }

        if ($j == strlen($start))
        {
            $ret[] = $val;
        }
    }
    return $ret;
}

print_r(StartSearch("th", $str));

?> 
```

# javascript - javascript：当另一个输入值更改时如何清理输入框？

> ID：11490186
> 
> 赞同：1
> 
> 时间：2012-07-15T07:14:52.407
> 
> 标签：javascript

我根据另一个输入（#parent）提出了一个输入（#child）自动建议。当#parent 输入值改变时，我想清理#child 的值。我想学习如何做到这一点，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:17:25.150

您可以订阅`onchange`父母的事件，然后清除孩子的价值：

```
window.onload = function() {
    // the document has loaded => we could access the DOM
    // we subscribe to the onchange event pf the parent:
    document.getElementById('parentId').onchange = function() {
        // and when this event is triggered we clean the child
        // element value
        document.getElementById('childId').value = '';
    };
}; 
```

# c# - 检查用户是否登录

> ID：11490187
> 
> 赞同：-1
> 
> 时间：2012-07-15T07:15:17.047
> 
> 标签：c#, asp.net, asp.net-mvc-3

在 dotNet MVC 应用程序中，我想知道如何检查用户是否已经登录。
我想在登录后立即将登录用户重定向到经过身份验证的索引页面，而不是主页控制器中的索引页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:21:21.490

```
public ActionResult LogOn(LogOnModel Model)
{
    if (User.Identity.IsAuthenticated)
    {
        return RedirectToAction(...);
    }

    .. login logic

    return View(Model);
} 
```

请注意，您也可以使用 web.config 中的表单身份验证来执行此操作。

# sas - 将一个变量的水平转换为其他变量

> ID：11490190
> 
> 赞同：0
> 
> 时间：2012-07-15T07:15:37.873
> 
> 标签：sas

我有一个看起来像这样的数据集：

```
IDnum    State    Product    Consumption
123      MI       A          30
123      MI       B          20
123      MI       C          45
456      NJ       A          15
456      NJ       D          10
789      MI       B          60
...      ...      ...        ... 
```

我想创建一个新的数据集，其中每个 IDnum 有一行，每个不同的产品都有一个新的虚拟变量（在我的真实数据集中，我有接近 1000 个产品），以及它的相关消耗。它看起来像这些行中的东西

```
IDnum   State   Prod.A   Cons.A   Prod.B   Cons.B   Prod.C   Cons.C   Prod.D   Cons.D
123     MI      yes      30       yes      20       yes      45       no       -
456     NJ      yes      15       no       -        no       -        yes      10
789     MI      no       -        yes      60       no       -        no       -
...     ...     ...      ...      ...      ...      ...      ...      ...      ... 
```

像“State”这样的一些变量在同一个 IDnum 内不会发生变化，但原始银行中的每一行都相当于一次购买，因此同一 IDnum 的“product”和“consumption”变量会发生变化。我希望我的新数据集在一行中显示每个客户的所有消费习惯，但到目前为止我失败了。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T10:42:00.510

没有是/否变量，这真的很容易：

```
data input;
length State $2 Product $1;
input IDnum    State    Product    Consumption;
cards;
123      MI       A          30
123      MI       B          20
123      MI       C          45
456      NJ       A          15
456      NJ       D          10
789      MI       B          60
;
run;

proc transpose data=input out=output(drop=_NAME_) prefix=Cons_;
  var Consumption;
  id Product;
  by IDnum State;
run; 
```

添加是/否字段：

```
 proc sql;/* from column names or alternatively 
                create it from source data directly if not taking too long */
    create table work.products as
        select scan(name, 2, '_') as product length=1
        from dictionary.columns 
                    where libname='WORK' and memname='OUTPUT' 
                      and  upcase(name) like 'CONS_%';
    quit;

    filename vars temp;/* write a temp file containing variable definitions
                       in desired order */
    data _null_;
        set  work.products end=last;
        file vars;
                    length str $40;
        if _N_ = 1 then put 'LENGTH ';
        str = catt('Prod_', product, ' $3');
        put str;
        str = catt('Cons_', product, ' 8');
        put str;
        if last then put ';';
    run;

    options source2;
    data output2;
        length IdNum 8 State $2;
        %include vars;
        set output;
        array prod{*} Prod_:;
        array cons{*} Cons_:;
        drop i;
        do i=1 to dim(prod);
            if coalesce(cons(i), 0) ne 0 then prod(i)='yes';
            else prod(i)='no';
        end;
    run; 
```

# algorithm - 用于读取图像内文本的最佳 Python/Ruby 库

> ID：11490191
> 
> 赞同：3
> 
> 时间：2012-07-15T07:15:41.910
> 
> 标签：algorithm, matlab, image-processing, opencv, ocr

任何人都知道 python/ruby 中的一个库，可以分析图像并在其中提取文本？

或者一本关于图像处理等的书...

PS：文本采用各种字体和格式，但清晰，Tl；博士：没有验证码或类似内容。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-15T10:00:49.207

你可以使用**OpenCV**，一个开源的计算机视觉库，它有 Python API。它现在被认为是一个行业标准库。

**OpenCV 官方网站**： http: [//opencv.org/](http://opencv.org/)

如果您需要一些**有关 OpenCV-Python 的教程**，请访问：[opencvpython.blogspot.com](http://opencvpython.blogspot.com)

您还可以查看此 SOF：[OpenCV-Python 中的简单数字识别 OCR](https://stackoverflow.com/questions/9413216/simple-digit-recognition-ocr-in-opencv-python)

除此之外，OpenCV 示例还有一些 OCR 实现。

但我建议您将**Tesseract 用于 OCR**。它是最好的开源 OCR 引擎，由 HP 开发，但现在由 Google 处理。

**正方体网站**：[https ://github.com/tesseract-ocr/tesseract](https://github.com/tesseract-ocr/tesseract)

tesseract、**Pytesser**的Python API ：[https ://github.com/RobinDavid/Pytesser](https://github.com/RobinDavid/Pytesser)

还要检查这个 SOF：[如何在 Tesseract 和 OpenCV 之间进行选择？](https://stackoverflow.com/questions/11489824/how-do-i-choose-between-tesseract-and-opencv)

因此，您可以使用 OpenCV 对图像进行预处理，并使用 Tesseract 进行 OCR。

# android - Android：改变 build.prop 的方法

> ID：11490197
> 
> 赞同：1
> 
> 时间：2012-07-15T07:17:20.497
> 
> 标签：android, linux-kernel, root, tweak

我需要构建一个应用程序，使我能够使用自己的应用程序编辑 build.prop。这是为了优化 build.prop 中的一些值。当然，我可以使用具有 root 访问权限的文件管理器来编辑此文件。但我的问题是，我需要使用我创建的应用程序来编辑它，并让新手用户可以轻松地使用我的应用程序推荐的设置来编辑文件。请帮我弄清楚这一点。谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T07:39:57.373

像这样的东西应该工作。*代码尚未经过测试，可能需要进行一些更改*

**请求超级用户访问**

```
process = Runtime.getRuntime().exec("su");
os = new DataOutputStream(process.getOutputStream());
os.writeBytes("mount -o remount rw /system/\n"); 
os.writeBytes("exit\n");
os.flush();
process.waitFor();

File file=new File("/system/build.prop"); 
```

**读取文件**

```
FileInputStream fis = openFileInput("/system/build.prop");
String content = "";
byte[] input = new byte[fis.available()];
while (fis.read(input) != -1) {}
content += new String(input); 
```

**在这里编辑`String content`。**

**写文件**

```
DataOutputStream outstream= new DataOutputStream(new FileOutputStream(file,false));
String body = content;
outstream.write(body.getBytes());
outstream.close(); 
```

**请记住备份您的 build.prop，以防在编辑过程中出现问题。**

# mercurial - 如何将 Mercurial 差异输出转换为 HTML？

> ID：11490199
> 
> 赞同：2
> 
> 时间：2012-07-15T07:17:46.357
> 
> 标签：mercurial

有没有办法将 HTML 标签添加到 Hg diff 输出？目前，我们的开发团队每天都会通过电子邮件收到差异，我们希望提高它们的可读性，例如添加行突出显示和更改标题样式。我知道它可以通过特殊脚本在 SVN 中完成，但我似乎无法找到有关如何在 Hg 中执行此操作的说明。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:21:35.833

我从来没有使用过它，它只是来自谷歌搜索，但你可以试试这个：

[http://colorer.sourceforge.net/](http://colorer.sourceforge.net/)

```
hg diff | colorer -h > diff.html 
```

您可以在提交后将此命令的输出与挂钩结合起来。因此，在每次提交之后，mercurial 可以发送一封带有 HTML 差异的电子邮件。您只需[在 Mercurial 中设置挂钩](http://mercurial.selenic.com/wiki/Hook)的示例上方的行之间添加胶水。

# c# - 如何在现有行之后将新行添加到datagridview

> ID：11490207
> 
> 赞同：1
> 
> 时间：2012-07-15T07:20:13.097
> 
> 标签：c#, datagridview

在 c# 中，如何在`datagridview`现有行之后添加新行。

我试过`grdshedule.Rows.Add();` 但是所有行都在现有行之前添加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:54:07.807

确保datagridview 的**AllowUserToAddRows**属性为**False**。就像你以前以编程方式尝试过的一样；

```
datagridview.Rows.Add(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:24:46.590

在现有行之后或表末尾添加新行时，DataGridView 遇到了同样的问题。

在花了一些时间之后，我弄清楚了为什么我不能在表的末尾添加行。并不是 datagridview 有任何问题或限制，而是它确实在我的代码中。但是，datagridview 每次都会在表的末尾添加新行。

我真的希望您发布您的代码的某些部分，这将有助于为您提供答案。

无论如何，在我的程序中，我有一个从中创建对象列表的类。我的列表实际上是一个 ArrayList，我按照它们在列表中的相同顺序显示这些对象。每当我从列表中添加或删除对象时，它都会一对一地反映在 datagridview 上。换句话说，如果对象在 ArrayList 中以相反的顺序列出，那么这就是对象在 Datagridview 中显示的顺序。这并不意味着这些行被添加到您现有的行之上，尽管它看起来对我来说是这样的。

我的猜测是你有一个你在程序中维护的某种列表。此列表是您获取要在 datagridview 上显示的信息的位置。如果我这么说是正确的，那么您可能会根据您的 datagridview 上当前选择的行将您的项目插入程序中的某个位置。如果是这种情况，那么您当前的项目将被插入到您在 ArrayList 中所选项目的位置。这会导致您的列表将所有内容从 ArrayList 中的选定项目移一格。因此，当您在 datagridview 中显示项目列表时，看起来新行并未添加到表的末尾。

**要解决此问题，首先您需要添加一个新的空行：**

```
DGrid.Rows.Add; 
```

**然后，在列表的最后插入新项目：**

```
var newitem := new Object;
ArrayList.insert(DGrid.RowCount-1,newitem); 
```

然后，根据这个 ArrayList 更新你的 datagridview。现在，您的 datagridview 将按照您的预期运行。

在我修复之前，我的 datagridview 一直表现得好像它在顶部以相反的顺序插入新行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T07:24:33.410

```
grdshedule.Rows.Insert(grdshedule.Rows.Count-1, newRow); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T07:35:28.763

您的行没有自动排序，因此您看不到底部的新行，这意味着一旦您在添加新行后必须重新使用您的行

排序请举例[http://msdn.microsoft.com/en-us/library/0868ft3z.aspx](http://msdn.microsoft.com/en-us/library/0868ft3z.aspx)

```
**Line Taken from MSDN Remarks**
Rows in the control are not automatically sorted when new rows are added. 
```

请阅读 MSDN [http://msdn.microsoft.com/en-us/library/x0akdhcd.aspx的完整评论](http://msdn.microsoft.com/en-us/library/x0akdhcd.aspx)

# c++ - 内存访问违规的操作系统处理与内存写入违规的处理

> ID：11490219
> 
> 赞同：0
> 
> 时间：2012-07-15T07:22:12.540
> 
> 标签：c++, linux-kernel, access-violation

是否有可能，以及在什么条件下，Linux 内核会由于内存写入违规而终止程序的执行，而不是由于对同一内存位置的内存访问违规。

例如

```
//x is a pointer to a vector of structs
if( (*x)[i].member )
     break;                   //doesn't crash

if( (*x)[i].member )
    (*x)[i].member = 1;      //crashes, even though member is not used 
                             //elsewhere in the program 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:26:42.200

如果存储元素的页面被写保护，就会发生这种情况。允许读取，但不允许写入（如果尝试这样做，进程将被终止）。

如果您尝试修改存储在只读部分中的字符串，C 和 C++ 就会发生这种情况。

```
#include <stdio.h>
int main(void)
{
  char *foo = "hello";
  printf("%s\n", foo); // ok
  foo[0] = 'H';        // usually a crash
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T07:25:47.467

如果您的数组位于只读内存中（例如，定义为`const`或您将其底层内存类型更改为只读），那么您在尝试更改数组时可能会崩溃。

# xmpp - 主机未知 - XMPP Pidgin

> ID：11490220
> 
> 赞同：6
> 
> 时间：2012-07-15T07:22:20.747
> 
> 标签：xmpp, pidgin

我的网络上有两台机器。我在其中一台机器（机器 A）上安装了 ejabberd，在那里注册了两个用户。我在两台机器上都运行 Pidgin。我在机器 A 上登录 Pidgin，并且能够登录。当我尝试登录机器 B 上的第二个帐户时，我收到一条错误消息，提示主机未知。有人可以帮我吗？

（我检查了 ejabber 日志，可以看到机器 B 试图访问它）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T10:30:48.773

我能够解决这个问题。我将服务器的 IP 地址替换为域。因此，现在我将 localhost 放在那里，并将 IP 地址放在“高级”选项卡的“连接服务器”中。

# php - 根据使用 php 和 javascript 选择另一个动态下拉框来禁用下拉框

> ID：11490222
> 
> 赞同：1
> 
> 时间：2012-07-15T07:22:57.130
> 
> 标签：php, javascript, ajax, drop-down-menu

我在下拉框中有一个宽度列表。它们是动态的，因为每个产品都有不同的宽度，所以我设置了代码来查找最小值和最大值。然后它以 1" 为增量设置一个下拉列表。

宽度旁边是 1/8" 增量。例如，您可以选择 52 1/8。

如果最大宽度是 92 英寸，假设 1/8 增量下拉框应该消失或禁用，因为因为 92 是最大的......你不能选择 92 1/8。

如何使 1/8 框消失或禁用？这是我当前用于下拉框的代码的一部分。

```
<select name="width_str" id="width_str" onchange="doCalc();" style="width:50px;">
<option value="">--</option>
<?php
$counter = $minwidthRS - 1;
$start = $minwidthRS;

for($start; $start < $maxwidthRS + 1; $start++) {
$counter = $counter + 1;
echo "<option value=".$counter.">".$counter."</option>";
}
?>
</select> 
```

选择上面的 MAXIMUM 时，我想禁用或消失的 1/8 选择下拉框的代码。

```
<select name="widthfrac_str" id="widthfrac_str" onchange="doCalc();" style="width:50px;">
<option value="">--</option>
<option value="1/8">1/8</option>
<option value="1/4">1/4</option>    
<option value="3/8">3/8</option>
<option value="1/2">1/2</option>    
<option value="5/8">5/8</option>
<option value="3/4">3/4</option>    
<option value="7/8">7/8</option>
</select> 
```

我知道如何使用 AJAX 将选定的宽度值发送到 PHP 页面并在那里进行比较，但是我在成功回调中发回什么？我可以发送一些东西来告诉 1/8 测量下拉列表的容器禁用或消失吗？

非常感谢！如果您需要更多代码，请告诉我。doCalc() 脚本基本上使用 AJAX 并将宽度发送到 php 处理页面，以便立即更新价格。

**编辑（添加更多代码）：**

这是我脚本的一部分..

```
<script type="text/javascript">
function doCalc(){
var roomX = $('#room_str').val();
... lots of variables set here

$.post('db_query.php',
{roomX:roomX, etc. etc. etc.}, 
function(data) {
data = $.parseJSON(data);
$('#roomname-placeholder').html(data.roomname);
// ... lots of placeholders and code here
});
return false;
};
</script> 
```

不确定它是否有帮助，但我学到了一些关于使用回调来更改输入字段并用以下内容替换其值的知识： `$('input[name=x_login]').val(data.loginid);`

如果有这样的代码来简单地更改另一个下拉框禁用=禁用，那就太好了？那有意义吗？我还在学习编程术语！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:44:13.303

您可以使用 onchange()[调用另一个函数](https://stackoverflow.com/questions/3116879/add-multiple-function-onchange-from-javascript-to-the-same-input)，该函数应检查为第一个值选择的数字。如果是最大值，则切换功能以[隐藏](http://www.dustindiaz.com/seven-togglers/)第二个元素。一个更简洁的解决方案是在 doCalc 中包含“检查最大值并切换是否为真”。

请记住让 PHP 也检查该值，因为如果用户选择第二个值，然后选择第一个块的最大值，它应该隐藏第二个，但它的值可能仍会被发送。

编辑：

```
<script type="text/javascript">
function doCalc(){
var roomX = $('#room_str').val();
if (roomX == <?php echo $maxwidthRS; ?>)
  {
  document.getElementById('widthfrac_str').style.display = 'none';
  // You also need to make the second element's value 0 within those brackets
  }
... lots of variables set here

$.post('db_query.php',
{roomX:roomX, etc. etc. etc.}, 
function(data) {
data = $.parseJSON(data);
$('#roomname-placeholder').html(data.roomname);
// ... lots of placeholders and code here
});
return false;
};
</script> 
```

如果将 php 放在 .php 文件中，则将 php 放在 javascript 中没有问题。它按照评论中的OP所述工作，太棒了！

# python - 输入链接没有适当形式时的异常处理

> ID：11490228
> 
> 赞同：0
> 
> 时间：2012-07-15T07:24:13.793
> 
> 标签：python, xml, exception-handling, beautifulsoup

例如，我有一个这样的链接列表：

```
linklists = ['www.right1.com', www.right2.com', 'www.wrong.com', 'www.right3.com'] 
```

而right1,right2,right3各自的html格式为：

```
<html>
<p>
hi
</p>
<strong>
hello
</strong>
</html> 
```

www.wrong.com html的形式是（实际的html要复杂得多）：

```
<html>
<p>
hi
</p>
</html> 
```

我正在使用这样的代码：

```
from BeautifulSoup import BeautifulSoup
stronglist=[]
for httplink in linklists:  
    url = httplink
    page = urllib2.urlopen(url)
        html = page.read()
        soup = BeautifulSoup(html)
    findstrong = soup.findAll("strong")
    findstrong = str(findstrong)
    findstrong = re.sub(r'\[|\]|\s*<[^>]*>\s*', '', findstrong)        #remove tag
    stronglist.append(findstrong) 
```

我想做的是：

1.  从列表中获取 html 链接`'linklists'`

2.  之间查找数据`<strong>`

3.  将它们添加到列表中`'stronglist'`

但问题是：有一个错误的链接 ( `www.wrong.com`) 没有 . 然后代码说错误...

我想要的是一个异常处理（或其他东西），如果链接没有“强”字段（它有错误），我希望代码将字符串“空”添加到强列表中，因为它无法获取来自链接的数据。

我一直在使用 'if 来解决这个问题，但这对我来说有点难

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:54:11.973

无需使用异常处理。只需确定 findAll 方法何时返回一个空列表并处理它。

```
from BeautifulSoup import BeautifulSoup
strong_list=[]
for url in link_list:  
    soup = BeautifulSoup(urllib2.urlopen(url).read())
    strong_tags = soup.findAll("strong")
    if not strong_tags:
        strong_list.append('null')
        continue
    for strong_tag in strong_tags:
        strong_list.append(strong_tag.text) 
```

# android - Android：XML解析：org.w3c.dom.DOMException：只允许一个根元素

> ID：11490231
> 
> 赞同：2
> 
> 时间：2012-07-15T07:24:48.403
> 
> 标签：android, xml-parsing, domexception

我正在尝试解析一个 xml 文件。但我收到此错误：org.w3c.dom.DOMException：该行仅允许一个根元素：

```
 Document doc = dBuilder.parse(getAssets().open("myfile.xml")); 
```

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T07:28:05.567

您必须只有一个根，这意味着您必须只有一个围绕所有标签的标签。例如，您可以通过`<root></root>`

此外，尝试使用 xml 验证器验证您的 xml 文件，以查看您的 xml 是否格式错误。

# list - 如何在 Matlab 中循环浏览股票代码列表？

> ID：11490235
> 
> 赞同：0
> 
> 时间：2012-07-15T07:25:25.240
> 
> 标签：list, matlab, loops, for-loop, stocks

这是我正在尝试使用的当前代码，以便循环通过代码的“列表”来加载相应的文件。但是，Matlab 似乎不喜欢接受单独的字符串。我不太确定 Matlab 是如何工作的。但是，很明显它不像 Python 那样容易处理文本。

```
 Stocks = {'JPM','KO','GOOG','PG'};
    for Stock = Stocks;
        stockData.(Stock) = load(Stock '.csv');
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:33:01.150

您的语法无效。我不知道是什么`stockData`，也不知道你想给它分配什么，但这里有一个循环遍历单元格数组`Stocks`并依次加载每个文件：

```
Stocks = {'JPM','KO','GOOG','PG'};
for i = 1:length(Stocks);
    load([Stocks{i}, '.csv'])
end 
```

你可以从这里继续前进。

# android - 跨多项活动的 Android 全面防故障音乐服务

> ID：11490236
> 
> 赞同：25
> 
> 时间：2012-07-15T07:25:26.693
> 
> 标签：android, service, background, andengine, playback

我知道这个问题之前已经被问过很多次，并且可能看起来是几个问题的集合，但我觉得它对许多开发人员来说是相关和重要的；我需要`Service`为我的 Android 游戏创建一个可以跨多个活动运行的背景音乐，该音乐在应用程序终止时结束并在以下所有情况下暂停：

1.  一个`Activity`有自己的音乐的人开始了。（`Activity`完成后继续。这恰好是一个`AndEngine`活动。）
2.  按下主屏幕并且应用程序在后台运行，或者应用程序被终止。当应用程序返回前台时恢复。需要使用[`onUserLeaveHint()`](https://stackoverflow.com/questions/6612058/android-onbackpressed-onuserleavehint). [另一个有用的链接。](https://stackoverflow.com/questions/2208912/how-can-i-detect-user-pressing-home-key-in-my-activity)
3.  手机接听电话并中断应用程序。呼叫处理完毕后恢复。需要使用`TelephonyManager`类似[this](https://stackoverflow.com/questions/7121508/android-taking-complete-control-of-phone-is-it-possible-how)。
4.  屏幕被锁定。（解锁屏幕后恢复。） 需要使用，[这](https://stackoverflow.com/questions/3446202/android-detect-phone-unlock-event-not-screen-on)[`ACTION_USER_PRESENT`](http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_PRESENT)似乎[很](https://stackoverflow.com/questions/7853494/action-user-present-in-manifest-with-broadcastreceiver) [成问题](https://stackoverflow.com/questions/3601014/can-an-action-user-present-broadcastreceiver-not-be-registered-in-the-manifest)。
5.  基本上，只要未显示应用程序或向用户显示来自#1 的特殊活动，音乐就会暂停。

以上是我需要的所有内容以及我拼凑的信息。***我当前的代码基本上类似于[this](https://stackoverflow.com/questions/11489889/mediaplay-in-android-musicservices-crashes-when-calling-mediaplayer-pause)。***

我觉得很好奇`AndEngine`他们的音乐没有这些问题，所以也许查看源代码会帮助人们寻找答案。我正在使用[来自 Google Code 的最后一个功能 GLES1 版本](http://code.google.com/p/andengine/)。

我还查看了以下链接以创建好音乐`Service`：

*   [停止后台服务音乐](https://stackoverflow.com/questions/7620758/stopping-background-service-music)
*   [http://www.codeproject.com/Articles/258176/Adding-Background-Music-to-Android-App](http://www.codeproject.com/Articles/258176/Adding-Background-Music-to-Android-App)
*   [安卓背景音乐服务](https://stackoverflow.com/questions/8209858/android-background-music-service)
*   [在 Android 中跨活动播放 BG 音乐](https://stackoverflow.com/questions/2097909/playing-bg-music-across-activities-in-android)
*   [http://www.rbgrn.net/content/307-light-racer-20-days-61-64-completion](http://www.rbgrn.net/content/307-light-racer-20-days-61-64-completion)

我希望解决方案`Service`：

*   如果可能，尽量减少使用`BroadcastReceivers`Android Manifest 添加/权限
*   自包含和错误检查

其他注意事项

*   目前所有需要背景音乐的活动都扩展了一个通用的特殊类。
*   音乐需要循环播放，但只运行一首曲目。

提前感谢大家！祝你好运！

编辑 - 以下是代码片段，请随时改进或忽略：

*媒体播放器包装*

```
import android.content.SharedPreferences;
import android.media.MediaPlayer;
import android.preference.PreferenceManager;
import android.util.Log;

public class CarefulMediaPlayer {
    final SharedPreferences sp;
    final MediaPlayer mp;
    private boolean isPlaying = false;

    public CarefulMediaPlayer(final MediaPlayer mp, final MusicService ms) {
        sp = PreferenceManager.getDefaultSharedPreferences(ms.getApplicationContext());
        this.mp = mp;
    }

    public void start() {
        if (sp.getBoolean("com.embed.candy.music", true) && !isPlaying) {
            mp.start();
            isPlaying = true;
        }
    }

    public void pause() {
        if (isPlaying) {
            mp.pause();
            isPlaying = false;
        }
    }

    public void stop() {
        isPlaying = false;
        try {
            mp.stop();
            mp.release();
        } catch (final Exception e) {}
    }
} 
```

*音乐服务*

```
import android.app.Service;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.IBinder;

public class MusicService extends Service {
    static CarefulMediaPlayer mPlayer = null;

    @Override
    public IBinder onBind(final Intent arg0) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        final MediaPlayer mp = MediaPlayer.create(this, R.raw.title_music);
        mp.setLooping(true);
        mPlayer = new CarefulMediaPlayer(mp,this);
    }

    @Override
    public int onStartCommand(final Intent intent, final int flags, final int startId) {
        mPlayer.start();
        return 1;
    }

    @Override
    public void onStart(final Intent intent, final int startId) {

    }

    public IBinder onUnBind(final Intent arg0) {
        return null;
    }

    public static void onStop() {
        mPlayer.stop();
    }

    public static void onPause() {
        if (mPlayer!=null) {
            mPlayer.pause();
        }
    }

    public static void onResume() {
        if (mPlayer!=null) {
            mPlayer.start();
        }
    }

    @Override
    public void onDestroy() {
        mPlayer.stop();
        mPlayer = null;
    }

    @Override
    public void onLowMemory() {

    }
} 
```

*改进的基础活动类*

```
import android.app.Activity;
import android.content.Intent;
import android.os.PowerManager;
import android.telephony.TelephonyManager;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.ImageView;

public abstract class BetterActivity extends Activity {

    private boolean isHome = true;

    @Override
    protected void onResume() {
        System.gc();
        super.onResume();
        MusicService.onResume();
        isHome = true;
    }

    @Override
    protected void onPause() {
        if (((TelephonyManager)getSystemService(TELEPHONY_SERVICE)).getCallState()==TelephonyManager.CALL_STATE_RINGING
                || !((PowerManager)getSystemService(POWER_SERVICE)).isScreenOn()) {
            MusicService.onPause();
        }
        super.onPause();
        System.gc();
    }

    @Override
    public boolean onKeyDown (final int keyCode, final KeyEvent ke) {
        switch (keyCode) {
        case KeyEvent.KEYCODE_BACK:
            isHome = false;
        default:
            return super.onKeyDown(keyCode, ke);
        }
    }

    @Override
    public void startActivity(final Intent i) {
        isHome = false;
        super.startActivity(i);
    }

    @Override
    protected void onUserLeaveHint() {
        if (isHome) {
            MusicService.onPause();
        }
        super.onUserLeaveHint();
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T08:40:30.547

首先这里是一些代码。下面我给大家解释一下。

```
public class MusicService extends Service {

    // service binder
    private final IBinder mBinder = new LocalBinder();

    // music player controling game music
    private static CarefulMediaPlayer mPlayer = null;

    @Override
    public void onCreate() {
        // load music file and create player
        MediaPlayer mediaPlayer = MediaPlayer.create(this, R.raw.title_music);
        mediaPlayer.setLooping(true);
        mPlayer = new CarefulMediaPlayer(mediaPlayer, this);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    // =========================
    // Player methods
    // =========================
    public void musicStart() {
        mPlayer.start();
    }

    public void musicStop() {
        mPlayer.stop();
    }

    public void musicPause() {
        mPlayer.pause();
    }

    /**
     * Class for clients to access. Because we know this service always runs in
     * the same process as its clients, we don't need to deal with IPC.
     */
    public class LocalBinder extends Binder {
        MusicService getService() {
            return MusicService.this;
        }
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return mBinder;
    }

} 
```

活动：

```
public class StartupActivity extends Activity {

// bounded service
private static MusicService mBoundService;

// whetere service is bounded or not
private boolean mIsBound;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_startup);
    doBindService();

    // HOW TO WORK WITH THE SERVICE:
    // call the following methods whenever
    // you want to interact with you 
    // music player
    // ===================================

    // call this e.g. in onPause() of your Activities
    StartupActivity.getService().musicPause();

    // call this e.g. in onStop() of your Activities
    StartupActivity.getService().musicStop();

    // call this e.g. in onResume() of your Activities
    StartupActivity.getService().musicStart();
}

@Override
public void onDestroy() {
    super.onDestroy();
    doUnbindService();
}

private final ServiceConnection mServiceConnection = new ServiceConnection() {

    @Override
    public void onServiceConnected(ComponentName className, IBinder service) {
        setService(((MusicService.LocalBinder) service).getService());
    }

    @Override
    public void onServiceDisconnected(ComponentName className) {
        setService(null);
    }
};

private void doBindService() {
    Intent service = new Intent(getBaseContext(), MusicService.class);
    // start service and bound it
    startService(service);
    bindService(new Intent(this, MusicService.class), mServiceConnection, Context.BIND_AUTO_CREATE);
    mIsBound = true;
}

private void doUnbindService() {
    if (mIsBound) {
        // Detach existing connection.
        unbindService(mServiceConnection);
        mIsBound = false;
    }
}

public static MusicService getService() {
    return mBoundService;
}

private static void setService(MusicService mBoundService) {
    StartupActivity.mBoundService = mBoundService;
}
} 
```

首先，您有一个在后台运行的服务。该服务会像您一样创建 mediaPlayer 对象。使用 localBinder，您可以在 Activity(ies) 中绑定服务并像普通 Java 对象一样访问它。我发布的活动绑定了服务。在它的 onCreate() 方法中，您可以找到一种如何与您的 mediaPlayer 交互的方法。您可以将任何活动绑定到您的服务。

另一个解决方案：

```
public class CarefulMediaPlayer {
final SharedPreferences sp;
final MediaPlayer mp;
private boolean isPlaying = false;
private static CarefulMediaPlayer instance;

public CarefulMediaPlayer(final MediaPlayer mp, final MusicService ms) {
    sp = PreferenceManager.getDefaultSharedPreferences(ms.getApplicationContext());
    this.mp = mp;
    instance = this;
}

public static CarefulMediaPlayer getInstance() {
    return instance;
}

public void start() {
    if (sp.getBoolean("com.embed.candy.music", true) && !isPlaying) {
        mp.start();
        isPlaying = true;
    }
}

public void pause() {
    if (isPlaying) {
        mp.pause();
        isPlaying = false;
    }
}

public void stop() {
    isPlaying = false;
    try {
        mp.stop();
        mp.release();
    } catch (final Exception e) {}
}
} 
```

然后你可以通过调用 CarefulMediaPlayer.getInstance().play(); 来暂停、播放和停止音乐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-23T19:55:41.827

我这样做了，我对结果很满意：

**第一次创建服务：**

```
public class LocalService extends Service
{
    // This is the object that receives interactions from clients. See RemoteService for a more complete example.
    private final IBinder mBinder = new LocalBinder();
    private MediaPlayer player;

    /**
     * Class for clients to access. Because we know this service always runs in
     * the same process as its clients, we don't need to deal with IPC.
     */
    public class LocalBinder extends Binder
    {
        LocalService getService()
        {
            return LocalService.this;
        }
    }

    @Override
    public void onCreate()
    {

    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId)
    {
        // We want this service to continue running until it is explicitly stopped, so return sticky.
        return START_STICKY;
    }

    @Override
    public void onDestroy()
    {
        destroy();
    }

    @Override
    public IBinder onBind(Intent intent)
    {
        return mBinder;
    }

    public void play(int res)
    {
        try
        {
            player = MediaPlayer.create(this, res);
            player.setLooping(true);
            player.setVolume(0.1f, 0.1f);
            player.start();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    public void pause()
    {
        if(null != player && player.isPlaying())
        {
            player.pause();
            player.seekTo(0);
        }
    }

    public void resume()
    {
        try
        {
            if(null != player && !player.isPlaying())
            {
                player.start();
            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    public void destroy()
    {
        if(null != player)
        {
            if(player.isPlaying())
            {
                player.stop();
            }

            player.release();
            player = null;
        }
    }

} 
```

**2**，创建一个基础活动，并在你希望从中播放背景音乐的女巫中扩展你的所有活动：

```
public class ActivityBase extends Activity
{
    private Context context = ActivityBase.this;
    private final int [] background_sound = { R.raw.azilum_2, R.raw.bg_sound_5 };
    private LocalService mBoundService;
    private boolean mIsBound = false;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        doBindService();
    }

    @Override
    protected void onStart()
    {
        super.onStart();

        try
        {
            if(null != mBoundService)
            {
                Random rand = new Random();
                int what = background_sound[rand.nextInt(background_sound.length)];
                mBoundService.play(what);
            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    @Override
    protected void onStop()
    {
        super.onStop();
        basePause();
    }

    protected void baseResume()
    {
        try
        {
            if(null != mBoundService)
            {
                mBoundService.resume();
            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    protected void basePause()
    {
        try
        {
            if(null != mBoundService)
            {
                mBoundService.pause();
            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    private ServiceConnection mConnection = new ServiceConnection()
    {
        public void onServiceConnected(ComponentName className, IBinder service)
        {
            // This is called when the connection with the service has been
            // established, giving us the service object we can use to
            // interact with the service. Because we have bound to a explicit
            // service that we know is running in our own process, we can
            // cast its IBinder to a concrete class and directly access it.
            mBoundService = ((LocalService.LocalBinder) service).getService();

            if(null != mBoundService)
            {
                Random rand = new Random();
                int what = background_sound[rand.nextInt(background_sound.length)];
                mBoundService.play(what);
            }
        }

        public void onServiceDisconnected(ComponentName className)
        {
            // This is called when the connection with the service has been
            // unexpectedly disconnected -- that is, its process crashed.
            // Because it is running in our same process, we should never
            // see this happen.
            mBoundService = null;

            if(null != mBoundService)
            {
                mBoundService.destroy();
            }
        }
    };

    private void doBindService()
    {
        // Establish a connection with the service. We use an explicit
        // class name because we want a specific service implementation that
        // we know will be running in our own process (and thus won't be
        // supporting component replacement by other applications).

        Intent i = new Intent(getApplicationContext(), LocalService.class);
        bindService(i, mConnection, Context.BIND_AUTO_CREATE);
        mIsBound = true;
    }

    private void doUnbindService()
    {
        if (mIsBound)
        {
            // Detach our existing connection.
            unbindService(mConnection);
            mIsBound = false;
        }
    }

    @Override
    protected void onDestroy()
    {
        super.onDestroy();
        doUnbindService();
    }
} 
```

就是这样，现在您在从 ActivityBase 扩展的所有活动中都有背景声音。

您甚至可以通过调用 basePause()/baseResume() 来控制暂停/恢复功能。

不要忘记在清单中声明服务：

```
<service android:name="com.gga.screaming.speech.LocalService" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T18:18:55.203

在启动活动中，我们分别绑定和启动服务。这是错误的，因为服务将在活动退出后继续运行，因为我们没有在任何地方调用**stopService()**。所以部分' startService(service) '应该被删除，因为绑定服务已经是“**自动创建**”服务了。

如果有人得到相反的结果，请纠正我

```
startService(service);// remove this part
bindService(new Intent(this, MusicService.class), mServiceConnection, Context.BIND_AUTO_CREATE); 
```

# azure - 如何在不使用公共 IP 的情况下将 Azure Worker/Web 角色连接到 Azure Iaas VM？

> ID：11490238
> 
> 赞同：4
> 
> 时间：2012-07-15T07:25:37.097
> 
> 标签：azure, azure-web-roles, azure-worker-roles, azure-virtual-machine

我们希望在 Azure Iaas VM 上运行 MongoDB 和一些自定义服务，并使用我们的角色连接到它们，但我们不希望在 VM 上公开 IP。

如果可能的话，最好的方法是什么？

如果不可能，这在路线图上吗？

我们可以将虚拟机添加到同一个云服务下，它们可以愉快地通信，角色在同一个部署中，所以它们可以通信，但是虚拟机和角色之间存在问题。我们感谢 Iaas 的东西仍处于预览阶段。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T19:56:48.763

如果您在同一个 DC 中拥有 Windows Azure Web/Worker 角色和 Windows Azure 虚拟机，则可以使用内部 IP 地址通过内部端点使用虚拟网络 (Vnet) 直接访问它们。要首先实现它，您需要创建一个虚拟网络，然后将您的虚拟机添加到此 VNet。VNet 将提供您的内部 IP 地址，并且您的 Web/工作者角色可以与此内部 IP 地址进行通信。

您不能直接从 Windows Azure 预览门户进行混合模式部署（预览版尚不支持），但是您可以使用 PowerShell VNet cmdlet 对其进行配置和工作。如需 VNet 团队的进一步帮助，您可以[在此处](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesVirtualNetwork/threads)直接与他们联系。

# java - 为什么意图中的字符串不能在“if 子句”中使用？

> ID：11490239
> 
> 赞同：-1
> 
> 时间：2012-07-15T07:25:45.280
> 
> 标签：java, android, string, android-intent

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我有 2 节课，比如说 a.class 和 b.class

我想在 a.class 中使用意图将数组从 a 发送到 b

```
Intent intent = new Intent(this,b.class);
intent.putExtra("stringtext", "1");
startActivity(intent); 
```

在 b.class 我用这个捕捉意图值

```
Intent it = getIntent();
String id = it.getStringExtra("stringtext"); 
```

当我尝试打印 id 时，它给了我“1”但是当我在 if 子句中使用 id 时我没有工作，我试试这个

```
if(id=="1")
{
 teks.setText("its one");
}
else
{
 teks.setText("not one";
} 
```

怎么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T07:26:15.100

使用`equals()`方法比较字符串，`==`比较参考`Object`

做了

```
if("1".equals(id))
{
  teks.setText("its one");
} 
```

* * *

**看**

*   [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)
*   [采访：Java等于](https://stackoverflow.com/questions/5712100/interview-java-equals/)

# java - Java 临时迭代器正在减慢我的 Android 游戏

> ID：11490240
> 
> 赞同：12
> 
> 时间：2012-07-15T07:25:46.900
> 
> 标签：java, android, performance, memory-management

由于性能原因，这个问题涉及 Java 中的内存管理：因为我正在将此程序开发为 Android 游戏，而内存 GC 会扼杀我的性能。所以到目前为止我已经做了很多工作，结果证明我在优化游戏的内存使用方面做得很好，但是我有一个问题：迭代器！

这是我正在做的事情：

1.  开始游戏关卡。
2.  启动分配跟踪器（这样一来，只要关卡运行，我们就会忽略所有将保留的分配；我有很多对象只在关卡开始时创建一次，它们不是问题）。
3.  在关卡中做一些事情并获得分配。

我的分配充满了这个：

> 466 24 java.util.AbstractList$SimpleListIterator 12 java.util.AbstractList 迭代器
> 465 24 java.util.AbstractList$SimpleListIterator 12 java.util.AbstractList 迭代器
> 464 24 java.util.AbstractList$SimpleListIterator 12 java.util.AbstractList 迭代器
> 463 24 java.util.AbstractList$SimpleListIterator 12 java.util.AbstractList 迭代器
> 461 24 java.util.AbstractList$SimpleListIterator 12 java.util.AbstractList 迭代器
> 456 24 java.util.ArrayList$ArrayListIterator 12 java.util.ArrayList 迭代器
> 454 24 java.util.AbstractList util.ArrayList$ArrayListIterator 12 java.util.ArrayList 迭代器
> 453 24 java.util.ArrayList$ArrayListIterator 12 java.util.ArrayList 迭代器
> 452 24 java.util.ArrayList$ArrayListIterator 12 java.util.ArrayList 迭代器

所以我的游戏运行时唯一分配的对象是迭代器！好的，现在修复它......是什么代码导致了我问的问题......这里是：

```
for (Segment side : listOfSides.getSides()) {
    // do stuff
} 
```

是的，事实证明 for-each 语法在后台调用迭代器来填充每个元素。这是完全合理的，也正是我期望它做的，但我没有意识到它会如此可怕地建立起来并导致游戏性能问题。如果我能摆脱这个问题，那么无论在什么手机上，它都会让我的游戏像闪电一样运行。所以我的问题是：你会怎么做才能使所有这些临时迭代器都没有被创建然后立即被丢弃，从而导致讨厌的 GC 运行？这样做的好处不会使我的代码变得完全丑陋！（并且不能在 Android 上使用 ndk）

PS 我在想，对于我所有的 ArrayList，我可以开始使用 get(int i) 函数，因为它们是幕后的数组，而我将用来索引的整数将被放置在堆栈上而不是堆上。但是对于像 HashMap 和 LinkedList 这样的其他对象，我不确定该怎么做。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-15T07:41:31.527

ArrayList 和 LinkedList 让您可以使用 get(int i) 遍历元素（注意 LinkedList 可能会很慢，我不知道 get() 是如何实现的。）这是避免分配迭代器的推荐方法。如果您查看平台的源代码，您会注意到我们尽量避免使用 for-each 语法。

对于 HashMap，您可以使用 entrySet() 获取底层集合，然后调用 toArray(Object[]) 并传递一个足够大以容纳所有值的预分配数组。或者，看看您是否可以使用 Android 提供的各种 SparseArray 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T07:40:36.447

鉴于您放置的约束，唯一的解决方案是使用索引和一个`ArrayList`或一个数组。对于`LinkedList`and `HashMap`，我认为没有一种实用的替代方案可以避免任何分配。

但是GC*真的*那么慢，真的需要像这样去微优化到极致吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T03:35:40.573

当您将 foreach 循环与 Lists 一起使用时，它总是会获取迭代器。只有两种方法可以让它不分配内存；两者都涉及丑化你的代码：

*   在原始数组而不是 List 上使用它（最简单的方法）。

*   在其 iterator() 函数不分配内存的 List 或其他 Iterable 上使用它。这有点硬核，可能不值得，但在我真的想优化循环的情况下我已经这样做了。我是这样做的：

    1.  创建自己的实现 Iterable 的容器类。（foreach 循环适用于任何实现 Iterable 的东西，即使它不是 List 的子类。）
    2.  使该类在通过 iterator() 函数返回迭代器时不分配内存。您可以通过拥有一个迭代器池、抓取一个并重置其值来做到这一点。您可能需要一个池而不是仅仅重用一个池，因为您的某些代码可能有多个嵌套循环迭代同一个集合。
    3.  花几个小时调试上述丑陋的解决方案。总而言之，在大多数情况下它是不值得的。

# c++ - vector::erase 和 reverse_iterator

> ID：11490242
> 
> 赞同：8
> 
> 时间：2012-07-15T07:25:55.193
> 
> 标签：c++, stl, vector, iterator

我在 std::vector 中有一组元素，这些元素从第一个元素开始按降序排序。我必须使用向量，因为我需要将元素放在连续的内存块中。而且我有一个集合，其中包含许多具有所描述特征的向量实例（始终按降序排序）。

现在，有时，当我发现更大的集合（包含这些向量的集合）中有太多元素时，我会以类似于以下伪代码的方式丢弃这些向量中的最小元素：

```
grand_collection: collection that holds these vectors
T: type argument of my vector
C: the type that is a member of T, that participates in the < comparison (this is what sorts data before they hit any of the vectors).

std::map<C, std::pair<T::const_reverse_iterator, std::vector<T>&>> what_to_delete;
iterate(it = grand_collection.begin() -> grand_collection.end())
{
     iterate(vect_rit = it->rbegin() -> it->rend())
     {
         // ...
          what_to_delete <- (vect_rit->C, pair(vect_rit, *it))
          if (what_to_delete.size() > threshold)
               what_to_delete.erase(what_to_delete.begin());
         // ...  
     }
} 
```

现在，在运行此代码之后，`what_to_delete`我有一组迭代器指向我想从这些向量中删除的原始向量（整体最小值）。请记住，原始向量在遇到此代码之前已排序，这意味着对于任何`what_to_delete[0 - n]`情况，位置上的迭代器都不会指向比, where`n - m`更远离同一向量开头的元素。`n``m > 0`

从原始向量中擦除元素时，我必须将 reverse_iterator 转换为迭代器。为此，我依赖 C++11 的 §24.4.1/1：

> reverse_iterator和iterator的关系是&*(reverse_iterator(i)) == &*(i- 1)

这意味着要删除 a `vect_rit`，我使用：

```
vector.erase(--vect_rit.base()); 
```

现在，根据 C++11 标准`§23.3.6.5/3`：

> 迭代器擦除（const_iterator 位置）；效果：在擦除点或擦除点之后使迭代器和引用无效。

这如何与 reverse_iterators 一起使用？`vector[0]`reverse_iterators是否在内部通过引用向量的真实开始（或者 reverse_iterator 是否使用 rbegin() （即`vector[vector.size()]`）作为参考点并删除任何远离向量 0-index 的内容仍然会使我的反向迭代器无效？

**编辑：**

看起来 reverse_iterator 使用 rbegin() 作为其参考点。以我描述的方式擦除元素在删除第一个元素后给了我关于不可引用迭代器的错误。`const_iterator`而在插入时存储经典迭代器（转换为）时可以`what_to_delete`正常工作。

现在，为了将来参考，标准是否指定了在随机访问 reverse_iterator 的情况下应该将什么视为参考点？或者这是一个实现细节？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T08:01:18.987

从标准的角度来看（我承认，我不是该标准的专家）：来自 §24.5.1.1：

```
namespace std {
    template <class Iterator>
    class reverse_iterator ...
    {
        ...
            Iterator base() const; // explicit
        ...
        protected:
            Iterator current;
        ...
    };
} 
```

从 §24.5.1.3.3 开始：

```
Iterator base() const; // explicit
    Returns: current. 
```

因此，在我看来，只要您在您的某个s 指向的内容`vector`之前不删除任何内容，就应该保持有效。`reverse_iterator``reverse_iterator`

当然，根据您的描述，有一个问题：如果您的向量中有两个连续的元素最终想要删除，那么您的`vector.erase(--vector_rit.base())`意思是您已经使`reverse_iterator`指向前一个元素的“指向”无效，并且所以你的下一个`vector.erase(...)`是未定义的行为。

以防万一这很清楚，让我换一种说法：

```
std::vector<T> v=...;
...
// it_1 and it_2 are contiguous
std::vector<T>::reverse_iterator it_1=v.rend();
std::vector<T>::reverse_iterator it_2=it_1;
--it_2;

// Erase everything after it_1's pointee:

// convert from reverse_iterator to iterator
std::vector<T>::iterator tmp_it=it_1.base();

// but that points one too far in, so decrement;
--tmp_it;

// of course, now tmp_it points at it_2's base:
assert(tmp_it == it_2.base());

// perform erasure
v.erase(tmp_it);  // invalidates all iterators pointing at or past *tmp_it
                  // (like, say it_2.base()...)

// now delete it_2's pointee:
std::vector<T>::iterator tmp_it_2=it_2.base(); // note, invalid iterator!

// undefined behavior:
--tmp_it_2;
v.erase(tmp_it_2); 
```

* * *

在实践中，我怀疑你会遇到两种可能的实现：更常见的是，底层`iterator`只是一个（适当包装的）原始指针，所以一切都会很愉快地工作。不太常见的是，迭代器实际上可能会尝试跟踪失效/执行边界检查（在调试模式下编译时 Dinkumware STL 没有做过这样的事情吗？），并且可能会对你大喊大叫。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T09:21:56.237

在问题中，您已经准确引用了标准所说的 a`reverse_iterator`是：

> reverse_iterator和iterator的关系是&*(reverse_iterator(i)) == &*(i- 1)

请记住，a只是底层迭代器 ( )`reverse_iterator`之上的“适配器” 。`reverse_iterator::current`正如你所说，'参考点'`reverse_iterator`是包装的迭代器，`current`. 上的所有操作`reverse_iterator`实际上都发生在该底层迭代器上。您可以使用该函数获取该迭代器`reverse_iterator::base()`。

如果你擦除`--vect_rit.base()`，你实际上是在擦除`--current`，所以`current`会失效。

作为旁注，表达式`--vect_rit.base()`可能并不总是编译。如果迭代器实际上只是一个原始指针（可能是 a 的情况`vector`），则`vect_rit.base()`返回一个右值（C++11 术语中的纯右值），因此预减运算符不会对其起作用，因为该运算符需要一个可修改的左值。请参阅 Scott Meyers 的“Effective STL”中的“第 28 项：了解如何使用 a`reverse_iterator`的基数`iterator`”。（该项目的早期版本可以在[http://www.drdobbs.com/three-guidelines-for-effective-iterator/184401406](http://www.drdobbs.com/three-guidelines-for-effective-iterator/184401406)的“指南 3”中在线找到）。

您可以使用更丑陋的表达式`(++vect_rit).base()`, 来避免该问题。或者因为您正在处理向量和随机访问迭代器：`vect_rit.base() - 1`

无论哪种方式，`vect_rit`都被擦除无效，因为`vect_rit.current`无效。

但是，请记住，它会`vector::erase()`返回一个有效的迭代器，指向刚刚被擦除的元素的新位置。您可以使用它来“重新同步” `vect_rit`：

```
vect_rit = vector_type::reverse_iterator( vector.erase(vect_rit.base() - 1)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T09:09:03.887

`reverse_iterator`就像 normal 一样`iterator`，指向向量中的某个位置。实现细节无关紧要，但如果您必须知道，它们（在典型实现中）都只是内部的普通旧指针。不同的是方向。反向迭代器`+`与`-`常规迭代器（以及`++`and `--`，`>`等等`<`）相反。

这很有趣，但并不意味着对主要问题的回答。

如果您仔细阅读该语言，它会说：

> 在擦除点或之后使迭代器*和引用无效。*

引用没有内置的方向感。因此，语言显然是指容器自身的方向感。擦除点之后的位置是具有较高索引的位置。因此，迭代器的方向在这里是无关紧要的。

# objective-c - 隐藏或显示表格视图

> ID：11490244
> 
> 赞同：1
> 
> 时间：2012-07-15T07:26:08.043
> 
> 标签：objective-c, xcode, cocoa-touch, uitableview

假设我在它下面有一个开关和一个小表格视图（无滚动）。`bool switchState`我知道是否使用在开关的操作方法中更改其值的开关打开/关闭：

```
-(IBAction)switchSlide:(id)sender{
    if (toggleSwitch.on == YES) {
        switchState = YES;
    }
    else{ 
        switchState = NO;
    }
} 
```

现在我想要的是它下面的表格视图应该在`switchState == NO`. 我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:32:24.300

每个`UIView`人都有一个属性`hidden`：

```
@property(nonatomic, getter=isHidden) BOOL hidden 
```

因为 a`UITableView`是你的子阶级，`UIView`你也可以使用 a 的方法`UIView`。
因此，您的代码只需要稍作调整（假设您`IBAction`在 a中调用它`UITableViewController`）：

```
-(IBAction)switchSlide:(id)sender{
    if (toggleSwitch.on == YES) {
        switchState = YES;
        self.tableView.hidden = NO;
    }
    else{ 
        switchState = NO;
        self.tableView.hidden = YES;
    }
} 
```

**编辑：**

通过聊天解决了这个问题，解决方案是：因为你使用了 a`UIViewController` 你必须为`UITableView`. 合成它并通过从文件所有者拖动到`UITableView`界面构建器中来连接出口。现在你可以使用上面的代码了。

# c# - 使用实体框架 4 执行自定义 sql，包括复杂的选择连接

> ID：11490249
> 
> 赞同：0
> 
> 时间：2012-07-15T07:26:45.153
> 
> 标签：c#, entity-framework

我的应用程序当前使用 ado.net 访问数据库。

它允许用户通过传递自定义 sql 来配置仪表板。自定义 sql 包括多个表的连接，并且每个表的列都包含在结果中。

我们正在从 ado.net 迁移到实体框架 4。

如何使用实体框架执行相同的查询？

此外，应用程序中的其他代码需要在数据库上触发自定义复杂连接查询。这是由开发人员完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:58:35.370

是的，您可以使用内联查询，甚至可以在实体框架中存储过程

请参阅查询示例[http://msdn.microsoft.com/en-us/library/bb738451](http://msdn.microsoft.com/en-us/library/bb738451)

请参阅存储过程示例[http://msdn.microsoft.com/en-us/library/bb896334.aspx](http://msdn.microsoft.com/en-us/library/bb896334.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:24:05.663

如果您有动态查询，则无法通过 EF 执行它们。EF 以强类型方式工作，因此它希望您在设计时创建具有正确属性（具有正确类型）的类型（您也可以在运行时创建类型，但它需要您创建动态程序集、发出 IL 等） .

对此类查询使用您的旧方法。

# sqlite - SQLite 是否校验其数据？

> ID：11490250
> 
> 赞同：3
> 
> 时间：2012-07-15T07:26:48.300
> 
> 标签：sqlite

硬盘位腐烂[确实发生](http://www.linux-mag.com/id/8794/)。我将 SQLite 用于具有相当关键数据的项目。显然，我会定期备份数据库，但**SQLite 会校验其数据吗？**

我已经阅读了关于[PRAGMA 完整性](http://www.sqlite.org/pragma.html#pragma_integrity_check)检查的信息，但不能真正说出它是否对实际数据进行完整性检查。“[如何损坏 SQLite 数据库文件](http://www.sqlite.org/howtocorrupt.html)”页面并没有真正提到硬盘驱动器上的位腐烂这一事实，这就是我问的原因。

此外，我正在处理的数据库将是一个可索引的仅附加日志。一种选择是我定期轮换数据库并为每个轮换文件创建一个 MD5 和。但也许工作量太大了...

任何输入表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T07:33:30.653

通过阅读完整性检查文档，我会说*不能*保证检测到仅影响用户数据的损坏（由于媒体上未检测到的位错误）。

由于您的数据是仅附加的日志，因此您很容易做到。一种方法是在单独的硬盘驱动器上写入文本文件日志，其中包含每行数据的哈希值（MD5 或其他）。然后您可以使用该哈希日志来验证真实数据库的内容。显然，备份将是您计划中不可或缺的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T07:44:09.477

只是偶然发现了这一点；我可以使用[fzec](http://pypi.python.org/pypi/zfec/) Python 包来恢复损坏的数据。每行将有多个“fzec 块列”以从损坏中恢复。看起来很整洁。

# .htaccess - 缓存控制无法正常工作

> ID：11490251
> 
> 赞同：0
> 
> 时间：2012-07-15T07:26:54.690
> 
> 标签：.htaccess, caching

我在 .htaccess 文件中放置了一个简单的缓存控件：

```
#cache css and javascript files for one week  
<FilesMatch ".(js|css)$">  
Header set Cache-Control "max-age=604800"  
</FilesMatch> 
```

当我在 Google 的页面站点测试器上测试桌面站点时：[https](https://developers.google.com/speed/pagespeed/insights) ://developers.google.com/speed/pagespeed/insights ...它显示 javascript 和图像正在正确缓存。但是，当我测试我的移动网站时，缓存不起作用。我的 htaccess 文件与我的所有桌面文件（即 public_html/index.html、public_html/images/、public_html/css/、public_html/.htaccess 等）一起包含在 public_html 目录中。我的移动站点包含在此处：public_html/mobile /。

我是否需要向移动目录添加第二个 .htaccess 文件才能使其正常工作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T10:48:48.540

最好的选择是使用 html5 样板的 .htaccess 文件。它针对缓存、gzip、跨域 ajax 以及许多功能进行了高度优化。

还要检查 mod_deflate 是否打开。

您不需要任何额外的 .htaccess 文件，只需使用目录根目录中的单个文件即可。

# android - 我想动态创建按钮来传递 id

> ID：11490254
> 
> 赞同：-2
> 
> 时间：2012-07-15T07:27:16.207
> 
> 标签：android

```
for(int i=0;i<n;i++)
        {
        Button btn = new Button(this); 
        btn.setLayoutParams(new LinearLayout.LayoutParams(150, 45));
        btn.setId(i);
        linearLayout.addView(btn); 
        try {
           btn.setOnClickListener(new OnClickListener() {

                public void onClick(View v){
                    Intent userTry = new Intent(Ed.this,Op.class);
                    startActivity(userTry);
                }
            });
        } catch (ActivityNotFoundException anfe) {
            Log.e("onCreate", "Activity Not Found", anfe);
        } 
```

Android：我想动态创建按钮，以便将它的 id 传递给它去的下一个活动。但我收到一个错误。谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T07:57:43.083

您必须传递带有 id 的 Bundle：

```
Intent userTry = new Intent(Ed.this,Op.class);

Bundle extras = new Bundle();
extras.putInt("EXTRA_PARAM1", yourParam);
userTry.putExtras(extras);

startActivity(userTry); 
```

此外，您以错误的方式设置 id。方法 setId (int) 需要一个在您的资源中注册的 id（例如，R.id.itemId）

# javascript - 为什么在创建后立即执行样式分配没有动画？

> ID：11490262
> 
> 赞同：5
> 
> 时间：2012-07-15T07:28:05.627
> 
> 标签：javascript, html, animation, css

在 Webkit 上打开[这个小提琴](http://jsfiddle.net/wWnnH/2/)将显示我在说什么。

如何在第一次指定元素时指定元素的样式，然后再指定它的最终状态？

应该可以完全以这种方式指定单步动画（不必开始使用@keyframes），但似乎在这一点上我必须处理很多特定于实现的奇怪之处。请注意在 Firefox 中如何不执行动画...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T08:05:31.963

似乎与此处描述的问题相同：[CSS3 transitions to dynamic created elements](https://stackoverflow.com/questions/3969817/css3-transitions-to-dynamically-created-elements)

所以

```
$("#one").on('click',function(){
    var word = $("<div style='opacity: 0; height:0'>word</div>");
    $('body').prepend(word); 
    window.getComputedStyle(word[0]).getPropertyValue("top");
    word.css({height: 100, opacity: 1});
}); 
```

在这种情况下也适用：http: [//jsfiddle.net/wWnnH/3/](http://jsfiddle.net/wWnnH/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T08:12:44.727

或者，您可以使用 jQuery.animate()

```
word.animate({height: 100, opacity: 1}, 5000); 
```

可以在没有 CSS 的情况下工作，也可以在 webkit 和 mozilla 上工作。尽管我猜这违背了尝试使用 CSS3 的目的。

# linux - 使用 TaskSet 运行的 Shell 脚本

> ID：11490269
> 
> 赞同：2
> 
> 时间：2012-07-15T07:30:06.393
> 
> 标签：linux, loops, ubuntu, cpu

我在 ubuntu 上运行以下命令：

```
taskset -c 1 ./forLoop 
```

它给了我以下错误：

```
./forLoop: 1: Syntax error: Bad for loop variable 
```

forLoop 中的内容如下：

```
for ((  i = 0 ;  i <= 1000000;  i++  ))
do
  echo "Welcome $i times"
done 
```

只是`./forLoop`自己执行，但我想将该过程附加到某个亲和力。我可以吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T07:37:21.243

这很可能会发生，因为您在 Ubuntu 上并且`dash`调用了名为的解释器而不是`bash`.

简单地说，键入以下内容以确认：

```
dash ./forLoop 
```

您应该会看到相同的“for 循环”错误。

解决此问题的一些方法：

*   强制使用 `bash`：`taskset -c 1 bash ./foo.sh`
*   写 `#!/bin/bash` 作为脚本的第一行。
*   将循环代码更改为与破折号兼容，如下面的链接中所述。

在这里阅读更多：[https ://wiki.ubuntu.com/DashAsBinSh/](https://wiki.ubuntu.com/DashAsBinSh/)

# chef-infra - 从食谱创建厨师数据包

> ID：11490277
> 
> 赞同：6
> 
> 时间：2012-07-15T07:32:24.700
> 
> 标签：chef-infra, chef-recipe

如何从配方创建数据包并避免该数据包已经存在时的异常？

文档显示创建数据包是这样完成的：

```
new_databag = Chef::DataBag.new
new_databag.name('unique_name')
new_databag.save 
```

这在数据包尚不存在时有效，但如果数据包已经存在，如何使其工作，以免破坏厨师运行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-15T09:15:01.410

尝试使用`list`Chef::DataBag 的方法并检查您的数据包名称是否存在：

```
require 'chef/data_bag'

unless Chef::DataBag.list.key?('unique_name')
  new_databag = Chef::DataBag.new
  new_databag.name('unique_name')
  new_databag.save
end 
```

我使用它来使我的食谱更健壮，或者如果在 Chef 服务器上找不到预期的数据包，则会引发更友好的错误。

# html - jsoup论坛爬取

> ID：11490278
> 
> 赞同：0
> 
> 时间：2012-07-15T07:32:35.737
> 
> 标签：html, web-scraping, jsoup

我正在使用 Jsoup 抓取一个在线论坛。想知道我应该如何在没有其他评论者引用的情况下抓取主要帖子。

**我设法刮掉了什么：** carey 写道： 是的，CC 通常有折扣，尤其是汽油和 makan... 在汽油亭使用黑色 DBS 借记卡可以得到折扣吗？我总是付现金，因为没有抄送。

**我想要什么：**在加油站使用的黑色星展银行借记卡可以打折吗？我总是付现金，因为没有抄送。

这是html：

```
<div id="post_message_63989045">
  <div class="quote"> 
    <span class="byline"> <a href="/eat-drink-man-woman-16/life-without-credit-cards-3601620-post63982949.html#post63982949" rel="nofollow"><img class="inlineimg" src="http://www.hardwarezone.com.sg/img/forums/hwz/buttons/viewpost.gif" border="0" alt="View Post" /></a> <strong>carey</strong> wrote: </span> 
     <blockquote cite="showthread.php?p=63982949#post63982949">
        Yup, CC usually got discounts, especially for petrol and makan...
        <br /> 
        <br /> So those without a CC are being penalized 
        <img src="http://www.hardwarezone.com.sg/img/forums/hwz/smilies/eek.gif" border="0" alt="" title="EEK!" class="inlineimg" /> 
     </blockquote> 
  </div>The black DBS debit card when used at petrol kiosk can get discount ?
  <br /> 
  <br /> I always pay cash because no cc . 
  <img src="http://www.hardwarezone.com.sg/img/forums/hwz/smilies/frown.gif" border="0" alt="" title="Frown" class="inlineimg" />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:47:38.850

您可以简单地过滤掉`<div>`具有“引用”类的 s，如果您用于抓取的任何内容都解析 HTML 标记

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:53:21.343

如果您可以使用 XPath，您可以只查询所有作为直接子节点的文本节点：

```
//div[@id="post_message_63989045"]/text() 
```

引号将被忽略，因为它的文本是 quote-div 的子项。（可能以及某人发布的任何代码标签）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T00:58:34.473

评论.ownText()

获取元素拥有的文本。不将文本与所有子项合并

# django - Django 获取静态媒体文件

> ID：11490279
> 
> 赞同：1
> 
> 时间：2012-07-15T07:32:41.213
> 
> 标签：django, django-admin, django-views, django-settings

所有，我正在使用 Django1.4，我有一个关于访问 img 文件、js 文件等的问题......我的文件在目录 /opt/lab/labsite/media/img 中用于图像和 /opt/lab/用于javascript文件的labsite/media/js。我应该更改设置文件中的设置以使下面的html正常工作..我正在使用django服务器来运行代码

我的代码目前位于/opt/lab/labsite/settings.py，其他模块位于/opt/lab/labsite/......

```
 <img src="/media/img/logo.jpg" alt="logo" /> 
```

以下是settings.py文件中的设置

```
 # Absolute filesystem path to the directory that will hold user-uploaded files.
 # Example: "/home/media/media.lawrence.com/media/"
 MEDIA_ROOT = '/opt/lab/labsite/media/'

 # URL that handles the media served from MEDIA_ROOT. Make sure to use a
 # trailing slash.
 # Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
 MEDIA_URL = ''

 # Absolute path to the directory static files should be collected to.
 # Don't put anything in this directory yourself; store your static files
 # in apps' "static/" subdirectories and in STATICFILES_DIRS.
 # Example: "/home/media/media.lawrence.com/static/"
 STATIC_ROOT = ''

 # URL prefix for static files.
 # Example: "http://media.lawrence.com/static/"
 STATIC_URL = '/opt/lab/labsite/media/' 
```

`Changes`

```
 MEDIA_ROOT = '/opt/lab/labsite/media/'

  MEDIA_URL = '/media/'

  STATIC_ROOT = '/opt/lab/labsite/static/'

  STATIC_URL = '/static/'

  STATICFILES_DIRS = (
  )

  # List of finder classes that know how to find static files in
  # various locations.
  STATICFILES_FINDERS = (
      'django.contrib.staticfiles.finders.FileSystemFinder',
      'django.contrib.staticfiles.finders.AppDirectoriesFinder',
  #    'django.contrib.staticfiles.finders.DefaultStorageFinder',
  )

  TEMPLATE_LOADERS = (
      'django.template.loaders.filesystem.Loader',
      'django.template.loaders.app_directories.Loader',
  #     'django.template.loaders.eggs.Loader',
  )

  MIDDLEWARE_CLASSES = (
      'django.middleware.common.CommonMiddleware',
      'django.contrib.sessions.middleware.SessionMiddleware',
      'django.middleware.csrf.CsrfViewMiddleware',
      'django.contrib.auth.middleware.AuthenticationMiddleware',
      'django.contrib.messages.middleware.MessageMiddleware',
  )

  ROOT_URLCONF = 'labsite.urls'

  # Python dotted path to the WSGI application used by Django's runserver.
  WSGI_APPLICATION = 'labssite.wsgi.application'

  TEMPLATE_DIRS = (
      # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
      # Always use forward slashes, even on Windows.
      # Don't forget to use absolute paths, not relative paths.
     '/opt/lab/labsite/templates'
  )

  INSTALLED_APPS = (
      'django.contrib.auth',
      'django.contrib.admin',
      'django.contrib.contenttypes',
      'django.contrib.sessions',
      'django.contrib.sites',
      'django.contrib.messages',
      'django.contrib.staticfiles',
      'home',
      # Uncomment the next line to enable admin documentation:
      # 'django.contrib.admindocs',
  )

  # A sample logging configuration. The only tangible logging
  # performed by this configuration is to send an email to
  # the site admins on every HTTP 500 error when DEBUG=False.
  # See http://docs.djangoproject.com/en/dev/topics/logging for
  # more details on how to customize your logging configuration.

  TEMPLATE_CONTEXT_PROCESSORS = (
     'django.core.context_processors.static',
     'django.contrib.auth.context_processors.auth'
  ) 
```

HTML：

```
 <img src="{{ STATIC_URL }}img/hi.png" alt="Hi!" />
 <img src="/static/img/hi.png" alt="Hi!" />
 <img src="/media/img/hi.png" alt="Hi!" />
 <img alt="Hi!" src="/opt/ilabs/ilabs_site/media/img/hi.png"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:41:32.417

`STATIC_URL`你设置的看起来不太好。我认为应该是`STATIC_ROOT`。

您应该设置（例如）`MEDIA_URL='/media/'`并且`STATIC_URL='/static/'`我希望您还启用了 urls.py 中的静态文件服务

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T07:59:58.940

在 settings.py 中设置：

```
STATIC_ROOT = '/opt/html/static/'
STATIC_URL = '/static/'

STATICFILES_DIRS = (
    '/opt/lab/labsite/static/',
) 
```

在上下文处理器中添加：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    ...
    'django.core.context_processors.static',
    ...
) 
```

不要忘记这一点`INSTALLED_APPS`：

```
 'django.contrib.staticfiles', 
```

进而：

```
<img src="/static/img/logo.jpg" alt="logo" /> 
```

或者

```
<img src="{{ STATIC_URL}}img/logo.jpg" alt="logo" /> 
```

如果`logo.jpg`位于`/opt/lab/labsite/static/img/`

此外，`STATIC_ROOT`作为一个静态文件夹，由 Web 服务器/反向代理（如 Apache、Nginx 等）提供服务。如果您调用：

```
python manage.py collectstatic 
```

这会将所有文件从 - 复制`/opt/lab/labsite/static/`到`STATIC_ROOT`- `/opt/html/static/`。这对于部署很有用。

但这一切都是为了发展。对于生产，有更好的方法来提供静态内容 - [https://docs.djangoproject.com/en/dev/howto/static-files/#staticfiles-production](https://docs.djangoproject.com/en/dev/howto/static-files/#staticfiles-production)

# android - onOptionsItemSelected 不会在 Android 中调用

> ID：11490281
> 
> 赞同：0
> 
> 时间：2012-07-15T07:32:56.990
> 
> 标签：android, menu

我正在使用 Android ICS 4.0.3，我下载了 Ancal 项目并进行了研究。我在活动中添加了一些选项菜单，但它不能调用 opOptionsItemSelected 方法。这是我的代码：

```
 @Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);

    String displayText = dateFormatFull.format(new Date());
    switch(iCurrentAgendaViewType) {
        case AgendaView.viewMode.DAY:
            displayText = dateFormatFull.format(CurrentAgendaView.GetViewStartDate().getTime()).toString();
            break;
        case AgendaView.viewMode.WEEK:
            displayText = dateFormatFull.format(CurrentAgendaView.GetViewStartDate().getTime()).toString();
            break;
        case AgendaView.viewMode.MONTH:
            displayText = dateFormatMonth.format(CurrentAgendaView.GetCurrentSelectedMonthAsCalendar().getTime()).toString();
            break;
    }

    if (iCurrentAgendaViewType == AgendaView.viewMode.TODAY) {
        menu.add(Menu.NONE, android.R.id.button2, 1, displayText).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    } else {
            menu.add(Menu.NONE, R.drawable.ic_arrow_left, 0, "").setIcon(R.drawable.ic_arrow_left).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
        menu.add(Menu.NONE, android.R.id.button2, 1, displayText).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
        menu.add(Menu.NONE, R.drawable.ic_arrow_right, 2, "").setIcon(R.drawable.ic_arrow_right).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    }

    return true;
  }

@Override
  public boolean onOptionsItemSelected(MenuItem item)
  {
        if (DEBUG) {
                Log.d(TAG, "============ onOptionsItemSelected ===========");
        }

      switch (item.getItemId())
      {
        case R.drawable.ic_arrow_left:
            CurrentAgendaView.SetPrevViewItem();
                RefreshAgendaAfterViewItemChange();
                return true;
        case R.drawable.ic_arrow_right:
            CurrentAgendaView.SetNextViewItem();
                RefreshAgendaAfterViewItemChange();
                return true;
          case miNewAppt:
            openActAppointment(-1, -1, -1);
            return true;
          case miNewTask:
            openActTask(-1);
            return true;
          case miNewNote:  
            openActNote(-1);
            return true;
          case miShowAllTasks:
          {
            item.setChecked(!item.isChecked());         
            prefs.bShowAllTasks = item.isChecked();
            prefs.Save();
            refreshData();
            menuItemUpdateIcons(item);
            return true;
          }
          case miOptions:
            openActOptions();
            return true;
          case mTimeZone:
            showTimeZone();
            return true;
          case miAbout:
            openActViewAbout();
            return true;
          default:
            return super.onOptionsItemSelected(item);
      }
  } 
```

![在此处输入图像描述](../Images/b4159a2fd003438a381065bf7e940bab.png)

我像图像一样在运行时添加了操作栏菜单，但是当我调试上面的代码时，没有调用 onOptionsItemSelected 方法。

这有什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T01:42:52.873

I found the cause. The above activity extends CommonActivity. CommonActivity already overided onMenuItemSelected method. So I override onMenuItemSelected method like below:

```
 public abstract class CommonActivity extends Activity {

     @Override
     public boolean onMenuItemSelected(int featureId, MenuItem item)
     {
         if (item.getItemId() == android.R.id.home){
             finish();
          }

          return true;
      }

    }

     public class AnCal extends CommonActivity implements OnNavigationListener{

      @Override
      public boolean onCreateOptionsMenu(Menu menu)
      {
          String displayText = getCurrentViewDateText();
          if (iCurrentAgendaViewType == AgendaView.viewMode.TODAY) {    
              menu.add(Menu.NONE, android.R.id.button2, 1, displayText).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
     } else {
                menu.add(Menu.NONE, android.R.id.button1, 0, "Prev").setIcon(R.drawable.ic_arrow_left).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
                menu.add(Menu.NONE, android.R.id.button2, 1, displayText).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
                menu.add(Menu.NONE, android.R.id.button3, 2, "Next").setIcon(R.drawable.ic_arrow_right).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
        }

            return super.onCreateOptionsMenu(menu);
        } 
```

# wordpress - Wordpress上传媒体工具双iframe？怎么修？

> ID：11490284
> 
> 赞同：0
> 
> 时间：2012-07-15T07:33:28.677
> 
> 标签：wordpress, thickbox

我在我的插件中使用 WordPress 上传媒体工具，并且发生了异常错误，我得到了两个重叠的 iframe。我在网上搜索并没有太多信息，最有意义的是，thickbox 被包含了两次，这导致了问题，但在我的插件代码中，我只包含了一次。

这是我用来打开窗口的代码：

`media-upload.php?type=image&TB_iframe=true&tab=library&width=640&height=640`

当我采用“TB_iframe = true”时，我会看到两个 iframe 在彼此下方，否则它们会重叠，只能看到双标题。

这是PHP代码：

```
if (isset($_GET['page']) && ($_GET['page'] == 'add_images' || $_GET['page'] == 'add_slides')) {

    add_action("admin_enqueue_scripts", "load_fixedly_media_upload_header");
}

function load_fixedly_media_upload_header() {

    wp_enqueue_script('media-upload');
    wp_enqueue_script('thickbox');
    wp_register_script('my-fixedly-upload', WP_PLUGIN_URL . '/fixedly/scripts/admin.js', array('jquery','media-upload','thickbox'));
    wp_enqueue_script('my-fixedly-upload');
    wp_enqueue_style('thickbox');
} 
```

# java - 为什么这个 JSP - Servlet 代码不起作用？

> ID：11490288
> 
> 赞同：-3
> 
> 时间：2012-07-15T07:34:04.897
> 
> 标签：java, jsp, servlets

我有一个名为 classes 的包，其中包括 x.java 和 y.java。x.java：

```
public class x{
private int a;
private int b;
private String c;
private String d;
private String e;
private String f;
//And the fields are encapsulated.
} 
```

y.java：

```
public class y{
private List<x> xs;
private int k1;
private int k2;
private String k3;
private String k4;
//And the fields are encapsulated.
} 
```

z.JSP：

```
<%
usecase y = new y();
request.getSession().setAttribute("yy", y);
%>
<form action="aaa?id=1" method="POST">
            <td>
            <input type="text" name="bbb"/>
            </td>
            <td>
            <input type="text" name="ccc"/>
            </td>
            <td>
            <input type="submit" name="ddd"/>
            </td>
        </form> 
```

aaa.java（Servlet - 在 processRequest 中）：

```
PrintWriter out = response.getWriter();
    try {
        y yy = (y) request.getSession().getAttribute("yy");
        String id = request.getParameter("id");
        x s = new x();
        s.setC(request.getParameter("bbb"));
        b.setD(request.getParameter("ccc"));

        if ("1".equals(id)) {
            s.setE("l");
        } else if ("2".equals(id)) {
            s.setE("k");
        }

        yy.getXs().add(s);
        response.sendRedirect("z.jsp");
    } finally {
        out.close();
    } 
```

这是代码。当我用断点观看它时，一切顺利，变量得到它们的值。但在这一行： yy.getXs().add(s); 有一个错误，它不会重定向。你能帮帮我吗？

**解决方案**：替换`private List<x> xs;`为`List<X> xs = new ArrayList<X>();`. 非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T07:55:38.573

大多数情况下，NullPointerException 意味着您正在取消引用一个空变量。我假设导致异常的行（第 97 行`z.java`，如堆栈跟踪所示）是以下行：

```
yy.getXs().add(s); 
```

那么它可能意味着两件事：

1.  `yy`一片空白
2.  返回的列表`yy.getXs()`为空。

使用调试器来识别问题，或在代码中添加日志记录跟踪。

# java - 重复但重叠字符串的算法

> ID：11490290
> 
> 赞同：17
> 
> 时间：2012-07-15T07:34:57.117
> 
> 标签：java, algorithm

我需要编写一个方法，给我一个字符串`s`，我需要返回最短的字符串，其中包含`s`两次连续的子字符串。

然而，两次出现的`s`可能会重叠。例如，

*   `aba`返回`ababa`
*   `xxxxx`返回`xxxxxx`
*   `abracadabra`返回`abracadabracadabra`

到目前为止，我的代码是这样的：

```
import java.util.Scanner;

public class TwiceString {

    public static String getShortest(String s) {
        int index = -1, i, j = s.length() - 1;
        char[] arr = s.toCharArray();
        String res = s;

        for (i = 0; i < j; i++, j--) {
            if (arr[i] == arr[j]) {
                index = i;
            } else {
                break;
            }
        }

        if (index != -1) {
            for (i = index + 1; i <= j; i++) {
                String tmp = new String(arr, i, i);
                res = res + tmp;
            }
        } else {
            res = res + res;
        }

        return res;
    }

    public static void main(String args[]) {
        Scanner inp = new Scanner(System.in);
        System.out.println("Enter the string: ");
        String word = inp.next();

        System.out.println("The requires shortest string is " + getShortest(word));
    }
} 
```

我知道我可能在算法级别而不是在编码级别上错了。我的算法应该是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T08:42:09.247

使用[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)。特别是，在为 构建树之后`s`，转到代表整个字符串的叶子并向上走，直到看到另一个字符串结束标记。这将是最长后缀的叶子，也是 的前缀`s`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T12:07:12.867

正如@phs 已经说过的，部分问题可以翻译为*“找到s 的最长前缀，它也是s 的后缀”*，没有树的解决方案可能是这样的：

```
public static String getShortest(String s) {
    int i = s.length();
    while(i > 0 && !s.endsWith(s.substring(0, --i))) 
        ;
    return s + s.substring(i);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T07:48:38.650

一旦你找到了你的索引，即使它是-1，你只需要将子字符串从`index + 1`（因为索引是最后一个匹配的字符索引）附加到字符串的末尾。String 中有一个方法可以获取这个子字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-15T12:37:43.717

我认为你应该看看[Knuth-Morris-Pratt](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)算法，它使用的部分匹配表几乎是你需要的（顺便说一句，这是一个非常好的算法；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T09:02:37.273

例如，如果您的输入字符串`s`是这样的，`"abcde"`您可以轻松地构建一个如下所示的正则表达式（注意最后一个字符`"e"`丢失了！）：

```
a(b(c(d)?)?)?$ 
```

并在字符串上运行它`s`。这将返回尾随重复子字符串的起始位置。然后，您只需附加缺少的部分（即 的最后 NM 个字符`s`，其中 N 是 的长度，`s`M 是匹配的长度），例如

```
aba
  ^ match "a"; append the missing "ba"
xxxxxx
 ^ match "xxxxx"; append the missing "x"
abracadabra
       ^ match "abra"; append the missing "cadabra"
nooverlap
--> no match; append "nooverlap" 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-15T07:54:22.663

据我了解，您想这样做：

```
input: dog
output: dogdog
--------------
input: racecar
output: racecaracecar 
```

所以我会这样做：

```
 public String change(String input)
{
    StringBuilder outputBuilder = new StringBuilder(input);

    int patternLocation = input.length();
    for(int x = 1;x < input.length();x++)
    {
        StringBuilder check = new StringBuilder(input);

        for(int y = 0; y < x;y++)
            check.deleteCharAt(check.length() - 1);

        if(input.endsWith(check.toString()))
        {
            patternLocation = x;
            break;
        }
    }

    outputBuilder.delete(0,  input.length() - patternLocation);

    return outputBuilder.toString();
} 
```

希望这有帮助！

# javascript - json foreach 带有 jquery 的数组数组

> ID：11490305
> 
> 赞同：3
> 
> 时间：2012-07-15T07:38:37.773
> 
> 标签：javascript, jquery, json, foreach

```
[
    [
        {
            "Id": 3,
            "Code": "232",
            "TicketImage": "0"
        }
    ],
    [
        {
            "Id": 1,
            "Code": "23",
            "TicketImage": "1"
        },
        {
            "Id": 2,
            "Code": "24",
            "TicketImage": "1"
        }
    ],
    []
] 
```

我有这个我试图解析的 JSON 对象。

`var res = jQuery.parseJSON(JSON.stringify(obj.Message));`

```
 $.each(res, function (i, tickets) {
                  $.each(tickets, function (i, ticket) {
                      console.log($(this));
                  });
              }); 
```

当我尝试这个时，我会收到无数带有字母的弹出窗口。但我想要对象。

我如何解析这个 JSON 数据？

**更新：**

```
 $.each(res, function (i, tickets) {
                  $.each(tickets, function (i, ticket) { 
                      console.log(ticket.Code);
                      console.log(ticket.TicketImage);
                  });
              }); 
```

**这做到了。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T08:21:29.157

小心你覆盖 i 变量：

```
$.each(res, function (i, tickets) {
                  $.each(tickets, function (j, ticket) {
                      console.log(this);
                      // as a full string
                      console.log(this.ticketId+' : '+JSON.stringify(this));

                  });
}); 
```

除了这个小东西，你的循环是正确的，你不需要你的'this'上的jquery包装器。在 $.each(array,function(k,v){}) 中，k 变量是检索当前对象的键，v 是它的值，因此您也可以通过以下方式访问它：

```
$.each(res, function (i, tickets) {
                  $.each(res[i], function (j, ticket) {
                      console.log(res[i][j].ticketId+' : '+res[i][j]);
                      // which is the exact same thing as :
                      console.log.(ticket);
                      // and even this:
                      console.(this);

                  });
}); 
```

使用 'this' 的相同代码：

```
$.each(res, function (i, tickets) {
                  $.each(this, function (j, ticket) {
                      console.log(this.ticketId+' : '+this);
                  });
}); 
```

使用每个值：

```
$.each(res, function (i, tickets) {
                  $.each(tickets, function (j, ticket) {
                      console.log(ticket.ticketId+' : '+ticket);
                  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T08:03:21.520

尝试：

```
var res = jQuery.parseJSON(eval(obj.Message)); 
```

# javascript - JavaScript 和/或 node.js 中用于验证目的的正则表达式

> ID：11490307
> 
> 赞同：0
> 
> 时间：2012-07-15T07:39:41.090
> 
> 标签：javascript, regex, node.js

在 javascript 和/或 node.js 中，如何为以下目的编写正则表达式：

1) 正文必须至少包含一行，并且不得超过 10000 行。

2) 每行由一个字符串和一个整数组成。字符串字母表限定为“ACGTN”，长度最少为1，最多为64。整数必须在0到9之间，即长度必须为1。

这是一个有效的例子：

```
ACCCGTTNNGTCCGGA3
ACCCGTTNNGTCCGGATTGAANNGT9
TTGGACCNAC0 
```

这是一个无效的示例：（包含字母外字符）

```
BACGGTA0 
```

另一个无效示例：（第二行没有整数）

```
ACGGTA0
TTGGACCNAC 
```

另一个无效示例：（超过 64 个字符的字符串）

```
TTGGACCNACACCCGTTNNGTCCGGATTGAANNGTTTGGACCNACACCCGTTNNGTCCGGATTGAANNGTTTGGACCNACACCCGTTNNGTCCGGATTGAANNGT2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:43:26.677

正则表达式，救援：

```
^[ACGTN]{1,64}\d$ 
```

`\n`只需按（换行符）拆分输入并针对此正则表达式测试每一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T08:09:19.533

如果要使用正则表达式验证所有文件，请使用这个：

```
^([ACGTN]{1,64}\d\n){0,9999}[ACGTN]{1,64}\d$ 
```

Blender的回答也不错，但只适用于一行

# jquery - 如何独立调用显示/隐藏功能

> ID：11490310
> 
> 赞同：2
> 
> 时间：2012-07-15T07:40:16.360
> 
> 标签：jquery

嗨，我得到了帮助，最终我得到了运行良好的 jquery 显示/隐藏功能。但是当有几个评论组时，我会花一整天的时间来完成下一步。

这里的代码

```
var toggle = false;
$(function() {
    $(document).on('click', 'a.comments', function(e) {
        var $this = $(this);
        $('.toggleComments').toggle(1000,function() {
            if(!toggle) {
                $this.text('Hide Comments');
                toggle = !toggle;
            }else {
                $this.text('Show Comments');
                toggle = !toggle;
            }
        });
        e.preventDefault();
    });
});

<a href="#" class="comments">Show Comments</a><br />
<div class="toggleComments" style="display:none;">This is #comment1 <br />This is #comment2 <br /></div>
<a href="#" class="comments">Show Comments</a><br />
<div class="toggleComments" style="display:none;">This is #comment1 <br />This is #comment2 <br /></div>
<a href="#" class="comments">Show Comments</a><br />
<div class="toggleComments" style="display:none;">This is #comment1 <br />This is #comment2 <br /></div>
<a href="#" class="comments">Show Comments</a><br />
<div class="toggleComments" style="display:none;">This is #comment1 <br />This is #comment2 <br /></div> 
```

有 4 个评论组，但由于 html DOM 相同，因此在单击每个评论组时它们无法独立工作。

您能否建议如何处理这种情况，在没有为每个评论组分配 jquery 脚本的情况下独立管理它们的显示/隐藏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T07:50:41.783

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T08:01:30.563

如果您希望 a 标签显示正确的文本 - 使用此代码：

```
$(function() {
    $(document).on('click', 'a.comments', function(e) {
        e.preventDefault();
        var $this = $(this);
        $this.next().next().toggle(1000,function() {
            if($this.text()=='Show Comments') {
                $this.text('Hide Comments');
            }else {
                $this.text('Show Comments');
            }
        });

    });
}); 
```

（我接受了 xdazz 的答案并对其进行了一些更改，因为您不能将 1 个变量（toogle）用于 4 个链接。）演示：http: [//jsfiddle.net/jAMGE/](http://jsfiddle.net/jAMGE/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T07:46:44.193

尝试这个：

```
var toggle = false;
$(function() {
    $(document).on('click', 'a.comments', function(e) {
        e.preventDefault();
        var $this = $(this);
        // $this.next().next() is the div after the link.
        $this.next().next().toggle(1000,function() {
            if(!toggle) {
                $this.text('Hide Comments');
                toggle = !toggle;
            }else {
                $this.text('Show Comments');
                toggle = !toggle;
            }
        });
    });
}); 
```

***[演示](http://jsfiddle.net/9u4aA/)***。

# asp.net - Facebook 标签应用程序 - “喜欢”用户的替代登陆页面

> ID：11490311
> 
> 赞同：-1
> 
> 时间：2012-07-15T07:40:25.203
> 
> 标签：asp.net, facebook

我开发了一个 Facebook 应用程序。
在 facebook，页面标签 url 我已经指定了一个登陆 url，它可以安全登陆没有问题。
现在我想如果我点击喜欢按钮，它应该调用另一个登陆页面。

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T07:46:31.557

您需要做的是阅读`signed_request`传递给您的选项卡应用程序的内容。

将`signed_request`包含有关当前用户是否“喜欢”应用所在页面的信息。一旦您知道用户是否“喜欢”该页面，即使他/她已经喜欢该页面，您也可以将他们重定向到您希望的任何 URL。

我看到您已经指定`asp.net`了我不知道的内容，但我*可以*告诉您，它`signed_request`作为 POST 请求传递给您的应用程序。从那里你需要[解析签名的请求](https://stackoverflow.com/questions/4560024/asp-net-facebook-api-reading-a-signed-request-only-given-in-docs-as-php)，然后你可以阅读它的内容。

这是一个简单的 JavaScript 重定向（在 PHP 中） -

```
echo "<script language=javascript>";
echo "window.location.href ='".$url."';";
echo "</script>"; 
```

# git - 我怎么知道本地存储库在源后面并且在 TortoiseGit 中可以使用 FF？

> ID：11490315
> 
> 赞同：2
> 
> 时间：2012-07-15T07:40:51.027
> 
> 标签：git, tortoisegit

在控制台中，我可能会执行`git status`并看到类似的内容：

```
>git status
# On branch foobar
# Your branch is behind 'origin/foobar' by 1 commit, and can be fast-forwarded. 
```

我应该如何在 TortoiseGit 中做同样的事情？

PS：这个问题只是关于 GUI 的使用——如何在纯 GUI 中做到这一点。

**更新**：

关于FF的信息也很重要

**更新 2**

赏金给可以帮助查找 FF 是否可用于上游合并的人:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:02:46.607

如果你的意思是 TortoiseGit，我附上了一张图片，它会告诉你有多少次提交，以及它的提交哈希 ( [http://i.stack.imgur.com/AfUHU.png](https://i.stack.imgur.com/AfUHU.png) )

![等同于状态，浏览参考资料](../Images/094000504dc4c941fa7311876293dd8b.png)

# javascript - Dreamweaver 将 jquery 突出显示为正则表达式

> ID：11490317
> 
> 赞同：0
> 
> 时间：2012-07-15T07:41:28.513
> 
> 标签：javascript, jquery, dreamweaver

为什么 Dreaweaver 将我的代码突出显示为 RegExp 有什么问题？

```
$(this).attr({'width':this.width /2, 'height':this.height/ 2}); 
```

它的亮点从`/2`到`/2`。

谢谢你

我将此代码用于`<img/>`标记，我认为它更好地使用`attr()`而不是`css()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T07:42:37.520

> 为什么 Dreaweaver 突出显示为 RegExp？

正则表达式突出显示与您的代码无关。这是一个主要的突出问题，只要我使用它（DW CS5 - CS6），它就一直存在于 DreamWeaver 中。

> 我的代码有什么问题？

不应引用对象属性，我不确定是否`this.width`返回`this.height`您所期望的。此外，您不应该为此使用属性，[`.css()`](http://api.jquery.com/css/)当您想应用样式时使用。不推荐使用 HTML 属性。

```
$(this).css({width: $(this).width()/2, height: $(this).height()/2}); 
```

# ruby-on-rails - 如何在 Rails 中动态调用或调用类？

> ID：11490322
> 
> 赞同：12
> 
> 时间：2012-07-15T07:42:46.753
> 
> 标签：ruby-on-rails, ruby, class, dynamic, invoke

假设我可以构造一个与现有类匹配的字符串，我该如何调用它？

例如，我有几个类：

*   我的班级1
*   我的班级2
*   我的班级3

我想通过构造一个与其名称匹配的字符串来动态调用它们中的每一个。如果他们都有方法“方法”，我该怎么做这样的事情？：

```
(1..3).each do |n|
  ("MyClass"+n).methods
end 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-15T07:46:27.230

`constantize`符合要求。[你可以在这里](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-constantize)阅读更多关于它的信息。在您的情况下，它将类似于：

```
(1..3).each do |n|
  "MyClass#{n}".constantize.methods
end 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-15T08:11:49.750

你也可以做 -

```
(1..3).each {|n| eval "MyClass#{n}.methods"} 
```

# jquery - jqplot 并用 asp.net mvc 模型渲染它

> ID：11490325
> 
> 赞同：0
> 
> 时间：2012-07-15T07:43:35.927
> 
> 标签：jquery, json, asp.net-mvc-3, jqplot

在我的 asp.net mvc 3.0 应用程序中，我将绘制一个图表，它的 X 轴包含日期值，y 轴包含每天的视图。对于图表绘制，我使用[jqplot date-axes](http://www.jqplot.com/tests/date-axes.php)，并将其传递给 json 结果。这是模型：

```
 public class MyDateModel
    {
        public string Date { get; set; }
        public int Views { get; set; }
    } 
```

这是行动：

```
public ActionResult Index()
        {
            var res = new List<MyDateModel>();

            res.Add(new MyDateModel { Date=DateTime.Now.AddDays(-9).ToString("yyyy-MM-dd hh:mm"),Views=10});
            res.Add(new MyDateModel { Date = DateTime.Now.AddDays(-3).ToString("yyyy-MM-dd hh:mm"), Views = 3 });
            res.Add(new MyDateModel { Date = DateTime.Now.ToString("yyyy-MM-dd hh:mm"), Views = 3 });

            return View(res);
        } 
```

最后是视图：

```
@model IEnumerable<Chartjquery_jqplot.Models.MyDateModel>
@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <title>Index</title>
    <link href="../../Content/jquery.jqplot.min.css" rel="stylesheet" type="text/css" />
    <script src="../../Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery.jqplot.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jqplot.dateAxisRenderer.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jqplot.json2.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {

            var jsonurl=@Html.Raw(Json.Encode(Model));
            var plot2 = $.jqplot('chart2', jsonurl, {
                title: "AJAX JSON Data Renderer",
                axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer}}

            });

        });
    </script>
</head>
<body>
    <div>
        @Html.Raw(Json.Encode(Model))
        <div id="chart2" style="height: 300px; width: 500px;">
        </div>
    </div>
</body>
</html> 
```

但它不会在页面上绘制任何东西。

你能帮帮我吗？

除了json结果是：

[{"Date":"2012-07-06 12:10","Views":10},{"Date":"2012-07-12 12:10","Views":3},{"Date ":"2012-07-15 12:10","浏览量":3}]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T11:28:23.707

不确定这是否有帮助，但我传递数据的代码如下。@Model.data 是一个列表。

```
$(document).ready(function () {
        var data = @Html.Raw(Json.Encode(@Model.data));
        //debugger;
        //alert(data);
        $.jqplot('chartdiv', data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T08:24:47.277

我找到了一种将正确的 json 数据传递给图表的方法。这是我写的html hepler：

```
public static MvcHtmlString GetStrippedJson(this HtmlHelper helper,string json)
        {
            json=json.Replace("\"Date\":", string.Empty);

            json=json.Replace("\"Views\":", string.Empty);

            json=json.Replace('}', ']');

            json=json.Replace('{', '[');

            return MvcHtmlString.Create(json);
        } 
```

但我不知道如何根据每日刻度设置刻度间隔

# url - 在 URL 查询字符串中使用方括号的数组语法是否有效？

> ID：11490326
> 
> 赞同：37
> 
> 时间：2012-07-15T07:43:50.780
> 
> 标签：url, multidimensional-array, query-string

在 URL 查询字符串中使用多维数组合成器实际上是安全/有效的吗？

```
http://example.com?abc[]=123&abc[]=456 
```

它似乎适用于每个浏览器，我一直认为它可以使用，但根据本文中的评论，它不是：[http ://www.456bereastreet.com/archive/201008/what_characters_are_allowed_unencoded_in_query_strings/#comment4](http://www.456bereastreet.com/archive/201008/what_characters_are_allowed_unencoded_in_query_strings/#comment4)

我想听听第二个意见。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2016-09-02T14:03:04.167

答案并不简单。

以下内容摘自 RFC 3986 的第 3.2.2 节：

> 由 Internet 协议文字地址（版本 6
> [RFC3513] 或更高版本）标识的主机通过将 IP 文字
> 括在方括号（“[”和“]”）中来区分。
> 这是URI 语法中唯一允许使用方括号字符的地方。

这*似乎*通过直截了当地说明 URI 中的其他任何地方都不允许使用方括号来回答这个问题。但是方括号字符和百分比编码的方括号字符之间是有区别的。

以下内容摘自 RFC 3986 第 3 节的开头：

> 3.  语法组件
>     
>     
>     
>     通用 URI 语法由
>     称为方案、权限、路径、查询和
>     片段的组件的分层序列组成。
>     
>     
>     
>     URI = 方案“：”层次部分 [“？” 查询] [“#”片段]

所以“查询”是“URI”的一个组成部分。

以下内容摘自 RFC 3986 的第 2.2 节：

> 2.2\. 保留字符
> 
> URI 包括由“保留”集中的字符分隔的组件和子组件。这些字符被称为
> “保留”，因为它们可能（或可能不）被
> 通用语法、每个特定于方案的语法或
> URI 的解引用算法的特定于实现的语法定义为分隔符。
> 如果 URI 组件的数据与保留
> 字符作为分隔符的用途发生冲突，则必须
> 在形成 URI 之前对冲突数据进行百分比编码。
> 
> ```
>  reserved    = gen-delims / sub-delims
> 
>   gen-delims  = ":" / "/" / "?" / "#" / "[" / "]" / "@"
> 
>   sub-delims  = "!" / "$" / "&" / "'" / "(" / ")"
>               / "*" / "+" / "," / ";" / "=" 
> ```

所以方括号可能出现在查询字符串中，但前提是它们是百分比编码的。除非它们不是，否则将在第 2.2 节中进一步解释：

> 生成 URI 的应用程序应该对与保留集中的字符相对应的数据字节进行百分比编码，除非
> URI 方案特别允许这些字符表示该
> 组件中的数据。如果在 URI 组件中找到保留字符并且
> 不知道该字符的分隔角色，则必须将其
> 解释为表示对应
> 于 US-ASCII 中该字符编码的数据八位字节。

因此，由于方括号仅允许在“主机”子组件中使用，它们“应该”在其他组件和子组件中进行百分比编码，在这种情况下，在“查询”组件中，除非 RFC 3986 明确允许未编码的方括号在查询组件，它不是。

但是，如果“生成 URI 的应用程序”未能完成它“应该”做的事情，即在查询中留下未编码的方括号，则 URI 的读者不会直接拒绝 URI。相反，方括号将被视为属于查询组件的数据，因为它们不用作该组件中的分隔符。

这就是为什么，例如，当 PHP 接受未编码和百分比编码的方括号作为查询字符串中的有效字符，甚至为它们分配特殊用途时，这并不违反 RFC 3986。然而，试图利用这个漏洞而不是对方括号进行百分比编码的作者似乎违反了 RFC 3986。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-15T08:11:28.567

根据 RFC 3986，URL 的[查询组件](https://www.rfc-editor.org/rfc/rfc3986#section-3.4)具有以下语法：

```
*( pchar / "/" / "?" ) 
```

来自同一 RFC 的[附录 A ：](https://www.rfc-editor.org/rfc/rfc3986#appendix-A)

```
pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"
[...]
pct-encoded   = "%" HEXDIG HEXDIG

unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
[...]    
sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
             / "*" / "+" / "," / ";" / "=" 
```

我对此的解释是任何不是：

```
 ALPHA / DIGIT / "-" / "." / "_" / "~" / 
     "!" / "$" / "&" / "'" / "(" / ")" / 
     "*" / "+" / "," / ";" / "=" / ":" / "@" 
```

...应该是 pct 编码，即百分比编码。因此`[`，`]`应该按照 RFC 3986 进行百分比编码。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-04-12T21:31:22.133

David N. Jafferian 的回答非常棒。我只想添加一些更新和实用说明：

1.  多年来，每个浏览器在向服务器提交请求时都会在未编码的查询字符串中留下方括号。（来源：[https](https://bugzilla.mozilla.org/show_bug.cgi?id=1152455#c6) ://bugzilla.mozilla.org/show_bug.cgi?id=1152455#c6 ）。因此，我想大部分网络已经开始依赖这种行为，这使得它极不可能改变。

2.  我对 WHATWG URL 标准的解读，至少对于 Web 而言，它可以被视为取代 RFC 3986，它将这种不编码的行为编码`[`为`]`查询字符串。

**编辑**：根据评论和其他答案，对 WHATWG URL 标准的更正确解读是未编码*的*`[`/无效，但在接收/解析时也应该被容忍，并且一旦以这种方式解析，甚至应该在不编码的情况下重新序列化.`]`

 ** * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-01-31T11:53:17.747

理想情况下，我真的很想评论[Ethan 的回答](http://#answer-49806195)，但没有足够的声誉来做这件事。

我不确定这里是否引用了 WHATWG URL 标准的相关部分。我认为正确的部分可能在有效[URL-query string](https://url.spec.whatwg.org/#url-query-string)的定义中，它描述为由[URL 单元](https://url.spec.whatwg.org/#url-units)组成，这些单元本身由[URL 代码点](https://url.spec.whatwg.org/#url-code-points)和[百分比编码字节组成](https://url.spec.whatwg.org/#percent-encoded-byte)。方括号列在 URL 代码点内，因此属于百分比编码字节类别。

因此，在回答原始问题时，URL 的查询部分中的多维数组语法（即使用方括号表示数组索引）是有效的，*前提是方括号是百分比编码的*（如 %5B 表示 [ 和 %5D 表示 ] ）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-23T13:18:38.493

我的理解是方括号无论如何都不是一等公民。这是报价： [https ://www.rfc-editor.org/rfc/rfc1738](https://www.rfc-editor.org/rfc/rfc1738)

> 其他字符是不安全的，因为已知网关和其他传输代理有时会修改这些字符。这些字符是“{”、“}”、“|”、“”、“^”、“~”、“[”、“]”和“`”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-15T08:15:38.920

当我必须传递一个数组时，我总是很想进行那种查询，但我避开了它。原因是：

*   RFC 中没有明确定义。
*   不同的语言可能会有不同的解释。

您有几个选项可以传递数组：

*   编码数组的字符串表示（JSON可能是？）
*   有类似“val1=blah&val2=blah&..”之类的参数。

如果您确定您使用的语言，您可以（安全地）选择您拥有的那种查询字符串（只是您还需要 %-encode `[]`）。*

# ruby-on-rails - rails canscan 自定义操作

> ID：11490334
> 
> 赞同：2
> 
> 时间：2012-07-15T07:45:36.920
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, cancan, railscasts

我试图阻止各种项目的编辑能够使用 cancan 发布他们自己的作品，但它没有按预期工作。到目前为止，其他一切都运行良好。

例如：

```
can :publish, [Article, Review] do |doc|
  doc.user != @user
end 
```

看法

```
<% if can? :publish, @review %> 
```

我按照文档设置了自定义操作，但到目前为止我还没有取得任何成功。

[https://github.com/ryanb/cancan/wiki/Custom-Actions](https://github.com/ryanb/cancan/wiki/Custom-Actions)

# 能力.rb

```
class Ability
  include CanCan::Ability

  def initialize(user)
    @user = user || User.new # for guest
    @user.roles.each { |role| send(role) }

    if @user.roles.size == 0
      can :read, :all #for guest without roles
    end
  end

  def author
    can :manage, [Article, Review] do |doc|
      doc.try(:user) == @user
    end
    can :submit, [Article, Review]
  end

  def editor
    can :manage, [Article, Review]
    can :publish, [Article, Review] do |doc|
      doc.user != @user
    end
  end

  def admin
    can :manage, :all
    can [:submit, :publish, :reject], [Article, Review]
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T14:52:57.927

我认为你正在寻找这样做

```
cannot :publish, [Article, Review], :user_id => @user.id 
```

这就是说，如果文章的创建者是用户，则用户不能发布文章或评论。

例如，在我的应用程序中，我有一个登录用户可以创建新问题的地方。用户可以管理自己的问题，并且用户可以对问题进行投票。但是，用户不能对自己的问题进行投票。这听起来很熟悉吗？:)

```
 can [:new, :create], Question
  can :manage, Question, :user_id => user.id
  can :vote, Question
  cannot :vote, Question, :user_id => user.id 
```

# css - 如何在 IE6 上的较长链接上定位背景图像

> ID：11490349
> 
> 赞同：0
> 
> 时间：2012-07-15T07:48:39.963
> 
> 标签：css, html, background-image, internet-explorer-6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T08:34:37.973

根据[这篇文章](http://www.adipalaz.com/linksbg.html)，几个版本的 IE 在多行内联元素上渲染背景图像时只是没有做正确的事情。文章中提到了几种可能的解决方法。最简单的外观被`inline-block`用作显示样式，但您可以在文章中看到其他解决方法。

网上也有很多关于此问题的文章，因此通过正确的 Google 搜索（“内联元素背景图片”），您可以找到许多其他文章。

您可能还希望通过指定顶部和左侧来确保背景图像位于顶部/左侧：

你有这个：

```
background: url(../assets/bullet2.gif) left no-repeat; 
```

不妨用这个：

```
background: url(../assets/bullet2.gif) left top no-repeat; 
```

看起来 top/left 应该是默认设置，但指定您想要的内容并没有什么坏处。

# geolocation - Yahoo Placefinder API - 城市返回不应该的社区

> ID：11490357
> 
> 赞同：1
> 
> 时间：2012-07-15T07:52:14.253
> 
> 标签：geolocation, geocoding, yahoo-api, yahoo-maps

我想使用 Yahoo Placefinder API 进行城市输入的用户注册（自动建议）。根据[文档](http://developer.yahoo.com/geo/placefinder/guide/requests.html)，我可以向以下 GET 请求：

```
http://where.yahooapis.com/geocode?city=falenty&country=poland&appid=yourappid 
```

如果你把它放在浏览器中，它会给你一些 XML：

```
...
<line1/>
<line2>05-090 Falenty</line2>
<line3/>
<line4>Poland</line4>
<house/>
<street/>
<xstreet/>
<unittype/>
<unit/>
<postal>05-090</postal>
<neighborhood>Falenty</neighborhood>
<city>Raszyn</city>
<county>Pruszkow County</county>
... 
```

但如果我按城市搜索，我不想按社区搜索。如果没有这个名字的城市，我不想得到任何结果。

是否有人知道这是否可能，或者我是否需要遍历结果并排除城市与 URI 中发送的城市不同的结果？这不是一个优雅的解决方案，因为有时它会给我超过 10 个结果，而我正在搜索的城市甚至没有 1 个结果。

# r - 函数命名冲突

> ID：11490359
> 
> 赞同：6
> 
> 时间：2012-07-15T07:52:53.247
> 
> 标签：r, conflict, naming, data.table, lubridate

使用定义相同功能的包进行开发有哪些好的模式？就我而言，`lubridate`两者`data.table`都定义`wday`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T08:13:27.773

您可以使用`::`，它有助于指定要使用的包：

```
lubridate::wday
function (x, label = FALSE, abbr = TRUE) 
UseMethod("wday")
<environment: namespace:lubridate>

data.table::wday
function (x) 
as.POSIXlt(x)$wday + 1L
<environment: namespace:data.table> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T10:35:32.647

为您的包使用命名空间机制。请参阅 R 扩展手册。

# zend-framework - Zend 框架 - DbAdapter 问题

> ID：11490363
> 
> 赞同：0
> 
> 时间：2012-07-15T07:54:04.283
> 
> 标签：zend-framework

我正在调整我的 Zend 框架以根据以下内容使用 phpass：http: [//jonathanstreet.com/blog/adding-phpass-to-zend-framework/](http://jonathanstreet.com/blog/adding-phpass-to-zend-framework/)

按照他的步骤，我在他的 Acai_Auth_Adapter_DbTable 中遇到了这个错误：

```
Exception information:

Message: No entry is registered for key 'DbAdapter' 
```

我该如何解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:20:26.537

您必须定义数据库适配器，该类应该通过使用key`Acai_Auth_Adapter_DbTable`存储数据库适配器来使用它。最好的地方是你的：`Zend_Registry``DbAdapter``Bootstrap.php`

```
protected function _initDb()
{
  // add code to create a `Zend_Db_Adapter_xxx`
  Zend_Registry::set('DbAdapter') = $dbAdapter;
} 
```

如何设置您在[Zend 框架下找到的数据库适配器：文档：Zend_Db_Adapter](http://framework.zend.com/manual/en/zend.db.adapter.html#zend.db.adapter.connecting)。

另一种方法是将数据库适配器作为参数传递：

```
// create a database adapter
$authAdapter = new Acai_Auth_Adapter_DbTable( $dbAdpater ): 
```

我会推荐第一种方式，因为这样您就可以使用`Zend_Registry::get('DbAdapter')`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:56:28.183

假设您的数据库适配器已在 application.ini 中设置，类似于：

```
resources.db.adapter = "pdo_Mysql"
resources.db.params.username = "music"
resources.db.params.password = "music"
resources.db.params.dbname = "music"    
resources.db.isDefaultTableAdapter = true // add this line to make this adapter default, important if using more then one adapter. 
```

在您的 bootstrap.php 中，您可以创建一个类似于以下内容的新方法：

```
 protected function _initDbAdapter() {//can be named anything as long as it starts with _init
        $db = new Zend_Config($this->getOptions('db'));//get all db adapter resources
        Zend_Registry::set('DbAdapter', $db); //save to Zend_registry key DbAdapter
    } 
```

ByteNudger 关于如何使用注册表是正确的：
`$authAdapter = new Acai_Auth_Adapter_DbTable( $dbAdpater );`

然而，有一种方法可以避免所有这些引导业务。如果您只使用一个数据库适配器，请尝试：

```
//This will pass in the currently default adapter, if you only have one adapter...
$authAdapter = new Acai_Auth_Adapter_DbTable(Zend_Db::getDefaultAdapter); 
```

希望这可以帮助。

# php - 西里尔文 (windows-1251) jQuery ajax 发布错误

> ID：11490367
> 
> 赞同：1
> 
> 时间：2012-07-15T07:54:32.290
> 
> 标签：php, ajax, database, post

当我尝试将西里尔文（俄语）字符发送到数据库（CP 1251 col）时遇到问题。我尝试发送：“Фамилия, Имя”，但在数据库中显示为“Р¤Р°РјРёР»РёСЏ, РРјСЏ”。有趣的是，当我在没有 Ajax 的情况下发送相同的数据（相同的表单，但请求很简单）时，它可以正常工作。所以，这不是数据库连接问题等等......问题出在我的 Ajax 脚本中。我希望你能帮忙。谢谢。

这是我的代码：

JS文件：

```
$(function() {
  $('.error').hide();
  function emailCorect(adresaEmail) {
    var shablon = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
    return shablon.test(adresaEmail);
  };

  $("#submit_btn").click(function() {
    // validate and process form
    // first hide any error messages
    $('.error').hide();
    var name = $("input#name").val();
    var email = $("input#email").val();
    var txt = $("#txt").val();
    if(name == "" || email == "" || !emailCorect(email) || txt == "") {
      if (name == "") {
        $("#name_error").show();
        $("input#name").focus();
      }
      if (email == "") {
        $("#email_error").show();
        $("input#email").focus();
      }
      if(!emailCorect(email)) {
        // in case it's not a valid e-mail-ul
        $("#email_error").show();
        $("input#email").focus();
      }
      if (txt == "") {
        $("#txt_error").show();
        $("#txt").focus();
      }
      return false;
    }
    var dataString = 'name='+ name + '&email=' + email + '&txt=' + txt;
    $.ajax({
      type: "POST",
      url: "./../ajax/opinii.php",
      data: dataString,
      success: function() {
        $('#adauga').html("<div id='ajax_succes_txt'></div>");
        $('#ajax_succes_txt').fadeIn(1500, function() {
          $('#ajax_succes_txt').html("<img src='../juststy/images/check.png' /><br />").append("Opinia dvs. a fost publicat&#259;.<br /><span style='font-size: 10px; color:red;'><b>aten&#355;ie:</b> dac&#259; vei publica opinii &icirc;ntr-un interval scurt de timp, acestea nu vor fi publicate.");
        });
        $('#render').load("./../inc/1/");
      }
    });
    return false;
  });
}); 
```

PHP 文件：

```
<?php
  require_once("./../core/system.php");
  dbconnect();
  $name = $_POST['name'];
  $email = $_POST['email'];
  $txt = $_POST['txt'];
  $query = mysql_query("INSERT INTO opinii(name,mail,txt,ip,data) VALUES(
    ".sqlesc($name).",".sqlesc($email).",".sqlesc($txt).",".
    sqlesc($_SERVER['REMOTE_ADDR']).",".sqlesc(get_time()).")")
    or die(mysql_error());
  if($query){echo "OK"; }?> 
```

PHP 连接函数（添加于 13:15 15-07-2012）

```
function dbconnect($mode = "load")
{
    global $mysql_host, $mysql_user, $mysql_pass, $mysql_db;

    $link = @mysql_connect($mysql_host, $mysql_user, $mysql_pass);

    if (!@mysql_connect($mysql_host, $mysql_user, $mysql_pass)) 
    {
        die('A intervenit o eroare la conectarea cu baza de date. Dac&#259; e&#351;ti un utilizator, revino mai t&acirc;rziu.');
    }

    mysql_select_db($mysql_db) or die('A intervenit o eroare la selectarea bazei de date. Dac&#259; e&#351;ti un utilizator, revino mai t&acirc;rziu.');

    switch($mode) {
        case "load":    
            mysql_query("SET NAMES cp1251");
            break;
        case "insert":
            mysql_query("SET NAMES utf8");
            break;
    }

} 
```

# windows - 如何获取从 Internet 浏览器到我的应用程序的已删除链接？

> ID：11490372
> 
> 赞同：0
> 
> 时间：2012-07-15T07:56:02.383
> 
> 标签：windows, delphi, hyperlink, browser

好吧，我的应用程序有一个窗口。当我的 Internet 浏览器（例如 Mozilla Firefox）的链接被拖放到我的应用程序窗口时，我想做一些事情。我该怎么办？我已经搜索了一段时间，但我找不到任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T08:15:48.340

最简单的方法是使用[拖放组件套件](http://melander.dk/delphi/dragdrop/)。

# asp.net - 运行后不显示visual studio 2005网页

> ID：11490378
> 
> 赞同：0
> 
> 时间：2012-07-15T07:57:58.697
> 
> 标签：asp.net, visual-studio-2005

我使用 VS2005 的浏览器中没有显示页面。我正在开发 Web 项目。但我的问题是每当我运行我的页面时..URL .我得到的是这个 http://localhost:23644/UI/LoginUI.aspx 但我得到的页面是“Internet Explorer 无法显示网页”对于其他Web 应用程序提供相同的浏览器消息..虽然 URL 正在更改为特定的 URL。

任何人都可以在这个问题上帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T08:05:16.233

您能否检查一下本地主机服务器（IIS）是否已启动？虽然对于 Visual Studio，IDE 会自行启动服务器，但您始终可以交叉检查服务器是否通过 services.msc 启动。还要检查端口 23644 是否空闲。

# objective-c - 斯坦福 iTunes U CS193P 作业 3，两个 ViewController 之间的通信

> ID：11490384
> 
> 赞同：1
> 
> 时间：2012-07-15T07:59:26.747
> 
> 标签：objective-c, uiviewcontroller, protocols, communication, cs193p

好的，我知道新图形 vc 的模型将成为计算器大脑的子类，但是如何将 CalculatorBrain 的程序堆栈从旧 VC 获取到新 VC 的 GraphingBrain？我是否必须在 Storyboard-segue 的堆栈中走下去？

我在新轴设置上进行了捏合和平移，以及在新图形大脑和图形 vc 之间进行通信的委托。但是，用户在“困”在旧 MVC 中之前输入的我的 programStack 不是吗？

我想我已经理解了这个概念，但我看不到这种交流发生的方式。

提前致谢！

***对于那些不遵循课程的人，我有两个由 NavigationController 链接的 MVC。用户输入一系列数字和操作（在第一个 MVC 中），然后将其存储在第一个 MVC 模型中的数组中。当一个按钮被按下时，它会转到一个新的 MVC，它需要在前一个 MVC 中输入的数组。如何在两个看似独立的 MVC 之间传输该数组？我认为我不能在第二个 VC 中拥有一个属性并从第一个 VC 设置它，因为它（第二个 MVC）尚未实例化。它可能与 preparteToSegue 相关，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:21:26.217

经历了 CS193P（远远超过一半），我想我理解你的问题。以下是您需要记住的内容：

沿着 MVC (C --> V) 路径发送一个属性值，在这种情况下，V 持有另一个 MVC；使用 PrepareForSegue。无论目的地是否已实例化，您都需要做一些事情：

1.  在第一类、第二类的.h或.m文件头中导入。
2.  在 prepareForSegue 中，创建 2nd 类的实例并将其设置为等于 segue.destinationViewController。您需要将后者类型转换为第二类。
3.  现在您可以将您创建的（第二类）这个实例的属性设置为您想要的任何值。
4.  您不能从 prepareForSegue 为第二个类设置任何 IBoutlet 值，因为直到 ViewDidLoad 之后才会设置 IBOutlet。
5.  出于某种奇怪的原因，如果您确实使用条件来检查 segue.identifier，您将需要将语句括在 {} 中，即使它只有一个语句。

希望这会有所帮助并让果汁流动......

九巴

# c# - 如何处理 GridView 的 PageIndexChanging 事件上的 JavaScript 确认对话框？

> ID：11490385
> 
> 赞同：0
> 
> 时间：2012-07-15T07:59:43.487
> 
> 标签：c#, javascript, asp.net, gridview, page-index-changed

我想要做的是当用户试图转到 GridView 控件内的不同页面时，我想显示 JavaScript 的确认对话框。如果用户点击`OK`然后页面应该改变。如果不是页面不应该。

我目前所做的是在触发 GridView 的 PageIndexChanging 事件时显示确认对话框，但我似乎无法找到一种方法来检查在确认对话框中单击了哪个按钮以及如何处理它。

此外，GridView 位于 UpdatePanel 内，该`ScriptManager.RegisterStartupScript`方法用于显示确认对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T08:28:30.553

首先，您需要在 scriptmanager 的 DataItem 列表中注册您的脚本。然后创建处理此事件的客户端脚本。

您也可以通过以下方法执行此操作：ScriptManager.RegisterClientScriptBlock。[这](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerclientscriptblock.aspx)是它的文档。

您可以参考[一些示例](http://msdn.microsoft.com/en-us/library/aa719700%28v=vs.71%29.aspx)。

# arrays - 确定两个数组在排列之前是否相同？

> ID：11490390
> 
> 赞同：2
> 
> 时间：2012-07-15T08:01:29.623
> 
> 标签：arrays, algorithm

> **可能重复：**
> [检查数组 B 是否是 A 的排列](https://stackoverflow.com/questions/10639661/check-if-array-b-is-a-permutation-of-a)

有没有办法判断两个数字数组（可以包含正数、负数或重复数）在`O(n)`时间复杂度和`O(1)`空间复杂度上是否相互排列？由于空间有限，我无法解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T08:09:03.613

如果数字是整数 -[就地基数排序](http://en.wikipedia.org/wiki/Radix_sort#In-place_MSD_radix_sort_implementations)可以给你`O(nlogk)`时间，其中`k`是数字的范围，`n`是元素的数量。
请注意，该算法需要`O(logk)`空间，用于递归调用的堆栈跟踪。
如果您可以绑定`k`到一个常数（例如 2^64） - 您将获得空间`O(n)`时间`O(1)`。

排序后 - 您可以简单地迭代两个数组并检查它们是否相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T08:12:25.500

如果您对数字本身的范围有硬性限制，则可以这样做。

例如，假设您知道您有两个数组 A 和 B，并且这些数字绑定在 -128 和 +127（8 位有符号）之间。您只需拥有 256 个位置的数组。每个数字`n`都将映射到该位置`n + 128`。

您遍历两个数组，对于数组 A，您将增加相应的位置，对于数组 B，您将减少。然后检查所有位置是否为 0。如果是，则数组是排列，如果不是，则不是。

时间复杂度为`O(n+k)`。空间复杂度是`O(k)`数字`k`的范围。既然`k`是独立于 的`n`，那么这就是`O(n)`and`O(1)`就目前`n`而言，只要你有一个界限`k`。

另请注意，时间复杂度可以进一步降低到简单地`O(n)`代替`O(n+k)`. 您只需保留计数非零的数字的运行总数。每次增量/减量将计数从其他事物推入时，您都会增加运行总数。每次它被推*到*零时，你都会减少总数。最后，如果总数为 0，则所有计数均为 0。

编辑：虽然阿米特的答案可能具有更好的空间复杂度:)

PS：但是，如果数字数组被流入，则可以应用此算法，因此它们实际上不必全部保存在内存中。*因此，如果*条件正确，它可能比直接排序具有更小的空间复杂度

# jquery - query_posts 中的 Wordpress 附件

> ID：11490391
> 
> 赞同：1
> 
> 时间：2012-07-15T08:01:29.620
> 
> 标签：jquery, global-variables, infinite-scroll

早晨，

我需要一些关于一些 WP 代码的指导。我想知道是否可以使用此代码（它从我网站上的帖子中获取所有图像并将它们转储出来）：

```
$args = array( 'post_type' => 'attachment', 'numberposts' => -1, 'post_status' => null, 'post_parent' => null ); 
$attachments = get_posts( $args );
if ($attachments) {
foreach ( $attachments as $post ) {
    setup_postdata($post);
    the_attachment_link($post->ID, true);
    the_excerpt();
}
} 
```

并改用`query_posts();`WP 中的函数，这样我就可以为所有图像创建一些分页。

在此先感谢，

**更新**

我似乎在下面有一些东西可以解决这个问题，但它正在无限地拉入一个帖子。

```
 <?php $ID = get_the_ID();
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
query_posts("order=DESC&orderby=post_date&posts_per_page=8&paged=$paged"); while ( have_posts() ) : the_post(); ?>

    <?php
    $args = array( 'post_type' => 'attachment', 'post_status' => null, 'post_parent' => null, );
    $attachments = get_posts( $args );
    if ($attachments) {
        foreach ( $attachments as $post ) {
            setup_postdata($post);
            the_attachment_link($post->ID, true);
            the_excerpt();
        }
    }
    ?>

<?php endwhile; ?> 
```

# python - 如何保持重复元素的索引不变

> ID：11490393
> 
> 赞同：1
> 
> 时间：2012-07-15T08:01:30.820
> 
> 标签：python, map, indexing, enumerate

这是一个输入列表：

```
['a', 'b', 'b', 'c', 'c', 'd'] 
```

我期望的输出应该是：

```
[[0, 'a'], [1, 'b'],  [1, 'b'], [2, 'c'], [2, 'c'], [3, 'd']] 
```

我尝试使用 map()

```
>>> map(lambda (index, word): [index, word], enumerate([['a', 'b', 'b', 'c', 'c', 'd']])
[[0, 'a'], [1, 'b'], [2, 'b'], [3, 'c'], [4, 'c'], [5, 'd']] 
```

我怎样才能得到预期的结果？

**编辑**：这不是一个排序列表，每个元素的索引只有在遇到新元素时才会增加

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T08:10:46.427

```
>>> import itertools
>>> seq = ['a', 'b', 'b', 'c', 'c', 'd']
>>> [[i, c] for i, (k, g) in enumerate(itertools.groupby(seq)) for c in g]
[[0, 'a'], [1, 'b'], [1, 'b'], [2, 'c'], [2, 'c'], [3, 'd']] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T08:14:43.520

```
[
    [i, x]
    for i, (value, group) in enumerate(itertools.groupby(['a', 'b', 'b', 'c', 'c', 'd']))
    for x in group
] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T08:12:56.243

听起来您想根据字典顺序对术语进行排名。

```
input = ['a', 'b', 'b', 'c', 'c', 'd']
mapping = { v:i for (i, v) in enumerate(sorted(set(input))) }
[ [mapping[v], v] for v in input ] 
```

请注意，这也适用于未排序的输入。

如果如您的修正案所建议的那样，您想根据首次出现的顺序对项目进行编号，则可以采用不同的方法。以下是简短而甜蜜的，尽管令人反感：

```
[ [d.setdefault(v, len(d)), v] for d in [{}] for v in input ] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T08:13:39.573

当列表被排序时使用`groupby`（见 jamylak 答案）；如果没有，只需遍历列表并检查您是否已经看过这封信：

```
a = ['a', 'b', 'b', 'c', 'c', 'd']
result = []
d = {}
n = 0
for k in a:
  if k not in d:
     d[k] = n
     n += 1
  result.append([d[k],k]) 
```

这是最有效的解决方案；它只需要 O(n) 时间。

未排序列表的用法示例：

```
[[0, 'a'], [1, 'b'], [1, 'b'], [2, 'c'], [2, 'c'], [3, 'd'], [0, 'a']] 
```

如您所见，此处的项目顺序与输入列表中的相同。

当您首先对列表进行排序时，您需要 O(n*log(n)) 额外的时间。

# php - 使用文件名的一部分在 PHP 中搜索图像

> ID：11490395
> 
> 赞同：1
> 
> 时间：2012-07-15T08:01:41.750
> 
> 标签：php, image, substring

我正在使用下面的代码使用 PHP 在目录中搜索大约 11 个 JPG 图像文件

```
 $dbImage=$row["pref"];
        $imageName=$dbImage;
        $str2 = substr($imageName, -4);
        $extension=".jpg";
        $fileName=$str2.$extension;
        echo "<img src='Images/proppics/$filename'>"; 
```

但是，这似乎不起作用，并显示一个空框。

文件命名如下，

```
AT-1410f1654.jpg
AT-1410_1655.jpg
AT-1410_1656.jpg
AT-1410_1657.jpg
AT-1410_1658.jpg
AT-1410_1659.jpg 
```

如您所见，第一张图片有 7 个字符，后跟字母 f。其余图像由_分隔。我需要执行的是在幻灯片中显示所有图像（仅前 7 个字符）。并且以 f 分隔的图像应显示在页面顶部。任何想法如何执行此任务，以及先前编码错误的原因

完整代码

```
// rows to return
$limit=10; 
$con=mysql_connect("localhost","root","");
mysql_select_db("movedb") or die("Unable to select database");
$query="select * FROM properties where `name`='Beata Grande 1' & `catergory`='Villas'& `price`=202800 & `area`='Arenas'& `bedrooms`=2 & `region`='Axarquia'";
$numresults=mysql_query($query,$con);
$numrows=mysql_num_rows($numresults);
$result = mysql_query($query) or die("Couldn't execute query");
echo "<center>";
echo "<p>You searched for: &quot;" . $properties . "&quot;</p>";
echo "<form name=payment action='properties_details.php'>";
echo "Results <br>";
  while ($row= mysql_fetch_array($result)) {
    $id=$row['id'];
    $pid=$row['pref'];
    // Retrieve the balance database fields

      echo "<p>Property ID &nbsp".$pid;
      echo "<br> <p> Name &nbsp";
      echo $row["name"];
      echo "<br>  Properties &nbsp";
      echo $row["catergory"];
      echo "<br> Description &nbsp";
    // Print results
 echo "<br>";
 echo "<input type=submit name=btnbuy value=MoreDetails> "; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T08:07:34.333

PHP 中的变量名**[区分大小写](http://php.net/manual/en/language.variables.basics.php)**。

您的变量被调用`$fileName`，但您在`echo`语句中使用它 as `$filename`。

代替

```
echo "<img src='Images/proppics/$filename'>"; 
```

和

```
echo "<img src='Images/proppics/$fileName'>"; // Capital 'N' 
```

# android - 我的 Android 应用程序被报告有病毒

> ID：11490400
> 
> 赞同：4
> 
> 时间：2012-07-15T08:03:11.343
> 
> 标签：android

我在 Play 商店中上传了一个应用程序，我收到了几条评论说它有病毒，有时它会强制手机自行重启。我的应用程序中的代码非常简单：只有一个活动有多个位置，您可以听到它们或将它们设置为铃声。你能给我什么建议吗？

我的应用程序代码：

```
b1_2.setOnClickListener(new View.OnClickListener() {
  public void onClick(View v) {
    if(saveas(soundid,save_name)){
      Toast.makeText(Main.this, "The sound was set as ringtone!",
        Toast.LENGTH_LONG).show();
    };
  }
});
public boolean saveas(int ressound,String filename){
  byte[] buffer=null;
  InputStream fIn = getBaseContext().getResources().openRawResource(ressound);
  int size=0;
  try {
    size = fIn.available();
    buffer = new byte[size];
    fIn.read(buffer);
    fIn.close();
  } catch (IOException e) {
    // TODO Auto-generated catch block
    return false;
  }
  String path="/sdcard/media/ringtones/";
  boolean exists = (new File(path)).exists();
  if (!exists){new File(path).mkdirs();}
  FileOutputStream save;
  try {
    save = new FileOutputStream(path+filename);
    save.write(buffer);
    save.flush();
    save.close();
  } catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    return false;
    } catch (IOException e) {
      // TODO Auto-generated catch block
      return false;
    }
    sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE,
      Uri.parse("file://"+path+filename)));
    File k = new File(path, filename);
    ContentValues values = new ContentValues();
    values.put(MediaStore.MediaColumns.DATA, k.getAbsolutePath());
    values.put(MediaStore.MediaColumns.TITLE, "clip_"+save_name);
    values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mp3");
    values.put(MediaStore.Audio.Media.ARTIST, "clip");
    values.put(MediaStore.Audio.Media.IS_RINGTONE, true);
    values.put(MediaStore.Audio.Media.IS_NOTIFICATION, true);
    values.put(MediaStore.Audio.Media.IS_ALARM, true);
    values.put(MediaStore.Audio.Media.IS_MUSIC, true);
    //Insert it into the database
    Uri uri = MediaStore.Audio.Media.getContentUriForPath(k.getAbsolutePath());
    getContentResolver().delete(uri, MediaStore.MediaColumns.DATA + "=\"" +
      k.getAbsolutePath() + "\"", null);
    Uri newUri= this.getContentResolver().insert(uri, values);
    RingtoneManager.setActualDefaultRingtoneUri(
      this, RingtoneManager.TYPE_RINGTONE, newUri);
    return true;
  } 
```

所需的权限是：

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.WRITE_SETTINGS"></uses-permission>
     <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

它可以在没有互联网的情况下工作，但我只有一个直接链接到我在 google play 商店中的开发人员页面，为了避免崩溃，我使用了这个功能：

```
(if link is pressed)
  if (isOnline()){
    open page
} else {
  do nothing
}
public boolean isOnline() {
        boolean connectedWifi = false;
        boolean connectedMobile = false;

        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo[] networks = cm.getAllNetworkInfo();
        for (NetworkInfo ni : networks) {
            if ("WIFI".equalsIgnoreCase(ni.getTypeName()))
                if (ni.isConnected())
                    connectedWifi = true;
            if ("MOBILE".equalsIgnoreCase(ni.getTypeName()))
                if (ni.isConnected())
                    connectedMobile = true;
        }
        return connectedWifi || connectedMobile;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T01:17:05.883

首先，您的 Android 应用程序“有病毒”的概念是愚蠢的。如果您的应用程序中有*恶意代码*，那是因为您开发的应用程序中包含恶意代码。

这里很可能发生的是您的应用程序中有一个 BUG。更糟糕的是，您的用户正在使用的 Android SDK 也有一个错误（因为操作系统正在崩溃，而这绝不应该发生）。如果不仔细分析您的所有代码，这里的任何人都很难直接回答您的代码和/或 Android SDK 中的错误在哪里。

我建议弄清楚这个错误经历过哪些设备和 SDK 版本，然后我会开始在这些设备/SDK 上测试应用程序。由于您认为该错误可能与 Internet 连接有关，因此请在启用、禁用 Internet 连接和弱连接的情况下测试应用程序。请记住，您可能会在以前的 Android SDK 中遇到已知错误。

您还可以启动安装了[Crittercism](http://www.crittercism.com/)（或其他类似库）的下一个版本，以帮助您追踪崩溃。

# objective-c - 如何在 UITableViewCell 中添加复选标记

> ID：11490404
> 
> 赞同：2
> 
> 时间：2012-07-15T08:03:56.840
> 
> 标签：objective-c, xcode, cocoa-touch, uitableview

假设我有一个小表格视图（无滚动），当用户点击一个选项时，它会更改应用程序中的一些设置。我使用了这个功能：

```
- (void)tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
      //some code here
} 
```

现在我想`UITableViewCellAccessoryCheckmark`用于选择的选项，我的意思是它应该在用户选择的单元格中显示一个复选标记（并从先前选择的选项中删除复选标记）。我怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T09:04:07.480

怎么样

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath;
{
  for (UITableViewCell *cell in [tableView visibleCells]) {
    cell.accessoryType = UITableViewCellAccessoryNone;
  }

  UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
  cell.accessoryType = UITableViewCellAccessoryCheckmark;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T08:10:42.987

只需使用`accessoryType`a 的属性`UITableViewCell`。

```
@property(nonatomic) UITableViewCellAccessoryType accessoryType 
```

像这样：

```
- (void)tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

      //code for reusing or init a new cell goes here

      cell.accessoryType = UITableViewCellAccessoryCheckmark;
} 
```

# amazon-s3 - 对象与文件有何不同？

> ID：11490410
> 
> 赞同：0
> 
> 时间：2012-07-15T08:06:17.070
> 
> 标签：amazon-s3, cloud, storage, walrus

Walrus、S3 或任何云存储系统如何接收文件并以编程方式将其转换为对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:37:05.667

要大致了解云对象存储系统如何存储对象（二进制文件），您可以阅读[Swift Object Storage-Openstack](http://docs.openstack.org/developer/swift/index.html)的文档。

Swift 类似于 Amazon S3，因此也类似于 Walrus。

Swift 通过代理服务器与客户端（集群外部）进行通信，客户端可以通过 RESTful HTTP API 存储、删除对象。服务器维护**Ring** -Configuration 文件，该文件维护文件及其物理位置之间的映射。

当有上传文件的请求时，根据文件的路径计算 MD5 哈希。

请在以下位置找到详细信息：

[Openstack Swift 架构](http://swiftstack.com/openstack-swift/architecture/index.html#swift_cluster_architecture)

[斯威夫特文档](http://docs.openstack.org/developer/swift/overview_ring.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T08:26:21.000

如果您问 S3 如何将其对象放置在其内部服务器的磁盘上，我们不知道（实现细节不公开。）

他们*很可能*做的是获取您对象的密钥（存储桶 + 路径）并咨询 将您的对象映射到一组服务器的[一致哈希。](http://en.wikipedia.org/wiki/Consistent_hashing)上传被定向到这些服务器之一（基本上是随机的），该服务器存储它并将未来的工作排入队列以将新对象传播到负责复制它的其他服务器。

[这种复制延迟是最终一致性](http://en.wikipedia.org/wiki/Eventual_consistency)的潜在需求。我还曾在某处听说亚马逊在存储级别使用[纠错编码来进一步支付错误读取。](http://en.wikipedia.org/wiki/Error-correcting_code)

# php - Facebook getUser() 总是返回 0

> ID：11490411
> 
> 赞同：0
> 
> 时间：2012-07-15T08:06:25.003
> 
> 标签：php, facebook, cakephp

我已经开发了一个简单的方法来进行 Facebook 登录，这是代码：

```
 public function auth()
   {   
      $config = array(
         'appId'  => Configure::read('FB.id'),
         'secret' => Configure::read('FB.secret'),
         'cookie' => true      
      );

      $this->provider = new Facebook($config);

      $user = $this->provider->getUser();

      debug($user);
      debug($_GET['code']);

      if ($user)
        {
            return $user;
      }          

      // Errors?
      if (!isset($this->controller->request->query['error']))
      {
         $params = array(
            'scope'        => Configure::read('FB.scope'),
            'redirect_uri' => Configure::read('FB.callback')
         );

          // Redirect login page
         $this->controller->Session->write('login.redirect', $this->provider->getLoginUrl($params));                                               
      }
        return false;
   } 
```

方法很简单，我是按照 Facebook SDK 的例子来的。

我在检索用户信息时遇到问题，因为当 Facebook 调用我的 redirect_uri 时，我得到了以下参数（查询字符串）

*   状态
*   代码

所以，我没有从 Facebook 收到任何错误.....但是 getUser() 仍然返回 0。

为什么？

**＃＃＃＃＃ 编辑： ＃＃＃＃＃**

这真的太奇怪了......它只有在我使用 facebook 应用程序 uri 更改重定向 uri 时才有效，我更改了：

```
https://www.mywebsite.com/panel/ 
```

和

```
https://apps.facebook.com/MY_APP/panel/ 
```

它有效....嗯，为什么我必须使用 Facebook URL？

PS我正在使用CakePhp，我知道有插件可以为我完成这项工作，但我也是从CakePhp开始的，所以我会学习编写它的代码。

# git - 如何从 git 分支中删除文件

> ID：11490415
> 
> 赞同：5
> 
> 时间：2012-07-15T08:07:33.677
> 
> 标签：git, github, repository

我提交了一个文件，但没有推送到存储库，一个文件到一个分支，即`abc`. 现在我想从这个分支中删除它`abc`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T08:25:01.447

我假设您想从历史记录中删除该文件，就好像它从未存在过一样。如果您只想在以后的提交中删除该文件，请使用`git rm my-bad-file.txt`并忽略我的其余答案。

* * *

如果该文件仅在您最近的提交中，那么最简单的方法`git rm my-bad-file.txt`是删除该文件，然后`git commit --amend`编辑之前的提交。

如果有多个提交包含有问题的文件，那么[`git filter-branch`](http://git-scm.com/docs/git-filter-branch)可能会有用。

```
git filter-branch --index-filter 'git rm --cached --ignore-unmatch my-bad-file.txt' master..abc 
```

这表示：

*   **`git filter-branch`**: 让我们重写一些提交！

*   **`--index-filter`**：更改每个提交的索引而不实际在磁盘上检查它。

*   **`'git rm --cached --ignore-unmatch my-bad-file.txt'`**：对于每个提交，如果存在名为“my-bad-file.txt”的文件，则取消暂存该文件。

*   **`master..abc`**：对分支 abc 上的所有提交执行此操作，返回到它从主分支分叉的位置。

# android - Android应用程序：背景颜色的背景图像

> ID：11490416
> 
> 赞同：8
> 
> 时间：2012-07-15T08:07:56.880
> 
> 标签：android, android-layout, background-image, background-color

我是 android 开发新手，正在开发我的第一个 android 应用程序。我在布局的 xml 中设置了 View 的背景颜色，如下所示。

```
android:background="@+color/bgColor" 
```

现在，我有一个全尺寸的透明背景图像，我想将其放在背景上，然后将其他元素放在该图像上。

有没有办法可以在同一布局中同时使用背景颜色和背景图像。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-15T08:14:53.877

您可以使用带有背景颜色的 ImageView：

```
<ImageView
    layout_width="match_parent"
    layout_height="match_parent"
    src="@drawable/myImage"
    background="@color/myBgColor" /> 
```

另一种选择是在布局的根元素中设置背景颜色，并将 src 保留在 ImageView 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-01T14:43:24.960

我正在使用`AppCompatImageView`. 在此背景色中，可以使用以下属性设置。

```
android:backgroundTint="@color/colorPrimary" 
```

# php - 我应该如何使用 CakePHP 组合静态 + 非静态内容

> ID：11490418
> 
> 赞同：1
> 
> 时间：2012-07-15T08:08:19.340
> 
> 标签：php, cakephp

我对 Cake 很陌生，我不完全了解我应该如何组合内容。

我有 5-6 个静态页面，它们默认为页面控制器提供服务，因此它们通过链接 example.com/pages/page_name 打开，我只为它们创建视图。

但是对于其中一些页面，我想添加 CRUD 功能。

> ```
> For example:
>   example.com/pages/index - static
>   example.com/pages/news - have CRUD
>   example.com/pages/about - static
>   etc. 
> ```

我如何看待这个问题的解决方案：1.为需要CRUD的页面制作模型+控制器，然后路由

Router::connect('/pages/news', array('controller' => 'news', 'action' => 'display'));

我是对的还是有其他更正确的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T08:28:49.947

CakePHP 是一个 MVC 框架，代表：模型、视图、控制器。因此，基本上，您发出的每个请求都应该通过一个控制器，该控制器将大致执行以下操作：

1.  如果请求需要来自 DB 的数据 -> 从模型中获取数据并将其传递给来自模型的数据的视图。
2.  如果请求不需要额外的数据，则传递到适当的视图。

所以回答你的问题：是的，你需要有一个“新闻”控制器和一个“新闻”模型，并且一旦从模型中获取数据，就需要注册该控制器并将数据传递给视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T10:45:43.570

将 Cake/libs/controllers 目录中的 PagesController 复制到您的 app/controllers 目录中，并像使用任何其他控制器一样使用它。您可以在其中创建一个`function news`加载模型 ( `$this->loadModel()`) 的模型，或者通常像任何常规控制器一样在 PagesController 中包含模型。

It may be a better idea to make a dedicated NewsController, but that's up to you and how you want to organize your app. As you say, you can "alias" the URL pointing to the NewsController to something else if that makes more sense.

# java - Java 中的 .intValue() 是什么？

> ID：11490425
> 
> 赞同：34
> 
> 时间：2012-07-15T08:09:21.010
> 
> 标签：java

它们之间有什么区别？

*`l`是一个整数类型的数组列表。*

版本 1：

```
int[] a = new int[l.size()];
for (int i = 0; i < l.size(); i++) {
    a[i] = l.get(i);
}
return a; 
```

版本 2：

```
int[] a = new int[l.size()];
for (int i = 0; i < l.size(); i++) {
    a[i] = l.get(i).intValue();
}
return a; 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-15T08:13:14.783

`l.get(i);`将返回`Integer`，然后调用`intValue();`它将返回整数作为 type `int`。

转换`int`为`Integer`称为**装箱**。
将一个转换`Integer`成`int`称为**拆箱**
等等，用于其他原始类型与其对应的 Wrapper 类之间的转换。

从 java 5 开始，它会自动为您进行所需的转换（自动装箱），因此**如果您使用 Java 5 或更高版本，您的示例没有区别**。**您唯一需要注意的是**如果 an`Integer`为 null，并且您直接将其分配给它，`int`那么它将抛出 NullPointerException。

在 java 5 之前，程序员自己必须做装箱/拆箱。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-15T08:21:07.603

正如您所注意到的，`intValue`当您已经知道自己有一个`Integer`. 但是，此方法不是在 中声明的`Integer`，而是在通用`Number`类中声明的。在您只知道自己拥有一些 的情况下`Number`，您将意识到该方法的实用性。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-15T08:15:11.430

**l.get(i)**返回的 Object是**Integer**类的一个实例。

**intValue()是返回原始****int的****Integer**类的实例方法。

 **请参阅 Java 参考文档... [http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#intValue()](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#intValue%28%29)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-15T08:25:13.830

Java 支持两种类型的结构，第一是原语，第二是对象。

您要询问的方法用于将值从 Object 检索到原始值。

所有表示数字的 java 类型都扩展类[Number](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Number.html)。如果您使用相同的原始类型和对象类型，则此方法在某种程度上已被弃用，因为 [autoboxing] 是在 Java 1.5 中实现的。

> int - 原始的
> 
> 整数 - 对象

在 Java 1.5 之前，我们被迫编写

`int i = integer.intValue();`

从 Java 1.5 开始，我们可以编写

`int i = integer;`

当我们需要将类型从 Integer 更改为 long 时，也会使用这些方法

`long l = integer.longValue();`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-28T04:03:36.157

考虑这个例子：

```
Integer i = new Integer(10);
Integer j = new Integer(10);
if (!(i == j)) {
    System.out.println("Surprise, doesn't match!");
}
if (i.intValue() == j.intValue()) {
    System.out.println("Cool, matches now!");
} 
```

哪个打印

```
Surprise, doesn't match!
Cool, matches now! 
```

这证明这`intValue()`是非常重要的。更重要的是因为 Java 不允许将原始类型直接存储到容器中，而且我们经常需要比较存储在它们中的值。例如：

```
oneStack.peek() == anotherStack.peek() 
```

不像我们*通常*期望的那样工作，而下面的语句完成了工作，就像一个解决方法：

```
oneStack.peek().intValue() == anotherStack.peek().intValue() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-15T08:13:36.663

`get(i)`将返回`Integer`对象并在您调用时获取其值`intValue()`。在第一种情况下，会自动`auto-unboxing`发生。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-15T08:17:05.880

这只是从以下对象获取原始值的便捷方法：http `Number`: [//docs.oracle.com/javase/1.4.2/docs/api/java/lang/Number.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Number.html)

考虑代码：

```
Integer integerValue = Integer.valueOf(123);
float floatValue = integerValue.floatValue(); 
```

最后一行是一个方便的方法：

```
float floatValue = (float)(int)integerValue; 
```

由于 Java 中的任何数字类型都可以显式转换为任何其他原始数字类型，`Number`因此类实现了所有这些转换。像往常一样，其中一些没有多大意义：

```
Integer integerValue = Integer.valueOf(123);
int intValue = integerValue.intValue();
int intValue2 = (int)integerValue;
int intValue3 = integerValue; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-15T08:19:08.587

它们完全相同。正如其他海报所提到的，您可以将`Integer`对象或`int`原语放入数组中。在第一种情况下，编译器会自动将`Integer`对象转换为原语。这称为自动装箱。**

# c# - 在枚举运算符的帮助下实现属性

> ID：11490426
> 
> 赞同：-1
> 
> 时间：2012-07-15T08:09:36.013
> 
> 标签：c#, .net, properties, enums

我是 C# 的初学者。我有一个名为的类`config`，其中有一个名为`kye`.

当我应用`GET`类的属性时，该属性必须返回一个`kye`不同类型（`Int`或`bool`或`String`）的变量。

我需要在操作员的帮助下实现这一点`enum`。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T08:17:07.693

据我所知，语言中没有内置这样的东西，所以你必须手动完成。一种直接的方法是：

```
public object GetKye(KyeType type)
{
    switch (type)
    {
        case KyeType.String:
            return this.kye;
        case KyeType.Int32:
            return Int32.Parse(this.kye);
        case KyeType.Bool:
            return this.kye.ToLower().Equals("true");
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T08:22:02.910

这消除了在代码中进行强制转换的需要，但并不安全。它需要大量的错误处理。

```
public T Kye<T>(KyeEnum Key)
{
    return (T)kye;
} 
```

或者这就是你所追求的：

```
public Tuple<int, bool, string> Kye(KyeEnum Key)
{
    return new Tuple<int, bool, string>(nKye, bKye, sKye);
} 
```

# ubuntu - Hadoop 处于伪分布式模式。连接被拒绝

> ID：11490429
> 
> 赞同：5
> 
> 时间：2012-07-15T08:09:51.947
> 
> 标签：ubuntu, ssh, hadoop

PS：请不要将此标记为重复

你好，

我一直在尝试在伪分布式模式下设置和运行 Hadoop。当我运行 start-all.sh 脚本时，我得到以下输出：

```
starting namenode, logging to /home/raveesh/Hadoop/hadoop-0.20.2/bin/../logs/..
localhost: ssh: connect to host localhost port 22: Connection refused
localhost: ssh: connect to host localhost port 22: Connection refused
starting jobtracker, logging to /home/raveesh/Hadoop/hadoop-0.20.2/bin/../logs/..
localhost: ssh: connect to host localhost port 22: Connection refused
raveesh@raveeshL:~/Hadoop/hadoop-0.20.2/bin$ 
```

这是我所做的。我已经使用以下命令安装了 open-ssh 服务器和客户端：

```
sudo apt-get install openssh-server openssh-client 
```

我已经启动了 ssh 服务器

```
sudo service ssh start 
```

我得到的输出为：

```
ssh start/running, process 5466 
```

我还运行了以下命令：

```
ssh-keygen -t dsa -P '' -f ~/.ssh/id_dsa

cat ~/.ssh/id_dsa.pub >> ~/.ssh/authorized_keys 
```

但是当我运行 start-all 脚本时，它仍然显示连接被拒绝。我也尝试过[这里](http://www.bluishcoder.co.nz/articles/mac-ssh.html)提到的技巧，但我无法让它发挥作用。我在防火墙后面，我正在使用 Ubuntu。有什么我想念的吗？

非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T10:14:25.363

安装 ssh 后，您还应该启用无密码登录。

```
% ssh-keygen -t rsa -P '' -f ~/.ssh/id_rsa
% cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys 
```

# python - 使用 Django 1.3、South 和 Fabric 进行自定义 SQL 操作的部署过程

> ID：11490437
> 
> 赞同：0
> 
> 时间：2012-07-15T08:12:24.133
> 
> 标签：python, django, django-south

我们目前通过 Fabric 使用 django 1.3，我们能够将代码推送到登台和生产，并通过 South 维护数据库级别的更改。

当时，我们面临着作为特定部署的一部分需要推送的一组 SQL 维护语句。大多数这些 SQL 操作不是特定于 South 的，也不能被 South 捕获，例如表分析、删除一些旧表等。

您能否建议我们如何使用相同的部署过程对此类活动进行批处理？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:17:07.017

既然 south 可以运行任何 Python 代码，为什么不在那里使用直接 SQL 呢？

[https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly](https://docs.djangoproject.com/en/dev/topics/db/sql/#executing-custom-sql-directly)

# sql - 更改 SQL Server 中所有记录中的字符

> ID：11490444
> 
> 赞同：1
> 
> 时间：2012-07-15T08:13:20.493
> 
> 标签：sql, tsql, sql-server-ce

试图在表的**所有记录中****替换**列的字符，

 **想用 ' ' 改变 '_'

任何片段如何做到这一点？

**备注：**

1.  这是类型的主键`Nvarchar`
2.  数据库是 SQL Server CE
3.  使用管理工作室

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T08:15:45.020

您可以使用[REPLACE](http://msdn.microsoft.com/en-us/library/ms186862.aspx)来做到这一点：

```
Update dbo.table
Set    col = replace(col, '_', ''); 
```

`col`您需要操作的列的名称在哪里...**

# sql - 插入具有序列号的表

> ID：11490449
> 
> 赞同：1
> 
> 时间：2012-07-15T08:14:33.297
> 
> 标签：sql, sql-server

如果我有以下情况：

```
Begin transaction
 numberOfRecords = select count from table where foreignKey = "some value" 

 Insert into table (set SequenceNumber = numberOfRecords + 1)
End Transaction 
```

并且多个用户正在执行上述代码，每个插入都会有一个唯一的递增数字吗？

换句话说，开始事务是否将其他事务排队甚至读取，以便每个插入都具有正确的序列号？还是我需要 Insert into..Select 语句来实现我想要的？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T10:29:48.013

不，具有默认 SQL Server 隔离级别 (READ COMMITTED) 的事务是不够的。把它放在一个`INSERT...SELECT`语句中也不会解决它。你基本上有两种选择来解决这个问题：

**选项 1**：将您的隔离级别设置为 SERIALIZABLE: `SET TRANSACTION ISOLATION LEVEL SERIALIZABLE`。这将确保来自两个不同用户的交易就像它们按顺序发生*一样*发生。但是，如果许多此类事务并行发生，这可能会造成死锁。

**选项2**：在事务开始时独占锁定表（`SELECT * FROM table WITH (TABLOCKX, HOLDLOCK) WHERE 1=0`）。请注意，如果`table`频繁使用，这可能会影响性能。

在我对以下 SO 问题的回答中，对这两种方法都进行了详细分析：

*   [在 tsql 中，一个带有 Select 语句的插入在并发方面是安全的吗？](https://stackoverflow.com/a/1994922/87698)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T08:50:28.423

我曾经使用 SQL DB 作为记录器来导出大量数据，为了获得顺序的“身份”，我创建了一个“插入时”触发器来处理发出下一个数字。对我来说效果很好，但是它只是一个用户数据库，所以不确定多个用户是否有任何问题以及我做了什么。

现在我已经重新阅读了这个问题，这可能不是你想要的，但我认为你也可以为选择做一个触发器？

```
USE [ExportLog]
GO

/****** Object:  Trigger [dbo].[Migration_Update_Event_Date]    Script Date: 02/10/2011                17:06:11 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TRIGGER [dbo].[Migration_Update_LogState]
ON [dbo].[MigrationLog] FOR INSERT NOT FOR REPLICATION
AS
UPDATE [MIGRATION-DATA].dbo.MIGRATIONSTATE
SET LASTPROCESSID = ID
WHERE MACHINENAME IN (SELECT MACHINENAME FROM INSERTED) 
```

去

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T09:53:26.030

如果你想以唯一的方式插入记录，那么首先你按顺序创建，然后记录应该插入到序列中。就像

`create sequnce seq_num ;`

现在用于`seq_num`插入 rcords 。

```
insert into <table name>(col1) values(seq_num.nextval); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T08:17:59.700

不，事务不会排队命令，它不像锁。

通常你想使用一个标识列，但在某些情况下，当你想生成没有间隙的序列号时，你需要使用上面的代码，对序列号列有一个唯一的约束，并准备好在提交事务抛出异常时重试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-15T10:23:13.447

您需要将事务隔离级别设置为提供正确隔离级别的级别。在您的代码中，两个进程可以执行第一行，然后执行第二行。两者都将插入相同的值。

将隔离级别设置为可序列化并执行选择语句`WITH (UPDLOCK)`。这将减少系统中的并发性，但它是安全的。

其他策略是可能的，但实施（和测试！）更耗时。

# sfx - 我想在提取 sfx 存档时显示我自己的消息

> ID：11490450
> 
> 赞同：-1
> 
> 时间：2012-07-15T08:14:41.043
> 
> 标签：sfx

我正在开发一个应该完全无人值守的软件安装程序，为此我想为软件制作 SFX 存档，并希望通过替换 SFX 默认窗口来显示我自己的消息，为此我在 Google 上搜索但没有找到我的问题的确切解决方案。我发现的帮助是 sfx 窗口被完全隐藏或对话框带有提取过程，但我看到一些 sfx 档案只显示一个栏，如评论或工具提示，其中给出了自定义消息。我努力通过 winrar 在 sfx 创建选项中做到这一点，但两个月以来，我找到了任何合理的解决方案。在这个网站上，我发现了一个匹配的问题，但是解决方案中涉及到 c++，我想知道在 winrar 或其他地方的 sfx 选项中是否有一个简单的解决方案，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T08:28:17.183

参见[自定义安装程序的自定义 WinRAR SFX](http://www.msfn.org/board/topic/35532-customizing-winrar-sfx-for-customized-installers/)。这个想法是替换 SFX 模块内的资源。

# javascript - jquery在要检查的标记之前检查上一个复选框

> ID：11490462
> 
> 赞同：1
> 
> 时间：2012-07-15T08:16:32.330
> 
> 标签：javascript, jquery

我有一个类似的代码

```
<input type="checkbox" name="abc" value="A" class="chbx">
<a href="#" class="checkbox-selector">href1</a>
<input type="checkbox" name="abc" value="b" class="chbx">
<a href="#" class="checkbox-selector">href2</a>
<input type="checkbox" name="abc" value="c" class="chbx">
<a href="#" class="checkbox-selector">href3</a> 
```

我想要的是当我点击`href1`复选框时应该选择第一个，当我点击时`href2`，应该选择第二个复选框。

这怎么能在 jQuery 中完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T08:24:03.147

你可以用不同的方式来解决这个问题，根本不使用 javascript

试试这个：

```
<label><input type="checkbox" value="hello" name="chkbox1" /> Here is the text</label>

<label><input type="checkbox" value="hello" name="chkbox2" /> Here is the text</label>

<label><input type="checkbox" value="hello" name="chkbox3" /> Here is the text</label> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T08:24:28.260

你不需要 jQuery。您可以使用普通的旧html ...

```
<input type="checkbox" name="abc" id="chk1" value="A" class="chbx">
<label for="chk1" class="checkbox-selector">href1</label>
<input type="checkbox" name="abc" id="chk2" value="b" class="chbx">
<label for="chk2" class="checkbox-selector">href2</label>
<input type="checkbox" name="abc" id="chk3" value="c" class="chbx">
<label for="chk3" class="checkbox-selector">href3</label> 
```

要添加对旧浏览器的支持（例如 Fabricio 建议的 ie6），请使用 scessor 建议的 jQuery 方法：

```
$('.checkbox-selector').click(function() {
    $(this).prev().prop('checked', true);
}); 
```

请注意，如果您使用不支持标签的浏览器，您应该同时实现这两种方法并且仅启用 javscript 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T08:25:00.990

如果您使用标签，它会自动为您检查复选框，只要您给复选框一个 ID 并在标签中设置 FOR 属性。

```
<input type="checkbox" name="abc" value="A" class="chbx" id="c1">
<label for="c1" class="checkbox-selector">href1</label>
<input type="checkbox" name="abc" value="b" class="chbx" id="c2">
<label for="c2" class="checkbox-selector">href2</label>
<input type="checkbox" name="abc" value="c" class="chbx" id="c3">
<label for="c3" class="checkbox-selector">href3</label> 
```

您应用于前一个超链接的任何样式仍应应用于标签。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T08:26:20.150

完整的工作示例，在单击时选中和取消选中框：

```
$('.checkbox-selector').click(function() {
    var chb = $(this).prev(); //caches selector
    chb.prop('checked', !chb.prop('checked')); //inverses checked state
}); 
```

[**小提琴**](http://jsfiddle.net/2erJv/)

但老实说，除非你真的需要兼容ie6等老版本浏览器和其他非html5浏览器，否则应该使用`<label>`s方法。

* * *

如果`name`您指的是链接的描述，只需使用`$(this).text()`获取点击链接的文本。
[**小提琴**](http://jsfiddle.net/2erJv/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T08:28:34.947

你必须这样做：

```
$('.checkbox-selector').click(function(){
    $(this).prev().attr('checked', true);
}); 
```

# python - 如何创建一个按钮来选择所有复选按钮

> ID：11490469
> 
> 赞同：4
> 
> 时间：2012-07-15T08:18:00.847
> 
> 标签：python, list, checkbox, tkinter

我想使用 TkInter 在 Python 中创建一个复选框列表，并尝试使用一个按钮选择所有复选框。

```
from tkinter import *
def create_cbuts():
for i in cbuts_text:
    cbuts.append(Checkbutton(root, text = i).pack())

def select_all():
    for j in cbuts:
        j.select()

root = Tk()
cbuts_text = ['a','b','c','d']
cbuts = []
create_cbuts()
Button(root, text = 'all', command = select_all()).pack()
mainloop() 
```

我担心他没有填写清单`cbuts`：

```
cbuts.append(Checkbutton(root, text = i).pack()) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T17:17:08.500

这是正确的代码

```
from tkinter import *

def create_cbuts():
    for index, item in enumerate(cbuts_text):
        cbuts.append(Checkbutton(root, text = item))
        cbuts[index].pack()

def select_all():
    for i in cbuts:
        i.select()

def deselect_all():
    for i in cbuts:
        i.deselect()

root = Tk()

cbuts_text = ['a','b','c','d']
cbuts = []
create_cbuts()
Button(root, text = 'all', command = select_all).pack()
Button(root, text = 'none', command = deselect_all).pack()
mainloop() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T08:23:01.693

代替：

```
Button(root, text = 'all', command = select_all()).pack() 
```

和：

```
Button(root, text='all', command=select_all).pack() 
```

* * *

`Checkbutton(root, text = i).pack()`回报你`None`。因此，您实际上是将`None`s 附加到您的列表中。您需要做的是：附加`Button`不是`.pack()`返回值的实例（`None`）

# c# - C# - 应用程序配置不会改变

> ID：11490470
> 
> 赞同：11
> 
> 时间：2012-07-15T08:18:22.393
> 
> 标签：c#, app-config

我想在配置文件中保存一些设置以供将来使用。我正在尝试使用我在所有教程中看到的常规代码 -

```
 Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
 config.AppSettings.Settings["username"].Value = m_strUserName;

 // I also tried - 
 //config.AppSettings.Settings.Remove("username");
 //config.AppSettings.Settings.Add("username", m_strUserName);

 config.Save(ConfigurationSaveMode.Modified);
 ConfigurationManager.RefreshSection("appSettings"); 
```

现在 - 我可以在运行时看到 - “调试”文件夹上的文件“...vshost.exe.config”发生了变化，当我关闭我的应用程序时——所有的更改都被删除了。我能做些什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-15T08:26:24.230

要使用普通 exe 的配置文件进行测试，请取消选中项目属性菜单中“调试”选项卡中的“启用 Visual Studio 托管进程”复选框。这将使 Visual Studio 不再使用该`vshost.exe`文件来启动，并且将使用正确的配置文件。

![在此处输入图像描述](../Images/8321df02e81fd13f22522ff8d6863c38.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-15T08:21:10.597

当您将应用程序部署到最终用户时，没有 vshost.config。
您的更改将应用​​于真正的 exe.config。所以你不必为此担心。

当您在调试会话中构建应用程序时，项目中的 app.config 文件会被复制到输出目录。然后这个配置文件也被复制到 vshost.config 中。这样，app.config 的内容将覆盖在调试会话期间在 vshost.exe.config 中所做的任何更改。

但是，让我说将此类信息写入应用程序配置是一种不好的做法。配置文件应仅用于存储在应用程序生命周期内通常不会更改的永久配置。例如，连接设置是存储在那里的有效信息，因为您通常不会更改这些设置，也不想对它们进行硬编码。

像用户名这样的设置应该使用 user.config 代替。此配置是每个用户/每个应用程序，并允许读/写访问。

# linux - 基本 Unix 复习查询：ls -ld

> ID：11490475
> 
> 赞同：0
> 
> 时间：2012-07-15T08:19:35.230
> 
> 标签：linux, shell, unix, ubuntu, command-line

我知道这真的很基础，但是我在 ls 手册页中找不到这些信息，需要复习一下：

```
$ ls -ld my.dir
drwxr-xr-x    1 smith users      4096 Oct 29  2011 my.dir 
```

drwxr-xr-x 后面的数字 1 是什么意思？它是否代表目录 my.dir 的硬链接数？我不记得。我在哪里可以找到这些信息？

谢谢，

约翰·戈切

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T08:23:16.433

我在[维基百科](http://en.wikipedia.org/wiki/Ls)上找到了它：

`duuugggooo (hard link count) owner group size modification_date name`

该数字是硬链接计数。

如果您想要更 UNIXy 的解决方案，请键入`info ls`. 这提供了更详细的信息，包括：

```
`-l'
`--format=long'
`--format=verbose'
     In addition to the name of each file, print the file type, file
     mode bits, number of hard links, owner name, group name, size, and
     timestamp (*note Formatting file timestamps::), normally the
     modification time.  Print question marks for information that
     cannot be determined. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T08:24:02.287

那是文件的命名（硬链接）数。我想，这里有一个错误。对于目录，此处必须至少为 2。

```
$ touch file
$ ls -l
total 0
-rw-r--r-- 1 igor igor 0 Jul 15 10:24 file
$ ln file file-link
$ ls -l
total 0
-rw-r--r-- 2 igor igor 0 Jul 15 10:24 file
-rw-r--r-- 2 igor igor 0 Jul 15 10:24 file-link
$ mkdir a
$ ls -l
total 0
drwxr-xr-x 2 igor igor 40 Jul 15 10:24 a
-rw-r--r-- 2 igor igor  0 Jul 15 10:24 file
-rw-r--r-- 2 igor igor  0 Jul 15 10:24 file-link 
```

正如你所看到的，一旦你创建了一个目录，你就会在列中得到 2。

当您在目录中创建子目录时，数量会增加：

```
$ mkdir a/b
$ ls -ld a
drwxr-xr-x 3 igor igor 60 Jul 15 10:41 a 
```

如您所见，该目录现在具有三个名称（其中包含“a”、“.”和其子目录中的“..”）：

```
$ ls -id a ; cd a; ls -id .; ls -id b/..
39754633 a
39754633 .
39754633 b/.. 
```

所有这三个名称都指向同一个目录 ( `inode 39754633`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T14:50:16.727

试图解释为什么目录的初始链接计数值=2。PL。看看这是否有帮助。

任何文件/目录都由 inode 标识。硬链接数 = 对 inode 的引用数。

创建目录/文件时，会在父目录中创建一个目录条目（形式为 - {myname, myinodenumber}）。这使得该文件/目录的 inode 的引用计数 = 1。

现在，当除此之外创建目录时，还会创建目录空间，默认情况下应该有两个目录条目，一个用于创建的目录，另一个用于父目录，它是 {., myinodenumber} 形式的两个条目和 {.., myparent'sinodenumber}。

当前目录由“.”引用 父母由 ".." 引用。

因此，当我们创建目录时，Links 值的初始数量 = 1+1=2，因为有两个对 myinodenumber 的引用。并且父级的链接值数量增加 1。

# php - 在php的同一页面中获取处理后的值

> ID：11490476
> 
> 赞同：0
> 
> 时间：2012-07-15T08:19:53.037
> 
> 标签：php, mysql, html

我希望当我按下登录按钮时，我会在同一页面中获得响应，例如，如果用户名不存在或重复，则它应该在同一页面上显示错误消息，另一件事是这些数据会转到另一个页面，然后一些数据库操作它返回值，我在使用该数据库查询的页面中获得了值，但是如何将它返回到我实际提交它的第一页

这是场景 login->function selector->controller(database query page) 我需要做的是在成功生成查询后从控制器获取值以登录这里是代码的一瞥

```
<form method="post" action="selector.php?type=login" id="login" id="loginForm">
                <div class="row">
                    <div class="offset1 span1">            

                        <div class="lbel"><label class="control-label" for ="loginName">Username/Email</label></div>
                        <div class="lbl_inpuCnt"><input type="text" class="input-xlarge" id="loginName" name="loginName" maxlength="50"/></div>
                        <div id="usernameError" style="font-size: 10px; color: red;">&nbsp;</div>
                        <div class="lbel"><label class="control-label" for="loginPassword">Password</label></div>
                        <div class="controls">
                            <input type="password" class="input-xlarge" id="loginPassword" name="loginPassword" maxlength="50"/>
                        </div>
                        <div id="passwordError" style="font-size: 10px; color: red;">&nbsp;</div><br/>
                    </div>
                </div>
                <div style="margin-left: 55px;">
                    <input class="btn" style="width: 80px;" type="reset" name="reset" value="Reset" onclick="clearFields()"/>
                    <input class="btn" style="width: 80px;" type="submit" name="submit" value="Login" onclick="return validateForm();"/>
                </div>
            </form> 
```

然后是选择器页面

```
<?php
include_once 'classes/controller.php';
$controller = new controller();
switch ($_GET['type']) {
case 'signup':
    $registerStatus = $controller->register($_POST);
    $_POST['username'] = $registerStatus;
    break;
case 'login':{
    $result= $controller->login($_POST);
    echo $result; //here i get the value from next page after process, i need it back to   login page to show error there!
    }
    break;
case 'uploadSongs':
    $controller->uploadSongs();
    break;
case "delete":
    echo "Function Called";
    break; 
```

} ?>

这是controller.php中的控制器功能

```
public function login($request = array()) {
    $login = $request['loginName'];
    $password = ($request['loginPassword']);
    $query = "select * from user where (user_name = '" . $login . "' OR email = '" . $login . "') AND (password  = '" . $password . "')";
    $user = $this->model->select($query);

    if (is_array($user) && isset($user[0]['user_id'])) {
        $_SESSION['uid'] = $user[0]['user_id'];
        echo $_SESSION['name'] = $user[0]['first_name'];
        $this->redirect("userArea.php");
    } else {
        echo "-1";
        return $login;
    }
    exit;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T08:22:56.923

登录页面可以自行提交，登录成功后跳转到会员区。登录失败时，您只需显示一条消息。

# jira - Jira：从没有主题的电子邮件中创建问题和评论

> ID：11490478
> 
> 赞同：3
> 
> 时间：2012-07-15T08:20:16.997
> 
> 标签：jira

我正在寻找一种方法来控制“从电子邮件创建问题和评论”的工作方式。目前，由于我们使用的是内置系统，因此收到的任何没有主题的电子邮件都会导致服务失败，并显示“问题必须有摘要。邮件消息的主题为空或没有主题。”。每次发生这种情况时，我们都必须手动处理电子邮件。

你知道解决这个问题的任何方法吗？

**编辑**

电子邮件是由客户发送的，所以我不能强制他们都发送主题。

问题是邮件创建服务一旦没有主题就不会处理电子邮件。所以设置默认值无济于事。我能想到的唯一方法是重写邮件服务。有谁知道我该怎么做？我在[这里找到了原始源代码](https://confluence.atlassian.com/download/attachments/267257008/CreateOrCommentHandler.java?version=1&modificationDate=1254798618002)，但不知道如何构建和部署它。

反正能想到别的办法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:03:00.677

我假设您刚刚在管理界面中向 Jira 添加了一些自动序列化电子邮件的服务。

如果您想完全自定义默认行为，您可以编写自己的简单 jira 插件。请参阅 Atlassian 页面：

[https://developer.atlassian.com/display/DOCS/Set+up+the+Atlassian+Plugin+SDK+and+Build+a+Project](https://developer.atlassian.com/display/DOCS/Set+up+the+Atlassian+Plugin+SDK+and+Build+a+Project)

[https://developer.atlassian.com/display/JIRADEV/Component+Plugin+Module](https://developer.atlassian.com/display/JIRADEV/Component+Plugin+Module)

您的 atlassian-plugin.xml 应包含以下内容：

```
<component key="message-handler-factory" class="com.atlassian.jira.plugins.mail.internal.DefaultMessageHandlerFactory" public="true">
    <interface>com.atlassian.jira.service.util.handler.MessageHandlerFactory</interface>
</component> 
```

例如，您可以扩展 CreateOrCommentHandler 类。

# php - unlink() 不适用于双反斜杠

> ID：11490479
> 
> 赞同：0
> 
> 时间：2012-07-15T08:20:29.417
> 
> 标签：php, delete-file, backslash

我正在尝试以这种方式删除文件：

```
define('DESTINATION_FOLDER','c:\temp\\');  
unlink(DESTINATION_FOLDER.$dest_filename); 
```

$dest_filename 是这样的：`2jfioj23488hgh83hr.zip`

但这不起作用。当我将路径放入变量并回显它时，它会打印：

```
c:\temp\2jfioj23488hgh83hr.zip 
```

然后我将它复制/粘贴到 unlink() 中：

```
unlink('c:\temp\2jfioj23488hgh83hr.zip') 
```

它有效。我认为问题在于双反斜杠。但是我应该如何在不使用双反斜杠的情况下定义路径？我不知道为什么它不起作用。这段代码正上方的行是：

```
copy((DESTINATION_FOLDER.$dest_filename),($extract.'\\'.$dest_filename)); 
```

它工作正常，但 unlink 不能使用相同的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T08:38:58.860

将我的评论作为问题的答案

尝试使用正斜杠而不是反斜杠:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T08:42:25.190

如果由于某种原因您必须使用反斜杠，那么您需要使用`c:\\`而不是`c:\`

`define('DESTINATION_FOLDER','c:\\temp\\');`

# java - 如果文件已存在于保管箱中，如何覆盖该文件？

> ID：11490480
> 
> 赞同：0
> 
> 时间：2012-07-15T08:20:43.063
> 
> 标签：java, android, dropbox

我正在通过这种方法在 Dropbox 中上传文件：

```
public void upload() {

        FileInputStream inputStream = null;
        try {
            File file = new File(Environment.getExternalStorageDirectory()
                    .toString() + "/write.txt");
            inputStream = new FileInputStream(file);
            Entry newEntry = mDBApi.putFile("/write.txt", inputStream,
                    file.length(), null, null);
            Log.i("DbExampleLog", "The uploaded file's rev is: " + newEntry.rev);
        } catch (DropboxUnlinkedException e) {
            // User has unlinked, ask them to link again here.
            Log.e("DbExampleLog", "User has unlinked.");
        } catch (DropboxException e) {
            Log.e("DbExampleLog", "Something went wrong while uploading.");
        } catch (FileNotFoundException e) {
            Log.e("DbExampleLog", "File not found.");
        } finally {
            if (inputStream != null) {
                try {
                    inputStream.close();
                } catch (IOException e) {
                }
            }
        }

    } 
```

但是当文件夹中已经存在此文件时，该文件将重命名为 write(1).txt 但我希望如果该文件已存在于保管箱共享文件夹中，则它将被替换。我现在该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:55:27.017

您可以使用`mDBApi.putFileOverwrite`而不是`mDBApi.putFile`

# java - 如何用泛型实现枚举？

> ID：11490485
> 
> 赞同：72
> 
> 时间：2012-07-15T08:21:14.850
> 
> 标签：java, generics, interface, enums

我有一个像这样的通用接口：

```
interface A<T> {
    T getValue();
} 
```

此接口的实例有限，因此最好将它们实现为枚举值。问题是这些实例具有不同类型的值，所以我尝试了以下方法，但无法编译：

```
public enum B implements A {
    A1<String> {
        @Override
        public String getValue() {
            return "value";
        }
    },
    A2<Integer> {
        @Override
        public Integer getValue() {
            return 0;
        }
    };
} 
```

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-07-15T08:24:34.187

你不能。Java 不允许在枚举常量上使用泛型类型。但是，它们在枚举类型上是允许的：

```
public enum B implements A<String> {
  A1, A2;
} 
```

在这种情况下，您可以做的是为每个泛型类型设置一个枚举类型，或者通过将其设为一个类来“假”拥有一个枚举：

```
public class B<T> implements A<T> {
    public static final B<String> A1 = new B<String>();
    public static final B<Integer> A2 = new B<Integer>();
    private B() {};
} 
```

不幸的是，它们都有缺点。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-05-15T05:53:13.313

作为设计某些 API 的 Java 开发人员，我们经常遇到这个问题。当我看到这篇文章时，我正在重新确认自己的怀疑，但我有一个详细的解决方法：

```
// class name is awful for this example, but it will make more sense if you
//  read further
public interface MetaDataKey<T extends Serializable> extends Serializable
{
    T getValue();
}

public final class TypeSafeKeys
{
    static enum StringKeys implements MetaDataKey<String>
    {
        A1("key1");

        private final String value;

        StringKeys(String value) { this.value = value; }

        @Override
        public String getValue() { return value; }
    }

    static enum IntegerKeys implements MetaDataKey<Integer>
    {
        A2(0);

        private final Integer value;

        IntegerKeys (Integer value) { this.value = value; }

        @Override
        public Integer getValue() { return value; }
    }

    public static final MetaDataKey<String> A1 = StringKeys.A1;
    public static final MetaDataKey<Integer> A2 = IntegerKeys.A2;
} 
```

到那时，您将获得真正恒定的`enum`eration 值（以及随之`interface`而来的所有好处）的好处，以及成为`enum`.

显然，这增加了冗长，从而产生了复制/粘贴错误的可能性。您可以制作`enum`s`public`并简单地为他们的访问添加一个额外的层。

倾向于使用这些功能的设计往往会遭受脆弱的`equals`实现，因为它们通常与其他一些独特的值相结合，例如名称，它可能会在代码库中出于相似但不同的目的而不知不觉地复制。通过全面使用`enum`s，平等是对这种脆弱行为免疫的免费赠品。

除了冗长之外，此类系统的主要缺点是在全局唯一键之间来回转换的想法（例如，与 JSON 之间的编组）。如果它们只是键，那么可以以浪费内存为代价安全地重新实例化（复制）它们，但使用以前的弱点`equals`--作为优势。

有一种解决方法可以通过在每个全局实例中使用匿名类型来提供全局实现唯一性：

```
public abstract class BasicMetaDataKey<T extends Serializable>
     implements MetaDataKey<T>
{
    private final T value;

    public BasicMetaDataKey(T value)
    {
        this.value = value;
    }

    @Override
    public T getValue()
    {
        return value;
    }

    // @Override equals
    // @Override hashCode
}

public final class TypeSafeKeys
{
    public static final MetaDataKey<String> A1 =
        new BasicMetaDataKey<String>("value") {};
    public static final MetaDataKey<Integer> A2 =
        new BasicMetaDataKey<Integer>(0) {};
} 
```

请注意，每个实例都使用匿名实现，但不需要其他任何东西来实现它，因此它们`{}`是空的。这既令人困惑又烦人，但如果实例引用更可取并且将混乱保持在最低限度，它就可以工作，尽管对于经验不足的 Java 开发人员来说可能有点神秘，从而使其更难维护。

最后，提供全局唯一性和重新分配的唯一方法是对正在发生的事情更具创造性。我见过的全局共享接口最常见的用途是元数据桶，它倾向于混合许多不同的值，具有不同的类型（`T`基于每个键）：

```
public interface MetaDataKey<T extends Serializable> extends Serializable
{
    Class<T> getType();
    String getName();
}

public final class TypeSafeKeys
{
    public static enum StringKeys implements MetaDataKey<String>
    {
        A1;

        @Override
        public Class<String> getType() { return String.class; }

        @Override
        public String getName()
        {
            return getDeclaringClass().getName() + "." + name();
        }
    }

    public static enum IntegerKeys implements MetaDataKey<Integer>
    {
        A2;

        @Override
        public Class<Integer> getType() { return Integer.class; }

        @Override
        public String getName()
        {
            return getDeclaringClass().getName() + "." + name();
        }
    }

    public static final MetaDataKey<String> A1 = StringKeys.A1;
    public static final MetaDataKey<Integer> A2 = IntegerKeys.A2;
} 
```

这提供了与第一个选项相同的灵活性，并且它提供了一种通过反射获取引用的机制，如果以后有必要，因此避免了以后需要实例化。它还避免了第一个选项提供的许多容易出错的复制/粘贴错误，因为如果第一个方法错误，它将无法编译，而第二个方法不需要更改。唯一需要注意的是，您应该确保以`enum`这种方式使用的 s 是`public`为了避免任何人因为无法访问内部而出现访问错误`enum`；如果您不想让那些`MetaDataKey`s 穿过编组的电线，那么可以使用将它们隐藏在外部包裹之外来自动丢弃它们（在编组期间，反射性地检查是否`enum`是可访问的，如果不是，则忽略键/值）。如果维护更明显的引用（因为实例就是这样） ，那么`public`除了提供两种访问实例的方法外，没有任何收获或损失。`static``enum`

我只是希望他们能做到，以便`enum`s 可以在 Java 中扩展对象。也许在 Java 9 中？

最后一个选项并不能真正解决您的需求，因为您要求价值，但我怀疑这会达到实际目标。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-07-23T13:25:35.133

*如果* [JEP 301：Enhanced Enums](http://openjdk.java.net/jeps/301)被接受，*那么*您将能够使用这样的语法（取自提案）：

```
enum Primitive<X> {
    INT<Integer>(Integer.class, 0) {
        int mod(int x, int y) { return x % y; }
        int add(int x, int y) { return x + y; }
    },
    FLOAT<Float>(Float.class, 0f)  {
        long add(long x, long y) { return x + y; }
    }, ... ;

    final Class<X> boxClass;
    final X defaultValue;

    Primitive(Class<X> boxClass, X defaultValue) {
        this.boxClass = boxClass;
        this.defaultValue = defaultValue;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-25T16:20:37.073

通过使用这个 Java 注释处理器[https://github.com/cmoine/generic-enums](https://github.com/cmoine/generic-enums)，你可以这样写：

```
import org.cmoine.genericEnums.GenericEnum;
import org.cmoine.genericEnums.GenericEnumParam;

@GenericEnum
public enum B implements A<@GenericEnumParam Object> {
    A1(String.class, "value"), A2(int.class, 0);

    @GenericEnumParam
    private final Object value;

    B(Class<?> clazz, @GenericEnumParam Object value) {
        this.value = value;
    }

    @GenericEnumParam
    @Override
    public Object getValue() {
        return value;
    }
} 
```

注释处理器将生成一个枚举`BExt`，其中包含您需要的所有内容！

如果您愿意，也可以使用以下语法：

```
import org.cmoine.genericEnums.GenericEnum;
import org.cmoine.genericEnums.GenericEnumParam;

@GenericEnum
public enum B implements A<@GenericEnumParam Object> {
    A1(String.class) {
        @Override
        public @GenericEnumParam Object getValue() {
            return "value";
        }
    }, A2(int.class) {
        @Override
        public @GenericEnumParam Object getValue() {
            return 0;
        }
    };

    B(Class<?> clazz) {
    }

    @Override
    public abstract @GenericEnumParam Object getValue();
} 
```

# wpf - 防止 ShowDialog 在 WPF 中关闭窗口

> ID：11490486
> 
> 赞同：1
> 
> 时间：2012-07-15T08:21:24.253
> 
> 标签：wpf

我有一个 WPF 窗口`myWindow`，我使用它打开`myWindow.ShowDialog() ?? true`并收听`DialogResult`( `DialogResult = true`) 以执行一些代码。

当我将其设置为`true`或`false`时，窗口已被释放，有没有办法可以防止此窗口关闭，同时还能获得`DialogResult`？另外，还有另一种方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T08:58:31.050

你想发生什么？例如：

您可能需要一个模态对话框（这样用户在它可见时不能与 UI 的其余部分进行交互），但您希望代码在主程序中运行以响应对话框中的某些用户操作。在这种情况下，将事件添加到主程序可以响应的对话框中。

或者您可能实际上想要一个无模式对话框，它允许用户与程序的其余部分进行交互，而无需完成对话框。在这种情况下，不要使用`ShowWindow`，只显示一个拥有的窗口。

# r - 防止部分海岸线测绘

> ID：11490493
> 
> 赞同：6
> 
> 时间：2012-07-15T08:22:39.960
> 
> 标签：r, map-projections

如何防止国家多边形在不同的投影下被切断？

在下面的例子中，我想做一张南极洲的立体投影图，包括纬度 < -45°S。通过将我的 y 限制设置为这个范围，绘图区域是正确的，但是国家多边形也会在这些限制处被裁剪。有什么办法可以将海岸线绘制到地块区域的边缘？

感谢您的任何建议。

```
library(maps)
library(mapproj)

ylim=c(-90,-45)
orientation=c(-90, 0, 0)

x11()
par(mar=c(1,1,1,1))
m <- map("world", plot=FALSE)
map("world",project="stereographic", orientation=orientation, ylim=ylim)
map.grid(m, nx=18,ny=18, col=8)
box() 
```

![在此处输入图像描述](../Images/b80a88c9d0a67533b7cc1c244275fc45.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T09:19:03.197

问题是因为您指定的最大值`ylim`为 -45，并且数据在该纬度被准确切割。显然，绘图的实际边界是以单独的方式计算的，这可能与基于所产生的预计限制的某种保守假设有关（但如果不探索源代码，我对此一无所知）。

您可以通过设置一个不绘制海岸线的虚拟图来避免该问题，然后在顶部添加数据并增加`ylim`：

```
library(maps)
library(mapproj)

ylim = c(-90,-45)
orientation=c(-90, 0, 0)

x11()
par(mar=c(1,1,1,1))
m <- map("world", plot=FALSE)
map("world",project="stereographic", orientation=orientation, ylim=ylim, col = "transparent")
map("world",project="stereographic", orientation=orientation, ylim=ylim + c(-5, 5), add = TRUE)
map.grid(m, nx=18,ny=18, col=8)
box() 
```

顺便说一句，这种策略不适用于所有投影，因为有些投影会暗示某些数据限制的重叠，但 Polar Stereographic 只是从中心延伸出来，所以这里没有这样的问题。

此外，使用 maptools、rgdal 和 rgeos 将有一种更新的方法来执行此操作，这将允许您使用共享正确 PROJ.4 立体投影的数据（但我还没有完全弄清楚剪辑步骤）。mapproj 中的投影是“仅形状”的，将其他数据放入其中需要一些工作，afaik。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T10:51:36.507

我意识到另一种选择是定义绘图区域的限制，而不是地图本身。这可能会在定义确切的绘图区域（即 xaxs="i" 和 yaxs="i"）时提供一些灵活性。您还保证将绘制所有多边形 - 在 @mdsumner 的示例中，缺少澳大利亚并且需要扩展 y 限制才能正确绘制它的多边形。

```
orientation=c(-90, 0, 0)

ylim <- c(mapproject(x=-180,y=-45, project="stereographic", orientation=orientation)$y, mapproject(x=0,y=-45, project="stereographic", orientation=orientation)$y)
xlim <- c(mapproject(x=-90,y=-45, project="stereographic", orientation=orientation)$x, mapproject(x=90,y=-45, project="stereographic", orientation=orientation)$x)

x11(width=6,height=6)
par(mar=c(1,1,1,1))
plot(0,0, t="n", ylim=ylim, xlim=xlim, xaxs="i", yaxs="i", xlab="", ylab="", xaxt="n", yaxt="n")
map("world",project="stereographic", orientation=orientation, add=TRUE)
map.grid(nx=18,ny=18, col=8)
box() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-15T11:41:53.590

另一种方法是使用实​​际的 PROJ.4 投影并使用`maptools`包中的数据集。这是代码，在南极大陆仍然存在问题，海洋海岸线在 -90 处与极点相交（这有点烦人，需要找到该坐标并将其从转换结果中删除，或者通过拓扑工具运行来查找条）。

```
library(maptools)
data(wrld_simpl)
xrange <- c(-180, 180, 0, 0)
yrange <- c(-90, -45, -90, -45)

stere <- "+proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs"

library(rgdal)

w <- spTransform(wrld_simpl, CRS(stere))

xy <- project(cbind(xrange, yrange), stere)
plot(w, xlim = range(xy[,1]), ylim = range(xy[,2]))
box() 
```

# java - 如何使用 JAX-RS 捕获所有无效 URL？

> ID：11490494
> 
> 赞同：1
> 
> 时间：2012-07-15T08:22:51.817
> 
> 标签：java, rest, jakarta-ee, jax-rs

如何捕获这些无效 URL，以便返回正确的错误资源？

谢谢。

基本上，我想覆盖“找不到资源页面”。相反，我想返回一个描述错误的 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T08:52:57.470

这在一定程度上取决于您使用的 JAX-RS 实现。

如果您使用的是[RESTEasy](http://www.jboss.org/resteasy/)，您可以创建一个`ExceptionMapper`可以捕获的`org.jboss.resteasy.spi.NotFoundException`。这使您能够构建和返回自定义`javax.ws.rs.core.Response`

```
public class MyExceptionMapper implements ExceptionMapper<NotFoundException> {

    @Override
    public Response toResponse(NotFoundException exception) {
        return Response.status(exception.getErrorCode()).build();
    }
} 
```

我有点不确定如何用[Jersey](http://jersey.java.net/)做到这一点，但也许你可以创建一个`ExceptionMapper`可以捕获的`com.sun.jersey.api.NotFoundException`。

# hypertable - 如何在 python 中连接到远程超表

> ID：11490499
> 
> 赞同：1
> 
> 时间：2012-07-15T08:23:45.203
> 
> 标签：hypertable, mesos

我正在尝试连接到超级表主机，超级表是通过 mesos 部署的，当我将 hypertable.cfg 文件从主机复制到任意机器时，运行 start-thriftbroker.sh 后，我得到的只是大约十行“等待 ThriftBroker 出现......”然后“错误：ThriftBroker 没有出现”，ThirftBroker 的日志文件说：

```
1342340080 NOTICE ThriftBroker : (/root/src/hypertable/src/cc/Common/Config.cc:526) Initializing ThriftBroker (Hypertable 0.9.5.6 (v0.9.5.6-dirty))...
CPU cores count=1
CephBroker.MonAddr=10.0.1.245:6789
CephBroker.Port=38030
CephBroker.Workers=20
DfsBroker.Host=localhost
DfsBroker.Local.Port=38030
DfsBroker.Local.Root=fs/local
DfsBroker.Port=38030
HdfsBroker.Port=38030
HdfsBroker.Workers=20
HdfsBroker.fs.default.name=hdfs://<ip>:9010
Hyperspace.GracePeriod=200000
Hyperspace.KeepAlive.Interval=30000
Hyperspace.Lease.Interval=1000000
Hyperspace.Replica.Dir=hyperspace
Hyperspace.Replica.Host=[<ip>]
Hyperspace.Replica.Port=38040
Hyperspace.Replica.Workers=20
Hypertable.Master.Port=38050
Hypertable.Master.Workers=20
Hypertable.RangeServer.Port=38060
Hypertable.Verbose=true
ThriftBroker.Port=38080
pidfile=/opt/hypertable/current/run/ThriftBroker.pid
port=38080
reactors=1
verbose=true
1342340080 INFO ThriftBroker : (/root/src/hypertable/src/cc/Hyperspace/Session.cc:63) Hyperspace session setup to reconnect
1342340082 ERROR ThriftBroker : main (/root/src/hypertable/src/cc/ThriftBroker/ThriftBroker.cc:2404): Hypertable::Exception: Hyperspace 'mkdir' error, name=/hypertable/namemap/names - HYPERSPACE file exists
        at void Hyperspace::Session::mkdir(const std::string&, bool, const std::vector<Hyperspace::Attribute, std::allocator<Hyperspace::Attribute> >*, Hypertable::Timer*) (/root/src/hypertable/src/cc/Hyperspace/Session.cc:1257) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T06:07:12.850

通过更新到新版本的 ht 解决了它。

# asp.net-mvc - 具有特定 JsonConverter 的 MVC3 控制器

> ID：11490506
> 
> 赞同：2
> 
> 时间：2012-07-15T08:24:41.970
> 
> 标签：asp.net-mvc, json, serialization

这是设置：

我有一些旨在供 jQuery ajax 请求使用的 MVC 控制器。一个正常的请求看起来有点像这样：

```
$.ajax("/Solicitor/AddSolicitorToApplication", {
    data: putData,
    type: "POST", contentType: "application/json",
    success: function (result) {
       //My success callback
        }
    }
}); 
```

我的控制器如下所示：

```
[HttpPost]
public ActionResult InsertLoanApplication(MortgageLoanApplicationViewModel vm)
{
   var mortgageLoanDTO = vm.MapToDTO();
   return Json(_mortgageLoanService.UpdateMortgageLoanApplication(mortgageLoanDTO),   JsonRequestBehavior.DenyGet);
} 
```

这对于传递给控制器​​的大多数对象都非常有效，除了在这种特定情况下，传递的对象的属性之一需要以特定方式反序列化。

我添加了一个 JsonConverter，我之前在 MVC4 Web API 中使用过它，但在这种情况下，我需要将它应用到常规的 mvc 控制器上。

我尝试在我的 global.asax 中注册 JsonConverter，如下所示：

```
GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings.Converters.Add(new GrizlyStringConverter()); 
```

但到目前为止还无法反序列化该对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T08:31:31.067

[`JsonValueProviderFactory`](http://msdn.microsoft.com/en-us/library/system.web.mvc.jsonvalueproviderfactory%28v=vs.98%29.aspx)如果您想`Json.NET`在将 JSON 请求绑定到视图模型时使用，您应该将内置类替换为自定义类。

您可以编写一个，如[本要点](https://gist.github.com/1588818)所示：

```
public sealed class JsonDotNetValueProviderFactory : ValueProviderFactory
{
    public override IValueProvider GetValueProvider(ControllerContext controllerContext)
    {
        if (controllerContext == null)
        {
            throw new ArgumentNullException("controllerContext");
        }

        if (!controllerContext.HttpContext.Request.ContentType.StartsWith("application/json", StringComparison.OrdinalIgnoreCase))
        {
            return null;
        }

        using (var reader = new StreamReader(controllerContext.HttpContext.Request.InputStream))
        {
            var bodyText = reader.ReadToEnd();

            return String.IsNullOrEmpty(bodyText)
                ? null :
                new DictionaryValueProvider<object>(
                    JsonConvert.DeserializeObject<ExpandoObject>(
                        bodyText,
                        new ExpandoObjectConverter()
                    ),
                    CultureInfo.CurrentCulture
                );
        }
    }
} 
```

然后用您的自定义替换内置`Application_Start`：

```
ValueProviderFactories.Factories.Remove(
    ValueProviderFactories
        .Factories
        .OfType<JsonValueProviderFactory>()
        .FirstOrDefault()
);
ValueProviderFactories.Factories.Add(new JsonDotNetValueProviderFactory()); 
```

就是这样。现在，您使用 Json.Net 而不是 JavaScriptSerializer 来处理传入的 JSON 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-07T10:53:08.873

修改后的版本：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Dynamic;
using System.Globalization;
using System.IO;
using System.Web.Mvc;
using Newtonsoft.Json;
using Newtonsoft.Json.Converters;

namespace MvcJsonNetTests.Utils
{
    public class JsonNetValueProviderFactory : ValueProviderFactory
    {
        public JsonNetValueProviderFactory()
        {
            Settings = new JsonSerializerSettings
            {
                ReferenceLoopHandling = ReferenceLoopHandling.Error,
                Converters = { new ExpandoObjectConverter() }
            };
        }

        public JsonSerializerSettings Settings { get; set; }

        public override IValueProvider GetValueProvider(ControllerContext controllerContext)
        {
            if (controllerContext == null)
                throw new ArgumentNullException("controllerContext");

            if (controllerContext.HttpContext == null ||
                controllerContext.HttpContext.Request == null ||
                controllerContext.HttpContext.Request.ContentType == null)
            {
                return null;
            }

            if (!controllerContext.HttpContext.Request.ContentType.StartsWith(
                    "application/json", StringComparison.OrdinalIgnoreCase))
            {
                return null;
            }

            if (!controllerContext.HttpContext.Request.IsAjaxRequest())
            {
                return null;
            }

            using (var streamReader = new StreamReader(controllerContext.HttpContext.Request.InputStream))
            {
                using (var jsonReader = new JsonTextReader(streamReader))
                {
                    if (!jsonReader.Read())
                        return null;

                    var jsonSerializer = JsonSerializer.Create(this.Settings);

                    Object jsonObject;
                    switch (jsonReader.TokenType)
                    {
                        case JsonToken.StartArray:
                            jsonObject = jsonSerializer.Deserialize<List<ExpandoObject>>(jsonReader);
                            break;
                        default:
                            jsonObject = jsonSerializer.Deserialize<ExpandoObject>(jsonReader);
                            break;
                    }

                    var backingStore = new Dictionary<string, object>(StringComparer.OrdinalIgnoreCase);
                    addToBackingStore(backingStore, String.Empty, jsonObject);
                    return new DictionaryValueProvider<object>(backingStore, CultureInfo.CurrentCulture);
                }
            }
        }

        private static void addToBackingStore(IDictionary<string, object> backingStore, string prefix, object value)
        {
            var dictionary = value as IDictionary<string, object>;
            if (dictionary != null)
            {
                foreach (var entry in dictionary)
                {
                    addToBackingStore(backingStore, makePropertyKey(prefix, entry.Key), entry.Value);
                }
                return;
            }

            var list = value as IList;
            if (list != null)
            {
                for (var index = 0; index < list.Count; index++)
                {
                    addToBackingStore(backingStore, makeArrayKey(prefix, index), list[index]);
                }
                return;
            }

            backingStore[prefix] = value;
        }

        private static string makeArrayKey(string prefix, int index)
        {
            return prefix + "[" + index.ToString(CultureInfo.InvariantCulture) + "]";
        }

        private static string makePropertyKey(string prefix, string propertyName)
        {
            return (string.IsNullOrWhiteSpace(prefix)) ? propertyName : prefix + "." + propertyName;
        }
    }
} 
```

还要在正确的索引处注册它：

```
public static void RegisterFactory()
{
    var defaultJsonFactory = ValueProviderFactories.Factories
        .OfType<JsonValueProviderFactory>().FirstOrDefault();
    var index = ValueProviderFactories.Factories.IndexOf(defaultJsonFactory);
    ValueProviderFactories.Factories.Remove(defaultJsonFactory);
    ValueProviderFactories.Factories.Insert(index, new JsonNetValueProviderFactory());
} 
```

# c# - 未选中复选框时，如何使 GridView 中的这一行为灰色？

> ID：11490510
> 
> 赞同：0
> 
> 时间：2012-07-15T08:25:10.613
> 
> 标签：c#, asp.net, gridview, checkbox

我有以下数据库设计：

```
Employee Table: Username, Name, JobTitle, BadgeNo, IsActive, DivisionCode
Divisions Table: SapCode, DivisionShortcut 
```

我有一个 GridView，我用它来添加、删除和更新/编辑员工信息。此信息是员工用户名、姓名、徽章编号、职位名称、IsActive 和部门快捷方式。***IsActive 是一个标志，指示员工是否有空或在分配中。***我将其设置为复选框，该列应显示两个值；活跃和不活跃。在编辑模式下，将显示复选框。如果选中，则表示该员工可用，否则表示不活动。

我编写了代码，一切正常，但现在我只面临一个问题，如下所示：当未选中复选框时，这意味着员工处于非活动状态，所以我希望显示他的信息的行为灰色（像残疾人）。

**那么该怎么做呢？**

ASP.NET 代码：

```
<%-- GridView for User Management Subsystem --%>
        <asp:GridView ID="GridView1" runat="server" AllowSorting="True" 
            AutoGenerateColumns="False" DataKeyNames="Username" 
            DataSourceID="SqlDataSource1" OnRowDataBound="GridView1_RowDataBound" BorderWidth="1px" BackColor="#DEBA84" 
             CellPadding="3" CellSpacing="2" BorderStyle="None" 
             BorderColor="#DEBA84">
            <FooterStyle ForeColor="#8C4510" 
              BackColor="#F7DFB5"></FooterStyle>
            <PagerStyle ForeColor="#8C4510" 
              HorizontalAlign="Center"></PagerStyle>
            <HeaderStyle ForeColor="White" Font-Bold="True" 
              BackColor="#A55129"></HeaderStyle>
            <Columns>
                <asp:CommandField ButtonType="Image" ShowEditButton="true" ShowCancelButton="true"
                                EditImageUrl="Images/icons/edit24.png" UpdateImageUrl="Images/icons/update24.png" 
                                CancelImageUrl="Images/icons/cancel324.png" />

                <asp:TemplateField HeaderText="Division">
                    <ItemTemplate>
                        <%# Eval("DivisionShortcut")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:DropDownList ID="DivisionsList" runat="server" DataSourceID="DivisionsListDataSource"
                                          DataTextField="DivisionShortcut" DataValueField="SapCode"
                                          SelectedValue='<%# Bind("DivisionCode")%>'>
                        </asp:DropDownList>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:BoundField DataField="Username" HeaderText="Network ID" ReadOnly="True" 
                    SortExpression="Username" />

                <asp:TemplateField HeaderText="Name">
                    <ItemTemplate>
                        <%# Eval("Name")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtEmployeeName" runat="server" Text='<%# Bind("Name")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Job Title">
                    <ItemTemplate>
                        <%# Eval("JobTitle")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtJobTitle" runat="server" Text='<%# Bind("JobTitle")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Badge No.">
                    <ItemTemplate>
                        <%# Eval("BadgeNo")%>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:TextBox ID="txtBadgeNo" runat="server" Text='<%# Bind("BadgeNo")%>' />
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Is Active?">
                    <ItemTemplate>
                        <asp:Label ID="lblIsActive" runat="server" Text='<%# Eval("IsActive")%>'></asp:Label>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:CheckBox ID="isActive" runat="server" 
                                      AutoPostBack="true" OnCheckedChanged="isActive_OnCheckedChanged"
                                      Checked='<%# Convert.ToBoolean(Eval("IsActive")) %>'
                                      Text='<%# Eval("IsActive")%>'/>
                    </EditItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Delete?">
                    <ItemTemplate>
                        <span onclick="return confirm('Are you sure to Delete the record?')">
                            <asp:ImageButton ID="lnkB" runat="server" ImageUrl="Images/icons/delete24.png" CommandName="Delete" />
                        </span>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

代码隐藏：

```
//for updating the (IsActive) column using checkbox inside the GridView
    protected void isActive_OnCheckedChanged(object sender, EventArgs e)
    {
        CheckBox chkStatus = (CheckBox)sender;
        GridViewRow gvrow = (GridViewRow)chkStatus.NamingContainer;

        //Get the ID which is the NetworkID of the employee
        string username = gvrow.Cells[2].Text;
        bool status = chkStatus.Checked;

        string connString = ConfigurationManager.ConnectionStrings["UsersInfoDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);

        string updateIsActive = "UPDATE Employee SET IsActive = @IsActive WHERE Username = @Username";

        SqlCommand cmd = new SqlCommand(updateIsActive, conn);

        cmd.Parameters.AddWithValue("@IsActive", status);
        cmd.Parameters.AddWithValue("@Username", username);

        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
        }
        catch (SqlException se)
        {
            throw se;
        }
        finally
        {
            cmd.Dispose();
            conn.Close();
            conn.Dispose();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T08:46:38.077

在您的复选框未选中状态的方法中，您将像这样设置 GrdiViewRow 的 BackColor`gvrow.BackColor= Color.Gray;`

一个重要的想法是在第一次加载时，您需要重复 GridView 的 OnRowDataBound 的类似逻辑，因此将其移动到方法中并重用

```
protected void isActive_OnCheckedChanged(object sender, EventArgs e)
    {
        CheckBox chkStatus = (CheckBox)sender;
        GridViewRow gvrow = (GridViewRow)chkStatus.NamingContainer;

        //Get the ID which is the NetworkID of the employee
        string username = gvrow.Cells[2].Text;
        bool status = chkStatus.Checked;
if(!status)//this is checkbox is unchecked then set backcolor to Gray
{
gvrow .BackColor = Color.Gray;
}

....... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T09:45:45.927

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
 if (e.Row.RowType == DataControlRowType.DataRow)
 {
    // First check Checkedbox is check or not, In Cells insert you IsActive column index
    if( e.Row.Cells[1].Text == "False" )
        GridView1.BackColor = Color.Gray;

 }
} 
```

# php - 如何在wordpress中重定向到登录页面并再次返回

> ID：11490512
> 
> 赞同：1
> 
> 时间：2012-07-15T08:25:27.403
> 
> 标签：php, wordpress, redirect

我想问一下wordpress...

我有这样的场景：如果用户没有登录，他应该被重定向到登录/注册页面并再次返回到请求页面的目的地。我使用此代码但无法获取目标网址。

**限制页面中的代码：**

```
if (user-no-login){wp_redirect( get_option('home') . '?redirect_to=' . esc_url($_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"]) );} 
```

和**登录代码**，我尝试回显，但只是得到`<site_url>/?page=login`应有`($_REQUEST['redirect_to'])`的结果`<site_url>/food/rice?red=1`。

任何人都可以帮助我解决我的问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-29T04:45:17.513

你缺少的是[wp_redirect](http://codex.wordpress.org/Function_Reference/wp_redirect)和[wp_login_url](http://codex.wordpress.org/Function_Reference/wp_login_url)

```
if (!is_user_logged_in()) {
    wp_redirect( wp_login_url( $redirect ) );
    exit();
} 
```

注意：$redirect 变量“**必须是绝对**的，如[http://example.com/mypage/](http://example.com/mypage/) ”，所以在这种情况下：`$redirect = "http://".$_SERVER[HTTP_HOST].$_SERVER[REQUEST_URI]`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-15T09:40:16.923

创建页面模板。上面有这段代码：

```
<?php
/*
Template Name: Redirect
*/
?>
<?php if (!is_user_logged_in())
{
    header("Location: http://example.com/wp-login.php");
}
else
{
    get_header();
    //page code
    get_footer();
}?> 
```

# jsp - 仅当不存在时如何创建对象？

> ID：11490520
> 
> 赞同：0
> 
> 时间：2012-07-15T08:26:54.547
> 
> 标签：jsp, servlets

在[这](https://stackoverflow.com/questions/11490288/why-isnt-this-jsp-servlet-code-work-solved)

z.JSP 中的代码 我只想在对象 y 不存在时创建它。我做了一个研究，但找不到它是怎么回事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T08:30:35.670

你的意思是：

```
if(request.getSession().getAttribute("yy") == null) {
  usecase y = new y();
  request.getSession().setAttribute("yy", y);
} 
```

可以进一步简化为：

```
if(session.getAttribute("yy") == null) {
  usecase y = new y();
  session.setAttribute("yy", y);
} 
```

顺便说一句，了解[Java 命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)。

# sql - 获取只有空值的列的列名

> ID：11490522
> 
> 赞同：0
> 
> 时间：2012-07-15T08:27:54.887
> 
> 标签：sql, oracle

我有非常大的 Oracle 表，其中有许多与我使用的每个过滤器无关的列。

我想在 Oracle 中编写一个查询或函数，它返回只有空值的列的名称，或者返回不为空的列的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T09:12:24.177

如果您只想*查找*始终为空的列，您可以运行此查询创建的查询，那些值为 0 的列为空。

```
select 'select ' 
       || listagg('count(' || column_name || ') as ' || column_name, ', ')
           within group (order by column_id)
       || ' from my_table;'
  from user_tab_columns
 where table_name = 'MY_TABLE' 
```

这是一个要演示的[SQL Fiddle 。](http://sqlfiddle.com/#!4/4338c/1)

如果您想要列的*名称*，则必须使用 PL/SQL。这个函数将返回一个逗号分隔的列名列表，当然你也可以返回一个用户定义的类型等。

```
create or replace function null_cols( P_TableName varchar2 ) return varchar2 is

   l_cols varchar2(32767);
   l_result number;

begin

   for i in ( select column_name 
                from user_tab_columns
               where table_name = upper(P_TableName)
                     ) loop

      execute immediate 'select count(' || i.column_name || ')
                           from ' || P_TableName
                           into l_result;

      if l_result = 0 then
         l_cols := l_cols || i.column_name || ', ';
      end if;

   end loop;

   return l_cols;

end;
/ 
```

[这是对同一个SQL Fiddle](http://sqlfiddle.com/#!4/96108/1)的扩展，其中添加了该函数。

我必须补充一点，如果您接受用户输入以使用该功能，您应该使用该[`dbms_assert`](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_assert.htm)包来帮助避免 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T08:53:24.043

您可以使用以下查询来识别相同的，请确保您收集统计信息以获得正确的结果

```
 select table_name, column_name
      from user_tab_cols         
                where table_name = 'MY_TABLE'
       and NUM_DISTINCT = 0
       and NUM_NULLS > 0 
```

**更新 1：** - 如果您定期收集统计数据（不是 100% 统计数据），您可以使用 Ben 的答案并对其进行优化。下面将减少需要检查的列数

```
for i in ( select column_name 
            from user_tab_columns
           where table_name = upper(P_TableName)
           and num_distinct=0 and num_nulls > 0
                 ) loop 
```

# c# - Redis ServiceStack 使用事务时如何创建多个序列号

> ID：11490529
> 
> 赞同：2
> 
> 时间：2012-07-15T08:28:48.490
> 
> 标签：c#, redis, servicestack

我正在尝试使用 C# ServiceStack 将多个新实体插入 Redis。我遇到的问题是生成序列号。

从我读过的内容来看，您在排队事务命令以保证原子操作时无法发出其他请求。

这意味着必须迭代我的实体集合以首先生成序列号，然后再次迭代以将事务命令排队并执行？

有没有一种有效的方法来做到这一点？

```
IRedisClientsManager RedisManager;

RedisManager.ExecTrans(x =>
{
    foreach (var entity in entities)
    {
        x.QueueCommand(c =>
        {
            //entity.Id = generate sequence number
            c.Store(entity);
        });
    }
    x.Commit();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:57:14.390

您可以预先获取一批序列 ID，然后将它们分配给您的模型。您还可以使用`StoreAll()`which 利用 Redis 的批处理[MSET](http://redis.io/commands/mset)操作，以便所有模型都在同一操作中执行/存储。

鉴于此，我会用类似的东西重写上面的内容：

```
RedisManager.ExecAs<TEntity>(r => {
   var maxSeqId = r.GetNextSequence(entities.Count);
   var newId = maxSeqId - entities.Count;
   entities.ForEach(x => x.Id = newId++);
   r.StoreAll(entities);
}); 
```

# html - IE9中的锯齿状边缘图像缩放

> ID：11490533
> 
> 赞同：1
> 
> 时间：2012-07-15T08:30:29.580
> 
> 标签：html, css, internet-explorer-9

我正在为这些更高分辨率的显示器（尤其是新 iPad）优化我的网站。我已经按照我想要的方式格式化了网站，我只是增加了每个图像的分辨率，但仍将其限制为我目前拥有的 DIV。例如，我有一个分辨率为 483x246 的图像，我让它适合设置大小为 188x96 的 DIV。

这些图像在 Chrome、Firefox 上看起来很棒，最重要的是在新 iPad 上。即使放大它也很漂亮和清晰（与我的旧 188x96 图像在放大时看起来模糊和像素化相反）。

当我在 IE 中打开页面时，问题就出现了。它以正确的大小显示图像，但呈锯齿状。请参阅下面的比较链接。我知道这是 IE 动态调整大小和渲染图片的方式的问题。

我的问题是，有没有办法让 IE 很好地显示图片？如果没有，有没有办法可以输入代码，以便如果它检测到 IE，它会显示我的旧低分辨率图像？我到处寻找，但没有发现任何与我的具体问题有关的东西。我知道这是一个小例子，但我更大的图像做同样的事情并且更引人注目。希望大家能帮忙。谢谢。:)

# iphone - 如何使 UITabbarcontroller 显示在所有其他视图控制器上？

> ID：11490537
> 
> 赞同：1
> 
> 时间：2012-07-15T08:30:48.417
> 
> 标签：iphone, objective-c, uiviewcontroller, uitabbarcontroller

我希望底部的选项卡始终显示，即使我呈现模态视图控制器也是如此。所以当我调用 [self presentModalViewController:vc animated:YES]; 它不应该显示在标签栏上，而是在它下面（这会导致视图控制器的下部被标签栏控制器隐藏，这是我想要的）我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:47:05.783

我找到了方法，您只需将视图控制器视图设置为您自己的视图。所以你会说： Receipt b = [[Receipt alloc]init]; [自我设置视图：b.view]；

# rust - &T和T/&，~T和T/~的区别

> ID：11490538
> 
> 赞同：2
> 
> 时间：2012-07-15T08:30:58.323
> 
> 标签：rust, rust-obsolete

将指针类型作为类型前缀与在它之前使用斜线作为后缀之间有什么区别。斜线是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T22:12:33.383

语法 T/~ 和 T/& 基本上已被弃用（我什至不确定编译器是否仍然接受它）。在过渡到新向量方案的初始阶段，[T]/~ 表示指向向量的唯一指针，而 [T]/& 表示切片。这些类型现在分别写成 ~[T] 和 &[T]。斜线仍然用于固定长度的向量，例如 [int]/3。这完全等同于 C 类型的 int[3]。

# android - 在应用程序中使用多个日期选择器

> ID：11490540
> 
> 赞同：1
> 
> 时间：2012-07-15T08:31:50.467
> 
> 标签：android, datepicker

我想在单个应用程序中使用多个日期选择器，我已经谷歌搜索，我得到了使用日期选择器对话框选择日期的答案。
但是对于我的应用程序来说它变得很复杂，我必须为每个 Datepicker 按钮编写不同的代码。代码是，

```
 private void updateDisplay() 
 {
        Date = new StringBuilder()
                    // Month is 0 based so add 1
                    .append(mDay).append("/")
                    .append(mMonth + 1).append("/")
                    .append(mYear).append(" ");

 }
 private DatePickerDialog.OnDateSetListener mDateSetListener =
            new DatePickerDialog.OnDateSetListener() 
 {
                public void onDateSet(DatePicker view, int year, 
                                      int monthOfYear, int dayOfMonth) 
                {
                    mYear = year;
                    mMonth = monthOfYear;
                    mDay = dayOfMonth;
                    updateDisplay();
                    DisplayExpDate();
                }
 };
 @Override
 protected Dialog onCreateDialog(int id)
 {
       switch (id) 
       {
       case DATE_DIALOG_ID:
          return new DatePickerDialog(this,
                    mDateSetListener,
                    mYear, mMonth, mDay);
       }
       return null;
 } 
```

因此，请帮助我提供更简单的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T08:50:34.400

使用 DatePicker 创建自己的 DatePickerDialog，它将能够根据您提供的参数根据您的要求管理按钮。这是[官方教程](http://developer.android.com/guide/topics/ui/controls/pickers.html)如何使用选择器为 Fragment 创建 DatePickerDialog。你不应该有问题重用它来满足你的需要

# eclipse - Eclipse 无法爆炸 jar

> ID：11490541
> 
> 赞同：0
> 
> 时间：2012-07-15T08:31:52.393
> 
> 标签：eclipse, jar

我正在使用 Eclipse 平台进行 Java 开发。代码中引用了预先存在的 jar 文件（在构建路径中添加）。令我惊讶的是，有些 jar 在 eclipse 中没有被识别，即 Eclipse 给出了关于属于某些 jar 的类的构建错误。虽然我能够从这些 jar 文件中解压缩和查看 java 类。

我进一步仔细观察，发现这些 jar 在包资源管理器中也没有爆炸，即我无法在 eclipse 的包资源管理器中看到 META-INF 文件夹和 jar 类。但我可以通过 winzip 实用程序看到这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:53:37.537

尝试以下操作：

1.  在顶部菜单上单击项目->清理..
2.  如果这没有帮助，右键单击项目选择 Properties->java build path->Libraries 并确保将 jars 添加到类路径
3.  如果是，请转到“订购和导出”选项卡，选择您的罐子，然后按顶部按钮将其移动到顶部。

如果最后一个选项有效，那么您可能会有重复。请让我知道它是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:08:08.573

感谢您调查此问题。我能够找出这个问题的根本原因。实际上，jar 文件是使用剪贴板从远程 windows 机器复制到本地 windows 机器的。这样，jar 文件以 Eclipse 或应用程序无法识别其中的类的 ASCII 模式复制。现在我已经在带有 /B 参数（二进制模式）的 windows 中使用复制命令复制了 jar，这些现在按预期工作。

再次感谢！

# c - 为什么 C 隐式转换会像它们那样运行？

> ID：11490542
> 
> 赞同：7
> 
> 时间：2012-07-15T08:31:56.887
> 
> 标签：c, integer, implicit-conversion, unsigned-integer, c89

当整数超出类型的范围时，最大值 + 1 被加/减（取决于数字所在范围的哪一部分）。例如，

```
unsigned short num = 65537; 
```

num 的值为 1（减去 65536）。我的问题是：为什么会这样？我的直觉告诉我它与进位标志和溢出标志有关，因为最大值始终是 1111....

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T08:37:22.007

对于使用二进制补码作为有符号整数的机器，转换为**N**位无符号类型的规则等同于丢弃除低位**N**位之外的所有位。对于典型的硬件，这是进行转换的最简单方法。

该标准允许有符号整数的其他表示形式，但为了保持一致性，使用相同的转换规则。这可能需要在此类机器上进行一些额外的工作，但是（a）此类机器非常罕见，并且（b）无论如何费用应该相当小。

# wpf - 如何从 TreeView 动态刷新 DataGrid

> ID：11490544
> 
> 赞同：0
> 
> 时间：2012-07-15T08:32:38.277
> 
> 标签：wpf, sql-server

我有两列：左侧包含 2 级 TreeView 供应商/类别，右侧包含带有产品的 DataGrid。我想单击 TreeView 层次结构（供应商或类别），DataGrid 应该根据选择的供应商或类别进行刷新，换句话说，应该只显示属于所选供应商或类别的产品。代码如下所示：

```
<Window x:Class="Replen.Window2"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:local="clr-namespace:Replen"
    Title="North Reports" Height="550" Width="1180">
<Window.Resources>
    <ObjectDataProvider IsAsynchronous="True" x:Key="productNorthProvider" ObjectType="    {x:Type local:ProductNorthDB}" MethodName="GetProductNorthList">
        <ObjectDataProvider.MethodParameters>
            <sys:String>1</sys:String>
        </ObjectDataProvider.MethodParameters>
    </ObjectDataProvider>
</Window.Resources>  
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="220" />
        <ColumnDefinition Width="5" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="300"/>
        <RowDefinition Height="5"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <GridSplitter VerticalAlignment="Stretch" 
              HorizontalAlignment="Stretch" ShowsPreview="True"
              Grid.Column="1" Grid.RowSpan="3" ResizeBehavior="PreviousAndNext"
              Width="5" Background="LightSteelBlue" />
    <GridSplitter VerticalAlignment="Stretch" 
              HorizontalAlignment="Stretch" ShowsPreview="True"
              Grid.Row="1" Grid.ColumnSpan="3" ResizeBehavior="PreviousAndNext"
              Height="5" Background="LightSteelBlue"/>
    <Border Grid.Column="0" Grid.Row="0" Padding="0" Margin="0" Background="LightSteelBlue" Grid.RowSpan="3">
        <TreeView Name="treeSuppliersCategories" Margin="5, 5, 0, 5" FontSize="12" Grid.RowSpan="2">
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding SupplierCategoryNorth}">
                    <TextBlock Text="{Binding SupplierNorthName}" Padding="2"/>
                    <HierarchicalDataTemplate.ItemTemplate >
                        <DataTemplate >
                            <TextBlock Name="categoryCode" VerticalAlignment="Center">            
                                <TextBlock.Text>
                                    <MultiBinding StringFormat=" {0}  {1}">
                                        <Binding Path="CategoryNorthCode" />
                                        <Binding Path="CategoryNorthName"/>
                                    </MultiBinding>
                                </TextBlock.Text>
                            </TextBlock>
                        </DataTemplate>
                    </HierarchicalDataTemplate.ItemTemplate>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>
    </Border>        
    <Border Grid.Column="2" Grid.Row="0" Padding="0" Margin="0" Background="LightSteelBlue">
        <DataGrid Grid.Column="2" Grid.Row="2" x:Name="gridProductsNorth" Margin="0, 5, 5, 0" AutoGenerateColumns="False" 
                  ItemsSource="{Binding Source={StaticResource productNorthProvider}}" IsReadOnly="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Product" Width="60"  Binding="{Binding Path=ProductNorthCode}"></DataGridTextColumn>
                <DataGridTextColumn Header="Product Name" Width="160"  Binding="{Binding Path=ProductNorthName}" ></DataGridTextColumn>
                <DataGridTextColumn Header="Supplier" Width="60"  Binding="{Binding Path=SupplierNorthCode}"></DataGridTextColumn>
                <DataGridTextColumn Header="Supplier Name" Width="160"  Binding="{Binding Path=SupplierNorthName}"></DataGridTextColumn>
                <DataGridTextColumn Header="Category" Width="60"  Binding="{Binding Path=CategoryNorthCode}" ></DataGridTextColumn>
                <DataGridTextColumn Header="Category Name" Width="100"  Binding="{Binding Path=CategoryNorthName}" ></DataGridTextColumn>
                <DataGridTextColumn Header="Unit Price" Width="70"  Binding="{Binding Path=UnitPrice}"></DataGridTextColumn>
                <DataGridTextColumn Header="In Stock" Width="70"  Binding="{Binding Path=UnitsInStock}"></DataGridTextColumn>
                <DataGridTextColumn Header="On Order" Width="70"  Binding="{Binding Path=UnitsOnOrder}"></DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Border>
</Grid>
</Window>} 
```

数据来自 SQL 服务器数据库。我会很感激你的帮助。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T08:47:10.497

您的解决方案目前似乎直接将模型绑定到视图。

您应该调查 MVVM 模式。

当您在Treeview中选择的项目发生变化时，您可以直接更改数据网格（即为其提供其他数据）

MVVM 将您的视图与模型分离：

模型 <--> 视图模型 <--> 视图

视图中的选择发生更改，ViewModel 收到通知（SelectedItem 已更改），然后 ViewModel 可以使用来自模型的新数据更新视图。在您的情况下，通过更改网格的 ViewModel 将在数据网格中更改产品。

这是一个关于 MVVM 的优秀视频教程： [Jason Dollinger on MVVM](http://blog.lab49.com/archives/2650)

他在本教程中开发的源代码也可用： [Lab49 上的源代码](http://blog.lab49.com/archives/2689)

# windows-7 - 为什么我们使用 InstallShield 创建的产品小升级无法在 Windows 7 上安装

> ID：11490548
> 
> 赞同：2
> 
> 时间：2012-02-15T11:28:53.570
> 
> 标签：windows-7, windows-installer, installshield

使用 InstallShield 2008 创建的我们产品的小升级可以完美地安装在 Win XP 上，但在 Windows 7 32 位和 64 位上失败。它提示输入管理员权限，之后，虽然它看起来已经完成安装（它甚至说“安装成功完成”），但旧的 DLL 不会被替换。

大约有 15 个 DLL 必须有新的产品代码。

我在这里完全在海上。我以前没有使用 InstallShield 的经验，但由于我们公司的资源限制，我被分配了这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T05:12:49.137

在 InstallShield 2008 中打开 ISM InstallShield 项目文件，然后转到 Installation Designer。检查应用程序数据部分下的文件、文件夹、组件等是否适用于 Windows 7 环境。

通常用于 Windows Installer 2.0（例如 WinXP）的早期 MSI 的问题需要重新打包或增强。对于 DLL，右键单击 InstallShield 中的文件并选择属性。确保 DLL 的自我注册，您还可以设置权限（以及根据您的 AD 配置选择组/用户）。

此外，尝试通过 DOS 命令提示符执行生成详细、详细的 MSI 日志：

1.  安装 'setup.exe' CMD: setup.exe /v /qn /l*v "%temp%\setup.log"
2.  安装 'setup.msi' CMD: msiexec /i setup.msi /qn /l*v "%temp%\setup.log"

注意：搜索安装日志文件，搜索“返回值 3”（一般错误）或“错误”的字符串实例，并尝试查明安装程序失败的位置。

# c - gcc 中是如何编译的

> ID：11490553
> 
> 赞同：0
> 
> 时间：2012-07-15T08:34:50.170
> 
> 标签：c, gcc, compilation, include

我有两个文件`sendfdsock.c, accessories.c`。在 Accessories.c 中，我定义了各种常用函数（如 logp - 打印日志）并包含各种常用库（如 sys/socket.h、string.h、stdio.h ....）。现在不是包含`accessories.c`在`sendfdsock.c`或首先制作`acceessories.h`然后包含在中`sendfdsock.c`，而是我计划首先制作两者的目标文件，`sendfdsock.c and accessories.c`然后在发送中将它们链接在一起。执行此操作的命令（我没有制作任何`accessories.h`我直接链接的文件`accessories.c`）：

```
gcc -c sendfdsock.c
gcc -c accessories.c
gcc -o send sendfdsock.o accessories.o 
```

但是在第一个命令之后，`gcc -c sendfdsock.c`我收到了一些错误和警告。这些错误的原因是`sendfdsock.c`需要在`.h`我包含在`accessories.h`. 这意味着 gcc 在制作目标文件时会检查各种函数和变量的定义。**但**`logp()`令人毛骨悚然的是，我`accessories.c`在第一行定义和使用的函数没有错误或警告`main() of sendfdsock.c`。
也就是说，用户定义的函数没有错误/警告，但标准库则相反。**为什么？**
这个编译是如何在 gcc 中完成的？有没有什么好的资源可以简要地告诉我这个编译和链接的东西。
我还分享了这两个文件的代码（如果有人想看的话）：

**`accessories.c`**：

```
#include <malloc.h>
#include <time.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdio.h>
#include <errno.h>
#include <string.h>
#include <pthread.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <error.h>
#include <signal.h>

#define PORT "4444" //port we are listening on

int sendall(int fd, char *buf, int *len)
{
    int total = 0;        // how many bytes we've sent
    int bytesleft = *len; // how many we have left to send
    int n;

    while(total < *len) {
        n = send(fd, buf+total, bytesleft, 0);
        if (n == -1) { break; }
        total += n;
        bytesleft -= n;
    }

    *len = total; // return number actually sent here

    return n==-1?-1:0; // return -1 on failure, 0 on success
}

int recvall(int fd, char *buf, int *len)
{
    int total = 0;        // how many bytes we've sent
    int bytesleft = *len; // how many we have left to send
    int n;

    while(total < *len) {
        n = recv(fd, buf+total, bytesleft, 0);
        if (n == -1) { break; }
        total += n;
        bytesleft -= n;
    }

    *len = total; // return number actually sent here

    return n==-1?-1:0; // return -1 on failure, 0 on success
} 

void logp(int typ, char* msg) // typ --> type(category) of message [1-Normal Log, 2-Warning(any unexpected thing happened), 3-Error, 4-Debugging Log ]
{
    int fd;
    time_t now;
    ssize_t wlength=0;
    char * dat;
    char * str;
    int size = 45+strlen(msg);//14+24+5+sizeof msg+1

    str= (char *) malloc(size);

    time(&now);//system time in seconds
    dat = ctime(&now); // converting seconds to date-time format
    dat = strtok(dat,"\n");

    //Appending type of log
    switch(typ)
    {
    case 1:
        strcpy(str,"__LOG__    |  ");
        strcat(str,dat);
        break;
    case 2:
        strcpy(str,"__WARN__   |  ");
        strcat(str,dat);
        break;
    case 3:
        strcpy(str,"__ERR__    |  ");
        strcat(str,dat);
        break;
    case 4:
        strcpy(str,"__DEBUG__  |  ");
        strcat(str,dat);
        break;
    default:
        strcpy(str,"__UNDEF__  |  ");
        strcat(str,dat);
        break;
    }

    strcat(str,"  |  ");
    strcat(str,msg);//appending message
    strcat(str,"\n");

    fd = open("log", O_WRONLY | O_CREAT | O_APPEND, 0644); // should be opened somewhere else
    if (fd == -1)
        printf("Could not open log - %s\n",strerror(errno));
    else
    {//need to add lock to the file and printing error message
        while ( wlength < strlen(str) )
        {
            wlength = write(fd, str,strlen(str));
            if (wlength == -1)
            {
                printf("Error : writing log\n");
                break;
            }
        }

    }
}
void errorp(char *where, int boolean, int errn,char *what)
{
    char errmsg[21+strlen(where)];
    strcpy(errmsg,"Where - ");
    strcat(errmsg,where);
    strcat(errmsg,"  |  Error - ");

    if(boolean == 1)//we got error number
    {
        strcat(errmsg,strerror(errn));
        //fprintf(stderr,"ERROR - In %s and error is %s\n",where ,strerror(errn));
        logp(3,errmsg);
    }
    else if(boolean == 0)//we got a message
    {
        strcat(errmsg,what);
        //fprintf(stderr,"ERROR - In %s and error is %s\n",where ,what);
        logp(3,errmsg);
    }
    else//we got nothing
    {
        strcat(errmsg,"No Message");
        //fprintf(stderr,"ERROR - In %s\n",where);
        logp(3,errmsg); 
    }
} 
```

**`sendfdsock.c`**：

```
#include <stropts.h>
#include <fcntl.h>
#include <sys/ioctl.h>
#include <sys/un.h>

#define CONTROLLEN  CMSG_LEN(sizeof(int))
static struct cmsghdr   *cmptr = NULL;  /* malloc'ed first time */ 

int send_err(int fd, int errcode, const char *msg);
int send_fd(int fd, int fd_to_send);

int main(int argc, char const *argv[])
{   
    logp(1,"started"); 
    int fd_to_send;
    if((fd_to_send = open("vi",O_RDONLY)) < 0)
        printf("vi open failed");

    struct sockaddr_un address;
    int  socket_fd, nbytes;
    char buffer[256];

    socket_fd = socket(PF_UNIX, SOCK_STREAM, 0);
    if(socket_fd < 0)
    {
        printf("socket() failed\n");
        return 1;
    }

    /* start with a clean address structure */
    memset(&address, 0, sizeof(struct sockaddr_un));

    address.sun_family = AF_UNIX;
    snprintf(address.sun_path, sizeof(address.sun_path)-1, "./demo_socket");

    if(connect(socket_fd, (struct sockaddr *) &address, sizeof(struct sockaddr_un)) != 0)
    {
        printf("connect() failed\n");
        return 1;
    }

    nbytes = snprintf(buffer, 256, "hello from a client");
//    write(socket_fd, buffer, nbytes);

  //  nbytes = read(socket_fd, buffer, 256);
    buffer[nbytes] = 0;

    //printf("MESSAGE FROM SERVER: %s\n", buffer);

    //sending the file descriptor    
    printf("From send_fd %d \n",send_fd(socket_fd,fd_to_send));
    printf("Main end");
    close(socket_fd);

    exit(0);

}

int send_err(int fd, int errcode, const char *msg)
{
    int     n;

    if ((n = strlen(msg)) > 0)
        if (write(fd, msg, n) != n)    /* send the error message */
            return(-1);

    if (errcode >= 0)
        errcode = -1;   /* must be negative */

    if (send_fd(fd, errcode) < 0)
        return(-1);

    return(0);
}

int send_fd(int fd, int fd_to_send)
{

    ssize_t temp;
    struct iovec    iov[1];
    struct msghdr   msg;
    char            buf[2]; /* send_fd()/recv_fd() 2-byte protocol */

    iov[0].iov_base = buf;
    iov[0].iov_len  = 2;
    msg.msg_iov     = iov;
    msg.msg_iovlen  = 1;
    msg.msg_name    = NULL;
    msg.msg_namelen = 0;
    if (fd_to_send < 0) {
        msg.msg_control    = NULL;
        msg.msg_controllen = 0;
        buf[1] = -fd_to_send;   /* nonzero status means error */
        if (buf[1] == 0)
            buf[1] = 1; /* -256, etc. would screw up protocol */
    } else {
        if (cmptr == NULL && (cmptr = malloc(CONTROLLEN)) == NULL)
            return(-1);
        cmptr->cmsg_level  = SOL_SOCKET;
        cmptr->cmsg_type   = SCM_RIGHTS;
        cmptr->cmsg_len    = CONTROLLEN;
        msg.msg_control    = cmptr;
        msg.msg_controllen = CONTROLLEN;
        *(int *)CMSG_DATA(cmptr) = fd_to_send;     /* the fd to pass */
        buf[1] = 0;          /* z ero status means OK */
    }
    buf[0] = 0;              /* null byte flag to recv_fd() */
    printf("before sendmsg \n");
    temp = sendmsg(fd, &msg, 0);
    if (temp != 2)
    {
        printf("inside sendmsg condition %d\n",temp);
        return(-1);
    }
    printf("after sendmsg %d\n",temp);
    return(0);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T09:20:38.367

编译`-Wall -pedantic`并仔细检查：你可能会得到一个警告，告诉你你隐式定义`int logp`了如果它没有找到声明，这就是 gcc 所做的。

附言。如果您不确定声明和定义的区别，请开始阅读；-)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-15T08:40:16.570

`extern`因为这些变量就是您要寻找的。

哦 .h 文件声明了一些东西，但没有定义它。

# jquery - jquery 动画 Flash 对象

> ID：11490555
> 
> 赞同：0
> 
> 时间：2012-07-15T08:34:56.837
> 
> 标签：jquery, flash, animation

我正在尝试在动画中调整 Flash 对象的大小（并最终移动它，但首先要移动它），但它似乎根本不起作用。

如果我只更改 Jquery 中的 css 属性，它就可以工作。

**不工作的动画：**

```
$('#greenbtn').hover(function(){
    $(this).animate({width: '242px', height: '63px'}, 'fast', 'easeOutSine');
    console.log('here1');
});
$('#greenbtn').mouseleave(function(){
    $(this).animate({width: '228px', height: '57px'}, 'fast', 'easeOutSine');
    console.log('here2');
}); 
```

**在职的：**

```
$('div.leftB').hover(function(){
    $('#greenbtn').css({width: '242px', height: '63px'});
});
$('div.leftB').mouseleave(function(){
    $('#greenbtn').css({width: '228px', height: '57px'});
}); 
```

.animate() 根本无法在 Flash 上运行，还是我的代码有问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T08:40:40.867

您是否甚至在非工作场景中进入事件处理程序？
在这两种情况下，您都在起作​​用，`#greenbtn`但事件侦听器绑定到不同的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T09:17:40.527

由于您可以在没有动画的情况下更改 css 属性，因此您可以对该部分使用 CSS 过渡：

```
#greenbtn{
  -webkit-transition: all 400ms ease-in;
     -moz-transition: all 400ms ease-in;
      -ms-transition: all 400ms ease-in;
       -o-transition: all 400ms ease-in;
          transition: all 400ms ease-in;
} 
```

# php - 将 PHP 输出转换为 XML - 创建 RSS 提要

> ID：11490559
> 
> 赞同：0
> 
> 时间：2012-07-15T08:35:49.500
> 
> 标签：php, xml

当前代码为我提供了“li”的输出，我想将输出调整为有效的 XML，以便我可以从该列表创建 RSS 提要。有什么建议吗？

到目前为止，这是我的代码：

```
<?php
session_start();
mb_internal_encoding( 'UTF-8' );
require_once('../config.php');
require_once('../dbconnect.php');
echo ' <div class="tagsz clearfix"> ';
echo "<ul id='mytags_ara'>";
echo "<h2 class='title'>English Trends</h2>";
echo ' <div class="tagsz clearfix"> ';
 echo "<ul id='mytags_en'>";
 $query = "SELECT hashtag, sum(count) as total FROM `trending_topics` WHERE lang=0   and  hashtag != '' and date >= date_sub(left(now(), 10), interval 1 day) group by hashtag      order by total desc";
  $res = mysql_query($query);
 $index = 0;
 $hashtags = null;
 while($row = mysql_fetch_assoc($res) ) {
 $hashtag = $row['hashtag'];
 if( strtolower($hashtag) != 'newnew' && strtolower($hashtag) != 'new' && strtolower  ($hashtag) != 'more' )  {
 echo "<li><a class='size".$index."'".$hashtag."'>#".$hashtag."</a></li>";
 $index++;
 }
 if($index==6) break;}
 echo "</ul>";
 echo "</div>";
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T08:59:35.873

这可能会或可能不会帮助您，但这是我用来生成 Atom 提要的代码：

```
<?php
    define('DS', DIRECTORY_SEPARATOR);
    define('ROOT', dirname(dirname(__file__)));
    define('HOST', 'http://' . $_SERVER['HTTP_HOST'] . dirname( $_SERVER['PHP_SELF'] ) );

    function publishAtom() {
            /*
            My data entities had these fields:
            - title
            - category
            - permalink (a URL-safe version of the title)
            - timestamp
            - lastupdated
            - abstract

            You'll need to adjust the code below to match your entities.
            */

            # get the data
            $rows = //<<insert your data-gathering-code here>> -> needs to be an array of your entities;

            $feed_title = "Atom Feed";
            $feed_subtitle = "Get all our newest entries when you subscribe to the feed.";
            $site_domain = "http://yourdomain.com";
            $author_name = "Your Name";
            $author_email = "yourname@yourdomain.com";

            $feed = '<?xml version="1.0" encoding="utf-8"?>
            <feed xmlns="http://www.w3.org/2005/Atom">
                <title>' . $feed_title . '</title>
                <subtitle>' . $feed_subtitle . '</subtitle>
                <link href="' . $site_domain . '/atom.xml" rel="self" />
                <link href="' . $site_domain . '" />
                <updated>' . date('c') . '</updated>
                <author>
                    <name>' . $author_name . '</name>
                    <email>' . $author_email . '</email>
                </author>
                <id>tag:' . str_replace( "http://", '', $site_domain ) . ',2012:feed</id>';

            # Get the entries

            foreach( $rows as $row ) {  
                $feed .= '<entry>
                    <title>' . $row->title . '</title>
                    <link href="' . strtolower( $site_domain . DS . $row->category . DS . $row->permalink ) . '" />';

                    $date= date( 'Y-m-d', strtotime( $row->timestamp ) );
                    $uuid = str_replace( "http://", '', $site_domain ) . ',' . $date . ':' . $row->permalink;

                $feed .= '<id>tag:' . $uuid . '</id>';

                if( isset( $row->lastupdated ) ) {
                    $feed .= '<updated>' . date( 'c', strtotime( $row->lastupdated ) ) . '</updated>';
                }
                else {
                    $feed .= '<updated>' . date( 'c', strtotime( $row->timestamp ) ) . '</updated>';
                }

                $feed .= '<summary>Entry for ' . $date . '</summary>
                    <content type="xhtml" xml:lang="en">
                        <div xmlns="http://www.w3.org/1999/xhtml">' . $row->abstract . '</div>
                    </content>
                </entry>';
            }

            $feed .= "</feed>";

            $path = ROOT . DS . "atom.xml";
            $filenum=fopen( $path, "w" );
            fwrite( $filenum, $feed );
            fclose( $filenum );
        }
    }

    # call this function wherever is relevent for you
    publishAtom();
?> 
```

它应该让您了解如何手动执行此操作。HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T09:20:31.257

你试过 SimpleXML 吗？SimpleXML 是一个很棒的包，它使解析和创建 XML 样式文档变得非常容易。

对于您的具体情况，试试这个：[http ://snipplr.com/view/61231/](http://snipplr.com/view/61231/)

**编辑：** 这是 SimpleXML 的完整文档：http: [//in.php.net/simplexml](http://in.php.net/simplexml)

# r - 为没有 sudo 权限的旧 R 版本安装 R 包

> ID：11490560
> 
> 赞同：0
> 
> 时间：2012-07-15T08:35:54.693
> 
> 标签：r

我在没有 sudo 权限且安装了 R 版本 2.13.1 的计算机上运行，​​并且我想安装一个包 (Rcpp)。如果我尝试通过 install.packages() 安装包

我明白了

```
 package ‘Rcpp’ is not available (for R version 2.13.1) 
```

我认为因为默认情况下 CRAN 需要 R 版本 2.15 及更高版本。

因为我不是超级用户，所以我无法更新我的 R 版本。有没有办法（没有 sudo）为我的旧 R 版本安装旧版本的 Rcpp？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:11:49.567

你不能从源代码安装吗？`Rccp`您可以从[软件包存档](http://cran.stat.ucla.edu/src/contrib/Archive/Rcpp/)中下载旧版本。

阅读帮助文件 ( `?install.packages`) 以获取说明，但基本上您提供下载包的路径并设置`repos`为`NULL`. `lib`如果您没有足够的权限安装到默认 R 库，您可能还需要指定不同的路径。

我还没有尝试过，但您可能还想尝试[此功能](https://gist.github.com/1503736)，该功能可让您指定要安装的软件包的版本。

# jira - Jira 问题提醒

> ID：11490566
> 
> 赞同：8
> 
> 时间：2012-07-15T08:36:33.970
> 
> 标签：jira

当问题 24/36/48 小时开放时，如何通过电子邮件向预定义的邮件组创建通知。

对于这些类型中的任何一种 (24/36/48) 都应该有一个提醒，如果问题被重新打开，则应该重新开始计数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:10:21.107

经过大量的搜索，我已经解决了这个问题：

*   创建了一个名为“Open since”的自定义字段 - 一个“日期时间”字段来保存问题的打开时间。
*   创建了一个名为“通知”的自定义字段 - 一个只读文本字段。
*   使用[Jira Scripting Suite](https://stackoverflow.com/questions/11490566/jira-issue-reminder#answer-11536935)，我创建了一个后期函数，并将其放置在进入“打开”状态的每个转换中。这是为了保持问题的开放时间。

编码：

```
from com.atlassian.jira import ComponentManager
from datetime import datetime

opend_since_field = "customfield_10001"

# get opened since custom field:
cfm = ComponentManager.getInstance().getCustomFieldManager()
# get current time
currentTime = datetime.today()
# save current time
issue.setCustomFieldValue(cfm.getCustomFieldObject(opend_since_field),currentTime) 
```

*   我创建了一个新过滤器来获取超过 24 小时开放的问题列表：

JQL:

```
project = XXX AND status= Open ORDER BY updated ASC, key DESC 
```

*   最后——我使用了[Jira 远程 API](https://developer.atlassian.com/display/JIRADEV/JIRA+Remote+API+Reference) —— [XML-RPC](https://developer.atlassian.com/display/JIRADEV/JIRA+XML-RPC+Overview)方法来编写一个安排为每 5 分钟运行一次的 Python 脚本。脚本读取过滤器发出的所有邮件，拉出所有处于“打开”状态超过 24 小时/36 小时/48 小时的邮件，发送提醒电子邮件，并将它们标记为已通知，因此每种类型只会发送一个提醒.

蟒蛇代码：

```
#!/usr/bin/python

# Refer to the XML-RPC Javadoc to see what calls are available:
# http://docs.atlassian.com/software/jira/docs/api/rpc-jira-plugin/latest/com/atlassian/jira/rpc/xmlrpc/XmlRpcService.html
# /home/issues_reminder.py

import xmlrpclib
import time
from time import mktime
from datetime import datetime
from datetime import timedelta
import smtplib,email
from smtplib import SMTP 
from email.MIMEMultipart import MIMEMultipart
from email.MIMEBase import MIMEBase
from email.MIMEText import MIMEText
from email import Encoders

# Jira connction info
server = 'https://your.jira.com/rpc/xmlrpc'
user = 'user'
password = 'password'
filter = '10302' # Filter ID
# Email definitions 
smtpserver = 'mail.server.com'
fromAddr = 'support@your.jira.com'
mail_user = 'jira_admin@your.domain.com'
mail_password = 'password'
toAddr = 'support@your.domain.com'
mysubject = "hrs Issue notification!!!"
opend_since_field = "customfield_10101"

COMMASPACE = ', '
def email_issue(issue,esc_time):
    # create html email
    subject = '['+issue+'] '+esc_time+mysubject
    html = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" '
    html +='"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">'
    html +='<body style="font-size:12px;font-family:Verdana">'
    html +='<p align="center"><img src="your_logo.jpg" alt="logo" height="43" width="198"></p> '
    html +='<p> The issue ['+issue+'] is open for over '+esc_time+' hours.</p>'
    html +='<p> A link to view the issue: https://your.jira.com/browse/'+issue+'.</p>'
    html +='<BR><p> This is an automated email sent from Jira.</p>'
    html +='</body></html>'
    emailMsg = email.MIMEMultipart.MIMEMultipart('alternative')
    emailMsg['Subject'] = subject
    emailMsg['From'] = fromAddr
    emailMsg['To'] = toAddr
    emailMsg.attach(MIMEText(html, 'html'))
    # Send the email
    emailserver = SMTP(smtpserver) # ip or domain name of smtp server
    emailserver.login(mail_user, mail_password)
    emailserver.sendmail(fromAddr, [toAddr], emailMsg.as_string())
    emailserver.quit()
    return

s = xmlrpclib.ServerProxy(server)
auth = s.jira1.login(user, password)

esc12List = []
esc24List = []
esc48List = []

issues = s.jira1.getIssuesFromFilter(auth, filter)
print "Modifying issue..."
for issue in issues:
        creation = 0;
        # get open since time
        for customFields in issue['customFieldValues']:
                if customFields['customfieldId'] == opend_since_field :
                        print "found field!"+  customFields['values']
                        creation = customFields['values']
        if (creation == 0):
                creation = issue['created']
                print "field not found"
    creationTime = datetime.fromtimestamp(mktime(time.strptime(creation, '%d/%b/%y %I:%M %p')))
    currentTime = datetime.fromtimestamp(mktime(time.gmtime()))
    delta = currentTime - creationTime
    esc12 = timedelta(hours=12)
    esc24 = timedelta(hours=24)
    esc48 = timedelta(hours=48)
    print "\nchecking issue "+issue['key']
    if (delta < esc12):
        print "less than 12 hours"
        print "not updating"
        continue
    if (delta < esc24):
        print "less than 24 hours"
        for customFields in issue['customFieldValues']:
            if customFields['customfieldId'] == 'customfield_10412':
                if customFields['values'] == '12h':
                    print "not updating"
                    break
                else:
                    print "updating !!!"
                    s.jira1.updateIssue(auth, issue['key'], {"customfield_10412": ["12h"]})
                    esc12List.append(issue['key'])
                    break
        continue
    if (delta < esc48):
        print "less than 48 hours"
        for customFields in issue['customFieldValues']:
            if customFields['customfieldId'] == 'customfield_10412':
                if customFields['values'] == '24h':
                    print "not updating"
                    break
                else:
                    print "updating !!!"
                    s.jira1.updateIssue(auth, issue['key'], {"customfield_10412": ["24h"]})
                    esc24List.append(issue['key'])
                    break
        continue
    print "more than 48 hours"
    for customFields in issue['customFieldValues']:
        if customFields['customfieldId'] == 'customfield_10412':
            if customFields['values'] == '48h':
                print "not updating"
                break
            else:
                print "updating !!!"
                s.jira1.updateIssue(auth, issue['key'], {"customfield_10412": ["48h"]})
                esc48List.append(issue['key'])
                break

for key in esc12List:
    email_issue(key,'12')
for key in esc24List:
    email_issue(key,'24')
for key in esc48List:
    email_issue(key,'48') 
```

这种方法的主要优点是它是高度可定制的，并且通过将数据保存到自定义字段，可以轻松创建过滤器和报告以显示已打开很长时间的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T09:48:27.627

我一般同意 Kuf 的方法，但**最近 JIRA 插件发布了[自动化插件](https://marketplace.atlassian.com/plugins/com.atlassian.plugin.automation.jira-automation-plugin)和[PDF 自动化插件](https://marketplace.atlassian.com/plugins/com.midori.jira.plugin.pdfautomation)，可以进一步增强它**。

因此，您定义和更新脚本化自定义字段，如上所述。如上所述，您可以使用 JQL 查询创建已保存的过滤器。

（有趣的部分从这里开始。）

您使用自动化插件设置新的[自动化规则：](http://blogs.atlassian.com/2014/02/atlassian-support-uses-jira-automation-plugin/)

1.  定义基于 CRON 表达式的触发器以匹配您的首选计划（例如，每 5 分钟一次）

2.  选择“发送 PDF”动作来执行，选择一个 PDF 模板（如果一个简单的问题列表就足够了，那么使用“问题导航器”模板）并输入电子邮件地址来 ping。

与您的原始解决方案相比，它的优势：

1.  它更易于维护：它都是基于插件的，所有的乐趣都发生在 JIRA 内部。没有外部依赖，没有要维护的脚本。

2.  与简单的问题链接相比，PDF 格式允许更好的格式化和可视化可能性（图表！）。

*免责声明：我是这个付费 JIRA 插件的开发者。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T14:16:14.057

这最好通过[订阅](https://confluence.atlassian.com/display/JIRA/Receiving+Search+Results+via+Email)来实现。

首先为每种类型（24 小时、36 小时等）创建一个搜索过滤器。注意：在这一点上，我们必须更准确地理解“24 小时开放”的含义。我假设您关心长期未分配的问题。

因此，要过滤掉这些问题，您可以使用如下过滤器：

```
created <= -24h and status = Open and assignee is null 
```

如果您想要 24 小时未触及的问题，请使用“更新”而不是在上面的示例中创建。[单击此处](https://confluence.atlassian.com/display/JIRA/Advanced+Searching)了解如何使用 Jira 查询语言。

使用有意义的名称保存过滤器（例如“24h open”）。

现在在问题->管理过滤器下有一个“订阅”列，您可以在其中为自己或任何 Jira 组订阅此过滤器。只需每天使用时间表和每天一次的间隔，选择一个方便的时间，然后就可以了。

对重新打开的问题使用相同的技术，但将过滤器查询更改为：

```
status = Reopened AND updated <= -24h 
```

# jquery - 获取鼠标指针下方的DIV列表（mouseup事件）

> ID：11490571
> 
> 赞同：0
> 
> 时间：2012-07-15T08:37:04.630
> 
> 标签：jquery, mouseevent, html5-canvas

我是 JQUERY 的新手，我在“CANVAS”元素下放置了几个 DIV 元素。当您单击 DIV 元素时，将开始绘制线条。当我在另一个 DIV 中释放鼠标时，它会停止（将在这些 DIV 元素上绘制线条）。现在我想补充一点，如果我在 DIV 之外释放鼠标，它应该清除绘图。我无法弄清楚捕捉此事件以清除绘图的正确方法。请帮我。

HTML 元素结构

```
 <div id="content">
    <div id="draganddrop" >
        <div id="drag_1" class="hitbox"></div>
        <div id="drag_2" class="hitbox"></div>
        <div id="drop_1" class="hitbox">
        <div id="drop_2" class="hitbox">
    </div>
    <canvas id="linedrawing" style="pointer-events:none" class="border"></canvas>
</div> 
```

点击事件

```
<script>
    $(function() { 
        $("#drag_1").mousedown(startDrawing);
        $("#drag_2").mousedown(startDrawing);

        $("#drop_1").mousedown(startDrawing);
        $("#drop_2").mousedown(startDrawing);

        $("#draganddrop").mousemove(updateDrawing);
        $("#draganddrop").mouseup(finishDrawing);
    });
</script> 
```

如果用户在“drag_1、drag_2、drop_1、drop_2”之外释放鼠标，我想清除绘图。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:50:17.290

[将clear 方法](https://stackoverflow.com/questions/2142535/)绑定到 body：

```
<script>
    $(function() { 
        $("#drag_1").mousedown(startDrawing);
        $("#drag_2").mousedown(startDrawing);

        $("#drop_1").mousedown(startDrawing);
        $("#drop_2").mousedown(startDrawing);

        $("#draganddrop").mousemove(updateDrawing);
        $("#draganddrop").mouseup(finishDrawing);
        $("body").mouseup(clearDrawing);
    });
</script> 
```

# blackberry - 如何在黑莓模拟器 9800 上使用 burp 拦截请求

> ID：11490572
> 
> 赞同：0
> 
> 时间：2012-07-15T08:37:06.663
> 
> 标签：blackberry

我正在尝试使用 Burp 代理拦截黑莓模拟器（9800）请求。我不在代理后面。我已经安装了黑莓电子邮件和 MDS 服务模拟器 4.1.2 和黑莓模拟器 9800。我可以在模拟器上浏览互联网。但是，我想使用 Burp 拦截请求。你能告诉我如何通过黑莓模拟器使用 burp 拦截请求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T08:50:55.693

[根据 Burp 文档](http://portswigger.net/burp/help/proxy.html)`127.0.0.1:8080`，默认情况下，Burp 代理似乎在监听。因此，请在与您的 BlackBerry 模拟器和 MDS-CS 相同的机器上运行它。

这是[在 MDS 模拟器中设置代理的 BlackBerry 文档](http://supportforums.blackberry.com/t5/Testing-and-Deployment/Configure-the-BlackBerry-MDS-Simulator-to-work-behind-a-proxy/ta-p/446115)。

似乎这适用于 HTTP（但不适用于 HTTPS），这通常不是您试图拦截的东西，因为它无论如何都是加密的。

# objective-c - UITableView setEditing 为 NO 不会改变 barButtonItem

> ID：11490575
> 
> 赞同：1
> 
> 时间：2012-07-15T08:37:43.800
> 
> 标签：objective-c, ios, cocoa-touch, uitableview, uibarbuttonitem

我有`UITableViewController`一个`UINavigationController`. 我将 设置`rightBarButtonItem`为编辑按钮：

```
self.navigationItem.rightBarButtonItem = self.editButtonItem; 
```

![在此处输入图像描述](../Images/574a2ea90fb79e8d073c537645b7541b.png)

这很好用，在我打电话后，我使用以下方式以`tableView:commitEditingStyle:forRowAtIndexPath:`编程方式更改我`tableView`的编辑模式：

```
[self.tableView setEditing:NO animated:YES]; 
```

这里奇怪的是，它`barButtonItem`似乎仍然处于“编辑模式”，因为它仍然像我处于编辑模式时一样显示“完成”。单击它会将按钮更改回“编辑”，然后我必须再次单击以将其带回编辑模式。

![在此处输入图像描述](../Images/df7ee9248f67913e19616c2966f348b1.png)

为什么`barButtonItem`编辑模式也没有改变？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-15T08:42:37.387

该按钮控制视图控制器的编辑模式，将其传递到表格视图。您正在将表格视图直接退出编辑模式，而不是告诉视图控制器。尝试将编辑模式设置为 on`self`而不是`self.tableView`.

# php - Mysql公式根据列中的值计算出他们有多少分

> ID：11490577
> 
> 赞同：0
> 
> 时间：2012-07-15T08:38:32.463
> 
> 标签：php, mysql

我已经完成了漫长而艰难的过程，但我知道它可以更快更容易地完成；）

如果我有一个名为“puzzle_level”的列，我希望每条puzzle_level = 5的记录有10分，如果puzzle_level = 6，每条记录有25分，如果puzzle_level = 7，则为50分；

快速编辑，我实际上需要 PHP 中的 varialbe total，所以它是 $total_points = $sql_formula

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T08:42:44.920

您可以简单地使用条件`CASE`表达式来做到这一点：

```
SELECT 
    points + 
    CASE puzzle_level 
        WHEN 5 THEN 10 
        WHEN 6 THEN 25 
        WHEN 7 THEN 50 
    END AS totalpoints
FROM your_table 
```

这会将基于uzzle_level 的点数添加到`points`列中的总点数中。

然后，只需`'totalpoints'`在 PHP 中引用该列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T08:44:02.990

```
UPDATE `table`
SET `points` =
  IF `puzzle_level` = 5 THEN 10
    ELSEIF `puzzle_level` = 6 THEN 25
    ELSEIF `puzzle_level` = 7 THEN 50
  END IF 
```

# sql-server - 跨数据库外键

> ID：11490585
> 
> 赞同：2
> 
> 时间：2012-07-15T08:40:44.480
> 
> 标签：sql-server, foreign-keys

我有两个`DB1`带有 table和 table 的数据库`TBL1`，我需要一个外键 in (in ) 来引用另一个表(in )。`DB2``TBL2``[TBL1]``DB1``[TBL2]``DB2`

当我尝试通过 SQL 创建它们时，我收到以下错误消息：

> Msg 1763, Level 16, State 0, Line 1
> 不支持跨数据库外键引用。外键“SAMPLEDB..VENDOR”。

可以在外部数据库中引用外键吗？

如果可能，请为此提供解决方案。如果不可能，请提出一些替代方法。

# python - 如何在 python 中收听影响 DOM 的 ajax 更改？

> ID：11490586
> 
> 赞同：-2
> 
> 时间：2012-07-15T08:40:46.283
> 
> 标签：python, ajax

有一个站点使用comit/meteor 服务器，将行添加到他们在首页中的表中。

我想听听变化并捕捉任何弹出的新 tr。我怎么能在python中做到这一点？我对来自 php 的语言相当陌生。

**编辑：**这里是[网站](http://hidemyass.com/proxy-list/)。请注意，每隔几秒钟就会有一些新的 ip 填充到表中。我想听这些更改并提取所有新条目的 ip 和端口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:19:27.010

我使用了[selenium python 绑定](http://selenium.googlecode.com/svn/trunk/docs/api/py/index.html#use-the-source-luke)，它完美地模仿了具有 javascript 功能的浏览器。我发现[mechanize](http://wwwsearch.sourceforge.net/mechanize/)也是一个很好的解决方案，它的缺点是必须每隔几秒刷新一次页面（因为它不执行 javascript，只会刮掉它）

# c# - 将 DataGridView 绑定到 BindingNavigator 时出错

> ID：11490588
> 
> 赞同：1
> 
> 时间：2012-07-15T08:41:24.383
> 
> 标签：c#, winforms, visual-studio-2010, sql-server-ce

我有以下*小孩*形式：

![在此处输入图像描述](../Images/8810e7986d86f8313d0837f41c5a7ec2.png)

要将控件链接到我的数据库表，到目前为止，我已经获得了以下内容。

我试图以类似的方式将 datagridview 链接到导航器，我将文本框链接到导航器 - 加入这些控件的正确语法是什么？

```
 public SqlCeConnection conn = new SqlCeConnection(ConfigurationManager.ConnectionStrings["WindFormAppRevisionHelper.Properties.Settings.DefinitionsDBConnectionString"].ConnectionString);
    BindingSource rawtableBindingSource = new BindingSource();

    public uxFormDatabase()
    {
        InitializeComponent();
        fillTheDGVusingAdapter();
    }

    public void fillTheDGVusingAdapter()
    {

        SqlCeDataAdapter da = new SqlCeDataAdapter(new SqlCeCommand("Select * From tb_Definitions", conn));
        DataSet ds = new DataSet("DGVdata");
        ds.Tables.Add("rawTable");
        da.Fill(ds.Tables["rawTable"]);

        uxDGVtable.DataSource = ds.Tables["rawTable"];

        rawtableBindingSource.DataSource = ds.Tables["rawTable"];
        uxrawdataBindingNavigator.BindingSource = this.rawtableBindingSource;

         //PROBLEM WITH THE FOLLOWING LINE
        uxDGVtable.DataSource = DataBindings.Add(new Binding("Text", uxrawdataBindingNavigator, "Item_Id", true));

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:50:31.310

有点不清楚你在做什么，因为前面 3 行，你已经设置了 uxDGVtable 控件的 DataSource。

尝试使用 Navigator 使用的相同 BindingSource：

```
// uxDGVtable.DataSource = ds.Tables["rawTable"];
uxDGVtable.DataSource = this.rawtableBindingSource; 
```

# javascript - 如何在 Graphiti 中创建可折叠图形？

> ID：11490589
> 
> 赞同：0
> 
> 时间：2012-07-15T08:41:52.217
> 
> 标签：javascript, draw2d

Figure 由多个图形组成（都是 SVGFigure）。我希望父图形有一个更改其状态的按钮，因此它被简化（隐藏大多数子图形和连接器）

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:40:59.610

我不是 100% 确定这是否是您正在寻找的，但在我对问题的解释中：

我认为您可以将类名添加到不应在某种状态下显示的图形中。例如这个伪 HTML：

```
<input id="toggleButton" type="button">Toggle</input>
<svg>
    <shape1 class="complexOnly">
    <shape2 class="complexOnly">
    <shape3>
</svg> 
```

并使用以下 JavaScript，为按钮附加一个事件侦听器以切换状态：

```
document.getElementById( "toggleButton" ).addEventListener("click", toggleSVGstate, false );
function toggleSVGstate() {
    this.classList.toggle( "simpleState" );
} 
```

而对于 CSS，这仅适用于特定状态：

```
#toggleButton.simpleState>.complexOnly {
    display: none; /* Or visibility: hidden */
} 
```

这意味着具有 complexOnly 类的元素仅在切换按钮不处于简单状态时显示（它们隐藏在简单状态）。请注意，classList.toggle() 并非完全跨浏览器，但您可以找到一个跨浏览器，因为我只是提供了一种去/思考的方式。

# email - 如何设置我的 Mac 以测试 Postfix 接收电子邮件

> ID：11490592
> 
> 赞同：0
> 
> 时间：2012-07-15T08:42:15.337
> 
> 标签：email, postfix-mta

我正在开发的 Rails 应用程序将接收带有附件的电子邮件，然后处理这些附件。

我想做的是配置 Postfix，以便我可以将带有附件的电子邮件从 Mail.app 发送到将由 Postfix 在本地接收的电子邮件地址。一旦在 Postfix 中收到邮件内容，我很高兴能够将邮件内容放入我的应用程序。

我已经尝试在我的主机文件中设置`robin-fishers-macbook.local`，`localhost`希望发送到 robinjfisher@robin-fishers-macbook.local 的电子邮件可能会在本地路由，但没有乐趣。

任何帮助表示赞赏。

谢谢

罗宾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:03:50.263

> 我担心这是我最终不得不走的路线，例如设置一个带有 MX 记录的公共服务器并对其进行测试。

您不需要使用公共服务器。如果您在本地设置 DNS 服务器，可能使用[类似 Mac OSX 的指南](http://neva.li/post/122596681/using-a-local-nameserver-on-mac-os-x)，您可以为`robin-fishers-macbook.local`. postfix 在上面运行），并添加一个`IN MX 10 127.0.0.1`. 然后，您只需确保将解析器更改为使用本地 DNS，而不是您通常使用的解析器。像 google 和其他域这样的东西仍然会像域一样解析`robin-fishers-macbook.local`。

# android - CLEAR_TOP 到上一个活动的附加内容

> ID：11490595
> 
> 赞同：4
> 
> 时间：2012-07-15T08:42:38.187
> 
> 标签：android, android-intent

在我的导航中，可以生成以下活动序列：A、B、C、B、C、B、C、...、D。D
活动包含后退按钮的覆盖方法，它将用户发送到 A带`Intent.FLAG_ACTIVITY_CLEAR_TOP`参数的活动。

活动 A 接收许多必要的额外参数，我的问题是，当我使用此 CLEAR_TOP 标志在 D 活动中触发 startActivity 时，活动 A 似乎没有获得任何先前的额外参数，甚至没有启动 onResume 方法。

这是否意味着 CLEAR_TOP 实际上`recreates`是目标活动，而不是提出旧的活动？`restore those extra intent`而且，当我从活动 D 启动活动 A 时，是否有任何系统自然的方法来处理活动 A 中的参数。

PS 现在我看到的唯一选择是在 D 活动中构造意图对象时手动填写那些以前的必要参数。这是一条路吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T08:59:40.423

正如[文档](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)所说的那样简单。

如果同时设置`FLAG_ACTIVITY_CLEAR_TOP`和[FLAG_ACTIVITY_SINGLE_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_SINGLE_TOP)，那么新参数将被推送到[onNewIntent()](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-19T06:07:17.297

不确定您是否找到了解决方案，但是覆盖目标活动的 onNewIntent(Intent theNewIntent) 方法并调用 setIntent(theNewIntent) 为我解决了这个问题。

```
@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);

    /*
     * This overrides the original intent.
     */      
    setIntent(intent);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T08:55:40.220

> 这是否意味着 CLEAR_TOP 实际上重新创建了目标活动而不是调出旧的活动？

当你使用`CLEAR_TOP`flag时，target Activity `does not recreate`，但是当你使用一个新的intent出现Activity A时，你只能在Activity A中获得这个新intent的extras。

> 而且，当我从活动 D 启动活动 A 时，是否有任何系统自然的方法来恢复活动 A 中的那些额外意图参数？

当您离开活动 A 时，您可以将这些附加内容保存在文件、首选项或全局应用程序变量中。或者您可以在活动 A 中声明一个静态方法，将这些附加内容保存在其中，然后在强制出现之前从活动 D 调用它活动 A：
活动 A：

```
Public class A extends Activity{
...
public static void saveExtras(){
//save extras in file,preferences,...
}
...
} 
```

活动 D：

```
Public class D extends Activity{
...
public void forceActivityA(){
A.saveExtras();
Intent i = new Intent(this,A.class());
...
startActivity(i);
}
...
} 
```

**编辑**：
当活动 A 再次出现时，它的`onCreate()`方法再次调用，在这里您可以获得请求它的意图。然后您可以获得意图的标志并将其与`67108864`（CLEAR_TOP 标志的常量）进行比较。如果它等于这个常量，您将检索您的存储中的数据（文件，首选项，...）。要创建全局变量，您可以看到[这个问题](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables/4642069#4642069)。

# javascript - XmlHttpRequest .send 中的问题

> ID：11490597
> 
> 赞同：0
> 
> 时间：2012-07-15T08:42:45.737
> 
> 标签：javascript

我试图提出`XmlHttpRequest.send`请求，但失败了。

我收到错误消息 -

```
MLHttpRequest Exception 101 
```

我没有很多知识`XmlHttpRequest`。

我试图在 chrome 和 firefox 上运行它

这就是我打开连接的方式

```
 this.xmlHttpRequest.open("POST", url, isAsync ); 
```

发送

```
 this.xmlHttpRequest.send( request.getData() ); 
```

可能是什么问题？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T08:58:16.107

您是否使用正确的协议？如果它需要 SSL 并且您的 url 是 http:// 那么您可能会收到 101 状态代码。

[http://100pulse.com/http-statuscode/101.jsp](http://100pulse.com/http-statuscode/101.jsp)

# android - 可以在应用程序生命周期中更改应用程序上下文吗？

> ID：11490599
> 
> 赞同：19
> 
> 时间：2012-07-15T08:43:02.113
> 
> 标签：android

我可以依靠声明应用程序`Context`在应用程序的生命周期内没有变化吗？如果我`context`使用单例模式存储某个地方然后在需要的地方使用怎么办？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-22T20:04:13.930

首先回答你的第二个问题：如果你需要在单例中存储一些状态，那么你可以使用 Android`Application`类，你的`Application`成为你的单例（它也是一个`Context`）。没有必要存储它。

对于第一个问题，关于是否`Context`可以在运行时更改：与[您的其他问题有关](https://stackoverflow.com/questions/12079313/where-is-the-code-which-is-called-when-you-call-getapplicationcontext/12079490#comment16138663_12079490)，我认为我们可以通过查看[`ContextWrapper.attachBaseContext`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/content/ContextWrapper.java#ContextWrapper.attachBaseContext%28android.content.Context%29)：

```
 protected void attachBaseContext(Context base) {
     if (mBase != null) {
         throw new IllegalStateException("Base context already set");
     }
     mBase = base;
 } 
```

所以，是的，你可以依靠它；它不能改变，如果你尝试，它会抛出一个`IllegalStateException`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-29T16:39:33.533

Android`Application`类是您的单例，用于存储应在应用程序生命周期阶段跟踪的信息。您可以在手册中查看此类的描述 - [http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T08:57:40.447

应用程序是一个单例，我不知道在不改变核心的情况下绕过它的方法。

但是，如果您的代码启动另一个进程，则可能会遇到 Application 对象的 2 个实例。一个例子是启动远程服务；这将创建另一个进程，该进程将创建它自己的应用程序对象实例。

[http://developer.android.com/reference/android/app/Service.html#RemoteMessengerServiceSample](http://developer.android.com/reference/android/app/Service.html#RemoteMessengerServiceSample)

为避免混淆，您必须使用 Parcelable 或 Serializable android 选项之一在远程服务和应用程序的其余部分之间进行通信：

消息 - 处理程序意图捆绑意图 putExtra

或创建您自己的一个

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T20:58:19.937

围绕这个话题存在一些争议。甚至一些来自谷歌的人。我坚持我认为是正确的方法，它基本上试图尽可能多次地获取活动上下文。原因是，上下文的重点是为您的应用程序的一些资源/部分提供工作环境。您提供给系统的信息越准确，发生的意外行为就越少（即：您只能访问 Activity 上下文范围内的某些资源以及从应用程序上下文访问的方式。

请记住，活动是一个上下文，因此如果您在活动内部，则传递“this”将完成工作，如果您的代码在片段内工作，则传递“getActivity()”。

此外，我必须同意 devmiles.com。将您自己的 Application 类用作 Singleton 非常有用，因为您可以轻松管理应用程序的生命周期并将其用作适当的中间点。再一次，要获取 appContext，调用 getApplicationContext 甚至是 Application 单例类的实例就足够了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T06:54:51.990

是的，您可以相信在应用程序生命周期中不会更改上下文！

[谷歌在Application](http://developer.android.com/reference/android/app/Application.html)类概述中这么说。

我认为这将非常适合您的情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-29T16:53:13.173

In application class is a singletion application level class for android application. My answer is no you can not change application context object.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-01T16:45:18.460

虽然这里的最佳答案在技术上是正确的，但它与谷歌当前的建议背道而驰，页面下方引用了以下内容：

[https://developer.android.com/reference/android/app/Application.html](https://developer.android.com/reference/android/app/Application.html)

"注意：通常不需要继承 Application。在大多数情况下，静态单例可以以更模块化的方式提供相同的功能。如果您的单例需要全局上下文（例如注册广播接收器），请包含 Context.getApplicationContext( ) 在调用单例的 getInstance() 方法时作为 Context 参数。”

简而言之，存储生命周期与您存储它的类的生命周期不匹配的上下文是危险的。应用程序上下文应该与您的单例的生命周期相匹配，因为它们共享相同的进程生命周期。

# android - 如何在 ViewPager 中设置 OnClickListener

> ID：11490604
> 
> 赞同：4
> 
> 时间：2012-07-15T08:44:23.547
> 
> 标签：android, button, android-viewpager, onclicklistener

我是 Android 开发的新手，我正在学习编码和设计一个 Android 项目。我有问题，`ViewPager`无法在本网站或谷歌搜索中找到答案。

**问题**：`Button`当它在`ViewPager`.

您可以在此处查看我的项目和 apk 文件：[https ://dl.dropbox.com/u/9820517/ForOneTimeDownload/TestPagerView.rar](https://dl.dropbox.com/u/9820517/ForOneTimeDownload/TestPagerView.rar)

**这是我的 PagerDemo.java**：

```
 public class PagerDemo extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_pager_demo);

        myPagerAdapter adapter = new myPagerAdapter();
        ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(2);

        SetAllBtnFunc();
    }

    public void SetAllBtnFunc() {
        //all func
        View.OnTouchListener touch = new View.OnTouchListener() {

                public boolean onTouch(View v, MotionEvent event) {
                    // TODO Auto-generated method stub
                    Log.d("hlv_trinh", "Button be Touched!");
                    return false;
                }
            };

            View.OnClickListener click = new View.OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Log.d("hlv_trinh", "Button be Clicked!");
                }
            };

        //Get view
        View v = getLayoutInflater().inflate(R.layout.middle, null);

        Button b = (Button) v.findViewById(R.id.myBtn);
        b.setOnClickListener(click);
        b.setOnTouchListener(touch);
        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_pager_demo, menu);
        return true;
    }
    private class myPagerAdapter extends PagerAdapter {

        public int getCount() {
            return 5;
        }

        public Object instantiateItem(View collection, int position) {

            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            int resId = 0;
            switch (position) {
            case 0:
                resId = R.layout.farleft;
                break;
            case 1:
                resId = R.layout.left;
                break;
            case 2:
                resId = R.layout.middle;
                break;
            case 3:
                resId = R.layout.right;
                break;
            case 4:
                resId = R.layout.farright;
                break;
            }

            View view = inflater.inflate(resId, null);

            ((ViewPager) collection).addView(view, 0);

            return view;
        }

        @Override
        public void destroyItem(View arg0, int arg1, Object arg2) {
            ((ViewPager) arg0).removeView((View) arg2);

        }

        @Override
        public boolean isViewFromObject(View arg0, Object arg1) {
            return arg0 == ((View) arg1);

        }

        @Override
        public Parcelable saveState() {
            return null;
        }
    }
    } 
```

**我的布局内容在这里：**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Middle"
        android:textSize="30dp" >
    </TextView>

    <Button
        android:id="@+id/myBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Test Click" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-08T09:15:48.647

这是一个简单的解决方案。
在您的布局 XML 中，在按钮标记中，设置`android:onClick="AnyName"`，然后在您的`PagerDemo.java`位置：

```
public void AnyName(View v) {
    // Do your stuff
} 
```

这设置`onClickListener`在一个`ViewPager`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-03T15:02:49.120

尽管在 2021 年给出这个答案为时已晚，但我想分享这个，因为它似乎是最简单和最简单的一个：

```
public class ViewPagerAdapter extends PagerAdapter {

    private Context context;
    private String[] imageUrls;

    public ViewPagerAdapter(Context context, String[] imageUrls) {
        this.context = context;
        this.imageUrls = imageUrls;
    }

    @Override
    public int getCount() {
        return imageUrls.length;
    }

    @Override
    public boolean isViewFromObject(@NonNull View view, @NonNull Object object) {
        return view == object;
    }

    @NonNull
    @Override
    public Object instantiateItem(@NonNull ViewGroup container, int position) {
        ImageView imageView = new ImageView(context);
        imageView.setScaleType(ImageView.ScaleType.FIT_XY);
        Glide.with(context)
                .load(imageUrls[position])
                .thumbnail(Glide.with(context).load(R.drawable.loading))
                .dontAnimate()
                .centerCrop()
                .into(imageView);

        container.addView(imageView);

        imageView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                if(position == 0) {
                    Toast.makeText(context, "One", Toast.LENGTH_SHORT).show();
                } else if(position == 1) {
                    Toast.makeText(context, "Two", Toast.LENGTH_SHORT).show();
                } else if(position == 2) {
                    Toast.makeText(context, "Three", Toast.LENGTH_SHORT).show();
                }
            }
        });

        return imageView;
    } 
```

在这里，我们只需`ImageView`要从实例化`Adapter`项目中访问 的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T21:04:10.433

我为视图寻呼机找到了一些棘手的解决方案。由于视图寻呼机没有任何点击事件，您可以尝试在视图寻呼机的子节点上单击事件。我的意思是在每个页面的根元素上设置 on Click 侦听器。那将肯定工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-13T13:11:11.763

我做了这个问题如下

您必须首先实现**ClickableViewPager**

```
package ai.units;

import android.content.Context;
import android.util.AttributeSet;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.View;

import androidx.viewpager.widget.ViewPager;

public class ClickableViewPager extends ViewPager {

  private OnItemClickListener mOnItemClickListener;

  public ClickableViewPager(Context context) {
    super(context);
    setup();
  }

  public ClickableViewPager(Context context, AttributeSet attrs) {
    super(context, attrs);
    setup();
  }

  private void setup() {
    final GestureDetector tapGestureDetector = new    GestureDetector(getContext(), new TapGestureListener());

    setOnTouchListener(new OnTouchListener() {
      @Override
      public boolean onTouch(View v, MotionEvent event) {
        tapGestureDetector.onTouchEvent(event);
        return false;
      }
    });
  }

  public void setOnItemClickListener(OnItemClickListener onItemClickListener) {
    mOnItemClickListener = onItemClickListener;
  }

  public interface OnItemClickListener {
    void onItemClick(int position);
  }

  private class TapGestureListener extends GestureDetector.SimpleOnGestureListener {

    @Override
    public boolean onSingleTapConfirmed(MotionEvent e) {
      if(mOnItemClickListener != null) {
        mOnItemClickListener.onItemClick(getCurrentItem());
      }
      return true;
    }
  }
} 
```

然后像这样在xml中

```
 <ai.units.ClickableViewPager
   android:id="@+id/viewPager"
   android:layout_width="match_parent"
   android:layout_height="match_parent" /> 
```

您现在可以使用*setOnItemClickListener*方法

```
viewPager.setOnItemClickListener(new ClickableViewPager.OnItemClickListener() {
     @Override
     public void onItemClick(int position) {
       Log.i(TAG, "onItemClick: position = "+position);
     }
   }); 
```

**笔记**

***ai.单位。***我的包裹的名字是，你必须用你自己的包裹来移动它

[从那里得到的答案的主要链接](https://www.semicolonworld.com/question/48491/viewpager-onitemclicklistener)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-03T09:57:54.697

```
viewpager.setOnPageChangeListener(new ViewPager.OnPageChangeListener() {
        @Override
        public void onPageSelected(int Position) {
            position=Position;
        }
 }); 
```

您将使用任何视图进行单击，`viewpager`并使用 viewpager 的选定位置转到详细信息

# javascript - appMobi watchPosition getCurrentPosition 失败

> ID：11490605
> 
> 赞同：0
> 
> 时间：2012-07-15T08:44:46.083
> 
> 标签：javascript, jquery, jquery-mobile, cordova, appmobi

appMobi watchPosition 和 getCurrentPosition 失败，我的小 GPS 图标出现并继续，但是从 appmobi 站点复制和粘贴以他们的确切示例为例，我至少应该得到一个警报，如果不是，那么调试器控制台中的错误我都没有。

```
var options = {timeout: 10000, maximumAge: 11000, enableHighAccuracy: true };
//This function is called on every iteration of the watch Position command that fails
var fail = function(){
  alert("Geolocation failed. \nPlease enable GPS in Settings.");
};

//This function is called on every iteration of the watchPosition command that is a success
var suc = function(p){
  alert("Moved To: Latitude:" + p.coords.latitude + "Longitude: " + p.coords.longitude;
};

//This command starts watching the geolocation
var geolocationWatchTimer = AppMobi.geolocation.watchPosition(suc,fail,options);

//Call the stopGeolocation function to stop the geolocation watch
var stopGeolocation = function(){
        AppMobi.geolocation.clearWatch(geolocationWatchTimer);
} 
```

……

***更新***

好的，注意到即使使用那里的示例代码也被破坏了。它缺少 a ) 和 a ; 所以有了这些，我现在得到`Uncaught TypeError: Cannot call method 'watchPosition' of undefined`

好的，***再次更新***

修复了最后一个问题，但这个问题让我很困惑，似乎它运行了 2 次是为了现在停止，我需要它只运行一次。我怎么能得到那个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:10:22.820

放置一个标志只运行一次。：

```
 ...lat=0;
var suc = function(p){
    if ((p.coords.latitude != undefined)&&(lat==0))
    {
            console.log(p.coords.latitude);
            lat=p.coords.latitude; 
```

...

# javascript - 使用自定义原型实例化 JavaScript 函数

> ID：11490606
> 
> 赞同：7
> 
> 时间：2012-07-15T08:45:07.747
> 
> 标签：javascript, prototype, instantiation

我使用以下函数从一组参数创建 JavaScript 中的函数实例：

```
var instantiate = function (instantiate) {
    return function (constructor, args, prototype) {
        "use strict";

        if (prototype) {
            var proto = constructor.prototype;
            constructor.prototype = prototype;
        }

        var instance = instantiate(constructor, args);
        if (proto) constructor.prototype = proto;
        return instance;
    };
}(Function.prototype.apply.bind(function () {
    var args = Array.prototype.slice.call(arguments);
    var constructor = Function.prototype.bind.apply(this, [null].concat(args));
    return new constructor;
})); 
```

使用上述函数，您可以按如下方式创建实例（参见[小提琴](http://jsfiddle.net/MMp5u/)）：

```
var f = instantiate(F, [], G.prototype);

alert(f instanceof F); // false
alert(f instanceof G); // true

f.alert(); // F

function F() {
    this.alert = function () {
        alert("F");
    };
}

function G() {
    this.alert = function () {
        alert("G");
    };
} 
```

上面的代码适用于用户构建的构造函数，例如`F`. `Array`但是，出于明显的安全原因，它不适用于本机构造函数。您可能总是创建一个数组，然后更改其`__proto__`属性，但我在 Rhino 中使用此代码，因此它不会在那里工作。有没有其他方法可以在 JavaScript 中实现相同的结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T13:18:45.327

你不能[完全继承一个数组](http://perfectionkills.com/how-ecmascript-5-still-does-not-allow-to-subclass-an-array/)。

但是，您可以使用它`Object.create`来消除当前代码 ( [ex](http://ideone.com/mxfUo) ) 中的许多复杂性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T21:38:01.863

我不认为你在这里实现了你想要的。首先在您的 F 和 G 函数中，您要在 this 对象上定义一个警报函数。这意味着每次实例化一个对象时，都会创建一个新的函数对象并将其分配给警报。这不是你想要的，你需要在 F 和 G 的原型上定义 alert。

```
function F() { }

F.prototype.alert = function() {
    alert("F");
};

function G() { }

G.prototype.alert = function() {
    alert("G");
}; 
```

但是，您的实例化功能仍然存在问题。如果你按照你的方式称呼它

```
var f = instantiate(F, [], G.prototype); 
```

你所做的只是将 f 的原型设置为 G.prototype，这不是我认为你想要的。我假设如果您实例化一个 F 对象，那么您将希望能够调用 F.prototype 上定义的所有函数，但事实并非如此。

```
function F() { }

F.prototype.alert = function() {
    alert("F");
};

F.prototype.foo = function() {
    alert("F foo");
};

function G() { }

G.prototype.alert = function() {
    alert("G");
};  

var f = instantiate(F, [], G.prototype);
f.foo(); // error! 
```

这里错误的原因就像我说你只是将 f 的原型分配给 G.prototype 并且 G.prototype 没有定义 foo 函数。

如果您希望以这种方式进行继承，请查看 John Resig 的博客，他有一个很好的实现：http: [//ejohn.org/blog/simple-javascript-inheritance/](http://ejohn.org/blog/simple-javascript-inheritance/)

道格拉斯·克罗克福德也整理了一些很好的例子：[http ://www.crockford.com/javascript/inheritance.html](http://www.crockford.com/javascript/inheritance.html)

# php - 使用服务器流式传输 youtube 视频

> ID：11490607
> 
> 赞同：1
> 
> 时间：2012-07-15T08:46:17.693
> 
> 标签：php, stream, youtube

[YouTube](http://www.youtube.com/)和[Vimeo](http://vimeo.com/)在伊朗被过滤，我们无法访问它们，现在我将使用 YouTube 和 Vimeo 上的一些视频，向伊朗人民展示。这意味着我将在 Youtube 和我网站的伊朗访问者之间架起一座桥梁，我知道 PHP，但我不明白我该怎么做？

脚本管道：
使用我在美国的服务器从 YouTube 流式传输一个视频文件，并将其直接显示给我在伊朗的访问者。

# java - 验证规则发生错误

> ID：11490609
> 
> 赞同：0
> 
> 时间：2012-07-15T08:46:42.237
> 
> 标签：java, regex, validation

有人可以帮我检查我的验证规则，因为它显示错误非法转义字符..谢谢..

```
if(staffICNo.length() == 0 || !staffICNo.matches("([0-9][0-9])((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\-([0-9][0-9])\-([0-9][0-9][0-9][0-9])")){
        JOptionPane.showMessageDialog(null,"IC Number must be in this format : 101010-10-1010..","",JOptionPane.WARNING_MESSAGE);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T08:57:42.600

这是一些转义字符问题。在 java 中，您需要转义字符串中的 '\' 字符。尝试

```
if(staffICNo.length() == 0 || !staffICNo.matches("([0-9][0-9])((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\\-([0-9][0-9])\\-([0-9][0-9][0-9][0-9])")){
    JOptionPane.showMessageDialog(null,"IC Number must be in this format : 101010-10-1010..","",JOptionPane.WARNING_MESSAGE);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T08:58:11.210

你有几个`\-`序列。他们的意思是你试图`-`在字符串级别逃避，这是没有意义的。用于`\\-`在正则表达式级别对其进行转义（然后编译器会将第一个反斜杠视为对第二个反斜杠的转义，传递给的字符串`showMessageDialog`将包含所需的`\-`序列）。

# .net - 发送消息的最佳方法

> ID：11490610
> 
> 赞同：0
> 
> 时间：2012-07-15T08:46:51.880
> 
> 标签：.net, .net-4.0, messaging, remote-server

我有一个客户端（机器 1）和服务器（机器 2）。根据某些事件的发生，服务器需要向客户端发送一条消息，客户端将在屏幕上显示该消息（可以是 winforms 表单）。我希望解决方案在 .Net 4.0 中。

在这方面应该采取什么最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:11:49.847

我不确定这是否是一个“真实”的答案 - 也许这只是一个提示，需要进一步阅读，但它可能会有所帮助：

听起来好像**ServiceBus**是一个不错的选择。有许多 ServiceBus 实现（[NServicebus](http://nservicebus.com/)，[MassTransit](http://code.google.com/p/masstransit/)，[Rhino Servicebus](http://hibernatingrhinos.com/open-source/rhino-service-bus)，...）。我不得不提一下，您需要了解一下 Servicebus 的工作原理（有哪些不同的选项等）。服务总线通常使用底层队列机制（MSMQ、ZeroMQ 等）来存储/传递消息。

它们支持不同的通信类型（发布-订阅等）。服务总线为您处理所有消息传递（我将服务总线视为发送/接收消息的基础设施），因此您只需发送一条消息，服务总线将确保它得到传递（取决于配置）。通常，服务总线还处理重试（无法处理消息）、超时等。

由于服务总线支持很多选项和不同的场景，我建议您阅读一些示例。由于您的场景听起来像是发布-订阅场景（我可能错了） - 您的客户端订阅服务器发送的消息。- 尝试从提到的 ServiceBus 实施[Masstransit 示例之一中阅读示例](https://github.com/MassTransit/MassTransit/tree/master/src/Samples/PublishSubscribe) 。通常这 3 个服务总线都有一些很好的示例应用程序。

希望有帮助，祝你好运。

# android - Android：RoundRectShape：修改角半径

> ID：11490611
> 
> 赞同：0
> 
> 时间：2012-07-15T08:47:05.327
> 
> 标签：android, ondraw, shapedrawable

我有一个在 a的函数`RoundRectShape`中绘制的。`View``onDraw()`

这个形状的角会被这个视图上的任何拖动操作通过一个重写的`onTouchEvent`函数（调用`invalidate()`来强制调用`onDraw()`）修改。

在 中初始化变量时`onDraw`，Eclipse 会显示一条警告，指出**在绘制/布局操作期间避免对象分配（改为预分配和重用）**。

这个问题解释如下：

**您应该避免在绘图或布局操作期间分配对象。这些被频繁调用，因此流畅的 UI 可能会因对象分配导致的垃圾收集暂停而中断。**

**通常处理的方式是预先分配对象并为每个绘图操作重用它们**

为此，我显然必须能够修改构造函数中设置的角半径。RoundedRectShape[类](http://developer.android.com/reference/android/graphics/drawable/shapes/RoundRectShape.html "RoundedRectShape 类")没有提供设置器（我很确定相关的成员变量是不可访问的）。

我知道这是一个小对象和一个小问题，但是当类提供的用于设置圆角半径的唯一方法是通过构造函数时，如何在不重新初始化对象的情况下更改这些角？

或者这只是一个例子，做最好的事情必须用做可能的事情来代替？

谢谢，

PS 在方法中调用构造函数将删除警告，但由于每次都调用`onTouchEvent()`的事实，无论如何都不会完成任何事情`onDraw()``invalidate()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:57:23.347

我认为你根本不需要使用`RoundRectShape`。`RoundRectShape`是不可变的，因此更改其值的唯一方法是使用反射。您可以通过直接调用方法轻松完成相同的绘图，`Canvas.drawRoundRect(RectF rect, float rx, float ry, Paint paint)`而无需使用`RoundRectShape`. 或者您可以查看`RoundRectShape` [实现](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.0_r1/android/graphics/drawable/shapes/RoundRectShape.java)并在您的`onDraw()`方法中使用它的代码。

**编辑：** 关于`RoundRectShape`不是正确的方法和查看实施的评论是正确的。在实现之后发现调用：

```
mPath.addRoundedRect() 
```

它有一个变体，允许将角半径的浮点数作为输入（[Path.addRoundRect](http://developer.android.com/reference/android/graphics/Path.html#addRoundRect%28android.graphics.RectF,%20float%5B%5D,%20android.graphics.Path.Direction%29)）

在回答问题时：

**使用路径而不是形状作为变量，并在必要时将新的圆角矩形绘制到路径**

# php - PHP：如果有空格，文件在上传期间被重命名

> ID：11490615
> 
> 赞同：0
> 
> 时间：2012-07-15T08:47:34.240
> 
> 标签：php, file-upload

我正在使用以下代码为我的网站上传 PHP 文件。我会先发布代码，然后再问我的问题。

上传.php：

```
<html>
<form action="upload_process.php" method="post" enctype="multipart/form-data">
<label for="file">Select picture to upload:</label>
<input type="file" name="image" id="image" />
<br />
<input type="submit" name="submit" value="Submit" />
</form>
</html> 
```

上传进程.php

```
<?php
function error ($error, $location, $seconds = 1)
{
    header ("Refresh: $seconds; URL = \"$location\"");
    echo $error;
    exit;
}
$max_file_size = 1000000;
$current_directory = str_replace(basename($_SERVER['PHP_SELF']) , '' , $_SERVER['PHP_SELF']);
$uploaded_directory = $_SERVER ['DOCUMENT_ROOT'] . $current_directory . 'files/';
$upload_form = 'http://' . $_SERVER['HTTP_HOST'] . $current_directory . 'upload.php';
$upload_success = 'http://' . $_SERVER['HTTP_HOST'] . $current_directory . 'view_posters.php';
$fieldname = 'image';
$errors = array (1 => "Max file size exceeded", 2 => "Max file size exceeded", 3 => "Upload incomplete", 4 => "No file attached");
isset ($_POST['submit']) or error ("Redirecting to upload form", $upload_form);
($_FILES[$fieldname]['error'] == 0) or error ($errors[$_FILES[$fieldname]['error']], $upload_form);
@is_uploaded_file($_FILES[$fieldname]['tmp_name']) or error ("Not an HTTP upload", $upload_form);
@getimagesize($_FILES[$fieldname]['tmp_name']) or error ("Please upload only images", $upload_form);
if (file_exists($upload_filename = $uploaded_directory . $_FILES[$fieldname]['name']))
{
    error ("File exists", $upload_form);
}
$uploadedfile = $_FILES[$fieldname]['tmp_name'];
$src = imagecreatefromjpeg($uploadedfile);
list($width,$height)=getimagesize($uploadedfile);
$newwidth = 500;
$newheight = 500;
$tmp=imagecreatetruecolor ($newwidth, $newheight);
imagecopyresampled ($tmp, $src, 0, 0, 0, 0, $newwidth, $newheight, $width, $height);
imagejpeg ($tmp, "files/" . $_FILES[$fieldname]['name'], 100);
imagedestroy($src);
imagedestroy($tmp);
header ("Location: " . $upload_success);
?> 
```

现在，对于我的问题，如果文件名没有空格，它会被调整大小并正确上传。但是，如果有空间，就会发生奇怪的事情。例如，如果上传后文件名为“this image.jpg”，则会调整大小并以“this.jpg image.jpg”的形式保存到服务器上。你能告诉我为什么会这样吗？

而且，$upload_success 是一个登陆页面，上面写着“上传成功”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T09:08:08.443

好吧，大概你不希望文件保存有空格。因此，作为上传验证的一部分，您应该检查并更正这一点。

```
imagejpeg($tmp, "files/".str_replace(' ', '_', $_FILES[$fieldname]['name']), 100) 
```

这将用下划线替换空格。

# jquery - jQuery选择“.html”的 删除了里面的一些元素？

> ID：11490616
> 
> 赞同：1
> 
> 时间：2012-07-15T08:47:36.207
> 
> 标签：jquery, selector

例如，原件`p`将是：

```
<p>
    <h1>I'm title</h1>
    This is some descriptions.
    <a class="classToExclude">The Link #1</a>
    <a>The Link #2</a>
</p> 
```

我只想`$('p').html()` **排除`h1`and`a.classToExclude`**。
看起来像：

```
<p>
    This is some descriptions.
    <a>The Link #2</a>
</p> 
```

仅供参考，当我使用选择器`$('p').children().each()`方法时，它只返回`nodes`下面的内容，而不是内部文本`This is some descriptions`。它不包括在内。所以我不能使用`.children()`选择器来循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T08:50:57.830

```
var val = $('div').clone();
$('h1, .classToExclude', val).remove();
var html = val.html();
alert(html); 
```

[http://jsfiddle.net/7SYFV/63/](http://jsfiddle.net/7SYFV/63/)

.html() 似乎不适用于 <p> 元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T09:34:35.523

您的 html 无效：

```
<p>
    <h1>I'm title</h1>
    This is some descriptions.
    <a class="classToExclude">The Link #1</a>
    <a>The Link #2</a>
</p> 
```

被解释为：

```
<p></p>
<h1>I'm title</h1>
This is some descriptions.
<a class="classToExclude">The Link #1</a>
<a>The Link #2</a>
<p></p> 
```

在谷歌浏览器、Firefox 和 Internet Explorer 中。

使用有效的 html，例如：

```
<div>
    <h1>I'm title</h1>
    This is some descriptions.
    <a class="classToExclude">The Link #1</a>
    <a>The Link #2</a>
</div>​ 
```

使用时效果很好

```
console.log( $('div').clone().find("h1,a.classToExclude").remove().end().html()) ​ 
```

[http://jsfiddle.net/wVzVB/](http://jsfiddle.net/wVzVB/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T08:55:58.197

您需要将该元素复制到一个附加的 jQuery 对象中，以便您可以使用[`.remove()`](http://api.jquery.com/remove/)不更改原始内容的情况下使用该函数。

要复制或克隆元素，您可以使用该[`clone()`](http://api.jquery.com/clone/)功能。一个你已经复制了你的元素，你可以开始删除所有不需要的元素 -

```
var elementCopy = $("p").clone();
elementCopy.remove("h1, a.classToExclude"); 
```

`elementCopy.html()`现在将包含您想要的元素。

* * *

请注意，这`$("p")`将选择页面中的**所有** `<p>`元素。您可能需要考虑向您的标记添加一些额外的类，以便更容易准确地确定您想要处理的元素。

# jquery - 离开结帐页面时存储输入的数据？

> ID：11490617
> 
> 赞同：0
> 
> 时间：2012-07-15T08:48:25.547
> 
> 标签：jquery, asp.net, session-state

这是我们所有人都可以连接到的问题：

*   我们在网上商店填写我们的结帐信息，然后想检查我们购物篮里的东西。我们回到我们的购物篮，看到一切都很好，然后我们回到收银台。**现在我们填写的所有字段都是空的**

我想实现一个解决方案，其中 web 应用程序存储信息，所以当用户回来时 - 它被存储。如果发生一些刷新也是如此，那么所有内容都会被存储。

我考虑了以下实现方式：

*   使用 jQuery：当用户填写内容并将其存储在会话中时调用 WebMethod

*   捕捉一些离开页面事件（这可能吗？），并迭代我的字段并将它们保存在会话中

这些是好的解决方案吗？还有其他更好的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:16:34.170

**在哪里存放？**

您可以将数据存储在本地或服务器上。对于本地存储，您可以使用 html5 localstorage 或任何可用的垫片作为后备。例如：[https ://github.com/marcuswestin/store.js#readme](https://github.com/marcuswestin/store.js#readme)

**什么时候储存？**

选项是无论何时用户输入一些数据。这可以是 onChange 或者最好是 onBlur。或者您可以每 10 秒保存一次。虽然我不确定那会怎样更好......

您还可以挂钩[onBeforeUnload](https://stackoverflow.com/search?q=onbeforeunload)事件，以提醒用户如果他们离开而不保存，他们可能会丢失数据。并且通常提供一个按钮来明确保存该数据。

因此，您可能不想存储敏感信息......

顺便说一句，SO已经这样做了。当您发布答案并刷新页面时，您会收到默认的浏览器提示，提醒您您将要做什么。即使您确实选择离开，您也会看到相同的页面，大部分答案仍然存在！因为，所以定期发布答案的内容...您可以使用 Firebug 自行检查...

# c++ - C++/Qt 定义/取消定义 QT_NO_SESSIONMANAGER 宏

> ID：11490619
> 
> 赞同：2
> 
> 时间：2012-07-15T08:48:51.590
> 
> 标签：c++, qt, macros, c-preprocessor

我想编译需要 QApplication 具有 commitData() 以及 saveState() 成员函数的 QGis。想一想，它们被放入预处理器 if 语句中：

```
#ifndef QT_NO_SESSIONMANAGER
void commitDataRequest(QSessionManager &sessionManager);
void saveStateRequest(QSessionManager &sessionManager);
#endif 
```

但是`QT_NO_SESSIONMANAGER`已定义且这些函数未声明，也未定义。当我#undef qapplication.h 中的宏时，我收到未定义的引用错误。所以，看来我应该用另一种方式解决这个问题。我怀疑我使用的 Qt 配置是否有问题，因为会话管理器是在预构建的 Qt 库中定义的，但它不在我编译的 Qt v4.8.2.2 的 Qt 中。也有可能我应该向 qmake 或 gcc 发送一些参数来定义/取消定义这个宏。我在网上和 stackoverflow 上搜索了一段时间的相关资料，但没有找到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:49:34.820

这是您的 Qt 配置的问题。看来您编译的 Qt 没有会话管理支持（支持 X 会话管理，-lSM -lICE 中的链接）。

可能您的系统上没有安装 sm-dev 库：

dpkg -l | grep libsm-dev

sudo apt-get install libsm-dev

再次尝试编译您的 Qt 源代码。确保在运行 qt 的配置时启用了会话管理（是）。

# linux - 如何在 ubunu azure vm 上查看 nodejs 程序的崩溃详细信息？

> ID：11490620
> 
> 赞同：2
> 
> 时间：2012-07-15T08:49:10.137
> 
> 标签：linux, node.js, ubuntu, azure

所以我创建了一个程序并在我的 PC 上运行的 VM 上运行它。它使用 nodejs 和 socket.io，我已经让它在本地运行良好。

无论如何，我正在尝试在 ubuntu azure VM 上启动并运行它。在客户端浏览器上，它似乎使初始 websocket 连接正常（并在 nodejs 终端中说明了这一点），但是当我尝试在客户端上 .emit(...message...) 时，nodejs 服务器进程似乎崩溃了，我不知道如何找出原因。

在 ssh 终端中，我得到的只是“DEBUG: Program node app.js exited with code null”，这绝对没用。我对 linux 的东西还很陌生，所以我问我如何才能找出问题所在？

我已经尝试在我的nodejs应用程序中到处添加console.log（）但无济于事，所以我想我在问，在ubuntu（在天蓝色上）哪里可以找到nodejs的崩溃日志？

我在这里环顾了一下：/var/log/，但没有发现任何特别有用的东西，不知道如果那是那个地方我应该在那里寻找。

# java - Jbutton 超过 Jbutton 背景图像？

> ID：11490622
> 
> 赞同：2
> 
> 时间：2012-07-15T08:49:44.177
> 
> 标签：java, swing, jpanel, jbutton, sprite

假设我用 jbuttons 创建了一个 2d 平铺地图，然后在地图顶部创建了单位，当单元（也是一个 jbutton）位于平铺顶部时，是否有办法显示地图的背景，因为它现在如何单位的背景是否只是红色，那么是否可以使用 jbuttons 而不是 jbuttons 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T09:39:28.247

如果 Topmost JButton`Translucent`可以解决您的目的，这里有一个示例代码，您可以如何做到这一点。只需将在我的情况下使用的`AlphaComposite`值更改为`0.7f`适合您的代码实例的任何值：

```
import java.awt.AlphaComposite;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.FlowLayout;

import java.awt.image.BufferedImage;

import java.io.IOException;

import java.net.URL;

import javax.swing.*;

public class TransparentButton
{       
    private CustomButton button;
    private ImageIcon backgroundImage;

    private void displayGUI()
    {
        JFrame frame = new JFrame("Transparent Button");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel contentPane = new JPanel();
        contentPane.setOpaque(true);
        contentPane.setBackground(Color.BLUE);

        try
        {
            backgroundImage = new ImageIcon(
                    new URL("http://gagandeepbali.uk.to/" + 
                            "gaganisonline/images/404error.jpg"));
        }
        catch(IOException ioe)
        {
            ioe.printStackTrace();
        }

        JButton baseButton = new JButton(backgroundImage);
        baseButton.setOpaque(true);
        baseButton.setLayout(new FlowLayout(FlowLayout.LEFT, 5, 5));

        button = new CustomButton("Transparent Button");
        baseButton.add(button);

        contentPane.add(baseButton);
        frame.setContentPane(contentPane);
        frame.setSize(300, 300);
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new TransparentButton().displayGUI();
            }
        });
    }
}

class CustomButton extends JButton
{
    private BufferedImage buttonImage = null;

    public CustomButton(String title)
    {
        super(title);
        setOpaque(false);
    }

    @Override
    public void paint(Graphics g)
    {
        if (buttonImage == null ||
                buttonImage.getWidth() != getWidth() ||
                    buttonImage.getHeight() != getHeight())
        {
            buttonImage = (BufferedImage) createImage(
                                getWidth(), getHeight());                               
        }   

        Graphics gButton = buttonImage.getGraphics();
        gButton.setClip(g.getClip());
        super.paint(gButton);
        /*
         * Make the graphics object sent to 
         * this paint() method translucent.
         */     
        Graphics2D g2 = (Graphics2D) g;
        AlphaComposite newComposite = 
            AlphaComposite.getInstance(
                AlphaComposite.SRC_OVER, 0.7f);
        g2.setComposite(newComposite);      
        /*
         * Copy the JButton's image to the destination
         * graphics, translucently.      
         */         
        g2.drawImage(buttonImage, 0, 0, null);          
    }
} 
```

这是相同的输出：

![透明按钮](../Images/d4d6bd3dcc6f62a2f7ac654aa0400637.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T09:19:35.527

可能，是，可取，啊，可能不是。

我相信您需要将标题按钮的布局更改为您可以控制的内容（这将取决于您的视觉要求）。

我个人可能会选择一个带有标签的面板，使用鼠标侦听器来监视鼠标操作和可能用于键盘交互的输入/操作映射。

Jbuttons 只是 jcomponent，因此它们获得了 jcomponents 的所有功能

# ruby-on-rails - Rails 3.2.3 和 ajax - 更新当前页面索引

> ID：11490624
> 
> 赞同：0
> 
> 时间：2012-07-15T08:49:56.007
> 
> 标签：ruby-on-rails, ajax

有一个局部视图，通过单击链接加载照片。方法 test_method 需要 page_id 来加载它们。加载它们后，page_id 必须增加并链接“更多照片”。

**#home/index.html.erb**

```
<%= link_to "More photos", {:controller => "home", :action => "test_method", :page=>@current_page }, :remote => true,:id => 'lnk_more' %>
<input type=hidden value="<%=@current_page%>"  id='current_page' /> 
```

**控制器**

```
def test_method
    @current_page  = params[:page]
    @paged_photos = get_photos( :page=>@current_pag )
    @current_page +=1
    respond_to() do |format|
      format.js
end 
```

**#home/test_method.js.erb**

```
$("#current_page").val(<%= @current_page%>); 
```

但是它不起作用，因为我做错了什么。做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:02:57.287

你得到什么错误？您的控制器代码中有错字 - 替换

```
@paged_photos = get_photos( :page=>@current_pag ) 
```

和

```
@paged_photos = get_photos( :page=>@current_page ) 
```

并结束 response_to

# ruby-on-rails-3 - 带有 mongodb 的导轨

> ID：11490625
> 
> 赞同：2
> 
> 时间：2012-07-15T08:49:56.537
> 
> 标签：ruby-on-rails-3, mongodb

任何人都知道一本涵盖 Rails 3 和 Mongoid/MongoDB 的书。类似于如何通过 RDM 上的面向文档的方法来解决常见问题。

[我从http://openmymind.net/mongodb.pdf](http://openmymind.net/mongodb.pdf)练习教程 现在我想要一些使用 mongodb 的真实示例。任何链接，教程，书籍都非常受欢迎..

答案应该涵盖在哪里定义数据库连接从数据库中选择某些数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:49:03.787

MongoDB wiki 列出了[可用的书籍](http://www.mongodb.org/display/DOCS/Books)。鉴于 MongoDB、Rails 和 Mongoid 等软件的发展速度之快，可能很难找到一本最新的书（或一本将长期保持最新的书）。如果您想学习和使用最新版本，在线资源可能是更好的选择。

一些建议的起点：

*   Mongoid[文档](http://mongoid.org/en/mongoid/)包含大量示例；还有一个示例应用程序[Echo](https://github.com/mongoid/echo)。
*   [MongoDB wiki](http://www.mongodb.org/display/DOCS/Home)和[MongoDB 手册](http://docs.mongodb.org/manual/)包括详细信息、示例以及指向其他资源（如博客文章和演示文稿）的链接。
*   RailsApps[项目](http://railsapps.github.com/)包括许多有用的教程和使用 Mongoid 的示例应用程序（以及其他有用的工具和 gem）。

# iphone - 如何通过变量更改值

> ID：11490626
> 
> 赞同：0
> 
> 时间：2012-07-15T08:50:10.567
> 
> 标签：iphone, objective-c

我如何改变那里的needel值。该代码用于速度计，我不知道如何访问该值。即使在 .h 文件中声明了变量，我也无法访问方法外的变量。我只想让针不受随机功能和计时器的控制，我想让他们重新调整滑块我尝试了几件事，但甚至无法访问进度视图。如果你能帮助我，那就太好了。

代码来自这里：[http ://www.mobisoftinfotech.com/blog/iphone/ios-tutorial-custom-speedometer-control/](http://www.mobisoftinfotech.com/blog/iphone/ios-tutorial-custom-speedometer-control/)

```
#import "FirstViewController.h"
#import <QuartzCore/QuartzCore.h>

@implementation FirstViewController
@synthesize needleImageView;
@synthesize speedometerCurrentValue;
@synthesize prevAngleFactor;
@synthesize angle;
@synthesize speedometer_Timer;
@synthesize speedometerReading;
@synthesize maxVal;

/*
// The designated initializer. Override to perform setup that is required before the view is loaded.
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
        // Custom initialization
    }
    return self;
}
*/

/*
// Implement loadView to create a view hierarchy programmatically, without using a nib.
- (void)loadView {
}
*/

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {

    // Add Meter Contents //
    [self addMeterViewContents];
    [super viewDidLoad];
}

/*
// Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
*/

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [maxVal release];
    [needleImageView release];
    [speedometer_Timer release];
    [speedometerReading release];

    [super dealloc];
}

#pragma mark -
#pragma mark Public Methods

-(void) addMeterViewContents
{

    UIImageView *backgroundImageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320,460)];
    backgroundImageView.image = [UIImage imageNamed:@"main_bg.png"];
    [self.view addSubview:backgroundImageView];
    [backgroundImageView release];

    /*UIImageView *meterImageView = [[UIImageView alloc]initWithFrame:CGRectMake(10, 40, 286,315)];
    meterImageView.image = [UIImage imageNamed:@"meter.png"];
    [self.view addSubview:meterImageView];
    [meterImageView release];*/

    //  Needle //
    UIImageView *imgNeedle = [[UIImageView alloc]initWithFrame:CGRectMake(143,155, 22, 84)];
    self.needleImageView = imgNeedle;
    [imgNeedle release];

    self.needleImageView.layer.anchorPoint = CGPointMake(self.needleImageView.layer.anchorPoint.x, self.needleImageView.layer.anchorPoint.y*2);
    self.needleImageView.backgroundColor = [UIColor clearColor];
    self.needleImageView.image = [UIImage imageNamed:@"arrow.png"];
    [self.view addSubview:self.needleImageView];

    // Needle Dot //
    UIImageView *meterImageViewDot = [[UIImageView alloc]initWithFrame:CGRectMake(131.5, 175, 45,44)];
    meterImageViewDot.image = [UIImage imageNamed:@"center_wheel.png"];
    [self.view addSubview:meterImageViewDot];
    [meterImageViewDot release];

    // Speedometer Reading //
    UILabel *tempReading = [[UILabel alloc] initWithFrame:CGRectMake(125, 250, 60, 30)];
    self.speedometerReading = tempReading;
    [tempReading release];
    self.speedometerReading.textAlignment = UITextAlignmentCenter;
    self.speedometerReading.backgroundColor = [UIColor blackColor];
    self.speedometerReading.text= @"0";
    self.speedometerReading.textColor = [UIColor colorWithRed:114/255.f green:146/255.f blue:38/255.f alpha:1.0];
    [self.view addSubview:self.speedometerReading ];

    // Set Max Value //
    self.maxVal = @"100";

    /// Set Needle pointer initialy at zero //
    [self rotateIt:-118.4];

    // Set previous angle //
    self.prevAngleFactor = -118.4;

    // Set Speedometer Value //
    [self setSpeedometerCurrentValue];
}

#pragma mark -
#pragma mark calculateDeviationAngle Method

-(void) calculateDeviationAngle
{

    if([self.maxVal floatValue]>0)
    {
        self.angle = ((self.speedometerCurrentValue *237.4)/[self.maxVal floatValue])-118.4;  // 237.4 - Total angle between 0 - 100 //
    }
    else
    {
        self.angle = 0;
    }

    if(self.angle<=-118.4)
    {
        self.angle = -118.4;  
    }
    if(self.angle>=119)
    {
        self.angle = 119;
    }

    // If Calculated angle is greater than 180 deg, to avoid the needle to rotate in reverse direction first rotate the needle 1/3 of the calculated angle and then 2/3\. // 
    if(abs(self.angle-self.prevAngleFactor) >180)
    {
        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.5f];
        [self rotateIt:self.angle/3];
        [UIView commitAnimations];

        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.5f];
        [self rotateIt:(self.angle*2)/3];
        [UIView commitAnimations];

    }

    self.prevAngleFactor = self.angle;

    // Rotate Needle //
    [self rotateNeedle];

}

#pragma mark -
#pragma mark rotateNeedle Method
-(void) rotateNeedle
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5f]; 
    [self.needleImageView setTransform: CGAffineTransformMakeRotation((M_PI / 180) * self.angle)];  
    [UIView commitAnimations];

}

#pragma mark -
#pragma mark setSpeedometerCurrentValue

-(void) setSpeedometerCurrentValue
{
    if(self.speedometer_Timer)
    {
        [self.speedometer_Timer invalidate];
        self.speedometer_Timer = nil;
    }
    float hilfe = arc4random() % 100;
    self.speedometerCurrentValue =  hilfe; // Generate Random value between 0 to 100\. //
    progress.progress = hilfe/100;
    self.speedometer_Timer = [NSTimer  scheduledTimerWithTimeInterval:2 target:self selector:@selector(setSpeedometerCurrentValue) userInfo:nil repeats:YES];

    self.speedometerReading.text = [NSString stringWithFormat:@"%.2f",self.speedometerCurrentValue];

    // Calculate the Angle by which the needle should rotate //
    [self calculateDeviationAngle];
}
#pragma mark -
#pragma mark Speedometer needle Rotation View Methods

-(void) rotateIt:(float)angl
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.01f];

    [self.needleImageView setTransform: CGAffineTransformMakeRotation((M_PI / 180) *angl)]; 

    [UIView commitAnimations];
}

#pragma mark -
#pragma mark Slider changed

-(IBAction) silderchanged:(id)sender
{
    int progressAsInt =(int)(slider.value + 0.5f);
    NSString *newText =[[NSString alloc] initWithFormat:@"%d",progressAsInt];
    sliderbox.text = newText;
    //progress.progress = ((slider.value + 0.5f)/100);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T11:44:29.223

一个总体思路：

1.  创建滑块（可以直接将控件放在IB中的xib文件上）
2.  在控制器的头文件中添加一个 IBOutlet
3.  在 IB 中将它们连接起来
4.  在控制器中添加并实现 IBAction
5.  将滑块链接到此操作
6.  IBAction 函数将 self.speedometerCurrentValue 设置为滑块值
7.  删除计时器

这就是我在第 6 点中提到的 IBAction 的实现方式

```
-(IBAction) setValue:(id)sender {
    float  f = [sliderValue value];
    NSLog(@"get this %f", f);

    // should be refactored
    self.speedometerCurrentValue = f;
    self.speedometerReading.text = [NSString stringWithFormat:@"%.2f",self.speedometerCurrentValue];

    [self calculateDeviationAngle];
} 
```

![滑块和仪表](../Images/7320ba473cf76138ec73c8b774a4205b.png)

# java - SWT 文本小部件表现为命令提示符

> ID：11490629
> 
> 赞同：0
> 
> 时间：2012-07-15T08:50:49.880
> 
> 标签：java, swt

我正在尝试使用 SWT Text 小部件创建应用程序。Text 小部件应作为命令提示符询问输入，但在按下回车后不允许删除。但输入前可以在同一行删除字符。这可能吗？谢谢，托尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T09:30:45.757

一种方法是设置两个小部件布局。创建一个用于保存终端屏幕（不可编辑）的`Text`组件和一个保存您的输入且可编辑的小部件。以下 API 应该让您了解如何实现此行为：

*   每个[`Text`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fwidgets%2FText.html)小部件都有一个`setEditable(boolean)`方法来设置它是否可以编辑。

*   您可以将常量从类传递`SWT`给构造函数。前任。：

    ```
    new Text(shell, SWT.SINGLE) // creates single line text field
    new Text(shell, SWT.MULTI)  // crates a multi line text field 
    ```

*   也许添加一个[`KeyListener`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fwidgets%2FText.html)会帮助你。

# python - 如何在 python smtplib 模块中设置主机地址？

> ID：11490634
> 
> 赞同：2
> 
> 时间：2012-07-15T08:51:54.067
> 
> 标签：python, email, host, anonymous

在linux环境下，我想连接我们公司的邮件服务器，发送匿名邮件，主机地址为10.18.93.128，端口为25。

我不知道在下面的代码中在哪里插入这些信息，这里使用的是 gmail 的服务器，但我想使用我们的邮件服务器：

```
import smtplib  
fromaddr = 'anyemail@anyaddressx.com'  
toaddrs  = 'recipient_email@mycompany.com'  
msg = 'Hello'  

# Credentials (if needed)  
username = 'yyyyy'  
password = 'xxxxx'  

# The actual mail send  
server = smtplib.SMTP('smtp.gmail.com:587')  
server.starttls()  
server.login(username,password)  
server.sendmail(fromaddr, toaddrs, msg)  
server.quit() 
```

我的问题：

1.  我在哪里输入我们邮件服务器的主机地址 10.18.93.128 和上面的端口？
2.  是否可以使用不存在的电子邮件帐户发送电子邮件？这意味着我不会登录帐户，只会发送匿名电子邮件。

谢谢最好的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T08:55:36.510

只需更换`smtp.gmail.com:587`零件：

```
server = smtplib.SMTP('10.18.93.128:25') 
```

您可能需要省略`starttls()`根据公司电子邮件服务器的配置，

它还取决于您的电子邮件服务器是否允许在不登录的情况下发送。SMTP 标准不要求您登录，但公司政策可能会。

请注意，仅仅因为您必须登录到邮件服务器，您仍然可以使用`from`您选择的任何地址发送电子邮件。对发件人地址实施限制是邮件服务器可以做出的另一个策略决定。

# c++ - Winsock - 将客户端重新连接到服务器基础知识 - TIME_WAIT

> ID：11490635
> 
> 赞同：1
> 
> 时间：2012-07-15T08:52:53.443
> 
> 标签：c++, winsock, winsock2, winsockets

我设置了一个 TCP 服务器/客户端，它们以我通常想要的方式进行通信。

我现在要做的是添加允许客户端在连接丢失后自动重新连接到服务器的功能。我无法在网上找到有关如何执行此操作的完整信息。

详细信息：-我只有 1 台服务器，到目前为止它最多只能托管 1 个连接。- 当客户端或服务器断开连接时 - 两者都关闭（这样关闭服务器和客户端的套接字是否明智？）

理想情况下，我希望客户端每次都能够重新连接到服务器上的同一端口。我了解 TIME_WAIT 以及为什么它是必要的。除非我没有其他选择，否则我真的不想使用 SO_REUSEADDR。这个一般是怎么处理的？我是否应该在服务器端打开一个新端口，同时等待旧套接字完成 TIME_WAIT 并基本上在两个端口之间交替（这意味着客户端必须跟踪 2 个可能的端口）？

感谢您的建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T09:04:43.643

TIME_WAIT 是 TCP 连接的状态，而不是端口。每个 TCP 连接都由元组（本地地址、本地端口、远程地址、远程端口）标识。因此，如果客户端使用新的（动态）本地端口连接到服务器，则会创建新的 TCP 连接并且 TIME_WAIT 不会出现问题。

# java - 为什么春季和休眠中的异常是最未经检查的异常？

> ID：11490636
> 
> 赞同：5
> 
> 时间：2012-07-15T08:52:55.363
> 
> 标签：java, spring, hibernate, exception

> **可能重复：**
> [为什么休眠将 HibernateException 更改为 RuntimeException（未选中）](https://stackoverflow.com/questions/4609870/why-hibernate-changed-hibernateexception-to-runtimeexception-unchecked)

将春季和休眠中的异常保持为未经检查的异常的原因是什么？

只是为了减少编码时的混乱，还是背后有其他一些设计原则？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T09:47:52.450

在处理大多数数据库异常时，开发人员几乎无能为力（我的意思是在 catch 块中写一些东西来从异常中恢复）。像数据库连接问题，表中不存在不正确的查询或列等问题。
因此，未经检查的异常可以使开发人员免于添加不必要的 catch 块。如果您仍然想要，您可以捕获所需的未检查异常并留下其余部分，而检查异常则不是这种情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T09:11:47.630

已检查与未检查的异常辩论是一个古老的争论。两个阵营都有强大的支持者。作为一个团队，你应该选择一种风格并坚持下去。

虽然我只能猜测其中的原因，但显然 spring 和 hibernate 偏爱 unchecked exception 阵营。

辩论（除其他外）在“[在 Java 中，我什么时候应该创建检查异常，什么时候应该是运行时异常？](https://stackoverflow.com/questions/499437/in-java-when-should-i-create-a-checked-exception-and-when-should-it-be-a-runti) ”这个问题中讨论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T09:22:12.520

我认为像 Spring、Hibernate 这样的框架围绕 java 反射工作。而反射大部分异常都是运行时异常。

# java - 如何将十六进制字符串转换为字节数组？

> ID：11490639
> 
> 赞同：1
> 
> 时间：2012-07-15T08:53:27.900
> 
> 标签：java

> **可能重复：**
> [使用 Java 将十六进制转储的字符串表示形式转换为字节数组？](https://stackoverflow.com/questions/140131/convert-a-string-representation-of-a-hex-dump-to-a-byte-array-using-java)

我正在尝试将十六进制字符串“FFFFFFFFFFFFFFFF”转换为大小为 8 的字节数组

结果应该是

```
byte[] mKey =  { (byte) 0xFF, (byte) 0xFF, (byte) 0xFF, (byte) 0xFF,
        (byte) 0xFF, (byte) 0xFF, (byte) 0xFF, (byte) 0xFF }; 
```

我试过for循环

```
public static byte[] HexString2Bytes(String src) {
    byte[] res = new byte[8];
    for (int i = 0; i < 16; i = i + 2) {
        res[i] = convertToByte(src.substring(i, i + 2));
    }
    return res;
} 
```

问题是，我不知道如何实现方法 convertToByte() 来转换一个十六进制字符串，比如“FF”到 0xFF，请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:07:59.890

```
int convertToByte(String s){
    return Integer.parseString(s, 16);
} 
```

# matlab - 尝试在matlab中重命名文件名时出错

> ID：11490641
> 
> 赞同：0
> 
> 时间：2012-07-15T08:53:55.680
> 
> 标签：matlab

这是我的代码：

```
filename_date = strcat('Maayanei_yeshua-IC_',file_date,'.pdf')
filenamepdf = strcat(filename,'.pdf')
rename(['C:\Users\user\Desktop\' filenamepdf],['C:\Users\user\Desktop\' filename_date]); 
```

我得到了错误：

```
<??? Error using ==> movefile The system cannot find the path specified.> 
```

或者

```
<??? Undefined function or method 'rename' for input arguments of type 'char'.> 
```

我检查了数百次，文件在那里......我不知道为什么它找不到它，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:42:59.360

使用命令

```
doc rename 
```

发现这`rename`是为了使用 ftp 服务器，而你在这里没有这样做。你想要的是命令`movefile`

使用提供的帮助窗口`helpwin`来查找您正在使用的所有命令。

另外，从命令提示符尝试

```
dir(['C:\Users\user\Desktop\' filenamepdf]) 
```

验证您要移动的文件是否存在。

# android - 通过 eclipse 在旧版本上安装 Android 应用程序

> ID：11490646
> 
> 赞同：0
> 
> 时间：2012-07-15T08:55:05.447
> 
> 标签：android, eclipse, installation, android-2.3-gingerbread

我是一个完整的 android 开发新手，尽管我对编程了解一两件事。我试图在姜饼手机上安装我在 eclipse 中开发的应用程序（单个 .java 文件），但 eclipse IDE 无法将我的手机识别为安装应用程序的有效设备。也许是因为我在 ADT 16 (4.1) 中开发了它。有什么方法可以在我的手机上安装该应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T08:59:08.400

您必须更改 Android 应用程序的最低版本，右键单击项目，转到属性，选择 android 并将版本从 android 4.1 更改为您的移动设备的版本。
清理项目并再次运行，将新的 *.apk 复制到 android，它现在应该可以工作了

# java - String.equals() 在二进制数上按位与更改

> ID：11490647
> 
> 赞同：0
> 
> 时间：2012-07-15T08:55:06.463
> 
> 标签：java, binary, equals, bitwise-and

在 Java 中，使用二进制字符串（例如“00010010”，在为我的程序创建这些二进制字符串时，在开头添加零）。我有这个功能

```
private static boolean isJinSuperSets(String J, List<String> superSets) {

    for (String superJ : superSets)
        if (superJ.equals(J)) return true;

    return false;
} 
```

它检查二进制字符串 J 是否包含在二进制字符串 superSets 的列表中。

我用`equals()`在 String 对象上使用，但我想通过将二进制字符串转换为二进制数并执行按位运算 AND 来查看它们是否相等来加速此代码。

你能给我一些关于如何实现这一点的技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:32:31.797

这里是int：

```
for (String superJ : superSets)
        return Integer.valueOf(superJ,2) == Integer.valueOf(J,2);
} 
```

您必须使用基准测试（注意第一次总是较慢）以获得速度。

如果 J 被多次使用，则优化的最佳方法是：将 J2 作为 Integer 某处并对其进行测试。

# c++ - 如何在不重复的情况下随机播放字符“abcdefghijklmnopqrstuvwxyz”

> ID：11490655
> 
> 赞同：0
> 
> 时间：2012-07-15T08:56:06.837
> 
> 标签：c++, random, shuffle

```
const char chars[] = "abcdef ...."; 
char result[...];
memcpy(result, chars, sizeof(chars)); 
for (unsigned i = 0; i < (sizeof(chars)-1); ++i) {
    unsigned j = rand() % sizeof(chars);
    char tmp = result[j];
    result[j] = result[i];
    result[i] = tmp;
} 
```

将结果写入文本文件时出现问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T08:59:00.910

C++ 中“如何洗牌”的答案是使用标准库的洗牌算法之一。一个简单的方法是将它放在[std::string](http://en.cppreference.com/w/cpp/string/basic_string)中，并使用[std::random_shuffle](http://en.cppreference.com/w/cpp/algorithm/random_shuffle)：

```
std::string s = "abcdef ...." ;
std::random_shuffle(s.begin(), s.end()); 
```

您也可以使用数组来执行此操作：

```
char letters[] = {'a', 'b', ..... };
std::random_shuffle(letters, letters+26); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T09:00:44.150

给你：[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)。

和一个[`C++`实现](http://www.dreamincode.net/code/snippet4302.htm)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T09:01:48.003

您的问题是字符值 0 未映射到 A。相反，将打印为 A 的字符等于 65。如果您需要，可以[在此处查看完整表。](http://www.asciitable.com/)

无论如何，代码解决方案很简单。代替

```
cout<<letter[i]<<" "; 
```

你可以做：

```
cout<<letter[i]+'A'-1<<" "; 
```

（-1 是因为您将字母编号为 1 到 26 而不是 0 到 25）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T09:17:54.443

```
const char chars[] = "abcdef ...."; 
char result[...];
memcpy(result, chars, sizeof(chars)); 
for (unsigned i = 0; i < (sizeof(chars)-1); ++i) {
    unsigned j = rand() % sizeof(chars);
    char tmp = result[j];
    result[j] = result[i];
    result[i] = tmp;
} 
```

如果您使用 STL，则首选 std::random_shuffle。

# php - CodeIgniter 网站上字体上的 Firefox 403

> ID：11490657
> 
> 赞同：2
> 
> 时间：2012-07-15T08:57:06.510
> 
> 标签：php, css, codeigniter, firefox, http-status-code-403

我在 CSS 中使用 font-face 将自定义字体导入到我正在使用 CodeIgniter 构建的 Web 应用程序中。这是CSS代码：

```
@font-face {
    font-family: 'UniversLT-UltraCondensed';
    src: url('../Fonts/LTUnivers/universlt59ultracondensed.eot');
    src: url('../Fonts/LTUnivers/universlt59ultracondensed.eot?#iefix') format('embedded-opentype'),
         url('../Fonts/LTUnivers/universlt59ultracondensed.woff') format('woff'),
         url('../Fonts/LTUnivers/universlt59ultracondensed.ttf') format('truetype'),
         url('../Fonts/LTUnivers/universlt59ultracondensed.svg#universlt59ultracondensed') format('svg');
    font-weight: normal;
    font-style: normal;
}

body{
    font-family: UniversLT-UltraCondensed, Helvetica, Arial, serif;
} 
```

当我在 Safari、Chrome 或 Opera 中运行该网站时，字体已正确加载。当我在 FireFox 中运行它时，我得到以下信息：

![403](../Images/d820e0771ccaa524ce0f9fc07bafee33.png)

403 错误向我表明我的服务器配置错误或 .htaccess 文件以某种方式错误。我是一个新手，但这是我的 .htaccess 中的内容（假设这是问题......）：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /Tat
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ Tat/index.php/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|images|robots\.txt|css|fonts|woff|ttf|svg|eot)
RewriteRule ^(.*)$ Tat/index.php/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
ErrorDocument 404 /Tat/index.php
</IfModule> 
```

还应注意，这些文件具有 777 权限（我对运行 Ubuntu Lucid 的服务器具有 SSH 访问权限）。

有什么建议么？我一点头绪都没有...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T09:13:19.443

啊，发现问题了。我已经为此工作了几个小时，一旦我发布我就会修复它，典型的！

无论如何，对于可能有类似问题的任何其他人 - 问题是我已经在开发虚拟服务器上的 Linux 中设置了权限，但没有在 VM 挂载的文件夹上的 Mac OSX 上设置权限。所以我打开终端并 chmod -R 777'd 字体文件夹，它似乎工作。

# communication - 如何使用 USRP1 以数据速率（3.84 Mbps）传输信号？

> ID：11490664
> 
> 赞同：2
> 
> 时间：2012-07-15T08:58:00.583
> 
> 标签：communication, gnuradio, usrp, umts

我想使用 USRP1 以数据速率 (3.84 M) 发送信号，但是当我传输信号时，它会在终端中告诉我类似这样的信息：

## 警告

目标数据速率：3840000 bps

## 实际数据速率：4000000 bps

但我正在尝试使用 UMTS 空中接口实现 TX，我不希望数据速率出现此错误，任何人都可以帮忙？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T18:33:05.980

您的采样率取决于您与 USRP 一起使用的主时钟频率。您的 USRP1 的主时钟速率为 64 MHz，默认情况下，您只能以该值的整数抽取进行采样，这就是您无法以 3.84 MSps 采样的原因。

UHD 正在为您自动将您请求的采样率更正为您的 USRP 支持的速率。这实际上是可取的行为。

你有两个选择：

1.  更换 USRP1 上的时钟，它将分频到您想要的速率。
2.  使用合理的重新采样器。如果你想使用它，GNURadio 会为你提供这个块。

我建议在尝试硬件模块之前使用一个合理的重采样器，如果你做错了可能会永久破坏你的 USRP。

# android - 如何使用 android 检查配对的蓝牙设备是否仍然存在（仍然存在）

> ID：11490665
> 
> 赞同：0
> 
> 时间：2012-07-15T08:58:07.180
> 
> 标签：android, bluetooth, android-arrayadapter

`btArrayAdapter`现在包含所有配对的蓝牙设备。稍后我想检查这些设备是否还活着。如果没有，它应该向我显示该设备名称。

```
ArrayAdapter<String> btArrayAdapter = new ArrayAdapter<String>(
         this, android.R.layout.simple_list_item_1);
BluetoothAdapter bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
Set<BluetoothDevice> pairedDevices = bluetoothAdapter.getBondedDevices(); 
if (pairedDevices.size() > 0) { 
   for (BluetoothDevice device : pairedDevices) {
      String deviceBTName = device.getName();
      String deviceBTMajorClass = device.getAddress();
      btArrayAdapter.add(deviceBTName + "\n" + deviceBTMajorClass);
   } 
}
setListAdapter(btArrayAdapter); 
```

如何检查它？谢谢

# wpf - 放置在 DataGrid.DataGridTemplateColumn 中的 UserControl 中的 PopupMenu 内的文本框永远不会得到 KeboardFocus？

> ID：11490675
> 
> 赞同：3
> 
> 时间：2012-07-15T08:59:17.860
> 
> 标签：wpf, mvvm, user-controls, wpf-controls, wpfdatagrid

我有这样的控件：

```
<UserControl x:Class="Pouyansoft.WPF.Controls.Common.CommonDropDownPanel"
        d:DesignHeight="20" d:DesignWidth="20">
  <Grid>
    <ToggleButton x:Name="ShowPopupButton"  Click="buttonShowPopup_Click"/>
    <Popup  MaxHeight="300"
        PlacementTarget="{Binding ElementName=ShowPopupButton}"
        PopupAnimation="Slide"
        AllowsTransparency="True"
        Focusable="True" 
        StaysOpen="False"
      >
        <Grid>
          <TextBox x:Name="TXT"/>
        </Grid>
    </Popup>
  </Grid>
</UserControl> 
```

和

```
 private void buttonShowPopup_Click(object sender, RoutedEventArgs e)
 {
    popup.IsOpen = true;
 } 
```

当我像这样放置这个控件时 `DataGridTemplateColumn`：

```
 <DataGrid  CanUserAddRows="False" Grid.ColumnSpan="4"  AutoGenerateColumns="False"  ItemsSource="{Binding}">
        <DataGrid.Columns>
           <DataGridTemplateColumn  MinWidth="200">
             <DataGridTemplateColumn.CellTemplate>
                 <DataTemplate>
                   <DockPanel LastChildFill="True">
                     <WpfCommonControl:CommonDropDownPanel Width="20" Height="20">
                     </WpfCommonControl:CommonDropDownPanel>
                 </DataTemplate>
               </DataGridTemplateColumn.CellTemplate>
          </DataGridTemplateColumn>
        </DataGrid.Columns>
     </DataGrid> 
```

文本框（TXT）没有获得键盘焦点。我无法理解为什么？任何想法？

> DataGrid.DataGridTemplateColumn=>UserControl=>PopupMenu=>TextBox 永远不会获得焦点。

**编辑**

但是当我在没有 UserControl 的情况下这样做时，它可以完美地工作：

```
 <DataGrid  CanUserAddRows="False" Grid.ColumnSpan="4"  AutoGenerateColumns="False"  ItemsSource="{Binding}">
        <DataGrid.Columns>
           <DataGridTemplateColumn  MinWidth="200">
             <DataGridTemplateColumn.CellTemplate>
                 <DataTemplate>
                   <DockPanel LastChildFill="True">
                     <ToggleButton x:Name="ShowPopupButton"  Click="buttonShowPopup_Click"/>
                     <Popup  MaxHeight="300"
                        PlacementTarget="{Binding ElementName=ShowPopupButton}"
                        PopupAnimation="Slide"
                        AllowsTransparency="True"
                        Focusable="True" 
                        StaysOpen="False">
                      <Grid>
                           <TextBox x:Name="TXT"/>
                      </Grid>
                     </Popup>
                    </DockPanel>
                 </DataTemplate>
               </DataGridTemplateColumn.CellTemplate>
          </DataGridTemplateColumn>
        </DataGrid.Columns>
     </DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T11:18:27.470

尝试这样的事情：

**使用用户控件：**

MainWindow.xaml 文件：

```
<Window x:Class="DataGridAndColumnPopup.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        xmlns:WpfCommonControl="clr-namespace:DataGridAndColumnPopup"
        >
    <Grid>
        <DataGrid Name="dgData" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding ID}" />
                <DataGridTemplateColumn x:Name="templateColumn" Header="Message">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel LastChildFill="True">                                
                                <WpfCommonControl:CommonDropDownPanel>
                                </WpfCommonControl:CommonDropDownPanel>
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

MainWindow.xaml.cs 文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Controls.Primitives;

namespace DataGridAndColumnPopup
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            List<Foo> _source = new List<Foo>();
            for (int i = 0; i < 10; i++)
            {
                _source.Add(new Foo { ID = i, Message = "message " + i });
            }

            dgData.ItemsSource = _source;
        }                 
    }

    public class Foo
    {
        public int ID { get; set; }
        public string Message { get; set; }
    }

    public static class ElementUtil
    {
        public static T FindVisualChild<T>(DependencyObject depObj) where T : DependencyObject
        {
            if (depObj != null)
            {
                for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
                {
                    DependencyObject child = VisualTreeHelper.GetChild(depObj, i);
                    if (child != null && child is T)
                    {
                        return (T)child;
                    }

                    T childItem = FindVisualChild<T>(child);
                    if (childItem != null) return childItem;
                }
            }
            return null;
        }      
    }
} 
```

CommonDropDownPanel.xaml 文件：

```
<UserControl x:Class="DataGridAndColumnPopup.CommonDropDownPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="26" d:DesignWidth="114">
    <Grid>        
        <ToggleButton x:Name="ShowPopupButton" Content="Click to edit...."/>
        <Popup  MaxHeight="300"
                                    PlacementTarget="{Binding ElementName=ShowPopupButton}"
                                    IsOpen="{Binding ElementName=ShowPopupButton, Path=IsChecked}"
                                    PopupAnimation="Slide"
                                    AllowsTransparency="True"
                                    Focusable="True" 
                                    StaysOpen="False" Opened="Popup_Opened">
            <Grid>
                <TextBox x:Name="TXT" Text="{Binding Message}" Focusable="True"/>
            </Grid>
        </Popup>        
    </Grid>
</UserControl> 
```

CommonDropDownPanel.xaml.cs 文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Controls.Primitives;

namespace DataGridAndColumnPopup
{
    /// <summary>
    /// Interaction logic for CommonDropDownPanel.xaml
    /// </summary>
    public partial class CommonDropDownPanel : UserControl
    {
        public CommonDropDownPanel()
        {
            InitializeComponent();
        }

        private void Popup_Opened(object sender, EventArgs e)
        {
            TextBox tb = ElementUtil.FindVisualChild<TextBox>((Grid)((sender as Popup).Child));
            if (tb != null)
            {
                tb.SelectAll();
                tb.Focus();
            }
        }      
    }
} 
```

**没有用户控制：**

XAML 文件：

```
<Window x:Class="DataGridAndColumnPopup.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <DataGrid Name="dgData" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding ID}" />
                <DataGridTemplateColumn x:Name="templateColumn" Header="Message">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <DockPanel LastChildFill="True">
                                <ToggleButton x:Name="ShowPopupButton" Content="Click to edit...."/>
                                <Popup  MaxHeight="300"
                                        PlacementTarget="{Binding ElementName=ShowPopupButton}"
                                        IsOpen="{Binding ElementName=ShowPopupButton, Path=IsChecked}"
                                        PopupAnimation="Slide"
                                        AllowsTransparency="True"
                                        Focusable="True" 
                                        StaysOpen="False" Opened="Popup_Opened">
                                    <Grid>
                                        <TextBox x:Name="TXT" Text="{Binding Message}" Focusable="True"/>
                                    </Grid>
                                </Popup>                        
                            </DockPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

代码隐藏文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Windows.Controls.Primitives;

namespace DataGridAndColumnPopup
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            List<Foo> _source = new List<Foo>();
            for (int i = 0; i < 10; i++)
            {
                _source.Add(new Foo { ID = i, Message = "message " + i });
            }

            dgData.ItemsSource = _source;
        }

        private void Popup_Opened(object sender, EventArgs e)
        {
            TextBox tb = ElementUtil.FindVisualChild<TextBox>((Grid)((sender as Popup).Child));
            if (tb != null)
            {
                tb.SelectAll();
                tb.Focus();
            }
        }       
    }

    public class Foo
    {
        public int ID { get; set; }
        public string Message { get; set; }
    }

    public static class ElementUtil
    {
        public static T FindVisualChild<T>(DependencyObject depObj) where T : DependencyObject
        {
            if (depObj != null)
            {
                for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
                {
                    DependencyObject child = VisualTreeHelper.GetChild(depObj, i);
                    if (child != null && child is T)
                    {
                        return (T)child;
                    }

                    T childItem = FindVisualChild<T>(child);
                    if (childItem != null) return childItem;
                }
            }
            return null;
        }      
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T11:52:06.653

考虑有多个文本框需要获得焦点——最简单的解决方案是将`DataGridCell` `Focusable`属性设置为`False`，然后 Popup 获得焦点。参考这个[答案](https://stackoverflow.com/a/18027670/1437877)

# matlab - 在 matlab 向量或矩阵中的特定位置插入值

> ID：11490679
> 
> 赞同：5
> 
> 时间：2012-07-15T08:59:51.017
> 
> 标签：matlab

我试图将一个值插入到特定索引处的向量中，在另一个向量中指定，然后相应地替换其他值。

例如

```
Vector=[1 2 3 4 5] %vector of data
Idx=[2 4] %Indices at which to insert a value

Value to insert is X

NewVector=[1 X 2 X 3 4 5] 
```

有没有一些直接的方法可以做到这一点，最好避免循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T16:17:20.270

```
Vector=1:5;  
Idx=[2 4];
c=false(1,length(Vector)+length(Idx));
c(Idx)=true;
result=nan(size(c));
result(~c)=Vector;
result(c)=42

result =

     1    42     2    42     3     4     5 
```

如果您希望在已删除的评论中插入新值，请执行以下操作：

```
 c(Idx+(0:length(Idx)-1))=true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T09:49:36.443

这是一个通用功能。这个想法和@Mark说的一样：

```
 function arrOut = insertAt(arr,val,index)
      assert( index<= numel(arr)+1);
      assert( index>=1);
      if index == numel(arr)+1
          arrOut = [arr val];
      else
          arrOut = [arr(1:index-1) val arr(index:end)];
      end
   end 
```

我从未听说过为此的内置函数。

# android - 从 onRetainNonConfigurationInstance() 获取值时出现空指针异常 - Android

> ID：11490681
> 
> 赞同：0
> 
> 时间：2012-07-15T08:59:52.830
> 
> 标签：android

我正在开发一个应用程序，它使用不同的 Mediaplayer 实例同时播放 2 个音频文件。为了在屏幕旋转时保留媒体播放器的状态，实现了该方法

```
 public  Object  onRetainNonConfigurationInstance() 
             {
                    HashMap<String,Object> player = new HashMap<String,Object>();
                    MediaPlayer instance = mp;
                    mp = null;
                    MediaPlayer instance1 = mp1;
                    mp1 = null;
                    player.put("mp", instance);
                    player.put("mp1", instance1);
                     return player;

              } 
```

在 onCreate() 中，

```
 HashMap<String, Object> playerhandle = (HashMap<String, Object>)getLastNonConfigurationInstance();            
                  mp = (MediaPlayer)playerhandle.get("mp");
                      if (mp == null) 
                      {
                         mp = new MediaPlayer();
                       }
                      mp1 = (MediaPlayer)playerhandle.get("mp1");
                      if (mp1 == null) 
                      {
                        mp1 = new MediaPlayer();
                      } 
```

在 logcat 中显示 NullPointerException ............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:03:09.350

你从不检查是否`playerhandle`是`null`

# perl - RYO 博客引擎 - 显示多个帖子的标签

> ID：11490683
> 
> 赞同：0
> 
> 时间：2012-07-15T09:00:19.977
> 
> 标签：perl, sqlite, dancer

我正在编写另一个用于练习的博客引擎，使用 SQLite 和 Perl Dancer 框架。

表格是这样的：

```
CREATE TABLE posts (
    p_id INTEGER PRIMARY KEY,
    p_url VARCHAR(255),
    p_title VARCHAR(255),
    p_text TEXT,
    p_date DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE tags (
    t_id INTEGER PRIMARY KEY,
    t_tag VARCHAR(255),
    t_url VARCHAR(255)
);

CREATE TABLE tags_posts_junction (
    tp_tag INTEGER NOT NULL,
    tp_post INTEGER NOT NULL,
    FOREIGN KEY(tp_tag) REFERENCES tags.t_id,
    FOREIGN KEY(tp_post) REFERENCES tags.p_id
); 
```

所有像 Wordpress（或 stackoverflow）这样的大人物都可以在主页上显示标签，在每个问题之后，我也想实现它。问题是我该怎么做。

到目前为止，帖子都存储在数据库中，当我需要渲染一个显示最新 20 篇帖子的页面时，我将哈希引用 ( `fetchall_hashref`from `DBI`) 传递给模板。那么如何在那里添加标签呢？当然我可以做类似的事情

```
my $dbh = database->prepare('SELECT * FROM posts ORDER BY p_date DESC 
                    LIMIT 20 OFFSET 0');
$dbh->execute;
my $posts = $dbh->fetchall_hashref('p_date');
foreach my $key (keys $post) {
    my $dbh = database->prepare('SELECT * FROM tags WHERE t_id IN (
                    SELECT tp_tag FROM tags_posts_junction WHERE tp_post = ?)');
    $dbh->execute($post->{"$key"}->{"p_id"});
    my $tags = $dbh->fetchall_hashref(t_id);
    $post->{"$key"}->{"$tag_hash"} = $tags;
}; 
```

但这很丑陋，每页还有 20 个查询，不是太多了吗？我认为应该有更好的方法。

所以问题是我如何以最少冗余的方式获得 20 个帖子的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:54:32.940

我认为您之前可以结合您的第一个/外部查询

```
my $posts = $dbh->fetchall_hashref('p_date'); 
```

使用您的内部查询，然后您将访问数据库一次而不是 20 次。

您还可以通过使用 DBIx::Simple - [https://metacpan.org/module/DBIx::Simple](https://metacpan.org/module/DBIx::Simple)来简化您的代码。

把它放在一起会给出类似的东西：

```
my $sql =   'SELECT t.*, p.*
             FROM tags t 
             JOIN tags_posts_junction tpj ON t.t_tag = tpj.t_tag
             JOIN posts p ON p.p_id = tpj.tp_post
             WHERE tpj.tp_post IN (
                SELECT p_id FROM posts ORDER BY p_date DESC 
                LIMIT 20 OFFSET 0
              )';
my $db = DBIx::Simple->connect($dbh);
my $posts = $db->query($sql)->hashes; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:21:50.847

将所有 p_ids 收集到一个数组中，并使用 IN 而不是 = 构造您的查询，类似这样，假设 @pids 是您的数组：

```
my $dbh = database->prepare('SELECT * FROM tags WHERE t_id IN (
                    SELECT tp_tag FROM tags_posts_junction WHERE tp_post IN (' .
                    join(', ', ('?')x@pids).') )');
$dbh->execute(@pids); 
```

尽管您真的应该寻找 JOIN 来替换您的子查询。

# macos - 我可以在 OSX 中使用 iOS 的本地推送通知吗

> ID：11490686
> 
> 赞同：2
> 
> 时间：2012-07-15T09:01:13.907
> 
> 标签：macos, cocoa, notifications, scheduled-tasks

有没有办法让 iOS 的本地 PushNotification 在 OSX 上工作？我有一个程序，即使该程序已关闭，我也希望从本地计算机接收预定通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T05:00:45.203

这是本地通知

```
 - (void)scheduleNotificationWithItem:(ToDoItem *)item interval:(int)minutesBefore {

    NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];

    NSDateComponents *dateComps = [[NSDateComponents alloc] init];

    [dateComps setDay:item.day];

    [dateComps setMonth:item.month];

    [dateComps setYear:item.year];

    [dateComps setHour:item.hour];

    [dateComps setMinute:item.minute];

    NSDate *itemDate = [calendar dateFromComponents:dateComps];

    [dateComps release];

    UILocalNotification *localNotif = [[UILocalNotification alloc] init];

    if (localNotif == nil)

        return;

    localNotif.fireDate = [itemDate addTimeInterval:-(minutesBefore*60)];

    localNotif.timeZone = [NSTimeZone defaultTimeZone];

    localNotif.alertBody =@"Local Notification";

    localNotif.alertAction = NSLocalizedString(@"View Details", nil);

    localNotif.soundName = UILocalNotificationDefaultSoundName;

    localNotif.applicationIconBadgeNumber = 1;

    NSDictionary *infoDict = [NSDictionary dictionaryWithObject:item.eventName forKey:ToDoItemKey];

    localNotif.userInfo = infoDict;

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];

    [localNotif release];

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-15T09:17:56.787

您需要的一切都在这里：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications)

# php - 如何在 PHP 中创建一个采用未分配变量的函数

> ID：11490689
> 
> 赞同：0
> 
> 时间：2012-07-15T09:02:16.387
> 
> 标签：php

我正在尝试制作一个函数，该函数接受一个变量，无论它是否已设置，

就像函数 isset()

```
//we have this array
$array  = array();
isset($array["test"]);//this one is valid 
myFunc($array["test"]);//this one is not valid 
```

我怎样才能让我的函数不设置变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:04:28.020

将参数作为参考传递 [http://php.net/manual/en/language.references.pass.php](http://php.net/manual/en/language.references.pass.php)

```
function myFunc(&$val)
{
    return isset($val);
}

var_dump(myFunc($undefined)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T09:34:40.540

如果您正在使用和朋友，通常会遇到此问题`$_GET`，因为您不能依赖将给定字段传递到您的程序中。

我为此使用了一个实用程序类，因此我可以避免未设置变量的错误，并将默认值填充到其中。

```
<?php
function defArrayElem(&$array, $key, $default=null) {
    if(!isset($array[$key])) {$array[$key]=$default;}
}

//repeat for all the $_GET/$_POST vars you expect...
defArrayElem($_GET,'keyname','default-value');
?> 
```

现在您不必担心检查它们是否已设置。

# eclipse - 如何将 Derby 源代码导入 Eclipse？

> ID：11490691
> 
> 赞同：2
> 
> 时间：2012-07-15T09:02:17.977
> 
> 标签：eclipse, derby

实际上，我已经尝试过 netbeans 并且它有效。但我更喜欢日食。那么，有没有办法将derby源代码导入eclipse呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-21T16:36:11.153

这是完全描述如何做到这一点的页面： [http ://wiki.apache.org/db-derby/BuildingDerby](http://wiki.apache.org/db-derby/BuildingDerby)

这个对我有用。

# ruby-on-rails - 使用 twitter-bootstrap-rails 安装自定义主题

> ID：11490692
> 
> 赞同：3
> 
> 时间：2012-07-15T09:02:18.997
> 
> 标签：ruby-on-rails, twitter-bootstrap, twitter-bootstrap-rails

如何使用 rails 资产管道为 twitter-bootstrap 安装自定义主题？

我应该在资产下创建一个新文件夹并转储主题的所有 css、js、图像和字体文件吗？

**更新：** 我将下载主题中的所有文件（除了 html 示例文件）放入 app/assets 中的文件夹中，并将此文件夹添加到 application.rb 中的资产路径中：

```
config.assets.paths << Rails.root.join("app", "assets", "bootstrap_theme") 
```

我使用主题中的 css 类添加了一些标记，但它没有使用主题..

**更新：**我看到 boostrap 主题中包含已编译的核心引导文件。我是否应该认为它不打算与 Less 一起使用？另外，我是否应该为生产单独预编译每个资产文件（在 application.rb 中）并在每个视图中包含所需的特定文件（并在核心引导文件之后包含它们）？然后我想对他们需要直接在主题文件中进行的主题进行任何覆盖？

**更新：**我认为问题在于我需要在 bootstrap_and_overrides 之后的清单中包含主题 css 文件，假设主题的想法是更改引导程序默认值。但是在标准 bootstrap_and_defaults 之前需要一些主题 css 效果更好。这意味着需要在引导之前和之后手动选择要加载的 css。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T10:46:03.693

我从来没有在 Rails 应用程序中证明过 twitter 引导程序，但我之前搜索过我该怎么做。

如果您安装 gem [less-rails-bootstrap](https://github.com/metaskills/less-rails-bootstrap)或[bootstrap-sass](https://github.com/thomas-mcdonald/bootstrap-sass/)，您可以按照说明在[此处](http://www.sitepoint.com/how-to-customize-twitter-bootstraps-design-in-a-rails-app/)修改主题。

我希望它有所帮助。

# hibernate - 如何映射实体和组件

> ID：11490693
> 
> 赞同：0
> 
> 时间：2012-07-15T09:02:34.043
> 
> 标签：hibernate

我有一个实体 Note 和组件 FavoriteNote，这是表定义：

```
CREATE TABLE NOTE (
  ID INTEGER,
  TITLE VARCHAR(100) CHARACTER SET UTF8,
  CONTENT BLOB SUB_TYPE 1 CHARACTER SET UTF8,
  TYPE_NO INTEGER,
  DEL SMALLINT,
  CREATE_DATE TIMESTAMP,
  UPDATE_DATE TIMESTAMP);

CREATE TABLE FAVORITE (
  NOTE_NO INTEGER NOT NULL,
  DROP_IN_DATE DATE); 
```

和java代码是：

```
public class FavoriteNote {
    private Note note;
    private Date dropInDate;

    public Note getNote() {
        return note;
    }

    public void setNote(Note note) {
        this.note = note;
    }

    public Date getDropInDate() {
        return dropInDate;
    }

    public void setDropInDate(Date dropInDate) {
        this.dropInDate = dropInDate;
    }
}

public class Note implements Serializable {
    private static final long serialVersionUID = -8363339156398741610L;
    private int id;
    private String title;
    private String content;
    private String typeName;
    private int del;
    private int show;
    private NoteType noteType;
    private BeanState beanState;
    private Date createDate;
    private Date updateDate;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getContent() {
        return content;
    }

    public void setContent(String content) {
        this.content = content;
    }

    public int getDel() {
        return del;
    }

    public void setDel(int del) {
        this.del = del;
    }

    public int getShow() {
        return show;
    }

    public void setShow(int show) {
        this.show = show;
    }

    public NoteType getNoteType() {
        return noteType;
    }

    public void setNoteType(NoteType noteType) {
        this.noteType = noteType;
    }

    public String getTypeName() {
        return typeName;
    }

    public void setTypeName(String typeName) {
        this.typeName = typeName;
    }

    public BeanState getState() {
        return beanState;
    }

    public void setState(BeanState beanState) {
        this.beanState = beanState;
    }

    @Override
    public String getClassName() {
        return "Note";
    }

    public Date getCreateDate() {
        return createDate;
    }

    public void setCreateDate(Date createDate) {
        this.createDate = createDate;
    }

    public Date getUpdateDate() {
        return updateDate;
    }

    public void setUpdateDate(Date updateDate) {
        this.updateDate = updateDate;
    }
} 
```

问题是 FavoriateNote 不是 Note 的一部分，它们只是一对一的关联。如何配置关联以使检索所有收藏夹成为可能？最好以xml方式完成。

谢谢

# android - 当 TextView 失效时是否有任何事件发生？

> ID：11490698
> 
> 赞同：1
> 
> 时间：2012-07-15T09:03:50.517
> 
> 标签：android, events, textview, invalidation

我想在我的 TextView 无效时运行一个方法。有什么活动吗？

如果没有，还有其他方法可以抓住它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:22:16.043

您可以使用 onFocusChange 侦听器，并且可以查看所需视图是否获得焦点，并可以检查它的值。

[看看文档是怎么说的。](http://developer.android.com/reference/android/view/View.OnFocusChangeListener.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T17:03:28.970

不，那里没有。我对此一无所知。

# c# - C# 中的斜线和转义问题

> ID：11490703
> 
> 赞同：4
> 
> 时间：2012-07-15T09:04:17.163
> 
> 标签：c#, excel, escaping, slash

我想用 COM 在 C# 中将一些数据写入 Excel，但保存时遇到问题。让我们看看代码：

1.  ```
    workSheet.SaveAs("c:/users/amare/sub.xls"); 
    ```

    上面的代码会报错：

    > “Microsoft Excel 无法打开文件 c://users/amare/sub.xls。”

    但下面的代码工作正常：

2.  ```
    workSheet.SaveAs("c:\\users/amare/sub.xls"); 
    ```

3.  ```
    workSheet.SaveAs(@"c:\users\amare\sub.xls"); 
    ```

现在我对这种情况感到很困惑。我知道 2) 和 3) 是绝对正确的，但我习惯于编写类似 1) 的代码：

```
StreamWriter sw = new StreamWriter("c:/users/amare/desktop/file.txt");
sw.WriteLine("foo-bar");
sw.close(); 
```

这总是很好。所以我想知道为什么这次没有。显然 C# 在 1) 中错误地转义了路径。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T09:12:04.823

显然`workSheet.SaveAs()`对路径进行了自己的验证和修复。因此，您（理所当然地）因使用无效格式而受到惩罚。该格式通常被接受，但“通常”与“总是”不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T09:08:33.167

我已经尝试过您的路径，并且可以肯定，它失败并显示一条消息，指出路径无效或不可写。我还尝试将文件写入 Documents 子文件夹（授予写入权限的位置），但再次出现相同的错误。因此，这绝对是 Excel 互操作解析器内部的一个问题。我认为，在 Windows 中，您应该避免使用此路径分隔符。

如果您使用[逐字](http://msdn.microsoft.com/en-us/library/aa691090%28v=VS.71%29.aspx)定义的字符串，则在字符串前面加上`@`char

```
workSheet.SaveAs(@"c:\users\amare\sub.xls"); 
```

一切都按预期工作。

# php - 仅使用部分文件名在 PHP 中读取图像

> ID：11490704
> 
> 赞同：-1
> 
> 时间：2012-07-15T09:04:17.397
> 
> 标签：php, image, directory

我试图通过仅获取其名称的一部分来读取存储在 PHP 目录中的图像。图像命名如下，

```
AT-1410f1654.jpg
AT-1410_1655.jpg
AT-1410_1656.jpg
AT-1410_1657.jpg
AT-1410_1658.jpg
AT-1410_1659.jpg 
```

我已经尝试了下面的代码，但即使我使用 PHP substr() 方法它也不起作用，但它也不起作用，

```
 $dbImage=$row["pref"];
    $imageName=$dbImage;
    $extension=".jpg";
    $filename=$imageName.$extension;
    echo "$filename+<img src='proppics/$filename'>"; 
```

关于如何做到这一点的任何想法

完整代码

```
$limit=10; 
$con=mysql_connect("localhost","root","");
mysql_select_db("movedb") or die("Unable to select database");
$query="select * FROM properties where `name`='Beata Grande 1' & `catergory`='Villas'& `price`=202800 & `area`='Arenas'& `bedrooms`=2 & `region`='Axarquia'";
$numresults=mysql_query($query,$con);
$numrows=mysql_num_rows($numresults);
$result = mysql_query($query) or die("Couldn't execute query");
echo "<center>";
echo "<p>You searched for: &quot;" . $properties . "&quot;</p>";
echo "<form name=payment action='properties_details.php'>";
echo "Results <br>";
  while ($row= mysql_fetch_array($result)) {
    $id=$row['id'];
    $pid=$row['pref'];
    // Retrieve the balance database fields

      echo "<p>Property ID &nbsp".$pid;
      echo "<br> <p> Name &nbsp";
      echo $row["name"];
      echo "<br>  Properties &nbsp";
      echo $row["catergory"];
      echo "<br> Description &nbsp";
    // Print results
 echo "<br>";
 echo "<input type=submit name=btnbuy value=MoreDetails> "; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:09:05.227

我不是 100% 确定您要达到的目标。但是如果你想在“_”之后或之前只选择文件名的一部分，你可以使用 PHPsexplode() 函数。

在你的情况下写作：

```
print explode("_", $dbImage); 
```

会有类似这样的输出：

```
Array(
    [0] => AT-1410
    [1] => 1655.jpg
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T09:40:06.733

怎么样[`glob`](http://php.net/glob)？

您的问题不够清楚，无法提供更全面的答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T09:15:17.757

首先，使用列出目录中的所有文件`scandir`

[http://php.net/manual/en/function.scandir.php](http://php.net/manual/en/function.scandir.php)

然后使用检查现有前缀`strpos`

[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

```
$dir    = 'propix';
$files  = scandir($dir);
$prefix = '1410';
foreach($files as $file) {

    if(strpos($prefix) !== FALSE) { //here you are supposed to add more...

        echo $file;
    }
} 
```

# c++ - 联合：从联合的一个数据成员中读取以写入另一个

> ID：11490707
> 
> 赞同：1
> 
> 时间：2012-07-15T09:04:33.577
> 
> 标签：c++, unions, strict-aliasing

我知道对于下面的代码，下面的“非法”是未定义的（虽然一些编译器允许它），因为联合成员“a”是活动的，然后我们从联合成员“b”中读取。问题是，“AmILegal”中的代码是否修复了它，还是我在做一些可怕甚至更晦涩的事情？我可以使用 memcpy 来实现相同的效果，还是我在那里调用了另一个未定义的行为？

编辑：也许这个例子不够清楚。我想做的就是激活另一个成员。所以我将浮点数更改为int。虽然看起来很傻，但更接近真实案例。阅读下面的代码。

（是否出于某种原因不允许将一个工会成员复制到另一个工会成员中？）

```
struct Foo
{
    union Bar
    {
        int a[4];
        int b[4];
    };

    void this_is_Illegal()
    {
         a[0]=1;
         a[1]=2;
         a[2]=3;
         a[3]=4;
         std::cout<<b[0]<<b[1]<<b[2]<<b[3];
    }

    void but_is_this_Legal?()
    {
         a[0]=1;
         a[1]=2;
         a[2]=3;
         a[3]=4;

         b[0]=a[0];
         b[1]=a[1];
         b[2]=a[2];
         b[3]=a[3];
         std::cout<<b[0]<<b[1]<<b[2]<<b[3];
    }

    void this_looks_scary_but_is_it?()
    {
         a[0]=1;
         a[1]=2;
         a[2]=3;
         a[3]=4;
         //forget portability for this q, assume sizeof(int)==sizeof(float)
         //maybe memmove works here as well?
         memcpy(b, a, sizeof(int)*4)

         std::cout<<b[0]<<b[1]<<b[2]<<b[3];
    }

}; 
```

如果以上所有内容听起来都不是很有用，请认为 a 实际上是一个与 float[4] 结合的 _m128。位表示始终是准确和正确的。在某个时间点，您将需要实际使用它，并且您需要将它作为浮点数组放在主内存中。“复制指令”实际上是从 _m128 联合成员到 float[4] 成员的 _mm_store_ps。因此，关于 memset 的问题 - 也许这是我需要的更准确的例子......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:13:15.710

第二个函数是完全合法的——但不做同样的事情，因为它会执行一个 int 到 float 的转换，而不是让位保持不变。

老实说，我会坚持第一个 - 行为在技术上是未定义的，但我怀疑它只是为你做正确的事情。

第三个将一种形式的未定义行为切换为另一种形式（一旦您将任意字节写入浮点数，任何事情都可能发生）。但是，如果您知道字节确实代表了一个有效的浮点值，那就没问题了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-15T09:20:31.037

this_is_illegal,this_is_legal？几乎是使用枚举的标准方法；）

但是 memcpy 不起作用，因为 &a 和 &b 由于枚举而位于同一个地址，而 memcpy 什么也不做

因为 &a 和 &b 在同一个地址，你可以用枚举做一些有趣的事情——在你的情况下，将浮点数解释为整数是枚举的内置功能，但不能触发自动转换，因为它们是在同一个地址

您可能想查看**属性**((packed)) 因为它有助于声明协议结构/枚举

# windows - 无法导入到 SVN 本地存储库

> ID：11490708
> 
> 赞同：0
> 
> 时间：2012-07-15T09:04:43.200
> 
> 标签：windows, svn

我想使用 SVN 并阅读它的帮助。我一一按照说明进行操作。

1.  安装 TortoisesSVN
2.  创建文件夹
3.  右键此文件夹和 TortoisesSVN->在此处创建存储库->创建文件夹结构
4.  同一文件夹上的右键 TortoisesSVN->导入
5.  在对话框“file:///D:/developing/Repo/trunk/test”中添加此字符串，其中 Repo 是存储库

我收到此错误消息 ![在此处输入图像描述](../Images/7d84970a0542b8a022973c4dba837ab2.png)

我在谷歌搜索，找不到我做错了什么。还有其他人有类似的问题吗？我的操作系统是win7

编辑（因为错误信息太小）：

> 错误：无法读取文件“D:\developing\Repo\db\txn-protorevs\1-3.rev-lock”：该进程无法访问该文件，因为另一个进程已锁定该文件的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:11:45.737

*导入*包括将项目（源代码）添加到存储库中。您在项目的根目录上调用*Import 。*不在包含 SVN 存储库的目录上。在存储库中导入存储库没有意义。

阅读 TortoiseSVN 帮助的第 4.2 节。（右键单击任何目录，TortoiseSVN - 帮助）

# java - 蒙古数据库。从数据库中提取整数。java.lang.Integer 不能转换为 java.lang.String

> ID：11490710
> 
> 赞同：1
> 
> 时间：2012-07-15T09:05:16.213
> 
> 标签：java, scala, mongodb, casbah

我是 MongoDb 的新手。我试图从数据库中检索数据。这是我的代码的一部分：

```
 dbc(TABLENAME).find ( MongoDBObject (UID -> uid)).toList.foreach {s =>
      val Rollno = s.getAs[String](ROLL).getOrElse ("?") 
```

显然 ROLL 设置为整数，并且我不断收到错误 java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.String 有没有简单的解决方案来获得它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T09:16:54.273

将其作为整数然后使用 toString 怎么样？

```
dbc(TABLENAME).find ( MongoDBObject (UID -> uid)).toList.foreach {s =>
  val Rollno = s.getAs[Int](ROLL).map(_.toString).getOrElse("?") 
```

# android - Android：holder.getSurface() 总是返回 null

> ID：11490711
> 
> 赞同：3
> 
> 时间：2012-07-15T09:05:16.557
> 
> 标签：android, android-layout, surfaceview, surfaceholder

我的视图是一堆普通的小部件和一个表面视图。我不知道为什么在我得到`surfaceholder`SurfaceView 并`getSurface()`在持有人上再次使用后，我总是会返回 null。

这是我的示例代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view);
    }

    @Override
    public void onResume() {
        super.onResume();
        surface = (SurfaceView) findViewById(R.id.surfaceView);
        this.holder = surface.getHolder();

         if (holder.getSurface().isValid()){  // get surface again
             Log.i("Notice","Surface holder is valid");
         }
         else
             Log.i("Notice","Surface holder ISNOT valid");  //Always receive this
        } 
```

当我看到 Android 文档的`getSurface()`方法时。它是这样说的：

> 直接访问表面对象。Surface 可能并不总是可用——例如，当使用 SurfaceView 时，在视图附加到窗口管理器并执行布局以确定 Surface 的尺寸和屏幕位置之前，不会创建持有者的 Surface。因此，您通常需要实现 Callback.surfaceCreated 以了解 Surface 何时可用。

我不太了解这一点，但我知道我错过了一些东西。请为我解释一下，并告诉我`Callback.surfaceCreated`手段，以及如何实施？

谢谢 ：）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-15T11:45:15.617

您正在尝试使用尚不可用的表面。没关系，它在您的`Activity.onCreate`or`Activity.onResume`方法中不可用，因为实际上表面放置在您的 Activity 窗口后面的单独窗口中并且有自己的生命周期。您需要实现[SurfaceHolder.Callback](http://developer.android.com/reference/android/view/SurfaceHolder.Callback.html)以接收有关`Surface`可用性的事件并从单独的线程进行绘图。查看 Android SDK 示例文件夹中的 LunarLander 项目，那里展示了如何正确使用 SurfaceView。

您的回调将如下所示：

```
public class MyCallback implements SurfaceHolder.Callback {
    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, 
        int width, int height) {    
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        // you need to start your drawing thread here
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {  
        // and here you need to stop it
    }
} 
```

并且您需要将此回调设置为 SurfaceHolder：

```
surface.getHolder().addCallback(new MyCallback()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-21T17:28:23.150

我找到了解决方案，这对我有用，感染错误在于选择正确的尺寸，因此在使用 MediaRecorder.setVideoSize() 时使用此方法选择最佳尺寸

```
private static Size chooseOptimalSize(Size[] choices, int width, int height) {
        Size bigEnough = null;
        int minAreaDiff = Integer.MAX_VALUE;
        for (Size option : choices) {
            int diff = (width*height)-(option.getWidth()*option.getHeight()) ;
            if (diff >=0 && diff < minAreaDiff &&
                    option.getWidth() <= width &&
                    option.getHeight() <= height) {
                minAreaDiff = diff;
                bigEnough = option;
            }
        }
        if (bigEnough != null) {
            return bigEnough;
        } else {
            Arrays.sort(choices,new CompareSizeByArea());
            return choices[0];
        }

    } 
```

# php - 使用 jquery 从 json 获取信息

> ID：11490717
> 
> 赞同：0
> 
> 时间：2012-07-15T09:07:14.653
> 
> 标签：php, ajax, json, jquery

无法使用 ajax 从数据库中检索信息。我从这里获取代码：

1.  [http://openenergymonitor.org/emon/node/107](http://openenergymonitor.org/emon/node/107) 此处的代码有效，但只会输出一项
2.  [简单的 Ajax Jquery 脚本 - 如何获取表中每一行的信息？](https://stackoverflow.com/questions/8019489/simple-ajax-jquery-script-how-can-i-get-information-for-each-of-the-rows-in-the) 我试图将它添加到我的代码中，但我无法让它工作。

我正在使用以下 php 从表中获取所有内容：

```
$result = mysql_query("SELECT * FROM voterecords");  

$data = array();
while ( $row = mysql_fetch_row($result) )
{
  $data[] = $row;
}
echo json_encode($data); 
```

如果我导航到该 php 页面，它将输出以下内容：

```
[["68","1234","0","1234",""],["69","added with ajax","0","this item was added using ajax",""]] 
```

上面的格式如下：id,title,votes,description,owner

我认为这一切都有效，但我不能确定，因为我不知道 JSON 应该是什么样子。

* * *

好的，现在这是 jquery，它应该从 JSON 中检索信息并将其放入 html 元素#output

```
$(function () 
  {

    $.ajax({                                      
      url: 'retrieve.php', data: "", dataType: 'json',  success: function(rows)
      {
        for (var i in rows)
        {
         var row = rows[i];          

          var id = row[0];              
          var name = row[1];
          var votes = row[2];  
          var info = row[3]; 

          $('#output').append("<b>id: </b>"+id+"<b> name: </b>"+name+"<b> votes: </b>"+votes+"<b> info: </b>"+info)
                      .append("<hr />");
    } 
  } 
}); 
```

我期待这会输出所有信息，但没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:13:59.583

您的代码很好，除了`)`回调函数缺少关闭。

此外，在 JavaScript 中，最好将左大括号放在同一行，而不是下一行，这在其他一些语言中很常见。

更正/清理代码：

```
$(function () {
    $.ajax({url: 'retrieve.php', dataType: 'json'}).done(function(rows) {
        for (var i in rows) {
            var row = rows[i];
            var id = row[0];
            var name = row[1];
            var votes = row[2];
            var info = row[3];
            $('#output')
                .append("<b>id: </b>"+id+"<b> name: </b>"+name+"<b> votes: </b>"+votes+"<b> info: </b>"+info)
                .append("<hr />");
        }
    });
}); 
```

# c# - 插入数据并用新数据刷新数据网格后关闭弹出窗口

> ID：11490721
> 
> 赞同：2
> 
> 时间：2012-07-15T09:07:35.943
> 
> 标签：c#, javascript, asp.net

我正在使用 asp.net。我有一个主页和一个弹出窗口。当我单击按钮时，将出现弹出窗口。弹出窗口包含两个文本字段和两个按钮。一个是提交数据的提交按钮()，另一个是关闭弹窗的简单输入型按钮。

当我单击取消按钮时，它会关闭弹出窗口。但是当我在文本框中填写信息并单击提交时，它会在服务器中插入数据，但弹出窗口没有关闭。我无法正确查看页面。数据网格正确刷新，但我无法在页面上执行操作。为此，我必须手动刷新页面。

请告诉我如何在将数据插入数据库后关闭 asp.net 中的弹出窗口。

这是显示和隐藏弹出窗口的代码：

```
<script language="javascript" type="text/javascript" src="../JS/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="../JS/modalpopup.js"></script>
<style>
  *html #dvPopup {
    top: expression(eval(document.documentElement.scrollTop)) !important;
  }
</style>
<table style="background-color: transparent" cellspacing="0" cellpadding="0" width="100%">
  <tr>
    <td class="heder" valign="middle" height="30" style="padding-left: 10px" colspan="2">
      <img height="13" hspace="5" src="../images/arrow.gif" width="13" align="absMiddle">
      &nbsp;<strong>Destination Management</strong>&nbsp;<br />
    </td>
  </tr>
  <tr>
    <td>Destination Name :
      <asp:TextBox ID="txtDestinationName" runat="server"></asp:TextBox>
      <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server"
        ErrorMessage="*" ControlToValidate="txtDestinationName">
      </asp:RequiredFieldValidator>
    </td>
    <td>
      <asp:Button ID="btnAdd" runat="server" CssClass="BUTTON" Text="Add"
        Width="70px" OnClick="btnAdd_Click" >
      </asp:Button>&nbsp;
      <input type="button" id="Button1" value="Close"
        onclick="HideModalPopup('dvPopup'); return false;" />
    </td>
  </tr>
</table> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:23:56.857

提交后弹出窗口不会关闭，因为您没有在提交按钮上调用它

您将在发布到服务器后调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T09:22:47.527

在事件单击处理程序中的服务器端非常简单，

将脚本资源添加`HideModalPopup('dvPopup');`到您的页面。

[这](http://msdn.microsoft.com/en-us/library/ms178207.aspx)应该对你有用

# android - AOSP 内核和 Stock 内核之间的技术差异

> ID：11490729
> 
> 赞同：1
> 
> 时间：2012-07-15T09:09:51.203
> 
> 标签：android, kernel, android-source

有人知道股票和aosp内核之间的真正区别吗？如果知道请详细描述或给我任何参考。
目前我想构建一个基于 htc 股票内核的 aosp 内核。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:31:21.273

Android 使用略有不同的方法。为了与硬件交互，它在驱动程序和 Linux 内核之间有一个特殊的中间层（称为硬件抽象层）。因此，即使您将内核移植到新设备上，也不意味着驱动程序可以在那里工作。我想你明白这一点。

至于问题本身，我可以推荐你找一本书 Karim Yaghmour “Embedded Android”。考虑到股票 Linux 内核和 Android 修改之间的主要区别。

# jquery - jQuery工具可滚动导航点

> ID：11490741
> 
> 赞同：0
> 
> 时间：2012-07-15T09:12:10.193
> 
> 标签：jquery, navigation, jquery-scrollable

[http://jquerytools.org/demos/scrollable/index.html](http://jquerytools.org/demos/scrollable/index.html)

我的问题是：如何通过单击点来实现滚动不是一个而是四个元素。左、右按钮应每次单击滚动一项。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:40:06.430

看这个演示，我相信你指的是~~[http://jquerytools.org/demos/scrollable/site-navigation.html](http://jquerytools.org/demos/scrollable/site-navigation.html)~~。

**2016 年 1 月 7 日更新**
上面的链接已失效。现在都在 github 下：http: [//jquerytools.github.io/demos/scrollable/site-navigation.html](http://jquerytools.github.io/demos/scrollable/site-navigation.html)。

# c++ - 对方阵进行排序

> ID：11490742
> 
> 赞同：2
> 
> 时间：2012-07-15T09:12:19.363
> 
> 标签：c++, algorithm, sorting, matrix

我正在解决一个难题，如下所示。

有一个 5x5 矩阵，其中一个元素为“-”，所有其他元素为整数。
我可以用“-”直线（不是对角线）交换任何元素。
最后，我必须对矩阵进行排序。

这些是我遵循的步骤：

```
1) Receive user input for 5x5 matrix
2) Locate the position of "-"
3) Find the eligible candidates to be swapped with "-"
4) Apply some algorithm and find the most eligible candidate
5) Swap the element with "-"
6) Repeat the steps 3-5 until matrix is sorted 
```

我已经完成了第 3 步。但是我不知道第 4 步要应用什么逻辑。有人可以给出一些想法，如何找到最符合条件的候选人？

**例子**

```
Input Matrix

17   7   9   18   3
15   11  1   12   14
2    -   4   21   24
5    19  6   18   8
10   13  16  19   20

Eligible candidates to swap with "-" are 11,2,4,19

Sorted matrix

1   2   3   4   5
6   7   8   9   10
11  12  13  14  15
16  17  18  19  20
21  22  23  24  - 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T09:23:04.917

这不是最简单的任务。这里有两个链接：

[http://en.wikipedia.org/wiki/N-puzzle#Solvability](http://en.wikipedia.org/wiki/N-puzzle#Solvability)

[http://cseweb.ucsd.edu/~ccalabro/essays/15_puzzle.pdf](http://cseweb.ucsd.edu/~ccalabro/essays/15_puzzle.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:19:02.030

最好使用带有曼哈顿距离启发式的 A* 等 AI 算法。

对于 A* 算法，请阅读[此处](http://en.wikipedia.org/wiki/A%2a_search_algorithm)

对于曼哈顿距离启发式阅读[here](http://en.wikipedia.org/wiki/Heuristic_function)

# linux - 清理感染 c3284d 病毒的服务器，使用搜索和替换

> ID：11490744
> 
> 赞同：2
> 
> 时间：2012-07-15T09:12:28.020
> 
> 标签：linux, bash, ubuntu, terminal

我遇到了 Notorious c3284d 病毒的问题。它修改了几乎所有可以找到的 html/php/js 文件。

我已经更改了服务器上的所有密码和用户，所以如果它是一个被入侵的帐户，它应该已经解决了这个问题，但我仍然在努力完全删除它。

我能够使用一个简单的`sudo grep -R "#c3284d#" /home`命令找到所有受感染的文件。

但我需要一种快速的方法来搜索和*替换*它。

病毒签名是这一行：

> “＃c3284d＃” 回波（gzinflate（BASE64_DECODE（ “VVHBboMwDL1X6j / kZtA6GKgMdaOVummHnfYB6xQFYkokmqSJS + nfD1hXbb7ZfvZ7fi585ZSlzXzWCcf4ka2ZNNXpgJqiyqEgfGtxzAJQtRMHhHAxn7EhuB6w4JG2RE6VJ0J4ns / 48ZPrrwC8q2DBoCGyT3HcoHBkamtajDRS3B / ayDYWwmki8nQZGtZ4RcpMa0XpTXtbeQWclaRm7CaPtv9LNgkrjZPoBlItOrUXZFx08ui2 + / EUpSX2H3UA8kHkIlmmZZ5lSZ5Kkad1nS9FIqo0S1YrCNkdS / 7parGmkfU + y1b5D / HNorNThAEUUnVMyfUOOJdOyG4HmyIeipvpxBt8j3S18 + XyLoNfNISRsBa1fG1UKwN + HIeK + Pqabw ==”）））; “#/c3284d#”

当回波线可以改变和变化，但它总是以 开始`#c32..#`和结束`#/c3....#`。

我只想用什么来代替它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:24:14.017

```
awk 'BEGIN { clean=1 } /#c3284d#/ { clean=0 } /#\/c3284d#/ { clean=1 } { if (clean==1 && match($0,"#\/c3284d#") == 0) { print $0 } }' dirty-file > clean-file 
```

这是一口，但它的伎俩：

```
$ cat <<'EOF' | awk 'BEGIN { clean=1 } /#c3284d#/ { clean=0 } /#\/c3284d#/ { clean=1 } { if (clean==1 && match($0,"#\/c3284d#") == 0) { print $0 } }'
> foo
> #c3284d#
> bar
> baz
> #/c3284d#
> quux
> EOF
foo
quux 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:48:04.600

查找所有受影响文件的简单方法：

```
grep -H -r "c3284d" /home/user 
```

此恶意软件代码来自受感染的客户端，该客户端具有以明文形式存储的 FTP 密码。该恶意软件能够抓取 FTP 登录信息，然后自动开始将广告代码注入文件。绝对应该是一个完整的审计——但如果你很幸运并且及时发现了它，它很可能不是来自服务器本身。

# iphone - 如何将包含多个字符串的 NSData 对象插入到 NSMutable 对象中

> ID：11490747
> 
> 赞同：0
> 
> 时间：2012-07-15T09:13:16.150
> 
> 标签：iphone, nsmutablearray, nsdata

我收到一个包含多个字符串的 NSData 对象，我想知道如何将这些字符串分别插入到 NSMutableArray 中。我想 InsertObject 函数不起作用，因为它将数据作为一个对象插入到唯一索引中。

# c# - 通过 GMail 和 .NET 4 发送电子邮件

> ID：11490749
> 
> 赞同：1
> 
> 时间：2012-07-15T09:13:29.263
> 
> 标签：c#, c#-4.0, .net-4.0, smtp, gmail

.NET 4 在发送电子邮件时是否有任何问题？我有一个 .NET 3.5 解决方案，它正在工作，然后将该解决方案迁移到 .NET 4，但它不起作用；没有改变！

注意：我得到了这个例外：

> System.Net.Mail.SmtpException：SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.5.1 需要身份验证。
> 在 System.Net.Mail.MailCommand.Send(SmtpConnection conn, Byte[] command, String from)
> at System.Net.Mail.SmtpTransport的 System.Net.Mail.MailCommand.CheckResponse(SmtpStatusCode statusCode, String response) 了解更多信息System.Net.Mail.SmtpClient.Send( MailMessage
> message)
> at ...

这是我的代码：

```
public static void SendEmail(
    this Email email)
{
    if (email.MailingSettings == null) throw new ArgumentNullException("email.MailingSettings", "specify email.MailingSettings");

    var settings = email.MailingSettings;

    if (string.IsNullOrEmpty(email.Sender)) throw new ArgumentException("email.Sender", "specify a sender");
    if (email.Recipients == null) throw new ArgumentNullException("email.Recipients", "specify at least a recipient");
    if (email.Recipients.Length == 0) throw new ArgumentNullException("email.Recipients", "specify at least a recipient");
    if (string.IsNullOrEmpty(settings.SMTPHost)) throw new ArgumentException("email.SMTPHost", "specify email.SMTPHost");

    var mail = new MailMessage();

    if (string.IsNullOrEmpty(email.SenderDisplayName))
        mail.From = new MailAddress(email.Sender);
    else
        mail.From = new MailAddress(email.Sender, email.SenderDisplayName);

    if (!string.IsNullOrEmpty(email.ReplyTo))
    {
        if (string.IsNullOrEmpty(email.ReplyToDisplayName))
        {
            mail.ReplyToList.Add(new MailAddress(email.ReplyTo));
        }
        else
        {
            mail.ReplyToList.Add(new MailAddress(email.ReplyTo, email.ReplyToDisplayName));
        }
    }

    foreach (string recipient in email.Recipients)
        mail.To.Add(new MailAddress(recipient));

    mail.Subject = email.Subject;
    mail.Body = email.Body;
    mail.IsBodyHtml = settings.IsBodyHtml;

    if (email.CC != null && email.CC.Length > 0)
        foreach (string cci in email.CC)
            mail.CC.Add(cci);

    if (email.BCC != null && email.BCC.Length > 0)
        foreach (string bcci in email.BCC)
            mail.Bcc.Add(bcci);

    if (email.Attachments != null)
        foreach (var ifn in email.Attachments)
            mail.Attachments.Add(
                new Attachment(
                    new MemoryStream(
                        ifn.Content),
                    ifn.FileName));

    var smtpPort = settings.SMTPPort > 0 ? settings.SMTPPort : 25;

    var smtpClient = new SmtpClient(settings.SMTPHost, smtpPort);
    smtpClient.EnableSsl = settings.EnableSsl;

    if (!string.IsNullOrEmpty(settings.SMTPUser))
    {
        smtpClient.UseDefaultCredentials = false;

        var smtpPassword = settings.SMTPPassword == null ? string.Empty : settings.SMTPPassword;

        NetworkCredential netCred;
        if (string.IsNullOrEmpty(settings.SMTPDomain))
            netCred = new NetworkCredential(settings.SMTPUser, smtpPassword);
        else
            netCred = new NetworkCredential(settings.SMTPUser, smtpPassword, settings.SMTPDomain);

        smtpClient.Credentials = netCred;
    }
    else
        smtpClient.Credentials = CredentialCache.DefaultNetworkCredentials;

    smtpClient.Timeout = 180 * 1000;
    smtpClient.DeliveryMethod = SmtpDeliveryMethod.Network;

    ServicePointManager.ServerCertificateValidationCallback =
        delegate(object s, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
        { return true; };

    smtpClient.Send(mail);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:03:45.183

如果一切*都*按照发布的代码和*评论*，那么我可以说你已经打开了你的[谷歌帐户](http://support.google.com/a/bin/answer.py?hl=en&answer=175197)[的两步验证](http://www.codinghorror.com/blog/2012/04/make-your-email-hacker-proof.html)，在这种情况下你需要生成[特定于应用程序的密码。](http://support.google.com/accounts/bin/answer.py?hl=en&answer=185833)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:07:20.413

此代码正确且有效。问题出在 GMail 方面并已解决（未检测到原因和方式）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-22T04:01:08.807

尝试使用这个：

```
try
{
    string smtpAddress = "smtp.gmail.com";
    int portNumber = 587;
    bool enableSSL = true;
    string emailFrom = "senderemail@gmail.com";
    string password = "password";
    string emailTo = "receiver@gmail.com";
    string subject = "Halo!";
    string body = "Halo, Mr. SMTP";
    MailMessage mail = new MailMessage();
    mail.From = new MailAddress(emailFrom);
    mail.To.Add(emailTo);
    mail.Subject = subject;
    mail.Body = body;
    mail.IsBodyHtml = true;

    using (SmtpClient smtp = new SmtpClient(smtpAddress, portNumber))
    {
        smtp.Credentials = new NetworkCredential(emailFrom, password);
        smtp.EnableSsl = enableSSL;
        smtp.Send(mail);
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.ToString());
} 
```

*请注意，在此之前您需要激活此功能：[https ://myaccount.google.com/lesssecureapps](https://myaccount.google.com/lesssecureapps)

![不太安全的应用程序](../Images/8193ecaa23db42d6c332f08057c561bf.png)

然后构建并运行代码.. 太棒了.. :)

# git - 如何将更改合并回 HEAD

> ID：11490750
> 
> 赞同：3
> 
> 时间：2012-07-15T09:13:35.877
> 
> 标签：git, github

这是我所做的

我创建一个分支`abc`。然后我创建了两个文本文件`one.txt and two.txt`。然后我将它们提交给分支`abc`。然后我从分支中删除文件 one.txt 并将这些更改提交到分支。**现在我想将这些更改合并回 HEAD**。我该怎么做最后一部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T09:16:07.467

首先，改回`master`分支：

```
git checkout master 
```

然后，合并分支`abc`：

```
git merge abc 
```

# powershell - Powershell删除项目不起作用

> ID：11490753
> 
> 赞同：5
> 
> 时间：2012-07-15T09:14:05.043
> 
> 标签：powershell

为什么是

```
dir E:\Music -File -Exclude *.mp3 -Recurse | foreach {del $_.FullName} 
```

不工作？我测试了我能想到的所有可能性，但仍然无法正常工作。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T08:51:37.917

我有同样的问题，我使用以下方法修复它：

```
dir E:\Music -File -Exclude *.mp3 -Recurse | Remove-Item 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T09:28:47.680

该命令看起来不错，应该可以工作。如果您将管道移除到 foreach-object，您会得到任何输出吗？您使用的是 PowerShell v3 吗？试试这个，你会收到 WhatIf 消息吗？

```
dir E:\Music -File -Exclude *.mp3 -Recurse | del -WhatIf 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T02:57:21.040

请参阅以下命令中的示例 4

```
 get-help remove-item -Examples 
```

“因为这个 cmdlet 中的 Recurse 参数有问题……”

会是我的猜测。

# php - 填充另一个输入框时动态添加输入框

> ID：11490756
> 
> 赞同：0
> 
> 时间：2012-07-15T09:15:16.617
> 
> 标签：php, javascript, html

我有这样的表格

```
<FORM method="post">
<TABLE>
<TR>
    <TD>Username</TD>
    <TD><INPUT type="text" value="" name="username" title="Enter Username"/><TD>
</TR>
<TR>
    <TD>Age</TD>
    <TD><INPUT type="text" value="" name="username" title="Enter Age"/><TD>
</TR>
<TR>
    <TD>City</TD>
    <TD><INPUT type="text" value="" name="username" title="Enter City"/><TD>
</TR>
<TR>
    <TD>Comment</TD>
    <TD><INPUT type="text" value="" name="username" title="Enter Comment"/><TD>
</TR>
</TABLE>
</FORM> 
```

我想要的是当用户在填写评论框后，当他们按下回车键时，另一个输入框必须使用 javascript 显示带有评论标签。

谁能帮我写代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:19:27.840

首先，表单中的所有输入名称都是相同的（name="username"），您必须为每个输入指定一个唯一名称。

所以将评论输入更改为

```
<TR id="comment">
    <TD>Comment</TD>
    <TD><INPUT type="text" value="" name="comment[]" title="Enter Comment"/><TD>
</TR> 
```

请注意，我将 id 添加到 TR，因此使用 jquery 更容易锁定它，并且我还将输入名称更改为，`comment[]`因为如果您向 dom 添加新评论，您将拥有一个评论数组。

如果新评论应该有一个新名称，例如：“comment2”，您可以将其更改为“评论”

现在，使用 Jquery 执行以下操作：

```
$(document).keypress(function(e) {
    //catch enter event
    if(e.which == 13) {
         var $comment = $('#comments);
        //check that the user entered something in the comment input
        if($comment.find('input').val().length > 0)
        {
            //create new comment element and attach it to DOM
            var $newComment = $comment.clone().removeAttr('id');
            $('form table').append($newComment);
        }
    }
}); 
```

让我知道这是否有帮助或您是否需要更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:20:45.013

试试这个我的朋友：

```
<FORM method="post">
    <TABLE>
    <TR>
        <TD>Username</TD>
        <TD><INPUT type="text" value="" name="username" title="Enter Username"/><TD>
    </TR>
    <TR>
        <TD>Age</TD>
        <TD><INPUT type="text" value="" name="age" title="Enter Age"/><TD>
    </TR>
    <TR>
        <TD>City</TD>
        <TD><INPUT type="text" value="" name="city" title="Enter City"/><TD>
    </TR>
    <TR>
        <TD>Comment</TD>
        <TD><INPUT class="comment" type="text" value="" name="comment[]" title="Enter Comment"/><TD>
    </TR>
    </TABLE>
</FORM>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
    $(function(){
        $('.comment').live('keydown', function(e){
            $field = $(this);
            // capture enter key being pressed
            if (e.which == 13)
            {
                $html = $(this).parents('tr').clone();
                $html.find('input').val('');
                $html.appendTo($field.parents('table'));
            }
        });
    });
</script> 
```

# linux - 循环 Linux Shell 的空主体

> ID：11490760
> 
> 赞同：15
> 
> 时间：2012-07-15T09:16:08.303
> 
> 标签：linux, shell, loops, ubuntu

嗨，我想写并清空正文循环。我只希望循环计数器增加，所以我希望 cpu 在没有任何 IO 操作的情况下保持忙碌。这是我写的，但它给了我一个错误：

```
#!/bin/bash
for ((  i = 0 ;  i <= 1000000;  i++  ))
do
done

root@ubuntu:~# ./forLoop
./forLoop: line 4: syntax error near unexpected token `done'
./forLoop: line 4: `done' 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-15T09:22:47.170

您必须在循环体中至少指定一个命令。

用于此类目的的最佳命令是冒号`:`，通常用作[无操作 shell 命令](http://tldp.org/LDP/abs/html/special-chars.html#COLON0REF)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T09:21:41.477

您可以在循环中放置一个 no op 命令，例如`true`or `false`（分别不成功或不成功地执行任何操作）。

这将是一个紧密的循环，并且会烧毁 CPU。除非你想在寒冷的早晨预热你的电脑，否则你可以简单地说`i=1000000`并具有与循环相同的效果。

你想达到什么目的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T09:22:41.333

```
#!/bin/bash
let i=0 
while [[ $i -le 1000000 ]]; do
  let i++ 
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T09:24:19.407

`sleep x`如果你想延迟 x 秒，你可以使用。

# ruby-on-rails - Rails：获取或发布获取ID列表？

> ID：11490777
> 
> 赞同：1
> 
> 时间：2012-07-15T09:18:00.447
> 
> 标签：ruby-on-rails, rest

我有一个巨大的项目列表，旁边有复选框，允许用户选择他们想要打印的项目。

当用户选择了一堆项目并单击打印时，我将发送一个 GET 请求，其中包含在查询字符串中构建的代码：

```
/registration_codes.pdf?ids[]=1&ids[]=5&ids[]=18... 
```

问题是，当它变得太长时，它会抛出一个异常，说查询字符串太长。另外，它该死的丑陋。

显然这是 GET 的问题，但如果我要遵循“RESTful”规则，那么 POST 甚至 PUT 或 DELETE 在这里都没有意义。

任何人都可以提出一种更好的方法来处理这个问题，同时又是 RESTful，还是我应该打破规则并做一个 POST 来代替？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:24:43.707

明显的：

*   将 "ids[]=" 更改为 "i=" - 它已经为您节省了 +- 50% 的空间。
*   使用不同的编码`ids[]=1,5,18,...`

此外，如果您有那么多复选框，似乎...也许您做错了什么。

还有许多其他压缩数据的方法：以十六进制或 base64 表示形式编码的位图。甚至疼痛位图可能就足够了并且具有确定的长度：

```
id=1000100000000010000... 
```

与十六进制相同

```
id=880fa0... 
```

# ruby - Chef 和 ruby 模板 - 如何循环键值对？

> ID：11490781
> 
> 赞同：10
> 
> 时间：2012-07-15T09:18:31.003
> 
> 标签：ruby, chef-infra

1）我有一个数据包如下：

```
 "zookeeper":{
        "server1":"111.111.111.111",
        "server2":"222.222.222.222"
        }, 
```

2）在我的食谱中，我得到如下哈希。

```
data_bag("mydb")
db = data_bag_item("mydb", "rtb")
ZOOKEEPER = db['zookeeper'] 
```

3）在我的食谱中，我还有一个模板如下：

```
template "/etc/zookeeper/conf/zoo.cfg" do
  path "/etc/zookeeper/conf/"
  source "zoo.cfg.erb"
  owner "root"
  group "root"
  mode "0644"
 variables :zookeeper => #{ZOOKEEPER}
end 
```

4）我需要让我的模板看起来像这样

```
server.1=111.111.111.111:2888:3888
server.2=222.222.222.222:2888:3888 
```

我的问题是这个。如何将哈希传递给模板，以便循环遍历哈希并创建模板？我不是一个强大的 ruby​​ 编码器。

例如：

```
count = 1
for server, ipaddress in zookeeper:
      server.count=ipaddress:2888:3888
      count = count + 1 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-15T09:47:44.073

您的设置中存在一些轻微的不一致。在您的数据包中，您为 IP 地址分配一个名称（通过在 JSON 中使用哈希）。但是，您似乎根本没有在生成的模板中使用该名称。这有一些您应该注意的含义：

当使用关联数组（在 Ruby 中称为哈希或在 Javascript 中称为对象）时，元素的顺序通常不会保留，并且在添加其他元素时会发生显着变化。虽然在 Ruby 1.9 上做了一些努力来在遍历散列时保留插入顺序，但您通常不应该依赖它。这导致了两种可能的替代方案来改进您的数据包。选择哪一个取决于您的实际用例：

*   使用数组而不是哈希。在数组中，保证保持顺序。如果您不使用该名称（即原始哈希中的密钥），您可以简单地使用哈希并在此处安全。走这条路时，我们可以遍历模板中的数组并从中生成计数。
*   如果顺序无关紧要，您应该使用散列中的键将服务器命名为生成到您的模板中。现在，您`server<Number>`在数据包中使用，但`server.<Number>`在模板中使用。这样，我们可以使用密钥来命名您的服务器，并可能覆盖生成的名称。

### 使用数组

当在你的数据包中使用数组时，即当你有这样的东西时：

```
"zookeeper": [
  "111.111.111.111",
  "222.222.222.222"
], 
```

您可以在模板中像这样循环数组：

```
<% @zookeeper.each_with_index do |ipaddress, index| %>
<%= "server.#{index}=#{ipaddress}:2888:3888" %>
<% end %> 
```

这使用[ERB 模板语言](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)来创建您的文件。它使用[each_with_index](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_with_index)方法迭代数组中的每个元素。

### 使用哈希

改用散列变体时，假设您已更改数据包中的键以匹配最终生成文件中的语法，您可以像这样循环散列：

```
<% @zookeeper.each_pair do |name, ipaddress| %>
<%= "#{name}=#{ipaddress}:2888:3888" %>
<% end %> 
```

这使用 Hash 的[each_pair 方法](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-each_pair)循环每个键值对，从而为这些对中的每一个生成一行输出。

### 将数据传递给模板

最后，您将数据传递给配方中的模板的语法很奇怪。一开始，你不应该使用以大写字母开头的变量名（比如你的`ZOOKEEPER`变量）。在 Ruby 中，这些标识常量（如值常量、类、模块……）。请改用小写名称。Ruby 按照约定使用snake_case 作为变量名。

将值传递给模板时，您可以只传递变量：

```
db = data_bag_item("mydb", "rtb")
zookeeper = db['zookeeper']

template "/etc/zookeeper/conf/zoo.cfg" do
  path "/etc/zookeeper/conf/"
  source "zoo.cfg.erb"
  owner "root"
  group "root"
  mode "0644"
  variables :zookeeper => zookeeper
end 
```

# image - CSS - 图像忽略流体容器中的最大高度 - jsFiddle里面

> ID：11490783
> 
> 赞同：2
> 
> 时间：2012-07-15T09:18:57.550
> 
> 标签：image, css

示例：http : [//jsfiddle.net/vjqjv/7/](http://jsfiddle.net/vjqjv/7/)

我有一个容器内的图像（请参阅 jsFiddle 中的#slider-section），它具有流体高度和固定的最大高度。

我已将图像的最大高度和最大宽度设置为 100%（请参阅#slider-img）。

问题：当浏览器窗口超过一定宽度时，图像会忽略 max-width 和 max-height 设置，只会变得比其容器大。

如果你打开jsFiddle并扩大浏览器的宽度，你可以看到它。

目标是让图像永远不会超过其容器的宽度和高度，并保持其纵横比。

这可以通过给容器（#slider-section）一个固定的高度来实现。然而，这对我来说不是一个可能的解决方案，因为它需要是一个流体高度。

有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T11:46:23.887

这是你需要的吗？ [http://jsfiddle.net/vjqjv/10/](http://jsfiddle.net/vjqjv/10/)

HTML：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
    <title>test</title>
</head>

<body>
    <section id="slider-section" class="clearfix">
        <div id="slider-img-container">
            <img id="slider-img" src="http://s1.directupload.net/images/120715/jy5nvhce.png" alt=""/></div>
        <div id="slider-div-remaining" class="slider-div">
            <div>
                <h1>empfang</h1>
                <p>Der Empfangsbereich - weil es für den ersten Eindruck keine zweite Chance gibt!</p>
            </div>
        </div>
    </section>
</body>
</html>​ 
```

CSS：

```
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
    border: 0 none;
    font: inherit;
    margin: 0;
    padding: 0;
    vertical-align: baseline;
}
article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none outside none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after, q:before, q:after {
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}
a
{
    text-decoration: none;
    color: black;
}
html, body 
{
    height: 100%; 
    width: 100%; 
    margin: 0; 
}
#slider-section
{
    height: 58.3658%;
}
#slider-img-container
{
    float: left;
    height: 100%;
    margin-right:5px;
}
#slider-img
{
    max-height: 100%;
    display: block;
    max-width:100%;
}

.clearfix::after {
clear: both;
}
.clearfix::before, .clearfix::after {
content: "";
display: table;
font-size: 0;
height: 0;
line-height: 0;
visibility: hidden;
}
​ 
```

# objective-c - 发送到已释放实例的消息 ,,, [__NSArrayI respondsToSelector:]

> ID：11490785
> 
> 赞同：3
> 
> 时间：2012-07-15T09:19:22.917
> 
> 标签：objective-c, ios, memory-management

我有这个带有`NSArray`对象 userIDs的实现文件

```
NSArray *userIDs;
NSInteger friendID;

@implementation TableViewController

-(void)reciveFriendsIDs:(NSArray *)array
 {
userIDs = [NSArray arrayWithArray:array];
 }

-(NSString *)getFriendId
{
 return [userIDs objectAtIndex:friendID];
}
.
.
.
@end 
```

并且该方法`-(NSString *)getFriendId`从另一个类中调用它，如下所示：

```
TableViewController *tableController = [[TableViewController alloc]init];
NSString *fid = [tableController getFriendId]; 
```

但我有一个错误说“-[__NSArrayI respondsToSelector:]: message sent to deallocated instance 0x20320200”，编译器在这一行指出错误：

```
return [userIDs objectAtIndex:friendID]; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T09:26:03.813

您正在使用 arrayWithArray 静态方法分配 NSArray。

通过这种方式，它被添加到自动释放池中，并且保留计数将为 0。要么保留它，要么使用 [[NSArray alloc] init] 手动分配它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T21:37:40.877

我在网上遇到了同样的例外

```
 if(self.arrTypes != nil) 
```

在代码中的不同位置使用以下行的原因

```
 [self.arrTypes release]; 
```

并将此代码替换为

```
 self.arrTypes = nil; 
```

解决了这个问题。

# java - java - 如何在java中将大于999 999 999的数字作为参数传递

> ID：11490786
> 
> 赞同：3
> 
> 时间：2012-07-15T09:19:27.900
> 
> 标签：java

我可以在java中传递大于999 999 999的数字作为参数吗？

当我这样做时，它会给出编译器错误，类型的文字 999 999 999 9 超出范围

```
 passNumber(9999999999);

 public String passNumber(long number){
     if(number > 999999999)
         throw new BigNumberException("Number too large")
 } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T09:21:30.627

这是因为 9,999,999,999 被编译器视为一个`int`并且大于[`Integer.MAX_VALUE`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#MAX_VALUE)(2,147,483,647)。

您可以使用`long`: `9999999999L`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-15T09:21:51.377

用于`9999999999L`告诉编译器它是一个长文本，而不是一个 int 文本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-15T09:22:14.047

这是因为 90 亿超出了整数范围（有符号 int 最高为 2,147,483,647，无符号整数最高为 4,294,967,295）。

[在这里查看](http://en.wikipedia.org/wiki/Integer_%28computer_science%29)以了解更多信息。

# java - Java RMI java.security.AccessControlException：访问被拒绝

> ID：11490788
> 
> 赞同：0
> 
> 时间：2012-07-15T09:19:42.453
> 
> 标签：java, rmi

我正在使用 Java RMI 编写客户端-服务器程序，但出现错误：

> java.security.AccessControlException：访问被拒绝（“java.net.SocketPermission”“127.0.0.1:1099”“connect,resolve”）

我的代码如下所示：

```
package xxx;

import java.rmi.Naming;
import java.rmi.RemoteException;

public class Server extends Engine implements RemoteInterface {

public Server() {
    super();

    if(System.getSecurityManager() == null) {
        System.setSecurityManager(new SecurityManager());
    }

    try {
        Naming.rebind("Test", this);

        System.out.println("Bound in registry!");
    } catch(Exception ex) {
        System.out.println(ex);
    }
}

@Override
public void test() throws RemoteException {
    System.out.println("test() invoked");
}
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:03:45.583

我忘了添加注册表并实现可序列化。问题解决了。我还删除了 SecurityManager。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:25:53.057

您已经安装了 SecurityManager，但您没有授予自己足够的权限来执行此代码。

为什么你认为你需要一个 SecurityManager？除非您打算运行上传的代码，否则我会摆脱它

# ios5 - Phonegap后台任务

> ID：11490789
> 
> 赞同：2
> 
> 时间：2012-07-15T09:20:13.123
> 
> 标签：ios5, cordova, ios4

我正在开发一个 iOS phonegap 应用程序，它从 node.js/socket.io 服务器接收消息。除非应用程序“暂停”，否则一切正常。用户必须重新激活应用程序才能看到传入的消息。仅当应用程序处于活动状态时才会引发警报。

即使应用程序被挂起，是否有任何解决方法来引发警报消息。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:16:08.213

经过长时间的研究和一些测试，如果应用程序不跟踪本地化、使用 voip、播放音乐和有限数量的其他场景……至少在 iOS 上，它似乎是不可能让应用程序在后台运行的。我将改用 APNS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T12:53:16.600

在 iOS 8 上，您可以通过通知或时间间隔唤醒应用程序，然后例如 performFetchWithCompletionHandler

# android - OpenGL ES Android 载入画面

> ID：11490794
> 
> 赞同：2
> 
> 时间：2012-07-15T09:20:50.120
> 
> 标签：android, opengl-es

我正在创建一个基于 OpenGL 的 2D 游戏。我想创建一个加载屏幕来加载我的资产。我想画一些东西来向用户展示正在加载的东西。但我了解到我不能使用像 asynctask 这样的单独线程来加载我的纹理。所以我被困在那里。如何创建加载屏幕来加载我的资产？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T09:35:52.627

也许您可以使用类似于[Threading textures load process for android opengl game的公认答案](https://stackoverflow.com/questions/6318311/threading-textures-load-process-for-android-opengl-game)

即有一个单独的线程将纹理加载到内存中，然后主线程执行 glTexImage2d 调用该纹理，而另一个线程开始加载另一个纹理，依此类推。主线程还可以在每次 glTexImage2d 调用后更新屏幕上的进度表。进度报告会有点粗糙，但我不知道您需要它们有多精确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T03:02:05.933

取决于您所说的“负载”是什么意思。加载是一个两步过程：

1.  将图像加载到（主）内存中。这可以从任何线程完成。
2.  通过将图像加载到视频内存中来创建纹理。这必须从 GL 线程中完成。

就 FPS 而言， la 的纹理创建`glTexImage2d`可能会暂时减慢速度，但这通常不是问题，尤其是当您显示（静态）加载屏幕时。

所以原则上你可以在 GL 线程上完成所有加载，如果你的启动画面是静态的（即没有任何移动，因此 FPS 无关紧要）：

1.  将启动画面资源加载到内存中
2.  创建启动画面纹理并绘制启动画面
3.  将游戏资源加载到内存中
4.  创建游戏画面纹理并绘制游戏画面

但是，如果您的初始屏幕是动态的，您将需要在单独的加载线程上执行 3.，一旦完成，在 GL 线程上创建游戏纹理。这需要从加载线程向 GL 线程发出信号，表明资产的加载已准备好创建纹理。

# python - AttributeError：“函数”对象没有属性“值”

> ID：11490795
> 
> 赞同：1
> 
> 时间：2012-07-15T09:21:04.850
> 
> 标签：python

我正在用 python 编码（或者更确切地说是试图编码）一个游戏，我有以下问题。当我使用循环时，这个循环应该给我字典中的值（x.chest 等，每个字典看起来像那样`{'fire': 0.0, 'water': 0.0, 'acid': 0.0,'air': 0.0}`）：

```
for damag in (x.chest, x.stomach, x.lhand, x.rhand, x.lleg, x.rleg):
    for value in damag.values():
        print(value) 
```

我明白了

```
AttributeError: 'function' object has no attribute 'values' 
```

如果我将代码更改为：

```
for damag in (x.chest, x.stomach, x.lhand, x.rhand, x.lleg, x.rleg):
    for value in damag().values():
        print(value) 
```

它有效，但只是部分有效。它从 x.chest 返回值，然后给出错误：

```
TypeError: 'dict' object is not callable 
```

我认为这个问题的解决方法一定很简单，但是我的想法有缺陷，所以我找不到它。我可以通过为每个字典做单独的循环来解决这个问题，但我认为这不是最好的主意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T09:25:10.487

显然，您的`x`属性列表并不相同。您列出的至少*一个*属性是函数，而至少另一个是字典。

# java - 在Java中抛出检查异常

> ID：11490809
> 
> 赞同：1
> 
> 时间：2012-07-15T09:22:30.867
> 
> 标签：java

假设我正在设计一个用于存储密码的 API。根据 Effective Java，使用 throw 子句来显示检查的异常是一个好主意，但是通过使用 throw 子句抛出 SQLException（这是一个检查的异常），然后我将揭示我的 API 的底层实现细节，因此我将无法在以后更改我的 API 的实现细节。抛出已检查异常的优点之一是使用 API 的程序员应该能够以他们选择的方式处理异常。我应该选择这两种方法中的哪一种，添加一个显示实现的 throw 子句或隐藏它或使用不同的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T09:29:04.277

您的动机是正确的，因为您没有“泄露”`SQLException`给您班级的用户。

您使用 SQL 的事实可以被视为实现细节。您甚至可以稍后将 SQL 持久性替换为内存中的持久性，并且此更改不应影响您班级的用户。

如果您倾向于使用已检查的异常，我会定义您自己的异常类型（例如，`PasswordStoreException`只是一个示例名称）。您可以使用它来包装引发的原始异常，例如：

```
try {
   // do whatever
} catch (SQLException ex) {
   throw new PasswordStoreException(ex);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T11:51:01.237

1.  今天，API 声明检查异常被认为是糟糕的设计。如果你曾经使用过这样的 API，你应该已经知道为什么了。
2.  在任何情况下，您的 API 都不应该**抛出**（更不用说*声明*）属于其他 API 的异常。如果你这样做了，你就会把完全不相关的依赖挂在你客户的背上。此规则的唯一“例外”是 JDK 的标准例外，如 NPE、ISE 等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T09:29:14.130

捕获 SQLException，并将其包装到您自己的异常中：

```
try {
    // JDBC code
}
catch (SQLException e) {
    throw new MyException("Error persisting the secret", e); // choose a better name, of course
} 
```

这个异常应该是检查异常还是运行时异常取决于调用者可以做些什么。如果它是可恢复的（我认为这里不是这种情况），它应该是一个检查异常。如果它不可恢复（调用者只能显示一条错误消息），那么它应该是运行时异常。

如果是受检异常，你别无选择；异常必须在`throws`方法的子句中声明。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T10:49:35.683

试试这个..

`fillInStackTrace()`调用方法来**重新初始化**新创建的 throwable 中的堆栈跟踪数据。将有助于在尝试访问 API 时**屏蔽有关异常的信息。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-15T10:57:39.343

照原样，抛出您自己的异常检查/未检查总是一个好主意。但在此之前，如果可能，请尝试修复底层异常。我总是喜欢下面的方式，

```
try {
    // JDBC code
}
catch (SQLException e) {
    // try to solve the exception at API level
    bollean solvable = trySolveException(e);
    if (!solvable) {
        // Alert the admin, or log the error statement for further debugging.
        mailClient.sendMailToDBAdmin("Some issue storing password", e); 
        // or
        LOG.severe("some issue in storing password " + e.toString);
        throw MyException("A request/logstatement is logged on your behalf regarding the exception", e);
    }
    LOG.info("The exception is solved");
}
finally {
    // don't forget to free your resources - to avoid garbage and memory leaks, incase you have solved the issue in trySolveException(e).
} 
```

所以，

1）您不直接公开 SRQException，而是抛出您自己版本的异常。

2）您尝试解决异常一次，如果没有，您会以某种方式发出警报 - 通过邮件或日志语句。

3) 最后，如果你成功解决了异常，你已经释放了所有的资源。

[如果使用新的 Java7 的try with resource close](http://www.mkyong.com/java/try-with-resources-example-in-jdk-7/)选项，可以避免 finally 子句。

至于是抛出checked还是unchecked异常，我举个例子

1）说一个像NPE这样的异常——它们是程序错误，开发人员应该对没有创建NullPointer负责。您不希望您的代码考虑到这些粗心的错误并放置一个 try(NPE)、catch(NPE)。所以抛出一个未经检查的异常。

2）另一方面，像 SQL 异常这样的异常是在极少数情况下，考虑到一些外部依赖。所以，最好抛出一个用户定义的检查异常。并且用户可以确定他是否可以连接到备份 SQL 服务器（如果有）。

3）还有另一个例外条款，程序无法继续进行。说记忆越界。它们应该作为错误抛出。

# android - 如何使用自定义意图启动活动？

> ID：11490810
> 
> 赞同：1
> 
> 时间：2012-07-15T09:22:35.417
> 
> 标签：android, android-intent, android-activity

我有一个非常简单的应用程序（教科书中的一个例子），它由 2 个活动组成：第一个活动`UsingIntentActivity`有一个按钮。单击此按钮时，它必须导致调用的第二个活动，该活动`SecondActivity`将在屏幕上显示文本。

我可以使用`startActivity(new Intent(this, SecondActivity.class));`

但是，在我遇到此示例的教科书中，使用了相同方法的另一种形式：

```
startActivity(new Intent("net.dreamingpixel.SecondActivity")); 
```

并在`Manifest File`匹配的自定义意图中创建（据我了解）：

```
 <activity
        android:name=".UsingIntentActivity"
        android:label="@string/title_activity_using_intent" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".SecondActivity"
        android:label="Second Activity" >
        <intent-filter>
            <action android:name="net.dreamingpixel.SecondActivity" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

所以有一个意图过滤器，它的类别设置为`DEFAULT`. 但是当我尝试像这样运行应用程序并单击`UsingIntentActivity`应用程序的按钮时崩溃。在日志猫中，我可以看到以下消息：

```
FATAL EXCEPTION: main
java.lang.IllegalStateException: Could not execute the method of the activity 
```

然后它指向了我在本文开头写的 startActivity 方法的调用。

有没有人有类似的问题？我在某个地方犯了错误吗？

更新：我还注意到`Manifest`在我打开第二个活动标签的那一行的文件中有一个警告。它说：导出的活动不需要许可

也许这个警告与我的问题有关..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:41:14.480

当您发送时，您已根据清单文件在清单文件中创建了第二个活动

```
startActivity(new Intent("net.dreamingpixel.SecondActivity")); 
```

这里 net.dreamingpixel.SecondActivity 的意思是，这里你需要提供你在项目中创建的包的活动名称...

在顶部的清单中，您将找到包名称。您需要在您的活动中使用该包名称...

这里按照上面的代码..

```
 net.dreamingpixel ----- is a package
      SecondActivity  ----- is an Activity in that package. 
```

# animation - simulink上的球表面动画

> ID：11490816
> 
> 赞同：1
> 
> 时间：2012-07-15T09:23:12.123
> 
> 标签：animation, simulink

我从 %AHMADREZA ESHGHINEJAD () 中找到了一个正弦曲面上弹跳球的示例，并尝试对其进行修改以适合我的模型。

但 matlab 在没有任何进一步信息的情况下调用“graphicfunction”时显示错误。我一直试图弄清楚几个小时试图修复它，但它仍然不起作用。

我将衷心感谢您的帮助。

主要的

```
 %This set of files including (Rmain.m, RCalc.m, RGraficfunction.m and Rod.mdl)  are written by:
   %AHMADREZA ESHGHINEJAD (ahmadreza.eshghinejad@gmail.com), April 2011
   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
   % to simulate and animation of a rod falling on a flat surface.
   %
%clear
%clc
%global dblcart1 pa dt amp freq I m floormin floorwidth s R
spacing_width=0.001; %[m]
spacing_amplitude=0.008; %[m] 
%disc diameter
d=0.01; %[m]
r=d/2;  %Radius
x0=0; %% initial x
y0=spacing_amplitude; %% initial y
Bth0=0; %% initial angular position 
pa=.001;  %% pause in simulation step
T=30;  %% simulation time
m=1; %% ball mass
dt=.01;  % time steps
s=0; % Movement of frame counter 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

 animinit('disc on surface');
 dblcart1 = findobj('Type','figure','Name','dblcart1 Animation');
 hold on;
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Initializing
 % Initial Ball points
 th=0:.1:2*pi;
 xx=r*cos(th)+x0;
 yy=r*sin(th)+y0;
 % Initial Ball line points
 x1l1=1*r*cos(Bth0)+x0;
 x1l2=1*r*cos(Bth0+pi)+x0;
 y1l1=1*r*sin(Bth0)+y0;
 y1l2=1*r*sin(Bth0+pi)+y0;
 x2l1=1*r*cos(Bth0+pi/2)+x0;
 x2l2=1*r*cos(Bth0+pi+pi/2)+x0;
 y2l1=1*r*sin(Bth0+pi/2)+y0;
 y2l2=1*r*sin(Bth0+pi+pi/2)+y0;
 % Drawing the floor
 floormin=0;
 floorwidth=3*2*pi*spacing_width;
 floorheight=floorwidth;
 axis([floormin floormin+floorwidth 0 floorheight]);
 plot(floormin:.1:floormin+floorwidth,spacing_amplitude*sin((1/spacing_width)*       (floormin:.1:floormin+floorwidth))+spacing_amplitude,'yellow','LineWidth',2);
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 % Initial drawing of ball
 Ballhndl1=plot([x1l1 x1l2],[y1l1 y1l2],'red');
 Ballhndl2=plot([x2l1 x2l2],[y2l1 y2l2],'red');
 Ballhndl=plot(xx,yy,'blue','EraseMode','background');
 set(gca,'UserData',[Ballhndl;Ballhndl1;Ballhndl2]);
 %set(gca,'UserData',Ballhndl);
 sim('simmod.mdl') 
```

simulink模型中的matlab函数

```
 function [x,y,Bth] = fcn(ures,yres)
 r=0.01; %% Ball radius
 spacing_width=0.001; %[m]
 spacing_amplitude=0.008; %[m]
 for th=2*pi:-.01:0
 x=ures+r*cos(th); %% bal points
 y=yres+r*sin(th);
 end;
 Bth=atan(2*pi*(1/spacing_width)*spacing_amplitude*cos(2*pi*(1/spacing_width)*x)); 
```

图形功能

```
 function GraficFunction(x,y,Bth)
   global  Ball 
   spacing_width=0.001; %[m]
   pa=.01;  %% pause in simulation step
   s=0; % Movement of frame counter 
   floormin=0;
   floorwidth=3*2*pi*spacing_width;
   pause(pa)
   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
   %%%%% passing the window margins and moving the object based on the "s"
   %%%%% parameter
   if x<(floormin+s*floorwidth),s=s-1;
   elseif x>((s+1)*floorwidth),s=s+1;end
   x=x-s*floorwidth;
   set(0,'currentfigure',Ball)
   Ballhndl=get(gca,'UserData');
   %Ball Circle points
   th=0:.1:2*pi;
   x1=ures+r*cos(th);
   y1=yres+r*sin(th);  
   %%%%%%%%%%%%%% Ball line points     
   x1l1=1*r*cos(Bth)+x;
   x1l2=1*r*cos(Bth+pi)+x;
   y1l1=1*r*sin(Bth)+y;
   y1l2=1*r*sin(Bth+pi)+y;
   x2l1=1*r*cos(Bth+pi/2)+x;
   x2l2=1*r*cos(Bth+pi+pi/2)+x;
   y211=1*r*sin(Bth+pi/2)+y;
   y2l2=1*r*sin(Bth+pi+pi/2)+y;
   % Draw Lines
   set(Ballhndl(1),'XData',x1); 
   set(Ballhndl(1),'YData',y1);
   set(Ballhndl,'XData',x1); 
   set(Ballhndl,'YData',y1);
   set(Ballhndl(2),'XData',[x1l1 x1l2]);
   set(Ballhndl(2),'YData',[y1l1 y1l2]);
   set(Ballhndl(3),'XData',[x2l1 x2l2]);
   set(Ballhndl(3),'YData',[y2l1 y2l2]);
   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
   drawnow;
   end 
```

# linux - 保护指令在 linux 的用户模式下使用它

> ID：11490818
> 
> 赞同：2
> 
> 时间：2012-07-15T09:23:37.200
> 
> 标签：linux, operating-system, processors

我在一个教程中读到，x86 架构中的一些 15 条指令不允许在用户模式下使用。

我知道有一种叫做**代码段寄存器**的东西可以跟踪**当前的特权级别**

我的问题是
a）在执行每条指令之前，cpu 是否必须检查它正在运行的**当前特权级别**？

b)如果用户程序中存在无法在用户模式下使用的指令，实际会发生什么？CPU在执行之前如何知道这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T10:03:23.873

CPU 在执行某些指令或它们的某些部分之前会检查 CPL、RPL 和类似的东西（有许多指令具有非常复杂的逻辑，要执行的检查集取决于许多条件）。

如果一条指令不允许执行，CPU 会生成一个异常事件，然后将其分派给它的处理程序。异常处理程序本质上类似于中断处理程序，由操作系统定义。因此，当操作系统开始处理它无论如何都无法纠正的异常时，它会终止导致异常的程序。

“可纠正”异常的一个示例是已卸载到磁盘的虚拟内存的页面错误。操作系统将应用程序尝试使用的代码/数据从磁盘加载回内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T01:58:47.077

当前特权级别保存在 CS 寄存器的一位中（在 x86 上技术上为 2 位）。
代码中不允许某些指令，Ex - 可以防止用户进行某些系统调用 .int X （在汇编（x86）中导致系统调用），其中 X 是 IDT（中断描述符表）的索引。这个索引指向系统调用。IDT的每个条目中还存储了一个名为DPL的字段。
以下是 int 指令所遵循的步骤：
• 从 IDT 中获取第 n 个描述符，其中 n 是 int 的参数。
• 检查%cs 中的CPL 是否<= DPL，其中DPL 是描述符中的特权级别。
• 如果是，则用户代码有足够的权限执行此系统调用，当前执行上下文被保存（寄存器等），因为我们现在切换到内核模式。
• 如果没有，那么用户没有足够的权限来执行它，并且将导致执行 int 13 指令（一般保护错误）
对于 1 类 DO NOT DO 指令，这是如何完成检查的，我不知道它是如何为其他指令完成的。
也用于通过 GDT（门描述符表）访问不同的段。方法是相同的。

PS：这仅在基于 x86 的系统上有效。请评论您看到保留指令列表的链接。

# batch-file - 使用交替的 alpha 后缀批量重命名

> ID：11490830
> 
> 赞同：0
> 
> 时间：2012-07-15T09:26:02.190
> 
> 标签：batch-file, rename

我希望通过添加字母字符的后缀来批量重命名大量文件，但仅限于特定范围内。例如：文件 126.pdf 应重命名为 126A.pdf，文件 127.pdf 应重命名为 127B.pdf，文件 128.pdf 应重命名为 128A.pdf，文件 129.pdf 应重命名为 129B.pdf 等。能够做到这一点的现有软件也值得赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:19:02.137

```
setlocal EnableDelayedExpansion
rem Define the set of replacements
for %%a in ("126=126A" "127=127B" "128=128A" "129=129B") do set %%~a
rem Achieve the replacements
for %%a in (*.pdf) do (
   if defined %%~Na (
      ren "%%a" "!%%~Na!.pdf"
   )
) 
```

以前的程序基于您请求中给出的示例。也许如果您以不同的、更精确的方式定义重命名规则，程序可能会完全不同！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:48:27.987

您可以尝试以下方法：

```
@ECHO OFF
SETLOCAL EnableDelayedExpansion
SET suffixes=AB
FOR %%I IN (*.pdf) DO (
  RENAME "%%I" "%%~nI!suffixes:~0,1!.*"
  SET suffixes=!suffixes:~1!!suffixes:~0,1!
) 
```

该`suffixes`变量设置为所有可能的后缀的“数组”以用于重命名。

遍历文件时，将选取数组中的第一个后缀以形成新名称。然后在数组中交换后缀，因此另一个在下一次迭代中成为第一个。

此解决方案适用于任意数量的后缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T09:59:58.527

您可以使用 FOR 循环来检查每个文件名。

```
setlocal EnableDelayedExpansion
for %%A in (*.pdf) DO (
  echo Filename=%%A
  set name=%%~nA
  set "prefix="
  if !name! == 123 set prefix=A
  if !name! == 999 set prefix=B
  echo rename "%%A" to "!name!!prefix!.pdf"
  ren "%%A" "!name!!prefix!.pdf"
) 
```

# c# - RavenDB 空间搜索 - session.Query 从 session.Advanced.LuceneQuery 返回不同的结果

> ID：11490834
> 
> 赞同：1
> 
> 时间：2012-07-15T09:26:46.293
> 
> 标签：c#, ravendb

我对以下两个查询有点困惑。以我有限的理解，我认为它们应该是相同的，但是 session.Advanced.LuceneQuery 版本返回了我期望的结果， session.Query 版本返回了相当随机的结果，当然距离 50 多英里给定的位置。

我更喜欢使用 session.Query，因为我将多个 where 子句链接到它，而我无法使用 LuceneQuery 返回的 IDocumentQuery。

我是否误解了这两种查询之间的目的？

```
var query1 = session.Query<AccItem, AccItems_Spatial>()
    .Customize(x => x.WithinRadiusOf(radius: 50, latitude: (double)search.Lat, longitude: (double)search.Lon));

var query2 = session.Advanced.LuceneQuery<AccItem, AccItems_Spatial>()
    .WithinRadiusOf(radius: 50, latitude: (double)search.Lat, longitude: (double)search.Lon); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:43:24.987

Query 和 LuceneQuery 实际上都归结为发生了完全相同的事情，所以我很惊讶听到它们之间存在差异。您可以创建一个失败的测试并将其发送到邮件列表吗？

另请注意，您*可以*在 LuceneQuery 中链接多个 where 子句

# javascript - Add and update a list using jquery

> ID：11490835
> 
> 赞同：0
> 
> 时间：2012-07-15T09:26:55.700
> 
> 标签：javascript, jquery

I have an input field. When the user start typing I'm using the "click" function to do some logic with the text.

The thing I would like to do is to have a list that gets updated when the user have entered more than 3 characters.

As soon as the users enters more characters the "Dona" part below gets updated.

The user enteres "Dona.."

The list says:

Add "Dona" as a contact Add a task with the Subject "Dona" and so on

What I have today is:

```
$("#inp").keyup(function() {
if ($("#inp").text.length > 3) {
 $("#list").append('<li></li>')
}
}); 
```

I cant get the counter to work. I'm able to append

*   but dont know how to pick it again later for updating

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:39:04.770

`text` is a method, `text()`. But since you're dealing with a field, you should be using `val()` instead.

Change your code to

```
$("#inp").on('keyup', function() {
    if ($(this).val().length > 3) { //<-- text(), not text
        $("#list").append('<li>'+$(this).val()+'</li>')
    }
}); 
```

Also, note I use `$(this)` (no need to make jQuery look up the element again) and have switched to using `on()` to bind the event.

[JSFiddle demo](http://jsfiddle.net/tbdYH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:46:26.483

I tried the code you suggested. My code looks like this now

Nothing happens when I enter more than 3 characters.

```
<script type="text/javascript" src="http://localhost:53230/Scripts/jquery-1.7.2.js">          </script>
<h1>test</h1>
<input id="inp" type="text" class="t" />

<ul id="list">
</ul>

<script type="text/javascript">
$("#inp").click(function () {
    //SOME OTHER NOT RELEVANT CODE
});

$("#inp").on('keyup', function () {
        if ($(this).text().length > 3) { 
            $("#list").append('<li></li>')
        }
    });
   </script> 
```

# layout - CSS 盒子阴影和边距

> ID：11490838
> 
> 赞同：3
> 
> 时间：2012-07-15T09:27:22.843
> 
> 标签：layout, margin, css

我在一篇博文`box-shadow`中添加了 CSS。`<img>`imgs 已`max-width:100%`设置为在调整大小时填充列。

由于 CSS 盒子模型中的边界之外的盒子阴影渲染，阴影溢出到边距。我想给图像一些额外的边距，以便阴影位于列内。但是，如果我使用`margin`它会使 imgs 比列宽。

有没有一种很好的方法可以让阴影坐在里面而不影响上面的宽度？想过包装另一个元素，但这样做很可惜。

如果我使用了实心边框，我可以用来`box-sizing:border-box;`实现这一点，但它与 ? 没有任何关系`box-shadow`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:38:40.073

max-width 98% 或稍微低一点怎么样，然后阴影应该就在里面？

# mysql - mysql 语句 SELECT INSERT INTO 提示

> ID：11490839
> 
> 赞同：0
> 
> 时间：2012-07-15T09:27:33.360
> 
> 标签：mysql

我的声明是正确的，缺少一列，但它不会根据顺序`trending_topics`将表中的主题标签插入表中。`rss`

任何调整都可以帮助我完成我的陈述。

```
INSERT INTO rss (id,hashtag,total)
SELECT
  hashtag,
  SUM(count) AS total
FROM `trending_topics`
WHERE lang=0
  AND hashtag !=     ''
  AND date >= date_sub(left(now(), 10), interval 1 day)
GROUP BY hashtag order by total desc;; 
```

我插入表 ( `rss`) 看起来像：

```
 id  hashtag  total
  1    null    55
  2    null    22 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:58:00.640

如果数据类型和您的示例 sql 等是正确的（并且选择返回了一个主题标签），那么以下应该有效（删除插入语句**中的 id ）**

```
INSERT INTO rss (hashtag,total)
SELECT
  hashtag,
  SUM(count) AS total
FROM `trending_topics`
WHERE lang=0
  AND hashtag !=     ''
  AND date >= date_sub(left(now(), 10), interval 1 day)
GROUP BY hashtag order by total desc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T09:32:14.737

插入的字段数应与指定的字段数相匹配`INSERT INTO table_name (field list)`

```
INSERT INTO rss (hashtag,total)
SELECT
  hashtag,
  SUM(count) AS total 
```

# ios - 对于 iOS，如何在按钮内创建可拖动按钮？

> ID：11490842
> 
> 赞同：2
> 
> 时间：2012-07-15T09:28:16.463
> 
> 标签：ios, ipad, uibutton, drag

在 xCode 中，我正在制作一个 iPad 应用程序，并在 UIimageViews 中创建了一系列计数器，当您触摸它们时它们会在屏幕上拖动。到目前为止一切都很好。

但现在我想在每个禁用的计数器上方有另一个较小的隐藏按钮，这样当您点击计数器时，较小的按钮可以出现并可以执行操作（例如“返回起始位置”或“隐藏”。

我只是不确定现在该去哪里。任何想法或提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:59:29.720

因此，您创建按钮并设置它们的框架并将它们作为子视图添加到您的视图中。从那时起，您可以通过使它们的 alpha = 0.0 来隐藏它们，通过将 alpha 设置为 0.5（将启用设置为 NO）让它们显示为禁用，并使它们在 alpha=1.0 时生效。您可以为帧和 Alpha 更改设置动画。为方便起见，您可以将它们的标签属性设置为与计数器相关的值，以便您可以使用 viewWithTag: 轻松获取它们。

# security - 什么是“小工具漏洞”？

> ID：11490844
> 
> 赞同：7
> 
> 时间：2012-07-15T09:29:00.207
> 
> 标签：security, windows-desktop-gadgets

在最近的安全公告中，微软警告说“*小工具中的漏洞可能允许远程执行代码*”：

> 成功利用 Gadget 漏洞的攻击者可以在当前用户的上下文中运行任意代码。

（[微软安全公告 2719662](http://technet.microsoft.com/en-us/security/advisory/2719662)）

* * *

我真的不明白重点。据我所知，小工具是（按设计）以完全信任运行的基于 HTML 的应用程序！

> **完全信任**
> 
> 运行小工具的选择以与运行从 Internet 下载的任何应用程序的选择相同的方式呈现给用户。有关小工具作者的信息显示在一个对话框中，表明该文件存在相关风险。用户接受警告后，小工具将使用与用户登录帐户关联的所有权限运行。

（[MSDN：Windows 边栏安全小工具](http://msdn.microsoft.com/en-us/library/windows/desktop/ff486358.aspx#_sidebar_overview_fulltrust)）

例如，没有什么可以阻止您添加

```
<script language="VBScript"> 
    Set shell = CreateObject("Wscript.Shell")
    shell.Run "notepad.exe"
</script> 
```

并从您的小工具执行任意命令。[这是有效的，而且是设计使然。](http://blogs.technet.com/b/heyscriptingguy/archive/2005/10/31/how-can-i-start-an-application-from-an-hta.aspx)

显然，他们可以做在本地用户上下文中运行的另一个应用程序可以做的所有事情。那么，MS 安全公告提到的“可以利用”的*漏洞在哪里？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T09:46:24.330

那么“小工具漏洞”的问题是：

> 小工具面临的风险与任何基于 Web 的应用程序面临的风险相同，例如中间人或代码注入。大多数 Web 浏览器的早期版本中也存在类似问题，但现代浏览器已专门实施了控制措施以试图缓解其中许多问题。这些控件尚未在 Gadgets 平台中实施，因此它们容易受到众所周知且经过深入讨论的攻击。
> -*我们有你的小工具，黑帽。*

所以你可以看到主要的漏洞是没有控制来限制小工具不受限制地运行代码。

另一个问题：

> 微软表示，它发现一些 Vista 和 Win7 小工具不遵守安全编码规范，应该被视为对运行它们的系统造成风险。

所以确实运行任意代码是 HTA 的一部分，但是因为侧边栏和小工具平台并没有缓解它并且非常悲观，认为所有小工具程序员都会编写安全代码并且不会尝试利用或做小工具不认为的事情去做。

希望它回答了你的问题。

我仍然认为这个问题很模糊，因为你说：他们允许运行任意代码，这是模型和概念的一部分，他们没有缓解它，那么漏洞是什么？它已经被利用了...... - 这就是整个想法:)

可以询问每个缺陷和攻击，这正是问题所在 - 它是设计问题并且不安全，因此发现由于没有缓解措施并且您确实能够毫无问题地运行和执行恶意代码，这些小工具有缺陷。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-21T21:20:40.113

正如我所看到的，我认为安全问题是一个烟幕。这些“安全问题”存在于许多载体和小工具中，如果它们是这样的问题，那么在 Windows 8 发布之初就会得到解决。我的观点是，小工具被抛弃了，因为它们会消耗大量的电量。 Windows 8 平板电脑。它让我想起了功能区界面是如何“暴露深埋的功能”的，而我认为实际上微软确实在计划触摸界面。因此，无论微软为做某事提供什么“借口”，我都倾向于寻找更深层次的目的。希望这会随着新的管理层而改变。有谁知道是否可以在 Windows 8.1 上安装某种小工具平台？谢谢！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-30T22:18:29.803

同意，Gadgets 平台似乎不会比用户执行未签名的应用程序更容易受到攻击。

为什么相同的系统级执行预防、启发式分析和其他应用于应用程序的方法不能应用于小工具，这让我很困惑。

这有点微软的懒惰：Gadgets 平台没有得到高度重视或广泛使用（尽管有可能提供前所未有的能力水平并将网络功能直接集成到桌面），所以与其做任何尝试为了保护用户免受恶意小工具的侵害，他们只是停止了这些小工具。

随着 Windows、Mac 和 Android 用户界面的发展方向，普通用户越来越不了解应用程序（或插件）实际上是如何工作的，因此不必要的、机会主义的甚至恶意应用程序的扩散仍在继续。我一直在反复讨论 Gadgets 规范，据我所知，它并不比 Chrome 和 FireFox 使用的插件系统更不安全。

在小工具中执行 ActiveX 和 Java 取决于 Internet Explorer 中的安全设置。如果您的安全设置允许 Gadget 执行某些操作，那么大多数这些功能也可以在插件或 Java 应用程序中利用。

我读过的分析师报告表明，这些漏洞已在“大多数现代浏览器”中得到修补，但显然 Internet Explorer 并非如此，因为我看到的每个 Gadget 漏洞利用也可以在 IE 浏览器中运行。

简而言之，ActiveX、Java 和其他插件的“切换”样式处理在这里有问题。通过尽量避免用户无休止的提示并消除做出明智决定的要求，微软继续让不知情或粗心的用户对恶意 Web 应用程序和插件敞开大门。

信任证书和安全补丁比停止该功能要好得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T06:30:23.003

这些攻击以这种方式发生：

1.  攻击者必须说服用户安装和启用易受攻击的小工具
2.  成功利用 Gadget 漏洞的攻击者可以获得与登录用户相同的用户权限。如果用户使用管理用户权限登录，成功利用此漏洞的攻击者可以完全控制受影响的系统。然后攻击者可以安装程序；查看、更改或删除数据；或创建具有完全用户权限的新帐户。

如您所见，如果您安装易受攻击的小工具，这很简单，现在告诉我谁授权了您的小工具？在万维网上有很多假冒的小玩意..小心。

微软也有一个修复程序来禁用侧边栏和小工具，你可以在这个链接中找到： [微软咨询](http://support.microsoft.com/kb/2719662)

他们杀死了 Windows 8 中的小工具和侧边栏

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T07:55:49.767

感谢您找到确切的详细信息，以下是 blackhat 中的文章，它使 Microsoft 禁用了小工具：

[我们有你的小工具 - 黑帽](http://media.blackhat.com/bh-us-12/Briefings/Shkatov/BH_US_12_Shkatov_Kohlenberg_Blackhat_Have_You_By_The_Gadgets_WP.pdf)（pdf文件）

# javascript - 背景代理奇怪的html5画布

> ID：11490851
> 
> 赞同：1
> 
> 时间：2012-07-15T09:29:17.217
> 
> 标签：javascript, html, animation, html5-canvas

我有一个 800 x 100 的背景图像，我试图从中提取部分（如精灵表）以生成背景，因为我的印象是这是一种有效的方式（也似乎是我可以在未来玩弄并学习生成背景！）

但是它不起作用，在他的第一个动画帧中（我发现这是因为放慢了它）它显示了整个背景图像的一半（不是我想要使用的部分）然后它将它向下移动大概 800 像素并显示它和到第三帧它就消失了！

请帮助：/谢谢！

```
 var bricks = [0, 1, 1, 1, 1, 2];

    function createBackground() {
        for(var i = 0; i < bricks.length; i++) {
            drawBackground(bricks[i]);
        }

    }
    var bg = new Image();
    bg.src = 'bgsheet2.png';
    var srcX, srcY = 0,srcW = 100,srcH = 100,destX = 0,destY = canvas.height-100,destW = 100,destH = 100;

    function drawBackground(type) {

        switch(type) {
            case 1:
                srcX = 0;
                ctx.drawImage(bg,srcX,srcY,srcW,srcH,destX,destY,destW,destH);
                destX+=100;
                break;
            case 2:
                srcX = 100;
                ctx.drawImage(bg,srcX,srcY,srcW,srcH,destX,destY,destW,destH);
                destX+=100;
                break;
            case 3:
                srcX = 200;
                destX+=100;
                ctx.drawImage(bg,srcX,srcY,srcW,srcH,destX,destY,destW,destH);
                break;
            default:
                srcX = 300;
                ctx.drawImage(bg,srcX,srcY,srcW,srcH,destX,destY,destW,destH);
                destX+=100;
                break;
        }
    }

     //this is in my main animation loop
    createBackground(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:37:23.850

为了提高效率，您有以下常用解决方案。

1.  如果背景是静态的（没有像水这样的移动部件或与它的任何交互），那么您可以一次将其绘制到屏幕上的画布（可见的画布）上，但不要清除该画布。这样，您的图块只会被处理和绘制一次。

2.  第二种方法比第一种更难一点，是将部分绘制到屏幕外的画布上，目的是限制您的（重新）绘制调用。

3.  您还可以使用“脏矩形”，这基本上是仅更新显示更改部分的做法。这是迄今为止最难的效率解决方案。

# c# - 检查数组是否按时间顺序排列

> ID：11490853
> 
> 赞同：1
> 
> 时间：2012-07-15T09:30:23.373
> 
> 标签：c#, arrays, list

我有一个整数数组列表，我想检查每个数组是否按时间顺序排列，如果不是，我希望将其从列表中删除。

目前我这样做：

```
for (int i = 0; i < allXcombis.Count(); i++)
{
    bool remove = false;
    for (int j = 0; j < allXcombis[i].Length; j++)
    {
        if (allXcombis[i].Count() - 1 > j)
            if (allXcombis[i][j] != allXcombis[i][j + 1] - 1)
                remove = true;
    }
    if (remove)
        allXcombis.Remove(allXcombis[i]);
} 
```

但我对这段代码并不满意，我认为它可以更容易完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:50:32.573

首先，我可能会将检查数组是否“按时间顺序”提取到它自己的方法中，并通过`return`提前从循环中 ing 来提高效率：

```
bool IsChronological(int[] array)
{
    for (int i = 0; i < array.Length - 1; i++)
    {
        if (array[i] != array[i + 1] - 1)
            return false;
    }

    return true;
} 
```

然后我会简单地使用[`RemoveAll()`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)：

```
allXcombis.RemoveAll(a => !IsChronological(a)); 
```

这样，您可以获得简洁易读的代码，并且您不必担心列表中的索引（正如其他人提到的，您的代码中有错误，因为您不小心索引）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:38:52.187

我同意[svick](https://stackoverflow.com/users/41071/svick)使用他提出的“IsChronological”这样的专用方法，但我想为这种方法添加一点安全性和性能：

```
bool IsChronological(int[] array)
{
    bool result = ((array == null) || (array.Length == 0)) ? false : true; //Null or empty arrays are not chronological by definition (also avoid exceptions)
    if (result)
    {
        result = (array.Length == 1) ? true : false; //Arrays with only one element are chronological by definition
        if (!result)
        {
            int length = array.Length - 1;
            int index = 0;
            while ((index < length) && (array[index] == array[index] + 1))
                index++;
            result = (index == array.length);
        }
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T09:37:20.520

当您从循环内的列表中删除时，您需要修复循环变量或向后循环。那么，在 Count 之后就不需要 () 了。并且您可以在分配 remove = true 后从循环中中断，这将提高性能。

```
for (int i = allXcombis.Count - 1; i >= 0; i--)
{
    bool remove = false;
    for (int j = 0; j < allXcombis[i].Length; j++)
    {
        if (allXcombis[i].Length - 1 > j)
        {
            if (allXcombis[i][j] != allXcombis[i][j + 1] - 1)
            {
                remove = true;
                break;
            }
        }
    }
    if (remove)
        allXcombis.Remove(allXcombis[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T09:40:00.033

如果按时间顺序是指排序，那么您需要检查 < 而不是 !=。你也可以简化一些事情。最重要的是当你发现它没有排序以打破内部循环，这样你就不会继续迭代。另外，您需要在删除时减少 i ，因为否则您将跳过一些数组（例如，如果 i = 2 并且您删除了第二个数组，那么第三个数组将变为第二个，但 i 在下一次迭代中将是 3，所以您会跳过它）

```
for (int i = 0; i < allXcombis.Count; i++)
{
    for (int j = 0; j < allXcombis[i].Length-1; j++)
    {
        if (allXcombis[i][j] > allXcombis[i][j + 1] - 1)
        {
            allXcombis.Remove(allXcombis[i]);
            i--;
            break;
        }
    }
} 
```

# php - 使用 PHP 将子项附加到 XML 上特定位置的末尾

> ID：11490854
> 
> 赞同：0
> 
> 时间：2012-07-15T09:30:23.957
> 
> 标签：php, xml, dom

我正在尝试将数据附加到下面 XML 中特定位置的末尾。

我的 XML 更长，但例如，我想将数据附加到标有“删除”的部分的末尾。然后我会在“总票数”的末尾添加不同的数据，但如果我能以某种方式弄清楚如何将数据附加到第一个孩子的末尾，我就能弄清楚其余的。

```
<report>
<sets>
<set>
  <legend>Delete</legend>
  <values>
    <value date="2012-06-24" data="9"/>
    <value date="2012-06-25" data="17"/>
    <value date="2012-06-26" data="15"/>
    <value date="2012-06-27" data="10"/>
    <value date="2012-06-28" data="8"/>
  </values>
</set>
   <set>
  <legend>Total Tickets</legend>
  <values>
    <value date="2012-06-24" data="412"/>
    <value date="2012-06-25" data="416"/>
    <value date="2012-06-26" data="423"/>
    <value date="2012-06-27" data="405"/>
    <value date="2012-06-28" data="280"/>
  </values>
</set>
</sets>
</report> 
```

下面是我为查看结果而编写的测试脚本。在这种情况下，我试图在图例“删除”列表的末尾附加元素“值”和“12345”的属性数据

```
<?php

$doc = new DOMDocument;

$doc->load('result.xml');

$test = $doc->getElementsByTagName("legend")->item(0);

echo $test->nodeValue.PHP_EOL; //should print Delete

if("Delete" == $test->nodeValue)
{

    $newElement = $doc->createElement('value');
    $theAttribute = $doc->createAttribute('date');

    $theAttribute->value='12345';

    $newElement->appendChild($theAttribute);

    $doc->appendChild($newElement);

}

echo $doc->saveXML();
?> 
```

我得到的结果是这样的：

```
<report>
<sets>
<set>
  <legend>Delete</legend>
  <values>
    <value date="2012-06-24" data="9"/>
    <value date="2012-06-25" data="17"/>
    <value date="2012-06-26" data="15"/>
    <value date="2012-06-27" data="10"/>
    <value date="2012-06-28" data="8"/>
  </values>
</set>
   <set>
  <legend>Total Tickets</legend>
  <values>

    <value date="2012-06-24" data="412"/>
    <value date="2012-06-25" data="416"/>
    <value date="2012-06-26" data="423"/>
    <value date="2012-06-27" data="405"/>
    <value date="2012-06-28" data="280"/>
  </values>
</set>
</sets>
</report>
<value date="12345"/> 
```

我正在尝试获取显示为这样的数据：

```
<report>
<sets>
<set>
  <legend>Delete</legend>
  <values>
    <value date="2012-06-24" data="9"/>
    <value date="2012-06-25" data="17"/>
    <value date="2012-06-26" data="15"/>
    <value date="2012-06-27" data="10"/>
    <value date="2012-06-28" data="8"/>
    <value date="12345"/>
  </values>
</set> 
```

不确定如何将数据添加到该特定位置而不是 XML 的最后。

我感谢任何人对此的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:30:32.860

试试这个：

**原始 XML 文件（另存为“testFile.xml”）：**

```
<?xml version="1.0" encoding="utf-8"?>
<report>
    <sets>
        <set>
            <legend>Delete</legend>
            <values>
                <value date="2012-06-24" data="9"/>
                <value date="2012-06-25" data="17"/>
                <value date="2012-06-26" data="15"/>
                <value date="2012-06-27" data="10"/>
                <value date="2012-06-28" data="8"/>
            </values>
        </set>
        <set>
            <legend>Total Tickets</legend>
            <values>
                <value date="2012-06-24" data="412"/>
                <value date="2012-06-25" data="416"/>
                <value date="2012-06-26" data="423"/>
                <value date="2012-06-27" data="405"/>
                <value date="2012-06-28" data="280"/>
            </values>
        </set>
    </sets>
</report> 
```

**PHP代码：**

```
<?php
$dom = new DomDocument( '1.0' );
$dom->preserveWhiteSpace = false;
$dom->formatOutput = true;

// load the xml file
$dom->load( 'testFile.xml', LIBXML_NOBLANKS );
$xpath = new DOMXPath($dom);

// prepare the xpath query to find the "values" node corresponding the
// "Delete" legend
$nodes = $xpath->query("//set[legend='Delete']/values");

// if found, append the new "value" node
if( $nodes->length ) {
    $vNode = $dom->createElement( 'value' );
    $vNodeAttr = $dom->createAttribute( 'date' );
    $vNodeAttr->value = '12345';

    $vNode->appendChild($vNodeAttr);

    // append to "values"
    $nodes->item(0)->appendChild( $vNode );
}

// i'm not saving it, just echo'ing
header( 'content-type: text/xml' );
echo $dom->saveXML();
?> 
```

**最终的 XML 文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<report>
  <sets>
    <set>
      <legend>Delete</legend>
      <values>
        <value date="2012-06-24" data="9"/>
        <value date="2012-06-25" data="17"/>
        <value date="2012-06-26" data="15"/>
        <value date="2012-06-27" data="10"/>
        <value date="2012-06-28" data="8"/>
        <!--Node appended here-->
        <value date="12345"/>
      </values>
    </set>
    <set>
      <legend>Total Tickets</legend>
      <values>
        <value date="2012-06-24" data="412"/>
        <value date="2012-06-25" data="416"/>
        <value date="2012-06-26" data="423"/>
        <value date="2012-06-27" data="405"/>
        <value date="2012-06-28" data="280"/>
      </values>
    </set>
  </sets>
</report> 
```

希望这可以帮助。

# c# - 由于对象的当前状态，操作无效。在 C# 中

> ID：11490855
> 
> 赞同：10
> 
> 时间：2012-07-15T09:30:28.067
> 
> 标签：c#, oracle

我已经创建了这个方法来检查表中这条记录的数量，但是当 count(*) 的值为 0 时它给了我这个错误消息我使用这个库来连接 oracle db

**使用 Oracle.DataAccess.Client；**

```
 private int checkPort(int portID)
        {
            int intCount = 0;
            try
            {
                OracleCommand oraCommand = new OracleCommand();
                oraCommand.Connection = new DBManager().getConnection();
                oraCommand.CommandText = "select count(*) as num from wireless_port_oid where port_id=:port_id";
                oraCommand.Parameters.Add(":port_id", portID);

                OracleDataReader Reader= oraCommand.ExecuteReader();

                return intCount;
                while (**Reader.Read()**)//it gives exception here
//The err Operation is not valid due to the current state of the object.
                {  
                    intCount =Convert.ToInt32(Reader[0]);
                    Reader.Close();
                    oraCommand.Connection.Close();
                    oraCommand = null;
                    if (intCount > 0)
                    {
                        return 1;
                    }
                }
                Reader.Close();
                Reader.Dispose();
                oraCommand.Connection.Close();
                oraCommand.Connection.Dispose();
                oraCommand.Dispose();
                return 0;

            }
            catch (OracleException exception)
            {
                Console.WriteLine(exception.Message);
                return 0;
            }
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T09:34:13.650

您正在关闭 Count = 0 的阅读器，然后尝试在 while 循环中再次阅读它。

```
while (Reader.Read())//it gives exception here
//The err Operation is not valid due to the current state of the object.
                {  
                    intCount =Convert.ToInt32(Reader[0]);
                    Reader.Close();
                    oraCommand.Connection.Close();
                    oraCommand = null;
                    if (intCount > 0)
                    {
                        return 1;
                    } 
                    // if intCOunt == 0 then what? loop again
                } 
```

**但是您的代码无效-我刚刚注意到您有一个 return intCount; 就在你说的那一行有错误之前。**我认为这只是示例错字。

我会重构您的代码以利用 C# 的 using 语句：

```
private int checkPort(int portID) {
    string sql = "select count(*) as num from wireless_port_oid where port_id=:port_id";
    int intCount = 0;
    try {
        using(OracleCommand oraCommand = new OracleCommand()) {
            using(oraCommand.Connection = new DBManager().getConnection()) {
                oraCommand.CommandText = sql;
                oraCommand.Parameters.Add(":port_id", portID);
                intCount = oraCommand.ExecuteScalar();
            }
        }
    }
    catch (OracleException exception) {
        Console.WriteLine(exception.Message);
            // may be you shouldn't return 0 here possibly throw;
    }

    return intCount;
} 
```

# iphone - 在我的 ios 设备上安装测试应用程序的困难

> ID：11490861
> 
> 赞同：0
> 
> 时间：2012-07-15T09:31:21.077
> 
> 标签：iphone, ios, itunes, ipa

我正在尝试在我的设备上安装我的应用程序版本。
我有一个“.ipa”文件和一个在我的设备上验证的配置文件。

当我在 Windows 中同步我的 IOS 设备时，它说我有问题

```
"entitlements are not valid". 
```

当按下获取更多信息时，它说我必须更新设备软件，我不想这样做。
如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:43:19.017

由于我项目的 entitlements.plist 中的数据，我对该网站有疑问。问题出在证书上。我完成了创建配置文件和 .ipa 文件的整个过程。并将其更改为分发而不是开发人员。之后它工作顺利

# clojure - 有人可以解释“conj”的行为吗？

> ID：11490862
> 
> 赞同：5
> 
> 时间：2012-07-15T09:31:22.017
> 
> 标签：clojure

```
(conj (drop-last "abcde") (last "abcde")) 
```

返回`(\e \a \b \c \d)`

我很困惑。在文档中`conj`，我注意到

> 根据具体类型，“添加”可能发生在不同的“地方”。

是不是说，`LazySeq`添加新项的地方就是头部？我怎样才能得到`(\a \b \c \d \e)`结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T10:13:47.120

> “根据 **具体**类型，‘加法’可能发生在不同的‘地方’。”

这是指 Clojure 的持久性集合的行为，它以最有效的方式在性能和底层实现方面合并添加。

向量总是添加到集合的末尾：

```
user=> (conj [1 2 3] 4)
[1 2 3 4] 
```

使用 Lists，conj 将项目放在列表的前面，正如您所注意到的：

```
user=> (conj '(1 2 3) 4)
(4 1 2 3) 
```

所以，是的，就其具体实现而言，LazySeq 被视为列表。

> 我怎样才能得到`(\a \b \c \d \e)`结果？

有很多方法，但您可以轻松地从您的 LazySeq 创建一个向量：

```
(conj (vec (drop-last "abcde"))
      (last "abcde")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T02:57:02.540

重要的是要意识到在 Clojure 的 Java 东西中`conj`简单地委托给接口`cons`上的实现。`IPersistentCollection`因此，根据正在处理的给定数据结构，它的行为可能会有所不同。

conj 背后的意图是它总是以最有效的方式将项目添加到数据结构中。

对于列表，最有效的放置位置是前面。对于向量，最有效的放置位置是放在最后。

# asp.net - Asp.Net 实时缓存和会话的区别

> ID：11490864
> 
> 赞同：3
> 
> 时间：2012-07-15T09:31:37.867
> 
> 标签：asp.net

大家好，我是 Asp.Net 的新手，谁能告诉我实时缓存和会话之间的区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T09:34:42.680

**会话：** 会话用于存储数据，它是用户特定的。它可以通过站点访问。会话有 4 种模式：

1.  在 Proc 中（数据存储在内存中）
2.  状态服务（数据存储在服务中，好处是如果您的应用程序重新启动会话仍然存在）
3.  Sql Server（与状态服务器具有相同的好处）
4.  在 Proc（没有 cookies）中，一个 session_id 附加到 URL。这在用户禁用 cookie 时使用。

例子：

```
Session["key"] = "value"; // You can store any object data type. 
```

缓存：asp.net中有两种缓存。

1.  **页面输出缓存：**您可以通过在页面顶部指定PageOutput指令来缓存整个页面。它将渲染的页面存储在缓存中。当成千上万的用户访问您的页面时会使用它，因此为了增加响应时间，我们会缓存该页面。
2.  **应用程序缓存：**它允许将任何对象存储在内存中，并根据某些限制（例如时间或其他依赖项）自动删除对象。例子：

    `Cache["key"] = "value"; // it also supports any object data type.`

记住缓存和会话是不同的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T09:35:54.927

会话可供用户使用，直到应用程序处于活动状态并且会话未被放弃。

可以为整个应用程序级别或用户级别提供缓存

两者之间的一个主要区别是，缓存中的项目可能会在给定时间后过期，而会话中的项目将保留到会话过期

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T09:39:49.927

1.  会话是每个用户

2.如果您的服务器内存不足，asp.net 将删除缓存以释放内存

3.我们使用缓存与所有用户共享相同的值

# cakephp - Cakephp 模型关联加入

> ID：11490865
> 
> 赞同：1
> 
> 时间：2012-07-15T09:31:38.527
> 
> 标签：cakephp, join, model, associations

好吧，在我的 cakephp 项目中，我有 6 个模型，它们是 {User,Property,Category,Status,Comments,Attachable}

属性模型： $belongsTo = {User,Category,Status} 。和 $hasMany = {评论，可附加} ..

属性控制器索引方法..

```
public function index() {
    $this->Property->recursive = 0;
    $this->set('properties', $this->paginate());
    $properties= $this->paginate();
    //pr($properties);
    //exit;
} 
```

输出：

```
Array
(
    [0] => Array
        (
            [Property] => Array
                (
                    [id] => 1
                    [user_id] => 1
                    [category_id] => 1
                )

            [User] => Array
                (
                    [id] => 1
                    [name] => zals
                    [username] => admin
                    [userLevel] => 1
                )

            [Category] => Array
                (
                    [id] => 1
                    [name] => villa
                    [property_count] => 0
                )

            [Status] => Array
                (
                    [id] => 1
                    [name] => New
                    [property_count] => 0
                )
        )

    [1] => Array
        (
            [Property] => Array
                (
                    [id] => 2
                    [user_id] => 1
                    [phone] => 78666
                )

            [User] => Array
                (
                    [id] => 1
                    [name] => zals
                    [username] => admin
                )

            [Category] => Array
                (
                    [id] => 1
                    [name] => villa
                    [description] => villas are iby a wealthy person.
                    [property_count] => 0
                )

            [Status] => Array
                (
                    [id] => 1
                    [name] => New
                    [description] => New Property
                    [property_count] => 0
                )

        )

    [2] => Array
        (
            [Property] => Array
                (
                    [id] => 3
                    [user_id] => 1
                    [category_id] => 1
                )

            [User] => Array
                (
                    [id] => 1
                    [name] => zals
                    [username] => admin
                    [email] => admin@realty.com
                    [userLevel] => 1
                )

            [Category] => Array
                (
                    [id] => 1
                    [name] => villa
                    [property_count] => 0
                )

            [Status] => Array
                (
                    [id] => 1
                    [name] => New
                    [property_count] => 0
                )

        )
) 
```

那么上面的方法只从 $belongsTo 变量中的模型中检索数据。我想要的是将相关的评论和可附加模型与相同的查询结合起来。这可以通过 LEFT JOIN 手动查询评论和附加模型。

这就是查询的样子

```
function index() {
    $properties = $this->Property->query("SELECT `Property`.`id`, `Property`.`user_id`, `Property`.`category_id`, `Property`.`status_id`, `Property`.`state_id`, `User`.`id`, `User`.`name`, `User`.`username`,`Category`.`id`, `Category`.`name`, `Category`.`description`, `Status`.`name`, `Status`.`description``Comment`.`id`,`Comment`.`name`,`Comment`.`comment`,`Attachment`.`id`,`Attachment`.`AttachmentName` FROM `properties` AS `Property`
        LEFT JOIN `users` AS `User` ON (`Property`.`user_id` = `User`.`id`)
        LEFT JOIN `categories` AS `Category` ON (`Property`.`category_id` = `Category`.`id`)
        LEFT JOIN `statuses` AS `Status` ON (`Property`.`status_id` = `Status`.`id`)
        LEFT JOIN `cities` AS `City` ON (`Property`.`city_id` = `City`.`id`)
        LEFT JOIN `comments` AS `Comment` ON (`Property`.`id` = `Comment`.`id`)
        LEFT JOIN `attachments` AS `Attachment` ON (`Property`.`id` = `Attachment`.`id`) WHERE 1 = 1 LIMIT 20");
    //pr($properties);
    //exit;
    $this->set('properties',$properties);   
} 
```

输出：

```
Array
(
    [0] => Array
        (
            [Property] => Array
                (
                    [id] => 1
                    [user_id] => 1
                    [category_id] => 1
                    [status_id] => 1
                )
            [User] => Array
                (
                    [id] => 1
                    [name] => za
                    [username] => admin
                )
            [Category] => Array
                (
                    [id] => 1
                    [name] => villa
                    [description] => villa by a wealthy person.
                )
            [Status] => Array
                (
                    [name] => New
                )
            [Comment] => Array
                (
                    [id] => 1
                    [name] => A
                    [comment] => hello
                )
            [Attachment] => Array
                (
                    [id] => 1
                    [AttachmentName] => 1342009083_4c2380.jpg
                )
        )
    [1] => Array
        (
            [Property] => Array
                (
                    [id] => 2
                    [user_id] => 1
                    [category_id] => 1
                    [status_id] => 1
                )
            [User] => Array
                (
                    [id] => 1
                    [name] => zals
                    [username] => admin
                )
            [Category] => Array
                (
                    [id] => 1
                    [name] => villa
                    [description] => villas a
                )
            [Status] => Array
                (
                    [name] => New
                )
            [Comment] => Array
                (
                    [id] => 2
                    [name] => asdasd
                    [comment] => asdasdas
                )
            [Attachment] => Array
                (
                    [id] => 2
                    [AttachmentName] => 92f2e3c067d731a3823762.jpg
                )
        )
) 
```

我确信后一种方法不是正确的方法。或者
假设我在控制器中使用了 cakephp 的默认索引方法，并且在 VIEW 中我可以在主 foreach 循环内执行嵌套的 foreach 循环..即

```
<?php foreach ($properties as $property) { ?>
    $id = $property['Property']['id'];
    $comments = ..... //here to query for the associated comments passing the id value .. 
?> 
```

可以这样解决吗？或如何？请指导..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:29:07.687

两件事情：

1.  您可能可以通过使用[Containable 行为](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)来解决您的问题。它非常灵活，可以[与 pagination](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html#using-containable-with-pagination)一起使用。
2.  建立`inner join`一对多关系可能不是一个好主意。

# php - 使用 Href Javascript 调用更改隐藏输入

> ID：11490868
> 
> 赞同：0
> 
> 时间：2012-07-15T09:33:04.580
> 
> 标签：php, javascript, ajax, href, hidden

我正在编写一个页面，该页面从用户输入的 url 中获取图像，并使用 ajax 更新一个带有 img src 的 div，以在模式窗口中由 fancybox 显示。显示的图像具有以下显示的标题，作为链接。这是用fancybox完成的（如果您将标题设置为设置，`title="something"`将在图像下方显示“某物”。如果您将标题设置为`title="<a href='something.html'>Something</a>`）

我的问题是这个。我需要允许用户通过单击链接来选择图像，然后让它做两件事：用 img 的 src url 更新隐藏字段，然后提交表单。

这是我对 ajax 请求的代码：

```
 function getCustomerInfo() {
        var phone = document.getElementById("urls").value;
        var url = "grabimages.php?urls=" + escape(phone);
        request.open("GET", url, true);
        request.onreadystatechange = updatePage;
        request.send(null);
        $("#dvloader").show();
        $("#selectimages").hide();
        //$("#noimages").hide();

        function updatePage() {
        if (request.readyState == 4)
            if (request.status == 200){
                if(request.responseText == ''){
                    $("#dvloader").hide();
                    $("#noimages").show();
                }else{
                    document.getElementById("update-div").innerHTML = request.responseText;
                    $("#dvloader").hide();
                    $("#selectimages").show();
                    $(".fancybox")
                        .attr('rel', 'gallery')
                        .fancybox({
                            padding : 15
                        });
                    $('input[id=theimage]').click(function(){

                        $(".fancybox").eq(0).trigger('click');
                    }); 

                    function recURL(recipeurl) {

                        $('#recipeurl').val('recipeurl');
                        document.recipeform.submit();

                    }

                }
            }else{
                alert('nothing');
            }

        } 
```

这是我为 href javascript 调用尝试的代码（这是服务器端代码，所以 PHP：

```
 echo "<a class=\"fancybox\" id=\"recipelinks\" title=\"<a href='#' onclick='javascript:recURL(" . $imagepath . ");'>Choose this Image</a>\" href=\"" . $imagepath . "\"><img src=\"" . $imagepath . "\" alt=\"\"/></a>"; 
```

这没有任何作用。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:36:15.737

使用`$('.fancybody').live('click', function() { });`,`live`允许您侦听动态添加到的元素上的事件`DOM`。

# javascript - 从 localStorage 读写？

> ID：11490869
> 
> 赞同：8
> 
> 时间：2012-07-15T09:33:12.967
> 
> 标签：javascript, android, html, cordova

我刚开始学习Phonegap + jQuery Mobile 和HTML5，所以不要因为我的白痴而失去勇气！

有人可以告诉我为什么这不起作用吗？当我使用 localStorage 中的变量时，按下按钮时我只是得到一个空屏幕，但是当使用变量 temperature="100" 时，它工作正常。安卓 4.1。

```
<script type="text/javascript" charset="utf-8">
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
  window.localStorage.setItem("temperature", "100");
  var temperature = window.localStorage.getItem("temperature");
}
</script>
<div data-role="content">
  <p>Working or not?</p>
  <button onclick="myFunction()">Try it</button>
  <p id="testi"></p>
<script type="text/javascript">
  function myFunction() {
    //var temperature = "100";----> This is working!
    document.getElementById("testi").innerHTML = temperature;
  }
 </script>
</div> 
```

另一个问题：如何处理Windows Phone中页面之间的变量？他们不支持 localStorage，那么如果您没有 db-connection，还有其他方法可以解决这个问题吗？

谢谢！

萨米人

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-15T10:13:59.183

`temperature`在函数范围内是局部的`onDeviceReady`。也就是说，一旦功能结束，它就消失了。

你有两个选择：

```
// Make it global
var temperature;
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
  window.localStorage.setItem("temperature", "100");
  temperature = window.localStorage.getItem("temperature");
} 
```

或者：

```
// Retrieve it in myFunction
function myFunction() {
  var temperature = localStorage.getItem("temperature");
  document.getElementById("testi").innerHTML = temperature;
} 
```

有关函数范围示例的良好列表，请尝试[此答案](https://stackoverflow.com/questions/500431/javascript-variable-scope)。

# android - 如果有人靠近某个特定位置，如何创建动作？

> ID：11490870
> 
> 赞同：-1
> 
> 时间：2012-07-15T09:33:27.877
> 
> 标签：android, google-maps, geolocation

对于你们中的一些人来说，这可能是一个菜鸟问题。**我想为android应用程序创建一个动作，如果有人使用geopoint**靠近某个特定位置，我想使用**mylocation**来验证这一点，以创建一个可以感知位置的动作。任何想法 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:38:46.080

您可以在 Location 对象中保存您想要到达的位置，然后每次从 GPS 更新位置，或者每隔几秒左右，检查到它的距离。如果它小于给定值，你就在那里。

看看这个 [http://advback.com/android/finding-distance-between-two-points-with-google-maps-android/](http://advback.com/android/finding-distance-between-two-points-with-google-maps-android/)

编辑：既然你提到你想使用 GeoPoint，这里有一个关于如何在两者之间转换的快速解释： [将 GeoPoint 转换为位置](https://stackoverflow.com/questions/3472603/convert-geopoint-to-location)

# c++ - 二进制文件和兼容性标准信息 - C++ / JAVA

> ID：11490871
> 
> 赞同：2
> 
> 时间：2012-07-15T09:33:35.317
> 
> 标签：c++, binary, standards, portability, binaryfiles

我正在阅读关于 JAVA 和 C++ 之间差异的[维基百科文章。](http://en.wikipedia.org/wiki/Comparison_of_Java_and_C++)一个区别是 C++ 提供了“多种二进制兼容性标准”。你能解释一下这意味着什么，或者暗示一个很好的参考。我有一个线索，这意味着用 C++ 编写的二进制文件非常便携，可以在任何操作系统或环境上使用。我希望得到确认和更精确。这是什么一回事呢？

如何生成二进制文件？是什么让它不便携？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:45:40.500

究竟是什么`int`意思？当调用带有 2 个参数的函数时 - 你是把第一个放在堆栈的第一个还是最后一个？或者你有一个堆上的结构并指向它？您是否允许将未知数量的参数传递给函数？你如何处理字符串；数组？您是在堆栈、堆还是在私有内存块中分配？您是否修改函数名称（以允许重载）或将它们用作源代码中的输入？您是否在 8 位、16 位或 32 位边界上对齐结构中的成员？

所有这些问题（以及更多问题）对一个二进制文件调用另一个二进制文件的方式产生了很大影响，而且大多数时候答案并不那么简单。

Java 并没有提供太多关于如何精确地完成二进制布局（毕竟它是一个 VM），而 C++ 提供了极大的灵活性来适应几乎所有可以想象的需求——因此它“提供了二进制兼容性标准”，不像Java（在您的示例中）

# android - 终止蓝牙应用程序后设备卡住

> ID：11490873
> 
> 赞同：0
> 
> 时间：2012-07-15T09:33:41.557
> 
> 标签：android

我正在尝试实现一个从蓝牙设备（GlobalSat BT-338 GPS 接收器）读取数据的应用程序。我已按照[指南](http://developer.android.com/guide/topics/connectivity/bluetooth.html)中的说明进行操作。

最大的问题是，在连接蓝牙设备然后断开连接后，如果我以任何方式终止应用程序，我的设备（LG E720，Android 2.2）就会完全卡住。解锁它的唯一方法是卸下和更换电池！

这些是我碰巧用来终止应用程序的一些不同方式（我无法避免的第一种方式）：

*   从 eclipse 中，运行新版本的应用程序；这会导致在我的设备上运行的先前版本自动终止：设备卡住；

*   从 Eclipse DDMS 屏幕，在我的应用程序上执行“停止进程”：设备卡住；

*   从设备本身：设置 -> 应用程序 -> 管理应用程序 -> BluetoothTest -> 终止：设备卡住

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T11:01:27.767

作为一个快速的解决方案，也许您应该在断开两个设备后尝试禁用 BluetoothAdapter：

```
// Your code for disconnect both devices
// ..........
// Disable the Bluetooth Adapter    
BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();    
mBluetoothAdapter.disable(); 
```

这不是最好的解决方案，因为每次断开连接后，您都需要重新启用适配器，但它可以工作。

从现在开始，您将无法使用蓝牙连接或发现新设备，除非您再次启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:36:59.607

我的 LG 设备似乎需要从 V10a 升级到 V10b 的固件。从 LG 支持网站轻松完成，该过程大约需要 20 分钟。就我而言，这完全解决了“设备卡住”问题，这是我在蓝牙连接中最重要的问题来源。V10b不仅升级了固件，还升级了操作系统版本，从2.2升级到了2.2.1。

# javascript - 在javascript中的一个对象的两个键上声明两个数组的整洁方法是什么？

> ID：11490879
> 
> 赞同：0
> 
> 时间：2012-07-15T09:34:44.760
> 
> 标签：javascript

这就是我现在的做法。感觉就是一头雾水...

```
var broken_posts = new Object();
broken_posts.empty = new Array();
broken_posts.one = new Array(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T09:36:45.857

```
var broken_posts = { empty: [], one: [] }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T09:36:54.433

```
var broken_posts = {
empty: [],
one: []
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T10:09:25.983

Andru 和 Thilo 的答案都是正确的，但也许一些关于为什么的信息是正确的：

*   避免直接调用 Array 构造函数：这会造成混淆和误导。`var a = new Array(5);`返回`[undefined,undefined,undefined,undefined,undefined]`，而`var b = new Array('5');`返回`['5']`。甚至`var c = new Array(5,5);`=> `[5,5]`。

*   同样适用于直接对象构造函数。确实没有理由创建一个调用基本对象构造函数的对象。`new`只有在创建日期对象或调用自制的构造函数时才应该使用关键字（即使在这种情况下，也不需要`new`关键字，还有其他设计模式）。使用对象字面`{}`量更常见，允许直接分配属性（甚至方法）。此外，以 JIT 方式创建对象要容易得多。它不仅需要更少的代码行，正确使用闭包，或者只是一次调用，一旦你完成一个对象，它就可以被 GC'ed。

* * *

```
function iWantAnObject(obj)
{
    if (obj instanceof Object)
    {
        return true;
    }
    return false;
}//function returns, obj is GC'ed
iWantAnObject({just:'some',rand:'Object',withA:function(){console.log('a method';}}); 
```

与这种情况相反：

```
var tempObj = new Object();
tempObj.just = 'some';//etc...
//etc...
iWantAnObjct(tempObj);
//tempObj isn't yet GC'ed 
```

在最后一个示例中，机会是：您不小心创建了全局变量，在内存中拥有不再需要的各种对象，最后但并非最不重要的一点是：与 JS 的原型性质不太相符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T11:12:10.680

我更喜欢使用 CoffeeScript。

然后你可以这样做：

```
broken_posts =
    empty: []
    one: [] 
```

# android - Android 活动调用 onCreate 而不是 onDestroy。为什么？

> ID：11490880
> 
> 赞同：1
> 
> 时间：2012-07-15T09:34:51.073
> 
> 标签：android, android-intent

有一个由意图触发的活动：设置、显示和隐藏 ProgressDialog。当它设置并显示活动时工作正常，但是当调用隐藏时，而不是调用 onDestroy 方法，而是调用 onCreate。这是活动开始时的 LogCat：

```
SHOW_PROGESS
SET_PROGESS
onCreate
onStart
onResume
SET_PROGESS
onPause
DialogSET 15
onResume
SET_PROGESS
onPause
DialogSET 16
onResume
... 
```

ProgressDialog 在 onNewIntent(Intent intent) 方法中设置和显示。但是当隐藏任务被调用时

```
pd.dismiss();
finish(); 
```

被调用，而不是调用 onDestroy 调用 onCreate：

```
HIDE_PROGESS
onPause
DialogHIDE
onResume
onPause
onCreate
onStart
onResume
onStop
destroyed
Activity -activityName- has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41347af0 that was originally added here android.view.WindowLeaked 
```

没有 ProgessDialog 有白色显示。按下 BACK 按钮后

```
onPause
onDestroy 
```

被调用，然后我可以看到我想要的。如何解决我不应该按下 BACK 按钮再次调用 onDestroy 的问题？

意图是这样开始的：

```
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
                intent.setAction(intent.ACTION_VIEW);

                startActivity(intent); 
```

谢谢！

编辑：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);                     

        this.requestWindowFeature(Window.FEATURE_NO_TITLE);

        extras = getIntent().getExtras();

        progress = 0;
        max = extras.getInt("max");
        title = extras.getInt("title");

        pd = new ProgressDialog(this);

        pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        pd.setCancelable(false);

        Log.w("screenPD", "onCreate");
    }

    @Override
    protected void onNewIntent(Intent intent) {
        super.onNewIntent(intent);

        setIntent(intent);

        int newTitle = intent.getExtras().getInt("title");

        if (intent.getExtras().getString("action").equals("set")){
            pd.setTitle(newTitle);
            pd.setMessage(intent.getExtras().getString("message"));
            max = intent.getExtras().getInt("max");
            pd.setMax(max);
            pd.setProgress(intent.getExtras().getInt("progress"));
            pd.show();

            Log.e("DialogSET", "DialogSET "+intent.getExtras().getInt("progress"));
        }
        else if (intent.getExtras().getString("action").equals("show")){
            pd.setProgress(intent.getExtras().getInt("progress"));
            pd.setMessage(intent.getExtras().getString("message"));
            //pd.show();

            Log.e("DialogSHOW", "DialogSHOW "+progress);

        }
        else if (intent.getExtras().getString("action").equals("hide")){

            //pd.dismiss();
            finish();

            Log.e("DialogHIDE", "DialogHIDE");

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:38:03.780

这就是文档中所说的`onNewIntent()`：

> 在接收到新意图之前，活动将始终暂停，因此您可以指望在此方法之后调用 onResume()。

我相信您看到的问题是由于进行了`finish()`调用`onNewIntent()`，然后框架（看到下一步需要恢复您的活动）再次恢复您的活动。

尝试将您的代码移入（也许也添加一个标志`onNewIntent()`来`onResume()`检查是否需要处理），例如：

```
private boolean mNewIntentProcessed;

@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);

    setIntent(intent);

    mNewIntentProcessed = false;

    // move the rest of the code here to onResume() ..
}

@Override
protected void onResume() {
    super.onResume();

    if (!mNewIntentProcessed) {

        final int newTitle = intent.getExtras().getInt("title");

        // the rest of your code from onNewIntent() should be moved here ..  

        mNewIntentProcessed = true;
    }

} 
```

# java - 使用哪种通用通信协议与 Web 架构中的 java 层进行通信

> ID：11490888
> 
> 赞同：0
> 
> 时间：2012-07-15T09:36:27.703
> 
> 标签：java, php, architecture, protocols, communication

![我正在规划的建筑](../Images/0a163c0e82e2a96fd40a086cc5c0b2c8.png)

我正计划为我的网站设计这样的架构，如上图所示。我正在用 Java 构建一个核心平台，用于与 DB 和其他高处理任务进行通信，模块可以通过定义的接口与核心连接。

模块可以是任何东西，如前端网站、邮箱、管理控制台等，并且可以构建在任何技术上，如 PHP、Java、ruby on rails 等。

现在告诉我应该使用哪种通信协议来进行模块和核心之间的通信。协议必须是大多数语言都能理解的东西，并且可以在双向通信中轻松处理。

如果有人发现这种架构有任何缺陷，那么请提出一个更好的，提供出色的可扩展性和灵活性的架构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T09:46:54.433

所以基本上这是一个类似 SOA 的架构。JavaEE 和 EJB (3+) 或 Spring 框架立即浮现在脑海中。

组件（您的“模块”）通常通过 SOAP 服务与前端、后端和复合服务之间的可选企业服务总线 (ESB) 耦合。

无论这是否适合您的情况或只是超大...没有人，但您可以说...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T13:08:32.290

我会使用 HTTP，在 Core 上公开一个 REST API，例如 Thilo 建议的。

复杂性在于传统 Web 服务的 RPC（过程模型）和资源模型之间的权衡，后者更适合使用 http 请求（URI 上的动词 GET、POST、PUT 和 DELETE，辅以一些标头和正文） .

然而，这使得分发柔软、易于维护和便携。每个客户端模块都可能建立在完全不同的技术上，这使您可以使用“完成工作的最佳工具”。

更不用说 HTTP 在缓存、重写、负载平衡、ssl 等方面的优势了。

# c# - PredicateBuilder 是如何工作的

> ID：11490893
> 
> 赞同：36
> 
> 时间：2012-07-15T09:37:22.933
> 
> 标签：c#, .net, linq, expression-trees, predicatebuilder

C# in a Nutshell 有一个名为 PredicateBuilder 的免费类，它可以[在此处](http://www.albahari.com/nutshell/predicatebuilder.aspx)逐段构造 LINQ 谓词。这是向谓词添加新表达式的方法的摘录。有人可以解释一下吗？（我已经看到[了这个问题](https://stackoverflow.com/questions/5301875/how-does-this-predicatebuilder-class-work?rq=1)，我不想要像那里那样的一般性答案。我正在寻找关于 Expression.Invoke 和 Expression.Lambda 如何构建新表达式的具体解释）。

```
public static Expression<Func<T, bool>> And<T> (this Expression<Func<T, bool>> expr1,
                                                     Expression<Func<T, bool>> expr2)
{
    var invokedExpr = Expression.Invoke (expr2, expr1.Parameters.Cast<Expression> ());
    return Expression.Lambda<Func<T, bool>>
        (Expression.AndAlso (expr1.Body, invokedExpr), expr1.Parameters);
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-15T12:24:10.373

假设您有：

```
Expression<Func<Person, bool>> isAdult = p1 => p1.Age >= 18;

// I've given the parameter a different name to allow you to differentiate.
Expression<Func<Person, bool>> isMale = p2 => p2.Gender == "Male"; 
```

然后将它们与`PredicateBuilder`

```
var isAdultMale = isAdult.And(isMale); 
```

产生的是`PredicateBuilder`一个看起来像这样的表达式：

```
// Invoke has no direct equivalent in C# lambda expressions.
p1 => p1.Age >= 18 && Invoke(p2 => p2.Gender == "Male", p1) 
```

如你看到的：

1.  生成的 lambda*重用*第一个表达式的参数。
2.  具有通过传递第一个表达式的参数作为第二个表达式参数的替换来*调用*第二个表达式的主体。结果[`InvocationExpression`](http://msdn.microsoft.com/en-us/library/bb355170.aspx) 有点像方法调用的表达式等效项（通过传入参数的参数来调用例程）。
3.  `And`s 第一个表达式的主体和 this`InvocationExpression`一起生成结果 lambda 的主体。

这个想法是 LINQ 提供者应该能够理解这个操作的语义并采取合理的行动（例如生成类似 SQL `WHERE age >= 18 AND gender = 'Male'`）。

但是，提供者通常会遇到`InvocationExpression`s 的问题，因为处理“表达式内的嵌套表达式调用”显然很复杂。

为了解决这个问题，LINQKit 还提供了`Expand`帮助程序。这实质上通过用嵌套表达式的*主体*替换调用，巧妙地“内联”调用调用，适当地替换嵌套表达式参数的使用（在这种情况下，替换`p2`为`p1`）。这应该产生类似的东西：

```
p1 => p1.Age >= 18 && p1.Gender == "Male" 
```

请注意，如果您自己在 lambda 中完成，那么您将如何手动组合这些谓词。但是使用 LINQKit，您可以*从独立的来源*获取这些谓词并轻松组合它们：

1.  无需编写“手动”表达式代码。
2.  可选地，以对结果 lambda 的消费者透明的方式。

# php - php for each 如何删除字符

> ID：11490902
> 
> 赞同：0
> 
> 时间：2012-07-15T09:38:48.787
> 
> 标签：php, json

我在 Firefox 上对此进行了测试，它工作正常，但在 IE 中它不起作用，因为数组的最后一部分有逗号。现在如何使用 php 删除逗号？

实际结果：

```
{image : 'folder/pic1.jpg', title : '', thumb : 'folder/pic1.jpg', url : ''},
{image : 'folder/pic2.jpg', title : '', thumb : 'folder/pic2.jpg', url : ''},
{image : 'folder/pic3.jpg', title : '', thumb : 'folder/pic3.jpg', url : ''}, 
```

预期结果：

```
{image : 'folder/pic1.jpg', title : '', thumb : 'folder/pic1.jpg', url : ''},
{image : 'folder/pic2.jpg', title : '', thumb : 'folder/pic2.jpg', url : ''},
{image : 'folder/pic3.jpg', title : '', thumb : 'folder/pic3.jpg', url : ''} 
```

代码：

```
<?php 
$directory = "pic/";

$images = glob("".$directory."{*.jpg,*.JPG,*.PNG,*.png}", GLOB_BRACE);

if ($images != false)
{
?>
<script type="text/javascript">
    jQuery(function($){
        $.supersized({
            slideshow:   1,//Slideshow on/off
            autoplay:    1,//Slideshow starts playing automatically
            start_slide: 1,//Start slide (0 is random)
            stop_loop:   0,
            slides:      [// Slideshow Images

            <?php
    foreach( $images as $key => $value){
                 echo "{image : '$value', title : '', thumb : '$value', url : ''},";
            }
            ?>
            ],
            progress_bar: 1,// Timer for each slide
            mouse_scrub: 0
</script>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T09:42:34.180

您无需手动编写自己的 JSON。采用`json_encode()`

```
echo json_encode($images); 
```

尽管如此，要回答这个问题，有两种方法可以避免尾随逗号（它确实应该被删除，即使 Firefox 等让你侥幸逃脱）

1 - 在你的循环中条件化它的输出

```
$arr = array('apple', 'pear', 'orange');
foreach($arr as $key => $fruit) {
    echo $fruit;
    if ($key < count($arr) - 1) echo ', ';
} 
```

请注意，这仅适用于索引数组。对于关联的，您必须设置自己的计数器变量（因为`$key`不会是数字）。

2 - 之后删除它，例如使用 REGEX

```
$str = "apple, pear, orange, ";
$str = preg_replace('/, ?$/', '', $str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T09:47:14.777

支持 Utkanos 的使用答案，`json_encode`但为了让您的代码正常工作，您可以使用它`end`来比较您的值是否相同，或`key`验证密钥。

```
foreach ($array as $key => $value) { 
  if ($value == end($array)) {
      // Last element by value
  }

  end($array);
  if ($key == key($array)) {
      // Last element by key
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T09:51:38.947

不要编写自己的 JSON，请使用`json_encode`：

```
<?php

$data = array(
    'slideshow' => 1,
    ...
);

foreach ($images ...) {
    $data['slides'][] = array('image' => ...);
}

?>

$.supersized(<?php echo json_encode($data); ?>); 
```

# android - Android：设备独立像素？

> ID：11490911
> 
> 赞同：0
> 
> 时间：2012-07-15T09:40:17.190
> 
> 标签：android, size, screen, density-independent-pixel

如果我在小屏幕设备上有 96dip，它会放大以保持与大屏幕设备的比例。

我对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:46:57.583

这是正确的。

来自开发者指南：

> 与密度无关的像素 (dp)
> 
> 定义 UI 布局时应使用的虚拟像素单位，以与密度无关的方式表示布局尺寸或位置。
> 
> 与密度无关的像素相当于 160 dpi 屏幕上的一个物理像素，这是系统为“中等”密度屏幕假定的基线密度。在运行时，系统会根据使用中屏幕的实际密度，根据需要透明地处理 dp 单位的任何缩放。dp 单位到屏幕像素的转换很简单：px = dp * (dpi / 160)。例如，在 240 dpi 的屏幕上，1 dp 等于 1.5 个物理像素。在定义应用程序的 UI 时，您应该始终使用 dp 单位，以确保您的 UI 在不同密度的屏幕上正确显示。

# c++ - 图像曲线拟合的多项式最小二乘

> ID：11490912
> 
> 赞同：1
> 
> 时间：2012-07-15T09:40:20.130
> 
> 标签：c++, c, image-processing, curve-fitting, least-squares

我正在尝试将曲线拟合到图像中的多个像素，以便可以对其形状进行进一步处理。有谁知道如何在 C/++ 中实现最小二乘法，最好使用以下参数：x 数组、y 数组和答案数组（答案数组的长度应该说明需要计算多少个系数）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:50:23.677

如果这不是自己实现的一些练习，我建议您使用现成的库，如[GNU gsl](http://www.gnu.org/software/gsl/)。查看名称以开头的函数，`gsl_multifit_`例如[这里](http://www.gnu.org/software/gsl/manual/html_node/Fitting-Examples.html)的第二个示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T10:54:31.663

如果您尝试像在图形中一样拟合有序点 (x,y)，您可以使用线性最小二乘法，但始终使用此类方法，您需要指定用于近似的多项式的次数（答案数组的长度想必）。如果您的点是平面中能够形成闭环或某些结构轮廓的一般有序点（例如，试图拟合描述椭圆或圆或其他闭合或更复杂几何形状的点），那么您将需要更复杂的东西。您仍然可以使用最小二乘法，但您需要使用样条曲线等参数类型曲线。看看这个链接上的pdf，它可能会给出你需要的东西（或者至少说明我在说什么）：[http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CE0QFjAA&url=http%3A%2F%2Ffolk.uio.no%2Fin329%2Fnchap6.pdf&ei=Yp8CUNvHC8Kg0QX6r_mEBw&usg=AFQjCNHBUZ5t2Y7C8eONYSosRyA](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CE0QFjAA&url=http%3A%2F%2Ffolk.uio.no%2Fin329%2Fnchap6.pdf&ei=Yp8CUNvHC8Kg0QX6r_mEBw&usg=AFQjCNHBUZ5t2Y7C8eONYSosRydLs4Zu4A)

如果没有看到您正在尝试拟合的确切图像，很难说 - 您的数据很可能可以通过线性最小二乘多项式以非参数方式拟合 - 如果是这样，您只需要一个线性代数库你可以像这样自己编写近似值：[http ://en.wikipedia.org/wiki/Ordinary_least_squares](http://en.wikipedia.org/wiki/Ordinary_least_squares)

即便如此，所有形式的近似都要求您在拟合之前确定您的形式（功能基础和度数等）。例如，如果您想决定是否需要 4 次、5 次、6 次或 7 次多项式拟合您的数据，您需要拟合每个数据并评估是否适合您自己。没有通用的方法（至少我知道没有）可以告诉您需要适合您的数据的近似程度。

# lua - 协程，Lua 中的多个请求

> ID：11490917
> 
> 赞同：2
> 
> 时间：2012-07-15T09:41:06.717
> 
> 标签：lua, coroutine

在过去的 12 个小时里，我一直在研究这个主题，但我似乎无处可去。我什至不知道这是否可能，但我希望这是因为它对继续我的项目大有帮助。

我正在尝试做的是创建协程，因此我使用的特定程序不会因为无法执行异步 http 请求而冻结。尽管我对协程的理解还停留在“嗯？它是如何工作的？”中，但我已经想出了如何去做那部分。阶段。我现在的问题是能够使用正确的信息响应多个请求。例如，以下应产生三个单独的响应：

```
foo(a)
foo(b)
foo(c) 
```

where`foo`用里面的参数启动一个协程。如果全部单独请求，则返回正确的结果。但是，如果作为块请求，它只会返回`foo(c)`'s 结果。现在，我理解了这背后的原因，但我无法找到一种方法让它在作为一个块被请求时返回所有三个结果。为了帮助理解这个问题，这里是实际的代码：

```
function background_weather()
local loc = url.escape(querystring)
weatherpage = http.request("http://api.wunderground.com/api/004678614f27ceae/conditions/q/" .. loc .. ".json")
wresults = json.decode(weatherpage)
--process some stuff here, mainly datamining
end
--send datamined information as a response
coroutine.yield()
end 
```

以及协程的创建：

```
function getweather ()
-- see if backgrounder running
  if background_task == nil or
   coroutine.status (background_task) == "dead" then
-- not running, create it
   background_task = coroutine.create (background_weather)
-- make timer to keep it going
 AddTimer ("tickler", 0, 0, 1, "",
           timer_flag.Enabled + timer_flag.Replace,
           "tickle_it")
  end  -- if
end -- function 
```

该`querystring`变量是使用初始请求设置的。我这里没有包含它，但是为了测试，`12345`作为`querystring`变量使用。计时器是脚本的原始作者初始化的东西，用于检查协程是否仍在运行，每秒戳一次背景直到完成。老实说，我什至不确定我是否正确地做到了这一点，尽管它似乎在程序中异步运行。

那么，是否可以在一个块中接收多个请求并正确返回多个响应？或者这对 Lua 来说是一项太多的任务吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T11:48:58.220

协程不是那样工作的。实际上，它们是阻塞的。

协程解决的问题是“我想要一个可以执行一段时间的函数，然后回去做其他事情，然后回来并保持与我离开时相同的状态”。

请注意，我没有说“我希望它在我做其他事情时继续运行”；代码流在协程上“停止”，只有在您返回时才会继续。

使用协程，您可以修改（并且在某些情况下促进）代码的行为方式，使其更加明显或易读。但它仍然是严格的单线程。

请记住，Lua 实现的内容必须由 C99 指定。由于这个标准没有线程实现，Lua 默认是严格的单线程的。如果你想要多线程，你需要将它连接到一个外部库。例如，[luvit](http://luvit.io/)将 Luajit 与 libuv 库挂钩以实现此目的。

几个很好的参考：

*   [http://lua-users.org/wiki/CoroutinesTutorial](http://lua-users.org/wiki/CoroutinesTutorial)
*   [http://lua-users.org/wiki/ThreadsT​​utorial](http://lua-users.org/wiki/ThreadsTutorial)
*   [http://lua-users.org/wiki/MultiTasking](http://lua-users.org/wiki/MultiTasking)
*   [http://kotisivu.dnainternet.net/askok/bin/lanes/comparison.html](http://kotisivu.dnainternet.net/askok/bin/lanes/comparison.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:34:08.920

[Programming in Lua 的第 9.4 章](http://www.lua.org/pil/9.4.html)包含一个很好的例子来说明如何处理这个确切的问题，使用协程和 LuaSocket 的 socket.select() 函数来防止忙循环。

不幸的是，我不相信有任何方法可以将 socket.http 函数与 socket.select 一起使用；PiL 示例中的代码通常是您所需要的，但它不能处理一些相当常见的情况，例如请求的 URL 发送重定向。

# c - 在 C 中是否可以控制函数参数的对齐方式？

> ID：11490921
> 
> 赞同：3
> 
> 时间：2012-07-15T09:41:38.423
> 
> 标签：c

在 C 中，使用 MSVC 和/或 GCC，是否可以控制函数参数的对齐方式？

例如

```
int main()
{
  __declspec( align(64) ) unsigned long long int
    test = 5;
  my_function_call( test );
  return( EXIT_SUCCESS );
}

void my_function_call( unsigned long long int fc_test )
{
  return;
} 
```

我希望实现的是 fc_test 是 64 字节对齐的。

AFAICT，这是不可能的，但寻求确认/否认。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T12:06:07.603

当 my_function_call 被调用时，它被传递了一份测试。它本身没有通过测试，因此测试的对齐是无关紧要的。对齐属性是测试对象的属性，而不是其值。

参数以平台指定的方式传递。通常，小参数在寄存器中传递。在大多数机器上，寄存器是不属于内存的特殊硬件，因此它们没有地址，因此没有对齐。

如果参数很大，平台规范可能会指定它在内存中传递。然后调用函数的工作是将 test 的副本放入内存并将其地址传递给被调用函数，并让被调用函数使用该地址来检索副本。编译器可能会对临时副本的对齐方式产生一些影响，但我不知道有任何编译器会这样做。

如果出于某种原因，您希望向被调用函数传递一个对齐的地址，那么不要传递 test 的值，而是传递其地址或副本的地址（这也作为对齐属性）。此外，如果您要传递对齐的地址并希望被调用的函数知道它是对齐的，则将函数的参数声明为指向具有对齐属性的类型的指针。（这样做的语法取决于编译器，因为它不是标准 C 的一部分。我怀疑这样做的一种方法是使用 typedef 定义一个类型，并在 typedef 中包含对齐属性，然后声明函数参数成为该类型的指针。）

您不应该无缘无故地关注对象的对齐方式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-15T15:27:31.827

在 x64 上，对齐是 16 个字节。

在 ARM 上，以 8 个字节对齐。

在 x86 上，对齐是 4 个字节。如果将堆栈上的变量按值传递给将执行连续双字比较和交换的函数，则*可能*会出现未对齐和段错误。我认为您需要传递变量的地址，或者定义一个本地变量并复制参数。

似乎无法用 MSVC 控制。GCC 显然*确实*尊重堆栈变量定义对齐限定符（！）

# facebook-apps - runwithfriends 许可信息

> ID：11490923
> 
> 赞同：0
> 
> 时间：2012-07-15T09:41:55.903
> 
> 标签：facebook-apps, facebook-canvas

我找不到 runwithfriends 示例 FB 应用程序的许可信息。任何人都可以请我指向此信息的链接吗？彻底搜索但找不到任何东西。我想大量编辑这个应用程序来制作我自己的应用程序，因为我的应用程序的功能有点相似。

我们可以自由地使用示例应用程序来构建我们自己的吗？他们有执照吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:40:46.480

许可信息可以在 main.py 的顶部找到。

# matlab - 根据 ID 将文件中的字段附加到另一个文件

> ID：11490925
> 
> 赞同：0
> 
> 时间：2012-07-15T09:42:14.063
> 
> 标签：matlab, awk

基本上，我需要一个可以在很短的时间内解决问题的脚本。我有两个文件：

$头-n 6 fcu.tsv

```
NM576455     0.324009324     0.578896174     2577
NM539570     0.204545455     0.607877092     2247
NM337132     0.288973384     0.673636364     792
NM374379     0.308300395     0.42            762
NM373443     0.263043478     0.547132867     1383
NM371839     0.298210736     0.492857143     1512 
```

$ 头 -n 6 集市.tsv

```
NM539570 ILMN_2199362    15      58.52   protein_coding
NM576455 ILMN_2195138    1       65.74   protein_coding  nucleus cellular_component      SAM_2
NM576455 ILMN_2195138    1       65.74   protein_coding  protein binding molecular_function      SAM_2
NM576455 ILMN_1709067    1       65.74   protein_coding  nucleus cellular_component      SAM_2
NM576455 ILMN_1709067    1       65.74   protein_coding  protein binding molecular_function      SAM_2
NM576455 ILMN_2195138    1       65.74   protein_coding  nucleus cellular_component      SAM_type1 
```

我们需要在很短的时间内为每个 NM id 将 fcu.tsv 的第 2、3 和 4 个字段附加到 mart.tsv。

$ head out.tsv

```
NM539570 ILMN_2199362    15      58.52   protein_coding  0.204545455     0.607877092     2247
NM576455 ILMN_2195138    1       65.74   protein_coding  nucleus cellular_component      SAM_2 0.324009324   0.578896174     2577
    NM576455 ILMN_2195138    1       65.74   protein_coding  protein binding molecular_function      SAM_2 0.324009324   0.578896174     2577
    NM576455 ILMN_1709067    1       65.74   protein_coding  nucleus cellular_component      SAM_2 0.324009324   0.578896174     2577
    NM576455 ILMN_1709067    1       65.74   protein_coding  protein binding molecular_function      SAM_2 0.324009324   0.578896174     2577
    NM576455 ILMN_2195138    1       65.74   protein_coding  nucleus cellular_component      SAM_type1 0.324009324   0.578896174     2577 
```

这就是我在 matlab 中所做的（我更喜欢该解决方案在此处修复错误代码以使其更快，而不是编写新代码）

```
fr1 = fopen('fcu.tsv', 'r');
fr2 = fopen('mart.tsv', 'r');

fw = fopen('out.tsv', 'w');

while feof(fr1) == 0
   line = fgetl(fr1);
   scan = textscan(line, '%s%f%f%d');

   frewind(fr2);

    while feof(fr2) == 0
        line2 = fgetl(fr2);
        scan2 = textscan(line2, '%s%s%s%f%s%s%s%s');

            if scan{1}{1} == scan2{1}{1} 

                fprintf(fw, '%s\t%f\t%f\t%d\n', line2, scan{2}, scan{3}, scan{4});

            end

    end

end 
```

帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T10:33:22.070

一种使用方式`awk`。例如`FNR == NR`，它读取参数的第一个输入文件 ( `fcu.tsv`) 并将第一个字段作为键保存在哈希中，其余字段`\t`作为值连接。对于`FNR < NR`读取`mart.tsv`，如果第一个字段与哈希的键匹配，则在行尾加入其值，否则打印原始行。

内容`script.awk`：

```
BEGIN {
    OFS = "\t"
}

FNR == NR {
    for ( i = 2; i <= NF; i++ ) { 
        line = (line ? line OFS : "") $i
    }   
    fcu[ $1 ] = line 
    line = ""
    next
}

FNR < NR {
    if ( $1 in fcu ) { 
        print $0 OFS fcu[ $1 ]
    }   
    else {
        print $0
    }   
} 
```

像这样运行它：

```
awk -f script.awk fcu.tsv mart.tsv 
```

具有以下输出：

```
NM539570 ILMN_2199362    15      58.52   protein_coding 0.204545455     0.607877092     2247
NM576455 ILMN_2195138    1       65.74   protein_coding  nucleus cellular_component      SAM_2  0.324009324     0.578896174     2577
NM576455 ILMN_2195138    1       65.74   protein_coding  protein binding molecular_function      SAM_2  0.324009324     0.578896174     2577
NM576455 ILMN_1709067    1       65.74   protein_coding  nucleus cellular_component      SAM_2  0.324009324     0.578896174     2577
NM576455 ILMN_1709067    1       65.74   protein_coding  protein binding molecular_function      SAM_2  0.324009324     0.578896174     2577
NM576455 ILMN_2195138    1       65.74   protein_coding  nucleus cellular_component      SAM_type1      0.324009324     0.578896174     2577 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:12:08.803

这是一个以命令行为中心的解决方案，适用于任何支持的系统`coreutils`，如果它不适用于您的情况，我们深表歉意。

如果`mart.tsv`正确填充，如下所示：

```
NM539570 ILMN_2199362    15      58.52   protein_coding  NA      NA                 NA                      NA
NM576455 ILMN_2195138    1       65.74   protein_coding  nucleus cellular_component NA                      SAM_2
NM576455 ILMN_2195138    1       65.74   protein_coding  protein binding            molecular_function      SAM_2
NM576455 ILMN_1709067    1       65.74   protein_coding  nucleus cellular_component NA                      SAM_2
NM576455 ILMN_1709067    1       65.74   protein_coding  protein binding            molecular_function      SAM_2
NM576455 ILMN_2195138    1       65.74   protein_coding  nucleus cellular_component NA                      SAM_type1 
```

解决方案可能很简单`join`（参见 参考资料`info join`）：

```
$ join <(sort mart.tsv) <(sort fcu.tsv) | column -t
NM539570  ILMN_2199362  15  58.52  protein_coding  NA       NA                  NA                  NA         0.204545455  0.607877092  2247
NM576455  ILMN_1709067  1   65.74  protein_coding  nucleus  cellular_component  NA                  SAM_2      0.324009324  0.578896174  2577
NM576455  ILMN_1709067  1   65.74  protein_coding  protein  binding             molecular_function  SAM_2      0.324009324  0.578896174  2577
NM576455  ILMN_2195138  1   65.74  protein_coding  nucleus  cellular_component  NA                  SAM_2      0.324009324  0.578896174  2577
NM576455  ILMN_2195138  1   65.74  protein_coding  nucleus  cellular_component  NA                  SAM_type1  0.324009324  0.578896174  2577
NM576455  ILMN_2195138  1   65.74  protein_coding  protein  binding             molecular_function  SAM_2      0.324009324  0.578896174  2577 
```

`column`来自`bsdmainutils`包。

# c# - 你会为 1 个类实现一个接口还是为 2 个类实现 2 个接口

> ID：11490926
> 
> 赞同：0
> 
> 时间：2012-07-15T09:42:23.763
> 
> 标签：c#, class, interface

当你看到这个接口时，你会把它分成 2 个接口和 2 个具体类吗？或者您会创建 1 个接口和 1 个类。

对我来说，只为 2 个方法创建另一个接口和类似乎是一种开销，但好吧......

另一个想法如何处理这种情况？

```
public interface IUnitDataProvider
{
        // Testplan methods
        IEnumerable<Unit> GetTestplanRootUnits(int templateId, int testplanId);        

        // Template methods
        IEnumerable<Unit> GetTemplateRootUnits(int templateId);
        void AddUnit(Unit unit);
        void DeleteUnit(int unitId);
        bool UnitExists(string unitName, int templateId);

        // Mutual methods
        IEnumerable<Unit> GetChildrenUnits(int templateId, int parentId);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T10:08:47.187

您应该提出一个问题“为什么我们需要将接口拆分为 2 个单独的类和 2 个具体类”。但是，如果它使您了解业务逻辑，则可以这样做。

从软件度量的角度来看，您拥有的凝聚力越强，您获得的类设计就越强大。有许多论文证明了这个假设。您可以对此链接进行一些参考[Introduce contents of cohesion metric](http://www.aivosto.com/project/help/pm-oo-cohesion.html)

在您的情况下，我认为您应该将其拆分为两个接口来处理模板测试和测试计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:33:27.137

您应该为您必须面对的每个问题创建一个接口，并为您为此类问题创建的每个解决方案创建一个类。我将实现 IUnitDataProvider 的类作为[外观](http://en.wikipedia.org/wiki/Facade_pattern)，用更多的接口和类在内部解决问题。但是对于外观，您的界面似乎是正确的。我看到的唯一问题是，如果 TestPlan（和 GetTestplanRootUnits）对您的测试用例进行冷藏，我认为将它放在“域”接口中不是一个好主意。可以将测试用例所需的东西放在问题域的接口或类中，只要您需要的东西确实存在并且在问题域中本身就有意义，在忘记测试需要它之后。如果您在问题域中找不到它，并且找不到不包含 Test something 的名称，那么您可能应该考虑该事物存在于哪个问题域中，并为它创建另一个接口和类你正在解决的那个领域的事情。

# css - 为什么指定为 1.0em 的高度会略小于字体大小而不是相等？

> ID：11490927
> 
> 赞同：1
> 
> 时间：2012-07-15T09:42:25.550
> 
> 标签：css

考虑 Chrome 调试器中显示元素样式的以下显示：

```
font-size: 18px;
height: 17.600000381469727px;
    .a, .h, .r - 1.0em
left: 52.80000305175781px;
line-height: 17.600000381469727px;
    .a, .h, .r - 1.0em 
```

我的理解是，既然高度被指定为 1.0em，那么它的像素值应该正好等于字体大小；相反，由于某种原因，它小了 0.4 像素。没有填充或边距的影响。

令人困惑的是，在早期版本中一切正常：

```
font-size: 18px;
height: 18px;
    .stone, .iw-capture - 1em
line-height: 18px;
    .stone, .mark, .iw-capture - 1.0em 
```

因此，浏览器进行数学运算的能力并没有根本性的问题。但是，我无法弄清楚是什么改变导致了奇怪的行为，或者为什么任何改变都会对此产生影响。

关于为什么会发生这种情况或我缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:57:16.953

计算公式`em`是

```
1 ÷ parent font size (px) × required pixels = em equivalent 
```

正如您所看到的那样，除以`1`您`18`的情况会给您一个非常长的浮点数，稍后将乘以`18`- 它不会给您完全相同的整数。那是浏览器的数学引擎..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T09:47:57.457

看起来它出于某种原因使用了元素的行高。

# jquery - 将 jquery ui 自动完成选择传递给变量

> ID：11490931
> 
> 赞同：2
> 
> 时间：2012-07-15T09:44:09.003
> 
> 标签：jquery, variables, select, user-interface, autocomplete

`href`我有一个 JQuery 函数可以在添加或删除属性时更改按钮的颜色。如果我用模糊启动它，它会完美地工作

```
$("#name").blur(function() {
        var standards_name = $("#name").val();
        var standards_link = $("#standardslink");
        var update_log = $("#update_log");
        if(jQuery.inArray(standards_name, standards) != -1) {
            if(companyid !== null) {
                standards_link.attr("href", basic_href + "?standards_name=" + standards_name + "&company_id=" + companyid);
            } else {
                standards_link.attr("href", basic_href + "?standards_name=" + standards_name);
            }   
            standards_link.css("color","#2EE52B");
        } else if(standards_name == "") {   
            standards_link.removeAttr("href");
            standards_link.css("color","black");
            update_log.hide();
        } else {
            standards_link.removeAttr("href");
            standards_link.css("color","#FF0011");
            update_log.hide();
        } 
    }); 
```

但希望它在自动完成下拉列表中的选择上启动。这是我无法再进一步的地方。如果我手动设置变量“standards_name”，粘贴的代码就可以工作，例如，`var standards_name = "xxxx";`但我希望将`ui.item.ticker_name`值传递给变量。（“standards”数组和“companyid”`PHP` `json_encode`在脚本中较早地设置和传递，并且工作正常）

这是代码：

```
$(function() {

        $("#name").autocomplete({
            source: "../autocomplete.php",
            minLength: 2,
            select: function(event, ui) {
            $('#name').val(ui.item.ticker_name);
            $('#mktcap').val(ui.item.mkt_cap);
            var standards_name = ui.item.ticker_name;
            var standards_link = $("#standardslink");
            var update_log = $("#update_log");
            if(jQuery.inArray(standards_name, standards) != -1) {
                if(companyid !== null) {
                    standards_link.attr("href", basic_href + "?standards_name=" + standards_name + "&company_id=" + companyid);
                } else {
                    standards_link.attr("href", basic_href + "?standards_name=" + standards_name);
                }   
                standards_link.css("color","#2EE52B");
            } else if(standards_name == "") {   
                standards_link.removeAttr("href");
                standards_link.css("color","black");
                update_log.hide();
            } else {
                standards_link.removeAttr("href");
                standards_link.css("color","#FF0011");
                update_log.hide();
            } 
            }     

        });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:58:34.903

最简单的解决方法是在选择处理程序中作弊添加

```
$("#name").attr("standards_name",ui.item.ticker_name); 
```

在第一个块中，您可以简单地

```
 var standards_name = $("#name").attr("standards_name"); 
```

更好的是使用 jQuery Data 函数来保存所有对象:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:29:49.310

利用

```
$("#name").autocomplete({
 source: function (request, response) {
/*Souse code here*/
},
select: function (e, i){
/*Selection code here inorder to get value use i.item.val*/

}
}) 
```

# entity-framework - 实体框架 - 向构造函数提供连接字符串

> ID：11490933
> 
> 赞同：1
> 
> 时间：2012-07-15T09:44:41.437
> 
> 标签：entity-framework

我在我的 C# 项目中使用 EF。我们即将添加客户端，这些客户端将拥有其他数据库和其他连接字符串。
无需在 DB 之间进行同步。
我尝试使用以下 c'tor（提供的 3 个中的第 2 个）：

```
 public AppEntities(string connectionString) 
```

我收到以下错误：'不支持关键字：'数据源'。' 连接字符串如下：

```
metadata=res://EntityFramework/App.csdl|res://EntityFramework/App.ssdl|res://EntityFramework/App.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=dbname\dbname;Initial Catalog=App;Persist Security Info=True;User ID=User;Password=password;MultipleActiveResultSets=True&quot; 
```

这与从 App.Config 获取时使用的连接字符串相同。我不想从那里拿走它，而是自己构建它（因此将用户名和密码硬编码在我的应用程序代码中而不是自由文本中。
知道吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T09:52:52.247

connectionstring 参数不是[实体框架连接](http://msdn.microsoft.com/en-us/library/bb738533.aspx)字符串（如 .config 文件中），但它必须是“正常”的 .net 连接字符串。

该链接的示例显示了如何将 ef 连接字符串“转换”为普通连接字符串（使用**EntityConnectionStringBuilder.ToString()**方法）。如果您传递 app.config 的未准备字符串，您将收到上述错误。

您可以使用[EntityConnectionStringBuilder](http://msdn.microsoft.com/de-de/library/system.data.entityclient.entityconnectionstringbuilder.aspx)解析 app.config 值并进行转换。

希望有帮助。

# django - 是否可以禁止使用美味派对资源进行索引？

> ID：11490937
> 
> 赞同：0
> 
> 时间：2012-07-15T09:45:18.203
> 
> 标签：django, api, rest, tastypie

我想`read`在 api 上可见：

```
/api/resource/1 
```

但不是`index`：

```
/api/resource/ 
```

django-tastypie 可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:54:41.867

根据文档，我们可以使用[Meta.list_allowed_methods](http://django-tastypie.readthedocs.org/en/latest/resources.html#list-allowed-methods)限制索引方法：

```
class Resource(ModelResource)
    class Meta:
        list_allowed_methods = [] 
```

`HTTP 405: METHOD NOT ALLOWED`尝试访问时会产生一个`/api/v1/resource/`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:16:15.443

你想在这里达到什么目的？

可以限制每个用户在 /api/resource 中显示的列表。这可以使用类似的东西来完成：

```
def get_object_list(self, request):
    return super(ResourceName, self).get_object_list(request).filter(user=request.user) 
```

# java - 使用按钮的 Android XML 布局

> ID：11490938
> 
> 赞同：0
> 
> 时间：2012-07-15T09:45:38.397
> 
> 标签：java, android, xml, android-layout, android-emulator

我想在一个水平方向的线性布局中添加两个按钮，如果屏幕更大，我希望我的按钮被拉伸，如果屏幕很小，我应该怎么做才能让它们保持相同的大小？

填充父级或匹配父级导致屏幕上仅显示一个，应该如何使它们在任何屏幕尺寸上同时可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:49:03.527

给他们两个以下属性：

```
weight =1
layout_width=fill_parent 
```

这是一个工作代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button 1" >
    </Button>

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button 2" >
    </Button>

</LinearLayout> 
```

# joomla - Joomla 2.5 显示子类别列表下的文章

> ID：11490941
> 
> 赞同：2
> 
> 时间：2012-07-15T09:45:50.077
> 
> 标签：joomla, joomla2.5

我有一个主要类别（不孕症）和子类别（正常生活、原因、诊断、治疗），每个子类别下都有一个文章列表。我尝试了所有菜单模式，列出所有类别，类别列表，类别博客和所有，以便在同一页面中显示每个子类别下的文章列表，但没有成功。请指教

我想要：主类别-子类别
1
--Articles1
--Articles2 -子类别
2
--Articles1
--Articles2

我得到的是

主类- 子类
1
文章数 3

- 子类 2
文章数 5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T23:02:32.290

我最近没有高兴地尝试这样做。我做到了，但是在安装 K2 后大约 5 分钟内成功完成了它。使用“最新项目”菜单类型，而不是选择父类别，而是选择所有子类别。

相当严厉的解决方案，但它有效。

# php - PDO 插入问题

> ID：11490942
> 
> 赞同：0
> 
> 时间：2012-07-15T09:46:04.150
> 
> 标签：php, javascript, jquery, ajax, pdo

我正在尝试使用 jQuery post 传递一个对象。它通过了，但是 php 代码出了点问题：

```
} elseif($_GET['action'] == "insertQty") {
    $obj = json_decode($_POST['param']);
    $scArr = $obj->{'data'};
    $od_id = $obj->{'id'};

    for($i = 0; $i < count($scArr); $i++){
        $pd_id = substr($scArr[$i], 5);
        $pQty = $obj->{$scArr[$i]};

        $stmt = $DBH->prepare("INSERT INTO tbl_order_item_test (od_id, pd_id, od_qty) VALUES (:oId, :pId, :pQty)");

        $stmt->bindParam(':oId', $od_id);
        $stmt->bindParam(':pId', $pd_id);
        $stmt->bindParam(':pQty', $pQty);

        $stmt->execute(); 
    }
} 
```

`$scArr[$i]`= "prod_#" 其中 # 是某个数字。因此`substr(5) = #`。

对象：

```
var array = getArray();  
var itemsObj = {};

itemsObj['data'] = shoppingCart;
itemsObj['id'] = data;

//for-loop here to dynamically insert data to the obj.

$.post(url, "param=" + JSON.stringify(itemsObj), "html"); 
```

什么不能正常工作？这很可能是第一段代码的问题，因为对象在使用`alert()`.

编辑：

`print_r($obj)`：

```
stdClass Object
(
     [data] => Array
        (
             [0] => prod_2
        )

     [id] => 1024
     [prod_2] => 8
) 
```

你几乎可以`$scArr`从上面猜到输出......基本上所有与对象相关的东西都很好。

# spring - Spring Webflow（和 Freemarker） - 将页面限制为一个用户

> ID：11490946
> 
> 赞同：1
> 
> 时间：2012-07-15T09:46:24.680
> 
> 标签：spring, freemarker, spring-webflow

我正在使用 Spring Webflow、Freemarker、Hibernate (JPA) 和 Oracle 开发应用程序。

在应用程序中，我有一个**管理页面**，该页面应该**只能对一个用户进行编辑**。一旦用户正在编辑该页面，其他访问该页面的用户应将该页面显示为**仅查看**页面，并且当他们打开该页面时应收到警告“ *X 正在编辑此页面，因此您的访问权限为只读*”。

这可以在 Webflow 或 Freemarker 中轻松完成吗？

欢迎任何建议。

谢谢

**更新 1**

我也在使用 JPA（休眠）。

**更新 2**

并且应用程序将部署在集群的 JBoss 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T10:11:17.107

我会改用乐观锁定。以下策略是 JPA 使用的策略。

您将一个`version`字段添加到包含要编辑的数据的表中。每次加载要编辑的数据时，也会加载该`version`字段。每次修改数据时，您都会将此版本字段增加 1。但是为了能够保存数据，您必须有一个与存储在数据库中的版本相同的内存版本：

```
update data set ..., version = version + 1 where ... and version = :inMemoryVersion 
```

如果上述查询没有更新任何内容，则表示数据已被其他人更新。在这种情况下，您抛出异常并告诉管理员刷新页面并重做他的编辑。

如果你真的想要悲观锁定，那么你需要维护一些内存中（在应用程序中未集群）或数据库中的锁，尝试锁定锁，如果页面已经锁定，则以只读方式显示页面。更新完成后，您必须释放锁定。问题是如果更新从未完成。在这种情况下，您需要使用`HttpSessionListener`，并在调用时释放锁`sessionDestroyed()`，如果锁被正在销毁的会话持有。

# python - django pages cms 文件上传问题与 django-storages for s3

> ID：11490947
> 
> 赞同：0
> 
> 时间：2012-07-15T09:46:36.393
> 
> 标签：python, django, amazon-s3, django-cms, django-storage

大家好，感谢您花时间看我的问题。

我将 django-pages-cms 与 s3_folder_storage [http://pypi.python.org/pypi/django-s3-folder-storage一起使用，这是 django_storages](http://pypi.python.org/pypi/django-s3-folder-storage) [https://bitbucket.org/david/django-storages/](https://bitbucket.org/david/django-storages/)的扩展。

当我在模板中放置 img 占位符时，管理员会按预期显示文件上传。在我正确设置我的 s3 凭据之前，它还显示来自 s3 的 403 错误。

我在管理员中选择了一个文件并单击提交。当页面重新加载时，它显示图像已被存储。即它列出了当前的图像文件。

但是，我在我的服务器或 s3 上的任何地方都找不到图像文件。当我在浏览器中加载页面时，它指向 s3 上的正确路径，但无法加载它，因为它不存在。

有人对我如何尝试调试这个有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:51:39.950

这些文件已上传到 s3 上的不同文件夹，如媒体根目录中设置的那样。我的错！

# php - mysqli 更新数据库

> ID：11490948
> 
> 赞同：1
> 
> 时间：2012-07-15T09:46:41.933
> 
> 标签：php, mysqli

我希望用户能够更新他的信息，例如，如果他在开始的 phone1、phone2、phone3 输入了能够更改它们，但如果他将 phone1 留空，我想保留他的第一个条目。

直到现在我使用了 x3 次（每个条目一个）这段代码：

```
if(empty($_POST['phone1'])){
    $phone1='';
}else if(
    $stmt = $mysqli->prepare('UPDATE register SET Phone_No=? WHERE E_Mail=?'){
    $stmt->bind_param("ss", $phone1, $email); 
    $stmt->execute();
    $stmt->close();
}
//same for phone 2
//same for phone 3 
```

有没有办法编译这些代码，所以我只写一次 mysqli->prepare('update') 并且只更新用户想要的字段？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T13:17:16.290

好吧，这取决于您所说的条目，三个帖子值中的第一个还是数据库上的前一个记录？！

**假设用户只提供两个值**

```
$_POST['phone1'] = 34234034234;
$_POST['phone2'] = 32423423423; 
```

**你可以试试这样的**

```
$values = array_intersect_key( $_POST, array_flip( array('phone1','phone2','phone3') ) );

$query = 'update register set';

if ( isset($values['phone1']) ) $query.= ' Phone1_No = ?,';
if ( isset($values['phone2']) ) $query.= ' Phone2_No = ?,';
if ( isset($values['phone3']) ) $query.= ' Phone3_No = ?,';

$query = rtrim($query, ',') . ' where E_Mail = ?';

$stmt = $mysqli->prepare($query);

array_unshift($values, str_repeat('s', count($values) ) );

array_push($values, $_POST['email']); 

call_user_func_array( array($stmt, 'bind_param'), $values ); 

if ( !$stmt->execute() )
{
    // some error
}

$stmt->close(); 
```

**或坚持使用您的旧解决方案并使其更整洁，同时保持相同的逻辑并添加从 1 到 3 的简单循环：**

```
for ($i=1; $i < 3; ++$i)
{ 
    if ( !empty($_POST["phone{$i}"]) )
    {
        $stmt = $mysqli->prepare("update register set Phone{$i}_No = ? where E_Mail = ?");

        $stmt->bind_param('s', $_POST["phone{$i}"]); 

        $stmt->execute();

        $stmt->close();
    }
} 
```

# asp.net - 如何嵌套 ASP.NET 网站

> ID：11490950
> 
> 赞同：1
> 
> 时间：2012-07-15T09:46:54.087
> 
> 标签：asp.net, iis-7

是否可以将一个 ASP.NET 网站嵌套在另一个网站中，例如：

[http://example.com](http://example.com)是应用程序根目录 [http://example.com/differentsite](http://example.com/differentsite)也是应用程序根目录

如果可能的话，应该在`web.config`父网站的文件中卡什么，以防止它干扰子网站？

*注意：这适用于 .NET 4.0 共享 IIS7 主机*

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T10:07:02.563

右键单击嵌套文件夹是 IIS 管理器，然后单击“转换为应用程序”。这样他们就可以生活在一起了。如果您希望它们在单独的进程中运行，因此它们不会具有相同的应用程序池设置，请创建另一个应用程序池并将其中一个站点分配给它。顺便说一句，如果站点文件夹是嵌套的，它们不必总是以嵌套的形式出现在 IIS 管理器中。您可以将应用程序添加到默认网站（或创建新网站）并将其指向嵌套文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:24:20.433

是的，您可以通过使文件夹成为应用程序或添加指向另一个应用程序的虚拟文件夹来嵌套网站。

但是，您需要访问管理服务器上的 IIS 才能做到这一点。

# ruby-on-rails - find_by_id 返回 nil 类

> ID：11490951
> 
> 赞同：0
> 
> 时间：2012-07-15T09:46:55.023
> 
> 标签：ruby-on-rails, if-statement, controller, null

嗨，我正在尝试做一个 find_by_id，但是当调用此方法时，如果 id 不存在我得到 nil 类

```
if current_user.admin?
  @schedules = Schedule.all
elsif current_user.team_id?
  @schedules = Schedule.find_by_team_id(current_user[:team_id])
end 
```

错误

计划中的 NoMethodError#index

显示 /Users/ ***/Sites/Rails/* *** /app/views/schedules/index.html.haml 其中第 44 行提出：

nil:NilClass 的未定义方法 `each' 提取的源代码（第 44 行附近）：

```
41:               %th Location
42:               %th{:style => "color: #675100;background: url(\"/img/sprites/alertboxes/bg-warning.png\") repeat-x #ffe68b;"} Manager
43:           %tbody
44:             - @schedules.each do |schedule|
45:               %tr
46:                 %td= event_display(schedule.event)
47:                 %td 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T10:37:10.210

如果您使用 find_by_，这是正常行为，如果没有找到该属性的记录，则将返回 nil。另请注意，find_by_ 仅返回一条记录而不是 Enumerable。你应该 where(...) 或 find_all_by_ 代替

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T16:08:07.900

通过 id 查找对象和通过属性查找对象的区别在于：

1.  **主键查找方法**（按 ID）

    `@schedules = Schedule.find(<schedule_id>)`

    **结果**：如果找到，则返回一个对象。如果未找到，则引发错误。

2.  **动态查找器方法**（按任何属性）

    在这种情况下，您可以通过查找对象的任何属性来找到对象。

    `@schedules = Schedule.find_by_team_id(<attribute_id>)`

    **结果**：如果找到，则返回一个对象。如果没有找到则返回 nil。

如果您不想抛出错误或只想检查特定属性的对象是否存在，请使用动态查找器方法。

# jquery - 在网页中监控服务器事件和更新列表

> ID：11490952
> 
> 赞同：0
> 
> 时间：2012-07-15T09:46:56.127
> 
> 标签：jquery, ajax, events, live, monitor

在我在网页上展示的事件列表中，我想提供在服务器端发生事件时获取“实时”更新的功能。这样的实时监视器，而不是在轮询周期中重新加载列表。

我想我需要这样的东西：

```
- Client: open a socket to the server (ajax like), 
          listening for events, 
          if an event comes, update the visible list.
- Server: if such socket has been opened: 
          propagate any event through that socket. 
```

是否有适合此目的的 jQuery 扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:58:03.793

你可以看看[node.js](http://nodejs.org/)。

但是对于一个简单的解决方案，您所需要的只是定义`setInterval`每隔几秒/分钟发送一个 ajax 请求。

```
//runs every 3 seconds
setInterval(function(){
 //do ajax and refresh list
},3000); 
```

当然如果轮询应该经常发生，这个解决方案不是很好，在这种情况下你应该看一个长轮询解决方案。

# ruby - 安装 xapian-core 时 gcc 错误无法编译可执行文件

> ID：11490955
> 
> 赞同：0
> 
> 时间：2012-07-15T09:47:20.793
> 
> 标签：ruby, gcc, autoconf, xapian

安装 gem xapian-core 时出现错误。上面说“配置：错误：C 编译器无法创建可执行文件，请参阅 `config.log' 了解更多详细信息”

这是生成的日志文件。

```
 This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by xapian-core configure 1.2.7, which was
generated by GNU Autoconf 2.68\.  Invocation command line was

  $ ./configure --prefix=/home/ubuntu/.bundler/tmp/1841/gems/xapian-core-1.2.7.1 --exec-prefix=/home/ubuntu/.bundler/tmp/1841/gems/xapian-core-1.2.7.1

## --------- ##
## Platform. ##
## --------- ##

hostname = ip-10-28-13-19
uname -m = i686
uname -r = 3.0.0-16-virtual
uname -s = Linux
uname -v = #29-Ubuntu SMP Tue Feb 14 15:04:02 UTC 2012

/usr/bin/uname -p = unknown
/bin/uname -X     = unknown

/bin/arch              = unknown
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = unknown
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: /usr/share/ruby-rvm/gems/ruby-1.9.2-p320/bin
PATH: /usr/share/ruby-rvm/gems/ruby-1.9.2-p320@global/bin
PATH: /usr/share/ruby-rvm/rubies/ruby-1.9.2-p320/bin
PATH: /usr/share/ruby-rvm/bin
PATH: /usr/local/sbin
PATH: /usr/local/bin
PATH: /usr/sbin
PATH: /usr/bin
PATH: /sbin
PATH: /bin
PATH: /usr/games

## ----------- ##
## Core tests. ##
## ----------- ##

configure:2767: checking for a BSD-compatible install
configure:2835: result: /usr/bin/install -c
configure:2846: checking whether build environment is sane
configure:2896: result: yes
configure:3037: checking for a thread-safe mkdir -p
configure:3076: result: /bin/mkdir -p
configure:3089: checking for gawk
configure:3119: result: no
configure:3089: checking for mawk
configure:3105: found /usr/bin/mawk
configure:3116: result: mawk
configure:3127: checking whether make sets $(MAKE)
configure:3149: result: yes
configure:3224: checking how to create a ustar tar archive
configure:3237: tar --version
tar (GNU tar) 1.25
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by John Gilmore and Jay Fenlason.
configure:3240: $? = 0
configure:3280: tardir=conftest.dir && eval tar --format=ustar -chf - "$tardir" >conftest.tar
configure:3283: $? = 0
configure:3287: tar -xf - <conftest.tar
configure:3290: $? = 0
configure:3303: result: gnutar
configure:3347: checking build system type
configure:3361: result: i686-pc-linux-gnu
configure:3381: checking host system type
configure:3394: result: i686-pc-linux-gnu
configure:3435: checking how to print strings
configure:3462: result: printf
configure:3495: checking for style of include used by make
configure:3523: result: GNU
configure:3593: checking for gcc
configure:3609: found /usr/bin/gcc
configure:3620: result: gcc
configure:3849: checking for C compiler version
configure:3858: gcc --version >&5
gcc (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

configure:3869: $? = 0
configure:3858: gcc -v >&5
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/i686-linux-gnu/4.6.1/lto-wrapper
Target: i686-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.1-9ubuntu3' --with-bugurl=file:///usr/share/doc/gcc-4.6/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++,go --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-plugin --enable-objc-gc --enable-targets=all --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=i686-linux-gnu --host=i686-linux-gnu --target=i686-linux-gnu
Thread model: posix
gcc version 4.6.1 (Ubuntu/Linaro 4.6.1-9ubuntu3) 
configure:3869: $? = 0
configure:3858: gcc -V >&5
gcc: error: unrecognized option '-V'
gcc: fatal error: no input files
compilation terminated.
configure:3869: $? = 4
configure:3858: gcc -qversion >&5
gcc: error: unrecognized option '-qversion'
gcc: fatal error: no input files
compilation terminated.
configure:3869: $? = 4
configure:3889: checking whether the C compiler works
configure:3911: gcc   -R/home/ubuntu/.bundler/tmp/1841/gems/xapian-core-1.2.7.1/lib conftest.c  >&5
gcc: error: unrecognized option '-R'
configure:3915: $? = 1
configure:3953: result: no
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "xapian-core"
| #define PACKAGE_TARNAME "xapian-core"
| #define PACKAGE_VERSION "1.2.7"
| #define PACKAGE_STRING "xapian-core 1.2.7"
| #define PACKAGE_BUGREPORT "http://xapian.org/bugs"
| #define PACKAGE_URL ""
| #define PACKAGE "xapian-core"
| #define VERSION "1.2.7"
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| }
configure:3958: error: in `/home/ubuntu/.bundler/tmp/1841/gems/xapian-core-1.2.7.1/ext/xapian-core-1.2.7':
configure:3960: error: C compiler cannot create executables
See `config.log' for more details

## ---------------- ##
## Cache variables. ##
## ---------------- ##

ac_cv_build=i686-pc-linux-gnu
ac_cv_env_CCC_set=
ac_cv_env_CCC_value=
ac_cv_env_CC_FOR_BUILD_set=
ac_cv_env_CC_FOR_BUILD_value=
ac_cv_env_CC_set=
ac_cv_env_CC_value=
ac_cv_env_CFLAGS_set=
ac_cv_env_CFLAGS_value=
ac_cv_env_CPPFLAGS_set=
ac_cv_env_CPPFLAGS_value=
ac_cv_env_CPP_set=
ac_cv_env_CPP_value=
ac_cv_env_CXXCPP_set=
ac_cv_env_CXXCPP_value=
ac_cv_env_CXXFLAGS_set=
ac_cv_env_CXXFLAGS_value=
ac_cv_env_CXX_set=
ac_cv_env_CXX_value=
ac_cv_env_LDFLAGS_set=set
ac_cv_env_LDFLAGS_value=-R/home/ubuntu/.bundler/tmp/1841/gems/xapian-core-1.2.7.1/lib
ac_cv_env_LIBS_set=
ac_cv_env_LIBS_value=
ac_cv_env_build_alias_set=
ac_cv_env_build_alias_value=
ac_cv_env_host_alias_set=
ac_cv_env_host_alias_value=
ac_cv_env_target_alias_set=
ac_cv_env_target_alias_value=
ac_cv_host=i686-pc-linux-gnu
ac_cv_path_install='/usr/bin/install -c'
ac_cv_path_mkdir=/bin/mkdir
ac_cv_prog_AWK=mawk
ac_cv_prog_ac_ct_CC=gcc
ac_cv_prog_make_make_set=yes
am_cv_prog_tar_ustar=gnutar

## ----------------- ##
## Output variables. ##
## ----------------- ##

ACLOCAL='${SHELL} /home/ubuntu/.bundler/tmp/1841/gems/xapian-core-1.2.7.1/ext/xapian-core-1.2.7/missing --run aclocal-1.11'
AMDEPBACKSLASH='\'
AMDEP_FALSE='#'
AMDEP_TRUE=''
AMTAR='${SHELL} /home/ubuntu/.bundler/tmp/1841/gems/xapian-core-1.2.7.1/ext/xapian-core-1.2.7/missing --run tar'
AM_CXXFLAGS=''
ANSI_CXXFLAGS=''
AR=''
AUTOCONF='${SHELL} /home/ubuntu/.bundler/tmp/1841/gems/xapian-core-1.2.7.1/ext/xapian-core-1.2.7/missing --run autoconf'
AUTOHEADER='${SHELL} /home/ubuntu/.bundler/tmp/1841/gems/xapian-core-1.2.7.1/ext/xapian-core-1.2.7/missing --run autoheader'
AUTOM4TE=''
AUTOMAKE='${SHELL} /home/ubuntu/.bundler/tmp/1841/gems/xapian-core-1.2.7.1/ext/xapian-core-1.2.7/missing --run automake-1.11'
AWK='mawk'
BUILD_BACKEND_BRASS_FALSE=''
BUILD_BACKEND_BRASS_OR_CHERT_OR_FLINT_FALSE=''
BUILD_BACKEND_BRASS_OR_CHERT_OR_FLINT_TRUE=''
BUILD_BACKEND_BRASS_TRUE=''
BUILD_BACKEND_CHERT_FALSE=''
BUILD_BACKEND_CHERT_TRUE=''
BUILD_BACKEND_FLINT_FALSE=''
BUILD_BACKEND_FLINT_TRUE=''
BUILD_BACKEND_INMEMORY_FALSE=''
BUILD_BACKEND_INMEMORY_TRUE=''
BUILD_BACKEND_REMOTE_FALSE=''
BUILD_BACKEND_REMOTE_TRUE=''
CC='gcc'
CCDEPMODE=''
CC_FOR_BUILD=''
CFLAGS=''
CPP=''
CPPFLAGS=''
CXX=''
CXXCPP=''
CXXDEPMODE=''
CXXFLAGS=''
CYGPATH_W='echo'
DEFS=''
DEPDIR='.deps'
DLLTOOL=''
DOCUMENTATION_RULES_FALSE=''
DOCUMENTATION_RULES_TRUE=''
DOT=''
DOXYGEN=''
DOXYGEN_DOT_PATH=''
DSYMUTIL=''
DUMPBIN=''
ECHO_C=''
ECHO_N='-n'
ECHO_T=''
EGREP=''
EXEEXT=''
FGREP=''
GREP=''
HELP2MAN=''
INSTALL_DATA='${INSTALL} -m 644'
INSTALL_PROGRAM='${INSTALL}'
INSTALL_SCRIPT='${INSTALL}'
INSTALL_STRIP_PROGRAM='$(install_sh) -c -s'
LD=''
LDFLAGS='-R/home/ubuntu/.bundler/tmp/1841/gems/xapian-core-1.2.7.1/lib'
LIBOBJS=''
LIBRARY_VERSION_INFO='26:1:4'
LIBRARY_VERSION_SUFFIX=''
LIBS=''
LIBTOOL=''
LIPO=''
LN_S=''
LTLIBOBJS=''
MAINT=''
MAINTAINER_MODE_FALSE=''
MAINTAINER_MODE_TRUE=''
MAINTAINER_NO_DOCS_FALSE=''
MAINTAINER_NO_DOCS_TRUE=''
MAKEINDEX=''
MAKEINFO='${SHELL} /home/ubuntu/.bundler/tmp/1841/gems/xapian-core-1.2.7.1/ext/xapian-core-1.2.7/missing --run makeinfo'
MANIFEST_TOOL=''
MKDIR_P='/bin/mkdir -p'
NM=''
NMEDIT=''
OBJDUMP=''
OBJEXT=''
OTOOL64=''
OTOOL=''
PACKAGE='xapian-core'
PACKAGE_BUGREPORT='http://xapian.org/bugs'
PACKAGE_NAME='xapian-core'
PACKAGE_STRING='xapian-core 1.2.7'
PACKAGE_TARNAME='xapian-core'
PACKAGE_URL=''
PACKAGE_VERSION='1.2.7'
PATH_SEPARATOR=':'
PERL=''
PNGCRUSH=''
QUIET=''
RANLIB=''
RST2HTML=''
SED=''
SET_MAKE=''
SHELL='/bin/bash'
SHLIBEXT=''
STLPORT_CXXFLAGS=''
STLPORT_INCLUDE=''
STLPORT_LIBS=''
STRIP=''
USE_WIN32_UUID_API_FALSE=''
USE_WIN32_UUID_API_TRUE=''
USE_ZLIB_VG_FALSE=''
USE_ZLIB_VG_TRUE=''
VALGRIND=''
VERSION='1.2.7'
VPATH_BUILD_FALSE=''
VPATH_BUILD_TRUE=''
XAPIAN_LDFLAGS=''
ac_ct_AR=''
ac_ct_CC='gcc'
ac_ct_CXX=''
ac_ct_DUMPBIN=''
am__EXEEXT_FALSE=''
am__EXEEXT_TRUE=''
am__fastdepCC_FALSE=''
am__fastdepCC_TRUE=''
am__fastdepCXX_FALSE=''
am__fastdepCXX_TRUE=''
am__include='include'
am__isrc=''
am__leading_dot='.'
am__quote=''
am__tar='tar --format=ustar -chf - "$$tardir"'
am__untar='tar -xf -'
bindir='${exec_prefix}/bin'
build='i686-pc-linux-gnu'
build_alias=''
build_cpu='i686'
build_os='linux-gnu'
build_vendor='pc'
datadir='${datarootdir}'
datarootdir='${prefix}/share'
docdir='${datarootdir}/doc/${PACKAGE_TARNAME}'
dvidir='${docdir}'
exec_prefix='/home/ubuntu/.bundler/tmp/1841/gems/xapian-core-1.2.7.1'
host='i686-pc-linux-gnu'
host_alias=''
host_cpu='i686'
host_os='linux-gnu'
host_vendor='pc'
htmldir='${docdir}'
incdir='${prefix}/include'
includedir='${prefix}/include'
infodir='${datarootdir}/info'
install_sh='${SHELL} /home/ubuntu/.bundler/tmp/1841/gems/xapian-core-1.2.7.1/ext/xapian-core-1.2.7/install-sh'
ldflags=''
libdir='${exec_prefix}/lib'
libexecdir='${exec_prefix}/libexec'
link_all_deplibs_CXX=''
localedir='${datarootdir}/locale'
localstatedir='${prefix}/var'
mandir='${datarootdir}/man'
mkdir_p='/bin/mkdir -p'
oldincludedir='/usr/include'
pdfdir='${docdir}'
prefix='/home/ubuntu/.bundler/tmp/1841/gems/xapian-core-1.2.7.1'
program_transform_name='s,x,x,'
psdir='${docdir}'
sbindir='${exec_prefix}/sbin'
sharedstatedir='${prefix}/com'
sysconfdir='${prefix}/etc'
target_alias=''

## ----------- ##
## confdefs.h. ##
## ----------- ##

/* confdefs.h */
#define PACKAGE_NAME "xapian-core"
#define PACKAGE_TARNAME "xapian-core"
#define PACKAGE_VERSION "1.2.7"
#define PACKAGE_STRING "xapian-core 1.2.7"
#define PACKAGE_BUGREPORT "http://xapian.org/bugs"
#define PACKAGE_URL ""
#define PACKAGE "xapian-core"
#define VERSION "1.2.7"

configure: exit 77 
```

我在这里先向您的帮助表示感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:33:16.320

github 上的这张票有一些有用的链接：您可以应用的补丁和 xapian-full gem 的替代更新版本：[https ://github.com/danmunn/redmine_dmsf/issues/62](https://github.com/danmunn/redmine_dmsf/issues/62)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T10:00:39.490

显然，您的 gcc 不允许您使用`-R`. 如果你能找到有问题的行（看起来它`conftest.c`正在 xapian-core 的源代码中编译）并更改`-R`为`-Wl,-R`，它可能会起作用。

这个[线程](http://gcc.gnu.org/ml/gcc-help/2001-05/msg00086.html)是相关的。

# javascript - 如何处理点击扩展图标？

> ID：11490957
> 
> 赞同：0
> 
> 时间：2012-07-15T09:47:43.837
> 
> 标签：javascript, google-chrome, google-chrome-extension

我想做一些类似于谷歌邮件检查器的事情：当用户点击图标时 - 我们应该在新标签中打开一些 url，但前提是没有在标签中打开带有该 url 的标签。

请帮助我，如何轻松做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T10:21:48.387

1.  在清单中定义[浏览器操作](http://code.google.com/chrome/extensions/browserAction.html)
2.  将事件侦听器附加到[`chrome.browserAction.onClicked`](http://code.google.com/chrome/extensions/browserAction.html#event-onClicked).
3.  [`chrome.tabs.create`](http://code.google.com/chrome/extensions/tabs.html#method-create)使用该方法打开一个新选项卡。您可以遍历所有选项卡以检查是否存在带有[`chrome.windows.getAll`](http://code.google.com/chrome/extensions/windows.html#method-getAll).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T04:35:19.417

您可以使用此代码段。它检查是否已打开包含 URL（或可选匹配模式）的选项卡。如果是，则该选项卡获得焦点并在其中加载 URL。如果没有，则打开新选项卡：

```
function reuseTab(url, match) {
    if (url) {
        var match = match || url;
        chrome.tabs.query({url : match}, function (foundTabs) {
            if (foundTabs[0]) {
                chrome.tabs.update(foundTabs[0].id, {active : true, url : url});
            } else {
                chrome.tabs.create({url : url});
            }
        });
    }
} 
```

您可以在 GitHub 上查看使用示例和详细注释以及解释：

[https://github.com/fczbkk/chrome-extension-snippets/blob/master/js/reuse-tab.js](https://github.com/fczbkk/chrome-extension-snippets/blob/master/js/reuse-tab.js)

# python - 用于在 python 中导入导出的 csv 联系人的解析器

> ID：11490958
> 
> 赞同：0
> 
> 时间：2012-07-15T09:47:46.160
> 
> 标签：python, gmail, hotmail, yahoo-mail

一个稍微笼统的问题，但有没有人知道 python 实现或模块可以从谷歌邮件、hotmail、雅虎邮件中获取导出的 csv 文件，并返回一个包含名称（名字、第二个名字）和电子邮件地址的数组或字典。

我知道如何读取 csv 文件，这不是问题，我对可靠地解析分隔输出更感兴趣。我已经完成了 google.csv 的导出，并且有很多复制。

我对 csv 文件的布局结构感兴趣，而不是如何读取它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T09:52:00.837

有一个内置模块`csv`。[http://docs.python.org/library/csv.html](http://docs.python.org/library/csv.html)。

```
import csv 
```

它支持分隔和转义的内容。

转换为字典：

```
import csv
import StringIO
csv_txt = """fname,lname,phone,fax,notes
d,a,555,556,hollywood
c,b,666,667,beast"""

content = csv.reader( StringIO.StringIO(csv_txt))
headings = content.next()
print [dict((headings[col], row[col]) for col in xrange(len(row))) 
       for row in content] 
```

结果：

```
[{'lname': 'a', 'phone': '555', 'fax': '556', 'notes': 'hollywood', 'fname': 'd'},
 {'lname': 'b', 'phone': '666', 'fax': '667', 'notes': 'beast', 'fname': 'c'}] 
```

# angularjs - 如何在没有 html 元素的情况下使用 ng-repeat

> ID：11490968
> 
> 赞同：148
> 
> 时间：2012-07-15T09:49:57.140
> 
> 标签：angularjs

我需要使用`ng-repeat`（在 AngularJS 中）列出数组中的所有元素。

复杂之处在于，数组的每个元素都将转换为表格的一、二或三行。

如果在元素上使用，我无法创建有效的 html，因为和`ng-repeat`之间不允许有任何类型的重复元素。`<tbody>``<tr>`

例如，如果我使用 ng-repeat on `<span>`，我会得到：

```
<table>
  <tbody>
    <span>
      <tr>...</tr>
    </span>
    <span>
      <tr>...</tr>
      <tr>...</tr>
      <tr>...</tr>
    </span>
    <span>
      <tr>...</tr>
      <tr>...</tr>
    </span>
  </tbody>
</table> 
```

这是无效的html。

但我需要生成的是：

```
<table>
  <tbody>
    <tr>...</tr>
    <tr>...</tr>
    <tr>...</tr>
    <tr>...</tr>
    <tr>...</tr>
    <tr>...</tr>
  </tbody>
</table> 
```

其中第一行由第一个数组元素生成，接下来的三行由第二个数组元素生成，第五和第六行由最后一个数组元素生成。

如何使用 ng-repeat 使其绑定的 html 元素在渲染期间“消失”？

或者有其他解决方案吗？

* * *

说明：生成的结构应如下所示。每个数组元素可以生成 1-3 行的表格。理想情况下，答案应该支持每个数组元素 0-n 行。

```
<table>
  <tbody>
    <!-- array element 0 -->
    <tr>
      <td>One row item</td>
    </tr>
    <!-- array element 1 -->
    <tr>
      <td>Three row item</td>
    </tr>
    <tr>
      <td>Some product details</td>
    </tr>
    <tr>
      <td>Customer ratings</td>
    </tr>
    <!-- array element 2 -->
    <tr>
      <td>Two row item</td>
    </tr>
    <tr>
      <td>Full description</td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-09-17T06:57:00.783

从 AngularJS 1.2 开始，有一个指令`ng-repeat-start`可以完全满足您的要求。有关如何使用它的描述，请参阅我[在这个问题中的回答。](https://stackoverflow.com/questions/12857714/angularjs-ng-repeat-with-no-html-element/18824208#18824208)

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-08-16T20:39:49.557

**更新：**如果您使用的是 Angular 1.2+，请使用[ng-repeat-start](https://code.angularjs.org/1.2.0-rc.3/docs/api/ng.directive:ngRepeat)。请参阅@jmagnusson 的回答。

否则，如何将 ng-repeat 放在 tbody 上？（AFAIK，在一个表中有多个 <tbody> 是可以的。）

```
<tbody ng-repeat="row in array">
  <tr ng-repeat="item in row">
     <td>{{item}}</td>
  </tr>
</tbody> 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2015-07-10T15:09:08.107

`ng-repeat-start/end`如果您使用 ng > 1.2，这里是一个不生成不必要标签的使用示例：

```
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
    <script>
      angular.module('mApp', []);
    </script>
  </head>
  <body ng-app="mApp">
    <table border="1" width="100%">
      <tr ng-if="0" ng-repeat-start="elem in [{k: 'A', v: ['a1','a2']}, {k: 'B', v: ['b1']}, {k: 'C', v: ['c1','c2','c3']}]"></tr>

      <tr>
        <td rowspan="{{elem.v.length}}">{{elem.k}}</td>
        <td>{{elem.v[0]}}</td>
      </tr>
      <tr ng-repeat="v in elem.v" ng-if="!$first">
        <td>{{v}}</td>
      </tr>

      <tr ng-if="0" ng-repeat-end></tr>
    </table>
  </body>
</html>
```

重要的一点：对于用于`ng-repeat-start`和`ng-repeat-end`set的标签`ng-if="0"`，不要插入到页面中。这样内部的内容就会完全按照knockoutjs中的方式处理（使用in中的命令`<!--...-->`），不会有垃圾。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-07-15T19:23:22.793

您可能希望展平控制器中的数据：

```
function MyCtrl ($scope) {
  $scope.myData = [[1,2,3], [4,5,6], [7,8,9]];
  $scope.flattened = function () {
    var flat = [];
    $scope.myData.forEach(function (item) {
      flat.concat(item);
    }
    return flat;
  }
} 
```

然后在 HTML 中：

```
<table>
  <tbody>
    <tr ng-repeat="item in flattened()"><td>{{item}}</td></tr>
  </tbody>
</table> 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-08-14T12:25:58.410

以上是正确的，但对于更一般的答案是不够的。我需要嵌套 ng-repeat，但保持在同一个 html 级别，这意味着将元素写入同一个父级。标签数组包含标签，这些标签也有标签数组。它实际上是一棵树。

```
[{ name:'name1', tags: [
  { name: 'name1_1', tags: []},
  { name: 'name1_2', tags: []}
  ]},
 { name:'name2', tags: [
  { name: 'name2_1', tags: []},
  { name: 'name2_2', tags: []}
  ]}
] 
```

所以这就是我最终所做的。

```
<div ng-repeat-start="tag1 in tags" ng-if="false"></div>
    {{tag1}},
  <div ng-repeat-start="tag2 in tag1.tags" ng-if="false"></div>
    {{tag2}},
  <div ng-repeat-end ng-if="false"></div>
<div ng-repeat-end ng-if="false"></div> 
```

请注意隐藏开始和结束 div 的 ng-if="false"。

它应该打印

名称 1，名称 1_1，名称 1_2，名称 2，名称 2_1，名称 2_2，

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-30T10:09:00.080

我只想发表评论，但我的声誉仍然不足。所以我正在添加另一个解决问题的解决方案。我真的很想反驳@bmoeskau 的说法，即解决这个问题需要一个“最好的黑客”解决方案，并且由于最近在讨论中提出了这个问题，即使这篇文章已经有 2 年了，我想添加我的拥有两分钱：

正如@btford 指出的那样，您似乎正在尝试将递归结构转换为列表，因此您应该首先将该结构展平为列表。他的解决方案是这样做的，但有人认为在模板内调用函数是不优雅的。如果这是真的（老实说，我不知道）那不只需要在控制器中执行函数而不是指令吗？

无论哪种方式，您的 html 都需要一个列表，因此呈现它的范围应该有该列表可以使用。您只需将控制器内部的结构展平即可。一旦你有了一个 $scope.rows 数组，你就可以用一个简单的 ng-repeat 生成表。没有黑客，没有不雅，只是它被设计的工作方式。

Angulars 指令并不缺少功能。他们只是强迫你编写有效的 html。我的一位同事也有类似的问题，他引用@bmoeskau 来支持对角度模板/渲染功能的批评。当查看确切的问题时，结果发现他只是想生成一个打开标签，然后在其他地方生成一个关闭标签，等等。就像在过去我们从字符串连接我们的 html 的美好时光......对吧？不。

至于将结构展平为列表，这是另一种解决方案：

```
// assume the following structure
var structure = [
    {
        name: 'item1', subitems: [
            {
                name: 'item2', subitems: [
                ],
            }
        ],
    }
];
var flattened = structure.reduce((function(prop,resultprop){
    var f = function(p,c,i,a){
        p.push(c[resultprop]);
        if (c[prop] && c[prop].length > 0 )
          p = c[prop].reduce(f,p);
        return p;
    }
    return f;
})('subitems','name'),[]);

// flattened now is a list: ['item1', 'item2'] 
```

这适用于任何具有子项的树状结构。如果您想要整个项目而不是属性，则可以进一步缩短展平功能。

希望有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-20T22:35:51.840

真正有效的解决方案

html

```
<remove  ng-repeat-start="itemGroup in Groups" ></remove>
   html stuff in here including inner repeating loops if you want
<remove  ng-repeat-end></remove> 
```

添加一个 angular.js 指令

```
//remove directive
(function(){
    var remove = function(){

        return {    
            restrict: "E",
            replace: true,
            link: function(scope, element, attrs, controller){
                element.replaceWith('<!--removed element-->');
            }
        };

    };
    var module = angular.module("app" );
    module.directive('remove', [remove]);
}()); 
```

简要说明，

ng-repeat 将自身绑定到`<remove>`元素并循环，因为我们使用了 ng-repeat-start / ng-repeat-end 它循环一个 html 块而不仅仅是一个元素。

然后自定义删除指令将`<remove>`开始和结束元素放置在`<!--removed element-->`

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-07-15T16:31:57.653

```
<table>
  <tbody>
    <tr><td>{{data[0].foo}}</td></tr>
    <tr ng-repeat="d in data[1]"><td>{{d.bar}}</td></tr>
    <tr ng-repeat="d in data[2]"><td>{{d.lol}}</td></tr>
  </tbody>
</table> 
```

我认为这是有效的:)

# mysql - 使用子查询从表中删除

> ID：11490973
> 
> 赞同：1
> 
> 时间：2012-07-15T09:50:59.280
> 
> 标签：mysql, subquery, sql-delete

例如，我有这个表“汽车”

```
id | name
--------------
2  | Mercedes
5  | Mercedes
6  | Mercedes
7  | BMW 
9  | BMW 
```

我想从这个表中删除所有行，除了行，其中每个汽车的 id 是最大的。也就是说，我想删除后，在表中只剩下这几行：

```
6 | Mercedes
9 | BMW 
```

我写了这个查询，但这不起作用（也不返回错误）。

```
DELETE FROM autos WHERE id NOT IN (
    SELECT id FROM (
        SELECT MAX(id) FROM autos GROUP BY name
    ) AS t
) 
```

请告诉我，这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T09:58:05.900

AFAIK，以下应该有效：

```
DELETE FROM autos WHERE id NOT IN (
    SELECT max_id FROM (
        SELECT MAX(id) as max_id, name FROM autos GROUP BY name
    ) as t
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T10:04:51.097

```
CREATE TABLE autos (`id` int AUTO_INCREMENT PRIMARY KEY, `name` VARCHAR(30));

INSERT INTO autos(name) VALUES ('Mercedes');
INSERT INTO autos(name) VALUES ('Mercedes');
INSERT INTO autos(name) VALUES ('Mercedes');

INSERT INTO autos(name) VALUES ('BMW');
INSERT INTO autos(name) VALUES ('BMW');
INSERT INTO autos(name) VALUES ('BMW');

DELETE FROM autos 
WHERE id NOT IN (
   SELECT id FROM ( 
       SELECT max(id) id FROM autos a GROUP BY a.name 
   ) a
);

Query OK, 4 rows affected (0.14 sec) 
```

希望这可以帮助！

# facebook - Graph API 中的页面迁移错误

> ID：11490977
> 
> 赞同：3
> 
> 时间：2012-07-15T09:51:42.917
> 
> 标签：facebook, facebook-graph-api, facebook-page

在我的 Facebook 应用程序中，当我通过开放图形 API 查询有关 Facebook 页面的信息时，我经常会看到`(#21) Page ID 290260024371666 was migrated to page ID 122581454447308\. Please update your API calls to the new ID`查询开放图形 API 时出现的错误。

这是什么迁移？页面如何迁移到另一个页面？那是随时可能发生的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-14T07:33:41.600

当用户将他的粉丝页面与其他类似名称的页面合并时，随时可能发生。也适用于 Places 电影和许多其他对象。如果 Graph Api 会返回一个带有新 PageID 的额外字段，那就太好了。

# php - 在 CakePHP 中将表单值传递给控制器 操作参数

> ID：11490978
> 
> 赞同：1
> 
> 时间：2012-07-15T09:51:53.353
> 
> 标签：php, html, cakephp, cakephp-2.0, forms

在我的 HTML 表单中，我需要这样的 URL 输出：“example.com/mycontroller/action/mike/apple”

*   当我使用“post”提交表单时，我的表单值不可见，可以通过“_POST”获取。我不喜欢这个，因为它会产生这样的输出：“example.com/mycontroller/action/”
*   当我使用“get”提交时，我的表单变为“example.com/mycontroller/action?type=mike&key=apple”
*   我也不喜欢使用 javascript 更改表单操作，例如：“onSubmit 获取 select 的值并将其附加到表单操作”因为我不希望此代码段依赖于 javascript。
*   我可以使用“get”或“post”来提交表单，解析 POST 或 GET 的系统变量并进行重定向。像这样：将这个“example.com/mycontroller/action?type=mike&key=apple”重定向到这个“example.com/mycontroller/action/mike/apple” 但是我没有发现这个解决方案设计得很好。是否可以使用斜杠传递表单值（除了问题标记）

    ```
    < form class="well form-horizontal" id="myform" 
               method="get" action="/mycontroller/action" >
            <select name="type" id="type">
                <option value="mike" selected="selected">
                                    mickey bricks</option>
                <option value="albie">albert</option>
            </select>

            <input type="text" name="key" class="input-xlarge"
                         id="key" required="required">

            <button type="submit" class="btn btn-primary" id="submit">
                submit
            </button>
      </form> 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:13:45.277

如果你制作一个`POST`表格，它发布*到*哪里并不重要，重要的是它重定向到哪里。许多站点搜索会将您重定向到 www.domain.com/search/search_terms，因此如果这是一个搜索表单，那么重定向到`../action/mike/apple`.

此外，如果它是一个`POST`表单，它不会被搜索爬虫填写（或者至少据我所知不是），所以表单发布到哪里并不重要，重要的是返回值和哪里它是否重定向。

这一切都取决于你想要完成什么。

# node.js - Mongoose ODM 的 ObjectId 是什么？

> ID：11490982
> 
> 赞同：3
> 
> 时间：2012-07-15T09:52:20.280
> 
> 标签：node.js, mongodb, express, mongoose

查看[Mongoose ODM 文档](http://mongoosejs.com/docs/schematypes.html)，它并没有真正说明它们是什么`ObjectId's`以及如何使用它们。我认为它类似于 MongoDB 中的外键？

如果是这样，嵌入式文档似乎可以达到相同的目的，我什么时候使用哪个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-15T10:49:38.210

阅读 MongoDB 文档或快速 MongoDB 介绍（例如[The Little MongoDB Book](http://openmymind.net/2011/3/28/The-Little-MongoDB-Book/)（它是免费的））以了解有关 MongoDB 概念的一些背景知识是非常值得的。

要回答您的问题：

*   [ObjectID](http://www.mongodb.org/display/DOCS/Object+IDs)是一个唯一的 12 字节标识符，可以由 MongoDB 作为`_id`集合的主键 ( ) 生成。ObjectID有一个[规范](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-BSONObjectIDSpecification)。

*   [DBRef（数据库引用）](http://docs.mongodb.org/manual/applications/database-references/)是引用另一个集合中的对象的 ObjectID 。DBRef 确实需要另一个查询来获取相关对象，并且是客户端驱动程序而不是 MongoDB 服务器支持的约定。Mongoid 等价物称为[引用关系](http://mongoid.org/en/mongoid/docs/relations.html)。

*   [嵌入文档](http://www.mongodb.org/display/DOCS/Schema+Design#SchemaDesign-EmbeddingandLinking)是文档中的嵌套数组或子文档。在 Mongoid 中，这些是[嵌入的关系](http://mongoid.org/en/mongoid/docs/relations.html)。

[MongoDB 中的数据建模和模式设计](http://www.mongodb.org/display/DOCS/Schema+Design)方法与关系数据库非常不同。（有意）没有连接或外键，但面向文档的方法允许在单个文档中存储和获取大量相关数据。根据您计划查询和更新数据的方式，嵌入或链接可能是更合适的选择。MongoDB wiki 上的[模式设计](http://www.mongodb.org/display/DOCS/Schema+Design)页面有一些帮助您入门的有用技巧。

# c# - Proccess.WaitForExit() throws 线程被中止？

> ID：11490983
> 
> 赞同：1
> 
> 时间：2012-07-15T09:52:36.343
> 
> 标签：c#, asp.net, multithreading, process

> **可能重复：**
> [使用 process.waitforexit() 时线程被中止错误](https://stackoverflow.com/questions/2028241/thread-was-being-aborted-error-when-using-process-waitforexit)

这是堆栈跟踪

```
Message :Thread was being aborted.
   at System.Threading.WaitHandle.WaitOneNative(SafeWaitHandle waitHandle, UInt32 millisecondsTimeout, Boolean hasThreadAffinity, Boolean exitContext)
   at System.Threading.WaitHandle.WaitOne(Int64 timeout, Boolean exitContext)
   at System.Threading.WaitHandle.WaitOne(Int32 millisecondsTimeout, Boolean exitContext)
   at System.Diagnostics.Process.WaitForExit(Int32 milliseconds) 
```

代码如下：

```
 [WebMethod]
    public Double executeAsJob()
    {
            myThread = new Thread(new ParameterizedThreadStart(runThread));
            myThread.Start();
            return RUNNING;
    }

    public void runThread() {
            try {
                System.Diagnostics.Process proc = new System.Diagnostics.Process();
                proc.StartInfo.FileName = ...;
                proc.StartInfo.Arguments = ...;
                proc.StartInfo.UseShellExecute = false;
                proc.Start();
                proc.WaitForExit(); // <-- THIS line throws the exception

                // Save exit code 
                iResult = proc.ExitCode;
            } catch (Exception e) { ... } 
    } 
```

...对此有什么想法吗？

# c - 如何从 C 中的“原始”内存读取/写入类型值？

> ID：11490984
> 
> 赞同：7
> 
> 时间：2012-07-15T09:52:35.477
> 
> 标签：c, memory, casting, memory-access

我该如何做这样的事情？

```
void *memory = malloc(1000);  //allocate a pool of memory
*(memory+10) = 1;  //set an integer value at byte 10
int i = *(memory+10);  //read an integer value from the 10th byte 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T10:05:47.263

简单示例：将内存视为 unsigned char 数组

```
void *memory = malloc(1000);  //allocate a pool of memory
uint8_t *ptr = memory+10;  
*ptr = 1 //set an integer value at byte 10
uint8_t i = *ptr;  //read an integer value from the 10th byte 
```

您也可以使用整数，但是您必须注意一次设置的字节数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T10:52:54.430

规则很简单：

*   每个指针类型（函数指针除外）都可以在 void* 之间进行强制转换，而不会丢失。
*   您不能对 void* 指针执行指针运算，也不能取消引用它们
*   根据定义，sizeof(char) 等于 1；所以增加一个char指针意味着“加1”到“原始”指针值

由此您可以得出结论，如果要执行“原始”指针算术，则必须在 char* 之间进行转换。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-15T09:55:12.683

因此，通过“工作”，我假设您的意思是“我如何取消引用/在 a 上执行指针算术`void*`”？你不能；`char*`如果您只关心读取内存块，则必须将其转换为 a 。当然，如果是这种情况，只需将其声明为 a`char*`开头即可。

# ruby-on-rails - RSpec，如何测试模块内部的初始化

> ID：11490987
> 
> 赞同：1
> 
> 时间：2012-07-15T09:52:52.207
> 
> 标签：ruby-on-rails, rspec

我有这个模块：

```
module TicketsPresenters

    class ShowPresenter
      def initialize(ticket_or_id = nil)
        unless ticket_or_id.nil?
          if ticket_or_id.is_a?(Ticket)
            @ticket = ticket_or_id
          else
            @ticket = Ticket.find(ticket_or_id)
          end
      end
    end

end 
```

当我传递一个整数或直接传递对象实例时，我想测试 initialize() 方法是否正确设置了对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T10:41:02.890

可能有十几种方法可以回答这个问题，但我会给你我喜欢的 RSpec 格式。

以下假设您`attr_reader :ticket`在 ShowPresenter 类中有一个用于票据（即）的读取器方法。它还假设您正在使用有效参数创建 Ticket 对象，以便将其保存。

```
describe TicketsPresenters::ShowPresenter do
  context '#initialize' do
    let!(:ticket) { Ticket.create!(...) }

    context 'with an id' do
      subject { TicketsPresenters::ShowPresenter.new(ticket.id) }
      its(:ticket) { should == ticket }
    end

    context 'with a Ticket object' do
      subject { TicketsPresenters::ShowPresenter.new(ticket) }
      its(:ticket) { should == ticket }
    end

    context 'with nothing' do
      subject { TicketsPresenters::ShowPresenter.new }
      its(:ticket) { should be_nil }
    end
  end
end 
```

注意：我是[FactoryGirl](https://github.com/thoughtbot/factory_girl/)的粉丝，所以我个人更喜欢使用`Factory.create(:ticket)`over，`Ticket.create!(...)`因为它允许您在一个地方定义一个有效的 Ticket 对象，并且如果该定义发生更改，您不需要在所有测试中更新它。

人们采取的另一个测试立场是根本不使用数据库持久性。这可能不是我向 Ruby 或 RSpec 新手建议的概念，因为它有点难以解释并且需要更多的 OOP 知识。好处是它消除了对数据库的依赖，并且测试更快、更独立。

```
describe TicketsPresenters::ShowPresenter do
  context '#initialize' do
    let(:ticket) { mock(:ticket, id: 1) }

    before do
      ticket.stub(:is_a?).with(Ticket) { true }
      Ticket.stub(:find).with(ticket.id) { ticket }
    end

    context 'with an id' do
      subject { TicketsPresenters::ShowPresenter.new(ticket.id) }
      its(:ticket) { should == ticket }
    end

    context 'with a Ticket object' do
      subject { TicketsPresenters::ShowPresenter.new(ticket) }
      its(:ticket) { should == ticket }
    end

    context 'with nothing' do
      subject { TicketsPresenters::ShowPresenter.new }
      its(:ticket) { should be_nil }
    end
  end
end 
```

# c++ - C++ 编译时错误：数字常量之前的预期标识符

> ID：11490988
> 
> 赞同：46
> 
> 时间：2012-07-15T09:53:02.840
> 
> 标签：c++, vector, g++

我读过其他类似的帖子，但我只是不明白我做错了什么。我认为我对向量的声明是正确的。我什至试图在没有尺寸的情况下声明，但即使这样也不起作用。出了什么问题？我的代码是：

```
#include <vector> 
#include <string>
#include <sstream>
#include <fstream>
#include <cmath>

using namespace std;

vector<string> v2(5, "null");
vector< vector<string> > v2d2(20,v2);

class Attribute //attribute and entropy calculation
{
    vector<string> name(5); //error in these 2 lines
    vector<int> val(5,0);
    public:
    Attribute(){}

int total,T,F;

};  

int main()
{  
Attribute attributes;
return 0;
} 
```

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-07-15T09:56:15.397

你不可以做这个：

```
vector<string> name(5); //error in these 2 lines
vector<int> val(5,0); 
```

在方法之外的类中。

您可以在声明时初始化数据成员，但不能使用`()`括号：

```
class Foo {
    vector<string> name = vector<string>(5);
    vector<int> val{vector<int>(5,0)};
}; 
```

在 C++11 之前，您需要先声明它们，然后在构造函数中初始化它们

```
class Foo {
    vector<string> name;
    vector<int> val;
 public:
  Foo() : name(5), val(5,0) {}
}; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-15T09:55:45.707

`(...)`不允许在类主体中进行初始化。使用`{..}`或`= ...`。不幸的是，由于各自的构造函数是`explicit`并且`vector`有一个初始化列表构造函数，你需要一个函数转换来调用想要的构造函数

```
vector<string> name = decltype(name)(5);
vector<int> val = decltype(val)(5,0); 
```

作为替代方案，您可以使用构造函数初始值设定项列表

```
 Attribute():name(5), val(5, 0) {} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T09:55:54.280

由于您的编译器可能还不支持所有支持类似语法的 C++11，因此您会收到这些错误，因为您必须在构造函数中初始化类成员：

```
Attribute() : name(5),val(5,0) {} 
```

# javascript - 快速的 chrome 扩展开发

> ID：11490992
> 
> 赞同：0
> 
> 时间：2012-07-15T09:54:43.743
> 
> 标签：javascript, google-chrome, google-chrome-extension

> **可能重复：**
> [如何自动重新加载我正在开发的 Chrome 扩展程序？](https://stackoverflow.com/questions/2963260/how-do-i-auto-reload-a-chrome-extension-im-developing)

让我知道，是否存在用于快速 chrome 扩展开发的东西？目前，让我发疯的事情是每次我对文件进行一些更改时都需要刷新解压缩的扩展。更改文件状态后是否存在自动刷新扩展？

谢谢！

# json - jQuery中条件语句的问题

> ID：11490997
> 
> 赞同：0
> 
> 时间：2012-07-15T09:55:49.220
> 
> 标签：json, jquery, conditional-statements

我在处理来自 json 请求的一些数字时遇到问题。根据结果​​，我试图输出一些不同的 HTML。具体问题是当我来检查一个数字是否大于-1但小于6时。代码摘录如下……</p>

```
else if(parseInt(myvariable, 10) < -1) {
//this is where one thing happens
}
else if(parseInt(myvariable, 10) > -1) {
//Something else happens here
}
else if(parseInt(myvariable, 10) > 6) {
//This is where the third thing should happen, but doesn't?
} 
```

似乎尽管值为 7 或 70，但第二个“else if”已达到极限。

有没有一种方法可以检查该数字是否大于 -1 但小于 6，以便继续执行下一个条件语句。

我猜（就像我之前的问题一样）有一个非常简单的答案，所以请原谅我的天真。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T09:59:38.883

if 条件错误。让我们考虑一下：myvariable 是 7。

在您的代码中会发生：

```
else if(parseInt(myvariable, 10) < -1) {
//this is where one thing happens
}
else if(parseInt(myvariable, 10) > -1) {
**// HERE THE CONDITION IS TRUE, BECAUSE 7 > -1**
}
else if(parseInt(myvariable, 10) > 6) {
// This is where the third thing should happen, but doesn't?
} 
```

您可以将其更改为

```
else if(parseInt(myvariable, 10) < -1) {
//this is where one thing happens
}
else if(parseInt(myvariable, 10) > 6) {
// This is where the third thing should happen, but doesn't?
}
else if(parseInt(myvariable, 10) > -1) {
 // Moved
} 
```

为了让它工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:00:39.083

*仅在发现一个*为真之前执行条件。

换句话说，您需要重新调整他们的订单或收紧他们以使您当前的订单正常工作。

7 高于 -1，因此第二个条件解析为真。所以对于 7，第 3 个条件是不需要的。

```
if(parseInt(myvariable, 10) < -1) {
    //number is less than -1
}
else if(parseInt(myvariable, 10) > 6) {
    //number is above 6
}
else {
    //neither, so must be inbetween -1 an 6
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T10:02:15.007

是的，因为你写的任何大于 -1 的数字都不会抛出第三个代码块，它会抛出第二个代码块，正如你所说“**数字大于 -1 但小于 6** ”，你可以简单地这样做：

```
else if(parseInt(myvariable, 10) < -1) {
//this is where one thing happens
}
else if(parseInt(myvariable, 10) > -1 && parseInt(myvariable, 10) < 6) {
//Something else happens here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T10:05:59.710

另一种解决方案是更改第二行：

```
else if(parseInt(myvariable, 10) > -1) 
```

至：

```
else if(parseInt(myvariable, 10) <= 6) 
```

有很多方法可以写这个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T10:18:13.273

我想你可以很容易地做到这一点，做这样的事情：

考虑到您的变量值为（7）：

```
else if(parseInt(myVariable, 10) &lt; -1) {
//this is where one thing happens
}
else if(parseInt(myVariable, 10) > -1) {
//now 'myVariable' is greater than -1, then let's check if it is greater than 6
if(parseInt(myVariable, 10) > 6) {
//this where what you should do if 'myVariable' greater than -1 AND greater than 6
}
} 
```