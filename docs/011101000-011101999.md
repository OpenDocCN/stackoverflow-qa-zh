# StackOverflow 问答 11101000-11101999

# objective-c - 如何制作动画计时器

> ID：11101001
> 
> 赞同：1
> 
> 时间：2012-06-19T12:32:38.420
> 
> 标签：objective-c, ios, cocoa, ios4

嗨，我需要制作一个像这样的动画计时器： ![计时器的图像](../Images/9301938e86ab2a4cde80218e71b39df9.png)

对于使用 Objective C 的 iPhone 应用程序。

我真的不知道该怎么办。任何帮助？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:43:42.353

看看[DACCircularProgress](https://github.com/danielamitay/DACircularProgress)，它实现了一个循环进度视图。正如其他人所说，您将使用 a 增加进度值`NSTimer`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:03:10.803

这是我之前回答的一个相对问题（如果你只专注于使用 NSTimer 做动画）

[目标 c - NSTimer、CADisplayLink、线程](https://stackoverflow.com/questions/11098311/objective-c-nstimer-cadisplaylink-thread/11098735#comment14538541_11098735)

希望对你有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T12:52:19.687

只需使用经过时间与总时间之间的比率计算从顶部的**角度。**看起来真的很简单。计时器可以定期触发并重做此计算。

上图看起来像是两个中点相同但半径略有不同的圆相互叠加。计时器触发也可以更新此显示。

它也可以更新圈内的标签，但我真的不明白“2天24小时”......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T13:25:18.920

该计时器看起来可以使用顶部带有掩码的[饼图制作。](http://mac-objective-c.blogspot.ro/2009/04/drawing-pie-charts.html)实际上，您可以使用黑色圆圈透明的png并在后面绘制饼图。

[编辑]~~我的回答假设您知道如何处理计时器部分。如果你愿意，我也可以给你一些信息~~ 这个代码启动一个计时器，每两秒触发一个函数

```
self.timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(timePassed) userInfo:nil repeats:YES]; 
```

然后你可以制作这样的功能

```
-(void)timePassed {
     //draw a bigger pie chart than the previous
     //you can store the previous size inside a class property or global var
} 
```

完成后不要忘记停止计时器

```
[self.timer invalidate]; 
```

# php - MySQL 准备与 PHP mysqli 准备

> ID：11101002
> 
> 赞同：0
> 
> 时间：2012-06-19T12:32:43.113
> 
> 标签：php, mysql, mysqli

我想知道 MySQL PREPARE/EXECUTE 子句和 PHP mysqli 准备/执行方法之间是否有任何区别？预防注射是好是坏？

我很好奇，因为我正在编写一些数据库存储过程，其中一个表和属性在编译时是未知的。我可以将数据写成静态的，但是查询有点复杂，它只会用大量的控制逻辑使过程膨胀。但这让我想到了这一点，我只是想知道，当我只需要一个简单的语句时，我用动态 SQL 编写一个简短的过程还是只用 PHP 准备和绑定是否更好。

如果这是重复，我也很抱歉，当然欢迎链接到已经回答的 SO 问题。但是，我一般在谷歌上查看，并不能真正找到具体答案的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:39:40.643

PHP mysqli 是 PHP 中的一个层，围绕 MySQL 的准备/执行功能。

只要来自用户的所有内容都填充到绑定变量中，两者都会使您免受 SQL 注入的影响。

以任何一种方式处理的准备好的语句也有助于更高效的大容量操作。在 MySQL 中，与 Oracle 等高价 DBMS 相比，效率的提升是适度的，但它仍然值得每一点麻烦。

如果您需要在应用程序中将表名作为“变量”，那没关系，但您不能将表名视为绑定变量。因此，您需要对导致构建这些表名的任何用户输入完全偏执。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-27T18:20:30.510

当我回答 2020 年的问题时，我了解到您应该使用 PDO 来准备和绑定或绑定内部执行，而不是使用 mysqli。它将免受注射并且更安全。

# ruby-on-rails - 使用现有数据创建 has_many/belongs_to

> ID：11101008
> 
> 赞同：0
> 
> 时间：2012-06-19T12:32:59.240
> 
> 标签：ruby-on-rails

我想把 Model.attribute 变成 Attribute.models。

例如我目前有`Model.first.attribute => "string"`并且我想添加`belongs_to :attributes`到 Model.rb 中，然后在创建 Attribute.rb 之后，添加`has_many :models`

我在模型表中添加了一个列：attribute_id，我正在尝试做类似的事情

```
Model.each do |m|
  a = Attribute.find_or_create_by_name(m.attribute)
  m.update_attribute("attribute_id", a.id)
end 
```

这是实现这一目标的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:03:07.180

如果 Model `has_many :attributes`（和 Attribute `belongs_to :model`），那么 Attribute 模型中应该有一个`model_id`。

然后你可以做

```
Model.all.each do |m|
  m.attributes.create!(:name => m.attribute) unless m.attributes.find_by_name(m.attribute)
end 
```

**更新**

你所做的对我来说似乎没问题。唯一的问题是你会有一个列和另一个在 Model`attribute`中命名`attribute_id`的列。`belongs_to`我不知道当您键入 Model.first.attribute 时 ActiveRecord 会如何反应。

# c# - 从任何通用列表中的节点中查找所有树的根节点

> ID：11101011
> 
> 赞同：1
> 
> 时间：2012-06-19T12:33:06.380
> 
> 标签：c#, search, tree

这是一个实体，我想在通用函数中列出给定节点的所有子节点

```
 public static List<T> BuildTree<T>(List<T> list, T selectNode string keyPropName, string parentPropName, string levelPropName, int level = 0)
    {
        List<T> entity = new List<T>();

        foreach (T item in list)
        {

        }

        return entity;
    } 
```

实体结构示例

```
 protected long _coakey;
    protected long _parentkey;
    protected string _coacode;
    protected string _coacodeclient;
    protected string _coaname;
    protected int _coalevel;

    [DataMember]
    public long coakey
    {
        get { return _coakey; }
        set { _coakey = value; this.OnChnaged(); }
    }

    [DataMember]
    public long parentkey
    {
        get { return _parentkey; }
        set { _parentkey = value; this.OnChnaged(); }
    }

    [DataMember]
    public string coacode
    {
        get { return _coacode; }
        set { _coacode = value; this.OnChnaged(); }
    }

    [DataMember]
    public string coacodeclient
    {
        get { return _coacodeclient; }
        set { _coacodeclient = value; this.OnChnaged(); }
    }

    [DataMember]
    public string coaname
    {
        get { return _coaname; }
        set { _coaname = value; this.OnChnaged(); }
    }

    [DataMember]
    public int coalevel
    {
        get { return _coalevel; }
        set { _coalevel = value; this.OnChnaged(); }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:38:10.403

你的`BuildTree<T>`方法不能确定树的结构，除非它知道它的结构。至少，我建议创建一个定义树节点的基类或接口，然后更改`BuildTree`方法以专门处理这些类型的对象。然后，它将能够找出树结构。你们每个实体类都必须实现该树节点接口或从树节点基类继承。例如：

```
public abstract class TreeNodeBase
{
    public long parentkey
    {
        get { return _parentkey; }
        set { _parentkey = value; this.OnChanged(); }
    }
    protected long _parentkey;
}

public class MyEntityTreeNode : TreeNodeBase
{
    public long coakey
    {
        get { return _coakey; }
        set { _coakey = value; this.OnChanged(); }
    }
    protected long _coakey;

    // etc...
}

// Note the generic type constraint at the end of the next line
public static List<T> BuildTree<T>(List<T> list, T selectNode, string keyPropName, string parentPropName, string levelPropName, int level) where T : TreeNodeBase
{
    List<T> entity = new List<T>();
    foreach (TreeNodeBase node in list)
    {
        long parentKey = node.parentkey;
        // etc...
    }
    return entity;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:03:35.183

我自己解决了希望对你有帮助

```
 public static List<T> BuildTree<T>(List<T> list, T selectedNode, string keyPropName, string parentPropName, int endLevel = 0, int level = 0)
    {
        List<T> entity = new List<T>();
        Type type = typeof(T);
        PropertyInfo keyProp = type.GetProperty(keyPropName);
        string _selectedNodekey = keyProp.GetValue(selectedNode, null).ToString();

        PropertyInfo parentProp = type.GetProperty(parentPropName);
        foreach (T item in list)
        {

            string _key = keyProp.GetValue(item, null).ToString();
            string _parent = parentProp.GetValue(item, null).ToString();

            if (_selectedNodekey == _parent)
            {
                T obj = (T)Activator.CreateInstance(typeof(T));
                obj = item;
                entity.Add(obj);
                if (level == endLevel && level!=0) break;
                entity.AddRange(BuildTree<T>(list, obj, keyPropName, parentPropName, level + 1));
            }
        }

        return entity;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:07:13.553

**节点类：**

```
public class Node<TKey, TValue> where TKey : IEquatable<TKey>
{
    public TKey Key { get; set; }
    public TKey ParentKey { get; set; }
    public TValue Data { get; set; }

    public readonly List<Node<TKey, TValue>> Children = new List<Node<TKey, TValue>>();
} 
```

**树生成器：**

```
public static Node<TKey, TValue> BuildTree<TKey, TValue>(IEnumerable<Node<TKey, TValue>> list,
                                                         Node<TKey, TValue> selectNode)
    where TKey : IEquatable<TKey>
{
    if (ReferenceEquals(selectNode, null))
    {
        return null;
    }

    var selectNodeKey = selectNode.Key;

    foreach (var childNode in list.Where(x => x.ParentKey.Equals(selectNodeKey)))
    {
        selectNode.Children.Add(BuildTree(list, childNode));
    }

    return selectNode;
} 
```

**用法：**

```
List<MyClass> list = ...

var nodes = list.Select(x => new Node<long, MyClass>
                                 {
                                     Key = x.MyKey,
                                     ParentKey = x.MyParentKey,
                                     Data = x
                                 }).ToList();

var startNode = nodes.FirstOrDefault(x => x.Data.Stuff == "Pick me!");

var tree = BuildTree(nodes, startNode); 
```

**MyClass 示例：**

```
public class MyClass
{
    public long MyKey;
    public long MyParentKey;
    public string Name;
    public string Text;
    public string Stuff;
} 
```

# iphone - libsqlite3.dylib，缺少所需的架构 i386

> ID：11101013
> 
> 赞同：4
> 
> 时间：2012-06-19T12:33:27.563
> 
> 标签：iphone, ios, ipad, sqlite, i386

我正在使用 libsqlite3.dylib 并在编译我的项目时收到以下错误。

```
ld: warning: ignoring file /Users/dcdmc/Documents/Beginning iPhone 5 Dev/Persistence copy/libsqlite3.dylib, 
             missing required architecture i386 in file
Undefined symbols for architecture i386:

"_sqlite3_open", referenced from:
  -[OJViewController viewDidLoad] in OJViewController.o
  -[OJViewController applicationWillResignActive:] in OJViewController.o

"_sqlite3_close", referenced from:
  -[OJViewController viewDidLoad] in OJViewController.o
  -[OJViewController applicationWillResignActive:] in OJViewController.o

"_sqlite3_exec", referenced from:
  -[OJViewController viewDidLoad] in OJViewController.o

"_sqlite3_prepare_v2", referenced from:
  -[OJViewController viewDidLoad] in OJViewController.o
  -[OJViewController applicationWillResignActive:] in OJViewController.o

"_sqlite3_step", referenced from:
  -[OJViewController viewDidLoad] in OJViewController.o
  -[OJViewController applicationWillResignActive:] in OJViewController.o

"_sqlite3_column_int", referenced from:
  -[OJViewController viewDidLoad] in OJViewController.o

"_sqlite3_column_text", referenced from:
  -[OJViewController viewDidLoad] in OJViewController.o

"_sqlite3_finalize", referenced from:
  -[OJViewController viewDidLoad] in OJViewController.o
  -[OJViewController applicationWillResignActive:] in OJViewController.o

"_sqlite3_bind_int", referenced from:
  -[OJViewController applicationWillResignActive:] in OJViewController.o

"_sqlite3_bind_text", referenced from:
  -[OJViewController applicationWillResignActive:] in OJViewController.o

ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T12:44:38.033

首先进行备份并检查您是否将此框架物理复制到其根目录中的项目文件夹中，如果您在那里找到它，只需从那里删除它并在之后重新构建。希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:51:27.967

你的目标是模拟器吗？

问题是：

1.  为iOS模拟器编译时，架构为i386
2.  为 iOS 设备编译时，arch 为 armv6/armv7

您的项目包含一个不包含 i386 代码的动态库。

由于该库是 SQLite，因此我的建议是不要将其作为动态库包含在内；相反，将源代码直接包含在您的项目中（它只有 2 个文件：sqlite.c 和 sqlite.h）。您可以从以下网址下载 sqlite 的源代码：[http ://www.sqlite.org](http://www.sqlite.org)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:37:26.443

包括你在类中的 sqlite 操作之前使用的这个

```
#include <sqlite3.h> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T16:02:27.690

我对 iOS 开发非常陌生，但我正在阅读 Apress 的书“开始 iOS 6 开发”，并在第 13 章遇到了一个非常相似的问题。我不得不使用 Text mate 打开 (YourProjectName) 中的 project.pbxproj 文件。 xcodeproj 文件并删除“LIBRARY_SEARCH_PATHS”。有两条不同的行，一条是调试构建设置，另一条是发布构建设置。我希望这对某人有所帮助。

# c - 将 C 代码与 .C 连接会导致 R 崩溃

> ID：11101021
> 
> 赞同：6
> 
> 时间：2012-06-19T12:33:57.323
> 
> 标签：c, r, segmentation-fault, cluster-analysis, metis

我需要迭代地获取给定图的最小分割分区，直到子图的 odes 数量低于某个给定的阈值`min_node`。这将用作 CHAMELEON 聚类算法的预处理步骤。为此，我将[METIS](http://glaros.dtc.umn.edu/gkhome/metis/metis/overview)库与 R 一起使用。我为`METIS_PartGraphRecursive ()`METIS 库中的函数制作了一个简单的包装器，我用它来通过`.C`接口从 R 代码调用。调用包装器函数没问题，并进行分区并返回我处理的结果，并通过消除两个分区之间的边缘来检索子图。然后我通过其中一个子图来进行进一步的分区。此调用使 R 崩溃。崩溃跟踪显示在**崩溃报告中**下面的部分。（更新）Valgrind 的输出如下所示（正如 Martin Morgan 评论的那样）。

似乎崩溃的原因是 METIS 库中的一些代码。

我正在发布我正在使用的 METIS 包装器，以及我如何称呼这个包装器。

崩溃后，fedora 显示“检测到 R-core-2.15.0-1.fc16 包中的问题”的通知。R 被操作系统使用 SIGABRT 或 SIGSEGV 杀死，并且错误报告工具消息告诉以下内容：

```
 Source     Problem                                                           
 kernel     BUG: unable to handle kernel NULL pointer dereference at 00000004 
```

我的系统：

```
$ uname -r
3.3.7-1.fc16.x86_64 
```

谁能帮我解决这个问题？

### 测试数据集

```
> x
      [,1] [,2]
 [1,]   13    0
 [2,]    9    0
 [3,]   11   26
 [4,]    9    1
 [5,]   13    2
 [6,]    5    3
 [7,]    6    0
 [8,]   17   13
 [9,]    1    6
[10,]    6   14
[11,]    4    6
[12,]   15   10
[13,]    1    1 
```

### 样品运行

从上述点生成的 metis 格式的图形已分区一次，在此特定示例中可以正常工作。但是，如果我采用其中一个分区组件并进一步对其进行重新分区，那么程序就会崩溃。同样，对于具有 600 个点的更大数据集，第一个分区崩溃。

```
> cm (x, 4)
The below graph is to be partitioned: 
$xadj
 [1]  1  5  9 13 17 21 25 29 33 37 41 45 49 53

$adjncy
 [1]  5  2  4  7  4  7  1  5 10  8 12 11  2  7  1  5  1  4  2  7  7 11 13  4  2
[26]  6  4 13 12 10  5  1 11 13  6  7 11  9 12  8  9  6 13  7  8  5 10  1  6  9
[51]  7 11

$adjwgt
 [1]  2.000000  4.000000  4.123106  7.000000  1.000000  3.000000  4.000000
 [8]  4.472136 13.000000 14.317821 16.492423 21.189620  1.000000  3.162278
[15]  4.123106  4.123106  2.000000  4.123106  4.472136  7.280110  3.162278
[22]  3.162278  4.472136  4.472136  3.000000  3.162278  3.162278  5.099020
[29]  3.605551 11.045361 11.704700 13.601471  3.000000  5.000000  5.000000
[36]  7.810250  8.246211  9.433981  9.848858 11.045361  3.000000  3.162278
[43]  5.830952  6.324555  3.605551  8.246211  9.848858 10.198039  4.472136
[50]  5.000000  5.099020  5.830952

#Original list of points
$vertex_id
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13

Initial Cut: 145

METIS_OK

Partition 1 list of original points
[[1]]
[[1]]$vertex_id
[1] 1 2 4 5 6 7

[[1]]$xadj
[1]  1  5  9 13 17 19 22

Point index local to this partition
[[1]]$adjncy
 [1] 5 2 4 7 4 7 1 5 2 7 1 5 1 4 2 7 7 4 2 6 4

[[1]]$adjwgt
 [1] 2.000000 4.000000 4.123106 7.000000 1.000000 3.000000 4.000000 4.472136
 [9] 1.000000 3.162278 4.123106 4.123106 2.000000 4.123106 4.472136 7.280110
[17] 3.162278 4.472136 3.000000 3.162278 3.162278

Partition 2 list of original points    
[[2]]
[[2]]$vertex_id
[1]  3  8  9 10 11 12 13

[[2]]$xadj
[1]  1  5  7  9 13 15 17 19

Point index local to this partition    
[[2]]$adjncy
 [1] 10  8 12 11 12 10 11 13 11  9 12  8  9 13  8 10  9 11

[[2]]$adjwgt
 [1] 13.000000 14.317821 16.492423 21.189620  3.605551 11.045361  3.000000
 [8]  5.000000  8.246211  9.433981  9.848858 11.045361  3.000000  5.830952
[15]  3.605551  9.848858  5.000000  5.830952 
```

### METIS 包装

```
void metis_wrap (idx_t *nvtxs, idx_t *ncon, idx_t *xadj, idx_t *adjncy, idx_t *adjwgt, idx_t *nparts, idx_t *objval, idx_t *part)
{
  int retval, i, j;
  idx_t options[METIS_NOPTIONS];
  idx_t *vwgt = NULL, *vsize = NULL;
  real_t *ubvec = NULL, *tpwgts = NULL;

  METIS_SetDefaultOptions (options);
  options[METIS_OPTION_OBJTYPE] = METIS_OBJTYPE_CUT;
  options[METIS_OPTION_NUMBERING] = 1;
  options[METIS_OPTION_DBGLVL] = METIS_DBG_IPART;

  retval = METIS_PartGraphRecursive (nvtxs, ncon, xadj, adjncy, vwgt, vsize, adjwgt, nparts, tpwgts, ubvec, options, objval, part);

  switch (retval)
  {
    case METIS_OK:
      printf ("\nMETIS_OK\n");
      break;
    case METIS_ERROR_INPUT:
      printf ("\nMETIS_ERROR_INPUT\n");
      break;
    case METIS_ERROR_MEMORY:
      printf ("\nMETIS_ERROR_MEMORY\n");
      break;
    case METIS_ERROR:
      printf ("\nMETIS_ERROR\n");
      break;

  }
} 
```

## R中的.C代码

```
 part_graph <- function (knn_data)
  {
    nvtxs <- as.integer (length (knn_data$vertex_id));
    nparts <- 2; 
    ncon <- 1;
    ubvec <- 25;

    objval <- 0;
    part <- rep (0, nvtxs);

    knn_data$adjwgt <- 1/knn_data$adjwgt * 200;
    mode (knn_data$adjwgt) <- "integer";

    dyn.load ("libmetis.so");
    dyn.load ("metiswrap.so");
    ret <-.C ("metis_wrap", nvtxs = as.integer (nvtxs), ncon = as.integer (ncon), xadj = as.integer (knn_data$xadj), adjncy = as.integer (knn_data$adjncy), adjwgt = as.integer (knn_data$adjwgt), nparts = as.integer (nparts), objval = as.integer (objval), part = as.integer (part))

    return (list (part = ret$part, objval = ret$objval))
  } 
```

## 崩溃报告

```
*** glibc detected *** /usr/lib64/R/bin/exec/R: free(): invalid next size (fast): 0x000000000263a420 ***
======= Backtrace: =========
/lib64/libc.so.6[0x313a47dda6]
/lib64/libc.so.6[0x313a47f08e]
/home/phoxis/Documents/Works/Programming/R/libmetis.so(gk_free+0x9a)[0x7fd5ef3a7eba]
/home/phoxis/Documents/Works/Programming/R/libmetis.so(libmetis__FreeRData+0x71)[0x7fd5ef3cf5e1]
/home/phoxis/Documents/Works/Programming/R/libmetis.so(libmetis__FreeGraph+0x5a)[0x7fd5ef3cf65a]
/home/phoxis/Documents/Works/Programming/R/libmetis.so(libmetis__MlevelRecursiveBisection+0x15c)[0x7fd5ef3d242c]
/home/phoxis/Documents/Works/Programming/R/libmetis.so(METIS_PartGraphRecursive+0x166)[0x7fd5ef3d2796]
/home/phoxis/Documents/Works/Programming/R/metiswrap.so(metis_wrap+0xc6)[0x7fd5ef184d86]
/usr/lib64/R/lib/libR.so[0x376b8b148d]
/usr/lib64/R/lib/libR.so(Rf_eval+0x739)[0x376b8e1b09]
/usr/lib64/R/lib/libR.so[0x376b8e4790]
/usr/lib64/R/lib/libR.so(Rf_eval+0x55b)[0x376b8e192b]
/usr/lib64/R/lib/libR.so[0x376b8e4910]
/usr/lib64/R/lib/libR.so(Rf_eval+0x55b)[0x376b8e192b]
/usr/lib64/R/lib/libR.so(Rf_applyClosure+0x322)[0x376b8e5c32]
/usr/lib64/R/lib/libR.so(Rf_eval+0x430)[0x376b8e1800]
/usr/lib64/R/lib/libR.so[0x376b8e4790]
/usr/lib64/R/lib/libR.so(Rf_eval+0x55b)[0x376b8e192b]
/usr/lib64/R/lib/libR.so[0x376b8e4910]
/usr/lib64/R/lib/libR.so(Rf_eval+0x55b)[0x376b8e192b]
/usr/lib64/R/lib/libR.so(Rf_eval+0x55b)[0x376b8e192b]
/usr/lib64/R/lib/libR.so[0x376b8e4910]
/usr/lib64/R/lib/libR.so(Rf_eval+0x55b)[0x376b8e192b]
/usr/lib64/R/lib/libR.so[0x376b8e65ec]
/usr/lib64/R/lib/libR.so(Rf_eval+0x55b)[0x376b8e192b]
/usr/lib64/R/lib/libR.so[0x376b8e4910]
/usr/lib64/R/lib/libR.so(Rf_eval+0x55b)[0x376b8e192b]
/usr/lib64/R/lib/libR.so(Rf_applyClosure+0x322)[0x376b8e5c32]
/usr/lib64/R/lib/libR.so(Rf_eval+0x430)[0x376b8e1800]
/usr/lib64/R/lib/libR.so(Rf_ReplIteration+0x1e3)[0x376b9178b3]
/usr/lib64/R/lib/libR.so[0x376b917b40]
/usr/lib64/R/lib/libR.so(run_Rmainloop+0x50)[0x376b918060]
/usr/lib64/R/bin/exec/R(main+0x1b)[0x40076b]
/lib64/libc.so.6(__libc_start_main+0xed)[0x313a42169d]
/usr/lib64/R/bin/exec/R[0x40079d]
======= Memory map: ========
00400000-00401000 r-xp 00000000 08:01 1051073                            /usr/lib64/R/bin/exec/R
00600000-00601000 r--p 00000000 08:01 1051073                            /usr/lib64/R/bin/exec/R
00601000-00603000 rw-p 00001000 08:01 1051073                            /usr/lib64/R/bin/exec/R
022f8000-03928000 rw-p 00000000 00:00 0                                  [heap]
313a000000-313a022000 r-xp 00000000 08:01 786460                         /lib64/ld-2.14.90.so
313a221000-313a222000 r--p 00021000 08:01 786460                         /lib64/ld-2.14.90.so
313a222000-313a223000 rw-p 00022000 08:01 786460                         /lib64/ld-2.14.90.so
313a223000-313a224000 rw-p 00000000 00:00 0 
313a400000-313a5ad000 r-xp 00000000 08:01 786461                         /lib64/libc-2.14.90.so
313a5ad000-313a7ad000 ---p 001ad000 08:01 786461                         /lib64/libc-2.14.90.so
313a7ad000-313a7b1000 r--p 001ad000 08:01 786461                         /lib64/libc-2.14.90.so
313a7b1000-313a7b3000 rw-p 001b1000 08:01 786461                         /lib64/libc-2.14.90.so
313a7b3000-313a7b8000 rw-p 00000000 00:00 0 
313a800000-313a883000 r-xp 00000000 08:01 788752                         /lib64/libm-2.14.90.so
313a883000-313aa82000 ---p 00083000 08:01 788752                         /lib64/libm-2.14.90.so
313aa82000-313aa83000 r--p 00082000 08:01 788752                         /lib64/libm-2.14.90.so
313aa83000-313aa84000 rw-p 00083000 08:01 788752                         /lib64/libm-2.14.90.so
313ac00000-313ac17000 r-xp 00000000 08:01 786462                         /lib64/libpthread-2.14.90.so
313ac17000-313ae16000 ---p 00017000 08:01 786462                         /lib64/libpthread-2.14.90.so
313ae16000-313ae17000 r--p 00016000 08:01 786462                         /lib64/libpthread-2.14.90.so
313ae17000-313ae18000 rw-p 00017000 08:01 786462                         /lib64/libpthread-2.14.90.so
313ae18000-313ae1c000 rw-p 00000000 00:00 0 
313b000000-313b002000 r-xp 00000000 08:01 786502                         /lib64/libdl-2.14.90.so
313b002000-313b202000 ---p 00002000 08:01 786502                         /lib64/libdl-2.14.90.so
313b202000-313b203000 r--p 00002000 08:01 786502                         /lib64/libdl-2.14.90.so
313b203000-313b204000 rw-p 00003000 08:01 786502                         /lib64/libdl-2.14.90.so
313b400000-313b407000 r-xp 00000000 08:01 786463                         /lib64/librt-2.14.90.so
313b407000-313b606000 ---p 00007000 08:01 786463                         /lib64/librt-2.14.90.so
313b606000-313b607000 r--p 00006000 08:01 786463                         /lib64/librt-2.14.90.so
313b607000-313b608000 rw-p 00007000 08:01 786463                         /lib64/librt-2.14.90.so
313b800000-313b815000 r-xp 00000000 08:01 788765                         /lib64/libgcc_s-4.6.3-20120306.so.1
313b815000-313ba14000 ---p 00015000 08:01 788765                         /lib64/libgcc_s-4.6.3-20120306.so.1
313ba14000-313ba15000 rw-p 00014000 08:01 788765                         /lib64/libgcc_s-4.6.3-20120306.so.1
313bc00000-313bc17000 r-xp 00000000 08:01 786474                         /lib64/libz.so.1.2.5
313bc17000-313be16000 ---p 00017000 08:01 786474                         /lib64/libz.so.1.2.5
313be16000-313be17000 rw-p 00016000 08:01 786474                         /lib64/libz.so.1.2.5
313ec00000-313ece8000 r-xp 00000000 08:01 150116                         /usr/lib64/libstdc++.so.6.0.16
313ece8000-313eee8000 ---p 000e8000 08:01 150116                         /usr/lib64/libstdc++.so.6.0.16
313eee8000-313eef0000 r--p 000e8000 08:01 150116                         /usr/lib64/libstdc++.so.6.0.16
313eef0000-313eef2000 rw-p 000f0000 08:01 150116                         /usr/lib64/libstdc++.so.6.0.16
313eef2000-313ef07000 rw-p 00000000 00:00 0 
3140400000-314043c000 r-xp 00000000 08:01 786583                         /lib64/libreadline.so.6.2
314043c000-314063b000 ---p 0003c000 08:01 786583                         /lib64/libreadline.so.6.2
314063b000-3140643000 rw-p 0003b000 08:01 786583                         /lib64/libreadline.so.6.2
3140643000-3140644000 rw-p 00000000 00:00 0 
3145000000-314500f000 r-xp 00000000 08:01 788834                         /lib64/libbz2.so.1.0.6
314500f000-314520e000 ---p 0000f000 08:01 788834                         /lib64/libbz2.so.1.0.6
314520e000-3145210000 rw-p 0000e000 08:01 788834                         /lib64/libbz2.so.1.0.6
3148c00000-3148c23000 r-xp 00000000 08:01 815621                         /lib64/libtinfo.so.5.9
3148c23000-3148e22000 ---p 00023000 08:01 815621                         /lib64/libtinfo.so.5.9
3148e22000-3148e26000 r--p 00022000 08:01 815621                         /lib64/libtinfo.so.5.9
3148e26000-3148e27000 rw-p 00026000 08:01 815621                         /lib64/libtinfo.so.5.9
3149200000-3149338000 r-xp 00000000 08:01 177515                         /usr/lib64/libicuuc.so.46.0
3149338000-3149538000 ---p 00138000 08:01 177515                         /usr/lib64/libicuuc.so.46.0
3149538000-3149547000 r--p 00138000 08:01 177515                         /usr/lib64/libicuuc.so.46.0
3149547000-3149548000 rw-p 00147000 08:01 177515                         /usr/lib64/libicuuc.so.46.0
3149548000-314954c000 rw-p 00000000 00:00 0 
314b600000-314b7b1000 r-xp 00000000 08:01 148922                         /usr/lib64/libicui18n.so.46.0
314b7b1000-314b9b1000 ---p 001b1000 08:01 148922                         /usr/lib64/libicui18n.so.46.0
314b9b1000-314b9bc000 r--p 001b1000 08:01 148922                         /usr/lib64/libicui18n.so.46.0
314b9bc000-314b9be000 rw-p 001bc000 08:01 148922                         /usr/lib64/libicui18n.so.46.0
314da00000-314e873000 r-xp 00000000 08:01 137354                         /usr/lib64/libicudata.so.46.0
314e873000-314ea72000 ---p 00e73000 08:01 137354                         /usr/lib64/libicudata.so.46.0
314ea72000-314ea73000 r--p 00e72000 08:01 137354                         /usr/lib64/libicudata.so.46.0
314ea73000-314ea74000 rw-p 00e73000 08:01 137354                         /usr/lib64/libicudata.so.46.0
3158200000-315820d000 r-xp 00000000 08:01 165367                         /usr/lib64/libgomp.so.1.0.0
315820d000-315840c000 ---p 0000d000 08:01 165367                         /usr/lib64/libgomp.so.1.0.0
315840c000-315840d000 rw-p 0000c000 08:01 165367                         /usr/lib64/libgomp.so.1.0.0
315d600000-315d63c000 r-xp 00000000 08:01 788840                         /lib64/libpcre.so.0.0.1
315d63c000-315d83b000 ---p 0003c000 08:01 788840                         /lib64/libpcre.so.0.0.1
315d83b000-315d83c000 r--p 0003b000 08:01 788840                         /lib64/libpcre.so.0.0.1
315d83c000-315d83d000 rw-p 0003c000 08:01 788840                         /lib64/libpcre.so.0.0.1
376b400000-376b42b000 r-xp 00000000 08:01 1062362                        /usr/lib64/R/lib/libRblas.so
376b42b000-376b62a000 ---p 0002b000 08:01 1062362                        /usr/lib64/R/lib/libRblas.so
376b62a000-376b62b000 r--p 0002a000 08:01 1062362                        /usr/lib64/R/lib/libRblas.so
376b62b000-376b62c000 rw-p 0002b000 08:01 1062362                        /usr/lib64/R/lib/libRblas.so
376b800000-376baa7000 r-xp 00000000 08:01 1062365                        /usr/lib64/R/lib/libR.so
376baa7000-376bca7000 ---p 002a7000 08:01 1062365                        /usr/lib64/R/lib/libR.so
376bca7000-376bcad000 r--p 002a7000 08:01 1062365                        /usr/lib64/R/lib/libR.so
376bcad000-376bcbd000 rw-p 002ad000 08:01 1062365                        /usr/lib64/R/lib/libR.so
376bcbd000-376bdac000 rw-p 00000000 00:00 0 
376be00000-376bf78000 r-xp 00000000 08:01 1062364                        /usr/lib64/R/lib/libRlapack.so
376bf78000-376c178000 ---p 00178000 08:01 1062364                        /usr/lib64/R/lib/libRlapack.so
376c178000-376c179000 r--p 00178000 08:01 1062364                        /usr/lib64/R/lib/libRlapack.so
376c179000-376c17a000 rw-p 00179000 08:01 1062364                        /usr/lib64/R/lib/libRlapack.so
376c200000-376c235000 r-xp 00000000 08:01 136624                         /usr/lib64/libquadmath.so.0.0.0
376c235000-376c434000 ---p 00035000 08:01 136624                         /usr/lib64/libquadmath.so.0.0.0
376c434000-376c435000 rw-p 00034000 08:01 136624                         /usr/lib64/libquadmath.so.0.0.0
376c600000-376c714000 r-xp 00000000 08:01 138203                         /usr/lib64/libgfortran.so.3.0.0
376c714000-376c913000 ---p 00114000 08:01 138203                         /usr/lib64/libgfortran.so.3.0.0
376c913000-376c915000 rw-p 00113000 08:01 138203                         /usr/lib64/libgfortran.so.3.0.0
376c915000-376c916000 rw-p 00000000 00:00 0 
7fd5ef184000-7fd5ef185000 r-xp 00000000 08:03 7609099                    /home/phoxis/Documents/Works/Programming/R/metiswrap.so
7fd5ef185000-7fd5ef385000 ---p 00001000 08:03 7609099                    /home/phoxis/Documents/Works/Programming/R/metiswrap.so
7fd5ef385000-7fd5ef386000 r--p 00001000 08:03 7609099                    /home/phoxis/Documents/Works/Programming/R/metiswrap.so
7fd5ef386000-7fd5ef387000 rw-p 00002000 08:03 7609099                    /home/phoxis/Documents/Works/Programming/R/metiswrap.so
7fd5ef387000-7fd5ef3ea000 r-xp 00000000 08:03 7610359                    /home/phoxis/Documents/Works/Programming/R/libmetis.so
7fd5ef3ea000-7fd5ef5e9000 ---p 00063000 08:03 7610359                    /home/phoxis/Documents/Works/Programming/R/libmetis.so
7fd5ef5e9000-7fd5ef5eb000 rw-p 00062000 08:03 7610359                    /home/phoxis/Documents/Works/Programming/R/libmetis.so
7fd5ef5eb000-7fd5ef5f9000 r-xp 00000000 08:03 7740125                    /home/phoxis/R/x86_64-redhat-linux-gnu-library/2.15/RANN/libs/RANN.so
7fd5ef5f9000-7fd5ef7f9000 ---p 0000e000 08:03 7740125                    /home/phoxis/R/x86_64-redhat-linux-gnu-library/2.15/RANN/libs/RANN.so
7fd5ef7f9000-7fd5ef7fa000 r--p 0000e000 08:03 7740125                    /home/phoxis/R/x86_64-redhat-linux-gnu-library/2.15/RANN/libs/RANN.so
7fd5ef7fa000-7fd5ef7fb000 rw-p 0000f000 08:03 7740125                    /home/phoxis/R/x86_64-redhat-linux-gnu-library/2.15/RANN/libs/RANN.so
7fd5ef7fb000-7fd5ef869000 r-xp 00000000 08:01 1203642                    /usr/lib64/R/library/stats/libs/stats.so
7fd5ef869000-7fd5efa68000 ---p 0006e000 08:01 1203642                    /usr/lib64/R/library/stats/libs/stats.so
7fd5efa68000-7fd5efa6a000 r--p 0006d000 08:01 1203642                    /usr/lib64/R/library/stats/libs/stats.so
7fd5efa6a000-7fd5efa6c000 rw-p 0006f000 08:01 1203642                    /usr/lib64/R/library/stats/libs/stats.so
7fd5efa6c000-7fd5efbda000 rw-p 00000000 00:00 0 
7fd5efbda000-7fd5efbfd000 r-xp 00000000 08:01 1077695                    /usr/lib64/R/library/grDevices/libs/grDevices.so
7fd5efbfd000-7fd5efdfc000 ---p 00023000 08:01 1077695                    /usr/lib64/R/library/grDevices/libs/grDevices.so
7fd5efdfc000-7fd5efdfd000 r--p 00022000 08:01 1077695                    /usr/lib64/R/library/grDevices/libs/grDevices.so
7fd5efdfd000-7fd5efdfe000 rw-p 00023000 08:01 1077695                    /usr/lib64/R/library/grDevices/libs/grDevices.so
7fd5eff2e000-7fd5f0165000 rw-p 00000000 00:00 0 
7fd5f0165000-7fd5f016c000 r-xp 00000000 08:01 1078260                    /usr/lib64/R/library/methods/libs/methods.so
7fd5f016c000-7fd5f036b000 ---p 00007000 08:01 1078260                    /usr/lib64/R/library/methods/libs/methods.so
7fd5f036b000-7fd5f036c000 r--p 00006000 08:01 1078260                    /usr/lib64/R/library/methods/libs/methods.so
7fd5f036c000-7fd5f036d000 rw-p 00007000 08:01 1078260                    /usr/lib64/R/library/methods/libs/methods.so
7fd5f036d000-7fd5f0402000 rw-p 00000000 00:00 0 
7fd5f0402000-7fd5f040e000 r-xp 00000000 08:01 789196                     /lib64/libnss_files-2.14.90.so
7fd5f040e000-7fd5f060d000 ---p 0000c000 08:01 789196                     /lib64/libnss_files-2.14.90.so
7fd5f060d000-7fd5f060e000 r--p 0000b000 08:01 789196                     /lib64/libnss_files-2.14.90.so
7fd5f060e000-7fd5f060f000 rw-p 0000c000 08:01 789196                     /lib64/libnss_files-2.14.90.so
7fd5f0640000-7fd5f06f1000 rw-p 00000000 00:00 0 
7fd5f06f3000-7fd5f089c000 rw-p 00000000 00:00 0 
7fd5f089c000-7fd5f6cbf000 r--p 00000000 08:01 157303                     /usr/lib/locale/locale-archive
7fd5f6cbf000-7fd5f6cc9000 rw-p 00000000 00:00 0 
7fd5f6ccc000-7fd5f6cf3000 rw-p 00000000 00:00 0 
7fd5f6cf3000-7fd5f6cfa000 r--s 00000000 08:01 139093                     /usr/lib64/gconv/gconv-modules.cache
7fd5f6cfa000-7fd5f6cfc000 rw-p 00000000 00:00 0 
7fff473da000-7fff47403000 rw-p 00000000 00:00 0                          [stack]
7fff474a2000-7fff474a3000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]

 *** caught segfault ***
address (nil), cause 'memory not mapped' 
```

## Valgrind 转储

```
partitioning : Initial Cut: 145

METIS_OK
partitioning : Initial Cut: 202

METIS_OK
partitioning : ==1410== Invalid read of size 4
==1410==    at 0xEFAA3E3: libmetis__CreateCoarseGraphNoMask (in /home/phoxis/Documents/Works/Programming/R/libmetis.so)
==1410==    by 0xEFAB5E8: libmetis__Match_SHEM (in /home/phoxis/Documents/Works/Programming/R/libmetis.so)
==1410==    by 0xEFACB84: libmetis__CoarsenGraph (in /home/phoxis/Documents/Works/Programming/R/libmetis.so)
==1410==    by 0xEFA39FD: libmetis__MultilevelBisect (in /home/phoxis/Documents/Works/Programming/R/libmetis.so)
==1410==    by 0xEFA43D0: libmetis__MlevelRecursiveBisection (in /home/phoxis/Documents/Works/Programming/R/libmetis.so)
==1410==    by 0xEFA4795: METIS_PartGraphRecursive (in /home/phoxis/Documents/Works/Programming/R/libmetis.so)
==1410==    by 0xF1BDD85: metis_wrap (metiswrap.c:45)
==1410==    by 0x376B8B148C: ??? (in /usr/lib64/R/lib/libR.so)
==1410==    by 0x376B8E1B08: Rf_eval (in /usr/lib64/R/lib/libR.so)
==1410==    by 0x376B8E478F: ??? (in /usr/lib64/R/lib/libR.so)
==1410==    by 0x376B8E192A: Rf_eval (in /usr/lib64/R/lib/libR.so)
==1410==    by 0x376B8E490F: ??? (in /usr/lib64/R/lib/libR.so)
==1410==  Address 0x397c7a00 is not stack'd, malloc'd or (recently) free'd
==1410== 

 *** caught segfault ***
address 0x397c7a00, cause 'memory not mapped'
==1410== 
==1410== Process terminating with default action of signal 11 (SIGSEGV)
==1410==  General Protection Fault
==1410==    at 0x313A505FD0: __snprintf_chk (in /lib64/libc-2.14.90.so)
==1410==    by 0x376B979097: Rf_EncodeReal (in /usr/lib64/R/lib/libR.so)
==1410==    by 0x376B97A317: Rf_EncodeElement (in /usr/lib64/R/lib/libR.so)
==1410==    by 0x376B89A50D: ??? (in /usr/lib64/R/lib/libR.so)
==1410==    by 0x376B89C19C: ??? (in /usr/lib64/R/lib/libR.so)
==1410==    by 0x376B89A21D: ??? (in /usr/lib64/R/lib/libR.so)
==1410==    by 0x376B89C59D: ??? (in /usr/lib64/R/lib/libR.so)
==1410==    by 0x376B8CC524: R_GetTraceback (in /usr/lib64/R/lib/libR.so)
==1410==    by 0x376B915A30: ??? (in /usr/lib64/R/lib/libR.so)
==1410==    by 0x313AC0F4FF: ??? (in /lib64/libpthread-2.14.90.so)
==1410==    by 0xEFAA3E2: libmetis__CreateCoarseGraphNoMask (in /home/phoxis/Documents/Works/Programming/R/libmetis.so)
==1410==    by 0xEFAB5E8: libmetis__Match_SHEM (in /home/phoxis/Documents/Works/Programming/R/libmetis.so)
==1410== 
==1410== HEAP SUMMARY:
==1410==     in use at exit: 28,683,682 bytes in 14,598 blocks
==1410==   total heap usage: 34,400 allocs, 19,802 frees, 50,987,649 bytes allocated
==1410== 
==1410== LEAK SUMMARY:
==1410==    definitely lost: 0 bytes in 0 blocks
==1410==    indirectly lost: 0 bytes in 0 blocks
==1410==      possibly lost: 0 bytes in 0 blocks
==1410==    still reachable: 28,683,682 bytes in 14,598 blocks
==1410==         suppressed: 0 bytes in 0 blocks
==1410== Rerun with --leak-check=full to see details of leaked memory
==1410== 
==1410== For counts of detected and suppressed errors, rerun with: -v
==1410== ERROR SUMMARY: 220 errors from 14 contexts (suppressed: 2 from 2)
Segmentation fault (core dumped) 
```

# javascript - Ajax POST 请求在 Internet Explorer 中不起作用

> ID：11101025
> 
> 赞同：2
> 
> 时间：2012-06-19T12:34:06.753
> 
> 标签：javascript, ajax, internet-explorer-8

我正在构建一个 PHP 脚本，用于在人们生日时向他们发送电子邮件。我还需要一个小的网络界面，我可以在其中打开或关闭整个程序，查看今天谁在庆祝他的生日，看看是否有任何邮件无法发送。服务器上的 php 正在工作，但我正在努力使用 html 和 javascript 界面。特别是从服务器获取信息的 Ajax 请求。它在 firefox、chrome 和 opera 中运行良好，但在 Internet Explorer 8 中我没有得到服务器的响应。readyState 切换为 4，但状态保持为 0，responseText 为空。

谷歌搜索后，我发现很多人建议使用 JQuery，但我无法让它在任何浏览器中工作。我想了解更多关于它的信息，因为它看起来很容易，但现在我想知道如何在没有 JQuery 的情况下做到这一点。

**编辑**

针对评论中的问题，切换 if 和 else 语句会产生相同的结果。就像将连接从“打开”更改为“关闭”一样，顺便说一下，它应该是关闭的，我不记得为什么要更改它，可能只是出于沮丧而尝试一些事情。最后我添加了服务器端 php 代码。服务器发送回字符串数据以防“action”被关闭，或者，如果 action 是 clearlog，则只是一个没有文本的 header，如果 action 被初始化，则返回一个 jsonarray。无论是什么请求，服务器的 HTTP 状态始终为 0。

```
<script type="text/javascript">
function loadXMLDoc(action) {
    var parameters = "action="+encodeURI(action);
    var xmlhttp;
    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("POST",'http://mailer.test/App/postscript.php',true);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.setRequestHeader("Content-length", parameters.length); 
    xmlhttp.setRequestHeader("Connection", "open");
    xmlhttp.send(parameters);

    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status==200) {
            if(action == 'switchonoff'){
                document.getElementById("onoffbutton").innerHTML=xmlhttp.responseText;
            } else if(action == 'initialize'){
                var response = JSON.parse(xmlhttp.responseText);
                document.getElementById("onoffbutton").innerHTML=response['onoff'];
                document.getElementById("birthdays").innerHTML=response['birthdays'];
                document.getElementById("errors").innerHTML=response['errors'];
            } else if(action == 'clearlog'){
                document.getElementById("errors").innerHTML="";
            }
        }
    }
}

window.onload = function() {
    loadXMLDoc('initialize');
}
</script> 
```

**编辑，这是php脚本**

```
<?php 

include "settingschanger.php";
include "customercsv.php";

if (!isset($_POST['action'])) {
$_POST['action'] = 'dummy';
}

$post = $_POST['action'];

if(strcmp($post, "initialize") == 0) {
$settings = new SettingsChanger();
$onoff = $settings->getOnOff();
$csv = new CustomerCSV();
$csv->openFile((__DIR__).CustomerCSV::FILENAME);
$todaysbirthdays = $csv->getTodaysBirthdays();
$birthdays = "";
foreach ($todaysbirthdays as $row) {
    $birthday = "";
    foreach ($row as $data) {
        $birthday .= $data . " ";
    }
    $birthdays .= $birthday . "<br />";
}
$errorLogArray = $settings->getErrorLog();
$errors = "";
foreach($errorLogArray as $line) {
    $errors .= $line . "<br />";
}
$result = json_encode(array('onoff'=>$onoff, 'birthdays'=>$birthdays, 'errors'=>$errors));

header("HTTP/1.1 200 OK");
print $result;
}
if(strcmp($post, "switchonoff") == 0) {
$settings = new SettingsChanger();
$result = $settings->changeOnOff();

header("HTTP/1.1 200 OK");
print $result;
}
if(strcmp($post, "clearlog") == 0) {
$settings = new SettingsChanger();
$settings->clearLog();

header("HTTP/1.1 200 OK");
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:15:02.947

尝试使用`xmlhttp.send(parameters);`after`xmlhttp.onreadystatechange`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:20:29.467

我在旧版本的 IE（低于 v9）中返回的内容为空时遇到了一些问题，但触发了成功功能。

然后我发现我正在使用 HTML5 标签，并且在 IE 中，出于某种奇怪的原因，通过 AJAX 请求的 HTML5 输出不起作用并返回一个空的或没有 DOM。

查看“ [jquery .load() not inserting data in ie8 and below](https://stackoverflow.com/questions/8927910/jquery-load-not-inserting-data-in-ie8-and-below) ”中的最后一个编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:45:47.203

好吧，我得到了网站的工作。我现在使用获取请求而不是发布请求，这似乎有效。它并不完美，我将继续寻找一种通过发布请求来实现它的方法，但现在它会起作用。

# string - 从字符串中提取多个格式化值的正则表达式

> ID：11101027
> 
> 赞同：0
> 
> 时间：2012-06-19T12:34:07.863
> 
> 标签：string, expression

至少可以说，我不是正则表达式专家。我正在寻找的是一个正则表达式，它从字符串中提取特定格式的多个值。

示例字符串：“来自 [record:CityID] 的客户 [record:CustomerID] 属于 [record:TypeID] 类型”

我需要的是一个表达式，它给我这个字符串中格式为“[record:XXXXX]”的所有值。所以在这个例子中它会给我：

[“客户 ID”、“城市 ID”、“类型 ID”]

可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:45:31.060

在 Javascript 中：

```
var pattern = '\\[record:([a-zA-Z0-9]+)\\]';
var records = new RegExp(pattern, 'g');
var extract = new RegExp(pattern);

var string = "Customer [record:CustomerID] from [record:CityID] is of type [record:TypeID]"

var matches = string.match(records);
console.log(matches);
> [ '[record:CustomerID]',
    '[record:CityID]',
    '[record:TypeID]' ]

var records = [];
for (var i=0; i<matches.length; i++) {
    var match = matches[i].match(extract);
    records.push(match[1]);
}
console.log(records)
> [ 'CustomerID',
    'CityID',
    'TypeID' ] 
```

可能不是最简洁的解决方案，但干净且（希望）易于理解。

*   不应特殊处理的方括号通过放在`\`它们前面进行转义
*   要提取的组被包裹在 中`()`，形成一个正则表达式组/子模式
*   该模式的`[a-zA-Z0-9]+`意思是“匹配一串字母（大写或小写）或数字”，并`+`指定“长度为一个或多个”。这里的 A`*`表示“长度为 0 或更多”。

在这里，我使用了两个基于相同模式的正则表达式。它们使用不同的选项进行编译：`g`标志告诉正则表达式查找字符串中的所有匹配项。使用此标志，我们不会获得与结果匹配的组，而只会获得匹配的整个字符串。第二个正则表达式是在没有`g`标志的情况下编译的，所以我们可以用它来提取匹配的组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:53:19.947

实际上，类似的东西`sed`可以解决问题，即：

```
echo "Customer ..." | sed -e 's/\][^[]*\[record:/","/'g -e 's/^.*record:/["/' -e 's/].*$/"]/ 
```

# ruby-on-rails - Rails - will_paginate 已损坏 link_to

> ID：11101036
> 
> 赞同：0
> 
> 时间：2012-06-19T12:34:24.760
> 
> 标签：ruby-on-rails, routes, will-paginate

我添加了 will_paginate gem，它在网站的所有其他区域都运行良好。但是，每当我尝试单击视图中的“显示”链接以链接到订单时，都会出现以下错误消息： * @orders 变量似乎为空。您是否忘记传递 will_paginate 的集合对象？*

任何人都知道为什么会发生这种情况以及我该如何解决？我试过重启服务器。谢谢！！

查看代码：

```
<h3>Your Orders:</h3>
<table class="order-items">
  <th>Date</th>
  <th>Order No.</th>
  <th>View Order</th>
<% @orders.each do |order| %>
<tr>
    <td><%= order.created_at.strftime("%d %b. %Y") %></td>
    <td><%= order.id %></td>
    <td><%= link_to 'Show',  order_path(order) %></td>
</tr>
<% end %>   
</table>

<p><%= will_paginate @orders %></p> 
```

控制器代码：

```
@customer = Customer.find(params[:id])
@orders = @customer.orders.paginate page: params[:page], order: 'id desc',
  per_page: 5 
```

路线：

```
resources :orders

resources :customers

get 'admin' => 'admin#index'

get 'account' => 'customers#show'

match '/account', :to => 'customers#show'

match'/signup', :to => 'customers#new'

controller :sessions do
  get  'login' => :new
  post 'login' => :create
  delete 'logout' => :destroy
end

resources :users

resources :line_items

resources :carts

get "store/index"

resources :products do
  get :who_bought, on: :member
end

resources :line_items do
  put 'decrease', on: :member
  put 'increase', on: :member
end

root to: 'store#index', as: 'store' 
```

# python - 使用 cx_Freeze 的下一步是什么？

> ID：11101043
> 
> 赞同：2
> 
> 时间：2012-06-19T12:34:54.220
> 
> 标签：python, executable, cx-freeze, setup.py

好的，所以我安装了 python 3.2 并安装了 cx_Freeexe 4.2.3。我有一个名为 Python stuff 的文件夹。在这个文件夹中有 2 个文件。setup.py 和 holg.py（我的应用程序）

这是我的 setup.py：

```
import sys

from cx_Freeze import setup, Executable

build_exe_options = {"packages": ["os"], "excludes": ["tkinter"]}

base = None

if sys.platform == "win32":

    base = "Win32GUI"

setup(  name = "holgame",

        version = "0.1",

        description = "My GUI application!",

        options = {"build_exe": build_exe_options},

        executables = [Executable("holg.py", base=base)]) 
```

我一直在做的下一步是运行> cmd：

python setup.py 构建

我得到的是：

'python' 不是内部或外部命令、可运行程序或批处理文件。

我只是一个初学者，所以我需要明确的步骤。也许我的程序应该在不同的文件夹或其他东西中，我不能确定。有谁知道问题是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:37:48.120

您要么需要将 Python 放在 Windows 路径上，要么需要使用指向 python 的显式路径。尝试：

```
$ \Python32\Python setup.py build 
```

以下是在 Windows 机器上安装 Python 的一些很好的说明：[https ://openhatch.org/wiki/Boston_Python_Workshop_5/Friday/Windows_set_up_Python](https://openhatch.org/wiki/Boston_Python_Workshop_5/Friday/Windows_set_up_Python)

您首先需要到`cd`包含您的代码和 setup.py 的目录。您应该找到一个 Windows 命令提示符教程来帮助您了解这些基本内容。

# python - 在进行 Google SERP 解析时如何避免成为黑帽

> ID：11101044
> 
> 赞同：0
> 
> 时间：2012-06-19T12:34:56.320
> 
> 标签：python, parsing

所以我在最后一个问题上被低估了 3 次，我希望我不会在这个问题上。我正在尝试编写一个解析 Google 页面的解析器，如下所示：`urllib2.urlopen("http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=" + infoget)`.

这是允许的吗？我似乎无法根据谷歌找到规则。每天/小时允许多少请求？我赚了大约40，然后我被拒绝了。

这是黑帽子吗？我真的，绝对不是想在这里成为黑帽——我正在尝试编写可接受的、好的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:43:00.120

[https://developers.google.com/custom-search/v1/overview?hl=en](https://developers.google.com/custom-search/v1/overview?hl=en)

```
Free quota
Usage is free for all users, up to 100 queries per day. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-23T22:04:16.740

我们有一个 Python 库来获取和解析 Google 搜索结果，可在此处访问：[https ://github.com/serpapi/google-search-results-python](https://github.com/serpapi/google-search-results-python)

```
from lib.google_search_results import GoogleSearchResults
query = GoogleSearchResults({"q": "coffee"})
html_results = query.get_html() 
```

它目前仅适用于 SerpApi.com 后端，但可以随意扩展它以支持更多后端。

更全面的选择：

```
query_params = {
  "q": "query",
  "google_domain": "Google Domain",
  "location": "Location Requested",
  "device": device,
  "hl": "Google UI Language",
  "gl": "Google Country",
  "safe": "Safe Search Flag",
  "num": "Number of Results",
  "start": "Pagination Offset",
  "serp_api_key": "Your SERP API Key"
}

query = GoogleSearchResults(query_params)
query.params_dict["location"] = "Portland"

html_results = query.get_html()
dictionary_results = query.get_dictionary()
dictionary_results_with_images = query.get_dictionary_with_images()
json_results = query.get_json()
json_results_with_images = query.get_json_with_images() 
```

# websphere - 如何将 asyncHttpClient 与 commonj workmanager 集成？

> ID：11101045
> 
> 赞同：0
> 
> 时间：2012-06-19T12:35:00.920
> 
> 标签：websphere, commonj

我们有一个用例，来自最终用户的单个请求将触发对其他远程系统的 1 个或多个 http 请求。来自远程系统的所有响应都将汇总为一个对最终用户的响应。我们通过在 websphere 中使用 commonj workmanager 来实现这一点。

现在，我们想使用 asyncHttpClient 以减少线程来服务多个并发 http 调用。

所以我的问题是：

如何将 asyncHttpClient 与 commonj workmanager 集成？我们必须使用 commonj 作为线程池，因为这是在 wehsphere 中拥有托管线程的唯一方法。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:53:42.507

您需要做的就是创建一个利用工作管理器的新 ExecutorService，如下所示。[更多细节...](http://www.ibm.com/developerworks/websphere/techjournal/0606_johnson/0606_johnson.html)

1.  **查找 WorkManager 并构造 WASThreadFactory**

    InitialContext ctx = new InitialContext(); WorkManager wm = (WorkManager)ctx.lookup("java:comp/env/wm/default"); ThreadFactory tf = new WASThreadFactory(wm);

2.  **使用有界缓冲区创建 ThreadPoolExecutor**

    BlockingQueue q = 新的 ArrayBlockingQueue(50); ExecutorService myOwnThreadPool= = new ThreadPoolExecutor(1, 10, 5000, TimeUnit.MILLISECONDS, q, tf);

3.  **根据他们的[文档](http://sonatype.github.com/async-http-client/configuring.html)，您可以指定要使用的 ExecutorService 如下**

    Builder builder = new AsyncHttpClientConfig.Builder(); builder.setExecutorService(myOwnThreadPool); AsyncHttpClient 客户端 = new AsyncHttpClient(builder.build());

注意：没有验证编译。然而，我在我之前的项目中使用过这个。

# tomcat - GC args -XX:+ExplicitGCInvokesConcurrent 导致tomcat超时

> ID：11101048
> 
> 赞同：1
> 
> 时间：2012-06-19T12:35:25.333
> 
> 标签：tomcat, garbage-collection, jvm, java

这几天，我们遇到了一个奇怪的问题，我们在tomcat上的一些solr应用程序经常因为大量连接而超时。

几天前，我们添加了gc arg -XX:+ExplicitGCInvokesConcurrent，所以我们尝试删除这个arg，连接数下降了，超时时间也下降了。

但是我们的一些带有这个 gc arg 的应用程序没有遇到这个问题，生病的应用程序和健康的应用程序之间的区别是 jdk 版本。生病应用的jdk版本是1.6.0_21，健康应用是1.6.0_26。

更改jdk版本也可以解决问题。

有人可以说这是旧版本 jdk 的错误，还是 gc args 的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:11:46.350

如果您要删除`-XX:+ExplicitGCInvokesConcurrent`所有由`System.gc()`和发出的呼叫，`Runtime.getRuntime().gc()`将导致长时间的暂停时间。如果健康的应用程序没有这些调用，那可能是生病的应用程序的问题，那么您可能会遇到问题。

我不确定 jdk 错误，但可能问题出在应用程序的某个地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:57:53.457

是的`-XX:+ExplicitGCInvokesConcurrent`，旧 JDK 的使用似乎有问题。你可以看看[这个错误](http://bugs.sun.com/view_bug.do?bug_id=6919638)，从 6u22 开始就解决了（有趣的是你说 6u21 失败而 6u26 有效）。

# function - 向“帮助”函数发送参数

> ID：11101049
> 
> 赞同：2
> 
> 时间：2012-06-19T12:35:27.797
> 
> 标签：function, matlab, arguments

如何向`help`函数发送参数？

我希望有这样的东西：

```
function intro(funcname)
  disp('This is an introduction to the function you chose. See the help below:')
  help funcname
end 
```

我可以在其中显示函数的帮助文本，该名称作为函数中的参数出现。`funcname`但是，当 MatLab 只是作为函数名而不是变量值搜索时，上述方法不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:38:16.280

**简而言之：**是的，您可以使用以下函数形式来做到这一点`help`：

```
 x = 'mean';
  help(x); 
```

在您的示例中：

```
function intro(funcname)
  disp('This is an introduction to the function you chose. See the help below:')
  help(funcname);
end 
```

**说明：** 您正在使用的表格

```
help xxx 
```

只是一个捷径：

```
 help('xxx'); 
```

如果您有多个以空格分隔的参数（感谢@Amro 在这一点上），则与发送多个参数一样：例如：

```
mcc -m fileNames 
```

等于

```
mcc('-m','fileNames'); 
```

作为代表我观点的旁注，我想补充一点，一般来说，第二种形式是首选，除非您编写快速而肮脏的代码。

# netbeans - Netbeans - 跟踪项目花费的时间

> ID：11101052
> 
> 赞同：10
> 
> 时间：2012-06-19T12:35:32.550
> 
> 标签：netbeans, time

有什么办法吗，如何跟踪我在每个项目中花费了多少时间以及在（例如）5 分钟不活动后时钟停止跟踪时间并在我返回计算机时立即恢复感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:30:46.630

喜欢这个： ![截屏](../Images/f93bc4d1cd3a8b729447b9d95803a6fa.png) ？

它适用于 Mac OS X：TimeTrack

您应该搜索您的平台，并且必须是本机桌面应用程序。它也可以用 C# 为 Microsoft Windows 制作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-09T20:05:30.120

尝试从您的编程活动中自动生成的 WakaTime 指标、见解和时间跟踪。

[http://plugins.netbeans.org/plugin/56647/wakatime](http://plugins.netbeans.org/plugin/56647/wakatime)

# java - 来自 -- response.getWriter().write(xml.toString()) 的敏感数据泄露；通过网页

> ID：11101053
> 
> 赞同：-1
> 
> 时间：2012-06-19T12:35:33.130
> 
> 标签：java, stringbuffer, sensitive-data

```
xml.append("<alertDesc>");
xml.append(desc);
xml.append("</alertDesc>");

response.getWriter().write(xml.toString());  
response.setContentType("text/xml");
response.setHeader("Cache-Control", "no-cache"); 
```

`xml`是一个`StringBuffer`对象。

我有这段代码，语法中有一些敏感数据泄漏 `response.getWriter().write(xml.toString());`。我对这件事没有任何想法。

谁能告诉我一些关于这件事的事情？代码审计工具报告了此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:50:46.737

这是一个疯狂的猜测，但是您是否忘记关闭变量？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:06:33.180

使用 ESAPI 中的验证器和转义技术来包装 desc 字段这将有所帮助！！！！！！

# ruby-on-rails - Omniauth-facebook 设计 Rspec，nil:NilClass 的未定义方法“额外”

> ID：11101056
> 
> 赞同：0
> 
> 时间：2012-06-19T12:35:36.713
> 
> 标签：ruby-on-rails, rspec, devise, omniauth

我正在尝试在我的应用程序中测试omniauth-facebook 集成，但我一直在失败：

```
Failure/Error: get :facebook
 NoMethodError:
   undefined method `extra' for nil:NilClass
 # ./app/models/user.rb:17:in `find_for_facebook_oauth'
 # ./app/controllers/users/omniauth_callbacks_controller.rb:4:in `facebook'
 # ./spec/controllers/users/omniauth_callbacks_controller_spec.rb:18:in `block (4 levels) in <top (required)>' 
```

这是引发失败的代码行：

**用户.rb**：

```
def self.find_for_facebook_oauth(auth, signed_in_resource=nil)
  data = auth.extra.raw_info # this is line 17
  if user = User.where(:email => data.email).first
    user
  else
    user = User.new
    user
  end
end 
```

**omn​​iauth_callbacks_controller.rb**：

```
def facebook
  @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user) # this is line 4

  if @user.persisted?
    flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Facebook"
    sign_in_and_redirect @user, :event => :authentication
  else
    flash[:notice] = "Authentication was successful, please continue your registration process."
    session["devise.facebook_data"] = request.env["omniauth.auth"]
    redirect_to new_user_registration_url
  end
end 
```

**omn​​iauth_callbacks_controller_spec.rb**：

```
before(:each) do
  stub_env_for_omniauth

  get :facebook # this is line 18
  @user = User.where(:email => "ghost@nobody.com").first
end

def stub_env_for_omniauth
  request.env["devise.mapping"] = Devise.mappings[:user]
  pre = { "omniauth.auth" => { "provider" => "facebook", "uid" => "1234", "credentials" => {"token" => "abcdefg"}, "extra"=>{"raw_info" => {"id" => "1234567", "email" => "ghost@nobody.com", "name" => "Mark", "gender" => "male" }}}}
  env = OmniAuth::AuthHash.new(pre)
  @controller.stub!(:env).and_return(env)
end 
```

这是**spec_helper.rb**：

```
require 'omniauth'
OmniAuth.config.test_mode = true 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:46:58.510

而不是`@controller.stub!`我认为你应该设置

```
request.env["omniauth.auth"] = env 
```

在此处阅读有关测试omniauth的更多信息[https://github.com/intridea/omniauth/wiki/Integration-Testing](https://github.com/intridea/omniauth/wiki/Integration-Testing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:20:10.853

嘿，只需在**facebook**方法中添加以下行

```
def facebook
raise request.env["omniauth.auth"].to_yaml
....
end 
```

然后检查您从 facebook-omniauth 得到的响应。这可能会帮助您发现问题。

# c++ - 对于频繁创建和删除的游戏对象，我应该使用什么容器？

> ID：11101058
> 
> 赞同：2
> 
> 时间：2012-06-19T12:35:45.823
> 
> 标签：c++, list, visual-c++, c++03

我正在做一个游戏，我创建对象并经常杀死它们。我必须能够线性循环对象列表，下一个对象总是比上一个对象更新，因此对象的渲染将是正确的（它们将重叠）。我还需要能够将每个对象的指针存储到四叉树中，以便快速找到附近的对象。

我的第一个想法是使用`std::list`，但我以前从未做过这样的事情，所以我正在寻找专家对此的想法。

我应该使用什么容器？

**编辑：**我不只是从前面删除：对象可以按任何顺序被杀死，但它们总是被添加到列表的末尾，所以最后一项是最新的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:47:46.330

当您不确定自己在做什么时，推荐使用[std::vector容器。](http://en.cppreference.com/w/cpp/container/vector)只有当您知道这对您不起作用时，您才应该选择其他东西。

也就是说，如果您经常添加到容器的后面并从前面删除，您可能需要[std::deque](http://en.cppreference.com/w/cpp/container/deque)。 **[编辑]**但看起来这不是你在做什么。

我想您可能需要两个容器，一个用于维护插入顺序，一个用于四叉树。Internet 上有很多四叉树的实现，所以我将重点介绍另一种。按照您的建议使用[std::list](http://en.cppreference.com/w/cpp/container/list)将使删除操作*本身*比向量或双端队列更快。它还具有让您存储迭代器的优点，因为 list 在删除元素时不会使其他迭代器无效。四叉树中的对象可以在插入顺序列表中维护一个迭代器。当您从四叉树中删除一个元素时，您也可以在 O(1) 时间内将其从列表中删除。

与往常一样，关于使用哪个容器的决定完全取决于权衡。列表与向量相比会增加内存占用，并且会丢失连续的内存布局。当您的数据集很大时，您可能会惊讶于缓存位置的重要性。唯一确定的方法是尝试各种容器，看看哪个容器最适合您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:41:43.697

我认为[boost::stable_vector](http://www.boost.org/doc/libs/1_48_0/doc/html/container/non_standard_containers.html#container.non_standard_containers.stable_vector)适合您删除\迭代的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:02:58.560

因此，您希望能够按照添加项目的顺序遍历您的容器，但您希望能够从容器中的任何点移除项目。一个简单的`queue`显然不会破解它。

令人高兴的是，有 4 个容器可以轻松完成这项工作`std::vector`，`std::list`和。如果您使用标准容器惯用语（例如, , , , 以及在较小程度上的 , , , ），您可以使用您喜欢的任何容器。通过这 8 个操作，您可以在 、 和 之间切换，并且仅使用前 4 个操作，您也可以使用。编写您的代码，然后您可以轻松地在不同的容器类型之间进行切换和更改，并进行一些分析以比较性能和内存开销等。`std::deque``std::set``begin``end``erase``insert``push_front``pop_back``front``back``std::vector``std::list``std::deque``std::set`

直觉上，`std::list`这可能是一个不错的选择，也许`std::set`也可以。但与其做出假设，不如使用模板库为您提供的通用工具，稍后当您有一些有意义的性能数据可供使用时，对其进行分析和优化。

# java - 如何在 JAVA 中解析 JSONObjects 的 JSONArray？

> ID：11101059
> 
> 赞同：3
> 
> 时间：2012-06-19T12:35:46.107
> 
> 标签：java, android, json, arrays

我有以下数组从 PHP 返回到我的 JAVA Android 应用程序：

```
Array ( [0] => Array ( [referral_fullname] => Name 1 [referral_balance] => 500 ) [1] => Array ( [referral_fullname] => Name 2 [referral_balance] => 500 ) ); 
```

在 Java 中，它们上面的数组如下所示：

```
{"0":{"referral_fullname":"Name 1","referral_balance":"500"},"1":{"referral_fullname":"Name 2","referral_balance":"500"}}; 
```

对于我正在使用的简单 JSONObject：

```
JSONTokener tokener = new JSONTokener(result.toString());
JSONObject finalResult = new JSONObject(tokener);

referral_fullname = finalResult.getString("referral_fullname"); 
```

但是对于我不知道的一组对象！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:38:56.793

```
String str = your Json-> apply to.String();

    JSONObject jObject  = new JSONObject(str);

    Map<String,String> map = new HashMap<String,String>();
    Iterator iter = jObject.keys();
    while(iter.hasNext()){
        String key = (String)iter.next();
        String value = jObject .getString(key);
        map.put(key,value);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T12:47:36.147

你的 Json 语法错误，`JSONArray`应该是这样的：

```
["0":{"referral_fullname":"Name 1","referral_balance":"500"},"1":{"referral_fullname":"Name 2","referral_balance":"500"}]; 
```

并解析一个`JsonArray`包含一些的`JSONObject`，试试这个：

```
//parse the result
            JSONObject jsonResult = null;
            JSONArray arrayResult = null;
            ArrayList<YourObject> listObjects = null;
            try {
                arrayResult = new JSONArray(result);
                if(arrayResult != null) {
                    listObjects = new ArrayList<YourObject>();
                    int lenght = arrayResult.length();
                    for(int i=0; i< lenght; i++) {
                        JSONObject obj = arrayResult.getJSONObject(i);
                        YourObject object = new YourObject(obj);
                        listObjects.add(object);
                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
            } 
```

并在您的 Class 中添加一个构造函数`YourObject`以将您的 Json 转换为实例：

```
public YourObject(JSONObject json) {
    if (!json.isNull("referral_fullname"))
        this.referral_fullname = json.optString("referral_fullname", null);
    if (!json.isNull("referral_balance"))
        this.referral_balance = json.optString("referral_balance", null);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T12:38:44.097

你应该使用

```
JSONArray finalResult = new JSONArray(tokener); 
```

如果你可以的话。您的结构现在是一个具有两个字段 0 和 1 的对象，其中包含另一个对象。如果你想像这样轻松地迭代，你必须得到一个对象数组来代替这个复合对象

```
JSONObject jso;
for(int i = finalResult.lenght-1; i >=0; i--){
  jso = finalResult.get(i);
  // jso == {"referral_fullname":"Name 1","referral_balance":"500"}

  [whatever]

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T12:54:10.650

尝试这个.............

```
final JSONArray result_array = json.getJSONArray("result"); 

for (int i = 0; i < result.length(); i++) {

JSONObject joObject = result_array.getJSONObject(i);
String jName = joObject.get("referral_fullname").toString();
String jbalance = joObject.get("referral_balance").toString();

                    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-06T12:38:19.000

首先创建一个 JSON 对象，然后在内部级别查看如果你有数组然后获取数组。您需要先制作 JSON 对象。例如，如果 resp 是一个字符串（例如作为 http 响应）

```
JSONObject jsonObject = new JSONObject(resp); 
```

jsonObject 可能包含其他 JSON 对象或 JSON 数组。如何转换 JSON 取决于响应。如果 arraykey 是 JSON 对象中的一个数组，那么我们可以通过以下方式获取数组列表。

```
JSONArray arr  = jsonObject.getJSONArray("arraykey"); 
```

检查 arr 的长度，如果大于 0，则它包含 JSON 对象或 JSON 数组，具体取决于数据。可以在 [http://www.hemelix.com/JSONHandling找到一个完整的示例，其中包含有关 JSON 字符串到 JSON 数组的一些解释](http://www.hemelix.com/JSONHandling)

# vb.net - 通过 vb.net 以编程方式单击 html 按钮

> ID：11101060
> 
> 赞同：1
> 
> 时间：2012-06-19T12:35:46.907
> 
> 标签：vb.net

我必须以编程方式单击网站第三页上的 HTML 按钮。该按钮没有ID。它只有名称 type 和 value 。该按钮的 HTML 代码如下所示

```
<FORM NAME='form1' METHOD='post' action='/dflogin.php'>
  <INPUT TYPE='hidden' NAME='txtId' value='E712050-15'>
  <INPUT TYPE='hidden' NAME='txtassId' value='1'><INPUT TYPE='hidden' NAME='txtPsw'  value='HH29'>
  <INPUT TYPE='hidden' NAME='txtLog' value='0'><h6 align='right'>
  <INPUT TYPE='SUBMIT' NAME='btnSub' value='Next' style='background-color:#009900; color:#fff;'></h6>
</FORM> 
```

我正在使用以下代码单击它

```
For Each webpageelement As HtmlElement In allButtons

        If webpageelement.GetAttribute("value") =  "Start" Then

            webpageelement.InvokeMember("click")

        End If

Next 
```

但我无法点击它。我正在使用 vb.net 2008 平台。谁能告诉我点击它的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:46:04.940

```
Dim Elems As HtmlElementCollection
Dim WebOC As WebBrowser = WebBrowser1
Elems = WebOC.Document.GetElementsByTagName("input")
For Each elem As HtmlElement In Elems
    elem.InvokeMember("click")
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T14:03:04.797

我花了很长时间试图找到这个问题的答案。我从来没有意识到你可以使用 javascript 来调用点击。一旦我读到解决方案变得非常简单：

```
Public Function clickbyid(ByVal id)

    If TheBrowser.Document.GetElementById(id) IsNot Nothing Then
        Dim Headers As String = "" 'insert headers if you want to

        TheBrowser.Navigate("javascript:document.getElementById('" & id & "').click();", "_self", Nothing, Headers)

        'This keeps the function active until the browser has finished loading
        Do While TheBrowser.ReadyState <> WebBrowserReadyState.Complete
            Application.DoEvents()
        Loop
        Return 1
    Else

        MessageBox.Show("Could not find link by id" & id)
        Return Nothing
    End If

End Function 
```

您可能必须将“TheBrowser”更改为“WebBrowser1”。如果您不想返回结果，只需将其更改为 public sub 并删除 return 语句。

**如果 htmlelement 没有 id**则使用以下函数添加一个

```
Public Function clickbyelement(ByVal theButton As HtmlElement)

    Try

        'Generate a unique id to identify the element
        Dim randomID = "vbAdded" & GetRandom(10000, 100000).ToString
        'check to make sure the ID does not already exist
        While TheBrowser.Document.GetElementById(randomID) IsNot Nothing
            randomID = "vbAdded" & GetRandom(10000, 100000).ToString
        End While
        'add the ID to the element
        theButton.SetAttribute("id", randomID)
        'click
        clickbyid(randomID)
        Return True

    Catch ex As Exception

        Return False

    End Try

End Function

Public Function GetRandom(ByVal Min As Integer, ByVal Max As Integer) As Integer
    ' by making Generator static, we preserve the same instance '
    ' (i.e., do not create new instances with the same seed over and over) '
    ' between calls '
    Static Generator As System.Random = New System.Random()
    Return Generator.Next(Min, Max)
End Function 
```

感谢 Dan Tao 提供的随机数：[https ://stackoverflow.com/a/2677819/381273](https://stackoverflow.com/a/2677819/381273)

测试和工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T03:52:21.767

尝试在表单上调用提交，而不是单击输入。

编辑：糟糕，HTMLElementCollection 没有实现通用的 IEnumerable。试试这个：

```
Dim l_forms = WebBrowser1.Document.GetElementsByTagName("form")
If l_forms.Count > 0 Then
  l_forms.Item(0).InvokeMember("submit")
End If 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T12:45:46.033

听起来您正在尝试执行客户端操作 -在服务器上操作时*单击按钮*（VB 代码）。这行不通。

因此，要么使用 Javascript，要么`document.form1.submit()`调用连接到按钮的 VB 子程序`btnsub.click`（或您命名的任何名称）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T11:22:44.150

**解决方案：**

```
WebBrowser1.Navigate("UrlHere!")

'wait till the page is laoded

Do While WebBrowser1.ReadyState <> WebBrowserReadyState.Complete
Application.DoEvents()
Loop

WebBrowser1.Document.Body.InnerHtml = Replace(WebBrowser1.Document.Body.InnerHtml, "NAME='btnSub'", "NAME='btnSub' id='btnSub'") 'insert id into youre button
WebBrowser1.Document.GetElementById("btnSub").InvokeMember("click") 'click on btnSub 
```

;)

# java - jPcap - 将数据包发送到选定的 MAC（不是选定的接口）

> ID：11101068
> 
> 赞同：1
> 
> 时间：2012-06-19T12:36:12.480
> 
> 标签：java, packet, packet-capture, packet-sniffers, jpcap

我正在尝试使用以下命令将以太网数据包发送到**选定的目标 MAC 地址**`jPcap`：

```
public void sendPacket(Packet packet, byte[] srcMac, byte[] dstMac, Interface i) throws IOException 
{
  JpcapSender sender = JpcapSender.openDevice(i.netInterface);
  EthernetPacket ether = new EthernetPacket();
  ether.frametype = EthernetPacket.ETHERTYPE_IP;
  ether.src_mac = srcMac;  // MAC address of selected interface
  ether.dst_mac = dstMac;  // MAC addr. choosed somwhere on form
  packet.datalink = ether;

  sender.sendPacket(packet);
  sender.close();
} 
```

它可以工作，但它**总是发送到选定的接口**而不是`dst_mac`！

所以我不明白所选接口和之间的关系`scr_mac`：

*   为什么我必须同时选择（`interface`和`scr_mac`）？
*   `dst_mac`为什么即使不使用我也要添加？
*   那么如何从我的计算机中发送数据包呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:12:33.667

> 为什么我必须同时选择（接口和 scr_mac）？

接口是软件用来通信（发送或接收数据包）的接口。这通常是您的以太网卡。您需要指定它以便 Jpcap 知道如何发送信息。src_mac 地址是包头的一部分。它旨在动态使用，以便在发送数据包时使用适当的信息对其进行更新。src_mac 不一定会影响数据包的发送方式。

> 为什么即使不使用也必须添加 dst_mac？

它被使用。确保通过直接以太网连接将具有指定 MAC 地址的其他设备链接到您的源，并确保它已准备好接收数据。现在，我怀疑正在发生的事情是，您正试图通过主机上的相同界面进行回读。

[Jpcap 的网站上](http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/samples.html)有一些我觉得有用的教程和示例。我已经使用 Jpcap 库做了很多工作，如果您还有任何问题，我很乐意为您提供帮助。

# iphone - TableviewCell 在表格中没有数据时显示消息

> ID：11101069
> 
> 赞同：0
> 
> 时间：2012-06-19T12:36:17.383
> 
> 标签：iphone, ios, uitableview

![在此处输入图像描述](../Images/1d1cf952289a8d07c67814661e6e08f0.png)

我正在使用分组表视图来开发使用数据库的联系人列表。当列表中没有联系人时，我必须在 tableview 上显示消息“没有联系人”。我该怎么做？

分享你的想法..

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:44:18.893

假设您使用数组来存储所有联系人，然后使用以下委托

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
   { 
   // You can also modify this condition according to a specific section

   if([YOUR_ARRAY count] == 0)
    {
    return 1;
    }
   else  
   return [YOUR_ARRAY count];
 } 
```

现在在以下委托中将数据添加到表中

```
-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

  // Initialise your cell

 if([YOUR_ARRAY count] > 0){

  // add your array data to cells

  }

  if([YOUR_ARRAY count] == 0){

   // this means no contacts in array and therfore you have only one cell to display NO CONTACTS

   }

   return cell;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:44:46.613

对于这种情况，我们使用表头。

如果表格在他的数据源中有元素，则表格标题清晰且高度为 1px。如果数据源没有元素，则表头视图设置为与表的框架一样大，并包含消息、图像或您可能需要的任何内容。

我们使用的函数（实际上是表视图委托方法）是[section 中 header 的 height 和 section](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aheightForHeaderInSection%3a)中[header 的 view](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aheightForHeaderInSection%3a)。我们在 viewForHeader 函数中验证了数据源

您也可以使用表格页脚实现相同的效果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:46:03.040

你可以添加 UILabel 并设置标签的文本

```
label.text = @"No results "; 
```

你做一个测试

```
if ([contacts count] == 0)
{
     yourTableview.hidden = YES;
      yourLabel.hidden = NO;
}
else
{
      yourTableview.hidden = NO;
      yourLabel.hidden = YES;
}` 
```

# asp.net - 删除 asp.net 页面上水晶报表查看器中的主报表选项卡

> ID：11101072
> 
> 赞同：0
> 
> 时间：2012-06-19T12:36:21.310
> 
> 标签：asp.net, crystal-reports-2010

虽然我已经找到了一些解决这个问题的方法，但它们都没有提到 ASP.NET 应用程序和那里使用的查看器。有谁知道如何从 ASP.NET 页面上的 Crystal 报表查看器中删除“主报表”选项卡？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:10:26.627

找到了。它是名为 HasDrilldownTabs 的 CrystalReportViewer 控件的属性。将其设置为假。

就是这样。

# string - R：截断字符串而不拆分单词

> ID：11101073
> 
> 赞同：6
> 
> 时间：2012-06-19T12:36:25.217
> 
> 标签：string, r

我有一堆字符串，其中一些相当长，如下所示：

```
movie.titles <- c("Il divo: La spettacolare vita di Giulio Andreotti","Defiance","Coco Before Chanel","Happy-Go-Lucky","Up","The Imaginarium of Doctor Parnassus") 
```

我现在想将这些字符串截断为最多 30 个字符，但在此过程中不会拆分任何单词，并且理想情况下，如果字符串被截断，则将省略号添加到字符串的末尾.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:41:09.937

这是一个基于 R 的解决方案：

```
trimTitles <- function(titles) {
    len <- nchar(titles)
    cuts <- sapply(gregexpr(" ", titles), function(X) {
            max(X[X<27])})
    titles[len>=27] <- paste0(substr(titles[len>=27], 0, cuts[len>=27]), "...")
    titles
}
trimTitles(movie.titles)
# [1] "Il divo: La spettacolare ..."  "Defiance"                     
# [3] "Coco Before Chanel"            "Happy-Go-Lucky"               
# [5] "Up"                            "The Imaginarium of Doctor ..." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:43:15.710

我建议你看看这个`abbreviate`功能。它缩写字符串，并允许一些控制。看：

[http://stat.ethz.ch/R-manual/R-devel/library/base/html/abbreviate.html](http://stat.ethz.ch/R-manual/R-devel/library/base/html/abbreviate.html)

对于手册页。

# r - R包手册留下很多空白

> ID：11101085
> 
> 赞同：2
> 
> 时间：2012-06-19T12:37:29.100
> 
> 标签：r, package, manual

我正在为我的 R 包编写手册页。*其中一个名为“ pkgname* -package.RD”的手册页在详细信息的开头和文本实际显示的位置之间留下了很多空白。我不知道为什么。有没有人遇到过这个问题？这是我那部分的代码：

```
\details{

\tabular{ll}{
Package: \tab iPAC\cr
Type: \tab Package\cr
Version: \tab 0.3\cr
Date: \tab 2012-06-06\cr
License: \tab GPL-2 \cr
}

To identify amino acid clusters ........
} 
```

它在打印表格之前进入一个全新的页面，将当前页面的大约 85% 留空。谢谢！

# php - 使用 URL 参数构建 IFrame？

> ID：11101092
> 
> 赞同：0
> 
> 时间：2012-06-19T12:37:53.920
> 
> 标签：php, html, asp.net-mvc-4

我想要一个 iframe，它显示在 url 中作为参数给出的页面。我正在使用 ASP.NET MVC4

所以我想做这样的事情：

更新了它...但我认为仍然不对

```
 <?php
 if(!isset($_GET['link']){
 $link = $_GET['link'];}
 ?>

<iframe name="inlineframe" src="<?php $link ?>" frameborder="0" scrolling="auto"          width="500" height="180" marginwidth="5" marginheight="5" ></iframe> 
```

但我无法为此找出正确的代码。谁能帮忙？

我也尝试过回显 php，但这似乎对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:56:12.723

您的代码片段的问题是：

```
src="<?php $link ?>" 
```

您正在调用该变量，但对它什么也不做

要在 src 属性中写入变量，请使用 echo：

```
src="<?php echo $link ?>" 
```

您还应该删除 ! 在你的 if 语句中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:56:22.083

试试这个：

```
 <?php
    $link = '';
    if(isset($_GET['link']){
        $link = $_GET['link'];
    }
 ?> 
```

还有`echo`你的链接变量。 `src="<?php echo $link; ?>"`

# iphone - 如何从库中获取音乐文件

> ID：11101093
> 
> 赞同：1
> 
> 时间：2012-06-19T12:38:00.350
> 
> 标签：iphone

我正在开发一个应用程序。我需要从电话库中获取音乐文件。为此我使用 MPMediaPickerCOntroller。但它不会触发 didpickingitem 委托方法。我的代码如下所示。

```
- (void)viewDidLoad
 {
[super viewDidLoad];
MPMediaPickerController *picker =[[MPMediaPickerController alloc] initWithMediaTypes: MPMediaTypeMusic];
picker.delegate                     = self;
picker.allowsPickingMultipleItems   = YES;
picker.prompt                       =@"Add songs to play";
[self presentModalViewController:picker animated: YES];
}

 - (void) mediaPicker: (MPMediaPickerController *) mediaPicker didPickMediaItems: (MPMediaItemCollection *) mediaItemCollection 
   {
        NSLog(@"sdfadsf");
        NSLog(@"%@",mediaItemCollection);
        NSArray *slist=[mediaItemCollection copy];
         NSLog(@"%@",slist);

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:49:32.163

从这里阅读[iPhone 中的音乐播放器框架](http://oleb.net/blog/2009/07/the-music-player-framework-in-the-iphone-sdk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:56:12.317

您是否在 .h 中声明 MPMediaPickerControllerDelegate？

前任：

> @interface FirstViewController : UIViewController

如果你不这样做，那将解释为什么该方法没有触发。另外，我不相信它会在模拟器上运行；仅在设备上。

编辑：

```
-(IBAction)presentLibrary:(id)sender
{
    //this is called from a button press, but you could do it in viewDidLoad
    MPMediaPickerController *picker = [[MPMediaPickerController alloc] initWithMediaTypes: MPMediaTypeMusic];
    picker.delegate = self;
    picker.allowsPickingMultipleItems = NO;
    picker.prompt  = NSLocalizedString (@"Select any song from the list", @"Prompt to user to choose some songs to play");
    [self presentModalViewController: picker animated: YES];    
}

- (void)mediaPicker:(MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection
{
     NSLog(@"didpick");
    if (mediaItemCollection) {
        [_mediaPlayer setQueueWithItemCollection: mediaItemCollection];
        _mediaCollection = mediaItemCollection;
    }

    [mediaPicker dismissModalViewControllerAnimated:YES];
} 
```

# wso2 - WSO2 ESB 和 WSO2 Bam 兼容性

> ID：11101100
> 
> 赞同：1
> 
> 时间：2012-06-19T12:38:15.887
> 
> 标签：wso2, wso2esb, wso2bam

ESB 和 BAM 版本之间存在兼容性问题？

我正在尝试配置这两个产品，使用 p2_repo [http://dist.wso2.org/p2-zip/carbon/releases/3.2.0/20安装 ESB 功能、BAM 活动数据中介（版本 3.2.0） -06-2011/p2-repo.zip](http://dist.wso2.org/p2-zip/carbon/releases/3.2.0/20-06-2011/p2-repo.zip)

我在 BAM monotored 服务器中添加 ESB 服务器时遇到问题，引发异常：添加服务器时出错。订阅 https://localhost:9444/services/BAMEventBrokerService 失败。（在 WSO2 BAM 中添加 ESB 服务器为：https://localhost:9444 - Eventing - Mediation）

我尝试了各种组合：

*   WSO2 ESB 4.0.0 和 WS02 BAM 1.3.2 - 失败；
*   带有 WS02 BAM 1.3.0 的 WSO2 ESB 4.0.0 - 失败；
*   WSO2 ESB 4.0.3 和 WS02 BAM 1.3.2 - 失败；
*   WSO2 ESB 4.0.3 和 WS02 BAM 1.3.0 - 好的，我设法正确配置它，但是 Bam 没有刷新数据统计信息。我向 ESB 服务发送了一些请求，但 BAM 没有注册任何东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T11:44:24.643

我现在看到了这个问题。您可以尝试使用 具有最新 ESB 4.5.1 和 BAM 2.0.1的[中介数据代理](http://docs.wso2.org/wiki/display/BAM201/Setting+up+Mediation+Data+Agent)和[BAM 中介。](http://docs.wso2.org/wiki/display/BAM201/Setting+up+BAM+Mediator)您可以使用[4.0.3 p2-repo](http://dist.wso2.org/p2/carbon/releases/4.0.3/)。兼容性经过测试。

# javascript - 我可以在 javascript 中使用 c 中的 & 来处理参数吗？

> ID：11101102
> 
> 赞同：0
> 
> 时间：2012-06-19T12:38:27.283
> 
> 标签：javascript

> **可能重复：**
> [在 Javascript 中通过引用传递变量](https://stackoverflow.com/questions/7744611/pass-variables-by-reference-in-javascript)

我拼命地寻找解决方案。我有一个 javascript 项目要完成，唯一阻碍我的是这个小东西。我只需要 c 中的和符号之类的东西放在函数参数旁边，这样它就可以通过引用传递，并且它会在函数之外发生变化。

现在我知道还有其他方法。但就我而言，这是唯一能帮助我的事情。这是一个创建二叉搜索树的程序，我最初是用 c++ 制作的，但我需要将它转换为 javascript，因为我将展示代码执行时树是如何生成的。这是我的项目。因此，要创建二进制结构，只有像＆符号这样的东西会对我有所帮助。

```
function nod()
{
    var info;
    var left;
    var right;
}

var rad;
rad = new nod();
rad = null;

function create(rad,x) // create(nod *&rad, int x) in c++
{
    if(rad==null)
    {
        rad = new nod();
        rad.info = x ;
        rad.left = rad.right = null;
    }
    else
    {
        if(x < rad.info)
        {
            create(rad.left,x);
        }
        else
        { 
            create(rad.right,x);
        }
    }
}

function read(rad) // read(nod *&rad) in c++
{
    var input = [
                    0,
                    10,
                    2,
                    1,
                    8,
                    9,
                    4,
                    5,
                    3,
                    6,
                    20,
                    11,
                    30,
                    21,
                    31,
                    22,
                    23,
                ];
    var i;
    for(i=1;i<=16;i++)
    {
        create(rad,input[i]);
    }
}

read(rad); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:42:22.023

在 javascript 中，对象是通过引用传递的。因此，请尝试将您的值作为对象传递。提示：尝试像这样传递它 {value:your_value}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:50:18.420

未经测试，但如果你不迫切需要递归，你可以使用这个：

```
function create(rad, x) // create(nod *&rad, int x) in c++
{
  var result = new nod();
  result.info = x;
  result.left = result.right = null;

  while (true) {
    if (x < rad.info) {
      if (rad.left) {
        rad = rad.left;
        continue;
      }
      rad.left = result;
      break;
    } else
      if (rad.right) {
        rad = rad.right;
        continue;
      }
      rad.right = result;
      break;
    }
  }
} 
```

# sql - Sybase 使用参数作为 where 子句

> ID：11101106
> 
> 赞同：1
> 
> 时间：2012-06-19T12:38:45.537
> 
> 标签：sql, tsql, parameters, sybase, where

我有一组用于 where 子句的动态条件。

我试图将它们作为完整子句的参数添加到 WHERE 子句中的存储过程中，但没有返回结果。

这可能吗？

```
Parameter @sql_statement = 'date in ('2011-01-01','2012-01-01','2012-05-24') AND doc = '1''

#where statement
WHERE emp='x' AND @sql_statement 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:59:53.973

正如[Dems](https://stackoverflow.com/users/53341/dems)所提到的，您似乎想要使用[动态 SQL](http://sybasease.blogspot.com/2005/05/dynamic-sql.html)。

你可以试试：

```
declare @where_clause varchar(100)
declare @sql_statement varchar(500)
select @where_clause = 'date in (''2011-01-01'',''2012-01-01'',''2012-05-24'') AND doc = ''1'''
select @sql_statement = 'select * from my_table where ' + @where_clause
exec (@sql_statement) 
```

# javascript - 如何验证请求是否来自您网站上的脚本？

> ID：11101108
> 
> 赞同：0
> 
> 时间：2012-06-19T12:38:53.723
> 
> 标签：javascript, facebook, security, facebook-login

我目前正在实现 Javascript Facebook 登录 API。

根据来自 Facebook 的回调响应，此客户端脚本然后将带有查询字符串参数的请求发送到我们网站上的 URL。根据该 URL 中的电子邮件，对客户端进行身份验证。

这是不安全的。Facebook（据我所知）没有返回我们可以验证的其他令牌，并且我们希望根据查询字符串参数中的电子邮件登录用户，并且没有密码。

我想添加另一个查询字符串参数，让我们确信查询字符串数据来自 Facebook 响应后的 JavaScript 重定向。

我认为这应该是由客户端脚本创建的某种散列值，我可以与服务器端进行比较。但是，通过客户端 cookie 或检查客户端脚本，攻击者可以使用用于创建此密钥的每个资源。

我可以使用一种通用且安全的方法来解决此问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:47:01.543

Facebook 显然使用[OAuth](https://developers.facebook.com/docs/guides/web/#login)。在不涉及太多细节（您可以在相关的 OAuth 和 FB 文档中找到）的情况下，OAuth 使用在您的*服务器*和服务提供商（在本例中为 Facebook）之间共享的秘密进行操作，该秘密永远不会向前端 Javascript 透露，并且用于确认您收到的回电是否真实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:43:37.920

每次对用户进行身份验证时，都向 Facebook 传递一个唯一的回调 URL。

此 URL 应包含一些安全令牌，如果存在，它将识别登录尝试的真实性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:46:19.870

您可以将`state`变量添加到您对 Facebook 的请求中。Facebook 将返回给您以验证您的请求。

[https://developers.facebook.com/docs/reference/dialogs/oauth/](https://developers.facebook.com/docs/reference/dialogs/oauth/)

# java - java - 如何将垂直滚动条添加到Java中具有SpringLayout的Jpanel？

> ID：11101113
> 
> 赞同：0
> 
> 时间：2012-06-19T12:39:07.070
> 
> 标签：java, swingx

我有下面的代码片段，其中 TestClass 正在扩展使用 SpringLayout 的 jPanel，我无法在其中添加垂直滚动条。

你们能帮帮我吗？

```
 public class TestClass extends JPanel {

            private SpringLayout layout;
            private Spring s, sprWest;
            private JComboBox comboDevice = new JComboBox();
            private JComboBox comboCommand = new JComboBox();
            private JLabel lblDevice = new JLabel("Select the Device:");
            private JLabel lblCommand = new JLabel("Select Command:");
            private JButton btnCommand = new JButton("Save");

            public TestClass () {
                layout = new SpringLayout();
                s = Spring.constant(0, 60, 60);
                setLayout(layout);
            }

            public void populateFields(){
                add(lblCommand);
                add(comboCommand);

                sprLblEast = Spring.sum(s, Spring.max(layout.getConstraints(lblCommand).getWidth(), layout.getConstraints(lblDevice).getWidth()));
                Spring strut = Spring.constant(10);

                layout.putConstraint(SpringLayout.NORTH, lblCommand, strut, SpringLayout.SOUTH, comboDevice);
                layout.putConstraint(SpringLayout.NORTH, comboCommand, strut, SpringLayout.SOUTH, comboDevice);
                layout.putConstraint(SpringLayout.EAST, lblCommand, sprLblEast, SpringLayout.WEST, this);
                layout.putConstraint(SpringLayout.WEST, comboCommand, Spring.sum(s, layout.getConstraints(lblCommand).getWidth()), SpringLayout.WEST, lblCommand);
                layout.putConstraint(SpringLayout.EAST, this, sprLblEast, SpringLayout.WEST, comboCommand);

                List cmdList = getCommandList();
                for (int index = 0; index < cmdList.size(); index++) {
                    comboCommand.addItem(cmdName);
                }
                validate();
                repaint();
            }
    } 

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:55:31.060

我建议使用`ScrollPane`

`ScrollPane mainWindow = new ScrollPane(ScrollPane.SCROLLBARS_AS_NEEDED); mainWindow.add(this);`

但是你必须使用另一个对象而不是你`TestClass`的视图，这里是`mainWindow`.

您也可以使用 Swing[中的 JScrollPane：JScrollPane 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)

# asp.net - 输入正确格式时如何使正则表达式验证器的错误消息消失

> ID：11101124
> 
> 赞同：0
> 
> 时间：2012-06-19T12:40:11.023
> 
> 标签：asp.net, regex

我有一个文本输入字段，其正则表达式验证为 HH:MM ，验证工作正常，如果有人插入有缺陷的格式，它会显示错误消息，

但是一旦用户更正了他的输入，我需要这个错误消息消失，这是我在 asp.net 中的验证器

```
 <asp:TextBox ID="st_timef" runat="server"/>
  <asp:RegularExpressionValidator ID="stRegularExpressionValidator" runat="server" ErrorMessage="HH:MM!"
   ValidationExpression="/(?:[01]?\d|2[0-3]):(?:[0-5]\d)$/" ControlToValidate="st_timef" ValidationGroup="validaiton" /> 
```

# java - Java Web 服务对象 (JAX-WS) 生命周期

> ID：11101126
> 
> 赞同：2
> 
> 时间：2012-06-19T12:40:18.607
> 
> 标签：java, jax-ws

我目前正在开发一个公开 Web 服务接口的 Java Web 应用程序。我的网络服务的类定义如下：

```
@WebService()
public class ETL_WS {
    private String TOMCAT_TEMP_DIR;
    private final int BUFFER_SIZE = 10000000;
    private ConcurrentHashMap myMap;
    private String dbTable = "user_preferences";

    public ETL_WS() {
        Context context = null;
        try {
            context = (Context) new InitialContext().lookup("java:comp/env");
            this.TOMCAT_TEMP_DIR = (String) context.lookup("FILE_UPLOAD_TEMP_DIR");
        }catch(NamingException e) {
        System.err.println(e.getMessage());
    }

    public long getCouponMapCreationTime() {
        return couponMap.getCreationTime();
    }

} 
```

由于我需要所有请求来查看相同的 ConcurrentHashMap myMap 实例，我想知道 Web 服务对象的生命周期是多少。具体来说，我知道它是在第一个客户端请求时初始化的。但是，所有客户端都会看到myMap 对象的**同一个实例吗？**如果不是，这怎么可能？

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:58:05.193

简短的回答：不，您无法控制应用程序服务器将创建多少个此类的实例。唯一可以确定的是，在第一个请求之前至少会实例化一个对象。通常，应用服务器为每个工作线程创建一个实例，这意味着同一类的数十个对象。

但是，这些实例之间可能有共同的数据，最简单的解决方案是使用`static`成员变量。静态成员保证在每个对象中都是唯一的，因为它们属于类。

```
@WebService()
public class ETL_WS {
    // ...
    private static ConcurrentHashMap myMap;
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:55:22.707

我能想到的一种方法是在 Webservice 后面的单例中维护它，这样 WS 生命周期并不重要（它是一个单例 - 但 WS 接口的目的是简单地获取请求，它将其背后的应用程序的核心逻辑封装在一个服务中会更好）。

# c# - 我将如何构建 LINQ 查询？

> ID：11101128
> 
> 赞同：1
> 
> 时间：2012-06-19T12:40:21.010
> 
> 标签：c#, linq-to-entities

我有一个项目表，其中有一个类型列。这里的值可以是 1、2、3 或 0。用户有一个预定义的值，但 0 充当全局值 - 所有用户都会返回这些项目。

主要需要注意的是，一个项目可能是 3，但也有 0 记录，这意味着 3 获得一个记录，1 和 2 获得 0 记录。

我的问题是我如何编写查询以使 3s 也不会获得 0 记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:44:12.490

为了让您的查询简单，您可以获取两条记录，按类型排序，降序，然后只取第一个：

*   如果只有第 3 类记录，则返回，
*   如果只有类型 0 的记录，则返回，
*   如果同时存在类型 3 和类型 0 记录，则返回类型 3 记录，因为它会在结果集中首先出现。

# php - 上传：HTTP 错误

> ID：11101133
> 
> 赞同：1
> 
> 时间：2012-06-19T12:40:31.837
> 
> 标签：php, jquery, ajax, uploadify

我知道之前已经回答了这个问题，但是其他帖子上的解决方案对我不起作用。尝试上传时，我在 uploadify 框中收到 HTTP 错误 (404)。

这是我的uploadify相关代码：head:

```
<link rel="stylesheet" type="text/css" href="js/uploadify/uploadify.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/uploadify/jquery.uploadify-3.1.min.js"></script> 
```

身体：

```
<input type="file" name="file_upload" id="file_upload" /> 
```

文件准备就绪：

```
$('#file_upload').uploadify({
                    'swf'      : 'js/uploadify/uploadify.swf',
                    'uploader' : 'js/uploadify/uploadify.php' ,
                    'cancelImg' : 'js/uploadify/cancel.png',
                    'multi'      : false,
                    'buttonText' : 'Add main picture'
                }); 
```

上传.php：

```
<?php
/*
Uploadify
Copyright (c) 2012 Reactive Apps, Ronnie Garcia
Released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/

// Define a destination
$targetFolder = 'C:/xampp/htdocs/site/sites_images/'; // Relative to the root

if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $targetFolder;
    $targetFile = $targetFolder . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);
        echo '1';
    } else {
        echo 'Invalid file type.';
    }
} 
```

我错过了什么？

# android - twitter登录网页后找不到错误

> ID：11101134
> 
> 赞同：1
> 
> 时间：2012-06-19T12:40:33.217
> 
> 标签：android, android-layout

我正在尝试 twitter 示例。http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application 我从这个链接中获得了示例。我正在获取 twitter 登录页面但是身份验证后，它应该被重定向到某个 url。我在那个 web 视图中使用 web 视图，我给出了 url，但它显示网页不可用。在preparerequest令牌活动中，我给了这样的

context.startActivity(new Intent(context,FaceexActivity.class));

```
public class FaceexActivity extends Activity {
WebView browser;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

    browser=(WebView)findViewById(R.id.webkit);
    browser.getSettings().setDomStorageEnabled(true);
    browser.loadUrl("https://www.google.co.in/");
}
} 
```

登录后，当它要面对exactivity时，它不显示该网页并且显示网页不可用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:14:26.217

```
I am getting twitter login page but after authentication it should  be redirected 
to some url. 
```

您应该在成功验证后**重定向到您的应用程序**，以便使用**应用程序中的回调 URL 字段**，提供一些虚拟链接 - **http://www.dummy.com**，同时确保您在**清单文件**中添加了意图操作并使用相同在您的活动中回调 url。

[Android-10 网站](http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application)中清楚地解释了其余的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:21:26.580

您可能会发现[这个答案](https://stackoverflow.com/questions/11013689/twitter-api-returns-invalid-callback-cannot-authorize/11013812#11013812)很有帮助，它解释了如何让回调重定向工作。

# asp.net - 如何指示 ObjectDataSource 将表单参数与方法参数匹配

> ID：11101144
> 
> 赞同：0
> 
> 时间：2012-06-19T12:40:55.503
> 
> 标签：asp.net, .net, objectdatasource

使用**ObjectDataSource**时，我有以下选择：

```
<asp:DropDownList runat="server" SelectedValue='<%# Bind("InceptionCycle.ID") %>' ID="InceptionCycle" 
     DataSourceID="odsAllCycles" DataTextField="CycleName" DataValueField="ID" AppendDataBoundItems="true">
     <asp:ListItem Text="Choose..." Value=""></asp:ListItem>
</asp:DropDownList> 
```

和**ObjectDataSource**配置了**UpdateMethod**和**InsertMethod**。但是插入/更新方法的参数带有**InceptionCycle**名称（因为**InceptionCycle.ID**不是有效的标识符）。

有没有办法指示 ObjectDataSource 采用**InceptionCycle.ID**形式参数并作为**InceptionCycle**方法参数放置？

这是完整的 ObjectDataSource 代码：

```
<asp:ObjectDataSource ID="ods" runat="server" TypeName="Sources.DomainSource"
    SelectMethod="FindById" InsertMethod="Add" UpdateMethod="Update"
    OnInserted="ods_Inserted" OnUpdated="ods_Updated">
    <SelectParameters>
        <asp:QueryStringParameter Name="id" QueryStringField="id" />
    </SelectParameters>
    <InsertParameters>
        <asp:Parameter ConvertEmptyStringToNull="true" Name="ShortTitle" />
        <asp:Parameter ConvertEmptyStringToNull="true" Name="WMRId" />
        <asp:Parameter ConvertEmptyStringToNull="true" Name="MDSId" />
        <asp:Parameter ConvertEmptyStringToNull="true" Name="Status" />
    </InsertParameters>
    <UpdateParameters>
        <asp:QueryStringParameter Name="id" QueryStringField="id" />
        <asp:Parameter ConvertEmptyStringToNull="true" Name="ShortTitle" />
        <asp:Parameter ConvertEmptyStringToNull="true" Name="WMRId" />
        <asp:Parameter ConvertEmptyStringToNull="true" Name="MDSId" />
        <asp:Parameter ConvertEmptyStringToNull="true" Name="Status" />
    </UpdateParameters>
</asp:ObjectDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:47:06.113

您只能将 Bind 语法与顶级属性一起使用 - 它不支持嵌套属性（不过 VS 2012 会支持）。

因此，您应该在数据源上创建一个新属性，如下所示，并将 SelectedValue 绑定到这个新属性

```
 public string InceptionCycleID
 {
      get
      {
           return InceptionCycle.ID;
      }
      set
      {
           InceptionCycle.ID = value;
      }
 } 
```

# python - 将 Tweepy API 添加到 PythonPath 的正确目录

> ID：11101145
> 
> 赞同：1
> 
> 时间：2012-06-19T12:40:59.537
> 
> 标签：python, eclipse, pydev, tweepy

安装 iMac 10.7.4、Eclipse Indigo、Pydev、Python 2.7

我正在尝试安装 Tweepy API，但对于任何初学者程序员来说，文档都有点稀疏。我以为我已经安装了它，因为我已经将必要的文件下载到了我的应用程序文件夹并输入了“python setup.py install”

但是我现在才了解 Pythonpath 和正确的使用方式`import`

谁能告诉我应该在哪里找到 Tweepy 文件夹，以便我可以将它添加到 PythonPath

我的 Python“系统库”都位于我认为是标准目录配置中

/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/

编辑：PythonPath 打印输出

```
['/Users/me/Documents/workspace/Tweeter/src',

 '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
 '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tweepy-1.7.1-py2.7.egg',

'/Users/me/Documents/workspace/Tweeter/src', '
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tweepy-1.7.1-py2.7.egg', 

'/Applications/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/pydev_sitecustomize', 

'/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages', '/Library/Python/2.7/site-packages', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tweepy-1.7.1-py2.7.egg', '/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:06:21.743

您可以将其放在 PYTHONPATH 中的文件夹中。

要知道您的 PYTHONPATH 中有哪些文件夹，您可以运行此 python 代码

```
import sys
print sys.path 
```

此外，有时您还可以在当前工作目录中添加包。

或者把它放在任何地方（可能你必须添加名为 __init__.py 的空文件）然后在使用前执行此操作，

```
import sys
sys.path.append('/absolute/path/to/your/tweepyparentdir') 
```

# android - android中的侦听器与处理程序

> ID：11101146
> 
> 赞同：9
> 
> 时间：2012-06-19T12:41:05.320
> 
> 标签：android, listener, handler, event-listener

侦听器和处理程序有什么区别？

我搜索了很多，但找不到合适的解释。我在哪里使用监听器，在哪里使用 Android 中的处理程序？

我也浏览了以下链接：

[事件处理程序、事件侦听器和事件注册都指的是同一个东西吗？](https://stackoverflow.com/questions/5080204/are-event-handler-event-listener-and-event-registration-all-referring-to-the-s)

我在哪里可以得到这两个项目的比较讨论？另外，谁能告诉我有哪些不同类型的监听器和处理程序可用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T19:26:46.393

基本区别在于，事件处理程序让*发起对象本身*做某事以响应事件，而事件侦听器让*其他对象*做某事以响应源自对象的事件。

例如：您的活动有一个按钮。如果您希望在有人触摸按钮时处理您的*活动*，您可以使用事件侦听器（通过执行 btn.setOnTouchListener(...)）。但是，如果您想创建一个专门的按钮（例如，一个看起来像狗并在被触摸时会吠叫的按钮），您可以创建 Button 的子类并实现其事件处理程序 onTouchEvent(...)。在后一种情况下，按钮本身将处理其触摸事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T12:47:45.800

许多 ActionScript 类具有称为事件的功能。当某个事件发生时，对象会引发一个事件。例如，当有人将鼠标悬停在 SWF 中的按钮符号上时，会针对该特定 Button 实例引发 Button.onRollOver 事件。当鼠标移动到别处时，会为同一个实例引发 Button.onRollOut 事件。无论是否有人注意到，这些事件都会发生。如果您想实际做某事以响应事件，则必须使用事件处理程序或事件侦听器对其进行管理。这两者之间的选择是由对象决定的——一些对象需要处理程序，一些侦听器——所以如果有疑问，请点击 ol' ActionScript Language Reference。处理程序相对容易，但出于某种原因，听众一开始似乎让人们感到困惑。

## 事件处理程序

最流行的事件可能属于 Button 和 MovieClip 类，它们碰巧共享许多相同的事件（影片剪辑可以是按钮，但反过来不行）。要处理 Button.onRelease 事件，您所要做的就是将一个按钮元件拖到舞台上，并通过属性检查器给它一个实例名称。在框架脚本中使用此名称为事件分配功能。

```
myButton.onRelease = function() {
  // do something
} 
```

其他 Button 事件的工作方式相同，MovieClip 事件和所有需要事件处理程序的事件也是如此。

可以处理任意数量的事件。只需根据需要为每个事件分配一个功能。例如，响应翻转、释放和推出的按钮可能如下所示……</p>

```
myButton.onRollOver = function() {
  // do something
}
myButton.onRelease = function() {
  // do something
}
myButton.onRollOut = function() {
  // do something
} 
```

* * *

## 事件监听器

管理事件侦听器需要更多步骤。一个监听器是用一个通用的 Object 实例来完成的。该对象充当至少两个其他对象之间的联络人：引发事件的对象和侦听事件的任何对象。让我们看一个 MovieClipLoader 示例。

```
var mcl:MovieClipLoader = new MovieClipLoader(); 
```

此时，我们已经声明了一个变量 mcl，它指向 MovieClipLoader 的一个实例。现在我们将声明另一个变量 mclListener，它指向 Object 的一个实例。（听起来很有趣，我知道，但我们正在创建一个 Object 对象。）

```
var mclListener:Object = new Object(); 
```

这个通用对象现在将成为我们的联络人。此时，代码看起来与事件处理程序方法非常相似。

```
mclListener.onLoadInit = function() {
  // do something
} 
```

我可以从 MovieClipLoader 类中选择任何事件，这真的没关系。这里要注意的是，一个通用对象代表操作类实例处理事件。使用事件处理程序，操作类实例处理它自己的事件。

现在我们有了我们的监听器，并且一个函数已经代表我们的 MovieClipLoader 实例分配给它的一个事件，我们只需要将监听器订阅到 mcl。

```
mcl.addListener(mclListener); 
```

完毕。让我们一起来看看：

```
var mcl:MovieClipLoader = new MovieClipLoader();
var mclListener:Object = new Object();
mclListener.onLoadInit = function() {
  // do something
}
mcl.addListener(mclListener); 
```

要侦听多个事件，只需遵循事件处理程序方法即可。

```
var mcl:MovieClipLoader = new MovieClipLoader();
var mclListener:Object = new Object();
mclListener.onLoadStart = function() {
  // do something
}
mclListener.onLoadProgress = function() {
  // do something
}
mclListener.onLoadInit = function() {
  // do something
}
mcl.addListener(mclListener); 
```

参考：[http ://www.quip.net/blog/2006/flash/event-handlers-listeners](http://www.quip.net/blog/2006/flash/event-handlers-listeners)

你也可以检查这个[雅虎答案](http://answers.yahoo.com/question/index?qid=20071208072721AA9EF3f)

# security - 当我使用参数化查询时，是否需要保护我的 ASP 站点免受 SQL 注入？

> ID：11101147
> 
> 赞同：1
> 
> 时间：2012-06-19T12:41:05.580
> 
> 标签：security, asp-classic, sql-injection

我收到要求更正一个 ASP 网站，该网站具有许多防止 SQL 注入的功能。

本网站不允许我们的一位客户在本网站上注册。

在客户的名字上有“SELECT”这个词。并且防止 SQL 注入的功能正在将“SELECT”一词替换为“”。客户肯定不喜欢收到一封没有姓名的信。哈哈

该网站正在使用旧的经典 ASP 方式来访问数据，例如：

```
strSQL = "SELECT name " & _
   "FROM MyTable " & _
             "WHERE (ID=" & itemID & ") AND (CompanyID=" & companyID & ") AND (MenuTitle LIKE '%" & titleText & "%') "
recordset.Open strSQL 
```

所以他们需要使用这些函数来防止 SQL 注入。

我想改变它，我将开始使用参数化查询。

所以，我的问题是：如果我使用参数化查询，我可以安全地删除这些函数以防止来自该站点的 SQL 注入吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:25:45.827

在网络服务器和数据库之间的层中，使用参数化查询*是*一种针对 SQL 注入的保护，但前提是*每条*用户数据都以这种方式使用。

但是，您仍然可以从数据库层内部遇到 SQL 注入问题，因此请确保您不要调用任何本身通过字符串插值构建查询的存储过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:56:24.590

我不会仅仅依靠参数化查询作为防止 sql 注入和其他类型的黑客攻击的唯一形式。建议使用内部或第三方维护级别的安全软件/代码，以防止 sql 注入、跨站点脚本、软件安全漏洞等。

[您可以考虑用URLScan 3.1](http://www.iis.net/download/UrlScan)替换它们的多个功能，以快速有效地保护您的应用程序免受 IIS 级别的 sql 注入尝试，**以及**通过您的应用程序正确清理您/其他人已经提出的 sql 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:44:14.693

简短的回答是肯定的。

长答案是肯定的，但你仍然想清理你的输入。不一定是像“SELECT”这样的词，而是非字母数字字符或任何可疑的东西（基于用例）。参数化查询是安全性的重要组成部分，但它不是灵丹妙药。

# .net - Entity Framework 5 Enums with Description 属性使用 Database First

> ID：11101148
> 
> 赞同：4
> 
> 时间：2012-06-19T12:41:21.137
> 
> 标签：.net, asp.net-mvc, entity-framework

我想要这样的事情：

```
public enum States
{
    California,
    [Description("New Mexico")]
    NewMexico,
    [Description("New York")]
    NewYork,
    [Description("South Carolina")]
    SouthCarolina,
    Tennessee,
    Washington
} 
```

因此，当我使用 .NET MVC 创建下拉列表时，我可以在名称中使用空格。如果我使用 Code First，那么我可以这样做，但我使用的是 Database First，并且 .edmx 设计器不允许生成状态的属性（据我所知！）。关于如何做到这一点的任何想法？我正在使用 .NET 4.5 和 EF 5 beta。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:17:14.343

如果您使用`DbContext`基于 T4 的模板，则只能对枚举使用外部类型。从 EntityObject 派生或直接使用 ObjectContext 的实体不支持它。

*   [Microsoft Connect 问题](http://connect.microsoft.com/visualstudio/feedback/details/739409/adding-enum)（关闭为“按设计”）
*   [博文](http://blog.3d-logic.com/2012/09/11/using-exisiting-enum-types-in-entity-framework-5/)

# asterisk - 如何调用上下文并返回星号中的主上下文？

> ID：11101151
> 
> 赞同：5
> 
> 时间：2012-06-19T12:41:25.973
> 
> 标签：asterisk

这是我的星号拨号计划：

```
[main-context]
exten => s,1,Gosub(subcontext,s,1)
exten => s,n,NoOp(End Main)

[subcontext]
exten => s,1,NoOp(Start subcontext)
exten => s,1,NoOp(End subcontext) 
```

问题是当子上下文完成时，执行不会返回到主上下文并且 exten => s,n,NoOp(End Main) 不会执行。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T15:51:36.407

正如 Karadous 在上面发布的：GoSub 例程必须有一个匹配的 Return() 应用程序调用。

```
[main-context]
exten => s,1,Gosub(subcontext,s,1)
same => n,NoOp(End Main)

[subcontext]
exten => s,1,NoOp(Start subcontext)
same => n,NoOp(End subcontext)
same => n,Return() 
```

# java - 无法加载 JDBC 驱动程序类“net.sourceforge.jtds.jdbc.Driver”

> ID：11101153
> 
> 赞同：5
> 
> 时间：2012-06-19T12:41:30.620
> 
> 标签：java, hibernate, sql-server-2005, jtds

我对 jtds 有一些问题。

我在 Linux Red Hat Server 上使用 Hibernate、Tomcat 5.5、在 WIndows Server 上使用 SQL Server 2005

我将库保存到 Web-iNF/lib 中，我使用的是 jtds-1.2.2 版本

我收到错误消息

> 16:56:17,561 错误 JDBCExceptionReporter:78 - 无法加载 JDBC 驱动程序类“net.sourceforge.jtds.jdbc.Driver”

有人可以解释我做错了什么吗？

这里是连接定义。

```
<Resource name="pr/jdbc/dsConn" auth="Container" type="javax.sql.DataSource" maxActive="100" maxIdle="30" maxWait="10000" username="example" password="test1234" driverClassName="net.sourceforge.jtds.jdbc.Driver" url="jdbc:jtds:sqlserver://localhost:1433/example" /> 
```

有人可以帮我解决这个问题吗？

此致

# php - 从两个mysql表中选择数据

> ID：11101154
> 
> 赞同：0
> 
> 时间：2012-06-19T12:41:38.147
> 
> 标签：php, mysql, database

我有两个数据库表，第一个是`TABLE_GLOBAL_PRODUCTS`存储所有产品信息的地方。

```
store_id, product_id, product_name, product_description, product_price 
```

第二张表是`TABLE_STORES`存储所有商店信息的地方。

```
store_id, store_name, store_country, store_tags, store_description 
```

我有一个搜索表单，用户可以在其中搜索商店在所选国家/地区的产品。可以说，我想搜索仅在美国有商店的棉衬衫。

现在，在 mysql 查询中，我如何选择`product_id, product_name, product_description, product_price`在`TABLE_GLOBAL_PRODUCTS`哪里

`store_id`(in TABLE_GLOBAL_PRODUCTS) is the `store_id`(in TABLE_STORES) is selected `store_country`。我希望我解释得更清楚。

如何完成它或有没有办法更好地完成它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:47:59.213

这可以通过加入两个表来完成试试这个

```
SELECT p.*
FROM TABLE_GLOBAL_PRODUCTS p
INNER JOIN TABLE_STORES s ON s.store_id = p.store_id
WHERE s.store_country = 1 
```

假设 1 是所选国家

# html - 阻止在 Firefox 中不显示

> ID：11101156
> 
> 赞同：1
> 
> 时间：2012-06-19T12:41:46.207
> 
> 标签：html, css, firefox

用 IE 或 Chrome 看看这个，注意黄色块：http: [//vansschoenenonline.com/portfolio/vans-era-goldcoast-ginger-bread/](http://vansschoenenonline.com/portfolio/vans-era-goldcoast-ginger-bread/)

现在在 Firefox 中打开相同的页面，神奇的事情发生了......该块消失了。

有谁知道这是什么原因？我做错什么了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T12:46:39.607

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:50:09.280

只需`position:relative`从`.single-portfolio .entry-content`类中删除并在您的 div 样式`left: 0; top: 314px;`中添加这些属性，以保留“Goedkoopste shop：”文本
，它可能会对您有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:50:27.390

原因在 style.css 中：

```
.single-portfolio .entry-content .entry-meta { 
    left: 0; 
    width: 220px;
}

.gecko.single-portfolio .entry-content .entry-meta { left: -240px; } 
```

在`left:xxx`您的`div.entry-meta`. Firefox 应用最后一个，与 Chrome 和 IE 不同（他们可能认为第一个`.gecko.single-portfolio`导致整个规则无效）。

如果你使用 Firefox 开发者工具，你会发现这句话`left: -240px;`被应用了。如果取消选中它，则您的块在其他浏览器中可见。

如果删除此行：

```
.gecko.single-portfolio .entry-content .entry-meta { left: -240px; } 
```

（或者让它不应用在这个块上）它会好的

# vb.net - VB.NET 如何最小化一个窗口到任务栏？

> ID：11101157
> 
> 赞同：7
> 
> 时间：2012-06-19T12:41:48.310
> 
> 标签：vb.net, winforms, minimize

如何将窗口最小化到任务栏？
我在用着：

```
FormBorderStyle = Windows.Forms.FormBorderStyle.None 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-19T12:42:59.807

1：

```
Me.WindowState = FormWindowState.Minimized 
```

;)

# php - How to work with initialize.php?

> ID：11101158
> 
> 赞同：0
> 
> 时间：2012-06-19T12:41:58.497
> 
> 标签：php

I want to learn and work with **initialize.php** so I try to build simple php file like **index.php** and just to see if it call to **hello.php** I got some truble on my local host using windows xp.

the details are:

**http://127.0.0.1/www/oop/shape2/index.php** the file **index.php**

```
<?php
    defined('DS') ? null : define('DS', '/');
    defined('SITE_ROOT') ? null :defined('SITE_ROOT', $_SERVER['DOCUMENT_ROOT']);
    defined('LIB_PATH') ? null : define('LIB_PATH', SITE_ROOT.DS.'includes');

    echo (LIB_PATH.DS.'hello.php');
    require_once(LIB_PATH.DS.'hello.php');
?> 
```

**the output is:**

```
SITE_ROOT/includes/hello.php 
```

**http://127.0.0.1/www/oop/shape2/includes/hello.php** the file **hello.php**

```
<?php
 echo ('hi');
 ?> 
```

if i run it I got `hi`

here is my local folder on windows: **C:\Program Files\Zend\Apache2\htdocs\www\oop\shape2**

what shell I do slove the problem. Thx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:49:33.690

On the second line, you should change

`defined('SITE_ROOT') ? null :defined('SITE_ROOT', $_SERVER['DOCUMENT_ROOT']);`

to

`defined('SITE_ROOT') ? null :define('SITE_ROOT', $_SERVER['DOCUMENT_ROOT']);`

You were calling the `defined` function rather than the `define` function, meaning you never actually created the SITE_ROOT constant.

# objective-c - 正则表达式 - URL 参数中的匹配组

> ID：11101159
> 
> 赞同：0
> 
> 时间：2012-06-19T12:42:05.083
> 
> 标签：objective-c, ios, regex, regex-group

我需要从此字符串中提取值：

```
urlTest?paramA=valueA&paramB=valueB 
```

所以，我想到了这样的事情：

```
urlTest?paramA=(.*)&paramB=(.*) 
```

但是，在某些情况下我没有 paramB，或者在某些情况下我在 params 值中有 '&' 和 '='。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:54:07.450

```
// Chop off the question mark and everything before
$str = preg_replace('~^[^?]*+\?~', '', $str);
$groups = parse_str($str); 
```

[http://php.net/parse_str](http://php.net/parse_str)

# php - 为我的数据库mysql中的每一行调用一个php脚本

> ID：11101160
> 
> 赞同：2
> 
> 时间：2012-06-19T12:42:12.803
> 
> 标签：php, mysql

如果这是一个愚蠢的问题，我很抱歉，但我现在不知道如何为表中的每一行调用 php 脚本。我正在使用mysql。（我以后会用PDO，我知道会更好）。这是我的“选择”页面（我在其中选择我想要的行）：

```
<?php
include "util.php";
conn();
$SQL = "SELECT * FROM profiles where name='beatrice'"; //it's just an example
$result = mysql_query($SQL);

    while ($db_field = mysql_fetch_assoc($result)) {
                        $id= $db_field['id'] ;
                        $nome= strtolower($db_field['name']);
                        $cognome= strtolower($db_field['surname']);
                        $filenome= strtolower($db_field['filename']);
                        $cf= $db_field['cf'];
                        $dir1 = mb_substr($cf, 0, 8);
                        $dir=$id.$dir1;
                        mkdir('test/doc/'.$dir, 0777, TRUE);
                        mkdir('test/doc/'.$dir.'/foto', 0777, TRUE);
                        mkdir('test/doc/'.$dir.'/thumbnails', 0777, TRUE);
                        header('Location:renamer.php?dir='.$dir.'&nome='.$nome.'&filenome='.$filenome.'&id='.$id);
    }

    ?> 
```

标题位置不起作用，所以我正在寻找另一种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:54:07.797

您可以使用**CURL**调用。

或者只是调用一个函数来在循环中做你想做的事情。

因此，只需创建一个函数（从 renamer.php 中的功能），它将 URL 参数作为参数，然后就可以了！

如果您*真的*需要在后台执行此操作，请查看 - **[http://php.net/manual/en/function.pcntl-fork.php](http://php.net/manual/en/function.pcntl-fork.php)** - 如果您走这条路线，它将启动一个新的 PHP 进程来执行某些操作它会变得复杂，你的任务需要以某种方式报告，这样你就知道什么已经/还没有完成:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:57:15.733

如何使用 mysql_fetch_array() 获取数组中的结果，然后使用 array_walk() 为每一行执行一个函数？

[http://php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)

[http://ca.php.net/manual/en/function.array-walk.php](http://ca.php.net/manual/en/function.array-walk.php)

# .net - 如何使用 Reactive Extensions (Rx) 为慢速消费者排队 IObservable 主题，并支持取消

> ID：11101168
> 
> 赞同：0
> 
> 时间：2012-06-19T12:42:31.680
> 
> 标签：.net, system.reactive, reactive-programming

首先是一些背景知识，我编写了一个名为 Duplitiy（在 github.com 上）的开源 .NET 库，[它](https://github.com/slashdotdash/Duplicity/)使用`FileSystemWatcher`复制两个目录之间的所有文件更改。

我编写了一个[`FileSystemObservable`](https://github.com/slashdotdash/Duplicity/blob/master/src/Duplicity/FileSystemObservable.cs)实现的类`IObservable<FileSystemChange>`（它使用[FSWatcher](https://github.com/acken/FSWatcher)来包装实际的`FileSystemWatcher`）。当创建、修改或删除文件或目录时，这些更改将通过`Subject<FileSystemChange>`使用响应式扩展发布。

然后我使用以下订阅订阅这个 observable。

```
 return observable
          .Buffer(() => observable.Throttle(TimeSpan.FromSeconds(2)).Timeout(TimeSpan.FromMinutes(1)))     
          .PrioritizeFileSystemChanges()           
          .SelectMany(x => x); 
```

更改将被缓冲，直到至少有 2 秒的时间段没有任何更改，最长为 1 分钟。这是因为在删除目录时，`FileSystemWatcher`会通知所有包含的文件和目录。我们可以通过吞下目录中包含的更改来优化行为，并简单地删除订阅者中的父级。这由`PrioritizeFileSystemChanges`过滤器处理。它还允许我们忽略在缓冲区窗口中创建和随后删除的文件，再次减少目标上的 IO 操作。

这可行，尽管目前以一种幼稚的方式，不支持失败/重试。

但是我的问题是，这个 observable 的订阅者可能需要花费合理的时间来处理每个更改。例如，将大文件复制到慢速文件系统。当当前正在复制的同一文件发生新的文件系统更改时，我如何处理中止正在进行的操作。或者，如果文件包含在缓冲列表中但未完成，如何将其删除或排除？

我假设需要对原始 observable 进行另一个订阅，但不确定如何最好地共享状态或修改待处理的任务？必须按照接收到的顺序处理更改，这表示队列。但是，新的文件系统更改可能会应用于需要取消或删除的排队操作。队列不是为乱序删除而设计的。

例如，如果我们当前正在复制文件`Foo\Bar.txt`并且`Foo`目录已被删除。然后必须取消目录和所有子目录的任何正在进行或未决的更改。这可能是任务并行库的用例，还是我可以采取一些反应式方法？

也欢迎任何 github 拉取请求！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T04:46:00.887

您似乎在这里有几个目标/问题：

1.  *删除由于后来的更改而不再需要的早期更改。* 链表可能很适合这个。它为一般队列使用和良好的项目删除性能提供了良好的性能。
2.  *取消由于以后的更改而不再需要的正在进行的操作。*这还将包括需要重新启动的操作。这将要求您找到一个允许您取消正在进行的操作的库。System.IO 类不提供这样的取消，因此您需要找到一个库或滚动您自己的库。
3.  *这可能是任务并行库的用例，还是我可以采取一些反应式方法？* 你的措辞让我印象深刻，好像这里有一个或另一个选择，但你没有理由不能将两者混合在一起。您应该对文件更改进行观察是一个很好的起点（RX）。进行中的操作可能会被实现为采用 a`CancellationToken`并返回 a `Task`(TPL) 的方法。

这里缺少的步骤似乎是如何从更改“队列”到实际工作。基本上，订阅必须（快速）排队更改并启动（慢速，异步）方法，如果它尚未运行，则“递归”处理队列；就像是：

```
'changes is your returned observable
'toProcess is the "queue" of changes
'processor holds information about and the task of the in-progress operation
changes.Subscribe(Sub(c)
                     UpdateQueueWithChange(c, toProcess, processor)
                     If processor.Task.IsCompleted Then
                         ProcessNextChange(processor, toProcess)
                     End If
                  End Sub) 
```

`ProcessNextChange`是一个方法，它将获取队列中的下一个更改，开始操作，设置操作任务的回调以重新调用 ProcessNextChange。如果没有留下任何更改，则`processor`应该给出一个不重新调用 ProcessNextChange 的已完成任务。

`UpdateQueueWithChange`将需要更新“队列”并在必要时取消进行中的操作，这将触发`ProcessNextChange`由于任务完成而开始下一个操作的调用。

如果您想在取消对可观察的更改的订阅时取消操作，我建议将订阅一次性放入 a`CompositeDisposable`以及`SerialDisposable`将存储 a `CancellationDispoable`（由 更新`ProcessNextChange`并另外存储在`processor`）中，这`CancellationToken`是操作方法。ProcessNextChange 将检查 SerialDisposable 以查看它是否已在启动操作之前被释放。CompositeDisposable 将是您存储在某处以结束整个事情的东西。

```
CompositeDisposable 'this is what your application keeps around
|- IDisposable from subscription to changes observable
|- SerialDisposable
   |- .Disposable property = CancellationDisposable 
      'changed each time ProcessNextChange is called 
```

# build - 在 Mac OS X Lion 上构建 OsiriX

> ID：11101171
> 
> 赞同：0
> 
> 时间：2012-06-19T12:42:37.907
> 
> 标签：build, compilation, osx-lion, dicom

> ld 构建/开发/解压缩正常 i386 cd /Users/icthealth/Desktop/dcmtk/osirix/osirix setenv MACOSX_DEPLOYMENT_TARGET 10.7
> 
> > /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10。 7.sdk -L/Users/icthealth/Desktop/dcmtk/osirix/osirix/build/Development -LBinaries/LibTiff -L/Users/icthealth/Desktop/dcmtk/osirix/osirix/Binaries -L/Users/icthealth/Desktop/ dcmtk/osirix/osirix/Binaries/Ming "-L/Users/icthealth/Desktop/dcmtk/osirix/osirix/Binaries/KDU SDK" -L/Users/icthealth/Desktop/dcmtk/osirix/osirix/Binaries/CharLS -L /Users/icthealth/Desktop/dcmtk/osirix/osirix/Binaries/VTKLibs -F/Users/icthealth/Desktop/dcmtk/osirix/osirix/build/Development -F/Users/icthealth/Desktop/dcmtk/osirix/osirix -filelist /Users/icthealth/Desktop/dcmtk/osirix/osirix/build/OsiriX_Lion.build/Development/Decompress。build/Objects-normal/i386/Decompress.LinkFileList -mmacosx-version-min=10.7 -framework Foundation -framework AppKit -framework Foundation -framework Cocoa -framework QuickTime -framework IOKit -lz "-lDCM StaticLibrary" -framework Accelerate -framework QTKit -framework WebKit -lPapyrusToolkit -lfreetypeOsiriX -lgifOsiriX -lmingOsiriX -lpng12OsiriX -lkdu_v64R -framework Quartz -lCharLS -lvtkzlib -o /Users/icthealth/Desktop/dcmtk/osirix/osirix/build/Development/Decompress-framework Accelerate -framework QTKit -framework WebKit -lPapyrusToolkit -lfreetypeOsiriX -lgifOsiriX -lmingOsiriX -lpng12OsiriX -lkdu_v64R -framework Quartz -lCharLS -lvtkzlib -o /Users/icthealth/Desktop/dcmtk/osirix/osirix/build/Development/Decompress-framework Accelerate -framework QTKit -framework WebKit -lPapyrusToolkit -lfreetypeOsiriX -lgifOsiriX -lmingOsiriX -lpng12OsiriX -lkdu_v64R -framework Quartz -lCharLS -lvtkzlib -o /Users/icthealth/Desktop/dcmtk/osirix/osirix/build/Development/Decompress
> 
> 架构 i386 的未定义符号：“.objc_class_name_DCMPix”，引用自：Decompress.o 中的pointer-to-literal-objc-class-name（也许您的意思是：.objc_class_name_DCMPixelDataAttribute）“_PapyrusLockFunction”，引用自：libPapyrusToolkit.a 中的 _ExtractJPEG2000（ PapyRead3.o) _ExtractJPEGLS in libPapyrusToolkit.a(PapyRead3.o) _ExtractJPEGlossy16 in libPapyrusToolkit.a(PapyJpeg16.o) _ExtractJPEGlossy12 in libPapyrusToolkit.a(PapyJpeg12.o) _ExtractJPEGlossy8 in libPapyrusToolkit.a(PapyJpeg8.o) ld: symbol(s)未找到架构 i386 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

在为 Mac OS X Lion 10.7 创建开发方案后进行构建时，会生成上述构建错误。有什么线索可以在 Mac OS X Lion 10.7 上编译 OsiriX？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:40:26.037

尽管这个答案似乎没有定论，但我想提一下什么有效，什么无效。在此之前，我使用的是 Xcode 版本 4.3.2 和 Mac OS X Lion 10.7.4。我下载了 OsiriX 的源代码 zip 文件。

1.  首先选择“Unzip Binaries”和My Mac 32-bit 作为目标方案，然后构建并运行。（这个总是成功的）。

2.  选择“Osirix”和 My Mac 32-bit 作为下一个目标方案，在这个版本的 Xcode 中，它显示“验证项目设置”，因为似乎有必要将编译器从 llvmgcc42 更新为 Apple LLVM，并更改 Base SDK 从当前 10.6 版本到最新的 Mac OS X (10.7)。

When this change was performed, it threw up varieties of build errors, like the one on my original question, and Apple Mach-O linker error, CLang error, exited with code 1\. and so on.

The successful compilation of Osirix in my opinion depends on keeping the old compiler and not updating to latest project settings.

# javascript - 突出显示自动完成输入框中的第一个单词

> ID：11101173
> 
> 赞同：0
> 
> 时间：2012-06-19T12:42:44.660
> 
> 标签：javascript, jquery, autocomplete

我有一个应用程序，用户输入一个单词并出现一个自动完成。When the select the appropriate autocomplete, it's added to the `input`field and the user keeps typing. 我非常想在*输入框中*突出显示该单词（而不是在自动完成列表中），并且不突出显示框中的其余单词，但我找不到任何示例。

```
$(searchBoxId).autocomplete({
    source:      keys,
    delay:       0,
    selectFirst: true,
    select:      function(event, ui) {
        var TABKEY = 9;
        this.value = ui.item.value;

        if (event.keyCode == TABKEY) {
            event.preventDefault();
            this.value = this.value + " ";
            // XXX something goes here?
            this.focus();
        }

        return false;
    },
    autoFocus: true,
    minLength: 2
}); 
```

这是 jquery 1.8.20。通过“突出显示”，我的意思是“能够以类似于 Facebook 或 Google+ 突出显示用户名的方式使其在视觉上看起来与众不同”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:56:13.407

由于您已经在使用 jQuery，您可能希望使用[jQuery Tags 之](http://xoxco.com/projects/code/tagsinput/)类的东西。

它支持自动完成并执行您正在寻找的数据差异化。

基本概念是您将文本框`contenteditable`设置为带有标志的 div。监听`keypress`事件——特别是空格键和回车键。当它们被击中时，您获取最近输入的文本（尚未“标记”）并创建一个`<div>`并附加它。

或者只是使用插件...

# php - PHP oAuth 总是返回代码 400

> ID：11101176
> 
> 赞同：1
> 
> 时间：2012-06-19T12:42:55.203
> 
> 标签：php, oauth, oauth-2.0, twitter-oauth, tumblr

我正在连接到 Tumblr（它的过程与 twitter 几乎相同）。我一直到验证页面，验证应用程序，然后返回到 previos 页面，所有正确的东西都在查询字符串上，但我在 API 文档上得到一个 400 错误说这意味着“无效输入数据”。

这是我的代码：

```
 require("tumblr/tumblroauth/tumblroauth.php");
        // Enter your Consumer / Secret Key:
        $consumer   = $conf['Tumblr']['consumer'];
        $secret     = $conf['Tumblr']['secret'];
        /* Start session and load lib */
        if(!isset($_REQUEST['oauth_token']))
        {
            // Start the Session
            session_start();
            $connection = new TumblrOAuth($conf['Tumblr']['consumer'], $conf['Tumblr']['secret']);
                    // this url is correct
            $url = "http://" . $_SERVER['HTTP_HOST']  . $_SERVER['REQUEST_URI'];
            $temporary_credentials = $connection->getRequestToken($url);
            $redirect_url = $connection->getAuthorizeURL($temporary_credentials, FALSE);

            echo "going to".$redirect_url; // looks good
                    //have to use this as headers have started
            echo '<script>window.location.href="'.$redirect_url.'";</script>';
        }

        /* If the oauth_token is old redirect to the connect page. */
        if (isset($_REQUEST['oauth_token']) && $_SESSION['oauth_token'] !== $_REQUEST['oauth_token']) {
          $_SESSION['oauth_status'] = 'oldtoken';
          session_destroy();
        }
        if(isset($_REQUEST['oauth_token']))
        {/* Create TumblroAuth object with app key/secret and token key/secret from default phase */
            $connection = new TumblrOAuth($consumer, $secret, $_SESSION['oauth_token'], $_SESSION['oauth_token_secret']);

            /* Request access tokens from tumblr */
            $access_token = $connection->getAccessToken($_REQUEST['oauth_verifier']);

            /* Save the access tokens. Normally these would be saved in a database for future use. */
            $_SESSION['access_token'] = $access_token;

            /* Remove no longer needed request tokens */
            unset($_SESSION['oauth_token']);
            unset($_SESSION['oauth_token_secret']);

            /* If HTTP response is 200 continue otherwise send to connect page to retry */
            if (200 == $connection->http_code) {
              /* The user has been verified and the access tokens can be saved for future use */
              $_SESSION['status'] = 'verified';
              echo 'connection made heres the code:<br/>'.$connection->http_code;
            } else {
              /* Save HTTP status for error dialog on connnect page.*/

                     // THIS IS ALWAYS BEING OUTPUT AT THE END
             echo "oh no something is wrong code:<br/>".$connection->http_code;
            }
        } 
```

请有人看看我觉得我已经尝试了这个星球上的一切来让它工作.. ps使用：[https ://github.com/jacobbudin/tumblroauth](https://github.com/jacobbudin/tumblroauth)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:52:30.063

我认为你的问题在这里

```
 $redirect_url = $connection->getAuthorizeURL($temporary_credentials, FALSE); 
```

尝试

```
 $redirect_url = $connection->getAuthorizeURL($temporary_credentials); 
```

如果您仍然遇到问题，请告诉我们

# c# - 将js动态添加到asp.net文件

> ID：11101182
> 
> 赞同：3
> 
> 时间：2012-06-19T12:43:07.173
> 
> 标签：c#, javascript, asp.net

在我的 Page_Load 中，我从我的母版页中识别页面标题块，并将 XML 文件中的 javascript 添加到页面的该部分。

它似乎没有及时加载。如果我明确地将脚本引用放在页面上，它就可以工作。但不是当我通过 page_load 事件加载时。

应该早点加载吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T12:47:37.267

你没有添加任何代码，所以我无法告诉你你做错了什么。相反，我将告诉您一种从后面的代码中添加脚本引用的有效方法。

像这样的东西`Page_Load`应该可以解决问题

```
var js = new HtmlGenericControl("script");
js.Attributes["type"] = "text/javascript";
js.Attributes["src"] = "myFile.js";
Page.Header.Controls.Add(js); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:46:27.753

您不能在您的页面中输入以下方法，

```
protected void OnInit(EventArgs e) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:13:10.357

在这里使用它，我在根目录上有 js 文件夹，它对我来说很好用。

```
function addJavascript(jsname, pos) {
            var th = document.getElementsByTagName(pos)[0];
            var s = document.createElement('script');
            s.setAttribute('type', 'text/javascript');
            s.setAttribute('src', jsname);
            th.appendChild(s);

        }

 addJavascript('js/table.js', 'Head'); 
```

使用文件路径和要添加 javascript 文件的父标记调用 addJavascript 方法

希望对你有帮助..

# c# - 在 C# 中使用 Lucene 进行查询

> ID：11101183
> 
> 赞同：0
> 
> 时间：2012-06-19T12:43:10.247
> 
> 标签：c#, lucene.net

我是 Lucene 的新手。我有一些存储在数据库中的业务对象。当我检索它们时，我使用 Lucene.NET 对它们进行索引，如下所示：

```
List<MyEntity> myResults = GetResultsFromDb();
using (var indexService = new IndexService(indexWriter))
{
  indexService.IndexEntities(myResults, p =>
  {
    var document = new Document();
    document.Add(new Field("ID", p.ID.ToString(), Field.Store.NO, Field.Index.NOT_ANALYZED));
    document.Add(new Field("Name", p.Name, Field.Store.NO, Field.Index.NOT_ANALYZED));
    document.Add(new Field("Description", p.Description, Field.Store.YES, Field.Index.ANALYZED));
    document.Add(new Field("IsActive", p.IsActive.ToString(), Field.Store.NO, Field.Index.NOT_ANALYZED));
    return document;
  });
} 
```

我现在正在尝试搜索具有相似名称的业务对象。在尝试执行该搜索时，我正在使用以下内容：

```
 var indexSearcher = new DirectoryIndexSearcher(new   DirectoryInfo(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "Index")), true);
  using (var searchService = new SearchService(indexSearcher))
  {
    TermQuery termQuery = new TermQuery(new Term("Name", GetNameToSearchWith()));                    

    SearchResult<MyEntity> searchResults = searchService.SearchIndex<CourseSearchResult>(termQuery, new MyEntityDefinition());
    foreach (CourseSearchResult searchResult in searchResults.Results)
    {
      filteredResults.Results.Add(searchResult);
      if (filteredResults.Count() >= 25)
        break;
    }
  } 
```

当我执行查询时，我检索结果。问题是，唯一填充的值是“名称”字段。对于 MyEntity，ID 是一个 Guid，Description 是一个字符串，IsActive 是一个可为空的布尔值。当我执行查询时，ID 始终为空 Guid，IsActive 标志始终为 null，Description 始终为空字符串。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:41:46.223

实际上，您在文档中告诉 Lucene 不要将这些数据存储在文档中。对于要在搜索期间从文档中检索的所有字段，您应该将 Field.Store.NO 更改为 Field.Store.YES。

# c# - 正确处理 DomainOperationException

> ID：11101185
> 
> 赞同：4
> 
> 时间：2012-06-19T12:43:33.697
> 
> 标签：c#, silverlight, exception-handling, wcf-ria-services

在我的 Silverlight 应用程序中，我想正确处理不同的服务器错误。我创建了处理程序，[`DomainOperationException`](http://msdn.microsoft.com/en-us/library/system.servicemodel.domainservices.client.domainoperationexception%28v=vs.91%29.aspx)但我想获得有关问题根本原因的更具体信息，并为用户提供更清晰的消息。

*可能的方法：*

*   `OperationStatus`给了我一些优势，但大多数连接到服务器的错误仍然`OperationStatus.ServerError`是 DB 或 IIS 问题；
*   Exception 也有`ErrorCode`属性，但我不知道从哪里获取适合 RIA 的可能错误代码列表；

注意：即使没有`ErrorCode`自己设置，当服务器端出现数据库连接问题时，它的值也为 500。这就是为什么我希望 RIA 做所有肮脏的工作，我会避免做这些多余的工作。

* * *

*问题：*

1.  正确处理的最佳方法是什么 `DomainOperationException`？
2.  从哪里获取可能的错误代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T20:53:21.180

`ErrorCode`是用户定义的值。[MSDN](http://msdn.microsoft.com/en-us/library/system.servicemodel.domainservices.client.domainoperationexception.errorcode%28v=vs.91%29.aspx)声明它

> 获取或设置此异常的自定义错误代码。错误代码可以是任何用户定义的值。

可能有更优雅的解决方案，但我最终做的是创建一个[可移植类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)（但你也可以使用 .shared 类），我`enum`用我的错误代码定义了一个。我在服务器端和客户端项目中引用了该项目。

然后我覆盖了 DomainService 的`OnError`-method 并做了这样的事情：

```
 protected override void OnError(DomainServiceErrorInfo errorInfo)
 {
     if (errorInfo.Error is UnauthorizedAccessException)
     {
         errorInfo.Error = new DomainException("Denied access.",(int)MyErrorCodesEnum.Permission_Unauthorized, errorInfo.Error);
     }
 } 
```

（看着这段代码，我想创建一种异常类型和枚举器值的关联列表，这样我就可以放弃了，`if`但你明白了）

在客户端我做：

```
switch ((MyErrorCodesEnum)(s.Error as DomainException).ErrorCode)
{
    case MyErrorCodesEnum.Permission_Unauthorized:
        //do something
        s.MarkErrorAsHandled();
        break;
} 
```

# android - 从手机中获取铃声配置文件

> ID：11101188
> 
> 赞同：1
> 
> 时间：2012-06-19T12:43:40.480
> 
> 标签：android

是否可以从手机中获取所有铃声并将其显示到 android 中的微调器中？是否可以通过内容提供商？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:06:23.513

如果您只需要让用户从系统中选择铃声的能力：

另一个答案需要大量代码和工作才能开始。`RingtoneManager.ACTION_RINGTONE_PICKER`相反，使用意图更容易。这将启动一个带有微调器的对话框，其中包含所有铃声并要求用户选择一个。示例代码：

```
public static final int REQUESTCODE_PICKRINGTONE = 1;

public void launchPickRingtoneIntent() {
    Intent intent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
    intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TITLE, "Select Tone");
    startActivityForResult(intent, REQUESTCODE_PICKRINGTONE);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQUESTCODE_PICKRINGTONE && resultCode == RESULT_OK) {
        Uri uri = data
                  .getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI);

        if (uri != null) {
            // uri contains the URI of the selected ringtone
        } else {
            // user picked "silent" as the ringtone
        }
    }
} 
```

可以使用一些[选项](http://developer.android.com/reference/android/media/RingtoneManager.html#ACTION_RINGTONE_PICKER)自定义此意图，例如您可以隐藏静音选项等。此处的代码示例使用自定义标题。其他选项的使用方式类似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T12:50:05.287

请参阅此示例[Using SimpleCursorAdapter to Display Ringtones from RingtoneManager in Android Using ListView Templates](http://learn-it-stuff.blogspot.in/2011/12/using-simplecursoradapter-to-display.html) for getting all the existing ringtones using [RingtoneManager](http://developer.android.com/reference/android/media/RingtoneManager.html)。

# python - Amazon DynamoDB -- 特定于区域的连接

> ID：11101195
> 
> 赞同：3
> 
> 时间：2012-06-19T12:44:02.680
> 
> 标签：python, amazon-web-services, amazon-dynamodb, boto

我正在使用`boto`Python 中的库连接到 DynamoDB。以下代码一直对我有用：

```
import boto
key = 'abc'

secret = '123'
con = boto.connect_dynamodb(key,secret)
table = con.get_table('Table Name')
-- rest of code -- 
```

当我尝试连接到特定区域时，我可以正常连接，但是让表正常工作会引发错误：

```
import boto
from boto.ec2.connection import EC2Connection

key = 'abc'
secret = '123'
regions = EC2Connection(key,secret).get_all_regions() # some filtering after this line to remove unwanted entries
for r in regions:
  con = boto.connect_dynamodb(key,secret,region=r)
  table = con.get_table('Table Name') # throws the error below
  -- rest of code -- 
```

使用上面的第二个代码块，我得到一个`ValueError: No JSON object could be decoded`. 调用`con.list_tables()`显示了我在第一个代码块中查找的表，但是当我在第二个代码块中尝试它时会引发相同的错误。谁能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T14:06:35.107

在玩了之后，我发现以这种方式更改代码以进行连接是可行的：

```
import boto
from boto.ec2.connection import EC2Connection
from boto.dynamodb import connect_to_region

key = 'abc'
secret = '123'
regions = EC2Connection(key,secret).get_all_regions()
for r in regions:
  con = connect_to_region(aws_access_key_id=key,aws_secret_access_key=secret,region_name=r.name)
  table = con.get_table('Table Name') # no problem
  -- rest of code -- 
```

# git - git github 无法推送到原点

> ID：11101203
> 
> 赞同：10
> 
> 时间：2012-06-19T12:44:24.383
> 
> 标签：git, github, push

我可能遗漏了一些东西，但我确信我已经检查了所有内容，我分叉了一个 repo 并将其克隆到我的系统上，提交后做了一些更改`git push origin master`

它说

```
fatal: remote error: 
  You can't push to git://github.com/my_username/my_repo.git
  Use git@github.com:my_username/my_repo.git 
```

我错过了什么吗？然后我尝试了 `git remote add origin https://github.com/my_username/my_repo.git`

它回来了

致命：远程来源已经存在。

我不明白为什么会这样，请帮忙

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-19T13:32:11.300

网址与

```
git://github.com/my_username/my_repo.git 
```

git:// 也只提供只读访问权限，如侧面所述..

![在此处输入图像描述](../Images/9606c524f0e150d5cd8dfd33605b5333.png)

然而，

```
git@github.com:my_username/my_repo.git 
```

提供站点中提到的读写访问权限

![在此处输入图像描述](../Images/075e37aa1c56b3ef5db08018a40374f0.png)

虽然，`https://github.com/my_username/my_repo.git`也具有读写访问权限，但它不适用于您的情况，因为您尝试创建一个具有相同名称的新遥控器而不是重置它。提到的正确语法是

`git remote set-url origin git@github.com:my_username/my_repo.git`

和

```
git remote set-url origin https://github.com/my_username/my_repo.git 
```

也可以。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T12:45:22.090

`git remote set-url origin git@github.com:my_username/my_repo.git`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:22:09.153

这不起作用的原因是，您选择用于克隆的 git:// 协议仅配置为在 Github 上进行读取访问（因为它仅支持无访问限制的匿名写入访问）。
Github 支持 ssh (git@github.com...) 和 https 对存储库的写访问。

您的第二个命令失败，因为当您克隆时，git 已经创建了一个名为 origin 的远程。因此，如果要添加另一个远程存储库，则必须提供另一个名称。

# javascript - 来自文本字段的 JavaScript 文本没有获得价值

> ID：11101208
> 
> 赞同：0
> 
> 时间：2012-06-19T12:44:40.857
> 
> 标签：javascript, html, textfield

```
<input id="checkOldPassword" type="button" title="Check New Password" value="Check New Password" onclick="checkPassword()" />
<input id="newPassword" type="text" maxlength="8" min="8" />

<script language="javascript">
function checkPassword()
{
  var validString = /^[a-z](?=[a-z]*[0-9])[a-z0-9]{0,6}[a-z]$/;
  alert("this worked");
  var password = document.getElementById(newPassword).value;
  alert(password);
  var test = re.test(password);
}
</script> 
```

弹出窗口显示“这有效”正确显示，所以我知道代码正在执行，但 alert(password) 没有弹出键入的密码。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:46:18.480

改变...

```
var password = document.getElementById(newPassword).value; 
```

到（注意元素 id 上的引号）...

```
var password = document.getElementById("newPassword").value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:46:13.990

使用引号：

```
document.getElementById('newPassword').value 
```

没有引号你有：

```
document.getElementById(undefined) 
```

因为您没有`newPassword`定义任何变量。

# mysql - 在 MySQL 中使用 LEFT JOIN 组合两个表

> ID：11101210
> 
> 赞同：0
> 
> 时间：2012-06-19T12:44:47.093
> 
> 标签：mysql

我有两张桌子

**表格1**

```
+-------+-------+
| NAME  | PRICE |
+-------+-------+
| ITEM1 |  100  |
+-------+-------+
| ITEM2 |  200  |
+-------+-------+
| ITEM3 |  300  |
+-------+-------+ 
```

**table2**重复 ITEM1 和 ITEM2

```
 +-------+--------+---------+
    | NAME  | SUFFIX | CODE    |
    +-------+--------+---------+
    | ITEM1 | 1      | ITEM1_1 |
    +-------+--------+---------+
    | ITEM1 | 2      | ITEM1_2 |
    +-------+--------+---------+
    | ITEM2 | 1      | ITEM2_1 |
    +-------+--------+---------+ 
```

我怎样才能用 mySQL 做这个结果？

```
+-------+-------+----------+
| NAME  | PRICE |   NAME2  |
+-------+-------+----------+
| ITEM1 |  100  |  ITEM1   |
+-------+-------+----------+
| ITEM2 |  200  |  ITEM2   |
+-------+-------+----------+
| ITEM3 |  300  |  NULL    |
+-------+-------+----------+ 
```

我想从 table1 中获取*不在*table2 中的元素。在这种情况下，我想要获取的元素是 ITEM3。我可以用 LEFT JOIN 做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:48:02.120

```
select * from table1 t1
left outer join table2 t2 on t1.name = t2.name
where t2.name is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:48:03.863

```
Select * from table1 s Left join table2 as t on s.NAME=t.NAME where t.NAME IS NULL 
```

# haskell - 如何删除样板代码

> ID：11101213
> 
> 赞同：1
> 
> 时间：2012-06-19T12:45:00.353
> 
> 标签：haskell

我想减少以下样板代码，但不使用镜头（Data.Label）。我怎样才能最好地做到这一点？

```
data Qcfg = Qcfg { qthresh :: Int, tdelay :: Rational, cwpsq :: TPSQ, cwmap :: TMap, cwchan :: TChan String }

getQthresh = do
   c <- ask
   return (qthresh c)

getDelay = do
   c <- ask
   return (tdelay c)

getTMap = do
   c <- ask
   return (cwmap c)

getTPsq = do
   c <- ask
   return (cwpsq c)

getTChan = do
    c <- ask
    return (cwchan c) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T13:43:29.163

这些只是 fmap 的例子。这些都是等价的：

```
getQthresh = qthresh <$> ask

getQthresh'' = fmap qthresh ask

getQthresh''' = liftM qthresh ask

getQthresh' = do
   c <- ask
   return (qthresh c) 
```

`Data.Functor`/`Control.Applicative`版本`<$>`是您想要的版本；如果您考虑一下，它根本没有样板。而且您确实在为每个访问器浪费空间编写函数；你只是*一种新的方式来应用*`fmap/<$>`给你的访问器。如果你永远在写作`<$> ask`，你可以定义

```
 get field = field <$> ask 
```

也许这就是我现在想的你正在寻找的东西。然后

```
get qthresh 
```

将与您的相同

```
getQthresh 
```

对于其他领域也是如此。当然，你可以`get`用你的一元方式定义这个（注意 State 使用不同的）：

```
get field = do
   c <- ask
   return (field c) 
```

对于`Reader`there is `asks f`which is`fmap f ask`和`gets`for的具体情况`State`，但我认为这个问题是关于将访问器“提升”到 functor 或 monad 中，因为这似乎并不`do {x <- action; return (f x)}`简单`f <$> action`

# iphone - Xcode 应用程序委托给每个视图控制器

> ID：11101215
> 
> 赞同：2
> 
> 时间：2012-06-19T12:45:13.903
> 
> 标签：iphone, xcode, delegates

我一直在研究 Xcode 教程，无法解决这个问题。教程在[这里](http://www.theappcodeblog.com/2011/06/30/iphone-development-tutorial-add-core-data-to-a-tab-bar-application-and-save-user-data/#comment-14942)

我得到的错误是：

> +entityForName：找不到实体名称“联系人”的 NSManagedObjectModel

在这一行（我已将目的地更改为联系方式）：

```
Contact *contact = (Contact *)[NSEntityDescription insertNewObjectForEntityForName:@"Contact" inManagedObjectContext:managedObjectContext]; 
```

我很确定问题是因为我没有完成第 11 点，因为我不确定如何使用 Xcode 4.3.2 和故事板来完成。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:07:11.440

您可以将上下文传递给下一个视图控制器，就像在斯蒂芬斯的回答中一样。但是，您还必须记住通过添加将上下文属性添加到新视图控制器

```
@property(nonatomic,retain) NSManagedObjectContext *context; 
```

到你的头文件和

```
@synthesize context; 
```

到你的实现文件。

您可以执行以下操作来检查是否获得上下文：

在您的 viewdidload 中：

```
if (context == nil) 
{ 
    context = [(YOURAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
} 
```

如果这没有帮助。尝试重置您的模拟器，因为当您使用 Coredata 时，它似乎会出现很多错误。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:39:53.217

假设实体存在，您似乎更有可能从第 10 点中遗漏以下内容：

```
enterDataViewController.managedObjectContext = self.managedObjectContext; 
```

在应用程序委托中未正确设置该或您的 managedObjectContext 。

# c# - DLL 中的 HOOK C# 方法

> ID：11101223
> 
> 赞同：4
> 
> 时间：2012-06-19T12:45:43.333
> 
> 标签：c#, hook

我有`SUM()`从 DLL 调用函数的 C# 应用程序。

我想`SUM()`在 DLL 中挂钩该函数并通过将我的 DLL 注入 C# 应用程序的进程来操作指令。

请回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:21:05.373

请参阅此[http://www.codeproject.com/Articles/463508/Net-CLR-Injection-Modify-IL-Codes-on-Run-time](http://www.codeproject.com/Articles/463508/Net-CLR-Injection-Modify-IL-Codes-on-Run-time)

您可以通过在运行时修改 IL 代码来做到这一点

# asp.net - TreeView 控件呈现为 ，导致不需要的换行符

> ID：11101230
> 
> 赞同：1
> 
> 时间：2012-06-19T12:46:06.177
> 
> 标签：asp.net, html, css, treeview

我正在尝试创建这样的布局：

![在此处输入图像描述](../Images/17687c7d8b67298a1e233d9584b8a979.png)

在左侧，我想添加一个 ASP.NET`TreeView`控件。不幸的是，它似乎呈现为 div，因此会导致换行。我不认为我可以使用`display:inline`，因为这似乎不起作用：

```
 <asp:TreeView ID="TreeView1" runat="server" style="display:inline;"
            onselectednodechanged="TreeView1_SelectedNodeChanged" 
            ontreenodepopulate="TreeView1_TreeNodePopulate" 
            ontreenodeexpanded="TreeView1_TreeNodeExpanded">
            <SelectedNodeStyle Font-Bold="True" Font-Underline="True" />
    </asp:TreeView> 
```

我的标记如下：

```
<div id="mainDiv">
    <div id="filters">

    </div>
    <div id="dMiddle">
    <span id="sTreeView">
     <asp:TreeView ID="TreeView1" runat="server" style="display:inline;"
            onselectednodechanged="TreeView1_SelectedNodeChanged" 
            ontreenodepopulate="TreeView1_TreeNodePopulate" 
            ontreenodeexpanded="TreeView1_TreeNodeExpanded">
            <SelectedNodeStyle Font-Bold="True" Font-Underline="True" />
    </asp:TreeView>
    </span>
    <span id="sGrid">eventually a grid...</span>
    </div>
</div> 
```

问题是`TreeView`导致换行符而不是停留在其跨度（或 div 或我放置的任何位置）。

有没有办法解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:17:27.547

我只会使用三个`<div>`s （而不是`<span>`你现在拥有的 s ）。像这样：

```
<div id="mainDiv">
    <div id="filters">
        Some other stuff goes up here
    </div>
    <div id="dMiddle">
        <asp:TreeView ID="TreeView1" runat="server"
                onselectednodechanged="TreeView1_SelectedNodeChanged" 
                ontreenodepopulate="TreeView1_TreeNodePopulate" 
                ontreenodeexpanded="TreeView1_TreeNodeExpanded">
                <SelectedNodeStyle Font-Bold="True" Font-Underline="True" />
        </asp:TreeView>
    </div>
    <div id="sGrid">
        Eventually a Grid goes here
    </div>
</div> 
```

那么你只需要在你的 s 上添加一点 CSS `<div>`：

```
#sGrid, #dMiddle { display:inline-block; }
#dMiddle { float:left; } 
```

那里的第一行确保您的 dMiddle 和 sGrid`<div>`一起保持在同一行（没有强制换行）。

第二行是可选的，只是将`TreeView`'s浮动`<div>`到左侧（似乎将两个 inline `<divs>`s 很好地对齐）。

# jquery - jQuery TagIt（自动完成）通过 AJAX 获取 JSON 列表

> ID：11101231
> 
> 赞同：15
> 
> 时间：2012-06-19T12:46:07.703
> 
> 标签：jquery, json, autocomplete

这是一个基于以下问题的问题：[Trying to get tag-it to work with an AJAX call](https://stackoverflow.com/questions/6938802/trying-to-get-tag-it-to-work-with-an-ajax-call)

然而，上面只是为我创建了一条错误消息“this.source is not a function”。

我试图通过 ajax 让这个 json 列表显示为 tagit 的标记源。下面的代码：

```
// Tagit
$("#tags").tagit({      
    tagSource: function() {
        $.ajax({
            url: "/admin/ajax.php?q=fetch_all_tags",
            dataType: "json",
            success: function(data) {
                console.log(data);
                return data;
            }
        });
    }       
}); 
```

ajax 调用返回：

```
{"4":"php","2":"html","3":"css"} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-13T05:42:34.297

查看[此代码](http://jsfiddle.net/MHVas/15/)可能会对您有所帮助

```
$("#mytags").tagit({
    autocomplete: {
        source: function( request, response ) {
            /*call api*/
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T16:52:39.440

如果您想使用自定义自动完成源，比如 Ajax / XHR 响应，应该覆盖 autocomplete.source。

例如：

```
$("#myTags").tagit({
    autocomplete: {
       delay: 0,
       minLength: 2,
       source : 'your data response'
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T16:00:31.310

您可能应该对成功处理程序使用类似的东西：

```
success: function (categoriesList) {
    response($.map(categoriesList, function (category) {
        return {
            label: category.Name + " (ID: " + category.ID + ")",
            value: category.Name
        };
    }));
} 
```

我正在显示具有 ID 和 Name 属性的类别对象。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-09T16:47:12.047

我认为您可以从 jquery UI 覆盖自动完成方法：

```
<!-- language: lang-js -->

$('.tags ul').tagit({

    itemName: 'question',
    fieldName: 'tags',
    removeConfirmation: true,
    //availableTags: ["c++", "java", "php", "javascript", "ruby", "python", "c"]
    allowSpaces: true,
    // tagSource: ['foo', 'bar']
    tagSource: function () {
        $.ajax({
            url: "/autocomplete_tags.json",
            dataType: "json",
            data: {
                term: 'ruby'
            },
            success: function (data) {
                console.log(data);
                return data;
            }

        });
    },
    autocomplete: {
        delay: 0,
        minLength: 2,
        source: this.tagSource()
    }
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-19T13:08:03.660

这个错误是由我使用旧版本的标记引起的。如果您遇到相同的错误，请确保您使用的是最新版本的 tagit

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-23T14:37:49.777

如果您像我一样是新手并且不理解上述解决方案，这里有一个完整的代码

```
 $("#mySingleFieldTags").tagit({
      autocomplete: {
        source: function( request, response ) {
          console.log(request);
          $.ajax({
                url: "/autocomplete",
                dataType: "json",
                data: {
                  'search':request.term
                },
                success: function (data) {
                    response($.map(data, function (category) {
                      return {
                          label: category.name,

                      };
                  }));
                }
            });
          }
      }
    }); 
```

# android - 通过 gps 获取当前位置（纬度和经度）

> ID：11101237
> 
> 赞同：0
> 
> 时间：2012-06-19T12:46:21.073
> 
> 标签：android, gps, location

我是android的新手。我通过模拟器运行应用程序。但总是错误.logcat显示：无法打开堆栈跟踪文件'/data/anr/traces.txt'：权限被拒绝

> WhereAmIActivity.Java

```
package com.paad.whereami;

import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.widget.TextView;

public class WhereAmIActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LocationManager locationManager;
    String context = Context.LOCATION_SERVICE;
    locationManager = (LocationManager)getSystemService(context);//bulid locationmanager

    String provider = LocationManager.KEY_LOCATION_CHANGED;
    Location location = locationManager.getLastKnownLocation(provider);//get lastlocation

    updateWithNewLocation(location);//pass to updatewithnewlocation
}

private void updateWithNewLocation(Location location){//show Location in TextView
    String latLongString;
    TextView myLocationText;
    myLocationText = (TextView)findViewById(R.id.myLocationText);//
    if(location!=null){//
        double lat = location.getLatitude();
        double lng = location.getLongitude();
        latLongString = "Lat:"+lat+"\nLong:"+lng;
    }else{//
        latLongString = "No location found";
    }
    myLocationText.setText("Your Current POsition is:\n"+latLongString);//
} 
```

}

> 使用许可

```
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/> 
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:21:24.380

这不是您获取当前位置的方式。它只是最后一个已知的位置。为了获得当前位置，您需要请求操作系统告诉您何时获得新位置（因为它需要未知时间，基于很多事情）并且您可能在，然后使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:52:53.410

> 无法打开堆栈跟踪文件“/data/anr/traces.txt”：权限被拒绝

我不知道您要在哪里访问 traces.txt 文件。但是如果它显示权限错误，以便解决它，请给予它完全访问权限:)

在终端中执行以下命令

```
$adb shell
#cd \data
#chmod 777 anr 
```

请记住，如果您在实际设备上尝试，上述命令可能不起作用。您需要 root。

# jquery - 使用 jquery 添加 HTML

> ID：11101241
> 
> 赞同：0
> 
> 时间：2012-06-19T12:46:27.797
> 
> 标签：jquery

我有一个菜单：

```
<ul id="test-ul">
<li>test</li>
<li>test2</li>
</ul> 
```

如何在第一个 li 之前和最后一个 li 之后添加以下 HTML 标记：

```
 <li class="first">
      <img src="http://i48.tinypic.com/sosmck.jpg" width="27" height="15"  />
    </li>

<li class="last">
      <img src="http://i48.tinypic.com/sosmck.jpg" width="27" height="15"  />
    </li> 
```

使用jQuery？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:50:24.537

这不是添加标签`div`的有效语法。`ul`但是要理解通过 Jquery 添加 html 的概念，请看这里

```
var str = '<div class="first"><img src="http://i48.tinypic.com/sosmck.jpg" width="27" height="15"  /></div><div class="last"><img src="http://i48.tinypic.com/sosmck.jpg" width="27" height="15"  /></div>';

$("#test-ul").append(str).prepend(str);​​​​​​​​ 
```

[您可以在此处](http://jsfiddle.net/mpqTp/)查看 Jsfiddle 示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T12:48:59.870

您不应该在 之前和之后添加这些元素`li`。除了`li`嵌套在 a中的任何元素`ul`都是无效的 HTML。

但是，您可以在 new 中添加内容`li`，这将是有效的。

```
​$(function(){
   var $li = $("<li></li>");
   $li.html("html code...");
   $("#test-ul").append($li);
   var $li2 = $("<li></li>");
   $li2.html("different html code..");
   $("#test-ul").prepend($li2); 
});​ 
```

[**查看示例**](http://jsfiddle.net/Curt/6yEgz/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T12:48:49.577

```
$("#test-ul").append("html here");    // after the last li

$("#test-ul").prepend("html here");   // before the first 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T12:51:36.327

如果您想为每个人创建一个新的 LI，这将起作用。请注意，如果添加更多 div 会导致问题。

```
$('div').each(function() {
    var newli = $(this).html().wrap('<li></li>');
    $('#test-ul').append(newli);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T12:53:18.420

```
var first = '<li<img src="/sosmck.jpg" width="27" height="15"  /></li>';
var last = '<li><img src="/sosmck.jpg" width="27" height="15"  /></li>';

var myItems = $("li");
myItems.prepend(first);
myItems.append(last); 
```

# linux - 在 linode 上设置开发服务器

> ID：11101246
> 
> 赞同：0
> 
> 时间：2012-06-19T12:46:51.527
> 
> 标签：linux, node.js, linode

我在运行 node.js/mongo 应用程序的 linode 上有一个 Ubuntu 服务器。我意识到我应该先设置一个开发服务器，但现在最好的方法是什么？我正计划克隆当前图像并将其安装在新的 linode 上。或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T05:10:20.557

您可以在 Linode.com 界面中从右侧克隆：

[http://blog.linode.com/2007/11/16/clone-a-linode-to-another-linode/](http://blog.linode.com/2007/11/16/clone-a-linode-to-another-linode/)

当您登录时，在“Linodes”下应该有一个“克隆”选项卡 - 您可以在此处指定要克隆的配置和/或图像。然后，您可以在以下屏幕上选择目标 linode。

# java - 如何在 Apache Commons VFS 中监控文件传输的进度？

> ID：11101267
> 
> 赞同：1
> 
> 时间：2012-06-19T12:47:53.990
> 
> 标签：java, apache-commons, vfs, apache-commons-vfs

使用[Apache Commons VFS](http://commons.apache.org/vfs/)，我如何监控文件传输的进度。我需要能够通过上传和下载来做到这一点。我还需要监控 HTTP、FTP、SFTP 和 FTPS 的进度。我在文档中找不到任何关于它的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:10:37.183

它可以通过从 VFS 获取输入和输出流来完成。以下示例使用来自 commons-net（VFS 的依赖项）的实用程序类来管理复制和进度监控。您同样可以手动完成。

```
import org.apache.commons.net.io.Util;
import org.apache.commons.net.io.CopyStreamListener;

private void copy(FileObject sourceFile, FileObject destinationFile, CopyStreamListener progressMonitor) throws IOException {
    InputStream sourceFileIn = sourceFile.getContent().getInputStream();
    try {
        OutputStream destinationFileOut = destinationFile.getContent().getOutputStream();
        try {
            Util.copyStream(sourceFileIn, destinationFileOut, Util.DEFAULT_COPY_BUFFER_SIZE, sourceFile.getContent().getSize(), progressMonitor);
        } finally {
            destinationFileOut.close();
        }
    } finally {
        sourceFileIn.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-22T19:30:39.273

提议的解决方案有点偏离，而且有点“弱”。让我们尝试一个更整洁的！
*注意：以下代码需要 JDK 16。*

给定一个使用标准启动的示例复制操作：

```
final var manager = VFS.getManager();
final var origin = manager.resolveFile(originUri.toString(), fileSystemOptions);
final var destination = manager.resolveFile(destinationUri.toString(), fileSystemOptions);
destination.copyFrom(origin, Selectors.SELECT_ALL); 
```

`FileObject`只需使用我们可以调用的自定义委托实现来包装目的地`ProgressFileObject`，它也将接受`ProgressListener`：

```
final var listener = new ProgressListener() {
  @Override
  public void started() {
    System.out.println("Started");
  }

  @Override
  public void completed() {
    System.out.println("Completed");
  }

  @Override
  public void failed(@NotNull final Exception e) {
    System.out.println("Failed: " + e.getMessage());
  }

  @Override
  public void progress(@NotNull final ProgressEvent event) {
    final var out = "%d\t\t\t%d\t\t\tFile: %s".formatted(
        event.totalBytes(),
        event.totalTransferredBytes(),
        event.lastFileDestinationPath()
    );

    System.out.println(out);
  }
};

final var progressDestination = new ProgressFileObject(destination, listener);
progressFileObject.copyFrom(origin, Selectors.SELECT_ALL); 
```

这将导致一个文件夹：

```
Started
4648320         119391          File: /test_dir/AN/ANI0.evt
4648320         119511          File: /test_dir/AN/ANI0.hpj
4648320         119584          File: /test_dir/AN/ANI0.ipf
4648320         119585          File: /test_dir/AN/ANI0.ipm
4648320         1907060         File: /test_dir/AN/ANI0.LST
4648320         1907253         File: /test_dir/AN/ANI0.MRG
4648320         2472700         File: /test_dir/AN/ANI0.ODF
4648320         2472707         File: /test_dir/AN/ANI0.ph
4648320         2473421         File: /test_dir/AN/ANI0.rbj
4648320         2473547         File: /test_dir/AN/ANI0.rc
4648320         2473708         File: /test_dir/AN/ANI0.rst
4648320         2474813         File: /test_dir/AN/ANI0.rtf
4648320         2474814         File: /test_dir/AN/ANI0.txc
4648320         2474819         File: /test_dir/AN/ANI0.txm
4648320         2474820         File: /test_dir/AN/ANI0.vpf
4648320         2829348         File: /test_dir/AN/ANI0.VPG
4648320         2829466         File: /test_dir/AN/P0000001.rc
4648320         2829592         File: /test_dir/AN/P0000002.rc
4648320         4648275         File: /test_dir/AN/VPGSAV55.C2T
4648320         4648320         File: /test_dir/AN/VRPGWIN.RC
Completed 
```

以下是`ProgressFileObject`、`ProgressListener`和`ProgressEvent`来源：

```
/**
 * @author Edoardo Luppi
 */
public class ProgressFileObject extends DecoratedFileObject {
  private final FileObject fileObject;
  private final ProgressListener listener;

  public ProgressFileObject(
      @NotNull final FileObject fileObject,
      @NotNull final ProgressListener listener) {
    super(fileObject);
    this.fileObject = fileObject;
    this.listener = listener;
  }

  @Override
  public void copyFrom(final FileObject file, final FileSelector selector) throws FileSystemException {
    if (!FileObjectUtils.exists(file)) {
      final var exception = new FileSystemException("vfs.provider/copy-missing-file.error", file);
      listener.failed(exception);
      throw exception;
    }

    listener.started();

    // Locate the files to copy across
    final List<FileObject> files = new ArrayList<>();
    file.findFiles(selector, false, files);

    // Calculate the total bytes that will be copied
    var totalBytes = 0L;

    for (final var srcFile : files) {
      if (srcFile.getType().hasContent()) {
        totalBytes += srcFile.getContent().getSize();
      }
    }

    var totalTransferredBytes = 0L;

    // Copy everything across
    for (final var srcFile : files) {
      // Determine the destination file
      final var relPath = file.getName().getRelativeName(srcFile.getName());
      final var destFile = resolveFile(relPath, NameScope.DESCENDENT_OR_SELF);

      // Clean up the destination file, if necessary
      if (FileObjectUtils.exists(destFile) && destFile.getType() != srcFile.getType()) {
        // The destination file exists, and is not of the same type, so delete it
        destFile.deleteAll();
      }

      // Copy across
      try {
        if (srcFile.getType().hasContent()) {
          try (final var content = srcFile.getContent()) {
            final var fileTransferredBytes = content.write(destFile);
            totalTransferredBytes += fileTransferredBytes;
            final var event = new ProgressEvent(
                totalBytes,
                totalTransferredBytes,
                fileTransferredBytes,
                srcFile.getName().getPath(),
                destFile.getName().getPath()
            );

            listener.progress(event);
          }
        } else if (srcFile.getType().hasChildren()) {
          destFile.createFolder();
        }
      } catch (final IOException e) {
        final var exception = new FileSystemException("vfs.provider/copy-file.error", e, srcFile, destFile);
        listener.failed(exception);
        throw exception;
      }
    }

    listener.completed();
  }

  @Override
  public URI getURI() {
    return fileObject.getURI();
  }

  @Override
  public Path getPath() {
    return fileObject.getPath();
  }

  @Override
  public boolean isSymbolicLink() throws FileSystemException {
    return fileObject.isSymbolicLink();
  }

  @Override
  public void forEach(final Consumer<? super FileObject> action) {
    fileObject.forEach(action);
  }

  @Override
  public Spliterator<FileObject> spliterator() {
    return fileObject.spliterator();
  }

  @Override
  public int hashCode() {
    return fileObject.hashCode();
  }

  @Override
  public boolean equals(final Object obj) {
    return fileObject.equals(obj);
  }

  @Override
  public String toString() {
    return fileObject.toString();
  }

  public interface ProgressListener {
    void started();
    void completed();
    void failed(@NotNull final Exception e);
    void progress(@NotNull final ProgressEvent event);
  }

  public record ProgressEvent(
      long totalBytes,
      long totalTransferredBytes,
      long lastFileTransferredBytes,
      String lastFileOriginPath,
      String lastFileDestinationPath
  ) {}
} 
```

# php - Yii 没有显示错误总结

> ID：11101270
> 
> 赞同：2
> 
> 时间：2012-06-19T12:48:00.540
> 
> 标签：php, file-upload, yii, validation

在将电影保存到数据库之前，我的 Yii 代码未显示错误摘要。有什么问题？

表单代码：http: [//jsfiddle.net/SRMzc/](http://jsfiddle.net/SRMzc/)

**它是 actionCreate 函数：**

```
 public function actionCreateM()
    {
        $model=new Movie;

        if(isset($_POST['Movie']))
        {
            $model->attributes=$_POST['Movie'];

            $photos = CUploadedFile::getInstancesByName('photo');

            if (isset($_POST['Movie']['youtube_id'])){
                $model->youtube_id=$_POST['Movie']['youtube_id'];
            }

            if (isset($_POST['Movie']['poster_uri'])){
                $file=CUploadedFile::getInstance($model,'poster_uri');
                if(isset($file)){
                    $model->poster_uri = $model->short_title .'_poster.' . $file->extensionName;
                }
            }

            if($model->save())....... 
```

**规则：**

来自电影模特

```
public function rules()
{
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        array('title, short_title, year, imdb_rate, rate, cast, director, summary, release_date, duration, views, featured', 'required'),
        array('views, featured, available_status', 'numerical', 'integerOnly'=>true),
        array('title, short_title, genre, director', 'length', 'max'=>64),
        array('poster_uri', 'file', 'types'=>'jpg, gif, png', 'allowEmpty' => true),
        array('cast', 'length', 'max'=>256),
        array('year', 'length', 'max'=>4),
        array('lang', 'length', 'max'=>2),
        array('imdb_rate', 'length', 'max'=>3),
        array('rate', 'length', 'max'=>5),
        array('duration', 'length', 'max'=>11),
        // The following rule is used by search().
        // Please remove those attributes that should not be searched.
        array('title, short_title, views, featured, available_status', 'safe', 'on'=>'search'),
    );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:49:48.937

错误摘要适用于 ajax。您需要在表单定义中将 enableAjaxValidation 设置为 true。然后您需要跟踪该 ajax 调用并验证您的模型，然后回显错误（查看 Yii 博客演示应用程序中的创建操作以获取更多详细信息）。

如果您需要验证 PHP 中的代码，请尝试以下操作

```
if(!$model->save())
{
    print_r($model->getErrors());
} 
```

或者

```
if(!$model->validate())
{
    print_r($model->getErrors());
}
else 
{
    $model->save();
} 
```

验证代码是这样的

```
if(isset($_POST['ajax']) && $_POST['ajax']==='comment-form')
{
    echo CActiveForm::validate($comment);
    Yii::app()->end();
} 
```

编辑：- 你真的不需要启用 ajax 来获取验证摘要。你可以有相同的php代码，像这样。

```
if($model->validate())
{
    $model->save();
    //render some other view here
}
$this->render('Your_update_or_create_view'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:52:46.780

我认为在您使用时应该是**$model->errorSummary()**

```
<?php echo $form->errorSummary($model); ?> 
```

# php - strtok(null) 会导致任何错误吗？

> ID：11101271
> 
> 赞同：1
> 
> 时间：2012-06-19T12:48:01.587
> 
> 标签：php

用于读取用户操作请求并将其解析为组件的 PHP 脚本。例如，用户输入`SET Colour = Blue`或`describe Chocolate Cake = The best cake ever!`我正在使用这样的：

```
$actionKeyword = strtok( $actionRequest, " " ); // keyword followed by space
$name = strtok( "=" ); // Then name followed by equals
$description = strtok(null); // get the rest of the string 
```

在获取其余字符串时，我找不到任何东西。PHP.net 的示例是使用空格来标记每个单词，但我想不出任何字符可能不是描述的一部分。该解决方案适用于我的测试。

是否有副作用或特殊情况会失败？或者这是获得其余线路的一种完全安全且可接受的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:54:59.093

是的，您可以这样做 - 或者只是在`strtok("")`没有任何令牌的情况下打电话......

```
$actionKeyword = strtok( "describe Chocolate Cake = The best cake ever!", " " ); // keyword followed by space
$name = strtok( "=" ); // Then name followed by equals
$description = strtok(""); // get the rest of the string 
```

[这里的工作示例](http://codepad.org/NRh6ndaD)

注意：您需要修剪它，因为它包含前导空格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:20:45.603

它现在不应该导致任何错误，因为在解析其参数`null`时会转换为空字符串。`strtok`

`strtok('')`但是如果你明确地使用表单，你可能会更安全一些。它起作用的原因是`strtok`期望分隔符的字符串化列表作为标记参数。所以这里的空字符串基本上是一个空的分隔符列表。并且没有要查找的分隔符意味着要返回整个剩余的字符串。)

顺便说一句，此建议在手册页[的评论中给出。](http://www.php.net/manual/en/function.strtok.php#7817))

# facebook - Facebook request_ids 不显示在通知栏中

> ID：11101276
> 
> 赞同：0
> 
> 时间：2012-06-19T12:48:15.460
> 
> 标签：facebook, request, apprequests, facebook-app-requests

在我使用 apprequest 对话框创建请求后，它会出现在通知栏和 Facebook 主页的右侧。在右侧，指向应用程序的链接如下所示

```
http://apps.facebook.com/12354897899498/?fb_source=reminders&request_ids=224231197698079%2C298010856961088&ref=reminders 
```

但是当我从通知栏（左上角）点击它时，网址是这样的

```
http://apps.facebook.com/12354897899498/ 
```

所以没有`request_ids`交付。你知道为什么会这样吗？是虫子吗？

我知道我可以通过 Graph API 获取用户的所有请求，但我需要权限才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:52:02.147

您必须从用户那里获得基本权限才能对`request_ids`. 您必须对新用户进行身份验证才能监控他们的`request_ids`.

我不希望任何应用程序（我尚未授权）访问我的待处理请求。

# grails - 拦截 Grails 中的所有自定义类

> ID：11101280
> 
> 赞同：3
> 
> 时间：2012-06-19T12:48:35.863
> 
> 标签：grails, groovy, metaprogramming, aop

我想监视在 Grails 应用程序执行期间访问了我的哪些类。为此，我正在考虑将日志记录添加到所有自定义类的“方法调用之前”联合中，然后检查日志文件。在不修改现有类的情况下添加此类拦截逻辑的最巧妙方法是什么？

元编程/AOP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:58:45.747

使用 Spring AOP。

要拦截您想要的任何类的任何方法，请将其添加到 resources.groovy 中的 bean 声明中：

```
xmlns aop: "http://www.springframework.org/schema/aop" //[1]

aop {
    config {
        pointcut(id: "interceptorPointcut", expression: "execution(* my.basepkg..*(..))") //[2]
        advisor('pointcut-ref': "interceptorPointcut", 'advice-ref': "myInterceptor") //[3]
    }
}

myInterceptor(org.springframework.aop.interceptor.SimpleTraceInterceptor) { //[4]
   loggerName = "myTracer"
} 
```

[1] 为 Spring AOP 引入命名空间和模式以在 bean builder 中使用

[2] 方法签名模式。这将匹配 my.basepkg 或子包中任何类中的任何方法

[3] 绑定切入点和建议

[4] 通知 bean 声明以及将用于记录拦截器消息的重写 loggerName。添加到 Config.groovy 中，如下所示：

```
appenders {
    rollingFile maxBackupIndex: 5, maxFileSize: '100KB', name: 'fileTracer', file: 'methodtrace.log', layout: pattern(conversionPattern: "%m%n")
}
trace additivity: false, fileTracer: 'myTracer' 
```

SimpleInterceptor 是一个标准的 Spring 拦截器，它记录每个方法进入/退出/异常的消息。您可以使用它或 org.springframework.aop.interceptor 包中的另一个，或者编写自己的（只需扩展 AbstractTraceInterceptor，这很简单）。

# visual-studio-2010 - 创建自定义设计器

> ID：11101282
> 
> 赞同：2
> 
> 时间：2012-06-19T12:48:43.520
> 
> 标签：visual-studio-2010, vsx, visual-studio-sdk

我被要求为 Visual Studio 创建一个自定义设计器。在这个设计器中，程序员可以创建/编辑带有控件的表单并定位它们。

输入和结果将由外部系统使用和编译（Sesam 我被告知但从未听说过）

格式为 XML。

问题是，我从哪里开始，创建自定义设计器是否可行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T14:55:08.207

您可以创建自定义设计器，但如何进行取决于您的要求。如果幸运的话，您可以使用一个简单的扩展来处理编辑某些类型的文件，例如[Snippet 设计器。您可以](http://visualstudiogallery.msdn.microsoft.com/b08b0375-139e-41d7-af9b-faee50f68392)[在 codeplex 上](http://snippetdesigner.codeplex.com/)找到该扩展的代码。

如果你不走运，你可能最终不得不创建自己的项目系统。这不是一个容易实现的解决方案，因为它需要对 VS 有深入的了解。

[这是创建自定义文本编辑器的文档根目录](http://msdn.microsoft.com/en-us/library/bb166329.aspx)，也就是*简单路径*。

[这是 XML 团队的一篇很好的博客文章](http://blogs.msdn.com/b/xmlteam/archive/2010/05/02/visual-studio-editor-choosing-system.aspx)，详细介绍了他们如何控制在 XML 文件上使用的编辑器类型。了解他们如何实现这一点可以帮助您确定是否可以只使用自定义编辑器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:56:22.160

VSX (Visual Studio Extensibility) MSDN 论坛上的这个帖子也会对您有所帮助：[自定义表单设计器](http://social.msdn.microsoft.com/Forums/en/vsx/thread/76acaef1-af9f-4946-80a9-02dd32528d9b)

# swing - 将项目从 JList 复制到 JTable

> ID：11101284
> 
> 赞同：2
> 
> 时间：2012-06-19T12:48:46.817
> 
> 标签：swing, jtable, jframe, jbutton, jlist

我有一个带有 JList、一个 JTable 和两个 JButton 的简单 JFrame，如下所示

![在此处输入图像描述](../Images/cd45e22fd23e552ba1400f894deca10b.png)

我想使用“添加”按钮将列表中的选定项目复制到表中，并通过“删除”按钮删除表中的项目（添加时）。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:30:20.443

您需要将侦听器添加到从列表中获取所选项目并相应地修改表的按钮。以下是一些帮助您入门的代码：

```
 final JButton add = new JButton();
    final JButton remove = new JButton();
    final DefaultTableModel tableModel = new DefaultTableModel();
    final JTable table = new JTable(tableModel);
    final JList list = new JList();

    add.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            Object selectedPlanet = list.getSelectedValue();
            tableModel.addRow(new Object[] { selectedPlanet });
        }
    });
    remove.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            Object selectedPlanet = list.getSelectedValue();
            int columnContainingPlanets = 0;
            for (int index = columnContainingPlanets; index < tableModel.getRowCount(); index ++)
                if (tableModel.getValueAt(index, columnContainingPlanets).equals(selectedPlanet)) {
                    tableModel.removeRow(index);
                    break;
                }
        }
    }); 
```

# jquery - 如何编写一个接受回调的 jquery 函数

> ID：11101288
> 
> 赞同：1
> 
> 时间：2012-06-19T12:48:53.260
> 
> 标签：jquery

我编写了一个自定义 jquery 函数，该函数接受回调，但无法理解当动画函数执行结束时回调函数将如何在调用环境中执行。

这是我的自定义功能代码

```
jQuery.fn.busyToggle = function (flag, marginBottom, opacity, speed, easing, callback) {
        if (flag == 1) {
            return this.stop(true).animate({ marginBottom: marginBottom, opacity: opacity }, { queue: false, duration: speed });
        }
        else {
            return this.stop(true).animate({ marginBottom: marginBottom, opacity: opacity }, { queue: false, duration: speed });
        }
    }; 
```

这样我调用这个函数

```
$('#BusyBox').busyToggle(flag,0,1,500); 
```

我需要知道如何捕捉动画函数何时从调用环境结束。如果可能请详细讨论。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:58:00.647

一种方法是使用提供的回调函数`.animate()` 另一种方法是将其添加到链队列中，如：

```
jQuery.fn.busyToggle = function(flag, marginBottom, opacity, speed, easing, callback) {
    if (flag == 1) {
        return this.stop(true).animate({
            marginBottom: marginBottom,
            opacity: opacity
        }, {
            queue: false,
            duration: speed
        }).queue(callback);
    }
    else {
        return this.stop(true).animate({
            marginBottom: marginBottom,
            opacity: opacity
        }, {
            queue: false,
            duration: speed
        }).queue(callback);
    }
};​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:06:22.170

只需将您的回调添加到完整选项`animate`

```
jQuery.fn.busyToggle = function (flag, marginBottom, opacity, speed, easing, callback) {
    ...
    this.stop(true).animate({ marginBottom: marginBottom, opacity: opacity }, { queue: false, duration: speed, complete: callback });
};

$('#BusyBox').busyToggle(flag,0,1,500, function(){ 
    // do something on complete
}); 
```

# c# - 如何在 C# 中获取唯一/不同的打印机型号名称？

> ID：11101291
> 
> 赞同：2
> 
> 时间：2012-06-19T12:49:06.050
> 
> 标签：c#, .net, winapi, printer-properties

**我正在尝试做的事情：**

我正在创建计算机上安装的所有打印机的数据库。

使用`PrinterSetting.PrinterName`，`PrinterSettings.InstalledPrinters`我得到`PrinterName`.

我也尝试过winapi `Win32_Printer`，但这和我上面的代码有问题。

**问题**

问题是可以使用不同的名称安装单个打印机，例如 HP LasetJet 1020、HP LasetJet 1020（副本 1）、HP LasetJet 1020（副本 2）等。打印机名称是用户定义的，可以是任何名称。甚至可能一台打印机可以安装2个这样不同的名称，它们的名称之间没有相似之处。

这就是为什么我认为即使一台打印机以不同的名称安装，打印机型号名称也应该是唯一的。

**问题：**

如何提取该打印机模式名称？或者可能是 Win_32 中唯一的、用户不可编辑的且可用于识别打印机的任何其他属性。

或者

可能是注册表可以对此有所帮助。如果此模型信息在注册表中（很可能会在）在哪里可以找到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:22:12.790

打印机驱动程序名称和端口名称的组合构成特定打印机的唯一唯一标识符。如果两台打印机之间的驱动程序和端口名称匹配，那么这些打印机都代表相同的物理（或虚拟）硬件。没有其他属性可以可靠地识别它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:25:54.693

我会用 WMI 解决这个问题，看起来可能会有更多信息。

CodeProject 上有一个不错的演练，但我不能说我已经专门处理过这个问题，只是想我会向你指出那个方向。

[http://www.codeproject.com/Articles/80680/Managing-Printers-Programatically-using-C-and-WMI](http://www.codeproject.com/Articles/80680/Managing-Printers-Programatically-using-C-and-WMI)

# php - 分组方式和 MySQL 查询的位置

> ID：11101293
> 
> 赞同：2
> 
> 时间：2012-06-19T12:49:14.303
> 
> 标签：php, mysql, group-by, where-clause

我想知道是否有人可以帮助我。

我正在使用下面的查询从 MySQL 数据库中正确检索 Google 标记数据。

```
SELECT l.locationid, f.locationid, l.locationname, l.osgb36lat, l.osgb36lon, count(f.locationid) as totalfinds 
  FROM detectinglocations as l 
  LEFT JOIN finds AS f ON l.locationid=f.locationid 
  GROUP BY l.locationid 
```

我现在正试图通过添加一个`where`子句来添加它，更具体地说`where userid='$userid'`。

我已经尝试在查询中的不同位置添加这个额外的子句，我确信这可能只是一个初学者的错误，但我无法让查询工作。

我只是想知道是否有人可以看看这个并让我知道我哪里出错了。

谢谢和亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:50:51.273

尝试在 GROUP BY 之前添加 where 子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:58:10.613

在连接中，`WHERE`条件出现在`ON`语句之后

如果`userid`在表中有`detectinglocations`然后使用

```
SELECT l.locationid, f.locationid, l.locationname, l.osgb36lat, l.osgb36lon, count(f.locationid) as totalfinds 
FROM detectinglocations as l 
LEFT JOIN finds AS f ON l.locationid=f.locationid 
WHERE l.userid='$userid'
GROUP BY l.locationid 
```

如果`userid`在表中有`finds`然后使用

```
SELECT l.locationid, f.locationid, l.locationname, l.osgb36lat, l.osgb36lon, count(f.locationid) as totalfinds 
FROM detectinglocations as l 
LEFT JOIN finds AS f ON l.locationid=f.locationid 
WHERE f.userid='$userid'
GROUP BY l.locationid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T12:52:25.423

```
$query = "SELECT l.locationid, f.locationid, l.locationname, l.osgb36lat, l.osgb36lon, count(f.locationid) as totalfinds 
          FROM detectinglocations as l 
          LEFT JOIN finds as f on l.locationid=f.locationid 
          WHERE userid=".(int)$userid." 
          GROUP BY l.locationid"; 
```

我还在您的变量中添加了 (int) 以“清理”一个未知的（对我而言）变量

# java - 添加新元素后，带有自定义 CellRenderer 的 Swing JList 消失

> ID：11101296
> 
> 赞同：1
> 
> 时间：2012-06-19T12:49:16.220
> 
> 标签：java, swing, jlist

我正在使用自定义 CellRenderer 编写带有复选框的 JList，以及用于选择/取消选择、添加或删除列表元素的上下文菜单。

一切正常，我可以选择项目，打开上下文菜单并通过它删除/添加元素。我的问题是，当我添加一个元素并且列表中的元素比开始时更多时，列表消失并且我得到一个空白面板。例如，当在列表中添加一个新元素而之前没有删除一个元素时，就会发生这种情况。

为了查明问题，我一直试图将代码降到最低，但我仍然不明白为什么它不能正常工作。

我想知道的是为什么我的列表会变成空白，以及如何防止它这样做。

当然，欢迎任何旁白或建议:)

谢谢。

* * *

如果您想尝试一下，这是完整的代码（左键单击以选择项目，右键单击以打开上下文菜单）：

CheckBoxList.java

```
package misc;

import javax.swing.*;
import javax.swing.border.*;
import java.awt.*;
import java.awt.event.*;

public class CheckBoxList extends JList {

    private int selection = -1;

    protected static final Border noFocusBorder = new EmptyBorder(1, 1, 1, 1);

    public CheckBoxList(Model m) {
        this();
        this.setModel(m);
    }

    public CheckBoxList() {
        this.setCellRenderer(new CheckboxCellRenderer());
        this.addMouseListener(new MouseAdapter() {

            @Override
            public void mousePressed(MouseEvent e) {
                int index = locationToIndex(e.getPoint());
                selection = index;
                CheckBoxList cbl = (CheckBoxList) e.getSource();
                cbl.setSelectedIndex(index);
                if(index != -1) {
                    if(e.getButton() == MouseEvent.BUTTON1) {
                        Data v = (Data) getModel().getElementAt(index);
                        v.setSelected(!v.isSelected());
                        JCheckBox checkbox = new JCheckBox(v.getS(), v.isSelected());
                        checkbox.setSelected(!checkbox.isSelected());
                        repaint();
                    } else if(e.getButton() == MouseEvent.BUTTON3) {
                        ContextMenu pum = new ContextMenu(cbl);
                        pum.show(e.getComponent(), e.getX(), e.getY());
                    }
                }
            }
        });
        this.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    }

    protected class CheckboxCellRenderer implements ListCellRenderer {

        @Override
        public Component getListCellRendererComponent(JList list, Object value, int index,
                boolean isSelected, boolean cellHasFocus) {
            Data v = (Data) value;
            JCheckBox checkbox = new JCheckBox(v.getS(), v.isSelected());
            checkbox.setBackground(isSelected ? getSelectionBackground() : getBackground());
            checkbox.setBorderPainted(true);
            checkbox.setBorder(isSelected ? UIManager.getBorder("List.focusCellHighlightBorder")
                    : noFocusBorder);
            return checkbox;
        }
    }

    public int getSelection() {
        return this.selection;
    }

    public class ContextMenu extends JPopupMenu {

        private JMenuItem deleteItem;
        private JMenuItem addItem;
        private CheckBoxList cbl;

        public ContextMenu(CheckBoxList cbl) {
            this.cbl = cbl;
            this.deleteItem = new JMenuItem("Delete");
            this.deleteItem.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    JMenuItem jmi = (JMenuItem) e.getSource();
                    ContextMenu cm = (ContextMenu) jmi.getParent();
                    Model m = (Model) cm.cbl.getModel();
                    m.remove((Data) m.getElementAt(cm.cbl.getSelection()));
                    cm.cbl.repaint();
                }
            });
            this.add(deleteItem);

            this.addItem = new JMenuItem("Add new");
            this.addItem.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    JMenuItem jmi = (JMenuItem) e.getSource();
                    ContextMenu cm = (ContextMenu) jmi.getParent();
                    ((Model) cm.cbl.getModel()).add(new Data("Added :)"));
                    cm.cbl.repaint();
                }
            });
            this.add(addItem);
        }
    }
} 
```

模型.java

```
package misc;

import java.util.ArrayList;
import java.util.List;

import javax.swing.ListModel;
import javax.swing.event.ListDataListener;

public class Model implements ListModel {

    private List<Data> data = new ArrayList<Data>();

    @Override
    public void addListDataListener(ListDataListener l) {}

    @Override
    public Object getElementAt(int index) {
        return data.get(index);
    }

    @Override
    public int getSize() {
        return data.size();
    }

    @Override
    public void removeListDataListener(ListDataListener l) {}

    public void add(Data string) {
        this.data.add(string);
    }

    public void remove(Data d) {
        data.remove(d);
    }
} 
```

数据.java

```
package misc;

public class Data {

    private String s;
    private boolean selected = false;

    public Data(String s) {
        super();
        this.s = s;
    }

    public String getS() {
        return this.s;
    }

    public void setS(String s) {
        this.s = s;
    }

    public boolean isSelected() {
        return this.selected;
    }

    public void setSelected(boolean selected) {
        this.selected = selected;
    }

    @Override
    public String toString() {
        return "Data [s=" + this.s + ", isSelected=" + this.selected + "]";
    }

} 
```

主.java

```
package misc;

import java.awt.Dimension;

import javax.swing.JFrame;
import javax.swing.JScrollPane;

public class Main {

    public static void main(String[] args) {
        JFrame f = new JFrame();
        f.setPreferredSize(new Dimension(500,200));
        f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        Model m = new Model();
        m.add(new Data("test1"));
        m.add(new Data("test2"));
        CheckBoxList cbl = new CheckBoxList(m);
        JScrollPane jsp = new JScrollPane(cbl);
        f.add(jsp);
        f.pack();
        f.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:29:55.877

问题来自您的实现，您`ListModel`没有实现 addListDataListener 和 removeListDataListener，也没有触发适当的模型事件来通知它们。

只需将以下内容放入您的 ListModel 中，它应该会更好地工作：

```
 private List<ListDataListener> listeners = new ArrayList<ListDataListener>();

    @Override
    public void addListDataListener(ListDataListener l) {
        listeners.add(l);
    }

    @Override
    public void removeListDataListener(ListDataListener l) {
        listeners.remove(l);
    }

    public void add(Data string) {
        this.data.add(string);
        ListDataEvent addition = new ListDataEvent(this, ListDataEvent.INTERVAL_ADDED, data.size() - 1, data.size() - 1);
        for (ListDataListener l : listeners) {
            l.intervalAdded(addition);
        }
    }

    public void remove(Data d2) {
        data.remove(d2);
        ListDataEvent removal = new ListDataEvent(this, ListDataEvent.INTERVAL_REMOVED, data.size(), data.size());
        for (ListDataListener l : listeners) {
            l.intervalRemoved(removal);
        }
    } 
```

可能考虑扩展或直接`DefaultListModel`使用它来为您处理这一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:21:01.103

我认为您必须在模型中实现数据侦听器。侦听器可以通过 Swing 添加，它们希望在发生更改时得到通知。

# javascript - 如何加载假定不同 baseUrl 的模块

> ID：11101298
> 
> 赞同：2
> 
> 时间：2012-06-19T12:49:28.700
> 
> 标签：javascript, requirejs

我有一个看起来像这样的文件结构：

```
/js
 |-module/myModule.js
 |-test.js
/vendor/
/spec
 |-main.js
 |-js/app.js 
```

* * *

`spec/main.js`是我的入口点，我从中加载模块`/js,` `/vendor`，`/spec`

我可以毫无问题地加载 in`vendor`和 in 的模块，`spec`因为这些模块是假设`baseUrl = '/'`.

我在加载模块时遇到问题，`/js`因为这些模块是在假设`baseUrl = '/js'`.

如何在不更改脚本代码的情况下解决此问题`'/js'`？

这是一个示例，其中包含描述问题的内联注释。

* * *

**规范/main.js**

```
(function () {
    'use strict';
    require.config({
        baseUrl: '../'
    });
});

define([
    'spec/js/app' // it works
], function (app) {
    'use strict';
    app.initialize();
}); 
```

* * *

**规范/js/app.js**

```
(function(){
    'use strict';
    define([
        'js/module/myModule' // it works
    ], function () {
     // some code
    });
}); 
```

* * *

**js/模块/myModule.js**

```
(function(){
    'use strict';
    define([
        'test' // it does not works because
               // it assumes that baseUrl equals '/js' and not '/'
    ], function () {
     // some code
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:30:31.267

首先，我在包装您的代码的匿名函数中缺少所有 () 。

例如，在这段代码中：

```
(function () {
    'use strict';
    require.config({
        baseUrl: '../'
    });
}()); // <-- missing () 
```

基本上，这段代码什么都不做，因为没有被执行。当您将代码包装在匿名函数中时（以避免污染全局范围，使您的代码更容易最小化，...）您必须执行它！但可能是你写这篇文章的时候打错了。

我有几个解决方案，但恐怕它们无法轻松解决您的问题，或者在 100% 的情况下（我并不是说没有那个解决方案，我只是说我不知道它）

首先是您可以在 require.config 对象中定义*路径，例如：*

```
require.config({
    baseUrl: '../',
        paths : {
            test : 'js/test.js'
    }
}); 
```

这样你的代码就可以工作了。我知道这不是最好的解决方案，因为您必须在每个文件的路径中定义一个条目，我猜您正在寻找更通用的解决方案。

使用路径，您始终可以在一个包（一组模块）的依赖项中设置一个*前缀*，因此您可以在包中组织您的代码，并在对该模块的任何依赖项中添加前缀。如果包有一个主文件，您可以根据需要将路径添加到 require.config 中，以链接到该模块当前位置的路径。

我能想到的另一个解决方案是在 js 中的模块中使用相对路径。如果你经常遇到这个问题，也许你应该从现在开始定义一个你的模块的依赖项，总是使用相对路径。所以

```
define([
        'test'
    ], function () {
        ...
); 
```

会成为：

```
define([
        '../test'
    ], function () {
        ...
); 
```

但是，由于我无法为您的问题提供任何真正的解决方案（在不更改 js/ 文件代码中的任何内容的情况下解决此问题），如果您是，我建议您开始在包的依赖项中使用相对路径用于在不同项目之间重用一组模块。当然，以某种方式组织文件。

让我们看看是否有人对您的问题有真正的解决方案。

# php - 从数据库中选择内容时，mysql 会自动删除斜杠吗？

> ID：11101301
> 
> 赞同：0
> 
> 时间：2012-06-19T12:49:34.957
> 
> 标签：php, mysql, mysql-real-escape-string, stripslashes

我处于一个奇怪的情况，在我的服务器中，当我将字符串插入数据库`mysql_real_escape_string`然后我打印它时，一切都很好，看起来 mysql 会自动生成斜杠！例如，我保存`tes't`然后打印它：`tes't`但是在我安装了 php 4.2 的本地主机中，我给出`tes\'t`了相同的代码。mysql有什么奥秘？？想知道如何将数据插入和选择到数据库安全和干净，永远一次！因为它让我真的很困惑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:52:38.403

它可能取决于 PHP 的魔术引号设置，这更像是 PHP 的奥秘而不是 MySQL 的奥秘 :)`mysql_real_escape_string()`您可以使用更通用的函数而不是 using ：

```
function escape($s)
{
    if (get_magic_quotes_gpc()) $s=stripslashes($s);
    return mysql_real_escape_string($s);
} 
```

使用此代码，您可以检查该选项是否处于活动状态并执行第一次剥离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T12:57:57.587

您可能打开了魔术引号。而不是试图解决这个问题，你应该把它关掉。如果您无权访问服务器，您仍然应该以全局方式处理它。例如：

```
if ( ( function_exists('get_magic_quotes_gpc') && get_magic_quotes_gpc() ) || ini_get('magic_quotes_sybase') ) {
    foreach ( $_POST as $k => $v ) { $_POST[$k] = stripslashes($v); }
    foreach ( $_GET as $k => $v ) { $_GET[$k] = stripslashes($v); }
    foreach ( $_COOKIE as $k => $v ) { $_COOKIE[$k] = stripslashes($v); }
} 
```

将它放在代码的开头可以确保每次都处理魔术引号，这意味着您不必跟踪必须处理魔术引号的位置。

此处注释中的更多信息：[http ://www.php.net/manual/en/function.get-magic-quotes-gpc.php](http://www.php.net/manual/en/function.get-magic-quotes-gpc.php)

# c# - 如何获得 Visual Studio 解决方案来构建 MVC 项目并将其运行到另一个文件夹？

> ID：11101302
> 
> 赞同：3
> 
> 时间：2012-06-19T12:49:35.347
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010, build, project

首先，如果我遗漏了一些明显的东西，我深表歉意，但我似乎无法在任何地方找到答案！

我所拥有的是一个解决方案，其中包含多个包含支持类和控制器等的类库项目以及一个包含视图的 MVC 项目。

我想要的是能够将这组项目构建到另一个位置（即 c:\build），并能够从这个构建位置运行 VS 调试。这样 dll 和 pdb 文件就不会不断更新并检查到源代码管理中，并且默认情况下只是简单地构建到用户 PC 上的另一个位置。

我所做的是将 csproj xml 文件更改为其中包含以下条目。

```
<BaseOutputPath>c:\build\$(AssemblyName)\$(Configuration)\</BaseOutputPath>
<OutputPath>$(BaseOutputPath)\bin\</OutputPath>
<BaseIntermediateOutputPath>$(BaseOutputPath)\obj\</BaseIntermediateOutputPath> 
```

现在，这对于类库项目和 MVC 项目本身创建的 dll 非常有效。VS 创建相关文件夹并将正确的 dll 文件构建到其中，包括将任何依赖项目 dll 构建到此文件夹结构中。

然而，在 MVC 项目中似乎也发生的事情是，它似乎仍然将依赖 dll 构建到项目的 \bin 文件夹中（但不会在那里构建自身）。似乎当您运行该项目时，它会尝试从该项目的 \bin 文件夹中的代码运行，并且因为它找不到 MVC 项目的 dll，所以它会失败。

有没有办法阻止 VS 将依赖的 DLL 文件构建到 \bin 文件夹中并告诉它查看构建的 DLL 的构建位置？

我在 MSDN 网站上查看了有关 proj 文件的信息，并提出了许多不同的解决方案，但它们都不起作用。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:31:00.343

希望这种行为依赖于 MSBuild 而不是 VSBuild，因为两个构建过程不同。如果你很幸运，并且这遵循与 MSBuild 相同的行为，我将遵循 MSBuild 调试过程：

与 MSBuild 中的任何神奇行为一样，在您的`.CSProj`文件中查找任何`import target=`代码并找到这些文件。遵循这些将引导您进入做出任何决定的部分。

您可以将 VS 的调试器附加到您的构建过程 - [http://blogs.msdn.com/b/visualstudio/archive/2010/07/06/debugging-msbuild-script-with-visual-studio.aspx](http://blogs.msdn.com/b/visualstudio/archive/2010/07/06/debugging-msbuild-script-with-visual-studio.aspx) + [http:// blogs.msdn.com/b/visualstudio/archive/2010/07/09/debugging-msbuild-script-with-visual-studio-2.aspx](http://blogs.msdn.com/b/visualstudio/archive/2010/07/09/debugging-msbuild-script-with-visual-studio-2.aspx)

此外，您可以暂时提高构建的详细程度[http://blogs.msdn.com/b/msbuild/archive/2005/09/29/475157.aspx](http://blogs.msdn.com/b/msbuild/archive/2005/09/29/475157.aspx)

# jquery - highchart什么时候完全加载？

> ID：11101303
> 
> 赞同：24
> 
> 时间：2012-06-19T12:49:39.073
> 
> 标签：jquery, highcharts

我看到了这段代码：http: [//jsfiddle.net/AVygG/](http://jsfiddle.net/AVygG/)

我很好奇highchart什么时候完全加载？我在 highcharts 文档中看到*events: load:*应该能够在 highchart 完全加载时调用回调函数。

如果它已完全加载，那么我是否可以假设*var 图表*在警报弹出时应该已经具有值？这是图表已经加载的一个很好的基础吗？

我问的原因是我正在处理另一个代码，highchart 显然没有在 IE8 中完全加载。看起来 highcharts 可能在加载其元素时存在竞争条件。

谢谢！

```
$(function () {
// create the chart
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        events: {
            load: function(event) {
                alert ('Chart loaded');
            }
        }        
    },
    xAxis: {
    },

    series: [{
        animation: false,
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]     
    }]
}); 
```

}); ​</p>

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-24T11:39:02.827

Highcharts 有回调函数

```
 var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            events: {
                redraw: function(event) {
                    alert ('Chart loaded');
                }
            }        
        },
        series: [{
            animation: false,
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]     
        }]
    },function(chart){

alert('LOADED');

}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-19T12:36:37.543

试试这个`redraw`事件。此事件在加载后触发，也在添加系列和调整图表大小后触发。

```
$(function () {
    // create the chart
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            events: {
                redraw: function(event) {
                    alert ('Chart loaded');
                }
            }        
        },
        series: [{
            animation: false,
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]     
        }]
    });
}); 
```

从官方 Highcharts 参考重绘事件：http: [//api.highcharts.com/highcharts#chart.events.redraw](http://api.highcharts.com/highcharts#chart.events.redraw)

和演示：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/chart/events-redraw/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/chart/events-redraw/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-24T11:27:30.757

在加载回调函数中，您可以使用“this”指针访问图表对象。

```
 events: {
            load: function(event) {
                alert ('Chart loaded with series :'+ this.series[0].name);
                console.log(this);
            }
        } 
```

JsFiddle：http: [//jsfiddle.net/msjaiswal/AVygG/25/](http://jsfiddle.net/msjaiswal/AVygG/25/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-13T00:04:15.780

这得到了回答，但在 imo 中还不够清楚。Highcharts 文档说

> ...在大多数情况下，图表是在一个线程中构建的，但在 Internet Explorer 8 或更低版本中，图表有时会在文档准备好之前启动，在这些情况下，图表对象不会在调用`new Highcharts.Chart()`. 因此，依赖于新建 Chart 对象的代码应始终在回调中运行。

所以，IE8中对图表对象的处理*必须*在回调中完成，即`new Highcharts.Chart(options, function(chart) { ... })`。您也可以在函数中使用`function() { ... }`和使用。`this`

关于您的具体问题，请重新加载消息。我必须在回调中这样做，但它有效。

```
chart1 = new Highcharts.Chart(options, function(){
  this.showLoading();
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-24T16:35:18.947

在角度项目中，我必须使用`setTimeout()`函数来使宽度正常工作，如下所示：

```
setTimeout(()=>this.chart.reflow()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-17T10:04:02.043

在 Polymer 3 中，我必须使用**window.setTimeout()**函数来使宽度正常工作，如下所示。`load: function() { window.setTimeout(() => { this.reflow(); }, 1); },`

# vba - 未设置对象变量或带变量

> ID：11101304
> 
> 赞同：0
> 
> 时间：2012-06-19T12:49:44.067
> 
> 标签：vba, excel

学习一些VBA。到目前为止，我已经构建了这段代码，它应该允许我（虽然它还没有）做以下事情：

1.  获取`"M" & i`单元格中的数字（在第一次迭代中是 M5）。
2.  在 A 列中找到该数字。
3.  一旦找到它，将值设置`PutHereIfFound`为与 F6 的值相同（因此偏移）。
4.  如果找到一个数字，则增加 i 以便循环继续搜索 M6、M7、...，直到单元格 M20。

它返回 a `Run-Time Error 91`，它代表`Object Variable or With Variable not set`。当我调试时，它指向该`Set PuthereIfFound`行。

这个错误的原因是什么？

```
 Sub FindThis()
    Dim FindThis As Range
    Dim PutHereIfFound As Range
    Dim i As Integer
    Dim f As Integer

    i = 5
    f = 5
    Do
        Set FindThis = ActiveSheet.Range("M" & i)
        Set PutHereIfFound = ActiveSheet.Range("N" & i)
            With ActiveSheet.Range("A:A")
                Set PutHereIfFound = .Find(What:=FindThis, _
                                After:=.Cells(.Cells.Count), _
                                LookIn:=xlValues, _
                                LookAt:=xlWhole, _
                                SearchOrder:=xlByRows, _
                                SearchDirection:=xlNext, _
                                MatchCase:=False).Offset(0, 5)

                If Not PutHereIfFound Is Nothing Then
                    i = i + 1
                Else
                    i = i                       
                End If                                    
            End With
     Loop While i <= 20
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:19:42.353

在回答您有关`Object Variable or With Variable Not Set`错误的问题时，这意味着`FindThis`未找到并`Find`返回`Nothing`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:27:27.283

根据我的评论，您的代码可以像这样优化。

```
 Sub FindThis()
    Dim ws As Worksheet
    Dim FindThis As String
    Dim aCell As Range
    Dim i As Long

    Set ws = Sheets("Sheet1")

    With ws
        For i = 5 To 20
            FindThis = .Range("M" & i).Value

            Set aCell = .Columns(1).Find(What:=FindThis, LookIn:=xlValues, _
            LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
            MatchCase:=False, SearchFormat:=False)

            If Not aCell Is Nothing Then
                '~~> Do whatever you want here with the F Value
                PutHereIfFound = aCell.Offset(, 5).Value

                Debug.Print PutHereIfFound
            End If
        Next i
    End With
End Sub 
```

# javascript - Javascript - 使用“data-id”获取对象的属性并在元素上打印

> ID：11101310
> 
> 赞同：1
> 
> 时间：2012-06-19T12:50:09.650
> 
> 标签：javascript, jquery

我试图从这个数组中选择一个对象，并使用“data-id”将它的所有属性打印到一个元素中。我该怎么做呢？另外，我怎样才能给新的 CarObjects 一个 ID？

```
**<div id="carInfo" data-id="10"></div>**

function Car(company, name, price, details, image, alt){ 
    this.company = company;
    this.name = name;
    this.price = price;
    this.details = details;
    this.image = image;
    this.alt = alt;
}

var carInformation = [new Car("Ferrari", "Marenello", " $250,000", "Fast. Very Fast.", "images/ferrari.jpg","image of ferrari"),
                      new Car("Dodge", "Viper", " $100,000","Great Acceleration","images/dodge.jpg", "image of viper"),
                      new Car("Ford", "Shelby", "$80,000", "Muscle Car", "images/mustang.jpg", "image of mustang"),
                      new Car("Back To The Future", "Delorean", "$20,000", "Travels through time","images/delorean.jpg", "image of delorean"),
                      new Car("Lamborghini", "Diablo", "$250,000", "Fastest","images/lambo.jpg","image of lamborghini"),
                      new Car("CMercedes Benz", "SLR", "$180,000", "Classy Vehicle.","images/benz.jpg","image of mercedes benz"),
                      new Car("Chevrolet", "Corvette", "$70,000", "Fiberglass body Light Vehicle.","images/vette.jpg","image of corvette"),
                      new Car("Porsche", "Carrera", "$120,000", "Great Handling.","images/porsche.jpg", "image of porsche"),
                      new Car("Audi", "R8", "Price: $110,000", "Fast and Classy.", "images/audi.jpg","image of audi") ]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:51:57.717

jQuery 让你`data-id`通过方法获取属性[`data()`](http://api.jquery.com/data)；

```
var carInfo = carInformation[$('#carInfo').data('id')];

Object.keys(carInfo).forEach(function (val) {
    console.log(val + " is " + this[val]);
}, carInfo); 
```

上面的代码片段使用[ECMAScript5 规范](http://es5.github.com/)中的代码[，旧版浏览器不支持](http://kangax.github.com/es5-compat-table/)该规范。如果你想支持它们，你需要使用[ES5 shim](https://stackoverflow.com/questions/8732846/how-to-provide-es5-shim)或[polyfiller](https://stackoverflow.com/questions/8221757/polyfill-or-workarounds-for-ecmascript5-new-features)，或者使用下面的代码片段：

```
var carInfo = carInformation[$('#carInfo').data('id')];

for (var x in carInfo) {
    if (carInfo.hasOwnProperty(x)) {
        console.log(x + " is " + carInfo[x]);
    }
} 
```

将其打印到元素中取决于您希望它的格式，但上面的代码将为您提供执行此操作所需的所有详细信息。

**编辑：**请记住，您的`carInformation`数组中只有 8 个元素...

# android - minSdkVersion=8 运行在 Froyo 中，但不在 HoneyComb 或 ICS 中

> ID：11101315
> 
> 赞同：-2
> 
> 时间：2012-06-19T12:50:27.653
> 
> 标签：android

我创建了一个在 API 8 之后在所有 android 设备上运行的 apk。在模拟器中针对所有 API 进行了测试，并且运行良好。但是，在将 apk 放到 Google Play 上之后，HoneyComb 和 ICS 的一些用户抱怨 APK 没有运行。这是我在 Google Play 中的 apk 的链接：https: [//play.google.com/store/apps/details? id=designtec.android.rss](https://play.google.com/store/apps/details?id=designtec.android.rss)

这是我的清单文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<manifest android:versionCode="1" android:versionName="1.0"
package="designtec.android.rss" xmlns:android="http://schemas.android.com/apk/res/android">
<uses-sdk android:minSdkVersion="8"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<application android:icon="@drawable/iatec" android:label="@string/app_name">
    <activity android:label="@string/app_name" android:name="Main" android:theme="@android:style/Theme.NoTitleBar">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>
    <activity android:name=".Main2" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".StartMain" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".MainCalc" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".Info" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".NaturezaDoSom" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".CaracteristicasDaAudicaoHumana" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".PropagacaoAoArLivre" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".PropagacaoAoArLivre_PerdaPresDist" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".PropagacaoAoArLivre_VelTemp" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".NaturezaDoSom_FreqPer" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".NaturezaDoSom_FreqVelSom" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".NaturezaDoSom_NumDobVol" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".NaturezaDoSom_NumOitDuasFreq" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".NaturezaDoSom_SisMasMola" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".CaracteristicasDaAudicaoHumana_NumDobVol" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".CaracteristicasDaAudicaoHumana_NumOitDuasFreq" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".CaracteristicasDaAudicaoHumana_QuantoVarTempo" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".ODecibel_Bel" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".ODecibel_dBm" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".ODecibel_dBSPL" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".ODecibel_dBu" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".ODecibel_Decibel" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".ODecibel_PVR" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".ODecibel" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".ODecibel_DecibelTensaoEletrica" android:theme="@android:style/Theme.NoTitleBar"/>
    <activity android:name=".Pagina" android:theme="@android:style/Theme.NoTitleBar"/>
</application></manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:25:13.627

如果您无法访问带有 ICS 或 HoneyComb 的设备，您可以创建一个 AVD（仿真器）来试用它。检查您的 logcat 以获取错误报告。我认为这是我可以帮助您了解上述信息的最好方法。

# liferay - 在 Liferay 上部署 JSR 286 portlet

> ID：11101324
> 
> 赞同：4
> 
> 时间：2012-06-19T12:51:15.770
> 
> 标签：liferay, portlet

是否可以在不更改项目文件或目录结构的情况下部署任何 JSR 286 投诉 portlet 而不是专门的 Liferay portlet（使用 eclipse 插件等创建）？

如果不可能，是否有任何逐步的过程可以将任何 portlet 转换为与 Liferay 兼容的 portlet？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:29:04.267

是的，这是可能的：您只需要在 Liferay 部署目录中或通过界面部署 WAR 文件。前段时间我写了一篇关于portlet 的教程，创建了一些兼容JSR 286 的portlet 并部署了它们。[也许他们可以帮助你](https://bitbucket.org/brandizzi/sea-portlets-exemplo/src)。（但是请注意，为了探索 Liferay 的某些属性，这些 portlet 没有`web.xml`描述符——它们可以在 Liferay 中工作，但不能在其他地方工作。如果需要，只需添加描述符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-01T15:19:14.940

请注意，由于 Liferay 资源导入器模块中的错误[LPS-60897](https://issues.liferay.com/browse/LPS-60897) ，这不会像宣传的那样工作（至少在 Liferay 6.2 中）。另请参阅导致错误报告[的论坛主题。](https://www.liferay.com/community/forums/-/message_boards/view_message/64337477#_19_message_64332622)

# c - 谁能解释这个 C 程序的输出？

> ID：11101327
> 
> 赞同：7
> 
> 时间：2012-06-19T12:51:20.883
> 
> 标签：c, switch-statement

> **可能重复：**
> [为什么不能在 switch 语句中声明变量？](https://stackoverflow.com/questions/92396/why-cant-variables-be-declared-in-a-switch-statement)
> [绕过定义时如何使用变量？](https://stackoverflow.com/questions/8535731/how-can-a-variable-be-used-when-its-definition-is-bypassed)

```
#include<stdio.h>
  int main()
  {
      int a=1;
      switch(a)
      {   int b=20;
          case 1: printf("b is %d\n",b);
                  break;
          default:printf("%d\n",b);
                  break;
      }
      return 0;
  } 
```

在 gcc 4.6.3 上运行，输出不是 20。这是怎么回事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T12:53:40.870

在 switch 语句中初始化变量是不好的做法和未定义的行为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T12:55:41.053

switch 语句具有以下结构：

```
switch ( expression ){

    // declarations 

   case constant-expression : 
      ...
   case constant-expression : 
      ...
   default :
      ...
} 
```

声明部分在编译时用于声明变量，但在运行时不用于初始化它们（实际上，该部分中没有执行任何语句）。声明和初始化变量之间没有区别。由于`b`从未初始化，因此您的代码具有与以下相同的结果：

```
int main(){
    int b;
    printf("b is %d\n", b);

    return 0;
} 
```

这显然是未定义的。使用标志编译`-Wall`会发现您正在使用未初始化的值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-19T12:54:07.793

如果你打开你的编译器警告，你会看到：

```
warning: ‘b’ may be used uninitialized in this function 
```

这不是 initialise 的有效位置`b`，因此它在打印时包含未初始化的数据而不是 20。您正在导致未定义的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T12:56:00.773

该语句根据变量的值对相应的`switch`语句执行一个操作，仅此而已。现在您正在绕过 的初始化，因此它将打印出当时在该位置的内存中的任何内容。`goto``case``switch``b`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-19T12:54:52.440

它是一个 var**范围**问题。如果你搬家

```
int b=20; 
```

在开关块之外，它将起作用。

# javascript - 鼠标按钮按下时 Javascript 刷新事件处理程序

> ID：11101330
> 
> 赞同：1
> 
> 时间：2012-06-19T12:51:28.843
> 
> 标签：javascript

显然（至少在 Firefox 中）当鼠标按下时，无法刷新事件处理程序。我正在尝试编写一些拖放代码，当元素被拖动时，我希望能够使用 mouseover 事件处理程序来判断它正在“触摸”哪个元素，但这不起作用。有没有办法启用此功能或解决方法？

# function - apache derby中的按位运算符

> ID：11101333
> 
> 赞同：0
> 
> 时间：2012-06-19T12:51:37.640
> 
> 标签：function, derby, bitwise-operators

我想知道 Derby 是否支持 SQL 语句中的位运算符。我可以在功能列表中看到真值测试为“是”。以下是相同的链接：

```
http://db.apache.org/derby/docs/10.2/ref/rrefsql9241891.html 
```

我想执行这样的查询：SELECT a & b FROM APP.TEST;

谢谢

尝试通过在 derby 中定义一个函数来实现上述功能：

```
CREATE FUNCTION BitAnd(a SMALLINT, b SMALLINT) RETURNS SMALLINT
    PARAMETER STYLE JAVA NO SQL LANGUAGE JAVA
    EXTERNAL NAME 'derby.routines.BitAnd.bitAnd'; 
```

接下来，我在 derby 类路径 CALL SQLJ.install_jar 上调用了以下函数以具有上述功能

```
('path\to\db\functions.jar', 'APP.functions', 0); 
```

调用 SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY

```
('derby.database.classpath', 'APP.functions'); 
```

成功执行了上述 sp 调用，随后创建了 jar 目录，文件如下`path\to\db\jar\APP\FUNCTIONS.jar.G1340195863482`

但是当我尝试在我的java代码中调用这个函数时：

```
deleteAgentStats = dbConnection.prepareStatement("select bitAnd(a,b) AS \"result\" from APP.TEST");
ResultSet andResult = deleteAgentStats.executeQuery();
if(andResult.next()){
        System.out.println("heyyyyyyyyyyyyyyyyyyyyyyyyy :: 
"+andResult.getInt("result"));
} 
```

我得到以下异常：

```
Caused by: java.sql.SQLSyntaxErrorException: The class 'derby.routines.BitAnd' does not exist or is inaccessible. This can happen if the class is not public.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.Util.seeNextException(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement.<init>(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement20.<init>(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement30.<init>(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedPreparedStatement40.<init>(Unknown Source)
    at org.apache.derby.jdbc.Driver40.newEmbedPreparedStatement(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)
    at org.apache.commons.dbcp.DelegatingConnection.prepareStatement(DelegatingConnection.java:281)
    at org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.prepareStatement(PoolingDataSource.java:313)
    at primary.db.AgentStatisticsDAO.deleteAgentStatistics(AgentStatisticsDAO.java:507)
    ... 11 more
Caused by: java.sql.SQLException: The class 'derby.routines.BitAnd' does not exist or is inaccessible. This can happen if the class is not public.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
    ... 28 more
Caused by: java.sql.SQLException: Java exception: 'derby.routines.BitAnd: java.lang.ClassNotFoundException'.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.Util.javaException(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)
    ... 25 more
Caused by: java.lang.ClassNotFoundException: derby.routines.BitAnd
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1643)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1488)
    at java.lang.ClassLoader.loadClassInternal(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.apache.derby.impl.services.reflect.ReflectClassesJava2.loadClassNotInDatabaseJar(Unknown Source)
    at org.apache.derby.impl.services.reflect.DatabaseClasses.loadApplicationClass(Unknown Source)
    at org.apache.derby.iapi.services.loader.ClassInspector.getClass(Unknown Source)
    at org.apache.derby.iapi.services.loader.ClassInspector.accessible(Unknown Source)
    at org.apache.derby.impl.sql.compile.QueryTreeNode.verifyClassExist(Unknown Source)
    at org.apache.derby.impl.sql.compile.StaticMethodCallNode.bindExpression(Unknown Source)
    at org.apache.derby.impl.sql.compile.JavaToSQLValueNode.bindExpression(Unknown Source)
    at org.apache.derby.impl.sql.compile.ResultColumn.bindExpression(Unknown Source)
    at org.apache.derby.impl.sql.compile.ResultColumnList.bindExpressions(Unknown Source)
    at org.apache.derby.impl.sql.compile.SelectNode.bindExpressions(Unknown Source)
    at org.apache.derby.impl.sql.compile.DMLStatementNode.bindExpressions(Unknown Source)
    at org.apache.derby.impl.sql.compile.DMLStatementNode.bind(Unknown Source)
    at org.apache.derby.impl.sql.compile.CursorNode.bindStatement(Unknown Source)
    at org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)
    at org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)
    at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source)
    ... 21 more 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:26:49.663

这可能是使用 Derby 的 Java 可扩展性的好例子。考虑用 Java 编写位操作例程，然后从 Derby SQL 调用它们：[http ://wiki.apache.org/db-derby/DerbySQLroutines](http://wiki.apache.org/db-derby/DerbySQLroutines)

# perl - 如何使用 Perl 脚本分发/捆绑 Math::Random？

> ID：11101348
> 
> 赞同：0
> 
> 时间：2012-06-19T12:52:07.480
> 
> 标签：perl, perl-module

我有一个使用 Math::Random 的简单 Perl 脚本。

有什么方法可以使用 Math::Random 分发脚本，以便用户不必安装它？

（我的很多用户都没有安装这个库，也没有 root 权限，而且可能没有足够的技术来安装任何东西。）

如果这很重要，每个人都将使用 AMD 64 位 Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:42:47.133

Math::Random 是一个 XS 模块，因此您不能将它[捆绑在习惯`inc`目录](https://stackoverflow.com/a/8184181)中。必须编译模块。由于您不希望您的用户编译它，因此[您必须这样做](https://stackoverflow.com/a/11072391)，并发布一个包。

# android - 自动从 Basic4android 中的启动画面移动

> ID：11101353
> 
> 赞同：1
> 
> 时间：2012-06-19T12:52:26.097
> 
> 标签：android, android-layout, basic4android

我刚开始在 Basic4android 中编程。我创建了 2 个布局。**飞溅**和**搜索**。我想显示启动布局约 2 秒，然后自动移动到搜索布局。这是我到目前为止的代码。

```
Sub Process_Globals

    Dim SplashTimer As Timer 

End Sub

Sub Activity_Create(FirstTime As Boolean)

    SplashTimer.Initialize("SplashTimer", 3000)
    SplashTimer.Enabled = True

    If FirstTime = True Then
        Activity.LoadLayout("splash")
    End If

End Sub

Sub SplashTimer_Tick
    Activity.LoadLayout("search")
End Sub 
```

问题是即使它在 3 秒后移动到搜索布局，启动布局仍然在背景中可见。谁能告诉我如何纠正这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:08:24.807

您应该将初始布局加载到面板中（使用 Panel.LoadLayout）并将面板添加到活动中。

调用 Panel.RemoveView 以删除面板及其布局。

# c# - 使用 Roslyn June CTP 2012 生成动态 LINQ 时出错

> ID：11101356
> 
> 赞同：0
> 
> 时间：2012-06-19T12:52:38.623
> 
> 标签：c#, roslyn

以前我写了一个程序，使用 Mono 编译器作为服务

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Mono.CSharp;

namespace MonoTest
{
    class Program
    {
        static void Main(string[] args)
        {
            //Initializing the evaluator
            Evaluator.Init(new string[0]);           

            //Importing namespaces 
            Evaluator.Run("using System;");
            Evaluator.Run("using System.Linq;");
            Evaluator.Run("using System.Collections.Generic;");

            //Sum of 'n' numbers
            Evaluator.Run("List<int> numbers= new List<int> {1,2,3,4,5,6,7,8,9,10} ;");
            Evaluator.Run("var sum = numbers.Sum();");
            Evaluator.Run("Console.WriteLine(sum);");
        }
    }
} 
```

**//输出**

**55**

现在尝试使用**Roslyn**做同样的事情（我的第一个代码）[Roslyn 项目类型：控制台应用程序]

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using Roslyn.Scripting;
using Roslyn.Scripting.CSharp;

namespace ConsoleApplication4
{
    class Program
    {
        static void Main(string[] args)
        {
            var host = new ScriptingHost();
            string codeLine = string.Empty;
            codeLine += "List<int> numbers= new List<int> {1,2,3,4,5,6,7,8,9,10} ;" + Environment.NewLine;
            codeLine += "var sum = numbers.Sum();";
            codeLine += "Console.WriteLine(sum);";

            var res = host.Execute(codeLine);

            //Write the result back to console
            if (res != null)
                Console.WriteLine(" = " + res.ToString());

            Console.ReadKey();

        }
    }

    public class ScriptingHost
    {
        private ScriptEngine engine;
        private Session session;       

        public ScriptingHost()
        {
            //Create a session
            session = Session.Create(this);

            //Create the engine, just pass the assemblies and namespaces
            engine = new ScriptEngine(new Assembly[]
                                {
                                    typeof(Console).Assembly,
                                    typeof(ScriptingHost).Assembly,
                                    typeof(IEnumerable<>).Assembly,
                                    typeof(IQueryable).Assembly
                                },
                                new string[] 
                                { 
                                    "System", "System.Linq", 
                                    "System.Collections",
                                    "System.Collections.Generic"
                                }
                            );

        }

        //Pass the code to the engine, nothing much here
        public object Execute(string code)
        {
            return engine.Execute(code, session); --Error at this line
        }
    }
} 
```

但是得到这个错误

**“（1,34）：错误CS8000：此语言功能（'带有初始化程序的对象创建表达式'）尚未在Roslyn中实现。”**

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:56:13.827

看起来您必须将列表的创建与填充列表分开：

```
codeLine += "List<int> numbers= new List<int>();";
codeLine += "var values = new int[] {1,2,3,4,5,6,7,8,9,10};";
codeLine += "numbers.AddRange(values);"; 
```

编辑：或使用[构造函数重载，它采用](http://msdn.microsoft.com/en-us/library/fkbw11z0)@svick 在评论中建议的列表：

```
codeLine += "var numbers = new List<int>(new int[] {1,2,3,4,5,6,7,8,9,10});"; 
```

# c# - 如何防止 C# 转义我的字符串？

> ID：11101359
> 
> 赞同：3
> 
> 时间：2012-06-19T12:52:43.083
> 
> 标签：c#, escaping

我有 Windows 窗体 UI，它允许我在 TextBox 中输入字符串格式，例如：

输入结果格式：`{sku}:{value} \n`

问题是，\n 被转义了，所以调试视图中的结果格式字符串如下所示：

```
{sku}:{value} \\n 
```

这会产生 \n 而不是结果中的换行符。

所以问题是，如何防止这种情况，或者如何在使用之前删除转义`StringBuilder.AppendFormat()`

更新：我决定从记事本++窗口添加图像，这可能有助于理解我需要什么以及为什么（虽然我的用例有点不同，但我认为想法是一样的）： ![在此处输入图像描述](../Images/49d9ac9fca920887815fba43700eb985.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T13:05:23.230

可能，您想要做的是使用 string.Replace(@"\n", "\n") 方法。[在http://msdn.microsoft.com/en-us/library/system.string.replace.aspx](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)查看更多

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-02T04:52:30.800

对字符串进行反转义的一般方法是使用正则表达式

```
System.Text.RegularExpressions.Regex.Unescape(yourStringVariable); 
```

[如何在 .net 中取消转义和重新转义字符串？](https://stackoverflow.com/questions/2661169/how-can-i-unescape-and-reescape-strings-in-net)

# wpf - GridViewColumn.CellTemplate 中的 TextBlock 文本换行不起作用

> ID：11101360
> 
> 赞同：18
> 
> 时间：2012-06-19T12:52:45.063
> 
> 标签：wpf, datatemplate, textblock, word-wrap, gridviewcolumn

我在让 TextWrapping 在此示例中工作时遇到问题。谁能看到我在这里做错了什么？

```
 <ListView Name="listViewReportedException" ItemsSource="{Binding ExceptionDetails}">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="Time" DisplayMemberBinding="{Binding Thrown}" Width="150" />
                <GridViewColumn Header="Description" DisplayMemberBinding="{Binding Description}" Width="385">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock TextWrapping="Wrap" Text="{Binding}" Width="385"/>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
                <GridViewColumn Header="Recover action" DisplayMemberBinding="{Binding Action}" Width="90"/>
            </GridView>
        </ListView.View>
    </ListView> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-19T13:05:46.567

您同时设置`DisplayMemberBinding`和`CellTemplate`。`DisplayMemberBinding`使用时删除`CellTemplate`。也删除`Width`for `TextBlock`，它会工作

```
<ListView ...>
    <ListView.View>
        <GridView>
            <!-- ... -->
            <GridViewColumn Header="Description" Width="385">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock TextWrapping="Wrap" Text="{Binding Description}" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <!-- ... -->
        </GridView>
    </ListView.View>
</ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-15T14:36:09.310

为 TextBlock 设置样式也对我有用：

```
<ListView ItemsSource="{Binding xxx}">
  <ListView.Resources>
     <Style TargetType="TextBlock">
        <Setter Property="TextWrapping" Value="Wrap"/>
     </Style>
  </ListView.Resources>
  <ListView.View>
    <GridView.Columns>
      <GridViewColumn Header="Inspection Item" DisplayMemberBinding="{Binding InspectionItem}"/>
  </ListView.View>
<ListView> 
```

[![在此处输入图像描述](../Images/391d8e83d539c7b04e42a04520dcc365.png)](https://i.stack.imgur.com/2iRxT.png)

# javascript - Javascript在另一个函数中检测'Shift'键向下

> ID：11101364
> 
> 赞同：1
> 
> 时间：2012-06-19T12:53:05.313
> 
> 标签：javascript

我正在从 Flash 电影（使用 ExternalInterface）调用我的 html 页面中的 Javascript 函数，我想知道在调用该函数时用户是否按下了 Shift 键。

例如，如果我通过鼠标单击调用该函数，这似乎很简单，因为我可以传递事件并检查“if (event.shiftKey)”。我没有要检查的事件！

非常感谢

克里斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T13:09:32.263

在页面上附加一个`keydown`和`keyup`事件`document`并监听 shift 键。

```
var shiftDown = false;
var setShiftDown = function(event){
    if(event.keyCode === 16 || event.charCode === 16){
        window.shiftDown = true;
    }
};

var setShiftUp = function(event){
    if(event.keyCode === 16 || event.charCode === 16){
        window.shiftDown = false;
    }
};

window.addEventListener? document.addEventListener('keydown', setShiftDown) : document.attachEvent('keydown', setShiftDown);
window.addEventListener? document.addEventListener('keyup', setShiftUp) : document.attachEvent('keyup', setShiftUp); 
```

# asp.net - 使用 asp.net MVC 3 学习 TDD 的资源

> ID：11101365
> 
> 赞同：7
> 
> 时间：2012-06-19T12:53:08.670
> 
> 标签：asp.net, asp.net-mvc, tdd

是否可以在 asp.net MVC 3 上进行 TDD？如果是这样，有哪些好的在线资源？据我所知，MVC 3 是最新的版本。但是我在谷歌上搜索的大多数 tdd 文章都是针对 MVC 1 的。即使我能找到的关于 MVC 中 TDDing 的仅有的两本书都是针对 1.0 的

[Asp.net MVC 测试驱动开发](https://rads.stackoverflow.com/amzn/click/com/0470447621)

[试驾 asp.net MVC](https://rads.stackoverflow.com/amzn/click/com/1934356530)

即使在 Microsoft 官方网站上，作为[MVC TDD 演练](http://msdn.microsoft.com/en-us/library/gg416511%28VS.98%29.aspx)的文章也是针对 MVC 2.0 的。

它开始让我觉得 TDD 在 asp.net MVC 上不实用，或者它没有得到大力支持。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T13:31:04.310

这是我所知道的学习 TDD 的最佳资源：

[Roy Osherove - 单元测试的艺术](https://rads.stackoverflow.com/amzn/click/com/1933988274)

阅读此内容并阅读以下 MVC3 书籍后：

[Sanderson 和 Freeman - Pro ASP.NET MVC3 框架](https://rads.stackoverflow.com/amzn/click/com/B005CHD6MU)

有了这个，你就可以开始在 MVC3 中进行测试驱动开发了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:28:20.527

TDD 的大多数概念都是相当通用的，因此用于 C# 编程的 TDD 资源通常会让您走得更远。

要使用 MVC 解决方案，您可以查看[https://github.com/tekpub/mvc3](https://github.com/tekpub/mvc3)（我也推荐这些视频，但它们不是免费的）。

Brad Wilson 有很多关于测试和 MVC 的好东西（例如[http://bradwilson.typepad.com/blog/2010/07/testing-routing-and-url-generation-in-aspnet-mvc.html ）。](http://bradwilson.typepad.com/blog/2010/07/testing-routing-and-url-generation-in-aspnet-mvc.html)

[这个视频](http://www.vimeo.com/24536954)更多的是关于应用程序的架构，但他也做了一些测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T17:12:40.803

看起来以下资源尚未发布。 [TDD with ASP.NET MVC 3, Moq and Dependency Injection](http://danielglyde.blogspot.com/2011/07/tdd-with-aspnet-mvc-3-moq-and.html) 和 stackoverflow 中关于这个主题[TDD 和测试数据的精彩讨论](https://stackoverflow.com/q/4771697/1437962)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T01:14:27.490

可测试性从一开始就是一个目标。我怀疑您没有将“带有 MVC 3 的 TDD”视为专门主题的原因之一是因为自 v1.0 以来技术没有改变。我在 asp.net 站点上的[MVC 3 课程的介绍视频中介绍了使用 nUnit 进行单元测试控制器操作。](http://www.asp.net/mvc/pluralsight)

# javascript - tinyMCE keyup 直到第一个结尾

> ID：11101366
> 
> 赞同：1
> 
> 时间：2012-06-19T12:53:13.657
> 
> 标签：javascript, jquery, html, tinymce

我正在尝试实时捕获用户输入的内容`.content` `textarea`并将其粘贴到`.intro`. 我试过这样，但没有效果

`.tiny_editor`//所有这些都与tinymce有关，因为我使用tinymce作为具有类的文本框的富文本编辑器

```
//$(".content").live("keyup", function(e) {
$(".content").keyup(function(e) { //The keyup never does its thing
    var stt=$(this).val();
    console.log('content : '+stt);
    $(".intro").text(stt);
}); 
```

然后，我还需要将其限制为 first`<p>`中的内容`.content` `textarea`

*   `.content` `textarea`, 用户写文本的地方

    ```
    <textarea name="content" class="tinymce content">
       <p>first paragraph</p>
       <p>second paragraph</p>
       <p>third paragraph</p>
    </textarea> 
    ```

*   这里是它自动插入的地方，first`<p>`和`</p>`from之间的内容`.content`

    ```
    <textarea name="content" class="tinymce intro">
       <p>first paragraph</p>
    </textarea> 
    ```

有任何想法吗？

[http://jsfiddle.net/xEzAq/2/](http://jsfiddle.net/xEzAq/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:08:00.620

在这种情况下，如果用户选择在第一段内，则必须检查每个 keydown 事件。

在您的 tinymce init 中，您需要按如下方式添加设置参数。这是代码：

```
setup : function(ed) {

  ed.onKeydown.add(function(ed, evt) {
    var node = ed.selection.getNode();
    while (node)
    {
        if (node.nodeName == 'BODY') { node = 0; break; }
        if (node.nodeName !== 'P')    { node = node.parentNode;}
        else { break; }
    }
    if (!node) return;
    var first_node_active = $(ed.getBody()).find('p:first').get(0) == node;
    // prevent insertion of content
    if (first_node_active){
        e.preventDefault();
        e.stopPropagation();
        return false;
    }
  });

},
... 
```

**更新：** 我明白了。事实上，tinymce 隐藏了 textare 并为内容使用了一个 contenteditable 的 iframe。解决您的问题的最简单方法是使用 setup tinymce 配置参数：

```
tinyMCE.init({

  mode: 'exact',
  elements: 'content',
  ...
  setup : function(ed) {
   // handler to catch keyup events
   ed.onKeyup.add(function(ed, evt) {

      // get html content of first paragraph in the editor
      var first_node_html = $(ed.getBody()).find('p:first').html();

      // copythe html content into the textarea '.intro'
      $('.intro').text(first_node_html);

      // if intro is a tinymce editor too you will need some other code
      // here it is
      //
      // // check if intro exists as tinymce editor and make sure we are not editing in it at the moment (copying makes no sense then)
      // if (ed2 = tinymce.get('intro') && ed.id != ed2.id){
      //    ed2.setContent(first_node_html);
      // }
   });

},
... 
```

# c++ - 无法在 Outlook 2007 中的新邮件上删除文件

> ID：11101370
> 
> 赞同：0
> 
> 时间：2012-06-19T12:53:20.900
> 
> 标签：c++, winapi, outlook-2007

我遇到了一个奇怪的问题。它在 Outlook 2K3 上运行良好，但在 Outlook 2K7 和 2K10 上运行良好。

问题 - 如果我从我的应用程序中拖放一个文件并放到 Outlook 2007 中新消息的消息正文中，则不会发生任何事情。相反，预期的行为是 - 文件应附加到消息中。它在 Outlook 2003 中运行良好，我没有对我的代码进行任何更改。
如果我将文件从我的应用程序拖放到 Windows 桌面，它可以正常工作。现在，如果我将同一文件从 Windows 桌面拖放到 Outlook 2007 中的新消息上，文件就会被附加。这让我猜测我的代码需要更改，但我无法弄清楚。

调查 -

我们已经在方法中实现了`CFSTR_FILEDESCRIPTOR`,`CFSTR_FILECONTENTS`和。我注意到，在 Outlook 2007 的情况下，当我将文件（从我的应用程序）拖放到新邮件中的邮件正文时，只会调用剪贴板格式。而在 Outlook 2003 的情况下，如果我将文件（从我的应用程序）拖放到新邮件中的邮件正文， 则会调用两次，然后是剪贴板格式。 `CF_TXT``CDataObject::Getdata()``CFSTR_FILEDESCRIPTOR``CDataObject::GetData()``CFSTR_FILEDESCRIPTOR``CFSTR_FILECONTENTS`

在第二个文件中提取内容，因为第二次没有调用 GetData，因此文件没有附加到电子邮件中。以下是示例代码。

有谁知道可能是什么原因？或者我还能尝试缩小问题范围。

```
STDMETHODIMP CDataObject::GetData ( 
            LPFORMATETC                pFE, 
            LPSTGMEDIUM         pSTM) 
{ 

HGLOBAL                                        hMem; 
LPFILEGROUPDESCRIPTOR        pfgd; 
UINT                                        uFormat, uBytes; 
    void*                                        p; 

    m_uFmtUsed = 0; 
    uFormat = pFE->cfFormat; 

    // FILEDESCRIPTOR format 
    if (uFormat == m_fe[0].cfFormat) 
    { 
            if (!(pFE->dwAspect & DVASPECT_CONTENT)) 
                    return DV_E_DVASPECT; 
    if (!(pFE->tymed & TYMED_HGLOBAL)) 
                    return DV_E_FORMATETC; 

        hMem=GlobalAlloc (GMEM_SHARE | GMEM_MOVEABLE, 
                            sizeof(FILEGROUPDESCRIPTOR)); 

            if (hMem == NULL) 
                    return STG_E_MEDIUMFULL; 

            pfgd = (LPFILEGROUPDESCRIPTOR)GlobalLock (hMem); 
            pfgd->cItems = 1; 
            pfgd->fgd[0].dwFlags = FD_ATTRIBUTES; 
            pfgd->fgd[0].dwFileAttributes = FILE_ATTRIBUTE_NORMAL; 
            lstrcpy (pfgd->fgd[0].cFileName, m_pszName); 

            GlobalUnlock (hMem); 

            pSTM->hGlobal = hMem; 
            pSTM->tymed = TYMED_HGLOBAL; 
            pSTM->pUnkForRelease = NULL; 
            m_uFmtUsed = uFormat; 
            return S_OK; 
    } 

    // FILECONTENTS clipboard format 
    else if (uFormat == m_fe[1].cfFormat) 
    { 
            if (!(pFE->dwAspect & DVASPECT_CONTENT)) 
                    return DV_E_DVASPECT; 
    if (!(pFE->tymed & TYMED_HGLOBAL)) 
                    return DV_E_FORMATETC; 

            if (!m_pData) 
            { 
                    m_pData = PKDropGetData ( 
                                    m_pStruct, FALSE, FALSE, &uBytes); 
            } 

        hMem = GlobalAlloc (GMEM_SHARE|GMEM_MOVEABLE, uBytes); 

            if (hMem == NULL) 
                    return STG_E_MEDIUMFULL; 

            p = GlobalLock (hMem); 
            memcpy (p, m_pData, uBytes); 
            GlobalUnlock (hMem); 

            pSTM->hGlobal = hMem; 
            pSTM->tymed = TYMED_HGLOBAL; 
            pSTM->pUnkForRelease = NULL; 
            m_uFmtUsed = uFormat; 
            return S_OK; 
    } 

.... 
..... 
.... 
    return DV_E_FORMATETC; 
} 

QueryGetData(LPFORMATETC pFE )
{
UINT uFormat = pFE->cfFormat;
BOOL bRet = FALSE;
if (uFormat == m_fe[0].cfFormat)            // filegroupdescriptor
{
bRet = (BOOL)(pFE->tymed & TYMED_HGLOBAL);
 }
else if (uFormat == m_fe[1].cfFormat)       // filecontents
{
    bRet = (BOOL)(pFE->tymed & TYMED_HGLOBAL);
}
else 
bRet = false; 

 ----
 ----
return (bRet ? S_OK : DV_E_FORMATETC);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:50:57.670

要调试它，请在调试器中运行它并在此行上设置一个断点：

```
// FILEDESCRIPTOR format  
if (uFormat == m_fe[0].cfFormat) 
```

然后一步步过去。

**笔记：**

如果它之前被调用了两次，一次使用 CFSTR_FILEDESCRIPTOR，然后再次使用 CFSTR_FILECONTENTS，这意味着它第一次失败，可能是因为您不支持所需的`TYMED`. 然后它再次尝试使用 CFSTR_FILECONTENTS。

我怀疑 CFSTR_FILEDESCRIPTOR 从来没有工作过，Outlook 在第一次失败后根本不再尝试第二种格式。

*   *您是否指定了一个您不支持的 TYMED 来响应`QueryGetData`或`EnumFORMATETC`？*

如果是这样，Outlook 可能会要求在 IStream 中输入 FILEGROUPDESCRIPTOR，当您返回错误时，它只是放弃了。

# asp.net-mvc-3 - 通过 JQuery UI 选项卡进行 ASP.NET MVC 3 导航

> ID：11101371
> 
> 赞同：2
> 
> 时间：2012-06-19T12:53:22.537
> 
> 标签：asp.net-mvc-3, jquery-ui, navigation, jquery-ui-tabs

是否可以使用 jquery ui 选项卡而不是 asp.net mvc 3 项目中的标准选项卡来实现导航？标签与本网站上的非常相似（问题、标签、用户...）。有什么例子可以做到这一点吗？

这是我的实现。

1）我创建了带有剃刀视图引擎的标准 MVC 3 项目。布局页面中的菜单如下所示。

```
<div id="menucontainer">
    <ul id="menu">
        <li>@Html.ActionLink("Home", "Index", "Home", null, new { title="Index"})</li>
        <li>@Html.ActionLink("About", "About", "Home", null, new { title="About"})</li>
    </ul>
</div> 
```

2) 这是我的 HomeController 操作。

```
public PartialViewResult Index()
{
    ViewBag.Message = "Welcome to ASP.NET MVC!";
    return PartialView();
}

public PartialViewResult About()
{
    return PartialView();
}

public ViewResult Default()
{
    return View();
} 
```

3) 我还更改了 Global.asax.cs 以显示默认页面。

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Default", id = UrlParameter.Optional } // Parameter defaults
    );

} 
```

4）最后这是我应用标签行为的脚本。

```
$(document).ready(function() {
$('#menucontainer').tabs();
$("menucontainer").bind('tabsselect',
    function(event, ui) {
        document.title = ui.tab.title;
    }
);}); 
```

所以 jQuery ui 只是为页面的每个选项卡添加额外的 div（在本例中为 2），然后 div#main 附加。我只想在用户转到菜单栏中的其他选项卡后动态替换 div#main 的内容。现在看起来像这样。

```
<div id="menucontainer">
    ...
    <div id="Index">
        Content of Index tab.
    </div>
    <div id="About">
        Content of About tab.
    </div>
</div>
<div id="main">
    Content of the page.
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:40:22.933

确保您已定义`ui-tabs-hide`CSS 类以隐藏非活动选项卡：

```
.ui-tabs-hide {
    display: none;
} 
```

jQuery UI 选项卡的工作方式是，在更改选项卡后，它只需将其添加`ui-tabs-hide`到所有其他选项卡，并在从 AJAX 调用刷新其内容后将其从当前可见选项卡中删除。

# javascript - Twitter Bootstrap 模态背景不会覆盖 iPad 上的整个屏幕

> ID：11101372
> 
> 赞同：4
> 
> 时间：2012-06-19T12:53:28.963
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog

我正在使用 Twitter Bootstrap 包中的模态组件。此模式通过单击按钮打开，其内容通过 Ajax 调用动态加载。以上所有功能在 PC（FF、Chrome）和 iPad（Safari）上都可以正常工作。但是，在 iPad 上，如果在单击按钮之前屏幕向下滚动一点，则模式的背景将仅覆盖屏幕的一部分（取决于屏幕向下滚动的程度）。如果页面完全滚动，背景会跳转到正确的位置（覆盖模式后面的整个屏幕）。

感谢您对此的任何帮助，因为它看起来很丑陋，背景仅部分覆盖了屏幕。

**不**影响它的事情：

*   “淡化”类
*   模态代码在 DOM 中的定位。
*   通过 Javascript 手动滚动页面

下面我将包括一些被剥离的代码（内部控制和为了简洁而删除的）。

模态：

```
<div id="tehtavaModal" class="modal hide fade">
    <div class="modal-header">
        <a class="close" data-dismiss="modal" href="#">&times;</a>
        <h3 id="tehtavaModalOtsikko"></h3>
    </div>
    <div class="modal-body">
        <div id="tehtavaModalSisalto"></div>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Sulje</a>
        <a href="#" class="btn btn-primary" data-dismiss="modal">Tallenna Vastaukset</a>
    </div>
</div> 
```

打开模态的函数：

```
function haeTehtava(tehtavaID) {
    $('#tehtavaModalOtsikko').html('Tehtävä');
    $('#tehtavaModalSisalto').html('<p>Tehtävää haetaan...</p>');
    $('#tehtavaModalKysymykset').html('');
    $('#myCarousel').hide();

    $.getJSON("Sivu/HaeTapahtuma", { 'tyyppi': 4, 'ID': tehtavaID }, naytaTehtava)
        .error(function () { $('#tehtavaModalSisalto').html('<div class="alert alert-error">Tehtävän haussa tapahtui virhe.</div>'); });
    $('#tehtavaModal').modal();
} 
```

回调函数 (naytaTehtava) 只是填充模态的一些内部部分。

调用函数的链接：

```
<a href="#" onClick="haeTehtava(1);">Open Modal</a> 
```

Twitter Bootstrap 页面上给出的示例有效，所以我想知道我可能会做些什么不同的事情？

**编辑：**附加说明，如果使用 data- 属性打开模式，它可以正常工作。该问题仅在通过脚本打开模式时显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T06:40:55.760

原来我在寻找问题的深度太深了。打开模式的链接需要有一个 href="#myModal" 以将屏幕设置为模式。我只有一个 href="#" 显然摆脱了 Twitter Bootstrap 模式，因为它正在滚动到页面顶部（并且模式位于滚动位置。

错误的方法

```
<a href="#" onClick="$('#myModal').modal();">Open Modal</a> 
```

正确的方法

```
<a href="#myModal" onClick="$('#myModal').modal();">Open Modal</a> 
```

或者

```
<a href="" onClick="$('#myModal').modal(); return false;">Open Modal</a> 
```

感谢@baptme，因为转到 jsFiddle 让我意识到页面滚动的原因。

# c# - C# - 使用常用技术删除字符之间的空格不起作用

> ID：11101374
> 
> 赞同：3
> 
> 时间：2012-06-19T12:53:34.843
> 
> 标签：c#, xpath, whitespace

我有一个问题，这似乎是一个真正的问题。我正在使用[HTMLAgilityPack](http://html-agility-pack.net)来读取 HTML 页面并使用 XPath 来选择我需要的几个元素。这工作正常。

使用 XPATH，我还试图选择这个 DIV 的数字（441676）。

```
<div class="info">
       Money:
       441 676,-<br>        
</div> 
```

我设法选择了数字，并使用这种奇妙的方法对其进行了修剪： [Fastest way to remove white spaces in string](https://stackoverflow.com/questions/5203607/fastest-way-to-remove-white-spaces-in-string?lq=1)

但无论我做什么，441 和 676 之间的空白都不会消失。修剪其他地方的空白就可以了。它仅在数字之间不起作用。有人知道我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:07:33.617

在我看来，您正在处理一个不间断的空间。使用您链接到的方法，我有两个建议给您。

首先是更新您的`toExclude`数组以包含以下字符：

`var str = s.ExceptChars(new[] { ' ', '\t', '\n', '\r',`**`'\u00A0'`**`});`

注意：您可能应该将数组移动到静态全局变量，因为它永远不会改变，而且您不希望每次调用此函数时都重新分配它。

另一种选择是更新您的`ExceptChars`函数以使用[Char.IsWhiteSpace](http://msdn.microsoft.com/en-us/library/t809ektx)函数，如下所示：

```
public static string ExceptChars(this string str, IEnumerable<char> toExclude) 
{ 
    StringBuilder sb = new StringBuilder(); 
    for (int i = 0; i < str.Length; i++) 
    { 
        char c = str[i]; 
        if (!Char.IsWhiteSpace(c))
            sb.Append(c); 
    } 
    return sb.ToString(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:09:20.687

好吧，我就是这样解决的。以最快的方式使用 exceptChars 方法 [删除字符串中的空格，](https://stackoverflow.com/questions/5203607/fastest-way-to-remove-white-spaces-in-string?lq=1) 我将其修改为“AllowChars”方法，该方法只保留给定的字符。像这样：

```
public static string AllowedChars(string str, IEnumerable<char> toInclude)
{
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < str.Length; i++)
        {
            char c = str[i];
            if (toInclude.Contains(c))
                sb.Append(c);
        }
        return sb.ToString();
    } 
```

然后使用这样的方法：

```
string money_fixed =  AllowedChars(money, new HashSet<char>(new[] {'1','2', '3', '4', '5', '6', '7', '8', '9', '0' })); 
```

# php - EasyPHP 5.3.9，没有可用的 PHP 扩展

> ID：11101376
> 
> 赞同：0
> 
> 时间：2012-06-19T12:53:45.437
> 
> 标签：php, configuration, php-extension, easyphp

尽管在 Internet 或 easyPHP 网站上进行了大量搜索，但我还是无法解决这个问题。

我刚刚安装了 EasyPHP 5.3.9，之前在 EasyPHP 5.3.8 上运行过。当然，缺少一些 PHP 扩展，但是当我尝试启用它们时（EasyPHP > PHP 扩展 > ..），可用扩展列表为 EMPTY ！

我仍然安装了 5.3.8，它显示了我可以选择的可用扩展...

![缺少easyPHP扩展](../Images/bd43387ae06ac5c657bee89ac3918f9c.png)

这是一个错误还是有人已经遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:08:33.947

好的，经过一些盲测，我找到了一个（非常肯定的非 ACEDEMIC 解决方案）！

比较 5.3.8 和 5.3.9 的安装文件，我注意到我在 3.9 中有一个名为“php539x120619095337”的文件夹，而不仅仅是 3.8 中的“php”（顺便说一下，里面是 /ext 文件夹中的扩展名）。

我只是将这个奇怪文件夹的内容复制到 EasyPHP 5.3.9/php 文件夹中。

摘要：C:\Program Files (x86)\EasyPHP-5.3.9\php\php539x120619095337 > 内容移至 C:\Program Files (x86)\EasyPHP-5.3.9\php

它起作用了……奇怪……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T16:04:14.960

Usando un VPS la manera mas facil de recompilar PHP

[http://www.lkperu.com/2014/01/29/tutoriales-compilar-php-con-easyphp-en-un-vps/](http://www.lkperu.com/2014/01/29/tutoriales-compilar-php-con-easyphp-en-un-vps/)

# javascript - 三.js继承模式

> ID：11101378
> 
> 赞同：6
> 
> 时间：2012-06-19T12:53:52.503
> 
> 标签：javascript, design-patterns, three.js

我想知道为什么three.js代码的结构是这样的：

```
THREE.Camera = function(){
    THREE.Object3D.call(this);
    //add more Camera specific properties and methods
}

THREE.Camera.prototype = new THREE.Object3D();
THREE.Camera.prototype.constructor = THREE.Camera;

THREE.Camera.prototype.//add more camera specific methods... 
```

我想知道他们为什么在当前构造函数和原型中调用基本构造函数？

在 MDN 中，他们展示了这样的模式：

```
subType = function(){
    //new properties for subType
}

subType.prototype = new baseType(); 
```

他们没有在 subType 构造函数中调用基本构造函数，那么为什么 THREE.js 会这样做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T12:59:10.183

Since each `THREE.Object3D` instance inherits from `THREE.Object3D.prototype`, by setting `THREE.Camera.prototype` this way, each `THREE.Camera` instance will also inherit from `THREE.Object3D.prototype`.

If you don't do this, `THREE.Camera` instances won't inherit any properties assigned to `THREE.Object3D.prototype`.

So, both parts are important:

*   By setting `THREE.Camera.prototype` appropriately, new instances will inherit from `THREE.Object3D.prototype` and these properties are *shared* by all instances.

*   By calling the "parent" constructor function you are initializing each instance with *instance-specific* data.

* * *

That said, setting the prototype like this is not the best approach. What if `THREE.Object3D` expects arguments without which the constructor would not work?

A better approach is to create an empty object which inherits from `THREE.Object3D.prototype`, since this is all you need:

```
THREE.Camera.prototype = Object.create(THREE.Object3D.prototype);
THREE.Camera.prototype.constructor = THREE.Camera; 
```

**Reference:** [`Object.create`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create)

# mysql - 从模式中删除一对多关系

> ID：11101380
> 
> 赞同：3
> 
> 时间：2012-06-19T12:54:04.033
> 
> 标签：mysql, sql, postgresql

我们目前在 MySQL 数据库中有两个需要连接的大表（表 A 与表 B 具有一对多关系），出于性能原因，我们希望删除此连接。

是否有一种明智的方法来获取表 B 中的行并将它们表示在表 A 的一列（或多列）中？我们已经研究过使用复合数据类型的数组，但似乎没有一个好的方法来索引这些数据，或者有效地查询它。

我们目前正在使用 MySQL，但正在考虑迁移到 Postgres。不过，我们肯定会考虑任何可以为我们解决这个问题的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:59:55.700

Consider using a intermediate *view*, it will speed up the process.

if [A]-1---n-[B], you can also set a foreign key to A into B, then AxB cartesian product no longer needed

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:14:58.127

选项将是在应用层获取相关数据。即首先从表一中获取一行，然后在第二个查询中从第二个表中获取相关行。尝试评估两种代码的性能。那是一个查询和两个查询。

不过，正如评论部分所述。尝试在连接列上添加索引。尝试使用 where 条件来限制数据。最重要的是尝试限制作为输出所需的行数的结果集。使用限制将减少获取额外行所需的时间。

# html - 所有现代浏览器都支持自定义/任意 HTML 标签。有什么理由不使用它们吗？

> ID：11101389
> 
> 赞同：2
> 
> 时间：2012-06-19T12:54:23.767
> 
> 标签：html

我注意到 IE9、Firefox 和 Chrome 都允许您使用任意 html 标签并使用 CSS 设置这些标签的样式。

这是我用来测试的示例 HTML 文件，它*适用*于所有现代浏览器：

```
<html>
    <head>
        <title>Test</title>
        <style>
            h3 { font-family: Arial; }
            animals { padding: 20px; display: block; background-color: #eee; }
            dog { background-color: brown; color: white; display: block; padding: 10px; }
        </style>
    </head>
    <body>
        <animals>
            <dog>
                <h3>Dog</h3>
            </dog>
            <cat>
                <h3>Cat</h3>
            </cat>
            <giraffe>
                <h3>Giraffe</h3>
            </giraffe>
        </animals>
    </body>
</html> 
```

除了向后兼容性之外，如果现代浏览器支持自定义标签，为什么我不应该使用它们（结合现有的官方标签规范）使我的标记在语义上与内容、应用程序元素等更相关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:56:44.813

如果您坚持已建立的 HTML5 标签，您的页面将更好地与浏览器以外的其他工具一起使用，尤其是屏幕阅读器。唯一能理解你的新语义的程序就是你的程序，你也可以编写你的程序来理解`<ul class='animals'>`。

当人们在 HTML 中争论“更好的语义”时，他们的意思是“选择最能代表含义的标签”，通常不是表格。他们并不是说，“发明一个只有你才能理解的标签”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:01:35.240

我仍然收到一些网站在*IE6*上中断的错误报告。虽然 IE9 是朝着正确方向迈出的一步，但 IE 用户传统上拥有巨大的发展势头，而且旧版本在本应被埋没几十年后才被使用。

您可能需要记住的另一个问题是*前向*兼容性。未来的标准可能会为您以通用方式使用的标签引入不需要的行为。

然后是一些人对所有代码都通过各种验证的永恒愿望，这当然是不可能的，除非您实际使用 XHTML 并注意让您的标记实际验证为 XML...

# button - Sencha Touch：动态按钮背景

> ID：11101390
> 
> 赞同：0
> 
> 时间：2012-06-19T12:54:23.617
> 
> 标签：button, touch, extjs, dataview

我们使用 DataView 来显示一系列按钮。数据来自商店，其中的每个模型都包含按钮的背景颜色。我可以更改按钮的文本，但如何根据模型中的值更改背景颜色？

这是 ButtonData 模型：

```
Ext.define('Sencha.model.ButtonData', {
extend: 'Ext.data.Model',

config: {
    fields: [
         {name: 'text', type: 'auto'},
         {name: 'color', type: 'auto'}
           ]
       }
}); 
```

基于此示例[http://www.sencha.com/blog/dive-into-dataview-with-sencha-touch-2-beta-2](http://www.sencha.com/blog/dive-into-dataview-with-sencha-touch-2-beta-2) 我有一个具有此配置的 DataItem：

```
config : {  
      dataMap: {  
          getButton : { setText: 'text'}, // works!

 //problem is here: how do I set the background color based on the 'color' 
 // member form the 'ButtonData' model? 
                 },

    button: { 
      ui: 'plain' 
        } 
```

}

那么问题是如何根据 'ButtonData' 模型中的 'color' 成员设置背景颜色？

谢谢，

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:19:59.730

您在按钮小部件中没有颜色属性，因为按钮的颜色是一种组合效果，包括去饱和、变暗、渐变......所以您不能只在一个地方简单地更改颜色。

推荐的选项是创建您自己的主题（从标准主题开始），然后为按钮创建不同的主题 UI。这可以通过在您的主题中添加这样的行来完成：

```
// you can add as many as you want.
@include sencha-button-ui('color1', #FF0000, 'glossy');
@include sencha-button-ui('color2', #00FF00, 'glossy'); 
```

在 sencha-touch 主题的主题/样式表/sencha-touch/default/widgets/_buttons.scss 文件中查看更多选项。

然后，您可以根据您的模型更改按钮上的 ui 属性。此链接可能有助于启动和运行您自己的主题：

[http://www.sencha.com/blog/getting-sassy-with-css](http://www.sencha.com/blog/getting-sassy-with-css)

使用您自己的主题的其他优点是更容易触摸 css，您可以优化 css 文件的大小，删除不需要的部分等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:13:55.007

尝试类似的东西

```
config : {  
  dataMap: {  
      getButton : { 
         setText: 'text',
         setButton: {}
      }
  }
} 
```

然后在数据视图中使用的组件中实现 setButton 函数。您还可以考虑在其中拥有一个功能并完成所有工作。

# spring-mvc - 如何在spring mvc 3.0中的同一jsp中显示运行时错误消息或sql错误消息

> ID：11101393
> 
> 赞同：0
> 
> 时间：2012-06-19T12:54:28.937
> 
> 标签：spring-mvc

```
当 catch 块中发生任何异常时，我们如何在同一个 jsp 中显示错误消息，即employee.jsp 以及 jsp 应该是什么样子？
在控制台中收到此错误消息；此错误的含义是什么？
错误：org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver - 无法调用@ExceptionHandler 方法：public org.springframework.web.servlet.ModelAndView com.kesava.tutorial.controller.HomeController.addEmployee(com.kesava .tutorial.dto.EmployeeDTO,org.springframework.validation.BindingResult) 抛出 com.kesava.tutorial.util.SpringUtilException
java.lang.IllegalStateException：参数 [0] [type=com.kesava.tutorial.dto.EmployeeDTO] 没有合适的解析器
@RequestMapping(value = "/addEmployee", method = RequestMethod.POST)
    @ExceptionHandler({ SpringUtilException.class })
    public ModelAndView addEmployee(@Valid EmployeeDTO employeeDTO,
            BindingResult 结果）抛出 SpringUtilException {
        ModelAndView mav = new ModelAndView("employee");
        if (result.hasErrors()) {
            列出员工 = employeeDao.getAllEmployees();
            return new ModelAndView("employee", "employeeList", employees);
        } 别的 {
            BeanUtils.copyProperties(employeeDTO, employees);
            System.out.println("添加员工员工！" + 员工);
            尝试 {
                employeeDao.persist(员工);
            } 捕捉（EntityExistsException e）{
                throw new SpringUtilException(e, "Employee Duplicate");
            } 捕捉（异常前）{
                throw new SpringUtilException(ex, "Failed to add Employee");
            }
            // 插入后显示员工
            列出employees1 = employeeDao.getAllEmployees();

            mav.addObject("isDataSaved" , "数据保存成功");
            mav.addObject("employeeList" , employees1);

            返回mav；

        }
        }

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:24:09.963

如果您想查看 JSP 输出中的错误，请不要使用 System.out.println。相反，将异常堆栈跟踪添加到您在 JSP 中打印出来的模型对象。

就像是：

```
try { 
   employeeDao.persist(employees); 
} 
catch (EntityExistsException e) { 
   model.addAttribute("error", e.getMessage()); 
} 
```

这样您就可以在 JSP 中看到异常并打印它。您可以通过属性键访问它，如下所示： `${error}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-04T05:25:01.020

你调试了代码。什么错误意味着spring无法调用控制器中的方法，它由于绑定而失败。

1.仔细阅读它说非法状态异常，异常处理程序无法处理，因为您只处理 SpringUtilException

2.其次没有合适的参数解析器检查您的httprequest并验证所有参数是否正确传递映射失败通常在大多数情况下会是日期格式不匹配或数据类型不匹配

# android - Phonegap eclipse，apk导出并安装到手机后计算机立即蓝屏

> ID：11101397
> 
> 赞同：1
> 
> 时间：2012-06-19T12:54:50.150
> 
> 标签：android, windows, eclipse, cordova

看看是否有其他人遇到过这种情况，即在运行应用程序以在连接的手机上进行调试后，计算机将立即崩溃并蓝屏。

它确实显示为代码已成功导出为 .apk 格式并安装到手机上，此时出现蓝屏。

我正在制作的应用程序使用了两个 javascript 脚本。

补充一点，将应用程序运行到模拟器时，它会顺利运行。

有人经历过这样的事情吗？

# jquery - Google Maps v3 jQuery 插件 - 更改信息窗口样式

> ID：11101400
> 
> 赞同：0
> 
> 时间：2012-06-19T12:54:55.377
> 
> 标签：jquery, google-maps

我在使用谷歌地图 v3 时遇到了一些重大问题。我用这种方法在我的地图上添加了一些标记：http: [//jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-json.html](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-json.html)

现在这是一个不错的方法，但我无法对信息窗口执行任何其他操作或向标记添加标签。你知道这种实现谷歌地图的方法有什么解决方案吗？

谢谢！

# java - 套接字异常：Weblogic

> ID：11101404
> 
> 赞同：1
> 
> 时间：2012-06-19T12:55:09.530
> 
> 标签：java, weblogic

'在尝试从 weblogic server 10.3 查询页面时出现以下异常。请帮我解决这个问题。

```
java.net.SocketException: socket write error: Connection reset by peer.
at jrockit.net.SocketNativeIO.writeBytesPinned(Native Method)
at jrockit.net.SocketNativeIO.socketWrite(SocketNativeIO.java:46)
at java.net.SocketOutputStream.socketWrite0(SocketOutputStream.java)
at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
at weblogic.utils.io.ChunkedOutputStream.writeTo(ChunkedOutputStream.java:284)
at weblogic.servlet.internal.ServletOutputStreamImpl.writeHeader(ServletOutputStreamImpl.java:167)
at weblogic.servlet.internal.ResponseHeaders.writeHeaders(ResponseHeaders.java:444)
at weblogic.servlet.internal.ServletResponseImpl.writeHeaders(ServletResponseImpl.java:1288)
at weblogic.servlet.internal.ServletOutputStreamImpl.sendHeaders(ServletOutputStreamImpl.java:281)
at weblogic.servlet.internal.ChunkOutput.flush(ChunkOutput.java:424)
at weblogic.servlet.internal.CharsetChunkOutput.flush(CharsetChunkOutput.java:298)
at weblogic.servlet.internal.ChunkOutput$2.checkForFlush(ChunkOutput.java:648)
at weblogic.servlet.internal.CharsetChunkOutput.write(CharsetChunkOutput.java:200)
at weblogic.servlet.internal.ChunkOutputWrapper.write(ChunkOutputWrapper.java:148)
at weblogic.servlet.jsp.JspWriterImpl.write(JspWriterImpl.java:275) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T04:33:44.287

这是相关的超时问题。您可以通过以下方式增加超时

完成消息超时：最大值：480

最大消息大小： 最小值： 4096 最大值： 2000000000 安全值： 10000000

这些可在以下位置获得：服务器 >>>>> AdminServer >>> 协议>>> 常规。

如果您的应用程序使用 weblogic 使用的相同 java 版本编译，那会更好。

如果您不刷新缓冲区，则可能会发生这种情况。获取读/写流并使用缓冲区控制它们。您甚至可以尝试增加 jsp 缓冲区大小。您可以通过将服务器切换到 Sun JDK 来检查是否有同样的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-20T18:38:22.970

如前所述，发生此错误的原因有很多。我只是给你一些关于故障排除的提示。首先，有几种使用 Weblogic 架构的日志。这当然可能是超时问题，但也可能是许多其他原因。要进行调试，了解 Weblogic 架构、配置和环境非常重要。首先，重要的是确定哪个层引发了根本原因错误。

此特定日志似乎是 Weblogic 服务器日志（在到达应用程序之前抛出）。我的下一步将转到您的 application.log 以查看它是否产生任何错误。这将排除您的应用程序层。如果不存在日志，则通过应用程序配置或 Web 控制台创建应用程序日志。接下来，如果没有相应的错误，那么是时候对您的 webtier 进行故障排除了。

Webtier 是 Apache、Http 服务器或代理。有时，当证书信任等不一致时，这些可能会引发错误。钱包和密钥库。

如果您使用的是 nodemanager，那也可能是一个故障点。

以我的经验，当应用层出现问题、数据库连接、网络断开（用户客户端层）错误的部署、长时间运行的查询或错误配置的证书或端口时，就会发生这种情况。最后，如果这种情况不规律地发生，那么根据我的经验，这也是正常的，但应该查看性能/负载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-04T08:17:14.103

客户端正在关闭与服务器的连接，因此 Weblogic 无法完全写回回复。

如果此错误是随机发生的，则可能是由于在客户端处理响应时出现异常。

如果您有很多客户端，可能有一些用户在接收到服务器的响应时突然断开连接（例如客户端机器拔掉电源、程序崩溃等）。

此错误非常普遍，可能有多个根本原因。

BR

# regex - 正则表达式中的反向引用如何使回溯成为必需的？

> ID：11101405
> 
> 赞同：21
> 
> 时间：2012-06-19T12:55:13.487
> 
> 标签：regex, computer-science, complexity-theory, time-complexity, backreference

我阅读了[http://swtch.com/~rsc/regexp/regexp1.html](http://swtch.com/~rsc/regexp/regexp1.html)并且作者在其中说，为了在正则表达式中有反向引用，匹配时需要回溯，这使得最坏情况的复杂性呈指数级增长。但我不明白为什么反向引用引入了回溯的需要。有人可以解释为什么，也许可以提供一个例子（正则表达式和输入）？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-29T02:05:51.320

要直接解决您的问题，您应该对[Chomsky Hierarchy](http://en.wikipedia.org/wiki/Chomsky_hierarchy)做一个简短的研究。这是一种以越来越复杂的方式组织形式语言的古老而美丽的方式。层次结构的最低级别是常规语言。你可能会猜到——而且你是对的——RL 正是那些可以用“纯”正则表达式表示的：那些只有字母表、空字符串、连接、交替 | 和 Kleene 星 *（看 Ma，没有反向引用）。形式语言理论的一个经典定理 - Kleene 定理 - 是 DFA、NFA（如您引用的文章中所述）和正则表达式都*具有*表示和识别语言的相同能力。文章中给出的 Thompson 构造是该定理证明的一部分。

每个 RL 也是一个 CFL。但是有无数个不规则的 CFL。CFL 中可能存在的一个使它们过于复杂而无法成为规则的特性是平衡的事物对：括号、开始-结束块等。几乎所有的编程语言都是 CFL。CFL 可以被所谓的*下推自动机有效识别，这本质上是一个带有**堆栈* 的 NFA 。堆栈增长到所需的大小，因此它不再是有限自动机。真实编程语言的解析器几乎都是下推自动机的变体。

考虑带有反向引用的正则表达式

```
^(b*a)\1$ 
```

换句话说，这表示一些 n 的长度为 2n 的字符串，其中第 n 个和第 2n 个字符都是`a`，所有其他字符都是`b`。这是一个不规则的 CFL 的完美示例。您可以使用另一种很酷的形式语言工具（称为抽水引理）来严格证明这一点。

这正是反向引用导致问题的原因！它们允许表示非正则语言的“正则表达式”。因此，没有 NFA 或 DFA 可以识别它们。

但是等等，它比我到目前为止所做的还要糟糕。考虑

```
^(b*a)\1\1$ 
```

我们现在有一个长度为 3n 的字符串，其中第 n 个、第 2n 个和第 3n 个元素是`a`，所有其他元素都是`b`。抽水引理还有另一种风格，它可以证明这种语言甚至过于复杂而不能成为 CFL！没有下推自动机可以识别这个。

反向引用允许这些增压的正则表达式代表乔姆斯基层次结构中的三个梯级的语言：上下文敏感语言。粗略地说，识别 CSL 的唯一方法是检查长度相等的语言中的所有字符串（至少如果 P!=NP，但对于所有实际目的和完全不同的故事都是如此）。此类字符串的数量与您匹配的字符串的长度呈指数关系。

这就是需要搜索正则表达式匹配器的原因。您可以非常聪明地设计搜索。但是总会有一些输入导致它花费指数级的时间。

所以我同意你引用的论文的作者。可以编写看起来完全无辜的正则表达式，**没有反向引用**，几乎所有输入都可以有效识别，但是存在一些输入会导致 Perl 或 Java 或 Python 正则表达式匹配器 - 因为它是回溯搜索 - 需要数百万年才能完成比赛。这太疯狂了。您可以拥有一个正确且可以正常运行多年的脚本，然后仅仅因为偶然发现其中一个错误输入而锁定了一天。假设正则表达式隐藏在您乘坐的飞机的导航系统的消息解析器中......

**编辑**

根据要求，我将概述如何使用 Pumping 引理来证明语言`a^k b a^k b`不规则。这`a^k`是`a`重复`k`次数的简写。PL 说必须存在一个正整数 N，使得长度至少为 N 的常规语言中的每个字符串必须是 RST 形式，使得 RS^k T 也适用于所有自然 k 的语言。这里`R`, `S`,`T`是字符串，`S`不能为空。

PL 的证明取决于每个常规语言对应于某个 DFA 的事实。此 DFA 接受的输入长于其状态数（等于引理中的 L）*必须*使其“循环：”以重复一个状态。将此状态称为 X。机器消耗一些字符串 R 从开始到 X，然后 S 循环回到 X，然后 T 进入接受状态。好吧，在输入中添加额外的 S 副本（或删除 S）仅对应于从 X 回到 X 的不同数量的“循环”。因此，带有额外（或删除）S 副本的新字符串也将被接受.

由于*每个*RL 都必须满足 PL，因此通过证明它与 PL 相矛盾来证明一种语言不是正则的。对于我们的语言来说，这并不难。假设您试图让我相信语言 L =`a^k b a^k b`满足 PL。因为它这样做了，所以你必须能够给我一些 N 的值（见上文）：假设 DFA 中识别 L 的状态数。在这一点上，我会说，“好吧，普通人先生，考虑字符串 B= `a^N b a^N b`。” 如果 L 是正则的，则 B 必须使这个 DFA（不管它看起来像什么）在前 N 个字符内循环，这必须全`a`是 s！所以循环（上面的字符串 S）由所有`a`s，也。有了这个，我可以立即证明你关于 L 是常规的说法是错误的。我只是选择第二次绕过循环。这将导致您的这个假设的 DFA 接受一个新的 string `a^M b a^N b`，其中 M>N 因为我将`a`s 添加到它的前半部分。哎哟! 这个新字符串不在 L 中，所以 PL 毕竟不是真的。因为无论你提供什么 N，我每次都可以做这个技巧，所以 PL 不能适用于 L，而且 L 也不能是正则的。

由于它不是正则的，Kleene 定理告诉我们没有 DFA 或 FA 或“纯”正则表达式来描述它。

back refs 允许甚至不是上下文无关的语言的证明有一个非常相似的环，但需要关于下推自动机的背景，我不会在这里给出。谷歌会提供。

注意：这两个都不足以证明后备裁判使识别 NP 完成。他们只是以非常严格的方式说后向引用为纯正则表达式增加了真正的复杂性。它们允许任何具有有限内存的机器都无法识别的语言，或者任何只有无限大的 LIFO 内存的机器都无法识别的语言。我会将NP完整性证明留给其他人。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-19T23:32:23.310

NFA 和 DFA 是[有限自动机](http://en.wikipedia.org/wiki/Finite_state_machine)，也称为有限状态机，它们是*“可以处于有限数量状态之一的抽象机器”* [[1]](http://en.wikipedia.org/wiki/Finite_state_machine)。注意*有限*数量的状态。

[链接文章“正则表达式匹配可以简单且快速](http://swtch.com/~rsc/regexp/regexp1.html)”中讨论的快速 NFA/DFA 算法速度很快，因为它们可以处理*有限*数量的状态（与输入长度无关），如文章中所述。

引入反向引用使状态的数量（几乎）“无限”（在最坏的情况下约为 256 ^(*n*)，其中*n*是输入的长度）。状态的数量增加了，因为每个反向引用的每个可能值都变成了自动机的状态。

因此，使用有限状态机不再合适/不可能，而必须使用回溯算法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T15:03:02.973

本教程中有一些很好的例子：
[http ://www.regular-expressions.info/brackets.html](http://www.regular-expressions.info/brackets.html)

您将感兴趣的特定情况显示在**“回溯到捕获组”**中- 它解释了如何在找到与整个正则表达式匹配的最后一个匹配之前多次放弃整个匹配。此外，值得注意的是，这可能会导致意外匹配。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T21:00:20.963

非常有趣的文档：[Extending Finite Automata to Efficiently Match Perl-Compatible Regular Expressions](http://www.arl.wustl.edu/~pcrowley/a25-becchi.pdf)，支持反向引用并使用修改后的 NFA 有效地计算出现次数。

# winforms - 字符串未被识别为有效的日期时间

> ID：11101406
> 
> 赞同：0
> 
> 时间：2012-06-19T12:55:17.963
> 
> 标签：winforms, visual-studio-2010, c#-4.0

尝试将字符串解析为日期时间时出现错误。我试过这个：

```
string x = "31/5/2012";   
DateTime d = DateTime.ParseExact(x, "dd'/'MM'/'yyyy", new CultureInfo("en-US")); 
```

和

```
string x = "31/5/2012";
DateTime d = DateTime.ParseExact(x, "dd/MM/yyyy", new CultureInfo("en-US")); 
```

和

```
string x = "31/5/2012";  
DateTime d = DateTime.ParseExact(x, "dd/MM/yyyy", cultureinfo.invariantculture)); 
```

但我仍然遇到同样的错误。

我需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:59:20.070

```
DateTime d = DateTime.ParseExact(x, "dd/M/yyyy", new CultureInfo("en-US")); 
```

`5`由于您的字符串日期没有月份`05`，请使用 single`M`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:00:30.097

```
 string x = "31/5/2012";

        DateTime d = DateTime.ParseExact(x, "dd/M/yyyy", new CultureInfo("en-US")); 
```

# javascript - 将 url 从 html 传递给 javascript

> ID：11101409
> 
> 赞同：3
> 
> 时间：2012-06-19T12:55:21.927
> 
> 标签：javascript, html, view

在我的页面上有一个部分，我想在其中提取各种 RSS 提要。

我不想使用 PHP 提取提要，因为我的页面将受到从每个服务器返回响应所需的时间的影响。

相反，我想做的是将 RSS 提要 URL 放在页面上，并让 Javascript 提取它们并提取内容。

解决方案的 Javascript 方面没有问题，但我找不到将 URL 从 HTML 传递到我满意的 JS 的解决方案。理想情况下，我想要类似...

```
<div>
    <param name="url" value="/url/of/some/feed">
    <param name="url" value="/url/of/some/other/feed">
</div> 
```

但我意识到这是无效的。

有人有什么好的解决方案吗？（ps.我不想在我的视图文件中写JS）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T12:58:53.257

使用`data`属性，然后你可以使用这样的东西：

```
<div>
    <span class="rss" data-url="/url/of/some/feed"></span>
    <span class="rss" data-url="/url/of/some/other/feed"></span>
</div> 
```

然后你可以用一个类循环 DOM 元素`rss`并获取`data-url`每个元素的属性 -`span`可以是任何 HTML 元素

[很好的解释数据属性here](http://html5doctor.com/html5-custom-data-attributes/)

关于自定义属性的官方 HTML5 文档在[这里](http://dev.w3.org/html5/spec/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)- 但它们可以在任何 HTML 版本的任何浏览器中使用 - 使用该`getAttribute()`方法

# windows - 是否可以在没有路由器的 PC 之间进行 TCP/IP

> ID：11101416
> 
> 赞同：0
> 
> 时间：2012-06-19T12:55:39.433
> 
> 标签：windows, networking, network-programming

是否可以仅使用以太网电缆端到端连接两台没有路由器的 PC，并通过 TCP/IP 进行套接字通信？我需要一个最好在 Windows 上运行的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:00:01.487

是的 - 有两种选择：

1.  如果幸运的话，两台 PC 都将支持 Auto-MDIX 并因此自动协商，在这种情况下，您只需使用普通的 CAT5/CAT5e/CAT6 网线即可。
2.  如果不支持 Auto-MDIX，那么您可以使用[以太网交叉电缆](http://en.wikipedia.org/wiki/Ethernet_crossover_cable)在物理级别实现相同的功能。这是一条标准的 CAT5/CAT5e/CAT6 网络电缆，但 tx 和 rx 对“交叉”，因此它们在每一端都连接到正确的端子。

无论哪个适合您，您都需要在接口上配置静态 IP，两者都在同一子网上（例如，对于 255.255.255.0 的网络掩码，然后对于匹配 192.168.xy 的 IP 地址，x 应该是两台主机相同，但每台主机都有不同的 y)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:00:34.187

你当然可以！你必须...

1.  静态配置每台计算机的 IP 地址（例如 192.168.0.1 和 192.168.0.2）。
2.  将每台计算机配置为位于同一子网中（例如，都是 255.255.255.0）。
3.  购买*交叉*以太网电缆或使用集线器或交换机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T13:01:36.167

是的，您需要做的就是如果您使用有线连接将以太网 ips 配置为在同一个网络上，就像这里已经说明的那样。 [http://www.labnol.org/software/connect-computers-without-router/11049/](http://www.labnol.org/software/connect-computers-without-router/11049/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T13:00:02.553

您可以使用[交叉电缆](http://compnetworking.about.com/od/networkcables/g/bldef_crossover.htm)进行这种连接。

# c# - 棋子寻路的A星算法

> ID：11101418
> 
> 赞同：1
> 
> 时间：2012-06-19T12:55:47.027
> 
> 标签：c#, path-finding, a-star

我的 A* 算法有问题。那必须在* m板上找到最短路径。我的算法适用于国王和骑士，如下：

```
public List<Node> aStar(int[,] chessBoard , Tuple<int , int> startXY , Tuple<int , int> endXY , int piece)
{
  //Tuple<int[] , int[]> moves = getAllMoves(piece , chessBoard.GetLength(0) , chessBoard.GetLength(1));

  // This getAllMoves function on the previous row
  // returns all the possible moves in two arrays like so:

  int[] knightMovementY = { -2, -2, -1, -1, 1, 1, 2, 2 };
  int[] knightMovementX = { -1, 1, -2, 2, -2, 2, -1, 1 };
  var moves = new Tuple<int[],int[]>(knightMovementX, knightMovementY);

  List<Node> open = new List<Node>();
  List<Node> closed = new List<Node>();
  List<Node> zero = new List<Node>();
  Node currentNode = new Node(startXY);
  int newX = 0;
  int newY = 0;

  // Adding the first node to the open list
  open.Add(currentNode);

  // Checking the adjacent squares and adding them to the open list
  for (int i = 0 ; i < moves.Item1.Length ; i++)
  {
    newX = currentNode.Position.Item1 + moves.Item1[i];
    newY = currentNode.Position.Item2 + moves.Item2[i];
    if (newX >= 0 && newX < chessBoard.GetLength(0) && newY >= 0 && newY < chessBoard.GetLength(1))
    {
      if (chessBoard[newX , newY] == -1)
      {
        Tuple<int , int> newPos = new Tuple<int , int>(newX , newY);
        Node adjacentNode = new Node(newPos , currentNode , 1);
        open.Add(adjacentNode);
      }

    }
  }
  // Removing the start node from the open list and adding it to the closed list
  closed.Add(open[0]);
  open.RemoveAt(0);

  // Repeat until the open list is empty or exit with error
  while (open.Count != 0)
  {

    // Selecting the node with the lowest cost from the open list and adding it to the closed list 
    int lowest = 999;
    int lowestIndex = 0;
    for (int i = 0 ; i < open.Count() ; i++)
    {
      if (open[i].Cost < lowest)
      {
        lowest = open[i].Cost;
        lowestIndex = i;
      }
    }

    // If the target square is added to the closed list a path has been found
    closed.Add(open[lowestIndex]);
    if (open[lowestIndex].Position.Item1 == endXY.Item1 && open[lowestIndex].Position.Item2 == endXY.Item2)
    {
      return closed;
    }
    open.RemoveAt(lowestIndex);

    // Check all the adjacent squares that are not in a closed list, not blocked and fit on the game board.
    // Blocked squares have a value of -2 and open squares a value of -1
    currentNode = closed.ElementAt(closed.Count - 1);
    for (int i = 0 ; i < moves.Item1.Length ; i++)
    {
      bool isInClosed = false;
      bool isInOpened = false;
      newX = currentNode.Position.Item1 + moves.Item1[i];
      newY = currentNode.Position.Item2 + moves.Item2[i];
      if (newX >= 0 && newX < chessBoard.GetLength(0) && newY >= 0 && newY < chessBoard.GetLength(1))
      {

        if (chessBoard[newX , newY] == -1)
        {
          Tuple<int , int> newPos = new Tuple<int , int>(newX , newY);
          Node adjacentNode = new Node(newPos , currentNode , currentNode.Cost + 1);
          for (int j = 0 ; j < closed.Count ; j++)
          {
            if ((closed[j].Position.Item1 == adjacentNode.Position.Item1) && (closed[j].Position.Item2 == adjacentNode.Position.Item2))
            {
              isInClosed = true;
            }
          }
          // If a node is already in the open list and the cost of that node is larger
          // than the cost of the current node, change the parent of the node in the
          // open list to the current node
          if (isInClosed == false)
          {
            for (int x = 0 ; x < open.Count ; x++)
            {
              if ((open[x].Position.Item2 == adjacentNode.Position.Item1) && (open[x].Position.Item1 == adjacentNode.Position.Item2))
              {
                isInOpened = true;
                if (adjacentNode.Cost + 1 < open[x].Cost)
                {
                  open[x].Parent = adjacentNode;
                  open[x].Cost = adjacentNode.Cost + open[x].Cost;
                }
              }
            }
            // If a node is not in the open list, add it!
            if (isInOpened == false)
            {
              open.Add(adjacentNode);
            }
          }

        }
      }
    }
  }
  Console.WriteLine("No path found!");
  return zero;
} 
```

我非常希望它也适用于车、王后和主教。问题在于，当算法遇到值为 -2 的阻塞节点时，它会跳过它并检查下一个可用的移动。

如果我用 0 标记车可以移动到的方格，那么

```
A  B  C  D  E  F G          A B C  D E F G
x -1 -1 -2 -1 -1 y  becomes x 0 0 -2 0 0 y 
```

基本上我不知道当遇到无法跳过它们并且一次可以移动许多方格的棋子遇到障碍时该怎么办。跳过被阻挡的方块是不行的。

谢谢大家

# c - 在 C 或 LabView 中生成的 16 位灰度图像的结构

> ID：11101420
> 
> 赞同：0
> 
> 时间：2012-06-19T12:55:56.083
> 
> 标签：c, image, labview

我有一种基本（但仍未解决）的问题。我正在 LabView 中构建一个程序，在其中我将大量测量值收集到 anxm 矩阵中，我需要将该矩阵转换为要使用 ImageJ 处理/分析的图像。由于分辨率和我需要的分析类型，这必须是 16 位灰度图像。

现在，我面临的问题如下： LabView 没有（在基本包上）任何将数据转换为 16 位灰度的 VI，只有 8 位，这会扼杀我的动态范围。我已经阅读了 LabView 的 Vision 和 Image 工具箱在这个意义上可能有更多的选项，但由于与公司相关的原因，我无法访问这些工具箱（即我只能使用完整的开发人员版本）。

我现在的反应是尝试在我自己的 VI 上构建一个 16 位灰度图像，无论是使用标准 LabView 函数，完全使用 C 代码，还是两者的混合。但是，我在网上没有找到任何关于 16 位灰度的结构、需要什么数据等的足够清晰的信息。

所以，我的问题是双重的：有没有人有更好的方法来创建这个 16 位灰度图像（我跳过了一些 LabView VI，我可以调用的外部软件等）？如果没有，是否有人有详细的信息或代码对从头开始生成这样的图像有用？

任何帮助都会非常有用！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:10:34.610

安装 IMAQ 模块（不同于视觉工具箱），它是免费的并且具有基本的图像管理功能。我用它来创建 16 位灰度图像。

![创建 16 位灰度图像](../Images/8bc7819691a8f817b128f1d6ab2a845b.png)

[在此处查找 IMAQ 驱动程序](http://search.ni.com/nisearch/app/main/p/bot/no/ap/tech/lang/en/pg/1/sn/catnav:du,n13:hardwareDriver,n8:13)（截至 2012 年 6 月的 4.6.4）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:48:21.480

由于您提到 16 位灰度，我将其解释为您需要每像素 16 位精度。

因此，如果您无法直接将其创建为灰度图像，也许您可​​以将其创建为真彩色图像，并通过将它们分成例如红色和绿色分量来简单地编码您的 16 位？

因此，对于每个 16 位像素值，`x`您将设置`red = x / 256;`和。`green = x % 256;``blue = 0;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T17:21:17.947

您是否也尝试将这个问题发布到 NI 论坛？可能还有其他一些 LabVIEW 开发人员试图完成您在此处处理的相同事情。希望您不必从头开始。[https://bit.ly/NIForums](https://bit.ly/NIForums)

您是否检查过是否可以使用任何试用版的 LabVIEW 视觉工具包/插件？

如果您的公司有 SSP（付费支持选项，尽管您购买 LabVIEW 时通常会免费获得一年），我还建议您致电支持工程师。他们可以指导您克服当前的一些限制。

# c++ - 将字符串计算为 C++ 中的表达式

> ID：11101429
> 
> 赞同：2
> 
> 时间：2012-06-19T12:56:14.957
> 
> 标签：c++

在我的项目中，我需要将用户的表达式输入作为字符串，然后显示表达式的结果。我正在输入如下

```
char address[100] = {NULL};
fgets(address, 100, stdin); //take the expression as input here 
```

假设用户将表达式写为

```
address = " 1+5+9" . 
```

我需要做的是显示表达式的结果。我可以通过分隔每个数字然后进行计算来做到这一点。但我只是想知道有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:59:57.887

听起来您正在寻找与`eval`JavaScript 等价的 C++。不幸的是，C++ 没有。手动解析表达式是您能做的最好的事情。

如果您可以访问[The C++ Programming Language](https://rads.stackoverflow.com/amzn/click/com/0201889544)一书，第 6 章将介绍如何编写一个简单的计算器程序，以解决您遇到的相同问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:04:38.483

有几种方法可以做到这一点，最流行的方法之一，在我个人看来最优雅的方法是使用递归下降解析器。在网络上有很多有用的指南可以做到这一点。一个简单的谷歌搜索导致我：

*   [创建递归下降解析器](http://knuth.luther.edu/~leekent/tutorials/ll1.html)
*   [递归下降解析](http://www.cs.engr.uky.edu/~lewis/essays/compilers/rec-des.html)
*   [C++ 中的递归下降解析器](http://dmitrybrant.com/2003/08/18/recursive-descent-parser-in-c)
*   [通过递归下降解析表达式（包含一些有用的伪代码）](http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm)

还有这些 Stack Overflow 帖子：

*   [递归下降解析器问题](https://stackoverflow.com/questions/5436819/recursive-descent-parser-questions)
*   [递归下降解析器](https://stackoverflow.com/questions/8767965/recursive-descent-parser)

简单地将数字分开然后进行计算的问题是当您允许乘法时出现的问题，并且通常需要考虑运算符的顺序。

# java - 检查 Struts 存在运行时

> ID：11101430
> 
> 赞同：2
> 
> 时间：2012-06-19T12:56:21.567
> 
> 标签：java, struts, runtime

从 Java 类中检查 Struts 运行时是否存在的最快方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:03:24.217

正如彼得所提到的，您可以尝试加载`org.apache.struts.action.RequestProcessor`使用`Class.forName("org.apache.struts.action.RequestProcessor")`，如果它抛出`ClassNotFoundException`然后 Struts 不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T12:58:41.707

尝试加载或使用您需要的类。如果它不存在，它将分别抛出一个`ClassNotFoundException`或`NoClassDefFoundError`。

# c# - 当前上下文中不存在名称“xxx”

> ID：11101433
> 
> 赞同：0
> 
> 时间：2012-06-19T12:56:41.660
> 
> 标签：c#, visual-studio-2008

这是我常用的 app.config

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings>
    <add name="BO"
        connectionString="Data Source=MyServer;Initial Catalog=BO;User ID=WebUser;Password=xxxx"
        providerName="System.Data.SqlClient" />
  </connectionStrings>
</configuration> 
```

我正在开发一个库，class.cs。这是我收到错误的代码部分。

```
 public static SqlConnection getNewConnection()
        {
            string conection = ConfigurationManager.ConnectionStrings["BO"].ConnectionString.ToString();
            conn = new SqlConnection(conection);
            return conn;
        } 
```

错误 1 ​​当前上下文中不存在名称“conn”

任何的想法？我没有复制引用同一文件的任何其他文件。（当谈到“在当前上下文中不存在”时，我读到的一些错误很常见）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T12:58:16.807

conn 在哪里声明？您是否已经在外部范围内声明了它？如果没有，请声明它，你会很好。

更改此行

```
 conn = new SqlConnection(conection); 
```

到

```
 SqlConnection conn = new SqlConnection(conection); 
```

您也可以使用`var`关键字来使用隐式声明。它可以从`C# 3.0`以后使用。

```
 var conn = new SqlConnection(conection); 
```

编译器会根据初始化语句右侧的表达式推断变量的类型

来自[msdn](http://msdn.microsoft.com/en-us/library/bb383973.aspx)

> 隐式类型的局部变量是**强类型**的，就像您自己声明了类型一样，但**编译器确定类型**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T12:58:53.313

更改`conn = new SqlConnection(conection);` 为 `var conn = new SqlConnection(conection);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T12:59:37.937

改变：

```
conn = new SqlConnection(conection); 
```

到：

```
SqlConnection conn = new SqlConnection(conection); 
```

这应该可以解决您的问题，您需要定义要创建的对象类型

# javascript - 如何在 JavaScript 函数中使用传递的参数？

> ID：11101444
> 
> 赞同：0
> 
> 时间：2012-06-19T12:57:20.990
> 
> 标签：javascript

在这里原谅*完整*的新手问题-我*知道*这确实是基本的东西，但是对于我的生活，我无法弄清楚。Javascript 对我来说相对较新，这是我第一次不得不做这个特别的事情。

因此，我正在尝试使用 Modal 打开 iframe - 页面本身将具有指向多个模态的链接，所有这些都需要传递不同的值。我没有对其中的每一个进行硬编码，而是尝试将其设置为可以使用一个函数并且链接可以根据需要传递值。

我目前已成功打开模态的代码，但其中包含 404 错误 - 加上模态标题显示 + 标题 + - 所以我想我引用它是错误的（可能在函数中？）。

这就是我所拥有的，正确方向的指针将不胜感激！

```
function openIframe(title,url){
    $.modal({
        title: '+title+',
        url: '+url+',
        useIframe: true,
        width: 600,
        height: 400
    });
} 
```

..和链接：

```
<a href="#" onclick="openIframe('Process Voucher','a_processvoucher.cfm')">Add</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:59:41.083

要使用变量，请不要引用它们；`title`被*逐字*设置为字符串`+title+`（对于 也是如此`url`）。

```
function openIframe(title, url) {
    $.modal({
        title: title,
        url: url,
        useIframe: true,
        width: 600,
        height: 400
    });
}​ 
```

您似乎对连接字符串和变量的连接语法感到困惑；例如，请参见以下内容：

```
var name = "Matt";
var welcome = "Hi " + name +  ", how are you doing today?";
alert(welcome); 
```

... 将提醒字符串`Hi Matt, how are you doing today?`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:00:25.450

您想引用名为`title`and的变量`url`，而不是值为“title”和“url”的字符串

```
function openIframe(title,url) {
    $.modal({
        title: title, // no quotes
        url: url, // no quotes
        useIframe: true,
        width: 600,
        height: 400
    });
} 
```

# javascript - 使用 javascript 将 css 应用于动态生成的单选按钮

> ID：11101445
> 
> 赞同：0
> 
> 时间：2012-06-19T12:57:21.020
> 
> 标签：javascript, firefox

嗨，我有一个 javascript 代码，可以生成单选按钮并在需要时删除。
for (var i = 0; i < len; i++){
Node.childNodes[i].innerHTML = "";
}

```
var Node1 = document.getElementById(tempArrIndex);        <br>
arrValueOptions = childValues[tempArrIndex["Values"].split(",");
for (var tempC2 = 0; tempC2 < arrValueOptions.length; tempC2++){
    var nameToUpdate = holdIDsToUpdate[tempCounter];
    var temp = tempC2 + 1;
    var idToUpdate = holdIDsToUpdate[tempCounter] + temp;
    var labelToUpdate = "";
    var defUpdater = "";
    if (arrValueOptions[tempC2] != ""){
        labelToUpdate = arrValueOptions[tempC2];
        if (childValues[tempArrIndex]["Default"] == labelToUpdate){
            defUpdater = 1;
        }
        var tbody = document.createElement('tbody');
        var row = document.createElement("tr");
        row.class = "test";
        var data1 = document.createElement("td");
        var newRadio = document.createElement("input");
        newRadio.type = "radio";
        newRadio.id = idToUpdate;
        newRadio.name = nameToUpdate;
        newRadio.value = labelToUpdate;
        if (defUpdater == 1){
            newRadio.setAttribute('checked', 'checked');
        }
        newRadio.setAttribute("onclick", "javascript:dependentFieldsValue('" + idToUpdate + "');");
        var data11 = document.createElement("td")
        var newLabel = document.createElement("label");
        newLabel.htmlFor = idToUpdate;
        newLabel.id = idToUpdate;
        newLabel.appendChild(document.createTextNode(labelToUpdate));
        tbody.appendChild(row);
        row.appendChild(data1);
        data1.appendChild(newRadio);
        row.appendChild(data11);
        data11.appendChild(newLabel);
        Node1.appendChild(row);
        defUpdater = 0;
    }
} 
```

它工作正常，我需要做的是在组中的单选按钮之间创建间隙。因为它们彼此非常接近。任何人请帮忙。Gap 在 IE 中看起来不错，但在 Firefox 中则不然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T12:59:34.543

A gap can be obtained through some CSS applying a padding on `td` cells in which you append your checkboxes, e.g.

```
td { padding: 0.5em 0 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:06:39.277

向生成的单选按钮添加一个类，如下所示：

```
newRadio.className = "myClass"; 
```

然后您可以将任何 CSS 添加到所有单选按钮，如下所示：

```
.myClass {
    margin-left: 3px;
} 
```

# iphone - 将新字符串添加到 iOS 中的可本地化字符串文件

> ID：11101447
> 
> 赞同：1
> 
> 时间：2012-06-19T12:57:31.697
> 
> 标签：iphone, ios, localization, localizable.strings

我知道如何`Localizable.strings`从项目的所有源 (*.m) 文件中生成我的文件（如果有人想知道，请参阅[这个](http://www.gargoylesoft.com/blog/2011/02/localizable-strings/)）。

然后，由于我使用的是 XCode 4，因此我`Identity`在右侧面板的选项卡中添加了新语言。然后我成功地编辑了新语言的文件。到现在为止还挺好。

我还使用了一些可本地化的字符串，它们的键不是字符串文字，而是变量，所以我必须手动将它们附加到每个文件的末尾。我很好，没问题。

但现在我正在对我的代码进行一些更改，并且出现了新的本地化字符串。有没有办法将这些新字符串添加到 Localizable.strings 文件（理想情况下适用于每种语言），**而不会丢失**以前翻译的字符串？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:38:54.953

我遇到了同样的问题，并找到了一个不错的 Python 小脚本来完成这项工作！由于源不再可用，请查看此博客文章： http: [//www.stevestreeting.com/2010/05/18/os-x-localisation-incremental-genstrings-and-utf-8-files/](http://www.stevestreeting.com/2010/05/18/os-x-localisation-incremental-genstrings-and-utf-8-files/)，这基本上做同样的
希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:39:11.773

我使用了一个名为[Localizable Strings Merge](http://itunes.apple.com/app/localizable-strings-merge/id475333727?mt=12)的简单应用程序，可在 Mac App Store 上找到。做一件事并且做得很好。真正节省时间。

# sql - SQL XML select multiple attributes

> ID：11101451
> 
> 赞同：0
> 
> 时间：2012-06-19T12:57:48.413
> 
> 标签：sql, xml, xml-parsing, xmlnode, xml-attribute

i just need your help. I was looking for a solution, but nothing works yet.

I have to select multiple attributes from the xml-file which is stored in a column of my table.

This is the File:

```
<ManagerConfig>
   <AccountList>
     <Account accountID=“1“  friendlyName=“Testname1“&gt; Test </Account>
     <Account accountID=“2“  friendlyName=“Testname2“&gt; Test </Account>
     <Account accountID=“3“  friendlyName=“Testname3“&gt; Test </Account>
     <Account accountID=“4“  friendlyName=“Testname4“&gt; Test </Account>
   </AccountList
</ManagerConfig> 
```

For this I´m using the following statement:

```
set @accountID = @xmlxx.value('(/ManagerConfig/AccountList/Account/@accountId)[1]', 'varchar(max)')
set @friendlyName = @xmlxx.value('(/ManagerConfig/AccountList/Account/@friendlyName)[1]', 'varchar(max)') 
```

The result is:

```
accountID     friendlyname
1             Testname1 
```

When im changing the value from [1] to [2] im getting the second attribute. So thats no problem. But i need all of these attributes and export them into another temporary table. I thought i can replace the value with a variable [@i]:

```
set @accountID = @xmlxx.value('(/(ManagerConfig/AccountList/Account/@accountId)'[@i]'', 'varchar(max)') 
```

But there is a syntax error:

> An insufficient number of arguments were supplied for the procedure or function value.

I hope you can help me to find a solution..

Greetz Dennis

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:08:31.600

假设您要过渡到获取结果集（可以*包含*多个结果），而不是当前使用变量，例如：

```
select t.C.value('@accountID','int') as AccountID,t.C.value('@friendlyName','varchar(max)') as FriendlyName
from @xmlxx.nodes('/ManagerConfig/AccountList/Account') as t(C) 
```

（原始设置和测试脚本，清除有问题的奇怪格式，并更正`Id`-> `ID`，这可能是错误的修复方向）：

```
declare @xmlxx xml = '<ManagerConfig>
   <AccountList>
     <Account accountID="1"  friendlyName="Testname1"> Test </Account>
     <Account accountID="2"  friendlyName="Testname2"> Test </Account>
     <Account accountID="3"  friendlyName="Testname3"> Test </Account>
     <Account accountID="4"  friendlyName="Testname4"> Test </Account>
   </AccountList>
</ManagerConfig>'
declare @accountID varchar(max)
declare @friendlyName varchar(max)
set @accountID = @xmlxx.value('(/ManagerConfig/AccountList/Account/@accountID)[1]', 'varchar(max)')
set @friendlyName = @xmlxx.value('(/ManagerConfig/AccountList/Account/@friendlyName)[1]', 'varchar(max)') 
```

# mysql - 映射表 MySQL / Access

> ID：11101452
> 
> 赞同：0
> 
> 时间：2012-06-19T12:57:51.817
> 
> 标签：mysql, ms-access

我有一个简短的访问/mySQL 问题。我有一个格式如下的映射表。

```
ID      Category_A      Category_B      Category_C      Team
 1              a               b                         T1
 2              a                               d         T2 
```

我有第二个表，其中还包括 Category_A、Category_B 和 Category_C。我想根据映射表将团队值加入到我的第二个表中。我的问题是，当有空白（例如 ID=2，Category_B）时，映射应将 T2 分配给包含 Category_A=a 和 Category_C=d 的任何行，而不管 Category_B 中的值如何。

可以做这种类型的映射吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:16:48.243

在 MS Access 中，我认为您需要以下内容：

```
SELECT t.ID, m.Team
FROM Team t
 INNER JOIN Mapping m
      ON (m.Category_C = t.Category_C) 
     AND (m.Category_B = t.Category_B) 
     AND (m.Category_A = t.Category_A)
WHERE m.Category_C Is Not Null
     AND m.Category_B Is Not Null 
     AND m.Category_A Is Not Null

UNION ALL
SELECT t.ID, m.Team
FROM Team t
 INNER JOIN Mapping m
      ON  (m.Category_B = t.Category_B) 
     AND (m.Category_A = t.Category_A)
WHERE m.Category_C Is Null
     AND m.Category_B Is Not Null 
     AND m.Category_A Is Not Null

UNION ALL
SELECT t.ID, m.Team
FROM Team t
 INNER JOIN Mapping m
      ON (m.Category_C = t.Category_C)
     AND (m.Category_A = t.Category_A)
WHERE m.Category_C Is Not Null
     AND m.Category_B Is Null 
     AND m.Category_A Is Not Null

UNION ALL
SELECT t.ID, m.Team
FROM Team t
 INNER JOIN Mapping m
      ON (m.Category_C = t.Category_C) 
     AND (m.Category_B = t.Category_B) 
WHERE m.Category_C Is Not Null
     AND m.Category_B Is Not Null 
     AND m.Category_A Is Null 
```

# regex - (vim) regex: masking text with help of pattern

> ID：11101453
> 
> 赞同：2
> 
> 时间：2012-06-19T12:57:52.083
> 
> 标签：regex, vim, replace

Am i correct to understand, that the definition

```
:range s[ubstitute]/pattern/string/cgiI 
```

suggests that in the string part indeed only strings are to be used, that is patterns not allowed? What i would like to do is do replacement of say any N symbols at position M with X*N symbols, so i would have liked to use something like this:

```
:%s/^\(.\{10}\).\{28}/\1X\{28}/g 
```

Which does not work because `\{28}` is interpreted literally.

Is writing the 28 XXXXX...X in the replace part the only possibility?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:05:37.273

替换部分中唯一允许的正则表达式构造是编号组：`\1 \2 \3` 等。重复构造`{28}`在那里无效，尽管这是一个聪明的主意。您必须使用 28 个 X。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T14:08:22.610

您可以通过在替换部分中使用表达式`\=`。您必须通过 访问匹配项`submatch()`，并将其与静态字符串连接在一起，您可以通过以下方式生成该字符串`repeat()`：

```
:%s/^\(.\{10}\).\{28}/\=submatch(1) . repeat('X',28)/g 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T14:07:49.783

另一种选择是在替换部分中使用表达式：

```
:%s/^\(.\{10}\).\{28}/\=submatch(1).repeat("X",28)/g 
```

第一个匹配组是用 获得的`submatch(1)`。有关详细信息，请参阅`:h sub-replace-expression`。

# xml - Hadoop Job API 是否支持 StreamInputFormat？

> ID：11101456
> 
> 赞同：0
> 
> 时间：2012-06-19T12:57:54.263
> 
> 标签：xml, hadoop, mapreduce

我正在尝试使用 Hadoop 的 StreamInputFormat 处理 xml 文件。我正在为此使用更新的API（Hadoop-0.20.205.0）。但是，似乎Job不支持StreamInputFormat，因为当我尝试通过“job.setInputFormatClass（StreamInputFormat.class）”设置属性时，它正在显示 -

```
"The method setInputFormatClass(Class<? extends InputFormat>) in the type Job is not pplicable for the arguments (Class<StreamInputFormat>)" 
```

我什至已经明确下载了“hadoop-streaming-0.20.205.0.jar”并导入了“org.apache.hadoop.streaming”包，仍然没有运气。有什么建议吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:56:17.320

您正在尝试将旧 API InputFormat (mapred) 与新 API 客户端 Job (mapreduce) 一起使用。

`Job.setInputFormat()`期待一个类扩展`o.a.h.mapreduce.InputFormat`（新的“mapreduce”API），其中流式 API 全部写在旧 API（“mapred”包）中，并且`StreamInputFormat`extends`o.a.h.mapred.KeyValueTextInputFormat`又扩展`o.a.h.mapred.FileInputFormat`（两者都是旧 API）：

*   [http://svn.apache.org/viewvc/hadoop/common/tags/release-0.20.205.0/src/contrib/streaming/src/java/org/apache/hadoop/streaming/StreamInputFormat.java?view=markup](http://svn.apache.org/viewvc/hadoop/common/tags/release-0.20.205.0/src/contrib/streaming/src/java/org/apache/hadoop/streaming/StreamInputFormat.java?view=markup)

# iphone - If my iphone app use Dropbox SDK , must be a user has an account in Dropbox

> ID：11101457
> 
> 赞同：0
> 
> 时间：2012-06-19T12:57:55.220
> 
> 标签：iphone, xcode, dropbox

I develop iphone app use Dropbox SDK to load image from my Dropbox account, I want to know must be a user has an account in Dropbox for use my app

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:03:00.953

当 Dropbox SDK 将用户带到 Dropbox 应用或浏览器进行登录时，它还会向用户显示一个“注册”链接/按钮，以处理用户尚未拥有帐户的情况。

无论如何，这取决于您的应用程序是否只是一个 Dropbox 客户端，并且无需用户登录 Dropbox 就可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:05:46.877

不，他们不需要帐户，将其设置在保管箱上的公共位置；

[https://www.dropbox.com/help/140/en](https://www.dropbox.com/help/140/en)

> “任何人都可以在线访问公共文件夹中的所有内容”

# 3d - 如何在没有游戏引擎的情况下创建 3D 游戏环境？

> ID：11101461
> 
> 赞同：1
> 
> 时间：2012-06-19T12:58:09.170
> 
> 标签：3d, game-engine

例如，在 Unity 中，它带有一个编辑器，可以根据您的喜好放置模型。但是，如果您不使用任何游戏引擎并使用 OpenGL 或其他东西编写，该怎么办？你必须写一个环境编辑器？是否有任何工具可以放置模型和导出坐标数据或其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:40:14.947

正如@starbeamrainbowlabs 所说，您可以使用单独的应用程序（例如 Blender、3ds Max 或 Maya）对对象和地形进行建模。

如果您从头开始编写游戏引擎，从 OpenGL 开始，而没有其他任何东西，您将需要编写或链接到一个库，该库可以读取您的建模应用程序可以编写的 3D 数据格式之一。

任何现有的模型加载库都可能对如何表示加载的模型有自己的想法。这可能很糟糕（因为您必须使用他们的建模框架或将其转换为您自己的），也可能很好（因为您可以使用他们的建模框架而不必编写自己的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:18:44.137

blender 可以导出为多种不同的格式，但我不知道它们中的任何一种是否有用。要导出，请转到文件 -> 导出以查看它可以导出到的类型列表。如果您找不到内置的功能，可能会有一个由 Blender 社区的成员编写的插件，可以做您想做的事情。

搅拌机：[http ://blender.org](http://blender.org)

# for-loop - 在 for 中实现一个计数器

> ID：11101466
> 
> 赞同：6
> 
> 时间：2012-06-19T12:58:21.900
> 
> 标签：for-loop, clojure

我想迭代一个集合，同时还维护一个计数器 ex

```
(for [x (range 10) y (inc 0)] [x y] ) 
```

我希望'y'代表计数器，因此对于每个元素，输出都是（[0 0] [1 1] [2 2] ...）。我怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T13:04:57.240

您可以使用[`indexed`](http://clojure.github.com/clojure-contrib/seq-api.html#clojure.contrib.seq/indexed)来自`clojure.contrib.seq`. 例子：

```
(indexed '(a b c d))  =>  ([0 a] [1 b] [2 c] [3 d]) 
```

您也可以使用[`map-indexed`](http://clojuredocs.org/clojure_core/clojure.core/map-indexed). 例子：

```
(map-indexed vector "foobar")  =>  ([0 \f] [1 \o] [2 \o] [3 \b] [4 \a] [5 \r]) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T13:52:54.470

按照 Simeon 的建议使用`map-indexed`。在`for`上下文中，使用解构来轻松访问计数器和集合元素很方便：

```
(for [ [y x] (map-indexed vector (range 10) ) ] [x y] )

> ([0 0] [1 1] [2 2] [3 3] [4 4] [5 5] [6 6] [7 7] [8 8] [9 9]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T06:54:16.170

我想如果这个问题仍然没有被标记为“已回答”，那么您可能正在寻找其他东西，也许是定义您自己的计数器的灵活性。

我同意其他人的观点，对于您概述的特定问题，这`map-indexed`是可行的方法。但是，如果您坚持使用`for`，我会推荐这样的东西：

```
(for [[x y] (map vector (range 10) (iterate inc 0))]
  [x y]) 
```

Rafal 有一个非常相似的答案，除了计数器总是从零开始并以 1 递增。在我的版本中，您可以根据需要定义您的计数器。例如，通过将上面的内容更改`(iterate inc 0)`为`(iterate #(+ 2 %) 10)`，您可以改为拥有一个从 10 开始并以 2 为增量的计数器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T16:33:34.360

```
(keep-indexed (fn [i el][el i]) (range 10)) 
```

或者

```
(keep-indexed #(vec [%2 %1]) (range 10))
(keep-indexed #(identity [%2 %1]) (range 10))
;([0 0] [1 1] [2 2] [3 3] [4 4] [5 5] [6 6] [7 7] [8 8] [9 9]) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T15:09:22.137

另外，请记住，在 Clojure 中使用索引通常是一种代码异味。

# php - 自动增加id

> ID：11101469
> 
> 赞同：0
> 
> 时间：2012-06-19T12:58:24.710
> 
> 标签：php

我想构建一个php脚本，通过将前一个id增加1来自动生成一个新的id。例如：A0009变成A0010，A9999变成B0000

我写了一个有效的，但它的长度不超过 5 个字符：例如：Z9999 应该转到 A00000 等等。

有什么建议么？这是我的片段：

```
<?php
function replaceChar($string2replace)
{
$charLength = strlen($string2replace)-1;
$charAt = array();
$charAt[4] = substr($string2replace, -1);
$charAt[3] = substr($string2replace, -2,1);
$charAt[2] = substr($string2replace, -3,1);
$charAt[1] = substr($string2replace, -4,1);
$charAt[0] = substr($string2replace, 0,1);

if($charAt[4] < 9)
{
$string2replace = substr_replace($string2replace,$charAt[4]+1,$charLength);
}
else
{
$charAt[4] = 0;
$string2replace = substr_replace($string2replace,$charAt[4],$charLength);
    if($charAt[3] < 9)
{
$string2replace = substr_replace($string2replace,$charAt[3]+1,$charLength- 1,1);
}
else
{
$charAt[3] = 0;
$string2replace = substr_replace($string2replace,$charAt[3],$charLength-1,1);

if($charAt[2] < 9)
{
$string2replace =  substr_replace($string2replace,$charAt[2]+1,$charLength-2,1);
}
else
{
$charAt[2] = 0;
$string2replace = substr_replace($string2replace,$charAt[2],$charLength-2,1);

if($charAt[1] < 9)
{
$string2replace = substr_replace($string2replace,$charAt[1]+1,$charLength-3,1);
}
else
{
$charAt[1] = 0;
    $string2replace =    substr_replace($string2replace,$charAt[1],$charLength-3,1);
    }

if($charAt[0] < 'z')
{
$charAt[0] ++;
$string2replace =    substr_replace($string2replace,$charAt[0],$charLength-4,1);
}
else
{
$charAt[0] = 'a';
$string2replace =  substr_replace($string2replace,$charAt[0],$charLength-4,1);
}
}   
}
}
return $string2replace;
}

$string2begin = 'A9999';

$generatedString = replaceChar($string2begin);

echo $string2begin . "<br />" . $generatedString;

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:59:40.740

您的 ID 编号方案似乎相当做作，其中高位数字是`A-Z`，其余数字是`0-9`。如果我正确理解该模式，这似乎可以解决问题：

```
function incrementID($id)
{
    $letter = $id[0];
    $number = substr($id, 1);

    $newNum = str_pad($number + 1, strlen($number), '0', STR_PAD_LEFT);

    // increase number only
    if (strlen($number) == strlen($newNum))
        return $letter . $newNum;

    // increase ID length ('Z' to 'A')
    if ($letter == 'Z')
        return 'A' . str_repeat('0', strlen($number) + 1);

    // change letter
    $newLetter = chr(ord($letter) + 1);
    return $newLetter . str_repeat('0', strlen($number));

}

printf("%s\n", incrementID('A0009')); // 'A0010'
printf("%s\n", incrementID('A9999')); // 'B0000'
printf("%s\n", incrementID('Z9999')); // 'A00000' 
```

* * *

即使你的例子不适合这个，我首先假设你真的只是想要一个以 36 为基数的数字（任何数字都可以是`0-9,A-Z`，其中`A`是 10 和`Z`35）。使用 base-36 中的数字很容易，因为您可以使用[`base_convert()`](http://php.net/base_convert)它们将它们转换为惯用的 base-10。这就是增加 base-36 数字所需要做的一切：

```
function incrementBase36($id)
{
    $numVal = base_convert($id, 36, 10);
    $newId = base_convert($numVal + 1, 10, 36);
    return strtoupper($newId);
}

printf("%s\n", incrementBase36('A0009')); // 'A000A'
printf("%s\n", incrementBase36('A9999')); // 'A999A'
printf("%s\n", incrementBase36('Z9999')); // 'Z999A'
printf("%s\n", incrementBase36('AZZZZ')); // 'B0000'
printf("%s\n", incrementBase36('ZZZZZ')); // '100000' 
```

# windows - Primefaces running in Tomcat and Windows Server 2008

> ID：11101470
> 
> 赞同：0
> 
> 时间：2012-06-19T12:58:27.623
> 
> 标签：windows, jsf, primefaces, tomcat7, java

I developed a web app with jsf and Primefaces in my PC. If I run it on localhost, it's displayed ok

Now I want to deploy it on a server, so I have installed same jdk version and copied my tomcat directory on a virtual machine.

Application runs right, but it's not displayed right in the same IE navigator! Buttons are hide, heades with wrong size....

The only difference is that my PC has Windows 7 32 bit and the VM it 's an Windows Server 2008 64bits

Any suggestion would be very appreciated

Thanks a lot!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:12:35.787

确保你有正确`css`的地方，我有类似的问题，组件在 chrome 上正确显示但在 IE 上没有，对我来说问题与`rime.css`，确保你在页面中有正确的 css，这可能是你挑战的原因.

# gwt - use Google Translate in GWT project

> ID：11101474
> 
> 赞同：1
> 
> 时间：2012-06-19T12:58:41.020
> 
> 标签：gwt, google-translate

I've created a project in Google Web Toolkit 2.4\. Many of the the elements in my web page are created with GWT (buttons,treeItems etc).

Is there a way to use Google Translate in order to do the translation? Is there an API for Google Web Toolkit?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:47:00.797

看看[http://code.google.com/p/gwt-google-apis/wiki/LanguageGettingStarted](http://code.google.com/p/gwt-google-apis/wiki/LanguageGettingStarted "gwt-google-apis")

# iphone - Default-LandscapeLeft~iPad.png 不显示

> ID：11101479
> 
> 赞同：0
> 
> 时间：2012-06-19T12:59:00.473
> 
> 标签：iphone, ipad, landscape, landscape-portrait, splash-screen

在 iOS5.0+ 上自定义通用应用程序的 iPad-launch-lcreens 时，我遇到了一些问题。我的应用程序不读取 Default-LandscapeLeft~iPad.png 和/或 Default-LandscapeRight~iPad.png 飞溅。

奇怪的是，该应用程序只接受 Default-Portrait~iPad.png 和 Default-Landscape~iPad.png - 但不读取 Default-LandscapeLeft~iPad.png 和/或 Default-LandscapeRight~iPad.png飞溅。我尝试了各种方法并阅读了网络上与该主题相关的所有教程。

我尝试过的事情例如：

1.  在 XCode->Target->Summary->Launch Image (Landscape) 中设置 Default-Landscape~iPad.png。结果：它总是以 Default-Landscape~iPad.png - Splash 启动，但忽略 Default-LandscapeLeft~iPad.png / Default-LandscapeRight~iPad.png

2.  我删除了 XCode->Target->Summary->Launch Image (Landscape)。结果：当设备处于横向时，它以黑色图像启动。它会忽略目录和项目包中的所有 Default-Landscape* 飞溅。

有没有人遇到过同样的问题？我将 Xcode 4.3.1 与 iOS 5.0 和 5.1 一起使用。我可能正在寻找的，它是 Xcode -> Target -> Summary 属性（设置启动图像的位置）中的 LandscapeLeft 和 LandscapeRight 的拖放界面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:05:15.010

从苹果文档中，名称应该是

*   Default-LandscapeLeft.png - 面向左的横向版本。
*   Default-LandscapeRight.png - 面向右侧的横向版本。

没有 ~iPad，因为这些图像仅支持 ipad。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:20:48.077

也许这个[答案](https://stackoverflow.com/questions/6567971/ipad-launch-image-problem)会帮助你（关于同一个问题）

> iPad 启动图像方向文件名尺寸
> 
> 默认人像.png * 768w x 1004h
> 
> 默认-PortraitUpsideDown.png 768w x 1004h
> 
> Default-Landscape.png ** 1024w x 748h
> 
> 默认-LandscapeLeft.png 1024w x 748h
> 
> 默认-LandscapeRight.png 1024w x 748h
> 
> Default.png 不推荐
> 
> 再次检查您的图像。从资源中删除图像并再次添加。确保从您的项目中清除所有目标删除构建文件夹。并再次运行它会工作。

如果它没有立即工作。尝试在设备/模拟器上重新安装您的应用程序。

希望这可以帮助！

# facebook - Unsafe javascript attempt to access frame with url Facebook with Chrome

> ID：11101481
> 
> 赞同：1
> 
> 时间：2012-06-19T12:59:10.130
> 
> 标签：facebook, google-chrome, unsafe, facebook-sharer

I have a problem with the Facebook plugin with Google Chrome browser. When will I recommend a post without being logged into facebook I have no problems.

But if I'm already logged into facebook and I recommend(share) a post I got the following error:

"Unsafe JavaScript attempt to access frame with URL"

Anybody have some idea?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T09:18:41.463

看起来像一个众所周知的 Chrome 问题。 [http://code.google.com/p/chromium/issues/detail?id=17325](http://code.google.com/p/chromium/issues/detail?id=17325)

# javascript - 选择标签似乎弄乱了我的 CSS

> ID：11101485
> 
> 赞同：0
> 
> 时间：2012-06-19T12:59:22.537
> 
> 标签：javascript, html, css

这是我的页面

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/frameset.dtd">
<html>
<head >
<link rel="Stylesheet" type="text/css" href="Content/themes/base/jquery-ui.css" />
<link rel="Stylesheet" type="text/css" href="Content/themes/base/jquery.ui.base.css" />
<link rel="Stylesheet" type="text/css" href="Content/themes/base/jquery.ui.theme.css" />
<link rel="Stylesheet" type="text/css" href="Content/ui.jqgrid.css" />

<style type="text/css">
ul, ol { margin-left:1.5em; padding-left:0px; }
li { margin-bottom:2.5em; }
body,
    html {
        margin:0;
        padding:0;
        color:#000;
        background:#a7a09a;
    }
#wrapper{
    width:100%;
    height:1024px;
    background:#f5f5f5;
}

#sideBar{
    width:20%;
    height:1024px;
    background:red;
    display:block;
    float:right;
}
#mainContent{
    width:80%;
    height:1024px;
    background:blue;
    display:block;
    float:left;
}
    * html #footer {
        height:1px;
    }

</style>

<script type="text/javascript" src="Scripts/modernizr.custom.05850.js"></script>

<script type="text/javascript" src="Scripts/jquery-1.7.2.js" > </script>

<script type="text/javascript" src="Scripts/jquery-ui-1.8.19.min.js"></script>

<script  type="text/javascript"  src="Scripts/grid.locale-en.js" ></script>

<script   type="text/javascript" src="Scripts/jquery.jqGrid.min.js"></script>

<script type="text/javascript" src="Scripts/json2.min.js"></script>

<script type="text/javascript" src="Scripts/knockout-2.1.0.js"></script>

<script type="text/javascript" src="Scripts/knockout.mapping-latest.js"></script>

<script type="text/javascript" src="Scripts/linq.min.js"></script>

<script type="text/javascript" src="Scripts/jquery.layout-latest.js"></script>

</head>
<body>
<div id="wrapper">
    <div id="sideBar">

    <select   id='listOfExistingViews'  />    

    <ul >

    <li>

TEST1

    </li>

    <li>

     TEST2
    </li>

    </ul>

    </div>
    <div id="mainContent"></div>
</div>

</body>
</html> 
```

问题在于“选择”元素，因为它不允许显示/渲染 ul 元素，并且主容器也不会保留其背景颜色。尽管不使用选择元素时，一切似乎都正常工作..：| 我到底在这里想念什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:01:38.553

您需要一个有效的`select`标签。

```
<select id="listOfExistingViews"></select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:07:10.060

您需要正确打开和关闭 select 标签，并且 select 后面必须有选项：

```
<select id='listOfExistingViews'>
 <option value='1'>TEST1</option>
 <option value='2'>TEST2</option>
</select> 
```

# javascript - Where are these decimals in my for loop coming from?

> ID：11101494
> 
> 赞同：1
> 
> 时间：2012-06-19T12:59:44.287
> 
> 标签：javascript, loops, for-loop, decimal

> **Possible Duplicate:**
> [Is JavaScript's Math broken?](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

I'm having some problems with my loop acting funny, here it is:

```
var duration = 1000;  /* 1000 millisecond fade = 1 sec */
var steps = 20;       /* number of opacity intervals   */
var delay = 5000;     /* 5 sec delay before fading out */

function fadeOut(eid) {
  for (i = 0; i <= 1; i += (1 / steps)) {
    setTimeout("setOpacity(" + (1 - i) + ",'"+eid+"')", i * duration);
    console.log("i="+i);
  }

} 
```

and I used console.log to check out what's happening on the loop, and it turns out very weird:

```
i=0
i=0.05
i=0.1
i=0.15000000000000002
i=0.2
i=0.25
i=0.3
i=0.35
i=0.39999999999999997
i=0.44999999999999996
i=0.49999999999999994
i=0.5499999999999999
i=0.6
i=0.65
i=0.7000000000000001
i=0.7500000000000001
i=0.8000000000000002
i=0.8500000000000002
i=0.9000000000000002
i=0.9500000000000003 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:01:26.743

这些是实际的浮点值。您可能希望将它们四舍五入以进行显示。

```
console.log("i="+i.toFixed(2)); 
```

[http://www.mredkj.com/javascript/nfbasic2.html](http://www.mredkj.com/javascript/nfbasic2.html)

# ios - 检测对 UIView 的“空白空间”的点击

> ID：11101502
> 
> 赞同：10
> 
> 时间：2012-06-19T13:00:01.267
> 
> 标签：ios, objective-c, cocoa-touch, uiview, event-handling

我有一个看起来像这样的视图层次结构

```
UIScrollView
 |
 +- UIView
     |
     +- UITextField
     +- UITextField
     +- UIButton 
```

我想要的是用户点击其中一个文本字段并看到屏幕上的键盘能够点击 UIView 的“空白空间”来隐藏键盘。因此，例如，我不希望来自 UIButton 的事件冒泡到 UIView（如果我将 UITapGestureRecognizer 添加到 UIView，就会发生这种情况）。

如何实现所需的功能？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-19T13:06:42.590

在您的`viewDidLoad`方法中添加此手势识别器：

```
UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissKeyboard)];
gestureRecognizer.cancelsTouchesInView = NO;
[self.view addGestureRecognizer:gestureRecognizer]; 
```

然后添加`dismissKeyboard`方法：

```
- (void) dismissKeyboard{
   [YOURFIELDHERE resignFirstResponder];
} 
```

您还需要添加它以使按钮仍然可单击并且不会被手势识别器覆盖：

```
gestureRecognizer.delegate = self; // in viewDidLoad
<UIGestureRecognizerDelegate> //in your header file

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {

  if ([touch.view isKindOfClass:[UIButton class]]){
    return NO;
  }
  return YES; // handle the touch
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:33:15.467

我遇到了同样的问题并用一个天真的解决方案来解决它。

1.  将 View 从 UIView 的实例更改为 UIControl 的实例，以便它可以处理触摸事件。
2.  在处理触摸事件的视图控制器中创建一个 IBAction 方法。在这种情况下，我们将从视图的子视图中退出任何第一响应者。

    `- (IBAction)backgroundTapped:(id)sender { [contentView endEditing:YES]; }`

    contentView 只是指向 View 的实例变量。你可以随意命名它。当您将消息传递`endEditing`给视图时，它实际上是告诉其子视图让第一响应者辞职，从而关闭键盘。

3.  通过 Interface Builder 连接目标（View）和操作（您刚刚创建的 IBAction 方法），通过打开`connection inspector`View 的 ，选择`Touch Up Inside`并将其拖动到 File's Owner 对象，然后选择方法的名称。

希望它有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-10T22:32:52.317

我知道这有点晚了，但一个快速、简单的解决方案如下：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

    [self.view endEditing:YES];
} 
```

如果您点击任何空白区域，它就会被调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-28T09:30:42.000

Mike Z 的[回答](https://stackoverflow.com/a/11101626/4748187)很好。[但是我认为当您使用 Mike Z 的答案](https://stackoverflow.com/a/11101626/4748187)时，UIGestureRecognizerDelegate 中的“if 条件”会更容易和简单。

尤其是当子视图不仅仅是按钮类型时，还可能是UITableViewCell、自定义视图等。

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    return touch.view == yourEmptySpaceView;
} 
```

# android - Build Path Problems

> ID：11101505
> 
> 赞同：0
> 
> 时间：2012-06-19T13:00:07.830
> 
> 标签：android, eclipse

When i bulid the android program, i found these errors happening. Can ayone help me fix this? The container 'Android Dependencies' references non existing library '/home/harikrishnan/project/For_Jms/Common/AppCommon/bin/appcommon.jar' GenericTransport Build path Build Path Problem

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:04:00.683

> 容器“Android Dependencies”引用了不存在的库“/home/harikrishnan/project/For_Jms/Common/AppCommon/bin/appcommon.jar”

应用程序找不到您的`appcommon.jar`，可能是您在`.jar`文件中添加了不正确的路径。
首先检查您的路径是否正确。

# c# - 正则表达式从字符串中获取 url 集合

> ID：11101507
> 
> 赞同：0
> 
> 时间：2012-06-19T13:00:09.780
> 
> 标签：c#, regex

我有一个字符串。下面给出一个例子。

```
 [playlist]\r\npath1=url1\r\npath2=url2\r\npath=url3\r\npath4=url4\r\ncount=1 
```

如何从上述字符串中提取路径属性值。除了路径属性之外，可能还有许多属性。

我期待的结果是

```
url1

url2

url3

url4 
```

我认为正则表达式最好做到这一点。需要关于 Rgular 表达式的任何想法（正则表达式）。使用 string.split 方法怎么样..哪个有效？..

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:04:31.413

好吧，这个正则表达式适用于您的特定示例：

```
path\d?=(.+?)\\r\\n 
```

不是立即显而易见的是，如果`\r\n`您的字符串中的字面意思是字符 \r\n，还是回车 + 换行。上面的正则表达式从字面上匹配这些字符。如果您的文字实际上是这样的：

```
[playlist]
path1=url1
path2=url2
path=url3
path4=url4
count=1 
```

然后这个正则表达式将起作用：

```
path\d?=(.+?)\n 
```

以及如何在 C# 中使用它的快速示例：

```
var str = @"[playlist]\r\npath1=url1\r\npath2=url2\r\npath=url3\r\npath4=url4\r\ncount=1";
var matches = Regex.Matches(str, @"path\d?=(.+?)\\r\\n");
foreach (Match match in matches)
{
    var path = match.Groups[1].Value;
    Console.WriteLine(path);
} 
```

# sql - SQL query for retrieving non-negative integer data

> ID：11101517
> 
> 赞同：0
> 
> 时间：2012-06-19T13:00:51.407
> 
> 标签：sql

I need a query which will retrieve non-negative Integer values only from a given table

Lets say I have a table `A` and the query `select* from A` will retrieve all contents from it. Now I want to write a query which will give me only non-negative values.

Assumption: All columns of the table contain negative/positive/zero Integer values as well as characters.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:03:40.760

```
Select * from A where col1 >=0 and col2 >=0 and .... and colN>=0 
```

只需将 col1...colN 替换为您的列名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:03:32.960

我想这就是你所追求的：

```
SELECT FIELD1  
FROM TABLE
WHERE FIELD1 >= 0

UNION ALL

SELECT FIELD2  
FROM TABLE
WHERE FIELD2 >= 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T13:03:35.203

我认为这是唯一的方法：

```
select * from A
where col1 > 0 and col2 > 0 and col3 > 0 and col4 > 0 ... and coln > 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T13:02:25.930

简单地？

```
SELECT * 
FROM TABLE
WHERE FIELD > 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T13:03:15.253

`select * from tablea where COLUMN > 0;`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T13:15:42.650

If you are using SQL Server...

```
 DECLARE @name VARCHAR(50)
    DECLARE @tableName VARCHAR(50)
    DECLARE @whereClause VARCHAR(max)

    SET @tableName = 'TableName' --you can change text to other table name
    SET @whereClause = ' WHERE -1 >= 0'

    DECLARE db_cursor CURSOR FOR  
    SELECT c.name
    FROM sys.columns AS c
    WHERE OBJECT_NAME(c.OBJECT_ID) = @tableName

    OPEN db_cursor   
    FETCH NEXT FROM db_cursor INTO @name   

    WHILE @@FETCH_STATUS = 0   
    BEGIN   
           SET @whereClause = @whereClause + ' OR '  + @name + ' >= 0'
           FETCH NEXT FROM db_cursor INTO @name   
    END   

    CLOSE db_cursor   
    DEALLOCATE db_cursor

    EXEC ('SELECT * FROM ' + @tableName + @whereClause) 
```

# c# - UpdateSourceTrigger.PropertyChanged and INotifyChanged on TextBox DataBinding Silverlight 5 typing in TextBox is extremely slow

> ID：11101518
> 
> 赞同：0
> 
> 时间：2012-06-19T13:00:56.060
> 
> 标签：c#, silverlight, data-binding, textbox, onkeyup

If you have a binding on a textbox with the UpdateSourceTrigger.PropertyChanged, which updates your datasource everytime the textproperty on the TextBox changes and you have a RaisedPropertyChanged on that Property, then your textbox gets really slow (during typing some text) if you have a lot of Text inside (over 1000 characters). Has someone a solution for that issue? I need to inform the GUI about the change from the datamodel. I use the MVVM pattern. I already tried to convert my Content Property into a dependency object -> same textbox typing lag. This issue confuses me, because this should be basic silverlight stuff??

cheers tobias

```
var binding = new Binding("Content");
binding.Mode = BindingMode.TwoWay;
binding.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;
myTextBox.SetBinding(TextBox.TextProperty, binding);

private string m_content;
        public string Content
        {
            get { return m_content; }
            set
            {
                m_content = value;
                //RaisePropertyChanged("Content");
            }
        }

    public event PropertyChangedEventHandler PropertyChanged;

    /// <summary>
    /// Raises this object's PropertyChanged event.
    /// </summary>
    /// <param name="propertyName">The property that has a new value.</param>
    protected void RaisePropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            var e = new PropertyChangedEventArgs(propertyName);
            handler(this, e);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:29:03.397

尝试将文本框的**UpdateSourceTrigger**属性设置为**LostFocus**，以便在键入时不会更新基础数据源

# c# - 手动创建类以映射到 XML 请求响应

> ID：11101519
> 
> 赞同：4
> 
> 时间：2012-06-19T13:01:08.803
> 
> 标签：c#, .net, xml, xsd.exe

我被指派为使用 XML 请求/响应的 API 实现接口。API 提供程序不为 XML 调用提供任何 xsd。

我使用 xsd.exe 生成了 C# 类： .xml -> .xsd -> .cs 但是，我发现生成的类并不令人满意，因为调用包含很多列表，xsd.exe 无法正确处理这些列表。

我应该忍受痛苦并手动创建映射到所有请求/响应的类吗？这可能有助于以后轻松维护代码。还是应该只使用 .Net 提供的 Xml 类，并编写方法来创建 XML 请求/响应？这将花费更少的时间，但在维护阶段可能会变得困难。

这是我为相应的 XML 元素创建的示例类：

XML 元素

```
<Product ID="41172" Description="2 Pers. With Breakfast" NonRefundable="YES" StartDate="2010-01-01" EndDate="2010-06-30" Rate="250.00" Minstay="1" /> 
```

对应的类

```
internal class ProductElement : IElement
{
    private const string ElementName = "Product";

    private const string IdAttribute = "ID";
    private const string DescriptionAttribute = "Description";
    private const string NonRefundableAttribute = "NonRefundable";
    private const string StartDateAttribute = "StartDate";
    private const string EndDateAttribute = "EndDate";
    private const string RateAttribute = "Rate";
    private const string MinStayAttribute = "Minstay";

    private string Id { get; private set; }
    internal string Description { get; private set; }
    internal bool IsNonRefundable { get; private set; }

    private DateRange _dateRange;
    private string ParseFormat = "yyyy-MM-dd";
    private decimal? _rate;
    private int? _minStay;

    internal ProductElement(string id, DateRange dateRange, decimal? rate, int? minStay)
    {
        this.Id = id;
        this._dateRange = dateRange;
        this._rate = rate;
        this._minStay = minStay;
    }
    internal ProductElement(XElement element)
    {
        this.Id = element.Attribute(IdAttribute).Value;
        this.Description = element.Attribute(DescriptionAttribute).Value;
        this.IsNonRefundable = element.Attribute(NonRefundableAttribute).Value.IsEqual("yes") ? true : false;
    }

    public XElement ToXElement()
    {
        var element = new XElement(ElementName);
        element.SetAttributeValue(IdAttribute, _id);
        element.SetAttributeValue(StartDateAttribute, _dateRange.Start.ToString(ParseFormat, CultureInfo.InvariantCulture));
        element.SetAttributeValue(EndDateAttribute, _dateRange.End.ToString(ParseFormat, CultureInfo.InvariantCulture));
        element.SetAttributeValue(RateAttribute, decimal.Round(_rate.Value, 2).ToString());
        element.SetAttributeValue(MinStayAttribute, _minStay.Value.ToString());

        return element;
    }
} 
```

有时，我觉得我承受了太多的痛苦。有时候，我觉得痛苦是值得的。各位，你们怎么看？另外，我的班级设计有什么改进吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:23:57.203

您真的想多了这个问题……您可以使用`System.Xml.Serialization`命名空间来真正节省您的时间并为您完成大部分工作。

改用这个：

```
public class Product
{
    [XmlAttribute()]
    public long Id { get; set; }
    [XmlAttribute()]
    public string Description { get; set; }
    [XmlAttribute()]
    public string NonRefundable { get; set; }
    [XmlAttribute()]
    public string StartDate { get; set; }
    [XmlAttribute()]
    public string EndDate { get; set; }
    [XmlAttribute()]
    public decimal Rate { get; set; }
    [XmlAttribute()]
    public bool Minstay { get; set; }
} 
```

以及要测试的代码：

```
class Program
{
    static void Main(string[] args)
    {
        string xml = "<Product ID=\"41172\" Description=\"2 Pers. With Breakfast\" NonRefundable=\"YES\" StartDate=\"2010-01-01\" EndDate=\"2010-06-30\" Rate=\"250.00\" Minstay=\"1\" />";
        XmlSerializer ser = new XmlSerializer(typeof(Product));

        using(MemoryStream memStream = new MemoryStream())
        {
            byte[] data = Encoding.Default.GetBytes(xml);
            memStream.Write(data, 0, data.Length);
            memStream.Position = 0;
            Product item = ser.Deserialize(memStream) as Product;
            Console.WriteLine(item.Description);
        }
    }
} 
```

最后一点，您会注意到我并没有真正费心对日期等的转换做任何过于花哨的事情，但是您可以轻松地对此进行扩展以获取更多详细信息。你应该从中得到的主要一点是，你真的在​​想这整件事。

# python - 了解 Python Web 应用程序部署

> ID：11101525
> 
> 赞同：6
> 
> 时间：2012-06-19T13:01:27.227
> 
> 标签：python, web-applications, deployment

我想我并不完全了解部署过程。这是我所知道的：

*   当我们需要进行热部署时——这意味着我们需要更改实时代码——我们可以通过重新加载模块来实现，但是
*   `imp.reload`是个坏主意，我们应该重新启动应用程序而不是重新加载更改的模块
*   理想情况下，运行代码应该是您的代码存储库的克隆，并且在您需要部署的任何时候，您只需拉取更改

现在，假设我有多个`wsgi`应用程序实例在反向代理后面运行`nginx`（在 8011、8012 等端口上）。而且，我们还假设我`5`每秒收到请求。

现在在这种情况下，我应该如何在应用程序的所有运行实例中更新我的代码。

*   如果我停止所有实例，然后更新所有实例，然后重新启动它们——我肯定会丢失一些请求
*   如果我一个一个地更新每个实例——那么实例将处于不一致的状态（一些将运行旧代码，一些将运行新代码），直到所有实例都被更新。现在，如果一个请求命中一个更新的实例，然后一个后续（和相关的）请求命中一个较旧的实例（尚未更新）——那么我会得到错误的结果。

有人可以彻底解释像这样繁忙的应用程序是如何热部署的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:10:33.070

[对于在像nginx](http://wiki.nginx.org/LoadBalanceExample)这样的负载均衡器后面的几个热实例的部署，我喜欢使用像[Fabric](http://docs.fabfile.org/en/1.4.2/index.html)这样的工具进行滚动部署。

1.  Fabric 将您连接到服务器 1
2.  关闭网络服务器
3.  通过使用您的 VCS 或使用新应用程序传输 tarball 来部署更改
4.  启动网络服务器
5.  GOTO1 并连接到下一个服务器。

这样你就永远不会脱机，而且它是无缝的，因为 nginx 知道当一个网络服务器在尝试循环到它时被关闭，并且会转移到下一个，并且一旦节点/实例备份它将重新投入生产使用。

编辑：

您可以使用 nginx 中的[ip_hash](http://wiki.nginx.org/HttpUpstreamModule)模块来确保来自一个 IP 地址的所有请求在会话期间都发送到同一台服务器

> 该指令导致请求根据客户端的 IP 地址在上游之间分发。哈希的关键是客户端的 C 类网络地址。此方法保证客户端请求将始终传输到同一服务器。但是如果这个服务器被认为不工作，那么这个客户端的请求将被转移到另一个服务器。这使得客户端很可能总是连接到同一台服务器。

这对您意味着，一旦您的网络服务器更新并且客户端连接到新实例，该会话的所有连接将继续转发到同一服务器。

这确实使您处于以下情况

1.  客户端连接到站点，从服务器 1 获得服务
2.  在客户端完成他们正在做的任何事情之前更新服务器 1
3.  客户可能处于不确定状态？

这种情况引出了一个问题，您是否从您的 API/站点中删除了可能使客户端处于不确定状态的内容？如果您所做的只是更新 UI 元素或添加页面等，但不更改任何后端 API，那么您应该没有任何问题。如果您要删除 API 函数，您最终可能会遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T11:00:40.413

你不能让一半的服务器离线（比如将它们从负载平衡池中拉出来）然后更新它们。然后让他们重新上线，同时拉下另一半。然后更新这些并将它们重新联机。

这将确保您保持在线状态，同时确保您永远不会同时在线拥有应用程序的旧版本和新版本。是的，这意味着您的网站在此期间将以一半的容量运行。但这可能没问题？

# wordpress - 创建自定义帖子类型的挂钩是什么？

> ID：11101528
> 
> 赞同：1
> 
> 时间：2012-06-19T13:01:37.320
> 
> 标签：wordpress

我讨厌将东西放入 functions.php 文件中，因此想挂接到预先存在的 WP-hook 以注册/配置我的自定义帖子类型（和分类法）。我在某处读到“模板重定向”会是一个不错的选择，但当您在管理页面上时，似乎不会触发该钩子，因此相当无用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T21:47:02.140

你可以使用`init`钩子。

注册名为“book”的帖子类型的示例。

```
function codex_custom_init() {
    $args = array( 'public' => true, 'label' => 'Books' );
    register_post_type( 'book', $args );
}
add_action( 'init', 'codex_custom_init' ); 
```

参考：[**法典。**](http://codex.wordpress.org/Function_Reference/register_post_type)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T21:15:23.517

我正在审查我的未解决问题，它提醒我我还没有结束这个问题。Marty 的回答很有帮助，但确实指出了不同的解决方案路径。回想起来，我不确定我尝试过什么钩子，但明显的钩子是“init”，我现在正在使用它并且它有效。

这是我的流程：

*   我的插件加载了“plugins_loaded”事件
*   它做了一些基本的初始化，然后挂钩到“管理”挂钩
*   当我的插件触发 'admin' 事件时，它会触发以下功能：

    ```
    function add_hooks () {
        // fire a hook that a configuration file can pick up
        do_action ( 'lg_custom_types_definition');
        // now fire hooks to register custom types
        do_action ( 'lg_custom_type_cpt_registration' );        // register
        do_action ( 'lg_custom_types_registered_post_types');
        do_action ( 'lg_custom_type_tax_registration' );        // register
        do_action ( 'lg_custom_types_registered_taxonomies');
    } 
    ```

这种方法为我提供了一种完全解耦的方法，这意味着我可以启用“custom_types”插件，现在我已经安装了“功能”。然后我创建了一个配置插件，该插件挂钩到该功能添加的事件。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-19T13:15:21.497

您可以在 functions.php 中使用包含文件来包含您的所有自定义工作。

```
<?php 
// functions.php
include('inc/custom-functions.php');
?> 
```

我创建了一个非常简单的页面来创建您的自定义帖子类型，您输入自定义字段所需的选项，它会吐出所需的代码以便在 wordpress 中生成它。

它位于此处：[http ://martin-gardner.co.uk/wordpress-custom-post-type-generator/](http://martin-gardner.co.uk/wordpress-custom-post-type-generator/)

例如：

*   输入帖子类型名称：视频在菜单中选择您想要放置的位置。
*   然后为该自定义帖子类型选择所需的选项。
*   编辑标签，如果需要，默认情况下只使用名称，

阅读更多关于自定义帖子类型和 register_post_type @

[http://codex.wordpress.org/Function_Reference/register_post_type](http://codex.wordpress.org/Function_Reference/register_post_type)

希望能有所帮助；）

马蒂

# cuda - CUDA 缩减 - 基础知识

> ID：11101539
> 
> 赞同：2
> 
> 时间：2012-06-19T13:02:26.977
> 
> 标签：cuda, reduction

我试图用这段代码对一个数组求和，但我被卡住了。我可能需要一些“CUDA for dummies tutorial”，因为我花了很多时间在这样的基本操作上，但我无法让它工作。

以下是我不明白或不确定的事情的清单：

1.  我应该使用多少块（dimGrid）？我认为应该是`N/dimBlock.x/2`（N=输入数组的长度），因为在内核开始时，数据被加载并从全局内存的两个“块”添加到共享内存

2.  在原始代码中有`blockSize`. 我将其替换为`blockDim.x`因为我不知道这些变量有何不同。但是当`blockSize`=时`blockDim.x`，`gridSize = blockDim.x*2*gridDim.x`对我来说没有意义 -`gridSize`将大于 N。在一维数组的上下文中 *Dim.x 和 *Size 有什么区别？

3.  主要逻辑 - 在内核中，每个块总和 2*dimBlock（块中的线程）个数。当 N = 262144 和 dimBlock = 128 时，内核返回 1024 个部分和数组。然后我再次运行内核，结果 = 4 部分和。最后，在最后一次运行中，返回单个和，因为数组是由单个块处理的。

4.  我对二进制数组求和。在第一次运行中，我可以`uchar4`用于输入数据。在第二次和第三次运行中，我将使用`int`.

请告诉我我错过了什么

谢谢

```
__global__ void sum_reduction(uchar4* g_idata, int* g_odata, int N) { 

extern __shared__ int s_data[]; 

unsigned int tid = threadIdx.x;
unsigned int i = blockIdx.x*(blockDim.x*2) + tid;
unsigned int gridSize = blockDim.x*2*gridDim.x;

while (i < N) {
    s_data[tid] += g_idata[i].x + g_idata[i+blockDim.x].x +
            g_idata[i].y + g_idata[i+blockDim.x].y +
            g_idata[i].z + g_idata[i+blockDim.x].z +
            g_idata[i].w + g_idata[i+blockDim.x].w;
    i += gridSize;
}
__syncthreads();

if (tid < 64) {
    s_data[tid] += s_data[tid + 64];
}
__syncthreads(); 

if (tid < 32) { 
    volatile int *s_ptr = s_data; 
    s_ptr[tid] += s_ptr[tid + 32];
    s_ptr[tid] += s_ptr[tid + 16];
    s_ptr[tid] += s_ptr[tid + 8]; 
    s_ptr[tid] += s_ptr[tid + 4];
    s_ptr[tid] += s_ptr[tid + 2]; 
    s_ptr[tid] += s_ptr[tid + 1]; 
} 
if (tid == 0) {
    g_odata[blockIdx.x] = s_data[0];
} 
}

main{
...
dim3 dimBlock(128);
dim3 dimGrid(N/dimBlock.x);
sum_reduction<<<dimGrid, dimBlock>>>(in, out, N);
...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T02:12:44.077

Calling the kernel like this fixes the problem.

```
dim3 dimBlock(128);
dim3 dimGrid(N/dimBlock.x);
int smemSize = dimBlock.x * sizeof(int);
sum_reduction<<<dimGrid, dimBlock, smemSize>>>(in, out, N); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-20T07:52:03.213

好吧，我认为你需要重新开始。查看 NVIDiA 提供的关于[减少的分步流程指南](http://www.cuvilib.com/Reduction.pdf)

# java - 如何为 Facebook 聊天编写宏/网络爬虫？

> ID：11101543
> 
> 赞同：-2
> 
> 时间：2012-06-19T13:02:41.593
> 
> 标签：java, python, facebook, perl, facebook-chat

我的旧非智能手机不支持 GROUP facebook 聊天，所以我试图找到一种方法来抓取 facebook GROUP 消息并将它们作为短信发送到手机。我知道一些 Perl 网络抓取（HTML::TableExtract、WWW::Mechanize、LWP 等），但即使我提供了我的脚本我的用户名和密码，我也无法渗透到 facebook。

有没有办法让这样的网络爬虫工作？我应该查看任何 API 或工具包吗？我不太确定如何开始这个项目。在最坏的情况下，我可以尝试编写一个从浏览器上的某些位置复制文本的宏......

编辑：饼干罐听起来是个好主意，我会研究一下。这是一段（坏的）代码。

```
 open(PERSONAL, "personal.txt");
        my @pers = <PERSONAL>;

        $ua -> get($cur_url);
        $ua -> form_id("login_form");
        chomp($pers[0]);
        $ua -> field("email", $pers[0]);
        chomp($pers[1]);
        $ua -> field("pass", $pers[1]);
        $ua -> click_button(value =>"Log In");

        $ua -> get("https://m.facebook.com/groups/170930939594231/");

        $ua -> save_content($dir."/group.html"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:22:46.967

请使用facebook 提供的 xmpp [API 。](https://developers.facebook.com/docs/chat/)不需要刮东西。

# php - 如何将 imagick annotateImage 用于中文文本？

> ID：11101544
> 
> 赞同：8
> 
> 时间：2012-06-19T13:02:55.220
> 
> 标签：php, image, imagick, annotate

我需要用中文文本注释图像，我现在正在使用 Imagick 库。

中文文本的一个例子是

这是中文

使用的中文字体文件是[这个](http://dl.dropbox.com/u/8743819/fontfile/STHeiTi.ttf)

文件原名为华文黑体.ttf

它也可以在 Mac OSX 的 /Library/Font 下找到

我已将其重命名为英文 STHeiTi.ttf，以便更轻松地在 php 代码中调用该文件。

特别[是`Imagick::annotateImage`功能](http://php.net/manual/en/imagick.annotateimage.php)

我也在[使用*“如何在 PHP 中使用 Imagick 绘制包装文本？”中的答案。*](https://stackoverflow.com/a/5746551/80353).

我之所以使用它是因为它对于英文文本是成功的，并且应用程序需要同时注释英文和中文，但不能同时进行。

问题是当我使用中文文本运行 annotateImage 时，我得到的注释看起来像罍

[此处](https://gist.github.com/2971092/b2c128d643d8333f1ebe4ece1f49566ec2b69d5d)包含的代码

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T12:38:52.317

问题是您正在向 imagemagick 提供“线拆分器”（`wordWrapAnnotation`）的输出，您正在向该输出`utf8_decode`输入文本。如果您正在处理中文文本，这肯定是错误的。[`utf8_decode`](http://php.net/manual/en/function.utf8-decode.php)只能处理可以转换为 ISO-8859-1（ASCII 最常见的 8 位扩展）的 UTF-8 文本。

现在，我希望你的文本是[UTF-8](http://en.wikipedia.org/wiki/UTF-8)编码的。如果不是，您可以像这样转换它：

```
$text = mb_convert_encoding($text, 'UTF-8', 'BIG-5'); 
```

或者像这样

```
$text = mb_convert_encoding($text, 'UTF-8', 'GB18030'); // only PHP >= 5.4.0 
```

（在您的代码`$text`中是`$text1`和`$text2`）。

然后（至少）有两件事要在您的代码中修复：

1.  将文本“按原样”（不带`utf8_decode`）传递给`wordWrapAnnotation`,
2.  根据[规范](http://www.php.net/manual/en/imagickdraw.settextencoding.php)`setTextEncoding`将from的参数更改`"utf-8"`为`"UTF-8"`

我希望您代码中的所有变量都在其中的某些缺失部分中进行了初始化。有了上面的两个更改（第二个可能不是必需的，但你永远不知道......），并且缺少的部分就位，我认为你的代码没有理由不工作，除非你的 TTF 文件损坏或`Imagick`库坏了（基于`imagemagick`它`Imagick`的库是一个很棒的库，所以我认为最后一种可能性不大）。

**编辑：**

根据您的要求，我更新我的答案

a）`mb_internal_encoding('utf-8')`正如您在[回答](https://stackoverflow.com/questions/11101544/how-to-use-imagick-annotateimage-for-chinese-text/11219404#11219404)中所说，设置对于解决方案非常重要，并且

b) 我对更好的分行器的建议，它对西方语言和中文都可以接受，这可能是使用韩语语标（日文汉字和韩文汉字）的其他语言的一个很好的起点：

```
function wordWrapAnnotation(&$image, &$draw, $text, $maxWidth)
{
   $regex = '/( |(?=\p{Han})(?<!\p{Pi})(?<!\p{Ps})|(?=\p{Pi})|(?=\p{Ps}))/u';
   $cleanText = trim(preg_replace('/[\s\v]+/', ' ', $text));
   $strArr = preg_split($regex, $cleanText, -1, PREG_SPLIT_DELIM_CAPTURE |
                                                PREG_SPLIT_NO_EMPTY);
   $linesArr = array();
   $lineHeight = 0;
   $goodLine = '';
   $spacePending = false;
   foreach ($strArr as $str) {
      if ($str == ' ') {
         $spacePending = true;
      } else {
         if ($spacePending) {
            $spacePending = false;
            $line = $goodLine.' '.$str;
         } else {
            $line = $goodLine.$str;
         }
         $metrics = $image->queryFontMetrics($draw, $line);
         if ($metrics['textWidth'] > $maxWidth) {
            if ($goodLine != '') {
               $linesArr[] = $goodLine;
            }
            $goodLine = $str;
         } else {
            $goodLine = $line;
         }
         if ($metrics['textHeight'] > $lineHeight) {
            $lineHeight = $metrics['textHeight'];
         }
      }
   }
   if ($goodLine != '') {
      $linesArr[] = $goodLine;
   }
   return array($linesArr, $lineHeight);
} 
```

换句话说：首先通过用单个空格替换所有运行的空格（包括换行符）来清理输入，但前导和尾随空格除外，后者已被删除。然后在空格处拆分，或者就在没有“前导”字符（如左括号或左引号）的汉字符之前，或者就在“前导”字符之前。行被组合是为了不以超过`$maxWidth`像素的水平水平渲染，除非分割规则无法做到这一点（在这种情况下，最终渲染可能会溢出）。在溢出情况下强制拆分的修改并不困难。请注意，例如，中文标点在 Unicode 中不归类为汉，因此，除了“前​​导”标点之外，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T13:38:28.480

恐怕您将不得不选择可以支持中文代码点的TTF。这有很多来源，这里有两个：

[http://www.wazu.jp/gallery/Fonts_ChineseTraditional.html](http://www.wazu.jp/gallery/Fonts_ChineseTraditional.html)

[http://wildboar.net/multilingual/asian/chinese/language/fonts/unicode/non-microsoft/non-microsoft.html](http://wildboar.net/multilingual/asian/chinese/language/fonts/unicode/non-microsoft/non-microsoft.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T04:28:17.737

这里的完整解决方案：

[https://gist.github.com/2971092/232adc3ebfc4b45f0e6e8bb5934308d9051450a4](https://gist.github.com/2971092/232adc3ebfc4b45f0e6e8bb5934308d9051450a4)

关键思想：

**必须在表单和处理页面上设置html字符集和内部编码**

```
header('Content-Type: text/html; charset=utf-8');
mb_internal_encoding('utf-8'); 
```

这些行必须位于 php 文件的顶部行。

**使用该函数判断文本是否为中文并使用正确的字体文件**

```
function isThisChineseText($text) {
    return preg_match("/\p{Han}+/u", $text);
} 
```

有关更多详细信息，请查看[https://stackoverflow.com/a/11219301/80353](https://stackoverflow.com/a/11219301/80353)

**在 ImagickDraw 对象中正确设置 TextEncoding**

```
$draw = new ImagickDraw();

// set utf 8 format
$draw->setTextEncoding('UTF-8'); 
```

注意大写的 UTF。[Walter Tross](https://stackoverflow.com/users/1046007/walter-tross)在他的回答中向我指出了这一点： [https ://stackoverflow.com/a/11207521/80353](https://stackoverflow.com/a/11207521/80353)

**使用 preg_match_all 爆破英文单词、中文单词和空格**

```
// separate the text by chinese characters or words or spaces
preg_match_all('/([\w]+)|(.)/u', $text, $matches);
$words = $matches[0]; 
```

受此答案启发[https://stackoverflow.com/a/4113903/80353](https://stackoverflow.com/a/4113903/80353)

也适用于英文文本

# php - 将括号添加到时间戳

> ID：11101550
> 
> 赞同：0
> 
> 时间：2012-06-19T13:03:09.927
> 
> 标签：php, preg-replace

我是 PHP 新手，所以我不知道这是否可行。

我需要为不同的时间戳添加括号，以便：

```
<span class="time">2:26</span>
<span class="time">2:51</span>
<span class="time">3:37</span>
<span class="time">1:19</span> 
```

变成这样：

```
<span class="time">(2:26)</span>
<span class="time">(2:51)</span>
<span class="time">(3:37)</span>
<span class="time">(1:19)</span> 
```

**编辑**

上面的 HTML 是使用简单的 DOM 解析器从网页中获取信息生成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:09:26.907

如果这是较大 HTML 字符串的一部分，或者语法可能不同，则最好使用 DOM 解析器。

但是，如果不是这种情况，您可以这样做：

```
$string = str_replace('<span class="time">', '<span class="time">(', $string);
$string = str_replace('</span>', ')</span>', $string); 
```

或者您可以使用正则表达式：

```
$string = preg_replace('/<span class=\"time\">(\d+\:\d+)<\/span>/', '<span class="time">($1)</span>', $string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:10:53.800

假设您的时间戳字符串在 $timestamp 变量中，您可以使用连接，即：

```
$output = '(' . $timestamp . ')'; 
```

或者正如您所提到的，在添加括号之前使用正则表达式来验证字符串：

```
$output = preg_replace("/(\d+):(\d+)/", "($0)", $timestamp); 
```

# c# - 有没有像 snoop for windows phone 应用程序这样的工具？

> ID：11101551
> 
> 赞同：2
> 
> 时间：2012-06-19T13:03:13.497
> 
> 标签：c#, xaml, windows-phone-7.1

我想像 WPF 中的 Snoop 一样查看 Visual 树。是否有任何适用于 Windows 手机应用程序的工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:09:24.150

你可以看看[Silverlight Spy](http://firstfloorsoftware.com/silverlightspy/download-silverlight-spy) - [Silverlight Spy 扩展](http://visualstudiogallery.msdn.microsoft.com/4d50ee31-6426-4968-b00f-bd50ba54d74f)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T10:18:15.143

[XAML SPY](http://xamlspy.com/)是更新的 Silverlight Spy。

# android - Android：如何使用画布捕获当前全屏

> ID：11101555
> 
> 赞同：0
> 
> 时间：2012-06-19T13:03:17.307
> 
> 标签：android, canvas, screen

有人请帮我解决这个问题，我尝试在没有画布的情况下捕获全屏，每次都会得到黑屏图像。我发现的另一个有趣的事情是，当我在手机上打开该图像并将其删除时，会出现另一个带有图像的屏幕。我不知道它是如何发生的，因为我是 android 应用程序开发的新手。

任何人都可以帮我找到解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:12:09.963

在 SO 中的快速搜索给了我这个有一个公认的答案。你可能想看看它。SO 来源： [截图](https://stackoverflow.com/questions/8294110/taking-screenshot)

报价：

你可以这样做，

为您的主布局提供 id 并在屏幕上显示内容后，在某些侦听器上编写以下代码，例如按钮单击或菜单项或任何此类侦听器（确保在显示布局后调用这些行，否则它将给出黑屏）。

```
 View content = findViewById(R.id.myLayout);
    content.setDrawingCacheEnabled(true);
    getScreen(content);
    method getScreen(content)

    private void getScreen(View content)
        {
            Bitmap bitmap = content.getDrawingCache();
            File file = new File("/sdcard/test.png");
            try 
            {
                file.createNewFile();
                FileOutputStream ostream = new FileOutputStream(file);
                bitmap.compress(CompressFormat.PNG, 100, ostream);
                ostream.close();
            } 
            catch (Exception e) 
            {
                e.printStackTrace();
            }
        } 
```

也不要添加将文件写入 SDCard 的权限。

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE">
                                                                   </uses-permission> 
```

# delphi - Delphi 运行时主题已启用，但未使用

> ID：11101560
> 
> 赞同：3
> 
> 时间：2012-06-19T13:03:25.103
> 
> 标签：delphi, themes, delphi-xe2

在设计时的遗留应用程序中（在 32 位 WinXP 下的 Delphi 6 中创建，最近移植到 64 位 Win7 下的 Delphi XE2），标准控件看起来“现代”，带有颜色渐变等。虽然在运行时，它们看起来就像旧的 Win95 版本。

如果特别是 TPageControl 和 TTabControl 中的默认颜色不会让我很难判断当前选择了哪个选项卡，那我不会太困扰。

所以我的问题是：

1.  什么会使主题在运行时不活跃？
2.  是否可以轻松（例如通过 IDE 配置）使设计时间看起来像运行时间？

笔记：

*   在项目选项中，我为每个现有目标启用了运行时主题。它没有帮助。
*   我还尝试在包含这些控件的表单中启用 GlassFrame。不幸的是，运行时的外观和感觉没有主题。
*   这个应用程序建立在许多我不掌握的内部和外部代码（只是站在巨人肩膀上的侏儒），但我可以使用它们的源代码。怀疑某些指令会在应用程序启动时禁用主题，我寻找了一些关键字，如“Theme”、“Skin”、“TStyleManager”、“SetWindowTheme”，希望自己解决这个问题。我找不到任何重要的东西（至少对我来说）。
*   我尝试使用来自 Question [Delphi XE2 VCL styles tutorial - how to change the style at runtime](https://stackoverflow.com/questions/9906312/delphi-xe2-vcl-styles-tutorial-how-to-change-the-style-at-runtime)中的信息来测试一个小型应用程序，并且效果很好。
*   剥皮我的应用程序不是我的目标。我只是希望能够在设计时直观地调整一些 GUI 元素，如果设计和运行时看起来相似，那就更容易了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T08:50:01.050

事实证明，删除 dpr 文件中的“{$R *.res}”行会使主题不可用。

在D6下，我在项目中禁用了版本信息，将“{$R *.res}”替换为“{$R 'myApp.res' 'myApp.rc'}”，使用自己的rc文件来获取版本信息在一个单独的、易于编辑的文件中，而不是被迫通过项目选项。

在 XE2 下，这不再起作用，因为在构建过程中，Delphi 经常会覆盖资源（或者不考虑，我不太确定）。我不得不重命名 rc 文件，使其与应用程序名称不匹配，因此将 "{$R ' **myApp** .res' ' **myApp** .rc'}" 替换为 "{$R ' **myApp_rc** .res' ' **myApp_rc** .rc' }”。

再次放置“{$R *.res}”（连同“{$R 'myApp.res' 'myApp.rc'}”）似乎可以使主题正确，并且不会破坏版本信息。

谢谢布赖恩让我朝着好的方向发展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:14:54.657

根据我的经验，这通常是由于 DEBUG 模式（在 IDE 中默认使用）和 RELEASE 模式之间的项目差异造成的。打开您的项目选项并滚动到应用程序（其中定义了主题样式和图标）。请注意，顶部的平台和构建选项组合为每个设置保存单独的值，我希望您会发现您的 DEBUG 构建配置启用了运行时主题，但 RELEASE 没有。

# jquery - jQuery qTip 使用 GET 方法加载本地 PHP AJAX 内容

> ID：11101562
> 
> 赞同：0
> 
> 时间：2012-06-19T13:03:27.243
> 
> 标签：jquery, ajax, qtip

我刚刚在我的网页上安装了 qTip，现在我正在尝试了解如何通过单击 qTip 中的链接来加载 AJAX 内容。我是 jQuery 和 qTip 的新手，所以请多多包涵。

我动态地创建（从 MySQL 数据库）看起来像这样的链接：

```
<a href='#' rel='717' class='qtip'>The link</a>
<a href='#' rel='718' class='qtip'>The link</a>
<a href='#' rel='719' class='qtip'>The link</a> 
```

我想在我的 qtip 中发送一个`$_GET`到`loadqtip.php`并显示该页面的信息。

我猜是这样的：

```
$("a.qtip").click(function() {

  var id = $(this).attr(rel);

  // send 'id' as GET to loadqtip.php and open the html result in qtip

}); 
```

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:10:13.757

除了在`rel`标签中携带信息，您可以使用 data-rel 可以通过[.data](http://api.jquery.com/data/)而不是.data 访问`.attr`。

```
<a href='#' data-rel='717' class='qtip'>The link</a> 
```

检查[jquery ajax](http://jqapi.com/#p=jQuery.ajax)是如何工作的。

```
$("a.qtip").click(function(e) {
    e.preventDefault();
    var id = $(this).data('rel');
    $.ajax({
        url: 'loadqtip.php',
        data: 'id=' + id,
        success: function(data) {
            //do your stuff
        }
    });
});​ 
```

希望这可以帮助

# vb.net - VB.NET 滚动到顶部网络浏览器

> ID：11101574
> 
> 赞同：0
> 
> 时间：2012-06-19T13:03:54.167
> 
> 标签：vb.net, browser

**我几乎完成了我的项目:)**
我想将页面滚动到顶部 evrey 秒

```
 WebBrowser1.ScrollBarsEnabled = True
    WebBrowser1.Document.Body.ScrollTop 
```

它不起作用：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:04:20.673

timer1.interval = 1000
Timer1.Tick：

```
wb.navigate("javascript:window.scroll(0,150);") 
```

# mysql - SQL查询错误结果

> ID：11101575
> 
> 赞同：1
> 
> 时间：2012-06-19T13:03:54.423
> 
> 标签：mysql, sql, database

我有这个查询：

```
SELECT `completed`.`ID` AS `ID`,`completed`.`level` AS `level`,`completed`.`completed_in` AS `completed_in`, COUNT(1) AS `right_answers_num` 
FROM `completed` 
INNER JOIN `history` ON `history`.`ID` = `completed`.`ID` 
INNER JOIN `questions` ON `questions`.`ID` = `history`.`question`
WHERE `completed`.`student_id` = '1' AND `questions`.`answer` = `history`.`answer`       
GROUP BY `completed`.`ID` 
ORDER BY `completed`.`completed_in` DESC 
```

我需要的是获取已完成表中每个测试的信息（id、level、completed_in、right_answer_num）
该查询的问题是，如果没有一个正确答案（history.answer = questions.answer），那么它不会返回该行，而它应该返回该行（id，level，completed_in）并且right_answer_num（counter）应该为零..

请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:10:50.937

```
SELECT 
    completed.ID AS ID,
    completed.level AS level,
    completed.completed_in AS completed_in, 
    COUNT(questions.answer) AS right_answers_num 
FROM completed
        INNER JOIN history  ON history.ID = completed.ID
        LEFT JOIN questions ON questions.ID = history.question AND questions.answer = history.answer
WHERE 
    completed.student_id = '1'  
GROUP BY 
completed.ID 
ORDER BY completed.completed_in DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:08:17.797

使用`LEFT OUTER JOIN`一个`INNER JOIN`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:08:38.577

第二个内部连接是导致问题表中没有记录的行被省略的原因。内连接只会返回在所有对应表中都有数据的行。将第二个内连接更改为左连接，如下所示：

```
SELECT 
    completed.ID AS ID,
    completed.level AS level,
    completed.completed_in AS completed_in, 
    COUNT(questions.answer) AS right_answers_num 
FROM completed
INNER JOIN history ON history.ID = completed.ID 
LEFT JOIN questions ON questions.ID = history.question
WHERE completed.student_id = 1       
GROUP BY completed.ID 
ORDER BY completed.completed_in DESC 
```

# iphone - 更改导航控制器工具栏的色调

> ID：11101579
> 
> 赞同：3
> 
> 时间：2012-06-19T13:04:08.823
> 
> 标签：iphone, ios, uinavigationcontroller, interface-builder, uitoolbar

我正在尝试使用情节提要在 IB 中设计我的应用程序界面，并将 UINavigationController 连接到 UITableViewController。在属性检查器中，我将导航控制器的“底部栏”属性设置为“工具栏”。但是，当我选择工具栏并尝试更改其色调时，我无法 - 无论我选择什么颜色，色调都保持为默认值。奇怪的是，我将导航控制器的“Top Bar”属性设置为“Navigation Bar”，而且我可以改变它的色调就好了。有谁知道为什么会这样？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T16:31:40.683

我记得在某处读到故事板只是为了帮助您可视化工具栏的布局。

您可以使用以下方法更改根视图控制器视图中工具栏的颜色确实加载方法：

```
self.navigationController.toolbar.tintColor = [UIColor redColor]; 
```

# opencv - 函数 cvFindContours 是如何工作的？

> ID：11101581
> 
> 赞同：0
> 
> 时间：2012-06-19T13:04:19.027
> 
> 标签：opencv

我`cvFindContours`在 C++ 和 OpenCV 中使用该函数。

我必须为我正在使用的函数制作文档，有人可以告诉我这个函数是如何工作的，使用哪种查找轮廓的方法以及是否可能在函数的基础上提供一些理论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:41:53.400

如[文档](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?#void%20findContours%28InputOutputArray%20image,%20OutputArrayOfArrays%20contours,%20OutputArray%20hierarchy,%20int%20mode,%20int%20method,%20Point%20offset%29)中所述：*“该函数使用 Suzuki85 算法从二进制图像中检索轮廓。”*

[有关更多信息，您可以在此处](http://webcache.googleusercontent.com/search?q=cache%3aO44VS9e4FgwJ%3atpf-robotica.googlecode.com/svn/trunk/Vision/papers/SA-CVGIP.PDF%20&hl=de&gl=de)阅读整篇论文。

# ruby-on-rails - 有没有更好的方法来做到这一点在红宝石中找到

> ID：11101583
> 
> 赞同：0
> 
> 时间：2012-06-19T13:04:23.277
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, scope

好的，所以我有这个帮手

```
def playlist_count(user, site_id)
  user.companies.local(site_id).map(&:playlists).flatten.count
end 
```

这将返回所有公司的播放列表计数

```
class Playlist < ActiveRecord::Base
  belongs_to :company
  scope :active, where('end_date >= ? AND player_id IS NOT NULL', Date.today)

class Company < ActiveRecord::Base
  has_many :playlists, :dependent => :destroy
  scope :local, lambda{ |site_id| where(:site_id => site_id) } 
```

问题是助手变得丑陋，另一个问题是我需要活动的播放列表（由我在播放列表模型中的范围定义）

有没有办法清理我的助手或使用范围来获取所有用户公司的活动播放列表计数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:23:31.153

您可以反过来运行查询：

```
Playlist.active.where(:company_id => user.companies.local(site_id)).count 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:15:44.757

您可以将范围应用于关联。试试这个：

```
user.companies.local(site_id).map { |company| company.playlists.active.count }.sum 
```

另一个优点是它将执行`select count(*) ...`SQL 语句，而不是从数据库中获取所有活动的播放列表并在 Ruby 中计算它们。

如果您关心性能，那么在单个 SQL 语句中加入表并计算所有用户公司的活动播放列表会更有效，而不是遍历公司并为每个公司进行计数查询。

# php - 敏捷工具包中的 onSubmit() 与 isSubmitted()

> ID：11101587
> 
> 赞同：1
> 
> 时间：2012-06-19T13:04:24.090
> 
> 标签：php, user-interface, frameworks, atk4

很抱歉问这个问题，但是在阅读之前，重新阅读文档以及我感到困惑的所有更改......哪个是测试表格的首选`onSumbit()`方法`isSubmitted()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:31:03.803

这两种方法本质上都是做同样的事情。isSubmitted() 已在较旧版本的 PHP 中使用，在该版本中不容易创建闭包。

```
if($form->isSubmitted()){
    ...
} 
```

但是使用闭包，您现在可以像这样创建函数回调：

```
$form->onSubmit(function($form){
    ...
}); 
```

[https://github.com/atk4/atk4/blob/master/lib/Form/Basic.php#L401](https://github.com/atk4/atk4/blob/master/lib/Form/Basic.php#L401)

一个重要的变化是 onSubmit() 将[捕获一些异常](https://github.com/atk4/atk4/blob/master/lib/Form/Basic.php#L370)并自动将它们显示在表单上。因此，如果您的模型有这个

```
throw $this->exception('Wrong data','ForUser')->setField('name'); 
```

然后“名称”字段将突出显示此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:09:26.950

看起来你有两个不同的东西相互混淆。

`onSubmit()`是一个原生 JavaScript 事件，在提交表单时触发，并在表单发送到服务器之前执行您希望的任何操作（如果它甚至被发送）

`isSubmitted()`看起来像一个自定义函数，可能在提交表单时调用，但不是 JavaScript 原生的，可能是框架的一部分。

# database - [RuntimeException：没有 EntityManager 绑定到此线程。尝试使用 @play.db.jpa.Transactional 注释您的操作方法]

> ID：11101593
> 
> 赞同：1
> 
> 时间：2012-06-19T13:04:52.837
> 
> 标签：database, playframework

一旦我尝试使用 sql 语句插入将数据保存到数据库中，这就是问题所在。

我的功能是这样的：

```
public void save(){
    JPA.em().persist(this);
} 
```

和

```
public static Result registered() {
    Form<User> requestform = form(User.class).bindFromRequest();
    if(requestform.hasErrors()){

        return badRequest("<p>fehlerhafte eingabe!</p>").as("text/html");
    } else {
        User user = requestform.get();
        String fullname = user.fullname;
        String email = user.email;
        String password = user.password;
        String username = user.username;
        new User(username, password, fullname, email).save();
    }

    return redirect(controllers.routes.Application.index());

} 
```

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:28:03.300

就像调试消息说的那样，您没有绑定到您的方法的实体管理器，因为它们没有被标记为事务。

```
@play.db.jpa.Transactional
public static Result registered() { 
```

此外，如果您使用的是 EBean，您可以为您的 User 类扩展 Model，它带有许多方便的内置函数供数据库使用，请参阅此处的文档：[http ://www.playframework.org/documentation/2.0.1/ JavaEbean](http://www.playframework.org/documentation/2.0.1/JavaEbean)

# silverlight - Silverlight 数据刷新循环

> ID：11101595
> 
> 赞同：0
> 
> 时间：2012-06-19T13:05:00.270
> 
> 标签：silverlight, ria

我敢肯定，有尽可能多的仪表板应用程序，人们已经遇到过这个问题。我有一个需要连续循环的 SL 应用程序，调用 RIA 服务来获取数据更新，并有一些最小的计时器延迟（例如 3 秒）。它是一种 MVVM 解决方案，在客户端刷新的数据可能会包装在 PagedCollectionView 中。

是否有任何常见的（tr：久经考验的）方法来第一次获取数据并以这种方式更新/附加新数据？它是纯只读数据，无需担心编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:06:57.223

您应该能够使用计时器（未设置为重复）来提取数据。当数据返回时，重新启动计时器。

# jquery - IE 8 中的 jquery .find() - 不匹配

> ID：11101596
> 
> 赞同：1
> 
> 时间：2012-06-19T13:05:06.100
> 
> 标签：jquery, internet-explorer, internet-explorer-8, internet-explorer-7

我为一个小项目开发了一个小幻灯片，效果很好。在 Google Chrome、Opera、Friefox 和 IE 9 中。但在 IE 8 和 IE 7 中它不起作用。

我检测到问题 - 问题是 IE 7 和 IE 8 在 dom 中找不到元素。

这里是：

```
window.alert(thisWrapper.find('img').length); // returns 4 in all browser - in IE7 and IE8 it returns 0
thisWrapper.find('img').each(function(){
// do something with it

    }); 
```

我在典型的 dom-check 中启动了该功能：

```
 jQuery(document).ready(function(){ /* start sldier here */}); 
```

任何解决方案为什么它不会像在其他浏览器中一样工作？

编辑：

thisWrapper 包含如下内容： jQuery('#slider')

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T18:03:32.777

> 在回应您的评论时，我注意到我的模板是 HTML5 - 所以我刚刚通过谷歌添加了 html5shiv，它工作正常！

# java - 如何在memcached中取消从get返回的对象

> ID：11101601
> 
> 赞同：1
> 
> 时间：2012-06-19T13:05:21.017
> 
> 标签：java, windows-xp, memcached, spymemcached

完成 set 后，当我尝试从 memcached 获取对象时，它给了我一个散列值，但我想要使用 set 函数调用**设置的对象内的值...**

有谁知道如何解决它？

### - 对象是具有两个字符串属性的类的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:11:27.023

当您从 memcached 取回 java 对象时，Spymemcached 会反序列化并解压缩它们。如果你得到一个 Object ，那么你应该能够将它类型转换为相应的 java 对象。

# iphone - 内存泄漏，仪器 ipad

> ID：11101604
> 
> 赞同：1
> 
> 时间：2012-06-19T13:05:35.710
> 
> 标签：iphone, ios, memory

当我从 Product -> Analyze 检查我的应用程序时没有问题。但是当我在仪器上检查它时，它显示出很少的泄漏对象，比如。

**泄漏对象** **负责库**

1)Malloc 16字节CorePDF

2)NSMuttableArray CorePDF

3)CPTextLine CorePDF

4)CPMemoryOwner CorePDF等

我该如何解决这些泄漏（我只是在 iPad 上显示一个 pdf 文件，当我双击 pdf 时它会放大并且那个时候 Object Leaked in Instrument ）。如果仪器教程有任何好的链接。请给我。

谢谢

我只是在 webView 上显示一个 pdf 文件。代码是

```
-(void)viewDidLoad
{
    [super viewDidLoad];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"brochure1" ofType:@"pdf"];
    NSURL *url = [NSURL fileURLWithPath:path];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    [webview loadRequest:request];
    [webview setScalesPageToFit:YES]; 
} 
```

谁能告诉我。我在资源文件夹中使用的 PDF 文件有任何限制吗？因为我的设计师在 PDF 文件中提供索引（通过软件）？

再次感谢

# java - ANTLR tree walker，多次返回值

> ID：11101606
> 
> 赞同：1
> 
> 时间：2012-06-19T13:05:37.960
> 
> 标签：java, parsing, tree, antlr, abstract-syntax-tree

我有一个像这样的树行者：

```
function:
    ^(FUNCTION_TOK fcname=IDENTIFIER param=functionParameters*){
        a_param_arrayList.add(param);
    }
;

functionParameters returns [Object sth]:
    ^(PARAM_TOK value=IDENTIFIER){ sth = $value.getText();}
; 
```

这是一个简单的场景，我只是想将参数添加到数组列表中，但是上面的代码（**a_param_arrayList.add(param)**）只会收集第一个参数而忽略其他参数。但是**functionParameters**实际上是解析多个参数。

有谁知道如何修理这个树行者？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:37:55.277

我通过使用规则的参数来解决这个问题。

```
function:
    ^(FUNCTION_TOK fcname=IDENTIFIER functionParameters[a_param_arraylist]*)
;

functionParameters [ArrayList arr] returns [Object sth]:
    ^(PARAM_TOK value=IDENTIFIER){ sth = $value.getText(); arr.add(sth);}
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:07:04.707

您是否尝试过列表标签分配（+=）？见[http://www.antlr.org/wiki/display/ANTLR3/ANTLR+Cheat+Sheet](http://www.antlr.org/wiki/display/ANTLR3/ANTLR+Cheat+Sheet)

```
^(FUNCTION_TOK fcname=IDENTIFIER param += functionParameters*){ 
```

# java - Hibernate Criteria.setMaxResults() 在 Oracle 11g 上失败

> ID：11101609
> 
> 赞同：2
> 
> 时间：2012-06-19T13:05:39.683
> 
> 标签：java, oracle, hibernate, pagination, paging

当使用休眠使用**org.hibernate.dialect.Oracle10gDialect**或**org.hibernate.dialect.OracleDialect**从 Oracle 11g DB 检索数据时， 我得到以下信息：

```
org.hibernate.exception.SQLGrammarException: could not execute query
Caused by: java.sql.SQLSyntaxErrorException: ORA-00923: FROM keyword not found where expected 
```

查看日志，我们可以看到查询：

```
select top ? this_.LI_ILN as LI1_8_0_, this_.COUNTRY_CODE ... 
```

显然，数据库无法识别关键字，这就是问题所在，因为在 Oracle 中，分页只能通过使用**ROWNUM**来完成，这是 Hibernate 应该知道的。

休眠配置如下所示：

```
<hibernate-configuration>
<session-factory name="HibernateSessionFactory">
    <property name="hibernate.bytecode.use_reflection_optimizer">false</property>
    <property name="hibernate.connection.driver_class">oracle.jdbc.OracleDriver</property>
    <property name="hibernate.connection.password">...</property>
    <property name="hibernate.connection.url">...</property>
    <property name="hibernate.connection.username">...</property>
    <property name="hibernate.default_schema">...</property>
    <property name="hibernate.dialect">org.hibernate.dialect.OracleDialect</property>
    <property name="hibernate.search.autoregister_listeners">false</property>
    <property name="hibernate.show_sql">true</property>
    <property name="hibernate.hbm2ddl.auto">validate</property>
    <property name="hibernate.transaction.auto_close_session">false</property>

    <mapping resource="HB_Mappings/Supplier.hbm.xml" />
</session-factory> 
```

查询是这样完成的：

```
Criteria crit = sessionFactory.getCurrentSession().createCriteria(Supplier.class);
crit.setFirstResult(50 * pageIndex);
crit.setMaxResults(50);

List<Supplier> list = crit.list(); 
```

任何帮助表示赞赏。

* * *

**解决了：**

忘了提到我正在使用 spring 其中 applicationContext.xml 看起来像：

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation">
        <value>classpath:HB_Mappings/hibernate.cfg.xml</value>
    </property>
    <property name="hibernateProperties">
        <value>hibernate.dialect=org.hibernate.dialect.HSQLDialect</value>
    </property>
</bean> 
```

它覆盖了 hibernate.cfg.xml 的属性......

自我提醒：轻松复制粘贴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:32:02.097

OracleDialect 已弃用，请参见此处： [http ://docs.jboss.org/hibernate/core/4.1/javadocs/org/hibernate/dialect/OracleDialect.html](http://docs.jboss.org/hibernate/core/4.1/javadocs/org/hibernate/dialect/OracleDialect.html)

改用 Oracle10gDialect： http: [//docs.jboss.org/hibernate/core/4.1/javadocs/org/hibernate/dialect/Oracle10gDialect.html](http://docs.jboss.org/hibernate/core/4.1/javadocs/org/hibernate/dialect/Oracle10gDialect.html)

还要检查一下，并确保您使用的是最新的 Oracle JDBC 驱动程序。

[https://community.jboss.org/wiki/SupportedDatabases2](https://community.jboss.org/wiki/SupportedDatabases2)

# sqlite - 从命令行获取插入的sqlite

> ID：11101614
> 
> 赞同：1
> 
> 时间：2012-06-19T13:05:55.340
> 
> 标签：sqlite, bash

我使用 bash 访问 sqlite3 数据库。

有没有办法以这种方式获取最后插入的 id，因为在 sqlite-webpage (http://www.sqlite.org/c3ref/last_insert_rowid.html) 我只看到 C-API，但没有办法做到这一点在命令行上。

函数 last_insert_rowid() 也不起作用：

```
sqlite> last_insert_rowid();
SQL error: near "last_insert_rowid": syntax error 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:11:00.983

应该

```
select last_insert_rowid(); 
```

# php - POST 请求挂在文件上传

> ID：11101616
> 
> 赞同：0
> 
> 时间：2012-06-19T13:06:15.100
> 
> 标签：php, apache

在附加文件之前，对服务器的 POST 请求工作正常。表单作为多部分发送。

在 Apache 的日志文件中，请求出现：200 0

据我所知， 0 表示没有返回任何内容？为什么会这样？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:40:08.547

这实际上是我们的防火墙阻止包含文件上传的流量的问题。防火墙的定义已自动更新，其中一项更新是针对 IIS（我们不使用）缓冲区溢出古老性的修复。防火墙在收到上传后返回一个空响应，这破坏了一切。

# java - Mockito 与 Java async->sync 转换器

> ID：11101623
> 
> 赞同：9
> 
> 时间：2012-06-19T13:06:37.347
> 
> 标签：java, asynchronous, mockito

我有一个异步方法，我正在使用倒计时锁存器转换为同步方法。我在不使用 mockito 的超时功能的情况下努力编写单元测试。我不知道如何让验证方法等待异步方法调用：

```
public interface SyncExchangeService {
    boolean placeOrder(Order order);
}
public interface ExchangeService {
    void placeOrder(Order order, OrderCallback orderResponseCallback);
}

public interface OrderCallback {
    public void onSuccess();
    public void onFailure();
}

public class SyncExchangeServiceAdapter implements SyncExchangeService {
    private ExchangeService exchangeService;

    public SyncExchangeServiceAdapter(ExchangeService exchangeService) {
        this.exchangeService = exchangeService;
    }

    @Override
    public boolean placeOrder(Order order) {

        final CountDownLatch countdownLatch=new CountDownLatch(1);
        final AtomicBoolean result=new AtomicBoolean();
        exchangeService.placeOrder(order, new OrderCallback() {

            @Override
            public void onSuccess() {
                result.set(true);
                countdownLatch.countDown();
            }

            @Override
            public void onFailure(String rejectReason) {
                result.set(false);
                countdownLatch.countDown();
            }
        });
        try {
            countdownLatch.await();
        } catch (InterruptedException e) {
            throw new RuntimeException(e);
        }
        return result.get();
    }
}

public class SyncExchangeServiceAdapterTest {
    private ExchangeService mockExchange=mock(ExchangeService.class);
    private SyncExchangeServiceAdapter adapter=new SyncExchangeServiceAdapter(mockExchange);
    private Boolean response;
    private ArgumentCaptor<Boolean> callback=CaptorArgumentCaptor.forClass(OrderCallback.class);
    private CountDownLatch latch=new CountDownLatch(1);

    @Test
    public void testPlaceOrderWithSuccess() throws Exception {
        final Order order=mock(Order.class);
         Executors.newSingleThreadExecutor().submit(new Runnable() {
            @Override
            public void run() {
                response=adapter.placeOrder(order);
                latch.countDown();
            }
        });
            verify(mockExchange,timeout(10) ).placeOrder(eq(order), callbackCaptor.capture());
//the timeout method is not really recommended and could also fail randomly if the thread takes more than 10ms

        callbackCaptor.getValue().onSuccess();
        latch.await(1000,TimeUnit.MILLISECONDS);
            assertEquals(true,response);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T04:53:06.027

对于这些类型的测试，我喜欢使用一个名为[awaitility](http://code.google.com/p/awaitility/)的小库。您可以使用倒计时闩锁自己完成，但正如您所看到的，您必须用砍刀破坏您的测试才能完成这项工作。

在此测试中，您应该在等待闩锁后调用 verify。

您的代码中的另一个问题是`private Boolean response`. 由于您要在另一个线程中更改它，因此您应该将其设为`AtomicBoolean`或至少声明它`volatile`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T20:03:36.453

我不确定我是否理解正确。如果你想测试一个线程无限期地等待直到另一个线程做某事，那么我会说你做不到。因为这意味着您正在询问程序是否终止。相反，您可以做两件事。

1.  定期进行并发测试（根据定义，它是随机的，并且不能确定代码是否正确）。您使用两个线程创建复杂的测试，这些线程使用锁并模拟服务并使用 yeld() 方法。在关键部分，您可以测试是否没有错误的顺序。当然你必须运行它很多次，所以它会花费你超过 10 毫秒
2.  假设 CountDownLatch 正常工作，模拟它并检查它的函数是否以正确的顺序调用

# dynamics-crm - Dynamics CRM 2011 表单中的 window.print() 问题

> ID：11101625
> 
> 赞同：1
> 
> 时间：2012-06-19T13:06:41.407
> 
> 标签：dynamics-crm, dynamics-crm-2011, dynamics-crm-online

我们一直在实施 Dynamics CRM 2011 解决方案，其中一项要求是打印出包含子网格和图表的定制样式表单。简短的故事是单击“打印”链接（调用该`window.print()`方法）会引发一系列 JavaScript 错误。但是，这些不是致命的，单击每个都将允许打印表单。

> 行：73
> 字符：24234
> 错误：属性“isNull”的值为 null 或未定义，不是函数对象。
> 网址：https：//aks7.crm4.dynamics.com/_static/_forms/controls/img.lu.htc?ver=-115872263
> 
> （请注意，上面的双冒号是故意的！）

我们早期的想法之一是问题归结为不受支持的自定义，因此作为测试，我创建了一个具有基本形式的新实体。在功能区上，我添加了一个调用该`window.print()`方法的打印按钮。结果是完全一样的。我还在 CRM Online 上复制了这个问题。

结果是`window.print()`不支持使用，或者我们发现了一个错误或两者兼而有之。有针对这个的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:49:41.987

您必须自动执行打印预览，而不是使用 window.print。

我使用它，但它不受支持：

```
parent.document.getElementById('Mscrm.Jewel-Default').children[0].click();
parent.document.getElementById('Mscrm.Jewel.PrintPreview-Menu16').click(); 
```

[http://blog.customereffective.com/blog/2011/08/printing-in-crm-2011.html](http://blog.customereffective.com/blog/2011/08/printing-in-crm-2011.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:54:24.877

我怀疑它不受支持，因为本机打印功能在发送打印之前会呈现不同的页面（建议这是他们`.htc`文件某些功能的解决方法）。

你不能采取同样的方法吗？“打印预览”的存根 URL 位于`.../_forms/print/print.aspx?allsubgridspages=true&formid=<form-guid>&id=%7b<record-guid>%7d&objectType=<object-type-code>`. 您可以包装这是一个 HTML Web 资源并从您的 HTML 保持框架调用 CRM 打印按钮功能。

# php - 教义和继承映射：子实体上的关联

> ID：11101630
> 
> 赞同：2
> 
> 时间：2012-06-19T13:07:06.157
> 
> 标签：php, doctrine-orm

我正在尝试查询一个实体并加入另一个实体，该实体是继承映射结构中的子实体。

情况是：

*   我有一个父实体（例如动物）
*   我有一个子实体（例如狗）
*   我有一个与孩子 1:1 关联的实体（狗屋）

我想查询所有的狗屋和教义，让我也找到他们的狗主人。

我写的简单 DQL 查询是：

```
SELECT o FROM MyBundle:DogHouse h JOIN h.dog d 
```

错误是：

> 注意：未定义索引：../vendor/doctrine/lib/Doctrine/ORM/Query/SqlWalker.php 第 779 行中的 id，类：ErrorException

查看堆栈跟踪似乎学说正试图与子实体而不是父实体上的 id 连接

这是说明这种情况的类

```
/**
 *  Animal
 *
 * @ORM\Entity
 * @ORM\Table(name="animal")
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="type", type="integer")
 * @ORM\DiscriminatorMap({"1"="cat",  "2"="dog"})
 */
class Animal
{
    /**
     * @ORM\Column(name="animal_id", type="integer", nullable=false)
     * @ORM\Id
     */
    protected $id;

    /**
     * @ORM\Column(name="name", type="string", length=200, nullable=false)
     */
    protected $name;

    /* getters, setters... */
}

/**
 * Dog
 *
 * @ORM\Entity
 * @ORM\Table(name="dog")
 */
class Dog extends Animal
{
    /**
     * @ORM\OneToOne(targetEntity="DogHouse", inversedBy="dog")
     */
    private $dogHouse;

    /* getters, setters... */
}

/**
 * Dog House
 * 
 * @ORM\Table(name="dog_house")
 * @ORM\Entity
 */
class DogHouse
{
    /**
     * @ORM\Column(name="dog_house_id", type="integer", nullable=false)
     * @ORM\Id
     */
    private $id;

    /**
     * @ORM\OneToOne(targetEntity="Dog", mappedBy="doghouse")
     */
    private $dog;

    /* getters, setters... */
} 
```

注意： [这篇文章](https://groups.google.com/group/doctrine-user/browse_thread/thread/c48af49a33c8f9fa/c9528deaf08987c4#c9528deaf08987c4)涉及完全相同的问题，没有得到回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:50:37.753

您的映射设置不正确...

Dog / Doghouse 之间的一对一关系应如下所示。

```
class DogHouse....

 /**
 * @ORM\OneToOne(targetEntity="Dog", mappedBy="doghouse")
 */
private $dog; 
```

确保您的 mappedBy="doghouse"

# asp.net - ASP.NET MVC3如何使用间隔为一小时的计时器执行控制器的动作方法

> ID：11101636
> 
> 赞同：2
> 
> 时间：2012-06-19T13:07:49.643
> 
> 标签：asp.net, asp.net-mvc-3, vbscript, c#-3.0, scheduled-tasks

**你好**

我正在使用 asp.net mvc3。我有一个特殊的控制器，它有一种特殊的动作方法。我需要使用计时器以一小时的间隔执行此操作方法。

任何最佳和有效的想法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T10:11:39.187

我能够使用 VB 脚本和 windows 时间表来解决这个问题。请按照以下步骤操作。

1.  制作如下所示的 VB 脚本来调用您的控制器动作。给一些名字，比如 schedule.vbs

    ```
    Call ScheduleTask() 

    Sub ScheduleTask()
    On Error Resume Next

    Dim objRequest
    Dim URL

    Set objRequest = CreateObject("Microsoft.XMLHTTP")
    URL = "http://localhost/controller/action"

    objRequest.open "GET", URL , false

    objRequest.Send

    Set objRequest = Nothing

    End Sub 
    ```

2.  根据需要制作“schedule.vbs”文件的 Windows 时间表。如果执行 schedule.vbs 文件存在权限问题，请给予所需权限。

谢谢

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-04-03T23:53:59.323

Azure Functions 助您一臂之力！它正是为此而设计的。您可以使用计时器触发器来安排功能。

[https://docs.microsoft.com/en-us/azure/azure-functions/functions-overview](https://docs.microsoft.com/en-us/azure/azure-functions/functions-overview)

# c# - 在 C# 中序列化树对象

> ID：11101637
> 
> 赞同：4
> 
> 时间：2012-06-19T13:07:55.273
> 
> 标签：c#, xml-serialization, binary-tree, circular-reference

我有一个简单的树结构，其中包含以下内容

```
public class MyTree {
 public MyTree Parent { get; set;}
 public List<MyTree> Children {get; set;}
[...]
} 
```

目前这门课要复杂得多，但我认为这是我的问题的重要部分。该代码已经很老了，我不能只更改完整的结构，因为它用于我必须维护的项目的许多领域。

我的主要问题是我无法序列化该对象。（我从根对象开始序列化）我收到以下消息：

> 序列化 MyTree 类型的对象时检测到循环引用

似乎很清楚为什么会发生这种情况，因为我已经连接了孩子和父母。

但是我该如何解决这个问题呢？例如，我可以禁用父属性的序列化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:08:41.213

将父项标记为未序列化项（[XmlIgnore](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributes.xmlignore.aspx)、[SoapIgnore](http://msdn.microsoft.com/en-us/library/system.xml.serialization.soapattributes.soapignore%28v=vs.71%29.aspx)或[NonSerialized](http://msdn.microsoft.com/en-us/library/system.nonserializedattribute.aspx)）。检查不同的[那里](https://stackoverflow.com/a/2206993/182344)。

在您的情况下，您将父级添加到 xml，然后尝试添加子级。每个孩子都有指向父级的链接，并且序列化程序尝试再次序列化父级，依此类推..

# javascript - ActiveXObject 未定义且找不到变量：ActiveXObject

> ID：11101641
> 
> 赞同：21
> 
> 时间：2012-06-19T13:08:08.937
> 
> 标签：javascript, sencha-touch-2

我想在本地创建文本文件，当我在 Google chrome 中浏览时单击按钮，它显示错误，例如 **ActiveXObject 未定义**，当我在 safari 中浏览时单击按钮，它显示错误，例如 **找不到变量：ActiveXObject** . 任何人都可以帮助我。我怎样才能实现和创建文件 .Thanq

```
<script>
      function createFile() {    
      var object = new ActiveXObject("Scripting.FileSystemObject");       
      var file = object.CreateTextFile("C:\\Hello.txt", true);
      file.WriteLine('Hello World');
      alert('Filecreated');
      file.WriteLine('Hope is a thing with feathers, that perches on the soul.'); 
      file.Close();
      }
    </script>
<input type="Button" value="Create File" onClick='createFile()'> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-19T13:09:18.673

`ActiveXObject`仅在 IE 浏览器上可用。所以所有其他用户代理都会抛出错误

在现代浏览器上，您可以改用[File API](https://developer.mozilla.org/en/Using_files_from_web_applications)或[File writer API](http://www.w3.org/TR/file-writer-api/)（目前[仅在 Chrome 上](http://caniuse.com/filesystem)实现）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-19T13:09:33.307

`ActiveXObject`是非标准的，仅受 Windows 上的 Internet Explorer 支持。

在不使用插件的情况下，没有本地跨浏览器写入文件系统的方式，即使是草稿[文件 API](http://www.w3.org/TR/FileAPI/)也提供只读访问权限。

如果您想跨平台工作，那么您需要查看已签名的 Java 小程序（请记住，这仅适用于 Java 运行时可用的平台）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T13:28:58.243

Web 应用程序可以通过调用`window.requestFileSystem()`. 在 Chrome 中工作。

```
window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;
var fs = null;

window.requestFileSystem(window.TEMPORARY, 1024 * 1024, function (filesystem) {
    fs = filesystem;
}, errorHandler);

fs.root.getFile('Hello.txt', {
    create: true
}, null, errorHandler);

function errorHandler(e) {
  var msg = '';

  switch (e.code) {
    case FileError.QUOTA_EXCEEDED_ERR:
      msg = 'QUOTA_EXCEEDED_ERR';
      break;
    case FileError.NOT_FOUND_ERR:
      msg = 'NOT_FOUND_ERR';
      break;
    case FileError.SECURITY_ERR:
      msg = 'SECURITY_ERR';
      break;
    case FileError.INVALID_MODIFICATION_ERR:
      msg = 'INVALID_MODIFICATION_ERR';
      break;
    case FileError.INVALID_STATE_ERR:
      msg = 'INVALID_STATE_ERR';
      break;
    default:
      msg = 'Unknown Error';
      break;
  };

  console.log('Error: ' + msg);
} 
```

更多信息[在这里](http://www.html5rocks.com/en/tutorials/file/filesystem/)。

# cuda - CUDA 中的广义霍夫变换 - 如何加快分箱过程？

> ID：11101642
> 
> 赞同：4
> 
> 时间：2012-06-19T13:08:14.783
> 
> 标签：cuda, gpu, gpgpu, hough-transform

正如标题所说，我正在对并行计算机视觉技术进行一些个人研究。使用 CUDA，我正在尝试实现霍夫变换的 GPGPU 版本。我遇到的唯一问题是在投票过程中。我正在调用 atomicAdd() 来防止多个同时写入操作，而且我似乎没有获得太多的性能效率。我在网上搜索过，但没有找到任何方法可以显着提高投票过程的性能。

非常感谢您在投票过程中提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:57:58.830

I'm not familiar with the Hough transform, so posting some pseudocode could help here. But if you are interested in voting, you might consider using the CUDA vote intrinsic instructions to accelerate this.

Note this requires 2.0 or later compute capability (Fermi or later).

If you are looking to count the number of threads in a *block* for which a specific condition is true, you can just use `__syncthreads_count()`.

```
bool condition = ...; // compute the condition
int blockCount = __syncthreads_count(condition); // must be in non-divergent code 
```

If you are looking to count the number of threads in a *grid* for which the condition is true, you can then do the `atomicAdd`

```
bool condition = ...; // compute the condition
int blockCount = __syncthreads_count(condition); // must be in non-divergent code
atomicAdd(totalCount, blockCount); 
```

If you need to count the number of threads in a group smaller than a block for which the condition is true, you can use `__ballot()` and `__popc()` (population count).

```
// get the count of threads within each warp for which the condition is true
bool condition = ...; // compute the condition in each thread
int warpCount = __popc(__ballot()); // see the CUDA programming guide for details 
```

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-02T02:55:32.687

在很短的时间里，我确实使用了投票过程......

最后， atomicAdd 在两种情况下都变得更快

这个链接非常有用： [warp-filtering](https://devblogs.nvidia.com/parallelforall/cuda-pro-tip-optimized-filtering-warp-aggregated-atomics/)

这是我解决的问题[使用 Shuffle + ballot + popc 仅从 Warp 中的选定通道写入数据](https://stackoverflow.com/questions/39107434/write-data-only-from-selected-lanes-in-a-warp-using-shuffle-ballot-popc?noredirect=1#comment65573023_39107434)

你不是在寻找关键部分吗？

# java - 带有可选字符串的 Java 正则表达式模式

> ID：11101649
> 
> 赞同：5
> 
> 时间：2012-06-19T13:08:43.053
> 
> 标签：java, regex

我有这样的字符串：

```
something something [[abcd]] blah blah
something something [[xyz|abcd]] blah blah 
```

在这两种情况下我想要的是：

```
something something abcd blah blah 
```

如何在 Java 中仅使用 1 个正则表达式模式来做到这一点？我可以用这个做第一个案例：

```
Pattern pattern = Pattern.compile("\\[\\[(.+?)\\]\\]");
Matcher m = patternLinkRemoval.matcher(text);
return m.replaceAll("$1"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T13:11:59.970

添加以下内容：

*   除`|`零次或多次以外的任何内容：`[^|]*`
*   ...后跟一个`|`：`|`
*   ...可选：`?`
*   `(?: ... )`如果您不想捕获该事物，请使用它进行分组。

这是一个完整的例子：

```
String text1 = "something something [[abcd]] blah blah";
String text2 = "something something [[xyz|abcd]] blah blah";

Pattern pattern = Pattern.compile("\\[\\[(?:[^|]*\\|)?(.+?)\\]\\]");

System.out.println(pattern.matcher(text1).replaceAll("$1"));
System.out.println(pattern.matcher(text2).replaceAll("$1")); 
```

**输出：**

```
something something abcd blah blah
something something abcd blah blah 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:15:17.497

自己找的！`\\[\\[(?:.+?\\|)?(.+?)\\]\\]`

# c#-4.0 - 构建 Metro 应用程序的标准架构

> ID：11101650
> 
> 赞同：0
> 
> 时间：2012-06-19T13:08:47.723
> 
> 标签：c#-4.0, architecture, windows-8, windows-runtime, microsoft-metro

我是 Metro 应用程序的新手......并且已经在 WPF（MVVM）上开发了一段时间......

我还看到诸如`Binding`Engine 之类的 WPF 也与 Metro 应用程序一起存在。

所以在这里我问几个问题..

**什么是开发可维护的 Meto 应用程序的合适架构。**

是
1) MVC
2) MVVM

**是否有任何框架可用于使用上述架构开发相同的框架。**

**MEF 可以与 mero 应用程序一起使用吗**（我不这么认为，但仍需要确认）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:18:25.533

MVVM 是一个非常好的选择，并且可以使用用于 WinRT 的 MVVM Light。关于 MEF，有一个 SO 问题对此进行了详细说明（[如何从 Metro 应用程序中使用 MEF 加载/导入 dll？](https://stackoverflow.com/questions/9669097/how-to-load-import-dll-with-mef-out-of-metro-app)）

**编辑：**

适用于 Windows 8 的 MVVM Light 下载[http://mvvmlight.codeplex.com/releases/view/88894](http://mvvmlight.codeplex.com/releases/view/88894)

公告：http: [//blog.galasoft.ch/archive/2012/06/03/mvvmlight-v4-for-windows-8-rp-is-available.aspx](http://blog.galasoft.ch/archive/2012/06/03/mvvmlight-v4-for-windows-8-rp-is-available.aspx)

# django - Django Forms，在 Meta 类中有多个“模型”？

> ID：11101651
> 
> 赞同：11
> 
> 时间：2012-06-19T13:08:48.877
> 
> 标签：django, django-forms, django-admin, django-registration

我们可以在 Form 的“元类”部分定义多个模型吗？

这是我的例子：

```
from django import forms

from django.contrib.auth.models import User , Group

from django.forms import ModelForm

from django.utils.translation import ugettext as _

from profiles.models import Student , Tutor 

class RegistrationForm(ModelForm):
    email           = forms.EmailField(label=_('Email Address:'))
    password        = form.CharField(label=_('Passsword:') , widget = forms.PasswordInput(render_value = False))
    password1       = form.CharField(label=_('Verify Passsword:') , widget = forms.PasswordInput(render_value = False))

    class Meta:
        model = [Student , Tutor] ## IS THIS TRUE ??? 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T13:24:16.670

不，但你不需要。无需实例化和验证*单个*表单，而是针对您需要支持的每种类型的表单执行此操作。

```
# Define your model forms like you normally would
class StudentForm(ModelForm):
    ...

class TutorForm(ModelForm):
    ...

class RegistrationForm(Form):
    email = ...
    ...

# Your (simplified) view:
...
context = {
    'student_form': StudentForm(),
    'tutor_form': TutorForm(),
    'registration_form': RegistrationForm()
}
return render(request, 'app/registration.html', context)

# Your template
...
<form action="." method="post">
    {{ student_form }}
    {{ tutor_form }}
    {{ registration_form }}
    <input type="submit" value="Register">
</form> 
```

如果这意味着字段名称在表单中重复，请使用[表单前缀](https://docs.djangoproject.com/en/dev/ref/forms/api/#prefixes-for-forms)对其进行排序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T13:18:12.757

不，不可能在 Meta 类中定义多个模型。

您可以为每个模型创建一个模型表单，然后使用[前缀](https://docs.djangoproject.com/en/dev/ref/forms/api/#prefixes-for-forms)参数将多个表单放在同一个 html`<form>`标记中。

然后在您的视图中，您可以在保存之前检查每个模型表单是否有效。

请注意，django contrib.auth 应用程序带有[`UserCreationForm`](https://docs.djangoproject.com/en/dev/ref/forms/api/#prefixes-for-forms)（[查看源代码](https://github.com/django/django/blob/1.4/django/contrib/auth/forms.py#L56)）。您可能可以重复使用它，而不是编写自己的表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-06T06:44:01.970

# 在你的 form.py 中定义你的模型

`form1`#使用第一个模型

`form2`#使用第二个模型

# 现在在 get 方法中编辑你的views.py

`args = {`

`"form1" = form1(),`

`"form2" = form2()`

`}`

`return render(request, "template_name", args)`

# 现在编辑您的模板

`<form .....>`

`form1.as_p`

`form2.as_p`

`...`

`</form>`

# php - 基于动态金额的积分公式

> ID：11101653
> 
> 赞同：1
> 
> 时间：2012-06-19T13:09:01.913
> 
> 标签：php, formula

我正在尝试根据银行账户中有多少钱来创建一个动态积分系统。例如，如果某人有 20 点，而我们的银行账户中有 100 美元，我希望公式返回类似于 1 美元的东西。

**在这一点上，我不太关心这个比率——更多的是关于到达那里的公式。**

到目前为止，我已经想出了一些不同的公式，

```
$val = (1 / $this->bank) * $amt; //goes the wrong way
$val = ($amt / $this->bank) * 5000; //isn't a good ratio 
```

假设 val 是您可以使用所有积分获得的金额，bank 是银行中有多少，而 $amt 是用户拥有的积分数量。

朝正确的方向轻推会很有帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:29:47.140

说 $percentage 是您希望在您的积分和银行账户金额之间获得 1$ 奖励的百分比，您将拥有：

```
$percentage = 20;
$val = $amt * $this->bank / ($percentage * 100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:31:02.100

```
$bank * ($points / 2000) 
```

这满足了您的测试用例，给出`1`了`$bank = 100`和`$points = 20`。

# character-encoding - 单击后退按钮时显示 IE 奇怪的字符

> ID：11101654
> 
> 赞同：1
> 
> 时间：2012-06-19T13:09:11.153
> 
> 标签：character-encoding, internet-explorer-8, internationalization

目前我正在开发一个用户可以切换语言的 i18n 项目。

字符编码为 utf-8

该问题仅在 IE8 中发生：

*   当前用户在**https**页面中。

*   执行任何操作后转到**http**页面 - 例如单击静态页面链接

*   现在从当前 ( **http** ) 页面单击返回按钮

*   奇怪的字符出现而不是原始的捷克字符。

在所有其他浏览器（如 chrome、firefox 等）中完美运行。

有人遇到过这种问题吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:29:59.323

您是否验证了您看到此问题的页面中的字符编码是否正确定义？

[此 W3C 页面](http://www.w3.org/International/questions/qa-html-encoding-declarations)上描述了应该如何完成此操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T09:58:58.477

放弃 Internet Explorer 8 支持？

# java - 将数据复制到 SD 卡时出现 FileNotFoundException - Android

> ID：11101664
> 
> 赞同：0
> 
> 时间：2012-06-19T13:09:44.523
> 
> 标签：java, android, android-intent, android-widget

以下是我用来复制包含 txt 文件的文件夹的代码。该文件夹位于我的应用程序的资产文件夹中。当我复制时，我在*out = new FileOutputStream(newFileName); 行中得到 File not found 异常；*

当我将它保存到 /data/data 文件夹时，我可以完美地工作；IE; 内部存储器。我检查了 SD 卡的状态，它显示已安装。

```
public class CpyAsset extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    copyFileOrDir("edu1");//directory name in assets
}
File sdCard = Environment.getExternalStorageDirectory();
private void copyFileOrDir(String path) {
    AssetManager assetManager = this.getAssets();
    String assets[] = null;
    try {
        assets = assetManager.list(path);
        if (assets.length == 0) {
            copyFile(path);
        } else {
            File dir = new File (sdCard.getAbsolutePath());
            if (!dir.exists()){
                System.out.println("Created directory"+sdCard.getAbsolutePath());
                boolean result = dir.mkdir();
                System.out.println("Result of directory creation"+result);
            }

            for (int i = 0; i < assets.length; ++i) {
                copyFileOrDir(path + "/" + assets[i]);
            }
        }
    } catch (IOException ex) {
        System.out.println("Exception in copyFileOrDir"+ex);
    }
}

private void copyFile(String filename) {
    AssetManager assetManager = this.getAssets();

    InputStream in = null;
    OutputStream out = null;
    try {
        in = assetManager.open(filename);
        String newFileName = sdCard.getAbsolutePath() + "/"+filename;
        out = new FileOutputStream(newFileName);
        byte[] buffer = new byte[1024];
        int read;
        while ((read = in.read(buffer)) != -1) {
            out.write(buffer, 0, read);
        }
        in.close();
        in = null;
        out.flush();
        out.close();
        out = null;
    } catch (Exception e) {
        System.out.println("Exception in copyFile"+e);
    }

}
} 
```

**例外**

```
01-01 06:13:34.783: INFO/System.out(11334): Exception in copyFilejava.io.FileNotFoundException: /mnt/sdcard/edu1/anees.txt: open failed: ENOENT (No such file or directory) 
```

我尝试复制的文件夹（和内容）在 assets/edu1/abc.txt

有人可以让我知道是什么原因造成的，因为我找不到任何明显的原因吗？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:44:54.890

您总是试图在这部分创建外部存储根目录：

```
File dir = new File (sdCard.getAbsolutePath());
if (!dir.exists()){
            System.out.println("Created directory"+sdCard.getAbsolutePath());
            boolean result = dir.mkdir();
            System.out.println("Result of directory creation"+result);
} 
```

所以您没有创建文件夹`edu1/`，并且在该文件夹中创建`anees.txt`文件将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:26:41.930

试试这个方法......

```
File f = new File("/sdcard/assets/edu1/abc.txt");

FileWriter fw = new FileWriter(f);

BufferedWriter bw = new BufferedWriter(fw); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T13:35:25.097

在您的代码中，您检查 sdcard 路径是否存在，而您应该检查导致目录“edu1”从未创建的路径尝试改用它

```
File dir = new File (sdCard.getAbsolutePath()+"/"+path); 
```

# android - 如何在 Wifi Analyzer App 之类的 android 中绘制图形？

> ID：11101666
> 
> 赞同：11
> 
> 时间：2012-06-19T13:09:58.713
> 
> 标签：android, android-layout, graphics, canvas

嗨，我正在尝试开发一个现场测试应用程序，我必须检索相邻单元格的信号强度等信息。

所以我的问题是：

> 如何实时显示 X 轴上不同相邻单元格和 Y 轴上信号强度的图表？[这里](https://play.google.com/store/apps/details?id=com.farproc.wifi.analyzer&hl=fr)有一个例子 。

我已经有 5 或 6 个相邻小区，每个小区都有他的信号强度。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T05:17:53.880

而不是使用 Canvas 手动绘制图表，您可以使用可用的图表引擎库，这也将更容易做到。

像[AchartEngine](http://www.achartengine.org/content/demo.html) , [ChartDroid](http://code.google.com/p/chartdroid/wiki/Screenshots) , [aFreeChart](https://code.google.com/p/afreechart/) , [MPAndroidChart](https://github.com/PhilJay/MPAndroidChart)

对于 3D 图表[Charts4J](http://code.google.com/p/charts4j/)

> 如何实时显示 X 轴上不同相邻单元格和 Y 轴上信号强度的图表？

我在我的一个应用程序中使用了同样的图表引擎。该库提供了一个完整的 API 演示，因此很容易理解如何使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T00:29:18.467

我不知道您要开发哪种类型的图表，因为您的链接上有不同的类型。但是我在android中开发了一个实时线图。我正在使用画布绘制线条。

```
public class GraphView extends View
{
    ...
    private final Rect rect = new Rect();
    private final Paint linePaint = new Paint();
    private final Paint backgroundPaint = new Paint();
    private float[] points;

    public GraphView(final Context context, final AttributeSet aSet)
    {
        super(context, aSet);
    }
    @Override
    protected void onDraw(final Canvas canvas)
    {
        if (points == null)
        {
            return;
        }
        canvas.drawLines(points, linePaint);
        rect.set((int) (xIndex * xScale), 0, (int) (xIndex * xScale + 5), getHeight());
        canvas.drawRect(rect, backgroundPaint);
    }
...
} 
```

您可以根据需要轻松定位/调整矩形。xIndex 和 xScale 的计算我没有写。点数组是您的值将被写入的数组。

但请注意，在 android 中，线条是成对绘制的，据我所知，没有“点”结构。

我的意思是 [1, 0.25, 2, 0.45] 在 x1= 1, y1=0.25 和 x2=2, y2= 0.45 之间画一条线

您也可以通过 postInvalidate() 触发绘制

[postInvalidate()](http://developer.android.com/reference/android/view/View.html#postInvalidate%28%29) [onDraw（画布画布）](http://developer.android.com/reference/android/view/View.html#onDraw%28android.graphics.Canvas%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T10:51:45.940

我建议你使用 AChartEngine 而不是画到画布上。[您可以在此处](http://code.google.com/p/achartengine/downloads/list)下载库、javadocs 和演示应用程序。

youtube 上有关于 AChartEngine 入门的教程。

您可以使用图表下方区域填充颜色或未填充的折线图来复制您提供的第一个屏幕截图中的功能。

# c# - Linq 使用本地值延迟执行

> ID：11101669
> 
> 赞同：6
> 
> 时间：2012-06-19T13:10:09.203
> 
> 标签：c#, .net, linq, list

我一直在试验 Linq，看看它能做什么——到目前为止我真的很喜欢它 :)

我为算法编写了一些查询，但没有得到预期的结果......枚举总是返回空：

**情况1**

```
List<some_object> next = new List<some_object>();
some_object current = null;

var valid_next_links =
    from candidate in next
    where (current.toTime + TimeSpan.FromMinutes(5) <= candidate.fromTime)
    orderby candidate.fromTime
    select candidate;

current = something;
next = some_list_of_things;

foreach (some_object l in valid_next_links)
{
    //do stuff with l
} 
```

我将查询声明更改为像这样内联，并且效果很好：

**案例#2**

```
 foreach (some_object l in
      (from candidate in next
       where (current.toTime + TimeSpan.FromMinutes(5) <= candidate.fromTime)
       orderby candidate.fromTime
       select candidate))
 {
  //do stuff with l
 } 
```

有谁知道为什么它在 #1 的情况下不起作用？按照我的理解，当你声明它时没有评估查询，所以我看不出有什么区别。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T13:15:19.423

`current`将捕获对 的更改，但查询已经知道的*值*。`next`向现有列表添加额外的项目将使它们显示在查询中，但更改变量的值以完全引用不同的列表不会有任何效果。基本上，如果您在心理上将查询从查询​​表达式扩展为“正常”形式，则 lambda 表达式中存在的任何变量都将被捕获为变量，但任何直接作为参数存在的变量都将立即被计算。这只会捕获变量的*参考*值，而不是列表中存在的项目，但这仍然意味着更改变量值本身不会被看到。您的第一个查询扩展为：

```
var valid_next_links = next
      .Where(candidate => (current.toTime + TimeSpan.FromMinutes(5) <= candidate.fromTime))
      .OrderBy(candidate => candidate.fromTime); 
```

# ssl - 如何将 X.509 v1 证书转换为 X.509 版本 3

> ID：11101673
> 
> 赞同：1
> 
> 时间：2012-06-19T13:10:18.623
> 
> 标签：ssl, ssl-certificate

如何将 X.509 v1 证书转换为**X.509 版本 3**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:52:46.047

如果不重新颁发，您**无法**将 x509v1 转换为 X509v3 证书。有关更多信息，请参见openssl-users 上的[这篇文章](http://www.mail-archive.com/openssl-users@openssl.org/msg24211.html)

# c# - 如何从 PluginType 项中检索 Step

> ID：11101674
> 
> 赞同：3
> 
> 时间：2012-06-19T13:10:26.257
> 
> 标签：c#, dynamics-crm, dynamics-crm-2011

我有这个代码：

```
foreach (PluginAssembly tempPluginAssembly in pluginAssemblyList)
            {
                if (!tempPluginAssembly.Name.StartsWith("Microsoft.Crm"))
                {
                    List<PluginType> pluginList;
                    pluginList = xrmContext.PluginTypeSet.Where(Plugin => Plugin.PluginAssemblyId.Id == tempPluginAssembly.Id).ToList();

                    foreach (PluginType plugin in pluginList)
                    {
                        if (plugin.IsWorkflowActivity == false)
                        {
                            writer.WriteLine(new string[] { tempPluginAssembly.Name, tempPluginAssembly.Description, plugin.Name, String.Empty });
                            ++pluginCount;
                        }
                    }
                }
            } 
```

基本上它的作用是从我的 crm 环境中检索装配列表并过滤 microsoft 装配。然后，我检索这些程序集中包含的每个 PluginType 对象，并将信息记录在某处。但这还不够，我想检索每个 PluginType 对象中包含的步骤。

我该如何管理？是否有我不知道的类或我不知道的 PluginType 对象中的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:39:19.647

您需要引用`SdkMessageProcessingStep`实体来检索插件步骤。您可以在下面的代码中看到查询中的联接。

```
foreach (PluginAssembly tempPluginAssembly in pluginAssemblyList)
{
    if (!tempPluginAssembly.Name.StartsWith("Microsoft.Crm"))
    {
        var pluginList = from plugins in xrmContext.PluginTypeSet
                         join steps in xrmContext.SdkMessageProcessingStepSet on plugins.PluginTypeId equals steps.PluginTypeId.Id
                         where plugins.PluginAssemblyId.Id == tempPluginAssembly.Id
                         select new
                         {
                             plugins,
                             steps
                         };

        //_XrmContext.PluginTypeSet.Where(Plugin => Plugin.PluginAssemblyId.Id == tempPluginAssembly.Id).ToList();

        foreach (var plugin_step in pluginList)
        {
            if (plugin_step.plugins.IsWorkflowActivity == false)
            {
                writer.WriteLine(new string[] { tempPluginAssembly.Name, tempPluginAssembly.Description, plugin_step.plugins.Name, String.Empty });
                ++pluginCount;
            }
        }
    }
} 
```

# java - 提高数据库访问的性能

> ID：11101677
> 
> 赞同：1
> 
> 时间：2012-06-19T13:10:36.907
> 
> 标签：java, performance, asynchronous, database-performance, spring-integration

我有一个在端口上侦听 UDP 数据报的应用程序。我使用 UDP 入站通道适配器侦听此端口。我的 UDP 通道适配器配置为使用 ThreadPoolTask​​Executor 来调度传入的 UDP 数据报。在 UDP 通道适配器之后，我使用直接通道。我的频道只有一个订阅者，即服务激活者。

该服务将传入消息添加到存储在内存中的同步列表中。然后，我有一个线程每 5 秒检索一次列表的内容，并对 MySQL 数据库进行批量更新。

我的问题：

1.  第一批消息到达。我的 ThreadPoolExecutor 的线程从 UDP 通道适配器获取传入消息并将它们添加到同步列表中。假设已经收到并插入了 10000 条消息。
2.  后台线程检索 10000 条消息并进行批量更新 (JdbcTemplate.update(String[])。
3.  此时，后台线程等待来自数据库的响应。但是，现在，由于数据库执行 10000 INSERT 需要时间，因此已收到 20000 条消息并出现在列表中。
4.  后台线程接收来自数据库的响应。然后，它检索 20000 条消息并进行批量更新 (JdbcTemplate.update(String[])。
5.  数据库执行 INSERT 需要更多时间，在此期间，已收到 35000 条消息并将其存储在列表中。

堆大小不断增长，并在一定时间后导致内存执行。

我正在尝试寻找解决方案来提高我的应用程序的性能。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:32:49.537

每 5 秒存储 10,000 条记录对于任何数据库来说都是相当多的。

您需要考虑其他选择

*   使用不同的数据存储，例如 NoSQL 数据存储或平面文件。
*   确保您的磁盘具有良好的写入性能，例如使用写入缓存。
*   使用具有多个磁盘或 SSD 驱动器的磁盘子系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T14:13:10.987

使用数据库连接池，这样您就不必等待任何一个线程上的提交。只需抓住下一个可用连接并进行并行插入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T13:18:31.773

建议

一个。你真的需要一个同步列表吗？你不能有一组列表，让我们说在这些列表之间划分工作，比如说通过在数据的键上运行 hashCode ？

湾。您可以使用从列表中读取信息的线程池（顺便说一下，我会在这里使用队列），这样，当一个线程由于大量的批量插入而“卡住”时，其他线程仍然可以读取“作业“从队列中执行？

C。您的数据库是否与应用程序共同托管在同一台机器上？这可以提高性能

d。你能发布你的插入查询吗？也许有人可以为您提供优化它的方法？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T16:06:45.657

I get 5.000 inserts per second sustained on a SQLServer table, but that required quite a few optimizations. Did not use all of the tips below, some might be of use to you.

*   Check the MySQL Insert Speed documentation tips in [http://dev.mysql.com/doc/refman/5.0/en/insert-speed.html](http://dev.mysql.com/doc/refman/5.0/en/insert-speed.html)
*   Parallelize the insert process
*   Aggregate messages if possible. Instead of storing all messages insert a row with information about received messages in a timeframe, of a certain type etc.
*   Change the table to have no Indexes or Foreign keys except for the primary key
*   Switch to writing to a textfile (and import that during the night in a loaddata bulk file insert if you really want it in the database)
*   Use a seperate database instance to serve only your table
*   ...

# android - 将相册添加到 Android 照片库（在代码中）

> ID：11101679
> 
> 赞同：6
> 
> 时间：2012-06-19T13:10:43.237
> 
> 标签：android

我希望能够创建一个 Android 应用程序，将其他相册添加到默认的 android 照片库。这些相册的内容将是远程的，类似于 Picasa 相册的处理方式。我查看了媒体扫描仪，它似乎无法处理远程内容，我无法找到画廊本身的任何参考资料或任何其他提供额外相册的方式。

我已经在 android 开发者网站上进行了一些搜索，here 和一般的谷歌搜索，但结果很短……有人对如何实现这一点有任何建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T02:05:58.513

如果你在谈论 android stock gallery，这就是我发现的：

android 相册实际上不是相册，而是文件夹。您只需创建一个文件夹，其名称为您希望相册显示的名称，并且其中必须至少有一张图片。

希望能帮助到你！

# c# - WPF 设置器类

> ID：11101681
> 
> 赞同：2
> 
> 时间：2012-06-19T13:10:43.180
> 
> 标签：c#, wpf, expression

我想在 c# 中创建一个没有内容但只有一个图像的按钮。

我不知道如何使用二传手。任何人都可以启发我吗？

```
 Setter setter = new Setter();
            setter.Property = Image.SourceProperty;
            setter.Value = "asd.jpg";  //<--error

            Style Rstyle = new Style();
            Rstyle.TargetType = typeof(Button);
            Rstyle.Setters.Add(setter);

            Button _Button = new Button()
            {
                Width = 41,
                Height = 41
            };

            _Button.Style = Rstyle; 
```

我应该在 setter.Value 中放置什么来获取驻留在项目目录中的图像。“asd.jpg”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:14:07.373

`Button`有一个`Content`属性，你可以在`BitmapImage`其中转储一个：

```
BitmapImage image = new BitmapImage(new Uri("your source"));
TheButton.Content = image; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:16:41.617

the setter is not used in c# code, its a helper class to build styles in xamls. Just use this code.

```
BitmapImage bmp = new BitmapImage()
bmp.BeginInit();
bmp.UriSource = new Uri("pack://application:,,,/ApplicationName;component/Resources/myImage.png");
bmp.EndInit();
Image image = new Image();
image.Source = bmp;
myButton.Content = image; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:46:52.900

```
 <ControlTemplate x:Key="image"> //XAML in window resources tag
            <Image Source="Save.png"/>
   </ControlTemplate>

btn.Template =  (ControlTemplate)FindResource("image"); 
```

我认为这更加灵活和可重用。

# ios - UINavigationController 回退不止一步

> ID：11101688
> 
> 赞同：2
> 
> 时间：2012-06-19T13:11:06.407
> 
> 标签：ios, cocoa-touch, uinavigationcontroller

是否可以在 UINavigationController 中弹出多个视图控制器？假设我想退后两步。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T13:13:20.793

是的，您可以通过执行类似的操作来实现

```
//Your navigation controller
UINavigationController *nav;

//Get the view controller that is 2 step behind
UIViewController *controller = [nav.viewControllers objectAtIndex:nav.viewControllers.count - 2];

//Go to that controller
[nav popToViewController:controller animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-05T19:26:17.080

**迅速**

很快，奥马尔提出的相同解决方案是：

```
// Get the previous Controller.
let targetController: UIViewController = navigationController!.viewControllers[navigationController!.viewControllers.count - 2]

// And go to that Controller
navigationController?.popToViewController(targetController, animated: true) 
```

就我而言，我需要支持 2 个控制器，因此，我必须在堆栈中采用第三个支持。我真正的解决方案是：

```
// obtaining origin controller
let controller: UIViewController = navigationController!.viewControllers[navigationController!.viewControllers.count - 2]

// If was the expected controller (An enroll action)
if controller is CreateChatViewController {

    // I get the previous controller from it, in this case, the 3rd back in stack
    let newControllerTarget = navigationController!.viewControllers[navigationController!.viewControllers.count - 3]

    // And finally sends back to desired controller
    navigationController?.popToViewController(newControllerTarget, animated: true)
} 
```

# ruby-on-rails - 重命名回形针上传的文件

> ID：11101690
> 
> 赞同：0
> 
> 时间：2012-06-19T13:11:12.493
> 
> 标签：ruby-on-rails, paperclip, file-rename

如何重命名 Paperclip 上传的文件？我已上传文件 /public/system/attachments/15/original/abc.txt

如何将 abc.txt 文件重命名为例如 xyz.txt ？我知道如何更新对象的文件名属性，但是如何在文件系统上进行这些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:19:09.540

您需要调整[has_attached_file中的:url 和 :path 选项](http://rubydoc.info/gems/paperclip/Paperclip/ClassMethods#has_attached_file-instance_method)

在这个很棒的[教程](http://thewebfellas.com/blog/2008/11/2/goodbye-attachment_fu-hello-paperclip)(thewebfellas.com) 中，您会找到这一切。:)

编辑：只是在磁盘上移动，完成上传后，您可以使用[FileUtils](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html)

```
#!/usr/bin/env ruby

require 'fileutils'

FileUtils.mv('/your/old/file', '/your/new/file') 
```

哦，当然还有[File::rename](http://ruby-doc.org/core-1.9.3/File.html#method-c-rename)。

```
#!/usr/bin/env ruby
File.rename("afile", "afile.bak") 
```

# ninject - NinjectModule 和 IProvider 不解析类型

> ID：11101692
> 
> 赞同：0
> 
> 时间：2012-06-19T13:11:26.967
> 
> 标签：ninject

这是使用 Ninject V3.0 不起作用的设置

```
public class LoggerModule : NinjectModule{
public override void Load()
{
 Bind<ILogger>.ToProvider(MyLoggerProvider);
}
}

public class MyLoggerProvider: IProvider<ILogger>
{
 public object Create(IContext context){
return new OneOfMyLoggers();
}
} 
```

在我的应用程序中，无论我在哪里注入 ILogger 实例（使用构造函数或属性注入，这很重要），我从来没有解析 ILogger 的实例。

但是如果不使用模块和/或 povider，并在创建内核时绑定，那么一切都像一个魅力。以下作品

```
public class MyDiResolver()
{
  public MyDiResolver()
{
  MyKernel = new StandardKernel();
  MyKernel.Bind<ILogger>().To<OneOfMyLoggers>();
}
} 
```

在 Ninject2.x 版本中，模块和提供程序的相同排列可以正常工作。我错过了关于 Ninject V3.0 的一些不同之处吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:17:07.110

Try passing the module into the StandardKernel so it knows to use it:

```
using (IKernel kernel = new StandardKernel(new LoggerModule()))
{
    ILogger logger = kernel.Get<OneOfMyLoggers>();   
} 
```

# javascript - 停止 iframe 重新加载

> ID：11101693
> 
> 赞同：2
> 
> 时间：2012-06-19T13:11:30.233
> 
> 标签：javascript, jquery, html, iframe, detach

是否可以禁用/限制 iframe 重新加载？

问题是：当我使用 jquery 分离/附加 iframe 时，它​​会重新加载。

```
i = $('#i') //<iframe id="i" src="..."></iframe>
p = i.parent()
i.detach()
i.appendTo(p) 
```

所以，在我执行 i.appendTo(p) 之后，重新加载 ifram 的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:41:23.433

我在尝试推迟广告加载时遇到了同样的问题。我认为无法修复。

我发现的唯一方法是更改​​ css 上的绝对位置。

IE：

```
var $i = $('#i'), $t = $('#target');
$i.css({position:'absolute',top:$t.offset().top, left:$t.offset().left}); 
```

也许您还需要添加**z-index**和**size**属性。这将取决于您的设计。

# c# - 源中带有字典的组合框

> ID：11101699
> 
> 赞同：0
> 
> 时间：2012-06-19T13:11:50.140
> 
> 标签：c#, wpf, xaml, binding, combobox

我有一本简单的字典。我想将 i 绑定到组合框，然后将所选值绑定到另一个属性。

```
private const string CellListPropertyName = "CellList";

    private Dictionary<string, string> _cellList;
    public Dictionary<string, string> CellsList
    {
        get { return _cellList; }
        set
        {
            _cellList = value;
            RaisePropertyChanged(CellListPropertyName);
        }
    } 
```

这是我的代码：

```
<ComboBox x:Name="comboBox"
          ItemsSource="{Binding CellsList}"
          DisplayMemberPath="Value"
          SelectedValuePath="Key" 
          SelectedValue="{Binding Path=Conf:ConfProperties.Title}"> 
```

我尝试了很多不同的方法，但我的组合框总是空的（即使使用 ItemTemplates 等）我检查了我的字典，它包含 62 个元素。

我还尝试将“SelectedValue”绑定到我的 DataContext 中定义的属性，但仍然不起作用。

这是我的上下文

```
<UserControl.DataContext>
    <viewModel:ParametersViewModel></viewModel:ParametersViewModel>
</UserControl.DataContext> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:50:02.850

您的 SelectedValue 绑定看起来有点奇怪。让我们假设您的 ParametersViewModel 有一个名为 MySelectedTitle 的字符串类型的属性。那么你的绑定应该是：

```
 SelectedValue="{Binding Path=MySelectedTitle}" 
```

如果您想“保存”您选择的值而不是当前数据上下文的属性，您必须更新您的问题

# css - 当浏览器窗口变窄时如何保持背景颜色的宽度

> ID：11101701
> 
> 赞同：4
> 
> 时间：2012-06-19T13:12:06.393
> 
> 标签：css, background-color

这是整个页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
<head>
    <style>
        body {margin: 0; background: yellow;}

        .bar {width: 100%; background: pink;}

        .content {width: 800px; margin: 0 auto;}
    </style>
</head>

<body>
    <div class="bar">
        <div class="content">
            This is content~
        </div>
    </div>
</body>
</html> 
```

我的意图是让粉红色的条充满浏览器显示的整个水平长度。当所述窗口宽于 800 像素时，栏的内容保持居中，或者在较窄时保持固定并水平滚动。但是，当浏览器变窄时，如果您向右滚动，粉红色条不会到达右端；在这种情况下，会看到身体的黄色。

在最新的 Firefox、Chrome 和 IE8 中看到了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:19:25.690

您应该将内容的背景设为粉红色

```
.content {width: 800px; margin: 0 auto;background: pink;} 
```

或者

将条形的最小宽度设为内容宽度。

```
.bar {width: 100%;min-width:800px;background: pink;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:33:47.933

最好的办法是设置`min-width`等于内容宽度。

如果您也尝试为 iphone 和平板电脑制作网站，那么您可以分别为每个视口定义宽度。

# c# - 删除 MS Access 数据库中的重复项

> ID：11101703
> 
> 赞同：1
> 
> 时间：2012-06-19T13:12:11.693
> 
> 标签：c#, .net, ms-access

我试图从主表中删除重复项。

它看起来像这样（此处为 csv 格式）：

```
"Record ID";Status;Placement;Private;Category;Note;Blob 
```

例如

```
14341692;132;2147483647;False;4;"29.12.10 14:17";System.Byte[] 
```

重复的意思，注是一样的。我的方法是这样的：

```
string strSQL = "SELECT * FROM Main";
OleDbCommand cmd = new OleDbCommand(strSQL, MemoVerbindung);
OleDbDataReader dr = cmd.ExecuteReader();
_items = new List<string>(); // <-- Add this
while (dr.Read())
{
    if (dr.FieldCount >= 5)
        _items.Add(dr[5].ToString());
}
dr.Close();
progressBar1.Maximum = _items.Count;
for (int a = 0; a < _items.Count; a++)
{
    progressBar1.Value = a;
    strSQL = "SELECT * FROM Main WHERE Note = '" + _items[a].ToString().Replace("'", "\'") + "'";

    cmd = new OleDbCommand(strSQL, MemoVerbindung);
    dr = null;
    OleDbDataReader dr2 = null;
    try
    {
        dr = cmd.ExecuteReader();
        int u = 0;
        if (dr.FieldCount > 1)
        {
            while (dr.Read())
            {
                if (u >= 1)
                {
                    string was = "DELETE FROM Main WHERE [Record ID] = " + dr[0];
                    OleDbCommand command = new OleDbCommand(was, MemoVerbindung);

                    OleDbDataReader reader = command.ExecuteReader();

                    while (reader.Read())
                    {
                        //MessageBox.Show(reader[0].ToString());
                    }
                    reader.Close();
                }
                u++;
            }
        }
        else
        {
            while (dr.Read())
            {
                MessageBox.Show("Übrig");
            }
        }

        dr.Close();
    }
    catch (Exception mm)
    {
        //MessageBox.Show(mm.Message);
    }
}
MessageBox.Show("Fertig");
progressBar1.Value = 0; 
```

因此，在 if (u >= 1) 部分中，我试图保留一个版本，同时删除所有其他版本。不幸的是，这不起作用意味着所有条目都被删除，但由于某种原因引发错误的条目。你会改变什么或者有一个更优雅的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:22:37.093

使用此 SQL 语句查找重复项：

```
SELECT First(Main.[Note]) AS [NoteField], Count(Main.[Note]) AS NumberOfDups
FROM Main
GROUP BY Main.[Note]
HAVING (((Count(Main.[Note]))>1)); 
```

然后您可以遍历此记录集（将其作为快照获取，因此对基础数据的更改不会更改结果）
用于`!NoteField`知道要查找的注释，并`!NumberOfDups`知道您必须删除多少（删除此数字 - 1）

# android - Android pull-to-refresh or not 设计模式

> ID：11101705
> 
> 赞同：0
> 
> 时间：2012-06-19T13:12:16.240
> 
> 标签：android, design-patterns, pull-to-refresh

您好只是想知道是否要在我的应用程序中添加拉动刷新。我习惯了 ios，所以我很了解拉动刷新功能，我喜欢它，但我不确定这是否是 android 中的标准。

我应该使用拉动刷新还是坚持使用标准刷新按钮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:30:51.507

您可以在这两个链接中找到要在此处刷新的示例

[链接1](https://github.com/timahoney/Android-Pull-To-Refresh)

[链接2](https://github.com/johannilsson/android-pulltorefresh)

这是堆栈溢出讨论

[所以讨论](https://stackoverflow.com/questions/4583484/how-to-implement-android-pull-to-refresh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:53:29.057

Android 上刷新的“推荐”用例是操作栏中的按钮。也就是说，正如 Paul-Jan 所提到的，Facebook 和 Twitter 应用程序都使用它，我认为它实际上是一种非常好的和直观的 UI 模式。我可能会建议同时使用两者——操作栏中的刷新按钮以及拉动刷新。

# biztalk - BizTalk SSO 配置 - 终结点映射器中没有更多终结点可用

> ID：11101709
> 
> 赞同：2
> 
> 时间：2012-06-19T13:12:41.850
> 
> 标签：biztalk, single-sign-on

我有一个两个节点的 BTS2010 组，其中一个单独的 SQL Server 托管包括 SSODB 在内的 BTS 数据库；Biz01、Biz02 和 Sql01。这个环境是由以前的员工配置的，我没有可用的文档。

SSO 配置似乎有问题，但我不确定如何解决。

当我在 Biz02 上运行 ssoconfig -status 时，一切看起来都很好 - 它告诉我 SSO 服务器是 Biz02，而 SQL Server 是 Sql01 加上一堆其他东西。但是，当我在 Biz01 上运行相同的命令时，我收到消息：“错误 0xC0002A0F：无法联系 SSO 服务器 'Sql01'。检查 SSO 是否已配置以及 SSO 服务是否在该服务器上运行”

我不清楚 Biz01 在这里试图做什么——它是否试图通过 RPC 调用到达 Biz02 上的 EntSSO Windows 服务，然后最终尝试从 Sql01 重试配置信息？

我检查了 ENTSSO 服务正在 Biz01、Biz02 上运行，并且 RPC 服务正在三台服务器上运行。

谁能帮助建议我可以采取哪些进一步的步骤来确定此配置问题的根本原因？

非常感谢

抢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:36:05.553

I'm not sure if you have your servers clustered or not but I've run into something similar before within a cluster. Your SSO name should be your network name and not the individual computers name. Here's an [post](http://kentweare.blogspot.com/2009/08/biztalk-2009-clustering-sso-issue.html) about the issue I had. Hope it helps.

# matlab - MatLab：并排显示数字

> ID：11101712
> 
> 赞同：2
> 
> 时间：2012-06-19T13:12:58.043
> 
> 标签：matlab, matlab-figure, subplot

当您使用`subplot`在同一个窗口中并排显示绘图时，我想要一个类似的功能，可以对多个图形执行相同的操作。这有效：

```
subplot(2,2,1) 
```

我正在寻找这样的东西：

```
subfigure(2,2,1) 
```

是否存在具有这种优势的内置函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:57:53.103

您可以自己编写一个这样的函数。这个想法是获得屏幕尺寸：

```
get(0,'ScreenSize') 
```

然后根据输入参数将其划分为子区域。您还需要考虑中间的利润。

另一个想法：

*   创建一个不可见的图形（最好与屏幕的纵横比相同）
*   `subplot`在里面打电话
*   捕获创建轴的位置
*   删除图
*   缩放捕获的位置以适合屏幕尺寸，并使用它来创建实际图形。

# javascript - IE 是否进入睡眠模式？

> ID：11101716
> 
> 赞同：-1
> 
> 时间：2012-06-19T13:13:13.163
> 
> 标签：javascript, internet-explorer

我在 Jquery/javascript 中内置了这个功能，当他们的会话即将超时时，用户会收到通知。然后他们可以选择扩展它。如果他们没有做出选择，弹出窗口会自行关闭，并且浏览器会被重定向到登录页面。有一段时间它工作得很好。但现在我注意到只有当我在计算机上处​​于活动状态时它才能正常工作。如果计算机一整天无人看管，则弹出窗口不会开始倒计时，直到用户解锁计算机并再次登录。

**有人知道当计算机长时间无人看管时停止执行javascript的这种行为吗？**

更新：有没有办法让标签不睡觉？否则，浏览器将无法在正确的时间重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:33:26.267

`setTimeout`仅在选项卡处于活动状态时有效。在某些浏览器中，即使更改选项卡也会使其停止计数。因此，不仅如果您在计算机上，而且如果您不在特定页面上，它可能无法正常工作。同样在具有多任务处理的移动设备上，它肯定会失败，忘记标签，应用程序经常进入暂停模式。看看这个问题，它提供了与 Luka 相同的解决方案，并带有一个代码示例：

[当 Chrome 中的选项卡处于非活动状态时，如何使 setInterval 也起作用？](https://stackoverflow.com/questions/5927284/how-can-i-make-setinterval-also-work-when-a-tab-is-inactive-in-chrome)

您可能希望对经过的时间进行两次检查，一次检查是否需要显示弹出窗口，另一次检查是否需要显示弹出窗口，使用经过的总时间而不是使用不同的倒计时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:17:32.900

i would suggest logging the current time when the page is loaded and then calling a function every 10 seconds of so that checks if the time passed is more than x amount, the reason your problem occurs is most likely because the default timeout function only counts down while the page is being rendered.

# jquery - jQuery：获取子属性

> ID：11101717
> 
> 赞同：1
> 
> 时间：2012-06-19T13:13:18.970
> 
> 标签：jquery, jquery-selectors

我有这样的 HTML：

```
<div>
    <a href="">sometext<img src="images/001.jpg" /></a>
    <a href="">sometext<img src="images/002.jpg" /></a>
    ...
    <a href="">sometext<img src="images/nnn.jpg" /></a>
</div> 
```

我想要的只是使用jQuery使'href'属性等于子'img'的'src'属性。这是我不成功的尝试（没有 js 错误，但没有结果）：

```
$('div a').attr('href', $(this).children('img').attr('src')); 
```

我如何获得子“img”的“src”属性，以便像父“a”的attr（）第二个参数一样使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:14:19.047

```
$('div a').attr('href', function() {
  return $(this).find('img').attr('src');
}); 
```

**[演示](http://jsfiddle.net/QStkd/299/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:14:33.987

试试这个 ：

```
$('div a').each(function(){
    $(this).attr('href', $(this).find('img').attr('src'));
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:16:02.150

您可以循环每个`img`并设置父`href`属性，如下所示：

```
$('div a img').each(function() {
   $(this).parent().attr('href',$(this).attr('src'));
}); 
```

[这里的工作示例](http://jsfiddle.net/manseuk/QStkd/300/)

# c# - 在将文件压缩到本地机器方面需要帮助

> ID：11101721
> 
> 赞同：0
> 
> 时间：2012-06-19T13:13:23.463
> 
> 标签：c#, winforms, zip, c#-2.0

好的，我想将文件从多个 IP 压缩到我的本地计算机。这是我正在创建的开发工具，到目前为止，该工具可以将文件从我的本地计算机上传到 20 个 IP，现在这个功能是新的，并且是相反的，我想知道一种压缩文件并保存的方法我的机器。任何说明如何去做的文档、文章、资源和代码片段都会有所帮助。我仍在使用 .Net 2.0 并且没有第三方库...

谢谢， HRG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:14:50.507

请看这里： http: [//www.icsharpcode.net/opensource/sharpziplib/](http://www.icsharpcode.net/opensource/sharpziplib/)

或者，如果您可以使用 .NET 4.5 RC，则包含 Zip 功能。

# asp.net - 如何在 vb.net 的网站上模仿 Excel 电子表格？

> ID：11101723
> 
> 赞同：0
> 
> 时间：2012-06-19T13:13:29.667
> 
> 标签：asp.net, vb.net, excel

我正在建立一个网站来捕获数据。我有许多用于数据输入或捕获的电子表格。现在我想在 Web 表单上模仿这些复杂的电子表格，但我不确定要使用的正确控件。

必须允许数据输入，并且还需要进行类似于普通 Excel 电子表格上的公式的实时计算。稍后必须将数据捕获到 SQL 表中。

尽管在 Visual Studio 2010 中不再提供电子表格组件，但使用或模拟该功能的最佳控件或方法是什么。它是数据网格吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T03:04:57.420

检查[http://en.wikipedia.org/wiki/Office_Web_Components#Office_Web_Components](http://en.wikipedia.org/wiki/Office_Web_Components#Office_Web_Components)上的 Office Web Components是否满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T03:13:49.927

对于自定义构建，您可以依赖 GridView 并继续为其添加功能。但是我的建议是使用 Devexpress Grid 或其他一些第三方控件并在其上构建。这些控件功能更丰富:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:20:19.357

这是一个包含与 Excel 兼容的 WinForms 的扩展。使用实体框架捕获到 SQL 应该非常简单。

[http://visualstudiogallery.msdn.microsoft.com/03A0E5A9-4768-461C-9A72-8255A291094C?SRC=Featured](http://visualstudiogallery.msdn.microsoft.com/03A0E5A9-4768-461C-9A72-8255A291094C?SRC=Featured)

# web-applications - 是否有任何可以与 github/bitbucket 链接的 CMS/工具？

> ID：11101725
> 
> 赞同：-2
> 
> 时间：2012-06-19T13:13:44.380
> 
> 标签：web-applications, github, content-management-system, repository

我需要一个简单的基于 Web 的工具/CMS/应用程序，它可以链接到一些存储库托管。它类似于 Cloud9 IDE，但不是面向开发人员，而是面向外行。

当用户编辑文件（例如 .txt 或 markdown 文件）时，它应该是在 github（或任何其他存储库服务）上使用新提交对文件进行版本化 - 与 Cloud9 IDE 中的方式相同。

简而言之 - 它就像 Mac 版（或现在的 Windows）的 Github，但基于 Web 和面向普通用户，而不是严格面向开发人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:24:46.687

如果您只想编辑文件并在每次有人编辑文件时进行新的提交，请在 GitHub 上创建一个存储库。每个文件上都有一个“编辑此文件”按钮，它使用 Cloud9 Editor Ace。这是你得到的最简单的事情，因为它会在你每次保存时自动提交和自动推送。

否则：Cloud9 有什么问题？它不仅适用于开发人员，每个人都可以使用它。您可能只需要为使用 git 创建一个备忘单 :-)

# php - OAuth2 和草稿

> ID：11101727
> 
> 赞同：0
> 
> 时间：2012-06-19T13:13:49.027
> 
> 标签：php, zend-framework, oauth, oauth-2.0, oauth-provider

我将在我的网站上实现一个 OAuth Provider，但我有点困惑：

客户端和服务器版本有很多草稿。我必须使用相同的版本吗？在许多实现中，甚至没有编写草稿版本！真的很重要吗？有什么建议吗？

我发现的实现：

*   [https://github.com/quizlet/oauth2-php](https://github.com/quizlet/oauth2-php)
*   [http://code.google.com/p/oauth2-php/](http://code.google.com/p/oauth2-php/)

使用 Zend（我真正需要的）

*   [https://github.com/chrisweb/oauth-2---facebook---zend-framework-components/tree/master/library/Zend](https://github.com/chrisweb/oauth-2---facebook---zend-framework-components/tree/master/library/Zend)[在此处输入链接描述](https://github.com/chrisweb/oauth-2---facebook---zend-framework-components/tree/master/library/Zend)
*   [https://github.com/smalyshev/Zend_OAuth_Provider](https://github.com/smalyshev/Zend_OAuth_Provider)（可能是 OAuth1 ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T03:57:12.253

如果您正在开发自己的 OAuth 提供程序，我强烈建议您查看 OAuth 2.0，由于加密要求，与 OAuth 1.0A 相比，实现一些最常见的用例更简单。

尽管就 IETF 而言，它不是一个最终的规范，但它有各种迹象表明它会是。一直积极致力于规范并实施它的人声称它已经稳定了一年多。这是一个很好的例子：[https ://stackoverflow.com/questions/4461945/oauth-2-0-final-specification](https://stackoverflow.com/questions/4461945/oauth-2-0-final-specification)

使用 OAuth 2.0 框架规范的最新草案：[https ://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-27](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-27)

大多数与您相关的补充规范都可能与它相关联。Bearer 令牌规范是您需要消化的东西：[https ://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-bearer-20](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-bearer-20)

如果您有预算并且正在寻找“现成”的东西 - 您可能需要考虑商业 OAuth 2.0 AS 产品，例如 PingFederate：[https ://www.pingidentity.com/en/software/pingfederate.html](https://www.pingidentity.com/en/software/pingfederate.html)

（免责声明：我为 Ping 工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T10:43:07.893

[http://code.google.com/p/oauth2-php/](http://code.google.com/p/oauth2-php/)作为初学者很好。它在额外下载中提供了它的文档：oauth2-php-doc-23.tar.gz

# jquery - 如何在jquery中实现第二次点击不同ul的li的处理程序？

> ID：11101729
> 
> 赞同：0
> 
> 时间：2012-06-19T13:13:53.243
> 
> 标签：jquery, jquery-click-event

在乞讨时，我有一个 ul：

```
<div id="ul1DivId">
    <ul id="ul1Id">
        <li>li1</li>
    </ul>
</div> 
```

比我有一个 javascript 将隐藏这个 div/ul 并添加另一个具有另一个 ul 的 div：

```
$(document).ready(function () {
$("#ul1Id > li").click(function() {
                    //to prevent scroll firing this handler:
        event.preventDefault();

        $("#ul1DivId").hide();
        var someValue = "someValue";
        var outputUl2Html = "<div id=\"ul2DivId\">" +
        "<ul id=\"ul2Id\">" +
        "<li id=\"liXId\">> " + someValue + "</li>" +
        "<li id=\"clearLiId\">-clear-</li>" +
        "</ul>" +
        "</div>";
        //show ul 2
        $(outputUl2Html).insertAfter('#ul1DivId');

});
}); 
```

比我`style="display: none; "`用`id="ul1DivId"`. 这是意料之中的。我在隐藏的 div 元素之后得到了新插入的 div。这也是意料之中的。

我有另一个 javascript 在单击时永远不会被触发`clearLiId`：

```
$(document).ready(function () {
    $("#clearLiId").click(function() {
        //I never reach here!!!!
    });
}); 
```

`#ul2Id > li`我也尝试过`#ul2Id > #clearLiId`作为选择器。当我点击`#clearLiId` `li`! 为什么？如何让它捕捉点击事件？我想再次显示第一个 div ( `ul1DivId`) 并删除当前 div ( `ul2DivId`)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:18:10.713

您必须使用`live()`函数，因为选择器尚不存在。

> 为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。

```
$(document).ready(function () {
    $("#clearLiId").live(function() {
        //I never reach here!!!!
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:19:04.783

您缺少`event`参数，并且需要如下委托事件：

```
$(document).on('click', '#clearLiId', function() {
     //I never reach here!!!!
});

$("#ul1Id > li").click(function(event) {...
                                 ^ ----- missing event 
```

* * *

### 笔记

我似乎虽然`$("#ul1Id > li").`为你的第一个工作，`ul`但它不适用于未来的`ul`s。因此，如果您分配`class`给每个`ul`（已经在 DOM 中并且将来会出现）并更改您的选择器会更好。例如：

***HTML***

```
<div id="ul1DivId">
    <ul id="ul1Id" class="someClassToUl">
        <li>li1</li>
    </ul>
</div> 
```

***jQuery***

```
$(".someClassToUl > li")... 
```

# ios - Xcode 找不到安装此版本的软件映像 - 升级到 iOS 5.1.1 和 Xcode 4.3.3 后

> ID：11101731
> 
> 赞同：1
> 
> 时间：2012-06-19T13:14:06.050
> 
> 标签：ios

好吧，我在运行 xcode 4.2 和 iOS 5.0 时一切就绪，但在我将 iPhone 升级到 5.1.1 (9B206) 和 Xcode 到 4.3.3 (4E3002) 之后，它无法运行我的应用程序在我的 iPhone 上开发。在组织者中它说：

**软件版本：5.1.1 (9B206) Xcode 找不到安装此版本的软件镜像**

1）我检查了配置文件，它们没问题，我再次重新安装了整个证书和配置文件，我的 iPhone 条目旁边有一个绿灯。

2）我检查了新的更新，但软件已经更新

3）我在Xcode安装文件夹下的硬盘上看到了5.1.1 sdk

/Users/myuser/Library/Developer/Xcode/5.1.1 (9B206)

我在网上搜索并在 Apple 支持网站上找到一条帖子，告诉消息“Xcode 找不到安装此版本的软件映像”不是错误消息，而是通知，我仍然可以继续在我的设备上工作，但是在我尝试运行我正在 iPhone 上开发的应用程序后，Xcode 说：

**Xcode 无法使用所选设备运行。没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。**

所以到目前为止，我不知道该怎么做，我需要帮助。

在我看来，我看到的是 iPhone 上安装了 iOS SDK 5.1.1，而我的 macbook pro Lion 10.7.4 上安装了 iOS SDK 5.1.1 的 Xcode，我不明白缺少什么，或者我必须做些什么来解决在这种情况下，开始使用 5.1.1 + xcode 4.3.3 在我的 iPhone 上运行我的应用程序。

iPhone 4S - 版本 5.1.1 (9B206) 型号 MD234BZ

XCode 4.3.3 (4E3002)

Mac OS X 版本 10.7.4

非常感谢！

恩里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:21:19.887

只需从停靠列表中删除您的 xcode 图像。之后打开项目，现在您将 Keep in Dock 设置为。它将保留..因为您在扩展坞中设置了旧版本。

# selenium - InvalidSelectorException 使用 CSS 选择器定位“data-”属性标注的元素

> ID：11101736
> 
> 赞同：17
> 
> 时间：2012-06-19T13:14:23.317
> 
> 标签：selenium, css-selectors, webdriver

## 动机

利用 Selenium 的 CSS 选择器机制以及 CSS 属性选择器和 HTML5`data-`自定义属性来解决元素的特定钩子。

## 问题

使用上述方法定位分配有 CSS 类名和`data-`属性的元素时，会引发以下异常：

```
Caused by: org.openqa.selenium.remote.ErrorHandler$UnknownServerException: The given selector .gs-a-btn["data-value"] is either invalid or does not result in a WebElement. The following error occurred:
[Exception... "An invalid or illegal string was specified"  code: "12" nsresult: "0x8053000c (NS_ERROR_DOM_SYNTAX_ERR)"  location: "file:///C:/DOCUME~1/eliranm/LOCALS~1/Temp/anonymous6109849275533680625webdriver-profile/extensions/fxdriver@googlecode.com/components/driver_component.js Line: 5956"]
Build info: version: '2.23.1', revision: '17143', time: '2012-06-08 18:59:28'
System info: os.name: 'Windows XP', os.arch: 'x86', os.version: '5.1', java.version: '1.6.0_31'
Driver info: driver.version: unknown
    at <anonymous class>.<anonymous method>(file:///C:/DOCUME~1/eliranm/LOCALS~1/Temp/anonymous6109849275533680625webdriver-profile/extensions/fxdriver@googlecode.com/components/driver_component.js:6537) 
```

## 相关代码

```
public void previous(String type) {
    By cssSelector = By.cssSelector(".gs-a-btn[data-value='" + type + "']");
    driver.findElement(cssSelector).click();
} 
```

## 我试过什么

*   在属性选择器查询中用转义的双引号替换单引号。
*   指定属性选择器而不是属性值选择器，即`".gs-a-btn[\"data-value\"]"`相当`".gs-a-btn[data-value='" + type + "']"`。
*   在参考资料（例如[Selenium 参考资料](http://release.seleniumhq.org/selenium-core/1.0/reference.html)）中查找有关 CSS 属性选择器的任何限制的信息。该文件特别指出：

    > 目前 css 选择器定位器支持所有 css1、css2 和 css3 选择器，除了 css3 中的命名空间，一些伪类（`:nth-of-type`, `:nth-last-of-type`, `:first-of-type`, `:last-of-type`, `:only-of-type`, `:visited`, `:hover`, `:active`, `:focus`, `:indeterminate`）和伪元素（`::first-line`, `::first-letter`, `::selection`, `::before`, `::after`）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-01T17:29:33.793

您链接的参考适用于 Selenium IDE。

Selenium WebDriver 文档主要可以在官方网站[here (basic usage)](http://seleniumhq.org/docs/03_webdriver.html)和[here (advanced usage)](http://seleniumhq.org/docs/04_webdriver_advanced.html)上找到，也可以[在here](http://code.google.com/p/selenium/w/list) (aka "What didn't make it into the docs yet" - 特别是[FAQ](http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions) , [Advanced User Interactions](http://code.google.com/p/selenium/wiki/AdvancedUserInteractions)和很多有关 Selenium 内部结构的信息）。当然，主要*的信息来源是*[JavaDocs](http://selenium.googlecode.com/svn/trunk/docs/api/java/index.html)。

* * *

反正。Selenium 支持的 CSS 选择器是它下面的浏览器支持的（Selenium RC 除外，它有一个 Sizzle CSS 引擎），所以你的例子肯定可以工作。使用这个简单的测试页：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
    </head>
    <body>
        <input type="text" id="myInput" class="field" data-test="testytest" />
    </body>
</html> 
```

我能够在 IE 8 (!!) 和 Firefox 13 中成功运行它：

```
WebDriver driver = new FirefoxDriver();
driver.get("path to the file");
By cssSelector = By.cssSelector(".field[data-test='testytest']");
        // or By.cssSelector(".field[data-test=testytest]")
        // or By.cssSelector(".field[data-test]")
driver.findElement(cssSelector).sendKeys("Hello");
driver.quit(); 
```

所以我挖得更多。如果您尝试在 FF13 Firebug 控制台中运行任何此操作：

```
document.querySelector(".field[data-test]")
document.querySelector(".field[data-test=testytest]")
document.querySelector(".field[data-test='testytest']") 
```

它返回正确的元素。但是，其中任何一个：

```
document.querySelector(".field['data-test']")
document.querySelector(".field[\"data-test\"]") 
```

失败并出现“指定了无效或非法字符串”错误（在 Firefox 和 IE 中）这是正确的（因此，您收到的错误消息是正确的，选择器无效）。

请再试一次，去掉*任何*引号，确保你的`type`变量不包含任何引号或反斜杠或诸如此类的东西。该构造肯定可以工作。如果没有，请发布新的异常堆栈跟踪，以便我们可以看到导致它的确切选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-03T14:57:29.617

我也遇到了同样的例外。

所以我尝试通过Xpath而不是Css选择器定位元素，问题解决了

以下是有问题的代码

```
By.CssSelector("Css selector").GetAttribute("value"); 
```

有效的代码

```
By.XPath("Xpath of element").GetAttribute("value"); 
```

# java - 如何在 webapp 中绑定 JNDI 数据源？

> ID：11101739
> 
> 赞同：0
> 
> 时间：2012-06-19T13:14:28.453
> 
> 标签：java, web-applications, datasource, jndi

> **可能重复：**
> [以编程方式为 JBoss 4.2.x 创建数据源](https://stackoverflow.com/questions/1857551/programaticly-create-datasource-for-jboss-4-2-x)

我想在 webapp（在 servlet 中）绑定 JNDI DataSource 以进行数据库连接。可能吗？我没有胶水怎么做。

我能够在部署目录的 xml 文件中查找定义的数据源，但要求是动态添加数据源。

它适用于 Jboss 或 Tomcat。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:24:53.283

在 Tomcat Web 应用程序中，您可以找到 JNDI 目录的两个实例。一个本地的（每个应用程序上下文）和一个[全局的](http://tomcat.apache.org/tomcat-6.0-doc/jndi-resources-howto.html#Global_configuration)。

要在本地以编程方式绑定对象，您可以像往常一样使用[javax.naming.Context.bind(String, Object) ：](http://docs.oracle.com/javase/6/docs/api/javax/naming/Context.html#bind%28java.lang.String,%20java.lang.Object%29)

```
Context ctx = new InitialContext(); 
ctx.bind("mykey", myobject); 
```

另一方面，您将无法将资源动态绑定到全局上下文，因为它是只读的。

# .htaccess - .htaccess 具有路径 url 格式时 Yii 中的正则表达式

> ID：11101744
> 
> 赞同：0
> 
> 时间：2012-06-19T13:14:36.363
> 
> 标签：.htaccess, yii, regex

我正在尝试设置正则表达式以从 url 获取一些参数。这是一个网址示例：

```
mydomain.com/files/images/versions/large/uploadedGal/1-36.png 
```

我需要从中获取两个参数`large`并`36`制作一个像这样的网址：

```
mydomain.com/index.php?r=image/default/create&id=36&version=large 
```

这是我在 htaccess 中的正则表达式：

```
Options -Indexes

<IfModule mod_rewrite.c>

RewriteEngine on
RewriteBase /

# If the requested file or directory does not exist...
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# ...and if the source URL points to an image, we redirect to the create image URL.
RewriteRule versions/([^/]+)/[^\-\d]*\-?(\d+)\.(gif|jpg|png)$ index.php?r=image/default/create&id=$2&version=$1 [L,R,QSA]

</IfModule> 
```

哪个不起作用...我无法弄清楚问题出在哪里，我认为它没有写入参数，并且我得到错误 404 not found。我使用 urlFormat 作为路径顺便说一句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:20:25.957

嗯......你的模式是错误的/坏的。考虑您的示例网址

```
files/images/versions/large/uploadedGal/1-36.png 
```

以及它需要如何转换/重写

```
index.php?r=image/default/create&id=36&version=large 
```

试试这个（绝对有效，但您可能需要针对不同的 URL 类型对其进行调整，因为您只提供了 1 个 URL 示例）：

```
versions/([^/]+)/[^\-\d]*(?:\d+\-)?(\d+)\.(gif|jpg|png)$ 
```

或像这样（实际上取决于其他可能的 URL，但很可能这是您首先想要的）

```
versions/([^/]+)/[^\-]*\-?(\d+)\.(gif|jpg|png)$ 
```

* * *

您当前的模式将只匹配到这部分`files/images/versions/large/uploadedGal/`。

# file - xss 问题——将数据从文件（“缓冲区”）注入到 servlet 响应。文件下载注入案例

> ID：11101746
> 
> 赞同：0
> 
> 时间：2012-06-19T13:14:47.110
> 
> 标签：file, xss, code-injection

```
 FileOutputStream fos;
    HSSFWorkbook wb= new HSSFWorkbook();
    wb=aaaaa.getExportXLS(request, response, fileName, wb);
    fos=new FileOutputStream(uploadDir+File.separator+fileName);
    wb.write(fos);
    File fileXls=new File(uploadDir+File.separator+fileName);
    fileInuptStream = new FileInputStream(fileXls);
     bufferedInputStream = new BufferedInputStream(fileInuptStream);
                      byteArrayOutputStream = new ByteArrayOutputStream();

                    byte [] buffer = new byte [length];
                    while ((offset = bufferedInputStream.read(buffer, start, length)) != -1)
                        byteArrayOutputStream.write(buffer, start, offset);

                    buffer = byteArrayOutputStream.toByteArray();

                    response.setHeader("Expires", "0");
                    response.setHeader("Cache-Control", "must-revalidate, post-check=0, pre-check=0");
                    response.setHeader("Pragma", "public");
                    response.setContentType("application/xls");
                    response.setHeader("Content-disposition","attachment; filename="+fileName );
                    response.setContentLength((int ) fileXls.length());
                    response.getOutputStream().write(buffer); 
```

我有这段代码。在具有语法 response.getOutputStream().write(buffer); 的行处 报告了一个问题，它容易受到 xss 攻击。该报告来自客户端的代码审计工具。传递的消息说“将数据从文件（“缓冲区”）注入到 servlet 响应（可能的 XSS 攻击）”。我不知道如何解决？提前致谢。

工作了几个小时后，我了解到报告的问题是文件下载注入。解决方案在于使用 ESAPI 的方法

```
ESAPI.httpUtilities().setHeader(). 
```

但我想在两个地方和一篇研究论文中了解有关该方法的更多信息和使用细节

```
ESAPI.httpUtilities().safeSetHeader("Content-Disposition",
"attachment; filename=" + fn ); 
```

并且不存在上述方法的实现，而是他们建议使用 setHeader 方法。是否有人对此类问题和实施的解决方案有任何先前的经验。请分享您的经验/解决方案/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:16:53.770

需要大量验证。问题在于请求作为从数据库中检索数据的方法中的输入。它可以发起攻击。在将其写入响应之前验证文件名和其他输出。

# android - 使用 android 媒体播放器进行渐进式视频下载

> ID：11101748
> 
> 赞同：3
> 
> 时间：2012-06-19T13:14:52.150
> 
> 标签：android, video-streaming, android-mediaplayer, progressive-download

我正在使用 android 手机在延迟容忍网络上进行视频流处理。对于那个我试图根据袖珍旅程给出的教程来实现渐进式视频下载

[http://blog.infidian.com/2008/04/04/tutorial-custom-media-streaming-for-androids-mediaplayer/](http://blog.infidian.com/2008/04/04/tutorial-custom-media-streaming-for-androids-mediaplayer/)

在创建新的媒体播放器时，prepareAsync 函数会阻止视频显示，使流式传输无法忍受。有没有办法在媒体播放器准备好时显示一些东西？

我正在使用 SurfaceView 和 SUrfaceHolder 来显示 API 媒体演示中建议的视频。

```
private MediaPlayer createMediaPlayer(File mediaFile)
throws IOException {
    MediaPlayer mPlayer = new MediaPlayer();
    mPlayer.setOnErrorListener(
            new MediaPlayer.OnErrorListener() {
                public boolean onError(MediaPlayer mp, int what, int extra) {
                    Log.e(TAG, "Error in MediaPlayer: (" + what +") with extra (" +extra +")" );
                    return true;
                }
            });

    //  It appears that for security/permission reasons, it is better to pass a FileDescriptor rather than a direct path to the File.
    //  Also I have seen errors such as "PVMFErrNotSupported" and "Prepare failed.: status=0x1" if a file path String is passed to
    //  setDataSource().  So unless otherwise noted, we use a FileDescriptor here.
    FileInputStream fis = new FileInputStream(mediaFile);
    mPlayer.setDataSource(fis.getFD());
    mPlayer.setDisplay(holder);
    mPlayer.prepareAsync();
    return mPlayer;
}

/**
 * Transfer buffered data to the MediaPlayer.
 * NOTE: Interacting with a MediaPlayer on a non-main UI thread can cause thread-lock and crashes so 
 * this method should always be called using a Handler.
 */  
private void transferBufferToMediaPlayer() {
    try {
        // First determine if we need to restart the player after transferring data...e.g. perhaps the user pressed pause
        final boolean wasPlaying = mediaPlayer.isPlaying();
        final int curPosition = mediaPlayer.getCurrentPosition();
        Log.e(TAG, "Current position: "+curPosition);
        final MediaPlayer temp = mediaPlayer;

        // Copy the currently downloaded content to a new buffered File.  Store the old File for deleting later. 
        File oldBufferedFile = new File(context.getCacheDir(),"playingMedia" + counter + ".dat");
        File bufferedFile = new File(context.getCacheDir(),"playingMedia" + (counter++) + ".dat");

        //  This may be the last buffered File so ask that it be delete on exit.  If it's already deleted, then this won't mean anything.  If you want to 
        // keep and track fully downloaded files for later use, write caching code and please send me a copy.
        bufferedFile.deleteOnExit();   
        moveFile(downloadingMediaFile,bufferedFile);

        // Pause the current player now as we are about to create and start a new one.  So far (Android v1.5),
        // this always happens so quickly that the user never realized we've stopped the player and started a new one
        if(wasPlaying){
            Log.e(TAG, "mediaPlayer paused");
            mediaPlayer.pause();
        }
        //mediaPlayer.release();

        // Create a new MediaPlayer rather than try to re-prepare the prior one.
        mediaPlayer = createMediaPlayer(bufferedFile);

        mediaPlayer.setOnPreparedListener(
                new MediaPlayer.OnPreparedListener() {

                    @Override
                    public void onPrepared(MediaPlayer mPlayer) {
                        // TODO Auto-generated method stub
                        mediaPlayer.seekTo(curPosition);

                        //  Restart if at end of prior buffered content or mediaPlayer was previously playing.  
                        //  NOTE:  We test for < 1second of data because the media player can stop when there is still
                        //  a few milliseconds of data left to play
                        int mediaLength = mediaPlayer.getDuration() - mediaPlayer.getCurrentPosition();
                        boolean atEndOfFile = mediaLength >= 1000;
                        Log.e(TAG, "MediaLen:"+mediaLength);
                        if (wasPlaying || atEndOfFile){
                            Log.e(TAG, "starting new player");
                            temp.release();
                            mediaPlayer.start();
                        }
                    }
                });

        // Lastly delete the previously playing buffered File as it's no longer needed.
        oldBufferedFile.delete();

    }catch (Exception e) {
        Log.e(TAG, "Error updating to newly loaded content.", e);                   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-25T05:29:37.750

考虑使用 exoplayer

[http://developer.android.com/guide/topics/media/exoplayer.html](http://developer.android.com/guide/topics/media/exoplayer.html)

它在构建时考虑了文档中的流式传输：

> ExoPlayer 支持 MediaPlayer 当前未提供的功能，包括基于 HTTP 的动态自适应流式传输 (DASH)、SmoothStreaming 和持久缓存。ExoPlayer 可以扩展以处理其他媒体格式，并且因为您将其作为应用程序代码的一部分包含在内，您可以将其与您的应用程序一起更新。

# service - 如何在 Puppet 中定义两次相同的服务？

> ID：11101752
> 
> 赞同：1
> 
> 时间：2012-06-19T13:15:10.743
> 
> 标签：service, puppet

为了使用 Puppet 类部署 Varnish，我需要停止 Varnish 以移动和部署文件，然后在最后确保启动 Varnish。

我的问题很简单，如何在 Puppet 类中定义两次服务，以便在不同的步骤停止或启动服务？

```
class varnish::install (

    (...)

    service { "varnish":
        ensure => "stopped",
        require => Package['varnish'],
        before => Exec['mv-lib-varnish'],
    }

    (...)

    service { "varnish":
        ensure => "running",
        require => File["$varnishncsa_file"],
    }
} 
```

我有一个`Duplicate definition: Service[varnish] (...)`错误，这是合乎逻辑的......

在 Puppet 类中管理服务的最佳实践是什么？划分为多个类，或者可以选择“重命名”服务以多次声明它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:27:05.417

尝试以下方法以消除重复错误，但您尝试做的是错误的。Puppet 使系统处于某种一致的状态 - 所以告诉停止服务 X，做一些工作，启动服务 X - 它超出了适当的 puppet 使用范围，如果服务所依赖的某些文件被修改，puppet 更像是重新启动服务。

```
class varnish::install (

(...)

service { "varnish-stop":
    name => "varnish"
    ensure => "stopped",
    require => Package['varnish'],
    before => Exec['mv-lib-varnish'],
}

(...)

service { "varnish-start":
    name => "varnish"
    ensure => "running",
    require => File["$varnishncsa_file"],
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-18T09:10:51.903

使用 exec 和 service restart 作为“部署文件”操作（包/另一个 exec）的钩子（通知）。仅将服务本身定义为运行一次，因为这是您通常想要保证的。Puppet 用于描述目标状态。

# java - Jena TDB 使用 API 存储和查询

> ID：11101757
> 
> 赞同：6
> 
> 时间：2012-06-19T13:15:23.197
> 
> 标签：java, jena

我对 Jena-TDB 和 SPARQL 都是新手，所以这可能是一个愚蠢的问题。我在 Windows XP 上使用 tdb-0.9.0。

我正在为我的`trail_1.rdf`文件创建 TDB 模型。我在这里的理解（如果我错了，请纠正我）是以下代码将读取 TDB 模型中的给定 rdf 文件，并在给定目录中存储/加载（不确定什么是更好的词）模型`D:\Project\Store_DB\data1\tdb`：

```
// open TDB dataset
String directory = "D:\\Project\\Store_DB\\data1\\tdb";
Dataset dataset = TDBFactory.createDataset(directory);

Model tdb = dataset.getDefaultModel();

// read the input file
String source = "D:\\Project\\Store_DB\\tmp\\trail_1.rdf";
FileManager.get().readModel( tdb, source);

tdb.close();
dataset.close(); 
```

这种理解正确吗？

* * *

根据我的理解，因为现在模型存储在`D:\Project\Store_DB\data1\tdb`目录中，我应该能够在以后的某个时间点对其运行查询。

因此，要在我尝试以下查询 TDB 存储`D:\Project\Store_DB\data1\tdb`，但它什么也没打印：

```
String directory = "D:\\Project\\Store_DB\\data1\\tdb" ;
Dataset dataset = TDBFactory.createDataset(directory) ;

Iterator<String> graphNames = dataset.listNames();
while (graphNames.hasNext()) {
    String graphName = graphNames.next();
    System.out.println(graphName);
} 
```

* * *

我也试过这个，它也没有打印任何东西：

```
 String directory = "D:\\Project\\Store_DB\\data1\\tdb" ;
    Dataset dataset = TDBFactory.createDataset(directory) ;

    String sparqlQueryString = "SELECT (count(*) AS ?count) { ?s ?p ?o }" ;

    Query query = QueryFactory.create(sparqlQueryString) ;
    QueryExecution qexec = QueryExecutionFactory.create(query, dataset) ;
    ResultSet results = qexec.execSelect() ;
    ResultSetFormatter.out(results) ; 
```

我在做什么不正确？我上面提到的我的理解有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T09:07:27.863

对于您问题的第 (i) 部分，是的，您的理解是正确的。

对于第 (ii) 部分，`listNames`没有返回任何结果的原因是因为您没有将数据放入命名图中。尤其，

```
Model tdb = dataset.getDefaultModel(); 
```

表示您将数据存储到 TDB 的默认图形中，即没有名称的图形。如果您想`listNames`返回某些东西，请将该行更改为：

```
Model tdb = dataset.getNamedGraph( "graph42" ); 
```

或类似的东西。当然，您需要在查询数据时按名称引用该图。

如果您的目标只是测试您是否已成功将数据加载到存储中，请尝试使用命令行工具`bin/tdbdump`(Linux) 或`bat\tdbdump.bat`(Windows)。

对于第 (iii) 部分，我在我的系统上尝试了您的代码，指向我的一个 TDB 图像，它的工作原理与预期的一样。所以：您使用的 TDB 映像中没有任何数据（使用 tdbdump 进行测试），或者您实际运行的代码与上面的示例不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-27T12:03:23.927

我认为您的第 1 部分代码中的问题是，您没有提交数据。

尝试使用此版本的第 1 部分代码：

```
 String directory = "D:\\Project\\Store_DB\\data1\\tdb";
   Dataset dataset = TDBFactory.createDataset(directory);

   Model tdb = dataset.getDefaultModel();

   // read the input file
   String source = "D:\\Project\\Store_DB\\tmp\\trail_1.rdf";
   FileManager.get().readModel( tdb, source);

   dataset.commit();//INCLUDE THIS STAMEMENT

   tdb.close();
   dataset.close(); 
```

然后尝试使用您的第 3 部分代码:) ....

# javascript - $(this) 不起作用

> ID：11101759
> 
> 赞同：7
> 
> 时间：2012-06-19T13:15:32.727
> 
> 标签：javascript, jquery

我正在使用[ColorPicker 插件。](http://www.eyecon.ro/colorpicker/#about)我用以下代码初始化了插件：

```
$(".colorpic").ColorPicker({
    color: '#0000ff',
    onShow: function (colpkr) {
        $(colpkr).fadeIn(500);
        return false;
    },
    onHide: function (colpkr) {
        $(colpkr).fadeOut(500);
        return false;
    },
    onChange: function (hsb, hex, rgb) {
        $(this).css('backgroundColor', '#' + hex);  <= $(this) not working 
    }
}); 
```

现在我的问题是这在事件`$(this)`中不起作用。`onchange`请帮帮我好吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T13:18:02.663

试试这样：

```
$(".colorpic").each(function(){
    var $this = $(this);

    $this.ColorPicker({
        color: '#0000ff',
        onShow: function (colpkr) {
            $(colpkr).fadeIn(500);
            return false;
        },
        onHide: function (colpkr) {
            $(colpkr).fadeOut(500);
            return false;
        },
        onChange: function (hsb, hex, rgb) {
            $this.css('backgroundColor', '#' + hex);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T13:17:05.737

The `this` is a really big problem, since in this case the `this` goes to the function if I am not mistaken. Try the following:

```
var colorPicker=this;
onChange: function (hsb, hex, rgb) {
    $(colorPicker).css('backgroundColor', '#' + hex); 
} 
```

# php - Integrate MarkerClusterer with database driven Google Map V3

> ID：11101765
> 
> 赞同：0
> 
> 时间：2012-06-19T13:15:54.553
> 
> 标签：php, javascript, mysql, google-maps, google-maps-api-3

I want to integrate [MarkerCluster](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/examples.html) with my database driven Google map and have been struggling to get it to work.

The first code example generates a map from a database that already has the multiple markers lat/long.

The second bit of code is a simple version of Marker Cluster.

How can I combine the two? Both are setup for V3 of the api.

```
 <script type="text/javascript">
    //<![CDATA[

    var customIcons = {
      restaurant: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      },
      bar: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      }
    };

    function load() {
      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(47.6145, -122.3418),
        zoom: 13,
        mapTypeId: 'roadmap'
      });
      var infoWindow = new google.maps.InfoWindow;

      // Change this depending on the name of your PHP file
      downloadUrl("<?php bloginfo('stylesheet_directory'); ?>/phpsqlajax_genxml.php ", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("name");
          var address = markers[i].getAttribute("address");
          var type = markers[i].getAttribute("type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
          var html = "<b>" + name + "</b> <br/>" + address;
          var icon = customIcons[type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          bindInfoWindow(marker, map, infoWindow, html);
        }
      });
    }

    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {}

    //]]>
  </script> 
```

The example below is Marker Cluster:

```
var center = new google.maps.LatLng(37.4419, -122.1419);
var options = {
  'zoom': 13,
  'center': center,
  'mapTypeId': google.maps.MapTypeId.ROADMAP
};

var map = new google.maps.Map(document.getElementById("map"), options);

var markers = [];
for (var i = 0; i < 100; i++) {
  var latLng = new google.maps.LatLng(data.photos[i].latitude,
      data.photos[i].longitude);
  var marker = new google.maps.Marker({'position': latLng});
  markers.push(marker);
}
var markerCluster = new MarkerClusterer(map, markers); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:56:07.407

经过大量试验和错误以及@geocodezip的一些帮助：

```
 <script type="text/javascript">
    //<![CDATA[

    var customIcons = {
      restaurant: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      },
      bar: {
        icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      }
    };

    function load() {
      var cluster = [];
      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(47.6145, -122.3418),
        zoom: 13,
        mapTypeId: 'roadmap'
      });
var infowindow = new google.maps.InfoWindow();

      // Change this depending on the name of your PHP file
      downloadUrl("<?php bloginfo('stylesheet_directory'); ?>/phpsqlajax_genxml.php ", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("name");
          var address = markers[i].getAttribute("address");
          var type = markers[i].getAttribute("type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
          var html = "<b>" + name + "</b> <br/>" + address;
          var icon = customIcons[type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          google.maps.event.addListener(marker, 'click', (function(marker, i) {
                        return function() {
                            infowindow.setContent("Info on member here");
                            infowindow.open(map, marker);
                        }
                    })(marker, i));
          cluster.push(marker);
        }
        var mc = new MarkerClusterer(map,cluster);
      });
    }

    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {}

    //]]>
  </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:40:06.773

您问“如何将第二个示例集成到第一个示例中”？

将第一个示例移植到 v3 API，[这个示例](http://www.geocodezip.com/v3_MW_example_map3.html)翻译自 Mike Williams 的 v2 教程可能会有所帮助。

然后添加[集群](http://www.geocodezip.com/v3_MW_example_map3_clustered.html)和自定义信息窗口（您在第二个示例中拥有）。

# asp.net - ASP.NET Web 应用程序中的菜单

> ID：11101767
> 
> 赞同：3
> 
> 时间：2012-06-19T13:16:00.213
> 
> 标签：asp.net, .net, web-applications, menu, structure

我有以下问题：

我必须制作一个带有两行菜单的 ASP.NET Web 应用程序。它应该是这样的：

[http://jsfiddle.net/J7uSY/1/](http://jsfiddle.net/J7uSY/1/)

每个顶部菜单项应有多个子菜单项，单击顶部菜单项后应显示在下面的行中。

我尝试只使用一个 .NET 菜单控件来做到这一点，但我找不到用两行静态设置菜单样式的方法。

我的第二个想法是使用多个 .NET 菜单控件并在单击后通过代码隐藏隐藏/显示它们。不幸的是，这对 SEO 不利，因为机器人无法再找到整个菜单结构......

我现在的问题是：最聪明的方法是什么？你能给我一些关于这个问题的建议或解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:43:38.953

无需使用 asp.net 控件来执行此操作。带有javascript的CSS是要走的路，即[http://www.devinrolsen.com/pure-css-horizo ​​ntal-menu/](http://www.devinrolsen.com/pure-css-horizontal-menu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:38:42.060

如果您想要一种快速的方法来实现此功能，请使用[Superfish Menu](http://users.tpg.com.au/j_birch/plugins/superfish/)。我进行了很多搜索以找到它，最后找到了可以使用任何菜单结构的开箱即用的东西。Superfish Menu 是一个 jQuery 插件，因此您需要在页面中包含对[jQuery](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)的引用。

# c# - how should a metro app cache images for tombstoning (and should it)?

> ID：11101771
> 
> 赞同：0
> 
> 时间：2012-06-19T13:16:12.160
> 
> 标签：c#, windows-8, microsoft-metro, tombstoning

I have a c# metro app that downloads a collection of objects that have a property for a uri. This collection is bound to a ListBox with an Image source bound, this works fine.

When the app is tombstoning, I want to preserve all app state including the collection and the images that have been downloaded from the internet.

Covering the case, the users actions result in the collection being downloaded and displaying correctly they switch away to another app and the my app is terminated. The user then switches back to my app and expects exactly the same display as before but are now not connected to the internet.

Saving the collection is easy, and hooking into the ImageLoaded event on the Image is easy but how can I then save that image?

Is this required functionality, will windows automatically cache this type of http based image ?

Beware, the API has changed for RP and the commonly found examples using WritableBitmap no longer work as the constructor can no longer accept an ImageSource.

Update:

[Metro APP - BitmapImage to Byte[] or Download Image from Web and convert it to a Byte[] Array](https://stackoverflow.com/questions/10472282/metro-app-bitmapimage-to-byte-or-download-image-from-web-and-convert-it-to-a) that's what I was afraid of, those do not use the existing working bound image element but make a separate http call. I really do not want to download all my images twice. I will try a spike and see if windows caches the http request in this scenario.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:14:00.187

此答案与已删除的先前答案相呼应。

提供上述所需用户体验的唯一方法是在本地手动缓存图像。在这个领域没有为程序员做任何事情。

没有提出的是编码解决方案，已经创建了一个新问题来解决这个问题。[如何从 ImageSource 保存图像而无需再次下载？](https://stackoverflow.com/questions/11115320/how-can-i-save-an-image-from-an-imagesource-without-downloading-again)

# oracle - cat a file value in plsql

> ID：11101772
> 
> 赞同：0
> 
> 时间：2012-06-19T13:16:12.743
> 
> 标签：oracle, file, plsql, cat

I am just wondering is there any way that we can print the values of a file in plsql

thing is:

I select 5 columns from a table and one of the column is a path/file.
I want to print the contents of the file

I know its complex but will be good if someone shows me a way.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:40:08.893

一种方法是使用[UTL_FILE](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/u_file.htm)读取文件，并使用[dbms_output](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_output.htm)打印它。
请注意，您必须告诉 ORACLE 哪些路径可以保存文件（请参阅[此处](https://stackoverflow.com/a/2753582/1083652)）

另一种方法可能是使用 java 存储过程，请参阅此[AskTom](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:439619916584)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:44:35.043

这取决于您想要实现什么或上下文是什么。您可能对“外部表”或 utl_file 包或 CLOB 数据类型感兴趣。http://docs.oracle.com/cd/B19306_01/server.102/b14220/schema.htm#sthref777

# android - Android：从其他应用程序访问应用程序

> ID：11101773
> 
> 赞同：0
> 
> 时间：2012-06-19T13:16:14.353
> 
> 标签：android

我想从另一个应用程序访问我的应用程序。例如，我想从内置的 SMS 应用程序中复制一些文本并将文本添加到我的数据库中。但是整个操作应该从 SMS 应用程序中完成。那可能吗？

进一步说明：我正在制作一个购物清单应用程序。我的想法是，有人给你发短信：“你能捡起土豆吗？”，然后你可以长按短信，选择“土豆”这个词并将其添加到我的应用程序的数据库中，直接来自短信-应用。

问候杰斯珀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:19:18.763

Android 中的每个应用程序都在其自己的独立进程中运行，并且与其他应用程序隔离。但是有一种方法可以使用 Content Providers 在应用程序之间进行交互和共享信息。看看[这个](http://developer.android.com/guide/topics/providers/content-providers.html)

您将了解如何访问其他应用程序数据库，并从那里获取信息（对于您的应用程序，存储在 sms 应用程序数据库中的消息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:09:25.563

我会建议'Arkde'所建议的相同。

可能你想寻找内容提供者教程来做到这一点。你可以在[这里](http://www.vogella.com/articles/AndroidSQLite/article.html)找到一个 但是在开始本教程之前阅读 Android 提供的文档。如果您想在应用程序中使用上下文菜单，请阅读[此](http://developer.android.com/guide/topics/ui/menus.html)。这将使您的应用程序更具交互性。

# php - 另一组眼睛：列数与第 1 行的值数不匹配

> ID：11101774
> 
> 赞同：1
> 
> 时间：2012-06-19T13:16:14.973
> 
> 标签：php, mysql, html

我数了数，检查了逗号，并再次检查了整个过程，但我仍然找不到导致此错误的原因。它告诉我，我正在尝试输入比我给出的列名更多的信息，但我有 29 列和 29 个值。我可以看到没有缺少的逗号。

有人可以看看这个，看看我是否遗漏了什么？

```
$query = <<<EOD

insert into roster

 (conference, regtime, participanttype_id, category_id, title, 

  firstname, lastname, badgename, jobtitle, department, 

  organization, address1, address2, address3, city, 

  state, country, postal, email, phone, 

  fax, paytype, feedue, f01, yn01, 

  yn02, yn03, yn04, other) 

 values 

 ('event1023', now(), $sfund_partictype_id, $sfund_category_id, '$title', 

 '$firstname', '$lastname', '$badgename', '$jobtitle', '$deptname', 

 '$organization', '$address1', '$address2', '$address3', '$city', 

 '$state', '$country', '$postal', '$email', '$phone', 

 '$fax', '$paytype', $feedue, '$wedsession', '$yn01', 

 '$yn02', '$yn03', '$yn04', '$other')

  EOD; 
```

ETA：我把这个分开是因为过去对我帖子的批评表明我应该这样做。但在我的代码中不是这样。

ETA #2：这是奇怪的事情。这些值完美地进入数据库。但它仍然返回这个（并且也让我意识到 EEK 我的代码正在显示确切的错误，所以顺便说一句，是的，我会在它上线之前修复它）：

查询失败：

```
insert into roster 

(conference, regtime, participanttype_id, category_id, title, 
firstname, lastname, badgename, jobtitle, department, 
organization, address1, address2, address3, city, 
state, country, postal, email, phone, 
fax, paytype, feedue, f01, yn01, 
yn02, yn03, yn04, other) 

values 

('event1023', now(), 3, 14, 'Ms',
'Jane','Smith','Jane Smith', 'Developer', 'my dept',
'my organization', 'my address', '','','my city',
'NC','United States','55555','me@email.edu','555-555-5555',
'', 'CHECK', 225, '2', '1',
'0', '1', '0', 'n/a') 
```

`Column count doesn't match value count at row 1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:27:36.573

这个问题几乎可以肯定是由于缺少变量转义。我建议有两点：

首先，确保任何可能包含单引号的内容都已通过转义函数运行，或者除此之外，每一个都加倍。不过，我认为这不会导致您的问题，因为有人必须在一个值中准确地具有“'，'”。

如果 $feedue 中有逗号，则更有可能。这会将值分成两个数字，所以它仍然有效——只是不是你想要的。您的数据库应该自动将字符串转换为数字（但反之亦然），因此最简单的尝试就是在该值周围加上引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:22:40.090

您是否检查过任何字符串值中都有 ' （引号）？这将是它..

即 $postal 的值包含一个 ' 这将结束它并让它认为有一个新的值，或者像 O'Neil 这样的姓氏......等等

换句话说......使用 PDO 验证字符串值（无论如何，你应该使用这个我的 ysql_/mysqli_ 命令已经过时并且可能导致各种错误代码和不安全代码）或至少 mysql_real_escape_string 或任何确保单引号的方法不在值中:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:27:55.643

**原始答案：**

您在查询文本中包含“不安全”字符串。在赋值之后打印 $query 的内容。到时候你就会看到问题了。

考虑 $query 的内容，例如：

```
$title = "Courage','Fear"; 
```

我建议您使用该`mysql_real_escape_string`函数来避免 SQL 注入。

* * *

**编辑：**根据 OP 提供的进一步信息

OP 报告 SQL 文本中提供的字符串已正确转义，并且 OP 提供了生成的示例查询文本。

OP报告代码执行后，发现该行已插入数据库。所以，我们可以很确定抛出异常的不是这个语句。它必须是其他一些陈述。

OP 还报告说，在他向表中添加列之前，这是有效的。

鉴于您添加到问题中的 SQL 文本，我运行了一个测试，它对我来说运行得很好。

所以，我很确定这不是您在此处显示的 INSERT 语句，而是引发异常的一些 OTHER 语句。你碰巧`AFTER INSERT`在这张桌子上有一个触发器吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T13:23:10.103

我本周的教训：去检查 IT 以确保在更全球化的基础上没有发生其他事情……不要只是假设你的代码不正确。

感谢所有试图帮助我解决这个问题的人——下次我会打电话给 IT 人员，而不是花很长时间进行故障排除。

# c# - HTTPS Proxy server in C#

> ID：11101784
> 
> 赞同：1
> 
> 时间：2012-06-19T13:16:50.433
> 
> 标签：c#, ssl, https, proxy, sslstream

I´m working on HTTPS proxy server.It should be a console application. I would like to find a manual or example for it.I found lot of pieces or non working samples. I try example from MSND for SSLStream but unsuccessfully. Does anyone have some experiences or working example ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:30:28.853

假设您使用的是普通的 HTTPS 代理服务器（而不是 MITM 代理服务器），则根本不需要任何 SSL/TLS 代码。

它所需要的只是能够解释 HTTP`CONNECT`方法并将流量按原样转发到请求中使用的主机和端口`CONNECT`（例如`CONNECT host.example.org:443`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T05:53:33.077

看看mentalis代理源码
[http://www.mentalis.org/soft/projects/proxy/](http://www.mentalis.org/soft/projects/proxy/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-19T13:22:17.873

代码：

```
using System;
using System.Text;
using System.Net.Sockets;
using System.Net.Security;

namespace SslTcpClient
{
    public class SslTcpClient
    {
        public static void Main(string[] args)
        {
            string host = "encrypted.google.com";
            string proxy = "127.0.0.1";//host;
            int proxyPort = 8888;//443;

            byte[] buffer = new byte[2048];
            int bytes;

            // Connect socket
            TcpClient client = new TcpClient(proxy, proxyPort);
            NetworkStream stream = client.GetStream();

            // Establish Tcp tunnel
            byte[] tunnelRequest = Encoding.UTF8.GetBytes(String.Format("CONNECT {0}:443  HTTP/1.1\r\nHost: {0}\r\n\r\n", host));
            stream.Write(tunnelRequest , 0, tunnelRequest.Length);
            stream.Flush();

            // Read response to CONNECT request
            // There should be loop that reads multiple packets
            bytes = stream.Read(buffer, 0, buffer.Length);
            Console.Write(Encoding.UTF8.GetString(buffer, 0, bytes));

            // Wrap in SSL stream
            SslStream sslStream = new SslStream(stream);
            sslStream.AuthenticateAsClient(host);

            // Send request
            byte[] request = Encoding.UTF8.GetBytes(String.Format("GET https://{0}/  HTTP/1.1\r\nHost: {0}\r\n\r\n", host));
            sslStream.Write(request, 0, request.Length);
            sslStream.Flush();

            // Read response
            do
            {
                bytes = sslStream.Read(buffer, 0, buffer.Length);
                Console.Write(Encoding.UTF8.GetString(buffer, 0, bytes));
            } while (bytes != 0);

            client.Close();
            Console.ReadKey();
        }
    }
} 
```

;)

# performance - The performance of Ubuntu installed by wubi

> ID：11101786
> 
> 赞同：1
> 
> 时间：2012-06-19T13:16:57.717
> 
> 标签：performance, ubuntu, wubi

As you know, we can install the Ubuntu desktop by using wubi, in my opinion, it should be the same as other virtual machine, but I want to know the drawback about performance, has anyone done any benchmarks to quantify the performance? We can just ignore the performance drawback, or the loss is seriously, especial the IO performance?

# python - EXP(ORT) 密码和 M2Crypto/OpenSSL

> ID：11101794
> 
> 赞同：14
> 
> 时间：2012-06-19T13:17:27.813
> 
> 标签：python, cryptography, openssl, m2crypto, pyopenssl

我很难使用 EXPORT 级密码运行 M2Crypto SSLServer。

LOW/MEDIUM/HIGH 等级密码可以正常工作，但 EXPORT 不会。此外，当 OpenSSL 从命令行以服务器模式运行时，它可以毫无问题地接受 EXPORT 级密码。

所以，要么我遗漏了什么，要么 M2Crypto 模块有问题。任何帮助表示赞赏。

使用的 Python 代码 ( `ssl-server.py`) 如下所示：

```
import M2Crypto
import socket

CERTFILE = "dummy_cert.pem"
KEYFILE = "dummy_key.pem"
PROTOCOL = "sslv3"
HOST = "0.0.0.0"
PORT = 4433

def main():
    print "[i] Initializing context ..."
    ctx = M2Crypto.SSL.Context(protocol=PROTOCOL, weak_crypto=True)
    ctx.load_cert_chain(certchainfile=CERTFILE, keyfile=KEYFILE)
    ctx.set_options(M2Crypto.m2.SSL_OP_ALL)
    ctx.set_cipher_list("ALL")

    print "[i] Initializing socket ..."
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.bind((HOST, PORT))
    sock.listen(1)
    conn, addr = sock.accept()

    print "[i] SSL handshake ..."
    ssl_conn = M2Crypto.SSL.Connection(ctx=ctx, sock=conn)
    ssl_conn.setup_ssl()
    try:
        ssl_conn_res = ssl_conn.accept_ssl()
    except Exception, ex:
        print "[x] SSL connection failed: '%s'" % str(ex)
    else:
        if ssl_conn_res == 1:
            print "[i] SSL connection accepted"
        else:
            print "[x] SSL handshake failed: '%s'" % ssl_conn.ssl_get_error(ssl_conn_res)

if __name__ == "__main__":
    main() 
```

症状是：

```
$ uname -a
Linux XYZ 2.6.38-15-generic #59-Ubuntu SMP Fri Apr 27 16:03:32 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

$ cat /etc/lsb-release 
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=11.04
DISTRIB_CODENAME=natty
DISTRIB_DESCRIPTION="Ubuntu 11.04"

$ python -c "import M2Crypto;print M2Crypto.version_info"
(0, 20, 1)

$ openssl version
OpenSSL 0.9.8o 01 Jun 2010

1) NOT OK
SERVER (terminal 1): $ python ssl-server.py
CLIENT (terminal 2): $ openssl s_client -connect localhost:4433 -cipher EXPORT
CONNECTED(00000003)
28131:error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure:s23_clnt.c:602:

2) OK
SERVER (terminal 1): $ openssl s_server -cert dummy_cert.pem -key dummy_key.pem -ssl3 -no_tls1 -no_ssl2 -cipher EXPORT
CLIENT (terminal 2): $ openssl s_client -connect localhost:4433 -cipher EXPORT
CONNECTED(00000003)
depth=0 C = BE, CN = www.example.com
verify error:num=20:unable to get local issuer certificate
verify return:1
depth=0 C = BE, CN = www.example.com
verify error:num=27:certificate not trusted
verify return:1
depth=0 C = BE, CN = www.example.com
verify error:num=21:unable to verify the first certificate
verify return:1
---
Certificate chain
 0 s:/C=BE/CN=www.example.com
   i:/C=BE/CN=test-ca
---
Server certificate
-----BEGIN CERTIFICATE-----
...
-----END CERTIFICATE-----
subject=/C=BE/CN=www.example.com
issuer=/C=BE/CN=test-ca
---
No client certificate CA names sent
---
SSL handshake has read 1141 bytes and written 242 bytes
---
New, TLSv1/SSLv3, Cipher is EXP-EDH-RSA-DES-CBC-SHA
Server public key is 1024 bit
Secure Renegotiation IS supported
Compression: zlib compression
Expansion: zlib compression
SSL-Session:
    Protocol  : SSLv3
    Cipher    : EXP-EDH-RSA-DES-CBC-SHA
    Session-ID: B052D5D5A436F9A0B9D3FB24F2E32A8A06A0B6828230621C4CFAEB82A0A9AE0C
    Session-ID-ctx: 
    Master-Key:     47F6E3720D06518B961FE389F13BCDE42C37F703099ABBB9B3DA35383C420F519D4F4773D35E470CF6FF7BB243B29069
    Key-Arg   : None
    PSK identity: None
    PSK identity hint: None
    SRP username: None
    Compression: 1 (zlib compression)
    Start Time: 1340644713
    Timeout   : 300 (sec)
    Verify return code: 21 (unable to verify the first certificate)
--- 
```

a的内容`dummy_cert.pem`如下：

```
-----BEGIN CERTIFICATE-----
MIICkTCCAfqgAwIBAgIBAjANBgkqhkiG9w0BAQUFADAfMQswCQYDVQQGEwJCRTEQ
MA4GA1UEAxMHdGVzdC1jYTAeFw0xMjA1MDYwODQyNDlaFw0yMjA1MDMwODQyNDla
MCcxCzAJBgNVBAYTAkJFMRgwFgYDVQQDEw93d3cuZXhhbXBsZS5jb20wgZ8wDQYJ
KoZIhvcNAQEBBQADgY0AMIGJAoGBAL7OBv9wRwtNjN984XSy22/rw6tHM6Lq/Ccf
NoHKbqwC+PsxgmgJJiGBGewrzBR42toqHJi7EjHhuvrgqV9s2duPQBAANh7tzY1h
6VekrwhIIt4o1h0F2KB16VXA8s918d+8pRGt2T11GUh/QT3m9yY1VzqdIBeAfklC
ET6ncPK/AgMBAAGjgdQwgdEwCQYDVR0TBAIwADARBglghkgBhvhCAQEEBAMCBkAw
KwYJYIZIAYb4QgENBB4WHFRpbnlDQSBHZW5lcmF0ZWQgQ2VydGlmaWNhdGUwHQYD
VR0OBBYEFNGQArEZPKprJTn7A64qEFfl0m4xME8GA1UdIwRIMEaAFFuITOUJlGrJ
9lKufs8cm1MpwXrroSOkITAfMQswCQYDVQQGEwJCRTEQMA4GA1UEAxMHdGVzdC1j
YYIJALimgW7YUgdrMAkGA1UdEgQCMAAwCQYDVR0RBAIwADANBgkqhkiG9w0BAQUF
AAOBgQDWh8A0eBxI9XHy68xdjFsk2oerJeV6qqlcmtPZgz3GlarRcWcKsRJOyLLL
dCOe7tY5isWQAoLt6XALzDWjbQkTJnxBaKHif1MIikuajaYKT7LA1MvFn50Qrm6n
f9hG7gvdTpm1rlPcs0qibp1vJVubkU51mT6JT4UnLfeVIjtL7Q==
-----END CERTIFICATE----- 
```

a的内容`dummy_key.pem`如下：

```
-----BEGIN RSA PRIVATE KEY-----
MIICXgIBAAKBgQC+zgb/cEcLTYzffOF0sttv68OrRzOi6vwnHzaBym6sAvj7MYJo
CSYhgRnsK8wUeNraKhyYuxIx4br64KlfbNnbj0AQADYe7c2NYelXpK8ISCLeKNYd
BdigdelVwPLPdfHfvKURrdk9dRlIf0E95vcmNVc6nSAXgH5JQhE+p3DyvwIDAQAB
AoGBAIZldIRkP4Z0n2+j9OJQQUS6Wl7AjlyJDAc6cxhE0GOUzG+S1foVx6f92ZaC
2wLoha75zp691fkQuLWRnXu7nk9QwxQdOppKijIPHdL2cYtUc9UCedN5rExjpcOP
4Hjwf17YOxK2J0zzmG1djTBB47BKGUedSQ7E1QxGcrESS2XxAkEA+6ey2jy8etWi
QmCdJJIxXwKRVHCmt5LVwj+IOk/u3sr1AGfBm7spKGU3boCiFt4FmjGMax7B9r/e
zPaMb34guwJBAMIZX7Vv5gfjvWtgp6pyE/UkjRSOKBpuy9gyiqtLBJwehj/qsBqr
O6tFmjMFiudVusnVSrEFGAPLV52xf0U4580CQQDkEQ1UH2spX2dYBLslo6A+3NLc
1eMhx18WVgGd50cyfnkfzuh1vF8GjwR3jvhXBQvKvFDn284pU6YV1vNbL9F1AkEA
o2CwSwyRV3q+6i9Fchbr7aCCkBbIctdoBeclCeHvU2nuHsbwzMHtS9EeZmv365kh
zNoYMMDU4fy7FyVct2ua0QJASXtIwYKZ2CAP+lAQqfh+knRRqtqdLt4Lt0mpML5m
UtsECS8frKeF3mynXfsyRkvC8F2WFiJVJ3+D+y3zYNGlZg==
-----END RSA PRIVATE KEY----- 
```

**更新**：在低级别握手数据​​包似乎是相同的，除了该`random[32]`字段使这更加奇怪。

`ssldump -a -A -H -i lo`可以在这里找到这两种情况的SSL 转储 ( )：

[http://pastebin.com/YuC7d8zg](http://pastebin.com/YuC7d8zg)（不正常的情况）

[http://pastebin.com/U6YGQmv9（OK](http://pastebin.com/U6YGQmv9)案例）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T11:27:28.703

我需要对 python 脚本进行以下两个调整，以使其与导出密码套件一起使用：

```
PROTOCOL = "sslv23"
...
    print "[i] Initializing context ..."
    ctx = M2Crypto.SSL.Context(protocol=PROTOCOL, weak_crypto=True)
    ctx.load_cert_chain(certchainfile=CERTFILE, keyfile=KEYFILE)
    ctx.set_options(M2Crypto.m2.SSL_OP_ALL)
    ctx.set_tmp_rsa(M2Crypto.RSA.gen_key(512, 65537))
    ctx.set_cipher_list("ALL") 
```

那是：

1.  使用 SSLv23 作为协议标识符（SSLv2/v3 兼容模式）。不知道为什么在这种情况下需要它，但它似乎不起作用。
2.  使用 . 在上下文上设置一个临时的、短暂的 RSA 密钥`set_tmp_rsa()`。这是必需的，因为对于导出密码，提供的（1024 位）RSA 密钥仅用于身份验证（签名），而临时的、出口受损的 512 位 RSA 密钥用于保密（加密）。OpenSSL 要求您在上下文中设置此密钥（请参阅[SSL_set_tmp_rsa() 的文档](http://www.openssl.org/docs/ssl/SSL_CTX_set_tmp_rsa_callback.html)）。

奇怪的是，它还可以在仅 SSLv2 模式下工作（在测试时使用`-ssl2`on `openssl s_client`），而无需设置临时 RSA 密钥（在脚本中调用`set_tmp_rsa`注释掉）。我不知道为什么。

通常，一些密码套件需要将特殊密钥添加到上下文中，例如使用 DH（组参数）或 ECDH（曲线）的套件。要准确了解每个密码套件的用途，`openssl ciphers -v`可能会很有见地，例如：

```
% openssl ciphers -v EXPORT
EXP-EDH-RSA-DES-CBC-SHA SSLv3 Kx=DH(512)  Au=RSA  Enc=DES(40)   Mac=SHA1 export
EXP-EDH-DSS-DES-CBC-SHA SSLv3 Kx=DH(512)  Au=DSS  Enc=DES(40)   Mac=SHA1 export
EXP-ADH-DES-CBC-SHA     SSLv3 Kx=DH(512)  Au=None Enc=DES(40)   Mac=SHA1 export
EXP-DES-CBC-SHA         SSLv3 Kx=RSA(512) Au=RSA  Enc=DES(40)   Mac=SHA1 export
EXP-RC2-CBC-MD5         SSLv3 Kx=RSA(512) Au=RSA  Enc=RC2(40)   Mac=MD5  export
EXP-RC2-CBC-MD5         SSLv2 Kx=RSA(512) Au=RSA  Enc=RC2(40)   Mac=MD5  export
EXP-ADH-RC4-MD5         SSLv3 Kx=DH(512)  Au=None Enc=RC4(40)   Mac=MD5  export
EXP-RC4-MD5             SSLv3 Kx=RSA(512) Au=RSA  Enc=RC4(40)   Mac=MD5  export
EXP-RC4-MD5             SSLv2 Kx=RSA(512) Au=RSA  Enc=RC4(40)   Mac=MD5  export 
```

**针对有关 DSS 密码套件的问题进行**编辑：****

 **DSS/DSA 密码套件需要 DH 参数，当然还有基于 DSS/DSA 的服务器证书，而不是（仅）一个 RSA 证书。这不仅适用于导出密码套件，而且适用于所有使用 DSS/DSA 验证真实性的套件。DSS/DSA 在设计上只能用于签名，不能用于加密，以允许出口到不受信任的国家。因为 DSS/DSA 只能用于签名，所以它需要一个短暂的 Diffie-Hellman 密钥交换来建立一个共享会话密钥。这就是密码套件中的 EDH 所代表的含义。要设置 DH 参数，您将使用 OpenSSL [SSL_set_tmp_dh()](http://www.openssl.org/docs/ssl/SSL_CTX_set_tmp_dh_callback.html) API 的 M2Crypto 等效项。

请注意，OpenSSL 允许将 RSA 和 DSA/DSS 证书/密钥对加载到相同的 SSL 上下文中。**

# c# - .包括不在实体框架上工作

> ID：11101795
> 
> 赞同：1
> 
> 时间：2012-06-19T13:17:29.230
> 
> 标签：c#, linq, entity-framework, entity-framework-4.1

我需要查询一个对象及其相关对象，我使用的是工作单元模式和存储库模式。

下面的代码只返回我的主要对象，而不是相关的。

```
public List<EcoBonusRequest> GetAllRequestsWaitForPayment()
            {
                return _context.EcoBonusRequests.Where(p => p.CurrentStatus == RequestStatus.WaitingForPayment).Include("Dealer").Include("Vehicle").ToList();
            } 
```

因此，当我尝试在我的页面上使用该对象的经销商和车辆时，我得到一个空引用异常

```
public void Databind(EcoBonusRequest ecoBonusRequest)
        {
            if (ecoBonusRequest != null)
            {
                LblRegistrationNumberValue.Text = ecoBonusRequest.Dealer.Nuteres; ---> Exception here 
```

存储库

```
public class UnitOfWork : IDisposable
    {
        #region Variables
            private readonly AskAndTrackContext _context = new AskAndTrackContext();
            private RequestBaseRepository _requestBaseRepository;
            private EcoBonusRequestRepository _ecobonusworkflowRepository;

 public RequestBaseRepository RequestBaseRepository
            {
                get
                {
                    return _requestBaseRepository ??
                            (_requestBaseRepository = new RequestBaseRepository(_context));
                }
            }

            public EcoBonusRequestRepository EcoBonusRequestRepository
            {
                get
                {
                    return _ecobonusworkflowRepository ??
                            (_ecobonusworkflowRepository = new EcoBonusRequestRepository(_context));
                }
            } 
```

**更新1：实体**

```
public class RequestBase
    {
        public int RequestBaseId { get; set; }
        public string CurrentStatus { get; set; }
        public string RequestNumber { get; set; }

        [Column(TypeName = "Date")]
        public DateTime RequestDate { get; set; }
        public bool IsOnHold { get; set; }

        public virtual Dealer Dealer { get; set; }
        public virtual Requester Requester { get; set; }
        public virtual Vehicle Vehicle { get; set; }

        public virtual ICollection<Attachment> Attachments { get; set; }
        public virtual ICollection<WorkflowHistory> WorkflowHistories { get; set; }

 public class EcoBonusRequest : RequestBase
    {
        public string BrandReturnedVehicle { get; set; }

        public string TypeReturnedVehicle { get; set; }

        public string ChassisReturnedVehicle { get; set; } 
```

**数据库上下文**

```
public class AskAndTrackContext : DbContext
    {
        public AskAndTrackContext() : base("AskAndTrack")
        {
            //It doesnt create the database.
            //Database.SetInitializer<AskAndTrackContext>(null);
            //Database.SetInitializer<AskAndTrackContext>(new AskAndTrackDevInitializer());
        }

        public DbSet<RequestBase> RequestBases { get; set; }
        public DbSet<EcoBonusRequest> EcoBonusRequests { get; set; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:22:05.393

好吧， Include 意味着被引用的实体将被预先加载。

但是，如果引用的实体可以为空（并且在您的查询中为 null），则查询将无法检索不存在的引用实体。

因此，如果 ecoBonusRequest.Dealer == null... 您将获得 NRE。

**编辑**：你能试着用这种方式测试吗？

```
public List<EcoBonusRequest> GetAllRequestsWaitForPayment()
            {
                var query = _context.EcoBonusRequests.Where(p => p.CurrentStatus == RequestStatus.WaitingForPayment).Include("Dealer").Include("Vehicle");
                var dealerExists = query.All(m => m.Dealer != null);
                return query.ToList();
            } 
```

**编辑 2**：

可能是继承和Include的问题 可以试试

```
return _context.RequestBase
               .Where(p => p.CurrentStatus == RequestStatus.WaitingForPayment)
               .Include("Dealer")
               .Include("Vehicle")
               .OfType<EcoBonusRequests>()
               .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:21:47.437

尝试将包含移动到 where 之前，像这样

```
return _context.EcoBonusRequests.Include("Dealer").Include("Vehicle").Where(p => p.CurrentStatus == RequestStatus.WaitingForPayment).ToList(); 
```

# .htaccess - How? (.htaccess redirect 301)

> ID：11101797
> 
> 赞同：1
> 
> 时间：2012-06-19T13:17:35.487
> 
> 标签：.htaccess, redirect, http-status-code-301

I have a site in localhost/gallery/ folder. I want to make this: - when I write localhost/gallery/12 real addres whic is open to be localhost/gallery/index.php?url=12 I tried to made it but unfortunately it doesn't work. Return error 310 (ERR_TOO_MANY_REDIRECTS).

```
AddDefaultCharset UTF-8

Options +FollowSymlinks -Indexes
RewriteEngine On
RewriteCond %{THE_REQUEST} /index\.(php|html)\ HTTP/
RewriteRule ^index\.(php|html)$ / [R=301,L]
RewriteRule ^(.*)$ http://localhost/gallery/$1 [R=301,L]

RewriteBase /

RewriteRule ^([^.]+)$ index.php?url=$1 [L,NC,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:10:13.623

以下行实际上强制执行外部重定向：

```
RewriteRule ^(.*)$ http://localhost/gallery/$1 [R=301,L] 
```

因此，请求`http://localhost/foobar`将导致 301 响应告诉客户端请求`http://localhost/gallery/foobar`。客户端现在向*发出新请求*`http://localhost/gallery/foobar`，这将导致对 的 301 响应`http://localhost/gallery/gallery/foobar`，依此类推。

试试这个：

```
AddDefaultCharset UTF-8

Options +FollowSymlinks -Indexes
RewriteEngine On
RewriteCond %{THE_REQUEST} /index\.(php|html)\ HTTP/
RewriteRule ^index\.(php|html)$ / [R=301,L]

RewriteCond %{REQUEST_URI} !^/gallery/
RewriteRule ^(.*)$ http://localhost/gallery/$1 [R=301,L]

RewriteBase /
RewriteRule ^gallery/([^.]+)/?$ gallery/index.php?url=$1 [NC,QSA,L] 
```

请注意，我在无限循环规则之前添加了一个重写条件，以阻止已经以 /gallery 开头的 URL 激活该重定向。

另外，我已经修改了文件规则，`http://localhost/gallery/foobar`以便`http://localhost/gallery/index.php?url=foobar`按照您的描述正确重写。请注意，`/?`此模式中的 the 为您提供了一个可选的尾部斜杠，因此`http://localhost/gallery/12`两者`http://localhost/gallery/12/`都可以工作。如果您不想要后者，请`/?`从模式中删除。

# objective-c - 获取连接到套接字的主机的主机名

> ID：11101799
> 
> 赞同：2
> 
> 时间：2012-06-19T13:17:44.520
> 
> 标签：objective-c, ios, sockets, hostname, tcpserver

我正在使用 Apple 的 TCPServer 类从传入连接监听打开一个套接字。这是当有人在侦听套接字上连接时调用的回调：

```
static void TCPServerAcceptCallBack(CFSocketRef socket, CFSocketCallBackType type, CFDataRef address, const void *data, void *info) {
TCPServer *server = (TCPServer *)info;
if (kCFSocketAcceptCallBack == type) { 
    // for an AcceptCallBack, the data parameter is a pointer to a CFSocketNativeHandle
    CFSocketNativeHandle nativeSocketHandle = *(CFSocketNativeHandle *)data;
    uint8_t name[SOCK_MAXADDRLEN];
    socklen_t namelen = sizeof(name);
    NSData *peer = nil;
    if (0 == getpeername(nativeSocketHandle, (struct sockaddr *)name, &namelen)) {
        peer = [NSData dataWithBytes:name length:namelen];
    }

    CFReadStreamRef readStream = NULL;
    CFWriteStreamRef writeStream = NULL;
    CFStreamCreatePairWithSocket(kCFAllocatorDefault, nativeSocketHandle, &readStream, &writeStream);
    if (readStream && writeStream) {
        CFReadStreamSetProperty(readStream, kCFStreamPropertyShouldCloseNativeSocket, kCFBooleanTrue);
        CFWriteStreamSetProperty(writeStream, kCFStreamPropertyShouldCloseNativeSocket, kCFBooleanTrue);
        [server handleNewConnectionFromAddress:peer inputStream:(NSInputStream *)readStream outputStream:(NSOutputStream *)writeStream];
    } else {
        // on any failure, need to destroy the CFSocketNativeHandle 
        // since we are not going to use it any more
        close(nativeSocketHandle);
    }
    if (readStream) CFRelease(readStream);
    if (writeStream) CFRelease(writeStream);
}
} 
```

有没有办法获取正在连接的设备的主机名？问候， 科萨

[编辑] 我试过这样的方法来提取 IP：

```
struct sockaddr_in *s = (struct sockaddr_in*)name;
char *ipstr = malloc(INET_ADDRSTRLEN);         
ipstr = inet_ntoa(s->sin_addr);

NSLog(@"ip = %s", ipstr); 
```

但它给了我 0.0.0.0。

[编辑] 仍在努力，但仍然没有成功。根据苹果的文档地址参数是：

一个 CFData 对象，它包含适合于 s 协议族（例如 struct sockaddr_in 或 struct sockaddr_in6）的 struct sockaddr 的内容，标识 s 连接到的远程地址。除 kCFSocketAcceptCallBack 和 kCFSocketDataCallBack 回调外，此值为 NULL。

但是我无法提取除 132.20.0.1 之外的任何其他 IP（这显然不是我所期望的 IP）我真的很困惑，如果有人能帮助我，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-21T08:14:39.737

在尝试按照您的方式获取地址后，我想出了一个对我有用的代码的轻微变体。如果您正在处理 IPv6 地址，则此代码可以工作，但很容易更改为使用 IPv4。无论如何，我将不得不更改代码以使用两者。

```
- (void)getPublicClientAddress {
    // Get public IP from stream

    // Get hands on appropriate data structures via the socket number
    CFSocketNativeHandle nativeSocketHandle = _socketnumber;
    uint8_t name[SOCK_MAXADDRLEN];
    socklen_t namelen = sizeof(name);
    NSData *peer = nil;
    if (0 == getpeername(nativeSocketHandle, (struct sockaddr *)name, &namelen)) {
        peer = [NSData dataWithBytes:name length:namelen];
    }

    // TODO distiguish between ipv4 and ipv6
    struct sockaddr_in6 *s = (struct sockaddr_in6*)name;

    // convert ip to string
    char *ipstr = malloc(INET6_ADDRSTRLEN);
    struct in6_addr *ipv6addr = &s->sin6_addr;  // used pointer here, but that really should make no difference
    inet_ntop(AF_INET6, ipv6addr, ipstr, sizeof(ipstr)); // used a different function here

    // convert port to int
    int portnumber = s->sin6_port;

    // Save in properties
    _publicIP   = [NSString stringWithFormat:@"%s", ipstr];
    _publicPort = [NSString stringWithFormat:@"%d", portnumber];
} 
```

所以这段代码对我有用，我希望它可以帮助那些在寻找答案时偶然发现这篇文章的人。

# python - 这个全局类变量如何兼容 pep8 并且仍然有效？

> ID：11101806
> 
> 赞同：1
> 
> 时间：2012-06-19T13:18:09.553
> 
> 标签：python, class, variables, pep8

[Pep8](http://www.python.org/dev/peps/pep-0008/#function-and-method-arguments)建议始终`cls`用作类方法定义的第一个参数。现在假设我想使用一个类变量（在这种情况下：）`cls.cartridge_state`，它也可以在实例方法中使用（在这种情况下：）`__init__`。所以为此我需要使变量成为全局变量（参见下面的代码）。但是实例化`FountainPen`会产生以下运行时错误：

```
self.cartridge_state = cls.cartridge_state
NameError: global name 'cls' is not defined 
```

但是当我更改`global cartridge_state`为`global cls.cartridge_state`我尝试导入模块时再次收到 syntaxError 。

```
class FountainPen(object):
    cartridge_ink = "water-based"
    @classmethod
    def toggle_default_cartridge_state(cls):
        i = 0
        cartridge_states = ['non-empty','empty']
        global cartridge_state
        cls.cartridge_state = cartridge_states[i]
        i += 1

    def __init__(self):
        self.cartridge_state = cls.cartridge_state
        global number_of_refills
        self.number_of_refills = 0

    def write(self):
        print Pen.write(self)
        self.cartridge_state = "empty"
        return self.cartridge_state

    def refill(self):
        self.cartridge_state = "non-empty"
        self.number_of_refills += 1 
```

如何让类变量`cartridge_state`符合 pep8 并使此代码正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T13:33:02.737

可以通过以下方式读取类属性`self`：

```
class FountainPen(object):
    cartridge_ink = "water-based"
    default_cartridge_state = "empty"

    @classmethod
    def toggle_default_cartridge_state(cls):
        if cls.default_cartridge_state == "empty":
            cls.default_cartridge_state = "non-empty"  
        else:
            cls.default_cartridge_state = "empty"

    def __init__(self):
        self.cartridge_state = self.default_cartridge_state

    def write(self):
        print Pen.write(self)
        self.cartridge_state = "empty"
        return self.cartridge_state

    def refill(self):
        self.cartridge_state = "non-empty"
        self.number_of_refills += 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:24:04.813

`PEP 8`说的是这应该`cls`是第一个论点。`self`在实例方法中定义第一个参数时的方式相同。我想这是为了避免在调用这样的类方法时出现麻烦`self.yourclassmethod()`。但我不明白为什么需要`@classmethod`装饰器。

**编辑：**

我做的不同，而不是`@classmethod`我使用`@staticmethod`，但我意识到我们不是在谈论同一件事。如果有人认为我错了，请告诉我。

例子：

```
class Bar(object):
    @staticmethod
    def foo(myarg):
        return myarg * 2

Bar.foo(2) 
```

**编辑2：**

我纠正自己，`@classmethod`并`@staticmethod`代表不同的东西（见[这里](https://stackoverflow.com/questions/136097/what-is-the-difference-between-staticmethod-and-classmethod-in-python)）。静态方法不应该修改类中的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:47:19.733

忘了`global`; `global`与类和对象无关。

当您访问对象的属性时，将首先在对象上查找，然后在类上查找。这意味着如果您希望一个对象拥有自己的属性副本并且不反映对该属性的后续更新，那么您需要做的就是将其复制到`__init__`：

```
def __init__(self):
    self.prop = self.prop 
```

# c - stat lib/ld-2.8.so 没有这样的文件或目录

> ID：11101811
> 
> 赞同：1
> 
> 时间：2012-06-19T13:18:21.407
> 
> 标签：c, linux, arm, embedded-linux

我是嵌入式 linux 的新手。

我需要将 TI 的数字视频软件开发套件 ( [DVSDK](http://software-dl.ti.com/dsps/dsps_public_sw/sdo_sb/targetcontent/dvsdk/DVSDK_4_00/4_02_00_06/exports/dvsdk_dm368-evm_4_02_00_06_setuplinux) ) 与 libMirlin_arm_2010_q1_202.so 集成。

[我可以使用 codesourcery arm-2009q1-203 工具链和RidgeRun](http://www.ridgerun.com/) SDK构建 TI DVSDK，但 libMirlin_arm_2010_q1_202.so 是使用 codesourcery arm-2010q1-202 工具链构建的，我无法获得源代码。

使用 arm-2009q1-203 工具链导致

> libMirlin.so：未定义引用`std::ctype::_M_widen_init() const@GLIBCXX_3.4.11

这与[此](https://stackoverflow.com/q/4035445/398460)类似，但使用 arm-2010q1-202 工具链会导致此问题

> 安装：无法统计`/opt/codesourcery/arm-2010q1/arm-none-linux-gnueabi/libc/lib/ld-2.8.so'：没有这样的文件或目录。

看来 arm-2010q1-202 工具链已更新为 ld-2.11.1.so。

如何修改构建配置以使用 ld-2.11.1.so 而不是 ld-2.8.so？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:59:22.200

你的道路上有什么？生成文件？

您的第二个问题是因为该文件不存在。至于使用较新的库，您需要查看 Makefile 包含的内容。您可能需要在几个地方将 8.so 更改为 11.1.so，并且可能将 libstdc++.so 迁移到 6.0.1.0 到 6.0.1.2。

# quickfix - 如何确定消息是否通过 QuickFix 发送？

> ID：11101819
> 
> 赞同：1
> 
> 时间：2012-06-19T13:19:06.440
> 
> 标签：quickfix

当我使用 quickfix 作为客户端发送消息时，我如何知道它是否发送成功？

最好的，

德韦蒂

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:41:10.177

这取决于您的交易对手支持的消息类型和流程。对于某些您永远不会知道的消息，其他消息（例如登录或心跳）使用相同的消息类型具有固定的保证响应。其他人，例如 NOS (D) 使用更新订单状态的执行报告进行响应。典型流程可以在 FIX 网站上找到，大多数交易对手的“参与规则”详细说明了他们的预期流程，并将包括他们支持的任何确认或状态更新消息。除了这些流之外，没有简单的确认消息已被接收。编辑：看到您的评论后，我会补充说报价请求通常不会发送确认。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:21:38.240

我完全同意 MD-Tech。

根据我的经验，我们与许多交易对手合作，每个交易对手都提供了一套“规则”，以尽量减少信息丢失的可能性。

例如，对于执行消息，通常的做法是回复“确认”消息以通知交易对手。

还要记住，序列号表明在当前会话期间没有消息丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T20:21:38.260

屏幕日志和文件日志应保持启用状态。如果某些标签丢失或错误，则会有基于 FIX 协议的明确拒绝消息，其中提到了 FIX 标签。

# javascript - 点击 iframe 内的链接

> ID：11101824
> 
> 赞同：1
> 
> 时间：2012-06-19T13:19:25.660
> 
> 标签：javascript, onclick

我想在 javascript 的帮助下单击 iframe 内的链接，但这不起作用。index.php 在框架内加载 redirect.php，然后在 iframe 外部创建按钮，单击链接[http://www.yoursite.com/](http://www.yoursite.com/)。索引.html：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Untitled Page</title>
    <script type="text/javascript">
  function call() {
    var allAnc = document.getElementById("d").contentDocument.getElementsByTagName("a");
    for (var i = 0; i < allAnc.length; i++) {
    if (allAnc[i].href.indexOf("http") > 0) {
    (allAnc[i]).click();
    break;
    }
    }
  }
    </script>
</head>
<body>
    <input id="Button1" type="button" onclick="call()" value="button" />
<iframe id="d" src="redirect.html" width="100%" height=700"></iframe>
</body>
</html> 
```

重定向.html：

```
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><title>Avertissement de redirection</title>
<script>function go_back() {window.history.go(-1);return false;}function ctu() {var link = document && document.referrer;var esc_link = "";if (link) {var e = (window && window.encodeURIComponent) ? encodeURIComponent : escape;esc_link = e(link);}new Image().src ="/url?sa=T&url=" + esc_link + "&oi=unauthorizedredirect&ct=originlink";return false;}</script>
</head>
<body topmargin="3" bgcolor="#ffffff" marginheight="3">
<div class="a">
<div class="b">
<font size="+1"><b>Avertissement de redirection</b></font>
</div>
</div>
<div class="c">
&nbsp;La page que vous consultiez essaie de vous rediriger vers <a href="/url?q=http://www.yousite.com/&amp;ei=2nPgT7uYJIP1-gb-kNiYDQ&amp;sa=X&amp;oi=unauthorizedredirect&amp;ct=targetlink&amp;ust=1340111586595170&amp;usg=AFQjCNGP0YlzgPiD21g_9hQmBBb36l1THA">http://www.yoursite.com/</a>.
<br>
<br>
&nbsp;Si vous ne souhaitez pas consulter cette page, vous pouvez <a href="#" onclick="return go_back();" onmousedown="ctu();">revenir à la page précédente</a>.
<br>
<br>
<br>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:33:08.887

同源**策略**可防止您编写来自不同域的 iframe 脚本。

# android - Android adjustPan 被忽略

> ID：11101825
> 
> 赞同：1
> 
> 时间：2012-06-19T13:19:26.720
> 
> 标签：android

ca）我在其中的 EditText 中有一个活动。如果我直接显示此活动，则在显示软键盘时 adjustPan 工作正常。

b）如果我在 TabActivity 下显示与其中一个选项卡相同的活动，则 adjustPan 不起作用（不做任何事情）。

c）我将活动转换为片段并使用 Fragments API 尝试了相同的操作，但调整平移也无法以这种方式工作。

我已经将 windowSoftInputMode 设置为在案例 (b) 中的 TabActivity 和其他有问题的活动上以及在案例 (c) 中的 FragmentActivity 上进行调整。

我也有全屏主题，我也尝试将其删除，但没有任何改变。

我还需要做些什么才能在这些其他情况下完成这项工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:26:12.620

我想通了，我在某处设置了 WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS 标志，当我删除它时，它开始在所有情况下工作。

# c# - 在没有完成的情况下中断 foreach 循环

> ID：11101826
> 
> 赞同：-1
> 
> 时间：2012-06-19T13:19:27.983
> 
> 标签：c#

> **可能重复：**
> [在 C# 中退出 Foreach 循环](https://stackoverflow.com/questions/456276/exiting-foreach-loop-in-c-sharp)

我需要比较两个注册表项，即 HKEY_USER 和 HKEY_CURRENT_USER。

```
I am using two methods..both are having foreach loops.. 
```

第一个方法调用另一个也有 foreach 循环的方法。执行所需操作后，条件应转到第一种方法中的第一个循环，并且条件应转到下一个循环。

简单地说，打破内循环并保持外循环。

我想在执行特定方法后打破内部循环..

```
 string[] mainkeys1 = mckey.GetSubKeyNames();

        foreach (string skey1 in mainkeys1)
         {
          ckey = skey1;

           mckey = l1.OpenSubKey(_ckey);

           int mcnt2 = mckey.SubKeyCount;

           if (mcnt2 > 0)
            {
             Getvaluescur();
             RegistryKey l2 = mckey;

             string[] mainkeys2 = mckey.GetSubKeyNames();

                            foreach (string skey2 in mainkeys2)
                            {
                                ckey = skey2;

                                mckey = l2.OpenSubKey(_ckey);

                                int mcnt3 = _mckey.SubKeyCount;

                                if (mcnt3 > 0)
                                  ....
                                  .... 
```

上面的代码也在 Foreach 循环内。我想在执行完所需的方法后打破循环。

谁能指导我在没有完成的情况下打破 Foreach 循环..

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:21:45.873

只需[`break;`](http://msdn.microsoft.com/en-us/library/adbctzc4%28v=vs.100%29.aspx)在完成前添加一个要结束循环的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:25:43.833

`break;`关键字用于打破编程中的循环。

and`continue;`关键字用于中断循环并让循环继续循环。

请参考，

休息： http: [//msdn.microsoft.com/en-us/library/adbctzc4](http://msdn.microsoft.com/en-us/library/adbctzc4(v=vs.80).aspx) (v=vs.80).aspx和，

继续： http: [//msdn.microsoft.com/en-us/library/923ahwt1](http://msdn.microsoft.com/en-us/library/923ahwt1(v=vs.71).aspx) (v=vs.71).aspx http://msdn.microsoft.com/en-us/library/923ahwt1.aspx

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:21:42.643

[`break`](http://msdn.microsoft.com/en-us/library/adbctzc4%28v=vs.80%29.aspx)当满足某些特定条件时，使用指令停止循环执行

```
foreach (string skey2 in mainkeys2)
{
   ...
   if (mcnt3 > 0)
   {
       break; 
   }
   ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T13:28:26.340

听起来你需要一个`break;`你想循环你当前的地方。

但是，您也可以使用`continue;`停留在当前循环中，但跳到下一次迭代。

如果你想让它跳出两个 for 循环，你必须在第一个循环内有一个布尔变量（如`bool breakLoop = false;`），并在跳转当前循环之前将其设置为 true，并将 if 放在 for 循环之后你爆发了of 然后调用，如果 breakLoop 为真，则调用另一个中断。

# java - Tuscany 和 JMS 绑定：URI 必须以模式 jms 开头：

> ID：11101829
> 
> 赞同：0
> 
> 时间：2012-06-19T13:19:37.453
> 
> 标签：java, jms, sca, apache-tuscany

我正在使用 Tuscany 1.6.2 并尝试运行 hello-world 服务 JMS 示例，但部署在域管理器的节点中。这意味着，我启动域管理器，将 helloworld-service-jms.jar 注册为贡献，注册组合，为组合注册一个节点。现在我应该可以启动节点了，但是在启动过程中，会弹出以下消息：

信息：严重：URI 必须以方案 jms 开头：对于 uri：/HelloWorldServiceComponent ... 信息：严重：无法创建 SCA 节点

我有另一个项目，它使用这个 jms 绑定并且它可以工作，如果我通过代码启动节点，例如使用这种方法：nodeFactory.createSCANode... 和 node.start()

（但如果我使用域管理器部署它，也会发生同样的错误）我做错了什么或者这是一个错误还是什么？！谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:27:12.077

好吧，我会回答我自己的风滚草问题；）我认为这实际上是 tuscany 1.xx 中的一个错误，这会导致 jms 绑定的错误解析（更多信息[在这里](http://mail-archives.apache.org/mod_mbox/tuscany-user/201206.mbox/%3CCAAF0_MzmCgr+b8FDD0EBM0diPx1PmmeqGMLPCY2VHwvNRHQWuw@mail.gmail.com%3E)）

# sql-server - AX 2009 错误：指定文字字符串的长度超过最大限制

> ID：11101832
> 
> 赞同：0
> 
> 时间：2012-06-19T13:19:52.147
> 
> 标签：sql-server, axapta, dynamics-ax-2009

保存 a 时`SalesLine`，只更改`Name`字段，该`doUpdate`方法偶尔会抛出错误异常：

> 指定文字字符串的长度超过最大限制。

当 Name 的字符串长度为 128 时`doUpdate`成功。
当 Name 的字符串长度为 129 时，`doUpdate`失败（但有时如果您更改字符，它会成功）。

该`Name`字段的定义长度为 1000 个字符（`nvarchar(1000)`在数据库中）。

它在生产系统中失败，但在测试系统中没有！

未启用数据库日志记录。数据库是 SQL 2008 R2。AX 内核版本：5.0.1500.5660

有人看到这个错误吗？
有什么提示可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-20T05:52:32.633

不要在查询中使用文字。我在 salesLine 数据源 init 方法中询问您使用文字。喜欢：

SalesLine_ds.query().literals(true);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:08:14.197

可能在 sql server 2008 中使用了quotename？

在此版本的 SQL Server 中，长度限制为 128 个字符似乎存在问题

[http://sqlserverpedia.com/blog/sql-server-bloggers/watchout-when-using-quotename-2/](http://sqlserverpedia.com/blog/sql-server-bloggers/watchout-when-using-quotename-2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T09:37:24.210

我也看到过这种行为。它必须与大卫发布的文字相结合。您是否在查询中使用`literals`或`placeholders`？

我可以在内核 5.0.1600.2967（在销售表上）中完美地重现它。

它必须是与和的组合的`forceliterals`错误`doUpdate()`

将字段更改为数据类型备忘录或其他一些更改（例如更改`cachelookup`）也无济于事。

# javascript - 如何调试共享网络工作者？

> ID：11101834
> 
> 赞同：16
> 
> 时间：2012-06-19T13:19:59.900
> 
> 标签：javascript, html, debugging, web-worker

我正在使用共享网络工作者，我没有从工作者那里得到错误。工人错误处理程序不返回任何错误！。如何调试共享网络工作者。

```
var worker = new SharedWorker('Vult_worker.js');
    worker.port.start();
    worker.port.onerror = function(e) {
        consloe.log('ERROR: Line ', e.lineno, ' in ', e.filename, ': ', e.message);
    }

    worker.port.onmessage = function(e) {
        console.log(e.data);
    };
worker.port.postmessage(); 
```

工人代码：

```
onconnect = function(e) {
    var self = e.ports[0];
self.onmessage=function(){
self.postmessage(1/x);
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-06-26T18:22:49.527

导航`chrome://inspect/#workers`并找到共享工作人员，然后单击“检查”。然后您可以拉起 SharedWorker 的控制台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T12:58:57.983

接受的答案有点老了，从那时起，Mozilla Firefox 已经在 Shared Web Workers 和 Service Web Workers 中实现了 console.log 。请参阅[错误 #1058644](https://bugzilla.mozilla.org/show_bug.cgi?id=1058644)。

# c# - 检查部署应用程序的网络是否已启动并正在运行

> ID：11101835
> 
> 赞同：0
> 
> 时间：2012-06-19T13:20:06.797
> 
> 标签：c#, winforms, visual-studio-2010, clickonce

我有一个使用 ClickOnce 部署在网络上的 Winforms 应用程序（用 C# 编写）。一切正常，程序将在启动时检查更新。

但是如果网络宕机了，当应用程序启动时它显示它正在检查新版本，但服务器实际上已经关闭了！我想通知用户检查更新不成功。有没有办法做到这一点？我已经检查过了，但似乎 Visual Studio 没有为这种情况添加任何代码。

我需要该程序可以离线使用，因此不能将程序设置为仅在线。

有人可以告诉我如何以编程方式执行此操作，或者我需要在解决方案属性中更改哪些选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:43:17.330

你试过这门课吗？

```
 System.Deployment.Application.ApplicationDeployment currentDeployment = System.Deployment.Application.ApplicationDeployment.CurrentDeployment; 
```

它使您可以访问诸如 UpdateLocation 和 TimeOfLastUpdateCheck 之类的属性，**这些**属性**可能**对您尝试执行的操作很有用。

# javascript - 调用函数的最小方法

> ID：11101836
> 
> 赞同：0
> 
> 时间：2012-06-19T13:20:07.703
> 
> 标签：javascript, short

首先，我这样调用我的函数：

```
var a=1;
a=foo(a,2); 
```

然后我发现`prototype`并像这样调用我的函数：

```
var a=1;
a=a.foo(2); 
```

如果它用于数组或对象，则更小：

```
var a=[1,2,3];
a.foo(2); 
```

有没有办法调用这样的函数：`a(2)`或者`a[2]`用 hack 什么的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:28:30.973

```
Array.prototype.foo = function(index) {
    return this[index];
};

var a=[1,2,3];

a = a.foo.call.bind(a.foo, a);

a(2); //3; 
a(1); //2
a(0); //1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:25:34.020

你可以这样做；

```
var a=[1,2,3];
var m = "reallyLongMethodName";
a[m](2); 
```

这将调用`a.reallyLongMethodName(2)`使用[方括号表示法](http://www.jibbering.com/faq/faq_notes/square_brackets.html)。

像这样的事情在 JavaScript 中*是可能的：*

```
var a=[1,2,3];
var c = a.foo;
c(2); 
```

**但是**，这在您的情况下不起作用，因为`this`里面的引用`c`不再是数组。

您可以使用`call()`或解决此问题[`apply()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)；

```
c.call(a, 2); 
```

但这可能对你来说太长了。

您还可以创建一个包装函数；

```
function c(ar, val) {
    ar.foo(val);
}

c(a, 2); 
```

...但同样，这对你来说可能太长了;)。

所以总而言之，你所得到的就是尽可能短......**恭喜。您已使代码尽可能不可读。**

# python - 如何通过 python 中的 ssh 隧道连接到服务器

> ID：11101839
> 
> 赞同：3
> 
> 时间：2012-06-19T13:20:20.627
> 
> 标签：python, sockets, ssh

我有一个使用套接字的 python 聊天客户端，我想通过 ssh 服务器连接到聊天服务器，我看到 paramiko

```
import paramiko
ssh = paramiko.SSHClient()

ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())

ssh.connect('<hostname>', username='<username>', password='<password>', key_filename='<path/to/openssh-private-key-file>')

stdin, stdout, stderr = ssh.exec_command('ls')
print stdout.readlines()
ssh.close() 
```

但我不知道如何将它与我的套接字连接链接起来

```
from twisted.internet.protocol import ClientFactory
from twisted.protocols.basic import LineReceiver
from twisted.internet import reactor
import sys

class EchoClient(LineReceiver):
    end="Bye-bye!"
    def connectionMade(self):
        self.sendLine("Hello, world!")
        self.sendLine("What a fine day it is.")
        self.sendLine(self.end)

    def lineReceived(self, line):
        print "receive:", line
        if line==self.end:
            self.transport.loseConnection()

class EchoClientFactory(ClientFactory):
    protocol = EchoClient

    def clientConnectionFailed(self, connector, reason):
        print 'connection failed:', reason.getErrorMessage()
        reactor.stop()

    def clientConnectionLost(self, connector, reason):
        print 'connection lost:', reason.getErrorMessage()
        reactor.stop()

def main():
    factory = EchoClientFactory()
    reactor.connectTCP('localhost', 8000, factory)
    reactor.run()

if __name__ == '__main__':
    main() 
```

那么如何通过python中的ssh隧道连接到服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:25:29.717

你总是可以使用[Twisted Conch](http://twistedmatrix.com/trac/wiki/TwistedConch)，他们有实现简单 SSH 客户端/服务器的[示例](http://twistedmatrix.com/documents/current/conch/examples/index.html)，可能有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:51:24.607

您可以在 SSHClient 上使用 invoke_shell() 方法，它返回类似套接字的对象（通道），因此您可以像在 shell 中那样创建新的 ssh 隧道。并且可以通过此通道访问所有以下连接。

# android - 为什么要构建android源码？

> ID：11101840
> 
> 赞同：0
> 
> 时间：2012-06-19T13:20:21.837
> 
> 标签：android, sdk, build, android-ndk

我想知道是否需要为我正在开发的应用程序构建 Android 源代码。我需要开发一个应用程序来控制使用内核中的 I2C 驱动程序的设备。我可以简单地使用 SDK 和 NDK 做到这一点吗？我应该改用我的 Android 版本中的 SDK 和 NDK 吗？

我注意到 SDK 没有工具目录，当我尝试运行 ndk/ndk-build 时出现以下错误。

> /ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc：找不到命令
> /ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt /linux-x86/bin/arm-linux-androideabi-g++：找不到命令。

自然有两个特定的 Android 站点：`source.android.com`并且`developer.android.com`我了解这些站点中提供的指南。似乎没有任何建议如何处理您的构建或为什么要构建源代码而不是使用下载的 SDK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:07:36.737

如果需要添加对现有构建中不支持的东西的支持，并且通过对预构建文件的修改而不是重建而不容易支持的东西，可以重建 android（不同地意味着内核、用户空间、运行时系统、系统应用程序和工具链）他们。

i2c 支持/配置可能是内核的一个特性以及运行时配置的某些方面，例如权限、模块加载等。您很可能能够在根设备上实现这一点，而无需通过重新构建 android 运行时/用户空间只需修改一些系统文件，尽管您最终可能不得不编译一个新内核或至少一个内核模块。

添加 i2c 支持不太可能需要更改 sdk 或 ndk，除非您想尝试为您的任务创建一个正式的 API，作为 android 本身的一个集成部分。很可能您最终添加到 android 安装的任何功能都可以使用反射或应用程序提供的存根组件和常量从应用程序中引用，而无需更改构建系统对所支持内容的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T06:15:14.987

你正在使用 cygwin 或 linux os 来编译你的驱动程序？

如果您使用的是 cygwin：必须安装 c/c++ 编译器：打开 cygwin setup.exe 检查 devel 分支下的所有组件，然后单击下一步 .... 但总的 devel 工具占用大约 4 GB。如果您不需要它们，请搜索 web fr neccessary。（您只需要大约 10 个组件）

# node.js - 如何将 node.js 对象传递给子进程，然后访问这些对象

> ID：11101841
> 
> 赞同：3
> 
> 时间：2012-06-19T13:20:25.690
> 
> 标签：node.js

实际上我正在通过子进程进行 sanboxing。我正在使用 vm.runincontext 方法来运行脚本。我正在使用 child.stdin.write 将代码传递给子进程，并使用 stdin.on('data' function()) 在子进程中接收...现在我想要的是脚本可以访问一些 node.js 对象或用户定义的对象通过上下文，该上下文将动态传递给子进程，它将在该上下文中运行 sanbox。目前我正在子进程中创建上下文对象，但我不想将上下文对象传递给子进程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T21:06:25.017

考虑一下你在问什么。您不仅必须序列化当前执行上下文，还必须序列化所有其他上游上下文、整个全局命名空间、文件描述符......

换句话说，这将是大量的工作，而你不能。:-)

您可以做的是序列化*数据*并通过标准输出/标准输入句柄来回发送。这就是通常解决此问题的方法。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:23:50.360

一般来说，你不能真正做这种事情，因为基本上你正在尝试跨进程共享数据（即内存），这是一个很大的禁忌

但是使用 nowjs 可以让你非常接近。查看 nowjs 并将所有进程与它挂钩

# java - 在 Liferay 中生成指向不同 portlet 的 URL

> ID：11101849
> 
> 赞同：4
> 
> 时间：2012-06-19T13:20:56.413
> 
> 标签：java, liferay, portlet

目前，我以这种方式生成一个指向不同 portlet 的 URL：

```
<liferay-portlet:actionURL var="custom" portletName="portlet2_WAR_portlet2">
   <portlet:param name="action" value="advanced"/>
   <portlet:param name="value" value="321"/>
</liferay-portlet:actionURL> 
```

最重要的部分是`portletName`论证。我就像他们在 [Liferay 页面上所说的](http://www.liferay.com/community/wiki/-/wiki/Main/Inter-portlet+communication)那样构建它。问题是，手动创建 a`portletName`太可怕了。想象一下一个错字，一个名字的改变......

所以我的问题是：是否有一个实用程序类、jsp 标记（或类似标签）能够自动创建有效的 portlet 名称（给定来自程序员的一些信息，例如 portlet 的名称）。

一件事：我的 portlet 是单例的，所以不需要*INSTANCE*参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:00:16.010

为了获得正确的 portlet 名称，您必须有它的 id。

Liferay 提供`com.liferay.portal.service.PortletLocalServiceUtil`服务工具类和方法`getPortletById(String id)`。这将为您提供`com.liferay.portal.model.Portlet`object 和 from method `getPortletName()`，您将获得 portlet 名称。

内置 portlet 的 ID 在 com.liferay.portal.util.PortletKeys 中可用，因此，您不必对 ID 进行硬编码（至少对于内置 portlet）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T03:43:51.273

Portlet 名称几乎没有变化，即使 Liferay 使用常量类 ( [`PortletKeys.java`](http://docs.liferay.com/portal/6.0/javadocs/com/liferay/portal/util/PortletKeys.html)) 来存储 Portlet Id 并经常使用它。

它就像一个 portlet 的主键，如果它发生变化，可能意味着它是一个新的 portlet。

因此，如果您的 portlet 依赖于第三方 portlet，然后 portlet 的 ID/名称发生更改，那么我看不到任何其他方式，只能更改您的代码以匹配它。

如果有另一种好的方法，那么我也很高兴知道它。

# c# - 在 C# 中构建服务器端自动完成

> ID：11101852
> 
> 赞同：2
> 
> 时间：2012-06-19T13:21:01.613
> 
> 标签：c#, asp.net, autocomplete, arraylist, server-side

我想知道是否可以在服务器端构建自动完成功能（使用 ASP.NET 和 C#）。假设我有一个班级城市......

```
public class City
{
    public string m_CityName;
    public string m_CityId;
    public City() { }
    public City(string cityName, string cityId) 
    { m_CityName = cityName; m_CityId = cityId; }
} 
```

有了这个，我在服务器端构建了一个 City 的 ArrayList。我想要的是构建一个自动完成，它将显示城市的名称，但会返回城市的 id。

我可以在服务器端执行此操作还是必须在客户端执行此操作？如果我需要在客户端执行此操作，那么最好、最快和**最安全**的方法是什么。

城市数据、名称和 ID 来自 XML 文件。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:57:40.370

如前所述，我个人会使用 AJAX。让服务器管理数据逻辑通常是一个更好的主意（根据我的经验）。

但如果它是静态文件，您可以使用 jQuery 加载 XML。这里的一个例子：

[http://net.tutsplus.com/tutorials/javascript-ajax/use-jquery-to-retrieve-data-from-an-xml-file/](http://net.tutsplus.com/tutorials/javascript-ajax/use-jquery-to-retrieve-data-from-an-xml-file/)

使用 AJAX 和 jQuery XML 方法时，小心不要用请求轰炸服务器（或客户端），过去我将搜索限制为每三次按键，并且搜索的长度也超过三个字符。但正如大卫所提到的，延迟请求也可能是一种选择。

# jsf - 子表单中的 Tomahawk inputFileUpload：必填字段已验证

> ID：11101853
> 
> 赞同：0
> 
> 时间：2012-06-19T13:21:11.873
> 
> 标签：jsf, jsf-2, tomahawk

我已经在我的 web 应用程序中集成了 Tomahawk 的 inputFileUpload。我曾尝试将它与战斧的子表单一起使用，但没有运气。

我的表格如下所示：

```
<h:form enctype="multipart/form-data">
   <!-- some <h:inputText required="true" /> tags -->

   <t:subform id="testSubForm">
       <t:inputFileUpload value="#{fileBean.uploadedFile}" />

       <t:commandButton action="#{fileBean.submit()}" value="Submit subForm"/>
   </t:subform>
</h:form 
```

问题是子表单的提交尝试验证需要但未填写的 inputText-tags。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:02:14.497

现在将我的表单分成两种形式可以正常工作。

# javascript - 使用 Facebook Graph API 搜索用户

> ID：11101855
> 
> 赞同：0
> 
> 时间：2012-06-19T13:21:13.957
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-access-token

我正在开发应用程序，我想将它连接到 facebook。用户应该在文本框中输入他的（姓名/用户名），然后我的应用程序会自动找到他的 facebook 帐户。为了搜索用户，我需要用户访问令牌。在用户输入用户名和密码之前，如何获取用户访问令牌？我正在使用 Javascript SDK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:33:39.333

> 在用户输入用户名和密码之前，如何获取用户访问令牌？

简单的回答：**你不能。**

为什么您仍然希望用户*搜索*他自己的帐户？只要让他登录，您就会立即知道他是谁（他也是如此，很可能甚至在登录之前）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:57:31.867

我认为服务器端身份验证（OAuth）可以实现您想要的。

通过 OAuth 登录后，您将拥有一个访问令牌（不是来自用户，而是来自您自己的帐户或页面的帐户）。使用该访问令牌，您可以搜索此人的姓名，例如[https://graph.facebook.com/search?q=mark&20zuckerberg&type=user](https://graph.facebook.com/search?q=mark&20zuckerberg&type=user)。但是，如果有多个查询结果，您无法确定用户是哪个帐户。

# file - 如何在 bash 文件中提供密码以在终端中执行

> ID：11101857
> 
> 赞同：0
> 
> 时间：2012-06-19T13:21:24.190
> 
> 标签：file, bash, ubuntu

我在Ubuntu上安装了**wondershaper**，它是一个限制互联网速度的程序，我的意思是我不在家时使用所有带宽的兄弟姐妹，而且我的互联网有限，我想创建一个在启动时运行的bash文件，意味着当他们打开电脑时，这些是我通常在终端中输入的代码

```
sudo wondershaper eth0 3 3
//It asks me for my password

The bash file will be something like this
#!/bin/bash
sudo wondershaper eth0 3 3 
```

但是当他在终端中询问密码时，给他密码的代码是什么？不用我打字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:37:39.113

正如其他人所说，以纯文本形式保留密码是一个坏主意。最好让这个脚本作为初始化脚本的一部分以 root 身份运行。

您的脚本依赖`sudo`命令来获取临时超级用户权限。

不要让您的脚本在您的普通用户帐户上运行，而是在 root 的帐户上运行它。然后，您无需提供密码即可获得 root 权限。您将从 运行脚本`/etc/init.d`，这是 Ubuntu 的启动脚本目录。您可能希望将其添加到预先存在的脚本中，例如`rc.local`（在所有其他 init 脚本运行后执行的文件）。

省略`sudo`你的脚本部分（例如`sudo echo`仅仅变成`echo`），因为root 不需要请求超级用户权限。就是这样！

您说您是 Linux 新手，所以这里有两个资源可以帮助您入门：

*   [维基百科 - 什么是 sudo](http://en.wikipedia.org/wiki/Sudo)
*   [“了解 /etc/init.d 目录”](http://www.ghacks.net/2009/04/04/get-to-know-linux-the-etcinitd-directory/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:26:47.603

你不能。这是不安全的，因为您应该在文件上清楚地写下密码。

您必须更改 /etc/sudoers 以让您的用户在没有密码的情况下使用 sudo，添加以下行：

`$USER ALL=(ALL) NOPASSWD: /usr/bin/wondershaper`

$USER 是您的用户名。

否则，您可以在 /etc/init.d/rc.local 上添加它，这样它就会在引导期间以 root 身份运行。

# android - 如何在 GridView 布局中将 TextView 添加到 ImageView 中？

> ID：11101864
> 
> 赞同：2
> 
> 时间：2012-06-19T13:21:45.753
> 
> 标签：android, android-gridview

我需要一个 GridView，但在每个网格中，都会有一个 ImageView 和 TextView 上面/里面。

它就像每个网格中的项目图像，以及图像上的项目名称。

我正在尝试：

```
 public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) { // if it's not recycled, initialize some
                                // attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(300, 300));
        imageView.setScaleType(ImageView.ScaleType.FIT_XY);
        imageView.setPadding(0, 0, 0, 0);
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(mThumbIds[position]);

    TextView nameView = new TextView(mContext);
    nameView.setText("Name");
    nameView.setTextSize(20);

    parent.addView(nameView);

    return imageView;
} 
```

在我的网格视图适配器中。但我不能在这里添加它。我也尝试在 ImageView 中添加它，但由于它不是 ViewGroup，我无法实现。

更新：

```
public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = LayoutInflater.from(mContext);
    ViewHolder holder;

    if (convertView == null) { // if it's not recycled, initialize some
                                // attributes
        convertView = inflater.inflate(R.layout.gridviewitem, null, true);
        holder = new ViewHolder();
        holder.image = (ImageView) convertView
                .findViewById(R.id.gridViewItemImage);
        holder.name = (TextView) convertView
                .findViewById(R.id.gridViewItemName);
        holder.price = (TextView) convertView
                .findViewById(R.id.gridViewItemPrice);
        convertView.setTag(holder);

    } else {    
        holder = (ViewHolder) convertView.getTag();
    }

    holder.image.setImageResource(mThumbIds[position]);
    holder.name.setText("Item " + String.valueOf(position));
    holder.price.setText("$15");

    return convertView;
} 
```

这解决了我的问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T13:30:14.783

创建一个`RelativeLayout`包含`ImageView`和 TextView，TextView 的底边与底边对齐`Imageview's`。

```
<RelativeLayout ...>
    <ImageView ...>
    <TextView ...
      android:layout_alignBottom="id of the imageview"> // or to top
</RelativeLayout> 
```

`getView`以您的适配器的方法膨胀此布局。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-03T11:26:45.183

```
<RelativeLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/grid_outer_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/image_border" />

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true" >

        <TextView
            android:id="@+id/grid_inner_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="some text" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:45:35.957

只是为了扩展userSeven7s的答案，你应该返回`RelativeLayout`instead of `ImageView`，这样它就`GridView`有了`RelativeLayout`直接的孩子，而不是`ImageView`和RelativeLayout可以有TextView和ImageView等。
你可以通过以下方法获取RelativeLayout的对象：

```
RelativeLayout rel = (RelativeLayout)View.inflate(R.layout.YOUR_RELATIVE_LAYOUT_XML_HERE); 
```

# c# - 动态添加行到 MVC 视图然后传递给控制器

> ID：11101868
> 
> 赞同：4
> 
> 时间：2012-06-19T13:21:49.120
> 
> 标签：c#, ajax, asp.net-mvc-3, controller, partial-views

好的，所以我已经尝试了很多东西，但我都不太熟悉，而且我似乎无法确切地弄清楚如何完成我需要做的事情。这似乎是一项简单的任务，我相信有人已经做到了！

本质上，我需要创建一个能够创建更多绑定到模型的字段的表单，甚至只是在提交时传递给控制器​​。

首先，我有一个非常简单的模型。就像是：

```
public class Account
{
    public string Organization { get; set; }
    public List<UserModel> Users { get; set; }
}
public class UserModel
{
    public string UserFirstName { get; set; }
    public string UserLastName { get; set; }
    public string UserEmailAddress { get; set; }
    public bool UserIsAdmin { get; set; }
} 
```

我的观点是一个简单的注册表单，它包含创建帐户所需的所有输入。它需要有这些字段，但也能够在另一行中显示“添加用户”和 ajax 的链接，其中包含名字、姓氏、电子邮件和 isAdmin 标志。

这就是我卡住的地方。我想我需要一些带有部分视图和自定义绑定到控制器的东西，因为数据被传入，但我不知道如何传入一个包含所有用户的对象，以便我可以遍历它。

如果有人能**指出**我正确的方向，我会非常高兴。

-丢失

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:25:02.817

我强烈推荐阅读[Phil Haacked - 模型绑定到列表](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)。他的示例可以很容易地扩展到使用 Ajax。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:39:33.183

您可以在 JSON 中创建模型并将其发送到控制器：

JS：

```
var account = {
    Organization: // get from form or wherever
    Users: []
}

$('#submit').click(function() {   

    // loop through each new user div and append to the account object 
    $('.new-user').each(function() {
        var $newUser = $(this);
        Account.Users.push({
            UserFirstName: $newUser.find('.first-name').val(),
            UserLastName: $newUser.find('.last-name').val(),
            ...
        });
    });

    // ajax call to submit form with data: { Account: account }
}); 
```

HTML

```
<form ...>
   <!-- registration fields -->

   <!-- dynamically added new user fields - wrap in parent element -->
   <div class="new-user">
       <input class="first-name" type="text" />
       <input class="last-name" type="text" />
       ...
   </div>

   <input type="button" id="submit" value="Submit" />
</form> 
```

# php - 什么方法适合加密 SQLite 数据库，以便在 PHP 服务器上使用？

> ID：11101874
> 
> 赞同：2
> 
> 时间：2012-06-19T13:22:13.490
> 
> 标签：php, flash, apache-flex, sqlite, encryption

我研究了加密 sqllite 数据库的各种方法，例如对称和非对称密钥加密、密码和哈希，但我不知道哪种方法最适合用于为 flash builder 加密许多 sqllite 数据库 - 我正在制作的 android 应用程序。

这个过程是客户可以创建许多由我工作的公司指定的数据库（本地）。对于每个数据库，我需要阻止用户从应用程序外部访问数据库。（我已经设法使用 - SqlConn.open(Encrypt...)）因此我加密数据库以阻止用户访问它。

关于最佳方式的任何想法，即使用什么方法来创建要加密的密钥，加密密钥必须是字节数组并且长度等于 16 位。

当用户最终确定其中一个数据库时，即在应用程序上选择数据库时，我希望他们将其上传到服务器，在那里他们可以解密数据库并相应地操作数据。

我的问题是，我怎样才能成功地在应用程序中制作密钥，上传后传输并使用 php 解密？（什么方法会起作用？）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:21:35.573

可以使用[as3coreLib](https://github.com/mikechambers/as3corelib)在 ActionScript 端对密钥进行散列（不是加密）， 它提供 md5、SHA224 等。有人做了一个[小应用程序](http://www.flex-blog.com/flex-encryption-md5-sha1-sha224-sha256-hmac/)来演示它..

但可以肯定的是，它不是绝对安全或不可破解的。例如，在 Wikipedia 上查找“Rainbow tables”以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:48:42.493

这是我在研究 air 的加密方法时发现的一篇文章。

[http://help.adobe.com/en_US/AIR/1.5/devappsflex/WS34990ABF-C893-47ec-B813-9C9D9587A398.html](http://help.adobe.com/en_US/AIR/1.5/devappsflex/WS34990ABF-C893-47ec-B813-9C9D9587A398.html)

这是加密的规范：高级加密标准 (AES) 和带有 CBC-MAC (CCM) 模式的计数器。

在 PHP 中，您可以使用 mcrypt 库。

```
mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, base64_decode($encrypted), MCRYPT_MODE_CBC, $iv) 
```

这是生成安全密钥的逻辑（在动作脚本中）：

```
 public static function getEncryptionKey(password:String):ByteArray
    {
        var bytes:ByteArray = new ByteArray();
        bytes.writeUTF(password + "password salt");

        bytes.position = 0; // have to reset to 0 for an accurate hash
        var hashedKey:String = SHA256.computeDigest(bytes);
        var encryptionKey:ByteArray = generateEncryptionKey(hashedKey);

        return encryptionKey;
    }

    private static function generateEncryptionKey(hash:String):ByteArray
    {
        var result:ByteArray = new ByteArray();

        // select a range of 128 bits (32 hex characters) from the hash
        // In this case, we'll use the bits starting from position 17
        for (var i:uint = 0; i < 32; i += 2)
        {
            var position:uint = i + 17;
            var hex:String = hash.substr(position, 2);
            var byte:int = parseInt(hex, 16);
            result.writeByte(byte);
        }

        return result;
    } 
```

# javascript - tinymce 触发 html 验证

> ID：11101875
> 
> 赞同：2
> 
> 时间：2012-06-19T13:22:15.830
> 
> 标签：javascript, tinymce

我正在通过 javascipt 将 html 添加到 tinymce 编辑器。添加 html 后，我使用 tinymce 使用内置 html 验证器针对 valid_elements 验证添加的 html。我必须调用哪个 js 函数来运行验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:11:15.120

它被称为 mceCleanup。你需要打电话

```
ed.execCommand('mceCleanup'); // ed is the editor instance you get calling tinymce.get('your_editor_id') 
```

# sas - 如何通过 SAS 脚本在 Teradata 中授予选择权限？

> ID：11101876
> 
> 赞同：1
> 
> 时间：2012-06-19T13:22:16.987
> 
> 标签：sas, teradata

我正在尝试使用 SAS 加载表、创建索引、收集统计信息、授予对 teradata 表的选择权限以完成工作。SAS 是我必须选择的唯一软件。

以下脚本成功删除表、加载表、创建索引但不收集统计信息或授予选择。有没有另一种方法可以做到这一点，还是我做错了？

```
libname ias teradata server=<server> USER=&tduser. schema=<dbname> password=&tdpass.;

proc datasets library=ias;
   delete <tablename>;
run;

data ias.<tablename> (bulkload=yes sleep=10 tenacity=4 dbcommit=80000);
  set WORK.<data set name>;
run;

proc sql;
    connect to teradata as td (user=&tduser.  password=&tdpass. tdpid="<server>" schema="<dbname>");
    execute(create index <indexname> (<columnname>) on <dbname>.<tablename>) by td;
    execute(commit) by td;
    execute(collect statistics on <dbname>.<tablename> index (<columnname>);
    execute(commit) by td;
    execute(grant select on <dbname>.<tablename> to <list of users>) by td;
    execute(commit) by td;
disconnect from td;
run; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:07:29.077

在我看来一切都很好。你怎么知道 COLLECT 和 GRANT 命令不起作用？你收到错误信息了吗？

几点注意事项：

在您的 PROC SQL CONNECT 语句中，我建议您添加选项 MODE=TERADATA; 这会将连接置于“Teradata”而不是“ANSI”模式，其中一个好处是命令会自动“提交”；您不需要那些“提交”步骤。

同样在您的 PROC SQL CONNECT 语句中，您指定了 SCHEMA 选项；我不认为这有任何影响。EXECUTE 块中的所有内容都必须是纯 Teradata 语法，因此完全限定所有表引用。

确保您的 COLLECT STATISTICS 语句位于“index ()”而不是“index()”上。

最后，我强烈建议您在创建表时使用 DBCREATE_TABLE_OPTS 和 DBTYPE 数据集选项显式定义表的主索引和数据类型，例如：

```
data ias.<tablename>
     (bulkload-yes sleep=10 tenacity=4
      dbcreate_table_opts='primary index(<columnname>)'
      dbtype=(  <columnname>='<teradata column definiton>'
              , <anothercolumn>='<teradata column definition>'
             ));
       set WORK.<data set name>;
run; 
```

如果您没有明确命名索引，则将为索引选择 SAS 数据集中的第一个变量（可能正确也可能不正确），并且数据类型可能不合适。

如果您仍然有问题，请发回任何错误消息；并且请使用一个确切的例子（不要用括号引用隐藏列名和表名）。

# java - Java3d 小程序中的 JPopupMenu 不接收鼠标或键盘输入

> ID：11101879
> 
> 赞同：4
> 
> 时间：2012-06-19T13:22:32.817
> 
> 标签：java, swing, java-3d, jpopupmenu

我有一个使用 Java3D 和 JPopupMenus 填充 JMenuItems 的 Java 应用程序。当它作为常规应用程序运行时，一切正常——JPopupMenus 和其他一切都按预期运行。但是，当我从应用程序中创建一个小程序时，完全弹出 Canvas3D 的 JPopupMenu 并没有按预期运行。JPopupMenu 的行为如下：

1.  当鼠标移到菜单项上时，菜单项不会突出显示
2.  箭头键不能用于在菜单项之间移动
3.  单击顶级 JMenuItem 完成操作并突出显示该项目，但它不会像在常规应用程序中那样处理 JPopupMenu
4.  单击包含子菜单的顶级 JMenuItem 不会执行任何操作
5.  在 JPopupMenu 外部单击不会像在常规应用程序中那样处理 JPopupMenu
6.  显示 JPopupMenu 后，在我的程序的摆动部分顶部打开 JPopupMenu 可以使 JPopupMenu 在 Canvas3D 上的常规和预期行为，但第 5 点仍然适用

更多信息：

*   JPopupMenu 与 JPopupMenu.show() 一起显示，与持有 Canvas3D 的 JPanel 相关
*   我在创建任何 JPopupMenus 之前调用 JPopupMenu.setDefaultLightWeightPopupEnabled(false)，但这条线似乎没有什么不同。
*   我认为这可能是一个焦点问题，但 JPopupMenu.requestFocusInWindow() 不起作用

所以我的问题是：是什么导致应用程序和小程序之间的行为不同，以及如何使小程序中的 JPopupMenu 像在应用程序中一样运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T14:21:46.587

您必须将轻量级 JPopup 更改为重量级很难在不发布您的 SSCCE 的情况下谈论其他内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T18:12:22.687

我通过在 JPopMenu 上设置调用程序并将其设为 HeavyWeight 来解决

```
final JPopupMenu popup = new JPopupMenu();
popup.setLightWeightPopupEnabled(false);
popup.setInvoker(myJFrame); 
```

# php - 使用链接中的查询删除mysql数据库中的记录

> ID：11101882
> 
> 赞同：0
> 
> 时间：2012-06-19T13:22:43.417
> 
> 标签：php, mysql, function

我有一个 MySQL 数据库，并使用 php 函数创建了一个表来查看内容。现在我有一个图像（一个小红十字）。现在我希望如果用户单击图像，则执行删除查询。但我不知道怎么做。

```
$column = array_keys($array[0]);

 echo "<table border='1'>";
            echo "<tr>";
            foreach($column as $title)
            {

                echo "<td width='100px'>$title</td>";

            }
            echo "</tr>";

            echo "<tr>";
            foreach($array as $row)
            {
                foreach($row as $item)
                {
                    echo "<td>$item</td>";
                }

                 echo '<td><img src="delete_button.png value="'.$row['id'].'"" /></td>'; //the button and the id as value
                echo "</tr>";
            }

            echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:28:56.877

您必须在图像上放置一个链接

```
echo '<td><a href="delete.php?id='.$row['id'].'"><img src="delete_button.png" /></a></td>'; 
```

然后在您的 delete.php 文件或您放置的任何其他脚本中，您检索 id

```
$_GET["id"] 
```

然后你执行你的查询。

我希望您的网站是安全的，但不是每个人或每个爬虫都点击该链接，但要确保它是安全的，我建议至少添加一个确认框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:33:31.563

使用 ajax 调用图像的 onClick 事件。得到用户的确认，然后调用删除所需行的 php 函数。您还可以根据 ajax 调用的返回值显示确认窗口。
检查此链接以获取有关 jQuery ajax 调用[http://api.jquery.com/jQuery.ajax/的详细信息](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:25:28.450

将删除按钮图像放在锚标记中并使其成为链接，然后调用 javascript 函数来确认用户是否真的想删除数据并且如果他同意，则将用户发送到您将编写代码的 php 页面删除数据。而已。

# c# - Excel XML 电子表格 CSHTML

> ID：11101886
> 
> 赞同：1
> 
> 时间：2012-06-19T13:22:51.773
> 
> 标签：c#, xml, asp.net-mvc-3, excel, razor

我想用电子表格参考在 Excel 中创建一个图表。

```
@model IEnumerable<ARTex.Core.Models.Reservation>

@{
    Layout = null;
    Response.ContentType = "application/vnd.ms-excel";
    Response.AddHeader("Content-Disposition", "attachment; filename= Reservaties - " + DateTime.Now.ToString("dd/MM/yyyy") + ".xls");

}

    <?xml version="1.0" encoding="utf-16"?>

<ss:Workbook xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">
<ss:Styles>
        <!--style reservation header-->
        <ss:Style ss:ID="1">
            <ss:Font ss:Bold="1" ss:Size="11" ss:Color="White"/>
            <ss:Interior ss:Color='Black'  ss:Pattern='Solid'/>
        </ss:Style>
        <!--style group/individual header-->
        <ss:Style ss:ID="2">
            <ss:Font ss:Bold="1" ss:Size="11"/>
            <ss:Interior ss:Color='#D9D9D9' ss:Pattern='Solid'/>
        </ss:Style>
        <!--style group/individual/reservation body-->
        <ss:Style ss:ID="3">
            <ss:Interior ss:Pattern='Solid' />
            <ss:Alignment ss:WrapText="1" ss:Vertical="Top"/>
        </ss:Style>
        <ss:Style ss:ID="4">
            <ss:Interior ss:Pattern='Solid'/>
        </ss:Style>
</ss:Styles>

@{Html.RenderPartial("_ExcelWorksheet", Model.Where(x => !x.Deleted), new ViewDataDictionary { { "sheetName", "Reservations" } });
  Html.RenderPartial("_ExcelWorksheet", Model.Where(x => x.Deleted), new ViewDataDictionary { { "sheetName", "Deleted Reservations" } });
  Html.RenderPartial("_ExcelGraph", Model,new ViewDataDictionary{ {"sheetname", "Graph" }});}}

</ss:Workbook> 
```

这是我的主要 .cshtml 页面，我想使用部分视图页面 _ExcelGraph 创建一个图表。我只是想展示一些基本的输出。

代码_ExcelGraph

```
@{ 

    var myChart = new Chart(width: 600, height: 400) 
        .AddTitle("Chart Title") 
        .AddSeries( 
            name: "Employee", 
            xValue: new[] {  "Peter", "Andrew", "Julie", "Mary", "Dave" }, 
            yValues: new[] { "2", "6", "4", "5", "3" }) 
        .Write(); 
} 
```

这一直给我一个图像，我似乎无法弄清楚如何将此图像放在工作表中或如何正确地将其显示为工作表。

提前致谢。

**编辑**

在某个地方读到 XML 电子表格参考 2003 不可能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:01:01.140

您不能在 XML 电子表格 2003 中嵌入图表。

# nhibernate - 使用与 Expression.Disjunction() 相同的 sql 参数进行休眠

> ID：11101888
> 
> 赞同：2
> 
> 时间：2012-06-19T13:23:00.617
> 
> 标签：nhibernate, queryover

我有一个搜索方法如下。我希望在不同表的某些列上拆分和搜索用户搜索文本。

```
 string[] searchedTexts = null;

        if(searchText!=null)
           searchedTexts = searchText.Split(new[] { ',', ' ' }, StringSplitOptions.RemoveEmptyEntries);

        WebsitePage page = null;
        Account account = null;
        AccountLogin login = null;
        Author author = null;
        var query = Session.QueryOver<WebsitePage>(() => page).Where(() => page.Status == WebsitePageStatus.Online).Left
            .JoinQueryOver<Author>(x => x.Blogger, () => author).Left
            .JoinQueryOver<Account>(x => x.AccountInfo, () => account).Left
            .JoinQueryOver<AccountLogin>(x => x.Logins, () => login);

        if (searchedTexts != null)
        {
            var disconjaction = Expression.Disjunction();
            foreach (var text in searchedTexts)
            {
                disconjaction.Add(Expression.Like(Projections.Property(() => page.Title), text, MatchMode.Anywhere));
                disconjaction.Add(Expression.Like(Projections.Property(() => page.Body), text, MatchMode.Anywhere));
                disconjaction.Add(Expression.Like(Projections.Property(() => page.TagCommaSeperated), text, MatchMode.Anywhere));
                disconjaction.Add(Expression.Like(Projections.Property(() => account.FirstName), text, MatchMode.Anywhere));
                disconjaction.Add(Expression.Like(Projections.Property(() => account.LastName), text, MatchMode.Anywhere));                    
                disconjaction.Add(Expression.Like(Projections.Property<AccountLogin>(x => x.UserName), text, MatchMode.Anywhere)); 
            }

            query.And(disconjaction);
        }

        return query.List(); 
```

正如您在 Expression.Like() 方法中看到的那样，我使用了相同的参数。执行后，nhibernate 为每个“Like”表达式添加不同的参数，例如：

```
@p1=N'%test%',@p2=N'%test%',@p3=N'%test%',@p4=N'%search%',@p5=N'%search%',@p6=N'%search%' 
```

在 foreach 的每个循环中，我想使用一个带有所有 6 个“Like”表达式的 sqlparameter。可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T22:01:45.860

不，这是不可能的。

我认为这也不重要，除非您有兴趣避免 TSQL 中 2100 个参数的硬限制。

# sql - 为 MS-Access 编写一个困难的查询（没有 MINUS 操作，3 个表连接）

> ID：11101889
> 
> 赞同：1
> 
> 时间：2012-06-19T13:23:00.587
> 
> 标签：sql, database, ms-access

我来这里是为了帮助处理一个复杂的查询。为此，我尝试了很多不同的方法，但并没有得到我想要的结果。我的架构的淡化版本如下：有问题的三个表是Employees 表、EmployeeTraining 表和RequiredTraining 表。employees 表保存员工的信息，例如empID、姓名、地址、电子邮件、positionWorked 等。EmployeeTraining 表保存empID 和TrainingName。RequiredTraining 表保存Position 和TrainingName。

员工：**empID**、姓名、职位

EmployeeTraining：**empID**， **trainingName**

requiredTraining： **职位**， **培训名称**

这是一些示例数据，只是为了进一步澄清：

**雇员**

```
 *EMPID~~Name~~Position~~
                  1      Ted     Accountant

                  2      Bob     Janitor 
```

**员工培训**

```
 **empID~~TrainingName**
                    1          Crunching Numbers

                    1          Microsoft Excel

                    1          Using an Abicus

                    2          Lemon Pledge 100

                    2          Scrubbing Toilets 
```

**需要培训**

```
 **position**~~**TrainingName**

                    Accountant    Crunching Numbers

                    Accountant    Microsoft Excel

                    Accountant    Using an Abicus

                    Accountant    TPS Reports

                    Janitor       Lemon Pledge 100

                    Janitor       Scrubbing Toilets 
```

用英语，从长远来看，我想从表单中选择一个员工，并有一个子表单显示从该员工完成的所有培训（SELECT * FROM Employees INNER JOIn EmployeeTraining on employees.empid = employeetraining.empID WHERE empID =我.empID)

我还想要另一个子表单来显示员工尚未完成的当前职位所需的培训。这就是我挣扎的地方。我不熟悉或不习惯使用 MS Access 的查询生成器，但我尝试过“查找不匹配”查询以及尝试编写自己的查询。这似乎可以使用 MINUS 操作，但 MS Access 不支持 MINUS。我已经尝试了一个带有空谓词的 LEFT JOIN 以及从上述查询到 requiredTraining 表的查询的 NOT IN，但我没有得到我正在寻找的结果。

例如，我尝试为此示例数据编写的查询结果将是：

对于employeeID 1（Ted the Accountant）

ted需要“TPS报告”培训

员工 2（清洁工鲍勃）

Bob 已经完成了针对他的职位的所有培训。

我正在尝试的一个尝试查询的示例是：

```
 SELECT employees.position,employeeTraining.empid,employeetraining.TrainingName          
      FROM EmployeeTraining 
      InNER JOIN Employees ON EmployeeTraining.empid = employees.empid
      WHERE empid = '1'
      LEFT JOIN
      SELECT TrainingName,Position FROM requiredTraining
      ON EmployeeTraining.Training = RequiredTraining.Training
      WHERE (((EmployeeTraining.Training is Null))) 
```

编辑：这个问题已经回答了。感谢大家的帮助。您的查询，虽然每个都不同，但都实现了目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:09:04.030

实际上，您与其他查询非常接近……您可以尝试使用 NOT IN 子句。例如，正如您所说，您可以获得所有完成特定培训的员工，如下所示：

```
SELECT e.empID, e.name, e.Position, et.TrainingName
FROM Employees e
JOIN EmployeeTraining et ON e.empID = et.empID
WHERE empID = me.empID 
```

您现在想要的是所有尚未完成培训的员工......您可以在 trainingName 表上进行连接，确保培训类型不在您已经创建的查询中，如下所示：

```
SELECT e.empID, e.name, e.Position, rt.TrainingName
FROM Employees e
JOIN requiredTraining rt ON e.Position = rt.Position
WHERE rt.TrainingName NOT IN
(
   SELECT et.TrainingName
   FROM Employees e
   JOIN EmployeeTraining et ON e.empID = et.empID
   WHERE empID = me.empID
)
  AND e.empID = me.empID 
```

请注意，如上所述，您实际上不需要加入员工表......您可以使用以下内容：

```
SELECT e.empID, e.name, e.Position, rt.TrainingName
FROM Employees e
JOIN requiredTraining rt ON e.Position = rt.Position
WHERE rt.TrainingName NOT IN
(
   SELECT et.TrainingName
   FROM EmployeeTraining
   WHERE et.empID = me.empID
)
  AND e.empID = me.empID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:51:56.060

以下查询应返回具有他们需要完成的培训名称的所有员工：

```
select e.emp_id, rt.TrainingName
from employees e left outer join
     RequiredTraining rt
     on e.position = rt.position
where rt.TrainingName not in (select TrainingName from EmployeeTraining et where et.empId = e.EmpId) 
```

“from”子句中的连接查找所有必需的培训。“where”子句然后使用相关子查询来查找员工尚未完成的子查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T14:35:05.280

下面的查询是从两个 MS Access 查询创建的，其中 SQL 剪切并粘贴到派生表中。这两个查询选择接受当前培训的员工 (#1) 和接受所需培训的员工 (#2)。它不可更新，但易于创建。您可以通过在末尾添加一行来仅显示缺少的训练：

```
WHERE et.TrainingName Is Null 
```

要选择单个员工，您可以添加一行：

```
WHERE rt.EMPID=1 AND et.TrainingName Is Null 
```

但是，您提到了一个子表单，因此我希望您希望使用链接子字段和主字段来限制员工。

SQL

```
SELECT rt.empid,
       rt.position,
       rt.trainingname,
       et.trainingname AS IsTrained
FROM   (SELECT employees.empid,
               requiredtraining.position,
               requiredtraining.trainingname
        FROM   employees
               INNER JOIN requiredtraining
                       ON employees.position = requiredtraining.position) AS rt
       LEFT JOIN (SELECT employees.empid,
                         employees.position,
                         employeetraining.trainingname
                  FROM   employees
                         INNER JOIN employeetraining
                                 ON employees.empid = employeetraining.empid) AS
                 et
              ON ( rt.trainingname = et.trainingname )
                 AND ( rt.position = et.position )
                 AND ( rt.empid = et.empid ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T15:03:03.730

以下查询根据使用 Access 2007 测试的示例数据返回此结果集。

```
EMPID Position    TrainingName
1     Accountant  TPS Reports

SELECT
    sub.EMPID,
    sub.Position,
    sub.TrainingName
FROM
    (
        SELECT
            e.EMPID,
            e.Position,
            rt.TrainingName
        FROM
            Employees AS e
            INNER JOIN RequiredTraining AS rt
            ON e.Position = rt.position
    ) AS sub
    LEFT JOIN EmployeeTraining AS et
    ON
            sub.TrainingName = et.TrainingName
        AND sub.EMPID = et.empID
WHERE et.TrainingName Is Null; 
```

# html - 布局未设置。如何将 div 放在主 div 之上

> ID：11101891
> 
> 赞同：0
> 
> 时间：2012-06-19T13:23:11.413
> 
> 标签：html, css

我想设置类似的布局 ![欲望布局](../Images/93639b454920da8113fc63c1ef7e9cff.png)

我认为我将不得不设置这样的东西

![斯卡思](../Images/f51d26b696a8197dc85b784e4c0ced10.png)

表示主 div，在主 div 的顶部，我有其他 div。我用过这样的东西

```
<div id="headerImage" >

        <div id="help_About">               
            <a href="#">Help</a>
            <a href="#">About</a>                                           
        </div>

        <div id="myLogout">               
            <input type="text" value="Basit" />
            <a href="#">Logout</a>                                                          
        </div>

        <div id="myImage">
            <img width="20" height="20" src="resources/images/tools_icon.png" /> 
        </div>

        <img src="resources/images/2b.jpg"/>

    </div>

    #headerImage{ 
        border-style :solid;
        border-width: thin;
        width: 100%;
        height: 20%;           
        background: url(${imgUrl}/2b.jpg) no-repeat top left;            
        padding: 0px;
        border-top: 0px;
        border-bottom: 5px #eeeeee solid;
        z-index: 1;
    }

    #headerImage #help_About{ 
        margin-left: 10%
        margin-top: 2%;
        display: inline-block;
        border-style :solid;
        border-width: thin;                                 
        padding: 2px;
        border-top: 2px;
        z-index: 2;
    }

    #headerImage #myLogout{ 
        margin-left: 30%
        margin-top: 4%;
        display: inline-block;
        border-style :solid;
        border-width: thin;                                 
        padding: 2px;
        border-top: 2px;
        z-index: 2;
    }

    #headerImage #myImage{ 
        margin-right: 10%
        margin-top: 4%;
        display: inline-block;
        border-style :solid;
        border-width: thin;                                 
        padding: 2px;
        border-top: 2px;
        z-index: 2;
    } 
```

我只是给出了物理外观的边框样式和宽度和高度。但后来我得到了这样的东西

![在此处输入图像描述](../Images/84b013d679a9fd843214a0502c90f586.png)

我做错了什么？如何设置 div 的布局？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:35:33.843

试试这个 - [http://jsfiddle.net/SQwFK/](http://jsfiddle.net/SQwFK/)

HTML

```
<header>
    <div id="left"></div>

    <div id="rightTop"></div>
    <div id="rightBottom"></div>
</header> 
```

CSS

```
 header {
    background: url(http://lorempixel.com/600/300);
    height: 300px;
    width: 600px;
    position: relative;
}

#left {
    position: absolute;
    top: 100px;
    left: 50px;
    background: #ffe;
    height: 100px;
    width: 250px;
}

#rightTop, #rightBottom {
    position: absolute;
    right: 50px;
    top: 25px;
    background: #fef;
    height: 100px;
    width: 100px;
}

#rightBottom {
    top: 175px;
} 
```

**新编辑------------------------------------------------ ----------------------------**

在职的

```
<div id="headerImage" >
....
</div>
<div id="menuBodyContainer" >
    <div id="menu">
    </div>
    <div id="myBody">
    </div>  
</div> 
```

现在我尝试使用您的代码

```
 #headerImage{ 
        position: absolute;
        border-style :solid;
        border-width: thin;
        width: 100%;
        height: 20%;           
        background: url(${imgUrl}/2b.jpg) no-repeat top left;            
        padding: 0px;
        border-top: 0px;
        border-bottom: 5px #eeeeee solid;
        z-index: 1;            
    }

    #headerImage #help_About{ 
        position: absolute;
        display: inline-block;
        top: 4%;
        left: 4%;
        opacity:0.4;
        z-index: 2;            
    }

    #headerImage #myLogout{ 
        position: absolute;
        display: inline-block;
        right: 50px;
        top: 25px;
        z-index: 2;           
    }

    #headerImage #myImage{
        position: absolute;
        top: 2%;
        right: 2%;
        z-index: 2;           
    } 
```

这是有效的。

![在此处输入图像描述](../Images/258c99d03747cda2daf90243a678780f.png)

但我现在有另一个问题。如您所见，我设置了`#help_About and #myLogout {display:inline-block}`. 但是`#help_About`做一个大正方形。我也希望白色方块不显示。看起来 div 中的元素实际上在图像上。#myLogout 也是如此。我将 display 设置为 inlne-block 但它们出现在两条不同的行上，我想要然后 inline 并且它显示白色正方形作为背景我不想要它。我该怎么做？如果我设置透明度，那么它会设置整个 div 的透明度，包括元素而不仅仅是 div。谢谢

怎么办 ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:43:52.853

您需要使用波形图像的背景创建标题 div。然后放置所有内部控件：

html

```
<div id="header">
    <ul>
        <li><a href="#">Home</a><li>        
        <li><a href="#">Help</a><li>
    </ul>
    <a class="logo" href="#"></a>
    <a class="logout">Logout</a>
</div>​ 
```

css

```
body { font-family: Verdana; }
#header { height:100px; background: url('http://dl.dropbox.com/u/18372729/header-bg.png')}
#header ul { top:23px; left:270px; position:absolute; }
#header ul li { display:inline; }
#header ul li a { color:#fff; text-transform:uppercase; text-decoration:none; margin:20px; font-size:10pt; font-weight:bold; }
#header ul li a:hover { text-decoration:underline; }
#header .logo { position:absolute; top:20px; right:200px; background:url('http://dl.dropbox.com/u/18372729/logo.png'); width:217px; height:75px; display:block; position:absolute; }
#header .logout { font-size:9pt; float:right; margin-top:80px; margin-right:20px; }​ 
```

演示：http: [//jsfiddle.net/xsDQP/1/](http://jsfiddle.net/xsDQP/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:28:01.363

您需要绝对定位您的 div。然后使用 top、left、right 或 bottom 属性将 div 对齐到所需的位置。

您设置为背景的图像也被用于图像标签中，这可能是您的标题图像加倍的原因。

**更新**

将父 div（在您的情况下`#headerImage`）设置为，`position:relative;`并且应该给出所有子 div`position:absolute;`

# ios - iOS 在播放之前双重加载音频

> ID：11101896
> 
> 赞同：0
> 
> 时间：2012-06-19T13:23:23.800
> 
> 标签：ios, ipad, audio, load, jwplayer

我有一个链接可以将歌曲加载到播放器中，然后当您单击播放器时，歌曲就会开始播放。这在 PC/Mac 上很好，但 iOS 需要在歌曲开始播放之前加载两次。所以我必须做的是以下几点：

我一直在 iPad 2 上对此进行测试。

1.  点击链接加载歌曲
2.  单击播放器开始播放歌曲 - 我得到旋转的“缓冲”进度轮，但没有播放歌曲
3.  单击链接以第二次加载歌曲
4.  歌曲开始播放

我知道iOS不会自动播放歌曲，但为什么我需要加载歌曲两次才能播放歌曲。这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Untitled</title>
<script src="js/jquery-1.7.1.min.js" type="text/javascript" language="javascript"></script>
<script src="js/jwplayer.js" type="text/javascript" language="javascript"></script>
<script type="text/javascript" language="javascript">
// <![CDATA[
$(document).ready(function() {
// Set up JWPlayer
jwplayer('track_player').setup({
flashplayer: "player.swf",
height: 200,
width: 400,
controlbar: 'bottom',
events: {
onReady: function(event) {
player = jwplayer('track_player');
}
}
});
});

var player = null; // JWPlayer reference

function loadFile() {
player.load({
'file':'http://www.mydomain.com/songs/song.mp3'
});
}
// ]]>
</script>
</head>
<body>
<a href="javascript:;" onclick="loadFile()">Load File</a><br /><br />
<div id="track_player"></div>
</body>
</html> 
```

这是一个实时查看问题的链接。

[http://www.tonedeafdesign.com/ios-audio-test.php](http://www.tonedeafdesign.com/ios-audio-test.php)

我确定我错过了一些东西。任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:55:50.473

已解决 - 这就是改变的地方。我添加到配置中：

```
autostart: false 
```

然后在 loadFile() 函数中将 .play() 链接到 .load(...) 的末尾，所以它看起来像这样：

```
player.load({'file':'http://www.mydomain.com/songs/song.mp3').play(); 
```

# ios - AVAudioPlayer 和 AVCapture* 不能同时工作？

> ID：11101899
> 
> 赞同：1
> 
> 时间：2012-06-19T13:23:32.833
> 
> 标签：ios, iphone, avaudioplayer, avcapturesession

我尝试创建一个可以同时录制视频和播放声音的 App；两者都使用 AV-Classes ( `AVAudioPlayer`& `AVCaptureSession`)。不幸的是，在开始录制（音乐已经在播放）时，我总是遇到错误，说“发生未知错误（-12780）”。

有人知道这个效果吗？我不能同时使用两个 AV-Class 吗？

# python - 使用 scrapy 生成缩略图时保持比例

> ID：11101901
> 
> 赞同：1
> 
> 时间：2012-06-19T13:23:43.580
> 
> 标签：python, python-imaging-library, scrapy

Scrapy 框架具有生成缩略图的内置功能。有没有办法只为一侧设置所需的尺寸`IMAGES_THUMBS`以保持原始图像比例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:55:04.120

查看了 PIL 模块中的 Image.py ，它实际上自动保留了比例。问题在于您无法生成特定宽度或特定高度的缩略图 - PIL 将根据原始图像获取宽度或高度，并且无法更改。这是进行计算的代码。

```
 # preserve aspect ratio
    x, y = self.size
    if x > size[0]: y = max(y * size[0] / x, 1); x = size[0]
    if y > size[1]: x = max(x * size[1] / y, 1); y = size[1]
    size = x, y 
```

这样做的hacky方法是为您不关心的一侧设置一个非常大的值，然后另一侧将始终用于生成缩略图。所以这对我有用：

```
 IMAGES_THUMBS = {
    'thumbs': (80, 100000),
 } 
```

绝对不是最好的方法，它可能会停止与 PIL 的未来版本一起使用，但现在已经足够了。仍然对实现相同目标的更好方法感兴趣。

# java - 在 44.1 kHz 接收器上播放 48 kHz PCM

> ID：11101903
> 
> 赞同：1
> 
> 时间：2012-06-19T13:23:45.453
> 
> 标签：java, pcm, airplay, sample-rate, downsampling

我有一个 48 kHz 的 PCM 流，并且想将它流式传输到一个 44.1 kHz 兼容的播放器（Apple 的 AirPlay）。

有人知道这是否“只是因为某些字节会丢失而起作用”，还是我必须先进行转换/下采样？

如果它不是“正常工作”，那么在 java 中执行此操作的任何提示？

编辑：

它不仅会起作用，因为声音会结结巴巴（“信息溢出”）。我必须对 pcm 流进行重新采样/下采样。

因为在这种情况下这不是那么简单（48 kHz 到 44.1 kHz），所以我应该使用一个库来执行此操作：

我想我会尝试 libresample。因为我在 Android 上，所以我可以使用[native implementation](https://github.com/intervigilium/libresample)或[java implementation](https://github.com/dnault-laszlo/libresample4j)。

您认为 java 实现是否足够高效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:52:11.140

The process needed in your case is called "downsampling by a rational factor". It is not a trivial problem, so I suggest you use a library to do that - implementing this by yourself requires a lot of DSP-knowledge. You could instead use libresample, a C library, for which you would have to write JNI bindings.

To do a very rough approximation, you could just create a new buffer, in which you copy most of the old samples, but dropping every 10th sample. It will not be exactly 44.1 kHZ, but better than playing it as it is.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:47:41.957

好的，最简单的方法是获取每一个`48/44.1`样本（这等于每 12 个样本踢出一次）。您最终将不得不这样做。

问题在于混叠。如果您进行下采样，您实际上是在将下采样率之外的频谱镜像到您的样本中（请参阅[此 wiki 页面](http://en.wikipedia.org/wiki/Aliasing)以获得很好的解释），这称为混叠。您显然不希望这样（您可以尝试一下，看看您的音频会发生什么）。

那么我们该如何预防呢？最常见的方法是以某种方式降低那些镜像频率块的频谱幅度。通过这种方式，它们**是**镜像的，但不再那么重要了，因为它们的幅度非常低。这可以通过使用截止频率接近采样率的低通滤波器来完成。所以步骤是：

*   对您的样本进行低通滤波以去除 44.1kHz 以上的高频振幅（注意不要去除低于 44.1kHz 的高频振幅）
*   对您的数据进行二次抽样（在您的情况下，每 12 个样本退出一次）

那么该过滤器的要求是什么？重要的要求之一是不应触及低于截止频率的频率幅度，因此非常低的通带纹波和 1 的通带增益会很好。然后应尽可能抑制阻带。这显然取决于您的数据。我不知道特殊的音频处理，但通常在DSP中，使用的低通滤波器是`FIR`或`IIR`. 当然还有很多其他的，但这些都非常容易实现，并且在一定程度上甚至能够处理实时约束。

所以我建议你阅读这两个过滤器实现（或只关注`FIR`）。如果您**真的**对我刚刚写的内容感到困惑，那么使用具有某种低通滤波能力的给定库可能会更好。但是，如果您经常使用这些东西，那么我建议您阅读该问题，这确实有助于理解发生了什么……；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T02:03:55.890

您需要对输入信号应用抽取。首先，您需要将输入通过低通滤波器（将其视为抗混叠）。

然后你需要通过一个合理的因素进行下采样。互联网上有很多关于这两个过程的文章。所以，如果你真的能胜任这项任务，那就去做一些研究吧。

例如，一种简单的低通滤波器方法是使用两个样本的平均值作为输出样本。即y(n)=(x(n)+x(n-1))/2；其中 y - 是输出，x - 输入，n - 当前样本位置。

# php - 修改 codeigniter 模型中的变量值

> ID：11101905
> 
> 赞同：0
> 
> 时间：2012-06-19T13:23:49.140
> 
> 标签：php, oop

我有控制器和模型。我正在修改模型中的变量值，但它没有反映在控制器中，我在 OOP 方面不是那么专家。

```
// controller class structure
class Leads_import extends CI_Controller {

public $total = 0;

  public function import(){
   $this->xml_model->imsert();
   echo $this->total; 
  }
}

// model class structure
class xml_model extends CI_Model {

   public function insert(){
      this->total = 10; 
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:29:03.583

试试这个：

```
// controller class structure
class Leads_import extends CI_Controller {

public $total = 0;

  public function import(){
   $this->total = $this->xml_model->imsert();
  }
} 
```

模型：

```
// model class structure
class xml_model extends CI_Model {

   public function insert(){
      return 10; 
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:29:15.470

您必须检查`$total`of`xml_model`或让它更新`$total`of `Leads_import`。您在控制器中读取了错误的变量，它永远不会更新。

这是我在不知道您真正想要做什么的情况下提出的建议：

```
class Leads_import extends CI_Controller {
   public $total = 0;
   public function import(){
     $this->xml_model->insert();
     // Read xml_model total and assign to Leads_import total
     $this->total = $this->xml_model->total; 
     echo $this->total; 
  }
}

class xml_model extends CI_Model {
   public $total = 0;
   public function insert(){
      $this->total = 10; // update xml_model total
   }
} 
```

# html - 键盘上的打开按钮立即发送表单

> ID：11101911
> 
> 赞同：1
> 
> 时间：2012-06-19T13:23:59.727
> 
> 标签：html, forms, keyboard, form-submit, smartphone

我有这样的表格：

```
<form action="form_send.php" method="post">
<table>
        <tr>
            <td><label for="address">address</label></td>
            <td><input type="text" id="address" name="address" tabindex="1" /></td>
        </tr>
        <tr>
            <td><label for="country">country</label></td>
            <td><input type="text" id="country" name="country" tabindex="2" /></td>
        </tr>
        <tr>
</table>
<input type="submit" value="Submit" tabindex="3" />
</form> 
```

如果用户在他/她的智能手机上打开 Safari 或其他浏览器并填写文本字段，他就有可能点击`Open`。如果按下此按钮，则立即发送表单。

用户在提交表单之前是否有可能先跳转到第二个文本字段？

我尝试使用`tabindex`，但这对我没有帮助。我知道我可以使用 PHP/Javascript 使字段成为强制性字段，但这些字段不应该是强制性的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:34:54.593

它可能正在为用户按下回车键。您可以通过拦截击键来防止这种情况。

这段代码 (jQuery) 将阻止通过按 ENTER 提交表单。

```
$('form').keypress(function(e){
    if(e.keyCode === 13){
        e.preventDefault();
     }
}); 
```

# php - 我需要有关我的 PDO 图书数据库的帮助

> ID：11101918
> 
> 赞同：1
> 
> 时间：2012-06-19T13:24:26.937
> 
> 标签：php, sql, pdo

我正在开发一个小型在线系统来对我的书籍进行分类，但是现在我已经尝试了几个小时来解决一个问题，但没有任何运气。

在我的数据库中，我有一个`titles`包含书籍信息（`title_id`、、`title`... `author`）的表和另一个包含`title_relations`字段`title_relation_id`、、`title_id`和。`to_title_id``titlerelation`

当我调用一本书的信息时，有一个字段`related titles`应该列出所有前传、续集和衍生产品。

数据库如下所示：

**标题**

```
标题 ID 1
指环王：魔戒联谊会
...

标题 ID 2
标题指环王：两座塔楼
...

标题 ID 3
指环王：王者归来
...
```

**标题关系**

```
title_relation_id 1
标题 ID 1
to_title_id 2
标题关系前传

title_relation_id 1
标题 ID 1
to_title_id 3
标题关系前传

```

现在我正在调用*“魔戒联谊会”*的信息，并希望显示*“两座塔楼*”和*“王​​者归来”的*链接。我该如何去那里获取这些信息？

我让它适用于一个标题关系，但除此之外，我还需要一个

```
foreach($title_relations as $row) {
} 
```

它将来自 title_relations 的信息保存到变量 ( `$to_title_id_1`, `$titlerelation_1`, `$to_title_id_2`, `$titlerelation_2`, ...)、数组或其他类似的东西中。

我尝试过的任何事情都没有奏效，因此我们将非常感谢您提供的任何帮助。

我正在使用 PDO 来获取数据库信息。

旧代码（不工作）：

```
try {
$dbh = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
$dbh->exec("SET CHARACTER SET utf8");

if($page == 'title'){
    #titles zuordnen 
    $titles = $dbh->prepare("SELECT * FROM titles WHERE title_id = $id");
    $titles->execute();

    while($row = $titles->fetch(PDO::FETCH_OBJ)) {
        $title = $row->title;
        /* deleted the other infos */
    }

    #title_relations zuordnen
    $title_relations = $dbh->prepare("SELECT * FROM title_relations WHERE title_id = $id");
    $title_relations->execute();

    while($row = $title_relations->fetch(PDO::FETCH_OBJ)) {
        $to_title = $row->to_title_id;
        $relation_type = $row->titlerelation;
    }

    #to_title Seriennamen zuordnen
    $series_name = $dbh->prepare("SELECT * FROM titles WHERE title_id = $to_title");
    $series_name->execute();

    while($row = $series_name->fetch(PDO::FETCH_OBJ)) {
        $series = $row->title;
    }
}

#Datenbank schließen
$dbh = null; } catch(PDOException $exceptionpdo){
echo 'ERROR: ' . $exceptionpdo->getMessage(); } 
```

当前代码（工作！）：

```
try {
    $dbh = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
    $dbh->exec("SET CHARACTER SET utf8");

    if($page == 'title'){
        // titles zuordnen
        // Here I binded the $id in execute, not in prepare
        $titles = $dbh->prepare("SELECT title FROM titles WHERE title_id = ?");
        $titles->bindParam(1, $id, PDO::PARAM_INT);
        $titles->execute();

        // Here you are expecting a single row, I guess title_id is a primary key, so you don't needa loop
        $row = $titles->fetch(PDO::FETCH_OBJ);
        $title = $row->title;

        // title_relations zuordnen
        $title_relations = $dbh->prepare("SELECT title_relation_id, title_id, to_title_id, titlerelation FROM title_relations WHERE title_id = ?");
        $title_relations->bindParam(1, $id, PDO::PARAM_INT);
        $title_relations->execute();

        $series = array(); // In this array we will store all the related titles

        while($row = $title_relations->fetch(PDO::FETCH_OBJ)) {
            // zu_title Serieninfo zuordnen
            $series_info = $dbh->prepare("SELECT title_id, title FROM titles WHERE title_id = ?");
            $series_info->bindParam(1, $row->to_title_id, PDO::PARAM_INT);
            $series_info->execute();

            while($row = $series_info->fetch(PDO::FETCH_OBJ)) {
                $series[] = $row;           
            }
        }

    #Datenbank schließen
    $dbh = null;
}

} catch(PDOException $exceptionpdo){
    echo 'ERROR: ' . $exceptionpdo->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:57:59.600

您应该提供您的查询以更好地理解和调整此答案以满足您的特定需求。
如果没有我能想到的最简单的例子，基本上你只使用一个带有左连接的查询来返回标题，即使它没有关系（适用于简单的小表）。在此示例中，我只是将相关标题打印到带有标识的 STDOUT。

```
// Your get this from whatever, $_GET ... etc ...
$title_id = 1; // exemple id1 = Lord of the Rings: The Fellowship of the Ring

$sth = $dbh->prepare('select t1.title, t2.title
       from titles as t1
       left join title_relations as trel on (t1.title_id=trel.title_id)
       left join titles as t2 on (t2.title_id=trel.to_title_id)
       where t1.title_id=?');
$sth->bindParam(1, $title_id, PDO::PARAM_INT);
$sth->execute();
$result = $sth->fetchAll();

// original title
echo $result[0]['title'];

// related title
foreach($results as $row)
{
    echo "\t".$row['title'];
} 
```

**@update
根据您的代码，工作版本将是：
@disclaimer，这是基于您的代码，我不建议在 while 循环中进行选择，我将只使用上面版本（或变体）的单个查询其中）。**

```
try
{
    $dbh = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
    $dbh->exec("SET CHARACTER SET utf8");

    if($page == 'title')
    {
        $series = array(); // In this array we will store all the related titles

        // titles zuordnen
        // Here I binded the $id in execute, not in prepare
        $titles = $dbh->prepare("SELECT title_id, title, author /*put your other columns*/ FROM titles WHERE title_id = ?");
        $titles->bindParam(1, $id, PDO::PARAM_INT);
        $titles->execute();

        // Here you are expecting a single row, I guess title_id is a primary key, so you don't needa loop
        $row = $titles->fetch(PDO::FETCH_OBJ);
        $title = $row->title;
        /* deleted the other infos */

        // title_relations zuordnen
        $title_relations = $dbh->prepare("SELECT title_relation_id, title_id, to_title_id, titlerelation FROM title_relations WHERE title_id = ?");
        $title_relations->bindParam(1, $id, PDO::PARAM_INT);
        $title_relations->execute();

        while($row = $title_relations->fetch(PDO::FETCH_OBJ))
        {
            // This is in a loop, it will store just the value from the last row !
            // $relation_type = $row->titlerelation;

            // to_title Seriennamen zuordnen
            $series_name = $dbh->prepare("SELECT title_id, title, author /*put your other columns*/ FROM titles WHERE title_id = ?");
            $series_name->bindParam(1, $row->to_title_id, PDO::PARAM_INT);
            $series_name->execute();    

            while($row = $series_name->fetch(PDO::FETCH_OBJ))
            {
                // $series = will store the values just from the last row, changed it to an array to store all relations
                $series[$row->title_id] = $row->title;
            }
        }
    }

    // Datenbank schließen
    $dbh = null;
} catch(PDOException $exceptionpdo)
{
    echo 'ERROR: ' . $exceptionpdo->getMessage();
} 
```

您的代码仅返回一个关系，因为您仅查询了从 title_relations 返回的最后一行。为了解决这个问题（`again in the context of your code`），我将最后一个查询移到了 title_relations 中。
为了能够访问我创建的所有关系`(array)$series`，您只需将最后一行存储在`(string)$series`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:58:22.083

您需要能够在两个方向（前传/续集）上遍历这些关系，因此您需要搜索 by`to_title_id`以及 by `title_id`。

`SELECT * FROM title_relations WHERE title_id = ? OR to_title_id = ?`

递归，看看*The Return of the King* from *the Fellowship of the Ring*你最好的选择可能是运行第二个查询（如果你想更深入，第三个）然后使用一些东西将结果缓存在 json 数组/哈希结构中像内存缓存。但是，要为*哈利波特*或*基金会*系列执行此操作，递归有点失控，更不用说如果您有任何*星际迷航*小说。

我在自己的图书馆项目中做过类似的事情，但我使用了一个`series`表格和一个`title_series`表格来存储每个标题在系列中的顺序。然后只需一次查询即可找到相关标题。

# tridion - 从 Tridion 中的 XML 检索类别时出错 (DD4T - MVC)

> ID：11101919
> 
> 赞同：4
> 
> 时间：2012-06-19T13:24:27.980
> 
> 标签：tridion, dd4t

在 DD4T 视图中，我试图选择类别内关键字的路径值。

```
foreach(var category in @Model.Categories)
{
    if (category.Title.Contains("Taxonomy"))
    {
        str = category.Keywords[0].Path;            

        break;
    }
} 
```

但在@Model.Categories 中为空。

> 错误：对象引用未设置为对象的实例。

尽管数据存在于 XML 中。

请建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T21:21:45.723

我发现这是 DD4T 中的一个问题。解决方法非常简单：如果您使用组件（或页面）的实现作为模型，而不是接口，它就可以工作。

所以开始你的观点：

```
@model DD4T.ContentModel.Component 
```

而不是

```
@model DD4T.ContentModel.IComponent 
```

然后再试一次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T19:53:11.687

[我已在此处](http://code.google.com/p/dynamic-delivery-4-tridion/issues/detail?id=29)的 DD4T Google 代码站点中将此记录为问题。

这似乎是由 List 和 IList 不支持逆变引起的，这意味着如下行：

```
IList<ICategory> IComponent.Categories
{
    get { return Categories as IList<ICategory>; }
} 
```

在 ContentModel 类中将永远无法工作。[挖掘](https://stackoverflow.com/questions/10109183/xmlserialization-and-interfaces)的建议是将其更改为支持逆变的 IEnumerable。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T05:51:44.767

它在实施 Quirijn 建议后工作，如 Component c = (Component)Model; c.类别[0]...

谢谢，维卡斯库马尔

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T14:34:56.967

您是否已将类别发布到目标？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T16:08:57.840

是的，首先验证您是否将类别发布到代理数据库。Page 或 Component XML 反序列化为 IPage 或 IComponent 对象的方式非常简单。

还要指出您使用的是哪个版本的 DD4T。我记得在早期版本中存在反序列化问题。

# android - 如何在 Android 中使用编码的 HTML 解析 XML

> ID：11101920
> 
> 赞同：0
> 
> 时间：2012-06-19T13:24:34.580
> 
> 标签：android, xml, parsing

我正在尝试解析来自 php 请求 URI 的 XML： http: [//caracasfutbolclub.com/service/news.php](http://caracasfutbolclub.com/service/news.php)。当我在解析字符串 xml 后做日志时，响应完成，一切看起来都很好，除了将 '<' 转换为 '& lt;' 等等所有的 HTML 标记（可能是一些 utf-8 问题或其他编码）。真正的交易是当我从节点请求元素时，正在检索“标题”XML 标记，但问题是“introtext”标记仅显示“<”而不是所有编码的 HTML标签内部：

注意：不只是显示，如果你在 "map.put("introtext", XMLfunctions.getValue(e, "introtext"));" 之后登录，你会得到整个字符串只是 <。

我正在使用的代码如下：

主要活动：

```
 ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

    String xml = XMLfunctions.getXML(); // method that is parsing the whole XML as a String.
    Document doc = XMLfunctions.XMLfromString(xml);
    Log.d("XML" , xml);

    NodeList nodes = doc.getElementsByTagName("New");

    for (int i = 0; i < nodes.getLength(); i++) {                           
        HashMap<String, String> map = new HashMap<String, String>();    

        Element e = (Element)nodes.item(i);
        map.put("title", XMLfunctions.getValue(e, "title"));
        map.put("introtext", XMLfunctions.getValue(e, "introtext"));
        map.put("created", "Publicado: " + XMLfunctions.getValue(e, "created"));
        mylist.add(map);            
    } 
```

XML函数：

```
public final static Document XMLfromString(String xml){

    Document doc = null;

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(xml));
        doc = db.parse(is); 

    } catch (ParserConfigurationException e) {
        System.out.println("XML parse error: " + e.getMessage());
        return null;
    } catch (SAXException e) {
        System.out.println("Wrong XML file structure: " + e.getMessage());
        return null;
    } catch (IOException e) {
        System.out.println("I/O exeption: " + e.getMessage());
        return null;
    }

    return doc;

}

/** Returns element value
  * @param elem element (it is XML tag)
  * @return Element value otherwise empty String
  */
 public final static String getElementValue( Node elem ) {
     Node kid;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( kid = elem.getFirstChild(); kid != null; kid = kid.getNextSibling() ){
                 if( kid.getNodeType() == Node.TEXT_NODE  ){
                     return kid.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 public static String getXML(){  
        String line = null;

        try {

            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost("http://caracasfutbolclub.com/service/news.php");

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            line = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        } catch (MalformedURLException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        } catch (IOException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        }

        return line;

}

public static String getValue(Element item, String str) {       
    NodeList n = item.getElementsByTagName(str);        
    return XMLfunctions.getElementValue(n.item(0));
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:42:48.627

将您的 html 包装在`CDATA`警卫中。例如

`<myxmltag><![CDATA[<p>html content</p>]]></myxmltag>`

# datagrid - 将值从 DataGrid 复制到数组 vb6

> ID：11101922
> 
> 赞同：0
> 
> 时间：2012-06-19T13:24:43.567
> 
> 标签：datagrid, vb6

我有一个我想解决的问题。

我想在 adodc 更新数据库中的记录之前检查一列是否在数据网格的行中重复了一个值。

为此，我将获取 DataGrid 中显示的记录并将它们放入一个数组中，然后计算单元格中具有相同值的行数。

我遇到的问题是我不能将 DataGrid 的单元格放在一个数组中，所以我可以检查重复的行。

如何在数组中获取 DataGrid 的单元格？或者在数据库中进行更新之前，我如何知道行的值是否重复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:06:10.980

我同意@bob-riemersma 的观点，即您的验证应该通过数据绑定和数据库约束来完成，但是如果您想手动完成（我认为这是一个坏主意），我会使用一个集合：

```
Private Function GridColHasDuplicates(col As Long) As Boolean
    On Error GoTo DupeError
    Dim noDupes As New Collection

    myGrid.row = 0
    myGrid.col = col
    Do While myGrid.row <= myGrid.VisibleRows - 1
        noDupes.Add myGrid.Columns(col).Value ' this will error off if dupe
        If myGrid.row < myGrid.VisibleRows - 1 Then
            myGrid.row = myGrid.row + 1
        Else
            Exit Do
        End If
    Loop

    GridColHasDuplicates = False
    Exit Function
DupeError:
    GridColHasDuplicates = True

End Function 
```

# c# - 如何处理变量范围问题

> ID：11101928
> 
> 赞同：0
> 
> 时间：2012-06-19T13:25:02.897
> 
> 标签：c#, asp.net

变量“doc”在 if 语句之外的方法中的其他任何地方都无法访问，因此 if doc==null 失败，因为“doc”的范围仅在定义它的那些 if 语句中......如何做我处理这个问题？添加 public 只会导致更多错误..

```
protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            string id, type, UniqueColID;
            string FilePath = Server.MapPath("~").ToString();
            type = Request.QueryString["type"];

            if (type.Equals("template"))
            {
                MergeDocument template = new MergeDocument(FilePath + @"\Template\MVCTemplate.pdf");
                template.DrawToWeb();
            }
            else
            {
                id = Request.QueryString["id"];
                UniqueColID = DBFunctions.DBFunctions.testExist(id);
                if (DBFunctions.DBFunctions.FlagDriverPrintOnly == false)
                {
                    MergeDocument doc = PDF.LongFormManipulation.generatePDF(id, type, FilePath, UniqueColID);
                }
                else if (DBFunctions.DBFunctions.FlagDriverPrintOnly == true)
                {
                    MergeDocument doc = PDF.LongFormManipulation.generatePDFDriverOnly(id, type, FilePath, UniqueColID);
                }
                DBFunctions.DBFunctions.FlagDriverPrintOnly = false;
                    if (doc == null)
                    doc = new MergeDocument(FilePath + @"\Template\MVCTemplate.pdf");

                doc.DrawToWeb();
            }
        }
        catch(Exception err)
        {
            MessageBox("Creating PDF file was not successful. " + err.ToString());
        } 
```

我尝试在更高级别声明它，但我仍然得到同样的错误：

```
**Use of unassigned local variable 'doc' -->>>at: if (doc==nul)** 
```

做完 MergeDocument=null; 在更高级别我收到一个新错误：

```
System.NullReferenceException: Object reference not set to an instance of an object. at GeneratePDF.Page_Load(Object sender, EventArgs e) 
```

这个错误指向`"if (type.Equals("template"))"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:29:09.480

简单的方法。试试这个：

```
protected void Page_Load(object sender, EventArgs e)
{
    try
    {
        string id, type, UniqueColID;
        string FilePath = Server.MapPath("~").ToString();
        type = Request.QueryString["type"];

        if (type.Equals("template"))
        {
            MergeDocument template = new MergeDocument(FilePath + @"\Template\MVCTemplate.pdf");
            template.DrawToWeb();
        }
        else
        {
            id = Request.QueryString["id"];
            UniqueColID = DBFunctions.DBFunctions.testExist(id);
            MergeDocument doc;
            if (DBFunctions.DBFunctions.FlagDriverPrintOnly == false)
            {
               doc = PDF.LongFormManipulation.generatePDF(id, type, FilePath, UniqueColID);
            }
            else if (DBFunctions.DBFunctions.FlagDriverPrintOnly == true)
            {
                doc = PDF.LongFormManipulation.generatePDFDriverOnly(id, type, FilePath, UniqueColID);
            }
            DBFunctions.DBFunctions.FlagDriverPrintOnly = false;
                if (doc == null)
                doc = new MergeDocument(FilePath + @"\Template\MVCTemplate.pdf");

            doc.DrawToWeb();
        }
    }
    catch(Exception err)
    {
        MessageBox("Creating PDF file was not successful. " + err.ToString());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:29:30.570

`doc`在您真正想要使用它之前定义变量：

```
MergeDocument doc = null;
if (DBFunctions.DBFunctions.FlagDriverPrintOnly == false) 
{ 
    doc = PDF.LongFormManipulation.generatePDF(id, type, FilePath, UniqueColID); 
} 
else if (DBFunctions.DBFunctions.FlagDriverPrintOnly == true) 
{ 
    doc = PDF.LongFormManipulation.generatePDFDriverOnly(id, type, FilePath, UniqueColID); 
} 
DBFunctions.DBFunctions.FlagDriverPrintOnly = false; 
if (doc == null) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T13:30:19.260

将声明和赋值分开`doc`，并将声明放在适当的范围内：

```
MergeDocument doc = null;

if (DBFunctions.DBFunctions.FlagDriverPrintOnly == false)
{
    doc = PDF.LongFormManipulation.generatePDF(id, type, FilePath, UniqueColID);
}
else if (DBFunctions.DBFunctions.FlagDriverPrintOnly == true)
{
    doc = PDF.LongFormManipulation.generatePDFDriverOnly(id, type, FilePath, UniqueColID);
}

// Use the `doc` below as appropriate... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T13:33:36.027

**重构代码。**

将对象的创建提取到新方法。这样你的程序流程就更清晰了。

未初始化或仅保留其默认值的变量是不好的。编译器将无法捕获对未分配变量的任何滥用（因为它的默认值现在为空）。

基本上：

```
var doc = GetMergeDocument(id, type, FilePath, UniqueColID)
if (doc == null)
    doc = new MergeDocument(FilePath + @"\Template\MVCTemplate.pdf");

doc.DrawToWeb(); 
```

这样我们也可以知道如果`GetMergeDocument`返回 null 我们会相应地处理它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T13:28:11.600

解决方案相当简单。我假设你是 C# 的新手。只需将`doc`变量移动到更广泛的范围：

```
MergeDocument doc = null;
if (DBFunctions.DBFunctions.FlagDriverPrintOnly == false)
{
    doc = PDF.LongFormManipulation.generatePDF(id, type, FilePath, UniqueColID);
}
else if (DBFunctions.DBFunctions.FlagDriverPrintOnly == true)
{
    doc = PDF.LongFormManipulation.generatePDFDriverOnly(id, type, FilePath, UniqueColID);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T13:28:39.243

在输入 if 之前声明它。

声明是这一行：

```
 MergeDocument doc; 
```

然后将其分配到您需要的任何地方

```
doc = PDF ... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-19T13:30:08.103

将此`doc`变量声明移动到函数的顶部

```
protected void Page_Load(object sender, EventArgs e) 
    { 
        MergeDocument doc // Move the declaration here..
        try 
        { 
            string id, type, UniqueColID; 
            string FilePath = Server.MapPath("~").ToString(); 
            type = Request.QueryString["type"]; 

            if (type.Equals("template")) 
            { 
                MergeDocument template = new MergeDocument(FilePath + @"\Template\MVCTemplate.pdf"); 
                template.DrawToWeb(); 
            } 
            else 
            { 
                id = Request.QueryString["id"]; 
                UniqueColID = DBFunctions.DBFunctions.testExist(id); 
                if (DBFunctions.DBFunctions.FlagDriverPrintOnly == false) 
                { 
                    doc = PDF.LongFormManipulation.generatePDF(id, type, FilePath, UniqueColID); 
                } 
                else if (DBFunctions.DBFunctions.FlagDriverPrintOnly == true) 
                { 
                    doc = PDF.LongFormManipulation.generatePDFDriverOnly(id, type, FilePath, UniqueColID); 
                } 
                DBFunctions.DBFunctions.FlagDriverPrintOnly = false; 
                    if (doc == null) 
                    doc = new MergeDocument(FilePath + @"\Template\MVCTemplate.pdf"); 

                doc.DrawToWeb(); 
            } 
        } 
        catch(Exception err) 
        { 
            MessageBox("Creating PDF file was not successful. " + err.ToString()); 
        } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-19T13:33:42.567

您需要在语句`MergeDocument`之外`try`或在`else`语句内定义，以便在语句之外使用它`if...else if`。

```
protected void Page_Load(object sender, EventArgs e)
    {
                    MergeDocument doc = null;
        try
        {
            string id, type, UniqueColID;
            string FilePath = Server.MapPath("~").ToString();
            type = Request.QueryString["type"];

            if (type.Equals("template"))
            {
                MergeDocument template = new MergeDocument(FilePath + @"\Template\MVCTemplate.pdf");
                template.DrawToWeb();
            }
            else
            {
                id = Request.QueryString["id"];
                UniqueColID = DBFunctions.DBFunctions.testExist(id);
                if (DBFunctions.DBFunctions.FlagDriverPrintOnly == false)
                {
                    doc = PDF.LongFormManipulation.generatePDF(id, type, FilePath, UniqueColID);
                }
                else if (DBFunctions.DBFunctions.FlagDriverPrintOnly == true)
                {
                    doc = PDF.LongFormManipulation.generatePDFDriverOnly(id, type, FilePath, UniqueColID);
                }
                DBFunctions.DBFunctions.FlagDriverPrintOnly = false;
                    if (doc == null)
                    doc = new MergeDocument(FilePath + @"\Template\MVCTemplate.pdf");

                doc.DrawToWeb();
            }
        }
        catch(Exception err)
        {
            MessageBox("Creating PDF file was not successful. " + err.ToString());
        } 
```

# java - Java 编译/运行时类路径问题

> ID：11101929
> 
> 赞同：0
> 
> 时间：2012-06-19T13:25:08.510
> 
> 标签：java, classpath

我正在尝试构建一个 Java SNMP 客户端。我的 Ubuntu 桌面上有一个名为 snmpclient 的文件夹。在该文件夹中，我有主类 Client.java 和主类使用的 snmp.jar 库。

我设法在终端上使用以下命令成功编译它：

```
~/Desktop$ javac snmpclient/Client.java -classpath ./snmpclient/snmp.jar 
```

然后我尝试使用以下命令运行它：

```
~/Desktop$ java snmpclient.Client -classpath ./snmpclient/snmp.jar 
```

但我收到“java.lang.ClassNotFoundException”错误，说它找不到 snmp 库的类。我解压缩了 jar 文件以确保我正在使用的类都在那里，而且它们是。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:28:43.973

我会重新排列你的参数：

```
~/Desktop$ java -classpath ./snmpclient/snmp.jar snmpclient.Client 
```

这样您的类路径就在类运行之前。请注意，如果您不指定`-classpath`，则您的类路径默认为当前目录，因此您的完整调用应该是：

```
~/Desktop$ java -classpath ./snmpclient/snmp.jar:. snmpclient.Client 
```

指定类所在的根目录（即点），*以及*SNMP jar 文件。

`-classpath`arg 由 jar 文件和以冒号分隔的目录路径组成。有关设置类路径的更多信息，请参见[此处](http://docs.oracle.com/javase/6/docs/technotes/tools/index.html#classpath)。

# python - 我想在 python 中解析 HTML

> ID：11101932
> 
> 赞同：0
> 
> 时间：2012-06-19T13:25:21.287
> 
> 标签：python, html, parsing

我有这个小班：

```
class HTMLTagStripper(HTMLParser):
    def __init__(self):
       self.reset()
       self.fed = []
    def handle_data(self, data):
       self.fed.append(data)
    def handle_starttag(self, tag, attrs):
       if tag == 'a':
           return attrs[0][1]
    def get_data(self):
       return ''.join(self.fed) 
```

解析此 HTML 代码：

```
<div id="footer">
<p>long text.</p>
<p>click <a href="somelink.com">here</a>
</div> 
```

这是我得到的结果：`long text click here`
但我想得到：`long text click somelink.com`

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T13:27:00.633

看看[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/) .. 它会做到这一点以及更多。

或者您可以使用正则表达式/字符串操作来删除您想要的数据。从长远来看，使用 BeautifulSoup 之类的东西会有所回报，特别是如果您希望做更多这样的事情。

这是使用 BeautifulSoup 提取 HTML 数据中的*单个/唯一*链接的一种方法（我不是这方面的专家，因此可能有其他更好的方法 - 欢迎提出建议/更正）。

```
from BeautifulSoup import BeautifulSoup
s = """<div id="footer">
       <p>long text.</p>
       <p>click <a href="somelink.com">here</a>
       </div>"""

soup = BeautifulSoup(s)
your_link = soup.find('a', href=True)['href']
print 'long text click', your_link 
```

将打印：

`long text click somelink.com`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:28:54.363

这对您不起作用：

```
x = re.compile(r'<.*?>')
stripped = x.sub('', html) 
```

因为您还想从 html 标记中提取一些属性（如 href）。

正如 Levon 指出的那样：你应该选择 BeautifulSoup。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:28:05.237

替换这个：

```
def handle_starttag(self, tag, attrs):
   if tag == 'a':
       return attrs[0][1] 
```

有了这个：

```
def handle_starttag(self, tag, attrs):
   if tag == 'a':
       value = dict(attrs).get("href", None)
       if value:
           # add extra spaces since you dont sanitize
           # them in get_data
           self.fed.append(" %s " % value) 
```

应该有点工作。与否，取决于 html 源代码。这就是我们有 BeatifulSoup 的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T03:45:05.310

我实际上是在查看这个新的 html 解析器库并提出了这个解决方案：

```
from htmldom import htmldom
dom = htmldom.HtmlDom().createDom( """<div id="footer">
<p>long text.</p>
<p>click <a href="somelink.com">here</a>
</div>""");
nodes = dom.find( "p" ).children( all_children = True ) # this makes all text nodes to be in the set.
for node in nodes:
    if node._is( "a" ):
        print( node.attr( "href" ).strip() )
    elif node._is( "text" ):
        print( node.getNode().text, end = '', sep = ' ' ) 
```

您可以从[Sourceforge](http://sourceforge.net/projects/thehtmldom/)或从 python 包索引下载该库：[HtmlDom](http://pypi.python.org/pypi/htmldom/2.0)，适用于 python 3.x，该库的文档不是很好，但可以理解。希望你喜欢这个答案：）

# php - wp_cgi.php 文件耗尽服务器资源

> ID：11101941
> 
> 赞同：0
> 
> 时间：2012-06-19T13:25:46.293
> 
> 标签：php, wordpress, cgi, cpu-usage

我的服务器上有一个客户端安装了严重影响服务器资源的 wordpress。

从日志来看，它似乎是他的公共 html 文件夹中的一个文件，名为`wp_cgi.php`我之前在其他 WP 安装中没有看到这个文件，并且在网络上找不到任何参考。

只是想知道是否有人可能知道它是什么-当我查看代码时

```
<?php /*FirmaDoBem*/
eval(gzuncompress(base64_decode - followed by encoding. 
```

任何想法 - 它似乎不断运行大量进程并使用 59% 的内存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:47:00.060

更改`eval`为`echo`，您可能会看到它运行的代码。还要检查文件的用户权限以查看它是否可能已通过 Web 服务器上传，并检查您的 Web 日志以查看谁调用它以及使用什么参数。

# perl - 替代 Net::SFTP

> ID：11101947
> 
> 赞同：4
> 
> 时间：2012-06-19T13:26:06.293
> 
> 标签：perl, ftp, sftp

我想将文件上传从 FTP 切换到 SFTP。但是我无法安装[Net::SFTP](http://search.cpan.org/~dbrobins/Net-SFTP-0.10/lib/Net/SFTP.pm)因为我们的系统管理员不喜欢它（阅读：**NO！**）。它很旧，似乎没有维护，CPAN 上的评级[说它有问题](http://cpanratings.perl.org/dist/Net-SFTP)。有没有可用的替代品？还是我过于偏执而实际上效果很好？

**编辑：**我应该提到我需要一个无需用户输入即可处理密码身份验证的设备。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:33:41.303

如果只是 中的错误`Net::SFTP`，您可以尝试使用[`Net::SFTP::Foreign`](http://p3rl.org/Net%3a%3aSFTP%3a%3aForeign) 或之类的替代方法[`Net::SSH2`](http://p3rl.org/Net%3a%3aSSH2)。参见[*Net::SFTP::Foreign Vs。网络::SFTP 与。Net::SSH2::SFTP*](http://p3rl.org/Net%3a%3aSFTP%3a%3aForeign#Net%3a%3aSFTP%3a%3aForeign-Vs.-Net%3a%3aSFTP-Vs.-Net%3a%3aSSH2%3a%3aSFTP)进行简要比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:40:04.400

期望、Net::SCP 或 Net::SCP::期望。我没有使用过这些模块，所以我不能为它们做担保，但试一试也无妨。您应该能够通过 Makefile.pl 或 cpan shell 使用 PREFIX 在您的主目录中安装模块，然后进行试验。

```
perl Makefile.PL INSTALL_BASE=/home/<you>/lib

o conf makepl_arg INSTALL_BASE=/home/<you>/lib 
```

# javascript - 使用 JavaScript 和 CustomValidator 控件在客户端验证 asp:CheckBox 控件

> ID：11101948
> 
> 赞同：2
> 
> 时间：2012-06-19T13:26:06.730
> 
> 标签：javascript, asp.net, checkbox, customvalidator, client-side-validation

我有两个复选框。在提交表单之前，我需要检查是否至少检查了其中一个。

我在页面上有一个 CustomValidator。它调用一个用于服务器端验证的函数。我需要为客户端验证添加一个功能。

客户端函数应该用 JavaScript 编写。

（我不知道这是否有区别，但页面上还有其他用户控件，例如 textBoxes，它们使用其他非自定义验证器）。

这是复选框和自定义验证器控件：

```
<tr>
    <td colspan="3">
        <asp:CheckBox id="EmailCourse" name="EmailCourse" runat="server" />
         Email course
    </td>
</tr>
<tr>
    <td colspan="3">
        <asp:CheckBox name="SpecialReport" id="SpecialReport" runat="server" />
            Special report
    </td>
</tr>
<tr>
    <td colspan="3">
        <asp:CustomValidator id="CustomValidator1" runat="server" ErrorMessage="No checkbox checked" CssClass="error" ClientValidationFunction="validateCheckboxes_ClientValidate" OnServerValidate="validateCheckBoxes_ServerValidate"></asp:CustomValidator>
    </td>
</tr> 
```

这是用于服务器端验证的函数：

```
protected void validateCheckBoxes_ServerValidate(object source, ServerValidateEventArgs args)
    {
        if (!EmailCourse.Checked && !SpecialReport.Checked)
            args.IsValid = false;
        else
            args.IsValid = true;
    } 
```

我尝试编写客户端函数 validateCheckboxes_ClientValidate：

```
 <script type="text/javascript" language="javascript">

        function validateCheckboxes_ClientValidate(oSrc, args) {
            alert("inside function");
            var ec = document.getElementById("EmailCourse");
            var sr = document.getElementById("SpecialReport");
            if (!sr.checked && !ec.checked) {
                alert("hi it works");
                args.IsValid = false;
            }
            else {
                alert("one of them is checked");
                args.IsValid = true;
            }
        }
</script> 
```

这行不通。调用该函数，显示第一个警报，但是……就是这样！IF 语句不起作用。

怎么会？我需要做些什么来更改它，以便该函数实际验证复选框并且表单在无效时不会提交？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:46:47.017

我尝试了您的代码，它确实在使用母版页的页面中正常工作。

可能有两个可能的问题，一个如下所示，母版页已更改生成的最终标记中的 ID，如下所示，在这种情况下，您必须`MainContent_EmailCourse`在 JS 中用作 id

```
<td colspan="3">
    <span name="EmailCourse"><input id="MainContent_EmailCourse" type="checkbox" name="ctl00$MainContent$EmailCourse" /></span>
     Email course
</td> 
```

特别报道

或者它可能是浏览器特定的问题。

# asp.net - Check whether item is the last in OnItemDataBind

> ID：11101953
> 
> 赞同：0
> 
> 时间：2012-06-19T13:26:38.353
> 
> 标签：asp.net, data-binding, telerik, radgrid

Using Telerik RadGrid I'm binding a datasource and attach a method to the `OnItemDataBound` event.

```
<telerik:RadGrid ID="myGrid" runat="server"
    DataSourceID="myDataSource"
    OnItemDataBound="myMethod"
    > 
```

I've been trying to find the solution for a while now with no luck. How could I check with the item being bound is the last item to be bound. For example, the below method will be called for each record

```
protected void myMethod(object sender, GridItemEventArgs e)
{
    //some condition to check whether the current item is the last
} 
```

I hope if explained my problem clearly. Thank you in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:47:45.617

```
if (e.Item.ItemType == GridItemType.Item || e.Item.ItemType == GridItemType.AlternatingItem)
{
    if (e.Item.DataSetIndex == e.Item.OwnerTableView.DataSourceCount - 1)
    {
        //Last Grid Item 
    }
} 
```

If paging, to check the last item on the page:

```
(e.Item.ItemIndex == e.Item.OwnerTableView.PageSize - 1) 
```

# mongodb - 多个身份验证用户帐户的 MongoDB 架构设计

> ID：11101955
> 
> 赞同：38
> 
> 时间：2012-06-19T13:26:43.787
> 
> 标签：mongodb, express, mongoose, passport.js

我即将构建我的 node.js / express / **mongoose** / **passport**应用程序，并且我正在考虑为用户和帐户进行正确的**架构设计。**

**会有用户从 twitter 和 facebook 以及本地帐户登录。在稍后阶段，我希望用户将 twitter 和 facebook 与我的应用程序（甚至更多外部帐户）连接起来。**

对于这种情况，我想不出一个好的解决方案。以下是我正在考虑的选项：

1.拥有档案模型和账户模型。Profile 文档代表唯一的用户，而帐户提供用户名和密码（内部帐户）或来自 auth-provider（外部帐户）的身份验证数据。配置文件必须至少有一个**嵌套**的帐户文档。

```
var ExtAccountSchema = new Schema({
    type: String, // eg. twitter, facebook, native
    uid: String
});

var IntAccountSchema = new Schema({
    username: String,
    password: String
});

var ProfileSchema = new Schema({
    firstname: String,
    lastname: String,
    email: String,
    accounts: [Account] // Pushing all the accounts in there
}); 
```

我不喜欢它的是由不同的帐户数据导致的不太一致的帐户文档，以及当我的用户登录时我很难找到正确的帐户（在嵌套文档中搜索 uid 和帐户类型-.-）

2.将所有数据放在**一个模型中**

```
var ProfileSchema = new Schema({
    firstname: String,
    lastname: String,
    email: String,        
    twitter-uid: String,
    facebook-uid: String
    password: String
}); 
```

好吧，这很丑-.-找到正确的帐户数据可能更容易/更快，但维护起来并不好。

有更好的解决方案吗？**有最佳实践吗？**

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-21T22:10:44.063

1) 在 MongoDB 中构建数据可以采用三种策略：

*   a) 嵌入文档数组
*   b) 嵌入引用数组
*   c) 展开到父文档

策略 (a) 是您描述的第一个策略，其中 Profile 文档包含一组 Account 子文档。

策略 (b) 与策略 (a) 类似，但您将使用对其他文档（通常在 Account 集合中）的引用数组，而不是嵌入实际文档。

策略 (c) 是您将其描述为“在单个模型中拥有所有数据”的策略。

2) 通常认为最佳实践是使用一组嵌入式文档，尤其是在其中的信息可能不同的情况下。如果它会让您的生活更轻松，您可以使用密钥来区分帐户的类型，如下所示：

```
 { 
    firstname: 'Fred',
    lastname: 'Rogers',
    email: 'fred.rogers@example.com',

    accounts: [
             { kind: 'facebook',
               uid: 'fred.rogers'
             },
             { kind: 'internal',
               username: 'frogers',
               password: '5d41402abc4b2a76b9719d911017c592'
             },
             { kind: 'twitter',
               uid: 'fredr'
             }
          ]
    } 
```

3) MongoDB 允许您搜索嵌入的文档。因此，您将编写以下查询（JavaScript 语法）：

```
 db.profile.find( 
        { email: 'fred.rogers@example.com', 'accounts.kind': 'facebook' }
        ); 
```

使用适当的索引，此查询将非常快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-20T08:38:42.307

我希望它可以帮助像你一样有类似需求的人。

MongoDB 中的模式设计和数据建模

*   SQL 具有固定/严格模式，而 NoSQL 具有动态/灵活模式，即不强制执行文档结构

*   MongoDB有两种数据模型：

    *   ***嵌入式数据建模：***
        *   具有单一文档结构，被称为非规范化模型
        *   支持文档级原子操作。
        *   易于执行 CRUD
        *   用于 70% 的情况，并且对于读取操作具有高性能
        *   大小很容易达到其阈值 16 MB 并且容易出现高冗余
        *   推荐在一对一和一对多关系中
    *   ***参考或链接数据建模***：
        *   模仿 SQL 数据库的规范化表以减少数据重复和冗余。
        *   reference 或 _id 用于引用另一个文档，类似于使用主键和外键在 SQL 中连接表。
        *   用于 30% 的案例
        *   在多对多关系中推荐

## 数据建模的观点

*   概念数据建模：关于功能和服务的大图，其中还包括
    *   ER 数据建模：数据库设计的图形化方法。
    *   架构设计
*   逻辑数据建模：概念数据建模将使用编程语言、表格等转换为逻辑数据建模（程序）。（服务器代码）
*   物理数据建模：将逻辑 DM 付诸实践，实际数据由用户插入。（数据库）

## 数据模型的类型

*   平面、星形、分层、关系、对象关系

## 文档之间的模型关系

*   通常，您应该构建您的模式，以便您的应用程序在一次读取操作中接收所有所需的信息。

### 使用嵌入式文档建模一对一关系

```
 - In referenced or normalized data model, If one document is frequetly refering some data in another document, It would create better data model to embed both documents into one.
  - If a single document seems to be large, it is better split your data into referential model, the most frequently-accessed portion of the data should go in the collection that the application loads first
  ```json
  // one person and one address
  {
     _id: "joe",
     name: "Joe Bookreader",
     address: {
              street: "123 Fake Street",
              city: "Faketon",
              state: "MA",
              zip: "12345"
              }
  }
  ``` 
```

### 使用嵌入式文档建模一对多关系

*   在为其设计模型方面，它也基于与一对一相同的概念。

```
// one person and his multiple address
{
   "_id": "joe",
   "name": "Joe Bookreader",
   "addresses": [
               {
                  "street": "123 Fake Street",
                  "city": "Faketon",
                  "state": "MA",
                  "zip": "12345"
               },
               {
                  "street": "1 Some Other Street",
                  "city": "Boston",
                  "state": "MA",
                  "zip": "12345"
               }
            ]
} 
```

### 使用参考文档建模一对多关系

*   在某些情况下，最好使用参考模型来获得更好的性能，如下所示。
*   为避免出版商数据重复，请使用参考资料并将出版商信息保存在与图书收藏不同的收藏中。

```
 {
   _id: 'some string'
   name: "O'Reilly Media",
   founded: 1980,
   location: "CA",

   books: [123456789, 234567890, ...]

   }

   {
      _id: 123456789,
      title: "MongoDB: The Definitive Guide",
      author: [ "Kristina Chodorow", "Mike Dirolf" ],
      published_date: ISODate("2010-09-24"),
      pages: 216,
      language: "English"
   }

   {
      _id: 234567890,
      title: "50 Tips and Tricks for MongoDB Developer",
      author: "Kristina Chodorow",
      published_date: ISODate("2011-05-06"),
      pages: 68,
      language: "English"
   } 
```

*   如果将来书籍数组有可能变得庞大，最好将出版商引用存储在书籍文档中。
*   观察架构中的智能变化，`_id`信息（即出版商 ID）如何在 BOOK COLLECTION 中被称为`publisher_id`.

```
 {
   _id: "oreilly",
   name: "O'Reilly Media",
   founded: 1980,
   location: "CA"
   }

   {
      _id: 123456789,
      title: "MongoDB: The Definitive Guide",
      author: [ "Kristina Chodorow", "Mike Dirolf" ],
      published_date: ISODate("2010-09-24"),
      pages: 216,
      language: "English",

      publisher_id: "oreilly"

   }

   {
      _id: 234567890,
      title: "50 Tips and Tricks for MongoDB Developer",
      author: "Kristina Chodorow",
      published_date: ISODate("2011-05-06"),
      pages: 68,
      language: "English",

      publisher_id: "oreilly"

   } 
```

# sql-server-2008 - 查找上周日日期算法

> ID：11101958
> 
> 赞同：6
> 
> 时间：2012-06-19T13:26:52.507
> 
> 标签：sql-server-2008, tsql, date

我在网上找到了几个例子，但我不太明白它是如何工作的。例如

```
 SELECT DATEADD(ww, DATEDIFF(ww,0,GETDATE()), 0) 
```

我什至不确定它是否符合我的要求。

我需要的是，执行查询时，它可以`SELECT * from xTable WHERE xDate`在两个日期之间。上周日和下周日（当前周）。我可以用什么来自动找到它？请解释一下，因为我是 SQL 新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:47:16.693

我更深入地试图理解这个查询

```
 SELECT DATEADD(ww, DATEDIFF(ww,0,GETDATE()), 0) 
```

并用它来检索前一个星期一。现在我可以简单地`DATEADD`多花 6 天来获得一个完整的一周。

我使用的解决方案：

```
 Set @Monday =  DATEADD(ww, DATEDIFF(ww,0,GETDATE()), 0)
       Set @Sunday =  DATEADD(dd, 06, @Monday) 
```

问题解决了。

# asp.net-mvc-3 - 在 Web 表单 (iframe) 中验证 MVC 应用程序

> ID：11101959
> 
> 赞同：2
> 
> 时间：2012-06-19T13:26:54.770
> 
> 标签：asp.net-mvc-3, authentication, iframe, webforms

快速的问题（如果已经被问过，很抱歉，我已经看过但找不到）。

我有一个 webforms 应用程序，它有一个包含 iframe 并提供 MVC 页面的页面。

我需要在 Web 应用程序中进行登录身份验证，并检查我们已通过身份验证的 MVC 应用程序（我确信有更好的方法，但遗憾的是它已经是这样了，改变它不是我的工作）。

我知道各种软糖可以使这项工作，但是有没有一种很好/正确的方法来实现这一点？

提前致谢

达兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:17:44.613

假设 WebForms 和 MVC 应用程序位于不同的解决方案中，但部署到同一台服务器上，

1.  确保您的身份验证机制使用 FormsAuthentication。

2.  将 WebForms 和 MVC 应用程序放在同一个域上，即 example.com

3.  编辑两个应用程序的 Web.config 并设置`<system.web><machineKey>`为相同的值。您可以通过[http://www.insitesystems.com/services/machine-key-generator.html生成机器密钥](http://www.insitesystems.com/services/machine-key-generator.html)

    - 或者 -

    省略 web.config 的 machineKey 以从服务器上的父 web.config 或 machine.config 继承。（从未测试过这个）

4.  使用相同的`<membership>`和`<authentication>`设置。拥有相同的会员设置允许您从两个应用程序登录，因为用户的密码存储在同一个数据库中。具有相同的身份验证设置可确保提交相同的身份验证 cookie，无论它是发送到 WebForms 还是 MVC

5.  将以下内容添加到您的 MVC 控制器以输出 P3P 标头以强制 IE 接受 IFRAME 内的 cookie。请自定义该值，因为您的隐私政策很可能与我的不同。有关详细信息，请参见[http://www.p3pwriter.com/LRN_111.asp](http://www.p3pwriter.com/LRN_111.asp)。（或者，将它放在一个基础 Controller 类中并从所有控制器继承它。）

    ```
    protected override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        filterContext.HttpContext.Response.AddHeader("P3P", @"CP=""CAO PSD OUR CUR""");
        base.OnActionExecuted(filterContext);
    } 
    ```

**编辑**

第二个想法，不需要第 5 步，因为主文档和 iframe 都来自同一个域。因此，cookie 应被视为第一方，而不是第三方（被 IE 阻止）。

# java - 如何计算耶拿猫头鹰类的人数？

> ID：11101961
> 
> 赞同：1
> 
> 时间：2012-06-19T13:27:02.990
> 
> 标签：java, jena, ontology, owl

我正在使用 Jena 自动实例化 OWL 模型。因为每个人都需要一个唯一的标识符。

我怎么知道给定 OWL 类的个体数量，以便`id`为下一个个体在这个类中实例化生成一个新的？

我已经尝试使用以下 Jena Java 代码，方法`listIndividuals`是 Here It is，但它不起作用。

```
import com.hp.hpl.jena.ontology.*;
import com.hp.hpl.jena.model.*;
import com.hp.hpl.jena.util.iterator.ExtendedIterator;

public static int individualSize(Resource res){

        int size = 0;

        ExtendedIterator<Individual> individuals = domainModel.listIndividuals(res);

        while (individuals.next() != null){ size++; }

        return size;
}

static String xmlbase = "http://www.semantic.org/ontologies/exemple.owl#";
OntModel domainModel = ModelFactory.createOntologyModel(ProfileRegistry.OWL_DL_LANG);
domainModel.read((new FileInputStream(ontoInPath)), null);

int nextId = individualSize(domainModel.getOntClass(xmlbase+"Event"));

System.out.print(nextId); 
```

错误是：

```
Exception in thread "main" java.util.NoSuchElementException
    at com.hp.hpl.jena.util.iterator.NiceIterator.ensureHasNext(NiceIterator.java:37)
    at com.hp.hpl.jena.util.iterator.UniqueExtendedIterator.next(UniqueExtendedIterator.java:77)
    at soctrace.Intology.individualSize(Intology.java:225)
    at soctrace.Intology.manageOntologies(Intology.java:124)
    at soctrace.Intology.main(Intology.java:65) 
```

有没有什么方法`Jena API`可以帮助我更轻松地做到这一点？

如果不 ！我怎么能更正我的代码。

感谢您的回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:51:32.040

你的代码：

```
while (individuals.next() != null){ size++; } 
```

不是使用迭代器的正确方法，你想要的是：

```
while (individuals.hasNext()) {
  size++;
  individuals.next();
} 
```

如果 Model.read 还没有这样做，您可能还想关闭该 FileInputStream。

此外，如果您计划使用 OWL，您将需要考虑使用[OWLAPI](http://owlapi.sourceforge.net/)，它是一个以 OWL 为中心的 Java API。Jena 很棒，但它更多地以 RDF/triples 为中心，这使得用于真正的基于 OWL 的应用程序变得很麻烦（至少在我的经验中）。如果您要在应用程序中进行大量推理，您可能还想考虑使用专用的 OWL 推理器，例如[HermiT](http://www.hermit-reasoner.com/)或[Pellet 。](http://clarkparsia.com/pellet)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:47:38.267

如果我做的数学正确，那么无论如何你都会有一个错误。尝试：

```
public static int individualSize(Resource res){

    int size = 0;
    ExtendedIterator<Individual> individuals = domainModel.listIndividuals(res);

    while(individuals.hasNext()) {
        individuals.next();
        size++;
    }
    return size;
} 
```

# html - 固定页脚高度

> ID：11101966
> 
> 赞同：0
> 
> 时间：2012-06-19T13:27:28.153
> 
> 标签：html, css, height, footer

我需要有关保持页脚高度固定的帮助。内容丰富，页面长，页脚为10px。但是在登录页面或短页面时，它会变得更大。[（预览）](http://www.1907.net/images/Gelsor.png)我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:36:12.377

您的页脚不会变得更大！只是因为您的登录页面（和其他一些页面）的内容很少（不如您网站其他页面上的内容多），所以您的页脚似乎被破坏并出现了！
因此，您应该将页脚固定在页面底部。看看这个[http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)

# java - 每个用户在 Liferay 中可以有不同的布局吗？

> ID：11101967
> 
> 赞同：2
> 
> 时间：2012-06-19T13:27:30.700
> 
> 标签：java, liferay, portlet

我是 Liferay 的新手，目前我（作为管理员）设置可见的 portlet 及其在页面上的位置。首先，只有我可以更改布局。其次，所有用户都看到相同的布局。这不正是我想要的。

在 Liferay 6.1.0 中是否有可能让门户的每个用户都能够设置她自己的 portlet 组合（包括*哪些*portlet，以及它们应该在*哪里显示）？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T18:32:21.647

页面自定义是 Liferay 6.1 中的一个新功能。使用页面自定义，任何用户都可以创建启用了自定义的任何公共页面的个性化版本。自定义基于页面布局的行和列。管理员可以激活或停用任何页面上任何行或列的自定义。当用户自定义页面时，他们可以选择使用他们的版本或页面的默认版本。用户不能看到除了他们自己的页面的替代版本。

当管理员为页面激活页面定制时，可定制行或列中的任何 portlet 都可以在页面周围移动或从页面中移除。用户可以将他们自己选择的新 portlet 添加到页面中。如果用户在任何时候确定他们不喜欢他们的自定义，他们可以单击重置我的自定义将他们的页面恢复为默认值。

[http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/page-creation-and-manageme-3](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/page-creation-and-manageme-3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T15:05:03.733

是的，每个用户很可能在 Liferay 中有不同的布局。但是，您需要为此创建一个用户页面。

Liferay 支持用户个性化，这意味着每个用户都可以拥有自己的网站，公共或私人页面。

如果您正在使用 Liferay 的 vanilla 实例，那么您可能会注意到在 admin/liferay 停靠栏中，每个用户都可以选择自己的一组公共/私人页面。

用户可以修改、添加portlet、更改布局甚至更改主题。

但，

如果您想在某个公共页面上执行所有这些操作，那么该页面将不常见，在这种情况下，您可能必须在每次使用时创建该特定页面的副本。

# c# - 我应该选择：这是一个完全信任的应用程序

> ID：11101977
> 
> 赞同：8
> 
> 时间：2012-06-19T13:28:02.163
> 
> 标签：c#, .net, visual-studio, visual-studio-2010, security

我在 Visual Studio 2010 中开发应用程序，我的应用程序一直连接到互联网。我应该`This is a full trust application`在安全选项卡中激活吗？

如果是，它到底是什么意思？我正在阅读 msdn 文档，但我无法理解。我需要一些简短的信息来说明何时使用此功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T08:18:18.830

别担心，它不会影响您的 Internet 连接的安全性，但会影响 .NET 框架如何处理您的应用程序。所以 - 是的，您可以毫无危险地激活它，但如果可能，您应该在代码中声明您的应用程序需要哪个级别的访问来改进安全性。解释细节：

**完全信任**意味着您的应用程序需要 .NET 框架提供的所有权限。作为开发人员，您声明应用程序需要哪个信任级别才能运行，这称为**“代码访问安全性”。** 代码访问安全性意味着您通过属性告诉编译器您的代码需要哪种操作才能成功。

**.NET 框架**反过来估计应该授予应用程序多少信任：例如，如果您将应用程序部署到远程计算机，可以通过 Intranet 外部的网络共享访问它*），那么 .NET 框架会给予它小于“完全信任”。这被称为**“基于证据”的安全模型，**它通过所谓的**托管代码**实现。

**托管代码**意味着您的 .NET 应用程序由“Roslyn”-编译器编译成MSIL （**微软****的****[中间](https://github.com/dotnet/roslyn/wiki/Roslyn%20Overview)****语言****）**，然后**“**及时”（即当您执行它时，除非您选择[创建本地代码在](https://msdn.microsoft.com/en-us/library/ht8ecch6(v=vs.100).aspx)[执行](https://msdn.microsoft.com/en-us/library/ht8ecch6(v=vs.100).aspx)[**之前**](https://msdn.microsoft.com/en-us/library/ht8ecch6(v=vs.100).aspx)[通过 NGEN 显式地通过](https://msdn.microsoft.com/en-us/library/ht8ecch6(v=vs.100).aspx)**[“RyuJIT”-Compiler](https://blogs.msdn.microsoft.com/dotnet/2018/06/19/the-ryujit-transition-is-complete/?utm_source=vs_developer_news&utm_medium=referral)**转换为特定于 CPU 的机器语言。这允许建立一个额外的抽象层，从而使 .NET Framework 能够控制您的代码执行的操作并允许它或（如果不是）引发安全异常。********[](https://msdn.microsoft.com/en-us/library/ht8ecch6(v=vs.100).aspx)********

 ********您使用 C# 或 VB.NET 中的一种语言为 .NET 框架编写的所有代码默认都是托管代码。但是，在某些（非常罕见的）情况下，您想要嵌入**非托管代码**- 也称为“不安全代码”（在 .NET 术语中）。一种方法是在您的代码中创建一个“不安全”部分（我在这里仅提及完整性 - 即以防您可能在源代码中遇到它）。

正如我之前提到的，您可以通过属性指定代码的作用，但您也可以更改适用于本地计算机的规则，以通过**.NET 安全设置更改此行为。** 通常最好尽可能精确地指定您的应用程序需要哪些权限，并尽可能限制。

如果您有兴趣，可以在此处找到更多信息： [探索 .NET Framework 安全模型](http://msdn.microsoft.com/en-us/magazine/ee677170.aspx)

*) 谢谢你的提示，达米安！实际上，该框架的早期版本对网络（网络共享）上的资源的信任度较低，而 .NET 4 桌面和本地 Intranet 连接具有完全信任。********

# iphone - 获取联系人列表并检查联系人是否像 WhatsApp 一样安装了应用程序

> ID：11101979
> 
> 赞同：1
> 
> 时间：2012-06-19T13:28:04.783
> 
> 标签：iphone, ios, installation, contacts

我正在开发一个创建用户个人资料的应用程序。我需要能够从我的联系人中查看谁安装了该应用程序，以便我能够授予他们访问我的个人资料并查看他们的个人资料的权限。

如何获取完整的联系人列表，确定我的电话号码以创建我的帐户，并检查联系人中有多少人安装了该应用程序？（类似于 WhatsApp 的做法）

我知道可以使用 Apple API 获取联系人列表，但我是否必须将所有信息发送到服务器以检查他们是否安装了应用程序？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:33:24.113

是的，您必须将数据发送到服务器。首先，您会询问用户他们的号码，然后上传联系人列表，并将该列表与您服务器上已有的用户进行比较。

我建议您不要将数字本身传输到您的服务器，或者加密数据传输，或者在发送/存储之前使用哈希函数之类的东西，以确保它们对您的用户具有一定的隐私/安全性。

# c# - 在运行时将网格添加为 ListBox 的项目会导致未知错误/崩溃

> ID：11101991
> 
> 赞同：0
> 
> 时间：2012-06-19T13:28:41.790
> 
> 标签：c#, windows-phone-7, listbox, grid

在下面的代码中，我试图...

1.  在 Grid(mygrid) 内放置一个 TextBlock(txtDays) （作为行）
2.  将 Grid 放在 ListBox(lsBox) 内
3.  最后将 ListBox 放入另一个 Grid(ContentPanel)

该程序只是在没有适当错误的情况下崩溃，并且当我执行此代码时模拟器停止。如果我将 Grid（在 2.中）放置在 stackPanel 中或直接放入另一个 Grid（在 3.中）而不将其放置在 ListBox 中，则代码有效，但不适用于 ListBox。

任何意见，帮助表示赞赏。

谢谢你。

```
 private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
        string[] lstDays = new string[] { "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday" };

        //Creating a ListBox
        ListBox lstBox = new ListBox();
        //Grid definition
        Grid mygrid = new Grid();
        ColumnDefinition c1 = new ColumnDefinition(); //creating a column
        mygrid.ColumnDefinitions.Add(c1);

        int i = -1;
        foreach (string item in lstDays)
        {
            i += 1;
            TextBlock txtDays = new TextBlock(); //Creating a TextBlock

            RowDefinition r1 = new RowDefinition(); //Creating a row
            mygrid.RowDefinitions.Add(r1);

            txtDays.Text = item;
            txtDays.TextAlignment = TextAlignment.Left;
            if (item == "Thursday")
            {
                txtDays.TextAlignment = TextAlignment.Right;
                txtDays.Foreground = new SolidColorBrush(Colors.Green);
            }

            mygrid.Children.Add(txtDays); //Adding the TextBlock into the grid
            Grid.SetRow(txtDays,i);       //Placing the item in a particular row inside the grid          
            lstBox.Items.Add(mygrid);     //Placing grid inside a listBox (ERROR here)

        }

        RowDefinition rNewRow = new RowDefinition();
        ContentPanel.RowDefinitions.Add(rNewRow);
        ContentPanel.Children.Add(lstBox);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:56:33.810

修复错误后的代码。对于初学者来说，这是一段很好的代码。

```
public partial class MainPage : PhoneApplicationPage
{
    // Constructor
    public MainPage()
    {
        InitializeComponent();
    }

    private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
        string[] lstDays = new string[] { "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday" };

        //Creating a ListBox
        ListBox lstBox = new ListBox();

        foreach (string item in lstDays)
        {
            //Grid definition
            Grid mygrid = new Grid();
            mygrid.Width = 400;
            ColumnDefinition c1 = new ColumnDefinition(); //creating a column
            c1.Width = new GridLength(200);
            mygrid.ColumnDefinitions.Add(c1);

            RowDefinition r1 = new RowDefinition(); //Creating a row
            mygrid.RowDefinitions.Add(r1);

            TextBlock txtDays = new TextBlock(); //Creating a TextBlock
            txtDays.Text = item;
            txtDays.TextAlignment = TextAlignment.Left;
            if (item == "Thursday")
            {
                txtDays.TextAlignment = TextAlignment.Right;
                txtDays.Foreground = new SolidColorBrush(Colors.Green);
            }

            mygrid.Children.Add(txtDays); //Adding the TextBlock into the grid
            Grid.SetRow(txtDays,0);       //Placing the item in a particular row inside the grid          

            lstBox.Items.Add(mygrid);     //Placing grid inside a listBox    
        }

        RowDefinition rNewRow = new RowDefinition();
        ContentPanel.RowDefinitions.Add(rNewRow);
        ContentPanel.Children.Add(lstBox);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:34:05.607

您正在尝试`mygrid`在`lstBox`每次`foreach`迭代中添加。带`lstBox.Items.Add(mygrid);`出循环，使其仅添加一次。

`mygrid`如果你想要多个网格，要么将定义放在循环内。

# php - 路由前通过 MySQL 值设置 base_url

> ID：11101994
> 
> 赞同：1
> 
> 时间：2012-06-19T13:28:55.967
> 
> 标签：php, codeigniter, url-routing

在 CodeIgniter 的执行中是否有任何一点我可以通过 MySQL 从 MySQL 获取数据`HTTP_HOST`并使用和设置`base_url`检索到的数据以便强制执行正确的路由？

`post_controller_constructor`当我只使用*sub.domain.com*和*domain.com*时，我在钩子事件下运行它没有任何问题，但是当我希望`base_url`作为*domain.com/folder/*时出现这个问题。

我的 Codeigniter 已经决定要加载哪个控制器，并且更改`base_url`并不能解决它。

据我所知，我不能在钩子事件之前执行 MySQL 命令`post_controller_constructor`，我想我必须能够这样做，因为`base_url`应该在路由发生之前设置。

所以基本上，有没有任何有效的方法可以在执行中间重新路由，或者在路由发生之前运行 mysql？

[**CodeIgniter 钩子**](http://codeigniter.com/user_guide/general/hooks.html)

**更新**
好像我走错了路。

这是场景：

我有一个 CodeIgniter 包/集。目前我通过多个域和子域使用它。我的 CodeIgniter 基于`HTTP_HOST`. 我已经让它也加载相关的配置文件，以防它包含域的文件夹。问题是发生路由并将文件夹视为控制器/路由的一部分而不是base_url。

使用地址*http://domain.com/folder/admin*我希望`admin`加载控制器（内部`controllers/`），而不是控制器`folder`。

在某种程度上，我想得出结论，base_url 的整个部分将在路由过程中被排除。

它类似于`$route['\w+/(.+)'] = '$1';`但基于 MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:34:24.593

`base_url`与路由无关，只有 URL。

您可以使用`pre_controller`钩子、`post_controller_constructor`钩子或在基本控制器`__construct`（例如`MY_Controller`）中运行它。

这很容易：

```
// Fetch base_url from database...
$this->config->set_item('base_url', $new_base_url); 
```

`base_url()`从 CI 数组中读取等功能`$config`，因此您可以随时更改它。