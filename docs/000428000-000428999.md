# StackOverflow 问答 000428000-000428999

# c# - 下拉列表填充相同的列表项

> ID：428001
> 
> 赞同：2
> 
> 时间：2009-01-09T13:15:43.943
> 
> 标签：c#, gridview, .net-2.0

我有一个 Gridview，其中有两个下拉列表的模板字段。我在运行时将它们与相同的列表项绑定。

```
li = new listitem ("1","1");
dl1.items.add(li);
dl2.items.add(li);

li = new listitem ("2","2");
dl1.items.add(li);
dl2.items.add(li);

li = new listitem ("3","3");
dl1.items.add(li);
dl2.items.add(li);

dl1.selectedvalue = "2";
dl2.selectedvalue = "3"; 
```

执行上述操作后，dl1 和 dl2 都显示“3”作为选定值。为什么？

我知道在绑定时使用 2 个不同的列表项的工作，但我想知道为什么会发生上述情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T13:23:34.350

只看代码的最后一部分：你有一个列表项，它出现在两个不同的列表中。但它仍然是一个对象。您如何期望一个对象对单个属性 (SelectedValue) 有两个不同的值？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T13:20:31.220

您必须为每个下拉列表实例化每个列表项。

```
ListItem li1 = new ListItem("1","1");
dl1.items.add(li1);

ListItem li2 = new ListItem("1", "1");
dl2.items.add(li2); 
```

**编辑：** 乔恩描述了我想要表达的意思。您只有一个具有价值的对象。所以不要期望每个下拉列表都有不同的值。

当您将 dl1 设置为“3”时，它们都将获得相同的值，因为两个下拉列表都引用同一个对象！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T13:23:44.770

ListItem 类有一个属性“Selected”，用于标记项目是否被选中。我还没有检查 DDL SelectedValue 属性以查看它的作用，但我猜测 ListItem.Selected 属性被设置为 true，并且由于您在两个下拉列表中使用相同的对象，它被标记在两者中都“选择”。

我确定如果这是一个多选列表，“2”和“3”都会被标记为“已选择”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T13:21:51.310

我认为这将是一个参考与价值的问题。如果从同一个列表项中添加它们，我确信 d1 和 d2 都将指向内存中的同一个位置......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T13:23:41.197

listitem 正在两个下拉列表中共享。当您为下拉菜单之一设置选定的值时，它会将列表项设置为被选中。由于列表项正在共享，因此它在两个下拉列表中都被选中

# ruby - 运行 Merb 0.9.3 时方法重新定义警告

> ID：428004
> 
> 赞同：0
> 
> 时间：2009-01-09T13:17:10.557
> 
> 标签：ruby, merb

在 Merb 0.9.3 下运行应用程序时，我收到许多“方法重新定义”警告。当然，只有当我使用 ruby​​ -w 选项运行我的脚本时，我才会得到这个。有什么方法可以摆脱一次又一次重新定义（重复加载文件）的方法？

这在 Merb 1 中解决了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-09T13:49:10.443

我不知道您的问题，但 Merb 1.0 对我来说非常有用。我还建议使用最新版本，即使从 1.0.x 开始也修复了一些错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-25T10:27:23.527

您是否收到警告可能取决于您使用的 ruby​​ 版本或警告级别，如[本 gist](http://gist.github.com/217992)所示。

或者也许他们修复了 0.93 和 1.0 之间的东西。

# php - 对于临时/循环存储，例如会话管理，最好/最快的 MySQL 表模式是什么？

> ID：428012
> 
> 赞同：3
> 
> 时间：2009-01-09T13:22:39.670
> 
> 标签：php, mysql, sql, performance, session

在为一个非常动态的网站编写自定义 MySQL 数据库驱动的 PHP 会话管理时，您的会话表的最佳（最快读/写访问）结构是什么？

不好的例子（未优化）：

```
创建表`会话`（
    `session_id` VARCHAR(32) NOT NULL,
    `session_data` TEXT NOT NULL,
    `t_created` 日期时间不为空，
    `t_updated` 日期时间不为空，
    主键（`session_id`）
) 引擎=INNODB 默认字符集=utf8；

```

我认为使用内存引擎会更好/更快，但我不确定。我想不出用英语解释一切的好方法，所以我列出了我认为很重要的要求/细节：

细节：

*   类别：优化
*   子类别：MySQL 查询性能
*   目标：最快的随机访问表模式和单行查询
*   常见用途：自定义会话管理、临时存储
*   操作系统：*nix，更具体地说：Centos 5+（在 x86_64 上）
*   数据库：MySQL 版本：5+（社区版）

结果：

*   SQL 查询：创建表
*   SQL Query: Select Single Row by Random Key (eg PHP session id)
*   SQL 查询：使用随机键插入单行（例如 PHP 会话 id）
*   SQL 查询：通过随机键更新单行（例如会话 id）
*   SQL 查询：按时间戳删除多行（垃圾收集，例如过期会话）

预期的行寿命（例如会话持续时间）：

*   30%：0s-30s
*   20%：30s-5m
*   30%：5m-1h
*   20%：1h-8h

预期行数（例如活动会话）：

*   低：128
*   中：1024
*   高：100000

如果有人能想到更好的方式来表达这一切，请随时编辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-10T01:16:32.023

Have you considered use [memcached](http://php.net/manual/en/ref.memcache.php) or [APC](http://php.net/apc) for the session data? These would almost certainly be much faster than any RDBMS solution.

Another suggestion if you are set on using MySQL: instead of the MEMORY storage engine, just enable plenty of memory to the various cache buffers. That way the data will be durable, transparently backed by disk storage, but available quickly when it's in use.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T00:12:00.687

你的直觉似乎是对的。我建议按如下方式创建表：

```
CREATE TABLE session (
  id CHAR(32) NOT NULL,
  data BLOB NOT NULL,
  t_created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  t_updated TIMESTAMP,
  PRIMARY KEY (session_id),
  INDEX t_created(t_created),
  INDEX t_updated(t_updated)
)
ENGINE = MEMORY
CHARACTER SET utf8; 
```

笔记：

*   id - 当您知道内容的长度时，CHAR 会更便宜
*   data - BLOB (Binary Large OBject) 在这里更适用，因为您可能存储的不是 TEXT。
*   t_created 和 t_updated - TIMESTAMP - 计算速度更快，尽管您被限制在 1901-2038 的时间范围内，但这对于这个应用程序来说应该没问题。
*   t_created 和 t_updated 上的 INDEX 占用大量内存且并非完全必要，但在通过这些列进行查询时，它们确实有助于提高性能。
*   MEMORY 表虽然速度非常快，但也有其局限性。如果您的 mysqld 重新启动，所有数据都将丢失。

*Side note:* I'm not sure how you plan to garbage-collect your sessions, but if you're expecting 50% of your sessions to be under 5 minutes, how is an end-of-session defined? Must a user/client explicitly end their session (via logging out)? If you implicitly end sessions that quickly, your users may have a very rough time with your website.

# c++ - 正则表达式替换：到“：”等

> ID：428013
> 
> 赞同：5
> 
> 时间：2009-01-09T13:22:44.197
> 
> 标签：c++, regex, boost, ascii, ncr

我有一堆字符串，例如：

```
"Hello, here's a test colon&#58;. Here's a test semi-colon&#59;" 
```

我想用

```
"Hello, here's a test colon:. Here's a test semi-colon;" 
```

对于所有[可打印的 ASCII 值](http://www.w3schools.com/tags/ref_ascii.asp)，依此类推。

目前我正在使用[`boost::regex_search`](http://www.boost.org/doc/libs/1_37_0/libs/regex/doc/html/boost_regex/ref/regex_search.html)to match `&#(\d+);`，在依次处理每个匹配项时构建一个字符串（包括附加自我找到的最后一个匹配项以来不包含任何匹配项的子字符串）。

任何人都可以想到更好的方法吗？我对非正则表达式方法持开放态度，但在这种情况下，正则表达式似乎是一种相当明智的方法。

谢谢，

多姆

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-09T13:56:10.260

使用正则表达式的最大优势是处理棘手的情况，例如`&#38;#38;`实体替换不是迭代的，它是一个步骤。正则表达式也将相当有效：两个前导字符是固定的，因此它会快速跳过不以 . 开头的任何内容`&#`。最后，正则表达式解决方案对未来的维护者来说没有太多惊喜。

我会说正则表达式是正确的选择。

不过，它是最好的正则表达式吗？你知道你需要两位数字，如果你有 3 位数字，第一个数字将是 1。可打印的 ASCII 毕竟是`&#32;-&#126;`。因此，您可以考虑`&#1?\d\d;`.

至于替换内容，我将使用[为 boost::regex::replace 描述的基本算法](http://www.boost.org/doc/libs/1_37_0/libs/regex/doc/html/boost_regex/ref/regex_replace.html)：

```
For each match // Using regex_iterator<>
    Print the prefix of the match
    Remove the first 2 and last character of the match (&#;)
    lexical_cast the result to int, then truncate to char and append.

Print the suffix of the last match. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T14:54:40.907

这可能会为我赢得一些反对票，因为这不是 c++、boost 或 regex 响应，但这是一个 SNOBOL 解决方案。这个适用于 ASCII。我正在为 Unicode 做一些事情。

```
 NUMS = '1234567890'
MAIN    LINE = INPUT                                :F(END)
SWAP    LINE ?  '&#' SPAN(NUMS) . N ';' = CHAR( N ) :S(SWAP)
        OUTPUT = LINE                               :(MAIN)
END 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T18:42:17.577

```
* Repaired SNOBOL4 Solution
* &#38;#38; -> &#38;
     digit = '0123456789'
main line = input                        :f(end)
     result = 
swap line arb . l
+    '&#' span(digit) . n ';' rem . line :f(out)
     result = result l char(n)           :(swap)
out  output = result line                :(main)
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T13:31:00.420

我不知道 boost 中的正则表达式支持，但请检查它是否具有支持回调或 lambda 等的 replace() 方法。这是我想说的其他语言的正则表达式的常用方法。

这是一个 Python 实现：

```
s = "Hello, here's a test colon&#58;. Here's a test semi-colon&#59;"
re.sub(r'&#(1?\d\d);', lambda match: chr(int(match.group(1))), s) 
```

生产：

```
"Hello, here's a test colon:. Here's a test semi-colon;" 
```

我现在看过一些 boost，我发现它有一个 regex_replace 函数。但是 C++ 真的让我很困惑，所以我不知道你是否可以对替换部分使用回调。但是，如果我正确阅读了 boost 文档，则 (\d\d) 组匹配的字符串应该在 $1 中可用。如果我使用boost，我会检查一下。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T21:53:21.233

由于只有一个“&”，现有的 SNOBOL 解决方案不能正确处理多模式情况。以下解决方案应该更好地工作：

```
 dd = "0123456789"
        ccp = "#" span(dd) $ n ";" *?(s = s char(n)) fence (*ccp | null)
   rdl  line = input                              :f(done)
   repl line "&" *?(s = ) ccp = s                 :s(repl)
        output = line                             :(rdl)
   done
   end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-09T23:57:27.330

你知道，只要我们离开这里，perl 替换就有一个 'e' 选项。如*评估表达式*。例如

> echo "你好，这里是一个测试冒号:。这里是一个测试分号;
> 进一步测试&#65;.abc.~.def。"
> | perl -we 'sub translate { my $x=$_[0]; if ( ($x >= 32) && ($x <= 126) )
> { return sprintf("%c",$x); } else { return "&#".$x.";"; } }
> while (<>) { s/&#(1?\d\d);/&translate($1)/ge; 打印; }'

漂亮的打印：

```
#!/usr/bin/perl -w

sub translate
{
  my $x=$_[0];

  if ( ($x >= 32) && ($x <= 126) )
  {
    return sprintf( "%c", $x );
  }
  else
  {
    return "&#" . $x . ";" ;
  }
}

while (<>)
{
  s/&#(1?\d\d);/&translate($1)/ge;
  print;
} 
```

虽然 perl 是 perl，但我确信有更好的方法来编写它......

* * *

回到 C 代码：

你也可以滚动你自己的有限状态机。但是以后维护起来会变得混乱和麻烦。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-10T16:25:19.163

这是另一个 Perl 的单行代码（请参阅[@mrree 的回答](https://stackoverflow.com/questions/428013/regex-replacing-58-to-etc#430191)）：

*   一个测试文件：

```
$猫ent.txt
你好，这是一个测试冒号:。
这是一个测试分号; ''

```

*   单线：

```
$ perl -pe's~&#(1?\d\d);~
> sub{ return chr($1) if (31 < $1 && $1 < 127); $& }->()~eg' ent.txt

```

*   或使用更具体的正则表达式：

```
$ perl -pe"s~&#(1(?:[01][0-9]|2[0-6])|3[2-9]|[4-9][0-9]); ~chr($1)~eg" ent.txt

```

*   两个单行产生相同的输出：

```
你好，这是一个测试冒号：。
这是一个测试分号；''

```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-21T15:23:24.277

[boost::spirit](http://www.boost.org/doc/libs/1_37_0/libs/spirit/classic/doc/introduction.html)解析器生成器框架允许轻松创建转换所需[NCR](http://en.wikipedia.org/wiki/Numeric_character_reference)的解析器。

```
// spirit_ncr2a.cpp
#include <iostream>
#include <string>
#include <boost/spirit/include/classic_core.hpp>

int main() {
  using namespace BOOST_SPIRIT_CLASSIC_NS; 

  std::string line;
  while (std::getline(std::cin, line)) {
    assert(parse(line.begin(), line.end(),
         // match "&#(\d+);" where 32 <= $1 <= 126 or any char
         *(("&#" >> limit_d(32u, 126u)[uint_p][&putchar] >> ';')
           | anychar_p[&putchar])).full); 
    putchar('\n');
  }
} 
```

*   编译：

```
    $ g++ -I/path/to/boost -o spirit_ncr2a spirit_ncr2a.cpp

```

*   跑：

```
    $ echo "你好，这里是一个测试冒号:。" | 精神_ncr2a

```

*   输出：

```
    “你好，这是一个测试冒号：。” 

```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-09T13:53:45.083

我确实认为我很擅长正则表达式，但我从未见过在正则表达式中使用过 lambda，请赐教！

我目前正在使用 python，并且会用这个 oneliner 解决它：

```
''.join([x.isdigit() and chr(int(x)) or x for x in re.split('&#(\d+);',THESTRING)]) 
```

这有任何意义吗？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-11T20:08:32.503

这是使用[Flex](http://www.gnu.org/software/flex/ "Flex（快速词法分析器）")创建的 NCR 扫描仪：

```
/** ncr2a.y: Replace all NCRs by corresponding printable ASCII characters. */
%%
&#(1([01][0-9]|2[0-6])|3[2-9]|[4-9][0-9]); { /* accept 32..126 */
  /**recursive: unput(atoi(yytext + 2)); skip '&#'; `atoi()` ignores ';' */
  fputc(atoi(yytext + 2), yyout); /* non-recursive version */
} 
```

制作可执行文件：

```
$ flex ncr2a.y
$ gcc -o ncr2a lex.yy.c -lfl 
```

例子：

```
$ echo "Hello, &#12; here's a test colon&#58;. 
> Here's a test semi-colon&#59; '&#131;'
> &#38;#59; <-- may be recursive" \
> | ncr2a 
```

它为非递归版本打印：

```
你好，这是一个测试冒号：。
这是一个测试分号；''
; <-- 可能是递归的

```

递归的产生：

```
你好，这是一个测试冒号：。
这是一个测试分号；''
; <-- 可能是递归的

```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-18T17:27:24.467

这是原始问题陈述显然不是很完整的情况之一，但如果您真的只想触发产生 32 到 126 之间字符的情况，那对我之前发布的解决方案来说是一个微不足道的改变。请注意，我的解决方案还处理多模式情况（尽管第一个版本不会处理某些相邻模式在范围内而其他模式不在范围内的情况）。

```
 dd = "0123456789"
      ccp = "#" span(dd) $ n *lt(n,127) *ge(n,32) ";" *?(s = s char(n))
 +      fence (*ccp | null)
 rdl  line = input                              :f(done)
 repl line "&" *?(s = ) ccp = s                 :s(repl)
      output = line                             :(rdl)
 done
 end 
```

处理这种情况并不是特别困难（例如 ;#131;#58; 也会产生“;#131;:”：

```
 dd = "0123456789"
      ccp = "#" (span(dd) $ n ";") $ enc
 +      *?(s = s (lt(n,127) ge(n,32) char(n), char(10) enc))
 +      fence (*ccp | null)
 rdl  line = input                              :f(done)
 repl line "&" *?(s = ) ccp = s                 :s(repl)
      output = replace(line,char(10),"#")       :(rdl)
 done
 end 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-21T01:13:44.010

这是一个基于[`boost::regex_token_iterator`](http://www.boost.org/doc/libs/1_37_0/libs/regex/doc/html/boost_regex/ref/regex_token_iterator.html). 该程序将读取的十进制[NCR](http://en.wikipedia.org/wiki/Numeric_character_reference)替换`stdin`为相应的 ASCII 字符并将它们打印到`stdout`.

```
#include <cassert>
#include <iostream>
#include <string>
#include <boost/lexical_cast.hpp>
#include <boost/regex.hpp>

int main()
{
  boost::regex re("&#(1(?:[01][0-9]|2[0-6])|3[2-9]|[4-9][0-9]);"); // 32..126
  const int subs[] = {-1, 1}; // non-match & subexpr
  boost::sregex_token_iterator end;
  std::string line;

  while (std::getline(std::cin, line)) {
    boost::sregex_token_iterator tok(line.begin(), line.end(), re, subs);

    for (bool isncr = false; tok != end; ++tok, isncr = !isncr) {
      if (isncr) { // convert NCR e.g., '&#58;' -> ':'
        const int d = boost::lexical_cast<int>(*tok);
        assert(32 <= d && d < 127);
        std::cout << static_cast<char>(d);
      }
      else
        std::cout << *tok; // output as is
    }
    std::cout << '\n';
  }
} 
```

# scala - 如何向 jEdit 添加编辑模式？

> ID：428021
> 
> 赞同：6
> 
> 时间：2009-01-09T13:24:48.980
> 
> 标签：scala, editor, jedit

在寻找轻量级 Scala 开发环境时，我发现了 jEdit 的[Scala 编辑模式](http://github.com/djspiewak/jedit-modes/tree/master/scala.xml)。不过，我不知道如何使用它。如何在 jEdit 中加入一种新的编辑模式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T14:09:34.147

所有这些都可以在 jEdit 的帮助中找到，使用 jEdit -> 编写编辑模式 -> 安装编辑模式。但是，如果您像我一样，并且首先尝试了 StackOverflow，那么这就是它的短处。

将模式文件（在本例中为 scala.xml）放在 jEdit 主目录中的“modes”目录中——这可以通过 Utilities 菜单找到——如果您希望所有用户都可以使用它，或者在用户的 jEdit 的设置目录——也可以通过实用程序菜单找到——如果新模式仅供一个用户使用。

之后，在同一目录中编辑文件“目录”。它包含支持的模式列表。如果您正在处理设置目录，则不会有任何示例可用作参考，但主目录中的目录有很多。

对于引用模式，设置目录目录如下所示：

```
<?xml version="1.0"?>
<!DOCTYPE MODES SYSTEM "catalog.dtd">

<MODES>

<!-- Add lines like the following, one for each edit mode you add: -->
<!-- <MODE NAME="foo" FILE="foo.xml" FILE_NAME_GLOB="*.foo" /> -->

<MODE NAME="scala"      FILE="scala.xml"
                FILE_NAME_GLOB="*.scala" />

</MODES> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T13:32:11.010

可能这个[带有 Scala 的 JEdit 设置](http://liftweb.net/index.php/SetUp_jEdit)可以帮助你吗？

它指的是[完全配置](http://downloads.sourceforge.net/alchim/ScalaMiniIDEPlugin-0.3.1-full.zip?use_mirror=osdn)为运行 Scala 项目的 JEdit。

[http://liftweb.net/images/9/91/Screenshot-jedit.png](http://liftweb.net/images/9/91/Screenshot-jedit.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T13:36:54.307

您可以将 scala.xml 文件复制到 $JEDIT_HOME/modes

# css - CSS 编码风格

> ID：428022
> 
> 赞同：21
> 
> 时间：2009-01-09T13:25:02.210
> 
> 标签：css, coding-style

有没有好的 CSS 编码风格/标准？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-09T13:28:25.387

这是一个很好的：

[http://www.phpied.com/css-coding-conventions/](http://www.phpied.com/css-coding-conventions/)

但重要的是选择一些东西并坚持下去以保持一致性。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-01-09T13:47:09.467

我同意 Andrew Hare 链接中的大部分观点，但我*坚信*

```
.class-name {
    color: green;
} 
```

不及：

```
.class-name
{
    color: green;
} 
```

理由是：

```
.class-name, .class-name2 {
    color: green;
} 
```

或者：

```
.class-name, 
.class-name2 {
    color: green;
} 
```

对于 grep 或读取而言，比以下内容要明显得多：

```
.class-name, 
.class-name2 
{
    color: green;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-09T14:01:15.350

没有标准的标准，因为它是。肯定有很多内部标准和约定。当然也有已知的最佳实践。

我坚持以下几点：

*   **根据其目的构建您的 CSS**
    这可能涉及将 CSS 关注点分离到不同的文件中（layout.css、colors.css 等）。这也可能涉及将单个 CSS 文件清楚地划分为沿相同行的清晰部分。

*   **尽可能具体**
    选择器具有不同的权重。基于 ID 的选择器比基于类的选择器更具体。链式选择器（例如`body div#container div#content p`）确实非常具体。

    开始时尽可能具体，即使看起来你过于具体。很容易，稍后，通过删除一个并使另一个不那么具体来将两个非常具体的样式定义合并在一起。

    具有松散特异性的样式定义可能会以不明显或不明显的方式针对您不想要的元素。我认为这是 CSS 受挫最常见的原因（“为什么这`div`不允许我设置上边距？”）

*   **始终指定您希望为给定定义应用的每种样式**
    例如，如果您希望所有段落都具有粉红色文本，请将文本颜色设置为粉红色，并设置边距/填充/背景颜色/字体等。

    不要依赖浏览器默认值来适当地保持一致。当然，对于最常用的元素，主要浏览器倾向于使用非常相似的默认样式，如果不完全相同的话。

    如果您自己设置所有相关样式，您就会知道最终结果应该是什么。

    如果您只设置那些最明显的样式，最终结果将（很可能）是浏览器默认值和您的样式的组合。这最终会在某个时候抓住你。我认为这是导致 CSS 受挫的第二个最常见的原因。

*   **使用`id`s 设置独特元素的样式**通常，将属性应用到将要以任何方式与之交互的任何独特元素是
    一个好主意。`id`对于 CSS，这将使您更轻松地应用适当的特定样式。

*   **`id`在独特的页面上使用**
    与大多数（主页、搜索结果、404）有显着差异的页面应具有`id`on`body`元素。这为您提供了所需的特殊性，以确保您谨慎的主页样式不会受到您稍后应用于某些内部内容页面的样式的影响。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-02T19:28:48.303

**漂亮的编码风格 VS 网站速度**

我一直在处理非常庞大的 CSS 文件，并发现了一些我以前从未读过的非常有趣的东西。

**@进口**

一件事是使用@import。这实际上是一个瓶颈 - 通过完全不使用 @import，该网站变得更加活泼。

**#every .style { 在一行中}**

当浏览器读取文档时，它会逐行读取，所以通过从我漂亮的编码风格切换到这个，我完成了两件事；

1.  一个更活泼的网站
2.  更少的滚动，更好的概览。为什么？因为我首先向下滚动以找到我要使用的样式，然后它们都在同一行中，沿着这条线滚动你的眼睛以找到你正在寻找的东西并不难。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T13:34:12.177

检查[萨斯](http://sass-lang.com/)。它是一种用于 CSS 的模板语言，可以让您的源代码更干爽，更易于阅读。即使您没有使用 ruby​​，您也可以将它用于此任务并自动从 Sass 源构建您的 css 文件。并且可能也有其他语言的 Sass 实现。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-09T13:35:32.470

当我在 CSS 中编码时：

*   在第一部分，我写了类和 id
*   在最后一部分，我写了通用元素（p、字体等），因为类和 id 对继承更重要
*   如果我想要使用 IE 或 MoSE 浏览器的特定行为，我会写评论

[您可以在CSS Zen Garden](http://www.csszengarden.com)中看到一些示例

通常我会插入最重要的元素：如果有

```
p.important{/*features of a class*/}

p {/*features of a general element */} 
```

阅读 CSS 文件，我知道关于最**特殊**元素的格式规则，在关于最**一般**元素的规则之后。
这是Java编程的一种习惯。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-09T13:36:02.063

仅凭经验，我曾经编写过很长的 CSS 样式表。现在我的样式表通常是半页。

所以保持简单（KISS），基于行（greppable）并保持紧凑（使用字体：而不是字体大小等）。

另外我强烈推荐使用[CSSlint](http://csslint.net)来检查你的代码是否有毛病。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-09T13:36:30.877

主要的良好编码风格是根据目标实际分离 css 文件。

请参阅[渐进增强](http://www.alistapart.com/articles/progressiveenhancementwithcss)。

这样，无论您选择何种编码约定，您都将拥有一致且可管理的单独 css 文件……更易于调试。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-24T07:07:04.567

按字母顺序放置您的 css 规则（例如：“color: red;”），并按照它们在标记中出现的顺序放置您的选择器（例如：“div { color: red; }”）。将结构代码与皮肤分开。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-09T13:29:32.933

可能有负载。在我们的工作中，我们使用以下内容：

```
/* =div a comment about my div */
div#mydiv {
    border:1px solid #000;
} 
```

=div 允许我们使用搜索功能搜索所有 div 元素。虽然还有更多，我过去使用过许多不同的变体。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-09T13:41:50.320

除了其他人所说的，请记住 C 代表“级联”，即子元素继承自顶级元素。听起来简单直接。但我经常看到包含冗余声明的 CSS 文件，例如字体样式。这使得 CSS 更加复杂且难以维护。

因此，在向 CSS 中添加内容之前，请确保它不是多余的，即检查父元素并从子元素中删除多余的声明。

鉴于此，您应该以某种方式组织您的 CSS，以便首先提及高级元素（如 body 类的声明），最后提及更专业的元素。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-18T17:54:37.093

这也可能会有所帮助，一些保持 CSS 样式干燥的技巧 - 如“不要重复自己”[链接文本](http://reinholdweber.com/?p=46)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-02-15T03:59:21.893

我强烈建议您查看 Less： http: [//lesscss.org](http://lesscss.org)

虽然不是真正的标准，但它最近获得了很大的动力。Less 是在浏览器中运行的 css 扩展，将变量和函数带入语言中，因此允许模板化。

# sql - SQL Server 2005，将列变成行

> ID：428041
> 
> 赞同：7
> 
> 时间：2009-01-09T13:30:52.167
> 
> 标签：sql, pivot

我正在尝试将桌子旋转 90 度：使列成为行。不允许 PIVOT，因为 PIVOT 需要聚合函数。

示例：我有一个包含以下列的表：
ID int、
ISO char(2)、
Text varchar(255)。

所以我有这个：

```
ID ISO 文本
-- ---- ----
 1 DE 自动
 2 CN 汽车

```

我想得到以下内容：

```
ID EN DE
-- ---- ----
 1 汽车 汽车

```

你如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T14:58:18.887

[This answer is really frantisek's](https://stackoverflow.com/questions/428041/sql-server-2005-turn-columns-into-rows#428344), I'm just copying here to correct the mistake (I can't edit directly).

Basically, you use that solution, with a tweak:

```
SELECT 
    max(DE) as DE, max(EN) as EN 
FROM 
    test 
PIVOT (MAX([text]) FOR ISO in (DE,EN)) p 
```

This will get the content into a single row. Also, it drops the ID, since it doesn't make sense if you want a single row (there is no logic to indicate what to do with it when combining into a single row).

Also, the assumption is made that the values in the ISO column are unique, otherwise, this will lose data due to the [`MAX` aggregate](http://msdn.microsoft.com/en-us/library/ms187751(v=SQL.90).aspx).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T14:53:46.663

I found the solution as the following:

```
SELECT 
    ID, DE, EN
FROM 
    TextTable 
PIVOT(MAX([text]) FOR ISO IN (DE,EN)) p 
```

It's possible to use PIVOT with MAX aggregating function over the text.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T15:14:25.843

Query *without* a PIVOT even though other answers prove you *can* use a PIVOT :)

```
SELECT
    MAX(DE.Text) AS DE,
    MAX(EN.Text) AS EN  
FROM TextTable AS TT
LEFT JOIN TextTable AS DE
    ON DE.ID = TT.ID
    AND DE.ISO = 'DE'
LEFT JOIN TextTable AS EN
    ON EN.ID = TT.ID
    AND EN.ISO = 'EN' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-02-06T20:02:43.483

如果您尝试此解决方案并遇到语法错误，请尝试通过以下方式设置数据库的兼容模式

```
ALTER DATABASE myDatabase SET COMPATIBILITY_LEVEL = 90; 
```

这会将兼容性设置为 SQLServer 2005，并且上述查询将执行 w/oa 语法错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-02-20T07:46:31.373

```
select 
   t.num_claim_no,
   rtrim (xmlagg (xmlelement (e, t.txt_remarks ||'@'|| t.dat_update_date || '  ,  ')).extract ('//text()'), ',') Remarks,
   rtrim (xmlagg (xmlelement (e, t.num_update_no || ' , ')).extract ('//text()'), ',') SrlNo
from 
   gc_clm_gen_info t
   where t.txt_remarks is not null
  group by 
   t.num_claim_no
; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T14:34:24.440

由于您明确要求使用非枢轴解决方案：如果您知道行中将拥有哪些 ISO，这应该可以工作。我称该表为“测试”。

```
declare @temp table ([ID] int, [de] varchar(255), [en] varchar(255)) -- add ISOs if necessary

INSERT @temp 
SELECT distinct [ID], '', '' from Test -- ADD '' for other ISOs if necessary

DECLARE c CURSOR read_only 
FOR SELECT [ID], [ISO], [Text] from test

DECLARE  @ID int, @ISO char(2), @Text varchar(255)
OPEN c

FETCH NEXT FROM c INTO @ID, @ISO, @Text
WHILE (@@fetch_status <> -1)
BEGIN
    IF (@@fetch_status <> -2)
    BEGIN
        UPDATE  @temp
        SET     [DE] = case when @ISO = 'DE' then @Text else [de] end,
            [EN] = case when @ISO = 'EN' then @Text else [en] end
                    -- add ISOs if necessary
        WHERE   [ID] = @ID
    END
    FETCH NEXT FROM c INTO @ID, @ISO, @Text
END

CLOSE c
DEALLOCATE c

SELECT * FROM @temp 
```

# web-services - 企业级模板打印系统

> ID：428051
> 
> 赞同：1
> 
> 时间：2009-01-09T13:34:24.967
> 
> 标签：web-services, printing, templates, jms, enterprise

我正在寻找一个企业级的模板打印系统。我对我可以动手评估的每一个软件都感兴趣。商业与否。

我需要什么 - 一个准备好接收标签的单独系统，以便打印（数字或纸质）模板（如合同、发票等）。模板应由相同的软件管理。它应该通过 Web 服务或企业总线（首选 JMS 或 MQSeries 连接器）运行。

我可以询问一些名称和可能的一些 URL 吗？即使不完全符合要求，任何事情都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-09-15T05:21:08.650

这是一个老问题，但对于 Google 员工来说，我们使用几个产品将 XSL-FO（我们使用 XSL 生成的 W3C 标准纸张规范）中的文档呈现为 PDF、PostScript 等。我们使用它来在线显示文档以及每月批量打印数十万份文档。

*   RenderX（.NET、Java 等）为我们的批量打印需求提供了一个非常强大的解决方案
*   IBEX PDF Creator（仅限 .NET），用于在线渲染为 PDF

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T13:41:02.693

Calligo 是来自 InSystems 的商业软件包。目前无法访问该网站；可能是一个不好的迹象。

然后是[这些](http://java-source.net/open-source/content-managment-systems)开源的可能性。

# perl - 在 Perl 中返回多行字符串的第一行的最简单方法是什么？

> ID：428065
> 
> 赞同：10
> 
> 时间：2009-01-09T13:39:24.943
> 
> 标签：perl, string, multiline

当我说简单时，我的意思是，在一个表达式中，这样我就可以将它作为一个值粘贴到散列中，而无需先准备它。我会发布我的解决方案，但我正在寻找一个更好的解决方案，让我想起更少的 VB。:)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-01-09T13:54:57.390

怎么样

```
( split /\n/, $s )[0] 
```

?

您不必担心 \n 不是跨平台的，因为[Perl 足够聪明，可以解决这个问题](http://search.cpan.org/~rgarcia/perl/pod/perlport.pod#Newlines)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T21:17:29.930

这并不像你喜欢的那么简单，但为了简短而简单不应该总是成为目标。

您可以在字符串上打开文件句柄（作为标量引用）并将其视为文件以读取第一行：

```
我的 $string = "弗雷德\n威尔玛\贝蒂\n";
打开 my($fh), "<", \$string 或死...; # 从 $string 中读取数据
我的 $first_line = <$fh>; # 给出“弗雷德”
关闭 $fh;

```

如果你真的想，我想你可以把它简化为一个表达式：

```
$hash{$key} = do { open my($fh), "<", \$string; scalar <$fh> }; 
```

无论您选择哪种方法，您始终可以创建一个子程序来返回第一行，然后在您的哈希分配中使用子程序调用。

```
子 gimme_first_line { ... }

$hash{$key} = gimme_first_line(\$string);

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-10T09:37:02.560

```
($str =~ /\A(.*?)$/ms)[0]; 
```

对于大字符串，这将比

```
(split /\n/, $str)[0] 
```

正如曼尼建议的那样。[编辑：删除了对 . 的错误提及`split /\n/, $str, 1`。]

如果要包含终端`\n`（如果存在），`\n?`请在正则表达式中的右括号之前添加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T13:42:20.660

```
substr($s, 0, index($s, $/) > -1 ? index($s, $/) || () ) 
```

# ruby-on-rails - 优雅地从 has_many 中选择属性：通过 Rails 中的连接模型

> ID：428066
> 
> 赞同：5
> 
> 时间：2009-01-09T13:39:29.967
> 
> 标签：ruby-on-rails, ruby, associations, has-many, has-many-through

我想知道从 has_many :through 关联中的连接模型中选择属性的最简单/最优雅的方法是什么。

假设我们有具有以下 Item 类的 Items、Catalogs 和 CatalogItems：

```
class Item < ActiveRecord::Base
      has_many :catalog_items
      has_many :catalogs, :through => :catalog_items
end 
```

此外，假设 CatalogueItems 具有位置属性，并且任何目录和任何项目之间只有一个 CatalogueItem。

检索位置属性的最明显但有点令人沮丧的方法是：

```
@item         = Item.find(4)
@catalog      = @item.catalogs.first
@cat_item     = @item.catalog_items.first(:conditions => {:catalog_id => @catalog.id})
position      = @cat_item.position 
```

这很烦人，因为我们似乎应该能够做到@item.catalogs.first.position，因为我们已经完全指定了我们想要的位置：对应于@item 目录的第一个位置。

我发现得到这个的唯一方法是：

```
class Item < ActiveRecord::Base
      has_many :catalog_items
      has_many :catalogs, :through => :catalog_items, :select => "catalogue_items.position, catalogs.*"
end 
```

现在我可以做 Item.catalogs.first.position。但是，这似乎有点像 hack - 我正在向 Catalog 实例添加一个额外的属性。它还开辟了尝试在两种不同情况下使用视图的可能性，其中我使用 Catalog.find 或 @item.catalogs 填充 @catalogs。在一种情况下，职位会在那里，而在另一种情况下，它不会。

有没有人对此有很好的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-09T14:29:59.927

你可以这样做：

```
# which is basically same as your "frustrating way" of doing it
@item.catalog_items.find_by_catalogue_id(@item.catalogs.first.id).position 
```

或者您可以将其包装到 Item 模型的实例方法中：

```
def position_in_first_catalogue
  self.catalog_items.find_by_catalogue_id(self.catalogs.first.id).position
end 
```

然后就这样称呼它：

```
@item.position_in_first_catalogue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-03T11:28:38.287

只是添加答案，以便它可以帮助其他人

```
CatalogItem.joins(:item, :catalog).
  where(items: { id: 4 }).pluck(:position).first 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-01-09T19:00:42.813

如果您提供关联的另一端，您应该能够执行 @catalog.catalog_item.position。

```
class Catalog < ActiveRecord::Base
  belongs_to :catalog_item
end 
```

现在你可以做 Catalog.first.catalog_item.position。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-01-10T15:19:43.523

你为什么不只是

```
@item = Item.find(4)
position = @item.catalog_items.first.position 
```

你为什么要浏览目录？这对我来说没有任何意义，因为您正在寻找第一个 ANY 目录！？

# algorithm - 该算法的最坏情况时间复杂度是多少？

> ID：428068
> 
> 赞同：4
> 
> 时间：2009-01-09T13:40:30.087
> 
> 标签：algorithm, complexity-theory

```
procedure matrixvector(n:integer);
var i,j:integer;
begin
  for i<-1 to n do begin
    B[i] = 0;
    C[i] = 0;
    for j<-1 to i do 
      B[i]<- B[i]+ A[i,j];
    for j<-n down to i+1 do
      C[i]<-C[i] + A[i,j]
  end
end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-09T13:42:38.773

O(n^2)，如果我没看错的话。

为什么你需要两个内部循环超出了我的范围。为什么不在同一个循环中求和 B 和 C？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-22T02:19:02.210

只是为初学者详细解释：

最外层的 for 循环将运行 n 次（0 到 n） 然后在最外层的 for 循环中有两个 for 循环。第一个 for 循环将从 1 转到 n (1+2+3+4+.....+n) 第二个 for 循环将从 n 转到 1 (n+n-1+n-2+.. ..+1)

(1+2+3+4+5+....+n ) 的求和公式为 n(n+1)/2

所以总运行时间可以计算为 n + n(n+1)/2 + n(n+1)/2

观察这个方程中的最高多项式，它是n^2。

我们可以进一步简化这个方程，去掉常数并忽略线性部分，这将使我们的运行时间为 n^2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T13:52:22.933

**最坏的情况是 O(n²)。**

确实有三个循环，但不是都在彼此内部，因此给出了 O(n²)。

此外，您可以清楚地看到内部循环不会从 1 变为 n（就像外部循环一样）。但是因为这只会将时间复杂度改变一些常数，所以我们可以忽略它并说它只是 O(n^2)。

这表明时间复杂度是一种衡量标准：您的算法将按此顺序*扩展*，并且不会再花费更多时间。（但总是可以更快）

有关“计算”*任何*算法的最坏情况复杂度的更多信息，我可以向您指出[我之前提出的一个相关问题](https://stackoverflow.com/questions/3255/big-o-how-do-you-calculate-approximate-it)

# sql-server - 确定特定的 Windows 应用程序是否正在使用 SQL Server 2005 运行

> ID：428072
> 
> 赞同：2
> 
> 时间：2009-01-09T13:41:22.927
> 
> 标签：sql-server, windows

我需要确定特定应用程序是否正在从 SQL Server 2005 作业运行。问题是我们用来发送数据的应用程序之一将挂起，从而导致调用它的任何后续作业出现问题。如果我还可以获得 CPU 时间，我可以确定它是否可能是一个挂起的进程。

一个正在运行的应用程序列表会很好，但是能够使用 CPU 时间查找特定的可执行文件名称会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-12T01:56:37.683

由作业步骤启动的任何应用程序都将显示为由与 SQL Server 代理相同的登录帐户运行。为 SQL Server 代理使用不会用于任何其他服务的特定服务帐户。这将允许您使用任务管理器、性能监视​​器等监视由作业启动的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T14:51:20.680

Have the job run an external script (batch file, KSH script) instead of a TSQL script.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-12T14:19:23.737

我使用（免费）替换任务管理器“进程资源管理器”来更好地了解 exe 及其依赖项。

可能值得监控您的问题。

[http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T14:24:48.750

我认为最好的方法是运行 SQL Server Profiler 以及性能监视器并等待指定的作业运行。然后将 perfmon 统计信息导入分析器。您可以从 SQL Server Profiler 执行此操作，方法是转到 File-> Import Performance Data... 并将其指向您的 Performance Monitor 日志。

您应该能够选择 `Process(all)`计数器来为您提供所有正在运行的进程的列表，以及获取进程的 CPU 时间。然后，您可以将其`application name`与`hostname`Profiler 日志相关联，以查看发生了什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T14:36:34.157

尝试打开 SQL Server 活动监视器。您还可以从存储的 proc sp_who2 中获取一些信息。

# java - 在 Java 应用程序中读取 XML 文件的最佳/最简单方法是什么？

> ID：428073
> 
> 赞同：53
> 
> 时间：2009-01-09T13:41:44.173
> 
> 标签：java, xml, file

目前，我们的 Java 应用程序使用制表符分隔的 *.cfg 文件中保存的值。我们需要更改此应用程序，以便它现在使用 XML 文件。

为了从此文件中读取值，最好/最简单的库是什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-01-09T13:49:34.797

当然，根据您的需要，有很多好的解决方案。如果只是配置，你应该看看 Jakarta [commons-configuration](http://commons.apache.org/configuration/)和[commons-digester](http://commons.apache.org/digester/)。

您始终可以使用标准 JDK 方法获取文档：

```
import java.io.File;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;

[...]

File file = new File("some/path");
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document document = db.parse(file); 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-06-20T11:38:44.360

XML 代码：

```
<?xml version="1.0"?>
<company>
    <staff id="1001">
        <firstname>yong</firstname>
        <lastname>mook kim</lastname>
        <nickname>mkyong</nickname>
        <salary>100000</salary>
    </staff>
    <staff id="2001">
        <firstname>low</firstname>
        <lastname>yin fong</lastname>
        <nickname>fong fong</nickname>
        <salary>200000</salary>
    </staff>
</company> 
```

Java 代码：

```
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.w3c.dom.Node;
import org.w3c.dom.Element;
import java.io.File;

public class ReadXMLFile {

  public static void main(String argv[]) {
    try {
    File fXmlFile = new File("/Users/mkyong/staff.xml");
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(fXmlFile);
    doc.getDocumentElement().normalize();

    System.out.println("Root element :" + doc.getDocumentElement().getNodeName());
    NodeList nList = doc.getElementsByTagName("staff");
    System.out.println("----------------------------");

    for (int temp = 0; temp < nList.getLength(); temp++) {
        Node nNode = nList.item(temp);
        System.out.println("\nCurrent Element :" + nNode.getNodeName());
        if (nNode.getNodeType() == Node.ELEMENT_NODE) {
            Element eElement = (Element) nNode;
            System.out.println("Staff id : "
                               + eElement.getAttribute("id"));
            System.out.println("First Name : "
                               + eElement.getElementsByTagName("firstname")
                                 .item(0).getTextContent());
            System.out.println("Last Name : "
                               + eElement.getElementsByTagName("lastname")
                                 .item(0).getTextContent());
            System.out.println("Nick Name : "
                               + eElement.getElementsByTagName("nickname")
                                 .item(0).getTextContent());
            System.out.println("Salary : "
                               + eElement.getElementsByTagName("salary")
                                 .item(0).getTextContent());
        }
    }
    } catch (Exception e) {
    e.printStackTrace();
    }
  }
} 
```

输出：

```
----------------

Root element :company
----------------------------

Current Element :staff
Staff id : 1001
First Name : yong
Last Name : mook kim
Nick Name : mkyong
Salary : 100000

Current Element :staff
Staff id : 2001
First Name : low
Last Name : yin fong
Nick Name : fong fong
Salary : 200000 
```

我建议您阅读以下内容：[使用 java 进行 DOM 解析中的规范化 - 它是如何工作的？](https://stackoverflow.com/questions/13786607/normalization-in-dom-parsing-with-java-how-does-it-work)

[示例来源。](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-06-08T06:30:27.277

> 为了从此文件中读取值，最好/最简单的库是什么？

当您要求*最简单*的库时，我觉得有必要添加一种与[Guillaume 的最高投票答案](https://stackoverflow.com/questions/428073/what-is-the-best-simplest-way-to-read-in-an-xml-file-in-java-application/428091#428091)中的方法完全不同的方法。（在其他答案中，sjbotha 的 JDOM 提及最接近我的建议）。

我开始认为，对于 Java 中的 XML 处理，使用标准 JDK 工具肯定**不是**最简单的方法，而且只有在某些情况下（例如由于某种原因无法使用 3rd 方库）它才是最简单的方法。最好的办法。

相反，请考虑使用良好的 XML 库，例如[**XOM**](http://xom.nu/)。以下是如何将 XML 文件读入[`nu.xom.Document`](http://xom.nu/apidocs/nu/xom/Document.html)对象：

```
import nu.xom.Builder;
import nu.xom.Document;
import java.io.File;

[...]

File file = new File("some/path");
Document document = new Builder().build(file); 
```

所以，这只是简单一点，因为`org.w3c.dom.Document`在“纯 JDK”方法中读取文件也不是很复杂。但是使用一个好的库的好处才从这里开始！无论您使用 XML 做什么，当使用像 XOM 这样的库时，您通常会得到更简单的解决方案，并且需要维护的代码更少。作为示例，请考虑[this](https://stackoverflow.com/questions/807418/simplest-way-to-query-xml-in-java/807508#807508)与[this](https://stackoverflow.com/questions/807418/simplest-way-to-query-xml-in-java/831623#831623)或[this](https://stackoverflow.com/questions/729621/convert-string-xml-fragment-to-document-node-in-java/729668#729668)与[this](https://stackoverflow.com/questions/729621/convert-string-xml-fragment-to-document-node-in-java/955881#955881)或[包含 XOM 和 W3C DOM 示例的这篇文章](https://stackoverflow.com/questions/528312/creating-an-xml-document-using-namespaces-in-java/528512#528512)。

其他人会提供反驳论点（[例如这些](https://stackoverflow.com/questions/373833/best-xml-parser-for-java/373935#373935)），说明为什么坚持 Java 的标准 XML API 可能是值得的 - 这些可能有优点，至少在某些情况下，尽管我个人并不订阅所有这些。无论如何，在选择一种或另一种方式时，最好了解故事的两面。

（这个答案是我对 XOM 评估的一部分，它是我[寻找最佳 Java XML 库来替代 dom4j](https://stackoverflow.com/questions/831865/what-java-xml-library-do-you-recommend-to-replace-dom4j)的有力竞争者。）

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-01-09T14:51:10.430

您选择 XML 配置文件有什么特别的原因吗？我过去做过 XML 配置，但结果往往比其他任何事情都更令人头疼。

我想真正的问题是使用[Preferences API](http://java.sun.com/j2se/1.4.2/docs/guide/lang/preferences.html)之类的东西在你的情况下是否会更好。

使用 Preferences API 而不是自己滚动的 XML 解决方案的原因：

*   避免典型的 XML 丑陋（DocumentFactory 等），同时避免使用 3rd 方库来提供 XML 后端

*   内置对默认值的支持（丢失/损坏/无效条目不需要特殊处理）

*   无需清理 XML 存储的值（CDATA 包装等）

*   保证后备存储状态（无需不断将 XML 写入磁盘）

*   后备存储是可配置的（磁盘上的文件、LDAP 等）

*   免费多线程访问所有首选项

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-10T15:16:52.157

[JAXB](http://jaxb.java.net/)使用简单，包含在 Java 6 SE 中。使用 JAXB 或其他 XML 数据绑定（例如 Simple），您不必自己处理 XML，大部分工作由库完成。基本用法是向您现有的 POJO 添加注释。然后，这些注释用于为您的数据生成 XML 模式，并在从文件读取/写入数据时使用。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-01-09T13:50:51.080

查看[JAXB](http://en.wikipedia.org/wiki/JAXB)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-09T13:50:04.967

我只用过jdom。这很容易。

前往此处获取文档并下载： http: [//www.jdom.org/](http://www.jdom.org/)

如果您有一个非常非常大的文档，那么最好不要将其全部读入内存，而是使用 SAX 解析器在遇到某些标签和属性时调用您的方法。然后，您必须创建一个状态机来处理传入呼叫。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-09T14:33:45.050

到目前为止最简单的是 Simple [http://simple.sourceforge.net](http://simple.sourceforge.net)，您只需要像这样注释一个对象

```
@Root
public class Entry {

   @Attribute
   private String a
   @Attribute
   private int b;
   @Element
   private Date c;

   public String getSomething() {
      return a;
   }
} 

@Root
public class Configuration {

   @ElementList(inline=true)
   private List<Entry> entries;

   public List<Entry> getEntries() { 
      return entries;
   }
} 
```

然后，读取整个文件所需要做的就是指定位置，它将解析和填充带注释的 POJO。这将完成所有类型转换和验证。如果需要，您还可以注释持久回调。阅读它可以这样做。

```
Serializer serializer = new Persister();
Configuration configuraiton = serializer.read(Configuration.class, fileLocation); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-09T15:43:52.053

根据您的应用程序和 cfg 文件的范围，属性文件可能是最简单的。当然它不像 xml 那样优雅，但它肯定更容易。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-10T15:44:30.680

使用[`java.beans.XMLDecoder`](http://java.sun.com/j2se/1.5.0/docs/api/java/beans/XMLDecoder.html)，自 1.4 以来核心 Java SE 的一部分。

```
XMLDecoder input = new XMLDecoder(new FileInputStream("some/path.xml"));
MyConfig config = (MyConfig) input.readObject();
input.close(); 
```

[手动编写配置文件](http://java.sun.com/products/jfc/tsc/articles/persistence3/)很容易，或者在运行时使用相应[`XMLEncoder`](http://java.sun.com/j2se/1.5.0/docs/api/java/beans/XMLEncoder.html)的设置来编写新对象。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-18T21:34:53.210

这就是我使用的。 [http://marketmovers.blogspot.com/2014/02/the-easy-way-to-read-xml-in-java.html](http://marketmovers.blogspot.com/2014/02/the-easy-way-to-read-xml-in-java.html) 它位于标准 JDK 工具之上，因此如果缺少某些功能，您可以随时使用使用 JDK 版本。

这真的让我的事情变得更容易了。当我阅读由旧版本软件保存或由用户手动编辑的配置文件时，这尤其好。它非常健壮，如果某些数据不完全符合您期望的格式，也不会抛出异常。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2010-03-26T17:15:42.137

这是我创建的一个非常简单的 API，用于在 Java 中读取简单的 XML 文件。它非常简单易用。希望它对你有用。

[http://argonrain.wordpress.com/2009/10/27/000/](http://argonrain.wordpress.com/2009/10/27/000/)

# c# - 如何将 [XmlElement(DataType="date")] 与 WebService 的 WebMethod 属性一起使用

> ID：428075
> 
> 赞同：0
> 
> 时间：2009-01-09T13:41:56.683
> 
> 标签：c#, web-services, asmx

我的 Web 服务签名是

```
[WebMethod]
public DataSet GetPatientLastWeighing(int pFacilityID,string pSessionID)
{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T13:56:02.333

`DataSet`您对/`DataTable`序列化没有太多控制权。IMO，这里最好的答案是：不要在网络服务上使用`DataSet`/ 。`DataTable`就个人而言，我会声明一个具有我需要的属性的类，根据我的喜好赋予它们属性，然后返回一个数组 ( `T[]`) 或`List<T>`该类型。

更清晰的是，您可以更好地控制 xml，并且可以从不同类型的客户端（不仅仅是 .NET）使用它。

# visual-studio - 如何在 Visual Studio 中设置路径？

> ID：428085
> 
> 赞同：87
> 
> 时间：2009-01-09T13:46:41.213
> 
> 标签：visual-studio, visual-c++, development-environment

如何为要在 Visual Studio 中单独搜索特定项目的 DLL 文件设置路径？

现在我将它设置在环境`path`变量中，但我想更好地控制它。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2010-05-26T19:28:41.523

在 MSDN 中搜索“[如何：为项目设置环境变量](https://msdn.microsoft.com/en-us/library/669zx6zc.aspx)”。（对于那些匆忙的人来说，它是*项目>属性>配置属性>调试“环境”*和*“合并环境”属性。）*

语法为*NAME=VALUE*并且可以使用宏（例如，*$(OutDir)*）。

例如，要将 C:\Windows\Temp 添加到 PATH：

```
PATH=C:\WINDOWS\Temp;%PATH% 
```

同样，要将*$(TargetDir)* \DLLS 附加到 PATH：

```
PATH=%PATH%;$(TargetDir)\DLLS 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2009-01-09T14:26:25.237

你有几个选择：

*   您可以将 DLL 的路径添加到工具 > 选项 > 项目和解决方案 > VC++ 目录下的可执行文件设置（但仅用于构建、执行或[调试](https://stackoverflow.com/a/2916103/1154237)）
*   您可以将它们添加到全局 PATH 环境变量中
*   [您可以使用我在此处](https://stackoverflow.com/questions/419979/visual-studio-2003-setting-environment-variables-in-pre-build-event-and-using-i#420011)描述的批处理文件启动 Visual Studio并操作该文件中的路径
*   您可以将 DLL 复制到可执行文件的目录中:-)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-05-09T16:49:41.420

如果您只需要为每个配置添加一个路径（调试/发布），您可以设置调试命令工作目录：

> 项目 | 属性 | 选择配置 | 配置属性 | 调试 | 工作目录

对每个项目配置重复此操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T14:19:34.300

设置 PATH 变量，就像你正在做的那样。如果您从 IDE 运行程序，则可以通过调整项目属性中的调试选项来修改环境变量。

如果 DLL 的命名方式使您不需要为不同的配置类型提供不同的路径，则可以将路径添加到系统 PATH 变量或 Visual Studio 的全局变量中。选项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-26T10:56:22.323

没有一个答案完全解决了我的问题（我正在运行的解决方案文件试图找到 xcopy 以在生成后复制 dll）。

为我解决的问题是进入菜单“项目->属性”

然后在打开的窗口中选择左侧窗格：“配置属性 - > VC++ 目录

在“常规”下的右侧窗格中选择“可执行目录”

然后添加：

```
$(SystemRoot)\system32;$(SystemRoot);$(SystemRoot)\System32\Wbem;$(SystemRoot)\System32\WindowsPowerShell\v1.0\;$(ExecutablePath) 
```

# wpf - 尝试在 WPF 中实现 VirtualizingPanel 时未调用 OnItemChanged

> ID：428088
> 
> 赞同：0
> 
> 时间：2009-01-09T13:47:39.417
> 
> 标签：wpf, wpf-controls

我正在尝试在 WPF 中实现我自己的 VirtualWrapPanel。

我以这种方式实现它：

```
public class VirtualWrapPanel : VirtualizingPanel, IScrollInfo
    {

         ....

    protected override void OnItemsChanged(object sender, ItemsChangedEventArgs args)
        {
            switch (args.Action)
            {
                case NotifyCollectionChangedAction.Remove:
                case NotifyCollectionChangedAction.Replace:
                case NotifyCollectionChangedAction.Move:
                    base.RemoveInternalChildRange(args.Position.Index, args.ItemUICount);
                    return;
            }
        }

} 
```

但是永远不会调用 OnItemsChanged 方法，导致控件不释放对象......知道吗？谢谢乔纳森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-09T17:57:07.853

您的 ItemsSource 是否实现了 INotifyCollectionChanged？最简单的方法是使其成为 ObservableCollection

# string - 在 Bash 中提取子字符串

> ID：428109
> 
> 赞同：902
> 
> 时间：2009-01-09T13:53:22.793
> 
> 标签：string, bash, shell, substring

给定表单中的文件名`someletters_12345_moreleters.ext`，我想提取 5 位数字并将它们放入变量中。

因此，为了强调这一点，我有一个包含 x 个字符的文件名，然后是一个五位数字序列，两边各有一个下划线，然后是另一组 x 个字符。我想取 5 位数字并将其放入变量中。

我对可以实现这一目标的不同方式的数量非常感兴趣。

* * *

## 回答 #1

> 赞同：1324
> 
> 时间：2009-01-09T15:52:35.563

您可以使用[参数扩展](https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)来执行此操作。

如果*a*是常量，则以下参数扩展执行子字符串提取：

```
b=${a:12:5} 
```

其中**12**是偏移量（从零开始），**5**是长度

如果数字周围的下划线是输入中唯一的下划线，则可以分两步去除前缀和后缀（分别）：

```
tmp=${a#*_}   # remove prefix ending in "_"
b=${tmp%_*}   # remove suffix starting with "_" 
```

如果还有其他下划线，无论如何它可能是可行的，尽管更棘手。如果有人知道如何在一个表达式中执行两个扩展，我也想知道。

提出的两种解决方案都是纯 bash，不涉及进程生成，因此速度非常快。

* * *

## 回答 #2

> 赞同：854
> 
> 时间：2009-01-09T13:56:14.113

使用[剪切](http://www.manpagez.com/man/1/cut/)：

```
echo 'someletters_12345_moreleters.ext' | cut -d'_' -f 2 
```

更通用：

```
INPUT='someletters_12345_moreleters.ext'
SUBSTRING=$(echo $INPUT| cut -d'_' -f 2)
echo $SUBSTRING 
```

* * *

## 回答 #3

> 赞同：111
> 
> 时间：2009-01-09T14:00:08.723

通用解决方案，其中数字可以在文件名中的任何位置，使用第一个这样的序列：

```
number=$(echo $filename | egrep -o '[[:digit:]]{5}' | head -n1) 
```

另一种准确提取变量一部分的解决方案：

```
number=${filename:offset:length} 
```

`stuff_digits_...`如果您的文件名始终具有您可以使用 awk的格式：

```
number=$(echo $filename | awk -F _ '{ print $2 }') 
```

删除除数字以外的所有内容的另一种解决方案，使用

```
number=$(echo $filename | tr -cd '[[:digit:]]') 
```

* * *

## 回答 #4

> 赞同：109
> 
> 时间：2010-09-22T17:54:15.797

只是尝试使用`cut -c startIndx-stopIndx`

* * *

## 回答 #5

> 赞同：44
> 
> 时间：2009-01-12T19:43:20.790

这是我的做法：

```
FN=someletters_12345_moreleters.ext
[[ ${FN} =~ _([[:digit:]]{5})_ ]] && NUM=${BASH_REMATCH[1]} 
```

解释：

特定于 Bash 的：

*   `[[ ]]` [表示条件表达式](https://stackoverflow.com/a/669486/23056)
*   `=~` [表示条件是正则表达式](https://stackoverflow.com/a/19441575/23056)
*   `&&` [](https://stackoverflow.com/a/4510738/23056)*如果先前的命令成功，则[*链接*](https://stackoverflow.com/a/4510738/23056)[命令](https://stackoverflow.com/a/4510738/23056)*

 *正则表达式 (RE)：`_([[:digit:]]{5})_`

*   `_`是用于为被匹配的字符串划分/锚定匹配边界的文字
*   `()`创建捕获组
*   `[[:digit:]]`是一个角色类，我认为它不言自明
*   `{5}`表示前一个字符、类（如本例中）或组中的五个必须匹配

在英语中，你可以认为它的行为是这样的：`FN`字符串逐个字符地迭代，直到我们看到一个`_`捕获组被*打开*并且我们尝试匹配五个数字。如果此时匹配成功，则捕获组保存遍历的五个数字。如果下一个字符是`_`，则条件成功，捕获组在 中可用`BASH_REMATCH`，并且`NUM=`可以执行下一条语句。如果匹配的任何部分失败，保存的详细信息将被处理掉，并在`_`. 例如，如果`FN`where `_1 _12 _123 _1234 _12345_`，在找到匹配项之前会有四个错误的开始。

* * *

## 回答 #6

> 赞同：37
> 
> 时间：2013-05-31T15:00:54.763

如果有人想要更严格的信息，你也可以像这样在 man bash 中搜索

```
$ man bash [press return key]
/substring  [press return key]
[press "n" key]
[press "n" key]
[press "n" key]
[press "n" key] 
```

结果：

```
${参数：偏移量}
       ${参数：偏移量：长度}
              子串扩展。扩展到最多长度字符
              参数从 offset 指定的字符开始。如果
              length 被省略，展开为参数 start- 的子字符串
              在由 offset 指定的字符处。长度和偏移量是
              算术表达式（见下面的算术评估）。如果
              offset 计算为小于零的数字，使用该值
              作为参数值末尾的偏移量。算术
              以 - 开头的表达式必须用空格分隔
              与前面的：要区别于使用默认值
              价值观扩张。如果长度计算结果小于
              零，并且参数不是@，也不是索引或关联
              数组，它被解释为从值末尾的偏移量
              参数而不是字符数，以及扩展
              sion 是两个偏移量之间的字符。如果参数是
              @，结果是从 off 开始的长度位置参数
              放。如果参数是由@ 或下标的索引数组名称
              *，结果是以数组开头的长度成员
              ${参数[偏移]}。相对于
              比指定数组的最大索引大一。子
              应用于关联数组的字符串扩展会产生不正确的
              罚款结果。请注意，必须将负偏移量分开
              与冒号相距至少一个空格以避免混淆
              使用 :- 扩展。子字符串索引是从零开始的，除非
              使用位置参数，在这种情况下，索引
              默认从 1 开始。如果偏移量为 0，则位置
              使用参数，$0 是列表的前缀。

```

* * *

## 回答 #7

> 赞同：23
> 
> 时间：2013-06-03T17:34:40.723

我很惊讶这个纯 bash 解决方案没有出现：

```
a="someletters_12345_moreleters.ext"
IFS="_"
set $a
echo $2
# prints 12345 
```

您可能希望将 IFS 重置为之前或`unset IFS`之后的值！

* * *

## 回答 #8

> 赞同：21
> 
> 时间：2009-01-09T15:41:11.937

基于 jor 的回答（这对我不起作用）：

```
substring=$(expr "$filename" : '.*_\([^_]*\)_.*') 
```

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2014-08-05T08:11:19.947

如果我们关注以下概念：
“一系列（一个或几个）数字”

我们可以使用几个外部工具来提取数字。
我们可以很容易地擦除所有其他字符，无论是 sed 还是 tr：

```
name='someletters_12345_moreleters.ext'

echo $name | sed 's/[^0-9]*//g'    # 12345
echo $name | tr -c -d 0-9          # 12345 
```

但是如果 $name 包含多个数字，则上述操作将失败：

如果“name=someletters_12345_moreleters_323_end.ext”，那么：

```
echo $name | sed 's/[^0-9]*//g'    # 12345323
echo $name | tr -c -d 0-9          # 12345323 
```

我们需要使用正则表达式（regex）。
要在 sed 和 perl 中仅选择第一次运行（12345 而不是 323）：

```
echo $name | sed 's/[^0-9]*\([0-9]\{1,\}\).*$/\1/'
perl -e 'my $name='$name';my ($num)=$name=~/(\d+)/;print "$num\n";' 
```

但我们也可以直接**在 bash** ^((1))中进行：

```
regex=[^0-9]*([0-9]{1,}).*$; \
[[ $name =~ $regex ]] && echo ${BASH_REMATCH[1]} 
```

这使我们能够提取
由任何其他文本/字符包围的任意长度的第一轮数字。

**注意**：`regex=[^0-9]*([0-9]{5,5}).*$;`将仅匹配 5 位数的运行。:-)

^((1)) : 比为每个短文本调用外部工具更快。并不比在 sed 或 awk 中对大文件进行所有处理快。

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2013-06-26T12:13:49.147

遵循要求

> 我有一个包含 x 个字符的文件名，然后是一个五位数字序列，两边都有一个下划线，然后是另一组 x 个字符。我想取 5 位数字并将其放入变量中。

我发现了一些`grep`可能有用的方法：

```
$ echo "someletters_12345_moreleters.ext" | grep -Eo "[[:digit:]]+" 
12345 
```

或更好

```
$ echo "someletters_12345_moreleters.ext" | grep -Eo "[[:digit:]]{5}" 
12345 
```

然后使用`-Po`语法：

```
$ echo "someletters_12345_moreleters.ext" | grep -Po '(?<=_)\d+' 
12345 
```

或者如果你想让它正好适合 5 个字符：

```
$ echo "someletters_12345_moreleters.ext" | grep -Po '(?<=_)\d{5}' 
12345 
```

最后，要将其存储在变量中，只需使用`var=$(command)`语法即可。

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2009-01-09T16:13:38.500

没有任何子流程，您可以：

```
shopt -s extglob
front=${input%%_+([a-zA-Z]).*}
digits=${front##+([a-zA-Z])_} 
```

一个非常小的变体也可以在 ksh93 中使用。

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2011-05-06T12:50:13.293

这是一个前缀-后缀解决方案（类似于 JB 和 Darron 给出的解决方案），它匹配第一个数字块并且不依赖于周围的下划线：

```
str='someletters_12345_morele34ters.ext'
s1="${str#"${str%%[[:digit:]]*}"}"   # strip off non-digit prefix from str
s2="${s1%%[^[:digit:]]*}"            # strip off non-digit suffix from s1
echo "$s2"                           # 12345 
```

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2016-07-29T07:41:26.123

我的回答将更好地控制你想要从你的字符串中得到什么。这是有关如何`12345`从字符串中提取的代码

```
str="someletters_12345_moreleters.ext"
str=${str#*_}
str=${str%_more*}
echo $str 
```

`abc`如果您想提取具有任何字符或任何特殊字符（如`_`or ）的内容，这将更有效`-`。例如：如果您的字符串是这样的，并且您想要之后`someletters_`和之前的所有内容`_moreleters.ext`：

```
str="someletters_123-45-24a&13b-1_moreleters.ext" 
```

使用我的代码，您可以提及您到底想要什么。解释：

`#*`它将删除前面的字符串，包括匹配的键。这里我们提到的键是`_` `%`它将删除以下字符串，包括匹配的键。这里我们提到的关键是'_more*'

自己做一些实验，你会发现这很有趣。

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2016-10-21T08:12:04.813

我喜欢`sed`处理正则表达式组的能力：

```
> var="someletters_12345_moreletters.ext"
> digits=$( echo "$var" | sed "s/.*_\([0-9]\+\).*/\1/p" -n )
> echo $digits
12345 
```

一个稍微更通用的选择是**不要**假设您有一个下划线`_`标记您的数字序列的开始，因此例如剥离您在序列之前获得的所有非数字：`s/[^0-9]\+\([0-9]\+\).*/\1/p`。

* * *

```
> man sed | grep s/regexp/replacement -A 2
s/regexp/replacement/
    Attempt to match regexp against the pattern space.  If successful, replace that portion matched with replacement.  The replacement may contain the special  character  &  to
    refer to that portion of the pattern space which matched, and the special escapes \1 through \9 to refer to the corresponding matching sub-expressions in the regexp. 
```

* * *

更多关于这一点，如果你对正则表达式不太自信：

*   `s`是为_s_substitute
*   `[0-9]+`匹配 1+ 位数
*   `\1`链接到正则表达式输出的组 n.1（组 0 是整个匹配，组 1 是在这种情况下括号内的匹配）
*   `p`标志用于 _p_rinting

所有的转义`\`都是为了使`sed`' 的正则表达式处理工作。

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2016-08-14T19:44:45.643

给定 test.txt 是一个包含“ABCDEFGHIJKLMNOPQRSTUVWXYZ”的文件

```
cut -b19-20 test.txt > test1.txt # This will extract chars 19 & 20 "ST" 
while read -r; do;
> x=$REPLY
> done < test1.txt
echo $x
ST 
```

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2020-08-08T09:08:11.973

shell cut - 从字符串中打印特定范围的字符或给定部分

#method1) 使用 bash

```
 str=2020-08-08T07:40:00.000Z
 echo ${str:11:8} 
```

#method2) 使用剪切

```
 str=2020-08-08T07:40:00.000Z
 cut -c12-19 <<< $str 
```

#method3) 使用 awk 时

```
 str=2020-08-08T07:40:00.000Z
 awk '{time=gensub(/.{11}(.{8}).*/,"\\1","g",$1); print time}' <<< $str 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2013-06-26T11:34:08.277

类似于 php 中的 substr('abcdefg', 2-1, 3)：

```
echo 'abcdefg'|tail -c +2|head -c 3 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2015-10-26T12:22:56.130

好的，这里是带有空字符串的纯参数替换。需要注意的是，我已将**someletters**和**moreletters**定义为仅字符。如果它们是字母数字，这将无法正常工作。

```
filename=someletters_12345_moreletters.ext
substring=${filename//@(+([a-z])_|_+([a-z]).*)}
echo $substring
12345 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-01-09T15:01:02.517

还有内置的 bash 'expr' 命令：

```
INPUT="someletters_12345_moreleters.ext"  
SUBSTRING=`expr match "$INPUT" '.*_\([[:digit:]]*\)_.*' `  
echo $SUBSTRING 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-01-22T05:45:24.207

一个bash解决方案：

```
IFS="_" read -r x digs x <<<'someletters_12345_moreleters.ext' 
```

这将破坏一个名为`x`. var`x`可以更改为 var `_`。

```
input='someletters_12345_moreleters.ext'
IFS="_" read -r _ digs _ <<<"$input" 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2019-12-01T13:53:21.680

Inklusive end，类似于 JS 和 Java 的实现。如果您不希望这样做，请删除 +1。

```
function substring() {
    local str="$1" start="${2}" end="${3}"

    if [[ "$start" == "" ]]; then start="0"; fi
    if [[ "$end"   == "" ]]; then end="${#str}"; fi

    local length="((${end}-${start}+1))"

    echo "${str:${start}:${length}}"
} 
```

例子：

```
 substring 01234 0
    01234
    substring 012345 0
    012345
    substring 012345 0 0
    0
    substring 012345 1 1
    1
    substring 012345 1 2
    12
    substring 012345 0 1
    01
    substring 012345 0 2
    012
    substring 012345 0 3
    0123
    substring 012345 0 4
    01234
    substring 012345 0 5
    012345 
```

更多示例调用：

```
 substring 012345 0
    012345
    substring 012345 1
    12345
    substring 012345 2
    2345
    substring 012345 3
    345
    substring 012345 4
    45
    substring 012345 5
    5
    substring 012345 6

    substring 012345 3 5
    345
    substring 012345 3 4
    34
    substring 012345 2 4
    234
    substring 012345 1 3
    123 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2021-10-10T16:04:32.830

可能这可以帮助您获得所需的输出

**代码 ：**

```
your_number=$(echo "someletters_12345_moreleters.ext" | grep -E -o '[0-9]{5}')
echo $your_number 
```

**输出 ：**

```
12345 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2013-08-01T08:12:33.863

有点晚了，但我刚刚遇到了这个问题，发现了以下内容：

```
host:/tmp$ asd=someletters_12345_moreleters.ext 
host:/tmp$ echo `expr $asd : '.*_\(.*\)_'`
12345
host:/tmp$ 
```

我用它在没有 %N 日期的嵌入式系统上获得毫秒分辨率：

```
set `grep "now at" /proc/timer_list`
nano=$3
fraction=`expr $nano : '.*\(...\)......'`
$debug nano is $nano, fraction is $fraction 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-11-18T20:15:17.070

这是一个 substring.sh 文件

用法

```
`substring.sh $TEXT 2 3` # characters 2-3

`substring.sh $TEXT 2` # characters 2 and after 
```

substring.sh 遵循这一行

```
#echo "starting substring"
chars=$1
start=$(($2))
end=$3

i=0
o=""
if [[ -z $end ]]; then
  end=`echo "$chars " | wc -c`
else
  end=$((end))
fi
#echo "length is " $e
a=`echo $chars | sed  's/\(.\)/\1 /g'`
#echo "a is " $a
for c in $a
do
  #echo "substring" $i $e $c
  if [[ i -lt $start ]]; then
    : # DO Nothing
  elif [[ i -gt $end ]]; then
    break;
  else
    o="$o$c"
  fi
  i=$(($i+1))
done
#echo substring returning $o
echo $o 
```

# iphone - 如何复制 Mail.app 的垃圾动画

> ID：428110
> 
> 赞同：38
> 
> 时间：2009-01-09T13:53:40.250
> 
> 标签：iphone, cocoa-touch

在我的 iPhone 应用程序中，我在我的 UIToolBar 中放置了一个 UIBarButtonSystemItemTrash 类型的 UIBarBUtton。按下时，我想复制 Mail.app 的动画：箱子打开，UIView 折叠并飞入其中。
有没有办法通过 iPhone SDK 访问这个动画？

目前我正在使用定制动画，但有一些限制；例如，我无法为 bin 本身设置动画。你有什么建议吗？代码示例？

干杯，
戴维德

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-01-10T10:59:51.817

在动画上使用suckEffect 类型。还有：spewEffect、genieEffect、unGenieEffect、twist、tubey、swirl、cameraIris、cameraIrisHollowClose、cameraIrisHollowOpen、rippleEffect、charminUltra、zoomyIn 和 zoomyOut。在模拟器中不起作用。

```
CATransition *animation = [CATransition animation];
animation.type = @"suckEffect";
animation.duration = 2.0f;
animation.timingFunction = UIViewAnimationCurveEaseInOut;
view.opacity = 1.0f;
[view.layer addAnimation:animation forKey:@"transitionViewAnimation"]; 
```

注意：代码片段是从更大的代码库中提取的。我希望它有效:)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2010-01-09T14:10:33.007

只是添加一些信息：

1.  您可以将“suckEffect”与标准一起使用`+[UIView setAnimationTransition:forView:cache:]`。只需将数字 103 传递给*animationTransition*变量。这不会避免您的应用程序被 Apple 拒绝：p
2.  iPhoneOS 3.x 上不再存在“spewEffect”、“genieEffect”、“unGenieEffect”等。剩下的唯一未记录的过渡是“cube”（--）、“rippleEffect”（110）、三个“cameraIris”效果（105,106,107）和“suckEffect”（103）。

有关详细信息，请参阅[http://www.iphonedevwiki.net/index.php?title=UIViewAnimationState](http://www.iphonedevwiki.net/index.php?title=UIViewAnimationState)。

此外，为 bin 设置动画（使用私有 API）：[http://www.iphonedevwiki.net/index.php?title=UIToolbar#Animating_the_trash_can_icon](http://www.iphonedevwiki.net/index.php?title=UIToolbar#Animating_the_trash_can_icon)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-01-09T19:38:01.583

不幸的是，我认为这将需要一个完全自定义的动画。UIView 折叠可以使用 Core Animation 来近似，可能是通过向 UIView 底层的 CATransform3D 添加透视图，以将 UIView 扭曲成梯形，然后被吸进垃圾桶。

至于垃圾桶，您可以使用 initWithCustomView: 创建一个 UIBarButtonItem，这可以让您插入一个具有动画垃圾桶的自定义 UIView。看起来垃圾桶有两个元件，罐底和盖子，它们独立旋转以打开和关闭罐子。为两者绘制 PNG，为它们制作 UIImageViews，并使它们成为 UIBarButtonItem 自定义视图的子视图。对于打开和关闭，对它们应用旋转变换以动画子视图。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-27T20:02:59.373

我不确定这是否是一个答案，但[这里](https://github.com/Ciechan/BCGenieEffect#bcgenieeffect)是做“精灵效应”的 lib，所以它与你想要实现的非常相似。

```
CGRect endRect = CGRectMake(30, 40, 50, 60);
[view genieInTransitionWithDuration:0.7 
                    destinationRect:endRect 
                    destinationEdge:BCRectEdgeTop 
                         completion:^{
                            NSLog(@"I'm done!");
                          }]; 
```

[![精灵输入](https://i.stack.imgur.com/GlqTd.gif)](https://i.stack.imgur.com/GlqTd.gif)

# javascript - 在 jQuery 中调用 JavaScript 函数

> ID：428112
> 
> 赞同：4
> 
> 时间：2009-01-09T13:54:27.673
> 
> 标签：javascript, jquery

我正在使用 JavaScript 和 jQuery。我的主文件有`My.js`和 Ajax。

### 我的.js

```
function build_one(){
    alert("inside build_one");
} 
```

### 我的主文件

```
<script type="text/javascript">

    ..

    // Here I want to make call function defined in My.js build_one()
    ..

    // Here is the Ajax call

    $.ajax({
        type:'POST',
        url: 'ajax.php',
        data:'id='+id  ,
        success: function(data){
            $("#response").html(data);
        }
    });

    ...

</script> 
```

如何在 Ajax 函数之前调用 build_one() 函数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-09T14:03:07.593

这应该有效：

```
<script type="text/javascript" src="My.js"></script>
<script type="text/javascript">

    build_one();

    $.ajax({
            type:'POST',
            url: 'ajax.php',
            data:'id='+id  ,
            success: function(data){
                $("#response").html(data);
            }
         });
</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-09T14:04:24.313

首先，您必须在使用以下命令调用函数之前导入文件

```
<script type="text/javascript" src="My.js"></script> 
```

现在你可以在任何你想要的地方调用你的函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-08-06T20:48:13.540

我想出了我的问题。:) 如果要在 jQuery 中使用结果，则需要在 jQuery 之外调用在另一个文件中定义的函数并将其分配给变量。希望花絮可以帮助某人。

# windows - 在 Windows 上首次启动后文档图标发生变化

> ID：428121
> 
> 赞同：1
> 
> 时间：2009-01-09T13:57:53.580
> 
> 标签：windows, winapi, installation, icons, wise

我有一个使用 Wise 安装程序安装的应用程序（编辑：Wise 创建一个 Setup.exe 文件，而不是 MSI）。安装后，会为特定文件类型设置一个图标：

```
HKEY_CLASSES_ROOT\.auz\DefaultIcon = C:\Path\To\App\some_icon.ico,0 
```

然而，在安装之后，资源管理器选择使用通用的“白纸+应用程序图标”图标来显示这个图标，这是不同的（不是我提供的）。

首次启动时，应用程序本身会注册图标和其他文件关联，以便最后运行的版本“拥有”这些文档。此时，**资源管理器更改**此文件类型的图标并显示正确的图标，但是当我查看注册表时，**DefaultIcon 的值完全相同**。

**这是我迄今为止尝试过的**

*   从注册表中删除所有条目，并自己编写它们。
*   安装后，“触摸” DefaultIcon 的值，然后启动一个只调用[SHChangeNotify(SHCNE_ASSOCCHANGED)](http://msdn.microsoft.com/en-us/library/bb762118.aspx)的小程序（我的程序在更新注册表中的文件关联后执行此操作）。
*   安装后，杀死并重新启动资源管理器。
*   安装后，使用 TweakUI 对桌面上的图标进行“修复”。

这些都不起作用。获得正确图标的唯一方法是让程序自己安装它。我在注册表中找不到任何更改。我在扯我的头发。

**我想避免的**

*   使用其他安装软件进行测试
*   过多地更改安装脚本（我没有 Wise 本身，因为安装程序是根据需要在另一台机器上构建的）。
*   将图标嵌入可执行文件中。

关于如何让资源管理器在安装后显示正确图标的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T14:52:51.423

我想到了几件事：

*   为什么注册表中的图标后面有',0'？这会将显示的图标限制为一个图标。最好有一个包含多个图标的图标文件（相同的图标 UI 但不同的大小/颜色深度） - 资源管理器具有不同的图标视图！如果您的图标文件中只有一个图标，请尝试删除“,0”。
*   可能是在资源管理器收到更新通知后，注册表最后写入安装程序？
*   确保在图标文件存储到磁盘**后写入注册表项**
*   您应该使用 Wise 安装程序自己的配置来注册文件类型。不确定，但我认为资源管理器在完成 msi 的整个安装之前不会进行任何更改，因此手动调用 SHChangeNotify() 将无济于事。msi 有自己的表，如果您使用正确的配置，Wise 将添加该表。

对于 Wise，请执行以下操作（而不是自己创建注册表项）：

1.  在功能详细信息页面组下，选择文件关联页面。
2.  从当前功能下拉列表中，选择核心。
3.  单击窗口右侧的添加，然后选择新建。将出现“文件关联详细信息”对话框。
4.  单击扩展详细信息选项卡。
5.  浏览到 QuickFacts 目录，选择文件 QckFacts.exe，然后单击确定。
6.  在扩展中，输入：qft
7.  保留其余字段的默认值，然后单击确定。扩展名 .QFT 已添加到安装中。当最终用户在目标计算机上双击具有此扩展名的文件时，QuickFacts 应用程序将启动。
8.  保存安装

[编辑]您可能还缺少必需的注册表项（该图标可能不足以让外壳显示它）：

```
HKEY_CLASSES_ROOT\.auz\(default) = auzfile
HKEY_CLASSES_ROOT\.auz\shell\open\command = C:\Path\To\App.exe 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-12T20:11:11.030

这是解决方案。

每种文件类型（在这种情况下假设为“.auz”）都注册了：

*   带有图标资源路径的`DefaultIcon`键，以及
*   `HKEY_CLASSES_ROOT\.auz\(default)`给出文件类型描述的值的值，例如“Foobar 文档”。

除此之外，还有一个“Foobar Document”文档类型的条目，或者更具体地说，是如何从 shell 打开此类文档的键：

```
HKEY_CLASSES_ROOT\Foobar Document\Shell\command\open\(default) = C:\Path\To\App.exe "%1" 
```

显然，**此键取代了为特定文件扩展名写入的值**。因为图标在 .exe 文件的外部，所以 Windows 资源管理器使用应用程序的第一个图标为“Foobar 文档”类型的所有文件创建一个图标（我提到的“白纸 + 应用程序图标”图标）。

现在，我错的是应用程序本身确实改变了

```
HKEY_CLASSES_ROOT\.auz\(default) 
```

开始时稍微不同的值，说“Foobar 1.2 Document”（不干燥的问题）。因此，“Foobar 文档”的链接丢失了，.auz 文件在第一次启动后获得了它们的图标。

所以我通过简单地完全移除`HKEY_CLASSES_ROOT\Foobar Document`钥匙来解决这一切，*瞧*！

# erlang - 如何在erlang中拆分二进制文件

> ID：428124
> 
> 赞同：10
> 
> 时间：2009-01-09T13:58:30.863
> 
> 标签：erlang, binary

我想要的是，我认为，相对简单：

```
> Bin = <<"Hello.world.howdy?">>.
> split(Bin, ".").
[<<"Hello">>, <<"world">>, <<"howdy?">>] 
```

任何指针？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-02-28T08:42:31.470

```
binary:split(Bin,<<".">>). 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-02-28T14:07:00.863

[在Erts-5.8](http://www.erlang.org/doc/apps/erts/notes.html#id129226)中添加了来自[EEP31](http://www.erlang.org/eeps/eep-0031.html)（和[EEP9](http://www.erlang.org/eeps/eep-0009.html) ）的模块[二进制文件](http://www.erlang.org/doc/man/binary.html)（参见 OTP-8217）：

```
1> Bin = <<"Hello.world.howdy?">>.
<<"Hello.world.howdy?">>
2> binary:split(Bin, <<".">>, [global]).
[<<"Hello">>,<<"world">>,<<"howdy?">>] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-17T21:30:43.950

在 R12B 中工作的二进制拆分版本大约快 15%：

```
split2(Bin, Chars) ->
    split2(Chars, Bin, 0, []).

split2(Chars, Bin, Idx, Acc) ->
    case Bin of
        <<This:Idx/binary, Char, Tail/binary>> ->
            case lists:member(Char, Chars) of
                false ->
                    split2(Chars, Bin, Idx+1, Acc);
                true ->
                    split2(Chars, Tail, 0, [This|Acc])
            end;
        <<This:Idx/binary>> ->
            lists:reverse(Acc, [This])
    end. 
```

如果您使用的是 R11B 或更早版本，请改用 archaelus[版本](https://stackoverflow.com/questions/428124/how-can-i-split-a-binary-in-erlang#428852)。

上面的代码在 std 上更快。只有 BEAM 字节码，在 HiPE 中没有，两者几乎相同。

**编辑**：请注意此代码自 R14B 以来已被新模块[二进制文件废弃。](http://www.erlang.org/doc/man/binary.html)改为使用`binary:split(Bin, <<".">>, [global]).`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-09T16:59:22.340

当前没有与`lists:split/2`二进制字符串等效的 OTP 函数。在[EEP-9](http://www.erlang.org/eeps/eep-0009.html)公开之前，您可以编写一个二进制拆分函数，例如：

```
split(Binary, Chars) ->
    split(Binary, Chars, 0, 0, []).

split(Bin, Chars, Idx, LastSplit, Acc)
  when is_integer(Idx), is_integer(LastSplit) ->
    Len = (Idx - LastSplit),
    case Bin of
        <<_:LastSplit/binary,
         This:Len/binary,
         Char,
         _/binary>> ->
            case lists:member(Char, Chars) of
                false ->
                    split(Bin, Chars, Idx+1, LastSplit, Acc);
                true ->
                    split(Bin, Chars, Idx+1, Idx+1, [This | Acc])
            end;
        <<_:LastSplit/binary,
         This:Len/binary>> ->
            lists:reverse([This | Acc]);
        _ ->
            lists:reverse(Acc)
    end. 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-09T14:52:03.437

这是一种方法：

```
re:split(<<"Hello.world.howdy?">>, "\\."). 
```

# sql-server - MSBuild 从数据库返回值

> ID：428126
> 
> 赞同：2
> 
> 时间：2009-01-09T13:59:08.553
> 
> 标签：sql-server, msbuild, automation, build-automation

有谁知道如何将（sql）数据库中的值返回到 MSBuild 脚本中？我想将值放入属性中，以便可以将其传递给后续的构建任务。

我现在正在摆弄类似下面的东西，但这返回 -1 表示查询已成功执行，而我想要的是查询的实际结果。（来自社区任务的 SqlExecute）。

```
 <SqlExecute Command="select count(*) from dbo.trade"
        ConnectionString="XXXX" >
        <Output PropertyName="TradeCount" TaskParameter="Result" />
    </SqlExecute>
    <Message Text="$(TradeCount)" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T15:28:32.367

抢，

好想法。在反射器中打开社区任务表明 SqlExecute 任务永远不会返回查询的值。

```
this._result = command.ExecuteNonQuery(); 
```

这让我重新尝试让它与 oSql 和 Exec 任务一起工作......

```
 <Exec Command="osql -n -S $(DatabaseMachineName) -E -q &quot;select count(*) from trade&quot; -b -d $(DatabaseName)">
        <Output PropertyName="TradeCount" TaskParameter="Outputs"/>
    </Exec>

    <Message Text="Result:$(TradeCount)" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T14:13:48.883

您是否尝试过“从 dbo.trade 中选择 *”？根据 msbuild communitytasks 文档，结果返回给定语句的行数，而您的语句可能返回包含您的计数的单行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T14:28:49.867

尝试“从 dbo.trade 中选择 *”，仍然给出相同的 -1。

社区任务文档说输出“输出返回计数/值”，但它没有进一步说明如何使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T15:16:50.313

在 Reflector 中打开社区任务或直接检查代码库以了解它的用途通常是最简单的。

# ruby-on-rails - 在 64 位 RedHat Linux 上从源代码编译 Ruby 的最佳方法是什么

> ID：428144
> 
> 赞同：2
> 
> 时间：2009-01-09T14:04:56.233
> 
> 标签：ruby-on-rails, ruby, linux, 64-bit, makefile

在 RedHat Enterprise Linux 5 上，可通过 RPM 获得的最新 Ruby 版本是 1.8.5。我的 Rails 应用需要 1.8.6 或更高版本，所以我需要从源代码编译 Ruby。

我尝试了以下方法来构建它，它似乎可以构建，但是当我尝试运行需要 RubyInline 的插件时，我看到 gcc 编译错误。

似乎缺乏从源代码构建 Ruby、适合运行 Rails 应用程序的体面文档。

以下是我编译 Ruby 的方法：

```
./configure --prefix=/usr --with-openssl-include=/usr/include/openssl --with-openssl-lib=/usr/lib64/openssl/engines
make
sudo make install 
```

我想知道在 64 位系统上构建它是否需要特定的编译标志。我看到的实际错误是

```
 error executing "gcc -shared   -fPIC -g -O2   -I /usr/lib/ruby/1.8/x86_64-linux  -I /usr/include -L/usr/lib -o \"/home/deploy/.ruby_inline/Inline_ImageScience_aa58.so\" \"/home/deploy/.ruby_inline/Inline_ImageScience_aa58.c\" -lfreeimage -lstdc++ ": 
```

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T14:48:52.337

最好的方法可能是从 Fedora 中“窃取”一个 Ruby 1.8.6 RPM。第二个最好的方法是从 Fedora 窃取一个 Ruby 1.8.6 SRPM 并自己构建它。

但是，您可以做一件事：在`--disable-pthread`该行中添加一个标志，如果存在则将其`configure`删除。使 MRI*显着*变慢，并且仅当您想使用 Ruby/Tk 并且系统的 Tk 库是用.`--enable-pthread``--enable-pthread`*`--enable-pthread`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-02-02T06:23:35.443

[Fedora 的 Ruby 包](http://koji.fedoraproject.org/koji/packageinfo?packageID=125)（包括 SRPM）

无法作为对正确答案的评论发布，因此在此处添加 - 编辑可以随意整理。

# sql-server-2005 - SQL 标识列不同步

> ID：428147
> 
> 赞同：2
> 
> 时间：2009-01-09T14:05:41.113
> 
> 标签：sql-server-2005

我们有一组数据库，其中包含一个以 Identity 列作为主键定义的表。由于其中的一个子集被复制到其他服务器，因此创建了一个种子系统，以便它们永远不会发生冲突。该系统使用增量为 50 的起始种子。

这样，DB1 上的表将生成 30001、30051 等，而 Database2 将生成 30002、30052 等。

我正在考虑将另一个数据库添加到该系统中（为了扩展/加载目的而拆分），并且发现其中一个或两个数据库上的身份不同步 - 即数据库 3 的数字应该以 3 结尾，不再。根据表格设计，播种和增量仍然是正确的。

我显然将不得不以某种方式解决这个问题（可能通过设置一个较高的初始值），但谁能告诉我什么会导致他们像这样不同步？从对数据库的查询中，我可以看到序列如下：32403,32453,32456,32474,32524,32574 并且自从出错以来一直以 50 为增量。

据我所知，没有批量插入或 DTS 或类似的东西将新数据放入这些表中。

第二个（奖励）问题 - 如何重置身份，使其回到我想要的实际状态！

编辑：

我知道这个设计原则上有点笨拙——我没有要求批评它，我只是想知道它怎么会不同步。我继承了这个系统并将列更改为 GUID - 虽然无疑是最好的理论解决方案 - 可能不会发生。当负载太大（目前几百 GB）时，系统从单个 DB 演变为多个 DB。此表中的每个 ID 将在许多其他地方引用 - 有时每个地方都有几十万次（每个项目乘以大约 40,000）。更新所有这些都不会发生;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T14:11:37.607

复制 = GUID 列。

要将下一个 ID 的值设置为 1000：

```
DBCC CHECKIDENT (orders, RESEED, 999) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T14:15:30.923

如果您想将主键实际用于某些有意义的目的，而不是唯一标识表中的行，那么它不是标识列，您需要以其他显式方式分配它们。

如果你想合并多个表中的行，那么你就违反了 Identity 的意图，即一个表。（GUID 列将使用足够独特的值来解决此问题。但您仍然无法为它们赋予有意义的目的。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T14:14:12.640

也许有人用过：

```
SET IDENTITY INSERT {tablename} ON

INSERT INTO {tablename} (ID, ...)
VALUES(32456, ....)

SET IDENTITY INSERT {tablename} OFF 
```

或许他们曾经`DBCC CHECKIDENT`改变过身份。在任何情况下，您都可以使用它来设置它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T14:22:56.447

依赖这种身份策略风险太大，因为（显然）它可能会失去同步并破坏一切。

使用复制，您确实需要使用 GUID 来识别您的数据。将数据迁移到使用 GUID 进行 PK 的架构可能比尝试破解身份问题更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-10T20:33:45.730

要直接解决您的问题，

1.  为什么它不同步可能很有趣，但你可以从答案中得出的唯一结果是防止它在未来发生；这是一个糟糕的做法。除非您处理具有致命缺陷的设计，否则您将继续遇到这些和更大的问题。

2.  如何正确设置现有值也是（恕我直言）一个无效的问题，因为除了正确设置值之外，您还需要做一些事情 - 它不会解决您的问题。

这不是贬低你，而是以我能想到的最好的方式帮助你。改变设计是短期和长期的工作。不改变设计是通向失败的途径。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-02-24T20:19:32.297

这并不能真正回答您的核心问题，但解决设计的一种可能性是切换到 hi_lo 算法。它不需要将列从 int 更改。因此，它不应该与更改为 guid 一样多。

Hi_lo 由 nhibernate ORM 使用，但我找不到太多关于它的文档。

基本上，Hi_lo 的工作方式是您有 1 个中心位置来跟踪您的 hi 值。您的插入应用程序的每个实例都可以看到的 1 个数据库中的 1 个表。那么您需要某种服务（对象、Web 服务等），它的寿命比单个实体插入的寿命要长一些。此服务启动时将转到 hi 表，获取当前值，然后增加该表中的值。使用已提交读锁来执行此操作，这样您就不会遇到与其他服务实例的任何并发问题。现在您将使用新服务来获取您的下一个 id 值。它在内部从从 db 获得的数字开始，当它传递该值时，递增 1。跟踪当前值和允许传递的“范围”。

2.  服务 1 从 db 中的“hi_value”表中获取 100。增加 db 值 200。
3.  服务 1 获取新 ID 的请求。晕倒100。
4.  服务的另一个实例，服务 2（另一个线程，另一个中间层工作机器等）启动，从 db 获得 200，将 db 增加到 300。
5.  服务 2 收到一个新 ID 的请求。昏倒200。
6.  服务 1 收到一个新 ID 的请求。传递 101。如果其中任何一个在死亡前传递超过 100，那么它们将返回数据库，获取当前值并增加它并重新开始。显然，这有一些艺术。你的范围应该有多大，等等。

一个非常简单的变体是您的一个数据库中的一个表，它只包含“nextId”值。基本上是手动复制oracle的序列概念。

# python - django中的有序列表

> ID：428149
> 
> 赞同：13
> 
> 时间：2009-01-09T14:06:13.797
> 
> 标签：python, django, django-models

我有一个非常简单的问题。我需要创建模型，代表有序列表的元素。这个模型可以这样实现：

```
class Item(models.Model):
    data = models.TextField()
    order = models.IntegerField() 
```

或像这样：

```
class Item(models.Model):
    data = models.TextField()
    next = models.ForeignKey('self') 
```

首选什么方式？每种解决方案有什么缺点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-01-09T14:17:26.753

本质上，您提出的第二个解决方案是链表。在数据库级别实现的链表通常不是一个好主意。要检索`n`元素列表，您需要`n`访问数据库（或使用复杂的查询）。性能方面，在 O(n) 中检索列表效率极低。

在常规代码中，与数组相比，链表用于获得更好的插入性能（无需移动所有元素）。在您的数据库中，仅用 2 个查询更新所有元素并不复杂：

```
UPDATE item.order = item.order + 1 FROM item WHERE order > 3
INSERT INTO item (order, ...) VALUES (3, ...) 
```

我记得看到一个实现所有这些的可重用应用程序和一个漂亮的管理界面，但我现在找不到它......

总而言之，除非您有非常非常好的理由不这样做，否则一定要使用解决方案＃1并远离解决方案＃2！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T14:12:35.327

这取决于你想做什么。

第一个似乎更好地在数据库中进行单个查询并以正确的顺序获取所有数据

第二个似乎更好地在两个现有元素之间插入一个元素（因为在第一个中，如果数字是连续的，您必须更改很多项目）

我会使用第一个，因为它似乎更适合数据库表，这就是 django 在后台存储模型数据的方式。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2009-01-09T15:22:38.040

还有另一种解决方案。

```
class Item(models.Model):
    data = models.TextField() 
```

您可以将 Python 列表腌制或编组到数据字段中并加载它。这适用于更新和阅读，但不适用于搜索，例如获取包含特定项目的所有列表。

# fluent-nhibernate - 流畅的 NHibernate API 和 .NET 2.0

> ID：428151
> 
> 赞同：8
> 
> 时间：2009-01-09T14:07:16.163
> 
> 标签：fluent-nhibernate, .net-2.0

我可以将 Fluent NHibernate API 用于 .NET 2.0 应用程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T14:09:56.987

不，FluentNhibernate 需要 .NET 3.5

# c++ - 如何从 Perl 调用 C++ 静态库？

> ID：428153
> 
> 赞同：11
> 
> 时间：2009-01-09T14:07:52.340
> 
> 标签：c++, perl

我正在编写一个需要在多个应用程序之间共享的 C++ 静态库，其中一个是用 Perl 编写的。不幸的是，我几乎不了解核心 Perl 语言（我读过 Llama 的书），而且我对它的库也不是很熟悉。如何从 Perl 脚本调用外部 C++ 二进制文件？

通过 Google 搜索，我找到了有关 Perl [Inline](http://search.cpan.org/~ingy/Inline-0.44/Inline.pod)模块的信息，但如果我理解正确，那不是我需要的。我很确定这是为了直接在你的 Perl 脚本中编写 C 和 C++ 代码，而不是为了调用外部 C++ 库。

C++ 静态库正在为 ARM 处理器进行交叉编译，因此在运行 Perl 脚本的目标机器上将没有 C++ 编译器。（如果这有所作为。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-09T14:16:13.433

您可以通过 Inline::C 调用其他库中的代码（并且可能通过 Inline::CPP 调用相同的代码） - 查看[Inline::C::Cookbook](http://search.cpan.org/~sisyphus/Inline-0.45/C/C-Cookbook.pod)。您很可能希望从 Inline 开始，并在完成试验后使用生成的 .XS 文件进一步工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-09T14:15:18.177

您想看看使用 XS，这是 Perl 通常与 C/C++ 库交互的方式。这不是微不足道的。Perl 文档的几个相关部分：

*   [perlxs](http://perldoc.perl.org/perlxs.html)
*   [perlxstut](http://perldoc.perl.org/perlxs.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T14:27:16.967

首先，它确实需要在动态库中，而不是静态库中（除非您将重新编译 perl 本身并将其链接到您的静态库）。

其次，由于 C++ 会破坏名称（如果您问我，这是 C++ 最烦人的“功能”之一），您需要一个包含挂钩函数的外部“C”块。如果您使用的是 C++，您可能会使用一个钩子函数，该函数返回实现您需要使用的接口的 C++ 对象。由于您使用的是 perl，因此您可能需要将对象包装在这样的接口中：

```
CPPObject 对象；

外部“C”
{

int初始化对象（无效）
{
  返回对象.init();
}

int DoCoolStuff( 无效 )
{
  返回对象.DoCoolStuff();
}

int DoOtherCoolStuff(int foo)
{
  返回对象.DoOtherCoolStuff( foo );
}

int DestroyObject( 无效 )
{
  返回对象.Destroy();
}

}

```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T14:12:50.677

您需要创建一个可从 perl 调用的包装函数，并且 AFAIK，您需要将此包装函数放在动态库中（除非您要重建 perl 二进制文件并将静态库链接到它）。我喜欢使用名为[SWIG](http://www.swig.org/)（简单包装器接口生成器）的工具为我创建包装器。它也可以为 17 种左右的其他语言创建包装器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T14:12:10.570

可能不是你想的那样，但是编写一个独立的 C++ 程序，perl 程序通过管道与之通信怎么样？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-25T02:03:43.103

我才刚刚开始关注 XS，所以我无法提供太多帮助。但这是我所知道的......

有[XSpp](http://search.cpan.org/dist/Wx/build/Wx/XSP/XSpp.pod)，它是 C++ 的 XS。它与[WxPerl](http://search.cpan.org/dist/Wx/)一起分发。WxPerl 正在积极响应式的开发中。

Inline:CPP 可用于编写您的初始接口/包装器代码。然后就可以分析生成的XS了。但是，它看起来并没有那么好维护。如果它有效，它可能会为您提供一个良好的开端。

如果有点过时，您可能会发现[John Keizer 关于 XS 和 C++ 的简短说明很有帮助。](http://www.johnkeiser.com/perl-xs-c++.html)

# namespaces - 在 VxWorks 中多次实例化程序时如何解决命名冲突

> ID：428158
> 
> 赞同：0
> 
> 时间：2009-01-09T14:09:59.513
> 
> 标签：namespaces, vxworks

我需要在 VxWorks 中运行 C 程序的多个实例（VxWorks 有一个全局命名空间）。问题是 C 程序定义了在全局命名空间中冲突的全局变量（旨在供该程序的特定实例使用）。为了完成这项工作，我想对程序进行最小的更改。欢迎所有想法！

问候

顺便说一句……现在不是提及全局变量不是最佳实践的好时机！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T14:59:38.307

最简单的做法是使用任务变量（参见 taskVarLib 文档）。

使用任务变量时，该变量特定于当前上下文中的任务。在上下文切换时，存储当前变量并加载新任务的变量。

需要注意的是，任务变量只能是 32 位数字。每个全局变量也必须独立添加（通过它自己对 taskVarAdd 的调用？），它还增加了上下文切换的时间。

此外，您将无法与其他任务共享全局变量。
您不能将任务变量与 ISR 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-09T18:22:49.313

另一种可能性：
如果您使用的是 Vxworks 6.x，您可以制作一个 Real Time Process 应用程序。
这遵循一个进程模型（类似于 Unix/Windows），其中程序的每个实例都有自己的全局内存空间，独立于任何其他实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T15:07:36.840

另一种可能的解决方案是将应用程序的全局变量放在静态结构中。例如：

从：

```
int global1;
int global2;

int someApp()
{
   global2 = global1 + 3;
   ...
}

TO:
typedef struct appGlobStruct {
  int global1;
  int global2;
} appGlob;

int someApp()
{
   appGlob.global2 = appGlob.global1 + 3;
} 
```

这只是在您的应用程序代码中变成了搜索和替换。代码结构没有变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-16T17:58:55.503

在集成来自同一供应商的两个第三方库时，我必须解决这个问题。两个库都使用了一些相同的符号名称，但它们彼此不兼容。因为这些来自供应商，我们无法搜索和替换。并且任务变量也不适用，因为（a）两个库可能从同一个任务中调用，并且（b）一些欺骗符号是函数。

假设我们有 app1 和 app2，分别链接到 lib1 和 lib2。两个库都定义了相同的符号，因此必须彼此隐藏。

幸运的是（如果您使用 GNU 工具）objcopy 允许您在链接后更改变量的类型。

这是解决方案的草图，您必须根据需要对其进行修改。

首先，为 app1 执行部分链接以将其绑定到 lib1。在这里，我假设您已经将 app1 中的 *.o 部分链接到 app1_tmp1.o。

```
 $(LD_PARTIAL) $(LDFLAGS) -Wl,-i -o app1_tmp2.o app1_tmp1.o $(APP1_LIBS) 
```

然后，在您刚刚创建的 tmp2 对象中隐藏 lib1 中的所有符号，以便为 app1 生成“真实”对象。

```
 objcopymips `nmmips $(APP1_LIBS) | grep ' [DRT] ' | sed -e's/^[0-9A-Fa-f]* [DRT] /-L /'` app1_tmp2.o app1.o 
```

对 app2 重复此操作。现在你已经准备好 app1.o 和 app2.o 链接到你的最终应用程序，没有任何冲突。

此解决方案的缺点是您无法从主机外壳访问任何这些符号。要解决此问题，您可以暂时关闭其中一个或另一个库的符号隐藏以进行调试。

# sql - 视图如何在 DBM 中工作？

> ID：428175
> 
> 赞同：0
> 
> 时间：2009-01-09T14:14:54.433
> 
> 标签：sql, mysql, performance, views

假设我有两个这样的表：

```
雇主（id、name、....、deptId）。
部门（id，部门名称，...）。

```

但是这些数据不会经常修改，我想要这样的查询

```
SELECT name, deptName FROM Employers, Depts 
    WHERE deptId = Depts.id AND Employers.id="ID" 
```

尽可能快。

我想到了两种可能的解决方案：

*   非规范化表：

    尽管使用此解决方案，我将失去“标准化数据库”的一些巨大优势，但这里的性能是必须的。

*   为该非规范化数据创建一个视图。

    我将保持数据规范化并且（**这是我的问题**），在该视图上的查询性能将比没有该视图时更快。

或者以另一种方式提出相同的问题，每次对视图进行查询时都会“解释”视图，或者 DBA 中的视图材料如何工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T14:32:29.220

通常，除非您“物化”视图（这是 MS SQL Server 等某些软件中的一个选项），否则该视图只会转换为针对基表的查询，因此不会比原始视图快或慢（减去极少的翻译查询所需的时间，与实际执行查询相比，这没什么）。

你怎么知道你有性能问题？您是否在负载下对其进行分析？你验证过性能瓶颈是这两张表吗？一般来说，在你得到硬数据之前，不要假设你知道性能问题来自哪里，也不要花时间优化，直到你知道你正在优化正确的东西 - 80% 的性能问题来自 20 % 的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T14:42:41.943

如果 Depts.ID 是该表的主键，并且您索引 Employers.DeptID 字段，那么即使超过数百万条记录，此查询也应该保持非常快。

在那种情况下，非规范化对我来说没有意义。

一般来说，视图的性能与运行查询本身时的性能几乎完全相同。视图的优点是简单地将查询抽象出来，因此您不必考虑它。

您可以使用物化视图（或有人说的“快照”），但是您的数据只会与您上次刷新时一样新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T15:03:02.713

在对其中一个回复的评论中，问题的作者解释说他正在寻找一种在 MySQL 中创建物化视图的方法。

MySQL 并没有像其他 DBMS 那样将物化视图的概念包装在一个很好的包中，但它确实拥有创建它所需的所有工具。

你需要做的是：

1.  创建查询结果的初始具体化。
2.  在将与新插入的雇主匹配的所有行插入到具体化表中的雇主表中插入时创建一个触发器。
3.  在雇主表中创建删除触发器，从物化表中删除相应的行。
4.  在雇主表中创建更新触发器，以更新物化表中的相应行。
5.  部门表也是如此。

如果您的基础表不经常更新，这可能会正常工作；但是您需要注意执行此操作后创建/更新/删除操作的额外成本。此外，您还需要确保一些不了解您的诡计的 DBA 在时机成熟时不会在不迁移触发器的情况下迁移数据库。所以好好记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-10T08:07:22.880

除非您知道这是一个明确且存在的问题，否则听起来像是过早的优化。

MySQL 不具体化视图，它们并不比对基表的查询快。此外，在某些情况下，它们的速度较慢，因为它们的优化不太好。

但是视图也会对将来维护代码的开发人员“隐藏”一些东西，让他们想象查询没有实际复杂。

# refactoring - 这种流结构控制是好的做法吗？

> ID：428183
> 
> 赞同：2
> 
> 时间：2009-01-09T14:15:58.970
> 
> 标签：refactoring, control-flow

我想重写一个嵌套`if`语句太多的方法。

我想出了这种方法，并希望得到您的意见：

```
public void MyMethod()
{
   bool hasFailed = false;

   try
   {
      GetNewOrders(out hasFailed);

      if(!hasFailed)
          CheckInventory(out hasFailed);

      if(!hasFailed)
          PreOrder(out hasFailed);              

      // etc
   }
   catch(Exception ex)
   {
   }
   finally
   {
      if(hasFailed)
      {
           // do something
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-09T14:20:50.177

我做了类似的事情，但没有异常处理：

```
BOOL ok = CallSomeFunction();
if( ok ) ok = CallSomeOtherFunction();
if( ok ) ok = CallYetAnotherFunction();
if( ok ) ok = WowThatsALotOfFunctions();
if( !ok ) {
    // handle failure
} 
```

或者，如果你想变得聪明：

```
BOOL ok = CallSomeFunction();
ok &= CallSomeOtherFunction();
ok &= CallYetAnotherFunction();
... 
```

如果您仍然使用异常，为什么需要该`hasFailed`变量？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-09T14:18:30.510

并不真地。如果您的“catch”块捕获到错误，您的方法应该引发异常。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-09T14:46:46.663

据我所知，这是一个级联步骤的示例，如果第一个和第一个和第二个有效，则将执行第二个和第三个步骤，即返回 hasFailed==false。

使用模板方法和装饰器设计模式可以使这段代码更加优雅。

你需要一个接口、具体实现、抽象类和抽象类的几个子类。

```
public interface Validator {
    public boolean isValid();
}

public class GetNewOrders implements Validator {
    public boolean isValid() {
       // same code as your GetNewOrders method
    }
}

public abstract class AbstractValidator implements Validator {
    private final Validator validator;

    public AbstractValidator(Validator validator) {
        this.validator = validator;
    }
    protected boolean predicate();
    protected boolean isInvalid();

    public final boolean isValid() {
        if (!this.validator.isValid() && predicate() && isInvalid())
            return false;
        return true;
    }
}

public class CheckInventory extends AbstractValidator {
    public CheckInventory(Validator validator) {
        super(validator);
    }
    @Override
    public boolean predicate() {
        return true;
    }
    @Override
    public boolean isInvalid() {
        // same code as your CheckInventory method
    }
}

public class PreOrder extends AbstractValidator {
    public CheckInventory(Validator validator) {
        super(validator);
    }
    @Override
    public boolean predicate() {
        return true;
    }
    @Override
    public boolean isInvalid() {
        // same code as your PreOrder method
    }
} 
```

现在您的方法看起来更加优雅：

```
public void MyMethod() {
    bool success = false;
    try {
        Validator validator = new GetNewOrders();
        validator = new CheckInventory(validator);
        validator = new PreOrder(validator);
        success = validator.isValid();
    } finally {
        if (!success) {
            // do something
        }
    }
} 
```

Validator 对象可以在一行中创建，但我更喜欢这种样式，因为它使验证的顺序很明显。在链中创建新的验证链接是继承 AbstractValidator 类和实现谓词和 isInvalid 方法的问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-09T14:29:36.883

没有评论 try/catch 的东西，因为我真的不知道那里发生了什么，我会改变它，所以被调用的方法返回 true/false 表示成功，然后根据布尔短路检查它们以避免调用如果前面的方法失败，后面的方法。

```
public void MyMethod()
{
    bool success = false;
    try
    {
         success = GetNewOrders()
                   && CheckInventory()
                   && PreOrder();
         // etc
    }
    catch(Exception ex)   {   }
    finally
    {
        if(!success)
        {
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T14:18:18.530

这对我来说真的不好看。hasFailed 变量的使用确实不好。如果 GetNewOrders 因异常而失败，例如，您最终会进入带有 hasFailed = false 的 catch 块！

与此处的其他答案相反，我相信布尔“hasFailed”可能有合法用途，这并不例外。但我真的不认为你应该将这样的条件混合到你的异常处理程序中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T14:34:31.913

我知道我可能会复制一些帖子：有什么问题`else`？您也可以使用惰性求值 ( `a() && b()`) 来链接方法 - 但这依赖于将状态作为返回值给出，无论如何恕我直言，这更具可读性。

我不同意你应该引发异常的海报，因为如果发生程序错误或程序由于操作而进入异常状态，则应该引发异常。异常不是业务逻辑。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T14:35:14.563

我会这样做：

```
public void MyMethod()
{
bool success = false;   
try
   {

      GetNewOrders(); // throw GetNewOrdersFailedException    
      CheckInventory(); // throw CheckInventoryFailedException
      PreOrder(); // throw PreOrderFailedException  
      success = true;            
   }
   catch( GetNewOrdersFailedException e)
   {
     // Fix it or rollback
   }
   catch( CheckInventoryFailedException e)
   {
     // Fix it or rollback
   }
   catch( PreOrderFailedException e)
   {
     // Fix it or rollback
   }
   finally
   {
      //release resources;
   }
} 
```

扩展异常相当简单，

公共 NewExecption : BaseExceptionType {}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-09T15:04:46.253

好吧，我不喜欢看起来获取订单列表然后处理它们，然后在发生错误时停止处理它们的代码，什么时候它肯定应该跳过该订单并移至下一个订单？唯一完全失败的是数据库（订单来源，预购目的地）死亡。我认为整个逻辑确实有点时髦，但也许那是因为我对您使用的语言没有经验。

```
try {
  // Get all of the orders here
  // Either in bulk, or just a list of the new order ids that you'll call the DB
  // each time for, i'll use the former for clarity.
  List<Order> orders = getNewOrders();

  // If no new orders, we will cry a little and look for a new job
  if (orders != null && orders.size() > 0) {
    for (Order o : orders) {
      try {
        for (OrderItem i : o.getOrderItems()) {
          if (checkInventory(i)) {
            // Reserve that item for this order
            preOrder(o, i);
          } else {
            // Out of stock, call the magic out of stock function
            failOrderItem(o, i);
          }
        }
      } catch (OrderProcessingException ope) {
        // log error and flag this order as requiring attention and
        // other things relating to order processing errors that aren't database related
      }
    }
  } else {
    shedTears();
  }
} catch (SQLException e) {
  // Database Error, log and flag to developers for investigation
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-09T15:20:50.760

您的新方法对于一组简单的指令来说并没有那么糟糕，但是当添加额外的步骤时会发生什么？您/您是否需要交易行为？（如果 PreOrder 失败了怎么办？或者如果 PreOrder 之后的下一步失败了？）

展望未来，我会使用命令模式： [http ://en.wikipedia.org/wiki/Command_pattern](http://en.wikipedia.org/wiki/Command_pattern)

...并将每个动作封装为实现 Execute() 和 Undo() 的具体命令。

然后只需创建一个命令队列并循环直到失败或空队列。如果任何步骤失败，则只需停止并按先前命令的顺序执行 Undo()。简单的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-09T15:38:26.357

克里斯解决方案是最正确的。但我认为你不应该做超过你需要的事情。解决方案应该是可扩展的，这就足够了。

1.  更改参数的值是一种不好的做法。
2.  永远不要使用空的通用 catch 语句，至少添加一个注释为什么你这样做。
3.  使方法抛出异常并在适当的地方处理它们。

所以现在它更加优雅:)

```
public void MyMethod()
{
   try
   {
      GetNewOrders();
      CheckInventory();
      PreOrder();
      // etc
   }
   finally
   {
      // do something
   }
} 
```

# database - 从 VSTS 数据库版生成数据更改脚本

> ID：428192
> 
> 赞同：2
> 
> 时间：2009-01-09T14:17:50.683
> 
> 标签：database, version-control, deployment

我正在使用 GDR 版本的 VSTS 数据库版本源代码控制数据库并生成部署脚本。它工作得很好，但问题是它似乎只处理脚本和部署模式。它没有处理脚本和实际数据本身的部署（即也与数据库一起部署的查找和常备数据）。

我知道手动编写部署脚本很容易，但这是每个人都会做的吗？是否有推荐的使用 VSTS 部署引擎部署数据的方法？是否有一些工具可以帮助解决这个问题 - 我并不是说像 SQLCompare 这样的完整产品，只是填补了 VSTS DB 的空白。

提前致谢。

金田

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-11T14:07:58.117

VSTS：DB 最佳实践博客[提倡使用部署后脚本](http://blogs.msdn.com/bahill/archive/2009/04/01/maintaining-and-synchronizing-your-reference-data.aspx)将参考数据插入临时表，然后根据增量更新目标表（即更新 x 内连接 temp where x.something <> temp.something）

有一些[建议](http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/2044354a-5dbc-44e8-b9c1-9371f27420fd) [说](http://social.msdn.microsoft.com/forums/en-US/vstsdb/thread/156e3da3-f59b-4ded-a7b8-9027104ca0ff/)这可能会成为一个强大的工具，并且至少有一个 MVP 已经[编写了一个工具来生成这些脚本](http://leon.mvps.org/StaticData/)。

（注意：我没有尝试过 - 我只是自己发现了它）

如果我在这件事上有任何选择，我个人仍然会坚持使用 RedGate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-05T02:19:26.350

GDR 带有一个数据比较引擎，但据我所知，到目前为止，数据比较甚至不能*存储*在项目中（更不用说得到它的适当支持了）——所以它非常临时。与模式比较不同，没有文件\另存为。

比较引擎可以[通过 DDE 实现自动化，](http://blogs.msdn.com/psirr/archive/2008/11/22/data-compare-dte-commands.aspx)但这是 Visual Studio IDE 中的自动化，并不真正适合某种脚本安装过程。无论如何，我无法指定要在比较中包含哪些表（因为您通过 DDE 要做的就是打开向导供用户选择）

或者，所有功能似乎都驻留在 Microsoft.VisualStudio.TeamSystem.DataPackage.dll 中，但由于尚未编写 API 文档（GDR 附带的帮助文档中充满了错误），这将是一个有点偶然的冒险来确定从哪里开始。

作为以前使用过 RedGate 的 SqlCompare、SqlDataCompare 和它们各自的 API 来执行此操作的人，GDR 的大部分功能对我来说似乎有点半生不熟。

这次我可能会做的是将数据与 SSIS 包同步（在构建时导出到 CSV/在安装时从 CSV 导入），但我现在更愿意使用 SqlDataCompare API（或 SqlPackager）。

# c# - 为什么缓存的正则表达式优于已编译的正则表达式？

> ID：428196
> 
> 赞同：10
> 
> 时间：2009-01-09T14:18:43.630
> 
> 标签：c#, regex, performance, benchmarking

这只是一个满足我好奇心的问题。但对我来说这很有趣。

我写了这个简单的小基准。它以随机顺序调用 3 种 Regexp 执行变体几千次：

基本上，我使用相同的模式但以不同的方式。

1.  你的普通方式没有任何`RegexOptions`。从 .NET 2.0 开始，这些不会被缓存。但应该被“缓存”，因为它被保存在一个相当全局的范围内而不是重置。

2.  和`RegexOptions.Compiled`

3.  通过调用`Regex.Match(pattern, input)`在 .NET 2.0 中缓存的静态

这是代码：

```
static List<string> Strings = new List<string>();        
static string pattern = ".*_([0-9]+)\\.([^\\.])$";

static Regex Rex = new Regex(pattern);
static Regex RexCompiled = new Regex(pattern, RegexOptions.Compiled);

static Random Rand = new Random(123);

static Stopwatch S1 = new Stopwatch();
static Stopwatch S2 = new Stopwatch();
static Stopwatch S3 = new Stopwatch();

static void Main()
{
  int k = 0;
  int c = 0;
  int c1 = 0;
  int c2 = 0;
  int c3 = 0;

  for (int i = 0; i < 50; i++)
  {
    Strings.Add("file_"  + Rand.Next().ToString() + ".ext");
  }
  int m = 10000;
  for (int j = 0; j < m; j++)
  {
    c = Rand.Next(1, 4);

    if (c == 1)
    {
      c1++;
      k = 0;
      S1.Start();
      foreach (var item in Strings)
      {
        var m1 = Rex.Match(item);
        if (m1.Success) { k++; };
      }
      S1.Stop();
    }
    else if (c == 2)
    {
      c2++;
      k = 0;
      S2.Start();
      foreach (var item in Strings)
      {
        var m2 = RexCompiled.Match(item);
        if (m2.Success) { k++; };
      }
      S2.Stop();
    }
    else if (c == 3)
    {
      c3++;
      k = 0;
      S3.Start();
      foreach (var item in Strings)
      {
        var m3 = Regex.Match(item, pattern);
        if (m3.Success) { k++; };
      }
      S3.Stop();
    }
  }

  Console.WriteLine("c: {0}", c1);
  Console.WriteLine("Total milliseconds: " + (S1.Elapsed.TotalMilliseconds).ToString());
  Console.WriteLine("Adjusted milliseconds: " + (S1.Elapsed.TotalMilliseconds).ToString());

  Console.WriteLine("c: {0}", c2);
  Console.WriteLine("Total milliseconds: " + (S2.Elapsed.TotalMilliseconds).ToString());
  Console.WriteLine("Adjusted milliseconds: " + (S2.Elapsed.TotalMilliseconds*((float)c2/(float)c1)).ToString());

  Console.WriteLine("c: {0}", c3);
  Console.WriteLine("Total milliseconds: " + (S3.Elapsed.TotalMilliseconds).ToString());
  Console.WriteLine("Adjusted milliseconds: " + (S3.Elapsed.TotalMilliseconds*((float)c3/(float)c1)).ToString());
} 
```

每次我调用它时，结果都是这样的：

```
    未编译且未自动缓存：
    总毫秒数：6185,2704
    调整后的毫秒数：6185,2704

    已编译且未自动缓存：
    总毫秒数：2562,2519
    调整后的毫秒数：2551,56949184038

    未编译并自动缓存：
    总毫秒数：2378,823
    调整后的毫秒数：2336,3187176891

```

所以你有它。不多，但大约有 7-8% 的差异。

这不是唯一的谜。我无法解释为什么第一种方法会慢得多，因为它永远不会重新评估，而是保存在全局静态变量中。

顺便说一句，这是在 .Net 3.5 和 Mono 2.2 上，它们的行为完全相同。在 Windows 上。

那么，任何想法，为什么编译的变体甚至会落后？

编辑1：

修复代码后，结果现在如下所示：

```
    未编译且未自动缓存：
    总毫秒数：6456,5711
    调整后的毫秒数：6456,5711

    已编译且未自动缓存：
    总毫秒数：2668,9028
    调整后的毫秒数：2657,77574842168

    未编译并自动缓存：
    总毫秒数：6637,5472
    调整后的毫秒数：6518,94897724836

```

这几乎也淘汰了所有其他问题。

感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T14:38:19.567

在 Regex.Match 版本中，您正在寻找模式中的输入。尝试交换参数。

```
var m3 = Regex.Match(pattern, item); // Wrong
var m3 = Regex.Match(item, pattern); // Correct 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T14:37:16.043

[我注意到](https://stackoverflow.com/questions/414328/using-static-regex-ismatch-vs-creating-an-instance-of-regex#414411)类似的行为。我也想知道为什么编译版本会慢，但注意到超过一定数量的调用，编译版本会更快。所以我深入研究了[反射器](http://www.red-gate.com/products/reflector/)，我注意到对于编译的正则表达式，仍然有一些在第一次调用时执行的设置（特别是创建适当[`RegexRunner`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexrunner.aspx)对象的实例）。

在我的测试中，我发现如果我将构造函数和对正则表达式的初始一次性调用都移到计时器启动之外，那么无论我运行多少次迭代，编译的正则表达式都会获胜。

* * *

顺便说一句，框架在使用静态方法时所做的缓存`Regex`是一种优化，只有在使用静态`Regex`方法时才需要。这是因为每次调用静态`Regex`方法都会创建一个新`Regex`对象。在`Regex`类的构造函数中，它必须解析模式。缓存允许静态`Regex`方法的后续调用重用`RegexTree`从第一次调用中解析的内容，从而避免解析步骤。

当您在单个`Regex`对象上使用实例方法时，这不是问题。解析仍然只执行一次（当您创建对象时）。此外，您可以避免在构造函数中运行所有其他代码，以及堆分配（以及后续的垃圾收集）。

Martin Brown[注意到](https://stackoverflow.com/questions/428196/why-is-a-cached-regexp-outperforming-a-compiled-one#428265)您将静态`Regex`调用的参数颠倒了（很好，Martin）。我想你会发现，如果你解决了这个问题，实例（未编译的）正则表达式每次都会击败静态调用。您还应该发现，根据我上面的发现，已编译的实例也将击败未编译的实例。

**但是**：在你盲目地将该选项应用于你创建的每个正则表达式之前，你真的应该阅读[Jeff Atwood 关于已编译正则表达式的帖子。](http://blog.codinghorror.com/to-compile-or-not-to-compile/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-08T22:12:54.250

这是来自文档；

[https://msdn.microsoft.com/en-us/library/gg578045(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/gg578045(v=vs.110).aspx)

> 当调用**静态正则表达式**方法，在缓存中找不到正则表达式时，**正则表达式引擎将正则表达式转换为一组操作码，并存储在缓存中**。然后它将这些操作代码转换为 MSIL，以便 JIT 编译器可以执行它们。**解释的正则表达式以较慢的执行时间为代价减少了启动时间**。正因为如此，它们**最适合在少量方法调用中使用正则表达式时使用**，或者如果调用正则表达式方法的确切次数未知但预计会很小。随着方法调用次数的增加，减少启动时间所带来的性能提升会被较慢的执行速度所抵消。
> 
> 与解释的正则表达式相比，**编译的正则表达式增加了启动时间，但执行单个模式匹配方法的速度更快**。因此，编译正则表达式所带来的性能优势与调用的正则表达式方法的数量成正比。

* * *

> 总而言之，我们建议您在使用特定正则表达式相对不频繁地调用正则表达式方法时使用**解释的正则表达式。**
> 
> 当您相对频繁地调用具有特定正则表达式的正则表达式方法时，您应该使用已**编译的正则表达式。**

* * *

如何检测？

> 解释的正则表达式的较慢执行速度超过其减少的启动时间所带来的收益的确切阈值，或者编译的正则表达式的较慢启动时间超过其较快执行速度所获得的收益的阈值是难以确定的。它取决于多种因素，包括正则表达式的复杂性和它处理的特定数据。**要确定解释或编译的正则表达式是否为您的特定应用程序场景提供最佳性能，您可以使用 Stopwatch 类来比较它们的执行时间**。

* * *

编译的正则表达式：

> 我们建议您在以下情况下将正则表达式编译为程序集：
> 
> 1.  If you are a component developer who wants to create a library of reusable regular expressions.
> 2.  If you expect your regular expression's pattern-matching methods to be called an indeterminate number of times -- anywhere from once or twice to thousands or tens of thousands of times. Unlike compiled or interpreted regular expressions, regular expressions that are compiled to separate assemblies offer performance that is consistent regardless of the number of method calls.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T14:37:55.777

如果您经常使用相同的模式匹配相同的字符串，这可以解释为什么缓存版本比编译版本稍快。

# c# - c# 2.0 WinApp中的多个图标

> ID：428214
> 
> 赞同：0
> 
> 时间：2009-01-09T14:25:47.283
> 
> 标签：c#, winapi, icons

我的 .net 2.0 winforms 应用程序有小问题。我想在应用程序中嵌入一些不同的图标。

还有其他要求：

*   必须由 ms-build 自动重建；不允许使用外部 gui 应用程序进行准备
*   应用程序必须包含版本信息。

嵌入多个图标后，我想注册两个文件关联到应用程序文档/扩展文件。

```
[Registry]
...
Root: HKCR; Subkey: "MyFileExt\DefaultIcon"; ValueType: string; ValueName: ""; ValueData: "{app}\MyApp.exe,2" 
```

其中“2”是图标索引。

我知道我需要使用某种老式的 Win32 资源文件。

我还在某处发现，如果使用 Visual Studio 2005，可以添加“本机资源文件”，但它在 2008 年不再存在。

是否有可能满足所有这些要求，如果可以，如何满足？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-01-25T20:28:22.700

解决方案实际上很简单，尽管它要求我回想起我第一次遇到 RC 文件......

在纯文本文件中，您可以编写以下内容

```
#include <windows.h>

// The following is some Win32 candy for
// -- the Windows styles in XP, Vista & 7
//    does the UAC too.
1 RT_MANIFEST "App.manifest"
// -- the versioning info, which we find usually in 
//    AssemblyInfo.cs, but we need to add this one
//    because including Win32 resources overrides the .cs
//    file!
VS_VERSION_INFO VERSIONINFO
FILEVERSION     1,0,0,0
PRODUCTVERSION  1,0,0,0
FILEFLAGSMASK   VS_FFI_FILEFLAGSMASK
FILEFLAGS       VS_FF_DEBUG
FILEOS          VOS__WINDOWS32
FILETYPE        VFT_DLL
FILESUBTYPE     VFT2_UNKNOWN
BEGIN
    BLOCK "StringFileInfo"
    BEGIN
        BLOCK "040904E4" // en-US/cp-1252
        BEGIN
            VALUE "CompanyName",      "My Company"
            VALUE "ProductName",      "My C# App"
            VALUE "ProductVersion",   "1.0.0.0"
        END
    END
        BLOCK "VarFileInfo"
        BEGIN
            VALUE "Translation", 0x409, 1252 // en-US in ANSI (cp-1252)
        END
    END
END

// And now the icons.
// Note that the icon with the lowest ID
// Will be used as the icon in the Explorer.
101 ICON "Icon1.ico"
102 ICON "Icon2.ico"
103 ICON "Icon3.ico" 
```

（有关 VERSIONINFO 结构的详细信息可以在 MSDN 中找到：[`VERSIONINFO`结构](http://msdn.microsoft.com/en-us/library/aa381058(VS.85).aspx)）

您使用 进行编译`rc`，它应该是 VS 的一部分，或者在 Windows 平台 SDK 中。文件编译的结果`.rc`是一个`.res`可以包含在 C# 项目的属性页面中的文件——或者在`.csproj`文件本身中添加以下内容。

```
<Win32ResourceFile>C:\path\to\my\resource\file.res</Win32ResourceFile> 
```

编译您的项目并查看资源管理器，信息和图标应该在那里。

CSC 编译器还提供了一个`/win32res`开关，可以将`.res`文件嵌入到您的应用程序中。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T14:35:24.797

就像在 2005 中一样，您可以将图标添加到资源中（通过项目属性）。完成此操作后，转到您在项目资源管理器中添加的图标，每个图标都有一个 BuildAction 属性，说明该资源是如何存储和利用的。

我认为您正在寻找的是 BuildAction 属性的 EmbeddedResource 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T14:35:25.890

新建 WinForms 应用程序 -> 在解决方案资源管理器中展开属性 -> 双击 Resources.resx -> 单击添加资源（下拉菜单还包括添加现有资源）

这些现在应该可以在可视化设计器中或使用 Properties.Resources.[Your Resource Name Here] 的代码中提供给您

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T14:39:18.957

当我需要多个图标时，我将 png/bmp（或任何图像类型）作为图像资源嵌入到应用程序中。在 Visual Studio 中转到项目 -> 属性 -> 资源。

在代码中，您可以在运行时执行以下操作：

```
buttonPlay.Image = Properties.Resources.Navigation_Media_Pause; 
```

或者

```
buttonPlay.Image = Properties.Resources.Navigation_Media_Play; 
```

假设您将 2 个图像资源称为“Navigation_Media_Pause”和“Navigation_Media_Play”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T14:53:02.657

编译应用程序，然后用visual studio打开.exe，然后你就可以添加你想要的所有图标了。

您还可以在 c# 中使用 win32 资源文件做一些事情，但我目前找不到喜欢的东西

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-20T13:47:58.933

我决定将所有图标放入单独的老式普通 win32 c++ *.dll 中。它更方便，我不需要对 versioninfo/win32resources 做任何技巧。

# c - 读取 16 位灰度 TIFF

> ID：428216
> 
> 赞同：0
> 
> 时间：2009-01-09T14:26:11.370
> 
> 标签：c, tiff

我正在尝试使用小型 C 程序读取 16 位灰度 TIFF 文件 (BitsPerSample=16) 以转换为浮点数数组以进行进一步分析。根据标题信息，像素数据位于 2048x2048 像素的单个条带中。编码是小端的。
有了这些标头信息，我期望能够读取一个 2048x2048x2 字节的块并将其解释为 2048x2048 2 字节整数。实际上，我得到的是一张图片，[分为四个象限](http://users.aber.ac.uk/ruw/unlinked/15_inRT_0p457.png)，每个象限为 1024x1024 像素，其中较低的两个仅包含零。前两个象限中的每一个看起来都像我预期的那样：[alt text http://users.aber.ac.uk/ruw/unlinked/15_inRT_0p457.png](http://users.aber.ac.uk/ruw/unlinked/15_inRT_0p457.png)
如果我将[相同的文件读入 Gimp](http://users.aber.ac.uk/ruw/unlinked/15_inRT_0p457_gimp.png)或 Imagemagick，都告诉我他们必须减少到 8 位（这对我没有帮助 - 我需要完整的范围），但像素出现在正确的位置：[alt text http://users.aber。 ac.uk/ruw/unlinked/15_inRT_0p457_gimp.png](http://users.aber.ac.uk/ruw/unlinked/15_inRT_0p457_gimp.png) 这表明我关于如何在一个条带内排列数据的想法是错误的。另一方面，文件必须根据标题信息正确格式化，否则 Gimp 将无法正确处理。我哪里错了？

tiffdump 的输出：
15_inRT_0p457.tiff：
Magic：0x4949 版本：0x2a
目录 0：偏移量 8 (0x8) 下一个 0 (0)
ImageWidth (256) LONG (4) 1<2048>
ImageLength (257) LONG (4) 1<2048 >
BitsPerSample (258) SHORT (3) 1<16>
Compression (259) SHORT (3) 1<1>
Photometric (262) SHORT (3) 1<1>
StripOffsets (273) LONG (4) 1<4096>
方向(274) SHORT (3) 1<1>
RowsPerStrip (278) LONG (4) 1<2048>
StripByteCounts (279) LONG (4) 1<8388608>
XResolution (282) RATIONAL (5) 1<126.582>
YResolution (283 ) ) RATIONAL (5) 1<126.582>
ResolutionUnit (296) SHORT (3) 1<3>
34710 (0x8796) LONG (4) 1<0>
（标签 34710 是相机信息；为了确保这不会产生任何影响，我已经将从图像文件目录末尾到 0x1000 处数据开头的整个范围归零，实际上并没有有什么不同。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T18:25:28.407

我发现了问题 - 它在我的 C 程序中......

我为一个 long 数组分配了内存，并使用 fread() 来读取数据：

```
#define PPR 2048;
#define BPP 2;
long *pix;
pix=malloc(PPR*PPR*sizeof(long));
fread(pix,BPP,PPR*PPR,in); 
```

但由于数据以 2 字节块 (BPP=2) 且 sizeof(long)=4 的形式出现，因此 fread() 将数据密集地打包在分配的内存中，而不是将它们打包成长包。因此，我最终将两行打包在一起，而图片的后半部分是空的。

我已将其更改为循环像素数并每次读取两个字节并将它们存储在分配的内存中：

```
for (m=0;m<PPR*PPR;m++) {
  b1=fgetc(in);
  b2=fgetc(in);
  *(pix+m)=256*b1+b2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T14:38:45.167

你明白，如果 StripOffsets 是一个数组，它就是一个偏移量数组的偏移量，对吧？您可能没有正确地取消引用。

你的平台是什么？你想做什么？如果你愿意在 Windows 上使用 .NET，[我的公司出售一个图像处理工具包](http://www.atalasoft.com/Products/DotImage/Default.aspx)，其中包括一个 TIFF 编解码器，它可以处理几乎任何你可以扔给它的东西，并将返回 16 bpp 图像。我们还有许多在 16bpp 图像上原生运行的工具。

# java - Jogl 着色器编程

> ID：428225
> 
> 赞同：7
> 
> 时间：2009-01-09T14:29:31.830
> 
> 标签：java, opengl, jogl, shader

我刚开始着色器编程（GLSL）并使用 RenderMonkey 创建了一些。现在我想在我的 java 代码中使用这个着色器。有没有我如何做到这一点的简单例子？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-13T07:44:35.470

我找到了一个非常简单的例子

```
int v = gl.glCreateShader(GL.GL_VERTEX_SHADER);
int f = gl.glCreateShader(GL.GL_FRAGMENT_SHADER);

BufferedReader brv = new BufferedReader(new FileReader("vertexshader.glsl"));
String vsrc = "";
String line;
while ((line=brv.readLine()) != null) {
  vsrc += line + "\n";
}
gl.glShaderSource(v, 1, vsrc, (int[])null);
gl.glCompileShader(v);

BufferedReader brf = new BufferedReader(new FileReader("fragmentshader.glsl"));
String fsrc = "";
String line;
while ((line=brf.readLine()) != null) {
  fsrc += line + "\n";
}
gl.glShaderSource(f, 1, fsrc, (int[])null);
gl.glCompileShader(f);

int shaderprogram = gl.glCreateProgram();
gl.glAttachShader(shaderprogram, v);
gl.glAttachShader(shaderprogram, f);
gl.glLinkProgram(shaderprogram);
gl.glValidateProgram(shaderprogram);

gl.glUseProgram(shaderprogram); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T14:35:12.427

我自己没有，但如果我有这些方面的问题，我经常会找到 3D 编程的最佳位置，Java 建议已在[JavaGaming.org](http://www.javagaming.org/)上结束- 我已经有一段时间没有在那里了，但它是始终是一个乐于助人且知识渊博的社区。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-09-26T05:08:51.457

新版本的 Jogl 添加了实用着色器加载/编译和统一设置/获取调用。查看用于选择方法的[API 。](http://jogamp.org/deployment/jogamp-next/javadoc/jogl/javadoc/com/jogamp/opengl/util/glsl/package-summary.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-12-08T17:39:53.397

您可以查看[ogre4j](http://ogre4j.sourceforge.net/)，它是流行的开源[Ogre3D](http://ogre3d.org/)图形引擎的 Java 包装器/端口。对于您的需求，它可能有点重，但对于一个合适的 3D 项目，值得一看。

# c# - 如何使用 .NET 提取 FoxPro 备忘录字段中的数据？

> ID：428237
> 
> 赞同：4
> 
> 时间：2009-01-09T14:32:05.413
> 
> 标签：c#, oledb, visual-foxpro, foxpro

我正在编写一个 C# 程序来将 FoxPro 数据库转换为 XML，除了备注字段为空之外，一切正常。有什么我想转换的东西吗？

我正在使用 C# .Net 3.5 SP1、Visual FoxPro 9 SP 1 OLE DB 驱动程序。连接字符串没问题，因为所有其他数据都被正确提取。

当我将 FoxPro 数据库转换为 SQL Server 时，那里的备注字段也是空白的，所以我不能转换两次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-12T16:55:12.300

最终不得不自己做一些工作，但也许它可以在未来帮助别人：

```
 public static object GetDbaseOrFoxproRawValue(string DBPath, string TableName, string ColumnName, 
        string CompareColumnName, string CompareValue, bool CompareColumnIsAutoKey)
    {
        using (BinaryReader read = new BinaryReader(File.Open(
            Path.Combine(DBPath, TableName + ".dbf"), FileMode.Open, FileAccess.Read, FileShare.ReadWrite)))
        {
            // Is it a type of file that I can handle?
            if (new byte[] { 0x02, 0x03, 0x30, 0x43, 0x63, 0x83, 0x8b,
                             0xcb, 0xf5, 0xfb }.Contains(read.ReadByte()))
            {
                // Skip date.
                read.BaseStream.Seek(3, SeekOrigin.Current);

                // Read useful datas...
                uint RecordCount = read.ReadUInt32();
                ushort FirstRecord = read.ReadUInt16();
                ushort RecordLength = read.ReadUInt16();
                int FieldCount = FirstRecord - 296 / 32;

                // Make sure things aren't stupid.
                ColumnName = ColumnName.ToLower();
                CompareColumnName = CompareColumnName.ToLower();

                // Find target column (field)
                string temp;
                UInt32 CompareFieldOffset = uint.MaxValue, FieldOffset = uint.MaxValue;
                byte CompareFieldLength = 0, FieldLength = 0;
                char FieldType = ' ';
                for (int i = 0; i < FieldCount; i++)
                {
                    read.BaseStream.Seek(32 + (i * 32), SeekOrigin.Begin);
                    temp = Encoding.ASCII.GetString(read.ReadBytes(11)).Replace("\0", "").ToLower();
                    if (temp == CompareColumnName)
                    {
                        read.ReadChar();
                        CompareFieldOffset = read.ReadUInt32();
                        CompareFieldLength = read.ReadByte();
                    }
                    if (temp == ColumnName)
                    {
                        FieldType = read.ReadChar();
                        FieldOffset = read.ReadUInt32();
                        FieldLength = read.ReadByte();
                    }

                    if (CompareFieldOffset != uint.MaxValue && FieldOffset != uint.MaxValue)
                        break;
                }

                // Make sure we can continue.
                if (CompareFieldOffset == uint.MaxValue || 
                    FieldOffset == uint.MaxValue) return null;

                // Iterate through each record to find the one we want.
                for (int index = 0; index < RecordCount; index++)
                {
                    read.BaseStream.Seek(FirstRecord + (index * RecordLength) + CompareFieldOffset, SeekOrigin.Begin);
                    temp = Encoding.Default.GetString(read.ReadBytes(CompareFieldLength)).Replace("\0", "");
                    if (temp == CompareValue)
                    {
                        read.BaseStream.Seek(FirstRecord + (index * RecordLength) + FieldOffset, SeekOrigin.Begin);
                        switch (FieldType)
                        {
                            case 'M':
                            case 'I': return read.ReadUInt32();
                            case 'C':
                            default: return Encoding.Default.GetString(read.ReadBytes(FieldLength)).Replace("\0", "");
                        }
                    }
                }
            }
            else
            {
                return null;
            }
        }

        return null;
    } 
```

只需从中获取结果并将其用作备忘录文件的索引（该代码使用 MSDN 文档非常简单）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T14:44:51.957

我对 C#、FoxPro 或 SQL Server 不是很熟悉，所以在这方面我不能给你太多建议。

但是，如果您找不到合适的驱动程序，您可以考虑自己解析原始数据和备忘录文件。另一个问题已经解决了这个问题：

[从 Python 读取 FoxPro DBF 文件的最简单方法是什么？](https://stackoverflow.com/questions/37535/whats-the-easiest-way-to-read-a-foxpro-dbf-file-from-python)

信不信由你，如果您决定编写自己的 C# 解析器，这些文件格式的解析非常简单。这些规范可从 Microsoft 获得：

*   [Visual FoxPro 文件结构](http://msdn.microsoft.com/en-us/library/d863bcf2(VS.80).aspx)
*   [表文件结构](http://msdn.microsoft.com/en-us/library/st4a0s68(VS.80).aspx)
*   [备忘录文件结构](http://msdn.microsoft.com/en-us/library/8599s21w(VS.80).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T15:45:43.580

我使用 ODBC 链接 VFP 8 表，并且备注字段可以正常工作。我不知道OLEDB是否不同。

此处可能没有 Visual FoxPro 表。许多 VFP 系统使用与它们替换的 FoxPro 2 或 dBase 应用程序相同的表。您可以查看文件头或尝试其他 ODBC 驱动程序之一，看看它们是否工作。

# visual-studio-2005 - Visual Studio 2005 - 项目消失

> ID：428238
> 
> 赞同：0
> 
> 时间：2009-01-09T14:32:20.123
> 
> 标签：visual-studio-2005, tfs, resharper

嗯，一个新的奇怪的问题才刚刚开始。VS 时不时地从解决方案中删除一大堆项目。当它只显示大约 20 个左右时，它会在解决方案资源管理器的顶部显示“42 个项目”。关闭 VS 并重新打开它可以解决这个问题，虽然这有点痛苦，因为 .sln 需要一段时间才能再次打开。

我们运行 VS2005，主要致力于针对 Compact Framework 2.00 的 42 个项目解决方案。我几乎是唯一一个在这里使用 Resharper 的人（尽管我向其他人提出了建议，并且他们偶尔会因为它的美丽而感到震惊）所以我使用 CTRL+T 来查找课程，但是当我一直在按下 SHFT + ALT + L 来选择时解决方案资源管理器中的项目（查看 TFS 中的历史记录）它没有匹配任何东西，这就是我注意到这个问题的方式。

以前有人经历过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-13T15:45:55.073

虽然这并不能直接解决您的问题，但您是否考虑过将其分解为多个解决方案？我想当 VS 开始变得那么大时会窒息，并且您可能正在未经测试（尽管我想不是不受支持）的情况下工作，因为我怀疑 MS 测试人员创建了一个包含 40 个项目的解决方案，都针对 CF.NET。

如果你能打破它，这就是我的建议，我敢打赌问题会消失。另外，您是否尝试过为 VS 安装 Service Pack？如果没有，[这里是](http://www.microsoft.com/downloads/details.aspx?FamilyID=bb4a75ab-e2d4-4c96-b39d-37baf6b5b1dc&DisplayLang=en)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T03:01:47.783

好吧，根据我的旧自我，这个问题现在已经很老了：

> 我想我刚刚重新启动或其他什么，我还没有再看到这个问题。

这似乎与我们得到的解决方案一样接近，所以我现在将其设置为可接受的答案。

# database-design - 最好有数百列或拆分成多个表？

> ID：428243
> 
> 赞同：8
> 
> 时间：2009-01-09T14:34:07.953
> 
> 标签：database-design

我正在设计一个关于机械设备运行的统计数据库。每批数据将包含数百个统计信息，因此我试图决定是创建一个包含数百列的表还是将其拆分为多个表，每个表都包含相关的统计信息。例如，我可以有一个包含与故障相关的统计数据的表，另一个包含与堵塞相关的统计数据的表，等等。

使用多个表会使系统总体上更加复杂，尽管从概念上讲，处理几个较小的表可能比处理一个大的表更容易。

拆分会有什么性能优势吗？似乎查询具有几十列的表可能比查询具有数百列的表更快。

有没有人有这种事情的经验？我在这个项目中使用 Oracle，虽然这可能是我将来在没有数据库的情况下会遇到的问题，所以任何数据库的答案都将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-09T15:02:40.453

我认为我们需要更多地了解您的设计才能正确回答。例如，我很好奇可能有很多与故障有关的列，很多（不同的）与堵塞等有关的列。（堵塞不只是一种故障吗？）

你的设计标准化了吗？大概你没有“jam1”、“jam2”等列？！

假设设计良好且规范化，决定是使用一张宽桌子还是多张窄桌子是各种因素之间的权衡：

*   是否所有/大多数记录都有所有类型的统计信息？是 => 一张桌子，没有 => 很多
*   您是否经常需要同时查询所有类型的统计信息？是 => 一张桌子，没有 => 很多
*   您是否在同一个屏幕上同时维护所有不同的统计数据？是 => 一张桌子，没有 => 很多
*   您是否可能达到任何数据库限制，例如每个表最多 1000 列？

无论采用哪种方式，您都可以使用视图来呈现替代结构，以方便开发人员：

*   一张表：许多视图选择特定类型的统计信息
*   许多表：将所有表连接在一起的视图

## 更新

从您的评论中，我现在知道您对机器上 40 个不同位置的卡纸进行了计数，而其他类型的统计数据也属于类似性质的计数。这表明以下表格设计：

```
create table machines (machine_id ... primary key, ...);
create table machine_stats 
   ( machine_id references machines
   , stat_group -- 'jams', 'malfunctions' etc.
   , stat_name  -- 'under the hood', 'behind the door' etc.
   , stat_count 
   ); 
```

正如有人在下面评论的那样，这些使您可以更轻松地汇总统计信息 - 在统计类型内或跨统计类型。如果需要将新的统计信息添加到统计类型，它也很容易扩展。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T14:51:09.477

当我在一个表中看到数百列时，我倾向于怀疑数据模式没有被正确规范化。数百列真的是独一无二的，还是它们是可以归一化为更小的表的相似事物组？

如果您可以减少列数，您就有可能减少所处理的数据总量，从而在多个级别上提高性能。例如，如果您有一条包含 1000 字节数据的记录，并且您想为每条记录更改 1 个字节，则可能会不必要地获取和存储 999 字节。这确实会影响性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T14:49:48.030

规范化可确保您不会在架构中重复数据。

当然，你应该走多远是有限制的。7 个或更多表的 JOINS 性能不佳。

但是一张怪物桌子？我会打破它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T15:00:24.840

您的意思是 100 种类型的统计数据吗？

一些医学数据库已经尝试了一种称为“实体属性值”或“EAV”的模式或习语（你可以谷歌这些术语）：原因是关于患者有无数不同类型的事实，可能有也可能没有为任何给定的患者捕获，并且 EAV 是一种更好的方式来存储它而不是在一个表中有无数不同的列。

但是要注意 EAV 是有争议的：有人说这是“代码味道”和典型的新手错误；其他人说它偶尔（或很少）有用，但取决于（指定和拥有）对元数据的良好支持。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T15:00:49.847

我倾向于不喜欢列太多的表格。您可能会考虑的一种选择是将统计信息作为行存储在统计信息表中：

```
CREATE TABLE Statistics (id AS INTEGER PRIMARY KEY, statusType As VarChar,
statusValue As Float); 
```

然后，您只需为要跟踪的每个状态添加一个新行。从数据库的角度来看，这要干净得多，但它确实使获取数据的报告变得更加棘手。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T14:53:44.853

在这种情况下，我会创建几个表。一个是机器表。一个是问题查找表。最后，两者之间的联结表还包含与状态相关的信息。维护会更容易，写疯狂的报告也会更容易。此外，添加新类型的状态也将更容易。

```
machine
id
name
description

status_flag
id
caption

machine_history
machine_id
status_flag_id
information 
```

然后您可以执行以下操作： select count(distinct machine_id) from machine_history where status_flag_id = 23 and information < 5;

唯一的事情是 machine_history 表中的信息字段可能需要包含数字或字符。如果是这种情况，我会创建两个信息字段，以免影响性能。

此外，我假设有一个编程组件可以让您创建一些方法来轻松处理这些数据。

# java - 用于网络的 Java

> ID：428254
> 
> 赞同：0
> 
> 时间：2009-01-09T14:36:17.917
> 
> 标签：java

我发布了这个问题：[https](https://stackoverflow.com/questions/418597/java-and-net-for-php-programmer) : //stackoverflow.com/questions/418597/java-and-net-for-php-programmer 我得到的答案并没有真正帮助我。

我在 sun 阅读了一些教程。我理解的基本语法。我不明白并且真正需要的事情（因为我认为我的公司会告诉我开始使用这个）是学习如何使用 java 为 web 工作。我是一名 php 程序员，几个月前我做了一些 asp.net c#。我真的不明白如何在网络上使用 java。

我安装了netbeans。当我开始一个网络项目时，我也会被问到我想要什么框架。我不知道任何 java 框架（我知道 spring 但从未真正使用过它）。没有关于如何为网络做一些java的简单教程吗？？？当我第一次接触 php 时，我从来没有遇到过这么多问题 :(

有人帮助我，或者至少为我指明一个好的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T14:40:41.777

您可能会发现[这个](https://stackoverflow.com/questions/125160/java-developer-moving-to-web-design-easiest-transition)问题很有帮助。

您真正需要知道的只是 HTML、Java 和[JSP](http://java.sun.com/products/jsp/)。

[使用JSP](http://java.sun.com/products/jsp/)和 Java创建动态内容非常容易。您还需要像[Tomcat](http://tomcat.apache.org/)或[Glass Fish](http://glassfish.java.net/)这样的网络服务器。

就后端 Java 代码而言，它与桌面应用程序没有区别。您唯一要更改的是用户界面。切换到 Web 界面的最大挑战之一是它在设计上是无状态的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T15:15:51.160

这些框架使 Web 编程更容易，它们不是必需的。您可以使用普通的旧 servlet 和 JSP（使用 Tomcat 或 JBoss 等 Web 应用程序容器）编写 Web 应用程序，甚至可以自己完成所有 HTTP I/O（显然这对 Tomcat 等毫无意义）。

Spring 和 Hibernate 等框架类似于 CakePHP 等 PHP 框架，它们使开发更容易，它们对程序员强制执行合理模式 (MVC)，抽象代码对于这种类型总是以相同的方式完成的应用。是的，它们在不同程度上限制了你的选择和能力，并限制了你可以采取的行动。有些人比其他人重得多。但是在 Java 世界中有很多选择，这是一种优势，但您只需要花时间评估它们，并根据您的能力选择一个。

以支柱和瓷砖为例。您可以简单地将 Struts 用作 MVC 系统，并避免使用它提供的所有实用 JSP 标记。重写最终自己使用的功能需要很短的时间，但那是你没有的时间，然后是调试，以及你无法解释的特定领域知识和经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T14:50:50.023

你熟悉MVC吗？Java中有多个实现它的框架。Struts 是比较流行的一种。开始使用 Struts 并完成教程可能会有所帮助。

*   本[教程](http://struts.apache.org/2.1.2/docs/struts-2-spring-2-jpa-ajax.html)是一个很好的教程，它还将向您介绍 Spring。
*   本[教程](http://www.netbeans.org/kb/60/web/quickstart-webapps-struts.html)处理 netbeans 中的 struts

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T15:45:14.907

在技​​术方面，您可以开始下载[Tomcat](http://tomcat.apache.org/)并对练习和文档进行编码。

通过“架构”sie，您在 Java 中编码业务逻辑，即所有通过通信客户端-服务器（请求）获取参数的组件，对其进行操作并使用它来创建结果。

这个结果被提供给通信服务器 - 客户端（响应）并且它出现在网页中，带有表示层（JSP 等）。

我知道，这种解释非常不准确，也不是很“正统”。重要的是你明白。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T15:46:05.497

编写 Java Web 应用程序时（在大多数情况下）使用的编程模型实际上是 J2EE 的一个子集。不是一门火箭科学，但至少需要知道一点。熟悉 J2EE Web 容器、J2EE Web 应用程序、它的描述符 (web.xml)、Servlet（实际上是任何 J2EE Web 应用程序的基本“构建基石”）的概念，当然还有 JSP。

Sun 在他们的网页上有很多不错的教程。用“site:sun.com”谷歌搜索上述任何一个术语通常会带来很好的结果（例如，关于 Servlet 概念的这个：http: [//java.sun.com/products/servlet/articles/tutorial/](http://java.sun.com/products/servlet/articles/tutorial/)）。

I'd also forget about web frameworks first, and start with the J2EE stuff, then MVC as a design pattern. After that, go into the web frameworks. Use of a framework is usually of a great help, but even when using one, you still need to know the basics.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-10T13:35:19.363

Since you're using NetBeans, start with the tuturials they have on their site. [http://www.netbeans.org/kb/docs/web/quickstart-webapps.html](http://www.netbeans.org/kb/docs/web/quickstart-webapps.html)

Go through the simple tutorials on the site before you start going into the details on any frameworks.

Java webapps are pretty simple. You have your Java classes (.java) that handle your business logic and your .jsp files that handle the presentation. Try and keep them seperate. You also want to familiarize yourself with the JSTL tags and el (expression language) syntax

# java - 如何在 Swing 中最好地布置这些组件？

> ID：428256
> 
> 赞同：5
> 
> 时间：2009-01-09T14:36:42.953
> 
> 标签：java, swing, layout

对于需要显示图像中显示的组件的 JPanel，最好的方法/LayoutManager 是什么？（请注意，当窗口大小改变时，字段应该水平调整大小，而不是标签）。

我目前正在尝试（并且正在努力）使用 GridBagLayout 来做到这一点。这是正确的方法还是有更好的方法？我是否应该尝试划分+征服单独的部分？

任何想法或建议将不胜感激。:-)

[http://img261.imageshack.us/img261/2091/layouthb6.png](http://img261.imageshack.us/img261/2091/layouthb6.png)

PS如果你读到这里没有图片，请耐心等待我修复它！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-09T14:52:11.317

I would look at nesting `JPanels`. It would be very easy to make each row a separate `JPanel` and then just stack the `JPanels`.

Otherwise you can use the [`GridBagLayout`](http://java.sun.com/javase/6/docs/api/java/awt/GridBagLayout.html). That is the one I use for more control over where components are placed.

Using `GridBagLayout` you can layout a row by incrementing the [`GridBagConstraint`](http://java.sun.com/javase/6/docs/api/java/awt/GridBagConstraints.html)`.gridx` and then resetting `GridBagConstraint.gridx = 0` and `GridBagConstraint.gridy++` to move to the next row.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T15:17:15.353

I would suggest a third party free layout manager. [MigLayout](http://www.miglayout.com/ "MigLayout") comes to mind (check the example form at the bottom of the linked page), or [JGoodies FormLayout](http://www.jgoodies.com/freeware/forms/), which is especially good at formslike these.

The standard layout managers are good, but whoefully inadequate for frequent use for screens like these (the new GroupLayout used by the Matisse designer in Netbeans wasn't built for nothing). The linked layout managers are a lot easier to use and maintain IMHO.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-12T06:55:42.523

我肯定会使用[DesignGridLayout](https://designgridlayout.dev.java.net)：

```
DesignGridLayout layout = new DesignGridLayout(this);
layout.row().grid(label0).add(field0);
layout.emptyRow();
layout.row().grid(label1).add(field1);
layout.row().grid(label2).add(field2);
layout.row().grid(label3).add(field3);
layout.row().grid(label4).add(field4);
layout.emptyRow();
layout.row().grid(label5).add(field5).grid(label6).add(field6);
layout.row().grid(label7).add(field7).grid(label8).add(field8);
layout.emptyRow();
layout.row().grid(label9).add(field9); 
```

免责声明：我是 DesignGridLayout 的作者之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T15:11:55.113

If you can use external code, take a look at the [JGoodies](http://www.jgoodies.com/freeware/forms/index.html) layout managers.

Personally, I find GridBagLayout to be more trouble than it's worth -- to the extent that I've written my own layout managers to avoid it.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T15:14:12.177

I personally prefer [GroupLayout](http://weblogs.java.net/blog/tpavek/archive/2006/02/getting_to_know_1.html).

Even if you're not using a GUI builder you can use the layout by hand and it's fairly simple and straightforward to work with if you understand the concepts.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T15:28:18.683

TableLayout 将是我的选择，您可以使用诸如 TableLayout.FILL 之类的常量来自动调整大小并指定固定的像素宽度。

[表格布局](https://tablelayout.dev.java.net/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T15:55:51.110

您的布局看起来基本上是由“线条”组成的。所以就个人而言，我会：

*   使用 Box.createVerticalBox() 创建一个垂直框；这将垂直堆叠其组件-实际上，让您添加行
*   为每一行创建一个面板：我认为您可以使用带有 BorderLayout 的 JPanel （以及左侧的标签，文本字段作为中心组件），或者再次使用 Box.createHorizo​​ntalBox()，然后向其中添加标签和文本字段, 具有适当的最小/首选大小
*   您可以在需要行分隔符的垂直框中添加“支柱”
*   带有两组标签/字段的行需要一些特殊处理，但它本质上只是一个水平框，里面有两条“行”。

就个人而言，我从来没有用驳船杆接触过 GridBagLayout。也许只有我一个人，但我发现并发算法和机器代码编程比理解 GridBagLayout 更容易......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-10T21:17:22.943

`GridBagLayout`， 当然。

如果表格只是这样，那么您确实需要多个`JPanel`. （如果您有按钮，您可能还需要一个，具体取决于它们的位置/方式）

字段 0 - 4 和 9 将`gridwidth`设置为 4，其他为默认值（1，但您无需将其设置为 1）

字段组之间的“空间”可以通过插入来实现。

（至少对于这个布局）我不建议第三方布局管理器。`GridBagLayout`并不复杂。只需要（一点点）时间来适应它。

Visual Editor + Eclipse 可以轻松为您完成这些工作。（我对 Netbeans 及其 Swing 开发不是很满意。尝试过，但从未爱上。可能是我太沉迷于 Eclipse）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-10T16:06:45.517

从 Java SE 6 开始，您可以使用[GroupLayout](http://java.sun.com/javase/6/docs/api/javax/swing/GroupLayout.html)

这很容易，看起来就像你想要的那样。

对于这个窗口：

[替代文字 http://img165.imageshack.us/img165/8237/sampleusinggrouplayoutca2.png](http://img165.imageshack.us/img165/8237/sampleusinggrouplayoutca2.png)

我有这个代码：

```
 // Layout the components using the new GroupLayout added
    // in java 1.6.
    // Adding to the main frame
    private void layoutComponents(){
        JPanel panel = new JPanel();

        GroupLayout layout = new GroupLayout(panel);
        panel.setLayout(layout);

        layout.setAutoCreateGaps(true);         
        layout.setAutoCreateContainerGaps(true);

        SequentialGroup hGroup = layout.createSequentialGroup();

        JLabel nameLbl  = new JLabel("Name");
        JLabel countLbl = new JLabel("Amount");
        JLabel dateLbl  = new JLabel("Date(dd/MM/yy)");
        hGroup.addGroup(layout.createParallelGroup().
                addComponent(nameLbl).
                addComponent(countLbl).
                addComponent(dateLbl).
                addComponent(go));

        hGroup.addGroup(layout.createParallelGroup().
                addComponent(name).
                addComponent(count).
                addComponent(date));

        layout.setHorizontalGroup(hGroup);

        SequentialGroup vGroup = layout.createSequentialGroup();

        vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
                addComponent(nameLbl).
                addComponent(name));

        vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
                addComponent(countLbl).
                addComponent(count));

        vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
                addComponent(dateLbl).
                addComponent(date));

        vGroup.addGroup(layout.createParallelGroup(Alignment.BASELINE).
                addComponent(go));
        layout.setVerticalGroup(vGroup);

        frame.add( panel , BorderLayout.NORTH );
        frame.add( new JScrollPane( textArea ) );
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-23T17:17:35.467

我认为，在所有标准布局中，GridBagLayout 应该最适合您的需要。

您可以尝试类似以下示例，其中我使用 addToLayout 将复杂的 GridBagConstraints 构造函数简化为我真正需要的。

但是，如果您可以使用 IDE，这确实可以使事情变得更容易（例如 NetBeans 中的 Matisse）。

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class GridBagLayoutTest extends JPanel {

    public GridBagLayoutTest() {
        setLayout(new GridBagLayout());
        addToLayout(new JLabel(     "Label 0" ), 0, 0, 0d, 1);
        addToLayout(new JTextField( "Field 0" ), 0, 1, 1d, 4);
        addToLayout(new JLabel(     "*"       ), 0, 5, 0d, 1);
        addToLayout(new JPanel()               , 1, 0, 0d, 1);
        addToLayout(new JLabel(     "Label 1" ), 2, 0, 0d, 1);
        addToLayout(new JTextField( "Field 1" ), 2, 1, 1d, 4);
        addToLayout(new JLabel(     "*"       ), 2, 5, 0d, 1);
        addToLayout(new JLabel(     "Label 2" ), 3, 0, 0d, 1);
        addToLayout(new JTextField( "Field 2" ), 3, 1, 1d, 1);
        addToLayout(new JLabel(     "*"       ), 3, 2, 0d, 1);
        addToLayout(new JLabel(     "Label 3" ), 3, 3, 0d, 1);
        addToLayout(new JTextField( "Field 3" ), 3, 4, 1d, 1);
        addToLayout(new JLabel(     "*"       ), 3, 5, 0d, 1);
    }

    private void addToLayout(java.awt.Component comp, int y, int x, double weightx, int gridwidth) {
        add(comp, new GridBagConstraints(x, y, gridwidth, 1, weightx, 0d,
                                         GridBagConstraints.CENTER, GridBagConstraints.BOTH,
                                         new java.awt.Insets(2, 4, 2, 4), 0, 0 ) );
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(new GridBagLayoutTest());
        frame.setSize(800, 600);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-16T22:38:15.680

您可以将布局描述为 HTML 表格，然后使用此工具： [http ://www.onyxbits.de/content/blog/patrick/java-gui-building-gridbaglayout-manager-made-easy](http://www.onyxbits.de/content/blog/patrick/java-gui-building-gridbaglayout-manager-made-easy)

将布局转换为 Java 代码以配置 GridBagLayout。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-10T13:21:57.240

在 Netbeans 推出他们的 gui builder 之前，我曾经真的很讨厌做 Swing 布局。你可以在这里看到一个演示。[http://rghosting.co.cc](http://rghosting.co.cc)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-01-10T16:37:04.770

[GridBagLayout](http://java.sun.com/javase/6/docs/api/java/awt/GridBagLayout.html)绝对是这方面的最佳选择。而[NetBeans](http://www.netbeans.org/) [Matisse](http://www.netbeans.org/features/java/swing.html)可能是实现这一目标的最快方法。如果您使用的是其他 IDE，只需复制并粘贴自动生成的代码。

# asp.net - 在datalist下使用控制事件

> ID：428257
> 
> 赞同：2
> 
> 时间：2009-01-09T14:37:03.063
> 
> 标签：asp.net, events, datalist

我有一个 datalist 控件，其中包含一些控件（例如：按钮）。我想在 datalist 控件中的按钮的单击事件中编写一些代码。但是在页面后面的代码中，我看不到数据列表中的控件名称。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T14:44:32.750

将您的事件附加到数据列表的 OnItemCreated 事件中的控件。

**编辑添加样本**

```
private void DataList_ItemCreated(object sender,
    System.Web.UI.WebControls.DataListItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            Button btn = (Button)e.Item.FindControl("btnWhatever");
            if (btn != null) btn.Click += new EventHandler(SomHandler);
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-10T11:24:05.573

如果您不想为所有子事件添加处理程序，则可以将代码添加到 OnItemCommand。

```
<asp:DataList id="DataList1" runat="server">
<ItemTemplate>
<asp:Button ID="btnDoSomething" Runat=server CommandName="DoSomething"
CommandArgument="<%# DataBinder.Eval(Container.DataItem, "SomeID")
%>"></asp:LinkButton>
</ItemTemplate>
</asp:DataList>

protected void DataList1_ItemCommand(
object source, DataListCommandEventArgs e)

{

  if (e.CommandName == "DoSomething")

  {

    //Do stuff

  }

} 
```

# refactoring - 帮助重构这个混乱的嵌套if方法

> ID：428262
> 
> 赞同：3
> 
> 时间：2009-01-09T14:38:00.753
> 
> 标签：refactoring, nested-if

好的，我想要一些意见，我该如何解决这个混乱的方法！

它有很多嵌套的“if”语句。

但是意识到我必须确切地知道方法失败的地方，目前在每个相应的“else”子句中我正在记录错误（失败的“if”条件）。

**注意：忽略事物背后的任何逻辑，请关注样式和结构，因为我已经整理了所有函数名称等。**

这是骨架结构：

```
 public void MyMethod()
{

   try
   {
    bool tryAgain = false;

    string filename = DownloadFile();

    if( IsFileFormatOk(filename) )
    {

        blah = GetBlah(filename);

        if(blah.ID > 0)
        {

            if(ImportFile(filename)
            {

                string username = GetUserFromFile(filename);

                if(isValidUser(username))
                {

                    // few more levels to go
                    //
                    //
                    //

                }
                else
                {
                    LogError(filename, ...); // specific to this if statement
                    tryAgain = true;
                }

            }
            else
            {

                LogError(filename, ...); // specific to this if statement
                tryAgain = true;
            }

        }
        else
        {
            LogError(filename, ...); // specific to this if statement
            tryAgain = true;
        }

    }
    else
    {
        LogError(filename, ...); // specific to this if statement
        tryAgain = true;
    }

   }
   catch
   {
   }
   finally
   {
    if(tryAgain)
    {
        // blah
    }
   }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T14:49:41.413

我会努力改变你的逻辑，这样你就可以尽快从方法中返回，而不是嵌套更多的逻辑。例如：

```
//  GOOD
if (!file.exists())
    return;
// Rest of the code

// BAD
if (file.exists()){
    // Code goes here
}
return; 
```

这可能有助于消除一些嵌套并使事情变得不那么复杂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T15:09:08.240

我猜想有相当多的逻辑等待在其他地方提取，但无论如何这里有另一种扁平化嵌套的方法：

```
try
{
  if( !IsFileFormatOk(filename) )
    throw new MySpecificException(...); // pass specific log params

  blah = GetBlah(filename);

  if(blah.ID <= 0)
    throw new MySpecificException(...); // pass specific log params

  if(!ImportFile(filename)
    throw new MySpecificException(...); // pass specific log params

  string username = GetUserFromFile(filename);

  // ...
}
catch (MySecificException e)
{
  LogError(filename, e.LogParams)
  // blah
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T14:45:30.877

您可以首先将顶层 if (true 分支) 放在单独的方法中。并继续直到满意为止。

所以通常你会改变：

```
if (condition) {
  // Block1
} else {
  // Block2
} 
```

进入

```
if (condition) {
  Block(...);
} else {
  Block2(...);
} 
```

请注意需要传递给新方法的局部变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T14:54:59.487

编辑：既然我知道有这么多级别，我们需要采取另一种方法。我不知道“重试”位中有什么，但是您需要更改逻辑，以便测试失败案例，而不是成功案例。如果失败，记录并返回（或以某种方式再次尝试所需的任何操作）。否则，您可以继续在 if 之外。

```
if(EndOfWorld)
{
    WriteLastLogEntryEver();
    return; //run away
}

//we're safe (for now)
ChargeOnAhead(); 
```

* * *

在我知道还有更多*级别*的嵌套 if 之前，我提出了以下建议。

```
public void MyMethod()
{

   try
   {
    bool tryAgain = false;

    string filename = DownloadFile();

    if( IsFileFormatOk(filename) )
    {

        tryAgain = DoBlah(filename, ...);
    }
    else
    {
        LogError(filename, ...); // specific to this if statement
        tryAgain = true;
    }

   }
   catch
   {
   }
   finally
   {
    if(tryAgain)
    {
        // blah
    }
   }

}

private bool DoImport(string filename, blah)
{

    if(ImportFile(filename))
    {

            // and so forth!
            return false;
    }

    LogError(filename, ...); // specific to this if statement
    return true;
}

private bool DoBlah(string filename)
{
        blah = GetBlah(filename);

        if(blah.ID > 0)
        {

            return DoImport(filename, ...);

        }

        LogError(filename, ...); // specific to this if statement
        return true;

} 
```

我敢肯定，您可以对它进行更多重构，并将其`// and so forth`引入一种新方法。这取决于你要来回传递多少东西。如果您传递的太多，请考虑作为参数或类字段是否更有意义。

* * *

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T15:04:31.433

您应该尝试让您调用的所有方法在发生错误时抛出异常。抛出的异常应包含您希望记录的任何错误消息。创建一个 LogError() 方法，该方法接受任何异常并记录嵌入的消息。像这样（伪代码）：

```
MyMethod()
{
  try
  {
    string filename = DownloadFile()
    blah = GetBlah(filename)
    ImportFile(filename)
    ...
  }
  catch DownloadFileException, GetBlahException, ImportFileException e
  {
    LogError(e)
  }
} 
```

当然，您必须创建所有这些异常，但这非常简单。在大多数语言中，您只需将顶级 Exception 对象的子类化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T15:21:05.127

这是 jjnguy 的建议，已实施：

```
public void MyMethod() {
    try
    {
        bool tryAgain = false;
        string filename = DownloadFile();

        if( !IsFileFormatOk(filename) )
        {
            LogError(filename, ...); // specific to this if statement
            tryAgain = true;
            return;
        }

        blah = GetBlah(filename);
        if(blah.ID <= 0)
        {
            LogError(filename, ...); // specific to this if statement
            tryAgain = true;
            return;
        }

        if(!ImportFile(filename))
        {
            LogError(filename, ...); // specific to this if statement
            tryAgain = true;
            return;
        }

        string username = GetUserFromFile(filename);

        if(!isValidUser(username))
        {
            LogError(filename, ...); // specific to this if statement
            tryAgain = true;
            return
        }

        // few more levels to go
        //

    finally
    {
        if(tryAgain)
        {
            // blah
        }
   }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-10T10:11:32.363

对于这类问题，[http://refactormycode.com/](http://refactormycode.com/)非常有用。

尽管 SO 人也确实致力于重构一些代码。;)

# python - 为什么托管属性只适用于类属性而不适用于 python 中的实例属性？

> ID：428264
> 
> 赞同：2
> 
> 时间：2009-01-09T14:38:13.293
> 
> 标签：python, attributes, descriptor

为了说明问题，请检查以下代码：

```
class MyDescriptor(object):
  def __get__(self, obj, type=None):
    print "get", self, obj, type
    return self._v
  def __set__(self, obj, value):
    self._v = value
    print "set", self, obj, value
    return None

class SomeClass1(object):
  m = MyDescriptor()

class SomeClass2(object):
  def __init__(self):
    self.m = MyDescriptor()

x1 = SomeClass1()
x2 = SomeClass2()

x1.m = 1000
# ->  set <__main__.MyDescriptor object at 0xb787c7ec> <__main__.SomeClass1 object at 0xb787cc8c> 10000
x2.m = 1000 # I guess that this overwrites the function. But why?
# ->
print x1.m
# -> get <__main__.MyDescriptor object at 0xb787c7ec> <__main__.SomeClass1 object at 0xb787cc8c> <class '__main__.SomeClass1'> 10000
print x2.m
# -> 10000 
```

1.  为什么**x2.m = 1000**不调用**__set__** -函数？似乎这会覆盖该功能。但为什么？
2.  x1中的**_v**在哪里？它不在**x1._v中**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T14:55:59.717

回答你的第二个问题，在哪里`_v`？

您的描述符版本保留`_v`在描述符本身中。描述符的每个实例（类级实例`SomeClass1`，以及类对象中的所有对象级实例都`SomeClass2`将具有不同的`_v`.

看看这个版本。此版本更新与描述符关联的对象。这意味着对象（`SomeClass1`或`x2`）将包含该属性`_v`。

```
class MyDescriptor(object):
  def __get__(self, obj, type=None):
    print "get", self, obj, type
    return obj._v
  def __set__(self, obj, value):
    obj._v = value
    print "set", self, obj, value 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T15:11:27.893

你应该阅读[这个](http://docs.python.org/reference/datamodel.html#implementing-descriptors)和[这个](http://users.rcn.com/python/download/Descriptor.htm)。

它覆盖了该函数，因为您没有重载 SomeClass 的`__set__`and`__get__`函数，而是 MyDescriptor 类的函数。也许您希望 SomeClass 继承 MyDescriptor？SomeClass1 打印“get”和“set”输出，因为它是一个静态方法 AFAIK。有关详细信息，请阅读上面的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T18:17:28.203

我找到了**x1的****_v**：它在**SomeClass1.__dict__['m']._v**

 ****对于 S.Lott 在另一个答案中建议的版本：**_v**在**x1._v**

# algorithm - 在这种情况下，什么是循环引用检查的好算法？

> ID：428267
> 
> 赞同：16
> 
> 时间：2009-01-09T14:38:23.997
> 
> 标签：algorithm

鉴于您有以下课程（糟糕的 C#，但您得到了漂移）：

```
public abstract class AmICircular
{
  // assume Children is never null
  private List<AmICircular> Children {get;set;}

  // assume target is never null
  public void Add(AmICircular target)
  {
    target.PerformCircularReferenceCheck(this);
    Children.Add(target);
  }

  // throws when a circular reference is detected
  protected abstract void PerformCircularReferenceCheck(AmICircular target);
} 
```

您将如何实施 PerformCircularReferenceCheck？而且，不，这不是家庭作业。

天真的实现，imo，将对`this`所有子项进行参考检查，然后调用 PerformCircularReferenceCheck on `target`，传递`this`。但我想知道是否有更好的、被证明有效的方法来做到这一点，例如添加一种方法来折叠整个子引用树，`this`然后`target`检查结果（对堆栈的压力更小？），或者可能避免完全通过使用 List<T> 以外的不同（可能是自检！）集合进行检查？

你会怎么做？

*编辑：正如 stefan 指出的那样，只需要确定目标是否可以到达*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-09T16:32:17.887

在您从不添加自引用（稍后定义）对象的情况下，您的数据结构描述了一个有向无环图（[http://en.wikipedia.org/wiki/Directed_acyclic_graph](http://en.wikipedia.org/wiki/Directed_acyclic_graph)），其中 IAmCircular 的每个实例类描述具有一组直接后继节点 = 子节点的节点。

假设到目前为止，还没有创建循环，那么您想要的函数 PerformCircularReferenceCheck 只需要检查“this”是否可以从“target”到达。如果是，它应该返回一个异常。

复杂性理论明智，这个问题是 ST-connectivity（[http://en.wikipedia.org/wiki/St-connectivity](http://en.wikipedia.org/wiki/St-connectivity)）并且对于 NL 类是完整的（[http://en.wikipedia.org/wiki/NL_(complexity )](http://en.wikipedia.org/wiki/NL_(complexity)) )，即使您将输入限制为无环图（这是您的情况）。

特别是，Savitch 定理 ( [http://en.wikipedia.org/wiki/Savitch%27s_theorem](http://en.wikipedia.org/wiki/Savitch%27s_theorem) ) 提供了一种建设性的方法来创建 O(log^2 n) 空间算法（在时间 O(n^2) 中运行）它，其中 n 是节点数。

此外，由于 NL 完全，不太可能存在在空间 O(log n) 中运行的算法（即仅使用恒定数量的指向节点的指针），因为这意味着不太可能的 NL = L。编辑：在特别是，有人建议的兔子和乌龟算法的小变化将不起作用（因为他们会使用太少的空间）。

我建议实施简单的 O(n) 时间、O(n) 空间算法，该算法为“目标”生成其后继集（递归）并验证“this”是否出现在该集中。

请注意，集合的显式构造很重要。否则，如果您只是递归地验证“目标”的任何继任者是否可以访问“此”，您就有可能在指数时间内运行。

我推荐了 O(n) 时间/O(n) 空间算法，因为它在时间上是你能做的最好的，而且你已经在使用 O(n) 空间来存储你的数据结构。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-09T16:01:54.890

迭代解决方案是定义一个集合 R（可达）和 CR（可达的孩子）。

你从`R = {this}`and开始`CR = {this.children}`。

在每个步骤中，您检查 CR 是否包含`this`（或`target`，取决于您的确切目标）。如果不是，则将 CR 添加到 R 并将 CR 设置为 CR 的子级，并从 CR 中删除 R 的元素。

如果 CR 为空，则 R 是从 可到达的完整元素集`this`。

# pdf - 在桌面应用程序中显示 PDF

> ID：428274
> 
> 赞同：0
> 
> 时间：2009-01-09T14:39:58.987
> 
> 标签：pdf

我有一个需要在桌面应用程序中直接显示 PDF 的客户端。显然，使用 Adob​​e Reader 或其他一些第 3 方查看器是不可接受的。

更复杂的是，该应用程序需要同时在 Windows 和 Mac OS X 上运行。

有谁知道如何做到这一点？我更喜欢跨平台解决方案，但 Windows 和 OS X 的单独解决方案也可能有效。

我还没有为此绑定到任何特定的开发环境，但 Mac/Windows 支持很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T14:44:53.827

[foxit reader SDK](http://www.foxitsoftware.com/pdf/sdk/dll/)支持这两个平台，但有一点限制（只生成 PDF 的位图，所以没有交互等）[Adobe 也有一个 SDK](http://www.adobe.com/devnet/pdf/library/)。

或者，您可以尝试使用插件 API 在您的应用程序中托管 Acrobat，就像 Internet Explorer / Firefox / 等一样。但是我不知道它在 Mac 上是如何工作的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T14:45:59.660

Adobe 在 windows 上提供 acropdf.dll。它允许您在 Windows 上任何支持 COM 的环境中嵌入 PDF 查看器。他们可能会在 Mac 上提供类似的东西。有几个用于显示 PDF 的第三方库。我在一个项目上使用[GD Viewer](http://www.gdpicture.com/products/gdviewer-ocx-image-viewer-activex.php)，它似乎工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T15:32:19.130

在 OS X 方面，Cocoa 具有非常易于使用的 PDFKit 框架。只需将 PDFViewer 放到您的笔尖上，给它一个具有正确文件名的 PDFDocument，就完成了。Preview.app 是围绕 PDFKit 构建的，几乎所有你在那里看到的东西都可以在你自己的应用程序中“免费”获得。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T16:21:46.207

使用 Adob​​e Air 显示来自本地来源的 PDF 怎么样？

[链接到 SDK](http://www.adobe.com/products/air/tools/sdk/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T14:51:23.783

复制完整的 PDF 渲染很可能过于复杂，不值得。IIRC 自 Adob​​e Reader 版本 7 以来，PDF 规范中就包含了诸如 3D 渲染之类的东西。Adobe 提供了一个 PDF 工具包，可以满足您的需求，但这需要与阅读器进行 COM 交互。

不过，您也许可以在您的应用程序中提供它，请查看 EULA。[看看套件](http://www.adobe.com/devnet/pdf/library/)。在[开发人员中心](http://www.adobe.com/devnet/acrobat/)，您应该能够轻松地确定它是否满足您的需求。

# c# - 如何在远程计算机上执行命令？

> ID：428276
> 
> 赞同：25
> 
> 时间：2009-01-09T14:40:28.437
> 
> 标签：c#, .net, process, command

我在服务器中有一个共享文件夹，我需要对某些文件远程执行命令。我怎么做？

需要在服务器上运行哪些服务才能使其正常工作？

一些细节： 只能使用 C#。服务器中不能安装任何东西。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-02T12:48:15.153

另一种解决方案是使用[WMI.NET 或 Windows Management Instrumentation](http://msdn.microsoft.com/en-us/library/bb404655.aspx)。

> 使用 .NET Framework 命名空间 System.Management，您可以使用 Windows Management Instrumentation (WMI) 自动执行管理任务。

**代码示例**

```
using System.Management;
...
var processToRun = new[] { "notepad.exe" };
var connection = new ConnectionOptions();
connection.Username = "username";
connection.Password = "password";
var wmiScope = new ManagementScope(String.Format("\\\\{0}\\root\\cimv2", REMOTE_COMPUTER_NAME), connection);
var wmiProcess = new ManagementClass(wmiScope, new ManagementPath("Win32_Process"), new ObjectGetOptions());
wmiProcess.InvokeMethod("Create", processToRun); 
```

如果您在身份验证方面遇到问题，请检查 DCOM 配置。

1.  在目标计算机上，`dcomcnfg`从命令提示符运行。
2.  扩张`Component Services\Computers\My Computer\DCOM Config`
3.  找到用 GUID 标识的 Windows 管理指令`8BC3F05E-D86B-11D0-A075-00C04FB68820`（您可以在详细信息视图中看到它）。
4.  编辑属性，然后在权限选项卡下添加您尝试登录的用户名。
5.  您可能需要重新启动服务或整个机器。

**注意：**用于远程进程的所有路径都必须是目标机器的本地路径。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-09T14:56:23.227

You could use SysInternal's [PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T14:58:42.473

IMO, in your case you can try this:

> 1.  Map the shared folder to a drive or folder on your machine. ([here's how](http://compnetworking.about.com/od/windowsxpnetworking/ht/mapnetworkdrive.htm))
> 2.  Access the mapped drive/folder as you normally would local files.

Nothing needs to be installed. No services need to be running except those that enable folder sharing.

If you can access the shared folder and maps it on your machine, most things should work just like local files, including command prompts and all explorer-enhancement tools.

This is different from using PsExec (or RDP-ing in) in that you do not need to have administrative rights and/or remote desktop/terminal services connection rights on the remote server, you just need to be able to access those shared folders.

Also make sure you have all the necessary security permissions to run whatever commands/tools you want to run on those shared folders as well.

* * *

If, however you wish the processing to be done *on* the target machine, then you can try [PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx) as @divo and @recursive pointed out, something alongs:

```
PsExec \\yourServerName -u yourUserName cmd.exe 
```

Which will brings gives you a command prompt *at* the remote machine. And from there you can execute whatever you want.

I am not sure but I think you need either the Server (`lanmanserver`) or the Terminal Services (`TermService`) service to be running (which should have already be running).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-02T11:50:20.143

```
try
{
    string AppPath = "\\\\spri11U1118\\SampleBatch\\Bin\\";
    string strFilePath = AppPath + "ABCED120D_XXX.bat";
    System.Diagnostics.Process proc = new System.Diagnostics.Process();

    proc.StartInfo.FileName = strFilePath;
    string pwd = "s44erver";

    proc.StartInfo.Domain = "abcd";
    proc.StartInfo.UserName = "sysfaomyulm";

    System.Security.SecureString secret = new System.Security.SecureString();
    foreach (char c in pwd)

        secret.AppendChar(c);

    proc.StartInfo.Password = secret;
    proc.StartInfo.UseShellExecute = false;

    proc.StartInfo.WorkingDirectory = "psexec \\\\spri11U1118\\SampleBatch\\Bin ";

    proc.Start();
    while (!proc.HasExited)
    {
        proc.Refresh();
        // Thread.Sleep(1000);
    }

    proc.Close();
}
catch (Exception ex)
{
    throw ex;
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-01-09T14:58:50.460

I use the little utility which comes with [PureMPI.net](http://www.purempi.net/) called `execcmd.exe`. Its syntax is as follows:

```
execcmd \\yourremoteserver <your command here> 
```

Doesn't get any simpler than this :)

# css - css：悬停时的圆角div

> ID：428280
> 
> 赞同：0
> 
> 时间：2009-01-09T14:41:18.030
> 
> 标签：css, hover, rounded-corners

我正在尝试完成一些看起来很简单的事情......

我有 3`div`包含一个单选按钮和一些内容：

```
 Content of DIV1,
[]   this can be as long or as tall
     as wanted

[]   Content of DIV2

[]   Content of DIV3 
```

使用此处[其他帖子](https://stackoverflow.com/questions/7089/what-is-the-best-way-to-create-rounded-corners-using-css)中的任何技术为每个 div 创建圆角很容易。然而，我不能只为悬停事件做到这一点，即我希望只有当鼠标悬停在 div 上时才会看到圆角框出现在 div 周围。有没有人在某处看到过这样做的例子？

**编辑**：我已经在使用 Prototype 和 Scriptaculous。我不能为此添加 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T15:10:09.877

这会在 div 的悬停时使用 jquery 更改 CSS

```
print("<div id="output" class="div"></div>

<script>

    jQuery(document).ready(function() {

    $("#output").hover(function() {
        $(this).css({ 'background-color': 'yellow', 'font-weight': 'bolder' });
    }, function() {

    $(this).css({ 'background-color': 'blue', 'font-weight': 'bolder' });
    });

    }
    ); 
```

");

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T14:57:21.523

您可能遇到的部分问题在于，在大多数 CSS 实现（以及该技术的浏览器实现）中，div 没有可以附加样式规则的 :hover 方法。

正如安东尼所说，jQuery 或许能够解决这个问题。

我将如何攻击它（因为我还没有探索过 jQuery）是设置你的标签（它*确实*有一个悬停方法）来显示：块，你会设置所有的伴随规则，就好像它是一个 div，做它扩展以填充包含的 div，然后当然，将圆角规则添加到悬停。

另一种方法是用 a 标签包围你的 div，但话又说回来，你仍然在设置 display:block、background 和其他不属于 a 的规则。

这完全是对语法的粗暴滥用，所以在尝试我的建议之前备份你的工作。

祝你好运 - 将它一直保持在 div 上可能会更容易，并想出一些你可以做的其他事情来调出悬停效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T14:49:59.870

我相信你可以用 jquery 做到这一点。
[http://docs.jquery.com/CSS](http://docs.jquery.com/CSS)

http://docs.jquery.com/Events/hover

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T15:07:06.123

Css 定义悬停伪选择器，您可以利用它来解决问题或使用 javascript 来模拟在 onMouseEnter onMouseOut 事件上将 css 类添加/删除到正确 div 的效果。

# .net - 在接口中引用实现基类型

> ID：428282
> 
> 赞同：2
> 
> 时间：2009-01-09T14:41:36.783
> 
> 标签：.net, class, design-patterns, interface

我面临着一个对我来说没有味道但让我停下来的设计决策。看看下面的代码示例：

```
public interface IGenerator
{
  ///<summary>
  /// Combines two generators; performs magic as well
  /// </summary>
  BaseGenerator Combine(BaseGenerator next);

  ///<summary>
  /// Does what a generator does.
  /// </summary>
  object GenerateLolKThx();
}

public abstract class BaseGenerator : IGenerator
{  
  ///<summary>
  /// Combines two generators; performs magic as well
  /// </summary>
  public BaseGenerator Combine(BaseGenerator next)
  {
     // do stuff that I really don't want implementors to try and do
     // because its complex and can result in bad juju if done wrong
     return SuperSecretCombine(this, next);
  }

  ///<summary>
  /// Does what a generator does.
  /// </summary>
  public abstract object GenerateLolKThx();

  /* other base class methods */
} 
```

我不想更详细地说明为什么我不想使用 Combine 方法信任实现者；足以说明它的复杂性。但是，我确实想尽我所能强迫任何想要实现 IGenerator 的人扩展 BaseGenerator，因为这是正确组合两个生成器的唯一方法。这是由接口本身强制执行的。

我担心由于我在该接口中引用接口的实现而导致出现意外问题（由“气味”表示）。但我也知道这种事情在 CS 中并非闻所未闻，它本身也不是坏事（即描述 XSD 的 XML 模式和用它们编译的语言编写的语言编译器）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-09T14:49:27.233

> 我对为什么这可能是代码异味的原因感兴趣

这是我的答案：将接口与实现分离的目的之一（甚至可能是主要目的）是使为接口创建许多不同的实现成为可能。将接口绑定到特定的实现类会破坏这一点。

您实际上是在说-“此接口必须由 BaseGenerator 或其子类实现”，但是为什么要`IGenerator`与`BaseGenerator`?

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T14:45:11.360

可以用扩展方法来代替吗？然后你就可以使用界面了。扩展方法是向接口添加通用实现逻辑的好方法。

这对你们来说效果最好，*主要是*谈论`IGenerator`（不是具体类型）——因为扩展解析更喜欢类型——即`FredsGenerator`可以声明一个定制的`Combine`方法，这将（如果你将变量键入为`FredsGenerator`）优先。但这与您的示例没有什么不同，因为`FredsGenerator`可以**重新实现**接口，窃取实现：

```
using System;
interface IFoo {
    void Bar();
}
abstract class FooBase {
    public void Bar() { Console.WriteLine("Non-virtual; you can't override me!!!"); }
}
class FooImpl : FooBase, IFoo {
    new public void Bar() { Console.WriteLine("mwahahahahah"); }
}
static class Program {
    static void Main() {
        IFoo foo = new FooImpl();
        foo.Bar();
    }
} 
```

至少使用扩展方法方法，**您的**代码不会被欺骗运行重新实现的版本；您的代码只知道`IGenerator`，因此**只会**使用`Generator.Combine`版本。曾经。

* * *

示例（从您的示例**修改编辑**）：

```
using System;
public interface IGenerator
{
    // note: no Combine
    object GenerateLolKThx();
}

public static class Generator
{
    ///<summary>
    /// Combines two generators; performs magic as well
    /// </summary>
    public static IGenerator Combine(this IGenerator current, IGenerator next)
    {
        // do stuff that I really don't want implementors to try and do
        // because its complex and can result in bad juju if done wrong
        Console.WriteLine("Super secret logic here...");
        // and prove we have access the the objects...
        Console.WriteLine(current.GenerateLolKThx());
        Console.WriteLine(next.GenerateLolKThx());
        return next; // just for illustration
    }
}
class MyGenerator : IGenerator
{
    private readonly object state;
    public MyGenerator(object state) {this.state = state;}
    public object GenerateLolKThx() { return state; }
}
public static class Program
{
    static void Main()
    {
        IGenerator foo = new MyGenerator("Hello"),
             bar = new MyGenerator("world");

        IGenerator combined = foo.Combine(bar);
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-09T14:53:50.283

根据您显示的有限代码，在我看来，您使用接口只是为了使用抽象基类更合适的接口。如果您不信任其他任何人来合并 BaseGenerator，那么这应该是您的层次结构的基础，并且 Combine 不应该是虚拟的，因此没有人可以覆盖它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-09T14:52:04.000

BaseGenerator（及其子类）是唯一实现 IGenerator 接口的类吗？

*   如果是这样，为什么有 IGenerator（为什么不只是有 BaseGenerator）？
*   如果不是，您是否期望（或不）实现 IGenerator 的其他非 BaseGenerator 类将能够定义 Combine 方法的合理实现？

[这看起来像是一个问题而不是答案，但它是苏格拉底式的。]

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-09T14:46:39.800

为什么不引用接口？

```
public interface IGenerator
{
  ///<summary>
  /// Combines two generators; performs magic as well
  /// </summary>
  IGenerator Combine(IGenerator next);

  ///<summary>
  /// Does what a generator does.
  /// </summary>
  object GenerateLolKThx();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T14:53:12.000

如果多重继承可用，听起来这整个事情可以更好地实现。如果我是对的，这里没有代码气味。如果我错了，很可能会有一种奇怪的代码气味，因为该接口与其实现之一紧密耦合。

# sql - SQL：基于另一个的MIN批量更新表？可能很容易，但卡住了

> ID：428283
> 
> 赞同：0
> 
> 时间：2009-01-09T14:41:36.923
> 
> 标签：sql, mysql

我认为这很容易，但我不知道该怎么做！

我想更新作者表，以便最早字段包含最早书籍的年份。我需要以某种方式使用 MIN 但是如何通过一个查询来更新它们？

**BookTable（BookID、AuthorFK、年份）**

01 34 1943
02 34 1933
03 99 1910
04 62 1990
05 99 1901

**AuthorTable（AuthorID，最早的）**

34 1933
62 1990
99 1901

编辑：哈哈，非常感谢您的超级快速回答！STACKO 规则（开放的东西除外）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T14:49:08.747

update AuthorTable set Earliest = (select min(Year) from BookTable where BookTable.AuthorFK = AuthorTable.AuthorID)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T15:00:31.847

我建议使用具有分组的连接子查询来执行此操作，例如：

更新 AuthorTable set Earliest = bt.[Year] From AuthorTable as At Join ( select AuthorFK, min(Year) as [Year] from Booktable group by AuthorFK ) as bt on at.AuthorID = bt.AuthorFK

# biztalk - 将 PDF 关联到业务流程 BizTalk

> ID：428285
> 
> 赞同：1
> 
> 时间：2009-01-09T14:42:18.433
> 
> 标签：biztalk

我需要使用 XML 中的 PDF 文件名和值来关联 BizTalk 中的 PDF 和 XML 文件。如何将 PDF 文件读入编排？我必须以某种方式将其作为 XML 处理...

相关的原因是我必须同时拥有来自发送系统的 PDF 和 XML，然后才能以特定顺序将它们写入接收系统（PDF 文件必须在发送XML 元文件***之前***交付。 ）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-12T07:01:28.347

您是否需要在 BizTalk 中将 PDF 文件作为二进制文件处理 - 通过 BizTalk 处理它而不实际从文件中读取任何内容？

如果是这种情况，那么您根本不需要将其解析为 XML，您只需`System.Xml.XmlDocument`使用直通管道将消息读入接收位置上的类型文档中。

该文档将具有所有标准上下文属性，例如接收的文件名，您可以使用任何您想要的方式，包括用于您的关联。

[Richard Seroter在这里](http://blogs.msdn.com/richardbpi/archive/2005/10/27/485696.aspx)有一篇博文详细介绍了这一点。

如果您需要将 PDF 解析为 XML，那么我不确定这样的适配器/管道是否存在。（有用于序列化为 PDF 的适配器，但反之则不然）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-19T20:48:11.673

我有一种情况，我们收到了一个 XML 文档和几个与该文档相关的 PDF 以进行处理。接收位置接收 XML 并将其发送到 anorchestration。编排使用 XML 文档中的文件名从自定义组件中读取 PDF 文件。该代码移动了 PDF，但您也可以使用它对其进行 MIME 编码并将其放入 XML 文档中。

您提到必须等待 PDF 出现。您可以让编排在寻找 PDF 出现时进行一些等待。

# sql - 运行此查询时避免运行时 3075

> ID：428292
> 
> 赞同：1
> 
> 时间：2009-01-09T14:44:23.580
> 
> 标签：sql, vba, ms-access

有人可以告诉这个查询有什么问题吗？

```
sqltext = "SELECT utyp, count(*) AS anzahl
           INTO UTYP_Anzahl FROM 01_umwelt 
           WHERE [01_umwelt].status = Me.Controls(""STATUS"").Value 
           GROUP BY utyp;" 
```

我收到运行时错误 3075。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T14:57:24.783

您使用的 SQL 无效。添加对控件的引用时，您必须转义查询字符串。此外，您可以直接通过其名称获取控件。尝试以下操作：

```
sqltext = "SELECT utyp, count(*) AS anzahl INTO UTYP_Anzahl " _
        & "FROM 01_umwelt WHERE [01_umwelt].status = " _
        & STATUS.Value _
        & " GROUP BY utyp;" 
```

# java - How to programmatically change urls of images in word documents

> ID：428308
> 
> 赞同：1
> 
> 时间：2009-01-09T14:46:36.803
> 
> 标签：java, python, image, ms-word

I have a set of word documents that contains a lot of non-embedded images in them. The url that the images point to no longer exist. I would like to programmatically change the domain name of the url to something else. How can I go about doing this in Java or Python ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T15:38:07.370

这就是 VBA 的用途：

```
Sub HlinkChanger()
Dim oRange As Word.Range
Dim oField As Field
Dim link As Variant
With ActiveDocument
.Range.AutoFormat
For Each oRange In .StoryRanges
        For Each oFld In oRange.Fields
            If oFld.Type = wdFieldHyperlink Then
                For Each link In oFld.Result.Hyperlinks
                    // the hyperlink is stored in link.Address
                    // strip the first x characters of the URL
                    // and replace them with your new URL
                Next link
            End If
        Next oFld
    Set oRange = oRange.NextStoryRange
Next oRange 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T14:53:03.670

Perhaps the [Microsoft Office Word binary file format specification](http://download.microsoft.com/download/0/B/E/0BE8BDD7-E5E8-422A-ABFD-4342ED7AD886/Word97-2007BinaryFileFormat(doc)Specification.pdf) could help you here, though someone who already did stuff like this might come up with a better answer.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-10T07:45:26.090

您想在 Java 或 Python 中执行此操作。试试 OpenOffice。在 OpenOffice 中，您可以插入 Java 或 Python 代码作为“Makro”。

我确信有可能更改图像 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-23T20:41:28.897

VBA 答案是最接近的，因为最好使用 Microsoft Word COM API 来完成。但是，您也可以在 Python 中使用它。我自己使用它从数百个 Word 文档表单中将数据导入数据库。

[这篇文章](http://snippets.dzone.com/posts/show/2037)解释了基础知识。请注意，即使它为 WordDocument COM 对象创建了一个类包装器，如果您不想这样做，也不需要这样做。您可以直接访问 COM API。

对于 WordDocument COM API 的文档，打开一个 word 文档，按 Alt-F11 打开 VBA 编辑器，然后按 F2 查看对象浏览器。这允许您浏览所有对象及其提供的方法。[在这里可以找到](http://www.boddie.org.uk/python/COM.html)Python 和 COM 对象模型的介绍。

# sockets - 一台机器有 2 个网卡。连接到套接字时将使用哪一个？

> ID：428313
> 
> 赞同：8
> 
> 时间：2009-01-09T14:48:14.100
> 
> 标签：sockets

假设我创建了一个非常简单的套接字连接，如何以编程方式：

1.  找出正在使用的接口（IP 地址/NIC）。
2.  强制其他界面

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-09T16:41:25.573

**无论您使用哪种语言，您最终都将使用位于原始BSD 套接字**C 网络库的实现之上的套接字库。尽管您可能需要针对不同的库和语言更改一些内容，但以下信息至少应该有助于确定在您的库文档中查找的位置。

## 服务器

通常，服务器程序发出以下调用序列：

1.  `socket()`返回一个“浮动”套接字对象。
2.  `bind()`将套接字绑定到机器中（通常）所有网络接口卡（NIC）上的特定众所周知的端口号。
3.  `listen()`使套接字“活”起来。
4.  `accept()`阻塞，直到与客户端计算机建立连接。

您可以决定使用哪个 NIC 的关键在于对 的调用`bind()`，它需要一个包含 IP 地址和端口号的数据结构。通常的策略是传递`INADDR_ANY`IP 地址的特殊值，指示连接应该使用机器中的任何和所有 NIC，但是可以指定特定 NIC 的 IP 来代替仅通过该 NIC 接收连接。

## 客户

通常，客户端程序发出以下调用序列：

1.  `socket()`返回一个“浮动”套接字对象。
2.  `connect()`将套接字绑定到随机选择的 NIC 上的随机选择的端口，并尝试连接到`host:port`指定的远程组合。

那么客户端如何选择使用什么网卡呢？`bind()`如果客户愿意，客户也可以选择在之后`socket()`和之前打电话`connect()`。通常这不会简单地完成，因为它`connect()`会自动绑定未绑定的套接字，以便通过任何 NIC 进行访问（这通常是所需的行为），但是可以通过显式调用来关闭此自动绑定`bind()`。在这种情况下，您应该为端口号指定 0，让操作系统为您选择一个随机端口号。

建立连接后，您可以调用`getsockname()`以获取有关套接字的信息，例如它绑定到哪个 IP（即它通过哪个 NIC 进行通信）以及分配的端口号（在客户端程序的情况下）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T14:55:03.573

一种。建立连接后，大多数套接字 API 都会调用诸如“getLocalAddress”之类的东西，它会告诉您操作系统为您选择的接口。

湾。类似地，在创建套接字之后但在建立连接之前，大多数套接字 API 都会调用将套接字绑定到本地地址和/或端口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T14:52:41.347

您会发现这些链接很有用，因为问题没有提供语言，这里是最常见的。

[C 中的套接字编程](http://www.uwo.ca/its/doc/courses/notes/socket/)

[C# 中的套接字编程](http://www.developerfusion.com/article/3918/socket-programming-in-c-part-1/)

[Java中的套接字编程](http://www.javaworld.com/javaworld/jw-12-1996/jw-12-sockets.html)

[Python中的套接字编程](http://www.amk.ca/python/howto/sockets/)

因此，使用这些链接中的任何一个并转到您正在使用的语言。找到获取主机地址或IP地址的函数，并使用专有语言的Bind方法。这将强制应用程序绑定到该接口。

# open-source - 开源项目建议，从这里去哪里

> ID：428317
> 
> 赞同：3
> 
> 时间：2009-01-09T14:49:15.330
> 
> 标签：open-source, project-management

我有一个计划，这里是音调。

当我来到一个新的工作空间、学校、一台朋友的电脑并想查看所有我最喜欢的博客时，登录到 facebook、SO 和所有其他令人惊叹的网站。我发现它总是一个我忘记访问的网站。解决这个问题的方法是为网站添加书签。但是，我是否应该始终将书签存储在 U 盘上？我想不是。

我想建立一个开放书签标准，其中所有常见的浏览器都支持使用在线 OpenID 的服务，这将有助于存储所有喜欢的页面，使用 rss 来跟踪页面更改以及要实现的更多有趣的功能。

现在，如果我在这里错了，请阻止我，但是那里没有这样的事情吗？我觉得有义务开始这方面的开发过程。我最近以交流的方式[写了一篇](http://fekberg.wordpress.com/2008/12/14/communication-issues-when-adapting-outsourcing/)关于适应外包/开源项目时遇到的问题的文章。

那么，如果我想开始这个过程，我会使用哪些服务来提供源、文档和其他计划？

我考虑使用什么语言来吸引尽可能多的开发人员的眼球？

设置语言后，最常用的具体开发模式是什么？

你如何控制一个开源项目？人们不应该提交“坏”代码吗？有没有什么好的工具可以概述文档中的重大变化？SVN 是否有一个很好的监控系统？

如果这个项目是可管理的并且很好（不要争论这是否好），如何将其作为“标准”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T14:53:59.550

这听起来不像是一个需要大量开发人员的项目。

Sourceforge 几乎提供了运行 OSS 项目所需的一切：论坛、SCC 等。

但是，您确定[http://del.icio.us](http://del.icio.us)不能满足您的需求吗？以及将您的书签与 del.icio.us 同步的各种插件？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T14:55:14.557

您是否考虑过使用 Google 书签？这解决了您所说的最初问题（无需 USB 记忆棒的帮助从任何 PC 访问书签），但我不相信它对更改等具有 rss 支持。

如果您正在寻找一个开源项目的家，那么[sourceforge](http://sourceforge.net)是一个不错的起点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T16:58:08.410

我建议使用[Google Code](http://code.google.com/)来托管 OSS 项目，因为它非常简单（就像 Gmail 或 google 搜索一样）。它有：

*   SVN（带有漂亮的网页视图）
*   维基
*   问题跟踪器
*   下载
*   与其他谷歌服务集成
*   可扩展性和响应性。

我绝对不推荐 SourceForge。我不喜欢它：

*   SVN 真的很慢
*   如果您过于频繁地轮询 SVN，他们可能会禁止您的 IP（因此没有持续集成）
*   复杂的用户界面

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T14:53:19.987

我推荐你 sourceforge.net，它有 CVS/SVN、wikis（不太好）、文件发布管理，它被大多数开源项目使用。我将它用于开源项目[Natural CLI](http://naturalcli.sourceforge.net)，

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-09T14:57:27.717

我听起来像是一个有趣的项目，但也有类似的东西，虽然没有开放。例如，我使用[Foxmarks](http://www.foxmarks.com/)在计算机之间同步我的 Firefox 书签。然后，当我在路上时，我可以访问我的 Foxmarks 用户页面，从远程计算机上获取我的所有书签。

# xml - 从 xsd 生成 xml

> ID：428359
> 
> 赞同：21
> 
> 时间：2009-01-09T14:56:49.467
> 
> 标签：xml, xsd

是否有可以从 XSD 生成 XML 的 IDE？不是 Oxygen 或 XmlSpy，它们对我来说太贵了……基于命令行当然是首选方法！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-15T10:18:44.907

[Netbeans](http://www.netbeans.org/) IDE 有一个用于从 XSD 模式生成 XML 文档的向导。一件好事是您也可以要求它生成可选的和重复的元素。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-15T10:27:11.240

您可以在 Eclipse Web Tools（包含在[Java EE Developers 的 Eclipse IDE 中](http://www.eclipse.org/downloads/)）中执行此操作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-01-09T15:10:45.490

[如何从其 DTD 或 XSD 生成示例 XML 文档？](https://stackoverflow.com/questions/17106/how-to-generate-sample-xml-documents-from-their-dtd-or-xsd)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-24T09:38:35.473

请注意，在最初发布此答案后不久，**Apache XMLBeans 已退役**。因此，我不能再推荐它了。无论如何，我仍然认为它对生成示例 xsd:s 有很好的命令行支持，但是在撰写本文时，新版本还没有完成超过 2 年。

* * *

> 基于命令行当然是首选方法！

在我看来，[Apache XMLBeans中的](http://xmlbeans.apache.org/docs/2.0.0/guide/tools.html#xsd2inst)**xsd2inst**是一个非常好的工具。它是基于命令行的，并附带适用于 Windows 和 Unix/Linux 的二进制文件。

使用起来也非常简单：

> xsd2inst schemafile.xsd -name globalElementName

它直接将输出生成到控制台，当然可以很容易地通过管道传输到文件。

> 是否有可以从 XSD 生成 XML 的 IDE？

如果首选使用 IDE，即使在社区版中，[IntelliJ Idea也具有相同的功能。](http://www.jetbrains.com/idea/)只需右键单击 xsd 文档并选择**Generate Instance Document From Schema**，然后选择根节点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T14:59:30.130

.NET XML 转换类非常易于使用，因此如果您找不到某些东西，可以很容易地组合一个简单的命令行实用程序来执行您想要的操作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-03-11T15:41:05.503

免费的在线 XML 编辑器 XmlGrid.net 具有从模式 XSD 生成 XML 的选项。好处是您可以指定需要多少可重复元素，并且可以使用架构中提供的默认值填充元素。它可以处理非常复杂的模式。这是网址：http: [//xmlgrid.net](http://xmlgrid.net)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-28T21:42:06.203

我使用了这个链接：我使用 c#。但这是一个简单的步骤。加载xsd，生成xml。它为和元素生成一个示例 xml 3 次。 [http://www.codeproject.com/Articles/400016/Generate-Sample-XML-from-XSD?msg=4279868](http://www.codeproject.com/Articles/400016/Generate-Sample-XML-from-XSD?msg=4279868)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-22T00:12:32.407

从 XSD 架构文件创建 XML 数据的有用在线实用程序 [http://www.xsd2xml.com/](http://www.xsd2xml.com/)

# javascript - 支持转储和加载的纯 Javascript YAML 库？

> ID：428364
> 
> 赞同：15
> 
> 时间：2009-01-09T14:57:54.283
> 
> 标签：javascript, serialization, markup, yaml, parsing

[YAML](http://en.wikipedia.org/wiki/Yaml)（又名[YAML](http://yaml.org) ）是否存在这样的事情？

如果这曾经存在过，它一定已经被抹杀了，因为最近的搜索出现了 nada。看起来有很多实现只能从 Javascript**转储**到 YAML 输出，但是很难找到同时支持转储和加载的实现。

有没有人在做这样的事情……或者需求太低了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-11-16T22:54:59.760

只是在寻找相同的东西，这是一个基本[的基于 Javascript 的 YAML 解析器](http://refactormycode.com/codes/1045-js-yaml-parser)，由[Tj Holowaychuk](http://refactormycode.com/users/634)在[refactormycode.com](http://refactormycode.com/)上编写。我在这里复制它以确保它不会丢失，似乎 yaml.org 上的 JsYaml 链接已经中断了一段时间。还没有测试它。

```
;(function(){
  YAML = {
    valueOf: function(token) {
      return eval('(' + token + ')')
    },

    tokenize: function(str) {
      return str.match(/(---|true|false|null|#(.*)|\[(.*?)\]|\{(.*?)\}|[\w\-]+:|-(.+)|\d+\.\d+|\d+|\n+)/g)
    },

    strip: function(str) {
      return str.replace(/^\s*|\s*$/, '')
    },

    parse: function(tokens) {
      var token, list = /^-(.*)/, key = /^([\w\-]+):/, stack = {}
      while (token = tokens.shift())
        if (token[0] == '#' || token == '---' || token == "\n") 
          continue
        else if (key.exec(token) && tokens[0] == "\n")
          stack[RegExp.$1] = this.parse(tokens)
        else if (key.exec(token))
          stack[RegExp.$1] = this.valueOf(tokens.shift())
        else if (list.exec(token))
          (stack.constructor == Array ?
            stack : (stack = [])).push(this.strip(RegExp.$1))
      return stack
    },

    eval: function(str) {
      return this.parse(this.tokenize(str))
    }
  }
})()

print(YAML.eval(readFile('config.yml')).toSource())

// config.yml

---
  # just a comment
  list: ['foo', 'bar']
  hash: { foo: "bar", n: 1 }
  lib:
    - lib/cart.js
    - lib/cart.foo.js
  specs:
    - spec/cart.spec.js
    - spec/cart.foo.spec.js
    # - Commented out
  environments:
    all:
      options:
        failuresOnly: true
        verbose: false 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T22:11:27.870

我更新了这个问题以提供我自己研究过的另一个解决方案：[https ://github.com/jeremyfa/yaml.js](https://github.com/jeremyfa/yaml.js)

它是[Symfony YAML 组件](https://github.com/symfony/Yaml/)(YAML 1.2) 的纯 javascript 端口，支持加载和转储。希望这可以帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-02-24T22:57:12.967

此处可能是较新版本的 js-yaml：

[http://github.com/visionmedia/js-yaml](http://github.com/visionmedia/js-yaml)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-02-03T04:07:28.950

我不确定在哪里可以找到支持转储但不加载的“大量实现”——就 JSON 是 YAML 1.2 的适当子集而言，我想可能有很多这样的子集，但那个子集有助于YAML 对人类不是特别友好，尤其是对于复杂的数据结构。我发现的大多数链接都是依赖于 node.js 和/或仅提供解析器的 JS-YAML 的 github 分支。

Jeremy Faivre 在 bitbucket 上的[yaml.js](https://bitbucket.org/jeremyfa/yaml.js/src)在独立的 javascript 中实现了 YAML 的转储和加载（我从[相关 stackoverflow 问题的答案中](https://stackoverflow.com/a/8439851/18829)找到了它）。它没有得到积极维护，但对于中等复杂的 YAML 和/或 javascript 对象似乎可以正常工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-09T15:01:32.467

[yaml-javascript](http://sourceforge.net/projects/yaml-javascript)伪装成转储程序和解析器。没试过。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-05-12T22:25:04.590

还有这个[javascript-yaml-parser/](http://code.google.com/p/javascript-yaml-parser/ "javascript-yaml 解析器")

看到这个问题：[JavaScript YAML Parser](https://stackoverflow.com/questions/4335804/javascript-yaml-parser/5536931#5536931)，Diogo Costa 说：
*没有可用的 javascript YAML 解析器满足我的需求，所以我开发了自己的：它可以在这里找到：* [http ://code.google.com/p/javascript-yaml-parser /](http://code.google.com/p/javascript-yaml-parser/)

# css - IE6 CSS 问题

> ID：428368
> 
> 赞同：4
> 
> 时间：2009-01-09T14:58:39.057
> 
> 标签：css, internet-explorer-6

我将我一直在开发的一个网站 ( [http://barsannapolis.com](http://barsannapolis.com) ) 升级为 CSS 布局，并且大部分情况下事情似乎进展顺利。该站点在 Firefox、Chrome、IE 7 和 Safari 中正确呈现，但该设计在 IE 6 中似乎完全被破坏了。是否有人对如何解决问题有任何指导。也许我忽略了一些简单的事情？

此外，是否有任何 IE 工具可以更轻松地实时编辑 CSS，例如 firebug。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T15:06:59.210

[positioniseverything.net](http://positioniseverything.net)是您的朋友。由于我很久以前就离开了那个世界（感谢上帝！），我不羡慕你，但问题通常是双重填充，尤其是。如果您的浮动框没有对齐（“掉落”）。

您可以在样式表中破解 IE6 `width:30px; _width: 20px;`，其中末尾的 _ 规则是您希望进行的 IE6“调整”。这适用于所有规则，全面。

但是每次我遇到问题时，通常都是水平双填充，这在 IE6 中真的是浮动的 div。

祝你好运。就像我说的，我一点也不羡慕你。IE6是必须根除的瘟疫。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T15:07:40.553

您可以尝试使用 Internet Explorer 开发人员工具栏来帮助您追踪与 CSS 相关的问题。

[Internet Explorer 开发人员工具栏](http://www.microsoft.com/en-us/download/details.aspx?id=18359)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T15:07:22.783

没有什么比 IE 中的 firebug 更好，即使 IE6 和 css 存在一些“常见问题”，但事实是每个站点都是不同的，需要大量的尝试和错误。

老实说，如果 < 20% 使用它，我不会支持 IE6（请查看谷歌分析），我的意思是 IE7 已经出现多年了，IE8 现在随时都会出现，甚至 gmail 也声明不支持 IE6 所以......我不会担心很多

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T15:32:43.933

在这种情况下，另一个有用的实用程序是[XRAY](http://www.westciv.com/xray/)小书签，尽管您可能必须将 url 粘贴到 IE6 地址栏中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-20T21:12:14.090

如果您遇到双浮动边距错误，您可能想尝试应用`display: inline;`到给您带来问题的浮动元素。这可以阻止错误的发生，并且意味着您不必为 IE 分配不同的宽度。

# c# - Microsoft Office 文档的查看器组件

> ID：428374
> 
> 赞同：1
> 
> 时间：2009-01-09T14:58:53.953
> 
> 标签：c#, .net, ms-office

我们需要一个可以显示 Microsoft Office 文件（Word、Excel..）的用户控件。无需编辑它们。

[正如我所看到的，可以从Microsoft 站点](http://www.microsoft.com/Downloads/details.aspx?familyid=3657CE88-7CFA-457A-9AEC-F4F827F20CAC&displaylang=en)下载可用的独立查看器应用程序，但我想知道它是否可以嵌入到用户控件中。

我认为可能有一个 COM/ActiveX 组件，但我无法检查，因为我安装了 Office，所以我必须在干净的机器上安装查看器。

有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-10T10:43:03.207

我会避免考虑将 Office 查看器用作 COM 对象提供程序（即使他们确实注册了 Office COM 组件。）就我可以解释的许可证而言（我不是律师，但必须阅读并讨论我的分享多年来的 EULA），您*不得*在您的应用程序中使用 Office 查看器提供的任何内容。许可证的相关条款（开头）：

1.  安装和使用权利。

一种。一般的。您可以在您的设备上安装和使用任意数量的软件副本。您只能使用该软件查看和打印使用 Microsoft Office 软件创建的文件。 **您不得将本软件用于任何其他目的。**

我会避开微软许可中的灰色地带。您想要的可能不会被明确禁止（$deity 知道 EULA 很难解释），但许可证的精神绝对不允许这样做。因为如果他们愿意，你可能会被告上法庭，而且因为澄清灰色区域需要很多钱，而且因为他们财力雄厚......我想你明白我要做什么了。

如果要将用户锁定在 Office 中，通常必须硬着头皮要求用户购买 Office 许可证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T15:17:34.760

如果您从 Microsoft 下载它们，那么查看器可能是 OCX 或 ActiveX 组件。我不知道如何在 C#、C++ 中使用它……在 Java 中，我使用 jawin ( [http://jawinproject.sourceforge.net/](http://jawinproject.sourceforge.net/) ) 来处理 Word，比如邮件合并。

# asp.net - Telerik UI 控件与使用 jQuery 的客户端 UI

> ID：428376
> 
> 赞同：20
> 
> 时间：2009-01-09T14:58:58.900
> 
> 标签：asp.net, jquery, telerik

我正在尝试决定如何处理面向外部的 Web 应用程序的 UI。因为它是外部的，所以由页面膨胀引起的延迟可能是一个问题。

我过去使用过一些 jQuery，现在我正在评估 Telerik 控件。我看到了很多关于 Telerik 控件的好建议，包括 StackOverflow 上的一些建议。事实上，它们看起来确实功能齐全。我也毫不怀疑使用这些控件可以比使用 jQuery 更快地开发应用程序。但是，我担心它们会在我的页面上造成过多的膨胀。

你们中的任何人都有将这些控件的性能与纯粹的 jQuery 实现进行比较的经验吗？具体来说，

*   Telerik 的 RadScriptManager 真的比 MS Ajax ScriptManager 更好吗？
*   Telerik 控件是否存在一般性能问题？
*   是否有任何 jQuery 插件接近 RadGrid 的网格功能？

任何其他相关信息也将是有用的。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-01-10T03:01:11.640

我已经使用 Telerik 和 JQuery 多年了。“全功能”通常等同于大量臃肿、您不需要的功能以及难以（或不可能）优化的最终页面。放弃 Telerik 并使用像 JQuery 这样的裸机框架。你会发现它可以让你构建你需要的特定功能，而且你永远不会回头。许多功能齐全的 UI 套件（如 Telerik 或 ComponentArt）非常诱人，但我认为它们鼓励了很多糟糕的编程。

例如....您真的需要在您的网格上放置可拖放的列吗？可能不是。最好有一个设计区域，您的用户可以在其中布置他们的列首选项，然后是网格活泼和轻量级的主视图。不要渲染用户永远不会（或很少）在每次页面视图中使用的兆字节的附加功能。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-01-13T21:12:56.523

很好的讨论在这里。一些澄清：

*   Telerik 确实在内部使用 jQuery（并且现在 MS 支持它会越来越多）来增强许多控件的客户端功能（并减少客户端代码）
*   jQuery 是一个非常适合 JavaScript 开发的客户端库。但是，如果您需要解决可访问性问题，那么您可以使用 jQuery UI 实现，因为它们的所有功能都依赖于 JavaScript。Telerik 的独特优势在于您可以同时呈现客户端和服务器端，这意味着您可以支持未启用 JavaScript 的客户端。
*   对于许多 Telerik 控件，您可以 A）通过禁用功能（由于内部按需加载脚本逻辑）消除页面上的额外代码，或 B）通过使用提供脚本组合器和压缩机。

不过，作为一名长期的 Web 开发人员，我总是鼓励人们使用正确的工具来完成这项工作。如果您不需要 RadControls 的强大功能、可访问性支持或大量文档（以帮助将继承您的应用程序的人），请不要将它们用于您的站点。如果您只需要基本的 UI，jQuery 可能就可以了。不过，我倾向于发现，当开发人员可以为用户提供高级功能（我们有时认为是“臃肿”）而不做额外的工作时，用户对最终产品的印象要好得多，并且发现它更容易使用。

*最重要的是，请记住，在大多数情况下，您通过构建应用程序*而不是 UI 组件为您的公司/客户创造价值。因此，除非有充分的理由重新发明轮子，否则通常最好使用已经构建和测试的东西来解决您面临的问题。

希望有帮助。-托德

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-01-19T15:09:22.187

关于 Brian C (et al) 面临的“错误”和其他挑战，我认为这里值得进一步澄清。作为开发人员的拥护者，我不会假装 Telerik 控件是完美的——凡人编写的任何软件都不完美。那么重要的是如何解决这些错误。

人们常常忽视公司（或开源项目）如何解决错误，直到为时已晚。无论你使用什么工具——jQuery、Telerik，甚至是微软——你最终都会遇到错误。Telerik 擅长的地方在于为这些问题提供快速修复和非常全面的支持，以帮助您尽可能提高工作效率。如果您有问题，Telerik - 将 - 帮助您解决问题。对于其他公司，尤其是开源公司，这并不总是保证。

**所以请记住：**无论您使用什么工具，您都会遇到错误。确保您选择具有支持的工具，这些工具可以响应您的问题并快速修复它们。因为我知道我的观点不可避免地存在偏见，所以我会让 StackOverflow 上的其他人确认或否认 Telerik 的支持质量。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-01-09T15:08:18.740

Telerik 控件确实看起来有点臃肿，但我怀疑您是否能够在 JQuery 中实现类似的功能而无需付出很多努力。

这真的取决于你能忍受多少膨胀。如果它是用于 Intranet 应用程序，那么这并不重要，但是当您指定面向外部时，这可能是一个问题，这实际上取决于用户的平均连接速度以及他们的计算机/浏览器的速度最终将运行控件。

另一个重要的问题是：您是否想在一个使用量远低于 JQuery 的专有工具集中标准化您的 Web 应用程序？我怀疑 JQuery 会很快倒闭。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-01-10T17:49:45.793

万一以后它对任何人有帮助，我已经抛弃了 Telerik 工具，现在只使用 jQuery。我们会看看我是否遇到了我不能做的事情。我对 Telerik 工具感到失望。我听说过很多关于它们的好东西，但它们对我来说效果并不好。这是我在评估 Telerik 工具时发现的。

*   Telerik Ajax 工具在处理主页面/内容页面设置时存在问题。他们在他们的论坛中承认这一点，我猜他们正在努力。不过对我来说很成问题。

*   我看到了许多似乎没有任何文档的意外行为和怪癖。例如，当使用 Web20 皮肤和表单装饰器时，在执行 Ajax 时，字段集上的圆角会变得糟糕透顶。

*   Telerik 工具大大降低了我的开发机器的速度，并且似乎导致我的环境出现问题。我几乎从未遇到过崩溃或内存违规的情况，而且在使用这些工具时，我在两天内遇到了四次。距离我之前的上一次可能已经一个月了。

*   因此，将所有这些与 jQuery 是免费且轻量级的事实结合起来，选择很容易。最初可能需要我更长的时间，但最终结果会好得多。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-09T15:25:38.567

您的 UI 要求将对这个决定产生最大的影响。我不认为 Telerik 控件在功能方面可以与 jQuery 相提并论。如果您需要服务器端控件来显示数据，请根据其他竞争控件评估 Telerik。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-09T15:26:26.817

我使用 Telerik 控件并且还为源代码付费，因此对于它们的停业，考虑到源代码，这不是一个大问题。我没有在面向公众的网站上使用 Telerik 控件的具体经验，但我毫不犹豫。有时我被指示使用 JQuery 来实现控件没有的附加功能。

我遇到的一个问题是，由于您自己没有使用控件（不仅仅是 Telerik 的）来编写所有这些功能，因此将各种有趣的东西拖放到您的页面上真的很容易，这将为每一页添加处理。话虽如此，请尽量减少对它们的使用，我认为它们不会比手动编码的 JQuery 实现更臃肿。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-01-09T18:01:26.550

RadScriptManager 与 MS Ajax 脚本管理器不同，因为它有一个 EnableScriptCombine="true" 属性，您可以设置该属性，以便将 Telerik 控件使用的所有 javascript 文件合并到一个 .js 文件中以提高性能。

最初，rad 编辑器运行得很慢。但是最新版本要快得多。此外，他们还聘请了不断努力改善控制的员工。

我不知道任何接近 RadGrid 的东西。它非常强大。我现在在一个 Intranet 应用程序上使用它，到目前为止它运行得很快。我正在使用它的所有功能，Group By、Export to excel 等。

也就是说，如果我正在创建一个供外部使用的 Internet 应用程序，我会使用 JQuery 而不是 Telerik。这样你就有更多的控制权。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-01-15T16:33:04.730

我们将 Telerik Editor 用于我们的 Intranet 产品，我不得不说它在使用、自定义、升级等方面比我们以前使用的任何编辑器都好得多。

如果您需要一些高级功能和/或更复杂的控件***，而***Telerik 提供了这些，我会说现在将它们注销还为时过早。如果您只需要 jQuery UI 可以提供的基本 UI 功能，那么将 jQuery 用于这些特定部分。

没有必要选择其中一个。使用多种工具来完成工作。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-09T15:56:02.077

我认为 Telerik 宣布他们将在客户端使用 JQuery。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-01-09T17:06:08.050

Telerik 刚刚开始将更多时间投入到对其 RadGrid 的客户端支持上。到目前为止，我对网格感到失望。我为他们感到难过，因为他们基本上必须维护 2 个代码库：一个用于他们的服务器控件，它基于 Postbacks 和 ViewState 在 C# 中重绘所有内容，另一个用于客户端控件，它在 javascript 中重绘控件的一部分（有点像他们的 C# 代码到 javascript 的端口）。这对他们来说是一大堆工作，到目前为止我觉得它是不完整的。

例如，对其网格当前版本 (ASP.nET AJAX 2008.3.1105.35) 的**客户端**支持不包括：

1.  分组表达式
2.  增加页面大小
3.  以外的寻呼机样式`NextPrev`
4.  隐藏/显示列
5.  `AllowNaturalSort="false"`
6.  纯客户端排序（即在浏览器中）

话虽如此，如果您愿意将 Telerik 控件与传统的 Postback/Viewstate 渲染一起使用，那么我会说没有 jQuery 网格可以与之竞争。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-09-27T03:32:42.310

我通常不会在这些事情上发帖——但我无法抗拒这一点。我在 Telerik 上使用了 jQuery / jQuery UI。我真的很喜欢他们在演示页面上的内容——然后我试图让它发挥作用。我在丝带栏上挣扎，并向他们展示了一两个错误。他们是它很快就会被修复......它不是......然后下一个版本......它不是。最后他们有一个测试版，并让我为他们测试它——真遗憾。他们的东西确实很漂亮，但我无法处理那些无法正常工作的东西。

我已经使用 jQuery / jQuery UI 大约 6 个月了，我喜欢它。便于使用。轻的。做它所说的。也许不像 Telerik 那样功能齐全，但可以理解，只需几个脚本即可放入您的项目中。我也很喜欢Themeroller。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-01-18T17:25:58.777

我已经使用 Telerik 进行控件 3 年了。我终于意识到我爱上了这个想法，但控件本身非常有问题，实施起来很烦人，最终花费了我更多的时间来构建自己。我绝对建议不要使用 Telerik。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-04-08T10:46:54.737

我与`jQuery`和一起工作过`Telerik`。`Telerik`官网的demo看的很花哨，但是使用的时候感觉很重很慢。有了`jQuery`您，您就可以编写轻巧高效的代码来满足您的需求，但需要更多时间。在性能方面，我建议在服务器而不是客户端浏览器上呈现最初的繁重 HTML 结果。（例如大网格）

# service - UML 类图 Web 服务

> ID：428377
> 
> 赞同：4
> 
> 时间：2009-01-09T14:59:10.507
> 
> 标签：service, uml

如何在 UML 中绘制一个使用 Web 服务的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T15:20:48.107

您还可以将[WSDL（Web 服务描述语言）UML 配置文件](http://webservices.xml.com/lpt/a/1259)与适当的 WSDL 原型一起使用。

这将给出例如：

```
--------------------
| <<wsdl:service>> |
--------------------
|   MyWebService   |
--------------------
|                  |
--------------------
|                  |
--------------------
{URI="/MyWebService"} 
```

* * *

一个涉及 Web 服务的许多组件的完整 UML 示例将是：

[![](https://i.stack.imgur.com/QAeQB.gif)](https://i.stack.imgur.com/QAeQB.gif)
[（来源：[xml.com](http://webservices.xml.com/2003/08/05/graphics/CompleteUML.gif)）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T15:08:47.587

听起来像一个带有客户端和服务实例的序列图，客户端在其中调用服务。如果请求是同步的，您会看到返回返回给客户端；如果没有，就没有回报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T15:11:06.690

我会将 Web 服务绘制为接口。

我会在 Web 服务周围设置一个边界，以表明它位于我的系统边界之外。

# sql - 使用触发器强制约束

> ID：428384
> 
> 赞同：1
> 
> 时间：2009-01-09T15:00:58.757
> 
> 标签：sql, sql-server, sql-server-2005, triggers, constraints

我正在尝试以一种我认为约束无法实现的方式在表上强制执行完整性...

```
CREATE TABLE myData
(
   id             INTEGER IDENTITY(1,1) NOT NULL,
   fk_item_id     INTEGER               NOT NULL,
   valid_from     DATETIME              NOT NULL,
   invlaid_from   DATETIME              NOT NULL
) 
```

我要应用的约束是，对于相同的“fk_item_id”，不应有任何具有重叠日期的条目。

笔记：

invalid_from 是有效期之后的瞬间。
这意味着以下两个时期都很好......

*   '2008 Jan 01 00:00' -> '2008 Feb 01 00:00' （整个 1 月）
*   '2008 年 2 月 1 日 00:00' -> '2008 年 3 月 1 日 00:00'（整个 2 月）

我可以在触发器中检查该规则。但是，当触发器确实发现非法插入/更新时，防止“非法”插入/更新发生的最佳方法是什么？

（如果*insert*包含两条有效记录和两条无效记录，我可以只停止两条无效记录吗？）

干杯，
德姆斯。

**编辑：**

在我上面的情况下，使用函数的约束效果很好。但我从来没有弄清楚为什么 RAISERROR 在触发器版本中不起作用。

我认为这是因为触发器是 AFTER 触发器，我需要一个 BEFORE 触发器，但这似乎不是一个选项......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T15:07:42.113

您不能直接从插入中删除（对逻辑表的更新会引发错误），但您可以加入回源表，如下所示

```
create table triggertest (id int null, val varchar(20))
Go
create trigger after  on [dbo].triggertest
for Update  
as
Begin

    delete tt from triggertest tt inner join 
    inserted i on tt.id = i.id 
    where i.id = 9

End
GO
insert into triggertest values (1,'x')
insert into triggertest values (2,'y')
Update triggertest set id = 9 where id = 2
select * from triggertest
1, x 
```

此外，您不必走触发路线，您还可以将检查约束绑定到函数的返回值

```
Alter table myData WITH NOCHECK add 
Constraint  CHK_VALID CHECK (dbo.fx_CheckValid(id, valid_from , invalid_from) = 1 ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T15:19:38.763

不要从插入的表中删除记录......这是无声的失败。通往地狱的道路是在 Partial Commits 中铺就的。

您需要[RAISERROR](http://msdn.microsoft.com/en-us/library/ms178592.aspx)，这本质上是[约束](http://msdn.microsoft.com/en-us/library/ms188066.aspx)的作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T15:08:15.357

引发错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T15:09:18.833

您的触发器可以将“非法”记录的`valid_from`和/或s 修改为特殊值。`invlaid_from` `DATETIME`随后的清理步骤可以识别“非法”记录。

# asp.net - 您对这篇关于 ViewState 与 Cache 的文章有何看法？

> ID：428385
> 
> 赞同：0
> 
> 时间：2009-01-09T15:00:59.863
> 
> 标签：asp.net, caching, viewstate

我从 2005 年开始看这篇文章，想了解一下，文章没有指出 ViewState 和 Cache 的优缺点？

[http://www.codersource.net/asp_net_viewstate_versus_data_caching.aspx](http://www.codersource.net/asp_net_viewstate_versus_data_caching.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T15:07:38.803

那篇文章很差 - 为什么在同一篇文章中混淆缓存和视图状态？这就像在说“在这篇文章中，我比较了汽车和开罐器......结论：选择最适合您需求的”。对于初学者，我会忽略这一点。

对于大多数开始使用 ASP.NET 的用户，可以完全禁用视图状态。这是一篇正确的文章，解释了 Viewstate（以及更普遍的页面生命周期）：

[http://msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

另一方面，缓存是提高单个页面请求和整个站点性能的基本技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T15:05:13.753

ViewState 是按用户使用的，您不会存储 ViewState 以供其他用途使用。缓存是“全局的”，所有用户都可以访问，当然这取决于您如何索引缓存。

我在很多网站上同时使用 ViewState 和 Cache，因为 ViewState 会在我使用我的 gridview 等回发内容时进行处理，并且 Cache 用于对部分或完全静态的所有内容进行Chaching。

# asp.net - 如果给定的 HttpRequest 是通过 ajax 发送的，我将如何在服务器端确定？

> ID：428406
> 
> 赞同：3
> 
> 时间：2009-01-09T15:07:55.573
> 
> 标签：asp.net, ajax, asp.net-ajax

我想知道如果给定的 HttpRequest 是通过 ajax 发送的，那么在服务器端确定的最佳方法（如果可能的话）是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T15:28:16.033

XMLHttpRequest 与任何其他浏览器请求一样出现。据我所知，没有办法区分它们，除非 XMLHttpRequest 故意设置标头来标识自己。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T15:36:40.260

这可能会或可能不会帮助您，但您至少可以确定回发是否是异步的（这意味着它很可能是通过 ajax 发送的）。您可以通过以下方式执行此操作：

```
if (sm1.IsInAsyncPostBack)
{
    //code here
} 
```

上面提到的 sm1 将与此一起提供：

```
<asp:ScriptManager id="sm1" runat="server" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-04T23:18:28.630

以下是有关此主题的类似但更详细的信息：

[如何判断页面是否发生了异步部分回发？](http://aspdotnetfaq.com/Faq/how-to-determine-whether-an-asynchronous-partial-postback-has-occurred-on-page.aspx)

# c# - 从 .NET 中的同一对话框中选择文件或文件夹

> ID：428410
> 
> 赞同：33
> 
> 时间：2009-01-09T15:08:28.773
> 
> 标签：c#, .net, vb.net, winforms, openfiledialog

是否有一种“简单”的方法可以从同一个对话框中选择文件或文件夹？

在我创建的许多应用程序中，我允许文件或文件夹作为输入。到目前为止，我总是最终创建一个开关来在文件或文件夹选择对话框之间切换，或者只使用拖放功能。

由于这似乎是一个基本的东西，我想这是以前创建的，但谷歌搜索不会产生太多信息。所以看起来我需要从头开始并创建一个自定义选择对话框，但我宁愿不通过重新发明轮子来完成这样一个微不足道的任务来引入任何问题。

有人有任何提示或现有解决方案吗？

为了使 UI 保持一致，最好可以扩展 OpenFileDialog（或 FolderBrowserDialog）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-10T15:01:58.597

从技术上讲，这是可能的。FolderBrowseDialog 使用的 shell 对话框能够返回文件和文件夹。不幸的是，该功能并未在 .NET 中公开。甚至反射也不能戳出所需的选项标志。

要使其工作，您必须 P/Invoke SHBrowseForFolder() 并在 BROWSEINFO.ulFlags 中打开 BIF_BROWSEINCLUDEFILES 标志（值 = 0x4000）。P/Invoke 是坚韧不拔的，最好在Reflector 的帮助下从[另一个源或 FolderBrowseDialog 类本身复制和粘贴代码。](http://www.google.com/search?hl=en&q=shbrowseforfolder+structlayout&btnG=Google+Search&aq=f&oq=)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-10T15:47:02.110

基于上述提示，我在以下位置找到了一些使用标准文件夹浏览器对话框的工作代码：http: [//topic.csdn.net/t/20020703/05/845468.html](http://topic.csdn.net/t/20020703/05/845468.html)

扩展文件夹浏览器对话框的类

```
Imports System   
Imports System.Text   
Imports System.Windows.Forms   
Imports System.Runtime.InteropServices   

Public Class DirectoryDialog 
    Public Structure BROWSEINFO 
        Public hWndOwner As IntPtr 
        Public pIDLRoot As Integer 
        Public pszDisplayName As String 
        Public lpszTitle As String 
        Public ulFlags As Integer 
        Public lpfnCallback As Integer 
        Public lParam As Integer 
        Public iImage As Integer 
    End Structure 

    Const MAX_PATH As Integer = 260

    Public Enum BrowseForTypes As Integer 
        Computers = 4096 
        Directories = 1 
        FilesAndDirectories = 16384 
        FileSystemAncestors = 8 
    End Enum 

    Declare Function CoTaskMemFree Lib "ole32" Alias "CoTaskMemFree" (ByVal hMem As IntPtr) As Integer 
    Declare Function lstrcat Lib "kernel32" Alias "lstrcat" (ByVal lpString1 As String, ByVal lpString2 As String) As IntPtr 
    Declare Function SHBrowseForFolder Lib "shell32" Alias "SHBrowseForFolder" (ByRef lpbi As BROWSEINFO) As IntPtr 
    Declare Function SHGetPathFromIDList Lib "shell32" Alias "SHGetPathFromIDList" (ByVal pidList As IntPtr, ByVal lpBuffer As StringBuilder) As Integer 
    Protected Function RunDialog(ByVal hWndOwner As IntPtr) As Boolean 

        Dim udtBI As BROWSEINFO = New BROWSEINFO() 
        Dim lpIDList As IntPtr 
        Dim hTitle As GCHandle = GCHandle.Alloc(Title, GCHandleType.Pinned) 
        udtBI.hWndOwner = hWndOwner 
        udtBI.lpszTitle = Title 
        udtBI.ulFlags = BrowseFor 
        Dim buffer As StringBuilder = New StringBuilder(MAX_PATH) 
        buffer.Length = MAX_PATH 
        udtBI.pszDisplayName = buffer.ToString() 
        lpIDList = SHBrowseForFolder(udtBI) 
        hTitle.Free() 
        If lpIDList.ToInt64() <> 0 Then 
            If BrowseFor = BrowseForTypes.Computers Then 
                m_Selected = udtBI.pszDisplayName.Trim() 
            Else 
                Dim path As StringBuilder = New StringBuilder(MAX_PATH) 
                SHGetPathFromIDList(lpIDList, path) 
                m_Selected = path.ToString() 
            End If 
            CoTaskMemFree(lpIDList) 
        Else 
            Return False 
        End If 
        Return True 
    End Function 

    Public Function ShowDialog() As DialogResult 
        Return ShowDialog(Nothing) 
    End Function 

    Public Function ShowDialog(ByVal owner As IWin32Window) As DialogResult 
        Dim handle As IntPtr 
        If Not owner Is Nothing Then 
            handle = owner.Handle 
        Else 
            handle = IntPtr.Zero 
        End If 
        If RunDialog(handle) Then 
            Return DialogResult.OK 
        Else 
            Return DialogResult.Cancel 
        End If 
    End Function 

    Public Property Title() As String 
        Get 
            Return m_Title 
        End Get 
        Set(ByVal Value As String) 
            If Value Is DBNull.Value Then 
                Throw New ArgumentNullException() 
            End If 
            m_Title = Value 
        End Set 
    End Property

    Public ReadOnly Property Selected() As String 
        Get 
            Return m_Selected 
        End Get 
    End Property 

    Public Property BrowseFor() As BrowseForTypes
        Get 
            Return m_BrowseFor 
        End Get 
        Set(ByVal Value As BrowseForTypes) 
            m_BrowseFor = Value 
        End Set 
    End Property 

    Private m_BrowseFor As BrowseForTypes = BrowseForTypes.Directories 
    Private m_Title As String = "" 
    Private m_Selected As String = "" 

    Public Sub New() 
    End Sub
End Class 
```

实现扩展对话框的代码

```
Sub Button1Click(ByVal sender As Object, ByVal e As EventArgs)
    Dim frmd As DirectoryDialog = New DirectoryDialog()
    ' frmd.BrowseFor = DirectoryDialog.BrowseForTypes.Directories   
    ' frmd.BrowseFor = DirectoryDialog.BrowseForTypes.Computers   
    frmd.BrowseFor = DirectoryDialog.BrowseForTypes.FilesAndDirectories   
    frmd.Title = "Select a file or a folder"    
    If frmd.ShowDialog(Me) = DialogResult.OK Then   
        MsgBox(frmd.Selected)   
    End If   
End Sub 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-09T07:20:08.390

它已经完成了。您可以使用[FolderBrowserDialogEx](http://dotnetzip.codeplex.com/SourceControl/changeset/view/29832#432677) - 内置 FolderBrowserDialog 的可重用衍生产品。这个允许您输入路径，甚至是 UNC 路径。您可以浏览文件夹或文件+文件夹。您可以使用它浏览计算机或打印机。基于内置 FBD，但……更好。更灵活。如果单击 GUI 中的文件夹，则路径会出现在文本框中。如果您键入路径，文件夹将被激活。内置对话框缺少很多选项。

完整的源代码。自由。MS-公共许可证。

[![FolderBrowserDialogEx](https://i.stack.imgur.com/Ed3c8.png)](https://i.stack.imgur.com/Ed3c8.png)

使用它的代码：

```
 var dlg1 = new Ionic.Utils.FolderBrowserDialogEx();
     dlg1.Description = "Select a folder to extract to:";
     dlg1.ShowNewFolderButton = true;
     dlg1.ShowEditBox = true;
     //dlg1.NewStyle = false;
     dlg1.SelectedPath = txtExtractDirectory.Text;
     dlg1.ShowFullPathInEditBox = true;
     dlg1.RootFolder = System.Environment.SpecialFolder.MyComputer;

     // Show the FolderBrowserDialog.
     DialogResult result = dlg1.ShowDialog();
     if (result == DialogResult.OK)
     {
         txtExtractDirectory.Text = dlg1.SelectedPath;
     } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-11-25T20:54:23.127

您可以使用标准 OpenFileDialog 来选择一个文件夹。这是 CodeProject 中的一篇文章，它展示了一种方法（[http://www.codeproject.com/KB/dialog/OpenFileOrFolderDialog.aspx](http://www.codeproject.com/KB/dialog/OpenFileOrFolderDialog.aspx)）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-10T01:10:37.013

AFAIK，.NET 框架中没有任何东西可以开箱即用。

.NET 文件对话框派生自[CommonDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.commondialog.aspx)：

> 继承类需要通过调用 ShowDialog 来实现 RunDialog 以创建特定的公共对话框。继承的类可以重写 HookProc 以实现特定的对话框挂钩功能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-10T01:21:53.027

所有内置对话框都使用与其操作相对应的 shell API，PrintDialog、OpenFileDialog、SaveFileDialog 等...

您很可能必须手动构建此功能。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-09T06:40:00.583

[http://www.pinvoke.net/default.aspx/shell32.shbrowseforfolder](http://www.pinvoke.net/default.aspx/shell32.shbrowseforfolder)

如果您在此示例中进行更改，这里是 gerat 链接

```
 bi.ulFlags = BIF_NEWDIALOGSTYLE | BIF_SHAREABLE; 
```

为了

```
 bi.ulFlags = BIF_NEWDIALOGSTYLE | BIF_SHAREABLE | BIF_BROWSEINCLUDEFILES; 
```

你会得到你想要的

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-14T06:42:35.653

如果您只想显示特定的文件类型，以下[文章](http://www.codeproject.com/KB/shell/csdoesshell1.aspx?fid=14137&df=90&mpp=25&noise=3&sort=Position&view=Quick&fr=26)（带有 C# 源代码）可以帮助您：

[http://www.codeproject.com/KB/shell/csdoesshell1.aspx?fid=14137&df=90&mpp=25&noise=3&sort=Position&view=Quick&fr=26](http://www.codeproject.com/KB/shell/csdoesshell1.aspx?fid=14137&df=90&mpp=25&noise=3&sort=Position&view=Quick&fr=26)

它还解释了可用于“自定义”FolderBrowser 对话框的其他选项，

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-18T04:22:15.820

这将允许您使用 OpenFileDialog 选择文件夹

```
 openFileDialog1.CheckFileExists = false;
        openFileDialog1.ValidateNames = false; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-20T21:40:47.920

Ookii**[对话框](https://github.com/ookii-dialogs)**实现了一个文件夹浏览器对话框，允许文件或文件夹作为输入，并且可用于 Windows 窗体和 WPF。

[![在此处输入图像描述](https://i.stack.imgur.com/egZaL.png)](https://github.com/ookii-dialogs)

> **Ookii.Dialogs.Wpf**
> 
> [https://github.com/augustoproiete/ookii-dialogs-wpf](https://github.com/augustoproiete/ookii-dialogs-wpf)

* * *

> **Ookii.Dialogs.WinForms**
> 
> [https://github.com/augustoproiete/ookii-dialogs-winforms](https://github.com/augustoproiete/ookii-dialogs-winforms)

# vba - SUMIFS 的 VBA 代码？

> ID：428414
> 
> 赞同：1
> 
> 时间：2009-01-09T15:09:14.993
> 
> 标签：vba, excel, excel-2007

我正在尝试编写一个自定义函数，它可以让我从满足 x 个条件的范围内的第一行中检索一个单元格。我想这将与 SUMIFS 的工作方式非常相似，只是更简单的是它不会在第一场比赛后继续处理。

有谁知道在 VBA 中重现 SUMIFS (excel 07) 函数的代码？

因此，例如，如果我在 excel 中有一个表格，例如：

```
W X Y Z
a b 6 1
a b 7 2
b b 7 3 
```

我希望能够编写一个函数，它会给我列 Z 中的值，其中列 W=a，X=b，Y>=7（换句话说，值 2）。

假设我想要的记录是唯一的并且我希望返回一个数字，SUMIFS 可以大致做到这一点。不过，就我的目的而言，这些假设是行不通的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T15:49:30.623

使用 ADO 的示例。

```
strFile = Workbooks(1).FullName
strCon = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & strFile _
    & ";Extended Properties=""Excel 8.0;HDR=Yes;IMEX=1"";"

Set cn = CreateObject("ADODB.Connection")
Set rs = CreateObject("ADODB.Recordset")

cn.Open strCon

'I want to be able to write a function that will give me the value '
'in column Z where columns W=a, X=b, Y>=7 '
'(in other words the value 2).' 

strSQL = "SELECT Top 1 Z " _
         & "FROM [Sheet1$] " _
         & "WHERE W='a' And X='b' And Y>=7"

rs.Open strSQL, cn

Result = rs.Fields("Z") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T13:37:09.827

恕我直言，ADO 不适合在 excel 工作表函数中使用（性能差，不能轻易在包含数据的工作表上使用）。这是一个 VBA 替代方案：

```
 Function MFind(theRange As Range, ParamArray Tests() As Variant) As Variant
'
' Parameters are:
' The Range to be searched
' the values to be searched for in successive columns
' all search values except the last use =
' the last search value uses >=
' the function returns the value from the last column in the range
'
    Dim vArr As Variant
    Dim j As Long
    Dim k As Long
    Dim nParams As Long
    Dim blFound As Boolean

```
vArr = theRange.Value2
nParams = UBound(Tests) - LBound(Tests) + 1
If nParams >= UBound(vArr, 2) Then
    MFind = CVErr(xlErrValue)
    Exit Function
End If

For j = 1 To UBound(vArr)
    blFound = True
    For k = LBound(Tests) To nParams - 2
        If vArr(j, k + 1) <> Tests(k) Then
            blFound = False
            Exit For
        End If
    Next k
    If blFound Then
        If vArr(j, nParams) >= Tests(nParams - 1) Then
            MFind = vArr(j, UBound(vArr, 2))
            Exit For
        End If
    End If
Next j 
```

End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-12-20T08:04:49.003

Deeno，为此使用 UDF 非常有用，但您也可以使用普通的 old `=VLOOKUP()`。

`VLOOKUP()`只能通过查找一个“键”来工作，但您可以在左侧的帮助列中创建一个连接键。例如：

```
W X Y Z    AA
a b 6 ab6  1
a b 7 ab7  2
b b 7 bb7  3 
```

然后`=VLOOKUP(A1,$Z$1:$AA$3,2,FALSE)`，如果 A1 具有您正在寻找的价值。如果您的数据更复杂，您可以使用未使用的字符（例如：管道）连接数据，这样您就有 a|B|6 而不是 ab6。

# linux - 设置 Apache 用户的 umask

> ID：428416
> 
> 赞同：58
> 
> 时间：2009-01-09T15:09:30.110
> 
> 标签：linux, apache

我正在设置 LAMP 服务器，并希望将 Apache 的 umask 设置设置为 002，以便所有 Apache 创建的文件都设置了组写入权限位（因此同一组的成员可以覆盖文件）。

有谁知道如何做到这一点？我知道在 Ubuntu 上，你可以使用 /etc/apache2/envvars 文件来配置 umask，但是服务器运行的是 CentOS。

**更新** 这个问题与我之前问过的另一个问题有关（[LAMP 服务器的 Linux 用户和组](https://stackoverflow.com/questions/174715/linux-users-and-groups-for-a-lamp-server)）。如果愿意，请使用最佳设置更新此其他问题，以使开发人员用户在可以编辑由 apache 用户创建的文件的服务器上。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2009-08-22T04:34:10.787

对于 CentOS 和其他 Red Hat 发行版，将 umask 设置添加到 /etc/sysconfig/httpd 并重新启动 apache。

```
[root ~]$ echo "umask 002" >> /etc/sysconfig/httpd
[root ~]$ service httpd 重启

```

更多信息：[Apache2 umask | MDLog：/系统管理员](http://www.ducea.com/2009/08/03/apache2-umask/)

对于 Debian 和 Ubuntu 系统，您可以类似地编辑`/etc/apache2/envvars`.

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-07-01T07:21:22.743

这是“CentOS 7 apache umask”在谷歌搜索结果中的第一个结果，所以我将分享我需要做些什么才能在 CentOS 7 上完成这项工作。

对于 CentOS 7，`echo "umask 002" >> /etc/sysconfig/httpd`- 方法对我不起作用。

我确实通过创建一个文件夹覆盖了 systemd 启动文件，`/etc/systemd/system/httpd.service.d`并在那里创建了一个文件**umask.conf** ，其中包含以下行：

```
[Service]
UMask=0007 
```

启动，它对我有用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-01-09T17:52:11.670

`umask`Apache从其父进程（即启动Apache的进程）继承它；这通常应该是`/etc/init.d/`脚本。`umask`所以在那个脚本中放一个命令。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-01-14T20:41:20.133

添加`umask` **命令**对`/etc/apache2/envvars`我来说似乎不是一个好主意，不仅因为文件的名称（仅提及变量），而且还基于在该文件中找到的以下注释：

```
# Since there is no sane way to get the parsed apache2 config in scripts, some
# settings are defined via environment variables and then used in apache2ctl,
# /etc/init.d/apache2, /etc/logrotate.d/apache2, etc. 
```

这表明它`/etc/apache2/envvars`可能来自执行 Apache 相关任务的任何脚本，并且更改那些（事先未知的）脚本的 umask 是相当危险的。

另一方面，如果更改 Apache 目标的umask 以[放宽](http://httpd.apache.org/docs/2.2/mod/mod_dav.html#security)[由](http://article.gmane.org/gmane.comp.apache.devel/4334)`mod_dav`.[腐败）](http://article.gmane.org/gmane.comp.apache.devel/4334)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-13T22:26:37.877

罗提/蜘蛛侠为 CentOS7 添加回答：更改后可以使用以下命令代替“启动”：

```
systemctl daemon-reload
service httpd restart 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-25T10:44:37.783

在 Debian 中，为 Apache 设置 umask 的另一个地方是 /etc/default/apache2。只是这个文件末尾的这一行：umask 0002

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-18T00:39:22.323

您*可能*想要做的是在`SetGID`您的 CGI 正在使用的目录上设置组粘滞位 ( ) 位：

`chgrp mygroup dir chmod g+s dir`

*确保在执行此* *操作*时（用户）apache 在`mygroup`组（in `/etc/group`）中，因此它将具有权限。

这将使在此目录下创建的任何文件都将归与该目录相同的组所有。

这是一种比为 apache 可能运行的每个 cgi 脚本设置全局 umask 更安全的方法。

（这是`git-http-backend`通常从 Apache 运行的方式）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-27T12:16:58.837

对于 Ubuntu，有工具[svnwrap](http://manpages.ubuntu.com/manpages/lucid/man1/svnwrap.1.html)

1.  安装`sudo apt-get install subversion-tools`
2.  用 svnwrap 包装 svn 和 svnserve：
    `sudo ln -s /usr/bin/svnwrap /usr/local/bin/svn`
    `sudo ln -s /usr/bin/svnwrap /usr/local/bin/svnserve`

在此之后，所有使用 file://、svn+ssh:// 和 http:// 协议的 svn 操作都将使用 umask 002 完成

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-25T17:33:11.500

在这里它可能会有所帮助。

管理 rhel/centos 的文件权限

[https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/file-permissions-rhel8_configuring-basic-system-settings#displaying-the-umask_file-permissions-rhel8](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/file-permissions-rhel8_configuring-basic-system-settings#displaying-the-umask_file-permissions-rhel8)

```
# ls -lrt /etc/systemd/system/httpd.service.d/umask.conf
-rw-r--r-- 1 root root 21 Feb 25 10:19 /etc/systemd/system/httpd.service.d/umask.conf

# cat /etc/systemd/system/httpd.service.d/umask.conf
[Service]
UMask=0002 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-16T22:46:01.103

罗提的回答在 CentOS7 上对我有用。

不需要系统引导或重新引导。

使用命令重新启动服务时可能会收到此警告`systemctl restart httpd`

```
`Warning: httpd.service changed on disk. Run 'systemctl daemon-reload' to reload units`. 
```

所以首先运行`systemctl daemon-reload`命令然后`systemctl restart httpd`

* * *

## 回答 #11

> 赞同：-13
> 
> 时间：2009-01-09T15:16:57.320

通常不建议偏离“久经考验的真正 Apache 方式”。大量的时间和来之不易的经验已经用于选择这些东西。

# html - 是否有任何 HTML 编码约定/样式/标准

> ID：428431
> 
> 赞同：9
> 
> 时间：2009-01-09T15:14:27.043
> 
> 标签：html, coding-style

我的意思是命名 ID、名称、值等？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-09T15:19:20.607

虽然我不认为有一个单一的、可接受的命名约定来命名 HTML 元素，但您可能会发现以下文章很有帮助。从第二页开始的内容可能最有帮助。祝你好运！

**[Semantics Take II的意义：CSS中类和ID的命名约定](http://www.informit.com/articles/article.aspx?p=170514)**

这里有几个很好的段落总结了作者试图理解的内容：

> 设计师可能会命名一个列划分#leftnav。乍一看，这是合乎逻辑的，并且在由一个或几个人维护的较小站点的上下文中，这种命名确实没有很多问题。
> 
> 但是，考虑一个像 AOL 或 Yahoo 这样大小的站点，大型设计人员和开发人员团队每天在该站点上管理数百万个页面。假设公司高层做出的一项设计决策是将导航从屏幕左侧的旧主页向右移动。CSS 的部分功能在于，在最佳情况下，切换导航所需要的只是进入 CSS 并通过重新定位或将其浮动到右侧而不是左侧来交换列。保存该文件，然后更新数百万个文档以反映更改。
> 
> 但是现在，数以百万计的文档也有一个 ID 为#leftnav 的分区，用于描述出现在右侧的列！如果不进行大量搜索和替换来更改 (X)HTML 中的 ID 名称，文档现在对于查看源代码或（更重要的是）进入该站点工作的任何人来说都非常混乱。
> 
> 这就是为什么避免演示并选择像#nav 或#subnav 这样简单的更相关的描述在这种环境中会更有用。因此，即使看起来有点挑剔，对于非常大的网站，我们也希望尝试保持 CSS 的强大功能和文档的纯度。智能类和 ID 名称是该目标的主要部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T15:19:38.280

[w3c](http://w3c.org/)推荐？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T15:34:11.980

对于任何对标准感兴趣的人，我总是推荐这两本书：

使用 Web 标准进行设计（第 2 版）（平装本）

[Eric Meyer 谈 CSS：掌握网页设计语言 (VOICES)（平装本）](https://rads.stackoverflow.com/amzn/click/com/073571245X)

这两本书有助于我培养自己的标准。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T15:23:59.787

如果有的话，世界会更美好，独角兽不会灭绝，等等。这就像决定缩进或大括号样式。

试着保持一致和理智。理智的意思不是“缩进 4 个空格并用驼峰命名法命名”，只是你始终遵循一种风格。下划线名称？给你更多的权力。标签来救援？伟大的。我只是不想打开新项目并且不得不诅咒 5 分钟，因为缩进完全被水洗了，而 div 里面的东西是它左边的三个选项卡。

幸运的是，一个好的编辑器会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-27T21:55:45.853

Wordpress 在[这里](http://make.wordpress.org/core/handbook/coding-standards/html/)有一个，这就是我要遵循的。

# asp.net - Visual Studio 中缓慢的“查找所有引用”

> ID：428436
> 
> 赞同：3
> 
> 时间：2009-01-09T15:15:40.550
> 
> 标签：asp.net, visual-studio, ide

我有一个包含 6 个库项目和 1 个 Web 文件夹项目的 VS 解决方案。

当我尝试在对象或方法上使用“查找所有引用”功能时，需要超过 6 分钟才能完成！

它似乎正在重构 Web 项目的每个**aspx**和**ascx**文件。

关于如何让它更快的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T15:39:38.913

您没有提及您正在运行哪个版本的 Visual Studio，但我发现了一个宣传语，声称他们在 2005 年和 2005SP1 之间进行了一些性能改进

> 我们在 VS2005 SP1（并包含在 VS 2008 中）中进行了更改，它通过首先对正在重构的元素执行词法搜索来确定是否需要加载页面来优化 Web 项目的性能。很抱歉我们花了这么长时间才用决议更新这个问题；有几个相关的连接错误，虽然我们更新最多，但我们设法错过了一些。
> 
> 我们希望在未来我们会针对这种情况（在 VS 2008 之后）进行更多的性能增强，但希望我们所做的优化在大多数情况下会显着提高性能。

此外，这个解决方案有点糟糕，但 MS 也提供了这个解决方法：

> 关于变通方法，如果在执行重构之前打开所有网页，则可以显着提高性能。我同意这不是一个特别好的解决方法，但是对于 VS 2005，我们选择将正确性优先于重构的性能。

来源：[https ://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=92239](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=92239)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T15:22:19.897

这看起来确实很慢，我有一个包含 276 个项目的解决方案（不要问），而且不到六分钟就可以找到参考资料。

我开始使用[Source Insight](http://sourceinsight.com/)并发现它更快。

另一个想法，你的病毒检查器可能会干扰。 [Sysinternals](http://technet.microsoft.com/en-us/sysinternals/default.aspx) [filemon](http://technet.microsoft.com/en-us/sysinternals/bb896642.aspx)或[procexp](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)会确认。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T15:23:12.267

我会尝试删除您所有的 ncb 文件，这些文件有时会损坏并且会产生许多广泛的影响。由于您的功能正在使用它们，它可能会有所帮助，下次您打开解决方案时它们将自动重新生成

# plugins - 有没有类似 vi 模式的可扩展编辑器？

> ID：428438
> 
> 赞同：0
> 
> 时间：2009-01-09T15:15:51.020
> 
> 标签：plugins, text, editor, utilities

我正在寻找一个完美的文本编辑器:)

“必备”清单：

*   类似vim的模态编辑，类似于vim的键绑定
*   emacs 喜欢可扩展性 - 插件和编辑器本身使用相同的“真实”语言，因此扩展几乎可以影响编辑器内外的任何东西...... vim 脚本还不够，python 插件也不够
*   插件不受外部进程限制，可以异步更改文本等。
*   支持termcap / curses，这样就可以在里面运行一个真实的终端了
*   使用真正的语法解析，因此插件可以获取有关单词“类型”的信息，而无需通过“它是什么颜色”路径 (synIDattr(synID(line("."), col("."), 1), “名称”）是禁止的）
*   可以进行远程编辑（但这可能已经由插件+扩展点保证）

我知道 viper emacs，但我不确定我是否喜欢这个想法......有人知道更好的东西吗？

说明：

我不是全职程序员。我是一名管理员/程序员/高级用户，他已经将所有时间都花在一次在许多主机上的控制台上，并且 95% 的时间都在运行 vim。我喜欢 vim，但我正在寻找 vim-im ;) Eclipse 并不适合我，因为大多数时候我都在用自己的语法文件编辑 configs / dsls。

有时我确实需要一种重构插件来处理我经常做的事情。我有证据证明它可以在 vim 中完成，但它真的很痛苦......例如，你不能请求“解析树中的先前标记”。您可以做的最好的事情是逐个字符地返回并检查该单词是否具有与变量/函数/其他内容相同的着色样式（在每次检查时都要求解析文件片段）。如果我不能用简单的脚本语言扩展编辑器，它也对我不起作用。

此外，我经常需要第二个终端来运行某些东西并将输出复制到 vim。我无法运行 :!r... 因为它会挂起 vim 中的每个选项卡，直到命令完成。

啊——只有 linux + 控制台——我对 Windows 世界不感兴趣 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T15:33:11.530

从一个 vim'mer 到另一个 - 你的搜索是徒劳的，中止，中止，等等。

如果您对 IDE 使用的任何编辑器感到沮丧（想到 eclipse），那么要么使用 vi 作为外部编辑器，要么习惯 IDE 使用的文本编辑器。原因在于，除了 vi 用户之外，*没有人会发现 vi 是自然的，因此任何“现代”编辑器中对 vi 键绑定的需求都会完全不同。*

如果你真的喜欢 vi 和终端模式等等，请使用 vi。如果您想要更智能的东西，请使用 vim。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T15:44:16.187

SlickEdit：[http ://www.slickedit.com/content/view/73/60](http://www.slickedit.com/content/view/73/60)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-05T12:17:34.967

毕竟找到了：）

[http://haskell.org/haskellwiki/Yi](http://haskell.org/haskellwiki/Yi)

Yi 支持 vim（带有模式和 :commands）和 emacs 键盘映射。它使用适当的增量解析器，并且可以使用 haskell 完全扩展（它与 ghc 接口并编译您的配置/插件 + 将自身链接到结果）。支持选项卡、迷你缓冲区和所有其他很酷的东西。

最近几天我一直在使用它，我对此感到非常满意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T15:39:12.627

****KDE4.2 beta**中的**Kate/Kwrite**现在有类似 vim 的模式，**

 **整个 [Esc] --> 命令模式处理，包括**:help**和**s/** friends 功能。

它并不是真正的完整实现，但它涵盖了一些基础知识。

还有一个[**Yzis**编辑器](http://www.yzis.org/wiki/index.php/Screenshots)，看起来很有趣，我等不及它足够稳定可以使用了，它让你在**任何地方都有**vim 编辑的力量。

我迫不及待地想在语法高亮编辑器中使用完整的强大工具编辑我的 stackoverflow 帖子**：D**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T15:42:37.563

Eclipse 有一个插件，它基本上将编辑器更改为 vim 编辑器。

# .net - 具有每页打印控制的业务报告

> ID：428448
> 
> 赞同：0
> 
> 时间：2009-01-09T15:18:55.817
> 
> 标签：.net, printing, reporting

有谁知道允许逐页控制打印作业的报告工具？具体来说，我需要能够将转义序列插入打印机。

我找到的最接近的是[ActiveReports](http://www.datadynamics.com/Products/ProductOverview.aspx?Product=ARNET3)。它提供了一个这样的接口：

```
SystemPrinter sp = new SystemPrinter(); 
sp.StartJob("jobname"); 
foreach(Page pg in rpt.Pages) { 
    sp.Escape("escape_characters"); 
    sp.StartPage(); 
    pg.Draw(sp.Graphics, rect); //render page to printer
    sp.EndPage(); 
} 
sp.EndJob(); 
```

问题是他们的转义函数有一个已知的错误，并且没有正确地将转义字符传递给打印机。

与此类似的界面是理想的，但不是必需的。我必须处理的最低要求是每页向打印机发送不同的命令。我也在.NET 中工作。任何建议，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T15:38:56.043

抱歉，我用过的最好的一个是 ActiveReports。如果有已知的错误，那么一定要向他们报告。我发现他们得到了不错的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T22:41:31.337

我很确定您会发现 ActiveReports 是唯一提供对打印作业的可扩展控制的报告编写器，尤其是提供转义支持。当然，如果我错了，有人会纠正我。您遇到的 Escape 错误是什么？还值得注意的是，自 Windows 9x 推出以来，Windows 本身已经开始引入一些转义限制，而自 Windows 9x 启动以来，微软一直不鼓励使用转义。只有一个来自 Microsoft 的消息来源提到了[KB125692](http://support.microsoft.com/kb/125692)。无论如何，请告诉我更多关于您在逃生中遇到的问题，我将尝试解决该错误或为您找到解决方法。

-斯科特

# performancepoint - 性能点，仪表板设计师

> ID：428450
> 
> 赞同：1
> 
> 时间：2009-01-09T15:19:19.577
> 
> 标签：performancepoint, dashboard-designer

1.  我对这个产品是全新的。Microsoft 有一些不错的免费视频……但我正在寻找一个网站，我可以在其中询问有关“如何做”的问题，或发布问题……有什么建议吗？

（[http://www.microsoft.com/business/performancepoint/resources/training.aspx](http://www.microsoft.com/business/performancepoint/resources/training.aspx)）

2.  以防万一这是一个很好的网站......

我想将 sql 表引入仪表板设计器，并根据 12 个部门的 83 个操作指标生成记分卡......我有一个简单的表模式：

键、metric_ID、value1、value2、value3、value4、value5、CalendarWeek、Year、Entered、Updated）

我有爬到多个数据库并每周写回基本数据的 sql 作业。我的想法是让仪表板设计人员根据指标需求生成实际指标。

例如。热线性能在第一次通话时关闭呼叫，超过收到的呼叫：(45, 16, 786, 1345,null,null,null,1,2009, 1/5/2009 6am, null)

786/1345 = 58% 与 50% 的运营目标相比 .. 所以 kpi 将是绿色的。

我的问题是；

1.  当我使用 tabluar 向导创建记分卡时，我只得到一个记分卡，将字段列为行（786、1345、空白、空白、空白）；以 Actual 和 Target 作为列......

2.  我还不太了解维度的概念……维度是输入和更新的日期……不是我需要的……我认为……

soo ...我如何构建我的 sql 表以引入这些指标，以及如何为仪表板设计器的连接器“标注”以进行指标计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-09-24T21:58:37.677

我会在您的数据库端进行计算。然后只需将计算值拉入仪表板就很简单了。Dashboard Designer 并不是最擅长进行计算（除了总和、平均值等常规聚合之外）。

# .net - 你接受接口作为构造函数参数吗？

> ID：428452
> 
> 赞同：2
> 
> 时间：2009-01-09T15:19:33.663
> 
> 标签：.net, generics, constructor, interface, robustness

[Krzysztof 的](http://blogs.msdn.com/kcwalina/archive/2005/09/26/474010.aspx#474122)建议是否适用于构造函数？如果是这样，您如何正确实施它？

> 我们建议对输出和属性使用 Collection、ReadOnlyCollection 或 KeyedCollection，对输入使用接口 IEnumerable、ICollection、IList。

例如，

```
public ClassA
{
    private Collection<String> strings;
    public Collection<String> Strings { get { return strings; } }
    public ClassA(IEnumerable<String> strings)
    {
        this.strings = strings; // this does not compile
        this.strings = strings as Collection<String>; // compiles (and usually runs?)
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T15:24:21.737

你应该避免垂头丧气；在您的示例中，我建议您的构造函数参数的类型应该匹配（应该与）您的成员数据的类型（即**要么** `Collection<String>` **或** `IEnumerable<String>`）。

或者是 Marc 的解决方案，这是不同的：因为 Marc 的解决方案意味着您的成员数据不仅是不同的类型，而且还是不同的实例（即，如果您修改成员数据，那么您正在修改原始集合的副本，而不是编辑原始集合本身；类似地，如果在您制作副本后修改了原始集合，则您的本地副本/成员数据不包括对原始集合的后续更改）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T15:24:27.977

您不应该使用该`as`版本 - 您应该接受并存储可重复的内容，例如`IList<T>`，或者创建一个新的本地数据集合：

```
this.strings = new Collection<string>();
foreach(string s in strings) { this.strings.Add(s); } 
```

实际上，我会使用`List<T>`自己；那么你可以这样做（虽然这不是使用的原因`List<T>`）：

```
this.strings = new List<string>(strings); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-12T03:23:49.380

我相信如果可能的话，应该避免向下转换。如果该类将输入存储为具体类“Collection”（这意味着该类与“Collection”一起使用，那么我认为只接受“Collection”类型的输入而不是接口对应项更自然。

这将向下转换（如果需要）的责任转移回了消费者，如果他确实向下转换，他们应该知道他在做什么。

另一方面，我会说接受输入作为接口比具体类更好，因为它允许更轻松地输入模拟对象的灵活性。但是，这将要求类的内部依赖于接口而不是具体类（因此在示例中，成员变量将是 IEnumerable 而不是 Collection）。

我同意 yapiskan 的观点，即 Marc 的解决方案实际上通过创建输入的副本改变了用法，因此责任发生了变化：

之前：输入在消费者和此类之间始终共享。因此，对输入的更改在消费者和此类之间“共享”

After：调用构造函数后，这个类对输入的理解与消费者分离。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T15:26:32.417

如果您存储的是 Collection，那么我更喜欢将 ICollection 作为输入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T15:27:28.467

这可能都是关于不暴露太多你的实现。理想情况下，如果您正在设计一个公共 API，您应该只公开最低限度的实现。如果您返回一个完整的 List 接口，那么公共 API 的用户将有很多方式以您可能不打算使用的方式弄乱您的类的内部结构。

- - 编辑 - -

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T18:20:36.573

为什么不接受类型参数`IEnumerable<String>`并将其转换为检索？

```
public ClassA
{
    private IEnumberable<String> strings;

    public Collection<String> StringCollection {
        get { return (Collection<String>) strings; }
    }

    public ClassA(IEnumerable<String> strings)
    {
        this.strings = strings; 
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T18:36:25.810

我会同意佩奇的观点。

我同意您应该将 IEnumerable 作为输入传递（这样您就支持任何可枚举的集合）。

但是你在上面用 StringCollection 属性做的事情对我来说没有意义 - 你正在向下转换，这是行不通的。

-马特

# sql - 一次计算所有表的行数

> ID：428458
> 
> 赞同：16
> 
> 时间：2009-01-09T15:21:31.570
> 
> 标签：sql, sql-server, sql-server-2005

我正在使用 SQL Server 2005，想知道如何获取所有表的列表以及每个表中的记录数。

我知道我可以使用视图获取表格列表`sys.tables`，但我无法找到计数。

谢谢

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-01-09T15:24:55.337

从这里：[http ://web.archive.org/web/20080701045806/http://sqlserver2000.databases.aspfaq.com:80/how-do-i-get-a-list-of-sql-server-tables -and-their-row-counts.html](http://web.archive.org/web/20080701045806/http://sqlserver2000.databases.aspfaq.com:80/how-do-i-get-a-list-of-sql-server-tables-and-their-row-counts.html)

```
SELECT 
    [TableName] = so.name, 
    [RowCount] = MAX(si.rows) 
FROM 
    sysobjects so, 
    sysindexes si 
WHERE 
    so.xtype = 'U' 
    AND 
    si.id = OBJECT_ID(so.name) 
GROUP BY 
    so.name 
ORDER BY 
    2 DESC 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2011-01-20T01:13:24.630

值得一提的是，sysindexes 系统表在 SQL 2008 中已被弃用。上述方法仍然有效，但这里的查询可用于 SQL 2008 系统视图。

```
select
schema_name(obj.schema_id) + '.' + obj.name,
row_count
from (
    select
        object_id,
        row_count = sum(row_count)
    from sys.dm_db_partition_stats
    where index_id < 2  -- heap or clustered index
    group by object_id
) Q
join sys.tables obj on obj.object_id = Q.object_id 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-09T15:33:47.177

我可能会补充说 sysindexes.rows 是行数的近似值。[`DBCC UPDATEUSAGE`](http://msdn.microsoft.com/en-us/library/ms188414.aspx)如果您需要更准确的值，我会运行。我们在一个包含超过 47-5000 万行的表上遇到了这个问题，我们认为每个表都损失了大约 50 万行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-09T15:24:52.670

也许是这样的：

```
SELECT 
    [TableName] = so.name, 
    [RowCount] = MAX(si.rows) 
FROM 
    sysobjects so, 
    sysindexes si 
WHERE 
    so.xtype = 'U' 
    AND 
    si.id = OBJECT_ID(so.name) 
GROUP BY 
    so.name 
ORDER BY 
    2 DESC 
```

[http://web.archive.org/web/20080701045806/http://sqlserver2000.databases.aspfaq.com:80/how-do-i-get-a-list-of-sql-server-tables-and-他们的-row-counts.html](http://web.archive.org/web/20080701045806/http://sqlserver2000.databases.aspfaq.com:80/how-do-i-get-a-list-of-sql-server-tables-and-their-row-counts.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T14:26:44.253

这是我的方法：

```
create table #rowcount (tablename varchar(128), rowcnt int)
exec sp_MSforeachtable 
   'insert into #rowcount select ''?'', count(*) from ?'
select * from #rowcount
    order by tablename
drop table #rowcount 
```

奇迹般有效

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-27T09:34:10.170

所有这些方法都将为您提供选择查询结果集中的行数。SSMS 还为您提供了通过**“对象资源管理器详细信息”窗格**查看对象详细信息的选项。这适用于 2005 年及之后的所有版本

对象资源管理器详细信息是 SQL Server Management Studio 的一个组件。它提供了服务器中所有对象的表格视图，并提供了一个用户界面来管理它们。

要到达“对象详细信息窗口”：在“对象资源管理器”窗格中单击要查看详细信息的对象，**然后按 F7**。阅读更多：[https ://technet.microsoft.com/en-us/library/ms191146(v=sql.90).aspx](https://technet.microsoft.com/en-us/library/ms191146(v=sql.90).aspx)

优点：

1.  **比选择查询快得多，因为 SQL Server 存储此信息**
2.  **无需每次都编写/复制粘贴选择查询 - 您只需按 F7 即可**
3.  为您提供更多信息，而不仅仅是关于行数

注意：默认情况下，对象详细信息窗格中可能没有行计数，您可以单击列标题并将其引入。

# silverlight - Silverlight 中的跨域安全错误？

> ID：428461
> 
> 赞同：1
> 
> 时间：2009-01-09T15:22:59.960
> 
> 标签：silverlight, cross-domain, yahoo-pipes

我正在尝试将来自 Yahoo Pipes 的提要读入 Silverlight 应用程序。我不断收到一个SecurityException，这听起来像是一个跨域策略问题，但是如果你通过pipes.yahooapis域，雅虎管道有一个跨域策略，所以应该没问题。我尝试了完全相同的代码，但转到 Digg API，它工作正常（尽管这是休息而不是 rss 提要）。我的错误与跨域策略无关吗？

我将以下代码用于 Web 请求：

```
 WebClient wc = new WebClient();    
 wc.DownloadStringAsyncCompleted += new DownloadStringCompletedEventHandler(wc_DlStrCompleted);    
 wc.DownloadStringAsync(new Uri(yahooPipesUrl)); 
```

我得到的异常是 System.Security.SecurityException。

我正在尝试的网址是这个

[http://pipes.yahooapis.com/pipes/pipe.run?_id=4rBri9Ef3RG8CEGLLe2fWQ&_render=rss&feedUrl=http://feeds.feedburner.com/follesoe](http://pipes.yahooapis.com/pipes/pipe.run?_id=4rBri9Ef3RG8CEGLLe2fWQ&_render=rss&feedUrl=http://feeds.feedburner.com/follesoe)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T17:51:03.280

到位的策略文件是：

```
<!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd"> 
<cross-domain-policy> 
  <site-control permitted-cross-domain-policies="master-only" /> 
  <allow-access-from domain="*" /> 
</cross-domain-policy> 
```

目前存在一个问题，Silverlight 不适用于整个 Flash 跨域策略文件格式...我预计站点控制元素会破坏它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T17:41:17.420

[http://pipes.yahooapis.com/crossdomain.xml](http://pipes.yahooapis.com/crossdomain.xml)上的 crossdomain.xml 策略文件仅在 allow-access-from 元素中指定安全 (https:) 请求。[请参阅此处](http://wwwstuff.wip3.adobe.com/devnet/articles/crossdomain_policy_file_spec.html#allow-access-from-secure)有关格式的文档：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
  <site-control permitted-cross-domain-policies="master-only" />
  <allow-access-from domain="*" secure="true" />
</cross-domain-policy> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T16:14:47.373

[http://pipes.yahoo.com/crossdomain.xml](http://pipes.yahoo.com/crossdomain.xml) 或[http://pipes.yahoo.com/clientaccesspolicy.xml](http://pipes.yahoo.com/clientaccesspolicy.xml)中没有客户端访问策略文件

因此 SecurityException 是正确的行为。

您尝试访问的确切 URL 是什么？

# php - 如何使用 PHP 对某些用户隐藏某些内容？

> ID：428470
> 
> 赞同：2
> 
> 时间：2009-01-09T15:25:29.003
> 
> 标签：php

我使用 PHP 为我们公司创建了一个 Intranet。每个页面上都显示相同的菜单，包括指向敏感页面和文档（如 Word 文件）的链接。

目前只有在办公室的员工可以访问该网站，但我们希望向一些不在办公室的承包商开放。问题是我必须限制对某些内容的访问。

我知道[如何使用 Apache 对站点目录进行密码保护](http://www.elated.com/articles/password-protecting-your-pages-with-htaccess)，但我宁愿自己隐藏菜单选项。

你会如何处理这个问题？

**澄清**：这是在每个人都在本地或通过 VPN 登录到我们的 Windows 网络的环境中，但目前没有人必须登录才能看到我的 Intranet 站点。如果可能的话，理想的解决方案不需要他们做任何额外的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T15:31:50.440

如果用户正在登录，那么您可以使用他们的登录详细信息来限制访问。您可能想研究[访问控制列表](http://en.wikipedia.org/wiki/Access_Control_Lists)的想法。

如果您的用户使用 Apache 登录，那么您可以从 $_SERVER['PHP_AUTH_USER'] 访问他们的用户名。所以你可能想做这样的事情：

```
$username = $_SERVER['PHP_AUTH_USER'];
$user_id = lookup_user_id($username); // a function you write that looks up their user id in your database of users 
```

然后你可以类似地查看他们的访问级别——他们可能有一个用户状态，比如“Guest”或“Super-user”或“Administrator”，或者你可能想要一个矩阵资源和用户，为每个用户和资源指定该用户是否可以访问该资源。

否则，像 CakePHP 这样的框架会（几乎）免费为您提供这种东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T15:29:15.423

我会创建一个 PHP 函数，在您的侧边栏中或显示这些链接的任何位置生成菜单项，并根据用户是否以员工身份登录以不同方式填充菜单。当然，您还需要对要限制访问的各个目录进行密码保护，但您已经知道这一点。

更好的方法是使用像 CakePHP 这样的框架或像 Drupal 这样的平台，它们已经内置了可以利用的用户和角色功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T15:29:22.537

我会使用 CodeIgniter 添加一个轻量级的用户身份验证系统。

然后，只需在显示菜单或允许访问任何受保护的内容之前检查用户是否已通过身份验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T15:30:06.200

这取决于您当前员工的身份验证方式。我们在公司讨论了这一点，以允许某些合作伙伴访问员工门户。我们针对由我们的服务调度软件管理的数据库进行身份验证，因此一种解决方案是添加一个标记为“合作伙伴”的复选框，它会告诉身份验证脚本针对不同的数据库进行身份验证。

如果没有更多信息，很难描述一个适合您的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T16:29:40.433

我想我可能会要求用户登录（一天一次？）并向他们发送一个加密的 cookie 以维持该会话。

似乎不可能（出于安全原因，也许不应该这样做）让他们的网络登录对该站点执行双重任务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T16:55:28.650

也许您可以对照您的内部 IP 范围检查 $_SERVER['REMOTE_ADDR']？

# php - PHP中的矩阵算法？

> ID：428473
> 
> 赞同：7
> 
> 时间：2009-01-09T15:26:19.470
> 
> 标签：php, matrix

有谁知道处理矩阵乘法、求逆等的 PHP 库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T15:48:13.123

你可以试试[Math_Matrix](http://pear.php.net/package/Math_Matrix "数学矩阵")库。我没有使用它，但它似乎相当全面，超越了简单的矩阵算术，还包括计算行列式或求解方程组等内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-02-02T21:32:06.830

有一个相对较新[的 PHP 线性回归](http://mnshankar.wordpress.com/2011/05/01/regression-analysis-using-php/)库。该库确实包含用于矩阵乘法的类，以及具有 100% 代码覆盖率的单元测试。

# c# - 我应该在输入字段中对值进行 html 编码吗？

> ID：428478
> 
> 赞同：8
> 
> 时间：2009-01-09T15:27:58.297
> 
> 标签：c#, asp.net-mvc, xss

我应该使用哪个？

```
<input type="hidden" name="first_name" 
value="<%= person.first_name %>" /> 
```

或者

```
<input type="hidden" name="first_name" 
value="<%= Html.Encode( person.first_name ) %>" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T15:36:56.810

您应该 Html.Encode 否则字段中的“可能会导致注入问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T15:37:30.180

如果要为 HTML 元素设置默认值，则必须使用[字符引用对值内](http://www.w3.org/TR/REC-html40/intro/sgmltut.html#h-3.2.3)[的 HTML 特殊字符](http://www.w3.org/TR/REC-html40/charset.html#h-5.3.2)进行编码。

# geolocation - 是否有 API 可用于复制 iPhoto '09 的“地点”功能？

> ID：428481
> 
> 赞同：1
> 
> 时间：2009-01-09T15:28:20.073
> 
> 标签：geolocation, geocoding, iphoto

[我看到了 Apple 的主题演讲，对iPhoto '09](http://www.apple.com/ilife/iphoto/)中新增的 Places 功能印象深刻。简而言之，它从照片中获取地理编码信息并将其转换为真实的地方。所以它不是 -41.51.2 或其他什么，而是说“帝国大厦”。

它看起来很有趣，但它也类似于我想添加到我自己的应用程序中的功能。因此，从开发人员的角度来看，我想知道是否有人知道 Apple 使用什么服务来解决“地理编码到位置”映射？或者它被认为是他们在内部开发的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-10T00:16:35.390

[BrightKite](http://brightkite.com)使用 Google API（无论是公共的还是私有的）将地理位置（通过 iPhone 应用程序中的 GPS 或浏览器中的[Geode](http://labs.mozilla.com/2008/10/introducing-geode/)捕获）转换为指定地点，所以是的，这绝对是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-22T05:04:03.980

**编辑** 因为这最初是我的问题，最近又冒出来了，只是编辑在这里添加 2016 年的答案......从 iOS 5 开始，反向地理编码可通过 CLGeocoder 获得。从 iOS 6.1 开始，前向地理编码是使用 MKLocalSearch 的 SDK 的一部分。

您所指的过程称为“反向地理编码”。反向地理编码服务将纬度和经度作为输入，并返回真实世界地址作为输出。有几家供应商提供这项服务。Yahoo 和 Google 都有 API，但限制您查找要绘制在 Yahoo 或 Google 地图上的地址。它们还限制您在商业应用程序中使用它们的 API。还有不少其他提供商对反向地理编码收费。我目前使用的一个是[http://geocoder.us](http://geocoder.us)

# winapi - 配置应用程序验证程序以生成全内存 .DMP 文件？

> ID：428493
> 
> 赞同：0
> 
> 时间：2009-01-09T15:30:21.193
> 
> 标签：winapi, postmortem-debugging

在 AppVerifier 下，我们的一个应用程序崩溃了。我得到一个 DMP 文件，但它是一个小型转储。具体来说，虽然我有调用堆栈，但我还想要故障进程的用户空间内存（它使用很多全局变量）。如何配置 App Verifier（或 Windows）以提供完整的转储文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T15:49:27.783

我认为您必须配置 Windows 本身（或更准确地说，Windows 错误报告组件）以生成完整转储。

请参阅此知识库文章：http: [//support.microsoft.com/kb/254649/](http://support.microsoft.com/kb/254649/)

对于 Server2008，Vista SP1：http: [//msdn.microsoft.com/en-us/library/bb787181.aspx](http://msdn.microsoft.com/en-us/library/bb787181.aspx)

# c# - 是否可以在不阻止所有表单的情况下使用 ShowDialog？

> ID：428494
> 
> 赞同：59
> 
> 时间：2009-01-09T15:30:22.377
> 
> 标签：c#, winforms, showdialog

我希望我能足够清楚地解释这一点。我有我的主表单 (A)，它使用 form.Show() 打开 1 个子表单 (B)，使用 form.Show() 打开第二个子表单 (C)。现在我希望子窗体 B 使用 form.ShowDialog() 打开一个窗体 (D)。当我这样做时，它也会阻止表格 A 和表格 C。有没有办法打开一个模式对话框，只让它阻止打开它的表单？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2009-01-09T16:37:27.827

使用多个 GUI 线程是一件棘手的事情，如果这是您这样做的唯一动机，我建议您不要这样做。

更合适的方法是使用`Show()`而不是`ShowDialog()`，并禁用所有者表单，直到弹出表单返回。只有四个考虑：

1.  使用`ShowDialog(owner)`时，弹出表单保持在其所有者的顶部。使用时也是如此`Show(owner)`。或者，您可以`Owner`显式设置属性，效果相同。

2.  如果将所有者表单的`Enabled`属性设置为`false`，则表单显示禁用状态（子控件“灰显”），而`ShowDialog`使用时，所有者表单仍然被禁用，但不显示禁用状态。

    当您调用`ShowDialog`时，所有者表单在 Win32 代码中被禁用——它的`WS_DISABLED`样式位被设置。这会导致它失去获得焦点并在单击时“叮”的能力，但不会使其自身变为灰色。

    当您将窗体的`Enabled`属性设置为 时`false`，会设置一个附加标志（在框架中，而不是在底层 Win32 子系统中），某些控件在绘制自己时会检查该标志。此标志告诉控件将自己绘制为禁用状态。

    所以要模拟. `ShowDialog`_ 这是通过一点点互操作完成的：`WS_DISABLED``Enabled``false`

    ```
    const int GWL_STYLE   = -16;
    const int WS_DISABLED = 0x08000000;

    [DllImport("user32.dll")]
    static extern int GetWindowLong(IntPtr hWnd, int nIndex);

    [DllImport("user32.dll")]
    static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);

    void SetNativeEnabled(bool enabled){
        SetWindowLong(Handle, GWL_STYLE, GetWindowLong(Handle, GWL_STYLE) &
            ~WS_DISABLED | (enabled ? 0 : WS_DISABLED));
    } 
    ```

3.  在对话框关闭之前，`ShowDialog()`调用不会返回。这很方便，因为您可以暂停所有者表单中的逻辑，直到对话框完成其工作。调用必然不会以这种`Show()`方式运行。因此，如果要使用`Show()`而不是`ShowDialog()`，则需要将逻辑分成两部分。对话框关闭后应该运行的代码（包括重新启用所有者表单）应该由`Closed`事件处理程序运行。

4.  当表单显示为对话框时，设置其`DialogResult`属性会自动关闭它。每当单击具有`DialogResult`其他属性的按钮时，都会设置此属性`None`。显示的表单`Show`不会像这样自动关闭，因此我们必须在单击其中一个关闭按钮时显式关闭它。但是请注意，该`DialogResult`属性仍由按钮正确设置。

实现这四件事，您的代码将变为：

```
class FormB : Form{
    void Foo(){
        SetNativeEnabled(false); // defined above
        FormD f = new FormD();
        f.Closed += (s, e)=>{
            switch(f.DialogResult){
            case DialogResult.OK:
                // Do OK logic
                break;
            case DialogResult.Cancel:
                // Do Cancel logic
                break;
            }
            SetNativeEnabled(true);
        };
        f.Show(this);
        // function Foo returns now, as soon as FormD is shown
    }
}

class FormD : Form{
    public FormD(){
        Button btnOK       = new Button();
        btnOK.DialogResult = DialogResult.OK;
        btnOK.Text         = "OK";
        btnOK.Click       += (s, e)=>Close();
        btnOK.Parent       = this;

        Button btnCancel       = new Button();
        btnCancel.DialogResult = DialogResult.Cancel;
        btnCancel.Text         = "Cancel";
        btnCancel.Click       += (s, e)=>Close();
        btnCancel.Parent       = this;

        AcceptButton = btnOK;
        CancelButton = btnCancel;
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-01-09T15:45:35.000

您可以使用单独的线程（如下所示），但这会进入危险区域 - 如果您了解线程的含义（同步、跨线程访问等），您应该只使用此选项：

```
[STAThread]
static void Main() {
    Application.EnableVisualStyles();
    Button loadB, loadC;
    Form formA = new Form {
        Text = "Form A",
        Controls = {
            (loadC = new Button { Text = "Load C", Dock = DockStyle.Top}),
            (loadB = new Button { Text = "Load B", Dock = DockStyle.Top})
        }
    };
    loadC.Click += delegate {
        Form formC = new Form { Text = "Form C" };
        formC.Show(formA);
    };
    loadB.Click += delegate {
        Thread thread = new Thread(() => {
            Button loadD;
            Form formB = new Form {
                Text = "Form B",
                Controls = {
                    (loadD = new Button { Text = "Load D",
                        Dock = DockStyle.Top})
                }
            };
            loadD.Click += delegate {
                Form formD = new Form { Text = "Form D"};
                formD.ShowDialog(formB);
            };
            formB.ShowDialog();  // No owner; ShowDialog to prevent exit
        });
        thread.SetApartmentState(ApartmentState.STA);
        thread.Start();
    };
    Application.Run(formA);
} 
```

（显然，您实际上不会像上面那样构建代码 - 这只是显示行为的最短方式；在实际代码中，每个表单都有一个类，等等）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-01-09T15:36:35.110

如果您在 A 和 C 的单独线程上运行 Form B，则 ShowDialog 调用只会阻塞该线程。显然，这当然不是一项微不足道的工作投资。

您可以让对话框完全不阻塞任何线程，只需在单独的线程上运行 Form D 的 ShowDialog 调用。这需要相同类型的工作，但要少得多，因为您的应用程序主线程只会运行一个表单。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-01-20T15:18:57.120

我想总结可能的解决方案并添加一个新的替代方案（3a 和 3b）。但首先我想澄清一下我们在说什么：

*我们有一个具有多种形式的应用程序。需要显示模态对话框，它只会阻止我们表单的某些子集，而不会阻止其他表单。模态对话框可能仅在一个子集（场景 A）或多个子集（场景 B）中显示。*

现在总结可能的解决方案：

1.  **完全不要使用通过显示`ShowDialog()`的模态形式**

    考虑一下您的应用程序的设计。你真的需要使用`ShowDialog()`方法吗？如果您不需要模态形式，这是最简单和最干净的方法。

    当然，这种解决方案并不总是合适的。有一些特性`ShowDialog()`给了我们。最值得注意的是它禁用了所有者（但不会灰显）并且用户无法与之交互。非常令人筋疲力尽的答案提供了[P Daddy](https://stackoverflow.com/a/428782/2870889)。

2.  **模仿`ShowDialog()`行为**

    可以模拟该方法的行为。我再次建议阅读[P Daddy 的回答](https://stackoverflow.com/a/428782/2870889)。

    **a) 通过 . 使用****`Enabled`属性`Form`**组合并将形式显示为非模态`Show()`。因此，禁用的表单将灰显。但它是完全托管的解决方案，不需要任何互操作。

    **b)**不喜欢父表单变灰？参考一些本地方法并**关闭`WS_DISABLED`父表单上的位**（再次 - 请参阅[P Daddy](https://stackoverflow.com/a/428782/2870889)的答案）。

    这两种解决方案要求您完全控制需要处理的所有对话框。您必须使用特殊构造来显示“部分阻塞对话框”，并且不能忘记它。你需要调整你的逻辑，因为`Show()`它是非阻塞的并且`ShowDialog()`是阻塞的。处理系统对话框（文件选择器、颜色选择器等）可能是个问题。另一方面，您不需要在不会被对话框阻止的表单上添加任何额外代码。

3.  **克服限制`ShowDialog()`**

    注意有[`Application.EnterThreadModal`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.enterthreadmodal%28v=vs.110%29.aspx)和[`Application.LeaveThreadModal`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.leavethreadmodal(v=vs.110).aspx)事件。每当显示模式对话框时都会引发此事件。请注意，事件实际上是线程范围的，而不是应用程序范围的。

    **`Application.EnterThreadModal`**a)在不被对话阻塞的表单中**收听****事件并在这些表单中****打开`WS_DISABLED`位**。您只需要调整不应被模式对话框阻止的表单。您可能还需要检查显示的模态表单的父链并`WS_DISABLED`根据此条件进行切换（在您的示例中，如果您还需要通过表单 A 和 C 打开对话框，但不阻止表单 B 和 D）。

    **b) 隐藏和重新显示不应被阻止的表格**。请注意，当您在显示模态对话框后显示新表单时，它不会被阻止。利用这一点，当显示模式对话框时，隐藏并再次显示所需的表单，以免它们被阻止。但是这种方法可能会带来一些闪烁。理论上可以通过启用/禁用 Win API 中的表单重绘来解决此问题，但我不保证这一点。

    **c)`Owner`**在显示对话框时不应阻止的窗体上将**属性设置为对话框窗体。**我没有测试这个。

    **d) 使用多个 GUI 线程**。[来自 TheSmurf 的回答](https://stackoverflow.com/a/428517/2870889)。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-01-09T16:12:10.530

在 FormA 的新线程中启动 FormB：

```
 (new System.Threading.Thread(()=> {
            (new FormB()).Show();
        })).Start(); 
```

现在，使用 ShowDialog() 在新线程中打开的任何表单都只会阻止 FormB 而不是 FormA 或 FormC

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-05-23T17:12:11.770

我只是想在这里添加我的解决方案，因为它似乎对我很有效，并且可以封装成一个简单的扩展方法。我唯一需要做的就是处理@nightcoder 对@PDaddy 的回答发表评论时的闪烁问题。

```
public static void ShowWithParentFormLock(this Form childForm, Form parentForm)
{
  childForm.ShowWithParentFormLock(parentForm, null);
}

public static void ShowWithParentFormLock(this Form childForm, Form parentForm, Action actionAfterClose)
{
  if (childForm == null)
    throw new ArgumentNullException("childForm");
  if (parentForm == null)
    throw new ArgumentNullException("parentForm");
  EventHandler activatedDelegate = (object sender, EventArgs e) =>
  {
    childForm.Focus();
    //To Do: Add ability to flash form to notify user that focus changed
  };
  childForm.FormClosed += (sender, closedEventArgs) =>
    {
      try
      {
        parentForm.Focus();
        if(actionAfterClose != null)
          actionAfterClose();
      }
      finally
      {
        try
        {
          parentForm.Activated -= activatedDelegate;
          if (!childForm.IsDisposed || !childForm.Disposing)
            childForm.Dispose();
        }
        catch { }
      }
    };
  parentForm.Activated += activatedDelegate;
  childForm.Show(parentForm);
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-03-29T01:59:39.587

我在编写的应用程序中遇到了类似的问题。我的主 UI 是在主线程上运行的表单。我有一个帮助对话框，我想以无模式对话框的形式运行。这很容易实现，甚至可以确保我只运行一个帮助对话框实例。不幸的是，我使用的任何模态对话框也会导致帮助对话框失去焦点——当其中一些模态对话框正在运行时，帮助对话框将是最有用的。

使用这里和其他地方提到的想法，我设法克服了这个错误。

我在主 UI 中声明了一个线程。

```
Thread helpThread; 
```

以下代码处理触发以打开帮助对话框的事件。

```
private void Help(object sender, EventArgs e)
{
    //if help dialog is still open then thread is still running
    //if not, we need to recreate the thread and start it again
    if (helpThread.ThreadState != ThreadState.Running)
    {
        helpThread = new Thread(new ThreadStart(startHelpThread));
        helpThread.SetApartmentState(ApartmentState.STA);
        helpThread.Start();
    }
}

void startHelpThread()
{
    using (HelpDialog newHelp = new HelpDialog(resources))
    {
        newHelp.ShowDialog();
    }
} 
```

我还需要初始化添加到构造函数中的线程，以确保在第一次运行此代码时我没有引用空对象。

```
public MainWindow()
{
    ...
    helpThread = new Thread(new ThreadStart(startHelpThread));
    helpThread.SetApartmentState(ApartmentState.STA);
    ...
} 
```

这确保线程在任何给定时间只有一个实例。线程本身运行对话框，并在对话框关闭后停止。由于它在单独的线程上运行，因此从主 UI 中创建模式对话框不会导致帮助对话框挂起。我确实需要添加

```
helpDialog.Abort(); 
```

到我的主 UI 的表单关闭事件，以确保在应用程序终止时关闭帮助对话框。

我现在有一个无模式的帮助对话框，它不受从我的主 UI 中生成的任何模式对话框的影响，这正是我想要的。这是安全的，因为主 UI 和帮助对话框之间不需要通信。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-03-16T07:10:49.017

这是我在 WPF 中使用的帮助程序，以根据对这个问题的一些答案来防止对话框阻塞非对话框窗口：

```
public static class WindowHelper
{
    public static bool? ShowDialogNonBlocking(this Window window)
    {
        var frame = new DispatcherFrame();

        void closeHandler(object sender, EventArgs args)
        {
            frame.Continue = false;
        }

        try
        {
            window.Owner.SetNativeEnabled(false);
            window.Closed += closeHandler;
            window.Show();

            Dispatcher.PushFrame(frame);
        }
        finally
        {
            window.Closed -= closeHandler;
            window.Owner.SetNativeEnabled(true);
        }
        return window.DialogResult;
    }

    const int GWL_STYLE = -16;
    const int WS_DISABLED = 0x08000000;

    [DllImport("user32.dll")]
    static extern int GetWindowLong(IntPtr hWnd, int nIndex);

    [DllImport("user32.dll")]
    static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);

    static void SetNativeEnabled(this Window window, bool enabled)
    {
        var handle = new WindowInteropHelper(window).Handle;
        SetWindowLong(handle, GWL_STYLE, GetWindowLong(handle, GWL_STYLE) &
            ~WS_DISABLED | (enabled ? 0 : WS_DISABLED));
    }
} 
```

用法：

```
if(true == window.ShowDialogNonBlocking())
{
    // Dialog result has correct value
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-29T11:31:36.910

也许子窗口（详见*[ChildWindow](http://wpftoolkit.codeplex.com/wikipage?title=ChildWindow&referringTitle=Home)*）会是一个更优雅的解决方案，它可以避免 GUI 单独线程的所有问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-03-22T14:23:44.293

使用示例：

```
(new NoneBlockingDialog((new frmDialog()))).ShowDialogNoneBlock(this); 
```

源代码：

```
class NoneBlockingDialog
{
    Form dialog;
    Form Owner;

    public NoneBlockingDialog(Form f)
    {
        this.dialog = f;
        this.dialog.FormClosing += new FormClosingEventHandler(f_FormClosing);
    }

    void f_FormClosing(object sender, FormClosingEventArgs e)
    {
        if(! e.Cancel)
            PUtils.SetNativeEnabled(this.Owner.Handle, true);
    }

    public void ShowDialogNoneBlock(Form owner)
    {
        this.Owner = owner;
        PUtils.SetNativeEnabled(owner.Handle, false);
        this.dialog.Show(owner);
    }
}

partial class PUtils
{
            const int GWL_STYLE = -16;
    const int WS_DISABLED = 0x08000000;

    [DllImport("user32.dll")]
    static extern int GetWindowLong(IntPtr hWnd, int nIndex);

    [DllImport("user32.dll")]
    static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);

    static public void SetNativeEnabled(IntPtr hWnd, bool enabled)
    {
        SetWindowLong(hWnd, GWL_STYLE, GetWindowLong(hWnd, GWL_STYLE) & ~WS_DISABLED | (enabled ? 0 : WS_DISABLED));
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-10-01T18:05:01.487

我来到这个线程是为了做类似的事情：有多个独立的父窗体，在同一个进程中运行，每个都有自己的模式对话框。我打算用一个类比来证明它是可能的，那就是多个 Word 文档，每个文档都有自己的查找和替换窗口。

我确信我以前做过这个，但在尝试过之后，你知道吗，**即使是 Microsoft Word 也无法做到这一点**。它的行为与 OP 描述的完全一样：一旦打开模式对话框（如使用 Ctrl+H 查找和替换），所有 Word 文档都会被阻止并且无法与之交互。更糟糕的是，仅单击原始父文档会导致模式对话框闪烁。他们中的其他人只是没有回应，也没有暗示他们为什么被阻止或需要关闭什么。

这确实可能是一个非常令人困惑的用户体验。令我惊讶的是，微软自己的旗舰办公软件就是这种情况（而且我以前没有注意到）。然而，它也帮助我接受了我自己的应用程序的行为方式。

进一步的确认来自[.NET 文档](https://docs.microsoft.com/en-us/dotnet/api/system.windows.window.showdialog?redirectedfrom=MSDN&view=netcore-3.1#remarks)本身，该文档指出“`ShowDialog`显示窗口，禁用***应用程序中的***所有其他窗口，并且仅在窗口关闭时返回”。

* * *

我意识到这在技术上不是一个“解决方案”。那些真正觉得他们的应用程序需要支持完全独立的父表单的人可以尝试[@PDaddy](https://stackoverflow.com/a/428782/2299915)的解决方法，这似乎非常彻底。

然而，希望这能让那些（像我一样）只是想认真对待他们的 UI 并认为他们做错了什么的人安心。你没疯。显然，这就是 Windows 的工作方式。

# c# - 如何为 Microsoft Word 文档中的合并字段设置默认值

> ID：428496
> 
> 赞同：-1
> 
> 时间：2009-01-09T15:30:53.110
> 
> 标签：c#, ms-word, mailmerge

我正在使用 Aspose (.NET/C#) 生成一个包含多个邮件合并字段的 word 文档。但是，由于我有一种方法可以处理几个不同的模板，因此并非每个合并字段都可以处理/合并。

有没有办法为合并字段设置默认的“文本”值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-08-30T14:31:18.947

我不是 100% 确定你想做什么，但我想它可以使用条件字段来完成。也许类似的东西可能会起作用：

{ IF << Field1 >>="" "<< Field1 >>" "我的默认值" }

# c# - 为什么我会在这里失去会话？

> ID：428513
> 
> 赞同：0
> 
> 时间：2009-01-09T15:35:04.147
> 
> 标签：c#, asp.net

我有一个带有按钮的页面，当我单击该按钮时，它会从数据库中检索数据并将其存储到数据表中并将其绑定到 GridView。此数据表存储在 Session 变量中。我还有一个按钮，可以将数据表中的指定列导出到 excel 文件，但是当我第二次单击导出按钮时，出现以下错误：

你调用的对象是空的。

它似乎发生在这一行：

dtExport.Columns["Business"].ColumnName = "被许可人";

我想我知道为什么了，原来的列叫“Business”，但是我导出的时候，想把列标题导出为Licensee，所以我把ColumnName改成了“Licensee”；但是，当我第二次调用 Export 时，它会再次查找 dtExport.Columns["Business"] 但它没有找到，因此它会引发错误。我是否只需要检查该列是否已被重命名以解决此问题还是有其他方法？

这是执行导出的代码：

```
private void ExportExcel()
{
    DataTable dtExport = Session["dtSearchResults"] as DataTable;

    dtExport.Columns["Business"].ColumnName = "Licensee";

    List<int> columnSelect = new List<int>();

    columnSelect.Add(dtExport.Columns["Licensee"].Ordinal);
    columnSelect.Add(dtExport.Columns["Name"].Ordinal);
    columnSelect.Add(dtExport.Columns["Address"].Ordinal);
    columnSelect.Add(dtExport.Columns["City"].Ordinal);
    columnSelect.Add(dtExport.Columns["State"].Ordinal);
    columnSelect.Add(dtExport.Columns["Zip"].Ordinal);

    int[] ColList = columnSelect.ToArray();

    GridViewExportUtil.ExportDetails(dtExport, 
                                     ColList,
                                     GridViewExportUtil.ExportFormat.Excel,
                                     string.Format("{0}_{1}-{2}-{3}{4}",
                                     "SearchResults",
                                     DateTime.Now.Month, 
                                     DateTime.Now.Day,
                                     DateTime.Now.Year, 
                                     ".xls"));
    } 
```

当您更改 ColumnName 时，即使您再次从 Session 获得一个新的 DataTable，它是否仍然存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T15:40:40.313

我猜该值是通过引用，当您更改业务列名称时，它也会在会话中更改。我会试试这个：

```
DataTable dtExport = (Session["dtSearchResults"] as DataTable).Copy(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T15:40:56.430

你没有得到一个新的 DataTable 你得到的是你最初生成的那个。您对其所做的任何更改都将留待后续使用。

在这种情况下，我会在导出后将该列重命名为其原始名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T15:44:44.753

这是一个糟糕的解决方案，但是......添加

```
dtExport.Columns["Licensee"].ColumnName = "Business"; 
```

在您的方法结束时恢复初始状态。并添加一些错误/存在检查。

# java - Java Web 服务框架

> ID：428514
> 
> 赞同：2
> 
> 时间：2009-01-09T15:35:43.833
> 
> 标签：java, web-services

这是我第一次接触 Web 服务。我必须用 Java 开发 Web 服务，它应该具有良好的 WS-* 标准，应该是松散耦合、可扩展、高度安全、快速响应时间。我知道我必须考虑权衡。我检查了一些框架，如 Axis2、CXF、Spring WS。请分享您对这些框架和其他框架的经验和看法，这将有助于我决定去哪一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T15:36:57.030

我是 Spring 用户，所以我使用 Spring WS 1.5.5。非常好，尤其是使用注释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T16:56:13.267

我还建议看一下[JAX-WS 2.0](http://jcp.org/en/jsr/detail?id=224)。它也很容易使用，只需很少的配置和注释。Mark Hansen 的[书](https://rads.stackoverflow.com/amzn/click/com/0130449687)很好地解释了使用 jax-ws 的 SOA。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T15:50:23.353

我发现axis2有点麻烦（在“axis2问题”上尝试谷歌）幸运的是我的组织决定使用REST方法而不是WS-*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-10T15:01:31.047

[Metro](https://metro.java.net/)是支持各种 WS-* 规范的 JAX-WS 参考实现。我觉得它很容易理解和使用。它提供与 Microsoft .NET WCF 堆栈的互操作性以及与 Spring、Netbeans、Maven2 和 ant 的集成。

[Glassfish](https://glassfish.dev.java.net/)完全支持 Metro ，两者都可以与最新的[Glassfish v3 prelude一起轻松安装（Sun](https://glassfish.dev.java.net/downloads/v3-prelude.html)[提供](http://www.sun.com/software/products/glassfishv3_prelude/support.xml)商业支持）。

Metro 的主页引用了Apache WS Wiki 上的[Web 服务堆栈比较](http://wiki.apache.org/ws/StackComparison)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T16:38:46.543

我个人喜欢 CXF，因为它很容易设置并且性能很好。我也同意“LiorH”并且不喜欢 Axis2。但是，我能找到的唯一一篇供您进行比较的文章是这篇文章。

[http://www.ibm.com/developerworks/java/library/j-jws14/index.html](http://www.ibm.com/developerworks/java/library/j-jws14/index.html)

祝你好运

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T18:29:18.937

因为您在要求中提到了可伸缩性和性能，所以我假设将涉及一些应用程序服务器。在这种情况下，您应该使用与应用程序服务器捆绑在一起的 WebServices 框架，以避免应用程序服务器的 WebServices 框架与您选择的框架（ClassCastExceptions、MethodNotFound 等）之间的不兼容问题。

# asp.net - ASP.NET 在 Excel 中输出费用报告

> ID：428529
> 
> 赞同：0
> 
> 时间：2009-01-09T15:38:52.547
> 
> 标签：asp.net, excel, reporting

在我现在正在进行的这个项目中，最新的功能请求之一是输出费用信息，该信息存储在费用报告中，与他们已经用于所有费用报告的 Excel 工作表相匹配。

我很好奇是否有一种方法可以让我使用这个 Excel 工作表（所有布局都已经完成），只需填写我们系统跟踪的部分，然后将其作为 .xls 文件提供给用户，而无需执行 Excel 自动化或任何其他需要在服务器上安装 Excel 的方法。

注：开发环境为 ASP.NET 2.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T15:58:05.473

我很确定您可以使用 OleDB 打开 excel 文件（使用模板）

**示例 1**

```
string ConnectionString=@"Provider=Microsoft.Jet.OLEDB.4.0;
                    Data Source=C:\Test Projects\Excel example\Excel - reading an excel file\ReadThis.xls;
                    Extended Properties=Excel 5.0";

//Create the connection
 System.Data.OleDb.OleDbConnection ExcelConnection = new System.Data.OleDb.OleDbConnection(ConnectionString); 
```

[链接到第 1 条](http://www.gidforums.com/t-17370.html)

**示例 2**

```
string filename = @"C:\testdata.xls";

string connectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" +

"Data Source=" + filename + ";" +

"Extended Properties=Excel 8.0;";

OleDbConnection objConn = new OleDbConnection(connectionString);

objConn.Open();

OleDbCommand ObjCommand = new OleDbCommand("SELECT * FROM [Sheet1$]", objConn);

OleDbDataAdapter objAdp = new OleDbDataAdapter();

objAdp.SelectCommand = ObjCommand;

DataSet myDataSet = new DataSet();

objAdp.Fill(myDataSet);

DataTable dataTable = myDataSet.Tables["Sheet1$"]; 
```

[链接到第 2 条](http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/f2b56086-b5c6-4749-8b80-59f37ef08980/)

打开连接后，您应该可以随意读写它！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T15:57:43.540

你可以试试 Spire.XLS ( [http://www.e-iceblue.com/xls/xlsintro.htm](http://www.e-iceblue.com/xls/xlsintro.htm) )

它不是免费的，但可以很好地阅读和创建 XLS 文档，而无需在服务器上安装 Excel。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T16:07:35.203

我所做的其中一种方法是使用 Office XML 生成文档。由于您有文档需要采用的特定格式，因此事情可能会有点困难，但我过去所做的事情是将需要在报告上显示的数据导出到 XML 文件（保存在磁盘或内存中），然后应用 XSL 转换将内容转换为 Excel 可以加载的正确格式的文档。作为参考，这里有一些链接供您参考：

*   [Office 开发人员门户中的 XML](http://msdn.microsoft.com/en-us/office/aa905545.aspx)
*   [使用 XSL 将 XML 转换为 Excel 电子表格](http://aspalliance.com/471)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T15:42:24.383

试试[Aspose.Cells](http://www.aspose.com/categories/file-format-components/aspose.cells-for-.net-and-java/default.aspx) - 它非常适合这个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T15:53:15.937

Telerik RAD Grid for Asp.NetAJAX 有很好的 Excel 导出功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T16:31:15.657

另外两个解决方案是：

*   使用 OpenOffice（他们有一种不加载/显示 UI 的模式）
*   使用[FileHelpers](http://filehelpers.sourceforge.net/)库（您可以读取/写入数据到 excel 文件）

我必须说我对它们中的任何一个都没有经验......但它们听起来像是 Chris 提到的 JET.OLEDB 提供程序和通过 Xsl 的 Xml-to-Excel （我过去都使用过）之外的可靠替代品和罗布。

只是想在您的路上帮助您并提及一些替代方案（我不希望得到太多积分:)）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T17:31:12.883

虽然这不会处理您现有的电子表格，但生成 Excel 文件的一种非常简单且技术含量低的方法是创建一个具有正确内容类型的 html 文件并使用 .xls 扩展名。当 Excel（在客户端）打开文件时，它被视为本机电子表格。

例子：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="application/vnd.ms-excel" />
        <title></title>
    </head>
    <body>
        <table>
            <tr>
                <td><b>Forename</b></td>
                <td><b>Gender</b></td>
            </tr>
            <tr>
                <td>Simon</td>
                <td>Male</td>
            </tr>
            <tr>
                <td>Katy</td>
                <td>Female</td>
            </tr>
        </table>
    </body>
</html> 
```

警告：当然，您不会在真实文件中包含所有缩进和间距！我正在使用 Excel 2003。

这种技术的另一个小好处是这些文件的生成效率很高。

Downsides: I've not found a way to turn html into multiple Worksheets, or to do anything particularly technical.

# wcf - How? Deploying WCF App on server without Framework 3.0 installed

> ID：428541
> 
> 赞同：1
> 
> 时间：2009-01-09T15:41:14.620
> 
> 标签：wcf

If I just want to run the new style web services on, say a Windows 2000, IIS 5 machine with .NET 2.0 installed, but .NET 3.0 not installed, can I do it by just adding the System.ServiceModel.dll to my bin?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T15:54:55.090

I doubt this would work. System.ServiceModel resides in the GAC. It also has dependencies on a few other 3.0 assemblies such as Microsoft.Transactions.Bridge, System.IdentityModel and so on. Who knows what other non-obvious stuff it may also depend on in say the registry.

FW 3.0 is also not designed for use on Windows 2000, you could try and install but whether it would work correctly is another question (See the requirements section in: [http://msdn.microsoft.com/en-us/library/aa480198.aspx](http://msdn.microsoft.com/en-us/library/aa480198.aspx)). If you were successful but something broke further down the road then the install would be unsupported by MS.

Best bet would be to save yourself a world of pain and install FW 3.0 on a compatible environment (XP SP2/Windows 2003-SP1 or above) and target that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T15:45:07.013

This *may* work, but I would always advocate installing the appropriate framework version for your application. That way you will know that what you are doing* is supported/supportable

*At least on the deployment side - code is another matter.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T16:12:17.223

Whether it will work or not is irrelevant. It is certainly not smart. Even if it works, there may be a scenario that is only hit one of x number of times that requires the 3.0 framework. It would be very hard to debug this, and completely irreproducible on your dev box.

# objective-c - Objective-C中是否有类似于LINQ的东西？

> ID：428542
> 
> 赞同：21
> 
> 时间：2009-01-09T15:41:14.620
> 
> 标签：objective-c, database

我想知道是否有可能（以及如何）在 Objective-C 中提供一个类，例如：

```
Person.Select(@"Name").OrderAsc(@"Name").Where(@"Id").EqualTo(1).And(@"Id").NotEqualTo(2).Load<Array> 
```

这对于我正在做的项目可能非常方便。

我喜欢 Django 和 SubSonic 中的这种编码方式。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-15T21:59:58.973

我为 Objective C 创建了我自己的 Linq 风格的 API，它[可以在 github 上找到](https://github.com/ColinEberhardt/LinqToObjectiveC)。您的具体示例如下所示：

```
NSArray* results = [[[people where:^BOOL(id person) {
                                return [person id] == 1 && [person id] != 2;
                             }]
                             select:^id(id person) {
                                return [person name];
                             }]
                             sort]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T19:48:38.800

简短的回答是，Objective-C 中没有与 Linq 等效的东西，但您可以根据自己的喜好在包装类中混合使用 SQLite、NSPredicate 和 CoreData 调用来伪造它。您可能会对[核心数据指南](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreData/index.html#/)、[谓词指南](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Predicates/AdditionalChapters/Introduction.html)和[此示例代码](http://developer.apple.com/samplecode/CoreRecipes/index.html#//apple_ref/doc/uid/DTS10003664)感兴趣。

从上述谓词指南：

```
NSFetchRequest *request = [[[NSFetchRequest alloc] init] autorelease];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Employee"
        inManagedObjectContext:managedObjectContext];
[request setEntity:entity];
// assume salaryLimit defined as an NSNumber variable
NSPredicate *predicate = [NSPredicate predicateWithFormat:
        @"salary > %@", salaryLimit];
[request setPredicate:predicate];
NSError *error = nil;
NSArray *array = [managedObjectContext executeFetchRequest:request error:&error]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-09T16:13:07.377

有一篇文章比较了 Windows 和 Cocoa 的做法。Cocoa 使用 Key Paths 和 NSPredicate....

[可可是我的女朋友](http://www.cimgf.com/2008/08/24/cocoa-tutorial-c-linq-or-cocoa-key-paths-and-nspredicate/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-09T18:30:08.647

我认为具体到你的例子，这将是 Cocoa 中的等价物：

```
NSArray *people = /* array of people objects */

NSPredicate *pred = [NSPredicate predicateWithFormat:@"Id = 1 AND Id != 2"];
NSSortDescriptor *byName = [[NSSortDescriptor alloc] initWithKey:@"Name" ascending:YES];
NSArray *descriptors = [NSArray arrayWithObject:[byName autorelease]];

NSArray *matches = [people filteredArrayUsingPredicate:pred];
NSArray *sortedMatches = [matches sortedArrayUsingDescriptors:descriptors];

NSArray *justNames = [sortedMatches valueForKey:@"Name"]; 
```

它比 LINQ 示例更冗长，我的一些行可以合并，但在我看来，这更容易解析。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-15T18:32:13.503

我的项目**LINQ4Obj-C**将 LINQ 标准查询运算符移植到 Objective-C。

你可以在[github](https://github.com/michalkonturek/LINQ4Obj-C)和它的[文档](http://cocoadocs.org/docsets/LINQ4Obj-C/1.2.0/)上找到它。这个库也可以通过[CococaPods 获得](http://cocoapods.org/?q=LINQ)。

该项目的源代码可在标准 MIT 许可下获得。

您的示例如下所示：

```
id results = [[[people linq_where:^BOOL(id person) {
    return ([person ID] == 1);
}] linq_select:^id(id person) {
    return [person name];
}] linq_orderByAscending]; 
```

**注意**我删除了第二个条件（ID！= 2），因为它没有意义。

目前该库为集合类提供扩展方法（类别），但将来我还将扩展其功能以`NSManagedObjectContext`提供对 Core Data 的直接查询访问。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-03-20T08:37:07.290

查看以下存储库：[https ://github.com/ziminji/objective-c-sql-query-builder](https://github.com/ziminji/objective-c-sql-query-builder)

这些类提供了一组方便的方法，可用于为 Sqlite 快速构建格式良好的 SQL 查询。它们使用起来非常简单，而且相对简单，因为它们遵循基本的 SQL 语法。

# email - 将 HTML 表单放入电子邮件中是否不切实际？

> ID：428543
> 
> 赞同：10
> 
> 时间：2009-01-09T15:41:44.820
> 
> 标签：email, forms, webforms, client, survey

我有几个客户问过这个问题，但我从来没有得到或给出令人满意的答案。**您可以（实际上）将工作表单放入 HTML 电子邮件吗？**

我的理解是你可以，但不能保证电子邮件客户端会正确处理它，所以这种方法只适用于你有机会测试的个别收件人，而不是使用不同的人的庞大邮件列表电子邮件客户。但我的理解来自许多对这个问题耸耸肩的开发者朋友，并且我发现没有任何权威可以给出明确的答案。

堆栈溢出是怎么想的？例如，当客户要求您这样做时，最好的答案是什么，该客户希望数百人填写一份调查表？

（不要只回答“在网站上提供表格的链接”。这是显而易见的答案。我想具体知道是否对电子邮件中的表格达成共识。）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-01-09T15:50:04.320

**1\. 电子邮件中的 HTML 被一些人认为是一种缺陷**

它几乎从不工作，当它工作时，它不能正常工作。

我最近遇到了一个案例，其中一封相当冗长的 html 电子邮件，虽然编写得很好并且工作得很好，但被 GMail 切成两半并过早修剪（由于长度），这有点破坏了设计。

我也遇到过 HTML 格式不正确的情况，以至于我的收件箱中出现了电子邮件，就好像它真的是一封空白电子邮件一样。

**2\. 我不信任电子邮件中的表格**

主要出于安全原因，一些客户端可能会拦截表单操作，而发布操作不会去任何地方（特别是在他们有物理电子邮件客户端的情况下，打开 Web 浏览器*并*通过它发布数据，这相当复杂）。

你最好在一个你可以控制的网站上拥有一个表单，人们不会有任何令人讨厌的惊喜（特别是如果你需要 javascript 来执行表单，许多电子邮件客户端不会忍受）

也许，您可以输入一个表单，但为了理智起见，尽可能向后兼容，以便使用*Pine*或*Mutt*等基于文本的浏览器的人仍然可以阅读它，*并*获得指向工作表单的链接不需要客户端魔法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-09T15:58:51.277

简单的答案是否定的，你不能。试着告诉你的客户这样的事情：

*几乎没有任何电子邮件客户端允许在电子邮件中使用 HTML 表单，并且一些垃圾邮件系统专门阻止和删除包含表单的电子邮件。这是出于安全考虑。很有可能在发送的带有表单的电子邮件中，甚至没有五分之一会到达收件箱中的收件人。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T15:46:48.087

是的，我已经看到这样做了（例如，来自 LiveJournal 的电子邮件就是这样做的）。不过，正如您所提到的，这不是您应该依赖的工作。但是，只需将 HTML 表单设置为要发布到的完整 URL 的操作应该可以在任何受支持的地方工作。

它适用于我使用过的大多数基于 Web 的电子邮件系统，但我不知道有多少独立客户端会处理它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T15:46:45.230

你是对的 - 任何重要的电子邮件客户端都不太可能很好地处理这个问题。让纯 HTML 在电子邮件客户端中始终如一地工作已经够难的了，更不用说像表单这样的“高级”功能了。我向您保证，如果您将其发送给具有各种电子邮件客户端的受众，至少 80% 的人会说“您的表单不起作用”。

如果您不确定，请注册六个免费电子邮件帐户，再加上一个您可以通过 imap 访问的帐户。将带有简单表单的电子邮件发送到所有帐户，并通过 3 个不同的客户端（例如，Thunderbird、Outlook 和 Eudora）查看 imap。看看它是否有效，并告诉我们。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-09T15:48:01.767

我只想*提供*一个指向调查/表单捕获站点的链接。

你遇到的问题是——

一种。不是每个人都接受 HTML 电子邮件

湾。你将如何处理验证？即使表单确实从邮件客户端提交到目标服务器，您也需要在服务器上处理验证。这有可能在“我在这里开始表格，现在我在这里......什么给了？”中混淆了人们的地狱。一种方式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-09T15:47:36.447

如果不能保证客户妥善处理它，我会说这是不切实际的。您是否真的希望将邮件发送到收件人将执行某些操作的地方，然后它可能已经完成，也可能没有实际完成？

我也会觉得这最烦人。

# c++ - 无法让 hudson 解析 JUnit 测试输出 XML

> ID：428553
> 
> 赞同：5
> 
> 时间：2009-01-09T15:44:46.297
> 
> 标签：c++, junit, hudson, googletest

**编辑**：这个问题已由谷歌在 gtest 1.4.0 中修复；[有关更多信息，请参阅原始错误报告](http://code.google.com/p/googletest/issues/detail?id=114)。

我最近为我的 C++ 测试框架切换到 gtest，我目前无法使用它的一个重要功能是能够生成 JUnit 样式的 XML 测试报告，然后可以由我们的 hudson 构建服务器读取。

gtest 测试套件生成的 XML 输出看起来都是合法的：

```
<?xml version="1.0" encoding="UTF-8"?>
<testsuite tests="370" failures="0" disabled="0" errors="0" time="45.61" name="AllTests">
    <testsuite name="application" tests="7" failures="0" disabled="0" errors="0" time="8.953">
        <testcase name="zero_tasks_on_bootup" status="run" time="0" classname="application" />
...etc.
    </testsuite>
</testsuite> 
```

我还尝试将 JUnitReport 任务添加到我的 ant 构建脚本中，该脚本运行良好，并像这样生成 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<testsuite tests="370" failures="0" disabled="0" errors="0" time="45.61" name="AllTests">
    <testsuite name="application" tests="7" failures="0" disabled="0" errors="0" time="8.953">
        <testcase name="zero_tasks_on_bootup" status="run" time="0" classname="application" />
    ...etc.
    </testsuite>
 </testsuite> 
```

问题是，每当我告诉 ant 发布 JUnit 测试结果，然后将其指向原始测试结果 XML 或 ant JUnitReport 任务中生成的编译结果时，hudson 总是抱怨在那里找不到测试结果。

我不是 java 人，所以我不知道这里发生了什么，也找不到 JUnit XML 应该是什么样子的示例。有人可以帮我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T15:51:04.583

这是我的做法：

```
 <target name="junit" depends="compile-tests" description="run all unit tests">
      <mkdir dir="${reports}"/>
      <junit haltonfailure="false">
         <jvmarg value="-Xms128m"/>
         <jvmarg value="-Xmx128m"/>
         <classpath>
            <path refid="project.classpath"/>
         </classpath>
         <formatter type="xml"/>
         <batchtest fork="yes" todir="${reports}">
            <fileset dir="${test}/classes">
                <include name="**/*Test*.class"/>
            </fileset>
         </batchtest>
      </junit>
  </target>

  <target name="generate-reports" depends="junit" description="create JUnit test HTML reports">
      <mkdir dir="${reports}"/>
      <junitreport todir="${reports}">
          <fileset dir="${reports}">
              <include name="TEST-*.xml"/>
          </fileset>
          <report format="frames" todir="${reports}"/>
      </junitreport>
  </target> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-10T02:08:52.220

**编辑**：谷歌测试已经修复了这个问题，它包含在 gtest 1.4.0 版本中。 [有关更多信息，请参阅原始错误报告](http://code.google.com/p/googletest/issues/detail?id=114)。

呸! 我终于找到了这个问题的原因——这是因为 gtest 为所有测试结果生成了一个巨大的 XML 文件，而 hudson 期望每个班级有一份 XML 测试报告。我编写[了一个 perl 脚本作为解决此问题的方法](http://www.teragon.org/stuff/SO/gtest-hudson.pl)。要使用它，您可以在 ant xml 脚本中创建一个目标，如下所示：

```
<target name="runtests">
  <exec executable="wherever/${ant.project.name}Test" failonerror="false" dir="tests">
    <arg value="--gtest_output=xml:${build.dir}\reports\${ant.project.name}.xml"/>
  </exec>
  <!-- Workaround for broken gtest output -->
  <mkdir dir="${build.dir}/reports/output"/>
  <exec executable="perl" failonerror="false" dir="tests">
  <arg value="gtest-hudson.pl"/>
    <arg value="${build.dir}/reports/${ant.project.name}.xml"/>
    <arg value="${build.dir}/reports/output"/>
  </exec>
</target> 
```

出于某种原因，gtest 也不喜欢从 ant 传递给它的错误样式的斜线，所以我只为 windows 制作了我的 exec，因为我的 hudson 在 windows 服务器上运行。显然，对于 unix，更改为 '/'。

我还在[gtest 页面上为此提交了一个问题](http://code.google.com/p/googletest/issues/detail?id=114)，也在[hudson 的问题跟踪器](https://hudson.dev.java.net/issues/show_bug.cgi?id=3007)上提交了一个问题，所以希望两个团队中的一个能够解决这个问题，因为我没有足够的时间来做一个给自己打补丁....虽然如果这在不久的将来没有得到解决，我可能不得不这样做。;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-14T18:16:14.850

我几乎可以肯定这不是解析 XML 的问题，而是查找 XML 文件的问题。如果您在 Hudson 配置中使用相对路径，请确保您清楚它是相对于哪个目录（我似乎记得它在某些情况下并不明显）。

至于 JUnit XML 文件应该是什么样子的示例，祝你好运。它没有在任何地方精确指定。不同的工具有不同的方言。也就是说，哈德森在识别所有这些方面做得很好。我相信是 JUnitReport 的开发人员首先引入了 XML 格式，所以如果您使用它，那将与您将获得的一样规范。

# apache-flex - 在运行时将 JPG 转换为类

> ID：428559
> 
> 赞同：1
> 
> 时间：2009-01-09T15:46:24.140
> 
> 标签：apache-flex, actionscript-3

Flex API 中的一些方法，例如[CursorManager.setCursor(cursorClass:Class, priority:int = 2, xOffset:Number = 0, yOffset:Number = 0)](http://livedocs.adobe.com/flex/3/langref/mx/managers/CursorManager.html#setCursor())采用 Class 类型的参数作为图形。此示例允许您将 JPG/BMP/SWF 指定为光标，但我知道从图像文件中获取类的唯一方法是在 MXML 中使用 [Embed]，在我的情况下，这需要在 AS3 中动态完成。

一定有标准解决方案吗？这些 Flex 类首先采用 Class 是否有充分的理由？

编辑：我实际上并不关心模拟 [Embed] 标签的行为。我只想能够使用 CursorManager 的图像文件路径。我敢肯定我在其他情况下也看到过这种做法，而且 Flex 人肯定认为这些东西不会总是硬编码的吗？

EDIT2：为了进一步简化问题，我理想地寻找的是一种方法来执行以下操作：`CursorManager.setCursor(someHandyFunction("myCursor.png"))` 如果这甚至可能，问题是`someHandyFunction`应该做什么？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-10T00:03:47.210

这个看起来很有趣，所以我决定试一试。这就是我能做的——可能有一个更优雅的解决方案，但我已经对此进行了测试，它确实有效（[这是一个工作示例](http://roaming.turbonerd.com/classref.html)），所以我想我会把它踢回给你进一步修补如果你喜欢。

首先，您需要一个扩展 DisplayObject 的自定义类——我只是选择了位图，因为我知道您正在尝试加载和使用 JPG 图像：

```
package
{
    import flash.display.Bitmap;
    import mx.core.Application;

    public class MyLoadedImageClass extends Bitmap
    {       
        public function MyLoadedImageClass()
        {
            // ClassRef is simply the name of my Flex app
            super(ClassRef(Application.application).bitmapData);
        }
    }
} 
```

...然后是应用程序代码，它只是加载内容然后调用 setCursor()：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" initialize="init()">

    <mx:Script>
        <![CDATA[

            import mx.managers.CursorManager;
            import mx.managers.CursorManagerPriority;

            // This public member holds a reference to your loaded bitmapData,
            // which MyLoadedImageClass's constructor will use when instantiated
            // by the framework during CursorManager.setCursor()
            public var bitmapData:BitmapData;

            // Here we load the image
            private function init():void
            {
                var urlLoader:URLLoader = new URLLoader();
                var urlRequest:URLRequest = new URLRequest("http://roaming.turbonerd.com/m/20090104094515.jpg");

                urlLoader.addEventListener(Event.COMPLETE, urlLoader_complete);
                urlLoader.dataFormat = URLLoaderDataFormat.BINARY;
                urlLoader.load(urlRequest); 
            }

            // Here we translate the bytes into a Bitmap
            private function urlLoader_complete(event:Event):void
            {
                var bytes:ByteArray = URLLoader(event.target).data;

                var loader:Loader = new Loader();
                loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loader_complete);
                loader.loadBytes(bytes); 
            }

            // And finally, we save off the bytes and set the cursor 
            private function loader_complete(event:Event):void
            {
                bitmapData = Bitmap(event.target.content).bitmapData;
                CursorManager.setCursor(MyLoadedImageClass, CursorManagerPriority.HIGH);
            }

        ]]>
    </mx:Script>

</mx:Application> 
```

希望评论能足够详细地描述事情。希望能帮助到你！（感谢您的挑战！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-15T18:44:04.463

查看 Ben Stucki 的这个示例类。我已经广泛使用它从远程 JPG/GIF/PNG 动态创建类实例。

[http://blog.benstucki.net/?p=42](http://blog.benstucki.net/?p=42)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-13T14:54:20.830

我最近与`CursorManager`（试图让他在运行时加载 png 游标）进行斗争，结果，我在我的实验室[博客](http://chargedweb.com/labs/2010/03/12/flex-cursormanager-vs-jloa/)上发布了一个实用程序类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T16:58:57.160

据我所知，目前无法在运行时使用 as3 在 flash vm 中创建类。**从理论上讲**，您可以通过将 swf-data 写入字节数组并加载它，在运行时使用您需要的类创建一个 swf，我不建议您尝试，除非您遇到很多令人费解并且不介意很多挫折;-)

如果您详细说明您的要求，则可能会找到另一种解决方案。

顺便说一句：如果您不介意包含服务器组件的解决方案：您可以让您的服务器编译包含正确类的新 swf 并加载它们。有多种方法可以让 flex 编译器根据要求编译内容。

# windows - 从 XP/Vista 迁移到 Windows 7 时，程序员应该知道什么？

> ID：428564
> 
> 赞同：7
> 
> 时间：2009-01-09T15:48:00.503
> 
> 标签：windows, language-agnostic, windows-7, operating-system

我没有使用过 Windows Vista。我知道许多 API 在 Vista 中已更改/弃用，因此需要修复或配置程序以在 XP 兼容模式下执行。

那么，Windows 程序员在从 XP/Vista 迁移到 Windows 7 时应该知道什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T16:28:49.500

对于初学者，如果历史教会了我们什么——不要依赖 Beta 或 CTP，尤其是早期的（我相信 Windows 7 的发布日期仍然是 2010 年的某个时间）。

话虽如此，我相信 Windows 7 共享与 Windows 2008 Server 和 Windows Vista SP 1 内核相似的内核以及相同（或相似）的安全模型。这可能同样适用于驱动程序要求，但现在说还为时过早。

在这个早期阶段，您所能做的就是查看您的应用程序是否在 Windows 7 测试版下部署、安装和运行。如果您已经更新了您的应用程序以在 Windows Vista 强制执行的限制范围内运行，那么我敢打赌您可能是安全的。

如果您要从早期版本的 Windows（XP 或更早版本）移植应用程序，那么我会首先针对 Vista 支持（处理/支持安全模型等）。

运气好的话，跳到 Windows 7 可能只需要稍作改动，但实际上你必须在更接近 2010 年的时候查看 Windows 7。

在这个阶段，我们可能会在 2010 年看到 .Net Framework 4.0，因此如果您的应用程序是 .Net 应用程序，您可能会想升级到 4.0 以利用新的语言功能。

**编辑：**我几乎忘记了这一点——（1）[关于为 Windows 7 开发的白皮书！](http://code.msdn.microsoft.com/Release/ProjectReleases.aspx?ProjectName=Win7DeveloperGuide&ReleaseId=1702) 如果你对这些变化感到好奇，这对它有一种非常深入的感觉。

一些特定的兴趣点/新功能包括：

*   “Windows 7 设计为在与 Windows Vista 相同的硬件上运行，并与适用于 Windows Vista 的应用程序和设备驱动程序兼容。”*   “使用 Windows BranchCache，客户端可以从他们自己分支中已经下载数据的其他客户端检索数据，而不必通过远程服务器检索数据。”*   “在 Sensor 平台上构建的 Windows 位置 API 是 Windows 7 的一项新功能，使应用程序开发人员能够访问用户的物理位置信息。”

这是 (2)[主页](http://code.msdn.microsoft.com/Win7DeveloperGuide)。

[(1) [http://code.msdn.microsoft.com/Release/ProjectReleases.aspx?ProjectName=Win7DeveloperGuide&ReleaseId=1702](http://code.msdn.microsoft.com/Release/ProjectReleases.aspx?ProjectName=Win7DeveloperGuide&ReleaseId=1702) ]
[(2) [http://code.msdn.microsoft.com/Win7DeveloperGuide](http://code.msdn.microsoft.com/Win7DeveloperGuide) ]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T15:55:19.427

它认为现在确定还为时过早，但我相信从 Vista 到 Windows 7 的 API 只会有微小的变化。我希望如果您的程序在 Vista 中运行良好，您将无需担心。

Windows 7 中更有可能有新的 API 可供您使用，但在 Vista 中可用的 API 很少，现在不再可用。

XP 到 Vista 是 API 的主要飞跃，就像 98 到 NT 一样，但 NT 和 Windows 2000 之间的变化要少得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T16:00:23.333

根据[here](http://www.howtogeek.com/howto/the-geek-blog/what-you-should-expect-from-the-windows-7-beta/)，有一个用于新的右键单击任务栏功能的新API。例如，访问最近的文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T16:04:49.937

我认为在为 Windows 7 编写程序时，我首先要看的是多点触控，它可以帮助提高可用性，并且可能有助于将程序移植到 iPhone 等手机上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T16:26:32.110

在 10 月份的 PDC 上，他们举行了一系列关于 Windows 7 编程的会议。我认为一个很好的一般概念会议是[Windows 7：Windows 7 的设计原则](http://channel9.msdn.com/pdc2008/PC22/)。[您可以在此处查看](https://sessions.microsoftpdc.com/public/timeline.aspx)Windows 7 相关会话的完整列表

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-15T05:03:44.183

让我从 XP 到 Vista 的一件事是在注册表中设置一些东西现在需要更高的权限级别，即我的应用程序使用我多年来一直使用的方法设置了一些文件扩展名/程序关联。这不适用于普通用户（至少不是全局用户）并且需要超级用户/管理员权限，我还没有找到至少允许当前用户使用它的方法。

此外，旧的 WinHelp 已经消失（好）。

“文档和设置”文件夹已移至“用户”（很好，从一开始就应该这样！），但 CSIDL 代码（您应该使用它来指定特殊文件夹）是相同的。

带有 scipting 的 WebFolders 在 XP 中已被弃用，它们现在可能已经消失了。

图标文件的新功能/格式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T16:28:55.317

由于 Windows 7 仍处于 Beta 阶段，因此您无法 100% 确定稳定版本的功能。但是，Microsoft 为早期的 Windows 7 开发人员发布了一个文档非常完善的网站。[在这里](http://code.msdn.microsoft.com/Win7DeveloperGuide)，您可以找到许多与新 API 相关的内容，以及来自开发团队的一些示例和新闻。您必须考虑的另一个重要事实是 .NET Framework 的存在。它的目标之一是在下面的系统上为您提供一个抽象层，因此通常您可以在 Windows XP 或 Windows Vista 上运行 .NET 应用程序，而不必弄乱低级别的 API。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-09T16:32:35.887

除非您是驱动程序开发人员，否则请使用独立于平台的图形工具包库，您无需担心实现东西。我个人更喜欢 Qt 或 Java 之类的东西，但我想 .Net API 也将保持兼容。

# language-design - 更聪明的编译器、语言和框架会让程序员变得更笨吗？

> ID：428571
> 
> 赞同：11
> 
> 时间：2009-01-09T15:49:32.403
> 
> 标签：language-design

我们拥有的越来越先进的编译器、语言和框架要么自动执行任务，要么向我们隐藏某些复杂性，它们最终会让我们成为更笨的程序员吗？

[Jim C](https://stackoverflow.com/users/21706/jim-c)给出了以下计算器的类比：

> 最近有人用纸和铅笔求平方根吗？我们使用计算器或简单地调用我们最喜欢的编程语言中的函数。我们当中有多少人知道计算器的功能甚至功能？

那么，为什么我们不都告诉我们的孩子忘记学习数学，这就是我们拥有计算器的目的呢？这不会天生就让我们的孩子变得更笨吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-01-09T15:53:40.693

它们不会让优秀的程序员变得更笨，而是让他们更有效率；但它们使愚蠢的人能够编程并认为他们是伟大的程序员。

澄清：我对愚蠢没有一个准确的定义。从愚蠢我的意思是一般的事情是那些不应该真正成为程序员或应该尝试学习重要事物的人。我见过很多人不能真正编码，只是从这里和那里复制东西。软件质量评估不是一件容易的事。他们最终构建了一个以某种方式工作的糟糕软件（由于存在好的工具），因此他们不会失去工作，并且他们认为自己是优秀的程序员，因此永远不应该尝试学习任何东西。相信我，我在每个优秀的开发人员身上都看到过一件事：“他们从不停止学习，而且他们不会只学习完成工作所需的一段代码。”

**这并不意味着 IDE 不好。我爱他们，并认为他们应该尽可能地发展。**

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-01-09T15:54:45.153

我认为他们允许更愚蠢的程序员，他们不会让更愚蠢的程序员。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-01-09T15:53:02.410

农民是否因为使用自动化机器种植、收割和维护农作物而变得更笨？

好的任务自动化只会让程序员更高效，而不是更笨。

> 那么，为什么我们不都告诉我们的孩子忘记学习数学，这就是我们拥有计算器的目的呢？这不会天生就让我们的孩子变得更笨吗？

计算器是一种允许您执行某些任务的工具。当然，您可以进行复杂的数学和多变量集成，但如果不学习数学，您怎么知道您需要在给定时间执行该任务？

编程和 SDK 也是如此，您可以使用预定义的代码投入大量的花里胡哨，但是当您需要编写一些东西来解决问题时，世界上所有的工具和自动化都无法帮助您那里（无论如何，人工智能还没有那么先进；）。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-01-09T15:55:47.647

平均*而言*，是的。:)

它们不会让**我们**成为更愚蠢的程序员。他们所做的是允许有更多愚蠢的程序员（我想这意味着，平均而言，我们更愚蠢。）拥有更好的工具意味着经验不足且对 CS 概念理解模糊的人仍然可以编写出那些最终工作并做一些有用的事情。这在用汇编语言编写时是不可能的，但在用 VB 编写时却是这样。（当然，当经验不足的人编写大型应用程序时，最终发生 WTF 式灾难的可能性更大，这些应用程序最终在其糟糕的架构的重压下崩溃。）

不可否认，“哑巴”在这里是一个煽动性的词。仅仅因为某人知道的少并不会使他们变得愚蠢，这只意味着他们经验不足。但重点是明白的。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-01-09T15:57:15.880

我认为**更快的机器**让程序员变得更糟......现在大多数程序员花很少的时间编写最佳代码。编译器无法将坏代码优化为好代码。

快速的机器意味着糟糕的程序员可以摆脱糟糕的代码，因为没有人知道它的糟糕之处。在过去，代码必须经过处理和改进，才能运行得足够快，才能以可接受的方式实际工作。

托尼

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-01-09T16:02:24.013

[Visual Studio 是否会腐蚀大脑？](http://www.charlespetzold.com/etc/DoesVisualStudioRotTheMind.html) ——查尔斯·佩佐德

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-01-09T15:53:15.373

不，

智能编译器让聪明的程序员专注于真正重要的事情，比如设计好的软件。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-01-09T16:07:21.743

```
s/make/allow/ 
```

少一点油嘴滑舌：它们是工具。 *工具*不会制造任何东西，它们不会让任何工匠变得更好或更糟。强大的工具也不会——它们只是充当杠杆，放大特定工匠的能力（或缺乏能力）。

一些编程工具具有降低进入门槛的效果，如果不是软件工程专业，那么至少可以让应用程序运行。缩短生产工作（或“工作”）应用程序所需的思考量是双向的：称职的专家可以从琐碎的工作中解脱出来，可能会做出伟大的事情，但笨拙的新手有时会将糟糕的代码投入生产，而他们从来没有如果没有“智能”工具，就会开始工作。后一种效应在塑造 BASIC、VB、PHP 的声誉以及最近大量用于 Web 的 MVC 快速开发框架方面的影响可能比前者更大——实际上对这些工具的总体概念也产生了更大的影响。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-01-09T16:57:20.753

更*智能*意味着*自动化*。做重复性工作不会让任何人变得更聪明，所以答案是**否定**的。

让我通过使用计算器示例进行扩展。用笔和纸计算平方根的技术只是一个可以学习的过程。知道这个过程并不会让你*更聪明*，它只是让你在没有计算器的情况下计算平方根。

现在，如果你*发现*了一种计算平方根的算法，*那*你就聪明了。

我们的编程工具也是如此。为你做内存管理的语言不会让你变笨，也不会自己做内存管理会让你更聪明。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-01-09T15:55:37.053

它让不太熟练的程序员更容易进入该领域，仅此而已。它不会让一个好的程序员变笨。如果他们忽略了可能提高效率的工具，他们就会变得愚蠢。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-01-09T15:56:06.600

计算机是增强设备。所以愚蠢的变得更愚蠢，聪明的变得更聪明。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-01-09T15:57:26.053

只有你允许他们这样做。

如果你学习了一些困难和挑剔的东西（比如我的 Tandy 102 笔记本电脑），即使使用更智能的工具，你仍然会以这种模式思考。

当然，依靠这些工具来完成工作很容易，为此，我很感激。

例如，您不会教人们如何使用台锯和钻床进行木工 - 您从手锯和螺旋钻或小型手钻开始。这样，当您转向电动工具时，您就不会做一些愚蠢的事情（tm）。

依赖工具很棒——但知道如何在没有工具的情况下做到这一点也很重要。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-01-09T15:54:31.737

不，但它确实可以生成更好的程序和代码。

我想说的是高级语言的技能是不同的，你需要更多地考虑抽象，有更多的 API 需要担心，人们期望他们的软件质量更高。由于上述原因，程序员面临着不同的挑战，而工具正在跟上这些挑战。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-01-09T16:10:03.453

它们不一定会让程序员变得更笨，但它们可以让程序员变得懒惰。我发现自己这样做有时只是匆匆浏览一些代码并依靠编译器来帮助我找到所有错误，而不是一开始就做对了。

顺便说一句，这不是推荐的做事方式。通常需要更长的时间。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-01-09T16:38:41.477

好的，我拥有的前两台计算机是我自己建造的。那时这很聪明，我不太确定现在是否可以很好地利用我的时间。我在 80 年代初混合使用汇编程序和 BASIC 进行编程，当时又很聪明，现在不那么聪明了。

我在这里得到的是上下文已经改变，在计算中，我们不得不用知识的深度来换取知识的广度，而这需要进行必要的“简化”。为了支持“当今计算”所涵盖的大量复杂性和广度的应用程序，我们还被迫在更高的抽象级别上工作。一方面，我们看到领域应用专家使用高度抽象的工具来提供非常好的解决方案，另一方面，我们看到计算技术/编程专家制作出能够推动整个计算行业向前发展的精湛代码。称任何一方为哑巴都是煽动性的，而且可能是辩论中唯一的哑巴。

在这种情况下轻描淡写只是让更多的观众使用现代计算机所具有的有效工具。这是一件好事，铁杆程序员不应该受到威胁，毕竟这是他们的宝贝。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-01-09T16:41:31.143

平均而言，是的，它们使程序员变得更笨。但这只是因为它们使不如我们聪明的人更容易接受编程，从而降低了平均“聪明度”。

:-)

一个谴责现代开发环境便利性的聪明程序员可能并不那么聪明。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-01-09T16:57:51.017

笨蛋？不必要。如前所述，拥有更智能的工具可以让开发人员专注于更重要的事情，例如使应用程序正常运行。我自己职业生涯中的一个相关轶事：

我不是一个熟练的数学家。我在微积分前不及格（好吧，当然，这是因为我从未做过功课），甚至对一些非常基本的物理公式（例如计算摩擦力）有点生疏。这是因为我完全没有练习，这仅仅是因为我从不使用它。

以导数为例。如果你让我找到函数的导数，我会使用我的 TI-89，因为我不知道如何做到这一点。然而——我认为这更重要——我知道如何使用它。我知道它在哪里有用，为什么要使用它等等。点积是另一个例子。我知道如何使用它来计算 3D 空间中表面的镜面反射，但我不知道如何手动计算它，因为我从来不需要。

我不会因此而称自己为笨蛋。也许是出于实践，但同样有能力。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-01-09T17:56:20.773

不，它类似于类固醇（和其他增强体能的药物）——它们让一个伟大的运动员变得更好，但即使我吃了一整间药店的药物，它们也不能让像我这样的人在 10 岁以下跑 100 米。所以，上帝的 IDE、语言或框架可以让你成为一个更好的程序员，但如果你只是依靠它来完成工作，那你就有麻烦了。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2009-01-09T23:41:49.407

我认为没有，[但有很多人](http://charlespetzold.com/etc/DoesVisualStudioRotTheMind.html)（非常聪明的人）有不同的想法

我真的推荐这个讲座，这是一个非常有趣的观点和非常好的文章

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-01-09T15:55:01.050

我不这么认为。更复杂的工具只会让我们的大脑专注于更有趣的问题。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-01-09T15:55:01.703

对于我们这些过去已经学会执行上述任务或了解上述复杂性的人来说，我相信它只会让我们更有效率。我们可以更自由地担心其他/更重要的事情。我们可能倾向于要么忘记“当时有多难”，要么抱怨今天的新程序员多么幸运。

对于我们这些刚刚起步并且还没有了解这些细节的人，我相信它只会让我们成为一个不同的品种。不是更笨，只是我们从不同的角度看待不同的问题。

然而，它确实降低了入门门槛，从而使大众更容易接受编程。这是好事还是坏事，值得商榷。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2009-01-09T15:58:08.047

是的，但没关系。最近有人用纸和铅笔求平方根吗？我们使用计算器或简单地调用我们最喜欢的编程语言中的函数。我们当中有多少人知道计算器的功能甚至功能？

你应该知道事情是如何工作的，你想成为更好的程序员或其他任何事情，你应该知道的越多。但一天只有这么几个小时。

更好的工具让我们变得更好。权衡是我们对过程几乎失去控制。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-01-09T15:59:05.097

**在某种方式**

例如，我不知道也不关心如何编写运算符重载，因为我有为我制作它们的工具。我什至不必记住 P/invoke 是如何工作的，因为我拥有的工具会自动创建一个 C++ dll 项目，并`[DllImport]`在我的 C# 项目中创建一个。我不必为我的项目编写自动更新程序，因为 ClickOnce 几乎就是它。（而且我不知道它是如何“在引擎盖下”工作的。）

所以，是的，我不那么聪明，因为我对 C++ 程序员知道的许多低级东西一无所知。但我仍然认为我是赢家，因为我可以做得更多。我可以将更多时间花在演示、质量控制以及客户真正想要的那些功能上。此外，深入挖掘 .NET 框架确实需要一些学习，因此需要权衡取舍。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-01-09T16:01:14.187

我不会说他们一定会让程序员变得更笨，但我想说的是。对于在当今时代开始开发的人们，不要完全了解幕后正在为我们做的事情有多少。如今，平台中内置了如此多的库，以至于从今天开始的人们根本不知道这一切是如何在某一时刻手工完成的。

但是，我会说，如果没有 Intellisense，我将永远无法回过头来编写一行代码 :)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-01-09T16:34:35.010

我认为有必要拥有更智能的工具，以便我们可以从复杂性中抽象出层次。但我认为我们必须能够改变对那些抽象层的访问。我认为程序员会更有效率，但很容易失去许多基本概念的概念。这是一种权衡……好的程序员将是那些继续理解编程基础的人。其他人将是“复制粘贴”和乐高玩家。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2009-01-09T16:48:42.970

相反，更智能的编译器意味着您与计算机的斗争更少，并且可以更多地考虑您是如何尝试做某事的。

如果您正在为汇编程序而苦苦挣扎，那么您几乎永远不会为匿名方法而烦恼。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2009-01-09T19:29:54.547

我会说不。

更智能的编程系统（我认为更高级别的抽象不是自动修复代码的工具）IMNSHO 实际上更难使用。我想出的类比是它们充当长杠杆。你在短端*非常*努力地推动它，移动它很小的量，就会发生巨大的变化。

弄清楚需要做什么更难，但当你最终完成时，也更难把它搞砸。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2009-01-10T00:04:03.887

更智能的语言、编译器和框架使编程成为可能。我的意思是，如果我们仍然局限于使用汇编语言，你能想象编程的状态吗？哎呀，从头开始。如果我们仅限于 C 或 C++，你能想象编程的状态吗？

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2009-01-10T00:34:20.453

编译器、语言和框架的改进使程序员更有效率，前提是他们有良好的学术背景或良好的语义理解。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2014-12-18T07:18:30.803

我知道这是一个旧线程，但仍然想在这里发表我的意见......

它们确实让我们变得更笨，你们中的大多数人已经知道如何以体面的方式编程。为什么？因为你来自一个几乎没有使用框架的时代。

在教育系统中，越来越多的框架被用在课堂上，……而在没有使用框架的课堂上，不鼓励开始编程。学习所有这些代码，而在您的脑海中，您知道有一个工具可以为您完成这一切。您知道在现场/工作场所您必须使用框架才能快速运行。那么为什么要花这么多时间学习代码。

SO：在短期内，对于所有已经了解语言的人来说，不……它不会让你变得更笨

从长远来看....你会看到低等级的程序员变得更好，而优秀的程序员在等级上变得更差。

记住我的话！

# .net - 在部署环境之间管理复杂的 Web.Config 文件

> ID：428573
> 
> 赞同：53
> 
> 时间：2009-01-09T15:50:19.593
> 
> 标签：.net, asp.net, visual-studio, wcf

有谁知道`Web.Config`在不同的构建/部署环境之间管理文件的任何好的工具/实用程序？

例如，我有一个 WCF 项目，在开发中我不想启用 SSL，但我确实希望在生产中启用它。我想要不同的日志记录设置、不同的数据库连接字符串、不同的错误处理、不同的文件路径……甚至是一些不同的 Unity 框架绑定（为单元测试连接模拟而不是用于部署的真实对象）。

维护单独的副本`Web.Config`很痛苦，因为添加新的 Web 服务意味着编辑多个文件并使它们保持同步。

我还注意到，如果您`Web.Config`手动操作太多，如果您尝试使用“添加项目”向导来为 WCF 添加新的 Web 服务，Visual Studio 将会窒息，因为它必须修改 Web .config 添加端点，并且无法再解析它。所以我必须小心不要使现有的 Web.Config 无效。

我还考虑过只使用一些正则表达式进行替换，并`Web.Config`在预构建命令中构建一个新的。这似乎是迄今为止最好的选择......

还有其他想法吗？看起来这应该是一个非常普遍的问题，因为`Web.Config`在开发和生产部署之间可能永远不会相同。

* * *

***更新：***

我决定编写一个快速控制台应用程序，它将获取给定目录中的所有 xml 文件并将它们合并为一个，并且仅包含基于名称的某些文件。

所以我可以在一个目录中制作：

**WebConfig_All**

```
<configuration>
  <configSections>
    ...
  </configSections>
  <system.web>
    ...
  </system.web>
</configuration> 
```

**connectionStrings_Debug**

```
<configuration>
  <connectionStrings>
    <add name="connstr" connectionString="...dev..." />
  </connectionStrings>
</configuration> 
```

**connectionStrings_Release**

```
<configuration>
  <connectionStrings>
    <add name="connstr" connectionString="...prod..." />
  </connectionStrings>
</configuration> 
```

然后运行我的命令行工具，并传入配置（Debug、Release、custom...），它将合并所有以`_All" or`_<configuration>`结尾的文件。

所以现在我将 80% 的 Web.Config 放在一个`WebConfig_All`文件中，并将 20% 的自定义内容放在每个构建配置的单独文件中。然后，我可以在 VisualStudio、NAnt 或任何我想要的地方运行我的命令行工具作为预构建任务......

我还使我的 XML 合并逻辑足以处理以下内容：

```
<x>
  <y a="1">
    <z a="1"/>
  </y>
</x> 
```

合并

```
<x>
  <y a="1">
    <z a="2"/>
  </y>
  <y a="2"/>
</x> 
```

结果是：

```
<x>
  <y a="1">
    <z a="1"/>
    <z a="2"/>
  </y>
  <y a="2"/>
</x> 
```

到目前为止看起来不错... :)

* * *

*跟进：*

这个话题现在有点老了，所以我想指出 VisualStudio 2010 有一个内置的 web.config 转换功能：http: [//msdn.microsoft.com/en-us/vstudio/Video/ff801895](http://msdn.microsoft.com/en-us/vstudio/Video/ff801895)

当然，在典型的微软方式中，任何功能只实现了 50%，它只适用于使用 web 部署的 web 项目。有一个插件可以在其他项目中启用转换，位于此处：[http ://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx](http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx)

您还可以使用[BuildMaster 之](http://inedo.com/buildmaster/overview)类的工具来管理配置文件（以及构建、测试、数据库脚本等...）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-01-12T10:52:47.990

我们将所有区域特定设置拆分为他们自己的配置文件。在 Web 应用程序的根目录下，我们创建一个配置文件夹并将区域特定设置放在那里。因此，任何位于 config 根目录下的文件都会被拾取。

我们的 web.config 看起来像：

```
.
.
.
<appSettings configSource="config\appSettings.config"/>
<nlog configSource="config\nlog.config"/>
<applicationSettings>
    <MyApp.UI.Properties.Settings configSource="config\Settings.APGUI.config"/>
    <MyApp.BusinessServices.Properties.Settings configSource="config\Settings.Business.config"/>
    <MyApp.Auditing.Properties.Settings configSource="config\Settings.Auditing.config"/>
</applicationSettings>
.
.
. 
```

因此，如果我们正在部署到发布区域，构建工具将仅具有将配置根目录中的文件替换为相应区域文件夹中的文件的操作。文件结构类似于：

添加：这是源代码控制结构的外观，部署的应用程序将只有配置目录，没有子文件夹或课程

```
\Root
   web.config    
   \Config    
       appsettings.config    
       services.config    
       logging.config    
       \release    
          appsettings.config    
          services.config    
          logging.config    
       \debug
          appsettings.config    
          services.config    
          logging.config 
```

它非常干净，任何自动构建工具（复制/替换文件）都支持它。好的副作用是开发人员可以创建不同的风格并将它们置于源代码控制之下，而不会影响“真实”配置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-09T16:04:26.023

您可以使用构建事件来管理您的网络配置。[Hanselman](http://www.hanselman.com/blog/ManagingMultipleConfigurationFileEnvironmentsWithPreBuildEvents.aspx)有一篇关于它的好文章。

基本上，您在解决方案中拥有所有不同的 web.config，然后创建（一些）新的构建类型。根据您运行的构建类型，web.config 将复制到引用的一个！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-23T23:57:00.047

您想要 MSBuildCommunityTasks 中的 XmlMassUpdate 任务（执行您尝试使用 xml 控制台应用程序执行的操作）

[http://msbuildtasks.tigris.org/](http://msbuildtasks.tigris.org/)

像这样使用它

```
 <XmlMassUpdate Condition=" '@(ConfigTemplateFile)'!='' And '@(ConfigSubstitutionsFile)'!=''"
    ContentFile="@(ConfigTemplateFile)"
    SubstitutionsFile="@(ConfigSubstitutionsFile)"
    MergedFile="@(ConfigFile)"
    ContentRoot="/configuration"
    SubstitutionsRoot="/configuration/substitutions/$(Configuration)"/> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-09T16:08:33.410

我使用[Scott Hanselman 解释的方法](http://www.hanselman.com/blog/ManagingMultipleConfigurationFileEnvironmentsWithPreBuildEvents.aspx)（他解释得比我能复制的要好得多，所以请点击链接:)）它对我来说效果很好......

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-02-22T15:17:33.813

我使用这个工具：[xmlpreprocess](http://xmlpreprocess.sourceforge.net/usersguide.html)

我们为部署脚本合并的每个环境维护单独的“属性”文件。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-09T16:04:49.533

我喜欢使用构建任务来[自动](http://automaticchainsaw.blogspot.com/2008/02/automate-config-changes-for-different.html)更改所需环境的配置文件。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-22T15:24:36.463

我们在配置文件中使用标签，这些标签在构建时被替换以反映预期的部署环境。我受到[Lavablast 博客的启发](http://blog.lavablast.com/post/2008/02/Manage-your-ASPNET-Webconfig-Files-using-NAnt.aspx)

很高兴只有一个模板配置文件需要管理。

缺点是您不能轻松拥有自定义“部分”。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-04-11T07:07:25.747

老问题，但由于它在 Google 搜索中的排名很高，我认为添加[web.config 转换语法](https://msdn.microsoft.com/en-us/library/dd465326(v=vs.110).aspx)是个好主意，它[自 VS2010 以来就可用](https://weblogs.asp.net/srkirkland/common-web-config-transformations-with-visual-studio-2010)。使用此工具，您可以为不同的构建提供不同的 web.config 文件（调试/发布）

以下是关于如何拥有两个连接字符串的简短摘要 - 一个用于开发（调试模式），一个用于生产（发布模式）：

1- 在 web.config 文件中设置您的开发连接字符串。应该看起来像这样：

```
 <connectionStrings>
    <add name="myConnectionString"  connectionString="Data Source=TestDBServer; (etc...)" />
  </connectionStrings> 
```

2- 展开您的 web.config 文件并打开 web.release.config

[![网络配置](https://i.stack.imgur.com/u8G2h.png)](https://i.stack.imgur.com/u8G2h.png)

3-使用该[`Replace`功能](https://msdn.microsoft.com/en-us/library/dd465326(v=vs.110).aspx#Anchor_1)将连接字符串替换为您想要用于生产的连接字符串。在此示例中，您可以使用`xdt:Locator="Match(name)"`属性将其与连接字符串的名称 (myConnectionString) 匹配：

```
<connectionStrings>
    <add name="myConnectionString"  xdt:Transform="Replace" xdt:Locator="Match(name)" 
         connectionString="Data Source=ProdDBServer; (etc...)" />
  </connectionStrings> 
```

4- 通过右键单击 web.release.config 文件并选择**Preview Transform**来预览将在发布构建期间使用的 web.config 文件的转换。

[![在此处输入图像描述](https://i.stack.imgur.com/E6dvK.png)](https://i.stack.imgur.com/E6dvK.png)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-09T15:59:47.327

正如你提到的，我传统上使用了多个 web.configs。这可能会很痛苦，但可以通过 BeyoneComapare2 或 KDIff 等文件比较工具缓解...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-12T15:50:19.917

烦恼：

我在第一次更新中提到了我的小 cmd 行应用程序来合并 XML 文档......好吧，我只使用 XmlDocument，并最终将其 .Save() 到 FileStream。

不幸的是，节点实际上并没有任何特定的顺序，显然，.NET*要求*<configSections> 元素是文档的第一个子元素。

我认为所有这些花哨的工具都应该让编程生活*更轻松*？

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-24T12:12:25.707

我最喜欢的两种处理方法是：

A. 保留目标机器上的设置* - 例如，在 Azure 中，您可以设置将覆盖 web.config 中的值的应用程序设置和连接字符串。（* - 如果您的基础架构配置是动态的，则为目标机器定义）。

B. 使构建/部署工具（TeamCity、Octopus Deploy 等、VS Team Services）注入环境特定值作为构建和/或部署的一部分。现代工具支持敏感设置的加密。

# java - 有哪些好的 Java Web 开发工具（全面）

> ID：428594
> 
> 赞同：4
> 
> 时间：2009-01-09T15:55:07.850
> 
> 标签：java

对于 Web 开发，有哪些标准/好的 Java 工具。这适用于发展的所有方面。

例如，IDE（Eclipse、RAD、Intellij）很重要，但还有什么。

蚂蚁是个好东西。Cygwin，可能是 Linux 操作系统。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-09T16:07:47.873

我使用的另一个用于 Java Web 开发的好 IDE 是[Netbeans](http://www.netbeans.org/)。具有许多有用的功能版本控制、调试器、分析器、api 访问等......您可以在 IDE 内进行编辑、构建、测试和运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T16:16:21.583

在尝试编写一段代码之前，请检查它是否在某个库中实现。常见编程任务解决方案的重要来源可以在[Apache Commons 库](http://commons.apache.org)中找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T16:05:00.263

IDE 是您将在其中工作 90% 的工具。因此，IDE 的选择非常重要（是的，选择 IntelliJ ;)）今天，它们集成了许多插件/功能，例如 Ant 或 Maven2 工具。

我使用 Oracle SQL 开发人员（或最终使用 Toad）来浏览我的数据库。对于 Web 开发，您可以使用 Firebug for Firefox 来调试 Javascript。您还可以使用[Selenium](http://seleniumhq.org/)测试您的 Web 应用程序。

其他工具： 应用服务器的[GlassFish](http://glassfish.java.net/)。 用于质量控制的 [声纳。](http://sonar.codehaus.org/)[Hudson](http://hudson-ci.org/)持续集成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T16:13:03.213

Spring 是一个非常强大的框架。我们只使用控制器和视图方面，但它有很多功能。

Hibernate 总是很好用。我相信 Spring 也将与 Hibernate 一起工作并使一些事情变得更容易。

我通常在 Tomcat 上托管应用程序。

最新版本的 Netbeans 具有很多功能，并且与 Tomcat 和其他应用程序容器很好地集成在一起。

Aqua 数据工作室非常适合使用数据库。

我们使用 luntbuild 来构建应用程序。

DWR 非常适合 AJAX。

还要考虑这样的主题：

[https://stackoverflow.com/questions/913/what-javascript-library-would-you-choose-for-a-new-project-and-why](https://stackoverflow.com/questions/913/what-javascript-library-would-you-choose-for-a-new-project-and-why)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T16:36:51.463

[JUnit](http://www.junit.org/) , [Cobertura](http://cobertura.sourceforge.net/) ,[哈德逊](http://hudson-ci.org/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T16:01:34.500

我推荐[Oracle JDeveloper](http://www.oracle.com/technology/products/jdev/index.html)。它涵盖了 Java 和 Web 开发的所有方面，从简单的网站到使用 ADF 和其他框架的高度复杂的网站。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T16:12:18.113

IDE 是最重要的工具，不同的 IDE 的侧重点有所不同：

IDEA 和 Eclipse 是我所说的以代码为中心的 IDE，它们并没有广泛关注向导和设计器——尽管它们都有一些设计器。Netbeans 是 Visual Studio for java 的直接等价物；专注于视觉设计师向导和更多指导的开发人员支持。

任你选 ;) （我是 IDEA 用户）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-09T16:15:18.653

您可以拥有的用于 Java Web 开发的最佳工具（恕我直言）是访问符合[JPDA](http://java.sun.com/javase/technologies/core/toolsapis/jpda/)的远程调试器。可以在[Eclipse Web Tool Platform](http://www.eclipse.org/webtools/)插件中找到示例实现。

为什么这么好？好吧，如果你的控制器有问题，你不能在你的单元测试中出现并且你只能在实时运行的系统上重新创建，你可以将你的正常调试器（例如 eclipse 调试器）附加到实时网页并像对待任何其他 Java 代码一样对待它。断点让你心满意足。

（我假设您对实际工具感兴趣，而不仅仅是 Spring、Struts、Freemarker 等库）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-10T11:54:15.077

我们正在使用[TeamCity](http://www.jetbrains.com/teamcity/)。这是构建项目的非常有用的工具。不仅支持 Java，还支持 .NET 项目。它是免费的。

为什么没有人提到 VSC？:) 我们正在使用 Subversion，但 Git 在更多情况下更方便。它为使用分支提供了更舒适的工具。

Maven也是不错的工具，但是太复杂了。特别是如果您已经在使用 ant。在这种情况下，我建议您查看[Ivy](http://ant.apache.org/ivy/)。Ivy 可以为您管理依赖项，例如 Maven，并使用 Maven 存储库。

[VisualVM](https://visualvm.dev.java.net/)用于监控 JVM 实例的绝佳工具。它具有用于 mbean 探索、线程转储分析、内存转储分析等的插件。

作为单元测试框架，我推荐[TestNG与](http://testng.org/doc/)[hamcrest](http://code.google.com/p/hamcrest/)结合使用。TestNG 比 JUnit 更灵活，并且具有多种优势，例如支持并行测试。您可以轻松地并行运行测试。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-01-10T13:06:07.207

多年来，我一直对 NetBeans 感到非常满意。也使用过 Eclipse，但我决定坚持使用一个，而 NetBeans 是我的最爱。

不知道其他人在说 Netbeans 更具视觉效果时在说什么。除了用于 Swing 应用程序的 Matisse，我认为有一个 JavaFaces 可视化的东西，但我不使用面孔。

几年前，我开始在记事本中编写 Java Web 应用程序（是的，我知道），发现在 NetBeans 中编写代码要快得多。您下载它并准备好在安装后立即开始构建网站。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-10T13:41:48.040

对于我参与的 webapp，我的基础架构如下所示：

*   IntelliJ Idea，我现在才用了一段时间，但我想任何中途的现代 IDE 都可以做到，只要学习一个并学好，所以阅读 NetBeans、JDeveloper、Eclipse 但我从未使用过其中一个更长时间
*   Teamcity，持续集成（我喜欢延迟签入和远程运行，再也不会签入损坏的分支！）
*   Maven 和 Artifactory，我们软件堆栈的依赖管理
*   Tomcat（或 Glassfish）
*   SVN 作为 SCM

在我使用的 lib 方面

*   春天
*   休眠
*   JSF + 特立尼达
*   春季网络流
*   JUnit
*   健康
*   EasyMock

我想对于开发，您还应该考虑诸如 HSQL 之类的东西，不要让自己依赖大型数据库，并且您不能在路上运行/测试您的东西;-)。

这里开始的困难部分是在 Maven 中正确设置所有内容。这不是一项只需 5 分钟的任务，但我认为这是值得的。我还没有玩过 Ivy，但也许这也是一个很好的解决方案。我不想再费力地浏览 ant 脚本了，如果您的项目增长，这些脚本很容易失控。

正如您对 Java 和现代 IDE 所期望的那样，一切都可以在 Windows/Linux/Mac 中运行。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-01-11T20:44:50.840

FindBugs 是一个很好的实用程序，可以改进您的 Java 代码，无论您是在进行 Web 开发还是其他方面：

[http://findbugs.sourceforge.net/](http://findbugs.sourceforge.net/)

# .net - .NET 的 OpenSSO 还是 ESOE？

> ID：428599
> 
> 赞同：3
> 
> 时间：2009-01-09T15:55:55.150
> 
> 标签：.net, authentication, single-sign-on

.NET 平台是否存在诸如 OpenSSO ( [https://opensso.dev.java.net/](https://opensso.dev.java.net/) ) 或 ESOE ( [http://esoeproject.org/ ) 之类的东西？](http://esoeproject.org/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-23T10:27:34.157

我发现了一个实现 SAML 2.0 标准的丹麦开源 .NET 库 (OIOSAML)。它是作为丹麦政府的一个项目开发的，作为他们通用的 SSO 解决方案。

下载： http: [//www.softwareborsen.dk/projekter/softwarecenter/brugerstyring/oiosaml.net/](http://www.softwareborsen.dk/projekter/softwarecenter/brugerstyring/oiosaml.net/)

**更新：**现在您还可以选择使用我的同事和我在[Jubii.dk项目中成功使用的](http://konto.jubii.dk/)[Windows Identity Foundation](http://msdn.microsoft.com/da-dk/evalcenter/dd440951(en-us).aspx)。事实上，我会**推荐**WIF 而不是 OIOSAML。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-10T01:03:14.983

您真的需要 SSO 服务器本身在 .net 上运行吗？[OpenSSO](http://opensso.org/)作为 Java Web 应用程序运行，但它可以针对 AD 对用户进行身份验证，执行 Windows 桌面 SSO（又名 SPNEGO，又名 Kerberos）从 Windows 登录对用户进行身份验证，无需额外的用户名/密码步骤，通过 WS-Federation 与 ADFS 互操作并通过策略代理保护在 IIS 上运行的 Web 应用程序。

因此，您可以连接所有 Microsoft 的东西，外加对外部合作伙伴的 SAML 2.0 单点登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T16:05:26.253

请记住，如果您使用的是 .Net，那么您可能在使用“Microsoft Stack”的 Microsoft Shop 中。这意味着几乎全面使用 Active Directory 进行身份验证，包括任何单点登录系统。

如果您还需要与您自己域之外的实体（其他企业）交谈，您通常会在您的 AD 域中与合作伙伴系统建立信任关系（直接与他们的 AD 系统或通过 LDAP），以便在那里登录本地所需的权限，反之亦然。

如果您需要支持本地托管但由第三方提供的软件系统，您会选择支持 AD 或 LDAP 的系统进行身份验证。

# c# - 如何在 WPF 中正确处理（希望在 XAML 中）链接资源？

> ID：428609
> 
> 赞同：2
> 
> 时间：2009-01-09T15:58:37.297
> 
> 标签：c#, wpf

我正在尝试做一些相当简单的事情：在应用程序的主窗口中添加一个简单的图标。这可以很容易地完成。图标本身放置在 Resources 目录中，其构建操作设置为 Resource。窗口的 XAML 代码包含对此图标的引用：

```
Icon="Resources/wiser.ico" 
```

这工作得很好。然而，我真正想做的是从另一个地方获取这个图标，一个在我们应用程序的多个版本之间共享的图像目录（我们支持大约 5 个平台，具体取决于您的计数方式）。在我们过去的 WinForms 中，这是通过将资源添加为现有项目并从对话框中选择“添加为链接”来完成的。但是，这会导致上述图标出现问题。

首先，它没有出现在组件中的正确位置。Reflector 在应用程序的基本路径中找到它，而不是在它应该在的 Resources 目录中。图标的非链接版本确实出现在资源目录中。

其次，对路径 (Icon="wiser.ico") 的修复允许编译但让设计器抛出错误，使设计器本身无用。

我怀疑这只是一个错误（或两个，取决于你如何计算）。有没有一种简单的方法来解决这个问题？请注意，我曾希望支持从我们的源代码控制系统进行链接，但 SVN 似乎不支持，最终结果可能会让人难以维护。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-13T20:29:52.257

对于共享资源，我可以想到两件事：

1）您可以将您的资源放在一个单独的程序集中，您可以在您的应用程序之间共享。

使用此语法从程序集中获取 ico 或其他项目（png、xaml 等）：

```
Icon="/CommonResources;component/app.ico" 
```

或使用包语法

```
Icon="pack://application:,,,/CommonResources;component/app.ico" 
```

2) 您可以使用 pack 应用程序语法将 ico 加载到程序集的相对文件路径中。

```
Icon="pack://siteoforigin:,,,/app.ico" 
```

# .net - .NET 中的“闭包”是什么？

> ID：428617
> 
> 赞同：205
> 
> 时间：2009-01-09T16:01:26.980
> 
> 标签：.net, closures

什么是*闭包*？我们在 .NET 中有它们吗？

如果它们确实存在于 .NET 中，您能否提供一个代码片段（最好是 C#）来解释它？

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2009-01-09T16:04:44.463

我有[一篇关于这个主题的文章](http://csharpindepth.com/Articles/Chapter5/Closures.aspx)。（它有很多例子。）

本质上，闭包是一段可以在以后执行的代码块，但它维护了它最初创建的环境——即它仍然可以使用创建它的方法的局部变量等，即使在那之后方法已完成执行。

闭包的一般特性是在 C# 中通过匿名方法和 lambda 表达式实现的。

这是一个使用匿名方法的示例：

```
using System;

class Test
{
    static void Main()
    {
        Action action = CreateAction();
        action();
        action();
    }

    static Action CreateAction()
    {
        int counter = 0;
        return delegate
        {
            // Yes, it could be done in one statement; 
            // but it is clearer like this.
            counter++;
            Console.WriteLine("counter={0}", counter);
        };
    }
} 
```

输出：

```
counter=1
counter=2 
```

在这里我们可以看到 CreateAction 返回的动作仍然可以访问计数器变量，并且确实可以递增它，即使 CreateAction 本身已经完成。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2011-08-22T03:47:08.063

如果您有兴趣了解 C# 如何实现 Closure，请阅读[“我知道答案（其 42）博客”](http://blogs.msdn.com/b/abhinaba/archive/2005/10/18/482180.aspx)

编译器在后台生成一个类来封装匿名方法和变量j

```
[CompilerGenerated]
private sealed class <>c__DisplayClass2
{
    public <>c__DisplayClass2();
    public void <fillFunc>b__0()
    {
       Console.Write("{0} ", this.j);
    }
    public int j;
} 
```

对于功能：

```
static void fillFunc(int count) {
    for (int i = 0; i < count; i++)
    {
        int j = i;
        funcArr[i] = delegate()
                     {
                         Console.Write("{0} ", j);
                     };
    } 
} 
```

把它变成：

```
private static void fillFunc(int count)
{
    for (int i = 0; i < count; i++)
    {
        Program.<>c__DisplayClass1 class1 = new Program.<>c__DisplayClass1();
        class1.j = i;
        Program.funcArr[i] = new Func(class1.<fillFunc>b__0);
    }
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-01-09T16:04:10.657

闭包是函数值，它保留原始范围内的变量值。C# 可以以匿名委托的形式使用它们。

对于一个非常简单的示例，请使用以下 C# 代码：

```
 delegate int testDel();

    static void Main(string[] args)
    {
        int foo = 4;
        testDel myClosure = delegate()
        {
            return foo;
        };
        int bar = myClosure();

    } 
```

最后，bar 将被设置为 4，并且 myClosure 委托可以被传递以在程序的其他地方使用。

闭包可用于许多有用的事情，例如延迟执行或简化接口 - LINQ 主要使用闭包构建。对于大多数开发人员来说，最直接的方式是向动态创建的控件添加事件处理程序——您可以使用闭包在控件实例化时添加行为，而不是将数据存储在其他地方。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-01-09T16:09:13.003

```
Func<int, int> GetMultiplier(int a)
{
     return delegate(int b) { return a * b; } ;
}
//...
var fn2 = GetMultiplier(2);
var fn3 = GetMultiplier(3);
Console.WriteLine(fn2(2));  //outputs 4
Console.WriteLine(fn2(3));  //outputs 6
Console.WriteLine(fn3(2));  //outputs 6
Console.WriteLine(fn3(3));  //outputs 9 
```

闭包是在创建它的函数之外传递的匿名函数。它维护创建它使用的函数中的任何变量。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-09T16:12:27.333

这是我从 JavaScript 中的类似代码创建的 C# 的人为示例：

```
public delegate T Iterator<T>() where T : class;

public Iterator<T> CreateIterator<T>(IList<T> x) where T : class
{
        var i = 0; 
        return delegate { return (i < x.Count) ? x[i++] : null; };
} 
```

所以，这里有一些代码展示了如何使用上面的代码......

```
var iterator = CreateIterator(new string[3] { "Foo", "Bar", "Baz"});

// So, although CreateIterator() has been called and returned, the variable 
// "i" within CreateIterator() will live on because of a closure created 
// within that method, so that every time the anonymous delegate returned 
// from it is called (by calling iterator()) it's value will increment.

string currentString;    
currentString = iterator(); // currentString is now "Foo"
currentString = iterator(); // currentString is now "Bar"
currentString = iterator(); // currentString is now "Baz"
currentString = iterator(); // currentString is now null 
```

希望这有点帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-01-09T16:09:24.140

闭包是引用自身外部变量的代码块（从堆栈下方的变量），可能稍后调用或执行（例如定义事件或委托时，并且可能在某个不确定的未来时间点被调用） )... 因为代码块引用的外部变量可能超出范围（否则会丢失），它被代码块引用的事实（称为闭包）告诉运行时“保持" 该变量在范围内，直到关闭代码块不再需要它...

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-01-09T16:13:10.950

基本上，闭包是一段代码，您可以将其作为参数传递给函数。C# 支持匿名委托形式的闭包。

这是一个简单的例子：
List.Find 方法可以接受并执行一段代码（闭包）来查找列表项。

```
// Passing a block of code as a function argument
List<int> ints = new List<int> {1, 2, 3};
ints.Find(delegate(int value) { return value == 1; }); 
```

使用 C#3.0 语法，我们可以这样写：

```
ints.Find(value => value == 1); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-08-16T15:26:41.503

闭包是指在另一个函数（或方法）中定义一个函数并且它使用来自*父方法*的变量。这种位于方法中并包装在其中定义的函数中的变量的使用称为*闭包。*

[Mark Seemann 在他的博客文章](http://blog.ploeh.dk/2014/03/10/solid-the-next-step-is-functional/)中有一些有趣的闭包示例，他在 oop 和函数式编程之间进行了并行处理。

并使其更详细

```
var workingDirectory = new DirectoryInfo(Environment.CurrentDirectory);//when this variable
Func<int, string> read = id =>
    {
        var path = Path.Combine(workingDirectory.FullName, id + ".txt");//is used inside this function
        return File.ReadAllText(path);
    };//the entire process is called a closure. 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-06-13T11:06:21.493

如果您编写内联匿名方法 (C#2) 或（最好）Lambda 表达式 (C#3+)，则仍在创建实际方法。如果该代码正在使用外部范围的局部变量 - 您仍然需要以某种方式将该变量传递给该方法。

例如，采用这个 Linq Where 子句（这是一个简单的扩展方法，它传递一个 lambda 表达式）：

```
var i = 0;
var items = new List<string>
{
    "Hello","World"
};   
var filtered = items.Where(x =>
// this is a predicate, i.e. a Func<T, bool> written as a lambda expression
// which is still a method actually being created for you in compile time 
{
    i++;
    return true;
}); 
```

如果要在该 lambda 表达式中使用 i，则必须将其传递给该创建的方法。

那么出现的第一个问题就是：**应该通过值传递还是引用传递？**

通过引用传递（我猜）更可取，因为您可以获得对该变量的读/写访问权限（这就是 C# 所做的；我猜微软的团队权衡了利弊并采用了引用；根据[Jon Skeet 的说法文章](http://csharpindepth.com/Articles/Chapter5/Closures.aspx)，Java 采用了按值）。

但随之而来的另一个问题是：**将 i 分配到哪里？**

它应该实际/自然地分配在堆栈上吗？好吧，如果你在堆栈上分配它并通过引用传递它，那么在某些情况下它会比它自己的堆栈帧长。举个例子：

```
static void Main(string[] args)
{
    Outlive();
    var list = whereItems.ToList();
    Console.ReadLine();
}

static IEnumerable<string> whereItems;

static void Outlive()
{
    var i = 0;
    var items = new List<string>
    {
        "Hello","World"
    };            
    whereItems = items.Where(x =>
    {
        i++;
        Console.WriteLine(i);
        return true;
    });            
} 
```

lambda 表达式（在 Where 子句中）再次创建了一个引用 i 的方法。如果 i 分配在 Outlive 的堆栈上，那么当您枚举 whereItems 时，生成方法中使用的 i 将指向 Outlive 的 i，即指向堆栈中不再可访问的位置。

好的，所以我们需要它在堆上。

因此，C# 编译器为支持这种内联匿名/lambda 所做的是使用所谓的“**闭包**”：它在堆上创建一个名为（[相当糟糕](https://stackoverflow.com/a/16403470/6296435)）的类 DisplayClass，该类具有一个包含 i 的字段，以及实际使用的函数它。

与此等效的东西（您可以看到使用 ILSpy 或 ILDASM 生成的 IL）：

```
class <>c_DisplayClass1
{
    public int i;

    public bool <GetFunc>b__0()
    {
        this.i++;
        Console.WriteLine(i);
        return true;
    }
} 
```

它在本地范围内实例化该类，并用该闭包实例替换与 i 或 lambda 表达式相关的任何代码。所以 - 每当您在定义 i 的“本地范围”代码中使用 i 时，您实际上是在使用该 DisplayClass 实例字段。

因此，如果我要更改 main 方法中的“本地” i ，它实际上会更改 _DisplayClass.i ；

IE

```
var i = 0;
var items = new List<string>
{
    "Hello","World"
};  
var filtered = items.Where(x =>
{
    i++;
    return true;
});
filtered.ToList(); // will enumerate filtered, i = 2
i = 10;            // i will be overwriten with 10
filtered.ToList(); // will enumerate filtered again, i = 12
Console.WriteLine(i); // should print out 12 
```

它将打印出 12，因为“i = 10”进入该显示类字段并在第二次枚举之前对其进行更改。

关于该主题的一个很好的来源是这个[Bart De Smet Pluralsight 模块](https://app.pluralsight.com/player?course=csharp-language-internals&author=bart-desmet&name=csharp-language-internals-m5&clip=4&mode=live)（需要注册）（也忽略他对“提升”一词的错误使用 - 他的意思是（我认为）他的意思是局部变量（即 i）被更改为引用到新的 DisplayClass 字段）。

* * *

在其他新闻中，似乎存在一些误解，即“闭包”与循环有关-据我所知，**“闭包”不是与循环有关的概念**，而是与匿名方法/ lambda 表达式使用局部范围变量有关-尽管有些技巧问题使用循环来演示它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-23T05:49:49.833

出乎意料的是，简而言之，C# 7.0 一书提供了一个简单且更易于理解的答案。

**您应该知道的先决条件**：lambda 表达式可以引用定义它的方法的局部变量和参数（外部变量）。

```
 static void Main()
    {
    int factor = 2;
   //Here factor is the variable that takes part in lambda expression.
    Func<int, int> multiplier = n => n * factor;
    Console.WriteLine (multiplier (3)); // 6
    } 
```

**实部**：由 lambda 表达式引用的外部变量称为捕获变量。捕获变量的 lambda 表达式称为闭包。

**最后一点要注意**：捕获的变量是在实际调用委托时评估的，而不是在捕获变量时：

```
int factor = 2;
Func<int, int> multiplier = n => n * factor;
factor = 10;
Console.WriteLine (multiplier (3)); // 30 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-10-20T07:53:51.800

闭包旨在简化功能性思维，它允许运行时管理状态，为开发人员释放额外的复杂性。闭包是一流的函数，具有绑定在词法环境中的自由变量。在这些流行语背后隐藏着一个简单的概念：闭包是一种更方便的方式，可以让函数访问本地状态并将数据传递到后台操作。它们是特殊函数，隐含绑定到所有引用的非局部变量（也称为自由变量或上值）。此外，闭包允许函数访问一个或多个非局部变量，即使在其直接词法范围之外调用时也是如此，并且此特殊函数的主体可以将这些自由变量作为单个实体传输，并在其封闭范围内定义。更重要的是，

[![在此处输入图像描述](https://i.stack.imgur.com/EXciV.png)](https://i.stack.imgur.com/EXciV.png)

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2009-01-09T16:09:03.547

闭包是在函数中定义的函数，可以访问它的局部变量以及它的父级。

```
public string GetByName(string name)
{
   List<things> theThings = new List<things>();
  return  theThings.Find<things>(t => t.Name == name)[0];
} 
```

所以find方法里面的函数。

```
 t => t.Name == name 
```

可以访问其范围内的变量 t 和其父范围内的变量名。尽管它是由 find 方法作为委托执行的，但从另一个作用域一起执行。

# delphi - 是否有关于如何在 Delphi 中使用异常的视频/屏幕转换

> ID：428623
> 
> 赞同：4
> 
> 时间：2009-01-09T16:04:43.947
> 
> 标签：delphi, video, exception-handling

嗨，有没有关于如何在 Delphi 中使用异常的精彩视频。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-09T16:34:27.040

这是[一篇关于基础知识](http://conferences.codegear.com/article/32156 "乐趣和利润的异常处理")的文章，一个关于[构造函数和析构函数中的异常](http://codegearguru.com/video/030/TSuicide.html)的视频，以及[另一个](http://cc.codegear.com/item/26436)关于[延迟异常处理](http://www.davinciunltd.com/code/delayed-exceptions/)的视频。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-09T18:08:55.677

Jim McKeeth 为 CodeRage III 做了一个名为：“延迟异常处理这是一种更强大的异常处理方式。学习在处理多个对象时防止内存泄漏和简化代码。这是一个利用一些最新 Delphi 的高级课程2009 年的特点。”

请参阅：2008 年 12 月 3 日，星期三，晚上 7:00 - 晚上 8:00 第 1 会议室 [http://conferences.codegear.com/coderage08/sessions](http://conferences.codegear.com/coderage08/sessions)

虽然我已经下载了它，但我还没有机会看到它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-10T02:59:39.040

还有 Jim 的 Coderage 2: [Exceptional Exceptions](http://video.codegear.com/CodeRageIIArchives/Day4/JimMcKeeth_ExceptionalExceptions.zip)
会议 （ping Jim：我没有在你的[网页上](http://www.davinciunltd.com/code/exceptions/)看到链接）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-12T02:33:18.403

我不久前制作了一个： [电影 #30 - 构造函数和析构函数中的异常](http://codegearguru.com/index.php?option=com_content&task=view&id=58&Itemid=27)。

# java - JUnit 和 RMI 应用程序的最佳实践，RMI 注册表

> ID：428627
> 
> 赞同：5
> 
> 时间：2009-01-09T16:04:51.857
> 
> 标签：java, junit, rmi, rmiregistry

我正在寻找为 RMI 客户端应用程序编写一组系统集成测试。我想在 JUnit 3.8.2 中启动 RMI 服务器，然后运行这些测试。有人做过吗？

我在主要的 pojo 中使用这样的东西：

```
    导入 java.rmi.registry.*；

    ……

    //设置
    尝试 {

        java.rmi.registry.LocateRegistry.createRegistry(1099);
        System.out.println("RMI 注册准备就绪。");

        this.StartMyServer();

        // 客户端设置

        我的客户 m = null;
        m = (MyClient) Naming.lookup("//MyHost/MyServer", m);

        // 这里测试

    } 赶上（MyClientException 我）{

        System.out.println("MyClient 跌倒去繁荣");

    } 捕捉（MyServerException 我）{

        System.out.println("MyServer 跌倒去繁荣");

    } 捕捉（异常 e）{

        System.out.println("异常启动 RMI 注册表：");

    }

```

将其转换为 junit 测试的最佳方法是什么，以便注册表仅启动一次并且仅在注册表实际启动时才运行测试？我想避免使用一种测试方法的测试类，其中包含来自 main 的所有测试代码，这是我在来到这里之前发现自己正在做的事情。

另外，在编写测试时我应该注意什么？任何 RMI 测试陷阱？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T16:20:48.313

如果您使用的是 JDK 5 或更高版本，我建议升级到 JUnit 4.4。注释是一个很大的帮助。

我也推荐阅读[这个](http://junit.sourceforge.net/doc/faq/faq.htm#organize_3)。我不明白你为什么要编写一个单独的主类来运行测试。这不是 TestRunner 应该做的吗？

我会在设置中启动注册表并以拆卸方法将其关闭。

# c++ - 将 cout 分配给变量名

> ID：428630
> 
> 赞同：14
> 
> 时间：2009-01-09T16:05:12.590
> 
> 标签：c++, cout, ofstream

在 ANSI C++ 中，如何将 cout 流分配给变量名？我想要做的是，如果用户指定了输出文件名，我将输出发送到那里，否则将其发送到屏幕。所以像：

```
ofstream outFile;
if (outFileRequested) 
    outFile.open("foo.txt", ios::out);
else
    outFile = cout;  // Will not compile because outFile does not have an 
                     // assignment operator

outFile << "whatever" << endl; 
```

我也尝试将其作为宏函数执行：

```
#define OUTPUT outFileRequested?outFile:cout

OUTPUT << "whatever" << endl; 
```

但这也给了我一个编译器错误。

我想我可以为每个输出使用一个 IF-THEN 块，但如果可以的话，我想避免这种情况。有任何想法吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-01-09T16:12:46.303

使用参考。请注意，引用的类型必须是`std::ostream`，而不是`std::ofstream`，因为`std::cout`是`std::ostream`，所以您必须使用最小公分母。

```
std::ofstream realOutFile;

if(outFileRequested)
    realOutFile.open("foo.txt", std::ios::out);

std::ostream & outFile = (outFileRequested ? realOutFile : std::cout); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-09T17:35:41.360

我假设您的程序的行为类似于标准的 unix 工具，当没有给定文件时将写入标准输出，而当给定文件时将写入该文件。您可以重定向`cout`以写入另一个流缓冲区。只要您的重定向有效，写入 cout 的所有内容都会透明地写入您指定的目的地。一旦重定向对象超出范围，原始流被放置并且输出将再次写入屏幕：

```
struct CoutRedirect { 
    std::streambuf * old; 
    CoutRedirect():old(0) {
        // empty
    }

    ~CoutRedirect() {
        if(old != 0) {
            std::cout.rdbuf(old);
        }
    }

    void redirect(std::streambuf * to) {
        old = std::cout.rdbuf(to);
    }
}

int main() {
    std::filebuf file;
    CoutRedirect pipe;
    if(outFileRequested) {
        file.open("foo.txt", std::ios_base::out);
        pipe.redirect(&file);
    }
} 
```

现在，只要管道在 main 中存在，cout 就会被重定向到文件。您可以通过使其不可复制来使其更“准备好生产”，因为它还没有准备好被复制：如果副本超出范围，它将已经恢复原始流。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T16:11:51.827

您可以在此处找到有关如何执行此操作的非常详细的说明： [http ://groups.google.com/group/comp.lang.c++/msg/1d941c0f26ea0d81?pli=1](http://groups.google.com/group/comp.lang.c++/msg/1d941c0f26ea0d81?pli=1)

希望有人会更清楚地写出来，以便堆栈溢出来获得积分......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T16:47:51.007

遵循**Adam Rosenfield**的轨迹，但使用三元和逗号运算符修复了引用初始化问题：

```
bool outFileRequested = false;

std::ofstream realOutFile;
std::ostream & outFile = outFileRequested
    ? realOutFile.open("foo.txt", std::ios::out), realOutFile
    : std::cout;

outFile << "some witty remark"; 
```

（在 VS 中测试）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T16:21:22.087

我认为亚当走在正确的轨道上，但我认为您不能分配引用-您需要改用指针：

```
std::ofstream realOutFile;
std::ostream * poutFile;

if(outFileRequested)
{
    realOutFile.open("foo.txt", std::ios::out);
    poutFile = &realOutFile;
}
else
    poutFile = &std::cout; 
```

然后您可以将引用定义为指针的值，但它不是全局的

```
std::ostream & outFile = *poutFile; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T16:23:54.533

我不确定您是否可以将 cout 分配给 ofstream 类型的变量。cout 是 ostream 类型的对象（而 cin 是 istream 类型），我不确定一个对象是否继承自另一个对象。因此，也许检查文件是否已给出/存在并创建适当的流类型将是一种更好的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-09-10T22:54:22.040

这花了大约两个小时才得到。基本上，我有一个运行测试套件的外部类。我发送了一个委托来运行测试，所以为了访问输出，我需要发送一个输出流。我想我可以为每个测试做一个不同的流。无论如何，我想传入 ofstream 以供以后使用。

```
// Main code to create Test Suite Object
ofstream debugFile("debug.txt");
TestSuiteObject* myTestSuite = new TestSuiteObject(&debugFile);

// Test Suite Object
class TestSuiteObject: public Test::Suite
{
public:
 TestSuiteObject(std::ofstream* debug) : m_debug(*debug)
 {
  m_debug << "some witty remark" << std::endl;
  TEST_ADD(TestSuiteObject::test1);
  TEST_ADD(TestSuiteObject::test2);
  TEST_ADD(TestSuiteObject::test3);

 }

 void test1();
 void test2();
 void test3();

private:
 std::ofstream& m_debug;
}; 
```

# c# - 缓存与会话的优势

> ID：428634
> 
> 赞同：72
> 
> 时间：2009-01-09T16:06:11.837
> 
> 标签：c#, asp.net, session, caching, viewstate

在 Session 和 Cache 中存储数据表有什么区别？有什么优点和缺点？

因此，如果它是一个简单的搜索页面，它在数据表中返回结果并将其绑定到网格视图。如果用户 'a' 搜索和用户 'b' 搜索，最好将其存储在 Session 中，因为每个用户很可能会有不同的结果，还是我仍然可以将他们的每个搜索存储在缓存中，或者这没有意义，因为有只有一个缓存。我想基本上我想说的是缓存会被覆盖。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2009-01-09T16:14:15.677

一个重要的区别是，缓存中的项目可以在指定的时间后过期（将从缓存中删除）。放入会话中的项目将保留在那里，直到会话结束。

当可用内存量变小时，ASP.NET 也可以从缓存中删除项目。

另一个区别：会话状态可以保持在外部（状态服务器、SQL 服务器）并在 Web 应用的多个实例之间共享（用于负载平衡）。缓存不是这种情况。

除了这些差异（正如其他人所指出的）：会话是每个用户/会话，而缓存是每个应用程序。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2009-01-09T16:08:52.580

AFAIK，关键区别在于会话是每个用户，而缓存将用于应用程序范围的项目。

如其他答案所述，您可以将每个用户信息存储在缓存中，前提是您提供密钥（通过会话或 cookie）。然后，您可以更好地控制缓存中的项目过期并设置对它们的依赖关系。因此，如果有问题的 DataTable 会定期更改，那么缓存可能是一个合适的选择。否则，如果是静态会话可能更合适。[Steven Smith 在 dnrtv 上有一个关于缓存的优秀视频，](http://dnrtv.com/default.aspx?showID=85)值得一看。

这真的取决于你想要达到什么目标，你有多少时间。关于如何在应用程序中存储状态，还有一些其他选择需要考虑。根据表的大小，您可以考虑将状态存储在 cookie 中（如果它是敏感信息，则加密）。或者，如果它是应用程序范围的数据，您可以在页面或类上使用静态字段。也有 Application 对象。

**更新**：我认为你必须问自己的关键问题是谁应该看到这些数据。

```
Are they going to access the data frequently? 
```

（不，不要打扰）。

```
Is it going to change? 
```

（不，使用静态字段或应用程序）。

```
Is it acceptable for user a and user b to see the same results? 
```

（不，使用包含用户名和搜索词的键的缓存。）。
（是的，使用搜索词的键使用缓存）。

老实说，如果您的开发进度不远，我会考虑将缓存/状态问题留到以后 - 您甚至可能不需要它。

性能调优的前三个规则是：1\. 测量，2\. 测量更多。3\. 再次测量...

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-12-19T07:09:20.730

另一个重要的区别是，如果执行并发异步 Ajax 请求， **Session State 将被阻塞，这会影响性能**

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-01-09T16:10:53.560

缓存属于Application范围，目的是减少获取一条数据的次数。会话位于用户的会话范围内，目的是提供特定的用户状态。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-01-09T16:12:10.953

好吧，这取决于您如何为 ASP.NET 配置会话。您是将会话存储在数据库中还是在内存中？如果在内存中您是使用单独的服务器还是使用当前的网络服务器进行会话？

根据为您设置的方式，当您使用诸如数据表之类的东西时可能会影响性能，它告诉我您可能正在存储大量数据。

此外，Session 是按用户存储的，如果用户不接受 cookie 并且您已将 ASP.NET 设置为无 cookie 模式，则通过存储在 Session cookie 或 URL 上的 Session 票证按用户检索。您缓存的任何内容都将在应用程序级别进行缓存，并可供所有用户会话使用，这可能是您想要的，也可能不是您想要的。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-01-09T16:12:45.133

会话是每个用户，缓存是应用程序。

缓存中的项目可以并且将根据过期时间（滑动或固定）和 IIS 工作进程的内存限制自动删除。

所以基本上 Cache 中的项目永远不会保证存在，但 Session 会一直留在那里直到会话结束。

按用户存储项目（通过 Session 或创造性地使用 Cache）会导致大量内存使用，应谨慎考虑。

除此之外，如果 IIS 重置工作进程，您可能会丢失缓存和会话。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-01-09T16:14:30.307

看到[这个答案](https://stackoverflow.com/questions/167873/repeated-cookie-query-or-storing-in-viewstate-which-is-the-better-practice#168050)。

除非您使用一些后端提供程序，例如 memcached 或速度，否则会话可能会影响您的应用程序性能。一般来说，你应该避免它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-22T07:55:21.797

据我所知，这完全取决于您的需求。

每当您需要为用户维护状态时，您在使用会话时必须非常小心。默认设置是“InProc”，它使用单个服务器的内存，在基于云的应用程序中效果不佳。这可能适用于那些在多实例网络农场环境中托管应用程序的人。Windows Azure 负载平衡器在连接的节点内使用循环分配。

您在会话存储中有多个选项。SQL Server 也可以用作会话状态的存储。azure 上提供了自定义会话技术，例如表存储提供程序等。

缓存也存储在服务器的内存中，但它与用户无关。同一池中的任何用户都可以访问应用程序缓存数据。总之，在云上，我们需要使用云提供商提供的缓存服务。Azure 提供 Windows Azure 分布式缓存服务。

事实上，当在应用程序中应用状态管理技术时，开发人员并不关心状态管理技术的影响。它

“如果您的客户没有云支持，那么您不必担心云场景”

# javascript - 列表框的双击事件

> ID：428642
> 
> 赞同：4
> 
> 时间：2009-01-09T16:08:02.363
> 
> 标签：javascript, html

列表框可以对其项目进行双击事件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T16:14:27.280

是：[MSDN DHTML 参考](http://msdn.microsoft.com/en-us/library/ms536921(VS.85).aspx)。由于您的标签说 javascript 和 HTML，我假设您正在谈论 Select 元素。

```
<select ondblclick = "handler" ... > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-24T22:03:40.610

您可以尝试使用选择选项创建链接。链接支持 ondblclick 事件。

[http://www.irt.org/articles/js058/#6](http://www.irt.org/articles/js058/#6)

JavaScript 1.2 Netscape Navigator 4.0 支持 JavaScript 1.2。尽管 Microsoft Internet Explorer 似乎支持 JavaScript 1.2，但它实际上实现了不同的动态对象模型

对象事件处理程序选择 onBlur()、onChange()、onFocus()

区域 onDblClick()、onMouseOut()、onMouseOver()

链接 onClick()、onDblClick()、onKeyDown()、onKeyPress()、onKeyUp()、onMouseDown()、onMouseOut()、onMouseUp()、onMouseOver()

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-01-09T16:14:05.003

ListBox 控件会引发此问题（至少在 Windows 窗体中） - 这是一个可能有助于您入门的链接，其中包含一些用于挂钩到 ListBox 的 DoubleClick 事件的示例代码：

[Control.DoubleClick 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.doubleclick.aspx)

# vb6 - Visual Basic 中的十六进制值

> ID：428643
> 
> 赞同：35
> 
> 时间：2009-01-09T16:08:05.360
> 
> 标签：vb6, asp-classic, vbscript

有人可以帮我刷新一下吗？

如何在 Visual Basic 6 / VBScript 源中指定十六进制值？

它不是 C++ 中的**0x** ABCD，这就是我能记住的......它是类似的......但是什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-01-09T16:10:53.233

试试**&H** ABCD，这就是它适用于大多数 BASIC 语言的方式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-09T16:13:14.100

`VBScript`\ `VBA`\ `VB6`（及以下）：

```
Dim MyValue As Integer
MyValue = &h1234 
```

`VB (.NET Framework)`：

```
Dim MyValue As Integer = &h1234 
```

版本通常在语法方面向后兼容，您不能总是在旧版本中使用新语法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T16:11:50.470

`&H<hex-value>`如果我没有记错的话。

像：`&HABCD`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T16:10:01.533

msgbox 十六进制 (255)

# ruby-on-rails - XML文件作为数据库？

> ID：428645
> 
> 赞同：2
> 
> 时间：2009-01-09T16:08:29.417
> 
> 标签：ruby-on-rails, ruby

是否可以将 Ruby on Rails 的单个 XML 文件用作 ActiveRecord 数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T16:18:07.930

不，AFAIK，

我建议您使用 sqlite3 作为数据库，因为它轻巧且小巧。如果你想从中生成 XML，你可以使用`to_xml`方法 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T16:22:35.953

阅读[此 stackoverflow 帖子](https://stackoverflow.com/questions/201568/when-would-i-use-xml-instead-of-sql)以了解有关此主题的概要。答案归结为可扩展性和数据完整性。在某些时候，数据文件会变得足够大，以至于需要磁盘索引，而 XML 不直接支持这些索引。此外，XML 文件不是事务性的——它没有日志。要在 XML 文件中实现事务存储，您必须实现 DBMS，并创建补充事务日志和索引文件。几乎可以肯定，这比它的价值要麻烦得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T17:51:36.930

我会说这*是*可能的，但你**真的**不想这样做！

这将涉及编写一个新的 XML ActiveRecord 适配器，该适配器将对您的文件发出 XPath（可能）查询，而其他适配器将生成 SQL。我想您还需要迁移来维护 XSD 或 DTD 文件。

这太糟糕了。不要这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T05:40:40.743

[https://rubygems.org/gems/xml_active](https://rubygems.org/gems/xml_active)似乎可以完成这项工作。我正在深入挖掘，但这是我开始的地方。

# .net - Windows .Net 控件 - 创建属性模板

> ID：428670
> 
> 赞同：2
> 
> 时间：2009-01-09T16:12:17.957
> 
> 标签：.net, controls, design-time

假设我的 .Net Windows 应用程序中通过将 TextBox 控件拖到表单编辑器上创建的所有文本框控件都应具有以下默认属性（某些文本框实例可以覆盖这些属性）：

**文本对齐：居中
调整大小：根据内容
停靠：左、上和右** 

现在，每次需要时设置这些属性变得繁琐且手动无聊。有什么方法可以将这些属性默认为“程序集级别”。我知道用户控件会解决问题，但我认为这是一个代价高昂的解决方案，我认为应该有一个更简单、更优雅的解决方案来解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T16:18:15.697

您在这里有两个选择。

第一种是创建一个方法，该方法遍历窗体上的所有嵌套控件，并选择文本框并更改属性，然后在窗体的初始化代码中调用此属性。

另一种是继承有问题的文本框控件，并在其构造函数中根据自己的喜好更改属性（并且可能隐藏属性以向属性网格公开不同的默认值）。要使控件在表单设计器中可用，它必须在一个单独的项目中创建，与它应该使用的地方不同，然后在第一个项目中引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T16:15:47.140

是的，继承自定义控件并在默认构造函数中设置默认属性。

例子：

```
 class Class1:TextBox{
        public Class1():base(){
            this.TextAlign = HorizontalAlignment.Center;
            this.Dock = DockStyle.Left;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T16:30:08.653

在我的项目中，我有类似的需求。我所做的是监听 Co​​ntrolAdded 事件，并检查该控件是否属于所需的类型……我设置了这些属性。

这真的是自动的......你应该将这样的逻辑放在表单基类中。就我而言，我的所有表单都继承自一个基础表单，其逻辑是绘制渐变背景并为我的表单设置标准属性（图标、边框等）。

在下面的示例中，我使用了一个名为“MGButton”的控件并设置了它的属性。你可以在这里做一个 CASE 来自定义你的所有控件。我还使用自定义属性来了解何时不使用默认值。

```
Private Sub FormBase_ControlAdded(ByVal sender As Object, ByVal e As System.Windows.Forms.ControlEventArgs) Handles MyBase.ControlAdded
        If e.Control.GetType().ToString = "CommonUI.MGButton" Then
            Dim boton As CommonUI.MGButton = CType(e.Control, CommonUI.MGButton)
            With boton
                If CType(.Tag, String) <> "OverrideDefaults" Then
                    .ColorBorde = System.Drawing.Color.Black
                    .ColorBordeFocus = System.Drawing.Color.Transparent
                    .ColorFinal = System.Drawing.Color.NavajoWhite
                    .ColorFinalDisabled = System.Drawing.Color.WhiteSmoke
                    .ColorFinalOver = System.Drawing.Color.Sienna
                    .ColorInicial = System.Drawing.Color.Peru
                    .ColorInicialDisabled = System.Drawing.Color.SeaShell
                    .ColorInicialOver = System.Drawing.Color.Sienna
                End If
            End With       
        End If
    End Sub 
```

# visual-studio-2008 - Visual Studio 2008 是否应该在 100% 的表格驱动布局中引发可访问性错误 (508)？

> ID：428682
> 
> 赞同：1
> 
> 时间：2009-01-09T16:14:04.520
> 
> 标签：visual-studio-2008, accessibility, section508

这些天，我试图确保我的工作越来越符合 508，但注意到如果你有 100% 的表格驱动布局而不是 css，VS2008 不会引发错误。

我一直认为要符合 508，您需要放弃“布局表格”的想法......

如果这是真的，我怎样才能强制工作室做出这些错误而不是警告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T16:18:16.573

问题是VS2008没有*意图*。即使在 508 以下，使用表格来呈现表格数据也是正确的。编译器可以查看布局并查看它是否包含复杂嵌套的表，但不能查看使用是否不正确。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T16:16:36.170

我不相信使用或不使用表格进行布局会使您的网站符合 508 标准。这是你是否有表格单元格、图像、链接的标题和 alt 标签，不依赖于 Javascript 等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T16:19:17.927

表格仍然是显示数据表格的正确有效方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T18:00:57.300

正如您在此处写的“100% 表驱动布局”，错误将是正确的。布局不应使用表格完成，而应使用 DIV 标签。接受 CSS 标准的设计界会因为 DIV 的设计不合适而发疯，因为他们讨厌 TABLE 布局。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-05-25T03:01:56.007

实际上，第 508 节（甚至[WCAG 指南](http://www.w3.org/TR/1999/WAI-WEBCONTENT-19990505/#gl-table-markup)）并没有明确禁止表格布局。这是应该避免的，但如果它不能（我想是由于遗留系统），那么如果它的线性读取与作为表格呈现时的线性相同，则该表格是可以的。

我学到的另一件事是布局表标记应该避免数据表的某些元素，尤其是`th`标签，因为这可以将屏幕阅读器踢到“表格”模式，这可能会破坏整个线性化的事情。

所以VS没有做任何警告你的真正原因就像@Jekke所说的那样，它不能告诉上下文。

# .net - cf.net 网络服务排队

> ID：428697
> 
> 赞同：3
> 
> 时间：2009-01-09T16:17:22.457
> 
> 标签：.net, compact-framework

这个问题与我最近问的另一个问题有关......

[cf.net 异常和其他日志记录](https://stackoverflow.com/questions/417789/cf-net-exception-and-other-logging)

我正在生成要通过 GPRS 连接使用 web 服务发送到服务器的日志消息，并且我想简单地对这些消息进行排队，以防与服务器的连接不可用。稍后我可能还想对它们进行批处理以节省带宽。使用 cf.net 执行此操作的最佳（最简单）方法是什么。我需要队列以某种方式在应用程序重新启动时保持不变，最好是在设备重新启动时保持不变。

有人有建议吗？或者更好的是一个代码示例:)

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T16:23:55.373

通常我所做的是将数据推送到数据库表中（SQLCE 是我的典型路线）。当我需要将某些内容推送到 Web 服务时，我将其发送给调度程序，调度程序又将其放入数据库。调度程序有一个后台线程，它从数据库中提取数据，发送它，然后在成功发送后执行数据库删除。它还监视连接状态。

调度程序中的队列更加简洁和快速，但是您希望在应用程序和设备重启之间保持持久性需要持久存储，因此数据库可能是最简单的机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T16:21:56.173

我已经使用[SQL Compact 数据库](http://www.microsoft.com/Sqlserver/2005/en/us/compact.aspx)来做这种事情（以及更多）。我从来没有遇到过任何问题，您可能已经知道所需的所有技能。基本上将消息存储在数据库中，并在成功上传后将其删除。

如果您熟悉常规 MSMQ，则将 MSMQ 用于 Compact Framework 是一个不错的选择[。](http://msdn.microsoft.com/en-us/library/ms229647.aspx)

顺便说一句，我们通过关闭手机功能来节省 Windows Mobile 设备的电源，而不是在需要时，即。用于 GPRS 数据传输。如果它适用于您的情况，这可以大大提高电池寿命（我们的应用程序从未在我们的应用程序之外使用，它们是带有 WM 的扫描仪而不是手机）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T16:25:14.437

看看在客户端上使用消息队列来存储日志，使用服务轮询并尝试以定期间隔发送到服务器，并在可能的情况下进行批处理。成功发送可以从队列中删除日志。

这是一个很好的起点：[MSDN](http://msdn.microsoft.com/en-us/library/ms229647.aspx)

# asp.net - 可以将 Web 服务中定义的 CONSTANTS 暴露给消费客户端（.Net 双方）

> ID：428703
> 
> 赞同：2
> 
> 时间：2009-01-09T16:18:46.227
> 
> 标签：asp.net, visual-studio, web-services

我为 Web 服务定义了几个常量，我想让这些常量可供消费客户端使用。服务器和客户端都是.Net。

我认为可以通过使用枚举来实现这一点，但是我的许多常量都是带空格的文本字符串，所以我必须编写一个额外的函数来将枚举转换为等效的文本字符串。

那么，有没有办法在 Web 服务中定义常量，以便客户端可以使用它们？

更新（Kev）：我想通过 Web 服务本身向客户端公开它们，而不是通过单独的程序集。更新 #2 (Paige)：所以如果我理解你的话，我将拥有一个*包含*常量的新 List 对象，但是客户端如何使用它呢？它看起来不是（大致）：dim constants as List = mywebservice.GetConstants() dim someresult as Integer = mywebservice.somefunction(constants(3)) 除非我误解了你，否则这完全违背了定义常量的意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-03-05T16:52:52.897

答案似乎是......做不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T17:02:36.590

您可以在独立程序集中实现这些常量，并从 Web 服务和客户端引用该程序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T17:49:43.673

您可以将“常量”写入字典，然后使用返回键的 Web 方法。

或者，使用上面 Kev 的回答：

班级：

```
public class Win32Message   {
    public const int WM_ACTIVATE =0x0006;
    public const int WM_ACTIVATEAPP = 0x001C;
    public const int WM_AFXFIRST = 0x0360;
    public const int WM_AFXLAST = 0x037F;
    public const int WM_APP = 0x8000;
    public const int WM_ASKCBFORMATNAME        = 0x030C;
} 
```

然后在 web 服务中使用 web 方法，如：

```
[WebMethod]
public System.Collections.Generic.List<string> GetConstants(System.Type type)
{
    System.Collections.Generic.List<string> constants = new 
        System.Collections.Generic.List<string>();

    System.Reflection.FieldInfo[] fieldInfos = type.GetFields(
        System.Reflection.BindingFlags.Public | BindingFlags.Static |
        System.Reflection.BindingFlags.FlattenHierarchy);

    // Go through the list and only pick out the constants
    foreach (System.Reflection.FieldInfo fi in fieldInfos)
    if (fi.IsLiteral && !fi.IsInitOnly)
        constants.Add(fi.Name);

    return constants;
} 
```

我在[Wes 的令人费解的博客上找到了这个](http://weblogs.asp.net/whaggard/archive/2003/02/20/2708.aspx "Wes 令人费解的博客")

当然，您可以将其作为数组、arraylist 或您想要的任何方式返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-10T08:00:20.820

我不知道有什么方法可以公开常量本身。

但也许你可以实现一些总是返回相同值的函数，并给它们一个特殊的命名约定？例如：

```
public int FLAG_READONLY()
{
   return 3;
} 
```

我可能误解了你的需要。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-01-21T17:36:42.230

正如我所看到的，Web 服务的真正意义在于能够使用 xml 或 json 或其他任何语言作为数据表示的语言，以独立于语言和机器的方式在服务器上检索数据或执行进程。当您调用服务列出产品时，您只想获取产品，您不想（或不需要）知道您是在调用存储的 SQL 过程还是服务器中的 C# 业务函数。所以我认为从客户端共享“常量”到服务器是没有意义的，除非您有一个向您列出这些常量的 Web 方法（同样，以纯文本方式）。我认为整个 Microsoft Web 服务 .asmx 堆栈很糟糕，因为它依赖于“远程过程调用”隐喻，而不是 Web 服务概念的“服务”部分。

我同意这是主观的：P

# python - 测量python cgi脚本的加载时间？

> ID：428704
> 
> 赞同：2
> 
> 时间：2009-01-09T16:19:11.843
> 
> 标签：python, html, css, browser, cgi

我将 python cgi 用于我们的 Intranet 应用程序。

当我测量时间时，脚本需要 4 秒才能完成。但在那之后，在浏览器中显示屏幕仍然需要另外 11 秒。屏幕是用表格构建的（大小：10 KB，未压缩 91 KB），并有一个大型 css 文件（5 KB，未压缩 58 KB）。

我使用 YSlow 并按照建议进行了尽可能多的优化。Gzipping 等 Firebug Net 说：文件需要 11 秒。

我如何测量最后 11 秒的需要在哪里？它只是 HTML 的大小，还是表格结构？还有更多关于调整的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T16:31:46.343

如果我担心服务器是否没有在可接受的时间内完成工作，我想我会获取一份 Ethereal 并观察浏览器和脚本之间的 TCP 连接。如果您在 11 秒间隔之前看到 TCP 套接字关闭，则您知道您的问题完全出在浏览器端。如果 TCP 关闭很好地进入了 11 秒的间隙，那么您将不得不在 http 服务器端进行一些调试。

我认为 Ethereal 已将其名称更改为 WireShark。无论它最近如何称呼自己，它都是此类工作的必备工具。前几天我正在使用它来找出为什么我无法连接到我的虚拟化 http 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T16:51:45.647

有那么多 html 来渲染，我也会考虑计算机的速度。您可以通过保存 html 文件并从本地硬盘驱动器打开它来测试它:)

# asp.net-mvc - 如何在 LINQ to SQL 中将对象保存回我的数据库中？

> ID：428715
> 
> 赞同：9
> 
> 时间：2009-01-09T16:20:50.437
> 
> 标签：asp.net-mvc, linq-to-sql

在 ASP.NET MVC 网站中使用[LINQ to SQL](http://en.wikipedia.org/wiki/Language_Integrated_Query#LINQ_to_SQL)，我可以显示数据库表中的对象（记录）。

现在我想创建一个新对象并将其保存回数据库。

在我的控制器中，我这样做：

```
 var dataContext = new MessageDataContext();
    Message message = new Message();
    message.Action = "save";
    message.Body = "record";
    message.Parameter = "234"; 
```

现在我想用这样的东西保存它：

```
message.Save(); 
```

也许：

```
dataContext.SubmitChanges(message); 
```

但这些都不起作用。

这里的语法是什么：

*   添加新对象并将它们保存到数据库中？
*   对现有对象进行更改并将其保存到数据库中？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-01-09T16:26:43.870

您正在寻找的是：

```
dataContext.Messages.InsertOnSubmit(message);
dataContext.SubmitChanges(); 
```

假设您有一个`Messages`表映射到您的 LINQ to SQL DBML。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-09T16:29:12.230

要添加新对象，只需执行以下操作：

```
dbContext.Messages.InsertOnSubmit(message);
dbContext.SubmitChanges(); 
```

如果您对先前加载的实体进行任何更改，只需执行以下操作：

```
dbContext.SubmitChanges(); 
```

如果您不想提交任何更改的实体，您需要执行以下操作：

```
dbContext.Refresh(RefreshMode.OverwriteCurrentValues, message); 
```

# visual-studio - 用于显示函数参数的可用枚举值下拉列表的 Visual Studio 快捷方式

> ID：428720
> 
> 赞同：0
> 
> 时间：2009-01-09T16:21:23.133
> 
> 标签：visual-studio

在 Visual Studio 中调用重载参数时，Visual Studio 通常不会显示可用于函数参数的可用枚举值的下拉列表。是否有一种快捷方式可以使用强制显示下拉菜单，因此不必键入枚举声明的完全限定路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T16:28:00.047

CTRL + SHIFT + SPACEBAR 显示方法重载

CTRL + 空格键显示枚举值

# windows - System.IO.Directory.GetFiles 返回的结果与 Windows XP Search Companion 不同

> ID：428723
> 
> 赞同：2
> 
> 时间：2009-01-09T16:21:51.150
> 
> 标签：windows, search, file-io, .net

我正在使用此语句以递归方式查找所有文件：

```
fileNames = System.IO.Directory.GetFiles(path, "*.*",
    System.IO.SearchOption.AllDirectories); 
```

找到的文件总数明显低于使用 Windows XP Search Companion 时。这不是由隐藏文件引起的，我检查过。看起来 GetFiles 跳过了一些嵌套级别较深的目录，但 Windows Search Companion 却没有。GetFiles 在命令提示符中计算与“dir /s”相同数量的文件。有人有线索吗？

谢谢， 内瓦

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T18:56:12.743

Search Companion 在 ZIP 文件中查找。目录树中有这些吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T17:51:04.403

你能确认没有抛出异常吗？

特别是[PathTooLongException](http://msdn.microsoft.com/en-us/library/system.io.pathtoolongexception.aspx)？

```
try {
    fileNames = System.IO.Directory.GetFiles(path, "*.*",
        System.IO.SearchOption.AllDirectories);

} catch (System.IOPathTooLongException) {
    System.Diagnostics.Debug.Fail("Some path is too long to be processed.");

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T16:31:16.700

系统文件？

结果是什么：

```
dir/s/as  
dir/s/ah 
```

搜索伴侣可能有过滤器，你检查过吗？

您可以发布搜索结果吗？

# java - 您知道任何使用 Java Web 服务的开源项目吗？

> ID：428725
> 
> 赞同：0
> 
> 时间：2009-01-09T16:22:01.370
> 
> 标签：java, web-services, open-source

对于我的文凭项目，我正在创建一个工具，该工具将研究 Java 项目并提取声明或使用 Web 服务的部分，以便研究以这种方式在网络之外进行通信的类、创建的通信通道等。

为了测试我的工具，我需要一些开源项目，因为我想看看它在实际系统前是如何工作的，而不仅仅是一些随机测试类。我在[sourceforge.net](http://sourceforge.net/)上搜索过此类项目，但我发现搜索返回的许多项目都没有完成或无法使用。

如果您从事过这样的项目，或者您只知道任何可以帮助我的项目，请提供您的意见，我们将非常欢迎。

基本上我正在寻找使用 Apache Axis 1.2/2、Apache CXF 和 SpringWS 创建的项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T16:42:08.193

[soapUI](http://sourceforge.net/projects/soapui/)是操作系统并使用 Web 服务。事实上，它是一个 Web 服务测试工具。

# mysql - 如何判断表中的数据是否编码错误？

> ID：428727
> 
> 赞同：0
> 
> 时间：2009-01-09T16:22:25.097
> 
> 标签：mysql, character-encoding

我有几个设置为 latin1 字符集的表，但我怀疑已错误地插入了一些实际使用 utf8 编码的值。

MySQL 使这变得更复杂一些，因为它会根据您的连接设置静默转换所有内容。

如何测试我的假设，即 MySQL 的 latin1 列中有一些 utf8 编码的字节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T17:37:17.020

如果您找到与以下位模式匹配的 2 个字节的字符串：

`110xxxxx 10xxxxxx`

很可能这些是 utf-8 字符。它们可能是 2 个连续的非 ascii latin-1 字符（如 'Ä' 或无法打印的东西），但这不太可能。

# c# - 隐藏表单的提交按钮

> ID：428732
> 
> 赞同：1
> 
> 时间：2009-01-09T16:23:17.967
> 
> 标签：c#, asp.net-mvc, forms

我是 asp.net-MVC，在我的源 ciew 页面中使用 BeginForm 语法，有人告诉我，如果你想提交表单，你必须在 using 语句的末尾有提交按钮。我不想使用 Button 来调用所需的 Action 我有一个 Actionlink 设置如下：

```
 <%=Html.ActionLink("" + CreateMore, "Create", "", new { @class = "Create" })%> 
```

我希望在单击此操作链接时提交表单，因为它们都将执行相同的操作..而且我不想看到提交按钮：

```
 <input type="submit" /> 
```

因为链接看起来更好

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-09T16:39:18.993

我会再次求助于 jQuery 来处理这个任务

```
$(function(){
  $('input:submit').hide(); //hide the submit button
  $('#submitLinkID').click(function(){  // bind the link's click event
    $('input:submit').click(); //click the hidden button
    return false; //return false to stop the link from doing anything
  });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T16:29:39.093

问题是什么？

风格=“显示：无；” 会隐藏按钮。你没有指出你在哪里遇到问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T16:50:08.753

ActionLink 将生成一个您可以单击的超链接，但它实际上不会发布表单。如果操作期望某些数据起作用，您需要以某种方式将查询参数添加到 ActionLink。如果没有数据可以采取行动，那么我根本不需要表单，因为单击链接将调用该操作。假设您只想使用链接来提交表单，那么我根本不明白为什么需要 ActionLink，也不需要输入按钮。只需在表单中添加一个常规锚标记，如下所示：

```
<a id='submitIDLink'
   href='javascript:void(0);'
   onclick='document.forms[0].submit();'>Create</a> 
```

请注意，如果您希望它在不启用 javascript 的情况下正常工作，那么您需要更有创意。您将使用按钮和链接，但从可见按钮和隐藏链接开始。准备好在文档上运行的一些 javascript 隐藏按钮并显示链接。在这种情况下，您可以使用类似于 @Corey 建议的调整来显示链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-01-26T07:24:03.303

Javascript 会很好，但我通常做的是

style="position:absolute;top:-5000px" 会隐藏屏幕顶部的按钮，所以如果您的表单太长，只需调整数字即可。

# internet-explorer - IE 在每次页面刷新时下载并安装 CAB 对话框弹出

> ID：428742
> 
> 赞同：0
> 
> 时间：2009-01-09T16:25:32.423
> 
> 标签：internet-explorer, activex, cab

我在 aspx 页面上有一个签名的出租车。我看到以下不一致的行为。任何见解将不胜感激。

1.  在某些机器上，每次刷新页面时都会下载并安装 cab。
2.  在其中一些机器上，每次刷新页面时都会弹出 IE“安装 cab”对话框，而在其他机器上只弹出一次。

附加信息：

1.  CAB 包含一个 .NET DLL
2.  CAB 稍大（大约 30 MB），因此重复下载行为很痛苦

目标浏览器是 IE6 和 IE7，行为是共同的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-14T15:17:07.750

Can you elaborate on what exactly the CAB contains, and how you're referencing it? This is the behavior you'd see if you attempted to install a DLL that would contain an ActiveX control and the ActiveX control isn't registered properly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-15T12:26:13.980

检查不同用户的区域设置。我们遇到了同样的问题，并通过将站点添加到[受信任区域](http://support.microsoft.com/kb/174360)来解决它。

# javascript - 在javascript中按值传递匿名函数？

> ID：428750
> 
> 赞同：1
> 
> 时间：2009-01-09T16:26:50.597
> 
> 标签：javascript, anonymous-function, byval

我有一个函数，它接受一个匿名函数作为参数并将其设置为一个变量（范围）以供参考。然后我尝试使用该引用执行另一个函数，但它显然失败了，因为该函数超出了范围。

我想知道是否有人知道将匿名函数作为匿名函数直接传递的简单方法，避免范围问题？

**编辑**：为了澄清， el 元素是在函数与参数列表隔离后定义的。此外，el 元素也是参数列表的一部分。如果只有我使用此代码，我可能会使用两个参数列表，第二个参数是数组或哈希对象，但不幸的是，此代码将被一些不太熟悉 JS 甚至编码的人使用对于这个问题。

谢谢您的帮助！

这是我的代码的相关部分：

```
locate : function(){
  if ((!arguments)||(!arguments.length)) return;
  arguments = [].splice.call(arguments,0); //This just converts arguments into an array
  for (var i=0;i<arguments.length;i++){
    if (typeof(arguments[i])=='function'){
      var tf = arguments.splice(i,1);
      break;
    };
  };
  if (!tf) return;
  JAS.Globals.eventListen('click',el,tf);
} 
```

这是缩写的，所以只要相信 el 已定义。JAS.Globals.eventListen 只是一个智能的 addEventListener。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T16:43:49.873

```
 var tf = arguments.splice(i,1) 
```

这会将一个数组返回到 tf. eventListen 是否需要一个数组？如果不使用：-

```
 var tf = arguments.splice(i,1)[0] 
```

既然您的其他论点似乎没有任何其他用途，为什么还要使用 splice 呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T16:37:49.323

你可以做：

```
for (var i=0;i<arguments.length;i++){
    if (typeof(arguments[i])=='function'){
        JAS.Globals.eventListen('click',el,arguments[i]);
        break;
    }
} 
```

或者如果您出于某种原因需要在循环之后分配事件：

```
var tf;
for (var i=0;i<arguments.length;i++){
    if (typeof(arguments[i])=='function'){
        tf = arguments[i];
        break;
    }
}
if (!tf) return;
JAS.Globals.eventListen('click',el,tf); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T16:52:16.503

我不是 JS 专家，不确定这是否对您有帮助。

但是由于您要求一种“按值”传递函数的方法......您可以重新组合该函数，使其再次变为匿名，如下所示：

```
JAS.Globals.eventListen('click', el,
    new Function(tf.toString() + tf.name + "();") 
```

最后一部分所做的是它从获得的原始源中创建一个新函数，从该源`tf.toString()`中将打印出具有相同函数名称的函数的定义代码，但在即将创建的函数的范围内。

然后你立即用`tf.name + "();"`.

请注意，如果函数没有名称，则可以将其包装为内联函数调用，即：

```
new Function("(" + tf.toString() + ")();"); 
```

总结一下：

```
new Function(tf.name
    ? (tf.toString() + tf.name + "();")  // func has a name, call by name
    : ("(" + tf.toString() + ")();")     // func don't have a name, call inline 
```

在 Firebug 中尝试一下，看看我的意思。

# shader - HLSL 中是否有任何 GLSL 的 ftransform() 翻译？

> ID：428752
> 
> 赞同：0
> 
> 时间：2009-01-09T16:27:53.930
> 
> 标签：shader, glsl, hlsl

使用 GLSL 顶点着色器时，让着色器作为固定功能管道工作的一种方法是调用：

ftransform();

功能。HLSL 的顶点着色器有类似的功能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-03T11:40:18.573

我从 ATI 的网站上找到[了本教程，这是](http://www2.ati.com/misc/samples/dx9/FixedFuncShader.pdf)[MSDN 的链接，](http://msdn.microsoft.com/en-us/library/bb944006(VS.85).aspx)解释了如何在 Direct3D 9 中编写 HLSL 着色器。希望对您有所帮助。

编辑：根据这本书，微软本身不鼓励固定功能管道，因为在 HLSL 中，它们使您可以直接访问底层硬件。

# c# - 在许多类中实现新接口成员的最快方法？

> ID：428766
> 
> 赞同：3
> 
> 时间：2009-01-09T16:31:41.007
> 
> 标签：c#, .net

你知道从接口到类实现方法的快速方法吗？如果是，你该怎么做？

情况：我有超过 15 个具体类使用的接口。我添加了一个新方法，我需要在所有具体类中实现这个新方法。

**更新**

我所有的具体类都实现了接口和所有方法都很好。后来，我在界面中添加了一个新方法。为了能够编译，我需要在所有类中实现新方法。我不想在每个类上一个一个地去实现该方法。有没有一种方法，例如界面中的“右键单击新方法”，它将进入所有具体类并自动进入新方法。这样我就不用开所有的课了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-09T16:40:39.880

既然你提到你已经安装了 ReSharper，这里有一些快速实现的方法：

*   使用“Find Usages Advanced”并选中“Implementations”复选框
*   对于每个班级，使用快速行动“实施成员”

您还可以使用 ReSharper 的“[解决方案范围分析](http://www.jetbrains.com/resharper/features/code_analysis.html#Solution-Wide_Analysis)”功能 - 它会快速找到所有未实现此新方法的类

**编辑：**

最后我找到了一个*非常*快速的方法：

*   在剪贴板中保存方法签名。
*   将光标定位在 IFoo 界面中的 Boo 上（注意代码错误 - 空代码块，这是故意的）。
*   右键单击并选择重构->“下推成员”
*   在显示的对话框中选择所需的类，然后单击下一步。
*   从剪贴板恢复方法签名

```
internal interface IFoo
{
    void Boo()
    {
    }
}

class Boo:IFoo
{
}

class Foo: IFoo
{
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-09T16:36:56.957

提供具有默认实现的抽象基类，然后让所有具体类继承该抽象类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-21T07:39:37.383

使用 Resharper，您可以选择新的界面成员（将光标放在上面）然后按`Alt`+`Enter`或单击锤子图标

1.  在派生类中实现
2.  实现上述所有类型的成员

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T16:38:59.057

是的，

在 15 个类中的每一个中实现接口类。例子：

```
public class MyClass:MyInteface{

} 
```

然后，将鼠标悬停在接口名称的第一个字母上，然后从下拉菜单中选择“显式实现接口”。

我假设您使用的是 Visual Studio。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-15T15:18:12.120

是的。现在您可以使用图像中的选项（不是很明显）来执行此操作（对于西班牙语中的 VS 感到抱歉：））从该接口继承的所有类都将自动实现该接口。

[![在此处输入图像描述](https://i.stack.imgur.com/kLbxz.png)](https://i.stack.imgur.com/kLbxz.png)

# asp.net - 缓存会被覆盖吗？

> ID：428768
> 
> 赞同：0
> 
> 时间：2009-01-09T16:31:47.980
> 
> 标签：asp.net, session, caching

如果您的网站上有多个用户在同一页面上并且他们正在运行查询（搜索）并且结果存储在数据表中。如果将应用程序缓存存储在缓存中，最后一个人的搜索会覆盖吗？这是使用 Session 的理由吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T16:37:49.323

如果您将它们存储在同一个密钥下，当然可以。如果您将密钥设置为特定于用户或会话，则可以避免冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T16:37:58.827

这取决于您如何将信息存储到缓存中。如果信息是不同查询的结果，那么缓存应该将该值存储在不同的键中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T16:56:18.477

您应该注意缓存和会话在更多方面的不同，而不仅仅是访问范围。

缓存中的项目通常属于可以在需要时重新创建的类型，默认情况下，项目可以任意从缓存中删除。

另一方面，会话中的项目将保留在会话中，直到被代码明确删除。此外，会话可能不是进程中的本地存储，它可能位于另一个进程、服务器甚至数据库中。

# .net - File Watcher - 获取在 Windows 中创建文件的进程名称？

> ID：428774
> 
> 赞同：1
> 
> 时间：2009-01-09T16:33:50.613
> 
> 标签：.net, windows, io, process, filesystemwatcher

有没有一种好方法可以获取在 Windows 中创建文件的进程名称？

**我在 Windows 2000 Server C:\WINNT\Temp**上有一个目录，其中填满了如下文件：
70618199
21834082

它们的大小始终为 121,201 KB。

我可以以编程方式“捕获”在此位置放置文件的程序名称或服务名称吗？

**更多信息：**
我对此做了更多研究。我重命名了文件 TIFF 并能够打开它。
该机器通过自定义编写的 ASP.NET 应用程序用作文档搜索工具。该机器在 E:\ 驱动器上包含大约 50,000 个 TIFF 文档。这台机器还运行 SQL Server 2000，打开全文索引。全文索引绝不会触及 TIFF - 但它不应该因为这是 SQL 对吗？但 FTS 确实需要打开索引服务。这个 TIFF 的奇怪之处似乎是 Web 服务器提供的最大的东西。IIS 或索引服务是否使用 C:\WINNT\Temp 进行某种缓存？想法？

**解决方案（也许？）** 这似乎是 Microsoft 索引服务。
当我关闭它时，这些文件都不会在 WINNT\Temp 中创建。
它似乎抓取了它找到的最大文件并将其复制到 WINNT\Temp 中。这很奇怪。当您处理 100MB+ TIFF 文件时，这可能会导致您的磁盘空间不足。很烦人。
猜猜我将关闭我的索引服务的“Web”分支。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T16:38:23.397

如果你想要类似于 fuser for windows 的东西，你可以查看[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

它不会让您查看文件，但您可以查看是否有任何当前正在运行的进程正在访问该临时目录并创建类似的命名临时文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-09T17:06:58.207

总是有[进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)代替 FileMon，它会告诉你哪个进程正在访问有问题的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T16:45:05.800

我使用过[FileMon.exe，](http://technet.microsoft.com/en-us/sysinternals/bb896642.aspx)但仅适用于 XP。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T19:35:43.740

我发现从 .NET 以编程方式执行此操作的唯一方法是运行[Sysinternal 的命令行句柄应用程序](http://technet.microsoft.com/en-us/sysinternals/bb896655.aspx)并传入文件名并读取控制台输出以尝试使用文件的打开句柄来捕获源应用程序。

否则其他人提到的实用程序会很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-12T23:09:54.650

您始终可以将该目录设置为只读，然后看看会发生什么。虽然如果它是一个文档服务器，您可能不想这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-03T19:58:38.790

```
\回收站\S-1-5-21-1482476501-1644491937-682003330-1013\service.exe

```

这是一个回收站病毒。它在所有磁盘分区中创建了一个名为“Recycler”的隐藏文件夹，我无法从 Windows 安全模式中删除它们。Norton, AVG Kaspersky 未能检测到它或将其删除。

我关闭系统还原，使用引导盘重新启动 PC 进入命令提示符并从所有驱动器中删除“回收站”文件夹。使用命令 rmdir/sc:\recycler

这是在 Windows XP 上唯一对我有用的东西。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-01-09T17:06:52.213

只需使用标准 Win32 api (NAPI)。

见高级。Win32 api ng news://comp.os.ms-windows.programmer.win32 for source code (C)

# c# - .NET 中的映射和归约

> ID：428798
> 
> 赞同：208
> 
> 时间：2009-01-09T16:40:21.737
> 
> 标签：c#, mapreduce

哪些场景需要使用“ [Map and Reduce](http://en.wikipedia.org/wiki/MapReduce) ”算法？

该算法是否有 .NET 实现？

* * *

## 回答 #1

> 赞同：415
> 
> 时间：2012-12-15T19:07:00.600

Map 和 Reduce 的 Linq 等价物：如果您有幸拥有 linq，那么您不需要编写自己的 map 和 reduce 函数。C# 3.5 和 Linq 已经有了它，尽管名称不同。

*   地图是`Select`：

    ```
    Enumerable.Range(1, 10).Select(x => x + 2); 
    ```

*   减少是`Aggregate`：

    ```
    Enumerable.Range(1, 10).Aggregate(0, (acc, x) => acc + x); 
    ```

*   过滤器是`Where`：

    ```
    Enumerable.Range(1, 10).Where(x => x % 2 == 0); 
    ```

[https://www.justinshield.com/2011/06/mapreduce-in-c/](https://www.justinshield.com/2011/06/mapreduce-in-c/)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-03-02T20:58:29.230

非常适合 mapreduce 样式解决方案的问题类别是聚合问题。从数据集中提取数据。在 C# 中，可以利用 LINQ 以这种风格进行编程。

来自以下文章： [http ://codecube.net/2009/02/mapreduce-in-c-using-linq/](http://codecube.net/2009/02/mapreduce-in-c-using-linq/)

> GroupBy 方法充当地图，而 Select 方法将中间结果减少到最终结果列表中。

```
var wordOccurrences = words
                .GroupBy(w => w)
                .Select(intermediate => new
                {
                    Word = intermediate.Key,
                    Frequency = intermediate.Sum(w => 1)
                })
                .Where(w => w.Frequency > 10)
                .OrderBy(w => w.Frequency); 
```

对于分布式部分，您可以查看 DryadLINQ：[http ://research.microsoft.com/en-us/projects/dryadlinq/default.aspx](http://research.microsoft.com/en-us/projects/dryadlinq/default.aspx)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-02-21T07:37:55.860

由于我不记得 LINQ 调用它`Where`，`Select`而`Aggregate`不是`Filter`,，`Map`所以`Reduce`我创建了一些您可以使用的扩展方法：

```
IEnumerable<string> myStrings = new List<string>() { "1", "2", "3", "4", "5" };
IEnumerable<int> convertedToInts = myStrings.Map(s => int.Parse(s));
IEnumerable<int> filteredInts = convertedToInts.Filter(i => i <= 3); // Keep 1,2,3
int sumOfAllInts = filteredInts.Reduce((sum, i) => sum + i); // Sum up all ints
Assert.Equal(6, sumOfAllInts); // 1+2+3 is 6 
```

以下是 3 种方法（来自[https://github.com/cs-util-com/cscore/blob/master/CsCore/PlainNetClassLib/src/Plugins/CsCore/com/csutil/collections/IEnumerableExtensions.cs](https://github.com/cs-util-com/cscore/blob/master/CsCore/PlainNetClassLib/src/Plugins/CsCore/com/csutil/collections/IEnumerableExtensions.cs)）：

```
public static IEnumerable<R> Map<T, R>(this IEnumerable<T> self, Func<T, R> selector) {
    return self.Select(selector);
}

public static T Reduce<T>(this IEnumerable<T> self, Func<T, T, T> func) {
    return self.Aggregate(func);
}

public static IEnumerable<T> Filter<T>(this IEnumerable<T> self, Func<T, bool> predicate) {
    return self.Where(predicate);
} 
```

来自[https://github.com/cs-util-com/cscore#ienumerable-extensions](https://github.com/cs-util-com/cscore#ienumerable-extensions)的更多详细信息：

[![在此处输入图像描述](https://i.stack.imgur.com/ZTgiN.png)](https://i.stack.imgur.com/ZTgiN.png)

# ide - 如何为 Scala 项目配置 jEdit？

> ID：428819
> 
> 赞同：8
> 
> 时间：2009-01-09T16:47:12.100
> 
> 标签：ide, scala, editor, jedit

我希望能够使用 jEdit 来编写、编译和测试用 Scala 编写的项目。我该如何配置它呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-26T23:53:12.027

新链接似乎是[http://wiki.liftweb.net/index.php?title=SetUp_jEdit](http://wiki.liftweb.net/index.php?title=SetUp_jEdit)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T16:50:12.437

可能是这个~~[使用 Scala 设置 JEdit](http://liftweb.net/index.php/SetUp_jEdit)~~ [**设置 jEdit 来开发 Scala**](http://wiki.liftweb.net/index.php?title=SetUp_jEdit)可以帮助你吗？
（新更新的链接，正如[大卫维德拉](https://stackoverflow.com/users/83395/david-vydra)在他的[回答](https://stackoverflow.com/questions/428819/how-do-i-configure-jedit-for-scala-projects/687984#687984)中提到的那样）

它指的是[完全配置](http://downloads.sourceforge.net/alchim/ScalaMiniIDEPlugin-0.3.1-full.zip?use_mirror=osdn)为运行 Scala 项目的 JEdit。

[http://wiki.liftweb.net/images/9/91/Screenshot-jedit.png](http://wiki.liftweb.net/images/9/91/Screenshot-jedit.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T23:11:25.537

我实际上只是使用 jEdit 模式（我的[调整版本](http://github.com/djspiewak/jedit-modes/tree/master/scala.xml)）并保留它。我所有的编译、shell 和 SCM 东西都是在一个单独的终端窗口中完成的。很多时候我会使用“项目查看器”来管理项目级别的事情，但这只是因为我懒得在每次必须 Cmd+O 时输入新路径。

jEdit + Buildr + JavaRebel（用于 shell）== 一个出色的工作流程。我没有得到 Scala Plugin 提供的 compile-on-save 行为，但没有它我可以生活。由于类型系统的复杂性，在保存时编译 Scala 无论如何都很棘手。

# c# - c# 中的斐波那契、二进制或二项式堆？

> ID：428829
> 
> 赞同：17
> 
> 时间：2009-01-09T16:50:23.323
> 
> 标签：c#, .net, algorithm, data-structures

是否有任何堆数据结构实现，斐波那契、二进制或二项式？

参考：这些是用于实现优先级队列的数据结构，而不是用于分配动态内存的数据结构。见[http://en.wikipedia.org/wiki/Heap_(data_structure)](http://en.wikipedia.org/wiki/Heap_(data_structure))

谢谢，戴夫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-15T04:57:18.103

堆和许多其他数据结构的免费 C# 实现：

*   [C# 和 CLI 的 C5 通用集合库](http://www.itu.dk/research/c5/)
*   [Wintellect 的 .NET 电源集合](http://powercollections.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=6863)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-12-28T16:15:52.387

[QuickGraph](http://quickgraph.codeplex.com/)在 C# 中实现了斐波那契堆和队列，还有很多其他的东西。它是免费和开源的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-25T22:26:48.593

独立的压力测试实现位于 Github 的[Advanced-Algorithms](https://github.com/justcoding121/Advanced-Algorithms)存储库下。DecrementKey 操作性能是使后面两个显着的原因。

*   二进制最小/最大堆
*   二项式最小/最大堆
*   斐波那契最小/最大堆

该存储库还有两个堆实现，D-Ary Heap 和 Pairing Heap。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T16:59:30.467

我不知道任何本机框架实现。

我在 f# 中找到了二叉堆的两种实现（[链接 1](http://www.koders.com/csharp/fidA3988613D26F26CB5D806CF1FD320C0FDA54C389.aspx?s=file:semaphore.cs)、[链接 2 ）和二项堆的一种实现（](http://weblogs.asp.net/cumpsd/archive/2005/02/13/371719.aspx)[链接](http://cs.hubfs.net/forums/thread/244.aspx)）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-05T16:17:16.050

我相信一个`SortedSet<KeyValuePair<K,V>>`有习惯的`Comparer`人会做这项工作。

将`Comparer`如下所示：

```
class KeyValueComparer<K, V> : IComparer<KeyValuePair<K,V>> where K:IComparable where V:IComparable
{
    public int Compare(KeyValuePair<K, V> x, KeyValuePair<K, V> y)
    {
        var res = x.Key.CompareTo(y.Key);
        return res == 0 ? x.Value.CompareTo(y.Value) : res;
    }
} 
```

这样`Comparer`，`SortedSet`将按 Key 排序，并且允许键的重复。

您可以获得`Min`at 恒定时间`RemoveMin`at `O(logn)`、`Add`一个条目 at`O(logn)`和`Update`一个键 at `O(logn)`。

这是一个完整（或几乎）的实现：

```
public class Heap<K, V>
    where K : IComparable
    where V : IComparable
{
    private readonly SortedSet<KeyValuePair<K, V>> _sortedSet;

    // O(1)
    public KeyValuePair<K, V> Min
    {
        get { return _sortedSet.Min; }
    }

    public Heap()
    {
        _sortedSet = new SortedSet<KeyValuePair<K, V>>(new KeyValueComparer<K, V>());
    } 

    // O(logn)
    public void Add(K key, V value)
    {
        _sortedSet.Add(new KeyValuePair<K, V>(key, value));
    }

    // O(logn)
    public KeyValuePair<K, V> RemoveMin()
    {
        var min = Min;
        _sortedSet.Remove(min);
        return min;
    }

    // O(logn)
    public void Remove(K key, V value)
    {
        _sortedSet.Remove(new KeyValuePair<K, V>(key, value));
    }

    // O(logn)
    public void UpdateKey(K oldKey, V oldValue, K newKey)
    {
        Remove(oldKey, oldValue);
        Add(newKey, oldValue);
    }

    private class KeyValueComparer<K, V> : IComparer<KeyValuePair<K, V>>
        where K : IComparable
        where V : IComparable
    {
        public int Compare(KeyValuePair<K, V> x, KeyValuePair<K, V> y)
        {
            var res = x.Key.CompareTo(y.Key);
            return res == 0 ? x.Value.CompareTo(y.Value) : res;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-19T11:27:52.403

MinHeap和MaxHeap的实现：

```
public abstract class Heap<T>
{
    private List<T> m_Vector;

    private void Swap(int i, int j)
    {
        var tmp = m_Vector[i];
        m_Vector[i] = m_Vector[j];
        m_Vector[j] = tmp;
    }

    protected abstract int Compare(T a, T b);

    private void SiftUp(int i)
    {
        if (i == 0)
        {
            return;
        }

        int parent = (i - 1) / 2;

        if (Compare(m_Vector[i], m_Vector[parent]) >= 0)
        {
            return;
        }

        Swap(i, parent);
        SiftUp(parent);
    }

    private void SiftDown(int i)
    {
        int left = i * 2 + 1;

        if (left >= m_Vector.Count)
        {
            return;
        }

        var right = left + 1;

        var child = left;

        if (right < m_Vector.Count)
        {
            if (Compare(m_Vector[left], m_Vector[right]) > 0)
            {
                child = right;
            }
        }

        if (Compare(m_Vector[i], m_Vector[child]) <= 0)
        {
            return;
        }

        Swap(i, child);
        SiftDown(child);
    }

    public Heap()
    {
        m_Vector = new List<T>();
    }

    public Heap(IEnumerable<T> elements)
    {
        m_Vector = new List<T>(elements);

        if (m_Vector.Count < 2)
        {
            return;
        }

        //
        // From the last parent, upwards, sift down. Each sift is O<1>.
        //
        for (int i = (m_Vector.Count - 2) / 2; i >= 0; i--)
        {
            SiftDown(i);
        }
    }

    public int Count { get { return m_Vector.Count; } }

    public void Add(T element)
    {
        m_Vector.Add(element);
        SiftUp(m_Vector.Count - 1);
    }

    public T Top
    {
        get
        {
            if (m_Vector.Count == 0)
            {
                throw new InvalidOperationException();
            }
            return m_Vector[0];
        }
    }

    public T Fetch()
    {
        if (m_Vector.Count == 0)
        {
            throw new InvalidOperationException();
        }

        T result = m_Vector[0];
        m_Vector[0] = m_Vector[m_Vector.Count - 1];
        m_Vector.RemoveAt(m_Vector.Count - 1);

        SiftDown(0);

        return result;
    }
}

public class MinHeap<T> : Heap<T> where T: IComparable 
{
    protected override int Compare(T a, T b)
    {
        return a.CompareTo(b);
    }

    public MinHeap() : base()
    {
    }

    public MinHeap(IEnumerable<T> elements) : base(elements)
    {
    }
}

public class MaxHeap<T> : Heap<T> where T : IComparable
{
    protected override int Compare(T a, T b)
    {
        return b.CompareTo(a);
    }

    public MaxHeap() : base()
    {
    }

    public MaxHeap(IEnumerable<T> elements) : base(elements)
    {
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-01T07:59:04.633

一个简单的最小堆实现。

[https://github.com/bharathkumarms/AlgorithmsMadeEasy/blob/master/AlgorithmsMadeEasy/MinHeap.cs](https://github.com/bharathkumarms/AlgorithmsMadeEasy/blob/master/AlgorithmsMadeEasy/MinHeap.cs)

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace AlgorithmsMadeEasy
{
    public class MinHeap
    {
        private static int capacity = 10;
        private int size = 0;

        int[] items = new int[capacity];

        private int getLeftChildIndex(int parentIndex) { return 2*parentIndex+1 ; }
        private int getRightChildIndex(int parentIndex) { return 2*parentIndex+2 ; }
        private int getParentIndex(int childIndex) { return (childIndex - 1) / 2; }

        private bool hasLeftChild(int index) { return getLeftChildIndex(index) < size; }
        private bool hasRightChild(int index) { return getRightChildIndex(index) < this.size; }
        private bool hasParent(int index) { return getParentIndex(index) >= 0; }

        private int leftChild(int index) { return this.items[getLeftChildIndex(index)]; }
        private int rightChild(int index) { return this.items[getRightChildIndex(index)]; }
        private int parent(int index) { return this.items[this.getParentIndex(index)]; }

        private void swap(int indexOne, int indexTwo)
        {
            int temp = this.items[indexOne];
            this.items[indexOne] = this.items[indexTwo];
            this.items[indexTwo] = temp;
        }

        private void ensureExtraCapacity()
        {
            if (this.size == capacity)
            {
                Array.Resize(ref this.items, capacity*2);
                capacity *= 2;
            }
        }

        public int peek()
        {
            if(this.size==0) throw new NotSupportedException();
            return this.items[0];
        }

        public int remove()
        {
            if(this.size==0) throw new NotSupportedException();
            int item = this.items[0];
            items[0] = items[this.size - 1];
            items[this.size - 1] = 0;
            this.size--;
            heapifyDown();
            return item;
        }

        public void Add(int item)
        {
            this.ensureExtraCapacity();
            this.items[size] = item;
            this.size++;
            heapifyUp();
        }

        private void heapifyUp()
        {
            int index = this.size - 1;
            while (hasParent(index) && parent(index) > this.items[index])
            {
                swap(index,getParentIndex(index));
                index = getParentIndex(index);
            }
        }

        private void heapifyDown()
        {
            int index = 0;
            while (hasLeftChild(index))
            {
                int smallerChildIndex = getLeftChildIndex(index);
                if (hasRightChild(index) && rightChild(index) < leftChild(index))
                {
                    smallerChildIndex = getRightChildIndex(index);
                }

                if (this.items[index] < this.items[smallerChildIndex])
                {
                    break;
                }
                else
                {
                    swap(index,smallerChildIndex);
                }
                index = smallerChildIndex;
            }
        }
    }
}

/*
Calling Code:
    MinHeap mh = new MinHeap();
    mh.Add(10);
    mh.Add(5);
    mh.Add(2);
    mh.Add(1);
    mh.Add(50);
    int peek = mh.peek();
    mh.remove();
    int newPeek = mh.peek();
*/ 
```

# html - 如何让 iPhone 网络应用模仿非网络应用？

> ID：428835
> 
> 赞同：4
> 
> 时间：2009-01-09T16:52:27.890
> 
> 标签：html, css, iphone, safari

我一直在考虑制作一个快速的小型 iPhone 网络应用程序。

我开始阅读并尝试使用[Apple 的 Web Apps Dev Center](https://developer.apple.com/webapps/index.php)记录的特殊元标记和属性：

*   视口
*   苹果移动网络应用程序功能
*   苹果移动网络应用状态栏样式
*   -webkit-border-radius
*   -webkit-border-image
*   自动更正
*   自动大写
*   苹果触摸图标
*   -webkit-文本大小调整

这让我想到必须有一个很好的指南可以遵循，以最好地模仿设备的非 Web 应用程序的默认样式和行为。

然后我偶然发现了[Joe Hewitt](http://joehewitt.com/)的[iUI 项目](http://code.google.com/p/iui/)。

它有两个令人印象深刻的演示：

*   [音乐演示](http://iui.googlecode.com/svn/tags/REL-current/samples/music.html)
*   [挖掘演示](http://iui.googlecode.com/svn/tags/REL-current/samples/digg/index.html)

我应该使用其他库、指南或其他资源吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-11-19T14:56:27.467

在测试了几个 iphone web app 的 UI 框架后，我认为[JQTouch](http://www.jqtouch.com/)是最好的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T14:19:53.220

查看 iUI 库-[http://code.google.com/p/iui/](http://code.google.com/p/iui/)：

基于 Joe Hewitt 的 iPhone 导航作品，iUI 具有以下特点：

*   从标准 HTML 创建导航菜单和 iPhone 界面
*   创建基本的 iPhone 页面不需要使用或了解 JavaScript
*   处理手机方向变化的能力
*   为 Web 应用程序（在 iPhone 上或在 iPhone 外）提供更“类似 iPhone”的体验

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-02-15T15:11:27.560

2010 年 2 月 12 日，theappleblog.com 的 Andrew Flocchini 撰写了一份使用**iWebKit**框架包为 iPod Touch、iPhone 和 iPad 优化网站表单的指南。

[名称和密码字段更改 http://gigapple.files.wordpress.com/2010/02/namechage.png?w=570&h=202](http://gigapple.files.wordpress.com/2010/02/namechage.png?w=570&h=202)

[操作方法：创建 iPhone Web 应用程序](http://theappleblog.com/2010/02/12/how-to-create-an-iphone-web-app/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-07-09T15:46:28.480

我认为最好的 iPhone Web App 框架是`jQTouch` [http://www.jqtouch.com/](http://www.jqtouch.com/)它是一个 jQuery 插件。您可以查看由 jQTouch 构建的 Showtime 应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T17:38:52.370

除了大多数库（例如 scriptaculous 等）都可以使用的精美效果之外……iPhone Web 应用程序中发生的一件有趣的事情是即使与 ajax 调用也兼容“#”后退按钮，您可以在 Google 上搜索“Really Simple History” " 找到在这种情况下使用的正确库。

如果您使用 jQuery，您可能还想看看这个：http: [//plugins.jquery.com/project/iphone](http://plugins.jquery.com/project/iphone)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-09T17:39:53.943

你看过[iPhoneWebDev](http://www.iphonewebdev.com/?)网站吗？

还可以查看Richard Wagner所著的《 [Professional iPhone and iPod touch Programming: Building Applications for Mobile Safari 》一书。](http://www.amazon.com/s?search-alias=stripbooks&field-isbn=0470251557)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-06T10:49:46.847

看看[`Swipy.js`](https://www.github.com/caktux/swipy)。我不喜欢这些框架的工作方式，所以我做了这个，其中包括其他伟大的项目：

*   [现代化](http://modernizr.com/download/#-applicationcache-inputtypes-touch-shiv-mq-cssclasses-teststyles-prefixes-load)
*   [jquery.transit](http://ricostacruz.com/jquery.transit/)
*   [锤子.js](https://github.com/EightMedia/hammer.js)
*   [快速点击](https://github.com/ftlabs/fastclick)
*   [Waypoints.js](https://github.com/Skookum/waypoints)（不是用于滚动的）
*   [Fontello](http://fontello.com/) / [FontAwesome](http://fortawesome.github.io/Font-Awesome/)

它使用 Modernizr 逐步增强，使用 jquery.transit 添加平滑过渡，使用 Hammer.js 添加边缘滑动向后/向前导航，添加 FastClick 用于点击，使用 Waypoints 解决内部链接和带有 FontAwesome 图标的漂亮导航栏。

享受 ：）

# php - php登录代码问题

> ID：428836
> 
> 赞同：0
> 
> 时间：2009-01-09T16:53:05.393
> 
> 标签：php, html, authentication

我正在使用此代码进行登录，但是当我输入用户名和密码时，它只会加载页面并再次显示登录页面。为什么会这样？

```
<?php
    session_start();
    if(!isset($_POST['username']) || !isset($_POST['password']) || empty($_POST['username']) || empty($_POST['password']))
    {
?>
        <html>
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Welcome to yachts database &nbsp;&nbsp;&nbsp;</title>
        <script type="text/javascript">
        function validate()
        {
            var username=document.getElementById("username").value;
            var password=document.getElementById("password").value;
            if(username.length==0)
            {
                alert("Please enter your user name");
                document.getElementById("username").focus();
                document.getElementById("username").select();
                return false;
            }
            if(password.length==0)
            {
                alert("Please enter your password");
                document.getElementById("password").focus();
                document.getElementById("password").select();
                return false;
            }
            submitOK="false";
        }
        </script>
        <?php
            include("styles.txt");
        ?>
        </head>
        <body onLoad="self.focus();document.login.username.focus()">
        <br><br><br><br><br><br><br>
        <center><font size=5 color=blue><b>University of ....... </b></font></center>
        <center><font size=5 color=blue><b>Yachts Database Project</b></font></center>
        <form name="login" method="post" action="<?php $_SERVER['PHP_SELF'];?>" onSubmit="return validate()">
        <table width="350" border="1" align="center" cellpadding=0 cellspacing=0  bgcolor=#ffffff bordercolor=#ffffff>
        <tr>
            <th colspan=2 height=30 bgcolor=#050E8C><font size=4 color=#ffffff>Please, enter user name and password</font></th>
        </tr>
        <tr>
            <th bgcolor=#E0E0FF><font size=4 color=#2020ff>User name</font></th>
            <td bgcolor=#E0E0FF align=center><input type="text" name="username" id="username" size="30"></td>
        </tr>
        <tr>
            <th bgcolor=#E0E0FF><font size=4 color=#2020ff>Password</font></th>
            <td bgcolor=#E0E0FF align=center><input type="password" name=" password" id="password" size="30"></td>
        </tr>
        <tr>
            <td bgcolor=#E0E0FF colspan=2 align=right><input type="submit" name="login" value="&nbsp;&nbsp;Login&nbsp;&nbsp;">&nbsp;&nbsp;<input type="reset" name="reset" value="&nbsp;&nbsp;Reset&nbsp;&nbsp;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=register.php class=links>Register</a>&nbsp;&nbsp;&nbsp;&nbsp;</td>
        </tr>
        </table>
        </form>
        </body>
        </html>
<?php
    }
    else
    {
        $connect= mysql_connect("localhost","root") or die ("Sorry, Can not connect to database");
        mysql_select_db("login") or die (mysql_error());
        $username1=$_POST['username'];
        $password1=$_POST['password'];
        if($username1 && $password1)
        {
            $query="SELECT * FROM users WHERE username='$username1' AND password='$password1'";
            $result=mysql_query($query,$connect) or die(mysql_error());
            $rowcount=mysql_num_rows($result);
        }
        if($rowcount)
        {
            //$_SESSION['username']=$rowcount['username'];
            $user1=$username1;
            $pass1=$password1;
            session_register("user1");
            session_register("pass1");
            header("location: main.php");
        }
        else
        {
?>
            <html>
            <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
            <title>Welcome to yachts database &nbsp;&nbsp;&nbsp;</title>
            <script type="text/javascript">
            function validate()
            {
                var username=document.getElementById("username").value;
                var password=document.getElementById("password").value;
                if(username.length==0)
                {
                    alert("Please enter your user name");
                    document.getElementById("username").focus();
                    document.getElementById("username").select();
                    return false;
                }
                if(password.length==0)
                {
                    alert("Please enter your password");
                    document.getElementById("password").focus();
                    document.getElementById("password").select();
                    return false;
                }
                submitOK="false";
            }
            </script>
            <?php
                include("styles.txt");
            ?>
            </head>
            <body  onLoad="self.focus();document.login.username.focus()">
            <br><br><br><br><br><br><br>
            <center><font size=5 color=blue><b>University of ....... </b></font></center>
            <center><font size=5 color=blue><b>Yachts Database Project</b></font></center>
            <form name="login"  method="post" action="<?php echo $_SERVER['PHP_SELF'];?>" onSubmit="return validate()">
            <table width="350" border="1" align="center" cellpadding=0 cellspacing=0  bgcolor=#ffffff bordercolor=#ffffff>
            <tr>
                <th colspan=2 height=30 bgcolor=#050E8C><font size=4 color=#ffffff>Please, enter user name and password</font></th>
            </tr>
            <tr>
                <th bgcolor=#E0E0FF><font size=4 color=#2020ff>User name</font></th>
                <td bgcolor=#E0E0FF align=center><input type="text" name="username" id="username" size="30"></td>
            </tr>
            <tr>
                <th bgcolor=#E0E0FF><font size=4 color=#2020ff>Password</font></th>
                <td bgcolor=#E0E0FF align=center><input type="password" name=" password" id="password" size="30"></td>
            </tr>
            <tr>
                <td bgcolor=#E0E0FF colspan=2 height=30 align=right><input type="submit" name="login" value="&nbsp;&nbsp;Login&nbsp;&nbsp;">&nbsp;&nbsp;<input type="reset" name="reset" value="&nbsp;&nbsp;Reset&nbsp;&nbsp;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href=register.php class=links>Register</a>&nbsp;&nbsp;&nbsp;&nbsp;</td>
            </tr>
            <tr>
                <td bgcolor=#E0E0FF colspan=2 height=30 align=center><font size=3 color=#ff0000>User name or Password wrong!</font></td>
            </tr>
            </table>
            </form>
            </body>
            </html>
            <?php
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-09T17:21:50.780

您应该对该代码进行一些更改...

1.  你不需要做`!isset()`and `empty()`: 只会`empty()`做
2.  您不应该为登录页面复制 HTML - 要么将其放入变量中，要么`include()`使用 PHP 将错误消息放入其中。
3.  您正在使用已弃用的 HTML `<center>`，例如`<font>`- 用 CSS 替换它们
4.  在javascript中，`submitOK="false";`应该是`return true;`
5.  `name=" password"`应该是`name="password"`（属性中的空格应该被修剪，但我不想依赖它。
6.  您将原始输入放入 mysql 查询中，使自己容易受到 sql 注入的影响。利用[`mysql_escape_string()`](http://www.php.net/mysql_escape_string)
7.  不使用`session_register`，`$_SESSION`改为使用。
8.  标头位置实际上应该是规范的 URL（以 http:// 开头），尽管我知道的每个浏览器都接受相对 URL。
9.  可用性 - 取出重置按钮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T17:33:45.827

出于兴趣，该表单生成的 HTML 是什么样的？

作为

```
action="<?php $_SERVER['PHP_SELF'];?>" 
```

应该

```
action="<?php echo $_SERVER['PHP_SELF'];?>" 
```

否则您可能会发现生成的 html 是 action="" 在这种情况下，它可能无法按预期处理表单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T17:15:46.783

你有很多代码来实现你想要实现的目标。不要试图听起来居高临下，我建议回到绘图板，谷歌'php用户身份验证'或类似的，看看是否有一些你可以遵循的简单示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T17:53:45.350

当您遇到脚本问题时，有时如果去掉所有多余的绒毛会更容易。试试下面的代码。我已经清理了一点。

我还没有测试它，但我仍然认为这是一个进步。

```
<?php

    session_start();

    /* If the form has been submitted. */
    if (!empty ($_POST))
    {

        /* If there is not missing data. */
        if (empty ($_POST['username']) && empty ($_POST['password']))
        {
            /* Connect to the database server. */
            $connection = mysql_connect ("localhost", "root") or die ("Error: can not connect to the database.");

            /* Select the database. */
            mysql_select_db ("login") or die ("Error: Can not select the database.");

            /* Make the query. */
            $login_check = mysql_query ("SELECT * FROM users WHERE username = '" . mysql_escape_string ($_POST['username']) . "' AND password = '" . mysql_escape_string ($_POST['password']) . "' LIMIT 1") or die ("MySQL query error.");

            /* If there is a row returned. */
            if (mysql_num_rows ($login_check) > 0)
            {
                echo 'The username and password have matched.';
                exit;
            }

            /* There were no rows returned. */
            else
            {
                $_SESSION['login_error'] = 'Incorrect username or password.';
            }
        }

        /* There's missing data. */
        else
        {
            $_SESSION['login_error'] = 'Both the username and password are required.';
        }
    }

?>  
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Testing Login Form</title>
    </head>
    <body>
        <form name="login" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
            <p>User name: <input type="text" name="username" id="username"></p>
            <p>Password: <input type="password" name="password" id="password"></p>
            <p><input type="submit" name="login" value="Login"></p>
            <?php

                if (!empty ($_SESSION['login_error']))
                {
                    echo '<p>', htmlspecialchars ($_SESSION['login_error'], ENT_QUOTES), '</p>';
                    unset ($_SESSION['login_error']);
                }

        ?>
        </form>
    </body>
</html> 
```

请考虑 RoBorg 输入的所有内容。这是非常好的建议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T17:17:17.967

```
<input type="password" name=" password" id="password" size="30"> 
```

您在密码字段的名称中有一个空格，因此该值存储在 $_POST['password'] 中，而不是 $_POST['password']

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T17:27:57.773

您可能还想考虑如果我输入这样的密码会发生什么

```
' or 1=1 or ' 
```

学习清理所有来自外部的输入！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-02T14:59:59.930

" onSubmit="返回验证()">

这一行给你一个循环问题，它会一次又一次地进入自我页面，而不是那个代码，你应该使用简单的代码，只需在页面中创建一个小函数提交验证。

# c# - 通过 C# 互操作执行 VBA 宏？

> ID：428842
> 
> 赞同：3
> 
> 时间：2009-01-09T16:56:25.747
> 
> 标签：c#, vba, interop

只是想知道是否有人可以建议我为什么会出错？我目前正在尝试通过调用互操作公开的 Application.Run 方法在工作簿中执行宏。

它目前正在抛出以下 COM 异常：

```
{System.Runtime.InteropServices.COMException (0x800A03EC): Cannot run the macro Macro1'. 
The macro may not be available in this workbook or all macros may be disabled. 
```

我已将包含的工作簿放在受信任的位置，将所有安全设置设置为其最小值，并以受信任的方式访问我的对象模型。我完全没有想法，到目前为止，谷歌让我失望了！

有没有人这样做过，或者你能建议我可以尝试的任何东西吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-12T09:50:04.030

事实证明，实际上有两个同名的宏被注入到工作簿中。上面的异常转换为 VBA 中的“编译错误：检测到不明确的名称”错误 - 我应该直接进入 VBA 来查看这个，而不是假设互操作发生了一些奇怪的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T21:34:50.210

如果宏存储在个人工作簿中，您可能必须引用工作簿名称：personal.xls!macroname

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-13T22:43:09.467

虽然这已经得到解答，但我有相同的症状。[最后，我用微软](http://support.microsoft.com/kb/968494)的这个hotfix解决了这个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-31T01:41:55.317

我遇到了同样的问题，宏存储在一个名为“MainModule”的“模块”中。

我试过

```
App.Run("Abc.xlsm!CalcSomething");

App.Run("MainModule!CalcSomething");

App.Run("Abc.xlsm.CalcSomething");

App.Run("MainModule.CalcSomething");

App.Run("CalcSomething); 
```

没有任何效果。

# asp.net - 奇怪的间歇性 SQL 连接错误，重新启动时修复，3-5 天后恢复 (ASP.NET)

> ID：428846
> 
> 赞同：3
> 
> 时间：2009-01-09T16:57:39.643
> 
> 标签：asp.net, sql-server, connection, named-pipes

出于某种原因，每 3-5 天，我们的 Web 应用程序失去打开与数据库的连接的能力，并出现以下错误，奇怪的是我们所要做的就是重新启动容器（它是一个 VPS）并恢复它到正常功能。然后几天后，它再次发生。有没有人遇到过这样的问题？我在半夜从我们的 AD 服务器注意到安全日志中有很多匿名登录，这很奇怪，还有一些来自阿姆斯特丹的 IP。我不确定如何说出它们的确切含义，或者它是否相关。

```
Server Error in '/ntsb' Application.
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.Data.SqlClient.SqlException: A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)

Source Error:

Line 11:        
Line 12:        
Line 13:        dbConnection.Open()
Line 14:        
Line 15:        

Source File: C:\Inetpub\wwwroot\includes\connection.ascx    Line: 13

Stack Trace:

[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +248
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) +245
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity, SqlConnection owningObject) +475
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnection owningObject) +260
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(String host, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, Int64 timerStart) +2445449
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +2445144
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +354
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +703
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +54
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +2414696
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +92
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +1657
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +84
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +1645687
   System.Data.SqlClient.SqlConnection.Open() +258
   ASP.includes_connection_ascx.getConnection() in C:\Inetpub\wwwroot\includes\connection.ascx:13
   ASP.default_aspx.Page_Load(Object sender, EventArgs e) in C:\Inetpub\wwwroot\Default.aspx:16
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +25
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +42
   System.Web.UI.Control.OnLoad(EventArgs e) +132
   System.Web.UI.Control.LoadRecursive() +66
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2428

Version Information: Microsoft .NET Framework Version:2.0.50727.3053; ASP.NET Version:2.0.50727.3053 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T17:06:33.853

允许与 sql server 的连接数是固定资源。听起来您在某个地方的代码没有正确关闭它的连接，并且在一段时间之后您无法打开任何新的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-19T15:52:39.657

我们最近在生产环境中遇到了类似的问题，经过多轮“调试诊断”和转储分析，我们得出的结论是，很大程度上是碎片化的大型对象堆导致了这种情况。参考[http://msdn.microsoft.com/en-us/magazine/cc534993.aspx](http://msdn.microsoft.com/en-us/magazine/cc534993.aspx)。简而言之，您的应用程序可能内存不足并且没有足够的连续空间来打开连接。您可以使用 VMMap [http://technet.microsoft.com/en-us/sysinternals/dd535533](http://technet.microsoft.com/en-us/sysinternals/dd535533)来识别可用空间。您是否定期回收您的 AppPools？AppPool 回收会拆除应用程序并释放任何帮助内存，从而解决任何相关问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T17:01:45.750

您是否尝试过使用 perfmon 和分析器（跟踪）收集基本信息，以查看建立了多少连接、内存统计信息和其他有趣的事情？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T19:19:04.943

“我在半夜从我们的 AD 服务器注意到安全日志中有很多匿名登录，这很奇怪，还有一些来自阿姆斯特丹的 IP。”

听起来好像你可能有人试图闯入你的系统，也许这些是没有关闭的连接。我喜欢使用 perfmon 和 profiler 来查看问题的建议。

# javascript - 使用JS解析xml字符串

> ID：428858
> 
> 赞同：0
> 
> 时间：2009-01-09T17:00:00.153
> 
> 标签：javascript, xml

我有一个 XML 字符串，其中`Val.responseText`给了我

```
<NewDataSet>
  <Table>
    <FieldID>21</FieldID>
    <TableName>F003v001</TableName>
    <FieldName>Grade</FieldName>
    <DisplayField>Grade</DisplayField>
    <FieldType>text</FieldType>
  </Table>
</NewDataSet> 
```

我打电话`FillTable(sVal.responseXML.documentElement);`

```
function FillTable(sResponse) {

    var preXML = sResponse;

    // code for IE
    if (window.ActiveXObject) {
        var doc = new ActiveXObject("Microsoft.XMLDOM");
        doc.async = "false";
        doc.loadXML(preXML);
    }
    // code for Mozilla, Firefox, Opera, etc.
    else {
        var parser = new DOMParser();
        var doc = parser.parseFromString(preXML, "text/xml");
    }

    // documentElement always represents the root node
    var x = doc.documentElement;

} 
```

现在我想解析每个节点并填充一个数据网格。谁能帮我解析节点？

我如何获得`fieldid`, `tablename`,的值`displayfield`？

我试过`NodeList = doc.documentElement.selectNodes("Table")`但`nodelist.length`给了我零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T17:26:26.573

[http://www.w3schools.com/Dom/dom_methods.asp](http://www.w3schools.com/Dom/dom_methods.asp)

使用您创建的 doc 变量，而不是 documentElement，然后您可以在其上使用这些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T17:33:31.257

您可能会发现这也很有帮助：

[http://www.hiteshagrawal.com/javascript/javascript-parsing-xml-in-javascript](http://www.hiteshagrawal.com/javascript/javascript-parsing-xml-in-javascript)

# domain-driven-design - 您的域模型对象中包含什么以及您的服务中包含什么？

> ID：428859
> 
> 赞同：6
> 
> 时间：2009-01-09T17:01:01.477
> 
> 标签：domain-driven-design

在一个领域驱动的设计中，你要使用一个非贫血的领域模型，你如何决定在你的领域对象和面向服务的方法中实现什么？

**编辑：我用一个例子问了这个不同的方式，**[在这里](https://stackoverflow.com/questions/437067/domain-objects-and-services)得到了更好的答案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T17:13:40.750

DDD 的理念是域模型包含您的数据和大部分业务逻辑。服务通常处理这些结构的持久性。

然后是所有中间情况，其中业务流程由多个步骤组成，这些步骤总是更改/修改域对象。您通常使用服务来实现某些过程。因此，通常您会使用服务的结果更新域对象。您*永远不要*让域对象实现自己调用服务！

所以看到这样的代码很常见：

```
if (order.isValidForPurchase() && orderValidatorService.isValidOrder( order))
    orderService.order( order) 
```

仅仅是因为订单对象知道部分真相，而有些需要知道的外部数据`orderValidatorService`。可以说这两行代码也可以在`orderService.order`方法内部。

我认为研究这些过程中存在多少领域对象总是值得的；有时，通过提出比您最初想象的更多的概念可以获得很多。它实际上是业务流程状态和对象模型的交集。通常 DDD 模型倾向于从过于结构化的视图中捕获领域，IMO 忽略了核心流程有点过分。因此，如果您过于结构化，我认为您制作了一个`Order`对象。如果您添加流程，您可能会制作`ShoppingCartOrder`、`UnshippedOrder`、和. 这有时也使您的服务集成更简单。`ShippedOrder``BilledOrder``HistoricalOrder`

# asp.net - 如何连接到 ASP.NET 动态数据的 UI 渲染“引擎”？

> ID：428860
> 
> 赞同：-1
> 
> 时间：2009-01-09T17:01:13.303
> 
> 标签：asp.net, asp.net-mvc, dynamic-data

我使用通过 MetadataType 属性附加到我的模型类的元数据类装饰了我的模型。我有一些使用 Range 属性、Required 属性等*以及我创建的一些自定义属性。*

现在我想连接到动态数据框架的渲染引擎（或任何它被称为的引擎），并能够根据*我的自定义属性*以及标准 System.ComponentModel.DataAnnotations 属性更改 UI 的渲染方式。

另外，我可能想使用 ASP.NET MVC，所以请记住这一点。

我怎么做？如果您不想冗长地解释细节，将我指向链接会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-09T17:41:37.137

有一个用于 ASP.NET MVC 的动态数据项目，但我认为它几乎处于搁置状态：

[http://www.codeplex.com/aspnet/Release/ProjectReleases.aspx?ReleaseId=15459](http://www.codeplex.com/aspnet/Release/ProjectReleases.aspx?ReleaseId=15459)

我不久前看了它，它部分有效，但我认为它不适用于最新版本。我认为最终他们会把所有的东西都放在一起，但这需要一些时间。我现在要做的是我有一些帮助类来读取元数据，例如显示必填字段，但我没有使用动态数据的完整呈现。您可以像这样提取元数据：

```
public static MetaColumn GetColumn(Type t, string columnName)
{
  MetaModel model = new MetaModel();
  MetaTable table = model.GetTable(t);
  MetaColumn column = table.GetColumn(columnName);
  return column;
}

public static string GetDisplayName(Type t, string columnName)
{
  MetaColumn column = GetColumn(t, columnName);
  return column.DisplayName;
} 
```

现在我只使用一些元数据。想知道你是否想出更多的东西。

# jquery - 浮动太右

> ID：428862
> 
> 赞同：1
> 
> 时间：2009-01-09T17:01:17.843
> 
> 标签：jquery, css, internet-explorer-7, internet-explorer-6, css-float

我有一个记录管理 Web 应用程序，它在一个屏幕上显示主记录，AJAXes 将编辑器动态构建到编辑器 div 中，我使用 JQuery 使其可拖动。这样可行。

尽管 div 不是一个窗口，但我认为让它更像一个窗口可能是个好主意，所以我编写了一个“关闭”按钮。结构如下所示：

```
<div id="editor">
  <div id="draghandle" />
  <div id="closebutton" />
  <div id="editorbody" />
</div> 
```

Editorbody 是可变尺寸的，具体取决于人们试图输入的内容。

Draghandle 的宽度设置为编辑器的 100%。Closebutton 在 CSS 中设置为`float:right`.

我的问题是，在 IE6 和 IE7 中，关闭按钮浮动得太靠右了。无论我将编辑器 div 拖到哪里，它总是靠在窗口的右边缘。在 Firefox 和 Safari 中，它看起来像我预期的那样 - 窗口与 editorbody 一样宽，而 closebutton 位于右上角。

我并不是特别喜欢 float:right，只是想寻找一种方法来设置 CSS，它可以在所有浏览器中为我提供相同的结果。有任何想法吗？

### “截图”

这是我想在 jsbin 上做的一个模型（谢谢，redsquare）

[示例代码](http://jsbin.com/ikaka "示例代码")

我正在处理法律敏感信息，因此我无法提供该应用的屏幕截图。然而，我拍了一些照片，把文字和界面挡住了，只留下了窗口结构。

[它在 IE7 中的外观](http://i278.photobucket.com/albums/kk93/Glazius_bucket/InIE7.png "它在 IE7 中的外观")

[它在 Firefox 3 中的外观](http://i278.photobucket.com/albums/kk93/Glazius_bucket/InFirefox.png "它在 Firefox 3 中的外观")

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-13T16:06:48.700

作为记录，解决此问题的方法是将关闭按钮的 CSS 从

```
float: right; 
```

到

```
position: absolute;
right: 5px;
text-align: right; 
```

这会在 IE 中产生正确的结果，并且对内部表单字段进行一些填充，无需担心重叠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T18:54:34.260

您可能想考虑只使用[JQuery 对话框](http://docs.jquery.com/UI/Dialog)，因为它的预制和样式已经跨平台工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T17:03:50.053

有时需要 CSS hack：

```
* + html #editor #closebutton /* IE7 */, * html #editor #closebutton /* IE6 */ {margin-right: 100px;} // insert whatever value that fits here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T18:54:18.473

对于 IE 特定的 css hack，您可以执行以下操作：

```
#divId {    
   margin-right: 0; /*Normal styles for all browsers*/    
  *margin-right: 100px; /*The asterisk allows only for IE6 AND IE7 to read this*/        
  _margin-right: 90px; /*The underscore allows only IE6 to read this style*/    
} 
```

只需确保将星号和下划线 hack 放置在正常（有效）css 样式之后。

# asp.net - .net Viewstate 可能停止工作的可能情况有哪些？

> ID：428870
> 
> 赞同：1
> 
> 时间：2009-01-09T17:03:29.880
> 
> 标签：asp.net, vb.net, viewstate

考虑以下代码：

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init
        If Page.IsPostBack Then
            If ViewState("test") IsNot Nothing Then
                Response.Write((ViewState("test").ToString))
            Else 
                Response.Write("Viewstate is empty.")
            End If
        Else
            ViewState("test") = "viewstate is working."
        End If
    End Sub 
```

此代码不适用于我的应用程序中的特定页面。在 Page 指令中没有关闭 Viewstate。我不知道发生了什么事。：\

哦，我刚刚想通了。看看你是否注意到它。

> .<

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-09T17:22:24.867

想通了，有人改变了 Page_Load 事件来处理 Page.Init

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Init 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T17:06:11.437

您也可以从配置文件中关闭视图状态。

```
<configuration>
  <appSettings>
    <Pages EnableViewState="false" />
  </appSettings>
</configuration> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T17:12:55.790

您确定要回发吗？

它写“视图状态为空”吗？还是什么都没有？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T17:24:12.727

由于您没有回答自己的帖子...

我会说您正在检查 IsPostBack 并在错误的阶段访问 ViewState ：

```
Handles Me.Init 
```

那应该是

```
Handles Me.Load 
```

对？

* * *

对于在 ASP.NET 中调试此类令人头疼的问题，我还想补充一点，跟踪通常会很有帮助。

您可以通过将其添加到 web.config 来启用跟踪：

```
<configuration>
  <system.web>
    <trace enabled="true" pageOutput="true" requestLimit="40" localOnly="false"/>
  </system.web>
</configuration> 
```

这会将堆栈跟踪和诸如此类的附加到每个页面的末尾，因此您可以跟踪执行并（希望）找出问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-08-30T06:37:12.697

就我而言，我正在将数据写入 Page_Init 上的 ViewState。此数据在 Page_Load 和 Page_PreRender 上显示良好，但在生命周期结束时并未持久保存到页面。回发后 ViewState 为空。

**因此，请确保在 Page_Init 之后写入 ViewState。**

# c - 如何在 C 中播放 MP3 文件？

> ID：428884
> 
> 赞同：36
> 
> 时间：2009-01-09T17:08:40.073
> 
> 标签：c, mp3

我正在寻找在 C 中播放 MP3 文件的最简单方法。我正在寻找一个库，我可以在其中调用文件名上的函数，或者一个可以运行和退出的可执行文件。请建议。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-01-09T17:55:00.573

使用[FMOD](http://www.fmod.org/download/)（跨平台），这应该很简单：

```
#include <conio.h>
#include "inc/fmod.h"

FSOUND_SAMPLE* handle;

int main ()
{
   // init FMOD sound system
   FSOUND_Init (44100, 32, 0);

   // load and play mp3
   handle=FSOUND_Sample_Load (0,"my.mp3",0, 0, 0);
   FSOUND_PlaySound (0,handle);

   // wait until the users hits a key to end the app
   while (!_kbhit())
   {
   }

   // clean up
   FSOUND_Sample_Free (handle);
   FSOUND_Close();
} 
```

作为旁注，我建议您使用 C++ 而不是 C。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-11T20:01:39.367

[BASS DLL](http://www.un4seen.com/)非常易于使用，并且可能会满足您的需求。不过，它仅可免费用于非商业用途。

如果您需要更多控制，您将需要一个编解码器（我更喜欢[libMad](http://www.underbit.com/products/mad/)）和一些声音输出 API，如 Windows 或 ALSA 或 Linux 上的 DirectSound（或任何 Linux 人本周使用的声音）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T17:32:49.167

我不知道这是否是“最简单的方法”，但你可以看看 SDL（连同 SDL_sound）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-11T19:57:35.833

在 Win32 上，您不需要任何库。使用标准 Win32 api（mp3 是原生的）

参见 Adv. Win32 api 新闻组：news://comp.os.ms-windows.programmer.win32 这是一个常见问题解答。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-09T17:41:23.440

如果您在 Windows 或 OSX 上，我推荐 BASS ( [http://www.un4seen.com/bass.html](http://www.un4seen.com/bass.html) )

您可以下载该库并查看代码示例以开始使用。C 目录中的“竞赛”示例是一个很好的起点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-09T18:06:36.213

如果你可以使用 C++ 并且如果你在 Windows 平台上工作而不是使用 [WMp3](http://www.inet.hr/~zcindori/mp3class/)

该库易于使用，可让您播放、暂停、查找 mp3 文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T20:37:52.243

> 或者有人已经写过的东西会运行并退出。

您可以使用[mpg123](http://www.mpg123.de/)（或它的定点端口，[mpg321](http://mpg321.sourceforge.net/)）

```
mpg123 <mp3file> 
```

将播放一个 mp3 文件并退出。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-30T11:53:56.927

[mpg123](http://www.mpg123.org/)有一个通用的远程接口，您可以通过使用 -R 选项启动可执行文件来访问它。然后，您可以通过 fifo 管道或子进程的标准输入发送命令（例如加载、暂停等）。如果不出意外，手动调试和测试很容易。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-20T19:31:46.353

到这里：

[http://code4k.blogspot.com/2010/05/playing-mp3-in-c-using-plain-windows.html](http://code4k.blogspot.com/2010/05/playing-mp3-in-c-using-plain-windows.html)

该网站有一个 zip，您可以在其中查看此人如何生成 mp3 播放器的代码。

您还可以查看： http: [//www.codeguru.com/cpp/gm/directx/directshow/article.php/c19079/Simple-C-MP3-Player-Class.htm](http://www.codeguru.com/cpp/g-m/directx/directshow/article.php/c19079/Simple-C-MP3-Player-Class.htm)

或者

[http://www.ucancode.net/Visual_C_Control/Play-MP3-File-VC-Sample-Player.htm](http://www.ucancode.net/Visual_C_Control/Play-MP3-File-VC-Sample-Player.htm)

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2019-02-26T15:55:33.620

基本上你可以使用 windows.h 头文件

```
#include <windows.h>
void main()
{
    //replace music with your filename
    system("start music.mp3");
} 
```

# python - 如何获取网络上文件的创建日期（使用 Python）？

> ID：428895
> 
> 赞同：3
> 
> 时间：2009-01-09T17:11:15.357
> 
> 标签：python, http

我有一个依赖于客户端从网站下载的文件的 python 应用程序。

该网站不受我的控制，也没有 API 来检查文件的“最新版本”。

有没有一种简单的方法可以通过 URL 访问文件（在 python 中）并检查它的日期（或大小），而不必每次都将它下载到客户端机器上？

**更新：**感谢那些提到“最后修改”日期的人。这是要查看的正确参数。

我想我没有很好地说明这个问题。如何从 python 脚本执行此操作？我想申请检查文件，然后在（最后修改日期<当前文件日期）的情况下下载它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-09T17:29:52.497

没有可靠的方法来做到这一点。如您所知，该文件可以由 Web 服务器动态创建，“这个文件有多旧”这个问题没有意义。网络服务器可能会选择提供 Last-Modified 标头，但它可以告诉您它想要的任何内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-10T17:44:31.327

考虑到 'last-modified' 可能不存在：

```
>>> 从 urllib 导入 urlopen
>>> f=urlopen('http://google.com/')
>>> i=f.info()
>>> i.keys()
['set-cookie', 'expires', 'server', 'connection', 'cache-control', 'date', 'content-type']
>>> i.getdate('日期')
(2009, 1, 10, 16, 17, 8, 0, 1, 0)
>>> i.getheader('日期')
'格林威治标准时间 2009 年 1 月 10 日星期六 16:17:08'
>>> i.getdate('最后修改')
>>>

```

现在你可以比较：

```
if (i.getdate('last-modified') 或 i.getheader('date')) > current_file_date:
  打开（'文件'，'w'）.write（f.read（））

```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-09T17:13:09.333

检查[Last-Modified](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.29)标头。

编辑：尝试[urllib2](http://www.voidspace.org.uk/python/articles/urllib2.shtml#introduction)。

编辑 2：这个[简短的教程](http://www.artima.com/forums/flat.jsp?forum=122&thread=15024)应该给你一个很好的感觉来实现你的目标。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T17:38:47.767

在 HTTP 1.1 中，[Content-Disposition 标头字段](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1)旨在将此类信息保存在`creation-date`参数中（请参阅[RFC 2183](http://www.ietf.org/rfc/rfc2183.txt)）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-01T16:46:20.843

也许是对这个问题的更新答案......例如，我发现这段代码适用于 excel 文件。很确定这将取决于服务器决定提供什么。

```
from urllib.request import urlopen
URL = 'url'
with urlopen(URL) as f:
    print(dict(f.getheaders())['Last-Modified'])
    # Remove the ['Last-Modified'] if you want to see what is in the header 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T18:50:27.467

我构建了一个基于 etags 的工具。听起来很像你描述的：

[pfetch](http://github.com/dustin/pfetch)是一个扭曲的工具，它可以按计划执行此操作，并且可以使用许多 URL 运行并在更改（下载后）时触发事件。这很简单，但仍然可能比您想要的更复杂。

[但是，此代码](http://github.com/dustin/snippets/tree/master/python/net/http/fetch.py)正是您所要求的。

所以，任君挑选。:)

# c# - IsNullOrEmpty 错误是否已在 .NET 3.0 或更高版本中修复？

> ID：428896
> 
> 赞同：3
> 
> 时间：2009-01-09T17:11:18.383
> 
> 标签：c#, clr, jit, nullreferenceexception

有谁知道 IsNullOrEmpty 错误是否在 3.0 或更高版本中修复？我目前在 2.0 中遇到了 (NullReferenceException) 错误，并且我找到了说明应该在下一个版本中修复的文档，但没有明确的答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-09T17:20:15.463

我找到了一些关于此事的[信息：](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty(VS.80).aspx)

> 此错误已在 Microsoft .NET Framework 2.0 Service Pack 1 (SP1) 中得到修复。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T17:25:24.003

适用于 .NET 3.5SP1。给想尝试的人的测试程序（主要取自错误报告）：

```
using System;

class Test
{
    static void Main(string[] args)
    {
      Console.WriteLine("starting");
      ShowBug(null);
      Console.WriteLine("finished");
      Console.ReadLine();
    }

    static void ShowBug(string x)
    {
        for (int j = 0; j < 10; j++)
        {
            if (String.IsNullOrEmpty(x))
            {
                //TODO:
            }
        }
    }
} 
```

从命令行使用 /o+ /debug- 编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T17:25:47.870

[Microsoft 已在 Connect 站点上](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=113102&wa=wsignin1.0)报告此错误已修复。如果您仍然可以重现该问题，我鼓励您重新提交回归。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T17:27:28.087

我认为这也取决于您在哪里遇到此错误。例如，如果您在表适配器中遇到它，那是因为属性本​​身被设置为在值为 null 时返回该异常。

# java - 需要从 webapp 执行 shell 脚本并在页面中显示控制台输出

> ID：428901
> 
> 赞同：0
> 
> 时间：2009-01-09T17:13:40.127
> 
> 标签：java, web-applications, shellexecute

我正在寻找可以帮助我将其集成到 Struts2/Spring 应用程序中的 java 示例或库。许多构建系统（例如 Luntbuild 或 Hudson）都具有此功能，我想在尝试从其中一个中挖掘它之前，我想我会问是否有人知道一个独立的示例。我也浏览了 Quartz 作业调度框架，但我还没有找到 UI 钩子。我只需要从包含 JSP 的文件中读取吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T17:39:02.400

如果我了解您要做什么，这是Java 中的一种方式。这将执行 ls 命令，然后捕获 shell 输出并将其写回 System.out。

```
public class TestShell {
    public static void main(String[] args)
    {
        try
        {
                String cmd = "ls\n";
                Process p = Runtime.getRuntime().exec(cmd);
                p.waitFor();
                BufferedReader r = new BufferedReader(new InputStreamReader(p.getInputStream()));
                while(r.ready()) {
                    System.out.println(r.readLine());
                }

        }
        catch (Throwable t)
                {
                t.printStackTrace();
        }
    }
} 
```

# c# - 为什么 .NET 中的 Random.Next 方法不支持浮点数/双精度数？

> ID：428908
> 
> 赞同：0
> 
> 时间：2009-01-09T17:15:50.310
> 
> 标签：c#, .net, math

所以也许我想将 -1.0 和 1.0 之间的值作为浮点数。必须编写此代码并使用扩展方法 IMO 将其固定在顶部是很笨拙的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-01-09T17:17:50.163

还有一种[`.NextDouble()`](http://msdn.microsoft.com/en-us/library/system.random.nextdouble.aspx)方法几乎可以完全满足您的要求 - 只需 0 到 1.0 而不是 -1.0 到 1.0。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-01-09T18:04:43.423

```
public static double NextDouble(this Random rnd, double min, double max){
    return rnd.NextDouble() * (max - min) + min;
} 
```

致电：

```
double x = rnd.NextDouble(-1, 1); 
```

获取范围内的值`-1 <= x < 1`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T17:22:05.553

因为大多数时候，我们想要一个范围内的 int，所以我们提供了方法来做到这一点。许多语言只支持返回 0.0 和 1.0 之间的双精度值的随机方法。C# 在 .NextDouble() 方法中提供了此功能。

这是一个足够体面的设计，因为它使常见的事情变得容易（掷骰子 - myRandom.Next(1,7);）和其他一切皆有可能。- myRandom.NextDouble() * 2.0 - 1.0;

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-09T17:35:18.163

您可以使用[Random.NextDouble()](http://msdn.microsoft.com/en-us/library/system.random.nextdouble.aspx)方法，该方法将产生一个介于 0.0 和 1.0 之间的随机值，正如@Joel_Coehorn 所建议的那样

我只想补充一点，将范围扩展到 -1.0 和 1.0 是一个简单的计算

```
var r = new Random();

var randomValue = r.NextDouble() * 2.0 - 1.0 
```

或者概括一下，将`NextDouble()`结果扩展到任何范围（a，b），您可以这样做：

```
var randomValue = r.NextDouble() * (b - a) - a 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T17:38:42.150

在旁注中，我不得不指出，最后，框架中的随机数生成算法不是笨拙的（如 cstdlib 的`rand()`），而是一个很好的实现（Park&Miller，IIRC）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T17:19:11.190

我见过的绝大多数随机数的使用（事实上我见过的，虽然显然在 3 年的编程中我没见过太多）是在指定范围内生成随机整数。

因此 Random.Next 对我来说似乎很方便。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-09T17:27:06.947

> 编写这个并使用扩展方法将其固定在顶部是很笨拙的

不是真的 - 扩展方法很简洁，我很高兴这个功能可以用于这样的事情。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-09T17:46:33.977

这种方法添加起来并不难，似乎是扩展方法的完美使用。

```
public double NextSignedDouble(this Random r)
{
    return (r.Next(0, 2) == 0) ? r.NextDouble() : (r.NextDouble() * -1);
} 
```

# sql-server-2005 - SQL Server 2008 自动生成更改脚本遗留问题

> ID：428909
> 
> 赞同：11
> 
> 时间：2009-01-09T17:16:43.910
> 
> 标签：sql-server-2005, sql-server-2008, change-management

我们在 SQL Server Management Studio (SSMS) 中启用“工具 ==> 选项 ==> 设计器 ==> 表和数据库设计器 ==> 自动生成更改脚本”。在更改我们的数据库架构时，我们保存了脚本，并且由于我们在运行我们的应用程序的所有机器上安装了数据库迁移工具，我们可以在下一次软件版本更新期间同步架构。

我们最近将我们的开发副本和一些生产服务器切换到 SQL Server 2008。但是，我们仍然有几十个 SQL Server 2005 在野外运行我们的软件。我们暂时不打算升级这些。

问题很简单。SSMS 生成的脚本并不总是适用于 SQL Server 2005。SMSS 正在向命令中添加额外的元数据（例如，关于锁升级）。要使用 2005 制作我们的脚本，我们必须手动删除额外的信息，否则脚本不会运行。

有没有办法配置 SSMS 以生成与 SQL Server 2005 兼容的脚本？是否有工具可以自动摆脱额外的 SQL，或者至少让我们知道哪些文件有问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-11T00:59:57.843

在 SQL Server management studio 2008 中转到工具 -> 选项 -> SQL Server 对象资源管理器 -> 脚本并选择“服务器版本脚本”并将其更改为 SQL Server 2005。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-02T22:21:43.663

更改选项的推荐解决方案似乎是 corerct 但是它仍然会在我的数据库上生成 ALTER TABLE SET (LOCK_ESCALATION = TABLE) （我什至设置了兼容模式 90）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T00:43:00.750

我还没有使用过 2008 管理工作室，但在以前的每个版本中，您都可以在某处的选项中将脚本设置为特定版本的 SQL Server。

出于类似的原因，我将 2005 管理工作室设置为生成 2000 个兼容脚本。

# sql-server-2005 - 从 SQL Server 2005 (LDAP) 中的 Active Directory 获取描述字段

> ID：428916
> 
> 赞同：2
> 
> 时间：2009-01-09T17:19:28.977
> 
> 标签：sql-server-2005, active-directory, ldap

我唯一无法抓取的`description`字段是我们 AD 中的字段。错误是：

> *无法从链接服务器“ADSI”的 OLE DB 提供程序“ADsDSOObject”获取行的数据。由于符号不匹配或溢出以外的原因，无法转换数据值。*

是否有一些数据类型可以用来处理它试图返回的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-05T21:33:09.170

我猜您的问题是 AD 可以在单个字段中存储多个值（与关系数据库中的第一个规范化规则完全相反）。

不确定您的查询是什么样的 - 但您是否可以尝试将“[0]”索引器添加到描述属性中？

马克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-03-29T12:45:50.973

我`Description`在尝试使用`ADsDSOObject`and时从 AD 获取字段时遇到了同样的问题`ADO`。

`For Each`您必须使用or`Do until ... EOF`类型的语句对值进行交互。

[这是一个很好的例子](http://www.tech-archive.net/Archive/Scripting/microsoft.public.scripting.vbscript/2006-12/msg00200.html)

# java - 如何在 Java 中将日期增加一天？

> ID：428918
> 
> 赞同：638
> 
> 时间：2009-01-09T17:20:09.363
> 
> 标签：java, date

我正在使用这种格式的日期：`yyyy-mm-dd`.

如何将此日期增加一天？

* * *

## 回答 #1

> 赞同：744
> 
> 时间：2009-01-09T17:33:53.907

这样的事情应该可以解决问题：

```
String dt = "2008-01-01";  // Start date
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
Calendar c = Calendar.getInstance();
c.setTime(sdf.parse(dt));
c.add(Calendar.DATE, 1);  // number of days to add
dt = sdf.format(c.getTime());  // dt is now the new date 
```

* * *

## 回答 #2

> 赞同：239
> 
> 时间：2012-03-08T06:26:43.277

更新（2021 年 5 月）：对于旧的、旧的 Java，这是一个非常过时的答案。对于 Java 8 及更高版本，请参阅[https://stackoverflow.com/a/20906602/314283](https://stackoverflow.com/a/20906602/314283)

与 C# 相比，Java 似乎远远落后于八球。该实用程序方法显示了在 Java SE 6 中使用[Calendar.add 方法的方法](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#add%28int,%20int%29)（可能是唯一简单的方法）。

```
public class DateUtil
{
    public static Date addDays(Date date, int days)
    {
        Calendar cal = Calendar.getInstance();
        cal.setTime(date);
        cal.add(Calendar.DATE, days); //minus number would decrement the days
        return cal.getTime();
    }
} 
```

要添加一天，根据所提出的问题，将其称为如下：

```
String sourceDate = "2012-02-29";
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd");
Date myDate = format.parse(sourceDate);
myDate = DateUtil.addDays(myDate, 1); 
```

* * *

## 回答 #3

> 赞同：102
> 
> 时间：2014-01-03T15:08:17.220

# java.time

在 Java 8 及更高版本上，[java.time 包](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)使这非常自动化。（[教程](http://docs.oracle.com/javase/tutorial/datetime/overview/index.html)）

假设`String`输入和输出：

```
import java.time.LocalDate;

public class DateIncrementer {
  static public String addOneDay(String date) {
    return LocalDate.parse(date).plusDays(1).toString();
  }
} 
```

* * *

## 回答 #4

> 赞同：72
> 
> 时间：2012-08-13T12:33:24.273

我更喜欢使用来自 Apache的**DateUtils 。**检查这个[http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/time/DateUtils.html](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/time/DateUtils.html)。它很方便，特别是当您必须在项目中的多个位置使用它并且不想为此编写一个衬垫方法时。

API 说：

> addDays(Date date, int amount) ：将天数添加到返回新对象的日期。

请注意，它返回一个新的 Date 对象，并且不会对前一个对象本身进行更改。

* * *

## 回答 #5

> 赞同：67
> 
> 时间：2009-01-09T17:30:46.143

```
SimpleDateFormat dateFormat = new SimpleDateFormat( "yyyy-MM-dd" );
Calendar cal = Calendar.getInstance();
cal.setTime( dateFormat.parse( inputString ) );
cal.add( Calendar.DATE, 1 ); 
```

* * *

## 回答 #6

> 赞同：55
> 
> 时间：2009-01-09T17:27:26.323

构造一个 Calendar 对象并调用`add(Calendar.DATE, 1);`

* * *

## 回答 #7

> 赞同：47
> 
> 时间：2014-05-28T11:53:48.423

Java 8 添加了一个用于处理日期和时间的新 API。

使用 Java 8，您可以使用以下代码行：

```
// parse date from yyyy-mm-dd pattern
LocalDate januaryFirst = LocalDate.parse("2014-01-01");

// add one day
LocalDate januarySecond = januaryFirst.plusDays(1); 
```

* * *

## 回答 #8

> 赞同：45
> 
> 时间：2009-01-09T18:13:05.093

看看 Joda-Time ( [https://www.joda.org/joda-time/](https://www.joda.org/joda-time/) )。

```
DateTimeFormatter parser = ISODateTimeFormat.date();

DateTime date = parser.parseDateTime(dateString);

String nextDay = parser.print(date.plusDays(1)); 
```

* * *

## 回答 #9

> 赞同：42
> 
> 时间：2010-12-02T14:37:30.207

请注意，此行增加了 24 小时：

```
d1.getTime() + 1 * 24 * 60 * 60 * 1000 
```

但是这条线增加了一天

```
cal.add( Calendar.DATE, 1 ); 
```

在夏令时更改（25 或 23 小时）的日子里，您会得到不同的结果！

* * *

## 回答 #10

> 赞同：35
> 
> 时间：2015-06-29T11:24:40.317

你可以使用简单的 java.util 库

```
Calendar cal = Calendar.getInstance(); 
cal.setTime(yourDate); 
cal.add(Calendar.DATE, 1);
yourDate = cal.getTime(); 
```

* * *

## 回答 #11

> 赞同：26
> 
> 时间：2013-12-10T07:00:07.003

```
Date today = new Date();               
SimpleDateFormat formattedDate = new SimpleDateFormat("yyyyMMdd");            
Calendar c = Calendar.getInstance();        
c.add(Calendar.DATE, 1);  // number of days to add      
String tomorrow = (String)(formattedDate.format(c.getTime()));
System.out.println("Tomorrows date is " + tomorrow); 
```

这将给出明天的日期。`c.add(...)`参数可以从 1 更改为另一个数字以获得适当的增量。

* * *

## 回答 #12

> 赞同：25
> 
> 时间：2017-05-27T06:09:12.770

如果您使用的是**Java 8**，请这样做。

```
LocalDate sourceDate = LocalDate.of(2017, Month.MAY, 27);  // Source Date
LocalDate destDate = sourceDate.plusDays(1); // Adding a day to source date.

DateTimeFormatter formatter = DateTimeFormatter.ofPattern("yyyy-MM-dd"); // Setting date format

String destDate = destDate.format(formatter));  // End date 
```

如果您想使用**SimpleDateFormat**，请这样做。

```
String sourceDate = "2017-05-27";  // Start date

SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");

Calendar calendar = Calendar.getInstance();
calendar.setTime(sdf.parse(sourceDate)); // parsed date and setting to calendar

calendar.add(Calendar.DATE, 1);  // number of days to add
String destDate = sdf.format(calendar.getTime());  // End date 
```

* * *

## 回答 #13

> 赞同：20
> 
> 时间：2017-02-24T20:04:52.473

由于**Java 1.5** [TimeUnit.DAYS.toMillis(1)](https://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/TimeUnit.html)对我来说看起来更干净。

```
SimpleDateFormat dateFormat = new SimpleDateFormat( "yyyy-MM-dd" );
Date day = dateFormat.parse(string);
// add the day
Date dayAfter = new Date(day.getTime() + TimeUnit.DAYS.toMillis(1)); 
```

* * *

## 回答 #14

> 赞同：18
> 
> 时间：2014-09-15T18:15:33.003

```
long timeadj = 24*60*60*1000;
Date newDate = new Date (oldDate.getTime ()+timeadj); 
```

这需要从 oldDate 开始的毫秒数并添加 1 天的毫秒数，然后使用 Date() 公共构造函数使用新值创建日期。此方法允许您添加 1 天或任意数量的小时/分钟，而不仅仅是一整天。

* * *

## 回答 #15

> 赞同：17
> 
> 时间：2018-07-31T06:09:07.267

在 Java 8 中，简单的做法是：

```
Date.from(Instant.now().plusSeconds(SECONDS_PER_DAY)) 
```

* * *

## 回答 #16

> 赞同：14
> 
> 时间：2017-12-26T08:58:24.267

很简单，试着用一个简单的词来解释。获取今天的日期如下

```
Calendar calendar = Calendar.getInstance();
System.out.println(calendar.getTime());// print today's date
calendar.add(Calendar.DATE, 1); 
```

现在通过使用（常量，值）的 calendar.add 方法将此日期提前一天。这里的常量可以是 DATE、小时、分钟、秒等，而 value 是常量的值。就像一天一样，提前常量是 Calendar.DATE，它的值为 1，因为我们想要提前一天的值。

`System.out.println(calendar.getTime());// print modified date which is`明天的日期

谢谢

* * *

## 回答 #17

> 赞同：13
> 
> 时间：2019-02-18T07:49:32.433

```
startCalendar.add(Calendar.DATE, 1); //Add 1 Day to the current Calender 
```

* * *

## 回答 #18

> 赞同：11
> 
> 时间：2015-12-01T08:20:22.293

在 Java 8 中，您可以使用`java.time.LocalDate`

```
LocalDate parsedDate = LocalDate.parse("2015-10-30"); //Parse date from String
LocalDate addedDate = parsedDate.plusDays(1);   //Add one to the day field 
```

您可以`java.util.Date`按如下方式将 in 转换为对象。

```
Date date = Date.from(addedDate.atStartOfDay(ZoneId.systemDefault()).toInstant()); 
```

您可以`LocalDate`按如下方式格式化为字符串。

```
String str = addedDate.format(DateTimeFormatter.ofPattern("yyyy-MM-dd")); 
```

* * *

## 回答 #19

> 赞同：10
> 
> 时间：2019-06-24T15:44:36.733

对于 Java SE 8 或更高版本，您应该使用新的[日期/时间 API](https://www.baeldung.com/java-8-date-time-intro)

```
 int days = 7;       
 LocalDate dateRedeemed = LocalDate.now();
 DateTimeFormatter formatter = DateTimeFormatter.ofPattern("dd/MM/YYYY");

 String newDate = dateRedeemed.plusDays(days).format(formatter);   
 System.out.println(newDate); 
```

如果您需要从 转换`java.util.Date`为`java.time.LocalDate`，您可以使用此方法。

```
 public LocalDate asLocalDate(Date date) {
      Instant instant = date.toInstant();
      ZonedDateTime zdt = instant.atZone(ZoneId.systemDefault());
      return zdt.toLocalDate();
  } 
```

对于 Java SE 8 之前的版本，您可以使用[Joda-Time](https://www.joda.org/joda-time/)

> Joda-Time 提供了 Java 日期和时间类的优质替代品，是 Java SE 8 之前 Java 的事实上的标准日期和时间库

```
 int days = 7;       
   DateTime dateRedeemed = DateTime.now();
   DateTimeFormatter formatter = DateTimeFormat.forPattern("dd/MM/uuuu");

   String newDate = dateRedeemed.plusDays(days).toString(formatter);   
   System.out.println(newDate); 
```

* * *

## 回答 #20

> 赞同：7
> 
> 时间：2015-02-09T13:58:40.597

如果要添加单个时间单位，并且希望其他字段也增加，则可以安全地使用 add 方法。请参见下面的示例：

```
SimpleDateFormat simpleDateFormat1 = new SimpleDateFormat("yyyy-MM-dd");
Calendar cal = Calendar.getInstance();
cal.set(1970,Calendar.DECEMBER,31);
System.out.println(simpleDateFormat1.format(cal.getTime()));
cal.add(Calendar.DATE, 1);
System.out.println(simpleDateFormat1.format(cal.getTime()));
cal.add(Calendar.DATE, -1);
System.out.println(simpleDateFormat1.format(cal.getTime())); 
```

将打印：

```
1970-12-31
1971-01-01
1970-12-31 
```

* * *

## 回答 #21

> 赞同：7
> 
> 时间：2013-03-28T18:49:38.137

Apache Commons 已经有这个 DateUtils.addDays(Date date, int amount) [http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/time/DateUtils.html#addDays%28java .util.Date,%20int%29](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/time/DateUtils.html#addDays%28java.util.Date,%20int%29)您可以使用它，或者您可以使用 JodaTime 以使其更清洁。

* * *

## 回答 #22

> 赞同：7
> 
> 时间：2014-06-16T12:27:55.153

只需在字符串中传递日期和接下来的天数

```
 private String getNextDate(String givenDate,int noOfDays) {
        SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
        Calendar cal = Calendar.getInstance();
        String nextDaysDate = null;
    try {
        cal.setTime(dateFormat.parse(givenDate));
        cal.add(Calendar.DATE, noOfDays);

       nextDaysDate = dateFormat.format(cal.getTime());

    } catch (ParseException ex) {
        Logger.getLogger(GR_TravelRepublic.class.getName()).log(Level.SEVERE, null, ex);
    }finally{
    dateFormat = null;
    cal = null;
    }

    return nextDaysDate;

} 
```

* * *

## 回答 #23

> 赞同：6
> 
> 时间：2009-01-09T17:28:48.270

使用[`DateFormat`](http://java.sun.com/j2se/1.5.0/docs/api/java/text/DateFormat.html)API 将 String 转换为 Date 对象，然后使用[`Calendar`](http://java.sun.com/j2se/1.5.0/docs/api/java/util/Calendar.html)API 添加一天。如果您需要特定的代码示例，请告诉我，我可以更新我的答案。

* * *

## 回答 #24

> 赞同：6
> 
> 时间：2021-01-15T12:30:25.440

试试这个方法：

```
public static Date addDay(int day) {
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(new Date());
        calendar.add(Calendar.DATE, day);
        return calendar.getTime();
} 
```

* * *

## 回答 #25

> 赞同：5
> 
> 时间：2019-05-09T12:36:45.200

其实很简单。一天包含 86400000 毫秒。因此，首先您通过使用从系统获取当前时间（以毫秒为单位） `System.currentTimeMillis()`，然后添加 84000000 毫秒并使用`Date`类生成以毫秒为单位的日期格式。

例子

`String Today = new Date(System.currentTimeMillis()).toString();`

字符串今天将是 2019-05-9

`String Tommorow = new Date(System.currentTimeMillis() + 86400000).toString();`

字符串明天将是 2019-05-10

`String DayAfterTommorow = new Date(System.currentTimeMillis() + (2 * 86400000)).toString();`

字符串 DayAfterTommorow 将是 2019-05-11

* * *

## 回答 #26

> 赞同：4
> 
> 时间：2018-02-27T18:33:46.093

您可以使用“org.apache.commons.lang3.time”中的这个包：

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
 Date myNewDate = DateUtils.addDays(myDate, 4);
 Date yesterday = DateUtils.addDays(myDate, -1);
 String formatedDate = sdf.format(myNewDate); 
```

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2016-02-01T07:50:24.470

如果您使用的是 Java 8，`java.time.LocalDate`并且`java.time.format.DateTimeFormatter`可以使这项工作变得相当简单。

```
public String nextDate(String date){
      LocalDate parsedDate = LocalDate.parse(date);
      LocalDate addedDate = parsedDate.plusDays(1);
      DateTimeFormatter formatter = DateTimeFormatter.ofPattern("yyyy-mm-dd");
      return addedDate.format(formatter); 
} 
```

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2018-11-27T20:11:22.993

让我们澄清一下用例：您想要进行日历算术并以[java.util.Date](https://docs.oracle.com/javase/7/docs/api/java/util/Date.html)开始/结束。

一些方法：

1.  [使用SimpleDateFormat](https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)转换为字符串并返回：这是一个低效的解决方案。
2.  转换为[LocalDate](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html)：您将丢失任何时间信息。
3.  转换为[LocalDateTime](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html)：这涉及更多步骤，您需要担心时区。
4.  [使用Date.getTime()](https://docs.oracle.com/javase/7/docs/api/java/util/Date.html#getTime())转换为纪元：这很有效，但您正在用毫秒计算。

考虑使用[java.time.Instant](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)：

```
Date _now = new Date();
Instant _instant = _now.toInstant().minus(5, ChronoUnit.DAYS);
Date _newDate = Date.from(_instant); 
```

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2021-07-16T17:23:35.840

你可以在一行中做到这一点。

例如增加 5 天

```
Date newDate = Date.from(Date().toInstant().plus(5, ChronoUnit.DAYS)); 
```

减去 5 天

```
Date newDate = Date.from(Date().toInstant().minus(5, ChronoUnit.DAYS)); 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2012-08-14T09:44:50.500

```
Date newDate = new Date();
newDate.setDate(newDate.getDate()+1);
System.out.println(newDate); 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-04-03T21:33:35.613

I think the fastest one, that never will be deprecated, it's the one that go to the core

```
let d=new Date();
d.setTime(d.getTime()+86400000);
console.log(d); 
```

It's just one line, and just 2 commands. It works on Date type, without using calendar.

I always think it's better to work with unix times on code side, and present the date just when it's ready to be shown to the user.

To print a date d, I use

```
let format1 = new Intl.DateTimeFormat('en', { year: 'numeric', month: 'numeric', month: '2-digit', day: '2-digit'});
let [{ value: month },,{ value: day },,{ value: year }] = format1.formatToParts(d); 
```

It sets vars month year and day but can be extended to hours minutes and seconds and can be used also in standard rapresentations depending on country flag.

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2021-07-26T11:44:50.820

在 Kotlin 中，您可以使用这 2 个函数来获取当前日期和未来日期。

```
fun getCurrentDate(): String {
    val currentDate = Calendar.getInstance().time
    val dateFormat = SimpleDateFormat("yyyy-dd-MM", Locale.getDefault())
    return dateFormat.format(currentDate)
}

fun incrementBy(days: Int): String {
    val dateFormat = SimpleDateFormat("yyyy-dd-MM", Locale.getDefault())

    val cal = Calendar.getInstance()
    cal.time = dateFormat.parse(getCurrentDate())
    cal.add(Calendar.DATE, days)

    return dateFormat.format(cal.time)
} 
```

通过调用 getCurrentDate()，输出为

> 2021-26-07

并通过调用 incrementBy(3)，输出为

> 2021-29-07

# linux - 在 Linux 中更改现有进程的所有者

> ID：428920
> 
> 赞同：6
> 
> 时间：2009-01-09T17:21:07.350
> 
> 标签：linux, tomcat, redhat

我想以特权用户身份启动 tomcat（Web 服务器），然后在启动后将其带回给非特权用户。有没有办法以编程方式或一般使用 Linux 来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-09T19:11:38.937

您需要的底层系统调用是`setuid(2)`，但它没有被任何 Java API 公开。

编写一个可以访问它的 JNI 包装器并不难，尽管即使这样，您也需要在 Tomcat 启动代码中找到一个合适的位置，以便在调用`setuid`完成后`bind(2)`调用（那些通常需要根权限）。

按照[geocar](https://stackoverflow.com/users/37507/geocar)的建议，您可以使用`authbind`这样 Tomcat 根本不需要以 root 身份运行。

或者，由于您可能在相关服务器上获得了 root 访问权限，只需在非特权端口上运行 Tomcat，然后使用`iptables`技巧将入站请求从特权端口转发到 Tomcat 实际侦听的端口。有关如何执行此操作的信息，请参阅[此 SO 帖子。](https://stackoverflow.com/questions/277991/linux-how-to-run-a-server-on-port-80-as-normal-user)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-09T18:20:45.280

我知道[kchuid](http://nimh.org/code/kchuid/)*正是*这样做的，虽然它似乎被遗弃了，但看起来并不难更新。

也就是说，我工作的[托管公司](http://www.internetconnection.net/)确实允许（在共享托管包上）用户在端口 80 上运行他们自己的网络服务器（包括 Tomcat）。这是使用名为[authbind](http://packages.debian.org/stable/authbind)的工具完成的，它不需要服务器以 root 身份启动- 但只是让非 root 用户绑定到选定的 IP 地址和选定的端口。

唯一的问题是*默认情况下*[authbind](http://packages.debian.org/stable/authbind)不能与 Java 的网络抽象层一起使用。您将需要禁用 Java 的 IPV6 支持，并可能在您的应用程序中指定要绑定到的*特定IP 地址。*前者可以通过启动 JRE 来完成，但后者是特定于应用程序的。**`-Djava.net.preferIPv4Stack=true`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-09T17:25:21.647

您可以通过系统调用 seteuid ( [http://www.opengroup.org/onlinepubs/009695399/functions/seteuid.html](http://www.opengroup.org/onlinepubs/009695399/functions/seteuid.html) ) 在您自己的应用程序代码中执行此操作，但通过 bash 脚本或其他方式执行此操作，我是不确定。为什么不首先以普通用户的身份启动该过程？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-09T17:23:38.093

虽然一个进程可以放弃自己的特权，但我认为您不能只更改另一个正在运行的进程的用户。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-09T18:01:40.623

你能解释一下你**为什么**要这样做吗？通常，最好定义一个具有所需权限的用户（请参阅[“最小权限原则”](http://en.wikipedia.org/wiki/Principle_of_least_privilege)）并以该用户身份运行它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-09T18:49:59.603

您可以创建一个单独的程序，该程序以 root 权限启动（例如通过具有二进制 setuid），执行需要权限的工作，使用 setuid 删除权限，最后执行 tomcat。

根据您要解决的问题，这可能是也可能不是解决方案。例如，如果您需要以更高的优先级运行服务器，这将起作用。

# c# - Winforms 以“未处理的异常”毫不客气地退出

> ID：428924
> 
> 赞同：3
> 
> 时间：2009-01-09T17:22:15.710
> 
> 标签：c#, .net, winforms, exception

程序弹出其中一个框，说发生了未处理的异常，应用程序必须退出。我得到解决问题的唯一线索是事件日志中的这个：

> 事件类型：错误事件源：.NET 运行时 2.0 错误报告事件类别：无事件 ID：5000 日期：2009 年 1 月 9 日时间：上午 8:47:44 用户：不适用计算机：DADIEHL 描述：事件类型 clr20r3，P1 crm.client.exe、P2 1.0.1.0、P3 49667f61、P4 mscorlib、P5 2.0.0.0、P6 471ebc5b、P7 c35、P8 59、P9 system.formatexception、P10 NIL。

所以我在program.cs中添加了以下代码：

```
try
{
    Application.Run(new WindowContainer());
}
catch (Exception exc)
{
    new DialogException(exc).ShowDialog();
} 
```

就这样我可以捕捉到任何异常，但用户仍然收到相同的消息，说应用程序必须退出。我无法在我的计算机上重现此问题，因此无法使用调试器缩小范围。有谁知道收集更多信息的方法或有任何想法是什么问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-09T17:31:19.733

很可能是在不同的线程上引发了异常。

您可能希望将处理程序添加到的两个事件：

*   [AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)
*   [Application.ThreadException](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)

添加记录异常的处理程序，您将获得更多信息。

非 UI 线程中未处理异常的行为从 .NET 1.1 更改为 2.0。他们过去只是被吞下，但现在他们停止了应用程序。如果需要，您可以使用 app.config 标志来选择旧行为 - 但实际上并不推荐，因为另一个线程中的异常很可能意味着您的应用程序现在不稳定。我现在不记得设置的细节，但如果你愿意，我可以查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T17:34:34.203

如果您不想立即更改代码，我可能会使用带有 SOS 扩展的 WinDbg，因此您至少可以获得堆栈跟踪 - 对于这些类型的崩溃非常方便。

[带 WinDbg 的真实世界演练](http://www.mohundro.com/blog/2008/05/23/RealWorldWalkthroughWithWinDbg.aspx)

您可以尝试处理 UnhandledExceptionEvent。来自 MSDN：

[未处理异常事件](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

# css - 使用 CSS 的多行选项卡

> ID：428927
> 
> 赞同：1
> 
> 时间：2009-01-09T17:23:26.097
> 
> 标签：css, asp.net-ajax

我找不到使用 ASP.net ajax 选项卡控件执行多行选项卡的方法。我也找不到关于使用 CSS 制作多行选项卡的教程或示例。

如果你不明白我在这里寻找什么是我正在寻找的图像 [http://bp1.blogger.com/_WCGCQYWEaxs/Rq1c2bLNMDI/AAAAAAAAABU/0sKw_CrKLL4/s1600-h/dsd.jpg](http://bp1.blogger.com/_WCGCQYWEaxs/Rq1c2bLNMDI/AAAAAAAAABU/0sKw_CrKLL4/s1600-h/dsd.jpg)

有人可以给我一个关于如何实现多行标签的链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-09T17:27:53.483

那么每个选项卡都是一个`li`对象。将每个设置为`float:left`，除非您在`ul`容器上设置了绝对高度，否则当第一行的空间不足时，`li`s 应该换行到下一行。

像这样简单的东西应该可以工作，但可能需要一些技巧：

```
<ul id="nav">
    <li><a href="#">link</a></li>
    <li><a href="#">link</a></li>
    <li><a href="#">link</a></li>
    <li><a href="#">link</a></li>
</ul> 
```

CSS：

```
#nav {width:200px;}
#nav li {float:left;background:#eee;} 
```

至于背景，正如 Eran 所说，您需要使用滑动门方法。这相当简单，应该可以不添加任何额外的 HTML，只需将 CSS 修改为如下所示：

```
#nav {width:200px;}
#nav li {float:left;background:url(tab-bg.png) top right no-repeat;padding-right:5px}
#nav a {float:left;background:url(tab-bg.png) 0 -5px no-repeat;padding-left:5px} 
```

请记住，我已经在现场制作了所有这些代码。您的应该看起来相似，但请记住我的完全未经测试。阅读完整的推拉门教程，了解我在说什么以及它是如何工作的。

**编辑**：我刚刚重新阅读了标题和标签。你想要一个预制的 ASPNET 控件。我会看看你是否可以做一个纯 CSS 方法。尝试将滑动门方法应用于您所拥有的东西。如果您不知道如何使用当前的 HTML，请编辑您的问题并将其发布在下面，我相信有人可以帮助您让您的标签正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-09T17:27:15.667

我通常使用未排序列表 (UL)，其列表项浮动，因此它们彼此相邻堆叠。网上有很多不错的教程，只需 google “CSS tabs”。这是A List Apart中的一个[不错的。](http://www.alistapart.com/articles/slidingdoors/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-03-18T22:07:32.557

如果你注入一个关闭的**Span**和**Div**然后一个新的**进入一行最后一个选项卡面板的标题模板，选项卡面板将分成多行（无论如何似乎对我有用）。你可以使用**CSS**而不是后面的样式，但我只看了几分钟。**

 *****一行最后一个选项卡的示例：***

```
<cc1:TabPanel ID="tbpnAttLists" runat="server" HeaderText="Attribute Lists">
<HeaderTemplate>
Attribute Lists
</span>
</div>
<div class="ajax__tab_xp" style="width:100%; border-bottom:solid 1px silver; border-right: solid 1px silver; border-left: solid 1px silver;font-family:verdana,tahoma,helvetica;font-size:11px; ">
</HeaderTemplate> 
```

# sql-server - “将 varchar 值 'NULL' 转换为数据类型 int 时转换失败”

> ID：428933
> 
> 赞同：8
> 
> 时间：2009-01-09T17:25:15.000
> 
> 标签：sql-server

当我将记录插入长表时，我收到错误“将 varchar 值 'NULL' 转换为数据类型 int 时转换失败”如何确定哪些列错误？

该表有许多字段和数百万条记录。当我尝试将“NULL”字符串插入某个整数列时，每次迭代需要 10 分钟。我认为 SQL 服务器可以告诉我该列的确切名称 :(

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-09T17:39:56.533

如果该值为 true `NULL`，则不会出现转换错误。但是，您有一个 string = "NULL" 那么您会收到此错误。

你能做的是...

```
NullIf(YourValueHere, 'NULL') 
```

`NullIf`如果第一个参数与第二个参数不同，则返回第一个参数的值。如果参数相同，`NullIf`将返回`NULL`。

前任：

```
Select NullIf('Any Value', 'NULL')

Select NullIf('null','null') 
```

第一个将返回“任何值”，第二个将返回`NULL`（不是“null”）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T18:00:18.690

它提到“ **varchar**值'NULL'”的事实表明您正在尝试将列的值设置为字符串“NULL”而不是值 NULL。

在您的语句中查找用引号括起来的单词 NULL。您需要删除这些引号。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T17:27:51.113

开始一次评论一个，直到它停止轰炸。或者，看看你传递的哪个值对于 int 列是 NULL 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-09T17:36:03.170

您是否需要修复数据，或者您可以为该插入将空值转换为 0？

如果您可以转换，您可以使用 ISNULL 函数包装正在转换的 varchars。只需将以下内容放在插入到 int 字段中的任何值周围。

```
ISNULL(col1,0) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-16T18:12:22.463

对于每个“NULL”值，将其从 Excel 文档或要导入 SQL 的文档中删除。把它留空。

'NULL' 是一个字符串，因此存在转换问题。

# testing - 冒烟测试的附加值是多少？

> ID：428955
> 
> 赞同：6
> 
> 时间：2009-01-09T17:31:14.287
> 
> 标签：testing

或者也许随着我们的实施。我是想要完成这个过程的团队的新手，这似乎让我们团队中的一些成员（包括我）感到困惑。我们得到了我认为的用户验收测试或手动操作列表，您可以点击查看是否一切正常。我在想它会比这更简单，因为我们只是划分应用程序的各个部分，然后通常会遍历它以寻找巨大的错误。这将不涉及脚本，只需单击每个页面，可能会填写内容，确保提交正常。这让我想到了另一点，在我看来，烟雾测试基本上毫无价值。我会认为，而不是你 d 有单元测试甚至自动化测试，这些测试将通过需求列表来确保这种事情会正确发生。即使这至少没有完成，我认为首先签入代码的开发人员至少会进行一次迷你冒烟测试，以确保他们的功能首先工作。我们在会议上提出了这个问题，因此您可以想象其中的困惑，这让我回到了我的问题，我们将从这种类型的烟雾测试中获得什么价值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-09T17:37:44.993

*任何*测试的价值都是增加您对实施的信心。进行这种“冒烟测试”是为了增加它确实构建正确的信心，并且没有重大和令人尴尬的错误，比如 UI 不会出现。所以它基本上是一个省力的测试确认没有真正的重大问题。

这听起来可能不是很有用，但我已经看到经过大量测试的代码未能通过“冒烟测试”，例如，构建中的意外失败或损坏的图像。通常是在向重要客户展示时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-09T17:40:10.057

如果您将冒烟测试定义为“运行系统的基本功能以确保它们正常工作”，那么我认为这是有价值的。单元测试虽然是必要的，但并非包罗万象。他们没有发现任何集成错误。至于自动化测试，我还没有看到一个可以完全自动化测试的系统，即使可以，这种自动化也需要时间和精力来完成。

基本上，我在其中看到的价值是让我们确保我们今天对代码所做的更改不会破坏昨天工作的任何东西。根据您的编码实践的纪律性，这并不总是给定的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-09T17:56:00.883

要回答“什么是烟雾测试？”这个问题，假设您正在测试一件电气或电子设备。

将其插入并打开电源：

*   您是否看到它打开（例如屏幕或电源指示灯）？好的！
*   你看到有*烟*从里面冒出来吗？坏的！

就这样！“烟雾测试”是**最低限度的**测试：不是严格的测试。

“冒烟测试”的价值在于它**便宜**或具有成本效益：例如，只需 1% 的完整测试成本，它就能捕获 90% 的最可能错误。例如，在原始的烤面包机工厂中，您可能会这样做：

*   初始设计的昂贵测试
*   昂贵的原型测试
*   对量产线下的第一个项目进行昂贵的测试
*   对量产线下的每个后续产品进行廉价冒烟测试

我不确定现在“冒烟测试”在软件开发中的位置，因为自动化测试变得越来越流行。在过去，人们提倡将“每日构建”作为 QA 措施（特别是为了帮助“持续集成”）......然后，提倡“每日构建**和冒烟测试**”作为一种做得更好的方式，而不仅仅是每天构建（即，进行每日构建**并**验证它是否完全运行）......但是现在，比这更好的可能是“每日构建和广泛的自动化测试套件”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-09T17:38:33.057

我们在我工作的地方进行这种类型的烟雾测试。

最大的价值在于，我们可以确保所有部分都组合在一起，然后再将其交给用户进行用户验收测试。我正在考虑的应用程序存在于三台服务器上，并与旧系统对话。确保我们可以通过并且每个部分都可以与它需要的其他部分对话，这是一个简单而重要的测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T17:47:57.653

我假设您对“烟雾测试”的含义与我的相同——即尝试以任何方式炸毁程序。

20 多年前，当我刚刚完成（或者我是这么认为的）WYSIWYG 编辑器的一段主要代码时，我就了解到了这一点的价值。我自豪地把它展示给我的同事（Hey Dbell！），他说：“整洁！”。他立即创建了一个大约1000个字符的段落，将其复制了数千次，并创建了一个大约32MB的文档，将所有内容删除，撤消，程序绝对爆炸。

我吓坏了，说：“你不能那样做！”。他笑着说：“为什么不呢？”

发现并修复问题（一旦您知道阈值事件的样子，结果很容易复制）发现了内存管理中的一个微妙而严重的错误。简单的点击按钮测试永远不会发现它。

与此等效的现代方法是模糊测试（[http://en.wikipedia.org/wiki/Fuzz_testing](http://en.wikipedia.org/wiki/Fuzz_testing)）。它不能替代逐步的需求测试，但它经常会暴露出其他方法无法解决的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-09T17:54:47.657

冒烟测试是因为将损坏的软件交到用户手中可能会*非常*昂贵：它会浪费很多人的时间，可能需要管理层、会议等来修复。因此，每次构建都值得花*一点*时间，以确保它没有损坏，如果出现问题，可以为您节省*大量时间。*

一般规则是：*尽早发现问题**总是*更便宜。

 *而且，除非您*完全按照用户的方式进行*尝试，否则您*无法确定*它是否会完全按照应有的方式工作。总是有一些只有人类才能发现的意想不到的问题，例如视觉问题、安装问题......

因此，在将工作交到用户手中之前，自动化测试应始终辅以（小型）手动测试。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-09T17:58:58.100

烟雾测试绝对值得付出努力。

这是史蒂夫·麦康奈尔 (Steve McConnell) 撰写的一篇出色的文章，名为“[每日构建和冒烟测试](http://www.stevemcconnell.com/ieeesoftware/bp04.htm)”。这就是向我介绍这个想法的原因。

有关持续集成和日常构建的更多信息，请查看 Martin Fowler对该主题的出色[介绍。](http://martinfowler.com/articles/continuousIntegration.html)

高温高压

干杯，

抢

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-09T18:09:12.667

在我看来，在最终发布之前的“冒烟测试”，无论发布给用户还是 QA 团队，都是绝对必要的。自动化测试只能在编写脚本的同时进行测试，并且总是有可能会遗漏一些东西。

一个简单的界面缺陷可能会影响 QA 或用户对您的应用程序的感知，并导致他们怀疑或质疑基本的基本组件。在发布它之前没有一次过，你会因为一些小的界面错误而让你的软件被认为质量差。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-17T16:51:55.343

像任何最佳实践一样，您确实需要相信它才能实现它的回报。每次构建时至少应该每天进行一次冒烟测试或构建验证测试，或者如果您没有每日构建，那么无论如何都要每天检查您的环境是否正常。

了解您在测试周期的每一天的能力是有好处的。如果您不每天运行冒烟测试来测试基本的连接性或功能，您将无法报告您在测试中被阻止，并且开发团队将没有关于哪些是最高优先级错误的指示使固定。

与阻止缺陷和测试执行率相比，我建议您记录烟雾测试的时间线指标。如果有人足够重视你，这可能会阻止你看起来像瓶颈，并且可以挽救你的工作。

# c# - .NET 是否给了我错误的 2008 年 12 月 29 日的周数？

> ID：428957
> 
> 赞同：15
> 
> 时间：2009-01-09T17:31:29.077
> 
> 标签：c#, .net, calendar, gregorian-calendar, week-number

根据[官方（公历）日历](http://www.timeanddate.com/calendar/custom.html?year=2008&country=22&month=12&typ=2&months=2&display=0&space=0&fdow=1&wno=1&hol=)，2008 年 12 月 29 日的周数为 1，因为在第 52 周的最后一天（即 28/12）之后，一年中只剩下三天或更少的天数。有点奇怪，但是好的，规则就是规则。

所以根据这个日历，我们有 2008/2009 年的这些边界值

*   28/12 是第 52 周
*   29/12 是第 1 周
*   1/1 是第 1 周
*   8/1 是第 2 周

C# 提供了一个 GregorianCalendar 类，它有一个函数`GetWeekOfYear(date, rule, firstDayOfWeek)`.

该参数`rule`是一个具有 3 个可能值的枚举：`FirstDay, FirstFourWeekDay, FirstFullWeek`. 根据我的理解，我应该`FirstFourWeekDay`遵循规则，但我尝试了所有这些以防万一。

最后一个参数通知应该将哪个工作日视为一周的第一天，根据该日历，它是星期一，所以星期一。

所以我启动了一个快速而肮脏的控制台应用程序来测试这个：

```
using System;
using System.Globalization;

namespace CalendarTest
{
    class Program
    {
        static void Main(string[] args)
        {
            var cal = new GregorianCalendar();
            var firstWeekDay = DayOfWeek.Monday;
            var twentyEighth = new DateTime(2008, 12, 28);
            var twentyNinth = new DateTime(2008, 12, 29);
            var firstJan = new DateTime(2009, 1, 1);
            var eightJan = new DateTime(2009, 1, 8);
            PrintWeekDays(cal, twentyEighth, firstWeekDay);
            PrintWeekDays(cal, twentyNinth, firstWeekDay);
            PrintWeekDays(cal, firstJan, firstWeekDay);
            PrintWeekDays(cal, eightJan, firstWeekDay);
            Console.ReadKey();
        }

        private static void PrintWeekDays(Calendar cal, DateTime dt, DayOfWeek firstWeekDay)
        {
            Console.WriteLine("Testing for " + dt.ToShortDateString());
            Console.WriteLine("--------------------------------------------");
            Console.Write(CalendarWeekRule.FirstDay.ToString() + "\t\t");
            Console.WriteLine(cal.GetWeekOfYear(dt, CalendarWeekRule.FirstDay, firstWeekDay));
            Console.Write(CalendarWeekRule.FirstFourDayWeek.ToString() + "\t");
            Console.WriteLine(cal.GetWeekOfYear(dt, CalendarWeekRule.FirstFourDayWeek, firstWeekDay));
            Console.Write(CalendarWeekRule.FirstFullWeek.ToString() + "\t\t");
            Console.WriteLine(cal.GetWeekOfYear(dt, CalendarWeekRule.FirstFullWeek, firstWeekDay));
            Console.WriteLine("--------------------------------------------");
        }
    }
} 
```

...这就是我得到的

```
Testing for 28.12.2008
--------------------------------------------
FirstDay                52
FirstFourDayWeek        52
FirstFullWeek           51
--------------------------------------------
Testing for 29.12.2008
--------------------------------------------
FirstDay                53
FirstFourDayWeek        53
FirstFullWeek           52
--------------------------------------------
Testing for 01.01.2009
--------------------------------------------
FirstDay                1
FirstFourDayWeek        1
FirstFullWeek           52
--------------------------------------------
Testing for 08.01.2009
--------------------------------------------
FirstDay                2
FirstFourDayWeek        2
FirstFullWeek           1
-------------------------------------------- 
```

因此，正如我们所见，上述组合均不符合官方日历（如果您赶时间，请注意 29/12 永远不会成为第 1 周）。

我在这里做错了什么？也许我缺少一些明显的东西？（现在是周五，比利时的工作时间很晚，请多多包涵；））

编辑：也许我应该解释一下：我需要的是一个适用于任何年份的函数，返回与我链接的公历相同的结果。所以 2008 年没有特殊的解决方法。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-09T17:53:24.460

本文[深入](http://blogs.msdn.com/shawnste/archive/2006/01/24/iso-8601-week-of-year-format-in-microsoft-net.aspx)探讨了该问题和可能的解决方法。问题的中心是 .NET 日历实现似乎没有忠实地实现 ISO 标准

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-12T15:04:42.787

@Conrad 是正确的。DateTime 和 GregorianCalendar 的 .NET 实现不实现/遵循完整的 ISO 8601 规范。话虽如此，他们的规范非常详细，而且完全实现起来并不简单，至少在解析方面是这样。

以下网站提供了更多信息：

*   [http://www.iso.org/iso/en/prods-services/popstds/datesandtime.html](http://www.iso.org/iso/en/prods-services/popstds/datesandtime.html)
*   [http://www.w3.org/TR/NOTE-datetime](http://www.w3.org/TR/NOTE-datetime)
*   [http://www.cl.cam.ac.uk/~mgk25/iso-time.html](http://www.cl.cam.ac.uk/~mgk25/iso-time.html)
*   [http://www.cs.tut.fi/~jkorpela/iso8601.html](http://www.cs.tut.fi/~jkorpela/iso8601.html)
*   [http://hydracen.com/dx/iso8601.htm](http://hydracen.com/dx/iso8601.htm)
*   [http://www.probabilityof.com/ISO8601.shtml](http://www.probabilityof.com/ISO8601.shtml)
*   [http://www.mcs.vuw.ac.nz/technical/software/SGML/doc/iso8601/ISO8601.html](http://www.mcs.vuw.ac.nz/technical/software/SGML/doc/iso8601/ISO8601.html)

简单的说：

一周由其在给定年份中的编号标识，并从星期一开始。一年的第一周是包括第一个星期四的那一周，或者相当于包括 1 月 4 日的那一周。

以下是我用于正确处理 ISO 8601 日期的部分代码：

```
 #region FirstWeekOfYear
    /// <summary>
    /// Gets the first week of the year.
    /// </summary>
    /// <param name="year">The year to retrieve the first week of.</param>
    /// <returns>A <see cref="DateTime"/>representing the start of the first
    /// week of the year.</returns>
    /// <remarks>
    /// Week 01 of a year is per definition the first week that has the Thursday 
    /// in this year, which is equivalent to the week that contains the fourth
    /// day of January. In other words, the first week of a new year is the week
    /// that has the majority of its days in the new year. Week 01 might also 
    /// contain days from the previous year and the week before week 01 of a year
    /// is the last week (52 or 53) of the previous year even if it contains days 
    /// from the new year.
    /// A week starts with Monday (day 1) and ends with Sunday (day 7). 
    /// </remarks>
    private static DateTime FirstWeekOfYear(int year)
    {
        int dayNumber;

        // Get the date that represents the fourth day of January for the given year.
        DateTime date = new DateTime(year, 1, 4, 0, 0, 0, DateTimeKind.Utc);

        // A week starts with Monday (day 1) and ends with Sunday (day 7).
        // Since DayOfWeek.Sunday = 0, translate it to 7\. All of the other values
        // are correct since DayOfWeek.Monday = 1.
        if (date.DayOfWeek == DayOfWeek.Sunday)
        {
            dayNumber = 7;
        }
        else
        {
            dayNumber = (int)date.DayOfWeek;
        }

        // Since the week starts with Monday, figure out what day that 
        // Monday falls on.
        return date.AddDays(1 - dayNumber);
    }

    #endregion

    #region GetIsoDate
    /// <summary>
    /// Gets the ISO date for the specified <see cref="DateTime"/>.
    /// </summary>
    /// <param name="date">The <see cref="DateTime"/> for which the ISO date
    /// should be calculated.</param>
    /// <returns>An <see cref="Int32"/> representing the ISO date.</returns>
    private static int GetIsoDate(DateTime date)
    {
        DateTime firstWeek;
        int year = date.Year;

        // If we are near the end of the year, then we need to calculate
        // what next year's first week should be.
        if (date >= new DateTime(year, 12, 29))
        {
            if (date == DateTime.MaxValue)
            {
                firstWeek = FirstWeekOfYear(year);
            }
            else
            {
                firstWeek = FirstWeekOfYear(year + 1);
            }

            // If the current date is less than next years first week, then
            // we are still in the last month of the current year; otherwise
            // change to next year.
            if (date < firstWeek)
            {
                firstWeek = FirstWeekOfYear(year);
            }
            else
            {
                year++;
            }
        }
        else
        {
            // We aren't near the end of the year, so make sure
            // we're not near the beginning.
            firstWeek = FirstWeekOfYear(year);

            // If the current date is less than the current years
            // first week, then we are in the last month of the
            // previous year.
            if (date < firstWeek)
            {
                if (date == DateTime.MinValue)
                {
                    firstWeek = FirstWeekOfYear(year);
                }
                else
                {
                    firstWeek = FirstWeekOfYear(--year);
                }
            }
        }

        // return the ISO date as a numeric value, so it makes it
        // easier to get the year and the week.
        return (year * 100) + ((date - firstWeek).Days / 7 + 1);
    }

    #endregion

    #region Week
    /// <summary>
    /// Gets the week component of the date represented by this instance.
    /// </summary>
    /// <value>The week, between 1 and 53.</value>
    public int Week
    {
        get
        {
            return this.isoDate % 100;
        }
    }
    #endregion

    #region Year
    /// <summary>
    /// Gets the year component of the date represented by this instance.
    /// </summary>
    /// <value>The year, between 1 and 9999.</value>
    public int Year
    {
        get
        {
            return this.isoDate / 100;
        }
    }
    #endregion 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-09T17:38:53.803

周数因国家/地区而异，如果我不是完全错误的话，应该取决于您的语言环境/区域设置。

编辑：维基百科支持我的模糊回忆，即这些数字因国家/地区而异：[http ://en.wikipedia.org/wiki/Week_number#Week_number](http://en.wikipedia.org/wiki/Week_number#Week_number)

我希望一个受人尊敬的框架能够遵守您在本地运行时中选择的 COUNTRY。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T17:35:11.503

以我的经验，所展示的行为是典型的行为，将部分最后一周称为第 53 周。这可能是因为我对周数的所有重大曝光都与为报告目的计算日历年末有关，而 IRS（或您选择的税务机构）认为日历年将于 12 月 31 日结束，而不是一年中的最后一个完整周。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T11:41:23.673

我知道这是一个旧帖子，但任何方式 noda time 似乎都能得到正确的结果..

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-01-09T17:40:58.230

作为一种解决方法，您可以说周数是 WeekNumber mod 52。我相信这适用于您描述的情况。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-01-09T17:50:06.403

作为一种解决方法，为什么不使用`FirstFourDayWeek`但添加：

```
 if ( weekNumber > 52 )
    weekNumber = 1; 
```

# .net - 使用 VB.NET IIF 我得到 NullReferenceException

> ID：428959
> 
> 赞同：45
> 
> 时间：2009-01-09T17:31:46.237
> 
> 标签：.net, vb.net, nullreferenceexception

我正在做一些调试，所以我想记录 eventArgs 值

我有一条简单的线，基本上可以：

```
logLine = "e.Value: " + IIf(e.Value Is Nothing, "", e.Value.ToString()) 
```

我理解IIF函数的方式，如果e.Value是Nothing（null）那么它应该返回空字符串，如果不是它应该返回值的.ToString。但是，我得到了 NullReferenceException。这对我来说没有意义。

有任何想法吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2009-01-09T17:33:55.420

[IIf](http://msdn.microsoft.com/en-us/library/27ydhh0d.aspx)是一个实际函数，因此所有参数都会被评估。[If](http://msdn.microsoft.com/en-us/library/bb513985.aspx)关键字被添加到 VB.NET 2008 以提供您所期望的短路功能。

尝试

```
logLine = "e.Value: " + If(e.Value Is Nothing, "", e.Value.ToString()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T17:33:53.207

VB 在 Iif 中不做短路评估。在您的情况下，无论 e.Value 是否为空，都会对 e.Value.ToString() 进行评估。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T17:33:53.953

这是预期的行为。

`IIF`是一个函数；因此，函数的参数将在将其发送到函数之前进行评估。

相比之下，C# 中的三元运算符是一种语言结构，如果三元表达式为真，则它会阻止对第二个参数求值。

# sql-server - 如何从 SQL Server 存储过程返回多个数据表？

> ID：428960
> 
> 赞同：5
> 
> 时间：2009-01-09T17:32:12.820
> 
> 标签：sql-server, tsql, stored-procedures

我需要对两个不同的表进行两次查询，并且数据并不真正相关。所以当我通过我的代码调用存储过程时，我应该得到一个带有两个数据表的数据集，每个查询一个数据表。这在 SQL Server 存储过程中是如何完成的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-09T17:35:11.050

只需在 proc 中执行两个 SELECT 语句：

```
SELECT * FROM Foo
SELECT * FROM Bla 
```

然后当您 Fill() 一个数据集时，您将获得两个数据表，一个带有第一个结果集，另一个带有第二个结果集。

# language-agnostic - 如何将实体名称中的首字母缩略词大写？

> ID：428967
> 
> 赞同：7
> 
> 时间：2009-01-09T17:33:53.940
> 
> 标签：language-agnostic, naming-conventions

让我们暂时假设您正在使用一种按照惯例使用驼峰式单词作为标识符的语言进行编程。所有使用下划线分隔的方法名称的 Ruby 类型都可以忽略这一点。

当您的名字包含首字母缩略词时，您会采取什么方法将第一个字母后面的字母大写？例如，您会调用方法 createSQLBuffer 还是 createSqlBuffer？您是否制定了规定在这种情况下该怎么做的政策？此外，任何人都可以链接我一些具体提倡其中一个或另一个的文章，或者实际上任何涵盖这一点的文章吗？

我知道这并不是什么大问题，但由于某种原因，我有时会遇到一个方法/类/变量以一种方式大写，而另一种方式看起来更自然。奇怪的是，我什至不确定它是否一致。发现我喜欢某些名称全部大写，而其他名称全部小写，这并不让我感到惊讶。

有人想分享他们对此的看法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-09T17:35:47.710

我喜欢在大写时将 Acronyms 视为一个单词，所以我喜欢 createSqlBuffer。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-09T17:39:24.317

.NET 命名准则（即使它是帕斯卡大小写）建议仅将首字母缩写词中的第一个字母大写，除非它是两个字母的首字母缩写词（so, `createSqlBuffer`, but `createIOBuffer`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-09T18:21:24.357

IMO，当驼峰式大小写时，仅将首字母缩写词的第一个字母大写是有意义的，这仅仅是因为大写整个单词会破坏驼峰式大小写行为。驼峰式单词中的大写字母应该指示每个单词的开头，而不是遵循正常的英文大小写规则。如果将整个首字母缩写词大写，则首字母缩写词的结尾和下一个单词的开头之间的明显分隔会丢失。

只用一个大写字母也更容易打字（并且在眼睛上稍微好一点）。

不过，我同意 IO 和大多数其他两个字母的缩写。即使考虑到上述情况，我通常也会让它们大写。最后，它真的是关于更容易阅读的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-09T17:49:57.870

使用 fudgeSql() 可能比使用 fudgeSQL() 稍微容易一些，但后者有时在某些情况下似乎更正确。

有时你会在类名或方法名中出现一个首字母缩略词和另一个首字母缩略词并排出现的情况，这不太好。此外，不知何故，当我键入时，只输入一个大写字母会更容易一些。但是，我不认为在所有情况下都拥有它会很好。当然是 I/O -> IO，我不想将 Io（木星的卫星）视为类或方法名称的一部分。也许这是主观的事情之一，并且取决于首字母缩略词本身。只要你坚持...

在 Java 中，使用 getter 和 setter 的一件事是，使用大写字母时，您的变量最终必须是：

```
private ACRO aCRO; 
```

而不是更好

```
private ACRO acro; 
```

因为生成的 getter 和 setter（无论如何在 Eclipse 中）

```
void setAcro(ACRO acro) 
```

不符合命名约定。

```
void setACRO(ACRO aCRO); 
```

如果你明白我的意思。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-09T18:04:36.950

我的经验是，通常的约定是将大写字母视为单词分隔符，即 useSql 而不是 UseSQL。正确的答案是使用使代码最清晰的任何约定，并始终如一地使用它。正如 JeeBee 指出的那样，这可能会受到工具假设的影响。

# version-control - Seapine 软件 - 环绕声 - 自动构建

> ID：428979
> 
> 赞同：2
> 
> 时间：2009-01-09T17:36:17.617
> 
> 标签：version-control, surround, testtrack

我正在考虑在我工作的地方建立一个自动化的构建过程（目前我们的构建是一个手动过程）。我们的版本控制软件来自 Seapine - Surround SCM 和 TestTrack。Surround 有一个 CLI 参考指南。

有没有人有使用 Surround SCM 自动构建 Visual Studio 2008 以进行版本控制的经验？我们也有一些旧的 Borland C++ Builder 5 项目，但我并不关心它们，因为它们很快就会消失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-21T14:19:47.183

您可以通过几种不同的方式使用 Surround SCM 进行自动构建。

首先，Surround SCM 确实与持续集成工具集成，主要是 CruiseControl 和 CruiseControl.Net。使用这些类型的工具，您可以配置一个时间间隔，用于检查 Surround SCM 是否在指定的分支和存储库中发生了任何更改。如果检测到更改，它将启动构建。

另一种方法是将 Surround SCM 命令行界面客户端 (CLI) 与构建脚本集成。然后，您可以使用 OS 调度程序在指定时间运行此脚本。CLI 命令可以是一个简单的递归获取。

最后，您还可以在 Surround SCM 中使用触发器。当特定文件事件发生时，您可以将其配置为启动脚本。但是，您必须小心触发器，因为它们是基于文件的。例如，如果您将触发器设置为在进行提升时启动，它将为每个提升的文件启动一次脚本。

我鼓励您访问 Seapine Labs ( [http://labs.seapine.com/](http://labs.seapine.com/) )。那里有几个有用的示例，甚至还有一篇题为“使用 MSBuild 和 Surround SCM 自动化 .NET 构建”的文章。在 Surround SCM 类别下，您将找到集成文章，这些文章可以向您展示如何与任何 CruiseControl 集成并触发示例。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-16T16:40:02.197

我今天找到了这个网站：http: [//labs.seapine.com/](http://labs.seapine.com/)。看起来它为 Seapine 系列工具提供了很多有用的信息。***************