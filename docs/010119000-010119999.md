# StackOverflow 问答 10119000-10119999

# ios - 在我们发布的应用程序版本中，GPS 箭头无法在 iPhone 的状态栏中消失

> ID：10119000
> 
> 赞同：0
> 
> 时间：2012-04-12T07:07:58.513
> 
> 标签：ios, gps, power-management

我们开发了一个使用 iOS 4.0+ 的 GPS 服务的应用程序。一旦您离开我们的应用程序，例如当您返回 iPhone 主屏幕或切换到其他应用程序时，我们的应用程序的 GPS 将在后台每 10 分钟更新一次。

在我们的开发阶段，GPS箭头在离开我们的应用程序后会消失，但我们现在遇到的是在发布版本（从AppStore下载），箭头总是显示在状态栏中！因此，电池成本超出了我们的预期。

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:06:12.553

苹果技术中心回复：

这是不可能的。当用户进入或引导区域时，您的应用可以使用区域监控“唤醒” [http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#/ /apple_ref/doc/uid/TP40009497-CH2-SW13](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW13)。
或者它可以声明自己是一个导航应用程序，并始终保持 GPS 收音机开启。
这就是一个提供转弯驾驶方向的应用程序要做的事情。但是，这会消耗大量功率。

# python - 如何使用 XCode 3 对 python 进行编程？

> ID：10119002
> 
> 赞同：0
> 
> 时间：2012-04-12T07:08:12.290
> 
> 标签：python, xcode, macos, osx-snow-leopard

也许这个问题太简单了，没有人需要问，或者我的搜索工作做得很差。

**我想知道如何使用 XCode 在 python 中编写一个简单的 Hello World 程序。**

我到处都能看到有关 PyObjC 的信息，但我还没有为此做好准备。

有人可以指点我一个教程或提供相关说明吗？

我在 Mac OS X 10.6.8 上使用 XCode 3.2.6。

也许一旦我可以让 Hello World 工作，我就可以开始考虑创建一个界面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:01:40.743

有几个选择。如果您只想编写纯 python，您可以在任何文本编辑器中执行此操作。

如果您想将 python 脚本转换为应用程序，可以[使用 py2app](http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html)。在 Xcode 3 中有一个应用程序可以在 /Developer/Applications 中执行此操作。我不再有 Xcode 3，所以我无法详细说明这个应用程序的具体位置，但它在 /Developer 下的某个地方:)

如果你想用 python 构建一个 mac 应用程序，你需要使用 PyObjC 与必要的 NSObjects 交互。这是我使用 PyObjC 构建的一个旧应用程序，您可能会发现它很有用：[RockStar](http://code.google.com/p/rockstarmenubar)。

# sencha-touch - 煎茶的本地化

> ID：10119004
> 
> 赞同：1
> 
> 时间：2012-04-12T07:08:23.257
> 
> 标签：sencha-touch, sencha-touch-2

如何使用本地化概念更改按钮文本？

```
Ext.define("iPolis.view.login", {
     extend: 'Ext.form.Panel',

     requires: [
         'Ext.TitleBar',
         'Ext.form.FieldSet',
         'Ext.field.Password',
         'Ext.field.Text',
         'Ext.field.TextAreaInput',
     ],
     id:'loginPanel',

     loginText:'Login',

     xtype:'login',
     .
     .
     .
     items: [{
           xtype: 'button',
           cls: 'btn',
           text: this.loginText,
           id:'loginbtn',
           handler: function() {

           }
     ]
}); 
```

我的localization.js 是这样的：

```
if(Ext.form.Panel) {

Ext.override(Ext.form.Panel,{

    loginText:'iniciarsession'

});
} 
```

我得到一个空白按钮。请让我知道必须做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:39:33.513

我以这种方式使用它，它对我有用

```
var Messages = {

username: 'Benutzername',
password: 'Passwort'
login: 'iniciarsession'

} 
```

在按钮定义中：

```
 {
                      xtype: 'passwordfield',
                      id: 'pwd',
                      placeHolder:'Password',
                      label:Messages.password

                    },
                   {
                    xtype: 'button',
                    cls: 'btn',
                    text:Messages.login,
                    id:'loginbtn',

                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T10:00:25.773

您已用作`loginText`按钮文本，但在覆盖它时您已使用`login`

所以应该是

```
Ext.override(Ext.form.Panel,{
    loginText: 'iniciarsession'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T10:49:07.223

您不应该使用`Ext.override`它，因为它在 Sencha Touch 2 中已被弃用。

要实现您的需要，请尝试以下操作：

`Ext.getCmp('loginPanel').loginText = 'my new value'`

如果它不起作用，请改用它：

`Ext.getCmp('loginPanel').config.loginText = 'my new value'`

希望能帮助到你。

# postgresql - 在 INSERT 到表中 INSERT 连接表中的数据

> ID：10119005
> 
> 赞同：1
> 
> 时间：2012-04-12T07:08:26.673
> 
> 标签：postgresql, drupal, netbeans, triggers, pgadmin

我有两个表，它们有一个`id_user`共同命名的列。这两个表是在某个时候在我的 Drupal 网页中创建的（我不知道，因为我没有创建 Netbeans 项目）。

我在网上查了一下，发现可能通过添加`REFERENCES 1sttable (id_user)`到第二个表，它应该将`1sttable`（总是在新用户到达时创建）的`id_user`值复制到`2ndtable`（我不知道在哪一点是创建）。这是对的吗？

如果不正确，我想知道 pgAdmin 中的一种方法可以使我同步这些表，或者至少在同一时刻创建它们。

我遇到的问题是，新用户一`1sttable`注册就会自动打开一个新行，而要获得一个新行`2ndtable`需要某种“激活”，比如插入所有数据。我正在寻找的是一种方法，一旦 中有新行`1sttable`，它也会自动在另一个表上创建新行。我不知道如何说得更清楚（英语不是我的母语）。

你给我的解决方案似乎很清楚这个问题，但问题有点大：这两个表呈现了不同类型的变量，应该是它们，一个在 mySQL 中，带有用户数据（drupal 默认为用户） ，然后我在postgresql中有2个，都具有相同的主键（id_user）：

*   第一个有 118 列，大部分是实整数；
*   第二个有 50 列，混合类型。

我正在使用的 Web 应用程序需要此列的所有值都不是空的（否则我会得到 NullPointerException）才能工作，所以我正在寻找的是（我认为）：

当用户在drupal中注册-插入他的电子邮件时，它会自动创建两个已完成的列，以使网络在电子邮件存储在mysql中后立即自动运行。可能吗？解释清楚了吗？

我的环境是：

*   windows server 2008 企业版
*   玻璃鱼 2.1
*   网豆6.7.1
*   德鲁巴 6.17
*   PostgreSQL 8.4
*   mysql 5.1.48

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T18:21:36.590

[pgAdmin](https://pgadmin.org)只是 GUI。你的意思是[PostgreSQL](https://www.postgresql.org)，[RDBMS](https://en.wikipedia.org/wiki/RDBMS)。

像您一样的[外键约束](https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-FK)仅强制不能使用任何值，该值不存在于引用的列中。您可以使用`ON UPDATE CASCADE`或`ON DELETE CASCADE`传播来自引用列的更改，但不能像您描述的那样使用它创建*新行。*你拿错了工具。

您所描述的可以通过[触发器](https://www.postgresql.org/docs/current/triggers.html)来实现。另一种更复杂的方式是[`RULE`](https://www.postgresql.org/docs/current/rules.html). 在这里使用触发器。

在 PostgreSQL 中，您需要一个[触发器函数](https://www.postgresql.org/docs/current/plpgsql-trigger.html)，主要使用[plpgsql](https://www.postgresql.org/docs/current/plpgsql.html)，以及一个使用它的表上的[触发器。](https://www.postgresql.org/docs/current/sql-createtrigger.html)

就像是：

```
CREATE OR REPLACE FUNCTION trg_insert_row_in_tbl2()
  RETURNS trigger AS
$func$
BEGIN
   INSERT INTO tbl2 (my_id, col1)
   VALUES (NEW.my_id, NEW.col1)     -- more columns?

   RETURN NEW;  -- doesn't matter much for AFTER trigger
END
$func$  LANGUAGE plpgsql; 
```

并触发`AFTER INSERT`：`tbl1`

```
CREATE TRIGGER insaft
AFTER INSERT ON tbl1
FOR EACH ROW EXECUTE PROCEDURE trg_insert_row_in_tbl2(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:51:47.187

您可能想阅读有关使用[Drupal 钩子](http://api.drupal.org/api/drupal/includes!module.inc/group/hooks/7)添加额外代码以在用户注册时运行的信息。一旦你知道如何使用钩子，你就可以编写代码（在一个模块中）在第二个表中插入相应的记录。在这里使用的一个很好的候选钩子是[Drupal 6](http://api.drupal.org/api/drupal/developer!hooks!core.php/function/hook_user/6)的 hook_user或[Drupal 7 的 hook_user_insert](http://api.drupal.org/api/drupal/modules!user!user.api.php/function/hook_user_insert/7)。

您读到的 REFERENCES 是 SQL 命令的一部分，用于定义从第二个表到第一个表的[外键约束。](https://en.wikipedia.org/wiki/Foreign_key)这对于解决您的问题并不是绝对必要的，但它可以帮助您保持数据库的一致性。如果您想了解有关此主题的更多信息，我建议您阅读数据库结构和约束。

# python - 如何从我的电子邮件中打印有组织的 ngram？

> ID：10119007
> 
> 赞同：0
> 
> 时间：2012-04-12T07:08:28.187
> 
> 标签：python, imaplib

此时我需要做两件事，但我需要你的帮助：

1.  清理数据的最佳实践 - 以编程方式删除多余的标签和“>>>>>>>”，以及其他无意义的通信 flotsam 和 jetsum
2.  一旦它被清理 - 我如何打包它以在 django 和 sqlite 中正常工作。
    *   我是否根据日期、人物、主题、单词将其转换为 csv，然后将它们输入到我的数据库中的数据类中？

好吧，在我进入数据库之前，我希望能够对数据进行排序并干净地显示数据——我几乎没有将东西放入数据库的经验，我最接近的是使用 XML、csv 和 JSON 工作。

我需要通过排名来获得 ngram，例如某个单词在一个人的一系列电子邮件中出现了多少次。我正试图更接近于了解人们如何与我谈论主题等。这是[Jon Kleinberg 分析他自己的电子邮件的一个非常基本的版本。](https://www.cs.cornell.edu/home/kleinber/bhs.pdf)

*要温柔，要粗暴，但请提供帮助:)！*

**> 我的输出当前如下所示：** : 1, 'each': 1, 'Me': 1, 'IN!\r\n\r\n2012/1/31': 1, 'calculator.\r\n> >>>>>\r\n>>>>>>': 1, '人': 1, '=97MB\r\n>\r\n>': 1, '我们': 2, '写:\r\n>>>>>>\r\n>>>>>>': 1, '=\r\n写道:\r\n>>>>>\r\n>>>>> >': 1, '2012/1/31': 2, '是': 1, '31,': 5, '=97MB\r\n>>>>\r\n>>>>': 1 , '1:45': 1, 'be\r\n>>>>>': 1, '已发送':

```
 import getpass, imaplib, email

# NGramCounter builds a dictionary relating ngrams (as tuples) to the number
# of times that ngram occurs in a text (as integers)
class NGramCounter(object):

  # parameter n is the 'order' (length) of the desired n-gram
  def __init__(self, text):
    self.text = text
    self.ngrams = dict()

    # feed method calls tokenize to break the given string up into units
  def tokenize(self):
    return self.text.split(" ")

  # feed method takes text, tokenizes it, and visits every group of n tokens
  # in turn, adding the group to self.ngrams or incrementing count in same
  def parse(self):

    tokens = self.tokenize()
    #Moves through every individual word in the text, increments counter if already found
    #else sets count to 1
    for word in tokens:
        if word in self.ngrams:
            self.ngrams[word] += 1
        else:
            self.ngrams[word] = 1

  def get_ngrams(self):
    return self.ngrams

#loading profile for login
M = imaplib.IMAP4_SSL('imap.gmail.com')
M.login("EMAIL", "PASS")
M.select()
new = open('liamartinez.txt', 'w')
typ, data = M.search(None, 'FROM', 'SEARCHGOES_HERE') #Gets ALL messages

def get_first_text_part(msg): #where should this be nested? 
    maintype = msg.get_content_maintype()
    if maintype == 'multipart':
        for part in msg.get_payload():
            if part.get_content_maintype() == 'text':
                return part.get_payload()
    elif maintype == 'text':
        return msg.get_payload()

for num in data[0].split(): #Loops through all messages
    typ, data = M.fetch(num, '(RFC822)') #Pulls Message
    msg = email.message_from_string(data[0][2]) #Puts message into easy to use python objects
    _from =  msg['from'] #pull from
    _to = msg['to'] #pull to
    _subject = msg['subject'] #pull subject
    _body = get_first_text_part(msg) #pull body
    if _body:
        ngrams = NGramCounter(_body)
        ngrams.parse()
        _feed = ngrams.get_ngrams()
        # print "\n".join("\t".join(str(_feed) for col in row) for row in tab)
        print _feed
    # print 'Content-Type:',msg.get_content_type()
    #     print _from
    #     print _to
    #     print _subject
    #     print _body
    #    

    new.write(_from)

    print '---------------------------------'

M.close()
M.logout() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:20:48.050

您的主循环没有任何问题。这个过程虽然有点慢，因为您需要从外部服务器检索所有电子邮件。我的建议是一次下载客户端上的所有消息。然后将它们保存到数据库（sqlite、zodb、mongodb .. 您喜欢的那个）中，然后对 db 对象执行您想要的所有分析。这两个过程（下载和分析）最好彼此分开，否则调整它们会导致复杂性和代码复杂性增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:35:02.683

代替

```
if _body:
    ngrams = NGramCounter(_body)
    ngrams.parse()
    _feed = ngrams.get_ngrams()
    # print "\n".join("\t".join(str(_feed) for col in row) for row in tab)
    print _feed 
```

和

```
if _body:
    ngrams = NGramCounter(" ".join(_body.strip(">").split()))
    ngrams.parse()
    _feed = ngrams.get_ngrams()
    print _feed 
```

# android - 在 EditText 框中显示一个随机整数（如果我弄错了，则显示另一个框）

> ID：10119009
> 
> 赞同：1
> 
> 时间：2012-04-12T07:08:36.140
> 
> 标签：android, random, int

我正在尝试制作一个应用程序，在该应用程序中单击按钮后会发生 3 件事，1）我听到咔哒声（有效）2）我生成一个随机数（可能有效，也可能无效）3）显示随机数我的代码是以下：

```
 package arkham.test2;

import java.util.Random;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.widget.Button;
import android.widget.EditText;
import android.view.View;
import android.view.View.OnClickListener;

public class Arkhamtest2Activity extends Activity {
    EditText randomN;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final MediaPlayer mpClick = MediaPlayer.create(this, R.raw.click);
        randomN = (EditText) findViewById(R.id.randomN);

        //button 1 start        
        Button bMythos = (Button) findViewById(R.id.mythos);
        bMythos.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                mpClick.start();
                Random r = new Random();
                int n=r.nextInt(6) + 1;
                randomN.setText(n);
            }
        });
        //button 1 end
    }

} 
```

当我单击按钮时，我听到了咔嗒声，但没有其他反应。我不知道是否生成随机数，因为没有显示。我需要在 randomM.set() 的括号中放置什么我尝试了 n 并且没有任何反应。我尝试了“n”并得到了字母 n（预期）不知道还能尝试什么......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T07:10:49.400

尝试..

```
randomN.setText(String.valueOf(n)); 
```

发生这种情况是因为当您将一个 int 值传递给此方法时......它假定它是一个资源 ID，而不是您要设置为 Text 的值。所以你不可能做到这一点......

# api - IIS 7 正确向浏览器提供 GET 请求，但引发 API 请求超时异常

> ID：10119010
> 
> 赞同：0
> 
> 时间：2012-04-12T07:08:55.767
> 
> 标签：api, asp.net-mvc-2, iis-7

我在 Win 7 IIS 上运行一个非常简单的 Web 应用程序（Asp.Net MVC3）。我有一个非常简单的 HTTP GET API，它返回 hello world。

**来电：**

```
http://localhost/helloworld 
```

**回报：**

```
Hello World! 
```

这可以在浏览器上完美运行。但是，当我编写一个尝试使用网络客户端提取此 URL 的应用程序时，我收到以下错误：

```
{"Unable to read data from the transport connection: The connection was closed."} 
```

**我的代码如下**

```
WebClient web = new WebClient();
var response = web.DownloadString("http://localhost/helloworld"); 
```

**我的 IIS 设置如下** ![在此处输入图像描述](../Images/c221e5b785b52a800f9b9a2f36df969c.png)

我应该看什么？我已经在这几个小时了，我已经没有选择尝试了！任何帮助将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T13:27:16.400

我终于弄清楚了问题所在，而不是一个特定于 IIS 的问题——我倾向于这个问题，结果证明这是我编写的代码的问题。

在此处添加详细信息，以防其他人遇到类似问题。

我的代码中有以下方法，用于将请求的响应作为 JSON 对象发送。

```
private void sendJsonResult(string result) {
    Response.StatusCode = 200;
    Response.Headers.Add("Content-Type", "application/json; charset=utf-8");
    Response.Flush();
    Response.Write(result);
    Response.End();
    Response.Close();    // <-- This is the problem statement
} 
```

经过一番挖掘，我发现我们**不**应该执行 Response.Close()。

一个更好的解释是[**here**](https://stackoverflow.com/questions/3219701/asp-net-response-close-issue)。一旦我删除了那条线，它就开始完美地工作了——无论是在我的消费应用程序还是网络浏览器等中。

如果您阅读上面的链接，您将清楚地理解为什么我们不应该使用 Response.Close() - 所以我不会详细说明。今天学到了一个新东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:01:23.963

我怀疑这是因为 WebClient 没有发送一些 HTTP 标头：

> 默认情况下，WebClient 实例不发送可选的 HTTP 标头。如果您的请求需要可选标头，则必须将标头添加到 Headers 集合。例如，要在响应中保留查询，您必须添加用户代理标头。此外，如果缺少用户代理标头，服务器可能会返回 500（内部服务器错误）。[http://msdn.microsoft.com/en-us/library/system.net.webclient(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient(v=vs.80).aspx)

尝试改用 HttpWebRequest。[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)

# sql - 还原多个 SQL Server .bak 文件

> ID：10119011
> 
> 赞同：0
> 
> 时间：2012-04-12T07:08:58.900
> 
> 标签：sql, sql-server-2008, stored-procedures

我有一个包含多个 .bak sql server 文件的文件夹。

我想将它们恢复到 sql server。我如何编写脚本以便可以立即恢复该文件夹中的所有备份文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:15:22.317

```
RESTORE DATABASE [db1] FROM  DISK = N'C:\folder\db1.bak' WITH  FILE = 1,  MOVE N'DB_Data' TO N'C:\folder\db2.mdf',  MOVE N'DB_log' TO N'C:\folder\db1.LDF',  NOUNLOAD,  STATS = 10
GO
RESTORE DATABASE [db2] FROM  DISK = N'C:\folder\db2.bak' WITH  FILE = 1,  MOVE N'DB_Data' TO N'C:\folder\db2.mdf',  MOVE N'DB_Log' TO N'C:\folder\db2.LDF',  NOUNLOAD,  STATS = 10
GO 
```

尝试这样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T10:56:45.307

1.  我猜数据库名称没有写入 .bak 文件。不知道如何通过脚本检索。您可以使用文件名或任何其他临时名称来恢复数据库，并在恢复后在 SSMS 下重命名它。
2.  请注意，.bak 文件可能包含 DIFF 备份。在 DIFF 备份的情况下，它不会像那样工作 - 一个一个。
3.  如果文件夹包含 FULL BACKUP 和 TRANSACTION LOG 备份，最好使用 SSMS 中的备份历史记录开始还原数据库。

我们来谈谈从多个 BAK 文件中恢复多个数据库。我认为 GAWK 可能会有所帮助。这不是 MS 方式，但可能是最快的方式。

你知道GAWK吗？

让您使用文件名构建输入文件：

```
dir *.bak > input.txt 
```

将 GAWK 程序写入文件 program.gawk.txt：

```
BEGIN {
printf "-- My auto-generated script \n"
}
{
printf "RESTORE DATABASE [substr($1,1,length($1)-4)] FROM DISK = N'$1 \n'"
printf "GO \n\n"
}
END {
printf "-- End of script"
} 
```

尝试使用 substr 根据 BAK 文件名为恢复的数据库生成临时名称。不确定 substr 表达式是否正确 - 请检查自己。

*   $1 将从 input.txt 更改为文件名

*   substr($1,1,length($1)-4) 用于从文件名中剪切“.BAK”

通过以下方式构建输出脚本：

```
gawk --file=program.gawk.txt input.txt > my_script.sql 
```

..并审查它。

也许有可能做到这一点。不知道。

从以下网址下载 GAWK：http: [//gnuwin32.sourceforge.net/packages/gawk.htm](http://gnuwin32.sourceforge.net/packages/gawk.htm)

# text-editor - 如何在 joomla 2.5 的自定义组件中将编辑器添加到文本区域？

> ID：10119016
> 
> 赞同：0
> 
> 时间：2012-04-12T07:09:31.090
> 
> 标签：text-editor, joomla2.5

我在 joomla 2.5 中创建了一个自定义组件，其中字段在 xml 文件中创建。这是代码。

```
<?xml version="1.0" encoding="utf-8"?>
<form>
    <fieldset>
        <field
            name="id"
            type="hidden"
        />
        <field
            name="title"
            type="text"
            label="Title"
            description="This is the title"
            size="40"
            class="inputbox"
            default=""
            style="width:294px;height:135px;"
        />
        <field
            name="description"
            type="textarea"
            label="Description"
            description="This is the description"
            rows="20"
            cols="10"
            class="inputbox"
            default=""
        />
    </fieldset>
</form> 
```

我希望描述文本区域像在新文章表单中一样成为编辑器。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T07:56:42.010

我解决了我的问题。只需更改描述字段的类型。

```
<field
        name="description"
        type="editor"
        label="Description"
        description="This is the description"
        filter="safehtml"
        class="inputbox"
        default=""
    /> 
```

# c# - 使用实体框架时，POCO 是正确的选择吗？

> ID：10119018
> 
> 赞同：2
> 
> 时间：2012-04-12T07:09:34.407
> 
> 标签：c#, .net, entity-framework, poco

我已经阅读了一段时间的 POCO（普通旧 CLR 对象），但仍然找不到使用它而不是使用实体框架的自动生成的部分类的真正附加值？还有一件事是最好直接从表示层使用我的实体框架还是创建 BLL 会更好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T07:14:24.413

POCO 的主要好处是您可以将其传递给不需要了解有关实体框架的任何信息的类、库或程序集即可完成其工作。

记住单一职责原则——你的 DAL 应该知道 EF，但你的域不应该，你的表示层也不应该，因为 EF 处理数据访问而那些层不。将 EF 生成的类对象传递到这些层通常意味着您需要让这些层了解 EF，破坏 SRP 并使孤立地对这些层进行单元测试变得更加困难。

针对阿里在下方评论中的进一步询问，这里做个扩展解释。

在更复杂的应用程序中，您将希望将逻辑拆分为单独的关注点 - 数据访问、业务逻辑、表示（可能还有更多）。

由于实体框架处理数据访问，它位于数据访问层 - 在这里，您将看到 POCO 和 EF 生成的类之间几乎没有区别。这很好，因为这一层已经知道实体框架。

但是，您可能希望将数据向上传递到业务逻辑层 - 如果您使用 EF 生成的类执行此操作，那么您的业务逻辑层还必须了解实体框架，因为 EF 类依赖于 EF 专门提供的许多东西。这样做是为了消除您的业务逻辑层应该具有的隔离 - 您需要这种隔离，以便您可以通过将已知数据从假数据访问层注入到类中来正确地对其进行单元测试，如果您让业务逻辑层了解 EF。

通过单元测试，您应该测试层功能，而不是第三方库的功能 - 但是使用 EF，您最终会测试很多 EF 的功能，或者您自己的功能，这些功能非常依赖于 EF 的功能。这不好，它可以掩盖错误或问题。

删除对 EF 生成的类的业务逻辑依赖还允许您将该层从数据访问层移动到您喜欢的任意远程位置 - 您甚至可以将其粘贴在 Web 服务后面，它会非常高兴。但是您只能使用 POCO 执行此操作，而无法使用 EF 生成的类执行此操作。

POCO 确实在大型、复杂的多层应用程序中发挥了作用——如果您不分层应用程序，那么恕我直言，您将看不到一大堆好处。

所有这些都是我的观点，我只是一个有经验的编码员 - 我不是编码摇滚明星，所以其他一些评论者可能想进一步扩展我的答案......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:30:50.333

在 ORM 中使用 POCO 类允许您以更简单的方式为该代码创建测试。它还允许您在模型对象（PO​​CO 类）和数据访问代码之间有一个抽象层，因此如果需要，您可以交换数据访问代码（例如，EF 代表 NHibernate）。

我过去使用过 POCO 模型，我可以告诉您，它对于大型企业项目和大型开发团队非常有用，因为模型经常发生更改，并且 EF 默认使用的单一文件模型不能很好地扩展. 小项目或快速应用程序开发的好处很难看到。

**TLDR 版本：**如果您问自己 POCO 和代码优先的好处是什么，您可能不会从使用它们中获得任何好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:14:30.020

POCO 的真正好处是您可以使用代码优先和 EF 迁移。如果您不打算首先使用代码，则可以使用设计器生成的类。

如果您有一个大型应用程序，您应该创建一个单独的 BLL，但如果您的应用程序非常小，您可能可以直接使用表示层中的 EF 类。

# facebook - 根据他们的 Facebook 个人资料进行用户分析？

> ID：10119020
> 
> 赞同：12
> 
> 时间：2012-04-12T07:09:40.760
> 
> 标签：facebook, artificial-intelligence, machine-learning, facebook-timeline

我很确定，如果你仔细看任何朋友的时间线资料，你可以很容易地预测他/她的生活，即使你可以写出他/她的一生，你也可以找出他/她的隐藏事实从未直接但间接地告诉或更新他/她分享了 n 喜欢的相关内容，这将帮助您分析他/她的活动。是否有可能建立一个自动化系统，可以读取并分析朋友的整个 Facebook 个人资料、他/她的共享内容、喜欢、评论等，并创建一份报告，使用一些 AI 公开他/她的整个生活事实，包括隐藏的事实还是机器学习概念？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T03:19:52.620

没有任何系统能够自动提供您正在寻找的内容和理解。人类的大脑能够推断出很多计算机根本无法理解的东西。此外，您（通常）知道一些关于 Facebook 之外的人的事情（因为您是他们的朋友），这填充了分析系统不具备的许多细节。

你能做的最好的事情就是清楚地定义你的问题和你要问的问题。[麻省理工学院](http://www.boston.com/bostonglobe/ideas/articles/2009/09/20/project_gaydar_an_mit_experiment_raises_new_questions_about_online_privacy/)有一个“同性恋雷达”项目，它能够查看学生的网络，并通常将哪些是同性恋者关联起来。对于大型团体，您会发现它总体上有效，但对于个人而言，您将无法确定。

然而，仅仅要求计算机“查找隐藏信息”是行不通的。您需要有一个非常可靠的模型才能使用。总体而言，您可能还需要大量具有确认事实的数据才能开始测试该模型（需要数千个点）。此外，对于任何社交网络，您都会发现在任何给定的社交网络上都有很多不准确/虚假的数据。人们总是出于各种原因（幽默等）错误地列出事物，这会让你的模型望而却步。

# javascript - 输入字段内的按钮 Sencha Touch 2.0

> ID：10119021
> 
> 赞同：4
> 
> 时间：2012-04-12T07:09:41.477
> 
> 标签：javascript, sencha-touch-2

我试图实现的是这样的： ![在此处输入图像描述](../Images/fc858b6446737e2603ef086a2a249ec1.png)
只有在 Sencha Touch 应用程序中。我已经实现了一个输入字段，其旁边有一个按钮，但输入字段内没有一个按钮。
有没有办法在 Sencha Touch 2 中获得这个功能？（不使用 css 将按钮浮动到输入上方。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T11:52:43.980

你可以做到这一点，让我们试试：

```
{
    xtype: 'textfield',
    component: {
      xtype: 'container', 
      layout: 'hbox', 
      items: [
      {
        xtype: 'textfield', 
        flex: 3,
      }, 
      {
        xtype: 'button', 
        flex: 1, 
        text: 'test'
      }
      ]},
}, 
```

**说明**:`component`是输入字段的特殊配置，默认情况下，它设置为`{xtype: "input", type: "text"}`，这是此解决方法的关键。使用配置缩放你的`textfield`vs`button`宽度`flex`

希望能帮助到你。:)

# map - Clojure Map 2 Elem Code Golf

> ID：10119024
> 
> 赞同：1
> 
> 时间：2012-04-12T07:09:49.057
> 
> 标签：map, clojure

我有：

（地图（fn [kv] [kv]）lst1 lst2）

现在，似乎应该有一个更短的方法来写这个。我怎样才能让它更短？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:12:06.077

```
(map vector lst1 lst2) 
```

（具有为任意数量的列表工作的额外好处）

# sorting - 在分层导航中选择特定购物选项时设置默认排序方式

> ID：10119028
> 
> 赞同：5
> 
> 时间：2012-04-12T07:10:16.017
> 
> 标签：sorting, magento, layered-navigation

By default, I have sorting set to by Name, and when particular categories are selected, it's usually by Price. 但是，我不确定在按类别以外的选项购物时如何分配默认排序设置。我的分层导航中有一个名为“大小”的属性，当它用作过滤器时，我想按价格排序。

我想问题是是否有办法在 XML 中做到这一点——首先如何为除类别以外的购物选项调用适当的范围，其次如何更改排序依据设置。我猜测虽然通过 XML 是不可能的，而且我必须更深入，但任何建议都值得赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:41:37.977

我认为你将不得不覆盖一个核心文件才能完成你想要的（不要修改核心文件——通过将类复制到本地代码池或重写类来覆盖类）。默认情况下，顺序是在管​​理面板中设置的排序顺序。为了改变这一点，您将不得不修改该逻辑。

我首先查看 Mage_Catalog_Block_Layer_Category 类。这引用了 Mage_Catalog_Model_Layer_Filter_Category 类。此类处理获取分层导航的类别。

我认为您需要查看的函数是_getItemsData()。我认为您要么想要修改 $categories 的逻辑以设置所需的顺序（这可能是更可取的选项），要么您可以对放入 $data 数组的项目进行一些自定义排序.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:26:38.323

go to app\code\core\Mage\Catalog\Model\Resource\Eav\Mysql4\Product and open collection.php file and look into the function named as a addAttributeToSort() this function is responsible for sorting attribute, here you can put your logic for sorting and override your file after testing

# java - Java BigInteger 与 Mono .net BigInteger

> ID：10119032
> 
> 赞同：4
> 
> 时间：2012-04-12T07:10:32.207
> 
> 标签：java, .net, biginteger

我在 .Net 项目中使用 BigInteger 的单声道实现（[链接](http://svn.apache.org/repos/asf/incubator/heraldry/libraries/csharp/openid/trunk/Mono/Mono.Math/BigInteger.cs)）在 Java 中我使用 java.math.BigInteger。

相同的代码在 Java 中会产生不同的结果。

.Net 代码

```
 String inputBytes = "8E5BD77F0DCC30864634C134E28BFB42A149675A320786B616F4530708350D270353C30A40450325801B7AFED12BCCA274B8187072A89CC0CC3F95A24A8251243C1835898246F4D64CA3AC61DB841518F0E8FBC8996A40EB626153AE7F0BB87FD713FAC522719431428DE178E780A3FA45788A72C431926AED990E6DA268D2CC";
    String modulus = "00e6b4b4511e0bd1b3d9c82ee189ba6d0c70b1466d94126f99a741af99a92701a789451742a357ddb61a4dea409965ec58dcaa5e30826de871b04700ed0fd46b1693446049734e8f95faba2bf9301347e63ba1771650e71982adef0cca6890b6f7baa7f5421a6533652f4b70c3c4270c480cf54cc06635f22901a42716d1dadf4f";
    String exp = "010001";

    BigInteger mModulus = new BigInteger(hexStringToByteArray(modulus));
    BigInteger mExponent = new BigInteger(hexStringToByteArray(exp));
    BigInteger input = new BigInteger(hexStringToByteArray(inputBytes));
    BigInteger output = input.ModPow(mExponent, mModulus);
    Console.WriteLine("==RESULT==" + byteArray2Hex(output.GetBytes()));   

    public static byte[] hexStringToByteArray(string hexString)
    {
        if (hexString.Length % 2 != 0)
            throw new ArgumentException(String.Format(CultureInfo.InvariantCulture, "The binary key cannot have an odd number of digits: {0}", hexString));

        byte[] HexAsBytes = new byte[hexString.Length / 2];
        for (int index = 0; index < HexAsBytes.Length; index++)
        {
            string byteValue = hexString.Substring(index * 2, 2);
            HexAsBytes[index] = byte.Parse(byteValue, NumberStyles.HexNumber, CultureInfo.InvariantCulture);
        }

        return HexAsBytes; 
    }

    ==RESULT==01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF003020300C06082A864886F70D02050500041009EB0D996BFC1EFA5675997712A1AB6E 
```

Java 代码。相同的 inputBytes 数组，相同的指数和模数，但结果不同。

```
String inputBytes = "8E5BD77F0DCC30864634C134E28BFB42A149675A320786B616F4530708350D270353C30A40450325801B7AFED12BCCA274B8187072A89CC0CC3F95A24A8251243C1835898246F4D64CA3AC61DB841518F0E8FBC8996A40EB626153AE7F0BB87FD713FAC522719431428DE178E780A3FA45788A72C431926AED990E6DA268D2CC";
    String modulus = "00e6b4b4511e0bd1b3d9c82ee189ba6d0c70b1466d94126f99a741af99a92701a789451742a357ddb61a4dea409965ec58dcaa5e30826de871b04700ed0fd46b1693446049734e8f95faba2bf9301347e63ba1771650e71982adef0cca6890b6f7baa7f5421a6533652f4b70c3c4270c480cf54cc06635f22901a42716d1dadf4f";
    String exp = "010001";

    BigInteger mModulus = new BigInteger(hexStringToByteArray(modulus));
    BigInteger mExponent = new BigInteger(hexStringToByteArray(exp));
    BigInteger input = new BigInteger(hexStringToByteArray(inputBytes));

    BigInteger output = input.modPow(mExponent, mModulus);
    System.out.println("==RESULT==" + Utils.byteArray2Hex(output.getBytes()));

public static byte[] hexStringToByteArray(String s) {
    int len = s.length();
    byte[] data = new byte[len / 2];
    for (int i = 0; i < len; i += 2) {
        data[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) << 4)
                + Character.digit(s.charAt(i+1), 16));
    }
    return data;
}

==RESULT==6ce02bd9536ad76bcfd7633b6a2305ed98b43b0bb5fc2acbf984566f1ab35db02e651e9ed8793bf64b018455872b8ae3a06af082e8d680df407ea1e5df1336a19c6f3e116c6ff1940066396afa1de5633fad814fb42790b3af0e62e6dd53977f78794b2d105cdca9272f9c0feea119fe2c9691b6f6e21db3065fb25d840acea2 
```

我不明白为什么结果不同。

PS 例如，如果我使用 InputBytes

```
String inputBytes = "242e35241b85fcfd75a53441ef9fc0941064c16f8e4555dabef5ce8ebc91400c6961b6b607e5dd762dbcabce51b11c8594e7d7183786c8e3c5300c7583c1871fc6f350b817682150b5cd0430ca9a2c3f8315b425c8fea0e7cc18187237ed47d29b082e7e7154888d5fb09f092a6dd5e2d3dac9df8de45837b708b5ae17f03e7f"; 
```

Java 和 .Net 中的结果是一样的

```
==RESULT==01ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff003020300c06082a864886f70d02050500041046fd8e86a4833e7141cbe4718e8e92f7 
```

魔法在哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T07:14:21.013

从文档中[`java.math.BigInteger(byte[])`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#BigInteger%28byte%5B%5D%29)：

> 将包含 BigInteger 的二进制补码表示的字节数组转换为 BigInteger。输入数组假定为大端字节序：最高有效字节位于第零个元素中。

从文档中[`System.Numerics.BigInteger(byte[])`](http://msdn.microsoft.com/en-us/library/dd268207.aspx)：

> 值数组中的各个字节应按 little-endian 顺序，从最低位字节到最高位字节。

因此，您可能只想尝试反转您所拥有的值之一的输入字节 - 目前尚不清楚您应该反转*哪个*集合，因为我们不知道您要表示什么值。我建议在每种情况下在构造后立即添加仅打印正常十进制表示的诊断 - 如果这些不同，则其余代码无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T05:11:16.443

我通过在 inputBytes 的开头添加 0 位来解决我的问题。

# iphone - IOS 5.0 及更高版本的 UITextView 中未出现文本

> ID：10119033
> 
> 赞同：1
> 
> 时间：2012-04-12T07:10:33.987
> 
> 标签：iphone, ios, ipad, ios5

我正在开发一个 iPad 应用程序，我在其中将一些动态文本输入到 UITextView 中。如果我在 ios 5.0 以下测试它工作正常。但如果我在 ios 5.0 或更高版本上测试它，文本不会出现/不可见。我也尝试过不同的字体颜色。任何帮助都是不言而喻的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:23:07.520

所以，我正在做一个项目并遇到了同样的事情。在 5 以外的 iOS 版本中，UITextView 运行良好。但是，在 5 上，文本根本不会出现。我做了可能是最骇人听闻的事情来修复它。我将父视图设为 UITextView 委托，并在该视图的 textViewDidChange 方法中添加了代码：

```
textView.text = [NSString stringWithFormat:@"\n%@",textView.text];
textView.text = [textView.text stringByReplacingCharactersInRange:NSMakeRange(0, 1) withString:@""]; 
```

就修复而言，这基本上是一个笑话。也就是说，只需快速使其成为多行然后单行即可解决问题。我很确定这不是这个问题的*正确*答案，但希望它可以帮助某人弄清楚如何在紧要关头处理这个问题。

# android - 睡眠模式和深度睡眠模式有什么区别？

> ID：10119034
> 
> 赞同：8
> 
> 时间：2012-04-12T07:10:46.220
> 
> 标签：android

我想知道安卓手机的睡眠模式和深度睡眠模式有什么区别，手机进入睡眠模式和深度睡眠模式会有什么影响。

请给我详细的答案。

问候， 皮克斯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T18:17:20.303

正如有人在已删除的答案中所写，深度睡眠模式与休眠和启动时间没有任何关系。

你不应该避免手机睡眠，这会很快耗尽你的电池。要从服务器接收消息，您应该使用~~[C2DM]~~ [GCM ，它具有与](http://developer.android.com/google/gcm/index.html)[不推荐使用](http://developer.android.com/google/gcm/c2dm.html)的老式 C2DM 相同的基本特征。

有关 android 睡眠的更多信息：http: [//developer.android.com/reference/android/os/PowerManager.html](http://developer.android.com/reference/android/os/PowerManager.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T09:57:21.580

您可以使用 WAKE_LOCK 来防止设备进入深度睡眠。但是你必须考虑到电池消耗。更多信息：http: [//developer.android.com/reference/android/os/PowerManager.html](http://developer.android.com/reference/android/os/PowerManager.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-03T09:14:30.017

深度睡眠：将您的手机 CPU*中央处理单元（即大脑*）调至最低时钟周期速度。我的是200mhz，最大是1600mhz。

它还会禁用一些它认为您可能不会使用的传感器，例如*依赖于手机*摄像头、陀螺仪等。其中一些会被关闭以节省电量。

*当您根据控制器*唤醒手机时，它会将 cpu 时钟周期提高到 500mhz、800mhz 或 1600mhz，并重新激活传感器，将电源发送回手机可能具有 proxi 传感器的相机、cyro、磁铁*等*

这或多或少是深度睡眠的真正含义。程序，通过禁用未使用的传感器并将cpu时钟降至最低来节省电力。

致谢：vrigil kellogg [http://forums.androidcentral.com/sprint-galaxy-s-ii](http://forums.androidcentral.com/sprint-galaxy-s-iii/247066-what-deep-sleep.html) ​​i/247066-what-deep-sleep.html post#14

# objective-c - 从 iOS 中的数据数组创建 csv 文件

> ID：10119035
> 
> 赞同：17
> 
> 时间：2012-04-12T07:10:48.077
> 
> 标签：objective-c, ios, cocoa-touch, ipad, csv

我想将数据从 sql 文件写入 csv 文件。我已从数组中的 sql 文件收集所有数据，并使用 for 循环将数据附加并写入 .csv 文件。但似乎它仅在一行中显示数据，它不会转到新行来创建新行。我用[这个](https://stackoverflow.com/questions/3085206/iphone-write-csv-file-in-sandbox)作为参考。这是我的代码：

```
-(NSString *)dataFilePath { 
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
    NSString *documentsDirectory = [paths objectAtIndex:0]; 
    return [documentsDirectory stringByAppendingPathComponent:@"myfile.csv"];
}

- (IBAction)saveAsFileAction:(id)sender {    
    if (![[NSFileManager defaultManager] fileExistsAtPath:[self dataFilePath]]) {
        [[NSFileManager defaultManager] createFileAtPath: [self dataFilePath] contents:nil attributes:nil];
        NSLog(@"Route creato");        
    }

    NSString *writeString;    
    for (int i=0; i<[dataArray count]; i++) {        
        writeString = [NSString stringWithFormat:@"%@, %@, %@, %@, %0.2f,",[[dataArray objectAtIndex:i]dates],[[dataArray objectAtIndex:i] time],[[dataArray objectAtIndex:i] category],[[dataArray objectAtIndex:i]place],[[dataArray objectAtIndex:i] amount]];        
        NSLog(@"writeString :%@",writeString);        
        NSFileHandle *handle;
        handle = [NSFileHandle fileHandleForWritingAtPath: [self dataFilePath] ]; 
        //say to handle where's the file fo write
        [handle truncateFileAtOffset:[handle seekToEndOfFile]]; 
        //position handle cursor to the end of file
        [handle writeData:[writeString dataUsingEncoding:NSUTF8StringEncoding]];      
    }    
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-12T07:20:48.633

这只会写一行，因为每次执行循环时都会重写文件。最好`writeData`在循环完成之前不要在文件上。我也会像这样使用 NSMutableString：

```
- (IBAction)saveAsFileAction:(id)sender {

    if (![[NSFileManager defaultManager] fileExistsAtPath:[self dataFilePath]]) {
        [[NSFileManager defaultManager] createFileAtPath: [self dataFilePath] contents:nil attributes:nil];
        NSLog(@"Route creato");
    }

    NSMutableString *writeString = [NSMutableString stringWithCapacity:0]; //don't worry about the capacity, it will expand as necessary

    for (int i=0; i<[dataArray count]; i++) {
        writeString = [writeString appendString:[NSString stringWithFormat:@"%@, %@, %@, %@, %0.2f, \n",[[dataArray objectAtIndex:i]dates],[[dataArray objectAtIndex:i] time],[[dataArray objectAtIndex:i] category],[[dataArray objectAtIndex:i]place],[[dataArray objectAtIndex:i] amount]]]; //the \n will put a newline in
      }
    }

    //Moved this stuff out of the loop so that you write the complete string once and only once.
    NSLog(@"writeString :%@",writeString);

    NSFileHandle *handle;
    handle = [NSFileHandle fileHandleForWritingAtPath: [self dataFilePath] ]; 
    //say to handle where's the file fo write
    [handle truncateFileAtOffset:[handle seekToEndOfFile]]; 
    //position handle cursor to the end of file
    [handle writeData:[writeString dataUsingEncoding:NSUTF8StringEncoding]];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T13:07:34.537

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES); 
    NSString *documentsDir = [paths objectAtIndex:0];
    NSString *root = [documentsDir stringByAppendingPathComponent:@"customers.csv"];

    NSString *temp;

    temp = [NSString stringWithFormat:@"%@", [arrCustomersName objectAtIndex:0]];

    for (int i = 1; i < [arrCustomersName count]; i++) {

        temp = [temp stringByAppendingFormat:@", %@", [arrCustomersName objectAtIndex:i]];
    }

    [temp writeToFile:root atomically:YES encoding:NSUTF8StringEncoding error:NULL]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-31T13:05:57.350

试试这个它对我有用，

如果有人想在**swift 3中创建 .csv 文件**

```
 // MARK: CSV file creating
    func creatCSV() -> Void {

    let fileName = "Tasks.csv"

    let path = NSURL(fileURLWithPath: NSTemporaryDirectory()).appendingPathComponent(fileName)
    var csvText = "Date,Task Name,Time Started,Time Ended\n"

    for task in taskArr {
        let newLine = "\(task.date),\(task.name),\(task.startTime),\(task.endTime)\n"
        csvText.append(newLine)
    }

    do {
        try csvText.write(to: path!, atomically: true, encoding: String.Encoding.utf8)
    } catch {
        print("Failed to create file")
        print("\(error)")
    }
    print(path ?? "not found")
   }
  } 
```

有关更多详细信息，您可以参考[详细答案](https://stackoverflow.com/a/42898831/4527240)

希望这对某人有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-29T12:46:47.937

```
 // For CSV File :
       NSMutableString *stringToWrite = [[NSMutableString alloc] init];
 [stringToWrite appendString:[NSString stringWithFormat:@"First Name,Last Name,Full Name,Phone Number, Email,Job, organizationName,Note\n\n"]];
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
      for(int i = 0 ;i<[Contact count];i++)     {
           [stringToWrite appendString:[NSString stringWithFormat:@"%@,",[[Contact objectAtIndex:i] valueForKey:@"firstName"] ]];
           [stringToWrite appendString:[NSString stringWithFormat:@"%@,",[[Contact objectAtIndex:i] valueForKey:@"lastName"] ]];
           [stringToWrite appendString:[NSString stringWithFormat:@"%@,",[[Contact valueForKey:@"userName"] objectAtIndex:i]]];
           [stringToWrite appendString:[NSString stringWithFormat:@"%@,",[[Contact objectAtIndex:i] valueForKey:@"phoneNumber"] ]];
           [stringToWrite appendString:[NSString stringWithFormat:@"%@,",[[Contact objectAtIndex:i] valueForKey:@"emailAddress"] ]];
           [stringToWrite appendString:[NSString stringWithFormat:@"%@,",[[Contact objectAtIndex:i] valueForKey:@"jobTitle"] ]];
           [stringToWrite appendString:[NSString stringWithFormat:@"%@,",[[Contact  objectAtIndex:i] valueForKey:@"organizationName"] ]];
           [stringToWrite appendString:[NSString stringWithFormat:@"%@\n",[[Contact objectAtIndex:i] valueForKey:@"note"] ]];
      }
      dispatch_async(dispatch_get_main_queue(), ^(void) {
           NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
           NSString *documentDirectory=[paths objectAtIndex:0];
           NSString *strBackupFileLocation = [NSString stringWithFormat:@"%@/%@", documentDirectory,@"ContactList.csv"];
           [stringToWrite writeToFile:strBackupFileLocation atomically:YES encoding:NSUTF8StringEncoding error:nil];
      });
 }); 
```

# java - 图像插值 - 最近邻（处理）

> ID：10119037
> 
> 赞同：1
> 
> 时间：2012-04-12T07:10:58.650
> 
> 标签：java, image-processing, processing

我在处理中遇到了图像插值方法的问题。这是我想出的代码，我知道它会抛出越界异常，因为外部循环比原始图像更远，但我该如何解决呢？

```
PImage nearestneighbor (PImage o, float sf)
{
  PImage out = createImage((int)(sf*o.width),(int)(sf*o.height),RGB);
  o.loadPixels();
  out.loadPixels();
  for (int i = 0; i < sf*o.height; i++)
  {
    for (int j = 0; j < sf*o.width; j++)
    {
      int y = round((o.width*i)/sf);
      int x = round(j / sf);
      out.pixels[(int)((sf*o.width*i)+j)] = o.pixels[(y+x)];
    } 
  }

  out.updatePixels();
  return out;
} 
```

我的想法是将代表缩放图像中的点的两个分量除以比例因子并将其四舍五入以获得最近的邻居。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:31:28.210

为了摆脱`IndexOutOfBoundsException`尝试缓存`(int)(sf*o.width)`and的结果`(int)(sf*o.height)`。

此外，您可能希望确保不要离开界限，例如使用`x`and 。`y``Math.min(...)``Math.max(...)`

最后，应该是`int y = round((i / sf) * o.width;`因为你想得到原始比例的像素，然后与原始宽度相乘。示例：假设一个 100x100 的图像和 1.2 的缩放因子。缩放后的高度为 120，因此最高值为`i`119。现在，`round((119 * 100) / 1.2)`产量`round(9916.66) = 9917`。另一方面`round(119 / 1.2) * 100`产量`round(99.16) * 100 = 9900`- 你在这里有 17 像素的差异。

顺便说一句，变量名称`y`在这里可能会产生误导，因为它不是 y 坐标，而是坐标 (0,y) 处像素的索引，即高度 y 处的第一个像素。

因此，您的代码可能如下所示：

```
int scaledWidth = (int)(sf*o.width);
int scaledHeight = (int)(sf*o.height);
PImage out = createImage(scaledWidth, scaledHeight, RGB);
o.loadPixels();
out.loadPixels();
for (int i = 0; i < scaledHeight; i++) {
  for (int j = 0; j < scaledWidth; j++) {
    int y = Math.min( round(i / sf), o.height ) * o.width;
    int x = Math.min( round(j / sf), o.width );
    out.pixels[(int)((scaledWidth * i) + j)] = o.pixels[(y + x)];
  }
} 
```

# http - 有没有办法拦截所有的http、https流量

> ID：10119043
> 
> 赞同：0
> 
> 时间：2012-04-12T07:11:49.697
> 
> 标签：http, browser, capture, traffic, intercept

我用过很多家长控制软件，但没有一个是完美的。我想写我自己的。我想使用 C++ 或 java 或两者的组合。我的主要问题是如何捕获来自浏览器的所有流量。

我想以防黑客的方式做到这一点。

我非常感谢这方面的任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:16:17.060

您无法拦截来自 http/https 连接的数据传输

您将必须构建一个数据包嗅探器并找到一种方法来过滤掉您正在寻找的包，令我惊讶的是，当我尝试谷歌 C++ 数据包嗅探器教程时，我没有得到任何可靠的结果，但这就是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T14:11:02.823

对于 Windows，您需要为网络适配器创建过滤器驱动程序。在 linux 下，您可以为此目的使用原始套接字。不幸的是，windows 不支持全行套接字功能。

# sql - 增加数据库中的记录位置（通过 LINQ 或 TSQL）

> ID：10119047
> 
> 赞同：1
> 
> 时间：2012-04-12T07:12:00.430
> 
> 标签：sql, sql-server, linq, tsql, linq-to-sql

我有一个表（在 SQL Server 中），例如：

```
UserId    CompanyId    UserName    Position
     1            1    John        1
     2            2    Adam        1
     3            2    Nick        2
     4            1    Mark        2
     5            3    Jack        1 
```

UserId 是具有自动增量的 PK。CompanyID 是一个 FK。位置只是用户（每个公司）的顺序计数器。

当为公司插入新的用户记录（通过 LINQ）时，我希望职位也增加。目前，我获得给定 CompanyId 的职位的 MAX+1，然后将其分配给新记录。问题是并发插入操作通常会导致相同的 Position 值。

我尝试增加插入触发器中的位置以获得唯一性，但 LINQ 不会自动反映更新的值。

如何通过 LINQ-to-SQL 或直接作为 TSQL 查询来解决此问题？

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:20:50.257

您可以在和上添加[唯一约束](http://msdn.microsoft.com/en-us/library/ms191166%28v=sql.105%29.aspx)以防止重复。 `CompanyID``Position`

```
create table Users
(
  UserId int identity primary key,
  CompanyId int not null,
  UserName char(10) not null,
  Position int not null,
  unique(CompanyId, Position)
) 
```

而不是重复，你会得到一个异常，在你的代码中你可以做一些事情，比如重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:36:04.113

我的 2 美分：

```
begin transaction
    declare @v int
    select @v = isnull((select max(field2)+1 from t1), 1)
    insert into t1 (field2) values (@v)
commit transaction

-- just checking
select * from t1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T14:32:01.073

我可以告诉你有关 TSQL 查询的信息。您可以使用 **IDENT_CURRENT - 它为您提供****任何人**插入表中的最后一个 id 。如果这不是你想要的，那就试试 - SCOPE_IDENTITY

# java - Java：互联网地址

> ID：10119056
> 
> 赞同：1
> 
> 时间：2012-04-12T07:12:34.097
> 
> 标签：java

我通过使用将我的电子邮件存储在数据库中 `InternetAddress.toUnicodeString()`。

它给了我这样的字符串：`"John Doe" <doe@john.com>`

问题：如何解析该字符串以便将其转换回`InternetAddress`?

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:24:21.743

根据 javadoc，InternetAddress.toUnicodeString() 方法*应该为*您提供解码为 un​​icode 字符的符合 RFC 822 的电子邮件地址。但“John Doe”根本不是符合 RFC 822 的电子邮件地址。这表明问题在于首先创建这些 InternetAddress 对象。

当然，没有办法“解析”字符串“John Doe”并提取有效的电子邮件地址。信息根本无法提取。也许您可以在本地通讯录数据库中进行查找。

* * *

**更新**-

变成`"John Doe" <doe@john.com>`InternetAddress 的方法是使用`InternetAddress(String)`构造函数（[javadoc](http://docs.oracle.com/javaee/6/api/javax/mail/internet/InternetAddress.html#InternetAddress%28java.lang.String%29)）。这将自动解析输入字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:15:01.427

我会说，不可能。~~您应该选择在数据库中存储完整长度的电子邮件地址，或者存储电子邮件地址的 id（这需要单独的电子邮件地址表）。~~

只要确保您的 InternetAddress 对象有效。尝试对其调用 validate() 以查看它是否真的正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-30T19:25:02.087

您可以在您的情况下使用新的 InternetAddress(emailAddress,personalName) 方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-12T07:16:50.907

嗯...也许通过使用[带有字符串参数的构造函数](http://docs.oracle.com/javaee/6/api/javax/mail/internet/InternetAddress.html#InternetAddress%28java.lang.String%29)？请学习使用 Javadoc API - 您会比在这里提问更快地找到答案。

# javascript - JavaScript - 我们可以在 cookie 中设置 javascript 对象吗？

> ID：10119057
> 
> 赞同：2
> 
> 时间：2012-04-12T07:12:36.247
> 
> 标签：javascript, cookies

我正在尝试将一个 javascript 对象放入 Cookies 中，但不知何故它被转换为 String 对象。有什么方法可以在 JavaScript cookie 中设置对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T07:17:49.273

您可以使用[`JSON.stringify()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)将对象转换为 JSON 字符串并存储它。然后，当您阅读它们时，将字符串转换为 Object 使用[`JSON.parse()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)

此外，最好使用[LocalStorage](https://developer.mozilla.org/en/DOM/Storage#localStorage)而不是 cookie 来存储更大的数据。两者都存储字符串，但 cookie 只有 4kb，而 LocalStorage 大约为 5-10MB。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T07:16:51.440

您可以在保存到 cookie 之前将 Object 转换为 JSON，并在从 cookie 获取之后从 JSON 转换为 Object。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:36:47.013

此函数会将对象转换为字符串，使用它来对对象进行字符串化，然后添加到 cookie。

```
function JSONToString(Obj){

var outStr ='';
for (var prop in Obj) {
    outStr = '{';
    if (Obj.hasOwnProperty(prop)) {
        if(typeof Obj[prop] == 'object'){
            outStr += JSONToString(Obj[prop]);
        } else {
            outStr += prop + ':' + Obj[prop].toString();
        }
    }  
    outStr += '}';
}
return outStr;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T07:15:56.417

使用 JSON - JavaScript 对象表示法。这是一个很好[的使用 JSON 的教程](http://www.w3schools.com/json/)。

长话短说：它是将任何对象转换为特殊格式的文本字符串并返回的标准。因此，您将在 cookie 中存储一个 JSON 字符串。

# c# - C# 流编写器调用

> ID：10119058
> 
> 赞同：0
> 
> 时间：2012-04-12T07:12:39.377
> 
> 标签：c#, invoke, streamwriter

我想在跨线程中访问并编写一个 txt 文件，但软件给出了一个例外，因为多个线程想要同时访问同一个文件。如何调用 streamwriter 以避免异常？这是我的代码：

```
void WriteLog(string LogStr)
{
    StreamWriter sw = new StreamWriter("Log.txt", true);
    sw.WriteLine(LogStr);
    sw.Close();
} 
```

我在线程中调用 WriteLog 方法。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:15:30.240

您可以尝试使用互斥锁：

```
private Mutex mut = new Mutex(); // Somewhere in mail class
void WriteLog(string LogStr)
{
    mut.WaitOne();
    try 
    {
        using(StreamWriter sw = new StreamWriter("Log.txt", true))
            sw.WriteLine(LogStr);
    } 
    finally 
    {
        mut.ReleaseMutex();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:17:37.150

使用`Mutex`类：

```
Mutex mut = new Mutex(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:22:40.127

我认为，如果您不想等待日志（听起来很合乎逻辑），您应该将日志消息推送到同步队列（可从 .net 4 获得）并让后台线程处理所有日志写入。如果您使用互斥锁和锁，它会影响您的性能。在内存队列中写入比文件写入快得多。

# android - 删除sdcard上的文件？

> ID：10119059
> 
> 赞同：2
> 
> 时间：2012-04-12T07:12:41.893
> 
> 标签：android, sd-card, delete-file

我一直在尝试使用以下代码删除 sdcard 上的文件，但它不起作用。这是显示删除选项的上下文菜单，但是当我按下它时没有任何反应，顺便说一句，“pass”是我的应用程序在 sdcard 上创建的目录：

```
public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {  
            super.onCreateContextMenu(menu, v, menuInfo); 
                menu.setHeaderTitle("Context Menu");  
                menu.add(0, v.getId(), 0, "delete");  
                menu.add(0, v.getId(), 0, "wtever");  
            }  

        @Override  
        public boolean onContextItemSelected(MenuItem item) {  
            if(item.getTitle()=="delete"){function1(item.getItemId());}  
            else if(item.getTitle()=="wtever"){function2(item.getItemId());}  
            else {return false;}  
        return true;  
        }  

        public void function1(int id){  
            Toast.makeText(this, "function 1 called", Toast.LENGTH_SHORT).show();  
            File folder = Environment.getExternalStorageDirectory();
            String fileName = folder.getPath() + "/pass/hello.pdf";

            File myFile = new File(fileName);
            if(myFile.exists())
                myFile.delete();

        } 
```

// 列表类

```
 public class PDFListActivity extends ListActivity {
            ArrayAdapter<String> adapter;
            int clickCounter=0;
            ArrayList<String> listItems=new ArrayList<String>();
            private File[] imagelist;
            String[] pdflist;

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.mainlistpdf);
              File images=new File(Environment.getExternalStorageDirectory(), "pass");
                imagelist = images.listFiles(new FilenameFilter(){  
                        public boolean accept(File dir, String name)  
                        {    

                                return ((name.endsWith(".pdf")));  
                        }  
                });

                pdflist = new String[imagelist.length];
                for(int i = 0;i<imagelist.length;i++)
                {
                        pdflist[i] = imagelist[i].getName();
                }
                this.setListAdapter(new ArrayAdapter<String>(this,
                                android.R.layout.simple_list_item_1, pdflist));
                ListView list=getListView();
                registerForContextMenu(list);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:22:49.950

使用以下代码从 sdcard 中删除所有文件和目录::

```
public static boolean deleteDirectory(File path) {
        // TODO Auto-generated method stub
        if( path.exists() ) {
            File[] files = path.listFiles();
            for(int i=0; i<files.length; i++) {
                if(files[i].isDirectory()) {
                    deleteDirectory(files[i]);
                }
                else {
                    files[i].delete();
                }
            }
        }
        return(path.delete());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:41:09.183

使用此[链接](http://developer.android.com/guide/topics/ui/menus.html#context-menu)创建自定义上下文菜单并将您的菜单文件放在 res/menu 文件夹中。

或尝试替换以下代码

```
File folder = Environment.getExternalStorageDirectory();
String fileName = folder.getPath() + "/pass/hello.pdf"; 
```

和

```
 String fileName = Environment.getExternalStorageDirectory() + "/pass/hello.pdf"; 
```

# c# - 通过从数据库加载数据创建 Gridview 列标题

> ID：10119060
> 
> 赞同：4
> 
> 时间：2012-04-12T07:12:51.280
> 
> 标签：c#, asp.net, sql-server-2008

我想通过从表中检索数据来绑定我的网格列标题名称。该表有两个字段，DomainID 和 DomainName，我想将 DomainNames 显示为 Grid 的列标题。实际上我正在创建员工网格视图。我希望所有员工的域名都显示为标题，我必须在复选框中检查相应的域。

请给我一些想法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:48:47.227

据我了解......

1.  制作网格视图
2.  创建两列：文本框列 B. 复选框列
3.  使用 .HeaderText 属性设置列标题
4.  将列添加到数据网格视图
5.  查询您的数据库并从中获取 data_table
6.  使用 dgv.DataSource = data_table 将您的数据绑定到表或为 data_table 中的所有行创建一个 for 循环并显式添加每一行

7.  为了使您的复选框起作用，请处理数据网格视图的 cellContentClick 事件并在您的数据库中执行必要的更新.....

希望能帮助到你....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T10:37:00.497

您可以将标题加载到 a 中`DataTable`，然后使用自定义动态创建它们`TemplateField`。

这是aspx部分：

```
<asp:GridView ID="GridView1" AutoGenerateColumns="false" DataKeyNames="EmployeeID" runat="server" >
    <SelectedRowStyle BackColor="Aqua" />
    <Columns>
        <asp:TemplateField HeaderText="Employee" SortExpression="Employee">
           <ItemTemplate>
                <asp:HiddenField ID="HiddenEmpID" Value='<%# Bind("EmployeeID") %>' runat="server" />
                <asp:label runat="server" ID="LblEmployee" Text='<%# Bind("EmployeeName") %>'></asp:label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView>
<asp:Button ID="BtnSave" Text="Save" runat="server" onclick="BtnSave_Click" /> 
```

这是一个完整的示例：

```
public partial class GridTest : System.Web.UI.Page
{
    protected void Page_Init(object sender, EventArgs e)
    {
        CreateGridColumns();
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack) BindGrid();
    }

    private void CreateGridColumns()
    {
        var tblDomain = GetDomains();
        // Create dynamic TemplateFields
        foreach (DataRow row in tblDomain.Rows)
        {
            String domainName = row.Field<String>("DomainName");
            TemplateField field = new TemplateField();
            //Initalize the DataField value.
            field.ItemTemplate = new GridViewCheckBoxTemplate(ListItemType.Item, domaninName);
            field.HeaderText = domainName;
            //Add the newly created field to the GridView.
            GridView1.Columns.Add(field);
        }
    }

    private DataTable GetDomains()
    {
        var tblDomain = new DataTable();
        tblDomain.Columns.Add("DomainID", typeof(int));
        tblDomain.Columns.Add("DomainName");
        tblDomain.Rows.Add(1, "Google.com");
        tblDomain.Rows.Add(2, "Yahoo.com");
        tblDomain.Rows.Add(3, "Msn.com");
        tblDomain.Rows.Add(4, "Youtube.com");
        tblDomain.Rows.Add(5, "Myspace.com");
        tblDomain.Rows.Add(6, "Facebook.com");
        tblDomain.Rows.Add(7, "Wikipedia.org");
        return tblDomain;
    }

    private void BindGrid()
    {
        var tblDomain = GetDomains(); // load domains from database or wherever
        var tblData = new DataTable();// load sample data
        tblData.Columns.Add("EmployeeID", typeof(int));
        tblData.Columns.Add("EmployeeName");
        //add domains as DataTable-Columns 
        foreach (DataRow row in tblDomain.Rows)
        {
            String domaninName = row.Field<String>("DomainName");
            //Add column from domain-name
            tblData.Columns.Add(domaninName, typeof(bool)); //CheckBox-Checked is a boolean
        }

        //get some Employees and random checked state
        var rnd = new Random();
        var empRow = tblData.NewRow();
        empRow["EmployeeID"] = 1;
        empRow["EmployeeName"] = "Jon";
        foreach (DataRow dom in tblDomain.Rows)
        {
            empRow[dom.Field<String>("DomainName")] = rnd.Next(0, 2) == 0;
        }
        tblData.Rows.Add(empRow);
        empRow = tblData.NewRow();
        empRow["EmployeeID"] = 2;
        empRow["EmployeeName"] = "Eric";
        foreach (DataRow dom in tblDomain.Rows)
        {
            empRow[dom.Field<String>("DomainName")] = rnd.Next(0, 2) == 0;
        }
        tblData.Rows.Add(empRow);
        empRow = tblData.NewRow();
        empRow["EmployeeID"] = 3;
        empRow["EmployeeName"] = "Alain";
        foreach (DataRow dom in tblDomain.Rows)
        {
            empRow[dom.Field<String>("DomainName")] = rnd.Next(0, 2) == 0;
        }
        tblData.Rows.Add(empRow);

        GridView1.DataSource = tblData;
        GridView1.DataBind();
    }

    // show how to retrieve all checkbox values and the according EmployeeID
    protected void BtnSave_Click(object sender, EventArgs e)
    {
        if (GridView1.Rows.Count == 0) return;
        var checkBoxColumns = GridView1.Columns.Cast<DataControlField>()
            .Select((bf,index) => new{Field=bf, Index=index})
            .Where(f => f.Field.GetType() == typeof(TemplateField) && ((TemplateField)f.Field).ItemTemplate.GetType() == typeof(GridViewCheckBoxTemplate))
            .ToArray();

        foreach (GridViewRow row in GridView1.Rows)
        {
            int EmployeeID = int.Parse(((HiddenField)row.FindControl("HiddenEmpID")).Value);
            foreach (var f in checkBoxColumns)
            {
                String domain = f.Field.HeaderText;
                bool isChecked = row.Controls[f.Index].Controls.OfType<CheckBox>().First().Checked;
            }
        }
    }
} 
```

这是习俗`ITemplate`：

```
public class GridViewCheckBoxTemplate : ITemplate
{
    ListItemType _templateType;
    string _columnName;

    public GridViewCheckBoxTemplate(ListItemType type, string colname)
    {
        _templateType = type;
        _columnName = colname;
    }

    void ITemplate.InstantiateIn(System.Web.UI.Control container)
    {
        switch (_templateType)
        {
            case ListItemType.Header:
               break;
            case ListItemType.Item:
                var chb1 = new CheckBox();
                chb1.DataBinding += new EventHandler(CB_DataBinding);
                container.Controls.Add(chb1);
                break;
            case ListItemType.EditItem:
                //As, I am not using any EditItem, I didnot added any code here.
                break;
            case ListItemType.Footer:
                break;
        }
    }

    void CB_DataBinding(object sender, EventArgs e)
    {
        CheckBox chb = (CheckBox)sender;
        GridViewRow container = (GridViewRow)chb.NamingContainer;
        object dataValue = ((DataRowView)container.DataItem)[_columnName];
        chb.Checked = dataValue != DBNull.Value && (bool)dataValue;
    }
} 
```

# jquery - 如何解决jquery mobile和jquery中的jquery冲突

> ID：10119064
> 
> 赞同：2
> 
> 时间：2012-04-12T07:13:04.437
> 
> 标签：jquery, mobile

我正在做一个网站以在移动设备中查看，并使用移动 css 和 jquery 来制作效果。我使用下面的代码来制作样式和效果。

```
<link rel="stylesheet" href="<?=base_url()?>css/jquery_01.css" /> 

 <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0-rc.2/jquery.mobile-1.1.0-rc.2.min.js"></script> 
```

在我的网站中，我有一部分用于绘图，所以我使用了 jquery

```
http://slot.pixelass.com/ 
```

但是当我包含上述移动 jquery 时，用于绘图的 jquery 将不起作用。我不知道`how to tackle jquery conflict`。

请有人帮助任何帮助将被appeciate。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:50:35.897

调用了一个特定的 jQuery 函数`jQuery.noConflict()`来帮助消除与其他库的任何冲突。这是[jQuery 文档](http://api.jquery.com/jQuery.noConflict/)的一个片段：

```
<script type="text/javascript">
  // This takes out the jQuery variable '$' from the global scope
  $.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
  });
  // Code that uses other library's $ can follow here.
</script> 
```

# java - Java HttpURLConnection 类程序

> ID：10119067
> 
> 赞同：2
> 
> 时间：2012-04-11T18:49:39.933
> 
> 标签：java, constructor, httpurlconnection

我正在通过使用一本教科书来学习 Java，其中包含以下代码，描​​述了如何使用`HttpURLConnection`...

```
class HttpURLDemo {
    public static void main(String args[]) throws Exception {
        URL hp = new URL("http://www.google.com");
        HttpURLConnection hpCon = (HttpURLConnection) hp.openConnection();

        // Display request method.
        System.out.println("Request method is " + hpCon.getRequestMethod());
        }
    } 
```

有人可以解释为什么该`hpCon`对象以下列方式声明...

```
HttpURLConnection hpCon = (HttpURLConnection) hp.openConnection(); 
```

而不是像这样声明它......

```
HttpURLConnection hpCon = new HttpURLConnection(); 
```

教科书作者提供了以下解释，我不是很明白...

> Java 提供了一个 URLConnection 的子类，它提供对 HTTP 连接的支持。此类称为 HttpURLConnection。您可以通过在 URL 对象上调用 openConnection( ) 以刚才显示的相同方式获得 HttpURLConnection，但您必须将结果转换为 HttpURLConnection。（当然，您必须确保您实际打开的是 HTTP 连接。）一旦您获得了对 HttpURLConnection 对象的引用，您就可以使用从 URLConnection 继承的任何方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T19:16:27.133

你不明白为什么不使用的声明：

```
 HttpURLConnection hpCon = new HttpURLConnection(); 
```

不提供有关要打开连接的 URL 的信息。这就是您应该使用的原因：

```
HttpURLConnection hpCon = new HttpURLConnection(hp); 
```

因为这样构造函数就知道您要打开到 url 的连接`"http://www.google.com"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:55:24.340

`java.net.URLConnection``ftp` `http`是一个抽象类，有助于通过各种协议（等） 与各种类型的服务器进行通信。

***协议特定***的子类隐藏在 SUN 的包中，这些隐藏的类负责协议的具体实现。

在您的示例中，由于您的 URL 是`http://www.google.com`通过解析 URL，因此 URL 类的内部知道必须使用 HTTP 处理程序/子类。
因此，当您打开与服务器的连接时，`hp.openConnection();`您将获得一个实现 HTTP 协议的类的具体实例。

该类是一个实例`HttpURLConnection`（实际上是一个子类，因为`HTTPURLConnection`也是`abstract`，这就是为什么你可以这样做：

`HttpURLConnection hpCon = (HttpURLConnection) hp.openConnection();`并且没有得到类转换异常。

因此，对于 Java 的设计，你不能`HttpURLConnection hpCon = new HttpURLConnection(hp);`按照你的要求去做，因为设计者不希望你这样使用这些 API。

您应该在 arround 工作`URL`，`URLConnections`并且只担心输入/输出。
你不应该担心其余的

# java - 重绘 JPanel 在 JApplet 中不起作用

> ID：10119069
> 
> 赞同：2
> 
> 时间：2012-04-12T07:13:45.107
> 
> 标签：java, swing, applet, jpanel

我有包含子 JPanel 和按钮的主 JPanel（在 JApplet 中）。我想单击按钮使子 JPanel 删除，并将另一个子 JPanel 添加到主 JPanel，但问题是只有当我重新单击按钮或调整 JApplet 的大小时，第二个子 JPanel 才会出现。

我的按钮的监听器：

```
button.addActionListener(new ActionListener(){

        @Override
        public void actionPerformed(ActionEvent e) {
            panel.remove(custompanel);
            panel.add(new CustomPanel("/hinhtu2.jpg"), BorderLayout.CENTER);
            panel.repaint();
            panel.revalidate();

        }
        }); 
```

我的整个代码：

```
 import java.awt.BorderLayout;
 import java.awt.Color;
 import java.awt.Graphics;
 import java.awt.Image;
 import java.awt.Toolkit;
 import java.awt.event.ActionEvent;
 import java.awt.event.ActionListener;
 import java.io.File;
 import java.io.IOException;

 import javax.imageio.ImageIO;
 import javax.swing.BorderFactory;
 import javax.swing.ImageIcon;
 import javax.swing.JApplet;
 import javax.swing.JButton;
 import javax.swing.JLabel;
 import javax.swing.JPanel;

 public class applet extends JApplet {
   public void init() {

    try {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createGUI();
            }
        });
    } catch (Exception e) {
        //System.err.println("createGUI didn't successfully complete");
        e.printStackTrace();
    }
}

 private void createGUI() {
    final JPanel panel = new JPanel(new BorderLayout());
    JButton button = new JButton("CLICK ME");
    panel.add(button, BorderLayout.SOUTH);
    final CustomPanel custompanel = new CustomPanel("/hinhtu.jpg");
    panel.add(custompanel, BorderLayout.CENTER);

    button.addActionListener(new ActionListener(){

        @Override
        public void actionPerformed(ActionEvent e) {
            panel.remove(custompanel);
            panel.add(new CustomPanel("/hinhtu2.jpg"), BorderLayout.CENTER);
            panel.repaint();
            panel.revalidate();

        }

        });

    add(panel);
    }

public class CustomPanel extends JPanel{
    String resource;
    public CustomPanel(String resource){
        super();
        this.resource = resource;

    }
    public void paintComponent(Graphics g) {

        Image x = Toolkit.getDefaultToolkit().getImage(getClass().getResource(resource));
        g.drawImage(x, 0, 0, null); 

    }   

} 
```

}

我的屏幕记录：[http ://www.screenr.com/prx8](http://www.screenr.com/prx8)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T07:32:55.100

您应该在此处重绘之前调用 revalidate：

```
 panel.remove(custompanel);
        panel.add(new CustomPanel("/hinhtu2.jpg"), BorderLayout.CENTER);
        panel.repaint();
        panel.revalidate(); 
```

重新验证调用更新容器层次结构，之后可能需要重新绘制。容器调整大小同时进行（重新验证和重新绘制），这就是在您调整小程序大小后出现面板的原因。

我还注意到你的代码中有一件坏事：

```
public void paintComponent(Graphics g) {
    Image x = Toolkit.getDefaultToolkit().getImage(getClass().getResource(resource));
    g.drawImage(x, 0, 0, null); 
} 
```

**每次**自定义组件重绘时，您都在加载图像。最好将图像加载移动到构造函数中并仅加载一次。

# php - 表单提交中的汉字

> ID：10119072
> 
> 赞同：0
> 
> 时间：2012-04-12T07:14:10.577
> 
> 标签：php, javascript, mysql, post, cjk

客户页面：

```
<head>
<meta http-equiv="Catchup Scheduler" content="text/html; charset=UTF-8">
</head>

<body>
<form action="next.php" method="POST" >
<input type="text" name="programme_name"></br>
<input type="submit">
</form>
</body> 
```

服务器页面：

```
$name = $_POST['programme_name'];

mysql_query("SET character_set_client=utf8",$con);
mysql_query("SET character_set_connection=utf8", $con);
mysql_query("SET character_set_results=utf8", $con);

$query = "Select * from programme where Programme_name Like '%".$name."'"; 
```

问题是虽然数据库中有中文文本，但查询总是返回`ZERO(none)`。如果我打印 POST 值`$name`，它会显示带有中文字符的正确文本。

但是如果我将它存储在一个变量中，例如：

```
$name= "valuevalue ( 官话 )";
$query = "Select * from programme where Programme_name Like '%".$name."'"; 
```

它产生结果。这怎么可能，在 POST 中它不是静态值声明而是它呢？我的操作系统是 XP SP3。

如果在 POST 中，汉字的“内部”表示是否有问题？我需要在我的操作系统中设置一些东西来支持中文表示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T22:47:36.777

您正在喂 mySQL 未转义的原始输入。

在您的输入字符串上使用`mysql_real_escape_string`或更好地使用 PDO 与数据库对话。

# jquery - 如何保留空格、制表符、CR 和 LF？

> ID：10119073
> 
> 赞同：0
> 
> 时间：2012-04-12T07:14:11.473
> 
> 标签：jquery, html

字符串`s`包括空格、制表符、CR 和 LF。`alert()`可以正确渲染格式，但是`$("#mydiv").text(s)`丢失了CR和LF，我希望`$("#mydiv").text(s)`可以正确渲染格式，我该怎么做？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Js/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $("#Button1").bind("click", function () {
                alert(s);
                $("#mydiv").text(s);
            });
        });
    </script>
</head>
<body>
    <p>
        <input id="Button1" type="button" value="button" /></p>
    <div id="mydiv">
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:18:24.313

您可以`#mydiv`为此提供一些 CSS 样式：

```
#mydiv { white-space: pre; } 
```

问题是，jQuery`.text()`方法只是设置 HTML 文本，而 HTML 元素将所有连续的空白字符连接到一个空格，并且如果它们是块元素（`<pre>`除了明显的例外），还会去除第一个和最后一个。这个 CSS 声明告诉 div`<pre>`在这种情况下表现得像 a。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T07:32:33.447

尝试使用 .html(s) 而不是 .text(s)

# jakarta-ee - 从 Java EE 应用程序呼叫电话

> ID：10119086
> 
> 赞同：1
> 
> 时间：2012-04-12T07:14:55.577
> 
> 标签：jakarta-ee, telephony

我需要创建一个网页，它将从数据库加载用户的所有电话号码（手机/固定电话）。这些数字将像单选按钮一样显示，另一个按钮“呼叫”就在单选按钮的下方。

然后，页面的管理员可以选择任何电话号码并单击通话按钮以使用该电话号码发起通话。

我打算不使用 VOIP。

前两天学习了TWILIO、freeswitch、JTAPI，但是没找到最好的解决方案。

如果有人从事过任何此类功能，请提供帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:45:48.607

Twilio 员工在这里..

一般来说，实际上有两种方法。一种是让按钮启动其他东西来实际拨打电话。您可以使用 Skype 或与我们保持联系，您可以使用基于 Javascript 的 Twilio Client 并将您的浏览器变成电话。更多信息： http: [//www.twilio.com/api/client](http://www.twilio.com/api/client)

或者，您可以创建一个呼叫流程，在单击按钮后，它会自动拨打用户，然后拨打您要呼叫的人。这会贵一点，因为有两个出站拨号支路，但如果您想跳过纯 VoIP 路由，这可能是一个更好的选择。示例： http: [//www.twilio.com/docs/howto/click-to-call](http://www.twilio.com/docs/howto/click-to-call)

如果您遇到任何问题，我会密切关注此线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:37:56.330

我花了很多时间思考与 SMS 相同的问题，结果证明 twillio 是最好的选择。 [https://stackoverflow.com/questions/8937120/how-can-i-send-a-massive-number-of-sms-messages-without-incurring-a-huge-bill](https://stackoverflow.com/questions/8937120/how-can-i-send-a-massive-number-of-sms-messages-without-incurring-a-huge-bill)

您可以使用 android 模拟器并通过 flash 将其连接回您的客户端，但我无法想象延迟会有多糟糕。您也可以使用非官方的 google voice api。总的来说，不建议在不使用 voip 或供应商的情况下实现 google voice 的功能。我无法想象如何在保持音质的同时将延迟降至最低。想一想，如果你是接听电话的人，电话是从哪里来的？它必须来自一个数字！我想你的意思不是你不想使用VOIP，而是你不想付出代价。

# linux - 关于在 Linux 上构建具有最小依赖性的 Web 服务的建议

> ID：10119090
> 
> 赞同：0
> 
> 时间：2012-04-12T07:15:18.040
> 
> 标签：linux, web-services, native, daemon

我需要关于在 Linux 系统上构建 Web 服务的框架/库的建议。我有以下要求：

*   它应该具有最小的依赖关系，例如最好不需要任何像 Java 或 Mono 这样的 VM。
*   我的服务实现应该可以访问本机系统 API，最好应该可以直接调用 C API。
*   如果可能，该解决方案不应依赖于大型 Web 服务器安装。据我了解，Axis/C++ 需要一个 Apache 服务器，对吗？是否有任何东西允许编写某种“自托管”Web 服务，例如在`ServiceHost`Linux 上的 .NET () 中？我真的很喜欢最终作为独立守护进程工作的东西。
*   生成的服务应该符合标准，因为我需要进行跨平台调用。最重要的是，我需要 WS-Security。
*   解决方案必须是开源的，实际的许可证不太重要。

如果您有任何建议，请发布（网络链接会很好;-)）

在此先感谢，克里斯托夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:01:47.550

扭曲的呢？[http://twistedmatrix.com/trac/](http://twistedmatrix.com/trac/)

# android - Android 应用程序更新通知

> ID：10119092
> 
> 赞同：10
> 
> 时间：2012-04-12T07:15:24.217
> 
> 标签：android, notifications, google-play

一个月前，我将我的应用程序上传到了安卓市场。现在我已经上传了它的新版本。我的设备上安装了旧版本。但我没有收到更新通知。当我将应用程序更新到 Android Market 时，是否有任何选项可用于向用户发送更新通知？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T07:19:14.513

默认情况下不是：市场通知不会以任何方式向应用程序开发人员公开。如果您想通知您的用户，您需要将其构建到您的应用程序中：设置一个服务器，该服务器公开一个报告最新版本的 HTTP url，然后使用 an`AlarmManager`调用该 URL 并查看设备上的版本是否是与最新版本相同。如果没有弹出消息或通知并将其发送到市场进行升级。[这里](https://stackoverflow.com/questions/7298106/android-app-check-for-latest-app-version)描述的相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-04T19:56:42.603

试试这个库，它可以检查 Google Play、GitHub、Amazon、F-Droid 或您自己的服务器上的更新。该库通过显示 Material 对话框、Snackbar 或通知来通知您的应用程序的更新。查看[wiki](https://github.com/javiersantos/AppUpdater/wiki)。

# php - 如何使 PHP 项目的 Eclipse 中的源文件夹可见？

> ID：10119097
> 
> 赞同：0
> 
> 时间：2012-04-12T07:15:31.787
> 
> 标签：php, eclipse, eclipse-pdt

我遇到了日食问题。

目前，如果项目在 Eclipse 中具有 PHP 特性，则我的包含源的文件夹不可见： ![在此处输入图像描述](../Images/dd77923313043b9c7ea8df99d9689604.png) ![在此处输入图像描述](../Images/4484a779ac4290429b012d4e89bf85f6.png)

有什么解决办法吗？或者我应该重新安装我的eclipse？

PS可能有一个很好的指南如何设置一个好的Eclipse + PDT + PHPUnit env？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:21:25.373

单击“查看菜单”（PHP Explorer 的右上角），单击“按名称空间分组”。

# list - Sencha Touch Filter List 用于大于给定值的值

> ID：10119099
> 
> 赞同：0
> 
> 时间：2012-04-12T07:15:34.857
> 
> 标签：list, filter, sencha-touch

我有一个会议室列表，他们支持的人员容量如下。数据类似于：

```
{
            "name" : "Room 1",
            "city" : "Mumbai",
            "capacity" : 4
},
{
            "name" : "Room 2",
            "city" : "Mumbai",
            "capacity" : 10
},
{
            "name" : "Room 3",
            "city" : "Mumbai",
            "capacity" : 6
},
{
            "name" : "Room 6",
            "city" : "Mumbai",
            "capacity" : 3
},
{
            "name" : "Room 4",
            "city" : "Mumbai",
            "capacity" : 2
}    
// etc etc 
```

现在我想添加一个过滤器，以便当我选择需要满足应用程序的 ppl 数量时，我会向我显示所有容量大于此数字的房间。

例如：如果我说我正在寻找 4 人的房间，它应该告诉我房间 1,2,3。如果我搜索 2 个人的房间，它会显示所有房间。等等。

到目前为止，如果我使用过滤器，这就是我现在所做的：

```
store.filter("capacity",2) 
```

它只向我显示容量为 2 的房间。而不是容量更大的房间。

我应该怎么办？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:07:01.363

您需要像这样创建一个过滤器函数：

```
var roomFilter = new Ext.util.Filter({
    filterFn: function(item) {
        return item.capacity > 2;
    }
}); 
```

然后：

```
var largeRooms = store.filter(roomFilter); 
```

P/S：如果`Ext.util.Filter`不适用于您的`Store`，您应该创建一个类型为 的数据的克隆`Ext.util.MixedCollection`。

# c# - 检查树路径中节点的最佳算法？

> ID：10119102
> 
> 赞同：1
> 
> 时间：2012-04-12T07:15:43.510
> 
> 标签：c#, algorithm, path, tree

假设我有这棵树：

```
 O-ROOT
         /        \
    O-A            O-B
     /          /       \
O-A1        O-B1        O-B2 
```

我想在 C# 中做到这一点：

```
1\. Check every node starting from root (I think the best way is trought recursion?);
2\. If I found a node with value = "Hello", return true and STOP the searching function; 
```

你能帮我制定出最好的算法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:20:17.883

我认为解决您的问题的最佳方法是使用[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)。它写起来很简单，并且尽可能有效。

编辑：是这样的：

```
public bool Search(TreeNode node, string searchString)
{
   Queue<Control> q = new Queue<Node>();
   q.Enqueue(node);
   while(!q.empty()) {
     Node current = q.Dequeue();
     foreach(var childNode in node.Children)
       if(childNode.Content.CompareTo(searchString) == 0) {
         return true;
       }
       q.Enqueue(childNode);
     }
   }
   return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T07:20:54.920

```
bool FindHello(Node node)
{
    if (node.Content == "Hello")
        return true;
    foreach (Node c in node.Children)
        if (FindHello(c))
            return true;
    return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:19:57.370

[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)和[深度优先搜索](http://en.wikipedia.org/wiki/Depth-first_search)是最流行的（除其他外）树搜索技术，因此您可以从那里开始。此外，如果树中的每个节点最多有 2 个节点并且它们以某种方式排序，则可以使用二[叉搜索树](http://en.wikipedia.org/wiki/Binary_search_tree)技术。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T07:20:55.607

您对递归是正确的，请参阅[深度优先](http://www.kirupa.com/developer/actionscript/depth_breadth_search.htm)或广度优先搜索算法。由于您没有保留已访问节点的列表，因此对树来说要容易得多。

```
public bool Search(TreeNode node, string searchString)
{
   if(node.Value == searchString) return true;
   foreach(var childNode in node.Children)
     if(Search(childNode, searchString)) return true;
   return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T07:17:49.150

1.  确实，一定要为此使用递归。
2.  如果您使用递归方法，则可以设置一个（静态）成员变量，如结果并检查每次迭代是否已设置。如果设置，只需跳出方法（返回）以停止递归进一步运行。

# windows - 为什么 Perl 系统调用无法调用内部 Windows 命令？

> ID：10119108
> 
> 赞同：2
> 
> 时间：2012-04-12T07:16:07.497
> 
> 标签：windows, perl, cygwin, cmd, system

在我们的一台 Windows XP 机器上，Perl 系统命令（例如）会`dir /b`生成错误消息，例如：`/b: no such file or directory`. 换句话说，开关被解释为文件名。

无论我使用`backticks`,`open()`还是`system()`. 我什至尝试将开关作为单独的参数传递给 system()。当然，我已经确认该调用在 DOS 命令行或批处理脚本上正常工作。

有没有其他人遇到过这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T11:39:27.933

您可能安装了 Cygwin 并且`dir.exe`在您的路径中，该路径不是`cmd.exe`内置的，而是`ls`.

```
C:\> 哪个目录
/usr/bin/目录

C:\> c:\opt\cygwin\bin\dir.exe --version
目录（GNU coreutils）8.15
由 Cygwin 打包（8.15-1）
…

C:\> 目录 /b
…

C:\> perl -e "打印`dir /b`"
dir: 无法访问 /b: 没有这样的文件或目录

C:\> perl -e "打印`cmd /c dir /b`"
…
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:25:19.210

未验证：

`dir`是命令解释器内置的命令。`/c`使用or开关运行命令解释`/k`器，后跟要执行的命令。

# zend-framework - 没有提供分页器实例或zend中的类型不正确？

> ID：10119109
> 
> 赞同：0
> 
> 时间：2012-04-12T07:16:14.187
> 
> 标签：zend-framework

我正在尝试使用 zend 在 jquery 移动框架中实现分页。我有以下从控制器中获取的代码，

```
...
        $message_list = $this->help->browse($browseArray); 
        $this->view->vCount = count($message_list); 
        $paginator = Zend_Paginator::factory($message_list);
        $page = ($postData['page'] > 0) ? $postData['page'] : 1;
        $paginator->setCurrentPageNumber($page);
        $paginator->setItemCountPerPage(10);
        $paginator->setPageRange(5);

        $this->view->message_list = $paginator;   
.... 
```

我还从模板页面中获取了以下代码，

```
....
    <ul data-role="listview"  data-theme="e">
        <?php foreach ($this->message_list as $key => $value) { ?>
            <li>
                <img src="<?php echo BASE_URL; ?>public/common/images/mobile/jqueryMobile200Thumb.jpg" alt="" />
                <h3><a href="<?php echo $this->url(array("controller" => "help", "action" => "dohelp", "id" => $value['helpid'])); ?>"><?php echo $value['title']; ?></a></h3>
                <p><?php echo $value['content']; ?></p>
            </li>
        <?php } ?>    
            <li>
                <?php echo $this->paginationControl($this->message_list, 'Sliding', 'pagination.phtml'); ?>
            </li>           
    </ul>
.... 
```

当我运行该站点时，出现以下异常

```
 Exception information:

        Message: No paginator instance provided or incorrect type
        Stack trace:

        #0 [internal function]: Zend_View_Helper_PaginationControl->paginationControl(NULL, 'Sliding', 'pagination.phtm...')
#1 C:\xampp\htdocs\test\library\Zend\View\Abstract.php(350): call_user_func_array(Array, Array)
#2 C:\xampp\htdocs\test\application\mobile\views\scripts\help\messagelist.phtml(32): Zend_View_Abstract->__call('paginationContr...', Array)
#3 C:\xampp\htdocs\test\application\mobile\views\scripts\help\messagelist.phtml(32): Zend_View->paginationControl(NULL, 'Sliding', 'pagination.phtm...')
#4 C:\xampp\htdocs\test\library\Zend\View.php(108): include('C:\xampp\htdocs...')
#5 C:\xampp\htdocs\test\library\Zend\View\Abstract.php(888): Zend_View->_run('C:\xampp\htdocs...')
#6 C:\xampp\htdocs\test\library\ZC\Controller\Plugin\Mobile.php(54): Zend_View_Abstract->render('help/messagelis...')
#7 C:\xampp\htdocs\test\library\Zend\Controller\Plugin\Broker.php(287): ZC_Controller_Plugin_Mobile->dispatchLoopStartup(Object(Zend_Controller_Request_Http))
#8 C:\xampp\htdocs\test\library\Zend\Controller\Front.php(928): Zend_Controller_Plugin_Broker->dispatchLoopStartup(Object(Zend_Controller_Request_Http))
#9 C:\xampp\htdocs\test\library\Zend\Application\Bootstrap\Bootstrap.php(97): Zend_Controller_Front->dispatch()
#10 C:\xampp\htdocs\test\library\Zend\Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#11 C:\xampp\htdocs\test\index.php(34): Zend_Application->run()
#12 {main}  
    .... 
```

我在这方面做错了什么。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:29:23.237

试试这个方法：

```
$paginator = new Zend_Paginator(new Zend_Paginator_Adapter_Array($message_list)); 
```

要回答您的问题，出现错误`$this->message_list`是因为`null`尝试调试它的原因`null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T08:37:05.563

检查您是否`$paginator`在视图对象中正确设置了变量。我遇到了这种情况，发现我没有正确地这样做。

# asp.net - 使用xml linq检索具有相同名称的元素与where条件

> ID：10119118
> 
> 赞同：0
> 
> 时间：2012-04-12T07:16:58.863
> 
> 标签：asp.net, linq-to-xml

我的 XML 如下所示

```
<Exchange>
    <Rec>
        <data headers="Currency">USD</data>
        <data headers="Value">1.0609</data>
    </Rec>
    <Rec>
        <data headers="Currency">GBP</data>
        <data headers="Value">0.6694</data>
    </Rec>
    <Rec>
        <data headers="Currency">INR</data>
        <data headers="Value">54.123</data>
    </Rec>
</Exchange> 
```

我必须在 asp.net 中使用 XML Linq 检索值（1.0609）取决于货币（美元）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T15:21:22.850

```
var xml = XElement.Load("XMLFile1.xml");

string curr = "USD";
var number = (from node in xml.Elements("Rec").Elements("data")
    where (string)node.Attribute("headers") == "Currency" && node.Value == curr
    select node into data
    from value in data.Parent.Elements("data")
    where (string)value.Attribute("headers") == "Value"
    select (double)value).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:28:47.220

这是一种方法。虽然不是特别优雅。

```
var doc = XDocument.Load(@"<path>\exchange.xml");

// convert xml to List<> containing Currency and Value
var q = doc.Element("Exchange").Elements("Rec").Select (e => 
    new {
        Currency = e.Elements("data").
                Where (x => "Currency" == (string) x.Attribute("headers")).
                Select (x => (string)x).Single (),

        Value = e.Elements("data").
                Where (x => "Value" == (string) x.Attribute("headers")).
                Select (x => (double)x).Single (),
    }
);

// select the value we're after
var q1 = q.Where (x => x.Currency == "USD").Select (x => x.Value).Single ();

q1.Dump(); 
```

# objective-c - NSArrayController + NSTableView : 自动保存更改，无需 Core Data

> ID：10119125
> 
> 赞同：1
> 
> 时间：2012-04-12T07:17:32.673
> 
> 标签：objective-c, cocoa, nstableview, nsarraycontroller, autosave

好的，所以我正在实现一个经典场景：

*   A`NSPopupButton`里面有一些物品
*   当所选值更改时，我`itemsArray`已更新
*   `itemsArray`链接到一个`NSArrayController`
*   中的每个项目`itemsArray`都是一个`NSMutableDictionary`（带有键 : `title`, `content`）
*   An`NSTableView`显示（绑定）的`title`s`arrangedObjects`
*   显示所选项目的`NSTextView`。`content`

现在，我想要的是自动保存对 itemsArray（或 itemsArray 的项目标题/内容）的任何更改，但不使用核心数据（我怀疑这可能是最好的方法）。

我想这是一个相当基本的问题，但老实说，我从来没有真正喜欢过 Cocoa 的自动魔法做事方式......所以，我需要你的帮助......

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T21:13:38.507

您可以非常轻松地将数组写入文件：

```
[yourArray writeToURL:someFileURL atomically:YES]; 
```

如果数组的所有内容都是属性列表对象（即它们是`NSNumber`、`NSString`、或对象）`NSDictionary`，这将起作用。在您的示例中就是这种情况。`NSArray``NSData`

然后，您可以在从磁盘加载时使用`arrayWithContentsOfURL:`或方法重新创建阵列。`initWithContentsOfURL:`

如果您的模型对象不仅仅是一个数组，那么您应该使您的模型对象符合`NSCoding`协议。这意味着您需要实现`initWithCoder:`and`encodeWithCoder:`方法。然后，您可以使用`NSKeyedArchiver`和`NSKeyedUnarchiver`类将对象与`NSData`可以写入磁盘的表示形式相互转换。

您应该阅读[存档和序列化编程指南](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Archiving/Archiving.html)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T23:21:48.287

另一种解决方案可能是添加一个并将`Shared User Defaults Controller`控制器*内容数组*从`Array Controller``Shared User Defaults Controller`

# android - Android ListView 在滚动时崩溃

> ID：10119127
> 
> 赞同：2
> 
> 时间：2012-04-12T07:17:47.740
> 
> 标签：android, android-listview

我在这里看到一个奇怪的错误..我有一个从服务器异步填充的列表视图...它首先填充然后显示列表视图...但是当我向下滚动时它崩溃...从日志我看到它与列表视图的人口无关......你能帮帮我吗？

```
04-12 12:39:54.676: E/AndroidRuntime(1984): FATAL EXCEPTION: main
04-12 12:39:54.676: E/AndroidRuntime(1984): java.lang.NullPointerException
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.widget.AbsListView.obtainView(AbsListView.java:1304)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.widget.ListView.makeAndAddView(ListView.java:1727)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.widget.ListView.fillUp(ListView.java:682)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.widget.ListView.correctTooHigh(ListView.java:1349)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.widget.ListView.fillGap(ListView.java:624)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.widget.AbsListView.trackMotionScroll(AbsListView.java:2944)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.widget.AbsListView.onTouchEvent(AbsListView.java:2065)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.widget.ListView.onTouchEvent(ListView.java:3315)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.view.View.dispatchTouchEvent(View.java:3766)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:897)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1671)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.app.Activity.dispatchTouchEvent(Activity.java:2086)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1655)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1785)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.os.Looper.loop(Looper.java:123)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at java.lang.reflect.Method.invokeNative(Native Method)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at java.lang.reflect.Method.invoke(Method.java:521)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
04-12 12:39:54.676: E/AndroidRuntime(1984):     at dalvik.system.NativeStart.main(Native Method) 
```

这是扩展基本适配器的自定义适配器类

```
@Override
public int getCount() {

    return mAppIconMapList.size();
}

@Override
public Object getItem(int position) {

    return mAppIconMapList.get(position);
}

public Object getAppName(int position) {

    return mAvaiableApps.get(position);
}

@Override
public long getItemId(int position) {

    return position;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    // sets the view onto list view
    LinearLayout rowLayout = null;

    System.out.println("getView " + position + " " + convertView);

    if (convertView == null) {
        // inflating the row
        rowLayout = (LinearLayout) mInflater.inflate(
                R.layout.list_custom_row, parent, false);

        mAppIcon = (ImageView) rowLayout.findViewById(R.id.icon);
        mAppName = (TextView) rowLayout.findViewById(R.id.application);
        mAppName.setTextColor(Color.WHITE);
        mAppHint = (TextView) rowLayout.findViewById(R.id.hint);
        mAppHint.setTextColor(Color.WHITE);
        mDownloadButton = (Button) rowLayout.findViewById(R.id.download);
        mDownloadButton.setFocusable(false);

    }
    // else
    // convertView.getTag();

    mIcon = mAppIconMapList.get(position);
    System.out.println("Icon " + mIcon);
    mCurrentApplication = mAvaiableApps.get(position);
    System.out.println("Current App " + mCurrentApplication);
    mAppIcon.setImageBitmap(mIcon.get(mCurrentApplication));
    mAppName.setText(mCurrentApplication.replace(".apk", ""));
    mAppHint.setText("Click here to view Description");

    return rowLayout;
} 
```

这就是我打电话的方式

```
mCustomAdapter = new BWCustomAdapter(mCategory, avaiableApps,
                            appIconMap, BWListApplication.this);
                    setListAdapter(mCustomAdapter); 
```

这是我的列表视图

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="450dip"
    android:layout_height="300dip"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:fadingEdge="none"
        android:listSelector="@drawable/list_selector" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T07:44:58.637

你真的应该使用 ViewHolder 模式。但这不是您看到空指针的原因。您需要`rowLayout`始终分配一个值。

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    // sets the view onto list view
    LinearLayout rowLayout = null;

    System.out.println("getView " + position + " " + convertView);

    if (convertView == null) {
        // inflating the row
        rowLayout = (LinearLayout) mInflater.inflate(
                R.layout.list_custom_row, parent, false);

    } else {
        rowLayout = convertView;
    }
    mAppIcon = (ImageView) rowLayout.findViewById(R.id.icon);
    mAppName = (TextView) rowLayout.findViewById(R.id.application);
    mAppName.setTextColor(Color.WHITE);
    mAppHint = (TextView) rowLayout.findViewById(R.id.hint);
    mAppHint.setTextColor(Color.WHITE);
    mDownloadButton = (Button) rowLayout.findViewById(R.id.download);
    mDownloadButton.setFocusable(false);

    mIcon = mAppIconMapList.get(position);
    System.out.println("Icon " + mIcon);
    mCurrentApplication = mAvaiableApps.get(position);
    System.out.println("Current App " + mCurrentApplication);
    mAppIcon.setImageBitmap(mIcon.get(mCurrentApplication));
    mAppName.setText(mCurrentApplication.replace(".apk", ""));
    mAppHint.setText("Click here to view Description");

    return rowLayout;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:35:39.997

1.  您在定义自定义适配器时没有遵循**ViewHolder模式**
2.  从以下代码中删除注释：

> ```
>  // else
>  // convertView.getTag(); 
> ```

# android - 列表视图标题和第一项之间的空白

> ID：10119132
> 
> 赞同：34
> 
> 时间：2012-04-12T07:18:13.980
> 
> 标签：android, header, android-listview, footer, divider

我用 ListView 创建了一个 android 应用程序。我在列表中添加了页眉和页脚。但是在添加分隔符/分隔符时，它还会在标题和第一个 ListView 项之间创建一个空白空间。它对最后一个 ListView 项和页脚执行相同的操作。

空白空间相当于所有ListView项之间的分隔线的大小，不同的是它不绘制分隔线，只是留下空白空间。我以为我找到了带有 xml 属性“已启用页脚分隔符”和“已启用页眉分隔符”的解决方案。但是当它们设置为 false 时，它​​不会改变任何东西。我什至尝试以编程方式设置它们

```
list.setFooterDividerEnabled(false);
list.setHeaderDividerEnabled(false); 
```

但它只是行不通。有什么办法可以解决这个问题？我只是不希望有空白空间，我希望第一个项目完全适合页眉（页脚也是如此）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-10T10:07:12.360

我偶然发现了同样的问题，但情况与您的情况略有不同。My`ListView`有一个标题（一个搜索框），但它下面的第一个项目包含一个部分标题（日期或字母）而不是常规列表项（实际内容以图像、一些文本和很快）。因此，我希望它不是可选的，所以在我的自定义适配器中，我已经覆盖`areAllItemsEnabled`了 return `false`。

大错特错，因为这正是罪魁祸首。看，看起来，按照设计，`ListView`实现[只在两个启用的项目之间绘制分隔线](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/uoiJo0djRZ8)，但仍然为启用的项目和禁用的项目之间的分隔线保留空间，即使这些分隔线不会被绘制。当然，这是一个有意识的设计决定并不意味着它不愚蠢。最奇怪的是，此分隔线绘制策略仅基于返回的值，而不是基于对后续项目`areAllItemsEnabled`的单个调用返回的值。`isEnabled`

因此，为了解决这个问题，我只需要返回`true`（`areAllItemsEnabled`我保留了被覆盖的方法并添加了关于这个问题的评论，否则一个月后我将无法记住它）：你瞧，空白消失了，被分频器代替。现在，如果我想将`ListView`标题和第一个部分标题显示为完全相邻，我只需要选择一个与部分标题颜色相同的分隔线颜色。

真的希望这与您的情况相同，或者我的解决方案以其他方式帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:04:47.843

我尝试了幻影浪子的[解决方案](http://blog.csdn.net/feng88724/article/details/7904807)（基于[android-pulltorefresh](https://github.com/johannilsson/android-pulltorefresh)）：

视图布局（header.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <RelativeLayout
        android:id="@+id/content"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ProgressBar
            style="@android:style/Widget.ProgressBar.Small.Inverse"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:layout_margin="16dp"
            android:layout_marginTop="2dp" />
    </RelativeLayout>
</LinearLayout> 
```

充气视图：

```
m_headerView = inflater.inflate(R.layout.header, this, false); 
```

显示视图：

```
m_headerView.setPadding(0, 0, 0, 0);
m_headerView.setVisibility(View.VISIBLE); 
```

隐藏视图：

```
m_headerView.setPadding(0, -1000, 0, 0);
m_headerView.setVisibility(View.GONE); 
```

它在我们的项目中完美运行。我希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T09:16:35.903

在 getview 方法中，您可以检查项目是第一个还是最后一个，并设置自定义分隔符，其高度为 0 或透明颜色的单个像素高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T08:02:05.377

转到 android 布局中的 ListView 属性并搜索间距标签...在 android 中，当创建新布局时，它会默认创建间距标头间距和边框属性。检查它，如果它可用，则将其删除

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-03T01:07:59.660

没有找到很好的解决方案。

手动设置`dividerHeight="0dp"`和创建我自己的分隔线 - 如果您需要更精确的控制，可以直接在布局 XML 中或在适配器中动态设置。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-07-27T22:19:03.393

做就是了

`list.setDividerHeight(0)`

那应该照顾它。

# iphone - 重新加载没有动画的 UITableView

> ID：10119133
> 
> 赞同：4
> 
> 时间：2012-04-12T07:18:14.603
> 
> 标签：iphone, uitableview

我想要实现的是 UITableView 快速重新加载。每个单元格都有“检查” UIButton wchich 告诉用户该单元格的项目已被选中。所有选定的单元格都应位于列表的末尾（底部单元格）。

我使用 NSFetchResultsController 作为 UITableView 的委托和数据源。NSFetchResultsController 设置为使用“Item”实体操作，其中为“checked”属性选择了 sectionKey（部分 od“Item”实体 which ）

```
- (id)initWithItemView:(ItemView*)iv{
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Item" inManagedObjectContext:[CoreDataHandler context]];
    [request setEntity:entity];
    NSArray *predicates = [NSArray arrayWithObjects:[iv listDBUsingContext:[CoreDataHandler context]],nil];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"lista IN %@ AND deletedDB == NO", predicates];
    [request setPredicate:predicate];
    [request setFetchBatchSize:20];
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"checked" ascending:YES selector:@selector(compare:)];
    NSSortDescriptor *sortDescriptor2 
        = [[NSSortDescriptor alloc] initWithKey:@"position" ascending:YES selector:@selector(compare:)];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, sortDescriptor2, nil];
    [request setSortDescriptors:sortDescriptors];
    [sortDescriptors release];
    [sortDescriptor release]; 
    [sortDescriptor2 release];
    if (self=[[FastTableDelegate alloc] 
              initWithFetchRequest:request 
              managedObjectContext:[CoreDataHandler context] 
              sectionNameKeyPath:@"checked"
              cacheName:nil]) 
    {
        self.delegate = self;
        self.itemView = iv;
        self.heightsCache = [NSMutableDictionary dictionary];
    }
    [request release];
    [self performFetch:nil];
    return self;
} 
```

然后，当用户在单元格中点击 UIButton 时，我更改了 NSmanagedObject （项目实体）中的“已检查”属性并保存上下文。然后通知我的 NSFetchReslutsController 一项更改了它的状态，并使用函数执行 UITableView 重新加载

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath {

    UITableView *tableView = self.itemView.tableView;
    switch(type) {

        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                             withRowAnimation:UITableViewRowAnimationNone];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                             withRowAnimation:UITableViewRowAnimationNone];
            break;

        case NSFetchedResultsChangeUpdate:
            [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                             withRowAnimation:UITableViewRowAnimationNone];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                             withRowAnimation:UITableViewRowAnimationNone];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                             withRowAnimation:UITableViewRowAnimationNone];
            break;
    }
} 
```

因为我更改了“已检查”属性，即我的 NSFetchedResultsController UITableView 的 sectionKey 应该在这种情况下重新加载

```
case NSFetchedResultsChangeMove:
                [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                                 withRowAnimation:UITableViewRowAnimationNone];
                [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                                 withRowAnimation:UITableViewRowAnimationNone];
                break; 
```

这是一个问题，因为当插入或延迟单元格时，UITableView 会执行持续时间约为 0.5 秒的动画。在这个时候 UITableView 停止接收下一个单元格的事件，因此当用户“检查”另一个单元格时，它不会收到有关该点击的通知。我想要实现的是让用户能够快速检查一些单元格，而无需等待动画结束。

可能的解决方案：

1.  使用 reloadData 而不是 deleteRowsAtIndexPaths/insertRowsAtIndexPaths。这将不是动画，但重新加载所有 UITableView 的持续时间比重新加载一个单元格的时间长，所以在我的情况下，用户将等待 UITableView 重新加载 - 再次等待。有没有办法在不重新加载所有 UITableView 的情况下避免动画？

2.  允许用户检查单元格，但仅在最后一次选择单元格后 0.5 秒后保存上下文。用户可以选择快速的多个单元格，当他结束选择时，所有更改都会传播到 UITableView - 我的老板希望将每个选定的单元格发送到第二部分而不分组，然后为每个选定的单元格重新加载 - 再次是个坏主意

3.  也许一些自定义 tableView（用户创建，而不是苹果）？

首要目标：

使用户能够在每次“检查”后快速“检查”单元格刷新 UITableView

我对任何理想持开放态度:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:31:48.140

在 -(void)viewDidAppear:(BOOL)animated 中重新加载表格

```
-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    [yourTable reloadData];

} 
```

# ruby-on-rails - 创建一个显示所有属于关联的记录的视图

> ID：10119134
> 
> 赞同：0
> 
> 时间：2012-04-12T07:18:21.223
> 
> 标签：ruby-on-rails

我正在尝试创建一个显示属于关联的所有记录的视图，但不确定如何去做。

我在 view/members/showmembers.html.erb 中创建了一个 erb 文件，在 members_controller.rb 中添加了“showmembers”方法，但是当我转到[http://localhost:3000/members/showmembers](http://localhost:3000/members/showmembers)时，它说*“找不到id=showmembers' 的成员*及其指向控制器 *'app/controllers/members_controller.rb:29:in 'show'* 中的 show 方法。

```
 def showmembers    
    @organization = Organization.find(1)
    @shmembers = @organization.members.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @members }
    end
  end 
```

showmembers.html.erb

```
 <% @shmembers.each do |shmember| %>
      <tr>
        <td><%= shmember.id %></td>
        <td><%= shmember.first_name %></td>
      </tr>
    <% end %> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:23:35.293

该错误表明 Rails 不知道使用哪个操作来处​​理此请求：[http://localhost:3000/members/showmembers](http://localhost:3000/members/showmembers)。

由于这个请求是“GET”，Rails 选择了“show”动作。

所以解决方案是简单地编辑你的 config/routes.rb，并添加这个路由：

```
resources :members do 
  collection do
    get :showmembers  # add this line 
  end 
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:29:09.253

请将其粘贴到您的路线文件中，否则它会映射以显示导致此错误的操作，请先定义路线\

```
 resources :members do 
      collection do
         get :showmembers  
      end 
     end 
```

然后在控制器中

```
 hmembers = @organization.members 
```

不需要这个成员 = @organization.members.all

如果你很好地定义了关联......

# javascript - jQuery 表单错误检查

> ID：10119136
> 
> 赞同：0
> 
> 时间：2012-04-12T07:18:28.337
> 
> 标签：javascript, jquery, forms

我正在为一个网站做一个简单的 jQuery 表单检查器。我在网站上有两种表格：登录表格和注册表单。我的代码如下：

```
$('.btn').click(function(e) {
    e.preventDefault();
    // DOES SOME ERROR CHECKING HERE
    if { hasError $('div.error').fadeIn() }

    else { $(this).parents('form').submit() }
}); 
```

所以我的问题是，登录按钮和注册按钮都有一个名为 btn 的类，我怎样才能让他们检查并提交自己的表单，而不是检查页面上的所有表单，因为 $(this).parents('form ') 会同时获得注册和登录表单吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:23:01.093

没有 $(this) 将获得您点击了相应 btn 的表单。“this”关键字传递一个元素的对象，所以不要担心这段代码会运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T07:25:24.450

`$(this).parents('form')`如果返回多个元素，则您的 html 标记确实有问题。另外，考虑将您的代码缩短为

```
$('.btn').click(function(e) {

    // DO SOME ERROR CHECKING HERE

    if (hasError) {
        e.preventDefault();
        $('div.error').fadeIn();
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:28:34.650

给他们id，然后这样处理。

```
$('#btn1).click(....
$('#btn2).click(.... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T07:30:16.973

更改您的 HTML 表单结构，以便当您单击任一按钮时，您可以选择相应的表单。

```
<form action="get">
    <input type="text" value="1" />
    <input type="button" class="btn" />
</form>

<form action="get">
    <input type="text" value="1" />
    <input type="button" class="btn" />
</form> 
```

和 jQuery：

```
$(function(){
    $(".btn").click(function(){
        $(this).closest("form").submit();
    });
}); 
```

编辑

更好的错误处理选择器

```
$(this).closest('form').find('.required').each(function(){
}); 
```

[http://jsfiddle.net/c9GXZ/6/](http://jsfiddle.net/c9GXZ/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T07:31:07.110

如果你想继续你的代码，那么你可以看看 jQuery 的[.parent()](http://api.jquery.com/parent/)和[.parents()](http://api.jquery.com/parents/)方法。

.parents() 和 .parent() 方法是相似的，只是后者只在 DOM 树上向上移动一层。

尝试，使用`$(this).closest('form').submit()`而不是`$(this).parents('form').submit()`. 我不是用户，但我认为您已在表单中包含表单（也请检查或共享您的 HTML。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-12T07:31:11.700

```
$('.btn').click(function(e) {
    e.preventDefault();
    // DOES SOME ERROR CHECKING HERE
    if (hasError) {  $('div.error').fadeIn(); } //some syntax change
    else { $(this).closest('form').submit() }  ///will get the nearest form element and stop there and will submit it as per your code...
}); 
```

**更新**

替换这个

```
$('.btn').click(function(e) { 
```

有了这个

```
$('.btn').on('click',function(e){ 
```

这让它在你的 jsfiddle url 中工作......

# java - 如何在 TabActivity 中从外部 Activity 填充列表视图适配器

> ID：10119142
> 
> 赞同：1
> 
> 时间：2012-04-12T07:18:51.280
> 
> 标签：java, android

我有以下问题。

我在一个带有 2 个标签的 tabActivity 中。每个选项卡都会启动相同的活动，但有一个 onTabChangeListener。在这个 tabchange 监听器中，我需要为每个活动设置不同的列表视图适配器。所以我将有两个不同的列表，我想从 TabActivity 更改他们的适配器，从这个 onTabchangeListener，但我收到以下错误：系统服务在 oncreate() 之前对活动不可用选项卡的代码是：

```
 host = getTabHost();

    host.addTab(host.newTabSpec(TAG_AVAILABLE).setIndicator("First Tab")
            .setContent(new Intent(this, MyActivity.class)));
    host.addTab(host.newTabSpec(TAG_DOWNLOAD).setIndicator("Second Tab ")
            .setContent(new Intent(this, MyActivity.class)));
    host.setOnTabChangedListener(new TabHost.OnTabChangeListener() {
        @Override
        public void onTabChanged(String s) {
            MyActivity myActivity = new MyActivity();
            int i = getTabHost().getCurrentTab();
            if (i == FIRST_TAB) {
                setAdapterForMyActivity(firstAdapter);       
            }
            }
            if (i == SECOND_TAB) {
                 setAdapterForMyActivity(secondAdapter);        
            }
            }
        }
    });

} 
```

主要问题是如何设置来自 TabActivity 的 Activity 中的 listView 的适配器。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:31:04.227

如果要将适配器传递给子活动，则需要某种全局共享对象。一种选择是将适配器传递给父 TabActivity 中的 Application 对象，然后在子活动中检索它。

# asp.net - 将 IIS Express 配置为使用 http 和 https 的默认端口进行调试

> ID：10119143
> 
> 赞同：1
> 
> 时间：2012-04-12T07:18:51.173
> 
> 标签：asp.net, visual-studio-2010, iis, ssl, iis-express

我关注了[scot](http://www.hanselman.com/blog/WorkingWithSSLAtDevelopmentTimeIsEasierWithIISExpress.aspx)关于如何分别为 http 和 https 启用默认端口（80 和 443）的文章。我已经按照每个步骤进行操作，最后 IIS 快速系统托盘向我显示该站点正在以下 url 上运行

![在此处输入图像描述](../Images/60feaf3212be483570528c61767b25ee.png)

我唯一不同的是使用`netsh>advfirewall>firewall`上下文，因为它告诉我`netsh firewall`不推荐使用。我使用以下命令允许端口 80 通过防火墙

```
netsh advfirewall firewall add rule name="Open Port 80" dir=in action=allow protocol=TCP localport=80 
```

这是 IIS Express 的 applicationhost.config 文件中的相关站点部分

```
<site name="SSLTest" id="4">
                <application path="/" applicationPool="Clr4IntegratedAppPool">
                    <virtualDirectory path="/" physicalPath="G:\Adeel\SSLTest\SSLTest" />
                </application>
                <bindings>
                    <binding protocol="http" bindingInformation="*:51518:localhost" />
                    <binding protocol="https" bindingInformation="*:44301:localhost" />
                    <binding protocol="http" bindingInformation="*:80:mhlabs" />
                  <binding protocol="https" bindingInformation="*:443:mhlabs" />
                </bindings>
            </site> 
```

**编辑：**问题是当我浏览到 http:/mhlabs 或 https:/mhlabs 时它不起作用。我找不到浏览器的页面。我怎样才能解决这个问题。
**Edit2：**好的，作为第一步，我想忘记 ssl，只在端口 80 上为 test-one 保留一个 url，并在这个 url 上运行我的网站。想到的逻辑步骤是我保留一个 url，`netsh http add urlacl url=http://test-one:80/ user=everyone`并在 applicationhost.config 文件的 bindings 部分添加此条目。我还允许端口 80 通过防火墙，但整个事情似乎对我不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T16:50:57.100

您是从命令行启动 iis express 还是使用 WebMatrix？

如果您不是从命令行启动它，请尝试以下步骤并查看是否有任何绑定错误。

1.  启动命令提示符，转到 iis express 安装文件夹 '%programfiles%\iis express'

2.  运行以下命令

    iisexpress.exe /site:SSLTest

3.  如果有任何绑定注册失败，您会看到一些错误消息。如果 'mhlabs' 绑定注册有任何错误，请确保您的 URL 保留是正确的。URL 保留命令应如下所示

    netsh http 添加 urlacl url=http://mhlabs:80/ user=everyone

# c++ - 仅当我在 C++（线程）中按回车键时，代码如何进入下一步

> ID：10119144
> 
> 赞同：0
> 
> 时间：2012-04-12T07:19:01.847
> 
> 标签：c++, multithreading, while-loop, enter

我在互联网上看到以下代码

```
DWORD qThreadID;
HANDLE hThread = CreateThread(0, 0, ThreadFn, &uiCounter, 0, &qThreadID);

// Loop until the user enters 'q'
char cChar = ' ';
while (cChar != 'q') {
    cout << uiCounter << endl;
    cChar = (char)getchar();
} 
```

按键事件“Enter”是如何工作的？（当我调试它时，除了按“Enter”之外没有其他按键功能起作用）谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:25:21.750

`getchar()`从库和操作系统中缓冲的标准输入读取。在输入输入之前，通常的操作系统不会从控制台设备上的读取返回；它们支持命令行编辑，并且需要回车键来完成输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:23:20.233

getchar() 读取输入的单个字符。

但是，您的终端可能会对输入进行行缓冲，在您按 Enter 之前不会将任何输入发送到您的程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:25:36.567

因为`enter`输入 a`\n`将被解释为`EOF`命令行会认为这是用户输入的结尾，并`getChar()`试图从该流中读取单个字符缓冲区，因此如果您`enter`在其前不输入字符而直接按下，则不会返回任何内容，请参阅 msdn：[http://msdn.microsoft.com/en-us/library/5231d02a%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/5231d02a%28v=vs.71%29.aspx)

# java - 从 .der 更新/生成新的 .p12/.jks

> ID：10119145
> 
> 赞同：1
> 
> 时间：2012-04-12T07:19:02.950
> 
> 标签：java, openssl, certificate, keytool

**现在的情况：**

我们使用 HTTPS/SSL 对某个 url 进行 POST。为此，我的（前）同事发布了这个问题：[Java HTTPS client certificate authentication](https://stackoverflow.com/questions/1666052/java-https-client-certificate-authentication/1710543)

所以基本上我们有一个`.p12`格式的密钥库，而信任库是一个`.jks`文件。

我们无法控制接收我们的 POST 请求的服务器。

**问题：**

服务器管理员向我们提供了一些新`.der` 文件，因为他们的旧证书即将到期。

由于我对 SSL 证书和`keytool`- 和 -命令相当`openssl`陌生，我不知道如何从这里开始。

1）是否需要生成新的`.p12`和`.jks`文件？还是我只需要生成一个新`.jks`文件？

2）如何从`.der`证书生成这些文件？我找到了一些`keytool/openssl`命令最多的网站，但我无法成功生成我需要的内容。

我尝试的最后一个命令（无济于事）是：

```
keytool -storepass dsmserver -keystore c:\temp\newkeystore.jks -importcert -alias "c:\temp\newcert.der" -trustcacerts 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:47:26.030

等等，哪个证书过期了？如果是他们的，则不需要向您发送新文件（毕竟，当 stackoverflow.com 的 SSL 证书过期并且他们安装了新文件时，您不必更新浏览器）。如果您正在执行相互身份验证（客户端证书身份验证），则涉及四个证书：您的证书、他们的证书、签署您的证书的颁发机构的证书以及签署他们的证书的颁发机构的证书。他们向您发送他们的证书，您检查它是否由您信任的证书颁发机构正确签名（这就是信任库的用途 - 它是您信任的证书颁发机构的列表，可以从他们那里签署证书）。随后，您发送您的证书，他们会检查它是否由他们信任的证书颁发机构正确签名。（当然，所有这些都是在 JSSE 的幕后通过 SSL 握手过程自动为您完成的）

请记住，证书是（签名的）断言，即某某名称由特定的公钥标识。因此，如果他们的证书过期，他们将生成一个新证书，由您已经信任的 CA 对其进行签名，然后用这个证书替换旧证书。当您的软件（自动，作为幕后 SSL 握手的一部分）获得新软件时，它将检查签名者（“发行者”）是谁，以及它是否在您的受信任机构列表中（并正确签名）。如果这签出，您将自动接受它。他们不需要向您发送任何带外信息来实现这一点，除非他们正在更改证书颁发机构并且您还没有信任新的证书颁发机构。如果是这样，您可以使用

```
keytool -import -keystore <truststore> -file <certificate file> -alias <someca> 
```

另一方面，如果您的证书已过期，那么他们不应该向您发送任何未经请求的东西。相反，您应该通过以下方式生成 CSR：

```
keytool -genkey -alias <myalias> -keystore <keystore>.p12 -storetype pkcs12
keytool -certreq -alias <myalias> -file request.csr -keystore <keystore>.p12 -storetype pkcs12 
```

这将使用新的私钥更新密钥库并创建一个名为“request.csr”的文件，然后您应该将其发送给*他们*（或他们的信任库中的 CA）以进行签名。他们将使用签名证书进行响应，然后您将使用以下命令将其导入您的密钥库：

```
keytool -import -alias <myalias> -file <signed certificate>.cer 
```

如果我不得不猜测，看起来他们试图为您执行这三个步骤，并试图向您发送无效的证书和相应的私钥 - Java 将（正确！）尽力阻止您导入那是因为当他们通过不受信任的渠道（我猜是电子邮件？）发送私钥时，私钥本身就被污染了，这违背了 PKI 的目的——除了你之外，没有人可以访问你的私钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:51:11.100

从以下链接下载文件：[ImportKey.Java](http://www.agentbob.info/agentbob/80/version/default/part/AttachmentData/data/ImportKey.java)

运行以下命令：

```
 javac ImportKey.java
 java ImportKey key.der cert.der

  - arg1 is your key and arg2 iscertificate. 
```

命令会将您的密钥放入 Java Key Store。

# django - 如何获取正在运行的服务器 URL

> ID：10119149
> 
> 赞同：28
> 
> 时间：2012-04-12T07:19:26.480
> 
> 标签：django

当我运行服务器时，它会显示一条消息[http://127.0.0.1:8000/](http://127.0.0.1:8000/)。我想在代码中获取 url。我那里没有请求对象。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-12T07:26:28.363

```
request.build_absolute_uri('/') 
```

或者你可以试试

```
import socket
socket.gethostbyname(socket.gethostname()) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-12T08:00:18.067

[使用此处](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.get_host)的Django 文档，您可以使用：

```
domain = request.get_host()
# domain = 'localhost:8000' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-12T07:59:06.523

如果您想确切地知道开发服务器启动的 IP 地址，您可以使用`sys.argv`它。Django 开发服务器在内部使用相同的技巧以相同的参数重新启动开发服务器

启动开发服务器：

```
manage.py runserver 127.0.0.1:8000 
```

在代码中获取地址：

```
if settings.DEBUG:
    import sys
    print sys.argv[-1] 
```

这打印`127.0.0.1:8000`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T07:32:59.103

```
import socket
host = socket.gethostname() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-03T13:38:50.190

```
import re
import subprocess

def get_ip_machine():
    process = subprocess.Popen(['ifconfig'], stdout=subprocess.PIPE)

    ip_regex = re.compile('(((1?[0-9]{1,2})|(2[0-4]\d)|(25[0-5]))\.){3}((1?[0-9]{1,2})|(2[0-4]\d)|(25[0-5]))')

    return ip_regex.search(process.stdout.read(), re.MULTILINE).group() 
```

# iphone - 构建 cocos 2d x 游戏代码时出错？

> ID：10119152
> 
> 赞同：0
> 
> 时间：2012-04-12T07:19:30.237
> 
> 标签：iphone, ipad, cocos2d-x

![在此处输入图像描述](../Images/fc02d84886ad52bc6a3a39a22109b820.png)

见上图。图像包含我在设备和模拟器上构建 cocos2d x 应用程序时遇到的错误。[我从这个链接](https://github.com/clawoo)下载了代码

有人告诉我我必须在我的机器上安装 cocos2d x 库，但我怀疑我们是否在模拟器和设备中成功运行 cocos2d 游戏应用程序，只是在资源文件夹中包含 cocos2d 库.. cocos2d x 应该同样发生图书馆？？？。我如何在我的设备模拟器中构建上述项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:27:56.867

您可能在设置中有“gcc 4.2”编译器的旧 cocos-2d 项目模板，而新的 xcode 不再支持它。

要解决该问题，请转到项目构建设置，找到“编译器”设置并选择那里存在的任何选项

# python - 如何更改整个代码块的数据库

> ID：10119160
> 
> 赞同：0
> 
> 时间：2012-04-12T07:20:01.903
> 
> 标签：python, django

有没有办法为整个代码块更改数据库。例如：

```
with using_db('my_other_db_conf'):
    MyModel.objects.all() 
```

这相当于：

```
MyModel.objects.using('my_other_db_conf').all() 
```

我只需要根据上下文使用不同的数据库，并且不喜欢每次都使用*using()方法的想法：\*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:25:14.213

我会使用经理。在你的 models.py 中：

```
class DB_one_ItemsManager(models.Manager):
    def get_query_set(self):
        return super(DB_one_ItemsManager, self).get_query_set().using("database1")

class DB_two_ItemsManager(models.Manager):
    def get_query_set(self):
        return super(DB_two_ItemsManager, self).get_query_set().using("database2")

class YourModel(models.Model):    
    #Some fields here
    #...

    objects_db_one=DB_one_ItemsManager()
    objects_db_two=DB_two_ItemsManager() 
```

或者，如果您想使用 objects_db_one 或 objects_db_two 作为默认管理器，只需将其重命名为 objects

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:50:49.043

行为需要修改一些全局值，IMO，因此[`with statement`](http://docs.python.org/reference/compound_stmts.html#with)不是合适的方式。当然，它可以以一种隐式的、肮脏的和线程不安全的方式来完成：

```
from contextlib import contextmanager 
@contextmanager 
def unsafe_modify_queryset_db(model_dbs): 
    """model_dbs => sequence of tuple (model, db for the model to use).

    For example ((User, 'slice_2'), ...) 
    """ 
    prev_db = map(lambda x:x[0].objects._db , model_dbs) 
    for model, db in model_dbs: 
        model.objects._db = db 
    yield 
    # restore previous db 
    for x, db in zip(model_dbs, prev_db): 
        x[0].objects._db = prev_db 

# then
with unsafe_modify_queryset_db((User, 'slice_2', ...)):
    User.objects.filter(...) 
```

也可以使用[db_manager](https://docs.djangoproject.com/en/1.4/topics/db/multi-db/#using-managers-with-multiple-databases)对 QuerySet 级别进行操作，达到与 luke14free 的代码相同的目的：

```
qs = User.objects.db_manager('slice_2')
foo = qs.filter(...)
bar = qs.filter(...) 
```

请记住，*Explicit 比 implicit 更好*，只需安排您的代码并将共享相同数据库的查询集附在函数调用中，会更好。

# telerik - Realted to Telerik Rad Grid 设计

> ID：10119165
> 
> 赞同：0
> 
> 时间：2012-04-12T07:20:32.373
> 
> 标签：telerik, radgrid

我想设计这样的东西

认为

有 3 行有一些标题，每行下面有多行

评分 3.5

文字 图片 文字

得分 2.4

文字 图片 文字

数量 1.5

文字 图片 文字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:35:25.240

您可以为行设置分组表达式并自定义 header-row-of-grouped-childrow 以显示自定义文本，例如“Rate 3.5”或“Score 2.4”或“Quantity 1.5”。

要自定义 header-row-of-grouped-childrow，覆盖 RadGrid 的 onitemcreated 事件并检查 e.Item.ItemType == Telerik.Web.UI.GridItemType.GroupHeader 是否添加自定义文本

# java - JTabbedPane 执行上下动作

> ID：10119167
> 
> 赞同：0
> 
> 时间：2012-04-12T07:20:39.287
> 
> 标签：java, swing, jpanel, layout-manager, jtabbedpane

我想放在`JTabbedPane`中间，单击我想更改的任何选项卡将反映在选项卡窗格的上方和下方面板中。

我试过了，但它只适用于下面的面板。

如何克服这个问题？请帮我。

提前致谢。

这是我的代码：

```
 jTabbedPane1 = new javax.swing.JTabbedPane();
jTabbedPane1.addTab("Daily Market", jScrollPane1);
    jTabbedPane1.addTab("Weekly Market", jScrollPane2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:23:45.543

假设您要更改选项卡式窗格上方和下方面板中的某些内容。在下面的顶部和底部面板中更改标签文本的示例代码：

```
import java.awt.BorderLayout;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class TestJTabbedPane extends JFrame {

    /**
     * 
     */
    private static final long   serialVersionUID    = 1L;

    private void init(){
        this.setLayout(new BorderLayout());
        JPanel topPanel = new JPanel();
        final JLabel topLabel = new JLabel("North");
        topPanel.add(topLabel);
        this.add(topPanel, BorderLayout.NORTH);

        JTabbedPane tabbedPane = new JTabbedPane();
        JPanel firstTabCont = new JPanel();
        firstTabCont.add(new JLabel("First"));
        tabbedPane.addTab("First", firstTabCont);

        JPanel secondTabCont = new JPanel();
        secondTabCont.add(new JLabel("Second"));
        tabbedPane.addTab("Second", secondTabCont);

        this.add(tabbedPane, BorderLayout.CENTER);

        JPanel bottomPanel = new JPanel();
        final JLabel bottomLabel = new JLabel("South");
        bottomPanel.add(bottomLabel);
        this.add(bottomPanel, BorderLayout.SOUTH);

        tabbedPane.addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent evt) {
                JTabbedPane pane = (JTabbedPane)evt.getSource();
                int selectedIndex = pane.getSelectedIndex();
                if(selectedIndex == 0){
                    topLabel.setText("");
                    topLabel.setText("Hi");

                    bottomLabel.setText("");
                    bottomLabel.setText("Bye");
                } else {
                    topLabel.setText("");
                    topLabel.setText("Bye");

                    bottomLabel.setText("");
                    bottomLabel.setText("Hi");
                }

            }
        });
        this.pack();
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setVisible(true);
    }

    public static void main(String[] args) {
        new TestJTabbedPane().init();
    }
} 
```

# logging - 在不改变模式的情况下更改 log4j 日志消息中的日志消息

> ID：10119168
> 
> 赞同：1
> 
> 时间：2012-04-12T07:20:41.700
> 
> 标签：logging, log4j, slf4j, rollingfileappender

目前我们正在将 Log4j 与 slf4j 和 maven 一起使用。我们使用带有每日滚动apprender的模式布局。

一切都配置正确并且工作正常。

它是一个客户端 - 服务器模块。我们需要在服务器日志中进行一些更改。

我们在类中获取记录器实例为

```
private static Logger logger 
    = LoggerFactory.getLogger(MyServer.class); 
```

由于它是一个服务器，我们生成我们自己的唯一请求 ID，它是 MDC 的一部分。

现在，当我们记录消息时，它可能包含多行的日志，例如：

```
 [REQ-1] log line 1
 log line 2 
```

我如何使它成为

```
 [REQ] log line 1 {remove new line and put some ascii character} log line 2 .... 
```

所以，当我 grep 请求 REQ-1 时，我得到了这两行，而不仅仅是第一种情况下的“日志第 1 行”

我想删除日志消息中的新行并将其替换为我自己的 ascii 字符，并在我想阅读日志时将其替换为新行

任何点都会有很大帮助

谢谢

# c# - 为什么从组合框进行选择后切换图形需要更长的时间？

> ID：10119176
> 
> 赞同：0
> 
> 时间：2012-04-12T07:21:16.727
> 
> 标签：c#, wpf, performance, mvvm, profiling

我有一个绘制指南针的 WPF 应用程序。有一个带有刻度线和标签的大环。我有一个复选框，可以打开和关闭罗盘图形。当我第一次启动应用程序时，指南针会立即打开和关闭。

同时，我有一个组合框，它从本地数据库中获取一些数据并使用它来呈现一些叠加图形。使用此组合框后，指南针图形不再快速切换。事实上，每当我单击复选框时，UI 都会完全冻结大约 4 秒。

我尝试使用 WPF 的 Window Performance Profiling Tool 来分析我的应用程序。当我激活该复选框时，不仅我的应用程序冻结了，分析器也冻结了。之后图表“赶上了”，但这告诉我一定有严重错误。

我已经设法确定问题图形是刻度线（而不是数字标签）。如果我消除它们，冻结问题就会停止。如果我将它们从 360 减少到 36，应用程序仍然会冻结，但时间会更短。同样，无论我有多少刻度线，它们都会在应用程序首次启动时立即切换。

我的问题是，**我如何弄清楚为什么我的指南针图形的切换从瞬间变为非常缓慢？**我已经尝试了广泛的分析和调试，但我想不出任何理由为什么在某些刻度线上设置 Visibility 会导致应用程序冻结。

**编辑**

好的，我已经从我的应用程序中剥离了所有东西，只剩下最基本的东西，把它压缩起来，然后上传到 Sendspace。这是链接（大约143K）：

[http://www.sendspace.com/file/n1u3yg](http://www.sendspace.com/file/n1u3yg)

[**注意：**不要误点击横幅广告，真正的下载链接在页面上要小得多，低得多。]

两个请求：

1.  **您是否在机器上遇到问题？**尝试打开 Compass.exe（在 bin\Release 中）并快速单击复选框。指南针刻度线应无延迟地打开和关闭。然后，从组合框中选择一个项目并尝试再次快速单击该复选框。在我的机器上，它非常滞后，在我停止快速点击后，图形需要几秒钟才能赶上。

2.  如果您确实遇到了延迟，**您是否在代码中看到任何可能导致这种奇怪行为的内容？**组合框没有连接任何东西，那么为什么从中选择一个项目会影响窗口上其他图形的未来性能呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T22:05:06.983

尽管 ANTS 没有指出特定的性能“热点”，但我认为您的技术存在轻微缺陷，因为似乎每个刻度都有一个`ViewModel`负责处理单个刻度的，并且您将这些刻度单独绑定到视图。您最终会为这些刻度创建 720 个视图模型，每次显示或隐藏整个指南针时都会触发类似的事件。每次访问此字段时，您还会创建一个新的 LineGeometry。

在这样的自定义绘制情况下，WPF 的推荐方法是使用`DrawingVisual`并包含 WPF 呈现系统的保留模式方面。有几个 googleable 资源讨论了这种技术，但要点是声明一个指南针类继承自`FrameworkElement`，以及一些较小的类继承自`DrawingVisual`并使用它来呈现指南针。使用这种技术，您仍然可以让 ViewModel 驱动指南针行为，但您不会为指南针的每个部分提供单独的视图模型。我倾向于将指南针分解为挡板，箭头，瞄准器等部分......但您的问题可能需要不同的方法。

```
class Compass : FrameworkElement
{
    private readonly List<ICompassPart> _children = new List<ICompassPart>();

    public void AddVisualChild(ICompassPart currentObject)
    {
        _children.Add(currentObject);
        AddVisualChild((Visual)currentObject);
    }

    override protected int VisualChildrenCount { get { return _children.Count; } }

    override protected Visual GetVisualChild(int index)
    {
        if (index < 0 || index >= _children.Count) throw new ArgumentOutOfRangeException();

        return _children[index] as Visual;
    }

    override protected void OnRender(DrawingContext dc)
    {
        //The control automatically renders its children based on their RenderContext.
        //There's really nothing to do here.
        dc.DrawRectangle(Background, null, new Rect(RenderSize));
    }
}

class Bezel : DrawingVisual
{
   private bool _visible;

   public bool Visible {
   {
     get { return _visible; }
     set
     {
        _visible = value;
        Update();
     }
   }

   private void Update()
   {
       var dc = this.RenderOpen().DrawingContext;
       dc.DrawLine(/*blah*/);
       dc.Close();
   }
} 
```

# matlab - Matlab：使用tabpanel时绘制矩形

> ID：10119180
> 
> 赞同：1
> 
> 时间：2012-04-12T07:21:29.490
> 
> 标签：matlab, clipping, tabpanel

我正在使用 TabPanel 来构建我的 GUI。问题是，当我绘制矩形时，它出现在我的轴之外。不使用 TabPanel 时不存在问题。

我正在测试 'clipping' 参数，但我的对象仍然在轴外（图）。

有什么提示吗？

谢谢！ ![在此处输入图像描述](../Images/5fe66158a0ea836473424780b42e9a6e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:27:51.707

我有好消息和坏消息。（整个互联网都没有答案，我只看到像这样的未答复请求）。

我有完全相同的问题。检查后，问题实际上被限制在 MARKERS 上（因此在绘图的情况下，要么标记没有设置为 none，要么分散）。如果我只绘制线条，它会保持剪裁。

问题是您的情节所在的图形的渲染器。您必须将其设置为“painter”或“zbuffer”而不是“openGL”。可悲的是，只有后者可以让你绘制透明图像:(。我认为 Matlab 应该解决这个问题，这样我们就可以在同一个图中同时拥有未剪辑的标记和透明图像......

```
K>> get(handles.output,'Renderer')
ans =    
OpenGL
K>> set(handles.output,'Renderer','painter') 
```

亚尼斯

编辑：我希望矩形的解决方案可能相似。

# java - 如何删除在 onReceive 方法上捕获的相同短信

> ID：10119184
> 
> 赞同：0
> 
> 时间：2012-04-12T07:22:02.733
> 
> 标签：java, android, eclipse

请有人告诉我如何删除在 onReceive 方法中捕获的同一条消息。实际上，我希望当在 onReceive 方法上收到按摩时，它首先使用关闭，使用后删除，但我不知道，所以请帮助我以防万一。我正在使用的代码也带有这个线程的标签。

```
 @Override
    public void onReceive(Context context,final Intent intents){
    if (intents.getAction().equals(ConstantClass.SMS_RECEIVED)) {
    new Thread(){
    Context context;
    Thread Set(Context ctx){
    this.context=ctx;
    return this;
    }
    public void run(){
    try{
    Bundle bundle = intents.getExtras();            
    if (bundle != null) {
    Object[] pdus = (Object[]) bundle.get("pdus");
    SmsMessage[] messages = new SmsMessage[pdus.length];
    for (int i = 0; i < pdus.length; i++)
    messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
    String msg=null;
    String address = null;
    for (SmsMessage message : messages) {
    msg = message.getMessageBody();
    address = message.getOriginatingAddress();
    }
    dba.Open();
    int id = dba.getCordiId(address);
    int count = dba.getDeviceCount(ConstantClass.dbName[1]);
    if(count<=0){
    dba.InsertCurrentCoord(id,id);
    }else{
    Strsql = new String("UPDATE " + ConstantClass.dbName[1] + " SET " + DataBaseAdapter.Key_ReceiverCoord + " = " + 
    Integer.toString(id) + " WHERE " + DataBaseAdapter.Key_ID + " = ?");
    dba.UpdateQuery(Strsql, Integer.toString(id));
    }
    dba.Close();
    ////////////sending to SMSSync class//////////////
    MainThread th = new MainThread(sync,msg);
    try{
    th.thread.join();
    }catch(Exception e){
    Toast.makeText(context, e.getMessage(), Toast.LENGTH_SHORT).show();
    }
    if(msg.substring(3, 4).equals("2"))
    ConstantClass.isAuditrequestSend = true;
    }
    /*******after receiving the sms opening the Main Screen.*****************/
    Intent intent = new Intent(context,ZigbeeActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(intent);
    abortBroadcast();
    /************Now deleting the SMS from the Inbox*********************/
    Uri uriSms = Uri.parse("content://sms"); 
    Cursor c = context.getContentResolver().query(uriSms, null,null,null,null);  
    int trId= c.getInt(0);
    int thread_id =c.getInt(1); 
    context.getContentResolver().delete(Uri.parse("content://sms/conversations/" + thread_id),null,null); 
    }catch(Exception e){
    dlg = new ExceptionDialog(context,"On Sms Receiver",e.getMessage());
    dlg.show();
    }
    }
    }.Set(context).start();
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:37:41.630

可能您正在尝试在到达收件箱之前或在插入数据库表之前删除一条短信，因此请注册一个 `ContetObserver` 用于观看的`content://sms`短信，当短信到达收件箱时将其删除。请参见[此处的示例](https://stackoverflow.com/questions/9520277/practical-way-to-find-out-if-sms-has-been-sent/9659025#9659025)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:43:28.810

试试这个方法，让我知道会发生什么，只需传递消息来源的上下文和编号，

**笔记：-**

> 这用于删除特定编号的完整线程

```
private void removeMessage(Context context, String fromAddress) {

        Uri uriSMS = Uri.parse("content://sms/inbox");
        Cursor cursor = context.getContentResolver()
                                       .query(uriSMS, null, null, null, null);
        cursor.moveToFirst();
        if(cursor.getCount() > 0){
            int ThreadId = cursor.getInt(1);
            Log.d("Thread Id", ThreadId+" id - "+cursor.getInt(0));
            Log.d("contact number", cursor.getString(2));
            Log.d("column name", cursor.getColumnName(2));

            context.getContentResolver().delete(Uri.
                   parse("content://sms/conversations/"+ThreadId), "address=?", 
                                                     new String[]{fromAddress});
            Log.d("Message Thread Deleted", fromAddress);
        }
        cursor.close();
    } 
```

此外，在 Thread 延迟后调用此方法，例如，

```
new Thread(new Runnable() {
    @Override
    public void run() {
        try {
            Thread.sleep(2000);
            removeMessage(mContext, "From_number");
        } catch (InterruptedException e) {
            e.printStackTrace();
             } 
```

# mysql - MySQL 复杂联系人表

> ID：10119186
> 
> 赞同：0
> 
> 时间：2012-04-12T07:22:10.287
> 
> 标签：mysql, subquery, left-join, coalesce

我正在尝试输出给定公司的联系人姓名列表以及他们的电话号码和电子邮件地址。

我面临的问题是让它根据以下标准输出联系人：

联系人可能有也可能没有姓名、电子邮件或电话，但他们必须至少有其中一个才能出现在结果中。

每个公司可以有多个联系人。

每个联系人可以有多个电子邮件地址和/或电话号码。

联系人上有一个主要标志，因此如果有多个联系人并且其中一个是主要的，它应该选择那个而不是另一个非主要的。

我尝试了以下方法来获取联系人姓名，但没有成功：

```
SELECT entity_details.name,
COALESCE(
  (SELECT entity_contacts.name FROM entity_contacts
  WHERE entity_contacts.entityRef = entity_details.id
  ORDER BY entity_contacts.isPrimary = 1),
  (SELECT entity_contacts.name FROM entity_contacts
  WHERE entity_contacts.entityRef = entity_details.id)
)
AS contact
FROM entity_details
WHERE entity_details.ownerRef = ? 
```

* * *

这是我能做到的最接近的事情，但我不确定它是否正确，并且它不会优先考虑主要联系人，它只是选择 entityRef 上的任何和组来删除重复项：

```
SELECT
entity_details.name, entity_contacts.name AS contact,
entity_contacts_telephones.tel, entity_contacts_emails.email

FROM entity_details
 LEFT JOIN entity_contacts ON entity_details.id = entity_contacts.entityRef
 LEFT JOIN entity_contacts_telephones ON entity_contacts.id = entity_contacts_telephones.contactRef
 LEFT JOIN entity_contacts_emails ON entity_contacts.id = entity_contacts_emails.contactRef

WHERE entity_details.ownerRef = ?

GROUP BY entity_contacts.entityRef
LIMIT ?, ? 
```

* * *

所有表格都是 Innobd，我正在使用的表格在上面的编辑中。所有参考文献等都有关于哪里的索引。

在 entity_details 中大约有 13000 行，在 entity_contacts 中大约有 12000 行，在 entity_contacts_telephones 和 entity_contacts_emails 中大约有 1000 行。

我认为以下方法会起作用，但它不起作用：

```
LEFT JOIN entity_contacts_telephones
  ON entity_contacts.id = entity_contacts_telephones.contactRef
  AND COALESCE(entity_contacts_telephones.isPrimary = 1, 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:26:40.610

这可能有效（不确定主要是因为不清楚每个表中每个实体可以有多少行）：

```
SELECT 
    entity_details.name,
    ( SELECT entity_contacts.name 
      FROM entity_contacts
      WHERE entity_contacts.entityRef = entity_details.id
      ORDER BY entity_contacts.isPrimary DESC
      LIMIT 1
    ) AS contact
FROM entity_details
WHERE entity_details.ownerRef = ? 
```

* * *

您可能需要一个 join -`[greatest-n-per-group]`类型：

```
SELECT 
    d.name,
    ...
    c.whatever
    ...
FROM 
    entity_details AS d
  JOIN
    entity_contacts AS c
      ON  c.PK =                    --- the PRIMARY KEY of contacts table
          ( SELECT cc.PK
            FROM entity_contacts AS cc
            WHERE cc.entityRef = d.id
            ORDER BY cc.isPrimary DESC
            LIMIT 1
           ) 
WHERE d.ownerRef = ? 
```

上的索引`(entityRef, isPrimary)`将有助于提高性能。

# mysql - 合并两个有关系的表

> ID：10119188
> 
> 赞同：0
> 
> 时间：2012-04-12T07:22:11.003
> 
> 标签：mysql, sql, database

我正在使用以前从未见过的关系构造来构建现有数据库。

我有三张桌子：

```
legend1
legid       INT(11), AUTO_INCREMENT, PRIMARY
description VARCHAR(255)

legend2
legid       INT(11), AUTO_INCREMENT, PRIMARY
description VARCHAR(255)

items
id          INT(11), AUTO_INCREMENT, PRIMARY
name        VARCHAR(255)
legid       INT(11)
legend      VARCHAR(8) 
```

中的每条记录都与或`items`中的数据相关。该字段决定了它是哪一个。我想摆脱这种结构并具有相同的结构。唯一不同的是内容。`legend1``legend2``items.legend``legend1``legend2`

我想要这个结构：

```
legend
legid       INT(11), AUTO_INCREMENT, PRIMARY
description VARCHAR(255)

items
id          INT(11), AUTO_INCREMENT, PRIMARY
name        VARCHAR(255)
legid       INT(11) 
```

问题是表已满，没有数据可能丢失。两个表的 id 都从 1 开始，所以几乎每个主键都会发生冲突。

我有这个查询：

```
INSERT INTO legend1 (description) SELECT description FROM legend2; 
```

此查询不起作用，因为它弄乱了引用的 id 来自`legend2`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:30:23.887

执行插入查询后：

`INSERT INTO legend1 (description) SELECT description FROM legend2;`

执行以下查询

`UPDATE items SET legid = (SELECT legid FROM legend1 WHERE legend1.description = items.description) WHERE legend ='something to define that it is from the legend2 table'`

请注意，我没有尝试过查询，但解决方案有点像这样。如果你挑出我犯的语法错误，我相信它会起作用。

它的作用如下：在将整个 legend2 表插入到 legend1 表中之后，您可以更新 items 表以设置相应的 legendid

# r - ggplot2 在 stat_density 中剪辑数据（密度图）

> ID：10119191
> 
> 赞同：1
> 
> 时间：2012-04-12T07:22:26.947
> 
> 标签：r, ggplot2

数据文件：[http ://ubuntuone.com/3x5z4kFEUcVUB8KXYjICpD](http://ubuntuone.com/3x5z4kFEUcVUB8KXYjICpD)

像这样绘制上面的数据会剪辑其中的一些：

```
tc = read.table('tertiary-tc.csv', header=T, sep=',')
library(ggplot2)
old <- theme_set(theme_bw())
pg <- ggplot(tertiary, aes(Conductivity)) + stat_density(geom = 'path'
    , position = 'identity') + facet_wrap(~Lithology)
print(pg) 
```

而这不是：

```
library(lattice) 
densityplot(~Conductivity | Lithology
    , data = tc
    , groups=Lithology
    , plot.points=T
    , ref = T
    , main="Density plot"
    , auto.key=F
    , scales=list(tck=-1))  # set to a negative to plot inside ticks? Works!
dev.off() 
```

未绘制的点（只是快速查看）是在“岩性”列下归类为“白云石”的两个点。ggplot2 是否因为它们超出比例而没有绘制它们？还是因为只有两点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:11:02.430

这样的事情可能会让你开始

```
density2 <- function(x, select, ...){
  n <- nrow(x)
  range <- range(x[[select]])
  xgrid <- seq(range[1], range[2], length=200)

  weight <- rep(1, n) / n
  d <- density(x[[select]], ...,
                  weight=weight, from=range[1], to=range[2])

  as.data.frame(d[c("x","y")])

}

summaries <- ddply(tc, "Lithology", density2, select="Conductivity")

 ggplot(summaries, aes(x, y))  + facet_wrap(~Lithology) +
  geom_path() 
```

不知道为什么它看起来以某种方式修剪，我不熟悉`density()`

# c# - C# 应用程序中的 Matlab 绘图工具

> ID：10119192
> 
> 赞同：1
> 
> 时间：2012-04-12T07:22:27.583
> 
> 标签：c#, matlab, plot

谁能告诉我如何在我的 C# 应用程序中使用 Matlab 绘图工具？我是 Matlab 新手，所以我对 Matlab 绘图工具一无所知。要求是我必须使用 Matlab 绘图工具来绘制来自 C# 应用程序的数据。就像在我的 C# Windows 窗体应用程序界面中嵌入 Matlab 工具一样。感谢您的时间...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:35:13.917

使用附加产品[MATLAB Builder for .NET](http://www.mathworks.com/products/netbuilder/)，您可以将 MATLAB 代码部署到 .NET 程序集并从 C# 调用它。@Marshal 的第一个链接很好地描述了该过程。

但是，不能直接将 MATLAB 轴作为 Windows 窗体的父级。您可以让 C# 应用程序在单独的 MATLAB 图形窗口中弹出绘图，也可以将绘图临时保存到静态图像文件并在 Windows 窗体中显示。

此外，如果通过“MATLAB 绘图工具”，您的意思不仅是绘图本身，而且是允许在运行时操作绘图的交互式工具 - 这些都明确排除在使用 Builder 产品的部署之外。有关详细信息，请参阅[文档](http://www.mathworks.com/help/toolbox/compiler/br2cqa0-20.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:54:08.280

请浏览这些链接，您将在其中找到答案。

[Matlab和C#之间的互操作](https://stackoverflow.com/questions/434331/interoperating-between-matlab-and-c-sharp)

[http://www.mathworks.com/matlabcentral/fileexchange/12987-integrating-matlab-with-c](http://www.mathworks.com/matlabcentral/fileexchange/12987-integrating-matlab-with-c)

[http://www.codeproject.com/Articles/5468/1-2-3-ways-of-integrating-MATLAB-with-the-NET](http://www.codeproject.com/Articles/5468/1-2-3-ways-of-integrating-MATLAB-with-the-NET)

# selenium - Selenium WebDriver 有线协议：对于不同元素 ID，“equals”返回 true 的示例？

> ID：10119201
> 
> 赞同：2
> 
> 时间：2012-04-12T07:23:27.630
> 
> 标签：selenium, selenium-webdriver

我正在研究 Selenium WebDriver 有线协议。我正在寻找一个示例情况，其中[“equals”命令](http://code.google.com/p/selenium/wiki/JsonWireProtocol#/session/%3asessionId/element/%3aid/equals/%3aother)为两个不同的元素 ID 返回 true。在我到目前为止所做的（简要）测试中，通过两种不同的方式（例如通过标签名和类名）获取相同的元素会返回相同的元素 ID。我认为这并不总是保证是这种情况（否则我认为不需要“equals”命令，因为您可以直接比较元素 ID），但从文档中不清楚元素在哪种情况下ID 可能不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T03:57:15.743

感谢@prestomanifesto 的提示，我找到了相关的[Selenium 问题 #2920](http://code.google.com/p/selenium/issues/detail?id=2920)。

据我从那里的讨论中了解到，FirefoxDriver 已修复以返回一致的 ID，并且它是唯一没有这样做的。

因此，对于任何当前实现的驱动程序，都不可能产生“equals”命令为两个不同的元素 ID 返回 true 的情况。不过，对于某些未来的驱动程序，这可能仍然是可能的。

# c# - 数据表的两个整数类型列上的表达式

> ID：10119204
> 
> 赞同：0
> 
> 时间：2012-04-12T07:23:33.920
> 
> 标签：c#, datatable

我想知道如何在数据表中编写表达式来连接两个整数类型的列。因为当我尝试使用“+”时，它会添加两个整数。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:42:08.650

如果要设置结果列的表达式。试试这个。

```
DataTable table = new DataTable();

table.Columns.Add("OrderCount",typeof(int));

table.Columns.Add("OrderPrice",typeof(int));

table.Rows.Add(new object[] { 1, 1 });

table.Rows.Add(new object[] { 2, 3 });

table.Rows.Add(new object[] { 4, 5 });

table.Columns.Add("Result", typeof(string));

table.Columns["Result"].Expression = "Convert(OrderCount, 'System.String') + OrderPrice"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:27:33.950

这个例子：

```
int a = 1;
int b = 2;

var asInt = a + b; // asInt is now 3
var asString = a.ToString() + b.ToString() // asString is now "12"
var asStringAlt = String.Format("{0}{1}", a, b); // alternate method as suggested 
```

# flash - vkontakte 调用 api 方法失败

> ID：10119209
> 
> 赞同：0
> 
> 时间：2012-04-12T07:23:53.717
> 
> 标签：flash, vk

我尝试调用 VK 方法，但失败并出现错误：

```
private function deletePost(postId:String):int
        {
            var sigStr:String = FlashVarsVO.user_id + "api_id="+FlashVarsVO.app_id+"method=wall.deletev=3.09bdnOW93DM3Oy5lcSHr4";
            var sig:String = MD5.hash("sigStr");
            var str:String = "http://api.vk.com/api.php?api_id="+FlashVarsVO.app_id+"&method=wall.delete&v=3.0&format=JSON&post_id="+postId+ "&sid="+ FlashVarsVO.access_token +"&sig=" +sig;
            trace(str);

        //  sig = md5(viewer_idname1=value1name2=value2secret)

            var req:URLRequest = new URLRequest(str);
            var uLdr:URLLoader = new URLLoader(req);
            uLdr.addEventListener(Event.COMPLETE, onComplete);
            uLdr.addEventListener(ErrorEvent.ERROR, onErrorHandler);
            uLdr.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);

            return 0;
        }

http://api.vk.com/api.php?api_id=1111111&method=wall.delete&v=3.0&format=JSON&post_id=1629&sid=bf472ebcf2eba19cbdb56d86a8bd477603bbd76bd6c5356e4d003815c7cf3a4&sig=62b1265890d247efdd939f616cad1e8d 
```

对于这个请求，vk.com 向我发送了这样的回复：

```
{"error":{"error_code":4,"error_msg":"Incorrect signature: Session can be expired, revoked by user or connected with different IP address","request_params":[{"key":"api_id","value":"1111111"},{"key":"method","value":"wall.delete"},{"key":"v","value":"3.0"},{"key":"format","value":"JSON"},{"key":"post_id","value":"1629"},{"key":"sid","value":"bf472ebcf2eba19cbdb56d86a8bd477603bbd76bd6c5356e4d003815c7cf3a4"},{"key":"sig","value":"62b1265890d247efdd939f616cad1e8d"}]}} 
```

如何使它可行？任何人都面临这样的错误？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:56:09.073

这不是 ActionScript 问题，而是 vkontakte 问题。根据错误消息，您显然需要检查签名并确保它的构建与 vkontakte 期望的完全一样。

在这种情况下，我的猜测是您首先需要按字母顺序对查询参数进行排序，然后再进行 MD5 哈希。

此外，似乎所有查询参数都一个接一个地附加，它们之间没有分隔符。我不知道 vkontakte 但其他 API 通常希望参数在散列之前用“&”分隔。

# spring - 从命令行运行spring项目

> ID：10119215
> 
> 赞同：1
> 
> 时间：2012-04-12T07:24:24.150
> 
> 标签：spring, command-line

我在 STS（spring 源工具）中创建了一个 spring 项目，它在 STS 中可以正常工作（编译和执行），但是当我从终端运行类文件时，我收到如下错误：

> 线程“main”中的异常 java.lang.NoClassDefFoundError: com/XXXX/XXXX/Operations
> 原因：java.lang.ClassNotFoundException: com.XXXX.XXXX.Operations

以下是我的 .classpath 文件供参考：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
<classpathentry kind="src" output="target/classes" path="src/main/java" />
<classpathentry kind="src" output="target/test-classes"path="src/test/java" />
<classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/
org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/J2SE-1.5" />
<classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER" />
<classpathentry kind="output" path="target/classes" />
<classpathentry exported="true" kind="var" path="M2_REPO" />
</classpath> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:47:04.930

您的错误表明“Operations.class”文件不在目标/类文件夹中（或者您的包名称中有错字）。

首先确保您的课程在您期望的位置：

```
cd [project root]/target/classes
ls com/XXXX/XXXX/Operations.class 
```

如果这证明文件存在，您应该能够使用您提到的 java 命令：

```
java com.XXXX.XXXX.Operations 
```

确保不要在末尾添加“.class”，因为 Java 会假设您正在尝试在“Operations”包中加载一个名为“class”的文件。

如果文件丢失（我希望它会丢失），您将需要在 STS ( `Project`-> `Build Project`) 中执行构建来创建它。

* * *

## 更新

您在评论中提到您收到错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext 
```

这是一个非常不同的问题，这意味着您没有在 java 命令中引用 Spring 库，因此 Java 不知道在哪里可以找到它们。

我建议您在尝试运行之前使用 STS 打包该程序。这是 Java 开发人员构建和部署应用程序的典型方式。[本文](http://www.online-etraining.com/creating-a-java-application)提供了一个关于如何执行此操作的简单教程（STS 是 Eclipse 的一个变体）。

另外 - 您更新的问题表明您也在此应用程序中使用 Maven，在这种情况下，您可以使用“mvn package”来构建项目而不是 Eclipse。阅读本教程以开始使用 Maven：[http ://maven.apache.org/guides/getting-started/maven-in-five-minutes.html](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)

如果您真的想在不打包的情况下运行程序；您将需要在命令中引用您正在使用的**所有**Jar 文件（这只是一个示例，将“spring.jar”替换为您正在使用的正确 Jar 文件）：

```
java -classpath .;../../lib/spring.jar com.XXXX.XXXX.Operations 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:04:20.660

通常，人们创建 jar 文件，其中包含启动应用程序所需的所有类和资源。之后，很容易启动应用程序：

```
java -cp youapp-full.jar  com.XXXX.XXXX.Operations 
```

当然`Operations`类必须有main方法

# hadoop - 无法在 HBase 中启动区域服务器

> ID：10119226
> 
> 赞同：0
> 
> 时间：2012-04-12T07:25:26.367
> 
> 标签：hadoop, hbase

我在从属 PC 上启动 regionservers 时遇到问题。当我在 conf/regionservers 中仅登记主控计算机时，一切正常，但是当我向其中添加两个从属服务器时，hbase 无法启动.....如果我从所有 pc 中删除 tmp 文件夹中的所有 hbase 文件夹，然后启动区域服务器（注册了 3 个区域服务器）hbase 启动，但是当我尝试创建表时它再次失败（卡住）....请任何人帮助我使用 hadoop 0.20.0，它工作正常，hbase 0.92.0我在集群中有 3 台电脑，一台主机和两台从机

还告诉我，在我的情况下，hbase 是否需要 DNS（向前和向后查找工作）？？？？有什么方法可以将 hbase 表复制到所有区域服务器，即我想在每台 pc 上都有一个表副本并希望在本地访问它们（当我执行 map 任务时，他们应该使用 hbase 表的本地副本）请帮助.. ！！提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:36:29.130

使您的主机文件如下：

127.0.0.1 本地主机

对于 Hadoop 192.168.56.1 主服务器

192.168.56.101 从机

并在 hbase conf 中输入以下条目：

hbase.rootdir hdfs://master:9000/hbase hbase.master master:60000 HBase master 运行的主机和端口。hbase.regionserver.port 60020 HBase master 运行的主机和端口。hbase.cluster.distributed true hbase.tmp.dir /home/cluster/Hadoop/hbase-0.90.4/temp hbase.zookeeper.quorum master dfs.replication 2 hbase.zookeeper.property.clientPort 2181 ZooKeeper 配置中的属性 zoo.cfg . 客户端将连接的端口。如果您在任何地方使用 localhost，请将其删除并将其替换为“master”，这是您主机文件中 namenode 的名称......

你还能做的一件事

须藤 gedit /etc/主机名

这将默认打开主机名文件 ubuntu 将在那里，所以让它成为主人。并重新启动系统。

对于 hbase，在 conf dir 中的“regionserver”文件中指定这些条目

掌握

奴隶

并重新启动。一切。

# iphone - UIButton 上的渐变描边

> ID：10119227
> 
> 赞同：0
> 
> 时间：2012-04-12T07:25:29.987
> 
> 标签：iphone, ios, uibutton, core-graphics, quartz-graphics

我在 UIButton 上找到了渐变的[GradientButton](http://code.google.com/p/iphonegradientbuttons/)类 - 但是我不知道如何在按钮周围获得匹配的笔划。如何在按钮上创建渐变笔触？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:38:23.413

为此，您需要使用 CALayer：

```
[[button layer] setCornerRadius:8.0f];
[[button layer] setMasksToBounds:YES];
[[button layer] setBorderWidth:1.0f]; 
```

并且不要忘记导入：

```
#import <QuartzCore/QuartzCore.h> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T19:11:37.277

这是一个很好的教程，用核心动画制作教程，作者是 Matt Long [http://www.cimgf.com/2010/01/28/fun-with-uibuttons-and-core-animation-layers/](http://www.cimgf.com/2010/01/28/fun-with-uibuttons-and-core-animation-layers/)

# python - Python - 附加到派生类定义中的类级列表

> ID：10119233
> 
> 赞同：2
> 
> 时间：2012-04-12T07:25:49.583
> 
> 标签：python, class-variables

```
class A (object):
    keywords = ('one', 'two', 'three')

class B (A):
    keywords = A.keywords + ('four', 'five', 'six') 
```

有什么办法可以更改`A.keywords`为`<thing B derives from>.keywords`，有点像`super()`，但是 pre- `__init__/self`？我不喜欢在定义中重复类名。

用法：

```
>>> A.keywords
('one', 'two', 'three')
>>> B.keywords
('one', 'two', 'three', 'four', 'five', 'six') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T07:36:36.027

事实上，你可以。编写一个[描述符](http://docs.python.org/reference/datamodel.html#implementing-descriptors)，检查类的基类是否有同名的属性，并将传递的属性添加到其值中。

```
class parentplus(object):
    def __init__(self, name, current):
        self.name = name
        self.value = current

    def __get__(self, instance, owner):
        # Find the attribute in self.name in instance's bases
        # Implementation left as an exercise for the reader

class A(object):
    keywords = ('one', 'two', 'three')

class B(A):
    keywords = parentplus('keywords', ('four', 'five', 'six')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:33:06.120

是的。只要你已经初始化了你的类，就使用 __bases__ attr 来查找基类。否则你需要改变方法，因为 B 不知道它的父母。

```
class A (object):
    keywords = ('one', 'two', 'three')

class B (A):
    def __init__(self):
        keywords = self.__bases__[0].keywords + ('four', 'five', 'six') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:34:22.040

使用元类：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

class Meta(type):
    def __new__(cls, name, bases, attrs):
        new_cls = super(Meta,cls).__new__(cls, name, bases, attrs)
        if hasattr(new_cls, 'keywords'):
            new_cls.keywords += ('1','2')
        return new_cls

class B(object):
    keywords = ('0',)
    __metaclass__= Meta

def main():
    print B().keywords

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-16T05:03:20.867

我找到了一种解决方法风格的解决方案，无需额外的类和定义即可为我工作。

```
class BaseModelAdmin(admin.ModelAdmin):
    _readonly_fields = readonly_fields = ('created_by', 'date_add', 'date_upd', 'deleted') 
```

以及子类化时

```
class PayerInline(BaseTabularInline):
    exclude = BaseTabularInline._exclude + ('details',) 
```

希望这可以帮助。

# iphone - 在 iphone 的谷歌地图上绘制路线

> ID：10119235
> 
> 赞同：1
> 
> 时间：2012-04-12T07:25:53.540
> 
> 标签：iphone, ios

我想使用纬度和经度在地图视图上绘制路线。怎么可能画画？

这是我的代码。但它不工作。我在点可变数组中添加了位置。然后调用 drawRoute 函数在该位置之间绘制路线。

```
- (void)viewDidLoad {
    [super viewDidLoad];
CLLocationCoordinate2D location;
    location.latitude = (double) 23.00000;
    location.longitude = (double) 73.00000;

CLLocationCoordinate2D location2;
    location2.latitude = (double) 73.00000;
    location2.longitude = (double) 23.00000;

    CLLocation *locationPoint1 = [[CLLocation alloc]initWithLatitude:location.latitude longitude:location.longitude];
    CLLocation *locationPoint2 = [[CLLocation alloc]initWithLatitude:location2.latitude longitude:location2.longitude]; 
    [self.points addObject:locationPoint1];
    [self.points addObject:locationPoint2];
[self performSelector:@selector(drowRoute)];
}

-(void)drowRoute{
    CGContextRef context = UIGraphicsGetCurrentContext(); 
 //   CGContextSetStrokeColorWithColor(context, [[UIColor blueColor]CGColor]);
    CGContextSetLineWidth(context, 2.0);

    for(int idx = 0; idx < self.points.count; idx++)
    {
        CLLocation* location = [self.points objectAtIndex:idx];
        CGPoint point = [mapView convertCoordinate:location.coordinate toPointToView:self.view];

        if(idx == 0)
        {
            // move to the first point
            CGContextMoveToPoint(context, point.x, point.y);
        }
        else
        {
            CGContextAddLineToPoint(context, point.x, point.y);
        }
    }
    CGContextStrokePath(context);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:21:56.730

我使用 Goggle 地图服务使用它。您只需将经度和纬度作为参数传递给`URL`Google 地图即可。

```
- (void)viewDidLoad
{
  [super viewDidLoad];
  locationManager = [[CLLocationManager alloc] init];
  locationManager.delegate = self;
  locationManager.distanceFilter = kCLDistanceFilterNone; 
  locationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters; 
  [locationManager startUpdatingLocation];

    NSString *url = [NSString stringWithFormat: @"http://maps.google.com/maps?saddr=%f,%f&daddr=%f,%f",c_lat,c_long,lat,lat];
  //saddr= we pass source address long, lat.
  //daddr= we pass destination address long, lat.

  //--------use this if you have current long,lat and destination's address or street name etc...

   NSString* url = [NSString stringWithFormat: @"http://maps.google.com/maps?saddr=%f,%f&daddr=%@",
                currentLocation.latitude, currentLocation.longitude,
                [address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
   //------------------------------------------------------------------------------
   [[UIApplication sharedApplication] openURL: [NSURL URLWithString:url]]; // this line will open Google map on Maps application on device and in Safari in Simulator.

}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{

  curntloc = [[CLLocation alloc] initWithLatitude:newLocation.coordinate.latitude longitude:newLocation.coordinate.longitude];

 NSLog(@"in func--> %f %f",curntloc.coordinate.latitude, curntloc.coordinate.longitude);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:31:38.267

这是使用经纬度坐标在地图上绘制路线的示例源代码。

[http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Introduction/Intro.html)

这就是我学会完成这项任务的方式。

此外，要画线，在[这篇文章](http://navarra.ca/?p=786)中，您将找到注释类。查看帖子中的源代码，我希望它对您有所帮助。

通过使用我发布的第二个链接中的类，您只需提供坐标（纬度，经度），其余的将由类完成:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:33:42.557

使用以下代码：

```
-(NSMutableArray *)decodePolyLine: (NSMutableString *)encoded {
    [encoded replaceOccurrencesOfString:@"\\\\" withString:@"\\"
                                options:NSLiteralSearch
                                  range:NSMakeRange(0, [encoded length])];
    NSInteger len = [encoded length];
    NSInteger index = 0;
    NSMutableArray *array = [[[NSMutableArray alloc] init] autorelease];
    NSInteger lat=0;
    NSInteger lng=0;
    while (index < len) {
        NSInteger b;
        NSInteger shift = 0;
        NSInteger result = 0;
        do {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlat = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lat += dlat;
        shift = 0;
        result = 0;
        do {
            b = [encoded characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        NSInteger dlng = ((result & 1) ? ~(result >> 1) : (result >> 1));
        lng += dlng;
        NSNumber *latitude = [[[NSNumber alloc] initWithFloat:lat * 1e-5] autorelease];
        NSNumber *longitude = [[[NSNumber alloc] initWithFloat:lng * 1e-5] autorelease];
        CLLocation *loc = [[[CLLocation alloc] initWithLatitude:[latitude floatValue] longitude:[longitude floatValue]] autorelease];
        [array addObject:loc];
    }

    return array;
}
-(NSArray*) calculateRoutesFrom:(CLLocationCoordinate2D) f to: (CLLocationCoordinate2D) t {
    NSString* saddr = [NSString stringWithFormat:@"%f,%f", f.latitude, f.longitude];
    NSString* daddr = [NSString stringWithFormat:@"%f,%f", t.latitude, t.longitude];

    NSString* apiUrlStr = [NSString stringWithFormat:@"http://maps.google.com/maps?output=dragdir&saddr=%@&daddr=%@", saddr, daddr];
    NSURL* apiUrl = [NSURL URLWithString:apiUrlStr];

    NSString *apiResponse = [NSString stringWithContentsOfURL:apiUrl];
    NSString* encodedPoints = [apiResponse stringByMatching:@"points:\\\"([^\\\"]*)\\\"" capture:1L];

    return [self decodePolyLine:[encodedPoints mutableCopy]];
}
-(void) centerMap {
    MKCoordinateRegion region;

    CLLocationDegrees maxLat = -90;
    CLLocationDegrees maxLon = -180;
    CLLocationDegrees minLat = 90;
    CLLocationDegrees minLon = 180;
    for(int idx = 0; idx < routes.count; idx++)
    {
        CLLocation* currentLocation = [routes objectAtIndex:idx];
        if(currentLocation.coordinate.latitude > maxLat)
            maxLat = currentLocation.coordinate.latitude;
        if(currentLocation.coordinate.latitude < minLat)
            minLat = currentLocation.coordinate.latitude;
        if(currentLocation.coordinate.longitude > maxLon)
            maxLon = currentLocation.coordinate.longitude;
        if(currentLocation.coordinate.longitude < minLon)
            minLon = currentLocation.coordinate.longitude;
    }
    region.center.latitude     = (maxLat + minLat) / 2;
    region.center.longitude    = (maxLon + minLon) / 2;
    region.span.latitudeDelta  = maxLat - minLat;
    region.span.longitudeDelta = maxLon - minLon;

    [mapView setRegion:region animated:YES];
}
-(void) calculate_distance{
    float target = [location1 distanceFromLocation:location2]/1000;
    text2=[NSString stringWithFormat:@"%fkm",target];
    routes = [[self calculateRoutesFrom:location1.coordinate to:location2.coordinate] retain];

    if([routes count]!=0){
        [self updateRouteView];
        [self centerMap];
        UIAlertView* alert1=[[UIAlertView alloc]initWithTitle:@"MESSAGE" message:text2 delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert1 show];
        [alert1 release];
    }
    else{
        UIAlertView* alert=[[UIAlertView alloc]initWithTitle:@"MESSAGE" message:@"We could not draw direction between your desired locations" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
        [alert release];
    }

    location1=0;
    location2=0;
}
-(void) updateRouteView {
    CGContextRef context =  CGBitmapContextCreate(nil, 
                                                  routeView.frame.size.width, 
                                                  routeView.frame.size.height, 
                                                  8, 
                                                  4 * routeView.frame.size.width,
                                                  CGColorSpaceCreateDeviceRGB(),
                                                  kCGImageAlphaPremultipliedLast);

    CGContextSetStrokeColorWithColor(context, lineColor.CGColor);
    CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);
    CGContextSetLineWidth(context, 3.0);

    for(int i = 0; i < routes.count; i++) {
        CLLocation* location = [routes objectAtIndex:i];
        CGPoint point = [mapView convertCoordinate:location.coordinate toPointToView:routeView];

        if(i == 0) {
            CGContextMoveToPoint(context, point.x, routeView.frame.size.height - point.y);
        } else {
            CGContextAddLineToPoint(context, point.x, routeView.frame.size.height - point.y);
        }
    }

    CGContextStrokePath(context);

    CGImageRef image = CGBitmapContextCreateImage(context);
    UIImage* img = [UIImage imageWithCGImage:image];

    routeView.image = img;
    CGContextRelease(context);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-14T13:31:46.430

我使用下面给出的代码在两个位置之间绘制路线：

```
- (void)fetchPolylineWithOrigin:(CLLocation *)origin destination:(CLLocation *)destination {
    NSString *originString = [NSString stringWithFormat:@"%f,%f", origin.coordinate.latitude, origin.coordinate.longitude];
    NSString *destinationString = [NSString stringWithFormat:@"%f,%f", destination.coordinate.latitude, destination.coordinate.longitude];
    NSString *directionsAPI = @"https://maps.googleapis.com/maps/api/directions/json?";
    NSString *directionsUrlString = [NSString stringWithFormat:@"%@&origin=%@&destination=%@&mode=driving", directionsAPI, originString, destinationString];
    NSURL *directionsUrl = [NSURL URLWithString:directionsUrlString];

    NSURLSessionDataTask *fetchDirectionsTask = [[NSURLSession sharedSession] dataTaskWithURL:directionsUrl completionHandler:
     ^(NSData *data, NSURLResponse *response, NSError *error) {
         NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
         if(error) {
             //Error in fetching poline
             return;
         }

         NSArray *routesArray = [json objectForKey:@"routes"];

         if ([routesArray count] > 0) {
             NSDictionary *routeDict = [routesArray objectAtIndex:0];
             NSDictionary *routeOverviewPolyline = [routeDict objectForKey:@"overview_polyline"];
             NSString *points = [routeOverviewPolyline objectForKey:@"points"];
             GMSPath *path = [GMSPath pathFromEncodedPath:points];
             [self drawPath:path];
         }
     }];
    [fetchDirectionsTask resume];
}

- (void)drawPath:(GMSPath *)newPath {

    GMSPolyline *polyline = [GMSPolyline polylineWithPath:newPath];
    polyline.strokeColor =PathColor;
    polyline.strokeWidth = 2.5;
    polyline.geodesic = YES;

    NSArray *styles = @[[GMSStrokeStyle solidColor:PathColor],
                        [GMSStrokeStyle solidColor:PathColor]];
    NSArray *lengths = @[@100000, @50000];
    polyline.spans = GMSStyleSpans(polyline.path, styles, lengths, kGMSLengthRhumb);
    polyline.map = _mapView;

} 
```

# iphone - 当我尝试构建时，添加可达性类失败

> ID：10119239
> 
> 赞同：12
> 
> 时间：2012-04-12T07:26:18.153
> 
> 标签：iphone, ios, linker-errors

我添加了 SystemConfiguration 框架。我正在针对 3.2 及更高版本的目标进行部署。我忘了添加什么吗？

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_Reachability", referenced from:
      objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-12T08:02:17.303

好的，线索都在你发布的错误报告中。

在编译项目中的所有符号之后发生的链接（消息来自链接器**ld ）时，消息说**

“在 AppDelegate 中，您引用了一个名为**Reachability**的类对象”

```
"_OBJC_CLASS_$_Reachability" 
```

就链接器而言，**可达性**是未定义的。

因此，请检查您的项目中是否正在编译 Reachability。有几种方法可以做到这一点。也许最明确的方法是 ![在此处输入图像描述](../Images/7c5ae20e9aca1785297c0c654c85549a.png)

1 在导航窗格中选择项目文件

2 选择目标

3 选择**构建阶段**

4 展开**编译源**部分

*现在检查将为您的缺失课程编译的源列表，在您的情况下为**Reachability.m**

如果丢失，请使用**+**按钮将文件添加到目标。

另一种方法是

![在此处输入图像描述](../Images/d93fbfdd00c45b74dc4ae1c0cc7a3025.png)

1 选择你认为没有被编译的文件

2 打开实用程序面板

3 选择文件检查器选项卡

项目中的每个目标都会有一个复选框，您可以轻松查看您的**.m**文件是否正在为每个/所有目标编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:22:29.450

您可能忘记在项目中包含可达性类！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T07:23:24.007

当我升级到最新版本的 Mixpanel 时，我遇到了类似的问题。错误读取：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_CTTelephonyNetworkInfo", referenced from:
      objc-class-ref in Mixpanel.o 
```

您可以按照 Damo 的解决方案直到最后一步，然后不必展开**Compile Sources**部分，而是必须展开**Link Binary With Libraries**部分，并添加包含**CTTelephonyNetworkInfo的****CoreTelephony.framework**源。

 **您可以在此处阅读有关 Apple 官方网站上 CTTelephonyNetworkInfo 类参考的更多信息：http: [//developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CTTelephonyNetworkInfo/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CTTelephonyNetworkInfo/Reference/Reference.html)**

# c - 软链接 atime 和 mtime 修改

> ID：10119242
> 
> 赞同：3
> 
> 时间：2012-04-12T07:26:27.797
> 
> 标签：c, linux, command-line, symlink

是否可以更改符号链接的`atime`and ？`mtime`

我正在尝试使用`utime()`函数（C 代码）更改它，但它会更改目标文件的时间。

另外，如果我这样做

```
cp -dpr <src fldr> <<dest folder> (command line) 
```

[src 文件夹包含不同的符号链接。] 目的地的符号链接是使用当前时间戳创建的。

在符号链接上做 a`stat()`会给我目标文件的时间（在 C 代码中）但是如果我们`stat`在命令行上触发一个命令，它会给出链接的时间戳（可能它正在使用`lstat`）

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:35:28.203

您可以在 bash 中使用带有标志的 touch`-h`来修改符号链接的 mtime 和 atime，而不是它引用的文件：

```
touch -h somesymlink 
```

`-t`如果您不想使用当前时间，可以使用该标志来指定将其设置为的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:35:10.980

改为使用`lutimes`。请参阅`man lutimes`或[http://www.gnu.org/software/libc/manual/html_node/File-Times.html](http://www.gnu.org/software/libc/manual/html_node/File-Times.html)

# android - Android - 默认目标附加模拟器命令行选项

> ID：10119247
> 
> 赞同：0
> 
> 时间：2012-04-12T07:27:13.903
> 
> 标签：android, emulation

我需要有人帮助。我删除了默认的“附加模拟器命令行选项”行，现在我的 HOME 永远不会在 Android 设备上启动。

如果有人可以请发布他们拥有的行...调试箭头->调试配置...->选择[目标]选项卡->滚动到底部

请，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:57:10.990

“附加模拟器命令行选项”默认为空。有时，我有一些代理服务器或分区大小的选项，但我必须自己添加它们，默认情况下这是空的。如果您的问题仍然存在，则可能删除并重新配置您的运行/调试配置。当您在模拟器上运行时，在 AVD 管理器中删除模拟器并创建一个新的也许也是一个好主意。在设备上运行时，有时重启设备可能会有所帮助。

祝你好运。

有一个很好的发展。

氪

# c++ - C++ 中的多重继承：用多重继承在 C++ 中表达图表的好方法是什么？

> ID：10119255
> 
> 赞同：0
> 
> 时间：2012-04-12T07:27:56.803
> 
> 标签：c++, multiple-inheritance

用多重继承在 C++ 中表达图表的好方法是什么？还是在这种情况下我需要使用多重继承？我不能只在基类中创建一个 Child1 和一个 Child2 实例并使用它们吗？

![在此处输入图像描述](../Images/124ec03c2ef0a5c517d9305e84b84f3a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:35:45.130

这是伪代码，但应该说明层次结构：

解决方案1：

```
class IBaseInterface {}

class Base : IBaseInterface {}

class Child1 : Base {}

class Child2 : Base {} 
```

解决方案2：

```
class IChildInterface {}

class Base {}

class Child1 : Base, IChildInterface  {}

class Child2 : Base, IChildInterface  {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:08:51.120

“我不能在基类中创建一个 Child1 和一个 Child2 实例并使用它们吗？”

我认为你想要实现的是这个，不需要多重继承：

```
class IChildInterface {}

class Base { IChildInterface* child; }

class Child1: public IChildInterface
class Child2: public IChildInterface 
```

# apache - 从虚拟机访问本地 apache 服务器

> ID：10119261
> 
> 赞同：5
> 
> 时间：2012-04-12T07:28:19.667
> 
> 标签：apache, virtualbox

我的机器上安装了 apache。我在同一台机器的虚拟机上安装了 windows xp。我可以在他们之间共享 apache 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T18:13:25.917

我在 wxp 上运行带有 w7 的 virtualbox。在主机（wxp）上，我正在运行本地 apache 安装。我可以使用 ip 10.0.2.2 从来宾系统访问主机 apache 安装。

我在来宾主机文件（windows/system32/drivers/etc/hosts）中添加了一个条目，将我要测试的域指向上面的 ip。因此：10.0.2.2 www.domainname.com

我现在可以从我的访客 w7 系统访问 www.domainname.com，它现在由我主机系统上的本地 apache 提供服务。这包括主机上的 mysql db 支持。

我在这个线程中找到了 ip 号：[https ://forums.virtualbox.org/viewtopic.php?f=8&t=44068](https://forums.virtualbox.org/viewtopic.php?f=8&t=44068)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T20:29:41.963

是的，但您必须将 XP VM 的网络配置为“桥接”。然后，您可以使用 XP VM 上的浏览​​器访问主机上的 Apache 服务器（例如 http://192.168.0.24）。那么主机和虚拟机都在同一个网络上。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T07:31:53.890

“分享”是什么意思？如果您在主系统上安装了 apache，则可以浏览到该安装提供的页面。

如果您有一台装有 Windows XP 的虚拟机，并且有自己的 apache 安装，那就是*单独*安装。您可以将端口转发到该虚拟机，因此您也可以访问它。

例如，您可以在 8112 端口上运行 Apache 1（主系统），在 8113 上运行 Apache 2（虚拟机）等...

我想您可以将 htdocs 放在一个共享的 virtualbox 文件夹中，这样您就可以从两个系统更新站点内容，但它们仍将由单独的 apache 安装提供。

# iphone - 使用带有叠加图像的 AVCaptureDevice 的静止图像

> ID：10119262
> 
> 赞同：0
> 
> 时间：2012-04-12T07:28:26.960
> 
> 标签：iphone, avcapturesession

我正在开发一个我正在捕获实时视频的 iPhone 应用程序。

我已将 AVCaptureVideoPreviewLayer 添加到 self.view.layer 作为子层。[self.view.layer addSublayer: self.prevLayer];

在同一个 self.view 上，我添加了一个图像作为子视图。[self.view addSubView:image];

现在我想要的是从实时视频中捕获图像，但图像也应该像它在屏幕上看到的那样进入该图片。我试图拍摄屏幕截图，但它只捕获图像而不是实时视频图像。任何机构都可以帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:32:40.797

嗨，这将对您有所帮助，因为它对我有用

```
- (void)didTakePicture:(UIImage *)picture
{
    UIImage *frm = self.overlayViewController.imgOverlay.image;
    NSLog(@"width %f height %f",picture.size.width,picture.size.height);
    UIGraphicsBeginImageContext(picture.size);
    [picture drawAtPoint:CGPointMake(0,0)];
    [frm drawInRect:CGRectMake(0, 0, picture.size.width, picture.size.height)];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    NSLog(@"view %@",viewImage.debugDescription);
    [self.capturedImages addObject:viewImage];
} 
```

# windows-installer - 卸载注册表项的静态名称，而不是随机 GUID（Windows 安装程序）

> ID：10119263
> 
> 赞同：0
> 
> 时间：2012-04-12T07:28:28.393
> 
> 标签：windows-installer, installshield

使用 InstallShield 安装时，是否可以在以下注册表路径中使产品键具有固定名称而不是 GUID

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\{Random GUID} 
```

以及当前用户安装和 32 位操作系统的替代路径

基本上我想要类似的东西

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\My App 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:25:50.947

Windows Installer 的 PublishProduct 标准操作使用 ProductCode 属性来创建此注册表项。如果您的 GUID 正在更改，这是因为您正在进行重大升级，因此每次构建都会更改您的 ProductCode。

我可以想办法抑制这种行为（[ARPSYSCOMPONENT 属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367750%28v=vs.85%29.aspx)），但老实说，它没有什么价值，只会增加安装程序的脆弱性。FWIW，仅仅因为您看到其他一些知名公司在安装程序中做某事（尤其是多平台公司）并不意味着模仿是一件好事。

*顺便说一句，了解您为什么*关心 obsecure 注册表项的名称可能会有所帮助。也许你正在尝试做一些自动化。如果是这种情况，了解 Windows Installer 具有 Win32 和 COM 自动化接口可能会有所帮助，该接口允许您查询 MSI 以获取有关已安装产品的信息。还有一个 WMI 提供程序，但它的质量非常低。

# iphone - UILocalnotification 没有在设定的时间收到警报？

> ID：10119265
> 
> 赞同：0
> 
> 时间：2012-04-12T07:28:49.027
> 
> 标签：iphone

我这样做是为了在设定的时间获得警报。但它没有及时报警。我正在从 datepicker 设置时间。我怎样才能解决这个问题？

```
- (void)scheduleNotificationWithInterval:(int)minutesBefore {

      [[UIApplication sharedApplication] cancelAllLocalNotifications];

      UILocalNotification *localNotif = [[UILocalNotification alloc] init];
      if (localNotif == nil)
          return;
      NSLog(@"Date %@",datePicker.date);
      localNotif.fireDate = datePicker.date;
      localNotif.timeZone = [NSTimeZone defaultTimeZone];
      if ([freq isEqualToString:@"Daily"]) {
          localNotif.repeatInterval = NSDayCalendarUnit;
      }

      localNotif.alertBody = @"Radio Asia Alarm";
      localNotif.alertAction = @"Ok";

      localNotif.soundName = UILocalNotificationDefaultSoundName;

      NSDictionary *infoDict = [NSDictionary dictionaryWithObject:@"Radio Asia Alarm" forKey:@"Message"];
      localNotif.userInfo = infoDict;

      [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
      [localNotif release];
} 
```

我也调用此方法，在设置时间和日期后单击按钮

```
 [self scheduleNotificationWithInterval:1]; 
```

我没有警觉。我可以做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:35:36.847

你确定你设置了正确的时区吗？我确定问题可能在那里

你试过不设置吗？

# ruby-on-rails - Rails 返回错误 500。日志写入完整的错误消息

> ID：10119274
> 
> 赞同：0
> 
> 时间：2012-04-12T07:29:21.450
> 
> 标签：ruby-on-rails, rendering, message

为什么rails在日志中写入NoMethodError时向页面返回错误500？我可以将完整的消息发送到浏览器吗？

我的 development.rb 有一行：config.consider_all_requests_local = true

在某些错误中，完整的错误消息会呈现给浏览器。在其他情况下，我在浏览器中收到错误 500，在日志中收到完整的错误消息。

如何始终将完整的错误消息发送到浏览器？

我正在使用导轨 3.0.11。

（在开发环境中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:17:31.303

尝试添加到 development.rb 或 production.rb config.log_level = :debug

# php - 数字总和返回奇数低位小数？

> ID：10119282
> 
> 赞同：0
> 
> 时间：2012-04-12T07:29:56.280
> 
> 标签：php

当对一组数字求和时，有时我会得到一些低位小数？为什么将数字解析为字符串时会发生这种情况？我知道有一些 %"&! 关于浮动

```
function parse(){
    foreach($_SESSION['import_csv_posts']['result']['csv'] as $key => $post){
        $amount = $this->parse_amount($post[$this->param['amount']]);
        if($this->param['vat_amount']){
            $amount += $this->parse_amount($post[$this->param['vat_amount']]);
        }

        $this->balance += $amount;
        echo "$amount\n";
    }

    echo "\nbalance = ".$this->balance;
}

function parse_amount($amount){
    $amount = strval($amount);
    if(strstr($amount, '.') && strstr($amount, ',')){
        preg_match('/^\-?\d+([\.,]{1})/', $amount, $match);
        $amount = str_replace($match[1], '', $amount);
    }

    return str_replace(',', '.', $amount);
} 
```

结果

```
-87329.00
-257700.00
-11400.00
-9120.00
-47485.00
-15504.00
122800.00
1836.00
1254.00
200.00
360.00
31680.00
361.60
1979.20
1144.00
7520.00
6249.49
balance = -399.00000000003 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:40:04.487

这 ”％”＆！关于浮点数”是浮点数根本不精确。无限数如何存储在有限空间中存在一定的不*准确性*。因此，在使用浮点数进行数学运算时，您不会得到 100% 准确的结果。

您的选择是在输出时将[数字四舍五入，格式化](http://php.net/number_format)为小数点后两位，或者使用字符串和[BC Math 包](http://php.net/bc)，它速度较慢，但​​准确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:45:26.653

浮点运算由计算机以二进制形式完成，而结果以十进制显示。有许多数字在两个系统中都不能同样精确地表示，因此您作为人类所期望的结果与被视为位时的实际结果之间几乎总是存在一些差异（这就是您不能可靠地比较浮点数是否相等）。

通过解析字符串生成数字并不重要，只要 PHP 看到算术运算符，它就会在内部将字符串转换为数字。

如果您*不需要*绝对精度（看起来您不需要，因为您只是在显示内容），那么只需使用`printf`格式字符串`%.2f`来限制小数位数。

# asp.net-mvc - 将下拉列表的选定值从视图传递到 mvc3 中的控制器？

> ID：10119286
> 
> 赞同：3
> 
> 时间：2012-04-12T07:30:19.110
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我有 mvc3 网络应用程序。我使用了 EF 并从数据库中填充了两个下拉列表。

现在，当我从这些下拉列表中选择值时，我需要在 webgrid 中显示它们我该怎么做？

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Mapping</legend>
        <div class="editor-label">
          @Html.Label("Pricing SecurityID")
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.ID,
         new SelectList(Model.ID, "Value", "Text"),
            "-- Select category --"
            )
            @Html.ValidationMessageFor(model => model.ID)
        </div>

         <div class="editor-label">
          @Html.Label("CUSIP ID")
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.ddlId,
         new SelectList(Model.ddlId, "Value", "Text"),
            "-- Select category --"
            )
            @Html.ValidationMessageFor(model => model.ddlId)
        </div>
         <p>
            <input type="submit" value="Mapping" />
        </p>
    </fieldset>
} 
```

当我单击`Mapping`按钮时，它将转到新页面`Mapping.cshtml`，并且必须显示带有这两个值的 webgrid。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T18:56:38.577

我会创建一个 ViewModel

```
public class YourClassViewModel
{

 public IEnumerable<SelectListItem> Securities{ get; set; }
 public int SelectedSecurityId { get; set; }

 public IEnumerable<SelectListItem> CUSIPs{ get; set; }
 public int SelectedCUSIPId { get; set; } 
```

}

在我的 Get Action 方法中，我会将这个 ViewModel 返回到我的强类型视图

```
public ActionResult GetThat()
{
   YourClassViewModel objVM=new YourClassViewModel();
   objVm.Securities=GetAllSecurities() // Get all securities from your data layer 
   objVm.CUSIPs=GetAllCUSIPs() // Get all CUSIPsfrom your data layer    
   return View(objVm);  
} 
```

在我看来，这是强类型的，

```
@model YourClassViewModel     
@using (Html.BeginForm())
{
    Security :
     @Html.DropDownListFor(x => x.SelectedSecurityId ,new SelectList(Model.Securities, "Value", "Text"),"Select one") <br/>

    CUSP:
     @Html.DropDownListFor(x => x.SelectedCUSIPId ,new SelectList(Model.CUSIPs, "Value", "Text"),"Select one") <br/>

  <input type="submit" value="Save" />

} 
```

现在在我的 HttpPost Action 方法中，我将接受此 ViewModel 作为参数，并且我将在那里获得 Selected 值

```
[HttpPost]
public ActionResult GetThat(YourClassViewModel objVM)
{
   // You can access like objVM.SelectedSecurityId
   //Save or whatever you do please...   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T18:45:11.037

将表格发布到`mapping actionresult`. 在 actionresult 映射中接收下拉参数为`mapping(string ID, string ddID)`. 使用 ViewData 获取这些值以查看。更好的方法是为网格视图创建一个视图模型，并使您的映射视图具有强类型，并根据需要在网格上使用值

# mongodb - 为什么运行一次（从未加载）的 Meteor 应用程序的数据库占用了近 3GB？

> ID：10119289
> 
> 赞同：9
> 
> 时间：2012-04-12T07:30:26.083
> 
> 标签：mongodb, meteor

**更新：**这是在 Meteor v0.4 (2012) 之后修复的。出于历史目的：

* * *

摘自`du`：

```
2890768 ./Code/Meteor/QuarterTo/.meteor/local/db/journal
2890772 ./Code/Meteor/QuarterTo/.meteor/local/db
2890776 ./Code/Meteor/QuarterTo/.meteor/local
2890788 ./Code/Meteor/QuarterTo/.meteor
2890804 ./Code/Meteor/QuarterTo 
```

我只是问，因为它在我的 Dropbox 中，并把我推到了极限。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T10:36:32.820

执行时`meteor run`，它会使用默认的 mongo 设置启动 mongodb，因此它会在`.meteor/local/db/journal`.

没有明显的方法可以禁用此行为。作为一种解决方法，我所做的是更改文件`app/lib/mongo_runner.js`并添加一个`--nojournal`在启动时传递给 mongodb 的参数。

我为此创建了一个问题：[https ://github.com/meteor/meteor/issues/15](https://github.com/meteor/meteor/issues/15)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:36:07.230

也许您可以对 mongoDB 使用 smallfiles=true 参数？它将创建最小的 prealloc 文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T21:59:57.883

您可以通过将 --noprealloc 参数传递给 mongod 来关闭预分配。缺点是每次需要分配新的存储文件时都会出现暂停。根据您使用的文件系统（例如，ext3 与 ext4），这可能会导致用户出现明显的延迟。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-02T09:59:01.877

对我有用的命令是：

1.  如果 mongodb 实例正在运行，则停止它

`sudo service mongod stop`

2.  创建新的 mongodb 实例而不需要 3+GB 的预分配空间并使用小文件。

`mongod --noprealloc --smallfiles`

如果您收到“错误：dbpath (/data/db) 不存在”。运行 2 时，然后在 2 之前运行这些命令。 `sudo mkdir -p /data/db/`

`sudo chown `id -u` /data/db`

# android - 如何使用 cocos2d 在 android 中添加面板

> ID：10119290
> 
> 赞同：0
> 
> 时间：2012-04-12T07:30:41.497
> 
> 标签：android, cocos2d-iphone, panel, cocos2d-android, android-sliding

我想添加一个使用 cocos2d for android 的滑动面板视图。有什么建议么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:21:39.313

我在以前的一个用于彩弹场设计的 android 市场应用程序中实现这一点的方法是将一个单独的 CCLayer 类作为子级添加到主场景中，并让主场景响应 CCTouchesBegan。如果触摸的位置在可见面板的坐标内，则在其内部调用“触摸”方法传递触摸坐标，以便它可以处理自己的内容。

在底部的另一个面板上，我有一个按钮，它显示或隐藏侧面板，因此它不会“滑动”或支持在屏幕上“扔”，而是显示或隐藏。

我相信，在屏幕上滑动或打开/关闭屏幕可以相对简单地编写，使用 CCTouchesMoved 和 CCTouchesEnded 的组合来跟踪滑动/抛出并在图层坐标上执行翻译。

没有什么可以阻止我使用一些简单的动画来实现滑入/滑出，但我在应用程序中不需要它，因此没有实现它。

希望这至少有一些用处，对不起，我现在不能提供一些工作的例子，忙于工作。

# mysql - 在 MySQL 中使用 LIMIT 和 OFFSET 时返回哪些行？

> ID：10119291
> 
> 赞同：171
> 
> 时间：2012-04-12T07:30:41.640
> 
> 标签：mysql

在下面的查询中：

```
SELECT column 
FROM table
LIMIT 18 OFFSET 8 
```

我们将获得多少结果作为输出以及从哪里到哪里？

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2012-04-12T07:35:23.483

它将返回 18 个结果，从记录 #9 开始，到记录 #26 结束。

首先从 读取查询`offset`。首先你偏移 8，这意味着你跳过了查询的前 8 个结果。然后限制为 18。这意味着您考虑记录 9、10、11、12、13、14、15、16....24、25、26，总共 18 条记录。

看看[这个](http://sqlfiddle.com/#!9/98669a/1)。

还有[官方文档](http://dev.mysql.com/doc/refman/5.6/en/select.html)。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2015-10-05T06:51:50.177

`OFFSET`只不过是一个关键字来指示表中的起始光标

```
SELECT column FROM table LIMIT 18 OFFSET 8 -- fetch 18 records, begin with record 9 (OFFSET 8) 
```

你会得到相同的结果表格

```
SELECT column FROM table LIMIT 8, 18 
```

视觉表示（`R`以某种顺序在表中的一条记录）

```
 OFFSET        LIMIT          rest of the table
 __||__   _______||_______   __||__
/      \ /                \ /
RRRRRRRR RRRRRRRRRRRRRRRRRR RRRR...
         \________________/
                 ||
             your result 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-12T07:36:23.780

您将获得从`column`值 9 到 26 的输出，正如您提到`OFFSET`的 8

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-16T05:24:38.757

偏移量主要用于支持 MySql SELECT 语句中的分页。首先执行查询，然后返回偏移量之后的记录。

**例如**：假设您想按照评分顺序（最高优先）在每页显示产品的 10 条评论，然后可以使用以下查询来获取将显示在第三页上的评论：

*从评论中选择 *，其中 productid= order by rating desc LIMIT 10 OFFSET 20。*

# jquery - jquery：创建隐藏元素+ slideToggle

> ID：10119295
> 
> 赞同：2
> 
> 时间：2012-04-12T07:30:49.983
> 
> 标签：jquery, slidetoggle, wrapall

我有一个包含许多 p 的 div。情况如下：

```
<div id="container">
    <p>blabla</p>
    <p>blabla</p>
    <p id="my_id">blabla</p>
    <p>blabla</p>
    <p>blabla</p>
    <p>etc...</p>
</div> 
```

正如你所看到的，很多废话。我想附加`<a href>read more</a>`到`<p#my_id>`. 阅读更多链接之后的所有`<p>`'s 应该被隐藏。单击链接后，它必须淡出，并且所有`<p>`' 都应作为一个对象滑入。

所以我猜下面`<p>`的必须被包裹在一个隐藏的 div 中，稍后会滑进去。

我希望我的想法很清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:07:52.853

这是你想要的吗？

**jQuery**

```
$(document).ready(function() {
    $('#my_id>div').hide();
    $('<a href="#" id="read-more-link">Read More</a>').appendTo('#my_id');
    $('#read-more-link').click(function(e) {
        e.preventDefault();
        $(this).fadeOut();
        $('#my_id>div').slideToggle();
    });
}); 
```

**HTML**

```
<div id="container">
  <div id="my_id">
    <p>blabla</p>
    <div>
      <p>This is some hidden content</p>
      <p>This is some more hidden content</p>
    </div>
  </p>
</div> 
```

[jsFiddle 演示](http://jsfiddle.net/vYj5f/31/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:11:03.597

哇，终于，感谢你们，我破解了它！通过添加：

```
position: relative 
```

到了父容器，跳跃已经完全消失了！

```
var the_more = $( '<div id="the_more">' ).hide();
$('DIV#container').css("position", "relative");
$('DIV#container p').css("margin", "0px").css("padding", "10px 0px");
$('DIV#container p#inbetween ~ p').wrapAll( the_more );
$('<a href="#yje_more">read more</a>').appendTo('DIV#container p#inbetween').click( function(e){ e.preventDefault(); $(this).fadeOut(1000, function() { $(this).remove()} ); $('#the_more').slideToggle(1000); } ); 
```

感谢大家的帮助和耐心！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:40:05.237

您可以只给想要隐藏类的元素，并使用 CSS 默认隐藏它们，然后在单击链接后显示它们。

[jsFiddle 演示](http://jsfiddle.net/vYj5f/2/)

**CSS**

```
.read-more-content {
  display: none;
} 
```

**jQuery**

```
$(document).ready(function() {
    $('#read-more-link').click(function(e) {
        e.preventDefault();
        $(this).fadeOut();
        $('.read-more-content').slideToggle();
    });
}); 
```

**HTML**

```
<div id="container">
  <p id="my_id">
    blabla <a href="#" id="read-more-link">Read More</a>
  </p>
  <p class="read-more-content">This is some hidden content</p>
  <p class="read-more-content">This is some more hidden content</p>
</div> 
```

如果您只想依靠 jQuery 附加锚点并隐藏“阅读更多内容”，您可以执行以下操作：-

[jsFiddle 演示 2](http://jsfiddle.net/vYj5f/8/)

**jQuery**

```
$(document).ready(function() {
    $('.read-more-content').hide();
    $('<a href="#" id="read-more-link">Read More</a>').appendTo('#my_id');
    $('#read-more-link').click(function(e) {
        e.preventDefault();
        $(this).fadeOut();
        $('.read-more-content').slideToggle();
    });
}); 
```

**HTML**

```
<div id="container">
  <p id="my_id">
    blabla
  </p>
  <p class="read-more-content">This is some hidden content</p>
  <p class="read-more-content">This is some more hidden content</p>
</div> 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T07:51:42.157

**解决方案1：**

```
function do_slidedown(element){
  $(element).slideDown("slow", function(e){
    if($(element).next().length > 0){
      do_slidedown($(element).next());
    }
  });
}

$(document).ready(function() {
    $('#my_id ~ p').hide();
    $('#my_id').append("<a id='read_more' href='#'>read more</a>")
    $('#my_id').find("a#read_more").live("click", function(){
       $(this).hide();  // for remove link
       do_slidedown($('#my_id ~ p').first())
    });
}); 
```

如果您想`<p>`一一打开，请使用以下代码...

**解决方案2：**

```
$(document).ready(function() {
    $('#my_id ~ p').hide();
    $('#my_id').append("<a class='read_more' href='#'>read more</a>")
    $("a.read_more").live("click", function(){
       $(this).hide()
       $next_para = $(this).closest("p").next();
       if($next_para.next().length > 0) { $next_para.append("<a class='read_more' href='#'>read more</a>") }
       $next_para.slideDown();
    });
}); 
```

**重建您的解决方案：** 我认为由于 的自动边距而跳跃`<p>`，请检查以下内容。

```
var the_more = $( '<div id="the_more">' ).hide();
        $('DIV#container p').css("margin", "0px").css("padding", "10px 0px");
        $('DIV#container p#inbetween ~ p').wrapAll( the_more );
        $('<a href="#yje_more">read more</a>').appendTo('DIV#container p#inbetween').click( function(e){ e.preventDefault(); $(this).fadeOut(1000, function() { $(this).remove()} ); $('#the_more').slideToggle(1000); } ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T07:54:42.283

尝试这个：

```
var $afterP = $("#my_id").nextAll("p").hide();
var $readMore = $("<a></a>").attr("href", "#").addClass("read-more").text("Read more").appendTo("#my_id");

$("#container").on('click', '.read-more', function() {
    $afterP.slideToggle();
}); 
```

这将隐藏 之后的所有`p`元素，并且文档中出现`#my_id`的位置无关紧要。`#my_id`

[**示例小提琴**](http://jsfiddle.net/JunHA/)

# android - Android：如何在固定时间段内收集传感器值？

> ID：10119297
> 
> 赞同：0
> 
> 时间：2012-04-12T07:30:54.400
> 
> 标签：android, android-sensors

我想收集大约。5 秒加速度计的值。这样做的正确方法是什么？

我通过实现一个 AsyncTask 来尝试它，它在加速度计的传感器管理器中注册和注销自身，然后休眠 5 秒。但是在这 5 秒的睡眠期间，不会调用 onSensorChanged 方法：D ...

我寻求的动机如下：为了校准我的加速度计，我想收集几秒钟的传感器值（当手机躺在地板上时），然后通过计算平均值来获得偏差......

我很感激任何提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:37:30.763

假设您在 onResume 中启动传感器：

```
/**
 * start sensors
 */
public void onResume() {
    mSensorManager.registerListener(mListener, mSensorAcceleration, SensorManager.SENSOR_DELAY_GAME);
    mSensorManager.registerListener(mListener, mSensorMagnetic, SensorManager.SENSOR_DELAY_GAME);
    Handler h = new Handler();
    h.postDelayed(new Runnable() {

        @Override
        public void run() {
        //    do stuff with sensor values
            mSensorManager.unregisterListener(mListener);               
        }
    }, 5000);
... 
```

# json - 使用 curl 模拟 github 服务挂钩

> ID：10119299
> 
> 赞同：3
> 
> 时间：2012-04-12T07:30:59.983
> 
> 标签：json, curl, github, urlencode

我有一个服务监听 github 服务挂钩，以执行自动部署。有时我需要手动触发（无需 github 干预）。为此，我正在模拟 github 发送的 POST 请求（post-receive-URLs）。

我的数据 ( `my.json`) 看起来像这样（github 发送的有限子集 - 我不需要更多）：

```
{
  "action"      : "deploy_from_scratch_with_bundle",
  "pusher"      : { "email" : "my@email.com" },
  "ref"         : "refs/heads/master"
} 
```

我尝试用 curl 发布：

```
curl -X POST $URL --data-urlencode "@my.json" --header "Content-Type: application/x-www-form-urlencoded" 
```

问题是github是这样发布的：

```
payload=%7B%22pusher%22%3A%7B%22name%22%3A%22none%22%7D%2C%22repository%22%3
A%7B%22name%22%3A%liferay-plugins%22%2C%22created_at%22%3A%222011%2F12%2F07%2011%3A52... 
```

看到`payload=`那里了吗？这看起来像一个表单域。我不知道如何将表单字段与 urlencoding 结合起来。要发布表单字段，我会这样做：

```
curl -X POST $URL -F "payload=@my.json" 
```

但是 JSON 不会是 url 编码的。我如何获得两者？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T07:37:56.403

`curl $URL --data-urlencode payload@my.json`

# excel - 在总表中自动汇总新添加的 Excel 表

> ID：10119301
> 
> 赞同：0
> 
> 时间：2012-04-12T07:31:05.917
> 
> 标签：excel, vba

我有一个 Excel 工作簿，其中有代表日期的选项卡以及每个选项卡中的总和。虽然我可以在最后一张表中计算所有这些的总和，但是当添加新的电子表格时，我想要一个公式/宏来获得总命名表中的总和。

注意：- 所有单元格将保持不变（E56）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:46:42.620

我不明白你在尝试什么。直到用户在新工作表中放置导致 E56 值的信息之前，我认为将 NewSheet!E56 的值添加到总工作表中没有什么意义。

但是我怀疑你需要使用事件。下面是一些必须放置在`ThisWorkbook`工作簿的 Microsoft Excel 对象中的事件例程。这些只是输出到立即窗口，因此您可以看到它们何时被触发。注意：一个用户事件可以触发多个。例如，创建一个新工作表，触发：“为新工作表创建”、“为旧工作表停用”和“为新工作表激活”。

不要忘记包括

```
 Application.EnableEvents = False

    Application.EnableEvents = True 
```

围绕这些例程之一中将触发事件的任何语句。

也许您需要使用 SheetDeactivate。当用户离开工作表时，检查 E56 中的值。如果存在，请检查其是否包含在总计表中。玩一玩。做你的用户做的事。添加到这些例程以进一步调查。祝你好运。

```
Private Sub Workbook_SheetActivate(ByVal Sh As Object)

  Debug.Print "Workbook_SheetActivate " & Sh.Name

End Sub
Private Sub Workbook_BeforeClose(Cancel As Boolean)

   Call MsgBox("Workbook_BeforeClose", vbOKOnly)

End Sub
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Source As Range)

  Debug.Print "Workbook_SheetChange " & Sh.Name & " " & Source.Address

End Sub
Private Sub Workbook_SheetDeactivate(ByVal Sh As Object)

  Debug.Print "Workbook_SheetDeactivate " & Sh.Name

End Sub
Private Sub Workbook_NewSheet(ByVal Sh As Object)

  Debug.Print "Workbook_NewSheet " & Sh.Name

End Sub
Sub Workbook_Open()

   Debug.Print "Workbook_Open"

End Sub 
```

**响应澄清要求的额外部分**

下面的代码为除 TOTAL 之外的所有工作表重新计算单元格 E56 的总计，并在每次打开工作簿和每次用户更改当前工作表时将结果存储在工作表 TOTAL 中。

使用 Excel 很难获得一致的计时，但根据我的实验，您需要 500 到 1,000 个工作表，然后用户才会注意到由于重新计算而导致切换工作表的延迟。

我不确定您是否知道如何安装此代码，所以这里有简要说明。问他们是否太简短。

*   打开相关工作簿。
*   单击`Alt+F11`。显示 VBA 编辑器。在左侧，您应该会看到 Project Explorer。`Ctrl+R`如果没有，请单击。Project Explorer 显示将类似于：

.

```
VBAProject (Xxxxxxxx.xls)
    Microsoft Excel Objects
       Sheet1 (Xxxxxxxxx)
       Sheet10 (Xxxxxxxxx)
       Sheet11 (Xxxxxxx)
       :
       ThisWorkbook 
```

*   单击`ThisWorkbook`。屏幕右上方变白。
*   将下面的代码复制到该白色区域。
*   不需要采取进一步行动。宏 Workbook_Open() 和 Workbook_SheetDeactivate() 在适当的时候自动执行。

祝你好运。

```
Option Explicit

Sub CalcAndSaveGrandTotal()

  Dim InxWksht As Long
  Dim TotalGrand As Double

  TotalGrand = 0#
  For InxWksht = 1 To Worksheets.Count
    If Not UCase(Worksheets(InxWksht).Name) = "TOTAL" Then
      ' This worksheet is not the totals worksheet
      If IsNumeric(Worksheets(InxWksht).Range("E56").Value) Then            '###
        TotalGrand = TotalGrand + Worksheets(InxWksht).Range("E56").Value
      End If                                                                '###
    End If
  Next

  'Write grand total to worksheet TOTAL
  ' ##### Change the address of the destination cell as required  
  Worksheets("TOTAL").Range("D6").Value = TotalGrand

End Sub
Sub Workbook_Open()

  ' The workbook has just been opened.

   Call CalcAndSaveGrandTotal

End Sub
Private Sub Workbook_SheetDeactivate(ByVal Sh As Object)

  ' The user has selected a new worksheet or has created a new worksheet.

   Call CalcAndSaveGrandTotal

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T21:44:15.350

我知道这是编程论坛，但这种特殊的“需求”似乎可以在没有所有管道的情况下解决。

我喜欢旧的隐藏的第一张和最后一张纸把戏。

1.  创建一个名为**First的工作表**
2.  创建一个名为**Last的工作表**
3.  将您当前的数据表放在这两张表之间。
4.  隐藏**第一**张和**最后一张**
5.  现在您可以使用 3D 公式对所有这些工作表中的单元格求和，如下所示： **=SUM(First:Last!E56)**
6.  现在只需在最后一个可见数据表之后将工作表添加到您的工作簿，Excel 仍会将其滑入隐藏的 LAST 工作表之前，因此您的公式只是以这种方式扩展自身

# c# - 使用 as3 从 c# web 服务获取数据

> ID：10119304
> 
> 赞同：0
> 
> 时间：2012-04-12T07:31:19.133
> 
> 标签：c#, xml, webservice-client, xmlnode, actionscript-3

我从 c# web 服务获取我的对象，但我不能在 xml 列表中使用它们，请你看看我的代码。

函数 LoadedXML(evt:ResultEvent):void {

```
clearALL();
loading.alpha = 0;
//trace(evt.target.data);
xmlData = new XML(evt.result);
 trace(xmlData+"\n objects are listed successfully");

var allDATAS:XMLList = xmlData.catNameServiceLibrary.attributes(); 
  // there should be problem here when accessing nodes 

for each (var datas:XML in allDATAS)
{   
    if (datas.name() == "CatName")
    {
        var tmpText:String = datas.toString();
        catName_XML.push(tmpText.substr(0,1).toLocaleUpperCase()+tmpText.substr(1,20).toLocaleLowerCase());
    }
    if (datas.name() == "Popular")
    {
        popular_XML.push(datas.toString());
    }
    if (datas.name() == "Gender")
    {
        gender_XML.push(datas.toString());
    }
} 
```

当我跟踪跟踪时（xmlData+“\n 对象已成功列出”）；

我得到输出

[对象对象],[对象对象],[对象对象],[对象对象],[对象对象],[对象对象],[对象对象],[对象对象],[对象对象],[对象对象], [对象对象],[对象对象],[对象对象],[对象对象],[对象对象],[对象对象],[对象对象],[对象对象],[对象对象],[对象对象], [对象对象],[对象对象],[对象对象],[对象对象],[对象对象],[对象对象],[对象对象],[对象对象],[对象对象]

如何将我的数据存储到 xmllist...

# uitableview - UITableviewcell 布局中的 UIImage

> ID：10119309
> 
> 赞同：0
> 
> 时间：2012-04-12T07:31:50.270
> 
> 标签：uitableview

我在代码中布局对象时遇到问题。这是当前和所需状态的图片：

![在此处输入图像描述](../Images/fb3b1e94e9a1391557afd8006c328ac3.png)

这是代码

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];    
if (self) {
    self.title = NSLocalizedString(@"My Favorites", @"My Favorites");
    self.tabBarItem.image = [UIImage imageNamed:@"second"];

}    

favoritesTable = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 364) style:UITableViewStylePlain];
[favoritesTable setHidden:NO];
[favoritesTable setDelegate:self];
[favoritesTable setDataSource:self];

[self.view addSubview:favoritesTable];        

[favoritesTable release];

return self;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *cellIdentifier = @"<#MyCell#>";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
}

NSInteger objectLocation = indexPath.row;

FoodData* food = (FoodData*)[resultsArray objectAtIndex:objectLocation];    

cell.imageView.image = [UIImage imageNamed:@"paris.jpg"];
cell.imageView.frame = CGRectMake(270, 4, 40, 36);    

cell.imageView.userInteractionEnabled = YES;
cell.imageView.tag = indexPath.row;

UILabel* lblText = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 260, 20)];
UILabel* lblType = [[UILabel alloc] initWithFrame:CGRectMake(0, 21, 260, 20)];

[lblText setFont:[UIFont fontWithName:@"Helvetica" size:10.0]];
[lblType setFont:[UIFont fontWithName:@"Helvetica" size:9.0]];

lblType.textColor = [UIColor blueColor  ];

[lblText setText:[food foodName]];
[lblType setText:[food foodType]];

[cell addSubview:lblText];
[cell addSubview:lblType];

[lblText release];
[lblType release];

return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:44:56.667

在 ios5 上，使用 IB 上的原型单元将是您最简单的出路。

如果您不在 ios 5 上，我强烈建议您使用自定义 tableviewcell。

您的问题的简短解决方案可以在下面的链接中找到。

[UITableViewCell 右侧有图像？](https://stackoverflow.com/questions/780395/uitableviewcell-with-image-on-the-right)

# c++ - QDoubleValidator 不工作？

> ID：10119310
> 
> 赞同：8
> 
> 时间：2012-04-12T07:31:53.383
> 
> 标签：c++, qt, validation, qvalidator

我正在尝试在 Qt 4.2 的行编辑框中应用验证器，但它不起作用：

```
 QDoubleValidator *haha= new QDoubleValidator(this);
 haha->setBottom(0.00);
 haha->setDecimals(2);
 haha->setTop(100.00); 
 get_line_edit()->setValidator(haha); 
```

或者

```
 QDoubleValidator *haha= new QDoubleValidator(0.00,100.00,2,this); 
```

无论哪种方式，我仍然可以输入我想要的任何值。

但如果我切换到`QIntValidator`，它的工作原理！

所以我去谷歌搜索了一下，很多人曾经遇到过同样的问题。它是一个错误吗？或者我应该做一些其他的设置？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-10-10T19:19:50.043

刚刚被这个绊倒了。尝试将 QDoubleValidator 表示法设置为：

```
doubleValidator->setNotation(QDoubleValidator::StandardNotation); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-12T09:08:01.950

验证器文档说，当输入是任意双精度但超出范围时，它会从“验证”返回“中间”。

您需要通过使用行编辑控件（例如，通过发出“returnPressed”信号）区分中间输入和用户想要提交的最终输入。如果用户键入“10000”，这仍然是 0 到 100 之间数字的有效中间输入，因为用户可以在此输入前加上“0.”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-19T04:46:00.760

您必须为您的验证器设置符号

```
QLineEdit *firstX;
QDoubleValidator* validFirstX = new QDoubleValidator(-1000, 1000, 3, ui.firstX); 
validFirstX->setNotation(QDoubleValidator::StandardNotation); 
```

然后它可以工作但不完全正确。有趣的部分是它控制数字而不是数字本身。例如，在本例中，您可以在 QLineEdit 1000 中输入 9999。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-24T12:42:17.907

&& ( input.toDouble() > top() || input.toDouble() < bottom())

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T07:56:36.570

[此示例](http://qt-project.org/doc/qt-4.8/widgets-lineedits.html)在 4.8 中运行良好。自 4.2 以来，它看起来并没有改变，所以我怀疑问题在于您如何创建 QLineEdit。这是该示例中的相关代码。

```
QLineEdit* validatorLineEdit;
validatorLineEdit = new QLineEdit;
validatorLineEdit->setValidator( new QDoubleValidator(-999.0, 999.0, 2, validatorLineEdit)); 
```

您是如何创建行编辑的？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-22T13:02:35.417

为了澄清，使用`QDoubleValidator::setNotation(QDoubleValidator::StandardNotation)`

例子：

```
QDoubleValidator* doubleValidator = new QDoubleValidator(-999.0, 999.0, 2, validatorLineEdit);
doubleValidator->setNotation(QDoubleValidator::StandardNotation);
validatorLineEdit->setValidator(doubleValidator); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-09T07:16:19.243

如果您将验证器设置为 a`QLineEdit`那么您可以使用该函数`hasAcceptableInput()`来检查输入的值是有效还是无效。例如：

```
if (!ui->lineEdit_planned_count_vrt->hasAcceptableInput())
{
    slot_show_notification_message("EDIT_PLAN_COUNT_VRT", notification_types::ERROR, INVALID_INPUTED_VALUE);
    return;
}
bool isOk = false;
double value = ui->lineEdit_planned_count_vrt->text().toDouble(&isOk);
//do something with the value here.... 
```

# php - 多个文本框的ajax自动完成

> ID：10119313
> 
> 赞同：2
> 
> 时间：2012-04-12T07:32:04.157
> 
> 标签：php, ajax

我已经为我的php代码usign ajax完成了自动完成。我使用这个代码来自动完成一个fileld。我可以使用相同的代码来自动完成多个字段......

代码包含ajax代码是

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Autocomplete.....</title>

<script type="text/javascript" src="jquery-1.2.1.pack.js"></script>

<script type="text/javascript">
    function lookup(inputString) 
    {
        if(inputString.length == 0) 
        {
            // Hide the suggestion box.
            $('#suggestions').hide();
        }
        else 
        {
            $.post("rpc.php", {queryString: ""+inputString+""}, function(data)
            {
                if(data.length >0) 
                {
                    $('#suggestions').show();
                    $('#autoSuggestionsList').html(data);
                }
            });
        }
    } // lookup

    function fill(thisValue) 
    {
        $('#inputString').val(thisValue);
        setTimeout("$('#suggestions').hide();", 200);
    }

</script>

<style type="text/css">

    body 
    {
        font-family: Helvetica;
        font-size: 11px;
        color: #000;
    }

    h3 
    {
        margin: 0px;
        padding: 0px;   
    }

    .suggestionsBox 
    {
        position: relative;
        left: 30px;
        margin: 10px 0px 0px 0px;
        width: 200px;
        background-color: #212427;
        -moz-border-radius: 7px;
        -webkit-border-radius: 7px;
        border: 2px solid #000; 
        color: #fff;
    }

    .suggestionList 
    {
        margin: 0px;
        padding: 0px;
    }

    .suggestionList li 
    {

        margin: 0px 0px 3px 0px;
        padding: 3px;
        cursor: pointer;
    }

    .suggestionList li:hover 
    {
        background-color: #659CD8;
    }

</style>

</head>

<body>

<div>
        <form>
            <div>
                Type your county:
                <br />
                <input type="text" size="30" value="" id="inputString" onkeyup="lookup(this.value);" onblur="fill();" />
            </div>

            <div class="suggestionsBox" id="suggestions" style="display: none;">
                <img src="upArrow.png" style="position: relative; top: -12px; left: 30px;" alt="upArrow" />
                <div class="suggestionList" id="autoSuggestionsList">
                    &nbsp;
                </div>
            </div>
        </form>
    </div>
</body>
</html> 
```

数据库连接页面的代码是

```
<?php

$con=mysql_connect("localhost","root","");
mysql_select_db("name",$con);

if(!$con) 
{
        echo 'ERROR: Could not connect to the database.';
}
else 
{
        if(isset($_POST['queryString'])) 
        {

        $queryString = mysql_real_escape_string($_POST['queryString']);

        if(strlen($queryString) >0) 
        {

        $query = mysql_query("SELECT cname FROM country WHERE cname LIKE '$queryString%' LIMIT 10");
                if($query) 
                {
                    while($result= mysql_fetch_object($query))
                    {

        echo '<li onClick="fill(\''.$result->cname.'\');">'.$result->cname.'</li>';
                    }
                } 
                else 
                {
                    echo 'ERROR: There was a problem with the query.';
                }
        } 
        else 
        {
                // Dont do anything.
        }
        } 
        else 
        {
            echo 'There should be no direct access to this script!';
        }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:13:57.917

是的，您可以使用代码自动完成多个字段。

## 快速而肮脏的方式：

**HTML：**

```
<input type="text" size="30" value="" id="inputString" onkeyup="lookup(this.value);" onblur="fill(this);" />
<input type="text" size="30" value="" id="inputString2" onkeyup="lookup(this.value);" onblur="fill(this);" />
<input type="text" size="30" value="" id="inputString3" onkeyup="lookup(this.value);" onblur="fill(this);" /> 
```

**Javascript：**

```
function fill(element,thisValue) 
{
    element.value = thisValue;
    setTimeout("$('#suggestions').hide();", 200);
} 
```

## jQuery 和更高效的方式（基于您的 jQuery 版本 1.2.1：

**HTML：**

```
<input type="text" size="30" value="" class="autoupdate" name="field1" />
<input type="text" size="30" value="" class="autoupdate" name="field2" />
<input type="text" size="30" value="" class="autoupdate" name="field3" /> 
```

**Javascript（使用 jQuery 1.2.1）：**

```
// fill on blur!
$(".autoupdate").blur(function()
{ 
    $(this).val(thisValue);
    setTimeout("$('#suggestions').hide();", 200);
});

// lookup value onkeyup!
$(".autoupdate").keypress(function()
{
    var fieldvalue = $(this).val();
    if ( fieldvalue.length > 0 )
    {
        // hide selections box
        $('#suggestions').hide();

    } else {

        $.post("rpc.php", {queryString: ""+fieldvalue+""}, function(data)
        {
            if(data.length >0) 
            {
                $('#suggestions').show();
                $('#autoSuggestionsList').html(data);
            }
        });

    }
}); 
```

## 进一步优化：

无需在按键时对 URL 进行 AJAX。如果您不介意多一秒自动填充；最好提交 PHP 表单**onblur**代替。此外，您还可以利用 JSON 并在一次 AJAX 调用中获得所需的所有数据，最终结果使表单的足迹有 1 个 AJAX 调用和 1 个 MySQL 数据库查询。**否则，您只需在每个触发的keyup**事件上敲击服务器。

-- 或者 --

或者，您可以设置一个延迟，在提交 PHP 表单之前等待 2-3 秒。然后还需要确保 setTimeout 在额外按键时被清除，以防止不必要的延迟 AJAX 调用堆积。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:45:33.643

因此，这完全取决于您的要求，我认为不需要一个字段的自动完成功能将有助于自动完成同一页面中的另一个字段。此外，用户输入相同字符串的可能性有多大。

话虽如此，您可以对此很聪明，并将服务器的响应存储在关联数组中，并在调用服务器之前先检查此关联数组，看看您是否可以从中提供数据，但为此我建议您存储来自服务器的 JSON 数据并使用 javascript（例如模板）构建 HTML。您仍然可以将 html 存储在关联数组中，但 html 可能会根据您的文本框而改变。

代码可能如下所示：

```
<script type="text/javascript">
    var searchResults=[];
    function lookup(inputString) 
    {
        if(inputString.length == 0) 
        {
            // Hide the suggestion box.
            $('#suggestions').hide();
        }
        else if(searchResults[inputString])
        {
           $('#suggestions').show();
           $('#autoSuggestionsList').html(searchResults[inputString]);
        }
        {

            $.post("rpc.php", {queryString: ""+inputString+""}, function(data)
            {
                if(data.length >0) 
                {
                    $('#suggestions').show();
                    $('#autoSuggestionsList').html(data);
                }
            });
        }
    } // lookup

    function fill(thisValue) 
    {
        $('#inputString').val(thisValue);
        setTimeout("$('#suggestions').hide();", 200);
    }

</script> 
```

显然，您需要更改您的选择器/或更改 div 的偏移量等，基于您想要自动建议的字段。

希望这可以帮助。

# iphone - 在可缩放的滚动视图中，如何确定窗口内容的位置？

> ID：10119315
> 
> 赞同：2
> 
> 时间：2012-04-12T07:32:06.147
> 
> 标签：iphone, objective-c, ios, uiscrollview

我有一个`UIScrollView`包含自定义绘制视图（两个圆圈）的可缩放视图。当视图被缩放时，我想知道圆圈的中心在哪里，在应用程序的窗口中。考虑以下步骤： ![1\. 1x 的视图](../Images/79bc4b29cb592f162799dde1aaa29874.png)

1X 时的视图

![在此处输入图像描述](../Images/2d05c017c723c40295ed0a0302621203.png)

视图以任意级别缩放，捏合集中在第一个圆圈上

![在此处输入图像描述](../Images/dd8d614d58dd44fcf3402a0ff94b3756.png)

视图以任意级别缩放，捏集中在右上角
我的意思是，如果我要在滚动视图顶部放置另一个包含圆圈的视图，以便该视图中的圆圈是同心的（不需要大小相同）在滚动视图的视图中具有较小的圆圈，新圆圈的中心应该位于哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T07:40:22.150

当使用 UIView 的坐标转换方法时，您的自定义视图嵌入到滚动视图中并不相关：

```
MyCustomCircleView *circleView;

CGPoint centerInLocalCoordinates = circleView.centerOfACircle;
CGPoint centerInWindowCoordinates = [circleView convertPoint:centerInLocalCoordinates
                                                      toView:nil]; 
```

也许窗口坐标不是您想要的。请记住，窗口的坐标空间始终是纵向的，并且主页按钮位于底部。在横向握持设备时，您的坐标（当然）会旋转。

转换为超级视图的坐标可能更容易，例如您的视图控制器的视图坐标空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:42:47.183

你画了圆圈吗？`scrollView.contentOffset`,`scrollView.contentSize`和的某种组合`scrollView.zoomScale`是您想要的。您可以使用这些值返回平移和缩放。

# ruby-on-rails - 为什么嵌套路由中的 id 会被切换？

> ID：10119324
> 
> 赞同：1
> 
> 时间：2012-04-12T07:32:56.973
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我的管理命名空间下有一个嵌套资源： The`admin/topic/comments_controller.rb`是`admin/topics_controller.rb`.

```
 namespace :admin do
    resources :topics do
      resources :comments, :controller => "topic/comments"
    end
  end 
```

给了我这条删除路线：

`DELETE
/admin/topics/:topic_id/comments/:id(.:format)
admin/topic/comments#destroy`

我正在创建一个链接来销毁评论，如下所示：

`# comment = @topic.comment.first
<%= link_to "Destroy", [:admin, comment], :method => :delete %>`

产生以下路线：

`/admin/topics/165/comments/11`

一切似乎都是正确的，只是两个 id 互换了。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:41:31.787

您可以改用 name_route ：

```
<%= link_to "Destroy", admin_topic_comment_path(@topic, comment), :method => :delete %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:46:16.280

`<%= link_to 'Destroy', :action => 'destroy', :id => comment.id, :method => :delete %>`

或者如果您使用 RESTFUL 路由：

`<%= link_to 'Destroy', delete_comment(:id => comment.id), :method => :delete %>`

在使用命名空间控制器和路由时，您必须使用命名空间模型才能`link_to`助手正常工作。

例如，在 app/models/admin/comment.rb

```
class Admin::Comment < Comment   
end 
```

# c++ - 使用 gSOAP 的 Apple Mach-O 链接器 (Id) 错误

> ID：10119326
> 
> 赞同：0
> 
> 时间：2012-04-12T07:33:11.997
> 
> 标签：c++, objective-c, ipad, ios5, gsoap

我真的被这个问题困住了......我希望你能在这里帮助我。

我正在为一家公司开发 iPad 应用程序，该应用程序需要使用安全的 SOAP Web 服务……这不是完美的组合！我知道，事情是环顾谷歌，我发现“最好”的事情是使用 gSOAP 制作一个 WS 客户端，这就是我所做的！现在我有了 C++ 中这些 WS 之一的客户端。

当我尝试调用 WS 的一种方法并构建应用程序时……会发生以下情况：

```
Ld /Users/me/Library/Developer/Xcode/DerivedData/App-akcairabnqiunvddtmwphaispprl/Build/Products/Debug-iphonesimulator/App.app/App normal i386
cd /Users/me/iOS/App

setenv MACOSX_DEPLOYMENT_TARGET 10.6

setenv PATH '/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin'

/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch i386 -isysroot 
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk 
-L/Users/me/Library/Developer/Xcode/DerivedData/App-akcairabnqiunvddtmwphaispprl/Build/Products/Debug-iphonesimulator 
-L/Users/me/iOS/App -F/Users/me/Library/Developer/Xcode/DerivedData/App-akcairabnqiunvddtmwphaispprl/Build/Products/Debug-iphonesimulator 
-F/Applications/Xcode.app/Contents/Developer/Library/Frameworks 
-filelist /Users/me/Library/Developer/Xcode/DerivedData/App-akcairabnqiunvddtmwphaispprl/Build/Intermediates/App.build/Debug-iphonesimulator/App.build/Objects-normal/i386/App.LinkFileList 
-mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 
-framework SenTestingKit -framework Foundation -framework UIKit -framework QuartzCore -framework CoreGraphics -ldataSOAPlibDev 
-o /Users/me/Library/Developer/Xcode/DerivedData/App-akcairabnqiunvddtmwphaispprl/Build/Products/Debug-iphonesimulator/App.app/App

ld: warning: ignoring file /Users/me/iOS/App/libdataSOAPlibDev.a, 
```

文件是为存档而构建的，它不是被链接的体系结构（i386）

```
Undefined symbols for architecture i386:

    'soap::soap()', referenced from:
  -[ViewContratosController viewDidLoad] in ViewContratosController.o
  '_soap_init_LIBRARY_VERSION_REQUIRED_20808', referenced from:
  -[ViewContratosController viewDidLoad] in ViewContratosController.o
 'soap_call_ns1__obtenerPais(soap*, char const*, char const*, ns2__paisFile*,     
  ns1__obtenerPaisResponse&)', referenced from:
  -[ViewContratosController viewDidLoad] in ViewContratosController.o
 'soap::~soap()', referenced from:
  -[ViewContratosController viewDidLoad] in ViewContratosController.o
 'ns2__paisFile::soap_default(soap*)', referenced from:
  ns2__paisFile::ns2__paisFile() in ViewContratosController.o
 'vtable for ns2__paisFile', referenced from:
  ns2__paisFile::ns2__paisFile() in ViewContratosController.o 
```

**注意：缺少 vtable 通常意味着第一个非内联虚拟成员函数没有定义。** ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

注意可能会说明问题......但我不知道如何解决它......有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:37:12.227

问题可能是您为 iPAd（ARM 架构）使用了一个库，并尝试构建到模拟器（i386 架构）。尝试构建到实际设备。

对我的提示是：

> ld：警告：忽略文件/Users/me/iOS/App/libdataSOAPlibDev.a，文件是为存档而构建的，它不是被链接的架构（i386）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:45:30.740

好的！我解决了它，包括（**不**导入）标题和由gSOAP在我试图使用WS的.mm文件中生成的nsmap......

```
#include "soapH.h"
#include "soapStub.h"
#include "soapdataServiceSoapBindingProxy.h"
#include "dataServiceSoapBinding.nsmap" 
```

如果您要使用由 gSOAP 创建的 WS 客户端制作静态库，请务必小心库项目的“**构建阶段”...仔细添加****标头**和**编译源**！

之后...将带有*标题*和*XML的**“lib.a”*导入到您的iOS项目中！并调用 WS 执行以下操作：

 **```
dataServiceSoapBinding service;
ns2__countryFile country;
struct ns1__getCountryResponse response;

country.idCountry = 11;

if(service.ns1__getCountry(&country, response) == SOAP_OK) {
    NSLog(@"ok");
} else {
    NSLog(@"ERROR");
} 
```

我希望这可以帮助任何人......因为我很难弄清楚这一点......并且没有找到太多关于它的信息！

:)**

# csv - 使用 AWK 获取文本并在 csv 中循环

> ID：10119329
> 
> 赞同：0
> 
> 时间：2012-04-12T07:33:29.080
> 
> 标签：csv, awk

我是 awk 的新手，我想问一下……我有一个这样的 csv 文件

```
IVALSTART  IVALEND   IVALDATE
23:00:00   23:30:00  4/9/2012

STATUS  LSN      LOC
K       lskpg    1201
K       lntrjkt  1201
K       lbkkstp  1211 
```

我想像这样改变

```
IVALSTART  IVALEND
23:00:00   23:30:00

STATUS  LSN      LOC   IVALDATE
    K   lskpg    1201   4/9/2012
    K   lntrjkt  1201   4/9/2012
    K   lbkkstp  1211   4/9/2012 
```

如何在awk中做到这一点？

谢谢和最好的问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:41:39.307

尝试这个：

```
awk '
NR == 1 { name = $3; print $1, $2 }
NR == 2 { date = $3; print $1, $2 }
NR == 3 { print "" }
NR == 4 { $4 = name; print } 
NR >  4 { $4 = date; print }
' FILE 
```

如果您需要格式化，则有必要使用适当的说明符 更改`print`为。`printf`

# oracle - Oracle 删除和创建索引

> ID：10119333
> 
> 赞同：2
> 
> 时间：2012-04-12T07:34:00.390
> 
> 标签：oracle, indexing

我想知道如果假设这些是在计划的停机时间内完成的，那么删除 Oracle 索引并重新创建它们是否会造成任何数据问题。

最近发现一些索引停在不正确的表空间上，想通过删除索引并在正确的表空间上重新创建来纠正它。

请多多指教。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T07:42:17.060

我认为这没有问题，但您也可以使用以下语法来代替 drop/create：

```
alter index <INDEX_NAME> rebuild tablespace <TABLESPACE_NAME> 
```

* * *

为了解决您在下面的评论中提出的问题，`alter index rebuild`应该更快。原因是当您删除索引并再次创建它时，索引树将从表本身构建。但是`alter index rebuild`，Oracle 会读取索引本身，从而减少 I/O 量。

# mysql - 具有多个数据库连接的 Codeigniter Database Forge

> ID：10119334
> 
> 赞同：0
> 
> 时间：2012-04-12T07:34:03.047
> 
> 标签：mysql, codeigniter, expressionengine, dbforge

我在我的 Codeigniter 应用程序中使用了多个数据库连接。当我加载`dbforge`它时，它会为当前的数据库连接加载它。如何设置 dbforge 使其与第二个数据库连接一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:10:02.877

在EE1中它曾经是：

```
mysql_select_db(<database name>); 
```

或者

```
$conn = mysql_connect($dbhost, $dbuser, $dbpass) or die ('Error connecting to mysql');
mysql_select_db($dbname);
...
mysql_close($conn); 
```

我相信在其他地方查看示例代码，您仍然可以使用这种方法。

**对于 EE2 尝试：**

```
$this->EE->load->dbforge();
$db = $this->EE->load->database(‘default’, TRUE); 
```

第一个参数在哪里寻找数据库配置设置组。

更多信息在这里： [http ://ellislab.com/codeigniter/user-guide/database/connecting.html](http://ellislab.com/codeigniter/user-guide/database/connecting.html)

旧 EE1 方法的示例仍在 EE2 中工作：http: [//expressionengine.com/forums/viewthread/213519/#992669](http://expressionengine.com/forums/viewthread/213519/#992669)

# .net - DataReader：指定的强制转换无效 (Int32)

> ID：10119336
> 
> 赞同：16
> 
> 时间：2012-04-12T07:34:03.507
> 
> 标签：.net, sqldatareader, datareader

为什么SqlDataReader在将0转换为整数时会抛出异常？

```
?dataReader(3)
0 {Short}
    Short: 0
?dataReader.GetInt16(3)
0
?dataReader.GetInt32(3)
{"Specified cast is not valid."}
    _HResult: -2147467262
    _message: "Specified cast is not valid."
    Data: {System.Collections.ListDictionaryInternal}
    HelpLink: Nothing
    HResult: -2147467262
    InnerException: Nothing
    IsTransient: False
    Message: "Specified cast is not valid."
    Source: "System.Data"
    StackTrace: "   at System.Data.SqlClient.SqlBuffer.get_Int32()     
                    at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)"
    TargetSite: {Int32 get_Int32()} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-12T07:37:18.783

它不是一个皈依者——它是一个演员。与以下相同：

```
short x = 0;
object y = x;
int z = (int)y; // BOOM! InvalidCastException Specified cast is not valid. 
```

在这两种情况下， a`short`都不是`int`。

如果不确定类型，您可以尝试：

```
int i = Convert.ToInt32(dataReader.GetValue(3)); 
```

# email - CentOs 6 中 sendmail 中的邮件头问题

> ID：10119337
> 
> 赞同：0
> 
> 时间：2012-04-12T07:34:06.510
> 
> 标签：email, header, sendmail

我在 rackspace 服务器上设置了 centOs 6，并安装了 Apache PHP 和其他模块。我还安装了 sendmail 以使用 PHP 中的 mail() 函数，它可以工作，但我无法在 mail() 中设置自己的标题。

```
 $to = "myemail@gmail.com"; 
 $subject = "Hi!";
 $body = "Hi,\n\nHow are you?";

 $from = " Team <my@odomain.com>"; 
 $headers  = "From: $from\r\n"; 
 $headers = "MIME-Version: 1.0\n" ;
 $headers .= "Content-Type: text/html; charset=\"iso-8859-1\"\n";

 if (mail($to, $subject, $body)) {
   echo("<p>Message successfully sent!</p>");
  } else {
   echo("<p>Message delivery failed...</p>");
  } 
```

但是我收到了标题为“Apache apache@server”的垃圾邮件。标题未设置。我也试过“-f emailaddress”，但没有用。

我应该怎么办？我也尝试了一些 sendmail 配置，但仍然没有解决。

里特什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:28:53.987

在行中替换`\r\n`为`\n``$headers = "From: $from\r\n";`

# php - 如何从网站 https 端的 httpdocs 加载文件

> ID：10119342
> 
> 赞同：2
> 
> 时间：2012-04-12T07:34:23.140
> 
> 标签：php, .htaccess, https

在我的网络服务器上。我有两个可公开访问的目录。其中一个是 httpdocs/，另一个是 httpsdocs/。您可能会猜到它们的用途。

当我想为自己创建一个 CMS 时，就会出现问题。出于安全原因，我希望它使用 HTTPS 加载页面，但问题是我的文件位于 httpdocs 目录中。我只能将系统文件移动到 httpsdocs，但我的下一个想法是，如果我想在普通网站上登录以供人们登录并查看未注册用户的隐藏内容，该怎么办？

现在我的问题是：有没有办法将它们组合到目录中，以便所有文件都在 httpdocs 中，并且我可以使用 HTTPS 提供的安全性访问它们？

您可能需要知道的事情：

*   网络服务器运行 php 5.2.9
*   我只能通过 FTP 访问网络服务器和这些目录。
*   服务器运行 apache，所以 .htaccess 是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:19:16.263

听起来您可能正在使用将事物分开的托管服务。如果是这种情况，那么答案是否定的，您不能将这两个目录合二为一。您可以询问您的供应商是否可以做出这种安排，但这需要更改您无法做到的 apache 配置。

话虽如此，除非能够修改该配置，否则您将找到的唯一其他答案是将所有内容移动到 httpsdocs 目录下。除非您可以设置另一个帐户，或者他们可能提供使用 HTTPS 连接设置子域的能力。那将是一个替代解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:28:51.683

有很多途径，但如果您无法更改 httpd.conf 或存在某些限制，大多数途径都会被阻止。

您最好的选择可能是简单地放弃 http: 并坚持使用 https: 并在 http: 文件夹中创建一个重定向 .htaccess。这样，一切都在一个目录上运行。

除非存在不允许您的用户通过 HTTP 使用 HTTPS 的缺点。

让您的 ISP 使 https 文件夹成为 http 文件夹的符号链接将是这里最简单的解决方案。

# php - 存储过程不返回值

> ID：10119343
> 
> 赞同：0
> 
> 时间：2012-04-12T07:34:33.150
> 
> 标签：php, mysql

这是我在 MySQL 中返回的存储过程

```
DELIMITER //
CREATE PROCEDURE get_content(content1)
BEGIN
SELECT content into content1
FROM page_content
WHERE id= 1;
/*END ;*/
END //
DELIMITER ; 
```

我正在使用以下代码使用存储过程获取值，但它不返回任何内容，我只是想知道如果我遗漏了什么。这是我的PHP代码

```
$rs = mysql_query('CALL get_content(@content1)' ); 
$rs = mysql_query('SELECT @content1' ); 
while($row = mysql_fetch_object($rs)) 
{
    print_r($row); 
} 
```

请帮助我，提前谢谢

斯内哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:41:40.230

您需要将输出参​​数与 SP 一起使用。

```
DELIMITER // 
CREATE PROCEDURE get_content(out content1 varchar(500)) 
BEGIN 
  SELECT content into content1 FROM page_content WHERE id= 1; 
END//
DELIMITER ; 
```

通过以下方法调用它。

```
SET @content1 =NULL;

CALL `get_content`(@content1)

SELECT @content1; 
```

# grails - Spock 测试用例不会在 Grails 中建立域类的关系？

> ID：10119345
> 
> 赞同：0
> 
> 时间：2012-04-12T07:34:49.763
> 
> 标签：grails, spock

我有一个 Spock 测试用例，其中的`setup`块如下所示：

```
setup: "set the required objects"
        def company = new Company(shortName:"infyyy",fullName:"infoysys",
            region:"tamilnadu" ,email:"a@ac.com" ,telphone:34343433,fax:34343433).save(failOnError:true)
        def project = new Project(name:"testing")
        def userInstance = new User(username:username,password:password,
            company:company,project:project,pt:["dummy"]).save(failOnError:true)
        def tasksInstance = new Tasks(title:"testingwork",startDate:(new Date()-4),endDate:(new Date().clearTime()-6),description:"blah blah",project:project,completed:true,user:userInstance).save(failOnError:true) 
```

而且，`Tasks`域类看起来像这样：

```
class Tasks {
    static belongsTo = [ user : User, project: Project ]
        //other code
} 
```

`User`类是这样的：

```
class User  {
        static hasMany = [ holidays : Holiday, tasks : Tasks, pt:String, project: Project ]
        //other code
} 
```

但是当我运行我的测试并且我的测试失败时（没有出现错误消息，但它在`then`我的 Spock 测试块中失败）并且我发现其中有错误。我的设置不会在 and 之间创建任何关系`User`，`Tasks`这使我的测试失败。

我要测试的控制器代码是：

```
def todaysTasks() {
        def user = User.get(springSecurityService.principal.id)
        def choice = params.managersProject
        params.max = Math.min(params.max ? params.int('max') : 10,100)
        def search = Tasks.createCriteria().list(max: params.max as Integer, offset: params.offset as Integer, order: params.order as String, sort : params.sort) {
            and {
                  project {
                      like('name',"${choice}")
                  }
                  eq('endDate', new Date().clearTime())
            }
        }
        println "todays task selected project is " + search
        [tasksInstanceList : search, tasksInstanceTotal: search.getTotalCount() ]
    } 
```

上述`println`测试中的打印`0`。为什么即使`endDate`我的测试比今天的日期少，也会发生这种情况？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:21:07.043

据我所知，GORM 不会通过遵循 belongsTo 关系来自动填充关系。

我总是做以下事情。

```
def u=new User(...)
u.addToTasks(
   title:"testingwork",
   startDate:(new Date()-4),
   endDate:...
)
u.save() 
```

请注意，我还没有创建任务对象。我已经将值的 Map 直接传递给 addToX... 这强调了添加的对象属于 User 并且应该由 GORM 实例化和保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:59:51.980

您不能（也不应该）在单元测试中测试条件查询。grails（和 spock）单元测试不支持 Criteria queires。阅读[此](https://stackoverflow.com/questions/5231154/how-to-test-a-grails-service-that-utilizes-a-criteria-query-with-spock)问题以获取可能的解决方案。

# c# - 最终 System.UnauthorizedAccessException：访问路径...被拒绝

> ID：10119346
> 
> 赞同：1
> 
> 时间：2012-04-12T07:34:51.703
> 
> 标签：c#, .net-3.5, disk-io

我有一个简单的 C# 控制台程序，它调用如下所示的函数：

```
static void DirTest()
{
    string dir = "Temp";
    for (int i = 0; i < int.MaxValue; i++)
    {
        if (!Directory.Exists(dir))
        {
            Directory.CreateDirectory(dir);
        }
        string file = Path.Combine(dir, "sample.txt");
        File.Create(file).Close();
        File.Delete(file);
        Directory.Delete(dir);
    }
} 
```

在某些 Win 7 机器上，此函数最终会引发异常（当 i 超过 100,000 时）：

```
        未处理的异常：System.UnauthorizedAccessException：对路径“D:\...\Temp\sample.txt”的访问被拒绝。
       在 System.IO.__Error.WinIOError（Int32 错误代码，字符串可能全路径）
       at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights,
     Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBU
    TES secAttrs、字符串 msgPath、布尔 bFromProxy）
       在 System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare sh
    是，Int32 bufferSize，FileOptions 选项）
       在 System.IO.File.Create（字符串路径）
       在 D:\Exceptions\Program.cs:line 118 中的 Exceptions.Program.DirTest()
       在 D:\Exceptions\Program.cs 中的 Exceptions.Program.Main(String[] args)：
    第 167 行

```

这些机器安装了 McAfee 代理和 Cisco 安全代理以及许多其他软件。Windows Defender 被禁用。该程序正在管理员控制台中运行。该程序是为 .net 3.5 编译的。这是我在 W2k3 或 XP 机器上没有看到的。

如果我使用 procmon 来监视正在访问创建和删除“Temp\sample.txt”文件夹的所有事件和进程，我看到除了测试应用程序之外没有其他进程正在访问该路径。即使出现异常，procmon 中也没有列出其他进程。所以我不能证明这是杀毒软件的错。

有人知道可能出了什么问题吗？我是否在 Win7 上的 .net 中发现了一个错误；）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T23:18:20.030

@whywhywhy

我稍微修改了您的代码，看看我是否可以获得更多信息，如果它最终会出错。

```
static void DirTest()
{
    string dir = "Temp";
    int i = 0;
    try
    {
        for (i = 0; i < int.MaxValue; i++)
        {
            if (!Directory.Exists(dir))
            {
                Directory.CreateDirectory(dir);
            }
            string file = Path.Combine(dir, "sample.txt");
            File.Create(file).Close();
            File.Delete(file);
            Directory.Delete(dir);
            System.Console.WriteLine("Finished i: " + i);
        }
    }
    catch
    {
        System.Console.WriteLine("Error on i: " + i);
        throw;
    }
} 
```

我经历了 200,000 次迭代，没有出现任何问题。我什至在循环中注释掉了 writeline，这将使它执行得更快，仍然没有问题。

我不确定您使用的是哪个版本的 Visual Studio，但是您可能想尝试几件事：1) 检查 VS 和 Windows 的更新。2) 检查硬盘驱动器的驱动程序更新。

也许您也可以使用 print 语句运行修改后的代码……看看这是否是时间问题。print 语句可能足以让事情顺利进行。如果是这样的话，那我的猜测会和衙门一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:36:38.457

代码适用于我的 Maschine Windows 7 / 64 位

我猜你的“反病毒”程序是检查每个创建文件的问题。

我让 McAffee 运行，但没有 Cisco ..

希望这个答案能有所帮助；）

# android - Titanium Android 选项卡

> ID：10119364
> 
> 赞同：0
> 
> 时间：2012-04-12T07:36:24.107
> 
> 标签：android, titanium, titanium-mobile

我想使用适用于 android 的钛来实现以下两个选项卡。这些不是正常的标签，那么我该如何实现它们呢？

![在此处输入图像描述](../Images/bb2691e1117a7304e1cdc2743a2c0d43.png)

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:53:05.743

使用两个 Button 和一个包含不同 ListView 的 ViewFlipper。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:04:13.377

[在 android 和 iphone 上工作的自定义 tabgroup 类](http://developer.appcelerator.com/question/46801/giving-to-the-community-custom-tabgroup-class-working-on-android-and-iphone)可能对您有用。[还可以查看android](http://dl.dropbox.com/u/143939/tabs_xcompat_android.png)和[iphone](http://dl.dropbox.com/u/143939/tabs_xcompat_iphone.png)的屏幕截图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T18:46:47.297

这些似乎是工具栏上的按钮而不是选项卡。由于 Titanium 中不支持 Android 工具栏（我不确定 Android 是否有一个叫做工具栏的东西），所以您将不得不伪造它。要在 Android 上获得相同的结果，您必须使用常规 createView 并在其中添加背景和不同的按钮。您还必须使按钮工作。

# spring-mvc - 我如何在春季使用 multiactioncontroller 而不是 simpleformcontroller 获取表单值

> ID：10119367
> 
> 赞同：0
> 
> 时间：2012-04-12T07:36:43.617
> 
> 标签：spring-mvc

严重：servlet 调度程序的 Servlet.service() 抛出异常 java.lang.IllegalStateException：在 org.springframework.web.servlet.support.BindStatus.(BindStatus. java:141) 在 org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:175) 的 org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:175)在 org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:161) 在 org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.autogenerateId(AbstractDataBoundFormElementTag.java:148) 在 org.springframework .web.servlet.tags.form.AbstractDataBoundFormElementTag.resolveId(AbstractDataBoundFormElementTag.java:139) 位于 org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:123) 位于 org.springframework.web.servlet。 tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:380) 在 org.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:140) 在 org.springframework.web.servlet.tags.form。 AbstractFormTag.doStartTagInternal(AbstractFormTag.java:91) at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:78) at org.apache.jsp.WEB_002dINF.jsp.ForumList_jsp._jspx_meth_form_005finput_005f0(ForumList_jsp.java: 189) 在 org.apache.jsp.WEB_002dINF.jsp.ForumList_jsp。_jspx_meth_form_005fform_005f0(ForumList_jsp.java:138) at org.apache.jsp.WEB_002dINF.jsp.ForumList_jsp._jspService(ForumList_jsp.java:94) at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) at javax .servlet.http.HttpServlet.service(HttpServlet.java:717) 在 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377) 在 org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java :313) 在 org.apache.catalina.core.ApplicationFilterChain 的 javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 的 org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)。 internalDoFilter(ApplicationFilterChain.java:290) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.apache.catalina.core.ApplicationDispatcher。在 org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374) 在 org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436) 调用(ApplicationDispatcher.java:646) .catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302) 在 org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:239) 在 org.springframework.web.servlet.view.AbstractView.render (AbstractView.java:250) 在 org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1062) 在 org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790) 在 org.springframework。 web.servlet.DispatcherServlet.doService(DispatcherServlet.java:709) 在 org.springframework.web.servlet。FrameworkServlet.processRequest(FrameworkServlet.java:613) 在 org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:525) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:617) 在 javax.servlet .http.HttpServlet.service(HttpServlet.java:717) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206 ) 在 org.apache.catalina.core.StandardHostValve 的 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) 的 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)。在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 在 org.apache 调用(StandardHostValve.java:127)。catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:第 857 章.Thread.run（未知来源）在 java.lang.Thread.run 运行（JioEndpoint.java:489）（未知来源）在 java.lang.Thread.run 运行（JioEndpoint.java:489）（未知来源）

**我无法在多动作控制器中绑定 commandName，因为没有 setCommandName 和 setCommandClass 方法（methodSimpleFormController）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:04:22.480

如果您`request.getParameter("parameterName");`扩展`MultiActionController`. 利用`setCommand()`扩展`SimpleFormController`

更新（为了更好地理解 getParameter() 方法）：

假设您有这样的表格：

```
<form action="myController.html" method="post">
    Name : <input type="text" name="username" value="${param.username}" />
    <%--
       That ${param.username} will help pre-populating the value 
       of the text field with `username` parameter
    --%> 
</form> 
```

在您的控制器方法中，检索提交的参数，例如：

```
public ModelAndView myControllerMethod(HttpServletRequest request, HttpServletResponse response) {
    String username = request.getParameter("username");
} 
```

如前所述，您不能将 bean 与扩展一起使用`MultiActionController`，您需要单独为所有 bean 属性执行此操作。

# android - 如何通过按下按钮滚动列表视图

> ID：10119368
> 
> 赞同：0
> 
> 时间：2012-04-12T07:36:43.713
> 
> 标签：android

我有一个要求：</p>

我需要显示一个`ListView`，在我的视图底部我需要显示两个按钮（`Scroll Up`& `Scroll down`）。

当我`click`在滚动按钮上时，我的列表应该相应地滚动。

为此，我使用了

```
 android:scrollbars="none" 
```

在我的元素和我的 java 代码中，我通过以下代码增加或减少列表视图位置

```
public void onClick(View view) {
    // TODO Auto-generated method stub
    if (view == scrollupbtn) {
        if(listViewPosition >= 1)
            list_view.smoothScrollToPosition(-- listViewPosition);
    } else if (view == scrolldownbtn) {
        list_view.smoothScrollToPosition(++ listViewPosition);
    }
} 
```

上面的代码能够滚动我的列表，但它没有在我的项目的当前位置显示默认选择器。

而且我需要对我的按钮进行完全滚动控制，现在我也可以通过滑动来滚动我的列表。

请让我知道可以做些什么来解决这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:44:53.143

使用[setSelection()](http://developer.android.com/reference/android/widget/ListView.html#setSelection%28int%29)更改当前选定的项目。
要在滑动时禁用滚动，您可能需要从 ListView 继承您自己的类并覆盖[onTouchEvent()](http://developer.android.com/reference/android/view/View.html#onTouchEvent%28android.view.MotionEvent%29)。

# android-layout - 排在第一排

> ID：10119373
> 
> 赞同：0
> 
> 时间：2012-04-12T07:37:08.520
> 
> 标签：android-layout

```
 ----------------                                     -------------------
 |Name:          |                                   |Date:             |
 ---------------- -------------------------------------------------------
 | Orderid      |                |                   |                  |
 ---------------- -------------------------------------------------------
                                                     | Total:           |
                                                     ------------------- 
```

我们可以在android中制作一个布局作为图像中的布局吗？

我已经尝试了以下方法，但在图片中看起来并不那么聪明：-

`<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" android:id="@+id/rl"> <TextView android:layout_width="wrap_content" android:id="@+id/Name" android:layout_height="wrap_content" android:text="Name" android:layout_above="@+id/ll" android:layout_alignParentLeft="true"></TextView> <TextView android:layout_width="180dp" android:id="@+id/total" android:layout_height="wrap_content" android:text="Total" android:layout_alignParentBottom="true" android:layout_alignParentRight="true" android:layout_marginBottom="14dp" android:layout_alignLeft="@+id/CreationDate"></TextView> <TableRow android:id="@+id/tableRow1" android:layout_height="wrap_content" android:layout_below="@+id/CreationDate" android:layout_toRightOf="@+id/Name" android:layout_marginTop="106dp" android:layout_width="match_parent"> <TextView android:layout_height="wrap_content" android:layout_marginBottom="30dp" android:layout_width="wrap_content" android:id="@+id/orderid" android:text="Order ID"></TextView> <TextView android:layout_height="wrap_content" android:layout_width="wrap_content" android:id="@+id/businessname" android:text="BusinessName"></TextView> <TextView android:layout_height="wrap_content" android:layout_width="wrap_content" android:id="@+id/desc" android:text="Desc"></TextView> </TableRow> <TextView android:layout_width="194dp" android:id="@+id/CreationDate" android:layout_height="wrap_content" android:text="CreationDate" android:layout_alignParentTop="true" android:layout_alignParentRight="true"></TextView>
</RelativeLayout>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:32:40.540

//**你可以让这个视图 Like。**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        >
    <RelativeLayout
            android:id="@+id/relativeLayout2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@+id/textView1" >
        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:text="TextView" />

        </RelativeLayout>

    <RelativeLayout
        android:id="@+id/relativeLayout3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/relativeLayout2" >
         <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/textView3"
            android:text="TextView" />
    </RelativeLayout>
    <RelativeLayout
        android:id="@+id/relativeLayout4"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/relativeLayout3" >
         <TextView
            android:id="@+id/textView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/textView5"
            android:text="TextView" />
        <TextView
            android:id="@+id/textView6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:text="Total" />
    </RelativeLayout>

    </RelativeLayout> 
```

# database - phpMailer 检查字段是否为空

> ID：10119382
> 
> 赞同：0
> 
> 时间：2012-04-12T07:37:46.460
> 
> 标签：database, email, phpmailer, isset

我有一个预订脚本，运行良好并将内容放入数据库。但是，当我希望管理员在预订后发送电子邮件时，我想在用户未填写时将电子邮件留空。

例如，用户输入他的姓名、电子邮件、日期等，但将姓氏和评论字段留空，我不希望在电子邮件中输出。

我试过了

```
if(isset($_POST['Lastname'])){ 
    $Lastname=$_POST['Lastname'];
} else {
    $Lastname="The user didn't input his lastname";
} 
```

我用empty（）尝试过同样的方法。

我知道这是方法，但我不知道该放在哪里。

这是我的代码。

```
if (isset($_POST['submit']))
    {      
    include('../../../wp-config.php');          
        $Naam=$_POST['Naam'];
        $Achternaam=$_POST['Achternaam'];
        $Omgeving=$_POST['Omgeving'];
        $Geslacht=$_POST['Geslacht'];
        $Bedrijfsnaam=$_POST['Bedrijfsnaam'];
        $Postcode=$_POST['Postcode'];
        $Adres=$_POST['Adres'];
        $Woonplaats=$_POST['Woonplaats'];
        $Teloverdag=$_POST['Teloverdag'];
        $Teldirect=$_POST['Teldirect'];
        $Email=$_POST['Email'];
        $Aantal=$_POST['Aantal'];
        $Datum=$_POST['Datum'];
        $Vanuur=$_POST['Vanuur'];
        $Vanminuut=$_POST['Vanminuut'];
        $Totuur=$_POST['Totuur'];
        $Totminuut=$_POST['Totminuut'];
        $Opmerkingen=$_POST['Opmerkingen'];
        $Nieuwsbrief=$_POST['Nieuwsbrief'];
        $Datumverzonden=$_POST['Datumverzonden'];
        $Status=$_POST['Status'];

if (!$error) {

            require_once('phpMailer/class.phpmailer.php');
            $mail = new PHPMailer();

            $mail->From = $email;
            $mail->FromName = $name;
            $mail->Subject = "Website Reserveringsformulier Form";
            $mail->AddAddress($site_owners_email, $site_owners_name);
            $mail->AddAddress('mail@gmail.com', 'Name');
            $mail->IsHTML(true);
            $mail->Body = "<font size='5'>Beste Zomerlust</font>" . "\r\n<br /><br /> " . "Er is een reservering geplaats via restaurantzomerlust.nl." . "\r\n<br /><br />";
            $mail->Body .= "<b>Naam: </b>" . $Naam . "\r\n<br />";
            $mail->Body .= "<b>Achternaam: </b>" . $Achternaam . "\r\n<br />";
            $mail->Body .= "<b>E-mail: </b>" . $Email . "\r\n<br /><br />";
            $mail->Body .= "<b>Reservering: </b>" . $Omgeving . "\r\n<br /><br />";
            $mail->Body .= "<b>Aanhef: </b>" . $Geslacht . "\r\n<br /><br />";
            $mail->Body .= "<b>Bedrijfsnaam: </b>" . $Bedrijfsnaam . "\r\n<br />";
            $mail->Body .= "<b>Postcode: </b>" . $Postcode . "\r\n<br />";
            $mail->Body .= "<b>Adres: </b>" . $Adres . "\r\n<br />";
            $mail->Body .= "<b>Woonplaats: </b>" . $Woonplaats . "\r\n<br /><br />";
            $mail->Body .= "<b>Tel. overdag: </b>" . $Teloverdag . "\r\n<br />";
            $mail->Body .= "<b>Tel. direct: </b>" . $Teldirect . "\r\n<br /><br />";
            $mail->Body .= "<b>Aantal persronen: </b>" . $Aantal . "\r\n<br />";
            $mail->Body .= "<b>Datum: </b>" . $Datum . "\r\n<br />";
            $mail->Body .= "<b>Van: </b>" . $Vanuur . ":" . $Vanminuut . " tot " . $Totuur . ":" . $Totminuut . "\r\n<br /><br />";
            $mail->Body .= "<b>Opmerkingen: </b>" . $Opmerkingen . "\r\n<br /><br />";
            $mail->Body .= "<b>Nieuwsbrief: </b>" . $Nieuwsbrief . "\r\n<br />";

$mail->Send();

        } # end if no error
        else {

        } 
```

还有一件小事：每当发送电子邮件时，数据也会存储在数据库中。我该怎么做才能为数据库实现相同的效果。因此，如果未设置任何内容，则数据应为“未设置”或其他内容。

我希望你们能理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:44:22.617

关于什么

```
if(isset($_POST['Lastname'])){ 
    $Lastname=$_POST['Lastname'];
} else if ($_POST['Lastname'] == ''){
    $Lastname="The user didn't input his lastname";
}else{
    $Lastname="The user didn't input his lastname";
} 
```

# php - 为什么 file_put_contents 不被覆盖？

> ID：10119383
> 
> 赞同：0
> 
> 时间：2012-04-12T07:37:53.600
> 
> 标签：php, javascript

我有一个用户可以使用的带有所见即所得编辑器的页面。编辑后，他们可以按一个按钮，javascript 应该将当前页面发布到 save.php 文件并用新信息刷新页面。

有两个问题。第一个是最初页面没有加载更新的文件。用户必须刷新页面才能看到它更新（也许只需要额外的一秒钟来写入文件？）。第二个问题，临时文件第一次创建后，不能被覆盖，所以第一次刷新后页面永远不会更新。以下是我正在使用的片段：

WYSIWYG 编辑器页面 (editor.php) 上的 Javascript 函数：

```
function refresh(html,username,info)
{
    $.post("save.php", { html: html, username: username } );
    window.location = 'editor.php?info=' + info;
} 
```

保存.php 文件

```
$html = $_POST['html'];
$username = $_POST['username']; 
file_put_contents('temp/' . $username . '.txt', $html); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:10:19.183

由于浏览器在导航到下一页之前可能尚未发出 POST 请求，因此请使用 post 中的成功回调来执行重定位：

```
function refresh(html,username,info) {
  $.post("save.php", { html: html, username: username }, function() {
    window.location = 'editor.php?info=' + info;
  });
} 
```

正如其他人已经评论的那样，直接使用表单帖子中的数据而不对其进行清理是一个非常糟糕的计划，并且会使您的服务器容易受到各种恶意攻击。看看其中一些问题：[https ://stackoverflow.com/search?q=sanitize+php](https://stackoverflow.com/search?q=sanitize+php)

If the data is getting to your server ok, make sure that the access permissions on the directory 'temp' allow write access from the web server user (if you have access to SSH to your server, run `chmod go+w /path/to/temp`, otherwise most FTP programs allow you to set file permissions too).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:48:41.430

为什么不使用`fopen`and `fwrite`？

只需使用：

```
$html = $_POST['html'];
$username = $_POST['username']; 
$file = "temp/" . $username . ".txt";

if (!file_exists($file)) {
  $files = fopen($file, "x+");
} else {
  $files = fopen($file, "w+");
}

if(fwrite($files, $html)) {
  echo "Success!";
} else {
  echo "Failure!";
} 
```

对于 php 并在 js 中进行刷新，请尝试将语句放在成功函数中，如下所示：

```
function refresh(html,username,info) {
    $.post("save.php", { html: html, username: username }, 
            function (response) {
             window.location = 'editor.php?info=' + info;
             console.log(response);// for debugging :) 
           });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:58:25.960

ajax 请求是异步的，因此当重定向开始时，写入操作可能正在进行中。您必须收听 $.post 操作的完成情况才能进行重定向。

# asp.net-mvc - 将分层数据传递给视图的最佳实践/首选项？

> ID：10119384
> 
> 赞同：1
> 
> 时间：2012-04-12T07:37:54.067
> 
> 标签：asp.net-mvc, asp.net-mvc-3

为简单起见，假设我有来自具有以下层次结构的对象模型的数据类：

*   作者
    *   书
        *   章节

这些数据类中的每一个只包含对其子代的实例的引用，而不是它们的父代，因为它们的父代只包含 Id。例如，Book 有 Book.Chapters，但它没有对其父级的引用（即：Book.Author），而是具有父级的 Id（即：Book.AuthorId）。

现在我想在我的视图中显示这个层次结构的“面包屑”。但要做到这一点，我需要获取诸如 Author.Name、Book.Name 之类的信息......所以在我看来，我有以下选项：

1.  为每个视图创建自定义模型。即：新 SingleBookViewModel { TheAuthor = DB.GetAuthor(book.AuthorId), TheBook = book }

2.  从书中获取视图本身的数据。因此，例如，如果我有书本视图，我将能够使用： Author author = GetAuthor(book.AuthorId)... 并在剃刀视图本身内执行此操作。

3.  使用 Tuple 类传递数据。因此，为了查看章节，我使用具有以下签名的元组填充模型：

    ```
    元组<作者、书籍、章节>
    ```

**你会使用哪种方法？或者你会使用不同的东西吗？**

目前我正在使用第三种方法，即元组。

第二种方法可能是最“标准”的。但是我不喜欢必须创建和维护与它们背后的每个数据类（作者、书籍、章节）相对应的视图模型类的想法。

我想了解人们围绕诸如此类的事情提出了哪些“最佳实践”……以及使用元组是否有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:13:39.697

我会用 ViewModels 来实现它。您的每个视图都将被强类型化为包含该视图所需的所有数据的 ViewModel。您会在该 ViewModel 中获得一组 Authors，其中包含一组书籍，其中包含一组章节。

作为替代方案，您可以将视图绑定到作者集合，并在选择作者后向控制器的操作发出 ajax get 请求，该操作以 Json 格式返回书籍。这同样适用于章节。

# java - 两个 arrayList 对相同对象的引用

> ID：10119387
> 
> 赞同：3
> 
> 时间：2012-04-12T07:38:05.817
> 
> 标签：java, reference, arraylist

我有这个代码。但我不知道如何解释结果：

```
ArrayList<String> first = new ArrayList<String>();
        first.add("1");
        first.add("2");
        first.add("3");

        ArrayList<String> second = new ArrayList<String>();
        second = first;
        System.out.println("before modified:"+second.size());
        second.clear();
        System.out.println("after modified:");
        System.out.println("   First:"+first.size());
        System.out.println("   Second:"+second.size()); 
```

结果将是：3 / 0 /0

我不知道的问题是：当您分配时`first = second;`，第一个和第二个数组都将指向同一个对象（1,2 和 3）。在`clear`第二个数组上的所有元素之后，第二个数组和这些对象之间的所有引用都会丢失（这里没问题）。

我不知道的是：但这些对象（1,2 和 3）仍然持有对第一个数组的引用。为什么第一个数组的大小为 0。

请为我解释。

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T07:40:02.507

通过分配`second = first`，只有一个带有两个引用的数组列表。参考文献是一样的。因此，当使用两个引用（`first`或`second`）之一调用 clear 时，将对引用的 arraylist 执行 clear。

这与您最初的想法不同。并不是将`second = first`您添加到第一个字符串的所有引用分配到一个新的 ArrayList 对象中，这将是魔术（在 Java 中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T07:42:05.393

当您这样做时，`first = second`您的 ArrayList 项目将指向相同的内存位置。执行 a`.clear`将删除 ArrayList 指向的元素。这将对其他 ArrayList 产生影响。

如果您只想复制 to 的元素`ArrayList1`，`ArrayList2`您可以执行以下操作：`ArrayList<String> second = new ArrayList<String>(first);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T07:41:25.787

> 但这些对象（1,2 和 3）仍然持有对第一个数组的引用。为什么第一个数组的大小为 0。

```
ArrayList<String> second = new ArrayList<String>();
second = first; 
```

和写一样

```
ArrayList<String> second = first; 
```

您已经对第一个数组列表进行了第二个引用，它没有使用新的数组列表。因此，当您调用 clear 时，它会清除创建的“第一个”arraylist - 您有两个指向一个 arraylist 的引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T07:42:20.850

当您将一个 ArrayList 分配给两个变量并修改其中任何一个时，这将反映在两者中。因此，在任何一个变量中执行的操作也会反映在第二个变量中。（由两个变量引用的单个对象）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T07:47:51.393

在 Java 中，变量（除了原语）始终只是对对象的引用（具有对象的起始地址），引用本身绝不是对象。

例如

第二=第一；

正在分配一个引用，因此第一个和第二个现在引用同一个对象。对象不会被复制，无论是在赋值中，还是在参数传递中（复制/分配的是引用）。

# asp.net - 如何在 Windows 服务中嵌入 asp.net 站点（反之亦然）

> ID：10119388
> 
> 赞同：0
> 
> 时间：2012-04-12T07:38:10.773
> 
> 标签：asp.net, windows, service, tcp, self-hosting

我正在构建一个 Windows 服务，但我想获取一些网页来控制一些设置、获取诊断等...

您将如何将 asp.net 网站和 windows 服务结合在一起？我知道 WCF 可以自托管到任意进程中，但我可以对 asp.net 做同样的事情吗？

另一种选择是让我的服务逻辑在 asp.net 网站 application_start 方法中产生长时间运行的线程。但是，我没有获得内置功能的窗口服务，例如启动时自动启动。另一个问题可能是 IIS 可能决定回收该进程。此外，我的服务需要打开一个原始 tcp 套接字来接受连接。我可以在 IIS 中这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:45:50.650

我认为最简单、最可靠的方法是让 ASP.NET 网站在与 Windows 服务相同的服务器上的 IIS 下运行。Windows 服务可以承载 ASP.NET 应用程序可以访问的 WCF Web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:47:05.747

我会让您的 Windows 服务自托管 WCF“配置”服务。如果 UI 在同一台机器上，WCF 服务只需要在本地公开。如果 Windows 服务需要打开一个单独的原始套接字进行通信，这可能会在防火墙上打一个洞。

然后 ASP.NET UI 可以像往常一样由 IIS 托管，并调用 WCF 方法来执行配置任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:48:12.640

看起来您确实需要这两样东西——托管在 IIS 中的 Web 应用程序和托管为 Windows 服务的 Windows 服务。

然后您可以通过某种方式在两者之间共享数据，例如通过数据库。

# r - 管道 unix 命令

> ID：10119391
> 
> 赞同：2
> 
> 时间：2012-04-12T07:38:26.330
> 
> 标签：r, unix

[这是对这个](https://stackoverflow.com/questions/10102694/unix-linux-convert-fixed-width-file-to-csv-and-subset-on-two-columns)问题的跟进。我有[这个](http://dl.dropbox.com/u/1791181/pipe.txt)固定宽度的文件，其中列宽是 34 2 3 2 2 1 2 2 1 1 2 2 1 2 2 2 和 65。我想在删除第一列和最后一列后将其读入 R，其中第二列的值为“07”。感谢 Mat，如果我只想将 txt 文件转换为 csv，我可以使用以下代码来完成：

```
awk -v FIELDWIDTHS='34 2 3 2 2 1 2 2 1 1 2 2 1 2 2 2 65' -v OFS=',' '($2=='07'){ $1=$1 ''; print }' </filepath/pipe.txt | cut --delimiter=',' --fields=2- > /filepath/parsed.csv 
```

当然，然后我可以读入`parsed.csv`文件。但我试图用`pipe()`. 当我尝试在 R 中管道时，它挂起：

```
a = read.csv(pipe("awk -v FIELDWIDTHS='34 2 3 2 2 1 2 2 1 1 2 2 1 2 2 2 65' -v OFS=',' '($2=='07'){ $1=$1 ''; print }' 
                  </filepath/pipe.txt 
                  | cut --delimiter=',' --fields=2-")
             , header=F, colClasses="character") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:53:32.163

我不确定，`pipe()`但我会用`system()`.

```
library(stringr)
txt <- system("awk -v FIELDWIDTHS='34 2 3 2 2 1 2 2 1 1 2 2 1 2 2 2 65' -v OFS=',' '($2=='07'){ $1=$1 ''; print }' < pipe.txt | cut --delimiter=',' --fields=2-", intern=T)
do.call(rbind, str_split(txt, ",")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:22:29.273

jigr（和其他读者）——我在 R/RStudio 中发现了最奇怪的怪癖。只要没有换行符，我的问题中的代码就可以完美运行：

```
a = read.csv(pipe("awk -v FIELDWIDTHS='34 2 3 2 2 1 2 2 1 1 2 2 1 2 2 2 65' -v OFS=',''($2=='07'){ $1=$1 ''; print }' </filepath/pipe.txt | cut --delimiter=',' --fields=2-"), header=F, colClasses="character") 
```

我不知道为什么会这样。

# java - `check /= 2;` 的解释

> ID：10119392
> 
> 赞同：4
> 
> 时间：2012-04-12T07:38:26.677
> 
> 标签：java

我需要对此代码进行一些解释。这是别人给出的示例代码。

```
 for ( int i = 1; i <= 8; i++ )
    {
        if(check % 2 == 0)
            sum += i;
        else
            sum -= i;
        check /= 2;            <--- Need explanation for this line.
    } 
```

但在 中`Pseudo code`，没有`check /= 2;`程序。

这里是完整的`Pseudo code`。

```
int binary = 0;
int sum;

while(binary<256)
sum = 0;
for(go through all 8 digits)
    if the i-th digit is 0
        sum += i
    if the i-th digit is 1
        sum -= i
end for

if sum == 0
    output

binary++
end while 
```

那么，那行代码的目的是什么？

因为`sum`,`binary`和`check`被初始化为`0`。

我使用上面给出的伪代码编写了这段代码。但似乎我的代码会重复输出和另一个问题，即格式。

我希望输出是这样的格式：

```
Enter a number : 3

-1 -2 +3 = 0
1 +2 -3 = 0 
```

但我目前的输出是：

```
Enter a number : 3

-1 -2 3 = 0
1 2 -3 = 0 
```

这是我的代码：

```
CODE IS REMOVED! 
```

解决了！

我过于关注`for`输出部分的 -loop，因此错过了`while`二进制的 -loop，因为伪代码适用于 256 种可能的解决方案，因此，前面部分将有相同的输出，例如：

```
1 - 2 - 3 + 4 = 0                             

1 - 2 - 3 + 4 + 5 - 6 - 7 + 8 = 0 
```

因此，伪代码可以给出相同的输出。所以，由于解决方案是`2 ^ n`where`n = 1, 2, 3, ...`形式，所以改变

```
 while( binary < 256 )   --->     while ( binary < Math.pow(2, input)) 
```

应该解决它。

解决了答案的格式和重复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T07:42:15.610

这是方法`go through all digits`。最右边的数字由 检索`check % 2`，检查后，您将`check`一位数字（位）向右移动`check /= 2`（等于`check = check / 2;`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:50:53.937

使用此算法，您可以计算所有设置为`1`和设置为的位`0`。

```
check /= 2; 
```

它像是

```
check = check / 2; 
```

你可以用它把所有位右移一位。例如：

```
(binary) 101 / (decimal) 2 = (binary) 10 
```

即`101`右移一位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T08:05:04.103

让我们看看这一行：

```
check /= 2; 
```

在 Java 中，它等价于以下简单语句：

```
check = check / 2; 
```

现在让我们找出它背后的目的：

1.  最右边的数字由`check % 2`
2.  然后将其右移一位`check /= 2`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T07:45:40.883

check /= 2 等价于 check = check / 2;

它只是将多个分配组合成一个的一种方式，例如 sum += 2 等价于 sum = sum + 2;

# mysql - 具有可变列的数据库设计（mysql）

> ID：10119397
> 
> 赞同：0
> 
> 时间：2012-04-12T07:38:51.677
> 
> 标签：mysql, database-design

我正在解决一个问题，我试图找出为此设计 Db 表的最佳方法。假设我有多本书，每本书的页数不定...我需要跟踪每本书的页面浏览量

例如，书 1 = 10 页，书 2 = 20 页，书 3 和 100 页等当用户查看书中的每一页时，我需要记录该信息。

目的是在每本书的 %views 上提出一些聚合数字。我应该可以说，例如“70% 的人阅读了第一本书直到第 7 页，然后就放弃了”

我设想它是

```
book 1 page 1 1000 views
book 1 page 2 950 views
book 1 page 3 800 views
.....
...
book 1 page 10 50 views 
```

有了这个，我可以生成各种钻取报告

但是，由于每本书的页码不同，存储这些信息的最佳方式是什么？

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:43:06.127

表：

*   图书编号
*   书名

另一个表：

*   图书编号
*   页 ＃
*   # 读取次数

如果您愿意，还可以使用 Book_ID/Page_ID/Page # 表进一步拆分分解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:44:18.747

您将需要添加一个额外的表：

**页面浏览量：**

*   `BookId`.
*   `UserId`.
*   `PageNumber`.
*   `ViewDate`.
*   ...

使用复合主键 ( `BookId`, `UserId`, `PageNumber`)。

# css - 带有滚动条的 Facebook Like 框 - 可以设置样式吗？

> ID：10119398
> 
> 赞同：0
> 
> 时间：2012-04-12T07:39:20.823
> 
> 标签：css, facebook, styles, facebook-like, scrollbar

我的网站上有一个 facebook like-box，我想设置 iframe 中出现的滚动条的样式。但我看不到找到一种方法来做到这一点。任何人都知道它是如何可能的，或者它是否可能。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:04:30.560

您可以使用[此技术](http://www.webkit.org/blog/363/styling-scrollbars/)来设置滚动条的样式，但它仅适用于 WebKit 浏览器（Chrome 和 Safari）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T07:54:02.407

请通过此链接[http://rocketpopmedia.com/discover/2010/06/02/how-to-style-the-facebook-like-box-using-css/](http://rocketpopmedia.com/discover/2010/06/02/how-to-style-the-facebook-like-box-using-css/)

我希望这实际上是你想要的

编辑：

这个问题已经在 stckoverflow 中讨论过了，你可以检查一下你可以在[不访问 iframe 的 css 的情况下设置 iframe 滚动条的样式吗？](https://stackoverflow.com/questions/8813177/can-you-style-an-iframe-scrollbar-without-access-to-the-iframes-css)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-12T07:54:51.073

您始终可以使用 css 模拟一些滚动控制。

# android - 如何在 Boot Complete 中停止 360？

> ID：10119399
> 
> 赞同：0
> 
> 时间：2012-04-12T07:39:24.723
> 
> 标签：android

当我安装360时，我发现这个应用程序会在启动完成后启动。我怎样才能阻止这个？我使用以下代码：

```
pm.setComponentEnabledSetting(component,
                        PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
                        PackageManager.DONT_KILL_APP); 
```

但这也会在启动完成时开始！

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:45:46.920

At end of your code Your code write this.

```
pm.setComponentEnabledSetting(receiver, PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.GET_UNINSTALLED_PACKAGES); 
```

Try. And Reply.

# mysql - 使用 chmod 保护一些 Mysql 表不被写入？

> ID：10119415
> 
> 赞同：-1
> 
> 时间：2012-04-12T07:41:05.753
> 
> 标签：mysql, security, hosting, centos

问候大家

我有一个用于托管网站的 linux 盒子

所以我想出了一个想法，对 /var/lib/mysql/DATABASE 中的一些表（MYD，MYI，frm）文件进行 chmod

我需要问我是否可以在不破坏 mysql 数据库的情况下这样做，以及我必须添加哪些权限？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:11:49.447

正如我在评论中提到的，您应该为此目的使用 MySQL 用户帐户。[您可以在MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/adding-users.html)中阅读有关用户帐户的更多信息，但我个人更喜欢用于此目的的 GUI 工具。我个人最喜欢的是[SQLYog](http://www.webyog.com/en/)，它可以让您轻松地为特定用户（以及更多）定义每个表的访问级别，尤其是在您不熟悉 MySQL 命令行的情况下。

# iphone - ASIHTTPRequest appendPostData 不起作用

> ID：10119416
> 
> 赞同：0
> 
> 时间：2012-04-12T07:41:06.203
> 
> 标签：iphone, post, asihttprequest

我想使用 ASIHTTPRequest appendPostData 方法将字符串数据发送到 php 服务器，但它不起作用。

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request appendPostData:[@"123456" dataUsingEncoding:NSUTF8StringEncoding]];
[request startAsynchronous]; 
```

我尝试对请求本身进行一些修改，例如：

```
[request setRequestMethod:@"POST"];
[request buildPostBody]; 
```

但这也行不通。

当我使用

```
[request addPostValue:@"Ben" forKey:@"names"]; 
```

语法它确实有效。

有人知道这里有什么问题吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:51:58.880

我通常使用这个：

```
- (void)performPostRequestWithString:(NSString *)string stringDictionary:(NSDictionary *)stringDictionary dataDictionary:(NSDictionary *)dataDictionary delegate:(id)requestDelegate requestSelector:(SEL)requestSelector errorSelector:(SEL)errorSelector {

    //localCopy = self;

    self.delegate = requestDelegate;
    self.callback = requestSelector;
    self.errorCallback = errorSelector;

    NSURL *url = [NSURL URLWithString:string];

    postRequest = [[ASIFormDataRequest alloc] initWithURL:url];
    [postRequest setDelegate:self];
    [postRequest setRequestMethod:@"POST"];

    if (stringDictionary)
        for (NSString *key in [stringDictionary allKeys])
            [postRequest setPostValue:[stringDictionary objectForKey:key] forKey:key];

    if (dataDictionary)
        for (NSString *key in [dataDictionary allKeys])
            [postRequest setData:[dataDictionary objectForKey:key] forKey:key];

    //NSLog(@"request url = %@", [postRequest.url absoluteString]);
    [postRequest startAsynchronous];
} 
```

参数：

*   `(NSString *)string`- url 字符串，在哪里发布您的请求；
*   `(NSDictionary *)stringDictionary`- 字典，包含所有文本信息（如姓名、ID 等）；
*   `(NSDictionary *)dataDictionary`- 字典，包含所有数据信息（如照片、文件等）；
*   `(id)requestDelegate`- 委托执行以下选择器；
*   `(SEL)requestSelector`- 选择器，将在成功请求时执行；
*   `(SEL)errorSelector`- 选择器，将在发生错误时执行。

PS 选择器将在`ASIHTTPRequest Delegate`实现中使用

# java - 为什么我的 android 应用程序读取 åäö 但我的 java 应用程序没有（从 GAE 获取数据时）？

> ID：10119419
> 
> 赞同：1
> 
> 时间：2012-04-12T07:41:11.617
> 
> 标签：java, android, google-app-engine, servlets, utf-8

我正在使用 Google App Engine 来获取一些数据。在从 GAE 发送数据之前，我将内容类型设置为“text/html”，将字符编码设置为“UTF-8”。我确定字符 åöä 已正确存储在服务器数据库中。

从我的 android 应用程序获取数据时，一切正常。字符 åäö 正确表示。这是奇怪的部分：当从 Windows 上的 java 应用程序获取相同的数据时，åäö 被“Ã¥”和其他奇怪的符号取代。当在 Mac 上从我的 java 应用程序中获取相同的数据时，åäö 会被其他一些奇怪的字符所取代。

所以我的问题是：为什么 android 应用程序可以正确读取字符串，而 java 应用程序不能？

编辑：

以下是我从 GAE 发送字符串的方式：

```
resp.setContentType("text/html");
resp.setCharacterEncoding("UTF-8");
resp.getWriter().println(myString); 
```

以下是我在 android 和 windows 上的 java 中读取它的方式：

```
String response = "";
try {
URL url = new URL("http://mydomain.com/blabla");
URLConnection conn = url.openConnection();
conn.setDoOutput(true);
OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
wr.write(data);
wr.flush();

BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
String line;
while ((line = rd.readLine()) != null) {
   response += line;
}
wr.close();
rd.close();
} catch (Exception e) {
e.printStackTrace();
}

System.out.println("Response is: " + response); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:46:27.823

您如何知道 Windows 和 Mac 上的数据有误？您是否将其打印到控制台？如果是这样，很可能（尤其是在 Windows 上）控制台字符编码是错误的。您将向控制台写入 UTF-8 编码字符，控制台将尝试将它们解释为 Windows CP-whatever。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:46:39.963

听起来您没有明确说应该使用 UTF-8 编码来解码字符串，并且它是由默认平台编码完成的。

# blackberry - 如何检索 COD 文件的内容？

> ID：10119424
> 
> 赞同：0
> 
> 时间：2012-04-12T07:41:32.970
> 
> 标签：blackberry

我想要黑莓中正在运行的应用程序的 cod 文件的内容，这可能吗？如果是，那怎么可能？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:05:42.520

我认为通过正在运行的应用程序是不可能做到这一点的。我认为会有一些不好的安全问题。

一般来说，我认为您无法反编译和查看 COD 文件的内容。

但是有人说，一个叫做[Coddec](http://drbolsen.wordpress.com/2008/07/14/coddec-released/)的工具可以工作。

（根据这个答案[https://stackoverflow.com/a/6040267/383414](https://stackoverflow.com/a/6040267/383414)）

另请参阅此答案：[https ://stackoverflow.com/a/9962367/383414](https://stackoverflow.com/a/9962367/383414)

# php - 使用 PHP 的 Telnet 客户端

> ID：10119427
> 
> 赞同：-1
> 
> 时间：2012-04-12T07:41:45.627
> 
> 标签：php, windows-7, xampp, telnetlib

这是我的代码：

```
$socketConnection = @fsockopen ( "127.0.0.1", "23", $errorNumber, $errorString, 30 );
if ( ! $socketConnection )
{
    print '<b>Connection Failed</b><br />' . $errorString . '<br />' . $errorNumber;
}
else
{
    //stream_set_blocking ( $socketConnection, 0 );
    //stream_set_timeout ( $socketConnection, 10 );
    print '<b>Connection Success!</b><br />';
    fputs($socketConnection,'\r');
    sleep(1);
    $buffer = fread ( $socketConnection, 20 );
    $out='';
    for ( $i=0; $i < 20; $i++ )
    {
        $out .= $buffer [ $i ] ;
    }
        $response = trim ( preg_replace( "/^.*?\n(.*)\n[^\n]*$/", "$1", $out ) );
        echo $response;
        //$response = bin2hex($response);
        //hex2ascii('ff:fd:25:ff:fb:01:ff:fb:03:ff:fd:27:ff:fd:1f:ff:fd:00:ff:fb');
    fclose ( $socketConnection );
} 
```

现在，当我执行代码时，我得到了输出：

> ÿý%ÿûÿûÿý'ÿýÿý

没有别的了。可能是什么问题？我怎样才能解决这个问题。我在win7上使用xampp 2.5版

此外，我在我的系统上安装了 win7 telnet 服务器，我可以通过 telnet 命令远程登录它。

我用腻子远程登录，这是我得到的： ![腻子登录截图](../Images/716d9b393278ad50f53d805e88bf03c6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:07:36.517

它是 telnet 客户端“自动协商”的一部分……

如果您将字符转换为 HEX 会有所帮助，然后参考：

[TELNET 协议——KB 231866](http://support.microsoft.com/kb/231866)

哦，即使你说微软，：

[www.eventhelix.com - EventStudio - TCP/IP 协议序列图示例](http://www.eventhelix.com/realtimemantra/networking/)

具体来说，这些可以帮助您形象化：

> ***高级 Telnet 客户端和服务器协议序列图***
> 
> ***Telnet 协议上下文图——EventHelix.com/EventStudio 2.0***

您可以在 eventhelix.com 页面上找到它。

（*注意：很抱歉最后两个没有链接......，我的代表在这里仍然太低......* ;-)

# objective-c - 显示错误的当前时间

> ID：10119434
> 
> 赞同：2
> 
> 时间：2012-04-12T07:42:14.613
> 
> 标签：objective-c, ios, ios5, xcode4.2, nsdateformatter

我的时钟时间是 2012-04-12 09:37:01 +0000 但是我的代码输出显示了 2 小时的延迟。有人现在为什么？

```
NSDate *today;
today = [[NSDate alloc] init]; 
```

--- 在输出字段/调试器 ==>

```
(lldb) po today
(NSDate *) $3 = 0x06a3a8c0 2012-04-12 07:37:01 +0000 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T08:00:52.560

`2012-04-12 07:37:01 +0000`是 GMT 时间表示（格林威治时间）。也许您在 +0200（东欧）时区？如果是，则时间表示是正确的。如果没有，您应该将您的设备或系统配置为您所在位置的正确时区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:05:52.913

我遇到了同样的问题，错误是日期是从 ipad 时区生成的（在我的情况下与 Mac 时区不同）。你能检查一下吗？

# ruby - Ruby：如何使用 Nokogiri 从 XML 中获取属性值？

> ID：10119438
> 
> 赞同：3
> 
> 时间：2012-04-12T07:42:30.540
> 
> 标签：ruby, nokogiri

如何获取消息值的值（“准备使用”）？

```
<?xml version="1.0" encoding="UTF-8"?>
<response status="ok" permission_level="admin" message="ready to use" cached="0">
<title>kit</title>
</response> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T07:51:24.687

```
require 'rubygems'
require 'nokogiri'

string = %Q{
  <?xml version="1.0" encoding="UTF-8"?>
  <response status="ok" permission_level="admin" message="ready to use" cached="0">
  <title>kit</title>
  </response>
}

doc = Nokogiri::XML(string)
doc.css("response").each do |response_node|
  puts response_node["message"]
end 
```

保存并运行这个 ruby​​ 文件，你会得到结果：

```
#=> ready to use 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-12T07:51:55.883

你给它们下标。

```
doc = Nokogiri::HTML(open('http://google.com'))
doc.css('img:first').first['alt']
=> "Google" 
```

# python - 带有浮点数的 Numpy bincount()

> ID：10119441
> 
> 赞同：10
> 
> 时间：2012-04-12T07:42:42.960
> 
> 标签：python, numpy

我正在尝试获取浮点类型的 numpy 数组的 bincount：

```
w = np.array([0.1, 0.2, 0.1, 0.3, 0.5])
print np.bincount(w) 
```

如何将 bincount() 与浮点值而不是 int 一起使用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-12T14:17:14.497

`numpy.unique`使用前需要先使用`bincount`。否则，您所计算的内容是模棱两可的。`unique`对于 numpy 数组，应该比 Counter 快得多。

```
>>> w = np.array([0.1, 0.2, 0.1, 0.3, 0.5])
>>> uniqw, inverse = np.unique(w, return_inverse=True)
>>> uniqw
array([ 0.1,  0.2,  0.3,  0.5])
>>> np.bincount(inverse)
array([2, 1, 1, 1]) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-09-30T09:06:56.660

从1.9.0版本开始，可以`np.unique`直接使用：

```
w = np.array([0.1, 0.2, 0.1, 0.3, 0.5])
values, counts = np.unique(w, return_counts=True) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-12T07:49:02.273

你想要这样的东西吗？

```
>>> from collections import Counter
>>> w = np.array([0.1, 0.2, 0.1, 0.3, 0.5])
>>> c = Counter(w)

Counter({0.10000000000000001: 2, 0.5: 1, 0.29999999999999999: 1, 0.20000000000000001: 1}) 
```

或者，更好地输出：

```
Counter({0.1: 2, 0.5: 1, 0.3: 1, 0.2: 1}) 
```

然后，您可以对其进行排序并获取您的值：

```
>>> np.array([v for k,v in sorted(c.iteritems())])

array([2, 1, 1, 1]) 
```

的输出对`bincount`浮点数没有意义：

```
>>> np.bincount([10,11])
array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1]) 
```

因为没有定义的浮动序列。

# php - 分解 CSV 中的大量行并将它们作为批处理 php 处理

> ID：10119442
> 
> 赞同：0
> 
> 时间：2012-04-12T07:42:43.537
> 
> 标签：php, mysql, csv, import

我可以编辑和上传包含超过 50000 条记录（购物车产品）的 CSV。它应该更新系统中的表数。所以我在我的购物车中使用 zend 框架。

我计划在使用 PHP/MYSQL 批量处理它们之前在内存中分解它们（50000 条 CSV 记录）

请任何人都可以给我建议

我到现在为止是

```
public function getDataFromPath($path=null) {
        if($path == null) {
            $path = $this->_path;
        }
        ini_set("auto_detect_line_endings", 1);
        $fp = fopen($path, "r");
        while(($line = fgetcsv($fp, 5000, ",")) !== FALSE) {
            $line = self::trimArray($line);
            $this->data[] = $line;
        }
        fclose($fp);          
        return $this->data;
    } 
```

问候肉山

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:53:38.397

这是一份工作……

数据库人！！！

[使用load data infile](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)业务将您的 csv 直接加载到表中，然后执行您需要的任何魔术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:00:06.600

那里的每个 RDBMS 都不应该有 50.000 行的问题。没什么。无需批量处理它们。

只需使用[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)命令就可以了。

有关示例，请参见此处：[LOAD DATA INFILE 轻松将 YYYYMMDD 转换为 YYYY-MM-DD？](https://stackoverflow.com/questions/10102167/load-data-infile-easily-convert-yyyymmdd-to-yyyy-mm-dd)

**更新**（对 Ion Wood 的回答发表评论）：要创建 CSV 文件，您可以使用该`SELECT .. INTO OUTFILE`命令。

```
SELECT a,b,a+b INTO OUTFILE '/tmp/result.txt'
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\n'
FROM test_table; 
```

有关详细信息，请参阅[手册。](http://dev.mysql.com/doc/refman/5.0/en/select-into.html)

# android - 在安装后添加应用程序的 appwidget

> ID：10119445
> 
> 赞同：-1
> 
> 时间：2012-04-12T07:42:53.660
> 
> 标签：android, android-appwidget

我在设备上安装了一个接收器应用程序，它监听包添加的意图并在安装我的应用程序时执行代码

现在我希望该接收器将应用程序的 appwidget 放在主屏幕上

请让我知道它是如何完成的，或者有没有其他方法可以在安装应用程序时放置 appwidget

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:23:29.350

> 现在我希望该接收器将应用程序的 appwidget 放在主屏幕上

幸运的是，这是不可能的。用户将应用小部件添加到主屏幕，而不是您。

# ruby-on-rails - Rails/Heroku : db:push 运行正确但不创建数据库

> ID：10119451
> 
> 赞同：0
> 
> 时间：2012-04-12T07:43:25.157
> 
> 标签：ruby-on-rails, postgresql, heroku

昨天我在 Heroku 共享的 Postgres DB 上遇到了问题。看起来我的数据库没有正确“推送”到我的 heroku 数据库。

## 配置

在开发和生产环境中使用 'pg' gem。使用 Heroku 的“共享数据库”插件。运行 Rails 3.1.1。

## 我正在尝试做的事情

将我的源代码推送到 Heroku，然后将我的 postgres 数据库与 Heroku 的数据库同步。源本身没有问题，但我无法启动并运行我的数据库。

## 到目前为止我尝试过的

1：源码推送：`git push heroku master`. 好的。这行得通。

2：然后我尝试运行 : `heroku db:push`。似乎运行正常，没有错误，模式被发送到 Heroku，不同的表被正确检测到并且似乎也被发送：

![heroku 数据库：推送](../Images/dab2a9d0d18da204ed26a5b7ca5d6ed8.png)

3：让我们检查一下，一切都好吗？`heroku info`：

![heroku信息](../Images/29688e519d7122bb4320cbfd5c41119e.png)

嗬！数据库仍然是空的（因此在访问动态页面时出现与 DB 相关的错误）。不明白发生了什么，我昨天晚上花了一些时间在这个问题上，但只是在 Heroku 上玩了一会儿，从来没有遇到过这个问题。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:23:30.417

我不相信数据库大小数字是实时数字。这是一个应用程序到 Heroku 的干净部署以及`heroku info`每个阶段的输出。第一次运行是应用程序创建后，第二次是在推送代码之后，第三次是在 heroku db:push 之后。

数据库在第三个输出之前上载，并且应用程序正在运行，但是 DB:size 未报告该数字。

您的应用程序是否真的因为数据库不存在而出错？

![heroku 信息输出](../Images/ddc5b376a0584cfd9e7ce019b6734f42.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T13:10:57.917

问题出在提交过程中。您应该在每次从控制台提交后手动运行：

```
heroku run rake db:migrate 
```

享受丹尼尔

# jquery - Ajax 请求包含无效字符

> ID：10119453
> 
> 赞同：5
> 
> 时间：2012-04-12T07:43:36.297
> 
> 标签：jquery, ajax

我创建了一个 AJAX 请求。在新的浏览器中它工作正常，但 IE7 告诉我行中的字符有错误，在哪里 `function: 'gettestvaraibles'`。有人可以告诉我错误可能在哪里吗？

```
$.ajax('http://testurl/?eID=testid', {
    data: {
        function: 'gettestvaraibles',
        game_id: '630',
        game_score: '50'
    },
    type: 'post',
    dataType: 'json',
    error: function(jqXHR, textStatus, errorThrown) {
        console.log(jqXHR);
        alert(errorThrown.message);
    },
    success: function() {
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T07:48:02.583

函数是保留关键字。您需要更改它，或者用引号括起来：

```
data: {
    "function": 'gettestvaraibles',
    "game_id": '630',
    "game_score": '50'
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:47:52.803

您应该在 周围加上引号`function`，因为它是 JavaScript 中的关键字：

```
data: {
       'function': 'gettestvaraibles',
       'game_id': '630',
       'game_score': '50'
} 
```

# php - 这个正则表达式匹配什么？来自 mediawiki 源代码的 php 正则表达式

> ID：10119455
> 
> 赞同：2
> 
> 时间：2012-04-12T07:43:54.473
> 
> 标签：php, regex, mediawiki

这是一个来自 mediawiki 的正则表达式，一个开源的 wiki 解决方案。

```
/\[((http\:\/\/|https\:\/\/|ftp\:\/\/|irc\:\/\/|ircs\:\/\/|gopher\:\/\/|telnet\:\/\/|nntp\:\/\/|worldwind\:\/\/|mailto\:|news\:|svn\:\/\/|git\:\/\/|mms\:\/\/|\/\/)[^][<>"\x00-\x20\x7F\p{Zs}]+)\p{Zs}*([^\]\x00-\x08\x0a-\x1F]*?)\]/Su 
```

对我来说，它似乎与 uri 匹配，但我无法让它匹配任何东西。我无法理解正则表达式的最后一部分，即。

```
[^][<>"\x00-\x20\x7F\p{Zs}]+)\p{Zs}*([^\]\x00-\x08\x0a-\x1F]*?)\] 
```

这到底是做什么的？

非常感谢任何有关解码的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T07:53:47.587

此正则表达式匹配[外部链接](http://www.mediawiki.org/wiki/Help%3aLinks#External_links)，如

```
[http://www.stackoverflow.com]
[https://www.stackoverflow.com StackOverflow]
[ftp://ftp.mozilla.org Mozilla] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T08:15:04.830

`[^][<>"\x00-\x20\x7F\p{Zs}]`
是匹配任何字符的否定字符类，但：`][<>"`、ASCII 字符范围`\x00-\x20`、ASCII 字符`\x7F`和空格（`p{Zs}`是匹配任何类型的空格字符的[Unicode 字符属性）](http://www.regular-expressions.info/unicode.html#prop)

`\p{Zs}*`匹配任何类型的空格字符 0 次或更多次

`[^\]\x00-\x08\x0a-\x1F]`
是一个否定字符类，它匹配除`]`、ASCII 字符范围`\x00-\x08`和`\x0a-\x1F`

# browser - 通过浏览器“未找到”Hadoop 用户日志

> ID：10119458
> 
> 赞同：1
> 
> 时间：2012-04-12T07:43:57.603
> 
> 标签：browser, hadoop, web, logging

我在通过 Web 界面查看我的 hadoop 用户日志文件时遇到问题。通过终端可以看到相同的日志文件。你认为原因是什么？谢谢 ![Hadoop 用户日志无法通过浏览器访问](../Images/e65ddce858f4f6eaf9dfbad8f6fa5d05.png)

# hadoop - 使用 JobControl 测量 Hadoop 作业时间

> ID：10119460
> 
> 赞同：0
> 
> 时间：2012-04-12T07:44:02.613
> 
> 标签：hadoop, jobs, timing

我曾经通过以下方式启动我的 Hadoop 工作

```
long start = new Date().getTime();
boolean status = job.waitForCompletion(true);            
long end = new Date().getTime(); 
```

这样我就可以测量工作在我的代码中直接结束后所花费的时间。

现在我必须使用 JobControl 来表达我的工作之间的依赖关系：

```
JobControl jobControl = new JobControl("MyJob");
jobControl.addJob(job1);
jobControl.addJob(job2);
job3.addDependingJob(job2);
jobControl.addJob(job3);

jobControl.run(); 
```

但是，一旦执行了 jobControl.run()，代码就不会更进一步，所以我不能包含代码来轮询 jobControl.getState() 以完成作业。

如何使用 JobControl 测量作业所花费的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:50:48.343

JobControl 没有很好的功能可以让您挂钩并获取此信息。您可以尝试一些（可能很痛苦）的选择：

*   从一个单独的线程开始`JobControl.run()`，在你的主线程中，轮询`JobControl.getXXXJobs()`方法以跟踪作业何时更改状态
*   考虑使用[Job End Notification URL hook](http://hadoop.apache.org/common/docs/r0.20.2/api/org/apache/hadoop/mapred/JobConf.html#setJobEndNotificationURI%28java.lang.String%29)，但这将要求您在客户端中启动“服务器”以接收通知事件，然后尝试从作业结束时向后工作
*   扩展`JobControl`和`jobcontrol.Job`对象以跟踪作业何时更改状态并添加方法以查询开始/结束时间

# html - 我可以用 CSS 替换图像标签的图像吗？

> ID：10119461
> 
> 赞同：-1
> 
> 时间：2012-04-12T07:44:06.547
> 
> 标签：html, css, image, background-image

我知道我无法使用 CSS 更改标签的`src`属性。`<img>`但是是否有可能从 src 属性中*隐藏*图像，并在`<img>`标签上设置背景图像？

我想是这样的：将带有填充/文本意图等的实际图像移出视图，然后设置 img-tag 的背景图像，因此它看起来像另一个图像。

Js 不是一个选项，因为它是关于模板化现有页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:47:55.713

你可以隐藏图像本身：

```
img#someid { display: none; } 
```

然后（或在此之前，如果您愿意）在父元素上设置背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:48:31.100

我不太确定“隐藏 src 属性的图像”是什么意思，但如果您的意思是使用 CSS（甚至作为背景图像）隐藏正在显示的图像的链接/路径，那么答案是否定的，不是我知道的。人们可以轻松查看您的 CSS 文件。隐藏它的唯一真正方法是使用 JS，但即使这样，您也可以从客户端禁用 JS 并仍然查看它。您可以将其放入 MySQL 之类的数据库中并使用 PHP 显示它，但即便如此，图像路径仍会显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:48:44.453

您能否将 img 包装在没有填充/边距的 div 中，并将 img 的显示属性设置为隐藏（通过 js），以便显示 div 的背景。

但老实说，如果你不厌其烦地这样做，你应该只是通过js交换图像的src。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T08:29:33.250

您可以通过将 img src 指向 1x1 空白 gif 图像来做到这一点。

如果您不想添加另一个 div，这是必要的，因为所有浏览器都以不同的方式处理丢失的图像和空 src 属性。（例如，如果图像丢失，chrome 会在图像周围添加边框。）

然后，您只需更改 background-image 属性即可更改图像。

**更新**

您还可以为此创建图像精灵并通过更改背景位置属性为它们设置动画。例如：

假设您有两个 50 像素宽的图像，并且您希望在该元素悬停时显示第二个图像。只需将它们合并到一个图像中，上面的 css 就可以了。

```
img { background: url(sprite.jpg) 0 0 no-repeat; }
img:hover { background: url(sprite.jpg) -50px 0 no-repeat; } 
```

# iis-7 - 创建一个白标网站并将域指向它

> ID：10119470
> 
> 赞同：0
> 
> 时间：2012-04-12T07:44:32.097
> 
> 标签：iis-7, web, domain-name, white-labelling

我在寻求一点建议。我有几个网站基本上都提供相同的内容。我说的是网站A、网站B和网站C。每一个都指向一个数据库来提供内容（把它想象成一个约会网站）。每个网站在 wwwroot 中都有一个文件夹，并映射到相关的域名。

我想做的是拥有一个网站，比如网站 A，然后简单地将每个域名指向那个网站。但是，我将如何使每个站点看起来不同？我是否需要在 websiteA 中说明引用 URL 是否为 websiteB.com - 提供此样式表...如果引用的网站是 WebsiteC.com，则提供此 CSS。

我想这就像创建一个白标服务？我只是不知道从哪里开始！

非常感谢。

（PS：我们有一个带有IIS7的windows专用服务器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:50:37.917

最简单的选择是对 HTTP_HOST 标头做出反应，它会告诉您请求是针对哪个网站，即使它们都映射到同一个文件夹。

# magento - Magento 后端 - 管理产品 - 在常规选项卡中移动数量字段

> ID：10119471
> 
> 赞同：-2
> 
> 时间：2012-04-12T07:44:35.140
> 
> 标签：magento, backend, product, stock

我想知道 Magento (1.5) 中是否有办法将 qty 字段从后端目录/管理产品/库存选项卡移动到目录/管理产品/常规选项卡。

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:18:02.377

Zard，库存信息不完全是 Product 的一部分，而是来自 ProductStock。因此，您不能使用属性集管理器对字段重新排序。

为了做你想做的事，你需要添加一些代码（隐藏库存选项卡中的字段，并在常规选项卡中显示它）。如果您保留输入的名称，那么控制器应该只处理数据。

# .net - 选择实体框架作为针对 Nhibernate 的默认实现 ORM，利弊？

> ID：10119478
> 
> 赞同：2
> 
> 时间：2012-04-12T07:45:17.827
> 
> 标签：.net, entity-framework, nhibernate, standards

我在一家开发公司工作，开发中小型基于Web的项目，我们主要使用微软技术，目前我们处于技术选择阶段，我们正在研究ORM，我们需要为我们的未来选择标准的ORM项目，现在我们将选择范围缩小为两个：-

• 休眠：-

1.  成熟。
2.  开源。
3.  功能丰富。
4.  可配置且灵活，达到最高水平。
5.  得到强大社区的大力支持。
6.  在很多地方都证明是成功的。

• 实体框架：-

1.  微软产品；这意味着与其他 Microsoft 产品紧密集成。
2.  高度支持和大量在线资源，在线社区相当强大。
3.  发展非常快，修复非常快，并且一天比一天好。
4.  LINQ。
5.  学习曲线比 Nhibernate 低。

该技术分别根据以下衡量：-

1.  易于使用 - 时间在我们的项目中确实是至关重要的。
2.  长期决定，我的意思是我们不会在技术之间不断转换。
3.  与 Microsoft 产品集成。
4.  在合规性工具（例如 Nhibernate 的 activerecord）、社区和版本方面提供支持。
5.  这将是我们将使用的唯一标准。
6.  配置的灵活性。
7.  特性——我们不需要很多复杂的映射，也不需要二级缓存，我们现在可以用 SP 代替批处理。

**我的问题**选择实体框架反对 Nhibernate，作为我们公司未来 ORM 的默认实现，从长远来看，这样的决定有什么利弊？

不要误会我的意思；我知道 Nhibernate 暂时是正确的答案，但考虑到 EntityFramework 的快速发展，它是否是近期甚至远期的正确选择。

* * *

我在研究中依赖的一些资源：-

[http://ayende.com/blog/4351/nhibernate-vs-entity-framework-4-0](http://ayende.com/blog/4351/nhibernate-vs-entity-framework-4-0)

[NHibernate、实体框架、活动记录或 linq2sql](https://stackoverflow.com/questions/1377236/nhibernate-entity-framework-active-records-or-linq2sql)

[我应该使用哪种 ORM 工具进行 .Net 开发](https://stackoverflow.com/questions/567304/which-orm-tool-should-i-use-for-net-development)

[http://blogs.msdn.com/b/adonet/archive/2012/03/22/ef5-beta-2-available-on-nuget.aspx](http://blogs.msdn.com/b/adonet/archive/2012/03/22/ef5-beta-2-available-on-nuget.aspx)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T08:27:02.877

> 我知道 Nhibernate 暂时是正确的答案，但考虑到 EntityFramework 的快速发展，它是否是近期甚至远期的正确选择。

没有人能回答这个问题。我相信即使是 ADO.NET 团队也会对此有疑问，因为目前甚至没有未来将要实现的功能的路线图。目前，开发过程主要由[Data UserVoice](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions)驱动，我们无法知道下个月可以期待哪些功能，明年可以期待哪些功能以及我们永远不会拥有哪些功能。

* * *

没有正确的答案。此外，您尝试执行的整个“标准化”过程是错误的。为您当前的问题使用正确的解决方案！为将来必须解决的任何问题选择单一的“标准”，而不知道那个问题，也不知道当时有哪些工具可用，这是愚蠢的。

您的整个想法与敏捷性和最佳实践背道而驰。它甚至可以发展为[内部框架或软件工厂](https://stackoverflow.com/questions/3666526/how-to-deal-with-internal-company-frameworks-and-sw-factories)。.NET 开发是高度动态的领域。今天可以认为是好的选择明年可能会被弃用，所以不要用“标准”束缚自己。未来可能会有更有趣的选择，或更有趣的技术和实践转变（例如 NoSql 数据库）。

如果您想要长期战略解决方案，请使用大型机和 COBOL。他们已经证明了他们的一生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:52:11.023

我建议，在做出决定时，您现在应该专注于 NHibernate 和 EF 提供的功能。查看您必须提交的精确要求并将它们与 ORM 进行匹配。在您上面的问题中，您应该注意也可以对 NHibernate 执行 linq 查询。此外，您已经忽略了对二级缓存的需求。如果您正在寻找一个长期灵活的平台，您绝对应该考虑到它。

# java - 从方位和距离计算纬度和经度

> ID：10119479
> 
> 赞同：22
> 
> 时间：2012-04-12T07:45:19.147
> 
> 标签：java

我很难理解一些三角函数。我试图从一开始的纬度和日志以及距离和方位推导出目的地纬度和经度。

幸运的是，我找到了一个了不起的网站，它准确地描述了我需要的功能： [http](http://www.movable-type.co.uk/scripts/latlong.html) ://www.movable-type.co.uk/scripts/latlong.html “目的地点给定距离和从起点开始的方位”我在我的java程序，但它不适合我。我按照网站上说的部署了它。这是我的代码：

```
double dist = 150/6371;
double brng = Math.toRadians(90);
double lat1 = Math.toRadians(26.88288045572338);
double lon1 = Math.toRadians(75.78369140625);

double lat2 = Math.asin( Math.sin(lat1)*Math.cos(dist) + Math.cos(lat1)*Math.sin(dist)*Math.cos(brng) );
double a = Math.atan2(Math.sin(brng)*Math.sin(dist)*Math.cos(lat1), Math.cos(dist)-Math.sin(lat1)*Math.sin(lat2));
System.out.println("a = " +  a);
double lon2 = lon1 + a;

lon2 = (lon2+ 3*Math.PI) % (2*Math.PI) - Math.PI;

System.out.println("Latitude = "+Math.toDegrees(lat2)+"\nLongitude = "+Math.toDegrees(lon2)); 
```

但它显示输出是：

```
a = 0.0
Latitude = 26.882880455723377
Longitude = 75.78369140625 
```

我没有得到我做错的地方。请任何人都可以帮助我找出问题所在。

提前感谢。:-)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-12T07:50:33.453

你的问题在你的第一行。

尝试

```
double dist = 150.0 / 6371.0; 
```

原因是它`150/6371`被计算为`0`，因为它执行整数除法（而不是浮点除法）。即使结果存储在`double`. 您可以通过将两个数字之一设为浮点文字来强制浮点除法。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-04-05T08:00:18.147

如果有人需要一个从移动了一定距离的其他点计算点坐标的函数，下面是工作代码。对我来说，它只是将一个点移动了一段距离。

```
import static java.lang.Math.*;

void movePoint(double latitude, double longitude, double distanceInMetres, double bearing) {
    double brngRad = toRadians(bearing);
    double latRad = toRadians(latitude);
    double lonRad = toRadians(longitude);
    int earthRadiusInMetres = 6371000;
    double distFrac = distanceInMetres / earthRadiusInMetres;

    double latitudeResult = asin(sin(latRad) * cos(distFrac) + cos(latRad) * sin(distFrac) * cos(brngRad));
    double a = atan2(sin(brngRad) * sin(distFrac) * cos(latRad), cos(distFrac) - sin(latRad) * sin(latitudeResult));
    double longitudeResult = (lonRad + a + 3 * PI) % (2 * PI) - PI;

    System.out.println("latitude: " + toDegrees(latitudeResult) + ", longitude: " + toDegrees(longitudeResult));
} 
```

*   **纬度**，**经度**- 入口点坐标
*   **distanceInMetres** - 要移动点的距离
*   **轴承**- 一个角度，您要移动该点的方向。0 朝北，90 - 东，180 - 南，270 - 西。和所有之间，即 45 是东北。
*   **earthRadiusInMetres** - 以米为单位的地球半径。

如果要以公里为单位输入，则可以将半径更改为 6371，如果要以英里为单位输入，则可以将半径更改为英里。

# matlab - 如何在我知道输出必须包含贝塞尔函数的matlab中符号集成函数？

> ID：10119480
> 
> 赞同：0
> 
> 时间：2012-04-12T07:45:25.060
> 
> 标签：matlab, integration, symbolic-math

我正在使用以下功能：

f(x) = a*(1+cos(3*x)) 其中 a 是常数/参数。

y(x) = exp(-b*f(x)) 其中 b 是另一个常数。

我需要计算定积分积分（0,2pi）y（x）dx。

我正在尝试为我们的研究小组实施另一篇研究论文。我知道输出必须包含第一类修改过的贝塞尔函数，它们是“a”的函数。Matlab 只是拒绝评估这个积分。

以下是我的代码（Matlab）：

```
syms x;
syms a;
syms b;

f_x = a*(1+cos(3*x));
y_x = exp(-b*f_x);
z_x = int(y_x, x, 0, 2*pi) 
```

输出：

```
Warning: Explicit integral could not be found. 

z_x =

int(1/exp(a*b*(cos(3*x) + 1)), x = 0..2*pi) 
```

请求您帮助解决这个问题！我确信积分在很多地方都包含像 I(a) 等贝塞尔函数。我需要在这里做任何预处理吗？我有点迫切需要这个解决方案。我很欣赏可以至少指出正确方向的快速响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T18:31:21.177

解决了！。它在mathematica中工作，在Matlab中失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T18:41:47.363

从 R2017b 开始，这有效。使用[int](https://www.mathworks.com/help/symbolic/int.html)。

```
>> syms x;
syms a;
syms b;

f_x = a*(1+cos(3*x));
y_x = exp(-b*f_x);
z_x = int(y_x, x, 0, 2*pi)

z_x =
2*pi*exp(-a*b)*besselj(0, a*b*1i) 
```

# gridview - Yii gridview rows onclick 展开并在网格中的行下方显示详细视图

> ID：10119482
> 
> 赞同：3
> 
> 时间：2012-04-12T07:45:26.653
> 
> 标签：gridview, yii

如何在[GRIDVIEW WITH ROW EXPAND AND COLLAPSE](https://i.stack.imgur.com/wWBO1.jpg)中显示网格视图，当单击应显示相应行详细信息的行时，网格应在视图中显示普通数据..请帮助...我的输出应该像

![我的网格应该是这样的](../Images/a6a05e260df8f5bf39dbd599b387a019.png)

并且当我单击该行时，它应该展开并提供详细信息（图像将显示表格，但那不需要我需要在其中呈现详细信息视图。 ![在此处输入图像描述](../Images/4893408cf1cf26c77b1936900daffa72.png)

**已编辑**我忘记添加网格将从一个模型加载的内容，而行详细信息将从另一个模型加载。

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
'id'=>'books-grid',
'dataProvider'=>$model->Projectwisereport(),
//'filter'=>$model,

'columns'=>array(

    array(
        'name'  => 'Project',
        'value' => 'Project::model()->findByPk($data->Project)->proj_name',
   'filter'=>CHtml::listData(Project::model()->findall(),'proj_id','proj_name'),
        ),

    'isbn_no',
    'source_type',
array(
        'name'  => 'complexity',
        'value' => 'Complexity::model()->findByPk($data->complexity)->Complexity_Name',
                                                      'filter'=>CHtml::listData(Complexity::model()->findall(),'id','Complexity_Name'),
       'footer'=>'Total Page',
        ),
      array('class'=>'CButtonColumn',
     'template'=>'{detail}',
     'buttons'=>array(
      'detail'=>array(
            'label'=>'Show Details', 
                    'url'  =>'Yii::app()->createUrl("Process/View",   array("id"=>$data->book_id))',
                    'options'=>array('title'=>'Show details','class'=>'detailsLink'),
  'click'=>"$('#your-grid-book_id').on('click','.detailsLink',function(){
     var row=$(this).closest('tr');
      var url=$(this).attr('href');
   $.get(url,{},function(data){
  row.after(data.row);
     },'json');
     })",

            )
    ) 
)

),
    )); ?> 
```

我试过这个，但没有使用网格来自书籍模型并链接到 CButton 列中的流程模型

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T17:36:09.197

试试这个：

在 GridView 中：

```
'columns'=>array
     (
            'ID',
            array
            (
                  'name'=>'...',
                  'htmlOptions'=>array('class'=>'plus','id'=>$data->id),
                  'value'=>'...',
            ),
            ...
     ), 
```

js代码：

```
$(".plus").click(function(){
var data = $(this).attr('id');
var url = ...ajax url...
jQuery.ajax({
                'type':'post',
                'data':data,
                'url':url,
                'cache':false,
                'success':function(html){
                                                var new_data = $("<div></div>").attr("class", "appended_data").html(html).attr("id",data);
                                                $(this).parent().append(new_data);
                                                $(this).removeClass('plus');
                                                $(this).addClass('minus');
                                        }
        }); 
}); 
```

从您的控制器 ajax 操作以 trs（表行）发送数据..我希望代码是自我解释的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T11:18:07.410

从 Rajats 的回答中，我得到了它的工作方式：

在gridview按钮中：

```
array(
            'class' => 'ButtonColumn',
            'template' => '{view}{confirm}',
            'evaluateID' => true,
            'buttons' => array(
                'view' => array(
                    'icon' => 'info-sign white',
                    'url' => '#',
                    'options' => array(
                        'title' => Yii::t('app', 'view'),
                        'onclick' => 'javascript:toggleRow($(this).attr("id"))',
                        'class' => 'btn-primary',
                        'id' => '$data->id'
                    ), 
```

为了能够从行数据中为按钮分配 ID，您需要使用自定义 ButtonColumn 类，我使用了此处发布的类：[http ://www.yiiframework.com/wiki/372/cbuttoncolumn-use-special-variable-按钮的选项中的 id 数据/](http://www.yiiframework.com/wiki/372/cbuttoncolumn-use-special-variable-data-for-the-id-in-the-options-of-a-button/)

javascript代码：

```
function toggleRow(id) {
    if ($('#table'+id).length) {
        $('#table'+id).remove();
    } else {
        $.ajax({
            'type': 'post',
            'data': {
                "payment_id": id
            },
            'url': "<?php echo Yii::app()->createUrl('controller/action'); ?>",
            'success': function (html) {
                var new_data = $("<tr></tr>").attr("class", "btn-danger").html(html).attr("id", "table"+id);
                new_data.insertAfter($('#' + id).parent().parent());
            },
            'error': function (err) {
                console.log(err);
            }
        });
    }
} 
```

并在控制器操作中从 ajax 提供的 id 中找到模型并返回一个 html 字符串：

```
public function actionControlleraction(){
    if (isset($_POST['payment_id'])) {
        $payment = Payment::model()->findByPk($_POST['payment_id']);
        $html = $payment->createHtmlTable();
        print_r($html);
    }
} 
```

在上面的示例中，表格的 html 代码是在我的付款模型中生成的。

# jquery-mobile - Phonegap MobileJQuery AJAX 在调试时发布两次

> ID：10119490
> 
> 赞同：1
> 
> 时间：2012-04-12T07:46:02.037
> 
> 标签：jquery-mobile, cordova

希望有一些可以提供帮助！，在调试phonegap应用程序连接到它的WCF服务时，它似乎发布了两次。

当应用程序正常运行时，没有断点等，一切正常，我只收到 1。在我看来，如果几秒钟后服务器没有返回响应，ajax 会自行重新发布。

我需要确认这会抛出wireshark，但我只是想知道之前是否有其他人遇到过这个问题。

```
$.ajax({
                type: "POST",
                url: ServicePATH ,
                data: JSON.stringify({ objs: arrayobj, parm2: var2, parm3: var3, parm4: 1 }),
                contentType: "application/json",
                dataType: "json",
                success: function (data, textStatus, jqXHR) {
                    CallonSuccess(data);
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    console.log('error ' + textStatus);
                    console.log('XMLHttpRequest ' + XMLHttpRequest);
                    var str = '';
                    for (prop in XMLHttpRequest) {
                        str += "prop " + prop + " value :" + XMLHttpRequest[prop] + "\n"; //Concate prop and its value from object
                    }
                    console.log(str);
                    console.log('errorThrown ' + errorThrown);
                    console.log('passing ' + JSON.stringify({ objs: arrayobj, parm2: var2, parm3: var3, parm4: 1 }));
                }
            }).done(function () { console.log('Finished ajax'); }); 
```

谢谢 Lmac

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T11:49:59.813

也许没有适合您的解决方案（请参阅下面的更新），但这里的行为相同。

如果没有 jquery Mobile 框架，一切正常，嵌入框架后它会再次获取我的 json 文件。在 Chrome 的控制台中，您可以在网络下看到它：GET 状态 200 和 GET 状态 304（未修改）。

我可以选择放弃 jQuery Mobile，我肯定会的。但也会有兴趣知道那里发生了什么。

更新：我在 $(document).ready(function() { }); 中有 xmlhttprequest 似乎 jQuery 和 jQuery Mobile 都对此做出了反应。

如果我将脚本放在站点的末尾并将我的 xmlhttprequest 放在就绪方法之外，它只会获取我的 json 文件一次。

# python - 我们能否知道 Python 脚本是从 Windows 还是文本终端启动的？

> ID：10119493
> 
> 赞同：8
> 
> 时间：2012-04-12T07:46:14.003
> 
> 标签：python, windows, ssh, cygwin

我使用的是 Windows 版本的 Python。我有一个使用 Pyside 的 Python 脚本（没什么复杂的，一种“hello world”）。

当我单击我的脚本文件或从命令行启动它时，它会完美执行，并且会出现一个 GUI。

但是，如果脚本是从文本终端（cmd.exe、cygwin、...）启动的，我想避免使用 GUI。一种自动知道它是否应该具有 GUI 输出或文本输出的脚本。

有没有一种简单易行的方法来做到这一点？我希望能够使用**Windows 版本的 Python**（*而不是 Cygwin 软件包*附带的版本）来做到这一点。

一个明显的方法是在我从文本终端启动脚本时添加一种“--no-gui”参数，但我想知道 Python（或一些 Python 库）是否已经为此提供了工具。

此外，我在这台计算机上有一个 SSH 服务器（Cygwin-base），我可以在远处执行脚本，但没有出现 GUI（当然）并且我没有错误消息。在这种情况下，了解脚本是否由于缺少 Windows 图形支持而失败，或者脚本是否应该针对文本终端调整其输出是非常有趣的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:56:52.343

我知道您可以将文件作为 .py 文件或 .pyw 文件运行。第二个选项用于 GUI 应用程序，它不会打开控制台窗口。要将这两种情况区分开来，您可以`isatty`检查`sys.stdout`.

```
import sys
if sys.stdout.isatty():
    # .py file is running, with console window
    pass
else:
    # .pyw file is running, no console
    pass 
```

**编辑**：

*   我尝试在 linux box 上使用 putty+ssh 运行它——它返回 True。
*   我尝试在 Windows 框中使用[msys](http://www.mingw.org/wiki/MSYS) bash shell - 它返回 True（.py 文件）
*   我尝试将 cygwin bash shell 与 cygwin python 一起使用 - 它返回 True（.py 文件）
*   *不幸的是，我无法尝试 putty + windows cygwin ssh 服务器。*

# arrays - 数组值未在 shell 脚本中更新

> ID：10119498
> 
> 赞同：0
> 
> 时间：2012-04-12T07:46:21.923
> 
> 标签：arrays, bash, shell

我有一个用于将值放入数组的 shell 脚本。该脚本对我来说工作正常。问题是，如果我将数组放在 for 循环中（在 do 和 done 之间），并且当我尝试打印数组长度超出循环时，即完成后，值不会更新。这是相同的代码；

```
function _read_value
{
    count=0
    array[0]="hi" 
    for ///some condition
    do
        count++
        array[count]="hello"
    done
    echo ${#array[@]
} 
```

当我尝试在最后打印数组的长度时，它显示长度为 1。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:41:53.003

我对您的脚本及其更新值进行了一些小改动，计数也很好。（我在计数增量和循环中进行了更改）

```
#!/bin/bash
function read_value
{
    count=0
    while [ $count -le 5 ]
    do
        array[count]="hello"
        count=`expr $count + 1`
    done
    echo ${array[@]}
    echo ${#array[@]}
}

read_value 
```

# android - 面向 Web 应用程序的智能手机和平板电脑的库

> ID：10119499
> 
> 赞同：0
> 
> 时间：2012-04-12T07:46:22.473
> 
> 标签：android, iphone, mobile, javascript

我正在开发一个在桌面浏览器和移动浏览器（智能手机、平板电脑）上显示的应用程序。到目前为止，一切都很好。

此应用程序应能够作为移动设备的本机应用程序移动。Android 中带有动画（使用 ViewFlipper）的 Activity 中的切换屏幕（或幻灯片屏幕）等效果。

我知道有用于此目的的 JavaScript 库（例如，使用 jQuery）。具体来说，我尝试了[http://jquerymobile.com/](http://jquerymobile.com/)但“滑动屏幕”效果非常糟糕，非常慢。

问题是，什么是最好的库（我想是客户端）以获得与编程语言具有移动设备相同的效果？

谢谢，

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:52:04.077

Sencha Touch 是您的下一个选择。

[http://www.sencha.com/products/touch/demos/](http://www.sencha.com/products/touch/demos/)

# sql - One Select 而不是 UnionAll

> ID：10119505
> 
> 赞同：0
> 
> 时间：2012-04-12T07:46:42.427
> 
> 标签：sql, sql-server, sql-server-2008, tsql, view

这是我的表：

```
[Member]: 
{ [Id], [UserId], [UserName], [Email], [Status_Id], [MemberType_Id] }

[CustomerProfile] :
{ [Id], [Member_Id], [FirstName], [LastName], [SSN], [Gender], [PostalCode],[City_Id], [Address]}

[DealerProfile]:
{ [Id], [Member_Id], [FirstName], [LastName], [SSN], [Gender], [StoreName], [PostalCode], [City_Id], [Address] }

[ManagerProfile]
{ [Id], [Member_Id], [FirstName], [LastName], [SSN], [Gender] }

[City]:
{ [Id], [Title], [Province_Id] } 
```

所以我需要创建我所有成员和相关列的完整视图。

我必须提到 [Member].[Id] 只是在 3 个配置文件表之一中。这意味着一个会员可以拥有一种类型的客户、经销商或经理

首先，我将从以下选择查询开始：

```
 SELECT     
[ME].[Id] AS [MemberId],
[ME].[UserId],
[ME].[UserName],
[ME].[Status_Id],
[ST].[Title] AS [Status],
[ME].[MemberType_Id],
[MT].[Title] AS [MemberType],

CASE
    WHEN [MT].[Title]='Customer' THEN [CUP].[FirstName]
    WHEN [MT].[Title]='Dealer' THEN [DEP].[FirstName]
    WHEN [MT].[Title]='Manager' THEN [MAP].[FirstName]
    ELSE 'Unknown' END AS [FirstName],
CASE
    WHEN [MT].[Title]='Customer' THEN [CUP].[LastName]
    WHEN [MT].[Title]='Dealer' THEN [DEP].[LastName]
    WHEN [MT].[Title]='Manager' THEN [MAP].[LastName]
    ELSE 'Unknown' END AS [LastName]

FROM [Members].[Member] AS [ME]
INNER JOIN [Members].[MemberType] AS [MT] ON [ME].[MemberType_Id] = [MT].[Id]
INNER JOIN [Members].[Status] AS [ST] ON [ME].[Status_Id]=[ST].[Id]
INNER JOIN [Members].[ManagerProfile] AS [MAP] ON [ME].[Id]= [MAP].[Member_Id]
INNER JOIN [Members].[CustomerProfile] AS [CUP] ON [ME].[Id]=[CUP].[Member_Id]
INNER JOIN [Members].[DealerProfile] AS [DEP] ON [ME].[Id]=[DEP].[Member_Id]; 
```

但正如我之前所说，[Member].[ID] 只是在 3 个配置文件表之一中，所以上面的查询返回 null，我认为这样使用`Union All`：

```
(SELECT   
[ME].[Id] AS [MemberId],
[ME].[UserId],
[ME].[UserName],
[ME].[Status_Id],
[ST].[Title] AS [Status],
[ME].[MemberType_Id],
[MT].[Title] AS [MemberType],
[PR].[FirstName] AS [FirstName],
[PR].[LastName] AS [LastName]

FROM [Members].[Member] AS [ME]
INNER JOIN [Members].[MemberType] AS [MT] ON [ME].[MemberType_Id] = [MT].[Id]
INNER JOIN [Members].[Status] AS [ST] ON [ME].[Status_Id]=[ST].[Id]
INNER JOIN [Members].[CustomerProfile] AS [PR] ON [ME].[Id]=[PR].[Member_Id])
UNION ALL
(SELECT   
[ME].[Id] AS [MemberId],
[ME].[UserId],
[ME].[UserName],
[ME].[Status_Id],
[ST].[Title] AS [Status],
[ME].[MemberType_Id],
[MT].[Title] AS [MemberType],
[PR].[FirstName] AS [FirstName],
[PR].[LastName] AS [LastName]

FROM [Members].[Member] AS [ME]
INNER JOIN [Members].[MemberType] AS [MT] ON [ME].[MemberType_Id] = [MT].[Id]
INNER JOIN [Members].[Status] AS [ST] ON [ME].[Status_Id]=[ST].[Id]
INNER JOIN [Members].[DealerProfile] AS [PR] ON [ME].[Id]=[PR].[Member_Id])
UNION ALL
(SELECT   
[ME].[Id] AS [MemberId],
[ME].[UserId],
[ME].[UserName],
[ME].[Status_Id],
[ST].[Title] AS [Status],
[ME].[MemberType_Id],
[MT].[Title] AS [MemberType],
[PR].[FirstName] AS [FirstName],
[PR].[LastName] AS [LastName]

FROM [Members].[Member] AS [ME]
INNER JOIN [Members].[MemberType] AS [MT] ON [ME].[MemberType_Id] = [MT].[Id]
INNER JOIN [Members].[Status] AS [ST] ON [ME].[Status_Id]=[ST].[Id]
INNER JOIN [Members].[ManagerProfile] AS [PR] ON [ME].[Id]=[PR].[Member_Id]) 
```

那么您认为，这是创建像我的视图这样的视图的好方法吗？有没有更好的方法来创建性能更好的视图而不是使用`Union All`？您对最短路径和最佳性能有何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:30:21.473

UNION ALL 通常会产生相当差的性能。

另一种方法是使用 LEFT OUTER JOIN 的内部查询和使用 CASE 语句选择相关字段的外部查询。我怀疑这将为您带来更好的性能。

为简单起见，让我们仅使用您的客户资料和经销商资料表。当您将其扩展到连接中的其他表时，同样的概念将适用。另一种方法，使用左外连接，看起来像这样：

```
create view MembersView as
select Id, 
case
    when not FirstName_cp is null then FirstName_cp
    when not FirstName_dp is null then First_name_dp
    else null
end as FirstName,
case
    when not LastName_cp is null then LastName_cp
    when not LastName_dp is null then Last_name_dp
    else null
end as LastName
from 
(

    select m.[Id] as Member_Id, cp.[FirstName] as FirstName_cp, 
           cp.[LastName] as LastName_cp, 
           dp.[FirstName] as FirstName_dp, 
           dp.[LastName] as LastName_dp
    from [Member] m
    left outer join [CustomerProfile] cp on
        m.Id = cp.Member_Id
    left outer join DealProfile dp on
        m.Id = dp.Member_Id
) as TBL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T12:12:41.560

`LEFT JOIN`与`COALESCE`

```
SELECT     
[ME].[Id] AS [MemberId],
[ME].[UserId],
[ME].[UserName],
[ME].[Status_Id],
[ST].[Title] AS [Status],
[ME].[MemberType_Id],
[MT].[Title] AS [MemberType],
[FirstName]=COALESCE([CUP].[FirstName],[DEP].[FirstName],[MAP].[FirstName],'Unknown'),
[LastName]=COALESCE([CUP].[LastName],[DEP].[LastName],[MAP].[LastName],'Unknown')
FROM [Members].[Member] AS [ME]
INNER JOIN [Members].[MemberType] AS [MT] ON [ME].[MemberType_Id] = [MT].[Id]
INNER JOIN [Members].[Status] AS [ST] ON [ME].[Status_Id]=[ST].[Id]
LEFT JOIN [Members].[ManagerProfile] AS [MAP] ON [ME].[Id]= [MAP].[Member_Id]
LEFT JOIN [Members].[CustomerProfile] AS [CUP] ON [ME].[Id]=[CUP].[Member_Id]
LEFT JOIN [Members].[DealerProfile] AS [DEP] ON [ME].[Id]=[DEP].[Member_Id]; 
```

# google-docs-api - 在 Python 客户端中为 Google Docs API 查询集合内容

> ID：10119508
> 
> 赞同：2
> 
> 时间：2012-04-12T07:46:57.040
> 
> 标签：google-docs-api

如何使用 Google Docs API 的 Python 客户端查询特定集合的内容？这就是我已经走了多远：

```
client = gdata.docs.service.DocsService()
client.ClientLogin('myuser', 'mypassword')

FOLDER_FEED1 = "/feeds/documents/private/full/-/folder"
FOLDER_FEED2 = "/feeds/default/private/full/folder%3A"

feed    = client.Query(uri=FOLDER_FEED1 + "?title=MyFolder&title-exact=true")
full_id = feed.entry[0].resourceId.text
(res_type, res_id) = full_id.split(":")

feed    = client.Query(uri=FOLDER_FEED2 + res_id + "/contents")

for entry in feed.entry:.
    print entry.title.text 
```

第一次调用`Client.Query`成功并且似乎提供了有效的资源 ID。但是，第二个调用返回：

```
{'status': 400, 'body': 'Invalid request URI', 'reason': 'Bad Request'} 
```

*   我该如何纠正它以使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T20:19:29.007

一旦有了文件夹条目，调用`client.GetResources(entry.content.src)`而不是自己生成 URI 并使用查询要容易得多。

在你的情况下，`client.GetResources(feed.entry[0].content.src)`.

# javascript - 创建用于登录 Web 应用程序的自动登录 javascript

> ID：10119512
> 
> 赞同：-1
> 
> 时间：2012-04-12T07:47:13.580
> 
> 标签：javascript, login

我需要创建一个登录 javascript，我可以将其保存为浏览器的书签工具栏中的书签，当我运行它时。它应该让我登录到我的 Web 应用程序，该应用程序是为我的开发目的而在本地设置的。这个想法基本上是为了消除重复输入用户名和密码以登录网络应用程序进行测试等的麻烦。我们以前在我上一个工作场所的某个人做过这个，但现在只想自己做。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-12T07:50:44.870

使用 COOKIES 会做得更好。

但是，如果您愿意，请构建如下链接：

```
javascript:location.href='http://my_host/my_system?autoLogin=1&username=USERNAME&password=PASSWORD' 
```

希望这是你想要的，但你需要优化你的系统才能解析这样的链接。我还建议使用散列（单向加密）密码。

# asp.net-mvc - 清理用户给定的 URL 以防止 XSS（使用 ASP.NET MVC）

> ID：10119513
> 
> 赞同：4
> 
> 时间：2012-04-12T07:47:19.197
> 
> 标签：asp.net-mvc, image, url, xss

我正在研究用户给定的 URL，以使用带有 A 标记的链接以及作为 IMG 标记的嵌入图像，我想知道安全性，有点像[Spring - MVC - Sanitize URL before redisplaying to the user](https://stackoverflow.com/questions/9813491/spring-mvc-sanitize-url-before-redisplaying-to-the-user)但我正在研究 ASP.NET MVC。

在[XSS 备忘单](http://ha.ckers.org/xss.html)之后，有很多 XSS 技术需要注意。ASP.NET MVC 的自动表单检查似乎至少抓住了基本情况，但这是否足够？

对于输出或 URL，纯*HttpUtility.HtmlEncode 是否*足够，我应该考虑使用[WPL](http://wpl.codeplex.com/ "WPL")还是有其他一些我没有想到的解决方案？

兄弟，图科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:59:11.707

我建议看看[微软的 AntiXss 库](http://wpl.codeplex.com/)这是我用来清理我的应用程序/数据的工具

# javascript - HTML5拖放更改图标/光标，同时拖动

> ID：10119514
> 
> 赞同：69
> 
> 时间：2012-04-12T07:47:22.083
> 
> 标签：javascript, html, drag-and-drop

我想知道如何在拖动（dragover/dragenter）图标/光标时进行更改，例如当我拖动输入以拒绝或允许部分时。当然，我可以用光标移动绝对定位的 DOM 的一部分，但我对原生 HTML5 解决方案感兴趣。

谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-14T19:36:36.333

你在[dropEffect](https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/dropEffect)之后：

在 dragstart 中初始化它：

```
event.dataTransfer.effectAllowed = "copyMove"; 
```

在 dragenter 中更新它：

```
event.dataTransfer.dropEffect = "copy"; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-12T07:59:20.250

我在这里有一个独立的跨浏览器 HTML5 拖放示例：http: [//jsfiddle.net/rvRhM/1/](http://jsfiddle.net/rvRhM/1/)

查看 dragstart 和 dragend 事件。**dm**是被拖动的元素。

```
EventUtil.addHandler(dm, 'dragstart', function(e) {
    e.dataTransfer.setData(format, 'Dragme');
    e.dataTransfer.effectAllowed = effect;
    var target = EventUtil.getCurrentTarget(e);
    target.style.backgroundColor = 'blue';
    target.style.cursor = 'move'; // You can do this or use a css class to change the cursor
    return true;
}); 
```

确保拖动结束时重置光标：

```
EventUtil.addHandler(dm, 'dragend', function(e) {  
    var target = EventUtil.getCurrentTarget(e);
    target.style.backgroundColor = '';
    target.style.cursor = 'default'; // Reset cursor
    return true;
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-15T00:30:40.473

添加纯 css 解决方案，这可能对少数人有用。在 html 元素上使用此类。

```
.grab {
        cursor: move;
        cursor: grab;
        cursor: -moz-grab;
        cursor: -webkit-grab;
        .thumbnails-list{
            cursor: pointer;
        }
    }

    .grab:active {
        cursor: grabbing;
        cursor: -moz-grabbing;
        cursor: -webkit-grabbing;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-09T17:11:07.657

我试图达到同样的效果，但找不到一个好的解决方案。我最终所做的是将图像设置为 dataTransfer 并在每次操作时更改其 src。这样，至少跨浏览器的行为是一致的。这是我用作参考的页面的链接：

[https://kryogenix.org/code/browser/custom-drag-image.html](https://kryogenix.org/code/browser/custom-drag-image.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-11T10:08:46.013

**当且仅当在** [MDN](https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/dropEffect#javascript_content)中描述的`ev.preventDefault()`所有更改`dropEffect`（不要调用它）的事件上调用时，接受的答案才有效`dragstart`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-08T17:38:36.417

这对我有用：

```
<div class="container">
    <div draggable="true">
    <div draggable="true">
</div> 
```

```
$('.container').bind('dragover', function() {
    $('body').addClass('dragging');
});
$('.container').bind('dragleave', function() {
    $('body').removeClass('dragging');
}); 
```

```
.container > div {
    cursor: grab;
}
body.dragging .container > div {
    cursor: grabbing;
} 
```

[https://jsfiddle.net/cLb3hxtf/1/](https://jsfiddle.net/cLb3hxtf/1/)

# jsf-2 - 如何渲染在 JSF 中自动生成 id 的元素？

> ID：10119518
> 
> 赞同：0
> 
> 时间：2012-04-12T07:47:52.957
> 
> 标签：jsf-2, primefaces

我在 primefaces tabView 上放置了 primefaces'datatable..

我正在使用过滤器。随着网格中的新值更新，我想重新渲染过滤器。

过滤器 id 生成为：tabViewId:ActiveTabIndex:DatatableID:ColumnName_filter。

在输入文本的值更改时，我想重新渲染过滤器。

```
<p:column width="40">
                    <h:inputText id="vendorInputTxt" value="#{articlePromo.proveedor}"
                        styleClass="inputTextStyle">
                        <f:ajax event="change" render=":categoryTabView:0:promotionDetail_dataTable:vendorColumnHeader_filter"
                            listener="#{promotionDetailManagedBean.onProveedorChange}" />
                    </h:inputText>
                </p:column> 
```

但它给出了错误，**包含一个未知的 id ':categoryTabView:0:promotionDetail_dataTable:vendorColumnHeader_filter' - 无法在组件 vendorInputTxt 的上下文中找到它**

再次渲染过滤器的正确方法是什么？

谢谢， 希哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:22:12.937

尝试一个 js 调用 oncomplete 到：`widget_<dataTableId>.filter();` 其中 dataTableId 是给 dataTable 的 id。

# gcc - g++、静态初始化和-nostdlib

> ID：10119520
> 
> 赞同：14
> 
> 时间：2012-04-12T07:48:00.943
> 
> 标签：gcc, g++, static-initialization

编译/链接 with`-nostdlib`似乎可以防止静态初始化，即使我添加自己的 crti.s 和 crtn.s 与`.init`/`.fini`部分。

是否有解决方法使 g++ 生成插入`.init`或我可以手动调用的静态初始化代码？

这是我尝试过的：

```
g++ -o test.o -c -fno-use-cxa-atexit test.cc  # has _start (entry point) 
                                              #   that calls _init and _main
as -o crti.o crti.s      # has _init in section .init
as -o crtn.o crtn.s
g++ -o test ./crti.o test.o -nodefaultlibs -nostartfiles ./crtn.o 
```

`-nodefaultlibs`单独包括静态初始化代码和调用，但强制使用 libc-_start/_init。

`-nodefaultlibs -nostartfiles`允许我使用自己的 _start / _init，但不包括代码或调用静态初始化。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-12T07:57:47.647

从[gcc 链接器文档](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)，

**-nostdlib**

> 链接时不要使用标准的系统启动文件或库。**没有启动文件**，只有您指定的库**将传递给链接器**，并且指定系统库链接的选项（例如 -static-libgcc 或 -shared-libgcc）将被忽略。

因此使用，

**-nodefaultlibs**

链接时不要使用标准系统库。**只有您指定的库将被传递给链接器**，指定系统库链接的选项，例如 -static-libgcc 或 -shared-libgcc 将被忽略。**标准启动文件正常使用，除非使用 -nostartfiles**。编译器可以生成对 memcmp、memset、memcpy 和 memmove 的调用。这些条目通常由 libc 中的条目解析。指定此选项时，应通过某些其他机制提供这些入口点。

也试试，

```
g++ -Wl, -static

-Wl      passes the next command on to the linker
-static  On systems that support dynamic linking, this prevents linking with 
         the shared libraries. On other systems, this option has no effect. 
```

# android-activity - 业务流程建模技术

> ID：10119525
> 
> 赞同：1
> 
> 时间：2012-04-12T07:48:18.243
> 
> 标签：android-activity, process, uml, modeling

任何人都可以为业务流程建模提出好的图表/建模技术吗？我正在考虑使用活动图，但该过程包括很多分叉，其次，非技术用户可能难以理解活动图。

序列图非常相似，但还有哪些其他工具？DFD？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:57:27.667

对我来说，UML 活动或 BPMN 建模将是最好的方法。序列图更适合序列表示，而不是特别流动的很多叉子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T15:11:22.080

还有 Eriksson-Penker UML 扩展。[Sparx Systems 的 Enterprise Architect](http://www.sparxsystems.com/)支持这些以及 BPMN；我不知道其他工具提供什么样的支持。

# jsp - 显示标签表头列消失

> ID：10119528
> 
> 赞同：0
> 
> 时间：2012-04-12T07:48:30.367
> 
> 标签：jsp, displaytag

我有一个显示标签表。

```
 <display:table class="displayTable" id="ItemList"
            name="${sessionScope.List}" requestURI="listItem.action"
            pagesize="15" defaultsort="2" defaultorder="ascending" sort="list" >
            <display:column class="colID">
                <input type="checkbox" id="checked"
                    value="${ItemList.itemId}" />
            </display:column>
            <display:column class="colItemName" property="itemName"
                title="${titleItemName}" sortable="true" headerClass="sortable" 
            />
            <display:column property="categoryName"
                title="${titleCategory}" sortable="true" headerClass="sortable" />
        </display:table> 
```

这将像下面的 HTML 一样创建。

```
<table id="itemList" class="displayTable">
<thead>
<tr>
<th></th>
<th class="sortable sorted order1">
<a href="lisItem.action?d-5522365-s=1&amp;d-5522365-p=1&amp;d-5522365-o=1">Item Name</a></th>
<th class="sortable">
<a href="listItem.action?d-5522365-s=2&amp;d-5522365-p=1&amp;d-5522365-o=2">Category</a></th>
<th></th></tr></thead>
<tbody>
.... 
```

我的问题是当我添加并返回到列表时，显示标签表的标题（例如项目名称、类别）消失了。

在我添加了一个新项目之后，添加了新的项目信息 `<a href="lisItem.action?d-5522365-s=1&amp;d-5522365-p=1&amp;d-5522365-o=1">Item Name</a></th>`并变成了这样

`<a href="listItem.action?Item.ItemId=0&amp;Item.Name=Blah Blah &amp;Item.CategoryId=1&amp;d-5522365-s=1&amp;d-5522365-p=1&amp;d-5522365-o=1"></a></th>`

然后**项目名称**从链接标题中消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:23:00.460

请注意，显示标签将在每个事件（如排序、导出）之后调用操作“listItem.action”。

确保每次重定向到同一页面时都应该得到 'sessionScope.List' 。

请提供确切的错误或错误描述。

# matlab - 如何在matlab中创建一个带有当前时间戳的.mat文件？

> ID：10119531
> 
> 赞同：4
> 
> 时间：2012-04-12T07:48:42.847
> 
> 标签：matlab, time

我想在 matlab 中创建一个带有当前时间戳的 .mat 文件？我希望 .mat 文件的名称为当前时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T07:53:33.707

用于`datestr`格式化时间并用于`now`获取当前时间：

```
save(datestr(now,30)) 
```

# iphone - postNotification 正确触发功能，但 userinfo(NSDictionary) 什么都没有

> ID：10119534
> 
> 赞同：2
> 
> 时间：2012-04-12T07:48:48.587
> 
> 标签：iphone

我使用下面的代码来通知菜单选择索引

```
 NSDictionary *userInfo=  [NSDictionary dictionaryWithObject:[NSString stringWithFormat:@"123"] 
                                              forKey:@"Index"];
   [[NSNotificationCenter defaultCenter] postNotificationName: @"notifyToMenuSelectionNotification"
                                                    object: userInfo];

-(void)menuSelectionNotification:(NSNotification *)notification
{
  NSLog(@"%@", notification.userInfo);

} 
```

menuSelectionNotification 被正确触发，

但 NSLog 输出 notification.userInfo 仍然是 {null}

欢迎任何评论1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T07:56:25.070

你以错误的方式传递对象。请试试这个 -

```
NSDictionary *userInfo=  [NSDictionary dictionaryWithObject:[NSString stringWithFormat:@"123"] 
                                              forKey:@"Index"];

[[NSNotificationCenter defaultCenter] postNotificationName:@"notifyToMenuSelectionNotification"
                                      object:nil
                                      userInfo:userInfo]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:52:50.360

您必须将字典设置为 userInfo 参数，而不是对象。你可能想试试

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"notifyToMenuSelectionNotification" object:nil userInfo:userInfo]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:59:30.950

`userInfo`您应该在参数中发布字典，例如

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"notifyToMenuSelectionNotification" object:nil userInfo:userInfo]; 
```

有关更多详细信息，请。请参阅[NSNotificationCenter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)文档

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T08:32:24.273

请试试这个

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"notifyToMenuSelectionNotification" object:userInfo userInfo:nil];

-(void)menuSelectionNotification:(NSNotification *)notification{
NSDictionary *userInfo =   (NSDictionary*)notification.object;
} 
```

# wpf - 如何更快地绘制形状元素并使它们在 wpf 中缩放？

> ID：10119537
> 
> 赞同：1
> 
> 时间：2012-04-12T07:49:11.860
> 
> 标签：wpf, user-controls, wpf-controls, drawing

我有这个问题。

所以我有一堆必须在画布上可视化的数据（比如超过 5000 个项目）。因此，我将它们绘制为水平线上的一堆垂直矩形，如下所示：

---|---|||||---|---|||---||----|||||||--------

现在，因为画布很小，我只在不同的缩放级别绘制不同数量的矩形。所以如果我放大更多，这条线会变得更长，我可以看到更多的矩形。

问题是每次放大时，我都必须清除整个画布，并使用新的缩放比例重新绘制所有内容。它真的很烂，绘图很慢，缩放也不是很好。

所以我想知道有没有一种方法可以实现更快的绘图和良好的缩放（就像那些矢量图，你可以无限放大）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:59:09.613

你试过[ScaleTransform 类](http://msdn.microsoft.com/en-us/library/system.windows.media.scaletransform.aspx)吗？

```
<Canvas.RenderTransform>
    <ScaleTransform ScaleX="2" ScaleY="2" />
</Canvas.RenderTransform> 
```

请参阅[如何：](http://msdn.microsoft.com/en-us/library/ms742560.aspx)也缩放元素。出于性能原因：

*   冻结你的[Freezables](http://msdn.microsoft.com/en-us/library/bb613565.aspx#Freezable_Objects)。

*   > 更新而不是替换 RenderTransform
    > 
    > 您可以更新 Transform 而不是将其替换为 RenderTransform 属性的值。在涉及动画的场景中尤其如此。通过更新现有的 Transform，您可以避免启动不必要的布局计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:09:10.297

你看过[ZoomableCanvas](http://blogs.msdn.com/b/kaelr/archive/2010/07/29/zoomablecanvas.aspx)吗？我没有用过它，但它看起来就像是为了做你想做的事而设计的。

# xamarin.ios - 如何在 Monotouch 中实现 ShouldChangeCharacters？

> ID：10119541
> 
> 赞同：4
> 
> 时间：2012-04-12T07:49:35.127
> 
> 标签：xamarin.ios, uitextfield

我有一个 UITextField，我想在其中使用 ShouldChangeCharacters 委托方法更改字符。但是当我使用 textField obj 时，它说与 UITextFieldChange 不匹配......我应该如何在 Monotouch 中做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-12T12:12:55.800

以下是强制全部大写的示例：

```
 textField.ShouldChangeCharacters = (textField, range, replacementString) => 
    {
        using (NSString original = new NSString(textField.Text), replace = new NSString(replacementString.ToUpper()))
        {
            textField.Text = original.Replace (range, replace);
        }
        return false;
    }; 
```

我认为它应该是你需要的。我总是倾向于使用 Lambda 表达式，这样你甚至不需要知道委托类型、参数类型等。我让 C# 类型推断来完成这项工作。

# jboss-arquillian - 在哪里可以找到 arquillian xml 配置文档？

> ID：10119544
> 
> 赞同：15
> 
> 时间：2012-04-12T07:49:49.570
> 
> 标签：jboss-arquillian

我尝试通过遵循[正式文档](https://docs.jboss.org/author/display/ARQ/Reference+Guide)来学习 JBoss Arquillian，但对配置 arquillian.xml 感到困惑。因为[这里](https://docs.jboss.org/author/display/ARQ/Container+configuration)提到过一次。

甚至我还发现[容器适配器](https://docs.jboss.org/author/display/ARQ/Container+adapters)部分有一个特定的配置描述。它不涵盖所有元素/属性，例如***引擎***及其属性列表、***defaultProtocol***、***extension***和***group***。

我很担心，想知道这个配置文件是否有任何进一步或完整的解释。你能帮忙解释一下这个配置吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T11:07:08.133

Arquillian 参考指南中没有一页包含您的答案。这部分是因为 Arquillian 的模块化和可扩展性 - 扩展可以有自己的配置元素和属性。

首先，容器的属性位于[Container Adapters Section](https://docs.jboss.org/author/display/ARQ/Container+adapters)中。每个适配器都有自己的页面，其中详细说明了容器配置。例如，[JBoss AS 7 有它自己](https://docs.jboss.org/author/display/ARQ/JBoss+AS+7.0+-+Managed)的容器配置页面（参见页面上的*配置*部分），其他容器也是如此。

通常，您不需要自己配置*协议*，因为这些值通常由 Arquillian 管理，并且通常不需要通过 arquillian.xml 提供任何覆盖。但是，如果您需要它们，它们位于[协议](https://docs.jboss.org/author/display/ARQ/Protocols)部分和子页面中。

*组*只是容器的集合，用于容器默认不支持集群的情况。您只需要在一个组元素中列出多个容器配置，如下[所示](https://docs.jboss.org/author/display/ARQ/Multiple+Containers)。

*扩展*配置通常在[Extensions child-pages](https://docs.jboss.org/author/display/ARQ/Extensions)中找到。

*defaultProtocol*元素没有任何自己的页面。它用于覆盖容器适配器指定的协议，用于所有测试。只有少数情况下您需要使用此元素，尤其是当您需要使用 Servlet 协议而不是 JBoss AS 7 的 JMX 协议时（因为 Arquillian 的 Servlet 协议是比JMX 之一）。

*defaultProtocol*的典型用法如下所示：

```
<defaultProtocol type="Servlet 3.0" /> 
```

其中 type 是协议的名称 - “Servlet 2.5”和“Servlet 3.0”是有效值。当您更改容器的默认协议时，您可能还需要将协议依赖项添加到您的类路径中。

# android - 将数据从移动应用程序（iPhone、Android）传递到 ASP.NET Web 应用程序

> ID：10119546
> 
> 赞同：1
> 
> 时间：2012-04-12T07:49:58.497
> 
> 标签：android, iphone, asp.net

我们可以将数据从手机应用程序（iPhone 应用程序/Android 应用程序）传递到 ASP.NET 网站应用程序吗？它是否需要在像 SSL 这样的安全通道上？ASP.NET 网站，我正在考虑使用 WCF 服务从手机应用程序中获取数据，但是更好的数据格式是什么？休息？杰森？纯文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:53:34.730

如果您托管 WCF 服务，那么自然选择 SOAP。在这种情况下，您根本不必关心格式，因为如果您使用适当的 SOAP 库，将自动生成用于调用 Web 方法的代码。请参阅[此 SO question](https://stackoverflow.com/questions/204465/how-to-access-soap-services-from-iphone)以获取有关 iOS 的一些想法和有关 Android 的[此问题](https://stackoverflow.com/questions/297586/how-to-call-soap-web-service-with-android)。

SSL 通常是一件好事，尤其是当您关心用户的安全时（您应该这样做）。

# objective-c - 在 ios 上延迟后启动 UIActivityIndi cator

> ID：10119548
> 
> 赞同：0
> 
> 时间：2012-04-12T07:50:08.557
> 
> 标签：objective-c, ios, uiactivityindicatorview

仅当操作花费太多时间时，我才想启动我的 UIActivityIndi​​cator：

```
 - (void) continueLaunch {

        //operations
        //.....
        [activityIndic stopAnimating];

    }

    //my current method
    - (void)lauchApplication {          
        [activityIndic startAnimating];
        [self performSelector:@selector(continueLaunch) withObject:nil afterDelay:0.0f];
    }   

    //what I want to do
    - (void)lauchApplication {
         if ([self performSelector:@selector(continueLaunch) withObject:nil afterDelay:0.0f]duration > 1 second){
              [activityIndic startAnimating];
         } 
    } 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T07:57:29.880

我认为最好的方法是在您想要等待的持续时间之后启动指标，如果在该持续时间之前的某个时刻发生了某些事情，您可以取消它：

```
[self performSelector:@selector(startAnimation) withObject:nil afterDelay:1.0f] 
```

并取消它（来自 Apple Doc）：

> 要取消排队的消息，请使用 cancelPreviousPerformRequestsWithTarget: 或 cancelPreviousPerformRequestsWithTarget:selector:object: 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T07:58:00.170

一种可能的解决方案是：

1.  创建一个计时器
2.  每 X 秒在另一个线程中启动一个方法**B**
3.  在方法**B**中检查：如果方法**A**正在进行并且计时器 > Y 时间，则开始为您的活动指示器设置动画。

# php - 在 php 和 javascript 之间共享变量

> ID：10119551
> 
> 赞同：0
> 
> 时间：2012-04-12T07:50:14.270
> 
> 标签：php, javascript, html, iframe

以下是我的工作：

1.  由两个 iframe 组成

2.  第一个表格要求输入用户名和地址，并有一个“添加”按钮。

3.  单击添加时，此信息将添加到 mysql 数据库，并再次显示表单，并显示您的信息已插入数据库的消息。

4.  在第二个 iframe 中有一些有趣的东西。它将在表格中显示数据库中的所有用户。在后台，一个 php 函数会定期检查是否有新用户每隔一段时间（比如 5 秒）添加到数据库中，如果在 MySQL DB 中找到任何新行（不在 HTML iframe 中的表中），它将被添加到HTML iframe 页面中的表格（可能正在使用 javascript 函数）。

我已经完成了前 3 个步骤。请帮助我进行第四步。我想使用 PHP 和 Javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:04:45.660

尝试创建隐藏文本框并将 php 变量值分配给该文本框，然后您可以通过执行访问该值

```
document.getElementById('id_of_textbox').value; 
```

或者在您访问 iframe 中的 HTML 元素的情况下，您可能需要执行以下操作：

```
top.frame_name.document.getElementById('id_of_textbox').value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:57:04.557

使用 AJAX - 获取新行或所有行。只需将其写入数据库即可。

示例（使用 jQuery - 没有 JSON 驱动的数据传输）：

1、getData.php

```
$dbData = array(); // YOUR DB DATA HERE
$output = "";
foreach ($dbData as $row) {
   $output .= "<tr><td>{$row['name']}</td><td>{$row['email']}</td></tr>";
}
echo $output; 
```

2a，JS代码（使用jQuery - 从数据库下载整个表）

```
function autoRefresh() {
   $.get('getData.php', null, function(data){
       $("#myUltimateTable tbody").html(data);
   }, 'text');
   setTimeout("autoRefresh();", 5000);
} 
```

2b、JS 代码（使用 jQuery - 从数据库中只下载新行）

```
function autoRefresh() {
   $.get('getData.php', null, function(data){
       $("#myUltimateTable tbody").append(data);
   }, 'text');
   setTimeout("autoRefresh();", 5000);
} 
```

# iphone - IOS 5.0.1 上的 UIToolBar 奇怪的显示问题

> ID：10119560
> 
> 赞同：0
> 
> 时间：2012-04-12T07:50:58.960
> 
> 标签：iphone, ios5, uitoolbar

我正在为 IOS 5.0.1 上发生的这个奇怪的 UIToolBar 问题寻找解决方案。

我从界面生成器中添加了两个 UIToolBar，但工具栏看起来不像原来的工具栏。它们像自定义视图一样显示。工具栏在 IOS 4 和 3 中正确显示。

仅在 IOS 5.x 上出现此问题

这是该问题的屏幕截图：

![在此处输入图像描述](../Images/845db0e3215bc717cd42c17943f46281.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:53:57.250

我认为 iOS SDK 没有给你那些图标，在我看来定制的 PNG，没有视网膜显示版本（@2x）。

# asp.net - 客户端和服务器之间的连接建立

> ID：10119564
> 
> 赞同：0
> 
> 时间：2012-04-12T07:51:41.477
> 
> 标签：asp.net, tcp, connection, request, client-server

我想知道一些关于**客户端和服务器之间建立连接**的基本知识。假设我的网页有左侧菜单，其中有一些链接，单击这些子页面时会在母版页的右侧打开。现在每个链接都在向服务器请求一个新的网页。每个网页异步调用 5-6 个 Web 服务来获取数据。因此，如果我单击左侧菜单链接，则会在客户端和服务器之间建立连接，`(client IP and Port)`使用`(server Ip and port)`. 但是在响应到来之前，假设我点击了菜单的其他链接，那么服务器如何知道旧的连接被终止并建立了新的连接。下一步，当我点击一个链接时，请求转到服务器，服务器处理请求但之前如果连接从客户端终止，则发送响应，该响应会发生什么，服务器是否丢弃响应并接受新的处理请求。

实际上我有很多困惑，所以如果有人可以向我解释完整的客户端-服务器往返过程，那将非常有帮助。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T07:58:39.753

服务器将丢弃响应并在后续请求中工作。阅读超文本传输​​协议将使您了解更多。你可以在网上搜索一篇文章在[这里](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)

请求和响应是通过面向连接的协议 TCP 进行的，因为连接中断 IIS 将知道该客户端是否无法访问。你试试[http://www.google.com.pk:80](http://www.google.com.pk:80)会带你到[http://www.google.com.pk](http://www.google.com.pk)因为我们可以省略默认端口，即 80。试试这个[http://www.google.com .pk:82/](http://www.google.com.pk:82/)它不会打开 www.google.com，因为无法在端口 82 上建立 tcp 连接。

# resize - 通过轮廓选择自定义 QGraphicsItem

> ID：10119565
> 
> 赞同：1
> 
> 时间：2012-04-12T07:51:41.893
> 
> 标签：resize, border, qgraphicsitem, outline

通过用鼠标抓住其轮廓并拖动来调整 QGaphicsItem 大小的最佳方法是什么。该程序在场景中有许多 Qgraphicsitem，它们可以重叠或在另一个内部。这些项目是透明的绘图对象，如矩形、线条和圆形。

我希望只能在项目边框/轮廓上进行选择。这可能吗？

谢谢

# c# - 我应该如何测试一个复杂的方法？

> ID：10119570
> 
> 赞同：2
> 
> 时间：2012-04-12T07:51:56.683
> 
> 标签：c#, unit-testing

我有一个想要测试的复杂方法，它接收用户、UserUpdatedDetails（密码、恢复问题和电子邮件）和密码。

### 它应该检查以下内容：

1.  确保用户更新了他必须更新的所有字段
2.  独立验证每个字段
3.  确保密码与用户密码匹配（验证）
4.  更新必填字段
5.  如果密码/问题答案已更改，请重新加密敏感数据的特殊密钥（它是一个随机长密钥，用于加密敏感数据，例如生日，名字和东西......密钥也通过密码加密保存和问题的答案不是现在的重点）。

主要方法使用小方法，即使用其他小方法。问题是它们都是私有方法，没有理由不应该这样做（我不会在其他任何地方使用它们）

测试这一切将是一场噩梦，即使我将独立测试每个小方法，它也不能让我清楚地了解主要方法正在做它必须做的事情。

### 实现看起来像这样：

```
UpdateUserDetails(this User user,
                  UserDetails userDetails,
                  string Password,
                  out ErrorList<AuthErrors> errorList)
{
    UpdateActions actions;
    errorList = user.ValidateUserDetails(userDetails, out actions);
    if (errorList.IsSuccess() && actions != UpdateActions.None)
    {
         var status = Auth(user.UserId, password); // Easy to mock
         if (status.IsSuccess)
         {
             try
             {
                 var newUser = user.UpdateUserDetails(userDetails, actions);
                 commit;
                 return newUser;
             }
             catch
             {
                 rollback;
                 throw;
             }
         }
         else
             errorList.Add(AuthErrors.WrongPassword);
    }
    return null;
}
enum UpdateActions
{
    None = 0,
    Password = 1,
    Email = 2,
    Question = 4,
    All = Password & Email & Question
} 
```

编辑：顺便说一句，我很容易模拟 Auth 实现，以及 DAL 实现（更新用户）所有其他都是问题......

***只是为了对方法内部的方法给出一些看法：***

```
ValidateUserDetails(this User user, 
                    UserDetails userDetails,
                    out UpdateActions actions)
{
    actions = UpdateActions.None;
    ErrorList<AuthErrors> errorList = new ErrorList<AuthErrors>()
    if (userDetails.password != null || user.RequirePasswordUpdate)
    {
        errorList.AddRange(validatePassword(userDetails.password) // PublicMethod, already, which has tests.
        actions.Add(UpdateActions.Password) // ExtensionMethod
    }
    if (userDetails.email != null || user.RequireEmailUpdate)
    {
        errorList.AddRange(validateEmail(userDetails.Email) // PublicMethod, already, which has tests.
        actions.Add(UpdateActions.Email) // ExtensionMethod
    }
    if (userDetails.Question != null || userDetails.QuestionAnswer || user.RequireQuestionUpdate)
    {
        errorList.AddRange(validateQuestion(userDetails.Question, userDetails.QuestionAnswer) // PublicMethod, already, which has tests.
        actions.Add(UpdateActions.Question) // ExtensionMethod
    }
}
UpdateUserDetails(this User user, UserDetails userDetails, UpdateActions actions, string oldPassword)
{
    if (actions.Has(UpdateActions.UpdatePassword)
        user.UpdatePassword(userDetails.password)
    ...
    return DataAccess.UpdateUser(user); // Easy to Mock
}
UpdatePassword(this User user, string password, string oldPassword)
{
    user.Password = _IEncryptionManager.BcryptEncrypt(password); // easy to mock encryption methods
    user.SensKey = _IEncryptionManager.DesEncrypt(_IEncryptionManager.DesDecrypt(user.SensKey,
                                                          oldPassword),
                           password);

} 
```

感谢您的帮助，
谢谢问候，
阿米尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:06:01.623

您应该首先单独对每个功能进行单元测试，因为您`UpdateUserDetails()`首先使用 验证用户详细信息`ValidateUserDetails()`，然后使用 等检查用户的身份验证`Auth()`。

然后，您应该首先创建以下单元测试：

*   `CanValidateUserDetails()`
*   `WontAddUserWithWrongPassword()`
*   `CanAddUserWithValidPassword()`
*   `CanAuthenticateUser()`.
*   ...

在*断言*所有这些方法（功能）都*通过*了测试之后，只需对`UpdateUserDetails()`实际执行的操作进行单元测试：

```
user.UpdateUserDetails(userDetails, actions); 
```

通过：

*   `CanUpdateUserDetails()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:27:43.390

不要费心测试私有位，`UpdateUserDetails`这是您感兴趣的，并且应该首先测试此方法。私人部分将作为公共方法测试的*附带损害进行测试。*最好的部分是，您已经知道应该测试什么，并且您在发布的列表中自己指定了它。但是，它可以改进一点：

> 确保用户更新了他必须更新的所有字段

这本质上是输入数据检查，应该这样测试（当用户发布不完整的数据时会发生什么？异常，错误消息？这是你想要测试/验证的 -当用户没有更新所有字段时*会发生什么以及**它是否确实发生了*）。

> 独立验证每个字段

当字段无效时会发生什么？这是应该测试的（抛出异常，错误消息等）。成功的验证导致成功的更新，这将在最后一步进行测试。

> 确保密码与用户密码匹配（验证）

通常身份验证是繁重/复杂的过程。作为用户详细信息更新的一部分，它真的需要保密吗？除非你有充分的理由保持这种方式，否则我会说它是提取分离存在并作为依赖注入的一个很好的候选者。

> 更新必填字段

这是此处测试的单元，此时应测试这些字段是否正确更新。

> 如果密码/问题答案已更改，请重新加密敏感数据的特殊密钥（它是一个随机长密钥，用于加密敏感数据，例如生日，名字和东西......密钥也通过密码加密保存和问题的答案不是现在的重点）。

密钥生成应该在其他地方完成，例如，这听起来与更新用户详细信息的责任不同，也许值得对其进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:57:56.860

为了实现这一点，您必须遍历此方法中的所有可用路径，尝试使用一些可用的模拟框架，如 rhino 模拟。使用模拟框架模拟方法的所有输入，以便在内部生成不同的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T08:01:20.233

您可以使用包含方法的项目中的`InternalsVisible`（MSDN 文档[here](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)）属性使您的单元测试项目“看到”私有方法。`AssemblyInfo.cs`

但是，如果您需要使用它，这可能表明您的解决方案存在架构问题。

另一种选择是使用一些函数，该函数返回指示工作流程成功的状态代码（而不是使用您在上面发布的扩展方法）。然后您可以在单元测试中测试不同的返回值。

# javascript - HTML5 Photoshop 像多边形套索选择

> ID：10119575
> 
> 赞同：3
> 
> 时间：2012-04-12T07:52:14.937
> 
> 标签：javascript, jquery, html5-canvas

我希望通过让用户创建一个封闭的形状来构建一个工具来剪切照片的一部分。用户应该能够开始画线。从a点到b点，再到c、e、d、e、f ....到最后再点a来闭合形状。

我想为此使用 HTML5 画布。我认为这可能很合适，我正在考虑使用 flashcanvas 之类的东西作为 IE/旧浏览器的后备？

是否有任何教程/开源应用程序可以用来构建这种东西？这是我第一次使用 HTML5 画布构建应用程序，所以我应该担心哪些陷阱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T12:41:06.263

我认为这是画布的高级用法。您必须了解基础知识，如何绘制，如何使用图层，如何操作像素。只需向谷歌寻求教程。

假设你知道以前的，我会试一试。我以前从未这样做过，但我有一个想法：

你需要 3 个画布：

*   包含您的图片的那个（图片的大小）
*   用户绘制选择形状的图层（图片大小，在第一个画布的顶部）
*   结果画布，将包含您裁剪的图片（大小相同，不需要显示）

当用户点击你的图片时：实际上，他点击了图层，图层被清除并开始新的一行。

当他再次单击它时，将绘制上一条开始的线并开始另一条线，等等...您继续这样做，直到您单击一个非空白像素（这意味着您关闭了形状）。

如果您希望用户预览线条，则需要另一个画布（此处解释为[http://dev.opera.com/articles/view/html5-canvas-painting/#line](http://dev.opera.com/articles/view/html5-canvas-painting/#line)）

当形状闭合时，用户必须在形状内部或外部单击以确定他想要选择的部分。例如，您用半透明灰色填充该部分（洪水填充在这里解释[http://www.williammalone.com/articles/html5-canvas-javascript-paint-bucket-tool/](http://www.williammalone.com/articles/html5-canvas-javascript-paint-bucket-tool/)）

现在图层画布包含与用户选择相对应的彩色形状。

从图层获取像素数据并读取数组，每次在索引**i**处找到非空白像素时，将此像素从主画布复制到结果画布：

```
/* First, get pixel data from your 3 canvas into 
 * layerPixData, resultPixData, picturePixData 
*/

// read the entire pixel array
for (var i = 0 ; i < layerPixData.length ; i+=4 ) {
    //if the pixel is not blank, ie. it is part of the selected shape
    if ( layerPixData[i] != 255 || layerPixData[i+1]  != 255 || layerPixData[i+2] != 255 ) {
        // copy the data of the picture to the result
        resultPixData[i] = picturePixData[i]; //red
        resultPixData[i+1] = picturePixData[i+1]; //green
        resultPixData[i+2] = picturePixData[i+2]; //blue
        resultPixData[i+3] = picturePixData[i+3]; //alpha

        // here you can put the pixels of your picture to white if you want

    }

} 
```

如果您不知道像素操作的工作原理，请阅读此[https://developer.mozilla.org/En/HTML/Canvas/Pixel_manipulation_with_canvas](https://developer.mozilla.org/En/HTML/Canvas/Pixel_manipulation_with_canvas)

然后，使用 putImageData 将像素绘制到结果画布上。任务完成 ！

如果你想移动你的选择线，方法：[http ://simonsarris.com/blog/225-canvas-selecting-resizing-shape](http://simonsarris.com/blog/225-canvas-selecting-resizing-shape)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T05:20:11.583

以下是您应该如何执行此操作：以下代码在页面顶部添加了一个画布，然后通过单击并拖动选择区域将突出显示。之后您需要做的是从基础页面制作屏幕截图，并从画布中创建的图像中制作一个遮罩层并将其应用于屏幕截图，就像它在另一个答案中显示的方式一样。

```
/* sample css code for the canvas
#overlay-canvas {
    position: absolute;
    top: 0;
    left: 0;
    background-color: transparent;
    opacity: 0.4;
    -moz-user-select: none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    -o-user-select: none;
}
*/

function getHighIndex(selector) {
    if (!selector) { selector = "*" };

    var elements = document.querySelectorAll(selector) ||
                   oXmlDom.documentElement.selectNodes(selector);
    var ret = 0;

    for (var i = 0; i < elements.length; ++i) {
        if (deepCss(elements[i],"position") === "static")
            continue;

        var temp = deepCss(elements[i], "z-index");

        if (temp != "auto")
            temp = parseInt(temp, 10) || 0;
        else
            continue;

        if (temp > ret)
            ret = temp;
    }
    return ret;
}

maxZIndex = getHighIndex();

$.fn.extend({
    lasso: function () {
        return this
        .mousedown(function (e) {
            // left mouse down switches on "capturing mode"
            if (e.which === 1 && !$(this).is(".lassoRunning")) {
                var point = [e.offsetX, e.offsetY];
                $(this).addClass("lassoRunning");
                $(this).data("lassoPoints", [point]);
                $(this).trigger("lassoStart", [point]);
            }
        })
        .mouseup(function (e) {
            // left mouse up ends "capturing mode" + triggers "Done" event
            if (e.which === 1 && $(this).is(".lassoRunning")) {
                $(this).removeClass("lassoRunning");
                $(this).trigger("lassoDone", [$(this).data("lassoPoints")]);
            }
        })
        .mousemove(function (e) {
            // mouse move captures co-ordinates + triggers "Point" event
            if ($(this).is(".lassoRunning")) {
                var point = [e.offsetX, e.offsetY];
                $(this).data("lassoPoints").push(point);
                $(this).trigger("lassoPoint", [point]);
            }
        });
    }
});

function onLassoSelect() {
    // creating canvas for lasso selection
    var _canvas = document.createElement('canvas');
    _canvas.setAttribute("id", "overlay-canvas");
    _canvas.style.zIndex = ++maxZIndex;
    _canvas.width = document.width
    _canvas.height = document.height
    document.body.appendChild(_canvas);
    ctx = _canvas.getContext('2d'),
    ctx.strokeStyle = '#0000FF';
    ctx.lineWidth = 5;

    $(_canvas)
        .lasso()

        .on("lassoStart", function(e, lassoPoint) {
            console.log('lasso start');

            var pos = lassoPoint;
            ctx.beginPath();
            ctx.moveTo(pos[0], pos[1]);
            console.log(pos);
        })

        .on("lassoDone", function(e, lassoPoints) {
            console.log('lasso done');

            var pos = lassoPoints[0];
            ctx.lineTo(pos[0], pos[1]);
            ctx.fill();
            console.log(pos);
        })

        .bind("lassoPoint", function(e, lassoPoint) {
            var pos = lassoPoint;
            ctx.lineTo(pos[0], pos[1]);
            ctx.fill();
            console.log(pos);
        });
} 
```

# ruby-on-rails - 在 let(:user) { create(:user) } # => RecordNotFound 之后

> ID：10119584
> 
> 赞同：3
> 
> 时间：2012-04-12T07:53:09.793
> 
> 标签：ruby-on-rails, rspec, factory-bot

我有一个测试用例：

```
describe User do
  let(:user) { create(:user) } # FactoryGirl
  it { User.count == 1 }  
end 
```

并设置：

```
RSpec.configure do |config|
  config.include FactoryGirl::Syntax::Methods
  config.before(:suite) { DatabaseCleaner.strategy = :truncation }
  config.before(:each) { DatabaseCleaner.start }
  config.after(:each) { DatabaseCleaner.clean }
  config.use_transactional_fixtures = false
end 
```

为什么它不工作？如何使用 let 并得到一个真正持久的记录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T07:59:47.710

`let`调用是惰性求值的，除非调用特定方法，否则它们不会运行：

```
describe User do
  subject { user }
  let(:user) { create(:user) } # FactoryGirl
  it { … }  
end 
```

或者，`let!`用于始终评估的前提条件：

```
describe User do
  let!(:user) { create(:user) } # FactoryGirl
  it { … }  
end 
```

# image-processing - 在 volterra 内核中查询

> ID：10119585
> 
> 赞同：0
> 
> 时间：2012-04-12T07:53:11.320
> 
> 标签：image-processing, kernel, svm

我需要 volterra 内核的代码。我不知道如何定义和实现 volterra 内核。我需要将此内核融合到支持向量机 (SVM) 中以进行图像检索。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T05:42:57.977

给定训练数据集，使用上面提到的代码来训练 Volterra 内核。一旦获得 Volterra 内核 (v)，计算内核矩阵 K，其中矩阵的第 i 行和第 j 列由 CONVOLUTION(d_i-d_j,v) 给出。将此矩阵 K 与 SVM 一起使用。请注意，内核是 Volterra Kernel (v) 与 SVM 中使用的“内核”(K) 不同。

# java - 如何提高 JScrollPane 上的慢速滚动速度？

> ID：10119587
> 
> 赞同：17
> 
> 时间：2012-04-12T07:53:19.387
> 
> 标签：java, swing, jpanel, jscrollpane, mousewheel

我在我的项目中添加了`JPanel`一个。`JScrollPane`

一切正常，但是在 JPanel 中使用**鼠标滚轮进行鼠标滚动存在一个问题。**它的滚动速度非常慢。如何让它更快？

**我的代码是：**

```
JPanel panel = new JPanel();

panel.setLayout(new BorderLayout());
objCheckBoxList = new CheckBoxList();
BaseTreeExplorer node = (BaseTreeExplorer)projectMain.objCommon.tree.getLastSelectedPathComponent();
if (node.getObject() != null) {
    cmbList.setSelectedItem(node.getParent().toString());
} else {
    if (node.toString().equalsIgnoreCase("List of attributes")) {
        cmbList.setSelectedIndex(0);
    } else {
        cmbList.setSelectedItem(node.toString());
    }
}

panel.add(objCheckBoxList);

JScrollPane myScrollPanel = new JScrollPane(panel);

myScrollPanel.setPreferredSize(new Dimension(200, 200));
myScrollPanel.setBorder(BorderFactory.createTitledBorder("Attribute List")); 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-12T07:59:44.490

您可以使用这行代码设置滚动速度

```
myJScrollPane.getVerticalScrollBar().setUnitIncrement(16);
```

[这](http://www.devdaily.com/blog/post/jfc-swing/how-increase-speed-jscrollpane-mouse-wheel)是详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-20T20:14:36.377

之所以会出现此错误，是因为 swing 以像素而不是文本行来解释滚动速度。如果您正在寻找一种更易于接受的解决方案的替代方案，您可以使用以下函数来计算和设置实际所需的滚动速度（以像素为单位）：

```
public static void fixScrolling(JScrollPane scrollpane) {
    JLabel systemLabel = new JLabel();
    FontMetrics metrics = systemLabel.getFontMetrics(systemLabel.getFont());
    int lineHeight = metrics.getHeight();
    int charWidth = metrics.getMaxAdvance();

    JScrollBar systemVBar = new JScrollBar(JScrollBar.VERTICAL);
    JScrollBar systemHBar = new JScrollBar(JScrollBar.HORIZONTAL);
    int verticalIncrement = systemVBar.getUnitIncrement();
    int horizontalIncrement = systemHBar.getUnitIncrement();

    scrollpane.getVerticalScrollBar().setUnitIncrement(lineHeight * verticalIncrement);
    scrollpane.getHorizontalScrollBar().setUnitIncrement(charWidth * horizontalIncrement);
} 
```

请注意，当它包含单个组件（如 a或）时，swing*确实会*正确计算滚动速度。此修复程序专门针对滚动窗格包含.`JTable``JTextArea``JPanel`

# html - 如何包含漂亮的 Facebook、Twitter、G+ 分享按钮？

> ID：10119593
> 
> 赞同：-1
> 
> 时间：2012-04-12T07:53:36.757
> 
> 标签：html, css, facebook, twitter, google-plus

我想创建一个漂亮的 Facebook、Twiter、G+ 分享按钮，就像它们在 Youtube 中一样：

![在此处输入图像描述](../Images/e06079dccf3aaaaf43a53ecaf4988a5a.png)

我得到的是一个不太好的默认按钮：

```
<a name="fb_share" type="icon" share_url="<?php the_permalink(); ?>">

<a href="<?php the_permalink(); ?>" class="twitter-share-button" data-count="none">Tweet</a>

<g:plusone annotation="none"></g:plusone> 
```

![在此处输入图像描述](../Images/844368c51a9ddd4bd96104dc76c34a95.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T07:59:57.330

[http://www.addthis.com/](http://www.addthis.com/)允许您将这些添加到您的站点，而无需自己创建图标。您可以选择在它们上包含分析跟踪，并配置按钮外观的许多方面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:00:45.103

使用“addthis”[在此处](http://jsfiddle.net/jackdent/nJQbh/)查看现场演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T08:00:20.003

我无法回答 google+ 或 twitter，但对于 facebook，你不应该这样做。

为了实现这一目标，您必须使用已被弃用且不再受支持的“facebook 共享器”，如下[所示](http://developers.facebook.com/docs/share/)：

> Share 按钮已被弃用，取而代之的是 Like 按钮，并且将不再受支持。请尽可能使用“赞”按钮为您的应用带来最大流量。

[在](http://developers.facebook.com/docs/reference/plugins/like/)这里：

> **旧的“分享”按钮怎么了？**
> 
> 当我们启动“赞”按钮时，我们弃用了“分享”按钮，因为“赞”按钮允许用户一键连接，并允许他们查看他们的哪些朋友已经连接，从而提高了点击率。

您应该改用“[赞”](http://developers.facebook.com/docs/reference/plugins/like/)或“[发送](http://developers.facebook.com/docs/reference/plugins/send/)”按钮，尽管您无法控制它们的外观（在某种程度上您可以，但不是您的意思）

# javascript - 为什么一秒的长度不正确？

> ID：10119595
> 
> 赞同：4
> 
> 时间：2012-04-12T07:53:39.863
> 
> 标签：javascript, time

我有一个这样的javascript程序：

```
function addtime() {
  curtime = document.getElementById("time").value * 1000;
  curtime += 1;
  document.getElementById("time").value = curtime / 1000;
}
setInterval(function () {
  addtime();
}, 1); 
```

您可能在我的代码中看到我乘以 1000 然后除以 1000，这是因为我想每次增加一毫秒，但在“时间”输出 div 中显示秒数。但是，当我打开其中包含此代码的页面时，如果您理解我的意思，一秒钟实际上并不是“一秒钟”。它目前比正常秒长三倍，我不知道为什么。

那么我的代码有什么问题，我能做些什么来解决它？

谢谢

卢卡斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T07:58:08.000

问题是 JavaScript 不能保证在您指定的准确时间调用 setInterval，而是在该时间过去后第一次有机会调用。此外，在许多（所有？）浏览器的分辨率下，1ms 是 waaaay。

要正确执行此操作，请获取开始时间，然后通过减去当前时间找出经过的毫秒数。

```
var start = new Date();
var update = function() {
    var now = new Date();
    var elapsed = now - start;
    // now you can do something with `elapsed`,
    // like stuff it into the UI
};
setInterval(update, 100); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T08:02:35.103

这是[一个视频](http://www.youtube.com/watch?feature=player_detailpage&v=72wh5PnEf1k#t=2355s)，其中 J. Resig 解释了 JavaScript 如何具有不准确的计时器，在他关于在测试中使用计时器的演示文稿的上下文中。

*“OSX 计时器精确到毫秒。但在 Windows 中，计时器仅每 15 毫秒更新一次。”*

这是 N. Zakas 的[另一篇文章](http://www.nczonline.net/blog/2011/12/14/timer-resolution-in-browsers/)，指出计时器分辨率在某些情况下是不同的，它也取决于浏览器。1ms 的分辨率很快，但它会占用 CPU 处理时间，这就是浏览器将其拉回的原因。据我所知，当标签不在焦点上时，浏览器会降低计时器（以及渲染）。

我在 chrome 中看到了很多，尤其是在慢速 PC 中，在同一页面上一次打开 4 个选项卡，只有焦点中的一个首先*呈现*（顺时针快速图标），而其他人继续加载（逆时针加载图标）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T08:03:55.930

如果您想要一秒的间隔，请设置一秒的间隔，而不是按毫秒增加时间，按秒增加。然后你也可以简化你的值更新代码。

见这里[http://jsfiddle.net/NGTXU/](http://jsfiddle.net/NGTXU/)

```
setInterval(function () {
   document.getElementById("time").value++;
},1000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T08:00:57.877

因为`setInterval`以毫秒为参数，我认为你应该替换`1`为`1000`

```
function addtime() {
  curtime = document.getElementById("time").value * 1000;
  curtime += 1;
  document.getElementById("time").value = curtime / 1000;
}
setInterval(function () {
  addtime();
}, 1000); 
```

# php - 具有发送响应能力的控制器的 Symfony 2 默认操作

> ID：10119597
> 
> 赞同：0
> 
> 时间：2012-04-12T07:53:40.813
> 
> 标签：php, model-view-controller, symfony, controller

我听 kernel.controller 动作来实现我的控制器的默认（或初始化）动作：

```
public function onKernelController(FilterControllerEvent $event)
{
    $controller = $event->getController();

    if (!is_array($controller)) {
        return;
    }

    $currentController = $controller[0];
    if($controller[0] instanceof Initmethod){
        $ret = $currentController->init($event->getRequest());
        if($ret !== null && $ret instanceof Response){
            $ret->send();
            exit();
        }
    }

    $event->setController($controller);
} 
```

如您所见，我想让我的 init 操作能够返回应该发送的响应，而不是被调用的操作之一。之后，不应执行任何其他操作。

我的问题是，我这样做的方式是否正确？因为不想“与框架作斗争”并通过调用 exit 来结束执行似乎并不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:36:56.833

您可以将`init`控制器的方法设置为当前的可调用方法，例如

```
$initController = array($currentController, 'init');
$event->setController($initController); 
```

然后 Symfony 将处理`init`默认控制器方法的方法，如果存在则返回响应。我假设如果`init`方法返回，您想调用默认的控制器方法`null`。在这种情况下，您可以使用反射获取该方法的方法参数，映射函数参数，然后调用该方法。

**编辑：**

看来我误解了你的问题。您想避免其他侦听器操作`kernel.view`，例如`kernel.response`等。我认为您的解决方案还可以。但是，如果您在`init`方法中设置会话变量，它将不会像在事件期间调用的[ContextListener所做的那样保存。](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Http/Firewall/ContextListener.php#L96)`kernel.response`

# facebook-javascript-sdk - Facebook javascript sdk 集成无法正常工作

> ID：10119600
> 
> 赞同：2
> 
> 时间：2012-04-12T07:53:54.310
> 
> 标签：facebook-javascript-sdk, oauth-2.0

我正在开发一个网络应用程序，我不想从 facebook 导入联系人..

我曾多次尝试为 Facebook 包含 javascript，但它对我没有用...

Oauth 对话框来报告错误...

我尝试在 facebook 上访问的同一个 facebook 应用程序显示了访问权限的身份验证对话框，它工作正常..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:22:44.350

如果您期望任何合理的答案，您需要包含您的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T05:45:33.087

问题已解决。

只是配置问题。

网站的 URL 不正确。

# ios - 在IOS中获取图像坐标

> ID：10119602
> 
> 赞同：0
> 
> 时间：2012-04-12T07:54:01.720
> 
> 标签：ios, ios5, ios5.1

> **可能重复：**
> [如何从上传的 iPhone 照片中获取正确的纬度和经度？](https://stackoverflow.com/questions/9319465/how-do-i-get-the-correct-latitude-and-longitude-from-an-uploaded-iphone-photo)

有谁知道如何获得在 IOS 中拍摄图像的坐标。如果您访问 IOS 中的照片应用程序，您可以看到照片的拍摄地点，我想在我的应用程序中加载照片时获取该信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:05:35.490

尝试这个：

```
CLLocation *location = [asset valueForProperty:ALAssetPropertyLocation]; 
```

# jquery - jquery flash和动态变量

> ID：10119606
> 
> 赞同：1
> 
> 时间：2012-04-12T07:54:09.863
> 
> 标签：jquery

我怎样才能包含这个变量而不给我一个错误

变量在 vars 行上是 vid

```
$('.playVideo').live('click',function(z){
            z.preventDefault();//Disable Default Method
            var vid = $(this).attr('data'); 
```

……

```
$('#video').empty().flash({
    "src":"video/videoplayer-loop.swf",
    "width":322,
    "height":275,
    "vars":{"image":"img/video-posterframe-product.jpg","videoLink=player/video/"+vid+".flv","hideAudio1":"false","videoVolume":"50"},

}); 
```

我被抛出

> 未捕获的 SyntaxError：意外的标识符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:59:18.973

变量超出范围，您需要将这`vid`两段代码放在同一个函数中：

```
$('.playVideo').live('click',function(z){
    z.preventDefault();//Disable Default Method
    var vid = $(this).attr('data');

    $('#video').empty().flash({
        "src":"video/videoplayer-loop.swf",
        "width":322,
        "height":275,
        "vars":{"image":"img/video-posterframe-product.jpg", "videoLink=player/video/" + vid + ".flv", "hideAudio1": "false", "videoVolume": "50"},
    });
}); 
```

或者将设置 flash 的代码放入它自己的函数中，并从你的点击处理程序中调用它，传递`vid`变量：

```
$('.playVideo').live('click',function(z){
    z.preventDefault();//Disable Default Method
    var vid = $(this).attr('data');
    setUpFlash(vid);
});

function setUpFlash(video) {
    $('#video').empty().flash({
        "src":"video/videoplayer-loop.swf",
        "width":322,
        "height":275,
        "vars":{"image":"img/video-posterframe-product.jpg", "videoLink=player/video/" + video + ".flv", "hideAudio1": "false", "videoVolume": "50"},
    });
}); 
```

您也可以`vid`全局声明变量，但这不是最佳实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T07:58:39.347

尝试`var vid`在任何函数之外声明

```
var vid;
$('.playVideo').live('click',function(z){
    z.preventDefault();//Disable Default Method
    vid = $(this).attr('data');
    ....
} 
```

# php - 排序逻辑的策略或因素模式

> ID：10119607
> 
> 赞同：1
> 
> 时间：2012-04-12T07:54:13.427
> 
> 标签：php, design-patterns

我正在设计一个类图，我对如何使用排序逻辑感到困惑。

要求：排序逻辑可以

1.  按字段排序1
2.  按字段排序2
3.  按 field1+field2+field3 排序，可以更多。![在此处输入图像描述][1]

解决方案我正在考虑为所有可能的逻辑创建类并在它们之上创建一个接口。

我应该使用哪种模式或工厂模式。

请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:16:55.740

策略模式在这里是最好的，虽然[它的维基百科文章](http://en.wikipedia.org/wiki/Strategy_pattern)是一个很好的参考，但它不是一个好的初学者文章。

简单地说（忽略接口、类型检查等），您为每个潜在的排序算法创建单独的类，然后将其中一个排序类的实例传递给对象的构造函数，以便可以使用它。然后，您的主类将排序操作委托给传入的任何排序器，如下所示：

```
class mainthing {

    public function __construct($sorter) {
        $this->sorter = $sorter;
    }

    public function sort($stufftosort) {
        return $this->sorter->sort($stufftosort);
    }

}

class sorter {
    public function sort($stufftosort) {
        // sorting code here
    }

}

class differentsorter {
    public function sort($stufftosort) {
        // different sorting code here
    }

}

$thing = new mainthing(new sorter());
$thing->sort($somestuff);
$otherthing = new mainthing(new differentsorter());
$otherthing->sort($somestuff); 
```

这个想法是，您可以混合和匹配不同的行为，而不是被束缚在严格的继承层次结构中。也许您还有其他关于这些类的内容应该有所不同，而不仅仅是排序 - 只需通过向构造函数传递一个可以提供该功能的对象来做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:50:13.880

Strategy pattern or visitor pattern is best suited for this. this requirement is very common and so i suggest anyone having good knowledge of class diagram can upload it here

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T12:57:49.807

这里有两件事要考虑，排序算法本身和比较函数。您似乎在使用比较函数，这是一种只知道如何比较列表中的两个项目的策略，排序算法将使用它对列表进行排序。

因此，从概念的角度来看，您将拥有一个`Comparator`带有方法的接口，该方法`compare(a, b)`返回其参数之间的比较结果。这个接口很简单，在大多数情况下一个回调函数就足够了。以[`usort`](http://php.net/manual/en/function.usort.php)函数为例。

# ant - 是否可以将属性的值指定为 ant 中的属性？

> ID：10119611
> 
> 赞同：7
> 
> 时间：2012-04-12T07:55:04.153
> 
> 标签：ant, properties, echo

我有一个属性文件，它是在执行期间由我的 ant 脚本本身生成的。我想从这个生成的属性文件中访问属性的值。

例如，

生成的属性文件：

```
first.prop=abcd
second.prop=pqrs 
```

在脚本中，我试图像这样访问它，

我有一个来自其他属性的属性名称（我想要访问并且在生成的属性文件中）。该属性是`name.prop`。所以，

```
<echo message="${name.prop}"/>
<echo message="${${name.prop}}"/> 
```

给

```
first.prop
${${name.prop}} 
```

分别作为输出。有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T12:17:23.337

这是来自[文档](https://ant.apache.org/manual/properties.html)：

> 大括号的嵌套
> 
> 在其默认配置中，Ant 不会尝试平衡属性扩展中的大括号，它只会在创建属性名称时使用直到第一个右大括号的文本。即当扩展像 ${a${b}} 这样的东西时，它将被翻译成两部分：
> 
> *   属性 a${b 的扩展 - 可能没什么用处。
> *   由第二个右大括号产生的文字 }
> 
> 这意味着您不能轻松地使用由属性给出名称的扩展属性，但是对于旧版本的 Ant 有一些解决方法。使用 Ant 1.8.0 和[props Antlib](https://ant.apache.org/antlibs/props/)，如果您需要这样的功能，您可以将 Ant 配置为使用其中定义的 NestedPropertyExpander。

所以不容易获得。解决方法（使用`<script />`或`<macrodef />`可以[在官方 ant 常见问题解答](https://ant.apache.org/faq.html#propertyvalue-as-name-for-property)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-22T07:29:33.050

```
I tried this, to get similar values<br/>
prop.properties contains:

a=val1
b=val2
c=val3
batch.props=a,b,c

<for list="${batch.props}" param="prop">
  <sequential>
    <echo>@{prop} is ${batch.@{prop}}</echo>
  </sequential>
</for>

Got Ans as below:
a is val1
b is val2
c is val3

Enjoy! 
```

# maven - 如何在我的部署中设置文件权限？

> ID：10119614
> 
> 赞同：2
> 
> 时间：2012-04-12T07:55:10.593
> 
> 标签：maven, maven-3

我见过[这个问题](https://stackoverflow.com/questions/1056403/how-do-i-set-file-permissions-in-maven-pom-file)，但答案并不能完全解释这项技术。

在服务器上运行 maven 后，我从目标目录运行我的应用程序。

我有一个文件夹（/src/main/webapp/WEB-INF/scripts），在运行 maven 后，它会被复制到目标目录（/target/[project]/WEB-INF/scripts）。

我需要确保此目录中的所有文件（递归）都获得可执行权限。

没有蚂蚁我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:36:40.727

您可以尝试将程序集插件放入预打包阶段并将文件复制到 target/classes/... 文件夹（我不确定文件夹的确切名称）并在复制期间通过程序集插件，您可以更改权限。战争插件将拾取文件并将它们打包到战争中。我不确定这是否完美。我从来没有尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-15T16:50:46.413

您可以在 pom.xml 的“prepare-package”阶段使用“exec-maven-plugin”和“chmod”可执行文件：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <version>${org.codehaus.mojo.version}</version>
    <executions>
       <execution>
            <id>chmod</id>
            <phase>prepare-package</phase>
            <goals>
                <goal>exec</goal>
            </goals>
            <configuration>
                <executable>chmod</executable>
                <arguments>
                    <argument>+x</argument>
                    <argument>${project.build.directory}/[project]/WEB-INF/scripts/myscript.sh</argument>
                </arguments>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

它对我有用。我想将 exec 权限放在从源复制到目标/类的二进制文件上。

# hadoop - 一起使用 MRUnit 和 AVRO

> ID：10119616
> 
> 赞同：1
> 
> 时间：2012-04-12T07:55:30.177
> 
> 标签：hadoop, avro

我创建了一个 Mapper & Reducer，它使用 AVRO 作为输入，map-output 和 reduce 输出。创建 MRUnit 测试时，我得到以下堆栈跟踪：

```
java.lang.NullPointerException
at org.apache.hadoop.io.serializer.SerializationFactory.getSerializer(SerializationFactory.java:73)
at org.apache.hadoop.mrunit.mock.MockOutputCollector.deepCopy(MockOutputCollector.java:74)
at org.apache.hadoop.mrunit.mock.MockOutputCollector.collect(MockOutputCollector.java:110)
at org.apache.hadoop.mrunit.mapreduce.mock.MockMapContextWrapper$MockMapContext.write(MockMapContextWrapper.java:119)
at org.apache.avro.mapreduce.AvroMapper.writePair(AvroMapper.java:22)
at com.bol.searchrank.phase.day.DayMapper.doMap(DayMapper.java:29)
at com.bol.searchrank.phase.day.DayMapper.doMap(DayMapper.java:1)
at org.apache.avro.mapreduce.AvroMapper.map(AvroMapper.java:16)
at org.apache.avro.mapreduce.AvroMapper.map(AvroMapper.java:1)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
at org.apache.hadoop.mrunit.mapreduce.MapDriver.run(MapDriver.java:200)
at org.apache.hadoop.mrunit.mapreduce.MapReduceDriver.run(MapReduceDriver.java:207)
at com.bol.searchrank.phase.day.DayMapReduceTest.shouldProduceAndCountTerms(DayMapReduceTest.java:39) 
```

驱动程序初始化如下（我创建了一个 Avro MapReduce API 实现）：

```
 driver = new MapReduceDriver<AvroWrapper<Pair<Utf8, LiveTrackingLine>>, NullWritable, AvroKey<Utf8>, AvroValue<Product>, AvroWrapper<Pair<Utf8, Product>>, NullWritable>().withMapper(new DayMapper()).withReducer(new DayReducer()); 
```

使用 io.serialization 添加配置对象无济于事：

```
 Configuration configuration = new Configuration();
    configuration.setStrings("io.serializations", new String[] {
        AvroSerialization.class.getName()
    });
    driver = new MapReduceDriver<AvroWrapper<Pair<Utf8, LiveTrackingLine>>, NullWritable, AvroKey<Utf8>, AvroValue<Product>, AvroWrapper<Pair<Utf8, Product>>, NullWritable>().withMapper(new DayMapper()).withReducer(new DayReducer()).withConfiguration(configuration); 
```

我使用来自 Cloudera 的 Hadoop 和 MRUnit 0.20.2-cdh3u2 和 Avro MapRed 1.6.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:16:39.827

您正在获得 NPE，因为 SerializationFactory 没有在 io.serializations 中找到实现序列化的可接受类。

除了 Writable 之外，MRUnit 还有几个与序列化相关的错误，包括 https://issues.apache.org/jira/browse/MRUNIT 上的 MRUNIT-45、MRUNIT-70、MRUNIT-77、MRUNIT- [86](https://issues.apache.org/jira/browse/MRUNIT)。这些错误涉及 conf 没有正确传递给 SerializationFactory 构造函数，或者代码需要来自所有 Writable 具有的 Key 或 Value 的默认构造函数。所有这些修复都出现在 Apache MRUnit 0.9.0-incubating 中，该版本将于本周某个时间发布。

Cloudera 的 0.20.2-cdh3u2 MRUnit 接近 Apache MRUnit 0.5.0-incubating。我认为即使在 0.9.0-incubating 中，您的代码可能仍然存在问题，请将您的完整代码示例通过电子邮件发送至 mrunit-user@incubator.apache.org，Apache MRUnit 项目将很乐意查看它

这将现在编译[MRUNIT-99](https://issues.apache.org/jira/browse/MRUNIT-99)放宽对 K2 类型参数的限制不必是 Comparable

# java - 如何将默认 WAS 自由服务器端口 9080 更改为 RAD 中的其他端口号？

> ID：10119617
> 
> 赞同：1
> 
> 时间：2012-04-12T07:55:41.127
> 
> 标签：java, websphere, port, application-server, websphere-liberty

当我使用 WAS Liberty Profile V8.5 beta 时，我无法在 RAD 中找到更改默认服务端口 9080 的任何地方，我尝试在 server.xml 中添加 httpendpoint 部分，liberty 服务器报告配置更新成功，但运行 web 时失败应用。

有谁知道如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T05:00:29.163

测试版中有一个错误，导致服务器重新启动时无法保留某些端口更改。有一个论坛线程讨论缓存端口值的问题，答案是使用 --clean 选项（从命令行）启动服务器，当您通过工具启动服务器时，有一个等效的复选框可用。

[1] [https://www.ibm.com/developerworks/forums/thread.jspa?messageID=14770100](https://www.ibm.com/developerworks/forums/thread.jspa?messageID=14770100)

我会从那里开始。

# html - JBoss - 如何为爆炸的战争目录设置固定名称？

> ID：10119620
> 
> 赞同：0
> 
> 时间：2012-04-12T07:55:54.327
> 
> 标签：html, jsp, jboss

是否可以将 JBoss 配置为 tmp 目录中存在的爆炸战争的固定目录名称？每次重新启动时，爆炸的战争目录名称更改都会附加一个随机字符串。

在 JBoss 6 中，我们的 war 文件 my-project.war 具有以下结构：

JBOSS_HOME\server\default\tmp\vfs\automount8sc4d112587f64c\my-project.war-98eea116d17f4a53

我想要的是：我们可以为所有重新启动和部署修复上述路径名吗？

因此，我们无法在我们的文本编辑器中为 jsp/html/js/css 文件添加书签。

在 WebLogic 服务器中，所有重新启动和部署都有一个固定的目录结构。对于快速 HTML/CSS/JavaScript 编码非常方便。我们可以在 JBoss 中拥有类似的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T08:04:41.717

您正在尝试引用应用程序服务器*解压缩*战争文件等的 jboss的*临时目录。*

 *尝试解压缩您的战争文件，命名文件夹`<your-project>.war`并将其移动到部署文件夹。除非 jboss 不需要解包，否则文件（HTML/CSS/JavaScript）应该从这个地方交付。*

# c - 取消或杀死一个 pthread

> ID：10119623
> 
> 赞同：2
> 
> 时间：2012-04-12T07:56:24.247
> 
> 标签：c, multithreading, pthreads

```
gcc (GCC) 4.6.3
valgrind-3.6.1 
```

我创建了一个应用程序，它在 2 个不同的线程中发送和接收一些消息，用于发送和接收。对锁使用 pthread、条件变量和互斥锁。

但是，发送者将发送消息，然后向接收者发出信号以接收并处理它。它在一个while循环中执行此操作。

但是，如果我想通过使用 ctrl-c 并处理中断来退出应用程序，则会出现问题。如果没有消息被发送，那么接收者就会陷入等待接收的 while 循环中。

主线程将调用 join 并阻塞等待接收者完成。但它不像它在等待`pthread_cond_wait`。

我正在考虑使用`pthread_cancel`or `pthread_kill`。但我不喜欢这样做，因为它不允许线程正常退出。

非常感谢您的任何建议。

**主功能**

```
 void main(void)
    {
        /* Do some stuff here */

    /* Start thread that will send a message */
    if(pthread_create(&thread_recv_id, &thread_attr, thread_recv_fd, NULL) == -1) {
        fprintf(stderr, "Failed to create thread, reason [ %s ]",
            strerror(errno));
            break;
        }
        printf("Start listening for receiving data'\n");

        /* Start thread to receive messages */
        if(pthread_create(&thread_send_id, &thread_attr, thread_send_fd, NULL) == -1) {
            fprintf(stderr, "Failed to create thread for receiving, reason [ %s ]",
                    strerror(errno));
            break;
        }

    /* Clean up threading properties */
    pthread_join(thread_send_id, NULL);
    pthread_join(thread_recv_id, NULL); <---- blocking here waiting for the recv thread to finish

    pthread_mutex_destroy(&mutex_queue);
    pthread_cond_destroy(&cond_queue);

    return 0;
} 
```

**发件人线程**

```
void *thread_send_fd()
{
        pthread_mutex_lock(&mutex_queue);
        if(send_fd((int)fd) == FALSE) {
            /* Just continue to send another item */
            continue;
        }
        /* Signal the waiting thread to remove the item that has been sent */
        pthread_cond_signal(&cond_queue);

        pthread_mutex_unlock(&mutex_queue);
} 
```

**接收线程**

```
void *thread_recv_fd()
{
    while(is_receiving()) {
        pthread_mutex_lock(&mutex_queue);

        /* Wait for an item to be sent on the queue */
        pthread_cond_wait(&cond_queue, &mutex_queue); <---- waiting here

        queue_remove();
        pthread_mutex_unlock(&mutex_queue);
    }

    pthread_exit(NULL);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T08:09:05.917

你基本上有3个选择：

1.  使用`pthread_cancel`. 这将中断`pthread_cond_wait`调用，然后退出线程，调用`pthread_cleanup_push`向上注册的取消处理程序。

2.  用于`pthread_kill`向**线程发送信号**。这不会“杀死”线程，它只是发送一个信号。在这种情况下，您必须在该线程中为您使用的信号注册了一个信号处理程序，并且该信号处理程序必须做一些事情来告诉线程退出。这并不比第三个选项特别好，因为信号处理程序仍然需要做一些事情来使`pthread_cond_wait`循环退出。

3.  向您的线程添加一个手动中断功能，该功能知道设置标志并向条件变量发出信号。如果设置了标志，则循环`pthread_cond_wait`应该检查标志并退出线程。

我会推荐（1）或（3）。using`pthread_cancel`是最通用的，但需要在线程中仔细处理，以确保有合适的`pthread_cleanup_push`调用来清理线程分配的所有资源、解锁所有互斥锁等等。编写手动中断功能可能需要更多工作，但可以最轻松地针对您的应用程序进行定制。

# couchdb - 如何使用 Elastic Search River 索引 CouchDB：简而言之

> ID：10119626
> 
> 赞同：4
> 
> 时间：2012-04-12T07:56:26.307
> 
> 标签：couchdb, elasticsearch

我真的不知道我的配置发生了什么，但我只是无法在索引后查询任何内容（甚至不知道我是否正确地执行了索引部分）。有人可以告诉我以下每一项的含义和应该是什么？

我有一个名为`bestdb`. 在这个数据库中，我有文档类型，例如`product`和`customer`。

现在我安装了弹性搜索版本 0.18.7 和相应的 couchdb 河。我开始弹性搜索和couchdb。我将 elasticsearch 的 network.host 设置为 ip 地址： 10.0.0.129 。我按照[教程](http://www.elasticsearch.org/tutorials/2010/08/01/couchb-integration.html)中的说明进行操作：

```
curl -XPUT '10.0.0.129:9200/_river/{A}/_meta' -d '{
    "type" : "couchdb",
    "couchdb" : {
        "host" : "localhost",
        "port" : 5984,
        "db" : "bestdb",
        "filter": null
    },
    "index" : {
        "index" : "{B}",
        "type" : "{C}",
        "bulk_size" : "100",
        "bulk_timeout" : "10ms"
    }
}' 
```

{A}：这是什么？我的理解是，这只是一个内部弹性搜索索引，对吧？它不是用于查询或搜索的吗？所以这可以是任何名字吗？

{B}：这个索引是什么？这与上面的有什么不同？在我的场景中这个值应该是什么？

{C}：这是否与 couchdb 中的文档类型有关，比如`product`或`customer`？

在线教程只是将所有内容设置为相同的值。如果我想查询所有产品文档或客户文档，我的 curl 语句会是什么样子？

感谢任何为我解决问题的人。

问候， 马克·黄

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:44:31.550

kimchy 的文档常常给人以想象。:-)

**A**是河流名称。一条河流只是一个 ES 文档，存储在一个名为 的索引`_river`、一个名为任何你想要的类型的类型和一个 doc id`_meta`中。

**B** & **C**是`index/_type`你的`bestdb`couchdb _changes 流将被索引到的本地。这些可以被您的 couchdb 文档中的字段`_index`覆盖。`_type`如果以上都没有提供，它们将默认为您的 couchdb instance name `bestdb/bestdb`。

# java - 使用动作监听器隐藏和显示 java 桌面应用程序

> ID：10119629
> 
> 赞同：2
> 
> 时间：2012-04-12T07:56:37.117
> 
> 标签：java, swing, jsr296

我有一个用 netbeans 编写的 java 桌面应用程序。我所做的是听窗户关闭并最小化到托盘。我在 myApp.java 中添加了一个启动方法的监听器，它监听窗口关闭然后隐藏 myAppView。

我在任务栏中创建了一个图标托盘，我想打开以前的同一个框架。我将 appView 声明为全局变量，但可以显示（myapp），因为它说它是静态的。知道如何让它工作吗？

```
public class myApp extends SingleFrameApplication {
    private myAppView mainv;

    @Override protected void startup() {
        mainv=new myAppView(this);
        show(mainv);
        addExitListener(new ExitListener() {

           public boolean canExit( EventObject event ) {
              systray();
              hide(mainv);

              return false;
           }

        public void willExit( EventObject arg0 ) {
            throw new UnsupportedOperationException("Not supported yet.");
        }
    });
}

/**
 * This method is to initialize the specified window by injecting resources.
 * Windows shown in our application come fully initialized from the GUI
 * builder, so this additional configuration is not needed.
 */
@Override protected void configureWindow(java.awt.Window root) {

}

/**
 * A convenient static getter for the application instance.
 * @return the instance of find4me
 */
public static myApp getApplication() {
    return Application.getInstance(myApp.class);
}

/**
 * Main method launching the application.
 */
public static void main(String[] args) {
    launch(myApp.class, args);
} 
```

# java - Android+Java 中的 Chord 实现

> ID：10119630
> 
> 赞同：1
> 
> 时间：2012-04-12T07:56:37.613
> 
> 标签：java, android, dht, chord

这是问题所在。我正在 Android 中实现 Chord DHT。我已经在 5554 启动了服务器（不完全是服务器），这就是每个新节点请求加入圆圈的地方。现在我比较新节点的标识符哈希和哈希节点在 5554 并更新两个节点的后继和前任。我一直在正确地做这件事。

现在我的问题是，如果另一个节点进来，我必须相应地更新 3 个节点中的前任和后继节点。如何更新这些？我用java。我不是在问代码。我只是在问实现这一点的逻辑。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:26:12.097

您应该实现 stable() 方法，并定期调用它。可能会定期和/或在环的拓扑发生变化之后。我自己也实现了获取节点对其前身的想法的方法（它在 stable() 方法中使用）。但是，如果您还没有，您应该查看其他[实现。](http://pdos.csail.mit.edu/chord/faq.html#lang)

# javascript - 在特定情况下向 PHP 开发人员解释 nodejs 的开发风格

> ID：10119632
> 
> 赞同：5
> 
> 时间：2012-04-12T07:56:41.860
> 
> 标签：javascript, node.js, web-applications

我是一名 PHP Web 应用程序开发人员，使用 CodeIgniter 使用 PHP 构建了多个大型项目。PHP 一直都能完成这项工作，但现在我正在开发一个新项目，我正在使用客户端的 javascript extjs4 框架构建该项目。我对有经验的 nodejs 开发人员有一些问题。

在我最近的 PHP 项目中，用户登录请求需要我的服务器对 Facebook 进行 API 调用。为了提高可扩展性，我处理这个问题的方式是，我的客户端会发出初始登录请求，服务器会将请求传递给“gearman”作业排队服务器，后台工作进程将获取作业并执行 API 调用。同时，服务器会回复客户端，然后客户端的浏览器将开始使用 AJAX 轮询服务器以查看作业是否已完成。（哦，我通过 memcached 将 Facebook API 调用的结果从 worker 传递到应用程序服务器）。我这样做是为了释放我的应用程序服务器来处理来自用户的更多并发请求，因为 PHP 处于锁定状态并且 Facebook API 调用需要几秒钟。

我的问题是，由于 nodejs 是非锁定的，因此整个应用程序服务器模型、gearman 作业队列服务器和后台工作人员对 nodejs 开发是否有意义？我是否会简单地接受来自客户端的 ajax 请求以登录，从应用程序服务器调用 facebook API 并等待它的响应（同时处理其他用户的请求，因为 nodejs 是非锁定的）然后回复用户？

为了能够利用令人敬畏的heroku环境，我也在考虑进入nodejs开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T17:05:11.023

简短的回答是肯定的，您通常在节点系统中处理此问题的方式正是您描述它的方式。

因为节点是非阻塞的，所以事件循环一直在寻找可操作的请求。这是一个使用[node-facebook-client](https://github.com/DracoBlue/node-facebook-client)的示例（为与 facebook API 一起使用而构建的许多[npm模块之一）](https://npmjs.org)

```
 console.log('start');

  client.graphCall(path, params, method)(function(result) {
    // fires whenever request is completed
    console.log('facebook returned');
  });

  console.log('end'); 
```

输出

```
 start
  end
  facebook returned 
```

正如你可以想象的那样，这基本上就是节点的所有大惊小怪（而且它真的非常快）。也就是说，这也是节点的学习曲线——异步执行。如果 'end' 需要在 'facebook 返回' 之后出现，那么你必须把它放在回调中

```
 console.log('start');

  client.graphCall(path, params, method)(function(result) {
    // fires whenever request is completed
    console.log('facebook returned');
    console.log('end');
  }); 
```

此外，在需要时将动态子进程集成到您的应用程序中是基本的，*包括额外的节点进程*。来自官方[文档](http://nodejs.org/api/child_process.html)：`child_process.fork`

> ```
> var cp = require('child_process');
> 
> var n = cp.fork(__dirname + '/sub.js');
> 
> n.on('message', function(m) {
>   console.log('PARENT got message:', m);
> });
> 
> n.send({ hello: 'world' }); 
> ```

然后子脚本“sub.js”可能如下所示：

```
 process.on('message', function(m) {
   console.log('CHILD got message:', m);
 });

 process.send({ foo: 'bar' }); 
```

在子进程中，进程对象将有一个 send() 方法，并且进程每次在其通道上接收到消息时都会发出对象。

# android - Android 如何使用 KSoap 发送大量数据

> ID：10119636
> 
> 赞同：0
> 
> 时间：2012-04-12T07:57:07.440
> 
> 标签：android, ksoap2

有什么方法可以将大量数据编码为基于 64 的字符串？将数据转换为字符串时会引发“内存不足”异常。

干杯，石头

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:32:40.143

显然，甚至在 ksoap 参与之前，您就已经超出了内存边界。转换为 base64 字符串时，您的数据太大了。如果你不能减少传输的数据量，你应该切换到一些流技术——比如在不分配字符串的情况下将 base64 数据写入流/socked。或者将您的数据分割成可管理的部分。或者重新考虑您的服务架构

# dojo - 2个道场基础网址

> ID：10119638
> 
> 赞同：0
> 
> 时间：2012-04-12T07:57:12.077
> 
> 标签：dojo, require

我正在使用托管在 google 的 CDN 上的 dojo，这意味着 google 的 cdn 是 dojo 的基本 url 路径。但是我的服务器上有我想用 dojo.require 加载的文件。我怎样才能做到这一点？目前我收到一个错误，它无法访问该文件，但那是因为它在谷歌的 CDN 上不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:10:05.100

您可以配置 at`data-dojo-config`或 in`djConfig`

通过设置`baseUrl`和`modulePaths`

这个链接会有所帮助。[http://dojotoolkit.org/documentation/tutorials/1.6/cdn/](http://dojotoolkit.org/documentation/tutorials/1.6/cdn/)

# mercurial - 如何在提交标签之前提交文件？

> ID：10119646
> 
> 赞同：3
> 
> 时间：2012-04-12T07:57:47.640
> 
> 标签：mercurial, mercurial-hook

我想在使用`hg tag XXX`.

我已经在我的 hgrc 中设置了一个 pretag 钩子（注意：为了清楚起见，我已经删除了确保它输出到 hg root 中的 VERSION 的东西）：

```
[hooks]
pretag.bump_version = (echo "$HG_TAG" > VERSION; hg commit -m "Updated VERSION to $HG_TAG" VERSION) 
```

当我创建一个新标签时：

```
$ hg tag 1.1 
```

我得到错误：

```
warning: ignoring unknown working parent <revision_id>! 
```

我可以改用标签挂钩，它成功了，但是 VERSION 号恰好比标签晚一个修订：这意味着更新到标记的修订，然后构建将导致产品的版本号（这取决于 VERSION文件）将是不正确的。

有没有更好的方法来处理这个？我看过[SO question #2558531](https://stackoverflow.com/questions/2558531/how-good-is-my-method-of-embedding-version-numbers-into-my-application-using-mer)，但每次都更新版本号：我只想在标记存储库*之前更新版本号。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:39:27.813

切换到 a`pre-tag`而不是`pretag`hook。钩子`pretag`是一个特殊的钩子，它知道你正在标记。相比之下，`pre-tag`钩子是一个通用`pre-*`钩子，它在标记命令启动之前运行并且完全不知道它正在标记——这意味着它也更早地运行。（所有东西都有 pre-* 钩子，比如说，`pre-log`）。

我让你的例子像这样工作：

```
[hooks]
pre-tag.bump_version = echo $HG_ARGS > VERSION; hg commit -m "updated version to $HG_ARGS" VERSION 
```

仅使用如下所示的命令行：

```
ry4an@ry4an:~$ hg init tagtest
ry4an@ry4an:~$ cd tagtest
ry4an@ry4an:~/tagtest$ echo text > VERSION
ry4an@ry4an:~/tagtest$ hg commit -A -m initial
adding file
ry4an@ry4an:~/tagtest$ hg tag --config hooks.pre-tag='echo $HG_ARGS > VERSION; hg commit -m "updated version to $HG_ARGS" VERSION' 1.1 
```

请注意，我必须将参数切换为，`$HG_ARGS`因为它是一个`pre-*`不知道我们正在标记的命令。详细信息在`hgrc`手册页中。

另请注意，`VERSION`当我通过明确命名挂钩时，我只提交文件。您不希望仅仅因为您标记了而意外地提交了一堆您从先前提交中排除的调试内容。

# javascript - 使用重叠 div 显示附加信息。jQuery

> ID：10119651
> 
> 赞同：3
> 
> 时间：2012-04-12T07:58:08.240
> 
> 标签：javascript, jquery, css, html, overlap

我想在 div 上显示其他内容/文本。看看小提琴：http: [//jsfiddle.net/P6JGY/132/](http://jsfiddle.net/P6JGY/132/)。还没有文字。但这不是问题。

我正在使用代码，虽然我可以切换`h2`/`h1`类，

```
$('#container .item.w1.h1').toggle(
    function() {
        $(this).css(
            {"height": "110px", "background": "black"}
        );
    },
    function() {
        $(this).css(
            {"height": "50px", "background": "#CCC"}
        );
    }
); 
```

起初我想要获得的是 `div .item.w1.h1' 来重叠它的下邻居。正如你现在所看到的，它正在低于它的邻居）我怎么解决这个问题。

我正在考虑的更高级的事情是，除了第一件事之外，如何制作角落 'div .item.w1.h1' div，以便在单击时向父容器的中心增长/应用上述描述..

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:09:27.893

将 z-index 添加到 css 函数。[http://jsfiddle.net/P6JGY/133/](http://jsfiddle.net/P6JGY/133/)

```
 $('#container .item.w1.h1').toggle(
    function() {
        $(this).css(
            {"height": "110px", "background": "black", 'z-index':'10'}
        );
    },
    function() {
        $(this).css(
            {"height": "50px", "background": "#CCC", 'z-index':'0'}
        );
    }
); 
```

# android - android- 在 android 设置菜单中添加新活动

> ID：10119652
> 
> 赞同：1
> 
> 时间：2012-04-12T07:58:12.993
> 
> 标签：android

我想在 android 手机设置中添加我的应用程序活动之一，它具有其他设置，如应用程序、呼叫设置、显示、声音、日期和时间等。
前单击 MENU->Settings->CardSettings。我该如何添加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:01:27.507

我不认为你有任何权限这样做。我认为这不可能添加到原生手机中。

您可以通过设置帮助程序类创建与系统设置相同的设置，但它们将成为您的应用程序的一部分，而不是系统设置菜单的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T08:03:33.597

您无法在手机设置中添加旅游活动。你可以注册你想要的应用程序（铃声提供者、短信发送者/接收者等）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T08:32:13.860

不，除非您继续通过自定义 android 源代码本身来构建自己的操作系统，否则这不可能是您想要的方式。

您仍然可以设置您的活动并尝试使用

> android.settings.SOUND_SETTINGS

或类似的。基本上它应该调用意图选择器，将您的活动作为一个选项，但就放入新的东西而言，定制操作系统是唯一的选择......就像您要求将您的应用程序活动放在其他人的应用程序中......它不会那样工作的人:)

# css - 菜单和搜索自动完成的下拉菜单在 IE 中不起作用

> ID：10119654
> 
> 赞同：0
> 
> 时间：2012-04-12T07:58:32.000
> 
> 标签：css, internet-explorer, drop-down-menu

我刚刚在[www.hcmc.com](http://www.hcmc.com)建立了一个新网站。

它在 Chrome、Safari、Firefox 中效果很好，但在 IE 中效果不佳（惊喜！）。

我要解决的问题是：

1.  顶部导航菜单的下拉菜单在 IE 7 和 8 中不起作用

2.  搜索框的自动完成下拉菜单在 IE 7、8 和 9 中不起作用（尝试输入“pizza”）

我尝试过使用 z-index，但只是没有让它工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:36:33.853

嗨，这不是您问题的实际解决方案，但我只是探索我的一面。使用 HTML5 BOILERPLATE 解决了浏览器兼容性问题。您可以组合 Twitter Bootstrap + html5 样板。

1) [http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)
2) [http://html5boilerplate.com](http://html5boilerplate.com)。[您可以使用http://www.initializr.com/](http://www.initializr.com/)
将两者结合起来

对于搜索框
.searchbox {
background-color: transparent;
边框：0 无；
颜色：#000000；
显示：块；
向左飘浮;
字体：13px/22px arial,calibri,sans-serif;
缩放：1；
*显示：内联；
}

尝试这个。

# jsf-2 - 错误：该命名空间不存在标记库

> ID：10119656
> 
> 赞同：0
> 
> 时间：2012-04-12T07:58:39.660
> 
> 标签：jsf-2, facelets, netbeans-7

我正在尝试使用 Netbeans 使用 facelets 制作 Web 应用程序。我想使用 Icefaces 作为我的小部件。我收到以下错误消息警告：此页面调用 XML 命名空间[http://www.icefaces.org/icefaces/components](http://www.icefaces.org/icefaces/components)声明，前缀为 ace，但该命名空间不存在标记库。

并且控件没有出现。我有一个最简单的文件

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ace="http://www.icefaces.org/icefaces/components"
xmlns:ice="http://www.icesoft.com/icefaces/component"
>
<head>
    <title>Shalom Elias</title>
</head>
<body>
<h:form id="form">
    Shalom
    <ace:dateTimeEntry id="date1" value="#{backing.date1}" renderAsPopup="true"/>
</h:form>
</body>
</html> 
```

web.xml 看起来像

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>
<context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
</context-param>
<context-param>
    <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
    <param-value>true</param-value>
</context-param>
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>welcome.jsf</welcome-file>
</welcome-file-list> 
```

我认为 taglibrary 应该在 icefaces-compat.jar 中，它应该是类路径。顺便说一句，我使用了 ace:，但 ice: 有完全相同的问题。不幸的是，作为一个新用户，我无法上传我的目录结构的快照，但 jar 文件位于 web/WEB-INF/classes 下，这在我看来是合乎逻辑的。

问题是：缺少什么？？？

谢谢，伊兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:35:53.803

将 icefaces jar 文件放入：

```
WEB-INF/lib 
```

而不是 WEB-INF/classes 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-11T00:33:38.277

将**icefaces-ace.jar**文件放入：

`WEB-INF/lib`

而不是`WEB-INF/`类文件夹。

享受！

# ruby-on-rails - Ruby on Rails 托管：Heroku 的 dynos 和 worker 与 VPS 的 RAM 相比如何？

> ID：10119661
> 
> 赞同：2
> 
> 时间：2012-04-12T07:59:02.103
> 
> 标签：ruby-on-rails, heroku, vps

目前我正在使用 Heroku 并且从未部署到 VPS，关于[欧洲的 VPS 价格](http://www.hetzner.de/en/hosting/produkte_vserver/vq7)应该便宜很多。

在 Heroku 上，我的应用程序需要 9 个测功机和 2 个工人。我对在 VPS 上托管我的 Ruby on Rails 应用程序需要多少服务器资源感兴趣，具有以下服务器配置：

*   ubuntu
*   nginx
*   独角兽
*   PostgreSQL
*   雷迪斯
*   内存缓存

另外，我可以将后三个放在同一个 VPS 实例上，还是分开托管数据库和 memcached 是更好的做法？

有什么方法可以自己计算服务器要求吗？

例如，我可以将具有 7.2 GHz、3GB RAM 和 50GB 存储的 VPS 与多少测功机/工人进行比较？这对我的应用程序来说足够了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:21:08.993

作为一般的经验法则，一旦您超越了一些测功机和后台进程，VPS 的成本与 Heroku 的成本将权衡 VPS 的青睐。

但是，实际托管的成本并不是您唯一的成本。例如，VPS 需要您自己进行一些管理工作，无论是设置、软件安装和配置，还是保持最新状态和平稳运行。请注意，这不包括学习如何做所有这些事情。

一旦你考虑到这些成本（假设你是为付费客户工作而不是为了好玩），答案就在 Heroku 身上——没有其他同样成熟的平台可以让你直接启动并忘记部署——光是节省时间就值得了。

[http://neilmiddleton.com/why-heroku-is-a-game-changer/](http://neilmiddleton.com/why-heroku-is-a-game-changer/)

# javascript - 找到真正的父元素

> ID：10119664
> 
> 赞同：1
> 
> 时间：2012-04-12T07:59:08.940
> 
> 标签：javascript, jquery

我有一个 iframe 用完的网站。

要注销，我使用 URL 运行以下 JavaScript，这可以正常工作。

```
 window.parent.location.href 
```

我发现有时如果我没有正确退出站点然后重新连接我最终会得到 2 个 iframe（可能更多）。

有没有办法让以下 JavaScript 找到所有潜在 iframe 的最外层（真正的父级）？

```
 window.parent.location.href 
```

我想确保无论存在多少 iframe，重定向仍然会发生。

任何建议都会很棒... thx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:10:14.507

使用[window.top](https://developer.mozilla.org/en/DOM/window.top)而不是`window.parent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:12:08.863

```
topParent = window;

while (topParent.parent) {
    topParent = topParent.parent; 
}

// do whatever you want on topParent 
```

# php - 检查数据库中是否存在数据

> ID：10119665
> 
> 赞同：2
> 
> 时间：2012-04-12T07:59:09.217
> 
> 标签：php, mysql, optimization

检查所需数据是否在数据库中的正确方法是什么？

我目前使用的是，

`mysql_query("SELECT anyfield FROM table WHERE field='$data'");`

然后检查是否有任何行受到影响。

但我真的对提取的数据没有任何用处`anyfield`。尽管这里的资源使用量很小，但是在不从表中提取任何其他字段的情况下检查数据库中是否存在数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T08:12:56.593

让数据库计数并从查询中检索计数数据。

```
$result = mysql_query('SELECT COUNT(*) FROM `table` WHERE `field` = ...');
if (!$result) {
    die(mysql_error());
}
if (mysql_result($result, 0, 0) > 0) {
    // some data matched
} else {
    // no data matched
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T08:08:38.023

```
$result = mysql_query("SELECT `field` FROM `table` WHERE `field` = '".$data."'");
if (mysql_num_rows($result)){
    // Rows exist
} 
```

或者

```
$result = mysql_query("SELECT COUNT(`field`) as count FROM `table` WHERE `field` = '".$data."'");
$row = mysql_fetch_array($result);
if ($row ['count']){
    // Rows exist
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T08:18:11.003

如果我正在检查数据，我会确保尽可能少地返回数据。

获取一个字段（我通常这样做`id`）并确保您使用`LIMIT`，例如。`LIMIT 1`...假设您只想知道是否存在*任何*记录。

因为您正在使用 PHP 变量来查找记录，所以如果它适合您的情况，您也许可以`LEFT JOIN`在得到 的第一条 SQL 行上执行 a `$data`，但这对于您需要的东西来说可能很容易过分。

# iphone - 如果磁盘空间不足，如何中止 deb 包的安装

> ID：10119669
> 
> 赞同：0
> 
> 时间：2012-04-12T07:59:22.653
> 
> 标签：iphone, jailbreak, deb, dpkg

我正在为 iPhone 开发越狱程序。当磁盘空间不足时，安装仍然会继续，因此部分文件被复制，而其他文件没有，这使磁盘变脏。

我在 preinst 和 prerm 脚本中编写了磁盘空间检查代码，它们是 deb 包的控制文件。当磁盘空间不足时，控制脚本将以非零代码退出。但问题是，当我们升级一个包时，如果磁盘空间不够，即使 prerm 脚本以非零状态退出，dpkg 仍然会删除旧文件，因此升级变成了删除，这不是我期望的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:58:48.553

我对 Cydia 不太了解，但如果它的工作原理与 dpkg 完全一样，那么这应该是可以解决的。[请参阅http://people.debian.org/~srivasta/MaintainerScripts.html#sec-3.4.3](http://people.debian.org/~srivasta/MaintainerScripts.html#sec-3.4.3)上的软件包升级活动图。

这显示了在运行 prerms 和 preinsts 的过程中可以采取的一些不同的路径，这些路径将系统引导回一个干净的、仍然安装的旧版本状态。例如，如果 new-preinst 失败，则 new-postrm 将以“abort-upgrade”作为参数运行。如果成功，那么 old-postinst 也会使用“abort-upgrade”运行。如果成功，您将回到干净的安装状态。

# php - strtotime（PHP日期函数）的算法如何工作？

> ID：10119671
> 
> 赞同：5
> 
> 时间：2012-04-12T07:59:27.237
> 
> 标签：php, algorithm, date, time, persian

1.  我想知道***strtotime*** （php 日期函数）是如何工作的？
2.  如何将“ *2012 年 9 月 15 日*”之类的字符串解析为时间戳
3.  有没有更好的算法？

我的目的是改变波斯语的这个功能

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T08:12:10.963

您可以浏览 PHP 的源代码（[https://github.com/php/php-src](https://github.com/php/php-src)）并搜索功能以查看其实现。

**更新**

这里是函数strtotime()的算法[https://github.com/php/php-src/blob/master/ext/date/php_date.c#L1324](https://github.com/php/php-src/blob/master/ext/date/php_date.c#L1324)

问候！。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T08:06:25.233

由于*strtotime*接受英文输入，我建议采用波斯输入：“15 (SOMETHING_PERSIAN) 2012”并替换所需的字符串（我猜你需要一些 RegExp 和 switch 语句）并将其设为“15 (SOMETHING_ENGLISH) 2012”然后将其发送到*strtotime*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T08:13:53.767

> 我想知道 strtotime（php 日期函数）是如何工作的？

去这里：[https ://github.com/php/php-src/blob/master/ext/date/lib/parse_date.c](https://github.com/php/php-src/blob/master/ext/date/lib/parse_date.c)

搜索`timelib_strtotime`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T14:48:53.600

忘了它，使用 php Intl 扩展。将来将成为 php 核心的一部分。

```
<?php
    // format
    $format = datefmt_create('fa_IR@calendar=persian', IntlDateFormatter::FULL, IntlDateFormatter::FULL, 'Asia/Tehran', IntlDateFormatter::TRADITIONAL, 'yyyy/MM/dd HH:mm');

    // time in locale as you wish
    var_dump(datefmt_format($format, time())); // '۱۳۹۱/۰۲/۰۴ ۱۹:۱۵' 
```

如果您想在 i18n 中支持所有语言的波斯语，请支持 ICU 项目。

[php 国际扩展](http://www.php.net/manual/en/book.intl.php)

[icu-project.org](http://icu-project.org)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-03T11:35:52.240

实际解析字符串的方法在[parse_date.re 的`scan()`方法](https://github.com/php/php-src/blob/3152d44b361ce528368ca4f57111315b2fa324bd/ext/date/lib/parse_date.re#L847)中。在那里，您将找到所有`strtotime`关键字及其行为。

该库包含在[https://github.com/derickr/timelib](https://github.com/derickr/timelib)中。

# wpf - WPF DataGrid 中的动态列生成

> ID：10119675
> 
> 赞同：3
> 
> 时间：2012-04-12T07:59:32.370
> 
> 标签：wpf, data-binding, mvvm, wpfdatagrid

我有一个对象，它有大约 30 个属性，这取决于查看数据的人，我只需要向他展示 10-12 个属性。这些属性将形成 WPF 数据网格的列。我正在使用 .Net 4.0 但是，所有这些都将在运行时发生。我需要这样做是 MVVM 方式。任何关于如何实现这一点的方向都将不胜感激。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:15:19.040

据我所知，你有两个选择。

1) 从您的 ViewModel 中公开一个`ViewableDetailsType`枚举属性，告诉您应该显示什么样的数据视图。然后，您可以在视图中创建触发器，`DataGrid`以设置`Columns`网格的属性以手动显示相应的列。

2) 更好的方法是为您的底层模型对象创建包装器、DTO 类型的 ViewModel 对象。一个用于您要公开的对象的每个视图。然后，您将一组适当的包装对象公开给视图，DataGrid 可以使用自动列。

这需要做更多的工作，但对于 MVVM 来说更是如此，因为数据隐藏发生在 ViewModel 中，因此可以进行测试。

# php - 在网页内显示带有 GD 库的 jpeg 图像时出错

> ID：10119683
> 
> 赞同：0
> 
> 时间：2012-04-12T08:00:05.070
> 
> 标签：php, header, gd

我创建了一个图像类来使用 GD 库在网站上显示和转换图像。当我想在站点中显示没有任何 HTML 代码的 jpeg 图像时，一切都会好起来的，因为我设置了 header('Content-Type: image/jpeg')。我的代码如下：

```
$filepath = 'path to the image file';
$info = getimagesize( $filepath );
$this->type = $info[2];
if( $this->type == IMAGETYPE_JPEG ) 
{
    $this->image = imagecreatefromjpeg($filepath); // set the resource image
} 
   if( $this->type == IMAGETYPE_JPEG )
   {
    $type = 'image/jpeg';
   }
 header('Content-Type: ' . $type );
  if( $this->type == IMAGETYPE_JPEG )
  {
    imagejpeg( $this->image );
   } 
```

此代码完美运行，但如果我想在 HTML 代码中显示图像（ob_start 不起作用），我应该如何显示图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:20:16.980

像任何常规图像一样从不同的文件请求该脚本：

```
<img src="path/to/the/file/that/outputs/the/image.php"> 
```

# jqgrid - 在jqgrid中添加多行

> ID：10119685
> 
> 赞同：1
> 
> 时间：2012-04-12T08:00:07.303
> 
> 标签：jqgrid

我是一个新用户，我正在使用**jqGrid**插件，我想知道是否可以一次添加几行然后在最后保存。

* * *

我想添加几行并以一个按钮结束以保存所有内容。以下代码：

```
 //for edit all    
    $("#list2").jqGrid('navButtonAdd', '#pager2', {
        caption: "Modifica", buttonicon: "ui-icon-pencil",
        onClickButton: function () {
            var ids = $('#list2').jqGrid('getDataIDs');
            for (var i = 0; i < ids.length + 1; i++) {
                $('#list2').jqGrid('editRow', ids[i], true);
            }
        }
    });

    //for save all 
    $("#list2").jqGrid('navButtonAdd', '#pager2', {
        caption: "Salva", buttonicon: "ui-icon-disk",
        onClickButton: function () {
            var ids = $('#list2').jqGrid('getDataIDs');
            for (var i = 0; i < ids.length + 1; i++) {
                $('#list2').jqGrid('saveRow', ids[i], false, 'PerformCRUDAction');
            }
        }
    });

  //add several rowa
 $("#list2").jqGrid('navButtonAdd', '#pager2', {
        caption: "Add", buttonicon: "ui-icon-add",
        onClickButton: function () {
            $("#list2").addRowData("Codice", {}, 'last');
         }
    }); 
```

通过这个函数（jquery），我添加了行，但不允许我编辑。我只能改变第一个只有第一个

# text - 是否有任何方法可以摆脱人类内容之间二进制文件的文本输出？

> ID：10119686
> 
> 赞同：1
> 
> 时间：2012-04-12T08:00:07.617
> 
> 标签：text, full-text-search, nlp, web-crawler

在从网页（在`p`标签内）抓取内容时，偶尔会在人类文本之间看到长长的东西，例如：

```
ªjßûÞà&fnof;^_^\,_>xî¹Ág?;´Â¼ú8&#x17E;^S^R +^R ^A^R ^A^R ^A^R ^A&rsaquo;^DÆ^Z^_&#x17D;m&rdquo;A&þÅ^R^N&OElig;^RÝmîÜaÎ^W¿¸;^Oéµk^G&Yuml;ÿü`ß}^G^G^\0¸ì²  &Yuml;b1oÞà#^_^Y&#x17D;EO9eâ?&#x17D;<ÅFw#^R     9æè^Q^AZß&ª¿lÙ`×®Ý¡wî^\&dagger;Â* &circ;&Scaron;«MB^BtE^B$@^B$@^B$@^B$`&ldquo;&euro;&#x17D;ýüÄ¬Y»Çª&tilde;òÅ^XrÉ&rsquo;Á;Þ1Ì¹þúÝ&ndash;[¶^LÞ÷¾Áyç^M×o`Åõ&lsquo;G^N°ôzÊ&rdquo;¡?N^W^Ow^F&fnof;iÓ^F0>ä?azæL?Ð0wàg^V&#x17D;Z^S&rsquo;^\^Y·µê?öØ°úc¾O&scaron;?^@]&lsquo;^@  ?^@     ?^@     ?^@     Ø$0r¤&Scaron;¡òA^G^MÇ?7Þ¸Ûæ&tilde;c&dagger;»:¤\¿~ðþ÷^O^^?}pÂ    Ã|^YÏc¬&#x17D;íS&Yuml;Ú]d¸3Ø={&OElig;!:¶C^Oõ#^Nsí^MÔ[«>Ö«^?à^C&fnof;íÛ},m=ªØì&ndash;TE^B$@^B$@^B$@^B$P4>¼æ&scaron;á^PúÓ&Yuml;Þmó?ï^Lw±&circ;EÆ?'?48ç&oelig;a^ZÃuo{÷»wÛH¾ØoØ0ÜÛ^?ÿÝ&Dagger;t êÚhfa"a«ùbÜ¸-T^_Óéï|çàþû&lsaquo;d¸&rsquo;ö¤^S^R +^R ^A^R ^A^R ^A^R  &dagger;        `R:ü¯ywY&trade;Q_½:ÇÕÐz8J^\þ&Dagge 
```

和

```
 `i=æºeÙpÁ&mdash;UêsÀÂo^LÑñþ^EÞyÁK    ø+¨X²^ß-=?^@    ?^@     ?^@     ?^@     ?À¤$&euro;Ñ2^[Æ\:^õ?&rdquo;^Ud¥H&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro;^DH&euro; 
```

我对它们的唯一熟悉是当我不小心在文本编辑器中打开了一些二进制文件时。这些是长序列，正在污染我的样本。有什么技巧可以摆脱它们吗？

**PS：**它们是什么？例如，其中一些伴随着

```
endstream
endobj
37 0 obj
817
endobj
38 0 obj
<< /Length 39 0 R /N 3 /Alternate /DeviceRGB /Filter /FlateDecode >>
stream 
```

# amazon-s3 - “s3cmd get”重写本地文件

> ID：10119692
> 
> 赞同：7
> 
> 时间：2012-04-12T08:00:38.690
> 
> 标签：amazon-s3, s3cmd

尝试使用**s3cmd将****S3**目录下载到本地计算机。我正在使用命令：

 **```
s3cmd sync --skip-existing s3://bucket_name/remote_dir ~/local_dir 
```

但是，如果我在中断后重新开始下载，**s3cmd**不会跳过之前下载的现有本地文件并重写它们。命令有什么问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-16T16:25:51.013

我遇到了同样的问题，并在 William Denniss 的评论 #38 中找到了解决方案[http://s3tools.org/s3cmd-sync](http://s3tools.org/s3cmd-sync)

如果你有：

```
$s3cmd sync —verbose s3://mybucket myfolder 
```

将其更改为：

```
$s3cmd sync —verbose s3://mybucket/ myfolder/   # note the trailing slash 
```

然后，比较 MD5 哈希值，一切正常！-skip-existing 也可以。

回顾一下，如果您使用第一个命令，--skip-existing 和 md5 检查都不会发生，如果您使用第二个命令，两者都可以工作（我在上一篇文章中犯了一个错误，因为我正在使用 2 个不同的目录进行测试）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T17:21:18.687

请改用 boto-rsync。 [https://github.com/seedifferently/boto_rsync](https://github.com/seedifferently/boto_rsync)

它仅将新的/更改的文件从 s3 正确同步到本地目录。**

# iphone - 如何获取正在运行的进程的 mach-o uuid？

> ID：10119700
> 
> 赞同：8
> 
> 时间：2012-04-12T08:01:16.070
> 
> 标签：iphone, ios, uuid, dwarf

在 Mac 上获取 UUID 我可以使用

```
dwarfdump -u path/to/compile/executable 
```

我也可以在“二进制图像”部分通过简单的崩溃获得 UUID

在ios设备上获得UUID而不会崩溃的方法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-12T09:54:07.140

可执行文件（mach-o 文件）的 UUID 由链接器创建，`ld`并存储在名为`LC_UUID`. 您可以使用以下命令查看 mach-o 文件的所有加载命令`otool`：

```
otool -l path_to_executable

> ...
> Load command 8
>      cmd LC_UUID
>  cmdsize 24
>     uuid 3AB82BF6-8F53-39A0-BE2D-D5AEA84D8BA6
> ... 
```

任何进程都可以使用名为 的全局符号访问其 mach-o 标头`_mh_execute_header`。使用此符号，您可以遍历加载命令以进行搜索`LC_UUID`。该命令的有效负载是 UUID：

```
#import <mach-o/ldsyms.h>

NSString *executableUUID()
{
    const uint8_t *command = (const uint8_t *)(&_mh_execute_header + 1);
    for (uint32_t idx = 0; idx < _mh_execute_header.ncmds; ++idx) {
        if (((const struct load_command *)command)->cmd == LC_UUID) {
            command += sizeof(struct load_command);
            return [NSString stringWithFormat:@"%02X%02X%02X%02X-%02X%02X-%02X%02X-%02X%02X-%02X%02X%02X%02X%02X%02X",
                    command[0], command[1], command[2], command[3],
                    command[4], command[5],
                    command[6], command[7],
                    command[8], command[9],
                    command[10], command[11], command[12], command[13], command[14], command[15]];
        } else {
            command += ((const struct load_command *)command)->cmdsize;
        }
    }
    return nil;
} 
```

# objective-c - 核心数据：从类别中获取（核心类的扩展）

> ID：10119704
> 
> 赞同：0
> 
> 时间：2012-04-12T08:01:36.037
> 
> 标签：objective-c, cocoa, core-data, nsmanagedobject

**编辑**：我想我不应该制作这种实例方法，而是让它成为类方法！？另一件事，我将 fetch 方法添加到类 C，它有效。我只是在想，如果可以通过托管对象访问数据存储会很方便，但我想这有点违背背后的想法`managedObjectContext`，持久性等等？

* * *

我不确定我是否正在尝试做一些你不应该做的事情，但是就这样吧。

我有一个数据模型，其中实体 A 与实体 B 有关系（B 到许多 A）。我在数据存储中有许多类型为 B 的实体，现在我想创建一些类型为 A 的实体。为此，我需要获取对类型 B 的实体的引用，即我有查询数据存储。我在 B 类中执行以下操作，即：

```
#import "B+Helper.h"

@dynamic managedObjectContext;

@implementation B (Helper)

- (Store *)getBByRef:(NSString *)ref
{
    NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"B" inManagedObjectContext:self.managedObjectContext];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entityDescription];

    NSPredicate *predicate = [NSPredicate predicateWithFormat: @"ref == %@", ref];
    [request setPredicate:predicate];

    NSError *error = nil;
    NSArray *storeArray = [self.managedObjectContext executeFetchRequest:request error:&error];
    NSInteger bCount = [bArray count];
    if ( bCount > 1 || bCount == 0) {
        // Deal with error...
    } else {
        return [bArray objectAtIndex:0];
    }
} 
```

现在，问题是我似乎无法正确设置 managedObjectContext ---我收到错误：

```
CoreData: error: Failed to call designated initializer on NSManagedObject class 'B' 
```

`managedObjectContext`在调用上述方法之前，我尝试将 AppDelegate 传递给 C 类，必须获取 B 实体并从 C 类传递给 B+Helper 类，但这不起作用。

基本上，我只是希望能够从一个简单的`NSObject`类或`NSManagedObject`扩展中进行核心日期查询，即从一个不是`UIViewController`某种类的类。

在 CI 类中做了如下操作：

```
B *b = [[B alloc] init];
b.managedObjectContext = self.managedObjectContext; 
```

但后来我收到一个错误，说选择器不存在：

```
setManagedObjectContext:]: unrecognized selector sent to instance... 
```

我希望这是有道理的？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:59:23.130

真的，不要使用实例方法创建类别，您应该将已经编写的方法添加到生成的 B 实体类实现和接口中。

```
+ (Store *)getBByRef:(NSString *)ref; 
```

它应该可以正常工作。

# linux - PHP JAVA 桥

> ID：10119705
> 
> 赞同：0
> 
> 时间：2012-04-12T08:01:37.487
> 
> 标签：linux, centos, php-java-bridge

我对 Linux 很陌生，但我正在努力学习。我们有专门的 CentOS 6 托管服务器。它配置了 Apache 服务器作为我们的公共网站。现在我们需要在上面安装 PHP JAVA Bridge。

我所做的是，我安装了 TomCat 6 和 jdk 1.6。然后我将 JavaBridge.war 文件复制到 $CATALINA_HOME/webapps 文件夹和 $CATALINA_HOME/lib 文件夹中的 jar 文件。当我从 tomcat 8080 端口检查时，JavaBridge 工作得很好。

然后我在我的 apache 服务器上创建了 $CATALINA_HOME/webapps/JavaBridge 的符号链接。直到这里一切都好

但是当我尝试从[http://www.xxx.com/JavaBridge](http://www.xxx.com/JavaBridge)之类的浏览器浏览时，我会收到以下错误

## 您无权访问此服务器上的 /JavaBridge/。

Apache 服务器位于 www.gizeleonline.com 端口 80

现在我的问题是我做错了还是我必须摆脱 Apache 服务器或者我错过了一些东西。

请帮助这个专家:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T21:32:27.307

其实是我的错。我只是重新映像我的服务器并重新安装它开始工作的一切。感谢每个人的帮助

# xml - 有图表的标记语言吗？

> ID：10119707
> 
> 赞同：6
> 
> 时间：2012-04-12T08:01:54.930
> 
> 标签：xml

是否有一种常用的图形标记语言（拓扑类型）。我希望 XML 元素（例如 Node 和 Edge）以及显示方向性和标签的属性

更新：到目前为止，可以选择 2，GraphML 和 DotML。GraphML 自 2007 年以来没有改变，但也许它不需要！所以读者可能想知道每个工具集都有哪些工具集——我很高兴 Gephi 使用 GrahML，显然 DotML 有 GraphViz 和其他工具集。（无论我选择哪种语言，我都会用 Java 编写一个有限的工具包）

更新：我个人将使用 DotML。我需要建模语言（例如向节点和边添加标签、权重等，因此需要我自己的额外命名空间）。DotML 的吸引力在于它似乎是活跃的，并且 graphViz 可以利用输出。YMMV

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T08:03:47.770

[点语言](http://en.wikipedia.org/wiki/DOT_language)是我用于图表的主要语言。

这种语言被 GraphViz 等系统用于生成其图形，并且具有相当的人类可读性。

这是[graphviz DOT 语言参考](http://www.graphviz.org/doc/info/lang.html)。

顺便说一句，我编写了一个 .NET GraphViz 包装器，可用于解析 DOT 字符串和输出图形。如果这对您有用，那么您可以从 CodePlex 获取代码：http: [//graphviz.codeplex.com/](http://graphviz.codeplex.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T09:45:08.423

yEd (http://www.yworks.com/en/products_yed_about.html) 是一个使用 GraphML 描述变体的有用工具。我用它来可视化简单的图表。恕我直言，它的标记语言更像 XML。他们有一个库可以在您的应用程序中使用，但我从未使用过它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T08:05:05.973

不是 XML 意义上的标记，但您可以使用[点](http://en.wikipedia.org/wiki/DOT_language)语言。像[graphviz](http://graphviz.org/)这样的程序将采用 Dot 输出并将其转换为漂亮的图形。正如评论中所指出的，还有[DotML](http://martin-loetzsch.de/DOTML/)。

如果你想要基于 XML，那么[GraphML](http://en.wikipedia.org/wiki/GraphML)、[DGML](http://en.wikipedia.org/wiki/DGML)和[GXL](http://en.wikipedia.org/wiki/GXL)存在，但我在实际应用中从未遇到过它们！

# php - 回显php数组值

> ID：10119716
> 
> 赞同：0
> 
> 时间：2012-04-12T08:02:48.207
> 
> 标签：php, arrays, foreach, echo

我有以下代码读取文件夹的内容

PHP代码：

```
<?
//PHP SCRIPT: getimages.php
header('content-type: application/x-javascript');

//This function gets the file names of all images in the current directory
//and ouputs them as a JavaScript array
function returnimages($dirname="./images") {
     $pattern="(\.jpg$)|(\.png$)|(\.jpeg$)|(\.gif$)"; //valid image extensions
     $files = array();
     $curimage=0;
           if($handle = opendir($dirname)) {
                while(false !== ($file = readdir($handle))){
                     if(eregi($pattern, $file)){ //if this file is a valid image 
//Output it as a JavaScript array element
                   echo 'galleryarray['.$curimage.']="'.$file .'";' . "\n";
             $curimage++;
                    } 
            }

            closedir($handle);
}
        sort($files);
        return($files);
}

echo 'var galleryarray=new Array();' . "\n"; //Define array in JavaScript
returnimages() //Output the array elements containing the image file names

?> 
```

它吐出以下代码：

```
var galleryarray = new Array();
galleryarray[0] = "image1.jpg";
galleryarray[1] = "image5.jpg";
galleryarray[2] = "image2.jpg";
galleryarray[3] = "image4.jpg";
galleryarray[4] = "image8.jpg";
galleryarray[5] = "image7.jpg";
galleryarray[6] = "image0.jpg";
galleryarray[7] = "image3.jpg";
galleryarray[8] = "image6.jpg";​ 
```

现在在我的 html 文件中，我想回显类似的内容

```
<img src="images/image0.jpg" />
<img src="images/image1.jpg"/>
...
... 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:05:19.547

```
foreach($galleryarray as $img) {
    echo "<img src='images/$img' />";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:07:43.087

尝试将函数中的回声线更改为：

```
echo '<img src="images/' . $file . '" />' ; 
```

希望这会有所帮助:)

**或者**

在函数之外，像这样使用它：

```
$images = returnimages(); //will get the array containing the images
foreach($images as $img)
{
  echo '<img src="images/' . $img . '" />';
} 
```

此外，您必须在 while 循环的 if 条件中包含这一行：

```
$files[] = $file; //insert the file into the array. This array is what we are going to return from the function 
```

**更新**

我已经测试了这段代码并且它正在工作：

```
 //PHP SCRIPT: getimages.php
    header('content-type: application/x-javascript');

    function returnimages($dirname="./images") {
         $pattern="([^\s]+(\.(?i)(jpg|png|gif|bmp))$)";     //  http://www.mkyong.com/regular-expressions/how-to-validate-image-file-extension-with-regular-expression/
         $files = array();
         if($handle = opendir($dirname)) {
            while(false !== ($file = readdir($handle))){
                if(preg_match($pattern, $file)){ //if this file is a valid image 
                    $files[] = $file;
                } 
            }

            closedir($handle);
        }
        //sort($files);         // http://php.net/manual/en/function.sort.php
        natcasesort($files);    // case insensitive "natural order" algorithm :: http://php.net/manual/en/function.natcasesort.php

        return($files);
    }

    $images = returnimages(); //will get the array containing the images
    foreach($images as $img)
    {
      echo '<img src="images/' . $img . '" />';
    } 
```

在我的`images`文件夹中，我放了 5 个文件进行测试。在运行它时，它会给出以下内容：

```
<img src="images/a.jpg" />
<img src="images/ba.jpg" />
<img src="images/ca.jpg" />
<img src="images/Copy (3) of a.jpg" />
<img src="images/Copy (4) of a.jpg" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:52:32.227

也许这对你有帮助

```
$pattern="(\.jpg$)|(\.png$)|(\.jpeg$)|(\.gif$)"; //valid image extensions
           if($handle = opendir("./images")) {
                while(false !== ($file = readdir($handle))){
                     if(eregi($pattern, $file)){ ?>
                   <img src="/images/<?php echo $file;  ?>">
            <?php 
                    } 
            }
           } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-08T15:33:05.430

假设您要按值对图像名称进行排序，然后显示图像。您首先需要使用函数“asort”对值进行排序

```
 asort($galleryarray);
    foreach ($galleryarray as $key => $val) {
        echo "<img src='images/{$val}'/>"
    } 
```

* * *

如果你想打印和排列

1) print_r($array); 或者，如果您想要格式良好的数组，那么

```
echo '<pre>'; print_r($array); echo '<pre/>'; 
```

2）用于`var_dump($array)`获取数组中内容的更多信息，如数据类型和长度。

3) 你可以使用 php 的 foreach() 循环数组；并获得所需的输出。php 文档网站[http://in3.php.net/manual/en/control-structures.foreach.php中有关 foreach 的更多信息](http://in3.php.net/manual/en/control-structures.foreach.php)

# linux - 如何计算整个文件中字符串的出现次数？

> ID：10119717
> 
> 赞同：4
> 
> 时间：2012-04-12T08:02:49.917
> 
> 标签：linux, perl, bash, shell, unix

是否有内置命令可以执行此操作，或者是否有人对执行此操作的脚本有任何运气？

我正在寻找某个字符串（不是单词）出现在文件中的次数。这可以包括每行多次出现，因此计数应该计算每次出现，而不仅仅是计数 1 用于具有字符串 2 次或更多次的行。

例如，使用此示例文件：

```
blah(*)wasp( *)jkdjs(*)kdfks(l*)ffks(dl
flksj(*)gjkd(*
)jfhk(*)fj (*) ks)(*gfjk(*) 
```

如果我要计算字符串的出现次数，`(*)`我希望计数为 6，即第一行有 2 个，第二行有 1 个，第三行有 3 个。请注意第 2-3 行之间的行数不算数，因为它们之间有一个 LF 字符。

**更新**：到目前为止反应很好！我可以要求脚本处理`(*)`to`\(*\)`等的转换吗？这样我就可以将任何所需的字符串作为输入参数传递，而不必担心需要对其进行什么转换，以便它以正确的格式显示。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-12T08:08:37.940

您可以使用基本工具，例如`grep`和`wc`：

```
grep -o '(\*)' input.txt | wc -l 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T09:40:31.980

使用 perl 的“爱斯基摩之吻”运算符和`-n`开关在最后打印一个总数。用于`\Q...\E`忽略任何元字符。

```
perl -lnwe '$a+=()=/\Q(*)/g; }{ print $a;' file.txt 
```

脚本：

```
use strict;
use warnings;

my $count;
my $text = shift;

while (<>) {
    $count += () = /\Q$text/g;
}

print "$count\n"; 
```

用法：

```
perl script.pl "(*)" file.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T08:05:49.560

这将遍历文件的行，并在每一行上找到所有出现的字符串“（*）”。每次找到该字符串时，$c 都会递增。当没有更多行要循环时，将打印 $c 的值。

`perl -ne'$c++ while /\(\*\)/g;END{print"$c\n"}' filename.txt`

**更新：**关于您要求将其转换为接受正则表达式作为参数的解决方案的评论，您可以这样做：

`perl -ne'BEGIN{$re=shift;}$c++ while /\Q$re/g;END{print"$c\n"}' 'regex' filename.txt`

这应该可以解决问题。如果我想再次浏览[perlrun](http://perldoc.perl.org/perlrun.html "perlrun")，我可能会看到一个更优雅的解决方案，但这应该可行。

您还可以通过向正则表达式提供列表上下文来消除显式的内部 while 循环，以支持隐式循环：

`perl -ne'BEGIN{$re=shift}$c+=()=/\Q$re/g;END{print"$c\n"}' 'regex' filename.txt`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-02T15:18:43.573

您可以使用基本**的 grep**命令：

**示例**：如果您想在文件中查找“hello”单词的出现次数

```
grep -c "hello" filename 
```

如果你想找到一个模式的出现次数，那么

```
grep -c -P "Your Pattern" 
```

模式示例：**hell.w、\d+** 等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-12T07:02:50.840

我使用以下命令在文件中查找特定的字符串计数

grep search_String 文件名|wc -l

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-04-27T11:25:31.520

```
text="(\*)"
grep -o $text file | wc -l 
```

您可以将其制作成一个接受如下参数的脚本：

脚本**计数**：

```
#!/bin/bash
text="$1"
file="$2"
grep -o "$text" "$file" | wc -l 
```

用法：

```
./count "(\*)" file_path 
```

# php - 生成复杂报告的良好实践 (MySQL/PHP)

> ID：10119721
> 
> 赞同：-1
> 
> 时间：2012-04-12T08:03:33.027
> 
> 标签：php, mysql, database-design

PHP mysql_query 函数不允许多个查询，这限制了最大的报告复杂性。如果我需要生成非常复杂的报告，需要多个临时表和多个查询，那么最佳实践是什么？

**更新：**我的问题更多关于如何在 PHP 中使用 MySQL 复杂查询，如果 mysql_query 只允许单个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:29:49.053

> PHP mysql_query 函数不允许多个查询，这限制了最大报告复杂度

不是根据我的经验，它没有。

临时表在会话期间可用 - 如果您想使用临时表来撰写报告（由于子查询的可用性，它们不是*必需*的）有什么问题......

```
 mysql_query('CREATE TEMPORARY TABLE workset ....
 mysql_query('INSERT INTO workset (...) SELECT ....
 mysql_query('UPDATE workset......
 ....
 mysql_query('SELECT * FROM workset.... 
```

或者使用存储过程来创建物化视图？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:40:28.183

好吧，如果您正在寻找执行多个查询，那么为什么不使用`mysqli_multi_query` PHP 手册中的示例：

```
/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query  = "SELECT CURRENT_USER();";
$query .= "SELECT Name FROM City ORDER BY ID LIMIT 20, 5";

/* execute multi query */
if ($mysqli->multi_query($query)) {
    do {
        /* store first result set */
        if ($result = $mysqli->store_result()) {
            while ($row = $result->fetch_row()) {
                printf("%s\n", $row[0]);
            }
            $result->free();
        }
        /* print divider */
        if ($mysqli->more_results()) {
            printf("-----------------\n");
        }
    } while ($mysqli->next_result());
}

/* close connection */
$mysqli->close();
?> 
```

参考： [mysqli_multi_query](http://php.net/manual/en/mysqli.multi-query.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T08:14:32.303

您所说的“最大报告复杂性”是什么意思？现在我使用SSRS。但这是微软的解决方案。我在 Google 上搜索[Reportico 工具](http://www.reportico.org/swsite/site/home/index.php)可能会对您有所帮助。作为替代方案，ZF（例如）包含用于与数据库交互的巨大功能。也许[这篇文章](https://stackoverflow.com/questions/920889/open-source-php-reporting-tool)可以帮助你。

# java - 正则表达式类 [.] 不匹配 '(' ')' 或 '$'

> ID：10119724
> 
> 赞同：-3
> 
> 时间：2012-04-12T08:03:50.840
> 
> 标签：java, android, regex, expression

我有一个简单的正则表达式：

```
String expr = "#^" + STARTER + "[.]" + ENDER + "$#";
c = c.replaceAll(expr, STARTER + REPLACEMENT + ENDER); 
```

结果 ：

一个字符串，其中包含

```
STARTER an exemple ENDER 
```

匹配但是：

```
STARTER an (exemple) ENDER 
```

不匹配。

为什么字符`)`,`(`并`$`从正则表达式类中排除`.`？我怎样才能让它接受任何字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:07:07.390

`.`(dot) 不是一个正则表达式类，它是一个特殊的符号，它只有在外面有它的特殊含义`[]`。

点接受任何字符（可能除外`\n`）w/o `[]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T08:36:21.047

假设`STARTER`and`ENDER`应该是文字字符串，而不是正则表达式本身，并且您的目标是匹配一个以 开头`STARTER`，以结尾`ENDER`并且可能包含任何内容（换行符除外）的字符串，您可以使用

```
String expr = "^" + Pattern.quote(STARTER) + ".*" + Pattern.quote(ENDER) + "$"; 
```

这意味着每个字符串只能有一个匹配项。

因此，如果和`STARTER == "Start"`，调用将执行以下操作：`ENDER == "End"``REPLACEMENT == "Replace"``replaceAll()`

```
"Start foobar End"      --> "StartReplaceEnd"
"StartEnd"              --> "StartReplaceEnd"
" Start foobar End"     --> " Start foobar End"
"Start foo\nbar End"    --> "Start foo\nbar End"
"foo Start bar End baz" --> "foo Start bar End baz"
"Start End\nStart End"  --> "Start End\nStart End" 
```

由于这没有多大意义，您可能想解释一下您对这个正则表达式的实际目标是什么。

# wpf - DXChart WPF 导出 PDF

> ID：10119729
> 
> 赞同：0
> 
> 时间：2012-04-12T08:04:08.783
> 
> 标签：wpf, charts, devexpress

谁能告诉我是否可以将 DXCharts 导出为 .xls、.pdf 或任何类型的矢量格式？我正在使用 WPF 的 2011 v2 版本中的 DXChart。

我在网上没有找到任何关于此的内容。我害怕的是我做不到。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:05:23.387

您可以将 DXCharts 与 XtreReports 一起使用，并且可以将报告导出为 PDF。

*注意：*我不知道生成的图表是矢量还是位图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:04:39.443

我还在 DevExpress 网站上添加了这个问题：http: [//www.devexpress.com/Support/Center/p/Q394532.aspx](http://www.devexpress.com/Support/Center/p/Q394532.aspx)

最后我得出了这个结论：

DevExpress 图表可以通过将图表的可视内容转换为位图并将其保存为图像文件来导出为 JPG。它们也可以直接使用几种技术导出为 PDF、XLS，这些技术记录得很少，但有实际结果。技术列表如下所示： - 将 DXChart 集成到 DXGrid 中并导出网格（PDF、HTML、MHT、RTF、XLS、XLSX、CVS、TXT、XPS、BMP、EMF、WMF GIF、JPEG、PNG、 TIFF），如此处所示[http://www.devexpress.com/Products/NET/Controls/WPF/Printing/info.xml](http://www.devexpress.com/Products/NET/Controls/WPF/Printing/info.xml)。但是，图表将导出为图像并集成到适当的格式文件中。- 本身没有可用的矢量格式，但是图像格式文件允许出色的 dpi 分辨率，这可以实现良好的调整大小和缩放行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-17T08:07:14.097

```
public void exportChartToPDF()
{
    PrintSizeMode sizeMode = PrintSizeMode.Stretch;
    chart3D.ExportToPdf("Output.pdf", sizeMode);
    Process.Start("Output.pdf");
} 
```

# mysql - sql教程脚本错误

> ID：10119731
> 
> 赞同：0
> 
> 时间：2012-04-12T08:04:18.153
> 
> 标签：mysql, sql

它告诉您从[本](http://www.unifycommunity.com/wiki/index.php?title=Server_Side_Highscores#SQL_-_score.sql)教程复制并粘贴到 phpMyAdmin 的 SQL 页面中的 SQL 文本给了我错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL
server version for the right syntax to use near 'TYPE=MyISAM' at line 6 
```

这是脚本：

```
CREATE TABLE `scores` (
   `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
   `name` VARCHAR(15) NOT NULL DEFAULT 'anonymous',
   `score` INT(10) UNSIGNED NOT NULL DEFAULT '0'
)
TYPE=MyISAM; 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T08:07:03.973

它应该`ENGINE=MyISAM`代替`TYPE=MyISAM`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T08:52:52.503

是的。TYPE 不适用于 MyISAM。

```
**TYPE** must be **ENGINE** . 
```

这是常见的问题！

# wordpress - 将简单的 Facebook Connect 登录按钮嵌入到侧边栏

> ID：10119733
> 
> 赞同：0
> 
> 时间：2012-04-12T08:04:28.797
> 
> 标签：wordpress

我在我们的网站上使用 Simple Facebook Connect 插件，因为我们希望我们的用户能够通过 Facebook 进行身份验证。该功能在 wp-login.php 上运行良好，因为“FB 登录”按钮在那里正确显示，但我需要的是在侧边栏或标题上获取“FB 登录”按钮。

我搜索了很多相同的内容，但仍然没有解决这个问题。

任何人都可以在这里提供任何好的建议吗？

谢谢你的时间！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:29:55.847

我也在寻找这个解决方案，以便我可以将它添加到客户网站主题的标题中，并且在在线搜索和在 WordPress 插件论坛上搜索之后，我放弃了并决定查看他们的代码来解决这个问题。我能够将以下代码复制到标题中并且它有效。

```
<?php echo '<p><fb:login-button v="2" scope="email,user_website" onlogin="window.location.reload();" /></p><br />';?> 
```

当然，您可以根据需要删除 p 和 br 标签以适合您的主题或侧边栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:00:24.343

我有同样的问题，但我没有一个好的答案。现在，我已使用以下命令将用户重定向到登录页面：

```
wp_login_url( $_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"] ) 
```

# python - 如何使访问类中的任何数据引发异常？

> ID：10119735
> 
> 赞同：1
> 
> 时间：2012-04-12T08:04:36.440
> 
> 标签：python, multithreading

我有一个代表一个硬件的类。我只希望一个线程能够一次控制它，但如果花费太长时间，我也希望能够从资源中踢出另一个线程。我认为最好的方法是跟踪类中的所有者线程 ID，如果从另一个线程访问任何属性，则抛出异常。

这似乎是一个可以用元类解决的问题——我需要以某种方式拦截属性检索，如果线程 ID 错误则抛出异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:20:07.713

您不一定需要元类，您可以使用[`__getattribute__`](http://docs.python.org/dev/reference/datamodel.html#object.__getattribute__)：

```
class Hardware(object):
    def __getattribute__(self, attr):
        if super(Hardware, self).__getattribute__(owner_id) != current_thread_id:
            raise YourAccessError  # NOT AttributeError
        return super(Hardware, self).__getattribute__(attr) 
```

# c# - 如何使用 PLINQ 在 C# 中实现 MapReduce？

> ID：10119736
> 
> 赞同：7
> 
> 时间：2012-04-12T08:04:38.577
> 
> 标签：c#, asp.net-mvc-3, c#-4.0, mapreduce, plinq

如何使用 PLINQ 在 C# 中实现 MapReduce？

假设，您有 7-8 个 Web 服务来收集数据，并且在每次接收（异步方式）时，您必须将该数据放入数据库的某些表中，在我的情况下是 SQL Server 2008。例如，您从每个接收到的数据网络服务是：

```
 <employees>
  <employee>
   <name>Ramiz</name>
  </employee>
  <employee>
   <name>Aamir</name>
  </employee>
  <employee>
   <name>Zubair</name>
  </employee>
</employees> 
```

并且，在每次收到响应时，此数据都会进入一个表名 - Employee：

```
Employee
===
EmployeeID (PK)
EmployeeName 
```

一旦数据进入表中，它必须返回`json`到客户端，即 ASP.NET (MVC 3) 应用程序正在使用客户端 JavaScript (ajax) 进行此调用。

假设一个 WebServiceEmployee1 已经返回了数据，而其他 6 个在队列中（仍在尝试获取数据）。然后，它应该将结果集注册到表中，而不是等待其他 6 个，并将插入的员工的数据以 json 的形式返回给客户端。并且，在其他人以同样的方式做时，保持联系并做。

请看，在我的工具带中，我有 ASP.NET MVC 3 (Razor)、SQL SERVER 2008 R2、jQuery。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T03:30:46.637

如果对您要执行的处理没有清楚的了解，我建议您阅读以下 MSDN 文档：[http](http://bit.ly/Ir7Nvk) ://bit.ly/Ir7Nvk 它使用 PLINQ 描述了 map/reduce，示例如下：

```
public IDMultisetItemList PotentialFriendsPLinq(SubscriberID id, 
                                           int maxCandidates)
{
  var candidates = 
    subscribers[id].Friends.AsParallel()                    
    .SelectMany(friend => subscribers[friend].Friends)
    .Where(foaf => foaf != id && 
           !(subscribers[id].Friends.Contains(foaf)))
    .GroupBy(foaf => foaf)                               
    .Select(foafGroup => new IDMultisetItem(foafGroup.Key,
                                       foafGroup.Count()));
  return Multiset.MostNumerous(candidates, maxCandidates);
} 
```

"map" 是`Friends.AsParallel`, `SelectMany`, and`Where`和 "reduce" 阶段是`GroupBy`and`Select`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:26:54.917

来自 MS 的这个 PDF 有一个 Map Reduce 示例朝向中间/端

[http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&ved=0CH0QFjAE&url=http%3A%2F%2Fdownload.microsoft.com%2Fdownload%2F3%2F4%2FD%2F34D13993- 2132-4E04-AE48-53D3150057BD%2FPatterns_of_Parallel_Programming_CSharp.pdf&ei=4f_VT-ScD-Lg2gWqoeSWDw&usg=AFQjCNGhk_BZL8-5n8DaS_kMTaWRU9Y1Zw&sig2=ddKl4KuOGUIiUb1pIawWeNQ](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&ved=0CH0QFjAE&url=http%3A%2F%2Fdownload.microsoft.com%2Fdownload%2F3%2F4%2FD%2F34D13993-2132-4E04-AE48-53D3150057BD%2FPatterns_of_Parallel_Programming_CSharp.pdf&ei=4f_VT-ScD-Lg2gWqoeSWDw&usg=AFQjCNGhk_BZL8-5n8DaS_kMTaWRU9Y1Zw&sig2=ddKl4KuOGUiUb1pIawWeNQ)

```
public static IEnumerable<TResult> MapReduce<TSource, TMapped, TKey, TResult>(
this IEnumerable<TSource> source,
Patterns of Parallel Programming Page 76
Func<TSource, IEnumerable<TMapped>> map,
Func<TMapped, TKey> keySelector,
Func<IGrouping<TKey, TMapped>, IEnumerable<TResult>> reduce)
{
return source.SelectMany(map)
.GroupBy(keySelector)
.SelectMany(reduce);
} 
```

# ruby-on-rails - Heroku 上的 Ruby on Rails 部署 - bootstrap-sass

> ID：10119739
> 
> 赞同：4
> 
> 时间：2012-04-12T08:04:51.933
> 
> 标签：ruby-on-rails, heroku, twitter-bootstrap, ruby-on-rails-3.2, asset-pipeline

在heroku上部署我有很大的问题。真的不知道为什么它不起作用。

**这是我的宝石文件：**

```
gem 'rails', '3.2.0'
gem 'pg'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
end
gem 'coffee-rails', '~> 3.2.1'
gem 'uglifier', '>= 1.0.3'
gem 'jquery-rails'
gem "rspec-rails", ">= 2.8.1", :group => [:development, :test]
gem "factory_girl_rails", ">= 1.7.0", :group => :test
gem "email_spec", ">= 1.2.1", :group => :test
gem "cucumber-rails", ">= 1.3.0", :group => :test
gem "capybara", ">= 1.1.2", :group => :test
gem "database_cleaner", ">= 0.7.1", :group => :test
gem "launchy", ">= 2.0.5", :group => :test
gem "devise", ">= 2.0.4"
gem 'haml-rails', '>= 0.3.4', :group => :development
gem 'bootstrap-sass', '~> 2.0.2' 
```

**Heroku 日志：**

```
 cache: [GET /] miss 
 /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'         
 vendor/bundle/ruby/1.9.1/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
/usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread' 
```

**简单的应用布局**

```
%html
  %head
  %title iPinTeam
  %meta{:charset => "utf-8"}
  %meta{"http-equiv" => "X-UA-Compatible", :content => "IE=edge,chrome=1"}
  %meta{:name => "viewport", :content => "width=device-width, initial-scale=1, maximum-scale=1"}
  %meta{:content => "", :name => "description"}
  %meta{:content => "", :name => "author"}
  = stylesheet_link_tag :application, :media => "all"
  = javascript_include_tag :application
  = csrf_meta_tags
%body{:class => params[:controller]}
 .navbar.navbar-fixed-top
  .navbar-inner
    .container
    = render 'shared/navigation'
#container.container
  #main{:role => "main"}
    - flash.each do |name, msg|
      = content_tag :div, msg, :id => "flash_#{name}" if msg.is_a?(String) 
    = yield
%footer 
```

抱歉，如果这个问题完全愚蠢，我对为什么给出这个错误有点困惑:(在日志中也有很多错误：

```
vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.0
vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.0
etc... 
```

在 heroku 上仍然很差 - 很抱歉，但出了点问题。

认为问题可能出在 heroku 上的 gem bootstrap-sass 上。我已经尝试切换到瘦 Web 服务器，但它完全一团糟：（有人可以帮我解决这个问题，也许可以稍微描述一下错误。如果需要一些额外的信息，我会立即发布。谢谢...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T23:52:31.283

在升级到 heroku 之前，您需要预编译您的资产。

尝试`rake assets:precompile`然后上传到 Heroku。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-27T10:07:44.077

我无法在 Heroku 上使用 bootstrap CSS 查看该站点，因此我在 上进行了以下更改`config/environments/production.rb`，更改了行：

```
config.assets.compile = false 
```

到：

```
config.assets.compile = true 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-01T22:40:06.273

在与其他答案相同的资产编译主题上，Heroku 还[需要您的](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)**config/application.rb**中的以下行：

```
config.assets.initialize_on_precompile = false 
```

我相信如果你这样做，你不应该`rake assets:precompile`在部署到 Cedar 堆栈之前运行（至少我不需要）。

**更新**

我将在这里添加以供参考，因为我还使用了需要我`config.assets.initialize_on_precompile = true`在**application.rb**中设置的 gem ，所以我通常必须在手动部署到 Heroku 之前预编译我的资产。但是，在运行
`$ heroku labs:enable user-env-compile -a HEROKU_APP_NAME`（[参考](https://devcenter.heroku.com/articles/labs-user-env-compile)）之后，
我不再需要运行`rake assets:precompile`，Heroku 为我编译了我的资产。我只是希望 Heroku 保持这个功能向前发展。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-03T02:11:52.370

*   rake 资产：预编译
*   config.assets.initialize_on_precompile = false .....所有这些方法对我都不起作用。

这对我有用：转到**config** / ***environment*** / ***production.rb***

更改：config.assets.compile = false

到：config.assets.compile = true

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-08T09:18:13.347

改用[bootstrap-sass-rails](https://github.com/yabawock/bootstrap-sass-rails "引导-sass-rails") ......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-03T13:47:59.397

**试试这个**

```
https://www.bootstrapcdn.com 
```

我只包括那些链接，这对我来说很好。对我来说，这是一个很好的解决方案。

我也使用：
1\. rake assets:precompile; 2\. config.assets.compile = true

# c# - Entity Framework T4 POCO的使用

> ID：10119744
> 
> 赞同：4
> 
> 时间：2012-04-12T08:05:19.093
> 
> 标签：c#, asp.net, .net, entity-framework

我一直在使用 Linq-to-SQL 来访问我的数据库。但最近有人告诉我，这种做法并不是最好的，因为它允许混合数据访问和业务逻辑层。

我听说 Entity Framework T4 POCO 是一个解决方案，但我找不到有关它的完整信息。有没有人有更多细节可以和我分享？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:08:45.693

POCO（普通旧 CLR 对象）的作用是它允许您创建自己的数据库表示类。然后，实体框架将您的数据库（通过配置（提示使用 edmx 文件））转换为您创建的 POCO 类。

例子：

表用户：

```
id | fName | lName | otherField 
```

您可以在 C# 中使用 POCO 将其表示为具有以下属性的用户对象：

```
int id, string fName, string lName, var otherField. 
```

然后，您可以在这些属性的 getter 和 setter 中插入您的业务逻辑。

注意：我建议只使用带有 edmx 文件的实体框架 icm。并将您的业务逻辑放在其他地方。创建 Web 服务时，我总是喜欢以下类的顺序：

*   接收调用并调用下一个类的正确函数的类
*   然后这个类将调用中的给定参数转换为应用程序的其余部分可以理解的格式，并调用另一个类的正确函数。
*   然后这个类检查参数中的业务逻辑并调用另一个类对数据库做一些事情。
*   然后这个类处理数据库连接和东西（使用实体框架）再次注意：您也可以在最后一步中使用 POCO；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:14:25.180

我发现这个网站提供了一个很好的例子，说明如何将 EF4 与 POCO 类一起使用。

[http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)

这描述了实体框架 4 的“代码优先”方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T23:09:58.710

请参阅：[实体框架 - 生成类](https://stackoverflow.com/questions/10126871/entity-framework-generating-classes)

有一个教程如何通过现有数据库生成 POCO 类。

# windows-phone-7.1 - 将wp7中的文件保存在IsolatedStorage以外的位置

> ID：10119746
> 
> 赞同：1
> 
> 时间：2012-04-12T08:05:34.727
> 
> 标签：windows-phone-7.1

我有一个从服务器下载一些文件的 WP7 应用程序。现在我将这些文件保存到独立存储中。是否有任何选项可以将这些文件保存在独立存储以外的位置。从应用程序外部访问这些文件没有问题。原因是我需要打开这些文件并将它们显示给用户。

是否有任何选项可以存储在独立存储之外？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:05:09.963

以下是您必须在 Windows Phone 中保留信息的方法：

*   保存到独立存储中的文件（使用[IsolatedStorageFile](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile%28v=vs.95%29.aspx)）
*   保存在应用程序设置中（使用[IsolatedStorageSettings](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings%28v=vs.95%29.aspx)）
*   保存到数据库（将依次保存在独立存储中）
*   将信息发送到一些 Internet 网络服务/远程存储
*   如果是图片文件，可以保存到图片库中（用[MediaLibrary](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.medialibrary%28v=xnagamestudio.40%29.aspx) - [sample](http://msdn.microsoft.com/en-us/library/ff769549%28v=vs.92%29.aspx)）

目前在 Windows Phone 中没有其他存储访问权限！

# php - 如何结合foreach上传文件

> ID：10119748
> 
> 赞同：1
> 
> 时间：2012-04-12T08:05:41.123
> 
> 标签：php, mysql, image, file-upload, uploading

我有一个上传脚本，我喜欢将几张图片上传到一个目录。

我使用这个代码：

```
$allowed_extension = array('jpg', 'jpeg', 'png', 'bmp', 'tiff', 'gif');
$errors = array();
$output = array();

if(!empty($_FILES['image']['tmp_name'])){  

     foreach($_FILES['image']['name'] as $key => $array_value){

        if(!in_array(pathinfo($_FILES['image']['name'][$key], PATHINFO_EXTENSION), $allowed_extension)){
                die("Die!");
        }
    }

    foreach($_FILES['image']['name'] as $key => $array_value){

       $file_name = $_FILES['image']['name'][$key];
       $file_size = $_FILES['image']['size'][$key];
       $file_tmp = $_FILES['image']['tmp_name'][$key];

       $file_extension = pathinfo($file_name, PATHINFO_EXTENSION);
       $file_extension = strtolower($file_extension);

         if (!in_array($file_extension, $allowed_extension)){
        $errors[$file_name][] = "format $file_extension in image $file_name is not accepted";
        continue;
         }

         if ($file_size > 2097152){
        $errors[$file_name][] = "maxsize of 2MB on $file_name has reached";
                    }

         if (count($errors) == 0){

        $dir = "a/b/c";

        if (is_dir($dir)){
            mkdir("a/b/c/tmp_images", 0755);
        }else{
            mkdir("a/b/c", 0755);
            mkdir("a/b/c/tmp_images", 0755);
        }

        $path = "a/b/c/tmp_images"; 
        $prifix = basename($file_name, "." . $file_extension);

        //var_dump ($prifix);

        $uploadfile = $path . "/" . $file_name;

        $x = 0;
        while (file_exists($uploadfile)){
               $x ++;
               $uploadfile = "{$path}/{$prifix}-{$x}.{$file_extension}";
            }

            if (move_uploaded_file($file_tmp, $uploadfile)){
               $file_name = basename($uploadfile);
               $output [$file_name] = "OK";

            }else{

            $output[$file_name] = "Failure while Uploading!";
            $errors[$file_name][] = "Failure: Can't move uploaded pictures!";
            }//else...
         }//if(count($errors))...
    }//foreach($_FILES['image']['name']... 
}//if(!empty($_FILES['image']['tmp_name'])... 
```

问题是那部分：

```
if(!empty($_FILES['image']['tmp_name'])){  

         foreach($_FILES['image']['name'] as $key => $array_value){

            if(!in_array(pathinfo($_FILES['image']['name'][$key], PATHINFO_EXTENSION), $allowed_extension)){
                    die("Die!");
            }
        } 
```

如果上传两种不同的文件类型，它将取消上传。这是我的第一个问题。在这种情况下，我需要取消上传，因为这是我想在发布表单后构建的文件。因此用户在发布表单后无法进行任何更改。让我们看一下第二部分：

```
foreach($_FILES['image']['name'] as $key => $array_value){

           $file_name = $_FILES['image']['name'][$key];
           $file_size = $_FILES['image']['size'][$key];
           $file_tmp = $_FILES['image']['tmp_name'][$key];

           $file_extension = pathinfo($file_name, PATHINFO_EXTENSION);
           $file_extension = strtolower($file_extension);

             if (!in_array($file_extension, $allowed_extension)){
            $errors[$file_name][] = "format $file_extension in image $file_name is not accepted";
            continue;
             }

             if ($file_size > 2097152){
            $errors[$file_name][] = "maxsize of 2MB on $file_name has reached";
                        ...} 
```

在这里可以看出，实际上应该接近应该显示错误消息。如果我离开第一个 foreach 部分，那么我遇到的问题是，如果有两种不同的文件类型，一个文件将被上传，另一个文件将显示错误消息。

所以应该有一种方法可以将第一个和第二个 foreach 结合起来。如果有人能告诉我正确的方法，我真的很感激。多谢。

**更新**

好吧，对不起我迟到了。这是我的反馈：在两种不同文件类型的情况下，此代码似乎存在一些问题。这好像是

```
if (count($errors)>0){
   die ("...")
} 
```

真的不算。在这种情况下，它将收到错误消息：

```
Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to access a/b/c/tmp_images/abc.xls 
```

但它也会对具有允许扩展名的图像进行上传，但这不能成功，因为另一个文件类型错误，我猜。问题是这会导致插入查询被放置在这里：

```
if (move_uploaded_file($fileTmp, $fileDst)) {
            $output[$fileBase] = "OK";

            **$insert = $db->query("INSERT INTO table ( a, b, c) VALUES('".$a."','".$b."','".$c."')");{

            mkdir("a/b/c/d/e", 0755);
            rename("a/b/c/tmp_images", "a/b/c/d/e/tmp_images");

            $msg ="text abc.";                          

            $to = "xxx@xxx.xx";
            $subject = "xxx ";
            $message = "text";

            $headers  = "From: xxx<xxx@xxx.xx>\r\n";
            $headers .= "Content-type: text/plain; charset=UTF-8\r\n";
            $mailheader .= "Return-Path: failuremail@" .$_SERVER['SERVER_NAME']. "\r\n";
            $mailheader .= "MIME-Version: 1.0\r\n";
            $mailheader .= "Content-Transfer-Encoding: 7bit\r\n";
            $mailheader .= "Message-ID: <" .time(). " noreply@" .$_SERVER['SERVER_NAME']. ">\r\n";
            $mailheader .= "X-Mailer: PHP v" .phpversion(). "\r\n\r\n";

            mail($to, $subject, $message, $headers);

            }//**

            }else{

                $output[$fileBase] = "Fehler beim Upload des Bildmaterials!";
                $errors2[$fileBase][] = "Fehler: Die hochgeladenen Dateien können nicht verschoben werden!";
            }//             
        }//

        if (count($errors) > 0) {
            die("Failurecode: ");
            echo "$errors";
    }... 
```

我想从二维数组中获取错误消息，就像我从其他错误消息中获取它们一样，这些错误消息来自与公式相同的页面上的一维数组。在“死”的情况下，它将打开一个新的空白页面以显示错误。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:05:29.300

为此，您将需要两个循环，但您采用的方法略有缺陷。您需要一个对所有文件执行所有验证的验证循环，然后是一个仅将文件移动到永久存储的第二个循环。

像这样的东西（**固定**）：

```
<?php

  // Settings
  $allowedExtensions = array('jpg', 'jpeg', 'png', 'bmp', 'tiff', 'gif');
  $maxSize = 2097152;
  $storageDir = 'a/b/c/tmp_images';

  // Result arrays
  $errors = $output = array();

  if (!empty($_FILES['image'])){  

    // Validation loop (I prefer for loops for this specific task)
    for ($i = 0; isset($_FILES['image']['name'][$i]); $i++) {

      $fileName = $_FILES['image']['name'][$i];
      $fileSize = $_FILES['image']['size'][$i];
      $fileErr = $_FILES['image']['error'][$i];
      $fileExt = strtolower(pathinfo($fileName, PATHINFO_EXTENSION));

      // Validate extension
      if (!in_array($fileExt, $allowedExtensions)) {
        $errors[$fileName][] = "Format $fileExt in image $fileName is not accepted";
      }

      // Validate size
      if ($fileSize > $maxSize) {
        $errors[$fileName][] = "$fileName excedes the maximum file size of $maxSize bytes";
      }

      // Check errors
      if ($fileErr) {
        $errors[$fileName][] = "$fileName uploaded with error code $fileErr";
      }

    }

    // Handle validation errors here
    if (count($errors) > 0) {
      die("Errors validating uploads: ".print_r($errors, TRUE));
    }

    // Create the storage directory if it doesn't exist
    if (!is_dir($storageDir)) {
      if (!mkdir($storageDir, 0755, TRUE)) { // Passing TRUE as the third argument creates recursively
        die("Unable to create storage directory $storageDir");
      }
    }

    // File move loop
    for ($i = 0; isset($_FILES['image']['name'][$i]); $i++) {

      // Get base info
      $fileBase = basename($_FILES['image']['name'][$i]);
      $fileName = pathinfo($fileBase, PATHINFO_FILENAME);
      $fileExt = pathinfo($fileBase, PATHINFO_EXTENSION);
      $fileTmp = $_FILES['image']['tmp_name'][$i];

      // Construct destination path
      $fileDst = $storageDir.'/'.basename($_FILES['image']['name'][$i]);
      for ($j = 0; file_exists($fileDst); $j++) {
        $fileDst = "$storageDir/$fileName-$j.$fileExt";
      }

      // Move the file    
      if (move_uploaded_file($fileTmp, $fileDst)) {
        $output[$fileBase] = "Stored $fileBase OK";
      } else {
        $output[$fileBase] = "Failure while uploading $fileBase!";
        $errors[$fileBase][] = "Failure: Can't move uploaded file $fileBase!";
      }

    }

    // Handle file move errors here
    if (count($errors) > 0) {
      die("Errors moving uploaded files: ".print_r($errors, TRUE));
    }

  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T10:03:53.870

试试这个，

```
$filename = $_FILES["quoteexcel"]["name"]; 
//here $filename is an array of file names to be uploaded
$tmpvalues = $_FILES["quoteexcel"]["tmp_name"]; 
//here $tmpvalues is an array of temporary file names

$j=0;
foreach($filename as $key => $value)
{
 $ext = pathinfo($value, PATHINFO_EXTENSION);       
 if($ext=='jpg' || $ext=='jpeg' || $ext=='png' || $ext=='tiff' || $ext=='gif')
 $j = $j;
 else     $j++;                                         
}

if($j==0)
{
 foreach($filename as $key => $value)
  {
     //do the upload process here;
  }
}
else
{
   echo "file format not supported";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T08:50:11.317

```
if(!empty($_FILES['image']['tmp_name']))
{  
    foreach($_FILES['image']['name'] as $key => $array_value)
    {
        $file_name = $_FILES['image']['name'][$key];
        $file_size = $_FILES['image']['size'][$key];
        $file_tmp = $_FILES['image']['tmp_name'][$key];

        $file_extension = pathinfo($file_name, PATHINFO_EXTENSION);
        $file_extension = strtolower($file_extension);          

        if($file_size > 2097152)
        {
            $errors[$file_name][] = "maxsize of 2MB on $file_name has reached";
        }           
        if(!in_array($file_extension, $allowed_extension)
        {
            $errors[$file_name][] = "format $file_extension in image $file_name is not accepted";
        }
    }
} 
```

# html - 自定义字体和字体平滑

> ID：10119750
> 
> 赞同：4
> 
> 时间：2012-04-12T08:05:45.240
> 
> 标签：html, css

我尝试添加自定义字体并且遇到了很多麻烦:(这是我的 test.html:

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
        @font-face {
        font-family: 'OpenSans';
        src: url('OpenSans.eot');
        src: url('OpenSans.eot?#iefix') format('embedded-opentype'),
            url('OpenSans.woff') format('woff'),
            url('OpenSans.ttf') format('truetype');
        font-weight: normal;
        font-style: normal;
    }
    body {
        font-size: 14px;
        font-family: 'OpenSans';
    }
    </style>
</head>
<body>
    <span>Lorem Ipsum is simply dummy text of the printing and typesetting industry<span>
</body>
</html> 
```

结果我有（Windows XP SP3 ClearType 禁用）：

![22](../Images/ed62825d56167b86f07570aabe3c0331.png)

我不知道为什么我的歌剧不想从本地目录中读取这种字体。Safari 和 Chrome 没有启用字体平滑（我如何理解它取决于操作系统，如果不更改操作系统设置我无法修复它）。

2 问题：

1）为什么opera不理解本地路径（如果它部署在http服务器上它会起作用）？

2) 如何为 chrome 和 safari 启用字体平滑？Firefox 没有问题，也许其他浏览器也可以（css 属性 font-smooth 没有帮助）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:21:54.093

我无法解释 Opera 问题，但 cleartype 问题似乎直截了当。IE 和 Firefox 忽略了您对禁用 cleartype 的系统偏好，而 chrome 和 safari 正在按照您的要求执行并尊重它。

这是我阅读问题的方式。您（用户）已明确告知系统不要使用 cleartype。MS 决定忽略 IE 中的选择，这给您的印象是 IE 的渲染效果比其他浏览器更棒。Mozilla 对那些认为 IE 字体看起来更好的 CT 禁用用户进行了很多垃圾操作，因此他们屈服于压力并忽略了您的选择。苹果很高兴在 Windows 上看起来比在 Mac 上更糟糕，所以他们什么都不做。Chrome 决定走上制高点，尊重用户的选择。或者，我可以弥补所有这些。

原因并不重要，关键是当你禁用 CT 时，它应该被禁用。您实际上要问的是如何使网站忽略用户的系统偏好，而简单的答案是-您不能，也不应该。就像网络浏览器大战中的许多事情一样，一些浏览器正在做正确的事情，而有些浏览器则没有，您对此无能为力。

# php - 如果 php 文件中的日期早于今天，则应用 CSS

> ID：10119756
> 
> 赞同：0
> 
> 时间：2012-04-12T08:06:30.480
> 
> 标签：php

我有一个由 mysql 提供的 php 表，显示即将发生的事件。如果日期早于今天或者如果日期是今天，是否可以将 css 应用于表格单元格或行？我想为行红色 id 日期比今天旧？

显示日期的表格行的典型示例是 `<td><abbr class="timeago" title="<?php echo $row_rsEventChase['start_date']; ?>"></abbr></td>`

非常感谢任何帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T08:10:59.667

这将做：

```
<td><abbr class="<?php echo ($row_rsEventChase['start_date'] <= (time() - 86400)) ? "old" : "new"; ?>" title="<?php echo $row_rsEventChase['start_date']; ?>"></abbr></td> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T08:10:48.137

```
$isOlderThanDay = (time() - $row_rsEventChase['start_date'] > 86400) ? true : false;
if ($isOlderThanDay) {
   $css = "color: red;";
} else {
   $css = "";
}

<td><abbr class="timeago" title="<?php echo $row_rsEventChase['start_date']; ?>" style="<?php echo $css; ?>"></abbr></td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:53:52.507

是的，您可以签出单元格以便将样式应用于整行。例如：

```
<style>
tr.new td {
background: #FFC;
}
tr.old td {
background: #eee;
}
<style>
<tr class="<?php echo ($row_rsEventChase['start_date'] <= (time() - 86400)) ? "old" : "new"; ?>"> 
    <td>....</td>
</tr> 
```

# java - Ecplise 的 jar 导出错误：输出容器不可访问

> ID：10119762
> 
> 赞同：-1
> 
> 时间：2012-04-12T08:07:13.197
> 
> 标签：java, eclipse, jar

昨天很好，但是今天我在 ecplise 中将库导出为 jar 时收到了该消息

![在此处输入图像描述](../Images/ca9eb600d4a2924476cbdf2a881e0a18.png)

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:16:42.163

刷新项目，如果还是不行就到资源管理器中的项目文件夹，删除bin目录下的文件，检查

# javascript - 淘汰赛在applyBindings上触发点击绑定

> ID：10119767
> 
> 赞同：61
> 
> 时间：2012-04-12T08:07:54.693
> 
> 标签：javascript, knockout.js

最近我将 ViewModel 分离到一个单独的 JavaScript 文件中。

```
var Report = (function($) {
    var initialData = [];
    var viewModel = {
        reports: ko.observableArray(initialData),
        preview: function(path) {
            // preview report
        },
        otherFunctions: function() {}
    };
    return viewModel;
})(jQuery);​ 
```

这是 HTML 和 Knockout 相关代码

```
<script type="text/javascript" src="path/to/report/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        ko.applyBindings(Report, document.body);
    });
</script> 
```

HTML 用户界面有一个按钮，单击该按钮将数据绑定到视图模型中的预览功能

```
<input type="button" name="Preview" id="Preview" class="btnPreview" 
    data-bind="click: Report.preview('url/to/report')" /> 
```

**在 $(document).ready() 函数中执行以下行时调用**问题预览方法****

 **```
ko.applyBindings(Report, document.body); 
```

也就是说，无需用户点击预览按钮，预览功能就会被触发。这种行为的原因可能是什么？当我在 HTML 页面本身中查看模型 JavaScript 时，整个工作正常。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-04-12T08:18:38.480

原因是，您确实在调用预览函数（因为写作`functionName`意味着引用该函数，写作`functionName()`意味着调用它）。

所以`data-bind="click: Report.preview"`会按预期工作，但不交出参数。

正如[手册](http://knockoutjs.com/documentation/click-binding.html)所述（关于不同的主题，但这仍然适用）：

> 如果您需要传递更多参数，一种方法是将处理程序包装在接受参数的函数文字中，如下例所示：

```
<button data-bind="click: function(data, event) { myFunction(data, event, 'param1', 'param2') }">
    Click me
</button> 
```

或者在你的情况下：

```
data-bind="click: function() { Report.preview('url/to/report') }" 
```

另一种解决方案是让 preview() 返回一个函数（实际上几乎相同）：

```
preview: function(path) {
    return function() {
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-05T12:33:42.053

另一种解决方案是使用“绑定”构造：

```
data-bind="click: Report.preview.bind($data, 'url/to/report')" 
```

其中 bind() 的第一个参数将成为被调用函数中的“this”。**

# iphone - iOS：将对象传递到 ASIHTTPRequest 块中？

> ID：10119775
> 
> 赞同：1
> 
> 时间：2012-04-12T08:09:15.560
> 
> 标签：iphone, objective-c, reference, asihttprequest, block

我正在尝试创建一个使用 ASIHTTPRequest 的函数，并返回 MyPhotoSource 类的实例，如下所示。

```
- (MyPhotoSource *) photoSourceForURL:(NSURL *)url {

    MyPhotoSource *source;

    __block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];

    [request setCompletionBlock:^{

    .....

    source = [[MyPhotoSource alloc] initWithPhotos:photoArray];

    }];

    [request startAsynchronous];

    return source;

} 
```

当我构建项目时，它给了我*一个只读变量“源”*错误消息的分配。

我尝试了以下修改，但是项目在运行时崩溃。

```
__block MyPhotoSource *source; 
```

# meteor - 我可以通过 __meteor_bootstrap__.app 挂载另一个路由处理程序吗？

> ID：10119777
> 
> 赞同：7
> 
> 时间：2012-04-12T08:09:26.627
> 
> 标签：meteor

我正在构建我的第一个流星应用程序，并且需要能够创建一个新的路由处理程序来处理 oauth 回调。我查看了 server.js 并发现 connect.app 上下文在**meteor_bootstrap**下可用。虽然这似乎不起作用：

```
if (Meteor.is_server) {
  Meteor.startup(function () {
    var app = __meteor_bootstrap__.app;
    app.use('/callback',function (req,res) {
      res.writeHead(404);
      res.end();
      return;
    });
  });
} 
```

想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T05:56:01.483

这个解决方案的问题是你的中间件被放在了堆栈的底部。因此，包罗万象的流星处理程序将始终在您的“/回调”处理程序之前运行。

解决此问题的一种非常老套的方法（直到流星释放其适当的路由支持）是在堆栈顶部的处理程序中拼接：

```
__meteor_bootstrap__.app.stack.splice (0, 0, {
    route: '/hello',
    handle: function (req,res, next) {
        res.writeHead(200, {'Content-Type': 'text/plain'});
        res.end("hello world");
        return;
    }.future ()
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T00:15:19.050

您可以使用[Meteor Router](https://github.com/tmeasday/meteor-router#server-side-routing)智能包实现此目的：

```
Meteor.Router.add({
  '/callback': 404
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T23:17:46.393

一些答案导致路由现在在服务器上是不可行的，而不是hacky。这是一个已知问题，听起来路由是待办事项列表上的热门项目。

# silverlight - 如何使用 MVVM 在 silverlight 4 中绑定 ComboBox 的 SelectionChanged 事件？

> ID：10119778
> 
> 赞同：0
> 
> 时间：2012-04-12T08:09:27.213
> 
> 标签：silverlight

我正在尝试使用 RoutingCommand 绑定 ComboBox 的 SelectionChanged 事件（与绑定按钮的命令相同）。但无法实现。我不喜欢使用任何第三方控件或在属性中编写代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:13:45.520

您确定需要 SelectionChanged 事件吗？只需绑定

```
SelectedItem="{Binding Path=ComboSelected, Mode=TwoWay}" 
```

其中 ComboSelected 是您的 ViewModel 的属性。并在 ComboSelected 属性的设置器中执行您需要的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:25:14.233

你可以使用`System.Windows.Interactivity`dll。

代码将是这样的：

```
<UserControl
 ...
 xmlns:ei="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
 ...>    
 ...
 <Combobox>
    <ei:Interaction.Triggers>
       <ei:EventTrigger EventName="SelectionChanged">
           <ei:InvokeCommandAction Command="{Binding Command}"/>
       </ei:EventTrigger>
    </ei:Interaction.Triggers>
 </Combobox>
 ...    
</UserControl> 
```

# javascript - 在 mousemove() 事件处理程序中按下了哪个鼠标键？

> ID：10119780
> 
> 赞同：5
> 
> 时间：2012-04-12T08:09:37.440
> 
> 标签：javascript, jquery, dom

我使用 JQuery 1.7 来处理事件。

```
function objToStr(obj) {
    return ...string representation of the object
}
$slider.mousedown(function(e) {
    console.log("$slider.mousedown:\n" + objToStr(e) );
});

$slider.mousemove( function(e) {
    console.log("$slider.mousemove:\n" + objToStr(e) );
}); 
```

结果如下：

```
$slider.mousedown: 
altKey = false
 attrChange = undefined 
attrName = undefined 
bubbles = true 
button = 0 
buttons = undefined 
cancelable = true 
clientX = 319 
clientY = 13 
ctrlKey = false 
currentTarget = object 
data = null 
delegateTarget = object 
eventPhase = 3 
fromElement = undefined 
handleObj = object
isDefaultPrevented = (function) 
isImmediatePropagationStopped = (function) 
isPropagationStopped = (function) 
jQuery17209754494933906718 = true 
metaKey = false 
offsetX = undefined 
offsetY = undefined 
originalEvent = object 
pageX = 319 
pageY = 13 
preventDefault = (function) 
relatedNode = undefined 
relatedTarget = null 
screenX = 2876 
screenY = 223 
shiftKey = false 
srcElement = undefined 
stopImmediatePropagation = (function) 
stopPropagation = (function) 
target = object 
timeStamp = 869699957 
toElement = undefined 
type = "mousedown" 
view = object 
which = 1

$slider.mousemove: 
currentTarget = object
data = null 
delegateTarget = object 
exclusive = undefined 
handleObj = object 
isDefaultPrevented = (function) 
isImmediatePropagationStopped = (function) 
isPropagationStopped = (function) 
isTrigger = true 
jQuery17209754494933906718 = true 
namespace = "" 
namespace_re = null 
preventDefault = (function) 
result = undefined 
stopImmediatePropagation = (function) 
stopPropagation = (function) 
target = object 
timeStamp = 1334151903323 
type = "mousemove" 
```

我需要访问`e.which`但`mousemove`显然它没有传递给事件处理程序？

我不想使用[jQuery: Detecting pressed mouse button during mousemove event 中建议的](https://stackoverflow.com/questions/4065992/jquery-detecting-pressed-mouse-button-during-mousemove-event)**标志**算法。因为如果用户将鼠标按钮拖到浏览器窗口之外并在那里释放，当鼠标回到浏览器窗口时，仍然认为它被按下了。然后我必须为鼠标离开窗口时添加处理程序并且它太多了。有没有更简单的方法可以知道在事件处理程序中按下了哪个鼠标按钮？`mousemove()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T19:49:00.753

我可以想象，因为它是一个移动事件，所以找出当时按下的键并不被认为是最重要或有效的，特别是因为该事件被如此频繁地触发。因此，您需要为`mouseup`and举办一个活动`mousedown`。

```
var leftMButtonDown = false;

$slider.mousedown(function(e) {
    if(e.which === 1) leftMButtonDown = true;
});

$(document).mouseup(function(e) {
    if(leftMButtonDown && e.which === 1) leftMButtonDown = false;
});

$slider.mousemove(function(e) {
    if(leftMButtonDown == true) {
        console.log('Left mouse button was down on mousemove event');
    }
}); 
```

而且您必须为鼠标右键等添加更多变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-15T06:52:10.260

```
<body>
<div id="div" style=" height: 100px; border:1px solid red"></div>

<script>
  document.mouseState=-1; //global check mouse state

  document.onmousedown=function(e){
    document.mouseState=e.button;
  }
  document.onmouseup=function(e){
    document.mouseState=-1;
  }

  var d=document.getElementById('div');
  d.onmousemove= function(e){
    d.innerHTML+='; '+document.mouseState;

  }

</script>
</body> 
```

# java - 获取一周的第一个日期

> ID：10119782
> 
> 赞同：1
> 
> 时间：2012-04-12T08:09:49.623
> 
> 标签：java, java-me

我想在 java 中使用 Calendar 和 Date 获取一周的第一个日期，输入为 :: 1\. 月的周数 2\. 月 3\. 年

```
 Calendar cal = Calendar.getInstance();
    int weekOfMonth = Calendar.WEEK_OF_MONTH;
    System.out.println("weekOfMonth : " + weekOfMonth); 
```

在此之后我不知道继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:04:21.957

在 Calendar 类中有一个方法 getFirstDayOfWeek() ，它将以 0 表示周日，1 表示周一，依此类推。以下代码片段基于此，将为您提供一周中的第一个日期。

```
private static Date getFirstDateOfWeek(){
        Calendar cal = Calendar.getInstance(); 
        Date d = Calendar.getInstance().getTime();
        int currDay  =  d.getDay(); // getting the current day
        int startDay =  (currDay - cal.getFirstDayOfWeek()) + 1; // calculate the difference of number days to the current date from the first day of week
        d.setDate(d.getDate() - startDay); // setting the date accordingly.
        return d;
    } 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:22:55.530

```
int year = 2012;
int month = 3 //for April(they start from 0 = January)
int week = 2;
Calendar calendar = Calendar.getInstance();
calendar.clear();
calendar.set(Calendar.YEAR, year);
calendar.set(Calendar.MONTH, month);
calendar.set(Calendar.YEEK_OF_MONTH, week);

Date date = calendar.getTime(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-26T08:06:56.430

# ruby-on-rails - rails 3.1 用不同的语言环境重新加载页面？

> ID：10119783
> 
> 赞同：2
> 
> 时间：2012-04-12T08:09:52.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, rails-3.1

我跟随这个[美丽](http://guides.rubyonrails.org/i18n.html)的网站在我的网站中创建了国际化。

但是，当用户单击语言按钮时，我无法弄清楚如何重新加载具有不同语言环境的页面。

示例：如果用户在这里：

```
/es/events/14 
```

当用户点击英语重新加载到

```
/en/events/14 
```

这是视图：

```
 %li= link_to "eu", change_locale_path(:locale => "eu")
 %li= link_to "es", change_locale_path(:locale => "es")
 %li= link_to "en", change_locale_path(:locale => "en")
 %li= link_to "fr", change_locale_path(:locale => "fr") 
```

这是 ApplicationController 中的方法

```
def change_locale
 if current_user
   current_user.locale = params[:locale]
   current_user.save
 else
   I18n.locale = params[:locale]
 end
 redirect_to root_url  (this is temporal)
end 
```

我应该有什么而不​​是 redirect_to root_url 来重新加载页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T08:33:12.790

```
- [:ru, :ua, :en].each do |locale|
  %li= link_to locale, params.merge(locale: locale) 
```

# php - 如何计算总日期？

> ID：10119785
> 
> 赞同：0
> 
> 时间：2012-04-12T08:09:59.810
> 
> 标签：php, mysql

我有两张桌子，我想得到最后输入的日期。

```
The first table is seeker:

seeker_nic-----username
111-------------ali
222-------------umer
333-------------raza

The second one is requestblood:

id-------seeker_nic-----requireddate
1-------  111 ----------2012/10/9
2 ------- 222-----------2012/5/8
3 ------  111-----------2012/12/12
4 ------- 111-----------2012/11/12
5---------111-----------2012/09/09
6 ------- 222-----------2012/7/9
7 ------- 333 ----------2012/4/4 
```

我通过这个查询列出了最后插入日期的用户

```
SELECT s.username,
(
    SELECT br1.requireddate 
    from bloodrequest as br1 
    where br1.bloodrequest_id = 
    (
        select max(br2.bloodrequest_id)
        from bloodrequest as br2 
        where br2.seeker_nic = s.seeker_nic
    )
) as requireddate
FROM seeker as s 
```

此查询正常工作并向我显示这样的数据。

```
s.no---- username----- requireddate
 1------- ali---------- 2012/09/09
 2------- umer--------- 2012/7/9
 3------- raza--------- 2012/4/4 
```

现在我还想要一个文件来显示特定用户的总日期数.. 像这样

```
s.no---- username----- requireddate-----total dates
 1------- ali---------- 2012/09/09-------4
 2------- umer--------- 2012/7/9---------2
 3------- raza--------- 2012/4/4---------1 
```

任何人都请告诉我如何在这个查询中调整计数..我会很感激.... plzz需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:18:33.530

下面的工作吗？请试一试：

```
SELECT s.username,
(
    SELECT br1.requireddate
    from bloodrequest as br1 
    where br1.bloodrequest_id = 
    (
        select max(br2.bloodrequest_id)
        from bloodrequest as br2 
        where br2.seeker_nic = s.seeker_nic
    )
) as requireddate,
(
    SELECT count(br3.id)
    from bloodrequest as br3
        where br3.seeker_nic = s.seeker_nic
) as total_dates

FROM seeker as s 
```

虽然，它可能不是最有效的。

# hibernate - Hibernate 中默认的乐观锁定

> ID：10119787
> 
> 赞同：21
> 
> 时间：2012-04-12T08:10:13.677
> 
> 标签：hibernate, optimistic-locking

我有一个关于 Hibernate 中的乐观锁定的问题。我正在尝试深入了解 Hibernate 的乐观锁定，但我有一个疑问。Hibernate 使用版本方法（整数或时间戳）来实现乐观锁定。要进行配置，您可以使用 @Version 注释（或 xml 配置）并创建版本属性。另一个选项是使用optimistic-lock="all" 属性在不进行版本控制的情况下进行配置。

我的问题是，如果您没有定义任何版本控制属性并且您没有指定乐观锁属性，那么在这种情况下哪种策略使用 Hibernate？悲观锁定我很确定不是，所以我认为这是乐观锁定，但不知道如何。

非常感谢您的关注。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-12T08:26:33.500

如果您不将 Hibernate 配置为使用乐观锁定，则它根本不使用锁定。因此，在这种情况下，最后一次更新总是获胜。

为了清楚起见，请注意 Hibernate 乐观锁定与 DBMS 事务隔离完全不同。Hibernate 乐观锁定仅适用于您在一个事务中加载对象、修改它并稍后将其保存在另一个事务中的情况。在这种情况下，乐观锁定可确保其他一些事务在两者之间没有更改数据库中的该对象。但是，乐观锁定不会影响并发事务的隔离——因此，无论是否启用 Hibernate 锁定，DBMS 内部用于实现事务隔离的锁（乐观或悲观）仍然有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-31T22:53:14.033

@axtavt，你说得对，但是关于hibernate如何在没有`@Version`列的情况下实现乐观锁定的问题。

今天有四种`OptimisticLockType`选择：

```
/**
 * Perform no optimistic locking.
 */
NONE,
/**
 * Perform optimistic locking using a dedicated version column.
 *
 * @see javax.persistence.Version
 */
VERSION,
/**
 * Perform optimistic locking based on *dirty* fields as part of an expanded WHERE clause restriction for the
 * UPDATE/DELETE SQL statement.
 */
DIRTY,
/**
 * Perform optimistic locking based on *all* fields as part of an expanded WHERE clause restriction for the
 * UPDATE/DELETE SQL statement.
 */
ALL 
```

我认为这足以回答最初的问题。

# qlikview - 如何使用 QlikView 移动目录中的文件

> ID：10119789
> 
> 赞同：3
> 
> 时间：2012-04-12T08:10:17.767
> 
> 标签：qlikview

我们可以使用 QlikView 脚本从一个文件夹中移动文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:04:06.930

在查看 QlikCommunities 之后，看起来这是不可能的。如果您想从 QlikView Script 触发移动，您可以使用[VBScript](http://community.qlikview.com/message/35012#35012)或[cmd.exe](http://community.qlikview.com/message/68555#68555)。

干杯，

简

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T21:13:51.873

您可以使用以下命令

```
EXECUTE cmd.exe /c move  "source directory" "destination Directory" 
```

# rss - 从 rss (xml) 提要中删除 CDATA 标记

> ID：10119791
> 
> 赞同：0
> 
> 时间：2012-04-12T08:10:21.033
> 
> 标签：rss, xml-parsing, cdata

我最好先说我不是程序员。我正在修改购物车，现在遇到了超出我的工资等级的问题。购物车允许我在页面上的一个块中显示 rss 提要的输出。问题是提要的大部分内容都在 CDATA 标记内，因此无法正确显示。我需要从提要中去除 CDATA 标签。

处理提要的代码是

```
 function fn_get_rss_feed($data)
    {
if (!empty($data['feed_url'])) {
    $data_key = 'rss_data_cache_' . (isset($data['block_data']['block_id']) ? $data['block_data']['block_id'] : 0);

    if (!empty($data['cache_time'])) {
        Registry::register_cache($data_key, $data['cache_time'], CACHE_LEVEL_TIME);
    }

    if (Registry::is_exist($data_key) == false) {
        $limit = !empty($data['max_item']) ? $data['max_item'] : 3;
        $rss_data = array();

        $rss = simplexml_load_string(fn_get_contents($data['feed_url']));

        if (!empty($rss)) {
            $it = 0;
            $items = array();
            foreach ($rss->channel->item as $item) {
                if ($it > $limit) {
                    break;
                }

                $items[] = array(
                    'title' => (string)$item->title,
        'description' => (string)$item->description,
                    'pubDate' => (string)$item->pubDate,
                    'link' => (string)$item->link
                );

                $it++;
            }

            $rss_data = array(array(
                $items,
                (string)$rss->channel->link,
                $data['feed_url']
            ));

            Registry::set($data_key, $rss_data);
        }

        return $rss_data;
    } else {
        return Registry::get($data_key);
    }
     }

        return array();
       } 
```

它是围绕它的 CDATA 标签的“描述”。搜索网络，我发现此代码用于从字符串中删除 CDATA 标记。

```
 function strip_cdata($string)
    {    preg_match_all('/<!\[cdata\[(.*?)\]\]>/is', $string, $matches);
    return str_replace($matches[0], $matches[1], $string);
    } 
```

我假设有一种方法可以使用该函数从描述中去除 cdata 标签 - 或者可能没有。RSS 提要的输出通过 .tpl 文件显示。

任何和所有的帮助都非常感激。

布鲁斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:22:07.103

只是换行

```
 $rss = simplexml_load_string(fn_get_contents($data['feed_url'])); 
```

至

```
 $rss = simplexml_load_string(fn_get_contents($data['feed_url']), 'SimpleXMLElement', LIBXML_NOCDATA); 
```

应该管用。第三个参数指示 simplexml 函数使用的底层库将 CDATA 的内容合并到文本节点中（参见[http://php.net/manual/en/function.simplexml-load-string.php](http://php.net/manual/en/function.simplexml-load-string.php)和[http:// /www.php.net/manual/en/libxml.constants.php](http://www.php.net/manual/en/libxml.constants.php)）。

# javascript - 为什么 Firefox 对“选择”标签上的“点击”事件的反应与 Webkit 和 IE 不同？

> ID：10119793
> 
> 赞同：24
> 
> 时间：2012-04-12T08:10:33.010
> 
> 标签：javascript, html, internet-explorer, firefox, webkit

我意识到 Firefox 处理标签上的*点击*事件`<select>`与 Webkit/IE 不同，我不知道为什么或如何解决这种差异。

具体来说，Webkit/IE 将每个*点击*事件`<select>` 视为点击“选择”**和**点击其中一个下拉菜单的组合**，**`<option>`如下图所示：

第一次点击：

![第一次点击](../Images/0a315046c47cff033af24ac3439707ba.png)

第二次点击：

![第二次点击](../Images/8f36d91d1835ba14d41def0f8c53ee2d.png)

在 Webkit/IE 中，只有在两次点击都完成后才会触发*click事件。*

但是，在Firefox中，第一次点击`<select>`标签被视为*点击*事件，第二次点击选择`<option>`被视为另一个*点击*事件。因此，在 Firefox 中触发了**两个** *点击*事件，而在 Webkit/IE 中触发了**一个相同的操作。**

现在在代码示例中演示它，假设我们有：（[JSfiddle 链接](http://jsfiddle.net/SBZD8/)）

```
<select id="sel">
    <option>one</option>
    <option>two</option>
    <option>three</option>​
</select>
<script>
function select() {
    $("#sel").one("click", function(event) {
        console.log('mouse down!');
        $("#sel").one('click', function() {
            console.log('mouse down again!');
            $("#sel").off();
            select();
        });
    });
}
$(document).ready(function() {
    select();
});
</script> 
```

在 Webkit/IE 中，执行上图中所示的一组操作（第一次）将给出输出：

```
mouse down! 
```

在 Firefox 中，它将给出：

```
mouse down!
mouse down again! 
```

为什么会这样，我该如何解决？

编辑：我尝试使用没有 jQuery 的纯 JavaScript，结果保持不变。

编辑2：更多上下文，我最初回答了这个问题：[onclick on option tag not working on IE and chrome](https://stackoverflow.com/questions/9972280/onclick-on-option-tag-not-working-on-ie-and-chrome/10058960#10058960)并为我的回答赢得了赏金。但是，正如操作员后来指出的那样，我的解决方案不适用于 Firefox。我决定深入挖掘来解决这个问题，因此提出了这个问题，我奖励我从该解决方案中获得的 50 赏金。本质上，问题是创建一个选择菜单，只要做出选择，即使选择相同，它也会触发一个事件。由于不同的浏览器实现，如果可能的话，这已被证明比预期的要难。

编辑 3：我完全了解`onchange`，但这里的问题与`onchange`您是否仔细阅读无关。我需要让每个选择触发一个事件*，即使*它们是相同的选择（不会触发`onchange`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T12:12:02.590

为什么不使用`onchange`事件？

```
$("#sel").change(function(){
    $('body').append("<br/> Option changed");
}); 
```

这是[小提琴](http://jsfiddle.net/juzerali/j2WwY/3/)

但即使选择相同，它也不会触发。解决方法是按照另一个答案中的建议使用像 Chosen 这样的插件。

编辑：从哲学上讲，`select`元素并不意味着这种功能。对于与标签`change`相关的大多数用例，事件就足够了。`select`您想要的功能，即知道用户是否对元素进行了选择（即使它没有更改），不适合`select`标签的功能模型。`select`如果他/她不想更改选择，从逻辑上讲，没有人会想点击一个元素。

为了满足您的要求，您可以在选择标签之外给出一个**Go** 并调用通常对element事件执行的相同函数。否则给出一个**悬停卡/悬停菜单** 而不是.`button``onclick``onchange``select`**`select`**

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T07:28:39.943

经过多次实验和搜索，我开始确信，不同浏览器中这种特殊的不同行为很难解决，如果可能的话。

然而，我意识到，我可以通过使用[jQuery UI 选择菜单](http://view.jqueryui.com/selectmenu/demos/selectmenu/default.html)或[选择](https://github.com/harvesthq/chosen)来创建选择菜单而不是使用`<select>`标签来解决问题。这种方式`click`将触发事件`<ul>`或`<li>`标记，这在我测试的所有浏览器中都是一致的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T03:54:32.117

> 本质上，问题是创建一个选择菜单，只要做出选择，即使选择相同，它也会触发一个事件。

这在*技术上*确实（排序），但在 FF 中，它会在您单击打开和单击关闭时触发（您实际上可以一键完成，这在 Safari 和 Firefox 中会产生完全相同的效果）。但这*是*同一个事件。（点击触发触发`$('#sel')`）；

```
$("#sel").click(function(event) {
    if($(event.target).is('option')) {
        $(this).closest('select').click();
        return true;
    }
    console.log(event.target);
}); 
```

我说它“排序”的原因是，如果您从选项卡上选择下拉菜单并使用箭头键，它就无法处理。我认为，如果即使选择了事件相同的项目，您也需要触发事件，您需要以不同的方式进行处理。对于作为开发人员的我来说，如果这是我的项目，那么如果我在一个选择框上选择一个项目而不用触摸鼠标，这是不可接受的（这意味着如果用户来到我的网站并进行交互）使用没有鼠标的选择框，它不会做他甚至不知道它应该做的事情，可能会使整个事情不起作用，等等）。

我们可以在上班的时候玩一整天`.click()`，但这并不是真正的解决方案，即使我们实现了最初的目标。（哦，我永远无法在 Chrome 中触发**任何东西）。**

就像我在评论中所说的那样，我认为这与他们如何处理与选择的交互有关。几乎感觉好像 Safari 的选择实际上并没有出现在页面上……它排序创建了这个漂亮的元素，`<option>`当您单击它时，它的行为和看起来就像一个元素列表，但事实并非如此。可能是为什么当您第一次单击它时它也不会触发。当您单击它时，Webkit 不会将其视为“真实”元素，并且只会在您关闭它时触发单击选择，从未与“真实”选项进行过交互。

更改 HTML 可能是唯一的方法（就像 Chosen 一样）。具有讽刺意味的是，某些选择的元素（看起来像下拉菜单的元素）不能通过 tab 键选择……至少不能在他们的[演示页面上](http://harvesthq.github.com/chosen/)选择（参见“标准选择”）。但这至少迫使我点击它，因此它会触发与鼠标相关的事件。

无论如何，我讨厌未解决的问题，但看起来没有真正的解决方案可以在所有浏览器`.click()`中工作`<select>`，我们应该开始关注替代解决方案。对不起 ：-（**

# cuda - CUDA 编译器如何知道扭曲的发散行为？

> ID：10119796
> 
> 赞同：2
> 
> 时间：2012-04-12T08:10:53.930
> 
> 标签：cuda, nvcc

**CUDA Programming Guide** (v4.1)在 Sec 5.4.2 中描述了关于**谓词指令**的内容：

> 仅当分支条件控制的指令数小于或等于某个阈值时，编译器才将分支指令替换为谓词指令：如果编译器确定该条件可能产生许多发散扭曲，则此阈值为 7，否则是4。

1.  一个条件如何产生**许多**不同的扭曲？给定条件只能将经线分成两部分。*许多*在这里是什么意思？
2.  即使上述内容是有道理的，编译器如何知道扭曲的运行时发散行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:01:48.210

经线永远不会“分裂”。它们要么需要“条件执行”（因此在屏蔽不参与线程的情况下执行）来服务有条件的不同代码路径，要么不需要。

至于一个条件如何产生多个不同的扭曲，请考虑以下人为设计的示例：

```
if (threadIdx.x < 128) {
   // Only first four warps process here
   int modthirtytwo = threadIdx.x % 32;

   if (modthirtytwo == 0) {
      // Action A only first thread in the warp
   } else {
      // Action B for the other threads in the warp
   }
} 
```

在这里，代码可以产生多个不同的扭曲，编译器应该能够在编译时对行为进行建模。如果为内核的编译器指定了启动边界，那就更好了。将此情况与仅使用一个扭曲的共享内存减少进行比较。

```
if (threadIdx.x < 32) {
   if (threadIdx.x < 16)  shm[threadIdx.x] += shm[threadIdx.x+16];
   if (threadIdx.x < 8)   shm[threadIdx.x] += shm[threadIdx.x+8];
   if (threadIdx.x < 4)   shm[threadIdx.x] += shm[threadIdx.x+4];
   if (threadIdx.x < 2)   shm[threadIdx.x] += shm[threadIdx.x+2];
   if (threadIdx.x == 0)  shm[0] += shm[1];
} 
```

在这里，分歧仅限于每个块的单个扭曲。这段文字的全部内容是两种情况下的编译器行为可能不同。

似乎“新”编译器（它已在 OpenCL 中使用了几年）在分支变得更经济之前应该使用多少谓词指令具有启发性。而且指令流水线中的很多分支似乎对性能不利，所以当编译器可以计算出代码会产生更高的“分支密度”时，它会更喜欢谓词指令而不是分支。

# java - 从 zxing encode 取回生成的二维码

> ID：10119802
> 
> 赞同：1
> 
> 时间：2012-04-12T08:11:23.973
> 
> 标签：java, android, zxing

我一直在使用zxing（包括我项目中的core.jar）使用示例生成二维码，代码如下：

```
Intent intent = new Intent("com.google.zxing.client.android.ENCODE");
intent.putExtra("ENCODE_TYPE", type);
intent.putExtra("ENCODE_DATA", data);
intent.putExtra("ENCODE_SHOW_CONTENTS", false);
startActivity(intent); 
```

但是，我不想调用新的活动，而是想取回编码的图像，这样我就可以在自己的自定义活动中使用该图像。

有没有办法用 zxing 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:19:45.263

你想要[zxing.encoder.Encoder.encode()](http://zxing.org/w/docs/javadoc/com/google/zxing/qrcode/encoder/Encoder.html#encode%28java.lang.String,%20com.google.zxing.qrcode.decoder.ErrorCorrectionLevel,%20com.google.zxing.qrcode.encoder.QRCode%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:35:47.450

不，它不会通过 Intent 返回编码的 QR 码。（尽管您的用户可以按菜单，然后按共享，以发送或保存图像。）您需要使用`Encoder`类对内容进行编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T08:38:53.307

有点乱，但如果你看[这个](http://code.google.com/p/zxing/source/browse/trunk/android/src/com/google/zxing/client/android/encode/QRCodeEncoder.java)，它会向你展示你的意图是如何转化为实际的二维码的。您需要撕掉您想要的特定部分，但该`encodeAsBitmap`功能看起来像是为您提供了一个`android.graphics.Bitmap`您可以使用的功能。

# twitter - iFrame 推特关注按钮回调

> ID：10119804
> 
> 赞同：4
> 
> 时间：2012-04-12T08:11:35.270
> 
> 标签：twitter, twitter-follow

我无法使用 iFrame 版本让回调为 twitter 关注按钮工作。这是我的代码：

```
<iframe allowtransparency="true" frameborder="0" scrolling="no"
        src="https://platform.twitter.com/widgets/follow_button.html?screen_name=gaur_aditya&show_screen_name=true&show_count=true"
        style="height:20px;"></iframe>

<script src="//platform.twitter.com/widgets.js" type="text/javascript"></script>
<script type="text/javascript">
    twttr.events.bind('follow', function(event) {
        console.log(event);
        var followed_user_id = event.data.user_id;
        var followed_screen_name = event.data.screen_name;
    });
</script> 
```

我试用了[这个](https://stackoverflow.com/a/8312716/593418)版本，效果很好。但是使用 iFrame 版本我无法使其工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T09:19:10.103

最后经过一番研究，发现 iFrame 实现中不支持回调。这里是关于这个问题的讨论：[Twitter follow button iframe integration and callbacks](https://dev.twitter.com/discussions/6032)

# linux - linux中网络摄像头的亚像素库

> ID：10119810
> 
> 赞同：0
> 
> 时间：2012-04-12T08:12:16.897
> 
> 标签：linux, jpeg, webcam, subpixel

是否有任何库可以在亚像素模式下在 linux 上使用网络摄像头？我需要快速的帧速率，而且我没有时间压缩为 jpeg（而且 jpeg 是有损的 - 我需要从传感器获得的所有信息）。我猜压缩是在网络摄像头固件内部发生的，所以它可以在亚像素级别工作吗？

我说的是特定的网络摄像头 - a4tech PK-635K。这里是[http://a4tech.com/product.asp?cid=77&scid=89&id=233](http://a4tech.com/product.asp?cid=77&scid=89&id=233)

编辑：如您所见，我不需要网络摄像头来拍摄普通视频。我只需要尽可能快地捕获来自 cmos 传感器的信息。例如，我只想从红色像素中获取信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:29:44.637

这始终取决于您拥有的网络摄像头和驱动程序。如果您使用的是 v4l2，您可以使用 mplayer 尝试所有模式，看看哪种模式最适合您。例如

```
mplayer -cache 128 -tv driver=v4l:width=640:height=480:outfmt=i420 -vc rawi420 -vo xv tv:// 
```

您可以为参数插入不同的格式`-vc`

但本质上，我认为你还没有完全理解这个问题，因为相机会压缩图片以使其通过网络更快，所以你更早看到它：相机可能会在硬件中进行压缩，或者至少在专用芯片中进行压缩并且会做得非常快。延迟来自您要传输的数据量。

所以这是一个两难的选择：要么是未压缩的亚像素质量，要么是由于压缩而导致质量变慢或变差，但速度更快。

旁注：许多网络摄像头在较慢的分辨率下支持更好的帧速率。

# python - 与通用列表并行运行的函数，用于两者

> ID：10119819
> 
> 赞同：0
> 
> 时间：2012-04-12T08:13:14.207
> 
> 标签：python, multithreading, list

我想并行运行 2 个函数，并使用一个函数的返回值（连续存储在列表中）用于另一个函数。

我已经编写了一些功能来实现上述功能（从这个论坛上的一些帖子中获得帮助）。

```
u=[]

def func_a():
Num1=10000
for i1 in range(callNum1):
    ul = <some_function_returns_a_value>
    u.append(ul)

def func_b():
Num2=10000
time.sleep(30)
for i2 in range(Num2):
    ul1=u.pop(i2)
    print ul1

def RunP(*fns):
    proc = []
    for fn in fns:
        p = Process(target=fn)
        p.start()
        proc.append(p)
    for p in proc:
        p.join() 
```

我将这两个函数都称为如下

```
RunP(func_a, func_b) 
```

但是当我运行它时，我得到了这个错误：

```
RunP(func_a, func_b)
Process Process-2:
Traceback (most recent call last):
  File "/usr/lib/python2.4/site-packages/multiprocessing-2.6.2.1-py2.4-linux-i686.egg/multiprocessing/process.py", line 237, in _bootstrap
    self.run()
  File "/usr/lib/python2.4/site-packages/multiprocessing-2.6.2.1-py2.4-linux-i686.egg/multiprocessing/process.py", line 93, in run
    self._target(*self._args, **self._kwargs)
  File "test.py", line 419, in func_b
    ul1=u.pop(i2)
IndexError: pop from empty list 
```

请帮助我完成预期的任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T08:21:25.563

听起来你想使用[`Queue`](http://docs.python.org/dev/library/multiprocessing.html#exchanging-objects-between-processes).

这是一个与您的代码有些相似的快速'n'dirty示例：

```
import multiprocessing

def func_a(q):
    q.put(3)
    q.put(2)
    q.put(1)

def func_b(q):
    v = q.get()
    print 'func_b prints:', v
    v = q.get()
    print 'func_b prints:', v
    v = q.get()
    print 'func_b prints:', v

if __name__ == '__main__':
    q = multiprocessing.Queue()
    p1 = multiprocessing.Process(target = func_a, args = (q,))
    p1.start()
    p2 = multiprocessing.Process(target = func_b, args = (q,))
    p2.start()
    p1.join()
    p2.join() 
```

当我运行它时，它会打印：

```
func_b prints: 3
func_b prints: 2
func_b prints: 1 
```

# iphone - 获取谷歌地图的图像

> ID：10119824
> 
> 赞同：0
> 
> 时间：2012-04-12T08:13:29.503
> 
> 标签：iphone, objective-c, cocoa-touch, google-maps, mapkit

我正在尝试获取一张谷歌地图的快照。但是，mapkit 似乎没有类似的功能。有没有办法在不违反谷歌协议的情况下获取谷歌地图的一部分的图像文件？

PS 不能选择 iphone 的屏幕截图，因为我可能需要一个大部分不在屏幕上的部分的快照。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T08:15:35.023

您可以使用静态地图 API：

[https://developers.google.com/maps/documentation/staticmaps/](https://developers.google.com/maps/documentation/staticmaps/)

# c# - File.Move 来自 ListView 控件的图像

> ID：10119825
> 
> 赞同：0
> 
> 时间：2012-04-12T08:13:35.860
> 
> 标签：c#, image, file, listview, imagelist

我正在成功地将图像缩略图加载到 ListView 控件中：

```
lsvImageThumbs.Items.Clear();
        imgl_ImageThumbs.Images.Clear();

        string[] files = Directory.GetFiles(@"C:\Documents and Settings\Etc\Desktop\Test");

        for (int indexFiles = 0; indexFiles < files.Length; indexFiles++)
        {
            Image img = Image.FromFile(files[indexFiles]);
            DirectoryInfo dinfo = new DirectoryInfo(files[indexFiles]);
            imgl_ImageThumbs.Images.Add(dinfo.Name, img);
            lsvImageThumbs.Items.Add(files[indexFiles], dinfo.Name, indexFiles);
        } 
```

然后我可以选择图像缩略图并希望将文件移动到目录：

```
if (dlg.ShowDialog() == DialogResult.OK)
                {
                    foreach (ListViewItem items in lsvImageThumbs.SelectedItems)
                    {
                        //File.Copy(items.Name, dlg.SelectedPath + "\\" + items.Text);
                        File.Move(items.Name, dlg.SelectedPath + "\\" + items.Text);
                        MessageBox.Show(items.Text + " Taken");
                    }
                } 
```

File.Copy 工作没有问题，但对于 File.Move 我收到以下错误：

```
The process cannot access the file because it is being used by another process. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:25:06.463

请注意，我也在 MSDN 论坛上回答了您同样的问题。

Image.FromFile 锁定文件，直到图像被释放，这就是您收到错误的原因。您可以通过将文件复制到内存中并在 ImageList 中使用副本来解决此问题。

例子：

```
ImageList list = new ImageList();

Image diskImage = Image.FromFile("mypic.jpg");
Image memoryImage = new Bitmap(diskImage);

diskImage.Dispose(); // Releases the lock

list.Images.Add(memoryImage); 
```

更改您的代码：

```
lsvImageThumbs.Items.Clear();
imgl_ImageThumbs.Images.Clear();

string[] files = Directory.GetFiles(@"C:\Documents and Settings\Etc\Desktop\Test");

for (int indexFiles = 0; indexFiles < files.Length; indexFiles++) {
    Image img = Image.FromFile(files[indexFiles]);

    // Create a copy of the image in memory
    Image memImg = new Bitmap(img);

    // Dispose of the original and release the file system lock
    img.Dispose();

    DirectoryInfo dinfo = new DirectoryInfo(files[indexFiles]);

    // Updated this line to add memImg
    imgl_ImageThumbs.Images.Add(dinfo.Name, memImg);

    lsvImageThumbs.Items.Add(files[indexFiles], dinfo.Name, indexFiles);
} 
```

您的 File.Move 现在应该可以工作了。
[MSDN 上的 Image.FromFile](http://msdn.microsoft.com/en-us/library/stf701f5.aspx)

# azure - 从命令提示符部署到 Azure

> ID：10119833
> 
> 赞同：1
> 
> 时间：2012-04-12T08:14:01.603
> 
> 标签：azure, azure-deployment

我目前在从 Visual Studio 内部部署时遇到问题（基本上 Visual Studio 在创建包时崩溃）。我知道如何自己用 cspack 构建包，所以我制作了一个批处理文件来构建项目并创建包。但是也可以从命令行部署包吗？现在我正在使用管理门户，但如果我也可以将它放入脚本中会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T08:34:49.057

您可以使用此处的 Windows Azure PowerShell Cmdlet 进行部署：[http](http://wappowershell.codeplex.com) ://wappowershell.codeplex.com 。

使用更新部署或新部署。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T14:59:08.210

除了使用 PowerShell，如果您正在处理批处理文件，您还可以使用**CSManage.exe ：** [http ://code.msdn.microsoft.com/windowsazure/Windows-Azure-CSManage-e3f1882c](http://code.msdn.microsoft.com/windowsazure/Windows-Azure-CSManage-e3f1882c)

例子：

```
csmanage.exe /create-deployment /slot:staging /hosted-service:MyHostedService /name:MyDeployment /label:MyLabel /config:./ServiceConfiguration.cscfg /package:http://myaccount.blob.core.windows.net/packages/MyApplication.cspkg 
```

# python - 从 PDF（库或实用程序）中提取表单数据

> ID：10119836
> 
> 赞同：2
> 
> 时间：2012-04-12T08:14:27.327
> 
> 标签：python, forms, pdf, extract

我想使用库从 PDF 中提取表单数据，最好是打包在 ubuntu 中的免费软件库。

例如，假设我有一个 HTML 表单，但我还希望用户可以提交一个填写好的 PDF 表单而不是 HTML 表单。

所以，我正在寻找的是一个库（或简单的 CLI 实用程序），它以 PDF 作为输入，并允许我按名称提取填写的字段，就像使用 HTML 一样。

我试过pdftotext，但这并没有真正保留信息，它只是将PDF呈现为文本。我尝试了 PDFminer，但它似乎根本不起作用（至少在我的测试 PDF 中）（只是得到空输出）。

如果它是一个库，我对语言不太挑剔，但 python 将是一个加号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:21:16.263

我正在使用[pdftk](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)提取一些数据并操作 pdf，但我不确定是否可以按照您需要的方式处理填写的表格。

# c# - 在一个应用程序中使用多个数据库

> ID：10119840
> 
> 赞同：3
> 
> 时间：2012-04-12T08:14:39.867
> 
> 标签：c#, sql, design-patterns, rdlc, multiple-databases

我即将开始一个相当大的项目，所以我正在收集有关我在阅读项目文档和客户请求时预测的一些问题的信息。其中一个问题是：

我的客户是一家拥有多个部门的公司，每个部门都使用自己的数据库。现在，我的任务是制作一个所有这些细分都将使用的管理应用程序（它们都执行相同的任务，只是因为它们的地理位置和一些对我的问题不重要的法律法规而被划分） . 所以，我的问题是如何制作一个能够在数据库之间切换的应用程序。通常，我可以通过创建一个包含输入字段（例如文本框或组合框）的 WinForm 来做到这一点，用户可以在其中选择要使用的连接，但由于这些应用程序必须生成报告，我对这种方法有疑问。到目前为止，我一直在处理使用 TableAdapters 创建的数据集的 .rdlc 报表。因此，如果我以编程方式创建数据集，我不知道如何生成报告。但是，如果我基于 TableAdapters 数据集创建报表，我不知道如何更改 TableAdapters 连接字符串（除了复制 TableAdapters，因此每个人都使用另一个连接字符串，但这根本没有效率）。我正在使用 C# 创建 WinForms 和 SQL 来处理数据库。请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:21:23.673

尝试使用多个 Web 服务和服务总线的组合，如下图右侧的树：

![在此处输入图像描述](../Images/a6b3424134d23cd04e7d26850c276393.png)

请注意，这是高级 C#，但非常易于维护且耦合度低！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T08:24:07.730

为此，我建议您使用**工厂设计模式**来创建对象，即使您在应用程序中添加任何不同的数据库，这也将帮助您创建正确的数据库对象

```
//factory inerface
public inteface DataBaseCommonFactory()
{
   ///you all coomon methods are here
  public bool createuser();
}

//DAtabase specifc classes

//sql server
public class SqlServer : DataBaseCommonFactory
{
   public bool createuser()
   {
      //implementation
   }
}

//oracle server
public class OracleServer : DataBaseCommonFactory
{
   public bool createuser()
   {
      //implementation
   }
}

//mysql server
public class MySqlServer : DataBaseCommonFactory
{
   public bool createuser()
   {
      //implementation
   }
}

public class DataBaseCreationFactory
{
   public DataBaseCreationFactory(string DatabaseType)//this might be enum
   {
      if(DatabaseType == "Sqlserver")
        return new SqlSErver();
      if(DatabaseType == "Oracleserver")
        return new OracleSErver();    //same for mysql or anyother datavase
   }
}

public class Client 
{
   public void mymethod()
   {
      DataBaseCommonFactory sqlobject =  new DataBaseCreationFactory("Sqlserver")
      sqlobject.CreateUser();
      //if oracle is ther than parameter is orcalserver - or anyother database
    }
} 
```

# php - 谷歌图片搜索 API

> ID：10119842
> 
> 赞同：2
> 
> 时间：2012-04-12T08:14:59.707
> 
> 标签：php, search, google-image-search

我有一个网站，用户可以在其中提交图片。我想用这些图片自动搜索谷歌，以尽量减少图片从其他网站被盗的可能性。我知道 Firefox 扩展，但这需要我右键单击每张图片并等待结果出现。我想自动化这个。

我一直在寻找 API，但 Google Image Seach API (https://developers.google.com/image-search/) 清楚地提到它已被弃用。我还找到了一个 Google 自定义搜索 API，但这似乎是为那些想要搜索自己的网站的人构建的（这不是我想要的）。

我想做 Firefox 扩展所做的事情，即向 Google 图片搜索提交图像，并在 PHP 中检索结果页面。

使用 API 的最佳方式，但如果不可用：如何将图像上传/编码到 Google 以便可以搜索？有人知道更多吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T12:13:48.330

**更新：** 不推荐使用以下 API。

> Google Image Search API 已于 2011 年 5 月 26 日正式弃用。它将根据我们的弃用政策继续工作，但您每天可以提出的请求数量可能会受到限制。我们鼓励您使用现在支持图像搜索的自定义搜索 API。 [https://developers.google.com/image-search/v1/jsondevguide](https://developers.google.com/image-search/v1/jsondevguide)

您可以在以下位置获得所有详细信息

[https://developers.google.com/image-search/](https://developers.google.com/image-search/)

[https://developers.google.com/image-search/v1/](https://developers.google.com/image-search/v1/)

使用 Google 帐户登录。填写详细信息即可获取api。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-12-05T02:37:30.037

现在我找到了解决方法 SerpAPI。

这个网络服务可以搜索谷歌图片并返回一个干净的 json。它与大多数编程语言集成：python、php、java、golang、nodejs...

[https://serpapi.com/images-results](https://serpapi.com/images-results)

谷歌限制每天的搜索次数。但这项服务提供无限搜索......

# ios - 在 iOS 应用中销售内容（电影、歌曲）

> ID：10119844
> 
> 赞同：0
> 
> 时间：2012-04-12T08:15:06.170
> 
> 标签：ios

我正在开发适用于 iOS 的应用程序。我们想从我们的网上商店销售数字内容。用户将选择电影，付费并下载到手机。所以……这个付款程序怎么办，我真的不明白（我要做什么？

# php - 从 mysql 数据库中添加小时数，然后通过 PHP 将它们添加到 HTML 表中

> ID：10119845
> 
> 赞同：1
> 
> 时间：2012-04-12T08:15:09.650
> 
> 标签：php, mysql, html-table

正如您可能会说的那样，我不擅长将 mysql 与 PHP 一起使用！所以这是我的问题：

我有一个名为*TimeRecords*的 mysql 表，其中包含以下列：ID、Date、StartTime、EndTime、Break 和 Location。

我有一个使用此 SELECT 显示该信息的表

```
$result = mysql_query("
        SELECT * FROM TimeRecords
        WHERE Date
        BETWEEN '{$CurrentYear}-{$CurrentMonth}-1'
        AND '{$CurrentYear}-{$CurrentMonth}-31'
    "); 
```

这个代码：

```
<table>
    <tr>
        <th>Location:</th>
        <th>Date:</th>
        <th>Start:</th>
        <th>End:</th>
        <th>Break?</th>
        <th>Total Hours</th>
    </tr>

    <?php 
        while($row = mysql_fetch_array($result)) {

            echo "<tr>";
                echo "<td>". $row['Location'] . "</td>";
                echo "<td>". $row['Date'] . "</td>";

                echo "<td>" . date("h:i A", ($row['StartTime'])) . "</td>";
                echo "<td>" . date("h:i A", ($row['EndTime'])) . "</td>";

                echo "<td>";

                if ($row['Break']==1){
                    echo "Yes";
                }
                else {
                    echo "No";
                }
                echo "</td>";

            echo "</tr>";
        }

?>
</table> 
```

如何在表格中创建另一个减去 EndTime 和 StartTime 以获得当天工作的总小时数？

据我了解，我可以使用此 SELECT 获取该信息：

```
$TimeWorked = mysql_query("
        SELECT ((EndTime - StartTime)/60/60) AS TimeWorked
        FROM TimeRecords
        ") 
```

但我不确定我应该怎么做才能在循环中显示它。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:22:04.203

尝试：

```
$result = mysql_query("
        SELECT a.*, ((a.EndTime - a.StartTime)/3600) AS TotalHours FROM TimeRecords a
        WHERE Date
        BETWEEN '{$CurrentYear}-{$CurrentMonth}-1'
        AND '{$CurrentYear}-{$CurrentMonth}-31'
    "); 
```

看看这是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:27:32.767

```
$starttime = $row['StartTime']
$endtime = $row['EndTime']
echo "<td>" . date("h:i A", ($starttime)) . "</td>";
echo "<td>" . date("h:i A", ($endtime)) . "</td>";
echo "<td>" . ($endtime - $starttime)/3600 . "</td>"; 
```

我不完全确定我明白你的意思，但这对你有用吗？

# jquery - jQuery动画不流畅

> ID：10119846
> 
> 赞同：2
> 
> 时间：2012-04-12T08:15:20.063
> 
> 标签：jquery, scroll, easing

如前所述，我的页面流动性有问题，我认为 jquery 在某种程度上涉及。

我创建了以下一页网站。

[http://cgeese.de/tests/Test02/](http://cgeese.de/tests/Test02/)

我将 jQuery 与 js 插件一起使用

*   本地滚动
*   scrollto（均由 Ariel Flesler 提供，[http](http://flesler.blogspot.de/) ://flesler.blogspot.de/ ）
*   缓动（由 GSGD，[http](http://gsgd.co.uk/sandbox/jquery/easing/) ://gsgd.co.uk/sandbox/jquery/easing/ ）

**问题**

单击链接可将页面滚动到目标 div，并轻松反弹（由 easing.js 提供）。它在技术上工作得很好，但它对我的口味来说不够光滑。

我认为缓动中口吃的问题是我滥用了这些插件之一，但我似乎无法在代码中找到错误。

**问题**

为什么动画口吃，我怎样才能让它更流畅？

**更新** 有任何线索吗？似乎使用 jQuery-build-in 缓动看起来更好一些，但也有同样的问题。所以我想这不是 easing-plugin，它留下了 Ariel Feslers 的东西。有没有像他这样的插件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T08:26:23.810

它在铬上看起来很流畅。更改缓动类型不会有太大变化...

您的导航是位置：固定，是什么导致每个导航关键帧的整个页面重绘/重排。你可以用 chrome canary 或这个技巧来可视化它：http: [//paulirish.com/2011/viewing-chromes-paint-cycle/](http://paulirish.com/2011/viewing-chromes-paint-cycle/)

为滚动设置动画也会触发重绘。还要尽可能多地删除 CSS3 阴影和渐变，它们很难为浏览器制作动画。

我认为firefox有一个插件。

你可以优化这个我设置它的位置：绝对，并将你的内容放在一个溢出隐藏的div中......（某种假体）

这是一篇关于它的优秀文章：http: [//www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/](http://www.stubbornella.org/content/2009/03/27/reflows-repaints-css-performance-making-your-javascript-slow/)

您可以做的另一件事不是为滚动设置动画，而是为它自身的元素设置动画，将它们放置在绝对定位的元素中，然后为该元素设置动画。

关于重绘/回流的一些一般准则：[https ://developers.google.com/speed/articles/reflow](https://developers.google.com/speed/articles/reflow)

# python - web.py safeunicode 函数错误？

> ID：10119849
> 
> 赞同：0
> 
> 时间：2012-04-12T08:15:39.683
> 
> 标签：python, security, exception, decode, web.py

我在 web.py utils.safeunicode 函数上发现了一个错误。版本是 0.36

```
>>> import web
>>> app=web.application(('/hello','hello'),locals())
>>> class hello:
...   def GET(self):
...       return 'hello world'

#it's the normal request
>>> app.request('/hello').data
'hello world'

#the Error request
>>> app.request('hello\xbf').data
...
UnicodeDecodeError: 'utf8' codec can't decode byte 0xbf in position 6: unexpected code byte 
```

我在一些 web.py 网站上尝试过，比如“http://web.site/index%bf”，它们都响应状态为 500 或异常。那是错误还是漏洞？

我修复了 utils.py 第 342 行

```
elif t is str:
    ooxxxxoo=obj.decode(encoding,'ignore')
    return ooxxxxoo 
```

然后一切顺利。但是真的有安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:56:26.427

我已经在 github 存储库中打开了这个问题，它[似乎已经修复了](https://github.com/webpy/webpy/issues/117)。也许你应该更新到 0.37？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T09:31:54.453

它仍然没有修复.. 0.37 测试。尝试创建一个参数，如 [http://sometarget.com/test?parameter=%bf](http://sometarget.com/test?parameter=%bf)

# actionscript-3 - 为什么我不能在 OS X Lion x64 上的 Flash Player 11 中拥有 120,000x120,000 像素的 BitmapData？

> ID：10119850
> 
> 赞同：2
> 
> 时间：2012-04-12T08:15:43.003
> 
> 标签：actionscript-3, int, bitmapdata, flash-player-11

医生说：

*从 AIR 3 和 Flash player 11 开始，BitmapData 对象的大小限制已被删除。位图的最大尺寸现在取决于操作系统。*

但是，为什么我不能有 120,000 x 120,000 像素的 BitmapData 对象？我在使用 64 位内核的 OS X Lion 上。

现在 120,000 ^ 2 将给我 14,400,000,000 个我需要占用的像素，它只需要 34 位来存储该 int。但显然我可以有 64 位整数，不是吗？我错过了什么吗？“依赖于操作系统”是什么意思？如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-12T09:19:37.243

从什么时候开始，BitmapData 像素相当于一个位？请记住，您正在处理颜色信息，因此每个像素至少占用一个`uint`（=> 大小：32 位，或 4 字节）。

那么，这意味着您的内存消耗实际上是

```
120000^2 * 4 => 57,600,000,000 Bytes => ap. 53,6 GB 
```

另请注意，while`Number`是 64 位数据类型，`int`而`uint`不是。

您可能需要考虑使用不同的方法来组织数据。
如果您正在处理一张大图片，则必须将其分成合理大小的部分。限制可能已被取消，但我建议您将自己限制在最大范围内。舞台大小的 4 倍（足够小，可以进行合理平滑的滚动，也足够大，因此您不必一直在舞台上放置对象）。

如果它不是您要存储的实际像素信息，也许 ByteArray 可能是一个可能的替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:25:56.713

Actually, there're several software and hardware limitations for amount of addressable size. Except 32/64 bit architecture, there're several others:

*   memory controller total limit
*   amount of RAM slots x MAX RAM module size
*   some memory management layer implementations like [PAE](http://en.wikipedia.org/wiki/Physical_Address_Extension) (depends on CPU + OS) may even increase amount of total addressable virtual memory, but max.amount of physical memory remains the same.
*   marketing/software OS limitations (see section [2.5](http://en.wikipedia.org/wiki/Physical_Address_Extension#Microsoft_Windows) for windows versions in the same wiki article);

The only info I've found on web states, Mac OS X Lion (not Server) has software limit of 64GB. The try of allocating more memory in one piece, than machine physically has hardly would be succeeded, though.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:50:17.407

你想保存什么样的东西？生成的东西？我认为您需要创建一个使用固定随机种子的系统，并以低分辨率构建视图/创建内容。您应该能够重复相同的动作。您可能也必须保存（自定义）动作才能以某种方式达到这一点。如果你有，你应该应用一个比例变量并为每个图块渲染图块，以绕过一个大画布。这种系统需要时间来构建，如果应该绘制的东西缩放得太高，仍然可能会出现一些问题。
如前所述，对于那种打印，您不需要那么高分辨率。当然，除此之外，获得这些巨大的尺寸无论如何都是一个挑战。

# android - ListPreference's summary text is not updated automatically whenever there is change in selection

> ID：10119852
> 
> 赞同：15
> 
> 时间：2012-04-12T08:15:51.943
> 
> 标签：android

虽然它正在被记录，但通过使用`"%s"`，我可以将选定的值显示为摘要，但它不能按预期工作。

[http://developer.android.com/reference/android/preference/ListPreference.html#getSummary%28%29](http://developer.android.com/reference/android/preference/ListPreference.html#getSummary%28%29)

我有以下`preferences.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <PreferenceCategory
        android:title="@string/preference_xxx_category">
        <CheckBoxPreference
            android:title="@string/preference_xxx_mode_title"
            android:defaultValue="false"
            android:summary="@string/preference_xxx_mode_summary"
            android:key="xxxModePreference" />
    </PreferenceCategory>

    <PreferenceCategory
        android:title="@string/preference_yyy_category">
        <ListPreference
           android:title="@string/preference_yyy_mode_title"
           android:defaultValue="0"
           android:entries="@array/yyy"
           android:entryValues="@array/yyy_values"
           android:summary="%s"
           android:key="yyyModePreference" />         
    </PreferenceCategory>

</PreferenceScreen> 
```

这是我的`arrays.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="yyy">
        <item>Display value 0</item>
        <item>Display value 1</item>
    </string-array>

    <string-array name="yyy_values">
        <item>0</item>
        <item>1</item>
    </string-array>    
</resources> 
```

我期望通过使用以下 Java 代码构建一个完整的首选项活动，带有复选框和列表首选项，列表首选项的摘要文本可以在我执行选择时自动更新。摘要文本将在**Display value 0**和**Display value 1**之间切换。

```
public class Preferences extends PreferenceActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
    }
} 
```

但是，我意识到列表首选项的摘要文本不会自动更新。只有当我在复选框上执行勾选/取消勾选时，只有整个活动才会失效，并且列表首选项的摘要文本只会被更新。

因此，我必须修改我的代码如下，这看起来更**麻烦**。

```
public class Preferences extends PreferenceActivity implements OnSharedPreferenceChangeListener {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
        PreferenceManager.getDefaultSharedPreferences(this).registerOnSharedPreferenceChangeListener(this);
    }

    @Override
    public void onResume() {
        super.onResume();

        // Cumbersome way to make sure list preference's summary text is being updated.
        final String key = "yyyModePreference";
        ListPreference listPreference = (ListPreference)findPreference(key);
        final String value = PreferenceManager.getDefaultSharedPreferences(this).getString(key, key);
        final int index = listPreference.findIndexOfValue(value);
        if (index >= 0) {
            final String summary = (String)listPreference.getEntries()[index];         
            listPreference.setSummary(summary);
        }
    }

    @Override
    public void onSharedPreferenceChanged(SharedPreferences options, String key) {
        // Cumbersome way to make sure list preference's summary text is being updated.
        if (key.equals("yyyModePreference")) {
            ListPreference listPreference = (ListPreference)findPreference(key);
            final String value = options.getString(key, key);
            final int index = listPreference.findIndexOfValue(value);            
            if (index >= 0) {
                final String summary = (String)listPreference.getEntries()[index];         
                listPreference.setSummary(summary);
            }
        }
    }
} 
```

这是正确的方法吗？是否有任何简化的方法来确保 ListPreference 的摘要文本总是在选择发生变化时自动更新。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-02-08T05:35:16.417

这是在 KITKAT（即 android-4.4_r0.7）之前的平台上存在的错误，已通过提交[94c02a1 修复](https://android.googlesource.com/platform/frameworks/base/+/94c02a1a1a6d7e6900e5a459e9cc699b9510e5a2)

@ilomambo 的解决方案有效，但可能不是最好的。我通读了源代码`ListPreference`并提出了这个解决方案：

文件：ListPreferenceCompat.java

```
package com.example.yourapplication;

import android.content.Context;
import android.os.Build;
import android.preference.ListPreference;
import android.text.TextUtils;
import android.util.AttributeSet;

public class ListPreferenceCompat extends ListPreference {

    @TargetApi(Build.VERSION_CODES.LOLLIPOP)
    public ListPreferenceCompat(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
    }

    @TargetApi(Build.VERSION_CODES.LOLLIPOP)
    public ListPreferenceCompat(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    public ListPreferenceCompat(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ListPreferenceCompat(Context context) {
        super(context);
    }

    // NOTE:
    // The framework forgot to call notifyChanged() in setValue() on previous versions of android.
    // This bug has been fixed in android-4.4_r0.7.
    // Commit: platform/frameworks/base/+/94c02a1a1a6d7e6900e5a459e9cc699b9510e5a2
    // Time: Tue Jul 23 14:43:37 2013 -0700
    //
    // However on previous versions, we have to work around it by ourselves.
    @Override
    public void setValue(String value) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
            super.setValue(value);
        } else {
            String oldValue = getValue();
            super.setValue(value);
            if (!TextUtils.equals(value, oldValue)) {
                notifyChanged();
            }
        }
    }
} 
```

当需要`ListPreference`在 xml 中使用时，只需将标签替换为`com.example.yourapplication.ListPreferenceCompat`.

这在我运行 Android 4.3 的三星 S4 设备上以及在我的一个生产应用程序中运行良好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T09:00:52.643

我猜它是某种奇怪的错误，因为我已经在运行 Android **2.3.3**的模拟器上对其进行了测试，但它没有工作，但是当我在**4.0.3**上测试它时它工作了。我所做的是`android:summary="%s"`在 xml 中为*ListPreference*做的，仅此而已。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-29T12:46:10.477

恕我直言，这是一个错误。[ListPreference.java#builder.setSingleChoiceItems()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.3_r2.1/android/preference/ListPreference.java#ListPreference.onPrepareDialogBuilder%28android.app.AlertDialog.Builder%29)中定义的onClickListener()不会调用`notifyChanged()`

我碰巧正在根据该代码编写自己的 ListPreference 代码，并且遇到了与 OP 相同的问题，我补充说`notifyChanged()`：

```
 ...
            dialog.dismiss();
            notifyChanged(); // <<<<<<<<<<
        }
}); 
```

现在，当我选择偏好摘要时，它就会立即更新。它不依赖于 Android 版本，ListPreference 一直以来都是这样编码的。

# php - php 语法，运算符 =&

> ID：10119854
> 
> 赞同：2
> 
> 时间：2012-04-12T08:15:54.753
> 
> 标签：php, syntax

我对 PHP 语法有疑问。下面是 php 代码：

```
$err = $campaign =& $this->_setCampaign($mission['campaign_id']) 
```

“=&”是什么意思？我已经用谷歌搜索了，但由于谷歌不支持搜索这些标记。这与通过引用分配问题有关吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T08:16:54.650

那是一个参考运算符。

[http://php.net/manual/en/language.references.php](http://php.net/manual/en/language.references.php)了解更多详情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T08:17:43.890

是的，这是通过引用分配。阅读[手册](http://php.net/manual/en/language.references.whatdo.php)中的更多内容。

# wordpress - 在购买高级 Wordpress 主题之前，是否将 Wordpress 主题安装到 Softaculous？

> ID：10119857
> 
> 赞同：0
> 
> 时间：2012-04-12T08:16:04.367
> 
> 标签：wordpress, themes, softaculous

我正在使用 Wordpress 创建一个网站。我已经在我的网络主机控制面板中设置了一个子域，这样就准备好了。在此过程中，我需要知道何时购买[高级 WordPress 主题](http://www.themesin.com/)，以及购买时会发生什么。我应该将 Wordpress 安装到 Softaculous 中，然后购买主题吗？还是我应该购买主题，然后安装 Wordpress？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T13:35:44.703

在安装 Wordpress 之前，您无法安装该主题或任何主题。请参阅[http://codex.wordpress.org/Getting_Started_with_WordPress](http://codex.wordpress.org/Getting_Started_with_WordPress)

# linux - 当它可用时，epoll 可以完全取代 select/poll 吗？

> ID：10119860
> 
> 赞同：2
> 
> 时间：2012-04-12T08:16:24.657
> 
> 标签：linux, sockets, select, epoll

我是套接字新手，我正在学习/阅读一些 epoll 材料和代码。我的问题是，当 epoll 在系统（Linux）中可用时，epoll 是否可以完全取代 select/poll？

我认为套接字编程在实践中也应该有一些范式可以遵循。当我阅读代码时，我发现一些带有“epoll”的“select”：

1.  服务器代码在处理阻塞套接字时使用 select。我认为 epoll(LT) 的行为与 select 相同，因此可以使用 epoll 替换所有 select。

2.  一些遗留代码使用 epoll 进行监控。事件返回后，在相应的 fd 上使用 select 在读/写之前“检查”它。我不太确定这个“选择”的含义。

我对这些“选择”代码感到困惑，希望有人能提供帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T09:51:49.387

是的。

Select、Poll 和 epoll 都针对相同的需求：等待描述符准备好进行读取或写入，然后才能处理描述符（读取或写入）。

epoll 是一个相对较新的实现，并且特定于 Linux 操作系统（因此，不可移植）。它的优点是只返回待处理的描述符，而无需传递所有描述符并检查哪个描述符导致系统调用返回。在许多情况下，epoll 比 select 或 poll 更快。

在我看来，使用 epoll 和 select 听起来就像是在没有重构旧代码的情况下修补了遗留代码。epoll 将以一种更干净、更快捷的方式（在大多数情况下）实现 select，并且正如您所提到的，它可以在两种模式之一（边缘或水平）下工作。

在一些复杂的情况下，一个 epoll 描述符可能嵌套在另一个 epoll 中，实现了一种层次结构，但我认为这种情况很少见，我个人从未见过它的代码实现。

# sql-server - SQL Server 2008 中的繁重进程

> ID：10119861
> 
> 赞同：0
> 
> 时间：2012-04-12T08:16:30.993
> 
> 标签：sql-server, ram

我在服务器中有一些数据库。此服务器有 16GB RAM，此系统仅用作数据库服务器。

在使用不同的数据库一段时间后，我发现大部分 RAM 空间（大约 14GB）都被使用了，如果我使用其他应用程序并再次工作，我将无法使用我的计算机并且它挂断了。

如何找出哪个数据库的 RAM 使用率更高，然后如何找出哪个查询使这些资源满了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:56:30.823

sys.dm_exec_query_stats 表（2005 年以后）中有一些有用的信息，可用于查找正在运行的查询在 IO、经过时间等方面最密集。

例如尝试运行这个（查看最近 25 个查询运行的详细信息）：

```
SELECT DISTINCT TOP 25 t.TEXT AS query, s.*
FROM   sys.dm_exec_query_stats s
       CROSS APPLY sys.Dm_exec_sql_text(s.sql_handle) t
ORDER  BY s.last_execution_time DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:20:36.747

Sql Profiler 是一个漂亮的工具，用于分析数据库中的哪些查询。

```
set statistics time on 
```

和

```
set statistics io on 
```

和

```
set statistics profile on 
```

当您发现一个您认为很慢的查询时，统计数据是一种分析特定查询的好方法。

你不知道哪些查询是最重的吗？你真的应该仔细检查你的代码，看看你运行了什么样的 for 循环、子查询或其他怪异的查询，并从你认为很重的地方出发。并在 Sql Server Management 中测试这些...

# activemq - NTFS 上的 ActiveMQ 共享文件系统主从

> ID：10119877
> 
> 赞同：1
> 
> 时间：2012-04-12T08:17:35.183
> 
> 标签：activemq, ntfs

我正在尝试在 NTFS 驱动器上设置共享文件系统主从 ActiveMQ。但似乎文件锁在 NTFS 上不起作用。我试图用记事本更改和保存“锁定”文件的内容，它是可以更改的。ActiveMQ 运行时我无法删除此文件，但可以更改。所以第二个 ActiveMQ 实例看不到这个文件锁并使用相同的 kahadb。

它是已知问题还是有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:58:15.687

看起来像一个错误......见[https://issues.apache.org/jira/browse/AMQ-3273](https://issues.apache.org/jira/browse/AMQ-3273)

# c# - 做 object.add 或 repository.add 更好吗？

> ID：10119880
> 
> 赞同：2
> 
> 时间：2012-04-12T08:17:48.963
> 
> 标签：c#, design-patterns, repository-pattern

我正在使用存储库模式。我正在构建我所有的对象，并且我已经到了在一对多关系上拥有一个对象的地步。

我想知道的是它是否更好......

```
myAssocFile.BlogId = myBlogObject.BlogId;
repository.Add(myAssocFile); 
```

或者是否更好......

```
myBlogObject.Add(myAssocFile); 
```

希望有人能告诉我什么更好的长期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:03:33.840

通过使用 repository.add 方法，您可以在可识别的位置添加日志记录/错误检查/和其他逻辑。

如果您使用 object.add 方法，则需要创建一个部分类并重载/覆盖 object.add 方法来做同样的事情。对于所有开发人员来说，这并不像存储库方法那样清楚。

因此，在我看来，您应该通过存储库进行所有数据存储交互（在您的情况下，在某些情况下这不是理想的解决方案）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:19:00.617

存储库模式允许您更好地控制对象的持久性和构造。我要补充的一点是，存储库模式（至少对我而言）本质上更具可测试性，并且可以承受依赖注入而不会造成混淆。此外，如果您考虑 SOLID 对象设计 - 您的父类添加子对象的能力是否违反了单一责任规则？它应该关心如何添加一个孩子吗？它需要知道那个额外的逻辑吗？如果该逻辑需要更改或需要测试，则通过存储库可能更容易做到这一点。

# c++ - 如何在 ANSI C 中 malloc 字符串数组？

> ID：10119890
> 
> 赞同：0
> 
> 时间：2012-04-12T08:18:51.880
> 
> 标签：c++, c

在 C++ 中，我可以很容易地分配一个字符串数组（比如 10 个字符串）：

```
string* arrayOfString = new string[10]; 
```

但是我不知道如何在 ANSI C 中做到这一点。我试过：

```
char** arrayOfString = (*(char[1000])) malloc (sizeof (*(char[1000]))); 
```

但是编译器（MinGW 3.4.5）一直说它是“语法错误”。怎么做才对？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T08:21:30.190

如果每个字符串的大小相同，在编译时已知，比如 100，那么你可以这样做¹：

```
typedef char cstring[100]; //cstring is a new type which is 
                           //a char array of size 100

cstring *arrstring = malloc (1000 * sizeof (cstring));

int i;
for( i = 0 ; i < 1000 ; ++i)
     strcpy(arrstring[i], "some string of size less than or equal to 100");

for( i = 0 ; i < 1000 ; ++i)
     printf("%s\n", arrstring[i]); 
```

演示：http: [//ideone.com/oNA30](http://ideone.com/oNA30)

^(1.请注意，正如@Eregrith在评论中指出的那样，如果您将代码编译为C，则不建议进行强制转换。但是，如果您将其编译为C++，那么您需要编写`(cstring*)malloc (1000 * sizeof (cstring))`但是然后在C++中，您应该避免编写这样的代码首先。`std::vector<std::string>` 正如本文底部所解释的，C++ 中的一个更好的选择是。)

如果每个字符串的大小在编译时未知，或者每个字符串的大小不同，那么您可以这样做：

```
char **arrstring =  malloc(sizeof(char*) * 1000); //1000 strings!
int i;
for(i = 0 ; i < 1000; ++i)
     arrstring[i] = (char*) malloc(sizeof(char) * sizeOfString); 
```

我假设`sizeOfString`所有 1000 个字符串的大小相同。如果它们的大小不同，那么您必须在每次迭代中传递不同的值，如下所示：

```
for(i = 0 ; i < 1000; ++i)
     arrstring[i] = malloc(sizeof(char) * sizeOfEachString[i]); 
```

我希望这对你有帮助，我也希望你能自己做剩下的事情。

* * *

顺便说一句，在 C++ 中，你不应该这样做：

```
string* arrayOfString = new string[10]; //avoid new as much as possible! 
```

相反，您应该这样做：

```
std::vector<std::string>  strings;
strings.reserve(10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:27:14.763

试试这个分配 100 个字符串。每个字符串的长度最多为 1000 个字符。

```
char** arrayOfString = (char**) malloc (sizeof(char[100][1000])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T08:22:40.677

```
#define N  10   // Number of strings
#define M  20   // Size of the strings

/* Please check malloc return value is not NULL */

char **arrayOfString = malloc(sizeof *arrayOfString * N);

for (i = 0; i < N; i++) {
    arrayOfString[i] = malloc(M);
} 
```

# php - 调整类似于错误报告的 PHP 异常报告

> ID：10119891
> 
> 赞同：1
> 
> 时间：2012-04-12T08:18:52.570
> 
> 标签：php, exception-handling, error-reporting

对于 Apache Web 服务器，我们可以`error_reporting`通过`php.ini`.

异常报告是否有类似的设置？

我下面的代码显示`error_reporting`不影响`exception throw`命令。

```
function actionTestThrow() {
    error_reporting(null);
    $i=122;        
    throw new Exception('abb');
    $i=344;        
    echo $i;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T08:21:49.757

异常总是致命的。你不能只是隐藏它们。如果你想忽略一个异常，你需要在一个`try catch`块中处理它。

* * *

您可以做的是扩展异常类 ( `FatalException`, `NoticeException`) 等，并以不同方式处理每一个，更多关于**[扩展异常的内容](http://il.php.net/manual/en/language.exceptions.extending.php)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T08:24:07.537

我认为你应该用块包装你的函数调用或函数体`try/catch`，当捕获到异常时，只需使用`trigger_error`函数来通过 php 的 error_reporting 机制移动错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T06:36:07.127

这是设置自定义异常处理程序的方法

```
function exception($e) {
var_dump($e); 
}

set_exception_handler ( 'exception' ); 
```

# r - 如何将额外的参数传递给 R 中 do.call 的函数参数

> ID：10119893
> 
> 赞同：46
> 
> 时间：2012-04-12T08:19:06.060
> 
> 标签：r

我想将参数 ( `stringsAsFactors=FALSE`) 传递给`rbind`in `do.call`。但以下不起作用：

```
data <- do.call(rbind, 
          strsplit(readLines("/home/jianfezhang/adoption.txt"), split="\t#\t"), 
          args=list(stringsAsFactors=FALSE)) 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-12T08:40:59.670

```
do.call(rbind.data.frame, c(list(iris), list(iris), stringsAsFactors=FALSE)) 
```

如果不是因为`rbind`不知道该怎么做`stringsAsFactors`（但`cbind.data.frame`会），那将是我的答案。

的输出`strsplit`可能是一个向量列表，在这种情况下`rbind`会创建一个矩阵。您可以指定`stringsAsFactors`何时将此矩阵转换为 data.frame，

```
data.frame(do.call(rbind, list(1:10, letters[1:10])), stringsAsFactors=FALSE) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-12T08:45:21.987

Alternatively, you can set `stringsAsFactors` to `FALSE` globally using `options`:

```
options(stringsAsFactors=FALSE) 
```

Setting this at the top of the script will enforce this throughout the script. You could even add to `.Rprofile` to set this option for the all the R sessions you open.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-12T08:28:20.143

我不确定您的函数调用是否有效，但试试这个：

```
data <- do.call(rbind,
  c(strsplit(readLines("/home/jianfezhang/adoption.txt"),split="\t#\t"),
  list(stringsAsFactors=FALSE)) 
```

您需要`do.call`通过一个列表将所有参数传递给。您可以通过以下方式连接两个列表`c`

```
> c(list(1, 2), list(3, 4))
[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

[[4]]
[1] 4 
```

# javascript - 嵌套事件触发器

> ID：10119894
> 
> 赞同：0
> 
> 时间：2012-04-12T08:19:08.740
> 
> 标签：javascript, jquery

有什么方法可以实现此功能，我选择了所有类型的复选框，它选择了类 multicheckBox2 中的所有复选框，我可以根据全选切换这些复选框。现在我在类 multicheckBox 中的每个复选框都有自己的事件，这些事件显示或隐藏一组其他元素并设置它们的值。说我的复选框之一是#expense-RentInclusiveOf-Electricity。现在我的问题是，当我检查全选时，我想自动触发功能 toggleElectricity() 但这没有发生，因为`$("#expense-RentInclusiveOf-Electricity").click(function()`在未绑定的单击事件上，有什么方法可以将事件 .click 更改为其他内容并制作这可能吗？

```
$("#expense-RentAllUtilites-All").click(function(){
    var status = $(this).attr('checked')?true:false;        
    toggleAllRentals(status);
});

function toggleAllRentals(status) {
    $(".multiCheckBox2 input").each( function() {
        $(this).attr("checked",status);
    });
}

$("#expense-RentInclusiveOf-Electricity").click(function(){       
    toggleElectricity(this);
});

function toggleElectricity($this){
    if($($this).is(':checked')) {
        $("#expense-Electricity").val('0');
        $(".electricity").hide();
    } else {
        $("#expense-Electricity").val('50');
        $(".electricity").show();
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:20:53.750

尝试[更改](http://api.jquery.com/change/)事件：

```
$("#expense-RentInclusiveOf-Electricity").change(function() {

}); 
```

# php - 与 TWIG 的关系

> ID：10119895
> 
> 赞同：2
> 
> 时间：2012-04-12T08:19:11.207
> 
> 标签：php, symfony, twig

早些时候我使用 Symfony 1.4。现在我学习 Symfony 2。我这样做：[http](http://symfony.com/doc/current/book/doctrine.html) ://symfony.com/doc/current/book/doctrine.html 我有：

```
 class Product
{

    /**
     * @ORM\ManyToOne(targetEntity="Category", inversedBy="products")
     * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
     */
    protected $category;

    //...
} 
```

和

```
class Category
{

    /**
     * @ORM\OneToMany(targetEntity="Product", mappedBy="category")
     */
    protected $products;

    public function __construct()
    {
        $this->products = new ArrayCollection();
    }
    //...
} 
```

在 foreach 的 Symfony 1.4 中，我可以使用：

```
 $result = findAll from Products.
foreach ($results as $result){
    echo $result->getCategory()->getName();
} 
```

我如何获得与 TWIG 系统的关系（在此示例中为类别）？

```
{% for item in results %}
                <li><a href="{{ item.id }}">{{ item.name }} --- {{ item.category }} {{item.category.name}}</a></li>
            {% endfor %} 
```

item.category 和 item.category.name 不起作用。我在文档中找不到这个。

**编辑：**

好的，我现在知道了。我与一种产品没有关系。在此之前我该如何保护？

我有：

```
id | name    | category
1  | first   | 1
2  | second  | NULL
3  | third   | 2 
```

如果在每一行类别中不为空，那么这工作正常，但如果我在关系中有 NULL，那么我有错误：

```
Item "name" for "" does not exist in AcmeStoreBundle:Default:index.html.twig at line 3 
```

我能用这个做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T10:09:40.907

将此添加到您要输出名称的位置。这将防止树枝抛出该错误。

```
{% if item.category.name is defined %}
    {# print the name here #}
{% endif %} 
```

# c# - 为什么在构造函数中抛出异常会导致空引用？

> ID：10119896
> 
> 赞同：21
> 
> 时间：2012-04-12T08:19:17.897
> 
> 标签：c#, exception, object, constructor, null

为什么在构造函数中抛出异常会导致空引用？例如，如果我们运行下面的代码，teacher 的值为 null，而 st.teacher 不是（创建了一个 Teacher 对象）。为什么？

```
using System;

namespace ConsoleApplication1
{
  class Program
  {
    static void Main( string[] args )
    {
      Test();
    }

    private static void Test()
    {
      Teacher teacher = null;
      Student st = new Student();
      try
      {
        teacher = new Teacher( "", st );
      }
      catch ( Exception e )
      {
        Console.WriteLine( e.Message );
      }
      Console.WriteLine( ( teacher == null ) );  // output True
      Console.WriteLine( ( st.teacher == null ) );  // output False
    }
  }

  class Teacher
  {
    public string name;
    public Teacher( string name, Student student )
    {
      student.teacher = this;
      if ( name.Length < 5 )
        throw new ArgumentException( "Name must be at least 5 characters long." );
    }
  }

  class Student
  {
    public Teacher teacher;
  }

} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-12T08:25:28.337

构造函数永远不会完成，因此分配永远不会发生。不是从构造函数返回 null （或者有一个“空对象” - 没有这样的概念）。只是您永远不会为 分配新值`teacher`，因此它保留其先前的值。

例如，如果您使用：

```
Teacher teacher = new Teacher("This is valid", new Student());
Student st = new Student();
try
{
    teacher = new Teacher("", st);
}
catch (... etc ...) 
```

......那么你仍然会有“这是有效的”老师。但是，该`name`变量仍然不会在该`Teacher`对象中分配值，因为您的`Teacher`构造函数缺少如下行：

```
this.name = name; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-12T08:23:00.400

因为您正在检查*引用*。

```
 try
  {
    teacher = new Teacher( "", st ); //this line raises an exception 
                                     // so teacher REMAINS NULL. 
                                     // it's NOT ASSIGNED to NULL, 
                                     // but just NOT initialized. That is.
  }
  catch ( Exception e )
  {
    Console.WriteLine( e.Message );
  } 
```

但

```
public Teacher( string name, Student student )
{
  student.teacher = this;  //st.Teacher is assigned BEFORE exception raised.
  if ( name.Length < 5 )
    throw new ArgumentException( "Name must be at least 5 characters long." );
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-12T08:21:40.347

当你在构造函数中抛出异常时，你破坏了对象的构造。所以它永远不会完成，因此，没有对象可以返回。事实上，赋值运算符 ( `teacher = new Teacher( "", st );`) 永远不会执行，因为异常会破坏调用堆栈。

并且 Teacher 构造函数仍然将对自身（正在构造的对象）的引用写入 Student 对象的属性。但是你不应该在之后尝试使用这个 Teacher 对象，因为它还没有被构造。它可能会导致未定义的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-03T16:48:19.347

如果`Foo`是引用类型，则该语句`Foo = new FooType();`将构造一个对象，然后*在构造函数完成后*，将引用存储到`Foo`. 如果构造函数抛出异常，`Foo`则将跳过存储引用的代码而无需`Foo`编写。

在以下情况下：

*   像上面这样的语句出现在`try`/`catch`块中
*   `Foo`无需事先编写就可以达到该声明。
*   `Foo``catch`在块周围的上下文中定义的局部变量。
*   从 catch 开始执行有可能到达一个语句，该语句`Foo`在`catch`.

编译器将假定后者的读取尝试`Foo`可以在没有`Foo`写入的情况下执行，并且在这种情况下将拒绝编译。编译器将允许`Foo`在没有写入的情况下读取，但是，如果：

*   `Foo`是类字段，或者是存储在类字段中的结构的字段，存储在存储在类字段中的结构的字段中的结构的字段等。
*   `Foo`作为`out`参数传递给不存储任何内容的方法（用 C# 以外的语言编写），并且`foo`只有在方法正常返回而不是通过异常返回时，才能访问读取的语句。

在前一种情况下，`Foo`将具有定义的值`null`。在后一种情况下，在`Foo`方法执行期间第一次创建时，它的值很可能为 null；如果在循环中重新创建，它可能包含`null`或在上次创建后写入的最后一个值；该标准没有具体说明在这种情况下会发生什么。

请注意，如果`FooType`有任何类似于普通构造函数的东西，如果之前不是，`Foo = new FooType();`则永远不会*导致* `Foo`变为 null。如果语句正常完成，`Foo`将持有一个精确类型的实例的引用，`FooType`而该引用以前在 Universe 中的任何地方都不存在；如果它抛出异常，它不会`Foo`以任何方式影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T08:36:50.763

您在分配 'student.teacher = this; 之后抛出异常 //这一行执行 if ( name.Length < 5 ) //这被检查并且在指定的情况下为真 throw new ArgumentException( "Name must be at least 5 characters long." );//BAM : Exception throw here 。

所以teacher的值为null（在构造函数完成之前抛出异常），而st.teacher不是！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-12T08:44:55.440

构造函数的主要工作是初始化对象。如果初始化本身存在异常，则没有正确初始化的对象没有意义。因此，从构造函数中抛出异常会导致 null 对象。

# android - 具有 h2 错误时区 2038 年的 Android

> ID：10119903
> 
> 赞同：3
> 
> 时间：2012-04-12T08:19:56.140
> 
> 标签：android, timezone, h2, unix-timestamp, year2038

我在 Android 应用程序中向数据库 H2 插入日期，当日期大于 2038 年 1 月 19 日（Unix 年 2038 错误）时，保存到数据库的日期会根据 android 设备的时区而变化。

示例：日期 2050-12-31

*   时区 +2:00 埃尔开罗保存 2050-12-29（错误）
*   时区 +2:00 阿姆斯特丹保存 2050-12-30（错误）
*   时区 +2:00 布鲁塞尔保存 2050-12-31 (OK)
*   日本时区保存 2050-12-31 (OK)
*   中国时区保存2050-12-31（OK）
*   亚速尔群岛时区保存 2050-12-31 (OK)

我想使用 android 的 Linux 内核有 2038 年的错误，但我不明白在某些情况下它可以正常工作而在其他情况下不能正常工作的原因。

这个问题有什么解决办法吗？`java.util.Date`在 Android 中使用安全吗？

# c# - 枚举数组的“一般”类型是什么？

> ID：10119904
> 
> 赞同：3
> 
> 时间：2012-04-12T08:19:59.763
> 
> 标签：c#, enums

我有一个方法想将自定义**类型****数组`Enum`**作为参数。

看起来**像这样**的东西：

```
public void DoSomething(WhatDoIPutHere[] parameters) 
```

我想将 a`Enum1[]`或 a `Enum2[]`where传递给此方法，`Enum1`并且`Enum2`是 2`Enum`种类型。

**我需要用什么代替`WhatDoIPutHere`？**

我本来希望将 DoSomething 的签名定义`Enum[]`为某种方式`Enum`是 Enum 类型的基类（对吗？）：

```
public void DoSomething(Enum[] parameters) 
```

但它给出了一个：

> 无法从 'xxx.Enum1[]' 转换为 'System.Enum[]'

我也尝试将其定义为，`object[]`但我得到了同样的编译器错误..

我知道这完全是臭代码，如果可以的话，我肯定会摆脱它......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T08:22:07.943

你不能。值类型数组不是协变的。你有点*想写*：

```
public void DoSomething<T>(T[] parameters) where T : struct, System.Enum 
```

...但这也是不允许的（类型参数不能被限制为枚举或委托）。

选项：

*   允许*任何*数组：

    ```
    public void DoSomething(Array parameters) 
    ```

*   允许任何值类型的数组：

    ```
    public void DoSomething<T>(T[] parameters) 
    ```

*   通过 IL-rewriting hack使用[Unconstrained Melody](http://code.google.com/p/unconstrained-melody/)编写第一个表单。

# ruby-on-rails - 无法让 rake spec 工作

> ID：10119905
> 
> 赞同：2
> 
> 时间：2012-04-12T08:20:04.797
> 
> 标签：ruby-on-rails, ruby, rspec

我正在按照教程学习 Ruby + Rails，但无法让 rspec 为我工作。

[http://rubysource.com/rails-deep-dive-loccasions-home-page/](http://rubysource.com/rails-deep-dive-loccasions-home-page/)

我正在执行“我们的第一个测试”，当我运行时`rake spec`出现以下错误：

```
harley-alexanders-macbook-pro:loccasions Harley$ rake spec
/Users/Harley/.rvm/rubies/ruby-1.9.3-p0/bin/ruby -S rspec ./spec/acceptance/home_page_spec.rb
/Users/Harley/.rvm/gems/ruby-1.9.3-p0@loccasions/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- rspec/capybara (LoadError)
    from /Users/Harley/.rvm/gems/ruby-1.9.3-p0@loccasions/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/Harley/.rvm/gems/ruby-1.9.3-p0@loccasions/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/Harley/.rvm/gems/ruby-1.9.3-p0@loccasions/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:251:in `require'
    from /Users/Harley/Sites/rails/loccasions/spec/spec_helper.rb:6:in `<top (required)>'
    from /Users/Harley/Sites/rails/loccasions/spec/acceptance/home_page_spec.rb:1:in `require'
    from /Users/Harley/Sites/rails/loccasions/spec/acceptance/home_page_spec.rb:1:in `<top (required)>'
    from /Users/Harley/.rvm/gems/ruby-1.9.3-p0@loccasions/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `load'
    from /Users/Harley/.rvm/gems/ruby-1.9.3-p0@loccasions/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'
    from /Users/Harley/.rvm/gems/ruby-1.9.3-p0@loccasions/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `map'
    from /Users/Harley/.rvm/gems/ruby-1.9.3-p0@loccasions/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `load_spec_files'
    from /Users/Harley/.rvm/gems/ruby-1.9.3-p0@loccasions/gems/rspec-core-2.9.0/lib/rspec/core/command_line.rb:22:in `run'
    from /Users/Harley/.rvm/gems/ruby-1.9.3-p0@loccasions/gems/rspec-core-2.9.0/lib/rspec/core/runner.rb:69:in `run'
    from /Users/Harley/.rvm/gems/ruby-1.9.3-p0@loccasions/gems/rspec-core-2.9.0/lib/rspec/core/runner.rb:10:in `block in autorun'
rake aborted!
/Users/Harley/.rvm/rubies/ruby-1.9.3-p0/bin/ruby -S rspec ./spec/acceptance/home_page_spec.rb failed

Tasks: TOP => spec
(See full trace by running task with --trace) 
```

我多次发现问题是过时的 gem，但我已经更新了所有这些以及我的 Gemfile 以反映这一点。

我知道“功能”是一种用于匹配场景等的水豚方法。我将其包含`require('rspec/capybara')`在我的 spec/spec_helber.rb 文件中，并将其包含在我的 Gemfile 中。

我究竟做错了什么！？

干杯，

~哈雷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:23:08.537

请尝试：

```
bundle exec rake spec 
```

# machine-learning - 先进行 PCA 还是先归一化？

> ID：10119913
> 
> 赞同：23
> 
> 时间：2012-04-12T08:20:56.123
> 
> 标签：machine-learning, normalization, classification, regression, pca

在进行回归或分类时，预处理数据的正确（或更好）方法是什么？

1.  规范化数据 -> PCA -> 训练
2.  PCA -> 标准化 PCA 输出 -> 训练
3.  规范化数据 -> PCA -> 规范化 PCA 输出 -> 训练

以上哪个更正确，或者是预处理数据的“标准化”方式？“标准化”是指标准化、线性缩放或其他一些技术。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-12T08:55:59.670

您应该在进行 PCA 之前对数据进行规范化。例如，考虑以下情况。我创建了一个`X`具有已知相关矩阵的数据集`C`：

```
>> C = [1 0.5; 0.5 1];
>> A = chol(rho);
>> X = randn(100,2) * A; 
```

如果我现在执行 PCA，我会正确地发现主成分（权重向量的行）与坐标轴成一定角度：

```
>> wts=pca(X)
wts =
    0.6659    0.7461
   -0.7461    0.6659 
```

如果我现在将数据集的第一个特征缩放 100，直觉上我们认为主成分不应该改变：

```
>> Y = X;
>> Y(:,1) = 100 * Y(:,1); 
```

但是，我们现在发现主成分与坐标轴对齐：

```
>> wts=pca(Y)
wts =
    1.0000    0.0056
   -0.0056    1.0000 
```

要解决此问题，有两种选择。首先，我可以重新调整数据：

```
>> Ynorm = bsxfun(@rdivide,Y,std(Y)) 
```

（奇怪的`bsxfun`符号用于在 Matlab 中进行向量矩阵算术 - 我所做的只是减去平均值并除以每个特征的标准差）。

我们现在从 PCA 中得到了合理的结果：

```
>> wts = pca(Ynorm)
wts =
   -0.7125   -0.7016
    0.7016   -0.7125 
```

它们与原始数据上的 PCA 略有不同，因为我们现在已经保证我们的特征具有单位标准偏差，而最初情况并非如此。

另一种选择是使用数据的相关矩阵而不是外积来执行 PCA：

```
>> wts = pca(Y,'corr')
wts =
    0.7071    0.7071
   -0.7071    0.7071 
```

事实上，这完全等同于通过减去均值然后除以标准差来标准化数据。只是更方便。在我看来，您应该*始终*这样做，除非您有充分的理由不这样做（例如，如果您*想*了解每个功能变化的差异）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-12T08:26:48.680

您需要首先对数据进行**标准化**。否则，用于减少维度的 PCA 或其他技术将给出不同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-05T04:29:14.303

首先规范化数据。实际上，一些用于执行 PCA 分析的 R 包会在执行 PCA 之前自动标准化数据。如果变量具有不同的单位或描述不同的特征，则必须进行标准化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-28T08:38:52.567

答案是第三个选项，因为在执行 pca 之后，我们必须标准化 pca 输出，因为整个数据将具有完全不同的标准。我们必须在 PCA 之前和之后对数据集进行标准化，因为它会更准确。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-23T07:34:41.450

我在 PCA 目标函数中得到了另一个原因。您是否可以在此链接中看到详细信息，请在 [此处输入链接描述](https://stats.stackexchange.com/questions/32174/pca-objective-function-what-is-the-connection-between-maximizing-variance-and-m/136072#136072) 假设 X 矩阵在 PCA 之前已被归一化。

# objective-c - 如何将多个计时器添加到线程

> ID：10119918
> 
> 赞同：1
> 
> 时间：2012-04-12T08:21:10.800
> 
> 标签：objective-c, nstimer, grand-central-dispatch, nsrunloop

我正在尝试将多个计时器添加到一个线程，而不是主线程。这里是代码：

```
- (IBAction)addTimer:(id)sender 
{
  if (!_timerQueue) {
    _timerQueue = dispatch_queue_create("timer_queue", NULL);
  }

  dispatch_async(_timerQueue, ^{
    NSTimer *tempTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(timerAction) userInfo:nil repeats:YES];
    [[NSRunLoop currentRunLoop] addTimer:tempTimer forMode:NSRunLoopCommonModes];
    [[NSRunLoop currentRunLoop] run];
  });
} 
```

上面的方法是由一个按钮动作触发的。但是无论我点击多少次按钮，调度块中的代码都只运行一次。所以该线程中只有一个计时器。我想知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T20:36:49.663

您一次只能看到一个计时器的原因是在调度块的最后一行：

`-[NSRunLoop run]`是一个阻塞调用，当运行循环的最后一个输入源完成并且不再安排计时器时返回。

此外，GCD 队列是严格的 FIFO 并且您正在创建一个串行队列。因此，您多次点击该按钮的结果是队列变得越来越满，而第一个块没有完成：
由于计时器在重复，因此运行循环中总是有一些计划，因此`run`永远不会返回，除非所有后续块从被调用。

# javascript - 放 后

> ID：10119930
> 
> 赞同：0
> 
> 时间：2012-04-12T08:21:51.143
> 
> 标签：javascript, html, canvas

我用这样的 DOM 结构制作了一个网站：

```
<body>
<div><canvas id="cv"></canvas>
<script>
..some scripts with function and methods to make multiple canvas..
</script>
</div>
<p>lorem ipsum</p>
</body> 
```

问题是“lorem ipsum”段落总是出现在画布后面我不能让它出现在画布之后或至少在应该是这样的之后，

在脚本上，我使用“createElement”和“appendChild”方法制作多个画布，并将新画布附加到 div 标签中

有什么想法可以让该段落出现在下面吗？（在画布不在后面之后）

完整的页面或多或少具有相同的结构，如下所示：

```
<html>
<body>
<div id="layer">
<canvas id="myCanvas" width="400" height="300" style="border:2px solid #c3c3c3;position:absolute;left:5px;top:5px">Your browser does not support the canvas element.</canvas>
<script type="text/javascript">
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
ctx.fillStyle="#FF0000";
ctx.fillRect(0,0,150,75);
var id=document.createAttribute("id");
id.nodeValue="test";
var cs=document.createElement("canvas");
document.getElementById("layer").appendChild(cs).setAttributeNode(id);
document.getElementById("test").style.position="absolute";
document.getElementById("test").style.left="7px";
document.getElementById("test").style.top="7px";
document.getElementById("test").width="100";
document.getElementById("test").height="180";
document.getElementById("test").style.border="1px solid";
</script>
</div>
<p>dssdsdsds dsds vdok fekof efienife fienfie fkenfke fkeinf ekfine</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T08:49:08.137

如果您希望其他元素围绕它们流动，请不要绝对定位元素。如果您确实需要绝对定位，请定位包含您想要保持在一起的所有内容的容器。

# visual-studio - 门控签入：舍弃源导致 Visual Studio 中的回滚

> ID：10119946
> 
> 赞同：5
> 
> 时间：2012-04-12T08:23:01.973
> 
> 标签：visual-studio, tfs, tfsbuild

我们的一位开发人员在 Gated Checkin Builds 中发现了一些非常奇怪的东西，这似乎是 Gated Checkin 的一个功能。

启动 Gated Checkin 时，他的解决方案资源管理器中的解决方案似乎回到了最后一个签入的版本。构建完成后，Visual Studio 显示一条错误或成功消息，带有名为“Code aufnehmen”的德语按钮（英文： “调和...”）

单击后，他会取回他的更改。

我知道在 Visual Studio 中，您可以选择在搁置解决方案时还原您的解决方案。在我看来，这就是 Visual Studio 默认所做的。

是否可以将 Visual Studio 或 TFS 设置为在搁置门控签到后不恢复？或者也许有人可以告诉我 Visual Studio 这样做的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T08:50:17.420

门控签到的整个过程是 TFS：

*   构造一个包含所有更改的 Shelveset
*   尝试构建代码库的最新状态 + 这个 Shelveset &
*   如果一切成功，Shelveset 将被提交到存储库中

默认情况下，TFS 将在此操作期间将开发人员的工作区恢复为上次签入的工作区。这可以通过以下方式进行更改：
![在此处输入图像描述](../Images/ca5394016fe1b470f7e225df45c9a358.png)

通过这样做，开发人员可以直接继续工作，但是一旦构建结束，在协调本地工作空间时可能会出现问题和冲突。

通常，封闭式构建应尽可能少地持续。如果保持这一原则，那么合理的做法是避免设置“保留”选项。
如果构建持续时间长于 - 比如说 - 5 分钟，那么这样做可能是值得的。

可以在P.Carnahan的[这篇文章中找到对 Gated Checkin 功能的非常好的描述。](http://blogs.msdn.com/b/patcarna/archive/2009/06/29/an-introduction-to-gated-check-in.aspx)

# css - 带有标题的横向滚动图像

> ID：10119955
> 
> 赞同：2
> 
> 时间：2012-04-12T08:23:47.183
> 
> 标签：css, html, overflow

我正在设计一个网站，该网站使用横向滚动的单元格条，其中包含图像旁边带有描述的图像。

```
+----------------------------------+  +----------------------------------+
|+--------+   Title                |  |+--------+   Title                |
|| Image  |   Description...       |  || Image  |   Description...       |
||        |                        |  ||        |                        |
|+--------+                        |  |+--------+                        |
+----------------------------------+  +----------------------------------+ 
```

我所做的所有尝试产生将标题与描述分开所需的任何类型的换行符都会导致垂直滚动而不是侧滚动。这是我的一些代码：

```
<style type="text/css">
    .container {
        width: 1000px;
        height: 250px;
        overflow: hidden;
    }
    .scrolling {
        white-space: nowrap;
    }
    .cell {
        display: inline;
        height: 250px;
        width: 500px;
    }
</style>
<html>
    <body>
        <!-- The following approach sort of works but is all in a line -->
        <div class="container">
            <div class="scrolling">
                <div class="cell">
                    <img src="/static/pic1.jpg" height="200" />
                    title1 description1
                </div>
                <div class="cell">
                    <img src="/static/pic2.jpg" height="200" />
                    title2 description2
                </div>
                <!-- etcetera -->
            </div>
        </div>
    <body/>
</html> 
```

我尝试在 css 中使用 float，但任何使用它都会导致 .scrolling div 中的 .cell div 出现不希望的包装。创造这种效果的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:48:18.823

尝试`display: inline-block`代替`display: inline`

记得还要设置一个负的字母间距和字间距

```
.scrolling {
    white-space: nowrap;
    word-spacing: -3px;
    letter-spacing: -3px;
}
.cell {
    display: inline-block;
    word-spacing: normal;
    letter-spacing: normal;
    white-space : normal;

    height: 250px;
    width: 500px;
} 
```

# java - 按名称获取课程

> ID：10119956
> 
> 赞同：91
> 
> 时间：2012-04-12T08:23:59.380
> 
> 标签：java, android, class

如果我的应用程序中有一个名为 TestActivity 的 Activity 类，有没有办法通过它的名称来获取它的类，如下例所示：

```
Class<?> c = getClassByName("TestActivity"); 
```

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-04-12T08:26:15.980

改用[forName](http://developer.android.com/reference/java/lang/Class.html#forName%28java.lang.String%29) ..

像这样的东西..

```
 try {
    Class<?> act = Class.forName("com.bla.TestActivity");
 } catch (ClassNotFoundException e) {
        e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-01-05T13:25:22.307

您可以使用[`Class::forName`](https://developer.android.com/reference/java/lang/Class.html#forName%28java.lang.String%29)来获取未知类型的类对象。如果你想获得一个类型化的类，你可以[`Class::asSubclass`](https://developer.android.com/reference/java/lang/Class.html#asSubclass(java.lang.Class<U>))在返回的类上使用`Class::forName`：

```
Class<? extends Activity> activityClass = Class.forName("com.example.TestActivity")
                                               .asSubclass(Activity.class); 
```

当然，您还必须处理一堆不同类型的异常。像往常一样处理反射。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-19T22:31:11.097

[Class.forName](https://developer.android.com/reference/java/lang/Class.html#forName%28java.lang.String%29)似乎有例外。这只是对上述内容进行扩展以解决此问题。

```
try { t = Class.forName("com.package.classname"); } catch (Exception ignored){} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-12T11:02:58.323

我也有类似的要求，我有一个来自后端的 json，其中包含屏幕和活动映射。由于 iOS/Android 的 json 是通用的，我们不能`Activity`在 json 中添加类似的术语，所以这就是我们所做的

1.  在 json for all `Activity`or`Viewcontrollers`中，使用简单的名称，即 for `HomeActivity`，`HomeViewController`我们将在 json 中使用“Home”

2.  在应用程序中，我们解析 json，我编写了以下实用方法来动态获取活动

获取类的名称（即如果我们通过 Home，我们将返回`com.package.HomeActivity`）

```
 fun getClassInfoFor(name: String, context: Context):String{
        var str = "${context.getPackageName()}.${name}Activity"
        return str
    } 
```

现在从字符串中获取类

```
 try {
            val className = Utilties.getClassInfoFor(activityNameFromJSON, context)
            val fetchedClass = Class.forName(className)
            val showDetailsIntent = Intent(context, fetchedClass)
            context.startActivity(showDetailsIntent)
        } catch (e: ClassNotFoundException) {
            e.printStackTrace()
        } 
```

这样我就可以用同样的方法轻松管理多个类。我在回收站视图中使用它，我的每个单元格都导航到不同的活动。

# c# - 根据函数的输入返回一个变量（.NET C# 或 VB）

> ID：10119957
> 
> 赞同：0
> 
> 时间：2012-04-12T08:24:06.217
> 
> 标签：c#, .net, vb.net

假设我有以下变量：

```
Public Shared x As String = "100"
Public Shared y As String = "text"
Public Shared z As String = "something" 
```

我得到了一个功能：

```
Function giveVar(ByVal varName As String) As String 

    Return varName
End Function 
```

但这自然不是我想要的。我想要的是我的函数`giveVar`返回持有的变量的值`giveVar`。例如，我打电话给`giveVar("x")`我希望我的函数返回`"100"`。

当然，这可以通过 a 来完成，`Select Case`但这不是我喜欢做的。有人有什么建议吗？甚至可以根据字符串调用值吗？

[编辑：]

```
Namespace i18n
    public NotInheritable Class Settings
        Public Shared LanguageCode As String
        Public Shared HideAllLocalizedText As Boolean
    End Class

Public NotInheritable Class i18n
        Private Sub New()

        End Sub

        Public Shared Function t(ByVal varName As String) As String
            Select Case Settings.LanguageCode
                Case "en"
                    Return en(varName)
                Case Else
                    Return nl(varName)
            End Select
        End Function

        Private Shared Function en(ByVal varName As String) As String
            Dim ASP_0344 As String = "Cancel"
            Dim ASP_0807 As String = "Click"
            Dim ASP_0808 As String = "here"
            Dim ASP_0812 As String = "Welcome at the login screen..."

            ' These are examples there is a whole bigger list               

            Return CallByName(Me, varName, vbGet)
        End Function

        Private Shared Function nl(ByVal varName As String) As String
            Dim ASP_0344 As String = "Annuleren"
            Dim ASP_0807 As String = "Klik"
            Dim ASP_0808 As String = "hier"
            Dim ASP_0812 As String = "Welkom op het inlogscherm..."

            Return CallByName(Me, varName, vbGet)
        End Function

    End Class
End Namespace 
```

我认为这到目前为止有效，但我在`CallByName(Me, varName, vbGet)`at上收到以下错误`Me`：`"me is only valid within an instance method"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T08:28:05.167

您所问的最简单的实现可能是[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)。

## 例子

```
// c#
var values = new Dictionary<string, string>();
values["x"] = "100";
values["y"] = "text";
values["z"] = "something";

public string GiveVar( string name )
{
   return values[name];
} 
```

```
'vb.net
Dim values As New Dictionary(Of String, String)
values.Add("x", "100")
values.Add("y", "text")
values.Add("z", "something")

Function giveVar(ByVal varName As String) As String 
    Return values(varName)
End Function 
```

此时，您实际上并不需要一个函数来获取该值。您可以只使用字典上的索引器。

如果直到运行时才知道成员的名称，则可以使用反射[。](https://stackoverflow.com/questions/1196991/get-property-value-from-string-using-reflection-in-c-sharp)反射会带来（有时是巨大的）性能损失，并可能导致代码脆弱/不直观，但是——正确使用——是一个强大的工具。

[Expando 对象](http://msdn.microsoft.com/en-us/magazine/ff796227.aspx)也可用于创建类似的代码。通常这不是正确的路径，除非您使用 expando 对象来改进结构较少的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T08:35:09.937

是的，您可以使用反射来做到这一点：

```
Imports System.Reflection

Public Class Test

  Public Shared x As String = "100"
  Public Shared y As String = "text"
  Public Shared z As String = "something"

  Function giveVar(ByVal varName As String) As String

    Dim pi As FieldInfo = Me.GetType().GetField(varName)

    Return (pi.GetValue(Me)).ToString()

  End Function

End Class 
```

测试它：

```
Module Module1

  Sub Main()

    Dim t As New Test

    Console.WriteLine("x: " & t.giveVar("x"))
    Console.WriteLine("y: " & t.giveVar("y"))
    Console.WriteLine("z: " & t.giveVar("z"))

    Console.ReadKey()

  End Sub

End Module 
```

您需要导入 System.Reflection 命名空间才能使其工作，还需要在定义 giveVar() 函数的类中定义变量，否则您需要将拥有变量的对象作为参数传递和替换 Me.GetType() 调用。

最后，这不适用于局部变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T08:35:55.910

尝试

```
CallByName (Me, "x", VbGet) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T08:28:01.050

将您的字符串放入 a 中`Hashtable`，您可以轻松地通过键检索它们。您仍然可以拥有使用硬编码键查找的公共属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T09:03:41.123

通用解决方案怎么样

在c#中

```
using System.Reflection;

public class MyClass
{
    public static string x = "1";
    public static int y = 2;

    public static bool TryGetValue<T>(string variableName, out T value)
    {
        try
        {
            var myType = typeof(MyClass);
            var fieldInfo = myType.GetField(variableName);
            value = (T)fieldInfo.GetValue(myType);
            return true;
        }
        catch
        {
            value = default(T);
            return false;
        }
    }
} 
```

你可以这样使用

```
string xValue;
if (MyClass.TryGetValue("x", xValue))
{
    // it worked
}
else
{
    // oops, x is not there or it will not cast to string
}

int yValue;
if (MyClass.TryGetValue("y", yValue))
{
    // it worked
}
else
{
    // oops, x is not there or it will not cast to int
} 
```

但请记住，与

```
string valueX = MyClass.x;
int valueY = MyClass.y; 
```

代码更短，您可以在编译时进行类型检查。

# android - 不受支持的国家/地区的应用内结算

> ID：10119961
> 
> 赞同：17
> 
> 时间：2012-04-12T08:24:20.740
> 
> 标签：android, in-app-purchase, credit-card, in-app-billing

我想为我的一个应用程序使用 Google Play 的应用内结算。但是好像不能用。

**第一个问题**是，根据[商家支持的位置，](https://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=150324)我的国家 - 土耳其 - 不在列表中。

**作为第二个问题**，我的应用程序在 Google Play 以外的其他一些市场上列出。[Google Play 应用内计费概述](http://developer.android.com/guide/market/billing/billing_overview.html)部分**应用内计费要求和限制**表示，*应用内计费只能在您通过 Google Play 发布的应用程序中实施。*因此，即使土耳其将来会在商家列表中，我也无法将 Google Play 的应用内计费用于其他市场。那正确吗？

然后我想使用其他 API，如[ZooZ](http://www.zooz.com/)，[Authorize.net](http://developer.authorize.net/downloads/)（实际上，我没有深入研究它们，但我猜它们会做我想要的）

但这次我在[Android Market 开发者分销协议](http://www.android.com/us/developer-distribution-agreement.html)中读到，开发*者通过 Market 分发的产品收到的所有费用必须由 Market 的支付处理器处理。*使用此类 API 有问题吗？如果是这样，我应该怎么做应用内购买？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T13:29:18.097

如果您所在的国家/地区不受支持，则您无法真正为您的应用使用应用内计费。您可以查看其他商店，例如亚马逊应用商店。他们最近实施了应用内计费。

[https://developer.amazon.com/welcome.html](https://developer.amazon.com/welcome.html)

在 Google 支持土耳其之前，Google Play 的简单答案现在是“不”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T21:05:15.017

在支持商家账户的国家/地区获得银行账户。

# javascript - Javascript - 隐藏的数学答案。

> ID：10119962
> 
> 赞同：1
> 
> 时间：2012-04-12T08:24:44.810
> 
> 标签：javascript, html

下面的脚本生成随机数，并计算答案。

接下来是我想要隐藏答案并在那里放置一个文本区域。然后你必须输入一个答案，当答案正确时，它应该使答案变为绿色。

我知道这是可能的，但我在互联网上搜索它没有成功，所以我正在创建一个问题。

这是脚本：

```
<div id="breuken"></div>

$(function () {
    var number = document.getElementById("breuken");
    var i = 0;
    for (i = 1; i <= 10; i++) {
        var sRandom = Math.floor(Math.random() * 10);
        var fRandom = Math.floor(sRandom + Math.random() * (10 - sRandom));
        var calc = Math.abs(fRandom - sRandom);
        number.innerHTML += "" + fRandom + " - " + sRandom + " = " + calc + "<br />";
    }
    number.innerHTML;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:45:50.277

试试这个[http://jsfiddle.net/r4QTQ/](http://jsfiddle.net/r4QTQ/)

它确实会发生基本的绿色变化，但应该足以让您修改并完全按照您的意愿行事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:19:30.477

创建了这个 jQuery**[演示](http://jsfiddle.net/AtxGz/)**，如果您使用 jQuery，它可能会帮助您朝着正确的方向发展。

```
var $questions = $('<div />').attr('id', 'questions');
for (var i = 1; i <= 3; i++) {

    var question = "Question " + i + "?";
    var answer = i;

    $questions.append(
        $('<div />')
            .attr('id', 'question' + i)
            .addClass('question')
            .append(
                $('<span />').text(question)
            )
            .append(
                $('<input type="text" />')
                    .addClass('answer')
                    .data('answer', answer)
            )
    );
}
$('#container').empty().append($questions); 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:09:57.427

这个答案实际上与@gillesc 的答案相同，但用于`jQuery`完成繁重的工作，如果你手头有它，你应该使用它。（并且更短）

Javascript 代码：[jsFiddle](http://jsfiddle.net/XDzS8/)

```
$(function() {
    var checkAnswer = function(elem) {
        if ($(elem).data('calc') == $(elem).val()) {
            $(elem).css('background-color', 'green');
        } else {
            $(elem).css('background-color', 'white');
        }
    };
    var div = $('#breuken');

    for (var i = 0; i < 10; i++) {
        var sRandom = Math.floor(Math.random() * 10);
        var fRandom = Math.floor(sRandom + Math.random() * (10 - sRandom));
        var calc = Math.abs(fRandom - sRandom);

        var qa = $('<span>' + fRandom + ' - ' + sRandom + 
            ' = <input type="text"></span><br />');
        qa.find('input').change(function() {
            checkAnswer(this);
        }).data('calc', calc);
       div.append(qa);
    }
}); 
```

# sql - DTEXEC 执行超时 - 但仅在从存储过程调用时

> ID：10119965
> 
> 赞同：1
> 
> 时间：2012-04-12T08:25:12.690
> 
> 标签：sql, timeout, ssis, xp-cmdshell

以下问题一直困扰着我一段时间：

我有一个 dtsx-package 用于处理一些接口。我在一个存储过程中调用它，如下所示：

```
SET @v_statement = 'DTEXEC /FILE "' + @v_if_ssis_package + '" /SET \Package.Variables[User::message_number].Properties[Value];' + CAST(@i_message_number AS VARCHAR(20))
                + ' /ConfigFile "' + REPLACE(@v_if_ssis_package, '.dtsx', '.xml')  + '"'

EXECUTE AS USER = 'shell';  

INSERT INTO #SSISResult
EXEC @v_ssis_returncode = xp_cmdshell @v_statement; 
```

据我所知，Shell 用户拥有能够运行 xp_cmdshell 调用的一切。尽管如此，我在运行存储过程时遇到了以下错误：

> 适用于 32 位的 Microsoft (R) SQL Server 执行包实用程序版本 10.50.1600.1 版权所有 (C) Microsoft Corporation 2010。保留所有权利。开始：10:12:28 错误：2012-04-12 10:12:59.11 代码：0x00000000 来源：脚本任务脚本描述：超时已过期。操作完成前超时时间已过或服务器没有响应...

这是一直困扰我的事情。如果我运行与独立查询完全相同的事情（如下所示），它运行得很好。关于这里发生了什么的任何想法？

```
EXECUTE AS USER = 'shell';
EXEC xp_cmdshell 'dtexec /FILE "C:\mypackage.dtsx" /SET \Package.Variables[User::message_number].Properties[Value];48644 /ConfigFile "C:\mypackage.xml"' 
```

非常感谢任何可以就这个问题给我一些指示的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:06:48.287

可能是权限错误

快速猜测：

跑`GRANT EXECUTE ON xp_cmdshell TO shell`

也许`EXECUTE AS login = 'shell'`而不是用户

# facebook - 自时间线更新以来，iframe 不再调整大小

> ID：10119969
> 
> 赞同：0
> 
> 时间：2012-04-12T08:25:40.147
> 
> 标签：facebook, iframe

自时间线更新以来，我的调整大小脚本停止在 facebook 上运行。这是我的代码：

CSS：

```
html {

margin:0;
padding:0;
height:1500px;
}

body {
width:520px;
padding:0;
margin:0;
height:1500px;
font-family:Arial, Helvetica, sans-serif;
font-size:12px;
color:#555859;
} 
```

在身体里：

```
<div id="fb-root"></div>
<script type="text/javascript" src="https://connect.facebook.net/en_US/all.js"></script> 
```

在页脚中：

```
<script type="text/javascript">
FB.Canvas.setSize({ width: 520, height: 1500 });
window.fbAsyncInit = function () {
FB.Canvas.setAutoGrow();
}
</script> 
```

在应用程序中，我将画布高度设置为流体。

我错过了什么重要的东西吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:39:50.513

尝试像这样修改代码：

```
window.fbAsyncInit = function () {  
    FB._https = (window.location.protocol == "https:");             
    FB.init({
        appId : 'YOUR_APP_ID',
        status : true,
        cookie : true,
        xfbml : true
    });
    FB.Canvas.setAutoGrow();

} 
```

# objective-c - 使用 gcc 4.6.2 进行目标 C 编译

> ID：10119971
> 
> 赞同：3
> 
> 时间：2012-04-12T08:25:44.577
> 
> 标签：objective-c

我正在尝试在 Windows 上学习目标 c。我的程序编译时出现警告

我的代码是

```
#include <objc/Object.h>

@interface Greeter:Object
{
  /* This is left empty on purpose:
   ** Normally instance variables would be declared here,
   ** but these are not used in our example.
   */
}

- (void)greet;

@end

#include <stdio.h>

@implementation Greeter

- (void)greet
{
    printf("Hello, World!\n");
}

@end

#include <stdlib.h>

int main(void)
{
    id myGreeter;
    myGreeter=[[Greeter alloc] init];
    [myGreeter greet];
    [myGreeter release];
    return EXIT_SUCCESS;
} 
```

我使用以下命令在 GNUStep 上编译我的程序

```
 gcc -o Greeter Greeter.m -I /GNUstep/System/Library/Headers -L /GNUstep/System/Libra
 /Libraries -lobjc -lgnustep-base -fconstant-string-class=NSConstantString 
```

我在编译时收到以下警告

```
: 'Greeter' may not respond to '+alloc' [enabled by default]
: (Messages without a matching method signature [enabled by default]
: will be assumed to return 'id' and accept [enabled by default]
: '...' as arguments.) [enabled by default]
: no '-init' method found [enabled by default]
: no '-release' method found [enabled by default] 
```

因此，当我运行我的可执行文件时，该对象不会被实例化。

我正在使用来自 MinGW 的 gcc，其中 gcc 版本是 4.6.2

- 更新 - -

当我从 NSObject 而不是 Object 扩展时，程序运行良好

--更新 2 ----

我的 Object.h 看起来像

```
#include <objc/runtime.h>

@interface Object
{
    Class isa;
}
@end 
```

--更新 3 ----

我修改了我的代码如下。它编译得很好，但我不确定这是否是正确的处理方式

```
@interface Greeter
{
  /* This is left empty on purpose:
   ** Normally instance variables would be declared here,
   ** but these are not used in our example.
   */
}

- (void)greet;

+ (id)alloc;
- (id)init;
- release;

@end

#include <stdio.h>

@implementation Greeter

- (void)greet
{
    printf("Hello, World!\n");
}

+ (id)alloc
  {
    printf("Object created");
    return self;
  }

- (id)init
  {
    printf("Object instantiated");
    return self;
  }

- release {}

@end

#include <stdlib.h>

int main(void)
{
    id myGreeter;
    myGreeter=[[Greeter alloc] init];
    [myGreeter greet];
    [myGreeter release];
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-14T17:12:45.917

除非你正在研究 Objective-C 的历史，否则试图学习基于 Object 类的语言完全是浪费时间。该类`Object`最后一次普遍用作根类是在 1994 年之前的 NEXTSTEP。

如果您的目标*是*学习 1994 年之前的 Objective-C，那么请说明，因为如果是这样，那么到目前为止您的答案是完全错误的。即使目标是采用现代模式，答案也更`How do I recreate NSObject?`接近于其他任何东西。请注意，如果*那*是您的目标......好吧......去吧！1994 年之前的 Objective-C 有点像 OOP 宏程序集，通过这种方式，在金属简单性方面有大量的力量。

例如，您说“我已按如下方式修改了我的代码。它编译得很好，但我不确定这是否是正确的处理方式”。

该代码可以编译，但是——不—​​—它不起作用。一点也不。对于初学者来说，该`+alloc`方法实际上并没有分配任何东西。该类也没有`Greeter`实现足够多的功能来执行类似`NSObject`.

如果您的目标是学习类似于现代 Objective-C 的东西并使用 Windows 来完成，那么最好的方法可能是安装 GNUStep 工具链。这样，至少，您将针对`NSObject`类似于现代 Cocoa（以及在较小程度上，iOS）的一组有根 API 进行编程。

如果您的目标是学习真正现代的 Objective-C，那么您至少需要一个可以运行最新版本 LLVM 的环境。当然，如果你想编写基于 Objective-C 的 iOS 或 Mac OS X 应用程序，你会想要一台运行 Lion 的 Mac。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T09:14:56.353

从内存中，`Object`该类没有实现保留计数，所以它不会有`release`，它会有`free`或其他一些方法。它应该有`+alloc`，`-init`虽然。由于没有“Objective-C 标准”，你必须打开你的`objc/Object.h`，看看它到底提供了什么。

请注意，在 GCC 4.6.2 上，`objc/Object.h`实际上包括`objc/deprecated/Object.h`，这意味着对`Object`作为类的支持可能相当有限。如果它不包含它，请尝试自己包含它：

```
#import <objc/deprecated/Object.h> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T09:26:11.660

进口基金会。

```
#import <Foundation/Foundation.h> 
```

扩展 NSObject 而不是 Object。

```
@interface Greeter : NSObject 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T09:08:07.817

您是否尝试过 [Greeter new]；? 打开 Object.h 并查看 Object 类中定义的方法...

编辑：要实现分配、保留和释放，您必须调用 objc 运行时。所以..我认为你必须写这样的东西：

```
@interface RootObject : Object
+ (id)alloc;
- (id)init;
- (id)retain;
- (void)release;
@end

@implementation RootObject
{
    unsigned int retainCount;
}

+ (id)alloc
{
    id myObj = class_createInstance([self class], 0);
    return myObj;
}
- (id)init
{
    retainCount = 1;
    return self;
}
- (id)retain
{
    retainCount++;
    return self;
}
- (void)release
{
    retainCount--;
    if (retainCount == 0) {
        object_dispose(self);
    }
}

@end 
```

然后你可以继承 RootObject。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-28T04:09:21.197

我所做的是将 gcc-4.6 与 linux 系统附带的 4.7 一起安装。它似乎有效，因为它具有旧代码的兼容性层。在我的基本 Makefile 中，我指定

```
>     CC=gcc-4.6
>     LIBS=-lobjc -lpthread
>     
>     all:       objc-test.m
>         $(CC)  -o objctest  objc-test.m $(LIBS) 
```

使用旧版本的 gcc 并没有什么“错误”。新的 4.7 版本已经破坏了 objc 系统，因此它不是一个独立的编译套件。*太糟糕了*。我想有一些原因，可能是政治原因，可能只是很难让一个编译器为每个人都做这一切。在以旧方式失败两天后，我已经成功地在 X86_64 Linux 中使用 gcc 4.7.3 使用 gnustep 制作了 objc 程序。

> 它涉及一堆设置：

设置环境变量

> 源 /usr/share/GNUstep/Makefiles/GNUstep.sh

并符合他们的构建系统。
一个基本的`GNUmakefile`：

```
include $(GNUSTEP_MAKEFILES)/common.make

TOOL_NAME = test

test_OBJC_FILES = main.m  

include $(GNUSTEP_MAKEFILES)/tool.make 
```

为了

主.m：

```
#import <Foundation/Foundation.h>

int
main (void)
{ 
  NSLog (@"Executing");
  return 0;
} 
```

跑步

> gs_make

在 subdir 中构建二进制文件 `obj`。

与这样的构建系统抗争实际上非常令人沮丧，并且不得不花费数小时从文档中梳理出花絮，才能从如此出色的编译器中获得基本功能。我希望他们在未来的迭代中修复它。

# c++ - 微型 C++ YAML 读取器/写入器

> ID：10119976
> 
> 赞同：2
> 
> 时间：2012-04-12T08:26:13.823
> 
> 标签：c++, serialization, yaml, formats

我正在编写一个嵌入式 C++ 程序，并且需要添加序列化/反序列化。格式应该是人类可读和可写的，我更喜欢使用 YAML 等标准格式（的子集）。我也更喜欢 YAML 而不是 JSON，因为它更简洁。

虽然 yaml-cpp 具有我想要的确切功能，但源代码几乎是 300K，并且几乎会使我的代码大小增加一倍，这对我来说似乎太过分了，只是为了添加人类可读的序列化/反序列化。

在我开始为 YAML 的子集编写自己的阅读器/编写器之前，我想先检查一下这是否已经存在？我还没有找到一个，但更喜欢使用现有的代码而不是滚动我自己的代码。是否有任何 C 或 C++ YAML 读取器/写入器，例如 50K 或更少的代码？我只需要基本数据结构（标量、数组、哈希）的功能，而不需要任何高级的东西。

提前非常感谢。

# html - html5视频播放器（无直接源）阻止下载

> ID：10119979
> 
> 赞同：0
> 
> 时间：2012-04-12T08:26:29.177
> 
> 标签：html, html5-video, mp4

我正在开发一个网站，用户可以在其中发布他们的视频（类似于 youtube）。有没有办法在没有直接来源的情况下在 html5 播放器中播放我的视频，就像 youtube 一样？有没有插件/脚本？如果您删除了指向插件/脚本的链接，那就太好了。请帮我。

目前我正在这样做（“uploads/movie.mp4”）：

```
<video width="320" height="240" controls="controls">
  <source src="uploads/movie.mp4" type="video/mp4" />
</video> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T12:29:56.973

“如果你不想让别人偷你的东西，就不要把它放到互联网上。” -未知用户-

目前没有办法通过 HTML5-videoelement 阻止这种情况。

为了使它更难，你可以尝试用javascript，fe禁用“右键单击”（[http://www.webpagemistakes.ca/disable-right-click/](http://www.webpagemistakes.ca/disable-right-click/)）

# sockets - 套接字和多个 IP 地址

> ID：10119983
> 
> 赞同：2
> 
> 时间：2012-04-12T08:26:33.967
> 
> 标签：sockets, networking, port, winsockets

我的机器上有两个网卡，配置了两个独立的 IP 地址。两个 IP 地址都属于同一个网络。我是否正确地说，当我创建一个特定于这些 IP 地址之一的套接字时？

**更新：**

这是我的情况：

我有一个位于 192.168.0.10 的硬件设备。它通过 udp 与 (192.168.0.11, 50000) 和 (192.168.0.12, 50000) 通信。硬件设备通过两个端口执行此操作，如下所示：(192.168.0.10, 49000) 和 (192.168.0.10, 49001)。

我通过脚本创建端口 (192.168.0.11, 50000) 和 (192.168.0.12, 50000)，以便记录和操作通信，然后将数据转发到两个能够与硬件通信的模拟器。

所以实际上，我的脚本是“中间人”，我在其中记录和破坏数据以测试硬件。

这是我的脚本的套接字接口：

```
IP 1 - Channel 1

External_socket = (192.168.0.10, 49000) ** Hardware
External_side_socket = (192.168.0.11, 50000) ** Script
Simulator_side_socket = (192.168.0.11, 50001) ** Script
Simulator_socket = (192.168.0.11, 50002) ** Simulator

IP2 - Channel 2

External_socket = (192.168.0.10, 49001) ** Hardware
External_side_socket = (192.168.0.12, 50000) ** Script
Simulator_side_socket = (192.168.0.12, 50001) ** Script
Simulator_socket = (192.168.0.12, 60002) ** Simulator 
```

这按预期工作，并且为每个通道记录了正确的数据。

但是，如果我进行两个简单的更改，它就会停止工作：

1）我将第二个模拟器的配置文件从60002改为50002，同时保持ip地址为192.168.0.12。

2) 在我的脚本中，我还将 IP2 的 60002 更改为 50002。

突然，来自第二个通道的数据到达了第一个模拟器。怎么会这样？.net 有一个**IPAny**，我想知道模拟器是否以某种方式使用它并忽略其配置文件中的 IP 地址。你认为这可能是这里的问题吗？

谢谢，

巴里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:00:27.473

我会说这是正确的。取决于您要在语句中使用的抽象级别。

创建套接字时，它不会绑定到 IP 地址。[查看有关Berkeley 套接字](http://en.wikipedia.org/wiki/Berkeley_sockets)的 Wikipedia 文章，您会看到第一个创建 socket( `socket()`) 声明*域*、*套接字类型*和*系列*。然后将套接字绑定 ( `bind()`) 到一个地址，例如 10.0.0.1。然后，根据您要使用的套接字，您可以将其设置为侦听、接受或连接。

本地主机具有与任何其他设备一样的 IP 地址，即 127.0.0.1。您创建套接字并将其绑定到 127.0.0.1。然后，该套接字就像您可以与之通信的任何其他套接字一样工作。

您还可以阅读有关[Network Socket](http://en.wikipedia.org/wiki/Network_socket)的 Wikipedia 文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T11:58:59.933

您可以`bind`使用 value `INADDR_ANY`，这意味着不绑定到任何特定的网络接口，因此您可以忽略运行程序的 IP 地址。

参考[这里](https://www.cs.cmu.edu/~srini/15-441/F01.full/www/assignments/P2/htmlsim_split/node18.html)和[这里](https://msdn.microsoft.com/en-us/library/windows/desktop/ms737550%28v=vs.85%29.aspx)。

# java - XML中定义的Android Drawables可以包含路径吗？

> ID：10119989
> 
> 赞同：5
> 
> 时间：2012-04-12T08:26:50.770
> 
> 标签：java, android, svg

我使用 Inkscape 在我的应用程序中创建艺术资产。

目前，我必须先从我的（简单）Inkscape 矢量艺术中创建位图，然后才能在我的应用程序中使用这些图像。

我希望能够创建一个包含我的艺术路径的 XML Drawable。这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-26T06:33:10.393

随着**Android 5.0 Lollipop** (API 21) 的发布，现在可以使用[`VectorDrawable`](https://developer.android.com/reference/android/graphics/drawable/VectorDrawable.html)

```
<vector xmlns:android="http://schemas.android.com/apk/res/android"
     android:height="64dp"
     android:width="64dp"
     android:viewportHeight="600"
     android:viewportWidth="600" >
     <group
         android:name="rotationGroup"
         android:pivotX="300.0"
         android:pivotY="300.0"
         android:rotation="45.0" >
         <path
             android:name="v"
             android:fillColor="#000000"
             android:pathData="M300,70 l 0,-70 70,70 0,0 -70,70z" />
     </group>
 </vector> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T08:29:54.793

不是直接的，但是有一些第三方的解决方法。例如，看看[这个指南](http://www.codeproject.com/Articles/136239/Android-ImageView-and-Drawable-with-SVG-Support)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-26T20:18:42.810

我正在尝试同样的事情。这个项目有一个纯Java impl。它适用于简单对象，但在某些复杂对象上失败。它确实有一种将 SVG 路径字符串转换为路径对象的方法......

[https://code.google.com/p/svg-android/](https://code.google.com/p/svg-android/)

# vb6 - 如何减少小数长度

> ID：10119990
> 
> 赞同：2
> 
> 时间：2012-04-12T08:27:01.750
> 
> 标签：vb6

我想减少小数长度

```
 text1.text = 2137.2198231578 
```

从上面，我只想显示前 2 位十进制数

预期产出

```
text1.text = 2137.21 
```

这该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T08:39:30.763

```
Format("2137.2198231578", "####.##") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:35:35.410

`Format()`当我注意到 p0rter 评论时，我正要发布使用。

```
Format(text1.text, "000.00") 
```

我想`Int()`会为你四舍五入。

自从我使用VB6以来已经很多年了......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T09:50:00.917

这个函数应该做你想做的（内联注释应该解释正在发生的事情）：

```
Private Function FormatDecimals(ByVal Number As Double, ByVal DecimalPlaces As Integer) As String
    Dim NumberString As String
    Dim DecimalLocation As Integer
    Dim i As Integer
    Dim LeftHandSide As String
    Dim RightHandSide As String

    'convert the number to a string
    NumberString = CStr(Number)
    'find the decimal point
    DecimalLocation = InStr(1, NumberString, ".")

    'check to see if the decimal point was found
    If DecimalLocation = 0 Then
        'return the number if no decimal places required
        If DecimalPlaces = 0 Then
            FormatDecimals = NumberString
            Exit Function
        End If
        'not a floating point number so add on the required number of zeros
        NumberString = NumberString & "."
        For i = 0 To DecimalPlaces
            NumberString = NumberString & "0"
        Next
        FormatDecimals = NumberString
        Exit Function
    Else
        'decimal point found
        'split out the string based on the location of the decimal point
        LeftHandSide = Mid(NumberString, 1, DecimalLocation - 1)
        RightHandSide = Mid(NumberString, DecimalLocation + 1)
        'if we don't want any decimal places just return the left hand side
        If DecimalPlaces = 0 Then
            FormatDecimals = LeftHandSide
            Exit Function
        End If
        'make sure the right hand side if the required length
        Do Until Len(RightHandSide) >= DecimalPlaces
            RightHandSide = RightHandSide & "0"
        Loop
        'strip off any extra didgits that we dont want
        RightHandSide = Left(RightHandSide, DecimalPlaces)
        'return the new value
        FormatDecimals = LeftHandSide & "." & RightHandSide
        Exit Function
    End If
End Function 
```

用法：

```
Debug.Print FormatDecimals(2137.2198231578, 2) 'outputs 2137.21 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T14:43:28.183

看起来相当简单，但我必须在这里遗漏一些微妙的东西。关于什么：

```
Option Explicit

Private Function Fmt2Places(ByVal Value As Double) As String
    Fmt2Places = Format$(Fix(Value * 100#) / 100#, "0.00")
End Function

Private Sub Form_Load()
    Text1.Text = Fmt2Places(2137.2198231578)
End Sub 
```

这也适用于小数点字符为逗号的语言环境。

# java - 如何验证配置相互认证（客户端证书、服务器证书）Java EE 的正确性？

> ID：10119992
> 
> 赞同：1
> 
> 时间：2012-04-12T08:27:04.950
> 
> 标签：java, security, authentication

我正在尝试编写一个简单的应用程序来了解基于客户端和服务器证书配置身份验证的基础知识。

我已经按照 jave ee 5、java ee 6 教程 [http://docs.oracle.com/javaee/6/tutorial/doc/glien.html中的说明完成了所有操作](http://docs.oracle.com/javaee/6/tutorial/doc/glien.html)

1.  从 javaee tutorials hello basicauthorization 中打开的示例（只是简单的 servlet，只能在身份验证后访问），然后将其重新配置为客户端证书而不是基本授权
2.  配置的 web.xml
3.  配置 glassfish-web.xml
4.  生成的客户端证书
5.  导入客户端证书，以便服务器信任它。

问题：

当我部署我的应用程序并点击与应用程序相对应的链接时，我收到来自 glassfish 服务器 HTTP 状态 400 的消息 - 此请求中没有客户端证书链”。

因此，客户端（浏览器）似乎没有随请求发送证书

我尝试将 .cer 证书添加到 Chrome、firefox、Internet Explorer 并添加它们（不显示错误），但正如您所见，这没有帮助。

所以，问题是：

如何通过具有客户端 .cer 证书的 Web 浏览器访问我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:39:42.290

您可以通过添加（在 Glassfish 中的某处）系统属性在服务器端调试 ssl：

```
-Djavax.net.debug=all 
```

有关详细信息，请参阅[此页面](http://docs.oracle.com/javase/1.5.0/docs/guide/security/jsse/ReadDebug.html)。

您还可以使用 openssl 工具从客户端角度进行调试：

```
openssl s_client -connect host:port -debug -msg 
```

你应该看到这样的东西：

```
...
Acceptable client certificate CA names
/C=PL/O=company/OU=xx/CN=host/emailAddress=email@example.com
/C=PL/O=company/OU=xx/CN=ca/emailAddress=email@example.com
---
SSL handshake has read 2536 bytes and written 116 bytes
... 
```

您的问题可能与服务器端的错误信任库配置有关 - 服务器发送一些*可接受的客户端证书 CA 名称*（或根本没有），但浏览器没有提供任何东西 - 它**没有任何私钥+证书由可接受的 ca 签发**。

# java - 使用java代码获取完整的网页

> ID：10119998
> 
> 赞同：4
> 
> 时间：2012-04-12T08:27:33.577
> 
> 标签：java, javascript, html-parsing, jsoup

我想实现一个 java 方法，它以 URL 作为输入并将包括 css、图像、js（所有相关资源）在内的整个网页存储在我的磁盘上。我使用 Jsoup html 解析器来获取 html 页面。现在我想实现的唯一选择是使用 jsoup 获取页面，现在解析 html 内容并将相对路径转换为绝对路径，然后对 javascript、图像等发出另一个获取请求并将它们保存在磁盘上。我还阅读了有关 html 清洁器、htmlunit 解析器的信息，但我认为在所有这些情况下，我都必须解析 html 内容以获取图像、css 和 javascript 文件。

任何建议，无论我的想法是否正确。或者有什么简单的方法来完成这个任务？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T09:14:19.393

基本上，你可以用 Jsoup 做到这一点：

```
 Document doc = Jsoup.connect("http://rabotalux.com.ua/vacancy/4f4f800c8bc1597dc6fc7aff").get();
         Elements links = doc.select("link");
         Elements scripts = doc.select("script");
        for (Element element : links) {
              System.out.println(element.absUrl("href"));
        }
        for (Element element : scripts) {
              System.out.println(element.absUrl("src"));
        } 
```

等等图片和所有相关资源。

**但是**如果您的站点使用 javaScript 创建了一些元素，Jsoup 将跳过它，因为它无法执行 javaScript

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:57:50.910

几年前我遇到过类似的问题，我们使用了与您计划完全相同的机制。解析 html 内容并将相对路径转换为绝对路径，并且我们使用多个线程同时运行并检索图像、java 脚本等以进行性能优化。我不知道它是否应该像我们那样做，但最终它对我们有用。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-03T14:21:56.820

[这个 GitHub 项目](https://github.com/PramodKhare/GetMeThatPage)使用 jSoup 执行此操作。如果已经存在就不需要再写了！

编辑：我制作了此类的[改进版本，并添加了新功能：](https://github.com/JonasCz/save-for-offline/blob/master/app/src/main/java/jonas/tool/saveForOffline/PageSaver.java)

它可以：

*   从链接或内联 CSS 中提取 URL，例如。用于背景图像，并下载并保存它们。

*   它对所有文件（图像、脚本等）进行多线程下载

*   提供有关进度和错误的详细信息。

*   可以获取嵌入在 HTML 文档中的 HTML 框架，也可以获取嵌套框架。

一些警告：

*   使用[JSoup](http://square.github.io/okhttp/)和[OkHttp](http://square.github.io/okhttp/)，因此您需要拥有这些库。

*   无论如何，现在是 GPL 许可的。

# c++ - 通过 Windows 管道写入进程 STDIN

> ID：10119999
> 
> 赞同：4
> 
> 时间：2012-04-12T08:27:35.513
> 
> 标签：c++, windows, process, pipe

我正在尝试创建一个函数，该函数将生成一个程序实例，然后将一些数据通过管道传输到其 STDIN 中，然后使用 C++ 读取进程的输出。我查看了一个位于[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682499%28v=vs.85%29.aspx)的 MSDN 示例，这让我很困惑，当我尝试使用该示例时，我得到了一些令人讨厌的错误代码并且它不起作用。

```
 HANDLE hWriteOUT, hReadOUT, hWriteIN, hReadIN;
    SECURITY_ATTRIBUTES saPipe = {0};
    PROCESS_INFORMATION procInfo = {0};
    STARTUPINFO procSi;
    DWORD dwWritten, dwRead;
    char buf[512];

    saPipe.nLength = sizeof(SECURITY_ATTRIBUTES);
    saPipe.bInheritHandle = TRUE;
    saPipe.lpSecurityDescriptor= NULL;
    CreatePipe(&hReadOUT, &hWriteOUT, &saPipe, 0);
    SetHandleInformation(hReadOUT, HANDLE_FLAG_INHERIT, 0);
    CreatePipe(&hReadIN, &hWriteIN, &saPipe, 0);
    SetHandleInformation(hReadIN, HANDLE_FLAG_INHERIT, 0);

    ZeroMemory(&procSi, sizeof(STARTUPINFO));
    procSi.cb = sizeof(STARTUPINFO);
    procSi.hStdError = hWriteOUT;
    procSi.hStdOutput = hWriteOUT;
    procSi.hStdInput = hReadIN;
    procSi.dwFlags |= STARTF_USESTDHANDLES;

    CreateProcess(NULL, "cmd", NULL, NULL, TRUE, 0, NULL, NULL, &procSi, &procInfo);
    //Gives me an error code of 18 but returns a 1 when a 0 indicates failure.

    WriteFile(hWriteIN, "notepad", sizeof("notepad"), &dwWritten, NULL);
    cout << GetLastError();  //This gives me error code 18 (ERROR_NO_MORE_FILES)
    ReadFile(hReadOUT, buf, 512, &dwRead, NULL);
    cout << buf;  //This prints "Microsoft Windows [version 6.1.7601]
    CloseHandle(hWriteIN); 
```

该代码无法将字符串“notepad”通过管道传输到 cmd.exe，但成功启动了命令 shell。如果我查看任务管理器，会生成几个命令提示符实例，但没有记事本。此外，该`ReadFile()`功能似乎是唯一有效的功能，但它甚至不是从管道进程（应该产生的记事本）读取，而是从 CMD 读取。更糟糕的是，它会截断除读取的第一行之外的所有内容！（CMD 打印“Microsoft Windows....\n Copyright...\n C:\Users\Foo>...\n”，但 `ReadFile() 只抓取第一行）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T21:32:48.680

代码按预期运行。您似乎误解了许多事情：

1) 如果您希望 cmd.exe 运行它，您需要在命令末尾发送一个 ENTER ("\n")。[通常最好在CreateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)中指定要运行的命令，例如，您可以将“cmd /c notepad”指定为命令行，而不仅仅是“cmd”。

2) 您已将管道连接到 cmd.exe 进程的标准输入和输出，因此您当然会看到该进程的输出。如果您不想看到 cmd.exe 的输出，请不要运行它；直接运行您想要的应用程序，例如，您可以指定“记事本”作为要运行的命令行。

3）从管道读取时，[ReadFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467%28v=vs.85%29.aspx)一次只返回一个数据块，所以需要循环调用。

4）记事本是一个图形用户界面进程，所以它不使用标准输入或标准输出。大概这只是一个选择不当的示例，而您实际上想要运行命令行应用程序？

5) 除非特别说明，错误代码（由[GetLastError](http://msdn.microsoft.com/en-us/library/ms679360%28VS.85%29.aspx)返回）仅在函数失败时才有意义。您正在使用的函数都不是这种情况的例外，因此检查错误代码没有意义，除非函数返回零表示它已失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T14:50:08.383

我知道现在回答这个问题有点太晚了，但你的代码也有其他问题。它似乎`SetHandleInformation(hReadOUT, HANDLE_FLAG_INHERIT, 0);`并且`SetHandleInformation(hReadIN, HANDLE_FLAG_INHERIT, 0);`会破坏事物。我不知道为什么，但是在尝试运行您的代码之后，cmd 无法从管道中读取值，直到我删除这两行。