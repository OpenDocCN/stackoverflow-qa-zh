# StackOverflow 问答 11086000-11086999

# excel - 带有可变参数的 Excel SUMIFS sum_range

> ID：11086001
> 
> 赞同：1
> 
> 时间：2012-06-18T15:27:32.570
> 
> 标签：excel, variables, sumifs

所以我有一个 excel 电子表格指示器，我正在尝试制作一个 SUMIFS 语句来更改我从哪一列中选择。所以我将在左侧有列名，我想将其用作可变参数。请参见下表。

```
TABLE1
        week1  week2 week3
column1  x       x     x 
column2  x       x     x 
column3  x       x     x

TABLE2
Week column1  column2 column3
  1     x        x       x
  1     x        x       x
  1     x        x       x
  2     x        x       x
  2     x        x       x
  2     x        x       x 
```

所以在上面的表格中，TABLE2 保存了所有数据，而 TABLE1 基本上是按周计算的数据的总和。所以我希望 SUMIFS 读取类似 SUMIFS(TABLE2[????], TABLE2[Week], $B$2) 但我不知道如何获取 SUMIFS 的 sum_range 部分让我传递参数. 关于如何做到这一点的任何提示或想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:39:47.247

你可以使用 INDEX 和 MATCH，像这样

`=SUMIFS(INDEX(TABLE2,0,MATCH($A3,$A$7:$D$7,0)),TABLE2[Week],B$2)`

其中 A3 包含“column1”，A7:D7 包含 TABLE2 的列标题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:45:53.237

```
=INDIRECT("TABLE2[" & A3 & "]") 
```

将解析为 TABLE2[column1]（假设 A3 包含文本“column1”）

因此可以将间接函数作为您的 sum_range 放入（在 excel 2007 中测试）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:02:56.643

这是一个 SUMPRODUCT 公式。我使用 Sheet1 和 Sheet2 而不是表格。您可以更改公式以满足您的需要。
`=SUMPRODUCT(--(Sheet2!$A2 = Sheet1!$B$1:$D$1) * --(Sheet2!B$1 = "week" & Sheet1!$A$2:$A$7), Sheet1!$B$2:$D$7)`

# mysql - 我应该用什么来验证使用nodejs登录的用户

> ID：11086003
> 
> 赞同：1
> 
> 时间：2012-06-18T15:27:35.207
> 
> 标签：mysql, node.js, express

我在 ExpressJS 中使用 MySQL。我已经在我的数据库中插入了数据，现在我需要使用数据库中存在的数据对用户进行身份验证，例如：

```
username: john 
password: 123 
```

现在，当 john 使用用户名和密码登录时，它应该检查它是否存在于 MySQL 中，因为我在 PHP 中有一点背景，我们使用以下方法：

```
$query=mysql_query("SELECT * from login WHERE username='".$_POST['username']."' AND password='".$_POST['password']."' ") or die(mysql_error());

if(mysql_fetch_row($query)>0){
    echo "Login Sucessfully";
        }>
    else{
            echo "Wrong Id or Password";
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T00:19:24.527

查看 express 的 github 页面中的[auth 示例](https://github.com/visionmedia/express/blob/master/examples/auth/app.js)。这需要一些时间来理解，特别是如果您不习惯异步编程 - 但这个例子应该可以。

这个例子根本没有使用数据库，但是你可以尝试使用@felixge 的[mysql 模块](https://github.com/felixge/node-mysql)来实现一个 mysql 数据库。

# java - 为什么 System.out.println() 以 ASCII 码零终止

> ID：11086009
> 
> 赞同：8
> 
> 时间：2012-06-18T15:28:12.447
> 
> 标签：java

试试这段代码 -

```
public class WhitespaceTest
{
    public static void main(String[] args)
    {
        int x = 0;
        char c = (char) x;
        System.out.println("c-->"+c+"<---this doesn't print?");
    }
} 
```

输出是 -

```
c--> 
```

为什么 System.out.println() 以 ASCII 码零终止？

我在 Windows 7 下的 JCreator LE 中试过这个。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-18T15:34:32.010

这取决于您的*控制台*做什么（或其他任何处理`System.out`）。`System.out`将很好地传播所有信息，如果您的控制台对 U+0000 没有特别的含义，那么一切都会好起来的。但是，许多 UI 控件*会将*其视为终止字符。这不是 Java 的“错误”——它是 UI 控件本身。

（仅供参考，在 Windows 7 上的 Windows 命令提示符下运行该代码对我来说很好。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T15:35:28.590

在 C/C++ 样式字符串中，字符串的结尾由终止空字符的位置确定（值为 0 的字符，如您的情况）。很可能该`System.out.println()`调用将字符串逐字传递给操作系统，操作系统认为字符串以空字符结尾，并且只打印到该点

# google-maps - 谷歌地图标记在 chrome 和 IE 中不起作用

> ID：11086010
> 
> 赞同：0
> 
> 时间：2012-06-18T15:28:12.777
> 
> 标签：google-maps, google-chrome, google-maps-markers

我创建了一个缩放以适应标记谷歌地图，它在 Firefox 中运行良好，但在 chrome 和 IE 中运行良好

chrome和IE中的问题所有标记都是一样的。

您可以在此链接中查看代码源

[http://www.ermes.net/user/profile/zoommap.php?user_id=40442](http://www.ermes.net/user/profile/zoommap.php?user_id=40442)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:38:35.690

我看到的只是这两行代码。您在所有标记中使用相同的图标

```
var marker=new google.maps.Marker( latlng,getIcon_StrRicettive());  
//var marker=new google.maps.Marker( latlng,getIcon_Comunita()); 
```

我没有检查所有源代码，但我检查的行有相同的“重复”代码

# javascript - 如何使用 postMessage 作为序列化程序来隔离消息？

> ID：11086015
> 
> 赞同：2
> 
> 时间：2012-06-18T15:28:35.117
> 
> 标签：javascript, serialization

使用`JSON.stringify`and`JSON.parse`序列化和反序列化对象有一些微妙的问题，例如日期对象被序列化为字符串，然后在另一端作为字符串而不是日期对象出现。我已经尝试使用`postMessage`具有产生 1:1 结果的好处的替代方法，但我担心其他处理程序会忽略消息。我考虑过编写自己的序列化器/反序列化器，但更喜欢本机浏览器功能。

有没有办法`postMessage`像序列化器一样使用，而不必担心被窃听？

*注意：我不关心使用开发工具窃听。我的应用程序正在加载类似模块的插件，我想确保这些插件无法窃听其他模块的消息。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T15:40:44.690

[`JSON.stringify`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)您可以向and提供自定义 JSON 解析器/字符串化器[`JSON.parse`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)：

```
var serialized = JSON.stringify(obj, /*func*/replacer);
var deserialized = JSON.parse(serialized, /*func*/reviver); 
```

除了自定义 reviver 之外，您还可以`toJSON`在将要序列化的对象上定义一个方法。此方法接收一个参数：^(数组中键的名称索引、对象中的属性名称)（如果适用）。

```
// Examples of a serializing a function
var dummyFunction = function() {return 'hey';};

Function.prototype.toJSON = function(key) {
    'use strict';
    return this.toString();
};
JSON.stringify(dummyFunction);
// Method 2:
var replacer = function(/*string*/key, /*any*/value, /*boolean*/pretty_print) {
    if (typeof value == 'function') return value.toString();
    return value;
};
JSON.stringify(dummyFunction, replacer);
// >>> "function () {\n    return \"hey\";\n}"
// Result of the previous, stored in a variable
var result =  '"function () {\\n    return \\"hey\\";\\n}"';

// Reviver example
// Note: Just an example. Do not use it without modification in production code,
// Because the pattern can easily be misguided: "function(){}alert('Evil');x={}"
// Even if you do not mind, at least add a try-catch block inside
//   `if (func)`, so that a malformed function does not break the reviver
JSON.parse(result, function(/*string*/key, /*string*/value) {
    var func = /^\s*function\s*\(([^)]*)\)\s\{([\S\s]*)}$/.exec(value);
    if (func) {
        // Note: Function( .. ) is equivalent to new Function( .. )
        var args = func[1].match(/[^,\s]+/g); // <-- Parameters
        // Function body:
        if (args === null) args = [func[2]];
        else args.unshift(func[2]);
        return Function.apply(null, args);
    }
    return value;
}); 
```

**这是本机解析与使用 reviver 解析**的 JSPerf 比较：http: **[//jsperf.com/json-reviver](http://jsperf.com/json-reviver)**。它表明，没有什么特别功能的自定义 reviver 速度要慢两倍，而具有昂贵功能的 reviver 则要慢得多。
但是，当将最后一种方法与使用原生 JSON 和“手动转换”的较弱方法进行比较时，差异似乎被忽略了。
注意：仅对单个值进行了基准测试。确保为您自己的（特定）案例创建自定义基准，因为不可能创建一个代表所有可能案例的基准。

我创建了一个[JSPerf 测试用例](http://jsperf.com/comparison-of-tojson)来检查`.toJSON`. 为了隔离噪音，我创建了一个基于`Date`对象的测试用例。具有多个函数调用的自定义函数仅比原生函数慢两倍[`Date.prototype.toJSON`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/toJSON)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:34:26.063

`postMessage`您可以使用特定的克隆方法，而不是使用。

我用这个：

```
function goclone(source) {
    if ($.isArray(source)) {
        var clone = [];
        for (var i=0; i<source.length; i++) {
            if (source[i]) clone[i] = goclone(source[i]);
        }
        return clone;
    } else if (typeof(source)=="object") {
        var clone = {};
        for (var prop in source) {
            if (source[prop]) {
                clone[prop] = goclone(source[prop]);
            }
        }
        return clone;
    } else {
        return source;
    }
} 
```

它不会复制原型、函数等，并忽略`null`/`NaN`字段。

如果你不想使用 jquery，你可以自己编写一个`isArray`这样的函数

```
function isArray(obj) {
   return Object.prototype.toString.call(obj) === '[object Array]':
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:40:06.063

DOM 事件级别 2 可以被任何调用`stopPropagation`它正在处理的事件对象的方法的事件处理程序取消。如果您确保您的事件处理程序是页面上的第一个（主要是通过确保您的脚本标签是页面上的第一个），那么您可以调用`stopPropagation`以防止其他代码窃听您的消息。您也可以有选择地执行此操作，以确保仅过滤掉您的事件。

所以基本上你会这样做：

```
window.addEventListener("message", function (event) {
    var data = JSON.parse(event.data);

    if (data.secret === "my event and not anyone else's") {
        // do something
        event.stopPropagation();
    }
}, false); 
```

但是请注意，人们仍然可以使用诸如greasemonkey 之类的工具来拦截您的事件。在网络上，您永远无法确定。JavaScript 是一种开源语言。希望这会有所帮助。

# dependencies - 在 Knockout 中可视化计算字段的依赖关系

> ID：11086019
> 
> 赞同：5
> 
> 时间：2012-06-18T15:28:51.713
> 
> 标签：dependencies, knockout.js

有没有办法在 knockout.js 中确定

*   哪些值（`ko.observable`或`ko.computed`）以何种方式相互依赖（先例/依赖项）和
*   哪些 HTML 节点（文本绑定，对于初学者）取决于当前值¹，所以我可以在屏幕上突出显示它们。

?

¹ *这意味着我需要一种从 HTML 节点到 connected 的方法`ko.subscribable`，而不仅仅是像视图模型那样`ko.dataFor()`。这似乎也是不可能的。*

* * *

我已经构建了一个像电子表格一样工作的 Web 应用程序 - 许多数值根据一组业务规则相互依赖。其中一些是计算出来的，其中一些是用户提供的。

目前我正在使用我自己的 JS 库来执行所有依赖项跟踪和动态屏幕更新。这可行，但我想将其与 knockout.js 交换以增加多功能性和优雅性。

**Knockout 在某处跟踪此信息。我该如何使用它？**

* * *

例如，想象一个汇总了几个整数的电子表格（HTML 表格）：

```
  | 美国广播公司
--+---------
1 | 4 1 5
2 | 2
3 | 3 8

```

*   当用户点击单元格 B3 时，我想知道它依赖于 B1 和 B2，而 C3 依赖于它。
*   当用户单击单元格 C3 时，我想知道它取决于 A1、B1、C1、B2 和 B3。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T02:46:16.443

我[为 Knockout](https://github.com/mbest/knockout-deferred-updates) (2.0+) 编写了一个插件，其主要目的是消除计算 observables 的重复更新。但是由于插件替换了`ko.computed`对象，我还添加了获取可观察对象的依赖项/依赖项列表的功能。每个计算对象都有一个`getDependencies`返回可观察对象数组的方法，每个可观察/计算的可观察对象都有一个返回计算可`getDependents`观察对象数组的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T16:15:15.623

这是一个非常有趣的问题——而且，它似乎不是一个容易回答的问题。我查看了敲除源，看起来这些数据存储在`_subscriptionsToDependencies`属性中，但这似乎并没有公开。

我确实注意到`getDependenciesCount`了哪些是暴露的 - 查看[这个小提琴](http://jsfiddle.net/2kcuH/)以查看它的实际效果。

我仍在对此进行调查，但似乎它可能需要一个淘汰赛本身，除非我们能够获得底层的 observable。但这是我到目前为止发现的内容，您可能会觉得有帮助：

通过调试器运行它，似乎在运行时敲除的缩小版本将`_subscriptionsToDependencies`属性重命名为`V`. 在运行时，该`getDependenciesCount`属性的值为：`function (){return v.length}`

我希望这有帮助。

编辑：对于那些到达这个问题寻找答案的人，从 2.1 版开始，在 KnockoutJS 中似乎不可能

# php - strtotime 可以处理分数吗？

> ID：11086022
> 
> 赞同：2
> 
> 时间：2012-06-18T15:29:05.097
> 
> 标签：php, strtotime

`date('m/d/Y', strtotime('-1.5 years'))`返回，今天（2012 年 6 月 18 日）`06/18/2017`，。

为什么会这样，有什么方法可以让 strtotime 处理小数年？它似乎正在将“-1.5”更改为“+5”。

编辑：所以你知道，这是在 PHP 5.1 上，所以更新的日期函数不可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T15:31:23.660

您最好的解决方案可能是将其转换为几个月。所以`1.5 years`变成`18 months`了哪个会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:47:29.820

已针对此问题打开错误报告[https://bugs.php.net/bug.php?id=62353&edit=3 。](https://bugs.php.net/bug.php?id=62353&edit=3)

有一个名为 timelib 的库，其中包含所有时间函数。似乎将相对时间转换为时间戳存在问题。

以下是创建相对时间的函数：

```
static void timelib_set_relative(char **ptr, timelib_sll amount, int behavior, Scanner *s)
{
    const timelib_relunit* relunit;

    if (!(relunit = timelib_lookup_relunit(ptr))) {
            return;
    }

    switch (relunit->unit) {
            case TIMELIB_SECOND: s->time->relative.s += amount * relunit->multiplier; break;
            case TIMELIB_MINUTE: s->time->relative.i += amount * relunit->multiplier; break;
            case TIMELIB_HOUR:   s->time->relative.h += amount * relunit->multiplier; break;
            case TIMELIB_DAY:    s->time->relative.d += amount * relunit->multiplier; break;
            case TIMELIB_MONTH:  s->time->relative.m += amount * relunit->multiplier; break;
            case TIMELIB_YEAR:   s->time->relative.y += amount * relunit->multiplier; break;

            case TIMELIB_WEEKDAY:
                    TIMELIB_HAVE_WEEKDAY_RELATIVE();
                    TIMELIB_UNHAVE_TIME();
                    s->time->relative.d += (amount > 0 ? amount - 1 : amount) * 7;
                    s->time->relative.weekday = relunit->multiplier;
                    s->time->relative.weekday_behavior = behavior;
                    break;

            case TIMELIB_SPECIAL:
                    TIMELIB_HAVE_SPECIAL_RELATIVE();
                    TIMELIB_UNHAVE_TIME();
                    s->time->relative.special.type = relunit->multiplier;
                    s->time->relative.special.amount = amount;
    }
} 
```

**注意：**此错误也会导致相同的问题：

```
echo strtotime("1.5 days ago"); 
```

变成-5天，-5小时，而不是期望的-1天和12小时（相对）。

# jquery - jQuery 切换和上滑？

> ID：11086025
> 
> 赞同：0
> 
> 时间：2012-06-18T15:29:15.130
> 
> 标签：jquery, toggle

```
$('.rs-expand').hide();
$('.rs-details').click(function(){
    $('.rs-expand').slideUp('fast');
    $('.rs-s li').removeClass('toggled');
    $(this).parent().find('.rs-expand').toggle('blind', 200);
    $(this).parent().addClass('toggled');
}); 
```

我在哪里添加或如何添加，如果再次单击，它将向上滑动？

**HTML**

```
<ul class="rs-s">
  <li> 
    <div class="rs-details">
      <h2>Lorem ipsum dolor sit amet</h2>
      <div class="rs-expand"> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. </div>
    </div>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:36:34.830

```
$('.rs-expand').hide();
$('.rs-details').click(function(){
    $('.rs-expand').slideUp('fast');
    $(this).children('.rs-expand').slideToggle('fast');
}); 
```

[http://jsfiddle.net/B4Kjs/2/](http://jsfiddle.net/B4Kjs/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:43:51.773

```
$('.rs-details').toggle(function(){
    $(this).find('div').slideToggle('fast');
    $(this).parent('li').removeClass('toggled');
  },
  function() {
    $(this).find('div').slideToggle('fast');
    $(this).parent('li').addClass('toggled');
  }); 
```

**JSFiddle**
[http://jsfiddle.net/B4Kjs/](http://jsfiddle.net/B4Kjs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T04:39:55.850

修改后的代码。这应该会减少您的需求。

**CSS样式：**

```
.rs-expand {
    display: none;
} 
```

**jQuery：**

```
$('.rs-details').click(function(){
    $('.rs-expand').slideToggle('fast');
}); 
```

[在这里看小提琴](https://jsfiddle.net/ydpkg6vp/)

# css - 连续 3 个 div - 无法让最右边的 div 对齐

> ID：11086034
> 
> 赞同：0
> 
> 时间：2012-06-18T15:29:53.977
> 
> 标签：css, html, position, css-float

今天早上我为此苦苦挣扎。我正在创建一个最终将成为 WP 主题的内容，其中将有一部分最近的工作、一个分隔符和一部分最近的博客文章水平对齐。事情开始变得很好，但最右边的部分一直被推倒。我不认为这是宽度的问题，因为 a) 似乎有足够的空间 b) 无论我对各种宽度和填充物做什么，问题仍然存在。我觉得它可能与浮动有关，但我不确定如何解决这个问题。

无论如何，这就是我正在查看的内容： ![当前的](../Images/3c1c726ee027f6e4519ba14a04f198cc.png)

我希望它是这样的，分隔线完美地位于页面的中心：

内容内容内容| 内容内容内容

```
#recent {
    border-top: 1px solid #202020;
    padding-bottom: 40px;
    padding-top: 40px;
}

#recent .divider {
}

#recent #recent-work {
    float: left;
}

#recent #recent-work p span {
    font-family: nevis-webfont;
    font-size: 112.5%;
    font-weight: normal;
    letter-spacing: 1px;
    text-transform: uppercase;
}

#recent #recent-work a {
    padding-bottom: 40px;
    padding-right: 20px;
}

#recent #recent-work .next{
    float: right;
}

#recent #recent-blog {
    float: right;
}

#recent #recent-blog p span {
    font-family: nevis-webfont;
    font-size: 112.5%;
    font-weight: normal;
    letter-spacing: 1px;
    padding-left: 20px;
    text-transform: uppercase;
}

#recent #recent-blog a {
    padding-bottom: 40px;
    padding-left: 20px;
}

#recent #recent-blog .next{
    float: right;
} 
```

和

```
<div id="recent">
    <div id="recent-work">
           <p><span>Recent Work</span></p>
           <a href="#"><img src="http://lorempixel.com/120/120/" alt="Click for more information" /></a>
               <a href="#"><img src="http://lorempixel.com/120/120/" alt="Click for more information" /></a>
               <a href="#"><img src="http://lorempixel.com/120/120/" alt="Click for more information" /></a>
    </div><!-- end recent-work -->

    <div class="divider">
        <img src="img/divider.png" alt="Section divider" />
    </div><!-- end divider -->

    <div id="recent-blog">
        <p><span>Recent Blog</span></p>
            <a href="#"><img src="http://lorempixel.com/120/120/" alt="Click for more information" /></a>
            <a href="#"><img src="http://lorempixel.com/120/120/" alt="Click for more information" /></a>
            <a href="#"><img src="http://lorempixel.com/120/120/" alt="Click for more information" /></a>
       </div><!-- end recent-blog -->
</div><!-- end recent --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:35:04.253

看来你没有为你的分隔线设置浮动。添加：

```
#recent .divider {
display: block; 
float: left;
}

#recent #recent-work {
display: block;
float: left;
} 
```

您应该为所有 div 添加 display: block 属性，以防万一。

[此处](http://jsfiddle.net/Rorok_89/pSwzw/)的示例（滑动左侧部分，使视口变得足够大）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:42:44.903

我建议先[谷歌搜索](http://www.google.com/search?channel=fs&q=html%203%20column%20float&ie=utf-8&oe=utf-8&gl=uk)。看起来任何最佳结果都可以根据您的需要进行调整。

当然，最简单和最强大的方法是使用一个 TABLE，它非常容易正确并且在过去十年的所有平台上都能正常工作。对于需要极端设置（例如非常大的缩放级别）的人来说，它也会正确降级。它也不需要任何花哨的 CSS、HTML5 或覆盖来修复损坏的 IE 版本。

[我基于表格的 Rorok_89 答案版本](http://jsfiddle.net/TotallyInformation/pSwzw/2/)。事实上，也许不是我说的“最简单的”。CSS 更简单，但 HTML 中有更多字符。我会注意到 CSS 可以比示例更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:33:24.920

我可以建议一种不同的方法吗？

表格的使用在这里非常方便，因此使用`<tr>`and`<td>`标签可以轻松对齐元素。

但如果您不喜欢使用表格，您可以随时使用 position: absolute 和 position 以及边距和填充。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:35:52.523

也尝试使用`float: left;`#recent-blog。和：

```
#recent .divider {
    float: left;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T15:39:52.073

试试这个到最近的 div

```
white-space:nowrap; 
```

# xpages - xpage 上的事件和多个自定义控件的问题

> ID：11086035
> 
> 赞同：1
> 
> 时间：2012-06-18T15:29:54.487
> 
> 标签：xpages

我在同一个 xpage 上遇到了多个自定义控件的问题，并且想知道是否有其他人看到同样的问题。

这是创建问题的方法。

1.  使用编辑框创建自定义控件。在编辑框的 onChange 事件中，只需获取它的值并将其存储在变量中即可。仅此而已。

2.  创建一个 xPage 并在 xpage 上放置一个按钮。使用 SSJS 使按钮执行某些操作，这样您就知道它被按下了，就像在表单上设置字段的值一样。

3.  将您创建的自定义控件多次放置在表单上。

4.  显示 xpage 并更改 xpage 上的输入框之一的值。

发生在我身上的是该按钮每隔一段时间才起作用。如果自定义控件仅在 xpage 上放置一次，则该按钮每次都有效。如果编辑框中的 onChange 事件被删除，那么按钮每次都会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:03:57.983

仅当您的 onchange 事件中有 SSJS 执行完全刷新并且您的按钮执行部分刷新时，才会发生这种情况。如果您让 onchange 事件部分刷新，它应该可以工作。此外，看起来当您离开文本框时会触发 onchange 事件，因此当您更改它时，不要离开并按下按钮，它不再像您所说的那样工作。但它做到了！它只是触发了文本框的完全刷新 onchange 事件，因此从按钮“跳过”了事件（由于完全刷新，按钮 onclick 事件将以某种方式获得一个新的 id）。

# asp.net - 如何获取在gridview asp.net中动态创建的文本框的值

> ID：11086036
> 
> 赞同：0
> 
> 时间：2012-06-18T15:29:54.390
> 
> 标签：asp.net, gridview, textbox

我想通过单击外部按钮来计算具有 textbox.text !=null 的行但是当我尝试 row.findcontrol 它的 null 这是我的代码

```
 <asp:GridView ID="GridViewCellNo" runat="server" AutoGenerateColumns="False" BorderStyle="None"
GridLines="None" OnRowDataBound="GridViewAddCellNumber_RowDataBound" ShowFooter="True"
ShowHeader="false">
<Columns>
<asp:TemplateField ItemStyle-Width="200px">
<ItemTemplate>
<asp:Label ID="LabelGVCellRowNo" runat="server" Text='<%#Eval("CellRowNumber")%>'
Visible="false"></asp:Label>
<asp:TextBox ID="TextBoxCellNo" runat="server" Text='<%#Eval("CellNumber")%>' Width="350px"></asp:TextBox>
                                                        <asp:RegularExpressionValidator ID="REVCellNumber" runat="server" ControlToValidate="TextBoxCellNo"
                                                            CssClass="ErroreMessage" Display="None" ErrorMessage="&lt;b&gt;Required Field Missing&lt;/b&gt;&lt;br /&gt;Please enter the phone number(digits only)."
                                                            SetFocusOnError="True" ValidationExpression="^[0-9]*$"></asp:RegularExpressionValidator>
                                                        <asp:ValidatorCalloutExtender ID="VCOE_REVPhoneNumber" runat="Server" HighlightCssClass="validatorCalloutHighlight"
TargetControlID="REVCellNumber">
</asp:ValidatorCalloutExtender>
 </ItemTemplate>
 <FooterTemplate>
 <asp:TextBox ID="TextBoxAddCellNum" runat="server" Width="350px"></asp:TextBox>                                                   
<asp:RegularExpressionValidator ID="REVCellNumber" runat="server" ControlToValidate="TextBoxAddCellNum"                                                     CssClass="ErroreMessage" Display="None" ErrorMessage="&lt;b&gt;Required Field Missing&lt;/b&gt;&lt;br /&gt;Please enter the phone number(digits only)."
SetFocusOnError="True" ValidationExpression="^[0-9]*$"></asp:RegularExpressionValidator>
<asp:ValidatorCalloutExtender ID="VCOE_REVPhoneNumber" runat="Server" HighlightCssClass="validatorCalloutHighlight"
TargetControlID="REVCellNumber">
</asp:ValidatorCalloutExtender>
</FooterTemplate>
 </asp:TemplateField>
 <asp:TemplateField FooterStyle-HorizontalAlign="left" ItemStyle-HorizontalAlign="left"
 ItemStyle-Width="200px" ShowHeader="False">                                        
 <FooterTemplate>
  <table>
  <tr>
 <td width="20px">
  </td>
<td>
 <asp:Button ID="addAttributeGridViewCellNoButtonAdd" runat="server" CausesValidation="true" Text="+" OnClick="GridViewAddCellNumberButtonAdd_Click" ToolTip="Add" ValidationGroup="AddCellNo" Width="30px" OnClientClick="showProgress()"  />
 </td>
  <td>
 Add another number
  </td>
  </tr>
  </table>
 </FooterTemplate>
  </asp:TemplateField>
  </Columns>
  </asp:GridView> 
```

当我在下面的按钮单击事件上运行此函数时，它会给出 txtCellno =null

```
private int GridViewCellNoCount()
    {
        int cellCount = 0;
        foreach (GridViewRow row in GridViewCellNo.Rows)
        {
            TextBox txtCellno = row.FindControl("TextBoxAddCellNum") as TextBox;

            //if (((TextBox)row.FindControl("TextBoxAddCellNum")).Text.Length > 0)
            if (txtCellno.Text.Length > 0)
            {
                cellCount++;
            }

        }
        return cellCount; 
```

# facebook - 如何避免关于游戏的自动 Facebook 帖子？

> ID：11086040
> 
> 赞同：0
> 
> 时间：2012-06-18T15:30:09.293
> 
> 标签：facebook, post

我制作了一个高分的 facebook 游戏，一切都很好。

但是facebook会自动发布类似的帖子

*“约翰玩过picman，得分5100”*

问：有没有可能避免这个帖子？我不想让 fb 发布这个，因为在游戏中存储的不是积分而是时间。

谢谢，梅纳尔！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:45:16.547

我在入门 › Facebook.com 上的应用程序上找到了如何避免这些自动帖子（=故事）的答案

*“与约会、体重管理或怀孕等更多个人行为相关的应用程序开发人员可以通过禁用‘Canvas’部分下‘On Facebook’选项卡中的应用程序仪表板中的社交发现字段来关闭这些故事。”*

# c# - 在 RichTextBox 中附加文本和图像

> ID：11086041
> 
> 赞同：3
> 
> 时间：2012-06-18T15:30:28.277
> 
> 标签：c#, richtextbox

对于附加文本

```
private void AddText(string text)
{
    string[] str = text.Split(new string[] { ";" },
        StringSplitOptions.RemoveEmptyEntries);

    if (str.Length == 2)
    {
        richTextBox1.DeselectAll();
        richTextBox1.SelectionFont = new Font(richTextBox1.SelectionFont, FontStyle.Bold);
        richTextBox1.AppendText(Environment.NewLine + str[0] + ";");
        richTextBox1.SelectionFont = new Font(richTextBox1.SelectionFont, FontStyle.Regular);
        richTextBox1.AppendText(str[1]);
    }
} 
```

对于附加图像

```
Image image = Image.FromFile("Logo.jpg");

// Put the image on the clipboard
Clipboard.SetImage(image);

//// Paste it into the rich tetx box.
richTextBox1.Paste(); 
```

我不知道如何才能创建这样的图像 RichTextBox？ ![在此处输入图像描述](../Images/2dcb359c99c4548c22fee9486a6c5b03.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T16:12:11.703

您可以创建一个 2 行 x 3 列的表格并将元素添加到相应的单元格中。如果您不希望其边框出现，请使用`\brdrcf1`颜色表中的白色标签。有关 rtf 表的更多信息： [在 RTF 中使用表](https://stackoverflow.com/questions/8349827/using-tables-in-rtf/13321729#13321729)

# c# - 在 C# 中更改目录的组合框

> ID：11086042
> 
> 赞同：0
> 
> 时间：2012-06-18T15:30:37.970
> 
> 标签：c#, combobox

我正在编写一些 c# 代码，首先让用户单击目录按钮并选择一个文件夹。如何加载包含该文件夹内容的组合框（它将是文本文件）？由于目录可以根据选择的文件夹而改变，我不知道该怎么做。

来自评论：

```
foreach (String file in System.IO.Directory.GetFiles(?????)) {
  comboBox1.Items.Add(new System.IO.FileInfo(file).Name);
} 
```

不知道用什么代替？？？让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:40:17.043

您可以尝试以下简单的方法：

```
private void button1_Click(object sender, EventArgs e) {
  using (FolderBrowserDialog fbd = new FolderBrowserDialog()) {
    if (fbd.ShowDialog() == DialogResult.OK) {
      UpdateComboBox(fbd.SelectedPath);
    }
  }
}

private void UpdateComboBox(string folderPath) {
  comboBox1.Items.Clear();
  foreach (string fileName in Directory.GetFiles(folderPath)) {
    comboBox1.Items.Add(Path.GetFileName(fileName));
  }
} 
```

假设 WinForms。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:41:18.590

首先你需要得到目录选择的结果。

然后你会使用 GetFiles：

```
 var files = Directory.GetFiles(path, "*.txt") 
```

这将返回一个文本文件数组。

然后你可以循环遍历：

```
foreach(var file in files)
{
   combobox.Item.Add(file);
} 
```

# javascript - 如何使用 javascript 或 html 将数据传递给单独的程序

> ID：11086045
> 
> 赞同：1
> 
> 时间：2012-06-18T15:30:53.453
> 
> 标签：javascript, html

我正在尝试编写一个程序，提示您输入某人的姓名。然后它将采用该名称并将其发送到另一个程序，在该程序中它将将该名称添加到其数据库中。这是代码：

```
<!DOCTYPE html>
<html>
<body>

<form name="customerForm" action="" method="get">
First Name: <input type="text" name="firstname" /><br />
Last Name: <input type="text" name="lastname" /><br />
<input type="button" name="button" value="Add Customer" onClick="addCustomer(this.form)">
</form>

<script type="text/javascript">
function addCustomer(form)
{
    var x = form.firstname.value;
    var y = form.lastname.value;
    var name = x+" "+y;
    alert(name);
}
</script>
</body>
</html> 
```

目前，我有 javascript 函数可以将名称放入警报框以查看它是否有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:32:42.820

[使用 jQuery、php、mysql 通过 Ajax 保存到数据库](http://www.myphpetc.com/2010/01/save-to-database-via-ajax-using-jquery.html)

因此，您可以在 jQuery 上使用 Ajax 将表单结果发送到 PHP 页面，然后您必须编写 PHP 来处理转换该数据并将其发送到您的数据库。

使用 jQuery Ajax 发送的示例，来自[类似问题](https://stackoverflow.com/questions/7696540/how-to-update-database-with-jquery-without-refreshing-the-page)

```
//ajax server call
$.ajax({
  url: '/useradminpage?main_id=%s&display=false',
  success: function(data) {
  //do some stuff.
  alert('returned');
 }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:35:12.820

`action`在属性中指定程序的 URI并更改`type="button"`为`type="submit"`.

读取数据的细节将取决于您编写程序的语言以及它与网络服务器的交互方式。

# jquery - jQuery onkeyup 方法未定义

> ID：11086048
> 
> 赞同：9
> 
> 时间：2012-06-18T15:31:06.970
> 
> 标签：jquery, key-events

据说 onkeyup 方法没有定义，但是，该方法是我的 ide 自动推荐给我的。当我在 chrome 开发工具中查看错误时，我收到错误 Uncaught TypeError: Object [object Object] has no method 'onkeyup'。我正在使用最新版本的 jQuery。这是我的代码：

```
 <!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $("button").click(function(){
                var str = document.getElementById('txt1').value;
                $.post("addName.php", {q: str});
            });
            $("input").onkeyup(function(){
                var str = document.getElementById('txt1').value;
                $.post("gethint.php", {q: str});
            });
        });
    </script>
</head>
<body>

<h3>Start typing a name in the input field below:</h3>
<form action="">
    First name: <input type="text" id="txt1"/>
</form>
<p>Suggestions: <span id="txtHint"></span></p>
<button> Add Name</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-18T15:31:32.690

```
$("input").on('keyup', function(){
    var str = document.getElementById('txt1').value;
    $.post("gethint.php", {q: str});
}); 
```

或者

```
$("input").keyup( function(){
    var str = document.getElementById('txt1').value;
    $.post("gethint.php", {q: str});
}); 
```

jQuery 没有方法名`onkeyup`

阅读更多关于**[`.keyup()`](http://api.jquery.com/keyup/)**和**[`.on()`](http://api.jquery.com/on)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:32:02.777

方法是：

```
$("input").keyup(function() {
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:33:15.643

而不是 onkeyup 使用 keyup

```
 $("input").keyup(function(){
                var str = document.getElementById('txt1').value;
                $.post("gethint.php", {q: str});
            }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:33:30.137

该方法`onkeyup`不存在，错误消息清楚地表明`"onkeyup method not defined"`。它应该只是[keyup](http://api.jquery.com/keyup/)。

```
$("input").keyup(function() {
    //Your code
}); 
```

# android - 如果项目中的活动没有在 Android Manifest .xml 中引用，它们是否会被编译到 .apk 中？

> ID：11086049
> 
> 赞同：0
> 
> 时间：2012-06-18T15:31:11.557
> 
> 标签：android, eclipse, reverse-engineering, android-activity, apk

我有一个只有开发人员才能看到的活动，我不希望最终用户通过逆向工程找到它。在我的本地项目中，我已经定义了它。但是在部署时，我根本不希望这个活动可用。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:41:48.667

是的，活动仍将在 APK 中......但系统永远不会看到它，因此永远无法启动。

如果您真的关心防止用户对您的 APK 进行逆向工程，那么简单的解决方案就是将活动从您的项目中全部取出。理想情况下，无论如何您都希望可下载的 APK 尽可能小。如果您想保留活动以用于部署目的，那么您始终可以克隆当前项目并将其作为备份保存在本地计算机上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:54:43.567

看看这里：http: [//developer.android.com/guide/developing/tools/proguard.html](http://developer.android.com/guide/developing/tools/proguard.html)

使用此工具，您可以混淆代码并配置应在 apk 中打包哪些类。

# c++ - 在没有指针的情况下获得额外的内存

> ID：11086052
> 
> 赞同：1
> 
> 时间：2012-06-18T15:31:15.257
> 
> 标签：c++, arrays, pointers

在 C++ 中，是否可以在程序运行时创建一个新数组？具体来说，假设我在一个类中有一个数据成员，变量的名称是数组，它是一个大小为 10 的数组。假设在运行时我想要一个更大的数组，我可以在不使用指针的情况下做到这一点吗？我可以有如下方法吗？

```
int[] expandCapacity(int currentCapacity) {
     int [] arr = new int[currentCapacity*2];
     currentCapacity*=2;
     return arr;
} 
```

为什么我不能使用这种方法来扩展当前数组的容量：

```
currentCapacity = 10;
array = expandCapacity (currentCapacity); 
```

如果这可行，则无需使用指针。我觉得我在这里遗漏了一些重要的东西。如果您能指出我所缺少的，我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T15:33:36.500

不，这是完全不可能的。

但是，自己这样做是纯粹的精神错乱。使用`std::vector<int>`并让您的编译器实现者为您完成所有工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T15:33:54.253

例如，您应该使用像[矢量](http://www.cplusplus.com/reference/stl/vector/)这样的 STL 容器。

> 如果这可行，则无需使用指针。我觉得我在这里遗漏了一些重要的东西。如果您能指出我所缺少的，我将不胜感激。

指针的用处远不止于此。我建议找到一个好的 c++ 教程（查看 c++ [FAQ](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)以获取更多信息）。

# c# - 尝试匹配一个简单的电话号码 C# Regex

> ID：11086053
> 
> 赞同：0
> 
> 时间：2012-06-18T15:31:17.577
> 
> 标签：c#, .net

```
Match match = Regex.Match("555-5555555", "^(\\d{3}\\-?\\d{3}\\-?\\d{4})$", RegexOptions.None);
it["Should match"] = () => match.Success.should_be_true(); 
```

我相信以上应该匹配。我需要数字，但将连字符保留为可选。但是，上面返回 false 并且测试失败。

**编辑**

接受的答案是 Darin 是对的，我的测试范围有问题。这是我通过的更新代码：

```
Match match;
    void describe_example()
    {

        context["goodregex"] = () =>
        {
            before = () => match = Regex.Match("555-5555555", "^(\\d{3}\\-?\\d{3}\\-?\\d{4})$", RegexOptions.None);
            it["Should match"] = () => match.Success.should_be_true();
        };

        context["badregex"] = () =>
        {
            before = () => match = Regex.Match("555-5525-5555", "^(\\d{3}\\-?\\d{3}\\-?\\d{4})$", RegexOptions.None);
            it["Should not match"] = () => match.Success.should_be_false();
        };

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:33:55.643

您的 RegEx 在我的机器上正常工作。对于验证不同类型电话号码的正则表达式，请查看此处（您可以与您的需求进行比较并选择最合适的一个）：

[http://www.regexlib.com/Search.aspx?k=phone&AspxAutoDetectCookieSupport=1](http://www.regexlib.com/Search.aspx?k=phone&AspxAutoDetectCookieSupport=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:35:59.357

以下程序打印为真：

```
class Program
{
    static void Main()
    {
        var match = Regex.Match("555-5555555", "^(\\d{3}\\-?\\d{3}\\-?\\d{4})$", RegexOptions.None);
        Console.WriteLine(match.Success);
    }
} 
```

我猜您在单元测试中遇到了一些范围界定问题，在`match`同时运行测试时变量正在被修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:34:36.377

正则表达式对我来说看起来不错。事实上`match.Success`，在我的机器上也是如此。我可能会将正则表达式重写为：

```
"^(\\d{3}\\-?){2}\\d{4}$" 
```

然而，这只是一个偏好问题。

# php - array_shift 导致我丢失存储在 $_SESSION 中的数组中的元素

> ID：11086059
> 
> 赞同：1
> 
> 时间：2012-06-18T15:31:28.657
> 
> 标签：php, arrays, session, smarty, pear

**更新**- 我没有发现问题。我假设删除评论的人是对的，并且 Asset.php 或 array_shift() 被调用了两次。我确实发现了另一个处理表单对象的文件中的最佳位置，并允许我按照我的意图操作数组而不删除额外的元素。留下这个，以防有人想浏览它。

* * *

我有一个由 Controller.php 运行的网站，它根据通过开关运行的 GET 值显示不同的页面。相关案例为：

```
case 'pgImportAsset': {
  require_once FORMS_DIR.'/Asset.php';

  $form = new ImportAssetForm(&$smarty, &$req);

  if(!empty($_SESSION['list'])){
    $form->processTo(&$smarty, array('pg'=>   'pgImportAsset'));
  } else {
    $form->processTo(&$smarty, array('pg'=> 'pgListClip'));
  }
  break;
} 
```

$_SESSION['list'] 变量是一个数组，用于存储来自上传这些文件的 java 小程序的文件名字符串。数组被完美地初始化为类似

```
Array
(
  [0] => 0.jpg
  [1] => 1.jpg
  [2] => 2.jpg
  [3] => 3.jpg
  [4] => 4.jpg
) 
```

等等。这就是它变得奇怪的地方。数组递减的一行在 Asset.php 中

```
$this->filename=array_shift($_SESSION['list']); 
```

该数组将进入该页面的实例，我将在该行之前和之后有一个 print_r 语句。即使数组包含***所有 5 个***元素，两个打印语句也会显示。

```
Array
(
  [0] => 1.jpg
  [1] => 2.jpg
  [2] => 3.jpg
  [3] => 4.jpg
)
Array
(
  [0] => 2.jpg
  [1] => 3.jpg
  [2] => 4.jpg
) 
```

它变得更奇怪了。在 Asset.php 中的那一行之后不久，我有了这一行（我正在使用 smarty）。

```
$smarty->assign('filename',$this->filename); 
```

这显示为第一个元素，在本例中为 0.jpg。然后将值 $this->filename 发送到数据库，而无需任何代码行对其进行更改。最终存储在数据库中的是 1.jpg。

我完全迷茫和困惑。请帮忙。

有关它的更多信息，Asset.php 使用了一个名为 ImportAssetForm 的对象，该对象扩展了 PEAR 中的 QuickForm 库以及其他一些库，包括 DB 和其他一些库。

这最初不是我的代码，我只是负责更改它。PEAR 库可能有点过时了，但我不具备 PEAR 的知识，无法进入并彻底改造该站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:00:17.630

多年来，我在使用 session 时遇到了类似的问题；)

试试这个人在这里说什么：[PHP Session data not being saved](https://stackoverflow.com/questions/155920/php-session-data-not-being-saved/6777970#6777970)

> 我不知道这在内部意味着什么，我只是向自己解释说会话变量更改不够快:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T16:44:53.590

我遇到的问题是由于我的代码中的错误检查而重新加载脚本。因为我不想破坏它，所以我将数组的处理移到另一个没有执行两次的位置。

# css - IE9 中的首字下沉 CSS 样式

> ID：11086060
> 
> 赞同：1
> 
> 时间：2012-06-18T15:31:30.317
> 
> 标签：css, internet-explorer-9

我正在使用纯 CSS 来设置首字下沉样式。我的问题是 IE9 - 它似乎没有注意到在我测试过的所有其他浏览器（包括 IE 8 和 IE 10）中设置垂直位置的 line-height 值。我找不到调整下沉的垂直位置在 IE 9 中 - 你能帮我吗？

请参阅我的网站： http: [//graphicviolence.co.uk](http://graphicviolence.co.uk)，我的首字下沉的 CSS 是：

```
.art-postcontent > p:first-of-type:first-letter 
{
letter-spacing:0;
text-transform:uppercase;
color:#250607;
font-size:50px;
font-weight:normal;
float:left;
margin:5px 5px -7px 0; /* THESE VALUES SET TXT WRAP AROUND DROP CAP */
line-height:1; /* THIS SETS BASELINE POSITION OF DROP CAP */
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:53:48.990

由于 IE9 以不同的方式呈现相对字体大小，您可以通过使用[font relative lengths](http://www.w3.org/TR/css3-values/#font-relative-lengths)参考文档根字形大小来解决此问题。

在值上使用`rem`单位`line-height`，并将其与为文档根 ( `html`) 设置的字体大小相关联。

# iphone - 使用 ARC 时如何释放内存？

> ID：11086063
> 
> 赞同：0
> 
> 时间：2012-06-18T15:31:38.747
> 
> 标签：iphone, automatic-ref-counting

我正在阅读有关 ARC 的文档，遇到了一个让我感到困惑的部分。请任何人都可以帮助我。我有两个问题： 1.当没有变量指向它时，我知道 ARC 释放对象。现在假设我有一些方法说：(NSString *)returnString，其返回类型是 NSSTring；那么声明的变量会发生什么在方法returnString中？我知道接收变量会在它超出调用returnString的方法范围时被释放，但是returnString内部的变量会发生什么。

```
-(NSSTring *)returnString
{
   NSString *str = //Some value;

   return str;//What will happen to this.
} 
```

和其他方法：

```
-(void)useString
{
   NSString *str1 = [self returnString];  //It will get release when this method gets over.
} 
```

2.如果returnString在一些第三方库中没有ARC编译会怎样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:38:59.953

ARC 只是在编译时插入`[... retain]`和方法调用。`[... release]`在您的情况下，它看到“str”是一个局部变量，并在您的声明之后添加一个自动释放方法调用。所以真的，内存以同样的方式被释放，但你不必担心，ARC会为你做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:42:20.490

对于您的第一个问题，ARC 将负责为您保留和释放。每当您仍在维护对变量的引用时，ARC 都应该保留它。在您的具体示例中，字符串可能会作为自动释放的对象返回，但实际的实现对您是隐藏的。

对于第二个问题，您可以将库标记为不使用 ARC 以保持手动保留/释放。为此，请参阅以下问题：[ios5 ARC what is the compiler flag to exclude a file from ARC?](https://stackoverflow.com/questions/8040629/ios5-arc-what-is-the-compiler-flag-to-exclude-a-file-from-arc)

# sql - 在 SQL WHERE 子句中使用多个条件

> ID：11086064
> 
> 赞同：1
> 
> 时间：2012-06-18T15:31:40.163
> 
> 标签：sql, where-clause

我一直在网上搜索，甚至在有关此问题的 Stackoverflow 问题中搜索，但无法收到任何相关回复。我在下面显示的 SQL 查询，

```
SELECT Scania.GensetType
    , Scania.EngineType
    , Scania.Engine60Hz
    , Scania.Alternator
    , Scania.PriceEur 
FROM Scania 
LEFT JOIN NordhavnGenset 
    ON Scania.GensetType=NordhavnGenset.Alternator 
WHERE (NordhavnGenset.MaxKva='46') 
    and (Generator.Alternator='ECP34-1LN/4') 
    and (insulation.Insulation='F (90ºC/45ºC)') 
    and (Klasse.Klasse='KRS\r') 
    and (airinletfilter.AirInletFilter='No') 
    and (Ip.IP='IP23'); 
```

总是返回下面的错误信息，并且我已经检查了几次，该列存在于表中！

```
#1054 - Unknown column 'Generator.Alternator' in 'where clause' 
```

但是，如果我通过在第一个 Where 子句处停止来执行查询，则会显示结果，

```
SELECT Scania.GensetType
    , Scania.EngineType
    , Scania.Engine60Hz
    , Scania.Alternator
    , Scania.PriceEur 
FROM Scania 
LEFT JOIN NordhavnGenset 
    ON Scania.GensetType=NordhavnGenset.Alternator 
WHERE (NordhavnGenset.MaxKva='46'); 
```

新的查询

```
 SELECT  Scania.GensetType, Scania.EngineType, Scania.Engine60Hz, Scania.Alternator, Scania.PriceEur
FROM Scania  
LEFT JOIN NordhavnGenset
    ON Scania.GensetType=NordhavnGenset.Alternator 
LEFT JOIN Generator
    ON Scania.Alternator=Generator.Alternator
LEFT JOIN Insulation 
    ON NordhavnGenset.Insulation=Insulation.Insulation
LEFT JOIN Klasse
    ON NordhavnGenset.Class=Klasse.Class
LEFT JOIN AirInletFilter
    ON NordhavnGenset.AirInletFilter=AirInletFilter.AirInletFilter
LEFT JOIN IP
    ON NordhavnGenset.Ip=IP.IP
WHERE (NordhavnGenset.MaxKva='46') and (Generator.Alternator='ECP34-1LN/4') and (Insulation.Insulation='F (90ºC/45ºC)') and (Klasse.Klasse='KRS\r') and (AirInletFilter.AirInletFilter='No') and (IP.IP='IP23'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T15:35:54.067

您似乎没有加入名为 的表`Generator`。`WHERE`除非您在其上，否则您的子句中不能包含该表`JOIN`。

如果您添加一个`JOIN`to`Generator`那么您可以在`WHERE`子句中使用它。

```
SELECT *
FROM Scania 
LEFT JOIN NordhavnGenset 
    ON Scania.GensetType=NordhavnGenset.Alternator 
LEFT JOIN Generator 
    ON ....
WHERE (Generator.Alternator='ECP34-1LN/4') ... 
```

您的`WHERE`子句中还有其他未`JOINed`打开的表，因此您还需要添加这些表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:36:14.797

错误的原因是您没有加入您在`WHERE`子句中使用的表。

以下总是会出错 -

```
and (Generator.Alternator='ECP34-1LN/4') 
and (insulation.Insulation='F (90ºC/45ºC)') 
and (Klasse.Klasse='KRS\r') 
and (airinletfilter.AirInletFilter='No') 
and (Ip.IP='IP23'); 
```

您要么需要连接表，要么表的别名应该是“。”之前的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:36:30.307

您没有将`Generator`表包括在联接中。添加它，或者您可能的意思是`NordhavnGenset.Alternator`代替`Generator.Alternator`

# php - php：设置文本框值，模拟一个按钮点击并读取返回的数据

> ID：11086067
> 
> 赞同：0
> 
> 时间：2012-06-18T15:32:03.103
> 
> 标签：php

我正在尝试从 php 站点收集一些数据。然而，这个特定的 php 页面已经用它自己的函数（下面代码中的 setReport()）转换了 $POST 数据（到我无法复制的特殊时间戳数据）并发送到它的服务器。所以为了得到这个数据，在文本框中输入一个股票编号并按下按钮是我猜的唯一方法。

下面是我想从中获取数据的 php 站点源代码的片段。

## [http://www.gretai.org.tw/ch/stock/statistics/monthly/st42.php](http://www.gretai.org.tw/ch/stock/statistics/monthly/st42.php)

```
> <form name="search" method="post" action="st42.php"> <table
> width="736" border="0" cellpadding="0" cellspacing="0" summary="查詢">  
> .......    
>          <td class="search-in02">股票代碼：
> 
>           <input id="input_stock_code" name="input_stock_code"
> class="input01" size="6" maxlength="6">
> 
>             <A HREF="#" onclick="ChoiceStkCode(document.getElementById('input_stock_code'));"
> onkeypress="ChoiceStkCode(document.getElementById('input_stock_code'));"
> class="page_table-text_over">代碼查詢</A>                
> 
>             &nbsp;&nbsp;&nbsp;&nbsp;<input type="button" class="input01" value="查詢" onclick="query()" onkeypress="query()"/>       
> ........
> 
> </table>
> 
> </form>                   function query(){               
> 
>       var code = document.getElementsByName("input_stock_code")[0].value;
> 
>       var param = 'ajax=true&input_stock_code='+code;
> 
>       setReport('result_st42.php',param );        
> 
>   } 
```

* * *

我正在考虑使用以下步骤编写 PHP 代码来获取数据。但我不知道如何做第 2 步。有没有人可以帮助解决这个问题？或者还有其他方法可以做到吗？非常感谢！！！

1.  使用 curl_init 在站点中阅读。
2.  使用值设置文本框“input_stock_code”并模拟按钮单击。
3.  解析 curl_exec() 的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:22:12.047

我无法真正测试这一点，因为我无法阅读该网站 - 但不是获取页面，填写表格并获取结果，您可以直接通过以下方式获取结果页面

```
http://www.gretai.org.tw/ch/stock/statistics/monthly/result_st42.php?ajax=true&input_stock_code=<code> 
```

setReport() 所做的时间戳业务只是阻止浏览器加载缓存的结果，因此您可以忽略它而不会出现问题。

**编辑：**更正，您确实需要发布 ajax 和 input_stock_code 变量。您可以使用 CURL 在 PHP 中执行此操作：

```
// Build URL complete with timestamp
$url = 'http://www.gretai.org.tw/ch/stock/statistics/monthly/result_st42.php?timestamp='.time().'156';

// POST body variables
$fields = array(
            'ajax'=>urlencode('true'),
            'input_stock_code'=>urlencode('1158')
        );

//url-ify the data for the POST
$fields_string = http_build_query($fields);

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);

// Pretend we are a browser that is looking at the site
curl_setopt($ch,CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20120403211507 Firefox/12.0');
curl_setopt($ch,CURLOPT_REFERER, 'http://www.gretai.org.tw/ch/stock/statistics/monthly/st42.php');

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch);

echo $result; 
```

基于[此网站](http://davidwalsh.name/execute-http-post-php-curl)上的片段帖子。

# ruby-on-rails - 无法打开guard-jasmine.coffee，Jasmine runner 无响应

> ID：11086068
> 
> 赞同：1
> 
> 时间：2012-06-18T15:32:06.643
> 
> 标签：ruby-on-rails, jasmine, guard, phantomjs

当我尝试在我的警卫设置或独立的警卫茉莉命令中运行[警卫茉莉花时，我收到此错误](https://github.com/netzpirat/guard-jasmine)

```
Guard::Jasmine starts thin test server on port 8888 in test environment.
Waiting for Jasmine test runner at http://example.com:8888/
Run Jasmine suite spec/javascripts/credit_card_spec.js
Run Jasmine suite at http://example.com:8888/?spec=CreditCard
Can't open '/home/yuvilio/.rvm/gems/ruby-1.9.3-p194@agilerails/bundler/gems/guard-jasmine-0fd614d12263/lib/guard/jasmine/phantomjs/guard-jasmine.coffee'
ERROR: No response from the Jasmine runner! 
```

奇怪的是，“guard-jasmine.coffee”文件确实存在并且看起来很好。

我的 Gemfile 包括：

```
group :test, :development do
  #...
  gem 'guard-jasmine', :git => "https://github.com/netzpirat/guard-jasmine.git", :branch => 'master'
  gem 'jasminerice', :git => "https://github.com/bradphelan/jasminerice.git", :branch => 'master'
  gem 'jasmine'
end 
```

我的 Guardfile 包括：

```
guard 'jasmine', :all_on_start => false, :server => :thin, :port => 8888,  :jasmine_url => 'http://localhost:8888/', :server_env => :test do
  watch(%r{spec/javascripts/spec\.(js\.coffee|js|coffee)$})         { "spec/javascripts" }
  watch(%r{spec/javascripts/.+_spec\.(js\.coffee|js|coffee)$})
  watch(%r{app/assets/javascripts/(.+?)\.(js\.coffee|js|coffee)$})  { |m| "spec/javascripts/#{m[1]}_spec.#{m[2]}" }
end 
```

当我运行`rake jasmine`并浏览到该[http://example.com:8888/?spec=CreditCard](http://example.com:8888/?spec=CreditCard)测试时，它显示正常（测试当前按预期失败）。知道是什么导致了警卫

**后记：**

原来这是一个 phantomjs 问题。@netzpirat[在下面他的回答中的评论中](https://stackoverflow.com/questions/11086068/cant-open-guard-jasmine-coffee-no-response-from-the-jasmine-runner/11088081#comment14529251_11088081)正确地诊断了它。我使用的是 Ubuntu，其最新的 phantomjs 版本是 1.4。那里发生了“无法打开”错误（可能与[此错误](http://code.google.com/p/phantomjs/issues/detail?id=175)有关？）。为了解决这个问题，我找到了一个[具有 1.5 的 PPA](https://launchpad.net/~antono/+archive/phantomjs)并从那里安装它（它也可直接用于更多架构[这里](http://code.google.com/p/phantomjs/downloads/list)）。那解决了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:36:42.317

当您使用 Jasminerice 通过资产管道提供 Jasmine 规范时，`http://localhost:8888/jasmine`默认情况下 URL 是。由于这也是guard-jasmine 默认设置，您可以简单地跳过该选项（端口 8888 也是默认设置）：

```
guard 'jasmine', :all_on_start => false, :server => :thin, :server_env => :test do
  watch(%r{spec/javascripts/spec\.(js\.coffee|js|coffee)$})         { "spec/javascripts" }
  watch(%r{spec/javascripts/.+_spec\.(js\.coffee|js|coffee)$})
  watch(%r{app/assets/javascripts/(.+?)\.(js\.coffee|js|coffee)$})  { |m| "spec/javascripts/#{m[1]}_spec.#{m[2]}" }
end 
```

我选择`development`默认值的原因`:server_env`是，您将看到发生错误的真实文件名。我建议将其设置`development`为本地开发和`test`CI 服务器上。

# netbeans - Netbeans 7.1 / Tomcat 问题

> ID：11086071
> 
> 赞同：2
> 
> 时间：2012-06-18T15:32:17.767
> 
> 标签：netbeans, netbeans-7

我有两台机器：

*   Windows 7 - 运行 Netbeans 7.1
*   Windows Server 2003 - 运行 Tomcat 7.0.27

如果我从 2003 服务器上的 bin/startup 启动 tomcat，一切正常。即，我可以在任一机器上的浏览器中点击 tomcat 管理控制台，我可以部署 web 服务，从我的 Windows 7 机器上的客户端点击那些已部署的 web 服务等。

但是，如果我尝试将这个 tomcat 集成到 netbeans 中，事情就会变糟。

1.  *我使用添加服务器*向导将 tomcat 实例添加到我的 netbeans 配置中。

2.  右键单击我刚刚在服务/服务器中的 NB 中创建的 Apache Tomcat，选择*Start*。

3.  服务器似乎已启动，并且从 tomcat 日志的内容来看，一切似乎都很好，在日志底部您可以看到标准`INFO: Server startup in 41785 ms`.

tomcat 实例未运行，我无法从任一框中点击 tomcat 管理 URL。

我可以在 2003 框的任务管理器中看到，当我尝试从 netbeans 启动 tomcat 实例时，没有启动 java.exe。

知道我应该在哪里看吗？我想这一定是一个 netbeans 问题，因为如果我从 tomcat 启动脚本开始，一切正常。

谷歌搜索，没有什么我错过的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:04:29.997

在 Netbeans 中，您可以注册一个外部服务器，即与捆绑服务器不同的服务器。但是这个服务器必须和 Netbeans 在同一台机器上，AFAIK 你不能在 NB 中使用“远程”服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T06:25:38.173

您误解了“开发 Web 应用程序（Asp，Java）”的主要概念，并从“开发 Web 脚本（PHP）”的角度考虑它们。

PHP 不是一个设计的应用程序，它是一个脚本。因此，它本机支持为任意数量的开发人员使用一台服务器。

但是在 Web 应用程序的世界里——你不用在协作的服务器上进行“编码”，甚至是机器上。您自己在您的环境中编写代码，然后将它们部署到生产环境（或质量检查，然后部署到生产环境，取决于...）。很抱歉，但它的设计目的不是为了以您尝试使用它的方式使用...

# java - 在哪里检查日志为什么 VM 不为带有自定义 jar 的 jconsole 运行？

> ID：11086072
> 
> 赞同：0
> 
> 时间：2012-06-18T15:32:21.083
> 
> 标签：java, logging, jar, jconsole

我尝试使用包含我的类的 jar 运行 jconsole，例如：

```
cd "C:\Program Files\Java\jdk1.6.0_26\bin"
set console="C:\Program Files\Java\jdk1.6.0_26\lib\jconsole.jar"
set tools="C:\Program Files\Java\jdk1.6.0_26\lib\tools.jar"
set customjar="C:\custom.jar"
jconsole -J-Djava.class.path=%console%:%tools%:%customjar% 
```

但是什么也没发生 - jconsole 没有启动！在哪里检查发生了什么错误？顺便说一句，简单的 jconsole - startds，所有路径都经过检查并正确。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:48:14.170

我记得你应该使用';' 在 Windows 下的类路径中，而不是 ':' （Unix 风格）

# gnome - 删除 Gnome 中的标题栏

> ID：11086074
> 
> 赞同：5
> 
> 时间：2012-06-18T15:32:21.993
> 
> 标签：gnome, titlebar, window-managers, x11, ewmh

我在 Gnome 中有一个窗口，我想删除它的标题栏。这在 FVWM2 中很简单：我只是将窗口样式设置为包含`NoTitle`. 在 Gnome 中似乎没有类似的选项。

我最近学会了使用`wmctrl`来修改符合 EWMH 的窗口选项，但它也没有删除标题栏的方法（我可以看到）。

但是，必须有*一些*方法可以做到这一点，因为像 Audacious 这样的应用程序可以告诉 Gnome 不要显示窗口装饰。

谷歌搜索，我发现一些页面讨论了删除标题栏的问题`wmctrl`，但在每种情况下，解决方案都只是针对`fullscreen`窗口，这样标题栏就完全从屏幕上移开了。（这不是我要找的！）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:23:44.563

我突然想到尝试用谷歌搜索`hide 'window decorations'`代替`titlebar`，我相信我找到了更多选择。

具体来说，该`Window Decoration`部分`CompizConfig Settings Manager`允许指定显示装饰的规则，其中包括标题栏。

我仍然认为没有办法使用普通的 Gnome 来执行这个修改（而且我没有`wmctrl`进一步研究），但是因为我首先使用 Gnome 的唯一原因是 Compiz 的简单集成，所以这个解决方案有效为了我。

# mysql - 为什么 Perl 的“while 循环”只对 MySQL 表进行一次写入？

> ID：11086075
> 
> 赞同：-1
> 
> 时间：2012-06-18T15:32:27.890
> 
> 标签：mysql, perl

当循环应该做超过 500 个时，它只对表进行一次插入。我做了很多显示来证明@book_ids 中有超过 500 个条目。但只有第一个条目被插入到表中。

**相关脚本代码：**

```
#!/usr/bin/perl
# Script to List Books Database.
# 
use CGI qw/:standard/;
use CGI::Carp qw(fatalsToBrowser);
use DBI;
use strict;
use warnings;
use Text::Autoformat;
require 'appl.lib';
# verify access coming from proper source
my ($source) = &verify_visitor();

###### Establish connection to BookDB package
use BookDB;
my ($bookdb) = new BookDB();
my ($success);
######

#####################################################################
###### connect to the database
my ($dsn) = "DBI:mysql:webstone:localhost"; # data source name
my ($user) = "xxxxxxxxx";                    # db user name
my ($password) = "xxxxxxxx";                  # db password
my ($DBI) = "";
my (%attr) =                                # error handling attributes
(
       PrintError => 0,
       RaiseError => 0
);
my ($SQL, $str);                            # various handles
my ($db_user, $db_pw);                      # db returned user_id and pass_word
my ($login);                                # login verification switch
my ($dbh) = DBI->connect($dsn, $user, $password, \%attr)
       || &bail_out ("Cannot connect to the database");
if(param())
{
   #do this for security reasons. It prevents bookmarking URL's with
   #passwords and the like encoded in them, and prevents some security hazards.
  die "Not a POST request!\n" unless ((request_method() eq "POST") || ($source eq "books"));
}
#####################################################################

my ($book_count, $c_count, $w_count, $s_count, @book_ids, $book_ids, @book, $book, @all_book_data, $all_book_data, $rec, $pass_book_id);
my (@rawdata, $rawdata, @un_x, $un_x, @sorted, $sorted);

### hold Master Book table data in temp table
my ($m_id, $m_book_id, $m_isbn, $m_copyright_year, $m_status, $m_title, $m_alt_title, $m_notes);
my ($m_author_id, $m_author1_name, $m_author2_name, $m_author_book_id);
my ($m_series_id, $m_series_name, $m_series_num, $m_series_book_id);
my ($m_order_id, $m_order_date, $m_due_date, $m_order_book_id);
### hold Book table data when read
my ($h_book_id, $h_isbn, $h_copyright_year, $h_status, $h_title, $h_alt_title, $h_notes);
### hold Author table data when read
my ($h_author_id, $h_last_name, $h_first_name, $h_middle_name, $h_author_book_id);
my ($h_alt_author_id, $h_alt_last_name, $h_alt_first_name, $h_alt_middle_name, $h_alt_author_book_id);
### hold Series table data when read
my ($h_series_id, $h_series_name, $h_series_num, $h_series_book_id);
### hold Order table when read
my ($h_order_id, $h_order_date, $h_due_date, $h_order_book_id);

my ($msg, $content, $page);
my $html_header = "Content-Type: text/html; charset=ISO-8859-1\n\n";
my ($disp_date, $date_store) = &get_today_date();

my ($sent_user) = param("username");
my ($sent_passwd) = param("passwd");
my ($action) = param("function");
my ($direct) = param("direction");
my ($choice) = param("menu_choice");

my ($p_username) = "p_username";
my ($pass_username) = param("p_username");

### Mainline
if ($action eq "list")
{
        ($success, $c_count) = $bookdb->create_temp_tbl($dbh);
        ($success, $book_count, @book_ids) = $bookdb->get_book_ids($dbh);
        my ($c);
        foreach $pass_book_id (@book_ids)
    {
                ($success, $h_book_id, $h_isbn, $h_copyright_year, $h_status, $h_title, $h_alt_title, $h_notes) = $bookdb->get_book_data($dbh, $pass_book_id);
                $m_id = $c;
                $m_book_id = $h_book_id;
                $m_isbn = $h_isbn;
                $m_copyright_year = $h_copyright_year;
                $m_status = $h_status;
                $m_title = $h_title;
                $m_alt_title = $h_alt_title;
                $m_notes = $h_notes;
                ($success, $h_author_id, $h_last_name, $h_first_name, $h_middle_name, $h_author_book_id) = $bookdb->get_author1_data($dbh, $pass_book_id);
                $m_author_id = $h_author_id;
                $m_author_book_id = $h_author_book_id;
                $m_author1_name = $h_last_name . ", " . $h_first_name . " " . $h_middle_name;
                ($success, $h_alt_author_id, $h_alt_last_name, $h_alt_first_name, $h_alt_middle_name, $h_alt_author_book_id) = $bookdb->get_author2_data($dbh, $pass_book_id, $h_author_id);
                if ($h_alt_author_id)
                {
                        $m_author2_name = $h_alt_last_name . ", " . $h_alt_first_name . " " . $h_alt_middle_name;
                }
                else
                {
                        $m_author2_name = "";
                }
                ($success, $h_series_id, $h_series_name, $h_series_num, $h_series_book_id) = $bookdb->get_series_data($dbh, $pass_book_id);
                if ($h_series_id)
                {
                        $m_series_id = $h_series_id;
                        $m_series_book_id = $h_series_book_id;
                        $m_series_name = $h_series_name;
                        $m_series_num = $h_series_num;
                }
                else
                {
                        $m_series_id = "";
                        $m_series_book_id = "";
                        $m_series_name = "";
                        $m_series_num = "";
                }
                ($success, $h_order_id, $h_order_date, $h_due_date, $h_order_book_id) = $bookdb->get_order_data($dbh, $pass_book_id);
                if ($h_order_id)
                {
                        $m_order_id = $h_order_id;
                        $m_order_book_id = $h_order_book_id;
                        $m_order_date = $h_order_date;
                        $m_due_date = $h_due_date;
                }
                else
                {
                        $m_order_id = "";
                        $m_order_book_id = "";
                        $m_order_date = "";
                        $m_due_date = "";
                }
                ($success, $w_count) = $bookdb->write_temp_tbl($dbh, $m_id, $m_book_id,
                        $m_isbn, $m_copyright_year, $m_status, $m_title, $m_alt_title, $m_notes,
                        $m_author_id, $m_author1_name, $m_author2_name, $m_author_book_id,
                        $m_series_id, $m_series_name, $m_series_num, $m_series_book_id,
                        $m_order_id, $m_order_date, $m_due_date, $m_order_book_id);
        }
        my ($g);
        for ($g = 0; $g < $book_count; $g++)
    {
                $pass_book_id = $book_ids[$g];
                ($success, $s_count, $m_id, $m_book_id, $m_isbn, $m_copyright_year, $m_status, $m_title, $m_alt_title, $m_notes,
                        $m_author_id, $m_author1_name, $m_author2_name, $m_author_book_id,
                        $m_series_id, $m_series_name, $m_series_num, $m_series_book_id,
                        $m_order_id, $m_order_date, $m_due_date, $m_order_book_id)
                        = $bookdb->get_temp_data($dbh, $pass_book_id);
    }
##################### D E B U G ##############################################
print header,
    start_html,
    p("Track book data after final get<br>"),
    p("book_ids: @book_ids<br>"),
    p("pass_book_id: $pass_book_id - h_author_id: $h_author_id - h_last_name: $h_last_name<br>"),
    p("m_id: $m_id - m_book_id: $m_book_id - m_isbn: $m_isbn - m_title: $m_title - m_author1_name: $m_author1_name - m_series_name: $m_series_name - m_series_num: $m_series_num - m_order_date: $m_order_date<br>"),
    p("book_count: $book_count - c: $c - g: $g - c_count: $c_count - w_count: $w_count - s_count: $s_count<br>"),
    p("-----------------------------------<br>"),
    end_html;
exit;
##################### D E B U G ################################################################### D E B U G

    exit;
}
&bail_out ("Invalid choice. - list_all.pl - Choice: $action");
&all_done();
exit;

sub get_html()
{
    $page = `cat /home/rmelia/public_html/books/cgi_list.shtml`;
} # end sub get_html

sub put_html()
{
    $page =~ s/<!--books: cgi\s*-->/$content/g;
    print $html_header, $page;
} # end sub put_html 
```

**相关模块代码：**

```
sub write_temp_tbl()
{
    my $self = shift;
    my $dbh = shift;
    my $w_count = 0;
    my $m_id = shift;
    my $m_book_id = shift;
    my $m_isbn = shift;
    my $m_copyright_year = shift;
    my $m_status = shift;
    my $m_title = shift;
    my $m_alt_title = shift;
    my $m_notes = shift;
    my $m_author_id = shift;
    my $m_author1_name = shift;
    my $m_author2_name = shift;
    my $m_author_book_id = shift;
    my $m_series_id = shift;
    my $m_series_name = shift;
    my $m_series_num = shift;
    my $m_series_book_id = shift;
    my $m_order_id = shift;
    my $m_order_date = shift;
    my $m_due_date = shift;
    my $m_order_book_id = shift;

    my $success = (1==2);

    $sth = $dbh->prepare ("INSERT INTO webstone.temp
                (m_id, m_book_id, m_isbn, m_copyright_year, m_status,
                m_title, m_alt_title, m_notes,
                m_author_id, m_author1_name, m_author2_name, m_author_book_id,
                m_series_id, m_series_name, m_series_num, m_series_book_id,
                m_order_id, m_order_date, m_due_date, m_order_book_id)
                VALUES
                ('1', '$m_book_id', '$m_isbn', '$m_copyright_year', '$m_status',
                '$m_title', '$m_alt_title', '$m_notes',
                '$m_author_id', '$m_author1_name', '$m_author2_name', '$m_author_book_id',
                '$m_series_id', '$m_series_name', '$m_series_num', '$m_series_book_id',
                '$m_order_id', '$m_order_date', '$m_due_date', '$m_order_book_id')
                ");
    $sth->execute();
    if ( !$sth )
        {
        die "Couldn't execute insert statement: " . $dbh->errstr;
    }
    elsif ($sth->rows == 0)
        {
        die "INSERT INTO temp Failed - SQL error: " . $dbh->errstr . "<br>\n";
    }
    else
        {
        #die "SQL insert successful, rows = " . $sth->rows() . "<br>\n";
        $success = (1==1);
    }

        $w_count++;
    $sth->finish;
        return ($success, $w_count);
} # end sub write_temp_tbl 
```

我还尝试过用“for 循环”和“foreach 循环”来代替“while 循环”。我的研究都没有接近答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:14:00.227

你似乎突然发明了一个`$book_ids`没有被赋值的变量。我怀疑你实际上想要这样的东西：

```
foreach my $pass_book_id (@book_ids) {
  ...
} 
```

这是那些可以帮助您找到问题`use strict`的地方之一。`use warnings`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:28:40.373

正如戴夫已经说过的：首先，总是`use strict`和`use warnings`. 它通常会告诉您人们容易忘记的简单事情。

添加后，我建议您查看[DBI](http://search.cpan.org/~timb/DBI-1.622/DBI.pm#prepare)文档。

为了让您入门，这里有一个简单的脚本，它执行的操作类似于您要实现的目标（我猜）。

```
use strict;
use warnings;
use DBI;

my $dbh = DBI->connect('datasource goes here', 'username', 'password');

# Here are our books, there's one hashref for each book
my @books = (
  {
    'author' => 'J. K. Rowling',
    'title' => 'Harry Potter and the Perl Book',
    'ISBN' => '123456789',
  },
  {
    'author' => 'J. K. Rowling',
    'title' => 'Harry Potter and another Perl Book',
    'ISBN' => '123456787',
  },
);

# sth is short for STatement Handle
my $sth = $dbh->prepare('INSERT INTO book ( author, title, isbn ) VALUES ( ?, ?, ? )');
foreach my $book (@books) {
  $sth->execute(
    $book->{'author'},
    $book->{'title'},
    $book->{'ISBN'},
  );
}
$sth->finish; 
```

简而言之：准备您的陈述并使用[占位符](http://search.cpan.org/~timb/DBI-1.622/DBI.pm#Placeholders)。他们负责转义，保护您免受 SQL 注入并加快查询速度。如果您只准备一次声明并且可以重复使用它。是`?`占位符。

# php - UTF 8 和 Windows 1254 字符集不匹配

> ID：11086077
> 
> 赞同：1
> 
> 时间：2012-06-18T15:32:29.560
> 
> 标签：php, utf-8, character-encoding, utf

我正在使用 Drupal 7。我创建了一个块并嵌入了以下代码：

```
 $contents = file_get_contents('http://www.tcmb.gov.tr/kurlar/today.html'); 
```

我的网站字符集：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

外部链接字符集是：

```
<META HTTP-EQUIV=Content-Type  CONTENT=text/html;charset=windows-1254> 
```

所以，当获得一些关于外部链接的信息时，我遇到了字符问题（没有看到 İ、ç、ş 等。）

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T15:42:00.120

在您的块中，我将创建这两行：

```
$contents = file_get_contents('http://www.tcmb.gov.tr/kurlar/today.html');
$contents = iconv("windows-1254" , "UTF-8" , $contents); 
```

所以这个页面的内容将是 UTF-8，和你的页面一样。

# iphone - 获取具有 ROOT 权限的 GPS 没有警报视图（越狱）

> ID：11086083
> 
> 赞同：2
> 
> 时间：2012-06-18T15:32:43.307
> 
> 标签：iphone, objective-c, ios, gps, jailbreak

如何在没有警报视图的情况下获取 gps（越狱 iphone）？

```
NSString *newText;

CLLocationManager * locationManager = [[CLLocationManager alloc] init];
[locationManager startUpdatingLocation];
[locationManager setDesiredAccuracy:kCLLocationAccuracyNearestTenMeters];

CLLocation* location = [locationManager location];
CLLocationCoordinate2D coordinate = [location coordinate];

newText = [[NSString alloc] initWithFormat: @"Your Position : %f %f", coordinate.latitude, coordinate.longitude];

NSLog(@"%@", newText); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-09T14:16:05.133

```
[CLLocationManager setAuthorizationStatus:YES forBundleIdentifier:@"your app bundle identifier"]; 
```

要使用此功能，您的应用程序权利应具有`com.apple.locationd.authorizeapplications`将布尔值设置为 true 的键。

**更新**

找到了更好的解决方案。添加到您的应用程序权利`com.apple.locationd.preauthorized`键，布尔值设置为 true。这将对您的应用程序进行预授权，因此您可以在没有任何用户许可或私有 API 的情况下请求位置。我在装有 iOS 5-7 的 iPhone 4S、5、5C、5S 上对其进行了测试。它可以在没有任何 Info.plist 的守护程序或命令行工具中工作，只是普通的二进制文件。

对于测试，我使用了以下代码

```
#import <CoreLocation/CoreLocation.h>

@interface LocationDelegate : NSObject<CLLocationManagerDelegate>
@end

@implementation

-(void)locationManager:(CLLocationManager*)manager didUpdateLocations:(NSArray*)locations
{
    NSLog(@"%@", locations);
}

@end

int main(int argc, char * argv[])
{
    LocationDelegate* delegate = [[LocationDelegate alloc] init];

    CLLocationManager* manager = [[CLLocationManager alloc] init];
    manager.delegate = delegate;
    [manager startUpdatingLocation];

    [[NSRunLoop currentRunLoop] run];

    return 0;
} 
```

# tsql - 存储过程 T-SQL If 布尔检查

> ID：11086084
> 
> 赞同：16
> 
> 时间：2012-06-18T15:32:47.033
> 
> 标签：tsql, if-statement

对于任何知道的人来说，这很容易。在 TSQL 存储过程中，如何编写比较布尔值的 if 语句。习惯了 C# 太久了，我把花括号、圆括号和各种各样的东西都放进去了，我想我弄错了。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-18T15:35:09.900

```
DECLARE @bool BIT = 1

IF @bool = 1
BEGIN
    -- do stuff here
    PRINT 'it was true';
END
ELSE
BEGIN
    -- do other stuff here
    PRINT 'it was not true';
END 
```

如果您在 if 中只有一行，那么您不需要`BEGIN`and `END`，但无论如何使用它们可能是一个好习惯。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T15:34:07.470

boolean对应的sql数据类型是bit，1代表真，0代表假，所以：

```
IF( @Statement=1)
    BEGIN
        SELECT COUNT(*) FROM Table
    END
ELSE
    BEGIN
        SELECT MIN(ID) FROM Table
    END
END 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-21T12:08:42.777

从 SQL Server 2012 开始，IIF 是为赋值编写 IF THEN ELSE 的简写方式：

```
 DECLARE @str VARCHAR(10);
    SET @str = IIF(1=1, 'Yes', 'No'); 
```

# search - 按在 solr 索引中搜索最多的结果排序

> ID：11086088
> 
> 赞同：1
> 
> 时间：2012-06-18T15:33:03.577
> 
> 标签：search, autocomplete, solr, indexing

我正在使用 Solr 在网站上实现预测搜索（带有自动完成功能），并且我想通过在索引中主要搜索来过滤结果。我的意思是，在搜索单词时，我想保留搜索记录，以便显示按相关性排序的结果。

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:48:00.760

您需要输入搜索词的索引。这可以通过挖掘您的搜索日志来构建。这些搜索词的相关性取决于它们的频率。这个相关因素可以是一个[外部字段](http://lucidworks.lucidimagination.com/display/solr/Solr+Field+Types#SolrFieldTypes-WorkingwithExternalFiles)（这样您就不必定期重新索引它）。这个外部文件会定期更新频率因子。

自动完成字段来自这个“以前的搜索词索引”，按依赖于外部字段的相关性分数排序。

要考虑的另一件事是 - 可以从您的实际文档索引本身构建自动完成术语。因此，您可以将“以前的搜索词索引”和“原始文档索引”的结果添加到您的自动完成字段中。（例如，如果该词在您的索引中，但以前从未搜索过怎么办？）

# c# - json.net 和 twitter 流 API 的增量处理

> ID：11086093
> 
> 赞同：3
> 
> 时间：2012-06-18T15:33:11.710
> 
> 标签：c#, json, twitter, json.net

我正在尝试以增量方式使用 Twitter 流 API 来逐个处理根对象，并通过异步回调返回每个对象。我已经看到实现计算 { vs } 的数量并等待数字在 0 处平衡，然后处理该数据块，尽管对我来说这真的感觉不安全。

我的计划是使用 json.net JsonTextReader 并使用 TokenType 和 Depth 来完成这项工作。这很好，因为它是在每个对象的末尾拆分读取的一种非常可靠的方法，我只是不知道如何将该数据放入 Deserialize 方法中。Deserialize 方法确实接受 JsonTextReader 作为参数，但是从那时起处理（毕竟它是一个仅向前的流）所以我被卡住了。还有一个 DeserializeObjectAsync 方法可用，但只接受一个字符串。

```
var jsonSerializer = new JsonSerializer();
using (StreamReader reader = new StreamReader(_response.GetResponseStream()))
{
    using (var jsonReader = new JsonTextReader(reader))
    {
        while (jsonReader.Read())
        {
            if (jsonReader.Depth == 0 && jsonReader.TokenType == JsonToken.EndObject)
            {

                //newTweetCallback(jsonSerializer.Deserialize<Tweet>([Some magic here. Help!]));
            }
        }
    }
} 
```

我希望我只是因为盯着特定应用程序太久而遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-31T17:50:17.360

实际上，您可以将部分使用的 JsonTextReader 传递给 Deserialize，而不是自己处理深度，这将不会比结束标记进一步读取：

```
while (jsonReader.Read())
{
    if (jsonReader.TokenType == JsonToken.StartObject)
    {
        newTweetCallback(jsonSerializer.Deserialize<Tweet>(jsonReader));
        // Debug.Assert(jsonReader.TokenType == JsonToken.EndObject);
    }
} 
```

所以没有必要自己提前阅读。

# zend-framework - 未捕获的异常“Zend_View_Exception”

> ID：11086097
> 
> 赞同：4
> 
> 时间：2012-06-18T15:33:20.863
> 
> 标签：zend-framework, zend-studio

对于我的项目，我在**applicaiton.ini中添加了以下代码行**

**resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/"**

每当我添加此代码时，都会出现以下错误，

**致命错误：未在路径中找到带有消息“脚本”layout.phtml”的未捕获异常“Zend_View_Exception”

波纹管是我的项目的结构

**![在此处输入图像描述](../Images/fddcc07d40e5ae03d28baf12144a365c.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T16:00:05.100

布局的文件夹必须位于“应用程序”中。

```
/application/layouts/scripts/layout.phtml 
```

# jquery - 为什么 setTimeout 对 AJAX 请求不起作用？

> ID：11086098
> 
> 赞同：3
> 
> 时间：2012-06-18T15:33:21.667
> 
> 标签：jquery, ajax, wait

我有这个非常简单的 jQuery 函数：

```
$(".milestone-in-tree").live({
    mouseenter: function() {
        setTimeout(
        $.ajax({
            type: "GET",
            url:"/projects/pmnodes/" + $(this).data("pmnode") + "/addbuttons.js"
        }),5000)
    },
    mouseleave: function() {
        $(".grid-btn").delay(800).remove();
    }
}); 
```

我想让它在将 AJAX 请求发送到服务器之前等待 5 秒，但它不会等待，它只是立即发送它。为什么？

**更新：**

感谢您的所有反馈。我更改了所有答案中建议的功能：

```
$(".milestone-in-tree").live({
    mouseenter: function() {
        var node = $(this).data("pmnode")
        setTimeout(function() {
        $.ajax({
            type: "GET",
            url:"/projects/pmnodes/" + node + "/addbuttons.js"
        }),5000});
    },
    mouseleave: function() {
        $(".grid-btn").delay(800).remove();
    }
}); 
```

但我仍然没有延迟。有什么我误解了吗？PS：我创建了 node 变量，因为我忽略了一个原因， $(this) 在 SetTimeout 匿名函数中不再可访问。

**更新 2**

最后，我可以设法得到延迟，但我意识到在延迟之后请求仍然发送到服务器，即使在两者之间触发了 mouseleave 事件......

我可以找到解决方法。这是完全不同的。延迟不再起作用，但是 ajax 请求在 mouseleave 事件中被中止，这是我真正需要的。对于那些可能感兴趣的人，这是代码：

```
var button_request;
$(".milestone-in-tree").live({
    mouseover: function() {
        var node = $(this).data("pmnode");
        button_request = $.ajax({
                        type: "GET",
                        url:"/projects/pmnodes/" + node + "/addbuttons.js"
                    });
        setTimeout(function() {button_request;},5000)
    },
    mouseleave: function() {
        if (button_request) {
            button_request.abort();
            button_request = null;
                }
        $(".grid-btn").remove();
    }
}); 
```

当然 setTimeout 可以删除（因为它不起作用......）但为了清楚起见，我将其保留。

谢谢大家。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T15:34:59.940

试试这个：

```
$(".milestone-in-tree").live({
    mouseenter: function() {
        var pmnode = $(this).data("pmnode"); // cache the data in a variable
        setTimeout( function() { // this function(){...} wrapper is necessary
            $.ajax({
                type: "GET",
                url:"/projects/pmnodes/" + pmnode + "/addbuttons.js"
            })
        },5000)
    },
... 
```

调用的第一个参数[`setTimeout()`](https://developer.mozilla.org/en/DOM/window.setTimeout)需要是一个字符串（你真的，真的不应该这样做）或一个自包含的函数对象。

通过放在`$.ajax(...)`那里，你告诉 JavaScript (1) 立即运行它并 (2) 将第一个参数设置为*ajax 函数返回的任何内容*——根据[文档](http://api.jquery.com/jQuery.ajax/)，它是一个 jqXHR 对象，它`setTimeout`不能做任何事情和。

只要养成将匿名`function(){...}`作为第一个参数`setTimeout()`或`setInterval()`每次使用它的习惯，就可以了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T15:36:00.023

`setTimeout()`要么接受它的 Javascript 代码字符串`eval`（非常不好的做法，我可以添加），**要么**接受它在指定时间后调用的函数引用。

您在这里所做的既不是 --- 您正在调用一个函数作为`setTimeout()`. 正因为如此，它不会等待。

你要：

```
setTimeout(function () {
    $.ajax({});
}, 5000); 
```

这就像以下之间的区别：

```
setTimeout(foo, 1000); 
```

和

```
setTimeout(foo(), 1000); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-18T15:35:14.397

您正在调用该`$.ajax()`函数，并将该调用返回的任何内容传递给`setTimeout()`. 您需要将其包装在一个匿名函数中：

```
setTimeout(function() {
    $.ajax({
        type: "GET",
        url:"/projects/pmnodes/" + $(this).data("pmnode") + "/addbuttons.js"
    })
},5000); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-18T15:35:01.260

包装一个匿名函数：

```
setTimeout(function(){
        $.ajax({
            type: "GET",
            url:"/projects/pmnodes/" + $(this).data("pmnode") + "/addbuttons.js"
        });
},5000) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-18T15:35:31.260

你直接调用它，把它放在函数回调中：

```
 setTimeout( function() {
    $.ajax({
        type: "GET",
        url:"/projects/pmnodes/" + $(this).data("pmnode") + "/addbuttons.js"
    })
   } ,5000) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-18T15:35:08.467

您传入的代码实际上正在执行，如果您想在第一个参数中运行代码，您需要将其包装在一个函数中：

```
$(".milestone-in-tree").live({
    mouseenter: function() {
        setTimeout(
function(){
        $.ajax({
            type: "GET",
            url:"/projects/pmnodes/" + $(this).data("pmnode") + "/addbuttons.js"
        }),5000);
}
    },
    mouseleave: function() {
        $(".grid-btn").delay(800).remove();
    }
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-18T15:35:20.423

它需要一个`function()`：

```
setTimeout(function(){
        $.ajax({
        ...
}, 5000) 
```

# emacs - 在 Emacs 中，如何将 Ctrl-Key 设置为 Vim 的 LowerCaseKey 而 Alt-Key 设置为 Vim 的 HigherCaseKey？

> ID：11086104
> 
> 赞同：3
> 
> 时间：2012-06-18T15:33:48.483
> 
> 标签：emacs, mapping, key, vimpulse

我使用安装了 Vimpulse 的 Emacs。一个人写很多的时候，我想在`Ctrl`/ `Alt`- 键中做。但是在组织文本结构或使用其他应用程序时，我更喜欢 Emacs 中的 Vim。

问题是每个中相同动作的键是不同的，这在我注意到之前就做了很多错误的击键。那么，在 Emacs 中，有什么建议`Ctrl`-`Key`就像对于 Vim`Alt`的 LowerCaseKey 和 -Key 作为 Vim 的 HigherCaseKey 一样？

或者如果这很难，我能找到改变的 Vimpulse 来制作 Emacs 的键吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T02:21:52.990

我没有经验`viper-mode`，但根据我所做的有限测试，以下内容似乎可行：

```
(add-hook 'viper-load-hook
  #'(lambda ()
      (define-key viper-insert-basic-map (kbd "C-d") nil)
      (define-key viper-insert-basic-map (kbd "C-d C-d") 'kill-line))) 
```

您可以将所需的任何其他定义添加到该挂钩中，以确保在启动时对其进行评估。但是，您需要小心选择的键绑定。`C-y`，例如，你特别提到的，通常绑定到`yank`，我怀疑这是你可能不想取消绑定的东西。此外，`viper-mode`似乎使用了一组非常复杂和精心制作的重叠键映射，因此根据您希望启用的功能，您可能需要指定一个不同的键映射（或者，实际上，要并行使用几个不同的键映射），例如`viper-vi-global-user-map`, `viper-insert-global-user-map`, 等等。不幸的是，这与我的专业知识程度有关 w/r/t `viper-mode`。

编辑：对不起，我想我可能误解了你的要求。如果您想在*之外* `viper-mode`应用这些键绑定，请使用`global-set-key`，即：

```
(global-unset-key (kbd "C-d"))
(global-set-key (kbd "C-d C-d") 'kill-line) 
```

等等。同样，请注意您设置的绑定。使用`describe-key`（默认绑定到`C-h k`）检查您希望重新映射的键序列当前绑定到什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:32:36.103

我尝试在“需要'vimpulse'”之前在.Emacs 文件中添加键绑定。但它不起作用。所以我在“需要'vimpulse'”之后添加了键绑定。然后，无论 vimpulse 是打开还是关闭，它都会替换所有内容。这根本不是一个优雅的解决方案。但我想我可以忍受。（顺便说一句，如果有 cd，“\Cd \Cd”将不起作用）

绑定如下：

```
;;remap keys like vim
(global-set-key (kbd "M-3") 'server-edit)                    ;; #
(global-set-key (kbd "M-4") 'move-end-of-line)               ;; $
(global-set-key (kbd "M-5") 'query-replace-regexp)           ;; % 
(global-set-key (kbd "M-6") 'move-beginning-of-line)         ;; ^
(global-set-key (kbd "C-w") 'forward-word)
(global-set-key (kbd "C-t") 'set-mark-command)
(global-set-key (kbd "C-y") 'kill-ring-save)
(global-set-key (kbd "C-u") 'undo)
(delete-selection-mode 1)                               ;; delete selection before yank
(global-set-key (kbd "C-p") 'yank)
(global-set-key (kbd "M-y") 'kill-region)
(global-set-key (kbd "C-x y") 'quick-copy-line)

(global-set-key (kbd "C-d") 'delete-forward-char)
(global-set-key (kbd "C-h") 'left-char)
(global-set-key (kbd "C-j") 'next-line)
(global-set-key (kbd "C-k") 'previous-line)
(global-set-key (kbd "C-l") 'right-char)
(global-set-key (kbd "M-g") 'end-of-buffer)
(global-set-key (kbd "M-j") 'delete-indentation)
(global-set-key (kbd "C-x d") 'kill-whole-line)
(global-set-key (kbd "C-x g") 'beginning-of-buffer)

(global-set-key (kbd "C-b") 'backward-word)
(global-set-key (kbd "C-`") 'bookmark-set)
(global-set-key (kbd "C-.") 'repeat)
(global-set-key (kbd "C-/") 'isearch-forward-regexp)
(global-set-key (kbd "M-m") 'bookmark-jump)
(global-set-key (kbd "M-/") 'isearch-backward-regexp)
(global-set-key (kbd "C-x m") 'bookmark-bmenu-list) 
```

# objective-c - 如何在 XCode 中获取文本字段的文本

> ID：11086105
> 
> 赞同：14
> 
> 时间：2012-06-18T15:33:51.853
> 
> 标签：objective-c, ios, xcode, interface-builder, uitextfield

我用界面生成器制作了一个文本字段。我怎样才能让它的文本在其他地方使用？

有没有类似的东西：

```
string text = myTextField.Text; 
```

如果是这样，我该如何命名我的文本字段？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-18T15:49:51.080

因此，您要做的第一件事是在与您的 xib 文件关联的视图控制器文件的 .h 文件中创建一个属性，如下所示：

```
 @property (strong, nonatomic) IBOutlet UILabel *aLabel; 
```

接下来在 .m 文件中，您需要像这样合成它：

```
 @synthesize aLabel; 
```

在您的实施标签中。

现在在界面生成器控件中单击 Xcode 4.3 屏幕左侧显示“文件所有者”的位置，按住并拖动标签并松开。然后在弹出窗口中选择您创建的属性的名称。现在在视图控制器的 viewDidLoad 方法中，您可以像这样获得您的值：

```
 self.alabel.text 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T15:52:32.910

正如 Greg Price 所提到的，要为您的文本字段命名，您必须创建一个 Outlet。转到您的 ViewController.h 文件并为您的文本字段创建一个属性：

```
@interface YourViewController: UIViewController
@property (nonatomic, retain) IBOutlet UITextField myTextField
@end 
```

使用关键字`IBOutlet`您说 Interface Builder 有一个与此属性连接的出口。另一方面，您将使用关键字`IBAction`将方法连接到对象。

不要忘记在你的实现下合成你的属性，然后编译器会为你创建一些标准的 setter 和 getter：

```
@synthesize myTextField; 
```

然后转到界面生成器并右键单击`File's Owner`然后将一条线从 myTextField 拖动到视图上的 TextField。

现在您可以访问代码中的 text 属性：

```
NSString *string = self.myTextField.text; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T15:44:35.247

首先，您需要一个名为 myTextField 的 @property。

之后，您可以获得 textfield 的文本`myTextField.text`。有关更多信息，请查看类参考[UITextField](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextField_Class/Reference/UITextField.html)

也许您想在用户键入时获取它。如果是这样，您可以查看[UITextFieldDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)

-

编辑：如果您是客观的 c 学生，可以查看一个很酷的链接，您可以在以下位置了解更多信息：[UITextFields 示例](http://www.roseindia.net/tutorial/iphone/examples/iphone-AddTwoTextField.html)

最好的祝福。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-17T13:30:34.933

它非常简单，只需将文本字段从视图区域拖到您的情节提要。然后激活助手编辑器，以便您可以同时查看代码窗口和情节提要。然后按下控制按钮并将文本字段从情节提要拖到代码窗口，就是这样。

```
//created a string variable
    var name: String = ""

    //our label to display input
    @IBOutlet weak var labelName: UILabel!

    //this is the text field we created
    @IBOutlet weak var textFieldName: UITextField!

    @IBAction func buttonClick(sender: UIButton) {
        //getting input from Text Field
        name = textFieldName.text!

    } 
```

来源：**[Xcode 文本字段教程](https://www.simplifiedios.net/xcode-text-field-tutorial-ios-using-swift/)**

# regex - 正则表达式不适用于外观相似的字符串

> ID：11086109
> 
> 赞同：2
> 
> 时间：2012-06-18T15:33:58.047
> 
> 标签：regex

我正在尝试获取下面提到的字符串的开始和结束标记之间的内容

```
<a href="./products/" class="link">Products </a>

<a href="./servicesandsolutions/" class="link">Services & Solution </a> 
```

使用的正则表达式：

```
<([a-z0-9]+)([^<]+)\*(?:>(.\*?)</\\2>|\\D+/>) 
```

它适用于第一个字符串，但不适用于后一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:00:07.563

根据正则表达式的风格 - 使用前瞻和后瞻方法来获得 > 和 < 即之间的匹配

```
(?<=>)[^>]*(?=<) 
```

`(?<=>)`- 向前看 >

`(?=<)`- 在后面寻找一个 <

`[^>]*`- 匹配链接本身的文本

lookahead 和 lookbehind 是零宽度匹配，所以只会得到你需要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:55:08.487

为什么这么复杂？不会简单`/>([^<]+)</`地捕获元素的内容吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:52:02.100

只需摆脱标签。

```
var str = '<a href="./products/" class="link">Products </a>'
var str2 = '<a href="./servicesandsolutions/" class="link">Services & Solution </a>'
var RE_findOpenAndCloseTag = /^<[^>]+>|<\/[^>]>$/g;

str.replace( RE_findOpenAndCloseTag, '' ) == "Products ";
str2.replace( RE_findOpenAndCloseTag, '' ) == "Services & Solution "; 
```

请注意，`RE_findOpenAndCloseTag`假设标签将始终以 a 开头`<`并且不包含 a ，`>`除非它正在关闭标签。因此这将失败。'>">这将失败

但更简单的方法是将标签转换为节点，然后获取 innerHTML。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:53:38.863

通常你不想用正则表达式解析你自己的 HTML，解析器在这方面做得更好。

假设您使用的是 PCRE，这是对您要查找的表达式的随机猜测：

```
(?is)<([a-z]+)\b[^<>]*(?:>(.*?)</\1>|/>) 
```

请注意，这不适用于嵌套标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T16:11:13.123

试试这个它会解决你的问题（只需添加`|</\1>`）

```
<([a-z0-9]+)([^<]+)*(?:>(.*?)|\D+/>|</\1>) 
```

[更多详情请参考](http://www.regular-expressions.info/examples.html)

# git - 如何使用 Git 通过 master 更新分支

> ID：11086110
> 
> 赞同：0
> 
> 时间：2012-06-18T15:34:04.870
> 
> 标签：git, branching-and-merging

当谈到 Git 时，我是一个完全的新手，并且正在努力理解如何处理分支上的合并。

基本上我有 branchA，它有一些变化，master（我试图用它来模拟 SVN 中的“trunk”）和 branchB。我想要做的是用来自分支A的更改更新master，然后使用这些更改更新branchB。然后基于master创建branchC。

或者至少这就是使用 SVN 会做的事情。

迷失在树林里，我知道那里有很多信息，但是对于我需要在 atm 完成的这项任务来说有点太多了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:41:38.557

```
git checkout master                 <-- change to master
git merge branchA                   <-- merge changes from branchA into master
git checkout branchB                <-- change to branchB
git merge master                    <-- merge changes from master & branchA into branchB
git checkout master -b branchC      <-- create a new branch called branchC based on master 
```

我假设所有命令都不会引起冲突。

# jquery - jQuery可拖动选项元素

> ID：11086111
> 
> 赞同：2
> 
> 时间：2012-06-18T15:34:05.120
> 
> 标签：jquery

有关使以下选项元素可拖动的任何提示？

```
<select id="expenseSelect" multiple="multiple" style="height:200px">
    <option value="a">aaaaaaaa</option>
    <option value="b">bbbbbbbb</option>
    <option value="c">cccccccc</option>
    <option value="d">dddddddd</option>
    <option value="e">eeeeeeee</option>
</select> 
```

以下似乎不起作用

```
$(document).ready(function() {
    $('#expenseSelect').children().draggable();
}); 
```

我基本上是在寻找一个列表框元素，用户可以在其中选择一个或多个项目并将它们拖到表单中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T09:32:39.233

面对这个问题，为此写了一个小的jQuery插件。唯一的问题是 Internet Explorer (any) - 它不支持 <option> 元素上的任何事件。

[https://github.com/NikitaKA/jquery.dragOptions](https://github.com/NikitaKA/jquery.dragOptions)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T15:36:10.980

恐怕这对于本机下拉框是不可能的。不同的浏览器可能以不同的方式创建`select`标签。例如，移动设备可能会用`select`标签做一些完全不同的事情。

`div`您也许应该考虑使用 jQuery 插件（或创建您自己的插件），它使用or`li`标记来制作下拉框。然后这些可以是可拖动的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:36:56.747

jQuery draggable 不能像这样的下拉元素。我建议使用无序列表`<ul>`来显示数据，因为 jQuery 可以重新排序这样的东西。

此外，您可能正在寻找“可排序”，因为您想将新项目拖到列表中，而不是“可拖动”。查看此示例的源代码：http: [//jqueryui.com/demos/sortable/#connect-lists](http://jqueryui.com/demos/sortable/#connect-lists)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:35:45.720

您不能`select`使用 jQuery 将选项设置为可拖动。

[查看可拖动的文档以了解如何做**您**想做的事情](http://jqueryui.com/demos/draggable/)（尽管不使用该`select`框）

# objective-c - 匹配第二次在正则表达式中找到单词

> ID：11086112
> 
> 赞同：0
> 
> 时间：2012-06-18T15:34:06.983
> 
> 标签：objective-c, ios, regex

我对 Regex 很陌生，我只是想弄清楚它。我试图搜索的字符串是这样的：

```
100 ON 12C 12,41C High Cool OK 0
101 OFF 32C 04,93C Low Dry OK 1
102 ON 07C 08,27C High Dry OK 0 
```

我正在尝试做的是找出部分以`32C`从字符串中找到部分。如果可能的话，是否每次都可以稍微更改一下代码，以便在字符串中找到第 N 次出现的单词。如果它有任何区别，我将在 iPhone 应用程序中使用此代码，从而在 Objective-C 中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:26:17.000

您的示例是面向行的并且具有相同的权重（同时）偏向字符串中行的开头。

如果您的引擎风格进行分组，您应该能够指定一个出现量词，它将为您提供一个准确的答案，而无需执行数组等。
在这两种情况下，答案都在捕获缓冲区 1 中。

例子：

```
$occurance = "2";
---------
/(?:[^\n]*?(\d+C)[^\n]*.*?){$occurance}/s
---------
or
---------
/(?:^.*?(\d+C)[\S\s]*?){$occurance}/m 
```

展开：

```
 /
 (?:
      [^\n]*?
      ( \d+C )
      [^\n]* .*?
 ){2}
 /xs

 /
 (?:
      ^ .*?
      ( \d+C )
      [\S\s]*?
 ){2}
 /xm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:20:35.403

您可以尝试以下方法。您将不得不用您的正则表达式模式替换 regex_pattern。在您的情况下， regex_pattern 应该类似于`@"\\s\\d\\dC"`(a whitespace character ( `\\s`) 后跟一个数字 ( `\\d`) 后跟一个 digit ( `\\d`) 后跟一个大写字母`C`。

`NSRegularExpressionCaseInsensitive`如果您可以确定字母 C 永远不会是小写，您可能还希望删除该选项。

```
NSError *error = nil;

NSString *regex_pattern = @"\\s\\d\\dC";

NSRegularExpression *regex =
    [NSRegularExpression regularExpressionWithPattern:regex_pattern
    options:(NSRegularExpressionCaseInsensitive |
         NSRegularExpressionDotMatchesLineSeparators)
    error:&error];

NSArray *arrayOfMatches = [regex matchesInString:myString
                                 options:0
                                 range:NSMakeRange(0, [myString length])];

// arrayOfMatches now contains an array of NSRanges;
// now, find and extract the 2nd match as an integer:

if ([arrayOfMatches count] >= 2)  // be sure that there are at least 2 elements in the array
{
    NSRange rangeOfSecondMatch = [arrayOfMatches objectAtIndex:1];  // remember that the array indices start at 0, not 1
    NSString *secondMatchAsString = [myString substringWithRange:
        NSMakeRange(rangeOfSecondMatch.location + 1,  // + 1 to skip over the initial space
                    rangeOfSecondMatch.length - 2)]  // - 2 because we ignore both the initial space and the final "C"

    NSLog(@"secondMatchAsString = %@", secondMatchAsString);

    int temperature = [secondMatchAsString intValue];  // should be 32 for your sample data

    NSLog(@"temperature = %d", temperature);
} 
```

# java - 自动装箱和强制有什么区别？

> ID：11086114
> 
> 赞同：2
> 
> 时间：2012-06-18T15:34:17.403
> 
> 标签：java, c, autoboxing, coercion, type-coercion

我用 Java、C 和 Python 编程。

> 算术类型之间的自动强制规则已被扩充以处理更丰富的类型集

资料来源：“C 编程语言”

但是“强制”是什么意思？答案说这就像类型转换和隐式强制转换和隐式类型转换，并在我阅读它的地方称为自动装箱。那么自动装箱和强制有什么区别呢？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-18T15:37:34.410

强制转换是*隐式*类型转换的另一个名称，即由语言规则强制执行的类型转换，而不是由程序员显式添加的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T15:36:07.687

强制是指“类型强制”。换句话说，你将一个类型的变量添加`Integer`到 a`Float`中，`Integer`将被强制为`Float`，并且数字相加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:36:27.563

强制转换是将一种数据类型更改为另一种数据类型的过程。[http://en.wikipedia.org/wiki/Type_conversion](http://en.wikipedia.org/wiki/Type_conversion)

# file-io - 如何让 .write 函数与 PyScripter 一起使用？

> ID：11086122
> 
> 赞同：1
> 
> 时间：2012-06-18T15:34:46.987
> 
> 标签：file-io, io, pyscripter

重现问题：

在 PyScripter 编辑器中，编写：

```
outf = open('output.txt', 'w')
outf.write('hello, world!') 
```

结果：

至少对我来说，当 output.txt 不存在时会发生这种情况。

1.  `output.txt`被建造
2.  `output.txt`当被任何文本编辑器打开时，将不包含任何数据或文本。

所以我的问题是，我该如何进行这项工作？

其他信息：

我正在使用 PyScripter 2.5.3.0 x64，Python 2.7.3，64 位作为解释器。

打印到控制台工作正常，所有其他功能和代码工作正常。

当我在命令提示符中使用 python 时，我可以很好地写入输出文件。我的问题只在 PyScripter 中。

谢谢， DS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:50:45.010

这个问题已经在评论中解决了，但无论如何我都会发布一个完整的答案。

[写入文件可能会延迟](https://stackoverflow.com/questions/3167494/how-often-does-python-flush-to-a-file)。为确保它们不是，请通过关闭文件强制刷新：

```
outf.close() 
```

如果您不想显式调用 close，请尝试使用`with ... as`：

```
with open('output.txt', 'w') as outf:
    outf.write('hello, world!') 
```

# asp.net-mvc - 如何使用关系更新急切加载的实体

> ID：11086123
> 
> 赞同：0
> 
> 时间：2012-06-18T15:34:48.717
> 
> 标签：asp.net-mvc, entity-framework-4

我将 EF4 与 ASP.Net MVC 一起使用，我想知道如何更新急切加载的实体？

当我按如下方式加载实体时：

```
static readonly Func<Entities, Guid, IQueryable<Call>> CallByGuid =
        CompiledQuery.Compile<Entities, Guid, IQueryable<Call>>(
        (db, callGuid) =>
            db.Calls                    
            .Where(c => !c.Removed && c.CallGUID.Equals(callGuid)));
    public Call GetCall(Guid guid)
    {
        return CallByGuid.Invoke(_db, guid).Single();
    } 
```

并将实体传递给视图，在那里对其进行编辑并返回给控制器并保存如下：

```
public Call UpdateCall(Call call)
    {
        _db.ObjectStateManager.ChangeObjectState(call, EntityState.Modified);
        _db.Call_VoiceCall.ApplyCurrentValues(call);
        _db.SaveChanges();

        Call dbCall = FindCall(call.CallGUID); 
        return dbCall;
    } 
```

一切正常，虽然很慢。当我按如下方式加载实体时：

```
static readonly Func<Entities, Guid, IQueryable<Call>> CallByGuid =
        CompiledQuery.Compile<Entities, Guid, IQueryable<Call>>(
        (db, callGuid) =>
            db.Calls
            .Include("Call_VoiceCall")
            .Include("Call_Rating")
            .Include("Memos")
            .Include("Company")
            .Include("PhoneService")                    
            .Where(c => !c.Removed && c.CallGUID.Equals(callGuid)));
    public Call GetCall(Guid guid)
    {
        return CallByGuid.Invoke(_db, guid).Single();
    } 
```

实体列表加载速度非常快，但我无法更新实体：我得到的是

> “违反 PRIMARY KEY 约束 ' *PK_Call* _5599FCED3AE4474F'。无法在对象 'dbo.Call' 中插入重复键。重复键值为 (6d078f37-29e6-4e56-9853-d793994ce163)。语句已终止。”

或类似的东西。

现在，由于几乎不可能在谷歌上搜索类似主题的问题，所以我做错了。它是什么？

# c# - Remote registry always null when different user

> ID：11086125
> 
> 赞同：2
> 
> 时间：2012-06-18T15:34:53.117
> 
> 标签：c#, .net, windows, winforms, remote-registry

I am creating a c# windows form application that goes read registry on remote computers.

```
RegistryKey regKey = RegistryKey
                        .OpenRemoteBaseKey(RegistryHive.CurrentUser, pc, RegistryView.Registry64)
                        .OpenSubKey("SOFTWARE\\ODBC\\ODBC.INI\\ODBC Data Sources"); 
```

When i run the application from USER1 it works because my remote computers are always logged in with USER1.

Now if i run it with USER2 my regKey is always equal to NULL, no matter what.

On my remote computers, in Component Services, i allowed the service : REMOTE REGISTRY.

Any ideas please ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:26:46.393

You cannot read HKEY_CURRENT_USER via remote registry, for the simple reason that there is no "current user" from the perspective of the remote registry service.

For example, would it be:

*   The registry key you would see if you were logged on? (but you are not!)
*   The registry key of the current logged-on user (What if there is none? What if more than one?)

It cannot just fetch your registry hive and load it because you may not have a roaming profile. It doesn't want to create one just so you can look at the registry.

So: HKEY_CURRENT_USER doesn't return anything for remote registry service. If you are interested in a particular user you might look under HKEY_USERS.

# excel - Excel树视图-向节点添加额外信息？

> ID：11086127
> 
> 赞同：0
> 
> 时间：2012-06-18T15:34:58.343
> 
> 标签：excel, vba

我有一个树视图，其中包含每个节点的键和文本。但是，我想将第三条信息归因于每个节点。这样做最干净的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:40:23.770

[Tag](http://msdn.microsoft.com/en-us/library/088ff74f%28v=vs.60%29)属性就是为了这个目的而存在的。`Node`您可以在每个 tree的`Tag`属性中存储 Variant 类型的数据。

否则，创建对“Microsoft Scripting Runtime”的引用并使用 Scripting.Dictionary 对象将额外数据与树键相关联。

```
Dim node_data As New Scripting.Dictionary
tvw.Nodes.Add , , "Key1", "Node text"
node_data("Key1") = 42 
```

# java - 视图内的 runOnUiThread

> ID：11086129
> 
> 赞同：19
> 
> 时间：2012-06-18T15:35:00.917
> 
> 标签：java, android, view

我正在定制`ImageView`。其中一种方法是从 URL 加载图像。我想在线程中检索位图并在 UI 线程中加载位图。

如何`runOnUIThread()`调用绘制位图？

是否有某种内置功能？或者我应该在构造函数中创建一个`Handler`并将其用于在 UI 线程中运行可运行对象？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-18T15:37:54.260

通过下载图像`AsyncTask`并在其**onPostExecute**方法中设置为您的视图

或者

从单独的图像下载线程使用**post**方法，`View`该方法将始终`Runnable`在*UI 线程*上运行：

```
yourImageView.post(new Runnable() {
    @Override
    public void run() {
        // set the downloaded image here

    }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T23:40:09.087

你可以这样做：

```
 new Thread(new Runnable() {
   public void run() {
     final Bitmap bm = getBitmapFromURL(myStation.getStation().imageURL);
     ((Activity) context).runOnUiThread(new Runnable() {
       public void run() {
         icon.setImageBitmap(bm);
       }
     });
   }
 }).start(); 
```

这将在活动之外工作，例如在 ListAdapter 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T15:45:34.907

创建一个从 AsyncTask 扩展的类。在构造函数中传递 ImageView。在 doInBackground 方法中，下载图像。在 postExecute 方法中，将图像设置为 ImageView。

# prestashop - Worldpay 重定向问题 - Worldpay 模块

> ID：11086132
> 
> 赞同：1
> 
> 时间：2012-06-18T15:35:06.220
> 
> 标签：prestashop

我希望有人可以帮助解决这个问题。我设法通过 Worldpay 进行了一次测试交易，该交易在我点击付款后执行。但是，由于某种原因，它不会重定向回网站，而是我们收到 Not found 消息，引用 validation.php

有人遇到过这个问题并设法解决了吗？任何帮助将非常感激。

Worldpay 的人建议我使用元刷新将购物者重定向回网站：

任何人都会知道将这段代码放在哪里以及如何使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:14:49.377

可能有两件事不对。

1) 您没有在 worldpay 管理面板中放置正确的发回 URL。

2) 您的 prestashop 支付模块中没有用于 worldpay 的 validation.php，或者该文件没有足够的权限。

请检查他们两个。谢谢

# ruby-on-rails - has_many 通过关联的好名字

> ID：11086137
> 
> 赞同：4
> 
> 时间：2012-06-18T15:35:09.233
> 
> 标签：ruby-on-rails, model, associations, has-many-through

我已经阅读了 rails 3 中的多对多关系，并看到 HABTM 已被“弃用”，因为`has_many :through`大部分时间都应该使用它。

我看到了很多加入模型具有明确名称的示例，例如杂志、订阅者 = 订阅。

但就我而言，我找不到一个好名字：/有什么约定我应该注意的吗？顶部包含 1 或 * 个创意，一个创意可以在 1 或 * 个顶部。最后，这是最好的方法吗？

这是我的代码：

```
class Top < ActiveRecord::Base  
  has_many :???  
  has_many :ideas, :through => :???  
end

class Idea < ActiveRecord::Base  
  has_many :???  
  has_many :ideas, :through => :???  
end

class ??? < ActiveRecord::Base  
  belongs_to :top  
  belongs_to :idea  
end 
```

另外通过使用has_many，我不需要手动创建连接表吗？

谢谢你的帮助 ：）

编辑：
顶部就像排名。所以顶部是按投票排序的想法的代表。一个想法是一个想法（一般来说）。例如，可以是 ruby​​ on rails 的最佳实践和“使用 has_many through 而不是 HABTM”的想法。
所以一个 Top 包含 1 个或 * 个 Ideas，一个 Idea 可以属于 1 个或 * 个 tops。对于想法来说，它更像是一个belongs_to_many，但它不存在于ror 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:20:23.613

首先，一个idea真的有很多子idea吗？这听起来像是一种奇怪的关系，应该规范化/重新考虑。

@gabrielhilal 提出了一个很好的建议，但我建议稍微备份一下并将`Idea`and`Top`表重命名为不那么不透明。例如，如果 Top 是 Topic 的缩写，`Idea`看起来更像是对 Topic 的“评论”，那么您的直通类可能是 TopicComment 或诸如此类。

无论如何，我认为您应该首先重命名这些表以使其更有意义（或向我们解释它们以便我们理解）然后继续使用@gabrielhilal 的建议，即仅使用两个表的组合来命名连接表 - <strong >这是常见的做法，除非第三个表有自己的特定含义（或有自己的属性），例如 Product + Sale = Invoice（其中 invoice 是连接表）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:58:13.320

我们需要了解 and 的含义`Idea`，`Top`以及它们的关系（为什么它是多对多），以便为您建议一个合适的名称。
但是，如果您找不到对此类有意义的名称，您可以使用类似`IdeaTop`或`TopIdea`...

# javascript - jQuery从顶部获取高度

> ID：11086141
> 
> 赞同：9
> 
> 时间：2012-06-18T15:35:15.567
> 
> 标签：javascript, jquery, hyperlink, height

我需要获取从页面顶部到当前滚动条位置的高度并将其放置到我的链接中：

```
<a class="poplight" rel="popup_name" href="#?w=here comes the value"></a> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-18T15:37:24.737

使用偏移量（）

```
$('.poplight').offset().top 
```

如果您需要滚动到该位置：

```
$('html, body').animate({
    scrollTop: $('.poplight').offset().top
}, 400); 
```

如果您需要基于滚动从窗口顶部到当前位置的距离：

```
$(window).scrollTop() 
```

想要将其添加到 url：

```
$(".poplight").attr("href", "#" + $(window).scrollTop()) 
```

# hlsl - HLSL 多次通过模糊（RTT？）

> ID：11086143
> 
> 赞同：0
> 
> 时间：2012-06-18T15:35:28.093
> 
> 标签：hlsl, render-to-texture

我尝试建立一个复杂的水着色器（我从互联网上的一个例子中得到了水着色器）。现在我想添加一些功能，将图案网格混合到模糊的水中。Atm 水和模糊工作，但是当我尝试通过一些随机化来建立模糊效果时......我使用了很多着色器指令...... :(

我搜索了诸如“hlsl 多次传递”、“hlsl 渲染到纹理”、“没有纹理的 hlsl 多次传递”之类的主题，因为我没有现有的“地面”纹理。

我从法线贴图和环境贴图构建水，现在......是否有可能从第一次传递到第二次传递这个“整个贴图/纹理/着色器数据”？因为当我只执行两遍时，第一遍的颜色会被完全覆盖:(

我希望你们能理解我的问题并拥有您需要的所有信息。

如果你能帮助我就好了。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:22:51.927

您可以尝试为着色器模型 3.0 编译。它允许使用更多指令。

如果要执行多次传递，则不必使用渲染来定位目标。您应该启用 Alpha 混合以防止以前的颜色被覆盖。

但是，如果您需要对上一次传递的输出进行采样，这将不起作用。在这种情况下，您需要 2 个纹理（A 和 B，均创建为渲染目标）。按着这些次序：

1.  将渲染目标设置为纹理 A。
2.  渲染第一遍。
3.  将渲染目标设置为纹理 B（或最终渲染目标，如果您不需要在以下渲染过程中对纹理 B 进行采样）。
4.  使用纹理 A 设置 hlsl 采样器（例如，使用 ID3DXEffect::SetTexture）。
5.  渲染第二遍（使用纹理 A 进行采样）。

如果您有超过 2 次通过，交换 A 和 B 并执行步骤 3.-5。每次通过。

# ruby-on-rails - 尽管在调试器中工作，但帮助程序中的 Rails NoMethodError

> ID：11086148
> 
> 赞同：0
> 
> 时间：2012-06-18T15:35:41.853
> 
> 标签：ruby-on-rails

错误：

```
undefined method `author' for nil:NilClass 
```

在我的助手中：

```
def last_updated(group)
  g = group.last_updated_version
  debugger
  g.author.name
end 
```

如果我让我的 last_updated(group) 函数返回 group.last_updated_version，视图会按预期打印出我的对象：

```
#<Assets::Version:0x0000000747af48> 
```

在上面显示的点使用调试器，我可以提取名称

```
(rdb:1) g.author.name
"Administrator" 
```

但是返回 group.last_updated_version.author.name 会导致错误。

谁能告诉我为什么 group.last_updated_version 似乎返回了我的对象，但是 group.last_updated_version.author 给了我 nil:NilClass 错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:40:09.400

对不起，愚蠢的问题。帮助程序 last_updated() 在循环中使用。我的方法 last_updated_version 为它传递的某些组对象返回 nil，但不是第一个。调试器显然在第一个停止，因此它在调试器中工作，但随后在之后通过的组中中断。

# command-line - Nunit忽略配置的命令行参数

> ID：11086158
> 
> 赞同：0
> 
> 时间：2012-06-18T15:36:08.403
> 
> 标签：command-line, nunit, jenkins

我在 jenkins 工作中尝试使用 nunit 时遇到了一些问题。尽管 nunit-2.6 [1] 的文档指出，您可以指定要用于测试的构建配置，但这似乎不起作用。我尝试使用“发布”配置运行测试，但 nunit 尝试加载调试程序集并失败:( 我使用以下调用启动 nunit：

```
nunit-console-x86.exe ambiHomeWPFTest\Tests\Tests.csproj /config:Release 
```

任何人都有一个想法，那里发生了什么？我对来自 java 背景的 .NET 很陌生，所以也许我错过了一些简单的东西。

[1] [http://www.nunit.org/index.php?p=consoleCommandLine&r=2.6](http://www.nunit.org/index.php?p=consoleCommandLine&r=2.6)

```
[test_ambiHomeWPFTest_master] $ cmd /c call     C:\Windows\TEMP\hudson8704126216198591607.bat

c:\jenkins\workspace\test_ambiHomeWPFTest_master>nunit-console-x86.exe ambiHomeWPFTest\Tests\Tests.csproj /config:Release 
NUnit-Console version 2.6.0.12051
Copyright (C) 2002-20011 Charlie Poole.
Copyright (C) 2002-2004 James W. Newkirk, Michael C. Two, Alexei A. Vorontsov.
Copyright (C) 2000-2002 Philip Craig.
All Rights Reserved.

Runtime Environment - 
   OS Version: Microsoft Windows NT 6.1.7601 Service Pack 1
  CLR Version: 2.0.50727.5456 ( Net 3.5 )

ProcessModel: Default    DomainUsage: Default
Execution Runtime: net-3.5
Unhandled Exception:
System.IO.DirectoryNotFoundException: Ein Teil des Pfades     "c:\jenkins\workspace\test_ambiHomeWPFTest_master\ambiHomeWPFTest\Tests\bin\Debug\Tests.dll    " konnte nicht gefunden werden.
   bei System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   bei System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32     rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options,     SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy)
   bei System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access)
   bei NUnit.Core.AssemblyReader.CalcHeaderOffsets()
   bei NUnit.Core.AssemblyReader..ctor(String assemblyPath)
   bei NUnit.Util.RuntimeFrameworkSelector.SelectRuntimeFramework(TestPackage package)
   bei NUnit.Util.DefaultTestRunnerFactory.GetTargetProcessModel(TestPackage package)
   bei NUnit.Util.DefaultTestRunnerFactory.MakeTestRunner(TestPackage package)
   bei NUnit.ConsoleRunner.ConsoleUi.Execute(ConsoleOptions options)
   bei NUnit.ConsoleRunner.Runner.Main(String[] args)

c:\jenkins\workspace\test_ambiHomeWPFTest_master>exit -100 
Build step 'Execute Windows batch command' marked build as failure
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:23:06.043

`/config:`如果您在引用`.csproj`in 例如命令时遇到开关问题`nunit-console-x86`，我的建议是您明确引用感兴趣的 DLL。

在上面的场景中，调用应该是：

```
nunit-console-x86 ambiHomeWPFTest\Tests\bin\Release\Tests.dll 
```

# ios - iOS - 更改 currentPlaybackRate 时 MPMoviePlayerController 音频加倍

> ID：11086160
> 
> 赞同：1
> 
> 时间：2012-06-18T15:36:08.453
> 
> 标签：ios, xcode, audio, mpmovieplayercontroller

我正在使用自定义控件。当我像这样更改播放速率时：

```
[videoPlayer setCurrentPlaybackRate:2.0f]; 
```

音频以 1.0 和 2.0 播放（音频加倍，如回声）。有人对如何解决这个问题有任何建议吗？

任何见解或方向将不胜感激。

# flash - AS3 错误 #1009（removeChild 不起作用？？）

> ID：11086169
> 
> 赞同：0
> 
> 时间：2012-06-18T15:36:29.747
> 
> 标签：flash, actionscript, removechild

这是我正在开发的一个小 Flash 游戏的一个小片段：

这一点来自我的 GamePlayScreen 课程：

```
public function handleKeyboard(e:KeyboardEvent):void {
        if(e.type == KeyboardEvent.KEY_DOWN && e.keyCode == Keyboard.ENTER) {
            var enemy:EnemyShip = new EnemyShip();
            enemyships.push(enemy);
            addChild(enemyships[enemyships.length-1]);
        }
    } 
```

这一点导致错误（我用*标记了该行）

```
for each (var enemy:EnemyShip in Game.gameplay.enemyships) {
            if(this.hitTestObject(enemy)) {
                *enemy.parent.removeChild(enemy);
            } 
```

game 是在我的文档类 Game 中声明的 GamePlayScreen 的一个实例。我已经追踪了enemy.parent，它告诉我它是[Object GamePlayScreen]，但错误告诉我它是空的？

这是错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at Laser1/moveUp()[C:\Dev\Projects\Gamedev\Flash\classes\Laser1.as:23] 
```

我尝试了一切，跟踪每一行，但仍然没有结果......即使我使用

```
if(Game.gameplay.contains(enemy) {
    enemy.parent.removeChild(enemy);
} 
```

它继续再次偶然发现这个错误......我一无所知......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:30:18.650

一个简单的解决方案可能是检查该值是否不为 null 并且敌人仍然有父级。

```
for each (var enemy:EnemyShip in Game.gameplay.enemyships) {
  if(enemy && enemy.parent && this.hitTestObject(enemy)) {
    enemy.parent.removeChild(enemy);
  }
} 
```

# jquery - 发送没有参数的函数导致未设置的变量错误

> ID：11086170
> 
> 赞同：2
> 
> 时间：2012-06-18T15:36:30.463
> 
> 标签：jquery

为我对 jQuery 的基本理解致歉。我正在尝试编写一个函数，该函数可以由用户设置值或留空，自行设置。它看起来像这样：

```
// Calendar
function eventCalendar(yearSet, monthSet) { 

    // Get current date
    var date = new Date();

    // Check to see if variables were set in function

    // Year
    if ((yearSet.length > 0)) {
            var year = yearSet;
        } else {
            var year  = date.getFullYear();
        }

    // Month
    if ((monthSet.length > 0)) {
            var month = monthSet;
        } else {
            var month = date.getMonth();
        }

    console.log(month + ', ' + year);   
} 
```

但是，当函数在没有变量的情况下调用时，控制台会向我发送错误：

> 'yearSet 未定义'

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:40:15.253

您可以检查参数的真实性或虚假性，而不是检查它们是否明确未定义：

```
function eventCalendar(yearSet, monthSet) { 
  var date = new Date();
  var year = yearSet && yearSet.length ? yearSet : date.getFullYear();
  var month = monthSet && monthSet.length ? monthSet : date.getMonth();
  console.log(month + ', ' + year);   
} 
```

仅供参考，您当前的错误是由尝试访问变量 ( ) 的属性 ( `length`) 引起的。我建议让谷歌了解 JavaScript IMO 中的真实性和虚假性，这是该语言的一个非常有用的特性。`undefined``year`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:42:05.780

```
if(yearSet && yearSet.length) {
   //..
} 
```

您可以像这样简化您的方法。

```
function eventCalendar(yearSet, monthSet) { 
  var date = new Date();
  //if yearSet is present it will get that or else from new Date
  var year = yearSet || date.getFullYear();
  //if monthSet is present it will get that or else from new Date
  var month = monthSet || date.getMonth();

  console.log(month + ', ' + year);   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:38:04.440

将其与`undefined`或`null`代替检查长度进行比较

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:41:14.347

使用以下代码检查变量是否未定义：

```
if(typeof(variable) === 'undefined') {
    // var is undefined
} 
```

您的代码会抛出错误，因为当您使用`.length`时假设给定变量存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T15:43:48.030

还要考虑“”被认为是要包含的字段的有效值。你想做一些更性感的事情：

```
function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
}

function eventCalendar (y,m) {
  var date = new Date(); 
  y=(isNumber(y) ? y : date.getFullYear(); 
  m=(isNumber(m) ? m : date.getMonth(); 
  console.log(m + " " + y);
} 
```

未经测试，但它应该做你想做的事。

# javascript - 元素的定位

> ID：11086174
> 
> 赞同：0
> 
> 时间：2012-06-18T15:36:42.763
> 
> 标签：javascript, jquery

在我的网络应用程序中，我有一行如下所示：

```
small textbox         large textbox        select list 
```

我有一个布尔方法。如果它返回 false，我需要使上面的行看起来像这样：

```
small textbox        select list
large textbox 
```

基本上，我需要在大文本框中添加第二行。

这该怎么做？

这是一些代码：

```
<div>
<input style="width:25px; top:0px; left:0px; margin:0px; background:white;" type="text" />
<input style="width:100%; top:0px; left:150px; margin:0px; background:white; float:left;" />
<select style="width:60px;">
    <option value="0">a</option>
    <option value="1">b</option>
</select>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:53:18.537

试试这个[演示](http://jsfiddle.net/J6kNu/)

希望这可以帮助。只需替换 if 条件。这不是您发布的新代码的更新。

# android - 从屏幕外且不太可能使用的 GridView 位图中回收内存

> ID：11086175
> 
> 赞同：1
> 
> 时间：2012-06-18T15:36:48.310
> 
> 标签：android, android-gridview

我有一个 GridView，用于显示来自 API 的图像。正常的用户行为是往底部拉更多的结果。我计划缩小位图，但会有很多。因此，我认为删除当前页面上方许多页面的图像可能是安全的。

GridView 是否在某个时候删除了旧图像？正常的用法是使用视图缓存，看起来 GridView 正在保留它们。

# jsp - 为什么使用 java bean 而不是标准的 scriptlet

> ID：11086177
> 
> 赞同：1
> 
> 时间：2012-06-18T15:36:57.047
> 
> 标签：jsp, javabeans, scriptlet

我正在研究 Java EE 并阅读一章讨论 Javabeans 和`jsp:setproperty`.

例子是：

```
<jsp:useBean id="user1" class="User" />
<jsp:setProperty id="user1" property="name" value="Johnnie" /> 
```

为什么我还要费心去做这件事？并且不在我的jsp中使用以下代码：

```
<%
User user1 = new User();
user1.setName('johnnie');
%> 
```

# ios - 使用从未付费的用户恢复应用内购买

> ID：11086179
> 
> 赞同：6
> 
> 时间：2012-06-18T15:36:56.810
> 
> 标签：ios, cocoa-touch, in-app-purchase, storekit

我正在尝试在我的应用中测试应用内购买。

当我与购买了应用内购买的测试用户一起恢复应用内购买时，一切正常。

但是，当我尝试使用在我期望框架调用以下方法之前**没有进行应用内购买的用户恢复应用内购买时：**

`-paymentQueue:restoreCompletedTransactionsFailedWithError:`

但框架调用：

`-paymentQueueRestoreCompletedTransactionsFinished:`

就像我的测试用户已经购买了应用内购买....

这是正常行为吗？如果是这样，我如何测试尝试恢复而无需购买应用内购买的用户？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T09:38:44.290

在此处查看答案： [iOS 应用内购买恢复返回许多交易](https://stackoverflow.com/questions/10912442/ios-in-app-purchase-restore-returns-many-transactions)

您必须在事务观察器中处理它。

简而言之，您可以通过以下方式开始恢复过程：

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

然后调用以下事务观察器：

```
- (void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue
{
    int thisIsTheTotalNumberOfPurchaseToBeRestored = queue.transactions.count;

    for (SKPaymentTransaction *transaction in queue.transactions)
    {
        NSString *thisIsProductIDThatHasAlreadyBeenPurchased = transaction.payment.productIdentifier;

        if([thisIsProductIDThatHasAlreadyBeenPurchased isEqualToString:product1ID])
        {
            //Enable product1 here
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T06:29:00.507

试试 MKStoreKit 框架[https://github.com/MugunthKumar/MKStoreKit](https://github.com/MugunthKumar/MKStoreKit) 相当不错，维护良好的框架。我有一些应用程序内购买的应用程序。从来没有遇到过这样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T10:19:16.087

@Tibidabo 我不推荐 MKStoreKit，因为它在恢复购买的物品功能方面有一个很大的[漏洞。](https://github.com/MugunthKumar/MKStoreKit/pull/146)

# c++ - 将 std::string 编码/解码为 UTF-16

> ID：11086183
> 
> 赞同：10
> 
> 时间：2012-06-18T15:37:09.200
> 
> 标签：c++, utf-16, stdstring

我必须处理一种文件格式（读取和写入），其中字符串以 UTF-16 编码（每个字符 2 个字节）。由于 ASCII 表中的字符很少在应用程序域中使用，因此我的 C++ 模型类中的所有字符串都存储在 std::string （UTF-8 编码）的实例中。

我正在寻找一个库（在 STL 和 Boost 中搜索但没有运气）或一组 C/C++ 函数来处理这个 std::string <-> UTF-16 转换时从文件格式加载或保存到文件格式（实际上建模作为字节流）包括代理对的生成/识别和所有 Unicode 东西（我承认我不是专家）......

有什么建议么？谢谢！

编辑：忘了说它应该是跨平台的（Win / Mac），不能使用 C++11。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-18T15:46:24.547

C++11 有这个功能：

```
std::string s = u8"Hello, World!";

// #include <codecvt>
std::wstring_convert<std::codecvt<char16_t,char,std::mbstate_t>,char16_t> convert;

std::u16string u16 = convert.from_bytes(s);
std::string u8 = convert.to_bytes(u16); 
```

但是据我所知，到目前为止唯一具有此功能的实现是 libc++。C++11 也有`std::codecvt_utf8_utf16<char16_t>`其​​他一些实现。具体来说，`codecvt_utf8_utf16`适用于 VS 2010 及更高版本，并且由于 Windows 使用 wchar_t 来表示 UTF-16，您可以使用它[在 UTF-8 和 Windows 的 native encoding 之间进行转换](https://stackoverflow.com/a/11040983/365496)。

* * *

> 专业化`codecvt<char16_t, char, mbstate_t>`在 UTF-16 和 UTF-8 编码方案`codecvt<char32_t, char, mbstate_t>`之间转换，专业化在 UTF-32 和 UTF-8 编码方案之间转换。
> 
>                                                                                                                          *— [locale.codecvt] 22.4.1.4/3*

* * *

哦，std::codecvt 特化有受保护的析构函数，而 wstring_convert 需要访问析构函数，所以你真的需要一个适配器：

```
template <class Facet>
class usable_facet : public Facet {
public:
    using Facet::Facet; // inherit constructors
    ~usable_facet() {}

    // workaround for compilers without inheriting constructors:
    // template <class ...Args> usable_facet(Args&& ...args) : Facet(std::forward<Args>(args)...) {}
};

template<typename internT, typename externT, typename stateT> 
using codecvt = usable_facet<std::codecvt<internT, externT, stateT>>;

std::wstring_convert<codecvt<char16_t,char,std::mbstate_t>> convert; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T15:54:00.303

你看过[Boost.Locale](http://www.boost.org/doc/libs/1_49_0/libs/locale/doc/html/index.html)吗？ [本页](http://www.boost.org/doc/libs/1_49_0/libs/locale/doc/html/charset_handling.html)特别介绍了如何进行 UTF 到 UTF 的转换以及如何将其与 IOStreams 集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-09T03:34:38.103

我建议看看：

[将 C++ std::string 转换为 UTF-16-LE 编码字符串](https://stackoverflow.com/questions/52703630/convert-c-stdstring-to-utf-16-le-encoded-string)

并查看 iconv 功能。它是一个 C 库，对 C++11 没有要求。

[在https://github.com/win-iconv/win-iconv](https://github.com/win-iconv/win-iconv)还有一个 Win32 特定的 iconv 库。

# jquery - 如何在ajax请求中间获取页面

> ID：11086187
> 
> 赞同：0
> 
> 时间：2012-06-18T15:37:24.173
> 
> 标签：jquery, ajax

我有一个页面，加载时，使用 jquery 进行 ajax 调用。完成请求大约需要 5-6 秒。我希望其他事件同时发生。我的问题是：如果我在完成 ajax 请求之前导航到任何其他页面（例如单击菜单项：），它将被重定向到主页。这是ajax请求：

```
$.ajax({
  async: true,
  mode: "abort",
  type: 'POST',
  url: '/foo/bar',
  data: params,
  dataType: 'json',
  success: function (data) {
  /* do some */
  }
}); 
```

我认为 Ajax 请求需要一些额外的参数。但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:42:46.140

今天得到了答案。它`global`是 jQuery Ajax 的参数，我们必须设置为`false`. 参考：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:23:29.893

我不认为它是导致问题的 ajax 请求。相反，您的菜单项可能是问题的原因。我认为您的菜单项是通过使用绑定了 jQuery 事件“单击”的一些 div 创建的。例如：

```
<a href="#some_div_id_for_secondary_menu" id="menu_item" href>Primary Menu</a> 
```

在这个 div 上，你必须有一些 jQuery 函数：

```
$('#menu_item').click(function(){
   ...
   ...
}); 
```

如果是这种情况，将 jQuery 片段放在下面提到的代码片段中将解决您的问题。

```
$(document).ready(function(){

)); 
```

# java - 在 Java 中生成和解析文本文件

> ID：11086196
> 
> 赞同：1
> 
> 时间：2012-06-18T15:37:45.337
> 
> 标签：java, file

我正在寻找一个库/框架来从/到 Java 对象中生成/解析 TXT 文件。我正在考虑像 Castor 或 JAXB 之类的东西，其中文件和对象之间的映射可以通过编程方式或使用 XML/注释来定义。TXT 文件不是同质的，没有分隔符（固定位置）。文件的大小不大，因此允许类似 DOM 的处理，不需要流式传输。

例如：

```
TextWriter.write(Collection objects) -> FileOutputStream
TextReader.read(FileInputStream fis) -> Collection 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:40:32.443

我建议你使用[谷歌的协议缓冲区](https://developers.google.com/protocol-buffers/docs/overview)

> 协议缓冲区是一种灵活、高效、自动化的结构化数据序列化机制——想想 XML，但更小、更快、更简单。您只需定义一次数据的结构化方式，然后就可以使用特殊生成的源代码轻松地将结构化数据写入和读取各种数据流，并使用各种语言。您甚至可以在不破坏针对“旧”格式编译的已部署程序的情况下更新您的数据结构。

Protobuf 消息可以二进制或文本格式导出/读取。

其他解决方案将取决于您所说的文本文件：如果 base64 对您来说足够文本，您可以简单地使用[java 标准序列化](http://java.sun.com/developer/technicalArticles/Programming/serialization/)和二进制流的 base64 编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:40:49.290

您可以使用 Jackson 序列化到 JSON 并返回

[http://jackson.codehaus.org/](http://jackson.codehaus.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:40:56.407

只需使用 XML 或 JSON 格式生成和解析它，那里有大量的库可以为您完成所有工作。

# php - mysql 查询帮助 - 需要在重复检查器脚本上减轻 PHP 的负担

> ID：11086198
> 
> 赞同：0
> 
> 时间：2012-06-18T15:37:52.817
> 
> 标签：php, mysql

我有一个脚本，它上传 CSV 并在重复检查器临时表中插入数据库。此时，它执行以下操作：

1）检查自己（临时表）是否有重复项，将它们全部从临时表中删除 2）检查客户表是否有重复项，将它们从临时表中删除

现在我正在使用 php 循环来执行此操作，这似乎将整个事情拖到了停止状态，因为客户表有数十万条记录。我相信，如果我可以将很多内容放入查询中，它可能会使事情变得更好。上传工作正常，这是有问题的代码部分。

```
<?
// look for duplicate account_no in the temp table
$sql_1 = "SELECT account_no,count(*) FROM tempTable GROUP BY account_no";
$result_1 = mysql_query($sql_1) or die("Error: " . mysql_error() . "<br>");
while(list($acct,$numcount) = mysql_fetch_row($result_1)) {
// if there is a duplicate in tempTable, delete them all
 if($numcount>1) {
   $toBeRemoved+=$numcount;
   $sql_delete = "DELETE FROM tempTable WHERE(account_no = '$acct')";
   $result_delete = mysql_query($sql_delete) or die("Error: " . mysql_error() . "<br>");
 }
}

// look for duplicate account_no in the customersTable and delete from tempTable
$sql_2 = "SELECT account_no FROM customersTable";
$result_2 = mysql_query($sql_2) or die("Error: " . mysql_error() . "<br>");
while(list($acct) = mysql_fetch_row($result_2)) {
   $sql_delete = "DELETE FROM tempTable WHERE(account_no = '$acct')";
   $result_delete = mysql_query($sql_delete) or die("Error: " . mysql_error() . "<br>");
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:06:03.960

对于第一个表，您将需要一个具有唯一 ID 的列：

```
DELETE FROM tempTable
USING tempTable, tempTable t2
WHERE tempTable.account_no = t2.account_no
   AND tempTable.id > t2.id 
```

第二张表：

```
DELETE FROM tempTable WHERE account_no IN (SELECT account_no FROM customersTable) 
```

您可能还想检查索引是否存在并正在使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:50:18.537

如果您`UNIQUE`在数据库表上有正确的键，您可以盲目地`INSERT`使用它们`INSERT IGNORE`，因为这将忽略重复键错误并继续插入非重复行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:26:10.803

对此的最终解决方案是创建一个索引`account_no`并使用`JOIN`. 现在它在几秒钟内完成所有事情。感谢大家的帮助！

# c# - 我不想创建一个注册。关键，我想开个注册表。关键——但这里没有规定：

> ID：11086201
> 
> 赞同：0
> 
> 时间：2012-06-18T15:38:02.677
> 
> 标签：c#, .net, internet-explorer

这里的 VB 代码, `http://support.microsoft.com/kb/145679`, 使用

**RegOpenKeyEx、QueryValueEx、SetValueEx**

对注册表项进行更改，它对我有用。

我寻找了用 C# 编写的类似内容，但除了代码示例外，没有找到任何其他站点的独立确认也声称可以工作的代码示例。我找到的代码在这里： `http://msdn.microsoft.com/en-us/library/cc197002(v=vs.85).aspx`

但我不能让它工作。也许是因为我正在尝试的代码已经有一个密钥（代码想用**IERegCreateKeyEx**创建一个）。

它不起作用是因为我要更改的密钥必须先打开吗？如果是这样，以下函数列表中的 open 函数是什么？ `http://msdn.microsoft.com/en-us/library/hh802026(v=vs.85).aspx`

如果是这样，它将如何与上面找到的代码一起使用？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:43:19.710

我想你只是在寻找[`RegistryKey.OpenSubKey`](http://msdn.microsoft.com/en-us/library/wf60cbhz). 坦率地说，目前尚不清楚 Internet Explorer 的来源......

# android - Android loadUrl 无法加载网站

> ID：11086202
> 
> 赞同：1
> 
> 时间：2012-06-18T15:38:03.130
> 
> 标签：android, webview

我的 webview 适用于 Google.com 等网站，但是不会加载特定页面。

简单显示`subscribe to feedburner`（我制作这个网站是为了反映转换后的新闻提要）

此特定网页将在 Iphone UIWebView 中正确显示，但不适用于 Android。

一些代码

```
WebView rss = (WebView) findViewById(R.id.webviewRSS);
rss.loadUrl("www.newmanu.edu/newmannews"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T15:45:10.847

查看“www.newmanu.edu/newmannews”的来源，您必须激活javascript。

来自[http://developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)

```
WebView myWebView = (WebView) findViewById(R.id.webview);
WebSettings webSettings = myWebView.getSettings();
webSettings.setJavaScriptEnabled(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-08T09:32:05.517

添加`http://`或`https://`在 URL 之前。

试试这个。

```
rss.loadUrl("http://www.newmanu.edu/newmannews"); 
```

或者

```
rss.loadUrl("https://www.newmanu.edu/newmannews"); 
```

# jquery - 在 html/jquery/javascript 中选择部分堆叠图像

> ID：11086204
> 
> 赞同：0
> 
> 时间：2012-06-18T15:38:07.067
> 
> 标签：jquery, html, css, image

我有一张英国地图，分为不同的地理区域。我想这样做，以便当用户将鼠标悬停在该部分上时会出现一些文本。

我的问题是，让图像执行此操作的最佳方法是什么。

我尝试过的一种方法是在具有完全透明背景的固定大小的画布内的正确位置为每个区域创建一个 png 文件。这可以将所有区域显示为一张完整的地图。但不允许我在每个图像部分上添加句柄，因为它们相互堆叠，因此只有顶部可用。

我还尝试在顶部放置一个“区域”来尝试定义热点。然而，这也不起作用，因为形状太复杂了......

这是 html/css 标记

```
<script type="text/javascript">
$(document).ready(function() {
        $('#scot').hide();
        $('#wales').hide();

        $('#scotmap').click(function() {
            $('#scot').show();
        });
        $('#img2').click(function() {
            $('#wales').show();
        });
    });
</script>

<div id="wrapper">
    <div id="img1" class="mappiece">
        <img src="Images/map/scotland.png" alt="Scotland">
    </div>
    <div id="img2" class="mappiece">
        <img src="Images/map/nw.png" alt="Scotland">
    </div>
    <div id="img3" class="mappiece">
        <img src="Images/map/se.png" alt="Scotland">
    </div>
    <div id="img4" class="mappiece">
        <img src="Images/map/wales.png" alt="Scotland">
    </div>
    <div id="img5" class="mappiece">
        <img src="Images/map/ireland.png" alt="Scotland">
    </div>
    <div id="img6" class="mappiece">
        <img src="Images/map/yarmouth.png" alt="Scotland">
    </div>
    <div id="img7" class="mappiece">
        <img src="Images/map/york.png" alt="Scotland">
    </div>
    <div id="map" class="mappiece">
        <area id="scotmap" shape="poly" coords="76,9,76,50,87,50,87,92,96,92,96,101,105,101,105,132,120,132,120,122,132,124,137,120,151,124,154,128,160,127,163,129,171,125,173,119,164,92,147,76,164,37,144,7" nohref alt="Scotland Map" />
</div>
</div>
<div id="text">
    <div id="scot">
        <p>Hello Scotland</p>
    </div>
    <div id="wales">
        <p>Hello Wales</p>
    </div>
</div>

body{background-color:#fff;}

#wrapper{
width:237px;
height:258px; 
position: relative;
}

.mappiece {
position: absolute;
width:237px;
height:258px; 
top:0;
left:0;
}

#img1 {
z-index:80;
}
#img2 {
z-index:20;
}
#img3 {
z-index:30;
}
#img4 {
z-index:40;
}
#img5 {
z-index:50;
}
#img6 {
z-index:60;
}
#img7 {
z-index:70;
} 
```

任何正确方向的观点将不胜感激。就鼠标悬停/mouseout/click jquery 事件而言，我可以接受这些。这只是我正在努力解决的图像处理问题。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:47:01.487

你是什​​么意思

> 然而，这也不起作用，因为形状太复杂了......

如果您的意思是它们太复杂而无法编码，您可以使用这样的工具：

[http://www.image-maps.com/](http://www.image-maps.com/)

这将允许您创建多边形区域并获取生成的 html，只需单击以创建所需的形状。

然后，您可以让侦听器关联到这些事件（单击、结束等）来处理文本显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:54:11.170

我想你可以在这里使用 html < area > coords 属性。您可以参考链接[http://www.w3schools.com/TAGS/att_area_coords.asp](http://www.w3schools.com/TAGS/att_area_coords.asp)了解更多详情。

# javascript - jqgrid getChangedCells不返回更改的单元格

> ID：11086206
> 
> 赞同：0
> 
> 时间：2012-06-18T15:38:21.163
> 
> 标签：javascript, jquery, asp.net, jqgrid

我正在尝试从 jqgrid 编辑和保存多行。`getChangedCells`没有返回任何值。

代码如下：

```
<style>
.hlabel{font-weight:bold;font-size:10pt;}
.hdata{font-size:10pt;}
</style>

<script>

//this is a formatter for showing images

function imageFormatter(cellvalue, options, rowObject) {
        return "<img src='" + cellvalue + "'/>";
    };

//this gets called on edit mode to display datepickers.

    function onGridEdit(myRowID) {
        $("#" + myRowID + "_booked").datepicker({ dateFormat: 'dd/mm/yy' });
        $("#" + myRowID + "_vesselarrival").datepicker({ dateFormat: 'dd/mm/yy' });
        $("#" + myRowID + "_vesseldock").datepicker({ dateFormat: 'dd/mm/yy' });
        $("#" + myRowID + "_markdown").datepicker({ dateFormat: 'dd/mm/yy' });
        // this will set focus on the Invested column so the datepicker doesn't fire
        $("#" + myRowID + "_vesselname").get(0).focus();
    }

$(function () {

var lastsel2

//creating the grid

        $("#gditems").jqGrid({
            url: 'handlers/items.ashx?id=' + PID,
            datatype: "xml",
            mtype: "POST",
            colNames: ['Style', 'Altcode2', 'Colour', 'Group', '800', '999', 'Order', 'Received', 'Due', 'B/O', 'Image', 'Out/Full', 'Booked', 'Current',           'Slip', 'Arrival', 'Dock', 'Name', 'Freight', 'RRP', 'Mark Down', 'Sell', 'Cost'],
            colModel: [
{ name: 'code1', index: 'code1', width: '50', sortable: true },
{ name: 'code2', index: 'code2', width: '30', sortable: true },
    { name: 'Due', index: 'Due', sorttype: 'integer', width: '20', sortable: false },
    { name: 'image', index: 'image', width: '30', formatter: imageFormatter, sortable: false },
    { name: 'booked', index: 'booked', width: '30', sortable: false, datefmt: "d/m/Y", editable: true, editrules: { date: true} },
    { name: 'date1', index: 'date1', width: '40' },
    { name: 'slip', index: 'slip', width: '30', sortable: false },
    { name: 'arrival', index: 'arrival', width: '30', sortable: false, datefmt: "d/m/Y", editable: true, editrules: { date: true} },
    { name: 'dock', index: 'dock', width: '30', sortable: false, datefmt: "d/m/Y", editable: true, editrules: { date: true} },
    { name: 'vname', index: 'vname', width: '30', sortable: false, editable: true },
    { name: 'price', index: 'price', sorttype: 'currency', width: '30', formatter: 'currency', formatoptions: { decimalPlaces: 2, prefix: "£"} },
    { name: 'date2', index: 'date2', width: '30', sortable: false, editable: true, datefmt: "d/m/Y", editrules: { date: true} },
{ name: 'price2', index: 'price2', sorttype: 'currency', width: '30', formatter: 'currency', formatoptions: { decimalPlaces: 2, prefix: "£"}}],

 //saving into clientarray

            onSelectRow: function (id) {
                if (id && id !== lastsel2) {
                    jQuery("#gdpoitems").saveRow(lastsel2, false, 'clientArray');
                    jQuery('#gdpoitems').editRow(id, true, onGridEdit, null,   'clientArray');
                    lastsel2 = id;
                }
            },

            editurl: "clientArray",
            cellSubmit: 'clientArray',
            rowNum: 20,
            height: "100%",
            autowidth: true,
            rowList: [20, 30],
            pager: jQuery('#pgitems'),
            viewrecords: true,
            sortorder: "asc",
            caption: "",
            loadonce: false

        });

//adding buttons to the nav bar

        jQuery("#gditems")
        .navGrid('#pgitems', { edit: false, add: false, del: false, search: false }).navButtonAdd('#pgitems', {
            caption: "Save",
            buttonicon: "ui-icon-disk",
            onClickButton: function () {

                $.post("handlers/details.ashx?id=" + PID, { c1: $("#txtc1").val(), c2: $("#txtc2").val(), c3: $("#txtc3").val() }, function (data) {

//trying to get the edited data.

                    var ret = $("#gditems").getChangedCells('all');
                    var ret2 = JSON.stringify(ret);
                    alert(ret);

                    $.ajax({
                        type: "POST",
                        url: "handlers/items.ashx?edit=1&id=" + PID,
                        data: ret2,
                        dataType: "json",
                        contentType: "application/json; charset=utf-8",
                        success: function (response, textStatus, xhr) {
                            alert("success");
                        },
                        error: function (xhr, textStatus, errorThrown) {
                            alert("error");
                        }
                    });

                });
            },
            position: "last"
        })
        .navButtonAdd('#pgitems', {
            caption: "Cancel",
            buttonicon: "ui-icon-cancel",
            onClickButton: function () {
                $("#header").show();
                $("#detail").hide();
                return false;
            },
            position: "last"
        });

</script>
<div>

 <br />

<table id="gditems">
</table>
<div id="pgitems">  </div>
</div> 
```

# linux - rasm 和 ndisasm

> ID：11086208
> 
> 赞同：0
> 
> 时间：2012-06-18T15:38:23.817
> 
> 标签：linux, debugging, nasm

我刚刚尝试使用 disasm 反汇编一些 shellcode，我在反汇编中发现了以下语句。

`00000005 0000 add [bx+si],al`

由于该指令在这种情况下没有特别意义，我尝试使用 rasm 如下：-

`rasm -d "0000"`并且输出是`add [eax], al`. 我很好奇为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:01:46.893

显然，rasm 采用 32 位模式，而 ndisasm 则没有。

```
echo -ne "\x00\x00" | ndisasm -b 32 - 
```

应该给出与 rasm 相同的结果。

# json - 使用 Maven 的带有 JAXB 的 JSON

> ID：11086211
> 
> 赞同：1
> 
> 时间：2012-06-18T15:38:35.270
> 
> 标签：json, jaxb, jersey, jax-rs

我正在使用 Jersey（与 Jetty）和 Maven 来实现 RESTful 服务。我正在尝试使用 JAXB 发送 JSONObject，我遵循了一些教程，例如： http: [//jersey.java.net/nonav/documentation/1.7/user-guide.html#d4e919](http://jersey.java.net/nonav/documentation/1.7/user-guide.html#d4e919)和[http://www.vogella。 com/articles/REST/article.html](http://www.vogella.com/articles/REST/article.html)

所以我只有一个简单的 bean，我想将它作为 JSON 对象发送。我已完成所有步骤，但我无法发送 JSON 对象（尽管我确实正确接收了 XML 格式）。我得到以下异常：*com.sun.jersey.api.MessageException：Java 类 de.vogella.jersey.jaxb.model.Todo 和 Java 类型类 de.vogella.jersey.jaxb.model.Todo 的消息体编写器，并且未找到 MIME 媒体类型 application/json*

我尝试了我发现的不同解决方案，但似乎没有任何效果。我想知道我是否必须缺少任何依赖项，或者我必须实现 ContextResolver（尽管任何教程都将它们用于像这些对象这样的简单对象）。

这些是我拥有的依赖项：

```
 <dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>

    <!-- Jersey -->
    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-server</artifactId>
        <version>1.11</version>
    </dependency>
    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-servlet</artifactId>
        <version>1.11</version>
    </dependency>

    <!-- Json -->
    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-json</artifactId>
        <version>1.11</version>
    </dependency>

    <!-- Jetty -->
    <dependency>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty</artifactId>
        <version>6.1.26</version>
    </dependency>

</dependencies> 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:13:34.170

我找到了缺少的依赖项：

```
 <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>eclipselink</artifactId>
        <version>2.0.0</version>
        <scope>compile</scope>
    </dependency> 
```

而且我还必须添加一个存储库以避免丢失原型错误：

```
<repositories>
    <repository>
        <id>EclipseLink Repo</id>
        <url>http://www.eclipse.org/downloads/download.php?r=1&amp;nf=1&amp;file=/rt/eclipselink/maven.repo</url>
    </repository>
</repositories> 
```

# iphone - 切换标签项时如何在标签栏控制器中使用活动指示器

> ID：11086213
> 
> 赞同：1
> 
> 时间：2012-06-18T15:38:40.370
> 
> 标签：iphone, uitabbarcontroller, nsthread, uiactivityindicatorview

我在我的项目中使用标签栏控制器。在每个类的 viewWillAppear 中，我正在解析一些需要一些时间才能加载的数据。我在 viewWillAppear 中解析数据之前放置了活动指示器，但它不起作用..并且在下面的代码中也尝试过，也不起作用该怎么办？

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:    (UIViewController *)viewController
{
           [NSThread detachNewThreadSelector:@selector(threadStartAnimating) toTarget:self withObject:nil]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:10:41.970

最后我得到了我的问题的解决方案...我在视图中调用解析类将出现使我成为问题的方法..而不是在视图中调用解析类将出现方法我创建了一个用户定义的方法（GetData）。在那个方法中，我调用了解析类。在视图中将出现我通过以下代码调用用户定义的方法（GetData）。

```
 [self performSelector:@selector(GetData) withObject:self afterDelay:1]; 
```

# codeigniter - 如何翻译 CodeIgniter 上的上传错误

> ID：11086214
> 
> 赞同：3
> 
> 时间：2012-06-18T15:38:40.663
> 
> 标签：codeigniter, translation

我正在使用 CodeIgniter 通过表单上传一些文件。我知道如何翻译“常规”表单错误（required、valid_email 等），但我不知道如何处理文件错误（文件不允许、文件太大等）。

我应该使用哪些键

```
$this->form_validation->set_message('KEY', 'TRANSLATION'); 
```

?

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T13:58:20.677

**方法一**

默认情况下，[语言](http://codeigniter.com/user_guide/libraries/language.html)文件通常存储在`system/language`目录中。或者，您可以在文件夹中创建一个名为`upload_lang.php`的`application/language`文件并将它们存储在那里。

```
$lang['upload_userfile_not_set']        = "Unable to find a post variable called userfile.";
$lang['upload_file_exceeds_limit']      = "The uploaded file exceeds the maximum allowed size in your PHP configuration file.";
$lang['upload_file_exceeds_form_limit'] = "The uploaded file exceeds the maximum size allowed by the submission form.";
$lang['upload_file_partial']            = "The file was only partially uploaded.";
$lang['upload_no_temp_directory']       = "The temporary folder is missing.";
$lang['upload_unable_to_write_file']    = "The file could not be written to disk.";
$lang['upload_stopped_by_extension']    = "The file upload was stopped by extension.";
$lang['upload_no_file_selected']        = "You did not select a file to upload.";
$lang['upload_invalid_filetype']        = "The filetype you are attempting to upload is not allowed.";
$lang['upload_invalid_filesize']        = "The file you are attempting to upload is larger than the permitted size.";
$lang['upload_invalid_dimensions']      = "The image you are attempting to upload exceedes the maximum height or width.";
$lang['upload_destination_error']       = "A problem was encountered while attempting to move the uploaded file to the final destination.";
$lang['upload_no_filepath']             = "The upload path does not appear to be valid.";
$lang['upload_no_file_types']           = "You have not specified any allowed file types.";
$lang['upload_bad_filename']            = "The file name you submitted already exists on the server.";
$lang['upload_not_writable']            = "The upload destination folder does not appear to be writable."; 
```

**方法二**

您可以在上传过程后使用[Flashdata 。](http://codeigniter.com/user_guide/libraries/sessions.html)

```
if ($this->upload->do_upload())
{
    $this->session->set_flashdata('success', 'Yep! Upload complete');
    redirect('go_back_home');
}
else
{
    $this->session->set_flashdata('error', 'Uh, upload not complete! The problem is..'); // Manually check
    redirect('go_back_form');
} 
```

您也可以使用`$this->upload->data()`. [这是一个帮助函数](http://codeigniter.com/user_guide/libraries/file_uploading.html)，它返回一个数组，其中包含与您上传的文件相关的所有数据。这是数组原型：

```
Array
(
    [file_name]    => mypic.jpg
    [file_type]    => image/jpeg
    [file_path]    => /path/to/your/upload/
    [full_path]    => /path/to/your/upload/jpg.jpg
    [raw_name]     => mypic
    [orig_name]    => mypic.jpg
    [client_name]  => mypic.jpg
    [file_ext]     => .jpg
    [file_size]    => 22.2
    [is_image]     => 1
    [image_width]  => 800
    [image_height] => 600
    [image_type]   => jpeg
    [image_size_str] => width="800" height="200"
) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-18T17:05:04.730

尝试这个：

```
lang:your_translation_key 
```

一个真实的例子：

```
$this->form_validation->set_rules('name', 'lang:web_name', 'required|trim|xss_clean|min_length[2]|max_length[100]'); 
```

# sql-server-2012 - 创建 SEQUENCE 对象时出现未知对象类型错误

> ID：11086216
> 
> 赞同：5
> 
> 时间：2012-06-18T15:38:56.577
> 
> 标签：sql-server-2012

我正在尝试在 SQL Server 2012 中创建序列，但出现此错误：

> CREATE、DROP 或 ALTER 语句中使用的未知对象类型“SEQUENCE”。

而且我在我的数据库的 Programmability 文件夹下看不到任何名为 Sequences 的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-04T15:27:34.820

运行以下命令时的输出是什么？

```
USE yourDB
GO
SELECT @@version, compatibility_level FROM sys.databases Where DB_NAME() = name 
```

它应该是`110`和`Microsoft SQL Server 2012 - 11.XXXXXX`

# asp.net - 多个文本框的微软翻译？

> ID：11086218
> 
> 赞同：0
> 
> 时间：2012-06-18T15:39:01.693
> 
> 标签：asp.net, vb.net, localization, language-translation, microsoft-translator

使用 Microsoft Bing 翻译器在不同语言的 3 个标签上显示输出时遇到问题。

这是我的代码：

```
Imports System
Imports System.Collections.Generic
Imports System.Web
Imports System.Web.UI
Imports System.Web.UI.WebControls
Imports System.Xml.Linq

Public Class AdmAccessToken
    Public Property access_token() As String
        Get
            Return m_access_token
        End Get
        Set(ByVal value As String)
            m_access_token = value
        End Set
    End Property
    Private m_access_token As String
    Public Property token_type() As String
        Get
            Return m_token_type
        End Get
        Set(ByVal value As String)
            m_token_type = value
        End Set
    End Property
    Private m_token_type As String
    Public Property expires_in() As String
        Get
            Return m_expires_in
        End Get
        Set(ByVal value As String)
            m_expires_in = value
        End Set
    End Property
    Private m_expires_in As String
    Public Property scope() As String
        Get
            Return m_scope
        End Get
        Set(ByVal value As String)
            m_scope = value
        End Set
    End Property
    Private m_scope As String
End Class

Partial Class translated
    Inherits System.Web.UI.Page
    Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs)
        'Button1.Click += New EventHandler(Button1_Click1)
    End Sub

    Protected Sub Button1_Click1(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim clientID As String = "*******"
        Dim clientSecret As String = "************"

        Dim strTranslatorAccessURI As String = "https://datamarket.accesscontrol.windows.net/v2/OAuth2-13"
        Dim strRequestDetails As String = String.Format("grant_type=client_credentials&client_id={0}&client_secret={1}&scope=http://api.microsofttranslator.com", HttpUtility.UrlEncode(clientID), HttpUtility.UrlEncode(clientSecret))

        Dim webRequest As System.Net.WebRequest = System.Net.WebRequest.Create(strTranslatorAccessURI)
        webRequest.ContentType = "application/x-www-form-urlencoded"
        webRequest.Method = "POST"

        Dim bytes As Byte() = System.Text.Encoding.ASCII.GetBytes(strRequestDetails)
        webRequest.ContentLength = bytes.Length
        Using outputStream As System.IO.Stream = webRequest.GetRequestStream()
            outputStream.Write(bytes, 0, bytes.Length)
        End Using
        Dim webResponse As System.Net.WebResponse = webRequest.GetResponse()

        Dim serializer As New System.Runtime.Serialization.Json.DataContractJsonSerializer(GetType(AdmAccessToken))
        Dim token As AdmAccessToken = DirectCast(serializer.ReadObject(webResponse.GetResponseStream()), AdmAccessToken)
        Dim headerValue As String = "Bearer " + token.access_token

        Dim txtToTranslate As String = TextBox1.Text
        Dim uri As String = "http://api.microsofttranslator.com/v2/Http.svc/Translate?text=" + System.Web.HttpUtility.UrlEncode(txtToTranslate) + "&from=en&to=es"
        Dim translationWebRequest As System.Net.WebRequest = System.Net.WebRequest.Create(uri)
        translationWebRequest.Headers.Add("Authorization", headerValue)
        Dim response As System.Net.WebResponse = Nothing
        response = translationWebRequest.GetResponse()
        Dim stream As System.IO.Stream = response.GetResponseStream()
        Dim encode As System.Text.Encoding = System.Text.Encoding.GetEncoding("utf-8")
        Dim translatedStream As New System.IO.StreamReader(stream, encode)
        Dim xTranslation As New System.Xml.XmlDocument()
        xTranslation.LoadXml(translatedStream.ReadToEnd())
        Label1.Text = "Your Translation is: " + xTranslation.InnerText
    End Sub
End Class 
```

谁能给点建议？

我只需要知道如何将文本翻译成 3 种不同的标签语言：标签 1 用于荷兰语，标签 2 用于英语，标签 3 用于印度尼西亚语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T01:04:47.847

您示例中的最后一段代码将英语翻译成西班牙语。（以 Dim txtToTranslate 开头的部分...）

您将不得不使用 3 次（将其放入函数中），一次将目标语言翻译成荷兰语，一次翻译成英语，一次翻译成印度尼西亚语。

指定翻译的部分是这样的：

```
Dim uri As String = "http://api.microsofttranslator.com/v2/Http.svc/Translate?text=" + System.Web.HttpUtility.UrlEncode(txtToTranslate) + "&from=en&to=es" 
```

From=en 表示“来自英语” To=es 表示“来自西班牙语”

因此，只需针对您需要的语言进行修改...

# excel - 让 powerpivot 设置月份名称的查找表

> ID：11086220
> 
> 赞同：0
> 
> 时间：2012-06-18T15:39:03.990
> 
> 标签：excel, pivot-table, excel-2010, lookup-tables, powerpivot

我有一个 MySQL 数据库，我通过 PowerPivot 从那里获取数据到一个表中。

![在此处输入图像描述](../Images/7f7cd8ea738cd552ce5246554896e4d6.png)

然后我从这个表数据创建了一个数据透视表。

![在此处输入图像描述](../Images/45f36abf0691b4cd99be220d137962aa.png)

现在月份列将记录的月份保存为从 1 到 12 的索引。这看起来不顺眼，因此我想用相应的月份名称替换索引。

就像 3 的“三月”。

这里出现了查找表的概念。所以我在“查找表”表中为月份名称设置了一个查找表。

![在此处输入图像描述](../Images/8c73607b960ca689ba4362d90e7ec21f.png)

我点击了“创建相关表”按钮...

![在此处输入图像描述](../Images/e501e5b36c5a044a4ba83f89bb2a53b2.png)

...接下来我看到的是 PowerPivot 窗口中的月份表。我称之为“月份名称”的相应工作表。

![在此处输入图像描述](../Images/ec087bd2966ce8bf7e21285228a2502b.png)

当然缺少的是链接：

![在此处输入图像描述](../Images/6e2c3f5807db1fef750f4f186459fce2.png)

如您所见，我在原始数据表的“月”列与查找表的“索引”列之间建立了链接。

但无论我是否刷新甚至创建一个新的数据透视表...月份仍然显示索引而不是月份名称。

当我回到数据透视表时，我可以选择查找表的列“索引”，这会导致一条黄色消息指出“可能应该重新建立关系”。我点击“这样做”，然后我看到一条消息说无法建立任何关系！？

![在此处输入图像描述](../Images/02a075b92ee3ea30e6a31cee99975109.png)

我不明白？

我的目标是非常常识，我认为是直截了当的。如果您有与使用查找表不同的解决方案......也许使用 DAX（我还不太了解）......那会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:57:37.137

尝试这个。取消选择下面突出显示的两个红色复选框，然后选择绿色复选框。让我知道这是否能解决您的问题

![复选框](../Images/90eb5a388079bd8535dc1c90975159e1.png)

# python - 使用 xhtml2pdf，用实际链接替换超链接

> ID：11086223
> 
> 赞同：1
> 
> 时间：2012-06-18T15:39:24.140
> 
> 标签：python, hyperlink, xhtml2pdf

我想知道是否有人可以指导如何使用 xhtml2pdf 将超链接替换为实际的 html 链接。因此，如果我在我创建的 PDF 中有一个超链接，内容如下：

```
Google 
```

它将替换为：

```
<http://www.google.com> 
```

这是我正在使用的当前简单功能：

```
import os
import sys
import cgi
import cStringIO
import logging

import xhtml2pdf.pisa as pisa

pisa.showLogging()

def testSimple(
    data = open('FILENAME').read(),
    dest="test.pdf":

    pdf = pisa.CreatePDF(
        cStringIO.StringIO(data),
        file(dest, "wb")
        )

    if pdf.err:
        dumpErrors(pdf)
    else:
        pisa.startViewer(dest)

testSimple() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:13:15.920

这是网站打印样式的常见要求，人们无法单击链接但需要键入链接。

它[实际上可以用 CSS 来实现](http://davidwalsh.name/optimize-your-links-for-print-using-css-show-url)：

```
a:link:after, a:visited:after { content:" [" attr(href) "] "; } 
```

不过，这将取决于 xhtmltopdf 的 CSS 实现是否适用于您的情况。

如果您只想将其应用于某些链接，则可以使用[CSS 选择器，例如](https://en.wikibooks.org/wiki/Cascading_Style_Sheets/Selectors)

```
a.printable:link:after,
a.printable:visited:after {
    content:" [" attr(href) "] ";
} 
```

只会影响具有该类的链接：

```
<a href="http://stackoverflow.com/" class="printable">Stack Overflow</a> 
```

# javascript - 在活动上？把它关掉？

> ID：11086227
> 
> 赞同：0
> 
> 时间：2012-06-18T15:39:34.113
> 
> 标签：javascript, jquery

在 keyup 上，我的脚本做了一些事情，我想知道是否可以将其关闭，例如，我只希望它检查一个键。

```
ckEditorNewsArticle.document.on("keyup", function(){ 
```

编辑：

```
ckEditorNewsArticle.document.on('keyup', function(){
                      alert('key up');
                }); 
```

这行得通。但我不能让它只开火一次，用一个。

```
ckEditorNewsArticle.document.one('keyup', function(){
                      alert('one');
                }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T15:41:14.267

您可以使用 (surprise,surprise), 关闭事件`.off()`。

```
ckEditorNewsArticle.document.off('keyup'); 
```

如果您希望处理程序只运行一次，我可以建议使用`.one()`吗？

```
ckEditorNewsArticle.document.one('keyup', function () {
    // do something
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T15:40:53.380

使用`.one()`：

> 将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

文档：[http ://api.jquery.com/one/](http://api.jquery.com/one/)

工作示例：http: [//jsfiddle.net/54ymc/](http://jsfiddle.net/54ymc/)

# ios - 用于 UINavigationController 转换的自定义 UIStoryboardSegue

> ID：11086228
> 
> 赞同：1
> 
> 时间：2012-06-18T15:39:36.543
> 
> 标签：ios, uinavigationcontroller, uistoryboardsegue

我正在尝试使用 Storyboard 和 Segue，并希望从视图控制器中抽象出 segue 的职责。我知道最好的方法是继承 UIStoryboardSegue 类并将其用作自定义 segue；但是......当我尝试将我的 segue 转换为自定义类型时，我只会在属性窗口中收到“不适用”消息。我相信这是因为 View Controller 附加了一个 Navigation 控制器，这决定了 segue。所以我的问题是...

它如何处理导航控制器中的转场转换，我有没有办法覆盖这些方法并使用自定义转场？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T14:22:28.107

我正在回答一个老问题，但我在谷歌搜索中遇到了它。

您需要继承 UINavigationController 并实现`-segueForUnwindingToViewController:fromViewController:identifier:`

有关更多详细信息，请参见此处：[https ://stackoverflow.com/a/16844573/891910](https://stackoverflow.com/a/16844573/891910)

# java - android上的neuroph致命错误

> ID：11086229
> 
> 赞同：0
> 
> 时间：2012-06-18T15:39:37.543
> 
> 标签：java, android, neural-network

这段代码是我的代码的一部分，在 android 上做 OCR。我在我的项目中导入了neuroph.jar。

我在 Netbeans IDE 上编写该代码并在我的移动设备上加载它运行良好。但是当我在 Eclipse IDE 上运行此代码时，会出现以下错误？？？/

```
private void loadData() {
    showDialog(LOADING_DATA_DIALOG);
    // load neural network in separate thread with stack size = 32000
    new Thread(null, loadDataRunnable, "dataLoader", 32000).start();
}

private Runnable loadDataRunnable = new Runnable() {
        public void run() {
            // open neural network
            InputStream is = getResources().openRawResource(R.raw.animals_net);
            // load neural network
            nnet = NeuralNetwork.load(is);
            imageRecognition = (ImageRecognitionPlugin) nnet
                    .getPlugin(ImageRecognitionPlugin.class);
            // dismiss loading dialog
            dismissDialog(LOADING_DATA_DIALOG);
        }
    }; 
```

为什么会出现致命异常？？？

```
06-18 15:51:50.097: E/AndroidRuntime(398): FATAL EXCEPTION: dataLoader
06-18 15:51:50.097: E/AndroidRuntime(398): java.lang.NoClassDefFoundError: org.neuroph.core.NeuralNetwork
06-18 15:51:50.097: E/AndroidRuntime(398):  at neuroph.android.example.NeurophActivity$1.run(NeurophActivity.java:102)
06-18 15:51:50.097: E/AndroidRuntime(398):  at java.lang.Thread.run(Thread.java:1096) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:46:17.397

[从这里](http://neuroph.sourceforge.net/download.html)在您的构建路径中添加neuroph2.6.jar。它将包含所有相关的类文件。

# android - 实现内容提供者：复合主键

> ID：11086235
> 
> 赞同：2
> 
> 时间：2012-06-18T15:40:03.270
> 
> 标签：android, android-contentprovider

我正在实现自己的内容提供程序，因为我要将我的数据库与服务器同步。我的数据存储在 SQLiteDatabase 中，我的一些表有一个复合主键（2 列，每列都是另一个表的外键）。

我刚开始使用 Content Providers，我不太了解它们是如何工作的，但是正如我在谷歌上看到的那样，我需要定义表的名称及其主键：

```
uriMatcher.addURI(PROVIDER_NAME, "books", BOOKS);
uriMatcher.addURI(PROVIDER_NAME, "books/#", BOOK_ID); 
```

据我了解，如果我使用 URI .../books/1，它将使用主键“1”访问 Book。问题是，它是否适用于复合主键？如果是，那么 URI 会是怎样的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:11:28.400

> 我正在实现自己的内容提供程序，因为我要将我的数据库与服务器同步。

您不需要使用 a`ContentProvider`将数据库与服务器同步。

> 问题是，它是否适用于复合主键？

不轻易。引用[文档](http://developer.android.com/guide/topics/providers/content-provider-creating.html)：

> 表数据应始终有一个“主键”列，提供者将其维护为每行的唯一数值。

您可以添加一个单独的列（通常命名为`_id`），将其用`ContentProvider`作主键。如果您使用`AUTOINCREMENT`列，则不必自己分配值，这意味着您可以在几乎所有方面忽略此列，除了`ContentProvider`需要实例的地方`Uri`。

欢迎您尝试避免这种情况，并使用`Uri`看起来像`content://your.authority.goes.here/table/key1/key2`或类似的东西。但是，它不能使用，`CursorAdapter`并且框架中的其他各个地方可能会采用数字 ID 模式。

# c++ - C++ 纯虚函数继承（相同签名）

> ID：11086238
> 
> 赞同：2
> 
> 时间：2012-06-18T15:40:07.043
> 
> 标签：c++, inheritance, method-signature

为什么这不编译？
错误 C2660: 'Concrete::WriteLine' : 函数不接受 1 个参数
我知道如果我添加行：
//使用 AbstractBase::WriteLine;
它有效，但我不明白为什么。

```
#include "iostream" 

class AbstractBase
{
public:
   virtual void WriteLine() = 0;
   virtual void WriteLine( int i )
   {
      std::cout<<"AbstractBase"<<std::endl;
   }
};

class Concrete : public AbstractBase
{
public:
   //using AbstractBase::WriteLine;
   virtual void WriteLine()
   {
      std::cout<<"Concrete Sub Class"<<std::endl;
   }
};

int main()
{
   Concrete ff;
   ff.WriteLine();
   ff.WriteLine(1);
   return 0;
} 
```

有人可以解释一下这里发生了什么。谢谢

* * *

有谁知道这种行为是否是 C++ 标准中定义的行为。它在 C++ 标准中提到过吗？或者它只是一种编译器行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T15:42:31.243

一旦你声明了一个函数：

```
void WriteLine() 
```

在派生类中，它***隐藏***了所有具有相同名称的基类函数。
上述不带参数的函数隐藏了同名带一个参数的函数，由于编译器找不到一个带一个参数的函数，所以会报错。

该行：

```
using AbstractBase::WriteLine; 
```

在派生类中启用（*引入范围*）来自基类的所有隐藏名称，因此采用一个参数的函数可用。

好读：
[什么意思，警告：Derived::f(char) 隐藏 Base::f(double)？](http://www.parashift.com/c++-faq-lite/strange-inheritance.html#faq-23.9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T15:42:04.513

**方法隐藏**发生。基类中的另一个函数被同名函数隐藏，尽管它具有不同的签名。

要解决此问题，您可以使用`using`指令：

```
using AbstractBase::WriteLine; 
```

在派生类中：

```
class Concrete : public AbstractBase
{
public:
   using AbstractBase::WriteLine;
   //using AbstractBase::WriteLine;
   virtual void WriteLine()
   {
      std::cout<<"Concrete Sub Class"<<std::endl;
   }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:42:14.393

在派生类中声明函数会隐藏基类中具有相同名称的所有函数 - 它们不被视为派生类函数的潜在重载。

添加`using`声明将隐藏函数带回派生类的范围，并且它们与派生类函数一起被视为潜在的重载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T15:42:35.483

问题是`Concrete::WriteLine`隐藏所有`AbstractBase::WriteLines`。你可以加

```
using AbstractBase::WriteLine; 
```

到你的派生类。

# jsf - 如何使两个 JSF 组件使用侦听器和事件进行通信

> ID：11086241
> 
> 赞同：1
> 
> 时间：2012-06-18T15:40:22.770
> 
> 标签：jsf, broadcast, custom-component, event-listener

我有两个应该进行通信的 jsf**自定义组件。**这些组件是 DataTable 和 pager。我正在寻找在更改 DataTable 的模型时，会触发一个事件以允许更新寻呼机，反之亦然。并保持他们的独立性。是否可以使用监听器和事件来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:16:28.303

是的，将寻呼机作为侦听器的属性传递，或者只是让寻呼机本身实现`FacesListener`。

# php - 没有 MYSQL 文件功能的 CSV 导出

> ID：11086242
> 
> 赞同：0
> 
> 时间：2012-06-18T15:40:23.097
> 
> 标签：php, mysql, csv, select-into-outfile

我想导出为 CSV 格式，但我使用的互惠主机已停用 mysql 中的 FILE 功能。

我做了一个简单的 SELECT，然后用 PHP 进行了 fopen 和 fwrite。

问题是在字段中有回车或双引号。

如何保留它们并构建正确的 csv 文件？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:50:20.473

您可以使用 header() 下载 file.csv

在标头函数之后输出您想要的所有内容（基于 csv 格式），例如：

```
 $filename = "output";
    header('Content-Type: text/csv');
    header('Content-disposition: attachment;'.$filename.'=.csv');

    $separate = ","; //or ;
    $endline = "\r\n";
    foreach($data as $key => $item)
    {
        echo $key.$separate.$value.$endline;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:55:15.307

构建最佳 CSV。你可以按照以下方式进行。

```
 $filename ='data.csv';
   $csv_terminated = "\n";
   $csv_separator = ",";
   $csv_enclosed = '"';
   $csv_escaped = "\\";

$results  = array('1','2','3');// value

    $schema_insert = '';

    $header = array('a','b','c');// header

    for ($i = 0; $i< count($header); $i++)
    {
        $l = $csv_enclosed . str_replace($csv_enclosed, $csv_escaped . $csv_enclosed,
            stripslashes($header[$i])) . $csv_enclosed;
        $schema_insert .= $l;
        $schema_insert .= $csv_separator;
    } // end for

    $out = trim(substr($schema_insert, 0, -1));
    $out .= $csv_terminated;

    // Format the data
    for($i=0;$i<count($results);$i++)
    {
        $row = $results[$i];
        $schema_insert = '';
        for ($j = 0; $j < count($header); $j++)
        {
            if ($row[$j] == '0' || $row[$j] != '')
            {

                if ($csv_enclosed == '')
                {
                    $schema_insert .= $row[$j];
                } else
                {
                    $schema_insert .= $csv_enclosed .
                    str_replace($csv_enclosed, $csv_escaped . $csv_enclosed, $row[$j]) . $csv_enclosed;
                }
            } else
            {
                $schema_insert .= 'NULL';
            }

            if ($j < count($header) - 1)
            {
                $schema_insert .= $csv_separator;
            }
        } // end for

        $out .= $schema_insert;
        $out .= $csv_terminated;
    } // end while

    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Content-Length: " . strlen($out));
    // Output to browser with appropriate mime type, you choose <img src="http://thetechnofreak.com/wp-includes/images/smilies/icon_wink.gif" alt=";)" class="wp-smiley">
    header("Content-type: text/x-csv");
    //header("Content-type: text/csv");
    //header("Content-type: application/csv");
    header("Content-Disposition: attachment; filename=$filename");
    echo $out; 
```

请注意，+ 当您将包含 html 代码的描述括起来时，您应该使用双引号。+ 空值 --> 更改为空文本或零值

它们将使您的 CSV 更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:10:20.037

```
protected function getCsv( $fileName, array $data )
    {
        // alot of headers here, make force download work on IE8 over SSL
        header("Pragma: public");
        header("Expires: 0");
        header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
        header("Cache-Control: private",false);
        header("Content-Type: application/octet-stream");
        header('Content-Disposition: attachment; filename="'.$fileName.'"');
        header("Content-Transfer-Encoding: binary"); 

        // Joe Green says:
        // based on http://www.php.net/manual/en/function.fputcsv.php#100033

        $outStream = fopen("php://output", "r+");
        function __getCsv( &$vals, $key, $filehandler ) {
            fputcsv( $filehandler, $vals, ',', '"');
        }
        array_walk( $data, '__getCsv', $outStream );
        fclose($outStream);
    } 
```

fputcsv 是你的朋友。此外，我必须改进这个功能才能达到这一点。IE 需要其中一些标头来强制 csv 作为 csv 打开，尤其是通过 SSL。我似乎记得它与 IE8 在第一个实例中无法识别“文本/csv”内容类型以及第二个实例中围绕 SSL 下载的一些安全功能有关。

# performance - 在powershell中，ps processname* | 有什么区别？杀死并杀死 -p 进程名*？

> ID：11086243
> 
> 赞同：1
> 
> 时间：2012-06-18T15:40:24.473
> 
> 标签：performance, loops, powershell, kill

在powershell中，是否有区别：

```
ps theProcessName* | kill 
```

和

```
kill -processname theProcessName* 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:45:01.563

在第一个示例中，您使用 PowerShell 管道将`System.Diagnostics.Process`对象（从`Get-Process`）通过管道传输到`Stop-Process`cmdlet。

在第二个示例中，您直接调用`Stop-Process`cmdlet，并使用*命名参数*传入字符串以匹配进程名称。

# java - 将 Junit 与弹簧一起使用

> ID：11086244
> 
> 赞同：2
> 
> 时间：2012-06-18T15:40:25.457
> 
> 标签：java, spring, junit

我正在尝试使用 spring 设置一个 junit，并且我正在尝试使用 spring 的依赖注入来填充测试类。我想知道这是否是我什至应该尝试的事情？我认为我看到的是 spring 正在实例化测试类并执行 DI，但随后 JUnit 正在创建它自己的实例，该实例尚未执行 DI 并且测试失败。我正在使用 JUnit 4.x 和 spring 3.1.1。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T15:43:19.763

您可以使用 spring 将依赖项注入到您的测试中，从而使其成为集成测试。像这样注释

```
@RunWith(SpringJUnit4ClassRunner.class)
@Transactional
@ContextConfiguration(locations = "/applicationContext-TEST.xml")
public class MyTest {} 
```

但是最好只将您的 spring 托管类测试为 pojo，并在适当的情况下使用[模拟对象](http://code.google.com/p/mockito/)。

例如，很多控制器方法都有一个由 Spring 在运行时注入的模型。但是要对它们进行单元测试，我只需传入一个 HashMap 实例。我的服务层类可以传入一个模拟的dao，这很容易，因为我设计了一个接口并使用了setter注入......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:04:09.327

使用 jUnit，每个测试都应该被隔离，在测试覆盖范围之外没有依赖关系。有几个测试框架可以在 Spring 中提供模拟 bean 实例化。

有一篇关于 Stubs 和 Mocks 的优秀 Martin Fowler[文章](http://martinfowler.com/articles/mocksArentStubs.html)开始。

Mockito 与 PowerMock 结合使用，可以帮助您测试 spring 组件、服务和控制器。

Mockito 介绍：[https](https://code.google.com/p/mockito/)
://code.google.com/p/mockito/ PowerMock 介绍：[http ://code.google.com/p/powermock/](http://code.google.com/p/powermock/)

我知道这将花费时间来研究、学习和实施，但这对于使用 Dependency Injected bean 编写 jUnit 测试非常有益。

# android - 视图的“克隆”动画

> ID：11086248
> 
> 赞同：0
> 
> 时间：2012-06-18T15:40:42.100
> 
> 标签：android

我正在寻找一种方法来产生 UI 组件的“克隆”动画效果。
看起来像`TranslateAnimation`在同一个视图上同时运行多个的东西，而视图是为每个动画运行复制的，导致类似于这张图片的东西：

![克隆效应](../Images/3f2f66b01db6270daf60b7613050c973.png)

这必须至少在 API8 (2.2) 上运行

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:15:53.673

生成的克隆视图是由真实的克隆对象支持的，还是只是一个演示文稿？

如果可以真正克隆视图，您可以这样做，然后在原始视图和克隆视图上运行带有两个平移动画的 AnimationSet。

# jquery - jQuery 对话框选项不会动态调整大小

> ID：11086249
> 
> 赞同：0
> 
> 时间：2012-06-18T15:40:43.820
> 
> 标签：jquery, jquery-ui

我想在打开对话框之前动态调整它的大小，但这不起作用。

**编辑：** 我发现我在错误的地方编辑代码的问题。这按预期工作：

```
 $("#thxboxMd").dialog("option", { height: 400 });
   $("#thxboxMd").dialog("open"); 
```

休息：

```
$("#thxboxMd").dialog({
                    resizable: false,
                    height: 200,
                    width: 400,
                    autoOpen: false,
                    modal: true,
                    buttons: {
                        "close": function () {
                            $(this).dialog("close");
                        }
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:45:25.330

尝试：

```
$("#thxboxMd").dialog("option", height, 400); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:49:18.710

尝试：

```
$("#thxboxMd").dialog("option", "height", 400); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/b7ZrG/)**。

# android - 安卓内存泄漏

> ID：11086250
> 
> 赞同：0
> 
> 时间：2012-06-18T15:40:44.583
> 
> 标签：android, memory-leaks

我不明白我的应用程序中发生了什么。我的应用程序结构：

```
EventListActivity (List of events)
 EventDetailActivity (Detail of selected event and button to open list of persons)
  EventPersonsListActiviy (List of persons who connected to the event
   EventPersonDetialActivity  (Detail of selected person) 
```

当我启动应用程序时，我得到了这个 meminfo：

```
 native   dalvik    other  total      limit     bitmap  nativeBitmap
allocated:     5257     6620      N/A    11877      N/A       28      661 
```

在我穿过树之后，当我在 EventPersonDetialActivity 中时，我得到了这个

```
 native  dalvik    other  total      limit     bitmap  nativeBitmap
allocated:     5690     6740      N/A    12430      N/A       149      661 
```

但是当我再次打开菜单中的 EventListActivity 时。但是在开始活动之前，我关闭了所有最​​新的活动（我有一个 HistoryManager，其中包含一个列表，当我打开一个活动时，我将其放入列表中，在重新开始主要活动之前，我调用了 finish() 方法来活动和之后清除列表。）并且在 onDestroy 的所有活动中，将所有变量设置为 null 并调用 System.gc()。但我得到了这个：

```
 native  dalvik    other  total      limit     bitmap  nativeBitmap
allocated:     5663    7193      N/A    12856      N/A       135      661 
```

为什么第三种情况的总内存使用量比第一种情况大？而内存中只有EventListActivity？如果我经常回复这个方法，我终于内存不足:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:16:02.533

这样做可以弄清楚：

1.  转到您的 EventListActivity 几次并检查内存使用情况，直到它爬升（但在它崩溃之前）。
2.  进行堆转储
3.  使用 jhat 检查堆转储
4.  查看所有类的所有实例（系统除外）
5.  在列表的顶部，您应该看到每个活动和其他相关类的实例数。这应该可以帮助您确定哪些对象没有被正确释放。
6.  找出哪些对象正在引用您认为应该由 GC 收集的对象（通过“引用此对象的对象”的链接）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:43:50.117

不要全部 System.gc() 手动，它严重隐藏了 dalvik VM 的性能。让 Android 完成它的工作。

您是否在多个地方保留对活动之间共享的任何对象的引用？

# database - SQL Lite，2.8.6 不从表中删除条目

> ID：11086252
> 
> 赞同：1
> 
> 时间：2012-06-18T15:40:45.063
> 
> 标签：database, sqlite

我在使用 SQL Lite 时遇到了这个问题，我的应用程序成功地更新了数据库，一切都很顺利。然后我使用 SqlShell 访问我的 SQLLite DB。我发出以下命令。

1.  从表 1 中删除
2.  从表 2 中删除
3.  从表 3 中删除

当我从 Table1 发出 Select * 时。我没有从 SQLShell 中返回任何结果。这是在发出删除语句后预期的。**但是，我的数据库文件的大小实际上并没有像我预期的那样减小。**

但是，当我的应用程序查询表时，它会找到结果。我认为我删除的所有结果。

我知道我正在访问正确的数据库，因为如果我用我的应用程序正在访问的数据库的完全空版本替换现有数据库。然后我的应用程序报告数据库中没有条目。

就好像我的更改没有被提交或者它们**被标记为删除，因此没有显示**

任何人都可以对此有所了解，我们将不胜感激。

# xml - COBOL XML PARSE 相当于 innerXML？

> ID：11086253
> 
> 赞同：1
> 
> 时间：2012-06-18T15:40:47.050
> 
> 标签：xml, cobol

我正在尝试访问下面示例 XML 中的整个“< mynode >”节点，包括开始和结束标记。我需要将该 XML 片段作为 XML 存储在数据库中。

```
<a>
  <mynode >
   <c>Content</c>
   <c>More content</c>
  </mynode >
</a> 
```

我可以访问 XML PARSE 函数，这就是我访问节点值的方式，但我不确定如何使用它来访问整个节点。

想到的一个选项是记录元素开始和元素结束 XML-TEXT = 'b' 的文档位置，然后获取文档的该部分，但这似乎不优雅。有没有更好的办法？

编辑：我计算我读入文档的字符数，并在到达“< mynode >”节点的开始和结束时存储该值。

然后我可以使用

```
STRING MY-DOCUMENT(MYNODE-START-POSE, (MYNODE-NODE-FINISH - MYNODE-NODE-START)) 
     DELIMITED BY SIZE
     INTO MY-AREA 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T01:51:31.900

如果您使用的是[IBM 的 Enterprise COBOL](http://pic.dhe.ibm.com/infocenter/pdthelp/v1r1/index.jsp?topic=/com.ibm.entcobol.doc_4.2/single_template_nobrand.htm)，那么您可以使用[XML PARSE](http://pic.dhe.ibm.com/infocenter/pdthelp/v1r1/index.jsp?topic=/com.ibm.entcobol.doc_4.2/PGandLR/ref/rlpsxmlp.htm)语句。解析器生成事件并填充可用于[控制代码执行的](http://pic.dhe.ibm.com/infocenter/pdthelp/v1r1/topic/com.ibm.entcobol.doc_4.2/PGandLR/ref/rlpsxmlp.htm#PSXFLO)[特殊寄存器](http://pic.dhe.ibm.com/infocenter/pdthelp/v1r1/index.jsp?topic=/com.ibm.entcobol.doc_4.2/PGandLR/ref/rllanreg.htm)。 *（由于某种原因，最后一个链接无法正常工作，它应该带您到该页面上的“控制流”标签）*

 *如果您需要“修剪”树结构的某些部分，包括标记和数据，那么您可能需要解析原始结构，填充结构，并使用[XML GENERATE](http://pic.dhe.ibm.com/infocenter/pdthelp/v1r1/index.jsp?topic=/com.ibm.entcobol.doc_4.2/PGandLR/ref/rlpsxmlg.htm)来获取所需的 XML 数据流。解析器似乎不会告诉您每个事件发生在原始 XML 数据流中的位置，至少似乎没有一个特殊的寄存器填充该值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T20:58:18.747

COBOL XML PARSE 不提供位置信息 (AFAIK)。确定给定事件发生的偏移位置是不可能的。对感兴趣的标签进行文本搜索必然会导致大量问题 - 甚至不要考虑去那里......

我能想到的下一个可能性是在解析原始文档期间构造感兴趣的 XML 片段文档。片段完成后，将其写入您的 XML 数据库。

下面的示例程序说明了您可以如何去做。该程序采用 XML-SOURCE 文档并对其进行解析以查找感兴趣的事件（例如，“b”标签）。当找到这样的标签时，它开始构建一个片段文档（XML-FRAGMENT），直到找到结束标签。此时片段被输出并开始搜索下一个片段。

```
 IDENTIFICATION DIVISION.                   
   PROGRAM-ID. XMLTEST.                       
   DATA DIVISION.                             
   WORKING-STORAGE SECTION.

   77  XL                   PIC S9(4) BINARY. 

   01\.                      PIC X.            
       88 XML-EXTRACT-NO    VALUE 'N'.        
       88 XML-EXTRACT-YES   VALUE 'Y'.        

   01\.                                        
       05 XML-FRAGMENT      PIC X(8000).      
       05 XML-CHARS         PIC S9(4) BINARY. 

   01  XML-SOURCE           PIC X(8000). 

   PROCEDURE DIVISION.                                         
   MAINLINE SECTION.   

       MOVE '<a><b><c>Content</c><c>More content</c></b></a>'
         TO XML-SOURCE                                         

       SET XML-EXTRACT-NO TO TRUE                              
       XML PARSE XML-SOURCE                                    
           PROCESSING PROCEDURE XTRACT                         
       GOBACK                                                  
       .                                                       
   XTRACT SECTION.                                             
       COMPUTE XL = FUNCTION LENGTH (XML-TEXT)                 
       EVALUATE XML-EVENT                                      
       WHEN 'START-OF-ELEMENT'
  *
  *       New XML element: Ignore it, add to existing fragment
  *       or start a new fragment...
  *                                                                 
          IF XML-TEXT(1:XL) = 'b' OR XML-EXTRACT-YES           
             IF XML-EXTRACT-NO                                 
                MOVE ZERO TO XML-CHARS                         
                SET XML-EXTRACT-YES TO TRUE                    
             END-IF                                            
             STRING '<' XML-TEXT(1:XL) '>' DELIMITED BY SIZE        
               INTO XML-FRAGMENT(XML-CHARS + 1 : XL + 2)            
             COMPUTE XML-CHARS = XML-CHARS + XL + 2                 
          END-IF                                                    
       WHEN 'END-OF-ELEMENT'
  *
  *       End of event: Add to XML fragment, ignore fragment or
  *                     output complete fragment and start search
  *                     for a new one...
  *                                        
          IF XML-EXTRACT-YES                                        
             STRING '</' XML-TEXT(1:XL) '>' DELIMITED BY SIZE       
               INTO XML-FRAGMENT(XML-CHARS + 1 : XL + 3)            
             COMPUTE XML-CHARS = XML-CHARS + XL + 3                 
          END-IF

          IF XML-TEXT(1:XL) = 'b'                                   
  *                                                                 
  *          End of fragment write to database (or whatever)               
  *                                                                 
             DISPLAY XML-FRAGMENT(1:XML-CHARS) 
             SET XML-EXTRACT-NO TO TRUE        
          END-IF
       WHEN 'CONTENT-CHARACTERS'
  *
  *       Add event data to fragment or just ignore it...
  *
  *       Depening on the structure of your XML docuemnt you may
  *       need to react to addtional EVENTS such as CDATA to ensure
  *       proper tag construction.
  *
          IF XML-EXTRACT-YES                                        
             MOVE XML-TEXT(1:XL) TO XML-FRAGMENT(XML-CHARS + 1 : XL)
             COMPUTE XML-CHARS = XML-CHARS + XL                     
          END-IF                                                    

       END-EVALUATE                            
       . 
```

此程序示例的输出为：

```
 <b><c>Content</c><c>More content</c></b> 
```

这不是您可能一直在寻找的单线解决方案，但您必须记住这是 COBOL！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T18:25:04.380

在任何语言中，XML 解析都有点棘手。我建议为您的特定 COBOL 环境找到一个解析器库。 [本文](http://www.ibmsystemsmag.com/mainframe/tipstechniques/applicationdevelopment/processing_XML_documents/)简要概述了 XML 解析领域。考虑一下您是否需要传递 XML 文件一次，在执行过程中提取所需的信息（SAX 方法适合您）或者是否要将 XML 加载到内存中并遍历其结构（您希望访问 DOM [文档对象模型]）。

事实上，您的 COBOL 方言可能[内置了 XML 支持](http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/index.jsp?topic=/com.ibm.aix.cbl.doc/tpxml01.htm)（我的旧 COBOL 85 编译器没有），并带有`XML PARSE`语句。

这里有一些[来自 Micro Focus 世界的信息](http://supportline.microfocus.com/documentation/books/nx50ws03/dxxmlo.htm)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-19T14:59:39.960

我现在的回复可能有点晚了，但我们使用[Redvers COBOL XML 接口](http://www.redversconsulting.com/cobol_xml_interface.php)解析器，它具有“ASIS”功能，可将节点/父元素的全部内容读取到单个 COBOL 副本字段中 - 包含任何 XML 标记 -向上和从属元素。它是一个 DOM 样式解析器。生成器模块可以做相反的事情，使您能够将预先准备好的 XML 加载到实例文档中。*

# python - matplotlib如何制作下标和特殊字符？

> ID：11086256
> 
> 赞同：3
> 
> 时间：2012-06-18T15:40:50.120
> 
> 标签：python, matplotlib

我想为使用 matplotlib 绘制的绘图的轴标签创建一个下标。我有以下脚本快照：

```
import matplotlib.pylab as plt
plt.ylabel(r'$A^{2}$') 
```

我有两个问题：

1.  在剧情中，下标“2”似乎占据了整个字长而不是一半，这让剧情有点诡异。如何使下标更小（大小和长度跨度）？

2.  如何显示“埃”（10^-10m的长度单位）而不是A？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T15:48:12.003

1.  您使用的是什么版本的 matplotlib？在我的版本中，上标似乎很好（对我来说）。我使用 python 2.6.5 和 matplotlib 1.1.0

2.  使用 \AA 表示 angstram --> plt.ylabel("$\AA$")。不过圈子有点小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T20:26:02.480

如果您可以使用它，请尝试使用 TeX 来呈现您的文本。

```
from matplotlib import rc
rc('text', usetex=True)

#the rest of your plotting code here 
```

这应该使您的字体和文本看起来好多了。

有关 matplotlib 的 TeX 渲染功能的更多详细信息，请查看此处： http: [//matplotlib.sourceforge.net/users/usetex.html](http://matplotlib.sourceforge.net/users/usetex.html)

# javascript - 打印到打印机时隐藏/显示 div

> ID：11086260
> 
> 赞同：4
> 
> 时间：2012-06-18T15:40:57.013
> 
> 标签：javascript, jquery, printing

是否可以单击页面上的按钮/图像/链接并包含/排除其他元素的打印？（在实际打印机上）我想让用户选择要打印的元素。这对 jQuery 的 Javascript 可行吗？

编辑以便更好地理解：我想让用户选择他想要打印的页面部分，方法是在每个 div 旁边添加一个打印这个/不打印这个按钮，覆盖我在我设置的默认设置print.css 文件。

更新：在 Richard Neil Ilagan 的建议之后，我尝试了以下方法，我觉得我很接近但无法确定。有什么建议么？

```
<style type="text/css">
@media print { 
    .no-print { display:none; } 
}
</style>

<script>
$(document).ready(function() {
    $('.dontPrint').click(function() { $('maybe').addClass('no-print'); });
});
</script>

<img class="dontPrint" src="images/cancel.png" title="Dont print bla bla" /></a>
<div id="maybe">bla bla</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T15:42:35.373

是的。您可以使用 CSS 的`@media print`媒体类型选择器来做到这一点。示例（打印时隐藏所有输入）：

```
@media print {
    input {
        display: none;
    }
} 
```

作为一种设计模式，您可以将打印媒体选择器与其余样式表结合起来以实现切换效果。

HTML：

```
<div class="for-screen">
    <input type="submit" value="Shown when not printing">
</div>
<div class="for-print">
    <p>Shown instead when printing</p>
</div> 
```

CSS：

```
.for-screen {display: block;}
.for-print {display: none;}

@media print {
    .for-screen {display: none;}
    .for-print {display: block;}
} 
```

关于此事的更多内容：

*   CSS2 标准的[媒体类型](http://www.w3.org/TR/CSS2/media.html)
*   [CSS 设计：要打印](http://www.alistapart.com/articles/goingtoprint/)(alistapart.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:44:41.563

你应该用css设置它。

**媒体=“打印”**

尝试这样的事情：

```
<link rel="stylesheet" type="text/css" media="print" href="print.css" /> 
```

# actionscript-3 - 在 GestureWorks TouchSprite 中实现 stageWebView

> ID：11086261
> 
> 赞同：0
> 
> 时间：2012-06-18T15:40:57.123
> 
> 标签：actionscript-3, apache-flex

我正在尝试在 GestureWorks AIR 应用程序中创建一个组件，该应用程序在 touchsprite 容器中呈现 stageWebView。鉴于 stageWebView 不是显示对象，这可能吗？

下面是代码：

包视图{

```
import com.gestureworks.core.GestureWorks;
import com.gestureworks.core.TouchSprite;
import com.gestureworks.events.GWGestureEvent;
import com.modestmaps.Map;
import com.modestmaps.events.MapEvent;

import flash.display.Bitmap;
import flash.display.BitmapData;
import flash.display.DisplayObject;
import flash.display.Loader;
import flash.display.MovieClip;
import flash.display.Sprite;
import flash.display.Stage;
import flash.display.StageScaleMode;
import flash.events.Event;
import flash.events.EventDispatcher;
import flash.geom.Rectangle;
import flash.media.StageWebView;
import flash.net.URLLoader;
import flash.net.URLRequest;

public class webView extends TouchSprite
{

    private var urlAddress:String = "http://google.com";

    public var stageWebView:StageWebView = new StageWebView();

    private var ts:TouchSprite;

    public function webView()
    {
        super();
        init();

    }

    private function init():void 
    {

        ts = new TouchSprite();
        ts.width = 500;
        ts.height = 500;
        ts.x = 200;
        ts.y = 100;
        ts.rotation = 45;
        ts.scaleX = 0.5;
        ts.scaleY = 0.5;

        ts.gestureEvents = true;
        ts.disableAffineTransform = false;
        ts.gestureList = { "n-drag":true, "n-scale":true, "n-rotate":true };
        ts.addEventListener(GWGestureEvent.DRAG, gestureDragHandler);
        ts.addEventListener(GWGestureEvent.ROTATE, gestureRotateHandler);
        ts.addEventListener(GWGestureEvent.SCALE, gestureScaleHandler);

        if(StageWebView.isSupported == true)
        {

            stageWebView.stage = this.stage;
            stageWebView.viewPort = new Rectangle(0,0, 500, 500);
            //stageWebView.addEventListener(LocationChangeEvent.LOCATION_CHANGE, locationChangedHandler);
            //stage.scaleMode = StageScaleMode.EXACT_FIT;
            //this.stage.addEventListener(Event.RESIZE, resizeEvent);

            getURL();
        }
        else
        {
            urlAddress = "StageWebView not supported";
        }
        ts.addChild(stageWebView as DisplayObject);
        addChild(ts);
    }

    protected function getURL():void
    {
        stageWebView.loadURL(urlAddress);

        //stageWebView.addEventListener(Event.COMPLETE,handleLoad);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:18:16.607

不可以。由于`StageWebView`不是显示对象，因此不能将其添加到另一个对象中进行自动管理。

您可以从 sprite 手动管理它——当 sprite 显示时，显示 web 视图，当 sprite 调整大小时，调整 web 视图大小等。

如果您的 web 视图在渲染后覆盖了整个视图`TouchSprite`，我相当肯定您的精灵不会收到手势事件——这些将由本机组件处理。

# java - 了解 LongWritable

> ID：11086263
> 
> 赞同：12
> 
> 时间：2012-06-18T15:41:07.247
> 
> 标签：java, hadoop, mapreduce

如果这是一个愚蠢的问题，我很抱歉，但我无法通过 Google 搜索找到答案。我怎么能理解`LongWritable`类型？它是什么？任何人都可以链接到架构或其他有用的页面。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-18T15:51:51.313

Hadoop 需要能够通过对象（通常是 IO 流）将数据输入`DataInput`和输出 Java 类型。`DataOutput`Writable 类通过实现两个方法`write(DataOuput) 和 readFields(DataInput) 来做到这一点。

具体来说`LongWritable`是一个`Writable`包装 java long 的类。

大多数时候（尤其是刚开始），您可以在精神上替换`LongWritable`->`Long`即它只是一个数字。如果您开始定义自己的数据类型，您将开始熟悉实现可写接口：

看起来像：

```
public interface Writable {

       public void write(DataOutput out) throws IOException;

       public void readFields(DataInput in) throws IOException;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-09T17:02:52.727

Mapper 类是泛型类型，具有四个形式类型参数，分别指定了 map 函数的输入键、输入值、输出键和输出值类型。

```
public class MaxTemperatureMapper
    extends Mapper<LongWritable, Text, Text, IntWritable> {
     @Override
    public void map(LongWritable key, Text value, Context context)
                                throws IOException, InterruptedException {

    }
    @Override
    public void reduce(Text key, Iterable<IntWritable> values, Context context)
    throws IOException, InterruptedException 
    {
    }

} 
```

对于代码示例，输入键是一个长整数偏移量，输入值是一行文本。输出键为整数，输出值为整数。Hadoop 没有使用内置的 Java 类型，而是提供了自己的一组基本类型，这些类型针对网络序列化进行了优化。这些可以在 org.apache.hadoop.io 包中找到。

这里我们使用LongWritable，它对应一个Java Long、Text（如Java String）和IntWritable（如Java Integer）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-21T15:05:51.883

从 Apache 文档[页面](https://hadoop.apache.org/docs/r2.6.0/api/org/apache/hadoop/io/package-summary.html)，

`Writable`被描述为：

> 基于 DataInput 和 DataOutput 实现简单、高效的序列化协议的可序列化对象。

`LongWritable`是长的 WritableComparable。

**可写需求：**

在 Hadoop 中，进程间通信是通过远程过程调用 (RPC) 构建的。RPC 协议使用序列化将消息在发送方呈现为二进制流，并将在接收方从二进制流反序列化为原始消息。

Java 序列化在性能和效率方面有很多缺点。Java 序列化比在内存存储中使用要慢得多，并且往往会显着扩展对象的大小。Java 序列化也会产生很多垃圾。

参考这两个帖子：

[dzone](https://dzone.com/articles/avoiding-java-serialization)文章

[https://softwareengineering.stackexchange.com/questions/191269/java-serialization-advantages-and-disadvantages-use-or-avoid](https://softwareengineering.stackexchange.com/questions/191269/java-serialization-advantages-and-disadvantages-use-or-avoid)

为了 Hadoop 的有效性，应该优化序列化/反序列化过程，因为集群中的节点之间发生了大量的远程调用。`So the serialization format should be fast, compact, extensible and interoperable`. 由于这个原因，Hadoop 框架提出了自己的 IO 类来替换 Java 原始数据类型。例如`IntWritbale`为`int`,`LongWritable`为`long`,`Text`为`String`等

如果您参考“Hadoop 权威指南”第四版，您可以获得更多详细信息。

# android - 如何找到Yzi平板的USB驱动程序？

> ID：11086265
> 
> 赞同：1
> 
> 时间：2012-06-18T15:41:14.487
> 
> 标签：android, driver

我最近购买了运行 Android 4.0.3 的平板电脑“Yzi”。我想在 Eclipse 的调试模式下使用它。联系厂商技术支持（eviGroup）后，回复称没有为这款平板开发用于调试模式的usb驱动，但平板只被识别为大容量存储设备。我想知道是否有任何方法可以找到在调试模式下识别平板电脑的驱动程序。

谢谢你。

编辑：我找到了一个适用于 Windows 的解决方案，它带有[适用于 Android 的 PdaNet](http://www.junefabrics.com/android/download.php)。无论如何，谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:55:32.063

如果你愿意在你的开发机器上运行 linux，你可以解决这个问题，因为不需要每个设备的驱动程序。

您将执行以下操作：

1.  在平板电脑的设置菜单中启用 USB 调试

2.  插入设备运行 lsusb 并记下平板电脑的 VID（如果不清楚哪个设备是平板电脑，请拔下并重新运行）

3.  将相应的条目添加到您的 udev 规则（请参阅 android 文档），重新加载 udev 规则，然后重新插入设备

4.  添加一个条目到你的 ~/.android/adb_usb.ini （注意这里你使用 0x 前缀）， adb kill-server 然后 adb devices

据我所知，这个过程在 Mac 上要简单一些。在 Windows 上，您可以为其他一些 android 设备获取驱动程序并更改其 VID/PID 以匹配您的平板电脑，但您可能必须解决驱动程序签名问题。

从理论上讲，您的设备可能不支持 adb over USB。

另一种选择可能是通过 wifi 运行 adb

您还可以重新联系供应商并专门请求“ADB”驱动程序 - 这对您正在与之交谈的人来说可能比“调试模式”更有意义。或者您可以对设备名称或设备的 VID 和 adb 进行网络搜索，看看其他人是否有特定的解决方案。

# objective-c - 从后台线程中的委托方法更改 UILabel 的文本不起作用

> ID：11086275
> 
> 赞同：0
> 
> 时间：2012-06-18T15:41:41.893
> 
> 标签：objective-c, ipad

HomeViewController.h

```
#import "DataParser.h"
@interface HomeViewController : UIViewController <DataParserDelegate>
{
    UILabel *theLabel;
} 
```

主视图控制器.m

```
#import "HomeViewController.h"
@implementation HomeViewController
-(void)viewDidLoad
{
    theLabel = [[UILabel alloc] initWithFrame:CGRectMake(200, 200, 100, 30)];
    theLabel.text = @"Bob";
    theLabel.font = [UIFont italicSystemFontOfSize:20.0];
    theLabel.textColor = [UIColor whiteColor];
    theLabel.backgroundColor = [UIColor blueColor];
    [self.view addSubview:theLabel];

    UIButton *theButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [theButton addTarget:self action:@selector(clicked:) forControlEvents:UIControlEventTouchUpInside];
    [theButton setTitle:@"Big Button" forState:UIControlStateNormal];
    theButton.frame = CGRectMake(100,100,200,50);
    [self.view addSubview:theButton];
}
-(void)clicked:(id)sender
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,0),
    ^{
        DataParser *data = [[DataParser alloc] init];
        data.delegate = self;
        [data loadSomething];

        dispatch_async(dispatch_get_main_queue(),
        ^{
            NSLog(@"Thread done");
        });
    });
}
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    theLabel.frame = CGRectMake(250,250,100,30);
    theLabel.text = @"This message displays fine";
}
-(void)loadMessage:(NSString *)message
{
    NSLog(@"Received message: %@", message);
    theLabel.frame = CGRectMake(300,300,100,30);
    theLabel.text = @"This message won't display";
}
@end 
```

数据解析器.h

```
@protocol DataParserDelegate;

@interface DataParser : NSObject
@property (weak, nonatomic) id <DataParserDelegate> delegate;
-(void)loadSomething;
@end

@protocol DataParserDelegate <NSObject>
-(void)loadMessage:(NSString *)message;
@end 
```

数据解析器.m

```
#import "DataParser.h"
@implementation DataParser
@synthesize delegate=_delegate;
-(void)loadSomething
{
    [[self delegate] loadMessage:@"ASDF"];
}
@end 
```

-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

基本上，我创建一个标签并将其添加到屏幕上。此时，您可以清楚地看到一个蓝色按钮，上面有白色文字“Bob”。当您旋转屏幕时，按钮会很好地更改文本和位置。但是，如果我单击该按钮，它会创建一个 dataParser 对象，将委托设置为 self，并调用“loadSomething”。在 dataParser 对象中，“loadSomething”仅调用委托方法“loadMessage”。

问题是，当调用“loadMessage”时，NSLog 语句会正确打印（“Received message: ASDF”），但是，theLabel 不会移动，也不会更改其文本。为什么是这样？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T15:50:34.580

试试这个代码：

```
-(void)loadMessage:(NSString *)message
{
    dispatch_async(dispatch_get_main_queue(), ^{
        NSLog(@"Received message: %@", message);
        theLabel.frame = CGRectMake(300,300,100,30);
        theLabel.text = @"This message displays great!";
    });
} 
```

它应该在主线程上运行。

# html - 对齐 div 表中的表

> ID：11086277
> 
> 赞同：0
> 
> 时间：2012-06-18T15:41:46.030
> 
> 标签：html, css, html-table

我已将包含四个表（在网格中）的表替换为包含四个表作为单元格的 div 表。我似乎完全无法工作的两件事是：

1.  如何摆脱 div 标签的表格边框使用`display: table`？

2.  左下角的表格坚持与单元格的最左边缘对齐，我希望它与单元格的最右边缘对齐。即使是相对定位也对此没有影响。

这是CSS：

```
<style type="text/css">
    .Dashboard {
        display: table;
        border-collapse: collapse;
        border-width: 0px;
    }
    .row1 {
        display:table-row;
    }
    .row2 {
        display:table-row;
        height: 200px;
    }
    .cell1 {
        display: table-cell;
        padding: 2px;
        border: 1px solid black;
    }
    .cell2 {
        display: table-cell;
        padding: 2px;
        border: 1px solid black;
    }
    .cell3 {
        display: table-cell;
        padding: 2px;
        border: 1px solid black;
        text-align: right;
        vertical-align: top;
    }
    .cell4 {
        display: table-cell;
        padding: 2px;
        border: 1px solid black;
    }
    table.inner {
        border-collapse: collapse;
        border: 2px solid black;
        text-align: center;
        padding: 2px;
    }
    td {
        border-collapse: collapse;
        border: 2px solid black;
        text-align: center;
        padding: 2px;
    }
    td.image {
        padding: 0;
        margin: 0;
    }
</style> 
```

表格布局如下所示：

```
<div runat="server" id="Dashboard" class="Dashboard">
    <div class="row1">
        <div class="cell1">
            <table class="inner" id="t1">
                <tr>...</tr>
                ...
                <tr>...</tr>
            </table>
        </div>
        <div class="cell2">
            <table class="inner" id="t2">
                <tr>...</tr>
                ...
                <tr>...</tr>
            </table>
        </div>
    </div>
    <div class="row2">
        <div class="cell3">
            <table class="inner" id="t3">
                <tr>...</tr>
                ...
                <tr>...</tr>
            </table>
        </div>
        <div class="cell4">
            <table class="inner" id="t4">
                <tr>...</tr>
                ...
                <tr>...</tr>
            </table>
        </div>
    </div>
</div> 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:19:52.913

摆脱边界使用

```
border: none; 
```

有了定位，找到左下角的table id并使用

```
float: right; 
```

但你最好的选择是无论如何都要摆脱桌子。所有这些都可以使用直接的 CSS 轻松完成。

# c# - 如何设置程序可以同时启动的最大外部进程数？

> ID：11086279
> 
> 赞同：1
> 
> 时间：2012-06-18T15:41:52.803
> 
> 标签：c#, windows, process, queue

我需要为指定目录中的每个 PDF 文件运行一个外部程序。

问题是——**如何将外部程序进程的数量限制**为用户指定的值？我在循环中运行它，如下所示：

```
foreach(string file in Directory.GetFiles(sourcePath))
{
    Process p = new Process();
    p.StartInfo.FileName = @"path\program.exe";
    p.StartInfo.Arguments = previouslySetArguments;
    p.Start();
} 
```

现在的问题是，有时文件数量非常庞大，并且使用该代码，所有进程将同时运行。它确实减慢了机器速度。

另一个想法是放在`p.WaitForExit();`之后，`p.Start();`但它一次只运行一个进程，另一方面 - 减慢整个工作:)

限制进程数量以同时运行确切数量的最简单方法是什么？我想让用户决定。

假设我想一次运行最多 5 个进程。所以：
- 对于目录中的前 5 个文件，前 5 个进程或多或少同时开始
- 当其中一个（没关系，哪个）结束工作时，下一个进程开始 - 对于下一个文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:57:47.517

如果我是你，我会研究排队的生产者消费者模型。它的目的几乎就是这样做的，并且有很多很好的示例可以修改以满足您的需求。

这是一个示例： [C#生产者/消费者](https://stackoverflow.com/questions/1656404/c-sharp-producer-consumer)

另一个例子： http: [//msdn.microsoft.com/en-us/library/hh228601%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/hh228601%28v=vs.110%29.aspx) （最后一个是4.5，但仍然有效的IMO）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:00:54.963

好的，所以我尝试了[这个问题](https://stackoverflow.com/questions/4360720/spawn-processes-but-only-5-at-a-time)的答案，但是 - 奇怪的是 - 我无法让它们工作。我承认，我很着急，我可能会犯一些错误......

目前，我发现的最快和最简单（也是最丑陋）的方法只是一个循环，如下面的代码。`Thread.Sleep()`它适用于仅使用给定命令行参数作为毫秒调用的测试程序。

现在，**请解释一下，为什么它不是一个好的解决方案**——我认为它不是正确的方法（不仅因为代码很难看），即使它适用于这个测试示例。

```
class Program
{
    // hardcoded, it's just a test:
    static int activeProcesses = 0;
    static int finishedProcesses = 0;
    static int maxProcesses = 5;
    static int runProcesses = 20;

    static string file = @"c:\tmp\dummyDelay.exe";

    static void Main(string[] args)
    {
        Random rnd = new Random();

        while (activeProcesses + finishedProcesses < runProcesses)
        {
            if (activeProcesses < maxProcesses)
            {
                Process p = new Process();
                p.EnableRaisingEvents = true;
                p.Exited += new EventHandler(pExited);
                p.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
                p.StartInfo.FileName = file;
                p.StartInfo.Arguments = rnd.Next(2000, 5000).ToString();
                p.Start();
                Console.WriteLine("Started: {0}", p.Id.ToString());
                activeProcesses++;
            }
        }

    }

    static void pExited(object sender, EventArgs e)
    {
        Console.WriteLine("Finished: {0}", ((Process)sender).Id.ToString());
        ((Process)sender).Dispose();
        activeProcesses--;
        finishedProcesses++;
    }
} 
```

# iphone - requireGestureRecognizerToFail 不起作用

> ID：11086280
> 
> 赞同：1
> 
> 时间：2012-06-18T15:41:57.467
> 
> 标签：iphone, objective-c, ios, ipad, uitapgesturerecognizer

我正在使用两种不同的 TapGestureRecognizer 来处理屏幕上的单击和双击。这是代码：

```
UITapGestureRecognizer *tapGR =[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(handleTap:)];
    [tapGR setDelegate:self];
    [tapGR setNumberOfTapsRequired:1];
    [self addGestureRecognizer:tapGR];

    UITapGestureRecognizer *doubleTapGR = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(handleDoubleTap:)];
    [doubleTapGR setNumberOfTouchesRequired:2];
    [self addGestureRecognizer:doubleTapGR];

    [tapGR requireGestureRecognizerToFail : doubleTapGR];

    [tapGR release];
    [doubleTapGR release]; 
```

即使我指定了 [tapGR requireGestureRecognizerToFail: doubleTapGR]，也会执行“handleTap”选择器。错误在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T16:00:42.587

你犯了一个错误！您使用`setNumberOfTouchesRequired`了方法`doubleTapGR`而不是使用`setNumberOfTapsRequired`. 这是更正后的代码：

```
UITapGestureRecognizer *tapGR =[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(handleTap:)];
[tapGR setDelegate:self];
[tapGR setNumberOfTapsRequired:1];
[self addGestureRecognizer:tapGR];

UITapGestureRecognizer *doubleTapGR = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(handleDoubleTap:)];
[doubleTapGR setNumberOfTapsRequired:2];
[self addGestureRecognizer:doubleTapGR];

[tapGR requireGestureRecognizerToFail : doubleTapGR];

[tapGR release];
[doubleTapGR release]; 
```

最好的祝福 ;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:52:25.063

我想你可能遗漏了：

```
[doubleTapGR setDelegate:self]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:52:52.000

我发现我真的很笨:)

我写：

```
[doubleTapGR setNumberOfTouchesRequired:2]; 
```

代替：

```
[doubleTapGR setNumberOfTapsRequired:2]; 
```

随意删除此答案。对不起 StackOverflow。

# javascript - 使用 jQuery 或专有 JavaScript，我如何停止在 Internet Explorer 中下载文件？

> ID：11086281
> 
> 赞同：1
> 
> 时间：2012-06-18T15:41:58.717
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-8, internet-explorer-7

我正在使用 jQuery 通过 iframe 启动大文件的下载（以免锁定浏览器）。如果我从 FF 中的 DOM 中删除该 iframe，则不会出现保存对话框，因为启动它的窗口不再存在。但是，在 IE 中，即使我从 DOM 中删除 iframe，下载过程仍在继续，最终会出现保存对话框。代码看起来有点像这样：

**加上：**

```
$("#my-id").append("<iframe id='my-iframe' src='my.zip' style='visibility:hidden' />"); 
```

**去除：**

```
$("#my-iframe").remove(); 
```

我在 IE 中阅读了有关 contentWindow.execCommand 的内容，但没有[命令标识符](http://msdn.microsoft.com/en-us/library/ms533049%28v=vs.85%29.aspx)可以“停止”处理 URL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:47:06.513

没有取消，没有关闭..但是停止;）

来自[Javascript：取消/停止图像请求](https://stackoverflow.com/questions/930237/javascript-cancel-stop-image-requests)

```
//cancel image downloads
if(window.stop !== undefined) 
{
  window.stop();
}
else if(document.execCommand !== undefined)
{
  document.execCommand("Stop", false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:48:12.547

使用 ajax，它将允许您取消请求（我猜即使在您的 iframe 中）。请参阅[使用 jQuery 中止 Ajax 请求](https://stackoverflow.com/questions/446594/abort-ajax-requests-using-jquery)

# svn - 将多个 SVN 存储库与主干分支标签的单个文件夹相结合

> ID：11086283
> 
> 赞同：1
> 
> 时间：2012-06-18T15:42:00.023
> 
> 标签：svn, repository

我正在开发一个有四个不同项目的软件。这些项目中的每一个都存储在一个单独的 SVN 存储库中，具有一个主干和两个分支。

所以看起来像这样

```
repo1
    trunk
        src
    branches
        branch1
            src
        branch2
            src

etc...

repo4
    trunk
        src
    branches
        branch1
            src
        branch2
            src 
```

我想做的是将这些存储库合并到一个存储库中，这样我就可以在一个存储库中进行切换、合并和历史记录，而不必处理四个不同的存储库。

所以我设想它最终看起来像这样

```
repo
    trunk
        project1
            src
        etc...
        project4
            src
    branches
        branch1
            project1
                src
            etc...
            project4
                src
        branch2
            project1
                src
            etc...
            project4
                src 
```

是否有可能做到这一点？我已经查看了[将多个 SVN 存储库合并为一个](https://stackoverflow.com/questions/267256/combining-multiple-svn-repositories-into-one)，其中讨论了如何`trunk` `branches` `tags`在每个项目中拥有，但我希望项目包含在不同的标准 SVN 文件夹中（除非有充分的理由不这样做）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:03:29.727

使用我链接的问题的答案和 Wrikken 的建议，我设法让它工作。

第一步是转储现有的存储库

```
svnadmin dump > project1.dmp 
```

现在在组合仓库中创建一个新文件夹

```
svn mkdir http://myserver/svn/repo/project1 
```

然后将它们加载到新的存储库中

```
svnadmin load --parent-dir "project1" < project1.dmp 
```

现在进入`project1`文件夹并移动

```
svn mv http://myserver/svn/repo/project1/trunk http://myserver/svn/repo/trunk/project1
svn mv http://myserver/svn/repo/branches/branch1 http://myserver/svn/repo/branches/branch1/project1 
```

现在删除`project1`目录

```
svn delete http://myserver/svn/repo/project1 
```

并对要合并的其他存储库执行相同的操作。

# php - EXTJS4 - TinyMCE 和 wkhtmltopdf 以及缺少字体的情况

> ID：11086297
> 
> 赞同：0
> 
> 时间：2012-06-18T15:42:56.750
> 
> 标签：php, fonts, wkhtmltopdf

我有一个巧妙的计划，它使用嵌入在 EXTJS4 中的 TinyMCE 编辑器来生成 HTML 输出，然后我可以从中生成 PDF，而且我几乎已经完成了整个工作。我遇到的一件事是字体。TinyMCE 可以毫无问题地处理它们，但我无法让它们与 wkhtmltopdf 一起工作。当我使用任何字体（甚至是粗体文本按钮）时，我的 ajax 请求会中止并使浏览器崩溃。我必须重新启动浏览器才能继续前进。如果我只使用默认字体，则可以正确生成 pdf。

我已经尝试将用户样式表放在每个可以想象的地方以使其拾取，但无济于事。

对我做错的任何帮助将不胜感激。我在带有 xampp 的 Windows 7 上使用 wkhtmltopdf 0.11.0_rc1。

```
POST VARS Sent to PHP via AJAX
cgroup  54
htmlx   <p><span style="font-family: trebuchet ms,geneva;">this is a test in TREBUCHET MS</span></p><p>THIS IS NORMAL TEXT ag</p>
messagetype post
send_date   18 Jun 2012
send_time   3:25 PM
subject 
task    test  

PHP Script

$outfile = './tmp/'.$timestamp.'.pdf';
$wkhtmloptions = "--header-spacing 5 --footer-spacing 2 --margin-top 15 --user-style-sheet file:///".$_SERVER['DOCUMENT_ROOT']."/arx/wkhtmltopdf.css";

$pdf = new wkhtmltopdf(array( 
    'title'         => 'Title',
      'html'          => $htmlx,
      'tmppath'       => 'tmp', 
      'binpath'       => $_SERVER['DOCUMENT_ROOT'].'/arx/bin/wkhtmltopdf/', 
      'options'       => $wkhtmloptions,
    ));

    $pdf->output('F', $outfile); //save the file to $outfile 
    $msg = "Test PDF generated";
    $success =true; 

    echo "{success: $success, msg: '$msg', title: 'Test Message', type: '$type', data: '$outfile'}";

wkhtmltopdf.css located in htdocs/arx/
@font-face {
    font-family: 'trebuchet MS';
    src: url('resources/fonts/trebuc.ttf') format('truetype');
}
@font-face {
    font-family: 'trebuchet MS';
    src: url('./resources/fonts/trebucit.ttf') format('truetype');
    font-style: italic;
}
@font-face {
    font-family: 'trebuchet MS';
    src: url('./resources/fonts/trebucbd.ttf') format('truetype');
    font-weight: bold;
}
@font-face {
    font-family: 'trebuchet MS';
    src: url('./resources/fonts/trebucbi.ttf') format('truetype');
    font-weight: bold;
    font-style: italic;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:36:03.053

您控制 HTML，因此您可以简单地编辑传入的 HTML 而根本不使用`--user-style-sheet`。像这样的输入 html 对你有用吗？

```
 <html><head>
   <!-- if you really need it -->
   <link href="http://server/arx/wkhtmltopdf.css" rel="stylesheet" type="text/css" />
 </head><body>
   <p><span style="font-family: comic sans ms;">TREBUCHET MS</span></p>
   <p>THIS IS NORMAL TEXT ag</p>
 </body></html> 
```

这也可能是由于许多问题，但更多细节会有所帮助。

*   你看到 wkhtmltopdf 进程开始了吗？
*   您是否尝试过在没有 CSS 定义的情况下直接使用字体？
*   你需要CSS吗？
*   您是否看到正在生成一个输出文件？
*   如果直接从命令行执行它是否有效？当您以编程方式使用 wkhtmltopdf 时，直接运行可能会给您丢失的输出。

# asp.net - 使用asp：imagebutton和CSS更改悬停图像？

> ID：11086298
> 
> 赞同：5
> 
> 时间：2012-06-18T15:42:56.993
> 
> 标签：asp.net, .net, css

我有以下代码，但它似乎不起作用：

```
<td align="center" style="padding-bottom:52.5px">
<asp:ImageButton CssClass="RightArrow" ID="Image2" runat="server"     ImageUrl="/_layouts/Right_GrayArrow.png"/>
</td> 
```

还有一个 CSS 类可以在悬停时更改图像：

```
.RightArrow:hover
{
background-image: url('/_Layouts/Right_GreenArrow.png') !important;
} 
```

请指教。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-24T19:13:04.310

我更喜欢这种方式：

```
<asp:ImageButton CssClass="RightArrow" ID="Image2" runat="server" ImageUrl="/_layouts/Right_GrayArrow.png" onmouseover="this.src='/_layouts/Right_GreenArrow.png'" onmouseout="this.src='/_layouts/Right_GrayArrow.png'"/> 
```

再见

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-18T15:48:57.713

`ImageButton`控件呈现为属性成为属性的`<input type="image" />`元素，例如：`ImageUrl``src`

```
<input type="image" src="/_layouts/Right_GrayArrow.png" /> 
```

`src`因此，您正在为此应用背景图像，因为图像被覆盖在它上面，所以您看不到它。

您有 2 个选择：

* * *

1）更改`ImageButton`使用背景图像：

```
.RightArrow
{
  width: /* width of image */
  height: /* height of image */
  background-image:url('/_layouts/Right_GrayArrow.png');
}
.RightArrow:hover
{
  background-image: url('/_Layouts/Right_GreenArrow.png');
} 
```

但是，如果您要使用此方法，我建议您改用 an `<asp:Button />`。`<asp:ImageButton />`如果您甚至没有使用该`src`属性，则使用它似乎毫无意义。

* * *

2）使用jQuery改变悬停图像：

```
$(".RightArrow").hover(function(){
   $(this).attr("src", "/_Layouts/Right_GreenArrow.png");
},
function(){
   $(this).attr("src", "/_Layouts/Right_GrayArrow.png");
}); 
```

值得注意的是，这仅适用于启用 javascript，并且您必须包含 jQuery 库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:50:19.803

ImageUrl 属性与设置背景图像不同。删除 CSS 并在页面中设置 onmouseout 和 onmouseover 属性。

# asp.net-mvc - 具有实体框架的 MVC3 中工作单元的 Autofac 范围

> ID：11086299
> 
> 赞同：3
> 
> 时间：2012-06-18T15:43:00.760
> 
> 标签：asp.net-mvc, entity-framework-4, autofac, unit-of-work

我们有 MVC3 控制器创建和调用（直接或间接）的标准模块“链”-“MyController”->“MyService”->“MyRepository”->“MyUnitOfWork”

这些模块在 App_Start 中注册如下：

```
var builder = new ContainerBuilder();

builder.RegisterType<MyRepository>().AsImplementedInterfaces().InstancePerHttpRequest();
builder.RegisterType<MyUnitOfWork>().AsSelf().InstancePerHttpRequest();
builder.RegisterType<MyService>().AsImplementedInterfaces().InstancePerHttpRequest();

IContainer container = builder.Build();
DependencyResolver.SetResolver( new AutofacDependencyResolver( container ) ); 
```

当我们尝试从控制器并行执行对服务的多个调用时，我们在 EF4 中遇到异常（我们使用 DbContext 作为 UoW 的基类）。

在同一个 HttpRequest 的上下文中对服务进行并行调用的模块的正确范围是什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T12:55:30.897

Sounds like 1 DbContext per HttpRequest isn't gonna work for you. You probably need `InstancePerDependency()` and then request a new DbContext per thread.

# c# - 功能 LINQ 中的 selectMany

> ID：11086300
> 
> 赞同：-2
> 
> 时间：2012-06-18T15:43:04.250
> 
> 标签：c#, .net, linq

```
var collecion = new List<List<ToTest>>
                    {
                        new List<ToTest>{new ToTest {Id = 1, Name = "some name"}, new ToTest {Id = 4, Name = "some name2"}},
                        new List<ToTest>{new ToTest {Id = 2, Name = "some name"}, new ToTest {Id = 5, Name = "some name2"}},
                        new List<ToTest>{new ToTest {Id = 3, Name = "some name"}, new ToTest {Id = 6, Name = "some name2"}},
                    }; 
```

我想使用功能 linq 而不是 lambda linq

```
 var result1 = collecion.SelectMany(q => q).ToList(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T15:44:21.757

```
var result1 = from collection in collections
              from item in collection
              select item; 
```

# objective-c - 调用单例类抛出 EXC_BAD_ACCESS

> ID：11086301
> 
> 赞同：0
> 
> 时间：2012-06-18T15:43:04.203
> 
> 标签：objective-c, singleton, exc-bad-access

我的代码中有一个奇怪的行为，我真的不知道如何解决它。
我有一个具有此定义的 Singleton 类：

**AppModelLocator.h>**

```
#import <Foundation/Foundation.h>

@interface AppModelManager : NSObject

+ (AppModelManager *)sharedManager;

@end 
```

**AppModelLocator.m**

```
#import "AppModelManager.h"

static AppModelManager *instance = nil;

@implementation AppModelManager

#pragma mark - Singletone
#pragma mark

+ (AppModelManager *)sharedManager
{
    @synchronized ([AppModelManager class]) {
        if (instance == nil) {
            instance = [AppModelManager new];
        }
    }

    return instance;
}

+ (id)alloc
{
    @synchronized ([AppModelManager class]) {
        NSAssert(instance == nil, @"Attempted to allocate the second instance of AppModelManager.");
        instance = [super alloc];
        return instance;
    }

    return nil;
}

@end 
```

当我`[AppModelLocator sharedManager]`在代码中的某个地方调用时，一切都很好。但是当我在特定的代码行之后调用单例类时，它会抛出 EXC_BAD_ACCESS (code=1, address=0xfffffeec) 并在单例类`return instance`的`sharedManager`定义中引用。

该特定代码正在初始化一个创建 HTTP 请求并开始发送请求的类，但在该类中没有任何引用`AppModelLocator`或特殊内容。它是一个简单的创建`NSURLConnection`及其委托方法。

我在其他应用程序中使用了类似的类和方法，它们运行良好，我想知道这个类有什么问题。我尝试了十几种其他创建单例类的方法，但没有一个有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:42:25.047

你为什么不简单地使用 GCD 来实例化你的单例？

```
+ (AppModelManager *)sharedManager
{
    static AppModelManager* instance;
    static dispatch_once_t onceToken;

    dispatch_once(&onceToken, ^{
        instance = [[AppModelManager alloc] init];
    });

    return instance;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:06:42.713

最后，我发现代码中有什么问题。我`NSURL`动态创建了一个实例，并使用第三个库来加密 URL。通过编码的某些东西导致了特殊情况下的崩溃，但我想知道为什么在调用单例类后会引发异常。无论如何，问题不是因为 deanWombourne 所说的单例定义。

# c++ - 如何使 html 内容适合 QWebView 大小

> ID：11086308
> 
> 赞同：1
> 
> 时间：2012-06-18T15:43:20.073
> 
> 标签：c++, qt, symbian, qwebview

我正在编写代码以在 Qwebview 中显示 html 内容，我是通过 QWebview 的 setHtml 方法完成的。我还成功禁用了滚动条。

但我遇到了如何使内容适合 QWebView 大小的问题。

请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T05:47:18.627

我通过设置缩放级别来解决这个问题实际上，如果你想让 html 内容适合 Qwebview 大小使用，

qWebView->setZoomFactor(0.5); 根据您的 htmlContent 大小设置。

# c++ - 在什么情况下 fprintf() 不会写入输出文件

> ID：11086314
> 
> 赞同：0
> 
> 时间：2012-06-18T15:43:42.923
> 
> 标签：c++, printf

这是我之前发布的一个更大问题的子问题。以下是我正在尝试使用的 C++ 包的代码片段。目的是将浮点数组 prob_estimates 中的值写入输出文件。对于一些看似随机的行，只写入了数组的部分值。什么时候会发生？我应该如何调试它？

```
 int j;
    predict_label = predict_probability(model_,x,prob_estimates);
    fprintf(output,"%g",predict_label);
    for(j=0;j<model_->nr_class;j++) {
        fprintf(output," %g",prob_estimates[j]);
        fflush(output);
    }
    fprintf(output,"\n"); 
```

我还想指出，这似乎仅在输入大小相当大时才会发生。这是一个更大的循环的一部分，它每行输入文件（大约 200,000 行）运行。prob_estimates 数组每行有 500 个值。输出文件为输出文件中的 20 多行写入少于 500 个值。我在一个子集（有 20,000 行）上运行了几次，一切似乎都很好。

更新：我尝试在每次尝试写入后检查 fprintf 的返回值，结果在尝试写入输出时，很多行都返回 -1。

```
fprintf encountered error at 19th value of line 2109359\. Returned -1
fprintf encountered error at 373th value of line 2109359\. Returned -1
fprintf encountered error at 229th value of line 2109360\. Returned -1
fprintf encountered error at 87th value of line 2109361\. Returned -1
fprintf encountered error at 439th value of line 2109361\. Returned -1 
```

这是我将上面的代码修改如下：

```
 for(j=0;j<model_->nr_class;j++) {
            int e = fprintf(output," %g",prob_estimates[j]);
            if (e < 0) {
            printf("fprintf encountered error at %dth value of line %d. Returned %d",j ,count ,e); }
        } 
```

这`count`是一个计算行数的变量。它在外部循环的顶部递增（此处未显示）。我该怎么做才能弄清楚为什么 fprintf 返回 -1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:50:10.270

你可以做的几件事：

1.  将所有内容也打印到控制台，以查看问题是在文件输出中还是在其他地方

2.  打印`model_->nr_class`以确保值的数量是您所期望的

3.  仅在关闭后检查输出文件。尽管您刷新了输出，但可能是其他地方更新了文件并且不刷新它。`fclose`将。我建议不要每行刷新文件，而是在函数开头以附加模式打开它，最后关闭它。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T18:29:01.123

现在您发现 fprintf 返回错误，您需要在调用失败后检查 errno 的值，以找出实际错误原因是什么。

# wordpress - 如何从 query_posts 获取结果数量？

> ID：11086315
> 
> 赞同：19
> 
> 时间：2012-06-18T15:43:44.863
> 
> 标签：wordpress

我正在打印帖子，我想获得一些结果，我该怎么做？

这是我的代码的一部分：

```
if (have_posts()) : 

    $args = array(
        'showposts' => '5',
        'paged' => $paged
    );

    $thePosts = query_posts($args);
... 
```

感谢帮助

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-19T07:08:19.897

解决了：

```
if (have_posts()) : 

        $args = array(
            'showposts' => '5',
            'paged' => $paged
        );

        $thePosts = query_posts($args);

         global $wp_query; 
         echo $wp_query->found_posts;
    ... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T21:02:46.937

要显示搜索结果的数量，请使用：

```
Search Result for 

<?php 
/* Search Count */ 
$allsearch = &new WP_Query("s=$s&showposts=-1"); 
$key = wp_specialchars($s, 1);
$count = $allsearch->post_count; _e('');
 _e('<span class="search-terms">'); 
echo $key; _e('</span>'); 
_e(' &mdash; '); 
echo $count . ' ';
 _e('articles');
 wp_reset_query(); 
?> 
```

这取自：[WP Beginner](http://www.wpbeginner.com/wp-tutorials/display-search-term-and-result-count-in-wordpress/)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-30T21:37:01.370

正确答案是

```
 if (have_posts()) : 

    $args = array(
        'showposts' => '5',
        'paged' => $paged
    );

    $thePosts = query_posts($args);

     echo $thePosts ->found_posts;
... 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-14T09:12:42.637

这将为您提供结果：例如，显示 46 个结果中的第 11-20 个结果。

```
 $args = array(
    'cat'=> $cat,
    'posts_per_page' => 10,
    'paged' => $paged,
    's'=> $s
  );
  query_posts($args);

  $startpost=1;
  $startpost=10*($paged - 1)+1;
  $endpost = (10*$paged < $wp_query->found_posts ? 10*$paged : $wp_query->found_posts);
        ?>
  <h2 class="displayResult">Showing results <?php echo $startpost; ?> - <?php echo $endpost; ?> of <?php echo $wp_query->found_posts; ?></h2> 
```

如果这不是搜索页面，只需删除行`"'s'=> $s"`。

如果确实需要它，请确保`$_GET['s']`如上所述声明变量。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-11T13:48:31.467

简单的。要显示*当前页面的结果数*，请使用

```
// Showing Page X of Y
print filter_var( absint( $GLOBALS['wp_query']->post_count ), FILTER_SANITIZE_NUMBER_INT ); 
```

对于*结果总量*，使用

```
print filter_var( absint( $GLOBALS['wp_query']->found_posts ), FILTER_SANITIZE_NUMBER_INT ); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-31T06:30:22.917

显示搜索结果的数量：

```
<?php global $wp_query;
echo $wp_query->post_count; ?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-26T04:17:10.453

```
query_posts( $args );
global $wp_query;
print_r($wp_query->max_num_pages); 
```

它帮助我。

# c# - 如何以编程方式切换样式表？

> ID：11086321
> 
> 赞同：1
> 
> 时间：2012-06-18T15:43:55.173
> 
> 标签：c#, asp.net

我有一组具有不同颜色选项的样式表。我创建了一个用户控件，其中包含设置为链接按钮的样式表选项列表。单击时，我使用要使用的样式表的路径设置会话变量，然后在母版页上检查此会话并相应地设置样式表。

问题是样式表更改在我再次刷新页面之前不会生效。如何强制样式表立即重新加载？

这是我的用户控件：

```
<ul id="swatch">
  <li>
    <div class="green"></div>
    <asp:LinkButton ID="lbGreen" runat="server" Text="Green" ClientIDMode="Static" 
          onclick="lbGreen_Click"></asp:LinkButton>
  </li>    
  <li>
    <div class="maroon"></div>
    <asp:LinkButton ID="lbMaroon" runat="server" Text="Maroon" ClientIDMode="Static" 
          onclick="lbMaroon_Click"></asp:LinkButton>
  </li>
  <li>
    <div class="silver"></div>
    <asp:LinkButton ID="lbSilver" runat="server" Text="Silver" ClientIDMode="Static" 
          onclick="lbSilver_Click"></asp:LinkButton>
  </li>
  <li>
    <div class="black"></div>
    <asp:LinkButton ID="lbBlack" runat="server" Text="Black" ClientIDMode="Static" 
          onclick="lbBlack_Click"></asp:LinkButton>
  </li>
</ul> 
```

这是此控件的代码：

```
public partial class StylesheetPicker : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void lbGreen_Click(object sender, EventArgs e)
    {
        SetStylesheet("green");
    }

    protected void lbMaroon_Click(object sender, EventArgs e)
    {
        SetStylesheet("maroon");
    }

    protected void lbSilver_Click(object sender, EventArgs e)
    {
        SetStylesheet("silver");
    }

    protected void lbBlack_Click(object sender, EventArgs e)
    {
        SetStylesheet("black");
    }

    private void SetStylesheet(string selectedStyle)
    {
        switch (selectedStyle)
        {
            case "green":
                Session["style"] = "/css/green.css";
                break;
            case "maroon":
                Session["style"] = "/css/maroon.css";
                break;
            case "silver":
                Session["style"] = "/css/silver.css";
                break;
            case "black":
                Session["style"] = "/css/black.css";
                break;
            default:
                Session["style"] = "/css/green.css";
                break;
        }                      
    }
} 
```

然后这是我在母版页上的代码片段：

```
if(Session["style"] != null)
{
  var stylesheet = Session["style"];
  <link rel="stylesheet" type="text/css" href="@stylesheet" />
}
else
{
  <link rel="stylesheet" type="text/css" href="/css/green.css" />
} 
```

看来我必须单击链接按钮*两次*才能更改样式表。我该怎么做才能在单击按钮时立即更改？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:17:00.450

给您的样式表链接元素一个 id，然后您应该能够将其上的 href 更改为其他内容。此代码适用于 chrome，不确定其他浏览器：

```
<link id="userStylesheet" rel="stylesheet" type="text/css" href="/css/green.css" /> 
```

Javascript来改变它：

```
var linkTag = document.getElementById('userStylesheet');
linkTag.href = "css/maroon.css"; 
```

对于服务器端问题，您可能会在他们回发对它的更改以使其在下一页加载时生效后重定向问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:57:32.853

在母版页中为您的样式表创建一个占位符，然后您可以在 Page_Load/postback 上设置样式表而不必刷新页面？

事实上[，在 Asp.Net 中以编程方式添加样式表](https://stackoverflow.com/questions/2943037/adding-stylesheets-programmatically-in-asp-net)似乎是您所追求的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:59:50.043

如果我没记错的话，最终发生的事情是会话变量是在母版页已经评估了 if 之后设置的。第二次点击只是在第一次点击中设置会话变量后再次重新加载页面（但从 master.

现在有更好的方法来做到这一点，但如果你真的想让这种方法发挥作用，你将不得不做一些事情，比如在设置变量后强制页面重新加载，或者在母版页渲染之前评估发布数据手动。

# ruby - 从 Array 中删除多个之一

> ID：11086322
> 
> 赞同：3
> 
> 时间：2012-06-18T15:43:56.717
> 
> 标签：ruby

我有一个多次包含一些元素的数组。现在我想创建一个删除了其中一个元素的新数组。

例子：

```
a = [1,1,1,2]
delete_index = a.find_index(1)
result = a.clone
result.delete_at(delete_index)
# result is now [1,1,2] 
```

对于如此简单的任务，这段代码看起来真的很难看。我查看了 Array 提供的方法，但找不到更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:56:29.360

```
a.delete_at(a.index(1) || a.length) 
```

`a.length`处理未找到您的元素的情况；因为它超出了范围，所以不会删除任何内容，您的返回值将是`nil`.

如果您的部分问题是对数组的副本执行此操作，只需在 a 上调​​用它`clone`：

```
a2 = a.clone ; a2.delete_at(...) 
```

如果要对每个重复元素执行此操作，可以将其链接到选择重复元素的块：

```
a.select { |e| array.count(e) > 1 }.each { |dup| a.delete_at a.index(dup) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:34:21.347

你可以猴子补丁数组：

```
class Array
  def delete_first_occurrence(o)
    delete_at(find_index(o) || length)
    self
  end
end

a = [1,1,1,2]
result = a.clone.delete_first_occurrence(1)
 => [1, 1, 2] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:55:20.810

我不太清楚，但听起来你只是想从数组中删除重复项。如果是这种情况，它就像 一样简单`array.uniq`，它将返回一个删除所有重复项的新数组。如果您想就地修改原始数组，则可以`array.uniq!`改用。

如果这不是您想要完成的，请使用您想要完成的一些示例输入和输出来更新您的问题。

# debugging - Emacs gdb - 调试程序集时显示箭头

> ID：11086323
> 
> 赞同：6
> 
> 时间：2012-06-18T15:43:58.837
> 
> 标签：debugging, assembly, emacs, gdb

我正在尝试使用 gdb 和 Emacs 调试汇编程序。我的问题是，当我尝试逐步调试时，它不会在当前执行行显示指针箭头。我要调试的代码是：

```
SECTION .data               ; Section containing initialised data

    EatMsg: db "Eat at Joe's!",10
    EatLen: equ $-EatMsg    

SECTION .bss            ; Section containing uninitialized data 

SECTION .text           ; Section containing code

global  _start          ; Linker needs this to find the entry point!

_start:
    nop         ; This no-op keeps gdb happy...
    mov eax,4       ; Specify sys_write call
    mov ebx,1       ; Specify File Descriptor 1: Standard Output
    mov ecx,EatMsg      ; Pass offset of the message
    mov edx,EatLen      ; Pass the length of the message
    int 80H         ; Make kernel call

    MOV eax,1       ; Code for Exit Syscall
    mov ebx,0       ; Return a code of zero 
    int 80H         ; Make kernel call 
```

我正在用这些行编译：

```
 nasm -f elf -g -F stabs eatsyscall.asm -l eatsyscall.lst
    ld -melf_i386 -o eatsyscall eatsyscall.o 
```

我在 Emacs 中看到的是这样的。在此屏幕截图中，我当前正在执行断点之后的行，并且没有出现指向该行的指针。有可能拥有一个吗？ ![截屏](../Images/d447cf1d6daab6f5083b3cf3f73890b2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-08T16:31:37.047

首先，我希望您**仍在**寻找解决方案，已经 2 年了！如果你是，然后尝试哄 nasm 使用 DWARF 而不是 STAB 生成调试信息，即以下

```
nasm -f elf -g -F dwarf eatsyscall.asm ... 
```

这似乎对我有用（TM）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:15:53.417

尝试下载 nasm2.5 或可用的最新版本，它应该可以工作

# mysql - 插入和更新表后的MySQL触发器

> ID：11086324
> 
> 赞同：0
> 
> 时间：2012-06-18T15:44:01.243
> 
> 标签：mysql, triggers

我为内容管理创建了一个表。我不熟悉 Mysql 触发器。

```
 Key    Default     
      a     varchar(50)      
      b     varchar(50)      
      c     text      
      status    varchar(100) 
```

这是我的表。当每个表更新表更改状态时，我创建了一个触发器。

```
 DELIMITER $$
    CREATE TRIGGER tr2 BEFORE insert or UPDATE ON p
    FOR EACH ROW BEGIN
     SET NEW.status = '1';
    END;
   $$
 DELIMITER ; 
```

此触发器仅在修改行时更新。如何在每次插入和更新期间创建触发器以更改“状态”。请帮助我任何人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:13:52.143

这不是正确的语法。只需在更新前创建一个触发器

```
DELIMITER $$
    CREATE TRIGGER tr2 BEFORE UPDATE ON p
    FOR EACH ROW BEGIN
     SET NEW.date = '1';
    END;
   $$
 DELIMITER ; 
```

并为 column 设置默认值`status = '1'`。

```
CREATE TABLE p(
a varchar(50),
b varchar(50),
c text,
status varchar(100) NOT NULL DEFAULT '1'
); 
```

这样，每当您在 p 中插入一行并且不为状态指定值时，状态将为`1`. 您可以创建另一个触发器`BEFORE INSERT`，但我不建议这样做。上述解决方案也是如此。

# http - 在服务器上设置一个基本的 scala 程序

> ID：11086325
> 
> 赞同：1
> 
> 时间：2012-06-18T15:44:06.470
> 
> 标签：http, scala, webserver

作为 scala 的一个实验，我想建立一个使用 scala 作为服务器端语言的基本网站。这不会执行许多交互式任务——它只会编写和分发 HTML 以响应 HTTP 请求。

我不太了解 Web 服务器的管道是如何工作的，但是我已经编写了很多 HTML、CSS、JS 和 PHP，并且我设想它的工作方式很像 wordpress 中的 PHP 后端——客户端发送一个 HTTP 请求例如 example.wordpress.com/2012/06/18/example_blog 和服务器上的 PHP 编译一个 HTML 网页并将其返回给用户。

尽管我对建议持开放态度，但我宁愿不使用像 Lift 这样的完整框架，因为我正试图从头开始构建。我只对将 HTTP 请求作为输入并输出 HTTP 响应这一非常基本的任务感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:50:54.010

通常你会使用一个 Java EE 服务器并实现一个[Servlet](http://en.wikipedia.org/wiki/Java_Servlet)。

这是一个：

```
package myservlet

import javax.servlet.http._

class Servlet extends HttpServlet {
  /** Servlet's main method. */
  protected def welcome (request: HttpServletRequest, response: HttpServletResponse): Unit = {
    response.getWriter.write ("hi")
  }
  override def doGet (request: HttpServletRequest, response: HttpServletResponse): Unit = welcome (request, response)
  override def doPost (request: HttpServletRequest, response: HttpServletResponse): Unit = welcome (request, response)
} 
```

然后你会像往常一样在 web.xml 中提到它：

```
<servlet><servlet-name>MyServlet</servlet-name>
  <servlet-class>myservlet.Servlet</servlet-class></servlet>
<servlet-mapping><servlet-name>MyServlet</servlet-name>
  <url-pattern>/</url-pattern></servlet-mapping> 
```

有关详细信息，请参阅任何[Java Servlet 教程](http://www.seas.upenn.edu/~cis330/jetty.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:25:34.470

您可能不想处理 Java EE 和整个 servlet 的事情，尤其是如果您不是来自“Java 世界”。

Scala 中有一些非常轻量级的 HTTP 工具包，例如 Blueeyes 或 Play mini，但我最喜欢的绝对是[Unfiltered](http://unfiltered.databinder.net/Unfiltered.html "未过滤")

[编辑：关于Rest API Server 的这个线程 Scala 框架](https://stackoverflow.com/questions/3678795/scala-framework-for-a-rest-api-server "Scala framework for a Rest API Server?")的更完整的答案？

# c# - FolderBrowserDialog 未显示在第二个表单上

> ID：11086326
> 
> 赞同：2
> 
> 时间：2012-06-18T15:44:08.577
> 
> 标签：c#, winforms, folderbrowserdialog

好的，这是我想要实现的主要本质以及它正在做的事情的症状。

我有一个主窗口窗体。在此表单上，用户可以单击一个按钮，该按钮将打开一个新的单独的表单。此表单将有一个按钮，该按钮应该显示一个 FolderBrowserDialog。相反，它只是锁定 form2 并且从不显示任何内容。

这基本上是我处理表单等的代码。

这是在我做了一些无趣的事情后加载的第一种形式。

```
FORM1.cs
//do stuff
//In a button.click method I do the following
Application.Run(new Form2(myParameters1, 2, 3)); 
```

这是从第一种形式调用的第二种形式

```
FORM2.cs
//do more stuff with the parameters on load
//user clicks on a button
private void button1_Click(object sender, EventArgs e)
{
    FolderBrowserDialog fbd = new FolderBrowserDialog();
    fbd.RootFolder = Environment.SpecialFolder.Desktop;
    fbd.Description = "This is the browser dialog box";

    if(fbd.ShowDialog() == DialogResult.OK)
    {
        //do stuff
    }
} 
```

单击按钮后，对话框不显示，form2 被锁定，无法执行任何操作。

我也尝试过改变

```
fbd.ShowDialog() 
```

至

```
fbd.ShowDialog(Form2.ActiveForm) 
```

结果相同。

任何帮助，将不胜感激！如果您需要更多信息，请告诉我，我可以尽我所能提供。

**编辑**

我忘了提（实际上完全忘了）打开第二种形式的方法是一个单独的线程。

所以第一个表单启动了一个线程，它打开了第二个表单，它应该打开一个不是它的对话框。现在我认为它与线程有关..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:17:33.300

我已经弄清楚了我的问题。最终是来自 Form1 的打开 Form2 的线程无法打开 DialogBoxes，因为它完全与 UI 线程分开。

我最终解决了使用该线程并完全消除了它，从而解决了我的问题。对话框按我的意愿打开了。

不过还是谢谢大家的回复！他们确实帮助我找出了我未能正确完成的其他一些事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-17T18:14:51.253

我有类似的问题。主 GUI 线程正在创建一个后台工作线程以写入数据库，但当后台线程失败时，用于显示自定义控制对话框以保存异常文件。此自定义对话框已正确显示，但不会显示用于打开 folderBrowserDialog 以保存异常文件的浏览按钮。我的自定义控件将在其标题栏中显示“未响应”。

我所做的不是直接调用自定义控件，而是像这样在 UI 线程本身上调用它。

```
void DBThread_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        if (e.Error != null)
        {                
            this.Invoke(new CrossThreadExceptionHandler(CatchInterThreadException), e.Error);                
        }
    } 
```

# java - 在创建 XSSFWorkbook 时阻止 Apache POI

> ID：11086330
> 
> 赞同：0
> 
> 时间：2012-06-18T15:44:22.317
> 
> 标签：java, apache-poi

我在 JDK 1.5 环境中使用 apache POI 3.7 并`-Xms256m -Xmx512m -XX:PermSize=64M -XX:MaxPermSize=1000M`作为 JVM 参数。

我写了这样的代码来读取 xlsx 文件，

```
File file = new File("C:\\D\\Data Book.xlsx");
InputStream inputStream = new FileInputStream(file);
OPCPackage opcPackage = OPCPackage.open(inputStream);
XSSFWorkbook workbook = new XSSFWorkbook(opcPackage); 
```

在第四行，它进入空闲状态。如果我删除 JVM 参数，它会抛出`OutOfMemoryError`. 我的文件大小是 6MB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:47:53.513

如果您有一个文件，则将其传入。使用 InputStream 需要将所有内容缓冲到内存中，这会占用空间。由于您不需要进行缓冲，因此不要！

如果您使用 POI 的最新夜间版本运行，那么这非常容易。您的代码变为：

```
File file = new File("C:\\D\\Data Book.xlsx");
OPCPackage opcPackage = OPCPackage.open(file);
XSSFWorkbook workbook = new XSSFWorkbook(opcPackage); 
```

否则，它非常相似：

```
File file = new File("C:\\D\\Data Book.xlsx");
OPCPackage opcPackage = OPCPackage.open(file.getAbsolutePath());
XSSFWorkbook workbook = new XSSFWorkbook(opcPackage); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T19:21:57.463

如果 using`OPCPackage`不是必需的，那么我会直接实例化：

```
InputStream inp = new FileInputStream("C:\\D\\Data Book.xlsx");
Workbook wb = WorkbookFactory.create(inp); 
```

请参阅[POI 快速指南](http://poi.apache.org/spreadsheet/quick-guide.html#ReadWriteWorkbook)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-03T16:04:38.947

很难相信这个问题已经有将近 8 年没有得到回答了。我已经对类似问题之一发布了相同的答案，让我也将其发布在这里。而不是 XSSFWorkbook（将整个 Excel 工作簿保存在内存中）尝试使用非常高效和高性能的流式 SXSSFWorkbook 类，如下所示：

```
SXSSFWorkbook workbook = new SXSSFWorkbook(100); 
```

其中 100 是将保留在内存中并实时处理的默认行数。

# c# - 将 Windows 事件 (WM_) 重定向到隐藏窗口

> ID：11086332
> 
> 赞同：1
> 
> 时间：2012-06-18T15:44:24.903
> 
> 标签：c#, wpf, windows, winapi, hook

我目前正在从事一个涉及大量挂钩的项目，该项目旨在以与“ [Steam Overlay](https://en.wikipedia.org/wiki/Steam_%28software%29#Steam_Overlay) ”相同的方式作为交互式产品的覆盖层运行。

挂钩部分实际上是完整的。我们有一个“不可见”的 WPF 应用程序，它执行 DLL 注入、挂钩 DirectX、将自身呈现为纹理，然后在被挂钩的应用程序上呈现该纹理。

![程序结构](../Images/fd1d8688a3963790b80d0d8feaced2e6.png)

我们遇到的困难是后半部分。获取用于覆盖的输入信息。正如您在图中看到的，简单的示例是按下按钮。我想做的实际上是捕获DirectX 应用程序的*所有*输入消息 (WM_x)，然后让 WPF 应用程序决定哪些消息与覆盖相关，哪些不相关。

我已经设法`WNDPROC`通过使用 ...

```
IntPtr _oldWindProc = GetWindowLong(MainWindowHandle, Win32Helper.GWL_WNDPROC);
WndProcDelegate _myProc = new Win32Helper.WndProc(WndProc);
SetWindowLong(MainWindowHandle, Win32Helper.GWL_WNDPROC, _myProc ); 
```

...这似乎运作良好。此时我可以将所有 WM_x 消息传递回 WPF 应用程序。但这就是我卡住的地方。我已经尝试过`PostMessage`，Spy++ 显示 WPF 窗口接收消息（实际上在 WPF 窗口内设置一个挂钩显示相同），但这似乎没有按预期工作。那么，我错过了什么？我应该回复某些 Windows 消息吗？我天真地假设它就像让 WPF 应用程序在正确的位置接收“WM_LBUTTONDOWN”并且按钮会按下一样简单。

任何指导将不胜感激。

更新：我可能已经掩盖了实际问题。我想将消息重定向到 WPF，就好像那是它们的预期目的地一样。我已经挂钩了这些消息并阻止它们进入 DirectX 应用程序。问题是如何将它们无缝地传递给 WPF 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:28:10.157

我会使用一个 dll`SetWindowsHookEx`来挂钩 directx 应用程序并将它的消息传递回主应用程序上的子类窗口。我已经在 C++ 中完成了这项工作，您应该可以使用 pinvoke 或其他方式在 C# 中完成这项工作。以下是 C++ 中的代码：

```
__declspec(dllexport) int _stdcall InstallHook(DWORD dwThreadId, HWND ExtrnHandle, HWND Apphandle)
{
    if (hHook==0)
            hWndApp = Apphandle;
            hWndHooked = ExtrnHandle;
            hHook = SetWindowsHookEx(WH_GETMESSAGE,(HOOKPROC) GetMsgProc, (HINSTANCE) hInstance, dwThreadId);
        if (hHook==0) return GetLastError();
    return 0;
} 
```

使用它来解开：

```
 __declspec(dllexport) int UnInstallHook(void)
{
    LRESULT result;
    if (hHook != 0){
        result = UnhookWindowsHookEx(hHook);
        if (result == 0) return GetLastError();
        hHook = 0;
    }
    return 0;
} 
```

然后在您的 dll 中使用此回调将消息传递回应用程序：

```
LRESULT CALLBACK GetMsgProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    MSG *lpMsg;

    if (nCode==HC_ACTION){
        lpMsg = (MSG *) lParam;
        //see if this is the window we are monitoring
        if (lpMsg->hwnd == hWndHooked){
            //forward the message to App
            ChangeMessage=false;
            SendMessage(hWndApp, lpMsg->message, lpMsg->wParam, lpMsg->lParam);
            if (ChangeMessage==true){//Did App make changes to the data?
                lpMsg->message = Shared_uMsg;
                lpMsg->wParam = Shared_wParam;
                lpMsg->lParam = Shared_lParam;

            }//end if change message

        }//end if correct hWnd
    }//end if nCode==Action     
    return(CallNextHookEx(hHook, nCode, wParam, lParam));
} 
```

另外，仅供参考，这里是 dll .cpp 文件顶部的代码、声明、设置共享数据的函数等：

```
#include "afxdisp.h" //this does #include <windows.h>
#include <shellapi.h>
#include "WINUSER.H"    
#include <fstream>
#include <iostream>
using namespace std;

#define WM_MOUSEWHEEL 0x020A 
#define COPY2CLIPBOARD 1 //for copying data from msflexgrid
#define COPY2FILE      2

/*---------------------------------------------
          Shared Variables
This data is shared between both prcesses.  The
VB App has access to these variables through the
function SetSharedData
---------------------------------------------*/
#pragma data_seg(".shared")
    bool ChangeMessage = false;
    int Shared_uMsg = 0;
    int Shared_wParam = 0;
    int Shared_lParam = 0;
    int CopyMode = COPY2FILE;
    HWND hWndApp = 0; //handle to subclassed Window
    HWND hWndHooked = 0;//handle to the hooked window
    HHOOK   hHook = 0;      // Hook handle for WH_GETMESSAGE

#pragma data_seg()
#pragma comment(linker, "/SECTION:.shared,RWS")

//---------------------------------------------
// Global Variables, specific to each process
//---------------------------------------------
    HINSTANCE   hInstance;  // Global instance handle for DLL

//--------------------------------------------
//        DLL entry-point
//--------------------------------------------
BOOL WINAPI DllMain(
    HINSTANCE hinstDLL,  // handle to DLL module
    DWORD fdwReason,     // reason for calling function
    LPVOID lpvReserved )  // reserved
{
    // Perform actions based on the reason for calling.
    switch( fdwReason ) 
    { 
        case DLL_PROCESS_ATTACH:
         // Initialize once for each new process.
         // Return FALSE to fail DLL load.
            hInstance = hinstDLL;//save dll handle for each process
            break;

        case DLL_THREAD_ATTACH:
         // Do thread-specific initialization.
            break;

        case DLL_THREAD_DETACH:
         // Do thread-specific cleanup.
            break;

        case DLL_PROCESS_DETACH:
         // Perform any necessary cleanup.
            break;
    }
    return TRUE;  // Successful DLL_PROCESS_ATTACH.
}

LRESULT CALLBACK GetMsgProc(int nCode, WPARAM wParam, LPARAM lParam);

__declspec(dllexport) void _stdcall SetSharedData(int uMsg, WPARAM wParam, LPARAM lParam)
{
        Shared_uMsg = uMsg;
        Shared_wParam = wParam;
        Shared_lParam = lParam;
        ChangeMessage = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:49:23.977

有太多的边缘原因导致这不能按预期工作，所以我求助于手动修补我想要的特定事件（基本上是鼠标事件）。

# c# - 运算符 ">" 不能应用于类型 'ulong' 和 'int'

> ID：11086333
> 
> 赞同：26
> 
> 时间：2012-06-18T15:44:28.573
> 
> 标签：c#, .net

我很想知道为什么 C# 编译器只给我第二个 if 语句的错误消息。

```
enum Permissions : ulong
{
    ViewListItems = 1L,
}

public void Method()
{
    int mask = 138612833;
    int compare = 32;

    if (mask > 0 & (ulong)Permissions.ViewListItems > 32)
    {
        //Works
    }

    if (mask > 0 & (ulong)Permissions.ViewListItems > compare)
    {
        //Operator '>' cannot be applied to operands of type 'ulong' and 'int'
    }
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-18T15:47:07.943

我一直在对此进行试验，使用 ILSpy 来检查输出，这就是我发现的。

显然，在您的第二种情况下，这是一个错误-您无法比较 a`ulong`和 an`int`因为没有可以强制两者的类型。A`ulong`可能对于 a 来说太大了`long`，并且 an`int`可能是负数。

但是，在您的第一种情况下，编译器很聪明。它意识到 const `1`> const`32`永远不是真的，并且根本不将您的`if`语句包含在编译输出中。（它应该对无法访问的代码发出警告。）如果您定义和使用 a`const int`而不是文字，或者即使您明确地转换文字（即`(int)32`），也是一样的。

但是*编译器*不是成功地将 a`ulong`与a 进行比较`int`，我们刚才说这是不可能的吗？

显然不是。那么这*是*怎么回事？

尝试按照以下方式做一些事情。（接受输入并写入输出，因此编译器不会编译任何东西。）

```
const int thirtytwo = 32;
static void Main(string[] args)
{
    ulong x = ulong.Parse(Console.ReadLine());
    bool gt = x > thirtytwo;
    Console.WriteLine(gt);
} 
```

这将编译，即使它`ulong`是一个变量，即使结果在编译时是未知的。看看 ILSpy 中的输出：

```
private static void Main(string[] args)
{
    ulong x = ulong.Parse(Console.ReadLine());
    bool gt = x > 32uL;        /* Oh look, a ulong. */
    Console.WriteLine(gt);
} 
```

因此，编译器实际上将您`const int`视为`ulong`. 如果你 make `thirtytwo = -1`，代码将无法编译，即使我们知道这`gt`将*永远*是正确的。编译器本身无法将 a`ulong`与 a 进行比较`int`。

另请注意，如果您使用`x`a`long`而不是 a `ulong`，编译器会生成`32L`而不是`32`整数，即使它不是*必须*的。（您可以在运行时比较 an`int`和 a `long`。）

这表明编译器在第一种情况下没有将`32`其视为 a ，因为它*必须*这样做，仅仅是因为它*可以*匹配 的类型。它使运行时不必强制常量，这只是当强制应该不可能的时候的奖励。`ulong`**`x`**

 *** * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-18T15:48:24.543

给出此错误消息的不是 CLR，而是编译器。

在您的第一个示例中，编译器将`32`其视为`ulong`（或可隐式转换为`ulong`eg的类型`uint`），而在您的第二个示例中，您已将类型显式声明为`int`. `>`接受 an`ulong`和 an的运算符没有重载，`int`因此会出现编译器错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-18T15:57:24.773

rich.okelly 和 rawling 的答案是正确的，为什么你不能直接比较它们。您可以使用[Convert](http://msdn.microsoft.com/en-us/library/system.convert.aspx "转变")类的[ToUInt64](http://msdn.microsoft.com/en-us/library/78c1y5th.aspx)方法来提升 int。

```
if (mask > 0 & (ulong)Permissions.ViewListItems > Convert.ToUInt64(compare))
{
} 
```**

# android - android tabhost 空指针

> ID：11086338
> 
> 赞同：0
> 
> 时间：2012-06-18T15:44:54.457
> 
> 标签：android, android-tabhost

我在这段代码的最后一行得到了一个奇怪的空指针异常：

```
tab.addTab(newSpec); 
```

这是代码：

```
private TabHost tab;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_friends);

    tab = (TabHost) findViewById(R.id.activity_friends_tab);

    addTab("Chat", ChatTab.class);
}
private void addTab(String title, Class<?> cls)
{       
    TabSpec newSpec = tab.newTabSpec(title);
    newSpec.setIndicator(title);
    Intent newIntent = new Intent(this, cls);
    newSpec.setContent(newIntent);
    tab.addTab(newSpec);
} 
```

不明白为什么。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:49:08.663

首先：清理你的项目。

然后，如果问题仍然存在，请查看 activity_friends.xml 和 TabHost 名称，您可能使用了错误的引用。

然后，如果您没有使用错误的引用，请将整个 LogCat 异常粘贴到此处。

然后，如果没有任何效果，只需将您的活动更改为 TabActivity，并将您的选项卡的引用更改为 @android:id/tabhost。然后你可以通过调用 this.getTabHost(); 来引用你的 TabHost。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:00:33.737

发现我的错误：我应该添加本地活动管理器并运行 tab.setup：

```
 LocalActivityManager mLocalActivityManager = new LocalActivityManager(
            this, false);
    mLocalActivityManager.dispatchCreate(savedInstanceState);
    tab.setup(mLocalActivityManager); 
```

# java - Trayicon mouseEntered 不起作用

> ID：11086341
> 
> 赞同：3
> 
> 时间：2012-06-18T15:45:01.913
> 
> 标签：java, mouseenter, trayicon

我有以下问题：我的鼠标输入方法不起作用，我不知道为什么。按下的鼠标效果很好，只有 mouseEntered 没有。

这是鼠标监听器：

```
MouseListener mouseListener = new MouseListener() {

            public void mouseClicked(MouseEvent e) {
                jpopup.setLocation(e.getX(), e.getY());
                jpopup.setInvoker(jpopup);
                jpopup.setVisible(true);
                System.out.println("Tray Icon - Mouse clicked!");                 
            }
            @Override
            public void mouseEntered(MouseEvent e) {
                System.out.println("Tray Icon - Mouse entered!");                 
            }

            public void mouseExited(MouseEvent e) {
                System.out.println("Tray Icon - Mouse exited!");                 
            }

            public void mousePressed(MouseEvent e) {
                System.out.println("Tray Icon - Mouse pressed!");                 
            }

            public void mouseReleased(MouseEvent e) {
                System.out.println("Tray Icon - Mouse released!");                 
            }
        }; 
```

这里是托盘图标：

```
trayIcon.setImageAutoSize(true);
trayIcon.addActionListener(actionListener);
trayIcon.addMouseListener(mouseListener); 
```

错误在哪里？我不知道...

编辑：我正在使用 eclipse，如果这很有趣......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T01:41:18.323

[http://docs.oracle.com/javase/7/docs/api/java/awt/TrayIcon.html#addMouseListener%28java.awt.event.MouseListener%29](http://docs.oracle.com/javase/7/docs/api/java/awt/TrayIcon.html#addMouseListener%28java.awt.event.MouseListener%29)

doc说不支持。

# asp.net-mvc - 约束实体框架中子实体的数量

> ID：11086342
> 
> 赞同：1
> 
> 时间：2012-06-18T15:45:04.780
> 
> 标签：asp.net-mvc, entity-framework, collections, constraints

# 底线在前面

是否有一种简洁的方法可以限制实体框架中可以属于父级的子实体的数量。我目前正在使用 4.3.1。

# 问题

我正在开发一个 ASP.NET MVC3 站点，该站点通过使用实体框架的数据访问层访问数据。我有一个 SearchList 实体，它与 Search 实体有多对多的关系。一个 SearchList 可能有多个 Search，一个 Search 可能属于多个 SearchList。

在站点工作流程的某一时刻，用户需要选择要在批量搜索中使用的搜索和其他项目。我们希望页面加载整个搜索列表。

SearchLists 可以变得非常大，作为测试，我们创建了一个包含 21,000 次搜索的列表。花了几秒钟，返回的数据大约是 9.5 MB，这是我们预期的，但是 jQueryUI 在尝试对这么多进行表化时感到窒息。

# 我们想要什么

所以我们想对任何搜索列表可以拥有的搜索数量施加限制。我可以通过应用程序并在其中放置一堆规则来检查集合的大小以及是否尝试添加的搜索加上当前的大小...... yada yada yada。

但是，如果有更好的方法（尤其是可以轻松输出 MVC 会拾取的错误消息的方法），我完全会采用这种方法。

我用谷歌搜索，并仔细阅读了许多 EF 博客，但无济于事。Constrain children and max number of children in collection 和类似搜索返回了关于 Linq 查询以及 Count 和 Max 方法的结果。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:59:27.857

没有内置方法，因此您必须自己编写此类验证代码。一些快速的想法：

*   例如，您可以为导航属性使用自定义集合，当您尝试添加超出阈值的其他搜索时，该属性将触发异常。它很简单，但它要求您加载所有搜索，它会出现并发问题，而且它可以在加载搜索列表和从数据库搜索期间触发。
*   您可以在 overriden 中处理它`SaveChanges`。您至少必须检查有多少搜索已经与搜索列表相关，但您仍然会遇到并发问题（如果其他请求尝试将搜索添加到同一个列表但只剩下一个地方 - 两者都可以成功检查并插入相关搜索）
*   您可以在数据库触发器中处理它 - 再次它会有并发问题

完全避免并发问题需要带有锁定提示的手写查询，以确保只有一个请求可以检查每个搜索列表的搜索次数并在原子事务中插入新搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:28:35.117

我最终选择了 CustomValidationAttribute，并取得了很大的成功。有关我的实施信息，请参见下文：

## 在 SearchList 实体中

```
 [NotMapped]
    public String ValidationMessage { get; set; }
    [CustomValidation(typeof(EntityValidation.EntityValidators), "ValidateSearchCount")]
    public virtual List<Search> Searches { get; set; }

    public static bool Create(ProjectContext db, SearchList searchList)
    {
        try
        {
            db.SearchLists.Add(searchList);
            db.SaveChanges();
            return true;
        }
        catch (DbEntityValidationException dbEx)
        {
            foreach (var validationErrors in dbEx.EntityValidationErrors)
            {
                foreach (var validationError in validationErrors.ValidationErrors)
                {
                    searchList.ValidationMessage += validationError.ErrorMessage;
                }
            }
            return false;
        }
        catch (Exception)
        {
            return false;
        }
    } 
```

## EntityValidators 类

```
 public static ValidationResult ValidateSearchCount(List<Search> Searches)
    {
        bool isValid;
        int count = Searches.Count();
        isValid = (count <= 5000 ? true : false);

        if (isValid)
        {
            return ValidationResult.Success;
        }
        else
        {
            return new ValidationResult("A maximum of 5000 searches may be added to a SearchList.");
        }
    } 
```

update 方法上有一个类似的异常块。这样，当 SaveChanges 被调用时，它会尝试验证实体及其子集合，并且当集合计数大于 5000 时，验证器将返回一条错误消息，该消息被异常处理程序捕获并存储在我的本地属性中控制器检查何时出现问题。

# java - 如何摆脱在 Maven 站点中调用的 [警告] 已弃用的 API

> ID：11086343
> 
> 赞同：2
> 
> 时间：2012-06-18T15:45:08.433
> 
> 标签：java, maven-2

`mvn site:site`我喜欢在调用项目时摆脱以下警告

```
[INFO] Generating "About" report. 
[WARNING] Deprecated API called - not org.apache.maven.doxia.sink.Sink instance and no SinkFactory available. Please update this plugin. 
[INFO] Generating "Issue Tracking" report. 
[WARNING] Deprecated API called - not org.apache.maven.doxia.sink.Sink instance and no SinkFactory available. Please update this plugin. 
[INFO] Generating "PMD Report" report. 
[WARNING] Deprecated API called - not org.apache.maven.doxia.sink.Sink instance and no SinkFactory available. Please update this plugin. 
[WARNING] Unable to locate Source XRef to link to - DISABLED 
[INFO] Generating "Continuous Integration" report. 
[WARNING] Deprecated API called - not org.apache.maven.doxia.sink.Sink instance and no SinkFactory available. Please update this plugin. 
[INFO] Generating "Source Repository" report. 
[WARNING] Deprecated API called - not org.apache.maven.doxia.sink.Sink instance and no SinkFactory available. Please update this plugin. 
[INFO] Generating "Project License" report. 
[WARNING] Deprecated API called - not org.apache.maven.doxia.sink.Sink instance and no SinkFactory available. Please update this plugin. 
[INFO] Generating "CPD Report" report. 
[WARNING] Deprecated API called - not org.apache.maven.doxia.sink.Sink instance and no SinkFactory available. Please update this plugin. 
```

我的 pom 部分如下所示：

```
 <reporting>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-project-info-reports-plugin</artifactId>
        <version>2.4</version>
        <reportSets>
          <reportSet>
            <reports>
              <report>index</report>
              <report>cim</report>
              <report>issue-tracking</report>
              <report>license</report>
              <report>scm</report>
            </reports>
          </reportSet>
        </reportSets>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-site-plugin</artifactId>
        <version>2.4</version>
      </plugin>            
    </plugins>
  </reporting> 
```

我`mvn --version`返回以下输出：

```
Apache Maven 2.2.1 (r801777; 2009-08-06 21:16:01+0200)
Java version: 1.6.0_10
Java home: /opt/jdk1.6.0_10/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux" version: "2.6.32-41-generic" arch: "i386" Family: "unix" 
```

不幸的是，我找不到需要更新的正确插件。更新/迁移到 maven-3.x 目前不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T22:06:05.110

我上周遇到了同样的问题。问题在于未使用正确版本的 maven-site 插件。这就是我所做的：

pom.xml：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-project-info-reports-plugin</artifactId>
    <version>2.1.1</version>
</plugin>
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-site-plugin</artifactId>
    <version>3.1</version>
</plugin> 
```

最后选择报告，我使用以下`<reports>`部分：

```
<project>
...
<plugins>
<reporting>
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-project-info-reports-plugin</artifactId>
    <version>2.5</version>
    <reportSets>
      <reportSet>
         <reports>
       <report>index</report>
       <report>project-team</report>
           <report>issue-tracking</report>
       <report>summary</report>
     </reports>
      </reportSet>
    </reportSets>
</plugin>
</plugins>
</reporting>
...
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:20:09.703

[将maven-site-plugin](http://maven.apache.org/plugins/maven-site-plugin/migrate.html)更新到 3.1 版。因为您也可以使用 Maven 2.2.1 的较新版本。

# forms - Yii：避免在表单对象中复制模型中的所有属性

> ID：11086344
> 
> 赞同：0
> 
> 时间：2012-06-18T15:45:10.510
> 
> 标签：forms, model, yii

所以我有一个这样的模型：

```
class MyClass 
{
     public $customer = null;
     public $address = null;
} 
```

像这样的形式：

```
class MyForm extends CFormModel
{ 
     public $customer = null;
     public $address = null;

     /**
     * Declares the validation rules.
     */
     public function rules()
     {
         return array(
         array('customer, address', 'required'),
         array('verifyCode', 'captcha', 'allowEmpty'=>!CCaptcha::checkRequirements()),
     );

     /**
      * Declares customized attribute labels.
      * If not declared here, an attribute would have a label that is
      * the same as its name with the first letter in upper case.
     */
     public function attributeLabels()
     {
         return array(
               'verifyCode'=>'Verification Code',
         );
     }
} 
```

我想做的是在我的表单中扩展模型，但是你不能在 PHP 中进行多对象继承。

我将如何做到这一点，以避免在表单中复制模型的所有字段属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:22:49.103

**组件行为的使用**

一个组件支持[mixin](http://en.wikipedia.org/wiki/Mixin)模式并且可以附加一个或多个行为。行为是一个对象，其方法可以通过收集功能而不是专门化（即普通类继承）的方式由其附加组件“继承”。一个组件可以附加多个行为，从而实现“多重继承”。

行为类必须实现`IBehavior`接口。大多数行为都可以从`CBehavior`基类扩展。如果需要将行为附加到模型，它也可以从[CModelBehavior](http://www.yiiframework.com/doc/api/1.1/CModelBehavior)或[CActiveRecordBehavior](http://www.yiiframework.com/doc/api/1.1/CActiveRecordBehavior)扩展，后者实现了特定于模型的附加功能。

要使用行为，必须首先通过调用行为的`attach()`方法将其附加到组件。然后我们可以通过组件调用行为方法：

```
// $name uniquely identifies the behavior in the component
$component->attachBehavior($name,$behavior);
// test() is a method of $behavior
$component->test(); 
```

可以像组件的普通属性一样访问附加的行为。例如，如果一个名为 tree 的行为附加到一个组件，我们可以使用以下方法获取对该行为对象的引用：

```
$behavior=$component->tree;
// equivalent to the following:
// $behavior=$component->asa('tree'); 
```

可以暂时禁用行为，使其方法无法通过组件使用。例如，

```
$component->disableBehavior($name);
// the following statement will throw an exception
$component->test();
$component->enableBehavior($name);
// it works now
$component->test(); 
```

附加到同一组件的两个行为可能具有相同名称的方法。在这种情况下，第一个附加行为的方法将优先。

当与[事件](http://www.yiiframework.com/doc/guide/1.1/en/basics.component#component-event)一起使用时，行为更加强大。一个行为，当被附加到一个组件时，可以将它的一些方法附加到组件的一些事件上。通过这样做，行为有机会观察或改变组件的正常执行流程。

行为的属性也可以通过它所附加的组件来访问。属性包括公共成员变量和通过行为的 getter 和/或 setter 定义的属性。例如，如果行为具有名为 xyz 的属性，并且该行为附加到组件 $a。然后我们可以使用表达式`$a->xyz`来访问行为的属性。

更多阅读：
[http ://www.yiiframework.com/wiki/44/behaviors-events](http://www.yiiframework.com/wiki/44/behaviors-events)
[http://www.ramirezcobos.com/2010/11/19/how-to-create-a-yii-behavior/](http://www.ramirezcobos.com/2010/11/19/how-to-create-a-yii-behavior/)

# python - 为什么 Django 在模板中不能识别这个

> ID：11086346
> 
> 赞同：0
> 
> 时间：2012-06-18T15:45:15.300
> 
> 标签：python, django

如果父级等于 1，我想显示我的顶级类别。topcats 是一个包含类别项目的查询集。但是，下面加星标的代码不起作用。它没有找到任何`cat`带有`parent = 1`. 知道为什么吗？

```
{% for cat in topcats %}
    **{% if cat.parent == 1 %}**
        <a href ="/x/{{cat.id}}/dir/"><h3>{{ cat.category }}</a></h3>
            {% for each in topcats %}
                 {% if each.parent == cat.id %}
                    <h5>{{ each }}</h5>
                 {% endif %}
            {% endfor %}
    {% endif %}
{% endfor %} 
```

**注意：** parent 是[`TreeForeignKey`](http://django-mptt.github.com/django-mptt/models.html#treeforeignkey-treeonetoonefield-treemanytomanyfield)数据库中的一个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:53:22.240

我会说`cat.parent`是一个[模型对象](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model)。

这应该适合你：

```
{% if cat.parent.pk == 1 %} 
```

然而，这是相当骇人听闻的，因为父节点的 id 不一定具有`1`. is_root_node [()](http://django-mptt.github.com/django-mptt/models.html#is-root-node)方法是一种更好的方法：

```
{% if cat.parent.is_root_node %} 
```

# python - 芹菜任务记录器不写

> ID：11086348
> 
> 赞同：0
> 
> 时间：2012-06-18T15:45:22.257
> 
> 标签：python, logging, celery

我对 celery 的记录器有疑问。我有一个渲染帧的函数。我记录了我生成的子进程的输出，但似乎只有每个工作人员从队列中挑选的第一个作业被写入。队列中的所有后续任务都不会生成日志文件。我也尝试过使用 python 自己的日志记录，并且发生了同样的问题。是否有我可能缺少的配置？

```
 @task(queue='rndr')
 def rndr(params):

     path      = get_logger_path(params)
     logger    = rndr.get_logger(logfile=path)    
     return render(params, logger) 
```

我以这种方式定义我的任务，因为我的重试记录器的定义不同，即 rndr_retry.get_logger...

我的 celeryconfig 如下所示：

```
 BROKER_HOST = "xxx.xxx.xxx.xxx"
 BROKER_PORT = 5672
 BROKER_USER = "xxxx"
 BROKER_PASSWORD = "xxxx"

 CELERY_RESULT_BACKEND = 'amqp'
 CELERY_DISABLE_RATE_LIMITS = True
 CELERY_ACKS_LATE = True
 CELERY_IMPORTS = ['lib.tasks.concatenate', 'lib.tasks.encode', 'lib.tasks.render',  'lib.tasks.still_image', 'lib.tasks.retry']
 CELERY_ROUTES = {'lib.tasks.encode':{'queue': 'encode'},
             'lib.tasks.concatenate':{'queue': 'encode'},
             'lib.tasks.still_image':{'queue': 'encode'},
             'lib.tasks.render':{'queue':'rndr'},
             'lib.tasks.retry':{'queue': 'retry'}
             } 
```

希望有人能解释为什么只有队列中的第一个任务才会写......

先感谢您。

更新：根据要求，这里是渲染方法的部分版本，没有所有细节......

```
def render(params, logger):

    #load params to local values

    try:
        #create subprocess
        output = child_proc.communicate()[0]

        logger.info('output')
        logger.info(output)       
        ret = child_proc.wait()                
        if ret not in [0,1]:
            raise Exception('subprocess failed')              

    except Exception, exc:
        logger.info(' '.join(str(x) for x in exc.args))
        #mark as failed...
        return          

    return 
```

我应该补充一点，该文件不仅不会在后续任务中被写入，它甚至不会创建日志文件......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T20:37:28.467

经过一些试验，我注意到传递的日志文件没有被创建。在将文件传递给 get_logger() 之前，我添加了一个方法来确保文件存在。仍然没有运气。由于我的大多数任务都运行子进程，因此我决定采用更简单的方法并打开一个文件对象并将其传递给 stdout 和 stderr 中的子进程调用，并在适当的情况下关闭文件对象。无论我运行多少任务，这似乎都有效。我应该注意每个任务都写入一个唯一的文件。

Anyhoo，我想我会写信给 celery 开发人员并将其标记为错误。我在开发论坛的某个地方读到过，芹菜的记录器需要一些爱。

干杯。

更新：

在与 celery 的开发人员交谈后，得出的结论是记录器不应该以这种方式使用。一个任务的记录实例开始，但重复的任务不会记录。我最终只是简单地写入一个文件来规避 Logging 模块的问题。因为每个渲染任务都使用一个唯一的文件，所以这个技巧不会导致任何冲突。

# php - 教义2命令不起作用

> ID：11086352
> 
> 赞同：2
> 
> 时间：2012-06-18T15:45:41.677
> 
> 标签：php, symfony, doctrine-orm

我有以下简单的查询：

```
$qb = $em->createQueryBuilder();
$qb
    ->select('o')
    ->from('LibraryBundle:Publication', 'o')
    ;

    $qb
        ->join('o.translations', 't');

$qb
    ->orderBy('o.published_at', 'DESC')
    ->setMaxResults($count); 
```

没有加入一切正常，但加入顺序不起作用，我得到了第一条记录，而不是最后一条。出版关系：

```
/**
 * @ORM\OneToMany(
 *     targetEntity="PublicationTranslation",
 *     mappedBy="translatable",
 *     cascade={"persist"}
 * )
 */
private $translations; 
```

我做错了什么？

**UPD**：此 DQL 生成以下 SQL 查询，但如果我在 phpMyAdmin 中尝试此命令也是错误的：

```
SELECT
    p0_.id AS id0,
    /* a number of fields */
    p1_.translatable_id AS translatable_id20
FROM publications p0_
INNER JOIN publication_translation p1_ ON p0_.id = p1_.translatable_id
ORDER BY p0_.published_at DESC LIMIT 3 
```

**UPD2**：我用这段代码解决了我的问题，但我仍然不明白为什么排序`published_at`不起作用：

```
$qb = $em->createQueryBuilder();
$qb
     ->from('ItopLibraryBundle:Publication', 'o')
;

$qb
     ->select('o, t')
     ->join('o.translations', 't');

$qb
     ->orderBy('o.id', 'DESC')
     ->groupBy('o.id')
     ->setMaxResults($count); 
```

# mysql - mysql等效表达式为'0000-00-00 00:00:00'

> ID：11086354
> 
> 赞同：5
> 
> 时间：2012-06-18T15:46:04.903
> 
> 标签：mysql

我想知道是否存在比这更短的表达式：

```
'0000-00-00 00:00:00'

SELECT id FROM orders WHERE posted='0000-00-00 00:00:00' ORDER BY id DESC LIMIT 1; 
```

我的意思是：

```
SELECT id FROM orders WHERE posted=null ORDER BY id DESC LIMIT 1; 
```

我希望这是您想要看到的架构：

```
array(19) {
  ["TABLE_CATALOG"]=>
  NULL
  ["TABLE_SCHEMA"]=>
  string(13) "teleprintfejl"
  ["TABLE_NAME"]=>
  string(13) "megrendelesek"
  ["COLUMN_NAME"]=>
  string(7) "posted"
  ["ORDINAL_POSITION"]=>
  string(2) "20"
  ["COLUMN_DEFAULT"]=>
  NULL
  ["IS_NULLABLE"]=>
  string(2) "NO"
  ["DATA_TYPE"]=>
  string(8) "datetime"
  ["CHARACTER_MAXIMUM_LENGTH"]=>
  NULL
  ["CHARACTER_OCTET_LENGTH"]=>
  NULL
  ["NUMERIC_PRECISION"]=>
  NULL
  ["NUMERIC_SCALE"]=>
  NULL
  ["CHARACTER_SET_NAME"]=>
  NULL
  ["COLLATION_NAME"]=>
  NULL
  ["COLUMN_TYPE"]=>
  string(8) "datetime"
  ["COLUMN_KEY"]=>
  string(0) ""
  ["EXTRA"]=>
  string(0) ""
  ["PRIVILEGES"]=>
  string(31) "select,insert,update,references"
  ["COLUMN_COMMENT"]=>
  string(0) ""
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T15:55:32.327

我猜那`posted`是一个`DATETIME`. 您可以使用`0`.

```
posted = '0000-00-00 00:00:00' 
```

是相同的

```
posted = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:48:56.247

这取决于您的结构，当您创建它时，您可以使用 null 作为默认值，当您进行选择时，您将使用：

```
SELECT id FROM orders WHERE posted IS null ORDER BY id DESC LIMIT 1; 
```

**编辑：**

```
mysql> create table tiempo (fecha datetime);
Query OK, 0 rows affected (0.04 sec)

mysql> insert into tiempo values ();
Query OK, 1 row affected (0.00 sec)

mysql> select * from tiempo;
+-------+
| fecha |
+-------+
| NULL  |
+-------+
1 row in set (0.00 sec)

mysql> insert into tiempo values ('2000-02-02 02:02:02');
Query OK, 1 row affected (0.00 sec)

mysql> select * from tiempo;
+---------------------+
| fecha               |
+---------------------+
| NULL                |
| 2000-02-02 02:02:02 |
+---------------------+
2 rows in set (0.00 sec)

mysql> select * from tiempo where fecha is not null;
+---------------------+
| fecha               |
+---------------------+
| 2000-02-02 02:02:02 |
+---------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T15:49:02.237

```
SELECT max(id) as id FROM orders WHERE posted=0; 
```

# php - 使用 AJAX 设置 JS var 和 PHP var

> ID：11086358
> 
> 赞同：-1
> 
> 时间：2012-06-18T15:46:10.580
> 
> 标签：php, javascript, ajax, variables

我有一个 php 脚本，用于监视目录中的最新 json 文件（如下）。然后在 javascript 中，我解析并显示该文件中的数据。javascript 每 x 分钟重新加载一次数据。我不会知道文件的名称，只是因为它将包含 json 数据并使用最新的数据。

PHP 脚本将最近的文件存储在数组 fileList[0] 中。我想在不刷新整个页面的情况下将其传递给 javascript，所以我检查了这个[stackoverflow 帖子](https://stackoverflow.com/questions/9945027/passing-php-variable-to-jquery-without-refresh)，发现可以对 php 脚本进行 ajax 调用，但该示例更新了页面上的元素。

有没有办法更新 javascript 变量？我想可能将文件名作为隐藏元素并在刷新数据之前进行抓取，但这似乎很粗糙。

```
<?php
date_default_timezone_set('America/New_York');

$files = glob('json/*.*', GLOB_BRACE);
usort($files, 'filemtime_compare');

function filemtime_compare($a, $b)
{
    return filemtime($b) - filemtime($a);  // Order newest to oldest
}

$i = 0;
$show = 1;  // Number of new files to show.
$fileList = array();

foreach($files as $file)
{
    if($i == $show) break; else ++$i;
    array_push($fileList, $file);
}

//echo $fileList[0] // DEBUG: Make sure I have the right file.
?> 
```

阿贾克斯：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function loadXMLDoc()
{
// This will send a request to a PHP page
$.ajax({
var jsonURL = "";
    url: "phpDir.php",
    dataType: "html",
    success: function(data){
        // Place the returned data into your content

    }
    jsonURL = $fileList[0];

});
</script>
</head>
<body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:00:01.577

To answer your question "Is there a way to update a javascript variable?"

You would do this:

```
var jsonURL = '';

function loadXMLDoc() {
    // This will send a request to a PHP page
    $.ajax({
        url: "phpDir.php",
        dataType: "JSON",
        success: function(data){
            jsonURL = data.url;
        }
    });
} 
```

For ease of communication I have set the dataType to JSON. So PHP output would need to be json_encoded()ed:

```
<?php
    $output = array('url' => $fileList[0]); // or whatever URL you want to return

    echo json_encode($output);
?> 
```

# java - 接收广播 Intent 时出错 { act=android.net.wifi.SCAN_RESULTS }

> ID：11086362
> 
> 赞同：1
> 
> 时间：2012-06-18T15:46:24.953
> 
> 标签：java, android, android-intent, broadcastreceiver

好的，完整的错误是

```
06-19 01:07:57.421: E/AndroidRuntime(4478): java.lang.RuntimeException: Error 
receiving broadcast Intent { act=android.net.wifi.SCAN_RESULTS } in 
com.blucalc.netfind.WiFiScanReceiver@40521ba0 
```

com.blucalc.netfind 是我的包 WiFiScanReceiver 是它崩溃的类。

课程在这里：

```
package com.blucalc.netfind;

import java.util.List;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.wifi.ScanResult;

public class WiFiScanReceiver extends BroadcastReceiver {
    NetworkfinderActivity netfinder;

    public WiFiScanReceiver(NetworkfinderActivity netfinder) {
        super();
        this.netfinder = netfinder;
    }

    @Override
    public void onReceive(Context c, Intent intent) {
        System.out.println("onReceive(Context=" + c.toString() + "Intent="
                + intent.toString());
        List<ScanResult> results = netfinder.wifi.getScanResults();
        netfinder.processResults(results);
    }

} 
```

NetworkfinderActivity 是主要的类。

该错误真正奇怪的是，它仅在第二次调用此函数时发生。是否因为我不知道的不同数据，我无法测试。

有人可以帮帮我吗？

编辑1：根据要求，androidmanifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.blucalc.netfind"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".NetworkfinderActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是主要课程。所有的乐趣都发生在哪里。

```
//some code borrowed from http://marakana.com/forums/android/examples/40.html
package com.blucalc.netfind;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.IntentFilter;
import android.os.Bundle;
import android.net.wifi.*;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.*;

public class NetworkfinderActivity extends Activity {
    /** Called when the activity is first created. */
    WifiManager wifi;
    BroadcastReceiver receiver;
    List<FrameLayout> netlist;
    LinearLayout ll;
    Button b;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        System.out.println("start of main constructor");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //a couple interface elements I want to access
        ll = (LinearLayout)findViewById(R.id.networkList);
        b = (Button)findViewById(R.id.refreshButton);
        //initialisation of some memory
        netlist=new ArrayList<FrameLayout>();
        //where all network info comes from
        wifi=(WifiManager)getSystemService(WIFI_SERVICE);
        // Register Broadcast Receiver
        receiver = new WiFiScanReceiver(this);
        registerReceiver(receiver, new IntentFilter(
                WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));

        b.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {;
            System.out.println("clicked");
                ll.removeAllViews();
                netlist.clear();

                wifi.startScan();
            }
        });
        System.out.println("end of main constructor");
    }

    @Override
    public void onStop() {
        unregisterReceiver(receiver);
    }
    public void processResults(List<ScanResult> results)
    {
        System.out.println("processResults(results "+results.toString());
        ll.removeAllViews();
        netlist.clear();
        for (ScanResult result:results)
        {
            readResult(result);
        }
        System.out.println("end of processResults");

    }
    public void readResult(ScanResult result)
    {
        System.out.println("readResult(result "+result.toString());
        FrameLayout frame=new FrameLayout(this);
        TextView ssid=new TextView(this);
        TextView strength=new TextView(this);
        System.out.println("1");
        int level=result.level;
        System.out.println("level="+level);
        int signal=WifiManager.calculateSignalLevel(level, 100)+1;
        //signal will be strength of the signal as a percent (from 1 to 100)
        System.out.println("signal="+signal);

        strength.setText(new Integer(signal).toString());
        ssid.setText(result.SSID);
        TextView cheat=new TextView(this);
        cheat.setText(result.toString());

//      frame.addView(ssid);
//      frame.addView(strength);
        frame.addView(cheat);

        netlist.add(frame);
        ll.addView(netlist.get(netlist.size()-1));
        System.out.println("end of readResults");
    }

} 
```

最后但并非最不重要的是，这是整个输出，以及所有错误消息。

```
06-20 20:40:06.835: I/ApplicationPackageManager(2399): cscCountry is not German : XSA
06-20 20:40:06.835: I/System.out(2399): start of main constructor
06-20 20:40:06.867: V/WifiProgressStore(2399): WifiProgressStore Created
06-20 20:40:06.867: I/System.out(2399): end of main constructor
06-20 20:40:16.765: I/System.out(2399): clicked
06-20 20:40:17.351: I/System.out(2399): onReceive(Context=com.blucalc.netfind.NetworkfinderActivity@40518050Intent=Intent { act=android.net.wifi.SCAN_RESULTS }
06-20 20:40:17.363: I/System.out(2399): processResults(results [SSID: BluCalculator, BSSID: f4:ec:38:a9:1d:56, capabilities: [WPA-PSK-TKIP+CCMP][WPA2-PSK-TKIP+CCMP][WPS], level: -51, frequency: 2412, SSID: BigAir, BSSID: 06:27:22:b3:41:7e, capabilities: , level: -72, frequency: 2437, SSID: BigAir, BSSID: 06:27:22:5f:56:d8, capabilities: , level: -87, frequency: 2437]
06-20 20:40:17.367: I/System.out(2399): readResult(result SSID: BluCalculator, BSSID: f4:ec:38:a9:1d:56, capabilities: [WPA-PSK-TKIP+CCMP][WPA2-PSK-TKIP+CCMP][WPS], level: -51, frequency: 2412
06-20 20:40:17.375: I/System.out(2399): 1
06-20 20:40:17.375: I/System.out(2399): level=-51
06-20 20:40:17.375: I/System.out(2399): signal=100
06-20 20:40:17.378: I/System.out(2399): end of readResults
06-20 20:40:17.382: I/System.out(2399): readResult(result SSID: BigAir, BSSID: 06:27:22:b3:41:7e, capabilities: , level: -72, frequency: 2437
06-20 20:40:17.390: I/System.out(2399): 1
06-20 20:40:17.390: I/System.out(2399): level=-72
06-20 20:40:17.394: D/AndroidRuntime(2399): Shutting down VM
06-20 20:40:17.394: W/dalvikvm(2399): threadid=1: thread exiting with uncaught exception (group=0x40015578)
06-20 20:40:17.402: E/AndroidRuntime(2399): FATAL EXCEPTION: main
06-20 20:40:17.402: E/AndroidRuntime(2399): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.net.wifi.SCAN_RESULTS } in com.blucalc.netfind.WiFiScanReceiver@40520ec0
06-20 20:40:17.402: E/AndroidRuntime(2399):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:722)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at android.os.Handler.handleCallback(Handler.java:587)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at android.os.Looper.loop(Looper.java:123)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at android.app.ActivityThread.main(ActivityThread.java:3687)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at java.lang.reflect.Method.invokeNative(Native Method)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at java.lang.reflect.Method.invoke(Method.java:507)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at dalvik.system.NativeStart.main(Native Method)
06-20 20:40:17.402: E/AndroidRuntime(2399): Caused by: java.lang.ArithmeticException: divide by zero
06-20 20:40:17.402: E/AndroidRuntime(2399):     at android.net.wifi.WifiManager.calculateSignalLevel(WifiManager.java:957)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at com.blucalc.netfind.NetworkfinderActivity.readResult(NetworkfinderActivity.java:79)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at com.blucalc.netfind.NetworkfinderActivity.processResults(NetworkfinderActivity.java:65)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at com.blucalc.netfind.WiFiScanReceiver.onReceive(WiFiScanReceiver.java:23)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
06-20 20:40:17.402: E/AndroidRuntime(2399):     ... 9 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T16:06:21.163

**答案已更新**

如果您查看堆栈跟踪，您会发现另一个指出真正问题的异常：

```
06-20 20:40:17.402: E/AndroidRuntime(2399): Caused by: java.lang.ArithmeticException: divide by zero
06-20 20:40:17.402: E/AndroidRuntime(2399):     at android.net.wifi.WifiManager.calculateSignalLevel(WifiManager.java:957)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at com.blucalc.netfind.NetworkfinderActivity.readResult(NetworkfinderActivity.java:79)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at com.blucalc.netfind.NetworkfinderActivity.processResults(NetworkfinderActivity.java:65)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at com.blucalc.netfind.WiFiScanReceiver.onReceive(WiFiScanReceiver.java:23)
06-20 20:40:17.402: E/AndroidRuntime(2399):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
06-20 20:40:17.402: E/AndroidRuntime(2399):     ... 9 more 
```

注意说的部分

```
 6-20 20:40:17.402: E/AndroidRuntime(2399): Caused by: java.lang.ArithmeticException: divide by zero 
```

您尝试访问的方法 ( `calculateSignalLevel`) 中有一个已知[错误](http://code.google.com/p/android/issues/detail?id=2555)。您可以在[此](https://stackoverflow.com/questions/2873469/issue-with-wifimanager-calculatesignallevelrssi-5)`calculateSignalLevel`问题中找到与使用相关的帖子（包括 的代码实现`calculateSignalLevel`）（另请注意 Ridcully 对 Lars 回答的评论）。

问题很可能是您在`100`这里使用的：

```
WifiManager.calculateSignalLevel(level, 100); 
```

当此数字大于 45 时，您将获得除以零的异常。尝试使用值为 100 的方法逐步执行`partitionLevel`并观察结果。

# c# - 如何将这 n 个方法变成单个泛型方法？

> ID：11086363
> 
> 赞同：0
> 
> 时间：2012-06-18T15:46:26.383
> 
> 标签：c#, generics

我有一个这样的基类：

```
public class BaseResponse
{
  public string ErrorMessage { set;get;}
} 
```

还有一些继承自此的子类：

```
public class Person:BaseResponse
{
  public string FirstNAme { set;get;}
}

public class Phone:BaseResponse
{
  public string SerialNumber { set;get;}
}

public class Car :BaseResponse
{
  public string Year{ set;get;}
} 
```

现在我想将`ErrorMessage`此类的每个实例的属性设置为不同的值。目前这就是我正在做的事情：

```
public Phone GetPhoneError(Phone objPhone)
{
  objPhone.ErrorMessage="Err msg related to Phone";
  return objPhone;
}

public Person GetPersonError(Person objPerson )
{
  objPerson .ErrorMessage="Err msg related to Person";
  return objPerson ;
}

... another similar method for Car also 
```

有什么方法可以使这个方法成为通用格式，这样我就不需要 3 个单独的方法来设置错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:53:38.723

```
public T GetError<T>(T obj) where T: BaseResponse
{
  obj.ErrorMessage= string.Format("Err msg related to {0}", typeof(T).Name);
  return obj;
} 
```

我不知道错误消息是通用的还是自定义的。如果是这样，则将消息作为参数传递。

为什么你需要一个方法呢？是因为你简化了问题吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T15:54:26.477

因此，在您的基类中，您应该创建一个名为 SetError 的虚拟方法（您的 GetError 但具有正确的符号）。

```
public abstract string GetErrorMessage(); //In Base Class so that why each implementation will set the correct error message 
```

然后在您的基类中 - 为什么您需要返回您正在修改的相同对象？

```
public virtual void SetErrorMessage()
{
   this.ErrorMessage = GetErrorMessage();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:49:51.453

您应该能够拥有这样的通用方法：

```
public object GetError(BaseResponse response)
{
   response.ErrorMessage = "whatever";
   return response;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T15:56:23.010

为什么不制造财产`virtual`，在那种情况下不需要`set`？：

```
public class BaseResponse
{
  public virtual string ErrorMessage { get;}
}

public class Person:BaseResponse
{
  .....
  public override string ErrorMessage {get { return "Err msg related to Person";}}
}

public class Phone:BaseResponse
{
  ......
  public override string ErrorMessage {get { return "Err msg related to Phone";}}
} 
```

等等其他人....

# php - 对于数组 PHP 中的每个

> ID：11086365
> 
> 赞同：1
> 
> 时间：2012-06-18T15:46:30.877
> 
> 标签：php, arrays, loops

我想在 PHP 文件中的数组中回显每个日期。现在我的代码是

```
foreach ($result_array as $date) {
   echo $date;
} 
```

这导致

```
ArrayArrayArrayArrayArrayArray 
```

如何修改我的代码以显示每个日期而不是数组？

*编辑*

我正在像这样构建数组......

```
 $result_array =  array();
    $result_set = mysql_query("SELECT DISTINCT `saledate` FROM `phoneappdetail` WHERE salebarn = 'OSI'");

    while ( $row = mysql_fetch_array($result_set) ) {
        $result_array[] = $row;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T15:49:19.553

它打印 Array 因为`$date`是数组，请像这样修改您的脚本：

```
foreach ($result_array as $date) {
   echo $date['saledate'];
} 
```

阅读有关[mysql_fetch_array](http://php.net/manual/en/function.mysql-fetch-array.php)如何工作的更多信息，它返回数组（索引、关联或两者），因此您需要选择要使用的字段。

[手册](http://php.net/manual/en/function.mysql-fetch-array.php)中的注释：

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：
> 
> mysqli_fetch_array()
> 
> PDOStatement::fetch()

# f# - 声明变量而不赋值

> ID：11086368
> 
> 赞同：9
> 
> 时间：2012-06-18T15:46:40.100
> 
> 标签：f#

有什么方法可以在 F# 中声明一个新变量而不给它赋值？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-18T15:57:30.757

见艾丹的评论。

如果你坚持，你可以这样做：

```
let mutable x = Unchecked.defaultof<int> 
```

这将分配绝对零值（`0`对于数字类型，`null`对于引用类型，对于值类型，结构零）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-19T07:34:11.073

*知道作者为什么*在 F# 中需要它会很有趣（预期用途的简单示例就足够了）。

*但我猜你可能*在 C# 中使用未初始化变量的常见情况之一是当你调用带`out`参数的函数时：

```
TResult Foo<TKey, TResult>(IDictionary<TKey, TResult> dictionary, TKey key)
{
    TResult value;
    if (dictionary.TryGetValue(key, out value))
    {
        return value;
    }
    else
    {
        throw new ApplicationException("Not found");
    }
} 
```

幸运的是，在 F# 中，您可以使用更好的语法来处理这种情况：

```
let foo (dict : IDictionary<_,_>) key = 
    match dict.TryGetValue(key) with
    | (true, value) -> value
    | (false, _) -> raise <| ApplicationException("Not Found") 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-18T16:23:54.607

您还可以使用[显式字段](http://msdn.microsoft.com/en-us/library/dd469494.aspx)语法：

```
type T =
  val mutable x : int 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-19T12:48:40.200

我同意所有说“不要这样做”的人的观点。但是，如果您确信您确实需要这样做，您可以这样做：

```
let mutable naughty : int option = None 
```

...然后稍后分配一个值。

```
naughty <- Some(1) 
```

但请记住，所有说过“改变你的方法”的人可能都是对的。我全职使用 F# 编写代码，而且我从来不需要声明未分配的“变量”。

还有一点：虽然你说使用 F# 不是你的选择，但我预测你很快就会认为自己很幸运能够使用它！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-18T15:56:01.153

F# 变量在默认情况下是不可变的，因此您以后*无法*赋值。因此，在没有初始值的情况下声明它们会使它们毫无用处，因此没有机制可以这样做。

可以说，可变变量声明可以在没有初始值的情况下声明并且仍然有用（它可以像 C# 变量一样获得初始默认值），但 F# 的语法不支持这一点。我猜这是为了保持一致性，并且因为可变变量插槽不是惯用的 F#，所以几乎没有动力制作特殊情况来支持它们。

# bash - 需要调整 Windows cmd 脚本以在 bash 中工作

> ID：11086371
> 
> 赞同：0
> 
> 时间：2012-06-18T15:47:01.050
> 
> 标签：bash, cmd

我目前正在使用这个脚本来移动一些文件并运行一些其他命令：

* * *

```
@echo off
setlocal disableDelayedExpansion

set "src=sourcePath"
set "dst=destinationPath"
set "search=1080p"

for /r "%src%" %%F in (*%search%*) do (
  set "full=%%~fF"
  set "name=%%~nxF"
    setlocal enableDelayedExpansion
    copy "!full!" "%dst%\!name:%search%=!"
    endlocal
)
REM call your batch script here to process the copied files 
```

* * *

任何人都可以帮助我将其调整为 bash，以便我可以在 linux 中运行它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:54:23.010

在不知道所有文件名的确切格式的情况下，它更难，但你可以尝试这样的事情：

```
#!/bin/bash

files=$(find ./ -type f -name _1080p.*)

for file in ${files[@]} ; do
  new_file=$( echo $file | sed -e 's/_1080p//' )
  cp $file $new_file
  ## add further commands on $new_file here.
done 
```

可以通过在 find 命令中添加正则表达式来改进，并根据需要调整 sed 行以重命名文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:06:51.363

所以如果我理解你，

`file2=$(echo $file | sed -e "s/[1080p]//g")`

`cp /sourcepath/$file destinationpath/$file2`

应该在你的 for 语句中工作。

# amazon-ec2 - 自动缩放：新创建的实例总是 OutOfService

> ID：11086376
> 
> 赞同：2
> 
> 时间：2012-06-18T15:47:10.540
> 
> 标签：amazon-ec2, amazon, load-balancing, autoscaling

我已经使用这些步骤设置了自动缩放...

> $ elb-create-lb autoscalelb --headers --listener "lb-port=80,instance-port=80,protocol=http" --listener "lb-port=443,instance-port=443,protocol=tcp" --availability-zones us-east-1d
> 
> $ elb-describe-lbs 自动缩放lb
> 
> $ elb-register-instances-with-lb autoscalelb --instances i-ee364697
> 
> $ elb-configure-healthcheck autoscalelb --headers --target "TCP:80" --interval 5 --timeout 3 --unhealthy-threshold 2 --healthy-threshold 4
> 
> $ as-create-launch-config autoscalelc --image-id ami-baba68d3 --instance-type t1.micro
> 
> $ as-create-auto-scaling-group autoscleasg --availability-zones us-east-1d --launch-configuration autoscalelc --min-size 1 --max-size 5 --desired-capacity 1 --load-balancers自动缩放lb
> 
> $ as-describe-auto-scaling-groups autoscleasg
> 
> $ as-put-scaling-policy MyScaleUpPolicy --auto-scaling-group autoscleasg --adjustment=1 --type ChangeInCapacity --cooldown 300
> 
> $ mon-put-metric-alarm MyHighCPUAlarm --comparison-operator GreaterThanThreshold --evaluation-periods 1 --metric-name CPUUtilization --namespace "AWS/EC2" --period 600 --statistic Average --threshold 80 --alarm -actions arn:aws:autoscaling:us-east-1:616259365041:scalingPolicy:46c2d3b3-7f29-42b6-ab64-548f45de334f:autoScalingGroupName/autoscleasg:policyName/MyScaleUpPolicy --dimensions "AutoScalingGroupName=autoscleasg"
> 
> $ as-put-scaling-policy MyScaleDownPolicy --auto-scaling-group autoscleasg --adjustment=-1 --type ChangeInCapacity --cooldown 300
> 
> $ mon-put-metric-alarm MyLowCPUAlarm --comparison-operator LessThanThreshold --evaluation-periods 1 --metric-name CPUUtilization --namespace "AWS/EC2" --period 600 --statistic Average --threshold 50 --alarm -actions arn:aws:autoscaling:us-east-1:616259365041:scalingPolicy:30ccd42c-06fe-401a-8b8f-a4e49bbb9c7d:autoScalingGroupName/autoscleasg:policyName/MyScaleDownPolicy --dimensions "AutoScalingGroupName=autoscleasg"

在此之后我运行这个命令：

> $ as-describe-auto-scaling-groups autoscleasg --headers

回复：

> AUTO-SCALING-GROUP GROUP-NAME LAUNCH-CONFIG AVAILABILITY-ZONES LOAD-BALANCERS MIN-SIZE MAX-SIZE DESIRED-CAPACITY AUTO-SCALING-GROUP autoscleasg autoscalelc us-east-1d autoscalelb
> 1 5 1 实例实例 ID 可用性-区域状态状态 LAUNCH-CONFIG 实例 i-acf48bd5 us-east-1d InService 健康 autoscalelc

接着：

> $ elb-describe-instance-health autoscalelb --headers

表明：

> INSTANCE_ID INSTANCE_ID 状态描述
> 原因代码 INSTANCE_ID i-ee364697 InService N/A
> N/A INSTANCE_ID i-acf48bd5 OutOfService 实例至少连续失败了 UnhealthyThreshold 数量的健康检查。实例

我的第一个问题是：

当 Main 实例没有负载时，它会自动创建一个额外的实例。

其次，新创建的实例总是 OutOfService。

如果我使用以下命令将 Min Size 更改为 0：

> $ as-update-auto-scaling-group autoscleasg --launch-configuration autoscalelc --availability-zones us-east-1d --min-size 0 --max-size 5

并尝试使用 xen 加载实例：

> hg 克隆[http://xenbits.xensource.com/xen-unstable.hg](http://xenbits.xensource.com/xen-unstable.hg)

自动缩放不创建任何实例。即使我在最多 5 个会话上运行以上命令，CPU 利用率也达到 100%，但仍然没有创建实例。

请帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T00:40:05.533

我不确定您想要实现什么，但如果您想使用自动缩放功能根据流量增加或减少添加更多实例，您需要使用负载均衡器参数（即延迟）：

将您的更改为：
--namespace='AWS/ELB'
--metric-name Latency
--period 60（这非常快）
--threshold 2.0（这非常低）

为了测试它是否有效，我使用 Apache Bench，我在多个微实例上运行以下命令

```
$ ab -n 10000 -c 10 http://<your ELB>.us-east-1.elb.amazonaws.com/index.php 
```

# jquery - jQuery最后一个元素

> ID：11086377
> 
> 赞同：0
> 
> 时间：2012-06-18T15:47:12.990
> 
> 标签：jquery

```
 $(':input').blur(function () {
            $(this).css('border', 'solid 1px #ccc');
            // Check if last input and do line below
            //if(condition if $(this) is last element)
            //   $('#someOtherId').focus();
        }); 
```

在上面的代码中，如何知道 id $(this) 是所有选定输入的最后一个输入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:50:17.697

尝试如下，

```
var $input = $(':input');
$input.blur(function () {
    $(this).css('border', 'solid 1px #ccc');
    // Check if last input and do line below
    if ($input.index(this) == $input.length - 1) {
         //$('#someOtherId').focus();
    }
}); 
```

**演示：http:** [//jsfiddle.net/skram/eYZU5/3/](http://jsfiddle.net/skram/eYZU5/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T15:50:07.183

试试这个：

```
$(':input').blur(function() {
    if ($('input:last').is(this)) {
        // do something with last
        $(this).css('color', 'red');
    }
    $(this).css('border', 'solid 1px #ccc');
}); 
```

### [工作样本](http://jsfiddle.net/eYZU5/9/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T15:50:24.247

我不确定您所说的“所有选定的输入”是什么意思，但您可以使用`.is()`和`:last`选择器进行快速检查。

```
$(':input').blur(function () {

    var _this = $(this);

    if (_this.is(':last')) {
        // do something
    }

}); 
```

您可能还想查看`:last-child`，如果这更符合您的要求。

# c++ - 数组初始化问题

> ID：11086379
> 
> 赞同：1
> 
> 时间：2012-06-18T15:47:27.890
> 
> 标签：c++, arrays, pointers

我需要一个空字符数组，但是当我尝试这样做时：

```
char *c; 
c = new char [m];
int i;
    for (i = 0; i < m; i++)
    c[i] = 65 + i; 
```

然后我打印`c`. 可以看到`c = 0x00384900 "НННННННээээ««««««««юоюою"` 循环之后变成：`0x00384900 "ABCDEFGээээ««««««««юоюою"` 我该如何解决这个问题？或者也许有字符串的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T15:50:08.837

如果您尝试创建字符串，则需要确保字符序列以空字符 终止`\0`。

换句话说：

```
char *c; 
c = new char [m+1];
int i;
    for (i = 0; i < m; i++)
    c[i] = 65 + i;
c[m] = '\0'; 
```

没有它，像这样`printf`的字符串函数将不知道字符串在哪里结束。

```
printf("%s\n",c); // should work now 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T15:52:56.807

如果你创建一个堆数组，操作系统不会初始化它。为此，您可以使用以下选项：

1.  静态或全局分配数组。数组将自动填充零。
2.  在堆初始化或堆栈数组上使用`::memset( c, 0, m );`以用零填充它。
3.  使用高级类型，如 std::string。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T15:50:38.557

我相信那是你的调试器试图解释字符串。在 C 或 C++ 中使用 char 数组表示字符串时，需要在字符串末尾包含一个空字节。所以，如果你`m + 1`为 c 分配字符，然后设置`c[m] = '\0'`，你的调试器应该给你你期望的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T16:04:21.307

如果你想要一个动态分配的字符串，那么最好的选择是使用`string`标准库中的类：

```
#include <string>

std::string s;
for (i = 0; i < m; i++)
    s.push_back(65 + i); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T17:02:52.877

C 字符串以 null 结尾。这意味着最后一个字符必须是空字符（'\0' 或只是 0）。

操作字符串的函数使用数组开头（作为参数传递，数组中的第一个位置）和空值之间的字符。如果您的数组中没有空字符，该函数将迭代传递它的内存，直到找到一个（内存泄漏）。这就是为什么您在示例中打印了一些垃圾。

当您在代码中看到文字常量时，例如`printf("Hello");`，它会被转换为长度为 6 的字符数组（'H'、'e'、'l'、'l'、'o' 和 '\0'）；

当然，为了避免这种复杂性，您可以使用 std::string。

# php - 使用 android web 浏览器在 wampserver 上测试 php 网站

> ID：11086380
> 
> 赞同：0
> 
> 时间：2012-06-18T15:47:27.587
> 
> 标签：php, android, browser, ip-address

我正在尝试使用 android 设备（Google Nexus S）中的网络浏览器测试 php 网站。安卓版本为 4.0.3。我已经在我的机器（运行 Windows 7）上安装了 WampServer，并将我的 php 代码复制到 wamp/www 目录中。我可以通过从我机器上的 Web 浏览器浏览到 localhost 来测试代码。为了从我的 android 设备进行测试，我尝试浏览到我机器的公共 IP 地址，但浏览器卡住了，无法加载页面。

有谁知道这个问题的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:24:43.200

这是我所做的：

参考 ：

[http://forum.wampserver.com/read.php?2,13744](http://forum.wampserver.com/read.php?2,13744)

[http://forum.wampserver.com/read.php?2,30970,30989](http://forum.wampserver.com/read.php?2,30970,30989)

我将 Apache httpd.conf 更改为侦听端口 8080 而不是 80。

我还在我的 Windows 防火墙中添加了一个新的入站规则，以允许端口 8080 TCP 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:53:04.330

如果您正在浏览您的公共 IP，您需要确保您的 Windows 7 防火墙允许该端口上的流量。从您的本地主机浏览很可能有效，因为您的防火墙不会阻止本地流量。浏览您的公共 IP 意味着您要上网，访问您的防火墙（路由器/Windows 7？），然后尝试访问您的服务器。你的路由器有端口转发设置吗？您是否尝试过访问本地 LAN IP 而不是公共 IP？

# sql-server - 使用变量强制转换数据类型

> ID：11086381
> 
> 赞同：2
> 
> 时间：2012-06-18T15:47:28.963
> 
> 标签：sql-server, tsql

在 T-SQL 中是否可以使用变量类型转换数据类型？

即虽然这不起作用，因为它需要一个字符串文字，但可以理解要点：

```
select @DataType = Data_Type
from INFORMATION_SCHEMA.COLUMNS
where TABLE_NAME = 'emp'
and COLUMN_NAME = 'emp_id'

SELECT
cast(emp_id as @DataType)
FROM emp 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T15:50:22.647

不，您需要为此使用动态 SQL，例如

```
DECLARE @sql NVARCHAR(MAX);

SELECT @sql = N'SELECT CAST(emp_id AS ' + Data_Type
 + ') FROM dbo.emp;'
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'emp'
AND TABLE_SCHEMA = 'dbo' -- this might be important!
AND COLUMN_NAME = 'emp_id';

PRINT @sql;
-- EXEC sp_executesql @sql; 
```

但是，这对我来说似乎是错误的。为什么不知道列的数据类型？

此外，您将需要一个更复杂的查询，因为您需要考虑精度/比例/最大长度。例如，如果`emp_id`是 a ，则所有结果都将被截断为一个字符。`varchar`

最后，[我强烈推荐`sys.columns`over`INFORMATION_SCHEMA`](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-29T17:11:21.200

我需要做类似的事情，所以我创建了一个函数，以便我可以返回动态 SQL 所需的文字数据类型。我很惊讶我找不到这样的函数已经创建：（或者我不应该感到惊讶，因为我的建议不会通过动态 SQL 进行 CASTING ......但在这一点上，我想不出一个替代方案源表是可变的）

无论如何，这是任何人都需要的功能。请注意，到目前为止，我只包含了我试图 CAST 的表中的数据类型......所以我想任何使用它的人都需要效仿并包括他们需要的数据类型，或者可能包括所有其余的数据类型.

```
CREATE FUNCTION dbo.GetLiteralDataType( @TableName as VARCHAR(100), @ColumnName as VARCHAR(100) )
    RETURNS VARCHAR(100)
    AS
    BEGIN

        DECLARE @DataType as VARCHAR(100)
        DECLARE @FullDataType as VARCHAR(100)
        DECLARE @MaxLength AS INT
        DECLARE @Precision AS INT
        DECLARE @Scale AS INT

        SET @DataType =(SELECT TOP 1 y.name FROM SYS.TABLES t
        INNER JOIN SYS.COLUMNS c ON t.object_id = c.object_id
        INNER JOIN SYS.TYPES y ON y.system_type_id = c.system_type_id
        WHERE t.name = @TableName AND c.name = @ColumnName)

        SET @MaxLength =(SELECT TOP 1 c.max_length FROM SYS.TABLES t
        INNER JOIN SYS.COLUMNS c ON t.object_id = c.object_id
        INNER JOIN SYS.TYPES y ON y.system_type_id = c.system_type_id
        WHERE t.name = @TableName AND c.name = @ColumnName)

        SET @Precision =(SELECT TOP 1 c.precision FROM SYS.TABLES t
        INNER JOIN SYS.COLUMNS c ON t.object_id = c.object_id
        INNER JOIN SYS.TYPES y ON y.system_type_id = c.system_type_id
        WHERE t.name = @TableName AND c.name = @ColumnName)

        SET @Scale =(SELECT TOP 1 c.scale FROM SYS.TABLES t
        INNER JOIN SYS.COLUMNS c ON t.object_id = c.object_id
        INNER JOIN SYS.TYPES y ON y.system_type_id = c.system_type_id
        WHERE t.name = @TableName AND c.name = @ColumnName)

        IF @DataType ='decimal'
        BEGIN
            SET @FullDataType = 'DECIMAL('+ @Precision + ',' + @Scale + ')'
        END

        IF @DataType ='varchar'
        BEGIN
            SET @FullDataType = 'VARCHAR('+ @MaxLength + ')'
        END

        IF @DataType ='bit'
        BEGIN
            SET @FullDataType = 'BIT'
        END

        IF @DataType ='money'
        BEGIN
            SET @FullDataType = 'MONEY'
        END

        IF @DataType ='date'
        BEGIN
            SET @FullDataType = 'DATE'
        END

        RETURN @FullDataType 
    END 
```

# .net - 有没有专门针对 .NET/TFS 环境进行调整的十二因素应用程序的示例？

> ID：11086388
> 
> 赞同：13
> 
> 时间：2012-06-18T15:47:51.690
> 
> 标签：.net, tfs, soa

有一个名为“十二要素应用程序”（[http://www.12factor.net/](http://www.12factor.net/)）的优秀文档，其中作者试图定义设计、构建和部署现代应用程序的完美方式。服务。

该文档非常笼统，并且在许多情况下，所描述的做法不是最佳做法，不容易实现或违反 Microsoft 的最佳做法。例如：该文档不鼓励使用配置文件，而是使用环境变量进行配置。这在使用 XML 配置文件的常见（最佳？）实践的 .NET 中似乎是不正确的。

在一个理想的世界中（即忘记预算/技术/技能限制），在一个组织中，Microsoft 平台被选为所有部署的首选平台，.NET/TFS 是选择的开发环境/工具，人们将如何遵循指导在十二因素应用程序中？

有没有这样一个应用程序的好例子（也许是一个具有优秀参考架构的开源应用程序）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T22:05:01.983

我已经阅读了关于配置的部分，作者显然不了解.NET中配置文件的使用。他们表达的问题是我们过去在 .ini 文件中遇到的问题。.NET 不存在这些问题，因为：

1.  “桌面”应用程序的每个部署将有一个配置文件。“app.config”将作为 program.exe.config 存在，部署到与应用程序相同的文件夹中。
2.  在 Web 应用程序中，web.config 文件的层次结构将再次存在于明确定义的位置，并具有明确定义的名称。
3.  Visual Studio 2010 中的 web.config 转换功能允许将主配置文件检入源代码管理，以及指定如何为每个构建配置（环境）自动编辑主文件的转换文件。所有这些文件都可以存储在源代码管理中。
4.  虽然默认将凭据存储在此类文件中（因此检查到源代码管理中），但这不是必需的。
5.  至少在 Web 应用程序的情况下，IIS 的 MSDEPLOY 功能以及 Visual Studio 2010 的 Web 发布管道允许参数化部署。默认情况下，这包括连接字符串的参数化，这是可能出现凭据的主要区域之一。这可以扩展到包括所有凭据或其他敏感数据的参数化，以便开发人员无法访问此信息。这些参数可以作为部署过程的一部分填写。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T18:23:38.787

12 Factor 对配置有 3 个“要求”。

1.  不要将配置存储在代码中
2.  不要将您的配置置于源代码控制中（或采用可能最终进入源代码控制的格式）。他们想要一个“单一代码库”。
3.  以任何技术堆栈（.NET/Java/Ruby/.. 等）都可以访问的格式放置您的配置。

我想说.NET 配置文件符合其中的一半。

1.  配置文件不在代码中（通过）。
2.  配置文件不必在源代码管理中，但它们通常最终会出现（失败）。
3.  尽管是 XML 格式并且可以被其他技术访问，.NET 配置文件有很多 .NETisms。配置部分的架构由 .NET 类型提供，因此 Java 应用无法验证架构。（半学分）。

虽然我同意他们要求的意图，但我认为他们对环境变量的建议是一个糟糕的建议。他们选择环境变量是因为他们将它们视为最低公分母并且在所有平台上都可用，但它们实际上可能并非在所有平台上都可用。如果您在部分信任的 Web 应用程序中运行（在共享托管平台上很常见），您可能无法访问获取/设置环境变量。

环境变量是按机器设置的。如果我必须对我的生产环境进行配置更改，我想在一个地方对所有服务器进行一次。环境变量不允许你这样做。

虽然我可以理解他们的观点，即您不希望将秘密存储在所有开发人员都可以访问的版本控制中。版本控制配置肯定有好处。当您的生产环境因配置更改而停机时，很容易问..“发生了什么变化”？某人只是通过 ssh 连接到产品机器并设置环境变量而留下的审计线索可能并不那么容易追踪。话虽如此，我通常不会将我的配置文件存储在与其余代码相同的版本控制部分中。我将它们放在安全性受限的文件夹中，以便只有必要的人需要访问。可以想象，您可以更进一步，将它们放在不同的项目中。

我愿意打赌他们违反了自己的不将配置放入文件的规则。例如。他们主页上的第一个要点是“使用声明性格式进行设置自动化，以最大限度地减少新开发人员加入项目的时间和成本；” 我敢打赌，所有那些不应该在任何地方的文件中的配置设置都在厨师食谱中。为了实现自动化的目标，您必须将它们保存在某个文件中的某个位置。如果有人花了很多时间得到正确的厨师食谱，但没有将它存储在某个地方的版本控制中，我会感到惊讶。

我认为他们可能会以不同的方式编写配置页面，只是说将您的配置与代码分开。将其保存在单独的文件中（不要将其嵌入代码中），并将其单独存储在某个地方（不要将其放在同一个存储库中）。您的部署过程会将这些（代码和配置）重新组合到一个可部署的包中，但在此之前它们应该是分开的。

我对配置的建议是将配置视为“附加资源”并将其存储在后备存储（数据库）中。这使您的应用层更加无状态，这是他们的另一个目标。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-29T01:55:10.930

我认为设计存在许多问题，有点幼稚。

例如，在“支持服务”部分，他们声明您应该能够在不考虑代码更改的情况下交换数据存储。

问题是，为了利用任何特定数据存储的性能和功能优势，您自然会倾向于利用您开始使用的存储的特定功能。

此外，并非每个数据存储都支持一组通用命令，以便您可以轻松地从一个数据存储移动到另一个数据存储。他们使用 MySql 或 CouchDB 的特定示例很有趣，因为这两个数据库系统在*概念上*非常不同：一个更像是传统的 RDBMS，另一个是基于文档的。您不能只使用您的表结构并将其直接应用于 CouchDB 并期望向其抛出 SQL 命令。

这意味着您必须放置一个前端，以便用一组公开为 Web 服务的命令来包装每个特定的数据存储区……恕我直言，这使得开发变得更加困难，而收益却很少（如果有的话）。

现在，如果他们将其限制为将类似服务器（本地 mysql）交换为远程服务器（Amazon RDS），那么通过 url 访问数据存储资源的要求就无关紧要了。此外，不需要为该移动发生任何代码更改的要求，因为您不应该仅仅为了支持在不同的服务器上运行您的确切数据库而更改代码。

* * *

以上只是我老实说的第一个领域。正如 John Saunders 所说，配置也显示出对 .Net 等技术完全缺乏了解。坦率地说，整件事看起来像是由一个在 Ruby 世界里有一段时间的人写的，还没有看过那里还有什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T09:47:37.677

我认为要在 Microsoft Windows 平台上遵循他们的指导，必须对该平台有深入的了解。

根据您关于第三个因素的建议，即在环境中存储配置的建议，我们应该问自己，Windows 平台中的环境变量到底是什么。答案是 Windows 注册表。现在，我确实在开发一个使用 Windows 注册表的服务器应用程序，并且考虑到我的角色（我确实关心持续集成、构建和安装程序），我真的非常讨厌我们必须这样做使用 Windows 注册表，但这就是您在 Windows 平台中所做的。

Windows 注册表显然在与语言和操作系统无关的标准上失败了，但是即使您使用普通的环境变量，在 Windows 平台上，这些都是在 Windows 注册表项中实现的。

我不时犯下将凭据存储在 SCM 中的罪行（顺便说一下，近年来主要是 TFS），但从来没有针对应用程序本身，主要是针对构建基础架构（即永远不会部署在客户站点或部署，并且与应用程序代码完全隔离）。

您可以使用 app/web.config 来存储凭据（还有加密功能），但这通常是个坏主意。

此外，如果您使用数据库作为后端（关系型、非关系型，实际上是任何类型的数据库），一些配置很可能会在那里结束，一些配置可能更适合存储在那里（即在多租户应用程序上） , 你真的希望隔离租户相关的配置，而且通常共享配置最终集中在租户 0 的特殊存储中），只要你可以存储和检索（即在注册表中）打开门带来的密钥你在那里。

关于第二个问题，作为 12factor 宣言的新手（但从我目前所读到的内容，而不是基本概念），我目前无法为您提供关于 .Net 参考架构的建议。

**关于第二个问题的更新**

另外，关于另一个问题，我想说第二个因素，即依赖关系，如果我们采用字面和严格的方法，可能会阻止我们在 Microsoft 平台上找到一个好的参考实现。

Windows Installer 和更高级别的安装创作工具（Wix、InstallShield 等）与 RubyGems 或 CPAN 无法真正相提并论，而且 NuGet 在普及方面还没有。

您可以寻找查看 NuGet 提要的参考实现，即使作者不知道 12factor，宣言要求非常明智的事情，优秀的开发人员将大多遵循这些或非常相似的概念。

作为这种方法的一个例子，我建议你看一下[Ayende](http://ayende.com/blog)的[**RavenDB**](http://ravendb.net)，你可以[通过 NuGet 得到它](http://ravendb.net/download#nuget)，我怀疑它会勾选大多数，如果不是全部的话，12factor guy box ( [intro](http://ravendb.net/docs/intro)，[features](http://ravendb.net/features)和[source代码](https://github.com/ayende/ravendb)）。

# android - android模拟器上使用eclipse的版本

> ID：11086389
> 
> 赞同：0
> 
> 时间：2012-06-18T15:47:56.903
> 
> 标签：android, android-layout, android-emulator

我正在使用 Eclipse 运行 android 模拟器 v 4.0.3。有没有办法在同一个模拟器上运行不同版本的android（用于测试目的）。任何指针将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:48:58.617

是的，您可以下载不同版本的 Android SDK 并在模拟器上运行它们。

看这里：

[http://developer.android.com/sdk/adding-components.html](http://developer.android.com/sdk/adding-components.html)

# xml - 将 Word 2007 的文档部分合并到单个 xml 文档中

> ID：11086396
> 
> 赞同：1
> 
> 时间：2012-06-18T15:48:22.817
> 
> 标签：xml, word-2007

我创建了一个 word 2007 文档的 zip 文件，其中一行引用了 msdn 教程。这导致文件夹 _rels、CustomXml、docProps 和 word 文件夹中包含一些 xml 文件。现在我需要将所有这些 xml 文件放入一个文档中（这将非常冗长），并且仍然可以使用 Word 2007 打开它。我只是将 xml 文件的内容放入一个文档中并使用 .xml 保存扩展，但我无法用 Word 2007 打开它。它告诉某些部分无效。有人可以帮忙吗。

# javascript - 使用带有应用程序访问令牌的 Graph API 搜索用户

> ID：11086400
> 
> 赞同：1
> 
> 时间：2012-06-18T15:48:39.520
> 
> 标签：javascript, facebook, facebook-graph-api

我想使用 Graph API 搜索用户（通过他们的名字或用户名）。我有一个访问令牌作为应用程序。我可以使用应用访问令牌来搜索用户吗？我需要的结果是这样的： [https://graph.facebook.com/search?q=mark&type=user&access_token=xxxxxx](https://graph.facebook.com/search?q=mark&type=user&access_token=xxxxxx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T15:52:43.253

我用应用程序访问令牌尝试过，错误是

```
{
  "error": {
    "message": "A user access token is required to request this resource.", 
    "type": "OAuthException", 
    "code": 102
  }
} 
```

所以不，您必须使用用户访问令牌来搜索用户

# java - 如何通过 Java 实现的关键字停止 Robot Framework 中的测试执行？

> ID：11086413
> 
> 赞同：5
> 
> 时间：2012-06-18T15:49:41.437
> 
> 标签：java, keyword, robotframework

我有一个用 Java 实现的关键字，如果关键字失败，我需要使用消息停止整个测试执行：“错误：示例消息”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-15T09:57:54.213

引发异常是官方推荐的方式。

[http://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html#reporting-keyword-status](http://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html#reporting-keyword-status)

Java（如已接受答案的评论中所述）

```
throw new AssertionError("ERROR: example message") 
```

Python

```
from exceptions import AssertionError
.
.
.
 def rftest(self):
   test_result = lib.runtest()
   if (0 != test_result ):
          raise AssertionError("Test Failed") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T21:05:57.853

查看[报告关键字状态](http://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html#reporting-keyword-status)下的用户指南：

您可以在关键字方法中抛出任何异常。异常类型将用作前缀，您也可以添加消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T08:11:17.237

我看到了两个解决方案：

*   第一个解决方案：

在测试本身中，您可以使用

```
Library         Dialogs
(....)
pause execution     myMessage 
```

这将在屏幕上显示一个弹出窗口并暂停执行，直到调用 OK 按钮。例如，您可以从 java 关键字中返回一个特定值以防出错，并在返回该值时暂停。

*   第二种解决方案

我更喜欢这个：只需将调试器连接到执行关键字并在发生异常时停止的 java 代码。它还允许检查当时 JVM 的状态。[这篇文章](http://esalagea.wordpress.com/2013/10/10/remote-debugging-of-robot-framework-integration-test-with-maven/)展示了如何将远程调试器连接到运行机器人关键字的 jvm。

# iphone - CATiledLayer 到 CALayer

> ID：11086414
> 
> 赞同：9
> 
> 时间：2012-06-18T15:49:42.803
> 
> 标签：iphone, ios, cocoa, uiview, catiledlayer

我有一个带有 CATiledLayer 支持的视图。我想从这个 CATiledLayer UIView 中获取可见图块并将其添加到另一个视图作为它的 CALayer 支持，从而在另一个不使用 CATiledLayer 的 UIView 中重新创建可见图像。

我想这样做的原因是我将使用第二个 UIView 来掩盖更新 CATiledLayer 支持的 UIView 的效果 - 这当前会在重新加载所有图块时产生闪烁。

问题是，我不完全确定我会如何做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T01:59:25.000

> CATiledLayer 是 CALayer 的子类，提供了一种异步提供图层内容切片的方法，可能缓存在多个细节级别。

您可以使用以下方法将图层中的可见事物渲染到 CGContextRef 中：

```
- (void)renderInContext:(CGContextRef)ctx 
```

然后使用它通过设置它的委托和实现来更新你的其他层

```
- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)context 
```

此处显示的 ss [http://www.raywenderlich.com/2502/introduction-to-calayers-tutorial](http://www.raywenderlich.com/2502/introduction-to-calayers-tutorial)

但老实说，我认为这不是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T00:20:55.987

你真正的问题是闪烁。我在带有自定义 CALayer 支持的视图上遇到了类似的问题，这是解决方案的一部分：创建 CALayer 的自定义子类并实现以下方法：

```
- (void) display {
    self.contents = nil;
    [super display];
} 
```

这为我解决了一系列问题，但可能无法为您解决。您的替代方法可能是在更新时禁用事务：来自[CATransaction 类参考](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CATransaction_class/Introduction/Introduction.html)

> setDisableActions：设置是否禁止由于在此事务组中进行的属性更改而触发的操作。

所以要使用这个：

```
[CATransaction begin];
[CATransaction setDisableActions:YES];
// do updating/flickering stuff
[self doFlickeringThing];
[CATransaction commit]; 
```

# video - H.264 Frames Memory Leak With Some Decoders

> ID：11086415
> 
> 赞同：8
> 
> 时间：2012-06-18T15:49:46.603
> 
> 标签：video, memory-leaks, stream, h.264, codec

I'm receiving an `H.264 stream` from a DVR using its SDK. There were memory leaks and i thought it was the SDK causing all the leaks. But when i recorded the stream and played the frames one by one reading from the disk (without any 3rd party dlls involved), i noticed that the problem is not the dll but the stream itself.

Strange enough, `DivX H264 Decoder` is the only codec which doesn't cause a memory leak but when the stream runs for a long time, sometimes DivX decoder crashes as well. I'd prefer to use `Microsoft DTV-DVD Video Decoder` but it causes huge memory leaks and drops a lot of frames. Many other H.264 decoders I've tried behaves the same way.

I examined the `h.264 frames` using some `h.264 parsers` comparing with some other problem-free streams but i didn't notice anything obvious from the logs.

Since my problem is about the h.264 frames structure, i've prepared a source filter named `FramesFromFileSourceFilter` which you can download below.

[http://www.akaydin.com/directshow/FramesFromFileSourceFilter.zip](http://www.akaydin.com/directshow/FramesFromFileSourceFilter.zip)

It's a `Visual Studio 2008` project and all dependencies are included in the zip file in relatively located folders (including the h.264 frames). So, all you need to do is to compile the project, register the output with `regsvr32.exe` and run the filter with any h.264 decoder you want from GraphEdit or GraphStudio. Example graphs are below.

![FramesFromFileSourceFilter with DivX](../Images/3d65b9d5a1a021f5572a2a0a9c2d9acc.png)

![FramesFromFileSourceFilter with Microsoft DTV-DVD Video Decoder](../Images/d6303b9b9c810e9baeadde23e038e8c1.png)

Also h264 frames are available as a single raw h264 file at the link below which is playable by VLC (with wrong FPS since original was 12 FPS).

[http://www.akaydin.com/directshow/stream.zip](http://www.akaydin.com/directshow/stream.zip)

**Question:**

What might be causing the memory leak problems with many famous H264 Decoders except DivX decoder. What is wrong with this stream?

**Update 1**

Reading data thread is removed and functionality moved into FillBuffer without using any buffers and flags. Problem remains the same.

[http://www.akaydin.com/directshow/FramesFromFileSourceFilterUpdate1.zip](http://www.akaydin.com/directshow/FramesFromFileSourceFilterUpdate1.zip)

**Update 2**

Update1 was using `Sleep()` in `FillBuffer()` function which was causing some problems. Now i removed the `Sleep()` and used `SetTime()` to have ~12 FPS. This also solved `Microsoft DTV-DVD Video Decoder`'s dropping frame issues but didn't solve memory problems.

[http://www.akaydin.com/directshow/FramesFromFileSourceFilterUpdate2.zip](http://www.akaydin.com/directshow/FramesFromFileSourceFilterUpdate2.zip)

Memory increase occurs at `Working Set` only. `Virtual Bytes` and `Private Bytes` seem to be stable. What might be causing continuous `Working Set` memory increment which only happens with `Microsoft DTV-DVD Video Decoder`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T13:02:29.813

You don't do any synchronization around your variables

```
BYTE* m_buffer;
DWORD m_bufferSize;
bool isFrameReady; 
```

And they are used from two concurrent threads. You just leak your memory by this inaccurate allocation/deallocation AND/OR letting your code crash on access violation. Debug build of your DLL indicates this by showing you "heap corruption" alert as you run your test. The runtime behavoir might vary with decoders and environment, however this is definitely a severe bug to be fixed.

For instance, you can use `CAutoLock cAutoLock(m_pLock);` in your thread that fills buffer to prevent streaming thread access while you are reading data from file.

Note that you read next frame into the same buffer pointer without a check whether previously allocated memory is freed or not, you just overwrite the pointer possibly leaving a leak.

**Memory Leak/Working Set Update**: Now, when code issues are sorted out, the unwanted runtime behavior is an increase in `Working Set` size. This is not a leak. It is an indication that Windows considers the process as a sort of priority (why not? it is active and works with memory) and throws more real pages towards this process to facilitate its performance. See [this answer](https://stackoverflow.com/a/1986486/868014) on good explanation of how process memory metrics correspond to memory leaks in an application.

The difference between decoders you might be seeing is likely to be caused by the fact that some decoders are good with smaller amount of buffers, or reuse them more actively, e.g. prefer to take the same buffer out of a pool rather than picking one by one through all available.

# mongodb - 流星批量更新

> ID：11086418
> 
> 赞同：8
> 
> 时间：2012-06-18T15:49:51.483
> 
> 标签：mongodb, meteor

我正在使用流星。我想知道在更新 DOM 之前是否有一种速记方法来进行批量更新。

例如，我想更新一些记录，*不止一个*（一次全部）：

```
Collection.update(id1,{..})
Collection.update(id2,{..})
Collection.update(id3,{..}) 
```

问题是有 3 个项目正在单独更新。因此，当我的案例中的 DOM 被重绘 3 次而不是一次时（所有 3 条更新记录）。

有没有办法在所有更新之前推迟ui更新？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-22T18:59:44.380

Mongo 的更新一次可以修改多个文档。只需给它一个匹配多个文档的选择器，然后设置`multi`选项。在您的情况下，这只是一个 ID 列表，但您可以使用任何选择器。

```
Collection.update({_id: {$in: [id1, id2, id3]}}, {...}, {multi:true}); 
```

这将运行一次数据库更新和一次重绘。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-19T02:44:48.830

而是在服务器上执行它们，这样它们*可能*会同步完成，这样它们就不太可能导致客户端上的多个 DOM 更新。

请参阅[前两个和最后一个有趣的代码位](https://github.com/meteor/madewith/blob/master/README.md)，它解释了如何保护您的客户端免受数据库的干扰，以及如何在服务器上定义方法并从客户端调用它们。

# javascript - javascript 正则表达式示例 - 提取直到字符出现？

> ID：11086421
> 
> 赞同：1
> 
> 时间：2012-06-18T15:49:54.700
> 
> 标签：javascript, regex

我有这样的文字。

```
Mr John Smith , Mr James Smith                  +(21)-(21)-12345678, 12345678, 12345678                     +(21)-12345678, 12345678, 12345678        SomeTextHereAlso        +(21)-(22)-12345678                       www.somewebaddress.co.uk                            Some Title, Some Place , Some Town,Some Suburb,  City - 100000 
```

我想在 javascript 中使用正则表达式提取这些字符串中的每一个。我找到了一些例子，今天早上他们奏效了。现在我不知道为什么他们不再工作了。

提取

```
Mr John Smith , Mr James Smith 
```

我用过这个。

```
/\S(.*)\+/  and /\S(.*?)\+/ 
```

这没有用。我不知道为什么。

提取这个

```
+(21)-(21)-12345678, 12345678, 12345678                     +(21)-12345678, 12345678, 12345678        SomeTextHereAlso        +(21)-(22)-12345678 
```

我用过这个。

```
/\+(.*)(?=www.)/ 
```

这确实奏效了。

对于我使用的网址

```
/www(.*?)(?=\s\s)/ 
```

这也有效。

唯一的问题是第一个示例应该提取到第一个 + 之前的所有字符，但它会提取到最后一个 + 之前的所有字符。

我检查了[http://gskinner.com/RegExr/?2tr5t](http://gskinner.com/RegExr/?2tr5t)并且我在这里展示的示例有效。自从我查看代码并没有发现任何错误以来，是否还有更多类似的示例可以帮助我。

如果正则表达式很好，那么我如何在这个例子中使用 IndexOf() 方法来提取我想要的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:45:21.363

我用[这个解决方案](https://stackoverflow.com/questions/4690617/javascript-to-match-substring-and-strip-everything-after-it)帮助我解决了我的问题。所以我的项目将结合 RegEx 和 IndexOf() 方法。

我不知道为什么 RegEx 在这件事上失败了。谢谢你们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:27:03.907

您可以尝试`[^+]+`或更具体地说`^[^+]+`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:04:59.930

好吧，对于第一个示例，您可以使用否定字符类来禁止内部循环匹配“+”字符。

```
/\S([^+]*)\+/ 
```

至于提取匹配项，一个常见的模式是做类似的事情

```
var myPattern = /someregex/g;
var match;
while( (match=myPattern.exec(theString)) !== null ){
    console.log('the total match', match[0]);
    console.log('the first grouped parenthesis', match[1]);
    //and so on
} 
```

* * *

例如，运行

```
var regex = /a(\d+)/g;
var str = ' a100 b200 a300';
var match;
while( (match=regex.exec(str)) !== null ){
    console.log(match)
} 
```

印刷

```
["a100", "100"]
["a300", "300"] 
```

如果您还有任何疑问，我强烈推荐[MDN上的文档](https://developer.mozilla.org/en-US/search?q=regex)

# database - SOLR 索引 2 个数据库

> ID：11086425
> 
> 赞同：2
> 
> 时间：2012-06-18T15:50:09.667
> 
> 标签：database, solr, dih

我们正在尝试使用来自 2 个不同数据库的数据构建 SOLR 索引，

看着那个[http://wiki.apache.org/solr/DataImportHandler#Multiple_DataSources](http://wiki.apache.org/solr/DataImportHandler#Multiple_DataSources)，它似乎应该是可能的，但我们遇到了问题。

```
 <dataConfig>
  <dataSource 
    name="ds-1"
    type="JdbcDataSource" 
    driver="Driver"
    url="jdbc_url1" 
    user="user1" 
    password="pass1"/>

<dataSource
    name="ds-2"
    type="JdbcDataSource" 
    driver="Driver"
    url="jdbc_url2" 
    user="user2" 
    password="pass2"/>

   <document>

 <entity name="entity1" datasource="ds-1" query="SELECT YYY  FROM TABLE">
      <field column="YYY" name="YYY"/>
    </entity>

 <entity name="entity2" datasource="ds-2" query="SELECT ZZZ FROM TABLE">
      <field column="ZZZ" name="ZZZ"/>
    </entity>

  </document>
</dataConfig> 
```

尝试运行索引器时，它适用于第一个实体/查询/ds，然后失败`org.apache.solr.handler.dataimport.DataImportHandlerException: Unable to execute query: SELECT ZZZ FROM TABLE`

似乎它正在尝试在 ds-1 上执行 query2 ...

我们还改变了数据源和/或实体定义的顺序，似乎它总是只能索引第一个。

我们做错了什么吗？我们对 SOLR 能做什么有错误的期望吗？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:04:35.007

我相信你的问题只是一个案例问题。`datasource`应该是`dataSource`，因为我记得 Solr XML 配置属性是区分大小写的。使用当前配置，`dataSource`不会实际定义，因此处理程序将使用已定义的第一个数据源（单数据源模式）。

您应该将其更改为：

```
<entity name="entity1" dataSource="ds-1" query="SELECT YYY FROM TABLE">
  <field column="YYY" name="YYY"/>
</entity> 
```

# ios - 构建 ios 应用程序，以便 ipad 使用 iphone 屏幕大小

> ID：11086427
> 
> 赞同：1
> 
> 时间：2012-06-18T15:50:15.217
> 
> 标签：ios, xcode, ipad

我继承了一个主要为 iphone 构建的 IOS 项目。当我在 ipad 上运行该应用程序时，该应用程序在屏幕的左上角运行，一切看起来都有点损坏。我注意到一些应用程序在 ipad 上的一个小 iphone 屏幕上运行，并且可以选择放大。如何让我的应用程序执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T15:52:35.400

转到项目设置并选择您的目标。在“摘要”选项卡下，从“设备”下拉列表中选择“iPhone”：

![在此处输入图像描述](../Images/8a772d619543b9b5292fc8eac06fb082.png)

# php - 什么会导致 $model->attributes 在 Yii 中无法获得正确的值？

> ID：11086436
> 
> 赞同：3
> 
> 时间：2012-06-18T15:50:33.440
> 
> 标签：php, yii

我的中有这些行`actionCreate`：

```
if (isset($_POST['DpcioCbn'])) {
  print_r($_POST['DpcioCbn']);
  $model->attributes = $_POST['DpcioCbn'];
  print_r($model->attributes);
  die();
  ...
} 
```

返回这个：

```
Array
(
    [code] => 34324
    [bn_fa] => dfsf
    [bn_en] => sdf
    [cbn_fa] => sdfds
    [cbn_en] => f
    [description] => dsfsdfsdf
    [update_at] => 1391-03-16
    [active] => 1
)
Array
(
    [active] => 1
    [code] => 34324
    [bn_fa] => dfsf
    [bn_en] => sdf
    [cbn_fa] => sdfds
    [cbn_en] => f
    [update_at] => 1391-03-16
    [id] => 
    [description] => 
) 
```

现场会发生什么`description`？这个作业有什么东西是 Yii 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T16:05:08.323

我发现 yii 中有一个术语围绕着这种类型的分配：**Massive Assignment**。所以我应该明确定义每个字段的验证以进行大规模分配。

```
public function rules() {
  return array(
      ...
      array('description', 'safe'),
      ...
  );
} 
```

[http://www.yiiframework.com/wiki/161/understanding-safe-validation-rules/#hh2](http://www.yiiframework.com/wiki/161/understanding-safe-validation-rules/#hh2)

> 对于某些领域，没有什么可以验证的，对吧？
> 
> 错误：通过仅分配用户明确表示有资格复制到 $model 的字段值，这限制了试图污染模型的坏人的恶作剧。
> 
> 即使一个字段没有特定的数据格式验证，我们仍然必须告诉 Yii 我们希望在大规模分配期间复制该属性。这是通过“安全”验证器完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T08:11:36.890

错误：通过仅分配用户明确表示有资格复制到 $model 的字段值，这限制了试图污染模型的坏人的恶作剧。

即使一个字段没有特定的数据格式验证，我们仍然必须告诉 Yii 我们希望在大规模分配期间复制该属性。这是通过“安全”验证器完成的。 [http://www.jili.ir](http://www.jili.ir)

# php - 将 javascript 代码转换为 PHP charCodeAt() 问题

> ID：11086442
> 
> 赞同：1
> 
> 时间：2012-06-18T15:50:38.707
> 
> 标签：php, javascript

我有一个我想要的 PHP 函数，这是我的 JavaScript 函数：

```
<script type="text/javascript">
                    str = '242357de5b105346ea2059795682443';
                    str_overral = str;
                    str_overral = str_overral.replace(/[^a-z0-9]/gi, '').toLowerCase();
                    str_res='';
                    for (i=0; i<str_overral.length; i++) {
                        l=str_overral.substr(i,1);
                        d=l.charCodeAt(0);
                        if ( Math.floor(d/2) == d/2 ) {
                            str_res+=l;
                        } else {
                            str_res=l+str_res;
                        }
                    }
                    document.write('<in');
                    document.write('put type="hidden" name="myInput" value="'+str_res+'" />');
                </script> 
```

以上 JavaScript 函数为 myInput 生成此字符串：`359795ae3515e753242db0462068244`

这是我用 PHP 试过的：

```
 $str = '242357de5b105346ea2059795682443';
    $str_overral = preg_replace('/[^a-z0-9]/i', '',$str);
    $str_overral = strtolower($str_overral);
    $str_res=''; 
    for ($i=0; $i<strlen($str_overral); $i++) {
        $l= substr($str_overral,$i,1);
        // PHP does not have charCodeAt() function so i used uniord()
        $d = uniord($l);
        if((floor($d)/2) == ($d/2))
            $str_res.=$l;
        else
            $str_res.= $l.$str_res;
    }
    echo $str_res;

function uniord($c) {
        $h = ord($c{0});
        if ($h <= 0x7F) {
            return $h;
        } else if ($h < 0xC2) {
            return false;
        } else if ($h <= 0xDF) {
            return ($h & 0x1F) << 6 | (ord($c{1}) & 0x3F);
        } else if ($h <= 0xEF) {
            return ($h & 0x0F) << 12 | (ord($c{1}) & 0x3F) << 6
                                     | (ord($c{2}) & 0x3F);
        } else if ($h <= 0xF4) {
            return ($h & 0x0F) << 18 | (ord($c{1}) & 0x3F) << 12
                                     | (ord($c{2}) & 0x3F) << 6
                                     | (ord($c{3}) & 0x3F);
        } else {
            return false;
        }
    } 
```

和上面的 PHP 代码生成这个字符串：`242357de5b105346ea2059795682443` 所以基本上 PHP 只是按原样返回 $string。

由于 PHP 没有 charCodeAt() 函数，我在这里找到了一个解决方案[UTF-8 Safe Equivelant of ord 或 charCodeAt() in PHP](https://stackoverflow.com/questions/10333098/utf-8-safe-equivelant-of-ord-or-charcodeat-in-php)，但这对我不起作用，我什至尝试了 'hakre' 在同一个线程中发布的解决方案。

感谢您提供任何帮助。

更新解决方案：

这是修复：

```
if($d%2 == 0)
    $str_res.=$l;
else
    $str_res = $l.$str_res; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:52:52.433

```
if((floor($d)/2) == ($d/2)) 
```

你有一个`)`错误的地方。它应该在第一个之后`/2`，而不是在它之前。

它可以提高效率`if($d%2 == 0)`

# windows - RandomRange TMemo 线条

> ID：11086443
> 
> 赞同：-1
> 
> 时间：2012-06-18T15:50:43.780
> 
> 标签：windows, delphi, line, memo

我会从 Memo1 中随机选择一行，然后将其作为链接运行，我尝试了以下代码：

```
ShellExecute(Handle, 'open', PAnsiChar(RandomRange(Memo1.Lines[1], Memo1.Lines.Count)), nil, nil, SW_SHOWNORMAL) ; 
```

但是会出现错误：

```
Unit1.pas(86): E2010 Incompatible types: 'Integer' and 'string' 
```

所以我的问题是：如何从 TMemo 中选择一条随机线？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T15:57:38.593

应该

```
ShellExecute(Handle, 'open', PChar(Memo1.Lines[RandomRange(0, Memo1.Lines.Count-1)]), nil, nil, SW_SHOWNORMAL) ; 
```

# django - 使用 add_to_class() 添加列？

> ID：11086447
> 
> 赞同：0
> 
> 时间：2012-06-18T15:50:55.743
> 
> 标签：django

看来 add_to_class() [https://github.com/django/django/blob/master/django/db/models/base.py#L218](https://github.com/django/django/blob/master/django/db/models/base.py#L218)实际上并没有添加列，而是向 _meta 成员 init 添加了一个字段.py#L249">https://github.com/django/django/blob/master/django/db/models/fields/init .py# **L249**。这些字段怎么会在phpmyadmin中显示为列呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:23:00.687

您需要运行`syncdb`或者如果它是现有表，则需要使用[South](http://south.aeracode.org/)创建迁移，或者自己手动更改表以匹配`add_to_class`.

# perl - 对 grep 命令的结果进行分组

> ID：11086448
> 
> 赞同：2
> 
> 时间：2012-06-18T15:50:56.867
> 
> 标签：perl, unix, sed, awk, grep

我一直在使用`grep -f`从一个文件中获取模式并从另一个文件中提取行。结果如下：

```
1   11294199    11294322    40  10  123 0.0813008
1   11294199    11294322    41  6   123 0.0487805
1   11294199    11294322    42  10  123 0.0813008
1   11294199    11294322    43  2   123 0.0162602
1   11293454    11293544    51  1   90  0.0111111
1   11293454    11293544    52  2   90  0.0222222
1   11291356    11291491    54  6   135 0.0444444
1   11291356    11291491    55  8   135 0.0592593
1   11291356    11291491    56  3   135 0.0222222 
```

现在我需要根据前三列对结果进行分组，并计算每个组的第 4 列的总和：

```
1   11294199    11294322  (40+41+42+43)
1   11293454    11293544  (51+52)
1   11291356    11291491  (54+55+56) 
```

我怎样才能得到这样的结果？grep 中的任何选项来实现这一点？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T04:35:46.300

你需要`awk`做你想做的事。尝试这个：

```
awk '{ array[$1 "\t" $2 "\t" $3] += $4 } END { for (i in array) print i "\t" array[i] }' file.txt 
```

结果：

```
1   11294199    11294322    166
1   11291356    11291491    165
1   11293454    11293544    103 
```

高温高压

# c# - 具有默认值的自动映射列表

> ID：11086452
> 
> 赞同：5
> 
> 时间：2012-06-18T15:51:07.903
> 
> 标签：c#, automapper

我的问题基本上可以简化为以下一组实体：

我有一个实体说：`MyEntity`它有一个列表`EntityTiming`（名为 Timings）

```
public class Entity{

  public List<EntityTiming> Timings {get;set;}

} 
```

它对应于一个*ViewModel*：`MyEntityViewModel`它有一个列表`TimingViewModel`（名为 Timings）。

```
public class EntityViewModel
{
   public IList<TimingViewModel> Timings {get;set;}
} 
```

我为映射方向配置了以下规则：`entity -> viewModel`

```
Mapper.CreateMap<Entity,EntityViewModel>

Mapper.CreateMap<EntityTiming,TimingViewModel> 
```

EntityViewModel.Timings**必须**有 7 个项目。然而， Enitity.Timings 可能有**少于 7 个项目/永远不会更多**。

我的问题是：如果列表中的项目为空，是否有办法提供默认值`AutoMapper`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T15:58:32.887

您可以使用`AfterMap()`：

```
Mapper.CreateMap<Entity, EntityViewModel>()
      .AfterMap((src, dest) => { 
          if (dest.Timings == null) {
              // Populate default values
          }
          else if (dest.Timings.Count < 7) {
              // Populate the rest of the values
          }
       }); 
```

# ssl - CouchDB 是否进行多域托管、SSL 多域托管，是否有适用于 2 个或更多主机的规范配置？

> ID：11086453
> 
> 赞同：2
> 
> 时间：2012-06-18T15:51:10.707
> 
> 标签：ssl, configuration, couchdb

[更新了部分答案，一些更详细的问题。]

1.  CouchDB 是否支持多域托管？ **是的，通过 [vhosts] + _rewrite(s) 配置。**

2.  CouchDB 是否支持多个单独的 httpd bind_address'es（即，除了 0.0.0.0）？

3.  CouchDB 是否使用 SSL 支持进行多域托管？

4.  是否有 2 个或更多具有 SSL 的主机的规范（很好的示例）配置？

我想知道如何运行 CouchDB 来支持单独的域，其中一些需要 SSL 支持以实现安全连接。我用谷歌搜索无济于事，所以我想知道是否有人以这种方式使用 CouchDB，或者是否有可能。一个示例配置文件会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:21:07.037

看起来 CouchDB 支持一个单独的 ip bind_address 或全局 0.0.0.0 bind_address。

谷歌导致了这个功能请求：

[http://couchdb-development.1959287.n2.nabble.com/jira-Created-COUCHDB-907-Support-multiple-ip-addresses-in-bind-address-td5604285.html](http://couchdb-development.1959287.n2.nabble.com/jira-Created-COUCHDB-907-Support-multiple-ip-addresses-in-bind-address-td5604285.html)

链接到这个讨论（2012-03-24），它表明---请求的功能，但没有 ETA：

[http://comments.gmane.org/gmane.comp.db.couchdb.user/7050](http://comments.gmane.org/gmane.comp.db.couchdb.user/7050)

所以#2-4 的答案是“不”。目前。（即，0.0.0.0 是多个 bind_address 的唯一 CouchDB 解决方案。）

# app-store-connect - 无法登录iTunes突然连接

> ID：11086454
> 
> 赞同：3
> 
> 时间：2012-06-18T15:51:11.733
> 
> 标签：app-store-connect

我只是突然无法登录iTunes连接（2小时前到现在）。即使我重置了 Apple ID 和密码，它仍然报告 Apple ID 没有访问 iTunes Connect 的权限。

我可以登录Apple Dev Center，我没有做任何坏事。有没有人遇到同样的问题？有没有办法联系苹果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:54:19.977

诊断问题的最快方法是与 Apple 取得联系。

这是一个直接链接：[https ://developer.apple.com/support/resources/itunes-connect.html](https://developer.apple.com/support/resources/itunes-connect.html)

# html - 在 PlayN 中，如何将我的游戏画布放置在现有网页的特定元素中？

> ID：11086455
> 
> 赞同：0
> 
> 时间：2012-06-18T15:51:13.110
> 
> 标签：html, playn

我想要实现的一个简单示例：

```
<body>
    <div style="float:left;">
        Hey, look to the right. There's my game!
    </div>
    <div id="mygame">
        <script src="mygame/mygame.nocache.js"></script>
    </div>
</body> 
```

问题是：PlayN javascript 似乎将构成我的游戏的画布附加到 DOM 的末尾，并重置 body 属性以匹配画布大小。所以游戏总是在屏幕底部结束。

我想我可以在画布加载后添加一些 javascript 来重新排列布局。是否可以将画布加载到指定元素中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:30:45.553

将 id="playn-root" 添加到您想要包含游戏画布的元素中。

在启动时，PlayN 会查找此 ID。如果找到，则将游戏画布添加到相应元素内。否则，它会附加到 body 元素。

# xfbml - 如何从另一个页面导出 XFBML？

> ID：11086457
> 
> 赞同：1
> 
> 时间：2012-06-18T15:51:28.523
> 
> 标签：xfbml

是否可以将 Open Graph 标签存储在另一个页面上？

喜欢：

```
<meta src="myinfo.xml"> 
```

我只有一个包含幻灯片的 HTML 页面，并且希望将不同的参数传递给每个图像。

不想用各种元数据污染代码。

# python - 如何在 Python 中创建一个可以从不同模块访问的实例？

> ID：11086458
> 
> 赞同：0
> 
> 时间：2012-06-18T15:51:32.160
> 
> 标签：python, module, single-instance

我正在编写一个连接到数据库的 Web 应用程序。我目前正在使用从其他模块导入的模块中的变量，但这感觉很讨厌。

```
# server.py
from hexapoda.application import application

if __name__ == '__main__':
  from paste import httpserver
  httpserver.serve(application, host='127.0.0.1', port='1337') 
```

* * *

```
# hexapoda/application.py
from mongoalchemy.session import Session
db = Session.connect('hexapoda')

import hexapoda.tickets.controllers 
```

* * *

```
# hexapoda/tickets/controllers.py
from hexapoda.application import db

def index(request, params):
  tickets = db.query(Ticket) 
```

问题是我获得了与数据库的多个连接（我猜是因为我`application.py`在两个不同的模块中导入，所以该`Session.connect()`函数被执行了两次）。

如何在不创建多个连接的情况下从多个模块访问（即在整个应用程序中`db`只调用一次）？`Session.connect()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:47:31.907

尝试使用[Twisted](http://twistedmatrix.com/)框架，例如：

```
from twisted.enterprise import adbapi

class db(object):

    def __init__(self):
        self.dbpool = adbapi.ConnectionPool('MySQLdb',
            db='database',
            user='username',
            passwd='password')

    def query(self, sql)
        self.dbpool.runInteraction(self._query, sql)

    def _query(self, tx, sql):
        tx.execute(sql)
        print tx.fetchone() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:05:09.157

这可能不是您想要做的 - 每个应用程序只有一个连接意味着您的应用程序无法扩展。

通常的解决方案是在请求进入时连接到数据库并将该连接存储在具有“请求”范围的变量中（即它与请求一样长）。

实现这一点的一种简单方法是将其放入`request`：

```
request.db = ...connect... 
```

您的 Web 框架可能提供了一种方法来注释方法或类似过滤器的东西，它可以查看所有请求。将代码放在那里打开/关闭连接。

如果打开连接很昂贵，请使用连接池。

# orchardcms - Orchard CMS 1.4.2：如何将寻呼机添加到投影中

> ID：11086459
> 
> 赞同：0
> 
> 时间：2012-06-18T15:51:32.147
> 
> 标签：orchardcms

星期一下午很厚...

如何将寻呼机添加到投影列表？

我有一个符合查询的 135 个记录物种内容项目的列表。那么我该如何分页呢？:(

选中 Edit Projection 页面中的 Show Pager 框只会添加：

```
 << Older Newer >> 
```

页面底部的链接。呈现的 html 是，例如：

```
<ul class="group pager" shape-id="3">        
        <li class="page-next" shape-id="3">« <a href="/wetlands/recorded-species?page=4" shape-id="3">Older</a>
        </li>
        <li class="page-previous" shape-id="3"><a href="/wetlands/recorded-species?page=2" shape-id="3">Newer</a> »
        </li>
</ul> 
```

IE：

<< 旧的会增加页码。较新的 >> 减少页码。这对我来说似乎是一个错误，因为我期望上一个和下一个链接，以及页码链接。不是新旧...

是否有一些模块需要禁用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T20:08:37.487

这是一个功能：默认的前端寻呼机就是这样（第 1 页始终是最新的页面）。对于更丰富的寻呼机，只需查看 TheAdmin 主题（视图/寻呼机）中的那个。下面是它的精简版，还显示页码：

```
@{
    Model.PreviousText = T("<");
    Model.NextText = T(">");

    var routeData = new RouteValueDictionary(ViewContext.RouteData.Values);
    var queryString = ViewContext.HttpContext.Request.QueryString;
    if (queryString != null)
    {
        foreach (string key in queryString.Keys)
        {
            if (key != null && !routeData.ContainsKey(key))
            {
                var value = queryString[key];
                routeData[key] = queryString[key];
            }
        }
    }

    if (routeData.ContainsKey("id") && !HasText(routeData["id"]))
    {
        routeData.Remove("id");
    }

    Model.Metadata.Type = "Pager_Links";
    IHtmlString pagerLinks = Display(Model);

    Model.Classes.Add("selector");
    var pageSizeTag = Tag(Model, "ul");

    if (Model.RouteData != null)
    {
        foreach (var rd in Model.RouteData.Values)
        {
            routeData[rd.Key] = rd.Value;
        }
    }
}
@if (Model.TotalItemCount > 1)
{
    <div class="pager-footer">
        @pagerLinks
    </div>
} 
```

# myeclipse - Microsoft Visual Studio Team Explorer Everywhere 2010 + MyEclipse 9.1 + TFS 2010 = 无法连接到多个项目

> ID：11086460
> 
> 赞同：0
> 
> 时间：2012-06-18T15:51:38.393
> 
> 标签：myeclipse, team-explorer-everywhere

我遇到了一个问题，我的 Eclipse 9.1 无法使用 Team Explorer Everywhere 插件在 2010 年连接到多个项目。如果我尝试连接第二个项目，它会使我与第一个项目断开连接。我找不到任何方法能够像在 TFS 2008 中那样拉下多个项目。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:20:09.947

这是按设计的。Team Explorer Everywhere 一次只能连接到一个 Team Project Collection。出现这种情况的原因有很多，但都是为了保留针对服务器的原子操作的概念。某些操作（例如，签入）*必须*只限于单个服务器实例才能有意义。

由于单个变更集在 TFS 中是原子的，因此尝试签入多个挂起的更改，要么*全部成功*，要么*全部失败*。考虑一下您是否有来自两台不同服务器的待处理更改：您不能将所有这些更改作为单个更改集提交 - 一台服务器可能由于冲突而拒绝您的签入，而另一台服务器可以成功进行。这充其量是令人困惑的，但实际上很可能会使您的项目处于不一致的状态，因为这些项目之间可能存在依赖关系。由于每个服务器都有不同的变更集，因此 UI 必须反映这一点。

经过深思熟虑和实验，我们得出的结论是，最好的用户体验就是拥有一种可以从多个 TFS 服务器导入项目的体验，但您必须通过选择当前是哪个服务器来在 UI 中选择要使用的服务器“在线的”。所有 TFS 功能都可用于在线服务器，其中 TFS 功能的有限子集可用于其他项目。

如果您需要导入所有 Java 项目，我们建议您将它们合并到一个团队项目集合中。

此行为与该软件的任何先前版本都没有变化，包括在 Microsoft 收购该技术之前（当时该产品仍是 Teamprise Client Suite 的一部分。）

另请注意，由于新的本地工作区功能，可用于“离线”项目的命令范围在 TFS 2012 中显着增加。

# java - 我可以在非 EE 独立环境中使用 JPA 注释吗？

> ID：11086461
> 
> 赞同：1
> 
> 时间：2012-06-18T15:51:49.427
> 
> 标签：java, jpa, annotations, jpa-2.0, openjpa

我想用 OpenJPA 做一些快速原型设计，我想在我的类中使用 JPA 注释。我想独立运行（比如从`main`方法中）。这可以做到吗？

到目前为止，我能够独立运行，但我必须使用我从 persistence.xml 指向的映射 XML 文件。注释没有被自动拾取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:57:25.343

来自[官方网页](http://openjpa.apache.org/)：

> Apache OpenJPA 是 Apache 软件基金会的一个 Java 持久性项目，可用作**独立的 POJO 持久层**或集成到任何 Java EE 兼容容器和许多其他轻量级框架中，例如 Tomcat 和 Spring。

查看[入门教程](http://openjpa.apache.org/getting-started.html)以查找示例。

# html - 在 iframe 而不是 src 中直接预加载 HTML 内容

> ID：11086466
> 
> 赞同：3
> 
> 时间：2012-06-18T15:52:10.737
> 
> 标签：html

我有想要在存档中显示的 HTML 内容（主要是电子邮件）。由于其中一些记录包含自己的样式、图像和标题，因此它们需要独立显示并限制在其容器中，以免干扰显示它的页面。我立刻想到了一个 iframe。

我有两种方法可以做到这一点，两者都有些间接。1）我可以绘制一个指向 about:blank 的 iframe，并在页面加载后使用 Javascript 将内容绘制到 iframe 中。2) 我可以创建一个仅返回电子邮件内容的辅助 PHP 页面，并将 iframe 作为 src 属性指向它。这些解决方案很简单，但我想知道是否有更直接的方法。

我找到了这样的解决方案，但他们建议使用上面的选项 1 或 2。这个问题的重点是：“有没有比依赖 Javascript 或辅助页面更直接的方法将 HTML 内容直接预加载到 iframe 中？” [Html 代码作为 IFRAME 源而不是 URL](https://stackoverflow.com/questions/6102636/html-code-as-iframe-source-rather-than-a-url) [指定 iframe 的内容而不是页面的 src](https://stackoverflow.com/questions/4199458/specifying-content-of-an-iframe-instead-of-the-src-to-a-page)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:51:14.737

我不确定与在 iframe 的 src 属性中指定页面相比，您可以获得多少“直接”。

您已经链接到在您的问题中实际有效的唯一答案，其中不包括使用 src 页面或使用 EMCAScript 来绘制 iframe 内容。请记住，数据 url 在大多数浏览器中可以显示的数据字节数仍然受到限制，因为数据 url 本身的长度是有限的。

我真的建议您将 src 属性与单独的后端脚本一起使用，因为这将解耦并增加代码的可维护性，因为您可以开发负责页面本身的脚本与显示 iframe 内容的脚本分开。

# ios5 - 如何在 UIWebView iOS 应用中自动填充用户名和密码？

> ID：11086470
> 
> 赞同：1
> 
> 时间：2012-06-18T15:52:28.073
> 
> 标签：ios5, uiwebview, autofill

我正在通过在线查看各种来源的代码示例来自学如何编写 iPhone 应用程序，因此可以公平地说，我还不懂这种语言。

我已经成功构建了一个进入登录页面的 UIWebView 浏览器应用程序。但是，我试图通过让

按照拜伦关于他自己的堆栈溢出问题的代码，我试图追随他的脚步。

[UIWebView 是否可以保存和自动填充以前输入的表单值（例如，用户名和密码）？](https://stackoverflow.com/questions/4772341/is-it-possible-for-a-uiwebview-to-save-and-autofill-previously-entered-form-valu)

但是，当应用程序中存在以下代码行时，浏览器只会加载一个空白页面。

```
 -(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; {
```

我非常感谢任何帮助我重回正轨的帮助。非常感谢，

以下是我的完整代码：

```
 #import "ViewController.h"

    // 6/13/2012 added to cache username and password
    #import 
    #import "SFHFKeychainUtils.h"
     // -----

    @interface ViewController ()

    @end

    @implementation ViewController
    @synthesize webView;
    @synthesize spinner;

    -(IBAction)goBack:(id)sender{
        if ([webView canGoBack]) {
            [webView goBack];
        }
    }
    -(IBAction)goForward:(id)sender{
        if ([webView canGoForward]){
            [webView goForward];
        }

    }

    - (void)viewDidLoad
    {
        NSURL *url = [NSURL URLWithString:@"http://xxxxxx.com/weblink/hh_login.html"];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];
        [webView loadRequest:request];
        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.

    }

    // 6/13/2012 added to cache username and password
    - (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request        navigationType:(UIWebViewNavigationType)navigationType; {

        //save form data
        if(navigationType == UIWebViewNavigationTypeFormSubmitted) {

            //grab the data from the page
            NSString *username = [self.webView stringByEvaluatingJavaScriptFromString: @"document.myForm.username.value"];
            NSString *password = [self.webView stringByEvaluatingJavaScriptFromString: @"document.myForm.password.value"];

            //store values locally
            [[NSUserDefaults standardUserDefaults] setObject:username forKey:@"username"];
            [SFHFKeychainUtils storeUsername:username andPassword:password     forServiceName:@"MyService" updateExisting:YES error:nil];

        }    

    }
    // -----

    - (void)viewDidUnload
    {
        [super viewDidUnload];
        // Release any retained subviews of the main view.
    }

    - (BOOL)shouldAutorotateToInterfaceOrientation:         (UIInterfaceOrientation)interfaceOrientation
    {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    }

    - (void)webViewDidStartLoad:(UIWebView *)webView {
        [spinner startAnimating];
    }

    //- (void)webViewDidFinishLoad:(UIWebView *)webView {
    //    [spinner stopAnimating];
    //}

    // 6/13/2012 added to cache username and password
    - (void)webViewDidFinishLoad:(UIWebView *)webView{
        [spinner stopAnimating];

        //verify view is on the login page of the site (simplified)
        NSURL *requestURL = [self.webView.request URL];
        if ([requestURL.host isEqualToString:@"http://xxxxxx.com/weblink/hh_login.html"]) {

            //check for stored login credentials
            NSString *username = [[NSUserDefaults standardUserDefaults] objectForKey:@"username"];

            if (username.length != 0 ) {

                //create js strings
                NSString *loadUsernameJS = [NSString     stringWithFormat:@"document.myForm.username.value ='%@'", username];
                NSString *password = [SFHFKeychainUtils getPasswordForUsername: username andServiceName:@"MyService" error:nil];
                if (password.length == 0 ) password = @"";
                NSString *loadPasswordJS = [NSString stringWithFormat:@"document.myForm.password.value ='%@'", password];

                //autofill the form
                [self.webView stringByEvaluatingJavaScriptFromString: loadUsernameJS];
                [self.webView stringByEvaluatingJavaScriptFromString: loadPasswordJS];

            }
        }   
    }
    // -----

    @end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T09:44:49.017

尝试以下一个

您需要在 webview 加载时填写凭证。下面是加载 WebView 时调用的 UIWebView 的委托方法。此时传递的凭据不像加载 UIWebView 之前传递的那样传递，这是不正确的。

```
 - (void)webViewDidFinishLoad:(UIWebView *)webView
    {

    if(!isLoggedIn){//just load only onetime.

      //pass the login Credintails into textfield of WebView. 

    NSString* userId   =  @"userName" //here just replace that string to the username
    NSString* password =   @"password";//here just replace that string to the password

     if(userId != nil && password != nil ){

    NSString*  jScriptString1 = [NSString  stringWithFormat:@"document.getElementById('username').value='%@'", userId];
    //username is the id for username field in Login form

    NSString*  jScriptString2 = [NSString stringWithFormat:@"document.getElementById('password').value='%@'", password];
       //here password is the id for password field in Login Form
     //Now Call The Javascript for entring these Credential in login Form
    [webView stringByEvaluatingJavaScriptFromString:jScriptString1];

    [webView stringByEvaluatingJavaScriptFromString:jScriptString2];
      //Further if you want to submit login Form Automatically the you may use below line    

    [webView stringByEvaluatingJavaScriptFromString:@"document.forms['login_form'].submit();"];
    // here 'login_form' is the id name of LoginForm

    }

    isLoggedIn=TRUE;

}
} 
```

它真的会帮助你。

# .net - 我如何知道我是否需要用于 UAC 目的的 .NET 应用程序清单？

> ID：11086471
> 
> 赞同：1
> 
> 时间：2012-06-18T15:52:28.467
> 
> 标签：.net, uac

是否有规则或指南来了解是否需要 .NET 应用程序清单来实现 UAC 目的？

我有一个应用程序写入注册表（HKLM > Software > yadda yadda）并执行文件 I/O。我不确定它是否需要清单。文件 I/O 可能是网络共享（尽管应用程序本身会提示用户输入凭据）或本地。

如果我不确定，我宁愿不只是将其设置为最高级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:26:01.173

你应该包括一个清单。如果您不想总是请求不必要的提升，您可以请求 asInvoker 或highestAvailable。如果您的应用程序在没有提升的情况下无法运行，那么您可能别无选择，当然除了更改应用程序。

在尝试学习这些东西时，我发现有几个网站非常方便。

这个站点很好地解释了 UAC 的工作原理以及您可以预期它如何影响您的应用程序：

*每个软件工程师必须了解的关于 Windows Vista的知识* [http://codefromthe70s.org/vistatutorial.aspx](http://codefromthe70s.org/vistatutorial.aspx)

我还发现这篇关于清单的博客文章很有用：

*几个应用程序清单之谜和问题的答案* [http://blogs.msdn.com/b/patricka/archive/2009/12/09/answers-to-several-application-manifest-mysteries-and-questions.aspx](http://blogs.msdn.com/b/patricka/archive/2009/12/09/answers-to-several-application-manifest-mysteries-and-questions.aspx)

至于您的具体情况，最好的办法就是尝试一下。如果您能够写入所需的注册表项和无需提升的磁盘，那么您可以将其设置为 asInvoker。

只要您不尝试将任何内容保存到受限区域（如系统目录），I/O 就不会造成问题。恐怕我不记得写给 HKLM\Software 的规则了。如果它在没有海拔的情况下工作，那就太好了。

但作为最佳实践，我仍然会包含清单。

# java - Eclipse：“更新 SVN 缓存”挂起并锁定

> ID：11086474
> 
> 赞同：39
> 
> 时间：2012-06-18T15:52:35.667
> 
> 标签：java, eclipse, svn, subclipse, subversive

每次我启动 eclipse 时，程序都会开始做这个“更新 SVN 缓存”的事情，但它会永远处于 0%。在此操作完成（永远不会发生）之前，我无法执行任何操作（例如检查我的项目、构建它们，甚至运行它们）。此外，每当我尝试在编辑器中输入任何内容时，整个程序都会冻结，我必须终止该进程。

几天来我一直在谷歌搜索这个问题的答案，但还没有找到答案。有没有其他人遇到过类似的问题并找到了解决方案？

我想补充一点，我已经尝试从头开始重新安装 eclipse、它的所有插件和 jdk。似乎没有任何工作。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-02-23T03:49:53.943

我遇到了同样的问题，我试图通过禁用 Eclipse 中 SVN 的大部分性能设置来摆脱这个问题：

*   Windows > 首选项 > 团队 > SVN > 性能

或（对于最新版本）：Windows > Preferences > **Version Control (Team)** > SVN > Performance

*   禁用：计算深度传出状态、缓存、持久 SSH

![Eclipse 中的 SVN 性能设置](../Images/d84d45e1e354485d4447c566dcdc721a.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-12T19:37:47.950

我刚刚遇到了这个问题并且能够挽救它。这是位于 Juno 上的 Zend Studio 10.5。我的工作区中有大约五个项目，其中一个是打开的。我无法关闭该项目，因为它正在等待“更新 SVN 缓存”完成。

*   关闭 Eclipse 后，我进入我打开的项目并通过命令行运行“svn cleanup”。
*   在 workspace/.metadata/.plugins/org.eclipse.team.svn.core 中，我有一堆临时目录。我创建了一个备份 tarball，然后将它们全部删除。

那没有解决任何问题。最后我尝试了这个：

1.  关闭 Eclipse 后，我转到我的项目目录并将 .project 重命名为 project.xml。
2.  重新打开 Eclipse，项目已关闭。没有 SVN 更新消息。
3.  重新启动 Eclipse。
4.  打开项目，但 Eclipse 对丢失的 .project 文件犹豫不决。
5.  封闭的日食。
6.  转到我的项目目录并将 project.xml 重命名为 .project。
7.  重新启动 Eclipse。
8.  打开项目。一帆风顺。只是能够毫无意外地进行更改。

到目前为止，我的 workspace/.metadata/.plugins/org.eclipse.team.svn.core 目录仍然是空的。

我不知道我尝试的前两件事是否有帮助，或者只是重命名 .project 文件以强制关闭项目就可以了。下次发生（并且会有下一次）时，我会尝试强制关闭项目并报告回来。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-03-29T05:45:49.033

就我而言，我意识到与龟 SVN 资源管理器相关的窗口在某处打开。它可能锁定了缓存，而 Eclipse 正在等待解锁。

不是对这个问题的直接回答，但这可能对犯类似错误的人有所帮助。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-18T15:57:33.747

您不是唯一一个（请参阅[此错误报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=330659)或[此论坛主题](http://www.eclipse.org/forums/index.php/mv/msg/158413/#msg_500189)），但它可能不是 Eclipse 本身的错误。下一步：

1.  获取线程转储以查看这是死锁还是线程正在等待从未发生的事情（在错误报告中，它挂起`System.loadLibrary()`）。您可以使用`jconsole`它，它与 SDK 一起提供。

2.  [使用另一个 SVN 工具（命令行 svn 或TurtoiseSVN](http://tortoisesvn.tigris.org/) ，如果您在 Windows 上）检查您工作区中所有打开的项目（使用 SVN），以确保数据结构没有损坏。

3.  获取最新版本的 Eclipse 和/或 SVN 插件

4.  尝试不同的连接器。有些人使用 JNI 解决方案效果更好`javahl`，其他人使用纯 Java [SVNKit](http://svnkit.com/)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-09-22T05:09:34.960

1.  Windows > 首选项 > 团队 > SVN > 性能
    *   禁用：计算深度传出状态、缓存、持久 SSH
2.  转到首选项 -> 常规
    *   启用：始终在后台运行
    *   Enable : 显示堆状态
    *   工作台保存间隔（分钟）：9999
    *   这将在 Eclipse 中显示您的内存使用情况。
3.  然后编辑 eclipse.ini 文件并将 Xms 和 Xmx 值更改为： -launcher.XXMaxPermSize 512m -Xms1024m -Xmx1024m

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-06-17T09:26:31.643

我在工作区中有两次相同的项目时遇到了这个问题。确保您在工作区中只有一个副本，也许它会有所帮助。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-07-01T14:11:58.953

可能是eclipse内存问题。在执行以下步骤之前，我遇到了类似的问题：

*   转到 Preference -> General 并输入以下值：

![Eclipse_Preference_General](../Images/b805eec21012a81c7af83ca8320d6823.png)

这将在 Eclipse 中显示您的内存使用情况。

*   然后编辑*eclipse.ini*文件并将 Xms 和 Xmx 值更改为：

-Xms1024m

-Xmx1024m

查看内存状态。希望它会有所帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-06-13T04:15:55.573

I was also facing similar issue and I got it resolved this by unchecking "Compute deep outgoing state for folders" under Windows->Preferences->Team->SVN->Label Decorations

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-02-22T13:24:05.353

我解决了这样做：

-在您的工作区（在 Eclipse 中）**选择项目**（或所有项目），**右键单击**，从菜单中选择**Team > Cleanup**

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-04-22T18:53:38.710

这个主题帮助我解决了关于我的 eclipse svn 更新块的问题。

我正在使用 eclipse mars 出现这种情况。

1.  首先，我删除了两个我不需要的项目——以减少工作区中的项目数量。
2.  更改 eclipse.ini 中的参数也没有帮助。
3.  我的 Eclipse 集上有 -clean 参数，所以我也删除了它，希望它能更好地工作。它有点帮助，所以 eclispe 运行的时间更长，但不多。[rockfarkas](https://stackoverflow.com/users/2336825/rockfarkas)在这里暗示。
4.  最后真正有帮助的是从项目视图中快速标记所有项目 `Ctrl``A`，并在 SVN 缓存仍在运行时通过上下文菜单关闭它们。他们中的一半做了其他人做不到的，但在那之后我可以看到 SVN 缓存正在改变它的状态，所以我可以再次工作。下一步是关闭其余项目并一个一个打开。为了这个想法，我来阅读[user3096856](https://stackoverflow.com/users/3096856/user3096856)的帖子。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-11-27T17:54:46.167

我在 eclipse 中发现了一个索引错误，它阻塞了 svn。另一个项目资源和 svn repo 位于 .metadata.plugins\org.eclipse.core.resources.projects\ProjectName\4.tree 和其他资源中。

svn cleanup 与 'Team > SVN > Performance' 的上一个答案并不能解决我的问题。

'eclipse.exe -clean' 将使 eclipse 对 100% cpu 不负责任。

唯一的解决方案是在退出 eclipse 之后手动删除 org.eclipse.core.resources.projects* 文件。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-11-28T06:11:29.410

就我而言，在 30 多分钟的时间里，它只显示了 0% 的完成。我耐心等待，因为我尝试重新启动 eclipse/machine 仍然得到同样的结果。30分钟后，继续我的svn update操作，成功完成。

有时耐心，有帮助:)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-08-21T17:08:51.407

如果有来自 SVN 的重复项目。

1.  强制关闭日食。
2.  从文件空间中删除重复的项目。（例如：C:\Users\XXX\Workspace\DuplicateProject）
3.  重启日食
4.  固定的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-02-19T06:26:49.610

我使用 Subversive - SVN Team Provider 3.0.0 和 SVNKit 1.8.10 作为 SVN 连接器。我将 SVN 连接器更新到最新版本 1.8.11，并修复了它。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2014-01-10T17:55:28.667

你使用 Maven SCM 连接器吗？如果您不需要它，请尝试卸载它。Maven SCM 签出需要 SCM 连接器，我不使用 Maven SCM 项目签出，而是使用 SubEclipse 签出并使用导入现有项目将项目转换为 Maven 或从 Eclipse 的上下文菜单中转换为 Maven 项目选项。

# python - Python getopt 中的多字符命令解析

> ID：11086475
> 
> 赞同：4
> 
> 时间：2012-06-18T15:52:36.757
> 
> 标签：python, getopt, command-line-arguments

我一直在使用 python getopt 进行短期和长期的解析，效果很好。现在我需要在 getopt 函数中添加一些更短的变量，如果我需要多个字符作为 getopt:short，它看起来会更好。有没有办法做这样的事情。

```
getopt.getopt(argv,"hf:c:d:pv:pz:","") 
```

在这里，我需要将 pv 和 pz 作为单独的命令行参数访问，而不是 getopt 将其读取为 'p with no args'、'v with one args'。我在引号内尝试了 'pv:' [pv:]，但它识别了 pv，但不读取 args。

此外，（在不同的注释上）相同的参数是否可以有多个输入。请原谅我，如果你这是一个非常简单的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-09-30T20:57:44.127

根据我对文档和研究的理解，当我需要和你一样的东西时，我没有办法做到这一点。`shortopts`带前缀“-”只适用于一个字符，对于多个字符，您必须使用`longopts`，它使用前缀“--”。

python3中的示例：

```
import sys, getopt

try:
    opts, args = getopt.getopt(sys.argv[1:], 'c:d:', ['hf','pv','pz'])
except getopt.GetoptError as e:
    print(str(e))

for o, a in opts:
    print(o, ':', a) 
```

不幸的是，我认为没有办法`longopts`输入必需的参数，但这可以通过手动检查来解决。

有关更多信息，我建议查阅文档： [https ://docs.python.org/3.1/library/getopt.html](https://docs.python.org/3.1/library/getopt.html)

# c++ - 如何让事件处理程序访问成员数据？

> ID：11086479
> 
> 赞同：0
> 
> 时间：2012-06-18T15:52:47.087
> 
> 标签：c++, .net, delegates

```
 myWebClient->DownloadProgressChanged += gcnew DownloadProgressChangedEventHandler( &Form1::DownloadProgressCallback ); 
```

给出错误：

> 1>.\Form1.cpp(26) : error C3352: 'void Form1::DownloadProgressCallback(System::Object ^,System::Net::DownloadProgressChangedEventArgs ^)' : 指定的函数与委托类型'void ( System::Object ^,System::Net::DownloadProgressChangedEventArgs ^)'

该文档使用静态非成员函数作为此委托参数，但我想更新`Form1`该类的进度条成员。我在这里做错了什么？

我使用的是 .NET 2.0，所以请尽量保持语言过时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:57:49.250

成员函数的委托将被声明（在表单内）：

```
 myWebClient->DownloadProgressChanged += gcnew DownloadProgressChangedEventHandler(this,  &Form1::DownloadProgressCallback ); 
```

基本上，第一个参数是定义成员函数的对象。在这种情况下，`this`应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T15:57:47.653

将对象传递给委托构造函数。

```
gcnew DownloadProgressChangedEventHandler( this, &Form1::DownloadProgressCallback ); 
```

# javascript - 停止/静音音频

> ID：11086485
> 
> 赞同：1
> 
> 时间：2012-06-18T15:52:58.503
> 
> 标签：javascript, jquery, html, flash, audio

单击“iFrame”类的链接时，如何暂停以下音频对象？

```
<object type="application/x-shockwave-flash" data="../flash/player_mp3_maxi.swf" width="140" height="20">
<param name="wmode" value="transparent">
<param name="movie" value="../flash/player_mp3_maxi.swf">
<param name="FlashVars" value="configxml=../flash/config.xml&amp;mp3=../audio/intro/intro_08_background_07.mp3">
<p>Flash Audio Player</p>
</object> 
```

我需要用 javascript 或 jquery 编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T22:45:05.370

如果它是您自己的 .swf 并且您可以重新编译它，我会说您需要使用 ExternalInterface 公开播放器暂停方法。如果您以前没有做过，请查看[http://livedocs.adobe.com/flex/3/html/help.html?content=19_External_Interface_04.html](http://livedocs.adobe.com/flex/3/html/help.html?content=19_External_Interface_04.html)

完成后，您只需向 HTML 链接添加一个事件侦听器，并分配一个在用户单击时触发的函数。该函数调用暴露的 flash 函数暂停。

```
theLink.addEventListener("click", function(e){
    //call the exposed flash pause function
    swfObject.theExposedFunction();
}); 
```

说得通？

# php - DateTime::createFromFormat 生成布尔值？

> ID：11086486
> 
> 赞同：0
> 
> 时间：2012-06-18T15:52:58.770
> 
> 标签：php, datetime, date

在 for 循环中，我使用以下代码从一种日期格式转换为另一种日期格式：

```
339: $newdate = date_create_from_format('j-M g:i A', $moneyline[$i][date]);
340: echo date_format($newdate, 'Y-m-d'); 
```

根据`var_dump`$moneyline[$i][date]，我的变量似乎是一个字符串： `string(15) "18-Jun 7:05 PM"`

但是当我将变量用作`$newdate`构造函数的参数时，`$newdate`会根据 vardump 创建一个布尔值： `bool(false)`

这意味着当我尝试执行第 340 行时，我收到以下错误：

```
Warning: date_format() expects parameter 1 to be DateTime, boolean given in /home/andrewmin/andrewmin.com/share/scraping/betting_scraping.php on line 340 
```

但是，如果我将第 339 行更改为：

```
339: $newdate = date_create_from_format('j-M g:i A', '18-Jun 7:05 PM'); 
```

它打印完美。有人对为什么有任何想法吗？

编辑：对不起，这不是一个 foreach，它是一个 for：

```
for ($i = 2; $i < $array_length; $i++) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:36:55.253

当然，当我使用此代码进行测试时：

```
$moneyline = array(
  13 => array(
    'date' => "18-Jun 7:05 PM"
  )
);
$i = 13;
$newdate = date_create_from_format('j-M g:i A', $moneyline[$i][date]);
echo date_format($newdate, 'Y-m-d'); 
```

我得到这个结果：

```
**Notice:**  Use of undefined constant date - assumed 'date' in J:\www\test\datetime.php on line 89

2012-06-18 
```

可以通过正确引用`'date'`数组索引来消除该通知。

我的猜测：您的`$moneyline`数组包含一个不符合您提供的日期格式的字符串（例如一个空字符串）。在这种情况下，`date_create_from_format`将失败并返回`false`。

如有疑问，请发布所涉及代码的更完整副本以及代码失败的数组。

# javascript - 将用户输入分配给索引中有变量的对象

> ID：11086488
> 
> 赞同：0
> 
> 时间：2012-06-18T15:53:06.400
> 
> 标签：javascript, json

我正在尝试使用 JS 来获取用户输入并根据用户的输入修改某些对象属性。我将对象的索引存储在选择的 alt 属性中，以便使用它来更新正确的对象。我收到一个错误：元素 [Payment_Format_name] 未定义

WF.php 文件从 CSV 获取数据并将其格式化为覆盖维度的对象。

```
$(document).ready(function() { 
$.getJSON('WF.php', function(data) {

    var newDiv, NewDiv2, NewDiv3,InvoiceInfo, count, DeliveryMethod, PaymentFormat, Payment_Format_id, Payment_Format_name;

    count = 0;

    $.each(data, function(index, element) {
        count = count + 1; 
        //document.write (count);   

        newDiv = $('<div/>').addClass('row').appendTo('#showdata');

        newDiv3 = $('<div/>').addClass('hd').appendTo(newDiv);
        $('<div class="hd_field">' + element['PmtRec']['RcvrParty']['Name']['Name1'] + '</div>').appendTo(newDiv3);

        if (element['PmtRec']['PmtMethod'] === 'CHK'){

                $('<div class="hd_field">Delivery Method: <select alt="Delivery_Method" " id="Delivery' + count  +'" class="Delivery_Method"><option value="100" selected="selected">US Mail</option><option value="300">Foreign Mail</option><option value="J00">Certified Mail with Return Receipt</option></select><div id="Selected_Method' + count +'"></div></div>').appendTo(newDiv3);
        }
         else if (element['PmtRec']['PmtMethod'] === 'DAC') {
                $('<div class="hd_field">Payment Format: <select alt="'+index +'" id="Payment_' + count  +'" class="Payment_Format"><option value="CTX" selected="selected">Company to Company</option><option value="PPD">Company to Person</option></select><div id="Selected_Format'+count+'"></div></div>').appendTo(newDiv3);

         }
        $('<div class="hd_field">' + 'Total: ' + element['PmtRec']['CurAmt'] + '</div>').appendTo(newDiv3);

        InvoiceInfo = element['PmtRec']['PmtDetail']['InvoiceInfo'];

        $.each(InvoiceInfo, function(index, element) {
        newDiv2 = $('<div/>').addClass('sub_row').appendTo(newDiv);
                $('<div class="field">' + element['InvoiceNum'] + '</div>').appendTo(newDiv2);
                $('<div class="field">' + element['NetCurAmt'] + '</div>').appendTo(newDiv2);
            });

        $('select.Payment_Format').change(function(){ 
            Payment_Format_id = ($(this).attr('id').match(/[\d]+$/));
            Payment_Format_name = ($(this).attr('alt')); 
            //alert(Payment_Format_name);
            PaymentFormat = ($(this).val()); 
            element[Payment_Format_name] = Payment_Format_name;
            element[Payment_Format_name]['PmtRec']['PmtFormat'] = PaymentFormat;
            $('#Selected_Format' + Payment_Format_id).text('Selected Format: ' + element[Payment_Format] );

            });

        });
            console.log(data);
     });

}); 
```

PHP（这是一个片段，我实际上在这里创建了更多元素）

```
 if (($handle = fopen('upload/BEN-new.csv', "r")) === FALSE) {
            die('Error opening file'); 
         }

         $headers = fgetcsv($handle, 1024, ',');
         $cardCodes = array();
         $payments = array();
         $details = array ();

        while ($row = fgetcsv($handle, 1024, ",")) {
               $cardCodes[] = array_combine($headers, $row);

        }

            $prevCode = '';

            foreach ($cardCodes as $key => $value) {

                $payments[$value['CardCode']]['PmtRec']['PmtCrDr'] = 'C';
                $payments[$value['CardCode']]['PmtRec']['PmtFormat'] = 'CTX';
                                    fclose($handle);
                                    echo json_encode($payments) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:37:53.557

好的，所以对于初学者来说，

```
$('select.Payment_Format').change(function(){ 
        Payment_Format_id = ($(this).attr('id').match(/[\d]+$/));
        Payment_Format_name = ($(this).attr('alt')); 
        PaymentFormat = ($(this).val()); 
        element[Payment_Format_name] = Payment_Format_name;
        element[Payment_Format_name]['PmtRec']['PmtFormat'] = PaymentFormat;
        $('#Selected_Format' + Payment_Format_id).text('Selected Format: ' + element[Payment_Format] );
    });
}); 
```

不是您想要的 -`'select.Payment_Fomat'`对于`$.each(data, function(index, element)`. 事件侦听器应该添加到`$.each`函数外部，`$.getJson`调用内部，它需要遍历`elements`对象，并尝试找到要更新的正确数据。

为早些时候的无用道歉，现在是凌晨 5 点，显然我有点妄想。

# jquery - jQuery 密码强度正则表达式，带有潜在的逐项反馈消息

> ID：11086489
> 
> 赞同：-2
> 
> 时间：2012-06-18T15:53:07.227
> 
> 标签：jquery, regex, passwords

我正在寻找满足以下密码强度要求的正则表达式：

*   最少 8 个字符
*   至少一个大写字符
*   至少一个数字 (0-9)
*   至少一个特殊字符 (!,@,#,$,%,^,&,*,?,_,~,-,(,))

我需要能够使用[jquery.validate.password.js](http://bassistance.de/jquery-plugins/jquery-plugin-password-validation/)插件对其进行评估。

此外，是否可以根据他们缺少的标准向用户提供反馈？例如，如果用户缺少一个大写字符，我可以吐回一条消息告诉他们吗？他们提供了一个示例，展示了如何传递不同的验证消息：

```
var originalPasswordRating = $.validator.passwordRating;
$.validator.passwordRating = function(password, username) {
    if (password.length < 100) {
        return { rate: 0, messageKey: "too-short" };
    }
};

$.validator.passwordRating.messages = $.extend(originalPasswordRating.messages, {
    "too-short": "Your password must be longer than 100 chars"
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:24:03.170

听起来您想运行一系列正则表达式并单独存储结果。就个人而言，它们是微不足道的。在 JavaScript 中：

```
var password = "P@ssw0rd";
var validLength = /.{8}/.test(password);
var hasCaps = /[A-Z]/.test(password);
var hasNums = /\d/.test(password);
var hasSpecials = /[~!,@#%&_\$\^\*\?\-]/.test(password);

var isValid = validLength && hasCaps && hasNums && hasSpecials; 
```

[http://jsfiddle.net/RichardTowers/cAuTf/](http://jsfiddle.net/RichardTowers/cAuTf/)

请注意，即使有规则，人们也可以选择非常弱的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:17:10.630

我从来没有使用过那个插件，但我相信这样的东西应该适合你：

```
var originalPasswordRating = $.validator.passwordRating;
var upperCaseRegex = /[A-Z]+/;
var numberRegex = /[0-9]+/
var specialCharRegex = /[\!\@\#\$\%\^\&\*\?\_\~\-\(\)]+/;
$.validator.passwordRating = function(password, username) {
    if (password.length < 8) {
        return { rate: 0, messageKey: "too-short" };
    } else if(!password.match(upperCaseRegex)) {
        return { rate: 0, messageKey: "no-upper" };
    } else if(!password.match(numberRegex)) {
        return { rate: 0, messageKey: "no-number" };
    } else if(!password.match(specialCharRegex)) {
        return { rate: 0, messageKey: "no-special" };
    }

}; 
```

免责声明：我没有测试过任何这段代码，但我相信这应该为您指明正确的方向。

您将需要使用我在示例中创建的“messageKeys”创建相应的消息...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-29T10:44:51.283

尝试这个..

```
function validatePass(pswd) {

var validLength = /.{8,}/.test(pswd);
var hasCaps = /[A-Z]/.test(pswd);
var hasLower = /[a-z]/.test(pswd);
var hasNums = /\d/.test(pswd);
var hasSpecials = /[~!,@#%&_\$\^\*\?\-]/.test(pswd);

if (validLength){                   // VALIDO LA LONGITUD 8 O MÁS
    if (hasCaps){                   // VALIDO SI HAY MAYÚSCULAS
        if (hasLower){              // VALIDO SI HAY MINÚSCULAS
            if (hasNums){           // VALIDO SI HAY NÚMEROS
                if (hasSpecials){   // VALIDO SI HAY CARACTERES ESPECIALES
                    return 0;
                } else return 5;    // NO HAY CARACTERES ESPECIALES
            } else return 4;        // NO HAY NÚMEROS
        } else return 3;            // NO HAY MINÚSCULAS
    } else return 2;                // NO HAY MAYÚSCULAS
  } else return 1;                  // LA LONGITUD ES INFERIOR A 8
} 
```

像这样检查密码..

```
 var valid_str = validatePass(renew_pass);

 if (valid_str == 1){
      alert("Mínimo 8 caracteres");

 } else if (valid_str == 2){ // NO HAS UPPERCASE 
      alert("NO HAS UPPERCASE");

 } else if (valid_str == 3){ // NO HAS LOWERCASE 
      alert("NO HAS LOWERCASE");

 } else if (valid_str == 4){ // NO HAS NUMS
      alert("NO HAS NUMS");

 } else if (valid_str == 5) { // NO HAS SPECIAL CHARACTERS
      alert("NO HAS SPECIAL CHARACTERS");

 } 
```

# nhibernate-mapping - 在与域对象不同的程序集中定义 NHibernate 映射

> ID：11086496
> 
> 赞同：1
> 
> 时间：2012-06-18T15:53:36.617
> 
> 标签：nhibernate-mapping

我有一个程序集*Foo.Bar*，它包含我所有的域逻辑和我的域对象（例如`public class Project`，`public interface IProjectRepository`）。

我还有一个程序集*Foo.Bar.Data*作为我的 NHibernate 数据访问层，它包含`IProjectRepository`基于 NHibernate 的实现。它引用*Foo.Bar*并包含映射文件，例如*Project.hbm.xml*。

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Foo.Bar"
                   namespace="Foo.Bar.Domain" default-lazy="false">
  <class name="Project">
    <id name="Id" column="ID" />
    <property name="Customer" column="CUSTOMER" />
  </class>
</hibernate-mapping> 
```

不幸的是，使用此设置我得到以下异常：

**NHibernate.MappingException：没有持久性：Foo.Bar.Domain.Project**

NHibernate 日志说：

**WARN NHibernate.Cfg.Configuration (null) - 在程序集中找不到映射文档：Foo.Bar，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null**

但是，如果我将映射文件添加到*Foo.Bar*组件，一切正常。但我真的不希望任何数据访问或 NHibernate 实现细节到我的域程序集中。这往往是最佳做法，对吧？这种设置不是一个好方法吗？

如何让 NHibernate 在*Foo.Bar.Data* * 程序集中找到映射文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:43:53.647

原来我所要做的就是添加

```
<mapping assembly="Foo.Bar.Data"/> 
```

`<session-factory>`到我在元素中的休眠配置。

# project - Sonar runner 找不到或无法加载主类

> ID：11086501
> 
> 赞同：0
> 
> 时间：2012-06-18T15:53:52.927
> 
> 标签：project, sonarqube, runner

我已经安装了声纳，它可以在`http://localhost:9000`

当我想使用声纳运行器（我的项目目录中的命令）分析项目时，我收到以下错误：

```
D:\eclipse_workspace\Project>sonar-runner.bat
C:\Program Files (x86)\sonar-runner-1.3\bin
Error: Could not find or load main class org.sonar.runner.Main 
```

我在 Windows 7 上工作并且属性文件没有改变（德比数据库）。我怎样才能运行声纳亚军？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:54:13.923

您可以尝试将 Sonar Runner 安装在不包含空格的文件夹中，这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-21T19:16:43.830

我出于不同的原因遇到了这个问题。虽然我的路径没有空格，但它有一个`'⁄' // U+2044`导致问题的“分数斜线”( )。一旦我用一个`-`工作正常的东西替换它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-17T07:26:54.480

我有非拉丁（日语）文件夹名称，这给出了这个错误。把它放在我的`C:`根文件夹中解决了这个问题。

# c++ - 如何构建针对特定 Visual C++ Redistributable 版本的 Visual C++ 项目

> ID：11086504
> 
> 赞同：0
> 
> 时间：2012-06-18T15:54:02.873
> 
> 标签：c++, visual-c++, visual-studio-2005, msvcrt

我有一个 C++ 本机库，我正在使用 Visual Studio 2005 构建它，它是一个更大项目的一部分。

该项目通常包含其他几个 dll，包括 Microft C++ Redistributable Package 库（例如 msvcr80.dll）。这样我们就可以部署我们的项目，而无需让用户安装 Microsoft Visual C++ Redistributable Package 2005。

问题是，每当我将我的库放入这个更大的项目中时，我都会收到以下错误：

```
This application has failed to start because the application configuration is incorrect. Reinstalling application may fix this problem. 
```

为了解决这个问题，我查看了我的 dll 使用的是哪个版本的 Visual Studio CRT，以及较大的项目使用的是哪个版本，结果发现它们是不同的。

以下是较大项目的清单：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
    <noInheritable></noInheritable>
    <assemblyIdentity type="win32" name="Microsoft.VC80.CRT" version="8.0.50727.4053" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b"></assemblyIdentity>
</assembly> 
```

这是我从图书馆得到的：

```
<dependency>
    <dependentAssembly>
      <assemblyIdentity type="win32" name="Microsoft.VC80.CRT" version="8.0.50727.6195" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b"></assemblyIdentity>
    </dependentAssembly>
</dependency> 
```

然后我在网上做了一些研究，发现至少有两种方法可以手动更改我的 dll 的 CRT 版本。

第一个是在我的项目中设置以下宏：

```
#define _CRT_ASSEMBLY_VERSION "8.0.50727.4053" 
```

第二个在这篇[文章](https://stackoverflow.com/questions/730134/how-to-enforce-c-compiler-to-use-specific-crt-version)中有详细说明。

我已经尝试了这两种方法，但都没有奏效。

至于第一个，我已将 _CRT_ASSEMBLY_VERSION 添加到我项目的一个头文件中，但它并没有更改其 CRT 版本。另外，如果我有多个项目，是否必须将这个宏添加到所有项目中？

至于第二个，我将图书馆的清单更改为：

```
<?xml version='1.0' encoding='UTF-8' standalone='yes'?>
<assembly xmlns='urn:schemas-microsoft-com:asm.v1' manifestVersion='1.0'>
    <dependency>
        <dependentAssembly>
            <assemblyIdentity type='win32' name='Microsoft.VC80.CRT' version='8.0.50727.4053' processorArchitecture='x86' publicKeyToken='1fc8b3b9a1e18e3b' />
        </dependentAssembly>
    </dependency>
</assembly> 
```

但是现在我的库正在生成，里面没有标签。

最后请注意，如果我可以使用第一种方法，我非常喜欢，因为它更简单并且可以直接进入代码，这样我就不必记住为我的项目维护一个单独的清单文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:36:21.040

> 然而，这是一个高度受控的环境

问题出在哪里，那台机器没有收到 CRT 的最新安全更新。如果那台机器也是安装程序的发起者，那么您肯定会遇到您描述的问题，您要求的 DLL 版本在该机器上不可用。

将文件部署到已知安全问题的用户机器上绝对是一种需要审查的策略。定义 _CRT_ASSEMBLY_VERSION 宏是正确的方法，但请考虑在项目设置中而不是在源文件中设置该宏，这样您就可以绝对确定它是在 vc/include/crtassem.h 获取 #included 之前设置的。项目 + 属性、C/C++、预处理器、预处理器定义设置。

是的，当然在你*所有*的项目上。

# android - Android绘图缓存在后台做什么？

> ID：11086508
> 
> 赞同：1
> 
> 时间：2012-06-18T15:54:10.597
> 
> 标签：android, caching, path, draw

我有一个应用程序，它需要我绘制到画布的路径。随着路径数量的增加，累积绘图动作需要更长的时间，所以我想我会通过使用绘图缓存来提高速度。

为此，我有一个`onDraw`看起来有点像这样的方法：

```
@Override
protected void onDraw(Canvas canvas) {
    Path path;
    Paint paint;
    synchronized(mPaths) {
        buildDrawingCache();
        Bitmap bmp = getDrawingCache();
        if(bmp!=null) canvas.drawBitmap(bmp,
                new Rect(0, 0, bmp.getWidth(), bmp.getHeight()),
                new Rect(getLeft(), getTop(), getRight(), getBottom()),
                null);
        for(int i=mLastCount; i<mPaths.size(); ++i) {
            path = mPaths.get(i);
            paint = mPaints.get(i);
            canvas.drawPath(path, paint);
        }
        mLastCount = 0;
        mDrawn = true;
        destroyDrawingCache();
    }
} 
```

`mPaths`并且`mPaints`是`Path`和`Paint`对象的列表，我设置了一个方法来计算有多少是新的，所以它只重绘最后一个。我最初打电话`setDrawingCacheEnabled(true)`而不是，`buildDrawingCache()`但这`destroyDrawingCache()`没有用（这可能很重要）。

不管怎样，这段代码有效——它产生了一个位图，我可以将它写入画布，然后我只绘制最后一条路径，一切都很好，*只是*随着我绘制越来越多的路径，它仍然变慢，就好像它还在重绘一样期间的所有路径`buildDrawingCache()`。

是这样吗？理想情况下，我希望 draw 方法对位图进行 blitting，然后在其上放置一条路径。如果它每次都从所有路径生成位图，我不妨不打扰（事实上，如果是这种情况，我可能会编写自己的位图生成代码，但这似乎很痛苦）。

如果*不是*发生了什么，是否还有其他可能导致代码变慢的原因？

# wpf - Caliburn.Micro 将 View 连接到 ViewModel 以供 ContentControl 显示

> ID：11086510
> 
> 赞同：3
> 
> 时间：2012-06-18T15:54:11.740
> 
> 标签：wpf, mvvm, caliburn.micro

我在将视图加载到 ContentControl 时遇到了一些问题。我试图让这个尽可能简单，所以我使用了 CM 附带的 Hello 项目。我确保 Hello 项目正确编译并运行。它显示一个带有文本框和一个按钮的窗口。文本框和按钮都在运行时连接到示例 ViewModel。

我修改了 ShellView.xaml 并将 StackPanel 控件替换为 Grid 控件，并设置了 4 行和 1 列的网格。我将文本框分配给第一行，将按钮分配给第二行，然后将两个单独的 ContentControl 分配给最后两行。

```
<Grid Width="800" Height="600">
    <Grid.ColumnDefinitions>
        <ColumnDefinition></ColumnDefinition>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition></RowDefinition>
        <RowDefinition></RowDefinition>
        <RowDefinition></RowDefinition>
        <RowDefinition></RowDefinition>
    </Grid.RowDefinitions>
    <TextBox Grid.Row="0" Grid.Column="0" x:Name="Name" />
    <Button Grid.Row="1" Grid.Column="0" x:Name="SayHello" Content="Click Me" />
<ContentControl Grid.Row="2" Grid.Column="0" x:Name="TopMenu" 
    VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch"></ContentControl>
<ContentControl Grid.Row="3" Grid.Column="0" x:Name="BottomMenu" 
    VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch"></ContentControl>
</Grid> 
```

我在 ViewModels 文件夹中创建了两个单独的 C# 类，它们是 ViewModels，分别称为 TopMenuViewModel.cs 和 BottomMenuViewModel.cs。这两个类都扩展了 PropertyChangedBase 类。这只是模仿示例项目附带的 ShellViewModel.cs 类。

```
using System;
using Caliburn.Micro;
namespace TestWithCaliburnMicro.ViewModels
{
/// <summary>
/// Description of BottomMenuViewModel.
/// </summary>
public class BottomMenuViewModel : PropertyChangedBase
{
    public BottomMenuViewModel()
    {
    }

} 
```

我在 Views 文件夹中创建了两个单独的 WPF 用户控件，它们是对应的 View，分别称为 TopMenuView.xaml 和 BottomMenuView.xaml。我在每个 xaml 中添加了一个标签，其内容为“顶部菜单”或“底部菜单”，以区分两者。

```
<Grid>
    <Label>Bottom Menu View</Label>
</Grid> 
```

在 ShellViewModel.cs 类中，我创建了两个公共属性，其中只有“get”访问器设置为返回相应 ViewModel 的实例。

```
 private BottomMenuViewModel _bottomMenu;
    public BottomMenuViewModel BottomMenu {
        get { return _bottomMenu; }
    }

    private TopMenuViewModel _topMenu;
    public TopMenuViewModel TopMenu {
        get { return _topMenu;} 
    } 
```

为任一属性的 get 访问器添加中断表明在调试项目时调用了 get 访问器。我在 BottomMenuViewModel.cs 类的构造函数中添加了一个简单的语句，例如 int x = 0 并在该行中添加了一个中断，但是中断从未被击中，这对我来说意味着构造函数没有被调用，所以真的是这个类是不是创建的？

我相信我正在做的事情非常基础，并且已经阅读了 CM Codeplex 网站上的 All About Conventions 文档，并通过以下评论确认了逻辑：[关于 stackoverflow 的先前问题](https://stackoverflow.com/questions/6185675/how-do-i-load-controls-in-different-contentcontrols-of-a-shell-using-caliburnmic)

希望有人有时间阅读本文并为我指明正确的方向。谢谢。

GitHub 上的解决方案。注意：使用 SharpDevelop 4.x [GitHub 解决方案制作](https://github.com/devcrew/TestWithCaliburnMicro)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:41:36.350

在 的构造函数中实例化您的视图模型`ShellViewModel`，或者如果您希望稍后实例化它们，然后将设置器添加到您的视图模型属性，并调用该`NotifyOfPropertyChange`方法以通知您的 UI 这些属性引用已更改。

# css - Chrome：纯文本突出显示

> ID：11086511
> 
> 赞同：4
> 
> 时间：2012-06-18T15:54:13.543
> 
> 标签：css, google-chrome, text, highlighting

我不敢相信我在问这个，但是，有没有办法让 Chrome 在突出显示内容时像 IE 一样运行？当简单地从左到右拖动多个元素时，Chrome 似乎喜欢突出部分或整个元素，而不是像 IE 那样仅突出显示文本。

这是一个例子：http: [//jsfiddle.net/cpMtK/](http://jsfiddle.net/cpMtK/)

铬高亮：

![在此处输入图像描述](../Images/c5eb7d228f57c6b19b08ac8bf8647798.png)

IE 突出显示：

![在此处输入图像描述](../Images/a2b3aca58b4bf77c098f4f9319e67127.png)

我试过使用：

```
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none; 
```

正如[此处](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)的 SO 答案中所建议的那样，它只是禁用了所有突出显示。然后我查看`user-select`并发现它有一个`text`选项，而不是`none`. 所以，我应用了它，但它的效果与`none`.

我还尝试将`none`设置应用于某些通用文本标签`*`并有选择地应用于`text`某些通用文本标签，例如`span`、`p`、`h1`等，但它的行为仍然相同。

是否有可用的 CSS 规则，或者这只是 Chrome 的工作方式？

**更新**

`padding`当我广泛使用 时，我需要抵消内容`:hover`，这大大增加了元素的命中区域，而`margin`不会。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:01:51.520

如果您真的想保留填充，请使用子元素。

演示：http:
[//jsfiddle.net/cpMtK/2/](http://jsfiddle.net/cpMtK/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T15:58:45.390

使用边距`div.box`而不是垂直填充。

```
.box {
    margin:20px 0;
    width: 100px;
    padding: 0 40px;
} 
```

# iphone - 当 iPhone 被锁定并且用户按下电源按钮时编程后台行为

> ID：11086515
> 
> 赞同：1
> 
> 时间：2012-06-18T15:54:24.720
> 
> 标签：iphone, ios

抱歉，我是 iPhone 开发的新手，我的谷歌搜索失败了，所以我不得不求助于在 SO 上发布一个可能很愚蠢的问题。

我想编写一个应用程序，它在暂停时会在用户按下主页或电源按钮（大概是为了解锁手机）时执行一个动作。我阅读了 iOS App Programming Guide 的[App States and Multitasking](https://web.archive.org/web/20140824215114/https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW45)中的部分，并且“在唤醒时处理排队通知”讨论了在唤醒时处理排队事件。然而，这不是我所追求的。

我想知道是否有可能：

1.  从手机睡眠状态（我找不到手机状态的文档，所以我说的是用户按下电源按钮关闭屏幕的情况），我希望我的应用程序准备好响应用户按下电源或主页按钮的事件（解锁手机）
2.  我希望我的应用程序响应用户解锁手机时发生的事件。我在[这里找到了一个很接近的答案](https://stackoverflow.com/questions/706344/lock-unlock-events-iphone)。
3.  当有电话进来、被忽略等时，我不想要任何时髦。:)

据我所知，这是 API 中围绕锁定和解锁的一个非常灰色的区域，我想验证我是否在浪费时间尝试这样做。

看起来我可以[使用加速度计来检测手机何时被锁定](https://stackoverflow.com/questions/706344/lock-unlock-events-iphone/7479052#7479052)，但我也假设在所有未来的 iOS 版本中我都无法指望这种行为。

编辑 - 我认为我可以通过假设应用程序必须在手机被锁定和解锁时运行来处理锁定和解锁要求，但我仍然无法弄清楚是否可以确定上面的＃1，即已按下电源按钮并显示解锁屏幕。同样，我想知道是否**再次**按下电源按钮并且不再显示（即屏幕关闭）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:15:23.953

您的应用程序被暂停/后台处理的所有行为都在您引用的文档中。AppDelegate 将接收这些消息并将它们传递到您想要收听它们的任何视图。

```
-applicationWillTerminate
-applicationWillEnterBackground
-applicationDidBecomeActive
-applicationWillResignActive 
```

如果您希望视图收到任何这些事件的通知，您可以在视图中设置通知观察者。然后只需覆盖它们或设置自定义方法来完成任何需要完成的工作。

虽然 Apple 文档一开始可能有点模糊，但所有信息都在那里，让您知道您的应用程序将进入哪个状态以及如何处理它。由您决定您的应用程序需要为这些事件中的每一个执行什么操作。希望这可以帮助。

# android - 无法将 Android 连接到网络，为什么此代码不起作用？

> ID：11086517
> 
> 赞同：0
> 
> 时间：2012-06-18T15:54:29.830
> 
> 标签：android

我不知道为什么我无法用这段代码连接到任何地方：（ping 返回 2）

```
public class PhoneGapProjActivity extends DroidGap {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Runtime runtime = Runtime.getRuntime();
    Process proc;
    proc = runtime.exec("ping www.google.com -c 1");
    proc.waitFor();

    Log.d("someTag", "exitValue(): " + proc.exitValue());
    ...
} 
```

权限如下：

```
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:03:42.757

**在清单**下定义您的权限（作为直接子项）。例如：

```
<manifest>
   ...
   <uses-permission android:name="android.permission.INTERNET" />
   ...
</manifest> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:34:33.350

正如 Waqas 所说，必须在标签之外声明许可。

除此之外，在 android 中执行**ping**有一个奇怪的特性，可能会给你带来麻烦。选项必须在目标主机之前定义，因此不会被接受，但会。`ping www.stackoverflow.com **-c 1**``ping **-c 1** www.stackoverflow.com`

我不能向你保证这是所有安卓手机的行为，但这是我在具有库存构建的 Galaxy S2 和运行氰基的 Nexus S 中得到的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:06:10.547

只需在清单文件中添加以下权限

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

# jquery - Pixastic 去饱和加载和悬停颜色

> ID：11086518
> 
> 赞同：1
> 
> 时间：2012-06-18T15:54:36.010
> 
> 标签：jquery, canvas, pixastic

我有一组图像在加载时必须去饱和，在悬停时必须有颜色。我已经尝试过了，但是悬停不起作用，但它确实会降低负载的饱和度：

```
$(window).load(function () {
        $(".box img").pixastic("desaturate");

        $(".box img").mouseenter(function (e) {
            var self = $(this);
            Pixastic.revert(self); // make it colour
        });

        $(".box img").mouseleave(function (e) {
            // make it black n white again
            $(this).pixastic("desaturate");
        });

 }); 
```

我在这里看到了其他一些帖子，但似乎都没有。
我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T20:46:29.967

**[工作演示](http://jsfiddle.net/loktar/gyF74/)**

```
// original image
var img = document.getElementById("box");
// desaturated image
var img2 = Pixastic.process(img, "desaturate");

//initial mouseover
img2.onmouseover = function(){fix(img2)};

// mouseout
img.onmouseout = function() {
    // reassign to img2
    img2 = Pixastic.process(img, "desaturate");
    // rebind img2 mouseover
    img2.onmouseover = function(){fix(img2)};
}

// revert
function fix(img) {
    Pixastic.revert(img);
} 
```

可能有更好的方法来做到这一点，但基本上每次你恢复或去饱和时，你都会`img`用一个`canvas`元素替换 ，反之亦然，这会破坏任何绑定事件。上面所做的是在发生这种情况时重新绑定这些事件中的每一个。

使用 jQueries 也可以做到这一点`.on`

# gradle - 在 Gradle 1.0 中使用插件应用程序时提供自己的脚本

> ID：11086523
> 
> 赞同：5
> 
> 时间：2012-06-18T15:55:07.990
> 
> 标签：gradle

我使用 Gradle 1.0 构建我的项目，并且我想使用该`application`插件来创建应用程序分发包。

我想提供自己的，而不是生成的启动脚本。

如何跳过 CreateStartScripts 任务？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T00:54:22.140

它似乎是硬编码的，所以我猜没有简单的方法可以覆盖它。也许破解只读`startScripts.outputs`属性会起作用。

无论哪种方式，我都建议您创建自己的存档任务。这是一个几乎完全`distZip`一样的功能，但没有（从[ApplicationPlugin.groovy](https://github.com/gradle/gradle/blob/master/subprojects/plugins/src/main/groovy/org/gradle/api/plugins/ApplicationPlugin.groovy)`startScripts`借来的）。

```
task myDist(type: Zip){
  def baseDir = { archiveName - ".zip" }
  into(baseDir){
    from(project.file("src/dist"))
    into("lib") {
        from(jar)
        from(project.configurations.runtime)
    }
  }
} 
```

# ruby-on-rails - Rails 3 + Devise：在用户注册时设置日期时间

> ID：11086528
> 
> 赞同：0
> 
> 时间：2012-06-18T15:55:22.510
> 
> 标签：ruby-on-rails, devise

我的用户有一个名为 :last_request_at, :null => false 的属性

我需要将此属性设置为注册/创建时的当前时间。但我不知道怎么做？

注册表单中的隐藏字段可能吗？如果是的话，那会是什么样子？或者，Devise 如何将他在注册/创建时的可跟踪属性设置为当前时间？

**编辑**

我把它放在用户模型中：

```
before_save :set_last_request

def set_last_request
  self.update_attribute(:last_request_at, Time.now)
end 
```

但后来我得到：

```
stack level too deep 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:43:57.137

我会在您的控制器操作中设置属性。您的堆栈级别太深错误是因为最后`update_attribute`调用`save`。你在无限地呼唤`set_last_request`。

我只想调用`@record.last_request_at = Time.now`你的控制器动作，或者修改你的 before_save 钩子来做`self.last_request_at = Time.now`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:03:29.120

看一下[`Trackable`](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Trackable)模块：

> 跟踪登录计数、时间戳和 IP 地址。

# objective-c - QuickDialog 中的 QDynamicDataSection

> ID：11086529
> 
> 赞同：1
> 
> 时间：2012-06-18T15:55:27.170
> 
> 标签：objective-c, quickdialog

[目前，我在QuickDialog](https://github.com/escoz/QuickDialog)的 QDynamicDataSection 中挣扎。我想填充一个动态部分。当我运行以下从演示中获取的代码时，我得到一个动态部分，其中填充了模板的几个实例，即“这里的东西”。但是，我想获得“第一”和“第二”。这怎么能达到？

```
QDynamicDataSection *section = [QDynamicDataSection new];
section.title = @"Normal: with elements";
section.bind = @"iterate:something";
section.elementTemplate = [NSDictionary dictionaryWithObjectsAndKeys:
    @"QLabelElement", @"type",
    @"Something here", @"title",
nil];
[root addSection: section];
[root bindToObject:[NSDictionary dictionaryWithObjectsAndKeys:
        [NSArray arrayWithObjects:@"first", @"second", nil], @"something",
        nil]]; 
```

* * *

**编辑解决方案：**

Eduardo 让我走上了正确的道路（并获得了荣誉）：

1.  模板必须提供绑定
2.  要迭代的数组元素必须是关键编译器，例如字典。（绑定`object`似乎不起作用）

以下代码按预期工作：

```
QDynamicDataSection *section = [QDynamicDataSection new];
section.title = @"Normal: with elements";
section.bind = @"iterate:something";
section.elementTemplate = [NSDictionary dictionaryWithObjectsAndKeys:
    @"QLabelElement", @"type",
    @"title:name", @"bind",
nil];
[root addSection: section];

[root bindToObject:[NSDictionary dictionaryWithObjectsAndKeys:
        [NSArray arrayWithObjects:
         [NSDictionary dictionaryWithObject: @"first" forKey: @"name"],
         [NSDictionary dictionaryWithObject: @"second" forKey: @"name"], 
         nil], @"something",
        nil]];

return root; 
```

@Eduardo Scoz：我建议采用`SampleDataBuilder.m`.

* * *

**第二次编辑**`self`（见 Eduardo 的评论） 的方法也有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:08:40.960

“迭代”键只是迭代字典中的项目，并根据每个元素的模板创建一个新元素。它还将新项目绑定到数组中的对象。

但是，在您的情况下，您的模板没有定义任何绑定，因此创建的新项目没有修改任何值。您必须添加类似@"bind"、@"title:object" 的内容。(object 返回被绑定的实际对象，因此您没有绑定它的属性。

# sql - DB2：使用当前日期在存储过程中构造变量？

> ID：11086531
> 
> 赞同：0
> 
> 时间：2012-06-18T15:55:31.857
> 
> 标签：sql, db2

我有一个存储过程，它基本上更新了某些行的 LASTUPDATE 时间，我想在存储过程中有一个变量，基本上是：`Date + " " + "20:30:00"`所以当存储过程运行时，它看起来像这样：

```
update 
    person 
set 
    LASTUPDATETIME='2012-06-18 20:30:00', 
    NAME='Mike', 
where (
    SOME_PK='123'
); 
```

但如果我明天要运行存储过程，它看起来像这样：

```
update 
    person 
set 
    LASTUPDATETIME='2012-06-19 20:30:00', 
    NAME='Mike', 
where (
    SOME_PK='123'
); 
```

PS时间永远不会改变，无论何时调用程序，它都应该始终是20:30:00，我只对格式为Year-Month-day的日期感兴趣。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:11:32.177

您可以使用该[`VARCHAR_FORMAT()`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0007110.html)函数将当前日期作为字符串获取，然后将您的硬编码时间附加到它：

```
SELECT VARCHAR_FORMAT(CURRENT_TIMESTAMP, 'YYYY-MM-DD') || ' 20:30:00'
FROM SYSIBM.SYSDUMMY1 
```

如果要将结果存储为`TIMESTAMP`数据类型，可以使用[`TIMESTAMP`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000859.html)函数：

```
SELECT TIMESTAMP(CURRENT_DATE, '20:30:00')
FROM SYSIBM.SYSDUMMY1 
```

在 DB2 for Linux/Unix/Windows 和 z/OS 上测试。

# java - PHP Server 未使用 JSON 对象连接

> ID：11086535
> 
> 赞同：1
> 
> 时间：2012-06-18T15:55:49.813
> 
> 标签：java, android, sql-server, json

我无法从服务器检索数据。我不确定代码哪里出了问题。当我运行应用程序时，来自服务器的数据不会显示在模拟器上。代码如下

```
private void postData1(){

HttpClient httpclient = new DefaultHttpClient();

HttpPost httppost = new HttpPost(
        "http://www.xxxxx.co.uk/NottTest/post.php");

JSONObject json = new JSONObject();

try {

    // JSON data:

    try {
        json.put("name", "Fahmi Rahman");
    } catch (JSONException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    json.put("position", "sysdev");

    JSONArray postjson = new JSONArray();

    postjson.put(json);

    // Post the data:

    httppost.setHeader("json", json.toString());

    httppost.getParams().setParameter("jsonpost", postjson);

    // Execute HTTP Post Request

    System.out.print(json);

    HttpResponse response = httpclient.execute(httppost);
    tv.setText("Hiii");

    // for JSON:

    if (response != null)

    {
        Log.i("Json","respose");
        System.out.print("loooooooooool");

        InputStream is = response.getEntity().getContent();

        BufferedReader reader = new BufferedReader(
                new InputStreamReader(is));

        StringBuilder sb = new StringBuilder();

        String line = null;

        try {

            while ((line = reader.readLine()) != null) {

                sb.append(line + "\n");

            }

        } catch (IOException e) {

            e.printStackTrace();

        } finally {

            try {

                is.close();

            } catch (IOException e) {

                e.printStackTrace();

            }

        }

        text = sb.toString();

    }

    else{
        tv.setText("no respose");
        Log.i("Noting","happended");
    }

    //tv.setText(text);

} catch (ClientProtocolException e) {

    Log.i("Error","Prtocol");

} catch (IOException e) {

    Log.i("Error","IO");

} catch (JSONException e) {
    Log.i("Error","JOSON");
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:39:16.757

我认为错误在于

```
try {
        json.put("name", "Fahmi Rahman");
    } catch (JSONException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    json.put("position", "sysdev");

    JSONArray postjson = new JSONArray(); 
```

# javascript - 关于服务器连接的 Cordova 警报

> ID：11086536
> 
> 赞同：1
> 
> 时间：2012-06-18T15:55:57.317
> 
> 标签：javascript, cordova

当我在 android 模拟器中运行我的 phonegap 应用程序时，我会收到警报。它说：

```
Cordova Facebook connect plugin fail on login!
Dialog error: The connection to the server was unsuccessful. 
```

对于这个问题可以改变什么？

# c# - 将自定义类作为参数传递给加载的程序集

> ID：11086538
> 
> 赞同：1
> 
> 时间：2012-06-18T15:56:08.417
> 
> 标签：c#, .net, plugins, .net-assembly

我正在用 C# 编写一个剪贴板/图像上传工具，其中一个组合键会例如制作屏幕截图，然后将图像发送到**插件**，然后插件处理 URL 的上传和返回。

现在，这些插件需要保存设置，并且这些设置需要在我的应用程序中可编辑，所以我想我会使用我前段时间编写的数据保存类，并将**该类的初始化实例的**引用传递给插件。

想法是将整个类放入一个包含中，插件编写者可以将其包含在他们的项目中以处理数据，但是尽管插件和主应用程序都使用完全相同的代码，但我得到一个关于版本不同的错误，即：

> {"[A]CedInc.Persistence.XMLPersistenceDictionary.savenode 不能转换为 [B]CedInc.Persistence.XMLPersistenceDictionary.savenode。类型 A 源自 'CloudBoard, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'上下文 'Default' 在位置 'C:\git\CloudBoard\CloudBoard\bin\Debug\CloudBoard.exe'。类型 B 源自 'CloudBoard FTP 上传插件，版本 = 1.0.0.0，文化 = 中性，PublicKeyToken = null'位置 'C:\git\CloudBoard\CloudBoard\bin\Debug\plugins\CloudBoard FTP 上传 plugin.dll' 的上下文 'LoadFrom'。"}

我的问题是：是否可以将自定义类的实例传递给插件**，而不**必将其放入程序集中以由插件本身加载？如果是这样，如何？欢迎任何想法/建议！我有点卡在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:16:37.357

虽然我会推荐一个共享程序集版本，但您也可以为您的插件作者提供一个带有预定义类和方法名称的模板代码文件。然后您可以使用反射来搜索加载的程序集以找到与您的预定义签名匹配的类和方法。一旦找到方法，就很容易[调用](http://msdn.microsoft.com/en-us/library/1ttck9d7)它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:40:06.817

您希望插件根本不引用您的任何代码吗？

在这种情况下，您可能能够在框架程序集中找到一些接口，这些接口可以传递给插件而不是类。也许`IDictionary`或`IDictionary<string,string>`会工作。这样插件将不需要引用任何程序集进行序列化，并且您将能够传递自定义实现。作为插件作者的附带好处将更方便对他们的插件进行单元测试（使用具体类形成一个随机库，这要困难得多）。

# java - Java中有多少种方式来声明一个二维数组？

> ID：11086539
> 
> 赞同：0
> 
> 时间：2012-06-18T15:56:13.863
> 
> 标签：java

我有以下两种声明二维字符串数组的方法。我被要求找到另一种方法，但我认为没有其他方法。有人可以给我一些建议。

```
 String[][] a = new String[20][20]
    String a[][] = new String[20][20] 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T15:57:33.747

```
String[] a[] = new String[20][20] 
```

**编辑：**请注意，这也适用于方法：

```
private String[] a()[]
{
    return new String[20][20];
} 
```

另请注意，我不推荐这种表示法，因为它不清楚且令人困惑！

# objective-c - 如何计算 NSMutableArray 的每个内容的哈希 MD5？

> ID：11086541
> 
> 赞同：0
> 
> 时间：2012-06-18T15:56:24.557
> 
> 标签：objective-c, cocoa-touch, cocoa, hash, nsmutablearray

我有这个：

```
NSString *string1 = ...;
NSString *string2 = ...;

NSMutableArray *array = [NSMutableArray alloc]inithWithObjects:string1, string2]autorelease]; 
```

如何为 的每个内容计算 MD5 哈希（或其他更合适的哈希）以`array`进行进一步比较？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:16:55.780

您可以在数组的每个字符串上使用此方法：

```
- (NSString*)md5HexDigest:(NSString*)input {
const char* str = [input UTF8String];
unsigned char result[CC_MD5_DIGEST_LENGTH];
CC_MD5(str, strlen(str), result);

NSMutableString *ret = [NSMutableString stringWithCapacity:CC_MD5_DIGEST_LENGTH*2];
for(int i = 0; i<CC_MD5_DIGEST_LENGTH; i++) {
    [ret appendFormat:@"%02x",result[i]];
}
return ret;
} 
```

不要忘记包括：

```
#import <CommonCrypto/CommonDigest.h> 
```

# python - 从本地目录使用 numpy

> ID：11086546
> 
> 赞同：1
> 
> 时间：2012-06-18T15:56:31.870
> 
> 标签：python, numpy, condor

有没有办法从本地目录使用 numpy 而不将目录添加到 python 的路径？我问是因为我在没有安装 numpy 的机器上的 condor 上运行作业。我没有办法直接将numpy添加到这些机器上，我不相信我可以改变这些机器上的路径。我看过[如何告诉 Condor 只将作业分派给集群上安装了“numpy”的机器？](https://stackoverflow.com/questions/9864766/how-to-tell-condor-to-dispatch-jobs-only-to-machines-on-the-cluster-that-have)关于确定一台机器是否有 numpy，如果可能的话，我宁愿在所有机器上运行，而且我不确定我是否可以改变机器的 classId。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:09:15.080

您应该始终能够使用

```
import sys
sys.path.append("/path/to/local/numpy") 
```

# jsp - 无法让 Jasper 报告与 jsp/servlet 一起使用

> ID：11086547
> 
> 赞同：2
> 
> 时间：2012-06-18T15:56:33.707
> 
> 标签：jsp, servlets, jasper-reports

几周以来，我一直在努力让 Jasper 报告正常工作。它在 Eclipse 中运行良好，来自 Jasper 网站的演示可以运行。它只是在我的 JBoss 中的 jsp 页面上不起作用。

我的 jsp 页面非常基础。它调用类中的方法。它肯定会达到这一点，因为我有输出诊断。当我调用任何 Jasper 方法时，它会出现以下错误：

```
java.lang.NoClassDefFoundError: Could not initialize class net.sf.jasperreports.engine.xml.JRXmlDigesterFactory 
```

我到处都倾倒了jar文件。我什至把这组罐子倒在我的`jre/lib/ext`文件夹里。

*   蜡染1.5
*   commons-beanutils-1.8.0
*   commons-collections-3.2.1
*   commons-digester-1.7
*   commons-javaflow-20060411
*   公共日志记录-1.1.1
*   iText-2.1.7
*   jasperreports-4.6.0
*   jasperreports-applet-4.6.0
*   jasperreports-fonts-4.6.0
*   jasperreports-javaflow-4.6.0
*   日志4j
*   org.eclipse.jdt.core_3.7.1.v_B76_R37x
*   poi-3.6

但没有任何区别。

* * *

感谢您的回复和建议。我求助于将 jars 转储到 jre/lib/ext 文件夹中，因为我已经在 J​​Boss default/lib 中尝试过使用它们，但它不起作用。但是，我现在已经删除了除了 Jboss 默认/lib 之外的所有引用，但它仍然不起作用。

当我第一次启动 JBoss 并运行我的 jsp 页面时，我得到了这个堆栈跟踪：

```
2012-06-19 08:03:49,349 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/Kanban].[jsp]] Servlet.service() for servlet jsp threw exception
java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
at net.sf.jasperreports.engine.xml.JRXmlDigesterFactory.<clinit>(JRXmlDigesterFactory.java:179)
at net.sf.jasperreports.engine.xml.JRXmlLoader.load(JRXmlLoader.java:207)
at my.test.TestClass.compileReport(TestClass.java:73)
at my.test.TestClass.show(TestClass.java:35)
at org.apache.jsp.index_jsp._jspService(index_jsp.java:85)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:373)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:336)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
at java.lang.Thread.run(Thread.java:619) 
```

这似乎表明错误与 org/apache/commons/logging/LogFactory 相关，但我在 JBoss default/lib 中肯定有 commons-logging-1.1.1.jar。

如果我再次运行 jsp 页面，我会得到一个不同的错误：

```
2012-06-19 08:04:23,080 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/Kanban].[jsp]] Servlet.service() for servlet jsp threw exception
java.lang.NoClassDefFoundError: Could not initialize class net.sf.jasperreports.engine.xml.JRXmlDigesterFactory
at net.sf.jasperreports.engine.xml.JRXmlLoader.load(JRXmlLoader.java:207)
at my.test.TestClass.compileReport(TestClass.java:73)
at my.test.TestClass.show(TestClass.java:35)
at org.apache.jsp.index_jsp._jspService(index_jsp.java:85)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:373)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:336)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
at java.lang.Thread.run(Thread.java:619) 
```

我可以提供任何可能帮助某人诊断我的问题的其他信息。有谁知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:32:46.210

那么第一件事就是停止到处乱扔jar文件。通过这样做，您会使问题复杂化，并且您可能会遇到任何未来的类路径问题。请注意，我并不是要居高临下，当我在发布之前阅读它时听起来就是这样。遇到这样做的人，然后几个月或几年后排除其他问题，这只是我的一个小烦恼，他们使一切复杂化。

所以第 1 步是找出 jar 文件`net.sf.jasperreports.engine.xml.JRXmlDigesterFactory`在什么。如果它与 JasperReports 4.5 相同，那么它将在你里面`jasperreports-4.6.0`。

第 2 步是找到放置 jar 文件的合适位置。根据我在[这里](http://docs.jboss.org/jbossas/guides/installguide/r1/en/html/dirs.html)找到的一些 JBoss 文档，它应该位于您的 JBoss 安装目录中`server/default/lib`。该文件夹的描述是：

> lib 目录是不应热部署的静态 Java 库的默认位置。此目录中的所有 JAR 在启动时都加载到共享类路径中。

第 3 步是重新启动 JBoss 并确保它正常工作。

它现在应该可以工作，或者如果您缺少其他需要的库，您可能会收到不同的错误。如果是这样，请再次重复这些步骤。

最后第 4 步是花一点时间去清理所有你放的罐子。我知道本能是简单地离开它，或者甚至在适当的地方扔额外的罐子，因为你不知道你是否需要它们。相信我，它总有一天会咬你的。最好从一开始就保持一切整洁有序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:52:02.890

你混淆`ClassNotFoundException`了`NoClassDefFoundError`. 你的类路径已经很好了。请不要污染 JRE 库。你绝对应该**撤销**它。只需将 JAR 放入其中`/WEB-INF/lib`就足够了。不要忘记撤消在 Eclipse 项目的“构建路径”设置中所做的任何更改。

这`NoClassDefFoundError`基本上意味着`static`所提到的类的变量或块之一在初始化期间引发了异常，这反过来又导致类加载器无法加载类。该异常的真正根本原因应该在堆栈跟踪中进一步可见。由于您没有发布整个堆栈跟踪，因此无法向您解释为什么它无法初始化以及如何解决它。

因此，请阅读堆栈跟踪中最底层的根本原因，解释异常/消息并相应地修复它。

# ruby - 如何 rb_protect ruby 中的所有内容

> ID：11086549
> 
> 赞同：6
> 
> 时间：2012-06-18T15:56:37.693
> 
> 标签：ruby, ruby-c-extension

我想从我自己的 C 代码中调用 ruby​​ 代码。万一出现异常，我必须 rb_protect 我调用的 ruby​​ 代码。rb_protect 看起来像这样：

```
VALUE rb_protect(VALUE (* proc) (VALUE), VALUE data, int * state) 
```

所以`proc`必须是一个接受`VALUE`参数并返回的函数`VALUE`。我必须调用很多不能以这种方式工作的函数。我怎样才能让`rb_protect`他们免于引发异常？

我曾想过使用`Data_Make_Struct`将所有内容包装到一个 ruby​​ 对象中并在其上调用方法。`Data_Make_Struct`本身可能引发异常。我该怎么做`rb_protect` `Data_Make_Struct`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T06:43:22.437

要`rb_protect`以灵活的方式使用（例如，使用任意数量的参数调用 Ruby 函数），请将一个小的调度函数传递给`rb_protect`. Ruby 需要`sizeof(VALUE) == sizeof(void*)`，并且`rb_protect`盲目地将`VALUE`-typed 数据传递给 dispatch 函数，而不检查或修改它。这意味着您可以将所需的任何数据传递给调度函数，让它解包数据并调用适当的 Ruby 方法。

例如，要`rb_protect`调用 Ruby 方法，您可能会使用如下内容：

```
#define MAX_ARGS 16
struct my_callback_stuff {
  VALUE obj;
  ID method_id;
  int nargs;
  VALUE args[MAX_ARGS];
};

VALUE my_callback_dispatch(VALUE rdata)
{
  struct my_callback_stuff* data = (struct my_callback_stuff*) rdata;
  return rb_funcall2(data->obj, data->method_id, data->nargs, data->args);
}

... in some other function ...
{
  /* need to call Ruby */
  struct my_callback_stuff stuff;
  stuff.obj = the_object_to_call;
  stuff.method_id = rb_intern("the_method_id");
  stuff.nargs = 3;
  stuff.args[0] = INT2FIX(1);
  stuff.args[1] = INT2FIX(2);
  stuff.args[2] = INT2FIX(3);

  int state = 0;
  VALUE ret = rb_protect(my_callback_dispatch, (VALUE)(&stuff), &state);
  if (state) {
    /* ... error processing happens here ... */
  }
} 
```

另外，请记住，`rb_rescue`或者`rb_ensure`可能是解决某些问题的更好方法。

# javascript - 小 HighCharts 消失

> ID：11086551
> 
> 赞同：2
> 
> 时间：2012-06-18T15:56:44.540
> 
> 标签：javascript, jquery, highcharts, highstock

我想要这个高图 - [http://jsfiddle.net/zPDca/](http://jsfiddle.net/zPDca/)在弹出窗口中。但是，如果我将其宽度减小到 200 像素，它就会消失。有什么建议么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:07:01.273

看起来 251 像素是宽度的下限。这可能是开发人员出于可读性而做出的决定。想一想：这是一个股票图表，它包含“详细”视图和导航视图，您已启用导出，默认情况下您正在显示按钮，还显示了用于缩放的默认选择按钮。这对用户来说不是很拥挤吗？为什么不使用显示最新数据并为用户提供扩展视图的选项的不同类型的图表（可能是标准高图表）。这将在视图中节省大量空间。您可以尝试的事情：删除导出按钮（您可以编写自己的扩展程序以在不使用内置按钮的情况下仍然进行导出）删除“缩放”文本更改图表以减少整体“忙碌”

拥有数据可视化就是要快速查看您需要的数据 - 不一定要在狭小的空间内查看您可能需要的所有选项。如果此图表用于持续监控，您可以将其去掉所有选项设置，但让它使用用户在“主要/设置”图表中设置的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:34:49.350

看这个例子[http://jsfiddle.net/zPDca/1/](http://jsfiddle.net/zPDca/1/)
它运作良好。

如果您查看[参考](http://www.highcharts.com/stock/ref/#chart--width)，您会发现它可以由包含元素计算。所以你只需`width`要从你的图表中删除，正如你在我的例子中看到的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:03:11.930

好的，我得到了答案。高于 1.1.5 的版本不允许使用小于特定维度的图表。我不知道为什么。但是我现在正在使用 1.1.5 版本绕道而行。

# c# - 包装属性设置器

> ID：11086553
> 
> 赞同：6
> 
> 时间：2012-06-18T15:57:00.580
> 
> 标签：c#, properties, wrapper

我发现我经常重复自己，这当然不好。所以我想知道我是否可以为此做点什么。这是我的 WPF 应用程序中的常见代码：

```
private string _name;
public string Name
{
    get { return _name; }
    set
    {
        if (_name != value)
        {
            _name = value;
            OnPropertyChanged("Name");
        }
    }
} 
```

所以我想知道我是否可以以某种方式包装 setter 以使其更好、更具可读性。一个想法是这样的：

```
protected void PropertySetter<T>(T property, T value, string name)
{
    if (EqualityComparer<T>.Default.Equals(property, value))
    {
        property = value;
        OnPropertyChanged(name);
    }
} 
```

像这样的用法：

```
private string _name2;
public string Name2
{
    get { return _name2; }
    set
    {
        PropertySetter<string>(Name2, value, "Name2");
    }
} 
```

但我不确定这是否真的很聪明，或者是否适用于值类型？

我想我不是第一个尝试这样的事情的人，所以如果有人知道这样的事情的一个很好的万无一失的方法，请插话。我想我不能在没有反射的情况下使 propertyChanged 类型安全，但那里的任何想法也会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:01:30.603

也许这可以帮助你

```
public class ObservableObject : INotifyPropertyChanged
{
    #region Events
    public event PropertyChangedEventHandler PropertyChanged;
    #endregion

    #region Protected Methods
    protected virtual void SetAndNotify<T>(ref T field, T value, Expression<Func<T>> property)
    {
        if (!object.ReferenceEquals(field, value))
        {
            field = value;
            this.OnPropertyChanged(property);
        }
    }

    protected virtual void OnPropertyChanged<T>(Expression<Func<T>> changedProperty)
    {
        if (PropertyChanged != null)
        {
            string name = ((MemberExpression)changedProperty.Body).Member.Name;
            PropertyChanged(this, new PropertyChangedEventArgs(name));
        }
    }
    #endregion
} 
```

用法：

```
private String _myField;
    public String MyProperty
    {
        get
        { return _myField; }
        set
        { SetAndNotify(ref _myField, value, () => MyProperty); }
    } 
```

编辑：您的类必须继承自`OservableObject`此类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:03:04.087

是的 - 这是完全可以接受的正常代码。

这是我发现的一个非常标准化的示例（我在代码示例中看到了很多这种类型的用法）。

```
public event PropertyChangedEventHandler PropertyChanged;

private void SetProperty<T>(ref T field, T value, string name)
{
    if (!EqualityComparer<T>.Default.Equals(field, value))
    {
        field = value;
        var handler = PropertyChanged;
        if (handler != null)
        {
          handler(this, new PropertyChangedEventArgs(name));
        }
    }
} 
```

将此代码包装在实现的类中`INotifyPropertyChanged`，并从此类继承您的数据对象。

在您的示例中，您直接调用事件 -**永远不要这样做。**从方法开始到调用事件时，您可能会丢失事件引用。**总是**在调用它之前创建事件的本地缓存。

# android - ImageView 未调整大小

> ID：11086554
> 
> 赞同：0
> 
> 时间：2012-06-18T15:57:01.653
> 
> 标签：android, android-imageview

我正在尝试缩小要在相对布局中用作 listView 行的 ImageView，但图像只是没有调整大小。关于我可能遗漏的任何想法？64 dip 比原始源小得多。

```
<dimen name="friend_favorite_image_size">64dip</dimen>

    <ImageView
    android:id="@+id/friend_user_image"
    android:layout_width="@dimen/friend_favorite_image_size"
    android:layout_height="@dimen/friend_favorite_image_size"
    android:layout_alignParentRight="true"
    android:layout_marginRight="@dimen/friend_favorite_margin"
    android:scaleType="fitXY"
    android:adjustViewBounds="true"
    scr="@drawable/placeholder_user" />

    ImageView friendImage = (ImageView)rowItem.findViewById(R.id.friend_user_image);
    friendImage.setImageResource(R.drawable.placeholder_user); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T16:20:53.580

是的。感谢您的帖子。我相信我解决了我的问题。资产在图像中使用不可见的填充进行切割。嗯。最终使用hierarchyviewer 来解决这个问题。

# python - 将阵列的一小部分旋转 90 度

> ID：11086557
> 
> 赞同：5
> 
> 时间：2012-06-18T15:57:14.367
> 
> 标签：python, numpy

我想旋转一个数组，但不是整体，只是它的一小部分。

我有 512X512 阵列（基本上它是中心的高斯圆（150,150），半径为 200）。现在我只想将阵列的一小部分（以 (150,150) 为中心，半径为 100）旋转 90 度。最初我使用了 numpy rot90 模块，但它旋转了每个我不想要的数组元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T16:11:58.777

[如果您可以使用高级索引](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#advanced-indexing)来描述您想要旋转的元素，那么您应该能够使用类似以下的方式执行旋转（假设您的数组被调用`arr`）：

```
arr[rs:re,cs:ce] = np.rot90(np.copy(arr[rs:re,cs:ce])) 
```

这里`rs`, `re`,`cs`和`ce`分别表示切片的行开始和行结束，以及切片的列开始和列结束。

这是为什么`np.copy`需要调用的示例（至少在 numpy 1.3.0 中）：

```
>>> import numpy as np
>>> m = np.array([[i]*4 for i in range(4)])
>>> m
array([[0, 0, 0, 0],
       [1, 1, 1, 1],
       [2, 2, 2, 2],
       [3, 3, 3, 3]])
>>> m[1:3,1:3] = np.rot90(m[1:3,1:3])     # rotate middle 2x2
>>> m
array([[0, 0, 0, 0],
       [1, 1, 2, 1],     # got  1, 2  expected  1, 2  
       [2, 1, 1, 2],     #      1, 1            1, 2
       [3, 3, 3, 3]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T17:44:16.923

这是一些更完整的代码，正如`F.J.`已经解释的那样。

![在此处输入图像描述](../Images/fb392c9f370b59a944ba96978bd23284.png)

这是代码：

```
import numpy as np
import scipy

def circle(im, centre_x, centre_y, radius):
    grid_x, grid_y = np.mgrid[0:im.shape[0],0:im.shape[1]]
    return (grid_x-centre_x)**2 + (grid_y-centre_y)**2 < radius**2

centre_x, centre_y, radius = 150, 200, 100
x_slice = slice(centre_x - radius, centre_x + radius)
y_slice = slice(centre_y - radius, centre_y + radius)

im = scipy.misc.imread('1_tree.jpg')
rotated_square = np.rot90(im[x_slice,y_slice].copy())
im[circle(im, centre_x, centre_y,radius)] = rotated_square[circle(rotated_square,
                                                         radius, radius, radius)]
scipy.misc.imsave('sdffs.png',im) 
```

# sql-server - 修改维度和属性属性后部署 SSAS 时出错

> ID：11086563
> 
> 赞同：2
> 
> 时间：2012-06-18T15:57:31.013
> 
> 标签：sql-server, sql-server-2008-r2, ssas, cube

我创建了一个在部署时运行良好的多维数据集。在添加了另一个维度并更改了一些属性属性之后，它不想再部署了..

我有一些警告，但至少以“Dimension”开头的那些......是旧的，并且在第一次部署时没有做任何事情。

我已经进行了一些搜索，有些人说它在数据源中使用 Impersonation 选项存在问题，但我尝试过更改：

我试图从“使用服务帐户”更改为其他三个但没有成功。

我在win7上以管理模式运行DIBS。我正在使用 SQL Server 2008R2。

在配置管理器中，我设置了：“本地系统”，但尝试将其更改为没有成功。

在 Management Studio 中，我已授予 Security-Logins 中的所有服务器角色，但没有成功。

可能是什么问题？

```
Warning 1   Dimension [Internet Sales] : Create hierarchies in non-parent child dimensions. 
Warning 2   Dimension [Date] : Create hierarchies in non-parent child dimensions.       
Warning 3   Dimension [Customer] : Create hierarchies in non-parent child dimensions.   
Warning 4   Dimension [Sales Territory] : Create hierarchies in non-parent child dimensions.        
Warning 5   Dimension [Promotion] : Create hierarchies in non-parent child dimensions.      
Warning 6   AttributeRelationship [Product].[Product Key].[English Description] : The name specified for the attribute relationship differs from the name of the related attribute.     
Warning 7   AttributeRelationship [Product].[Subcategory].[Product Category Key] : The name specified for the attribute relationship differs from the name of the related attribute.    
Warning 8   Dimension [Product] : Create hierarchies in non-parent child dimensions.    
Warning 9   Errors in the OLAP storage engine: A duplicate attribute key has been found when processing: Table: 'dbo_DimDate', Column: 'FiscalYear', Value: '2006'. The attribute is 'Fiscal Year'. 

Error   10  Internal error: The operation terminated unsuccessfully.        
Error   11  Server: The operation has been cancelled. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:53:44.040

您需要正确设置维度键。我认为这将类似于 FiscalYear + FiscalMonth：

![在此处输入图像描述](../Images/3474651002cc12f6ee344e24294ed42a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:16:49.780

我有许多属性改变了 keyColumn 和不同的类型。当我一次进行所有更改然后进行处理时，它从来没有工作过，所以我尝试一次进行一项更改，然后在每次更改后进行处理，这很有效..

# spring - 隔离级别 READ_UNCOMMITTED 不起作用

> ID：11086567
> 
> 赞同：5
> 
> 时间：2012-06-18T15:57:34.010
> 
> 标签：spring, spring-aop, spring-transactions

我正在尝试了解 Spring 事务的隔离级别。这是我正在使用的示例：

```
@Component
public class BookShop {

    private Object lockObj = new Object();

    @Autowired
    private BookDao bookDao;

    @Transactional
    public void increaseStock(int isbn, int increment){
        String threadName = Thread.currentThread().getName();
        synchronized (lockObj) {
            Book book = bookDao.findByIsbn(isbn);
            System.out.println(threadName+" about to increment the stock");
            bookDao.updateStock(book, 5);
        }
        System.out.println(threadName+" has increased the stock ");
        sleep(threadName);
        System.out.println(threadName+" rolled back stock");
        throw new RuntimeException("Stock increased by mistake");
    }

    @Transactional
    public int checkStock(int isbn){
        int stock = 0;
        String threadName = Thread.currentThread().getName();
        synchronized (lockObj) {
            System.out.println(threadName+" checking for the stock");
            stock = bookDao.getStock(isbn);
        }
        System.out.println(threadName+": Stock is: "+stock);
        sleep(threadName);
        return stock;
    }

    private void sleep(String threadName){
        System.out.println(threadName+" sleeping");
        try{
            Thread.sleep(1000);
        }catch (InterruptedException e) {
        }
        System.out.println(threadName+" wakeup!");
    }

} 
```

这就是我调用上述内容的方式：

```
public void testIsolationLevels(final BookShop bookShop, final int isbn){
        Thread t1 = new Thread(){
            public void run() {
                bookShop.increaseStock(isbn, 5);
            };
        };
        t1.setPriority(Thread.MAX_PRIORITY);
        t1.start();

        Thread t2 = new Thread(){
            public void run() {
                bookShop.checkStock(isbn);
            };
        };
        t2.setPriority(Thread.MIN_PRIORITY);
        t2.start();
    } 
```

这是交易配置：

```
<tx:advice id="bookTxn" transaction-manager="transactionManager">
        <tx:attributes> 
            <tx:method name="updateStock" isolation="READ_UNCOMMITTED"/>
            <tx:method name="getStock" isolation="READ_UNCOMMITTED"/>
        </tx:attributes>
    </tx:advice>

    <aop:config>
        <aop:pointcut expression="execution(* com.pramati.springIdol.dao.BookDao+.*(..))" id="bookPC"/>
        <aop:advisor advice-ref="bookTxn"  pointcut-ref="bookPC"/>
    </aop:config> 
```

但是当我运行示例时，这是我得到的 o/p：

```
Thread-2 about to increment the stock// Initially it is 99
Thread-2 has increased the stock // Now it is 104(99+5)
Thread-2 sleeping
Thread-3 checking for the stock
Thread-3: Stock is: 99//Why is it not 104 even if isolation level is read_uncommitted??
Thread-3 sleeping
Thread-2 wakeup!
Thread-2 rolled back stock
Thread-3 wakeup!
Exception in thread "Thread-2" java.lang.RuntimeException: Stock increased by mistake 
```

我认为 Thread-3 将能够读取更新的值。但事实并非如此。有人可以让我知道我哪里出错了吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T15:02:53.573

这里的问题是我从另一个事务方法（BookShop 的方法）调用 DAO 的事务方法。

由于我没有为 BookShop 的方法指定隔离级别，所以默认的隔离级别是 Isolation.READ_COMMITTED。

另请注意，我没有为 Dao 的方法指定传播行为，默认行为是 Propagation.REQUIRED。因此 dao 方法使用与 BookShop 相同的事务。因此 Isolation.READ_COMMITTED 的隔离被应用于事务。

解决方案是：将 BookShop 方法的隔离级别指定为 READ_UNCOMMITTED

# svn - SVN：错误设置属性“日志”：无法执行 PROPPATCH

> ID：11086570
> 
> 赞同：12
> 
> 时间：2012-06-18T15:57:41.710
> 
> 标签：svn

我正在尝试在 SVN 中进行简单的提交（我在 Mac 上使用 Cornerstone）。提交失败并出现以下错误：

描述：联系存储库时出错。[...] 错误：V4CommunicationError [...] 描述：至少一项属性更改失败；存储库未更改状态：175008 [...] 描述：错误设置属性“日志”：无法执行 PROPPATCH。状态：175002 [...]

我尝试重新安装 Cornerstone，并尝试将存储库检出到另一个目录并从那里提交。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-03T15:11:40.310

我在版本中遇到了这个问题，看来这个问题是由在提交消息中使用“富文本”引起的。希望这使问题和解决方案更加清晰。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-18T16:01:57.247

我发现[另一个网站](http://www.nodans.com/index.cfm/2009/9/29/How-to-resolve-svn-Error-setting-property-log)提到了“单行注释”。我的提交消息没有多行，但它确实有我从我们的错误跟踪系统复制和粘贴的智能引号。这是冒犯的短语：

“成分”</p>

当我拿走聪明的报价时，我能够承诺。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-30T01:57:51.473

在我的例子中，mergeinfo 记录引用了一个在 SVN 上早已被删除的目录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-29T07:50:17.187

我在提交评论的一行中使用英语和俄语遇到了同样的问题。删除并仅以一种语言（俄语）重新键入消息后，提交成功。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-20T23:04:28.503

这是由于在 Cornerstone 的提交消息窗口中使用了富文本，包括连字符和换行符。这是一个快速的解决方案 -

1.  右键单击存储库<使用终端打开
2.  通过终端签入您的代码。这是一个例子 -

`svn ci -m $'This is the first line\nThis is the second line'`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-05T15:59:54.577

跟我一样的问题。我从 MS Words 中复制了评论文本并粘贴到评论文本框中。

**解决方案：**我删除了文本并重新编写。所以不要复制和粘贴任何版本的评论

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-12T08:30:40.690

转到 Window -> Preferences -> Team -> SVN 将 SVN Interface Client 更改为类似于 SVNKit 版本。你完成了，你可以放任何不。你想要的线条。

![图片在这里](../Images/389284069dd60bf6444156b76c316e9d.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-02T13:19:41.673

对于此问题，在合并时，您必须使用“首选存储库”选项以防“合并信息”文件冲突。

# php - php：将特殊字符插入 myadmin 数据库

> ID：11086576
> 
> 赞同：0
> 
> 时间：2012-06-18T15:57:55.710
> 
> 标签：php, mysql, insert, character

你好stackoverflow的人！

我有一个问题，经过 3 个月的尝试，我无法解决。这个网站上描述了类似的问题，但他们没有给我我需要的结果。

我得到的结果： *删除链接*

结构设置： *删除链接*

我的编码：

```
include 'connectiondetails.php';

//making the database connection
dbVerbind();

$str = '<p>€ é í å </p>';

// things i've tried
//$test1 = $_GET['test1'];
//$test2 = htmlspecialchars_decode('<p>€ é í å </p>');
//$test3 = html_entity_decode($str, ENT_QUOTES, 'UTF-8');
//$test4 = htmlspecialchars_decode( $str , ENT_QUOTES);
//$test5 = htmlspecialchars('<p>€ é í å </p>', ENT_QUOTES);
//$test6 = parse_str(html_entity_decode($str), ENT_QUOTES);
//$orig = "<p>€ é í å </p>";
//$a = htmlentities($orig);
//$test7 = html_entity_decode($a);
//$test8 = $_GET['test8'];
//$test9 = htmlentities($str, ENT_QUOTES);
//$test10 = mysql_real_escape_string('€ é í å');

$test1 = $_GET['test1'];
$test2 = $_GET['test2'];
$test3 = $_GET['test3'];
$test4 = $_GET['test4'];
$test5 = $_GET['test5'];
$test6 = $_GET['test6'];
$test7 = $_GET['test7'];
$test8 = $_GET['test8'];
$test9 = $_GET['test9'];
$test10 = $_GET['test10'];

if (empty( $test1 )) {
echo '<p>empty</p>';
}
else {
$results =  mysql_query( "  INSERT INTO insert_test.content (   
                                            test1,
                                            test2,
                                            test3,
                                            test4,
                                            test5,
                                            test6,
                                            test7,
                                            test8,
                                            test9,
                                            test10
                                            )
                    VALUES(     '$test1',
                                '$test2',
                                '".htmlspecialchars('€ é í å')."',
                                '".mysql_real_escape_string('€ é í å')."',
                                '€ é í å',
                                '€ é í å',
                                '$test7',
                                '$test8',
                                '$test9',
                                '$test10'
                              )
                    " );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:02:18.203

您正在以 Unicode 格式发送字符，并且字段是 Unicode，但数据库连接不是。连接后立即使用：

```
SET NAMES 'utf8' 
```

# django - Django Facebook Social-Plugin 在模板标签之前加载

> ID：11086577
> 
> 赞同：0
> 
> 时间：2012-06-18T15:57:56.083
> 
> 标签：django, facebook, social

很奇葩~

基本上我有一个标准的“喜欢！” 按钮：

```
<div class="fb-like" data-href="myURL/things/{{MyINFO}}/" data-send="false" data-width="450" data-show-faces="true"></div> 
```

在views.py 我有：

```
def myView(request):
    #Other things
    ctx = {
            'MyINFO' : MySTRING,
            'Otherstuff'  : Otherstuff
            }
    return render_to_response('myApp/myPage4.html', ctx, RequestContext(request)) 
```

当用户“喜欢”页面时，他们应该喜欢`myURL/things/MyString/`但他们正在获得`myURL/things/%7B%7BMyINFO%7D%7D/`

可以在模板预处理之前加载 facebook 的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T20:52:15.160

糟糕，前端人把 {{}} 改成了 {{}}

那是，`{{}} to &#123;&#123;&#125;&#125;`

:)

# php - 挣扎于 Mod_Rewrite 和重写 URL

> ID：11086581
> 
> 赞同：1
> 
> 时间：2012-06-18T15:58:25.723
> 
> 标签：php, mod-rewrite

在阅读了无数教程之后，我整个上午都在努力尝试弄清楚 mod_rewrite 是如何工作的。

我想最终得到包含我的页面标题和页面 ID 的链接，如下所示。

```
http://www.example.com/$pageID/$page_title.html 
```

我是否正确地认为我应该通过一个 php 函数运行我网站上的所有链接，该函数使链接成为像上面这样的 SEO 链接类型，然后我会在我的 .htaccess 文件中获得 MOD_REWRITE 以显示实际页面的内容我需要？

似乎是一种奇怪的做事方式？这是正常的吗？我是否需要禁止来自搜索引擎的未经编辑的 URL 以避免重复内容问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:55:39.253

> 我是否正确地认为我应该通过一个 php 函数运行我网站上的所有链接，该函数使链接成为像上面这样的 SEO 链接类型，然后我会在我的 .htaccess 文件中获得 MOD_REWRITE 以显示实际页面的内容我需要？

这是一种方法，它基于[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)模型，其中一切都通过控制器。例如，如果您网站上的所有内容都是通过`/index.php`（例如[http://yoursite.com/index.php?page_id=1234](http://yoursite.com/index.php?page_id=1234)）访问的，那么您只需在 index.php 中添加一些代码来处理重定向（如果请求的 URL 包含`index.php`），然后使用 mod_rewrite 将 SEO 友好的 URL 重写为指向`/index.php`. 如果您已经有一个站点但它不这样做，那么您可以重新设计或将其迁移到控制器或尝试其他方法。

通过其他方式，您*可以*通过检查请求与 URI 来严格使用 mod_rewrite 处理所有事情。假设您有一个页面：[http](http://www.evample.com/page.php?id=1234) ://www.evample.com/page.php?id=1234您可以在文档根目录的 htaccess 文件中使用这些规则：

```
RewriteCond %{THE_REQUEST} ^(GET|POST)\ /page.php\?id=([0-9]+)
RewriteRule ^ /page/%1/ [R=301] 
```

这使得请求[http://www.evample.com/page.php?id=1234](http://www.evample.com/page.php?id=1234)得到一个 301 重定向到[http://www.evample.com/page/1234/](http://www.evample.com/page/1234/)

现在您需要在内部编写一个规则将其指向 page.php（请注意，MVC 解决方案也需要这部分）：

```
RewriteRule ^page/([0-9]+)/$ /page.php?id=$1 [L,QSA] 
```

这不包括重定向中的页面标题，因为 mod_rewrite 对您网站的页面名称一无所知。如果您通过 page.php 而不是使用 `%{THE_REQUEST} 进行重定向，则可以获取页面标题。

> 我是否需要禁止来自搜索引擎的未经编辑的 URL 以避免重复内容问题？

只要您使用 301 进行重定向，索引机器人就会指向新的 URL 并解决重复的问题。

# php - 在一定时间内授予用户帐户访问权限？

> ID：11086582
> 
> 赞同：0
> 
> 时间：2012-06-18T15:58:27.507
> 
> 标签：php, javascript

我正在一个网站上工作，用户必须支付少量费用才能创建一个帐户，拥有一个帐户可以让他们在一定时间内访问网站的所有功能，比如说 6 个月。

现在，我正在使用 php 创建用户帐户，使用 mysql 数据库来存储用户帐户信息，并且用户可以自由地免费登录/退出，时间不受限制。

我的问题是，我将如何为创建的每个帐户设置时间限制，一旦过期，让用户可以选择重新更新他们的会员资格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:01:35.333

为什么不简单地在用户表中添加一个过期列并在允许登录之前将其与当前日期进行比较 - 如果此日期已过期，只需重定向到付款页面以更新会员资格？

您还可以使用此日期显示活跃会员的“剩余天数”，并在最近几天左右开始显示付款链接。

我一直使用 DATETIME 作为列类型来存储日期信息。

查看[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)上的 MySQL 日期和时间函数例如：以下查询选择具有 date_col 值的所有行过去 30 天内：

```
SELECT something FROM tbl_name
    -> WHERE DATE_SUB(CURDATE(),INTERVAL 30 DAY) <= date_col; 
```

在您的情况下，您需要以下查询来使会员资格无效 -

```
$sql = SELECT * FROM users WHERE
DATEDIFF(expiration_date, CURDATE()) days_left
HAVING days_left < 0 

while($row=.....) {
//Update query to set user_status='expired' or whatever 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:01:50.990

如果你使用 MySQL 就很简单了。只需在注册表中添加一列，其中包含用户的到期日期。

像这样：

```
| id | username | expiration_date |
| 1  | test     | 1029384756      | 
```

然后，您需要做的就是检查相关用户的 time()（今天）是否 >= expiration_date。如果有，那就过期了。

我使用时间戳格式作为到期日期，但您可以使用其他格式...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:09:54.440

添加一个额外的列 ex。`expiry_time`连同用户信息，然后在最初注册时设置它的值。

该帐户将在`current time >= Expiry_time`. 并且当用户想要重新新成员时，再次重新设置`expiry_time`' 值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T16:02:24.267

将帐户创建日期与用户名一起存储在 MySQL 数据库中。在登录时检查它，并在 6 个月后过期。过期后，将用户重定向到“更新您的会员资格”页面。

# java - 尽管有默认的“与”谓词，但 ViewerFilter 上的“或”谓词？

> ID：11086587
> 
> 赞同：0
> 
> 时间：2012-06-18T15:58:45.813
> 
> 标签：java, filtering, jface, treeviewer

我正在开发一个包含 a 的 RCP 应用程序，`TreeViewer`并且我想在其上激活多个过滤器，这些过滤器应该与“OR”谓词一起使用，例如：

> A
> |
> --B |--|--redColor
> |--|--blueColor
> |--C
> |--|--greenColor

我有一个过滤器来显示`redColor`和一个过滤器来显示`greenColor`. 但是当同时激活这两个过滤器时，什么也没有显示。

我的过滤器类扩展了`ViewerFilter`类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:10:28.930

您必须创建一个内部具有“或”条件的 ViewerFilter，而不是两个单独的过滤器。

# dlopen - dlopen 等待 futex 呼叫

> ID：11086590
> 
> 赞同：0
> 
> 时间：2012-06-18T15:59:04.927
> 
> 标签：dlopen

我尝试`libmysqlcppconn.so`使用 dlopen 加载，但程序等待调用此函数。

Strace 向我展示：

```
futex(0x7faff79b3e00, FUTEX_WAIT, 12122, 
```

pid 12122 的 Strace 显示：

```
futex(0xaadffae3eee, FUTEX_WAIT_PRIVATE, 2, 
```

`libmysqlcppconn.so`但是当我在 NetBeans 中静态链接我的代码时，它工作正常。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:24:53.750

> 当我在 NetBeans 中将我的代码与 libmysqlcppconn.so 静态链接时，它工作正常

由于不可能静态链接`libmysqlcppconn.so`，因此您*没有这样*做。可能你是静态链接`libmysqlcppconn.a`的。

> 到底是怎么回事？

您没有提供足够的信息来回答这个问题。`gdb`使用、执行附加到您的挂起过程`thread apply all where`，并使用该信息更新您的问题。*然后*有人可能会告诉你发生了什么。

# gwt - 在异步调用完成 GWT-Platform 之前阻止方法调用

> ID：11086591
> 
> 赞同：4
> 
> 时间：2012-06-18T15:59:13.197
> 
> 标签：gwt, gwt-platform

在我的 GWT-Platform 应用程序中，我实现了一个方法，其中一个步骤是从服务器获取数据，下一步取决于它。我想阻止我的方法进一步执行代码，直到异步调用完成。

应该很简单，但我没有找到方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T12:36:06.027

我认为你错过了关于网络异步的观点。

在异步调用完成之前阻止客户端代码的执行被认为不是一种好的做法（它是一种反模式）。

因此，不要在异步代码完成之前阻止执行，请执行以下操作：

1.  创建一个在异步代码完成时在全局 Eventbus 上触发的事件
2.  在您的一位演示者中附加此事件的处理程序
3.  启动异步代码
4.  显示加载指示器
5.  异步调用完成后，隐藏加载指示器并在 Eventbus 上触发 Event
6.  在之前创建的 Handler 中处理下一步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:27:19.680

我不是 GWT 大师，但我知道如何以简单的方式做到这一点。如果有人告诉我如何以正确的方式进行操作，我将非常感激，因为我也对它感兴趣。您可以只创建包含所需代码的方法并将其调用 onSuccess 或执行以下操作：

```
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.GWT;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.user.client.Timer;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.rpc.AsyncCallback;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.user.client.ui.RootPanel;

public class Aaa implements EntryPoint {

    private final MyServiceAsync service = GWT
            .create(MyService.class);
    private Timer t;

    public void onModuleLoad() {
        t = new Timer() {
            @Override
            public void run() {
                // Make something or call function
                Window.alert("Next Step");
            }
        };
        final Button sendButton = new Button("Send");
        sendButton.addClickHandler(new ClickHandler() {

            @Override
            public void onClick(ClickEvent event) {
                service.sendInfo("Send First Step Info",
                        new AsyncCallback<String>() {
                            @Override
                            public void onSuccess(String result) {
                                Window.alert("Success Call");
                                // Call Next step code or function
                                t.schedule(1);

                            }

                            @Override
                            public void onFailure(Throwable caught) {
                                Window.alert("Failure Call");
                            }
                        });
            }
        });
        RootPanel.get().add(sendButton);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T10:31:40.150

为什么使用`Timer`?

```
final Button sendButton = new Button("Send");
sendButton.addClickHandler(new ClickHandler() {

    @Override
    public void onClick(ClickEvent event) {
        service.sendInfo("Send First Step Info",
                new AsyncCallback<String>() {
                    @Override
                    public void onSuccess(String result) {
                        Window.alert("Success Call");
                          nextStep(result);
                    }

                    @Override
                    public void onFailure(Throwable caught) {
                        Window.alert("Failure Call");
                    }
                });
    }
});

private void nextStep(String data) {
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-29T19:48:50.407

我不得不更改原始流程，基本上将其移动并链接到异步调用的 onSuccess()。

原来，流量是

1.  用户单击弹出对话框的确定​​按钮
2.  validate（一切都是前端验证），如果验证错误，抛出异常并显示错误。诊断日志未关闭。
3.  验证成功后，继续数据处理并关闭对话框。

现在在一个新的场景中，#2 验证被更改为需要一个异步回调到后端。所以#3 必须移动到链接到 validate 方法的回调。' 下面的代码片段

```
public void onValidationDataReady(List<Long> existingTests) throws ValidationException {

    if (!existingTests.isEmpty()) {
        throw new ValidationException("The entered name has already been used.");
    }

    //only after  the validation do we proceed with the original OK click 
    proceedOkClick(testNameField.getValue());
}

public void proceedOkClick(String data) {
    // proceed only after the async call

    if (callback != null) {
        callback.onDialogResult(true, data);
    }

    clearDialog();
}

public boolean validateInputs() throws ValidationException {
    //async call to get data from back end.
            //pass in a Callback 
    testNameValidator.validate(testNameField.getValue(), new DataReadyCallback<List<Long>>() {
        @Override
        public void onDataReady(List<Long> existingTests) {
            onValidationDataReady(existingTests);
        }
    });
    return true;
}

//The call back interface. 
public interface DataReadyCallback<T> {
void onDataReady(T data);
} 
```

# vim - 在 vim 地图中显示消息

> ID：11086593
> 
> 赞同：2
> 
> 时间：2012-06-18T15:59:16.333
> 
> 标签：vim, vim-fugitive

我使用[逃犯 vim 插件](https://github.com/tpope/vim-fugitive)。使用 map 和[BufferIsEmpty 函数](https://gist.github.com/2949048)，如果没有更改，我将关闭差异缓冲区。

我用这张地图

```
nn <silent><leader>g0 :w <bar> Gsplit! diff -U0 <bar>                                
    \ exec BufferIsEmpty() ? "q <bar> echomsg 'git: No changes'" : ''<CR> 
```

但是，我没有看到消息`No changes`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:11:27.070

我解决了`redraw`

```
nn <silent><leader>g0 :w <bar> Gsplit! diff -U0 <bar>                                
    \ exec BufferIsEmpty() ? "q <bar> redraw <bar> echomsg 'git: No changes'" : ''<CR> 
```

# spring - 是否可以根据休眠中第三个表的外部列来连接两个表？

> ID：11086596
> 
> 赞同：1
> 
> 时间：2012-06-18T15:59:29.470
> 
> 标签：spring, hibernate, jsp

例如，我有两个表：`Stock_details`和`order_details`.

这两个表都没有直接映射，但它们都有一列`product_id`引用该`Product`表。

那么有什么方法可以使用hibernate加入这两个表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:02:33.010

Hibernate Criteria API 非常有限。您可以对实体中映射的字段进行操作。

然而，与 SQL 相比，HQL 为您提供了很大的灵活性。您可以编写类似于 SQL 中的查询。所以，是的，您可以使用连接或仅使用 WHERE 条件连接这些表。

您可以在 HQL 查询中使用在休眠本身中定义的实体之间没有关系。它们只需要在 Hibernate 中全部映射。您使用实体名称而不是列名称和属性名称而不是列名称。

# mysql - MySQL在查询中使用@符号时抛出错误

> ID：11086597
> 
> 赞同：1
> 
> 时间：2012-06-18T15:59:35.977
> 
> 标签：mysql

我正在尝试检查用户数据库中是否已存在电子邮件地址。我正在使用 AJAX。当 SELECT 语句执行时，我总是得到一个错误返回。该语句似乎在 @ 符号处中断。

AJAX 调用：

```
var emailok = false;
var email = $('input[name="email"]');
$(function(){
        $.ajax({
                type: "POST",
                data: "email="+email.attr('value'),
                url: "check_email.php",
                success: function(data){
                    alert(data);
                    if(data != 0) {
                        emailok = false;
                        $('#exists_message').slideDown('slow').delay(3500).slideUp('slow');
                        for(i=0;i<4;i++) {
                            email.animate({
                                backgroundColor: '#AC0A0A'
                            },300).animate({
                                backgroundColor: '#FFFFFF'
                            },300);
                        }
                    } else {
                        emailok = true;
                    }
                }
           }); 
```

这是我的 check_email PHP 脚本：

```
<?php

include('connect.php');

$email = $_POST['email'];

try {
    $STH = $DBH->prepare("SELECT * FROM users WHERE email=$email");
    $STH->execute();
} catch(PDOException $e) {
    echo $e->getMessage();
}

$DBH = NULL;
$users =  $STH->fetchAll(PDO::FETCH_OBJ);

echo ' Matches - ' . sizeof($users);

?> 
```

以防万一我的连接脚本中有错误，这里是：

```
<?php

$host   = 'localhost';
$user   = '********';
$pass   = '********';
$dbname = 'tm';
try {
    $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
    $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
} catch(PDOException $e) {
    echo $e->getMessage();
}

?> 
```

这是该警报中出现的错误：

```
SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@asdf.asd' at line 1 Matches - 0 
```

错误末尾的 0 是使用该电子邮件地址找到的行数，因此执行该语句。

我究竟做错了什么？我一直使用 PDO 准备电子邮件地址，以前从未收到此错误。

编辑：为了避免更多这些评论，我知道我需要使用准备好的语句来防止 SQL 注入。我这样做只是为了测试。这是电子邮件变量周围缺少的单引号。感谢大家。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T16:02:53.103

字符串需要用单引号括起来，所以你的 SQL 应该是：

`"SELECT * FROM users WHERE email='$email'"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T16:07:58.293

当你使用准备好的语句时，你最好也使用`bindValue()`来正确地转义输入：

```
$STH = $DBH->prepare("SELECT * FROM users WHERE email=:email");
$STH->bindValue(':email', $email);
$STH->execute(); 
```

您不需要在查询中添加单引号 - PDO 会为您执行此操作。

# actionscript-3 - Flex BlazeDS 动态配置

> ID：11086600
> 
> 赞同：0
> 
> 时间：2012-06-18T15:59:43.260
> 
> 标签：actionscript-3, apache-flex, flex4, blazeds, flex-mobile

我带着一个新问题来到这里——这次更笼统；希望你们中的大多数人都经历过。

因此，我配置了我的 flex 移动项目，以便每次更改服务器 ip 或端口时都需要更新服务器 URL 地址： ![在此处输入图像描述](../Images/0471efc693481256c3a0364a9838e46a.png)

但在我的情况下，我的 flex 移动项目将在不同的医院运行，因此每次更改服务器地址时都需要更多更新——而且在医院服务器被限制在外部的情况下，从我的远程计算机上也无法做到这一点。因为我还需要更新远程对象类： ![在此处输入图像描述](../Images/e6e490513e3cfacd0178b57ae62d2643.png)

因此，上述方法似乎不太适合我的情况。如何配置我的项目，以便我可以通过使用 textareas 等在运行时更改服务器 url 来更改服务器 url 设置如下：

![在此处输入图像描述](../Images/adb2671b9fcf7b9bea6e3feed67f7847.png)

简而言之，我说的是外部化 AMF 通道端点 url 的配置。

任何帮助将不胜感激 ！...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T20:40:50.030

您可以自己构建消息传递使用者并指定正确的通道：

```
function initConsumer():void { 
  var channelSet:ChannelSet = new ChannelSet();
  // for streaming
  var myChannel:Channel = new StreamingAMFChannel("streaming-channel", "http://something.com/messagebroker/");
  // for polling
  var myChannel:Channel = new AMFChannel("polling-channel", "http://something.com/messagebroker/");
  myChannel.pollingEnabled = true;

  channelSet.addChannel(myChannel);

  var consumer:Consumer = new Consumer();
  consumer.channelSet = channelSet;
  consumer.destination = "NASDAQ"; 
  consumer.selector = "operation IN ('Bid','Ask')";
  consumer.addEventListener(MessageEvent.MESSAGE, messageHandler); 
  consumer.subscribe(); 
} 

function messageHandler(event:MessageEvent):void { 
  var msg:IMessage = event.message; 
  var info:Object = msg.body; 
  trace("-App recieved message: " + msg.toString()); 
} 
```

# python - 如何将相同的方法/属性添加到从公共类派生的一组子类中

> ID：11086605
> 
> 赞同：2
> 
> 时间：2012-06-18T15:59:54.320
> 
> 标签：python, class, subclass

将一组通用方法/属性添加到从同一类派生的子类的正确方法是什么？

假设这些是我的基于动物的视频游戏所需的课程（这只是一个例子，我并不是真的在写游戏，但想法是一样的）

```
class Animal():
    def __init(self, numlegs):
        self.numlegs = numlegs

class Dog(Animal):
    def __init(self, numlegs):
        Animal.__init__(self, numlegs)

    def bark(self):
        print "Arf!"

class Cat(Animal):
    def __init(self, numlegs):
        Animal.__init__(self, numlegs)

    def playwithmouse(self):
        print "It's fun!"

class Duck(Animal):
    def __init(self, numlegs):
        Animal.__init__(self, numlegs)

    def fly(self):
        print "Weee!" 
```

在游戏中的某个时刻 Dog 和 Duck 可以武器化，它们需要具有相同的方法：fire()、reload() 和属性：ammocount。

我认为将它们添加到 Animal() 类中是不正确的，因为在游戏的完全不同的部分中将需要它们。

添加它们的正确方法是什么？

**更新** 我想补充一点，预期的结果是某种动物 - 武器混合类

```
class BurtalDuck(Duck):
    fire(): #<- this is somehow added to Duck
        print "ratatatatat!" 
```

我从答案中得到的是，如果我需要整套“武器/弹药”，我可以使用多职业，否则组合就是要走的路。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:07:02.410

您可以利用 python 中的多重继承，如下所示：

```
class Weapon():
    def __init__(self):
        self.ammoCount = 0
    def fire():
        print "fire!"
    def reload():
        print "reloading!"

class Dog(Animal, Weapon):
    def __init(self, numlegs):
        Animal.__init__(numlegs)

    def bark(self):
        print "Arf!" 
```

现在你可以这样做：

```
dog = Dog(4)
dog.fire() 
```

*但是*，如果`Dog`只应该*是*，而不是--hybrid ，则使用 的实例并将其作为组件分配给 dog：**`Animal``Animal``Weapon``Weapon`**

 **```
class Dog(Animal, Weapon):
    def __init(self, numlegs):
        Animal.__init__(numlegs)
        self.weapon = Weapon()

    def bark(self):
        print "Arf!" 
```

那你就得用了`dog.weapon.fire()`。虽然这可能不符合你关于`Dog`实际*是*武器的概念，但它现在已经被武器化了。:)

如果你有一个狗实例并且你需要它在运行中被武器化，只需利用 python 的动态属性分配

```
class Dog(Animal):
    def __init(self, numlegs):
        Animal.__init__(numlegs)

    def bark(self):
        print "Arf!"
#some other code maybe
dog = Dog(4)
#more other code
dog.weapon = Weapon()
#even more code
dog.weapon.fire() 
```

一般我会说：

*   如果您想*或成为*`Dog`武器`Duck`，请使用继承。
**   如果您想要或`Dog`包含*或*拥有*一个*（或多个）武器，请使用组件。`Duck`*

 **** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T16:15:53.377

用作文做到这一点，

```
class Weapon(object):
    def __init__(self, type):
        self.type = type

class Dog(Animal):
    def __init(self, numlegs):
        Animal.__init__(numlegs)
        self.gun = Weapon("gun")

    def bark(self):
        print "Arf!" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T16:13:38.770

一种可能性：根本不要将它们添加到类中。创建一个“武器”类，其中包含有关武器如何工作的所有信息，并将该类的一个实例添加到可以是武器的对象中。

当然，这意味着重新考虑你的架构，但这是一个很好的概念。这个想法通常被称为“基于组件”。[谷歌搜索“基于组件的游戏对象”](https://www.google.com/search?q=component%20based%20game%20object)并尝试找到一些描述该想法的博客文章/演示文稿。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T18:03:57.163

另一种方法，使用 mixins：

```
class Animal(object):
    def __init__(self, n):
        super(Animal,self).__init__()
        if isinstance(n, Animal):  # copy constructor
            self.numlegs = n.numlegs
        else:
            self.numlegs = n
    def do(self):
        pass

class Dog(Animal):
    def do(self):
        print "Arf!"

class Cat(Animal):
    def do(self):
        print "Torturing small animals is fun!"

class Duck(Animal):
    def do(self):
        print "Wheee!"

class Weapon(object):
    def __init__(self):
        super(Weapon,self).__init__()
        self.ammocount = 7

    def fire(self):
        if self.ammocount > 0:
            print "Bang!"
            self.ammocount -= 1
        else:
            print "<click>"

    def reload(self):
        self.ammocount = 7

class WeaponizedDog(Dog, Weapon): pass
class WeaponizedCat(Cat, Weapon): pass
class WeaponizedDuck(Duck, Weapon): pass

max = Dog(4)                # max is a 4-legged dog
max.do()                    # "Arf!"
max = WeaponizedDog(max)    # If I put my hands in my pockets, I'd be carrying concealed deadly weapons...
max.fire()                  # "Bang!" 
```*****

# java - Android rom文件结构及调试

> ID：11086607
> 
> 赞同：0
> 
> 时间：2012-06-18T15:59:58.293
> 
> 标签：java, android, c++, android-source, rom

我已经将一个 CMod 9 rom 分叉到我的 github。我拥有所有有效的 BLOBS，我可以构建和进行更改。谁能解释一下文件的层次结构包含什么？例如内核由哪些部分组成？另外，我的 rom 端口有音量问题尝试调试的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T08:06:55.227

有许多社区可以制作自定义 android rom。只需在 Google 中搜索即可。如果您想了解一些如何开发自定义修改的基本知识，那么我建议您观看[此](http://marakana.com/s/video_tutorial_android_internals_building_a_custom_rom_pt_1_of_2,269/index.html)视频的两个部分。

# google-maps-api-3 - 地图图块在自定义 Google 叠加层上的位置错误

> ID：11086608
> 
> 赞同：0
> 
> 时间：2012-06-18T15:59:58.300
> 
> 标签：google-maps-api-3, overlay, positioning, tiles

我们正在尝试使用 API 的 v.3 在 Google 地图上叠加自定义图块。我们的工作基于 Google 在[https://developers.google.com/maps/documentation/javascript/maptypes#ImageMapTypes](https://developers.google.com/maps/documentation/javascript/maptypes#ImageMapTypes)上的示例。

基本功能正常工作，我们的图块出现了，只是它们位置有点不对，并且逐渐更改缩放级别会使它们的位置更加错误。

例如，地图以 15 级缩放加载。根据图块显示的内容，将一站放大到 16 级会导致地图重新居中不正确。地图实际上是正确居中的（如我们的自定义标记所示），但如果为新缩放绘制了正确的瓷砖集，则在新缩放级别绘制的瓷砖应该位于地图中心的下方和左侧。

是什么原因造成的，我们该如何解决？

我们的瓷砖是否生成不良？我们需要指定地图边界吗？

我们的地图页面： http: [//www.cornell.edu/maps2/](http://www.cornell.edu/maps2/)

我们稍作调整的 Google 示例代码（如果我们使用 Google 示例中的“绑定”变量，则不会加载切片，因为它们的文件名不匹配）：

```
var customTypeOptions = {
getTileUrl: function(coord, zoom) {
    var normalizedCoord = getNormalizedCoord(coord, zoom);
    if (!normalizedCoord) {
        return null;
    }
    var bound = Math.pow(2, zoom);

    //var imageURL = "http://mw1.google.com/mw-planetary/lunar/lunarmaps_v1/clem_bw" + "/" + zoom + "/" + normalizedCoord.x + "/" + (bound - normalizedCoord.y - 1) + ".jpg";

    var imageURL = "http://www.cornell.edu/maps/tiles/x" + (normalizedCoord.x + 1) + "y" + (normalizedCoord.y - 1) + "z" + zoom + ".gif";

    return imageURL;
 },
 tileSize: new google.maps.Size(256, 256),
 maxZoom: 18,
 minZoom: 13,
 name: "Custom"
 };

var customMapType = new google.maps.ImageMapType(customTypeOptions);

function getNormalizedCoord(coord, zoom) {
var y = coord.y;
var x = coord.x;

// tile range in one direction range is dependent on zoom level
// 0 = 1 tile, 1 = 2 tiles, 2 = 4 tiles, 3 = 8 tiles, etc
var tileRange = 1 << zoom;

// don't repeat across y-axis (vertically)
if (y < 0 || y >= tileRange) {
    return null;
}

// repeat across x-axis
if (x < 0 || x >= tileRange) {
    x = (x % tileRange + tileRange) % tileRange;
}

//console.debug(coord.x, coord.y, tileRange, zoom, x, y);
return {
    x: x,
    y: y
};
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:34:53.097

虽然仍然不清楚是什么导致了这个问题，但使用 MapTiler 重新生成我们的瓦片会产生一个按预期工作的地图。我们的原始图块是由 Photoshop JavaScript 文件生成的，似乎很可能是边界输入或计算不正确，导致文件编号导致引用它们时出现渐进式错误。

# java - 是否存在通过反射比较两个对象的现有 Java 函数？

> ID：11086609
> 
> 赞同：1
> 
> 时间：2012-06-18T15:59:59.043
> 
> 标签：java, reflection, comparison

> **可能重复：**
> [是否有 Java 反射实用程序可以对两个对象进行深入比较？](https://stackoverflow.com/questions/1449001/is-there-a-java-reflection-utility-to-do-a-deep-comparison-of-two-objects)

我想创建一个像这样的通用对象比较方法 -

```
public static boolean objectsAreEqual(Object A, Object B)
   {
        // ensure objects belong to the same class
        // compare object fields via reflection
        // if all fields match, then return true else return false
   } 
```

是否有现成的实现？

# jquery - 来自成功的 JSONP 调用的错误响应

> ID：11086611
> 
> 赞同：0
> 
> 时间：2012-06-18T16:00:02.440
> 
> 标签：jquery, ajax, wcf, web-services

我已经创建了一个跨域兼容的 WCF 服务（这花了我 4 天的时间研究！）我已经完成了一切工作，但现在我遇到了 jQuery 请求的问题。它给了我一个我不知道的错误。

有人可以给我一个关于在这里做什么的想法。

我的 jQuery：

```
<script type="text/javascript">
$.ajax({
    url: 'http://localhost:8000/EchoWithGet',
    data: 's=boo!',
    type: 'GET',
    dataType: 'jsonp',
    success: function(res) {
        alert('yay');
    },
    error: function(a,b,c) {
    alert(a + ", " + b + ", " + c);
    }
});
</script> 
```

错误响应：

> [object Object]，解析器错误，错误：未调用 jQuery17206724130902069609_1340034989481

如果我转到浏览器并输入我得到的 URL：

```
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">OK</string> 
```

有人可以在这里阐明一下。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:04:34.267

您应该从该页面返回一个 javascript 调用。这就是 jsonp 的工作原理。

所以响应应该是这样的：

```
jQuery17206724130902069609_1340034989481('some param'); 
```

默认情况下，jquery 会将调用的参数添加`callback`到指定服务器应响应的上述回调名称的 url。

我建议阅读[ajax 文档](http://api.jquery.com/jQuery.ajax/)，尤其是处理 jsonp 的部分。并查看[jsonp 的工作原理](http://remysharp.com/2007/10/08/what-is-jsonp/)

**勺子喂食开始：**

让您的服务器响应：

```
iwillreaduponjsonp({'status':'ok'}); 
```

像这样在客户端发出 jsonp 请求：

```
$.ajax({
    url: 'http://localhost:8000/EchoWithGet',
    data: 's=boo!',
    type: 'GET',
    dataType: 'json',
    jsonp: false, jsonpCallback: "iwillreaduponjsonp",
    success: function(res) {
        alert('yay');
    },
    error: function(a,b,c) {
    alert(a + ", " + b + ", " + c);
    }
}); 
```

**/勺子喂食结束**

# java - 检查等式中的字符

> ID：11086614
> 
> 赞同：0
> 
> 时间：2012-06-18T16:00:06.140
> 
> 标签：java, char

我正在尝试制作一个程序，让您输入任何一步方程并求解。为了使您可以以任何方式输入它，我运行了一个 for 循环来检查每个字符以查看它是什么。但是后来，我意识到我不能为此使用两位数。所以我尝试添加一个小函数来检查右边是否有一个字符，以测试它是否是一个数字。如果它是一个数字，将它加上它找到的那个，成为一个数字。就像它看到 1 并检查右侧是否有 0 一样，它会给你 10。这是此函数的代码

```
 Find = equation.charAt(i);

        if (Character.isDigit(Find))
        {
            if(Found == 0)
            {
                if(i < equation.length() - 1)
                {
                    FindNext = equation.charAt(i + 1);
                    if (Character.isDigit(FindNext))
                    {
                        one = (Character.toString(Find) + Character.toString(FindNext));
                        Found = 2;
                        One = Double.parseDouble(one);
                    }
                }
                else
                {
                    one = (Character.toString(Find));
                    Found = 2;
                    One = Double.parseDouble(one);
                }
            }
            else
            {
                if(i + 1 < equation.length() - 1)
                {
                    FindNext = equation.charAt(i + 1);
                    if (Character.isDigit(FindNext))
                    {
                        two = (Character.toString(Find) + Character.toString(FindNext));
                        Two = Double.parseDouble(one);
                    }
                }
                else
                {
                    two = (Character.toString(Find));
                    Two = Double.parseDouble(two);
                }
            }
        } 
```

有谁看到我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:04:26.907

如果这个数字是 100？1000？10000？......你明白了。您不能简单地检查前面的一个字符。`+`相反，您应该通过您支持的操作（即, `-`,等）来分隔解析`*`，这样会更容易获得数字。

# html - 嵌入 Youtube 视频涵盖其他 div

> ID：11086616
> 
> 赞同：1
> 
> 时间：2012-06-18T16:00:08.967
> 
> 标签：html, css, youtube

在我的网站上有一个静态 div 用作标题。如果页面上还有 youtube 视频并且用户向下滚动，则 youtube 视频会覆盖标题，即使它的 z-index 值要低得多。

如何纠正这种情况，以便嵌入的视频始终显示在标题下方？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:05:26.863

[可能重复](https://stackoverflow.com/q/10403124/1411473)

无论如何，我检查了我的代码，并添加了这个：

```
<param name="wmode" value="transparent" />
<embed [whatever you have here] wmode="transparent" /> 
```

在你的`<object>`.

希望这对你有用，我记得我最初是从哪里得到这个的，说在包含的 div 中添加一个 z-index 1，虽然我没有（也许在 IE 或其他东西中工作）。

**编辑：**如果您改为使用 iframe 版本，[这](https://stackoverflow.com/q/5281002/1411473)看起来很有希望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:05:08.327

前段时间我自己也遇到过这个问题。

您需要添加一个值为 opaque 的 wmode 参数，即`wmode="opaque"`

# actionscript-3 - 通过 MongoAS3 访问 Mongo 数据库，无需使用应用程序编译密码

> ID：11086617
> 
> 赞同：0
> 
> 时间：2012-06-18T16:00:24.877
> 
> 标签：actionscript-3, mongodb

我正在使用 MongoAS3 开发一个纯 AS3 AIR 应用程序（适用于 iphone）来访问我服务器中的 Mongo 数据库。MongoAS3 很酷，因为它不需要任何服务器层来进行通信（如 PHP/AMF）。它燃烧得很快。然而，这带来了一个安全问题。数据库的密码正在与应用程序一起编译。所以我的问题是：有没有一种很好的方法可以使用 MongoAS3 使用类似 OAUTH 的方法在服务器中进行身份验证？无需将我的通行证放入应用程序。

我需要在数据库中读写。

任何想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:35:12.587

高级安全性是 Web 层的工作，而不是数据库。我不知道任何支持通过 OAuth 进行身份验证的数据库。他们中的大多数使用简单的登录/密码身份验证。一些支持功能，如 ActiveDirectory 域身份验证。其余的只是不要打扰。通常建议不要将您的数据库暴露在公共互联网上。它们（数据库）不是为这种情况设计的。他们的身份验证系统可能存在缺陷。

**TL;DR**：建立一个 Web 层并在那里处理安全性。不要暴露你的数据库。

# javascript - 标签的javascript正则表达式后跟一个空格

> ID：11086621
> 
> 赞同：6
> 
> 时间：2012-06-18T16:00:36.673
> 
> 标签：javascript, regex, tabs

在 Javascript 中，制表符后跟空格的正则表达式是什么（完全一样）。

我知道它是这样的：

```
var c = dataString.replace(/\t\s/g,'<br />'); 
```

但这是全局查找制表符或空格，而不是一个制表符后跟空格作为完全匹配。

提前谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T16:02:55.770

这将是`/\t /`

`\s`还匹配其他空白字符，因此您需要一个文字空格字符。

# android - 需要图像跳转到Android中的点击位置

> ID：11086623
> 
> 赞同：0
> 
> 时间：2012-06-18T16:00:40.620
> 
> 标签：android

我正在编写一个虚拟操纵杆小部件，它由一个作为可点击区域的大圆圈和一个代表实际操纵杆的小圆圈组成。为了使操作更容易一点，我希望用户能够触摸大圆圈上的任何位置，而小圆圈将跳转到触摸的位置。如果用户拖动手指，我希望小圆圈跟随。当小圆圈被释放时，我希望它跳回大圆圈中心的原始位置。我正在使用两个圆圈水平和垂直居中的相对布局。

这是我正在使用的触摸监听器，现在它主要按我的意愿工作，除了较小的圆圈出现在触摸位置的左侧。我不知道如何让它在释放时弹回中心。

```
 OnTouchListener touchListener = new OnTouchListener() {
        @Override
        public boolean onTouch(View arg0, MotionEvent event)
        {
            // TODO Auto-generated method stub
            status.setText("X: " + event.getX() + ", Y: " + event.getY());
            knob.setX(event.getX());
            knob.setY(event.getY());
            return false;
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:18:53.003

这些都不应该是 ImageViews。您应该创建一个自定义视图并覆盖 onDraw 方法。您可以通过覆盖 onTouch 方法来控制绘图。它应该看起来像这样：

```
public class Joystick extends View {
    float touchX = -1, touchY = -1;

    @Override
    public Joystick(Context context) {
         super(context);
    }

    @Override
    public void onDraw(Canvas canvas) {
        Paint mPaint = new Paint();
        mPaint.setColor(myColor);
        mPaint.setStyle(Paint.Style.STROKE);
        float width = getMeasuredWidth();
        float height = getMeasuredHeight();
        canvas.drawCircle(width/2, height/2, mPaint); //draw outer circle

        //Draw inner circle
        if (touchX > -1 && touchY > -1) {
            canvas.drawCircle(touchX, touchY, mPaint);
        } else {
            canvas.drawCircle(width/2, height/2, mPaint);
        }
    }

    @Override
    public void onTouchEvent(MotionEvent me) {
        switch (me.getAction()) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_MOVE:
            touchX = me.getX();
            touchY = me.getY();
            break;
        case MotionEvent.ACTION_UP:
            touchX = -1;
            touchY = -1;
        }
        invalidate();
    }
} 
```

干杯

# c# - 这些是使用 LINQ 将多个不同操作应用于字符串列表的最简单方法吗？

> ID：11086625
> 
> 赞同：2
> 
> 时间：2012-06-18T16:00:53.193
> 
> 标签：c#, linq

在这种情况下，文本的来源来自一个 winforms 文本框。我要求这个主要是为了了解更多关于 LINQ 的信息，也许是为了展示它的力量（在我看来，比循环更容易阅读）。这个程序有几个要求；该函数必须从文本框中获取文本，将其拆分为单独的行，删除空行和/或重复行，并修剪行。

这些是唯一的方法吗？在 C# 中是否有其他方法（除了循环遍历行列表并将符合条件的项目添加到新列表、数组等）？

1：

```
List<String> listOne = textBoxWords.Text
                                   .Split(new char [] { '\r', '\n' })
                                   .Select(s1 => s1.Trim())
                                   .Where(s2 => !String.IsNullOrEmpty(s2))
                                   .Distinct()
                                   .ToList(); 
```

2：

```
List<String> listTwo = textBoxWords.Text
                                   .Split(new char[] { '\r', '\n' }, StringSplitOptions.RemoveEmptyEntries)
                                   .Select(s1 => s1.Trim())
                                   .Distinct()
                                   .ToList(); 
```

更新：建议使用此代码，但仅在不需要修剪字符串时才有效。

3：

```
List<String> listThree = textBoxWords.Text
                                     .Split(new char[] { '\r', '\n' },
                                     .Where(s1 => !String.IsNullOrWhiteSpace(s1))
                                     .Distinct()
                                     .ToList(); 
```

我知道它 a) 相当具体，b) 使用 DataGrid 可能更容易实现，但我维护的代码使用文本框，我不想立即重写它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:21:17.973

```
 var setOne = new HashSet<string>(textBoxWords.Text
                               .Split(new char [] { '\r', '\n' })
                               .Select(s1 => s1.Trim())
                               .Where(s2 => !String.IsNullOrEmpty(s2))); 
```

它与您所拥有的不完全相同，因为结果是一个 HashSet，但根据您的场景，它看起来可能是您想要完成的更好的数据结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:37:37.047

你的例子已经很简单了。一种选择是：

```
(from s in textBoxWords.Split(new char[] { '\r', '\n' })
where !string.IsNullOrEmpty(s)
select s.Trim()).Distinct(); 
```

# c# - 在 GridView 中为 DropDownList 选定值使用 Eval

> ID：11086626
> 
> 赞同：2
> 
> 时间：2012-06-18T16:00:56.873
> 
> 标签：c#, asp.net, oracle, drop-down-menu, eval

现在，我有一个名为“PROCESS_FLAG”的数据库字段，其中包含文本值（A、I、E、C），我希望能够根据 PROCESS_FLAG 的值和我更改下拉列表列的默认选择值'不知道从这里去哪里。

这是我拥有的 GridView 的代码：

```
 <asp:BoundField DataField="REQUESTQTY" HeaderText="Request Quantity" 
                SortExpression="REQUESTQTY" />
            <asp:BoundField DataField="MOVEFROM" HeaderText="Move From" 
                SortExpression="MOVEFROM" />
            <asp:BoundField DataField="MOVETO" HeaderText="Move To" 
                SortExpression="MOVETO" />
            <asp:BoundField DataField="COMPLETEDBY" HeaderText="Completed By" 
                SortExpression="COMPLETEDBY" Visible="false"/>
            <asp:BoundField DataField="COMPLETION_DATE" HeaderText="Completion Date" 
                SortExpression="COMPLETION_DATE" />
            <asp:BoundField DataField="COMMENTS" HeaderText="Comments" 
                SortExpression="COMMENTS" Visible="false" />
            <asp:BoundField DataField="RESPONSETIME" HeaderText="Response Time" 
                SortExpression="RESPONSETIME" Visible="false" />
            <asp:BoundField DataField="PROCESS_FLAG" HeaderText="Process Flag"
                SortExpression="PROCESS_FLAG" />
            <asp:BoundField DataField="UNIQUEKEY" HeaderText="Unique Key"
                SortExpression="UNIQUEKEY" Visible="true" />

            <asp:TemplateField HeaderText="Send To...">
                <ItemTemplate>
                    <asp:DropDownList ID="StatusDD" runat="server" AutoPostBack="false" OnSelectedIndexChanged="StatusDD_SelectedIndexChanged">
                        <asp:ListItem Value="A">Active</asp:ListItem>
                        <asp:ListItem Value="C">Complete</asp:ListItem>
                        <asp:ListItem Value="I">In Process</asp:ListItem>
                        <asp:ListItem Value="E">Error</asp:ListItem>
                    </asp:DropDownList>
                </ItemTemplate>
            </asp:TemplateField> 
```

我想根据 PROCESS_FLAG 的值设置下拉列表的默认选择值。

对此的任何帮助将不胜感激。我根本不是 Eval 功能的专家。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:39:05.583

在 .aspx 页面的 gridview 中添加 OnRowDataBound 属性：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="id" OnRowDataBound="GridViewRowEventHandler"> 
```

然后，更换

```
<asp:BoundField DataField="PROCESS_FLAG" HeaderText="Process Flag"
            SortExpression="PROCESS_FLAG" /> 
```

和

```
 <asp:TemplateField>
     <ItemTemplate>             
     <asp:Label ID="process_Flags" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "PROCESS_FLAG").ToString()%>'/>
      </ItemTemplate>                    
      </asp:TemplateField> 
```

然后在你的代码后面，做这样的事情：

```
 protected void GridViewRowEventHandler(Object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
           Label flag = (Label)e.Row.FindControl("process_Flags");
           DropDownList ddl = (DropDownList)e.Row.FindControl("StatusDD");
            if (flag.Text == "A")
            {
                ddl.SelectedValue = "A";
            }
        //add more conditions here..

        }          
    } 
```

这应该让你更进一步:)

# java - 如何修复 Eclipse 生成空的 Javadoc 注释？

> ID：11086628
> 
> 赞同：3
> 
> 时间：2012-06-18T16:01:02.667
> 
> 标签：java, eclipse, javadoc

最近Eclipse开始为方法生成空的JavaDoc注释：/** */

没有@param、@return 等。

有人知道这是什么原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T01:33:52.487

检查“首选项 > Java > 代码样式 > 代码模板 > 注释 > 方法”中的设置。应该有模板模式

```
/**
 * ${tags}
 */ 
```

# objective-c - 设置相对于 UIWebView frame.size 的 div 高度

> ID：11086631
> 
> 赞同：0
> 
> 时间：2012-06-18T16:01:19.103
> 
> 标签：objective-c, ios, ios5, uiwebview

我想让我的 div 的高度是

我在子类 UITableViewCell 中有一个 UIWebView。在那个 UIWebView 里面，我有一些带有一个 div 的基本 html。

```
_editorHTML = [@"<html>"
               "<head>"
               "<style>"
               ".contentContainer { font-family:Arial, Helvetica, sans-serif; font-size:1em; }"
               "</style>"
               "</head>"
               "<body>"
               "<div id=\"content\" contenteditable=\"true\" style=\"height:100%;\" class=\"contentContainer\">%@</div>"
               "</body>"
               "</html>" retain];

[_webView loadHTMLString:[NSString stringWithFormat:_editorHTML, @""] baseURL:[NSURL fileURLWithPath:directory]]; 
```

有没有办法让 div 的高度成为 UIWebView 的高度？当我设置 height:100% 时，它只会使 div 大约为 UIWebView 高度的四分之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:05:30.387

`[webView stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight"]`将为您提供内容的高度（在 html 完成加载后执行，例如 in `webViewDidFinishLoad`）。此外，由于您是在 tableview 中执行此操作，因此您将处理单元格大小已更改的事实。

稍微警告一下，如果您的 webview 已经高于内部内容的高度，它实际上会返回您的 web view 的高度。

# iphone - UIScrollView 不会刷新

> ID：11086632
> 
> 赞同：1
> 
> 时间：2012-06-18T16:01:28.153
> 
> 标签：iphone, ios, uiscrollview

我有一个带有 UIScrollView 的“图像库” UIViewController 用于保存图像。用户可以从子 UIViewController 中删除图像。

所以，很自然地，当用户弹出 UIViewController 库时，我想刷新它的内容以反映新的情况。

但是， UIScrollView 看起来是空的。只有当用户开始滚动它时，它才会刷新并显示正确的内容。

简而言之：如何以编程方式刷新 UIScrollView 内容？

注意： setNeedDisplay 没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:53:20.543

简单的方法：无论您如何创建图像库，都可以在视图控制器的 viewWillAppear/viewDidAppear 方法中进行。但这对于您的视图控制器来说将是很多不必要的工作

更好的是创建一个委托，并在删除图像时调用它。代表将再次创建图像库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:00:34.537

原来这是一个愚蠢的错误。

我对 [scroller setContentOffset:..] 做了错误的计算。并给它一个高于 UIScrollView contentSize 的值。

当在 UIViewController 中调用滚动器 [setContentOffset:..] 时，不知何故，为我修复了它并将值设置为 UIScrollView contentSize。但是当从另一个 UIViewController 调用它时，它并没有为我修复它，所以我“跳过了 UIScrollView 内容”。

# java - 递归方法表现怪异

> ID：11086635
> 
> 赞同：1
> 
> 时间：2012-06-18T16:01:31.513
> 
> 标签：java, swing, recursion, jpanel, jbutton

我正在制作 BrickBreaker 游戏，由于未知原因，我遇到了一个令人讨厌的错误，我无法追踪。目前游戏状态：

![破砖机](../Images/bf81493901f4df47772fb36786217a4d.png)

这是我想要做的：假设我点击上图中圈出的红色按钮。我希望红砖消失，红色上方的砖可以适当地占据位置。

到目前为止的代码：

```
private void moveBrick(BrickHolder brickHolder) {

    Point brickHolderLocation = brickHolder.getBrickHolderLocation();

    Brick containedBrick = getBrickByXAndY(brickHolderLocation.x, brickHolderLocation.y); // getting the Brick at that location

    if (containedBrick == null) {
        // If in any case there should be no brick at that position, just go on with the Brick above
        if (brickHolderLocation.y == 0) { // Should we be at the top row, there's no need to continue
            return;
        } else {
            BrickHolder nextBrickHolder = getPanelByXAndY(brickHolderLocation.x, brickHolderLocation.y - 1);
            moveBrick(nextBrickHolder);
        }
    }

    if (brickHolderLocation.y == 0) { // Should we be at the top row, there's no need to continue
        return;
    }

    // Removing the current Contained Brick
    brickHolder.remove(containedBrick);

    // Getting the Brick I want to move, normally hosted at the above Panel
    Brick theOneToBeMoved = getBrickByXAndY(brickHolderLocation.x, brickHolderLocation.y - 1);

    if (theOneToBeMoved == null) {
        // If in any case the Panel above doesn't contain a Brick, then continue with the Panel above.
        BrickHolder nextBrickHolder = getPanelByXAndY(brickHolderLocation.x, brickHolderLocation.y - 1);
        moveBrick(nextBrickHolder);
    }

    // Getting the Panel above the current one, so that we may move the Brick hosted there,
    // To the current Panel
    BrickHolder toHoldTheNewBrick = getPanelByXAndY(brickHolderLocation.x, brickHolderLocation.y - 1);

    brickHolder.add(theOneToBeMoved); // Moving the Brick at the current Panel
    toHoldTheNewBrick.remove(theOneToBeMoved); // Removing that same brick from the Panel above
    theOneToBeMoved.setBrickLocation(brickHolderLocation); // Setting the Brick's new location.

    // Since we have gotten so far, we assume that everything worked perfectly and that it's time to continue
    // with the Panel above
    BrickHolder theNextOne = getPanelByXAndY(brickHolder.getBrickHolderLocation().x, brickHolder.getBrickHolderLocation().y - 1);

    moveBrick(theNextOne);
} 
```

从我所做的调试来看，我相信问题出在某个地方：

```
if (brickHolderLocation.y == 0) { // Should we be at the top row, there's no need to continue
            return;
        } 
```

一些兴趣点：

*   Brick - 我创建的扩展 JButton 的类。而已。把它想象成一个带有背景的普通 JButton
*   BrickHolder - 我创建的用于托管 Bricks 的类。这个类扩展了 JPanel。唯一的添加是（点）位置变量，添加是为了更容易操作。

**编辑：**谢谢大家！您的评论和/或答案向我展示了继续前进的正确道路！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:10:53.147

我没有足够的评论点，所以这更像是一个建议，但如果你在最上面一行，你不还是想移走砖块吗？这与您在调试中发现的问题所在的区域相同。

# entity-framework - 使用通用存储库是一种好习惯，还是每个实体都有自己的存储库？

> ID：11086636
> 
> 赞同：11
> 
> 时间：2012-06-18T16:01:33.943
> 
> 标签：entity-framework, generics, repository-pattern

作为 Asp.Net MVC 的新手，我正在关注[Pro ASP.Net MVC 3 Framework](http://books.google.co.uk/books?id=M2BLtR7oNcQC&lpg=PA157&ots=ipVQsx1Mn_&dq=entity%20framework%20sportsstore&pg=PA157#v=onepage&q=entity%20framework%20sportsstore&f=false)一书中的 SportsStore 示例。

一切都很好，但现在我开始使用一些额外的实体来增强基本示例。哪种方法更好： - 每个实体是否应该有自己的存储库（这似乎是重复代码）或 - 是否应该有类似实体的通用存储库？

是否还有其他项目可以使相同的架构成为更完整的示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:47:10.763

这是互联网上争论不休的话题。如果你在 SO 使用搜索，你可以找到很多关于它的线程。最后只是归结为您的个人喜好。尝试这两种选择，然后决定哪一种最适合您。

我开始为每个实体创建单独的存储库，但感觉像是大量不必要的工作（以及大量代码重复），所以最近我开始使用通用存储库，这对我来说非常有效。

有关更多信息，请参阅此线程：[为每个对象创建通用存储库与特定存储库的优势？](https://stackoverflow.com/questions/1230571/advantage-of-creating-a-generic-repository-vs-specific-repository-for-each-obje)

# c# - 使用 Microsoft.Web.Administration.Application 类，如何获取身份验证列表？

> ID：11086639
> 
> 赞同：-3
> 
> 时间：2012-06-18T16:01:50.210
> 
> 标签：c#, iis-7

我正在尝试编写一些 C# 代码来对 IIS 进行管理。

我的 Web 应用程序有一个 Microsoft.Web.Administration.Application 实例。

如何使用此对象在“身份验证”下获取与 IIS 中相同的信息？

我期望一个包含以下内容的列表：

*   匿名身份验证（已禁用）
*   ASP.NET 模拟（已启用）
*   表单身份验证（已禁用）
*   Windows 身份验证（启用）

在此先感谢，斯蒂芬

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T16:34:12.313

```
Configuration configuration = Application.GetWebConfiguration(); 
```

然后使用

```
configuration.GetMetadata("availableSections") 
```

...获取部分列表。身份验证部分以“system.webServer/security/authentication/”开头，因此请搜索这些部分。

然后打电话

```
Application.GetWebConfiguration().GetSection([SECTION]).GetAttributeValue("enabled") 
```

匿名身份验证部分称为“anonymousAuthentication”，Windows 身份验证部分称为“windowsAuthentication”。

还有表单身份验证，这将在下面进一步解释。所以代码看起来像这样：

```
const string authenticationPrefix = "system.webServer/security/authentication/";

private Dictionary<string, string> authenticationDescriptions = new Dictionary<string,string>()
{ 
    {"anonymousAuthentication", "Anonymous Authentication"},
    {"windowsAuthentication", "Windows Authentication"},
};

Configuration configuration = application.GetWebConfiguration();

IEnumerable<string> authentications = ((String)configuration.GetMetadata("availableSections")).Split(',').Where(
    authentication => authentication.StartsWith(authenticationPrefix));

foreach (string authentication in authentications)
{
    string authName = authentication.Substring(authenticationPrefix.Length);
    string authDesc;
    authenticationDescriptions.TryGetValue(authName, out authDesc);
    if(String.IsNullOrEmpty(authDesc))
        continue;
    authenticationCheckedListBox.Items.Add(authDesc, (bool)configuration.GetSection(authentication).GetAttributeValue("enabled"));
} 
```

这是表单身份验证的代码

```
enum FormsAuthentication { Off = 1, On = 3 };

ConfigurationSection authenticationSection = configuration.GetSection("system.web/authentication");

authenticationCheckedListBox.Items.Add("Forms Authentication", (FormsAuthentication)authenticationSection.GetAttributeValue("mode") == FormsAuthentication.On); 
```

# android - 灰屏 MapView - 带有 Android 的 ArcGIS

> ID：11086643
> 
> 赞同：0
> 
> 时间：2012-06-18T16:02:10.387
> 
> 标签：android, arcgis

我正在尝试使用带有 Android SDK 的 ArcGIS 的示例 HelloWorld 应用程序。代码编译良好，但执行时出现灰屏。我已经看了一下这个[问题](https://stackoverflow.com/questions/8969498/android-how-to-know-if-mapview-is-properly-loaded)，但它并没有解决我的问题。

这是我的源代码：

```
public class HelloWorld extends Activity {

    MapView map = null;
    ArcGISTiledMapServiceLayer tileLayer;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        map = (MapView) findViewById(R.id.map);
        tileLayer = new ArcGISTiledMapServiceLayer("http://services.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer");
        if(tileLayer.isInitialized() == true)  //if a bad url is provided, this will fail
        {   map.addLayer(tileLayer);  }
        else{
                //if no layer is successfully added, the MapView will not initialize
            Toast layerToast = Toast.makeText(this, "Layer didn't load, MapView won't initialize", Toast.LENGTH_LONG);
            layerToast.show();
        }

        map.setOnStatusChangedListener(new OnStatusChangedListener() {
           private static final long serialVersionUID = 1L;

           public void onStatusChanged(Object source, STATUS status) {
               //conditional checks if mapView's status has changed to initialized 
                if (OnStatusChangedListener.STATUS.INITIALIZED == status && source == map) 
                { 
                    Toast mapViewToast = Toast.makeText(HelloWorld.this, "MapView loaded", Toast.LENGTH_LONG);
                    mapViewToast.show();
                }
            }
         });

    }

    @Override
    protected void onPause() {
        super.onPause();
        map.pause();
 }
    @Override   protected void onResume() {
        super.onResume(); 
        map.unpause();
    }

} 
```

这是我的 LogCat：

```
06-18 10:51:21.413: E/ArcGIS(1544): url =http://services.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer
06-18 10:51:21.413: E/ArcGIS(1544): org.codehaus.jackson.JsonParseException: Unexpected character ('<' (code 60)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')
06-18 10:51:21.413: E/ArcGIS(1544):  at [Source: java.io.StringReader@4057ed68; line: 1, column: 2]
06-18 10:51:21.413: E/ArcGIS(1544):     at org.codehaus.jackson.JsonParser._constructError(JsonParser.java:1432)
06-18 10:51:21.413: E/ArcGIS(1544):     at org.codehaus.jackson.impl.JsonParserMinimalBase._reportError(JsonParserMinimalBase.java:521)
06-18 10:51:21.413: E/ArcGIS(1544):     at org.codehaus.jackson.impl.JsonParserMinimalBase._reportUnexpectedChar(JsonParserMinimalBase.java:442)
06-18 10:51:21.413: E/ArcGIS(1544):     at org.codehaus.jackson.impl.ReaderBasedParser._handleUnexpectedValue(ReaderBasedParser.java:1198)
06-18 10:51:21.413: E/ArcGIS(1544):     at org.codehaus.jackson.impl.ReaderBasedParser.nextToken(ReaderBasedParser.java:485)
06-18 10:51:21.413: E/ArcGIS(1544):     at com.esri.core.internal.b.a.e.a(Unknown Source)
06-18 10:51:21.413: E/ArcGIS(1544):     at com.esri.core.internal.b.a.e.a(Unknown Source)
06-18 10:51:21.413: E/ArcGIS(1544):     at com.esri.core.internal.b.a.e.a(Unknown Source)
06-18 10:51:21.413: E/ArcGIS(1544):     at com.esri.core.internal.a.a.m.b(Unknown Source)
06-18 10:51:21.413: E/ArcGIS(1544):     at com.esri.android.map.ags.ArcGISTiledMapServiceLayer.initLayer(Unknown Source)
06-18 10:51:21.413: E/ArcGIS(1544):     at com.esri.android.map.ags.ArcGISTiledMapServiceLayer$1.run(Unknown Source)
06-18 10:51:21.413: E/ArcGIS(1544):     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:444)
06-18 10:51:21.413: E/ArcGIS(1544):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
06-18 10:51:21.413: E/ArcGIS(1544):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
06-18 10:51:21.413: E/ArcGIS(1544):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
06-18 10:51:21.413: E/ArcGIS(1544):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
06-18 10:51:21.413: E/ArcGIS(1544):     at java.lang.Thread.run(Thread.java:1019) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:17:40.220

您不能像那样立即检查 tileLayer isInitialized 返回值。层初始化进行网络调用并异步完成。

您需要先将其添加到您的 MapView 中，就像在原始的 HelloWorld 示例代码中一样。这将开始初始化图层。然后，您可以检查从 OnStatusChangedListener 触发的事件以进行图层和/或地图初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:15:19.980

如果您因为特定原因不需要检查层初始化，则不使用 isInitialized() 将其添加到 MapView。

如果您确实需要在继续之前检查图层是否已初始化，那么您可以使用 OnStatusChangedListener，就像 MapView 一样。然后，您可以等到图层的状态更改为 INITIALIZED，然后将其添加到 MapView。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    map = (MapView) findViewById(R.id.map);
    tileLayer = new ArcGISTiledMapServiceLayer("http://services.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer");
    tileLayer.setOnStatusChangedListener(new OnStatusChangedListener() {
        public void onStatusChanged(Object source, STATUS status) {
            if (OnStatusChangedListener.STATUS.INITIALIZED == status){
                map.addLayer(tileLayer);  //when layer is initialized add to map
            }
        }
    });

    map.setOnStatusChangedListener(new OnStatusChangedListener() {
       public void onStatusChanged(Object source, STATUS status) {
            if (OnStatusChangedListener.STATUS.INITIALIZED == status ) 
            { /*do something when mapView is initialized*/  }
        }
    });

} 
```

# typo3 - RealURL：FixedPostVars 中的可选段

> ID：11086645
> 
> 赞同：2
> 
> 时间：2012-06-18T16:02:14.820
> 
> 标签：typo3, lookup, realurl

我在我的 Typo3 4.5.16 项目中使用 RealURL 来朗读某个页面的 URL。为此，我使用了一个查找表，它将一定数量的 ID 与其对应的 URL 相匹配。

例如
`http://www.example.com/path/to/catalog/chapter1/section1/group1/prod-123/`
，将映射到页面“目录”，参数分别映射为`chapter`、`section`、`group`和`product`。请注意，这些参数中只有**最后**一个是相关的并且具有真实映射，其他参数仅用于“漂亮”路径。

现在我的问题是：并非每个产品都有所有级别的前面路径段。例如，另一个产品可能有这样的 URL：
`http://www.example.com/path/to/catalog/chapter1/section4/prod-789/`

数据库将如下所示：

```
Id  | seg0      | seg1      | seg2      | seg3      | dummy0    | dummy1    | dummy2    | MapId
----|-----------|-----------|-----------|-----------|-----------|-----------|-----------|-----------
1   | chapter1  | section1  | group1    | prod-123  | 1         | 1         | 1         | 123
2   | chapter1  | section4  |           | prod-789  | 1         | 4         | 0         | 789 
```

您会看到到段名称的映射只是空的。

然而，RealURL 将使用空字符串作为组，并产生
`chapter1/section4//prod-789`

有没有办法抑制这种空映射？将解码将段传递给下一个参数（如`noMatch => bypass`值映射）

如果不是，是否可以使用查找表一次映射多个路径段？（即将整个路径映射到真实ID）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T22:48:39.847

您可能想尝试 realUrl 提供的钩子， [请参阅这篇文章](http://www.t3node.com/blog/hiding-repeated-segments-with-realurl/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:17:58.203

好吧，我自己找到了一个 hacky 解决方法。

它使用`userFunc`基本上模仿lookupTable 的行为的tions。每个级别都有一个这样的功能。它修改`$params['pathParts']`传递给 unser 函数的数组

**编码：**

*   对于“父”级别，只需映射到段。如果未映射，这将返回空字符串。
*   `$params['pathParts']`对于映射级别，删除传递数组末尾的所有空元素
*   => 删除空白部分

**解码：**

*   对于“父”级别，检查`$params['pathParts']`. 如果不是，这是一个“跳过”的父级。只需将当前值附加到`$params['pathParts']`，它将由 RealURL 传递到下一个级别
*   最终使用正确的值调用映射的级别。只是地图

只要 RealURL 对 userFunctions 的处理没有太大改变，它就可以工作......

# mercurial - 来自非嵌套/同级目录的 Mercurial 子存 储库？

> ID：11086647
> 
> 赞同：1
> 
> 时间：2012-06-18T16:02:18.637
> 
> 标签：mercurial, mercurial-subrepos

是否可以使用兄弟路径创建子存储库？

Subversion 是我们在这里“选择”的 VCS，但我已经遇到了很多过时提交的问题。在 Hg 和 SVN 下对我的文件进行双重版本对我来说更加方便，并且我已经取得了巨大的成功。但是，我还有其他几个同事使用 Hg，除了他们可能没有注意到的一个问题外，我们在那里没有遇到任何问题。

我们的 SVN 布局是这样的

```
Area/
    trunk/
        Program1/
        Program2/
        ...
        Services/
            Program1ServiceA/
            Program1ServiceB/                

    branches/
        Program/
        Program/
        ...
        Services/
            Program1ServiceA/
            Program1ServiceB/                

    tags/
        Program1/
        Program2/
        ...
        Services/
            Program1ServiceA/
            Program1ServiceB/ 
```

这让您在处理项目时有点愚蠢，因为如果您的主要项目由`Program1`and`Program2`和其他一些服务组成......我不能一次获得所有的变更集，因为我们已经有一个与目录匹配的存储库。所以我必须确保 4 或 5 个 repos 是同步的，尤其是对于一些服务引用。

我在单个目录下使用 subrepos 运气不错：

```
MainRepo/
    Subrepo1/
    Subrepo2/ 
```

但我想做的是指定一个相对路径，这样我就可以使用同级目录到子存储库，所以我可以有这样的东西：

```
Area/
    Project1/
        Program1/ (points to ../trunk/Program1)
        Program2/ (points to ../trunk/Program2)
        Service1/ (... You get the idea)
        Service2/

    trunk/
        Program1/
        Program2/
        Services/
            Service1/
            Service2/ 
```

但到目前为止，它并没有像我预期的那样奏效。`trunk/Program1`是一个汞回购，我的`Project1/.hgsub`文件包含

```
Program1 = ../trunk/Program1 
```

我也试过`../../trunk/Program1`

但是其中任何一个的结果都是创建了一个新目录：`Area/Program1/Project1`那是空的。

到目前为止，我能找到的唯一搜索结果是使用`http`基于存储库的子存储库，所以我不确定从这里去哪里。我们的开发环境是 Windows 7，所以“简单”的答案是创建联结，但我主要关心的是让这样的事情*容易*做，所以进入门槛尽可能低，甚至像`mklink /J Program1 ..\trunk\Program1`from管理员 cmd 窗口是另一件事，它会阻止人们迁移到更好的工作流程。

是否可以添加我想要的子存储库，或者有更好的方法来做我们正在做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:57:04.973

子存储库**始终**位于另一个存储库中。换句话说，子存储库允许您对存储库集合进行版本控制，其中一些存储库嵌套在其他存储库中。因此，如果不创建外部存储库，子存储库就不能成为兄弟。

*当 Mercurial 需要确定从哪里*获取新的子存储库时，会使用您所说的相对路径。也就是说，当您运行`hg update`（或者当它作为 的一部分为您运行时`hg clone`）并且 Mercurial 注意到一个`.hgsub`文件时，它需要创建其中提到的子存储库。为了创建子仓库，Mercurial 使用右侧的路径：

```
sub-A = relative/path
sub-B = C:/absolute/path 
```

这里`sub-A`将使用命令在工作副本的根目录中签出

```
hg clone <default path for main repo>/relative/path sub-A 
```

并`sub-B`使用命令签出

```
hg clone C:/absolute/path sub-B 
```

就是这样——这是一个非常简单的机制。我试图在[我的子存储库指南中对此进行描述，并且在](http://mercurial.aragost.com/kick-start/en/subrepositories/)[wiki](http://mercurial.selenic.com/wiki/Subrepository)中也对此进行了解释。

对于您的情况，您可以为属于一起的部分创建一个[瘦壳存储库。](http://mercurial.selenic.com/wiki/Subrepository#Use_a_thin_shell_repository_to_manage_your_subrepositories)这个 repo 和`Project1`上面一样，并且有`Program1`, `Program2`, `Service1`, 等作为子repos。将`.hgsub`如下所示：

```
Program1 = Program1
Program2 = Program2
Service1 = Service1
Service2 = Service2 
```

通过使用“简单的 subrepo 路径”，您可以让事情变得简单：克隆看起来就像克隆源一样，并且所有内容都保存在一起。

最后一点：除非您使用`Program1`或`Service1`在其他项目中，否则您应该将所有内容放入一个存储库中。

# image - 灰度图像的 BMP 格式是什么？

> ID：11086649
> 
> 赞同：14
> 
> 时间：2012-06-18T16:02:24.267
> 
> 标签：image, bitmap, file-format

灰度图像的 BMP 格式是什么（尤其是每像素 16 位）？维基[百科](http://en.wikipedia.org/wiki/BMP_file_format)只讨论 bmp 的彩色图像。

**更新：**

只是为了将来访问者的更新和信息，我会选择[PGM](http://netpbm.sourceforge.net/doc/pgm.html)，因为它是未压缩的并且可以支持 16 位灰度。另一种选择是使用[PNG](http://en.wikipedia.org/wiki/Portable_Network_Graphics)，但它会压缩数据（这不是我想要的），如此[处](https://stackoverflow.com/questions/11099931/trying-to-extract-pixel-values-from-a-given-png-image)所述。另请注意，图像可能会出现失真，因为大多数显示器支持 256 色而不是 16 位的 4096。所以图像会饱和。

令人惊讶的是，对于 16 位图像的灰度，BMP*几乎无能为力。*
感谢帮助我理解问题的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:06:06.017

对于灰度图像，我会使用 8 位 BMP。8 位 BMP 可以使用调色板对颜色进行编码。但是，如果您不使用一个，您可以简单地将颜色值解释`[0...255]`为从黑色 (0) 到白色 (255) 的颜色。

**编辑：**我不会将 BMP 用于 16 位灰度图像。从技术上讲，您可以使用每像素 16 位 BMP 格式来编码 16 位灰度数据 ( [http://en.wikipedia.org/wiki/BMP_file_format#Pixel_format](http://en.wikipedia.org/wiki/BMP_file_format#Pixel_format) )。然而在实践中，这是一个坏主意（阅读：hacky），因为该深度旨在对像素的 alpha、红色、绿色和蓝色样本进行编码。

存储每像素 16 位灰度数据的更好格式是 PNG。

还要问问自己，你真的、真的需要那种额外的精度吗？对于大多数应用程序，每像素 8 位就可以了（=如果您对精度没有任何特定要求，那就是这种情况）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T16:08:00.710

你是对的，BMP 只知道颜色。这样做的方法是创建一个包含 256 个条目的调色板，其中每个条目具有相同的 R、G、B 值：第一个条目 (0,0,0)，第二个条目 (1,1,1) 等。现在使用调色板使图像每像素 8 位。

编辑：鉴于您对 16 位灰度的新要求，我认为您有 2 个选择：转换为 8 位，或使用 BMP 以外的其他格式。如果转换为 8 位，则可以使用抖动来生成与源 16 位图像在视觉上无法区分的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T19:10:07.517

看起来，TIFF 和 PNG 本身就支持 16 位灰度。

[http://en.wikipedia.org/wiki/Grayscale](http://en.wikipedia.org/wiki/Grayscale)

我假设您希望保存的这些图像不仅仅是为了显示，而是为了某种需要额外精度的后期处理？如果不是，那么我建议删除最低有效 8 位，并使用颜色图存储一个更简单的 8 位位图，以将每个值映射到具有 value -> (value, value, value) RGB 映射的 RGB。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-11T00:23:45.103

> 灰度图像的 BMP 格式是什么

除了使用调色板之外，您还可以通过编写带有`BITMAPV4HEADER`. 并将`bV4RedMask`,`bV4GreenMask`和设置`bV4BlueMask`为相同的值。但是，`bcBitCount`这种格式的最小值是 16，因此每个像素仍然需要占用两个字节。不过，您可以将第二个字节用于 Alpha 通道（透明度）。

> 特别是对于每像素 16 位

看起来任何 BMP 版本都不支持 16 位色深。即使文件格式似乎允许它（`bcBitCount=16`和`bV4…Mask=0xFFFF`），图像编辑器和库也会丢弃额外的位。

[一些文档](https://docs.microsoft.com/en-us/windows/desktop/gdiplus/-gdiplus-types-of-bitmaps-about)引用了 64-BPP BMP 文件，但不清楚这将如何与`BITMAPV4HEADER`字段匹配，因为掩码字段的大小都是 32 位（因此无法为 64 BPP 指定通道掩码）。

> 另一种选择是使用 PNG，但它会压缩数据（这不是我想要的），如此处所述。

如果您不想压缩 PNG 文件，则不必压缩。使用 0 的压缩级别将使像素保持原样（加上 zlib 页眉/页脚）。

> 另请注意，图像可能会出现失真，因为大多数显示器支持 256 色而不是 16 位的 4096。

16 位深度将允许 65536 个不同的每通道亮度值，而不是 4096。失真听起来像是伽马曲线的问题，并且与文件格式问题没有真正的关系。

# c++ - 让 VC 对话框编辑器识别命名空间中的对话框类

> ID：11086654
> 
> 赞同：1
> 
> 时间：2012-06-18T16:02:47.170
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++, dialog

我正在尝试以允许我使用编辑器类/方法向导功能将消息处理程序添加到对话框及其控件的方式将命名空间中的对话框类连接到模板。

一旦我添加命名空间并保存/重新加载尝试在对话框编辑器中使用类向导，就会提示我创建一个新的对话框类。有没有人有这方面的经验？我正在使用 2010。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:00:36.267

不幸的是，这是不可能的。它被报告为一个错误。

俗气的解决方案之一：

[https://connect.microsoft.com/VisualStudio/feedback/details/543019/class-wizard-and-class-view-does-not-detect-namespaces-changes-in-configurations](https://connect.microsoft.com/VisualStudio/feedback/details/543019/class-wizard-and-class-view-does-not-detect-namespaces-changes-in-configurations)

# wpf - 如何在后面的vb代码中找到对象的坐标？

> ID：11086656
> 
> 赞同：0
> 
> 时间：2012-06-18T16:02:49.280
> 
> 标签：wpf, xaml, properties, position

我想要做的是找到一种方法来了解对象（图像）的坐标（或任何属性），以便我可以使用它来编码在图像上放置椭圆的位置。我发现了一些关于如何在堆栈面板中找到 texbox 位置的内容，但是当我尝试使用该示例时，它会抛出一个异常“TargetInvocationException 未处理”。也许我只是不明白如何引用不同的对象。我知道问题出在第一个 Dim 声明中。

在 Xaml 中：

```
<Window x:Class="MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Canvas x:Name="Can1">      
        <Image x:Name="Table1" Source="c:\images\table.jpg" Width="100" Height="100" Canvas.Left="75" Canvas.Top="75" />
        <Ellipse Canvas.Left="100" Canvas.Top="100" Width="50" Height="50" Stroke="Green" StrokeThickness="4" />
    </Canvas>
</Window> 
```

在代码中：

```
Class MainWindow 
    Dim gt1 As GeneralTransform = Table1.TransformToAncestor(Can1)
    Dim currentpoint As Point = gt1.Transform(New Point(0, 0))
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:15:37.680

所以它应该是：

```
 Class MainWindow 
      Private Sub MainWindow_Loaded(ByVal sender As Object, ByVal e As System.Windows.RoutedEventArgs) Handles Me.Loaded 
        Dim GT1 As GeneralTransform = Table1.TransformToAncestor(Can1) 
        Dim currentpoint As Point = GT1.Transform(New Point(0, 0)) 
      End Sub
     End Class 
```

# ruby - 除了 Bundler 之外，我为什么还要使用特定于应用程序的 RVM gemsets？

> ID：11086661
> 
> 赞同：5
> 
> 时间：2012-06-18T16:03:03.913
> 
> 标签：ruby, rubygems, rvm, bundler

我使用[RVM](https://rvm.io)来管理我的本地 Ruby 安装，并使用[Bundler](http://gembundler.com)来管理应用程序依赖项。

有些人建议为每个应用程序使用单独的 RVM [gemset](https://rvm.io/gemsets/)，而有些人似乎认为没有必要。

那么，当我使用 Bundler 时，为每个应用程序使用单独的 RVM gemset 有什么好处呢？不这样做有什么风险？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:35:16.063

除了 bundler 之外，我还使用 gemsets，原因如下：

*   很容易只是偶尔放下所有东西（我喜欢弄乱我安装的宝石）
*   无需调用`bundle exec`（这对于 binstubs 已过时）
*   加载速度更快，因为需要解析的 gem-specs 更少
*   易于分发（将其复制给您的伙伴）

可能有更多使用它们的理由，但我通常喜欢沙盒的想法！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T15:58:33.953

我发现如果您使用的是 rails 2，则拥有 rvm 很有用。如果您需要处理具有旧代码的应用程序，则 RVM 非常有用。Rails 2 不使用 Gemfile，因此`bundle exec`不起作用。RVM 可以轻松地为该项目保持 gem 版本的正确性，并且您可以切换回新版本的 rails 并使用 Gemfile 指定版本。如果您有多个应用程序使用不同的 gem 版本，但使用相同的 ruby​​ 版本，则可以方便地共享大多数 gem，并在 Gemfile 中指定它们不同的地方。

我认为这取决于情况。如果您发现两个应用程序之间存在大量版本问题，并且不断修改 Gemfile 以保持它们的正确性很烦人，那么请使用单独的 gemset。如果有足够的共同点，那么使用相同的 gemset 可能是有意义的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T16:20:36.790

RVM gemsets 允许您在不加载捆绑程序的情况下分离 gems - 这更快，加载 gems 会更简单。

您应该使用 gemsets 将项目与您的辅助 gem （如`gist`）分开。

但是，如果您认为 gemset 对您没有帮助，您可以告诉 RVM 完全忽略 gemset：

```
echo "export rvm_ignore_gemsets_flag=1" >> ~/.rvmrc 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T17:11:38.777

我是否还可以参考位于 fast/globalcache_comment_test.sh 的 rvm-test 形式的“globalcache”文档以及项目的 Gemfile。

这也将减少到 ruby​​gems.org 的网络流量。全局初始加载，无法承受。

# java - 使用 Java 64 位启动应用程序时收到 PermGen 空间错误

> ID：11086663
> 
> 赞同：0
> 
> 时间：2012-06-18T16:03:09.650
> 
> 标签：java, 64-bit, jnlp, out-of-memory, permgen

我有一个 Eclipse（基于插件的）应用程序，我尝试从 jnlp 文件（我使用 maven tycho 构建它）从 Java 64bit 开始。启动应用程序后不久，它不再响应，有时甚至会自动关闭。如果使用 Java 32 位启动应用程序，则应用程序可以正常工作。

如果我检查日志文件，我会得到 java.lang.OutOfMemoryError: PermGen space 异常。我已将 MaxPermSize 增加到 756m，但仍然无法正常工作。我可以看到，当应用程序被阻塞时，CPU 几乎达到了 100% 的使用率。

如果您对我可以解决问题或一些解释有任何建议，请分享。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:45:53.347

当您加载许多类时，烫发空间会被填满。

从这个[常见问题解答](http://java.sun.com/docs/hotspot/gc1.4.2/faq.html)：

> **如何判断永久代是否已满？**
> 
> 从 1.4.2 开始 -XX:+PrintGCDetails 将打印有关在每次垃圾回收时收集的堆的所有部分的信息。完整的收藏
> 
> [Full GC [Tenured: 30437K->33739K(280576K), 0.7050569 secs] 106231K->33739K(362112K), [Perm : 2919K->2919K(16384K)], 0.7052334 secs]
> 
> 这个例子表明，永久代收集的很少（从收集前使用的 2919K 变为收集后使用的 2919K），永久代的当前大小为 16384K。

如果您遇到类加载器泄漏，您可能会对[这篇文章](http://frankkieviet.blogspot.fr/2006/10/classloader-leaks-dreaded-permgen-space.html)和[“如何修复”文章](http://frankkieviet.blogspot.fr/2006/10/how-to-fix-dreaded-permgen-space.html)感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:31:32.383

我的解决方案是更改为 Java 1.7。我之前尝试过使用 Java 1.6.0_26_x64 和 Java 1.6.0_29_x64 并得到了上述错误。

我现在已更改为 Java 1.7.0_04_x64，它运行顺畅，完全没有阻塞。

编辑：它也适用于 Java 1.6.0_33。

# c# - 从 Intranet 上经过身份验证的服务器检索文件并将其提供给客户端

> ID：11086668
> 
> 赞同：0
> 
> 时间：2012-06-18T16:03:26.810
> 
> 标签：c#, asp.net-mvc

我目前正在使用 MVC 在本地构建我的项目。

用户输入一些搜索信息，并显示一个链接以下载存在于网络上其他地方的 Vox 格式文件。

该其他服务器具有带身份验证的共享驱动器。

我需要让我的控制器抓取该文件并将其发送给客户端以供下载。

最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:05:48.090

> 最好的方法是什么？

通过公开返回 a 的控制器操作`FileResult`：

```
public ActionResult Download()
{
    byte[] file = ... go and fetch the file contents from wherever it is stored
    return File(file, "some MIME type", "filename.someextension");
} 
```

然后在您的视图中为用户提供一个链接，以便他可以下载：

```
@Html.ActionLink("download the Vox file", "Download") 
```

# c# - 绑定用户控件

> ID：11086670
> 
> 赞同：1
> 
> 时间：2012-06-18T16:03:33.027
> 
> 标签：c#, wpf, xaml, binding

如何从包含它的 XAML 创建与 UserControl 中定义的属性的绑定？例如，我有一个名为 thePhoto 的 local:Photo 类型的控件，它具有三个本地控件：名为 Main、Frame 和 Text 的层，我想从我的 MainWindow 访问 thePhoto.Main.ActualWidth？谢谢

（我忘了说简单的与 Path 和 ElementName 的绑定不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:13:39.290

`DependencyProperty`在“父级”中创建所需类型`UserControl`并将其与两侧所需的属性绑定。
做类似事情的好例子： [Exploring the use of Dependency Properties in User Controls](http://www.codeproject.com/Articles/224230/Exploring-the-use-of-Dependency-Properties-in-User)

# java - 如何使用无模式来持久化具有事务、版本控制、历史记录和层次结构的 POJO？

> ID：11086671
> 
> 赞同：2
> 
> 时间：2012-06-18T16:03:38.480
> 
> 标签：java, nosql, persistence, pojo

我正在编写一个系统，我希望能够将各种“作业模板”保存到某种数据存储中。在我们的系统中，模板是包含如何进行各种数学计算的描述的域对象。

我想为这些模板 POJO 提供某种强大的存储 - 最好是某种共享/远程存储库，以便多个系统可以访问并可能修改模板。

我对 NoSQL、图形、文档和对象数据库的数量有点不知所措，并希望从以前做过这方面的人那里得到一些指导！

在我的理想世界中，这将是一个神奇的无模式数据存储，因此任何 Template 对象都可以通过简单的方法调用写入其中，然后稍后再次检索。理想情况下，我希望具有以下功能-

1) 版本控制 - 这样我可以“覆盖”以前的 POJO，并跟踪版本更改
2) 历史 - 这样我可以返回（时间机器样式）并检索以前的版本
3) 事务 - 所以一切都是一致的和防弹的
4) 层次结构- 所以我可以对 POJO 进行分组，并通过路径等找到它们

一些选项似乎包括 Jackrabbit OCM、OrientDB、CouchDB。还有 JDO (DataNucleus) vs JPA。任何人都可以分享任何见解来消除太多选择的迷雾吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:36:57.863

多么开放的问题！

我使用 Jackrabbit，它可以满足您的所有需求，并且非常容易启动和运行。您可以执行 XPATH 查询以及其他几种类型。文档不是很好，但 JCR 文档通常足以应付。还有其他 JCR 实现。如果您打算突破极限，您可能需要考虑它们/找到基准:)

# .net - FileWatcher 未将调试语句输出到调试视图

> ID：11086674
> 
> 赞同：0
> 
> 时间：2012-06-18T16:03:46.233
> 
> 标签：.net, service

我在 Windows 2003 中运行 Windows 服务，使用 System.Diagnostics.WriteLine 将输出提供给 DebugView。我的程序在 onStart 函数中正常工作，包括输出正确的调试语句。一旦完成，程序将等待 fileWatcher_Changed 事件。此事件执行各种任务，包括调用 .exe 文件。但是，除了 .exe 文件中的语句之外，fileWatcher 中没有显示任何调试语句。我不确定为什么会这样，因为我可以在我的 Win7 机器上看到输出正常。我什至在 fileWather_changed 方法的开头有调试语句，但它没有被调用。

有没有人遇到过这个和/或有解决方案？

# specs2 - 为什么 ScalaCheck 在我的规范中丢弃了这么多生成的值？

> ID：11086675
> 
> 赞同：2
> 
> 时间：2012-06-18T16:03:51.257
> 
> 标签：specs2, scalacheck

我在 Specs2 中编​​写了一个 ScalaCheck 测试用例。测试用例放弃了，因为太多的测试被丢弃了。但是，它并没有告诉我*为什么*它们被丢弃。我怎样才能找出原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:20:52.677

在方法上设置断点`org.scalacheck.Gen.fail`并查看调用它的内容。

顺便说一句，就我而言，问题是双重的：

*   我设置`maxDiscarded`的值（1）太小了，因为我太乐观了——我没有意识到 ScalaCheck 会默认从大小为 0 的集合开始，即使我要求一个非空集合（我不知道为什么会这样）。

*   我正在生成大小为 1 及以上的集合，尽管正如我后来意识到的那样，对于我试图测试的内容，它们应该是大小为 2 及以上的集合——这导致基于该生成器的后续生成器*进一步丢弃。*

# php - 如何在 PHP 中返回基于 JSON 结果的唯一列表？

> ID：11086676
> 
> 赞同：0
> 
> 时间：2012-06-18T16:03:52.807
> 
> 标签：php, json, unique

我正在尝试使用来自一个 JSON 链接的值来填充其他 JSON 链接中的值，从而生成来自组合 JSON 的唯一值列表。我已经创建了完整的值列表，但是我很难在最终循环中找到仅显示唯一值的语法。任何帮助，将不胜感激。

```
$collection_string = file_get_contents("http://some_json_url.com/json");
$collection_list = json_decode($collection_string, true);

foreach ($collection_list as $col_lists => $col_list) {
     $object_string = file_get_contents('http://another_json_url.com/'.$col_list['key'].'/json');
     $object_list = json_decode($object_string, true);
     $object_array = array();

     foreach ($object_list as $objects => $object) {
          $object_array [] = array_unique($object); //Returns "Warning: array_unique() expects parameter 1 to be array, string given in..."
          echo '<li><a href="some_search_url/'.$object_array.'/search/">'.$object_array.'</a></li>'; //Returns "Array"
          echo '<li><a href="some_search_url/'.$object.'/search/">'.$object.'</a></li>'; //Returns complete list
     }

} 
```

工作代码：

```
$collection_string = file_get_contents("http://some_json_url.com/json");
$collection_list = json_decode($collection_string, true);

$object_array = array();

foreach ($collection_list as $col_lists => $col_list) {
     $object_string = file_get_contents('http://another_json_url.com/'.$col_list['key'].'/json');
     $object_list = json_decode($object_string, true);

     foreach ($object_list as $key => $value) {
          array_push($object_array, $value);
     }
}

$object_unique = array_unique($object_array);
natcasesort($object_unique);

foreach ($object_unique as $key => $value) {
     echo '<li><a href="some_search_url/'.$value.'/search/">'.$value.'</a></li>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:15:35.373

简单地改变这个

```
$object_array [] = array_unique($object); 
```

到那个

```
$object_array [] = $object; // edited !
array_unique($object_array); 
```

也许你也可以用一行代码做到这一点，但我不知道怎么写。但是我写它的方式有点未优化，最好在最后一个循环之后只执行一次 array_unique() 。

顺便说一句，您的问题是/是您试图使 $object 唯一，这不是数组。这是一个字符串/对象。

# ruby-on-rails - Sunspot Solr Rails - 隐藏字段范围和相关模型

> ID：11086677
> 
> 赞同：0
> 
> 时间：2012-06-18T16:04:02.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, solr, sunspot-solr

我想使用隐藏字段参数（colour_id）来优化我对与特定颜色相关的面料的搜索。

面料有多种颜色、供应商和类别

但是，我希望搜索表单（color_ids）中隐藏字段的参数过滤织物，以便仅搜索与这些颜色相关的织物。

从我收集到的最好的方法是在我的搜索中添加范围，并将这些隐藏字段的参数传递给范围，以将搜索结果缩小到仅与这些颜色相关联的面料。

我的面料模型看起来像这样

```
class Fabric < ActiveRecord::Base
  has_many :fabric_categories
  has_many :categories, :through => :fabric_categories
  has_many :suppliers, :through => :fabric_suppliers
  has_many :fabric_suppliers
  has_many :colours, :through => :fabric_colours
  has_many :fabric_colours

  # solr search method
  searchable do
  text :name, :boost => 5
  text :description
  text :categories do
    categories.map(&:name)
  end
  text :suppliers, :boost => 2 do
   suppliers.map(&:name)
   end
  end 
```

我的控制器

```
 class FabricsController < ApplicationController

  def index
    @search = Fabric.search do
    fulltext params[:search]

     #scoped assets
     @fabrics = @search.results 
```

和我的看法

```
 <%= form_tag fabrics_path, :method => :get, :class => 'form-search'  do %>
    <%= text_field_tag :search, params[:search], :class => 'query', id: "auto_complete", :placeholder => '', :autocomplete => "off" %>
    <div id="colour_ids">
      <%= hidden_field_tag :colour_1 %>
    </div>
    <%= submit_tag "Search", :name => nil, :class => 'btn', :id => 'search_button' %>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:18:53.960

您需要将 category_ids 添加到索引中，方法是将其包含在您的`searchable`块中：

```
searchable do
  ...
  integer :colour_ids, :multiple => true do
    colours.map(&:id)
  end
end 
```

执行此操作后，您将需要重新索引。

然后在您的查询中，您需要在以下内容中包含条件`FabricsController#index`：

```
@search = Fabric.search do
  fulltext params[:search]
  with :colour_ids, params[:colour_1]
end 
```

# php - 打开多个持久套接字到同一个域？

> ID：11086678
> 
> 赞同：3
> 
> 时间：2012-06-18T16:04:08.907
> 
> 标签：php, sockets, persistent-connection

在使用工作者 MPM 的 apache 服务器上，是否有可能以某种方式打开多个持久套接字到同一个 TCP 地址？

当我执行以下操作时：

```
$SocketA = pfsockopen('tcp://domain.com', 80);
$SocketB = pfsockopen('tcp://domain.com', 80); 
```

我得到了两个独立的套接字资源，但具有相同的底层连接（我可以知道，因为如果我写信，`$SocketA`我可以从中读取远程响应，`$SocketB`反之亦然）。我想有两个单独的持久连接。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:19:50.880

这是可能的，但您需要为第二个持久连接使用不同的主机名/IP 地址。

原因是，如果您要连接的主机完全相同（主机和端口），它将返回现有的持久连接（如果存在），而不是创建一个新连接。

PHP 通过在内部创建基于主机和端口（[源](http://lxr.php.net/xref/PHP_5_3/ext/standard/fsock.c#54)）的哈希值来跟踪持久连接：

```
spprintf(&hashkey, 0, "pfsockopen__%s:%ld", host, port); 
```

因此，如果您使用相同的主机和端口，`$socketB`您将从`$socketA`. PHP 将此哈希值与连接一起存储，因此下次调用时`pfsockopen`，它会重新生成哈希然后查找它，如果找到它，则返回旧连接。

在套接字 B 上，您可以尝试直接连接到 IP 地址，或者将其他主机名别名为第一个主机名，这样您最终会获得到同一位置的 2 个连接，但您会欺骗 PHP 创建 2 个连接。这些都是解决方法，但并不完全便携。

在大多数情况下，答案是肯定的和否定的，您不能使用相同的主机和端口来获得 2 个连接，但您可以使用可能会造成混淆或导致无法预料的问题的技巧来解决它。

# java - 将可运行的 Java 类导出到 .jar 文件，仅包括所需的依赖项

> ID：11086689
> 
> 赞同：7
> 
> 时间：2012-06-18T16:04:52.773
> 
> 标签：java, eclipse, jar, dependencies, export

> **可能重复：**
> [如何确定 Java 程序使用了哪些类？](https://stackoverflow.com/questions/475516/how-to-determine-which-classes-are-used-by-a-java-program)

我在 Eclipse 上有一个 Java 项目，其中包含很多 Java 类。我想将其中一个导出到 .jar 文件中，但遇到了一些问题。

我已经阅读了一些现有的线程，但我没有得到满足我要求的正确答案，因为：

如果我选择“导出到 JAR 文件”，我会导出正确的类，但 .jar 文件不包含运行 jar 文件所需的依赖项。

如果我选择“导出到可运行的 JAR 文件”，则生成的 jar 文件包含所有依赖项，但也会放入整个项目中的所有其他类（也包括我不需要的类）。

如何将单个 Java 类导出到包含运行 jar 文件所需的库的 .jar 文件？生成的 jar 文件必须尽可能小。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:35:58.997

您可以创建一个仅包含您需要的类的新项目，并将该项目导出为可运行的 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:40:58.937

试试这个，这是在eclipse中创建jar或者runnable jar的方法

```
File -> Export-> Java ->Runnbale JAR file

Launch configuration : your Class containing the public static void main(String[] args)

Export destination : Target place

Library Handling:

Package required libraries into generated JAR

FINISH 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T17:38:25.150

可能有一种解决方法，具体取决于您需要的用例。通常，不可能进行完整的依赖分析，因为您的代码可能会在运行时加载类等。如果您需要 .jar 尽可能小（例如，如果您希望能够“klickstart”应用程序的部分而不是多余地浪费存储空间）您可能会使用

```
Export... -> Runnable JAR File -> Copy required libraries into a sub-folder... 
```

ant 然后只为所有 jar 保留一份外部库的副本。请提供有关您的用例的更多信息，以便我们发布更具体的答案:)

# ms-access-2010 - 从 VB2010 向 Access2010 写入数据

> ID：11086690
> 
> 赞同：2
> 
> 时间：2012-06-18T16:04:54.610
> 
> 标签：ms-access-2010

我正在尝试从 VB 2010 将数据写入 Access 2010 表。这是 VB 代码：

```
 Dim cn As New System.Data.OleDb.OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\ssr2011f\be\ssrAnalysisTWEAK.ACCdb")
        cn.Open()
        Dim Str As String = "insert into BSP1 values(" & CInt(pcValue) & ",'" & (hsName) & ") "
        Dim cmd As New System.Data.OleDb.OleDbCommand(Str, cn)
        Dim icount As Integer = cmd.ExecuteNonQuery 
```

我在“cn.Open()”行收到以下错误：

System.Data.dll 中出现“System.InvalidOperationException”类型的第一次机会异常

我也使用连接字符串“Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\ssr2011f\be\ssrAnalysisTWEAK.ACCdb;”得到了这个错误。我的 Windows 版本是 7.0。

为什么连接失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-14T17:41:08.343

我以前在运行 64 位操作系统的计算机上开发时使用 Access 数据库作为后端时看到过类似的错误。

尝试在 Visual Studio 项目的编译选项中明确定位 x86 平台。

在解决方案资源管理器中，右键单击您的项目并选择**属性**

选择**编译**选项卡

单击**高级编译选项**按钮

在**目标 CPU**下拉列表中，选择“x86”（而不是“AnyCPU”）

当我这样做时，我能够毫无错误地执行您的代码（当然将其指向我自己的访问数据库）。

希望能帮助到你。

# c# - 基于键有效地配对列表中的对象

> ID：11086691
> 
> 赞同：0
> 
> 时间：2012-06-18T16:04:59.307
> 
> 标签：c#, arrays, sorting

所以，这就是交易。（我当前的用例是 C#，但我也对一般算法案例感兴趣）给了我两个对象数组（不幸的是，我无法更改创建这些数组的代码）。每个对象都有（作为它的一部分）一个 .Name 属性，一个字符串。这些字符串对于每个对象都是唯一的，并且它们在另一个对象中有零个或一个匹配的字符串。我需要做的是根据该字符串有效地将这些对象配对到某种允许我访问配对对象的集合中。字符串需要完全匹配才能被视为匹配，所以我不需要任何大写或不区分大小写等。遗憾的是，这些列表没有排序。列表本身可能有 30-50 个项目，但我需要连续对数千个这样的数组对重复该算法，因此效率很重要。

由于我知道有 0 或 1 个匹配，并且我知道它们中的大多数将是 1 个匹配，所以我觉得有一个比 x*y 更有效的算法（foreach item in x, foreach item in y, if x=y then x 和 y 是匹配的）

我认为最有可能的选择是：

保留未排序的列表并只执行 x*y，但是一旦找到它们就从列表中删除它们，这样我就不会检查已经找到的项目，或者：将两者都转换为字典，然后对每个进行索引查找（array2 [currentArray1Item]) 或者：自己对列表进行排序（Array.Sort()），然后对数组进行排序，我可能会做一些聪明的事情，比如跳转到 B 中我希望找到它的索引（无论它在 A 中的哪个位置） ) 然后根据字符串向上或向下移动，直到我找到它或通过它应该在的位置。

然后一旦完成，我需要弄清楚如何存储它，我想我可以制作一个只包含对象 A 和 B 的自定义 ObjectPair 类。这里不需要做任何花哨的事情，因为我只是去 ForEach 对.

所以问题是：上述任何算法是否是最快的方法（如果不是，是什么？），是否有一些现有的 C# 结构可以方便地保存找到的对？

**编辑：** Array.Sort() 是一种存在的方法，所以我不需要将数组转换为 List 进行排序。很高兴知道。以上更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:48:11.603

*我的问题是：如果需要我们对两个*输入数组进行排序，我们从特殊处理中获得多少效率？根据[Array.Sort](http://msdn.microsoft.com/en-us/library/6tf1f0bc.aspx)的文档，它是`O(n log n)`平均的，`O(n ^ 2)`在最坏的情况下（快速排序）。一旦我们对两个数组都进行了排序，我们就会进行另一项`O(n)`工作，因为我们必须遍历第一个数组。

我将此解释为意味着由于排序和处理所需的迭代次数，总工作量实际上可能会*增加。*如果您可以在一开始就保证排序数组，那么这当然是另一回事，但正如您所说，您不能。（我还应该注意，您需要创建一个自定义`IComparer<T>`实现以传递给它，`Array.Sort`以便它知道使用该`.Name`属性。这不是运行时工作，但它仍然可以工作:-)

您可能会考虑使用 LINQ 连接，它只对内部数组进行一次迭代（[请参阅此处的伪代码](http://www.hookedonlinq.com/JoinOperator.ashx)）。这与嵌套语句相反，嵌套`foreach`语句将为外部数组的每个元素迭代内部数组。它与一般情况下的效率差不多，并且不会引入您建议的特殊处理的复杂性。

这是一个示例实现：

```
var pairs =
    from item1 in array1
    join item2 in array2 on item1.Name equals item2.Name
    select new { item1, item2 };

foreach(var pair in pairs)
{
    // Use the pair somehow
} 
```

这非常清楚地说明了您对数据所做的事情，并且还为您提供了代表每对的匿名类型（因此您不必发明配对）。如果你最终选择了不同的路线，我会对它与这种方法的比较感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:29:10.550

使用方法对第二个数组进行排序，然后使用`Array.Sort`匹配第二个数组中的对象。`Array``Binary Search Algorithm`

通常，对于 30-50 个项目，这将比蛮力 x*y 快一点。

# javascript - onsubmit 返回 false 时仍然提交

> ID：11086692
> 
> 赞同：3
> 
> 时间：2012-06-18T16:04:59.047
> 
> 标签：javascript, html, jquery-mobile

我在创建一个简单的 html 登录页面时遇到问题，当我提交带有无效凭据的登录表单时，即使我的验证方法正在执行“return false”命令，该表单仍会提交。我知道这个问题已经在这里被问过很多次了，但是这些问题的答案都没有帮助我。

我的html表单如下：

```
<form onSubmit="return validateForm();" method="get" action="TestPage.html">
    <div id="centralPoint" class="frame">
        <select id="centralPointSelect" data-inline="true" data-mini="true" data-native-menu="false" name="centralPoint"></select>
    </div>
    <div id="credentialsFrame" class="frame">
        <input id="userField" type="text" name="Username" />
        <input id="passField" type="password" name="Password" />
    </div>
    <div id="errorMsg"></div>
    <input id="loginBtn" type="submit" value="Login" />
    <div id="rememberMe" class="frame">
        <input type="checkbox" id="checkbox-1" class="custom" data-mini="true" name="rememberMe" />
        <label for="checkbox-1">Keep me signed in</label>
    </div>
    <div id="forgotPassFrame">
        <input id="forgotPass" type="button" data-mini="true" value="Forgot password?" />
    </div>
</form> 
```

这是我的javascript方法。请注意，即使这里唯一的代码行是“return false;”。表单仍然提交。我还检查了 firebug 以确保该方法实际上正在被调用并且它确实返回 false，并且一切都检查出来了。

```
function validateForm()
{
    var usernameTxt = $("#userField").attr("value");
    var passwordTxt = $("#passField").attr("value");

    if (usernameTxt == "" || passwordTxt == "" || (usernameTxt == userLbl && passwordTxt == passLbl))
    {
        $("#errorMsg").html("Please enter a username and password.");
        return false;
    }
} 
```

有什么很明显的我想念的吗？除了您在 html 表单标记中看到的内容之外，我没有以任何方式绑定 onsubmit 事件，也没有将任何点击处理程序分配给提交按钮。

我正在使用 JQuery mobile 可能是相关的，这有可能对我的表单做一些事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T16:12:19.133

如果您想自己处理表单提交，则需要将`data-ajax="false"`属性添加到`<form>`标签中，以便 jQuery Mobile 不理会它。

> 要防止使用 Ajax 自动处理表单提交，请将`data-ajax="false"`属性添加到表单元素。您还可以通过 ajaxEnabled 全局配置选项完全关闭 Ajax 表单处理。

*来源：http: [//jquerymobile.com/demos/1.1.0/docs/forms/forms-sample.html](http://jquerymobile.com/demos/1.1.0/docs/forms/forms-sample.html)*

这是您的表单的演示，但添加了上述属性：http: [//jsfiddle.net/XtMw9/](http://jsfiddle.net/XtMw9/)

这样做意味着您必须手动提交表单：

```
function validateForm()
{
    var usernameTxt = $("#userField").val();
    var passwordTxt = $("#passField").val();//notice the use of .val() instead of .attr()

    if (usernameTxt == "" || passwordTxt == "" || (usernameTxt == userLbl && passwordTxt == passLbl))
    {
        $("#errorMsg").html("Please enter a username and password.");
        return false;
    }

    var $form = $('form');
    $.ajax({
        url     : $form.attr('action'),
        type    : $form.attr('method'),
        data    : $form.serialize(),
        success : function (response) { ... },
        error   : function (a, b, c) { console.log(b); }
    });
} 
```

**解释**

这是因为默认情况下 jQuery Mobile 将尝试通过 AJAX 提交任何表单。使用该`data-ajax="false"`属性，我们可以告诉 jQuery Mobile 保留一个特定的表单，以便我们自己提交它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:13:57.607

在 validateForm() 函数中，您使用了两个未定义的变量（**userLbl**和**passLbl**）。定义变量的值并检查。

# ios - UILabel 不会换行

> ID：11086694
> 
> 赞同：0
> 
> 时间：2012-06-18T16:05:01.137
> 
> 标签：ios

我的 iOS 应用程序出现问题，并在 UITableViewCell 中获取 UILabel 进行包装。文本显示，但它只会显示在一行上。

这是我的代码：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    UILabel *noteLabel = (UILabel *)[cell.contentView viewWithTag:2];

    NSDictionary *contact = [jsonResults objectAtIndex:indexPath.row];
    noteLabel.lineBreakMode = UILineBreakModeWordWrap;
    noteLabel.numberOfLines = 0;
    noteLabel.text = [contact objectForKey:@"note"];   
    return cell;
} 
```

我相信这个问题与这条线有关：

```
UILabel *noteLabel = (UILabel *)[cell.contentView viewWithTag:2]; 
```

我不确定如何从标签中获取标签，我认为这条线不会让我更改标签属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:38:11.143

您可能需要设置标签的高度：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    UILabel *noteLabel = (UILabel *)[cell.contentView viewWithTag:2];

    NSDictionary *contact = [jsonResults objectAtIndex:indexPath.row];
    noteLabel.lineBreakMode = UILineBreakModeWordWrap;
    noteLabel.numberOfLines = 0;
    noteLabel.text = [contact objectForKey:@"note"];

    //Note: adjust the proper width to be constrained to
    CGSize size = [noteLabel.text sizeWithFont:noteLabel.font forWidth:150 lineBreakMode:noteLabel.lineBreakMode];
    CGRect labelFrame = noteLabel.frame;
    labelFrame.size = size;
    noteLabel.frame = labelFrame; 

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-27T20:42:54.683

自 2012 年以来，时间已经过去了。在当前的 Xcode 5 世界中，如果 numberOfLines 在代码或 Interface Builder 中设置为 0，则会自动扩展多行的高度。可以防止在这种情况下显示多行的一件事是，如果在 Interface Builder 或代码中设置了 AutoLayout 高度约束。在这种情况下，它看起来像一个被截断的标签，但与截断标签相比，它不会以省略号 (...) 结尾。

为了使 AutoLayout 能够按预期运行，您通常不希望为 UILabel 设置更高的高度，除非您知道 UILabel 总是会有多行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-25T01:15:06.457

对我来说不同的是设置标签的preferredMaxLayoutWidth。

[https://developer.apple.com/library/ios/documentation/UIKit/Reference/UILabel_Class/#//apple_ref/occ/instp/UILabel/preferredMaxLayoutWidth](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UILabel_Class/#//apple_ref/occ/instp/UILabel/preferredMaxLayoutWidth)

# ios - GPUImage - 如何为 GPUImageMedianFilter 和 GPUImageGaussianBlurFilter 指定过滤器大小

> ID：11086695
> 
> 赞同：1
> 
> 时间：2012-06-18T16:05:04.940
> 
> 标签：ios, gpu, gpuimage

嗨 GPUImage 社区和布拉德，

我想指定 GPUImageMedianFilter 和 GPUImageGaussianBlurFilter 的过滤器大小（半径）。

指定 GPU 的需求是否值得称赞？还是可以通过 GPUImage 包装器来完成？如果是这样，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T15:45:53.310

这可能不是就这个框架提出具体问题的地方，但我可以回答你。

GPUImageMedianFilter 是硬编码的 3x3 中值滤波器，基于 Morgan McGuire 在 ShaderX6 书中的文章“A Fast, Small-Radius GPU Median Filter”。更多信息可以在[这里](http://graphics.cs.williams.edu/papers/MedianShaderX6/)找到，包括更大半径的版本。尽管这是我发现的最快的实现，但在除最快的 iOS 设备之外的所有设备上运行仍然非常慢，因此增加采样区域只会进一步减慢速度。

GPUImageGaussianBlurFilter 在两个单独的通道中进行 9-hit 简单高斯模糊。blurSize 属性允许您稍微扩大或缩小采样区域，但如果超过 1.5 的乘数，您将开始看到边缘伪影，因为用于模糊大区域的样本太少。我正在研究几种以高性能方式扩展模糊区域的方法，但这是这个特定过滤器的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-04T00:20:22.513

以下是如何计算您选择的像素邻域半径内的中位数：

```
kernel vec4 medianUnsharpKernel(sampler u) {
vec4 pixel = unpremultiply(sample(u, samplerCoord(u)));
vec2 xy = destCoord();
int radius = 3;
int bounds = (radius - 1) / 2;
vec4 sum  = vec4(0.0);
for (int i = (0 - bounds); i <= bounds; i++)
{
    for (int j = (0 - bounds); j <= bounds; j++ )
    {
        sum += unpremultiply(sample(u, samplerTransform(u, vec2(xy + vec2(i, j)))));
    }
}
vec4 mean = vec4(sum / vec4(pow(float(radius), 2.0)));
float mean_avg = float(mean);
float comp_avg = 0.0;
vec4 comp  = vec4(0.0);
vec4 median  = mean;
for (int i = (0 - bounds); i <= bounds; i++)
{
    for (int j = (0 - bounds); j <= bounds; j++ )
    {
        comp = unpremultiply(sample(u, samplerTransform(u, vec2(xy + vec2(i, j)))));
        comp_avg = float(comp);
        median = (comp_avg < mean_avg) ? max(median, comp) : median;
    }
}

return premultiply(vec4(vec3(abs(pixel.rgb - median.rgb)), 1.0)); 
} 
```

步骤简述 1\. 计算 3x3 邻域中源像素周围像素值的均值；2\. 找出同一邻域中小于均值的所有像素的最大像素值。3\. [可选] 从源像素值中减去中间像素值进行边缘检测。

如果您使用中值进行边缘检测，有几种方法可以修改上述代码以获得更好的结果，即混合中值过滤和截断媒体过滤（替代和更好的“模式”过滤）。如果您有兴趣，请询问。

# c# - 如何使用 C# 将具有属性长度的 xml 空元素标签转换为开始标签和结束标签？

> ID：11086704
> 
> 赞同：2
> 
> 时间：2012-06-18T16:05:23.783
> 
> 标签：c#, xml, xslt

我想用属性长度转换 xml 空元素标签

```
<tag length=”3”/>xxxxxxx 
```

进入开始标签和结束标签

```
<tag>xxx</tag>xxxx 
```

使用 C# 或 XSLT

你有想法吗？

从 ：

```
 <comment>
      <opinion id="tag_1" length="93"/>
      Un bon traiteur Findi Traiteur propose un choix de 
      <topicInstance id="tag_2" length="13"/>
      pâtes cuites à la minute et d'
      <topicInstance id="tag_3" length="9"/>
      antipasti.
    </comment> 
```

到 ：

```
 <comment>
      <opinion id="tag_1">
      Un bon traiteur Findi Traiteur propose un choix de 
      <topicInstance id="tag_2">
      pâtes cuites</topicInstance> à la minute et d'
      <topicInstance id="tag_3">
      antipasti</topicInstance>.
      </opinion>
    </comment> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:28:45.023

**这是实现所需处理的完整而简单的转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="*[@length]">
  <xsl:variable name="vFollowingText" select=
  "normalize-space(following-sibling::text()[1])"/>

  <xsl:copy>
   <xsl:apply-templates select="@*[not(name()='length')]"/>
   <xsl:value-of select="substring($vFollowingText, 1, @length)"/>
   <xsl:apply-templates/>
  </xsl:copy>
  <xsl:value-of select="substring($vFollowingText, @length+1)"/>
 </xsl:template>

 <xsl:template match="text()[preceding-sibling::*[1][@length]]"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<comment>
    <opinion id="tag_1" length="93"/>
    Un bon traiteur Findi Traiteur propose un choix de        
    <topicInstance id="tag_2" length="13"/>
    pâtes cuites à la minute et d'       
    <topicInstance id="tag_3" length="9"/>
    antipasti.     
</comment> 
```

**产生了想要的正确结果**：

```
<comment>
  <opinion id="tag_1">Un bon traiteur Findi Traiteur propose un choix de</opinion><topicInstance id="tag_2">pâtes cuites </topicInstance>à la minute et d'<topicInstance id="tag_3">antipasti</topicInstance>.</comment> 
```

**更新**：

在@enguerran 的评论`<opinion>`应该包含其余内容之后，这里是一个转换：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="*[@length]" mode="following">
  <xsl:variable name="vFollowingText" select=
  "normalize-space(following-sibling::text()[1])"/>

  <xsl:copy>
   <xsl:apply-templates select="@*[not(name()='length')]"/>
   <xsl:value-of select="substring($vFollowingText, 1, @length)"/>
   <xsl:apply-templates/>
  </xsl:copy>
  <xsl:value-of select="substring($vFollowingText, @length+1)"/>
 </xsl:template>

 <xsl:template match="*[@length and not(preceding-sibling::*/@length)]">
  <xsl:copy>
   <xsl:apply-templates select="@*[not(name()='length')]"/>
   <xsl:apply-templates select="node()"/>
   <xsl:apply-templates mode="following" select=
    "following-sibling::text()[1] |following-sibling::*" />
  </xsl:copy>
 </xsl:template>
 <xsl:template match="*[preceding-sibling::*[1][@length]] | text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档（上图）时，会产生所需的正确结果**：

```
<comment>
<opinion id="tag_1">
      Un bon traiteur Findi Traiteur propose un choix de
      <topicInstance id="tag_2">pâtes cuites </topicInstance>à la minute et d'<topicInstance id="tag_3">antipasti</topicInstance>.</opinion>
</comment> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T20:44:14.990

这可能在某种程度上满足您的要求：

```
<xsl:template match="comment/opinion|comment/topicInstance">
    <xsl:copy>
        <!-- copy attributes except for "length" -->
        <xsl:for-each select="@*[local-name() != 'length']">
            <xsl:copy/>
        </xsl:for-each>
        <!-- include characters from the following text node -->
        <xsl:value-of select="substring(following-sibling::text()[1], 1, @length)"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="comment/text()">
    <xsl:variable name="previous" select="preceding-sibling::node()[1]"/>
    <!-- strip characters that have been inserted in the previous node -->
    <xsl:value-of select="substring(*, $previous/@length + 1)"/>
</xsl:template> 
```

它不会涵盖所有情况，您需要添加一些检查（例如检查前一个节点是否存在等）。

# google-maps - 谷歌静态地图尺寸差异

> ID：11086705
> 
> 赞同：2
> 
> 时间：2012-06-18T16:05:26.177
> 
> 标签：google-maps, static

我一直在使用这个问题的答案中显示的代码：

[Google Maps V3 - 如何计算给定边界的缩放级别](https://stackoverflow.com/questions/6048975/google-maps-v3-how-to-calculate-the-zoom-level-for-a-given-bounds)

但我似乎无法让我的静态地图正确排列。

在这个链接中，我可以正确计算宽度，但不能正确计算高度。

[http://maps.googleapis.com/maps/api/staticmap?center=30.42997,-91.179745&zoom=11&size=500x600&scale=1&format=png32&maptype=roadmap&sensor=false](http://maps.googleapis.com/maps/api/staticmap?center=30.42997,-91.179745&zoom=11&size=500x600&scale=1&format=png32&maptype=roadmap&sensor=false)

从之前的SO帖子中，高度应该是

`size * 360 / 256 / 2^Zoom`

所以我们插入...

`600 * 360 / 256 / 2^11 = 0.41199`

这意味着我们期望图像的最高纬度为`30.42997 + (0.41199 / 2) = 30.63596`。但是，当您在 Google 地图上绘制该纬度并缩放到相同的缩放级别时，该点远高于我们的图像接收到的点。

关于如何计算谷歌发回的图像高度的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-29T10:15:36.240

纬度是180度，不是360度，所以高度计算应该是

```
height * 180 / 256 / 2^Zoom 
```

# jsf-2 - 为什么和符号 (&) 需要在 JSF 中编码？有没有解决的办法？

> ID：11086709
> 
> 赞同：13
> 
> 时间：2012-06-18T16:05:34.773
> 
> 标签：jsf-2

我的 JSF XHTML 页面上经常有 Javascript，其中包含 &&，我最终不得不将其编码为`&amp;&amp;`

例如，当我将以下内容放在我的 JSF XHTML 页面文件中时：

```
I am an & sign 
```

我得到错误：

```
The entity name must immediately follow the '&' in the entity reference 
```

解决此问题的一种方法似乎是将`&amp;`我认为不希望只写 '&' 的 '&' 更改为。

看来，对于我在 Javascript 中使用“&”的情况，我可以将 Javascript 包装在 CDATA 标记中；当包装在 CDATA 标记中时，我可以编写 '&' 而不必将其转义为`&amp;`，这是一个很好的解决方法，可以在我的页面上拥有更多可读的 Javascript 代码。

但是，当我想在页面上的其他地方使用文字“&”时会发生什么，而它不在`<script>`标签内，因此不能轻易地将代码包装在 CDATA 标签中？对于这些情况，我必须*总是*逃避'&'吗？`&amp;`

注意尝试使用 ' 转义值的能力，但似乎无法解决问题

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-18T19:52:51.497

Facelets 是一种基于 XML 的视图技术。任何由 XML 解析器进行特殊处理的字符都需要进行 XML 转义，以便按字面意思呈现它们。这包括除其他外`<`和`&`. `<`指示 XML 标记的开始，如 此类，`<foo>`指示`&`XML 实体的开始，如`&#38;`。`<`必须转义as和as `&lt;`。`&``&amp;`

不在 Facelets 中转义它们会导致以下异常`<`

> javax.faces.view.facelets.FaceletException: Error Parsing /test.xhtml: Error Traced[line: 42] 元素的内容必须由格式良好的字符数据或标记组成。

以下是`&`

> javax.faces.view.facelets.FaceletException: Error Parsing /test.xhtml: Error Traced[line: 42] 实体名称必须紧跟实体引用中的“&”。

这与 JavaScript 无关，它适用于整个视图，包括“纯文本”。这些字符恰好也是 JavaScript 运算符。没有办法解决这个问题，这就是 XML 的指定方式。然而，在 JavaScript 中，还有另一种方法可以避免转义或使用 CDATA 块：只需将该 JS 代码放在您通过或`.js`加载的自己的文件中。`<script>``<h:outputScript>`

在 EL 中，还有一个`&&`操作符也需要转义`&amp;&amp;`，但幸运的是这个操作符有一个别名，即`and`操作符。

### 也可以看看：

*   [Mozilla 开发者网络 - 为 XHTML 编写 JavaScript](https://developer.mozilla.org/en/Writing_JavaScript_for_XHTML)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:22:27.027

这是因为 & 是 XML 中的特殊字符：[http ://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-23T22:09:16.430

仅供参考，我试图在我的 JSF 页面中写 (c) 字符。当我写 © 时出现错误：“copy is referenced but not declared” 当我写 © 我得到了原始字符串。

我可以使用 unicode 表示法显示特殊字符：©

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-06-06T09:18:14.427

这段代码对我有用：

```
<h:outputText value="&amp;copy;" escape="false" /> 
```

# javascript - 更改滚动体的一个刻度所覆盖的滚动距离

> ID：11086711
> 
> 赞同：1
> 
> 时间：2012-06-18T16:05:37.063
> 
> 标签：javascript, jquery, css, scroll, distance

我正在寻找一种解决方案来获得这种效果： http: [//www.socketstudios.com](http://www.socketstudios.com)

因此，您不仅滚动 1 或 2 像素，而且滚动 1080 甚至更好的 100%。

有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:12:36.297

您的示例网站没有按照您的要求进行操作。

在示例中，他们使用 JavaScript 为滚动到视野之外的图像设置动画，因此看起来它们正在飞向远处。在禁用 JavaScript 的情况下查看它，您会发现实际上并没有一个大页面可供滚动（实际上它相当空）。

要执行您实际要求的是控制面板中可用的 Windows 设置：

![鼠标设置](../Images/5a3069ebaf2e9ed3d0395899e2b2012e.png)

# c# - 在编码 UI 测试中仅知道部分窗口标题时查找窗口

> ID：11086713
> 
> 赞同：6
> 
> 时间：2012-06-18T16:05:43.053
> 
> 标签：c#, visual-studio-2010, coded-ui-tests

我正在为其编写编码 UI 测试的应用程序有一个窗口，其中部分窗口标题基于为临时文件生成的随机文件名，因此测试只能知道窗口标题的静态部分。

有时，当没有其他窗口打开时，测试运行良好。但是，当其他窗口打开时，这有点问题。如果其他窗口具有类似的控件，则测试选择在哪个窗口中工作是不可预测的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-18T16:05:43.427

我已将其缩小为：搜索控件时，编码 UI 测试使用搜索属性和控件的树状结构。如果它找不到完全匹配，它会找到一个紧密匹配（因此它找不到确切的窗口标题名称，它会排除它并继续搜索与任何其他给定属性匹配的窗口），这就是它与控件一起使用的原因在其他窗口中。

解决方案实际上是为其提供更多搜索属性。我使用的一种方法是使用[PropertyExpression](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.uitesting.propertyexpression.aspx)添加属性并将其传递给[PropertyExpressionOperator.Contains](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.uitesting.propertyexpressionoperator)。

例如，我记录了打开 MS Word 并关闭它。这会在 UIMap 中生成一个控件，在其构造函数中如下：

```
this.SearchProperties[WinWindow.PropertyNames.Name] = "Document1 - Microsoft Word";
this.SearchProperties[WinWindow.PropertyNames.ClassName] = "OpusApp"; 
```

相反，第一行应该是：

```
this.SearchProperties.Add(new PropertyExpression(WinWindow.PropertyNames.Name, "Microsoft Word", PropertyExpressionOperator.Contains)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-03T21:29:48.103

甚至更简单，您可以使用：

```
this.SearchProperties.Add(WinWindow.PropertyNames.Name, "Microsoft Word", PropertyExpressionOperator.Contains); 
```

# javascript - jQuery从主干中选择脚本标签内的标记

> ID：11086715
> 
> 赞同：1
> 
> 时间：2012-06-18T16:05:44.503
> 
> 标签：javascript, jquery, backbone.js

我正在使用 Backbone.js，模板位于脚本标签中。我有一个使用 jQuery 选择器迭代所有输入字段的插件。它没有在脚本标签中获取输入。

任何想法如何从脚本标签内定义的html获取属性？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T17:57:23.780

`<script>`就 DOM 而言，元素本质上是黑盒子，它们只保存 DOM 不关心的数据（具体来说，它们保存[不可替换的字符数据](http://www.w3.org/TR/html-markup/script.html)，而不是标记）。因此，如果您这样做`$('input')`，您将找不到元素内部的 s，因为 s 内部没有任何元素`<input>`，`<script>`只有包含字符序列的字符数据（即字符串）。`<input>``<script>``'<', 'i', 'n', 'p', 'u', 't', ...`

例如，如果您有以下 HTML：

```
<div></div>
<script id="tmpl" type="text/x-underscore-template">
    <input name="{{name}}">
</script>​ 
```

然后这个：

```
console.log('divs: ' + $('div').length);
console.log('inputs: ' + $('input').length); 
```

会告诉你有 1`<div>`和 0 `<input>`，它会说实话。如果您需要查看内部`<script>`，则必须手动将字符数据转换为 HTML，例如：

```
var $inputs_in_script = $($('#tmpl').html()).filter('input'); 
```

的长度为`$inputs_in_script`一。

演示：http: [//jsfiddle.net/ambiguous/64kjq/](http://jsfiddle.net/ambiguous/64kjq/)

如果您正在`<script>`使用模板引擎处理您的 s ，那么您必须在模板引擎为您提供的 HTML 上调用您的插件。然后插件会找到`<input>`s，因为它们将是真实的`<input>`元素，而不是看起来像`<input>`元素的字符串。

# python - matplotlib 在缩放时将 x 轴与自动缩放的 y 轴相关联

> ID：11086724
> 
> 赞同：16
> 
> 时间：2012-06-18T16:06:08.337
> 
> 标签：python, matplotlib

如何创建一堆带有链接（共享）x 轴的图，这些图在缩放期间自动缩放所有“从属”图的 y 轴？例如：

```
import matplotlib.pyplot as plt
fig = plt.figure()
ax1 = fig.add_subplot(211)
ax2 = fig.add_subplot(212, sharex=ax1)
ax1.plot([0,1])
ax2.plot([2,1])
plt.show() 
```

当我放大 ax1 时，这也会更新 ax2 的 x 轴（到目前为止一切都很好），但我还希望 ax2 的 y 轴根据现在可见的数据范围自动缩放。所有自动缩放设置都打开（默认设置）。创建 ax2 后手动设置自动缩放设置没有帮助：

```
ax2.autoscale(enable=True, axis='y', tight=True)
ax2.autoscale_view(tight=True, scalex=False, scaley=True)

print ax2.get_autoscaley_on()
-> True 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-19T14:37:11.403

在研究了 matplotlib 的 axes.py 的血腥细节之后，似乎没有根据数据视图自动缩放轴的规定，因此没有高级方法来实现我想要的。

但是，有 'xlim_changed' 事件，可以附加回调：

```
import numpy as np

def on_xlim_changed(ax):
    xlim = ax.get_xlim()
    for a in ax.figure.axes:
        # shortcuts: last avoids n**2 behavior when each axis fires event
        if a is ax or len(a.lines) == 0 or getattr(a, 'xlim', None) == xlim:
            continue

        ylim = np.inf, -np.inf
        for l in a.lines:
            x, y = l.get_data()
            # faster, but assumes that x is sorted
            start, stop = np.searchsorted(x, xlim)
            yc = y[max(start-1,0):(stop+1)]
            ylim = min(ylim[0], np.nanmin(yc)), max(ylim[1], np.nanmax(yc))

        # TODO: update limits from Patches, Texts, Collections, ...

        # x axis: emit=False avoids infinite loop
        a.set_xlim(xlim, emit=False)

        # y axis: set dataLim, make sure that autoscale in 'y' is on 
        corners = (xlim[0], ylim[0]), (xlim[1], ylim[1])
        a.dataLim.update_from_data_xy(corners, ignore=True, updatex=False)
        a.autoscale(enable=True, axis='y')
        # cache xlim to mark 'a' as treated
        a.xlim = xlim

for ax in fig.axes:
    ax.callbacks.connect('xlim_changed', on_xlim_changed) 
```

不幸的是，这是一个非常低级的 hack，很容易破坏（除 Lines、reverse 或 log 轴之外的其他对象，......）

在axes.py中似乎不可能挂钩到更高级别的功能，因为更高级别的方法不会将emit = False参数转发给set_xlim()，这是避免在set_xlim()和'xlim_changed' 回调。

此外，似乎没有统一的方法来确定水平裁剪对象的垂直范围，因此在axes.py中有单独的代码来处理线、补丁、集合等，这些都需要在回调中复制.

在任何情况下，上面的代码都对我有用，因为我的情节中只有线条，而且我对tight=True 布局感到满意。似乎只需对 axes.py 进行一些更改，就可以更优雅地适应此功能。

**编辑：**

我错了无法连接到更高级别的自动缩放功能。它只需要一组特定的命令来正确分隔 x 和 y。我更新了代码以在 y 中使用高级自动缩放，这应该使其更加健壮。特别是，tight=False 现在可以工作（毕竟看起来好多了），并且反向/对数轴不应该成为问题。

剩下的一个问题是确定各种对象的数据限制，一旦被裁剪到特定的 x 范围。这个功能应该是内置在 matplotlib 中的，因为它可能需要渲染器（例如，如果放大到屏幕上只剩下 0 或 1 个点，上面的代码就会中断）。Axes.relim() 方法看起来是个不错的候选。如果数据已更改，则应该重新计算数据限制，但目前仅处理行和补丁。Axes.relim() 可能有可选参数，用于指定 x 或 y 中的窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-12T21:44:56.173

我不知道正确的协议，但我最近使用这个答案重新调整了一些有一些填充之间的时间序列数据。以下是我为启用它所做的更改。我敢打赌，8年后会有一些更简单的方法来做到这一点......

```
def on_xlim_changed(ax):
    xlim = ax.get_xlim()
    for a in ax.figure.axes:
        # shortcuts: last avoids n**2 behavior when each axis fires event
        if a is ax or len(a.lines) == 0 or getattr(a, 'xlim', None) == xlim:
            continue

        ylim = np.inf, -np.inf
        for l in a.lines:
            x, y = l.get_data()
            if np.issubdtype(x.dtype, np.datetime64):
                # convert dates to numbers so searchsorted works
                x = matplotlib.dates.date2num(x)
            # faster, but assumes that x is sorted
            start, stop = np.searchsorted(x, xlim)
            yc = y[max(start-1,0):(stop+1)]
            ylim = min(ylim[0], np.nanmin(yc)), max(ylim[1], np.nanmax(yc))

        for c in a.collections:
            for p in c.get_paths():
                vertices = p.vertices
                x, y = vertices[:, 0], vertices[:, 1]
                # x won't be sorted when you pull path vertices
                yc = y[(x >= xlim[0]) & (x <= xlim[1])]
                ylim = min(ylim[0], np.nanmin(yc)), max(ylim[1], np.nanmax(yc))

        # TODO: update limits from Patches, Texts, ...

        # x axis: emit=False avoids infinite loop
        a.set_xlim(xlim, emit=False)

        # y axis: set dataLim, make sure that autoscale in 'y' is on 
        corners = (xlim[0], ylim[0]), (xlim[1], ylim[1])
        a.dataLim.update_from_data_xy(corners, ignore=True, updatex=False)
        a.autoscale(enable=True, axis='y')
        # cache xlim to mark 'a' as treated
        a.xlim = xlim 
```

# objective-c - boolValue 没有将 NSString 转换为 BOOL

> ID：11086725
> 
> 赞同：1
> 
> 时间：2012-06-18T16:06:27.110
> 
> 标签：objective-c, ios, json, boolean

我知道这种怀疑可能是愚蠢的错误。我从 JSON 字符串中获取一个变量，它的状态为 1 或 0。如果我使用第一种方法（代码 1）它可以工作。但是，如果我使用第二种方法（Cord 2），我总是不会。我不知道我做错了什么。如果问题太愚蠢，请原谅我。

**电源线 1：**

```
NSDictionary *drivingAlertResponse = [jsonResponseString objectFromJSONString];
BOOL isEnabled;
        if ([[drivingAlertResponse valueForKey:@"alertStatus"] intValue] > 0) {
            isEnabled = TRUE;
        }else{
            isEnabled = FALSE;
        } 
```

**电源线 2：**

```
BOOL isEnabled = [[[NSString stringWithFormat:@"%i",[drivingAlertResponse valueForKey:@"alertStatus"]] isEqualToString:@"1"]? @"TRUE": @"FALSE"   boolValue]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T16:13:55.687

我只会使用 NSString 的[boolValue 方法](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/index.html#//apple_ref/occ/instp/NSString/boolValue)。你可以像这样使用它：

```
NSDictionary *drivingAlertResponse = [jsonResponseString objectFromJSONString];
BOOL isEnabled = [[drivingAlertResponse valueForKey:@"alertStatus"] boolValue]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:10:22.990

`%i`不是[有效的格式说明符](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265-SW1)。要格式化整数，您应该使用`%d`. `[drivingAlertResponse valueForKey:@"alertStatus"]`然而，在你这样做的时候，当它仍然是一个对象（可能是一个 NSString 或一个 NSNumber）时，你正试图格式化为一个整数。*对象*的说明符是`%@`。但是，您可以简单地`[[drivingAlertResponse valueForKey:@"alertStatus"] boolValue]`完成它，因为 NSNumber 和 NSString 都有一个 boolValue 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T16:13:34.440

```
BOOL value = YES = TRUE = 1 and value = NO = FALSE = 0 
```

做这个：

```
BOOL isEnabled = [[NSString stringWithFormat:@"%@",[drivingAlertResponse valueForKey:@"alertStatus"]] intValue]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T16:12:43.627

你为什么用%i？如果值为 0 或 1，则应使用 %d。

你可以试试：

```
BOOL isEnabled = [drivingAlertResponse valueForKey:@"alertStatus"] != 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T16:17:07.790

我会用

```
int returnBoolInt = [[drivingAlertResponse valueForKey:@"alertStatus"] intValue];

BOOL isEnabled = [[NSNumber numberWithInt:returnBoolStr] boolValue]; 
```

# php - PHP SQL 在 Foreach() 中合并记录

> ID：11086726
> 
> 赞同：-1
> 
> 时间：2012-06-18T16:06:28.213
> 
> 标签：php, sql

我正在重新审视这一点，因为我正在处理另一个我想使用相同概念的页面。 [此页面](http://www.flcbranson.org/estherssistershusband.php)显示了我当前从我的 MSSQL 服务器获得的输出。

我有一张我们的活动发生的场地信息表（名称、地址等）。另外，我有一个计划的实际事件表（一个事件可能在一天内和/或多天发生多次）。我通过查询加入这些表（如下所示）。

```
<?php
try {
    $dbh = new PDO("sqlsrv:Server=localhost;Database=Sermons", "", "");
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $sql = "SELECT TOP (100) PERCENT dbo.TblSermon.Day, dbo.TblSermon.Date, dbo.TblSermon.Time, dbo.TblSermon.Speaker, dbo.TblSermon.Series, dbo.TblSermon.Sarasota, dbo.TblSermon.NonFlc, dbo.TblJoinSermonLocation.MeetingName, dbo.TblLocation.Location, dbo.TblLocation.Pastors, dbo.TblLocation.Address, dbo.TblLocation.City, dbo.TblLocation.State, dbo.TblLocation.Zip, dbo.TblLocation.Country, dbo.TblLocation.Phone, dbo.TblLocation.Email, dbo.TblLocation.WebAddress
        FROM dbo.TblLocation RIGHT OUTER JOIN dbo.TblJoinSermonLocation ON dbo.TblLocation.ID = dbo.TblJoinSermonLocation.Location RIGHT OUTER JOIN dbo.TblSermon ON dbo.TblJoinSermonLocation.Sermon = dbo.TblSermon.ID
        WHERE (dbo.TblSermon.Date >= { fn NOW() })
        ORDER BY dbo.TblSermon.Date, dbo.TblSermon.Time";
    $stmt = $dbh->prepare($sql);
    $stmt->execute(); 
    $stmt->setFetchMode(PDO::FETCH_ASSOC);
    foreach ($stmt as $row) {
        echo "<pre>";
        print_r($row);
        echo "</pre>";
    }
    unset($row);
    $dbh = null;
}
catch(PDOException $e) {
    echo $e->getMessage();
}
?> 
```

因此，当它遍历查询结果时，它会为每条记录创建一个数组。

```
Array
(
    [Day] => Tuesday
    [Date] => 2012-10-30 00:00:00.000
    [Time] => 07:00 PM
    [Speaker] => Keith Moore
    [Location] => The Ark Church
    [Pastors] => Alan & Joy Clayton
    [Address] => 450 Humble Tank Rd.
    [City] => Conroe
    [State] => TX
    [Zip] => 77305.0
    [Phone] => (936) 756-1988
    [Email] => info@thearkchurch.com
    [WebAddress] => http://www.thearkchurch.org
)
Array
(
    [Day] => Wednesday
    [Date] => 2012-10-31 00:00:00.000
    [Time] => 07:00 PM
    [Speaker] => Keith Moore
    [Location] => The Ark Church
    [Pastors] => Alan & Joy Clayton
    [Address] => 450 Humble Tank Rd.
    [City] => Conroe
    [State] => TX
    [Zip] => 77305.0
    [Phone] => (936) 756-1988
    [Email] => info@thearkchurch.com
    [WebAddress] => http://www.thearkchurch.org
)
Array
(
    [Day] => Tuesday
    [Date] => 2012-11-06 00:00:00.000
    [Time] => 07:00 PM
    [Speaker] => Keith Moore
    [Location] => Fellowship Of Faith Christian Center
    [Pastors] => Michael & Joan Kalstrup
    [Address] => 18999 Hwy. 59
    [City] => Oakland
    [State] => IA
    [Zip] => 51560.0
    [Phone] => (712) 482-3455
    [Email] => ffcc@frontiernet.net
    [WebAddress] => http://www.fellowshipoffaith.cc
)
Array
(
    [Day] => Wednesday
    [Date] => 2012-11-14 00:00:00.000
    [Time] => 07:00 PM
    [Speaker] => Keith Moore
    [Location] => Faith Family Church
    [Pastors] => Michael & Barbara Cameneti
    [Address] => 8200 Freedom Ave NW
    [City] => Canton
    [State] => OH
    [Zip] => 44720.0
    [Phone] => (330) 492-0925
    [Email] => 
    [WebAddress] => http://www.myfaithfamily.com
) 
```

我想要做的是以某种方式组合这些数组，以便不会每次都重复场地信息，而是显示每个日期/时间。

我尝试以数组样式输入它，但无法为它找出合适的多维性。我只是粘贴我希望它显示的方式，因为这就是它的最终结果。

```
The Ark Church
    Contact:
        Alan & Joy Clayton
        450 Humble Tank Rd.
        Conroe, TX  77305
        (936) 756-1988
        info@thearkchurch.com
        http://www.thearkchurch.org
    Meetings:
        Tuesday, 2012-10-30 07:00 PM
        Wednesday, 2012-10-31 07:00 PM

Fellowship Of Faith Christian Center
    Contact:
        Michael & Joan Kalstrup
        18999 Hwy. 59
        Oakland, IA  51560
        (712) 482-3455
        ffcc@frontiernet.net
        http://www.fellowshipoffaith.cc
    Meetings:
        Tuesday, 2012-11-06 07:00 PM

Faith Family Church
    Contact:
        Michael & Barbara Cameneti
        8200 Freedom Ave NW
        Canton, OH  44720
        (330) 492-0925
        http://www.myfaithfamily.com
    Meetings:
        Wednesday, 2012-11-14 07:00 PM 
```

它不一定要以那样结束，但它应该很好地了解我在寻找什么。

我不一定*要*创建一个新数组。**我**只是不想一遍又一遍地显示相同的信息。

我在想我可以进行某种形式的比较，`foreach()`其中说的是“如果位置与以前的位置相同”，但我还没有弄清楚如何去做（有没有办法缓存以前的变量做`$location1 = [Location]`, `$location2 = [Location]`, 等等...？

有一点要注意...

这些示例没有不同的扬声器，但有时会有。我希望能够以某种方式访问​​扬声器。我假设我希望它绑定到实际事件。

JJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:15:14.727

一种技术：如果你有这样的循环：

```
while ($row = $query->fetch(PDO::FETCH_NUM) ) {
    list($time,$place,$etc) = $row;
    // display formatted data
} 
```

试试这个：

```
$row = $query->fetch();
do {
    list($time,$place,$etc) = $row;
    $row = $query->fetch(PDO::FETCH_NUM);
    if ($time != $row[0] && $place != $row[1] && $etc != $row[2]) {
        // display formatted data
    }
} while ($row); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:20:03.483

我通常会通过创建一个二维数组来解决这样的问题，该数组按日期然后 ID 进行索引，或者在您的情况下按 ID 然后日期进行索引。

循环遍历事件（第一个维度）并打印出该事件的内容 - 在那里循环遍历该事件的日期并将其打印为列表，如您的示例所示。

# regex - 双字的正则表达式

> ID：11086729
> 
> 赞同：3
> 
> 时间：2012-06-18T16:06:43.913
> 
> 标签：regex, repeat

我正在尝试编写一个正则表达式来检测重复两次的单词，例如， `greatgreat`或`appleapple`。我找不到任何方法来做到这一点，经过数小时的尝试，我将其发布在这里，看看是否有人可以提供帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-18T16:12:01.133

试试这个（RegExr 上的例子）[：](http://regexr.com?319n6)

```
(\w+)\1 
```

如果你想确保整个刺痛是一个双字添加锚：

```
^(\w+)\1$ 
```

有关更多信息，请参阅文档 - [“用于分组和反向引用的圆括号”](http://www.regular-expressions.info/brackets.html)。

# java - 在休眠时截断/删除

> ID：11086734
> 
> 赞同：0
> 
> 时间：2012-06-18T16:07:04.003
> 
> 标签：java, hibernate

我在使用时遇到问题`DELETE FROM myEntity`

我在我的数据库上看到所有条目都消失了，但是当我尝试插入以前存在的条目时，它仍然有我删除它之前的记录。

这是代码：

```
static SessionFactory session = NewHibernateUtil.getSessionFactory();

public Session membukaSession(){
  return session.openSession();
}

public void clearRencanaPesan(){
    Session sess = this.membukaSession();
    Query query = sess.createQuery("delete from Rencanapesan");
    query.executeUpdate();
} 
```

所以我尝试使用截断

这是代码：

```
public void clearRencanaPesan(){
    Session sess = this.membukaSession();
    Query query = sess.createQuery("TRUNCATE Table Rencanapesan");
    query.executeUpdate();
} 
```

这个根本不工作@@，条目没有被删除。

这是错误

`Jun 18, 2012 11:01:54 PM org.hibernate.hql.ast.ErrorCounter reportError SEVERE: line 1:1: unexpected token: TRUNCATE Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: node to traverse cannot be null!`

请帮助我，我怎样才能截断或删除所有条目。
太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T22:45:44.797

您提供的查询没有错误。我的第一个猜测是会话在使用查询手动删除后不同步。[Session.flush()](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#flush%28%29)确保会话与底层数据库同步。

```
public void clearRencanaPesan(){
    Session sess = this.membukaSession();
    Query query = sess.createQuery("delete from Rencanapesan");
    query.executeUpdate();
}
// after you've made your changes and before closing the session.
sess.flush(); 
```

# java - java.lang.ClassNotFoundException: org.quartz.DisallowConcurrentExecution

> ID：11086736
> 
> 赞同：3
> 
> 时间：2012-06-18T16:07:06.950
> 
> 标签：java, jakarta-ee, netbeans, quartz-scheduler

我开发了一些执行石英作业的代码。起初代码在 tomcat 之外并且执行得很好，但是当我尝试将相同的代码嵌入到 Web 应用程序中时，我得到 java.lang.NoClassDefFoundError: org/quartz /禁止并发执行。我正在使用石英 2.1.5，它已经在类路径中。这是堆栈跟踪：

```
Exception in thread "DefaultQuartzScheduler_QuartzSchedulerThread" java.lang.NoClassDefFoundError: org/quartz/DisallowConcurrentExecution
INFO: Illegal access: this web application instance has been stopped already.  Could not load org.quartz.DisallowConcurrentExecution.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
        at org.quartz.impl.JobDetailImpl.isConcurrentExectionDisallowed(JobDetailImpl.java:390)
java.lang.IllegalStateException
        at org.quartz.simpl.RAMJobStore.acquireNextTriggers(RAMJobStore.java:1447)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1273)
        at org.quartz.core.QuartzSchedulerThread.run(QuartzSchedulerThread.java:264)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
Caused by: java.lang.ClassNotFoundException: org.quartz.DisallowConcurrentExecution
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1387)
        at org.quartz.impl.JobDetailImpl.isConcurrentExectionDisallowed(JobDetailImpl.java:390)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1233)
        at org.quartz.simpl.RAMJobStore.acquireNextTriggers(RAMJobStore.java:1447)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
        at org.quartz.core.QuartzSchedulerThread.run(QuartzSchedulerThread.java:264) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:51:03.123

确保你的类路径中只有 1 个quartz-all-.jar（也许你的 Tomcat lib 文件夹中有 2 : 1 + 你的战争中有 1 个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:32:04.420

`NoClassDefFoundError`s 指向类路径中缺少的 JAR 或类。在这种情况下，问题很可能是在 Tomcat 中`quartz-<ver>.jar`，当您实际需要`quartz-all-<ver>.jar`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-26T05:44:22.337

对于使用 maven 的人，可以通过 add 使用新版本

```
 <dependency>
        <groupId>org.quartz-scheduler</groupId>
        <artifactId>quartz</artifactId>
        <version>2.1.7</version>
    </dependency> 
```

# android - Android Webview - 缩放到设备宽度后底部的空白区域

> ID：11086738
> 
> 赞同：3
> 
> 时间：2012-06-18T16:07:22.690
> 
> 标签：android, android-layout, webview, scrollbar, scale

我正在使用以下代码缩放我的 webview 以使内容适合屏幕的宽度：

```
webView.getSettings().setLoadWithOverviewMode(true);
webView.getSettings().setUseWideViewPort(true);
webView.getSettings().setBuiltInZoomControls(true); 
```

这可行，但现在我在内容底部得到了一个空白空间。空白空间的大小（高度）与它正在执行的缩放大小成正比。所以对于更小的设备，尺寸更大。

我的感觉是缩放生效后不会重新计算滚动条的大小。这个假设是因为当通过点击屏幕放大和缩小时，空白空间消失了。虽然这适用于 Android 2.3，但不适用于 4.0。

我的问题是如何在缩放后强制滚动条重新计算。或者有没有其他的解决方案。

谢谢。

PS这是我在xml中定义webview的方式

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#FFFFFF" >

    <WebView
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/web_view"
                android:background="#AAFFFFFF"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />

</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T16:48:49.550

首先，为什么在滚动视图中的线性布局中有一个 webview？一个 WebView 继承自 scrollView 并实现它自己的滚动，那么另一个滚动视图是干什么用的呢？本质上，您将在滚动条中拥有滚动条！！！其次，我确实看到您拥有`"wrap_content"`WebView 的`android:layout_height`属性。

# python - 通过谷歌应用引擎上的代理获取 url

> ID：11086740
> 
> 赞同：1
> 
> 时间：2012-06-18T16:07:31.350
> 
> 标签：python, google-app-engine

我有一个用 python 编写的关于 google-app-engine 的应用程序。我想通过代理从我的应用程序中获取 url。我找到了两种从 appengine 获取远程 url 的方法：

1.  使用[urlfetch](https://developers.google.com/appengine/docs/python/urlfetch/)
2.  使用python内置的urllib2

查看 urlfetch 的文档，我没有找到任何设置代理的方法。所以我开始玩 urllib2。我试过这个：

```
class MainHandler(webapp.RequestHandler):
    def get(self):
        proxy_handler = urllib2.ProxyHandler({'http': "210.246.88.46:8080",})
        opener = urllib2.build_opener(proxy_handler)
        resp = opener.open("http://whatsmyuseragent.com/", timeout=20)
        self.response.out.write(resp.read()) 
```

但看起来 appengine 忽略了代理并使用自己的 ip 获取 url。在结果页面中显示应用程序的 ip，而不是代理的 ip。在[文档](https://developers.google.com/appengine/docs/python/urlfetch/overview#Request_Headers)中说，无法更改 ip。我想，这意味着我无法以某种方式手动更改 HTTP 标头中的 ip，但我仍然可以使用代理。

但是，我想确切地知道，是否可以通过 appengine 上的代理获取 url 并停止打破我的头:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-12T23:28:39.957

我认为这是此处提到的 App-Engine 中的错误

[https://code.google.com/p/googleappengine/issues/detail?id=544](https://code.google.com/p/googleappengine/issues/detail?id=544)

票已关闭，但据我所知，该错误仍然存​​在（在 SDK 1.9.8 上）

人们已经为我还没有尝试过的 Java 和 Python 引擎编写了一些代码/补丁

# coffeescript - Coffeescript 和基于标记的 JS 执行

> ID：11086741
> 
> 赞同：0
> 
> 时间：2012-06-18T16:07:32.493
> 
> 标签：coffeescript, markup

从这里的另一个线程中，我发现了这个关于基于标记的 JS 执行 Garber-Irish 解决方案的精彩教程：

[http://www.viget.com/inspire/extending-paul-irishs-comprehensive-dom-ready-execution/](http://www.viget.com/inspire/extending-paul-irishs-comprehensive-dom-ready-execution/)。

我正在检查如何在 Coffeescript 中完成部分操作。

这工作正常：

```
SITENAME.surveys.show = ->
  alert "Hello CoffeeScript" 
```

呈现：

```
SITENAME.surveys.show = function() {
  return alert("Hello CoffeeScript");
}; 
```

这个不太开心：

```
SITENAME.surveys.new = ->
  alert "Hello CoffeeScript"

SITENAME.surveys["new"] = function() {
  return alert("Hello CoffeeScript");
}; 
```

我是 Coffeescript 的新手，现在正在学习 codeschool.com 课程。我猜“new”关键字对于咖啡脚本来说是特别的。

有什么解决方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:12:23.097

`new`在 JavaScript 中是特殊的，CoffeeScript 意识到了这一点，因此它发出的代码实际上可以工作，即使使用保留关键字命名方法是不好的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:41:55.453

如果需要使用`new`，可以使用`[]`来定义函数：

```
SITENAME.surveys['new'] = ->
  alert "Hello CoffeeScript" 
```

并称之为：

```
SITENAME.surveys['new']() 
```

演示：http: [//jsfiddle.net/ambiguous/Y3qnt/](http://jsfiddle.net/ambiguous/Y3qnt/)

快速查看您的链接表明您将通过以下方式访问该功能：

```
controller = 'surveys'
action     = 'new'
SITENAME[controller][action]() 
```

因此，调用什么方法并不重要，因为无论如何您总是会通过它们的（字符串）名称来引用它们。

# apache - 如何使用 proxy_mod 配置 apache 以进行域重定向

> ID：11086743
> 
> 赞同：1
> 
> 时间：2012-06-18T16:07:36.903
> 
> 标签：apache, apache2, mod-proxy

我有一台只有一个 IP 地址但有很多域（和子域）的服务器，但每个域在我的主机服务器上都有专用的虚拟机。

我尝试将 mod_proxy 用于 ProxyPass 和 Reverse 请求，并且在 apache conf 中我做到了：

```
<VirtualHost *:80>
        ServerAlias mydomain.domain.com
        ProxyRequests Off
        <Proxy />
                Order deny,allow
                Allow from all
                ProxyPass http://192.168.1.8/
                ProxyPassReverse http://192.168.1.8/
        </Proxy>
        LogLevel warn
        CustomLog ${APACHE_LOG_DIR}/access.log combined
        ErrorLog ${APACHE_LOG_DIR}/error.log
</VirtualHost>

<VirtualHost *:80>
        ProxyRequests Off
        ServerAlias domain.domain2.org
        ServerAlias subdomanin.domain.com
        DocumentRoot /var/www
        <Directory /var/www/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>
        LogLevel warn
        CustomLog ${APACHE_LOG_DIR}/access.log combined
        ErrorLog ${APACHE_LOG_DIR}/error.log
</VirtualHost> 
```

在这个conf中：

```
domain.domain1.com -> go to 192.168.1.8
subdomanin.domain1.com and another domain  -> go to document root. 
```

使用 ProxyRequests On 和“Allow from All”（此 conf），apache 是一个 openproxy ...使用此配置（和 ProxyRequest Off），如果有人使用代理 mydomain.domain.com 请求“www.google.it”，他不会没有谷歌，但服务器将其重定向到 myNumericIp

如果[http://mydomain.domain.com/some](http://mydomain.domain.com/some)请求使用 url [http://my.Numeric.Ip/some](http://my.Numeric.Ip/some) otherwise 代理不响应任何内容重定向到 myNumericIp，那么正确的配置是什么）。

我试试这个：

```
<Proxy http://mydomain.domain.com/>
        Order deny,allow
        Allow from all
        ProxyPass http://192.168.1.8/
        ProxyPassReverse http://192.168.1.8/
</Proxy> 
```

或这个：

```
<Proxy />
        Order deny,allow
        Allow from all
        ProxyPass http://192.168.1.8/
        ProxyPassReverse http://192.168.1.8/
</Proxy>
<Proxy *>
        Order deny,allow
        Deny from all
</Proxy> 
```

但是不要工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-15T21:18:33.173

使用以下步骤：

**1）更新虚拟文件： -**

> ```
> <VirtualHost *:80>
> ServerAdmin admin@test.com
> ServerName mysite.com
> ServerAlias www.mysite.com   ProxyRequests Off Order deny,allow Allow from all  <Location />
>     ProxyPass http:// mysite.com:8000/
>     ProxyPassReverse http:// mysite.com:8000/
> </Location> 
> ```

**2) 启用必要的 Apache 模块**

要启用这四个模块，请依次执行以下命令。

> sudo a2enmod 代理
> 
> sudo a2enmod proxy_http
> 
> sudo a2enmod proxy_balancer
> 
> sudo a2enmod lbmethod_byrequests

**3) 要使这些更改生效，请重新启动 Apache。**

> sudo systemctl 重启 apache2

# c++ - 如果 float 和 double 不准确，银行如何进行涉及货币的准确计算？

> ID：11086748
> 
> 赞同：8
> 
> 时间：2012-06-18T16:07:55.700
> 
> 标签：c++, currency, bank

目前正在学习 C++，而这正是我刚刚想到的。我只是对此感到好奇，因为我即将开发一个简单的银行程序。我将`double`用于计算美元/利率等，但计算机计算和人工计算之间存在一些微小差异。

我想现实世界中那些额外的 .pennies 可以让一切变得不同！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-18T16:10:01.583

在许多情况下，财务计算是使用定点算法而不是浮点数来完成的。

例如，.NET`Decimal`类型或 VB6`Currency`类型。这些基本上只是整数类型，每个人都同意单位是美分的几分之一，比如 $.0001。

是的，必须进行一些舍入，但它是非常系统地完成的。通常，四舍五入规则在合同细则的某处深处（利率为 x%，每 T 复利一次，四舍五入到最接近的一美分，但每个报表周期不少于 $y）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:23:23.410

8 字节长的范围是：-9223372036854775808 最大值：9223372036854775807 以数千美分/美分的价格完成所有操作，您仍然可以处理高达数万亿美元/磅/任何数量的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T17:30:06.510

这取决于应用程序。当您以美元和美分（或任何当地货币）输出时，所有带小数的计算都需要四舍五入：文章的基本价格可能只有小数点后两位数，但当您加上销售税或增值税时，有会更多，如果您需要计算投资利息，还会更多。

一般来说，使用`double`结果会得到最准确的结果，但是……如果您的软件被用于法律要求的某种簿记（例如，出于税收目的），您可能需要遵循公认的标准舍入做法，这些做法是基于在十进制算术上，而不是二进制、十六进制或八进制（这是浮点的常用基础——二进制在除大型机之外的所有东西上都是通用的）。在这种情况下，您需要使用某种`Decimal` 类来确保正确的舍入。对于其他用途（例如风险分析），`double`很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T16:12:53.300

仅仅因为一个数字不是整数并不意味着它不能被精确计算。考虑到如果计算便士（美分）的数量，美元和美分的值是一个整数，因此对于使用两位小数精度的定点库来说，只需将每个数字乘以 100 是一件简单的事情，执行计算为整数，然后再除以 100。

# hadoop - 在写入期间拆分文件

> ID：11086750
> 
> 赞同：0
> 
> 时间：2012-06-18T16:07:58.420
> 
> 标签：hadoop, mapreduce, hadoop-streaming

大师！

很长一段时间我找不到以下问题的答案：hadoop 如何在写入过程中拆分大文件。示例：1) 块大小 64 Mb 2) 文件大小 128 Mb（平面文件，包含文本）。

当我写文件时，它将被分成两部分（文件大小/块大小）。但是... Block1 之后的*可能出现* 将在... word300 word301 **wo** 和 Block 2 将开始 **rd302** word303 ... 写案例将是

Block1 将在 ... word300 word301 结束，Block 2 将从 word302** word303 ...

或者你可以在写hadoop拆分算法的地方链接。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:49:47.447

该文件将根据字节任意拆分。因此，它可能会将其拆分为`wo`and之类的东西`rd302`。

这不是您通常需要担心的问题，而是系统的设计方式。MapReduce 作业的`InputFormat`和`RecordReader`部分处理在记录边界之间拆分的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:53:47.503

查看[这个](http://wiki.apache.org/hadoop/HadoopMapReduce)wiki 页面，hadoop`InputFormat`将读取 FileSplit 的最后一行超出分割边界，并且当读取第一个 FileSplit 以外的内容时，它会忽略直到第一个换行符的内容。

# python - 读取具有未知编码的非 ASCII 字符的文本文件

> ID：11086752
> 
> 赞同：15
> 
> 时间：2012-06-18T16:08:07.780
> 
> 标签：python, encoding

我想读取一个包含**German 而不仅仅是 characters**的文件。我发现我可以这样做

```
 >>> import codecs
  >>> file = codecs.open('file.txt','r', encoding='UTF-8')
  >>> lines= file.readlines() 
```

当我尝试在 Python IDLE 中运行我的工作时，这是有效的，但是当我尝试从其他地方运行它时不会给出正确的结果。有想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-18T16:33:32.360

您需要知道文本是用哪种字符编码进行编码的。如果您事先不知道，可以尝试使用[chardet](http://pypi.python.org/pypi/chardet)模块进行猜测。首先安装它：

```
$ pip install chardet 
```

然后，例如以二进制模式读取文件：

```
>>> import chardet
>>> chardet.detect(open("file.txt", "rb").read())
{'confidence': 0.9690625, 'encoding': 'utf-8'} 
```

那么：

```
>>> import codecs
>>> import unicodedata
>>> lines = codecs.open('file.txt', 'r', encoding='utf-8').readlines() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T17:28:09.003

我相信文件被正确读取，但在输出时使用了错误的编码。这是基于您在 IDLE 中获得正确结果的事实。

我建议尝试使用`print(line.encode('utf-8'))`，但恐怕我不知道 Python 3 是否会`bytes`正确打印对象。

# php - php类函数没有正确返回给调用者

> ID：11086754
> 
> 赞同：1
> 
> 时间：2012-06-18T16:08:12.227
> 
> 标签：php, return

**背景**
我正在为 TeraWURFL 编写一个新的数据库连接器文件，它将使用 PDO 扩展名。有关这方面的更多详细信息，请查看

**详细信息**
我添加了一个新的数据库连接器 -`TeraWurflDatabase_MySQL5_Mine.php`并在配置文件中定义了相同的 - `TeraWurflConfig.php`（TeraWURFL 已经有许多连接器文件，配置文件中的值决定使用哪个连接器） -

```
public static $DB_CONNECTOR = "MySQL5_Mine"; 
```

然后我编写了一个测试脚本来对新`TeraWurflDatabase_MySQL5_Mine.php`类文件的所有功能进行单元测试，以确保它们在更改后返回相同的值。我在测试脚本中遇到问题。

一切正常，但内部`TeraWurflDatabase_MySQL5_Mine.php`调用的一个函数出了点问题`rebuildCacheTable()`。当我从我的测试脚本调用这个函数时，控制不会在该函数内的 return 语句之后返回到我的测试脚本。-

测试脚本中的代码`test_connector.php`-

```
/*file inclusiong start*/
require_once '/var/cake_1.2.0.6311-beta/app/webroot/Tera-Wurfl_PDO/TeraWurfl.php';
    require_once '/var/cake_1.2.0.6311-beta/app/webroot/Tera-Wurfl_PDO/TeraWurflConfig.php';

    require_once '/var/cake_1.2.0.6311-beta/app/webroot/Tera-Wurfl_PDO/DatabaseConnectors/TeraWurflDatabase.php'; //this file is same on both setups
    require_once '/var/cake_1.2.0.6311-beta/app/webroot/Tera-Wurfl_PDO/TeraWurflLoader.php';
    require_once '/var/cake_1.2.0.6311-beta/app/webroot/Tera-Wurfl_PDO/UserAgentFactory.php';
    require_once '/var/cake_1.2.0.6311-beta/app/webroot/Tera-Wurfl_PDO/UserAgentUtils.php';
    require_once '/var/cake_1.2.0.6311-beta/app/webroot/Tera-Wurfl_PDO/WurflConstants.php';
    require_once '/var/cake_1.2.0.6311-beta/app/webroot/Tera-Wurfl_PDO/WurflSupport.php';
    require_once '/var/cake_1.2.0.6311-beta/app/webroot/Tera-Wurfl_PDO/UserAgentMatchers/UserAgentMatcher.php';

    require_once '/var/cake_1.2.0.6311-beta/app/webroot/Tera-Wurfl_PDO/DatabaseConnectors/TeraWurflDatabase_MySQL5_Mine.php';
/*file inclusiong end*/

    $wurflDbPdoObj = new TeraWurflDatabase_MySQL5_Mine();
    $wurflDbPdoObj->connect();
    $dbObj = $wurflDbPdoObj;
    echo "before call";
    var_dump($dbObj->rebuildCacheTable());
    echo "after call"; //this does not execute if new TeraWurfl() object is initiated below 
```

和里面的代码`TeraWurflDatabase_MySQL5_Mine`-

```
class TeraWurflDatabase_MySQL5_Mine extends TeraWurflDatabase{
    ...
    ...

    public function rebuildCacheTable(){
       $rebuilder = new TeraWurfl(); //if this object is initiated, return does not happen properly
       return true; //this does not return properly. 

   }
} 
```

**到目前为止我的调试**

我验证了发起的对象`$rebuilder = new TeraWurfl();`是正确的对象。

我可以缩小到这一点，如果`$rebuilder = new TeraWurfl();`里面的线`TeraWurflDatabase_MySQL5_Mine`被移除，return 可以正常工作。

此外，如果我调用现有连接器类的相同函数`TeraWurflDatabase_MySQL5`（我包含`TeraWurflDatabase_MySQL5.php`而不是`TeraWurflDatabase_MySQL5_Mine.php`在文件包含部分和 make 中`public static $DB_CONNECTOR = "MySQL5";`），也不会有这样的问题 -

```
 $wurflDbPdoObj = new TeraWurflDatabase_MySQL5();
 $wurflDbPdoObj->connect();
 $dbObj = $wurflDbPdoObj;
 echo "before call";
 var_dump($dbObj->rebuildCacheTable());
 echo "after call"; //works 
```

我还比较了在这两种情况下（新的和现有的）`var_dump()`创建的对象的值。那里没发现问题。`$rebuilder = new TeraWurfl();``TeraWurflDatabase_MySQL5_mine.php``TeraWurflDatabase_MySQL5.php`

我不知道我的代码有什么问题。任何的想法？？

**更新**
进一步发现问题出在`TeraWurfl.php`类的构造函数内部。构造函数再次启动数据库连接器类的对象——

```
public function __construct()
{
    ...
    $dbconnector = 'TeraWurflDatabase_'.TeraWurflConfig::$DB_CONNECTOR; //return fails if this object is initiated
    if($this->db === false) $this->db = new $dbconnector;
    ...
} 
```

`var_dump()`与现有的数据库连接器案例相比，没有错误/警告出现并且看起来很好。该数据库连接器类的对象也已启动。

**更新 #2 - 分析输出我按照**[http://kpayne.me/2012/02/04/use-register_tick_function-to-profile-your-code/](http://kpayne.me/2012/02/04/use-register_tick_function-to-profile-your-code/)
中提到的步骤设置代码分析，稍作修改也可以显示输出中的类名，这是输出 -

对测试脚本进行分析`TeraWurflDatabase_MySQL5_Mine`-

```
Array
(
    [TeraWurfl ->__construct] => Array
        (
            [time] => 9.0599060058594E-5
            [calls] => 8
        )

    [TeraWurflDatabase_MySQL5_Mine ->__construct] => Array
        (
            [time] => 4.3630599975586E-5
            [calls] => 4
        )

    [TeraWurflDatabase_MySQL5_Mine ->connect] => Array
        (
            [time] => 0.00010228157043457
            [calls] => 6
        )

    [TeraWurflDatabase_MySQL5_Mine ->rebuildCacheTable] => Array
        (
            [time] => 7.8678131103516E-6
            [calls] => 1
        )

    [show_profile] => Array
        (
            [time] => 1.7881393432617E-5
            [calls] => 1
        )

) 
```

但是对于现有的类`TeraWurflDatabase_MySQL5`，我并没有得到函数调用的细节，这又奇怪了——

```
Array
(
    [show_profile] => Array
        (
            [time] => 0.00024199485778809
            [calls] => 1
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T08:33:43.187

在这种情况下，即使不`xdebug`使用以下命令，您也可以调试流程：

```
declare(ticks=1);
register_tick_function(function(){
    $debug = debug_backtrace();
    echo "Running on line " . $debug[0]['line'] . " in file " . $debug[0]['file'] . "\n"; 
}); 
```

**编辑：** *实际上，我的例子很糟糕，所以我只留下了重要的部分。*

# facebook - Facebook Graph API 限制

> ID：11086755
> 
> 赞同：0
> 
> 时间：2012-06-18T16:08:16.857
> 
> 标签：facebook, graph

我需要尽可能实时地定期获取 Facebook 页面的点赞数量。

最初的计划是使用 cronjob 调用 Graph API。 [http://graph.facebook.com/SomeCrazyPage](http://graph.facebook.com/SomeCrazyPage)

现在我的问题是.. 这些电话的时间/金额限制是多少？或者我可以在不被“阻止”的情况下对图表进行多少/经常调用？

这不是我的 Facebook 页面，也不是打算用作 FB 应用程序，而是存储在数据库中以监控喜欢，直到此页面达到 20K 喜欢。

还有其他建议或更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:39:23.930

您可以使用 Facebook 的[实时更新 API](http://developers.facebook.com/docs/reference/api/realtime/)。

并订阅页面喜欢事件。因此，只要页面有新的赞，您就会自动收到有关更改的报告。

所以你不需要一直 ping 到 Facebook 服务器。

而且你也不需要担心任何速率限制。

# c - 需要帮助理解 C 中的循环代码

> ID：11086759
> 
> 赞同：10
> 
> 时间：2012-06-18T16:08:48.180
> 
> 标签：c

考虑 C 中的以下代码：

```
void main()
{
    int a=0;

    for(printf("\nA"); a; printf("\nB"));

    printf("\nC");
    printf("\nD");     
} 
```

当我使用 Turb C++ 3.0 版和 gcc-4.3.4 编译它时，我得到以下两种情况的输出：

```
A
C
D 
```

但是，如果我编译以下代码：

```
void main()
{
    for(printf("\nA"); 0; printf("\nB"));

    printf("\nC");
    printf("\nD");
} 
```

gcc-4.3.4 的输出与前一种情况相同，但 turbo c++ 3.0 产生以下输出：

```
A
B
C
D 
```

首先，我不知道这里发生了什么！另外，为什么 gcc 编译器的输出对于两个代码是相同的，但是在 turboc++ 3.0 编译器的情况下，输出是不同的？有人可以阐明一下吗？

编辑 ：

其实有人在IT公司的面试中被问到这个问题，当他没有给出答案时，面试官给出了这个解释。但我觉得这很愚蠢。您如何要求某人使用“错误”，就好像它是该语言提供的“设施”一样？为了将其称为“设施”和“技术”，无论我们在第二个表达式中将 0 作为文字传递还是将值为 0 的变量传递，结果应该是相同的。

我是否认为面试官非常愚蠢地提出这样的问题并且这表明他的无能是错误的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T16:15:46.573

第二个例子的 TCC 输出是错误的。

来自 C99 标准：

> 该声明
> 
> **for (** *子句 1* **;** *表达式 2* **;** *表达式 3* **)** *语句*
> 
> 行为如下： 表达式*expression-2*是在每次执行循环体之前计算的控制表达式。每次执行循环体后，表达式*expression-3*被评估为 void 表达式。*[...]*

显然，这里没有迭代，所以永远不应该执行*表达式 3 。*

同样，在 C90 标准中（或至少在[我发现的草案中](http://flash-gordon.me.uk/ansi.c.txt)），它说：

> 除了循环体中 continue 语句的行为外，该语句
> 
> ```
>  for (  expression-1 ;  expression-2 ;  expression-3 )  statement 
> ```
> 
> 和语句的顺序
> 
> ```
>  expression-1 ;
>      while ( expression-2) {
>                statement
>               expression-3 ;
>      } 
> ```
> 
> 是等价的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T16:19:45.200

Turbo C++ 3.0 于 1990 年代发布，随后很快发布了 3.1。

我猜你的古老编译器有很多错误，这些错误更新很快。此外，它可能*没有*这样的错误，但可能已经发出了优化的组件，在新的管道内衬架构下失败了。

无论如何，**保证**您当前的平台*不支持*Turbo C++ 3.0 。当涉及到由于平台是在近 20 年后创建的而不受支持的编译器时，您不能因为发出错误的程序而真正责怪它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-18T16:20:48.513

gcc 输出是正确的。

第一种情况下的 Turbo C++ 3.0 输出是正确的。

第二种情况下的 TurboC++ 3.0 输出是错误的。

您似乎在 Turbo C++ 3.0 编译器中发现了导致错误代码生成的边缘情况。

C 或 C++ 中的 for-stmt 具有一般语法

> for ( 初始化 ; 测试 ; 重新初始化 ) stmt

初始化在循环开始之前执行一次。测试在循环的顶部执行。如果测试为真，则执行 stmt，然​​后重新初始化，循环重复。

In your case, printf("\nA") is the initialization, a (or 0) is the test, printf("\nB") is the reinitialization, and the stmt is empty.

You should have seen the A (and you did). The test should have failed on the first pass, meaning you should never have seen the stmt (but you don't know), and you should never have seen the B. This is where Turbo C++ 3.0 screwed up on the second test.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T16:16:27.220

[C（以及其他兼容的情况下）中完整的“for”循环语法是什么？](https://stackoverflow.com/questions/276512/what-is-the-full-for-loop-syntax-in-c-and-others-in-case-they-are-compatible)

这个问题引用了标准的适用部分。除非循环至少执行一次，否则不应评估第三个表达式。所以，我想说，在第二种情况下，旧编译器打印'B'是错误的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T16:20:16.433

的语义`for`是评估第一个表达式（初始化器）然后评估第二个表达式（终止符）然后如果终止符评估为非零，则执行 for 的主体，然后评估第三个表达式（前进）并返回评估终结者。

由于您没有正文，因此该部分等于未评估任何表达式。基于此，循环应按如下方式执行：

```
printf("\nA");
a; // yields 0 -> terminate loop 
```

这确实是发生的事情。

在您的第二个示例中，应该发生相同的情况（对于*gcc*也是如此），因为 0 评估为 0。

*turbo C++* （看到 0 常量）可能会尝试执行某种循环展开优化（但未能正确执行）

# sql - 如何加快缓慢的 UPDATE 查询

> ID：11086761
> 
> 赞同：7
> 
> 时间：2012-06-18T16:08:55.563
> 
> 标签：sql, postgresql

我有以下`UPDATE`查询：

```
UPDATE Indexer.Pages SET LastError=NULL where LastError is not null; 
```

目前，此查询大约需要 93 分钟才能完成。我想找到让这更快一点的方法。

该`Indexer.Pages`表有大约 506,000 行，其中大约 490,000 行包含 的值`LastError`，所以我怀疑我可以利用这里的任何索引。

该表（未压缩时）包含大约 46 gigs 的数据，但大部分数据位于名为`html`. 我相信简单地加载和卸载这么多页面会导致速度变慢。一个想法是创建一个*只有*`Id`和字段的新表`html`，并保持`Indexer.Pages`尽可能小。然而，测试这个理论将是相当多的工作，因为我实际上没有硬盘空间来创建表的副本。我必须将它复制到另一台机器上，删除表，然后将数据复制回来，这可能需要整个晚上。

想法？我正在使用 Postgres 9.0.0。

**更新：**

这是架构：

```
CREATE TABLE indexer.pages
(
  id uuid NOT NULL,
  url character varying(1024) NOT NULL,
  firstcrawled timestamp with time zone NOT NULL,
  lastcrawled timestamp with time zone NOT NULL,
  recipeid uuid,
  html text NOT NULL,
  lasterror character varying(1024),
  missingings smallint,
  CONSTRAINT pages_pkey PRIMARY KEY (id ),
  CONSTRAINT indexer_pages_uniqueurl UNIQUE (url )
); 
```

我也有两个索引：

```
CREATE INDEX idx_indexer_pages_missingings
  ON indexer.pages
  USING btree
  (missingings )
  WHERE missingings > 0; 
```

和

```
CREATE INDEX idx_indexer_pages_null
  ON indexer.pages
  USING btree
  (recipeid )
  WHERE NULL::boolean; 
```

此表上没有触发器，并且还有另一个表具有 FK 约束`Pages.PageId`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T18:19:28.687

@kgrittn[作为评论发布的](https://stackoverflow.com/questions/11086761/how-to-speed-up-a-slow-update-query#comment14516590_11086761)内容是迄今为止最好的答案。我只是在填写细节。

在你做*任何*其他事情之前，你*应该将* [PostgreSQL](https://www.postgresql.org/support/versioning/)[**升级**](https://www.postgresql.org/support/versioning/)到当前版本，至少升级到你的主要版本的最后一个安全版本。[请参阅项目指南。](https://www.postgresql.org/support/versioning/)

我还想强调一下 Kevin 提到的关于该列的**索引**`LastError`。通常，**HOT 更新**可以回收数据页上的死行并使更新更快 - 有效地消除（大部分）对清理的需要。有关的：

*   [更新语句中的冗余数据](https://stackoverflow.com/questions/7806058/redundant-data-in-update-statements/7806610#7806610)

如果您的列*以任何方式在任何索引中*使用，则 HOT UPDATE 将被禁用，因为它会破坏索引。如果是这种情况，您应该能够通过在您之前删除所有这些索引并稍后重新创建它们来大大加快查询速度*。*`UPDATE`

在这种情况下，运行多个较小的 UPDATE 会有所帮助： ***如果***...
... 更新的列不涉及任何索引（启用 HOT 更新）。...在*多个*事务`UPDATE`中很容易分为多个补丁。...这些补丁中的行分布在表格上（物理上，而不是逻辑上）。...没有其他并发事务阻止死元组被重用。

 *然后你不需要`VACCUUM`在多个补丁之间进行，因为 HOT 更新可以直接重用死元组 - 仅来自*先前*事务的死元组，而不是来自相同或并发事务的死元组。您可能想`VACUUM`在操作结束时安排 a ，或者让自动吸尘完成它的工作。

可以对不需要的任何其他索引进行相同的操作`UPDATE`- 并且从您的数字来看，`UPDATE`无论如何都不会使用索引。如果您更新表的大部分内容，从头开始构建新索引比使用每个更改的行增量更新索引要快得多。

此外，您的更新不太可能破坏任何**外键约束**。您也可以尝试删除并重新创建它们。这确实打开了一个不会强制执行参照完整性的时隙。`UPDATE`如果在尝试重新创建 FK 时违反了完整性，则会出现错误。如果您在*一个*事务中完成所有操作，并发事务永远不会看到删除的 FK，但您会在表上获得写锁定 - 与删除/重新创建索引或触发器相同）

最后，[禁用和启用](http://www.postgresql.org/docs/current/interactive/sql-altertable.html)**更新不需要的[**触发器。**](http://www.postgresql.org/docs/current/interactive/sql-altertable.html)**

 **确保在一次交易中完成所有这些。也许在一些较小的补丁中进行，所以它不会阻塞并发操作太久。

所以：

```
BEGIN;
ALTER TABLE tbl DISABLE TRIGGER user; -- disable all self-made triggers
-- DROP indexes (& fk constraints ?)
-- UPDATE ...
-- RECREATE indexes (& fk constraints ?)
ALTER TABLE tbl ENABLE TRIGGER user;
COMMIT; 
```

您不能`VACUUM`在事务块内运行。[根据文档：](http://www.postgresql.org/docs/current/interactive/sql-vacuum.html)

> `VACUUM`不能在事务块内执行。

您可以将您的操作分成几个大块并在其间运行：

```
VACUUM ANALYZE tbl; 
```

如果您不必处理并发事务，则可以（甚至更有效）：

```
ALTER TABLE tbl DISABLE TRIGGER user; -- disable all self-made triggers
-- DROP indexes (& fk constraints ?)

-- Multiple UPDATEs with logical slices of the table
-- each slice in its own transaction.
-- VACUUM ANALYZE tbl;  -- optionally in between, or autovacuum kicks in

-- RECREATE indexes (& fk constraints ?)
ALTER TABLE tbl ENABLE TRIGGER user; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:50:22.830

```
UPDATE Indexer.Pages 
  SET LastError=NULL
  ; 
```

不需要 where 子句，因为 NULL 字段已经是 NULL，因此再次将它们设置为 NULL 不会有害（我认为这不会显着影响性能）。

鉴于您的 number_of_rows = 500K 并且您的表大小 = 46G，我得出的结论是您的**平均**行大小为 90KB。那是巨大的。也许您可以将表的 {unused, sparse} 列移动到其他表？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:15:10.640

你的理论可能是正确的。阅读完整的表格（然后做任何事情）可能会导致速度变慢。

为什么不创建另一个具有 PageId 和 LastError 的表？使用您现在拥有的表中的数据对其进行初始化（这应该花费不到 93 分钟）。然后，使用新表中的 LastError。

闲暇时，您可以从现有表中删除 LastError。

顺便说一句，我通常不建议将列的两个副本保存在两个单独的表中。但是，在这种情况下，您听起来像是被卡住了，需要一种方法来继续。***

# javascript - Google Maps Javascript API V3 滚动响应不如简单的 google map embed

> ID：11086763
> 
> 赞同：1
> 
> 时间：2012-06-18T16:09:08.043
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在开发一个商店定位器网络应用程序，但滚动有问题。只有当我滚动非常激烈时，滚动/缩放才有效。

这个问题也在他们的演示代码上：
[https ://developers.google.com/maps/documentation/javascript/examples/](https://developers.google.com/maps/documentation/javascript/examples/)
[https://google-developers.appspot.com/maps/documentation/javascript/examples/map-简单的](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple)

但是，如果您在[http://maps.google.com/](http://maps.google.com/)上滚动，滚动效果会非常好。

你知道有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:56:02.393

在我对 OP 的评论中说：

我在 IE8 和地图 api v3 中观察到了这一点。这是由于瓷砖淡入淡出，据我所知，所以我嗅探浏览器，如果我的用户使用的是 IE8，我会为他们提供 v2 地图，其中滚动/缩放效果要好得多。据我所知，在 v3 中缩放/平移时无法关闭磁贴褪色

# java - Java中的递减

> ID：11086765
> 
> 赞同：5
> 
> 时间：2012-06-18T16:09:12.083
> 
> 标签：java

```
int result = 5;    
result = result--;  
System.out.println(result); 
```

为什么结果等于 5？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-18T16:11:34.423

因为表达式`result--`的值是减量`result` *前的值。*然后`result`递减，最后将表达式的值分配给`result`（覆盖递减）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-18T16:11:51.367

这什么都不做：

```
 result = result--; 
```

因为`result--`在递减之前返回结果的值（相反，`--result`在递减之后返回结果的值）。并且由于右侧的部分在`=`之前执行`=`，因此您基本上会减少结果，然后在同一行上将结果设置为减少之前的值，从而在实践中取消它。

所以你可以写

```
 result = --result; 
```

但是，如果您想减少结果，只需执行

```
result--; 
```

（或者`--result;`但是单独使用它是非常不寻常和非典型的，当您不想使用表达式的结果而只是想递减时不要这样做）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-18T16:11:44.657

非常有效的问题！

您的代码不起作用，因为`result--`仅在替换之后执行`=`。如果您使用前缀运算符，您的代码将起作用：

```
result = --result; 
```

但是，这没有任何意义，因为您可以简单地编写：

```
--result; 
```

有关更详尽的解释，请参阅[有关前缀/后缀运算符如何在 Java 上工作的问题/答案](https://stackoverflow.com/questions/5413548/java-prefix-postfix-of-increment-decrement-operators-need-help-with-example)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-18T16:12:56.653

这是令人困惑的结构。它与

```
int tmp = result;
result--;  
result = tmp; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-18T16:16:14.220

您正在使用后减运算符。这是因为你在写`result--`但不是`--result`。表达式的值`result--`是 的副本`result`，它是在递减*之前定义的。*这就是为什么它被称为*后*减量。

`result--`定义表达式的值后，`result`递减。**但是：**在此之后，表达式 ( )`result`的值将覆盖 5 的值。`result--``result = 5`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-18T16:14:08.183

result-- 是 post decrement .. 这意味着该值首先分配给 result 然后递减。

您可能会发现此[答案](https://stackoverflow.com/questions/1094872/is-there-a-difference-between-x-and-x-in-java)很有帮助。

我相信你想要做的是：

```
int result = 5;     
result--; 
System.out.println(result); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-18T16:15:28.563

更改为前缀增量以获得所需的结果，或删除赋值语句：

```
int result = 5;
result = --result;
System.out.println(result); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-18T16:16:02.630

尝试

结果=--结果；它将打印 4，您将了解 c-- 和 --c 之间的差异是什么

# cocoa - Cocoa 检查是否使用了键盘快捷键

> ID：11086768
> 
> 赞同：0
> 
> 时间：2012-06-18T16:09:18.603
> 
> 标签：cocoa, keyboard-shortcuts

我有一个用户指定的全局热键，想检查并确保它不会与其他应用程序发生冲突。是否有任何 API 可以向其他应用程序询问其快捷方式，或者我是否卡在手动检查所选快捷方式是否为常用快捷方式（Cmd+v、Cmd+C 等）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:27:41.560

您必须询问响应者链，特别是 [NSResponder tryToPerform:with:] 方法将返回是否有任何处理您的操作。不用担心其他应用在做什么，只需检查用户的快捷方式是否已在使用中即可。

tryToPerform:with: 尝试使用指定的参数执行操作指示的方法。

*   (BOOL)tryToPerform:(SEL)anAction with:(id)anObject 参数 anAction 标识操作方法的选择器。anObject 用作​​操作方法的唯一参数的对象。返回值 如果没有找到响应 anAction 的响应者，则返回 NO，否则返回 YES。

讨论 如果接收者响应一个Action，它会调用以anObject 作为参数的方法并返回YES。如果接收者没有响应，它会将此消息发送给具有相同选择器和对象的下一个响应者。

可用性 在 OS X v10.0 及更高版本中可用。另见 - doCommandBySelector: sendAction:to:from: (NSApplication) 在 NSResponder.h 中声明

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nsresponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/tryToPerform:with](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nsresponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/tryToPerform:with)：

# android - 如何将现有的 MS Access 移植到 SQLite 以用于 Android 应用程序开发？

> ID：11086770
> 
> 赞同：7
> 
> 时间：2012-06-18T16:09:26.063
> 
> 标签：android, database, sqlite, ms-access, port

> **可能重复：**
> [如何在 Android 中将 MDB 转换为 SQLite](https://stackoverflow.com/questions/7657115/how-to-convert-mdb-to-sqlite-in-android)

我有一个 MS Access 数据库，里面有几个表和相当多的数据。我想知道我是否可以将所有这些表移植到我正在开发的 android 应用程序的 sqlite 上。

谢谢你的时间

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T16:31:45.823

最简单的方法是将每个表导出为 CSV，然后使用某种 SQLite 工具将这些表导入 SQLite 数据库。我使用[SQLite 专家](http://www.sqliteexpert.com/)。

然后，您需要对该数据库和这些表进行一些修改，以使其可供 Android 用于填充列表视图和其他小部件。

1）数据库必须包含一个名为“android_metadata”的表
2）该表必须有“locale”列
3）表中应该有一个值为“en_US”的记录
4）每个表需要的主键被称为“_id”（这是为了让 Android 知道在哪里绑定表的 id 字段）

然后你把数据库放在你的资产文件夹中，当你的应用程序开始时，将它复制到你的应用程序数据目录中。

这个复制过程的一个很好的链接是[here](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)。

您还可以使用[SQLiteAssetHelper](https://github.com/jgilfelt/android-sqlite-asset-helper)来处理数据库从资产到数据目录的传输，而不是按照教程显示的方式进行操作。

# php - PHP函数使用外部变量

> ID：11086773
> 
> 赞同：74
> 
> 时间：2012-06-18T16:09:55.750
> 
> 标签：php, function, variables

```
function parts($part) { 
    $structure = 'http://' . $site_url . 'content/'; 
    echo($tructure . $part . '.php'); 
} 
```

此函数使用`$site_url`在此页面顶部定义的变量，但此变量未传递到函数中。

我们如何让它在函数中返回？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2012-06-18T16:11:24.237

**添加第二个参数**

您需要将其他参数传递给您的函数：

```
function parts($site_url, $part) { 
    $structure = 'http://' . $site_url . 'content/'; 
    echo $structure . $part . '.php'; 
} 
```

**在关闭的情况下**

如果您更愿意使用闭包，那么您可以将变量导入当前范围（`use`关键字）：

```
$parts = function($part) use ($site_url) { 
    $structure = 'http://' . $site_url . 'content/'; 
    echo $structure . $part . '.php'; 
}; 
```

**`global`- 一个不好的做法**

这篇文章经常被阅读，所以需要澄清一些事情`global`。使用它被认为是一种不好的做法（请参阅[this](https://stackoverflow.com/questions/8715897/why-is-it-considered-bad-practice-to-use-global-reference-inside-functions)和[this](https://stackoverflow.com/questions/1557787/are-global-variables-in-php-considered-bad-practice-if-so-why)）。

为了完整起见，这里是使用的解决方案`global`：

```
function parts($part) { 
    global $site_url;
    $structure = 'http://' . $site_url . 'content/'; 
    echo($structure . $part . '.php'); 
} 
```

它之所以有效，是因为您必须告诉解释器您要使用全局变量，现在它*认为*它是一个局部变量（在您的函数内）。

推荐阅读：

*   [PHP中的变量范围](http://php.net/manual/en/language.variables.scope.php)
*   [匿名函数](https://secure.php.net/manual/en/functions.anonymous.php)

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-06-18T16:13:15.000

`use`或者，您可以通过使用带有关键字的闭包从外部范围引入变量。

```
$myVar = "foo";
$myFunction = function($arg1, $arg2) use ($myVar)
{
 return $arg1 . $myVar . $arg2;
}; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-09-22T17:32:26.557

不要忘记您也可以通过`use`引用传递这些变量。

用例是当您需要`use`从回调内部更改 'd 变量时（例如，从某些源对象数组生成不同对象的新数组）。

```
$sourcearray = [ (object) ['a' => 1], (object) ['a' => 2]];
$newarray = [];
array_walk($sourcearray, function ($item) use (&$newarray) {
    $newarray[] = (object) ['times2' => $item->a * 2];
});
var_dump($newarray); 
```

现在`$newarray`将包括*（为简洁起见，此处为伪代码）* `[{times2:2},{times2:4}]`。

相反，`$newarray`不带`&`修饰符使用会使外部`$newarray`变量在闭包范围内只读访问。但是`$newarray`在闭包范围内将是一个完全不同的新创建的变量，它只存在于闭包范围内。

尽管两个变量的名称相同，但它们将是两个不同的变量。在这种情况下，外部`$newarray`变量将`[]`在代码完成后包含。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-12-23T22:10:28.103

我想这取决于您的架构以及您可能需要考虑的其他任何内容，但您也可以采用面向对象的方法并使用[class](https://www.php.net/manual/en/book.classobj)。

```
class ClassName {

    private $site_url;

    function __construct( $url ) {
        $this->site_url = $url;
    }

    public function parts( string $part ) {
        echo 'http://' . $this->site_url . 'content/' . $part . '.php';
    }

    # You could build a bunch of other things here
    # too and still have access to $this->site_url.
} 
```

然后，您可以在任何您喜欢的地方创建和使用该对象。

```
$obj = new ClassName($site_url);
$obj->parts('part_argument'); 
```

* * *

对于 OP 想要实现的目标来说，这可能有点矫枉过正，但它至少是我想为新手提出的一个选项，因为还没有人提到它。

这里的优势是可扩展性和包容性。例如，如果您发现自己需要将相同的变量作为对多个函数的引用传递给一个共同的任务，这可能表明一个类是有序的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-08T11:38:29.633

我有类似的问题。答：使用**全局**。还有其他选择。但是，如果您需要使用外部范围的*命名函数，那么我有：*

```
global $myNamedFunctionWidelyAccessibleCallableWithScope;
$myNamedFunctionWidelyAccessibleCallableWithScope =
    function ($argument) use ($part, $orWhatYouWant) {
        echo($argument . $part . '.php');
        // do something here
        return $orWhatYouWant;
    };
function myNamedFunctionWidelyAccessible(string $argument)
{
    global $myNamedFunctionWidelyAccessibleCallableWithScope;
    return $myNamedFunctionWidelyAccessibleCallableWithScope($argument);
} 
```

它有助于使函数*myNamedFunctionWidelyAccessible*从任何地方都可访问，但也将它与范围绑定。而且我故意给了很长的名字，全球的东西都是邪恶的:(

这是[一个很好的例子的文档](https://www.php.net/manual/en/functions.anonymous.php#example-179)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-18T16:11:38.480

只需使用 GLOBAL 关键字输入函数：

```
 global $site_url; 
```

# android - 如何将 android 谷歌地图绑定到特定跨度，所以当用户平移时他不能超过该跨度？

> ID：11086774
> 
> 赞同：1
> 
> 时间：2012-06-18T16:09:59.567
> 
> 标签：android, maps

我想在英国各地的android中绑定谷歌地图，所以用户不能平移地图去英国以外的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:24:32.377

绝对有一种方法（或几种方法）可以为地图 web api 执行此操作（请参阅链接：[http](http://econym.org.uk/gmap/range.htm) ://econym.org.uk/gmap/range.htm和 [http://econym.org.uk/gmap/ epoly.htm](http://econym.org.uk/gmap/epoly.htm)）。但是，我不知道在 android 上执行此操作的内置方法，因此可能需要一些技巧。

您可能必须重写 mapview 类的一部分...我会尝试覆盖 getMaxZoomLevel （如第一个链接中所建议的 - 更简单但可能不起作用）或尝试以某种方式拦截所有地图移动请求并检查它们看看它们是否落在某些坐标之外（更难/甚至不可能 - 每次地图移动时可能必须执行诸如调用 getLongituteSpan 之类的操作，如果跨度超出您想要的区域，则可能尝试将地图移回？）

# python - 在mongo中查询一个时间范围内

> ID：11086782
> 
> 赞同：2
> 
> 时间：2012-06-18T16:10:29.963
> 
> 标签：python, mongodb, pymongo

我有一个 mongo 数据库，我将日期和时间存储在单独的字段中（我无法更改此设置）。谷歌搜索，我发现人们通过将字段分成 2 个部分来查询日期和时间的示例，1 个用于日期，1 个用于时间，例如：

```
{"dateField": {"d": "06/18/2012" "t": "12:00:00 AM"}}
{"timeField": {"d": "06/18/2012" "t": "12:07:10 PM"}} 
```

我见过人们（并且已经能够自己）查询日期部分：

```
db.collection.find({"dateField.d": {"$gte": "06/18/2012"}}) 
```

我的问题是随着时间的推移尝试相同的事情时我无法获得准确的结果：

```
db.collection.find({"timeField.t": {"$gte": "12:00:00 PM"}}) 
```

有没有一种特定的方式我应该格式化我的时间数据来查询它？或者有没有更好的方法来存储时间数据，以便我可以只查询时间（而不依赖于日期）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:30:59.030

您需要以真实的日期格式或数字存储数据。当您进行这些搜索时，比较使用的[词典](http://en.wikipedia.org/wiki/Lexicography)顺序不是您想要的。如果您确实想使用字符串，您应该使用其中一种适用的[ISO 格式](http://en.wikipedia.org/wiki/ISO_8601)。

# javascript - 如何使用谷歌分析 setAllowAnchor 标志

> ID：11086785
> 
> 赞同：3
> 
> 时间：2012-06-18T16:10:41.650
> 
> 标签：javascript, google-analytics

我正在尝试[在 Google Analytics 中获取 setAllowAnchor 标志](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiCampaignTracking#_gat.GA_Tracker_._setAllowAnchor)来记录活动信息，但它似乎不起作用。

我尝试使用它的网站使用 hashbang 样式的 URL 顺便说一句 - 这`http://hostname/#!/relative-url`是导航样式，因为需要有一个跨页面视图的持久音频播放器。

我已经尝试了以下两种方法，但`setAllowAnchor`在 GA 中没有看到任何广告系列。

```
/#!/&utm_campaign=setAllowAnchor&utm_medium=hash&utm_source=test
/#utm_campaign=setAllowAnchor&utm_medium=hash&utm_source=test 
```

不推荐使用 setAllowAnchor 函数。我究竟做错了什么？

我的 Google Analytics 代码如下所示：

```
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-1060190-1']);
_gaq.push(['_trackPageview']);
_gaq.push(['_trackPageLoadTime']);
_gaq.push(['_setAllowAnchor', true]);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T16:37:56.713

任何 Google Analytics 配置都必须位于函数`_trackPageview`或任何其他`_track*`函数之前。因此，如果您重写代码以在它应该工作`_setAllowAnchor`之前发出。`_trackPageview`

另请注意，`_trackPageLoadTime`不再需要。它是[默认发布的](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._trackPageLoadTime)，因此不推荐使用此功能。

```
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-1060190-1']);
_gaq.push(['_setAllowAnchor', true]);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script> 
```

# selenium - 使用 Selenium Cross-Platofrm，如何在 Mac、移动和 PC 版本的浏览器上进行测试

> ID：11086790
> 
> 赞同：0
> 
> 时间：2012-06-18T16:11:05.687
> 
> 标签：selenium

我完全是 Selenium 的初学者，所以请耐心等待 :)

我希望在常用浏览器（chrome、FF、IE、Safari）的 Mac 和 PC 版本上测试 Web 应用程序，并在 iphone 和 android 浏览器上进行测试。

为此，我是否需要在 mac 和 pc 上都设置 selenium？我究竟如何设置一个可以从 linux 服务器执行的测试套件，该服务器将在不同平台的浏览器上执行测试。

有什么方法可以直接在服务器上运行测试，还是需要连接到正确配置为运行所需测试的 PC 和 Mac。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T04:21:48.083

您可以设置 Selenium Grid，然后使用适用于该机器的浏览器在每个平台上运行节点。

对于集线器：（在设置测试框架的地方运行）

```
java -jar selenium-server-standalone-2.7.0.jar -role hub 
```

对于基于 firefox 的节点：例如：说带有 firefox 的 Windows 机器

```
java -jar selenium-server-standalone-2.7.0.jar -role webdriver -hub `http://localhost:4444/grid/register -port 5556 -browser browserName=firefox` 
```

对于基于 google-chrome 的节点：例如：使用 Firefox 的 Linux 机器

```
java -Dwebdriver.chrome.driver=/path/to/chromedriver -jar selenium-server-standalone-2.7.0.jar -role webdriver -hub http://localhost:4444/grid/register -port 5555 -browser browserName=chrome 
```

# grails - Grails - 向所有域对象添加 where 子句

> ID：11086794
> 
> 赞同：2
> 
> 时间：2012-06-18T16:11:20.877
> 
> 标签：grails, grails-orm, where-clause

我们有一个连接到遗留数据库的 Grails 应用程序，其中每个表都有一个名为的列`deleted`，指示实体是否已被删除（这意味着数据实际上从未从表中删除，它会在一定时间后存档）。对于我们的每个域对象，我们希望添加一个自动`where`子句，如下所示：

```
where deleted = false 
```

这样我们就不必将其显式添加到应用程序中的每个查询中。有没有办法在 grails 中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T17:10:53.107

我使用[Hibernate Filter 插件](http://grails.org/plugin/hibernate-filter)来处理这些事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:59:32.140

我不认为 GORM 直接支持这一点。但是，您可以利用 hibernate 拦截器并自己添加它。特别是，您可以使用[`onPrepareStatement`](https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Interceptor.html#onPrepareStatement%28java.lang.String%29)钩子将 where 子句添加到 hibernate 生成的每个查询中。例如：

```
// src/groovy/mypackage/MyEntityInterceptor.groovy
package mypackage
class MyEntityInterceptor extends org.hibernate.EmptyInterceptor {
    String onPrepareStatement(String sql) {
        return addNotDeletedClause(sql)
    }
}
// grails-app/conf/spring/resources.groovy
beans = {
    entityInterceptor(MyEntityInterceptor)
} 
```

不幸的是，您必须解析传入的 SQL 语句才能确定在何处插入`where`子句。

# ruby-on-rails - Rails 3.2.1：链接适用于应用程序，存在于 routes.rb 但未显示在 rake routes 输出中

> ID：11086795
> 
> 赞同：0
> 
> 时间：2012-06-18T16:11:24.343
> 
> 标签：ruby-on-rails, routes

我有这些网址：

```
http://localhost:3000/assets
http://localhost:3000/assets/new
http://localhost:3000/assets/34
http://localhost:3000/assets/34/edit 
```

他们在我的应用程序中工作。

我有这个 routes.rb 文件：

```
devise_for :users

match "listings/show_notes" => "listings#show_notes", :as => :show_notes

resources :users

resources :listings

resources :assets

 authenticated :user do
  root :to => "listings#index"
 end

#this route is for file downloads
 match "assets/get/:id" => "assets#get", :as => :download

 resources :admin_dash_board,  :only => :index 
```

当我输入 rake routes 时，我有以下输出

```
 new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
        user_session POST   /users/sign_in(.:format)       devise/sessions#create
 destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
       user_password POST   /users/password(.:format)      devise/passwords#create
   new_user_password GET    /users/password/new(.:format)  devise/passwords#new
  edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                     PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)            devise/registrations#cancel
   user_registration POST   /users(.:format)               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
 edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                     PUT    /users(.:format)               devise/registrations#update
                     DELETE /users(.:format)               devise/registrations#destroy
          show_notes        /listings/show_notes(.:format) listings#show_notes
               users GET    /users(.:format)               users#index
                     POST   /users(.:format)               users#create
            new_user GET    /users/new(.:format)           users#new
           edit_user GET    /users/:id/edit(.:format)      users#edit
                user GET    /users/:id(.:format)           users#show
                     PUT    /users/:id(.:format)           users#update
                     DELETE /users/:id(.:format)           users#destroy
            listings GET    /listings(.:format)            listings#index
                     POST   /listings(.:format)            listings#create
         new_listing GET    /listings/new(.:format)        listings#new
        edit_listing GET    /listings/:id/edit(.:format)   listings#edit
             listing GET    /listings/:id(.:format)        listings#show
                     PUT    /listings/:id(.:format)        listings#update
                     DELETE /listings/:id(.:format)        listings#destroy
                root        /                              listings#index
  admin_dash_board_index GET    /admin_dash_board(.:format)    admin_dash_board#index 
```

如您所见，资源 :assets 没有路由。

知道为什么吗？或者是怎么回事？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:30:21.560

我想我在[这里](https://stackoverflow.com/questions/9200127/rails-3-legacy-assets-routes)和[这里](https://github.com/rails/rails/issues/3643#issuecomment-2775938)找到了你的答案。

尝试将此行添加到您的`application.rb`：

```
config.assets.prefix     = "/new_route" 
```

**编辑**-[这里](https://stackoverflow.com/questions/9707377/rails-scaffold-built-table-called-assets-now-route-errors)还有一些其他选项来解决问题....

# android - 广播接收器未检测到丢失的 wifi 连接

> ID：11086797
> 
> 赞同：3
> 
> 时间：2012-06-18T16:11:24.893
> 
> 标签：android, broadcastreceiver, wifi

我在检测 wifi 的变化时遇到了一些问题。我希望我的应用程序监控 wifi 网络并在 wifi 断开连接时创建一个警报对话框。在启动、恢复等时或 b。任何时候连接丢失。这是我的代码（我在 onResume 中使用 this.registerReceiver(wifiStatusReceiver, new IntentFilter(WifiManager.WIFI_STATE_CHANGED_ACTION)); 并在 onPause 中取消注册）：

```
 BroadcastReceiver wifiStatusReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        int extraWifiState = intent.getIntExtra(
                WifiManager.EXTRA_WIFI_STATE,
                WifiManager.WIFI_STATE_UNKNOWN);

        final String action = intent.getAction();

        DialogFragment dialog = (DialogFragment) fragmentManager
                .findFragmentByTag(WifiAlertDialogFragment.DIALOG_WIFI);

        if (action.equals(WifiManager.SUPPLICANT_STATE_CHANGED_ACTION)) {
            NetworkInfo info = (NetworkInfo) intent
                    .getParcelableExtra(WifiManager.EXTRA_NETWORK_INFO);
            if (info.getState().equals(NetworkInfo.State.CONNECTED)) {
                logger.d("wifi changed, is still connected");
                if (dialog != null)
                    dialog.dismiss();
            } else {
                logger.d("connection lost");
                if (dialog == null)
                    WifiAlertDialogFragment.wifiCheck(HomeActivity.this);
            }
        }

        switch (extraWifiState) {

        case WifiManager.WIFI_STATE_DISABLED:
            WifiAlertDialogFragment.wifiCheck(HomeActivity.this);
            break;
        case WifiManager.WIFI_STATE_DISABLING:
            Toast.makeText(HomeActivity.this, R.string.wifi_disabled,
                    Toast.LENGTH_SHORT).show();
            WifiAlertDialogFragment.wifiCheck(HomeActivity.this);
            break;
        case WifiManager.WIFI_STATE_ENABLED:
            if (dialog != null)
                dialog.dismiss();
            break;
        case WifiManager.WIFI_STATE_ENABLING:
            if (dialog != null)
                dialog.dismiss();
            Toast.makeText(HomeActivity.this, "Wifi Enabling",
                    Toast.LENGTH_LONG).show();
            break;
        case WifiManager.WIFI_STATE_UNKNOWN:
            // no op
            break;
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T03:32:38.520

更新：我发现了问题，所以我会自己回答这个问题。我只使用 SUPPLICANT_STATE_CHANGED_ACTION 因为它正在检查任何 wifi 状态——断开、禁用、连接、启用等。另一个对于监控连接非常无用，因为它只检查用户是否在设置中启用了 wifi或不。

注册我的接收器（在 onResume 中）：

```
 IntentFilter filter = new IntentFilter(WifiManager.SUPPLICANT_STATE_CHANGED_ACTION);
    this.registerReceiver(wifiStatusReceiver, filter); 
```

我的新代码如下所示：

```
BroadcastReceiver wifiStatusReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        logger.d("checking wifi state...");
        SupplicantState supState;
        WifiManager wifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        WifiInfo wifiInfo = wifiManager.getConnectionInfo();
        supState = wifiInfo.getSupplicantState();
        logger.d("supplicant state: " + supState);

        SherlockDialogFragment dialog = (SherlockDialogFragment) fragmentManager
                .findFragmentByTag(WifiAlertDialogFragment.DIALOG_WIFI);

        if (supState.equals(SupplicantState.COMPLETED)) {
            logger.d("wifi enabled and connected");
            if (dialog != null)
                dialog.dismiss();
        } else {
            WifiAlertDialogFragment.wifiCheck(HomeActivity.this);
            if (supState.equals(SupplicantState.SCANNING)) {
                logger.d("wifi scanning");
            } else if (supState.equals(SupplicantState.DISCONNECTED)) {
                logger.d("wifi disonnected");
            } else {
                Toast.makeText(HomeActivity.this, "Wifi Enabling",
                        Toast.LENGTH_LONG).show();
                logger.d("wifi connecting");
            }
        }
    }
}; 
```

# css - 我的网站在 IE8 兼容性视图中的外观问题

> ID：11086800
> 
> 赞同：1
> 
> 时间：2012-06-18T16:11:34.107
> 
> 标签：css, html, ie8-compatibility-mode

我会尽量让这件事变得简单。我现在正在开发一个网站，您可以在[http://wordpress.myecsinc.com](http://wordpress.myecsinc.com)上看到该网站。请记住，这是一个测试站点，它还没有完成，据说这里和那里有很多错误，但我计划修复它。

无论如何，当我在 IE8 兼容性视图中查看该站点时，底部的两个图像最终混合在一起（可以这么说）。当我退出兼容性视图时，它看起来就像它应该的那样。有谁知道可能是什么原因造成的以及我该如何解决？

我试图附上截图，但它不会让我，因为我是这个网站的新手。只需在 IE8 中打开该站点并切换到兼容性视图，您就会明白我的意思。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:21:34.843

使用适当的元标记来强制 IE 退出兼容模式，而不必担心这个问题。适当的标签是：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:19:06.360

左图具有以下导致问题的 css 类：

```
.index-nav-img {
    position: absolute;
    z-index: 0;
} 
```

如果类被删除，那么对齐是固定的。这门课有什么理由出现在第一张图片上而不是其他图片上吗？

注意我在 Firefox 中对此进行了测试。

# qt - 布局 sizeHint qwidget

> ID：11086801
> 
> 赞同：4
> 
> 时间：2012-06-18T16:11:34.137
> 
> 标签：qt, qgridlayout

我正在创建一个小部件，其中包含一个国际象棋桌和六个按钮，这些按钮显示在国际象棋桌下方的 2 行中。按钮行比棋盘宽。国际象棋表和按钮位于 QGridLayout 中。Chess table 有自己的 sizeHint，它是根据方格的大小计算出来的。

经过一些操作后，我删除了按钮并将包含所有内容的小部件调整为其 sizeHint ( `resize(sizeHint())`)。小部件在垂直方向上正确调整大小，但在水平方向上它保持与按钮行一样宽。问题是什么 ？

如果我仅使用国际象棋表构建小部件，则布局会正确调整小部件的大小。

我正在添加代码：

在窗口的构造函数中：

```
renderArea = new RenderArea(m_row,m_col,m_grid);

formLayout = new QGridLayout;

formLayout->addWidget(renderArea,0,0,1,3);

setLayout(formLayout); 
```

在添加按钮的函数中：

```
addPlaneButton = new QPushButton(tr("Add plane"));
cancelButton = new QPushButton(tr("Cancel operation"));
movePlaneButton = new QPushButton(tr("Move plane"));
deletePlaneButton = new QPushButton(tr("Delete plane"));
rotatePlaneButton = new QPushButton(tr("Rotate plane"));
doneButton = new QPushButton(tr("Done"));
doneButton->setEnabled(false);

infoLabel = new QLabel(tr("Welcome to the plane editor"));
statusLabel = new QLabel();

formLayout->addWidget(statusLabel,1,0,1,3);
formLayout->addWidget(infoLabel,2,0,1,3);
formLayout->addWidget(addPlaneButton,3,0);
formLayout->addWidget(movePlaneButton,3,1);
formLayout->addWidget(deletePlaneButton,3,2);
formLayout->addWidget(rotatePlaneButton,4,0);
formLayout->addWidget(cancelButton,4,1);
formLayout->addWidget(doneButton, 4,2); 
```

在删除国际象棋表之外的所有内容的函数中：

```
formLayout->removeWidget(addPlaneButton);
formLayout->removeWidget(cancelButton);
formLayout->removeWidget(movePlaneButton);
formLayout->removeWidget(deletePlaneButton);
formLayout->removeWidget(rotatePlaneButton);
formLayout->removeWidget(doneButton);
formLayout->removeWidget(infoLabel);
formLayout->removeWidget(statusLabel);

delete addPlaneButton;
delete cancelButton;
delete movePlaneButton;
delete deletePlaneButton;
delete rotatePlaneButton;
delete doneButton;

delete infoLabel;
delete statusLabel;

resize(sizeHint()); 
```

国际象棋表的 sizeHint 计算如下：

```
return QSize(m_rowNo*spacing, m_colNo*spacing)+QSize(31,31); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T22:40:48.833

1.  您必须在修改布局的小部件后立即更新`activate()`其之前的布局`sizeHint()`，以及随后的小部件。`sizeHint()`

2.  调用`layout->removeWidget()`是多余的。只是`delete`不需要的小部件。Qt 处理 QWidget 层次结构中的所有内存分配。删除 QWidget 而不告诉 Qt 端的任何人是安全的。当然也有正常的例外：例如，您不能删除其方法位于调用堆栈中某处的小部件。

3.  如果您不想打扰调用`resize()`，可以在小部件的布局上设置适当的大小约束。例如：

    `layout->setSizeConstraint(QLayout::SetFixedSize);`

    这可确保小部件自身的大小仅足以容纳每个`sizeHint()`.

考虑到第 1 点和第 2 点，“删除棋盘以外的所有内容”的函数可能如下所示：

```
void removeButtons() {
    delete addPlaneButton;
    delete cancelButton;
    delete movePlaneButton;
    delete deletePlaneButton;
    delete rotatePlaneButton;
    delete doneButton;
    delete infoLabel;
    delete statusLabel;

    formLayout->activate();
    resize(sizeHint());
} 
```

# hibernate - Hibernate 3 createQuery() 返回 NPE 进行基本连接 - 怎么了？

> ID：11086803
> 
> 赞同：0
> 
> 时间：2012-06-18T16:11:35.250
> 
> 标签：hibernate, jakarta-ee, hql, hibernate-mapping

`createQuery`当我尝试使用 hibernate 3.3.0 进行简单的多对一连接时，我得到了一个 NPE 。我已经消除了诸如空表和错误的实体映射、不存在的会话等可能性，但我是休眠注释的新手，所以我不能 100% 确定我的注释是正确的。我在想这里可能缺少一两个注释，或者 HQL 本身存在语法错误，但我不知道从哪里开始。

我有两个表，`EventsJobs`它们`EventsJobsTags`共享一个共同的属性，`docId`. 两者之间存在多对一关系，因此 in 中的一条记录`EventsJobs`可以在 中包含多条记录`EventsJobsTags`。

我的类（为简洁起见，省略了导入/获取器/设置器/构造器）：

```
package com.x.y.model;

@Entity
@Table(name = "EventsJobs")
public class EventJob {
@JoinColumn(name="docId")

@Id
@Column(name = "docId")
private String docId;

@Column(name="title")
private String title;

@Column(name="url")
private String url;

@Column(name="docType")
private String docType;

@Column(name="fileName")
private String fileName;
} 
```

和

```
package com.x.y.model;

@Entity
@Table(name = "EventsJobsTags")
public class EventJobTag {
@JoinColumn(name="docId")

@Id
@Column(name = "docId")
private String docId;

@Column(name = "taxonomyId")
private int taxonomyId;

@Column(name = "tag")
private String tag;
} 
```

查询：

```
Query q = sessionFactory.getCurrentSession().createQuery("
from com.x.y.model.EventJobTag as et
left join com.x.y.model.EventJob as e 
where e.docType = 'jobs' and et.taxonomyId in ('6079')")
            .setString("docType", type)
            .setString("search", search); 
```

堆栈跟踪：

```
SEVERE: Servlet.service() for servlet [xyz] in context with path [/abc] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause
java.lang.NullPointerException
at org.hibernate.hql.ast.HqlSqlWalker.createFromJoinElement(HqlSqlWalker.java:320)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.joinElement(HqlSqlBaseWalker.java:3275)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElement(HqlSqlBaseWalker.java:3067)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromElementList(HqlSqlBaseWalker.java:2945)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.fromClause(HqlSqlBaseWalker.java:688)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:544)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:281)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:229)
at org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:228)
at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:160)
at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:111)
at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:77)
at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:56)
at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:72)
at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:133)
at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:112)
at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1623)
at com.x.y.dao.SearchResultsDaoImpl.searchResults(SearchResultsDaoImpl.java:30)
at com.x.y.dao.SearchResultsDaoImpl.jobResults(SearchResultsDaoImpl.java:20)
at com.x.y.service.ResumeServiceImpl.listJobs(ResumeServiceImpl.java:45)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy17.listJobs(Unknown Source)
at com.x.y.controller.ResumeController.taxonomySearch(ResumeController.java:163)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:24:45.573

您尚未在域实体上声明关联。您的 EventJob 应该有一个对 EventJobTag 列表的 OneToMany 引用。如下：

```
@OneToMany(mappedBy="eventJob")
List<EventJobTag> tags; 
```

如果希望 Hibernate 级联对映射集合中的实体所做的更改，则需要指定级联类型。

并且您的 EventJobTag 类应该有一个 ManyToOne 关联，该关联引用它具有外键的 EventJob。

```
@ManyToOne
@JoinColumn(name="eventJobId")
EventJob job; 
```

我不确定您的`@JoinColumn(name="docId")`注释在做什么，它们没有附加到任何东西上。因此，除了我描述的更改之外，您还需要删除它们。

# iphone - 双击选择器多次触发

> ID：11086810
> 
> 赞同：1
> 
> 时间：2012-06-18T16:11:50.680
> 
> 标签：iphone, objective-c, ios, ipad, uigesturerecognizer

编辑：我在 UIView 中有这个方法，它们位于多个视图控制器的顶部，这些视图控制器是 UIPageViewController 的“数据源”

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self setBackgroundColor:[UIColor clearColor]];

        UITapGestureRecognizer *tapGR =[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(handleTap:)];
        [tapGR setDelegate:self];
        [tapGR setNumberOfTapsRequired:1];
        [self addGestureRecognizer:tapGR];

        UITapGestureRecognizer *doubleTapGR = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(handleDoubleTap:)];
        [doubleTapGR setNumberOfTapsRequired:2];
        [self addGestureRecognizer:doubleTapGR];

        [tapGR requireGestureRecognizerToFail :doubleTapGR];

        [tapGR release];
        [doubleTapGR release];
    }
    return self;
}

-(void)handleTap:(UITapGestureRecognizer *)tapRecognizer{
    if (!(tapRecognizer.state == UIGestureRecognizerStatePossible)) {
        [[NSNotificationCenter defaultCenter]postNotification:[NSNotification notificationWithName:kTapOnCenterNotificationName object:nil]];
    }
}

-(void)handleDoubleTap:(UITapGestureRecognizer *)doubleTapRecognizer{

    CGPoint point = [doubleTapRecognizer locationInView:self];

    LSSharedVariables *sharedVariables = [LSSharedVariables sharedInstance];
    [sharedVariables setDoubleTapPoint:point];

    [[NSNotificationCenter defaultCenter]postNotification:[NSNotification notificationWithName:kLongPressNotificationName object:nil]];

} 
```

即使我指定仅当手势识别器状态等于 UIGestureRecognizerStateEnded 时才应执行操作，日志也会显示多次。我只想在这个块中执行一次操作，我应该怎么做？

编辑：我发现双击方法被调用的次数与 UIPageViewController 的页面一样多。我不明白的是为什么singleTapGestureRecognizer 不一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:20:02.243

```
- (void) handleDoubleTap : (UIGestureRecognizer*) sender
{
NSLog (@"Double tap is being handled here");
}

- (void) handleSingleTap : (UIGestureRecognizer*) sender
{
NSLog (@"Single tap is being handled here");
}

- (void) loadView
{
UITapGestureRecognizer* doubleTap = [[UITapGestureRecognizer alloc] initWithTarget : self action : @selector (handleDoubleTap];
UITapGestureRecognizer* singleTap = [[UITapGestureRecognizer alloc] initWithTarget : self action : @selector (handleSingleTap];

[singleTap requireGestureRecognizerToFail : doubleTap];

[doubleTap setDelaysTouchesBegan : YES];
[singleTap setDelaysTouchesBegan : YES];

[doubleTap setNumberOfTapsRequired : 2];
[singleTap setNumberOfTapsRequired : 1];

[self.view addGestureRecognizer : doubleTap];
[self.view addGestureRecognizer : singleTap];

[singleTap release];
[doubleTap release];
} 
```

试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:58:05.987

听起来您可能有多个对象在监听触摸，并且在它发生时都独立地调用“handleDoubleTap”。这可以解释为什么当双击事件发生时你会看到它被多次调用。

我将首先搜索您的代码以验证您没有多次添加它，因为您遇到的行为不是触摸事件的标准行为。

# php - 使用数组搜索 MySQL 数据库

> ID：11086812
> 
> 赞同：1
> 
> 时间：2012-06-18T16:11:53.270
> 
> 标签：php, mysql, arrays

我希望我做得对..

使用此代码，我从一个表中获取记录并将它们存储在一个数组中：

```
$result = mysql_query("SELECT username FROM '$tbl_name'");
$storeArray = Array();
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    $storeArray[] =  $row['username'];  
} 
```

查询的结果是（使用：）`print_r($storeArray);`：

```
Array ( [0] => username1 [1] => username2 [2] => username3) 
```

我想用这个数组来搜索另一个表。即兴代码将是：

```
SELECT * FROM $users_tbl WHERE username = username1, username2, username3 
```

谁能帮我生成可以执行此操作的 MySQL 查询？

我希望这足够清楚..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:14:18.103

您需要使用[JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)，更快更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:16:29.147

您可以使用子查询在一个查询中执行此操作：

```
"SELECT * FROM `$users_tbl` WHERE `username` IN (SELECT username FROM `$tbl_name`)" 
```

另请注意，不推荐使用 mysql 扩展，建议使用[mysqli](http://php.net/manual/en/book.mysqli.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:16:58.757

也许

```
SELECT * FROM $tbl_name
JOIN $users_tbl
ON $tbl_name.username = $users_tbl.following 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T16:31:24.867

```
foreach($storeArray as $value) {
    $inClause[] = '"'.filter_var($value,FILTER_SANITIZE_STRING).'"';
    // or apply your own -better- sanitizing/escaping instead of the filter_var
}
$query = "SELECT * FROM $users_tbl WHERE username IN (".implode(",",$inClause).");";
$result = mysql_query($query);
while ($row = mysql_fetch_assoc($result)) {
    //Do something usefull with the rows here, just dumping their values for the example
    var_dump($row);  
} 
```

[在不使用更安全的PDO 参数化查询](https://stackoverflow.com/a/60496/813718)的情况下，这是我能想到的最好的方法

# ruby-on-rails - 从 github 安装 documentcloud 时出现 GemLoadError

> ID：11086818
> 
> 赞同：0
> 
> 时间：2012-06-18T16:12:03.083
> 
> 标签：ruby-on-rails, ruby, rubygems

我正在尝试从 GitHub 安装 documentcloud，但安装时遇到了许多问题。我完成了安装，但现在得到：

> /usr/local/lib/site_ruby/1.8/rubygems/specification.rb:1637:in `raise_if_conflicts': 无法激活 actionpack-2.3.14，因为 rack-1.4.1 与 rack (~> 1.1.0) 冲突（宝石::加载错误)

我的宝石清单是：

```
*** LOCAL GEMS ***

actionmailer (2.3.14)
actionpack (2.3.14)
activerecord (2.3.14)
activeresource (2.3.14)
activesupport (2.3.14)
bcrypt-ruby (3.0.1)
builder (3.0.0)
calais (0.0.13)
cloud-crowd (0.6.2)
curb (0.8.0)
daemon_controller (1.0.0)
daemons (1.1.8)
docsplit (0.6.3)
eventmachine (0.12.10)
fastthread (1.0.7)
hpricot (0.8.6)
jammit (0.6.5)
json (1.7.3)
libxml-ruby (2.3.2)
mime-types (1.18)
nokogiri (1.5.4)
open4 (1.3.0)
passenger (3.0.13)
pg (0.13.2)
Platform (0.4.0)
POpen4 (0.1.4)
pr_geohash (1.0.0)
rack (1.4.1, 1.1.3)
rack-protection (1.2.0)
rails (2.3.14)
rake (0.9.2.2)
rdiscount (1.6.8)
rest-client (1.6.7)
right_aws (3.0.4)
right_http_connection (1.3.0)
rsolr (1.0.8)
rubygems-update (1.3.5)
rubyzip (0.9.9)
sanitize (2.0.3)
sinatra (1.3.2, 0.9.6)
sqlite3 (1.3.6)
sqlite3-ruby (1.3.3)
sunspot (1.3.3)
sunspot_rails (1.3.3)
thin (1.3.1)
tilt (1.3.3)
yui-compressor (0.9.6) 
```

我正在使用 Ruby 1.8.7-p249 和 Rails 2.3.14。

我尽可能地遵循文档。我也做过很多次（我知道精神错乱的定义是一遍又一遍地做同样的事情并期待不同的结果`:)`）。

还有其他人遇到这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:24:39.287

您拥有比 Rails 2.3 允许的更新版本的 Rack（特别是 ActionPack，它是 Rails 的一部分）。你要么必须

*   更新 Rails（或者可能用 backport 对其进行猴子补丁）

*   修改应用以使用[Bundler](http://gembundler.com/)

*   卸载较新版本的 Rack：

    ```
    gem uninstall rack -v 1.4.1 
    ```

最后一个选项是最简单的，不需要修改应用程序，但它会阻止您安装更新版本的 Rack。如果您使用的是[RVM](https://rvm.io/)，则可以使用 gemset 来解决其他应用程序的这个问题。

# c++ - Visual Studio 在某些情况下看不到函数声明

> ID：11086819
> 
> 赞同：-2
> 
> 时间：2012-06-18T16:12:03.970
> 
> 标签：c++, visual-studio-2010

例如：

```
void main(){
foo1();

} 

fooTarget();
foo1(foo2(););
foo2(foo3(););
foo3(foo4(););
foo4(foo5(););
foo5(
foo6();
fooTarget(); //Identifier not found
);
foo6(
fooTarget(); //It Works!
); 
```

它是什么？如果我将代码从 fooTarget() 粘贴到 foo5() 它也可以

来自实际代码的简化测试用例：

```
#include <cstring>

int main() {
    char word[] = "hey";
    int wordSize = getWordLenght(word); // error: getWordLenght not declared
}

int getWordLenght(char *word){
    return strlen(word);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:34:26.537

在您在评论中发布的代码中，您正在使用尚未声明的函数。它是稍后声明的，但 C++ 不会查看以后的声明来解析函数。

[此外，“th”有向字母拼写为“th”，而不是“ht”]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:33:43.603

```
foo5(
foo6();
fooTarget(); //Identifier not found
); 
```

如果您删除换行符，这将被解析为：

```
foo5( foo6(); fooTarget(); ); 
```

当然，这不是正确的 C++ 代码。

您发布的代码中还有很多其他错误。例如，您没有为任何函数原型指定返回类型——假设它们是原型。

# jsf-2 - JSF 2 - 通过注释替换托管 Bean 的 faces-config 配置

> ID：11086821
> 
> 赞同：0
> 
> 时间：2012-06-18T16:12:08.527
> 
> 标签：jsf-2

我正在使用 MyFaces JSF 2.0，其中我替换了 faces-config

```
<managed-bean>
    <managed-bean-name>myBean</managed-bean-name>
    <managed-bean-class>com.myBean</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
</managed-bean>
    with
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean
@SessionScoped
public class MyBean  implements Serializable { 
```

我遇到的错误如下。如果我恢复 faces-config 更改，它会起作用。我做错了什么？

```
0000008e FaceletViewDe E   Error Rendering View[/test.xhtml]
                             javax.faces.FacesException: Property facesContext     references object in a scope with shorter lifetime than the target scope session
at     org.apache.myfaces.config.ManagedBeanBuilder.initializeProperties(ManagedBeanBuilder.java:324)
at     org.apache.myfaces.config.ManagedBeanBuilder.buildManagedBean(ManagedBeanBuilder.java:169)
at org.apache.myfaces.el.unified.resolver.ManagedBeanResolver.createManagedBean(ManagedBeanResolver.java:303)
at org.apache.myfaces.el.unified.resolver.ManagedBeanResolver.getValue(ManagedBeanResolver.java:266) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T19:35:26.403

此错误表明您有

```
@ManagedBean
@SessionScoped
public class MyBean implements Serializable {

    @ManagedProperty("#{facesContext}")
    private FacesContext facesContext;

} 
```

这是不可能的，这实际上也是糟糕的设计。特定于当前请求和每个 HTTP 请求的`FacesContext`更改。但是会话范围的 bean 在 HTTP 会话期间只创建一次，并且注入的`FacesContext`实例只会引用在创建会话范围的 bean 期间涉及的 HTTP 请求之一。在同一会话中的任何后续请求中，这只会导致重大问题，因为`FacesContext`先前请求的实例将不再有效。

您需要**删除**该`FacesContext`属性（以及您从中获得的任何其他属性`ExternalContext`）。相反，您应该在与您需要的地方完全相同的方法块中检索它们。

```
@ManagedBean
@SessionScoped
public class MyBean implements Serializable {

    public void someMethod() {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        // ...
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:22:30.067

您不能在会话范围内使用 @ManagedProperty 注入 facesContext，因为会话 bean“寿命”比 facesContext 长。您必须创建一个请求范围 bean 并注入 facesContext 和您的会话 bean 并在那里完成工作，或者在会话 bean 中调用 FacesContext.getCurrentInstance()。

# c# - 如何在 C# 中处理非常快的事件？

> ID：11086830
> 
> 赞同：-3
> 
> 时间：2012-06-18T16:13:12.393
> 
> 标签：c#, events, com

我正在编写一个与外部 COM 对象交互的程序（.net 4）。为了拥有一个“实时”程序，我将程序从轮询 COM 对象然后进行计算更改为从 COM 对象接收事件。

我的问题是事件太快了。据我所知（在调试模式下）一些事件被遗漏等等。

具体问题如下：

1.  我（或 C#）如何确保捕获并处理所有事件？
2.  应该如何构建 main 以等待事件（如果事件之间有很长的时间）而不结束？

我尝试了一个带有无限循环的主线程，它会休眠一毫秒，然后关闭一个线程，但这只是一团糟。

谢谢你的时间

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T16:19:25.653

> 我（或 C#）如何确保捕获并处理所有事件？

BackgroundWorkers 非常适合解决这样的问题：-

> 应该如何构建 main 以等待事件（如果事件之间有很长的时间）而不结束？

您应该使用`Timer`. 您应该简单地处理收到的数据。

如果没有更多信息，这个问题将很难更详细地回答......

# php - 为 PHP 数组中的每个转换日期和回显

> ID：11086838
> 
> 赞同：0
> 
> 时间：2012-06-18T16:13:31.083
> 
> 标签：php, arrays, date

我有一个格式为 2012-06-18 的日期列表，我将其回显到 XML 文件中。

```
foreach ($result_array as $date) {
   echo "<market date=\"".$date['saledate']."></market>\n";
} 
```

哪个工作正常。

但是当我更改我的代码以像这样以不同的格式显示日期时......

```
foreach ($result_array as $date) {
   echo "<market date=\"".date("F j", $date['saledate')]."></market>\n";
} 
```

每个日期都显示为 12 月 31 日。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:15:19.400

尝试这个 ：

```
foreach ($result_array as $date) {
   echo "<market date=\"".date("F j", strtotime($date['saledate']))."></market>\n";
} 
```

你的括号也被错误地排序了。

# c# - 基本构造函数没有被调用

> ID：11086840
> 
> 赞同：10
> 
> 时间：2012-06-18T16:13:36.537
> 
> 标签：c#, constructor

我遇到了派生类的基本构造函数没有被执行的问题。我已经这样做了一百次，但我终其一生都无法弄清楚为什么基础构造函数没有执行。我希望有人能找到我想念的简单的东西。代码示例如下。有谁知道为什么我的基本构造函数没有被首先调用？我有其他以相同方式实现的类，并且始终首先调用基本构造函数。

```
if (item.GetType() == typeof(OtherChargeItem))
{
    OtherChargeItemAddUpdateTest test = new OtherChargeItemAddUpdateTest((OtherChargeItem)item);
    test.StartPosition = FormStartPosition.CenterParent;
    test.ShowDialog();
}

public OtherChargeItemAddUpdateTest()
{
    InitializeComponent();
}

public OtherChargeItemAddUpdateTest(OtherChargeItem item)
        : base()
{
    currentItem = item;
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-18T16:16:36.873

看起来您想在同一个类中调用默认构造函数，而不是基类，因此`InitializeComponent`在调用第二个构造函数时会被调用。尝试`this()`代替`base()`.

# java - -XX:-UseParallelGC 和 -XX:+UseParallelGC 的区别

> ID：11086859
> 
> 赞同：5
> 
> 时间：2012-06-18T16:14:43.097
> 
> 标签：java, jvm-arguments

-XX:+UseParallelGC 和 -XX:-UseParallelGC 有什么区别？大多数链接表示第一个，但[http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)提到了第二个。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T16:16:21.413

从文档中：

> 布尔选项打开`-XX:+<option>`和关闭`-XX:-<option>`

所以这意味着`-XX:+UseParallelGC`将打开并行垃圾收集，并将`-XX:-UseParallelGC`其关闭。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T16:16:43.400

该行：

```
-XX:+UseParallelGC 
```

启用**ParallelGC**。注意`+`标志

该行：

```
-XX:-UseParallelGC 
```

禁用它。注意`-`标志。

# rest - 使用 Jersey 客户端删除文件会出现“服务器重定向太多次”错误

> ID：11086860
> 
> 赞同：0
> 
> 时间：2012-06-18T16:14:53.047
> 
> 标签：rest, jersey

我有一堆用 Apache Jersey 客户端实现的自动化测试用例。除了我针对 RESTful Web 服务删除文件的一种情况外，一切都运行良好。该错误会发生一段时间，并且无法每次都重现，但确实会发生。

我用于删除文件的代码使用 Jersey 非常简单直观

```
Client client = Client.create();
WebResource resource = client.resource(uri);
ClientResponse response = resource.delete(ClientResponse.class); 
```

上面的代码正在删除由 uri 指定的服务器上的文件，这是我得到“服务器重定向太多次 (20)”错误的唯一情况。它有时会过去，但有时会失败。我正在寻找更多线索以开始调查。

我得到的例外是：

```
com.sun.jersey.api.client.ClientHandlerException: java.net.ProtocolException: Server redirected too many  times (20)
com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:149)
com.sun.jersey.api.client.Client.handle(Client.java:648)
com.sun.jersey.api.client.WebResource.handle(WebResource.java:680)
com.sun.jersey.api.client.WebResource.delete(WebResource.java:272)
<more my user exceptions are skipped here...>

Caused by: java.net.ProtocolException: Server redirected too many  times (20)
sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1446)
java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:379)
com.sun.jersey.client.urlconnection.URLConnectionClientHandler._invoke(URLConnectionClientHandler.java:240) com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:147)
com.sun.jersey.api.client.Client.handle(Client.java:648)
com.sun.jersey.api.client.WebResource.handle(WebResource.java:680)
com.sun.jersey.api.client.WebResource.delete(WebResource.java:272) 
```

希望有人能给点提示吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:11:45.790

Looks like the server is sending repeated redirects for some reason.

Call `client.setFollowRedirects(false);` on your Jersey client instance to avoid the client getting into a redirect loop.

# php - 随着启动发送到数据库

> ID：11086861
> 
> 赞同：1
> 
> 时间：2012-06-18T16:15:05.060
> 
> 标签：php, mysqli

这就是我在网站上的新手，所以如果你能告诉我是否需要做某事，那就太好了，因为我在这里很新..

我的网站有什么问题，它是标题，是的第二个错误，我无法以某种方式上升。

这就是我将如何建立我自己的论坛，因为我真的不费心花 phpbbforum 或它所说的内容。这就是我尝试使用 php 代码使用相同的 html 的方式，但它在某些方面根本不起作用。

我在这里尝试过：

```
<form action="#" method="post">

        <?php
            if($stmt = $mysqli->prepare("INSERT INTO `forum_traede` (`kategori_id`, `titel`, `bruger_id`, `dato`, `tekst`) VALUES (?, ?, ?, NOW(), ?)"))
            {
                $stmt->bind_param('ssss', $kategori, $titel, $bruger_id, $tekst);
                $kategori = $_POST["kategori"];
                $titel = $_POST["titel"];
                $bruger_id = $_SESSION["user_id"];
                $tekst = $_POST["tekst_2"];

                $stmt->execute();
                $stmt->close();

                header ('Location: ./bruger-forum');
            }
            else
            {
                echo 'Der opstod en fejl i erklæringen: ' . $mysqli->error;
            }
        ?>
            <table border="0">
                <tr>
                    <td id="tb-w_a"><p>Titel</p></td>
                    <td>:</td>
                    <td><input type="text" name="titel"></td>
                </tr>
                <tr>
                    <td id="tb-w_a"><p>Kategori</p></td>
                    <td>:</td>
                    <td>
                    <select name="kategori">
                    <?php
                    $query = "SELECT id, beskrivelse FROM forum_kategorier";
                    $result = $mysqli->query($query);
                    while(list($id_katogori, $beskrivelse) = $result->fetch_row())
                    {
                        echo "<option value=\"$id_katogori\">$beskrivelse</option>";  
                    }
                    ?>
                    </select>
                    </td>
                </tr>
            </table>
        <textarea name="tekst_2" style="width:500px; height:170px;"></textarea><br />
        <input type="submit" value="Opret indhold" name="godkendt_indhold">
    </form> 
```

*但是这里我没有点击提交按钮*

**错误在这里**

> 警告：无法修改标头信息 - 标头已由第 50 行 /home/jesperbo/public_html/xx.dk/bruger_forum_opretindhold.php 中的（输出开始于 /home/jesperbo/public_html/xx.dk/bruger_forum_opretindhold.php:26）发送

我也尝试过这样做，但因此也会出错。

我在这里试试 agani :)

```
<form action="http://xxx.dk/bruger-forum-godkendt/" method="post">
            <table border="0">
                <tr>
                    <td id="tb-w_a"><p>Titel</p></td>
                    <td>:</td>
                    <td><input type="text" name="titel"></td>
                </tr>
                <tr>
                    <td id="tb-w_a"><p>Kategori</p></td>
                    <td>:</td>
                    <td>
                    <select name="kategori">
                    <?php
                    $query = "SELECT id, beskrivelse FROM forum_kategorier";
                    $result = $mysqli->query($query);
                    while(list($id_katogori, $beskrivelse) = $result->fetch_row())
                    {
                        echo "<option value=\"$id_katogori\">$beskrivelse</option>";  
                    }
                    ?>
                    </select>
                    </td>
                </tr>
            </table>
        <textarea name="tekst_2" style="width:500px; height:170px;"></textarea><br />
        <input type="submit" value="Opret indhold" name="godkendt_indhold">
    </form> 
```

**将信息发送至**

```
<?php
            if($stmt = $mysqli->prepare("INSERT INTO `forum_traede` (`kategori_id`, `titel`, `bruger_id`, `dato`, `tekst`) VALUES (?, ?, ?, NOW(), ?)"))
            {
                $stmt->bind_param('ssss', $kategori, $titel, $bruger_id, $tekst);
                $kategori = $_POST["kategori"];
                $titel = $_POST["titel"];
                $bruger_id = $_SESSION["user_id"];
                $tekst = $_POST["tekst_2"];

                $stmt->execute();
                $stmt->close();

                header ('Location: ../bruger-forum');
            }
            else
            {
                echo 'Der opstod en fejl i erklæringen: ' . $mysqli->error;
            }
        ?> 
```

这里有错误！致命错误：在第 2 行的 /home/jesperbo/public_html/xxx.dk/bruger_forum_opretindhold_godkendt.php 中的非对象上调用成员函数 prepare()

我试过了

```
header ('Location: http://xxx.dk/bruger-forum/'); 
```

和

```
header ('Location: ../bruger-forum'); 
```

我向您展示的第一件事是，当它向数据库发送信息时，它应该只是“跳”回论坛页面。我建立了我的网址。htaccess

随意询问是否有任何问题，但正如我所说，我来自丹麦并且**不是最好的英语**

**谢谢你看！！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:22:41.660

首先，如果您正在写入标题，则它需要在输出任何其他内容之前。在这种情况下，由于`<form>`页面顶部的标签而失败 - 如果您将其移动到`<table>`标签上方，那应该会有所帮助。

其次，您的`Fatal Error`消息意味着您的数据库连接不起作用；你在哪里定义`$mysqli`？您确定您需要的所有信息都是正确的吗？尝试在连接代码周围添加一些调试信息，以查看失败的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:25:01.397

错误是您在向浏览器发送一些输入后尝试设置标题。如果您想重定向，您可以将代码移至开头并发送`header('location:...);`BEFORE 任何内容。

或使用类似的东西`echo "<script>window.location = 'yourURL'</script>"`

和致命错误，这是因为您的对象没有被创建。

# android - 如何创建或获取用于向 C2DM 发送通知的密码？

> ID：11086874
> 
> 赞同：0
> 
> 时间：2012-06-18T16:15:53.237
> 
> 标签：android, .net, push, android-c2dm

我刚刚注册了[C2DM](https://developers.google.com/android/c2dm/signup)，并收到了以下电子邮件：

> 感谢您对 Android 云到设备消息传递 (C2DM) 的关注。我们已接受您加入试用组的申请。您请求作为应用程序发件人帐户的 Google 帐户：some.fake@email.com 已添加到我们的允许发件人列表中，您应该可以在第二天开始使用它向 Android 2.2 设备发送消息或者。如果您想更改用于发送消息的角色帐户，请再次填写注册表单。默认情况下，所有新的发件人帐户都被授予初始生产级配额，如下所述： [http ://code.google.com/android/c2dm/quotas.html](http://code.google.com/android/c2dm/quotas.html) 如果您需要更高的配额，请按照该页面上的说明提交配额请求。请注意，由于 Android Cloud to Device Messaging 目前是实验室中的 API，我们保留随时从根本上更改服务和相关配额的权利。有关 Android Cloud 到设备消息传递的更多信息，您可以阅读我们的文档和示例代码： [http](http://code.google.com/android/c2dm/) ://code.google.com/android/c2dm/ 如果您有任何问题或反馈，请访问 Google 群组： [http: //groups.google.com/group/android-c2dm](http://groups.google.com/group/android-c2dm) 请不要回复此电子邮件，因为发件人地址不受监控。谢谢，Android Cloud 到设备消息传递团队

所以现在我准备开始向 C2DM 推送一些通知。我有一个使用[DroidPimp](https://bitbucket.org/ducas/droidpimp)的基于 .net 的服务器端实现：

```
public class C2DMNotificationService : INotificationService<IAndroidPushNotification, C2DMChannel, IAndroidPhoneEndpoint>
{
    public void SendNotification(IAndroidPushNotification notification, C2DMChannel channel, IAndroidPhoneEndpoint endpoint)
    {
        var pusher = new Pusher();
        if (string.IsNullOrEmpty(notification.AuthToken))
        {
            // Note: this authtoken is refreshed periodically, so we need to think about how often we grab a new authtoken from google.
            var source = string.Format("{0}-{1}-{2}", channel.CompanyName, channel.ApplicationName, channel.Version);
            var loginResp = pusher.ClientLogin(channel.AccountEmailAddress, channel.AccountPassword, source);
            if (loginResp.StatusCode != ClientLoginStatusCode.Ok)
                throw new Exception("Got a bad login status: " + loginResp.StatusCode);
            notification.AuthToken = loginResp.AuthToken;
        }
        var sendMessageResp = pusher.SendMessage(endpoint.RegistrationId, notification.CollapseKey, notification.Values, notification.AuthToken, notification.DelayWhileIdle);
        // TODO: check response status..
    }
} 
```

如您所见，该`pusher.ClientLogin`方法需要密码，但我没有密码。我有一个发件人帐户，这是我用来注册 C2DM 的帐户，但我没有密码。**密码在哪里或如何获得？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:08:09.877

正如保罗所说，您需要使用由 Google 控制的有效电子邮件帐户注册 C2DM 服务。它不必是 gmail 帐户，但如果它是通过 google 注册的电子邮件服务，它需要使用 google 电子邮件服务器（即使用 you@yourdomain.com）。

一旦你注册了 C2DM 服务[https://developers.google.com/android/c2dm/signup](https://developers.google.com/android/c2dm/signup)使用该帐户，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:24:22.860

您必须使用“谷歌控制”的电子邮件，例如 gmail 帐户。这就是 C2DM 的工作方式，发送者和接收者的所有身份验证都基于谷歌帐户。我刚刚再次注册了 C2DM，这次使用的是 gmail 帐户，然后使用我的 gmail 密码发送推送通知，果然成功了——我取回了一个身份验证令牌。

# sql - 通过完全外连接从多个字段中查找最小日期

> ID：11086881
> 
> 赞同：2
> 
> 时间：2012-06-18T16:16:17.837
> 
> 标签：sql, tsql, sql-server-2008-r2

这是[sqlfiddle上的问题](http://sqlfiddle.com/#!3/6061b/2)

我有几张表完全外联在一起。在这个问题中，我们简化为只有 2 个表格。FULL JOINS 的原因是生产表有许多不一致的字段，例如 dates1 可能包含 Revenue 和 Compensation，而 dates2 可能包含 NumHeadBangers 和 NumNormalBods；所以在以下之间做 UNION ALL 是行不通的：

```
create table dates1 
(
USERID INT,
[Date] datetime
)
insert into dates1
values
( 1, '01 jan 2012'),
( 2, '03 jan 2012')

create table dates2 
(
USERID INT,
[Date] datetime
)
insert into dates2
values
( 2, '01 jan 2012'),
( 4, '04 jan 2012') 
```

对于每个 USERID，我们需要找到最短日期。这是尝试，我使用了 COALESCE，因为在生产脚本中可能有 4 或 5 个表加入：

```
SELECT 
  COALESCE(x.USERID,y.USERID) USERID
  , CASE WHEN x.[Date] < Y.[DATE] 
        THEN x.[Date] 
        ELSE Y.[DATE] END [DATE]
FROM 
dates1 x 
FULL OUTER JOIN dates2 y 
    ON x.USERID = y.USERID 
```

以上返回以下内容，这对于用户 1 来说是错误的，因为我们要求用户 1 的最小日期为 2012 年 1 月 1 日。此外，一旦我们处理 4 个表，上述 CASE 语句就会变得非常混乱。

查找这些日期的可扩展脚本是什么？

我一直在使用的一个混乱的解决方案是：

```
SELECT 
  COALESCE(x.USERID,y.USERID) USERID
  , CASE 
      WHEN ISNULL(x.[Date],'1 JAN 2020') < ISNULL(Y.[DATE],'1 JAN 2020') 
      THEN ISNULL(x.[Date],'1 JAN 2020') 
      ELSE ISNULL(Y.[DATE],'1 JAN 2020') 
  END [DATE]
FROM 
  dates1 x 
  FULL OUTER JOIN dates2 y 
     ON x.USERID = y.USERID 
```

![在此处输入图像描述](../Images/97cc355918902ce3cf16821b9c94bca4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:21:30.803

您需要处理比较导致错误的情况，因为一侧为 NULL：

```
CASE WHEN x.[Date] < Y.[DATE] OR Y.[DATE] IS NULL 
```

您也可以尝试一些更简单的方法：

```
SELECT userid, MIN(date) FROM
(SELECT userid, date FROM dates1
 UNION ALL SELECT userid, date FROM dates2
 -- ...
) AS x
GROUP BY userid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T08:24:10.883

在这种情况下我`CROSS APPLY`用来减少*（但不是消除）*代码重复的方式（最小的最小的最小等）如下......

```
CREATE FUNCTION min_datetime (datetime1 AS DATETIME, datetime2 AS DATETIME)
RETURNS TABLE
AS
RETURN
  SELECT CASE WHEN datetime1 < datetime2 THEN datetime1
              WHEN datetime1 > datetime2 THEN datetime2
              WHEN datetime1 IS NULL     THEN datetime2
                                         ELSE datetime1
         END AS val
GO;

SELECT
  COALESCE(a.id, b.id, c.id, d.id, e.id)                    as id,
  [min_datetime_d_e].val                                    as date,
  a.fields,  b.fields,  c.fields,  d.fields,  e.fields
FROM
                  a
  FULL OUTER JOIN b ON a.id = b.id
  FULL OUTER JOIN c ON b.id = COALESCE(a.id, b.id)
  FULL OUTER JOIN d ON c.id = COALESCE(a.id, b.id, c.id)
  FULL OUTER JOIN e ON d.id = COALESCE(a.id, b.id, c.id, d.id)
  CROSS APPLY dbo.min_datetime(a.date,               b.date) AS min_datetime_a_b
  CROSS APPLY dbo.min_datetime(min_datetime_a_b.val, c.date) AS min_datetime_b_c
  CROSS APPLY dbo.min_datetime(min_datetime_b_c.val, d.date) AS min_datetime_c_d
  CROSS APPLY dbo.min_datetime(min_datetime_c_d.val, e.date) AS min_datetime_d_e 
```

**编辑：**对 OP 发布的答案进行轻微重构。

```
;WITH myCTE (UserID, [Date])
AS
  (
    SELECT UserID,[Date]FROM table1
    UNION ALL
    SELECT UserID,[Date]FROM table2
    UNION ALL
    SELECT UserID,[Date]FROM table3
  )
      , unique_by_user (UserID, [Date])
       (
              SELECT UserID, MIN([Date]) FROM myCTE GROUP BY UserID
       )
SELECT  
    u.UserID, u.[Date]
  , x.field1, x.field2
  , y.field3, y.field4
  , z.field5, z.field6
FROM
       unique_by_user u
  LEFT OUTER JOIN table2 x  
      ON u.USERID = x.USERID 
  LEFT OUTER JOIN table3 z  
      ON u.USERID = y.USERID 
  LEFT OUTER JOIN myCTE k  
      ON u.USERID = z.USERID 
```

比较上述两个选项的性能会很有趣。最初我认为处理数据两次的成本（一次在 CTE 中，然后在 OUTER JOIN 中再次加入所有记录）会使情况变得更糟。但我现在只是不确定，我很想测试和比较，但我今天没有时间 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:48:38.897

[SQLfiddle](http://sqlfiddle.com/#!3/1e3ab/2)中的实时副本

这个问题在此过程中发生了一些变化，这并不理想，但这就是我最终得到的结果：

```
 create table table1 
    (
      UserID int,
      [Date] datetime,
      [field1] int,
      [field2] int
    )
    insert into table1
    values
    ( 1,'01 jan 2012',10,10),
    ( 2,'03 jan 2012',20,20)

    create table table2 
    (
      UserID int,
      [Date] datetime,
      [field3] int,
      [field4] int
    )
    insert into table2
    values
    ( 2,'01 jan 2012',30,30),
    ( 4,'04 jan 2012',40,40)

    create table table3 
    (
      UserID int,
      [Date] datetime,
      [field5] int,
      [field6] int
    )
    insert into table3
    values
    ( 2,'01 jan 2012',30,30),
    ( 4,'04 jan 2012',40,40) 
```

这方面的 SQL - 这实际上是 Aaron 提出的想法，但略有不同，因为它使用 cte 馈入完整的外部连接：

```
;WITH myCTE (UserID, [Date])
AS
  (
    SELECT UserID,[Date]FROM table1 GROUP BY UserID,[Date] 
    UNION
    SELECT UserID,[Date]FROM table2 GROUP BY UserID,[Date] 
    UNION
    SELECT UserID,[Date]FROM table3 GROUP BY UserID,[Date]     
  )
      , myExtraCTE(UserID, [Date])

     AS
     (
     SELECT UserID, [Date] = MAX(Date) FROM myCTE GROUP BY UserID 
     ) 
SELECT  
  COALESCE(x.UserID,y.UserID, z.UserID ,k.UserID) USERID
  , MIN(k.[Date]) [Date]
  , SUM(ISNULL(x.field1,0.0)) field1
  , SUM(ISNULL(x.field2,0.0)) field2
  , SUM(ISNULL(y.field3,0.0)) field3
  , SUM(ISNULL(y.field4,0.0)) field4
  , SUM(ISNULL(z.field5,0.0)) field5
  , SUM(ISNULL(z.field6,0.0)) field6
FROM  
  table1 x  
FROM  
  table1 x  
  FULL OUTER JOIN table2 y  
      ON y.USERID  = x.USERID
  FULL OUTER JOIN table3 z  
      ON z.USERID  = coalesce(x.USERID,y.USERID)
  FULL OUTER JOIN myExtraCTE k  
      ON k.USERID  = coalesce(x.USERID,y.USERID,z.USERID)
GROUP BY
  COALESCE(x.UserID,y.UserID, z.UserID ,k.UserID) 
```

# rest - 如何使用来自服务堆栈 AuthService 的 cookie/会话在客户端上加载经过身份验证的用户？

> ID：11086883
> 
> 赞同：3
> 
> 时间：2012-06-18T16:16:23.703
> 
> 标签：rest, silverlight-5.0, servicestack

我正在使用 Silverlight 5 通过 JsonServiceClient 使用 ServiceStack REST 服务，现在可以了。

此时，我可以登录/注销托管在 Asp.Net 中路径 /api 的 ServiceStack。

但是在我登录后，如果用户刷新托管 Silverlight 的浏览器的当前页面，Silverlight 应用程序将重新加载并且会话/cookie 信息消失，迫使用户再次登录/密码。这是不受欢迎的行为。

在服务器端，我使用的是 Default CredentialsProvider：

```
var appSettings = new AppSettings();
var credentialsProvuder = new CredentialsAuthProvider(appSettings);

//Default route: /auth/{provider}
Plugins.Add(new AuthFeature(() => new CustomUserSession(),
new IAuthProvider[] { credentialsProvuder })); 
```

在客户端，我设置了 RememberMe = true：

```
 public static void TryLogin(string userName, string password, bool rememberMe, Action<AuthResponse, Exception> callBack)
    {
        AuthDto.UserName = userName;
        AuthDto.Password = password;
        AuthDto.RememberMe = rememberMe;
        Client.SendAsync<AuthResponse>(AuthDto, r => TryLoginResponse(callBack, r, null),
                         (r, e) => TryLoginResponse(callBack, r, e));
    } 
```

为了测试服务，我使用了 NuGet 模板提供的默认 Hello 服务。此外，我在该类上添加了一个 [Authenticate] 属性，它工作正常（该服务仅在我登录后才被自动化）。

查看JsonServiceClient的源码，发现CookieContainer是在第一次请求之后创建的。

我试图对服务器进行虚拟调用，只是为了查看服务器是否将信息重新发送到浏览器，因此 JsonServiceClient 使用经过身份验证的用户信息填充 cookiecontainer，但没有成功。

我的问题是：如何在客户端再次获得身份验证，因为它之前已经过身份验证？当我调用某种方法（HTTP GET server/api/auth/GetUser?）时，服务器是否可以重新发送 cookie/会话？

编辑

经过一段时间检查 AsyncServiceClient 类的源代码后，我发现：

// 组装ServiceStack.Common.3.8.3\lib\sl5\ServiceStack.Common.dll

```
 HttpWebRequest webRequest = (HttpWebRequest) (this.UseBrowserHttpHandling ? WebRequestCreator.BrowserHttp : WebRequestCreator.ClientHttp).Create(new Uri(uriString));
  if (this.StoreCookies && !this.UseBrowserHttpHandling)
  {
    if (this.ShareCookiesWithBrowser)
    {
      if (this.CookieContainer == null)
        this.CookieContainer = new CookieContainer();
      this.CookieContainer.SetCookies(new Uri(this.BaseUri), HtmlPage.Document.Cookies);
    }
    webRequest.CookieContainer = this.CookieContainer;
  } 
```

如上面的代码所示，AsyncServiceClient 在每次请求之前检查 CookieContainer，如果它为 null ，则将 Silverlight 的 WebClient 中的 Cookie 设置到浏览器。

好的，现在我们可以使用 cookie，因为我确信它们是从客户端发送到浏览器的。

那么，如何在不重新发送用户名和密码的情况下，根据现有的 X-UAId 重新认证用户？

我想如果在客户端，我向 AuthService 发送一个空的 GET 并且服务验证 cookie、会话并自动向 JsonServiceClient 返回一个响应，表明用户已通过身份验证。

我想要的类似于向服务器发出请求的 WCF Ria 服务“WebContext.Current.Authentication.LoadUser()”，如果服务器上的用户经过身份验证，则返回当前用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:48:25.290

这可能有点晚了，但我遇到了同样的问题，问题出在 AsyncServiceClient 中。当身份验证失败时，客户端发送另一个添加了 BasicAuthentication 标头的请求。但是，当在此行中创建第二个请求时

[https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/ServiceClient.Web/AsyncServiceClient.cs#L405](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/ServiceClient.Web/AsyncServiceClient.cs#L405)

那么 CookieStore 未设置，因此当服务器响应时不会存储 cookie。在上述行之后，将其放入：

```
if (StoreCookies)
{
    requestState.WebRequest.CookieContainer = CookieContainer;
} 
```

# lua - 在 Lua 解释器中获取命令行参数

> ID：11086890
> 
> 赞同：2
> 
> 时间：2012-06-18T16:16:51.537
> 
> 标签：lua

如何在 Lua 中调用函数？我是 Lua 的新手，找不到非常简单的方法。我编写了一个 test.lua 并使其可执行。在里面我放了这个：

```
function Double(n)
 return 2*n
end

print(Double(15)) 
```

如果我打电话`test.lua`，它会返回 30，好的。

现在我删除该`print`行并希望能够使用以下内容调用该函数：

```
test.lua 15 
```

它不起作用。如何在不硬编码第一个参数的情况下从命令行或 Lua shell 调用函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:28:15.963

您可以将参数传递给将出现在 arg 全局中的脚本。

例如

```
function Double(n)
 return 2*n
end

print(Double(arg[1])) 
```

[http://www.lua.org/pil/1.4.html](http://www.lua.org/pil/1.4.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-13T14:53:08.597

您还可以使用`...`获取命令行参数：

```
local input = ...
if input then
  local Double
  Double = function(input)
    return 2 * input
  end
  return print(Double(input))
end 
```

# iphone - 通过颜色选项更改颜色

> ID：11086892
> 
> 赞同：-2
> 
> 时间：2012-06-18T16:16:55.640
> 
> 标签：iphone, ios, ios5

我正在开发我的应用程序。我想给用户几个按钮来改变颜色，他们可以通过这些按钮改变颜色。颜色是红色、蓝色、紫色、黄色、白色和原始颜色（想要使用 RGB 值）每当用户点击任何颜色选项时，应用程序的整个背景颜色都会更改并将其自身设置为默认值，因此无论何时打开应用程序，都会选择所选颜色是背景颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:26:08.723

请参考[Custum Color Picker](http://www.fabiancanas.com/entry/iphone-color-picker)链接一组该颜色以满足您的要求

# java - 用于开始实际开发的 Android 应用程序参考

> ID：11086895
> 
> 赞同：0
> 
> 时间：2012-06-18T16:16:58.913
> 
> 标签：java, android, mobile

我最近开始在 Android 上进行认真的开发。我知道Java并介绍了Android SDK，但我还没有在Android中做过任何好的项目。虽然我为 Android 开发了一两个应用程序，但我对自己作为程序员的工作并不满意。我不能非常欣赏我的应用程序及其架构。我觉得推荐一些好的现实世界应用程序会极大地改善我的应用程序开发。我知道我可以在 GitHub 上搜索并喜欢，而且我有，但结果很多，我对我可以选择哪些感到困惑。

你们中的许多人可能在你的职业生涯中遇到过很好的申请，我现在需要你的帮助。可以分享一下你觉得架构不错，值得学习和参考的Java开发的Android应用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:20:49.317

[Commonsware](https://github.com/commonsguy)可重用组件及其附带的测试应用程序是一个很好的地方，另一个是 Android SDK 附带的示例应用程序。他们应该一起给你足够的开始。

# xml - 默认命名空间中的 XML 属性名称和元素？

> ID：11086899
> 
> 赞同：2
> 
> 时间：2012-06-18T16:17:13.533
> 
> 标签：xml, xsd, xml-namespaces

应如何解释 XML 命名空间规范中的以下内容？

> 默认命名空间声明适用于其范围内的所有无前缀元素名称。默认命名空间声明不直接应用于属性名称；无前缀属性的解释由它们出现的元素决定。

我的直观理解是，不带前缀的属性应该被解释为属于它们所属元素的命名空间。但是，以下示例似乎证明了这一点：

架构：

```
<xs:schema xmlns:myns="http://test.com/xsd/foo" elementFormDefault="qualified" 
           targetNamespace="http://test.com/xsd/foo" version="1.0" 
           xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:attribute name="Id" type="xs:string" />
    <xs:element name="Foo">
        <xs:complexType>
            <xs:attribute ref="myns:Id" />
    </xs:complexType>
    </xs:element>
</xs:schema> 
```

通过验证的示例：

```
<a:Foo xmlns:a="http://test.com/xsd/foo" a:Id="123" /> 
```

验证失败的示例：

```
<Foo xmlns="http://test.com/xsd/foo" Id="123" /> 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:29:03.263

这里有两个单独的问题。第一个是关于 XML，第二个是关于 XML Schema (XSD)。

在 XML 中（具体而言，如 XML 命名空间建议中所定义），无前缀属性不在命名空间中。一些评论员将此解释为名称空间未定义（即应用程序定义），但通常且更简单的解释是它为空：没有名称空间。如果您在这种情况下请求命名空间 URI，大多数 API 规范将返回 null，有些将返回零长度字符串。

在 XSD 中，全局属性声明在声明它的 XML 模式文档的目标命名空间中定义一个属性，或者如果包含的模式文档未指定目标命名空间，则在无命名空间中定义一个属性。出于这个原因，使用全局属性声明是不常见的。一种常见的技术是声明属性组（有时，属性组包含单个属性）；在此类属性组中声明的任何属性都是局部声明而不是全局声明，因此它们不会继承包含模式文档的目标命名空间，除非您说 attributeFormDefault="qualified"，这将是一件相当奇怪的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:17:14.827

似乎属性 Id 在任何命名空间之外解释并且与架构不匹配，因为架构中的属性具有命名空间。但是，如果 schema 声明不同，如下所示：

```
<xs:schema xmlns:myns="http://test.com/xsd/foo" elementFormDefault="qualified" targetNamespace="http://test.com/xsd/foo" version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="Foo">
        <xs:complexType>
          <xs:attribute name="Id" type="xs:string" />
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

先前无效的文档验证，反之亦然。原因似乎是 XML Schema 定义了一个 ettribute 的命名空间是由`targetNamespace`其父`<schema>`元素的属性定义的，或者如果没有，则没有目标命名空间。在后一种情况下，父级是`<complexType>`而不是`<schema>`，因此该属性没有获得命名空间。

然而，我原来的问题中关于解释无前缀属性的注释仍然令人费解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:47:32.983

查看我之前发布的类似问题的详细答案：

[getAttributeNS 的行为是什么？](https://stackoverflow.com/questions/10665596/what-is-the-behavior-of-getattributens/10665769#10665769)

属性没有命名空间，除非明确地以 1 为前缀。这个想法是，与可以混入其他文档的元素不同，属性实际上只在携带它们的元素的范围内才有意义。很少有例外，`xml:lang`但绝大多数在逻辑上都被（并因此绑定到）他们拥有的元素“限定”。因此在你真正需要之前没有命名空间。

# jquery - 将新事件添加到完整日历后，未呈现事件

> ID：11086904
> 
> 赞同：1
> 
> 时间：2012-06-18T16:17:44.220
> 
> 标签：jquery, events, fullcalendar

我在我的网络中使用全日历 jquery 插件。我有一个问题，在将新事件添加到日历后，我必须按一些查看按钮才能将我的事件呈现到日历中。

```
var myEvent = {
    title: subject.toString(),
    start: d1,
};

$("#calendar").fullCalendar( 'renderEvent', myEvent, true );            
$("#calendar").fullCalendar( 'rerenderEvents' ); 
```

建议？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:35:23.460

看起来您的日历位于隐藏的 DIV 中。如果将渲染/重新渲染调用添加到显示/取消隐藏此 DIV 的函数，则事件应该正确渲染。

# sql - 列总计，tSQL Pivot

> ID：11086907
> 
> 赞同：2
> 
> 时间：2012-06-18T16:17:50.630
> 
> 标签：sql, sql-server-2008, tsql, pivot, common-table-expression

我目前正在开发这个脚本，作为一个支点，它为我提供了标准普尔评级的成熟度百分比。我的行总计如下：

```
;WITH CTE
AS
(
SELECT  PortfolioID
        , MaturityBand
        , SandPRating
        , MaturitySort
        , (count(*)over(partition by PortfolioID,SandPRating,MaturityBand)*100.0)   --/Test2)*100 As Pct
        /
        (
            Select COUNT(*)
            From     @Worktable B
            Where B.PortfolioID = A.PortfolioID
        ) As Pct

FROM    @Worktable AS A
--WHERE SandPRating IS NOT NULL

UNION All

SELECT   PortfolioID
        , MaturityBand
        , 'SandPRating_Total' AS SandPRating
        , MaturitySort
        , COUNT(*) * 100.0
        /
        (
            Select COUNT(*)
            From     @Worktable AS B
            Where B.PortfolioID = A.PortfolioID
        ) AS Total_Pct
FROM    @Worktable AS A
--WHERE SandPRating IS NOT NULL 
GROUP BY  PortfolioID, MaturityBand, MaturitySort
)
, CTE2
AS
(
SELECT  MaturityBand
        , SandPRating
        , MaturitySort
        , PCT
FROM    CTE
GROUP BY MaturityBand, SandPRating, MaturitySort, PCT 
)

SELECT   MaturityBand, [AAA],[AA+],[AA],[AA-],[A+],[A],[A-]
    ,[BBB+],[BBB],[BBB-],[BB+],[BB],[BB-],[B+],[B],[B-]
    ,[CCC+],[CCC],[CCC-],[CC],[C],[DDD],[DD],[D],[N.R.]
    ,[N.A.],[WR], [Unass], [SandPRating_Total]   
FROM    Cte2

PIVOT   

(MAX(PCT)
FOR SandPRating
IN      
(
[AAA],[AA+],[AA],[AA-],[A+],[A],[A-]
,[BBB+],[BBB],[BBB-],[BB+],[BB],[BB-],[B+],[B],[B-]
,[CCC+],[CCC],[CCC-],[CC],[C],[DDD],[DD],[D],[N.R.]
,[N.A.],[WR], [Unass], [SandPRating_Total])
) myPiv

ORDER BY MaturitySort 
```

我的支点目前看起来像这样：

```
Maturity Band     AAA     AA     A    A-    BBB+     BBB-    BB+    BB   Total
Less Than 1 yr    2.63%   5%                2%                           9.63%
1 to 5 yrs                       5%         5%                           10%
5 to 10 yrs       5.00%                              5%                  10%
10 to 20 yrs                          2%                                 2%
More than 20 yrs  10%                                         6%    1%   17% 
```

我想要的是这样的：

```
Maturity Band     AAA     AA     A    A-    BBB+     BBB-    BB+    BB   Total
Less Than 1 yr    2.63%   5%                2%                           9.63%
1 to 5 yrs                       5%         5%                           10%
5 to 10 yrs       5.00%                              5%                  10%
10 to 20 yrs                          2%                                 2%
More than 20 yrs  10%                                         6%    1%   17%
Total             17.63   5%     5%   2%    7%       5%       6%    1%   48.63% 
```

但是我想添加列总计，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:26:21.773

我自己来回答这个问题。RecNo 只是：

```
count(*) over (Partition by PortfolioID) 
```

我的脚本现在是：

```
;WITH CTE
AS
(
SELECT  PortfolioID
        , MaturityBand
        , SandPRating
        , MaturitySort
        , SUM((1/RecNo)*100) AS Pct

FROM    @Worktable AS A
--WHERE SandPRating IS NOT NULL
Group by MaturitySort, MaturityBand, SandPRating, PortfolioID

UNION All

SELECT   PortfolioID
        , MaturityBand
        , 'SandPRating_Total' AS SandPRating
        , MaturitySort
        , COUNT(*) * 100.0
        /
        (
            SELECT COUNT(*)
            FROM     @Worktable AS B
            WHERE B.PortfolioID = A.PortfolioID
        ) AS Total_Pct
FROM    @Worktable AS A
--WHERE SandPRating IS NOT NULL 
GROUP BY  MaturitySort, MaturityBand, PortfolioID
)
, CTE2
AS
(
SELECT  Grouping_ID(SandPRating, MaturityBand, MaturitySort) AS ID

     , CASE 
        WHEN Grouping_ID(SandPRating, MaturityBand, MaturitySort) = 3 THEN 'Total' 
        ELSE MaturityBand 
       END                                              AS MaturityBand

     , SandPRating

     , CASE 
        WHEN Grouping_ID(SandPRating, MaturityBand, MaturitySort) = 3 THEN 1000 
        ELSE MaturitySort 
       END                                              AS MaturitySort

     , SUM(Pct) AS PCT

FROM    CTE
GROUP BY ROLLUP (SandPRating
     , MaturityBand
     , MaturitySort)
)
--PIVOT
SELECT  MaturityBand, [AAA],[AA+],[AA],[AA-],[A+],[A],[A-]
    ,[BBB+],[BBB],[BBB-],[BB+],[BB],[BB-],[B+],[B],[B-]
    ,[CCC+],[CCC],[CCC-],[CC],[C],[DDD],[DD],[D],[N.R.]
    ,[N.A.],[WR],[Unass],[SandPRating_Total]     
FROM    (   SELECT SandPRating, MaturityBand, MaturitySort, PCT 
        FROM Cte2
        WHERE   ID = 0 or ID = 3
    ) AS x

PIVOT   (SUM(PCT)
        FOR SandPRating
        IN  ([AAA],[AA+],[AA],[AA-],[A+],[A],[A-]
            ,[BBB+],[BBB],[BBB-],[BB+],[BB],[BB-],[B+],[B],[B-]
            ,[CCC+],[CCC],[CCC-],[CC],[C],[DDD],[DD],[D],[N.R.]
            ,[N.A.],[WR],[Unass],[SandPRating_Total])
    ) myPiv
ORDER BY MaturitySort 
```

# java - 如何重新排序对象列表？

> ID：11086913
> 
> 赞同：1
> 
> 时间：2012-06-18T16:18:09.227
> 
> 标签：java

首先，这听起来像是家庭作业，但事实并非如此。只是我在工作中试图解决的一个问题。

我有一个对象列表，这些对象有一个序列号，表示它们在 UI 列表中的顺序。例子：

```
public class Task {
  Long id;
  String name;
  Long seq;
} 
```

我的 UI 中的表格在表格的每一行上都有“向上”和“向下”链接，用于在列表中上下移动任务。

我正在实现两种方法来处理重新排序。这些方法由 Web UI 中的 ajax 调用。

```
public void incTaskSeq(List<Task> allTasks, Task taskToMove) 
```

例如; 如果我有 t1.seq=1, t2.seq=2, t3.seq=3, t4.seq=4, t5.seq=5 并且我想增加 t3 的位置，那么 t3.seq 变为 4，并且t4.seq 必须变为 3。

```
public void decTaskSeq(List<Task> allTasks, Task taskToMove) 
```

相似地; 如果我有 t1.seq=1, t2.seq=2, t4.seq=3, t3.seq=4, t5.seq=5 并且我想减少 t4 的位置，那么 t4.seq 变为 2，并且t2.seq 必须变为 3。导致：

t1.seq=1, t4.seq=2, t2.seq=3, t3.seq=4, t5.seq=5

我有点坚持最好的方法来做到这一点。

我正在考虑将所有任务放在 HashMap 中，然后按序列号对地图进行排序。然后在map中定位taskToMove，更改序列号，然后更改所有受影响的任务序列。

但这种方法似乎不优雅。有谁知道我应该怎么做？

谢谢，罗伯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:34:26.677

只是让列表保持排序。（除非您总是需要更新序列号）。

```
public void incTaskSeq(List<Task> allTasks, Task taskToMove){
     int movTaskNum = 0;
     for(int i=0;i<allTasks.size();i++){
          if(allTasks.get(i).equals(taskToMove)) 
               movTaskNum = i;
     }
     allTasks.remove(taskToMove);
     allTasks.add(i-1, taskToMove);
} 
```

对不起错别字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:21:30.707

使用 a `Comparator`，这是用于非自然排序的 Java 接口。

```
public TaskSequenceComparator implements Comparator<Task> {

  public int compare(Task one, Task two) {
    return one.getSequence() - two.getSequence();
  }

}

...

List<Task> tasks = ...;
Collections.sort(tasks, new TaskSquenceComaprator());
// tasks is now sorted by sequence. 
```

您可以创建多个`Comparator`类来实现每种支持的排序。然后，当您需要以特定方式对列表进行排序时，您可以从中进行选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T16:21:56.917

`Comparator`为您要排序的每个标准实施一个。

创建一个新的有序`Collection`对象（可能是 TreeSet），将其传递给所需的 Comparator。做 .addAll 的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T16:31:05.697

移动项目时使用双向链表并交换序列号。

# android - 如何停止 button.performClick();

> ID：11086915
> 
> 赞同：0
> 
> 时间：2012-06-18T16:18:26.153
> 
> 标签：android, click, handler

我很抱歉，如何停止`button.performClick();`

当我运行我的程序时，我调用了`button.performClick();`，但按钮单击不会在语句中停止。和我的消息来源：

```
new Handler().postDelayed(new Runnable() {
        public void run() {
            button.performClick();
        }
    },(3*1000));
    if (accuracy<=15){
        button.setClickable(false);
    } 
```

我想要准确度 <= 15 tombol stop `performClick();`。`performClick();` 因为我制作而停止的真正语法`button.setClickable(false);`是错误的。而条件语句为真。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:26:32.283

尝试这个 ：

```
new Handler().postDelayed(new Runnable() {
        public void run() {
            if (accuracy<=15){
               return;
             }
            button.performClick();
        }
    },(3*1000)); 
```

# objective-c - NSDateFormatter 没有给我正确的

> ID：11086916
> 
> 赞同：0
> 
> 时间：2012-06-18T16:18:28.460
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

我在显示时间。它会告诉我：TIME :2012-06-18 23:00:00 +0000 但是在使用 NSDateFormatter 之后我不知道为什么它给了我 00:00:00 AM

```
NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];

[dateFormatter setDateFormat:@"HH:mm:ss a"];

NSLog(@"TIME :%@",self.startDate);

NSDate *date = [NSDate date];
NSString * _startTime = [dateFormatter stringFromDate:date];
NSLog(@"current time : %@",_startTime);
NSString * _startTime1 = [dateFormatter stringFromDate:self.startDate];
NSLog(@"Start time : %@",_startTime1);
[dateFormatter release];

**Result is**

TIME :2012-06-18 23:00:00 +0000
current time : 17:05:41 PM
Start time : 00:00:00 AM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:36:26.457

您首先`NSLog`以 GMT 时间输出日期（注意尾随的 +0000）。一个`NSDateFormatter`对象会将日期格式化为指定的时区。您的`NSLog`陈述显示，`self.startDate`在至少一个时区中，存储的日期恰好是上午 00:00:00，并且格式化程序设置为该时区。格式化程序将默认为设备的时区。您可以将格式化程序的时区设置为从 GMT 开始的 0 秒，以查看最后一条`NSLog`语句中的 23:00:00 PM：

```
[dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]]; 
```

# c# - 无法在放置在 datagridView 上的文本框中输入点或字符

> ID：11086917
> 
> 赞同：0
> 
> 时间：2012-06-18T16:18:46.747
> 
> 标签：c#, winforms, datagridview

我正在为 datagridview 实现自定义过滤器。自定义过滤器是一个用户控件，它有一个允许用户输入文本的文本框。

当用户选择特定列进行过滤时，我将过滤器用户控件添加到网格控件，然后将其显示在所选列的下方。

问题：当用户尝试在文本框中输入过滤器文本时，它只接受数值和字符，不允许点或某些字符，如！”。但是，如果用户单击删除键，从那时起文本框接受所有输入字符。

这可能与用户控件被添加到 Grid 的控件集合的事实有关，并且网格以不同的方式使用这些事件..？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:28:55.973

不要将控件添加到网格的控件集合中，而是添加到表单或容器的集合中 - 然后，当您想在数据网格前面显示控件时，只需调用过滤器控件的 BringToFront()，完成过滤后只需调用 Hide( ) 或 SendToBack() 所以它再次变得不可见。

# java - 我应该使用“错误：”回调还是只检查 ajax 调用中返回的“数据”？

> ID：11086927
> 
> 赞同：0
> 
> 时间：2012-06-18T16:19:32.057
> 
> 标签：java, jquery, servlets

这是我提交 ajax 请求的方式：

```
$.ajax({
            url: "myurl",       
            type: 'POST',
            dataType : "text",
            data : ({
                json : myjson
            }),
            success : function(data) {

                if(data == 'success'){
                    //alert('success');
                }
                else {
                    alert('fail');
                }

                };
            }

        }); 
```

在 java 中，我只返回包含“成功”或“失败”的字符串，具体取决于是否抛出异常：

伪代码：

```
try {
return "success";
}
catch (Exception e){
return "fail";
} 
```

这足以代替使用 ajax 错误回调吗？如果还不够，应该如何使用这个回调以及它检查哪些额外的失败条件？

```
 error : function() {
                alert ('error');
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:23:18.883

回调的目的`error`不同：如果在发送请求或接收响应期间发生错误，jQuery 将调用该函数。例如，如果您的服务器没有返回答案而是“500 Internal Server Error”（或任何其他错误），则`success`根本不会调用回调函数。如果您定义了`error`回调，那么它将被调用 - 您将有一些机会找出错误是什么。

仅仅因为您的服务器工作正常并不意味着不会发生通信错误：例如，它可能是“网关超时”、“没有到主机的路由”等。

最后，如果您声明`dataType: json`（我知道它不适用于您的示例）但无法解析返回的数据（即它不是格式良好的 JSON 字符串），`error`则将调用您的函数而不是您的`success`函数。

# jquery - jQuery - 单击时单击（）不起作用 在一个

> ID：11086934
> 
> 赞同：3
> 
> 时间：2012-06-18T16:19:57.993
> 
> 标签：jquery

尝试单击动态生成的列表中的项目，但该`$.click()`功能不会触发。

列表的 HTML：

```
<div>
    <ul id="site_list"> </ul>
</div> 
```

jQuery 生成列表（按预期工作，生成具有所需类属性的一长串数据）：

```
var sites =[];
    $.getJSON("php/ABC.php", function(result){
        $.each(result.Sites, function(i,v){
            sites.push('<li class="site" id="site_'+ ABC + '</li>');
        });

        $('#site_list').append(sites.join(''));
    }); 
```

单击列表时触发jQuery（不起作用...它不会引发错误...只是无法响应。我也尝试过`$('#site')`，但无济于事。我怀疑这是由于我的方法m 用于生成`<ul>`...某事正在阻止 DOM 正确识别 UL 中的每个元素。：

```
$('li').click(function(){
    $(this).toggleClass("site_selected");
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T16:20:46.843

```
$('#site_list').on('click', 'li', function(){
    $(this).toggleClass("site_selected");
}); 
```

当您`li`动态添加时，您需要将事件处理程序委托给`li`.

* * *

### 笔记

委托事件结构**[`.on()`](http://api.jquery.com/on)**如下：

```
$(container).on(eventName, target, handlerFunction) 
```

这里`container`指向`Static-element`包含`target`元素并在页面加载时属于 DOM 的 a。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-18T01:30:36.023

上面的代码看起来不错。我刚刚处理了同样的问题，**代码悖论**一针见血。输入是动态加载的，所以如果我们在 $(document).ready(function(){...} 存在之前将该代码放入，它将无法工作。

只要把这段代码...

```
 $('li').click(function(){
        $(this).toggleClass("site_selected");
    }); 
```

在同一函数中动态生成列表之后（不在文档就绪函数中）。如果在元素初始化之前创建了点击功能，那就不行了。

以另一种方式执行此操作可能会有优势：

```
 $('#site_list').on('click', 'li', function(){ 
```

然而，它对我来说很好用......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:20:41.957

尝试“打开”而不是“点击”。

```
$('li').on('click', function(){ $(this).toggleClass('site_selected') } ); 
```

# java - 包含 JTable 的 ScrollPane 占用容器的高度

> ID：11086938
> 
> 赞同：2
> 
> 时间：2012-06-18T16:20:04.233
> 
> 标签：java, swing, jtable, scrollpane

我有一个`ScrollPane`并且`JTable`应该只有一行数据。

```
String[] daysOfWeek = {"Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"};
        String[][] data = {{"None","None","None","None","None","None","None"}};

        JTable mTable = new JTable(data, daysOfWeek);

        JScrollPane scrollPane = new JScrollPane(mTable);
        mTable.setFillsViewportHeight(false); 
```

我希望它`ScrollPane`适合表格的边界，但目前 Scrollpane 的高度占据了整个容器，使它看起来非常难看。我不明白为什么，因为我设置了`mTable.setFillsViewportHeight(false)`.

欢迎任何帮助如何实现`ScrollPane`不超出表格大小的范围。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T16:25:06.430

您可以使用`table.setPreferredScrollableViewportSize(table.getPreferredSize());`

编辑

![在此处输入图像描述](../Images/d005957f45582aab9e90383f7238f9d9.png)

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.util.Random;
import java.util.concurrent.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.table.DefaultTableModel;

public class ChangeNotifiersOnEvent extends JFrame implements Runnable {

    private static final long serialVersionUID = 1L;
    private boolean runProcess = true;
    private Random random = new Random();
    private javax.swing.Timer timerRun;
    private Executor executor = Executors.newCachedThreadPool();
    private String[] columnNames = {"Source", "Hit", "Last", "Ur_Diff"};
    private JTable table;
    private Object[][] data = {{"Swing Timer", 2.99, 5, 1.01},
        {"Swing Worker", 7.10, 5, 1.010}, {"TableModelListener", 25.05, 5, 1.01}};
    private DefaultTableModel model = new DefaultTableModel(data, columnNames);

    public ChangeNotifiersOnEvent() {
        table = new JTable(model) {

            private static final long serialVersionUID = 1L;

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        model.addTableModelListener(new TableModelListener() {

            @Override
            public void tableChanged(TableModelEvent tme) {
                if (tme.getType() == TableModelEvent.UPDATE) {
                    if (tme.getColumn() == 1 && tme.getLastRow() == 2) {
                        double dbl = ((Double) table.getModel().getValueAt(2, 1))
                                - ((Integer) table.getModel().getValueAt(2, 2));
                        table.getModel().setValueAt(dbl, 2, 3);
                    } else if (tme.getColumn() == 1 && tme.getLastRow() == 0) {
                        prepareUpdateTableCell();
                    } else if (tme.getColumn() == 1 && tme.getLastRow() == 1) {
                        executor.execute(new MyTask(MyTask.UPDATE_TABLE_COLUMN));
                    }
                }
            }
        });
        table.setRowHeight(30);
        table.setFont(new Font("Serif", Font.BOLD, 20));
        table.getColumnModel().getColumn(0).setPreferredWidth(180);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane, BorderLayout.CENTER);
        new Thread(this).start();
    }

    private void prepareUpdateTableCell() {
        timerRun = new javax.swing.Timer(10, UpdateTableCell());
        timerRun.setRepeats(false);
        timerRun.start();
    }

    private Action UpdateTableCell() {
        return new AbstractAction("Update Table Cell") {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                double dbl = ((Double) table.getModel().getValueAt(0, 1))
                        - ((Integer) table.getModel().getValueAt(0, 2));
                table.getModel().setValueAt(dbl, 0, 3);
            }
        };
    }

    @Override
    public void run() {
        while (runProcess) {
            try {
                Thread.sleep(330);
            } catch (Exception e) {
                e.printStackTrace();
            }
            changeTableValues();
        }
    }

    private void changeTableValues() {
        Runnable doRun = new Runnable() {

            @Override
            public void run() {
                table.getModel().setValueAt(random.nextInt(128) + random.nextDouble(), 0, 1);
                table.getModel().setValueAt(random.nextInt(256) + random.nextDouble(), 1, 1);
                table.getModel().setValueAt(random.nextInt(512) + random.nextDouble(), 2, 1);

                table.getModel().setValueAt(random.nextInt(128), 0, 2);
                table.getModel().setValueAt(random.nextInt(128), 1, 2);
                table.getModel().setValueAt(random.nextInt(128), 2, 2);
            }
        };
        SwingUtilities.invokeLater(doRun);
    }

    private class MyTask extends SwingWorker<Void, Integer> {

        private static final String UPDATE_TABLE_COLUMN = "update";
        private String namePr;
        private double dbl;

        MyTask(String str) {
            this.namePr = str;
        }

        @Override
        protected Void doInBackground() throws Exception {
            dbl = ((Double) table.getModel().getValueAt(1, 1))
                    - ((Integer) table.getModel().getValueAt(1, 2));
            return null;
        }

        @Override
        protected void done() {
            SwingUtilities.invokeLater(new Runnable() {

                @Override
                public void run() {
                    table.getModel().setValueAt(dbl, 1, 3);
                }
            });
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ChangeNotifiersOnEvent frame = new ChangeNotifiersOnEvent();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.setLocation(150, 150);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:27:53.170

除非您使用 明确设置滚动窗格的首选大小`setPreferredSize(Dimension size)`，否则滚动窗格会根据其九个组件（视口，如果存在，两个滚动条，行和列标题以及四个角）的首选大小来计算它. 最大的因素，也是大多数程序员关心的一个因素，是用于显示客户端的视口的大小。有关更多信息，请参见此处：http: [//docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)

# c# - 在文件上传时使用 CSVHelper

> ID：11086942
> 
> 赞同：12
> 
> 时间：2012-06-18T16:20:25.840
> 
> 标签：c#, asp.net-mvc-3, csv, csvhelper

我正在尝试使用 CSVhelper 插件来读取上传的 CSV 文件。这是我的modelBinder类：

```
public class SurveyEmailListModelsModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var csv = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        var file = ((csv.RawValue as HttpPostedFileBase[]) ?? Enumerable.Empty<HttpPostedFileBase>()).FirstOrDefault();

        if (file == null || file.ContentLength < 1)
        {
            bindingContext.ModelState.AddModelError(
                "",
                "Please select a valid CSV file"
            );
            return null;
        }

        using (var reader = new StreamReader(file.InputStream))
        using (var csvReader = new CsvReader(reader))
        {
            return csvReader.GetRecords<SurveyEmailListModels>().ToArray();
        }
    }
} 
```

这些是我试图映射到的对象：

```
public class SurveyEmailListModels
{
    [Key]
    [CsvField(Ignore = true)]
    public int SurveyEmailListId { get; set; }

    [CsvField(Index = 0)]
    public int ProgramId { get; set; }

    [CsvField(Index = 1)]
    public virtual SurveyProgramModels SurveyProgramModels { get; set; }

    [CsvField(Index = 2)]
    public string SurveyEmailAddress { get; set; }

    [CsvField(Index = 3)]
    public bool SurveyResponded { get; set; }

} 
```

在 Visual Studio 调试器中，我收到一个错误：

*   `base {"You must call read on the reader before accessing its data."} CsvHelper.CsvHelperException {CsvHelper.CsvReaderException}`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-18T16:25:01.427

未使用该插件，但错误消息似乎很清楚。`Read()`在访问结果之前必须调用一个函数。尝试将您的代码更改为以下内容：

```
using (var reader = new StreamReader(file.InputStream))
using (var csvReader = new CsvReader(reader))
{
    // Use While(csvReader.Read()); if you want to read all the rows in the records)
    csvReader.Read();
    return csvReader.GetRecords<SurveyEmailListModels>().ToArray();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-07T23:10:15.997

> **当我尝试以下代码时，我遇到了类似的问题，但解决了**

```
void Main()
{
    using (var reader = new StreamReader("path\\to\\file.csv"))
    using (var csv = new CsvReader(reader, 
           System.Globalization.CultureInfo.CreateSpecificCulture("enUS")))
    {
        var records = csv.GetRecords<Foo>();
    }
} 
```

> *请注意，下面的代码不适用于最新版本的 CSV Helper*

```
using (var csvReader = new CsvReader(reader)) 
```

# cuda - 在 Cuda 中编写大型未知大小的数组？

> ID：11086944
> 
> 赞同：0
> 
> 时间：2012-06-18T16:20:34.910
> 
> 标签：cuda

我有一个过程，我将数据发送到 Cuda 进行处理，它输出符合特定标准的数据。问题是我经常不知道输出数组的大小。我能做些什么？

我发送了数百行数据，并在 Cuda 上以超过 2 万种不同的方式对其进行处理。如果结果符合我的某些规则，那么我想保存结果。问题是我无法在 Cuda 中创建链表（如果可以，请告诉我）并且我卡上的内存很小，所以我正在考虑使用零拷贝让 Cuda 直接写入主机内存。这解决了我的内存大小问题，但仍然没有给我处理未知数的方法。

我最初的想法是找出最大可能的结果并 malloc 一个该大小的数组。问题是它会很大，而且大多数都不会被使用（800 行数据 * 20K 可能的结果 = 数组中的 1600 万个项目......这不太可能）。

有没有更好的方法来处理 Cuda 中的可变大小数组？我是编程新手，所以理想情况下它不会太复杂（尽管如果是我愿意学习它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:53:43.443

在内核代码中使用堆内存分配`malloc`是一项昂贵的操作（它强制 CUDA 驱动程序使用自定义堆大小初始化内核并管理内核内部的内存操作）。

一般来说，CUDA设备内存分配是程序性能的主要瓶颈。通常的做法是在开始时分配所有需要的内存并尽可能长时间地重复使用它。

我认为您可以创建足够大的缓冲区并使用它来代替内存分配。在最坏的情况下，您可以将其包装以从该缓冲区实现内存分配。在简单的情况下，您可以保留数组中的最后一个空闲单元格，以便下次将数据写入其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T19:25:39.347

是的，CUDA 和所有 GPGPU 的瓶颈都是从主机传输到设备并返回。

但是在内核中，总是使用所有已知大小的东西。内核一定不能做malloc……从平台的概念上来说是非常非常奇怪的。即使您在 CUDA 内核中有 'for' - 循环，想想 20 次左右是您的最佳方法，您必须执行非常复杂的算法。在并行平台上真的有必要吗？如果您不这样做，您将不会相信会出现什么问题）））

使用缓冲方法。您确定一些缓冲区大小，更依赖于 CUDA 要求（读取 -> 硬件），然后是您的阵列。您在循环中调用内核并从那里上传、处理和检索数据。一个，你的数据数组将完成，最后一个缓冲区不会满。您可以将每个缓冲区的大小作为单个值（例如指向 int 的指针）传递，每个线程将与其线程 id 进行比较，以确定是否可以获得某个值或超出范围。只有最后一个区块会有分歧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T21:37:59.567

这是一个有用的链接：[https ://devblogs.nvidia.com/parallelforall/using-shared-memory-cuda-cc/](https://devblogs.nvidia.com/parallelforall/using-shared-memory-cuda-cc/)

您可以使用共享内存在内核函数中执行以下操作：

```
__global__ void dynamicReverse(int *d, int n)
{
  extern __shared__ int s[];
  .....
} 
```

当您在主机上调用内核函数时，第三个参数是共享内存大小，准确地说`n*sizeof(int)`： `dynamicReverse<<<1,n,n*sizeof(int)>>>(d_d, n);`

此外，如果可能的话，最好的做法是将一个巨大的内核函数拆分为更多的内核函数，代码更少并且更容易执行。

# python - Django初学者问题

> ID：11086956
> 
> 赞同：2
> 
> 时间：2012-06-18T16:21:04.420
> 
> 标签：python, django, apache

我是 Web 开发的新手，我只是将我的第一个 django Web 应用程序拼凑在一起，并使用 mod_wsgi 与 apache 集成。该应用程序有大约 15 个参数，您可以在这些参数上查询多个 SQL 服务器数据库，并且可以将结果下载为 .xls 文件；已经在公司网络上部署了相同的。

问题是当我在一台机器上访问网络应用程序并设置查询参数时，当我尝试从另一台机器（网络客户端）打开它时，在网络应用程序中设置了相同的参数。就像只有一个全局对象被提供给所有 Web 客户端一样。

我正在使用 django 模板标签在应用程序的 html 页面中设置值。

不使用 django 项目中的任何模型，因为我正在查询已经构建的 SQL 服务器数据库。

我的views.py中的查询功能看起来像

```
def query(self,request):
    """
    """
    print "\n\n\t inside QUERY PAGE:",request.method,"\n\n"

    self.SummaryOfResults_list = []
    if self.vmd_cursor != -1:
        self.vmd_cursor.close()

    if request.method == 'POST':
        QueryPage_post_dic = request.POST
        print "\n\nQueryPage_post_dic   :",QueryPage_post_dic

        self.err_list = []
        self.err_list = db_qry.validate_entry(QueryPage_post_dic)

        if len(self.err_list):
            return HttpResponseRedirect('/error/')
        else:
            channel_numbers,JPEG_Over_HTTP,Codec,format,rate_ctrl,transport,img_sz,BuildInfo_versions, self.numspinner_values_dic = db_qry.process_postdata(QueryPage_post_dic, self.numspinner_values_dic)

            return self.get_result(request,channel_numbers,JPEG_Over_HTTP,Codec,format,rate_ctrl,transport,img_sz,BuildInfo_versions)

    else:
        print "\nself.Cam_Selected_list inside qry  :",self.Cam_Selected_list
        if (len(self.Cam_Selected_list) != 1):
            return HttpResponseRedirect('/error/')

        self.tc_dic,self.chnl_dic,self.enbl_dic,self.frmt_dic,self.cdectyp_dic,self.imgsz_dic,self.rtctrl_dic,self.jpg_ovr_http_dic,self.trnsprt_dic,self.cdec_dic,self.typ_dic,self.resolution_dic, self.vmd_cursor = populate_tbls.Read_RefTbls(self.Cam_Selected_list[0])

        c = self.get_the_choices(self.Cam_Selected_list[0])
        c['camera_type']= self.Cam_Selected_list[0]

        for k,v in self.numspinner_values_dic.items():
            c[k] = v

        self.vmd_cursor.execute("SELECT DISTINCT [GD Build Info] FROM MAIN")
        res_versions = self.vmd_cursor.fetchall()
        version_list = []
        ver_list = ['',' ']
        for version in res_versions:
            tmp_ver = version[0].encode()
            if (tmp_ver not in ver_list):
                version_list.append(tmp_ver)
        c['build_info'] = version_list
        print "\n\n c dic   :",c
        c.update(csrf(request))
        return render_to_response('DBQuery.html',c) 
```

并且传递给 render_to_response 的字典包含设置复选框和多选框（dojo）的值

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T17:18:43.940

> 就像只有一个全局对象被提供给所有 Web 客户端一样。

你所说的可能正是正在发生的事情。除非您正在`self`为每个请求重新构建该示例代码中的任何对象，否则它实际上将在客户端之间随机共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T18:00:53.157

您可以将全局变量存储在您正在使用的 SQL DB 中。这样，您可以在请求 -> 响应周期中保留变量的值/状态。

如果您需要更快的响应时间，请探索内存数据存储（如 redis）中的 Key->Value Pair。

要添加 AKX 提到的内容，我建议您阅读 HTTP 请求 -> HTTP 响应周期和 Web 应用程序的工作原理。

# jquery-mobile - 移动应用程序中的分页、可排序、可折叠数据行（表）

> ID：11086957
> 
> 赞同：1
> 
> 时间：2012-06-18T16:21:14.847
> 
> 标签：jquery-mobile, tablesorter, expand, collapse, pagination

我想在移动应用程序中实现[http://tablesorter.com/docs/example-pager.html中显示的演示。](http://tablesorter.com/docs/example-pager.html)我希望演示中的每一行都是可折叠/可扩展的。实现它的最佳方法是什么？据我所知，表格在移动应用程序中效果不佳。如果我错了，请纠正我。谢谢。

== 编辑 ==

这几乎就是我想要的

[http://stokkers.mobi/jqm/tableview/demo.html](http://stokkers.mobi/jqm/tableview/demo.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:39:29.383

我不确定这将如何在移动应用程序中执行，但请查看[此演示](http://www.pengoworks.com/workshop/jquery/tablesorter/tablesorter.htm)。无需下载该 mod，因为它已添加到[tablesorter 2.0.5](http://tablesorter.com/docs/)。

该演示展示了如何使用名为的未记录选项`cssChildRow`，其中包含类名`expand-child`。此类名称被添加到表行`tr`以将其附加到它之前的行（来自该演示的示例代码）：

```
<tr>
    <td rowspan="2" class="collapsible"></td>
    <td rowspan="2" class="collapsible_alt"><a href="javascript:alert('Order # SO71774')">SO71774</a></td>
    <td>Good Toys</td>
    <td>PO348186287</td>
    <td>Jul 20, 2007</td>
    <td>$972.78</td>
</tr>
<tr class="expand-child">
    <td colspan="4">
        <div class="bold">Shipping Address</div>
        <div>
            99700 Bell Road<br /> Auburn, California 95603
        </div>
    </td>
</tr> 
```

在此文件中使行可折叠所需的代码：[jquery.tablesorter.collapsible.js](http://www.pengoworks.com/workshop/jquery/tablesorter/jquery.tablesorter.collapsible.js)

# c#-4.0 - 如何允许 SQL Server 用户插入/更新/删除数据，但不允许更改架构？

> ID：11086967
> 
> 赞同：22
> 
> 时间：2012-06-18T16:21:41.973
> 
> 标签：c#-4.0, sql-server-2008-r2, user-roles

我的应用程序（C#、ASP.Net）需要在数据库中插入、更新和删除数据，并运行存储过程。我需要防止它修改数据库架构——不更改表、创建或删除、不更改存储过程。

我需要向应用程序用户授予什么权限组合？只是“选择”是行不通的，因为它需要在表中插入/更新/删除数据。

如何检查特定登录的权限和访问权限？如何授予或拒绝登录权限和访问权限？我需要授予新用户（登录）权限以仅访问一个数据库。

使用带有 SSMS 的 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-18T16:34:53.423

如果你真的想在对象级别控制它，你可以这样做：

```
GRANT SELECT,UPDATE,INSERT,DELETE ON dbo.table TO user; 
```

在架构级别：

```
GRANT SELECT,UPDATE,INSERT,DELETE ON SCHEMA::dbo TO user; 
```

但是，理想情况下，您不会允许针对您的表的 ad hoc DML，并通过存储过程控制所有 DML。在这种情况下，您只需要在过程本身上授予 exec 权限，而不是对其接触的对象：

```
GRANT EXEC ON dbo.procedure TO user; 
```

同样，如果您想允许对特定模式中的所有过程执行 exec，您可以说：

```
GRANT EXEC ON SCHEMA::dbo TO user; 
```

一个例外是当您的存储过程组成动态 SQL 时。在这些情况下，您可能仍需要在动态 SQL 执行的上下文中对基础表应用权限，或者您可以使用`EXECUTE AS OWNER`.

# download - chm文件下载问题

> ID：11086971
> 
> 赞同：0
> 
> 时间：2012-06-18T16:21:59.383
> 
> 标签：download, chm

我将 mime 类型设置为 application/x-chm 的内容，据我所知，它可以下载 chm 文件。但是，当我选择触发保存/打开文件对话框的链接时，.chm 文件扩展名未解析，我必须明确添加 .chm 文件扩展名才能保存文件。如何让 .chm 文件扩展名自动解析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:28:09.477

根据这个[官方 IANA 文档](http://www.iana.org/assignments/media-types/application/vnd.ms-htmlhelp)，文件的 MIME 类型`.chm`是`application/vnd.ms-htmlhelp`.

*旁注，您永远无法确定文件是如何显示给用户的，因为用户可以自己选择如何显示文件。*

# python - 按特定字段对文件进行排序

> ID：11086972
> 
> 赞同：0
> 
> 时间：2012-06-18T16:21:59.677
> 
> 标签：python, linux, unix, sorting, sysadmin

我有一个具有以下格式的文件：
12345 TAB_HERE 名称：实际名称 TAB_HERE 6785

例如。

* * *

```
1001020 名称 : SMITH S ANNALOLA 14570
5701061 名称 : 马修·桑迪·希尔 6440
7001083 名称 : 谭雅莫里森米勒 14406

```

* * *

我想按数字的最后一个字段排序。

我更喜欢简单的单行 python 解决方案或基于 linux 工具的解决方案。

我尝试使用 sort -k 3,3n 但它不起作用。
而且我似乎无法编写可以作为 python -c "code here" 运行的单行 python 代码

我查看了以下内容但无济于事：

[http://www.unix.com/unix-dummies-questions-answers/18359-how-do-i-specify-tab-field-separator-sort.html](http://www.unix.com/unix-dummies-questions-answers/18359-how-do-i-specify-tab-field-separator-sort.html)

[http://www.unix.com/unix-dummies-questions-answers/30450-sort-third-column-n-command.html](http://www.unix.com/unix-dummies-questions-answers/30450-sort-third-column-n-command.html)

[http://www.linuxquestions.org/questions/programming-9/unix-sort-on-multiple-fields-598813/](http://www.linuxquestions.org/questions/programming-9/unix-sort-on-multiple-fields-598813/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:26:58.960

快速解决方案：

```
import sys
print "".join(sorted(sys.stdin.readlines(), key=lambda x:int(x.split()[-1]))) 
```

该解决方案有一些缺点。例如，如果您在最后一个字段中有没有编号的行，或者您不想按最后一个字段而是按其他所有内容对数据进行排序，它将不起作用。在这种情况下，您必须使用正则表达式（`re`模块）并描述要用于在`key`函数中进行排序的字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T10:37:13.020

Python一班轮：

```
cat file | python -c 'import sys; print "".join(sorted(sys.stdin.readlines(), key=lambda x:int(x.split()[-1])))' 
```

我猜为什么另一个 python 示例不能作为一个衬里工作是他使用 " 来标记代码并调用 join()...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:32:22.103

我猜 sort 命令的 --key 参数会计算空格字符。

```
sort -k7n 
```

为我工作..

# php - 非常大的 SELECT 查询

> ID：11086973
> 
> 赞同：3
> 
> 时间：2012-06-18T16:22:00.347
> 
> 标签：php, mysql, sql, optimization

我想问一下是否有更快的方法来进行这个查询？实际上它需要大约 100 秒才能完成。我在一个表中有大约 10 000 000 (1 GB) 行。这是统计信息生成脚本。

这是查询：

```
 $results=mysql_query("SELECT * FROM hawkeye WHERE player_id='".$playerID."'") or die("MYSQL ERROR: ".mysql_error()); 
```

然后是php代码：

```
 $row = mysql_fetch_array($results)
  if($row["action"] == 4){$commandcount++;}
  else if($row["action"] == 3){$chatcount++;}
  else if($row["action"] == 1){$placedcount++;}
  else if($row["action"] == 0){$breakcount++;}
  else if($row["action"] == 5){$joincount++;}
  else if($row["action"] == 6){$quitcount++;}
  else if($row["action"] == 7){$qteleportcount++;}
  else if($row["action"] == 12){$pvpdeathcount++;}
  else if($row["action"] == 21){$mobkillcount++;}
  else if($row["action"] == 22){$otherdeathcount++;}
  else {} 
```

感谢您的回答！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-18T16:24:30.707

使用 MYSQL 为您计算。它比 PHP 更快：

```
SELECT COUNT(*) AS action_count
     , action
FROM hawkeye 
WHERE player_id='".$playerID."'"
GROUP BY action

while ($row = mysql_fetch_assoc($result))
{
    echo $row['action'] . ': ' . $row['action_count'] . "<br>" . PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:25:34.390

关于什么

```
SELECT action, count(*) FROM hawkeye WHERE player_id='$playerID' GROUP BY action 
```

**所以每个动作类型**你只会循环一次，而不是每个**动作一次**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T16:25:38.567

您似乎正在尝试进行一些计算。尝试研究聚合或使用像 infobright 这样的分析数据库，它将聚合存储在内存中。避免执行 SELECT * 并执行实际的 SELECT column1, column2。大多数情况下，虽然读到了像 SUM、COUNT Group BY 和 Order By 这样的聚合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T16:26:21.437

```
$results=mysql_query("SELECT action, count(*) as `cnt` FROM hawkeye WHERE player_id='".$playerID."' GROUP BY action") or die("MYSQL ERROR: ".mysql_error());

while ($row = mysql_fetch_array($results)) {
  if($row["action"] == 4){$commandcount=$row["cnt"];}
  else if($row["action"] == 3){$chatcount=$row["cnt"];}
  else if($row["action"] == 1){$placedcount=$row["cnt"];}
  else if($row["action"] == 0){$breakcount=$row["cnt"];}
  else if($row["action"] == 5){$joincount=$row["cnt"];}
  else if($row["action"] == 6){$quitcount=$row["cnt"];}
  else if($row["action"] == 7){$qteleportcount=$row["cnt"];}
  else if($row["action"] == 12){$pvpdeathcount=$row["cnt"];}
  else if($row["action"] == 21){$mobkillcount=$row["cnt"];}
  else if($row["action"] == 22){$otherdeathcount=$row["cnt"];}
  else {}
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-18T16:28:03.510

向 hawkeye 表添加一个索引，该索引按`player_id`并遵循 John Conde 的建议。

# c# - 代码片段 Visual C# 同时在其他地方自动生成方法？

> ID：11086974
> 
> 赞同：0
> 
> 时间：2012-06-18T16:22:06.387
> 
> 标签：c#, visual-studio-2010

例如，我有一个包含所有默认方法的静态类。如果我想生成一个属性并同时生成一个默认的静态方法怎么办---

```
static class Default
{
    //Auto-Generated
    static int DEFAULT_foo1()
    {
        //Do something
    }
    static float DEFAULT_var2
    {
        //Do something
    }

}

class Other
{
    //Code-Snippet
    int var1
    {
        get
        {
            return Default.DEFAULT_var1();
        }
    }
    float var2
    {
        get
        {
            return Default.DEFAULT_var2();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:27:37.393

我认为标准继承是一个很好的解决方案。

```
class OtherBase
{
    //Code-Snippet
    int var1
    {
        get
        {
            return Default.DEFAULT_var1();
        }
    }
    float var2
    {
        get
        {
            return Default.DEFAULT_var2();
        }
    }
} 
```

派生类：

```
class Other : OtherBase
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:50:50.100

将类更改`Default`为单例而不是静态的。现在，您可以使用代码片段在同一类中实现方法和属性。其他类可以自动派生`Default`和继承这些属性。

```
class Default 
{
    public static readonly Default Instance = new Default();

    protected Default ()
    {
    }

    public static int DoFoo1() 
    { 
        //Do something 
    }

    public int Foo1 { get { return DoFoo1(); } }

    public static float DoVar2 
    { 
        //Do something 
    } 

    public float Var2 { get { return DoVar2(); } }
} 

class Other : Default
{
    // Inherits Foo1 and Var2 automatically
} 
```

使用`Default`和`Other`

```
int x = Default.DoFoo1();
int y = Default.Instance.Foo1;
Other other = new Other();
int z = other.Foo1; 
```

# hibernate - org.hibernate.HibernateException：找到同一个集合的两个表示

> ID：11086978
> 
> 赞同：1
> 
> 时间：2012-06-18T16:22:28.917
> 
> 标签：hibernate, jakarta-ee

我的域类如下：

**1-音频文件参考：**

```
@SuppressWarnings("serial")
@Entity
@Table(name = "audiofileref", catalog = "advertisedb")
public class Audiofileref implements java.io.Serializable {

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "audiofileref", cascade = CascadeType.ALL)
    private Set<Adpage> adpages = new HashSet<Adpage>(0);

    } 
```

**2- 广告页：**

```
@SuppressWarnings("serial")
@Entity
@Table(name = "adpage", catalog = "advertisedb")
public class Adpage implements java.io.Serializable {

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "audio_file_id", unique = true, nullable = true)
    private Audiofileref audiofileref;

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "adpage", cascade = CascadeType.ALL)
    private Set<ImageFileRef> imageFileRefs = new HashSet<ImageFileRef>(0);

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "adpage", cascade = CascadeType.ALL)
    private Set<PageActionPlanMap> pageActionPlanMaps = new HashSet<PageActionPlanMap>(
            0); 

            } 
```

**3- ImageFileRef：**

```
@SuppressWarnings("serial")
@Entity
@Table(name = "imagefileref", catalog = "advertisedb")
public class ImageFileRef implements java.io.Serializable {

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "fk_adpage", nullable = false)
    private Adpage adpage;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "PhTypeID")
    private Phonescreentype phonescreentype;

} 
```

**4- PageActionPlanMap：**

```
@SuppressWarnings("serial")
@Entity
@Table(name = "pageactionplan_map", catalog = "advertisedb")
public class PageActionPlanMap implements java.io.Serializable {

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "fk_adpage", nullable = false)
    private Adpage adpage;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "APID", nullable = false)
    private Actionsplan actionsplan;

} 
```

**5- 行动计划：**

```
@SuppressWarnings("serial")
@Entity
@Table(name = "actionsplan", catalog = "advertisedb")
public class Actionsplan implements java.io.Serializable {

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "actionsplan")
    private Set<PageActionPlanMap> pageActionPlanMaps = new HashSet<PageActionPlanMap>(
            0);

            } 
```

**要求：**

1.  删除**Audiofileref时，** **Adpage**中的外键设置为 null；
2.  删除**Adpage**时，将删除以下内容：**Audiofileref**、**ImageFileRef**、**PageActionPlanMap**

删除 Audiofileref 时我得到了什么：

```
Hibernate: select adpages0_.audio_file_id as audio7_3_1_, adpages0_.pkid as pkid1_, adpages0_.pkid as pkid1_0_, adpages0_.fk_advertisement as fk6_1_0_, adpages0_.audio_file_id as audio7_1_0_, adpages0_.Description as Descript2_1_0_, adpages0_.HomePage as HomePage1_0_, adpages0_.Name as Name1_0_, adpages0_.Text as Text1_0_ from advertisedb.adpage adpages0_ where adpages0_.audio_file_id=?
Hibernate: select imagefiler0_.fk_adpage as fk6_1_2_, imagefiler0_.pkid as pkid2_, imagefiler0_.pkid as pkid9_1_, imagefiler0_.fk_adpage as fk6_9_1_, imagefiler0_.Description as Descript2_9_1_, imagefiler0_.Height as Height9_1_, imagefiler0_.Name as Name9_1_, imagefiler0_.PhTypeID as PhTypeID9_1_, imagefiler0_.Width as Width9_1_, phonescree1_.PhTypeID as PhTypeID16_0_, phonescree1_.Description as Descript2_16_0_, phonescree1_.TypeName as TypeName16_0_ from advertisedb.imagefileref imagefiler0_ left outer join advertisedb.phonescreentype phonescree1_ on imagefiler0_.PhTypeID=phonescree1_.PhTypeID where imagefiler0_.fk_adpage=?
Hibernate: select pageaction0_.fk_adpage as fk8_1_2_, pageaction0_.pkid as pkid2_, pageaction0_.pkid as pkid12_1_, pageaction0_.ActionValue as ActionVa2_12_1_, pageaction0_.APID as APID12_1_, pageaction0_.fk_adpage as fk8_12_1_, pageaction0_.MailCC as MailCC12_1_, pageaction0_.MailTo as MailTo12_1_, pageaction0_.SoftKeyName as SoftKeyN5_12_1_, pageaction0_.SoftKeyNo as SoftKeyNo12_1_, actionspla1_.APID as APID0_0_, actionspla1_.Description as Descript2_0_0_, actionspla1_.Name as Name0_0_ from advertisedb.pageactionplan_map pageaction0_ inner join advertisedb.actionsplan actionspla1_ on pageaction0_.APID=actionspla1_.APID where pageaction0_.fk_adpage=?
Hibernate: select pageaction0_.APID as APID0_2_, pageaction0_.pkid as pkid2_, pageaction0_.pkid as pkid12_1_, pageaction0_.ActionValue as ActionVa2_12_1_, pageaction0_.APID as APID12_1_, pageaction0_.fk_adpage as fk8_12_1_, pageaction0_.MailCC as MailCC12_1_, pageaction0_.MailTo as MailTo12_1_, pageaction0_.SoftKeyName as SoftKeyN5_12_1_, pageaction0_.SoftKeyNo as SoftKeyNo12_1_, adpage1_.pkid as pkid1_0_, adpage1_.fk_advertisement as fk6_1_0_, adpage1_.audio_file_id as audio7_1_0_, adpage1_.Description as Descript2_1_0_, adpage1_.HomePage as HomePage1_0_, adpage1_.Name as Name1_0_, adpage1_.Text as Text1_0_ from advertisedb.pageactionplan_map pageaction0_ inner join advertisedb.adpage adpage1_ on pageaction0_.fk_adpage=adpage1_.pkid where pageaction0_.APID=?
Hibernate: delete from advertisedb.pageactionplan_map where pkid=?
Hibernate: delete from advertisedb.pageactionplan_map where pkid=?
Hibernate: delete from advertisedb.adpage where pkid=?
Hibernate: delete from advertisedb.audiofileref where pkid=? 
```

然后我得到以下异常，并且 Audiofileref 没有被删除：

```
Caused by: org.springframework.orm.hibernate3.HibernateSystemException: Found two representations of same collection: com.xeno.advertisingsuite.web.domain.Adpage.imageFileRefs; nested exception is org.hibernate.HibernateException: Found two representations of same collection: com.xeno.advertisingsuite.web.domain.Adpage.imageFileRefs
    at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:679)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:793)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:664)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy36.updatePage(Unknown Source)
    at com.xeno.advertisingsuite.web.beans.AdPageBean.saveAudioFileRef(AdPageBean.java:190)
    at com.xeno.advertisingsuite.web.beans.AdPageBean.fileListener(AdPageBean.java:149)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:262)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at org.icefaces.ace.component.fileentry.FileEntry.broadcast(FileEntry.java:306)
    ... 103 more
Caused by: org.hibernate.HibernateException: Found two representations of same collection: com.xeno.advertisingsuite.web.domain.Adpage.imageFileRefs
    at org.hibernate.engine.Collections.processReachableCollection(Collections.java:175)
    at org.hibernate.event.def.FlushVisitor.processCollection(FlushVisitor.java:60)
    at org.hibernate.event.def.AbstractVisitor.processValue(AbstractVisitor.java:124)
    at org.hibernate.event.def.AbstractVisitor.processValue(AbstractVisitor.java:84)
    at org.hibernate.event.def.AbstractVisitor.processEntityPropertyValues(AbstractVisitor.java:78)
    at org.hibernate.event.def.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:165)
    at org.hibernate.event.def.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:219)
    at org.hibernate.event.def.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:99)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:50)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1206)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:375)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:137)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)
    ... 120 more 
```

请告知如何解决。

# php - PHP/MYSQL 填充按查询结果排序的下拉列表

> ID：11086981
> 
> 赞同：2
> 
> 时间：2012-06-18T16:22:34.357
> 
> 标签：php, mysql, html-lists

我想要的是为 mysql 结果列中的每个新值创建一个新的无序列表。

我的查询看起来像这样，我将其放入数据数组中：

```
$connection = dbconnect();

$getusers = "SELECT users.usr_id, users.usr_firstname, users.usr_lastname, user_groups.group_name FROM users INNER JOIN user_groups ON users.usr_group = user_groups.group_id ORDER BY group_name ASC, users.usr_firstname ASC, users.usr_lastname ASC";
$result = mysql_query($getusers);

$data_array = array();
while($data = mysql_fetch_array($result)){
    $data_array[] = $data;
} 
```

现在我需要显示该数据，以便每个新的 user_group 都是一个无序列表，并且具有相同组的每一行都作为该无序列表的列表项出现。

[它与这个问题（ PHP/MySQL 查询结果](https://stackoverflow.com/questions/6287066/php-mysql-query-results)）非常相似，但我无法在正确的位置获得结束 ul。这是我的输出代码，尽管我知道这是错误的，因为 li 并不是 ul 的真正孩子。

```
$previousgroup = "";
foreach($data_array as $users){
    if($users['group_name'] != $previousgroup){
        echo "<ul class=\"group\">" . $users['group_name'] . "</ul>";
    }
    else{
        echo "<li id=\"m" . $users['usr_id'] . "\"><h4>" . $users['usr_firstname'] . " " . $users['usr_lastname'] . ", " . $users['cred_name'] . "</h4></li>";
    }
} 
```

有没有更有效的方法来做到这一点？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:32:24.497

```
if($users['group_name'] != $previousgroup){
    echo "</ul><ul class=\"group\"><li>" . $users['group_name'] . "</li>";
}
echo "<li id=\"m" . $users['usr_id'] . "\"><h4>" . $users['usr_firstname'] . " " . $users['usr_lastname'] . ", " . $users['cred_name'] . "</h4></li>"; 
```

循环中的代码应如下所示，您需要`<ul>`从循环外部打开和关闭 a。

```
echo '<ul>';
foreach () { // here is the loop }
echo '</ul>'; 
```

这是用“肮脏”的方式打印出来的，至少。

我这样做的方法是构建一个二维数组，首先由 group_name 索引，然后是用户 ID。这意味着对数据进行两次传递，因为需要第二次循环来显示数据，但一般来说，您不会感觉到差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:42:02.723

您可以通过这种方式更改 while 循环：

```
$data_array = array();
while($data = mysql_fetch_array($result)){
    $data_array[$data['group_name']][] = $data;
} 
```

并且您将获得一个包含您的 group_name 的数组作为包含您的数据的其他数组的索引。要创建列表，您可以执行以下操作：

```
<ul>
  <?php
  foreach ($data_array as $temp_key => $temp_array)
  {
    ?>
    <li>
      <?php echo $temp_key; ?>
      <ul>
        <?php
        foreach ($temp_array as $datum)
        {
          echo ("<li>" . $datum['usr_firstname'] . "</li>";
        }
        ?>
      </ul>
    </li>
    <?php
  }
  ?>
</ul> 
```

希望对你有帮助

# wpf - 如何知道您的 Microsoft ClickOnce 应用程序将在下次启动时应用更新？

> ID：11086983
> 
> 赞同：0
> 
> 时间：2012-06-18T16:22:36.743
> 
> 标签：wpf, c#-4.0, clickonce

我有一个通过 ClickOnce 部署的基于 C# WPF 的应用程序，并且我将更新设置设置为“应用程序启动后”。如前所述，当更新发布后首次打开时可用更新时，它将在应用程序启动后检查，然后在下一次打开时应用更新。

我想知道的是，我如何以编程方式知道这会发生，并且在下次启动时会应用更新？我想在应用程序中显示一个指示器，让用户知道有一个更新等待应用并且他们需要重新启动。类似于 chrome 在扳手图标上显示的向上箭头所做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:30:20.830

Gesh，在发布问题 5 分钟后，我最终偶然发现了这篇 MSDN 文章：

[http://msdn.microsoft.com/en-us/library/ms404263.aspx](http://msdn.microsoft.com/en-us/library/ms404263.aspx)

它展示了如何在您的应用程序中执行此操作以及与 ClickOnce 相关的其他操作。

# android - Android：使用形状绘制“X”

> ID：11086985
> 
> 赞同：5
> 
> 时间：2012-06-18T16:22:39.383
> 
> 标签：android, xml, drawing, shape

需要在`View`使用**Shapes**中绘制“X” ，但 X 的边缘必须锚定在视图的左侧、顶部、右侧和底部。

像这样的东西：

![示例图像](../Images/8b09cfe27e42e86a87c654b7068f2a31.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-11-08T13:02:41.580

通过可绘制的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

<item>
    <rotate
        android:fromDegrees="135"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toDegrees="135">
        <shape android:shape="line">
            <stroke android:width="1dp" android:color="@color/social_grey" />
        </shape>
    </rotate>
</item>
<item>
    <rotate
        android:fromDegrees="45"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toDegrees="45">
        <shape android:shape="line">
            <stroke android:width="1dp" android:color="@color/social_grey" />
        </shape>
    </rotate>
</item>

</layer-list> 
```

**带填充：**

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

<item
   android:left="4dp"
    android:right="4dp"
    >
    <rotate
        android:fromDegrees="135"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toDegrees="135">
        <shape android:shape="line">
            <stroke android:width="1dp" android:color="@color/social_grey" />
        </shape>
    </rotate>
</item>
<item
    android:left="4dp"
    android:right="4dp"
    >
    <rotate
        android:fromDegrees="45"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toDegrees="45">
        <shape android:shape="line">
            <stroke android:width="1dp" android:color="@color/social_grey" />
        </shape>
    </rotate>
</item>
</layer-list> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-18T16:26:38.460

通过创建自定义 View 并覆盖 onDraw 方法会容易得多。IE。

```
public class XView extends View {

    @Override
    public void onDraw(Canvas canvas) {
        float width = getMeasuredWidth();
        float height = getMeasuredHeight();
        Paint paint = new Paint();
        paint.setColor(Color.RED);
        canvas.drawLine(0,0,width,height,paint);
        canvas.drawLine(width,0,0,height,paint);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-22T06:57:13.667

我遇到了类似的情况，但我的盒子有预定义的高度和宽度，**只使用 XML**：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>

        <shape android:shape="rectangle">

            <solid android:color="@color/status_expired_color" />

        </shape>

    </item>

    <item android:top="2dp"
        android:left="2dp"
        android:right="2dp"
        android:bottom="2dp">

        <shape android:shape="rectangle">
            <solid android:color="@color/white" />
        </shape>

    </item>

    <item android:top="14sp"
        android:left="6dp"
        android:right="6dp"
        android:bottom="14sp">

        <rotate
            android:fromDegrees="45"
            android:toDegrees="45"
            android:pivotX="50%"
            android:pivotY="50%" >

            <shape android:shape="rectangle">
                <solid android:color="@color/status_expired_color" />
            </shape>

        </rotate>

    </item>

    <item android:top="6dp"
        android:left="14sp"
        android:right="14sp"
        android:bottom="6dp">

        <rotate
            android:fromDegrees="45"
            android:toDegrees="45"
            android:pivotX="50%"
            android:pivotY="50%" >

            <shape android:shape="rectangle">
                <solid android:color="@color/status_expired_color" />
            </shape>

        </rotate>

    </item>

</layer-list> 
```

* * *

```
@color/status_expired_color = #E9510E
@color/white = #ffffff 
```

输出：
![在此处输入图像描述](../Images/45606c983727518e830f0ee571263c3d.png)

# vb.net - Vb.net DateTime 从字符串转换

> ID：11086987
> 
> 赞同：2
> 
> 时间：2012-06-18T16:22:49.740
> 
> 标签：vb.net, string, datetime

我在 xml 文件中获取此日期时间格式：

```
2012-06-14T11:15:41.587-07:00
2012-06-14T10:49:32.397-07:00
2012-06-11T11:10:49.2-07:00 
```

我相信我明白了一些，如果我错了，请纠正我：

**2012-06-14** = 日期

**T** = 时间标识符

**10:49:32.397** = 时分秒毫秒

**-07:00** = 我不知道

我需要将它转换为我可以为我的数据网格视图排序的东西。

当我尝试这样的事情时：

```
Console.WriteLine(String.Format("{0:d/M/yyyy HH:mm:ss}", "2012-06-14T10:49:32.397-07:00")) 
```

我在没有转换的情况下恢复了原始字符串。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T16:26:37.337

> -07:00 = 我不知道

-7 是时区偏移量。这意味着 DateTime 比 UTC 晚 7 小时，这将指示美国山区时间。

你想用来`DateTime.Parse`获取一个`DateTime`对象。

```
Dim val As String = "2012-06-11T11:10:49.2-07:00"
Dim parsedDateTime As DateTime = DateTime.Parse(val)
'Do whatever with parsedDateTime here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:28:35.913

是与 UTC的`-07:00`偏移量。您可以通过[DateTimeOffset.ParseExact](http://msdn.microsoft.com/en-us/library/bb343428.aspx)对其进行解析，其中包括偏移量说明符（“zzz”格式说明符）。

在你的情况下，我相信这将是：

```
Dim xmlValue = "2012-06-14T11:15:41.587-07:00"

Dim value as DateTimeOffset = DateTimeOffset.ParseExact(xmlValue, "yyyy-MM-dd\Thh:mm:ss.fffzzz", CultureInfo.InvariantCulture) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T16:28:08.707

看看这篇文章：

[http://msdn.microsoft.com/en-us/library/1k1skd40.aspx](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)

它应该让您更好地掌握如何使用 DateTime 对象。您拥有的时间是[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)格式。

# c++ - OpenCV中的“警告：无法创建空电影文件容器”是什么意思？

> ID：11086991
> 
> 赞同：1
> 
> 时间：2012-06-18T16:23:03.223
> 
> 标签：c++, opencv, compiler-errors, codec

我正在关注 OpenCV 书籍的教程，但以下代码不起作用：

```
#include <iostream>
#include <opencv/cv.h>
#include <opencv/highgui.h>
using namespace std;

int main() {
    string arg1 = "new.mov";
    string arg2 = "mov.mov";
    CvCapture* capture = 0;
    capture = cvCreateFileCapture(arg1.c_str());
    if(!capture){
        return -1;
    }
    IplImage *bgr_frame=cvQueryFrame(capture);
    double fps = cvGetCaptureProperty (
            capture,
            CV_CAP_PROP_FPS
    );
    CvSize size = cvSize(
            (int)cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH),
            (int)cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH)
    );
    CvVideoWriter* writer = cvCreateVideoWriter(
        arg2.c_str(),
        CV_FOURCC('N', 'T', 'S', 'C'),
        fps,
        size
    );
    IplImage* logpolar_frame = cvCreateImage(
            size,
            IPL_DEPTH_8U,
            3
    );
    while((bgr_frame=cvQueryFrame(capture)) != NULL){
        cvLogPolar(
                bgr_frame, logpolar_frame,
                cvPoint2D32f(bgr_frame->width/2, bgr_frame->height/2),
                40,
                CV_INTER_LINEAR+CV_WARP_FILL_OUTLIERS
                );
                cvWriteFrame(writer, logpolar_frame);
    }
    cvReleaseVideoWriter(&writer);
    cvReleaseImage(&logpolar_frame);
    cvReleaseCapture(&capture);
    return 0;
} 
```

当我运行代码时它不会给我一个错误 - 而是程序输出到控制台：

```
WARNING: Could not create empty movie file container. 
```

接下来是 100 左右行：

```
Didn't successfully update movie file. 
```

这个错误（或任何它的名字）是什么意思，是什么原因造成的？

我不知道这是否有帮助，但它曾经给我一个关于编解码器的错误（在书中是 MJPG），所以我`CV_FOURCC('M', 'J', 'P', 'G')`改为`CV_FOURCC('N', 'T', 'S', 'C')`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T16:39:31.023

NTSC 不是有效的编解码器fourcc，因此没有创建视频写入器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T16:46:30.190

尝试更改`CV_FOURCC('N', 'T', 'S', 'C')`为`CV_FOURCC('D', 'I', 'V', 'X')`. 这是给你的[手册](http://opencv.itseez.com/doc/tutorials/highgui/video-write/video-write.html)。

可能的编解码器：

```
CV_FOURCC('P','I','M','1')    = MPEG-1 codec
CV_FOURCC('M','J','P','G')    = motion-jpeg codec (does not work well)
CV_FOURCC('M', 'P', '4', '2') = MPEG-4.2 codec
CV_FOURCC('D', 'I', 'V', '3') = MPEG-4.3 codec
CV_FOURCC('D', 'I', 'V', 'X') = MPEG-4 codec
CV_FOURCC('U', '2', '6', '3') = H263 codec
CV_FOURCC('I', '2', '6', '3') = H263I codec
CV_FOURCC('F', 'L', 'V', '1') = FLV1 codec 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T10:15:43.953

来寻找相同消息的解决方案。就我而言，我使用 Mac/OSX，并且我确实使用了 CV_FOURCC('M', 'J', 'P', 'G')。结果是，当输出文件以“.mp4”结尾并使用“.avi”时，它失败了。

# c++ - OpenGL线没有着色

> ID：11086997
> 
> 赞同：4
> 
> 时间：2012-06-18T16:23:32.827
> 
> 标签：c++, opengl, sfml, vbo

我在使用 VBO 的 OpenGL 中工作，并且我有一组三条线（沿着 X、Y 和 Z 轴——想想捷克刺猬）。这些线条默认是灰色的，但我希望它们是鲜红色的，这样我可以更好地看到它们。不幸的是，虽然我将颜色信息添加为顶点数据，但线条仍然显示为灰色。我可能缺少一些基本的东西，但我看不到它。这是我创建 VBO 的方法：

```
//Position data
sf::Vector3<float> Top    = sf::Vector3<float>(0.0, 1.0, 0.0);
sf::Vector3<float> Front  = sf::Vector3<float>(0.0, 0.0, -1.0);
sf::Vector3<float> Right  = sf::Vector3<float>(1.0, 0.0, 0.0);
sf::Vector3<float> Back   = sf::Vector3<float>(0.0, 0.0, 1.0);
sf::Vector3<float> Left   = sf::Vector3<float>(-1.0, 0.0, 0.0);
sf::Vector3<float> Bottom = sf::Vector3<float>(0.0, -1.0, 0.0);

//Color data
//Just to be clear, I also tried with 255.0, although I'm rather certain OpenGL 
//does its colors on a 0-1 scale.
sf::Vector3<float> Color = sf::Vector3<float>(1.0, 0.0, 0.0);

//Create vector
std::vector<float> LineArray;

//Top
LineArray.push_back(Top.x);
LineArray.push_back(Top.y);
LineArray.push_back(Top.z);
LineArray.push_back(Color.x);
LineArray.push_back(Color.y);
LineArray.push_back(Color.z);
//Bottom
LineArray.push_back(Bottom.x);
LineArray.push_back(Bottom.y);
LineArray.push_back(Bottom.z);
LineArray.push_back(Color.x);
LineArray.push_back(Color.y);
LineArray.push_back(Color.z);

//Front
LineArray.push_back(Front.x);
LineArray.push_back(Front.y);
LineArray.push_back(Front.z);
LineArray.push_back(Color.x);
LineArray.push_back(Color.y);
LineArray.push_back(Color.z);
//Back
LineArray.push_back(Back.x);
LineArray.push_back(Back.y);
LineArray.push_back(Back.z);
LineArray.push_back(Color.x);
LineArray.push_back(Color.y);
LineArray.push_back(Color.z);

//Right
LineArray.push_back(Right.x);
LineArray.push_back(Right.y);
LineArray.push_back(Right.z);
LineArray.push_back(Color.x);
LineArray.push_back(Color.y);
LineArray.push_back(Color.z);
//Left
LineArray.push_back(Left.x);
LineArray.push_back(Left.y);
LineArray.push_back(Left.z);
LineArray.push_back(Color.x);
LineArray.push_back(Color.y);
LineArray.push_back(Color.z);

//Create buffer
glGenBuffers(1, &m_Buffer);
glBindBuffer(GL_ARRAY_BUFFER, m_Buffer);
int SizeInBytes = LineArray.size() * 6 * sizeof(float);
glBufferData(GL_ARRAY_BUFFER, SizeInBytes, NULL, GL_STATIC_DRAW);

//Upload buffer data
glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(float) * LineArray.size(), &LineArray[0]); 
```

这就是我每次显示它的方式：

```
glPushMatrix();

//Translate
glTranslatef(m_Position.x, m_Position.y, m_Position.z);
//Rotate
glMultMatrixf(m_RotationMatrix);

//Bind buffers for vertex and color arrays
glBindBuffer(GL_ARRAY_BUFFER, m_Buffer);

glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer(3, GL_FLOAT, 6 * sizeof(float), 0);
glEnableClientState(GL_COLOR_ARRAY);
glColorPointer(3, GL_FLOAT, 6 * sizeof(float), (void*)12);

//Draw
glDrawArrays(GL_LINES, 0, 36);

glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_COLOR_ARRAY);

//Unbind the buffers
glBindBuffer(GL_ARRAY_BUFFER, 0);

glPopMatrix(); 
```

我以前从未使用过 GL_COLOR_ARRAY，但我基于成功使用 GL_NORMAL_ARRAY 的代码。有人可以指出什么问题吗？

编辑：如果我设置我的基本 OpenGL 参数错误（特别是照明），这里是那些：

```
m_AmbientLight = {0.5f, 0.5f, 0.5f, 1.0f};
m_DiffuseLight = {1.0f, 1.0f, 1.0f, 1.0f};
m_LightPos = {8.0f, -16.0f, 8.0f, 0.0f};

//Smooth Shading
glShadeModel(GL_SMOOTH);

// Set color and depth clear value
glClearDepth(1.f);
//Color here is in RGB, converted to a 0-1 scale.
glClearColor(0.3f, 0.3f, 0.3f, 1.f);

// Enable Z-buffer read and write
glEnable(GL_DEPTH_TEST);
glDepthMask(GL_TRUE);

///
///LIGHTING
///
//Set up lighting.
//This activates the ambient light.
glLightfv(GL_LIGHT0, GL_AMBIENT, m_AmbientLight);
//This activates the diffuse light.
glLightfv(GL_LIGHT1, GL_DIFFUSE, m_DiffuseLight);
//This sets the position of the diffuse light.
glLightfv(GL_LIGHT1, GL_POSITION, m_LightPos);
//This enables the light.
glEnable(GL_LIGHT0);
glEnable(GL_LIGHT1);
//Enables all lighting...?
glEnable(GL_LIGHTING);
glEnable(GL_COLOR_MATERIAL);
//glEnable(GL_NORMALIZE);

// Setup a perspective projection
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(60.f, 1.33f, 0.1f, 512.f); 
```

编辑2：确定 glColor3f() 也没有任何效果，我想知道我的着色器是否是问题所在：

垂直着色器：

```
void main()
{
vec3 normal, lightDir;
vec4 diffuse;
float NdotL;

normal = normalize(gl_NormalMatrix * gl_Normal);

lightDir = normalize(vec3(gl_LightSource[0].position));

NdotL = max(dot(normal, lightDir), 0.0);

diffuse = gl_FrontMaterial.diffuse * gl_LightSource[0].diffuse;
gl_FrontColor =  NdotL * diffuse;

gl_Position = ftransform();
} 
```

片段着色器：

```
void main()
{
gl_FragColor = gl_Color;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T06:05:08.717

~~不是 100% 肯定的，但我不认为你应该在画线时启用 GL_COLOR_MATERIAL。尝试禁用它。~~

编辑（从评论复制）：

你的着色器对我没有意义。您应该只传递一种颜色，然后将该颜色直接传递给片段着色器。为什么要使用光照着色器来绘制线条？您应该创建一个不使用任何材料的不同着色器。除非您使用固定功能管道，否则启用/禁用照明无效。我认为您将固定功能命令与着色器混合在一起并感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T16:45:44.823

在我看来，您在绘制线条时启用了照明，因此顶点数据的颜色被照明计算的颜色覆盖。在. `glDisable(GL_LIGHTING)`_`glDrawArrays`

# mod-rewrite - mod_rewrite：剥离子域并转换为 URL 参数

> ID：11086999
> 
> 赞同：1
> 
> 时间：2012-06-18T16:23:41.953
> 
> 标签：mod-rewrite

我有一个网络应用程序，我在其中为每个客户端保留一个子域，例如：[http](http://clientNo32.myApp.com) : //clientNo32.myApp.com 由于一些服务器混乱，我必须将这些东西转发到我的新服务器[http://123.456.78:1002 /clientNo32/app/index.php](http://123.456.78:1002/clientNo32/app/index.php)

文件夹“clientNo32”不存在，它只是我想从 URL 获取的参数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:50:55.117

我想你正在尝试做这样的事情？

```
RewriteEngine On

# Don't know if you need this, exclude www hosts
RewriteCond %{HTTP_HOST} !^www [NC]

# Make sure we don't already have a "cId" in the query string
RewriteCond %{QUERY_STRING} !cId=

# match the subdomain
RewriteCond %{HTTP_HOST} ^([^\.]+)\.myapp.com$ [NC]

# add subdomain to URI as a query string
RewriteRule ^(.*)$ /app/index.php?cId=%1 [L,QSA] 
```

这使得当您请求以[http://clientNo32.myApp.com/](http://clientNo32.myApp.com/)开头的任何内容时，它会被重写为`/app/index.php?cId=clientNo32`