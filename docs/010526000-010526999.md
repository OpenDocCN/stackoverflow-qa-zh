# StackOverflow 问答 10526000-10526999

# html - textarea 铬 宽度 高度

> ID：10526000
> 
> 赞同：0
> 
> 时间：2012-05-10T00:28:43.770
> 
> 标签：html, textarea, css

我使用以下 HTML：

```
<textarea></textarea> 
```

以及以下 CSS：

```
textarea{
display: block;
margin: 0px;
padding: 0px;
border: 0px;
outline: 0px;
width: 100px;
height: 100px;
resize: none;
} 
```

Firefox、Safari 给了我我期望的 100 x 100 的 textarea，但 Chrome 为 111 x 111（甚至 Chrome 检查器也显示 100x100）。

这是我截取的截图：http: [//afbeelding.im/GF5f3d](http://afbeelding.im/GF5f3d)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T00:33:26.570

对填充和边距的东西感到困惑？`box-sizing`在这儿！

`box-sizing`可以确保元素的大小与您设置的大小**完全相同**，无论填充或边距如何，它仍然是相同的。

```
box-sizing: border-box;  //This will make your life much easier. 
```

更多信息：[http ://www.css3.info/preview/box-sizing/](http://www.css3.info/preview/box-sizing/)

演示：http: [//jsfiddle.net/DerekL/ZmXKC/](http://jsfiddle.net/DerekL/ZmXKC/)

# mysql - 如何在连接查询中查找最近的位置（纬度/经度）

> ID：10526002
> 
> 赞同：1
> 
> 时间：2012-05-10T00:28:53.140
> 
> 标签：mysql, geolocation, geocoding, geospatial, computational-geometry

我有一张包含用户列表的表格，看起来像；

```
Users..  ( id, username, lat, long ) 
```

我有一个位置表，如下所示：

```
Locations.. ( id, name, lat, lng, bound_ne_lat, bound_ne_lng, bound_sw_lat, bound_sw_lng 
```

我正在尝试做的事情是这样的；

```
SELECT Users.*, Locations.name as NearestTown
FROM Users
INNER JOIN Locations ON ( .. lookup nearest town from Locations based on Users lat lng coords, return only the nearest result .. ) 
```

我确实考虑过做某种子查询，比如；

```
INNER JOIN Locatios ON Locations.id IN (SELECT id FROM Locations ORDER BY (..distance query) desc limit 1 
```

但后来我发现我无法将用户 lat / lng 传递给每个结果的子查询。

但是，我用来计算两点之间距离的当前公式是；

```
 (3956 * 2 * ASIN(SQRT( POWER(SIN((@sourceLat - table.lookupLat) *  pi()/180 / 2), 2) +COS(@sourceLat * pi()/180) * COS(table.lookupLat * pi()/180) * POWER(SIN((@sourceLng - table.lookupLng) * pi()/180 / 2), 2) ))) as Distance, 
```

但是，当我无法为每个结果传递@sourceLat 和@sourceLng 时，我怎么能在子查询中使用它[如果最好的选择] ..？

任何帮助，非常感谢。

# mysql - 如何在这个带有 CASE 语句的多 JOIN 语句中使用 GROUP BY 语法？

> ID：10526003
> 
> 赞同：0
> 
> 时间：2012-05-10T00:28:59.943
> 
> 标签：mysql, sql

我有以下查询

```
SELECT s.s_id, s.t_id, c.c_id, c.desc, sm.user_id
FROM s s
INNER JOIN c c
ON s.c_id=c.c_id
INNER JOIN sm sm
ON s.t_id = sm.t_id
WHERE s.c_id=8; 
```

返回以下结果集

```
s.s_id  s.t_id  c.c_id  c.desc     sm.user_id
3       123     8       something  2
3       123     8       something  2
3       123     8       something  1
4       456     8       something  2
4       456     8       something  2 
```

我想

1.  在结果集中创建一个附加列，指示用户是否拥有该产品（这涉及使用`CASE`语法）
2.  并且只显示那些独特的`s.s_id`（这涉及使用`GROUP BY s.s_id`）

例如，如果`s.c_id=8`和`sm.user_id=1`结果集将是

```
s.s_id  s.t_id  c.c_id  c.desc      sm.user_id does_user_own_product
3       123     8       something   1          yes
4       456     8       something   2          no 
```

当`s.s_id=3`， 的值`does_user_own_product`是`yes`因为至少有一个`sm.user_id=1 WHERE s.s_id=3`。当`s.s_id=4`， 的值`does_user_own_product`是`no`因为没有 `sm.user_id=1 WHERE s.s_id=4`。

例如，如果`s.c_id=8`和`sm.user_id=2`结果集将是

```
s.s_id  s.t_id  c.c_id  c.desc      sm.user_id does_user_own_product
3       123     8       something   1          yes
4       456     8       something   2          yes 
```

当`s.s_id=3`， 的值`does_user_own_product`是`yes`因为至少有一个`sm.user_id=2 WHERE s.s_id=3`。当`s.s_id=4`， 的值`does_user_own_product`是`yes`因为至少有一个 `sm.user_id=2 WHERE s.s_id=4`。

给定我提供的值`s.c_id`和`sm.user_id`

**编辑** 我意识到对于用户拥有产品意味着什么有些困惑。

如果用户的 id 可以在 sm.user_id 中找到，则用户拥有该 s.s_id

例如，在原始结果集中

```
s.s_id  s.t_id  c.c_id  c.desc     sm.user_id
3       123     8       something  2
3       123     8       something  2
3       123     8       something  1
4       456     8       something  2
4       456     8       something  2 
```

用户 1 和 2 拥有 s.s_id 3，只有用户 2 拥有 s.s_id 4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T01:04:53.910

这样做：[http ://www.sqlfiddle.com/#!2/e4c84/21](http://www.sqlfiddle.com/#!2/e4c84/21)

使用 MySql 的优势：

```
set @userInquired := 1;

select s_id, t_id, c_id, dsc, 
    bit_or(user_id = @userInquired) as does_user_own_product
from tbl
group by s_id;

set @userInquired := 2;

select s_id, t_id, c_id, dsc, 
    bit_or(user_id = @userInquired) as does_user_own_product
from tbl
group by s_id; 
```

公分母 SQL：

```
set @userInquired := 1;

select s_id, t_id, c_id, dsc, 

  case when sum(case when user_id = @userInquired then 1 end) > 0 then
     1
  else
     0
  end as does_user_own_product

from tbl
group by s_id;

set @userInquired := 2;

select s_id, t_id, c_id, dsc, 

  case when sum(case when user_id = @userInquired then 1 end) > 0 then
     1
  else
     0
  end as does_user_own_product

from tbl
group by s_id; 
```

* * *

公分母 SQL。如果您的数据库没有正确的布尔值，则最短的技术，请使用`case when`and的组合`max`：

```
set @userInquired := 1;

select s_id, t_id, c_id, dsc, 

  max(case when user_id = @userInquired then 1 else 0 end) 
       as does_user_own_product

from tbl
group by s_id;

set @userInquired := 2;

select s_id, t_id, c_id, dsc, 

  max(case when user_id = @userInquired then 1 else 0 end) 
       as does_user_own_product

from tbl
group by s_id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T01:12:50.700

也许是这样的：

```
SELECT s.s_id, s.t_id, c.c_id, c.desc, sm.user_id**,
  MAX(sm.user_id = @userid) AS does_user_own_product**
FROM s s
INNER JOIN c c
ON s.c_id=c.c_id
INNER JOIN sm sm
ON s.t_id = sm.t_id
WHERE s.c_id=8
**GROUP BY s.s_id**; 
```

虽然，老实说，我认为拉取既不包含在 GROUP BY 中也不聚合的列（如`c.c_id`、`c.desc`、 ）并没有多大意义。`sm.user_id`（是的，MySQL 确实允许您这样做，但这些值在您的情况下似乎没有多大意义。）

# r - 有什么方法可以将识别命令与 ggplot 2 一起使用？

> ID：10526005
> 
> 赞同：8
> 
> 时间：2012-05-10T00:29:05.750
> 
> 标签：r, ggplot2

在这种情况下，一切正常：

```
x <- 1:10 
y <- x^3
plot(x, y)
identify(x, y) 
```

但是，使用 qplot 有一些麻烦：

```
x <- 1:10 
y <- x^3
qplot(x, y)
identify(x, y) 
```

有人知道在 ggplot2 图中标记特定点的类似命令或其他方式吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-03-23T17:29:26.433

您可以使用package`ggplot2`中的函数将您的绘图转换为交互式图形，例如：`ggplotly``plotly`

```
library(ggplot2)
library(plotly)

# Prepare data
x <- 1:10  
y <- x^3 
names <- paste("Point", LETTERS[x])

# Make a plot with `ggplot` as usual
qplot(x, y, label = names) 

# Convert it to interactive plot
ggplotly() 
```

然后将光标移到兴趣点上并查找有关它的信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T19:00:15.550

这是一种仅使用`grid`and`ggplot2`包的方法：

```
library(ggplot2)
library(grid)

x <- 1:10  
y <- x^3 
qplot(x, y) 

downViewport('panel-3-4')
pushViewport(dataViewport(x,y))

tmp <- grid.locator('in')
tmp.n <- as.numeric(tmp)
tmp2.x <- as.numeric(convertX( unit(x,'native'), 'in' ))
tmp2.y <- as.numeric(convertY( unit(y,'native'), 'in' ))

w <- which.min( (tmp2.x-tmp.n[1])^2 + (tmp2.y-tmp.n[2])^2 )
grid.text(w, tmp$x, tmp$y ) 
```

如果您想要一个文本标签而不是您可以`w`在调用中替换为`grid.text`类似`letters[w]`（或您想要的任何标签向量）的数字。

如果你打算做其中的几个，那么你可以将它包装在一个函数中，最后几行可能在一个循环中。您还可以添加额外的逻辑来警告如果您没有在某个点附近单击（如识别）或将标签移近或远离该点（此版本将最近的数据点的标签放置在您单击的点） .

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-25T14:49:24.037

我创建了一些解决方法来使用 ggplot 中的识别功能

```
df <- data.frame(x=c(1.8,2.1,3.1,2.8,3.1,4.9,5.1,3.2,2.2),
    y=c(3.2,2.3,4.1,5.2,3.1,2,1.9,2.1,3),
    name=c('agw452','hhewhdsgwgb','cgahawrhs','gsarhrwhd','ehhrwhrwwrw','fhhrwwrw','ghhWwr','hhHRWRHwr','ihwhrHWRHw'))
plot(df$x,df$y)
identified <- identify(df$x,df$y,labels=df$name,pos=T)
df$pos <- NA
df[identified$ind,]$pos <- identified$pos
ggplot(df,aes(x=x,y=y)) + geom_point() + 
    geom_point(data=subset(df,!is.na(pos)),aes(color='red')) +
    geom_text(data=subset(df,pos == 1),aes(label=name),vjust=1) + 
    geom_text(data=subset(df,pos == 2),aes(label=name),hjust=1) +
    geom_text(data=subset(df,pos == 3),aes(label=name),vjust=-.5) + 
    geom_text(data=subset(df,pos == 4),aes(label=name),hjust=0) 
```

它使用您的点击的索引和位置，并将标签放置在与绘图功能相同的位置......

希望有帮助...

拥有更多职位然后只有 4 个会很有用...但不知道如何重写识别...但是 ;-)

# database-design - 用 CouchDB 视图替换 SQL 中的多个连接

> ID：10526006
> 
> 赞同：2
> 
> 时间：2012-05-10T00:29:07.183
> 
> 标签：database-design, join, view, couchdb, mapreduce

我正在为我的应用程序实现过滤器功能，并且在 CouchDB 上编写视图时遇到了麻烦。在 SQL 中，这将是一个具有多个连接的语句。如何替换 CouchDB 中的多个联接。本文涵盖单连接：[http](http://www.cmlenz.net/archives/2007/10/couchdb-joins) ://www.cmlenz.net/archives/2007/10/couchdb-joins 。但是，对我来说，如何将这种方法扩展到多重连接并不明显。

想象一下我的对象有十几个属性，每个属性都可以有自己的过滤器。为简单起见，我们假设它只有两个属性。如果我们能解决这个问题，我们可能可以将其扩展到任意数量的属性。

我的应用程序需要支持一堆 AND 过滤器。例如，查找位置位于（“西雅图”、“纽约”）和开始时代 >= 1336608413 的所有会话。而且我还需要保留过滤器设置。

在 SQL 中，我有两个表：Session 和 Filter。然后，我在 Session 和 Filter 表之间为每个过滤条件加入一个连接，以获取所有过滤的会话。

```
Session Table
location    start-epoch    
Seattle     1336608413     

Filter Table
Name        Value
location    Seattle
location    New York
start-epoch 1336608413     

Query:
select * 
from Session s 
where exists (select 1 from Filter f where f.name = 'location' and f.value = s.location)
     and exists (select 1 from Filter f on f.name = 'start-epoch' and s.start-epoch >= f2.value) 
```

在 CouchDB 中：

```
{"type":"session", "location":"Seattle", "start-epoch":1336608413} 
```

那么如何建模过滤器和编写视图呢？

过滤器可能是这样的：

```
{"type":"filter", "location":["Seattle", "New York"], "start-epoch":1336608413} 
```

那么视图怎么写呢？

我想在 CouchDB 中实现这一点。我希望创建一个名为 FilteredSessions 的视图，并在对 Couch 的一次 http 调用中检索过滤后的会话。原因是我有 5 个不同的客户端（iOS、Android、Silverlight、Ruby on Rails 和 Windows 8），我不想重写逻辑 5 次。如果我使用 sqlite，我可以创建一个名为“FilteredView”的视图来实现这一点。我希望在 map reduce 中写出等价的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:41:52.920

嗯...我不确定您到底需要什么，但这就是我所理解的。您有一个数据集合，您正在调用会话，然后您有另一个数据集合，您正在调用过滤器。然后您想从会话中收集另一个数据集合，但使用过滤器数据从会话中选择特定数据。如果这是正确的，有几种方法可以做到这一点，这是一个：

假设您有 30 个左右的会话文档。它们各有两个属性：位置和起始时期。例如：

```
{
 "_id"         : "f80hqwfe8nfaodnia9dgs8n9",
 "location"    : "Seattle",
 "start-epoch" : "1336608413",
 "type"        : "session"
} 
```

或者...

```
{
 "_id"         : "f8fsdnio345235aodnia9dgs8n9",
 "location"    : "New York",
 "start-epoch" : "1236630174",
 "type"        : "session"
} 
```

然后你有一些过滤器，比如：

```
{
 "_id"         : "f80hqwfe8nfaodnia9dgs8n9",
 "location"    : "New York",
 "type"        : "filter"
} 
```

或者...

```
{
 "_id"         : "f80hqwfe8nfaodnia9dgs8n9",
 "start-epoch" : "1336608413",
 "type"        : "filter"
} 
```

您可以将所有会话拉到一个视图中：

```
"sesssions": {
  "map": "function (doc) {
    if (doc.type === "session") {
      emit(doc.start-epoch, doc);
    }
}" 
```

然后，将所有过滤器拉到一个视图中（您可以即时更新）：

```
"filters": {
  "map": "function (doc) {
    if (doc.type === "filter") {
      emit(doc.type, doc);
    }
}" 
```

因此，我将在 nodejs 中组装我的最终“视图”。如果需要，我会向我的数据库的过滤器视图发出请求或创建一个新过滤器，并将其存储在一个变量中，如过滤器或过滤器。然后我会再次调用我的数据库的会话视图，并将该数据拉入一个变量，如会话。

这里有一点旁注。您需要调用视图（假设您存储了沙发返回到 var 视图中的 json 对象），然后将 view.rows 存储到会话变量中，这将为您提供如下所示的会话数组：

```
[
 {
  "_id"         : "f80hqwfe8nfaodnia9dgs8n9",
  "location"    : "Seattle",
  "start-epoch" : "1336608413",
  "type"        : "session"
 },
 {
  "_id"         : "f8fsdnio345235aodnia9dgs8n9",
  "location"    : "New York",
  "start-epoch" : "1236630174",
  "type"        : "session"
 }
] 
```

然后就做

```
var myFinalView = sessions.forEach(function (session) {
  if (filter.location !== session.location) {
    // session.splice or delete session
  }
  return;
}) 
```

然后 myFinalView 将是您需要的 JSON 对象。我希望这是有道理的。如果需要，请让我详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:03:14.700

```
var sessions = [];
var filters = [];

function(doc) {
  if (doc.type === 'session') {
    sessions.push(doc);
  }
  if (doc.type === 'filter') {
    filters.push(doc);
  }
  emit(filters.length, filters);
  emit(sessions.length, sessions);
} 
```

我试图将这些发射拉到函数末尾以下，但这似乎让 CouchDB 感到不安。这会将过滤器和会话“编译”成集合。如果有一个好方法可以知道“编译”何时完成，下一步将是遍历过滤器，然后 forEach 遍历应用过滤器的会话。

感谢分享这个挑战！这确实推动了 CouchDB 的极限。我希望我们能解决这个问题，这应该是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T20:53:21.130

这是我的想法。在 map 函数中，发出会话和过滤文档。然后使用 list 函数枚举映射输出以读取持久的过滤器和会话以进行过滤。

# android - 我可以以编程方式拨打匿名电话吗？

> ID：10526007
> 
> 赞同：0
> 
> 时间：2012-05-10T00:29:26.220
> 
> 标签：android

我有一个应用程序，用户可以通过单击按钮调用另一个用户。

我想知道是否有办法匿名拨打这个电话，对用户隐藏电话号码而不将其保存在通话记录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:53:39.010

根据平台源代码，在用户不知情的情况下无法拨打电话。您可以做的最好的事情是自动拨打电话，但用户会看到一个对话框说：“呼叫 XXXXXXXX”，他将有机会取消它。

即使您制作自己的拨号器应用程序，您也必须使用系统密钥对其进行签名并将其放置在 system/apps 文件夹中，以便获得此类操作所需的权限。

至于通话记录，我不知道你是否可以让通话不出现在其中，但我认为（虽然不确定）你可以找到它并在之后删除。Android 通过 Intent 将呼叫操作通知其他应用程序，因此可以相对容易地检测到呼叫何时结束，然后查询呼叫日志。

希望这可以帮助...

# testng - 有没有办法显示属于某个 TestNG 组的所有测试？

> ID：10526008
> 
> 赞同：1
> 
> 时间：2012-05-10T00:29:40.820
> 
> 标签：testng, gradle

我正在开发一个使用 Gradle 构建的 TestNG 项目。没有 testng.xml 文件，组执行基于 TestNG 文件中的注释。有没有办法获取属于特定组的测试列表？搜索java文件很乏味......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:58:37.783

HTML 报告和 Eclipse 插件都向您显示该信息。

# jquery - jQuery DIV 重叠背景 DIV

> ID：10526010
> 
> 赞同：1
> 
> 时间：2012-05-10T00:29:58.667
> 
> 标签：jquery, css, html

我的 jQuery DIV 有点问题。我有一个名为“allcontent”的DIV，它包含所有HTML，在里面我有一个“headlinesarea”DIV，其中包含网站的所有标题和一个“datacontentarea”DIV，其中包含所有灯具/表格等右手边，它也是一个浮动到右边的DIV，写在'headlinesarea' DIV之前，因为它必须浮动。

'allcontent' DIV 包含一个带有repeat-y 的透明背景图像，因此当添加更多内容时，图像将继续向下重复，并且与'headlinesarea DIV' 一起工作正常，但是当我添加一个具有联盟的jQuery DIV可以打开和折叠“allcontent”DIV 的表格不会拉伸，jQuery DIV 最终会与“allcontent”DIV 的背景图像重叠。

我的网站的链接是[http://thefootballleague.clanteam.com/](http://thefootballleague.clanteam.com/)，在这里你可以看到我的可折叠 jQuery DIVS，它们是冠军联赛、联赛 1 和联赛 2。当它们被点击时，它们打开得很好，但不幸的是它们没有拉伸'allcontent' DIV 背景。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T00:40:20.590

添加样式：

```
#allcontent {
    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T00:37:50.287

只需添加

```
<div style="clear:both"></div> 
```

在**“所有内容”的底部**

像这样 ：

```
<div id="allcontent">

<div id="header"></div>
<div id="nav">
...
</div>
<div id="datacontentarea">
...
</div>
<div id="headlinesarea">
...
</div>
<div style="clear:both"></div>//add this
</div> 
```

或成功

```
<div class="clear"></div> 
```

然后加

```
.clear{
    clear:both;
} 
```

在你的样式表上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T00:43:25.777

更恰当地说，您需要的是 clearfix：

[http://www.webtoolkit.info/css-clearfix.html](http://www.webtoolkit.info/css-clearfix.html)

因为您的 datacontentarea div 向右浮动，所以您需要清除浮动以使 allcontent div 的大小正确。

当然，在您复制 clearfix css 之后，只需将“clearfix”类应用于“allcontent”div。

这是处理这些类型的浮动问题的最干净的方法。

# vim - Vimscript 是否允许多行字符串？

> ID：10526011
> 
> 赞同：49
> 
> 时间：2012-05-10T00:29:59.957
> 
> 标签：vim

Vimscript 是否允许多行字符串？

python 和 ruby​​ 命令允许以下格式：`:python << EOF`

你能用字符串做类似的事情吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-10T03:04:08.447

Vimscript 确实允许通过以反斜杠开始下一行来延续上一行，但这不如在 Ruby、PHP 或 Bash 中找到的 heredoc 字符串那么方便。

```
let g:myLongString='A string
\ that has a lot of lines
\ each beginning with a 
\ backslash to continue the previous one
       \ and whitespace before the backslash
       \ is ignored' 
```

查看[有关 line-continuation 的相关文档](http://vimdoc.sourceforge.net/htmldoc/repeat.html#line-continuation)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-07-07T14:51:31.253

## Vimscript 多行字符串，点运算符：

枚举分配并包括以前的分配让您可以跨行连接

```
let foo = "bar" 
let foo = foo . 123 
echom foo                      "prints: bar123 
```

**使用复合字符串连接运算符点等于：**

```
let foo = "bar" 
let foo .= 123 
echom foo                      "prints: bar123 
```

**列出您的字符串和数字并加入它们：**

```
let foo = ["I'm", 'bat', 'man', 11 ][0:4] 
echo join(foo)                                   "prints: I'm bat man 11 
```

**同上，但加入数组切片**

```
let foo = ["I'm", 'bat', 'man', [ "i'm", "a", "mario" ] ] 
echo join(foo[0:2]) . " " . join(foo[3]) 
"prints: I'm bat man i'm a mario 
```

**行首的反斜杠允许行继续**

```
let foo = "I don't think mazer 
  \ intends for us to find 
  \ a diplomatic solution" 
echom foo 

let foo = 'Keep falling,  
  \ let the "grav hammer" and environment 
  \ do the work' 
echom foo 
```

印刷：

```
I don't think mazer intends for us to find a diplomatic solution
Keep falling, let the "grav hammer" and environment do the work 
```

**将您的秘密文本和最古老的书籍隐藏在一个函数中：**

```
function! myblockcomment() 
    (*&   So we back in the club 
    //    Get that bodies rocking 
    !#@   from side to side, side side to side. 
    !@#$   =    %^&&*()+
endfunction 
```

自由格式文本的内存位置是它位于磁盘上的文件。该函数永远不会运行，否则解释器会呕吐，所以直到你使用 vim 反射来实现`myblockcomment()`然后做你想做的任何事情。除了让人眼花缭乱和混乱之外，不要这样做。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-09-01T10:36:06.557

您不能使用`<<`创建字符串，但可以使用`<<`创建字符串列表。看`:help :let=<<`

下面是来自 vim doc 的示例

```
 let text =<< trim END
               if ok
                 echo 'done'
               endif
            END 
```

# ruby-on-rails-3 - 根据关联模型的总和对玩家进行排序

> ID：10526012
> 
> 赞同：5
> 
> 时间：2012-05-10T00:30:11.007
> 
> 标签：ruby-on-rails-3, group-by, associations, sum, has-many

我有一个数据库，有 6500 个`players`，每个玩家平均有 15 场比赛`results`。

**用例**

我想生成一个玩家列表，按他们的**奖金****总和**（结果表中的一个字段）排序。我更喜欢它在某种范围内，所以我还可以过滤玩家所在国家/地区的列表等。

 ****表现**

我看过提到`cache_counter`性能领域的帖子。就我而言**，我有数千条结果记录（75.000+）**，所以我不希望每次有人访问生成的列表时都进行计算。

**问题**

解决这个问题的最佳模式是什么？以及如何实现它？

**楷模**

```
class Player < ActiveRecord::Base
  has_many :results
end

class Result < ActiveRecord::Base
  belongs_to :player
end 
```

**模式**

```
 create_table "players", :force => true do |t|
    t.string   "name"
    t.string   "nationality"
  end

  create_table "results", :force => true do |t|
    t.integer  "player_id"
    t.date     "event_date"
    t.integer  "place"
    t.integer  "prize"
  end 
```

**更新**

我想要完成的是达到我可以使用的程度：

```
@players = Player.order_by_prize 
```

和

```
@players = Player.filter_by_country('USA').order_by_prize('desc') 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T07:58:28.347

你应该能够使用这样的东西：

```
class Player
 scope :order_by_prize, joins(:results).select('name, sum(results.prize) as total_prize').order('total_prize desc') 
```

有关详细信息，请参阅 rails api -[活动记录查询](http://guides.rubyonrails.org/active_record_querying.html)。**

# xml - 正则表达式使用 xml 文件进行搜索/替换 - 列出 在一对

> ID：10526015
> 
> 赞同：0
> 
> 时间：2012-05-10T00:30:20.690
> 
> 标签：xml, regex, joomla

我正在使用 xml 文件进行搜索并用 Regex 替换 - 实际上它是一个 Joomla 网站，使用组件替换器。我有一个清单，我需要在其中添加

```
 <ul> 
```

为了第一

```
 <li> 
```

元素并在最后一个之后关闭

```
 </ul> 
```

xml文件的构建方式如下

```
 <item>
    <search><span class="SCompany">([^<]*)</span></search>
    <replace><div class="text1">$1</div></replace>
    </item> 
```

这个。由于在涉及正则表达式时我是一个真正的菜鸟，因此我需要一些帮助。怎么可能在 xml 文件中，把所有的

```
 <li>content</li> 
```

标签成一对

```
 <ul></ul>? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:40:03.943

解析 xml/html 时，正则表达式通常不是一个好主意，因为很难跟踪语法。

正则表达式是最强大的，如果输入是一行，而且只有一行 - 外面没有上下文。

你怎么知道，你的 li 元素都属于同一个列表，而不是两个或多个列表？如何检测`<pre>`标签和评论中的 li 元素以忽略它们？

而是寻找一个 xml 解析器。

# wpf - 在 ControlTemplate 中声明子控件时如何访问子控件的属性？

> ID：10526017
> 
> 赞同：1
> 
> 时间：2012-05-10T00:30:22.793
> 
> 标签：wpf, gridview, controltemplate

我有一个 GridView，我想在其中将一个复选框嵌入到其中一列的标题中。我需要在代码隐藏中检查它的 IsChecked 属性。但是，我无法按名称访问它，因为它位于列标题的模板中，如下所示：

```
<ListView.View>
    <GridView>
        <GridViewColumn>
            <GridViewColumn.HeaderContainerStyle>
                <Style TargetType="{x:Type GridViewColumnHeader}">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type GridViewColumnHeader}" >
                                <Border Background="SkyBlue" BorderBrush="Black" BorderThickness="1,1,0,1">
                                <CheckBox Name="_cbAllSettingFiles" 
                                          Command="{Binding Path=CheckAllLocationFilters}" 
                                          CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=IsChecked}"/>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </GridViewColumn.HeaderContainerStyle>
... 
```

是否有另一种方法可以在代码隐藏中访问 IsChecked 属性的值？还是我一开始就以错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:31:31.890

您需要将其绑定到某个属性，这样访问起来要容易得多。

# javascript - 在 json 样式的 javascript 中使用它

> ID：10526018
> 
> 赞同：0
> 
> 时间：2012-05-10T00:30:25.110
> 
> 标签：javascript, jquery

最近，我在编写 JavaScript 时对它知之甚少。

这是我今天早上写的第一个 javascript 代码。

```
$(window).load(function(){
    SubMenuHandler.init();
});

var SubMenuHandler = {
    init : function() {
        $("#statisticManager, #deviceManager, #policyManager").click(
            function(event) {
                var url = SubMenuHandler.getUrlFromEvent(event); // <-- These two
                SubMenuHandler.redirectPage(url);                // <-- lines
            }
        );
    },
    redirectPage : function(url) {
        $(location).attr("href", url);
    },
    getUrlFromEvent : function(event) {
        var target = event.target;
        var url = $(target).data("url");
        return url;
    }
} 
```

如您所见，`SubMenuHandler`在类中被递归调用。

但是，我看不出这是怎么做到的。根据我使用其他语言的经验，它们通常使用`this`关键字而不是使用类的全名，除非在访问静态变量时。

是否有类似或更好的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T00:33:23.157

```
init : function() {
    var me = this; // <----- this is the magic
    $("#statisticManager, #deviceManager, #policyManager").click(
        function(event) {
            var url = me.getUrlFromEvent(event);

            me.redirectPage(url);
        }
    );
}, 
```

它被称为“闭包”

来自谷歌的随机链接：[http ://www.javascriptkit.com/javatutors/closures.shtml](http://www.javascriptkit.com/javatutors/closures.shtml)

完美的答案在这里：[https ://stackoverflow.com/a/111200/251311](https://stackoverflow.com/a/111200/251311)

# r - 优化 apply()

> ID：10526028
> 
> 赞同：1
> 
> 时间：2012-05-10T00:32:16.197
> 
> 标签：r, apply

我想优化以下代码。目前它在具有 2MB L2 缓存的 2Ghz 双核机器上运行大约 0.085 秒，因为 M 是 2404 x 100 数字矩阵：

```
Rescale <- function( M = utility.mat){
  exp.M <- exp(M) 
  result <- apply(exp.M, 1, function(x) x/sum(x))
  result <- t(result)
  return (result)
} 
```

我尝试用`apply()`for 循环替换，它提供了大致相同的性能。还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T00:41:54.660

这在我的机器上似乎快了大约 6 倍：

```
Rescale1 <- function(M){
    M <- exp(M)
    result <- M / rowSums(M)
    return (result)
} 
```

我想也许你可以通过打电话进一步加快速度，`.Internal(rowSums())`但没有成功。虽然这可能只是因为我没有正确使用它。

# sql - 从今天到该月第一天的两个表中选择日期范围

> ID：10526030
> 
> 赞同：3
> 
> 时间：2012-05-10T00:32:30.190
> 
> 标签：sql, sql-server-2008, sql-server-2005

使用 Microsoft SQL 2008。我有两个表要从当前日期到该月的第一天（或同一个月内）选择。假设今天的日期是 05/09/2012，日期列是“datecolumn”。从下表中，我应该只从表 1 中获取行集 6,7，从表 2 中获取行集 9,2，因为这些日期与 2012 年 5 月 9 日在同一个月内。

```
table1
4 02/01/2012
5 01/02/2011
6 05/01/2012
7 05/20/2012

table2
8 02/01/2012
9 05/14/2012
3 01/02/2011
2 05/18/2012 
```

我试过了，但没有用：

```
DECLARE @daterange
SET @daterange = (DATEPART(MONTH,GETDATE()) + '/' + DATEPART(YEAR,GETDATE()))

SELECT blah from table where (DATEPART(MONTH,datecolumn) + '/' + DATEPART(YEAR,datecolumn)) = @daterange 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:36:18.033

您可以简化它，无需从以下位置重构日期字段`GETDATE()`：

```
SELECT blah
FROM table
WHERE DATEPART(MONTH,datecolumn) = DATEPART(MONTH,getdate()) AND
DATEPART(YEAR,datecolumn) = DATEPART(YEAR,getdate()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:41:37.447

如何确定当前月份的开始和结束，然后选择它们之间的记录：

```
declare @monthBeginning datetime 
set @monthBeginning = (select dateadd(dd,-(day(dateadd(mm,1,getdate()))-1),dateadd(mm,0,getdate()))

declare @monthEnd datetime
set @monthEnd = (select dateadd(dd, -day(dateadd(m,1,getdate())), dateadd(m,1,getdate())))

select *
from dateTable
where datecolumn between @monthBeginning and @monthEnd 
```

如果您发现自己经常使用月份开始和结束计算，我建议将它们放入标量函数 - 逻辑非常复杂，不想重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T00:43:33.990

您可以像这样收到当月的第一天：

```
DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0) 
```

通过在上述结果中添加一个月，您将收到下个月的第一个月：

```
DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + 1, 0) 
```

使用这两个日期，您可以检索所需的行，如下所示：

```
SELECT
  …
FROM table1
WHERE date >= DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE())    , 0)
  AND date <  DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + 1, 0) 
```

# c# - 获取当前用户 ID

> ID：10526031
> 
> 赞同：2
> 
> 时间：2012-05-10T00:32:35.003
> 
> 标签：c#, asp.net-mvc-3, membershipuser

我正在尝试获取当前登录用户的 UserId，如这篇文章[http://msdn.microsoft.com/en-us/library/aa478949.aspx](http://msdn.microsoft.com/en-us/library/aa478949.aspx)中所述，作为 aspnet_Membership 表的一部分。

这是我正在寻找的地方：

```
 MembershipUser user = null;

    if (User != null && User.Identity != null && !string.IsNullOrEmpty(User.Identity.Name))
    {
        user = Membership.GetUser(User.Identity.Name);
    }

    if (user != null)
    {
        //int id = user.UserId;
    } 
```

MembershipUser 没有 UserId。我正在尝试将 UserId 用作我将创建的其他表的外键。我可以使用 UserName，但我认为使用 UserId 可能会更好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T00:38:33.117

试试看[MembershipUser.ProvideUserKey](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.provideruserkey.aspx)属性是否适合你

从上面的链接：

> ProviderUserKey 属性从类型为对象的成员数据源公开标识符。标识符的类型取决于 MembershipProvider 或 MembershipUser。在 SqlMembershipProvider 的情况下，ProviderUserKey 可以转换为 Guid，因为 SqlMembershipProvider 将用户标识符存储为 UniqueIdentifier。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T00:37:05.083

```
Membership.GetUser().ProviderUserKey 
```

GetUser() 将获取当前用户，ProviderUserKey 将是 Id，它将作为一个对象出现，并且您需要将其转换为它的真实身份，int、guid 等。

# jquery - 如何通过 jquery 重用选定的 id 来执行 $.trim() 函数

> ID：10526032
> 
> 赞同：0
> 
> 时间：2012-05-10T00:32:36.687
> 
> 标签：jquery, cakephp

我发现这个链接非常有用

[获取选定的文本框 id jQuery](https://stackoverflow.com/questions/8220893/get-selected-textbox-id-jquery)

但是，我现在想做的是重用这个 id 来为它实际循环的每个文本框做一些修剪功能。我试过这段代码：

```
<html>
    <head>
        <?php   echo $this->Html->script("jquery-1.4.3.min"); ?>

    </head>
    <body>
    <?php
        echo $content_for_layout;
    ?>
    <script type="text/javascript">
        $(document).ready(function () {
         //       alert('JQuery is succesfully included');

/*      $(':submit').click(function(){
            <?php if(($this->request->controller=='members')&&($this->action=='register')):?>
                    //alert('well');
                    var some = $.trim($(":text").val());
                    alert(some);
            <?php  endif; ?>

            });
*/
            $(':submit').click(function(){
                $('form input[type="text"]').each(function(){
                    //get value of id of textbox here
                    var id = $(this).attr('id');
                    var some = $.trim($((this).attr('id')).val());
                    alert(some);
                });

            });
        });
    </script>
    </body>
</html> 
```

但它不会弹出警报框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:48:15.427

我对您要实现的目标感到有些困惑，但是这一行存在问题：

```
var some = $.trim($((this).attr('id')).val()); 
```

具体来说，`(this).attr('id')`不起作用，因为`(this)`它被解释为`this`并且`this`是当前没有`.attr()`方法的 DOM 元素。

我*想*你可能想这样做：

```
var some = $.trim($("#" + $(this).attr('id')).val());
// or, given you already have a variable id equal to $(this).attr('id')
var some = $.trim($('#' + id).val()); 
```

也就是说，您试图从当前元素中获取 id，然后使用该 id 选择元素并获取其值，然后修剪该值。但是你不需要 id 来获取值，因为你已经引用了元素 - 你可以这样做：

```
var some = $.trim($(this).val());
// or
var some = $.trim(this.value); 
```

如果您想遍历所有文本框并将它们设置为当前值的修剪版本，您可以这样做：

```
$('form input[type="text"]').each(function(){
    this.value = $.trim(this.value);
    // or if you want the slower and harder to read way:
    $(this).val( $.trim($(this).val()) );
}); 
```

或者：

```
$('form input[type="text"]').val(function(i,currentVal) {
    return $.trim(currentVal);
}); 
```

有关将[`.val()`回调](http://api.jquery.com/val/)函数传递给`.val()`.

# php - 当 Doctrine MongoDB ODM 执行成功的文件查询时 PHP 死亡

> ID：10526033
> 
> 赞同：0
> 
> 时间：2012-05-10T00:32:50.273
> 
> 标签：php, mongodb, symfony, doctrine, mongodb-php

我正在使用**Doctrine**和**MongoDB进行****Symfony2**项目。至少可以说，一切都很好，直到今天我发现了一个问题。

 ****返回一个或多个记录/文档的查询显然会导致 PHP 进程终止。更具体地说，这只发生**在返回“文件”结果的查询中**。我没有收到 PHP 错误，也没有错误记录到 apache 错误日志中。

当我点击导致此查询运行的 URL 时，我在 Chrome 中得到**net::ERR_EMPTY_RESPONSE**。我可以`echo 'test';exit()`在查询之前输出内容，并在浏览器中看到内容。如果我在查询之后立即放置同一`echo 'test';exit();`行，则会收到空响应错误。

我的计算机上有一个开发环境设置，其中包括 LAMP 堆栈。但是，我已将其配置为连接到我的远程 MongoDB 实例。使用本地设置查询文件时没有问题。我的计算机和服务器之间的各种服务版本略有不同。基于此观察，似乎不是 MongoDB 服务问题，而可能是 PHP 扩展问题？

我补充说我能够使用服务器上的服务成功存储文件。但我只能在本地设置中查询/检索数据。

当 PHP 像这样死掉时，是否会生成任何日志内容？

我正在运行以下服务版本：

*   操作系统：Ubuntu 12.04 LTS
*   阿帕奇：2.2.22
*   PHP: 5.3.10-1ubuntu3.1
*   Mongo PHP 扩展：1.2.10
*   MongoDB-10gen：2.0.5

任何帮助将不胜感激。我已经尝试了我所知道的一切，但还没有找到任何线索来说明究竟是什么导致了这种情况发生。

--

我的模型如下所示：

```
<?php

namespace Project\Bundle\Document;

use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @MongoDB\Document
 */
class File {

/**
 * @MongoDB\Id(strategy="auto")
 */
protected $id;

/**
 * @MongoDB\ObjectId
 * @MongoDB\Index
 * @Assert\NotBlank
 */
protected $userId;

/**
 * @MongoDB\ObjectId
 * @MongoDB\Index
 */
protected $commonId;

/**
 * @MongoDB\File
 */
public $file;

/**
 * @MongoDB\String
 */
public $mimeType;

/**
 * @MongoDB\Hash
 */
public $meta;

... getters / setters ...

?> 
```

我为 MongoDB 服务器打开了详细日志记录，查询似乎运行良好：

```
Wed May  9 20:04:29 [conn1] queryd dbdev.File.files query: { $query: { commonId: ObjectId('4fab01396bd985c215000000'), meta.size: "large" }, $orderby: {} } ntoreturn:1 nreturned:1 reslen:258 0ms
Wed May  9 20:04:29 [conn1] end connection 127.0.0.1:42087
Wed May  9 20:04:30 [DataFileSync] flushing mmap took 0ms  for 5 files
Wed May  9 20:04:30 [DataFileSync] flushing diag log
Wed May  9 20:04:30 [PeriodicTask::Runner] task: WriteBackManager::cleaner took: 0ms
Wed May  9 20:04:30 [PeriodicTask::Runner] task: DBConnectionPool-cleaner took: 0ms
Wed May  9 20:04:30 [PeriodicTask::Runner] task: DBConnectionPool-cleaner took: 0ms
Wed May  9 20:04:30 [clientcursormon] mem (MB) res:46 virt:997 mapped:160 
```

**更新**

我曾经`strace`在 Apache 中发现以下分段错误：

```
en("/opt/dev/app/cache/dev/doctrine/odm/mongodb/Hydrators/ProjectBundleDocumentFileHydrator.php", O_RDONLY) = 28
fstat(28, {st_mode=S_IFREG|0777, st_size=2462, ...}) = 0
fstat(28, {st_mode=S_IFREG|0777, st_size=2462, ...}) = 0
fstat(28, {st_mode=S_IFREG|0777, st_size=2462, ...}) = 0
fstat(28, {st_mode=S_IFREG|0777, st_size=2462, ...}) = 0
mmap(NULL, 2462, PROT_READ, MAP_SHARED, 28, 0) = 0x7fa3ae356000
munmap(0x7fa3ae356000, 2462)            = 0
close(28)                               = 0
--- SIGSEGV (Segmentation fault) @ 0 (0) ---
chdir("/etc/apache2")                   = 0
rt_sigaction(SIGSEGV, {SIG_DFL, [], SA_RESTORER|SA_INTERRUPT, 0x7fa3b3ce4cb0}, {SIG_DFL, [], SA_RESTORER|SA_RESETHAND, 0x7fa3b3ce4cb0}, 8) = 0
kill(5020, SIGSEGV)                     = 0
rt_sigreturn(0x139c)                    = 0
--- SIGSEGV (Segmentation fault) @ 0 (0) ---
Process 5020 detached 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:14:12.020

这听起来像是我在 5 月 3 日修复的错误。我建议你尝试最新版本的 github（v1.2 分支！）。如果您将 phpinfo() 部分包含在“mongodb”中，这也会有所帮助。如果您仍有问题，请在[http://jira.mongodb.org/browse/PHP上提交带有可重现的](http://jira.mongodb.org/browse/PHP)*小*脚本的错误报告。****

# php - 如何让apache做ssh

> ID：10526039
> 
> 赞同：1
> 
> 时间：2012-05-10T00:33:37.793
> 
> 标签：php, ssh

我想使用 exec 从我的 php 中的远程服务器运行一些命令。像这样：

```
<? php
exec('ssh user@remote_server command');
?> 
```

我的帐户可以使用公钥/私钥访问该 remote_server 的 ssh，但不能使用 apache。请注意，我没有对这两台机器的 root 访问权限。[为“apache”用户生成 SSH 密钥的](https://stackoverflow.com/questions/7306990/generating-ssh-keys-for-apache-user)所有答案都需要 root 访问权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T04:43:23.923

我的建议：使用[phpseclib，一个纯 PHP SSH 实现](http://phpseclib.sourceforge.net/)。例如。

```
<?php
include('Net/SSH2.php');

$ssh = new Net_SSH2('www.domain.tld');
if (!$ssh->login('username', 'password')) {
    exit('Login Failed');
}

echo $ssh->exec('pwd');
echo $ssh->exec('ls -la');
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-29T08:42:00.497

Web 服务器进程由 apache 用户而不是 root 拥有。

1.  确保 apache 用户没有密码登录到远程服务器

2.  SE linux 应该被禁用。 [参考](http://wccandlinux.blogspot.in/2016/07/how-to-run-ssh-command-from-apache.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T00:58:20.340

如果没有 root 访问权限，这是一个坏主意。为了确保 Apache 的用户可以看到您的私钥，您必须使其对全世界都可读：没有 root 您不能`chown www-data:www-data`，因此 Apache 不仅可以看到它，系统上的每个用户都可以. 因为这是一个糟糕的主意，所以 OpenSSH 默认不允许它运行 - 如果您的私钥具有不合理的打开文件权限，它将拒绝运行。

我强烈建议不要这样做。如果您确实需要能够让 PHP 使用 SSH 密钥运行远程命令，那么您将需要具有 root 访问权限的人按照您的链接设置更安全的东西。

一个更安全的替代方法是在目标机器上编写一个 PHP 脚本，该脚本接受一个包含您定义的密码的 HTTP 请求，执行一个预定义的命令并返回输出。如果此脚本是安全编写的并且只能执行一个预定义的命令，那么攻击者所能做的就是运行与您相同的命令 - 只要此脚本的密码与您自己的任何密码不同。它不需要完全是一个命令，如果你小心的话，它甚至可以接受一些参数：重要的一点是你不允许远程用户执行*任意命令*目标机器上的命令。如果您确定您希望能够运行的命令没有潜在的危害，并且您的脚本不包含允许运行其他命令的编码错误，那么这不是一个坏主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T00:41:24.943

我会尝试：

```
$identity_file = '/home/you/.ssh/id_rsa'; // <-- replace with actual priv key
exec('ssh -i ' . $identity_file . ' user@remote_server command'); 
```

看看你是否可以像那样进行身份验证。您必须确保 Apache 可以读取身份文件。

缺点是现在 Apache 用户可以读取您的私钥，这意味着任何其他以 Apache 用户身份运行的站点也可以。但即使您为 Apache 用户创建了私钥，也是如此。为了获得更好的安全性，请参阅关于使用 suPHP 或 suExec 以特定用户身份运行 PHP。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T05:42:41.250

使用 SSH2。 [http://php.net/manual/en/book.ssh2.php](http://php.net/manual/en/book.ssh2.php)

# ios - Mapkit mapview 在第一次尝试时未显示

> ID：10526043
> 
> 赞同：2
> 
> 时间：2012-05-10T00:34:00.550
> 
> 标签：ios, mkmapview, mapkit

我在 RootViewController.m 上有一个选项卡。该选项卡有 2 个按钮。单击后的第一个按钮将转到带有 mapView 的 CorpViewcontroller。当我第一次尝试点击第一个按钮时，地图是空白的，底部有谷歌标签。我必须单击返回，然后再次单击按钮，然后地图就会显示出来。是否可以始终在第一次单击按钮时显示地图？

我的 rootViewController.m 进入第二个屏幕：

```
 [self.navigationController pushViewController:self.corpController animated:YES]; 
```

名为 corpViewController 的第二个屏幕具有以下代码：

```
 - (void)viewDidLoad
  {
    [super viewDidLoad];

    self.title = @"Set Remote Location";
    self.jsonData = [[NSMutableData alloc] init];

    mapView.showsUserLocation = YES;

    //Setup the double tap gesture for getting the remote location..
    UITapGestureRecognizer *tgr = [[UITapGestureRecognizer alloc] 
                               initWithTarget:self action:@selector(handleGesture:)];
    tgr.numberOfTapsRequired = 2;
    tgr.numberOfTouchesRequired = 1;
    [mapView addGestureRecognizer:tgr];

    mapView.delegate = self;

    NSLog(@"viewDidLoad  done");
    }

    - (void)viewWillAppear:(BOOL)animated    {

      NSLog(@"viewWillAppear");

      appDelegate = (NBSAppDelegate *)[[UIApplication sharedApplication] delegate];

      double curLat = [appDelegate.curLat doubleValue];

      MKUserLocation *userLocation = mapView.userLocation;

      double miles = 10.0;
      double scalingFactor = ABS( (cos(2 * M_PI * curLat / 360.0) ));

      MKCoordinateSpan span; 

      span.latitudeDelta = miles/69.0;
      span.longitudeDelta = miles/(scalingFactor * 69.0); 

      MKCoordinateRegion region2;
      region2.span = span;
      region2.center = userLocation.coordinate;

      [mapView setRegion:region2 animated:YES];

       NSLog(@"viewWillAppear done..");

       } 
```

请指教。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T01:14:49.123

`viewDidLoad`您是否在视图控制器的方法中初始化 MapView ？

如果是这样，请尝试将其移至该`viewDidAppear`方法。这对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T01:57:33.870

在`viewDidLoad`您设置`showsUserLocation`为`YES`和 时`viewWillAppear`，您正在放大`mapView.userLocation`坐标。

在设置为后，该`userLocation`属性通常不会立即准备好有效坐标。`showsUserLocation``YES`

第一次显示视图控制器时，它仍然无效，并且您正在放大坐标 0,0。

当您第二次显示视图控制器时，用户位置已经获得并且坐标是有效的。

与其放大用户位置，不如在地图视图获取用户位置更新时调用`viewWillAppear`的委托方法中进行。`mapView:didUpdateUserLocation:`

此外，您可能还想将`mapView.showsUserLocation = YES;`to`viewWillAppear`和 in移至`viewWillDisappear`，将其设置为`NO`。这样，每次显示视图控制器时，地图视图都会放大到用户位置，而不仅仅是第一次显示。

一个不相关的一点是，要放大到特定距离，使用该功能要容易得多，`MKCoordinateRegionMakeWithDistance`而不是自己尝试将英里转换为度数。

以下是建议的更改示例`corpViewController`：

```
- (void)viewWillAppear:(BOOL)animated
{
    //move this from viewDidLoad to here...
    mapView.showsUserLocation = YES;
}

-(void)viewWillDisappear:(BOOL)animated
{
    mapView.showsUserLocation = NO;
}

-(void)mapView:(MKMapView *)mv didUpdateUserLocation:(MKUserLocation *)userLocation
  //Changed the **internal** parameter name from mapView to mv
  //to avoid a compiler warning about it hiding instance var with same name.
  //It's better to use the passed parameter variable anyway.
{
    NSLog(@"didUpdateUserLocation");

    double miles = 10.0;

    //Instead of manually calculating span from miles to degrees, 
    //use MKCoordinateRegionMakeWithDistance function...
    //Just need to convert miles to meters.
    CLLocationDistance meters = miles * 1609.344;
    MKCoordinateRegion region2 = MKCoordinateRegionMakeWithDistance
                                   (userLocation.coordinate, meters, meters);

    [mv setRegion:region2 animated:YES];
} 
```

# android - 带有路径数组的 Android ImageFlipper

> ID：10526045
> 
> 赞同：1
> 
> 时间：2012-05-10T00:34:17.503
> 
> 标签：android, viewflipper

我的问题是

我有一个字符串数组，其中包含目录中图像文件的路径。我需要像幻灯片一样显示图像。我一直在研究 ImageFlipper 和 ViewFlipper。

请为我提供一个解决方案，说明如何提供解决方案。如何将图像传递给 ImageFlipper 或 ViewFlipper。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T16:54:16.217

我能够弄清楚该怎么做.....这是我的代码

```
String[] paths={"/mnt/user/Pictures/IMG_5509_LRS.jpg",
                                  "/mnt/user/Pictures/IMG_6076_LRS.jpg",
                                                    "/mnt/user/Pictures/IMG_5790_LRS.jpg"};
        FileInputStream in;
        BufferedInputStream buf;
        ArrayList<Drawable> drawablesArray=new ArrayList<Drawable>();
        ArrayList<Bitmap> bitmapArray=new ArrayList<Bitmap>();
        File file = null;
        final ImageSwitcher imageswticher=(ImageSwitcher) findViewById(R.id.imageSwitcher1);
         for(int i=0;i<paths.length;i++)
         {
              try {
                in=new FileInputStream(paths[i]);
                buf=new BufferedInputStream(in);
                Bitmap bMap=BitmapFactory.decodeStream(buf);
                bitmapArray.add(bMap);

            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
              ImageView iv=(ImageView) findViewById(R.id.imageView1);

              ImageSwitcher imageswitcher=(ImageSwitcher) findViewById(R.id.imageSwitcher1);

              for(int h=0;h<bitmapArray.size();h++)
              {
                  drawablesArray.add(new BitmapDrawable(bitmapArray.get(h)));
              } 
```

现在我将可绘制数组传递给 Imageswitcher 并得到了我想要的。

希望它可以帮助某人......

# java - 需要一种方法让我的角色在左/右移动时跳跃

> ID：10526049
> 
> 赞同：1
> 
> 时间：2012-05-10T00:34:33.433
> 
> 标签：java

我已经让 y 轴上的跳跃运行良好，但我希望能够在按下左/右键时使用“dx”跳跃（例如，如果我按右键向右走并在静止时跳跃拿着它，角色将以“对角线”方式移动）

我的主要跳转代码（按下跳转键时激活定时器）：

```
 public void actionPerformed (ActionEvent e) {
    dy += 1;
        y_pos += dy;
    if (y_pos >= 400) {
        dy = 0;
        y_pos = 400;
       timer.stop();
    }   
    repaint();
} 
```

现在我的 KeyEvent 代码：

```
 if (command == KeyEvent.VK_RIGHT){
                x_pos += 5;
                right = true;
            }
            if (command == KeyEvent.VK_LEFT) {
                x_pos -= 5;
                right = false;
            }
            if (command == KeyEvent.VK_UP) {    
                if (!(timer.isRunning()))
                    dy = -20;   
                timer.start();
            }   
            dr.repaint(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T01:35:22.313

下面是我将如何实现输入逻辑。请注意，当您想进一步研究输入处理时，有多种选择。使用这种实现，键盘输入与它们对游戏世界的影响分离，这在几个方面都很方便。例如，无论按键/重复的频率如何，角色的速度都是恒定的（假设游戏循环/移动的时间处理正确）。

无论如何，一些伪代码：

```
// Global:
array keysdown;
keysdown[left] = false;
keysdown[right] = false;
keysdown[up] = false;

// The all-important game loop:
while (true) {
    pollInputs();
    doMovement();
    draw();
}

function pollInputs () {
    foreach (key that you want to handle) {
        if (key.state == down) {
            keysdown[key] = true;
        } else {
            keysdown[key] = false;
        }
    }
}

function doMovement () {
    if (keysdown[left]) {
        // move character left
    } else if (keysdown[right]) {
        // move character right
    }

    if (keysdown[up]) {
        // initiate jump
    }
} 
```

# java - 需要在android中实现一个网格

> ID：10526051
> 
> 赞同：1
> 
> 时间：2012-05-10T00:34:37.950
> 
> 标签：java, android

我需要实现一个网格来显示一些物理对象的位置。我想与对象交互：我希望能够发送命令或请求它们的“健康”状态（对象恰好是传感器节点）。

网格的大小由用户给出，但始终为正方形 ( `width=length=a`)。

任何想法将不胜感激。

创建自定义视图可能是一种选择。如果是这样，请分享您对此的看法。

我正在谈论的网格应该像这样 [http://1.bp.blogspot.com/_NWSHay-_Gtk/R8hsDLaG9XI/AAAAAAAAAKU/DO6Ltp8v7zY/s1600-h/grid.gif](http://1.bp.blogspot.com/_NWSHay-_Gtk/R8hsDLaG9XI/AAAAAAAAAKU/DO6Ltp8v7zY/s1600-h/grid.gif) 我的对象应该位于网格的节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:06:18.763

你试过[http://developer.android.com/reference/android/widget/GridLayout.html](http://developer.android.com/reference/android/widget/GridLayout.html)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:17:40.993

我想你正在寻找一个[**`GridView`**](http://developer.android.com/reference/android/widget/GridView.html).

[**`GridLayout`**](http://developer.android.com/reference/android/widget/GridLayout.html)也可能工作......但它仅受 API 14 及更高版本支持。

# json - 为 cubism.js 使用其他数据源

> ID：10526058
> 
> 赞同：19
> 
> 时间：2012-05-10T00:35:44.917
> 
> 标签：json, d3.js, cubism.js

我喜欢立体主义的用户体验，并希望在我们拥有的后端之上使用它。

我已经阅读了 API 文档和一些代码，其中大部分似乎都被提取了。我怎样才能开始准确地使用其他数据源？

我有大约 6k 台机器的数据存储，大约 100 个左右的统计数据具有 5 分钟的精度。

我想用该机器的特定标识符查询一些 Web 应用程序，然后通过查询特定的 mongo 数据存储来呈现类似于立体主义的仪表板。

编写 webapp 或查询 mongo 不是问题。

这个问题更符合立体主义似乎需要查询您为每个单独的数据点使用的任何数据存储的事实（例如，您在一周的窗口中拥有 100 个统计数据……昂贵）。

有没有另一种方法可以利用这个工具来查看使用类似于下面代码的东西加载的数据？

```
var data = [];
d3.json("/initial", function(json) { data.concat(json); });
d3.json("/update", function(json) { data.push(json); }); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T01:03:12.140

Cubism 会为您处理初始化和更新：初始请求是完整的可见窗口（开始到停止，通常为 1,440 个数据点），而后续请求仅针对一些最近的指标（7 个数据点）。

查看[context.metric](https://github.com/square/cubism/wiki/Context#wiki-metric)以了解如何实现新的数据源。最简单的可能实现是这样的：

```
var foo = context.metric(function(start, stop, step, callback) {
  d3.json("/data", function(data) {
    if (!data) return callback(new Error("unable to load data"));
    callback(null, data);
  });
}); 
```

您可以扩展它以根据需要更改“/data” URL，传入开始、停止和步进时间，以及您想用来识别指标的任何其他内容。例如，Cube 和 Graphite 都使用度量表达式作为附加查询参数。

# c# - Silverlight 中的 httpwebresponse 和编码

> ID：10526059
> 
> 赞同：0
> 
> 时间：2012-05-10T00:35:58.590
> 
> 标签：c#, silverlight

如何进入`httpWebresponse`银光？没有方法`getResponse`，所以这段代码不起作用

```
HttpWebResponse resp = (HttpWebResponse)req.GetResponse(); 
```

以及如何改变这一点

```
...new StreamReader(resp.GetResponseStream(), Encoding.GetEncoding(1251))) 
```

我在 1251 上遇到错误。编码的名称是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:39:57.283

对于第一个：您需要使用异步版本，因为 SL 中没有同步网络调用。

```
public void Button_Click(object sender, EventArgs e)
{
    HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create(url);
    req.Method = "GET";
    req.BeginGetResponse(HWRCallback, req);
}

void HWRCallback(IAsyncResult ar)
{
    HttpWebRequest req = (HttpWebRequest)ar.AsyncState;
    HttpWebResponse resp = (HttpWebResponse)req.EndGetResponse(ar);
    // use response
} 
```

对于第二个（顺便说一下，下次考虑问两个问题），Silverlight 可能不支持该编码。遍历结果`Encoding.GetEncodings()`以查看该平台中可用的所有编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T00:56:50.370

考虑使用[WebClient 类](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.95%29.aspx)，特别是[DownloadStringAsync 方法](http://msdn.microsoft.com/en-us/library/ms144202%28v=vs.95%29.aspx)：

```
var client = new WebClient();

client.DownloadStringCompleted += (sender, e) =>
{
    string result = e.Result;
};

client.DownloadStringAsync(uri); 
```

它使得将 HTTP 请求作为异步操作执行比 HttpWebRequest 更简单。（在 Silverlight 中，HTTP 请求必须是异步的。）它以字符串的形式方便地提供结果，处理可能出现的所有编码问题。（服务器通常会告诉客户端使用哪种编码。）

# android - WebView#setBackgroundResource在什么阶段生效？

> ID：10526060
> 
> 赞同：1
> 
> 时间：2012-05-10T00:35:59.737
> 
> 标签：android, webview, android-webview, android-resources

我正在尝试在 WebView 实例的初始化时做一些非常简单的事情，例如将纯背景颜色替换为图像（可绘制），直到完成一些冗长的操作（然后加载网页，当然）。我正在尝试通过以下方式完成此操作：

```
myWebView.setBackgroundResource(R.drawable.myImage); 
```

Android 不会抱怨任何事情**，但不会显示图像**。

如果我将上述内容替换为：

```
myWebView.setBackgroundColor(Color.parseColor("#123456")); 
```

背景颜色生效没有任何问题。

我错过了什么？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:42:09.700

哇！那很快（回答我自己的问题）：

```
myWebView.setBackgroundColor(0);
myWebView.setBackgroundResource(R.drawable.myImage); 
```

这就是我必须做的。有用！

# javascript - Javascript - 在变量声明中使用花括号将多个变量分配给对象属性

> ID：10526065
> 
> 赞同：11
> 
> 时间：2012-05-10T00:36:38.350
> 
> 标签：javascript, firefox, syntax, variable-assignment, mozilla

在查看 Mozilla (Firefox) 附加 SDK 的一些 Javascript 代码时，我看到了一种我以前从未见过的变量声明：

```
var { foo, bar } = someFunction("whatever");  // just an example 
```

看到变量名周围的花括号了吗？事实证明，这是一种将对象的属性值一次性分配给多个变量的方法。它似乎类似于[解构赋值](https://developer.mozilla.org/en/New_in_javascript_1.7#Destructuring_assignment_%28Merge_into_own_page.2Fsection%29)或 PHP 的[`list`](http://www.php.net/manual/en/function.list.php)，除了使用对象属性而不是数组。

我实际上是通过一些摆弄发现了这一点，因为似乎没有关于它的文档。看看这段代码：

```
function gimmeAnObject() {
    return {
        foo: "hey",
        bar: "sup"
    };
}

console.log(gimmeAnObject()); // Object { foo="hey", bar="sup" }

var { foo, bar } = gimmeAnObject();

console.log(foo); // hey
console.log(bar); // sup 
```

我还发现这只适用于 Firefox。Chrome 会改为抛出错误：“ *Uncaught SyntaxError: Unexpected token {* ”。这就解释了为什么我在开始查看 Firefox 附加代码之前没有看到它。

有没有其他人见过这种变量声明？为什么我找不到任何关于它的文档？由于它只适用于 Firefox，我认为它可能是 Mozilla 的东西，但我什至在 MDN 上找不到任何关于它的信息。再说一次，也许我只是不知道要搜索什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T01:03:34.733

查看“解构赋值”链接（即[http://en.wikipedia.org/wiki/JavaScript_syntax#Assignment](http://en.wikipedia.org/wiki/JavaScript_syntax#Assignment)和[http://dailyjs.com/2011/09/12/destructuring/](http://dailyjs.com/2011/09/12/destructuring/)）看起来这个构造*是*解构赋值.

维基百科：

> 在 Mozilla 的 JavaScript 中，从 1.7 版开始，解构赋值允许一次将部分数据结构赋值给多个变量。赋值的左侧是一个模式，类似于任意嵌套的对象/数组字面量，在其叶子处包含左左值，这些左值将接收分配值的子结构。

在 JavaScript 中，数组和对象或多或少是相同的，因此对象也支持数组支持的构造也就不足为奇了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:38:55.663

你不能这样做。您必须命名一个 var 并执行以下操作：

```
var myObj = (function(){
    return {
        foo: 'foo',
        bar: 'bar'
    };
})(); 
```

# php - PHP DOMDocument 如何获取元素？

> ID：10526069
> 
> 赞同：1
> 
> 时间：2012-05-10T00:37:18.897
> 
> 标签：php, html, parsing, curl, domdocument

我正在尝试阅读网站的内容，但我遇到了一个问题，我想获取图像，链接这些元素，但我想获取它们本身的元素而不是元素内容，例如我想获取它：我想获取整个元素。

我怎样才能做到这一点..

```
<?php

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, "http://www.link.com");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    $output = curl_exec($ch);

    $dom = new DOMDocument;
    @$dom->loadHTML($output);

    $items = $dom->getElementsByTagName('a');

    for($i = 0; $i < $items->length; $i++) {
        echo $items->item($i)->nodeValue . "<br />";
    }

    curl_close($ch);;
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T03:11:58.993

您似乎在要求DOMElement的*序列化 html ？*例如，您想要一个包含`<a href="http://example.org">link text</a>`? （请让你的问题更清楚。）

```
$url = 'http://example.com';
$dom = new DOMDocument();
$dom->loadHTMLFile($url);

$anchors = $dom->getElementsByTagName('a');

foreach ($anchors as $a) {
    // Best solution, but only works with PHP >= 5.3.6
    $htmlstring = $dom->saveHTML($a);

    // Otherwise you need to serialize to XML and then fix the self-closing elements
    $htmlstring = saveHTMLFragment($a);
    echo $htmlstring, "\n";
}

function saveHTMLFragment(DOMElement $e) {
    $selfclosingelements = array('></area>', '></base>', '></basefont>',
        '></br>', '></col>', '></frame>', '></hr>', '></img>', '></input>',
        '></isindex>', '></link>', '></meta>', '></param>', '></source>',
    );
    // This is not 100% reliable because it may output namespace declarations.
    // But otherwise it is extra-paranoid to work down to at least PHP 5.1
    $html = $e->ownerDocument->saveXML($e, LIBXML_NOEMPTYTAG);
    // in case any empty elements are expanded, collapse them again:
    $html = str_ireplace($selfclosingelements, '>', $html);
    return $html;
} 
```

但是，请注意，您所做的事情很危险，因为它可能会混合编码。最好将您的输出作为另一个 DOMDocument 并用于`importNode()`复制您想要的节点。或者，使用 XSL 样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:40:37.667

我假设您只是复制粘贴了一些示例代码，并没有费心去了解它的实际工作原理......

无论如何，该`->nodeValue`部分获取元素并返回文本内容（因为该元素有一个文本节点子节点 - 如果它还有其他内容，我不知道`nodeValue`会给出什么）。

所以，只需删除`->nodeValue`你的元素。

# wpf - 如何在 XAML 模板中的 MouseOver 触发器上增加颜色值？

> ID：10526071
> 
> 赞同：0
> 
> 时间：2012-05-10T00:37:32.353
> 
> 标签：wpf, xaml

大家好，

我正在创建一个按钮模板以在我的 WPF 应用程序中使用。格式基本上是彩色图​​块（大多数情况下认为是 Windows Phone 风格。）。

如果我想在鼠标悬停的情况下更改按钮的颜色，我只需编写如下代码（假设原始按钮颜色为灰色）：

```
<Window.Resources>
    <Style x:Key="ColorTileButton" TargetType="Button>

<!-- Insert various property editing here. -->

        <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="LightGray" />
            </Trigger>
            <Trigger Property="IsMouseOver" Value="False>
                <Setter Property="Background" Value="Gray" />
            </Trigger>
        </ControlTemplate.Triggers>
    </Style>
</Window.Resources> 
```

但显然，如果原始按钮颜色是 Firebrick，这将不起作用，因为我最终会得到一堆标准的灰色按钮。所以我想知道是否有办法重写这个按钮模板，这样它只会将 R、G 和 B 的值增加大约 10 以使按钮颜色变浅，然后在鼠标离开时减少。帮帮我？

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:03:44.247

我相信你所描述的是[ColorAnimation](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.coloranimation.aspx)的一个[例子](http://msdn.microsoft.com/en-us/library/ms753266.aspx)，或者你可以看看这个[论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/2d7cccd7-ffeb-4fb3-81e3-fe311ae8ef7c/)。论坛帖子中的一个有趣的注释。

> 触发器在满足其条件时对一个或多个属性进行更改，然后在不再满足其条件时重置属性值。

所以他的建议是：

```
<ControlTemplate.Triggers> 
    <Trigger Property="IsMouseOver" Value="True"> 
        <Setter Property="Background" Value="LightGray" /> 
    </Trigger> 
</ControlTemplate.Triggers> 
```

正如您在示例中给出的那样，它将重置为 FireBrick

# python - Eclipse 中的 Python os.system()

> ID：10526072
> 
> 赞同：3
> 
> 时间：2012-05-10T00:37:32.700
> 
> 标签：python, eclipse, pydev

我正在使用 Python 调用某人的程序：

```
print cmd
os.system(cmd) 
```

以下是`print`命令的输出，它显示带有一些参数的`cmd`调用，然后将输出重定向到.`sclite``dump`

```
C:/travel/sctk-2.4.0/bin/sclite -r C:/travel/tempRef.txt -h C:/travel/tempTrans.txt -i spu_id > C:/travel/dump 
```

当我在 cygwin 中运行命令时，`dump`包含所需的输出。当我在 cygwin 中打开 Python 并在那里使用`os.system(cmd)`时，`dump`包含所需的输出。如果我从 cygwin 运行我的 Python 脚本，`dump`则包含所需的输出。当我在 Eclipse 中运行我的 Python 脚本时，`dump`它什么都不包含，即文件已创建但没有写入任何内容。

我已经尝试了相同`subprocess(cmd,shell=True)`的结果：在 Eclipse 中运行脚本会导致一个空文件，而其他文件工作正常。我猜 Eclipse/Pydev 有问题，但我不确定是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:33:43.783

解决此问题的一种方法是使用 Popen --

```
from subprocess import Popen
cmd="C:/travel/sctk-2.4.0/bin/sclite -r C:/travel/tempRef.txt -h C:/travel/tempTrans.txt -i spu_id"
f=open('C:/travel/dump','w')
p=Popen(cmd.split(),stdout=f) 
```

但这仍然不能解释你在 Eclipse 中的奇怪行为......

# mysql - Mysql 错误 - 无法连接：无效设置。

> ID：10526079
> 
> 赞同：0
> 
> 时间：2012-05-10T00:38:20.227
> 
> 标签：mysql, database, xampp, wamp

我正在处理 mysql 中的一些表，但不知从何而来，我得到了一个错误（无法无错误地启动会话，请检查您的 PHP 和/或网络服务器日志文件中给出的错误并正确配置您的 PHP 安装。）然后我卸载了xampp 并尝试重新安装它。然后我得到错误（phpMyAdmin试图连接到MySQL服务器，服务器拒绝连接。您应该检查配置中的主机，用户名和密码，并确保它们与MySQL管理员提供的信息相对应服务器。）

我怎样才能再次访问？

# java - 使用经典排列加密

> ID：10526086
> 
> 赞同：1
> 
> 时间：2012-05-10T00:39:30.767
> 
> 标签：java, encryption, permutation

```
public class Encryption {
private static final int[] encrypt = {2, 9, 3, 4, 6, 8, 1, 0};
private static final int[] decrypt = new int[8];
private static final int minLength = 10;

String encrypt (String password)    {
    if(password.length()<minLength) {
        return password;
    }   else {
        char[] encrypt = password.toCharArray();

        for (int i = 0; i < encrypt.length; i++)    {
            encrypt[i] = (char) (encrypt[i]);
        }
        return String.valueOf(encrypt);
    }
}

String decrypt (String password)    {
    if (password.length()<minLength)    {
        return password;
    }   else {
        char[] decrypt = password.toCharArray();
        for (int i = 0; i < decrypt.length; i++) {
            decrypt[i] = (char) (decrypt[i]);
        }
        return String.valueOf(decrypt);
    }
}

boolean isValidLength (String password) {
    if (password.length()<minLength)    {
        return true;

    }   else    {
        return false;
    }
}

int getMinLength(){
    return minLength;
    }
 } 
```

假设要加密我的密码（尚未制作驱动程序），但不确定我是否正确使用了我的变量（加密和解密）。Encrypt 和 Decrypt 变量使密码将索引更改为用户输入的任何内容，并且也不知道，但我假设在某处使用逆转换方法，但不确定在哪里？有什么帮助吗？需要有人告诉我我的程序是否已经结束或接近。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:59:55.043

警告 - 这是一个*很好的警告*- 是因为[*阴影*](http://en.wikipedia.org/wiki/Variable_shadowing)

该行：

```
char[] encrypt = password.toCharArray(); 
```

导致[静态]*成员变量*[也被调用]`encrypt`在该方法中被隐藏。因此**，从未使用过“排列值”，并且使用的算法将严重破坏**。（它会非常糟糕，因为“排列值”在加密和解密时并不相同。解密算法还有另一个问题，因为它甚至不使用[相同的]“排列值”，但这是另一回事.)

解决方案：

1.  使用更好/不同`encryptionKey`的名称（例如排列）。
2.  显式用于`Encryption.encrypt`引用 [static]*成员变量*。

当然，还要查看算法。不需要`Encryption.decrypt`并将其保留在那里将允许引入其他错误。

快乐编码。

# javascript - 拖动时如何获取光标位置？

> ID：10526089
> 
> 赞同：0
> 
> 时间：2012-05-10T00:39:38.540
> 
> 标签：javascript, html, google-maps

我正在使用谷歌地图 v3。我是java脚本的新手。有谁知道如何在拖动时（拖动之前和之后）在网络浏览器上获取光标的位置？请教我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:51:17.237

我最好的选择是跟踪地图中心点（纬度，经度）的移动。拖动事件似乎没有在地图上提供鼠标位置。

在这里查看：http: [//jsfiddle.net/Hfu8D/](http://jsfiddle.net/Hfu8D/)

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html, body, #map_canvas { margin: 0; padding: 0; height: 100% }
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
      var map;
      var mapOptions = { center: new google.maps.LatLng(0.0, 0.0), zoom: 2,
        mapTypeId: google.maps.MapTypeId.ROADMAP };

      function initialize() {
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        google.maps.event.addListener(map, 'dragstart', function(event) {
          document.getElementById("start").value = map.getCenter();
        });

        google.maps.event.addListener(map, 'dragend', function(event) {
          document.getElementById("end").value = map.getCenter();
        });

      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    start: <input id="start" size="30"><br>
    end: <input id="end" size="30">
    <div id="map_canvas"></div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T21:16:05.123

您可以对地图使用[mousemove](http://goo.gl/YFqMu)事件并添加一个事件侦听器，该事件侦听器会在光标移动时实时更新文本框（或任何其他元素）。

这是一个示例（来自 Mia 的 JS Fiddle）：

[http://jsfiddle.net/76VLh/3/](http://jsfiddle.net/76VLh/3/)

# flash - 在 Chrome 扩展程序的弹出或上下文菜单中单击时，如何实际显示一个对话框？

> ID：10526097
> 
> 赞同：0
> 
> 时间：2012-05-10T00:40:38.843
> 
> 标签：flash, google-chrome-extension

以前有人问[过](https://stackoverflow.com/questions/1992200/display-dialog-from-chrome-extension)这个问题，但即使在实施该解决方案之后，问题仍然存在。

具体来说，我遇到了对话框有时隐藏在 Flash 视频后面的问题。从阅读对[其他问题](https://stackoverflow.com/questions/tagged/wmode)的回复来看，这似乎是基于嵌入式 Flash 的 wmode 设置为透明（可能还有其他非透明值）。由于这是一个 Chrome 扩展，我可以让它在加载之前自动更改该属性，但我担心“透明”是某些网站的正确行为。

目前，我倾向于在一个之后自动关闭的全新选项卡中显示我的对话框，尽管它在工作流程中可能太尴尬了。

我还需要看看其他扩展如何处理对话框，看看他们是否能够解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T08:24:53.823

似乎可以通过将 iFrame 放置在与对话框相同的位置但 zindex 低于对话框以便可以看到对话框来解决此问题。

# android - 带有 appengine Google 用户帐户的 Android 同步适配器

> ID：10526098
> 
> 赞同：7
> 
> 时间：2012-05-10T00:41:04.927
> 
> 标签：android, google-app-engine, android-syncadapter

我正在为我的应用程序实现一个同步适配器，以与 appengine 后端同步。在 appengine 上，我使用内置的 User api 进行身份验证。有一个帖子在[这里](https://stackoverflow.com/questions/2943252/android-syncadapter-using-a-google-account)告诉如何做到这一点，但是该应用程序列在 gmail 帐户下。理想情况下，我的应用程序会列在帐户中。我不想向用户询问用户名和密码，只需使用现有的 google 帐户进行身份验证。以前有人做过吗？？

更新：我一直在研究这个，看起来我可以实现 AuthenticationService 并存储用户帐户名并将密码保留为空字符串。在 getAuthToken() 方法中，我应该能够简单地返回谷歌身份验证令牌。一旦我进一步相处就会发布......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T13:11:57.637

或许你对安卓账号系统有误解。当您转到 Settings -> Accounts & Sync 并添加一个新帐户时，您会看到一个帐户*类型*列表。帐户类型和应用程序之间通常存在关系，例如 Facebook 帐户与 Facebook 一起使用。通常，如果您有不同的后端系统来处理身份验证等，您会添加一个新的帐户类型。

如果我理解正确，您使用 Google 帐户但希望它显示为您自己的帐户类型。这对我来说听起来不对。您最终会重新实现 Google 帐户处理，但价值不大。我相信，如果您只是简单地利用 Google 为您提供的内容，对用户来说会更简单。单击帐户时可以看到您的应用程序/服务/内容提供商。例如，在[通过“团队任务”安装“任务”](https://play.google.com/store/apps/details?id=ch.teamtasks.tasks&hl=en)（免责声明：我不隶属于该公司）后，他们将“同步任务”添加到数据和同步选项列表中。

但如果您真的想创建自己的帐户类型，请遵循[示例同步适配器](http://developer.android.com/resources/samples/SampleSyncAdapter/index.html)示例。查找[Authenticator](http://developer.android.com/resources/samples/SampleSyncAdapter/src/com/example/android/samplesync/authenticator/index.html)代码和相关资源（例如，清单、活动布局等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T17:22:20.243

这确实是可能的，我已经成功地实现了这一点，但要注意这有点让人头疼。

有一个很棒的教程，叫做[writing-an-android-sync-provider-part-1](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1/)

[...不要忘记检查第2 部分](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-2/)中的后续内容

除此之外，Android SDK 示例中还有一个名为[SampleSyncAdapter](http://developer.android.com/resources/samples/SampleSyncAdapter/index.html)的示例，它在我的开发中非常有用。

通过一点努力和大量咖啡，您应该能够完成这项工作；）

# mysql - sql 数据库 - 将字段重置为自动递增

> ID：10526109
> 
> 赞同：1
> 
> 时间：2012-05-10T00:42:21.387
> 
> 标签：mysql, sql, phpmyadmin

我从数据库中删除了数据库中 no 列中值为 1 的所有行（每行在 yes 中具有 1，在 no 中具有 0，或者在 yes 中具有 0，在 no 中具有 1）。但是，现在我想重做 id 列以反映此更改。

例如，我希望第一行（DEYRO 的名称）的 id 为 1，ELEHC 的 id 为 2，AEHSN 的 id 为 3，依此类推，直到数据库结束（大约 100行，但我不确定）

这是数据库外观的图像：

![mysql数据库截图](../Images/1522aaa25248ed6a137924160b860ddc.png)

任何帮助将不胜感激，无论是通过 phpmyadmin 还是通过 SQL 查询或类似的东西。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:21:47.383

您可能想要截断表并运行脚本来单独添加记录，因为 id 字段是自动增量的。

希望这可以帮助。

Rhian A. 10-05-2012 NZT

# django - 如何最好地初始化不能作为固定装置的一次性 Django 对象？

> ID：10526114
> 
> 赞同：2
> 
> 时间：2012-05-10T00:43:37.893
> 
> 标签：django, django-models, django-south, django-fixtures

我正在用 Django 编写一个应用程序，它有一些我需要实例化的站点范围的固定对象，由于某种原因，它们不能是固定装置。

例如，某些（例如`Permission`s）我不能硬编码 PK，因为我不能确定它们是否会按特定顺序加载（如果我使用 pk=null，那么如果它们已经存在，我会得到一个 IntegrityError .)

其他（例如`Site`s）取决于 中的值`settings.py`。 **编辑：**这些需要在每次部署项目时运行，否则我可以按照下面 super9 的建议使用 South 的数据迁移。

由于这些是 Django 模型，因此它们与我项目中的任何应用程序都没有直接关系。加载它们最有意义，`settings.py`但这会导致循环导入。它可以正常工作，`urls.py`但是将加载代码放在那里似乎很笨拙且不合时宜。

我研究了将接收器挂钩`post_syncdb`如下：

```
@receiver(post_syncdb)
def create_groups_and_permissions(sender, **kwargs):
    print "Creating groups and permissions"
    u_ct = ContentType.objects.get(model="user")
    Group.objects.get_or_create(name='Group 1')
    Permission.objects.get_or_create(name="Perm 1", codename="perm_1", content_type=u_ct) 
```

但是，由于我使用的是 South，因此根据[文档](http://south.aeracode.org/docs/commands.html#initial-data-and-post-syncdb)，它仅`post_syncdb`在首次创建表时发送。`syncdb`每次迁移后我都可以手动调用，但不希望这样做。

我几乎决定将它们放入`urls.py`或最密切相关的应用程序中`models.py`，但我想我会在这里检查一下是否有一种可接受的方式来加载无法作为固定装置加载的固定对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:08:37.407

你检查过南方的数据迁移了吗？[http://south.aeracode.org/docs/tutorial/part3.html](http://south.aeracode.org/docs/tutorial/part3.html)

听起来这可能是你需要的。

# c# - BUG：无法在 DatePicker 上选择不属于浮动 VSTO 加载项的日期

> ID：10526118
> 
> 赞同：10
> 
> 时间：2012-05-10T00:45:10.480
> 
> 标签：c#, .net, excel, vsto, datetimepicker

我在这里记录了 Microsoft 的问题 - Repro 可供下载：[https ://connect.microsoft.com/VisualStudio/feedback/details/741454/value-change-event-doesnt-fire-for-datetimepicker-controls-used -in-vsto-add-ins](https://connect.microsoft.com/VisualStudio/feedback/details/741454/value-change-event-doesnt-fire-for-datetimepicker-controls-used-in-vsto-add-ins)

如果您将 DateTimePicker 放在 Excel VSTO 浮动加载项中并定位它，以便当日历下降时，它位于加载项的边缘之外，请参见此处：

![在此处输入图像描述](../Images/dc4ec6996739181cc8ab7a3f4ba73bf6.png)

选择绿色圈出的任何日期都可以按预期工作，但是当单击红色圈出的任何日期时，它只会关闭日历下拉菜单并且不会设置日期！

有谁知道我该如何解决这个问题？

## 编辑

此 SO 用户在使用 WPF 时遇到了问题： [VSTO WPF ContextMenu.MenuItem Click outside a TaskPane not raise](https://stackoverflow.com/questions/8449745/vsto-wpf-contextmenu-menuitem-click-outside-a-taskpane-not-raised)

![在此处输入图像描述](../Images/5443430375b651a74a50319b31cb54be.png)

该问题的答案显示该问题被报告为连接一段时间，但仍然没有解决 VSTO 4.0 SP1 的问题：[https ://connect.microsoft.com/VisualStudio/feedback/details/432998/excel-2007-vsto-custom-任务窗格与 wpf-context-menu-has-focus-problems](https://connect.microsoft.com/VisualStudio/feedback/details/432998/excel-2007-vsto-custom-task-pane-with-wpf-context-menu-has-focus-problems)

一种解决方法是使用 DispatcherFrame 来泵送消息并为菜单订阅 GotFocusEvent 和 LostFocusEvent。[http://blogs.msdn.com/b/vsod/archive/2009/12/16/excel-2007-wpf-events-are-not-fired-for-items-that-overlap-excel-ui-for- wpf-context-menus.aspx](http://blogs.msdn.com/b/vsod/archive/2009/12/16/excel-2007-wpf-events-are-not-fired-for-items-that-overlap-excel-ui-for-wpf-context-menus.aspx)但这是菜单的所有 WPF 代码，不是 Winform DateTimePicker 的解决方案。

**Microsoft Connect 的复制：**

新建项目 > Excel 2010 加载项

```
using TaskPane;
using Microsoft.Office.Core;

namespace ExcelAddIn2
{
public partial class ThisAddIn
{
    TaskPaneView MyTaskView = null;
    Microsoft.Office.Tools.CustomTaskPane MyTaskPane = null;

private void ThisAddIn_Startup(object sender, System.EventArgs e)
{
    //setup custom taskpane
    MyTaskView = new TaskPaneView();
    MyTaskView.currentInstance = Globals.ThisAddIn.Application;
    MyTaskPane = this.CustomTaskPanes.Add(MyTaskView, "MyTaskView");
    MyTaskPane.DockPosition = Microsoft.Office.Core.MsoCTPDockPosition.msoCTPDockPositionFloating;
    MyTaskPane.DockPositionRestrict = MsoCTPDockPositionRestrict.msoCTPDockPositionRestrictNoChange;
    MyTaskPane.Visible = true;
}
} 
```

文件菜单 > 添加 > 新项目 > 类库 > 命名的 TaskPane

然后在 TaskPane 项目中创建一个名为 TaskPaneView 的用户控件

```
public partial class TaskPaneView : UserControl
{
    public TaskPaneView()
    {
        InitializeComponent();
    }

    public Microsoft.Office.Interop.Excel.Application currentInstance { get; set; }

    public TaskPaneCtrl getTaskPaneCtrl
    {
        get { return this.taskPaneCtrl1; }
    }  

} 
```

接下来使用 DateTimePicker 创建一个用户控件，确保日历控件位于用户控件的右下角

```
public partial class TaskPaneCtrl : UserControl
{
public TaskPaneCtrl()
{
    InitializeComponent();
}
} 
```

在 TaskPane 类库中引用 Excel 互操作（例如 c:\Program Files x86\Microsoft Visual Studio 14.0\Visual Studio Tools for Office\PIA\Office14\Microsoft.Office.Interop.Excel.dll）。

构建解决方案。注释掉不起作用的部分。构建解决方案。

现在将 TaskPaneCtrl 拖放到 TaskPaneView 上并取消注释无法编译的内容。

[![在此处输入图像描述](../Images/58089a6a2c8b19339ff3c54de88b21ac.png)](https://i.stack.imgur.com/oL7iP.png)

F5 并单击日历控件，现在尝试选择任务窗格区域之外的日期。**没有值更改事件触发，它的行为就像在日历外单击！**

注意：我尝试了一个脱离控件的下拉列表，但它的事件确实发生了！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T13:34:21.190

“浮动”是这里问题的关键。依赖 Excel 中的消息泵来发送 Windows 消息，这些消息使这些控件响应输入，这从来都不是问题（偶尔会造成奇怪的事情）。这在 WPF 中和 Winforms 一样出错，它们有自己的调度循环，可以在消息传递到窗口之前过滤消息。不使用各自的调度程序时出现问题的关键事情是制表符和快捷键。

然后一些，这种问题将由 Excel 在发送消息之前进行自己的过滤引起。我猜是反恶意软件功能，微软永远担心程序会干扰 Office 应用程序。

Winforms 解决方案与 WPF 解决方法相同，您需要自己泵送消息循环。这需要一些手术，DateTimePicker 不会合作，因为它不允许取消其 DropDown 事件，并且它在日历已经显示*后被引发。*解决方法是愚蠢但有效的，在表单中添加一个按钮，看起来就像 DTP 上的下拉箭头，并使其与箭头重叠，以便单击它而不是箭头。

一些让按钮与下拉箭头重叠的示例代码：

```
 public Form1() {
        InitializeComponent();
        var btn = new Button();
        btn.BackgroundImage = Properties.Resources.DropdownArrow;
        btn.FlatStyle = FlatStyle.Flat;
        btn.BackColor = Color.FromKnownColor(KnownColor.Window);
        btn.Parent = dateTimePicker1;
        btn.Dock = DockStyle.Right;
        btn.Click += showMonthCalendar;
        dateTimePicker1.Resize += delegate {
            btn.Width = btn.Height = dateTimePicker1.ClientSize.Height;
        };
    } 
```

Click 事件处理程序需要显示一个包含 MonthCalendar 的对话框：

```
 private void showMonthCalendar(object sender, EventArgs e) {
        dateTimePicker1.Focus();
        using (var dlg = new CalendarForm()) {
            dlg.DateSelected += new DateRangeEventHandler((s, ea) => dateTimePicker1.Value = ea.Start);
            dlg.Location = dateTimePicker1.PointToScreen(new Point(0, dateTimePicker1.Height));
            dlg.ShowDialog(this);
        }
    } 
```

使用 CalendarForm，您可以添加一个无边界且仅包含 MonthCalendar 的表单：

```
public partial class CalendarForm : Form {
    public event DateRangeEventHandler DateSelected;

    public CalendarForm() {
        InitializeComponent();
        this.StartPosition = FormStartPosition.Manual;
        monthCalendar1.Resize += delegate {
            this.ClientSize = monthCalendar1.Size;
        };
        monthCalendar1.DateSelected += monthCalendar1_DateSelected;
    }

    void monthCalendar1_DateSelected(object sender, DateRangeEventArgs e) {
        if (DateSelected != null) DateSelected(this, e);
        this.DialogResult = DialogResult.OK;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T05:54:12.733

推测：
该错误的发生是因为 datetimepicker 的表面直到单击消息发送后才呈现。

回答的后续步骤：
如果可用，请尝试使用一些第 3 方日期时间选择器控件进行测试。我意识到这不是一个完整的答案，因为我还不知道它是否会解决您的问题。

其他可能的答案：调整任务窗格的大小以适应控件。这将解决错误，但从用户的角度来看有点奇怪。

# javascript - jQuery在悬停时改变背景

> ID：10526121
> 
> 赞同：1
> 
> 时间：2012-05-10T00:46:00.587
> 
> 标签：javascript, jquery, html, css

我有这个代码

# html

```
<div id="addQuesion">
    <ul id="aQul">
        <li class="aQli"></li>
        <li class="aQli"></li>
    </ul>
</div> 
```

我的 jQuery 是

# jQuery

```
$(document).ready(function(){
    $(".aQli").mouseover(function(){

    });
    $(".aQli").mouseout(function(){

    });
}); 
```

我希望当悬停在一个 li 上时，背景应该是红色的，从那个 li 退出时，背景应该返回到白色。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T00:53:29.917

你必须使用jQuery吗？

更“正确”的方法是为您的班级添加悬停样式。

```
.aQli:hover{
   background-color: red;   
}​ 
```

有关示例，请参见此处。 [http://jsfiddle.net/maurice_butler/5q6QM/](http://jsfiddle.net/maurice_butler/5q6QM/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T00:49:25.983

您可以将其简化为使用 .hover()：

```
$(document).ready(function(){
    $(".aQli").hover(function(){
        $(this).css("background", "#F00");
    },
    function(){
        $(this).css("background", "#FFF");
    });
}); 
```

第一个函数为 mouseover 运行，第二个函数为 mouseout 运行。.css() 函数设置 CSS 属性，在本例中为悬停元素的背景颜色。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-10T00:49:36.733

```
$(function(){
    $(".aQli").on('mouseover', 'li', function(){  //using "on" for optimization
        this.style.backgroundColor = 'red';       //native JS application
    }).on('mouseout', 'li', function(){           //chain to avoid second selector call
        this.style.backgroundColor = 'white';     //native JS application
    })
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T03:43:37.630

我想出了两种使用 jQuery 的方法。一种方法是使用 jQuery 直接更改 css，使用 .css() 设置背景颜色。

```
//css
ul#aQul li{
  display : inline-block;
  padding : 5px;
  margin : 5px;
}

//javascript use jQuery
$(document).ready(function(){
 $(".aQli").mouseover(function(){
    $(this).css({
        "background-color" :　"red",
        "cursor" : "pointer"
    });
 });
 $(".aQli").mouseout(function(){
    $(this).css({
        "background-color" : "transparent",
        "cursor" : "default"
    });

 });
});​​ 
```

另一种方法是使用 jQuery 在发生悬停时添加特定的类属性，并且有特定的 css 规则来更改背景颜色。

```
//css, need to specify the state of hover
 ul#aQul li.hover{     //li elements which have "hover" class
   cursor:pointer;
   background-color : red;
 }

//javascript
$(document).ready(function(){
 $(".aQli").mouseover(function(){
    $(this).addClass("hover")      //hover, add class "hover"
 });
 $(".aQli").mouseout(function(){
    $(this).removeClass("hover");  //hover out, remove class "hover"

 });
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-28T19:44:47.003

```
$(document).ready(function(){
    $(".box").hover(function(){
        $(this).css("background-image", "url(ENETR URL HERE)");
    },
    function(){
        $(this).css("background", "#FFF");
    });
});
```

```
.box{
  width:200px;
  height:200px;
  border: 1px solid black;
}
```

```
<html>

<head>

  <link rel="stylesheet" href="css/style.css">

</head>
<body>

  <div class="box">

  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="js/script.js"></script>

</body>
</html>
```

# php - 如何使用 PHP 和 jQuery 实时加载记录？

> ID：10526122
> 
> 赞同：0
> 
> 时间：2012-05-10T00:46:14.863
> 
> 标签：php, javascript, jquery, html, ajax

我已经使用 php 创建了一个系统，我们可以从中添加状态消息，或者您可以说是一种微博。所以它有一个如下的数据库表：

```
posts_mst
------------------
post_id_pk
post_title
post_content
date_added 
```

现在，我使用 select Query 在一个页面上显示了所有这些帖子，并且它很好地在一个页面上显示了所有帖子。但是现在我扩展了页面功能并添加了一个表单来从同一页面添加这些帖子。因此该表格位于页面的最顶部，在其下方列出了所有帖子。

我正在使用 jquery .ajax() 方法存储所有帖子，因此在保存任何帖子时不会加载页面。所以现在我想做的是，当我添加任何帖子时，它应该实时在列表中添加相同的帖子，就像你在 Facebook 中看到的那样——当有人在他们的墙上发帖时，我们会看到它加载到在我们的新闻提要中找到。在这里我也想做同样的事情，因为这个页面将被使用，所以可能会向所有人显示人和帖子。

我可以这样做的一种方法是 - 每次添加新帖子时，我都可以在帖子列表中附加一个 Div 标签。我可以使用 Ajax 响应获得这个 Div 内容。但这仅适用于我添加的帖子。如果其他人添加该帖子，我将不知道这一点。

那么任何人都可以建议我如何实现这一点吗？如果有任何特定的插件用于此，请告诉我。:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:23:03.713

最简单的方法是每 X 分钟/秒使用一次 javascript `setTimeout`，并在超时函数中使用 ajax 来检查新帖子。例如，您可以通过在会话中存储最新更新的时间戳来跟踪新内容。

请注意，这是定期轮询，它不是真正实时的。

有更新的方法可以保持与服务器的永久连接，但那是另一回事了。

# linux - 关于库、pkg-config 和 opencv 的基本构建问题

> ID：10526124
> 
> 赞同：1
> 
> 时间：2012-05-10T00:46:34.110
> 
> 标签：linux, opencv, g++

我已经成功构建并安装了 opencv 库。现在我试图在我的应用程序中使用这些库，但我不断收到链接错误。我在用：

```
pkg-config --libs opencv 
```

当我在命令行上运行它时，我可以看到输出。它列出了很多库，但并非所有库都列出了指定的绝对路径。例如，这里是部分输出：

```
libippcc_l.a libippvm_l.a tbb rt pthread m dl /usr/lib/libXext.s stdc++ 
```

当我构建我的应用程序时，我会收到链接错误。这是部分输出：

```
g++: libipps_l.a: No such file or directory
g++: libippi_l.a: No such file or directory
g++: libippcv_l.a: No such file or directory
g++: libippcc_l.a: No such file or directory
g++: libippvm_l.a: No such file or directory
g++: tbb: No such file or directory
g++: rt: No such file or directory
g++: pthread: No such file or directory
g++: m: No such file or directory
g++: dl: No such file or directory
g++: stdc++: No such file or directory 
```

似乎链接器无法解析不包含似乎合理的绝对路径的库。但我的困惑是为什么 pkg-config 的输出不包含其所有库的绝对路径？当我不在构建行上使用“pkg-config --libs opencv”时，英特尔 ipp、pthread、m、stdc++ 等的库得到正确解析，并且应用程序构建良好，因为我还在链接行上指定了它们如：“-lpthread -lstdc++”...等。这些位于链接行上，在我指定之后：“pkg --libs opencv”

但是使用“pkg-config --libs opencv”会破坏分辨率。

我已经从命令行运行“ldconfig”来更新我的 libs 目录中的所有符号链接，但这并没有解决这个问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:01:14.797

如果`pkg-config --libs opencv`输出那个，那么你就有问题了。可能之前安装的 OpenCV 损坏了它，或者您使用的版本不够新，或者它没有成功编译，或者存储库中的最新版本有问题。

无论如何，我在 Mac OS X 上使用 OpenCV 2.3.1 并`pkg-config --libs opencv`输出以下信息：

```
-L/usr/local/lib -lopencv_core -lopencv_imgproc -lopencv_highgui -lopencv_ml -lopencv_video -lopencv_features2d -lopencv_calib3d -lopencv_objdetect -lopencv_contrib -lopencv_legacy -lopencv_flann 
```

您可以尝试手动编译您的应用程序，看看是否有其他问题：

```
g++ test.cpp -o test -I/usr/local/include/opencv -I/usr/local/include  -L/usr/local/lib -lopencv_core -lopencv_imgproc -lopencv_highgui -lopencv_ml -lopencv_video -lopencv_features2d -lopencv_calib3d -lopencv_objdetect -lopencv_contrib -lopencv_legacy -lopencv_flann 
```

请注意，您的安装可能已将 OpenCV 头文件和库放在不同的目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T02:28:21.620

我认为您的问题可能与我遇到的问题有关，以及此对 opencv的[拉取请求的主题。](https://github.com/Itseez/opencv/pull/1615)我的猜测是：您是在 linux 机器上从源代码安装？如果你找到你的`opencv.pc`文件（可能在 /usr/local/lib/pkgconfig/opencv.pc），你的情况是否会改变，并`-l`在有问题的词之前添加（rt pthread 等）？

注意：从源代码安装会生成一个新的（坏的）opencv.pc，它会覆盖你进行我建议的更改的那个，所以如果你经历了更多的重建安装周期，请记住再次修复 opencv.pc在尝试重建程序之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-31T22:16:55.357

这是由新的 CMake 或行为不端的 CMake 引起的 - 通常在我的实践中 :) 解决起来非常简单 - 手动编辑 opencv.pc 并在名称中添加缺少的“-l”前缀。就是这样！此修复后所有其他问题都消失了。第二个常见的问题是 PKG_CONFIG_PATH 本身 - 将它添加到你的 shell GLOBAL(!!) 配置文件脚本中，然后重新启动 shell 并通过 printenv 命令或类似的东西来验证它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-10T02:31:01.320

您可以尝试搜索“opencv.pc”来查找路径。对我来说，包裹在

```
/Applications/opencv-2.4.11/build/unix-install/ 
```

因此，对我来说，有效的命令是：

```
pkg-config --libs /Applications/opencv-2.4.11/build/unix-install/opencv.pc 
```

# c# - 如何使用 C# 中的 JET 和 OLE 检查列在 Access 中是否具有唯一/无重复约束？

> ID：10526128
> 
> 赞同：1
> 
> 时间：2012-05-10T00:46:59.783
> 
> 标签：c#, ms-access, jet

对于通过 JET OLEDB 连接使用 Access 数据库以 C# 编写的应用程序：

我正在编写一个界面，允许用户编辑包含关键字的表的值（涉及几个表，我正在尝试通用）。

这些表包含几列。有些列有“无重复”约束，有些则没有。我需要能够判断哪些列具有“无重复”约束，以便在将条目写入表之前将它们作为一个整体检查，以避免违反“无重复”约束。（我知道我可以在写作时发现错误，但我真的不想去那里。）

如何确定 Access 数据库中表中的哪些列具有唯一（无重复）约束？

谢谢

-志

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:02:07.013

您可以在唯一列中检查索引架构是否为 True。一些非常粗略的注释：

```
//http://msdn.microsoft.com/en-us/library/ms135981.aspx
    //Or Microsoft.Jet.OLEDB.4.0
OleDbConnection cn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0; "
   + "Data Source=" + pathToAccessDb);
cn.Open();

//Retrieve schema information
DataTable columns = cn.GetOleDbSchemaTable(OleDbSchemaGuid.Indexes,
             new Object[] { null, null, null, null, "Table1" });

foreach (DataRow row in columns.Rows)
{
   Console.WriteLine(row["COLUMN_NAME"].ToString());
   Console.WriteLine(row["TABLE_NAME"].ToString());
   Console.WriteLine(row["UNIQUE"].ToString());
}

cn.Close();

//Pause
Console.ReadLine(); 
```

# ruby-on-rails - 是否可以在 ruby on rails 中使用一个表单提交来更新多个数据库表？

> ID：10526129
> 
> 赞同：2
> 
> 时间：2012-05-10T00:47:27.160
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip, carrierwave, ruby-on-rails-3.2

比方说：

[ Micropost ] -> has_one -> [ MicropostPhotoAlbum ] -> has_many -> [ MicropostPhotos ]

如果 Micropost 有一张照片，它就不需要 MicropostPhotoAlbum，我只需在我的 microposts 表中添加一个“图像”列，就可以顺利地使用carrierwave。

**我下面的表格可以正常工作：**

```
 = form_for @micropost, :remote => true do |f|
        = f.file_field :image  # Needed for image previewing with html5 file api
        = f.hidden_field :user_id
        = f.text_area :content
        = f.submit "Post" 
```

我需要做的就是上传到我的 micropost 模型，然后我就可以设置好了。图片路径会直接上传到 microposts 表的图片列，例如 photo.png。

正如您在上面看到的，每个微博都没有任何照片，而是有一个包含许多照片的相册。现在我的表单将无法工作，因为将有一个 micropost_album_id 列而不是一个图像列。

如何使用我当前的表单将照片上传到照片表并在一次提交中发布我的微博内容？除了恢复到让每个微博都有一张照片之外，还有什么简单的方法可以解决这个问题吗？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:36:00.683

这看起来像是[嵌套属性](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)的工作。

[这](http://archives.ryandaigle.com/articles/2009/2/1/what-s-new-in-edge-rails-nested-attributes)是一篇关于表单中嵌套属性的（旧的，不可否认的）文章。[fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)是关键。

# html - CSS 计算出相等的高度

> ID：10526130
> 
> 赞同：0
> 
> 时间：2012-05-10T00:47:32.817
> 
> 标签：html, css, height, width

我有以下html，我对以下内容非常困惑：

*   `.rowNumber`&将`.title`在所有三个盒子中保持相同的高度
*   每列中的`.rowNumberItems`内容量不会相同

如何使用 CSS 等于列，以便我`.button div`在所有列中都相等？

我的专栏是`height:200px; by width:195px;`

**示例列：**

```
<div id="priceTable">
 <div class="rowOne">
  <p class="title">Name</p>
 <ul class="rowOneItems">
  <li>Custom Design</li>
 </ul>
   <div class="button"><a href="#">Buy Now</a></div>    
 </div> <!-- Column One --> 
</div> 
```

**当前的 CSS：**

```
#priceTable{
    width:780px;
    height:230px;
    margin:0 auto;
    overflow:hidden;
    background:gray;
}
.rowOne, .rowTwo, .rowThree{
    float:left;
    height:225px;
    width:195px;
    margin:0 40px 0 0;
    background:red;
}

#priceTable .title{
    font-weight:bold;
    text-align:center;
    color:#000;
}

#priceTable .button{
    background:green;
    background:url('../images/button.png') no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:57:07.117

小提琴：http: [//jsfiddle.net/iambriansreed/ZJhPq/](http://jsfiddle.net/iambriansreed/ZJhPq/)

添加以下 CSS：

```
.rowOne, .rowTwo, .rowThree {
    position: relative;
}

#priceTable .button {
    position: absolute;
    bottom: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:02:19.743

您能否将 .rowNumberItems 设置为特定高度并溢出：隐藏？固定 rowNumberItems 的高度后，按钮位置将相等。

```
.rowOneItems{height:200px;overflow:hidden;} 
```

例如：http: [//jsfiddle.net/3bmrZ/](http://jsfiddle.net/3bmrZ/)

# actionscript-3 - 进入第 1 帧时图像重置（flash/actionscript 3）

> ID：10526131
> 
> 赞同：0
> 
> 时间：2012-05-10T00:47:41.230
> 
> 标签：actionscript-3, flash

在第一帧中，我有将播放器发送到不同帧的按钮。有一个按钮发送到“如何播放”帧，然后从该帧返回按钮到主菜单。问题是我有云漂浮在我用动作脚本制作动画的背景中。转到“如何玩”页面很好，但是当我回击时，云冻结并创建了新的。我在第 1 帧上拥有所有内容，但我想可能是因为它要回到第一帧，所以它正在重置所有内容，所以现在我有返回按钮将播放器发送到第 2 帧的新关键帧，但问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:40:36.337

当您返回到第 1 帧时，您在第 1 帧上的任何代码都将再次运行。

我假设您那里有创建云的代码。

> 解决方案：在第 1 帧创建云并继续到第 2 帧。在第 2 帧创建按钮。当您点击“返回”时，返回第 2 帧而不是第 1 帧。

# ios - 识别ios上的模式

> ID：10526132
> 
> 赞同：1
> 
> 时间：2012-05-10T00:48:13.240
> 
> 标签：ios, design-patterns, gesture-recognition

有谁知道一个好的触摸模式识别库？一般是怎么做的？我想将整个 IOS 设备作为输入设备。例如，如果有人在屏幕上画了一颗大心，我们将转到收藏夹页面。不知何故，我需要知道有人在屏幕上画了一颗大心。

谢谢，罗斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:39:57.573

我 在 GitHub 上发现了一个看起来很有前途的[MultistrokeGestureRecognizer库。](https://github.com/britg/MultistrokeGestureRecognizer-iOS)看起来它是运行形状编辑器并将笔画导出为 JSON 点数组的问题。这应该足以让你开始。

如果您需要更多资源，我会看一下 2010 年有关手势识别器的两个 WWDC 视频，[如此](https://stackoverflow.com/a/4074583/1382210)SO 答案中所述。

这是 2011 WWDC 多点触控视频的链接，它也可能对您有所帮助。

[第 118 课 - 在 iOS 上充分利用多点触控](https://developer.apple.com/itunes/?destination=adc.apple.com.8270634034.08270634040.8367260921?i=1527940296)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T00:55:03.667

请参阅[创建自定义手势识别器](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html#//apple_ref/doc/uid/TP40009541-CH6-SW2)。

就其价值而言，必须画出一颗心才能进入您的收藏夹听起来像是一个糟糕的用户界面。不要太关注技术的潜力而忘记了*人*。

# c++ - 删除和擦除迭代？

> ID：10526136
> 
> 赞同：2
> 
> 时间：2012-05-10T00:48:47.740
> 
> 标签：c++, visual-c++

我正在初始化并插入到这样的列表中

```
_ARRAY_DETAIL* pAR = new _ARRAY_DETAIL;
pAR->sVar1 = 1;
pAR->nVar2 = 2;
m_SomeList.push_back(pAR); 
```

我正在尝试从包含值 1 的列表中查找并删除所有内容，然后删除我们使用创建的指针`new`，我下面的示例是否以一种好的、正确的有效方式进行？

```
while(Iter != m_SomeList.end());
{
    if((*Iter)->sVar1 == 1) 
    {
        _ARRAY_DETAIL* pAR = *Iter;
        Iter = m_SomeList.erase(Iter);
        delete  pAR;    pAR = NULL;
    }

    Iter++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:02:55.640

一旦你删除了迭代器，它就不再有效。您需要在擦除之前增加它。

```
if((*Iter)->sVar1 == 1) 
{
    _ARRAY_DETAIL* pAR = *Iter;
    m_SomeList.erase(Iter++);
    delete pAR;
}
else
    ++Iter; 
```

你是正确的，它`erase` [返回一个递增的迭代器](http://www.cplusplus.com/reference/stl/vector/erase/)，但我更喜欢在迭代器被擦除之前明确地这样做。

将 pAR 设置为 NULL 是多余的，因为无论如何它都超出了下一行的范围。

另请注意，`Iter`如果您没有在`if`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T01:20:53.190

作为替代方案，您可以使用，`remove if`尽管您所做的似乎很好。

```
 bool IsOne (_ARRAY_DETAIL* pAR) { 
   if(pAR->sVar1 == 1) {
    delete pAR;
    return true;
   }
   return false;
 }

 remove_if (vec.begin(), vec.end(), IsOne); 
```

# jquery - 在线使用jQuery SVG动画插件的问题

> ID：10526137
> 
> 赞同：1
> 
> 时间：2012-05-10T00:49:01.430
> 
> 标签：jquery, css, animation, svg

我已经做了一些探讨，但是关于这个主题的文档似乎有点稀疏，而且一两件事没有加起来，

**我正在尝试获取一条线来跟踪动画元素，我的设计是使用与框元素相同的动画变量作为线的 X1 坐标，**

Javascript（最新的 jQuery、SVG 插件 + SVG 动画插件）

```
$(function(){
var balloons = [
$("#box1"),
$("#box2"),
$("#box3")
];

var lines = [
$("#line1"),
$("#line2"),
$("#line3")
];

function act(jqObj, lineX, speed, change) {
jqObj
.animate({'left': change}, speed)
.animate({'left': -change}, speed);

lineX
.animate({svgX1: change}, speed)
.animate({sgvX1: -change}, speed, function() {
    act(jqObj, lineX, speed, change);
});
};
for (i = 0; i < balloons.length; i++) {
var speed = 2000 + Math.random() * 501;
var change = 10 + Math.random() * 26;
act(balloons[i], lines[i], speed, change);
}
}); 
```

HTML/CSS

```
<html>
<head>

<title>Proof of Concept Page</title>
<style type="text/css">
 .html .body {position: absolute;}

.box {
 position: absolute;
        width:100px;
        height:100px;
        position: absolute;
        background-color:red;
}
#box1 {
margin-left:300px; margin-top:60px 
}
#box2 {
margin-left:500px; margin-top:20px 
}
#box3 {
margin-left:700px; margin-top:50px 
}
</style>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery.svg.js"></script>
<script type="text/javascript" src="jquery.svganim.js"></script>
<script type="text/javascript" src="main.js"></script>

</head>
<body>
<div  class="box" id="box1">Proj 1</div>
<div  class="box" id="box2">Proj 2</div>
<div  class="box" id="box3">Proj 3</div>

<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <line id="line1" x1="350" y1="160" x2="550" y2="500" style="stroke:rgb(255,0,0);stroke-width:2"/>
    <line id="line2" x1="550" y1="120" x2="550" y2="500" style="stroke:rgb(255,0,0);stroke-width:2"/>
    <line id="line3" x1="750" y1="150" x2="550" y2="500" style="stroke:rgb(255,0,0);stroke-width:2"/>
</svg>

</body></html> 
```

这里有几个问题，首先，很明显的一个，即当前代码将 X1 的位置设置在最左边，因为我没有告诉添加到原始值。

我不使用**“+=change”**的原因是**“+=anything”**出于某种原因破坏了代码，甚至是通用数值。

最后，即使我只是将第一个 X1 动画的值设置为 500，第二个设置为 0，也只会触发第一个动画，而跳过第二个动画。这种效果在这里也可以看到，线条飞到最左边然后**不动**。

我敢肯定，这部分是我对 jQuery 和 Javascript 的极其业余的理解，但我将不胜感激任何建设性的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T02:11:48.030

This was rather challenging in that I had not used svg before.

After playing with it on and off for a couple of days, I ended up with this:

```
var $boxes = $(".box"),//coded in HTML
    strings = [];//populated below with sgv lines

$('#canvas').svg({
    onLoad: function(svg) {
        var g = svg.group({
            stroke: 'red',
            strokeWidth: 2
        });
        $boxes.each(function(i, el) { // make one string per box.
            strings.push(svg.line(g, parseInt($(el).css('left')), 18+parseInt($(el).css('top')), 50, 200));
        });
    }
});

//animate the boxes
$boxes.each(function(i, el) {
    var speed = 2000 + Math.random() * 501,
        change = 10 + Math.random() * 26,
        jqObj = $(el),
        initial_left = parseInt(jqObj.css('left')) || 0;
    (function act() {
        jqObj.animate({
            'left': initial_left + change
        }, {
            duration: speed,
            step: function() { //move the string's top end to keep up with the box
                $(strings[i]).animate({
                    svgX1: jqObj.css('left')
                }, 0);
            }
        }).animate({
            'left': initial_left - change
        }, {
            duration: speed,
            step: function() { //move the string's top end to keep up with the box
                $(strings[i]).animate({
                    svgX1: jqObj.css('left')
                }, 0);
            },
            complete: act
        });
    })();
}); 
```

See [DEMO](http://jsfiddle.net/a2r3L/2/).

This is actually a hybrid solution with svg strings and non-svg text boxes. These elements are animated in such a way that each string appears to be attached to a text box.

The code is not easy to follow and could no doubt be simplified. In the end, I was just pleased to get something working. Good education for me and I hope it's useful to you .

EDIT - explanatory notes:

**Your interpretation**: Just about correct. I'm actually using an alternative form of animate, which works as follows, `.animate(properties, options)`, where properties and options are both maps (javascript objects). This form of the method allows a `step` option to be specified - ie. an operation that will occur at each step of the animation. In this case, the operation of interest is changing the position of the top end of the balloon string.

**`i` and 'el'**: jQuery's `.each()` methods offer a convenient way to iterate over the elements in an array, the DOM nodes in a jQuery container, or properties of a plain js object. Both forms of `.each()` accept a callback function which specifies the operation to perform at *each* iteration. In turn, the callback function accepts two parameters representing (for array and jQuery container) `index` and `value`, or (for plain js object) `key` and `value`. The `.each()` method calls the callback function internally and inserts the parameters once per iteration. When writing a callback, you can call the arguments what you like, and I called them `i` (short for `index`) and `el` (short for element).

**Line animation**: The line actually DOES just move a tiny bit and stop. BUT, this operation is performed in the `step` callback, it is called once per step of the animation - ie. as many times as necessary until the animation is complete. Thus, the line keeps up with the object to which it is "glued".

# ruby-on-rails - 使用 HAML 进行 Markdown 代码缩进

> ID：10526143
> 
> 赞同：3
> 
> 时间：2012-05-10T00:50:09.160
> 
> 标签：ruby-on-rails, haml, markdown, middleman

从昨天开始，我一直在寻找答案，我很困惑为什么会发生......

我们通过标准的 HAML 模板（我们使用优秀的静态站点生成器 Middleman 来构建，仅供参考）和 Redcarpet 来解析 Markdown 来提供 Markdown 内容。

就 Markdown 输出而言，一切都按预期工作，但代码块除外：

**layout.haml**
（仅文件的一部分，显示一个简单的`=yield`. 这`%section`是 HAML 文件中的 6 个空格）：

```
%section.content.main_content
  = yield 
```

**index.html.md**
（只是文件的一部分，展示代码块代码）

```
### Header Level 3
Here's some code:

    $total-columns  : 12;
    $column-width   : 4em;
    $gutter-width   : 1em;
    $grid-padding   : $gutter-width; 
```

但是，输出不是我们所期望的，并且缩进有些混乱。我不确定 HAML 是否是罪魁祸首，或者究竟是什么原因造成的：

这是浏览器输出的截图：http: [//bit.ly/JvjTYo](http://bit.ly/JvjTYo)

这是来自 Chrome Developer Rools 的 DOM 屏幕截图：http: [//bit.ly/JWprGO](http://bit.ly/JWprGO)

我们尝试了几种不同的方法，非常欢迎任何帮助。如果你想在 GitHub 上查看完整的源代码，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T01:15:40.707

查看[有关 whitespace 的 Haml 文档](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#whitespace_preservation)。在这种情况下，您应该能够使用[`~`运算符](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#tilde)而不是`=`：

```
%section.content.main_content
~ yield 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:02:58.363

我有一种感觉，这是 HAML。似乎它正在尝试为您解释和缩进。

你有 :ugly 输出吗？

另外，您是否为您的预标签设置了以下内容？：

```
pre { white-space:pre } 
```

**编辑：**在代码块中找到这个[Markdown 换行符，](https://stackoverflow.com/questions/10438050/markdown-line-breaks-in-code-blocks)这可能会有所帮助

# apache - htaccess 帮助重置

> ID：10526148
> 
> 赞同：2
> 
> 时间：2012-05-10T00:51:02.763
> 
> 标签：apache

如何重置 .htaccess 文件？起初它可以工作，然后我进行了更改，但是当我看到我所做的更改不起作用时，我立即上传了原始文件。然后我的网站卡住了。我的文件前总是有两个 www。我需要帮助来解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:53:50.217

为了让 apache 看到您对 .htaccess 文件所做的更改，您只需使用`/etc/init.d/httpd restart`or `/etc/init.d/apache2`(Debian) 重新启动 Apache。

# svg - 如何使用 set 标签重新定义 SVG 中的填充属性？我以为我知道，但是

> ID：10526154
> 
> 赞同：1
> 
> 时间：2012-05-10T00:52:55.460
> 
> 标签：svg

我正在使用来自 wikimedia commons 的标准空白地图 6 svg。我添加了一个语言列表，我正在努力做到这一点，以便当我将鼠标悬停在一种语言上时，相应的国家/地区会亮起，改变颜色，或者以某种方式表明它们已被“选中”。这是我正在使用的代码。

```
<set 
attributeName="fill" 
 from="#E0E0E0" 
 to="#FF8888" 
begin="tEnglish.mouseover" 
end="tEnglish.mouseout" 
/> 
```

其中 tEnglish 是表示“English”的文本对象。没运气。

无论是使用或其他任何方法，我都无法让 svg 更改已定义的属性。这意味着如果我从其中一个 s 中删除 fill="#E0E0E0" 属性，我可以让它工作（尽管如此，默认值是黑色而不是灰色，这不符合我正在处理的网站的风格)，但如果 已经包含一个 fill= 属性，它不会按照标签的指示进行更改。我也试过删除 fill="#E0E0E0" 并在样式表中定义它——同样的问题。

那么，是否完全不可能在声明路径后重新定义路径的属性？仅当该属性未在其他地方定义时才有效？我的想法甚至可能吗？我很感激可以提供的任何帮助。

我也欢迎您对您可能拥有的其他方法（jquery、javascript）提出任何建议；虽然我对他们中的任何一个都没有那么有经验，但我可以做一些研究，但任何领导都会受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T15:57:28.913

如果将`set`标签放在元素内，它会起作用：

```
<rect
   width="248.57143"
   height="225.71428"
   x="137.14285"
   y="395.21933"
   id="myrect"
   style="fill:#800000;">
    <set 
        attributeName="fill" 
         to="#008000" 
        begin="mouseover" 
        end="mouseout" 
        />
</rect> 
```

你也可以使用简单的 CSS 来实现它：

```
#myrect {
    fill: #800000;
}

#myrect:hover {
    fill: #008000;
} 
```

css 示例：http: [//fiddle.jshell.net/7dcnZ/2/](http://fiddle.jshell.net/7dcnZ/2/)

当然，JavaScript 也是一种选择：

```
$('#myrect').hover(function() {
    $(this).css('fill', '#008000');
}, 
function() {
    $(this).css('fill', '#800000');
}); 
```

JavaScript 示例：http: [//fiddle.jshell.net/7dcnZ/3/](http://fiddle.jshell.net/7dcnZ/3/)

# html - html/.cshtml 中的更多按钮功能

> ID：10526155
> 
> 赞同：0
> 
> 时间：2012-05-10T00:52:55.837
> 
> 标签：html, asp.net-mvc-3, razor

我们如何在 .cshtml 页面中放置更多按钮？期望是当有人单击更多按钮时打开一个新的不可编辑的文本区域。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:00:00.757

直接在浏览器中执行：

[http://api.jquery.com/show/](http://api.jquery.com/show/)

# symfony - 使用 KnpSnappyBundle 生成 jpg 时没有资产

> ID：10526157
> 
> 赞同：4
> 
> 时间：2012-05-10T00:53:03.807
> 
> 标签：symfony

这似乎是一个已知问题，但我找不到解决方案：

使用 KnpSnappyBundle 生成 jpg/pdf 时未加载 css 文件。 [这是](http://groups.google.com/group/symfony2/browse_thread/thread/b16266e9bd14628d/587d0f05493aa836?lnk=gst&q=KnpSnappyBundle#587d0f05493aa836)关于 google groups 的讨论，但没有提供答案。

有没有人找到解决这个问题的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T23:59:19.840

答案有点晚了，但我遇到了同样的问题，我使用绝对路径为我的资产解决了这个问题，如下所示：

```
<link rel="stylesheet" href="{{ app.request.scheme ~'://' ~ app.request.httpHost ~ asset('bundles/factura/css/all.css') }}"> 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T16:54:59.820

[github](https://github.com/KnpLabs/KnpSnappyBundle/pull/13)上有一个“解决方法”，但它仍在合并请求中：目前我认为这是使用的最佳解决方案

```
$this->get('knp_snappy.pdf')->getOutput() 
```

代替

```
$this->get('knp_snappy.pdf')->getOutputFromHtml() 
```

# facebook - 当我使用 facebook javascript SDK 进行身份验证时，它在手机和 ipad 上失败

> ID：10526158
> 
> 赞同：2
> 
> 时间：2012-05-10T00:53:22.433
> 
> 标签：facebook, authentication, mobile

Javascript 身份验证在浏览器上效果很好，但是一旦我在移动设备上使用该网站，我总是在登录弹出窗口中收到此错误。

抱歉，您使用的应用程序配置错误，无法与 Facebook 集成。请下载最新版本的应用程序。

它没有显示通常的登录弹出窗口，而是转到 m.facebook.com 并产生此错误。有趣的是单击西班牙语链接，使其再次工作。

- 编辑 -

在进行了一些研究和修补之后，我将其确定为：

```
<fb:login-button registration-url="http://www.example.com/page#register" onlogin="authenticate.facebookLoginCallBack()"></fb:login-button> 
```

英镑符号可能会炸毁它。我需要井号，因为我不想重定向页面，而是想触发 js 注册弹出窗口。

我的猜测是 # 进入重定向 URL，然后必须以某种方式再次转换以重定向到 m.facebook.com，这使得它在那里失败。

- 编辑 -

我想过通过创建自己的按钮并调用 FB.login 来重做流程，但无法告诉 API 在登录时停止并加载我自己的注册。问题总结到这里[使用FB.login注册流程](https://stackoverflow.com/questions/10474816/registration-flow-using-fb-login)

实际上，这里似乎只为我们提供了一个选项： [https](https://developers.facebook.com/docs/plugins/registration/) ://developers.facebook.com/docs/plugins/registration/ Login + Registration Flows

它在我的情况下不起作用

* * *

视觉效果

通常，用户单击此按钮

![登录按钮](../Images/15d62ebf14128b89d29af59955f20bc8.png)

然后他们看到这个对话框。（请注意，网址中显示 www.facebook.com）

![在此处输入图像描述](../Images/9fb6bf6daa5ce440fdb65d5a94a137dc.png)

但是他们在手机上看到了这个对话框。（这是从 m.facebook.com 加载的）

![重定向对话框](../Images/ffe1cf60b681d24f33b177bff3ff9875.png)

# jquery - 如何在一页上有多个 jQuery('').keyup

> ID：10526161
> 
> 赞同：1
> 
> 时间：2012-05-10T00:53:50.610
> 
> 标签：jquery, keyboard-events

我有一个带有三个文本框的表单。我想对他们每个人都有一个关键事件，不管他们先进入哪一个。下面是我的代码：

```
function showQuoteBox() {
var overlay = '<div id="overlay"></div>';
var quoteBox = '<form id="quoteForm" action="#"><h1>Get a quote from <INSTALLERS NAME></h1><fieldset id="user-details"><label for="inName">Name:</label><input type="text" id="inName" name="name" value="" /><label for="email">Email:</label><input type="email" id="inEmail" name="email" value=""  /><label for="phone">Phone:</label><input type="text" id="inPhone" name"phone" value=""  /><input type="submit" value="Get quote!" name="submit" class="submit" /></fieldset><div id="sent-details"><span id="nameText"><span id="emailText"><span id="phoneText"></span></div></form>'
jQuery(overlay).appendTo('body');
jQuery(quoteBox).appendTo('body');
jQuery(document).ready(function() {
    jQuery('#inName').keyup(function(){
        jQuery('#nameText').html(jQuery(this).val());
    });
    jQuery('#inEmail').keyup(function(){
        jQuery('#emailText').html(jQuery(this).val());
    });
    jQuery('#inPhone').keyup(function(){
        jQuery('#phoneText').html(jQuery(this).val());
    });
});
}

window.onkeyup = function (event) {
   if (event.keyCode == 27) {
      jQuery('#overlay').remove();
      jQuery('#quoteForm').remove();
   }
} 
```

以上是单击按钮时调用的整个函数。它显示了带有三个输入的quoteBox。每个输入框都允许我输入文本，但它只会更新第一个输入的跨度区域。如果任何其他文本框具有值，则所有其他文本框都不会更新。

如果我选择先输入一封电子邮件，它将显示在跨度中，但是当我在任何其他文本框中输入一个值时，它就不会收听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:29:26.477

您描述的行为 - 只有一个键盘似乎在工作 - 很可能是由于**您已将 3 个 SPANS 嵌入到另一个中！**

```
<div id="sent-details">
    <span id="nameText">
        <span id="emailText">
            <span id="phoneText"></span>
</div> 
```

不仅如此，我没有看到他们被关闭。SPAN 标签不会自动关闭，每个浏览器都会尝试自我纠正或以不同的方式解释这一点。某些浏览器可能会尝试为您关闭它们。

因此，您的第一个按键事件要么覆盖其他 2 个 SPAN 元素，要么 JavaScript 无法找到这些元素，因为您的 HTML 无效。

您的 HTML 的正确语法是：

```
var quoteBox = '<form id="quoteForm" action="#">' +
  '<h1>Get a quote from <INSTALLERS NAME></h1>'+
  '<fieldset id="user-details">'+
      '<label for="inName">Name:</label>'+
      '<input type="text" id="inName" name="name" value="" />'+
      '<label for="email">Email:</label>'+
      '<input type="email" id="inEmail" name="email" value=""  />'+
      '<label for="phone">Phone:</label>'+
      '<input type="text" id="inPhone" name"phone" value=""  />'+
      '<input type="submit" value="Get quote!" name="submit" class="submit" />'+
  '</fieldset>'+
  '<div id="sent-details">'+
      '<span id="nameText"></span>'+  // closed tags here
      '<span id="emailText"></span>'+ // closed tags here
      '<span id="phoneText"></span>'+ // closed tags here
  '</div></form>'; 
```

**更可持续和可维护的解决方案：**

顺便说一句，在 JavaScript 变量中存储一长串 HTML 是一种非常不可持续的处理标记的方式，因为它会导致不可读性，而这正是导致这类错误的原因。相反，如果我要解决这个问题，我会将这个 HTML 放在页面上，但使用`display:none`. 然后，在函数`showQuoteBox`中，我将简单地使用 CSS 类或 id 选择器来取消隐藏该代码块。

由于 HTML 将位于它所属的 HTML 文档中，因此它不仅更易于维护，而且您还可以与您的 Web 设计师交朋友，他们不想尝试对您的 JavaScript 进行逆向工程。

```
<div id="overlay" style="display:none">
    <form id="quoteForm" action="#">
        <h1>Get a quote from <INSTALLERS NAME></h1>
            <fieldset id="user-details">
                <label for="inName">Name:</label>
                <input type="text" id="inName" name="name" value="" />
                <label for="email">Email:</label>
                <input type="email" id="inEmail" name="email" value=""  />
                <label for="phone">Phone:</label>
                <input type="text" id="inPhone" name"phone" value=""  />
                <input type="submit" value="Get quote!" name="submit" class="submit" />
            </fieldset>
           <div id="sent-details">
               <span id="nameText"></span>
               <span id="emailText"></span>
               <span id="phoneText"></span>
          </div>
      </form>
  </div>

function showQuoteBox() {
     // var overlay = '<div id="overlay"></div>';  <-- don't do this
     // var quoteBox

     // instead, use jQuery to unhide your HTML and keep it out of the JavaScript
     $('overlay').show();  

     // the rest of your code follows
     ...
 } 
```

最后，看起来您将 keyup 事件代码包含在 function`showQuoteBox`中。页面加载完成并且 DOM 准备就绪后，jQuery 对象上的`ready`方法就会触发，因此在函数中注册该事件似乎有点奇怪。

在这种情况下，您在使用 jQuery 将一些 DOM 元素添加到已加载的页面时注册这些事件。因此， (document).ready 不仅没有必要，而且可能会出现问题。如果按照上一节中的步骤操作后仍然遇到问题，请考虑删除 document.ready 包装器，如以下代码块所示：

```
// don't put document.ready around this since it's in a function you're calling to show a form
jQuery('#inName').keyup(function(){
    jQuery('#nameText').html(jQuery(this).val());
});
jQuery('#inEmail').keyup(function(){
    jQuery('#emailText').html(jQuery(this).val());
});
jQuery('#inPhone').keyup(function(){
    jQuery('#phoneText').html(jQuery(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:56:57.597

只是..做你正在做的事。只要将其包装在 $(document).ready 中就应该可以正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T01:12:29.700

由于您重复相同的行为，我认为您应该使用插件。我称之为模仿。它未经测试（因为没有 html 或 jsfiddle 可以解决），但它应该可以解决问题。

```
(function($) {
    $.fn.mimic = function(selector) {
        var $elementToMimic = $(selector);

        $.each(this, setupMimicEvents);

        function setupMimicEvents() {
            var $mimicer = $(this);

            $elementToMimic.on('keyup', mimicElement);

            function mimicElement() {
                var value = $elementToMimic.val();
                $mimicer.html(value);
            }
        } 

        return this;
    }
})(jQuery)

jQuery(function() {
    jQuery('#nameText').mimic('#inName');
    jQuery('#phoneText').mimic('#inPhone');
}); 
```

## 此外

如果你打算使用 jQuery，那么也将它用于 body 上的事件。我不确定您到底要做什么，但这似乎有点不对劲。

# sockets - NodeJS 发送字符串

> ID：10526164
> 
> 赞同：1
> 
> 时间：2012-05-10T00:54:06.240
> 
> 标签：sockets, node.js, buffer

正如我所见，Node JS 无法向客户端发送字符串。
当我使用`socket.write("string")`客户端没有收到任何东西。`socket.write(new Buffer("string"))`——同样的情况。

```
var b = new Buffer(15);
b.write("string");
socket.write(b); 
```

看起来有些工作，但客户端收到字符串以及大量空格。

```
var b = new Buffer(6); //6 - lenght of string in bytes
b.write("string");
socket.write(b); 
```

又什么都没有！

```
var b = new Buffer(7);
b.write("string");
socket.write(b); 
```

现在有更少的空白字符。
我的头真的很痛。发送简单的字符串真的很复杂吗？
等待我的救命恩人:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:00:11.573

`socket.write("string")`实际上工作正常。检查[文档](http://nodejs.org/api/net.html#net_socket_write_data_encoding_callback)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T16:44:03.220

你忘了结束传输，每次写入后做一个[`socket.end();`](https://nodejs.org/api/net.html#net_socket_end_data_encoding)

此外，如果您只发送一个字符串，您可以随时执行[`socket.end(stringToSend);`](https://nodejs.org/api/net.html#net_socket_end_data_encoding)

另请参阅[modul 'net' 的 NodeJS 文档](https://nodejs.org/api/net.html)。

# c#-4.0 - Ninject MVC 2、EF 4、AutoMapper - ObjectContext 已被释放

> ID：10526167
> 
> 赞同：2
> 
> 时间：2012-05-10T00:54:30.373
> 
> 标签：c#-4.0, asp.net-mvc-2, entity-framework-4, automapper, ninject.web.mvc

完全修改：

好的，我使用带有 MVC 2 扩展的 Ninject 作为我的 DI 容器，并将 AutoMapper 作为我的实体 <--> 视图模型映射器。我的视图模型 -> 实体映射中出现“ObjectContext 已处理”错误。我的代码如下。

Ninject 绑定：

```
public class DIModule : NinjectModule
{
    public override void Load()
    {
        this.Bind<HGEntities>().ToSelf().InRequestScope();
        this.Bind<IArticleRepository>().To<HGArticleRepository>().InRequestScope();
        this.Bind<IGameRepository>().To<HGGameRepository>().InRequestScope();
        this.Bind<INewsRepository>().To<HGNewsRepository>().InRequestScope();
        this.Bind<ErrorController>().ToSelf().InRequestScope();
        this.Bind<HGController>().ToSelf().InRequestScope();
    }
} 
```

我的存储库：

```
public class HGGameRepository : IGameRepository, IDisposable
{
    private HGEntities _context;

    public HGGameRepository(HGEntities context)
    {
        this._context = context;
    }

    // methods

    public void SaveGame(Game game)
    {
        if (game.GameID > 0)
        {
            _context.ObjectStateManager.ChangeObjectState(game, System.Data.EntityState.Modified);
        }
        else
        {
            _context.Games.AddObject(game);
        }

        _context.SaveChanges();
    }

    public void Dispose()
    {
        if (this._context != null)
        {
            this._context.Dispose();
        }
    }
} 
```

我的控制器的构造函数，其中包括我的 AutoMapper 地图定义：

```
 public AdminController(IArticleRepository articleRepository, IGameRepository gameRepository, INewsRepository newsRepository)
    {
        _articleRepository = articleRepository;
        _gameRepository    = gameRepository;
        _newsRepository    = newsRepository;

        Mapper.CreateMap<Game, AdminGameViewModel>()
            .BeforeMap((s, d) =>
            {
                int platCount = s.Platforms.Count;
                var plats = s.Platforms.ToArray();
                d.PlatformIDs = new int[platCount];

                for (int i = 0; i < platCount; ++i)
                {
                    d.PlatformIDs[i] = plats[i].PlatformID;
                }
            })
            .ForMember(dest => dest.Pros, opt => opt.MapFrom(src => src.Pros.Split(new char[] {'|'})))
            .ForMember(dest => dest.Cons, opt => opt.MapFrom(src => src.Cons.Split(new char[] {'|'})))
            .ForMember(dest => dest.PlatformIDs, opt => opt.Ignore());

        Mapper.CreateMap<AdminGameViewModel, Game>()
            .BeforeMap((s, d) =>
            {
                if (d.Platforms != null && d.Platforms.Count > 0)
                {
                    var oldPlats = d.Platforms.ToArray();

                    foreach (var oldPlat in oldPlats)
                    {
                        d.Platforms.Remove(oldPlat);
                    }
                }

                foreach (var platId in s.PlatformIDs)
                {
                    var plat = _gameRepository.GetPlatform(platId);
                    d.Platforms.Add(plat);
                }
            })
            .ForMember(dest => dest.Platforms, opt => opt.Ignore())
            .ForMember(dest => dest.BoxArtPath, opt => opt.Ignore())
            .ForMember(dest => dest.IndexImagePath, opt => opt.Ignore())
            .ForMember(dest => dest.Cons, opt => opt.MapFrom(src => string.Join("|", src.Cons)))
            .ForMember(dest => dest.Pros, opt => opt.MapFrom(src => string.Join("|", src.Pros)))
            .ForMember(dest => dest.LastModified, opt => opt.UseValue(DateTime.Now));
    } 
```

这是这里重要的第二个映射。

接下来是我的编辑方法：

```
 [HttpPost]
    public ActionResult EditGame([Bind(Prefix="GameData")]AdminGameViewModel formData)
    {
        Game game = _gameRepository.GetGame(formData.GameID);

        if (ModelState.IsValid)
        {
            game = AutoMapper.Mapper.Map<AdminGameViewModel, Game>(formData, game);

    // it dies here, so the rest of the method is immaterial
    } 
```

最后，堆栈跟踪：

```
[ObjectDisposedException: The ObjectContext instance has been disposed and can no longer be used for operations that require a connection.]
System.Data.Objects.ObjectContext.EnsureConnection() +87
System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption) +90
System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator() +96
System.Linq.Enumerable.FirstOrDefault(IEnumerable`1 source) +182
System.Data.Objects.ELinq.ObjectQueryProvider.<GetElementFunction>b__1(IEnumerable`1 sequence) +74
System.Data.Objects.ELinq.ObjectQueryProvider.ExecuteSingle(IEnumerable`1 query, Expression queryRoot) +95
System.Data.Objects.ELinq.ObjectQueryProvider.System.Linq.IQueryProvider.Execute(Expression expression) +163
System.Linq.Queryable.FirstOrDefault(IQueryable`1 source, Expression`1 predicate) +300
HandiGamer.Domain.Concrete.HGGameRepository.GetPlatform(Int32 id) in C:\Users\Kevin\documents\visual studio 2010\Projects\HandiGamer\HandiGamer.Domain\Concrete\HGGameRepository.cs:68
HandiGamer.WebUI.Controllers.AdminController.<.ctor>b__a(AdminGameViewModel s, Game d) in C:\Users\Kevin\documents\visual studio 2010\Projects\HandiGamer\HandiGamer\Controllers\AdminController.cs:56
AutoMapper.<>c__DisplayClass1b.<BeforeMap>b__1a(Object src, Object dest) +139
AutoMapper.TypeMap.<get_BeforeMap>b__0(Object src, Object dest) +118
AutoMapper.Mappers.PropertyMapMappingStrategy.Map(ResolutionContext context, IMappingEngineRunner mapper) +196
AutoMapper.Mappers.TypeMapMapper.Map(ResolutionContext context, IMappingEngineRunner mapper) +256
AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.Map(ResolutionContext context) +459

[AutoMapperMappingException: 

Mapping types:
AdminGameViewModel -> Game
HandiGamer.WebUI.ViewModels.AdminGameViewModel -> HandiGamer.Domain.Entities.Game

Destination path:
Game

Source value:
HandiGamer.WebUI.ViewModels.AdminGameViewModel]
AutoMapper.MappingEngine.AutoMapper.IMappingEngineRunner.Map(ResolutionContext context) +537
AutoMapper.MappingEngine.Map(Object source, Object destination, Type sourceType, Type destinationType, Action`1 opts) +179
AutoMapper.MappingEngine.Map(TSource source, TDestination destination, Action`1 opts) +190
AutoMapper.MappingEngine.Map(TSource source, TDestination destination) +146
AutoMapper.Mapper.Map(TSource source, TDestination destination) +105
HandiGamer.WebUI.Controllers.AdminController.EditGame(AdminGameViewModel formData) in C:\Users\Kevin\documents\visual studio 2010\Projects\HandiGamer\HandiGamer\Controllers\AdminController.cs:323
lambda_method(Closure , ControllerBase , Object[] ) +162
System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +51
System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +409
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +52
System.Web.Mvc.<>c__DisplayClassd.<InvokeActionMethodWithFilters>b__a() +127
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +436
System.Web.Mvc.<>c__DisplayClassf.<InvokeActionMethodWithFilters>b__c() +61
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +305
System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +830
System.Web.Mvc.Controller.ExecuteCore() +136
System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +111
System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +39
System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__4() +65
System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +44
System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +42
System.Web.Mvc.Async.WrappedAsyncResult`1.End() +141
System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +54
System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +40
System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +52
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +38
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +690
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +194 
```

按照调试器中的过程，我的 ObjectContext 的 (HGEntities) 连接保持不变，直到我的视图模型 -> 游戏地图被调用。出于某种原因，连接被设置在那个点上。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:37:10.773

我看到 IDisposable 没有正确实现。也许这可能是您处理相关异常的原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T01:21:42.500

我自己的静态映射器完美运行：

```
public static class GameMapper
{
    public static Game MapFromEditModelToGame(IGameRepository repo, AdminGameViewModel formData, Game newGame)
    {
        newGame.GameID = formData.GameID;
        newGame.GameTitle = formData.GameTitle;
        newGame.GenreID = formData.GenreID;
        newGame.LastModified = DateTime.Now;
        newGame.ReviewScore = (short)formData.ReviewScore;
        newGame.ReviewText = formData.ReviewText;
        newGame.Cons = String.Join("|", formData.Cons);
        newGame.Pros = String.Join("|", formData.Pros);
        newGame.Slug = formData.Slug;

        if (newGame.Platforms != null && newGame.Platforms.Count > 0)
        {
            var oldPlats = newGame.Platforms.ToArray();

            foreach (var oldPlat in oldPlats)
            {
                newGame.Platforms.Remove(oldPlat);
            }
        }

        foreach (var platId in formData.PlatformIDs)
        {
            var plat = repo.GetPlatform(platId);
            newGame.Platforms.Add(plat);
        }

        return newGame;
    }
} 
```

调用为：

```
game = GameMapper.MapFromEditModelToGame(_gameRepository, formData, game); 
```

将上述内容与我的 AutoMapper 地图定义进行比较：

```
Mapper.CreateMap<AdminGameViewModel, Game>()
.BeforeMap((s, d) =>
{
    if (d.Platforms != null && d.Platforms.Count > 0)
    {
        var oldPlats = d.Platforms.ToArray();

        foreach (var oldPlat in oldPlats)
        {
            d.Platforms.Remove(oldPlat);
        }
    }

    foreach (var platId in s.PlatformIDs)
    {
        var plat = _gameRepository.GetPlatform(platId);
        d.Platforms.Add(plat);
    }
})
.ForMember(dest => dest.Platforms, opt => opt.Ignore())
.ForMember(dest => dest.BoxArtPath, opt => opt.Ignore())
.ForMember(dest => dest.IndexImagePath, opt => opt.Ignore())
.ForMember(dest => dest.Cons, opt => opt.MapFrom(src => string.Join("|", src.Cons)))
.ForMember(dest => dest.Pros, opt => opt.MapFrom(src => string.Join("|", src.Pros)))
.ForMember(dest => dest.LastModified, opt => opt.UseValue(DateTime.Now)); 
```

唯一真正的区别是我将回购作为参数传递。

所有其他代码——我的控制器、我的 DI 东西等——都是完全相同的。*唯一*的区别是我使用自己的笨拙的映射器。不是一个理想的情况，但有些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T15:53:26.687

根据[文档](http://ninject.codeplex.com/wikipage?title=Injection%20Patterns&referringTitle=User%20Guide)，他们实际上不鼓励您使用工厂。我使用它们，但现在它可能会解决您的问题。我在自己的 DI 中使用 ninject 旅程时遇到了这个错误，但很难说你为什么会得到你的错误。对我来说，这是由关系和延迟加载引起的。启用延迟加载后，您的对象会保留对 ObjectContext 的引用，因此它们可以填充相关对象和相关对象的集合。

最重要的是，我认为如果您发布错误的堆栈跟踪会有所帮助，以便我们可以帮助您准确了解错误发生的时间。

希望这可以帮助。

**编辑：**我认为问题出在您的保存方法中。如果您在让游戏对其进行编辑时处置您的对象上下文。我认为它不会在 ObjectStateManager 中看到您的行：

```
_context.ObjectStateManager.ChangeObjectState(game, System.Data.EntityState.Modified); 
```

您从 AutoMapper 获得的当前游戏对象未附加到任何 ObjectContext。这是我用于更新的方法：

```
public void Update(TEntity entity)
{
    object originalItem;

    EntityKey key = Context.CreateEntityKey(Context.GetEntitySet<TEntity>().Name, entity);

    if (Context.TryGetObjectByKey(key, out originalItem))
    {
        Context.ApplyCurrentValues(key.EntitySetName, entity);
    }
} 
```

别忘了打电话`Context.SaveChanges();`

我没有想出它自己在网上的某个地方找到了它。这对我来说效果很好。我会调整你的保存方法来合并它。如果您需要帮助，请告诉我。我推荐的另一件事（小）是在您的 dispose 方法中将您的 Object 上下文设置为 null 。

祝你好运！

**编辑：**好的，再试一次...基于您的管理控制器的构造函数，您的存储库是否有私有变量？

```
private IGameRepository _gameRepository;

public AdminController(IArticleRepository articleRepository, IGameRepository gameRepository, INewsRepository newsRepository)
    {
        _articleRepository = articleRepository;
        _gameRepository    = gameRepository;
        _newsRepository    = newsRepository; 
```

控制器是由 ninject 创建的吗？我在您的绑定列表中没有看到 AdminController。我没有在`[Inject]`您的任何构造函数上看到该属性。您是在发布到堆栈时忽略了它还是它们不存在？

我的另一个想法是，如果您的上下文中的应用程序 InSingletonScope() 没有任何内存问题（泄漏）可能是合适的答案。

抱歉所有问题，但我只是想更好地理解这个问题。

# android - 旋转设备时缺少广播意图？

> ID：10526169
> 
> 赞同：1
> 
> 时间：2012-05-10T00:54:58.920
> 
> 标签：android, android-intent, android-service

我们有一个网络客户端应用程序，我们正在尝试验证我们处理来自服务器的响应以及设备轮换的方法。本质上，我们这样做，

1.  活动为网络响应注册一个接收器
2.  活动通过启动意图服务来启动网络操作
3.  服务通过广播它完成的意图来响应

我们（感知到的）问题是，当设备旋转时，活动被销毁/重新创建。在 Activity 的接收器未注册`onPause()`和重新注册之间的这段时间内`onResume()`，我们可能错过了服务广播的意图。

这是一个真正的问题吗？

如果是这样，我们假设了以下解决方案，

1.  首先，不要使用意图在活动和服务之间进行通信
2.  创建两个阻塞队列：应用程序类中的网络请求和响应
3.  服务启动`take()`来自请求队列的线程
4.  活动启动一个`take()`来自响应队列的线程
5.  `offer()`当它想要开始网络操作时，活动的请求队列
6.  发布网络操作的结果时服务`offer()`到响应队列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:42:55.193

是的，这可能在极少数情况下发生，但如果用户接到电话，它肯定会发生。同样，您的活动将暂停然后恢复，如果用户长时间交谈，您的活动将从服务中丢失一堆广播。

我的建议是，在需要立即注意来自服务等组件的响应的情况下，您不能使用广播在应用程序之间进行双向通信。您将使用什么机制取决于具体情况。在我最新的项目中，我使用服务来更新应用程序小部件，在这种情况下，我在服务中使用静态代码来执行一些查询或请求一些操作。

[你的想法听起来不错，但它可能隐藏了一个复杂的实现，如果我处于你的位置，我会考虑使用名为Bound Services](http://developer.android.com/guide/topics/fundamentals/bound-services.html)的内置服务机制。到目前为止我还没有使用它，但它似乎可以满足您的需求。

编辑

因此，基于绑定服务的概念，我提出了以下流程：

1.  活动启动，即所谓的粘性服务。
2.  服务为网络响应注册接收器。
3.  服务根据网络响应维护一个带有所需信息的 Ibinder 对象。
4.  Activity 会在需要时绑定到服务，并使用信息检索 Ibinder 对象并执行所需的操作。
5.  当该结束应用程序时，Activity 会停止服务并自行完成。

希望这可以帮助...

# jquery - jQuery UI 可选 - 如何根据部分 id 排除元素

> ID：10526173
> 
> 赞同：0
> 
> 时间：2012-05-10T00:56:11.560
> 
> 标签：jquery, jquery-ui-selectable

我对 jQuery 很陌生，所以这基本上是一个语法问题。我正在使用可选择的 jQuery UI，我想知道如何根据元素 id 的一部分排除元素。在我链接到这里的示例中，我有具有以下 id 的 div：'TextBox1_label'、'TextBox2_label'、'TextBox3_label'、'TextBox4_label'、'TextBox5'、'TextBox6'

在我的示例中，我已将 'TextBox3_label' 和 'TextBox4_label' 排除在可选择之外，但我想做的是排除所有 id 以 '_label' 结尾的 div 不可选择。

[http://jsfiddle.net/4N2ja/](http://jsfiddle.net/4N2ja/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:17:56.677

您可以使用[属性包含选择器](http://api.jquery.com/attribute-contains-selector/ "属性包含选择器")：

```
filter: ':not(div[id*="_label"])' 
```

但是，我建议在您的 html 中添加其他内容，将 div 标识为标签。例如将其更改为：

```
<div id="textbox1_label" class="label">My label</div> 
```

并过滤没有“标签”类的东西。

# objective-c - iOS 自定义 UITableView 和 UITableViewCell 与列（Twitter 应用程序）

> ID：10526175
> 
> 赞同：1
> 
> 时间：2012-05-10T00:56:25.163
> 
> 标签：objective-c, ios, twitter, uitableview

我正在开发一个 iPhone/iPod 应用程序，设计师使用了很多这些“Twitter 应用程序概念”（[截图](http://i.stack.imgur.com/4EGFk.jpg)）。如您所见，TableView 有一个阴影，并且可以将单元格拆分为列（这些列是可单击的）。

我只需要创建这些列，知道如何实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T01:11:38.160

Prettykit 库可能是一个不错的起点，因为该库是 UITableViewCell 和 UINavigationController 的子类。

[http://cocoacontrols.com/platforms/ios/controls/prettykit](http://cocoacontrols.com/platforms/ios/controls/prettykit)

![](../Images/2915137b41d74f8babb04e36b9dfd43e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T01:08:49.910

好吧，`UITableViewCell`当您点击该行时，您只需将 3 个子视图添加到 UITableViewCell。`UIView``tableView:cellForRowAtIndexPath:`

但是，这种方法有一个缺点，那就是如果有很多这些“列单元”，那么它会影响性能。您还倾向于避免在一个`UITableViewCell`

如果您想知道“为什么我不能将多个单元格添加到单行？”

好问题，原因是 UITableView 的`dequeueReusableCellWithIdentifier:`（[参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/dequeueReusableCellWithIdentifier%3a)）它采用索引路径，它是单元格所在的节号和行号的组合。

由于它只返回一个 cel，因此不可能返回多个单元格（除非您编写自定义实现），但您可以返回一个具有多个子视图且具有唯一标识符的单元格；）

1.  [UITableViewCell](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)类参考
2.  [UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/cl/UIView)类参考

编辑：danielbeard 链接的库看起来是一个很好的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T04:25:15.100

*Use your own subclass of UITableViewCell instead of UItableviewcell. And Customise your cell as you want.*

# mysql - MYSQL VARCHAR 或 CHAR 用于固定长度字符串

> ID：10526176
> 
> 赞同：11
> 
> 时间：2012-05-10T00:56:40.077
> 
> 标签：mysql, char, varchar

如果我知道存储在 MySQL 中的值总是正好是 32 个字符，那么使用列类型`CHAR`而不是更好的性能`VARCHAR`？使用 VARCHAR 和 CHAR 之间的性能差异究竟是什么？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T01:03:23.707

# 我会用`CHAR`.

如果您有可能在该列进行搜索，则`CHAR`提供了一个小的性能升级`VARCHAR`。

由于您的数据大小将被固定，因此使用 没有缺点`CHAR`，因为`VARCHAR`等效项将存储一到两个字节作为前缀。

参考：[MySQL CHAR 与 VARCHAR](http://dev.mysql.com/doc/refman/5.0/en/char.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T01:05:01.657

您的第一个问题的答案是“将列类型设置为 CHAR 而不是 VARCHAR 是否性能更好？”......是的。确实。

如果您总是知道长度将是 32，那么您绝对应该使用 CHAR。

这里也给出了几个很好的答案： [为什么我会在 SQL 中选择 CHAR 而不是 VARCHAR？](https://stackoverflow.com/questions/59667/why-would-i-ever-pick-char-over-varchar-in-sql)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T00:59:58.037

VARCHAR 列[使用一个或两个字节的前缀来存储长度](http://dev.mysql.com/doc/refman/5.0/en/char.html)：

> 与 CHAR 相比，VARCHAR 值存储为一个字节或两个字节长度的前缀加上数据。长度前缀表示值中的字节数。如果值需要不超过 255 个字节，则一列使用一个长度字节，如果值可能需要超过 255 个字节，则使用两个长度字节。

因此，一个 VARCHAR 列会稍微大一些。如果您知道它总是正好是 32 个字符，那么 CHAR 似乎是合理的。在几乎任何你不完全确定长度的情况下，我都会选择 VARCHAR。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-04T00:29:23.583

如果字符串总是 32 个字符（可能你有一个 md5 哈希）然后去 Char(32) 你总是可以对任何表运行这个脚本，看看 mysql 说什么

```
SELECT * FROM table PROCEDURE ANALYSE(); 
```

这将分析您的整个行并为您提供一些建议。仅当您的表中有一个不错的数字或行时才能正常工作。

# java - Java无界计数信号量？

> ID：10526178
> 
> 赞同：3
> 
> 时间：2012-05-10T00:56:48.380
> 
> 标签：java, multithreading, semaphore

我需要提供一种阻塞方法，直到处理完 BlockingQueue 中的所有未完成的工作。

我在想我可以用一个计数信号量来处理这个问题，它从 0 开始，随着项目添加到队列中而递减，并在它们完成时递增。finish() 只会获取信号量，再次释放它并离开。

我也许可以调用 reducePermits()。如果许可计数已经 < 0，这是否有效？它受到保护，因此我需要扩展 Semaphore 类以使其工作。

我的第二个最佳想法是循环检查队列的内容，并在检查之间休眠 100 毫秒左右。它有效，但看起来很笨拙。

这有意义吗？有人有更简单/更清洁的建议方式吗？

TIA，-蒂姆。

```
public MyClass {
  public class MySemaphore extends Semaphore {
    public void seize() {
      reducePermits(1);
    }
  }
  private MySemaphore allDone = new MySemaphore();
  void startSomething() {
    allDone.seize();
  }
  void finishSomething() {
    allDone.release();
  }
  void finish() {
    allDone.acquire();
    allDone.release();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:25:40.700

您可以通过调用来排空队列[`drainTo(collection)`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html#drainTo%28java.util.Collection%29)，然后在所有项目上调用自己的处理（可能通过 Futures 等），然后是最终处理。

# mysql - MySQL 查询 wordpress 元数据

> ID：10526187
> 
> 赞同：1
> 
> 时间：2012-05-10T00:58:12.747
> 
> 标签：mysql, wordpress

我需要一些帮助，查询应该根据他们的 wp-postratings 分数返回帖子 (http://wordpress.org/extend/plugins/wp-postratings/)。

用户选择最低评分（0 到 5 星）和最高评分（0 到 5 星），查询应返回匹配的帖子。我让它在两个值的用户输入都高于 0 的情况下工作，但我似乎无法理解 0 值。由于 0 表示未评级的帖子 - 因此也有一次没有评级元数据 - 我不仅需要选择评级不超过指定最大值的帖子，还需要选择每个没有评级元数据的帖子。

我怎样才能做到这一点？？任何帮助将不胜感激！

这是我当前的查询：

```
SELECT DISTINCT p.*, (t1.meta_value+0.00) AS ratings_average, (t2.meta_value+0.00) AS ratings_users, (t3.meta_value+0.00) AS ratings_score 
FROM wp_posts p 
INNER JOIN wp_term_relationships tr ON (p.ID = tr.object_id) 
INNER JOIN wp_term_taxonomy tt ON (tr.term_taxonomy_id = tt.term_taxonomy_id) 
INNER JOIN wp_terms t ON  t.term_id = tt.term_id
LEFT JOIN wp_postmeta AS t1 ON t1.post_id = p.ID 
LEFT JOIN wp_postmeta AS t2 ON t1.post_id = t2.post_id 
LEFT JOIN wp_postmeta AS t3 ON t3.post_id = p.ID 
WHERE t1.meta_key = 'ratings_average' 
AND t2.meta_key = 'ratings_users' 
AND t3.meta_key = 'ratings_score' 
AND p.post_date < NOW() 
AND p.post_status = 'publish' 
AND (tt.taxonomy = 'post_tag' AND tt.term_id = t.term_id AND t.slug = 'liverpool')
AND ( (t1.meta_value+0.00) IS NULL OR (t1.meta_value+0.00) <= $max_stars )
ORDER BY p.post_date DESC 
LIMIT 20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:19:07.243

不久前，我不得不做类似的事情，当时我正在运行一个 cron 作业，以将帖子发送到另一个尚未注册的应用程序。我发现最好的方法是编写一个查询，检查 ID 是否不在使用元键的帖子查询中。

```
SELECT $wpdb->posts.ID
FROM $wpdb->posts 
WHERE $wpdb->posts.post_status = 'publish'
AND $wpdb->posts.post_type = 'post'
AND $wpdb->posts.ID NOT IN (
    SELECT $wpdb->posts.ID
    FROM $wpdb->posts
    left join $wpdb->postmeta ON ($wpdb->posts.ID = $wpdb->postmeta.post_id)
    WHERE $wpdb->posts.post_status = 'publish'
    AND $wpdb->postmeta.meta_key = 'meta_key') 
```

我相信这应该可行，尽管我显然没有测试过。

```
SELECT DISTINCT p.*, (t1.meta_value+0.00) AS ratings_average, (t2.meta_value+0.00) AS ratings_users, (t3.meta_value+0.00) AS ratings_score
FROM wp_posts p
INNER JOIN wp_term_relationships tr ON (p.ID = tr.object_id)
INNER JOIN wp_term_taxonomy tt ON (tr.term_taxonomy_id = tt.term_taxonomy_id)
INNER JOIN wp_terms t ON t.term_id = tt.term_id
LEFT JOIN wp_postmeta AS t1 ON t1.post_id = p.ID
LEFT JOIN wp_postmeta AS t2 ON t1.post_id = t2.post_id
LEFT JOIN wp_postmeta AS t3 ON t3.post_id = p.ID
WHERE t1.meta_key = 'ratings_average'
AND t2.meta_key = 'ratings_users'
AND t3.meta_key = 'ratings_score'
AND p.post_date < NOW()
AND p.post_status = 'publish'
AND (tt.taxonomy = 'post_tag' 
AND tt.term_id = t.term_id 
AND t.slug = 'liverpool')
AND ( 
p.ID NOT IN (
    SELECT p.ID 
    FROM wp_posts AS p
    LEFT JOIN wp_postmeta AS pm ON (pm.post_id = p.ID)
    WHERE pm.meta_key = 'ratings_score'
)
OR 
(t1.meta_value+0.00) <= $max_stars )
ORDER BY p.post_date DESC
LIMIT 20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T21:14:35.777

好的，这个查询似乎对我有用。虽然它有点难看而且不是太快，所以如果有人有更好的，请随时改进它！

它选择所有低于 $max_stars 值的已评分帖子，然后将该表与一个单独的选择组合起来，该选择会获取所有未评分的帖子：

```
(SELECT DISTINCT p.*, (t1.meta_value+0.00) AS ratings_average, (t2.meta_value+0.00) AS ratings_users, (t3.meta_value+0.00) AS ratings_score 
FROM wp_posts p
INNER JOIN wp_term_relationships tr ON (p.ID = tr.object_id) 
INNER JOIN wp_term_taxonomy tt ON (tr.term_taxonomy_id = tt.term_taxonomy_id) 
INNER JOIN wp_terms t ON  t.term_id = tt.term_id
LEFT JOIN wp_postmeta AS t1 ON t1.post_id = p.ID 
LEFT JOIN wp_postmeta AS t2 ON t2.post_id = p.ID 
LEFT JOIN wp_postmeta AS t3 ON t3.post_id = p.ID 
WHERE t1.meta_key = 'ratings_average' 
AND t2.meta_key = 'ratings_users' 
AND t3.meta_key = 'ratings_score' 
AND p.post_date < NOW() 
AND p.post_status = 'publish' 
AND (tt.taxonomy = 'post_tag' AND tt.term_id = t.term_id AND t.slug = 'liverpool')
AND (t1.meta_value+0.00) <= $max_stars )

UNION

(SELECT DISTINCT p.*, NULL AS ratings_average, NULL AS ratings_users, NULL AS ratings_score 
FROM wp_posts p 
INNER JOIN wp_term_relationships tr ON (p.ID = tr.object_id) 
INNER JOIN wp_term_taxonomy tt ON (tr.term_taxonomy_id = tt.term_taxonomy_id) 
INNER JOIN wp_terms t ON  t.term_id = tt.term_id
LEFT JOIN wp_postmeta AS t1 ON (t1.post_id = p.ID AND t1.meta_key = 'ratings_score')
WHERE t1.post_id is null
AND p.post_date < NOW() 
AND p.post_status = 'publish' 
AND (tt.taxonomy = 'post_tag' AND tt.term_id = t.term_id AND t.slug = 'liverpool') )

ORDER BY post_date DESC 
```

# jquery - 在完整日历上发表自己的看法

> ID：10526188
> 
> 赞同：3
> 
> 时间：2012-05-10T00:58:17.143
> 
> 标签：jquery, views, fullcalendar

我想对完整的日历 jquery 脚本发表自己的看法。我看到了这些例子：[1] [2] 但我看不到在哪里以及如何为视图创建 HTML。我在谷歌、官方文档、讨论列表上搜索，但没有得到答案。

有人可以说我在完整日历上有哪些或多或少的步骤？我想要一份本周的横向清单。

[1] [http://tux.fi/~jarnok/fullcalendar/demos/resourceView.html](http://tux.fi/~jarnok/fullcalendar/demos/resourceView.html)

[2] [http://www.paulthedutchman.nl/calendar_standalone/](http://www.paulthedutchman.nl/calendar_standalone/)

谢谢大家！问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T13:08:15.220

这是扩展的 FullCalendar 代码，其中还包含资源视图：

[带资源视图的完整日历](http://www.ikelin.com/jquery-fullcalendar-resource-day-view/)

如果您下载代码并看到只有 4 个文件有细微的调整。

```
src/_loader.js
src/defaults.js
src/common/DayEventRenderer.js
src/common/SelectionManager.js 
```

实现资源视图的所有主要提升都在它自己的文件夹中（src/resource/*）。

通过研究上述文件，您可以了解[IKE LIN](http://www.ikelin.com/)如何创建资源视图以及如何创建自己的视图。

我希望这有帮助。

顺便说一句，这不是一项简单的任务。我希望你在开始之前理解。祝你好运！！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:04:07.460

您根本无法通过修改 HTML 创建新视图。您需要具备一些 javascript 技能，以确保您的视图可以正常使用 Fullcalendar。从 fullcalendar 查看我的 fork，nextWeeksView 可能是您正在寻找的： [http ://tux.fi/~jarnok/fullcalendar-resourceviews](http://tux.fi/~jarnok/fullcalendar-resourceviews)

# php - orm和pdo的区别

> ID：10526190
> 
> 赞同：25
> 
> 时间：2012-05-10T00:58:28.607
> 
> 标签：php, orm

我对 ORM 和 PDO 之间的区别有点困惑？
PDO 是一种 ORM 吗？

根据我的理解，ORM 基本上是一种数据映射，PDO 也为数据库数据提供了抽象。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-10T01:11:11.377

PDO 和 ORM 是两个完全不同的东西。

PDO 是数据库访问抽象层的特定实现，它使您能够使用跨不同数据库后端（例如 MySQL、PostgreSQL、MS SQL 等）一致的 API 连接、运行 SQL 并从数据库中检索结果。

另一方面，ORM 更专业：它是一个框架，用于将关系表映射到应用程序域对象以及它们之间的关系。这些通常建立在像 PDO 这样的 DAL 之上。

要查看差异，请考虑必须检索对象或记录。使用 PDO，您需要编写 SQL 以在正确的表中选择正确的行，并具有提取该行并将字段映射到 PHP 对象的变量的逻辑。作为用户，您必须处理所有这些。另一方面，对于 ORM，您只需说：通过此 ID 找到对象 X，然后 ORM 会发挥其魔力并为您提供该对象，而无需您自己编写 SQL。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-10T01:02:46.773

不，它们是不同的东西。

[PDO](http://www.php.net/manual/en/intro.pdo.php)是用于连接 SQL 数据库的抽象层，因此您可以使用相同的代码来处理 MySQL、PostgreSQL 等。

ORM 是将数据库实体映射到对象的概念。 [Doctrine](http://www.doctrine-project.org/projects/orm.html)是一个 PHP ORM 框架的例子，它支持各种不同的数据库连接方式，其中一种是 PDO。

# javascript - 为什么我不能编辑附加的文本区域？

> ID：10526192
> 
> 赞同：0
> 
> 时间：2012-05-10T00:58:44.840
> 
> 标签：javascript, jquery, html, css

我正在尝试将 textarea 附加到`div`. 附加文本区域后，我无法选择它开始输入，直到我调整浏览器窗口的大小。如何在第一次选择它？

```
<script>
$("#distraction-mode").click(function(e){ // Entering the distraction mode
        e.preventDefault();
    $("#wysiwyg").appendTo("#wysiwyg-fullscreen");
});
</script>

<div id="wysiwyg-fullscreen-container">
    <div id="wysiwyg-fullscreen"></div> <!-- div where textarea will be -->
</div>

<div id="wysiwyg">
    <textarea id="editor" name="editor" rows="" cols=""></textarea>
    <a href="#" id="distraction-mode">Distraction Mode</a>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T01:28:35.003

一个猜测，但你可以调用`.refresh()`你的 textarea，然后`.focus()`.

这是基于[此处的文档](http://premiumsoftware.net/cleditor/docs/GettingStarted.html)

**编辑**
您需要将编辑器设置为一个变量，以便您可以访问它并能够专门调用它的函数。在将其附加到另一个元素之后使用`refresh()`and将有望允许它调整大小并自行重置。`focus()`

它可能看起来像这样：

```
<script>
var editor = $("#editor").cleditor()[0];

$("#distraction-mode").click(function(e){
  // Entering the distraction mode
  e.preventDefault();
  $("#wysiwyg").appendTo("#wysiwyg-fullscreen");
  editor.refresh();
  editor.focus();
});
</script> 
```

# javascript - 将 JS 重新应用于动态生成的内容

> ID：10526194
> 
> 赞同：1
> 
> 时间：2012-05-10T00:58:50.937
> 
> 标签：javascript, jquery, dynamic-rebinding

将 JS 重新应用于动态生成的内容的最佳方法是什么？我说的是“重新应用 JS”而不是“重新绑定事件”，因为意思是“重新应用绑定事件并更改 dom 的 JS”，到目前为止我所做的是这样的：

```
main.js:
function repplyDynamic(){
    $('.dynamic:not(.js-initialized)').each(function(){
        $(this).addClass('js-initialized').append('<div class="chaging_dom"></div>').click(function(){
            alert("Ae!");
        });
    });
}

other_code.js
$('body').append('<div id="dynamic">content</div>'); // could be a ajax call
reapplyDynamic(); 
```

但我认为这非常混乱。你们有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:02:18.077

就我个人而言，我有一个名为的函数`dommods()`，它可以完成我需要的所有修改（工具提示、表单、自动调整文本区域大小等），并在每次对 DOM 进行重大更改后调用它。

换句话说，正是您正在做的事情，但函数名称不同。它没有错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:07:14.807

```
//main.js
function applyDynamicStuff(content){
    return content                                  //return content
        .append('<div class="chaging_dom"></div>')  //with appended element
        .click(function(){                          //with click hander
            alert("Ae!");
        });
}

//other_code.js 
var dynamicItem = $('<div>content</div>')           //the new content
applyDynamicStuff(dynamicItem).appendTo('body');    //apply Dynamic stuff and append to body 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T01:02:46.477

您可以使用[jQuery 的 $().on 方法](http://api.jquery.com/on/)将事件处理程序附加到当前或将来的 HTML 元素。

# sql-server - 由于当前安全上下文在 SQL Server 代理作业中不受信任，因此拒绝访问远程服务器

> ID：10526198
> 
> 赞同：4
> 
> 时间：2012-05-10T00:59:55.497
> 
> 标签：sql-server

我设置了一个 SQL Server 代理作业，该作业调用了一个查询。当我在 SQL Server Management Studio 中运行查询时，它工作得很好。但是当我通过作业自动调用它时，它会给出以下错误。

> 对远程服务器的访问被拒绝，因为当前的安全上下文不受信任

请帮帮我

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-13T15:47:12.080

如果这是调用链接服务器，这在类似情况下对我有用：

*   将作业的所有权授予链接服务器用户（您用于连接到其他服务器的用户）。
*   在作业中，在每个步骤中，转到“高级”选项卡并验证“以用户身份运行”字段是否为空白。
*   如果作业运行的存储过程使用“以所有者身份执行”，您也可能会收到该错误。根据您的权限设置方式，删除“以所有者身份执行”将解决此问题。

# ios - 使用backbone.js和jw播放器在单个页面上播放多个html5视频（不是同时）

> ID：10526201
> 
> 赞同：0
> 
> 时间：2012-05-10T01:00:03.030
> 
> 标签：ios, html, backbone.js, jwplayer, html5-video

我正在使用backbone.js 替换页面上的内容。在主干放置新内容后，我调用 JW Player 脚本来创建视频（Flash 普通网络，iOS 上的 HTML5 视频标签）。

当我播放一个视频时，停止该视频，使用主干替换视频，单击播放新视频......新视频只有一个微调器，不会播放。（这只发生在 iOS 设备上）

有没有人遇到过这个问题，知道可能会发生什么以及如何解决它？

此内容正在通过主干进行更新。

```
<div class="media-wrapper">
    <div class="media-holder"><div id="media"></div></div>
</div> 
```

在主干之后调用此函数并在上面的 div 上创建视频。

```
function create_video(url,w,h,thumb)
{
    jwplayer('media').setup({
        flashplayer: '/api/js/jwp/player.swf',
        skin: '/api/js/jwp/video.zip',
        wmode: 'opaque',
        image: thumb,
        file: url,
        height: h,
        width: w
    });
} 
```

我很确定它不是 JW Player，而是与 iOS 以及它如何处理 html5 视频有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:42:08.440

这是使用相同 div 并多次调用 setup 的已知错误 [1]。链接到该错误的论坛帖子有一个简单的解决方法，即每次调用 setup 时增加 div id。

[1] [http://developer.longtailvideo.com/trac/ticket/1615](http://developer.longtailvideo.com/trac/ticket/1615)

# php - 当 HTML 和 PHP 代码已完成执行但页面仍在加载时，可能是什么原因？

> ID：10526205
> 
> 赞同：0
> 
> 时间：2012-05-10T01:00:38.020
> 
> 标签：php, javascript, html

我创建了一个 HTML + PHP 简单页面，其中包含一些从谷歌提供的 javascript，如 adsense 和 google plus 按钮。

问题是页面很短。我的意思是它上面的内容不多，我很好奇为什么当页面完全加载时，一切都出现了，没有任何遗漏，但谷歌浏览器或火狐上的栏仍在加载？

我确实测试删除了广告和按钮的 javascript 并且它仍然具有相同的东西

这是正常的吗？或者我的代码有什么问题我应该看看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:03:58.247

打开开发人员工具（Chrome 中的 Ctrl-Shift-I），转到网络选项卡并加载您的页面，您将确切地看到哪个组件正在花费什么时间。

大多数聪明的附加组件/插件（如 google+、Analytics 等）会在您自己的内容完全加载时加载，因此您可能会在页面视觉完成后看到一些操作。

**编辑：** Chrome 中的开发人员工具也可以从菜单中轻松访问...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T01:03:29.240

查看[http://tools.pingdom.com/fpt/](http://tools.pingdom.com/fpt/)

它会让你知道什么还在加载。

如果什么都没有弹出，那么您的 JavaScript 可能处于无限循环中。

# php - 谷歌地图脚本的问题

> ID：10526206
> 
> 赞同：-1
> 
> 时间：2012-05-10T01:00:38.490
> 
> 标签：php, javascript, mysql, xml

我正在尝试使用以下脚本：[https ://developers.google.com/maps/articles/phpsqlajax](https://developers.google.com/maps/articles/phpsqlajax)

谷歌调用这个脚本：phpsqlajax_genxml.php

我检查了 php_domxml 扩展并重新启动了我的 wampserver。我正在运行 php 5.2.9-2。

我在名为 phpsqlajax_dbinfo.php 的脚本中为每个指令定义了 $username、$password 和 $database。

它导致错误。你知道是什么导致了这些问题吗？

警告：domnode::append_child() 期望参数 1 是对象，在第 7 行的 E:\wamp\www\phpsqlajax_genxml.php 中给出了 null

注意：使用未定义的常量 localhost - 在第 10 行的 E:\wamp\www\phpsqlajax_genxml.php 中假定为“localhost”

注意：未定义变量：第 10 行 E:\wamp\www\phpsqlajax_genxml.php 中的用户名

注意：未定义变量：第 10 行 E:\wamp\www\phpsqlajax_genxml.php 中的密码

警告：mysql_connect() [function.mysql-connect]：第 10 行 E:\wamp\www\phpsqlajax_genxml.php 中的用户 'ODBC'@'localhost' 的访问被拒绝（使用密码：NO）未连接：访问被拒绝用户'ODBC'@'localhost'（使用密码：否）`

```
 // Start XML file, create parent node
          $doc = domxml_new_doc("1.0");
          $node = $doc->create_element("markers");
          $parnode = $doc->append_child($node);

          // Opens a connection to a mySQL server
          $connection=mysql_connect ("localhost", $username, $password);
          if (!$connection) {
            die('Not connected : ' . mysql_error());
          }

          // Set the active mySQL database
          $db_selected = mysql_select_db($database, $connection);
          if (!$db_selected) {
            die ('Can\'t use db : ' . mysql_error());
          }

          // Select all the rows in the markers table
          $query = "SELECT * FROM markers WHERE 1";
          $result = mysql_query($query);
          if (!$result) {
            die('Invalid query: ' . mysql_error());
          }

          header("Content-type: text/xml");

          // Iterate through the rows, adding XML nodes for each
          while ($row = @mysql_fetch_assoc($result)){
          // ADD TO XML DOCUMENT NODE
          $node = $doc->create_element("marker");
          $newnode = $parnode->append_child($node);

          $newnode->set_attribute("name", $row['name']);
          $newnode->set_attribute("address", $row['address']);
          $newnode->set_attribute("lat", $row['lat']);
          $newnode->set_attribute("lng", $row['lng']);
          $newnode->set_attribute("type", $row['type']);
         }

         $xmlfile = $doc->dump_mem();
         echo $xmlfile;

         ?>
          ` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:34:28.973

要正确使用您在网络上找到的任何示例代码，您将始终必须在代码中定义任何未定义或示例变量。

在页面[https://developers.google.com/maps/articles/phpsqlajax](https://developers.google.com/maps/articles/phpsqlajax)上，实际上在代码开头需要一个文件。

```
require("phpsqlajax_dbinfo.php"); 
```

该文件上的代码是。

```
<?
$username="username";
$password="password";
$database="username-databaseName";
?> 
```

您必须创建该文件并为每个变量填写正确的信息。或者您可以放置​​和定义它们，而不是使用 require('file') 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:09:56.023

$username 和 $password 没有在我所看到的任何地方设置，所以在这一行上废话：

`$connection=mysql_connect ("localhost", $username, $password);`

# android - 使用按钮为字符串定义一个值

> ID：10526207
> 
> 赞同：0
> 
> 时间：2012-05-10T01:00:43.313
> 
> 标签：android, xml, button

我是 android 编程新手，我想知道是否有任何方法可以使用 main.xml 文件中的按钮，或者我是否应该继续在我的主面板中从头开始使用自定义 ui 制作我的屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:59:20.623

是的，您可以通过以下方式找到您的按钮：

```
Button btn = (Button) findViewById(R.id.button1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:06:39.500

是的，您可以获得对布局 xml 中的按钮所代表的按钮对象的引用。你可以做任何你想做的事情，包括设置监听​​器，当它被点击时会做一些事情。

# c# - “程序需要未提供的参数”我确实提供了

> ID：10526208
> 
> 赞同：0
> 
> 时间：2012-05-10T01:00:44.347
> 
> 标签：c#, sql

尝试通过存储过程更新数据库中的行时出现此错误

> 过程或函数“sp_A_Update”需要未提供的参数“@Misc”。

但我已经提供了这个：

```
command.Parameters.AddWithValue("@Misc", inspection.Misc); 
```

这是我的整个代码，其中删除了其他参数以缩短

```
using (SqlCommand command = new SqlCommand("sp_Agent_Inspection_Update", new SqlConnection (Configuration.ConnectionString)))
{
    command.CommandType = CommandType.StoredProcedure;

    PropertyInfo[] propertyInfo = inspection.GetType().GetProperties();

    command.Parameters.AddWithValue("@Misc", inspection.Misc);
    (lots of other params here...)
    command.Parameters.AddWithValue("@RepairNotes", inspection.RepairNotes);

    // OPEN CONNECTION
    command.Connection.Open();

    // EXECUTE QUERY
    int rowsAffected =  command.ExecuteNonQuery();

    command.Connection.Close();
    return Boolean.Parse(rowsAffected.ToString());
} 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:20:36.280

除了关于您正在调用的存储过程名称的明显错误之外。

> 识别和解决此问题的最简单方法是运行 SQL Profiler。在执行代码时进行跟踪，看看你传递给 SQL 的内容，你会看到它期望什么。

# python - 我可以将 .split() 与 csv.reader 一起使用吗？

> ID：10526209
> 
> 赞同：0
> 
> 时间：2012-05-10T01:00:56.687
> 
> 标签：python

我想创建一个基于 csv 第一列的字典作为键。我可以使用 .split() 来执行此操作，还是 csv.dictreader 会自动将键从第一列中取出？

```
from collections import defaultdict
import csv
import sys

#import csv file and store in dictionary
dict=defaultdict(list)
file=csv.reader(open(‘sys.argv[1]’,‘rt’))
    for f in file:
        a,b,c,d=f.split()
        dict[a].append((b,c,d))
file.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T01:40:06.253

`csv.reader`应该已经根据您指定的分隔符拆分您的行。所以是这样的：

```
csv_file = csv.reader(open(filename, "rb"), delimiter=",")
for row in csv_file:
    print row 
```

会给你这个：

```
["an element", "another element", "a third element"]
["an element", "another element", "a third element"]
["an element", "another element", "a third element"]
   .... 
```

你不应该这样做`row.split()`。

还有几件事：

1）不要覆盖python内置名称。`file`是一个内置的python（原样`dict`）。打电话给你的读者`csv_file`或其他东西（并重命名你的字典）。

2) 除非您打算`defaultdict`稍后在脚本中使用这些功能，否则您所需要的只是一个好的老常客`dict`

3）首先不需要解压`f`两次的内容。当它只需要一个时，您将其变成一个两步过程：

*实施的*

```
myDict = {}
for row in csv_file:
    myDict[row[0]] = row[1:] 
```

# iphone - 在 iPhone 上绘制很长的文本

> ID：10526211
> 
> 赞同：0
> 
> 时间：2012-05-10T01:01:10.177
> 
> 标签：iphone, objective-c, ios, uitableview, uiscrollview

目前，我`UITableViewCell's`有时会保留很长的文本（绘制后高度可达 50,000 像素）。但是[UITableView 委托文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)说单元格的高度不应高于 2009 像素（有什么想法吗？）。

它只是我的表格视图中的第一部分具有非常长的单元格，所以我想我会创建一个，而不是使用一个单元格作为第一部分，`UIScrollView`将 a`UITextView`作为第一个“单元格”并将其添加到`scrollView`, 和然后将 也添加`tableView`到滚动视图中（在 下`textView`）。但是，50,000 像素的高度`UITextView`会导致巨大的内存问题。

我有哪些选择？我知道我可以使用 a`UITextView`滚动，但是使用 a 滚动`UITextView`会`tableView`导致复杂的滚动行为。我想模仿 tableView 的滚动。

我不知道在`UIScrollView`. 我以为那`UIScrollView's`是为了什么？我有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:11:33.453

我会严重质疑 UI 设计，您必须将这么大的文本呈现为表格单元格的一部分。最好的选择是将合理大小的摘要放在一个带有 的单元格中`cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;`，为长文本构建一个单独的视图，并让用户通过单击披露指示器导航到该视图。

作为旁注，您还*可以*在初始表格单元格中放置一个滚动视图（并非所有单元格都必须属于同一类型；您可以在其中制作一个带有滚动视图的单元格，并将其用于索引为零的单元格）。不过，它不会像带有披露指示器的常规单元格那样有用。

# spring - 在拦截器托管事务期间尝试手动提交

> ID：10526213
> 
> 赞同：0
> 
> 时间：2012-05-10T01:01:15.300
> 
> 标签：spring, hibernate, transactions, interceptor

这是一种奇怪的情况，我通常不会这样做，但不幸的是，我们的系统现在需要这种情况。

**系统**
我们正在运行一个 Spring/Hibernate 应用程序，它使用 OpenSessionInView 和 TransactionInterceptor 来管理我们的事务。在大多数情况下，它工作得很好。但是，我们最近需要生成多个线程来向提供者发出一些并发 HTTP 请求。

**问题**
我们需要传递到线程中的实体来拥有我们在当前事务中更新的所有数据。问题是我们在服务层的内部深处产生了线程，并且很难进行较小的事务来允许这项工作。我们最初尝试将实体传递给线程并调用：

```
leadDao.update(lead); 
```

问题是我们得到了关于实体存在于两个会话中的错误。接下来，我们尝试提交原始事务并在线程完成后立即重新打开。这是我在这里列出的。

```
try {
        logger.info("------- BEGIN MULTITHREAD PING for leadId:" + lead.getId());
        start = new Date();
        leadDao.commitTransaction();
        List<Future<T>> futures = pool.invokeAll(buyerClientThreads, lead.getAffiliate().getPingTimeout(), TimeUnit.SECONDS);
        for (int i = 0; i < futures.size(); i++) {
            Future<T> future = futures.get(i);
            T leadStatus = null;
            try {
                leadStatus = future.get();
                if (logger.isDebugEnabled())
                    logger.debug("Retrieved results from thread buyer" + leadStatus.getLeadBuyer().getName() + " leadId:" + leadStatus.getLead().getId() + " time:" + DateUtils.formatDate(start, "HH:mm:ss"));
            } catch (CancellationException e) {
                leadStatus = extractErrorPingLeadStatus(lead, "Timeout - CancellationException", buyerClientThreads.get(i).getBuyerClient().getLeadBuyer(), buyerClientThreads.get(i).getBuyerClient().constructPingLeadStatusInstance());
                leadStatus.setTimeout(true);
                leadStatus.setResponseTime(new Date().getTime() - start.getTime());
                logger.debug("We had a ping that didn't make it in time");
            }
            if (leadStatus != null) {
                completed.add(leadStatus);
            }
        }
    } catch (InterruptedException e) {
        logger.debug("There was a problem calling the pool of pings", e);
    } catch (ExecutionException e) {
        logger.error("There was a problem calling the pool of pings", e);
    }
    leadDao.beginNewTransaction(); 
```

开始事务如下所示：

```
public void beginNewTransaction() {
    if (getCurrentSession().isConnected()) {
        logger.info("Session is not connected");
        getCurrentSession().reconnect();
        if (getCurrentSession().isConnected()) {
            logger.info("Now connected!");
        } else {
            logger.info("STill not connected---------------");
        }
    } else if (getCurrentSession().isOpen()) {
        logger.info("Session is not open");
    }
    getCurrentSession().beginTransaction();
    logger.info("BEGINNING TRANSAACTION - " + getCurrentSession().getTransaction().isActive());

} 
```

线程正在使用 TransactionTemplates，因为我的 buyClient 对象不是由 spring 管理的（长期涉及的要求）。这是该代码：

```
@SuppressWarnings("unchecked")
    private T processPing(Lead lead) {
        Date now = new Date();
        if (logger.isDebugEnabled()) {
            logger.debug("BEGIN PINGING BUYER " + getLeadBuyer().getName() + " for leadId:" + lead.getId() + " time:" + DateUtils.formatDate(now, "HH:mm:ss:Z"));
        }
        Object leadStatus = transaction(lead);
        if (logger.isDebugEnabled()) {
            logger.debug("PING COMPLETE FOR BUYER " + getLeadBuyer().getName() + " for leadId:" + lead.getId() + " time:" + DateUtils.formatDate(now, "HH:mm:ss:Z"));
        }
        return (T) leadStatus;
    }

    public T transaction(final Lead incomingLead) {
        final T pingLeadStatus = this.constructPingLeadStatusInstance();
        Lead lead = leadDao.fetchLeadById(incomingLead.getId());    
        T object = transactionTemplate.execute(new TransactionCallback<T>() {

            @Override
            public T doInTransaction(TransactionStatus status) {
                Date startTime = null, endTime = null;

                logger.info("incomingLead obfid:" + incomingLead.getObfuscatedAffiliateId() + " affiliateId:" + incomingLead.getAffiliate().getId());

                T leadStatus = null;
                if (leadStatus == null) {
                    leadStatus = filterLead(incomingLead);
                }
                if (leadStatus == null) {
                    leadStatus = pingLeadStatus;
                    leadStatus.setLead(incomingLead);
...LOTS OF CODE
}
                if (logger.isDebugEnabled())
                    logger.debug("RETURNING LEADSTATUS FOR BUYER " + getLeadBuyer().getName() + " for leadId:" + incomingLead.getId() + " time:" + DateUtils.formatDate(new Date(), "HH:mm:ss:Z"));
                return leadStatus;
            }
        });
        if (logger.isDebugEnabled()) {
            logger.debug("Transaction complete for buyer:" + getLeadBuyer().getName() + " leadId:" + incomingLead.getId() + " time:" + DateUtils.formatDate(new Date(), "HH:mm:ss:Z"));
        }

        return object;
    } 
```

然而，当我们开始我们的新事务时，我们得到这个错误：

```
org.springframework.transaction.TransactionSystemException: Could not commit Hibernate transaction; nested exception is org.hibernate.TransactionException: Transaction not successfully started
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:660)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) 
```

**我的目标** 我的目标是能够在另一侧完全初始化该实体，或者是否有人对我如何将数据提交到数据库有任何想法，以便线程可以拥有一个完全填充的对象。或者，有办法查询一个完整的对象？谢谢，我知道这真的很重要。如果我不够清楚，我很抱歉。

**我试过**
Hibernate.initialize() saveWithFlush() update(lead)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:24:53.390

我没有遵循所有内容 - 您可以尝试其中一种方法来解决您遇到的关于同一个对象与两个会话相关联的问题。

```
// do this in the main thread to detach the object 
// from the current session 
// if it has associations that also need to be handled the cascade=evict should
// be specified. Other option is to do flush & clear on the session.
session.evict(object);

// pass the object to the other thread

// in the other thread - use merge
session.merge(object) 
```

第二种方法 - 创建对象的深层副本并传递副本。如果您的实体类是可序列化的，这很容易实现 - 只需序列化对象并反序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:15:48.557

感谢@gkamal 的帮助。对于生活在后代的每个人。我的困境的答案是对 hibernateTemplate 而不是 getCurrentSession() 的剩余调用。大约一年半前我采取了行动，由于某种原因错过了一些关键的地方。这正在产生第二笔交易。之后，我能够使用@gkamal 建议并驱逐对象并再次抓取它。

这篇文章帮助我弄清楚： http:
[//forum.springsource.org/showthread.php?26782-Illegal-attempt-to-associate-a-collection-with-two-open-sessions](http://forum.springsource.org/showthread.php?26782-Illegal-attempt-to-associate-a-collection-with-two-open-sessions)

# ruby-on-rails - ActionView::MissingTemplate：缺少模板（试图呈现不存在的：移动格式）

> ID：10526214
> 
> 赞同：0
> 
> 时间：2012-05-10T01:02:02.327
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个`index.js`可以从桌面触发的地方，但是当我尝试从 Mobile Safari 打开时出现以下错误。

```
ActionView::MissingTemplate: Missing template ads/thumbs/index, application/index with {:locale=>[:es, :en], :formats=>[:mobile], :handlers=>[:erb, :builder, :haml]}. Searched in: * "/app/app/views" * "/app/vendor/bundle/ruby/1.9.1/gems/devise-1.5.2/app/views" * "/app/app/views" 
```

我不确定为什么它会`:formats=>[:mobile]`在文件夹中没有这样的文件时寻找。

尝试使用手机设备登录后也会发生同样的情况。我尝试渲染一个不存在的`create.mobile.haml`文件。

PS[有没有办法让视图在找不到时`:mobile`回退默认视图？`:html`](https://stackoverflow.com/questions/4062518/can-a-mobile-mime-type-fall-back-to-html-in-rails)那会成功的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:40:01.617

这是一个简单的解决方案。

```
class ApplicationController
    ...
    def formats=(values)
        values << :html if values == [:mobile]
        super(values)
    end
    ...
end 
```

事实证明，Rails (3.2.11) 已经为 :js 格式的请求添加了一个 :html 后备。这里是`ActionView::LookupContext#formats=`

```
# Override formats= to expand ["*/*"] values and automatically
# add :html as fallback to :js.
def formats=(values)
  if values
    values.concat(default_formats) if values.delete "*/*"
    values << :html if values == [:js]
  end
  super(values)
end 
```

因此，您可以覆盖`#formats=`自己，并且可以想象它不会比现有的 Rails 实现更加粗俗和骇人听闻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:20:19.717

通常，您应该使用特定于内容类型的视图进行响应。在这种情况下，解决这个短期问题的一个简单方法是重命名`index.js`为`index.mobile.js`.

Rails 尝试呈现特定于所请求内容类型的视图——例如，`index.html.haml`当请求 html 或`show.json.haml`请求 json 时。在这种情况下，请求的内容类型是`:mobile`。

从长远来看，您应该开发将在请求不同内容类型时发回的视图。

# c# - 使用转换器可见的标签不起作用，以另一种方式我搞砸了

> ID：10526218
> 
> 赞同：0
> 
> 时间：2012-05-10T01:02:31.367
> 
> 标签：c#, wpf

对于同一件事一次又一次地提出问题，这看起来很尴尬，也最可怕。

真的很抱歉，但我仍然无法弄清楚或没有按预期工作

在我之前的帖子中@slugster 建议使用转换器，所以使用他的代码如下

MyView.xaml

```
 <UserControl.Resources>
        <!-- Image Buttons -->
        <Converters:BooleanToVisibilityConverter x:Key="visibilityConverter"></Converters:BooleanToVisibilityConverter>
       <!--Label-->
        <Converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"></Converters:BooleanToVisibilityConverter>

 <Label Name="isImageValid"  Content="Image not Created" Margin="0,7,1,0" Style="{StaticResource LabelField}"
                Grid.ColumnSpan="2" Grid.Row="15" Width="119" Height="28" Grid.RowSpan="2"
                Grid.Column="1" IsEnabled="True" 
                Visibility="{Binding isImageValid,Converter={StaticResource BooleanToVisibilityConverter}}" /> 
```

**我的视图模型.cs**

```
private bool _isImageValid;                  
public bool IsImageValid
{
    get { return _isImageValid; }
    set 
    {
        _isImageValid = value;
        this.RaisePropertyChanged(() => this.IsImageValid);
    }
}

private void OnImageResizeCompleted(bool isSuccessful)
{
    if (isSuccessful)
    {
        this.SelectedStory.KeyframeImages = true;
        _isImageValid = false;
        // isImageValid = System.Windows.Visibility.Collapsed;
    }
    else
        this.SelectedStory.KeyframeImages = false;
} 
```

当我调试代码时，它甚至没有反映在 UI 中，当调用“OnImageResizeCompleted”方法和“_isImageValid=False”时。现在又迷路了。我知道我收到了很多负面评论，但抱歉我无法理解我自己。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:08:45.703

首先，正确的`Visibility="{Binding isImageValid...`线路。您的视图模型属性是`IsImageValid`.

其次，`OnImageResizeCompleted()`方法不会通知 UI`IsImageValid`属性更改，它只是修改属性支持字段。更改`_isImageValid = false`为`IsImageValid = false`。

# ruby-on-rails - 如何将此 Ruby 字符串转换为数组？

> ID：10526219
> 
> 赞同：5
> 
> 时间：2012-05-10T01:02:37.557
> 
> 标签：ruby-on-rails, ruby, arrays, string

将以下 Ruby 字符串转换为数组的最佳方法是什么（我使用的是 ruby​​ 1.9.2/Rails 3.0.11）

导轨控制台：

```
>Item.first.ingredients
=> "[\"Bread, whole wheat, 100%, slice\", \"Egg Substitute\", \"new, Eggs, scrambled\"]"
>Item.first.ingredients.class.name
=> "String"
>Item.first.ingredients.length
77 
```

所需的输出：

```
>Item.first.ingredients_a
["Bread, whole wheat, 100%, slice", "Egg Substitute", "new, Eggs, scrambled"]
>Item.first.ingredients_a.class.name
=> "Array
>Item.first.ingredients_a.length
=> 3 
```

如果我这样做，例如：

```
>Array(Choice.first.ingredients) 
```

我明白了：

```
=> ["[\"Bread, whole wheat, 100%, slice\", \"Egg Substitute\", \"new, Eggs, scrambled\", \"Oats, rolled, old fashioned\", \"Syrup, pancake\", \"Water, tap\", \"Oil, olive blend\", \"Spice, cinnamon, ground\", \"Seeds, sunflower, kernels, dried\", \"Flavor, vanilla extract\", \"Honey, strained/extracted\", \"Raisins, seedless\", \"Cranberries, dried, swtnd\", \"Spice, ginger, ground\", \"Flour, whole wheat\"]"] 
```

我确信必须有一些明显的方法来解决这个问题。

为清楚起见，这将在表单的 textarea 字段中进行编辑，因此应尽可能安全。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T01:50:25.727

你所拥有的看起来像 JSON，所以你可以这样做：

```
JSON.parse "[\"Bread, whole wheat, 100%, slice\", \"Egg Substitute\", \"new, Eggs, scrambled\"]"
#=> ["Bread, whole wheat, 100%, slice", "Egg Substitute", "new, Eggs, scrambled"] 
```

这避免了很多使用`eval`.

尽管您首先应该真正考虑一下为什么要这样存储数据，并考虑更改它，这样您就不必这样做了。此外，您可能应该将其解析为数组，`ingredients`以便该方法返回更有意义的内容。如果您几乎总是对方法的返回值执行相同的操作，则该方法是错误的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T01:46:31.563

```
class Item
  def ingredients_a
    ingredients.gsub(/(\[\"|\"\])/, '').split('", "')
  end
end 
```

1.  去掉多余的字符
2.  使用分隔模式拆分为数组元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T01:10:42.143

看起来该`ingredients`方法返回了`.inspect`结果返回数组的输出。这样输出不是很有用。你有能力改变它来返回一个普通的数组吗？

我*不会*做的是 use `eval`，这只会增加已经 hacky 代码的 hackiness。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T01:50:19.550

就像 Mark Thomas 所说，修改你的成分方法，除非你真的想要两个单独的方法，分别返回一个字符串和一个数组。我假设您真的只想返回一个数组。为了论证，假设您的成分方法当前返回一个名为 的变量`ingredients_string`。像这样修改你的方法：

```
def ingredients
  ...
  ingredients_array = ingredients_string.split('"')
  ingredients_array.delete_if { |element| %(", "[", "]").include? element }
  ingredients_array
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T01:11:51.317

不确定这是否起作用，但是如果您想使用数组作为属性会发生什么，您可能需要考虑序列化..

```
class Item << ActiveWhatever
  serialize :ingredients, Array

  ...
end 
```

更多关于序列化的信息在这里[http://api.rubyonrails.org/classes/ActiveRecord/Base.html](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-22T10:11:01.653

如果您的字符串数组是标准 JSON 格式，只需使用`JSON.parse()`

# c# - 实例化未知类型的传递形式

> ID：10526226
> 
> 赞同：0
> 
> 时间：2012-05-10T01:02:59.620
> 
> 标签：c#, forms, instantiation

我的应用程序中有显示绑定到 BindingSource 的 DataGrid 的表单。当我双击一行时，我会显示一个详细信息表单。

我有近 50 个这样的“浏览”表单及其随附的详细表单。我想通过创建基本浏览表单并将适当的 BindingSource 传递给它来减少表单（和代码）的数量。我有这个工作。但是，当我双击一行时，我想实例化与传递的 BindingSource 相关的详细信息表单。

例如，如果用户正在浏览 Customer 表，则将打开 Customer Detail 表单，但如果他正在浏览 Job 表，则将打开 Job Detail 表单。

我可以将通用详细信息表单作为参数传递，但是如何将该传递的表单转换为正确的类型之一，以便实例化它？

（我试图避免一个大的 switch 语句循环选择正确的传递形式。肯定有更优雅的方法来实现这一点？）

[编辑] 我的浏览表单代码是这样实例化的：

```
public BaseBrowse(BindingSource dataClass, DevExpress.XtraEditors.XtraForm crudForm)
    {
        InitializeComponent();
        bs   = dataClass;
        crud = ((CRUDEquipment)(crudForm));
    } 
```

因此，我的双击事件是：

```
 private void gvw_DoubleClick(object sender, EventArgs e)
    {
        Int32 nID = Convert.ToInt32(gvw.GetFocusedRowCellValue("ID"));
        ((CRUDEquipment)(crud)).intID = nID;
        ((CRUDEquipment)(crud)).Show();                
    } 
```

我需要一种方法来用我需要的任何形式替换“CRUDEquipment”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:53:03.420

也许其中之一会有所帮助

```
 public void Instantiate<T>()
{
    var myObject = Activator.CreateInstance<T>();
    // Do something with myObject
}

public void Instantiate(Type t)
{
    var myObject = Activator.CreateInstance(t);
    // Do something with myObject
}

public void Instantiate(string typeName)
{
    var detailType = Type.GetType(typeName);

    if (detailType == null)
    {
        throw new InvalidOperationException("Nice try, but type {0} doesn't compute :)");
    }

    var myObject = Activator.CreateInstance(detailType);
    // Do something with myObject
} 
```

# grep - GREP 如何搜索包含特定字母的单词（一次或多次）？

> ID：10526233
> 
> 赞同：3
> 
> 时间：2012-05-10T01:03:46.903
> 
> 标签：grep

我正在使用操作系统字典文件进行扫描。我正在创建一个 java 程序，以允许用户输入任何字母混合物来查找包含这些字母的单词。我将如何使用 grep 命令执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T01:12:45.623

要查找*仅*包含给定字母的单词：

```
grep -v '[^aeiou]' wordlist 
```

上面过滤掉了除了列出的`wordlist`那些之外*不*包含任何字符的行。这是一种使用双重否定来获得你想要的东西。另一种方法是：

```
grep '^[aeiou]+$' wordlist 
```

它在整行中搜索一个或多个选定字母的序列。

查找包含*所有*给定字母的单词有点冗长，因为在我们想要的字母之间可能还有其他字母：

```
cat wordlist | grep a | grep e | grep i | grep o | grep u 
```

[（是的，上面有一个没用的用法`cat`，但是这样对称性更好。）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T15:01:24.217

如果您支持 PCRE ，您可以使用单个`grep`来解决 Greg 答案中的最后一个问题。`grep`（基于[这个出色的答案](https://stackoverflow.com/questions/15393882/regex-to-match-at-least-2-digits-2-letters-in-any-order-in-a-string)，归结为一点）

```
grep -P "(?=.*a)(?=.*e)(?=.*i)(?=.*o)(?=.*u)" wordlist 
```

积极的前瞻意味着它将与任何地方的“a”和任何地方的“e”相匹配，等等。

# c++ - 开始物理模拟

> ID：10526235
> 
> 赞同：9
> 
> 时间：2012-05-10T01:04:01.630
> 
> 标签：c++, python, computer-science, physics, physics-engine

我刚刚完成了 CS282 - 计算机物理模拟的独立学习课程。这是我就读的大学第一次提供它。教科书是 Ian Millington 的“游戏物理引擎开发：如何为您的游戏构建强大的商业级物理引擎”。这本书充满了语法错误，虽然是有用的参考书，但很难编写代码。随书提供的源代码比书中说明的要完整得多，而且在破译代码方面存在一定程度的困难，尤其是出于图形目的，因为甚至没有关于如何使用引擎自己做某事的入门书，实际上在某些地方已损坏或未实现，或者如何使用 GLUT，这是本书使用的图形实用程序，并且不再开发！实际上，本书中的大部分参考资料都不是过去十年的，我想这对于教授 15 岁的代码来说还不错。虽然本文是在初学者环境中全面了解物理模拟的重要资源，但它并没有为 CS 学生介绍一个友好的沙盒来玩。

这基本上是一个实验，以找出哪些有效，哪些无效。我的教授还附上了一本关于将 ActionScript 与物理引擎结合使用的教科书，但该文本需要事先了解物理引擎的工作原理，因此出于实用性考虑，我们放弃了它。

我的问题是这样的：

我正在写一篇反思论文，我希望能够推荐这些文本的替代品，它为 CS 学生提供了一种简单的方式来进入并编写代码，并且实际上能够看到他们的成果劳动，可能与python。任何人都可以推荐一个对此有用的好的资源和/或文本吗？对于那些参加过这门课程或类似课程的人，你的经历是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:58:51.020

> 这是本书使用的图形实用程序，并且不再开发！

错误的。检查[FreeGLut](http://freeglut.sourceforge.net/)项目。

> 任何人都可以推荐一个对此有用的好的资源和/或文本吗？对于那些参加过这门课程或类似课程的人，你的经历是什么？

您可能想看看[Chris Hecker 的物理文章](http://chrishecker.com/Rigid_body_dynamics)。它们很旧，但它们很有用。

> 它没有为 CS 学生引入一个友好的沙盒来玩。

友好的沙盒意味着“无需编程”。要“玩”你可以使用现成的物理引擎（Bullet Physics（附带源代码）或 PhysX），但我怀疑它会教如何从头开始编写体面的物理模拟 - 这是一个很大的话题，并且现有引擎开发了很长时间是有原因的……

# scala - Scala 的模式匹配器执行了多少优化？

> ID：10526236
> 
> 赞同：4
> 
> 时间：2012-05-10T01:04:08.787
> 
> 标签：scala, optimization, compiler-construction

假设我有一个 Scala`match`表达式

```
foo match {
    case Bar(Some(x)) => /* do something */
    case Bar(None)    => /* do something else */
} 
```

编译器在编译表达式时做了多少优化？特别是，它会发出多次调用`Bar.unapply`，还是发出一次调用并多次匹配结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T01:06:48.493

您可以使用一些代码自行检查：

```
object Bar {
  def unapply(x: Int): Option[Option[Int]] = {
    println("Checking: " + x)
    Some(None)
  }
}

1 match {
  case Bar(Some(x)) => println("do something")
  case Bar(None)    => println("do something else")
} 
```

当你运行它时，你会得到：

```
Checking: 1
do something else 
```

因此，`Bar.unapply`即使代码看起来会有多次调用，看起来 Scala 也没有进行多次调用。`unapply`从效率的角度来看，这很好，但您可能应该避免在依赖于它们在每个匹配语句中多次调用的方法中产生副作用。

如果您担心优化何时发生并让读者清楚地知道`unapply`仅调用一次，您可以很容易地拆分匹配项：

```
1 match {
  case Bar(y) => y match {
    case Some(x) => println("do something")
    case None    => println("do something else")
  }
} 
```

# windows - 如何在 64 位 Windows 中运行旧的 x86 DOS 汇编程序？

> ID：10526237
> 
> 赞同：3
> 
> 时间：2012-05-10T01:04:21.907
> 
> 标签：windows, assembly, x86, dos

几年前，我编写了一些 x86 DOS 汇编程序来辅助批处理文件编程。程序非常小；.COM 版本中大约有两三百字节。我现在正在更新和创建这些程序的新版本；但是，.COM 或 .EXE 可执行文件不能在 64 位 Windows 版本中运行。我需要知道转换此类程序以便它们在 64 位 Windows 中运行*的最简单方法。*我知道 DosBox 可能会这样做，但我需要我的程序在 Win cmd.exe 批处理文件中运行。任何人都可以帮助我吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:19:02.327

Windows 64 位根本不允许 16 位程序。你必须找到另一种方式。

[http://msdn.microsoft.com/en-us/library/bb756962.aspx](http://msdn.microsoft.com/en-us/library/bb756962.aspx)

[https://superuser.com/a/140956](https://superuser.com/a/140956)

x86 仿真器是用 Javascript 编写的，因此仿真是可行的；但是我怀疑移植或重写程序的工作要少得多。[http://bellard.org/jslinux/](http://bellard.org/jslinux/)

# java - 如何在 JetBrains IntelliJ IDEA 中编辑注释模板并添加类型或函数注释？

> ID：10526239
> 
> 赞同：34
> 
> 时间：2012-05-10T01:04:42.037
> 
> 标签：java, templates, comments, intellij-idea

在 JetBrains IntelliJ IDEA 中，我想编辑评论，就像

```
/**
 * Created by IntelliJ IDEA.<br/>
 * User: ${USER}<br/>
 * Date: ${DATE}<br/>
 * Time: ${TIME}<br/>
 * To change this template use File | Settings | File Templates.
 */ 
```

并为类似的类型生成评论

```
public class MyUsernamePasswordAuthenticationFilter extends UsernamePasswordAuthenticationFilter 
```

或类似的功能

```
protected  void checkUsbKeyID(UserObj user,String usbKeyID) 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-10T04:59:55.927

键入您可以在菜单中编辑的评论`File -> Settings -> File Templates`。然后您查看选项卡`Includes`并编辑条目`File Header`

![在此处输入图像描述](../Images/12ce18d9db0a493d354fc8dcf2d44cd7.png)

我认为无法编辑方法注释。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-07-15T17:12:23.887

要更改类的特定模板，请编辑**类**模板。

*示例菜单位置*（在其他平台/版本上应该大致相似）

**IntelliJ 2016，Mac**

> 首选项 > 编辑器 > 文件和代码模板 > 文件选项卡 > 类项

**IntelliJ 14.x，Mac**

> 首选项 > 编辑器 > 文件和代码模板 > 模板选项卡 > 类项

看起来像这样

```
#if (${PACKAGE_NAME} && ${PACKAGE_NAME} != "")package ${PACKAGE_NAME};#end
#parse("File Header.java")
public class ${NAME} {
} 
```

生成评论的子模板的链接`#parse("File Header.java")`在第二行。

您可以删除它并在此处为内联类放置一个自定义注释模板。

**或者**

您可以在**包含选项卡下编辑****文件头**模板，该模板也被其他东西使用，然后编辑

# r - quadprog 优化

> ID：10526243
> 
> 赞同：9
> 
> 时间：2012-05-10T01:05:04.393
> 
> 标签：r, optimization, linear-algebra, mathematical-optimization, quadratic

这是一个有趣的谜题。

下面是一个[R 片段](http://comisef.wikidot.com/tutorial%3atangencyportfolio)，它标识二次函数相对于从 y 轴上的点 (0,rf) 绘制的直线的切点。

对于那些熟悉投资组合理论的人来说，这一点是收益和风险空间，解决方案是一组定义切线投资组合的权重（最大夏普比率）。该片段允许负权重（即短裤），并且有一个相等的权重约束，要求权重的总和 = 1。

```
require(quadprog)

# create artifical data
nO     <- 100     # number of observations
nA     <- 10      # number of assets
mData  <- array(rnorm(nO * nA, mean = 0.001, sd = 0.01), dim = c(nO, nA))
rf     <- 0.0001     # riskfree rate (2.5% pa)
mu     <- apply(mData, 2, mean)    # means
mu2    <- mu - rf                  # excess means

# qp
aMat  <- as.matrix(mu2)
bVec  <- 1 # set expectation of portfolio excess return to 1
zeros <- array(0, dim = c(nA,1))
solQP <- solve.QP(cov(mData), zeros, aMat, bVec, meq = 1)

# rescale variables to obtain weights
w <- as.matrix(solQP$solution/sum(solQP$solution))

# compute sharpe ratio
SR <- t(w) %*% mu2 / sqrt(t(w) %*% cov(mData) %*% w) 
```

我的问题-如何调整代码以解决最佳权重集，以使权重之和为任意数字（包括权重之和 = 0 的自筹资金投资组合的极端情况），而不是统一？

或者，您可以考虑将元素“cash”添加到方差协方差为 0 的协方差矩阵中，并添加要求现金权重 = 1 的等式约束。但是，该矩阵不是半正定的。我也怀疑非现金权重可能微不足道地为零。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T03:33:53.423

让我们首先解释为什么这实际上会产生最大的夏普比率投资组合。

我们想要`w`最大化`w' mu / sqrt( w' V w )`。但是，如果我们乘以一个数（它是“0 次齐次”），这个量是不变`w`的：因此我们可以强加`w' mu = 1`，最大化的问题`1 / sqrt( w' V w )`等同于最小化`w' V w`。最大夏普比率投资组合不是唯一的：它们形成一条线。如果我们希望权重总和为 1（或任何其他非零数），我们只需重新调整它们。

如果我们希望权重总和为 0，我们可以将该约束添加到问题中——它只起作用，因为约束也是 0 次同质的。您仍然需要重新调整权重，例如，长度为 100%并且 100% 短。

```
solQP <- solve.QP(cov(mData), zeros, 
  cbind(aMat,1), 
  c(bVec,0), 
  meq = 2
)

# Let us compare with another solver
V <- cov(mData)
library(Rsolnp)
r <- solnp(
  rep(1/length(mu), length(mu)),
  function(w) - t(w) %*% mu2 / sqrt( t(w) %*% V %*% w ),
  eqfun = function(w) sum(w),
  eqB   = 0,
  LB = rep(-1, length(mu))
)
solQP$solution / r$pars  # constant 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T03:33:19.290

查看您包含的链接。显然，调用中 , 的作用是固定`aMat`夏普比率公式中分子的值（您的回报），因此优化的重点是最小化分母。从某种意义上说，固定分子是完全合法的，就像固定投资组合的总规模一样。您的投资组合以后可以按比例放大或缩小，它将保持相同的夏普比率。为了帮助您意识到这一点，您可以针对 bVec 的任何值（允许，除零）运行上面的代码，并且您将获得相同的权重和夏普比率结果。`bVec``meq = 1``solve.QP``w``SR`

所以我觉得你可能误解了“投资组合权重”的概念。它们是代表您的投资组合构成的比率，它们的总和应为 1。一旦您已经找到了最佳权重，您就可以自由地将您的投资组合扩展到您想要的任何水平，只需乘以`w`您想要的投资组合的当前价值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-03T18:28:05.240

对于长期投资组合来说，这不是一个好的技术。即使是不能做空股票的投资组合，在按权重之和归一化后，其分配权重的符号也会错误。

这些情况伴随着负超额收益而出现。在这些情况下，强制`w'mu = 1`将解决方案置于原点的左侧（负风险）。

```
library(quadprog)
nA = 2 # two assets
mu2 = c(-.1,.1) # one negative excess return
Dmat = matrix(c(1,0,0,10),2,2)

aMat  <- as.matrix(mu2)
bVec  <- 1 # set expectation of portfolio excess return to 1
zeros <- array(0, dim = c(nA,1))
solQP <- solve.QP(Dmat, zeros, aMat, bVec, meq = 1)

rawW = solQP$solution
cat('\nraw weights ')
cat(rawW)

netW = rawW/sum(rawW)
cat('\nnormalized weights ')
cat(netW)

portfReturn = sum(netW*mu2)
cat('\nportfolio excess return ')
cat(portfReturn) 
```

# cocoa - 如何使用 NSFileManager 复制 UNIX 可执行文件？

> ID：10526244
> 
> 赞同：2
> 
> 时间：2012-05-10T01:05:13.940
> 
> 标签：cocoa, nsfilemanager

我正在尝试使用`NSFileManager` `copyItemAtURL:toURL:error:`将 UNIX 可执行文件（命令行程序）从一个目录移动到另一个目录，但我总是收到一条错误消息，指出 URL 类型不受支持。我认为这是因为文件上没有扩展名，它被视为一个目录，但我不确定。是否可以使用 移动这种类型的文件`NSFileManager`？

编辑：这是我的代码

```
#define SAVE_DIR   [@"~/Library/Prog" stringByExpandingTildeInPath]
#define PROG_PATH  [SAVE_DIR stringByAppendingString:@"/ProgCom"]
#define RESOURCES  [[NSBundle mainBundle] resourcePath]
#define LOCAL_PROG [RESOURCES stringByAppendingString:@"/ProgCom"]

-(void)moveProg
{
    NSError *error = nil;
    NSURL *fromURL = [NSURL URLWithString:LOCAL_PROG];
    NSURL *toURL = [NSURL URLWithString:PROG_PATH];

    NSLog(@"%@", [fromURL path]);
    NSLog(@"%@", [toURL path]);

    if ([fMan fileExistsAtPath:[fromURL path]]) {
        [fMan copyItemAtURL:fromURL
                      toURL:toURL
                      error:&error];
        if (error)
            [NSApp presentError:error];
    }
} 
```

我收到的错误：

`The file couldn't be opened because the specified URL type isn't supported.`

最后记录了什么：

```
fromURL = /Users/Nick/Library/Developer/Xcode/DerivedData/Prog-dpnblqaraeuecyadjgizbinfrtcm/Build/Products/Debug/Prog.app/Contents/Resources/ProgCom

toURL = /Users/Nick/Library/Prog/ProgCom 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T22:59:31.013

问题是你正在使用`+[NSURL URLWithString:]`. 这会产生一个无效的 URL，因为您实际上并没有给它一个。你想要的是`+[NSURL fileURLWithPath:]`，它将产生一个`file:///Users/Nick/...`URL。

# python - python visual studio-输出只闪烁一秒钟

> ID：10526247
> 
> 赞同：0
> 
> 时间：2012-05-10T01:05:31.690
> 
> 标签：python, visual-studio, ide

[我从http://pytools.codeplex.com/](http://pytools.codeplex.com/)安装了 Visual Studio 的 python 工具。我发现当我按 f5 或 ctrl+f5 时，命令提示符中的输出只会闪烁一秒钟，我看不清楚。有什么我必须更改的设置吗？我更喜欢python IDLE中的输出而不是命令提示符有没有办法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T23:18:24.470

The raw_input() at the end works.

# batch-file - Windows bat 中的 Findstr

> ID：10526248
> 
> 赞同：1
> 
> 时间：2012-05-10T01:05:34.670
> 
> 标签：batch-file

我使用以下命令

```
  netstat -ano -p tcp | 找到str“18812”

```

并得到这样的结果：

```
  TCP 0.0.0.0:18812 0.0.0.0:0 监听 3116
  TCP 127.0.0.1:3099 127.0.0.1:18812 已建立 5112
  TCP 127.0.0.1:18812 127.0.0.1:3099 已建立 3116

```

但是第 2 行不是我想要的，即：我想要源端口为 18812 的行，而不是 dst 端口。
任何机构都知道如何处理这个问题？非常感谢！

编辑：我尝试了正则表达式，但 "\d","+","\s" 似乎不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:40:39.827

您确定在第一部分和最后一部分使用正则表达式吗？

```
".*STRING.*" 
```

试试这个。

```
netstat -ano -p tcp | findstr  ".*:18812.*" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:41:56.617

您对 fedmich 的评论中对解决方案的一项小改进。端口 18812 可能不需要，因为最大位数是 5，并且您已经使用了所有这些。但如果您正在寻找 4 位端口（或更小），则需要确保端口号后面有一个空格。

例如，如果您正在寻找源端口 3099

```
netstat -ano -p tcp | findstr /R /C:"TCP[ ]*[0-9.]*:3099 " 
```

# ruby-on-rails - 您将如何使模型或 Resque 工作人员中的片段缓存过期？

> ID：10526250
> 
> 赞同：2
> 
> 时间：2012-05-10T01:05:44.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, sweeper

我引用了下面的引用，我可以从中看出一些意义：

“缓存的页面和片段通常取决于模型状态。缓存不关心哪些操作创建、更改或销毁相关模型。因此，使用普通观察者似乎是过期缓存的最佳选择。”

例如。我有一个更新模型的 resque worker。当模型更新/创建时，我需要一个片段缓存过期。这是扫地机做不到的。

但是，使用观察者意味着我需要在模型或 Resque 工作中使用类似的东西：

```
ActionController::Base.new.expire_fragment('foobar') 
```

模型本身不应该知道缓存。这也将打破 MVC 原则，从而导致丑陋丑陋的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T01:55:12.013

您可以通过在视图模板中将模型作为参数传递来自动过期缓存：

```
<% cache @model do %>
  # your code here
<% end %> 
```

幕后发生的事情是创建了一个名为 [model]/[id]-[updated_at] 的缓存。模型有一个方法`cache_key`，它返回一个包含模型 id 和 updated_at 时间戳的字符串。当模型更改时，片段的 updated_at 时间戳将不匹配，缓存将重新生成。

这是一种更好的方法，您不必担心后台工作人员或使控制器/观察者中的缓存过期。

Ryan Bates 也有关于该主题的付费 Railscast：[片段缓存](http://railscasts.com/episodes/90-fragment-caching-revised)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T01:29:54.020

使用[ActiveRecord::Observer](http://api.rubyonrails.org/classes/ActiveRecord/Observer.html)监视模型更改。它可以使缓存过期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T02:58:08.893

一个好的和简单的解决方案是不要过期，而是用一个如果内容不同的话也会不同的密钥来缓存它。这是一个例子

```
<% cache "post-#{@post.id}", @post.updated_at.to_i do %> 
```

当该帖子被更新或删除并且您再次获取它时，由于哈希值不同，它将错过缓存，因此它会过期并缓存新值。我认为这样做可能会遇到一些问题，例如，如果您使用的是 Rails 默认缓存，它将 html 文件创建为缓存，所以一段时间后您的公共目录中会出现很多文件，所以您最好设置您的应用程序使用 memcached 之类的东西，如果需要缓存其他人或类似的东西，它会管理删除旧缓存记录/页面/部分的内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T02:34:31.843

我建议查看Rails 指南`sweepers`中的这一部分[- 使用 Rails 缓存：概述](http://guides.rubyonrails.org/caching_with_rails.html)

[http://guides.rubyonrails.org/caching_with_rails.html#sweepers](http://guides.rubyonrails.org/caching_with_rails.html#sweepers)

看起来这可以在不专门创建大量缓存过期观察者的情况下完成。

# c# - 异步 WCF 服务的执行被阻塞

> ID：10526254
> 
> 赞同：1
> 
> 时间：2012-05-10T01:06:54.623
> 
> 标签：c#, ajax, wcf, .net-4.0, asynchronous

受[How to: Implement an Asynchronous Service Operation](http://msdn.microsoft.com/en-us/library/ms731177.aspx) and [Building Task Based WCF Services with Task Parallel Library](http://www.codeguru.com/csharp/article.php/c20141/Building-Task-Based-WCF-Services-with-Task-Parallel-Library.htm)的启发，我正在尝试使用异步执行的操作创建 WCF Web 服务。

这个想法是我有一个方法可以持续从一秒到一分钟，由网页上的按钮调用，我有一个计时器，它调用同一服务中的另一个方法，最终将返回异步操作的状态（工作与否）。

所以我设置了一个虚拟示例，我的异步操作实际上阻塞了我的 Web 服务。

```
[ServiceContract(Namespace = "")]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall, ConcurrencyMode = ConcurrencyMode.Multiple)]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Required)]
public class Service1
{
    [OperationContract(AsyncPattern = true, Action = "TestServiceMethod", Name = "TestServiceMethod", ReplyAction = "TestServiceMethodReply")]
    public IAsyncResult BeginTestServiceMethod(string request, AsyncCallback callback, object asyncState)
    {
        var task = new Task<string>((state) =>
        {
            SpinWait.SpinUntil(() => { return false; }, 5000);
            return request;
        }, asyncState);

        task.ContinueWith((t) => { callback(t); });
        task.Start();

        return task;
    }

    public string EndTestServiceMethod(IAsyncResult result)
    {
        var task = (Task<string>)result;
        return task.Result;
    }

    [OperationContract]
    public string OtherTest()
    {
        return "OtherTest";
    }
} 
```

这是我页面上的javascript（点击功能通过点击按钮激活）

```
function Click() {
    var service = new Service1();
    service.TestServiceMethod("Dummy", PopWord);
    service.OtherTest(PopWord);
}

function PopWord(word) {
    alert(word);
} 
```

结果是当我单击按钮时等待 5 秒，然后是“Dummy”和“OtherTest”一个接一个地弹出。预期的行为将是“OtherTest”在 5 秒后弹出“Dummy”。

谁能发现我做错了什么或者建议另一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:52:32.317

我猜你是在 cassini （开发服务器）上运行而不是在 IIS 上？

如果是这样，我见过不少人说 cassini 不能并行执行请求。

我似乎无法从 microsoft 找到任何关于此的文档，但是有很多关于堆栈溢出的帖子，类似于以下内容。

[ASP.NET 开发服务器并发处理不起作用](https://stackoverflow.com/questions/9036150/asp-net-development-server-concurrent-processing-doesnt-work)

[ASP.NET 开发服务器 (Cassini)、IIS Express 和多线程](https://stackoverflow.com/questions/3261144/asp-net-dev-server-cassini-iis-express-and-multiple-threads)

# shell - Applescript Shell 脚本进度

> ID：10526255
> 
> 赞同：4
> 
> 时间：2012-05-10T01:06:54.980
> 
> 标签：shell, applescript, progress

我正在创建一个applescript，它在Mac Os X 中创建/Users 文件夹的备份图像。我想做以下两件事之一：

1.  在 shell 脚本运行时显示理发杆进度条，并带有退出选项。
2.  在脚本运行时显示一个对话框，并带有退出选项。

我曾尝试使用 /dev/null 执行 shell 脚本，但这会忽略所有输出。我想保存输出并将其显示在用户的对话框中。

这是我的代码：

```
set computername to (do shell script "networksetup -getcomputername")
set fin to ""
set theIcon to note
tell application "Finder"
    try
        set folderalias to "/Users"
        set foldersize to physical size of folder (alias ":Users") --(info for folderalias) 
        set foldersize to (round ((foldersize / 1.0E+9) * 100)) / 100
    on error
        tell application "System Events"
            set foldersize to (round (((get physical size of folder ":Users" as text) / 1.0E+9) * 100)) / 100
        end tell
    end try
end tell

display dialog "User profile backup utility" & return & return & ¬
    "The computer name is: " & computername & return & return & ¬
    "The '/Users/' directory size is: " & "~" & foldersize & " GB" & return & return & ¬
    "Would you like to backup the '/User' directory now?" & return ¬
    buttons {"Cancel", "Backup Now"} default button "Backup Now"
set comd to "hdiutil create ~/Desktop/" & computername & ".dmg -srcfolder /test/"
set fin to do shell script (comd) with administrator privileges
display dialog fin 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T12:30:39.853

使用板载 AppleScript（即*Standard Additions*）无法显示进度条对话框，但这可以使用[Shane Stanley 的*ASObjC Runner*](http://www.macosxautomation.com/applescript/apps/runner.html)来实现，这是一个可编写脚本的不露面后台应用程序，它提供了许多有用的功能，一组与进度对话框相关的命令。下载到您的系统后，

```
tell application "ASObjC Runner"
    reset progress
    set properties of progress window to {button title:"Abort Backup", button visible:true, message:"Backing up the '" & (POSIX path of folderalias) & "' directory.", detail:"There are " & foldersize & " GB of data to backup – this might take some time.", indeterminate:true}
    activate
    show progress
end tell
try -- to make sure we destroy the dialog even if the script error out
    <your backup operation here>
end try   
tell application "ASObjC Runner" to hide progress 
```

将在备份操作运行时显示一个不确定的进度条（或“理发杆”）——至少如果它是同步的（就像从 AS 调用的 shell 命令一样）。至于你的 shell 命令的输出，它是由`do shell script`命令自动返回的——在你的代码中，它被分配给[从[ASObjC Runner 文档](http://www.macosxautomation.com/applescript/apps/runner_vanilla.html)`fin`中或多或少地批量提升的代码]。

*ASObjC Runner*可以嵌入到 AppleScript 应用程序中（将脚本保存为*AppleScript Editor*中的应用程序），方法是将其放入捆绑包的`Resources`文件夹（在 Finder 中，在上下文菜单中选择*Show Package Contents*）并使用[`path to resource`命令在](https://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptLangGuide/reference/ASLR_cmds.html#//apple_ref/doc/uid/TP40000983-CH216-SW20)[`using terms from`块](https://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptLangGuide/reference/ASLR_control_statements.html#//apple_ref/doc/uid/TP40000983-CH6g-SW3)内调用它– 我在上面链接的文档包含详细信息和示例代码，但至关重要的是，它包含一个严重错误：您的`tell`语句[需要使用资源包](https://developer.apple.com/library/mac/#documentation/AppleScript/Conceptual/AppleScriptLangGuide/reference/ASLR_classes.html#//apple_ref/doc/uid/TP40000983-CH1g-SW2)( `tell application (POSIX path of (path to resource "ASObjC Runner.app"))`) 的 POSIX 路径。

**关于您的代码的几点说明：**

*   有一种更优雅的方式来获取`/Users`文件夹的别名：

    ```
    path to users folder 
    ```

    – 无需硬连线和调用*Finder*。然后，您可以使用`POSIX path of`，或者，如果您需要引用它，则可以获取到它的 shell 兼容路径`quoted form of POSIX path of`。

*   我建议仅使用*系统事件*来获取`physical size`- 与*Finder*不同，它在后台工作。这将允许你摆脱`tell application "Finder"`and`try … catch`块（不确定你想通过那个来实现什么——如果你对 有反应`error -10004`，那是因为`round`不喜欢被放在一个`tell`块内）。
*   无需初始化`fin`为空字符串 - 您将从`do shell script`.
*   说到你的`do shell script`，你需要引用它的`computerName`变量，它将在该名称中的空格处中断。
*   `theIcon`从未使用过。
*   您可能希望使用`display alert`而不是`display dialog`用于用户确认，因为它很好地强调了消息的第一部分。
*   代码中有很多不必要的括号——AppleScript 需要其中一些来分隔语义命令块，但不是全部......</li>

总之，您的代码可以修改为：

```
set computerName to do shell script "networksetup -getcomputername"
set folderAlias to path to users folder
tell application "System Events" to set folderSize to physical size of folderAlias
set folderSize to round(folderSize / 1.0E+9 * 100) / 100

display alert "User profile backup utility" message ¬
  "The computer name is: " & computerName & return & return & ¬
  "The '" & (POSIX path of folderAlias) & "' directory size is: " & "~" & folderSize & " GB" & return & return & ¬
  "Would you like to backup the '" & (POSIX path of folderAlias) & "' directory now?" & return ¬
  buttons {"Cancel", "Backup Now"} default button "Backup Now"
set shellCmd to "hdiutil create ~/Desktop/'" & computerName & "'.dmg -srcfolder /test/"
-- progress bar dialog display initialization goes here
try
    set shellOutput to do shell script shellCmd with administrator privileges
end try
-- progress bar dialog hiding goes here
display dialog shellOutput 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T17:59:19.853

虽然不如 kopischke 的建议漂亮，但获取进度信息的一种快速而肮脏的方法是在终端本身中运行命令。

```
set comd to "hdiutil create -puppetstrings '~/Desktop/" & computername & ".dmg' -srcfolder '/test/'"
tell application "Terminal" to do script comd 
```

# django - Django 视图架构

> ID：10526256
> 
> 赞同：2
> 
> 时间：2012-05-10T01:06:57.200
> 
> 标签：django, django-views

我是 django 新手，对组织视图有疑问。在我的应用程序文件夹中`manage.py startapp`创建一个。`views.py`但`django-admin.py startproject <name>`不会在`<project_name>/<project_name>`文件夹中创建对应的views.py文件。

我发现拥有与特定应用程序不对应的全局视图很直观。例如，登录页面应该并且应该独立于我创建的任何应用程序（它与 django auth 应用程序相关联）。`<project_name>/<project_name>`那么，在我可以定义此类视图的文件夹中创建另一个 views.py 是否有意义？

（只是想在我继续之前由经验丰富的 djangoers 运行它。）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:49:51.380

*   您可以在任何地方编写全局视图。它可以是任何文件名（我使用，global_views.py）
*   我曾经编写一个全局来覆盖/自定义默认框架应用程序，例如自定义身份验证后端和自定义站点。
*   最好创建一个自定义应用程序并编写所有全局视图。

# css - IE 中 Nivo Slider 后面的子菜单下拉菜单

> ID：10526258
> 
> 赞同：1
> 
> 时间：2012-05-09T23:14:30.430
> 
> 标签：css, wordpress

使用名为Boldy 的wordpress 主题的网站。主菜单使用子菜单，主页使用 Nivo Slider。“服务”子菜单仅在 IE9 中隐藏在滑块下方。

我试过改变 z-index 值，但没有运气。样式表位于：[http ://debraraftery.com/wp-content/themes/boldy/style.css](http://debraraftery.com/wp-content/themes/boldy/style.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:37:04.073

只需删除 ' **?** '，第**947**行，在*style.css*文件中。

它应该工作。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T07:42:58.770

与 Beauty 模板有同样的问题，用 #header 中的 z-index:2000 解决了它

# android - Android OpenGL ES 2.0 文本渲染

> ID：10526260
> 
> 赞同：6
> 
> 时间：2012-05-10T01:07:16.307
> 
> 标签：android, opengl-es-2.0, textures, android-canvas

Web 上似乎明显缺乏对如何在 OpenGL ES 2.0 中显示文本的支持。JVitela 的答案在：[在 OpenGL ES 中绘制文本](https://stackoverflow.com/questions/1339136/draw-text-in-opengl-es-android)说要使用 Canvas，并在其上绘制文本以生成位图，然后使用 GLUtils 渲染文本位图，但答案仅显示直接关于绘制文本的部分，而不是周围还有什么。

我也一直在尝试离开[http://www.learnopengles.com](http://www.learnopengles.com)上的课程，在这种情况下，第 4 课处理基本纹理。

JVitela 的方法如何传递给顶点或片段着色器？关于背景的部分是否必要，或者将背景排除在外会导致 GL Surface 其余部分仅显示文本？`textures`他使用的变量到底是什么？我认为这是一个纹理数据句柄（将他的 bind() 与 learnopengles 的比较），但为什么是一个数组？它与其他纹理共享吗？

我有一个程序，上面已经用 OpenGL ES 2.0 显示了一堆东西，并且需要在上面打印一些基本文本（一些是静态的，一些每 1 到 5 Hz 更新一次）。我的理解是纹理映射位图字形非常昂贵。

有什么好的教程可以做我需要的吗？任何人的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:25:33.547

> JVitela 的方法如何传递给顶点或片段着色器？

它像任何其他纹理一样传递：

1.  创建纹理
2.  设置过滤和换行
3.  通过上传数据`GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);`

> 关于背景的部分是否必要，或者将背景排除在外会导致 GL Surface 其余部分仅显示文本？

没有必要（只会有一个背景），将其保留会写入黑色像素（因为代码会用黑色擦除位图像素。如果您只想绘制文本，则需要启用混合或使用一个知道文本颜色的特殊着色器。

> 他使用的纹理变量到底是什么？

它是一个`int[1]`，请参阅[GL10 上的 API 文档](http://developer.android.com/reference/javax/microedition/khronos/opengles/GL10.html#glGenTextures%28int,%20int%5b%5d,%20int%29)。

> 我认为这是一个纹理数据句柄（将他的 bind() 与 learnopengles 的比较），但为什么是一个数组？它与其他纹理共享吗？

这样，可以使用创建多个纹理句柄`glGenTextures`。

# c# - 下载文件超时

> ID：10526262
> 
> 赞同：3
> 
> 时间：2012-05-10T01:07:19.617
> 
> 标签：c#, .net, httpwebrequest

我试图从网页下载 html，但我想在 10 秒后放弃。下面的代码可以很好地下载文本，但可能需要超过 10 秒。我设置了超时，但 StreamReading 需要很长时间。在 10 秒后停止任何进一步处理同时仍关闭连接的最佳方法是什么？

如果 req.GetResponse() 花费的时间超过 10 秒，我会收到一个 WebException，但是 wr.GetResponseStream() 读取是需要时间的。我还想确保所有连接都正确关闭。

代码：

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
req.Timeout = 10000;
req.ReadWriteTimeout = 10000;

using (WebResponse wr = req.GetResponse())
{
  Console.WriteLine("A: " + DateTime.Now.ToString(" HH:mm:ss:fff"));

  using (StreamReader sr = new StreamReader(wr.GetResponseStream(), true))
  {
     Console.WriteLine("B: " + DateTime.Now.ToString(" HH:mm:ss:fff"));
     var b = sr.ReadToEnd();
     Console.WriteLine("C: " + DateTime.Now.ToString(" HH:mm:ss:fff"));
  }
} 
```

样本输出：

```
A:  20:04:36:522
B:  20:04:36:522
C:  20:04:54:337

Elapsed Time: ~18 Seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:38:33.310

时间消耗在`ReadToEnd`

利用

```
public virtual int Read(
    char[] buffer,
    int index,
    int count
) 
```

将计数设置为 4000，即使是最慢的连接也应该有足够的带宽来几乎瞬间提供 4000 个字符或 8kB。

确保在每次读取之间增加缓冲区的索引，或者您可以使用 8kB 缓冲区并在每次迭代时将其内容添加到动态缓冲区。

在检查时间的循环内使用`Read`，如果大于超时则退出，如果`Read`返回值小于计数则退出。

此外，您可能想研究异步传输，这是从网络获取数据的正确方法：[HttpWebRequest - 异步编程](http://www.matlus.com/httpwebrequest-asynchronous-programming/)

# javascript - 替换回车“ch13？” 在 Datagridview 中仅使用 javascript

> ID：10526265
> 
> 赞同：0
> 
> 时间：2012-05-10T01:07:30.333
> 
> 标签：javascript

我一直在尝试找到一种方法来用 html 中断替换回车。我认为是cr13？不完全确定。我是编程新手。我有一个内容页面。所以我在内容区域设置了javascript。我在页面中有许多其他的 javascripts。一个隐藏和显示列。所以我有办法找到列。但我想我需要找到细胞？只有一列需要这样做。我正在使用带有 vb.net 的 asp.net，导入一个 sql server 2008 db。不幸的是，这必须仅在 javascript 中完成，以避免在单击按钮时重新加载页面。

谢谢。

```
 function showComments() {
        Begincol_num = 8
        Endcol_num = 9
        Commentcol_num = 7
        rows = document.getElementById("<%=GridView1.ClientID%>").rows;
        for (i = 0; i < rows.length; i++) {

            rows[i].cells[Begincol_num].style.display = "none";
            rows[i].cells[Endcol_num].style.display = "none";
            rows[i].cells[Commentcol_num].style.display = "";

        }
    } 
```

这个想法是让js在这个函数中用br替换cr（如果可能的话）。我不知道从哪里开始在评论单元格中调用替换。目前在评论栏中有 30 个评论单元格，并且只会随着它的增长而增长。这个函数是在点击一个不打算返回服务器的按钮时调用的，这就是我说的只有js的意思。

我试图尽可能清楚。我知道 vb 和 asp，但 js 对我来说毫无意义。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:48:51.180

假设您的评论直接包含在单元格中，中间没有其他标签，您可以这样做：

```
// ...
 for (i = 0; i < rows.length; i++) {
  rows[i].cells[Begincol_num].style.display = "none";
  rows[i].cells[Endcol_num].style.display = "none";
  var commentCell = rows[i].cells[Commentcol_num];
  commentCell.style.display = "";
  commentCell.innerHTML = commentCell.innerHTML.replace("/\n/g", "<br />");
 }
// ... 
```

但是，在显示评论时做这样的事情根本不是一个干净的解决方案。您应该直接在服务器上或在加载时执行此操作。否则，如果您多次显示和隐藏评论，您将做一些不必要的工作，这可能不是性能问题，但绝对是设计问题。

毕竟，如果评论内的 HTML 标记内有换行符，则可能会出现所有问题。您可以通过使用[innerText](http://de.selfhtml.org/javascript/objekte/all.htm#inner_text)和[textContent](http://blog.coderlab.us/2005/09/22/using-the-innertext-property-with-firefox/)来防止这种情况，但这会删除任何标签。更好的解决方案是复杂的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:21:43.440

在 javascript 中，换行符由换行符“\n”表示。如果要用 a 替换新行`<br />`，请使用字符串替换功能

```
var stringWithBR = stringVarName.replace("\n", "<br />"); 
```

# ruby-on-rails - 如何更新回形针附件字段记录

> ID：10526267
> 
> 赞同：3
> 
> 时间：2012-05-10T01:07:39.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我为个人资料页面创建了一个编辑表单，其中包含名字、姓氏和照片

```
<%= form_tag "/profiles/update", :html => {:multipart => true} do%>

    <h4>First Name:</h4>
    <%= text_field_tag :first_name, @profile.first_name %>

    <h4>Last Name:</h4>
    <%= text_field_tag :last_name, @profile.last_name %>

    <h4>Photo</h4>
    <%= file_field_tag :photo %>

    <%= submit_tag "Save changes" %>

<% end %> 
```

并在我提出的更新操作中

```
@profile.update_attributes(:first_name => params[:first_name], :last_name => params[:last_name], :photo => params[:photo]) 
```

因此，当我运行编辑表单并为文件字段选择新图像然后提交时，我得到了这个错误

```
Paperclip::AdapterRegistry::NoHandlerError in ProfilesController#update
No handler found for "Pic.jpg" 
```

任何建议这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T04:35:56.763

它应该是：

```
<%= form_tag "/products/create", :multipart => true do%> 
```

现在可以正常工作了

# java - JTable ArrayIndexOutOfBoundsException

> ID：10526268
> 
> 赞同：-2
> 
> 时间：2012-05-10T01:07:46.483
> 
> 标签：java, swing, jtable

为什么以下代码会导致`java.lang.ArrayIndexOutOfBoundsException: 0 >= 0`?

```
JTable oTable = new JTable();
for (int row = 0; row < table.getRowCount(); row++) {
  for (int column = 0; column < table.getColumnCount(); column++) {
    oTable.setValueAt(table.getValueAt(row, column), row, column);
  }
} 
```

表已使用 SortKeys 进行排序。SortKeys 工作后，GUI 中的视图会更新，但基础数据（模型）没有更改。我需要更改基础模型或使用视图中的数据创建一个新表。

```
DefaultTableModel model = (DefaultTableModel) table.getModel();
TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(model);
table.setRowSorter(sorter);
List<RowSorter.SortKey> sortKeys = new ArrayList<RowSorter.SortKey>();
sortKeys.add(new RowSorter.SortKey(model.findColumn("col title"), SortOrder.DESCENDING));
sortKeys.add(new RowSorter.SortKey(model.findColumn("col title 2"), SortOrder.DESCENDING));
sortKeys.add(new RowSorter.SortKey(model.findColumn("another col title"), SortOrder.DESCENDING));
sorter.setSortKeys(sortKeys); //this should trigger a .sort() 
```

我不知道为什么模型没有更新，但它没有。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T01:14:42.923

您正在使用两个 JTable 变量 、`oTable`和`table`，并且`oTable`JTable 有 0 列和 0 行，但 table 引用的 JTable 可能没有。这将导致 Java 查找不存在的行和列。不要以这种方式混合和匹配 JTable 变量。

如果您希望表和 oTable JTables 保持相同的值，只需将模型传递过来：

```
oTable.setModel(table.getModel()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T01:15:18.213

您的 oTable 模型为空。结果，其行和/或列的索引 0 不存在，因此`ArrayIndexOutOfBoundsException: target >= size, 0 >= 0`当您尝试在该行和列设置值时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:59:32.083

我必须做的是：

```
for(int row=0; row< table.getRowCount();row++)
{
  for (int column = 0; column < table.getColumnCount(); column++) {
  rowData[column] = model.getValueAt(table.convertRowIndexToModel(row), column);
}
 data.add(row, new Vector(Arrays.asList(rowData)));
} 
```

# javascript - 有哪些免费/开源的房间规划工具可用？

> ID：10526269
> 
> 赞同：4
> 
> 时间：2012-05-10T01:07:46.910
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop, planning

我正在为一家租赁公司开展一个项目，他们希望展示一些带有家具的平面图布局，访问他们的网站的人可以四处移动。

我发现[查理的房间规划工具](http://wynchar.com/planner/index.html)还可以，但与我的想法不完全一样。

我有平面图的 JPG 图像，我想诀窍是允许将家具图像放置在这个“画布”区域的顶部并移动和旋转。

我知道 jQuery / jQueryUI 支持拖放，但我不确定我是否见过 jQuery 拖放和旋转工具。如果“jQuery 房间规划工具”已经存在，那就太好了。

有哪些免费/开源的房间规划工具可用？基于 HTML5 和 jQuery 的工具将优于 Flash 工具。

# jquery - 与 .live() 相比，是什么让 .on() 的使用效率更高？

> ID：10526273
> 
> 赞同：2
> 
> 时间：2012-05-10T01:08:54.750
> 
> 标签：jquery

我在我的网站上工作，自从我学习 jQuery 以来，我的印象是 .live() 非常有用，但是最近，这里的许多人都被推荐使用 .on()，为什么这么？是什么让 .on() 优于 .live()？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T01:12:37.057

`.live()`使用文档作为事件委托的容器。`.delegate()`，现在被取代，`.on(),`允许您选择要委托给的容器。通过选择树中较低的容器，您可以减少冒泡事件的数量，这些冒泡事件必须进行测试以查看它们是否符合委托处理的标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T01:15:47.353

使用`.live`是不好的，因为将所有`.live`事件处理程序放在文档对象上是不好的。事情可以真的，真的慢下来。不仅事件必须一直冒泡到文档，而且您可能有很多事件处理程序要查看文档对象。的主要优点`.on()`是您可以将其附加到更接近实际对象的父对象并大大提高性能。

[延伸阅读](http://www.andismith.com/blog/2011/11/on-and-off/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T01:26:24.487

有几个问题`.live()`：

首先，您使用的语法是`.live()`：

```
$(".whatever").live("click", fn); 
```

是浪费的，因为它`$(".whatever")`立即评估，但实际上并没有对初始评估做任何事情。

其次，`.live()`不灵活，并将所有委托的事件处理程序附加到`document`对象。实际上这两行代码本质上是一回事：

```
$(".whatever").live("click", fn);
$(document).on("click", ".whatever", fn); 
```

将所有委托事件处理程序附加到文档对象的问题是，每次事件冒泡到文档时，都必须与每个单独的 .live() 事件处理程序进行比较，并且一些比较运行起来并不便宜，因为它们是选择器操作。如果您有很多`.live()`事件处理程序和/或评估选择器的速度很慢，那么事件处理可能会陷入困境。

但是，使用`.on()`，您可以选择更接近您正在处理事件的动态对象的静态父对象。这将事件处理程序列表分解为更小的列表，并且只需检查更小的列表中的事件数量。因此，而不是这些大致等效的代码行：

```
$(".whatever").live("click", fn);
$(document).on("click", ".whatever", fn); 
```

你可以使用这样的东西`.on()`：

```
$("immediate parent selector").on("click", ".whatever", fn); 
```

它将实际委托的事件处理程序附加到动态对象的近亲，从而使事件处理更加高效。事件不仅不必一直冒泡到文档对象，而且每个事件发生时要比较的选择器/对象列表要小得多。

您可能要注意，`.on()`它与`.delegate()`. 唯一的区别在于参数的顺序。事实上，在jQuery的内部实现中，它们都调用了相同的函数，并且都具有相同的核心实现。

# c# - 如何获取开头加载的命名空间的名称

> ID：10526278
> 
> 赞同：2
> 
> 时间：2012-05-10T01:10:21.873
> 
> 标签：c#, namespaces

如何获取在 C# 文件开头加载的命名空间的名称？例如，获取下面的六个命名空间名称。

```
using System;
using System.CodeDom;
using System.CodeDom.Compiler;
using Microsoft.CSharp;
using System.Text;
using System.Reflection;

namespace MyNM
{
    class MyClass{}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:14:24.420

这将返回已执行程序集的所有程序集引用。

尽管如此，这不会只返回特定文件中使用的命名空间——这在运行时是不可能的。

```
var asms = Assembly.GetExecutingAssembly().GetReferencedAssemblies();

foreach (var referencedAssembly in asms)
{
    Console.WriteLine(referencedAssembly.Name);
} 
```

虽然，从技术上讲，如果您知道包含当前代码的文件的名称，您可以在运行时读取该文件并提取“使用”。

**编辑**

这样做的方法是：

```
public static IEnumerable<string> GetUsings()
{
    // Gets the file name of the caller
    var fileName = new StackTrace(true).GetFrame(1).GetFileName();

    // Get the "using" lines and extract and full namespace
    return File.ReadAllLines(fileName)
               .Select(line => Regex.Match(line, "^\\s*using ([^;]*)"))
               .Where(match => match.Success)
               .Select(match => match.Groups[1].Value);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T01:15:15.543

> 如何获取在 C# 文件开头加载的命名空间的名称？例如，获取下面的六个命名空间名称。

除了自己解析文件（或使用 Roslyn CTP 之类的东西来解析 C# 文件）之外，您不能这样做。

命名空间不是“加载”的——它们仅由编译器在编译时使用，以解析适当的类型名称。

您可以使用[Assembly.GetReferencedAssemblies](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getreferencedassemblies.aspx)来获取程序*集*（即：项目）引用的程序集，但这是一个程序集范围的引用集，与使用特定*文件*中包含的指令的命名空间明显不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T17:48:48.473

您必须解析文件以派生语法元素。如上所述，您可以使用 System.Reflections 作为外部引用，也可以使用新的[Roslyn 编译器服务](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)，如下所示

```
string codeSnippet = @"using System;
using System.CodeDom;
using System.CodeDom.Compiler;
using Microsoft.CSharp;
using System.Text;
using System.Reflection;

namespace MyNM
{
    class MyClass{}
}";
            //APPROACH:
            //Get using statements in the code snippet from the syntax tree
            //find qualified name(eg:System.Text..) in the using directive 

            SyntaxTree tree = SyntaxTree.ParseCompilationUnit(codeSnippet);
            SyntaxNode root = tree.GetRoot();
            IEnumerable<UsingDirectiveSyntax> usingDirectives = root.DescendantNodes().OfType<UsingDirectiveSyntax>();
            foreach(UsingDirectiveSyntax usingDirective in usingDirectives){
                NameSyntax ns = usingDirective.Name;
                Console.WriteLine(ns.GetText());
            } 
```

注意：代码使用旧版本的 Roslyn API。由于 Roslyn 仍然是 CTP，因此它可能会在未来中断。

# magento - Magento 未使用适当的 URL - 404 未找到页面

> ID：10526279
> 
> 赞同：2
> 
> 时间：2012-05-10T01:10:31.020
> 
> 标签：magento, wamp

我有一个使用 WAMP 在本地运行的 magento 站点，它运行良好。但是我需要创建一个不同的站点，所以我在 htdocs 下为这个新站点创建了一个文件夹。

在那个文件夹中，我加载了 Magento 文件。在 phpmyadmin 中为 newsite 创建了一个具有所有权限的新数据库。前往 localhost:8888/newsite 并启动 Magento 安装向导。在向导的配置部分，我输入了所需的所有信息：数据库名称、用户、密码。对于 URL Base，我使用了默认值 (http://localhost:8888/newsite)。选择允许图表和允许 apache 重写。完成安装magento。

现在magento 正在newsite 上运行。我可以看到网站的前端和后端。

这是问题所在：当我创建一个类别和/或子类别时，magento 确实会创建菜单链接，但是当我单击任何类别时，浏览器会将我带到**404 not found**。在分析带我到那里的 URL 后，我看到 URL 是： [http://localhost:8888/newsite/category.html](http://localhost:8888/newsite/category.html) 但是通过在 URL 中添加“ **index.php** ”（http://localhost:8888/newsite/ **index.php** /category.html ，该页面确实有效！所以这意味着 magento**正在**为该类别创建页面，但链接有些错误。

现在，我一直在确保重写已启用，毕竟，我提到的另一个站点工作正常，所以我假设重写已正确启用。

所以我需要帮助找到：

为什么一个站点工作而另一个站点不工作？我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:16:03.440

听起来您还没有复制 .htaccess 文件（在您的 Magento 根文件夹中）。您需要此文件才能使 Apache 重写工作。

# c# - 访问数据库 C# 的动态对象

> ID：10526282
> 
> 赞同：1
> 
> 时间：2012-05-10T01:10:43.797
> 
> 标签：c#, dynamic

我可以使用动态 C# 对象来访问数据库值吗？例如，如果我有一个具有不同值的表名设置，我可以简单地从代码 Settings.SomeSetting 中调用，而不是对它们全部进行编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:15:12.347

您还可以使用 C# ORM 来执行您正在尝试执行的操作。

[Dapper.Net](http://code.google.com/p/dapper-dot-net/) - 一个简单的 C# ORM。
[NHibernate](http://nhforge.org/Default.aspx) - 一个成熟的 ORM 已经存在了一段时间。

我两者都没有经验，但听起来都像是您想要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:13:11.923

这是一篇[博客文章，展示了一种使用动态包装器进行 ADO.NET 数据访问的技术](http://blogs.msdn.com/b/davidebb/archive/2009/10/29/using-c-dynamic-to-simplify-ado-net-use.aspx)。这应该适用于针对 Access 数据库（以及任何其他 ADO.NET 数据源）运行的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T01:13:13.090

是的你可以。

也许你以后会发疯，但你可以。此外，如果您想以反射方式访问数据而不进行编译检查，您可以只使用 DataSets。它们很烂，但是... 你要重新发明轮毂了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T02:20:19.307

看看[Simple.Data](https://github.com/markrendle/Simple.Data)。这听起来像你在找什么。

# xaml - ResourceDictionary 中的样式阻止了所有其他功能

> ID：10526283
> 
> 赞同：0
> 
> 时间：2012-05-10T01:11:01.130
> 
> 标签：xaml, windows-phone-7.1

**更新**：我将 TextBox 的样式移到 phone:PhoneApplicationPage.Resources 标记，它的行为方式完全相同，所以事实证明，我使用 ResourceDictionary 不是导致问题的原因，而是有问题我定义风格的方式。

我刚开始玩 ResourceDictionaries，我真的很喜欢它们，但是当我尝试在我的应用程序上使用它们时，一切都停止了工作。

首先是以下文本框：

```
<TextBox Grid.Column="1" 
  Grid.Row="0"
  x:Name="Value" 
  InputScope="Number"
  TextAlignment="Right"
  TextChanged="OnValueTextChanged">
  <TextBox.Style>
      <StaticResource ResourceKey="InputTextBox" />
  </TextBox.Style>
 </TextBox> 
```

**更新**：我已经根据 XAMeLi 的回答更新了 ResourceDictionary，现在我看到了边框，但看起来 TextBox 没有任何背景，但是当我点击它时，没有任何反应，就好像 TextBox 甚至不存在一样。然后幸运的是，我注意到如果我单击底部边框，数字键盘会弹出，好像 TextBox 太小或隐藏在边框元素下方。我尝试修改 TextBox 高度无济于事。这真让我抓狂。

那么 ListPickers 就更糟了：

```
<toolkit:ListPicker 
  Grid.Column="0" 
  Grid.ColumnSpan="2" 
  Grid.Row="1"
   x:Name="CategoriesPicker"
   HeaderTemplate="{StaticResource ListPickerHeaderTemplate}"
   FullModeItemTemplate="{StaticResource CategoriesPickerTemplate}"
   ExpansionMode="FullScreenOnly"
   BorderThickness="0"
   Padding="0"
   Margin="0"
   SelectionChanged="OnCategoriesPickerSelectionChanged">
   <toolkit:ListPicker.Style>
      <StaticResource ResourceKey="ListPickersStyle"/>
   </toolkit:ListPicker.Style>
</toolkit:ListPicker> 
```

当样式在其中时，它甚至不会绑定我提供给它的数据。

带有 ResourceDictionary 的文件如下所示：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit">
    <Style x:Name="InputTextBox" TargetType="TextBox">
    <Setter Property="BorderThickness" Value="0"/>
    <Setter Property="Margin" Value="-12"/>
    <Setter Property="Height" Value="50"/>
    <Setter Property="Background">
        <Setter.Value>
            <LinearGradientBrush StartPoint="0 0" EndPoint="0 1">
                <GradientStop Color="DarkGray" Offset="0"/>
                <GradientStop Color="DarkGray" Offset=".3"/>
                <GradientStop Color="LightSlateGray" Offset="1"/>
            </LinearGradientBrush>
        </Setter.Value>
    </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Border
                            BorderThickness="2"   
                            Margin="15"
                            CornerRadius="3">
                        <Border.BorderBrush>
                            <LinearGradientBrush StartPoint="0 0" EndPoint="0 1">
                                <GradientStop Offset="0" Color="DarkGray"></GradientStop>
                                <GradientStop Offset="0.3" Color="DarkGray"></GradientStop>
                                <GradientStop Offset="1" Color="LightSlateGray"></GradientStop>
                            </LinearGradientBrush>
                        </Border.BorderBrush>
                        <Border
                            BorderThickness="2"
                            CornerRadius="3">
                            <Border.BorderBrush>
                                <LinearGradientBrush StartPoint="1 1" EndPoint="1 0">
                                    <GradientStop Offset="1" Color="Gray"></GradientStop>
                                    <GradientStop Offset="0.3" Color="DarkGray"></GradientStop>
                                    <GradientStop Offset="0" Color="DarkGray"></GradientStop>
                                </LinearGradientBrush>
                            </Border.BorderBrush>

                        </Border>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Name="ListPickersStyle" TargetType="toolkit:ListPicker">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="toolkit:ListPicker">
                    <Border 
                        BorderThickness="2"
                        Padding="0"
                        Margin="10"                        
                        CornerRadius="3"
                        Background="DarkGray">
                        <Border.BorderBrush>
                            <LinearGradientBrush StartPoint="0 0" EndPoint="0 1">
                                <GradientStop Offset="0" Color="DarkGray"></GradientStop>
                                <GradientStop Offset="0.3" Color="DarkGray"></GradientStop>
                                <GradientStop Offset="1" Color="LightSlateGray"></GradientStop>
                            </LinearGradientBrush>
                        </Border.BorderBrush>
                        <Border BorderThickness="2"
                            CornerRadius="3">
                            <Border.BorderBrush>
                                <LinearGradientBrush StartPoint="1 1" EndPoint="1 0">
                                    <GradientStop Offset="1" Color="Gray"></GradientStop>
                                    <GradientStop Offset="0.3" Color="DarkGray"></GradientStop>
                                    <GradientStop Offset="0" Color="DarkGray"></GradientStop>
                                </LinearGradientBrush>
                            </Border.BorderBrush>
                            <toolkit:ListPicker
                                BorderThickness="0"
                                Padding="0"
                                Margin="0">
                                <toolkit:ListPicker.Background>
                                    <LinearGradientBrush StartPoint="0 0" EndPoint="0 1">
                                        <GradientStop Offset="0" Color="DarkGray"></GradientStop>
                                        <GradientStop Offset="0.5" Color="DarkGray"></GradientStop>
                                        <GradientStop Offset="1" Color="LightSlateGray"></GradientStop>
                                    </LinearGradientBrush>
                                </toolkit:ListPicker.Background>
                            </toolkit:ListPicker>
                        </Border>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

请有人向我解释我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:15:00.997

在你`ControlTemplate`的 s 里面有它们自己的控件，即文本框的控件模板包含一个`TextBox`. 这不是控件模板的使用方式。使用 Blend 或 VS11 为每个控件提取默认样式（我建议在新的干净解决方案中进行），然后更改视觉外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:18:02.867

您应该能够像任何其他属性一样引用样式，例如：

```
<TextBox Style="{StaticResource InputTextBox}"/> 
```

并尝试先设置您的样式，然后再设置您想要覆盖的任何设置，例如：

```
<TextBox Style="{StaticResource InputTextBox}" TextAlignment="Right" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:43:01.373

您应该使用[x:Key](http://msdn.microsoft.com/en-us/library/cc189012%28v=vs.95%29.aspx)而不是`x:Name`in `ResourceDictionary`：

> x:Key 和 x:Name 不是相同的概念。x:Key 专门用于资源字典。x:Name 用于 XAML 的所有区域。使用键值的 FindName 调用不会检索键控资源。但是，如果资源项上不存在 x:Key，Silverlight 5 可以使用 x:Name（或 Name）属性作为资源项的替代资源键。

并且一旦 Windows Phone 远离 Silverlight 5，您就不能在字典中使用 x:Name。

# javascript - Javascript 数组中的动态连接

> ID：10526290
> 
> 赞同：0
> 
> 时间：2012-05-10T01:11:52.747
> 
> 标签：javascript, arrays, dynamic, concatenation

假设我有一个数据数组和一个变量（或多个变量）

```
var i = 1;
var arr = {
        1: ['whatever' + i,'there are ' + i + ' dogs in the yard.', etc], 
    } 
```

有没有办法稍后在函数中动态更新数组中的变量？

所以

```
function start() {
i++;
alert(arr[1][0]);
} 
```

将输出“whatever2”而不是“whatever1”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T01:14:20.107

你可以有一个数组和`push()`你需要的东西，但是当字符串被创建时，它不会再改变了。

```
var array = ['whatever',i,'there are ',i,' dogs in the yard.'];
array.push('more stuff');
array.push('even more stuff');
var string = array.join('')
//string = 'whatever[whatever "i" is during join]there are[whatever "i" is during join]dogs in the yard.more stuffeven more stuff' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T01:17:36.410

试试这个代码：

```
var arr = function(i){
    return {
        1: ['whatever' + i,'there are ' + i + ' dogs in the yard.', etc],
    }
}
var anyNumber = 1;
var updatedVar = arr(anyNumber); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T02:01:43.160

您可以改用函数：

```
var i = 1;
var arr = {
    1: [
        function() { return 'whatever' + i },
        function() { return 'there are ' + i + ' dogs in the yard.' },
        function() { return 'etc' }
    ], 
}: 
```

这会将您的电话更改为：

```
function start() {
    i++;
    alert(arr[1][0]());
} 
```

# javascript - 让 swipeJS 使用 ajax 加载的内容

> ID：10526293
> 
> 赞同：0
> 
> 时间：2012-05-10T01:12:12.963
> 
> 标签：javascript, ajax

我正在创建一个当前正在[test2.applicationcreations.net](http://test2.applicationcreations.net)测试的站点。具有动态更改图像的图像库。我正在为滑块使用[swipeJS](http://swipejs.com)。

当您导航到项目库然后到自定义主页时，会加载具有正确格式的新 HTML，但旋转器不起作用。我认为问题在于 swipeJS 没有在新代码上初始化。我尝试使用将新项目传递给对象，`window.mySwipe = new Swipe(document.getElementById('slider'));`但我没有运气。

出于某种原因，如果我在 Chrome 18 OS X 上单击检查元素，则旋转器可以处理新内容。

非常感谢任何帮助使这项工作正常进行。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:39:12.717

Yup, you got it right, once you have added the new element, all you need to do is reinitialize the mySwipe object.

This is the first initialization of the swipe slider object:

```
/*----------------------------------------
  Swipe slider to enable touch sliding
----------------------------------------*/
document.mySwipe = new Swipe(document.getElementById('slider'), {
  startSlide: 0,
  speed: 400,
  auto: 5000,
  callback: function(event, index, elem) {
    // do something cool
  }
}); 
```

Now just define a method which re-initializes the swipe object.

```
/*----------------------------------------
  Reinitializing the Swipe Slider.
----------------------------------------*/
document.reinit = function(){
  document.mySwipe = new Swipe(document.getElementById('slider'), {
    startSlide: 0,
    speed: 400,
    auto: 5000,
    callback: function(event, index, elem) {
      // do something cool
    }
  });
} 
```

Call that method when you have finished adding new elements to the existing slider.

```
// Finished adding new elements
document.reinit(); 
```

# image-processing - ImageMagick 忽略我的 alpha 通道并降低位深度

> ID：10526295
> 
> 赞同：0
> 
> 时间：2012-05-10T01:12:35.043
> 
> 标签：image-processing, imagemagick, transparency

这是我正在处理的图像：

![在此处输入图像描述](../Images/eb8059a04b32c4601afea747229ce22f.png)

这是 MS_DOS 命令行：

转换“IM_Effect_Smoke_problem.png”-背景透明-裁剪 64x64+0+64！“IM_Effect_Smoke_problem_crop.png”

问题在于 ImageMagick 将颜色深度降低到 8 位，并忽略或破坏了 alpha 通道。

谁能告诉我如何解决这个问题？谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:05:16.607

在 Ubuntu 上使用 ImageMagick 6.6.9-7 测试该命令会保留 alpha 通道。如果您确定已删除 alpha 通道，则问题可能出在您使用的 ImageMagick 版本上。

# python - 为什么我的递归函数出错了？

> ID：10526300
> 
> 赞同：0
> 
> 时间：2012-05-10T01:12:56.917
> 
> 标签：python, recursion

我需要编写一个递归函数 ，它返回正整数`dec2base(n, b)`中的基数列表。例如。`b``n`

```
dec2base(120, 10) => [1,2,0] (1 * 10**2 + 2 * 10**1 + 0 * 10**0) 
```

目前我有。

```
def dec2base(n, b):
    if n < 10:
        return [n]
    else:
        return dec2base(n, b) + [n%b] 
```

但是当我运行程序时，它会返回一个无限循环错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T01:18:13.173

您不会在方法中的任何时候递减 n 的值，因此如果您从 n >=10 的任何值开始，则循环永远不会结束。

另一个观察结果 - 如果 b 不等于 10，“如果 n < 10 返回 [n]”的逻辑似乎没有意义。例如，9 < 10，但我假设 dec2base(9,2) 的值不会是 [9]。它将是 [1,0,0,1]。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T01:23:41.967

好的，在任何递归函数中，必须有一些函数变为零才能停止。在这种情况下，您想要的是真正模拟您手动执行的方式：

*   除以基数（基数）
*   将剩余部分作为数字放入
*   recur 使用相同的基数，但除法的另一部分。（商。）

也就是说，如果您要找到 1000 的十六进制值，则取

dec2base(1000,16):

*   如果第一个参数== 0，返回，你就完成了
*   1000 mod 16 (=8) -> 保存 8
*   dec2base(62, 16) -> 递归步骤

现在，很明显，每次你进行recusion step，第一个参数都会变小，如果你仔细想想，它最终*必须*变为0。所以最终它会终止。

这是 Python 中一个真正简单的版本：

```
result = ""

def dec2base(n,b):
    global result
    if n <= 0: return
    result = str(n % b) + result # why am I prepending it?
    dec2base( n // b, b)

if __name__ == '__main__':
    dec2base(1000,8)
    print result 
```

现在，如果基数大于 9（比如 16），则需要将值从 10 转换为 15 到 alpha af，这故意不是很优雅，因为我希望它像示例一样布局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T01:44:50.593

您的解决方案中只有几个小错误。

```
def dec2base(n, b):
    if n < b:                            # so it will work for bases other than 10
        return [n]
    else:
        return dec2base(n//b, b) + [n%b] # you're just missing "//b"  here 
```

您可以像这样稍微简化它

```
def dec2base(n, b):
    if not n:
        return []
    return dec2base(n//b, b) + [n%b] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T01:16:15.000

`dec2base(n, b)`你对无限的呼唤。如果你打电话

```
dec2base(20, b) 
```

您的函数将继续执行 if/else 语句的第二个分支。您需要将减少的值传递给递归函数调用，以便最终`n < 10`评估为 True。

# actionscript-3 - 全局类的正确面向对象结构

> ID：10526301
> 
> 赞同：2
> 
> 时间：2012-05-10T01:12:57.320
> 
> 标签：actionscript-3, oop, design-patterns, singleton, audio

使用单例类进行声音管理的优缺点是什么？

我担心它在结构上是非常反 OOP 的，并且不想潜在地陷入错误的道路，但有什么更好的选择呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:32:47.050

这是一个尴尬的话题，但我会说声音管理器样式类是不应该初始化的类的良好候选者。

同样，如果键盘输入管理器样式类是一个完全静态的类，我会觉得没问题。

我的推理的一些注意事项：

*   您不会期望有多个实例可以处理所有声音。
*   它很容易访问，在这种情况下这是一件好事，因为声音看起来更像是一个应用程序级别的实用程序，而不是只能由某些对象访问的东西。例如，将游戏的 Player 类设为静态将是一个非常糟糕的设计选择，因为游戏中几乎没有其他类需要直接引用 Player。
*   例如，在游戏的上下文中，想象一下需要引用声音管理器实例的类的数量；敌人、效果、物品、用户界面、环境。真是一场噩梦——拥有一个静态声音管理器类消除了这个要求。
*   我能想到的情况并不多，在什么情况下访问声音根本没有意义。几乎任何东西都可以触发声音 - 鼠标的移动、爆炸效果、对话的加载等。静态类与应用程序中的大多数其他类几乎没有相关性或用途时是不好的- 声音。

无论如何; 这是我的观点，以抵消可能出现在这里的相反答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:51:33.873

它们之所以不好，是因为与全局变量不好的原因相同，一些有用的阅读：

[http://blogs.msdn.com/b/scottdensmore/archive/2004/05/25/140827.aspx](http://blogs.msdn.com/b/scottdensmore/archive/2004/05/25/140827.aspx)

更好的选择是将它作为应用程序类的成员，并将它的引用传递给只需要处理声音的模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T05:45:37.573

“经理”通常是性质非常复杂的类，因此可能违反[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。套用鲍勃·马丁叔叔的话说：**任何时候你觉得自己很想把某个类称为“经理”类——这就是代码的味道。**

就您而言，您至少要承担三个不同的职责：

1.  加载和存储声音。
2.  需要时播放声音。
3.  控制输出参数，例如音量和声像。

其中，两个可能被实现为单例，但你应该始终非常小心这种模式，因为[它本身就违反了 SRP](http://butunclebob.com/ArticleS.UncleBob.SingletonVsJustCreateOne)，如果使用错误的方式，它会导致你的代码紧密耦合（相反，你应该使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)模式，*可能*通过框架，例如[SwiftSuspenders](http://www.swiftsuspenders.org/)，但[不一定](http://blog.objectmentor.com/articles/2010/01/17/dependency-injection-inversion)）：

*   **加载和存储**声音本质上是一项严格的数据相关任务，因此应该由 处理，`SoundModel`每个应用程序只需要一个实例。
*   **控制**输出参数是您可能希望在中央位置处理的事情，以便能够更改全局音量设置等。这*可以*实现为单例，但更可能是树状结构，其中主`SoundController`处理全局settings，还有几个child`SoundControllers`负责更具体的上下文，比如UI音效、游戏音效、音乐等。

**播放**声音会在很多地方以多种不同的方式发生：可能有循环（您需要保留对它的引用以便以后能够停止它们），或效果声音（通常很短并且可以播放）只有一次），或音乐（每首歌曲通常播放一次，但需要在到达结尾时自动开始后续歌曲）。对于这些变体中的每一个（以及您想出的任何变体），您都应该创建一个不同的类，该类实现一个通用`SoundPlayer`接口，例如`LoopSoundPlayerImpl`, `SequentialSoundPlayerImpl`,`EFXSoundPlayerImpl`等。接口应该像`play()`, `pause()`,一样简单`rewind()`- 您以后可以轻松地交换它们，并且对于紧密耦合的库不会有任何问题。

Each `SoundPlayer` can hold a reference to both the master `SoundController` an its content-specific one, as well as - possibly - the `SoundModel`. *These, then can be static references*: Since they are all parts of your own *sound plugin*, they will usually be deployed as a package, and therefore tight coupling won't do much damage here - it is important, though, not to cross the boundary of the plugin: Instantiate everything within your `Main` partition, and pass on the instances to all classes, which need them; only have the `SoundPlayer` interface show up within your game logic, etc.

# cakephp - $virtualFields, CakePHP, 获取变量

> ID：10526304
> 
> 赞同：0
> 
> 时间：2012-05-10T01:13:35.130
> 
> 标签：cakephp

我的模型中有这个：

```
public $virtualFields = array(
        'distance' => '( 3959 * acos( cos( radians(40.722803) ) * cos( radians( Note.latitude ) ) * cos( radians( Note.longitude ) - radians(-73.591082) ) + sin( radians(40.722803) ) * sin( radians( Note.latitude ) ) ) )'
    ); 
```

在我的控制器中：

```
$data = $this->Note->find('all', array('fields' => array('distance'), 'conditions' => array('distance <' => 1))); 
```

这很好用.. 但现在我想将我的 get 变量 $lat 和 $lng 从我的控制器传递到虚拟字段中的正确区域。我认为这将是直截了当的，但我无法弄清楚！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T01:29:16.223

据我所知，虚拟字段并不是为了处理这个问题而设计的，因为从数据库的角度来看，您的变量实际上是常量。

我不确定这是否有效，但您可以在调用之前尝试重新定义虚拟字段`Model::find`：

```
// Controller code
$this->Note->virtualFields = array(
    'distance' => "( 3959 * acos( cos( radians($lat) ) * cos( radians( Note.latitude ) ) * cos( radians( Note.longitude ) - radians($lng) ) + sin( radians($lat) ) * sin( radians( Note.latitude ) ) ) )"
);
$data = $this->Note->find('all', array('fields' => array('distance'), 'conditions' => array('distance <' => 1))); 
```

如果它有效，您可能需要创建一个模型方法来做到这一点，而不是污染控制器......

# powershell - 通过命令行启用 Powershell 组策略异常

> ID：10526306
> 
> 赞同：2
> 
> 时间：2012-05-10T01:13:49.200
> 
> 标签：powershell, powershell-2.0, powershell-remoting, ssp

我正在尝试找到一种通过命令行更改本地组策略的方法。更改是在Computer-> Admin Template -> System -> Cred中设置Local Policy以启用“Allow Delegating Fresh Credentials”并设置为“wsman/*.domain.net”。

这里的限制是我被禁止安装其他 cmdlet。

更大的目标是为 PsSession 启用 CredSSP 身份验证。其他先决条件是通过 PsExec 完成的。

```
enable-psremoting or winrm quickconfig
Enable-WSManCredSSP client *.domain.net
Enable-WSManCredSSP -Role server 
```

参考错误： *[TESTSERVER001] 连接到远程服务器失败并显示以下错误消息：WinRM 客户端无法处理该请求。计算机策略不允许将用户凭据委派给目标计算机。使用 gpedit。msc 并查看以下策略：计算机配置 -> 管理模板 -> 系统 -> 凭据委派 -> 允许委派新凭据。验证它是否已启用并使用适合目标计算机的 SPN 进行配置。例如，对于目标计算机名称“myserver.domain.com”，SPN 可以是以下之一：WS MAN/myserver.domain.com 或 WSMAN/*.domain.com。有关详细信息，请参阅 about_Remote_Troubleshooting 帮助主题。+ CategoryInfo : OpenError: (System.Manageme....RemoteRunspace:RemoteRunspace) [], PSRemotingTransportExc eption + FullyQualifiedErrorId : PSSessionOpenFailed* *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T01:01:19.107

我发现通过 FQDN 连接到服务器不需要 GPO 步骤。但是，它并没有解决如何通过命令行或 Powershell 设置本地 GPO 的原始问题。

# php - Javascript调用Flash函数上传文件

> ID：10526312
> 
> 赞同：0
> 
> 时间：2012-05-10T01:14:55.583
> 
> 标签：php, javascript, jquery, flash

我想知道我是否可以就以下最佳方法获得一些建议...

我目前正在从 Javascript（使用 jQuery）调用 Flash AS3 函数，此函数上传已在此 Flash 文件中选择的文件。Flash 然后上传文件并调用处理处理后的文件的 php 文件 (upload.php)。这一切都很好。但是，还填写了与上传文件有关的其他详细信息（由用户在文本框中输入）所有这些数据，包括文件上传位置的文件路径，都必须保存到数据库中。这可以通过对另一个 php 文件 (processData.php) 的 ajax 调用来完成。我的问题是，当我上传文件时，我无法通过闪存发送其他详细信息以及文件（至少我不知道），这会导致执行 2 个不同的 php 脚本。其次，通过 ajax 调用的其他 php 脚本没有要添加到数据库的文件信息。如果我愿意，我可以将此信息存储在会话中，但这似乎并不能说服我作为解决此问题的最佳方式。还有其他想法或建议吗？

我有相当多的代码，以避免使这个问题成为一个巨大的问题，我会发布我认为很重要的 JS 部分和一些 flash 片段，这样你就可以了解发生了什么......如果还有其他问题喜欢看代码随时问和生病发布它......

**JS：**

```
$("#uploadAudio").submit(function(event) {
    event.preventDefault();

    var form = $(this);
    var title = form.find("#title").val();
    var desc = form.find("#desc").val();

    var flash = $("#flash");

    var flashFileSet = flash.get(0).jsIsFileSelected();

    if(flashFileSet)
    {
        $.ajax({
            type: "POST",
            url: "processData.php",
            dataType: "text",
            data: "title=" + title + "&desc=" + desc,
            async: false,
            success: function() {
                audFile.get(0).jsUploadFile();
            }
        });
    }
}); 
```

**闪光**

```
public function fUploader(){
        req = new URLRequest();
        req.url = ( stage.loaderInfo.parameters.f )? stage.loaderInfo.parameters.f : 'http://virtualmanagementonline.com/ajax/audUpload.php';
        pFilterType = ( stage.loaderInfo.parameters.filterType )? stage.loaderInfo.parameters.filterType : 'Images';
        pFileFilters = ( stage.loaderInfo.parameters.fileFilters )? stage.loaderInfo.parameters.fileFilters : '*.jpg;*.jpeg;*.gif;*.png';
        file = new FileReference();
        setup( file );
        select_btn.addEventListener( MouseEvent.CLICK, browse );
        progress_mc.bar.scaleX = 0;
        tm = new Timer( 1000 );
        tm.addEventListener( TimerEvent.TIMER, updateSpeed );
        cancel_btn.addEventListener( MouseEvent.CLICK, cancelUpload );
        cancel_btn.visible = false;

        ExternalInterface.addCallback("jsUploadFile", uploadFile);
        ExternalInterface.addCallback("jsIsFileSelected", IsFileSelected);
    }

public function browse( e:MouseEvent ){
        filefilters = [ new FileFilter(pFilterType, pFileFilters) ];            file.browse( filefilters );
    }

private function selectHandler( e:Event ){
        var tf = new TextFormat();
        tf.color = 0x000000;
        label_txt.defaultTextFormat = tf;
        label_txt.text = file.name;
        //file.upload( req );
    }

    public function IsFileSelected():Boolean{
        if(label_txt.text != "")
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    public function uploadFile():void{
        file.upload(req);
    } 
```

* ***注意：**并非所有的闪存代码都显示，因为有很多。我提出了我认为需要了解到底发生了什么的内容。

如果有什么我可以添加以获取更多详细信息，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:46:14.933

由于可用，您可以发送任意数量的数据`ExternalInterface`。
[ActionScript 3 Reference](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#addCallback%28%29)对以下内容进行了说明`ExternalInterface`：

> 从 HTML 页面上的 JavaScript，您可以：
> - 调用 ActionScript 函数。
> - 使用标准函数调用表示法传递参数。
> - 向 JavaScript 函数返回一个值。

您所要做的就是将一个 ActionScript 函数/方法注册为可从容器调用：

**动作脚本**

```
...
ExternalInterface.addCallback("jsUploadFile", uploadFile);
...

public function uploadFile (title:String, desc:String):void
{
    var infos:URLVariables = new URLVariables();
    infos.desc = desc;
    infos.title = title;

    /* When you pass the URLVariables to data property of URLRequest,
      all variables associated with the URLVariables object will be
      sent to the server along with the image uploaded. */
    req.data = infos;

    file.upload(req);
} 
```

然后，从容器 (HTML) 中调用它，并将附加信息作为参数传递。

**JavaScript**

```
$("#uploadAudio").submit(function(event) {
    event.preventDefault();

    var form = $(this);
    var title = form.find("#title").val();
    var desc = form.find("#desc").val();

    var flash = $("#flash");

    var flashFileSet = flash.get(0).jsIsFileSelected();

    if(flashFileSet)
    {
       /* Instead of sending title and desc to the server via ajax, pass
          them as parameters to the jsUploadFile method. So
          you can handle everything in one place */
       audFile.get(0).jsUploadFile(title, desc);
    }
}); 
```

希望能帮助到你。

# java - 使用带有 tomcat 的 c3p0 与 MySQL 的僵尸连接

> ID：10526313
> 
> 赞同：2
> 
> 时间：2012-05-10T01:15:03.013
> 
> 标签：java, mysql, tomcat, connection-pooling, c3p0

我正在使用 c3p0 来管理与 MySQL 的数据库连接。问题是某些连接会永远保持。我有 1000 个连接的限制，但由于某种未知原因，有 1200 个打开的连接。为了调查它，我在 tomcat 服务器 shell 中执行以下命令：

`netstat -n |grep 3306|grep ESTABILISHED|wc -l`

它返回 1200

这是c3p0的配置`context.xml`

```
 <Resource name="jdbc/xxxx" auth="Container"
          user="xxxxxx"
          password="xxxxx"
          driverClass="com.mysql.jdbc.Driver"
          jdbcUrl ="jdbc:mysql://xxxx:3306/xxx"
          factory="org.apache.naming.factory.BeanFactory"
          type="com.mchange.v2.c3p0.ComboPooledDataSource"
          maxPoolSize="1000"
          minPoolSize="200"
          numHelperThreads="10"
          acquireIncrement="50"
          maxStatementsPerConnection="0"
          idleConnectionTestPeriod="200"
          maxIdleTime = "1000"
          maxIdleTimeExcessConnections = "180"
          maxStatements="200"
          unreturnedConnectionTimeout="10"
          debugUnreturnedConnectionStackTraces="true"
          /> 
```

如果池最大大小为 1000，如何建立 1200 个连接？我的 MySQL 服务器配置为

```
interactive_timeout 28800
wait_timeout    1300 
```

OBS：我没有在这个应用程序中使用休眠（只是在几个类中）。大多数连接都是通过纯 JDBC 代码建立的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:05:02.717

有几种可能性。

最有可能的是，您已将此 Resource 元素放置在`$CATALINA_BASE/conf/context.xml`该文件中，该文件为每个 Web 应用程序提供了默认的 context.xml。因此，如果您有六个 Web 应用程序，您将有六个连接池。由于最小轮询大小为 200，因此至少有 200*6=1200 个打开到数据库的连接。

另一种可能性是 Web 应用程序已重新加载。您应该获得一个新的连接池，而旧的连接池将被 GC 处理。但是，如果您在重新加载时出现内存泄漏（很容易在没有意识到的情况下发生），它可能会将连接池及其打开的连接保留在内存中，从而增加您的总连接数。

将定义放入`server.xml`：

```
<Server>
  <GlobalNamingResources>
     <Resource name="jdbc/xxxx">...</Resource>
  </GlobalNamingResources>
</Server> 
```

这在`context.xml`：

```
 <ResourceLink name="jdbc/xxxx"
      global="jdbc/xxxx"
      type="com.mchange.v2.c3p0.ComboPooledDataSource" /> 
```

# c - c realloc，大小的真正含义是什么

> ID：10526314
> 
> 赞同：3
> 
> 时间：2012-05-10T01:15:08.027
> 
> 标签：c, realloc

有人可以解释 realloc 中的第二个参数到底是什么，因为我找不到测试它的方法。

所以假设我们有这样的东西

```
int *p = malloc(sizeof(int)); //we have just enough space to store single int value 
```

现在，如果我想在 p 中存储 2 个 int 值，是否需要将其作为第二个参数发送到 realloc `2 * sizeof(int)`块的新大小，或者`sizeof(int)`因为它需要扩展内存以获得 int 的大小

如果在这种情况下我应该将新块的总值发送到 realloc `2 * sizeof(int)`，如果我只发送它会做什么`sizeof(int)`，只返回原始指针并且在内存中什么都不做或其他什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T01:18:55.950

第二个参数是内存块的新大小（总新大小），以字节为单位。如果你想要 2 个整数的空间，你会使用`2 * sizeof(int)`.

> 只是返回原始指针并且在内存或其他东西中什么都不做？

规格不保证这一点。许多实现将只返回原始指针不变，但他们可以很容易地移动它。您将不会获得足够大的新内存分配以容纳 2 个整数，但是，只会获得足够大的内存位置中的原始数据值`sizeof(int)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T01:18:45.347

您想告诉 realloc 分配的新总大小。所以从你的例子来看，`2 * sizeof(int)`.

您的第二个问题并不完全清楚，因此我将尝试将所有这些部分包装成一句话。如果你调用 realloc 的大小值与原来的 malloc 调用相同，则取决于实现是返回原来的指针还是将数据移动到（实现定义的）更方便的地方；如果您随后尝试将两个`int`s 存储在您只请求一个的空间中，`int`那么您触发了未定义的行为。它可能会破坏其他分配的内存（导致计算中的错误结果）或者（更有可能）它可能会破坏 malloc 自己的簿记数据（很可能稍后当 malloc 实际查看数据时，您的程序会因 Segfault 而中止。

# javascript - 在 Firefox 插件中模拟击键

> ID：10526316
> 
> 赞同：4
> 
> 时间：2012-05-10T01:15:14.697
> 
> 标签：javascript, firefox, firefox-addon, dom-events

我希望能够从我的 firefox-addon 模拟击键，但目前我无法做到这一点。

我发现这篇文章[为什么模拟左箭头 + Shift 键在 Firefox 中不起作用？](https://stackoverflow.com/questions/10244932/why-simulation-of-left-arrow-shift-keys-doesnt-work-in-firefox)和我的代码几乎一样，但它只做焦点部分，而不是dispatchEvent。知道为什么会发生这种情况吗？

这是代码：

```
objTag.focus();
var e = document.createEvent('KeyboardEvent');
e.initKeyEvent('keydown', true, true, window, false, false, false, false, 35, 0);
objTag.dispatchEvent(e); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:24:15.707

您的代码是正确的，但元素对事件`<textarea>`做出反应，而不是.`keypress``keydown`

无论如何，为什么这么复杂？您可以设置`input.value`然后使用[`input.setSelectionRange()`方法](https://developer.mozilla.org/en/DOM/Input.setSelectionRange)适当地移动光标。如果你想在当前行的末尾添加一些东西，你可以这样做：

```
var position = objTag.selectionStart;
var lineEnd = objTag.value.indexOf("\n", position);
if (lineEnd < 0) // No more line breaks
  lineEnd = objTag.value.length;

var textToAdd = "foo";
objTag.value = objTag.value.substr(0, lineEnd) + textToAdd + objTag.value.substr(lineEnd);
objTag.setSelectionRange(lineEnd + textToAdd.length, lineEnd + textToAdd.length);
objTag.focus(); 
```

添加到文本的末尾甚至更简单：

```
var textToAdd = "foo";
objTag.value += textToAdd;
objTag.setSelectionRange(objTag.value.length, objTag.value.length);
objTag.focus(); 
```

# ruby-on-rails - 最佳 Ruby on Rails 前端开发策略

> ID：10526319
> 
> 赞同：3
> 
> 时间：2012-05-10T01:15:20.450
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, workflow, frontend

嘿，你们所有的红宝石在栏杆上...

我现在只是一个新手.. 目前正在从事我的第一个 Rails 项目。

我将花一些时间来深入挖掘，我想知道最好的策略是进行 Rails 应用程序的前端开发。

拥有如下工作流程是否更好/更容易

```
1\. Concept / Idea
2\. Wireframe, Mockup
3\. *** Design front-end of the app
4\. Rails development
5\. template all the views 
```

还是翻转更好？

```
1\. Concept / Idea
2\. Wireframe, Mockup
3\. Rails development
4\. Template all the views
5\. *** Design front-end of the app 
```

也许这些都不是？

你如何处理你的 ruby​​ on rails 工作流程。我是开发人员/设计师的完全混搭

但我的大部分灵感来自有一个想法，然后设计它，然后做所有的前端

当您确切地知道您希望网站的前端看起来像什么时，对于更好的 Rails 工作流程有什么想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T01:28:27.680

这两种方式都可以。不同的公司——甚至同一家公司的不同项目——可以通过不同的方法取得成功。

话虽这么说，我非常喜欢以下方法：

1.  概念/理念
2.  线框，样机
3.  设计应用程序的前端
4.  模板所有视图
5.  轨道开发

基本上，我通常是这样描述的：

*   首先，将设计做到让设计师布置模型和图像的程度。
*   让 UI 专家将其转换为 HTML/CSS（或 HAML/SASS 或其他）
*   做 html 后面的 rails 实现。

这些步骤通常会重叠——这没关系。在完成所有 eles 之前，您应该开始一些基本的开发。但是，您提前完成的设计越多越好。

请注意，这种方法并不意味着在完成任何其他操作之前就详细设计整个站点。这意味着一旦您决定进行一些编码，请先进行该位的设计。您将希望以小块的形式实现事物并在进行开发时进行迭代。以小块实现事物，但在开始编码之前尝试完成这些部分的设计。

# jpa - FROM 子句中的 JPA 子查询是否可能？

> ID：10526324
> 
> 赞同：3
> 
> 时间：2012-05-10T01:16:21.300
> 
> 标签：jpa, subquery

我在使用 JPA 时遇到了一点问题。考虑这种情况：

**表 A (id_a)** | **表 B (id_b, id_a)**

我需要的是这样的查询：

```
Select a.*, c.quantity from A as a, (Select Count(*) as quantity 
from B as b where b.id_a = a.id_a) as c; 
```

问题是我想使用 jpa 查询而不是本机查询，如下所示：

```
Select a, c FROM A a, (Select Count(b) FROM B b where a.idA = b.a.idA) c; 
```

因此，我可以从结果（每个节点中带有 a 和 c 的 Object[] 列表）进行迭代，然后分配 a.quantity = c;

我再说一遍，我不想使用本机查询，但我发现除了使用冗余数据之外别无他法，并在 A 中添加另一个名为 Quantity 的列，每次我从 B 插入和删除时，更新 A 中的这一列。

请帮忙，我在某处读到 JPA 不接受 Form 子句中的子查询，那么，我该怎么办？

非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:26:48.890

JPA 不支持 FROM 子句中的子选择，但 EclipseLink 2.4 当前里程碑版本确实具有此支持。

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Sub-selects_in_FROM_clause](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Sub-selects_in_FROM_clause)

不过，您可能可以只使用普通连接来重写查询。

也许，

```
Select a, size(a.bs) from A a 
```

或者

```
Select a, count(b) from A a join a.bs b group by a 
```

# scala - Scala：常量属性 val 或 def

> ID：10526326
> 
> 赞同：1
> 
> 时间：2012-05-10T01:16:46.450
> 
> 标签：scala, constants

我有一个十六进制网格的整数坐标结构，我将其从 C# 移植到 Scala，如下所示：

```
object Cood
{
  def Up = new Cood(0, 2)
  def UpRight = new Cood(1, 1)
  def DownRight = new Cood(1,- 1)
  def Down = new Cood(0, - 2)
  def DownLeft = new Cood(- 1, - 1)
  def UpLeft = new Cood(- 1, + 1)
  def None = new Cood(0, 0)
}

class Cood(val x: Int, val y: Int)
{
   //more code
} 
```

由于非基本类型没有常量，因此它们是静态获取属性。在 Scala 中，我应该将它们实现为 def 或 val 还是无关紧要？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T01:19:24.213

您应该将它们实现为`val`. `def`关键字定义了一个方法，所以每次调用都会执行该方法。换句话说，with对象`val`将`Cood`被创建一次并存储，但`def`每次访问它时都会创建一个新副本。

如果您担心创建可能不会使用的对象，那么您应该尝试`lazy val`，这是一个仅在第一次访问时填充的 val。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T01:32:20.167

您可能应该将 Cood 类实现为[案例类](http://www.artima.com/pins1ed/case-classes-and-pattern-matching.html)：

```
case class Cood(x: Int, y: Int) 
```

就是这样，不需要额外的 getter / setter、相等方法、toString 或用于模式匹配的提取器。

但是，如果您只想将其作为普通类，只需编写`class Cood(val x: Int, val y: Int)`.

# java - 链表反向不起作用....？

> ID：10526327
> 
> 赞同：0
> 
> 时间：2012-05-10T01:17:10.027
> 
> 标签：java, linked-list

我知道这是一个分钟代码。我不明白为什么我的链表反转不起作用。有人可以帮我在下面的代码中修复我的反向方法吗？

```
//Reverse a single linked list
public Node reverse()
{
    return reverse(root);
}
private Node reverse(Node node)
{
        Node previous = null;  
        Node current = node;  
        Node forward;  

        while (current != null) 
    {  
            forward = current.next;  
            current.next = previous;  
            previous = current;  
            current = forward;  
        }  
    return previous;  
} 
```

对此的任何输入都会有所帮助

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:41:35.837

我很确定应该是

```
return root = reverse(root); 
```

（您的反向逻辑是正确的，但如果`root`仍然指向列表的旧根，您最终将得到一个 1 元素链表。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:22:12.307

您确定使用 reverse() 的返回值而不是 root 进行迭代吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T01:21:36.607

假设家庭作业...

编写简单的测试：0 项列表、1 项列表、2 项列表、10 项列表。比确保它们每个都有效 - 将缩小错误并学习编写单元测试。

# jquery - jQuery 自动完成和 aspx/json

> ID：10526329
> 
> 赞同：1
> 
> 时间：2012-05-10T01:17:28.083
> 
> 标签：jquery, asp.net, json

我对 jQuery 和 JSON 还很陌生，遇到了一个我无法解决的问题。我有一个文本框，我希望用户开始输入一个人的姓名，当他/她选择姓名时，它会使用他们的电子邮件地址自动填充另一个文本框。

我的代码如下。任何帮助使它工作将不胜感激。提前非常感谢！

标记

```
<input type="text" id="person_name" class="required" />
<input type="text" id="person_email_address" class="required email" /> 
```

jQuery

```
$( "input#person_name" ).autocomplete({
    source: "/autoComplete.aspx",
    dataType: "json",
    minLength: 1,
    select: function( event, ui ) {
        //set email textbox to the email field of the selected item.
    }
}); 
```

自动完成.aspx.cs

```
protected void Page_Load(object sender, EventArgs e)
{
    string term = Request.QueryString["term"];

    if (!string.IsNullOrEmpty(term))
    {
        string sql = string.Format("select * from users where first_name like '%{0}%' or last_name like '%{0}%'", term);

        DataTable dt = GetTable(sql);

        foreach (DataRow dr in dt.Rows)
        {
            string name = dr["first_name"].ToString() + dr["last_name"].ToString();
            string email = dr["email"].ToString();
        }

        Response.ContentType = "application/json";
        Response.Write("what goes here so i can access both email and name in the select function?");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:43:32.870

在你的代码隐藏中使用这样的东西：

```
var items = dt.AsEnumerable().Select(
    dr => new 
    {
        name = dr["first_name"].ToString() + dr["last_name"].ToString(),
        email = dr["email"].ToString()
    }
);
string json = "[" + string.Join(",", 
        items.Select(i => 
            "{ id: '" + i.name + "'"
            + ", label: '" + i.name + "'"
            + ", value: '" + i.email + "'"
            + "}"
        )
    ) + "]";

Response.Write(json); 
```

这应该会为您提供正确的 JSON，*名称*为标签，*电子邮件*为值。现在在 Javascript 选择回调函数中，将电子邮件文本框设置为正确的值：

```
select: function( event, ui ) {
    //set email textbox to the email field of the selected item.
    $("#person_email_address") = ui.item.value;
} 
```

**笔记**

*根据评论，以上内容未经修改无效。JSON 值必须用双引号括起来。*

# iphone - loadnibnamed 对象调用实例方法

> ID：10526339
> 
> 赞同：0
> 
> 时间：2012-05-10T01:19:18.697
> 
> 标签：iphone, ios, interface-builder, xib, nib

我有一个自定义视图，我正在使用 loadnibnamed 来获取视图对象。当我尝试使用该对象访问任何实例方法时，我收到一条警告说找不到实例方法。但是流程运行良好。我从实例方法中得到结果。我还在接口中声明了实例方法。所以这不是声明问题。我想知道为什么会出现警告。

CustomButton 继承自 UIButton。我创建了一个 CustomButton 笔尖。在 CustomButton 类中，我声明并实现了 initializeProperties 实例方法。

当我尝试通过 loadingnib 在任何其他类中访问此方法时，我收到警告（未找到实例方法）。

CustomButton *customButton = [([[[NSBundle mainBundle] loadNibNamed:@"CustomButton" owner:nil options:nil] objectAtIndex:0]) retain]; [customButton setFrame:CGRectMake(xPos, yPos, width, height)]; [自定义按钮初始化属性]; --> 给出警告

但是代码能够访问该方法并实现该方法。我也尝试过类型转换 [(CustomButton*)customButton initializeProperties]; 但仍然收到相同的警告

谢谢

# bash - EC2 命令行工具

> ID：10526345
> 
> 赞同：1
> 
> 时间：2012-05-10T01:20:35.440
> 
> 标签：bash, amazon-ec2

我正在尝试设置 Amazon 的 EC2 服务，但遇到了一些麻烦。

我已经下载了[Amazon EC2 API Tools](http://aws.amazon.com/developertools/351)，我将它`~/.ec2`与我的`.cert`和`.pem`文件一起放入了一个文件夹中。

当我尝试任何命令时，`~/.ec2/bin`我得到一个错误`/Users/zmjones/.ec2/bin/ec2-cmd: /usr/bin/env: bad interpreter: Operation not permitted`。[我在"/usr/bin/env bad interpreter"](https://stackoverflow.com/q/10525603/78845)中询问了这个问题。

现在我已经使用 this 的变体删除了 DOS 行尾`mv /users/zmjones/.ec2/bin/ec2-add-keypair /users/zmjones/.ec2/bin/ec2-add-keypair.bak tr -d '\r' < /users/zmjones/.ec2/bin/ec2-add-keypair.bak > /users/zmjones/.ec2/bin/ec2-add-keypair`，我尝试执行其中的一些命令，`~/.ec2/bin`但无法使其正常工作。

我得到了一个权限被拒绝的错误，当我使用 sudo 时，它告诉我环境变量`EC2_HOME`不存在，而`echo $EC2_HOME`表明它存在。这是我的`~/.bash_profile`。

```
PATH=/usr/bin:/bin:/usr/sbin:/sbin:/opt/local/bin:$PATH
PATH=/opt/local/sbin:/usr/local/bin:/usr/x11/bin:/usr/texbin:$PATH
PATH=/usr/local/texlive/2011/bin/x86_64-darwin:$PATH
PATH=/Library/Frameworks/EPD64.framework/Versions/Current/bin:$PATH
EC2_HOME=~/.ec2
PATH=$EC2_HOME/bin:$PATH
EC2_PRIVATE_KEY=`ls $EC2_HOME/pk-*.pem`
EC2_CERT=`ls $EC2_HOME/cert-*.pem`
JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Home/

export PATH 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:22:20.640

您收到“权限被拒绝”错误，因为未在修改后的脚本上设置执行 (+x) 位。

## 不要`sudo`用来解决这个问题。

只需设置 +x 位：

```
chmod +x /users/zmjones/.ec2/bin/ec2-add-keypair 
```

（对于具有固定行尾的其他脚本也是如此）。

`sudo`不起作用的原因是默认情况下它从一个干净的环境开始，没有您`EC2_HOME`和其他环境变量。

无论如何您都不想用来`sudo`解决问题的原因是，以 root 身份`sudo`运行*整个程序*，这有可能在您的系统上做坏事。至少，它可能会在您的本地目录中创建由 拥有的文件或子目录`root`，然后您必须采取额外的步骤来修改/删除它们。在最坏的情况下，程序中的错误可能会破坏您的整个系统或其中的重要部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T19:19:53.880

如果`ls -al@`显示`com.apple.quarantine extended attrib`，文件将不会被执行。你需要

```
xattr -d com.apple.quarantine filename 
```

# winapi - 当用户使用“以管理员身份运行”时，如何使用安装程序写入用户的“我的文档”目录

> ID：10526350
> 
> 赞同：7
> 
> 时间：2012-05-10T01:21:00.477
> 
> 标签：winapi, installation, inno-setup, uac

我有一个程序需要在安装时在我的文档目录中创建文件。这是一个严格的固定要求，没有改变这一点。问题是如果用户在安装文件上“以管理员身份运行”，innosetups 常量 {userdocs} 指向管理员的文档目录，而不是原始登录用户。

所以，谷歌搜索并发现了这个：

[在 Windows Vista/7 上通过 Inno Setup 将文件安装到原始用户的 My Docs 文件夹](https://stackoverflow.com/questions/4403784/install-files-to-original-users-my-docs-folder-via-inno-setup-on-windows-vista)

然而，答案是错误的，因为 innosetup 甚至指出

> 如果用户通过右键单击其 EXE 文件并选择“以管理员身份运行”来启动安装程序，那么不幸的是，此标志将不起作用，因为安装程序没有机会使用原始用户凭据运行任何代码。如果安装程序是从已经提升的进程启动的，情况也是如此。但是请注意，这不是 Inno Setup 特定的限制；在这种情况下，基于 Windows Installer 的安装程序也无法返回原始用户凭据。

我想我可以鼓励用户不要使用以管理员身份运行，但我不知道如何防止他不升职。

我正在考虑让程序本身在第一次运行时（安装后）设置 My Documents\Program 名称目录。这种解决方法会奏效吗？它必须以潜在受限用户的身份从其程序文件目录中复制文件。有可能还是我会遇到特权问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T10:38:46.140

原始答案是有效的，但不推荐。运行安装程序时，`RunAsOriginalUser`将以当前登录 Windows 的用户身份运行。这是通过让安装程序的一部分不提升运行，然后运行另一个提升的副本来执行实际安装来完成的。

当用户明确执行“以管理员身份运行”时，“未提升的存根”也会运行提升，在这种情况下，安装程序无法访问原始用户，因为该信息已被替换。

公认的做法是按照您的建议在应用程序本身中执行任何配置文件特定工作，这也意味着它将适用于其他用户和 pre Vista 中的 LUA 环境（您将遇到与您看到的完全相同的情况现在）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-20T07:06:17.280

首先，通过设置确保安装程序不需要自行提升权限[`PrivilegesRequired=lowest`](https://jrsoftware.org/ishelp/index.php?topic=setup_privilegesrequired)：

```
[Setup]
PrivilegesRequired=lowest 
```

要中止安装程序，当安装程序由用户明确运行“以管理员身份”运行时，在 Windows Vista 和更早版本上，使用以下[`IsAdmin`功能](https://jrsoftware.org/ishelp/index.php?topic=isxfunc_isadmin)（或[`IsAdminInstallMode`](https://jrsoftware.org/ishelp/index.php?topic=isxfunc_isadmininstallmode)或`IsAdminLoggedOn`[在旧版本中]）[`InitializeSetup`](https://jrsoftware.org/ishelp/index.php?topic=scriptevents&anchor=InitializeSetup)：

```
[Code]

function InitializeSetup(): Boolean;
begin
  Result := True;

  if (GetWindowsVersion >= $05010000) and
     IsAdmin then
  begin
    MsgBox('Do not run this installer "As Administrator".', mbError, MB_OK);
    Result := False;
  end;
end; 
```

有关该主题的更多讨论，请参阅[通过 Windows Vista/7 上的 Inno Setup 将文件安装到原始用户的 My Docs 文件夹](https://stackoverflow.com/q/4403784/850848#43512161)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T05:32:44.227

本文可能会为您提供有关如何解决海拔高度的一些指导，

[http://www.codeproject.com/Articles/18946/High-elevation-can-be-bad-for-your-application-How](http://www.codeproject.com/Articles/18946/High-elevation-can-be-bad-for-your-application-How)

一般来说，它使您有机会在安装结束时执行可执行文件（在“我的文档”下创建文件）而无需提升。

# ios - 如何在情节提要模式 Xcode 中更改按钮功能

> ID：10526354
> 
> 赞同：0
> 
> 时间：2012-05-10T01:22:06.530
> 
> 标签：ios, storyboard

我是为 iOS 设备开发应用程序的新手，我刚刚尝试了故事板模式。我想知道有没有办法改变按钮的功能，例如，我有三个页面，在第一页我有两个按钮，一个通向下一页，一个通向第三页的按钮页？

我真的很感激一个答案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:37:29.463

您不能控制从按钮拖动到您希望它指向的页面吗？这就是故事板的工作原理。

重要提示：要返回，不要创建按钮并将其拖回，而是创建一个按钮并设置该按钮的代码以关闭视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:28:02.510

您仍然可以在 Interface Builder 中使用旧方法：将 拖到`IBAction`您的按钮上。

如果您打算使用 segue，则必须在 Properties 中定义 segue 名称，并实现`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`方法。

# javascript - 可使用 kineticJS 和 Clip 功能拖动的画布

> ID：10526357
> 
> 赞同：0
> 
> 时间：2012-05-10T01:22:26.830
> 
> 标签：javascript, html, html5-canvas, kineticjs

我有一个问题要处理`canvas`。

我想`kinetic`使用移动事件（尤其是可拖动事件），我也想同时使用该`clip()`功能。

这是我的代码：

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      canvas {
        border: 1px solid #9C9898;
      }
    </style>
    <script src="kinetic-v3.9.4.js"></script>
    <script>
      window.onload = function() {
        var stage = new Kinetic.Stage({
          container: "container",
          width: 708,
          height: 500
        });
        var layer = new Kinetic.Layer();

        var circle1 = new Kinetic.Circle({
          x: 150,
          y: 150,
          radius: 75,
          fill: "red",
          draggable: true
        });

        var circle2 = new Kinetic.Circle({
          x: 350,
          y: 150,
          radius: 75,
          fill: "blue",
        });

        layer.add(circle2);
        layer.add(circle1);
        stage.add(layer);
      };

    </script>
  </head>
  <body onmousedown="return false;">
    <div id="container"></div>
  </body>
</html> 
```

我有第一个可拖动的圆圈，但我想使用它，`clip function`但我真的不知道该怎么做。此外，我试图获得这样的 2d 上下文：

`var context = this.getContext();`

但它没有用。如果有人可以帮助我，谢谢。

我也看到了这个[例子](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-clipping-regions/)，但它不适用于移动设备。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T14:50:24.303

您提到的[示例](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-clipping-regions/)不适用于移动设备的原因是它仅使用鼠标事件处理程序：

```
stage.on("mousemove", function(){}) 
```

但是您需要像这样添加触摸事件：

```
stage.on("mousemove touchmove", function(){}) 
```

**touchstart, touchmove, touchend**

祝你好运！

# mysql - 使用 IN 语句的 Eclipselink JPA 类型安全查询

> ID：10526362
> 
> 赞同：1
> 
> 时间：2012-05-10T01:23:01.857
> 
> 标签：mysql, jpa-2.0, eclipselink

我设置了使用 WHERE IN 查询数据库的方法，但查询的执行与我的预期相反。

```
CriteriaBuilder qb = getEntityManager().getCriteriaBuilder();
CriteriaQuery<ActivityLog> c = qb.createQuery(ActivityLog.class);
Root<ActivityLog> p = c.from( ActivityLog.class );
Predicate condition1 = qb.equal( p.get(ActivityLog_.div), div);

Collection<String> viewStatus = new ArrayList<String>();
viewStatus.add("C");
viewStatus.add("U");
viewStatus.add("D");
Predicate condition2 = qb.equal(p.get(ActivityLog_.status), p.get(ActivityLog_.status).in(viewStatus));

c.where( qb.and(condition1, condition2) );
c.orderBy( qb.desc( p.get( ActivityLog_.update_time.getName() ) ) );

TypedQuery<ActivityLog> q = getEntityManager().createQuery(c); 
q.setMaxResults(15);

return q.getResultList(); 
```

结果实际上是相反的——我得到的状态不是 C、U、D。如果我更改 Predicate condition2 行——我会得到我期望的结果？？

```
Predicate condition2 = qb.notEqual(p.get(ActivityLog_.status), p.get(ActivityLog_.status).in(viewStatus)); 
```

MySQL 驱动程序或 Eclipselink 是否存在错误？还是我的想法有缺陷？

> 我希望从 divsion = div 和 status IN (C,U,D) 的 ActivtyLog 中检索

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T13:37:50.200

你为什么使用 qb.equal(p.get(ActivityLog_.status), yourInCondition)？in 条件应该返回一个真或假，所以我不明白你为什么要检查它是否等于你的状态。
在 EclipseLink 中，您可以将 Logging 设置为 Fine 或 Finest 以查看生成的 SQL，这样可以更轻松地判断查询可能出错的原因。

我认为你可能想要的只是

```
Predicate condition2 = p.get(ActivityLog_.status).in(viewStatus)) 
```

这也可以这样做：

```
In<String> in = qb.in( p.get(ActivityLog_.status) );
in.value("C").value("U").value("D");
c.where( qb.and(condition1, in) ); 
```

# python - Python 实例删除

> ID：10526363
> 
> 赞同：2
> 
> 时间：2012-05-10T01:23:03.037
> 
> 标签：python, memory-leaks, instance

我是编程新手，我不明白垃圾收集是如何工作的。在以下示例中：

```
import Tkinter as tk

a = 0

class Object1:

    def __init__(self):
        global a
        a = tk.Frame()
        a.pack()
        b = tk.Button(a, text="click me", command=self.callback)
        b.pack()

    def callback(self):
        print "clicked!"
        program = Object2()

class Object2:

    def __init__(self):
        global a
        a.destroy()
        a2 = tk.Frame()
        a2.pack()
        b = tk.Label(a2, text='This is the second object.')
        b.pack()

program = Object1()

tk.mainloop() 
```

Object1 的实例“program”是否保留在末尾？我是否必须以某种方式明确删除它？如果我多次重复这个结构，每个 Objectx 都有一个按钮，它会破坏前一帧并添加一个包含新内容的新帧，随着程序的进行，这会消耗越来越多的内存吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T01:33:10.803

`a`将引用一个“销毁”`tk.Frame`

为了允许`tk.Frame`被垃圾收集，您需要删除对它的引用

一种方法是设置`a = None`另一种方法是`del a`

当然，当程序真正结束时，*一切都*被释放了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:59:55.910

所以......如果你是编程新手，你绝对不需要考虑垃圾收集。

首先，您需要了解变量作用域在 Python 中是如何工作的。基本 - 在某个块（选项卡级别）中声明的变量不会离开该块。模块全局变量是在第一个选项卡级别定义的变量（例如您的示例中的 a ）。模块（文件）之间可访问的真正全局变量需要这样声明。不仅如此 - 但不要忘乎所以。阅读本文末尾的链接以获取更多详细信息。

其次，您开始陷入过早优化的模式。您是否经历过导致您出现问题的过度内存使用？如果是这样，那么只有那时，您才需要找出一种隔离变量范围的方法（例如，在每次迭代的 for 循环体中）。在开始担心性能之前让代码做你想做的事，然后只花时间改变对速度（运行最多的最大循环）或内存（浪费的变量使用）有很大影响的事情。

第三，垃圾收集在语义上不相关，变量范围是。Python 并不擅长管理内存，事实就是如此。例如，字典对象的大小不会减小，即使您填充它然后设法删除所有项目；此外，当字典容器需要增长时，它只会增加一倍（即500M-->1G-->2G）。但不要让这吓到你——它实际上很少是一个问题。

查看[SaltyCrane](http://www.saltycrane.com/blog/2008/01/python-variable-scope-notes/)关于变量范围的博客。

# javascript - 使用原型检查本机定义的函数

> ID：10526365
> 
> 赞同：0
> 
> 时间：2012-05-10T01:23:16.003
> 
> 标签：javascript, function, built-in

这个[问题](https://stackoverflow.com/questions/85815/how-to-tell-if-a-javascript-function-is-defined)的答案说使用它来检查是否定义了函数：

```
typeof yourFunction === 'function' 
```

但是我已经在非标准函数[link()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/link)上尝试过这个。实际上这返回了错误。该功能适用​​于我尝试过的所有浏览器——IE、Chrome、Opera、FireFox。

```
typeof String.link === 'function' // false
typeof String.link() === 'function' // Uncaught error ... 
```

然后我在某个地方找到：

```
typeof String.prototype.link === 'function' //true 
```

实际上返回true。有什么区别，为什么第一个失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T01:26:57.230

`String`是构造函数，函数也是对象。您可以将属性附加到它。

[例如：](http://jsfiddle.net/xdeJN/)

```
function foo(){
    alert('from foo');
}

foo.bar = function(){
    alert('bar on foo');
}

foo();     //from foo
foo.bar(); //bar on foo 
```

这与 jQuery 的`$`行为方式与对象（例如。`$.each()`）和函数（例如。`$(selector)`）的行为方式相同。

所以：

*   using`String.link`正在访问构造函数本身的属性——它不存在。

*   using`String.prototype.link`访问`link()`每个字符串附带的函数-确实存在（并且您应该使用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:28:14.767

因为 string 是 Object 并且没有 link() 方法。只有字符串有这个方法。看：

```
String//Defines the Object
String.prototype//Defines the methods and properties that will be bound to a var of the type String
'foo'//This is a string
'foo'.link//So it has the link method
String//This is an Objecy that defines the strings
String.link//So it doesn't have the link method
String.prototype//An object that stores the methods and properties of the vars of type String
String.prototype.link//So it has the link method 
```

# windows - 是否可以检索使用 file.remove 删除的文件？

> ID：10526366
> 
> 赞同：2
> 
> 时间：2012-05-10T01:23:33.410
> 
> 标签：windows, r, recovery, data-recovery

我愚蠢地运行了以下代码

```
file.remove(list.files()) 
```

有没有办法找回被删除的文件。我在 Windows XP + R 2.15.0 中工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T01:58:39.070

您需要获得 NTFS（或 FAT32，虽然不太可能）文件恢复软件。恢复和取消删除加是其中的一些

# cordova - 如何以编程方式返回基于导航的应用程序

> ID：10526367
> 
> 赞同：1
> 
> 时间：2012-05-10T01:23:40.603
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我创建了一个基于导航的应用程序，所以当用户点击一个按钮时，页面导航到另一个页面（上面有一个后退按钮）

在 sencha touch 如何以编程方式`go back`（到导航堆栈中的前一个视图），以及擦除字段中包含的值（在前一个视图中）。

**更新**

```
Ext.getCmp('mainview').push({

                                                          xtype:'second'

                                                         }); 
```

在 Main.Js 中

```
Ext.define("app.view.Main", {
    extend: 'Ext.navigation.View',
           id:'mainview', 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:24:27.920

要以编程方式返回导航堆栈中的上一个视图，您可以使用方法[`pop()`](http://docs.sencha.com/touch/2-0/#!/api/Ext.navigation.View-method-pop)，

```
navigationView.pop(); 
```

在某些按钮单击处理程序上。

要擦除前一个视图的字段中包含的值（如果它是 a `formpanel`），您可以像这样使用`reset()`on 方法，`formpanel`

```
Ext.getCmp('formpanel-id').reset(); 
```

这将重置您的所有值`formpanel`。

# git - 如何在 Github 上创建协作存储库？

> ID：10526369
> 
> 赞同：0
> 
> 时间：2012-05-10T01:23:58.220
> 
> 标签：git, github

您好我想开发一个使用 github 进行协作开发的应用程序。

我在存储库上创建了一个名为 "Tests" 的额外分支。

所以我的合作者必须执行

```
git clone git@github.com:user/repo.git 
```

克隆存储库

接下来我们必须做什么？

我已经阅读了一些教程

```
git branch Tests
git checkout Tests 
```

但我无法推送到存储库..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-10T01:26:40.357

GitHub 帮助有一些关于不同协作方式的非常好的细节，通过拉请求或直接提交：[http ://help.github.com/send-pull-requests/](http://help.github.com/send-pull-requests/)

如果这不能回答您的问题，您将需要更具体地了解您收到的错误。

# c# - 调用 NavigationContext 时出现 NullReferenceException

> ID：10526372
> 
> 赞同：10
> 
> 时间：2012-05-10T01:24:26.923
> 
> 标签：c#, windows-phone-7

在我使用的 Click 函数中

```
NavigationService.Navigate(new Uri("/MainPage.xaml?day=" + this.week.SelectedIndex, UriKind.Relative)); 
```

使用指示 Panorama.DefaultItem 的值导航到 MainPage.xaml，并且在 MainPage.xaml.cs 中我这样写

```
if (this.NavigationContext.QueryString.ContainsKey("day"))
{
    schedule.DefaultItem = NavigationContext.QueryString["day"];
} 
```

但是出现 NullReferenceException

```
this.NavigationContext.QueryString.ContainsKey("day") 
```

我不知道错在哪里，如果有人可以帮助我解决这个问题，我将不胜感激......

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-10T02:02:00.083

我打赌你正在`NavigationContext`构造函数中访问。那时框架还没有填补这一点。检查它`OnNavigatedTo`或之后的任何时间，你应该没问题。

# r - 堆积条形图与图例相反？

> ID：10526376
> 
> 赞同：0
> 
> 时间：2012-05-10T01:25:56.127
> 
> 标签：r, plot, bar-chart, legend

关于在 R 中绘制堆积条形图的一个小问题。**堆积条表示从底部到顶部的系列**。但是**图例总是从上到下显示系列**。我认为这也是正确的*`ggplot2::geom_bar`*

有没有比*`rev(...)`*在其中使用两次更好的习语*`legend()`*或*`barplot()`*如下：

```
exports <- data.frame(100*rbind('Americas'=runif(6),'Asia'=runif(6),'Other'=runif(6)))
colnames(exports) <- 2004:2009
series_we_want <- c(1,2,3)
barplot( as.matrix(exports[series_we_want,]), col=mycolors, ...)
legend(x="topleft", legend=rev(rownames(exports)[series_we_want]), col=rev(mycolors) ...) 
```

（如果您省略其中一个*`rev()'s`*输出显然是没有意义的。似乎是添加单个标志*`yflip=TRUE`*或的增强案例*`yreverse=TRUE`*）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:12:05.733

这是我使用您的代码得到的：

```
exports <- data.frame(100*rbind('Americas'=runif(6),'Asia'=runif(6),'Other'=runif(6)))
colnames(exports) <- 2004:2009
series_we_want <- c(1,2,3)
barplot( as.matrix(exports[series_we_want,]))
legend(x="topleft", legend=rev(rownames(exports)[series_we_want])) 
```

![在此处输入图像描述](../Images/f494699326d3adf4381751fe963bcd64.png)

尝试这个：

```
exports <- data.frame(100*rbind('Americas'=runif(6),'Asia'=runif(6),'Other'=runif(6)))
colnames(exports) <- 2004:2009
series_we_want <- c(1,2,3)
test_data<-as.matrix(exports[series_we_want])

 barplot( test_data, 
          legend.text=as.character(rev(rownames(exports)[series_we_want])), 
           args.legend = list(x="topleft")) 
```

似乎以与您所拥有的相反的顺序产生图例

![在此处输入图像描述](../Images/7009730704cfbae168b9c05f8eeeb4c1.png)

# jquery - Onclick 统计 Jquery 中 JSON 返回的对象

> ID：10526378
> 
> 赞同：0
> 
> 时间：2012-05-10T01:26:19.400
> 
> 标签：jquery, json

我有一个链接列表，当我单击它时，我想计算列表中包含的元素。这是我编码的：

```
$('a#' + dataOption.ID).click(function () {
  $.getJSON("ProductListing/Index", data, function (product) {
     $.each(product.ja, function (index, value) {
        num_obj = product.ja.length;
     });
  });
});
alert(num_obj); 
```

警报未定义。

JSON结果是：

```
{"ja":
[
   {"Name":"ABC1","PictureName1":"my image name1","ID":1},   
   {"Name":"ABC2","PictureName2":"my image name2","ID":2}
]} 
```

谁能告诉我，我怎么能在我的点击事件中计算那个 JSON。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:58:48.997

您发布的代码创建了一个点击处理程序，然后立即执行`alert(num_obj)`- 给定`num_obj`未在任何地方声明且点击事件本身尚未发生的情况，此时*应该*`num_obj`是未定义的。

 *尝试将警报移动到函数的回调中`$.getJSON()`，就在`num_obj`实际分配了值的第一个点之后：

```
$('a#' + dataOption.ID).click(function () {
  $.getJSON("ProductListing/Index", data, function (product) {
     var num_obj = product.ja.length;
     alert(num_obj);
  });
}); 
```

请注意，我已经删除了，`$.each()`因为迭代`product.ja`数组并测试`product.ja.length`每个元素是没有意义的（你没有使用`this`or`index`或`value`在里面的事实`$.each()`也是你不需要 each 的线索） .*

# sockets - recv() 返回 0

> ID：10526382
> 
> 赞同：7
> 
> 时间：2012-05-10T01:26:46.513
> 
> 标签：sockets, shutdown, zero, recv, closesocket

我有一个非常烦人的问题，我在其他论坛上多次发现，但我找不到合适的解决方案。问题是 recv() 在连接的最后几个字节上返回 0。以下是一些背景信息。

*   两个（客户端/服务器）应用程序都在同一台机器上运行。
*   两个（客户端/服务器）套接字都是非阻塞的
*   传输的数据大小为 53 字节。
*   执行最后一次 send()/recv() 时，（客户端/服务器）都调用 shutdown 和 closesocket。
*   我也试过 SO_LINGER 和 10 秒，也没有成功

我多次调用 send() （小块），从客户端传输了 53 个字节。服务器多次调用 recv()（4 字节请求）并读取 49 字节，然后返回 0（54 字节 - 49 字节，因此缺少 4 字节）。

MSDN 和一些论坛为非阻塞套接字编写：

*   recv() 在错误时肯定返回 < 0 并且设置了 errno / WSAGetLastError
*   当对方关闭连接时，recv() 肯定会返回 = 0
*   读取数据时，recv() 肯定返回 > 0

MSDN 还说：

> 使用带有 SD_SEND 或 SD_BOTH 的 closesocket 或关闭函数会导致在控制通道上发送 RELEASE 信号。由于 ATM 使用单独的信号和数据通道，RELEASE 信号可能会在最后一个数据到达其目的地之前到达远端，从而导致该数据丢失。一种可能的解决方案是在最后发送的数据与 ATM 套接字的 closesocket 或关闭函数调用之间设置足够的延迟。

这在 recv() 和 send() 的例子中被认为是：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms740121 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740121(v=vs.85).aspx)

但是仍然没有成功，在收到 49 字节后，我仍然在 10% 的连接中得到一些中断，90% 的连接成功。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-10T01:42:25.263

`recv()`仅当您请求 0 字节缓冲区或其他对等方已正常断开连接时才返回 0。如果您没有收到您期望的所有数据，那么您一开始就没有正确读取数据。请使用您的实际代码更新您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-20T13:40:26.080

我的猜测是，您并没有真正发送您认为正在发送的所有数据。查看：

[终极 SO_LINGER 页面](http://blog.netherlabs.nl/articles/2009/01/18/the-ultimate-so_linger-page-or-why-is-my-tcp-not-reliable)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-06-17T10:03:51.977

> *   当对方关闭连接时，recv() 肯定会返回 = 0

这并不完全正确，在下面使用非阻塞winsock2 tcp的代码中，当没有数据可用时，select返回1，recv返回0，WSAGetLastError()也是如此。

```
fd_set test = {1, socket};
const timeval timeout = {0, 0};
if (!::select(0, &test, nullptr, nullptr, &timeout)) return 0;
int done = ::recv(socket, buffer, 1, 0); 
```

即使在另一端呼叫后，这种情况仍在继续：

```
::shutdown(socket, SD_BOTH);
::closesocket(socket); 
```

然后结束。通信按预期工作，只是 ::recv 似乎被“破坏”了。

# javascript - Javascript对象文字范围问题？

> ID：10526384
> 
> 赞同：0
> 
> 时间：2012-05-10T01:27:13.193
> 
> 标签：javascript, jquery, scope

我很难理解为什么`this.$map`并且`this.markers`未定义。这是我正在使用的代码，我添加了注释，我希望这些变量提供一个值：

```
(function($) {
    'use strict';

    var A = {

        /**
         * Initialize the A object
         */
        init: function() {
            this.$map = this.renderMap();
            this.markers = this.getMarkers();

            this.renderMarkers();
        },

        renderMap: function() {

            var url = 'http://a.tiles.mapbox.com/v3/delewis.map-i3eukewg.jsonp';

            // Get metadata about the map from MapBox
            wax.tilejson(url, function(tilejson) {
                var map = new L.Map('map', {zoomControl: false});

                var ma = new L.LatLng(42.2625, -71.8028);

                map.setView(ma, 8);

                // Add MapBox Streets as a base layer
                map.addLayer(new wax.leaf.connector(tilejson));

                return function() {
                    return map;
                };
            });
        },

        renderMarkers: function() {
            var geojsonLayer = new L.GeoJSON(null, {
                pointToLayer: function (latlng){
                    return new L.CircleMarker(latlng, {
                        radius: 8,
                        fillColor: "#ff7800",
                        color: "#000",
                        weight: 1,
                        opacity: 1,
                        fillOpacity: 0.8
                    });
                }
            });

            geojsonLayer.addGeoJSON(this.markers); // this.markers is undefined
            this.$map.addLayer(geojsonLayer); // this.$map is undefined

        },

        getMarkers: function() {
            $.getJSON("/geojson/", function (data) {
                return data;
            });
        }
    };

    /**
     * A interactions
     */
    $(document).ready(function() {
        A.init()
    });

})(jQuery.noConflict()); 
```

我花了一天的大部分时间搜索，我认为我在这里遗漏了一些基本的东西，但我不明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T01:34:02.353

`renderMap`和方法都没有`getMarkers`返回任何值，因此它们的返回值是`undefined`。

看起来您正在尝试从 ajax 请求初始化这些字段，这不一定是个好主意。

您可能应该做的是：

```
getMarkers: function(callback){
    var result = this;
    $.getJSON("url", function(jsonData){ 
        result.markers = jsonData; 
        if(callback) callback()
     });
}, 
```

这将在对象可用时延迟初始化对象的字段。

**注意**：AJAX 是**异步**的，你不能依赖这个回调快速设置成员，或者确实永远（它可能会失败）。这表明您需要更多地考虑您的设计，并尝试更多地使用回调。

例如，修改上面的`getMarkers`and`renderMap`函数以获取在数据存储后调用的回调，然后将 init 更改为：

```
init: function(){
    var res = this;
    var post_init_callback = function(){
        if(res.$map != undefined && res.markers!=undefined){
            //this will only run after both ajax calls are complete
            res.renderMarkers();  
        }
    };
    this.getMarkers(post_init_callback);
    this.renderMap(post_init_callback);
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T01:36:44.117

这里的问题是您在另一个函数中调用 return 。您本质上所做的是将`getMarkers`（最简单的示例）定义为：

```
getMarkers: function() {
    $.getJSON('/geojson/', some_random_func);
} 
```

在这一点上，getMarkers 实际上并没有返回任何东西（ergo undefined）变得很明显。您的 renderMap 函数也是如此。同样在这种情况下，您的“some_random_func”被定义为`function(data) { return data; }`但它返回到什么？事实是，`some_random_func`由 jQuery 本身调用，AFAIK jQuery 根本不关心它的成功函数的返回值。

# javascript - 如何将 x,y,y0 以外的属性附加到 d3 中的流图层？

> ID：10526388
> 
> 赞同：4
> 
> 时间：2012-05-10T01:27:53.993
> 
> 标签：javascript, json, d3.js, stream-graph

我是 d3 新手，我一直在尝试自定义 Streamgraph 示例（[http://mbostock.github.com/d3/ex/stream.html](http://mbostock.github.com/d3/ex/stream.html)）：

![在此处输入图像描述](../Images/e9718ca05f164abd494cbad89a1a1a28.png)

我遇到了一些问题：

我想为流中的每个图层分配一个自定义数据属性（例如，让我们说它是一个名为“类型”的标签），以便当您将鼠标悬停在该图层上时，会出现一个弹出框，其中列出了“类型”那一层。

当我将数据源输入图表时，我使用以下代码：

```
 vis.selectAll("path")
        .data(data0)
      .enter().append("path") 
```

该图似乎只采用以下格式的数据：

```
 [
                 [
                    {
                        "x": 0,
                        "y": 91,
                        "y0": 1.11
                    },
                    {
                        "x": 1,
                        "y": 290,
                        "y0": 1.11
                    }
                ],  
                [
                    {
                        "x": 0,
                        "y": 9,
                        "y0": 1.11
                    },
                    {
                        "x": 1,
                        "y": 49,
                        "y0": 1.11
                    }
                 ]
             ] 
```

上面的每个子数组对应于流图中的一个层。

如何将数据传递给允许我为每一层添加额外的“类型”属性的图表？

基本上，当我参考图层的数据时，我可以输入类似 d.type 的内容并提取该属性？

我最初想出了一个非常骇人听闻的方法来做到这一点：

```
 [
                    {
                        "x": 0,
                        "y": 9,
                        "y0": 1.11,
                        "type": "listings"
                    },
                    {
                        "x": 1,
                        "y": 49,
                        "y0": 1.11,
                    }
                 ] 
```

然后我通过说 d[0].type 在层数据中引用它，但这似乎不是正确的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T03:05:05.900

使用[stack.values](https://github.com/mbostock/d3/wiki/Stack-Layout#wiki-values)，然后用该层的一些附加数据包装每个层的数据点。您的数据将如下所示：

```
[
  {
    "type": "apples",
    "values": [
      { "x": 0, "y":  91},
      { "x": 1, "y": 290}
    ]
  },
  {  
    "type": "oranges",
    "values": [
      { "x": 0, "y":  9},
      { "x": 1, "y": 49}
    ]
  }
] 
```

堆栈布局如下：

```
var stack = d3.layout.stack()
    .offset("wiggle")
    .values(function(d) { return d.values; }); 
```

# ruby-on-rails-3 - Rails3 应用程序在使用通过 Transifex 翻译的 YAML 文件时显示乱码

> ID：10526390
> 
> 赞同：1
> 
> 时间：2012-05-10T01:28:08.793
> 
> 标签：ruby-on-rails-3, encoding, utf-8, yaml, ruby-on-rails-3.2

我已将 YAML 文件从英语翻译成德语（带有“奥地利”口音），然后下载了生成的 YAML 文件。当我输入德语翻译时，我使用 Mac 的“Option-u”键盘快捷键直接输入德语变音符号，例如 ü、ä 和 ö。

当我随后将文件从 Transifex 下载到我的 Rails3 应用程序并尝试使用它时，字符显示为乱码。

我试图添加

```
# encoding: utf-8 
```

在文件的顶部，但这没有帮助，我很难弄清楚 YAML 文件使用什么编码来编码这些多字节字符。

由于其他 UTF 问题，我已强制 YAML 引擎在我的应用程序中运行：

```
# to allow correct parsing of 'f\xC3\xBCr'
YAML::ENGINE.yamler = 'syck' 
```

非常感谢您的帮助。

帕特里克

# r - 包描述中的整理字段

> ID：10526392
> 
> 赞同：30
> 
> 时间：2012-05-10T01:28:17.593
> 
> 标签：r, package

我很抱歉，因为我知道这个答案很可能出现在编写 R 包的手册中，但在我阅读和查看其他包的 Collat​​e 字段时，我无法 100% 弄清楚这个字段的用途。用简单的语言（我的是英语），包的描述文件中的 Collat​​e 字段有什么作用？想放什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-10T02:12:34.330

我认为它来自`R/`目录中文件的来源顺序（与字典默认值相反）仍然很重要的时间和情况。函数`.onLoad()`通常位于名为`zzz.R`.

对于它的价值，我的包中没有一个使用DESCRIPTION中的“Collat​​e：”字段。

*编辑：* 由于我们喜欢经验测量，这里有一个`grep`包含所有 CRAN 资源的机器上的快速说明：

```
$ grep ^Collate */DESCRIPTION | wc -l
292
$ ls -1 */DESCRIPTION | wc -l
3779 
```

所以这是所有包裹的 7.7%。*除非你真的*必须，否则我真的不会担心这个。

# ruby-on-rails - 在 heroku rails 上调试 admin_data

> ID：10526407
> 
> 赞同：0
> 
> 时间：2012-05-10T01:30:34.190
> 
> 标签：ruby-on-rails, heroku, authorization

每当我尝试访问时，我都会收到“未授权”错误：

```
appname.herokuapp.com/admin_data 
```

我创建了一个 admin.rb 文件

```
AdminData.config do |config|
    #comment
    config.is_allowed_to_view = lambda {|controller| return true if (Rails.env.development? || Rails.env.production?) }
end 
```

（我知道上述以下内容存在安全问题，但我只是想在检查管理之前让它工作。）

我试过了

```
bundle exec rake assets:precompile 
```

并且

```
RAILS_ENV=production rake assets:precompile 
```

在推送到 heroku 之前，但我似乎无法克服这个错误。

我已按照以下说明进行操作

[https://github.com/bigbinary/admin_data](https://github.com/bigbinary/admin_data)

但似乎无法让它在生产中发挥作用。

在我的开发机器上它可以工作。

[http://localhost:3000/admin_data](http://localhost:3000/admin_data)显示了属于我的开发环境的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:06:02.283

您确定您的 heroku 实例处于生产模式吗？有时 Heroku 上的实例配置为`staging`.

试试这个：

```
heroku config --app your_app_name 
```

这将返回您的实例的配置变量。您将看到各种配置变量。寻找这些：

```
RACK_ENV             => production
RAILS_ENV            => production 
```

它们设置为`production`或`staging`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T08:57:47.170

[您是否阅读过https://github.com/bigbinary/admin_data/wiki/admin_data-security-configuration-for-a-Rails3-application](https://github.com/bigbinary/admin_data/wiki/admin_data-security-configuration-for-a-Rails3-application)的生产配置部分- 当您的应用程序运行时，您似乎需要采取额外的步骤在生产模式下运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T20:15:54.577

啊，这是一个愚蠢的错误。我没有从我的主分支推送，我的应用程序从未更新

# facebook - Omniauth-facebook 取消按钮

> ID：10526408
> 
> 赞同：6
> 
> 时间：2012-05-10T01:30:57.683
> 
> 标签：facebook, devise, omniauth

我已经开始将 facebook 身份验证集成到我的 Rails 3.1 站点中，但是当我单击 fb auth 对话框上的取消按钮时遇到了问题。当我单击取消时，我被重定向回我的站点 /auth/facebook/callback，然后重定向到 /login 页面（我正在使用 Devise）。

我想要做的是将取消的身份验证重定向到允许用户以标准方式（电子邮件、用户名、密码等）创建帐户的页面。如何覆盖重定向到 /login 页面？

顺便说一句，我正在使用omniauth-facebook gem。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-12T04:09:08.663

在您的 omniauth 回调控制器中添加失败方法并定义您的自定义行为。

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def facebook
        @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)

    if @user.persisted?
      sign_in_and_redirect @user, :event => :authentication #this will throw if @user is not activated
      set_flash_message(:notice, :success, :kind => "Facebook") if is_navigational_format?
    else
      session["devise.facebook_data"] = request.env["omniauth.auth"]
      redirect_to new_user_registration_url
    end
  end

  def failure
    redirect_to root_path // here
  end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T21:09:42.947

我认为您可能能够在您的omniauth 配置中覆盖默认的on_failure 行为，我没有使用设计，但正在使用omniauth-facebook gem，并且在以下方面取得了成功：

```
OmniAuth.config.on_failure = Proc.new { |env|
  OmniAuth::FailureEndpoint.new(env).redirect_to_failure
} 
```

或更自定义的东西，例如：

```
OmniAuth.config.on_failure do |env|
  new_path = "#{env['SCRIPT_NAME']}#{OmniAuth.config.path_prefix}/failure?message=#{error_type}"

  [302, {'Location' => new_path, 'Content-Type'=> 'text/html'}, []]
end 
```

# c# - 如何获取所有元素以及是否已分配它们？

> ID：10526409
> 
> 赞同：2
> 
> 时间：2012-05-10T01:31:17.110
> 
> 标签：c#, linq, entity-framework

我有以下模型。

```
Subscription    Packages    PackageWidgets    Widgets
------------    --------    --------------    -------
ID              ID        < PackageID         ID
PackageID    >              WidgetID       > 
```

我正在使用 Entity Framework 4，并且 a`Subscription`与`Package`. 并且`Package`与一个列表有关系`Widgets`。

使用 Linq，我试图获取*所有* `Widgets`列表以及它们是否包含在当前订阅中。也许是由于我的 SQL 背景，我只是没有在 Linq 中看到查询。SQL 将涉及来自 Widgets 的 SELECT，通过基于传入的 SubscriptionID 的 Subscriptions、Packages 和 PackageWidgets 的子选择进行 LEFT JOIN。

我期望的输出将是`WidgetID,IsIncluded`这样的，即我将拥有所有小部件 ID 和一个指示包含状态的布尔值。

为了展示我到目前为止所做的事情，我似乎什至无法获得远程接近工作的东西。

谁能给我一些关于如何完成我的查询的见解？

**更新：** 这是我已经接近的，但它仍然不起作用。也许它会帮助说明我想要完成的事情：

```
from subscription in Subscriptions
where subscription.ID == 3
let subWidgets = subscription.Package.Widgets
from widget in Widgets
join subWidget in subWidgets on widget.ID equals subWidget.ID into joined
from list in joined.DefaultIfEmpty()
select new {
    ID = widget.ID
    ,Selected = subWidget.ID != null
} 
```

**更新 #2** 多亏了接受的答案，这就是我最终要做的——这正是我需要的：

```
from widget in Widgets
from subWidgets in
  from subscription in Subscriptions
  where subscription.ID == 3
  select subscription.Package.Widgets
orderby widget.ID
select new { 
    Name = widget.WidgetName,
  Available = subWidgets.Contains(widget)
} 
```

感谢您的协助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:35:50.460

解决它的一种方法是将其分解，例如：

```
var widgetsInSubscription =
    from subscription in Subscriptions
    where subscription.ID == 3
    from widget in subscription.Package.Widgets
    select widget;

var allWidgets =
    from widget in Widgets
    select new
    {
        widget.ID,
        Selected = widgetsInSubscription.Contains(widget),
    }; 
```

或者根据 ID 而不是对象来做，比如：

```
var widgetIDsInSubscription =
    from subscription in Subscriptions
    where subscription.ID == 3
    from widget in subscription.Package.Widgets
    select widget.ID;

var allWidgets =
    from widget in Widgets
    select new
    {
        widget.ID,
        Selected = widgetIDsInSubscription .Contains(widget.ID),
    }; 
```

请记住，如果需要，您始终可以自己进行查询 - 在 EF4 中，您只需使用自己的 SQL调用[ExecuteStoreQuery](http://msdn.microsoft.com/en-us/library/dd487208.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:41:46.550

就像是：

```
from s in db.Subscriptions
from p in db.Packages
from pw in db.PackageWidgets
from w in db.Widgets
where w.ID == pw.WidgetID &&
      pw.PackageID == p.ID &&
      s.PackageID == p.ID
select w; 
```

不知道它是否有效。但是，如果您有 myPackage.Subscriptions 等属性，这可能会简化很多。

# javascript - 带有java脚本的网页在firefox中不起作用

> ID：10526411
> 
> 赞同：1
> 
> 时间：2012-05-10T01:32:00.763
> 
> 标签：javascript, html

我在图像上使用地图。在该地图中，我获得了不同区域的鼠标悬停效果。另外，我有一个脚本，可以在单击该区域时打开图像缩略图。这是我正在使用的脚本：http: [//britobmarketing.com/thumbnailviewer.js](http://britobmarketing.com/thumbnailviewer.js)

问题是它在Firefox中不起作用。不是鼠标悬停效果，不是缩略图脚​​本。它根本不起作用。

有什么建议吗？

我真的很想坚持使用 java 脚本而不是进入 Jquery！

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:04:37.330

假设您使用的页面是：[http ://britobmarketing.com/](http://britobmarketing.com/)

* * *

您的问题似乎与您如何定义图像图有关；不是javascript是如何工作的

您的图像地图设置：

```
<map name="mainMap">
    <a rel="thumbnail" href="images/contactUsPic.jpg">
        <area onmouseout="document.pic1.src='images/mapPics.gif'" onmouseover="document.pic1.src='images/contactUs.gif'" title="Contact Us" shape="rect" coords="798,481,877,572">
    </a>
    <area target="_blank" href="http://www.facebook.com/britoBMarketing" title="Facebook" shape="rect" coords="884,298,956,357">
</map> 
```

玩弄 Firebug 的“检查元素”，似乎去掉`target`and`title`属性似乎可以解决问题。

此外，您的 main`<area/>`被锚点 ( ) 包裹，`<a>`这可能会阻止它们工作。

尝试这样的事情：

```
<map name="mainMap">
 <area coords="191,138,487,233" shape="rect" href="" onmouseover="alert('hello')">
</map> 
```

# javascript - 为什么在属性列表错误后我会丢失这个 }？:(

> ID：10526414
> 
> 赞同：-2
> 
> 时间：2012-05-10T01:32:27.517
> 
> 标签：javascript, jquery

我知道这很容易，但我就是看不到。谁能告诉我为什么我收到`missing } after property list`以下代码的错误“”：

```
<script type="text/javascript">

$(".single_image").live("click", function() {
    jwplayer().load({
        file: 'utubeurl'
    });
});​

</script> 
```

整个代码如下所示：

```
 $(xml).find('item').each(function(i){
                var current=$(this);
                var ttl=current.find('title:first').text();
                var thum=current.find('thumbnail:first').text();
                var cat=current.find('category:first').text().split(',');
                var desc = current.find('description:first').text();
                var utubeurl = current.find('youtubeurl:first').text();
                var fbshareurl = current.find('facebookshareurl:first').text();
                var twturl = current.find('twitterurl:first').text();
                var nbcurl = current.find('nbcsiteurl:first').text();

                var item = {
                    title:ttl,
                    thumbnail:thum,
                    category:cat,
                    description:desc,
                    youtubeurl:utubeurl,
                    facebookshareurl:fbshareurl,
                    twitterurl:twturl,
                    nbcsiteurl:nbcurl,
                    obj:$('<div class="'+options.itemClass+'"><a id="'+parentId+'" class="single_image" title="'+desc+'"><script type="text/javascript"> $(".single_image").live("click",function(){ jwplayer().load({file:'+utubeurl+'}); }); </script><img src="'+thum+'" /></a><div class="show_lightbox_title"><strong>'+ttl+'</strong></div><ul id="social"><li><iframe src="'+fbshareurl+'" class="iframe_style" scrolling="no" frameborder="0" allowtransparency="true"/></li><li><a class="twtbtn" href="'+twturl+'" target="_blank"><img src="images/twitter_btn.gif"></a></li><a class="nbcbtn" href="'+nbcurl+'" target="_blank"><img src="images/showPages_btn.gif"></a></div>')
                };
                shows.push(item);
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:50:54.883

尝试将文件属性放在引号下，如下所示：

```
function () {

'file' : 'utubeurl'

} 
```

- 编辑：

我的错，算了，我对 json、jquery 和其他一些 j 感到困惑，你正在定义一个属性，不需要将内存插槽的名称设为字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T19:07:49.087

您需要在此处引用您的财产价值：

```
obj:$('<div class="'+options.itemClass+'"><a id="'+parentId+'" class="single_image" title="'+desc+'"><script type="text/javascript"> $(".single_image").live("click",function(){ jwplayer().load({file:'+utubeurl+'}); }); </script><img src="'+thum+'" /></a><div class="show_lightbox_title"><strong>'+ttl+'</strong></div><ul id="social"><li><iframe src="'+fbshareurl+'" class="iframe_style" scrolling="no" frameborder="0" allowtransparency="true"/></li><li><a class="twtbtn" href="'+twturl+'" target="_blank"><img src="images/twitter_btn.gif"></a></li><a class="nbcbtn" href="'+nbcurl+'" target="_blank"><img src="images/showPages_btn.gif"></a></div>') 
```

...这：

```
'... jwplayer().load({file:'+utubeurl+'}); ...' 
```

...需要是：

```
'... jwplayer().load({file:"'+utubeurl+'"}); ...' 
```

...注意额外的引号。不确定添加这些引号是否会破坏您的 looooooooong（难以阅读/支持）字符串，您可能需要转义它们。但你明白吗？

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T01:39:01.337

当我复制并粘贴该代码块时，我看到第二个结束符后面有一个额外的字符 });

删除它对我来说在控制台中执行得很好，所以如果这不是错误的来源，我会在页面的其他地方查看。

该页面是否可公开访问？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T18:47:00.730

通过href传递一个变量然后将其传递给命令播放url来解决问题。

```
var item = {
                    title:ttl,
                    thumbnail:thum,
                    category:cat,
                    description:desc,
                    youtubeurl:utubeurl,
                    facebookshareurl:fbshareurl,
                    twitterurl:twturl,
                    nbcsiteurl:nbcurl,
                    obj:$('<div class="'+options.itemClass+'"><a href="javascript:utubeurlParser(\''+utubeurl+'\')" id="'+parentId+'" class="single_image" title="'+desc+'"><img src="'+thum+'" /></a><div class="show_lightbox_title"><strong>'+ttl+'</strong></div><ul id="social"><li><iframe src="'+fbshareurl+'" class="iframe_style" scrolling="no" frameborder="0" allowtransparency="true"/></li><li><a class="twtbtn" href="'+twturl+'" target="_blank"><img src="images/twitter_btn.gif"></a></li><a class="nbcbtn" href="'+nbcurl+'" target="_blank"><img src="images/showPages_btn.gif"></a></div>')
                };
                shows.push(item);
            });

            setSetter();
        }
    });
}
utubeurlParser = function(url){
              jwplayer().load({file: [url]});} 
```

# ruby-on-rails-3 - Rails 3：回形针条件样式过早初始化

> ID：10526415
> 
> 赞同：0
> 
> 时间：2012-05-10T01:32:56.487
> 
> 标签：ruby-on-rails-3, forms, paperclip

Paperclip 在处理表单参数之前初始化样式，从而忽略了我指定自定义调整大小的尝试。

模型：

```
 attr_accessor :new_width, :new_height        

    has_attached_file :attachment,
      styles: lambda { |attachment| attachment.instance.set_styles }
      ...

    def set_styles
      # Default thumb:
      styles = { thumb: '100x100>' }

      # Resize original if new sizes have been specified
      if new_width and new_height
        styles[:original] = "#{new_width}x#{new_height}>"
      end

      styles
    end 
```

我可以通过日志文件看到定义了样式和`convert`之前触发的命令，`new_width`并`new_height`为其分配了控制器传递的值。

Rails 服务器日志文件：

```
 {:thumb=>"100x100>"} # logger.info in the model
    ...
    # Command :: convert ... etc
    # [paperclip] Saving attachments.
    ...
    {:thumb=>"100x100>", :original=>"300x300>"}  # logger.info in the model 
```

当自定义尺寸分配给实例时，ImageMagick 命令已经被 Paperclip 触发。

如何在处理图像之前将自定义尺寸传递给 Paperclip 以定义样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:18:29.067

在保存模型之前，您是否尝试过在模型中使用回调来计算宽度和高度？

```
before_save :set_styles 
```

从附件上的回形针文档中，回形针附件在模型保存时保存并在分配时处理文件。

# ruby-on-rails - 我应该总是用哪个来解析日期时间？日期时间、时间、时区？

> ID：10526416
> 
> 赞同：12
> 
> 时间：2012-05-10T01:33:00.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 Rails 中，我看到我有几个选项可以解析日期和日期时间。仅出于通过 ActiveRecord 将日期持久保存到数据库中的目的而​​解析日期的最佳做法是什么？为什么？

```
Time.zone.parse(...)
Time.parse(...)
DateTime.parse(...) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-10T01:48:37.583

如果您只想写入 ActiveRecord，请使用 Time.zone.parse。

应避免使用日期时间。如果你正在处理日期，你应该使用 Date.parse 代替。

除此之外，这取决于输入是否带有时区信息、当前时区设置为什么以及您是否需要数据中的时区。

Time.zone.parse 将返回一个 ActiveSupport::TimeWithZone，默认为 UTC。

```
> Time.zone.parse("12:30")
=> Thu, 10 May 2012 12:30:00 UTC +00:00 
```

Time.parse 将返回一个时间，如果它在输入中指定，则带有一个区域，或本地 TZ。

```
> Time.parse("12:30")
=> 2012-05-09 12:30:00 -0700 
```

有关 Ruby 时间比较和精度的更详细说明，请阅读此博客文章：

[http://blog.solanolabs.com/rails-time-comparisons-devil-details-etc/](http://blog.solanolabs.com/rails-time-comparisons-devil-details-etc/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T01:41:48.090

ActiveRecord 自动设置的时间（例如`created_at`和`updated_at`）作为[`ActiveSupport::TimeWithZone`](http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html)​​实例返回。

根据文档，`ActiveSupport::TimeWithZone`并且`Time`具有相同的 API，`Time`我将使用相同的 API。

`to_time`在不相关的注释中，有一些方法`to_datetime`可以调用字符串：

```
"2012-05-09".to_time # => 2012-05-09 00:00:00 UTC 
"2012-05-09".to_datetime # => Wed, 09 May 2012 00:00:00 +0000 
```

# c++ - C++11 标准是否正式定义了获取、释放和消费操作？

> ID：10526419
> 
> 赞同：21
> 
> 时间：2012-05-10T01:33:31.333
> 
> 标签：c++, c++11, standards

在 C++11 标准中，第 1.10/5 节提到但没有正式定义术语`acquire operation`、`release operation`和`consume operation`. 然后在第 29 节继续使用这些术语来描述某些内存排序、原子操作和内存栅栏的操作。例如，关于“秩序和一致性”的 29.3/1 指出：

> **memory_order_release**、**memory_order_acq_rel**和**memory_order_seq_cst**：存储操作对受影响的内存位置执行*释放操作*[强调添加]。

这种类型的语言在第 29 节中重复出现，但让我有点困扰的是`memory_order`枚举的所有含义都基于操作类型，这些操作类型本身似乎没有被标准形式化，但必须具有一些普遍同意的含义作为定义有效。

换一种说法，如果我说“一个 bar 是一个翻转的 foo”，那么*bar*和*foo*的具体含义是模棱两可的，因为这两个术语都没有正式定义。仅定义了它们的相对性质。

`acquire operation`C++11 标准或其他一些 C++11 标准委员会文件是否正式定义了,等究竟是什么`release operation`，或者这些只是普遍理解的术语？如果是后者，对于这些操作的含义，是否有一个很好的参考被认为是行业标准？我特别问，因为硬件内存一致性模型不是平等的，因此我认为必须有一些普遍同意的参考，允许那些实现编译器等的人正确地将这些操作的语义转换为本机汇编命令。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T02:52:10.247

在其中一个注释中给出了一个非正式的总结定义：

> 执行释放操作`A`会强制其他内存位置上的先前副作用对稍后执行消耗或获取操作的其他线程可见`A`。

除此之外，获取和释放操作的行为在 1.10 中完全定义，特别是它们如何促成*发生前的*关系。除了行为之外的任何定义都是无用的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T02:30:25.777

在快速浏览标准后，我没有看到任何正式的获取/释放语义定义，所以我的猜测是它们被假定为普遍理解的术语。

毕竟，他们无法定义一切。

这不是一个明确的参考，但[Raymond Chen 写过关于获取/释放语义的博客](http://blogs.msdn.com/b/oldnewthing/archive/2008/10/03/8969397.aspx)。他的帖子包含[一个指向 Microsoft 对获取和释放语义的定义的链接](http://msdn.microsoft.com/en-us/library/ff540496.aspx)，您可能会发现它很有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T02:48:54.670

实际上，这些操作在第 1.10/5-12 节中定义。

`release/acquire`pair 对应于*发生在*关系之前；而与*依赖排序的前*`release/consume`关系配对。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T02:38:30.270

我还认为获取/释放语义本身是相当确定的；尽管它们在历史上是更多特定于硬件的术语，而不是编程术语。

但是，我认为第 1.10 节第 5 和第 6 节似乎与我在其他语言标准以及 CPU 定义中阅读的所有获取/释放语义定义相匹配。

无论如何，C++11 的主要点之一是定义一个现代内存模型来支持并发和多线程代码。我很难相信他们没有做对:)*

# iphone - XCode 环境变量与 TEST 和 PROD 的属性列表

> ID：10526420
> 
> 赞同：0
> 
> 时间：2012-05-10T01:33:32.927
> 
> 标签：iphone, ios, xcode, plist

我对 IOS 开发有些陌生，想根据我的应用程序的构建方案找到管理环境变量的最佳方法。

因此，如果我执行调试构建，我希望我的应用程序从服务器检索所有数据说

```
http://debugserver1.blah.com 
```

同样，如果我执行测试构建，我希望我的应用程序从服务器检索所有数据说

```
http://testserver2.blah.com 
```

而对于产品

```
http://prodserver.blah.com 
```

我确信这是一种不常见的情况，我正在尝试找出解决此问题的最佳方法。我研究了环境变量，但我认为这没有意义，所以我倾向于 pLists。

你们能帮助我将某些 pLists 与某些方案构建相关联吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T20:27:37.397

您可以通过使用`#include`每个源文件中的定义文件来做到这一点。例如：

## 服务器名.h

```
#define DEBUG_BUILD
//#define TEST_BUILD
//#define PRODUCTION_BUILD

#if defined(DEBUG_BUILD)
    #define SERVER_NAME "http://debugserver1.blah.com"
#elif defined(TEST_BUILD)
    #define SERVER_NAME "http://testserver2.blah.com"
#elif defined(PRODUCTION_BUILD)
    #define SERVER_NAME "http://prodserver.blah.com"
#else
    #error Must define build type
#endif 
```

然后，在您需要使用的每个源文件中`SERVER_NAME`，在顶部执行：

```
#include "servername.h" 
```

以上将起作用，但您需要编辑`servername.h`以更改构建类型。更好的方法是从 中删除`#define`语句`servername.h`，并使用 Xcode 中的构建设置来定义构建类型。为此，请转到您的构建设置并向下滚动，直到找到预处理部分。默认项目如下所示：

![在此处输入图像描述](../Images/d65f55e24f9cdeee68fbb3588d713f80.png)

在该部分中，对于每种类型的构建，您可以根据需要添加`DEBUG_BUILD`、`TEST_BUILD`或`PRODUCTION_BUILD`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T20:39:13.717

这是一个非常常见的场景，并且很容易处理。默认情况下，当你创建一个新项目时，`DEBUG`是`#defined`为**Debug**构建配置，而不是为**Release**配置。对于您的**测试**配置，您可能会复制**Debug**并添加一个`#define`for`TEST`

我可能会创建一个管理器类来处理您的 API 调用，并添加一个属性：

```
@property (nonatomic, strong) NSString * baseURLString; 
```

然后在你的类的 init 方法中：

```
#if defined(DEBUG)
self.baseURLString = "http://debugserver1.blah.com";
#elif defined(TEST) 
self.baseURLString = "http://testserver1.blah.com";
#else
self.baseURLString = "http://prodserver1.blah.com";
#endif 
```

然后使用`baseURLString`构造 URL 来进行 API 调用。

# node.js - Backbone.js - 修改已经渲染的页面

> ID：10526423
> 
> 赞同：2
> 
> 时间：2012-05-10T01:34:13.950
> 
> 标签：node.js, backbone.js, pug

我正在尝试在（相对简单的）node.js webapp的上下文中学习jade模板系统和backbone.js。我使用 express.js 作为我的框架。无论如何，backbone.js 看起来非常有趣且功能强大，但我不想在客户端呈现我的客户端。

我宁愿用节点和玉渲染服务器端，将渲染页面发送给客户端，然后使用主干修改实时内容。解决这个问题的最佳方法是什么？换句话说，在已经渲染和结构化的页面上使用主干的最佳方式是什么？我意识到我并没有充分利用主干，但我几乎只是尝试使用主干而不是一堆 jQuery 选择器和事件处理程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T04:40:57.797

`el`您的主干视图可以通过在实例化视图时传递对元素的引用来引用现有的 DOM 元素。

```
var myViewInstance = new MyViewClass({el: $('#existingDOMElement')}); 
```

您在视图类中声明的任何事件处理程序都将绑定到与事件选择器匹配的任何子元素。前任：

```
<html>
    <body>
        <div id='myView'>
            <a class='foo'>Foo</a>
        </div>

        <script>
            var MyViewClass = Backbone.View.extend({
                events: {
                    'click .foo': 'fooClicked'
                },
                fooClicked: function(e) {
                    e.preventDefault();
                    console.log('.foo clicked');
                }
            });

            new MyViewClass({el: $('#myView')});
        </script>

    </body>
</html> 
```

# hash - 美国电话号码的良好哈希函数？

> ID：10526425
> 
> 赞同：0
> 
> 时间：2012-05-10T01:34:32.857
> 
> 标签：hash

美国电话号码的良好散列函数是什么？哪个基本上是10位数字？在我看来，一个简单的：

```
(p1 * (areaCode + p2 * exchangeCode) + extensionCode) % r; 
```

其中`p1`和`p2`是一些素数，“r”是缩小范围，应该很快并且具有良好的散列属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:39:44.473

为什么不只尝试最后一位数字和 10 个“槽”哈希表呢？恕我直言，这应该给出一个相当均匀的分布。

# javascript - 接受权限后自动登录 Facebook 用户

> ID：10526428
> 
> 赞同：0
> 
> 时间：2012-05-10T01:35:03.927
> 
> 标签：javascript, facebook, facebook-graph-api

我正在尝试将已经允许我们的 facebook 应用程序的用户自动登录到我的网站，最初我打算使用：

```
 var cb = function(response) {   
    if (response.status === 'connected') {
       FB.api('/me', function(response) {
        $.post( url, { 'op':'facebook','name':response['name'],'id':response['id'],'email':response['email']},
           function( data ) {
                parent.location.reload();

           });
      });
    } else {
      alert('You are not logged in');
    }
  };
  FB.login(cb, { scope: 'publish_actions,publish_stream,read_stream,email' }); 
```

虽然使用它会打开一个 facebook 弹出窗口，但当以这样的自动方式完成时，它会被许多弹出窗口阻止程序和浏览器阻止，并且还会显示给不允许我们的应用程序的用户。

我希望它谨慎地完成，但我不确定如何：S

如果有人能告诉我如何使用 javascript 让他们登录，那就太好了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:42:46.643

提示用户登录应该取决于用户生成的事件，比如点击一个元素。大多数浏览器会阻止自动打开新窗口的尝试，除非有足够的信心确定用户已请求该操作。

如果您想在访问者加载您的页面时自动检测访问者的登录状态，您应该挂钩 Javascript SDK 公开的各种身份验证事件（“auth.authResponseChange”、“auth.login”等），或者手动请求访问者的状态使用“FB.getLoginStatus”方法。[您可以在https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)阅读有关这些事件的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:08:44.523

设法让它工作！再次阅读facebook教程，这就是我想出的

```
window.onload=function(){
var url = "http://mysite.com/";
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
       FB.api('/me', function(response) {
        $.post( url, { 'op':'facebook','name':response['name'],'id':response['id'],'email':response['email']},
           function( data ) {
                parent.location.reload();

           });
        });
    }
  });
}; 
```

# html - HTML 图像相对大小在 Chrome 中未按预期拉伸

> ID：10526429
> 
> 赞同：0
> 
> 时间：2012-05-10T01:35:07.937
> 
> 标签：html, css, html-table, webkit

该图像没有将其高度拉伸为宽度的原因是什么？

**仅在 Webkit 中！**

 `[http://jsfiddle.net/CgEhg/8/](http://jsfiddle.net/CgEhg/8/)

编辑：很多人遇到麻烦，只需使用 Chrome

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:27:27.640

除非您有多个表格和多个图像用于不同数据的布局，否则您可以为`table`or定义相同的样式，这应该`td`与and一起使用。 `img``Chrome``IE``Firefox`

Fiddle 上的示例[**`http://jsfiddle.net/2BdQT/`**](http://jsfiddle.net/2BdQT/)

或者

**CSS**：

```
table, img
{
    height:40px;
    width:40px;
}

td,tr,tbody
{
    width:100%;
    height:100%;
} 
```

​<strong>html:

```
<table  border="0" cellspacing="0" cellpadding="0">
    <tr>
        <td><img src="http://www.google.com/logos/2012/stgeorge12-hp.png"></td>

    </tr>
</table> 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:47:13.407

您需要样式`td`而`table`不是`img`标签

**[jsFiddle](http://jsfiddle.net/CgEhg/16/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:29:38.180

这是你能做的最好的：http: [//jsfiddle.net/CgEhg/41/](http://jsfiddle.net/CgEhg/41/)

```
<table  border="0" cellspacing="0" cellpadding="0">
    <tr>
        <td><img src="http://www.google.com/logos/2012/stgeorge12-hp.png" /></td>       
    </tr>
</table> 
```

```
table{
    height:40px;
    width:40px;
}    
img{
    height:auto;
     width:100%;
}
td,tr,tbody{
    height:100%;
    height:100%;
} 
````

# php - 计算类别中的分类数量

> ID：10526430
> 
> 赞同：0
> 
> 时间：2012-05-10T01:35:08.123
> 
> 标签：php

我有一张桌子`categories`：`id, name, subcategory_id, parent_id`. 另一个表`classifieds`有：`classified_id, title, description, category_id`。

我正在尝试提取每个类别中的分类广告数量。所以它看起来像这样。

*   配件(10)
*   汽车(15)
*   约会(12)

我试了一下：

```
enter $catquery  = mysql_query("SELECT * FROM categories WHERE sub_id = '0' ORDER BY name ASC"); here

enter  $catrows = mysql_num_rows($catquery);  here
enter $catrows = mysql_num_rows($catquery); here
enter $query = "SELECT category_id, COUNT(title) AS `total` FROM classifieds WHERE classified_id = 'category_id' "; here
enter $result = mysql_query($query); here
enter while($row = mysql_fetch_assoc($result)){ $num_items_in_category[$row['category_id']] = $row['total'];  here

enter } echo "<li><a href='category.php?cat=".$row['id']."'>".$row['name']. $row['total']. "</a></li>"; here 
```

谢谢各位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:44:45.450

COUNT 是一个聚合函数，因此您可以一次获取所有计数。

我相信你正在寻找的是

```
$query = "SELECT category-id, COUNT(title) AS `total` FROM classifieds WHERE classified-id = 'category-cat' GROUP BY category-id";
$result = mysql_query($query);

while($row = mysql_fetch_assoc($result)){
  $num_items_in_category[$row['category-id']] = $row['total']; 
} 
```

这将为您提供关联数组，其中包含每个类别 ID 的记录数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T01:46:02.653

通过加入 2 个表格，您应该能够完成您正在寻找的内容。

```
SELECT a.name, count(*) as cnt
FROM categories a
    join classifieds b
    on a.id = b.category_id
group by a.name 
```

# java - f:viewParam 在调用第二个 ajax 请求时出现 Converter 和 ViewScoped 异常

> ID：10526431
> 
> 赞同：3
> 
> 时间：2012-05-10T01:35:09.757
> 
> 标签：java, validation, jsf, viewparams, omnifaces

我有这个`f:viewParam`，我尝试绑定 validate 并将 a 转换`userId`为`Player`，我得到了**意想不到**的结果。

```
<f:metadata>
    <f:viewParam name="userId" value="#{myBean.selectedPlayer}" converter="pConverter"
         converterMessage="Bad Request. Unknown User" required="true"
         requiredMessage="Bad Request. Please use a link from within the system" />

</f:metadata>
<h:body>
    <p:messages id="msgs"/>        
    <h:form>
        <ul>
            <li><a href="index2.xhtml?userId=1">Harry</a></li>
            <li><a href="index2.xhtml?userId=2">Tom</a></li>
            <li><a href="index2.xhtml?userId=3">Peter</a></li>
        </ul>            
    </h:form>
    <h:form>
        <h:panelGrid columns="2" rendered="#{not empty myBean.selectedPlayer}">

            <h:outputText value="Id: #{myBean.selectedPlayer.id}"/>

            <h:outputText value="Name: #{myBean.selectedPlayer.name}"/>

        </h:panelGrid>
    </h:form>
    <h:form id="testForm">
        <h:inputText value="#{myBean.text}"/>
        <p:commandButton value="Switch" update=":msgs testForm"/>
        <h:outputText value="#{myBean.text}" rendered="#{not empty myBean.text}"/>
    </h:form>    
</h:body> 
```

我的转换器看起来像这样

```
@FacesConverter(value="pConverter")
public class PConverter implements Converter {
private static final List<Player> playerList;
static{
    playerList = new ArrayList<Player>();        
    playerList.add(new Player(1, "Harry"));
    playerList.add(new Player(2, "Tom"));
    playerList.add(new Player(3, "Peter"));
}

@Override
public Object getAsObject(FacesContext fc, UIComponent uic, String value) {
    if(value == null || !value.matches("\\d+")){
        return null;
    }
    long id = Long.parseLong(value);
    for(Player p : playerList){
        if(p.getId() == id){
            return p;
        }
    }
    throw new ConverterException(new FacesMessage("Unknown userId: " + value));

}

@Override
public String getAsString(FacesContext fc, UIComponent uic, Object value) {
    if(!(value instanceof Player) || value == null){
        return null;
    }
    return String.valueOf(((Player)value).getId());
}
} 
```

当我单击三个链接（Harry、Tom、Peter）时，转换器工作得很好。它转换 id 并将`player`回绑定到我的托管 bean。然后我在文本框中输入一些东西，然后单击`Switch`，第一次它工作正常，我输入的内容出现在按钮旁边，但后来我更改了我输入的内容，`Switch`再次单击，然后出现错误消息`Bad Request. Please use a link from within the system`，这是错误消息为. `required`_ `f:viewParam`如果我把 f:viewParam 拿出来，那么一切正常。令人惊讶的是，如果我从 f:viewParam 切换到 o:viewParam (OmniFaces)，那么效果很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T02:18:47.590

这是因为`<f:viewParam>`在每个 HTTP 请求上运行，也在回发上。它在您的情况下适用于普通的 GET 链接，因为您在链接中准确地传递了该参数。对于 POST 表单，它会失败，因为您没有在按钮中传递该参数。因此它出现`null`在请求参数映射中，`required`验证器启动，因此出现此验证错误。

为了保持`<f:viewParam required="true">`对 POST 表单的满意，您基本上需要`<f:param>`在命令按钮/链接中保留初始请求参数。

```
<p:commandButton value="Switch" update=":msgs testForm">
    <f:param name="userId" value="#{param.userId}" />
</p:commandButton> 
```

OmniFaces[`<o:viewParam>`](http://showcase.omnifaces.org/components/viewParam)旨在与视图范围的 bean 结合使用，在`isRequired()`getter 中有一个额外的检查（[源代码在这里](https://github.com/omnifaces/omnifaces/blob/master/src/org/omnifaces/component/input/ViewParam.java)）：

```
@Override
public boolean isRequired() {
    // The request parameter get lost on postbacks, however it's already present in the view scoped bean.
    // So we can safely skip the required validation on postbacks.
    return !FacesContext.getCurrentInstance().isPostback() && super.isRequired();
} 
```

因此，这会`required`在每次回发时跳过验证器（此外，由于其无状态性质，它还会在每次回发时跳过设置模型值）。这就是为什么您看不到验证错误并且您仍然拥有正确的模型值（不会在每次回发时重置）的原因。

# php - JavaScript 中的 PHP 会话变量

> ID：10526435
> 
> 赞同：-2
> 
> 时间：2012-05-10T01:35:41.247
> 
> 标签：php, javascript, session, passwords

我怎么能在其中输入 php，所以当它有正确的密码时，它会将信息存储为 cookie，然后也允许删除它。

```
 <SCRIPT language="JavaScript">
    <!--hide

    var password;

    var pass1="password";

    password=prompt('Please enter your password to view this page!',' ');

    if (password==pass1){
      alert('Password Correct! Click OK to enter!');}
    else
       {
        window.location="//Some Location//";
        }

    //-->
    </SCRIPT> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T01:38:23.827

如果它足够简单*（根据标题）*

```
var varname = '<?php echo $_SESSION["variable_name"]; ?>'; 
```

但是你必须认真考虑你的逻辑。您正在检查 javascript 上的身份验证，这将是Web 应用程序中*最愚蠢*的举动。

密码完全暴露，任何人都可以查看它们或整体关闭 javascript，那么您的整个网站就会变得容易受到攻击。

* * *

我的建议是对 PHP 页面的 AJAX 请求，该页面单独检查和验证密码，然后将消息返回给 Javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T01:39:07.323

这是完全错误的：

*   您将在页面的源代码和浏览器的历史记录中显示密码，供任何人查看。因此，即使他们没有密码，他们也可以通过查看源代码来获取它。
*   您需要保护当前页面**服务器端**，因为任何禁用 javascript 的人现在都可以打开它。一种简单的方法是处理登录服务器端并为成功登录的用户设置某个会话变量。然后，您可以在页面顶部检查是否设置了该会话变量。

# objective-c - 是否有用于管理不同 Cocoa 视图和菜单中的对象状态的标准模式？

> ID：10526436
> 
> 赞同：0
> 
> 时间：2012-05-10T01:35:46.187
> 
> 标签：objective-c, cocoa, observer-pattern

在 Cocoa 应用程序中是否有一个标准模式来保持 UI 和其他元素状态同步？例如，我有一个由一个类管理的主菜单和一个由另一个类管理的工具栏。某些菜单项必须反映工具栏中的当前选择，反之亦然。我打算通过让菜单项和工具栏项触发的选择器触发通知来处理这个问题。控制类将订阅这些更新 UI 以匹配选择。这是做到这一点的好方法还是我错过了在 Cocoa 中做到这一点的其他自然方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:58:01.530

对于应启用或禁用项目的特定情况，应留给目标（如果目标是第一响应者，则应留给隐式目标）。它应该为此使用[用户界面验证](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/UIValidation/UIValidation.html)。

绑定是另一种很好的技术。管理 UI 的状态应该在模型或控制器中，并且 UI 应该绑定到它。（如果 UI 要绑定到模型，它应该*通过*控制器。）这样，您只需确保状态是最新且一致的，其他一切都会自动发生。

但是，您描述的技术是一个很好的第三种选择。当模型发生变化时，模型应该向控制器层提供通知（通过`NSNotifications`或委托）。控制器层监视这些，并且非常了解状态更改应该对 UI 产生什么影响，并显式配置 UI 以使其符合。

# iphone - 在实际代码中获取 Xcode 项目的名称

> ID：10526439
> 
> 赞同：2
> 
> 时间：2012-05-10T01:37:17.143
> 
> 标签：iphone, objective-c, xcode, ipad

所以你知道项目的“MyNameGoesHere.app”或“MyNameGoesHere.xcodeproj”的部分 - 有没有办法通过objective-c代码获取MyNameGoesHere部分？

我可以从 UIDevice 消息中获取所有类型的设备信息，但我不知道如何获取项目/应用程序名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-23T12:52:23.090

`CFBundleDisplayName`不再起作用了。采用：

```
NSString *bundleName = [[NSBundle mainBundle]
                         objectForInfoDictionaryKey:@"CFBundleName"]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T01:47:31.030

您可能正在查看捆绑包的 InfoDictionary。您可以通过以下代码获取应用程序的名称：

```
NSDictionary *info = [[NSBundle mainBundle] infoDictionary];
NSString *bundleName = [NSString stringWithFormat:@"%@", [info objectForKey:@"CFBundleDisplayName"]]; 
```

# xcode - Xcode 中的“Canvas”选项在哪里？

> ID：10526447
> 
> 赞同：2
> 
> 时间：2012-05-10T01:38:20.820
> 
> 标签：xcode

我是 XCode 的新手，在阅读教程时，它告诉我在我的故事板文件中执行此操作：

“首先，单击视图控制器并转到 Editor\Canvas\Show Bounds Rectangles”

我打开了界面构建器，但我看不到“画布”选项（或菜单，我不知道）在哪里。有谁能够帮我？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:44:32.993

`Canvas``Editor`只有在 Project Navigator 中选择了 .xib 文件时，选项（在 下）才可用。

# php - 实现数据持久化 jquery/php 的最佳方法是什么？

> ID：10526449
> 
> 赞同：0
> 
> 时间：2012-05-10T01:38:39.547
> 
> 标签：php, jquery, session, persistence

我正在用 jquery/php 设计一个简单的棋盘游戏。棋盘的状态当前以数组的形式存储在服务器端的 php 会话变量中。每一轮都作为对 php 的 ajax 调用执行，php 执行逻辑来更新这个数组，并将数组返回给 jquery 以呈现为 html。我正在使用 php 会话变量实现板状态的持久性......但我认为这不是一个好的做法。我什至不能在多个标签中播放它，因为浏览器将两个标签视为同一会话的一部分。我想找到一个解决方案，而不是在数据库中存储板状态......但如果这是唯一合理的解决方案，请告诉我:)。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:43:53.643

像[Lawnchair](http://westcoastlogic.com/lawnchair/)这样的 JavaScript 库如何在客户端存储数据？

> 默认情况下，Launchchair 将使用 dom 存储持续存在，但如果其他适配器可用并且当前执行的 javascript 运行时不支持 dom 存储。草坪椅将尝试每个连续的适配器，直到找到一个可以工作的适配器。简单的。

它的 Dom 存储也跨越选项卡。

通过[Dive.Into.Javascript](http://www.diveintojavascript.com/javascript-apis/web-storage-dom-storage)

> 存储在本地存储区域中的数据不会过期并且跨越不同的选项卡和/或窗口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:07:48.980

您可以使用javascript将数据存储在客户端。要么放置在隐藏字段中，要么使用类似[jquery 数据](http://api.jquery.com/data/)的机制，如下所示：

```
$('body').data('player1-pos-x', x);
$('body').data('player1-pos-y', y); 
```

它的问题是当您刷新浏览器时，一切都会丢失。

另一种方法是将数据存储在服务器端和客户端。您可以存储一个游戏 ID、会话 ID 对来将游戏分组到同一会话下。当浏览器刷新时，您将拥有与该会话相关的所有游戏，并根据数据做出决定。

# cordova - 检查我的应用程序时出错

> ID：10526450
> 
> 赞同：0
> 
> 时间：2012-05-10T01:38:45.543
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

1.) 我有一个代码脚本来检查用户是否输入了正确的电子邮件格式；

```
if (val.search("[a-z]+@[a-z]+[.][a-z]+") == -1)
                          Ext.Msg.alert("Error", "Invalid e-mail address!!"); 
```

此代码不正确，因为用户名和域名也可能`Numbers`包含在内。那么我该如何更正代码呢？

2.) 在视图中，我有 2 个字段；密码并重新输入密码。我如何检查这两个是否相等？

```
{
                          xtype:'textfield',
                          name:'password',
                          label:'Password'
                          },
                          {
                          xtype:'textfield',
                          name:'rpassword',
                          label:'retype password'
                          }
                          ]
                   },
                   {
                   xtype:'button',
                   id:'pwdButton',
                   text:'register',
                   ui:'confirm'
} 
```

3.) 是否有可能进行 Ajaxified 错误检查，这意味着在用户转到下一个字段时弹出错误消息（无需等到他点击`Register`按钮）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T02:46:25.600

1.  要执行`email`验证，您可以查看我的以下代码。`username`如果并且`domain name`有，它也可以解决`Numbers`。

    ```
    {
      xtype: 'emailfield',
      name: 'email',
      label: 'Email',
      id: 'emailId',
      placeHolder: 'google@gmail.com',
      required: true,
      listeners: {
        blur: function(thisTxt, eventObj) {
                var emailValue = thisTxt.getValue();
                var atpos = emailValue.indexOf("@");
                var dotpos = emailValue.lastIndexOf(".");
                if (atpos<1 || dotpos<atpos+2 || dotpos+2>= emailValue.length) {
                    Ext.Msg.alert("Not a valid e-mail address");
                } else {
                    Ext.Msg.alert('Valid','You entered a valid email address');
                }
        }
       }
     } 
    ```

2.  要检查用户是否正确地重新输入了相同的密码，您可以查看以下代码，'

    ```
     {
        xtype:'textfield',
        name:'password',
        id: 'pswd1',
        label:'Password'
     },
     {
        xtype:'textfield',
        name:'rpassword',
        id: 'pswd2',
        label:'retype password',
        listeners : {
            blur : function() {
               var prevPassword = Ext.getCmp('pswd1').getValue();
               var rePassword = Ext.getCmp('pswd2').getValue();
               if(prevPassword == rePassword) {
                    Ext.Msg.alert('Success','Passwords match');
               } else {
                    Ext.Msg.alert('Failed','Passwords entered do not match');
                    Ext.getCmp('pswd2').focus();
               }
           }
       }
     } 
    ```

3.  *意思是当用户进入下一个字段时弹出错误消息（不必等到他点击注册按钮）*

你需要监听任何表单域的[模糊](http://docs.sencha.com/touch/2-0/#!/api/Ext.field.Input-method-blur)事件。因此，当该 p'cular 字段丢失时`focus`，它将调用该`blur()`函数，然后您可以执行验证而无需点击`Register`按钮。

```
listeners : {
     blur : function() {
         // Validation code goes here .
         ....
         ....
     }
} 
```

# ajax - 基于 Razor 的 MVC 与 MVC 4 中的单页应用程序

> ID：10526454
> 
> 赞同：24
> 
> 时间：2012-05-10T01:39:50.307
> 
> 标签：ajax, json, asp.net-mvc-3, razor

我曾经使用 MVC 3 Razor 引擎来渲染页面。有时我不得不使用 AJAX 调用来传输 Razor 渲染的 HTML 并使用 JQuery 将其插入到页面中。随着新项目的开始，我们确实考虑使用对我们来说新的 MVC 4 单页应用程序框架。我第一眼看到它，让我感觉很复杂：一方面，它意味着你的所有数据都由 JSON 传输，客户端完成所有工作来渲染它们并编码一些与 UI 相关的逻辑，这对服务器和网络来说非常有用表现。另一方面，客户端（HTML + JavaScript）变得更加沉重，其中包含一堆魔术字符串和隐藏的关系，这似乎很难维护。我们习惯了 VS 智能感知，类型安全。

我想知道与 Razor 相比，使用 SPA 有什么优点和缺点，除了我在这里提到的这个明显的优点吗？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-10T15:53:03.877

Razor 是一种基于服务器的技术，其中 SPA（单页应用程序）是一种在客户端（Web 浏览器）上使用的架构方法。两者可以一起使用。

从高层次来看，SPA 将渲染和数据检索移至客户端。Web 服务器成为位于数据库前面的服务层。MVC 模式在使用 SPA 时效果最好。可以使用 Knockout.js 和 Backbone.js 等框架。最终结果是丰富的响应式桌面体验。

要实现这一点，您需要成为一名后裔 javascript 程序员或愿意学习 javascript。

是的，它正在将业务需求从 C# 转移到 javascript。在 Visual Studio 中，javascript 的智能感知有限。要对您的 javascript 有信心，您需要依靠单元测试。好的一面是丰富的用户体验（想想 gmail 或谷歌地图）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T15:12:59.107

我认为听起来您已经相当了解这里的大多数权衡；您将通过 SPA 减少网络负载，并将处理措施转移到客户端。但是，您将增加代码的复杂性，并使轻松维护系统变得更加困难（仅仅是因为复杂性增加 - 而不是因为 SPA 中固有的任何架构问题）。

要记住的另一件事是兼容性。我在对您的问题的评论中提到“错误选择”的原因是，为了让禁用 Javascript 的人可以使用该网站，您仍然需要提供常规的整页视图。为了SEO，这也是一个好主意；爬虫将以禁用 JS 的用户身份浏览您的网站，然后可以索引您的网站。然后站点应该正确处理这些传入的 URL，以便那些启用 JS 的人会发现自己在您的 SPA 中查看相同的内容（而不是被不必要地转储到“无 JS”视图中）。

我将提到其他一些可能对上述内容有所帮助的可能性，但它打破了 SPA 的理想；也就是说，在某些地方使用 Ajax 加载的部分，而不是 JSON 数据。例如，假设您在网站上有一个典型的“联系电子邮件”表单；您希望它在 SPA 的上下文中加载，但通过 AJAX 加载部分可能更容易做到这一点。（当然，是的；您可以使用 JSON 对象来描述要在电子邮件表单中显示的字段）。

也可能存在比“数据”更“内容”的内容，您可能仍希望通过部分和 Ajax 加载这些内容。

* * *

SPA 绝对是一个有趣的项目，我将自己部署一个。我在其中混合使用了 JSON 和部分，但这可能不是您自己的选择。

# android - 我可以使用哪个快速库来解压缩 Android 中的 AES 加密文件

> ID：10526458
> 
> 赞同：0
> 
> 时间：2012-05-10T01:40:51.740
> 
> 标签：android, encryption, zip

我使用库*zip4j*解压缩使用 AES 256 位加密的文件，但解压缩速度很慢。如果您知道可以帮助我更快解压缩的库，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T04:06:54.597

在我的例子中，使用 zip4j，发布构建 APK 解压缩的 zipfile 比调试构建快 10 倍。

# desire2learn - Desire2Learn 的成绩

> ID：10526459
> 
> 赞同：0
> 
> 时间：2012-05-10T01:40:56.090
> 
> 标签：desire2learn

我使用以下 API 来获取成绩： 对于测试，我在 OrgId 中为我们的测试环境中存在的一门课程进行了硬编码。

```
uri = userContext.createAuthenticatedUri("/d2l/api/le/1.0/61782/grades/", "GET"); 
```

但是，当我执行这个调用时，我得到下面返回的数据。这是等级的结构，而不是等级本身。我如何获得所有学生的实际成绩，或者我缺少哪些参数？

```
[
   {
      "MaxPoints":25.000000000,
      "CanExceedMaxPoints":false,
      "IsBonus":false,
      "ExcludeFromFinalGradeCalculation":false,
      "GradeSchemeId":0,
      "Id":89242,
      "Name":"Quiz #1",
      "ShortName":"",
      "GradeType":"Numeric",
      "CategoryId":93744,
      "Description":{
         "Text":"",
         "Html":""
      }
   },
   {
      "MaxPoints":25.000000000,
      "CanExceedMaxPoints":false,
      "IsBonus":false,
      "ExcludeFromFinalGradeCalculation":false,
      "GradeSchemeId":null,
      "Id":89243,
      "Name":"Quiz #2",
      "ShortName":"",
      "GradeType":"Numeric",
      "CategoryId":93744,
      "Description":{
         "Text":"",
         "Html":""
      }
   },
   {
      "MaxPoints":25.000000000,
      "CanExceedMaxPoints":false,
      "IsBonus":false,
      "ExcludeFromFinalGradeCalculation":false,
      "GradeSchemeId":null,
      "Id":89244,
      "Name":"Quiz #3",
      "ShortName":"",
      "GradeType":"Numeric",
      "CategoryId":93744,
      "Description":{
         "Text":"",
         "Html":""
      }
   },
   {
      "MaxPoints":10.000000000,
      "CanExceedMaxPoints":false,
      "IsBonus":false,
      "ExcludeFromFinalGradeCalculation":false,
      "GradeSchemeId":0,
      "Id":89245,
      "Name":"Assignment 1",
      "ShortName":"",
      "GradeType":"Numeric",
      "CategoryId":0,
      "Description":{
         "Text":"",
         "Html":""
      }
   },
   {
      "MaxPoints":10.000000000,
      "CanExceedMaxPoints":false,
      "IsBonus":false,
      "ExcludeFromFinalGradeCalculation":false,
      "GradeSchemeId":null,
      "Id":89246,
      "Name":"Assignment 2",
      "ShortName":"",
      "GradeType":"Numeric",
      "CategoryId":0,
      "Description":{
         "Text":"",
         "Html":""
      }
   },
   {
      "MaxPoints":40.000000000,
      "CanExceedMaxPoints":false,
      "IsBonus":false,
      "ExcludeFromFinalGradeCalculation":false,
      "GradeSchemeId":null,
      "Id":89247,
      "Name":"Midterm",
      "ShortName":"",
      "GradeType":"Numeric",
      "CategoryId":0,
      "Description":{
         "Text":"",
         "Html":""
      }
   },
   {
      "MaxPoints":106.000000000,
      "CanExceedMaxPoints":false,
      "IsBonus":false,
      "ExcludeFromFinalGradeCalculation":false,
      "GradeSchemeId":null,
      "Id":89248,
      "Name":"Final Exam",
      "ShortName":"",
      "GradeType":"Numeric",
      "CategoryId":0,
      "Description":{
         "Text":"",
         "Html":""
      }
   },
   {
      "Id":94859,
      "Name":"Lec Sect",
      "ShortName":"",
      "GradeType":"Text",
      "CategoryId":0,
      "Description":{
         "Text":"",
         "Html":""
      }
   }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:57:17.690

我希望您想要的调用是用户在文档的等级值（[操作](http://docs.valence.desire2learn.com/res/grade.html#id3)和[数据结构）区域中](http://docs.valence.desire2learn.com/res/grade.html#grade-values)[在组织单位中的等级。](http://docs.valence.desire2learn.com/res/grade.html#get--d2l-api-le-%28D2LVERSION-version%29-%28D2LID-orgUnitId%29-grades-final-values-%28D2LID-userId%29)

您将需要在 id 的类列表上迭代此调用。

（博客上提供了[演练](http://devs.valence.desire2learn.com/2012/04/18/real-world-application/)和[代码片段）](http://devs.valence.desire2learn.com/2012/04/18/real-world-application/#comment-114)

# ios - 添加/删除其他 UIBarbuttons 时如何保持 UIBarButtonItem 居中？

> ID：10526460
> 
> 赞同：1
> 
> 时间：2012-05-10T01:41:26.723
> 
> 标签：ios, center, uibarbuttonitem, space

我有一个带有 3 个 UIBarButtonItems 的 UIToolbar 和两侧的灵活空间。我使用它来浏览数组，同时使用中心 UIBarButtonItem 作为标题。

情况如下所示：

```
<--> [<] [Title] [>] <--> 
```

当在数组的开头时，我想删除 [<] 按钮，反之亦然，当到达 [>] 按钮的数组末尾时。

如何使 [Title] 按钮居中，以便在删除/添加其他 UIBarButtons 之一时它不会移动？

笔记：

*   我已经知道如何在工具栏中以编程方式添加/删除按钮

*   问题是，它每次都以剩余的 UIBarbuttons 为中心，我需要它以标题为中心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:19:38.710

当您到达页面的结尾/开头时，您可以将 [>] 或 [<] 按钮替换为固定宽度的分隔符。

# objective-c - 如何在 OS X 控制台应用程序中使用 NSURLConnection 处理错误情况？

> ID：10526461
> 
> 赞同：0
> 
> 时间：2012-05-10T01:41:44.667
> 
> 标签：objective-c, macos, console-application

我看到有时加载 URL 失败的情况，但它失败得非常“严重”。当主机无法访问（即 VPN 未连接）时，似乎`+[NSURLConnection(NSURLConnectionReallyInternal) _resourceLoadLoop:]`经常挂起以下回溯：

```
(gdb) bt
#0  in mach_msg_trap ()
#1  in mach_msg ()
#2  in __CFRunLoopServiceMachPort ()
#3  in __CFRunLoopRun ()
#4  in CFRunLoopRunSpecific ()
#5  in +[NSURLConnection(NSURLConnectionReallyInternal) _resourceLoadLoop:] ()
#6  in -[NSThread main] ()
#7  in __NSThread__main__ ()
#8  in _pthread_start ()
#9  in thread_start () 
```

我已经实现`- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error`了，但它永远不会被调用。

我正在构建 NSURLRequest 如下：

```
NSURLRequest *theRequest = 
    [NSURLRequest requestWithURL:[NSURL URLWithString:url]
                     cachePolicy:NSURLRequestReloadIgnoringCacheData
                 timeoutInterval:5.0]; 
```

所以我假设请求应该在 5 秒后超时，而不是无限期地挂起。这没有发生。

我应该注意到这发生在 Mac OS X 的控制台应用程序中（它是 iOS 库的测试框架）。我想知道运行循环配置是否发生了“奇怪”的事情。（从跟踪来看，它可能正试图从它正在运行的运行循环中启动一个新的运行循环？！）

有任何想法吗？

**编辑**：由于这不是 Cocoa 应用程序，我不得不手动运行运行循环。这似乎是问题的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:03:50.870

我同意您提供的超时似乎应该启动。可能存在错误。

您可以通过在尝试连接之前检查网络可达性来稍微改善这个问题。请参阅[SCNetworkReachability API](https://developer.apple.com/library/mac/#documentation/SystemConfiguration/Reference/SCNetworkReachabilityRef/Reference/reference.html)。

您还可以通过在运行循环上安装一个计时器来强制设置您自己的超时 - 您在您控制的线程上运行的计时器，而不是框架在后台运行的计时器 - 并在它触发时取消连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:07:35.313

我解决了这个问题。出现问题是因为我没有给运行循环足够的时间。我有一些类似的代码：

```
[[NSRunLoop currentRunLoop] runUntilDate:
    [NSDate dateWithTimeIntervalSinceNow:5]; 
```

这只会导致运行循环运行 5 秒，这足以让我没有收到来自 URLConnection 的回调，说它失败了。我把它改成更像这样的东西，它起作用了：

```
[[NSRunLoop currentRunLoop] runUntilDate:
    [NSDate dateWithTimeIntervalSinceNow:10]; 
```

我认为在回溯中看到的副作用是 URLConnection 对象在尝试进行回调时无法检测到运行循环已停止，并且`mach_msg_trap`它可能正在等待回复，它永远不会收到。我无法完全解释这种行为，但这是一般理论。;-)

# html - 移动网站布局麻烦

> ID：10526462
> 
> 赞同：0
> 
> 时间：2012-05-10T01:41:45.723
> 
> 标签：html, layout, mobile, css, media-queries

我正在摆弄一个特定于移动设备的样式表，其中使用媒体查询，我正在使用一个名为“styles_mobile.css”的表格来添加特定于移动访问者的样式。

我希望有一种方法可以在移动访问者的情况下仅使用移动样式表，而不是在原始样式表之外 - 一个独立的样式表。

无论如何，由于我无法找到没有代码的方法（我无法编写代码，只有轻微的客户端技能），我不得不摆弄移动布局。

似乎没有我尝试在移动样式表中更正的属性值，我无法设置样式以使内容仅适合屏幕宽度。某处有一条规则使我的移动 html 看起来比屏幕宽度的 100% 长，这可能是从原始样式表中获取的许多内容。

如果有人碰巧能够使用移动设备查看，那么 URL 就在这里，这应该使用“styles_mobile.css”表。我为所有元素添加了一个实心轮廓，因此问题可见：

[http://tinyurl.com/7ywoqpf](http://tinyurl.com/7ywoqpf)

在页面的顶部，显然有一个元素从主样式表的宽度或最小宽度属性值中延伸出屏幕。无论我多么努力地纠正这些我都不能:-(

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T11:11:01.527

看看你是否可以为每个样式表设置一个最小宽度，以防止它干扰任何低于你想要它工作的宽度。应该看起来像这样：

```
<link rel="stylesheet" type="text/css" media="only screen and (max-width: 810px) and (min-width: 721px)" href="tabstyle.css"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:58:38.217

我们使用这种方法

```
<link rel="stylesheet" media="all" href="css/common.css">
<!--Responsive style sheets -->
<link rel="stylesheet" media="all and (min-width: 768px) and (max-width: 1407px)" href="css/tab-only.css">
<link rel="stylesheet" media="all and (min-width: 0px) and (max-width: 767px)" href="css/phone-only.css"> 
```

# android - 尚未实施：DSA 公钥

> ID：10526465
> 
> 赞同：0
> 
> 时间：2012-05-10T01:42:14.217
> 
> 标签：android, security, jakarta-ee, digital-signature, dsa

我正在编写服务器和 Android 客户端应用程序。Android 客户端将测量值发送到服务器。为了确保数据的完整性，每次测量都会附加一个数字签名。

因为我需要所有东西都与 Gson 兼容，所以存储公钥本身是不可能的。我正在存储 G、P、Q 和 Y 因子。

这是请求类的一个片段：

```
 public PublicKey getPublicKey() {
    try {
        DSAPublicKeySpec keySpec = new DSAPublicKeySpec(publicKeyY, publicKeyP,
                                                        publicKeyQ, publicKeyG);
        KeyFactory fact = KeyFactory.getInstance("DSA");
        PublicKey pubKey = fact.generatePublic(keySpec); // A
        return pubKey;
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
}

public void setPublicKey(PublicKey publicKey) {
    try {
        KeyFactory fact = KeyFactory.getInstance("DSA");
        DSAPublicKeySpec pub = fact.getKeySpec(publicKey, DSAPublicKeySpec.class); // B
        publicKeyG = pub.getG();
        publicKeyP = pub.getP();
        publicKeyQ = pub.getQ();
        publicKeyY = pub.getY();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

构造函数使用 setPublicKey 方法。当我在客户端创建此类请求并将其发送到服务器时，两者都会导致异常。

在客户端：

```
 java.lang.RuntimeException: not implemented yet DSA Public Key
             y: 2f9286201b266f38d682e99814612f7d37c575d3a210de114bdf02092f4a835109f28a590cfc568bb6525d59b8275fe791f3ddf20e85df44fd2e8622289f6dbc27c73d31d1769feae19573df22a9ca8ef80a9f7230b0b4a2671cc03fdb2788b55b4e9a68a7a5a93a214cc5aa39ccb5155a13354870d45a38760a80fd34333073
  class java.security.spec.DSAPublicKeySpec
    at org.bouncycastle.jce.provider.JDKKeyFactory.engineGetKeySpec(JDKKeyFactory.java:148)
    at java.security.KeyFactory.getKeySpec(KeyFactory.java:210) 
```

堆栈跟踪中的下一件事指向我标记为 B 的规则

在服务器上：

```
java.lang.NullPointerException
    at sun.security.provider.DSAPublicKey.<init>(DSAPublicKey.java:74)
    at sun.security.provider.DSAPublicKeyImpl.<init>(DSAPublicKeyImpl.java:46)
    at sun.security.provider.DSAKeyFactory.engineGeneratePublic(DSAKeyFactory.java:86)
    at java.security.KeyFactory.generatePublic(KeyFactory.java:304)
    at sensserve.protocol.StartSessionRequest.getPublicKey(StartSessionRequest.java:66) 
```

接下来指向规则 A。

我完全不知道我做错了什么以及这些消息意味着什么。我该如何解决这些？谁能告诉我我做错了什么？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:57:57.120

您应该能够以 Base64 编码的方式存储公钥，并且仍然可以获得有效的 JSON。您应该能够`DSAPublicKeySpec`直接使用而无需调用`getKeySpec()`显然没有在 Bouncy Castle（Android 的 JCE 提供程序）中实现。不知道为什么你在服务器上得到 NPE，可能是错误的格式。顺便说一句，如果您与单个提供商打交道可能会更容易，因此您可能也希望在服务器上使用 Bouncy Castle。

# node.js - Vert.x 是否会因为其更好的性能而对 Node.js 的用户群构成威胁？

> ID：10526471
> 
> 赞同：7
> 
> 时间：2012-05-10T01:43:26.893
> 
> 标签：node.js, vert.x

[基准](http://vertxproject.wordpress.com/2012/05/09/vert-x-vs-node-js-simple-http-benchmarks/)

[黑客新闻讨论](http://news.ycombinator.com/item?id=3948727)

[黑客新闻讨论 2](http://news.ycombinator.com/item?id=3927891)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T02:35:13.750

Node.js 在今天甚至没有真正占据主导地位（当然除了在 Hacker News 社区中），它甚至还没有 1.0 版本。有趣的是猜测可能已经取代它的东西:)

性能很好（虽然微基准测试不是判断的正确方法），但如果这是唯一重要的事情，我们都会为每个应用程序用 C 语言编写自定义 Web 服务器。其他重要的事情之一是社区支持，Node.js 目前肯定会为此而努力。它有一个非常健康的开源（这是关键）社区，创建了一个大型工具库。

我认为 Vert.x 很有趣，并且与 Node.js 有不同的看待事物的方式，这很棒。如果他们能够继续取得进步，让更多人对它感兴趣，并证明编写 Web 应用程序更容易、更快捷，那么谁知道呢？也许几年后我们可以讨论一下什么会威胁 Vert.x 的未来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T02:19:56.010

这个微基准测试带来了一些有趣的事情，可能值得在 Node 中解决，但重要的是要记住，没有人每天在一台机器上进行 100 的数百万次点击（这些基准显示）。他们在许多机器上都这样做。

在某些级别上，更快的语言会产生影响（例如，请参阅 Twitter 将其后端从 Ruby 迁移到 Java），但很少能达到那个位置。

大多数人需要一种干净且易于编程的语言，以及一个良好的生态系统。

Vert.x 没有生态系统可言。如果你想要一个基于 JVM 的系统，你可以在那里获得很多选择。如果你想要一个基于 Javascript 的系统，现在最好的选择是 Node.js。就是这么简单。

# php - 如何在按钮单击中获取行 ID？

> ID：10526475
> 
> 赞同：0
> 
> 时间：2012-05-10T01:43:55.350
> 
> 标签：php, html

我有一张表格，里面填满了数据库中的记录。单击视图按钮时我想要做的是能够获取行的 ID，以便我可以调用用户的其他信息，但我不太确定该怎么做。这是我填满表格的方式。

```
 <table border="1" cellpadding="5" cellspacing="2" width="600">
<tr>
    <th>ID</th>
    <th>Username</th>
    <th>Email</th>
    <th>Telephone</th>
    <th>Date Registered</th>
    <th>Member Details</th>
</tr>

 <?php
require('db_connection.php');
$query="SELECT ID,Username,Email,Telephone,RegisterDate FROM Members";
$result=mysql_query($query) or die(mysql_error());

while($row=mysql_fetch_array($result))
{
    echo "</td><td>";
    echo $row['ID'];
    echo "</td><td>";
    echo $row['Username'];
    echo "</td><td>";
    echo $row['Email'];
    echo "</td><td>";
    echo $row['Telephone'];
    echo "</td><td>";
    echo $row['RegisterDate'];
    echo "</td><td>";
    print '<center><input name="ViewBtn" type="submit" value="View" /></center>';
    echo "</td></tr>";
}
?> 
```

[![图片](../Images/fe974752a20fe6817b8015379ade8a5e.png)](https://i.stack.imgur.com/naNFP.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:48:44.980

您可以为每个按钮制作小表单，但我更喜欢超链接，然后将其设置为看起来像按钮的样式：

```
<style type="text/css">
  .buttonize {
    text-decoration: none;
    border: 1px solid #ccc;
    background-color: #efefef;
    padding: 10px 15px;
    -moz-border-radius: 11px;
    -webkit-border-radius: 11px;
    border-radius: 11px;
    text-shadow: 0 1px 0 #FFFFFF;
  }
</style>

<table border="1" cellpadding="5" cellspacing="2" width="600">
<tr>
    <th>ID</th>
    <th>Username</th>
    <th>Email</th>
    <th>Telephone</th>
    <th>Date Registered</th>
    <th>Member Details</th>
</tr>

 <?php
require('db_connection.php');
$query="SELECT ID,Username,Email,Telephone,RegisterDate FROM Members";
$result=mysql_query($query) or die(mysql_error());

while($row=mysql_fetch_array($result))
{
    echo "</td><td>";
    echo $row['ID'];
    echo "</td><td>";
    echo $row['Username'];
    echo "</td><td>";
    echo $row['Email'];
    echo "</td><td>";
    echo $row['Telephone'];
    echo "</td><td>";
    echo $row['RegisterDate'];
    echo "</td><td>";
    print '<center><a href="view.php?id='.$row['ID'].'" class="buttonize">View</a></center>';
    echo "</td></tr>";
}
?> 
```

你可以用 CSS 做更多的事情，但这应该给你正确的想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-13T10:32:01.587

通过按钮 HTML 发送您的行 ID

```
<button type="submit"  id="" title="" onClick="high('a<?php echo $i;?>')"  > 
```

JS：

使用js捕捉id

```
function high(id)
{
        alert(id);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T01:54:04.370

您可以使用隐藏的输入元素，如下所示：

`"<input type=hidden id='rowid' value=".row['ID'].">";e`

# graphics - 如何查看 .PBRT 文件的图像

> ID：10526478
> 
> 赞同：3
> 
> 时间：2012-05-10T01:44:34.293
> 
> 标签：graphics, rendering, raytracing, pbrt

我是使用 PBRT（基于物理的光线追踪）的新手。如何查看`.pbrt`文件的图像。

我已经从命令提示符完成了以下步骤：

```
set PBRT_SEARCHPATH=C:\pbrt-1.03-lc\bin
    cd C:\pbrt-1.03-lc\scenes\Conference
    ..\..\bin\pbrt.exe conference.pbrt 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T22:27:34.713

.pbrt 文件是场景描述文件或包含三角形网格的文件。

该文件只是用于渲染图像的内容的描述。

要渲染图像，您必须按以下方式运行 \bin\pbrt.exe：

\bin\pbrt.exe 会议.pbrt --outfile 会议.tga

此命令将渲染图像并将其保存到名为 conference.tga 的文件中

# windows - 为什么通过 psexec 通过 Perl 系统调用调用 Windows XCOPY 会失败？

> ID：10526486
> 
> 赞同：4
> 
> 时间：2012-05-10T01:45:41.510
> 
> 标签：windows, perl, clearcase, xcopy, psexec

我正在使用 psexec 在远程 Windows 机器上启动 Perl 程序。该程序对 xcopy 进行系统调用。当直接（本地）在机器上运行时，这工作正常，但是当通过 psexec 远程运行时，xcopy 失败并显示以下消息：

> 文件创建错误 - 功能不正确。

（根据用户的不同，消息可能改为“拒绝访问”。）

请注意 $! 给出以下诊断：

> syscall.pl 上的文件描述符错误。perl 在 REMOTE 上退出，错误代码为 9。

是否通过 system() 或反引号调用 xcopy 似乎没有区别。

我应该指出，“发件人”文件夹是一个 ClearCase 动态视图（M 驱动器）。

奇怪的是，当直接从 psexec 调用时，xcopy 似乎工作正常。

以下是一些其他的怪事：

1.  xcopy 并不总是失败。某些文件似乎只是被“诅咒”了。只读属性似乎不是一个因素。

2.  一旦复制成功（例如，通过 Windows 资源管理器），诅咒就会解除，并且该特定文件将不再导致 xcopy 错误。

3.  问题似乎与目标文件夹无关。一旦诅咒解除，文件就可以被复制到一个新的目的地。

以下是我用来缩小问题范围的测试 Perl 脚本的一部分（文件夹名称已通用化）。请注意，对于每个测试的“我的 $cmd”，我注释掉了前一个，并添加了状态注释。

```
# ClearCase directory M:\STUFF\ABC contains ABC.tst, ABC.zip and several nonempty subfolders

# Directory copy, D drive to D drive
#my $cmd = "xcopy D:\\temp\\src D:\\temp\\dest /e /i /y";
# works

# Directory copy, M drive to D drive
#my $cmd = "xcopy M:\\STUFF\\ABC D:\\temp\\dest /e /i /k /y";
# fails with "File creation error - Incorrect function" or "Access denied"

# File copy (.tst), M drive to D drive (trailing backslash)
#my $cmd = "xcopy M:\\STUFF\\ABC\\ABC.tst D:\\temp\\dest\\";
# works!

# Directory copy, M drive to D drive (trailing backslash)
#my $cmd = "xcopy M:\\STUFF\\ABC D:\\temp\\dest\\ /e /i /k /y";
# copies the .tst file, but fails on the .zip (yes, the .tst file is now getting copied)

# Directory copy, M drive to D drive (same as above but without trailing backslash)
#my $cmd = "xcopy M:\\STUFF\\ABC D:\\temp\\dest /e /i /k /y";
# copies the .tst file, but fails on the .zip

# File copy (.zip), M drive to D drive
#my $cmd = "xcopy M:\\STUFF\\ABC\\ABC.zip D:\\temp\\dest";
# fails 

# File copy (.zip), M drive to D drive (trailing backslash)
#my $cmd = "xcopy M:\\STUFF\\ABC\\ABC.zip D:\\temp\\dest\\";
# fails

# After manually (Windows Explorer) copying the .zip file to the dest folder and deleting it  
# Directory copy, M drive to D drive with /c (continue after failure)
#my $cmd = "xcopy M:\\STUFF\\ABC D:\\temp\\dest /c /i /e";
# copies the .tst and .zip file (!), but fails on all other files (folders were successfully created)

# After manually copying the Folder1 folder to the dest folder and then deleting it  
#my $cmd = "xcopy M:\\STUFF\\ABC D:\\temp\\dest /c /i /e";
# copies the .tst and .zip file and the contents of Folder1(!), but fails on all other files

# Different dest:
my $cmd = "xcopy M:\\STUFF\\ABC D:\\temp\\dest1 /c /i /e";
# Same results as immediately above

print "Executing system command: $cmd ...\n";
system ($cmd);
#print(`$cmd 2>&1`); #same 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:38:55.103

我建议不要使用`xcopy`命令，而是使用 Perl 本身进行复制。有一个模块[File::Copy::Recursive](http://search.cpan.org/~dmuey/File-Copy-Recursive-0.38/Recursive.pm)使用起来非常简单。它不是标准 Perl 发行版的一部分，因此您必须使用`cpan`.

如果您不想使用非本机模块，可以尝试使用[File::Find](http://perldoc.perl.org/File/Find.html)在目录中查找文件，然后将其与[File::Copy](http://perldoc.perl.org/File/Copy.html)结合使用。

[在Perl Monks](http://www.perlmonks.org/?node_id=635503)上找到了两个示例。一个使用组合，另一个使用`File::Copy::Recursive`

是的，这不是直接回答您的问题，但您应该尽可能避免使用`system`命令。当您与系统*shell*和命令处理器交互时（尤其是当 ClearCase 入侵文件系统时），您最终可能会遇到许多无意的交互，这些交互可能会导致某些情况下工作，但在其他情况下则不会。

要找出`system`调用时遇到的问题，您必须假设错误可能出在 ClearCase、`cmd.exe`shell、`xcopy`命令或 Perl 中。通过不使用该`system`命令，您已经简化了您的问题，并且实际上多次加速了该过程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T16:54:33.233

尝试从空设备重定向 INPUT 以查看您的 xcopy 是否有效。我不知道为什么，我很久以前就遇到了这个问题，并且不知何故（可能通过网络搜索）解决了这个问题。

它看起来像这样：

`xcopy /args $source $target <nul:`;

（整个命令周围的反引号没有出现）

JKE

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T13:41:37.323

您是否尝试过[`system`](http://perldoc.perl.org/functions/system.html)使用参数列表？

```
my @args= qw(M:\STUFF\ABC D:\temp\dest1 /c /i /e);
warn "Executing 'xcopy @args' ...\n";
system xcopy => @args; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T07:53:36.283

[File::Copy::Recursive](http://search.cpan.org/perldoc/File%3a%3aCopy%3a%3aRecursive)可能会解决您的问题。

这样，您就可以更可控地复制文件。您可以将此调用包装到一个 eval 块并在那里应用某种重试逻辑吗？

也许对有问题的文件帮​​助进行“虚拟更新”？更改文件的属性/时间戳或将其重命名为其他名称并将其重命名...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T20:26:28.590

如果您查看[ClearCase 如何管理 Vob 和 views 的读/写访问](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.books.cc_admin.doc/access-control.htm)，您会发现：

*   读取目录的内容（需要`r-x`）
*   读取目录中的文件（只需要`--x`目录上的“”+`r--`文件上的“”）

因此，根据启动 xcopy 的进程背后的用户，您可能无法读取/访问某些目录/文件。
并且您需要确保 use 已将 设置`CLEARCASE_PRIMARY_GROUP`为正确的值（即被列为 vob 的主要组的组，或其次要组之一），以便访问 Vob（但如果其保护措施足够松懈，无论如何，每个人都可以访问它）。

所有这些都适用于动态视图，并且仅适用于快照视图的更新（一旦更新完成，您将获得本地复制的文件，并且可以被任何进程读取）。

# haskell - Cabal 在 ubuntu 12.04 上安装 reactive-banana-wx

> ID：10526491
> 
> 赞同：2
> 
> 时间：2012-05-10T01:46:23.297
> 
> 标签：haskell, cabal, haskell-platform, cabal-install, reactive-banana

我刚刚重新安装了 Ubuntu 12.04，从 apt-get 拉下 haskell-platform，当我尝试安装 reactive-banana-wx 时，我得到：

```
cabal install reactive-banana-wx
Resolving dependencies...
In order, the following would be installed:
deepseq-1.3.0.0 (reinstall) changes: array-0.4.0.0 -> 0.3.0.3
containers-0.4.2.1 (reinstall) changes: array-0.4.0.0 -> 0.3.0.3
Cabal-1.14.0 (reinstall) changes: array-0.4.0.0 -> 0.3.0.3
fgl-5.4.2.4 (reinstall) changes: array-0.4.0.0 -> 0.3.0.3, mtl-2.0.1.0 -> 2.1
regex-base-0.93.2 (reinstall) changes: array-0.4.0.0 -> 0.3.0.3
regex-posix-0.95.1 (reinstall) changes: array-0.4.0.0 -> 0.3.0.3
regex-compat-0.95.1 (reinstall) changes: array-0.4.0.0 -> 0.3.0.3
template-haskell-2.7.0.0 (reinstall)
fclabels-1.1.3 (new package)
text-0.11.2.0 (new version)
hashable-1.1.2.3 (new package)
time-1.4.0.1 (new version)
hslogger-1.1.5 (reinstall) changes: time-1.4 -> 1.4.0.1
random-1.0.1.1 (reinstall) changes: time-1.4 -> 1.4.0.1
MissingH-1.1.1.0 (reinstall) changes: array-0.4.0.0 -> 0.3.0.3
QuickCheck-2.4.2 (reinstall)
cabal-macosx-0.2.2 (new package)
unordered-containers-0.2.1.0 (new package)
vault-0.2.0.0 (new package)
reactive-banana-0.5.0.3 (new package)
wxdirect-0.90.0.1 (new package)
wxcore-0.12.1.7 (new package)
wx-0.12.1.6 (new package)
reactive-banana-wx-0.5.0.0 (new package)
cabal: The following packages are likely to be broken by the reinstalls:
time-1.4
xmonad-contrib-0.10
haskell98-2.0.0.1
text-0.11.1.13
parsec-3.1.2
network-2.3.0.10
cgi-3001.1.8.2
HTTP-4000.2.2
parallel-3.2.0.2
containers-0.5.0.0
xmonad-0.10
ghc-7.4.1
hpc-0.5.1.1
hoopl-3.8.7.3
binary-0.5.1.0
bin-package-db-0.0.0.0
GLUT-2.1.2.1
Use --force-reinstalls if you want to install anyway. 
```

当我强制重新安装时，我得到：

```
Control/DeepSeq.hs:56:1:
    array-0.3.0.3:Data.Array can't be safely imported! The module itself isn't safe.
cabal: Error: some packages failed to install:
Cabal-1.14.0 depends on deepseq-1.3.0.0 which failed to install.
MissingH-1.1.1.0 depends on deepseq-1.3.0.0 which failed to install.
QuickCheck-2.4.2 depends on deepseq-1.3.0.0 which failed to install.
cabal-macosx-0.2.2 depends on deepseq-1.3.0.0 which failed to install.
containers-0.4.2.1 depends on deepseq-1.3.0.0 which failed to install.
deepseq-1.3.0.0 failed during the building phase. The exception was:
ExitFailure 1
fclabels-1.1.3 depends on deepseq-1.3.0.0 which failed to install.
fgl-5.4.2.4 depends on deepseq-1.3.0.0 which failed to install.
hashable-1.1.2.3 depends on deepseq-1.3.0.0 which failed to install.
hslogger-1.1.5 depends on deepseq-1.3.0.0 which failed to install.
random-1.0.1.1 depends on deepseq-1.3.0.0 which failed to install.
reactive-banana-0.5.0.3 depends on deepseq-1.3.0.0 which failed to install.
reactive-banana-wx-0.5.0.0 depends on deepseq-1.3.0.0 which failed to install.
regex-base-0.93.2 depends on deepseq-1.3.0.0 which failed to install.
regex-compat-0.95.1 depends on deepseq-1.3.0.0 which failed to install.
regex-posix-0.95.1 depends on deepseq-1.3.0.0 which failed to install.
template-haskell-2.7.0.0 depends on deepseq-1.3.0.0 which failed to install.
text-0.11.2.0 depends on deepseq-1.3.0.0 which failed to install.
time-1.4.0.1 depends on deepseq-1.3.0.0 which failed to install.
unordered-containers-0.2.1.0 depends on deepseq-1.3.0.0 which failed to
install.
vault-0.2.0.0 depends on deepseq-1.3.0.0 which failed to install.
wx-0.12.1.6 depends on deepseq-1.3.0.0 which failed to install.
wxcore-0.12.1.7 depends on deepseq-1.3.0.0 which failed to install.
wxdirect-0.90.0.1 depends on deepseq-1.3.0.0 which failed to install. 
```

关于如何解决这个问题的任何想法，或者我是否必须等待更新依赖项或新版本的 haskell-platform？如果可能的话，我希望一切都尽可能接近 Ubuntu 上的标准安装。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T02:27:34.633

第一：永远不要强行重新安装`array`or `containers`。这很可能会导致已安装软件包的大量损坏。

（或至少一个）问题是[reactive-banana-wx-0.5.0.0](http://hackage.haskell.org/package/reactive-banana-wx-0.5.0.0)特别依赖于 wxcore-0.12.1.7，而 wxcore-0.12.1.7 又指定了一个依赖`array < 0.4`。wxcore允许array-0.4.*上传到hackage的版本是0.13.2.1和0.90。然而，两者都未能在 hackage 上使用 ghc-7.4 构建。

通过下载一些包并编辑它们的`.cabal`文件以放松依赖关系，可能可以使用 ghc-7.4 构建 reactive-banana-wx，但我无法猜测编辑 reactive-banana-wx`.cabal`文件以允许以后`wx`的包或由 reactive-banana-wx 指定`.cabal`的包的文件，`wx`以允许以后的数组、容器和类似的。

我建议通知反应香蕉的作者/维护者并让他解决。

或者，如果您真的热衷于使用 reactive-banana-wx，请将您的 Haskell 实现降级为使用 ghc-7.2 或 7.0。

# javascript - 在 Backbone.js 中将函数设置为属性给了我一个错误，但如果我在初始化方法中设置它就可以了

> ID：10526493
> 
> 赞同：1
> 
> 时间：2012-05-10T01:46:45.350
> 
> 标签：javascript, backbone.js, underscore.js

```
 ,debouncedAjax: _.debounce(_.bind(myFunction, this), 2000)

,request: function(requestParams, response){
    this.debouncedAjax(requestParams, response);
} 
```

当我可以要求时，我会得到这个

> 未捕获的类型错误：无法调用未定义的方法“应用”（匿名函数）

如果我像这样在 debouncedAjax 属性上设置该 debounce 函数的结果

```
 ,initialize: function() {               
      this.debouncedAjax = _.debounce(this.imoveisAjaxRequest, 2000);           
    } 
```

它工作正常！

为什么 ？

顺便说一句：去抖动是来自令人惊叹的 underscore.js 框架的功能！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T02:06:17.383

与 Javascript 中的许多东西一样，它归结为`this`指针的含义。

在第一个实例中，您可能正在定义一个类原型。如果不明确，则在 Backbone.something.extend() 调用中，这是同一件事。此时，您正在将一个函数与`_.bind(myFunction, this)`. 那么此时`this`指针指的是什么？它肯定不是对象的任何特定实例，因为它们还没有被创建。它可能是`window`Backbone 框架中的一个或某个东西。

当您在函数中调用该函数时`initialize`，`this`指针表示您想要的，所以一切都按照您的意愿进行。

# codeigniter - codeigniter 数据库脚手架

> ID：10526496
> 
> 赞同：0
> 
> 时间：2012-05-10T01:47:11.840
> 
> 标签：codeigniter

我有一组 codeigniter 文件（完整的应用程序）。但我没有数据转储。

我创建了一个空数据库，现在我需要 codeigniter 通过创建所有需要的表和它们的列来搭建数据库。

我的数据库设置如下所示。

```
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = '';
$db['default']['database'] = 'databasename';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

这是我访问该站点时得到的当前输出。

> 错误号：1146
> 
> 表 'databasename.ci_sessions' 不存在
> 
> 插入`ci_sessions`( `session_id`, `ip_address`, `user_agent`, `last_activity`, `user_data`) 值 ('1dc9905a9c9acbd267163bf99793bd30', '127.0.0.1', 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.551111 ', 1336613961, '')
> 
> 文件名：库/Session.php
> 
> 行号：328

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:52:57.657

您需要手动创建会话数据库表。

请参阅[用户指南中的“将会话数据保存到数据库”部分](http://codeigniter.com/user_guide/libraries/sessions.html)

**编辑：**这是因为您已将其配置为将会话数据保存在数据库中（`$config['sess_use_database'] = TRUE;`）

# fortran - Fortran - 在运行时设置变量的种类/精度

> ID：10526500
> 
> 赞同：8
> 
> 时间：2012-05-10T01:47:54.060
> 
> 标签：fortran, precision

是否可以使变量本身的精度成为将在运行时定义的变量？说，如果我尝试编译：

```
 SUBROUTINE FOO( VARIABLE, PRECISION_VALUE )

      IMPLICIT NONE

      INTEGER(4) :: PRECISION_VALUE
      INTEGER(PRECISION_VALUE) :: VARIABLE

      RETURN
      END 
```

编译器输出是：

```
 error #6683: A kind type parameter must be a compile-time constant.   [PRECISION_VALUE]
          INTEGER(PRECISION_VALUE) :: VARIABLE
    --------------^
    compilation aborted for trial.f (code 1) 
```

无论如何围绕它？我知道不能使用任何任意值`KIND`，但这不是我在这个问题上关心的问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T05:08:37.233

不，这是不可能的，必须知道类型、种类和等级。但是，您可以为您希望在运行时传递给例程的所有类型的实现定义通用子例程接口。

# iphone - 使用 CATiledLayer 绘制文本

> ID：10526501
> 
> 赞同：1
> 
> 时间：2012-05-10T01:48:06.443
> 
> 标签：iphone, objective-c, ios, core-graphics

我有一个添加到 a的`UIView`子类，它只有一堆文本，但有时会很长（大约 50,000 像素高）。使用诸如method 之类的常规绘图方法显然不是正确的方法，所以现在我正在研究如何帮助我绘制文本。不幸的是，没有足够的例子来帮助用 绘制文本，我想知道是否有人知道我如何开始这项任务。`MyTextView``scrollView``NSString's` `drawInRect``CATiledLayer``CATiledLayer`

在 UIScrollView 中绘制非常长的文本时使用`CATiledLayer`我的最佳选择吗？

（我不想使用 a`UITextView`因为它也是可滚动的 - 即使我要使用它，我也不希望它是可滚动的，我将它的框架设置为 50,000 像素高，但这并不能解决我的问题（请记住，我会将此视图添加到滚动视图中，因此滚动视图中的 UITextView 并不完全有趣））。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:10:27.877

我不知道 CATiledLayer 是*最好*的，但为了让您开始，您可以自己绘制每个图块的文本内容。

创建图层并设置委托：

```
 CATiledLayer *tiledLayer = [CATiledLayer layer];
    tiledLayer.delegate = self;
    tiledLayer.tileSize =  CGSizeMake(768, 1024);
    tiledLayer.levelsOfDetail = 4;
    tiledLayer.levelsOfDetailBias = 2;
//etc..... 
```

然后就是正常的CGContext绘制代码：

```
- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx 
```

你可以得到 tile rect 和/或 scale 来绘图

```
CGRect rect = CGContextGetClipBoundingBox(ctx);
CGFloat scale = CGContextGetCTM(ctx).a; 
```

文档中关于设置层委托的一句话：

> 在 iOS 中，如果图层与 UIView 对象相关联，则必须将此属性设置为拥有该图层的视图。

# javascript - 通过 Javascript 进行 Safari 绝对定位

> ID：10526502
> 
> 赞同：0
> 
> 时间：2012-05-10T01:48:18.593
> 
> 标签：javascript, css-position, safari

我正在创建一个轮子选择器，用于根据心情选择鸡尾酒。它使用图像地图，当悬停在特定区域上时，会出现由 javascript 生成的悬停状态。它在 Chrome、Firefox 和 IE9 中完美运行，但我在使用 Safari 时遇到问题。绝对定位似乎不适用于我的悬停指示器。

在这里查看它的实际效果：http: [//thehoochlife.com/mood-selector-test/](http://thehoochlife.com/mood-selector-test/)

这是我用来在图像地图区域创建悬停状态的 javascript 示例：

```
function overStubborn() {
indicator.css({
    'display' : 'block',
    'left' : '227px',
    'top' : '54px',
    '-webkit-transform' : 'rotate(169deg)',
    '-moz-transform' : 'rotate(169deg)',
    '-ms-transform' : 'rotate(169deg)',
    '-o-transform' : 'rotate(169deg)',
    'transform' : 'rotate(169deg)'
});
indicator.on('click', function() {
    jQuery('#stubborn').click();
    return false;
});
} 
```

.indicator 元素的 CSS 是：

```
.mood-selector .indicator {
cursor: pointer;
display: none;
height: 27px;
position: absolute;
z-index: 100;
} 
```

有一个`position: absolute;`。`.mood-selector`任何想法为什么绝对定位在 Safari 中不起作用？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:22:21.373

`absolute position`combine和`transform`together的已知问题。

请参阅[http://code.google.com/p/chromium/issues/detail?id=82225](http://code.google.com/p/chromium/issues/detail?id=82225)

我在 Safari 上遇到了同样的问题并在 Chrome 上工作，并找到了两个解决方案，您可以将其拆分`indicator`为两个元素，父元素用于位置，子元素用于转换，或者您可以添加`translateZ(0)`，`transform`即`'-webkit-transform' : rotate(169deg) translateZ(0)`.

# c# - C#串口类库

> ID：10526510
> 
> 赞同：0
> 
> 时间：2012-05-10T01:49:29.793
> 
> 标签：c#, multithreading

我正在编写一个类库，它使用串行端口使用专有协议从设备传输数据。

当我用作 Windows 窗体应用程序时，它运行良好。我将它转换为类库的那一刻，它在处理完第一位数据后结束。是否需要进行一些线程处理以防止它仅将其返回给调用它的应用程序？在将控制权返回给调用它的应用程序之前，它需要确保已经收集了来自设备的所有数据。

这是提前结束的完整代码：

```
using System;
using System.Text;
using System.IO.Ports;
using System.IO;
using System.Text.RegularExpressions;
using System.Threading;
     using System.Runtime.InteropServices;

     namespace ValidataDex
     {

    public class DexLib
    {

        public Crc16 c = new Crc16();
        public Search s = new Search();

        const ushort polynomial = 0xA001;

        ushort[] table = new ushort[256];

        SerialPort port = null; // create port so it can be used and seen everywhere

        int good = 0;  // is dex good 

        public string myblock;

        public delegate void SetTextDeleg(byte[] text);
        public int count;

        public string stage = "initial";
        public string position = "";

        public string crcstuff = "";
        public byte[] crcdata;

        public int lastsent = 0;

        public int audit = 0;
        public char etboretx;
        public int gotenq = 0;
        public int x = 2;
        public int positiondetermined = 0;

        // Dex Commands
        public byte NUL = 0x00;
        public byte SOH = 0x01;
        public byte STX = 0x02;
        public byte ETX = 0x03;
        public byte EOT = 0x04;
        public byte ENQ = 0x05;
        public byte ACK = 0x06;
        public byte DLE = 0x10;
        public byte NAK = 0x15;
        public byte SYN = 0x16;
        public byte ETB = 0x17;
        public string Dex;
        public int rte=0;

        public string CHANGER_IS_SLAVE = "9252130100RR01L01";

        byte zero = 0x30;
        byte one = 0x31;

        public void Data_Received(object sender, SerialDataReceivedEventArgs e)
        {
            SerialPort sp = (SerialPort)sender;
            count = port.BytesToRead;
            byte[] data = new byte[count];
            port.Read(data, 0, data.Length);

            // audit function activated by a file named debug residing in application directory
            string path = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase);
            if (audit == 1 || File.Exists(path + @"\debug.txt"))
            {
                x = 0;
                foreach (byte b in data)
                {
                    audit_file(1, "stage:"+stage+" command:"+getdexcommand(b)+" pos det:"+positiondetermined);
                    //                textBox1.Text += getdexcommand(b);
                    x++;
                }
            }

            try
            {
                // wait for device to transmit a DLE to begin DEX
                if (data[0] == DLE || positiondetermined == 1)
                {
                     DexasMaster(data);
                }
            }
            catch (Exception ee)
            {
                audit_file(2, ee.InnerException.ToString());
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T16:39:14.780

答案是提供足够长的 Thread.Sleep 来处理所有数据。在那之后，它就像一个魅力。

# java - 如何在Android中将文本插入当前聚焦的文本框

> ID：10526511
> 
> 赞同：2
> 
> 时间：2012-05-10T01:49:30.297
> 
> 标签：java, android, android-layout

我有 4 个文本框，当用户单击一个按钮时，我希望插入相关文本并移至下一个文本框并在该框中插入下一个文本。到目前为止，我的代码还有一段距离。

```
Time1Btn = (Button)findViewById(R.id.Time1Btn);
Time2Btn = (Button)findViewById(R.id.Time2Btn);
Time1HrEB = (EditText)findViewById(R.id.Time1HrEB);  // i would guess this would be replaced

Time1Btn.setOnClickListener(MyOnClickListener);
Time2Btn.setOnClickListener(MyOnClickListener);

private View.OnClickListener MyOnClickListener = new OnClickListener(){
    public void onClick(View v){
   Button b = (Button)v;
   EditText e = (EditText).getCurrentFocus(); // attemt of what to do

   String buttonText = b.getText().toString();
   e.setText(buttonText); // this is the line i wish to replace.
   int id = getCurrentFocus().getNextFocusRightId();

       findViewById(id).requestFocus();
      }
}; 
```

我的布局文件是。

```
<EditText
            android:id="@+id/Time1HrEB"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:inputType="number"
            android:maxWidth="30dp"
            android:minWidth="30dp"
            android:nextFocusRight="@+id/Time2HrEB"
          >
</EditText>

<EditText
            android:id="@+id/Time2HrEB"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:inputType="number"
            android:minWidth="30dp"
             />
etc... 
```

任何想法......我已经尝试了一些东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T02:16:48.433

你很亲密

```
View et = getCurrentFocus()
EditText e = (EditText) et;
e.setText(buttonText); 
```

试一试，让我知道。

# sqlite - Android中存在数据库问题的应用程序类

> ID：10526513
> 
> 赞同：3
> 
> 时间：2012-05-10T01:50:02.477
> 
> 标签：sqlite, class, sqliteopenhelper, android

我无法在我的 Android 应用程序中访问 SQLite DB。我创建了一个包含 SQLiteOpenHelper 实例的应用程序类，但是每当我尝试在另一个活动中打开数据库时，它就会崩溃。

这是我的应用程序类：

```
public class GlobalVariables extends Application {

    private LocationsData locations;

    public void onCreate(Context context) {
            locations = new LocationsData(context);
    }

    public LocationsData getLocations() {
           return locations;
    }
} 
```

这是我的 SQLiteOpenHelper 类：

```
public class LocationsData extends SQLiteOpenHelper{
private static final String DATABASE_NAME = "locations.db";
private static final int DATABASE_VERSION = 1;

public static final String TABLE_LOCATIONS = "locations";
public static final String COLUMN_ID = "_id";
public static final String COLUMN_NICKNAME = "nickname";

private static final String DATABASE_CREATE = "create table "
        + TABLE_LOCATIONS + "( " + COLUMN_ID
        + " integer primary key autoincrement, " + COLUMN_NICKNAME
        + " text not null);";

public LocationsData(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(DATABASE_CREATE);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_LOCATIONS);
    onCreate(db);

} 
```

}

当我尝试在像这样的另一个活动中访问数据库时，我收到一个错误：

```
 @Override
    public void onResume()
    {
         locationsData=((GlobalVariables)getApplication()).getLocations();
         SQLiteDatabase db = locationsData.getReadableDatabase();
         super.onResume();
    } 
```

有什么帮助吗？谢谢！

```
Log Cat:
05-10 02:00:50.146: D/AndroidRuntime(532): Shutting down VM
05-10 02:00:50.146: W/dalvikvm(532): threadid=1: thread exiting with uncaught exception (group=0x40015560)
05-10 02:00:50.179: E/AndroidRuntime(532): FATAL EXCEPTION: main
05-10 02:00:50.179: E/AndroidRuntime(532): java.lang.RuntimeException: Unable to resume activity {com.John.seniorDesign/com.John.seniorDesign.LocationsTabActivity}: java.lang.NullPointerException
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2120)
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:138)
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:654)
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.widget.TabHost.setCurrentTab(TabHost.java:326)
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:132)
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:456)
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.view.View.performClick(View.java:2485)
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.view.View$PerformClick.run(View.java:9080)
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.os.Handler.handleCallback(Handler.java:587)
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.os.Looper.loop(Looper.java:130)
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-10 02:00:50.179: E/AndroidRuntime(532):  at java.lang.reflect.Method.invokeNative(Native Method)
05-10 02:00:50.179: E/AndroidRuntime(532):  at java.lang.reflect.Method.invoke(Method.java:507)
05-10 02:00:50.179: E/AndroidRuntime(532):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-10 02:00:50.179: E/AndroidRuntime(532):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-10 02:00:50.179: E/AndroidRuntime(532):  at dalvik.system.NativeStart.main(Native Method)
05-10 02:00:50.179: E/AndroidRuntime(532): Caused by: java.lang.NullPointerException
05-10 02:00:50.179: E/AndroidRuntime(532):  at com.John.seniorDesign.LocationsTabActivity.onResume(LocationsTabActivity.java:75)
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1150)
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.app.Activity.performResume(Activity.java:3832)
05-10 02:00:50.179: E/AndroidRuntime(532):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2110)
05-10 02:00:50.179: E/AndroidRuntime(532):  ... 17 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:54:44.597

在 GlobalVariables 中，将上下文更改为新 LocationsData 中的 getApplicationContext() 并从 onCreate 中删除上下文 - 此签名不存在。

**编辑：**

```
public class GlobalVariables extends Application {

    private LocationsData locations;

    @Override
    public void onCreate() {
            locations = new LocationsData(getApplicationContext());
    }

    public LocationsData getLocations() {
           return locations;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:58:54.303

不知道原因是什么，但这是我通常如何实现我的数据库打开/关闭功能：

在我的数据库类中：

```
public GroceryDB(Context ctx) {
    this.mCtx = ctx;
}

public GroceryDB open() throws SQLException {
    mDBHelper = new DBHelper(mCtx);
    mDb = mDBHelper.getWritableDatabase();
    return this;
}

public void close() {
    mDBHelper.close();
} 
```

然后我在任何其他类中调用它，如下所示：

```
 mDbHelper = new GroceryDB(getActivity());
    mDbHelper.open(); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:29:19.507

在应用程序的生命周期中，您总是希望确保您处理的是单个数据库实例。查看类似问题的[**答案。**](https://stackoverflow.com/a/9286006/844882)它提供了一些示例，说明如何在应用程序中正确打开/关闭数据库。

# assembly - 此 x86 程序集示例可能出现错误

> ID：10526517
> 
> 赞同：0
> 
> 时间：2012-05-10T01:50:31.093
> 
> 标签：assembly, x86

我正在阅读我的一门课程的练习考试。该问题的体系结构是x86。问题：

```
Which of the following lines of pseudo C code performs the same operation as the 
assembly statement 
    lea 0xffffffff(%esi), %eax ? 
```

选项：

```
a) *(esi-1) = eax
b) esi = eax + 0xffffffff
c) eax = esi - 1
d) eax = *(esi -1) 
```

因为它是一个“lea”操作，我觉得答案应该是（c），但显然答案键是（a）。这是一个错字吗？还是我只是理解不好。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:24:56.763

答案`c`是对的。

这种代码通常由编译器（和一些人:-)）生成，以利用`lea`非破坏性版本的事实`add`，它允许最多 3 个输入操作数并且保持标志不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T04:30:52.040

最正确的解释是：

```
eax = (esi + 0xFFFFFFFF) & 0xFFFFFFFF; 
```

当然这可以简化为：

```
c) eax = esi - 1; 
```

做相反的事情（将伪 C 转换回 AT&T）：

```
a) movl %eax,0xffffffff(%esi)
b) lea 0xffffffff(%eax),%esi
c) lea 0xffffffff(%esi), %eax
d) movl 0xffffffff(%esi), %eax 
```

# cakephp - cakephp如何获取查询中的计数

> ID：10526518
> 
> 赞同：3
> 
> 时间：2012-05-10T01:50:43.723
> 
> 标签：cakephp, cakephp-2.0

我正在使用此查询来获取所有数据，但我还需要在其中添加它返回的行数。

这是我的代码：

```
function getUsers($id){
    $users = $this->User->find('all', array('condition'=>array('my_id'=>$id)));
    $numUsers = sizeof($users);
    $users['User']['Total']= $numUsers;
    echo  json_encode($users);
} 
```

包含用户的`$dArray`所有数据，但我也希望它告诉我那里有多少用户。

我在想我会在 User 对象中获取数据，但这就是我们给我的

```
Object
0: Object
1: Object
2: Object
3: Object
4: Object
5: Object
User: Object
Total: 6

instead of adding it to the 

0: Object
Company: Object
Group: Object
Team: Array[0]
User: Object
company_id: "20"
created: "2012-04-15 17:35:51"
email: "dd@gmail.com"
expiration_date: "2012-04-15 17:35:00"
firstname: "jason"
grants_id: null
group_id: "1"
id: "1"
lastname: "brawar"
modified: "2012-04-23 14:25:48"
name: null
password: "203e686b6a6938648ddd3eb0a8d95988ac638596"
phone: "abcd"
status: "Active"
type: null
username: "asim"
Total: 1 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T02:30:47.723

也许你正在寻找这个...

```
$conditions = array('somecondition' => $someCond);
$totalUsers = $this->User->find('count', array('conditions' => $conditions)); 
```

[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-count](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find-count)

好的，现在如果要获取每个用户的元素总数，应该执行以下操作：

```
$users = $this->User->find('all');
foreach($users as $key => $user)
$ElementsForEachUser[$key]['totalRows'] = sizeof($user['User']); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-10T01:54:20.440

无需在查询中执行此操作 - 只需使用 PHP：

```
<?php
$this->User->recursive=-1;
$users = $this->User->find('all', array('conditions'=>array('my_id'=>$id)));
$numUsers = sizeof($users); 
```

这将为您提供主要项目（即用户）的数量，因为您想通过递归或可包含的任何“额外”数据将嵌套在每个单独的用户数组中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T09:56:52.437

```
$conditions = array('somecondition' => $someCond);
$totalUsers = $this->User->find('count', array('conditions' => $conditions)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-07T01:58:25.167

1.  如果您已经获取了行 - `sizeof($users);`，就像其他答案中提到的那样。

2.  但是，如果您想执行 sql `COUNT`，[从 Cake 3 开始](https://book.cakephp.org/3/en/orm/retrieving-data-and-resultsets.html#getting-a-count-of-results)，您可以`->count()`在查询中使用：

```
$query = $this->User->find('all');
$number = $query->count(); 
```

# android - 在屏幕旋转时保存动态创建的布局

> ID：10526526
> 
> 赞同：0
> 
> 时间：2012-05-10T01:52:07.803
> 
> 标签：android, layout, dynamic

我在活动第一次启动时动态创建布局，问题是当屏幕旋转时它再次点击数据库以创建布局。如何保存布局，以便每次更改屏幕方向时都不会重新创建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:33:59.243

知道了！创建了一个片段并加载在 onCreate 期间动态创建的视图的 ArrayList。设置 setRetainInstance(true); 和 onPause 清除视图并 onResume 从 ArrayList 重新加载视图。使用 setRetainInstance(true)，不会再次调用 onCreate，因此不会从数据库加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:44:54.440

查看文档以覆盖默认旋转行为：http: [//developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T04:45:10.613

您可以使用

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    // SAVE YOUR DATA IN "outstate" BUNDLE
    super.onSaveInstanceState(outState);
}
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    // RESTORE YOUR DATA FROM savedInstanceState.
    super.onRestoreInstanceState(savedInstanceState);
} 
```

保存数据包并在 onRestoreInstanceState 中再次恢复

这是示例..

```
public class Test_stflowActivity extends Activity {
    String initial_text = null;
    boolean already_created = false;
    TextView tv = null;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tv = (TextView) findViewById(R.id.textView1);

        if (savedInstanceState == null) {
            initial_text = "bharat";
            loadNew();
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        initial_text = "sharma";
        outState.putString("initial_text", initial_text);
        super.onSaveInstanceState(outState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        initial_text = savedInstanceState.getString("initial_text");
        loadNew();
        super.onRestoreInstanceState(savedInstanceState);
    }

    void loadNew() {
        tv.setText(initial_text);
    }
} 
```

这是xml布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="139dp"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout 
```

>

# javascript - 为什么我会收到“左侧分配无效”？

> ID：10526527
> 
> 赞同：0
> 
> 时间：2012-05-10T01:52:13.293
> 
> 标签：javascript, cookies

我正在尝试设置一个 cookie 来跟踪访问。

```
if (getCookie(pageCount) == "") {
    var pageCount = 1;
} else {
    parseInt (pageCount)++;
}
setCookie(pageCount, pageCount, expire); 
```

上面的代码给了我错误“左侧分配无效” `parseInt`。关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T01:54:14.223

```
if (getCookie(pageCount) == "") { 
    var pageCount = 1; 
} else { 
    var pageCount = parseInt (pageCount || 0);
    pageCount ++; 
} 
setCookie(pageCount, pageCount, expire); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T01:55:17.100

```
parseInt(pageCount)++; 
```

你期望增量操作做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T02:31:00.157

这段代码怎么样：

```
if ( getCookie(pageCount) ) { 
    var pageCount = 1; 
} else { 
    var pageCount = (+pageCount || 0) + 1;
} 
setCookie(pageCount, pageCount, expire); 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T02:34:37.677

```
if (getCookie("pageCount") == "") {
    var pageCount = 1;
} else {
    var pageCount = parseInt(getCookie("pageCount"));
    pageCount++;
}
setCookie("pageCount", pageCount, expire); 
```

# c# - 如何在游戏中保存/加载对象

> ID：10526532
> 
> 赞同：0
> 
> 时间：2012-05-10T01:52:59.653
> 
> 标签：c#, xna, load, save

我想知道在 PC 游戏上在 XNA 中保存和加载正在进行的游戏的最佳方法是什么？我考虑了一些并写了一些代码，但我觉得我的方法很弱，我可以用更好的方式来做。我的方法是为每个游戏对象设置一个 ToString() 方法。然后我会将其写入文件并将其转换为字节（以防止篡改）并保存文件。然后，当加载时间到来时，它将字节转换回字符串，我会读取每个字节并在新游戏中重新实例化这些对象。那么有什么建议吗？还是我的方法是这样做的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:55:09.107

你有没有研究过序列化？它将对象直接转换为字节，然后再次将文件直接转换为对象。
[这](http://msdn.microsoft.com/en-us/library/ms233843.aspx)是有关如何执行此操作的 MSoft 链接。

它更快更便宜（对于CPU）然后转换为字符串然后解析。不过可能还有更好的方法。这些将需要比序列化更多的工作，这非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T13:27:58.577

看看[http://easystorage.codeplex.com/](http://easystorage.codeplex.com/)它处理了这类东西的大部分问题。

此外，如果您计划将此移植到 Windows Phone 或 Xbox，它也受支持。

# c - 多个进程读/写fifo

> ID：10526534
> 
> 赞同：1
> 
> 时间：2012-05-10T01:53:09.717
> 
> 标签：c, multiprocessing

我需要编写一个写入 FIFO 的多个进程，我想知道如何在它们之间同步，我是否需要写一些锁，如果是，那么这会很慢，因为一个进程必须等待另一个进程释放锁? 请让我知道实现进程间通信的其他最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T03:10:25.183

```
"do I need to write some lock" 
```

嗯，可能是的。如果您使用的是共享内存（pthreads、openmp），那么您需要某种读写锁来防止竞争条件、数据失效等。如果您使用的是分布式内存，那么您需要考虑一些一种归约操作，可将所有数据集中到一个地方。

```
"if yes then would that be slow as a process has to wait for the other to free the lock?" 
```

这取决于你，程序员。编写缓慢、低效的程序很容易，但需要一些时间来提高程序执行、速度等。我还可以补充一点，您认为性能瓶颈所在的地方并不总是它们实际发生的地方。与调试器和性能分析器成为最好的朋友是个好主意。

这里有一些资源可以帮助您入门，我建议您进行研究、编写代码并提出具体问题以获得更好的帮助。

[https://computing.llnl.gov/tutorials/pthreads/](https://computing.llnl.gov/tutorials/pthreads/)

[https://computing.llnl.gov/tutorials/openMP/](https://computing.llnl.gov/tutorials/openMP/)

[https://computing.llnl.gov/tutorials/mpi/](https://computing.llnl.gov/tutorials/mpi/)

另请查看右侧的“相关”问题以获取其他一些重要资源。

# android - 从网站下载 Android

> ID：10526538
> 
> 赞同：1
> 
> 时间：2012-05-10T01:53:47.070
> 
> 标签：android, webview, download

我的路径的 Url 是这样的`www.sample.com/sample/1234`。当您单击路径时，它会下载类似这样的文件

```
Sample_hello_sample.epub 
```

我无法使我的应用程序使用此下载。

这是我的代码：

```
private class InsideWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (url.contains("sample")) {
            startDownload(url);
            return true;
        }

        //...?

        view.loadUrl(url);
        return true;
        }
    }

    @Override
    public void onBackPressed() {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("Are you sure you want to exit?")
               .setCancelable(false)
               .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       Gutenbergmain.this.finish();
                   }
               })
               .setNegativeButton("No", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                        dialog.cancel();
                   }
               });
        AlertDialog alert = builder.create();
        alert.show();
    }

    private void startDownload(String url) {
        new DownloadFileAsync().execute(url);
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DIALOG_DOWNLOAD_PROGRESS:
            mProgressDialog = new ProgressDialog(this);
            mProgressDialog.setMessage("Downloading file..");
            mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            mProgressDialog.setCancelable(false);
            mProgressDialog.show();
            return mProgressDialog;

        default:
            return null;
        }
    }

    @Override
    protected void onPrepareDialog(int id, Dialog dialog, Bundle args) {
        if (id == DIALOG_DOWNLOAD_PROGRESS)
            mProgressDialog.setProgress(0);
    }

    class DownloadFileAsync extends AsyncTask<String, String, String> {
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            showDialog(DIALOG_DOWNLOAD_PROGRESS);
            mProgressDialog.setProgress(0);
        }

        @Override
        protected String doInBackground(String... aurl) {
            int count;

            try {
                URL url = new URL(aurl[0]);

                URLConnection conexion = url.openConnection();
                conexion.connect();

                int lenghtOfFile = conexion.getContentLength();
                Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

                String path = url.getPath();
                String idStr = path.substring(path.lastIndexOf('/') + 1);

                String fileName = idStr;

                File sdCard = Environment.getExternalStorageDirectory();
                File dir = new File (sdCard.getAbsolutePath() + "/Sample/epub");
                dir.mkdirs();

                File file = new File(dir, fileName);

                InputStream input = new BufferedInputStream(url.openStream());
                FileOutputStream f = new FileOutputStream(file);

                //InputStream input = new BufferedInputStream(url.openStream());
                //OutputStream output = new FileOutputStream("/sdcard/" + fileName);

                byte data[] = new byte[1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    total += count;
                    publishProgress(""+(int)((total*100)/lenghtOfFile));
                    f.write(data, 0, count);
                    //output.write(data, 0, count);
                }

                f.flush();
                f.close();

                //output.flush();
                //output.close();

                input.close();
            } catch (Exception e) {}

            return null;
        }

        protected void onProgressUpdate(String... progress) {
             Log.d("ANDRO_ASYNC",progress[0]);
             mProgressDialog.setProgress(Integer.parseInt(progress[0]));

        }

        @Override
        protected void onPostExecute(String unused) {
            dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:42:03.630

您必须编辑您的 AndroidManifest.xml 文件。例如。

```
<intent-filter >
   <action android:name="android.intent.action.VIEW" />
   <category android:name="android.intent.category.BROWSABLE" />
   <category android:name="android.intent.category.DEFAULT" />
   <data android:mimeType="application/*"  />
   <data android:host="*" /> 
   <data android:pathPattern=".*\\.epub" /> 
</intent-filter> 
```

# javascript - 淘汰赛 JS 错误：“提交绑定的值必须是函数”

> ID：10526542
> 
> 赞同：2
> 
> 时间：2012-05-10T01:54:44.853
> 
> 标签：javascript, mvvm, knockout.js, knockout-2.0

我已经设置了这样的视图模型：

```
function viewModel() {
    var self = this;
    self.voteOnItem = function (sender, e) { .. }

    .
    .
}

var model = new viewModel();
ko.applyBindings(model); 
```

在我看来，我在模板中有这个：

```
<script type="text/html" id="X">
  <ul id="" data-bind="foreach:items">
 <li>
    <div style="float:left;">
           <form action='Url' method="post" data-bind="submit:$parent.voteOnItem">
      .
      . 
```

我收到一个错误“提交绑定的值必须是一个函数”，以便映射到 voteOnItem，但 voteOnItem 显然是一个函数......知道为什么会出错吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T02:38:24.527

`submit`当您进行绑定时，我会确保您处于正确的范围内。

你得到的错误是你在`$parent`没有`voteOnItem`属性时会看到的（比如你放`$parent.blah`）。

一种简单的查看方法是`<div data-bind="text: ko.toJSON($parent)"></div>`在绑定附近放置一个以查看该级别的数据。

要验证的另一件事是您已关闭所有标签，并且没有使用任何不良的自关闭标签，例如`<span />`.

# iphone - 如何单击表格单元格将我带回“上一个”视图？

> ID：10526547
> 
> 赞同：0
> 
> 时间：2012-05-10T01:55:19.287
> 
> 标签：iphone, objective-c, ios

我一直在搜索有关使用方法 didSelectRowAtIndexPath 的类似问题，但我发现每个人都只想创建一个新视图并在单击表格的单元格时转到它。

就我而言，我有标签栏视图；在其中一个选项卡上，有一个按钮可以将我带到表格视图。当我单击表格的任何单元格时，我需要返回调用者选项卡视图。我该怎么做？

谢谢，拉法特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T02:35:21.027

如果你通过 UINavigationController 推送你的视图，那么你可以简单地做

```
 - (UIViewController *)popViewControllerAnimated:(BOOL)animated 
```

或者如果你想切换到 UITabBarController 中的另一个选项卡，你可以做这样的事情

```
 [myTabBarController setSelectedIndex:index] 
```

# ios - iOS 应用版本编号

> ID：10526548
> 
> 赞同：6
> 
> 时间：2012-05-10T01:55:38.597
> 
> 标签：ios, versioning, distribution

iTunes Connect 开发人员指南 PDF（第 47 页）参考以下关于 iOS 应用程序的版本号：

> 使用典型的软件版本约定（例如“1.0”或“1.0.1”或“1.1”）

没有关于应用程序版本号的确切格式的声明。我们可以使用“1.0.0.1”或“1.0.0.0.1”等版本号吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T02:06:18.580

我的建议是坚持使用 1.xx 格式作为应用商店的“营销版本号”，如果您需要更多，只需增加您的内部版本号。这两个都可以在 xcode 内的目标摘要下找到。查看[agvtool](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man8/agvtool.8.html)以轻松地使用 Xcode 构建更新这两个字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T02:00:07.197

是的，您可以随意格式化它，但通常一个不使用两个以上的点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T02:00:39.053

您的版本号没有固定格式（只要是 xxx 格式）。您可以根据需要在版本中包含任意数量的数字，但建议（我记得在人机界面指南中的某处，不确定在哪里）您制作一个简单的版本控制系统（不超过三个数字），这样更容易用户。但是，我见过使用版本号的应用程序，例如：6.77.4903.0

版本号的长度没有限制，只要它保持为 xxx 格式即可。

如果您需要更多，请随意使用 Xcode 中未发布的内部版本号，方法是转到您的项目设置页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-21T20:46:33.960

210721 [Chrome 应用程序](https://apps.apple.com/us/app/google-chrome/id535886823)现在仍然使用 4 组件版本号，但我不确定他们是如何实现的。更多讨论可以在这里找到：[https ://developer.apple.com/forums/thread/15701](https://developer.apple.com/forums/thread/15701)

# php - 分手 文本到键/值行

> ID：10526549
> 
> 赞同：1
> 
> 时间：2012-05-10T01:56:07.577
> 
> 标签：php, text, domdocument

我有以下 HTML 字符串。

```
<div id="mydiv">
<pre>
Some content several lines. 

   Field1: value 2
   Field2: value 2
   Field3: value 3

Some content. several lines.
</pre>
</div> 
```

我正在尝试获取`<pre>`标签中的文本并将其分解为其字段，因此我正在使用`DomDocument()` `loadHTML()` `DOMXPath`and`query('//pre')`来获取`<pre>`.

当我得到`var_dump`它时`nodeValue`，我得到格式化的文本，就像使用`<pre>`. 我不确定为什么会这样，但我想知道这是否可以以某种方式帮助我将文本分解为字段/值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T02:11:51.303

如果您只想阅读它，那么就这样做。

```
<?php
$preStr = ""; //Holds the pre-string.
$preArr = explode("\n", $preStr);
$pairs = array();

foreach ($preArr AS $line) {
  $line = trim($line);

  if (stristr($line, ':')) {
    list($key, $value) = explode(':', $line);
    $pairs[$key] = $value;
  }
} 
```

# magento - Magento URL 重定向问题

> ID：10526550
> 
> 赞同：0
> 
> 时间：2012-05-10T01:56:16.957
> 
> 标签：magento, magento-1.5

我的磁电机安装没有从子文件夹正确引导。当我在catalogsearch/advanced 之类的页面上时，我无法返回主页或任何其他主要级别的链接。

我的 .htaccess 文件如下，

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_URI} !^/media/
RewriteCond %{REQUEST_URI} !^/skin/
RewriteCond %{REQUEST_URI} !^/js/
RewriteCond %{REQUEST_URI} !^/var/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule . /index.php [L]
</IfModule> 
```

[http://blogwall.ca](http://blogwall.ca)

这是我的临时网站链接，因此您可以查看行为，最简单的链接是照片页面。

请让我知道任何想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:57:04.847

这只是您的标题导航链接的问题。

你目前有这个：

```
<ul id="nav">
    <li id="" class="">
        <a href="home" title="Home" class="">Home</a>
    </li>
    <li id="" class="">
        <a href="about" title="About  Us" class="">About  Us</a>
    </li>
    <li id="">
        <a href="audio" title="Media">Media</a>
    </li>
    <li id="" class="">
        <a href="videos" title="Videos" class="">Videos</a>
    </li>
    <li id="" class="">
        <a href="../photo/category/view/id/4/" title="Photo" class="">Photos</a>
    </li>
    <li id="" class="">
        <a href="../../../../../news" title="News" class="">News</a>
    </li>
    <li id="" class="">
        <a href="../../../../../contacts" title="Contact Us" class="">Contact Us</a>
    </li>
</ul> 
```

尝试纠正此问题以使其具有此：

```
<ul id="nav">
    <li id="" class="">
        <a href="/home" title="Home" class="">Home</a>
    </li>
    <li id="" class="">
        <a href="/about" title="About  Us" class="">About  Us</a>
    </li>
    <li id="">
        <a href="/audio" title="Media">Media</a>
    </li>
    <li id="" class="">
        <a href="/videos" title="Videos" class="">Videos</a>
    </li>
    <li id="" class="">
        <a href="/photo/category/view/id/4/" title="Photo" class="">Photos</a>
    </li>
    <li id="" class="">
        <a href="/news" title="News" class="">News</a>
    </li>
    <li id="" class="">
        <a href="/contacts" title="Contact Us" class="">Contact Us</a>
    </li>
</ul> 
```

这可以解决问题。

# jira - Jira 如何向版本添加问题

> ID：10526551
> 
> 赞同：5
> 
> 时间：2012-05-10T01:56:17.760
> 
> 标签：jira

我有一个项目，我们一直在使用 Jira 进行测试。我们刚刚找到了版本功能并创建了一个。但是，我找不到任何有关将现有或新问题添加到版本的文档。

请有人能在这里点亮一盏灯。干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T12:20:31.390

在我使用的 JIRA 版本中，我可以通过编辑问题并将“Fix Version/s”设置为您要使用的版本来将问题添加到版本中。我们确实有一个相当定制的项目，但对您来说可能会有所不同。

我们还安装了 Greenhooper，并且可以将问题拖放到规划板中的版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T14:10:22.077

JIRA 默认有两个版本字段。修复版本和影响版本。除非您禁用它们，否则您应该在编辑问题时看到它们。您可以通过适当地选择这些字段来将问题添加到版本。

在影响版本中，您将输入存在问题的版本，在修复版本中，您将输入问题已经（或将要）修复的版本。

# html - 当它滚动到下面的固定 div 时，如何更改 div 的内容？

> ID：10526552
> 
> 赞同：0
> 
> 时间：2012-05-10T01:56:23.670
> 
> 标签：html

好的，所以我希望更改 div.a 中的内容，同时在下面的 div.b 上滚动。就像一个滚动条的图像列表，标题在滚动时显示。

请帮忙，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:02:04.953

这过于简单化，但只是为了给你一个想法。

//jQuery

```
$(function(){
    $('a#trigger').hover(){function(){
        $('h1')html('<p>first content</p>');
    },function(){
        $('h1').html('<p>second content</p>');
    }};
}); 
```

# ios - Xcode中情节提要模式中的页面是否有限制

> ID：10526554
> 
> 赞同：0
> 
> 时间：2012-05-10T01:57:05.033
> 
> 标签：ios, xcode, storyboard

您好，我是为 iOS 设备开发应用程序的新手，我想知道在故事板模式下的页面数量是否有限制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:49:19.947

仅通过内存和磁盘空间（在开发和运行时机器上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:13:12.540

我不相信有限制，两者`storyboards`实际上`xibs`都只是 XML 文档，而界面构建器只是用于修改它们的 GUI。考虑到 XML 是一种非常轻量级的语言，可以在当今的设备上毫不费力地执行，我认为您不必担心文件大小是一个安全的选择。（当然除了设备存储限制）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T02:15:44.440

没有记录在案的。虽然这并不意味着不，但它确实很有可能它要么是无限的，要么是一个非常大的数字。

# asp.net-mvc - 实体 MVC3 使用 GUID 播种数据

> ID：10526555
> 
> 赞同：0
> 
> 时间：2012-05-10T01:57:11.970
> 
> 标签：asp.net-mvc

我有一个使用 GUID 类型作为外键的用户类。我想将数据播种到另一个使用用户类中的 GUID 的表中，但得到“无法将字符串显式转换为 system.GUID”错误。

这是我试图播种的表：

```
public class Song
    {
        [ScaffoldColumn(false)]
        public int Songid { get; set; }

        [ScaffoldColumn(false)]
        public virtual Guid UserId { get; set; }

        public string SongTitle { get; set; }

        public string Genre { get; set; }

        public string insWanted { get; set; }

        public string mp3URL { get; set; }

        public string wavURL { get; set; }

        public int? BPM { get; set; }
    } 
```

这是用户类：

```
public class User
    {
        [Key]
        public virtual Guid UserId { get; set; }

        [Required]
        public virtual String Username { get; set; }

        [Required]
        public virtual String Email { get; set; }

        [Required, DataType(DataType.Password)]
        public virtual String Password { get; set; }

        public virtual String FirstName { get; set; }
        public virtual String LastName { get; set; }

        [DataType(DataType.MultilineText)]
        public virtual String Comment { get; set; }

        public virtual Boolean IsApproved { get; set; }
        public virtual int PasswordFailuresSinceLastSuccess { get; set; }
        public virtual DateTime? LastPasswordFailureDate { get; set; }
        public virtual DateTime? LastActivityDate { get; set; }
        public virtual DateTime? LastLockoutDate { get; set; }
        public virtual DateTime? LastLoginDate { get; set; }
        public virtual String ConfirmationToken { get; set; }
        public virtual DateTime? CreateDate { get; set; }
        public virtual Boolean IsLockedOut { get; set; }
        public virtual DateTime? LastPasswordChangedDate { get; set; }
        public virtual String PasswordVerificationToken { get; set; }
        public virtual DateTime? PasswordVerificationTokenExpirationDate { get; set; }

        public virtual ICollection<Role> Roles { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:39:04.310

也许发生这种情况是因为您的用户表中的 Guid 没有被填充？尝试使用此 PK 属性：

```
 [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)] 
```

# javascript - 如何滚动一个你不专注于使用jQuery的元素？

> ID：10526561
> 
> 赞同：1
> 
> 时间：2012-05-10T01:57:48.337
> 
> 标签：javascript, jquery, css

[Pinterest](http://pinterest.com)和 9gag 的[快速版本](http://9gag.com/fast#4122318)等网站是如何做到这一点的：

在 Pinterest 上，如果您单击任何图像并获得模态框，您会注意到在页面上的任何位置滚动会导致模态框而不是主文档滚动。

在 9gag 上，如果您滚动评论部分以外的任何地方，滚动的是左侧的主要内容区域。

无论哪种情况，您都不必专注于要滚动的区域。即使您的鼠标不在您要滚动的区域内，只要在任何地方滚动，都会导致该区域被滚动。

他们如何做到这一点？例如，如何禁用主文档上的滚动并导致页面上的某些 div 在它的位置滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:00:51.083

在 Pinterest 上，当一个模式打开时，一个“noscroll”类被添加到`<body/>`：

```
.noscroll {overflow: hidden !important;} 
```

这可以防止`body`滚动。模态本身的 id 为“zoomscroll”，其中包含以下内容：

```
overflow-y: scroll; 
```

因此，当`body`冻结时，`#zoomscroll`可以滚动溢出。

在此处查看演示：http: [//jsbin.com/ucacon/2/edit](http://jsbin.com/ucacon/2/edit) — 单击任何段落以冻结正文，并启用段落本身的滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:13:05.100

这是他们在模态框上的实际 CSS。

```
#zoomScroll {
    position: fixed;
    z-index: 9999;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: white;
    background-color: rgba(255, 255, 255, 0);
    overflow-x: auto;
    -y: scroll;
    -webkit-perspective: 1000;
} 
```

加上 body 类 noscroll 使它工作。

```
.noscroll {overflow: hidden !important;} 
```

# facebook - 多维数组和用户数据

> ID：10526564
> 
> 赞同：0
> 
> 时间：2012-05-10T01:58:11.840
> 
> 标签：facebook, facebook-graph-api, multidimensional-array

## 以及下一个功能中提到的显示好友功能

```
 function displayfriends($major, $friends) {
    // Whatever markup you want here
    // For example -- unordered list
if (count($friends) > 0) {
echo "<h2>Friends with $major major</h2>";
echo '<ul>';
foreach ($friends as $friend) {
    echo "<li>$friend</li>";
}
echo '</ul>'; 
```

} }

这是一个与 UI 配合使用的测试功能

```
 function getFriendsWithMajor($major) {
 $config = array(
 'appId' => '',
 'secret' => '',
 );
 $facebook = new Facebook($config);
 $user_id = $facebook->getUser();
 try {
 $fql    =   "select uid,name,education from user WHERE uid IN (select uid2 from friend where uid1=($user_id))";
 $param  =   array(
 'method'    => 'fql.query',
 'query'     => $fql,
 'callback'  => ''
 );
 $fqlResult   =   $facebook->api($param);
 } catch(Exception $o) {
    d($o);
 }

 $friends = $fqlResult;
 $friends_BA = array();

 foreach ($friends as $friend) {
     if (is_array($friend['education'])) {
         foreach ($friend['education'] as $school) {
             if (isset($school['concentration'])) {
                foreach ($school['concentration'] as $concentration) {
                    if (strpos(strtolower($concentration['name']), $major) !== false) {
                        $friends_BA[] = $friend['name'];
                        continue 3; // skip to the next friend
                    }
                }
             }
        }
    }
}
$this->displayfriends($major); 
```

}

这是我得到的输出：警告：缺少 social::displayfriends() 的参数 2，在第 234 行的 /home/content/07/8316707/html/class.Social.php 中调用并在 /home/content/ 中定义07/8316707/html/class.Social.php 第 183 行

请记住，当我执行 $this->displayfriends($major, $friends) 时，它只返回了一个结果，而它本应返回 15。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:32:03.480

我想我明白你在找什么。您基本上只需要了解 php 数组，以及如何将参数与函数一起使用。print_r 是一个调试工具，可以生成您看到的输出。为了使用您的数组数据，您应该直接处理它。最简单的方法是通过它进行遍历。我为显示器制作了一个单独的功能，只是为了强化这两个概念。

```
function getFriendsWithMajor($major) {
     $config = array(
     'appId' => 'XXXXXXX',
     'secret' => 'XXXXXXXXXX',
     );
     $facebook = new Facebook($config);
     $user_id = $facebook->getUser();
     try {
     $fql    =   "select uid,name,education from user WHERE uid IN (select uid2 from friend where uid1=($user_id))";
     $param  =   array(
     'method'    => 'fql.query',
     'query'     => $fql,
     'callback'  => ''
     );
     $fqlResult   =   $facebook->api($param);
     } catch(Exception $o) {
        d($o);
     }

     $friends = $fqlResult;
     $friends_BA = array();

     foreach ($friends as $friend) {
         if (is_array($friend['education'])) {
             foreach ($friend['education'] as $school) {
                 if (isset($school['concentration'])) {
                    foreach ($school['concentration'] as $concentration) {
                        if (strpos(strtolower($concentration['name']), $major) !== false) {
                            $friends_BA[] = $friend['name'];
                            continue 3; // skip to the next friend
                        }
                    }
                 }
            }
        }
    }
    displayfriends($major, $friends_BA);
} 
```

显示功能

```
function displayfriends($major, $friends) {
        // Whatever markup you want here
        // For example -- unordered list
  if (count($friends) > 0) {
    echo "<h2>Friends with $major major</h2>";
    echo '<ul>';
    foreach ($friends as $friend) {
        echo "<li>$friend</li>";
    }
    echo '</ul>';
  }
} 
```

调用函数：

```
getFriendsWithMajor('**business**);
getFriendsWithMajor('**marketing**); 
```

# actionscript-3 - 位置参数传递

> ID：10526565
> 
> 赞同：0
> 
> 时间：2012-05-10T01:58:17.427
> 
> 标签：actionscript-3, apache-flex, actionscript

我有一个方法

```
public function show (text:Object="", title:String="", body=String=""){
    //blah
} 
```

我希望文本获取默认值，并传入其他两个参数的值。我想知道是否有某种方法可以这样称呼它

```
show(title="sample", body="xyz"); 
```

对不起，如果这个问题真的很基础，我刚开始学习 Actionscript，我有限的谷歌搜索技能并没有返回任何富有成果的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:14:33.087

没有办法做到这一点。除了手动发送默认值：

```
show ("", "sample", "xyz"); 
```

这首先违背了违约的目的。通常，我会尝试通过将所需项目放在首位来组织我的方法签名；具有接下来可能会更改的默认值的项目；最后是具有不太可能更改的默认值的项目。

这并不总是一个微不足道的决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T02:54:18.230

与其他答案相比，您可以这样做：

```
public function show(params:Object):void
{
    var text:String = params.text || "";
    var title:String = params.title || "";
    var body:String = params.body || "";

   // blah
} 
```

进而：

```
show({ title: "sample", body: "xyz" }); 
```

出于与代码可读性和可维护性相关的原因，我当然建议不要这样做，但它仍然是有用的信息。

如果您决定使用这种方法，请务必*清楚*地记录您的方法，例如

```
// Relevant keys for params:
// text:String, title:String, body:String
// ...describe each here
public function show(params:Object):void 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T02:18:24.810

您不能在动作脚本中执行此操作

```
show(title="sample", body="xyz"); 
```

如果我们在 C++ 领域，您可能会重载 show 并拥有 2 个具有不同签名的方法，但您也不能这样做。我通常做的是使用不同的参数制作 2 个方法并调用基本函数：

```
public function showTextTitleBody(text:Object="",title:String="",body:String="")
{
   //do your thing with the 3 params
}

public function showTitleBody(title:String="",body:String="")
{
   showTextTitleBody("",title,body);
} 
```

# visual-studio-2010 - DirectX Release 版本通过 VS2010 工作，但不是 exe

> ID：10526566
> 
> 赞同：2
> 
> 时间：2012-05-10T01:58:18.423
> 
> 标签：visual-studio-2010, 3d, directx, release, exe

几年来，我一直通过 Google 访问 Stack Overflow，但到目前为止还没有询问/回答任何问题，所以就这样吧。

基本上我有一个在 DirectX 11 中设置绘图模型和地形的 3D 渲染框架。一切正常，通过 Visual Studio 2010 运行调试或发布版本时没有问题。

但是，当我导航到我的文件夹并独立运行可执行文件时，只有 Debug 构建工作。发布版本显示我设置的任何清晰颜色，但没有几何图形，尽管帧速率看起来好像正在运行，并且我的鼠标被锁定在窗口的中心（可以用鼠标中键切换），好像程序运行良好.

我的第一个想法是我的内容无法加载，因为这在旧项目中会产生这种影响，但如果发生这种情况，该项目会崩溃，并且通过 PIX 运行 exe 已确认所有资产都已正确加载。

事实证明这个问题很难用谷歌搜索，所以如果有人知道是什么原因造成的，我们将不胜感激。如果有帮助，我会发布一些代码，但我看不出有什么相关的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:41:22.910

截止日期迫在眉睫，更重要的事情平息了，所以我对构建配置做了一些摆弄。

事实证明，在默认调试配置中，C/C++、代码生成、运行时库设置为“多线程调试 DLL (/MDd)”。在发行版中，它设置为“多线程 DLL (/MD)”。切换此设置以匹配发布配置会导致构建通过 Visual Studio 运行，但在其外部显示黑屏。

我仍然不知道造成这种情况的原因，因此将不胜感激任何其他答案。

# image - 无法在 WordPress 的图库中重新裁剪图像的缩略图

> ID：10526567
> 
> 赞同：1
> 
> 时间：2012-05-10T01:58:27.457
> 
> 标签：image, wordpress, thumbnails

我已上传要包含在 WordPress 博客帖子中的图库中的图片。我正在使用模板“我的基础 0.5”

基本上，我上传图片时自动生成的缩略图是从图片的死点（正方形）绘制的。有些照片是人的，所以头被砍掉了。如果单击图片的缩略图，则完整的图片将显示在其自己的页面中。

然后我进入媒体库并单击显示的缩略图下的“编辑图像”以尝试更改缩略图。我重新选择了图片的不同区域，我单击了标题“将尺寸应用于：”下的“缩略图”，但它不允许我单击“保存”按钮。该按钮基本上不会作为单击选项突出显示。

这是个常见的问题吗？我搜索了一下，但似乎没有找到任何特定于我遇到的问题的东西。任何帮助都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:03:02.443

在这里，我将解释更新缩略图的步骤：

1.  转到媒体库并单击`Edit Image`按钮。
2.  在缩略图设置下单击`Thumbnail`。
3.  确保选择“1:1”纵横比。
4.  按住 shift 键并进行选择。因为您将纵横比设置为 1:1，所以选择将是一个正方形。
5.  您现在必须单击“裁剪”工具按钮。这将最终确定作物。![裁剪工具](../Images/8248b96e72abba6c4102b453f7430dfc.png)
6.  您现在可以点击“保存”。
7.  点击“更新媒体”。您的缩略图视图现在应该更新了！

干杯！！！

# .net - 如何在 WPF 中实现图形逻辑流

> ID：10526570
> 
> 赞同：0
> 
> 时间：2012-05-10T01:58:36.447
> 
> 标签：.net, wpf

我想创建一个 WPF 应用程序，允许用户创建类似于 Visio 的图形逻辑流。最终目标是使用它作为用户编写简单脚本而无需编写任何脚本代码的一种方式。我需要能够表示两个基本元素：布尔决策（if then else）和一个动作块。您需要能够以某种方式（如箭头）连接以指定流程流向。

我意识到可能没有与此完全一样的解决方案，但是是否有任何示例至少可以用于简单的图形流程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T12:39:10.060

CodeProject 上有一系列四篇文章，这可能是您正在寻找的内容：

[WPF 图表设计器（包括源代码）](http://www.codeproject.com/Articles/24681/WPF-Diagram-Designer-Part-4)

以上是本系列的最后一部分，文章链接到前面的三个部分。文章使用的是 .NET 3.5，但我相信 WPF 中 .NET 3.5 和 .NET 4.0 之间的变化很小（假设您将使用 .NET 4.0 进行开发）。

# java - 如何从循环中返回一个值？

> ID：10526576
> 
> 赞同：1
> 
> 时间：2012-05-10T01:58:54.787
> 
> 标签：java, for-loop

嗨，我正在使用一种必须从循环中返回后续值的方法。但是 return 语句仅在循环之外起作用。如何在循环中返回值？

这是代码：

```
for (int i = 0; i < list.size (); i++)
{
    Iterator <String> it1 = //getting some list values
    double min = Double.parseDouble (it1.next ());
    double temp1 = 0;
    while (it1.hasNext ()) {
        if (it != null)
        {
            temp1 = Double.parseDouble (it1.next ()); 
        }                                   
        if (temp1 < min)
            min = temp1;
    } 
}
return min; 
```

我想在循环中返回最小值。这怎么可能？请帮助我..提前谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T02:05:04.280

它的完成方式与在循环外返回相同，只是您需要确保您的方法在所有情况下都会返回一个值（不包括未捕获的异常等）。以下是您在 for 循环中返回的代码。

```
for(int i=0;i<list.size();i++)
{
    Iterator<String> it1 = //getting some list values
    double min = Double.parseDouble(it1.next());
    double temp1=0;
    while(it1.hasNext()){
        if(it!=null)
        {
            temp1 = Double.parseDouble(it1.next()); 
        }                                   
        if(temp1 < min)
             min = temp1;
    }
    return min; 
}
return 0; 
```

尽管这很可能无法正确实现您的功能，但它表明在循环内返回是可能的。它还完全消除了对 for 循环的需要，但正如我之前所说，该代码只是一个示例，表明可以在循环内返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:03:08.380

A）你*可以* `return`从一个循环。

B）更“结构化”的方法是在循环之前将变量设置为某个虚假/默认值，然后在执行之前将其设置为循环内的有效值 a `break`. 返回退出循环的值。

# python - 使用 scikit-learn 分类到多个类别

> ID：10526579
> 
> 赞同：82
> 
> 时间：2012-05-10T01:59:31.363
> 
> 标签：python, classification, scikit-learn

我正在尝试使用 scikit-learn 的一种监督学习方法将文本片段分类为一个或多个类别。我尝试过的所有算法的预测函数只返回一个匹配项。

例如我有一段文字：

```
"Theaters in New York compared to those in London" 
```

我已经训练算法为我输入的每个文本片段选择一个位置。

在上面的示例中，我希望它返回`New York`and `London`，但它只返回`New York`。

是否可以使用 scikit-learn 返回多个结果？或者甚至返回具有下一个最高概率的标签？

谢谢你的帮助。

- -更新

我尝试使用`OneVsRestClassifier`，但每条文本仍然只有一个选项。下面是我正在使用的示例代码

```
y_train = ('New York','London')

train_set = ("new york nyc big apple", "london uk great britain")
vocab = {'new york' :0,'nyc':1,'big apple':2,'london' : 3, 'uk': 4, 'great britain' : 5}
count = CountVectorizer(analyzer=WordNGramAnalyzer(min_n=1, max_n=2),vocabulary=vocab)
test_set = ('nice day in nyc','london town','hello welcome to the big apple. enjoy it here and london too')

X_vectorized = count.transform(train_set).todense()
smatrix2  = count.transform(test_set).todense()

base_clf = MultinomialNB(alpha=1)

clf = OneVsRestClassifier(base_clf).fit(X_vectorized, y_train)
Y_pred = clf.predict(smatrix2)
print Y_pred 
```

结果：['纽约''伦敦''伦敦']

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-05-10T05:23:46.180

您想要的称为多标签分类。Scikits-learn 可以做到这一点。见这里：[http](http://scikit-learn.org/dev/modules/multiclass.html) ://scikit-learn.org/dev/modules/multiclass.html 。

我不确定您的示例中出了什么问题，我的 sklearn 版本显然没有 WordNgramAnalyzer。也许这是使用更多训练示例或尝试不同分类器的问题？尽管请注意，多标签分类器期望目标是元组列表/标签列表。

以下对我有用：

```
import numpy as np
from sklearn.pipeline import Pipeline
from sklearn.feature_extraction.text import CountVectorizer
from sklearn.svm import LinearSVC
from sklearn.feature_extraction.text import TfidfTransformer
from sklearn.multiclass import OneVsRestClassifier

X_train = np.array(["new york is a hell of a town",
                    "new york was originally dutch",
                    "the big apple is great",
                    "new york is also called the big apple",
                    "nyc is nice",
                    "people abbreviate new york city as nyc",
                    "the capital of great britain is london",
                    "london is in the uk",
                    "london is in england",
                    "london is in great britain",
                    "it rains a lot in london",
                    "london hosts the british museum",
                    "new york is great and so is london",
                    "i like london better than new york"])
y_train = [[0],[0],[0],[0],[0],[0],[1],[1],[1],[1],[1],[1],[0,1],[0,1]]
X_test = np.array(['nice day in nyc',
                   'welcome to london',
                   'hello welcome to new york. enjoy it here and london too'])   
target_names = ['New York', 'London']

classifier = Pipeline([
    ('vectorizer', CountVectorizer(min_n=1,max_n=2)),
    ('tfidf', TfidfTransformer()),
    ('clf', OneVsRestClassifier(LinearSVC()))])
classifier.fit(X_train, y_train)
predicted = classifier.predict(X_test)
for item, labels in zip(X_test, predicted):
    print '%s => %s' % (item, ', '.join(target_names[x] for x in labels)) 
```

对我来说，这会产生输出：

```
nice day in nyc => New York
welcome to london => London
hello welcome to new york. enjoy it here and london too => New York, London 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-10-04T02:10:58.320

编辑：按照建议使用 MultiLabelBinarizer 为 Python 3、scikit-learn 0.18.1 更新。

我也一直在努力解决这个问题，并对 mwv 的优秀答案做了一些改进，这可能有用。它将文本标签而不是二进制标签作为输入，并使用 MultiLabelBinarizer 对其进行编码。

```
import numpy as np
from sklearn.pipeline import Pipeline
from sklearn.feature_extraction.text import CountVectorizer
from sklearn.svm import LinearSVC
from sklearn.feature_extraction.text import TfidfTransformer
from sklearn.multiclass import OneVsRestClassifier
from sklearn.preprocessing import MultiLabelBinarizer

X_train = np.array(["new york is a hell of a town",
                    "new york was originally dutch",
                    "the big apple is great",
                    "new york is also called the big apple",
                    "nyc is nice",
                    "people abbreviate new york city as nyc",
                    "the capital of great britain is london",
                    "london is in the uk",
                    "london is in england",
                    "london is in great britain",
                    "it rains a lot in london",
                    "london hosts the british museum",
                    "new york is great and so is london",
                    "i like london better than new york"])
y_train_text = [["new york"],["new york"],["new york"],["new york"],["new york"],
                ["new york"],["london"],["london"],["london"],["london"],
                ["london"],["london"],["new york","london"],["new york","london"]]

X_test = np.array(['nice day in nyc',
                   'welcome to london',
                   'london is rainy',
                   'it is raining in britian',
                   'it is raining in britian and the big apple',
                   'it is raining in britian and nyc',
                   'hello welcome to new york. enjoy it here and london too'])
target_names = ['New York', 'London']

mlb = MultiLabelBinarizer()
Y = mlb.fit_transform(y_train_text)

classifier = Pipeline([
    ('vectorizer', CountVectorizer()),
    ('tfidf', TfidfTransformer()),
    ('clf', OneVsRestClassifier(LinearSVC()))])

classifier.fit(X_train, Y)
predicted = classifier.predict(X_test)
all_labels = mlb.inverse_transform(predicted)

for item, labels in zip(X_test, all_labels):
    print('{0} => {1}'.format(item, ', '.join(labels))) 
```

这给了我以下输出：

```
nice day in nyc => new york
welcome to london => london
london is rainy => london
it is raining in britian => london
it is raining in britian and the big apple => new york
it is raining in britian and nyc => london, new york
hello welcome to new york. enjoy it here and london too => london, new york 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-27T15:49:51.977

我也遇到了这个问题，对我来说问题是我的 y_Train 是一个字符串序列，而不是一个字符串序列序列。显然，OneVsRestClassifier 会根据输入的标签格式来决定是使用多类还是多标签。所以改变：

```
y_train = ('New York','London') 
```

到

```
y_train = (['New York'],['London']) 
```

显然这将在未来消失，因为所有标签的中断都是相同的：[https ://github.com/scikit-learn/scikit-learn/pull/1987](https://github.com/scikit-learn/scikit-learn/pull/1987)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-11-06T22:03:15.380

更改此行以使其在新版本的 python 中工作

```
# lb = preprocessing.LabelBinarizer()
lb = preprocessing.MultiLabelBinarizer() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-12T11:40:56.927

几个多分类示例如下：-

示例 1：-

```
import numpy as np
from sklearn.preprocessing import LabelBinarizer
encoder = LabelBinarizer()

arr2d = np.array([1, 2, 3,4,5,6,7,8,9,10,11,12,13,14,1])
transfomed_label = encoder.fit_transform(arr2d)
print(transfomed_label) 
```

输出是

```
[[1 0 0 0 0 0 0 0 0 0 0 0 0 0]
 [0 1 0 0 0 0 0 0 0 0 0 0 0 0]
 [0 0 1 0 0 0 0 0 0 0 0 0 0 0]
 [0 0 0 1 0 0 0 0 0 0 0 0 0 0]
 [0 0 0 0 1 0 0 0 0 0 0 0 0 0]
 [0 0 0 0 0 1 0 0 0 0 0 0 0 0]
 [0 0 0 0 0 0 1 0 0 0 0 0 0 0]
 [0 0 0 0 0 0 0 1 0 0 0 0 0 0]
 [0 0 0 0 0 0 0 0 1 0 0 0 0 0]
 [0 0 0 0 0 0 0 0 0 1 0 0 0 0]
 [0 0 0 0 0 0 0 0 0 0 1 0 0 0]
 [0 0 0 0 0 0 0 0 0 0 0 1 0 0]
 [0 0 0 0 0 0 0 0 0 0 0 0 1 0]
 [0 0 0 0 0 0 0 0 0 0 0 0 0 1]
 [1 0 0 0 0 0 0 0 0 0 0 0 0 0]] 
```

示例 2：-

```
import numpy as np
from sklearn.preprocessing import LabelBinarizer
encoder = LabelBinarizer()

arr2d = np.array(['Leopard','Lion','Tiger', 'Lion'])
transfomed_label = encoder.fit_transform(arr2d)
print(transfomed_label) 
```

输出是

```
[[1 0 0]
 [0 1 0]
 [0 0 1]
 [0 1 0]] 
```

# ftp - WSO2 如何设置定时任务？

> ID：10526580
> 
> 赞同：1
> 
> 时间：2012-05-10T01:59:33.067
> 
> 标签：ftp, wso2, vfs

现在我有一个 FTP 服务。像这样的配置：[http](http://wso2.org/project/esb/java/3.0.1/docs/samples/transport_samples.html#Sample254) ://wso2.org/project/esb/java/3.0.1/docs/samples/transport_samples.html#Sample254 。它每隔一段时间工作一次，默认为 5 秒。如何将 VFS 设置为计划任务或如何将 VFS 公开给 Web 服务？你可以帮帮我吗？此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T02:23:12.570

请参阅计划任务用户指南[[1]](http://docs.wso2.org/display/ESB403/Adding+and+Scheduling+Tasks)。选择 Trigger Type as`Cron`并将其定义为`Cron`样式条目。编写任务示例[[2]](http://docs.wso2.org/display/ESB403/Writing+Tasks+Sample)。

谢谢

# javascript - 未捕获的 ReferenceError：Coldfusion 中的赋值（匿名函数）左侧无效

> ID：10526582
> 
> 赞同：0
> 
> 时间：2012-05-10T01:59:52.330
> 
> 标签：javascript, coldfusion

我得到未捕获的参考错误：在谷歌浏览器开发者工具中赋值（匿名函数）中的左侧无效。这是代码

```
<!--
_CF_checkreset-password-form = function(_CF_this)
{
    //reset on submit
    _CF_error_exists = false;
    _CF_error_messages = new Array();
    _CF_error_fields = new Object();
    _CF_FirstErrorField = null;

    //display error messages and return success
    if( _CF_error_exists )
    {
        if( _CF_error_messages.length > 0 )
        {
            // show alert() message
            _CF_onErrorAlert(_CF_error_messages);
            // set focus to first form error, if the field supports js focus().
            if( _CF_this[_CF_FirstErrorField].type == "text" )
            { _CF_this[_CF_FirstErrorField].focus(); }

        }
        return false;
    }else {
        return true;
    }
}
//--> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T02:01:44.203

我猜错误在第一行：`_CF_checkreset-password-form = function(_CF_this)`. 您不能使用`+`or`-`或任何其他运算符之类的字符创建 var。尝试这个：`_CF_checkreset_password_form = function(_CF_this)`

# asp.net - MVC3：从 AJAX 按钮单击调用控制器

> ID：10526585
> 
> 赞同：1
> 
> 时间：2012-05-10T02:00:26.263
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

在 ASP .Net MVC3 中，如何获取用户输入的输入值并处理单击按钮以调用控制器，返回一个新的模型实体，该实体使用其属性值更新其他表单输入值，**而无需**重新加载整个页面？

脚步：

*   输入实体 ID。
*   点击“搜索”
*   输入的值被提交给控制器，控制器查询实体框架以返回一个实体 - 具有提供的 Id。
*   找到的实体返回到调用页面。
*   其他表单输入使用匹配的属性值更新其值。

我会在几秒钟内在 Web 窗体中完成这项工作，但对 MVC3 来说是新手......嗯......很有趣 :) 我认为这可能与 Ajax.ActionLink 有关？我看到的示例处理提交和保存数据。

理查德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T04:18:06.460

这就是使用 MVC3 进行 Ajax 发布的方法。`OnSuccess`在您的情况下，您根据来自服务器的响应更新回调函数上的表单字段。

**步骤1**

确保您已经引用了 jQuery Ajax 库

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

**第2步**

在视图中使用 Ajax.BeginForm 辅助方法来生成 Ajax 感知表单。还提供了一个`OnSuccess`javascript回调函数

```
@using(Ajax.BeginForm("Search",new AjaxOptions
{
  HttpMethod = "Post",    
  OnSuccess = "Loaded"    
}))
{
   <input type="text" name="q" />
   <button type="submit" value="Search">Search</button>
}

<script type="text/javascript">
   function Loaded(result) {
      alert('result ' + result.Name);
   }
</script> 
```

**第 3 步**

在 action 方法中，进行业务处理并返回 JSON 结果。在此示例中，我只是返回了一个将查询附加到名称的模型。

```
[HttpPost]
public ActionResult Search(string q)
{
    return Json(new SampleViewModel { Age = 10 , Name = "John " + q });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T01:46:26.567

您可以简单地使用 jquery ajax 方法来调用该操作，并让该操作返回您需要的任何值。然后，您可以使用返回的值通过 javascript 更新其他字段。

```
 $('#button').click(function(){
    $.ajax({
        url: 'controller/action.aspx',
        success: function(data) {
           $('.result').html(data);
        }
     });
 }); 
```

这是非常通用的解决方案，因为您没有提供任何代码，因此很难具体说明。您可能想要设置数据类型，具体取决于您发回的内容。一个流行的选择是 json。

见这里：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T09:05:44.333

如果您想要一个实际的 Ajax`button`元素，而不是样式 hack 或 JQuery，它也是可能的，但有点复杂。遗憾的是，MS 尚未选择将 ActionButton 添加到 Html 和 Ajax 帮助程序，因为当您删除私有支持方法的重复时，差异实际上非常小（您只需要下面显示的`ActionButton`和方法）。`GenerateButton`

最终结果是您可以拥有像 ajax 动作链接一样触发的真实按钮：

## 例如

```
@Ajax.ActionButton("Delete", "Delete", "document", 
     new { id = ViewBag.Id }, 
     new AjaxOptions() 
     { 
         Confirm="Do you really want to delete this file?", 
         HttpMethod = "Get", 
         UpdateTargetId = "documentlist" }, 
         new { id = "RefreshDocuments" 
     }) 
```

## 1.创建一个AjaxHelper扩展

下面的代码基于 AjaxExtensions 类的反编译，因为许多必需的帮助方法未在 HtmlHelper 上公开。

```
public static partial class AjaxExtensions
{
    public static MvcHtmlString ActionButton(this AjaxHelper ajaxHelper, string buttonText, string actionName, string controllerName, object routeValuesBlah, AjaxOptions ajaxOptions, object htmlAttributesBlah)
    {
        // Convert generic objects to specific collections
        RouteValueDictionary routeValues = new RouteValueDictionary(routeValuesBlah);
        RouteValueDictionary htmlAttributes = HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributesBlah);

        if (string.IsNullOrEmpty(buttonText))
            throw new ArgumentException("Button text must be provided");
        string targetUrl = UrlHelper.GenerateUrl((string)null, actionName, controllerName, routeValues, ajaxHelper.RouteCollection, ajaxHelper.ViewContext.RequestContext, true);
        return MvcHtmlString.Create(GenerateButton(ajaxHelper, buttonText, targetUrl, AjaxExtensions.GetAjaxOptions(ajaxOptions), htmlAttributes));
    }

    public static string GenerateButton(AjaxHelper ajaxHelper, string linkText, string targetUrl, AjaxOptions ajaxOptions, IDictionary<string, object> htmlAttributes)
    {
        TagBuilder tagBuilder = new TagBuilder("input");
        tagBuilder.MergeAttribute("value", linkText);
        tagBuilder.MergeAttributes<string, object>(htmlAttributes);
        tagBuilder.MergeAttribute("href", targetUrl);
        tagBuilder.MergeAttribute("type", "button");
        if (ajaxHelper.ViewContext.UnobtrusiveJavaScriptEnabled)
            tagBuilder.MergeAttributes<string, object>(ajaxOptions.ToUnobtrusiveHtmlAttributes());
        else
            tagBuilder.MergeAttribute("onclick", AjaxExtensions.GenerateAjaxScript(ajaxOptions, "Sys.Mvc.AsyncHyperlink.handleClick(this, new Sys.UI.DomEvent(event), {0});"));
        return tagBuilder.ToString(TagRenderMode.Normal);
    }

    private static string GenerateAjaxScript(AjaxOptions ajaxOptions, string scriptFormat)
    {
        string str = ajaxOptions.ToJavascriptString();
        return string.Format((IFormatProvider)CultureInfo.InvariantCulture, scriptFormat, new object[1] { str });
    }

    private static AjaxOptions GetAjaxOptions(AjaxOptions ajaxOptions)
    {
        if (ajaxOptions == null)
            return new AjaxOptions();
        else
            return ajaxOptions;
    }

    public static string ToJavascriptString(this AjaxOptions ajaxOptions)
    {
        StringBuilder stringBuilder = new StringBuilder("{");
        stringBuilder.Append(string.Format((IFormatProvider)CultureInfo.InvariantCulture, " insertionMode: {0},", new object[1]
        {
             ajaxOptions.InsertionModeString()
        }));
        stringBuilder.Append(ajaxOptions.PropertyStringIfSpecified("confirm", ajaxOptions.Confirm));
        stringBuilder.Append(ajaxOptions.PropertyStringIfSpecified("httpMethod", ajaxOptions.HttpMethod));
        stringBuilder.Append(ajaxOptions.PropertyStringIfSpecified("loadingElementId", ajaxOptions.LoadingElementId));
        stringBuilder.Append(ajaxOptions.PropertyStringIfSpecified("updateTargetId", ajaxOptions.UpdateTargetId));
        stringBuilder.Append(ajaxOptions.PropertyStringIfSpecified("url", ajaxOptions.Url));
        stringBuilder.Append(ajaxOptions.EventStringIfSpecified("onBegin", ajaxOptions.OnBegin));
        stringBuilder.Append(ajaxOptions.EventStringIfSpecified("onComplete", ajaxOptions.OnComplete));
        stringBuilder.Append(ajaxOptions.EventStringIfSpecified("onFailure", ajaxOptions.OnFailure));
        stringBuilder.Append(ajaxOptions.EventStringIfSpecified("onSuccess", ajaxOptions.OnSuccess));
        --stringBuilder.Length;
        stringBuilder.Append(" }");
        return ((object)stringBuilder).ToString();
    }

    public static string InsertionModeString(this AjaxOptions ajaxOptions)
    {
        switch (ajaxOptions.InsertionMode)
        {
            case InsertionMode.Replace:
                return "Sys.Mvc.InsertionMode.replace";
            case InsertionMode.InsertBefore:
                return "Sys.Mvc.InsertionMode.insertBefore";
            case InsertionMode.InsertAfter:
                return "Sys.Mvc.InsertionMode.insertAfter";
            default:
                return ((int)ajaxOptions.InsertionMode).ToString((IFormatProvider)CultureInfo.InvariantCulture);
        }
    }

    public static string EventStringIfSpecified(this AjaxOptions ajaxOptions, string propertyName, string handler)
    {
        if (string.IsNullOrEmpty(handler))
            return string.Empty;
        return string.Format((IFormatProvider)CultureInfo.InvariantCulture, " {0}: Function.createDelegate(this, {1}),",
            new object[2]
              {
                propertyName,
                handler
              });
    }

    public static string PropertyStringIfSpecified(this AjaxOptions ajaxOptions, string propertyName, string propertyValue)
    {
        if (string.IsNullOrEmpty(propertyValue))
            return string.Empty;
        string str = propertyValue.Replace("'", "\\'");
        return string.Format((IFormatProvider)CultureInfo.InvariantCulture, " {0}: '{1}',",
            new object[2]
              {
                propertyName,
                str
              });
    }
} 
```

## 2.修改jquery.unobtrusive-ajax.js

只需要对 jquery.unobtrusive-ajax.js 的 JQuery 进行小的更改即可接受新的按钮对象，因为它非常接近开始。首先，选择器需要接受 ajax 按钮和链接，然后 href 需要来自一个属性，以便非链接可以提供它（不严格兼容浏览器，但目前可以使用）。

```
$(document).on("click", "input[data-ajax=true],a[data-ajax=true]", function (evt) {
        evt.preventDefault();
        asyncRequest(this, {
            url: $(this).attr("href"),
            type: "GET",
            data: []
        });
    }); 
```

*注意：这是使用截至回答日期的所有内容的最新版本（MVC 5）

# objective-c - 我的协议方法的选择器没有已知的实例方法

> ID：10526586
> 
> 赞同：1
> 
> 时间：2012-05-10T02:00:29.640
> 
> 标签：objective-c, ios, cocoa-touch, protocols

这是我的协议。

```
@protocol UCMapviewDelegate <NSObject>
@required
- (void)slideMapviewIn:(id)sender;
- (void)slideMapviewOut:(id)sender;

@end 
```

这是应该调用的方法（在 UCMapViewController.m 中）。从按钮调用 showMenu

```
- (void)showMenu
{
    // TODO: 
    if (self.isMapViewPushedAside) {
        [self.delegate slideMapviewOut:self];
    } [self.delegate slideMapviewIn:self];

} 
```

这是委托被初始化的。UCMapViewController 对象的初始化程序。

```
- (id)initWithDelegate:(UCRootViewController *)controller
{
    self = [super init];
    if (self) {
        // Custom initialization
        self.delegate = controller;
    }
    return self;
} 
```

但是当我想使用委托来调用它时，我得到了错误：`No known instance method for selector 'slideMapviewIn:'`. 我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T02:45:20.310

您的问题是您没有将委托声明为实现该协议。如果你不这样做，它怎么知道它实现了那个协议？这个错误很自然。

您必须将其声明为`id<UCMapviewDelegate>`并且为此您必须导入包含该协议的标头。

# python - 尝试切换到 Python，遇到问题

> ID：10526589
> 
> 赞同：2
> 
> 时间：2012-05-10T02:00:51.393
> 
> 标签：python, cgi

我是一名 PHP 程序员，但我想学习 Python。我对如何实际执行脚本有点困惑。我在我的网络服务器根目录中创建了 test.py，在我编写的文件中：

```
#!/usr/bin/python
import jon.cgi as cgi
import jon.fcgi as fcgi

print "Content-type: text/html"
print "hello world" 
```

我的服务器正在运行 Litespeed，遵循以下教程：[http](http://www.litespeedtech.com/support/wiki/doku.php?id=litespeed_wiki:python_fcgi) ://www.litespeedtech.com/support/wiki/doku.php?id=litespeed_wiki:python_fcgi我已经安装了 Jon 的 CGI。

但是当我在浏览器中导航到脚本时，它只会打印完整的代码，就好像它没有解析它一样。非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T02:15:55.650

我认为在 Apache 下使用[mod_wsgi](http://code.google.com/p/modwsgi/)从 WSGI 开始可能是最简单的。

一个简单的 WSGI 应用程序如下所示：

```
def application(environ, start_response):
    status = '200 OK'
    output = 'Hello World!'

    response_headers = [('Content-type', 'text/plain'),
                        ('Content-Length', str(len(output)))]
    start_response(status, response_headers)

    return [output] 
```

其他 Python 框架构建在 WSGI 之上。快速入门[安装](http://code.google.com/p/modwsgi/wiki/QuickInstallationGuide)和[配置](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide)指南值得一读。软件包可用于常见的 Linux 发行版。

如果您对替代方案感兴趣，您可能想查看[Tornado](http://www.tornadoweb.org/)，它是一种基于事件的服务器，具有不同的设计。

正如@cacahootie 下面提到的，您还应该研究 Python 的 Web 应用程序框架。这些使编写使用 WSGI 的应用程序变得更加容易。[Django](https://www.djangoproject.com/)可能是最流行的，但 Python 还有许多[其他选项](http://wiki.python.org/moin/WebFrameworks)。我个人偏爱非常轻量级的框架是[Flask](http://flask.pocoo.org/)，但它不如 Django 全面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:47:57.397

我有点不同意布赖恩。对于在 Web 应用程序环境中学习 Python，CherryPy 是最简单的入门方法之一。它是一个 WSGI 框架，但是让事情变得如此简单我不知道你为什么要尝试直接实现一个 WSGI 应用程序。我知道 CGI 可能是一个更舒适的起点，但坦率地说 CherryPy（或其他一些更复杂的框架）让事情变得如此简单，而 WSGI 是部署这些应用程序的最佳方式。WSGI 可与 CGI 相媲美——它是许多框架可能实现的接口。

[CherryPy 项目网站](http://www.cherrypy.org/ "CherryPy 项目网站")

Hello World（来自他们的主页）：

```
import cherrypy
class HelloWorld(object):
    def index(self):
        return "Hello World!"
    index.exposed = True

cherrypy.quickstart(HelloWorld()) 
```

# javascript - JQuery在表格行中为tds添加编号

> ID：10526592
> 
> 赞同：4
> 
> 时间：2012-05-10T02:01:10.560
> 
> 标签：javascript, jquery, function

我想出了这个函数来为我的表中的表行中的元素添加编号的类：

```
$('tr td:contains(".")').each(function(i){
     $(this).addClass("reportcellno-" + i);
}); 
```

基本上在这里，我正在搜索任何带有小数点的表格单元格，我想在每一行中对它们进行交互并添加类`reportcellno-1`，`reportcellno-2`

这很好用，我整天都在玩它。唯一的问题是编号不断地进行，而不是逐行限制。

我上面的输出 HTML 代码是：

```
<tr>
<td class="reportcellno-1">10.1</td>
<td class="reportcellno-2">5.7</td>
</tr>

<tr>
<td class="reportcellno-3">10.6</td>
<td class="reportcellno-4">10.9</td>
</tr> 
```

而我实际上是想得到这个：

```
<tr>
<td class="reportcellno-1">10.1</td>
<td class="reportcellno-2">5.7</td>
</tr>

<tr>
<td class="reportcellno-1">10.6</td>
<td class="reportcellno-2">10.9</td>
</tr> 
```

所以基本上对于每个表格行，我想重新开始编号。我什至不确定这是否可能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T02:03:32.610

改为`tr`：

```
$('tr').each(function() {
   $(this).children('td:contains(".")').each(function(i) {
      $(this).addClass("reportcellno-" + i);
   });
}); 
```

编辑：少循环方式，但可能不太可读：

```
$('tr td:contains(".")').each(function(){
   $(this).addClass("reportcellno-" + (+$(this).index() + 1));
});​ 
```

`td`在这里，我们使用 a是 a 的子元素这一事实`tr`，并`index()`返回元素相对于其兄弟元素的位置。

从[文档](http://api.jquery.com/index/)：

> 如果没有参数传递给 .index() 方法，则返回值是一个整数，指示 jQuery 对象中的第一个元素相对于其兄弟元素的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:48:00.230

一个简单的 js 解决方案，按行编号：

```
var rows = document.getElementsByTagName('tr');

for (var j=0, jLen=rows.length; j<jLen; j++) {
  var cell, cells = rows[j].getElementsByTagName('td');

  for (var i=0, iLen=cells.length, c=0, txt; i<iLen; i++) {
    cell = cells[i];
    txt = cell.innerText || cell.textContent;

    if ( txt.indexOf('.') > -1) {
      cell.className = cell.className + ' reportcellno-' + c++;
    }
  } 
} 
```

通过表格连续编号：

```
var cell, cells = document.getElementsByTagName('td');

for (var i=0, iLen=cells.length, c=0, txt; i<iLen; i++) {
  cell = cells[i];
  txt = cell.innerText || cell.textContent;

  if (txt.indexOf('.') > -1) {
    cell.className = cell.className + ' reportcellno-' + c++;
  } 
} 
```

# python - neo4jrestclient 索引结果返回 Iterable 而不是 node/url？

> ID：10526593
> 
> 赞同：3
> 
> 时间：2012-05-10T02:01:11.977
> 
> 标签：python, indexing, neo4j, neo4j.py

我正在尝试遵循文档 [http://readthedocs.org/docs/neo4j-rest-client/en/latest/indices.html](http://readthedocs.org/docs/neo4j-rest-client/en/latest/indices.html)

我希望索引查询返回一个节点，但它返回一个“Iterable：Node”：

```
db = GraphDatabase("http://localhost:7474/db/data")
playerIndex = db.nodes.indexes.get("index1")
playerNode = db.nodes.create(player_id = "Homer")
playerIndex.add("player_id", "Homer", playerNode)
print playerIndex["player_id"]["Homer"], "\n", playerNode 
```

印刷：

```
<Neo4j Iterable: Node>
<Neo4j Node: http://localhost:7474/db/data/node/157> 
```

如何获得 neo4jrestclient 索引查询结果以返回像第 2 行一样的节点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:37:52.727

索引查找可以返回多个节点，因此在这种情况下，它返回一个迭代器。要获取迭代器中的下一项，请执行 .next()：

```
print playerIndex["player_id"]["Homer"].next(), "\n", playerNode 
```

见：[https ://github.com/versae/neo4j-rest-client/blob/master/neo4jrestclient/iterable.py](https://github.com/versae/neo4j-rest-client/blob/master/neo4jrestclient/iterable.py)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T16:41:41.043

正如@espeed 所指出的， call`.next()`将为您提供索引中的下一个节点。您还可以迭代迭代器：

```
for node in playerIndex["player_id"]["Homer"]:
    print node, "\n", playerNode 
```

或者只是使用 slice 获取迭代器中的所有结果`[:]`：

```
print playerIndex["player_id"]["Homer"][:], "\n", playerNode 
```

客户端以这种方式运行，因为任何索引查询总是返回一个元素列表，即使只有一个。因此，处理此问题的最佳方法是使用具有延迟加载的迭代器。

# java - 如何确定循环在链表中发生的位置

> ID：10526598
> 
> 赞同：-1
> 
> 时间：2012-05-10T02:02:29.153
> 
> 标签：java, data-structures, linked-list

链表中可能存在循环，如何确定循环在链表中发生的位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T02:07:37.183

如果有一个循环，它就不再是一个链表。这是一个有向图。循环称为循环。

在图中找到循环的一种方法是遍历列表，标记每个项目。如果您找到已标记的项目，则您已找到一个循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T02:12:33.883

您可以通过保存对节点的引用（例如，列表头部的节点）并开始遍历列表来判断链表中是否存在循环。如果在某个时候到达列表的末尾（空值），则没有循环。但是如果你碰巧再次找到之前保存的同一个节点，那么你就知道这个列表是循环的。无论哪种方式，停止迭代。

例如，在 Java 中，此方法将告诉您 s 的链表是否`Node`是循环的：

```
public boolean isCircular(Node list) {
    Node current = list;
    while (current != null) {
        if (current.next == list)
            return true;
        current = current.next;
    }
    return false;
} 
```

**编辑 ：**

有关在链表中查找任意循环的一般解决方案，请阅读[Floyd 的循环查找算法](http://en.wikipedia.org/wiki/Cycle_detection#Tortoise_and_hare)（又名“龟兔赛跑”算法）。[在上一篇文章](https://stackoverflow.com/questions/2663115/interview-question-how-to-detect-a-loop-in-a-linked-list)中有一个很好的 Java 实现。

# automapper - AutoMapper 映射 KeyValuePair 上课？

> ID：10526599
> 
> 赞同：2
> 
> 时间：2012-05-10T02:02:59.000
> 
> 标签：automapper

我想要做的是把`IEnumerable<KeyValuePair<String, String>>`它们映射到一个类。

所以我想把`KeyValuePair<String, String>`它们作为属性名称和值映射到一个类。

这可以做到吗？或者有什么其他建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T16:29:14.803

是的，可以这样做，例如像这样

```
static void Main(string[] args)
    {
        Mapper.CreateMap<KeyValuePair<string, string>, MyClass>()
           .ConstructUsing(x => new MyClass { Name = x.Key, Value = x.Value });

        var kv = new KeyValuePair<string, string>("Key", "Val");
        var mapped = Mapper.Map<KeyValuePair<String, String>, MyClass>(kv);

        Console.WriteLine(mapped.ToString());

        Console.ReadLine();
    }

    public class MyClass
    {
        public string Name { get; set; }
        public string Value { get; set; }

        public override string ToString()
        {
            return String.Format("Name : {0}, Value : {1}", Name, Value);
        }
    } 
```

如果您想处理 IEnumerable，请在创建映射时使用列表

# c - 是否有 gcc 标志来初始化局部变量存储？

> ID：10526602
> 
> 赞同：19
> 
> 时间：2012-05-10T02:03:08.843
> 
> 标签：c, gcc, local

IBM AIX`xlc`编译器提供了一个标志，用于生成初始化局部变量存储的代码：

```
 initauto=<hh>
                  Initialialize automatic storage to <hh>. <hh> is a
                  hexadecimal value.  This generates extra code and
                  should only be used for error determination. 
```

我认为 MSVC 编译器为调试构建做了类似的事情，但我的记忆在这一点上可能很模糊。

GCC有等效的选择吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T03:32:20.447

好的，我能提供的最佳答案。

[http://gcc.gnu.org/onlinedocs/gcc/Option-Summary.html](http://gcc.gnu.org/onlinedocs/gcc/Option-Summary.html)通过遗漏说“不”。没有将堆栈擦除代码注入输出的任何文档。

正如我猜想的那样，唯一可行的方法是将一些`memset`类似的代码（也许像几个`mov`操作一样简单，但尽管如此）注入到每个嵌入的词法框架的开头，其中创建了一个自动变量。据我所知——而且我*远*不是 GCC 内部的专家，但是——似乎没有任何*文件*可以这样做。

在此之后，第 361 页的 GCC Internals ( [http://gcc.gnu.org/onlinedocs/gccint.pdf](http://gcc.gnu.org/onlinedocs/gccint.pdf) ) 的 PDF gccint.pdf 定义了帧指针调整调用步骤的 GCC 名称进入函数是`prologue`。（但是，我真的不知道/理解这是否适用于函数中的其他词法范围。）由于这应该发生在机器定义（md）文件中，因此*似乎*必须为 CPU 架构定义任何此类选项. [我在http://gcc.gnu.org/viewcvs/trunk/gcc/config/i386/](http://gcc.gnu.org/viewcvs/trunk/gcc/config/i386/)上查看了他们的在线 ViewCVS并找到（至少一个）`prologue`i386.md 的第 11,893 行左右的副本，该副本在播放 search-for 之后-the-function-expansion 几跳，似乎没有任何东西可以发出这样的条件代码。

但是这个 GCC 引擎盖下的东西有点整洁......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T03:12:11.960

我找不到任何明确的参考，但似乎 GCC 的某些副本（特别是 GCC Fortran 编译器）可以`-finit-local-zero`选择自动将任何非显式初始化的局部变量或数组设置为零。

就标准 GCC 而言，我能找到的关于这个主题的唯一功能是`-Wuninitialized`对任何未初始化的变量发出警告（尽管我知道这不是你要找的）。

你有多需要这个？`-finit-local-zero`如果您有充分的理由，我想将代码复制到您的 GCC 版本不会那么难...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T02:40:13.037

C99：如果具有自动存储持续时间的对象未显式初始化，则其值不确定。

关于这个问题有一个话题。[C 中声明的、未初始化的变量会发生什么？它有价值吗？](https://stackoverflow.com/questions/1597405/what-happens-to-a-declared-uninitialized-variable-in-c-does-it-have-a-value).

# asp.net - 如何在 aspxgridview.columns 中找到设置 ShowSelectCheckbox=true 的 GridViewCommandColumn？

> ID：10526608
> 
> 赞同：0
> 
> 时间：2012-05-10T02:03:57.927
> 
> 标签：asp.net, custom-controls, devexpress

我需要以编程方式完成，我对此一无所知。所以我需要使用循环来搜索所有列？例如：

```
 GridViewCommandColumn a= new GridViewCommandColumn();
  a.showselectcheckbox=true;
  aspxgridview1.columns.find(a); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:41:48.673

您可以通过**ASPxGridView.Columns**集合以下列方式检索**所需的列：**

 **按字段名称/标题/名称：

```
GridViewCommandColumn commandColumn = (GridViewCommandColumn)ASPxGridViewInstance.Columns["#"]; 
```

通过可见索引：

```
GridViewCommandColumn commandColumn = (GridViewCommandColumn)ASPxGridViewInstance.Columns[0]; 
```**

# iphone - 从非视图类显示 UIAlertView

> ID：10526610
> 
> 赞同：0
> 
> 时间：2012-05-10T02:04:30.333
> 
> 标签：iphone, model-view-controller

我正在查看朋友的代码，但不确定它是如何工作的。有一个单例与 Web 服务对话以下载数据。WebServiceObject 是 NSObject 的子类。下载来自对 UIViewController 主页的单击。

在 WebServiceObject 中，当出现问题时，他会：

```
UIAlertView *alert = [[UIAlertView alloc] init...];
[alert show]; 
```

警报显示。由于执行它的代码是非视图对象，该警报如何显示？我问的原因是因为我想在网络恢复时删除该警报。由于网络观察发生在 WebServiceObject 中，我不确定如何访问 UIAlertView 对象。我认为在我完成的其他代码中，我会做类似的事情

```
[self.view viewWithTag:NETWORK_ALERT_TAG]; 
```

或有影响的东西。这是因为视图代码在模型代码中，而是我应该更改他的代码以向视图代码发布通知以显示警报并以这种方式获取它？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:12:05.210

UIAlertView 的`-show`方法创建自己的窗口，覆盖在应用程序窗口的顶部，在其中显示自己；因此，它不是应用程序视图层次结构的一部分。要隐藏它，您需要对警报视图本身的引用，可能会作为 WebServiceObject 上的属性公开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:13:33.970

听起来你想要没有任何按钮的 UIAlertView，我发现这个很好的教程提供了“请等待警报”

[http://mobiledevelopertips.com/user-interface/uialertview-without-buttons-please-wait-dialog.html](http://mobiledevelopertips.com/user-interface/uialertview-without-buttons-please-wait-dialog.html)

我认为它会帮助你实现你想要的，如果你不希望用户能够解除警报

# python - 在 GAE 上运行时，外部 CSS 样式表不起作用

> ID：10526614
> 
> 赞同：4
> 
> 时间：2012-05-10T02:05:30.593
> 
> 标签：python, google-app-engine, jinja2

我有 main.html 链接到 web.css，当我运行主文件时，它使用 CSS 运行良好，但是当我在谷歌应用引擎上运行整个东西时，它不应用 CSS。从我得到的 GAE 日志中

```
INFO     2012-05-10 01:58:46,526 dev_appserver.py:2891] "GET /web.css HTTP/1.1" 404 -
INFO     2012-05-10 01:58:46,540 dev_appserver.py:2891] "GET /favicon.ico HTTP/1.1" 200 - 
```

这是在我的 html 文件中

```
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="web.css"/>
    </head>
    <body>
        <h1> Hi </h1>
    </body>
</html> 
```

这是我的代码

```
import os
import webapp2
import jinja2
import re
from datetime import datetime
from google.appengine.ext import db
from utility_functions import valid_username, valid_password, valid_email

class Handler(webapp2.RequestHandler):    
    def render(self, link, values={}):
        je = jinja2.Environment(autoescape=True, loader=jinja2.FileSystemLoader(
            os.path.join(os.path.dirname(__file__), 'templates')))

        template = je.get_template(link)
        self.response.out.write(template.render(values))        

class MainPage(Handler):
    def get(self):
        self.render('main.html')

handlers = [('/', MainPage)]
app = webapp2.WSGIApplication(handlers, debug=True) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T07:06:01.530

对于偶然发现此问题的其他任何人，应使用[静态文件处理程序](https://developers.google.com/appengine/docs/python/config/appconfig#Static_File_Handlers)声明静态文件。例如，这提供了一个名为 css 的目录，它将应用程序根目录`css`中的目录映射到应用程序`css`域根目录中的公共可用目录：

```
- url: /css
  static_dir: css 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T07:24:49.743

将此添加到您的`app.yaml`：

```
- url: /web.css
  static_files: web.css
  upload: web.css 
```

# lua - 如果 lua 数是双倍的， =/<=/>= 操作是否总是正确的？

> ID：10526615
> 
> 赞同：2
> 
> 时间：2012-05-10T02:05:43.617
> 
> 标签：lua, floating-point

如您所知，浮点数有一个精度问题，即值 1 将是 0.9999999。而 lua 在 C 中使用 == 来检查两个双精度数是否相等。所以问题是：

```
a = 5.6
b = 14 * 0.4
print(a==b) ; => false 
```

但更糟糕的是：

```
a = 1
...
if a < 1 then print("<1") end ; => sometimes a < 1 
```

那么我该如何避免呢？我查看了 lua 源代码，看来我可以修改 luaconf.h 中的 luai_numeq/luai_numle) 宏，但这有必要吗？

**更新**

第二个例子并不正确。实际上我的问题是，我将一个值 1 传递给 c/c++，它使用 lua_tonumber 来获取该值，并将这个值存储在一个 double 变量中，一段时间后，我将值 (lua_pushnumber) 推送到 lua，并且 a < 1发生了：

```
in lua:
my_cfunction(1)
...
in c:
int my_cfunction(lua_State *L) {
    double val = lua_tonumber(L, 1);
    ...
...
lua_pushnumber(L, val);

in lua:
local a = my_cfunction2()
if a < 1 then ... end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T02:12:18.590

> 如您所知，浮点数存在精度问题，即值 1 将是 0.9999999

我根本不知道。因为这不是真的。1.0 就是 1.0。这个：

```
a = 1
if a < 1 then print("<1") end 
```

永远*不会*打印“<1”。除非你真的改变了`a`。即使这样：

```
a = 2
a = a - 1
if a < 1 then print("<1") end 
```

也将永远不会击中`print`声明。

只要你对 Lua 的数字进行整数运算，你就会得到整数。整数值的加法、减法或乘法都不会给您留下非整数数值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T02:32:39.040

> 浮点数有精度问题

[它没有。](http://lua-users.org/wiki/FloatingPoint)

与 32 位整数相比，64 位双精度数可以精确地保存更多的整数值。

# java - 在混合 Java 和 SQL 查询时，如何做到最好？

> ID：10526616
> 
> 赞同：2
> 
> 时间：2012-05-10T02:05:57.210
> 
> 标签：java, sql

作为我`Java`程序的一部分，我需要对 ( `Oracle`) 数据库进行大量查询。

目前，我们创建了一个混合 SQL 和 Java，（我知道）这是一件坏事。

处理这样的事情的正确方法是什么？如果可能，包括示例。

谢谢你。

**编辑：**

有关该应用程序的更多信息。它是一个主要从数据库获取内容的 Web 应用程序（它接受用户输入并根据数据库认为真实的内容绘制接下来要看到的内容）。

我对今天如何完成它的最大担忧是混合 Java 代码和 SQL 查询在紧密耦合时看起来“不合时宜”（查询硬编码为源代码的一部分）

我正在寻找一种更简洁的方法来处理这种情况，这将提高手头项目的可维护性和清晰度

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T02:45:25.913

对于您所描述的内容，合并对象关系映射器 (ORM) 或重写为存储过程可能比您想要接受的工作更多。两者都有非平凡的学习曲线。

相反，一个好的做法是将 SQL 合并到每个表或目的的类中。看看[表数据网关对象](http://martinfowler.com/eaaCatalog/tableDataGateway.html)和[数据访问对象](http://java.sun.com/blueprints/corej2eepatterns/Patterns/DataAccessObject.html)设计模式，看看这是如何在实践中完成的。

这种方法的结果是无数的。您可以更好地重用，因为查询在一个位置。当您用方法调用（例如`userTableDataGateway.getContentToShow(pageId)`）替换几行 JDBC 和 SQL 时，客户端代码变得更易读。最后，这将帮助您更清楚地看到 ORM 帮助解决的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T02:15:35.093

好吧，您可以考虑的一件事是[对象关系映射器](http://en.wikipedia.org/wiki/Object-relational_mapping)（例如，[Hibernate](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/)）。这将允许您将数据库模式映射到 Java 对象，这通常会清理您的 Java 代码。

但是，如果性能和速度至关重要，则最好使用普通的 JDBC 驱动程序。

这当然也取决于您的应用程序试图完成的任务。例如，如果您需要基于 CSV 文件进行批量更新，我可能会使用纯 JDBC 解决方案。如果您正在设计 Web 应用程序，我*肯定会*选择 ORM 解决方案。

另外，请注意纯 JDBC 解决方案将涉及在您的 Java 代码中使用 SQL。实际上，就此而言，在任何 ORM 解决方案中都必须有某种形式的 SQL，无论是[HQL](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)、[JPQL](http://en.wikipedia.org/wiki/Java_Persistence_Query_Language)还是纯 SQL。重点是，Java 应用程序中的某些 SQL 没有任何问题。

***编辑以响应 OP 的编辑***

如果我从头开始编写 Web 应用程序，我会使用 ORM。但是，由于您已经有一个工作应用程序，因此从纯 JDBC 解决方案过渡到 ORM 将非常痛苦。它会清理您的代码，但需要大量的学习曲线，并且需要进行大量设置。如果您使用某种 bean 管理系统（如 Spring），设置时的一些痛苦会得到缓解，但它仍然非常重要。

它还取决于您想将应用程序带到哪里。如果您计划在很长一段时间内维护和添加此代码，则可能需要进行重构。但是，我不会*因为*您不喜欢在应用程序中硬编码 SQL 就建议您重新编写系统。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T02:30:24.907

根据您的更新，我同意 Tim Pote 的编辑：集成 ORM 的学习曲线。但是，您可以不集成 ORM，而是使用准备好的语句，然后将其存储在属性文件中。或者甚至将您的查询存储在数据库中，以便您可以对它们进行细微的更新，然后可以立即读取这些更新，而无需重新启动您的应用服务器。这两种策略都会整理你的硬编码 SQL 的 Java 代码。

但最终，我认为您的问题没有明确的答案，因为您所做的事情本身并没有错。这有点不灵活，但对于您的情况来说可能是可以接受的。

也就是说，我将其发布为答案！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T02:39:14.453

我不确定项目的状态，但您也可以找到一个名为 MyBatis 的“替代”对象关系映射器。它的学习曲线比流行的 hibernate 或 eclipselink 低，让您实际编写查询，这样您就知道代码在做什么。那就是如果 ORM 是你的事。

我现在正在使用 JPA（主要是因为这是当前的趋势，需要学习）。JPA 是 ORM 的 Java 标准。如果您要了解目前典型的 ORM 做事方式，JPA 可能是最好的选择。像 Hibernate 和 Eclipselink 这样的框架驱动它。根据您选择支持 JPA 应用程序的框架，您可以使用专有功能，但这会将您与该框架联系在一起。JPA 不难开始使用，但是当它不起作用时可能会非常神秘，因为它会混淆与数据库的交互（请注意，它确实允许使用本机 SQL 查询的选项，但是那种否定人们说 JPA 风格的数据库访问很好的原因）。

是的，仍然有人使用带有准备好的语句的 JDBC。通常，在使用普通的旧 JDBC 进行编程时，您将使用一些实践/模式，它们的行为就像一个非常非常简约的 ORM ......或者真的更接近 MyBatis。同样，如果你走这条路，请使用准备好的语句。他们否定了许多危险。

这是一个宗教问题，所以你会听到很多以你写问题的方式传教的声音。事实上，有人可能会为此拒绝你的问题。我认为您可能会问的唯一可能更糟的问题是 emacs 还是 vi 对一群 unix 极客来说更好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-10T02:14:56.680

您的问题似乎太笼统了，但是如果您在 Oracle 和 Java SQL 上混合使用 Direct SQL，最好花一些时间在像 Hibernate 或 Apache Cayenne 这样的 ORM 上。ORM 是一种单独的设计方法，用于将数据库操作与 Java 端分离。所有数据库交互和数据库设计都在 ORM 上实现，所有访问和业务逻辑都将驻留在 Java 中，这是一个建议。不过，仍然不清楚您的实际问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-07T13:24:26.180

> 我对今天如何完成它的最大担忧是混合 Java 代码和 SQL 查询在紧密耦合时看起来“不合时宜”（查询硬编码为源代码的一部分）

你的这个假设并不是真的“正确”，因为你的问题会有一个真/假的答案。这里的这个问题解释了有几种处理混合Java和SQL的方法：

[Java 编程 - SQL 语句应该存储在哪里？](https://stackoverflow.com/questions/1661921/java-programming-where-should-sql-statements-be-stored)

它本质上区分了 SQL：

*   在业务对象中硬编码
*   嵌入在[SQLJ](http://en.wikipedia.org/wiki/SQLJ)子句中
*   封装在单独的类中，例如[数据访问对象](http://en.wikipedia.org/wiki/Data_Access_Object)
*   元数据驱动（将对象模式与数据模式解耦 - 在元数据中描述它们之间的映射）
*   放入外部文件（例如属性或资源文件）
*   放入存储过程

我会补充一点：

*   嵌入在[CriteriaQuery](http://docs.oracle.com/javaee/6/tutorial/doc/gjitv.html)语句中
*   嵌入在[jOOQ](http://www.jooq.org)语句中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-10T02:36:40.800

Apache Cayenne，是最容易使用的 ORM 之一。它带有一个 Cayenne Modeller 来对数据对象建模并进行映射。我会向 ORM 的初学者推荐 Cayenne。它可以通过建模器创建映射类和数据库同步。

# javascript - 在按键上执行 JavaScript

> ID：10526621
> 
> 赞同：0
> 
> 时间：2012-05-10T02:06:31.410
> 
> 标签：javascript, html

我正在做一些非常基本的 javascript 工作，并且似乎遇到了问题。对于我的一生，我似乎无法在谷歌上找到一个非常基本的答案。

```
<html>
    <head>
        <title>Test Page</title>
        <script type="text/javascript">
    function lowerCase(){
        var input = document.send.inputText;
        input.toLowerCase();
        document.write(input);
        alert(input);
    }
    </script>
    </head>
    <body>
        <h1>Test Page</h1>
        <form name="send">
            <input type='text' name="inputText" onkeypress="lowerCase()"/>
        </form>
    </body>
</html> 
```

我的意图是在将信息输入文本框并按 Enter 时执行函数 lowerCase。但是，我似乎永远无法执行该功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T02:12:20.303

怎么样...

HTML：

```
<input type='text' name="inputText" onkeypress="lowerCase(this)"> 
```

JavaScript：

```
function lowerCase ( input ) {
    setTimeout( function () {
        input.value = input.value.toLowerCase();    
    }, 0 );    
} 
```

**现场演示：http:** [//jsfiddle.net/vXpj8/3/](http://jsfiddle.net/vXpj8/3/)

* * *

```
function lowerCase ( e ) {
    if ( e.keyCode === 13 ) {
        this.value = this.value.toLowerCase();
        e.preventDefault();
    }        
}

document.send.inputText.onkeypress = lowerCase; 
```

**现场演示：http:** [//jsfiddle.net/vXpj8/1/](http://jsfiddle.net/vXpj8/1/)

请注意，我如何将事件处理程序与 JavaScript 绑定。我这样做是因为我想让该`event`对象在函数中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:11:01.180

onkeypress 属性和等号之间有一个空格。删除它；它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T02:35:40.093

小提琴：http: [//jsfiddle.net/iambriansreed/jEnxH/](http://jsfiddle.net/iambriansreed/jEnxH/)

```
<form name="send">
    <input type='text' name="inputText">
</form>
<script>
    document.send.inputText.onkeypress = function(event){
        if(event.keyCode != 13) return;       
        this.value = this.value.toLowerCase();
        alert(this.value.toLowerCase());
        event.preventDefault();
    };
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T03:04:55.467

如果您希望它在按下回车键时工作，那么您需要处理正在提交的表单，因为在作为表单控件的文本输入元素中按下回车会提交表单。

您更有可能希望在某些其他事件（例如 keup）上将值更改为小写，例如

```
 <input onkeyup="this.value = this.value.toLowerCase();" ... > 
```

这样做对用户来说有点烦人，因为大写字母神奇地变成了小写字母。如果后端对小写字母有要求，最好在那里处理，而不是让用户输入文本感到困惑。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-10T02:19:28.443

您的代码有一些问题首先 var input 是输入框而不是字符串，toLowerCase() 是字符串方法，您需要输入值

```
var input = document.send.inputText;
alert(input.value); 
```

其次，在输入文本之前执行onkeypress，也许您应该考虑将onkeypress更改为onkeyup

试试这是否有帮助

```
<html>
<head>
    <title>Test Page</title>
    <script type="text/javascript">
        function lowerCase(){
            var input = document.send.inputText;
            input.value = input.value.toLowerCase();
        }
    </script>
</head>

<body>

    <h1>Test Page</h1>
    <form name="send">
        <input type='text' name="inputText" onkeyup="lowerCase()">
    </form>

</body>
</html> 
```

# php - 管理每周时间表的数据库架构

> ID：10526625
> 
> 赞同：2
> 
> 时间：2012-05-10T02:07:39.227
> 
> 标签：php, sql, database, database-design

我写这篇文章是因为我想知道是否有人可以帮助我找出一个简单的时间表应用程序的最佳数据库模式。

我不知道如何绘制表格来帮助我表示一年中的几周，所有用户都将在其中记录他们的工作周时间。

干杯，非常感谢您的帮助！:)

吉列尔莫

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T05:04:39.733

我将与您分享我们使用的典型模型[https://www.dropbox.com/s/3wo9qd2fdpe5yow/timesheet_model.png](https://www.dropbox.com/s/3wo9qd2fdpe5yow/timesheet_model.png)，并描述每个表格：

*   useraccount - 用户信息、登录等
*   项目 - 用户可以从事的项目
*   projectassignment - 将项目分配给用户，因此这些是用户可以查看并提交时间的唯一项目
*   时间表 - 时间表上的摘要信息，它在哪一周，评论等
*   timesheetdetails - 每一天和每个项目的工作时间，这个表增长得非常快。我们还在此表中包含 projectid 外键以加快查询速度
*   批准 - 时间表上的批准记录，因为在批准之前可能会被拒绝

![时间表数据模型](../Images/280136ff3f2ff4636e6bdbcb2f718b3a.png)

希望这可以帮助

SQL 模式的链接是[https://www.dropbox.com/s/uadl5689v9j0jcs/timesheet_model_schema.sql](https://www.dropbox.com/s/uadl5689v9j0jcs/timesheet_model_schema.sql)（格式化以正确内联呈现需要太多时间）

# ios - 将未发布的 iOS 应用程序链接到 AppStore

> ID：10526630
> 
> 赞同：2
> 
> 时间：2012-05-10T02:08:19.803
> 
> 标签：ios, hyperlink, app-store-connect

在我的 iOS 应用程序中，我有一个简单的功能可以让用户评价我的应用程序。他们可以单击一个按钮，然后就会出现在 AppStore 应用程序中的应用程序页面。问题是我的应用程序还没有在 AppStore 上发布，所以我没有它的链接。

在它发布之前我在哪里可以获得它的链接？在 iTunes Connect 中是否有专门的地方？

还是只有一种特殊的 URL 格式可以使用（例如 ）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T02:21:05.160

您可以在将应用实际发布到 App Store 之前获取 URL。[您需要先在iTunes Connect](https://itunesconnect.apple.com)的“管理您的应用程序”中创建应用程序，然后您会在应用程序的信息页面上找到一个名为**“在 App Store 中查看”的链接。**您可以在代码中使用此链接的 URL。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-10T02:14:53.423

我会向 ITC 注册您的应用程序，以确保首先未使用该名称，但所有应用程序 URL 都遵循以下格式：

```
itms://itunes.com/apps/appname 
```

您可以使用方便的 openURL 命令调用它，例如：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"itms://itunes.com/apps/appname"]]; 
```

将“appname”替换为您的应用在 ITC 中的特定名称（而不是捆绑标识符或任何其他标识方式）。

# html - Facebook Like 按钮在我的网页中出现两次

> ID：10526635
> 
> 赞同：0
> 
> 时间：2012-05-10T02:09:09.277
> 
> 标签：html, facebook-like

我的网站上有一个 facebook Like 按钮。 ![在此处输入图像描述](../Images/8a918b266be57861c77feed4754c9ff5.png)

我只保留了一次赞按钮。当我在本地系统中尝试时。我正确地得到了 Like 按钮但是当放置 Live 时相同的 index.html 向我显示了 2 like 按钮.. 我该如何处理这个。

![在本地只有一个赞按钮](../Images/a32157c2a9014dfae46f47ab4a532a7d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:38:23.087

奇怪，从源头看问题是：

```
<div id="callUs" style="FLOAT: right"><a>Call us: +91-95661 60513<br ><span>email: bimmtechnologies@gmail.com</span></a></div>
<div align="right" class="fb-like" data-href="http://bimmtechnologies.com/" data-send="true" data-width="450" data-show-faces="true"></div>
<iframe src="http://www.facebook.com/plugins/like.php?href=http://www.bimmtechnologies.com/" scrolling="no" frameborder="0" style="border:none; width:200px; height:40px">
</iframe> 
```

似乎只有一个 iFrame，但检查 DOM 会为您提供：

```
<div id="callUs" style="float: right;"><a>Call us: +91-95661 60513<br><span>email: bimmtechnologies@gmail.com</span></a></div>
<div class="fb-like fb_edge_widget_with_comment fb_iframe_widget" data-href="http://bimmtechnologies.com/" data-send="true" data-width="450" data-show-faces="true" align="right">
    <span style="height: 29px; width: 450px;">
        <iframe src="http://www.facebook.com/plugins/like.php?channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D5%23cb%3Df1d310dc178f298%26origin%3Dhttp%253A%252F%252Fwww.bimmtechnologies.com%252Ffd67aabbddb5%26domain%3Dwww.bimmtechnologies.com%26relation%3Dparent.parent&amp;extended_social_context=false&amp;href=http%3A%2F%2Fbimmtechnologies.com%2F&amp;layout=standard&amp;locale=en_US&amp;node_type=link&amp;sdk=joey&amp;send=true&amp;show_faces=true&amp;width=450" class="fb_ltr " title="Like this content on Facebook." style="border: medium none; overflow: hidden; height: 29px; width: 450px;" name="f2e9ee7de90f1f6" id="f7f40995b577b2" scrolling="no"></iframe>
    </span>
</div>
<iframe src="http://www.facebook.com/plugins/like.php?href=http://www.bimmtechnologies.com/" style="border: medium none; width: 200px; height: 40px;" frameborder="0" scrolling="no">
</iframe> 
```

一些奇怪的 java 脚本正在使用类“fb-like”将内容添加到 div 中：

```
<div align="right" class="fb-like" data-href="http://bimmtechnologies.com/" data-send="true" data-width="450" data-show-faces="true">
</div> 
```

如果您禁用 javascript，请注意双精度是如何消失的。

## 使固定

删除上述`div`以及：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

紧随其后

```
<body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:31:51.807

仔细检查您的代码，因为您确实有两个 iframe 生成 fb 按钮。您有一个类 .fb 的 div，类似于 fb_edge_widget_with_comment fb_iframe_widget（样式化，这让我认为是正确的），并且在您关闭此 div 后，您有另一个 iframe 标签，您可以尝试删除。作为最后一个选项，在你的 style.css 文件中试试这个：#header > iframe { display: none; } - 希望能帮助到你！

# arrays - 如何在 Numpy 中批量选择和计算数组？

> ID：10526636
> 
> 赞同：1
> 
> 时间：2012-05-10T02:09:10.080
> 
> 标签：arrays, batch-file, numpy, iteration, hdf5

如何（1）批量选择 hdf5 文件下的所有数组，然后（2）对这些数组应用计算，最后（3）在另一个 hdf5 文件中批量创建新数组？

例如：

```
import numpy
import tables

file = openFile('file1',"r")

array1 = file.root.array1
array1_cal = (array1 <= 1)
newfile.createArray('/','array1_cal',array1_cal)

array2 = file.root.array2
array2_cal = (array2 <= 1)
newfile.createArray('/','array2_cal',array2_cal) 
```

我在一个 hdf5 文件和几个 hdf5 文件下有 100 多个数组，我该如何批处理它们？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:12:47.593

使用[PyTables](http://pytables.github.com/usersguide/libref.html)，您可以使用该`walkNodes`函数递归地遍历节点。这是一个例子：

```
# Recursively print all the nodes hanging from '/detector'.
print "Nodes hanging from group '/detector':"
for node in h5file.walkNodes('/detector', classname='EArray'):
    data = node[:]
    // do some calculation 
    // store new array in second file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T08:12:36.883

使用**h5py**，即 HDF5 的 Python 接口。**h5py**允许您使用传统的 Python 和 NumPy 隐喻来使用 HDF5 文件、组和数据集。

请参阅[http://code.google.com/p/h5py/](http://code.google.com/p/h5py/)和[http://alfven.org/wp/hdf5-for-python/](http://alfven.org/wp/hdf5-for-python/)

# ios - 抱歉，您使用的应用程序为 Facebook 集成配置错误。请下载最新版本的应用程序。- Xcode

> ID：10526639
> 
> 赞同：0
> 
> 时间：2012-05-10T02:09:14.750
> 
> 标签：ios, xcode, facebook, fbconnect

我已经按照这里的 Facebook 集成教程[http://www.mobisoftinfotech.com/blog/iphone/iphone-fbconnect-facebook-connect-tutorial/](http://www.mobisoftinfotech.com/blog/iphone/iphone-fbconnect-facebook-connect-tutorial/) 并且 Facebook 窗口打开但它显示错误消息 - 对不起你的应用程序使用是错误的...奇怪的是，如果我在 Facebook 窗口中单击西班牙语，然后返回英语，它就可以正常工作。我对此感到非常困惑，并且不理解 Facebook.developers.com 上的教程。请帮忙。如果有更简单的方法来实现 Facebook，现在也很高兴。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:43:02.573

抱歉，我遇到了同样的错误，我真的不知道解决方案是什么，但是.. 我使用了此应用程序的 ApiKey 和 SecretKey：（我下载了 MyGradesTutorial 示例项目，并将密钥带到了我的应用程序中）它有效光滑的！这意味着问题可能出在 Facebook 应用程序中，而不是在我的（您的）代码中！我仍在从 Facebook 应用程序端寻找解决方案...

# c++ - 河豚和对“BF_set_key”的未定义引用

> ID：10526640
> 
> 赞同：3
> 
> 时间：2012-05-10T02:09:23.320
> 
> 标签：c++, openssl, codeblocks, undefined-reference, blowfish

我已经从该页面[http://slproweb.com/products/Win32OpenSSL.html](http://slproweb.com/products/Win32OpenSSL.html)安装了 Win64 OpenSSL v1.0.1b 和 Visual C++ 2008 Redistributables ，并将编译器 ( `C:\OpenSSL-Win64\include`) 和链接器路径 ( `C:\OpenSSL-Win64\bin`, `C:\OpenSSL-Win64\lib`, `C:\OpenSSL-Win64`) 添加到 Code::Blocks，但我仍然无法编译我的程序。

源代码：

```
#include <cstring>
#include <openssl/blowfish.h>

int main() {
    const char * key = "aaabbbcccdddeeefffggghh";
    BF_KEY bfKey;

    BF_set_key(&bfKey, strlen(key), (const unsigned char *) key);

    return 0;
} 
```

错误：

```
obj\Release\main.o:main.cpp|| undefined reference to `BF_set_key'| 
```

我尝试添加`-lssl`, `-lopenssl`, `-llibssl`, `-lcrypto`，但它不起作用。然后我可以看到另一个错误：

```
ld.exe||cannot find -lssl| 
```

我不知道（和谷歌也）该做什么。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:02:54.120

因为您使用的是带有 Code::Blocks 的 GCC 编译器 (MinGW)，所以您必须将库 sear 目录 (C:\OpenSSL-Win64\lib) 更改为 C:\OpenSSL-Win64\lib\MinGW 并链接该库具有 Blowfish 功能，您必须使用 -leay32（在您的情况下可能是 -leay64）。

在目录 C:\OpenSSL-Win64\lib\MinGW 中有 2 个带有 .def 扩展名的文件，其中包含每个库导出的函数列表（libeay32.a/libeay64.a 和 ssleay32.a/ssleay64.a），顺便说一句，如果您使用 -l 选项，则该文件必须称为 lib.a；如果您想使用库 ssleay32.a/ssleay64.a 上的任何函数，您必须直接链接文件（例如 C:\OpenSSL-Win64\lib\MinGW\ssleay32.a）或将 lib 附加到名称的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:17:12.013

我不确定您是否正确配置它。除了设置库目录之外，您似乎还必须在构建选项中的某处添加项目正在使用的库。这有帮助吗？[http://www.learncpp.com/cpp-tutorial/a3-using-libraries-with-codeblocks/](http://www.learncpp.com/cpp-tutorial/a3-using-libraries-with-codeblocks/)

# ruby-on-rails - 带有 :multipart => true 的 Form_for 吐出

> ID：10526641
> 
> 赞同：19
> 
> 时间：2012-05-10T02:09:41.037
> 
> 标签：ruby-on-rails, form-for

我正在尝试将头像上传字段添加到我的个人资料页面，但是一旦我添加`:html => {:multipart => true}`到它，它就会吐出一个语法错误。

```
<%= form_for(@user), :html => { :multipart => true } do |f| %>
<%= render 'shared/error_messages', object: f.object %>

<%= f.label :name %>
<%= f.text_field :name %>

<%= f.label :email %>
<%= f.email_field :email %>

<%= f.label :password %>
<%= f.password_field :password %>

<%= f.label :password_confirmation, "Confirmation" %>
<%= f.password_field :password_confirmation %>

<%= f.label :avatar %>
    <%= f.file_field :avatar %>

    <%= f.submit "Save changes", class: "btn btn-large btn-primary" %>
<% end %> 
```

错误是：

```
syntax error, unexpected tASSOC, expecting keyword_end
...end=  form_for(@user), :html => { :multipart => true } do |f...
...                               ^ 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-02T09:17:00.300

它应该是这样的：

```
form_for @user, :html => { :multipart => true } do |f| 
```

中的括号`form_for(@user)`实际上是告诉 Ruby 解释器只使用一个参数调用函数，并且您不能在 Ruby 中的方法中传递错误数量的参数。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-10T02:12:51.520

[http://guides.rubyonrails.org/form_helpers.html#uploading-files](http://guides.rubyonrails.org/form_helpers.html#uploading-files)

它要么是`form_tag`帮助者，`multipart => true`要么只是`form_for`

```
<%= form_tag({:action => :upload}, :multipart => true) do %>
  <%= file_field_tag 'picture' %>
<% end %>

<%= form_for @person do |f| %>
  <%= f.file_field :picture %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-21T04:20:04.277

我假设您正在使用“回形针”或“载波”来上传图像。所以，试试这个：

```
<%= form_for @user, : url => users_path, :html => {:multipart => true} do |f| %> 
```

# google-maps-api-3 - ST_Intersects Fusion Table KML 数据不裁剪为矩形

> ID：10526645
> 
> 赞同：1
> 
> 时间：2012-05-10T02:09:53.703
> 
> 标签：google-maps-api-3, spatial, google-fusion-tables

我正在尝试将用户绘制的矩形用作对包含 kml 多边形数据的 google 融合表的查询。问题是地图显示了在矩形边界内找到的任何多边形的整个范围，并且没有将这些多边形裁剪到矩形范围内。任何帮助将不胜感激。

谢谢

```
layerZoom = new google.maps.FusionTablesLayer({
            query: {
            select: 'geometry',
            from: tableid1,
            where: "ST_INTERSECTS(geometry, RECTANGLE(LATLNG(" + sw.lat() + "," + sw.lng() + "), LATLNG(" + ne.lat() + "," + ne.lng() + ")))"
        } 
```

# java - 通过 Web 服务将 .NET 应用程序与 Java/J2EE 应用程序集成

> ID：10526650
> 
> 赞同：0
> 
> 时间：2012-05-10T02:10:34.297
> 
> 标签：java, .net, web-services, interop, web

假设我们有一个公开其 Web 服务的 .NET 应用程序。这个应用程序需要与我们在 Weblogic 上运行的 J2EE 应用程序集成。两者都是内部应用程序，因此我们不必太担心安全性。

没有真正复杂的数据结构/类型，因此我们应该能够在 .NET 和 Java 层之间映射它们（或者至少在 Java 层上编写适配器以确保匹配）。

在 J2EE 应用程序中使用这些 .NET Web 服务的最佳方法是什么？

简单的方法是只为 .NET Web 服务生成 WSDL，并使用 wsdl2java 或其他类似工具生成 Java 客户端类，看看是否可以在没有适配器/更改的情况下工作，创建单元测试等。但如果数据相关我们可能需要处理 XSD/Schema、生成类等的挑战。

我知道有 WSIT 来处理互操作性问题，但希望尽可能简单。有什么想法、想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T02:12:59.380

您可以使用 RESTful API 连接这两个应用程序。这让他们可以通过 HTTP 使用共享的高级 API 进行交谈。两种语言都对创建和使用 HTTP/RESTful 服务提供了充分的支持，因此在任何一种语言中实现都应该相当简单。

# macos - Mac OS X 等效于 Linux 群 (1) 命令

> ID：10526651
> 
> 赞同：38
> 
> 时间：2012-05-10T02:10:43.273
> 
> 标签：macos, shell, file-locking, flock

Mac OS X 上是否有管理文件锁定的flock 命令？

[http://linux.die.net/man/1/flock](http://linux.die.net/man/1/flock)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-07-16T04:18:28.983

这里有一个跨平台的flock命令：

[https://github.com/discoteq/flock](https://github.com/discoteq/flock)

我已经对其进行了测试，它在 OSX 上作为 util-linux 群的替代品运行良好。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-12T12:42:17.037

Perl 单行：

`perl -MFcntl=:flock -e '$|=1; $f=shift; print("starting\n"); open(FH,$f) || die($!); flock(FH,LOCK_EX); print("got lock\n"); system(join(" ",@ARGV)); print("unlocking\n"); flock(FH,LOCK_UN); ' /tmp/longrunning.sh /tmp/longrunning.sh`

作为脚本：

```
#!/usr/bin/perl 
# emulate linux flock command line utility
#
use warnings;
use strict;
use Fcntl qw(:flock);
# line buffer
$|=1;

my $file = shift;
my $cmd = join(" ",@ARGV);

if(!$file || !$cmd) { 
   die("usage: $0 <file> <command> [ <command args>... ]\n");
}

print("atempting to lock file: $file\n"); 
open(FH,$file) || die($!); 
flock(FH,LOCK_EX) || die($!); 
print("got lock\n"); 
print("running command: $cmd\n"); 
system($cmd);
print("unlocking file: $file\n"); 
flock(FH,LOCK_UN); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-10T02:32:32.927

我不相信该`flock`命令存在于 OS X 上，但它确实存在于 BSD 上，这应该可以相当容易地移植到 OS X。

最接近可用的是`shlock`命令（[手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/shlock.1.html)），但它不如`flock`.

您最好的选择可能是考虑将 Linux 或 BSD 版本移植`flock`到 OS X。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-28T17:13:26.883

`flock`OS X 上没有命令，没有。如果您需要一个可以与使用系统调用来管理对该资源的访问的程序共享可锁定资源的 shell 脚本`flock`，您将必须创建这样的程序 - 通过自己编译 BSD 源，或编写自己的等效程序（也许在 Perl 或 Ruby 或`flock`作为其高级系统接口的一部分公开的其他语言中）。

但是，如果您只需要一种从shellscript同步访问文件的方法，并且您没有已经编写的其他程序尝试`flock`使用. OS X 曾经附带; 它不再这样做，但您可以通过例如[Homebrew](http://brew.sh)安装它。`lockfile``procmail``procmail`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-15T19:38:28.730

只是为了完整起见，您可以为 OSX 编译 flock(2) 并进行一些小的更改，我没有运行任何测试，但基本功能有效。

您可以从[ftp://ftp.kernel.org//pub/linux/utils/util-linux](ftp://ftp.kernel.org//pub/linux/utils/util-linux)获取源代码。然后，您需要替换一些对 OSX 上不可用的字符串函数的调用，一切顺利。

这里：[https](https://gist.github.com/Ahti/4962822) : //gist.github.com/Ahti/4962822 是我修改后的 2.22.1 版本的flock.c，不过你仍然需要其他来源的标题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-03T20:36:59.910

您可以`flock`通过安装[`conda`](https://docs.conda.io/projects/conda/en/latest/index.html)，例如：

```
conda create --name flock flock 
```

或者

```
conda install flock 
```

要安装`conda`，请参见[此处](https://docs.conda.io/projects/conda/en/latest/user-guide/install/macos.html)。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-10T02:57:21.950

您是在寻找`flock`命令行实用程序还是`flock`功能？

`flock(1)`在 OS X 上不可用。`flock(2)`（用于文件锁定的 C 函数），[但是](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/flock.2.html).

编写一个简单的命令行`flock(1)`实用程序`flock(2)`应该是微不足道的。

* * *

## 回答 #8

> 赞同：-6
> 
> 时间：2012-05-13T15:07:24.993

由于文件锁定的工作方式，您无法编写用于 shell 编程的 shell 级别的*flock (1) 命令。*锁在描述符上，而不是在 inode 或目录条目上。

因此，如果您执行一个锁定某物的 shell 命令，一旦锁定命令退出并且 shell 脚本继续执行下一个命令，持有锁定的描述符就会消失，因此不会保留任何锁定。

实现这一点的唯一方法是作为 shell 内置。或者，您必须使用实际上直接支持*flock* (2) 的编程语言进行重写，例如Perl。

# c - 如何在 Flex 的另一个定义中使用以前的正则表达式定义？

> ID：10526653
> 
> 赞同：1
> 
> 时间：2012-05-10T02:10:52.097
> 
> 标签：c, bison, flex-lexer

假设我有关键字定义（不区分大小写）：

```
CLASS    (c|C)(l|L)(a|A)(s|S){2}
IF       (i|I)(f|F)
...more.... 
```

现在我想定义一个`KEYWORD`由所有关键字组成的：

```
KEYWORD   (CLASS|IF| ....more....)
IDENTIFIER     [^KEYWORD][a-zA-Z0-9] 
```

但是，这样做只会将`CLASS`其视为字符串，不会替换为先前的定义。此外，我想使用中的`KEYWORD`定义`IDENTIFIER`，它是否有效（假设`KEYWORD`被替换）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T03:01:59.757

好的，我在这里找到了如何使用以前的定义：http: [//dinosaur.compilertools.net/flex/flex_6.html#SEC6](http://dinosaur.compilertools.net/flex/flex_6.html#SEC6)

我们必须在前面的定义周围添加 {}：

```
KEYWORD   ({CLASS}|{IF}| ....more....)
IDENTIFIER     [^{KEYWORD}][a-zA-Z0-9] 
```

我回答自己以供其他人将来参考。

# mysql - 更改数据库结构：需要 SQL 查询

> ID：10526656
> 
> 赞同：0
> 
> 时间：2012-05-10T02:11:12.470
> 
> 标签：mysql, sql, database

我有两张桌子：

```
connections
id | publisherId | authorId 
```

和

```
books
id | connectionId | title 
```

我想合并这些表来只得到一个表：

```
books
id| publisherId | authorId | title 
```

我怎样才能只用一个 SQL 查询来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T02:14:50.790

```
CREATE TABLE newtable
SELECT b.id, c.publisherId, c.authorID, b.title
FROM books b
INNER JOIN connections c
on c.id = b.connectionId 
```

未经测试，但这应该可以。我假设您需要 books 表中的 ID，否则您需要 c.id 而不是 b.id。

然后您可以删除旧表并将其重命名为您想要的任何名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:21:46.067

```
CREATE TABLE connections_books 
SELECT books.id as id, 
       connections.publisherId as publisherId, 
       connections.authorId as authorId, 
       books.title as title 
FROM books join connections on books.connectionId = connections.id; 
```

首先使用以下`select`部分测试查询：

```
SELECT books.id as id, 
       connections.publisherId as publisherId, 
       connections.authorId as authorId, 
       books.title as title 
FROM books join connections on books.connectionId = connections.id; 
```

一旦这为您提供了所需的内容，请继续创建表格。

确保新表中的列名正确非常重要。使用 select 语句测试以确保您的列名是您想要的。如果要更改列名，请更改`as ...`每个选定列的名称。

# python - 为什么 mr.developer 不安装我的包依赖项？

> ID：10526657
> 
> 赞同：1
> 
> 时间：2012-05-10T02:11:16.880
> 
> 标签：python, dependencies, buildout, egg, setup.py

我正在将 mr.developer 与 buildout 一起用于项目，但它不会安装我的开发包中列出的鸡蛋`install_requires`。我究竟做错了什么？

项目的 setup.py：

```
#!/usr/bin/env python

from setuptools import setup, find_packages
from os.path import join

# tests_require is not always available in setup(), so we implement it a couple ways.
tests_require = [
    'nosetests',
]
setup(
    name='tan.adapter',
    version=open(join('docs','VERSION.txt')).read(),
    long_description=open('README.txt').read() + '\n' + open(join('docs', 'HISTORY.txt')).read(),
    classifiers=[
        'Development Status :: 2 - Pre-Alpha',
        'Environment :: Web Environment',
        'Framework :: Pylons',
        'License :: Other/Proprietary License',
        'Operating System :: OS Independent',
        'Programming Language :: Python',
        'Topic :: Internet :: WWW/HTTP :: WSGI :: Application',
    ],
    packages=find_packages(exclude=['ez_setup']),
    include_package_data=True,
    zip_safe=True,
    tests_require=tests_require,
    extras_require={'test': tests_require,},
    install_requires=[
        'avro',
        'celery',
        'jsonpath',
        'httplib2',
        'pyramid',
    ]
) 
```

buildout.cfg：

```
[buildout]
eggs-directory = eggs
extensions =
    buildout.dumppickedversions
eggs =
parts =
    python-snappy
    celery
    mongodb

[celery]
recipe = collective.recipe.celery
broker-transport = amqplib
broker-host = localhost
result-backend = amqp
result-dburi = amqp://localhost

[mongodb]
recipe = rod.recipe.mongodb
base-url = http://downloads.mongodb.org
version = 2.0.4
darwin-32bit-url = ${mongodb:base-url}/osx/mongodb-osx-i386-${mongodb:version}.tgz
darwin-64bit-url = ${mongodb:base-url}/osx/mongodb-osx-x86_64-${mongodb:version}.tgz
linux2-32bit-url = ${mongodb:base-url}/linux/mongodb-linux-i686-${mongodb:version}.tgz
linux2-64bit-url = ${mongodb:base-url}/linux/mongodb-linux-x86_64-${mongodb:version}.tgz
logpath=${buildout:parts-directory}/mongodb/log
dbpath=${buildout:parts-directory}/mongodb/data
master=true
update=true

[snappy]
# Dependency for python-snappy
recipe = zc.recipe.cmmi
url = http://snappy.googlecode.com/files/snappy-1.0.5.tar.gz

[python-snappy]
# Dependency for avro
recipe = zc.recipe.egg:custom
include-dirs = ${snappy:location}/include
library-dirs = ${snappy:location}/lib 
```

开发.cfg：

```
[buildout]
extends = buildout.cfg
extensions +=
    mr.developer
sources = sources
auto-checkout = tan.adapter
parts +=
    tests

[sources]
tan.adapter = git /var/git/tan.adapter.git

[tests]
recipe = pbp.recipe.noserunner
eggs =
    ${buildout:eggs}
    coverage
    pbp.recipe.noserunner
    WebTest
working-directory = ${buildout:directory}/src/tan.adapter/tan/adapter 
```

我原以为如果我运行`bin/buildout -c develop.cfg`，应该安装 avro、celery、jsonpath、httplib2 和 pyramid。如果我运行，它们*会*`pip install path/to/tan.adapter`安装。我必须怎么做才能让 mr.developer 和 buildout 自动安装依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:43:37.140

你的建筑中的哪个部分实际上使用了鸡蛋？tan.adapter 蛋实际上并没有包含在某个部分中，而该部分将引入依赖项。

# apache - mod_rewrite 遇到问题

> ID：10526661
> 
> 赞同：0
> 
> 时间：2012-05-10T02:11:56.197
> 
> 标签：apache, .htaccess, mod-rewrite

两个多星期以来，我一直在尝试对脚本进行简单的重写。

虽然这似乎是一项简单的任务，但任何重写的尝试.. [http://thebluecorsair.com/rank/index.php?character=Timbervvoif](http://thebluecorsair.com/rank/index.php?character=Timbervvoif)

到：[http](http://thebluecorsair.com/rank/Timbervvoif) ://thebluecorsair.com/rank/Timbervvoif导致典型的 404 响应。

我已经尝试了大约 20 个不同的答案、页面，以及直接用 PHP 重写但没有运气。

*此外，301 重定向也将是什么？*

**谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:30:32.263

通过[http://www.generateit.net/mod-rewrite](http://www.generateit.net/mod-rewrite)生成：

重写引擎开启

RewriteRule ^rank/([^/]*)$ /rank/index.php?character=$1 [L]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T18:56:31.213

为了解决这个问题，我使用了以下代码。

`RewriteRule ^([a-z]+)$ index.php?character=$1 [QSA,NC]`
`RewriteCond %{REQUEST_FILENAME} !-f`
`RewriteRule ^(.+)?$ index.php?character=$1 [QSA,L]`

# asp.net-mvc-3 - 我可以使用 Razor Intellisense 查看 .html 文件，就好像它们是 Visual Studio 2010 中的 .cshtml 文件一样？

> ID：10526671
> 
> 赞同：3
> 
> 时间：2012-05-10T02:12:40.257
> 
> 标签：asp.net-mvc-3, visual-studio-2010, razor, intellisense

我已经让 .Net MVC3 像处理 .cshtml 文件一样处理 .html（和其他自定义扩展名），但 VS2010 不会突出显示 Razor 语法或为其显示 Intellisense。如何让 VS2010 将 .html 文件识别为 .cshtml？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:31:33.690

这并不容易。如果您看到[asp.net mvc 3 source](http://aspnet.codeplex.com/releases)，您可以在网页文件夹中看到接下来的内容：

文件：RazorDebugHelpers.cs

```
// Trim the html part of cshtml or vbhtml
string outputExtension = extension.Substring(0, 3); 
```

文件：RazorCodeLanguage.cs

```
private static IDictionary<string, RazorCodeLanguage> _services = new Dictionary<string, RazorCodeLanguage>(StringComparer.OrdinalIgnoreCase) {
        { "cshtml", new CSharpRazorCodeLanguage() },
        { "vbhtml", new VBRazorCodeLanguage() }
    }; 
```

文件：PreApplicationStartCode.cs

```
WebPageHttpHandler.RegisterExtension("cshtml");
WebPageHttpHandler.RegisterExtension("vbhtml"); 
```

等等。

我想说什么？扩展逻辑在 mvc 中很深。如果您想做类似的事情，您可能需要下载源代码、编辑它们并构建自定义库，但这非常耗时。也许你可以通过其他方式问你问题，我希望有更好的解决方案来解决你的问题。

# objective-c - 制作objective-c类的不可变和可变版本的最有效方法是什么？

> ID：10526676
> 
> 赞同：9
> 
> 时间：2012-05-10T02:12:56.063
> 
> 标签：objective-c, cocoa, immutability, mutable

假设我正在创建一个表示分数的 Objective-C 类，并且想要创建不可变和可变版本。

按照 Foundation 框架中的模式，您可能希望`fractionByAddingFraction:`在不可变版本和`addFraction:`可变版本中看到该方法。

我遇到的悖论是如何在两个类之间只包含一次分数加法逻辑。似乎不可变`fractionByAddingFraction:`方法需要了解（并使用）可变`addFraction:`方法以避免代码重复，但是在不可变类的实现中包含可变方法意味着可以想象它们可以在不可变对象上调用，这违背了这一点。

一个简短的解释（或者更好的是，这个简化示例的延续）将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T02:22:51.830

你的方法是正确的（如果你真的需要一个可变的子类，除非你真的需要它，否则你应该避免它）。我不太清楚混乱的来源。您最容易`addFraction:`使用`fractionByAddingFraction:`. 这会有点低效，但这是最有意义的方向。就像是：

```
- (void)addFraction:(Fraction *)anotherFraction {
   Fraction *newFraction = [self fractionByAddingFraction:anotherFraction];
   self.internalStuff = newFraction.internalStuff;
} 
```

但通常您可能`_GetInternalStuffByAddingInternalStuffs()`会使用两个类都使用的一些私有函数更有效地处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:12:32.427

Foundation 集合的主要实现作弊：只有一个实现，它是 的子类`NSMutableFoo`，并且它有一个私有的可变性标志。这意味着客户端代码无法测试特定对象是否可变，但这绝不是一个好主意，除非可能用于调试和断言。

# post - cURL可以自定义文件读取回调函数吗？

> ID：10526686
> 
> 赞同：1
> 
> 时间：2012-05-10T02:14:39.180
> 
> 标签：post, curl, libcurl, multipartform-data

我想用 cURL 上传文件。它不是硬盘上的现有文件，而是在内存中（是的，我在运行时编写文件并希望消除临时文件）。

IIRC，通过cURL，我们可以自定义发送普通post数据时的读取回调函数。那么是否有类似的机制可以在读取文件时用于自定义回调函数，尤其是与多部分帖子一起使用时？

谢谢和最好的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:22:36.977

是的，curl_formadd 的[CURLFORM_STREAM](http://curl.haxx.se/libcurl/c/curl_formadd.html#CURLFORM_STREAM)是你的朋友：

> 告诉 libcurl 使用 CURLOPT_READFUNCTION 回调来获取数据。您传递给 CURLFORM_STREAM 的参数是传递给读取回调的第四个参数的指针。如果您希望该部分看起来像文件上传，请同时设置 CURLFORM_FILENAME 参数。请注意，使用 CURLFORM_STREAM 时，CURLFORM_CONTENTSLENGTH 也必须设置为部分的总预期长度。（libcurl 7.18.2 中添加的选项）

# jpa - 重启后首先加载持久对象的列表

> ID：10526693
> 
> 赞同：0
> 
> 时间：2012-05-10T02:15:24.703
> 
> 标签：jpa, persistence, one-to-many

**代码**

> 类列表{
> @OneToMany(targetEntity=ShoppingItemStatus.class, cascade=CascadeType.ALL,fetch = FetchType.LAZY)
> 私有列表项 = new ArrayList();
> 
> }

你好，

我正在使用 Eclipse Link 和 Glassfish，我遇到了一个非常烦人的错误。

1.  我坚持一个对象
2.  我正在读出对象列表（包括新对象）
3.  新对象的“项目”不包含任何项目

**然后我重新启动服务器：**

所有项目都正确包含。我无法真正理解这个错误，因为在第 2 步中。ShoppingItemStatus 和列表之间的表中的数据是存在的。

我正在搜索两天，更改我的实体中的每个配置和注释。

我不知所措提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:11:12.287

我的猜测是当你没有更新关系的双方时。因为您从不添加 OneToMany，所以当您重新阅读它时它是空的。你需要维护双方的关系。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Relationships#Object_corruption.2C_one_side_of_the_relationship_is_not_updated_after_updating_the_other_side](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Object_corruption.2C_one_side_of_the_relationship_is_not_updated_after_updating_the_other_side)

默认情况下，EclipseLink 启用共享缓存。当您重新读取来自缓存的对象时，您仍然具有您坚持的状态。

即使没有共享缓存，您也会在单个实体管理器/事务中遇到此问题。

您始终可以禁用共享缓存以避免该问题，但您仍然需要修复您的代码。

# android - 如何在 Android 框架中使用自定义权限？

> ID：10526695
> 
> 赞同：1
> 
> 时间：2012-05-10T02:15:40.850
> 
> 标签：android, android-ndk

我有一个由 android 应用程序使用的 android 系统服务（不是应用程序）。我想为此系统服务添加自定义权限，然后应用程序必须具有此权限才能访问我的服务。现在，我在 /frameworks/base/core/res/AndroidManifest.xml 中添加了一个权限，比如 com.test.testpermission。但是我还应该怎么做才能在系统服务中使用这个权限呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:50:55.993

在服务代码中，您需要将权限检查添加到服务公开的所有公共 API 中。要检查权限，您可以使用此方法：

```
private boolean checkPermission() {
    if (getContext().checkCallingOrSelfPermission("com.test.testpermission") == PackageManager.PERMISSION_GRANTED) {
        return true;
    }
    return false;
} 
```

因此，客户端应用程序必须在其清单中列出您的权限。

我从来没有自己尝试过，但我可以看到它被 TelephonyRegistry 服务使用。

对于本机代码，我可以在相机服务中看到这一点：

```
if (!checkCallingPermission(
                    String16("android.permission.CAMERA"))) {
                const int uid = getCallingUid();
                LOGE("Permission Denial: "
                     "can't use the camera pid=%d, uid=%d", pid, uid);
                return PERMISSION_DENIED;
            } 
```

# zend-framework - zend acl 模块化实现？

> ID：10526697
> 
> 赞同：1
> 
> 时间：2012-05-10T02:15:47.683
> 
> 标签：zend-framework, default, acl, roles, modular

我正在尝试在我的项目中实现 zend ACL，我面临三个问题。为了解释问题，这是代码：

我的库插件类

```
class Mylib_Controller_Plugin_AccessCheck extends Zend_Controller_Plugin_Abstract {

    private $_acl = null;
    private $_auth = null;

    public function __construct(Zend_Acl $acl, Zend_Auth $auth) {
        $this->_acl = $acl;
        $this->auth = $auth;
    }

    public function preDispatch(Zend_Controller_Request_Abstract $request) {
        $module = $request->getModuleName();
        $recourse = $request->getControllerName();
        $action = $request->getActionName();
            $identity = $this->auth->getStorage()->read();
    if (!isset($identity->Role)) {

            $role = 'default';
        } else {
        $role = $identity->Role;
        }

        if (!$this->_acl->isAllowed($role, $module, $recourse)) {
            $request->setModuleName('Admin')
                    ->setControllerName('User')
                    ->setActionName('index');
        }

    }

} 
```

这是模型文件夹中的 ACL 类

```
class Application_Model_DbTable_LibraryAcl extends Zend_Acl {

    public function __construct() {
        $this->addRole(new Zend_acl_Role('default'));
        $this->addRole(new Zend_acl_Role('User'));
        $this->addRole(new Zend_acl_Role('Admin'), 'User');

        $this->add(new Zend_Acl_Resource('Admin'))
                ->add(new Zend_Acl_Resource('default'))

        ;

        $this->allow('Admin')
                ->deny(array('User', 'default'));

    }

} 
```

这是 bootstarp 中的 _initAppAutoload

```
 $acl = new Application_Model_DbTable_LibraryAcl();

        $auth = Zend_Auth::getInstance();

        $fc = Zend_Controller_Front::getInstance();

        $fc->setControllerDirectory(array('default' => '/../application/modules/default/controllers',
            'Admin' => '/../application/modules/Admin/controllers'));
        $fc->registerPlugin(new Hyderlib_Controller_Plugin_AccessCheck($acl, $auth)); 
```

1) 第一个问题是如何在 Application_Model_DbTable_LibraryAcl 中指定我有一个带有管理和默认文件夹的模块化实现，或者我如何为每个模块创建资源树？

2）我的数据库中没有默认角色，但我想让这个默认用户在不创建帐户的情况下拥有一些 previligaes（这就是我检查角色身份的原因，如果没有，我将其设置为默认值） . 这是这样做的最佳做法，甚至是合乎逻辑的吗？

3) 我如何在 _isAllowed 方法中检查我的 Mylib_Controller_Plugin_AccessCheck 类的动作，而不仅仅是模块和控制器。

此外，这种重定向方式也给了我一个错误，即没有正确重定向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:12:48.103

开始，

> 1) 第一个问题是如何在 Application_Model_DbTable_LibraryAcl 中指定我有一个带有管理和默认文件夹的模块化实现，或者我如何为每个模块创建资源树？

对于基本实现，您已经非常接近了：

```
class Application_Model_DbTable_LibraryAcl extends Zend_Acl {

public function __construct() {
    //add Roles
    //default role has very limited access
    $this->addRole(new Zend_acl_Role('default'));
    //User inherits all default access
    $this->addRole(new Zend_acl_Role('User'), 'default');
    //Admin inherits all User and Default acces
    $this->addRole(new Zend_acl_Role('Admin'), 'User');

    //add resources, caps don't seem to be a problem.
    //add Admin module resource
    $this->add(new Zend_Acl_Resource('admin'));
    //add Admin module Index controller resource, specify admin as parent 
    $this->add(new Zend_Acl_Resource('index'), 'admin');
    //add default module access
    $this->add(new Zend_Acl_Resource('default'));

    //add access rules
    //default in Zend_Acl is to deny all

    //everyone has access to the front page and the error page
    $this->allow(NULL, 'default', array('index', 'error'));
    $this->allow(NULL, 'default', array('index', 'index'));

    //add default user rules
    //allow default access to login logout
    $this->allow('default', 'default', array('login', 'logout'));

    //add crud access for User
    $this->allow('User', 'default', array('add', 'update'));

    //admin can do all
    $this->allow('Admin', NULL);
  }

} 
```

这可能并不完美，但应该让您知道该怎么做。您可以根据需要测试结果。

> 2）我的数据库中没有默认角色，但我想让这个默认用户在不创建帐户的情况下拥有一些 previligaes（这就是我检查角色身份的原因，如果没有，我将其设置为默认值） . 这是这样做的最佳做法，甚至是合乎逻辑的吗？

对我有用，很难检查用户角色，直到你知道他们是谁。检查一下。

> 3) 我如何在 _isAllowed 方法中检查我的 Mylib_Controller_Plugin_AccessCheck 类的动作，而不仅仅是模块和控制器。

```
public function preDispatch(Zend_Controller_Request_Abstract $request) {
        $module   = $request->getModuleName();
        $recourse = $request->getControllerName();
        $action   = $request->getActionName();
            $identity = $this->auth->getStorage()->read();
    if (!isset($identity->Role)) {
            $role = 'default';
        } else {
            $role = $identity->Role;
        }
        //default role is default, if role is not allowed and not set to default send to error controller.
        if (!$this->_acl->isAllowed($role, $module, $recourse, $action)) {
            if ($role == 'default'){
                $request->setModuleName('default')
                        ->setControllerName('index')
                        ->setActionName('login');
            } else {
                $request->setModuleName('default')
                        ->setControllerName('error')
                        ->setActionName('noauth');
        } 
```

将动作名称添加到`isAllowed()`似乎适用于我的应用程序，但测试并没有非常广泛。所以谨慎使用。我就像你仍然试图让我的头脑围绕这些概念。

# php - 使用基本 php 脚本最大化服务器内存

> ID：10526698
> 
> 赞同：0
> 
> 时间：2012-05-10T02:15:54.003
> 
> 标签：php, mysql, json

我已经为此奋斗了很长一段时间，我在我的服务器上运行一个简单的 php 脚本，它从 6 个表中提取 15 天最大价值的数据，每个表最多有 5 列，每列不超过 20 个字符。但由于某种原因，每次运行脚本时，服务器都会报告它使用 560 兆内存。我的主人否认了任何责任，所以我正在怀疑并追逐我的尾巴来尝试和我的错。对此脚本的任何建议或保证将不胜感激..

```
<?php
$json = file_get_contents('php://input');
$data = json_decode($json);
require_once('xxx');

$date = "";

if ($data === null) {
    echo 'Invalid Access';
} else {
    foreach ($data as $date) {
    } 
    $tables = array('Seizures', 'medlist', 'Output', 'Feeds', 'HydKeto', 'MedLogs');
    global $dbc;
    $rows = array();

    foreach ($tables as $table) {
        if ($table != 'medlist') {
            $query = "SELECT * FROM $table WHERE timestamp > '$date'";
        } else {
            $query = "SELECT * FROM $table WHERE status!='dc'";
        }
        $sth = mysqli_query($dbc, $query);
        if ($sth != null) {
            while($r = mysqli_fetch_assoc($sth)) {
                $rows[$table][] = $r;
            }
        }
    mysqli_free_result($sth);
    }
    echo json_encode($rows);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:41:02.513

原来这是一个 cloudLinux 问题，没有准确记录内存。我的主人在我的头撞墙3个月后终于承认并修复了它。

# jquery - 如何在Javascript中获取特定元素

> ID：10526702
> 
> 赞同：0
> 
> 时间：2012-05-10T02:16:16.490
> 
> 标签：jquery, ajax, html

当我发送 AJAX 请求时，如果它成功返回一个值。例如

```
$('#content').load(url, function (info) {

}) 
```

在此代码`info`中返回 HTML 页面源。

```
<!DOCTYPE html>
<html lang="en-US" dir="ltr" autopagermatchedrules="1">
<head>
<body class="single single-post postid-1 single-format-standard logged-in admin-bar single-author singular two-column right-sidebar" linkifying="true">
</html> 
```

我怎样才能得到身体类名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T02:18:04.670

这应该这样做。

```
$('#content').load(url, function (info) {
    var classes = $(info).find('body').attr('class');
}); 
```

# asp.net-mvc-3 - 带有 RAZOR 的 ASP.NET MVC 3：如何将部分视图中选定的复选框 id 传递给控制器 操作？

> ID：10526703
> 
> 赞同：2
> 
> 时间：2012-05-10T02:16:21.983
> 
> 标签：asp.net-mvc-3, razor, partial-views, data-sharing

我在主视图中有一个局部视图 [_SearchProduct]，比如说 [product] 视图。Partialview 有**许多复选框，它们被分成不同的部分**，例如按公司搜索、按产品搜索等，只需一个 [搜索] 按钮。

一个用户可以选择多个复选框。当用户单击 [search] 按钮时**，我需要将所有选定复选框的 id 传递给控制器​​操作**并考虑用户的选择再次重新呈现页面。请指导我如何将选定的复选框 ID 传递给我的控制器操作。

我的部分观点如下：

```
<fieldset>
<legend>By Company</legend>
<table  style="border-style: none;">
   <tr>
        @{
            int i = 0;
            foreach (var item in Model.CompanyName)
            {

                i = i + 1;
            <td style="border-style: none;text-decoration:none;" >
                @Html.CheckBox("chkCompany",new {id="chkCompany_" + Model.CompanyId.Tostring()}) @Model.CompanyName
            </td>
                if (i == 5)
                {
                    @:</tr><tr>
                    i = 0;
                }

            }
        }
    </tr>
</table>
</fieldset>

<fieldset>
<legend>By Product</legend>
<table  style="border-style: none;">
    <tr>
        @{
             i = 0;
            foreach (var item in Model.Product)
            {
                i = i + 1;
            <td style="border-style: none;text-decoration:none;" >
                @Html.CheckBox("chkProduct",new {id="chkProduct_" + Model.CompanyId.Tostring()}) @Model.ProductName
            </td>
                if (i == 10)
                {
                    @:</tr><tr>
                    i = 0;
                }

            }
        }
    </tr>
</table>
</fieldset> 
```

*   复选框是动态的
*   复选框 id 代表我进行过滤的各个表的主键。

请指导我>>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:02:05.783

所以听起来你有一个包含名称（公司/产品）和 ID 的结构。

我会创建一个看起来像的视图模型结构

```
public class PartialViewModel //Make sure this is included in your main view model
{
    public List<ObjectsToInclude> Companies { get; set; }
    public List<ObjectsToInclude> Products { get; set; }
}

public class ObjectsToInclude //Give this a better name
{
    public string Name { get; set; }
    public string Id { get; set; }
    public bool Include { get; set; }
} 
```

然后为了绑定它们你可以做

```
for (int i =0; i<Model.Companies.Count(); i++)
{
   <td style="border-style: none;text-decoration:none;" >
            @Html.HiddenFor(m => m.Companies[i].Id)
            @Html.CheckBoxFor(m => m.Companies[i].Include) @Model.Companies[i].Name
   </td>
   if (i == 5)
   {
       @:</tr><tr>
       i = 0;
   }

} 
```

然后，如果您的帖子采用的参数`PartialViewModel`（或某些`MainViewModel`包含 的实例`PartialViewModel`），您将拥有绑定的公司和产品列表。您可以遍历列表，并获取任何被检查内容的相应 ID。

**编辑：**如果您想要发布一个逗号分隔的数组，可以通过为您的复选框创建一个 onclick 事件，然后在每次单击复选框时设置隐藏输入的值。但是你的代码只能在启用 JavaScript 的情况下工作。如果您需要一个逗号分隔的字符串，您可以使用我建议的视图模型在服务器端创建它。

```
string companyIds = String.Join(",", model.Companies
    .Where(company => company.Include)
    .Select(company => company.Id)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T05:04:12.457

[http://dotnetnsqlcorner.blogspot.in/2012/09/multiple-checkboxes-in-mvc-3-and-post.html](http://dotnetnsqlcorner.blogspot.in/2012/09/multiple-checkboxes-in-mvc-3-and-post.html)

# crystal-reports - 使用数据集创建水晶报表而不使用 xsd 文件

> ID：10526705
> 
> 赞同：0
> 
> 时间：2012-05-10T02:16:33.970
> 
> 标签：crystal-reports, crystal-reports-2008

我想问是否可以在不使用或创建 xsd 文件的情况下使用数据集创建水晶报表。因为这里有一份报告可以做到这一点。它连接到数据集，但没有使用 xsd 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T10:45:09.157

当然可以，只需使用报表文档的 SetDataSource 方法即可：

```
YourReportDocument.SetDataSource(YourDS); 
```

# linux - 编译时指定库目录

> ID：10526717
> 
> 赞同：0
> 
> 时间：2012-05-10T02:19:02.037
> 
> 标签：linux, macos, unix, installation, gnu-make

我能够使用生成可执行文件

gcc myexec -o obj1.obj -o obj2.obj ...并链接 xxx.dylib

我将 myexec 部署到另一台机器上。当然，myexec 需要 xxx.dylib 才能运行。

为此，我使用 xxx.dylib 和 myexec 创建了 myInstallFolder

在部署时，我可以通过将 DYLD_LIBRARY_PATH 指向 myInstallFolder 来让 myexec 选择 xxx.dylib。

但是，我想避免使用 DYLD_LIBRARY_PATH。

在编译/链接时应进行哪些更改以使 myexec 从 myInstallFolder 中获取？

~莱德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:40:03.267

您可以指示链接器将路径写入加载程序用于加载 .so 文件的二进制文件：

```
-Wl,-R<path to myInstallFolder> 
```

例如

```
-Wl,-R/usr/local/mybin/lib 
```

# iphone - 如何为 NSManagedObject 子类编写自定义访问器？

> ID：10526723
> 
> 赞同：2
> 
> 时间：2012-05-10T02:20:01.977
> 
> 标签：iphone, objective-c, ios, core-data

我有一个视图叫做`Cart`. 它显示一个`Item`s 表。这些`Item`s 需要持久化，所以`Item`子类 NSManagedObject；`id`像,等值`price`是其访问器的属性，`@dynamic`因此它们是自动生成的。

我有另一种观点叫做`Favorites`. 它显示一个`Item`s 表，但它们不需要持久化。事实上，只要用户使用不同的凭据登录，此视图就会发生变化。

这两个视图之间的联系是用户可以从他的收藏夹中将项目添加到他的购物车中。购物车可以存储`Item`来自不同`Favorites`列表的 s。`Favorites`将商品添加到购物车时，列表不会更改。

最初，我将`Favorites`视图模型设为 NSDictionary 对象的 NSArray。当用户将商品添加到他的购物车时，我从 NSDictionary 键值对创建并保存在 Core Data 中的商品。这种方法看起来不是很干净或很干燥。`Favorites`让视图的模型成为`Item`s的 NSArray不是更有意义吗？

所以现在我的意图是实现这个`Item`类，以便它代表核心数据模型（NSManagedObject），但也可以与`Favorites`视图一起使用。作为 Objective-C 和 iOS 开发的新手，我真的不知道这将如何工作或看起来如何。似乎我需要覆盖为我神奇地创建的访问器，但我不能在编译时使用`super`调用来调用它们......谁能给我一个粗略的轮廓，说明它何时知道返回 NSDictionary 数据还是核心数据数据？如果它是 Core Data 数据，我如何保持与神奇生成的访问器相同的效率水平？

更好的是，是否有更好的实现方式与 DRY 一样或更有意义？还是我试图将太多的功能组合到一个类中？在这种情况下，NSDictionary 对象的 NSArray 是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:36:05.080

您可以在获取请求中指定结果类型（object、objectID、count、dictionary）。

另外，我不会在 MOC 之外使用 NSManagedObjects。您应该有一个单独的对象用于内存内容，或者您​​可以为这些对象使用内存中的持久存储......或者，您可以创建一个单独的 MOC 作为您使用的主数据库 MOC 的子对象对于您的内存对象。

这些方法的优点是您的代码不必知道它们是否已备份到磁盘。

只要您不保存 MOC，对这些对象的更改就永远不会进入磁盘。

**编辑**

```
NSFetchRequest *fetchRequest = // create the fetch request...
fetchRequest.resultType = NSDictionaryResultType; 
```

现在，当您进行提取时，您将返回一个 NSDictionary 数组，而不是返回一个 NSManagedObject 数组。

# ios - Amazon EC2 上的 Apple 推送通知服务器已连接但未收到通知

> ID：10526724
> 
> 赞同：3
> 
> 时间：2012-05-10T02:20:17.150
> 
> 标签：ios, amazon-ec2, amazon-web-services, push, apple-push-notifications

我尝试了苹果推送通知 API 并使其在我的本地 mac（环境）上运行。我在我的本地 tomcat 中对其进行了测试，一切正常，iOS 设备接收到异常通知。

但是当我将我的战争部署到远程服务器（亚马逊 EC2 实例）的 tomcat 中时，注意到我使用相同的 .p12 文件进行验证。应用程序返回成功消息，但 iOS 设备无法接收任何消息。

我检查了与 Apple 推送服务器的连接，一切似乎都很好。

我想知道我是否错过了为此 Amazon EC2 设置的任何其他系统。相同的代码也适用于 Windows 机器上的 tomcat。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:37:16.123

我已经验证通过 Apns 从 ec2 发送推送通知效果很好。我遇到了麻烦，但结果证明是为错误的应用程序使用了证书，它默默地失败了。如果连接有问题，请检查防火墙。如果它说它发送成功但没有交付，则消除证书中的变量。

# php - PHP登录表单无数据库

> ID：10526730
> 
> 赞同：-1
> 
> 时间：2012-05-10T02:21:23.927
> 
> 标签：php, forms, login, passwords

此表单未提交，但如果密码正确，我试图让它重定向到一个页面，如果不正确，则转到主页。我还试图加入一个记住我的 cookie 功能。一点帮助将不胜感激。

代码：

```
<?php
     if($logged_in){header('Location: index.php');}
    function checkLogin(){
       /* Check if user has been remembered */
       if(isset($_COOKIE['cookpass'])){
          $_SESSION['password'] = $_COOKIE['cookpass'];
       }

       /* Username and password have been set */
       if(isset($_SESSION['password'])){
          /* Confirm that username and password are valid */
          if($_SESSION['password'] != 'password'){
             /* Variables are incorrect, user not logged in */
             unset($_SESSION['password']);
             return false;
          }
          return true;
       }
       /* User not logged in */
       else{
          return false;
       }
    }
    if(isset($_POST['sublogin'])){
        //Set Variables
        $password = $_POST['password'];
    if($password == 'password'){
        $md5pass = md5($password);
        $_SESSION['password'] = $md5pass;
          if(isset($_POST['remember'])){
          setcookie("cookpass", $_SESSION['password'], time()+60*60*24*100, "/");
       }
    }
    }
    echo 'Not Logged In';
    $logged_in = checkLogin();
    ?> 
```

形式：

```
 <form id="form1" name="form1" method="post" action="">
    Password: &nbsp;<input name="password" type="password" /><br/><br/>
    Remember Me: <input type="checkbox" name="remember" id="remember" />
    <input name="sublogin" type="submit" value="Login" style="float:right;" />

    <br/>
      <p></p>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:33:28.690

您没有开始会话。如果您要在 PHP 上使用会话变量，您必须`session_start()`在页面的开头使用它们来启动它们，然后再发送标头。表单也没有有效的操作。

阅读登录表单上的一些示例，互联网上有很多。我认为您解决问题的方法不是最好或最简单的方法...

# c# - 使用 DataContractSerializer 序列化时出现 SecurityException

> ID：10526738
> 
> 赞同：1
> 
> 时间：2012-05-10T02:22:03.637
> 
> 标签：c#, xml, windows-phone-7, serialization, datacontractserializer

我正在尝试在 Windows Phone 7 上序列化我的游戏状态，因此创建了一个“保存”结构，这样我就可以使用 DataContractSerializer 轻松地将所有状态转换为 XML 文档。

当我单独序列化 Gamestate 的每个数据成员时，Save() 代码运行良好。然而，这导致了多个 xml 根错误，因此我将“保存”类作为唯一根。**现在，每当我尝试对任何东西调用 DataContractSerializer.WriteObject() 时，都会遇到安全异常。**

我一直在比较我的旧代码和新代码，但找不到任何问题。
我已将所有代码粘贴在下面，以防问题出在 Save() 方法之外。
先看看 Save() 方法

* * *

**异常详情：**
![在此处输入图像描述](../Images/72b2d6de4bdb8301221d9fcd1c2ffc63.png)

**堆栈跟踪：**

```
 at System.Runtime.Serialization.DataContract.DataContractCriticalHelper.CreateDataContract(Int32 id, RuntimeTypeHandle typeHandle, Type type)
   at System.Runtime.Serialization.DataContract.DataContractCriticalHelper.GetDataContractSkipValidation(Int32 id, RuntimeTypeHandle typeHandle, Type type)
   at System.Runtime.Serialization.DataContract.GetDataContractSkipValidation(Int32 id, RuntimeTypeHandle typeHandle, Type type)
   at System.Runtime.Serialization.DataContract.GetDataContract(RuntimeTypeHandle typeHandle, Type type, SerializationMode mode)
   at System.Runtime.Serialization.DataContract.GetDataContract(RuntimeTypeHandle typeHandle, Type type)
   at System.Runtime.Serialization.DataContract.GetDataContract(Type type)
   at System.Runtime.Serialization.DataContractSerializer.get_RootContract()
   at System.Runtime.Serialization.DataContractSerializer.InternalWriteStartObject(XmlWriterDelegator writer, Object graph)
   at System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph)
   at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph)
   at System.Runtime.Serialization.XmlObjectSerializer.WriteObject(XmlDictionaryWriter writer, Object graph)
   at System.Runtime.Serialization.XmlObjectSerializer.WriteObject(Stream stream, Object graph)
   at GameState_test.GameState.Save(String filename)
   at GameState_test.MainPage.SaveButton_Click(Object sender, RoutedEventArgs e)
   at System.Windows.Controls.Primitives.ButtonBase.OnClick()
   at System.Windows.Controls.Button.OnClick()
   at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs e)
   at System.Windows.Controls.Control.OnMouseLeftButtonUp(Control ctrl, EventArgs e)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName) 
```

## **新代码：**

```
 namespace GameState_test
    {                                       //TODO: Find a way to not have this ignored
        [DataContract] public class Hazard { [IgnoreDataMember] public Planet CurrentPlanet;} 

        public class Connections
        {
            public Connections(List<List<int>> connections = null) { this.cons = connections; }

            public bool AreConnected(int Planet1, int Planet2)
            {
                for (int i = 0; i < cons[Planet1].Count; i++)
                    if (cons[Planet1][i] == Planet2) return true;

                return false;
            }

            public List<int> this [int index] { get { return cons[index]; } }

            internal readonly List<List<int>> cons; //internal so it can be read by serializer
        }

        [DataContract]
        public class GameState
        {
            public GameState(List<List<int>> connections) { this.Connections = new Connections(connections); }
            public GameState(Position pos, List<List<int>> con) { Position = pos; Connections = new Connections(con); }
            public GameState(string filename) //load a game
            {   
                using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    if (!store.DirectoryExists("SavedGames")) store.CreateDirectory("SavedGames");

                    using (IsolatedStorageFileStream stream = store.OpenFile("SavedGames/" + filename + ".xml", System.IO.FileMode.Open, System.IO.FileAccess.Read))
                    {
                        DataContractSerializer serializer = new DataContractSerializer(typeof(GameStateSave), new List<Type> {typeof(Hazard), typeof(Inventory), typeof(List<List<int>>), typeof(List<Planet>), typeof(Planet) });
                        GameStateSave Save = (GameStateSave)serializer.ReadObject(stream);

                        Position position = new Position(Save.planets, Save.connections, Save.playerPosition);

                        this.Position = position;
                        this.PlayerInventory = Save.playerInventory;
                        this.Connections = new Connections(Save.connections);
                    }
                }
            }

            [DataMember] public readonly Connections Connections;
            [DataMember] public Position Position;
            [DataMember] public Inventory PlayerInventory;

            public void Save(string filename) 
            {
                using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    if (!store.DirectoryExists("SavedGames")) store.CreateDirectory("SavedGames");

                    using (IsolatedStorageFileStream stream = store.OpenFile("SavedGames/" + filename + ".xml", System.IO.FileMode.OpenOrCreate, System.IO.FileAccess.Write))
                    {
                        DataContractSerializer serializer = new DataContractSerializer(typeof (GameStateSave), new List<Type> {typeof(Hazard), typeof(Inventory), typeof(List<List<int>>), typeof(List<Planet>), typeof(Planet)} );

                        GameStateSave Save = GenerateSave();
                        serializer.WriteObject(stream, Save);

                        //NOTE: Even when I comment everything out but this, I still get an exception:
                        //serializer.WriteObject(stream, this.Position.Player); 
                    }
                }
            }

            private GameStateSave GenerateSave()
            {
                GameStateSave Save = new GameStateSave();

                Save.connections = this.Connections.cons;
                Save.playerInventory = this.PlayerInventory;
                Save.planets = this.Position.Planets;
                Save.playerPosition = this.Position.Player;

                return Save;
            }

        }

        [DataContract]
        internal struct GameStateSave //only to be used here
        {
            [DataMember]
            public List<List<int>> connections;
            [DataMember]
            public Inventory playerInventory;
            [DataMember]
            public List<Planet> planets;
            [DataMember]
            public int playerPosition;
        }

    } 
```

## **旧代码：**

```
namespace GameState_test
{
    [DataContract] public class Hazard { [IgnoreDataMember] public Planet CurrentPlanet;}

    public class Connections
    {
        public Connections(List<List<int>> connections = null) { this.cons = connections; }

        public bool AreConnected(int Planet1, int Planet2)
        {
            for (int i = 0; i < cons[Planet1].Count; i++)
                if (cons[Planet1][i] == Planet2) return true;

            return false;
        }

        public List<int> this [int index] { get { return cons[index]; } }

        internal readonly List<List<int>> cons; //internal so it can be read by serializer
    }

    [DataContract]
    public class GameState
    {
        public GameState(List<List<int>> connections) { this.Connections = new Connections(connections); }
        public GameState(Position pos, List<List<int>> con) { Position = pos; Connections = new Connections(con); }
        public GameState(string filename) 
        {   //load a game
            using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
            {
                if (!store.DirectoryExists("SavedGames")) store.CreateDirectory("SavedGames");

                using (IsolatedStorageFileStream stream = store.OpenFile("SavedGames/" + filename + ".xml", System.IO.FileMode.Open, System.IO.FileAccess.Read))
                {
                    DataContractSerializer serializer = new DataContractSerializer(typeof(Hazard), new List<Type> { typeof(Inventory), typeof(List<List<int>>), typeof(List<Planet>), typeof(Planet) });

                    List<List<int>> Connections = (List<List<int>>) serializer.ReadObject(stream);
                    Inventory PlayerInventory = (Inventory) serializer.ReadObject(stream);
                    List<Planet> Planets = (List<Planet>) serializer.ReadObject(stream);
                    int PlayerPosition = (int)serializer.ReadObject(stream);

                    Position position = new Position(Planets, Connections, PlayerPosition);

                    this.Position = position;
                    this.PlayerInventory = PlayerInventory;
                    this.Connections = new Connections(Connections);
                }
            }
        }

        [DataMember] public readonly Connections Connections;
        [DataMember] public Position Position;
        [DataMember] public Inventory PlayerInventory;

        public void Save(string filename) 
        {
            using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
            {
                if (!store.DirectoryExists("SavedGames")) store.CreateDirectory("SavedGames");

                using (IsolatedStorageFileStream stream = store.OpenFile("SavedGames/" + filename + ".xml", System.IO.FileMode.OpenOrCreate, System.IO.FileAccess.Write))
                {
                    DataContractSerializer serializer = new DataContractSerializer(typeof (Hazard), new List<Type> {typeof(Inventory), typeof(List<List<int>>), typeof(List<Planet>), typeof(Planet)} );
                    serializer.WriteObject(stream, this.Connections.cons);
                    serializer.WriteObject(stream, this.PlayerInventory);
                    serializer.WriteObject(stream, this.Position.Planets);
                    serializer.WriteObject(stream, this.Position.Player);
                }
            }
        }

        internal class SerializableGameState //only to be used here
        {
            public List<List<int>> connections;
            public Inventory playerInventory;
            public List<Planet> planets;
            public int playerPosition;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T20:22:27.897

Silverlight 代码在部分信任的基础上运行，这意味着它不能完全访问系统中的对象，包括非公共类型和成员。您正在尝试序列化一个内部类，该类不能按原样工作。这是我尝试序列化内部类时遇到的异常：

```
Exception: System.Security.SecurityException: The data contract type 'SL_ButtonAndText.SerializableGameState' is not serializable because it is not public. Making the type public will fix this error. Alternatively, you can make it internal, and use the InternalsVisibleToAttribute attribute on your assembly in order to enable serialization of internal members - see documentation for more details. Be aware that doing so has certain security implications. ---> System.Security.SecurityException: Security error.
   at System.Runtime.Serialization.CodeGenerator.BeginMethod(Type returnType, String methodName, Type[] argTypes, Boolean allowPrivateMemberAccess)
   at System.Runtime.Serialization.CodeGenerator.BeginMethod(String methodName, Type delegateType, Boolean allowPrivateMemberAccess)
   at System.Runtime.Serialization.XmlFormatWriterGenerator.CriticalHelper.GenerateClassWriter(ClassDataContract classContract)
   --- End of inner exception stack trace ---
   at System.Runtime.Serialization.ClassDataContract.RequiresMemberAccessForWrite(SecurityException securityException, String[] serializationAssemblyPatterns)
   at System.Runtime.Serialization.XmlFormatWriterGenerator.CriticalHelper.GenerateClassWriter(ClassDataContract classContract)
   at System.Runtime.Serialization.ClassDataContract.get_XmlFormatWriterDelegate()
   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph)
   at System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph)
   at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph)
   at System.Runtime.Serialization.XmlObjectSerializer.WriteObject(XmlDictionaryWriter writer, Object graph)
   at System.Runtime.Serialization.XmlObjectSerializer.WriteObject(Stream stream, Object graph)
   at SL_ButtonAndText.MainPage.Button_Click(Object sender, RoutedEventArgs e) 
```

异常消息准确地说明了我的问题（您的异常消息是否相似？）。解决此问题的一种方法是将课程公开，这将是最简单的解决方案。如错误消息所示，另一种选择是通过使用属性显式允许`DataContractSerializer`对内部类型具有可见性。`[InternalsVisibleTo]`下面的代码具有该`[IVT]`属性，并补充说我不再看到该错误。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Runtime.CompilerServices;
using System.Runtime.Serialization;
using System.Text;
using System.Windows;
using System.Windows.Controls;

[assembly: InternalsVisibleTo("System.Runtime.Serialization")]

namespace SL_ButtonAndText
{
    public partial class MainPage : UserControl
    {
        public MainPage()
        {
            InitializeComponent();
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            AddToDebug(typeof(DataContractSerializer).Assembly.FullName);
            MemoryStream ms = new MemoryStream();
            DataContractSerializer dcs = new DataContractSerializer(typeof(SerializableGameState));
            SerializableGameState sgs = new SerializableGameState
            {
                connections = new List<List<int>>
                {
                    new List<int> { 1, 2, 3 },
                    new List<int> { 4, 5 },
                },
                playerPosition = 0
            };
            try
            {
                dcs.WriteObject(ms, sgs);
                AddToDebug("Serialized: {0}", Encoding.UTF8.GetString(ms.GetBuffer(), 0, (int)ms.Position));
            }
            catch (Exception ex)
            {
                AddToDebug("Exception: {0}", ex);
            }
        }

        private void AddToDebug(string text, params object[] args)
        {
            if (args != null && args.Length > 0) text = string.Format(text, args);
            this.Dispatcher.BeginInvoke(() => this.txtDebug.Text = this.txtDebug.Text + text + Environment.NewLine);
        }
    }

    [DataContract]
    internal class SerializableGameState
    {
        [DataMember]
        public List<List<int>> connections;
        [DataMember]
        public int playerPosition;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T07:50:40.817

Carlosfigueira 是对的，因为在 Silverlight 中看不到内部结构。要修复它，请在 AssemblyInfo.cs 中添加以下内容：

```
[assembly: InternalsVisibleTo("System.Runtime.Serialization, PublicKey="
+ "00240000048000009400000006020000002400005253413100040000010001008D56C76F9E86493"
+ "83049F383C44BE0EC204181822A6C31CF5EB7EF486944D032188EA1D3920763712CCB12D75FB77E"
+ "9811149E6148E5D32FBAAB37611C1878DDC19E20EF135D0CB2CFF2BFEC3D115810C3D9069638FE4"
+ "BE215DBF795861920E5AB6F7DB2E2CEEF136AC23D5DD2BF031700AEC232F6C6B1C785B4305C123B"
+ "37AB")]
[assembly: InternalsVisibleTo("System.ServiceModel.Web, PublicKey="
+ "00240000048000009400000006020000002400005253413100040000010001008D56C76F9E86493"
+ "83049F383C44BE0EC204181822A6C31CF5EB7EF486944D032188EA1D3920763712CCB12D75FB77E"
+ "9811149E6148E5D32FBAAB37611C1878DDC19E20EF135D0CB2CFF2BFEC3D115810C3D9069638FE4"
+ "BE215DBF795861920E5AB6F7DB2E2CEEF136AC23D5DD2BF031700AEC232F6C6B1C785B4305C123B"
+ "37AB")]
[assembly: InternalsVisibleTo("System.Runtime.Serialization.Json, PublicKey="
+ "00240000048000009400000006020000002400005253413100040000010001008D56C76F9E86493"
+ "83049F383C44BE0EC204181822A6C31CF5EB7EF486944D032188EA1D3920763712CCB12D75FB77E"
+ "9811149E6148E5D32FBAAB37611C1878DDC19E20EF135D0CB2CFF2BFEC3D115810C3D9069638FE4"
+ "BE215DBF795861920E5AB6F7DB2E2CEEF136AC23D5DD2BF031700AEC232F6C6B1C785B4305C123B"
+ "37AB")] 
```

来源：[http ://systemmetaphor.blogspot.fr/2010/04/silverlight-serialization-avoiding.html](http://systemmetaphor.blogspot.fr/2010/04/silverlight-serialization-avoiding.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T06:26:17.880

检查您正在保存或读取的文件的权限。也许是简单的文件权限错误。检查文件夹权限和管理权限等。

# javascript - 一个有点痛苦的三重嵌套三元运算符

> ID：10526739
> 
> 赞同：48
> 
> 时间：2012-05-10T02:22:09.687
> 
> 标签：javascript, if-statement, ternary-operator

我查看`Raphael.js`了他的源代码以了解他如何将 RGB 值转换为 HSB。我发现了他所做的函数，当我遇到这个漂亮的三元嵌套三元运算符时，我正在将其转换为 Python：

```
H = (C == 0 ? null :
    V == r ? (g - b) / C :
    V == g ? (b - r) / C + 2 :
             (r - g) / C + 4
    ); 
```

它让我陷入了一个循环，因为 Python 没有与 Javascript 相同的三元运算符。我花了一段时间查看它，最终将这个更理智的代码（仅使用 if/else）从其中散列出来：

```
if (C == 0) {
    H = null;
} else {
    if(V == r) {
        H = (g - b) / C;
    } else {
        if(V == g) {
            H = (b - r) / C + 2;
        } else {
            H = (r - g) / C + 4;
        }
    }
} 
```

我的解释正确吗？我只是问这个，因为如果它不正确，我将面临*很多*调试。所以。我“明白”了吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2016-09-02T19:00:54.840

就我个人而言，仔细对齐的嵌套三元组胜过 if-else 混乱：

```
const H =
  C == 0 ? null            :
  V == r ? (g - b) / C     :
  V == g ? (b - r) / C + 2 :
           (r - g) / C + 4 ; 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-05-10T02:26:33.877

我认为您可以使用它来避免深度嵌套：

```
var H

if(C == 0){
    H = null;
}
else if(V == r){
    H = (g - b) / C;
}
else if (V == g){
    H = (b - r) / C + 2;
}
else {
    H = (r - g) / C + 4;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-04-10T20:20:45.957

如果您的 JavaScript 代码库包含类似问题的嵌套三元语句，请考虑将格式转换为[菊花链式三元语句](https://medium.com/javascript-scene/nested-ternaries-are-great-361bddd0f340)。

```
H = (C == 0)           // Is C zero?
    ? null             // Then return `null`, else ...
    : (V == r)         // Is V equal to r?
    ? (g - b) / C      // Then return this value, else ...
    : (V == g)         // Is V equal to g?
    ? (b - r) / C + 2  // Then return this value
    : (r - g) / C + 4; // Otherwise fall back to this default value 
```

> 他们只是在一条直线上从上到下读取，一旦遇到真实条件或回退，就会返回一个值。
> 
> –<em>[嵌套三元组很棒](https://medium.com/javascript-scene/nested-ternaries-are-great-361bddd0f340)，Eric Elliot

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-10T02:27:03.627

可以用更简单的方式编写相同的逻辑：

```
var H

if (C == 0)
    H = null;
else if (V == r)
    H = (g - b) / C;
else if (V == g)
    H = (b - r) / C + 2;
else
    H = (r - g) / C + 4; 
```

可以省略花括号，因为每个条件中都有一个语句。并且鉴于条件是互斥的，使用`else if`比嵌套`if`s要清晰得多。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-02-21T15:46:18.373

```
H = C == 0 
    ? null 
    : V == r 
        ? (g - b) / C 
        : V == g 
            ? (b - r) / C + 2 
            : (r - g) / C + 4 
```

我见过 Dan Abramov 使用这种缩进放置模式。虽然我不喜欢条件运算符在`?`视觉上不再遵循条件的方式，但我更喜欢 @lolmaus 的示例，因为无论条件的大小如何，缩进总是一致的。

您实际上开始将其视为`?`真假`:`，这在视觉上很直观。通过这种方式，我发现三元组更容易发现并与周围的代码区分开来。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-10T02:30:11.567

是的，它是正确的（除了大小写差异）。然而，它可能更简洁，没有任何括号，可读为 elseif：

```
if (C == 0)
    h = null;
else if (V == r)
    h = (g - b) / C;
else if (V == g)
    h = (b - r) / C + 2;
else
    h = (r - g) / C + 4; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-18T19:12:02.663

这是另一个更优雅的想法......

```
if (C != 0) 
{
  if (V == r) return (g - b) / C;
  if (V == g) return (b - r) / C + 2;
  return (r - g) / C + 4;
}

return null; 
```

只需将其包装在函数中并使用而不是 H...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-15T11:32:37.103

如[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator)中所述：

```
function example(…) {
    return condition1 ? value1
         : condition2 ? value2
         : condition3 ? value3
         : value4;
}

// Equivalent to:

function example(…) {
    if (condition1) { return value1; }
    else if (condition2) { return value2; }
    else if (condition3) { return value3; }
    else { return value4; }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-28T19:54:22.543

为什么不使用 Python 中的三元运算符？

```
H = (
    None            if C == 0 else
    (g - b) / C     if V == r else
    (b - r) / C + 2 if V == g else
    (r - g) / C + 4
) 
```

# android - DialogFragment.dismiss 因 NullPointerException 而崩溃

> ID：10526743
> 
> 赞同：24
> 
> 时间：2012-05-10T02:22:44.107
> 
> 标签：android, android-fragments

我正在做一些背景工作并在我这样做的同时显示一个 DialogFragment。一旦我的工作完成并调用了相关的回调，我就会关闭对话框。当我这样做时，我在 android 源代码中遇到了由 NPE 引起的崩溃，这里：

```
void dismissInternal(boolean allowStateLoss) {
        if (mDialog != null) {
            mDialog.dismiss();
            mDialog = null;
        }
        mRemoved = true;
        if (mBackStackId >= 0) {
            getFragmentManager().popBackStack(mBackStackId,
                    FragmentManager.POP_BACK_STACK_INCLUSIVE);
            mBackStackId = -1;
        } else {
            FragmentTransaction ft = getFragmentManager().beginTransaction();
            ft.remove(this);
            if (allowStateLoss) {
                ft.commitAllowingStateLoss();
            } else {
                ft.commit();
            }
        }
    } 
```

特别是在这一行：`FragmentTransaction ft = getFragmentManager().beginTransaction();`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-02T08:34:00.753

当您像 Sogger 所说的那样在调用 show() 之前调用 dismiss() 时，也可能会发生这种情况。

Dialog对象构造完成后，dialog不显示前，如果(mDialog != null)可以传入，会发生NullPointerException。

当您检查 mDialog 是否为空时，

```
if (mDialog != null) {
    mDialog.dismiss();
    mDialog = null;
} 
```

添加更多条件，如下所示，

```
if ((mDialog != null) && mDialog.isAdded() && mDialog.isResumed()) {
    mDialog.dismiss();
    mDialog = null;
} 
```

我认为 mDialog.isAdded() 条件可能就足够了......

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-14T14:55:03.200

最简单的解决方案是在调用“dismiss()”方法之前检查“getFragmentManager()”是否为“null”。您也可以扩展“DialogFragment”类并覆盖方法“dismiss()”以在那里检查它：

```
@Override
public void dismiss()
{
    if (getFragmentManager() != null) super.dismiss();
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-04-23T18:08:02.800

我知道这条消息很旧，但我遇到了类似的情况，我需要在不重构或更改大量代码的情况下解决。希望它对某人有用

```
 package com.example.playback;

import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class SaferDialogFragment extends DialogFragment {

    private boolean allowStateLoss = false;
    private boolean shouldDismiss = false;

    public SaferDialogFragment() {
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRetainInstance(true);
    }

    @Override
    public void onStart() {
        super.onStart();
        //check if we should dismiss the dialog after rotation
        if (shouldDismiss) {
            if (allowStateLoss)
                dismissAllowingStateLoss();
            else
                dismiss();
        }
    }

    @Override
    public void dismiss() {
        if (getActivity() != null) { // it's "safer" to dismiss
            shouldDismiss = false;
            super.dismiss();
        } else {
            shouldDismiss = true;
            allowStateLoss = false;
        }
    }

    @Override
    public void dismissAllowingStateLoss() {
        if (getActivity() != null) { // it's "safer" to dismiss
            shouldDismiss = false;
            super.dismissAllowingStateLoss();
        } else
            allowStateLoss = shouldDismiss = true;
    }

    //keeping dialog after rotation
    @Override
    public void onDestroyView() {
        if (getDialog() != null && getRetainInstance())
            getDialog().setDismissMessage(null);
        super.onDestroyView();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        /** omitted code **/
        return super.onCreateView(inflater, container, savedInstanceState);
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-10T03:07:44.683

我敢打赌，您发布的代码来自后台线程……您不得从 UI 线程以外的任何地方更新 UI。

您可以使用 onPostExecute() 或 runOnUiThread() 来实现您的目标（如果我对正在发生的事情的猜测是正确的）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-05T20:56:25.463

The callback which is invoked is probably on the activity which is or should be destroyed (after orientation change), also the progress dialog might have been instantiated with that same activity. This might cause the NPE. Callbacks on activities should not be invoked from background tasks, to prevent these kinds of problems. Decouple the background task from the activity, for example using otto, or prevent the background task from invoking the (to be) destroyed activity.

This is some code of mine:

static inner class of activity:

```
 public static class ProgressDialogFragment extends DialogFragment {
    ProgressDialog dialog;

    public ProgressDialogFragment() {
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        dialog = new ProgressDialog(getActivity(), getTheme());
        dialog.setTitle(getString(R.string.please_wait));
        dialog.setMessage(getString(R.string.uploading_picture));
        dialog.setIndeterminate(true);
        dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        return dialog;
    }

} 
```

Otto subscription in activity:

```
@Subscribe
public void onUploadEvent(UploadAvatarEvent uploadAvatarEvent) {
    switch (uploadAvatarEvent.state) {
        case UploadAvatarEvent.STATE_UPLOADING:
            if (!mProgressDialog.isAdded()) {
                mProgressDialog.show(getFragmentManager(), TAG_PROGRESS_DIALOG);
            }
            break;
        case UploadAvatarEvent.STATE_UPLOAD_SUCCES:
            mProgressDialog.dismiss();
            break;
        case UploadAvatarEvent.STATE_UPLOAD_ERROR:
            mProgressDialog.dismiss();
            break;
    }
} 
```

onCreate() in activity:

```
 mProgressDialog = (ProgressDialogFragment) getFragmentManager().findFragmentByTag(TAG_PROGRESS_DIALOG);
    if (mProgressDialog == null) {
        mProgressDialog = new ProgressDialogFragment();
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-16T15:30:10.577

在关闭之前检查它是否可见可以避免这个空指针异常

```
 if (mDialog != null && mDialog.isVisible) {
        mDialog.dismiss();
        mDialog = null;
    } 
```

# php - 复选框选项 - 选择决定插入数据库的内容

> ID：10526745
> 
> 赞同：0
> 
> 时间：2012-05-10T02:23:02.123
> 
> 标签：php, mysql, checkbox

这是我想要做的一个例子的一个很明显不起作用的代码。

假设这是一份晚餐菜单，并且回声是当前存储在数据库中的所有食物。用户只选择他们想要的食物，然后将这些选择插入到另一个表中。

例子：

```
<form method="post" action="entryform3.php">
<?php

SELECT * FROM foods ...etc...etc...

//Say for example whats echoed below at the moment is value: pizza, apple, steak...etc. So this will echo atleast 3 entries.

echo "For dinner, I'd like ". $result['food'] ."?";
echo "<input type=\"checkbox\" name=\"check\" />Click Me<hr></input>";
echo "<input type=\"hidden\" name=\"item_name\" value=\"$result['food']\"/>";

?>

<input type="submit" value="Add Selected Foods" name="submit"></form>

------------entryform3.php-----------
<?php

$food = $_POST['food'];

if (isset($_POST['check'])) {

INSERT INTO selectedfoods "(foods) VALUES '$food'";

}

//made up example... but if user check marks only apple, and steak from the echo, I want only apple and steak to be inserted into database.
?> 
```

我意识到缺少 mysql 等，但我的问题在于将复选框按钮与单个值绑定在一起。如果检查了任何一种食物，我从中提取此示例的部分工作代码仅采用最后回显的选择。

因此，它不会将正确的食物选择发送到数据库，只有最后一个回显——if 语句只通知是否选择了任何一个复选框。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:31:54.013

似乎您错过了作为数组的复选框的名称。例如，您可以像这样编写您的复选框：

```
<input type="checkbox" name="box[]" value="name_of_food" />Name_of_Food<br />
.......
....... 
```

然后当你得到结果时，就这样做：

```
<?php
       if(isset($_POST['check'])){
           $foods = $_POST['box'];

           foreach($foods as $food){
               echo $food." <br />";
           }
       }
?> 
```

# javascript - 使用 javascript 在 UIWebView 中隐藏 div

> ID：10526748
> 
> 赞同：2
> 
> 时间：2012-05-10T02:23:45.930
> 
> 标签：javascript, html, uiwebview, hide

我正在尝试使用 java 脚本从网页中隐藏一些 div，但是它似乎不起作用，任何人都可以帮助我，这是我的代码。

```
- (void)viewDidLoad
{

[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

NSString *urlAddress = @"http://tvmdn.org/";

//Create a URL object.
NSURL *url = [NSURL URLWithString:urlAddress];

//URL Requst Object
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

//Load the request in the UIWebView.
[webView loadRequest:requestObj];

[self.webView stringByEvaluatingJavaScriptFromString:@"var script = document.createElement('script');"  

 "script.type = 'text/javascript';"  

 "script.text = \"function hideID(idName) { "  

 "var id = document.getElementById(idName);"  

 "id.style.display = 'none';"

 "}\";" 

 "document.getElementsByTagName('head')[0].appendChild(script);"];  

[self.webView stringByEvaluatingJavaScriptFromString:@"hideID('headerbar');"];  

} 
```

谢谢，萨米。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T02:47:23.777

您不需要像那样注入javascript（通过动态创建脚本元素）。你应该可以这样做：

使您的课程成为一个`UIWebViewDelegate`（请参阅：[Apple Docs](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006951 "苹果文档")）并像这样实现javascript：

```
- (void)webViewDidFinishLoad:(UIWebView *)webview{
    NSString *js = @"var element = document.getElementById('headerbar');  element.style.dislay = 'none';";
    NSString *res = [webview stringByEvaluatingJavaScriptFromString:js];
   [super webViewDidFinishLoad:webview];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T18:57:02.943

布伦丹的回答是正确的，但这是对上述内容的一个精简

```
- (void)webViewDidFinishLoad:(UIWebView *)webview{

    [webView stringByEvaluatingJavaScriptFromString:@"(\".classIdToHide\").hide();"];
} 
```

# math - Coldfusion，线性插值公式/函数？

> ID：10526751
> 
> 赞同：1
> 
> 时间：2012-05-10T02:24:26.877
> 
> 标签：math, coldfusion

冷融合中有线性插值的函数/公式吗？看看cflib.org 没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:45:57.850

(y = y1 + [(y2 - y1) / (x2 - x1)]·(x - x1)

所以..

```
<cfset res =  y = y1 + ((y2 - y1) / (x2 - x1)) * (x - x1)>

<cfdump var="#res#"> 
```

# sql - 将行显示为列

> ID：10526753
> 
> 赞同：1
> 
> 时间：2012-05-10T02:24:29.293
> 
> 标签：sql, sql-server, pivot, coalesce

这是我的 SQL 表：

```
Table1
Col1   Col2
a      1
a      2
a      3
b      1
c      1
c      2 
```

如何查询此表以显示为这样？

```
col1,value1,value2,value3
a,1,2,3
b,1,null,null
c,1,2,null 
```

col1 中的每个值永远不会超过 5 条记录。我不知道 col2 中的值是什么，它们将是动态的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T03:07:24.747

如果您使用的是 SQL 2005 或更高版本，PIVOT 是一个不错的选择。对于静态查询，您可以假设值的最大数量为 1、2、3...，并像这样使用 PIVOT：

```
SELECT Col1 AS 'Col1', 
[1], [2], [3], [4], [5]
FROM
(SELECT Col1, Col2 
    FROM dbo.Table1) AS SourceTable
PIVOT
(
MAX(Col2)
FOR Col2 IN ([1], [2], [3], [4], [5])
) AS PivotTable; 
```

如果您接受动态 SQL，则可以构建 SQL 语句并使用以下命令执行它`sp_executesql`：

```
DECLARE @Values VARCHAR(1000)
DECLARE @SQL NVARCHAR(MAX)
SET @Values = NULL

SELECT 
    @Values = COALESCE(@Values + ', ', '') +  + '[' + CAST(Col2 AS VARCHAR) + ']'
FROM (SELECT DISTINCT TOP 100 PERCENT Col2 FROM dbo.Table1 ORDER BY 1) T

SET @SQL = '
SELECT Col1 AS ''Col1'', 
' + @Values + '
FROM
(SELECT Col1, Col2 
    FROM dbo.Table1) AS SourceTable
PIVOT
(
MAX(Col2)
FOR Col2 IN (' + @Values + ')
) AS PivotTable;
'
EXECUTE sp_executesql @SQL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:54:13.233

数据库不是很擅长做你所要求的。虽然我确信这是可能的并且有人会在此处发布解决方案，但也许您可以使用一点 bash 脚本让您的生活更轻松。

此代码获取第 1 列中所有唯一值的列表。然后它在表中查询第 2 列中的所有值以获得第 1 列中的给定值。“tr”命令将换行符替换为逗号和 sed 命令将最后一个逗号切换回换行符。

我的感觉是，如果您发布更多关于您的特定问题的信息，那么您的问题可能会有更好的解决方案。任何纯查询的解决方案都将涉及将表链接到自身 5 次，这可能需要大量处理，具体取决于表的大小。

注意：由于问题没有详细信息，我做了几个假设。我假设我们正在使用 postgresql，并且该数据库称为 test。

```
#!/bin/bash                                                                     

echo "select distinct col1 from table1 order by col1" | psql -At test | while read col1;do
    echo -n "$col1,"
    echo "select col2 from table1 where col1='$col1' order by col2" | psql -At test | tr '\n' ',' | sed s/,$/\n/'

done 
```

那么输出是：

```
a,1,2,3
b,1
c,1,2 
```

# .net - Outlook 2007 插件无法加载（运行时不正确）

> ID：10526754
> 
> 赞同：1
> 
> 时间：2012-05-10T02:24:39.987
> 
> 标签：.net, vsto, outlook-addin, office-2007

我已经创建了一个 Outlook 2007 插件，我已经使用 Visual Studio 2010 中的安装项目设法将它安装在 Windows 7 上。它在我安装它的每台 Windows 7 机器上都运行良好。我之前也成功地在两台 XP 机器上安装了它，但是我在虚拟机上的一个 XP 实例上遇到了问题。

AddInSpy 显示 Outlook 无法加载此插件，因为它无法加载其依赖项之一：

```
Add-in DLL path is not found. System.BadImageFormatException: Could not load file or assembly 'file:///C:\Program Files\blah\blah\MyAddIn.dll' or one of its dependencies. This assembly is built by a runtime newer than the currently loaded runtime and cannot be loaded. 
```

我构建了一个精简的插件，它只是弹出一个消息框，说它已启动，因此我新建了它不是我的插件所依赖的任何其他依赖项，并且我收到了相同的错误消息。

我怀疑“此程序集是由比当前加载的运行时更新的运行时构建的，无法加载。” 是罪魁祸首，稍后在 AddInSpy 生成的错误日志中我得到：

```
Assembly manager loaded from:  C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll
...
Using machine configuration file from C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\config\machine.config 
```

我已经安装了 .NET 4 客户端配置文件（该插件是为使用而构建的）并在这台机器上进行了扩展，但根据它尝试使用 .NET 2 的日志。我还安装了 VSTO2010 运行时和 Office 2007 Primary Interop组件。

所以我想我的问题是：为什么要尝试使用 .NET2？我如何让它使用.NET4？以及如何确保我的安装程序使用正确的版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:14:24.220

> 此程序集由比当前加载的运行时更新的运行时构建

这是核心错误信息。您正在与加载到 Outlook 中的*另一个插件进行战斗，并且您输掉了比赛。*它是第一个，它加载了版本 2 CLR。您的插件只能与版本 4 CLR 一起使用。

一种解决方法是删除该加载项。另一个是*强制*Outlook 始终加载版本 4 CLR。它具有版本 2 所没有的功能，它允许加载多个 CLR。强制执行此操作需要 Office 目录中的 Outlook.exe.config 文件。可能已经有一个（不确定），所以如果你找到它，请编辑现有的。它需要包含以下条目：

```
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0"/>
  </startup>
</configuration> 
```

# javascript - 为什么 onclick=window.location 在 Magento 自定义登录表单中启动非相关字段的表单验证？

> ID：10526757
> 
> 赞同：0
> 
> 时间：2012-05-10T02:25:22.063
> 
> 标签：javascript, html, forms, validation, magento

我正在通过 login.phtml 修改我的登录/注册表单，当我使用图像按钮而不是标准 css 按钮时，“创建帐户”按钮出现问题。

我修改了这个原始代码

```
 <button type="button" title="<?php echo $this->__('Create an Account') ?>" class="button" onclick="window.location='<?php echo Mage::helper('persistent')->getCreateAccountUrl($this->getCreateAccountUrl()) ?>';"><span><span><?php echo $this->__('Create an Account') ?></span></span></button> 
```

到

```
 <input type="image" src="http://localhost/magento/skin/frontend/default/mytemplate/images/button-createaccount.png" title="<?php echo $this->__('Create an Account') ?>"  onclick="window.location='<?php echo Mage::helper('persistent')->getCreateAccountUrl($this->getCreateAccountUrl()) ?>';"> 
```

并将按钮移动到右侧浮动“创建帐户”div的“内容”div中。该按钮显示正确，但每次单击创建帐户时，我的浏览器都会在左侧浮动“登录”div 中突出显示登录表单的必填字段，然后继续创建帐户页面。

当我单击原始的 css 创建帐户按钮时，在页面的下部（在另一个 div 中，既不是登录的一部分，也不是创建帐户 div）浏览器继续正确地继续，而不首先突出显示表单字段。这是否与 div 中按钮的位置或 window.location 方法有关？

这是完整的代码：

```
<div class="account-login"> <?php echo $this->getMessagesBlock()->getGroupedHtml() ?>
  <form action="<?php echo $this->getPostActionUrl() ?>" method="post" id="login-form">
    <div class="col2-set">
    <div class="col-2 new-users">
      <div class="content"> <?php echo $this->__('New Customers') ?>
        <p><?php echo $this->__('By creating an account with our store, you will be able to move through the checkout process faster, store multiple shipping addresses, view and track your orders in your account and more.') ?></p>
        <!-- Insert image button for Create Account in new div class "button" -->
        <div class="button">
          <input type="image" src="http://localhost/magento/skin/frontend/default/mytemplate/images/button-createaccount.png" title="<?php echo $this->__('Create an Account') ?>"  onclick="window.location='<?php echo Mage::helper('persistent')->getCreateAccountUrl($this->getCreateAccountUrl()) ?>';">
        </div>
        <!-- End Insert image button for Create Account in new div class "button"  --> 
      </div>
    </div>
    <div class="col-1 registered-users">
      <div class="content">
        <h2><?php echo $this->__('Registered Customers') ?></h2>
        <p><?php echo $this->__('If you have an account with us, please log in.') ?></p>
        <ul class="form-list">
          <li>
            <label for="email" class="required"><em>*</em><?php echo $this->__('Email Address') ?></label>
            <div class="input-box">
              <input type="text" name="login[username]" value="<?php echo $this->htmlEscape($this->getUsername()) ?>" id="email" class="input-text required-entry validate-email" title="<?php echo $this->__('Email Address') ?>" />
            </div>
          </li>
          <li>
            <label for="pass" class="required"><em>*</em><?php echo $this->__('Password') ?></label>
            <div class="input-box">
              <input type="password" name="login[password]" class="input-text required-entry validate-password" id="pass" title="<?php echo $this->__('Password') ?>" />
            </div>
          </li>
          <?php echo $this->getChildHtml('persistent.remember.me'); ?>
        </ul>
        <?php echo $this->getChildHtml('persistent.remember.me.tooltip'); ?> 
        <!-- Insert image button for Login in div class "button" -->
        <div class="button">
          <input type="image" src="http://localhost/magento/skin/frontend/default/mytemplate/images/button-login.png" title="<?php echo $this->__('Login') ?>" name="send" id="send2">
        </div>
        <!-- End Insert image button for Login in div class "button" -->
        <div class="buttons-set"> <a href="<?php echo $this->getForgotPasswordUrl() ?>" class="f-left"><?php echo $this->__('Forgot Your Password?') ?></a> </div>
      </div>
    </div>
    <div class="col2-set">
      <div class="col-2 new-users">
        <div class="buttons-set">
          <button type="button" title="<?php echo $this->__('Create an Account') ?>" class="button" onclick="window.location='<?php echo Mage::helper('persistent')->getCreateAccountUrl($this->getCreateAccountUrl()) ?>';"><span><span><?php echo $this->__('Create an Account') ?></span></span></button>
        </div>
      </div>
      <div class="col-1 registered-users">
        <div class="buttons-set"> <a href="<?php echo $this->getForgotPasswordUrl() ?>" class="f-left"><?php echo $this->__('Forgot Your Password?') ?></a>
          <button type="submit" class="button" title="<?php echo $this->__('Login') ?>" name="send" id="send2"><span><span><?php echo $this->__('Login') ?></span></span></button>
        </div>
      </div>
    </div>
    <?php if (Mage::helper('checkout')->isContextCheckout()): ?>
    <input name="context" type="hidden" value="checkout" />
    <?php endif; ?>
  </form>
  <script type="text/javascript">
               var dataForm = new VarienForm('login-form', true);
    </script> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:12:04.587

您遇到了他的问题，因为表单是在 javascript 中作为 Varien_Form 启动的：

```
<script type="text/javascript">
    var dataForm = new VarienForm('login-form', true);
</script> 
```

这有许多默认行为，当它遇到它不期望的按钮和元素时，这些行为显然表现得很奇怪。这些是在 Magento 的 js 库中的某个地方定义的。

希望这有助于为您指明正确的方向。

# php - jQuery 动态表

> ID：10526758
> 
> 赞同：0
> 
> 时间：2012-05-10T02:25:29.967
> 
> 标签：php, jquery, mysql

我有一个带有动态表格的表格以及其他字段。您从一行开始，可以在执行时添加更多。它用于跟踪商店的进出物品。您添加每个项目，然后填写一些常见字段（时间、日期、收到它们的人等）。

通用字段存储在一个表中，详细字段存储在与第一个表的 ID 字段相关的另一个表中。我首先使用 jquery ajax 发送一般字段，将它们保存在 db 上，然后使用 ID 与其他 ajax 调用一起保存详细信息。保存完成后，我用 jquery 清理输入，如果我添加另一个注册表，除非我重新加载整个页面，否则也会添加以前的项目。我使用 mysql+php+jquery 1.7.1

如何清洁阵列？或者这样做的最佳方法是什么？如果您需要一些代码，请告诉我，提前谢谢...

# html - 垂直居中图像

> ID：10526759
> 
> 赞同：0
> 
> 时间：2012-05-10T02:25:34.213
> 
> 标签：html, css

我正在尝试使用 line-height,vertical-align 方法将图像居中在 div 内。查看此处的示例、问题和其他修复，他们都建议甚至表明这是有效的。然而它对我不起作用。

基本结构

```
<div class="photo_container">
    <img alt="" src="photos/1.jpg" class="thumbnail" />
</div> 
```

CSS

```
div.photo_container
{
    width: 160px;
    height: 160px;
    padding: 10px;
    float: left;
    margin-right: 10px;
    margin-bottom: 10px;
    background-color: White;
    box-shadow: 0px 0px 5px #AAA;
    text-align: center;
    line-height: 160px;
}
img.thumbnail
{
    vertical-align: middle;   
} 
```

基本上，如您所见，容器总是 160px 高，但里面的图像可能是 100px 高。在这种情况下，我希望容器的顶部和底部有 30px 的间距，并且我的图像在中间垂直对齐。

我错过了什么？

**已回答**

原来这是一个 DOCTYPE 问题，我使用的是

`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">`

当我应该使用 HTML 5 文档类型时

`<!DOCTYPE html>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:34:07.597

您的代码似乎在 chrome 中对我有用。在下面摆弄。有什么我想念的吗？

编辑：我确实为不存在的图像添加了宽度/高度。

[JS小提琴](http://jsfiddle.net/JMAEH/ "小提琴")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T02:36:16.200

一个文档类型声明：`[<!doctype html>](http://w3.org/tr/html5/syntax.html#the-doctype)`

（或者，或者：[有效代码](http://validator.w3.org/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T02:29:59.467

[http://css-tricks.com/snippets/css/absolute-center-vertical-horizo​​ntal-an-image/](http://css-tricks.com/snippets/css/absolute-center-vertical-horizontal-an-image/)

这应该解释如何做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T02:37:29.617

这似乎或多或少对我有用

在[JSFiddle中查看](http://jsfiddle.net/uFAK7/7/)

**CSS**

```
div.photo_container
{
    width: 160px;
    height: 160px;
    padding: 10px;
    float: left;
    margin-right: 10px;
    margin-bottom: 10px;
    background-color: White;
    box-shadow: 0px 0px 5px #AAA;
    text-align: center;
    line-height: 160px;
    border: 1px solid red;
}
img.thumbnail
{
    vertical-align: middle;   
}​ 
```

**HTML**

```
<div class="photo_container">
    <img alt="" src="http://www.totalesl.com/images/icon/funny-icon.jpg" class="thumbnail" />
</div>​ 
```

# c# - 如何在不冒应用失败风险的情况下调用 SemaphoreSlim.Release()？

> ID：10526760
> 
> 赞同：3
> 
> 时间：2012-05-10T02:25:38.480
> 
> 标签：c#, parallel-processing, try-catch, semaphore, rategate

我正在尝试使用`SemaphoreSlim`.NET 4.0 中的新类来限制可以无限期运行的快节奏循环。在对此进行单元测试时，我发现如果循环足够紧密并且并行度足够高，则`SemaphoreSlim`在调用时会抛出无法捕获的异常`Release()`，**即使**您首先检查`.Count`属性并在期间锁定信号量实例本身整个检查计数/释放序列。

此异常会关闭应用程序，期间。据我所知，没有抓住它。

深入挖掘，我发现在调用期间`SemaphoreSlim`试图在`.AvailableWaitHandle`内部访问它自己的属性`Release()`，它在那里抛出异常，而不是我访问`SemaphoreSlim`实例本身。（我必须使用 Debug->Exceptions->Common Language Runtime Exceptions->Thrown all check in Visual Studio 进行调试以发现这一点；您无法在运行时捕获它。有关更多详细信息，请参阅[The Uncatchable Exception](http://www.netfxharmonics.com/2006/10/uncatchable-exception)。）

我的问题是，有没有人知道在这种情况下使用此类而不冒立即终止应用程序的风险的防弹方法？

注意：信号量实例被包装在一个 RateGate 实例中，其代码可以在这篇文章中找到：[Better Rate Limiting in .NET](http://www.pennedobjects.com/2010/10/better-rate-limiting-with-dot-net/ ".NET 中更好的速率限制")。

**更新**：我正在添加完整的控制台应用程序代码来重现。两个答案都有助于解决方案；请参阅下面的说明。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Threading.Tasks;
using System.Linq;
using System.Text;
using System.Threading;
using PennedObjects.RateLimiting;

namespace RateGateForceTerminateDemo
{
    class Program
    {
        static int _secondsToRun = 10;
        static void Main(string[] args) {
            AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
            OptimizeMaxThreads();
            Console.WriteLine();
            Console.WriteLine("Press any key to exit.");
            Console.ReadKey(true);
        }

        static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e) {
            Console.WriteLine("Unhandled exception, terminating={0}:{1}", e.IsTerminating, e.ExceptionObject.ToString());
            Console.WriteLine("Press any key to terminate app.");
            Console.ReadKey(true);
        }

        static void OptimizeMaxThreads() {
            int processors = Environment.ProcessorCount;
            int processorsSq = Convert.ToInt32(Math.Pow(processors,2));
            int threads = 1;
            double result;
            Tuple<int, double> maxResult = new Tuple<int, double>(threads, 0);
            while (threads <= processorsSq) {
                Console.WriteLine("Running for {0}s with upper limit of {1} threads... ", _secondsToRun, threads);
                result = TestThrottling(10000000, threads, _secondsToRun);
                Console.WriteLine("Ok. Result is {0:N0} ops/s", result);
                Console.WriteLine();
                if(result > maxResult.Item2)
                    maxResult = new Tuple<int, double>(threads, result);
                threads *= 2;
            }
            Console.WriteLine("{0} threads achieved max throughput of {1:N0}", maxResult.Item1, maxResult.Item2);
        }
        static double TestThrottling(int limitPerSecond, int maxThreads, int maxRunTimeSeconds) {
            int completed = 0;
            RateGate gate = new RateGate(limitPerSecond, TimeSpan.FromSeconds(1));
            ParallelLoopResult res = new ParallelLoopResult();
            ParallelOptions parallelOpts = new ParallelOptions() { MaxDegreeOfParallelism = maxThreads };
            Stopwatch sw = Stopwatch.StartNew();
            try {
                res = Parallel.For<int>(0, 1000000000, parallelOpts, () => 0, (num, state, subtotal) =>
                {
                    bool succeeded = gate.WaitToProceed(10000);
                    if (succeeded) {
                        subtotal++;
                    }
                    else {
                        Console.WriteLine("Gate timed out for thread {0}; {1:N0} iterations, elapsed {2}.", Thread.CurrentThread.ManagedThreadId, subtotal, sw.Elapsed);
                        // return subtotal;
                    }
                    if (sw.Elapsed.TotalSeconds > maxRunTimeSeconds) {
                        Console.WriteLine("MaxRunTime expired for thread {0}, last succeeded={1}, iterations={2:N0}, elapsed={3}.", Thread.CurrentThread.ManagedThreadId, succeeded, subtotal, sw.Elapsed);
                        state.Break();
                    }
                    return subtotal;
                }, (subtotal) => Interlocked.Add(ref completed, subtotal));
            }
            catch (AggregateException aggEx) {
                Console.WriteLine(aggEx.Flatten().ToString());
            }
            catch (Exception ex) {
                Console.WriteLine(ex);
            }
            sw.Stop();
            double throughput = completed / Math.Max(sw.Elapsed.TotalSeconds, 1);
            Console.WriteLine("Done at {0}, finished {1:N0} iterations, IsCompleted={2}, LowestBreakIteration={3:N0}, ",
                sw.Elapsed,
                completed,
                res.IsCompleted,
                (res.LowestBreakIteration.HasValue ? res.LowestBreakIteration.Value : double.NaN));
            Console.WriteLine();
            //// Uncomment the following 3 lines to stop prevent the ObjectDisposedException:
            //Console.WriteLine("We should not hit the dispose statement below without a console pause.");
            //Console.Write("Hit any key to continue... ");
            //Console.ReadKey(false);
            gate.Dispose();
            return throughput;
        }
    }
} 
```

因此，使用@dtb 的解决方案，线程“a”仍然有可能通过`_isDisposed`检查，但线程“b”在线程“a”命中之前处理信号量`Release()`。我发现在 ExitTimerCallback 和 Dispose 方法中都在 _semaphore 实例周围添加了一个锁。*@Peter Ritchie 的建议使我在处理信号量之前*另外取消并处理了计时器。这两件事的结合使程序可以无一例外地正确完成和处理 RateGate。

由于没有该输入我不会得到这个，我不想回答自己。但是由于 StackOverflow 在有完整答案时更有用，所以我会接受任何人首先发布成功在上面的控制台应用程序中存活的补丁或伪补丁。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T03:03:50.753

问题出在您正在使用的 RateGate 类中。它有一个内部计时器，即使在处理了 RateGate 实例之后，它也会运行它的代码。此代码包括对已处置 SemaphoreSlim 的 Release 调用。

*使固定：*

```
@@ -88,7 +88,8 @@
    int exitTime;
    while (_exitTimes.TryPeek(out exitTime)
            && unchecked(exitTime - Environment.TickCount) <= 0)
    {
+       if (_isDisposed) return;
        _semaphore.Release();
        _exitTimes.TryDequeue(out exitTime);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T02:53:03.707

根据您的评论，听起来您已经产生了一堆线程来处理 RateGate 对象，这些对象在这些线程完成使用之前就被释放了。即代码从 using 块退出后，线程仍在运行。更新：如果您按照评论中的描述进行操作；但不要使用 using 块，您不会遇到问题。我目睹的异常实际上是 ObjectDisposedException；如果 RateGate 在使用它完成代码之前被处置，这将是有意义的......

# python - 如何在python中打印出0xfb

> ID：10526761
> 
> 赞同：3
> 
> 时间：2012-05-10T02:25:38.583
> 
> 标签：python

我掉进了unicode地狱。

我的环境在 unix，python 2.7.3

```
LC_CTYPE=zh_TW.UTF-8
LANG=en_US.UTF-8 
```

我正在尝试以人类可读格式转储十六进制编码数据，这是简化的代码

```
#! /usr/bin/env python
# encoding:utf-8
import sys

s=u"readable\n"  # previous result keep in unicode string
s2="fb is not \xfb"  # data read from binary file
s += s2

print s   # method 1
print s.encode('utf-8')  # method 2
print s.encode('utf-8','ignore')  # method 3
print s.decode('iso8859-1')  # method 4

# method 1-4 display following error message
#UnicodeDecodeError: 'ascii' codec can't decode byte 0xfb 
# in position 0: ordinal not in range(128)

f = open('out.txt','wb')
f.write(s) 
```

我只想打印出 0xfb。

我应该在这里描述更多。关键是's += s2'。where s 将保留我之前解码的字符串。s2 是下一个应该附加到 s 中的字符串。

如果我修改如下，它会发生在写文件上。

```
s=u"readable\n"
s2="fb is not \xfb"
s += s2.decode('cp437')
print s
f=open('out.txt','wb')
f.write(s)
# UnicodeEncodeError: 'ascii' codec can't encode character
# u'\u221a' in position 1: ordinal not in range(128) 
```

我希望 out.txt 的结果是

```
readable
fb is not \xfb 
```

或者

```
readable
fb is not 0xfb 
```

[解决方案]

```
#! /usr/bin/env python
# encoding:utf-8
import sys
import binascii

def fmtstr(s):
    r = ''
    for c in s:
        if ord(c) > 128:
            r = ''.join([r, "\\x"+binascii.hexlify(c)])
        else:
            r = ''.join([r, c])
    return r

s=u"readable"
s2="fb is not \xfb"
s += fmtstr(s2)
print s
f=open('out.txt','wb')
f.write(s) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T02:33:00.053

我强烈怀疑您的代码实际上在上一行出错了：那个`s += s2`。s2 只是一系列字节，不能任意附加到 unicode 对象（而是一系列代码点）。

如果您打算将 '\xfb' 表示为`U+FB`, `LATIN SMALL LETTER U WITH CIRCUMFLEX`，则最好像这样分配它：

```
s2 = u"\u00fb" 
```

但是您说您只想打印出控制字符的 \xHH 代码。如果您只是希望它成为人类可以理解的东西，并且仍然可以明显看出字符串中的特殊字符，那么`repr`可能就足够了。首先，不要`s`是 unicode 对象，因为您在这里将字符串视为一系列字节，而不是一系列代码点。

```
s = s.encode('utf-8')
s += s2

print repr(s) 
```

最后，如果您不希望在外部`repr`添加额外的引号，以进行漂亮的打印或其他任何事情，那么在 Python（我知道）中没有简单的内置方法可以做到这一点。我以前用过这样的东西：

```
import re
controlchars_re = re.compile(r'[\x00-\x31\x7f-\xff]')

def _show_control_chars(match):
    txt = repr(match.group(0))
    return txt[1:-1]

def escape_special_characters(s):
    return controlchars_re.sub(_show_control_chars, s.replace('\\', '\\\\')) 
```

您可以很容易地调整`controlchars_re`正则表达式来定义您关心转义的字符。

# matlab - Matlab：在类中导入函数

> ID：10526765
> 
> 赞同：2
> 
> 时间：2012-05-10T02:26:24.367
> 
> 标签：matlab, oop, packages

我在 Matlab 中有一个类文件。

我使用包规范创建了 i 目录结构。

```
+MyPkg
|--+F1
|--+F2
|--+F3
|  |--fun.m
|--myc.m 
```

我的课是`myc`并且它被插入到包中`MyPkg`。

一个函数`fun`保存在`F3`主函数的子包中。

我想`fun`在课堂上使用函数。如何？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:32:54.293

您需要在任何地方引用`fun`as `MyPkg.F3.fun`。不幸的是，必须在 MATLAB 中的任何地方显式使用完整的包（或者，您必须使用`import`语句）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T03:07:31.377

您使用类描述的方式是在 Matlab 中执行此操作的“旧”方式。我不知道当你使用“旧”方式时它是如何工作的，但是类文件让生活变得更轻松。我强烈推荐他们。这样，您可以将一个类的所有函数放在一个文件中。例如，您可以创建一个文件：

我的班级.m

```
classdef myclass
  methods
    function out=add(a,b)
      out=a+b
    end
    function out=subtract(a,b)
      out=a-b
    end
  end
end 
```

如果您将 myclass.m 与您的 m 文件放在同一个文件夹中。然后您可以通过这种方式访问​​该类：

```
a=5;
b=3;
asdf=myclass;
c=asdf.add(a,b)
d=asdf.subtract(a,b) 
```

以下链接有一个更广泛的示例：

[http://www.mathworks.com/help/techdoc/matlab_oop/brhzttf.html](http://www.mathworks.com/help/techdoc/matlab_oop/brhzttf.html)

我希望这会有所帮助。

# html - 规范化浏览器之间的布局

> ID：10526767
> 
> 赞同：0
> 
> 时间：2012-05-10T02:26:44.820
> 
> 标签：html, css, internet-explorer, firefox, cross-browser

所以我一直在构建一个布局，直到现在我还没有在任何非 webkit 浏览器上测试过它。

但是现在我已经在 ie8 和 firefox 上对其进行了测试，我发现了一些我想解决的问题。

网站：

*   [http://thepelican.me/ablehearing/index2.html](http://thepelican.me/ablehearing/index2.html)

首先，**Internet Explorer 8。**

无论任何兼容模式或关闭 javascript，我仍然遇到所有这些问题。

*   位于标题中的元素完全关闭。
*   文本“为了轻松聆听......”和数字应该是内联的并浮动到右侧。
*   `<ul class="head">`只是根本不显示。
*   也没有`<ul class="mainmenu">`
*   其他一些 CSS 样式就不会发生

**火狐**

*   我已经建立了一个布局，在滚动`<div id="maincontentbody">`标题元素后滚动出视图并`<div id="footerblock">`滚动到视图中。但是在 Firefox 中，当您滚动到屏幕高度的 100% 时，它就会卡住。

* * *

**更新** - 解决 Firefox 问题的另一种方法是通过 jquery/js，如果我能知道用户何时滚动到 100% 页面的末尾，然后运行某种可以将滚动切换`maincontentbody`到的功能，`body`但我很漂亮我对如何做到这一点感到困惑，一旦用户达到 100%，我就很难抓住用户，innerHeight 没有给我正确的结果。

* * *

我完全不知道如何纠正这些问题，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:32:23.867

我将从导入[normalize.css](https://github.com/necolas/normalize.css)开始，将所有默认浏览器样式设置为在所有浏览器中都相同的样式。

# python - 可以间接修改dict吗？

> ID：10526770
> 
> 赞同：1
> 
> 时间：2012-05-10T02:27:25.487
> 
> 标签：python, list

很抱歉问了一个愚蠢的问题，但我找不到完整的答案。

具有以下内容：

```
a_dict = {"A":0, "B":0}
def GetElementRef(index):
    return a_dict[index]
would_like_to_modify = GetElementRef("A")
would_like_to_modify = 2 
```

这导致`would_like_to_modify`被赋予 2 的值，而`a_dict`保持不变。

AFAIK，任何基于分配的操作`would_like_to_modify`都会重新定位引用。有没有办法以这种间接的方式修改原始字典元素？

我知道我可以通过直接引用字典来实现它的其他一些方法，但我很好奇这是否可以以某种方式完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T02:37:04.560

对于问题中的代码，答案是“否”，因为字典中的值是数字，而数字是不可变的。另一方面，如果值是可变的，它们确实可以改变。例如：

```
a_dict = {"A":[0], "B":[0]}

def GetElementRef(index):
    return a_dict[index]

would_like_to_modify = GetElementRef("A")
print would_like_to_modify
> [0]

would_like_to_modify[0] = 2
print would_like_to_modify
> [2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:33:30.907

如果没有对该对象的引用，则无法更改该对象。您没有对要修改的对象（字典）的引用，因此您的问题的答案是否定的。

您可以修改字典*中的对象，*只要它是可变类型（例如，如果字典项是列表，则可以更改它），但不能修改字典本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T02:39:49.927

为什么不使用 a_dict[index] = "something" 的标准方法呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T03:06:28.890

您需要区分对象和变量。在 python 中，对象是一个“物理”实体，具有其数据的内存表示和可以在其上调用的方法表。另一方面，变量只是对对象的引用，并且没有它自己的物理标识（不像，比如说，C，指针仍然是一个东西，你可以独立于它的对象获取地址指着）。

现在让我们看看您发布的代码。当你说

```
a_dict = {"A":0, "B":0} 
```

您有一个字典对象 ，`a_dict`其中包含对其他四个对象的引用，这些对象排列在两个键值对中。

当你说

```
def GetElementRef(index):
    return a_dict[index]
would_like_to_modify = GetElementRef("A") 
```

now`would_like_to_modify`和两者的其中一个值槽`a_dict`引用同一个对象（暂时忽略一个数字不是真正的对象）。然而，当你说

```
would_like_to_modify = 2 
```

您正在将变量*重新绑定*`would_like_to_modify`到不同的对象，而不是修改它指向的值。

基本上，当变量用作右值时，它会被它所引用的对象透明地替换，而当它用作左值时，它会绑定到 = 右侧的对象。类似地，a_dict["A"] 是一个引用，当它用作左值时，您可以将它重新绑定到不同的对象，但是当它用作右值时，它会透明地被它所引用的值替换，并且您通过它访问它的事实`a_dict["A"]`已经丢失。

关键是它`=`是一个严格地做一件事的操作符——它将一个引用绑定到一个对象。现在，如果您查看上面发布的 Óscar López 代码：

```
a_dict = {"A":[0], "B":[0]} 
```

并稍微改写一下

```
num1 = 0
key1 = "A"
value1 = [num1]
num2 = 0
key2 = "B"
value2 = [num2]

a_dict = {key1 : value1, key2 : value2} 
```

您可以看到涉及七个对象，两个整数，它们是不可变的，两个字符串，两个数组，每个数组都引用一个整数，一个字典，在其键槽中引用两个字符串，在其值中引用两个数组插槽。以下交互式会话具有指导意义：

```
In [1]: num1 = 0

In [2]: key1 = "A"

In [3]: val1 = [num1]

In [4]: num2 = 1

In [5]: key2 = "B"

In [6]: val2 = [num2]

In [7]: dict = {key1: val1, key2: val2}

In [8]: dict
Out[8]: {'A': [0], 'B': [1]}

In [9]: num1 = 4

In [10]: val1
Out[10]: [0]

In [11]: dict
Out[11]: {'A': [0], 'B': [1]}

In [12]: val1 = [6]

In [13]: dict
Out[13]: {'A': [0], 'B': [1]}

In [14]: val2[0] = 42

In [15]: val2
Out[15]: [42]

In [16]: dict
Out[16]: {'A': [0], 'B': [42]} 
```

# iphone - 连字符换行

> ID：10526774
> 
> 赞同：0
> 
> 时间：2012-05-10T02:28:13.147
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uitextview

我们在 iOS 中支持字符连字符换行吗？即当文本超过框架宽度时，iOS 应该在该行的最后一个单词中添加一个连字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:34:38.773

这是Tupil 制作的关于断字的[GitHub 项目。](https://github.com/tupil/hyphenate/)`NSString`它是被调用的类别实现`NSString+Hyphenate`。你可以试试这个。Tupil 的博客[“向 NSString 添加连字符”](https://github.com/tupil/hyphenate/)描述了如何使用它。

你也可以看看：

*   [Frank Zheng 的博客 - 在 iPad 上使用 Core Text 进行断字](http://frankzblog.appspot.com/?p=7001)

# mysql - 无法让 MySQL 找到一年内活跃但下一年不活跃的用户

> ID：10526775
> 
> 赞同：0
> 
> 时间：2012-05-10T02:28:21.147
> 
> 标签：mysql

我有一个 MySQL 表：

```
CREATE TABLE IF NOT EXISTS users_data (
  userid int(11) NOT NULL,
  computer varchar(30) DEFAULT NULL,
  logondate date NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

这是一个包含大约 400 个唯一用户和 20 台计算机的大表，以及来自 5 年用户登录计算机的大约 20,000 个条目。

我想创建一个汇总表，列出每台特定计算机每年的唯一用户数，以及这些用户中有多少是新用户（即，在那一年之前没有登录到任何计算机的先前实例，此外对于将来没有更多登录任何计算机实例的用户：

```
CREATE TABLE IF NOT EXISTS summary_computer_use (
  computer varchar(30) DEFAULT NULL,
  year_used date NOT NULL,
  number_of_users int(11) NOT NULL,
  number_of_new_users int(11) NOT NULL,
  number_of_terminated_users int(11) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT into summary_computer_use (computer, year_used)
    select computer, distinct year(logondate) from users_data; 
```

我每年可以获得唯一用户：

```
UPDATE summary_computer_use as a 
inner join (
    select computer, year(logondate) as year_used,
        count(distinct userid) as number_of_users
    from users_data
    group by computer, year(logondate)
) as b on a.computer = b.computer and 
a.year_used = b.year_used
set a.number_of_users = b.number_of_users; 
```

但是我很难理解如何编写一个选择语句来查找给定年份中首次使用计算机的用户数量（没有早于该给定年份的登录日期）或从未再次登录的用户数量。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:07:45.587

我认为这会产生您想要的摘要：

```
 SELECT computers.computer,
          timespan.yyyy                 AS "year_used",
          COALESCE(allusers.num, 0)     AS "number_of_users",
          COALESCE(newusers.num, 0)     AS "number_of_new_users",
          COALESCE(terminations.num, 0) AS "number_of_terminated_users"
     FROM (SELECT DISTINCT computer
             FROM users_data) computers
     JOIN (SELECT (2000+i) AS yyyy
             FROM integers
            WHERE i BETWEEN 0 AND 10) timespan
LEFT JOIN (  SELECT YEAR(logondate) AS logonyear,
                   computer,
                   COUNT(DISTINCT userid) AS "num"
              FROM users_data
          GROUP BY 1, 2) allusers
       ON timespan.yyyy = allusers.logonyear AND computers.computer = allusers.computer
LEFT JOIN ( SELECT last_logon AS logonyear,
                   computer,
                   COUNT(DISTINCT userid) AS "num"
              FROM (  SELECT computer,
                             userid,
                             YEAR(MAX(logondate)) AS "last_logon"
                        FROM users_data
                    GROUP BY 1, 2) last_user_logons
           GROUP BY 1, 2) terminations
       ON timespan.yyyy = terminations.logonyear AND computers.computer = terminations.computer
LEFT JOIN ( SELECT first_logon AS logonyear,
                   computer,
                   COUNT(DISTINCT userid) AS "num"
              FROM (  SELECT computer,
                             userid,
                             YEAR(MIN(logondate)) AS "first_logon"
                        FROM users_data
                    GROUP BY 1, 2) first_user_logons
           GROUP BY 1, 2) newusers
       ON timespan.yyyy = newusers.logonyear AND computers.computer = newusers.computer; 
```

这些不同的子查询代表：

*   不同的集合`computers`
*   `timespan`我们感兴趣的年份

    *   注意：使用[整数表](http://www.xaprb.com/blog/2005/12/07/the-integers-table/)
    *   注意：我们排除了去年（2011 年，在撰写本文时），因为在今年完成之前，我们不能“关闭”去年的终止。
*   各年计算机不同用户数 ( `allusers`)
*   `newusers`每年的计算机数量
    （建立在计算机上用户的所有`first_logon`记录之上）
*   `terminations`按年计算的计算机数量（建立在所有记录
    之上）`last_logon`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:50:34.533

这就是你所追求的：

```
select y, count(userid) as newusers from
(
    select userid, min(year(logondate)) as y from users_data group by userid
) tmp
group by y; 
```

# php - Facebook php - 我如何检测喜欢我的页面的人

> ID：10526776
> 
> 赞同：1
> 
> 时间：2012-05-10T02:29:42.107
> 
> 标签：php, facebook, api, sdk

例如，我有[http://www.example.com/abc.html](http://www.example.com/abc.html)。

如果我喜欢这个页面，如何使用 facebook php api 检测到已经喜欢这个页面的我。

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:38:53.937

您可以使用最新的 facebook sdk 收集谁喜欢您的页面。您要做的是使用他们的应用程序界面进行某种工作，这只是您网站的 LIKE 脚本，然后调用[https://graph.facebook.com/](https://graph.facebook.com/) /subscriptions 通过 mysql 或任何您的数据库记录信息正在使用。我在为我举办的随机比赛收集 Facebook 邀请时使用这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:33:10.747

您可以使用必须在 Like 按钮回调中设置的 cookie，或者可以使用 Facebook Connect 检查用户是否喜欢您的页面，但这种方式需要额外的权限和创建的 Facebook 应用程序。

jquery 还有一个现成的解决方案：http: [//codecanyon.net/item/like-2-unlock-for-jquery/2822035](http://codecanyon.net/item/like-2-unlock-for-jquery/2822035)

# mysql - 在mysql中创建新列，填充其他列中两个日期中较早的日期

> ID：10526780
> 
> 赞同：1
> 
> 时间：2012-05-10T02:30:10.963
> 
> 标签：mysql, windows

我正在研究一个癌症数据库，我有一列是患者局部复发的日期（如果他们有的话），另一列是患者远处复发的日期（如果他们有的话）。我想创建另一个包含 FIRST 重复日期的列，无论它是本地的还是远程的。我不确定如何进行，因为有些患者只有本地或只有远程，因此许多字段是“NULL”。这是我想要做的一个例子：

```
Date_Local     Date_Distant     Date_Any
2010-08-01     2009-05-25       2009-05-25
NULL           2001-01-07       2001-01-07
1999-12-12     NULL             1999-12-12
NULL           NULL             NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:35:19.500

假设您已经使用语句添加了列，您将使用查询中的语句`ALTER TABLE`填充它，例如：`CASE``UPDATE`

```
ALTER TABLE cancertable ADD Date_Any DATE AFTER Date_Distant;

UPDATE cancertable SET Date_Any = 
  CASE
    WHEN Date_Local IS NOT NULL AND Date_Local <= Date_Distant THEN Date_Local
    WHEN Date_Distant IS NOT NULL AND Date_Distant < Date_Local THEN Date_Distant
    ELSE NULL
  END 
```

上面的语句将更新所有行，因为它没有`WHERE`子句。在执行 之前`UPDATE`，使用 a 对其进行测试`SELECT`以确保它看起来像您期望的那样：

```
SELECT *,
  CASE
    WHEN Date_Local IS NOT NULL AND Date_Local <= Date_Distant THEN Date_Local
    WHEN Date_Distant IS NOT NULL AND Date_Distant < Date_Local THEN Date_Distant
    ELSE NULL
  END AS Date_Any
FROM cancertable 
```

但是，请考虑您是否真的*需要*添加另一列。根据您打算查询的频率，您可能只使用`SELECT`上面的语句创建一个视图，因此该`Date_Any`值将是“实时”的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:52:54.707

添加具有此计算日期的新列可能不是最好的主意。因为您将根据快照（时间点）计算值。但是，如果任何一个源日期发生变化，则计算值可能会变为无效。

如果您决定添加这个额外的计算列，那么我强烈建议您通过插入和更新触发器使其保持最新。但是在你的应用层处理这个逻辑会好得多。您可以使用以下查询轻松查询推断的重复日期：

```
SELECT LEAST(COALESCE(Date_Local, Date_Distant), COALESCE(Date_Distant, Date_Local))
FROM TableNameHere WHERE where-clause-here; 
```

# c# - 检查 30 分钟间隔对，如果未找到对则忽略

> ID：10526792
> 
> 赞同：0
> 
> 时间：2012-05-10T02:31:24.030
> 
> 标签：c#, linq, c#-4.0

我期待另一个系统以 30 分钟为间隔提供以下时间数据序列。我需要将这 30 分钟的配对设置为一小时的间隔：

例如源数据：

```
Start:7:00
End: 7:30
Start:7:30
End: 8:00
Start:8:00
End: 8:30
Start:8:30
End: 9:00 
```

转换为小时数据，如下所示：

```
Start:7:00
End: 8:00
Start:8:00
End: 9:00 
```

如果 30 分钟块没有匹配，则应忽略此记录：例如

```
 Start:7:00
    End: 7:30
    Start:7:30
    End: 8:00
    Start:8:00
    End: 8:30
    Start:8:30
    End: 9:00
    Start:9:00 <-- Ignore this 
    End: 9:30  <-- Ignore this 
```

有人可以建议如何实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:55:05.143

我的解决方案的总体思路是您只需在索引处获取元素：

> 0, 3, 4, 7, 8, 11, 12, ...

或者换句话说 - 如果`index % 4`是 0 或 3。

在此之前，我们检查是否在末尾有剩余日期`count % 4`。如果有的话——我们剪掉它们。

这假设日期将作为您说明的输入全部有效。

这是我的实现：

```
public static IEnumerable<DateTime> CutTimes(IEnumerable<DateTime> source)
{
    var count = source.Count();
    var ignore = count % 4;

    if (ignore != 0)
    {
        source = source.Take(count - ignore);
    }

    return source.Where((time, index) => index % 4 == 0 || index % 4 == 3);
} 
```

用法：

```
var times = new[]
                {
                    new DateTime(2012, 5, 10, 7, 00, 0),
                    new DateTime(2012, 5, 10, 7, 30, 0),
                    new DateTime(2012, 5, 10, 7, 30, 0),
                    new DateTime(2012, 5, 10, 8, 00, 0),
                    new DateTime(2012, 5, 10, 8, 00, 0),
                    new DateTime(2012, 5, 10, 8, 30, 0),
                    new DateTime(2012, 5, 10, 8, 30, 0),
                    new DateTime(2012, 5, 10, 9, 00, 0),
                    new DateTime(2012, 5, 10, 9, 00, 0),
                    new DateTime(2012, 5, 10, 9, 30, 0)
                };

var result = CutTimes(times);

foreach (var time in result)
{
    Console.WriteLine(time);
} 
```

输出：

> 2012 年 10 月 5 日 07:00:00
> 
> 2012 年 10 月 5 日 08:00:00
> 
> 2012 年 10 月 5 日 08:00:00
> 
> 2012 年 10 月 5 日 09:00:00

# git - 我怎么能在 FETCH_HEAD 之上倒回我的工作

> ID：10526793
> 
> 赞同：4
> 
> 时间：2012-05-10T02:31:32.577
> 
> 标签：git

从远程存储库中提取后，我收到以下消息：

> *   分支开发 -> FETCH_HEAD 首先，倒带 head 在上面重播你的工作... 快进 my_topic 到 f05183b231e55864ae8d99db9456167af3413b6a

那么我怎样才能在 FETCH_HEAD 之上倒回我的工作呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T07:26:12.347

该消息是对 git 已成功完成的确认 - 它不要求您做任何事情。

如果要检查分支是否包含特定提交：

```
git branch --contains <hash> 
```

*它与所问的问题无关，*但如果您想将提交放在其他人之上 - 这就是`git rebase`进来的地方 - 重新排序提交。

例如

```
git checkout master
...
git commit -vam "one"
...
git commit -vam "two"
...
git checkout somebranch
...
git commit -vam "three"
...
git commit -vam "four" 
```

提交 1+2 和 3+4 位于 2 个单独的分支中。让它们按顺序排列：

```
git rebase master 
```

或者，您可以通过执行以下操作来应用单个提交：

```
git cherry-pick <hash> 
```

您可以使用它`git reflog`来查找您认为丢失的任何提交的哈希值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T02:42:24.817

您是否首先添加并提交了自己的所有内容？要检查这一点，请执行

```
git status 
```

如果你不这样做，你应该总是先这样做，然后再尝试拉动。

# java - 将信息从活动传递到服务

> ID：10526797
> 
> 赞同：0
> 
> 时间：2012-05-10T02:32:08.123
> 
> 标签：java, android, android-service, android-activity

我正在使用警报管理器稍后调用服务，我想在用户指定的时间更新文件。该机制运行良好。我现在需要做的是传递给警报调用它的服务，因为我有多个具有不同意图的警报，它们需要在不同的时间做不同的事情。

我了解如何通过捆绑传递额外内容，但它似乎不适用于服务。我不能以这种方式将任何东西传递给它，我不断得到`null`从活动传递给服务的东西。

这是我的 1 个警报的活动代码。

```
Intent myIntent = new Intent(this, TimerService.class);
Bundle bundle = new Bundle();
bundle.putString("extraData", "FIRST_ALARM");
myIntent.putExtras(bundle);    
PendingIntent AmPendingIntent = PendingIntent.getService(this, 0, myIntent, 0);

AlarmManager am = (AlarmManager)getSystemService(ALARM_SERVICE);
am.setRepeating(AlarmManager.RTC_WAKEUP, Time2fire, fONCE_PER_DAY, AmPendingIntent); 
```

服务代码：

```
super.onStart(intent, startId);
String bundleFromActivity = intent.getStringExtra("extraData"); 
```

我已经搜索了很多，但我所看到的没有任何效果。

好的，现在我将其更改为：从我的活动中

```
Intent intent = new Intent(getApplicationContext(), TimerService.class); 
intent.putExtra("someKey", "hifromalarmone");    
PendingIntent myIntent = PendingIntent.getService(getApplicationContext(),0,intent, 0);

AlarmManager am = (AlarmManager)getSystemService(ALARM_SERVICE);
am.setRepeating(AlarmManager.RTC_WAKEUP, Time2fire, fONCE_PER_DAY, myIntent); 
```

从我的服务中，我现在意识到不推荐使用 onstart 并且必须使用 onstartcommand 。

```
public int onStartCommand(Intent intent, int startId, int flags) 
{   
super.onStartCommand(intent, flags, startId);
Bundle extras = intent.getExtras(); 
String data1 = extras.getString("somekey");// intent.getStringExtra("someKey");
return START_STICKY; 
} 
```

你猜怎么着......仍然返回一个空值。我在这里想念什么？？？看起来我没有正确传递一些东西。

好的，所以我想通了……经过大量的挖掘和一点点运气之后，我意识到仅仅更新我意图中的数据是不够的，因为我的原始意图已经在系统中注册了。因此，它从未使用我新传递的数据进行更新。这是关键，（希望有人觉得这很有用）以下代码行是需要更新的 PendingIntent AmPendingINtent = PendingIntent.getService(this,0,myIntent,0); 如果您将最后一个 0 更新为自上次向系统注册以来的其他内容，它会强制意图更新并传递您的捆绑包。

PendingIntent AmPendingINtent = PendingIntent.getService(this,0,myIntent,654654);// 类似这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:48:57.727

在您的第一个场景中

您使用[putExtras](http://developer.android.com/reference/android/content/Intent.html#putExtras%28android.os.Bundle%29)：

```
 myIntent.putExtras(bundle); 
```

你应该使用[putExtra](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20android.os.Bundle%29)：

```
myIntent.putExtra(bundle); 
```

putExtras 用于其他目的，例如跨应用意图或其他用途

* * *

在你的第二种情况下，你把钥匙放在使用中：

```
 "someKey" 
```

然后您尝试使用以下方法检索它：

```
 "somekey" 
```

它们不一样导致你的空值。

* * *

在一个无耻的插件中，我在这里有一个非常好的架构和干净的 OO 通知和服务示例：http: [//blog.blundell-apps.com/notification-for-a-user-chosen-time/](http://blog.blundell-apps.com/notification-for-a-user-chosen-time/)

# ios - ios 密码字段 - 需要在设置包中进行设置

> ID：10526799
> 
> 赞同：0
> 
> 时间：2012-05-10T02:32:30.110
> 
> 标签：ios, passwords, keychain

我的密码已全部启动并正在运行（4 位登录），我需要使该选项正常工作，以便最终用户可以在 settings.bundle 中分配他们的密码。

目前，我知道这并不理想，我有一个简单的 PSTextFieldSpecifier，用户可以在其中输入 4 个数字并使用这些数字登录。

出于安全原因并且无法控制在该字段中输入的内容，它不会这样做。

**我需要在哪里设置屏幕以设置密码？**

干杯杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:55:24.517

设置包应仅用于有限的用例集（因为用户通常不会一次更改单个应用程序设置数月，或者根本不更改），因此，开发人员可以进行有限的控制设置包和它的默认控件。您将需要使用某种应用内设置，这些设置非常容易实现，并允许更轻松、更快速地访问诸如用户名-密码关联之类的变量。 [CocoaControls](http://cocoacontrols.com/)为应用内设置提供了多种简单的框架和模板。我建议您从那里开始搜索。

# javascript - 为什么我不使用此代码获得 ExtJs 消息框？

> ID：10526801
> 
> 赞同：0
> 
> 时间：2012-05-10T02:32:35.467
> 
> 标签：javascript, extjs

```
Ext.application({ 
    name: 'HelloExt', 
    launch: function() { 
        Ext.MessageBox.alert('title', 'msg', Ext.emptyFn); 
    } 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:52:21.873

有任何错误信息吗？我的第一个猜测是您正在使用动态加载，并且在使用之前没有加载 MessageBox：

```
Ext.application({
    name: 'HelloExt',
    requires: ['Ext.window.MessageBox'],
    launch: function() {
        Ext.MessageBox.alert('title', 'msg', Ext.emptyFn);
    }
}); 
```

# c - 如何重新格式化一组文件中出现的所有换行符

> ID：10526803
> 
> 赞同：0
> 
> 时间：2012-05-10T02:32:51.637
> 
> 标签：c, regex, bash, sed, grep

这类似于

[Linux GREP/SED [xargs] 在文件中查找模式和行号并使用 SED 删除](https://stackoverflow.com/questions/10009671/linux-grep-sed-xargs-find-pattern-and-line-number-in-files-and-remove-with-sed)

[如何更改目录中所有文件中所有出现的单词](https://stackoverflow.com/questions/8905662/how-to-change-all-occurances-of-a-word-in-all-files-in-a-directory)

但我在使用 \n 时遇到问题。

我正在尝试删除所有注释（// 和 /**/）和所有换行符，然后在每个 } 和 } 之后插入一个换行符；从一个函数。我还需要忽略预编译器指令。

这一切都是为了每个包含、定义、结构和函数都在自己的行上，以便将一些聚合到一个文件中。--我正在重构一个大型项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:56:23.967

有一个非常有用的程序叫做`indent`，它用于自动缩进 C 源代码。下载它，阅读它的手册页并检查它可以做什么。它可能会解决您的问题...

# scala - Tuple2 和 Pair 是否相同？

> ID：10526808
> 
> 赞同：6
> 
> 时间：2012-05-10T02:33:58.790
> 
> 标签：scala

`Tuple2`类和`Pair`scala之间有区别吗？

在我看来，他们做的事情完全相同。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-10T02:44:43.027

是的。两者都是一样的

```
type Pair[+A, +B] = Tuple2[A, B] 
```

[https://github.com/scala/scala/blob/v2.9.2/src/library/scala/Predef.scala#L1](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/Predef.scala#L1)第227行

# android - （Android恢复）如何让/cache/recovery/command执行更多命令？

> ID：10526811
> 
> 赞同：6
> 
> 时间：2012-05-10T02:34:16.440
> 
> 标签：android, recovery

我想通过恢复从 sdcard 安装 zip，我写了一个名为 command 的文件：

```
--update_package=/sdcard/my-rom.zip 
```

将文件放入`/cache/recovery` 然后运行

```
*adb reboot recovery* 
```

有用。

但如果不是wipe_data，有时会出现android系统的问题。所以我将代码写入命令文件。

```
--wipe_data

--update_package=/sdcard/my-rom.zip 
```

它不工作只运行最后一个命令，而不是wipe_data。

如何让命令按顺序执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-02T22:38:55.397

尝试这个：

-> 缓存/恢复/openrecoveryscript

> 抹掉数据
> 
> 安装 /sdcard/my-rom.zip

# javascript - 当用户输入 HTML该数据存储在哪里？

> ID：10526816
> 
> 赞同：1
> 
> 时间：2012-05-10T02:35:06.963
> 
> 标签：javascript, jquery, html, jquery-ui, javascript-events

我正在编写一个需要与现有不可更改插件一起使用的 jQuery 脚本。该插件侦听输入到 <input type='text'/> 的文本，然后处理结果。我无法改变这一点。我的脚本通过`$('#display).val(newValue);`拖动 jQueryUI 滑块来设置输入的文本。我需要插件将此值识别为由用户键入，以便在`newValue`拖动滑块时对其进行处理。

谁能指出我的写作方向？

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:43:54.007

您必须在文本字段中放置一个 Onchange 侦听器并触发必要的函数来侦听用户的 onchange 值。例如：function func(){.....输入你的逻辑.....}

如果您正在查看更改滑块时从文本字段中读取的值，那么您必须在滑块控件上放置必要的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T02:53:44.197

您可能需要“触发”keyup（或keypressed？）事件，以便触发事件处理程序。

这是一种（有点脏）的方法：

```
var e = jQuery.Event("keyup");
e.which = 50; // # Some key code value
$("#display").trigger(e); 
```

请注意，插件可能正在寻找特定的键，我可能猜错了事件。

更复杂的方法是跟踪插件的事件处理程序，然后直接调用它。FireBug 可以通过逐步调试帮助您找到它。否则，您可以使用 jquery 开始检查输入的事件处理程序。

```
var events = $('#display').data("events");
jQuery.each(events, function(key, handlerObj) {
  console.log(handlerObj); // alert(handlerObj);
}); 
```

找到相关的处理程序后，您可以直接调用它。

高温高压

# javascript - 使用 jQuery，是否可以让它检测到某个链接类并将它们全部打开？

> ID：10526823
> 
> 赞同：2
> 
> 时间：2012-05-10T02:36:20.013
> 
> 标签：javascript, jquery, scripting, automation

假设我想点击一个按钮或一个链接，每页有十个，我想控制/命令点击它们，以便它们加载到新标签中。我每次都这样做，所以我想自动化它。jQuery有没有办法专门针对这些（我知道怎么做），然后让它们在新标签中打开它们？或者这是出于jQuery的能力？

我正在考虑为所有元素创建一个变量，然后遍历这个数组变量的长度，然后“控制/命令”单击所有元素。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T02:41:08.950

一旦获得对链接的 jQuery 引用，您应该能够模拟用户对链接的点击，如下所示：

```
$("a.selectorClass").click(); 
```

链接本身可以指定它们在新窗口或选项卡中打开，但哪个取决于用户的浏览器首选项。我不相信 jQuery 可以控制这些窗口的打开位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T02:42:17.647

我认为这样的事情可能会奏效：

```
$('a.class').each(function(i, obj) {
  window.open(obj.href);
}); 
```

只要他们有`href`属性，反正。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T02:53:36.573

尝试这样的事情：

```
$(document).ready(function() {
    $("a").each(function(){
      window.open($(this).attr('href'),'_blank');
    });
}); 
```

# android - 在 Android 上点击 Web 链接的奇怪行为

> ID：10526828
> 
> 赞同：0
> 
> 时间：2012-05-10T02:37:43.187
> 
> 标签：android, css

我的 HTC Desire Android 默认浏览器中的标准导航栏出现问题。当我尝试点击其中一个超链接时，它的响应速度不是很快，实际导航到另一个页面需要大约 3 或 4 次点击。

一个有趣的观察是，如果我在按下链接的同时继续点击链接，则可以在实际链接本身的上方看到 webkit 的绿色边框。我的第一个停靠点是检查我的 CSS，但没有规则来指示链接上的任何填充。

```
<nav>
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/about/">About Me</a></li>
    <li><a href="/blog/">Blog</a></li>
    <li><a href="/gallery/">Gallery</a></li>
    <li><a href="/contact/">Contact</a></li>
  </ul>
 </nav> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T15:46:42.383

问题似乎来自以下 CSS 规则：

```
text-rendering: optimizeLegibility; 
```

在我的 CSS 中删除此规则可恢复 Android 设备上的点击准确性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:28:37.223

我遇到的一件事是 HttpUrlConnection 缓存旧连接，我猜想试图保持同一个套接字活动？我对此了解不多。无论如何，我添加了以下行：

```
System.setProperty("http.keepAlive", "false");//This line placed before the connection
HttpURLConnection conn = (HttpURLConnection) url.openConnection(); 
```

它似乎摆脱了 Android 试图重用不再有效的旧连接的问题。我在我的应用程序中注意到的一件事是，在一定时间之前，或者每隔一次我尝试从实用程序类中使用这个 HttpUrlConnection 时，应用程序将无响应或崩溃。希望能帮助到你。

# wpf - How can I programmatically navigate (not select, but navigate) a WPF TreeView?

> ID：10526829
> 
> 赞同：0
> 
> 时间：2012-05-10T02:38:00.223
> 
> 标签：wpf, treeview, navigation, keyboard-shortcuts

We're trying to programmatically mimic the way the 'Up' and 'Down' arrow keys navigate around a `TreeView` from code-behind. (Note: Not simply selecting items, but mimicking arrow-key navigation.)

Specifically, our use-case is one of our `TreeView`'s `HierarchicalDataTemplates` has a `TextBox` in it, which of course steals all keyboard activity when focused. But since this is a single-line `TextBox`, we want to basically have it ignore the 'Up' and 'Down' keys and instead pass them to the underlying `TreeView` to be processed there.

To do this, we subclassed the `TextBox` and are intercepting the 'Up' and 'Down' keys in the `OnPreviewKeyDown` override as follows...

```
protected override void OnPreviewKeyDown(System.Windows.Input.KeyEventArgs e)
{
    switch(e.Key)
    {
        case Key.Up:
        case Key.Down:

            // Swallow the key
            e.Handled = true;

            // Get the navigation direction
            var direction = (e.Key == Key.Up)
                ? FocusNavigationDirection.Up
                : FocusNavigationDirection.Down;

            // Perform the navigation
            MoveFocus(new TraversalRequest(direction));

            break;

        default:
            base.OnPreviewKeyDown(e);
            break;

    }
} 
```

This technique works great when the `TextBox` is in a `ListBox`'s `DataTemplate`, but does not work if it's in a `TreeView`'s `HierarchicalDataTemplate`.

Again, don't confuse this with simply selecting items. We already know how to programmatically do that by binding a `TreeViewItem`'s `IsSelected` property to our ViewModel or manually walking the visual tree to get to the `TreeViewItem` we want. I'm specifically asking about *navigating* around the `TreeView`, duplicating what the 'Up' and 'Down' keys do.

For instance, if an earlier sibling has its children expanded and you press up, it goes to the last child of that sibling (or its child's children if it is expanded, etc.) If the earlier siblings children are collapsed, then it goes directly to that sibling. There's additional rules if they are visible or enabled, etc.

We have also tried explicitly setting the focus to the `TreeViewItem` directly and performing `MoveFocus` on that, but that didn't work either. Even tried calling that logic via a dispatcher to make sure the focus had actually changed. Again, nothing.

We also tried playing with `KeyboardNavigation.DirectionalNavigation`, both on the `TreeView` itself as well as against a `TreeViewItem` but still, nothing.

Even if we have to do a `SendKeys`-type of thing, that would be helpful.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:03:22.990

One of the possible way is to use **TreeListBox** implementation of [Avalon Control Library](http://avaloncontrolslib.codeplex.com/), or similar to this (your own, for example). As you mentioned, you can apply your technique for **ListBox**, so I think it would be easy for you to apply it to **TreeListBox**, which is derived directly from **ListBox**.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:31:03.467

The WPF UI Automation framework probably has a way to do it. But if that doesn't pan out, this project coded something to do it:

[http://wpfsendkeys.codeplex.com/](http://wpfsendkeys.codeplex.com/)

# objective-c - 是否可以实时播放 AudioQueue 中的音频？

> ID：10526835
> 
> 赞同：3
> 
> 时间：2012-05-10T02:38:33.770
> 
> 标签：objective-c, ios, networking, tcp, audioqueue

我需要从麦克风获取音频并使用 tcp 连接传递到其他设备。我不确定是否可以从 AudioQueue 播放 AudioBuffer。

目前我正在使用以下代码获取缓冲区：

```
 void AudioInputCallback(
    void *inUserData, 
    AudioQueueRef inAQ, 
    AudioQueueBufferRef inBuffer, 
    const AudioTimeStamp *inStartTime, 
    UInt32 inNumberPacketDescriptions, 
    const AudioStreamPacketDescription *inPacketDescs)
  {
    AudioRecorder *self = (AudioRecorder *)inUserData;

    if(!self.recordState.recording)
    {
      NSLog(@"[ AudioRecorder ] AudioInputCallback not recording");
      return;
    }

    if(inNumberPacketDescriptions > 0)
    {
      NSData *data =  [[NSData alloc] initWithBytes:inBuffer->mAudioData length:inBuffer->mAudioDataByteSize * 2];
      [self.delegate didReceivedAudioData:data];
      [data release];
    }

  } 
```

这个块只是将 mAudioData 推送到 NSData，NSData 是在设备之间传输数据的关键数据类型。

现在我不知道如何在其他设备上运行这个 mAudioData。另一件事是如何连续获取音频，当所有缓冲区已满时，我不再接收数据，只需要清理我猜的缓冲区。

欢迎任何想法，谢谢！

# c++ - 转移大数字

> ID：10526840
> 
> 赞同：2
> 
> 时间：2012-05-10T02:39:28.317
> 
> 标签：c++, linked-list, bit-manipulation, biginteger, shift

`X = 712360810625491574981234007851998`用链表表示，每个节点是一个`unsigned int`

[![712360-810625491-574981234-007851998的链表](../Images/84f8bab26c847d0dd061372aeca86201.png)](https://i.stack.imgur.com/QkOnv.png)

除了有什么快速的方法吗？~~`X << 8`~~ `X << 591`~~`X * 2^8`~~ `X * 2^591`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-03T12:40:22.463

任意位数的位移都非常容易。只需记住将溢出的位移动到下一个元素。就这样

下面是一个左移 3 的例子

```
uint64_t i1, i2, i3, o1, o2, o3; // {o3, o2, o1} = {i3, i2, i1} << 3;

o3 = i3 << 3 | i2 >> (32 - 3);
o2 = i2 << 3 | i1 >> (32 - 3);
o1 = i1 << 3; 
```

右移类似，只是反向迭代。

# 编辑：

似乎**您使用以 10 ⁹**为底的大数，因此二进制移位不适**用于**此处。在基数 B 中“移动”左/右 N 位数字相当于*将数字分别乘以 B ^N和 B ^(-N)*。你不能在十进制中进行二进制移位，反之亦然

如果您不更改基数，那么您只有一个解决方案，那就是将数字乘以 2 ^(591)。如果您想像二进制一样转换，您必须更改为[2 的幂的基数，](https://stackoverflow.com/q/23840565/995714)例如基数 2 ^(32)或基数 2 ^(64)

一个通用的解决方案是这样的，四肢存储在 little-endian 中，每个数字都在 base 2 ^(CHAR_BIT*sizeof(T))

```
template<typename T>
void rshift(std::vector<T>& x, std::size_t shf_amount) // x >>= shf_amount
{
    constexpr std::size_t width = CHAR_BIT*sizeof(T);
    if (shf_amount > width)
        throw;

    const std::size_t shift     = shf_amount % width;
    const std::size_t limbshift = shf_amount / width;

    std::size_t i = 0;
    for (; i < x.size() - limbshift - 1; ++i)
        x[i] = (x[i + limbshift] >> shift) | (x[i + 1 + limbshift] << (width - shift));
    x[i++] = x[i + limbshift] >> shift;
    for (; i < x.size() ; ++i)
        x[i] = 0;
} 
```

此外，从标签来看，您可能使用链表来存储肢体，由于元素分散在内存空间周围，它对缓存不友好，并且由于*下一个*指针，它也浪费了大量内存。事实上，你不应该在大多数现实生活中的问题中使用链表

*   [Bjarne Stroustrup 说我们必须避免使用链表](https://stackoverflow.com/q/34170566/995714)
*   [为什么你永远不应该在你的代码中再次使用链表](https://kjellkod.wordpress.com/2012/02/25/why-you-should-never-ever-ever-use-linked-list-in-your-code-again/)
*   [数字运算：为什么你永远不应该在你的代码中再次使用链表](https://www.codeproject.com/articles/340797/number-crunching-why-you-should-never-ever-ever-us)
*   [Bjarne Stroustrup：为什么你应该避免使用链表](https://www.reddit.com/r/programming/comments/25xpre/bjarne_stroustrup_why_you_should_avoid_linked/)
*   [列表是邪恶的吗？——Bjarne Stroustrup](https://isocpp.org/blog/2014/06/stroustrup-lists)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-07T23:32:43.890

我认为，如果您使用 64 位整数，则代码应该是

```
 o3 = i3 << 3 | i2 >> (32 - 3);
    ..... 
```

# c++ - 我的链接列表程序有效，但它不会显示所有列表

> ID：10526841
> 
> 赞同：3
> 
> 时间：2012-05-10T02:39:32.953
> 
> 标签：c++

我的链接列表程序有效，但它不会显示所有列表

这是我的代码当用户输入名称和贡献时，它会将其存储在列表中。当我打印出列表时，仅显示用户输入的姓氏。我认为它在我的 AddToList 函数中是问题谢谢

```
#include <string>

using namespace std;

struct PersonRec
{
    char aName[20];
    //string aName;
    int aBribe;
    PersonRec* link;
};

class PersonList
{

private:
    PersonRec *head;
    bool IsEmpty();

public:
    PersonList();
    ~PersonList();
    void AddToList();
    void ViewList();

};

#include <iostream>
#include <string>

using namespace std;

#include "personlist.h"

PersonList::PersonList()
{
    head = NULL;
}

PersonList::~PersonList()
{
    PersonRec *current, *temp;
    current = head;
    temp = head;
    while(current != NULL)
    {
        current = current->link;
        delete temp;
        temp = current;
    }
}

bool PersonList::IsEmpty()
{
    //PersonRec *p;

    if(head == NULL)//it has no nodes head will poin to NULL
    {
        return true;
    }

    else
    {
        //p = head;
        return false;
    }
}

void PersonList::AddToList()
{
    PersonRec *p;

    head = new PersonRec();   

    //if(head == NULL)
    //{
    if(!IsEmpty())
    {
        //head = new PersonRec();

        cout<<"Enter the person's name: ";
        cin.getline(head->aName, 20);
        //cin>>head->aName;
        cout<<"Enter the person's contribution: ";
        cin>>head->aBribe;
        //head->link = NULL;
        //}
    }    

    else
    {
        p = head;
        while(p->link != NULL)
            p = p->link;
        p->link = new PersonRec();
    }

}//end function

void PersonList::ViewList()
{
    PersonRec *p;
    p = head;

    if(IsEmpty())
    {
        cout<<"List is Empty "<<endl;
    }

    while(p != NULL)
    {
        cout<<p->aName<<" "<<"$"<<p->aBribe<<endl;
        p = p->link;
    }

}

#include <iostream>
#include "personlist.h"

using namespace std;

int displayMenu (void);
void processChoice(int, PersonList&);

int main()
{
    int num;

    PersonList myList;
    do 
    {
        num = displayMenu();
        if (num != 3)
            processChoice(num, myList);
    } while (num != 3);

    return 0;
}

int displayMenu(void)
{
    int choice;
    cout << "\nMenu\n";
    cout << "==============================\n\n";
    cout << "1\. Add student to waiting list\n";
    cout << "2\. View waiting list\n";
    cout << "3\. Exit program\n\n";
    cout << "Please enter choice: ";
    cin >> choice;

    cin.ignore();
    return choice;
}

void processChoice(int choice, PersonList& p)
{
    switch(choice)
    {
    case 1: p.AddToList();
        break;
    case 2: p.ViewList();
        break;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T02:49:28.380

想一想：`head`是指向列表中第一项的指针，而您要做的第一件事`AddToList()`是：

```
head = new PersonRec(); 
```

当您以这种方式覆盖时，您*认为**当前*列表会发生什么？`head`

`head`在你准备好之前不要改变。基本的伪代码是：

```
newnode = new PersonRec;             # Don't overwrite head yet.
# Populate newnode with payload.
newnode-> next = head                # Put current list at end.
head = newnode                       # Now you can change it. 
```

那就是如果您希望新节点位于列表的开头。如果你最后想要它，它会有点复杂，因为你要么必须：

*   遍历列表寻找最后一个节点，以便您可以将新节点附加到它；或者
*   保留指向最后一个节点的指针，以避免遍历。

但细节保持不变：在您可以通过其他方式访问当前列表之前，*不要破坏您的头指针。*

* * *

我应该提一下，根据您在 中注释掉的代码`AddToList()`，您似乎非常接近。在为真的`head` *情况*下进行设置。`isEmpty()`但是您似乎已经对此发表了评论，并将该`head = new ...`位移到了声明*之外/之前*`if`。不确定你的思维过程到底发生了什么。

看起来您尝试做的事情是：

```
if isEmpty:
    head = new PersonRec;
    p = head
else:
    p = head
    while p->next != NULL:
        p = p->next
    p->next = new PersonRec;
    p = p->next

# Here, p is a pointer to the new node (head or otherwise)
# and the list is stable

p-> payload/link = whatever/null 
```

最后一行也很重要，您的代码似乎并非在所有情况下都这样做（即，除了在列表中创建初始节点时）。

* * *

减少与语言无关的内容会给您带来类似（未经测试）的东西：

```
void PersonList::AddToList() {
    PersonRec *p;

    if(!IsEmpty()) {
        p = head = new PersonRec();
    } else {
        p = head;
        while (p->link != NULL)
            p = p->link;
        p->link = new PersonRec();
        p = p->link;
    }

    cout << "Enter the person's name: ";
    cin.getline (p->aName, 20);

    cout << "Enter the person's contribution: ";
    cin >> p->aBribe;

    p->link = NULL;
} 
```

# javascript - jquery - 如何在窗口卸载时获取鼠标坐标？

> ID：10526843
> 
> 赞同：2
> 
> 时间：2012-05-10T02:40:11.750
> 
> 标签：javascript, jquery

卸载窗口时有没有办法获取鼠标坐标？我已经尝试了以下方法（在 Firefox 中），但它似乎并没有让我从中`e`获得太多`type`收益`unload`。

```
$(window).unload(function(e) {
    var evt=window.event || e;
    alert(evt.pageX); // or screenX or clientX or whatever
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T02:51:38.190

在这种情况`unload`下，不包括鼠标坐标。( [http://jsfiddle.net/DerekL/wtp9X/](http://jsfiddle.net/DerekL/wtp9X/) )

![在此处输入图像描述](../Images/2ee12b58c22b1803d1e1d9d1e6016f48.png)

但是，如果您想要一个*hacky*解决方案，您可以连续跟踪用户的鼠标位置并使用`unload`.

[http://jsfiddle.net/DerekL/gYEhF/](http://jsfiddle.net/DerekL/gYEhF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:41:30.113

```
$(window).unload(function(e) {
    var evt = window.event || e;
    alert(evt.x + ',' + evt.y);//Also clientX.layerX,pageX,screenX, depending on what you want
}); 
```

# jquery - jquery 祖先后代选择在 IE7 中不起作用？

> ID：10526846
> 
> 赞同：0
> 
> 时间：2012-05-10T02:40:14.950
> 
> 标签：jquery, jquery-selectors, internet-explorer-7

我的代码是：

```
<!DOCTYPE html>
<html>
<head>
    <title>Demo</title>
    <meta charset="utf-8"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function(){
            $("#table1 tr:gt(0) input[type='checkbox']").bind("click",function(){
                var id=  $(this).attr("id");
                var name=$(this).parent().next("td").text();

                if($(this).is(":checked")){
                    $("#table2").append("<tr id="+id+"><td>"+name+"</td></tr>");
                }
                else{
                    $("#table2 #"+id).remove();//why this not work in IE7?
                    //$("#"+id,$("#table2")).remove();//this work well
                }   
            })
        });
    </script>
</head>
<body>
    One:
    <table id="table1" border="1">
        <tbody>
            <tr><th></th><th>name</th></tr>
            <tr><td><input type="checkbox" id="Checkbox1" /></td><td>jim</td></tr>
            <tr><td><input type="checkbox" id="Checkbox2" /></td><td>tom</td></tr>
        </tbody>
    </table>
    <br/>
    Two:
    <table id="table2" border="1">
        <tbody>
            <tr><th>name</th></tr>
        </tbody>
    </table>
</body>
</html> 
```

这段代码很简单，如果table1复选框被选中，将td添加到table2，否则从table2中删除td，但`$("#table2 #"+id).remove();`在ie7中不起作用，我将其替换为`$("#"+id,$("#table2")).remove();`它可以正常工作。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T02:49:31.207

这个问题是 IE7 特有的，可能是因为它不支持`querySelectorAll`，所以使用了 Sizzle。

从外观上看，您正在创建一个与现有元素共享相同 ID 的新元素。ID 必须是唯一的，因此当存在欺骗时，您不能指望 DOM 选择起作用。

```
// Here you're getting the ID of the element that was clicked
var id=  $(this).attr("id");
var name=$(this).parent().next("td").text();

if($(this).is(":checked")){

     // Here you're creating a new element with the same ID!!!
    $("#table2").append("<tr id="+id+"><td>"+name+"</td></tr>");
}
else{
    $("#table2 #"+id).remove();//why this not work in IE7?
    //$("#"+id,$("#table2")).remove();//this work well
} 
```

但你说这行得通：

```
$("#"+id,$("#table2")).remove(); 
```

这可能是因为 Sizzle 正在这样做：

```
var el = document.getElementById('table2'); 
```

然后是这样的：

```
el.getElementsByTagName('*') 
```

后跟 ID 过滤器。这只是一个猜测，但无论如何它并不相关，因为必须首先解决重复的 ID。

# python - 如何覆盖继承/子对象中的related_name？

> ID：10526847
> 
> 赞同：2
> 
> 时间：2012-05-10T02:40:40.187
> 
> 标签：python, django, orm

给定以下模型：

```
class Module(models.Model):
    pass
class Content(models.Model):
    module = models.ForeignKey(Module, related_name='contents')

class Blog(Module):
    pass
class Post(Content):
    pass 
```

我希望能够获得博客拥有的所有“帖子”对象，例如：

```
b = Blog.objects.get(pk=1)
b.posts.all() 
```

但是，我还没有想出一个好的方法来做到这一点。我不能使用`b.contents.all()`，因为我需要`Post`实例而不是`Content`实例。我永远不会有根内容对象，每个内容对象都将被子类化，但我不能使用抽象类，因为我想要一个包含所有内容的中央表，然后会有 content_blog 等所有表独特的继承内容。

我也试过这样做

```
class Content(models.Model):
    module = models.ForeignKey(Module, related_name='%(class)') 
```

但据我所知，那失败得很惨。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:04:44.643

最简单的方法可能是向 Blog 模型添加一个方法以返回 Post 查询集，如下所示：

```
class Blog(Module):
    def _get_posts(self):
        return Post.objects.filter(module=self)
    posts = property(_get_posts) 
```

问题是您必须为每个子模型添加方法。related_name[似乎](https://docs.djangoproject.com/en/dev/topics/db/models/#be-careful-with-related-name)只适用于抽象基类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:45:04.713

我想到了这个解决方案：

```
# ...

class Blog(Module):
    @property
    def posts(self):
        return self.contents

class Post(Content):
    pass 
```

这样，做与做`blog.posts`是一样的`blog.contents`：

```
>>> blog = Blog.objects.get(pk=1)
>>> blog.posts.all()
# [ ... ] 
```

# android - Android应用程序中的拼写检查器

> ID：10526848
> 
> 赞同：0
> 
> 时间：2012-05-10T02:40:45.803
> 
> 标签：android

spellChecker 是否与拼写校正器相同？如何实现 spellChecker 以在自动完成文本框中检查我的 android 应用程序的用户输入？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T08:13:12.297

Android 有自己的[拼写检查框架](http://developer.android.com/guide/topics/text/spell-checker-framework.html)，您可以将其集成到您的应用程序中。实现起来相当简单，示例代码可在 SpellChecker 下的 sdk 中找到。运行时请记住先安装 SampleSpellCheckerService，然后再安装 HelloSpellChecker apk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-17T11:13:25.007

是的，拼写检查器和自动完成文本框是不同的。您可以使用`onGetSuggestions()`, `onGetSentenceSuggestions()`override 方法来实现您的 spellChecker 应用程序。

# git - 不小心删除了 .git 文件夹

> ID：10526849
> 
> 赞同：1
> 
> 时间：2012-05-10T02:41:03.513
> 
> 标签：git, heroku

我正在按照 Heroku 上的说明尝试找出我的应用程序的 slug 大小

> 您的 slug 大小会在成功编译结束时显示。您可以通过重新检出您的应用程序、删除 .git 目录并运行 du -hsc 来粗略估计本地 slug 的大小。
> 
> $ 杜 -hsc | grep 总计 2.9M 总计

通过“新签出您的应用程序”，我认为这意味着只需执行 git checkout -b test。所以我这样做了，然后我 rm -rf .git 删除 .git 文件夹。并做了 du -hsc 来获得我的蛞蝓大小。我确实明白了，但是当我尝试 git checkout master 时。它说我在这个文件夹中没有 git 存储库。-- 现在我确实将我的应用程序 git push 到了 heroku 上的一个位置和 github 上的一个位置。我有没有可能，好吧，说白了，让事情恢复到我删除 .git 文件夹之前的状态？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T02:47:06.670

我不确定我是否完全理解你的意思，但听起来你可以`git clone`把它找回来。

两种选择：

## 1.如果你有遥控器，你可以再次克隆它。

（或者）

## 2\. 如果您在本地有未提交的更改，则移动它们，进行克隆，将更改的文件复制回目录，然后提交并推送。

# jquery - 表单现在在第一个表单下方以第二个表单加载错误

> ID：10526853
> 
> 赞同：-3
> 
> 时间：2012-05-10T02:41:22.543
> 
> 标签：jquery, django, forms, append, clone

出于某种原因，在更改了我的代码之后：

```
<script type="text/javascript">
$(document).ready(function(){

    $("recipebutton1").click(function(){
        $('#create_form_span').css('display', 'none');
        $("#recipe_display").replaceWith($('recipepopup1').css('display','block'));
    });
    $("#recipebutton2").click(function(){
        $('#create_form_span').css('display', 'none');
        $("#recipe_display").replaceWith($('#recipepopup2').css('display','block'));
    });
    $("#recipebutton3").click(function(){
        $('#create_form_span').css('display', 'none');
        $("#recipe_display").replaceWith($('#recipepopup3').css('display','block'));
    });
    $("#recipebutton4").click(function(){
        $('#create_form_span').css('display', 'none');
        $("#recipe_display").replaceWith($('#recipepopup4').css('display','block'));
    });
    $("#recipebutton5").click(function(){
        $('#create_form_span').css('display', 'none');
        $("#recipe_display").replaceWith($('#recipepopup5').css('display','block'));
    });
    $("#recipebutton6").click(function(){
        $('#create_form_span').css('display', 'none');
        $("#recipe_display").replaceWith($('#recipepopup6').css('display','block'));
    });
    $(".create").click(function(){
        $('.recipepopup').css('display', 'none');
        $('#create_form_span').css('display', 'block');
        });
});
</script> 
```

对此：

```
<script type="text/javascript">
$(document).ready(function(){
    $("#recipebutton1").click(function(){
        $('#create_form_span').css('display', 'none');
        $(".recipepopup").css('display','none');
        $("#recipe_display").empty();
        $('#recipepopup1').clone().attr('id','clone1').css('display','block').appendTo('#recipe_display'); // append to where you want

    });
    $("#recipebutton2").click(function(){
        $('#create_form_span').css('display', 'none');
        $(".recipepopup").css('display','none');
        $("#recipe_display").empty();
        $('#recipepopup2').clone().attr('id','clone2').css('display','block').appendTo('#recipe_display'); // append to where you want
    });
    $("#recipebutton3").click(function(){
        $('#create_form_span').css('display', 'none');
        $(".recipepopup").css('display','none');
        $("#recipe_display").empty();
        $('#recipepopup3').clone().attr('id','clone3').css('display','block').appendTo('#recipe_display'); // append to where you want
    });
    $("#recipebutton4").click(function(){
        $('#create_form_span').css('display', 'none');
        $(".recipepopup").css('display','none');
        $("#recipe_display").empty();
        $('#recipepopup4').clone().attr('id','clone4').css('display','block').appendTo('#recipe_display'); // append to where you want
    });
    $("#recipebutton5").click(function(){
        $('#create_form_span').css('display', 'none');
        $("#recipe_display").empty();
        $('#recipepopup5').clone().attr('id','clone5').css('display','block').appendTo('#recipe_display'); // append to where you want
    });
    $("#recipebutton6").click(function(){
        $('#create_form_span').css('display', 'none');
        $(".recipepopup").css('display','none');
        $("#recipe_display").empty();
        $('#recipepopup6').clone().attr('id','clone6').css('display','block').appendTo('#recipe_display'); // append to where you want
    });
    $(".create").click(function(){
        $("#recipe_display").empty();
        $('#create_form_span').css('display', 'block');
        });
});
</script> 
```

已经成功了，所以我的表单现在只是不断地在当前表单下加载一个新表单

谁能想到为什么会发生这样的事情？它把我逼疯了！

凯蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:06:48.170

我不知道是什么导致表单在自身下方不断加载，但我能够通过将 html 加载到 div 而不是追加/替换来解决问题

这工作得很好，我很高兴我现在知道如何使用 jquerys .html 功能

# jsf-2 - FacesException：启用选择时，DataModel 必须实现 org.primefaces.model.SelectableDataModel

> ID：10526857
> 
> 赞同：7
> 
> 时间：2012-05-10T02:41:49.273
> 
> 标签：jsf-2, primefaces

我正在尝试学习 PF，所以我首先显示数据表并导航到 rowClick 传递参数的下一页，但遇到以下错误。我发现这个问题有类似的问题，但还没有运气。我希望有人能帮助我。

我收到以下错误：

```
DataModel must implement org.primefaces.model.SelectableDataModel when selection is enabled.

Caused by:
javax.faces.FacesException - DataModel must implement org.primefaces.model.SelectableDataModel when selection is enabled. 
```

我的页面：

```
 <?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">

<h:head>
<title>Primefaces 3.1</title>

</h:head>
<h:body>
    <h:form id="form">          
            <p:dataTable value="#{tableBean.cars}" var="var" rowkey="#{var.model}" 
            selection="#{tableBean.car}" selectionMode="single">
            <p:column>  <f:facet name="header">
                                <h:outputText styleClass="outputText" value="Model"></h:outputText>
                            </f:facet>
                            <h:outputText styleClass="outputText"
                                value="#{var.model}"></h:outputText>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                <h:outputText styleClass="outputText" value="Color"></h:outputText>
                            </f:facet>
                            <h:outputText styleClass="outputText"
                                value="#{var.randomColor}"></h:outputText>
                        </p:column></p:dataTable>                               
        </h:form>
</h:body>
</html> 
```

我的豆类：

```
@ManagedBean
@ViewScoped
public class TableBean extends ListDataModel<Car> implements SelectableDataModel<Car>{

    private List<Car> cars;
    private Car car;

    public List<Car> getCars() {

        cars = new ArrayList<Car>();
        Car car1 = new Car();
        car1.setModel("BMW");
        car1.setRandomColor("Black");
        cars.add(car1);
        Car car2 = new Car();       
        car2.setModel("Audi");
        car2.setRandomColor("White");
        cars.add(car2);

        return cars;
    }

    public String onRowSelect(){
        System.out.println("Row Click!!!");
        return "otherpage";//Does this nav works???if not how???
    }

    public Car getCar() {
        return car;
    }

    @Override
    public Car getRowData(String pArg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public Object getRowKey(Car pArg0) {
        // TODO Auto-generated method stub
        return null;
    }   
    } 
```

其他豆类：

```
public class Car{

    private String model;   
    private String randomColor; 

    public String getRandomColor() {
        return randomColor;
    }
    public void setRandomColor(String pRandomColor) {
        randomColor = pRandomColor;
    }

    public String getModel() {
        return model;
    }
    public void setModel(String pModel) {
        model = pModel;
    }

} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-10T03:06:48.090

如果您没有`#{tableBean.cars}`在.`SelectableDataModel``rowKey``<p:dataTable>`

但是，您已经实现了它`#{tableBean}`。这个不对。[您可以在PrimeFaces 展示](https://www.primefaces.org/showcase/ui/data/datatable/selection.xhtml)中找到正确的示例。基本上，`TableBean`根据展示代码示例，您的类必须如下所示：

```
@ManagedBean
@ViewScoped
public class TableBean implements Serializable {

    private List<Car> cars;
    private Car car;
    private CarDataModel carsModel;

    public TableBean() {
        cars = new ArrayList<Car>();
        // Populate cars here and thus NOT in the getter method!
        carsModel = new CarDataModel(cars);
    }

    // ...
} 
```

`CarDataModel`看起来像这样（再次，只是从 PrimeFaces 展示代码示例复制）：

```
public class CarDataModel extends ListDataModel<Car> implements SelectableDataModel<Car> {  

    public CarDataModel() {
    }

    public CarDataModel(List<Car> data) {
        super(data);
    }

    @Override
    public Car getRowData(String rowKey) {
        List<Car> cars = (List<Car>) getWrappedData();

        for(Car car : cars) {
            if(car.getModel().equals(rowKey))
                return car;
        }

        return null;
    }

    @Override
    public Object getRowKey(Car car) {
        return car.getModel();
    }

} 
```

最后使用`#{tableBean.carsModel}`而不是`#{tableBean.cars}`作为 的值`<p:dataTable>`。就像在展示示例中一样。

```
<p:dataTable value="#{tableBean.carsModel}" var="car" ... /> 
```

另一种更简单的方法是仅`rowKey`在`<p:dataTable>`.

```
<p:dataTable value="#{tableBean.cars}" var="car" rowKey="#{car.model}" ... /> 
```

这样你就不需要整个`SelectableDataModel`. 您只需要确保它`null`在各行中永远是唯一的。另请参阅[启用选择时 DataModel 必须实现 org.primefaces.model.SelectableDataModel ，但我已经定义了 rowKey](https://stackoverflow.com/questions/13342524/datamodel-must-implement-org-primefaces-model-selectabledatamodel-when-selection/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-22T12:56:59.363

确保在填充数据表的“value=..”的 bean 方法中设置 rowKey 参数。我的返回此错误，因为 rowKey 为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-26T14:18:09.217

您不必在 managedbean 中实现数据模式，只需在数据表的属性中指定“rowkey”，如下所示： rowkey="{mbean.atribute1}"
-- atribute1 必须显示在数据表列中。

# 必须

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T18:12:55.590

它适用于我的项目，使用组合键作为行键，例如：rowKey="#{course.getCompositeKey()

由于我没有compositeKey 变量，我只是在我的课程类（在你的情况下是汽车类）中创建了一个。2 个主键是字符串，所以我只是说 this.compositeKey=this.courseNumber+this.product--您只需使用 Car 类中的任何 2 个主键，而不是 courseNumber 和 product。

# php - 这个 jquery ajax 帖子有什么问题？

> ID：10526866
> 
> 赞同：0
> 
> 时间：2012-05-10T02:42:52.783
> 
> 标签：php, jquery, ajax, forms, post

我正在尝试发布一些表单数据并返回结果，但我无法让它工作：

的JavaScript：

```
<script type="text/javascript">
    $(document).ready(function () {

        $("#sendthis").click(function () {

            $.ajax({
                type: "POST",
                data: $('#theform').serialize(),
                cache: false,
                url: "form.php",
                success: function (data) {

                    alert(data);

                }
            });

            return false;

        });

    });
</script> 
```

的HTML：

```
<form id="theform">
    <input type="text" class="sized" name="name" id="name"><br />
    <input type="text" class="sized" name="email" id="email">
</form>

<a href="#" id="sendthis">Submit</a> 
```

要发布到的页面（form.php）：

```
<?php
if (isset($_POST['name'])){
    $result = $_POST['name'];
}

echo $result;
?> 
```

现在，我的理解是，当表单提交时，它会发布到form.php，并且“name”的输入值会在一个警告框中返回。但是，我似乎无法正确发布（或返回）表单数据。

有问题`$('#theform').serialize()`吗？也许还有别的？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:47:16.170

如果在发布期间遇到问题，我会在您的 ajax 请求中添加一个错误回调以捕获。您是否有像 firebug 这样的调试器，可以显示发布的数据（以及发布的位置）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T02:58:58.433

试试这个，看看它是否有效

```
<form id="theform" action="/form.php">
    <input type="text" class="sized" name="name" id="name"/><br />
    <input type="text" class="sized" name="email" id="email" /><br />
    <input type="submit" name="submit" value="Submit" />
</form> 
```

jQuery

```
$("#theform").on('submit', function () {
    $.post($(this).attr('action'), $(this).serialize(), function(data) {
        alert(data);
    });
    return false;   
}); 
```

# mysql - 我需要使用插入连接还是内部连接？

> ID：10526869
> 
> 赞同：1
> 
> 时间：2012-05-10T02:43:28.003
> 
> 标签：mysql, join

我正在使用 MySQL 版本 5。我有两个结构如下所示的表。

**表格1**

```
From     To     Time     TravelTime 
```

**表2**

```
From    To      Time     CongestionTime 
```

我想实现以下输出。

如果`From`,`To`和`Time`在两个表中都相等，则赋值`TravelTime = CongestionTime`

*Table2*仅包含*Table1*`From | To | Time`中可用组合的子集。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:57:17.370

from是mysql的保留字。如果您不想转义它，请将列名“From”更改为“TimeFrom”。

```
UPDATE table1,table2
SET table1.TravelTime=table2.CongestionTime
WHERE table1.From = table2.From
AND table1.To = table2.To 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:48:05.833

```
Update Table1 Set Table1.TravelTime = Table2.CongestionTime
FROM Table2
WHERE Table1.From = Table2.From
      AND Table1.To = Table2.To
      AND Table1.Time = Table2.Time 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T02:48:38.160

```
update table1
set traveltime = congestiontime
from table1
inner join table2 on table1.from = table2.from 
and table1.to = table2.to 
and table1.time = table2.time 
```*

# php - Android 到 PHP 错误 - 未识别索引

> ID：10526871
> 
> 赞同：1
> 
> 时间：2012-05-10T02:43:38.183
> 
> 标签：php, android

当通过 android 向 php 服务器发送数据时，我遇到了这个错误：“注意：未定义的索引：IT in C:\xampp\htdocs\hello.php on line 4”。搞砸了几个小时后，我无法解决我的问题。

你好.php：

```
<?php
mysql_connect("localhost","user","pass");
mysql_select_db("mmo");
$r=mysql_query("update players set X = '".$_REQUEST['IT']."' where 22=22");
if(!$r)
echo "Error in query: ".mysql_error();
mysql_close();
header('Refresh: 0.01; URL=http://localhost/hello.php');
?> 
```

android中的更新方法：

```
public void UpdateSeverWithPlayer()
{List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();  
nameValuePairs.add(new BasicNameValuePair("IT","3"));
try{
     HttpClient httpclient = new DefaultHttpClient();
     HttpPost httppost = new HttpPost("http://10.0.2.2/hello.php");
     httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

     HttpResponse response = httpclient.execute(httppost);
     HttpEntity entity = response.getEntity();
     is = entity.getContent();
     }catch(Exception e){
         Log.e("log_tag", "Error in http connection"+e.toString());
    }} 
```

我正在使用 android 模拟器并且确实拥有互联网许可。一如既往的帮助非常感谢。编辑1：看来问题出在android而不是php代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:54:24.323

你没有以某种方式正确地发送你的查询字符串，所以`$_REQUEST['IT']`在 PHP 端没有。做一个`var_dump($_REQUEST)`看看发生了什么。或者更好的是，不要使用 $_REQUEST。这有点不安全。最好使用与您的 HTTP 方法直接相关的超全局变量 _GET 或 _POST。

同样，`Refresh`标题是非标准的。它会起作用，但你不应该依赖它。HTTP 级别重定向使用 Location: 标头。Refresh：是一个非标准的老式 Netscape 扩展。

# google-app-engine - mapreduce - 找不到具有作业 ID 的 MR

> ID：10526872
> 
> 赞同：0
> 
> 时间：2012-05-10T02:43:45.017
> 
> 标签：google-app-engine, mapreduce

我正在运行 Java mapreduce。我收到以下异常
/admin/mapreduce/mapperCallback java.lang.RuntimeException：找不到具有作业 ID 的 MR：

mapreduce.xml 中的参数
mapreduce.mapper.inputprocessingrate = 100
mapreduce.mapper.shardcount = 1

过去曾在此处询问过此异常，但没有适当的答复。

-阿斯瓦特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T13:24:36.863

这在迈克的帮助下得到了解决。我在 map() 中使用命名空间，并且在调用结束时我没有重置为空命名空间。

# websphere - Websphere Application Server 中使用的安全属性“服务器用户身份”是什么？

> ID：10526875
> 
> 赞同：1
> 
> 时间：2012-05-10T02:43:54.303
> 
> 标签：websphere

在为 Websphere Application Server 配置全局安全性时，无论您选择 Federated Repositories、LDAP 注册表还是自定义注册表，都需要设置一个名为“服务器用户身份”的属性。根据官方的解释，这是用于服务器到服务器通信期间的身份验证。这是否意味着当服务器在一个单元内相互通信时，需要身份验证并且该值将在那里使用？这个值是否只影响内部流程，比如在同一个单元格内？或者它也可以在细胞之间？如果不以这种方式利用它，那么“服务器用户身份”如何工作？

这个有点看不懂 请帮我弄清楚。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:43:46.647

在 WAS 6 之前，管理访问和内部进程通信都需要一个用户身份，即“主要管理用户”。根据定义，该用户必须存在于配置的用户注册表中。

从版本 6.1 开始，WAS 需要一个管理用户，区别于服务器用户身份，以便可以单独审计管理操作。

出于所有实际目的，如果您使用的是 6.1+ 版本，并且您不在混合版本单元中（除了当前版本之外，还包含旧版本 WAS 的配置文件的单元），您可以继续使用自动生成的内部用户 ID . 内部生成的服务器 ID 还为服务器环境增加了更高级别的保护，因为服务器密码不会暴露。

对于混合发布单元，您可以[在此处](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Ftsec_interoperaten.html)查看信息中心，了解在这种情况下如何配置服务器用户 ID 的详细信息。

服务器用户 ID 用于单元中的服务器到服务器通信。我找不到任何暗示此参数也与跨单元通信有关的文档。

# android - 为什么App不会自动安装在Android模拟器中

> ID：10526880
> 
> 赞同：1
> 
> 时间：2012-05-10T02:45:05.473
> 
> 标签：android, eclipse

[我按照http://developer.android.com/resources/tutorials/hello-world.html](http://developer.android.com/resources/tutorials/hello-world.html)上的教程进行操作

按下运行后，模拟器会出现并显示主菜单以供解锁。但不会安装 Hello Android 应用程序。

我在网上搜索并尝试了许多建议，但大多数都失败了。我感到绝望。使其工作的唯一方法是启动模拟器并杀死 adb.exe，在 adb.exe 恢复后，它将安装应用程序。但是，它并非每次都有效。

这是一个错误吗？有人知道原因吗？如果 Eclipse 是可选的，例如 Eclipse，我可以切换另一个...

这是我的一些配置：

```
- Windows Xp
- Android SDK r19 on D:\
- ADT v18
- Eclipse in C:\
- Workspace in D:\ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:48:09.817

尝试

1.  重启你的电脑

2.  跑

    adb 卸载 your.package

3.  启动 Eclipse 并运行应用程序

4.  解锁模拟器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:50:25.673

我认为您可以尝试下载新的 Eclipse 并再次安装 ADT-Plugin for Eclipse。我猜你之前的安装有问题。

# java - Android应用程序中的单词检查器

> ID：10526893
> 
> 赞同：1
> 
> 时间：2012-05-10T02:46:52.767
> 
> 标签：java, android, algorithm

我想做一个需要 WordsChecker 的安卓文字游戏。使用检查器的类似应用有：Word With Friends，Scramble With Friends，......您可以去Google Play，下载并安装该应用程序，然后尝试使用它。

目前我不知道编写类似于这些应用程序的 WordsChecker，我已经研究了一下，但有些解决方案对我来说并不好。

有人有想法么？你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T04:10:08.507

如果您使用 trie 数据结构（google it），则可以有效地找到单词，并且存储复数和其他时态的成本可以忽略不计。

trie 是从根节点开始的树结构。每个孩子都由一个字母索引，因此每个节点都对应到此时的单词。每个节点中的标志表明这是否是一个完整的单词。

要找到像“汽车”这样的词，从根开始，穿过 C 链接到一个节点，然后穿过 A 链接到下一个节点，然后再穿过 R 链接到下一个节点。此时，该节点被标记为一个完整的单词 (CAR)，但您仍然可以通过 S 链接到达代表 CARS 的节点，该节点也被标记为一个完整的单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:26:11.477

经过一番谷歌搜索后，我找不到执行此操作的类，但您可以做的是调用一个网站，例如 dictionary.com，并将单词作为参数的一部分。刮掉 html 并检查这个词是否真的存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T03:58:38.970

我在 java 网站上找到了这本字典。我不知道它有多“好”，例如将其与“官方拼字游戏”单词表进行比较。

Trie 数据结构可能是矫枉过正。我自己还没试过。（双关语似乎是不可避免的，所以很抱歉。）您可以考虑将单词转换为数字形式（不过，字符串的 hashCodes 可能很好）并将它们存储在 hashset 中。我说 hash SET 是因为你真正需要知道的是成员资格。我所知道的测试列表成员是否存在的最快方法是尝试将其添加到 HashSet：如果失败，则它已经是成员。如果它成功了，那么它不是一个词，不要忘记删除它！

我在玩 Boggle 的各个方面时使用了这种编程策略，并用它来制作单词频率列表，给定特定的 Boggle 立方体。

If there is a structure that pertains to your search, e.g., you know you are going to be searching in a certain order, not random access, then a more structured approach like a trie makes good sense for optimization. But consider also, a turn-based word game hardly requires blazing performance! (KISS)

What grouchiness to vote the question down! I found it difficult to get traction on this problem when I was first getting into this subject, so I have some sympathy for the original poster. I'm giving the question +1 to counterbalance this.

# ruby - 黄瓜“放入”后钩子不输出任何东西

> ID：10526894
> 
> 赞同：17
> 
> 时间：2012-05-10T02:47:02.257
> 
> 标签：ruby, cucumber

在 Cucumber 中，在我的`env.rb`文件中，我设置了一个 before & after 挂钩（嗯，其中一些，一些链接到特定标签）但是发现当我在其中放入后挂钩时不会输出任何内容`puts`。

例如，这有效：

```
Before do
  puts "before the scenario"
end 
```

但这不是：

```
After do
  puts "after the scenario"
end 
```

似乎 after 钩子确实运行了（因为在 after 钩子中有一个特定的行有问题，在尝试调试它时，我发现了这个问题）但它们只是没有输出任何东西。

我所有的搜索都证明是徒劳的，找不到其他有类似问题的人。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-10T10:50:24.180

Cucumber 会覆盖类`puts`中的消息，`RbWorld`以便使用编写的任何内容都`puts`可以正确地广播到所有格式化程序。在`pretty`格式化程序的情况下，它们进入一个`delayed_messages`集合，直到它调用`print_messages`，它似乎在打印每个步骤名称之后执行，大概是这样消息似乎嵌套在生成它们的步骤下。

由于某种原因，漂亮的格式化程序中没有最终调用`print_messages`，我不确定这是遗漏还是故意的，因为在输出中包含虚假消息看起来不那么“漂亮”。

有趣的是，如果您添加第二个场景，当第二个场景运行时，您会看到“在场景之后”打印为第一条消息，这就是正在运行的`delayed_messages`集合。

综上所述，你没有做错，只是 Cucumber 劫持了`puts`方法。如果您对这些消息的格式不太在意，那么您可以替换`puts`为`STDOUT.puts`绕过 Cucumber 的格式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-10T05:40:08.293

```
 Before do
     p "Go!"
     puts "Go!"
 end

 After do
     p "Stop!"
     puts "Stop!"
     $stdout.puts "Stop!"
 end 
```

此代码段的输出可能有助于理解为什么 'puts' 在 After hook 中不起作用。

# java - 选择算法有时会返回错误的结果

> ID：10526908
> 
> 赞同：1
> 
> 时间：2012-05-10T02:48:10.207
> 
> 标签：java, algorithm

对于家庭作业问题，我需要编写一个 Java 方法来查找数组中第 k 个最小的数，使用快速排序样式的分区。我得到了 partition() 方法，我应该编写该方法来获得第 k 个最小的数字。

问题要求枢轴始终是数组范围中最右边的元素。

我得到了以下信息：

```
public int partition(int left, int right, long pivot) {
    int leftPtr = left - 1;
    int rightPtr = right + 1;
    while (true) {
        while (leftPtr < right && array[++leftPtr] < pivot); 
        while (rightPtr > left && array[--rightPtr] > pivot);

        if (leftPtr >= rightPtr)
            break;
        else
            swap(leftPtr, rightPtr);
    }
    return leftPtr;
} 
```

我已经根据[维基百科的伪代码](https://en.wikipedia.org/wiki/Selection_algorithm#Partition-based_general_selection_algorithm)编写了这个方法：

```
public int kthSmallest(int left, int right, int k){
    if(left >= right){
        return array[left];
    }

    int pivotNewIndex = partition(left, right, array[right]);

    int pivotDist = pivotNewIndex - left - 1;

    if(pivotDist == k){
        return array[pivotNewIndex];
    } else if(k < pivotNewIndex){
        return kthSmallest(k, left, pivotNewIndex - 1);
    } else{
        return kthSmallest(k - pivotDist, pivotNewIndex + 1, right);
    }
} 
```

但是当我`kthSmallest()`用随机生成的整数数组调用时，大约有一半的时间它返回了错误的值。例如：

```
array: [45, 60, 24, 82, 87, 79, 16, 32, 59, 83, 20, 2, 1, 
         50, 11, 79, 72, 32, 0, 48, 69, 74, 22, 6, 96]
expected result when k=4: 11
actual result when k=4: 87 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:37:51.893

与维基百科伪代码相比，仔细查看您对 kthSmallest 的递归调用。k 索引参数相对于哪里？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T03:46:16.750

您的递归调用的参数列表顺序错误。您正在查看的子数组中的位置应该是第三个参数，而不是第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T20:33:29.210

这是一个有效的解决方案（使用 Java 实现）：[http ://blog.teamleadnet.com/2012/07/quick-select-algorithm-find-kth-element.html](http://blog.teamleadnet.com/2012/07/quick-select-algorithm-find-kth-element.html)

# html - 如何摆脱页面上的滚动条？

> ID：10526910
> 
> 赞同：3
> 
> 时间：2012-05-10T02:48:13.630
> 
> 标签：html, css

我知道这个问题的答案很简单，但我有一个非常简单的 HTML 页面，有 3 个 div - header、map_canvas 和 sidebar。我有一些 CSS 可以将所有这些放在需要的地方。但是由于某种原因，我在浏览器窗口中得到了滚动条，我不希望它们在那里，我只是希望页面能很好地适应窗口的高度和宽度。任何帮助深表感谢。

我的页面由以下 HTML 组成：

```
<!doctype html>
<html>
    <head>
        <title>CSS Exercise</title>
        <link rel="stylesheet" href="css/style.css" />
        <script src="js/script.js"></script>
    </head>
    <body onload="initialize()">
        <div class="header"></div>
        <div id="map_canvas"></div>
        <div class="sidebar">
            <input id="lat" type="text" />
            <input id="lng" type="text" />
        </div>
    </body>
</html>​ 
```

这个CSS：

```
body {
    height: 100%;
    width: 100%;
}

html {
    height: 100%;
}

.header {
    width: 100%;
}

#logo {
    display: block;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 8px;
}

.sidebar {
    float: right;
    width: 20%;
    height: 100%;
    text-align: center;
}

#map_canvas {
   float: left;
   width: 80%;
   height: 100%;
}​ 
```

[JSFiddle 链接](http://jsfiddle.net/VTR5H/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T02:50:27.073

这将隐藏任何溢出并防止显示滚动条。

```
body {
  overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:51:11.260

添加`overflow:hidden,`到您的`body`CSS 声明中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T02:51:22.340

解决此问题的一种简单方法是`overflow-x: hidden;`在`body`标签内使用。

# wpf - 带有大图像的 BitmapSource MemoryStream 泄漏

> ID：10526915
> 
> 赞同：3
> 
> 时间：2012-05-10T02:49:47.813
> 
> 标签：wpf, .net-4.0, memorystream, bitmapimage, bitmapsource

我正在处理超过 1 GB 的图像文件，`Bitmap`从一个大文件创建一个`BitmapSource`并尝试处理原始`BitmapSource`. `BitmapSource`留在记忆中。通常这是一个不便，因为它最终会被收集，但是对于这些大文件，立即清除内存是必要的：

```
System.Drawing.Bitmap bitmap;
using (MemoryStream outStream = new MemoryStream())
{
    BitmapEncoder enc = new BmpBitmapEncoder();
    enc.Frames.Add(BitmapFrame.Create(bitmapsource)); //large image
    enc.Save(outStream);
    bitmapsource = null;

    Bitmap temp = new System.Drawing.Bitmap(outStream);
    bitmap = temp.Clone(new Rectangle(0, 0, bm.Width, bm.Height), bm.PixelFormat);
    temp.Dispose();
}

GC.Collect();
GC.Collect();

//both bitmap and bitmapsource remain in memory 
```

[我在这里](http://code.logos.com/blog/2008/04/memory_leak_with_bitmapimage_and_memorystream.html)遇到了一种解决方法，但它`BitmapSource`仍然持续到管道的后期。

# wpf - xaml wpf 使用同一 xaml 文件中的资源

> ID：10526916
> 
> 赞同：1
> 
> 时间：2012-05-10T02:49:50.243
> 
> 标签：wpf, xaml, resources

我正在使用 xaml 资源，如下所示：

```
<local:MyUIElement x:Key="MyUI" />

<ControlTemplate TargetType="{x:Type local:MyControl}" x:Key="MyXC">
    <Grid>
      ........
      ........
      <MyUI />

    </Grid> 
```

我可以做这样的事情吗？在同一个 xaml 文件的其他资源中直接使用资源“MyUI”。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:01:53.810

Key 只是*对象元素*的一个*属性*。正如 Content 是 Button 的一个属性一样。所以你不能使用 <MyUI> 代替使用 <local:MyUIElement>

 *资源存储为字典，键用于识别其中的对象。所以在代码中你可以做这样的事情，比如说，点击按钮改变控制模板。

obj = this.Resources["MyXC"] as ControlTemplate;*

# c# - 对后台 Silverlight 异常进行故障排除

> ID：10526918
> 
> 赞同：1
> 
> 时间：2012-05-10T02:50:01.083
> 
> 标签：c#, silverlight, xaml, argumentnullexception

在我的 Silverlight 5 应用程序中，我得到一个没有有用堆栈跟踪的 ArgumentNullException。我只是看到：

```
System.ArgumentNullException occurred
Message=Value cannot be null.
Parameter name: key
StackTrace:
   at System.Collections.Generic.Dictionary`2.FindEntry(TKey key)
   at System.Windows.dll!MS.Internal.JoltHelper.FireEvent(System.IntPtr unmanagedObj, System.IntPtr unmanagedObjArgs, int argsTypeIndex, int actualArgsTypeIndex, string eventName, uint flags) + 0x31b bytes 
```

尽我所能，我找不到任何未捕获的异常来捕获！我已经禁用了 Just My Code，我将调试器设置为 Break on Thrown 以处理所有异常，并且我已经在我的代码中寻找可能发生这种情况的任何地方。我只是找不到任何方法来弄清楚它来自哪里。它必须是应用资源的后台 Silverlight 线程，或者以其他方式自动执行某些操作，但我不知道是什么。

具体方案是通过 XAML 或通过代码创建控件。通过 XAML，它们可以正常工作。当我通过代码创建它们时，我得到了这个神秘的异常。

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T06:36:46.057

我遇到了同样的问题，我找出了我的案例失败的确切原因。我们正在使用 Telerik`RadRichTextBoxRibbonUI`控件，并且有人为 XAML`{x:Null}`中的`ApplicationName`属性分配了值。当我用`{x:Null}`字符串值替换时，问题就解决了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T16:35:44.923

在字典上使用锁以确保在任何给定时间只有一个线程在访问它。当多个线程访问同一个字典并损坏它时，可能会发生此异常，从而导致内部结构在存储桶中具有空条目。

[这个 Dictionary<TKey, TValue> 异常怎么可能发生？](https://stackoverflow.com/questions/2283455/how-is-this-dictionarytkey-tvalue-exception-possible)

# java - 如果您在 Java 中编写模拟器，您会使用整数或字节作为 CPU 寄存器和内存吗？为什么？

> ID：10526936
> 
> 赞同：-3
> 
> 时间：2012-05-10T02:53:01.300
> 
> 标签：java, emulation

首先是的，我知道整数比字节更原生，并且字节上的所有数学和逻辑运算实际上都是在整数上完成的。这当然意味着如果使用字节，就会有扩大和缩小的成本。然而，在平衡方面，这也意味着内存字节确实保存字节，而不是可能大于字节值的值，例如 256。

我猜在这两种情况下都有优点和缺点，但我会寻求意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T02:55:54.663

我会使用最容易模拟相关硬件的任何类型。

如果它是一台 8 位计算机，那可能是字节。对于像 x86-64 这样的东西，我想长（64 位）会更有意义。在这两种情况下，选择的大小更可能匹配寄存器操作和 cpu 和内存之间传输的数据“字”的大小：

> 所有通用寄存器（GPR）都从 32 位扩展到 64 位，所有算术和逻辑运算、内存到寄存器和寄存器到内存的操作等现在都可以直接对 64 位整数进行操作。堆栈上的推送和弹出总是以 8 字节的步幅进行，指针的宽度为 8 字节。

[来自维基百科](https://en.wikipedia.org/wiki/X86-64#Architectural_features)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:20:39.607

当我编写 mips 处理器时，我使用类 BitSet 来保存各个位，以便使用子集方法轻松拆分位数组。我写了一个类来将它们从 int 到 bitset 来回转换，这样我就可以对整数进行算术运算。

这不是一种性能有效的方法，但在这种情况下，这并不重要。

# database-design - 创建和删除数据库关系以获得更快的性能

> ID：10526938
> 
> 赞同：0
> 
> 时间：2012-05-10T02:53:22.377
> 
> 标签：database-design, relational-database

我在关系数据库中的想法：

我可以使用 InnoDB 引擎创建主数据库/主数据库，其中我的表具有主键和索引，然后当我在 php 中完成业务逻辑编码时

问题一：

我可以克隆数据库（主）然后删除它们的关系特征，如主键和索引。

这样克隆将用于生产优化/更快的事务，而主/主将仅用于编码/开发/错误跟踪？

所以我也只能使用（主）数据库来查看使用 SQLYog 的数据库关系图，而不是在生产数据库中。

问题2。

是否有执行此操作的工具，我可以将实时数据从生产表迁移/导出到开发表。这样在进行测试时我会使用实时数据操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:58:27.730

1) 是的，当然您可以有两个包含相同数据的表，但一个缺少关系功能。但是，除非您同时更新它们，否则您的表将不同步。

2) 如前所述，您可以在插入/删除/更新数据时更新两个表，或者在发生更改时让它们自动同步。我自己从未这样做过，但您可能会在[此处](https://stackoverflow.com/questions/3942380/how-can-i-synchronize-two-mysql-tables-that-have-same-structures-and-different-s)找到适合您需求的答案，尽管该答案特定于不同服务器上的表。我也相信 SQLYog 能够保持表同步。

# c++ - 在 C++ 中使用表达式模板进行符号微分

> ID：10526950
> 
> 赞同：9
> 
> 时间：2012-05-10T02:54:26.623
> 
> 标签：c++, templates, template-meta-programming

如何在 C++ 中使用表达式模板实现符号微分

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T05:38:44.513

通常，您需要一种表示符号的方法（即编码 eg 的表达式模板`3 * x * x + 42`），以及可以计算导数的元函数。希望您对 C++ 中的元编程足够熟悉，知道它的含义和含义，但可以给您一个想法：

```
// This should come from the expression templates
template<typename Lhs, typename Rhs>
struct plus_node;

// Metafunction that computes a derivative
template<typename T>
struct derivative;

// derivative<foo>::type is the result of computing the derivative of foo

// Derivative of lhs + rhs
template<typename Lhs, typename Rhs>
struct derivative<plus_node<Lhs, Rhs> > {
    typedef plus_node<
        typename derivative<Lhs>::type
        , typename derivative<Rhs>::type
    > type;
};

// and so on 
```

然后，您将两个部分（表示和计算）捆绑起来，以便使用。例如`derivative(3 * x * x + 42)(6)`，可能意味着“计算`3 * x * x + 42`x 在 6 处的导数”。

但是，即使您确实知道编写表达式模板需要什么以及用 C++ 编写元程序需要什么，我也不建议您这样做。模板元编程需要大量样板文件并且可能很乏味。相反，我将您引向天才[Boost.Proto](http://www.boost.org/doc/libs/1_49_0/doc/html/proto.html)库，该库专门用于帮助编写 EDSL（使用表达式模板）并在这些表达式模板上进行操作。学习使用它不一定容易，但我发现学习如何在不使用它的情况下实现相同的目标*更难*。这是一个实际上可以理解和计算的示例程序`derivative(3 * x * x + 42)(6)`：

```
#include <iostream>

#include <boost/proto/proto.hpp>

using namespace boost::proto;

// Assuming derivative of one variable, the 'unknown'
struct unknown {};

// Boost.Proto calls this the expression wrapper
// elements of the EDSL will have this type
template<typename Expr>
struct expression;

// Boost.Proto calls this the domain
struct derived_domain
: domain<generator<expression>> {};

// We will use a context to evaluate expression templates
struct evaluation_context: callable_context<evaluation_context const> {
    double value;

    explicit evaluation_context(double value)
        : value(value)
    {}

    typedef double result_type;

    double operator()(tag::terminal, unknown) const
    { return value; }
};
// And now we can do:
// evalutation_context context(42);
// eval(expr, context);
// to evaluate an expression as though the unknown had value 42

template<typename Expr>
struct expression: extends<Expr, expression<Expr>, derived_domain> {
    typedef extends<Expr, expression<Expr>, derived_domain> base_type;

    expression(Expr const& expr = Expr())
        : base_type(expr)
    {}

    typedef double result_type;

    // We spare ourselves the need to write eval(expr, context)
    // Instead, expr(42) is available
    double operator()(double d) const
    {
        evaluation_context context(d);
        return eval(*this, context);
    }
};

// Boost.Proto calls this a transform -- we use this to operate
// on the expression templates
struct Derivative
: or_<
    when<
        terminal<unknown>
        , boost::mpl::int_<1>()
    >
    , when<
        terminal<_>
        , boost::mpl::int_<0>()
    >
    , when<
        plus<Derivative, Derivative>
        , _make_plus(Derivative(_left), Derivative(_right))
    >
    , when<
        multiplies<Derivative, Derivative>
        , _make_plus(
            _make_multiplies(Derivative(_left), _right)
            , _make_multiplies(_left, Derivative(_right))
        )
    >
    , otherwise<_>
> {};

// x is the unknown
expression<terminal<unknown>::type> const x;

// A transform works as a functor
Derivative const derivative;

int
main()
{
    double d = derivative(3 * x * x + 3)(6);
    std::cout << d << '\n';
} 
```

# ios - 发布事件处理程序？

> ID：10526952
> 
> 赞同：0
> 
> 时间：2012-05-10T02:55:03.253
> 
> 标签：ios, events, release, handler

也许我只是想多了，但是有没有办法捕捉用户何时松开 iOS 的按钮？所以为了更好地提出我的问题：我在屏幕上有一个按钮，当用户放开它时，我想调用一个事件。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:02:41.190

尝试回答，我也想知道同样的想法..

来自 Apple 文档：UIControl 类 [http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html)

我的想法子类 UI 控件使用以下任务：

– beginTrackingWithTouch:withEvent:

– continueTrackingWithTouch:withEvent:

– endTrackingWithTouch:withEvent:

– 取消跟踪事件：

在 beginTrackingWithTouch 处放置一个 BOOL isBegin = YES 以知道它已被触摸。然后当 endTrackingWithTouch 发生（即用户端触摸控件）时，执行您将在其中执行的操作，然后将 isBegin 设置为 NO

问候，

FHW

# r - 矩阵列表上的 R 冒号运算符

> ID：10526954
> 
> 赞同：2
> 
> 时间：2012-05-10T02:55:11.523
> 
> 标签：r, list, collections, matrix, indexing

我在 R 中创建了一个矩阵列表。在列表中的所有矩阵中，我想“拉出”特定索引的矩阵元素的集合。我在想冒号运算符可能允许我在一行中实现这一点。例如，这里尝试访问列表中所有矩阵的 [1,1] 元素：

```
myList = list() #list of matrices
myList[[1]] = matrix(1:9, nrow=3, ncol=3, byrow=TRUE) #arbitrary data
myList[[2]] = matrix(2:10, nrow=3, ncol=3, byrow=TRUE)

#I expected the following line to output myList[[1]][1,1], myList[[2]][1,1]
slice = myList[[1:2]][1,1] #prints error: "incorrect number of dimensions" 
```

上述代码的最后一行抛出错误“维度数不正确”。

作为参考，这是我正在尝试做的工作（但不太优雅）的实现：

```
#assume myList has already been created (see the code snippet above)
slice = c()
for(x in 1:2) {
    slice = c(slice, myList[[x]][1,1])
}
#this works. slice = [1 2] 
```

有谁知道如何在一行中完成上述操作？

请注意，我的“矩阵列表”可以替换为其他内容。如果有人可以建议允许我执行上述操作的替代“矩阵集合”数据结构，那么这将得到解决。

也许这个问题很愚蠢......我真的很想有一个干净的单行实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T03:12:47.083

两件事情。`[`首先，和的区别`[[`。相关句子来自`?'['`：

> [、[[ 和 $ 之间最重要的区别是 [ 可以选择多个元素，而其他两个选择单个元素。

所以你可能想这样做`myList[1:2]`。其次，您不能以您描述的方式组合子集操作。完成后，`myList[1:2]`您将获得两个矩阵的列表。列表通常只有一个维度，因此`myList[1:2][1,1]`在您的情况下这样做是荒谬的。（有关例外情况，请参阅注释。）

你可以试试`lapply`：`lapply(myList,'[',1,1)`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T06:50:59.120

如果您的矩阵都具有相同的维度，则可以将它们存储在 3 维数组中。这肯定会使索引和提取元素更容易......

```
## One way to get your data into an array
a <- array(c(myList[[1]], myList[[2]]), dim=c(3,3,2))

## Extract the slice containing the upper left element of each matrix
a[1,1,]
# [1] 1 2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T04:14:19.433

这有效：

```
> sapply(myList,"[",1,1)
[1] 1 2 
```

编辑：哦，对不起，我在较早的答案结束时看到了几乎相同的想法。但无论如何， sapply 可能更接近你想要的

# java - Hibernate @NotNull（仅当另一个属性不为空时？）

> ID：10526960
> 
> 赞同：0
> 
> 时间：2012-05-10T02:56:06.623
> 
> 标签：java, hibernate, validation, orm

我的表格中有一些部分，如果勾选“是”，则其子部分成为强制性的。

我怎样才能做到这一点？

```
@NotNullIfOtherPropertyNotNull(PropertyName='OtherProperty')
private myProperty; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:14:02.633

作为类型级别的约束，这很容易做到。您只需创建类似的东西

```
@CascadingNotNull(ifNotNull="otherProperty", thenAlsoNotNull="myProperty") 
```

如果你把它放在类上，那么在你的 ConstraintHandler 中你可以使用你喜欢的任何风格的反射/bean 库来获取这两个属性并进行检查。

# iphone - 使用 sqlite3 时出现编译错误：具有“保留（或强）”属性的属性必须是对象类型

> ID：10526961
> 
> 赞同：3
> 
> 时间：2012-05-10T02:56:39.867
> 
> 标签：iphone, objective-c, ios, sqlite

当我尝试声明 sqlite3 对象时，在下面的代码中出现编译错误。“数据库”不是对象类型吗？为什么会发生这种情况，我该如何解决？

```
#import <Foundation/Foundation.h>
#import <sqlite3.h>

@interface BasicDao : NSObject

@property (nonatomic, retain) sqlite3 *database;  //error : Property with 'retain (or strong)' attribute must be of object type

@end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T03:02:53.660

`sqlite3 *database`不是指向 Objective-C 对象的指针，而是指向[`struct sqlite3`](http://www.sqlite.org/c3ref/sqlite3.html). 您不能`retain`/`release`它，因为内存不是由 Objective-C 运行时管理的。使用`assign`而不是`retain`.

# node.js - Node.js 初学者问题

> ID：10526963
> 
> 赞同：2
> 
> 时间：2012-05-10T02:57:18.890
> 
> 标签：node.js

我最近一直在玩 node.js。我真的很喜欢它，并且想认真考虑建立一个我想到的网站。我有几个问题。我目前正在使用 express、cluster、mongoose(mongodb) 和dust，因为看起来社区在这个设置上做得很好。

我遇到的第一个问题是在应用程序中进行更改。如果我更改了我的应用程序中的一个文件（模板除外），我必须重新启动应用程序才能显示更改。有什么东西可以自动执行此操作，还是我遗漏了什么？

我的第二个问题是，是否有任何人可以推荐的非常好的资源。似乎我通过谷歌找到的很多东西只是解释了一个主题，而且还没有很多关于它的书（尽管今年发布了一些好书）。我想知道是否有一个非常好的节点应用程序资源（对人们如何构建应用程序以及他们正在使用什么非常感兴趣）。

第三个问题或我想得到的真正反馈是我应该为我的应用程序寻找哪些好的节点模块。我真的很喜欢集群和运行 apache 基准测试与没有它相比，我看到使用所有 4 个内核时它可以处理的请求数量比仅使用单核时增加了一倍。我想尝试保留我的代码，这样我就不必为后端/前端编写两次逻辑，这就是为什么我决定使用灰尘作为我的模板选择。

我想知道的最后一件事是基于我阅读的linkedin 的一篇文章（http://engineering.linkedin.com/frontend/leaving-jsps-dust-moving-linkedin-dustjs-client-side-templates） . 读完这篇文章后，我对他们提出的独创性印象深刻。通过节省服务器上的带宽而不必每次服务器处理文件并让用户浏览器完成负载，我从中看到了很多好处。它还可以通过不每次都将整个模板发送到浏览器并缓存它来减少带宽吞吐量。但我只是对他们如何做到这一点感到困惑。有人可以对这个主题有所了解，或者如果您知道一篇解释如何做到这一点的好文章，那就太好了。

感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:56:00.367

第一个问题：实际上从[nodemon](https://github.com/remy/nodemon)到[supervisor有多种工具可以完成这项工作](https://github.com/isaacs/node-supervisor)

第二题： **学习资料**

*   视频：[nodetuts](http://nodetuts.com/)

*   书籍：[来自节点初学者](http://www.nodebeginner.org/)和[更多书籍](http://www.readwriteweb.com/hack/2011/04/6-free-e-books-on-nodejs.php)

*   播客：[nodeup](http://nodeup.com/)

*   很多伟大的博主：[laurenzo](http://stella.laurenzo.org/2011/03/bulletproof-node-js-coding/) | [Peteris Krumins 关于有用的 nodejs 模块](http://www.catonmat.net/series/node-js-modules-you-should-know-about)| [dailyjs](http://dailyjs.com/)等等

*   分组模块：[toolbox.no.de](http://toolbox.no.de/)（未知原因现在无法正常工作）

    不要忘记 nodejs 文档。此外，浏览 github 和阅读优秀的 nodejs 模块或应用程序的源代码也非常适合学习。

第三个问题：我认为我的第二个问题的答案也包括这个。

# multithreading - 多线程中的 Spring HibernateTemplate

> ID：10526966
> 
> 赞同：0
> 
> 时间：2012-05-10T02:57:58.737
> 
> 标签：multithreading, spring, hibernate

我在 Struts 操作中有一个方法来处理发送系统消息，所以我使用 Executors.newCachedThreadPool() 来调用一个新线程运行它，但是当我再次操作发送时，线程似乎已经死了。这是我的代码：

```
 public String  sendMessage(){
    if(!validateSystemMessage(systemMessage)){
        return ERROR;
    }
    systemMessage.setEnable(false);
    systemMessage.setContent(systemMessage.getContent());
    systemMessage.setTitle(systemMessage.getTitle());
    systemMessage.setMessageTime(new Date());
    systemMessageDao.saveOrUpdate(systemMessage);
    **ExecutorService executor = Executors.newCachedThreadPool();
    SendMessage sendMessage=new SendMessage(systemMessage.getSmId());
    LOGGER.info("-- systemMessage---"+systemMessage.getSmId());
    sendMessage.setSystemMessageDao(systemMessageDao);
    sendMessage.setUserMessageDao(userMessageDao);
    String[] ids = userIds.split(",");
    LOGGER.info("-- ids.length---"+ids.length);
    sendMessage.setUserIds(ids);
    executor.submit(sendMessage);**
    systemMessage=null;
    message=SUCCESS;
    return SUCCESS;
}

public class SendMessage implements Callable<Boolean>{
          @Override
    public Boolean call() throws Exception{
        SystemMessage msg = null;
              msg = this.systemMessageDao.findSystemMessageById(msgId);
        List<Long> userIdsSended = this.userMessageDao.findUserIdsByMsgId(msgId);//thread seemed be dead here
        List<Long> listUserIds = new ArrayList<Long>();
        for (String userId : userIds) {
            Long id=Long.valueOf(userId);
            if (userIdsSended != null && userIdsSended.contains(id)) {
                continue;
            }
            listUserIds.add(id);
        }
        if (listUserIds != null && !listUserIds.isEmpty()) {
            this.userMessageDao.save(msgId, listUserIds);
        }
        msg.setEnable(true);
        this.systemMessageDao.saveOrUpdate(msg);
        return true;
    }
}

public SystemMessage findSystemMessageById(Long smId) {
        List<SystemMessage> list = this.getHibernateTemplate().find("from SystemMessage systemMessage where systemMessage.smId = ?", new Object[] { smId });
        return list.size() != 0 ? list.get(0) : null;
    } 
```

如果我在几分钟后再次发送，它运行正常，我认为不同之处在于 newCachedThreadPool 运行一个新线程。但是为什么在一个线程中它不能再次运行？是 hibernateTemplate 还是 session 的问题？

# php - 如何在 PHP 中取消设置 cookie？

> ID：10526967
> 
> 赞同：22
> 
> 时间：2012-05-10T02:58:02.723
> 
> 标签：php, session, cookies, session-cookies

我需要弄清楚如何取消设置这个 cookie。到目前为止，我尝试的一切都失败了。

这就是我目前正在取消它的方式，它似乎不起作用。

```
setcookie("user_id", $user_id, time() - 7200); 
```

我是这样设置的：

```
setcookie("user_id", $user_id, time() + 7200); 
```

我调用了这个函数`set_session_from_cookie()`来检查是否设置了 cookie，如果设置了，它会使用 cookie 启动一个新会话。

问题是当我在我的页面上使用它时，我无法注销。我认为这是因为我无法取消设置会话。

我有这个功能的原因是如果用户想在他们结束会话后被记住，他们可以通过调用 cookie 重新启动会话。

```
function set_session_from_cookie()
{
    if (isset($_SESSION['user_id'])) {
        echo '';
    } else {
        $_SESSION['user_id']=$_COOKIE['user_id'];
    }
} 
```

登出：

```
<?php
require'core.php';
session_destroy();

setcookie("user_id", "", time() - 7200);
header('Location:/social_learning/site_pages/starter-template.php'); 
```

我使用以下代码设置我的 cookie：

```
if ($rememberme == "on") {
    $user_id = mysql_result($query_run, 0, 'id');
    setcookie("user_id", $user_id, time() + 7200);
    $_SESSION['user_id'] = $user_id;
    redirect('home_page.php');
} else {
    if ($rememberme == "") {
        echo 'ok';
        $user_id = mysql_result($query_run, 0, 'id');
        echo $user_id;
        $_SESSION['user_id'] = $user_id;
        redirect('home_page.php');
    }
} 
```

如何在不使用我创建的功能的情况下使用保存的 cookie 重新启动会话？由于该功能似乎导致用户无法再注销。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-10T03:06:35.920

[将 cookie 的过期日期设置为过去的某个时间（例如，在epoch](http://en.wikipedia.org/wiki/Unix_time)之后一秒）。

`setcookie("yourCookie", "yourValue", 1);`

这将导致 cookie 过期。

`1`用于代替`0`，因为`0`将 cookie 设置为在会话结束时过期。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-10T05:05:51.977

这个问题的解决方案是我需要设置正确的路径来取消设置 cookie，因为我是从我最初设置的不同文件中取消设置它。

我通过在浏览器 cookie 中查找 cookie 找到了需要用于未设置的路径，一旦在浏览器中找到 cookie，该路径就会列在 cookie 附近。所以我然后像这样设置cookie的路径：

```
setcookie("user_id", $user_id, time() - 1, "/social_learning/site_pages"); 
```

最后一个参数是路径。它奏效了。

我原来的`setcookie`样子是这样的：

```
setcookie("user_id", $user_id, time() + 7200, ""); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-10T03:09:57.040

关于您的代码几乎没有安全问题，但是要回答您的问题，要在 php 中取消设置 cookie，您需要做的就是将过期时间设置为过去的某个时间：

```
setcookie("user_id", "", time()-10, "/"); 
```

“loginform.php”不是一个有效的域，这可能是这里的问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-10T03:09:21.373

查看 php 手册以获取有关 setcookie 的信息

[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

这些注释应解释该过程：

```
bool setcookie ( string $name [, string $value [, int $expire = 0 [, string $path [, string $domain [, bool $secure = false [, bool $httponly = false ]]]]]] ) 
```

> 必须使用与设置相同的参数来删除 Cookie。如果 value 参数是空字符串或 FALSE，并且所有其他参数都与先前对 setcookie 的调用匹配，则将从远程客户端删除具有指定名称的 cookie。这是通过将值设置为“已删除”并将到期时间设置为过去一年来在内部实现的。
> 
> 因为设置值为 FALSE 的 cookie 会尝试删除 cookie，所以不应使用布尔值。相反，使用 0 表示 FALSE，使用 1 表示 TRUE。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-11T14:09:49.853

使用此代码

```
 setcookie("CookieName", "", time()-(60*60*24), "/"); 
```

在每个网站上每次都为我工作

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-10T03:14:40.533

在 php 手册中，您可以通过设置过期日期来删除 cookie：

```
setcookie("key","",time()-3600); 
```

在某些情况下，您应该为参数提供路径和域。

事实上，如果您分配一个带有空字符串的 cookie，它也会被取消设置：

```
setcookie("key",""); 
```

# sql-server - 如何在 SQL Server 中获取正在运行的作业中的已执行步骤信息？

> ID：10526972
> 
> 赞同：1
> 
> 时间：2012-05-10T03:00:05.563
> 
> 标签：sql-server, jobs

我们希望将作业历史记录到一个名为 的表中`JobHistory`。我们的解决方案可能如下。

在作业中设置三个步骤。

第一步调用sp，它将开始时间，作业名称，作业ID和其他作业信息写入`JobHistory`.

第二步调用执行实际工作的 sp。

第三步调用sp，获取第二步的执行信息，如持续时间、错误信息、执行输出、更新结束时间`JobHistory`。

这个解决方案有效吗？如果有效，如何在第三步中获取第二步的执行信息？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:58:05.923

你的方法对我来说看起来不错。

[在 SQL-Server 2008+ 中，您可以使用系统视图sys.dm_exec_procedure_stats](http://msdn.microsoft.com/en-us/library/cc280701.aspx)获取有关 Duration、LastExecutionTime、逻辑读取和写入的信息

```
select eps.object_id, eps.last_execution_time, eps.execution_count, eps.last_worker_time/1000 as CPU,
    eps.last_logical_writes as [Writes],
    eps.last_logical_reads+eps.last_logical_writes as [AggIO]   
from sys.dm_exec_procedure_stats eps
where eps.object_id=object_id(N'Your_procedure_name') 
```

至于错误，在 SQL-Server 2005+ 中，您可以使用函数[ERROR_MESSAGE获取它](http://msdn.microsoft.com/en-us/library/ms190358.aspx)

```
BEGIN TRY
    exec YOUR_PROCEDURE_NAME
END TRY
BEGIN CATCH
    SELECT ERROR_MESSAGE()
END CATCH 
```

# tsql - 隐藏 T-SQL 结果并仅显示 RowCount

> ID：10526973
> 
> 赞同：1
> 
> 时间：2012-05-10T03:00:19.227
> 
> 标签：tsql

我有一个查询，只想显示行数，而不是我正在调用的 proc 的结果。

例如这个：

```
exec GetSomething
    @UserID = 112233,
    @MaxAge = 50,
    ... etc.

SET @Count = @@rowcount
SELECT @Count 
```

不仅返回计数，而且在选择计数之前返回第一个记录集的结果记录列表。

我怎样才能仍然进行此计数但不显示记录集结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:42:45.963

```
DECLARE @Something TABLE (
   ...
)

INSERT INTO @Something
EXECUTE GetSomething
   @UserID = 112233,
   @MaxAge = 50,
   ... etc.;

SET @Count = @@rowcount
SELECT @Count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:07:12.933

您可以尝试使用 OPENROWSET 但您必须确保它已启用：

```
SELECT count(*) FROM OPENROWSET('SQLNCLI', 'Server=(local)\SQL2008;Trusted_Connection=yes;',
     'EXEC GetSomething') 
```

要启用 OPENROWSET：

```
sp_configure 'Show Advanced Options', 1
GO
RECONFIGURE
GO
sp_configure 'Ad Hoc Distributed Queries', 1
GO
RECONFIGURE
GO 
```

请参阅 OPENROWSET 上的 MSDN：http: [//msdn.microsoft.com/en-us/library/ms190312.aspx](http://msdn.microsoft.com/en-us/library/ms190312.aspx)

# bash - 如何仅更改单词中的特定字母我们bash脚本

> ID：10526977
> 
> 赞同：0
> 
> 时间：2012-05-10T03:01:14.510
> 
> 标签：bash

我有一个包含以下地址的文件：该文件中
`0x0003ffff`
`0x0003ffff`
`0x0000ffff`
`0x0000ffff`
`0x003fffff`
`0x05ffffff`
`0x3fffffff`
`0x000000ff` 可以有“n”个这样的地址，我希望将地址更改为

`0x0003FFB0`
`0x0003FFB0`
`0x0000FFB0`
`0x0000FFB0`
`0x003FFFB0`
`0x05FFFFB0`
`0x3FFFFFB0`
`0x000000B0` 对于所有“n”个地址。我基本上想要的是将最后 2 个 'ff' 更改为 'B0' 并将剩余的 'f' 更改为 'F' 我如何使用 bash 脚本来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:06:02.827

使用 sed：

```
sed --in-place 's/\(0x000[0-9]\)ffff/\1FFB0/' file 
```

首先在没有标志的情况下尝试它，`--in-place`以确保它是您想要的。

如果像 Nikhilesh Sharma 指出的那样，您的 F 可能比您的问题中指出的更多，您可以使用以下内容。我假设你有 GNU sed。如果这不起作用，请告诉我，我会给你更长但对 posix 友好的版本。

```
sed --in-place 's/\(0x[0-9f]\{6\}\)ff/\U\1B0/' file 
```

[这是一个很好的教程](http://www.grymoire.com/Unix/Sed.html)，可以在 sed 上剪牙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T03:27:11.713

假如说：

1.  您的输入文件称为 input.txt
2.  所有地址都从第 1 列开始
3.  你想保留前 8 个字符
4.  所有地址都以 ff 结尾

那么这可以工作（至少它适用于您的输入）：

```
cat input.txt | cut -b1-8 | tr f F | sed s/$/B0/g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:33:30.387

如果您有 gawk，请使用数字操作而不是字符串操作

```
gawk '
  {n = strtonum($1)} 
  (n % 0x100) == 0xff {printf("0x%08X\n", n - 0x4f)}
' 
```

# actionscript-3 - 如何在视图导航器应用程序中使用 popView 返回上一个视图？

> ID：10526989
> 
> 赞同：0
> 
> 时间：2012-05-10T03:03:54.997
> 
> 标签：actionscript-3, apache-flex, mobile, flex4.5

显然 poptoFirstView 将用户返回到 firstView。但是说我只想回到以前？是的，我知道用户在他们的移动设备上有返回按钮。但是为了可用性。有人说可以用popView返回最新的。但没有提示如何这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:21:31.147

[在这里输入链接描述](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/ViewNavigator.html#popView%28%29)`popView()`是提示！

如果您不知道如何使用方法，则应始终首先参考 AS3 参考，在您的情况下，关于`ViewNavigator`'`popView()`方法的部分：[AS3 ViewNavigator](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/ViewNavigator.html#popView%28%29)

# mysql - NewSQL 与传统优化/分片

> ID：10526991
> 
> 赞同：11
> 
> 时间：2012-05-10T03:04:03.577
> 
> 标签：mysql, sql, database, sharding, amazon-rds

我们是一家小型初创公司，拥有大量写入的 SAAS 应用程序，并且（终于！）达到了我们的使用呈现扩展问题的地步。我们有一个小团队，所以我们非常感谢能够将系统管理员卸载到 Heroku 和 RDS。

虽然 Heroku（大部分）没问题，但 RDS 存在一些问题：

1.  缩放。这是最大的担忧。我们目前运行一个 XL RDS 实例。通过简单的优化，我们将能够度过一段时间，但除非我们对应用程序进行一些重大的结构更改，否则我们会在某个时候遇到瓶颈。

此外，更改实例大小的停机时间也很糟糕。

1.  可用性。我们运行一个多可用区实例，因此我们应该在单个可用区中断中幸存下来。但是RDS是建立在EBS之上的，考虑到EBS的历史和设计，这让我很担心。

2.  价格。我们的 RDS 账单是我们支付 Heroku 的 4 倍。我不介意付钱给亚马逊，以免我雇用系统管理员，但我很想找到更便宜的东西。

在我看来，我们有两个前进的选择：传统方法（分片、运行夜间作业以将我们的部分数据库移动到只读状态等）；或 NewSQL 解决方案（Xeround、VoltDB、NimbusDB 等）。

传统的优点：以前已经做过很多次了，而且有很标准的方法来做。

传统的缺点：这将需要大量的工作并且会给应用程序带来很大的复杂性。它也不会解决 RDS 的次要问题（可用性和价格）。

NewSQL 专家：据说，这些解决方案将在不更改应用程序代码的情况下横向扩展我们的数据库（受 SQL 功能的一些限制，例如不使用悲观锁定）。这将为我们节省大量的工作。它还将提高可靠性（无单点故障）并降低成本（不必在非工作时间运行 XL 实例以提供高峰使用）。

NewSQL 缺点：这些解决方案相对较新，我还没有找到任何关于人们在生产应用程序中使用它们的经验的好的评论或文章。我只发现了一个可用作托管解决方案 (Xeround)，因此除非我们使用那个，否则我们必须在系统管理员中投入资源。

我想知道关于我的最佳选择是什么意见。

Xeround 非常诱人（托管 NewSQL），但我还没有找到在生产中使用它的任何好的信息。我看到的几条推文都是人们抱怨它有点慢。我很紧张要转向似乎未经测试的东西。

我保守的一面说要坚持使用 RDS 并使用传统方法。但就开发人员的时间而言，这将是非常昂贵的。

然后我的一部分想知道是否有另一种方法，也许是我从未听说过的更久经考验的托管 NewSQL 解决方案。或者也许是我们必须自己托管的 NewSQL 解决方案，但它有着非常可靠的历史。

提前感谢您的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T23:38:48.423

不确定你是否听说过 NuoDB。但它是一个全新的 SQL 解决方案，提供了 NoSQL 的横向扩展能力和传统 OLTP 的 SQL & ACID 合规能力。你应该看看解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:41:25.897

在 Jingit (www.jingit.com)，我们对 VoltDB 进行了实战测试。在扩展编写繁重的应用程序和 AWS 云方面非常棒。没有托管选项，因此我们的开发人员拥有它，他们每周花费不到 1 小时来管理我们的 VoltDB 集群。我们实际上同时使用 RDS 和 VoltDB。RDS 用于我们的传统关系工作负载，而 VoltDB 用于我们的 HIGH VOLUME 事务处理。如果您使用 Java 进行开发，那么 VoltDB 非常适合您使用 Java 编写所有程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T04:31:03.407

我也听说 NuoDB 很有趣。我听到的一件事是，Rackspace 也将很快推出云 DBaaS。我不知道他们会使用什么风格，但您可以看到 Nuo 如何与他们一起作为可扩展的解决方案工作。我认为它将与 Open Stack 平台一起运行，当他们打开它时，它可能会更具成本和计算效率。只是我一直在盯着自己看。

# javascript - 网站可以调用浏览器扩展吗？

> ID：10526995
> 
> 赞同：30
> 
> 时间：2012-05-10T03:04:52.853
> 
> 标签：javascript, google-chrome, google-chrome-extension, firefox-addon, safari-extension

我是浏览器扩展开发的新手，我了解浏览器扩展更改页面并将代码注入其中的概念。

有没有办法可以扭转这个方向？我编写了一个提供一组 API 的扩展程序，想要使用我的扩展程序的网站可以检测到它的存在，如果它存在，网站可以调用我的 API 方法，例如`var extension = Extenion(foo, bar)`. 这在 Chrome、Firefox 和 Safari 中是否可行？

例子：

1.  Google 创建了一个名为 BeautifierExtension 的新扩展。它有一组作为 JS 对象的 API。

2.  用户访问 reddit.com。Reddit.com 检测 BeautifierExtension 并通过调用调用 API`beautifer = Beautifier();`

请参阅#2 - 通常它是检测匹配站点并更改页面的扩展程序。我有兴趣知道#2 是否可行。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-05-10T05:06:55.667

自从 Chrome 推出以来[`externally_connectable`](https://developer.chrome.com/extensions/messaging#external-webpage)，这在 Chrome 中很容易做到。首先，在文件中指定允许的域`manifest.json`：

```
"externally_connectable": {
  "matches": ["*://*.example.com/*"]
} 
```

用于[`chrome.runtime.sendMessage`](https://developer.chrome.com/extensions/runtime#method-sendMessage)从页面发送消息：

```
chrome.runtime.sendMessage(editorExtensionId, {openUrlInEditor: url},
  function(response) {
    // ...
  }); 
```

最后，在您的背景页面中收听[`chrome.runtime.onMessageExternal`](https://developer.chrome.com/extensions/runtime#event-onMessageExternal)：

```
chrome.runtime.onMessageExternal.addListener(
  function(request, sender, sendResponse) {
    // verify `sender.url`, read `request` object, reply with `sednResponse(...)`...
  }); 
```

* * *

如果您无法获得`externally_connectable`支持，原始答案如下：

我将从以 Chrome 为中心的角度来回答，尽管此处描述的原则（网页脚本注入、长时间运行的后台脚本、消息传递）几乎适用于所有浏览器扩展框架。

从高层次来看，您要做的是将[内容脚本](http://developer.chrome.com/extensions/content_scripts.html)注入每个网页，这会添加一个可供网页访问的 API。当站点调用 API 时，API 会触发内容脚本执行某些操作，例如通过异步回调将消息发送到后台页面和/或将结果发送回内容脚本。

这里的主要困难是“注入”到网页中的内容脚本不能直接改变页面的 JavaScript[执行环境](http://developer.chrome.com/extensions/content_scripts.html#execution-environment)。它们共享 DOM，因此内容脚本和网页之间共享**事件**和**对 DOM 结构的更改，但不共享函数和变量。**例子：

*   **DOM 操作：**如果内容脚本将`<div>`元素添加到页面，则将按预期工作。内容脚本和页面都将看到新的`<div>`.

*   **事件：**如果内容脚本设置了一个事件监听器，例如，点击一个元素，监听器将在事件发生时成功触发。如果页面为从内容脚本触发的自定义事件设置了侦听器，那么当内容脚本触发这些事件时，它们将被成功接收。

*   **函数：**如果内容脚本定义了一个新的全局函数`foo()`（就像您在设置新 API 时可能会尝试的那样）。页面**无法**查看或执行`foo`，因为`foo`只存在于内容脚本的执行环境中，而不存在于页面的环境中。

那么，如何设置合适的 API 呢？答案分为多个步骤：

1.  在低级别，使您的 API[基于事件](http://developer.chrome.com/extensions/content_scripts.html#host-page-communication)。网页使用 触发自定义 DOM 事件`dispatchEvent`，内容脚本使用 监听它们，并`addEventListener`在收到它们时采取行动。这是一个简单的基于事件的存储 API，网页可以使用它来扩展来存储数据：

    **content_script.js**（在您的扩展中）：

    ```
    // an object used to store things passed in from the API
    internalStorage = {};

    // listen for myStoreEvent fired from the page with key/value pair data
    document.addEventListener('myStoreEvent', function(event) {
        var dataFromPage = event.detail;
        internalStorage[dataFromPage.key] = dataFromPage.value
    }); 
    ```

    **使用基于事件的 API 的非扩展网页：**

    ```
    function sendDataToExtension(key, value) {
        var dataObj = {"key":key, "value":value};
        var storeEvent = new CustomEvent('myStoreEvent', {"detail":dataObj});
        document.dispatchEvent(storeEvent);
    }
    sendDataToExtension("hello", "world"); 
    ```

    如您所见，普通网页正在触发内容脚本可以看到并做出反应的事件，因为它们共享 DOM。事件附加了数据，添加到[`CustomEvent`构造函数](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent)中。[我的示例非常简单——一旦内容脚本拥有来自页面的数据（很可能将其传递](http://developer.chrome.com/extensions/messaging.html)到[后台页面](http://developer.chrome.com/extensions/background_pages.html)进行进一步处理），您显然可以在内容脚本中做更多的事情。

2.  然而，这只是成功的一半。在我上面的例子中，普通网页必须自己创建`sendDataToExtension`。创建和触发自定义事件非常冗长（我的代码占用 3 行，并且相对简短）。您不想强迫网站编写神秘的事件触发代码只是为了使用您的 API。解决方案有点令人讨厌：将`<script>`标签附加到您的共享 DOM 中，这会将事件触发代码添加到主页的执行环境中。

    在**content_script.js 中：**

    ```
    // inject a script from the extension's files
    // into the execution environment of the main page
    var s = document.createElement('script');
    s.src = chrome.extension.getURL("myapi.js");
    document.documentElement.appendChild(s); 
    ```

    中定义的任何功能都`myapi.js`将可供主页访问。（如果您使用的是，则`"manifest_version":2`需要`myapi.js`在清单的列表中包含[`web_accessible_resources`](http://developer.chrome.com/extensions/manifest.html#web_accessible_resources)）。

    **myapi.js：**

    ```
    function sendDataToExtension(key, value) {
        var dataObj = {"key":key, "value":value};
        var storeEvent = new CustomEvent('myStoreEvent', {"detail":dataObj});
        document.dispatchEvent(storeEvent);
    } 
    ```

    现在**普通网页**可以简单地做：

    ```
    sendDataToExtension("hello", "world"); 
    ```

3.  我们的 API 流程还有*一个问题*`myapi.js`：脚本在加载时不完全可用。相反，它将在页面加载时间之后的某个时间加载。因此，普通网页需要知道何时可以安全地调用您的 API。您可以通过`myapi.js`触发您的页面侦听的“API 就绪”事件来解决此问题。

    **myapi.js：**

    ```
    function sendDataToExtension(key, value) {
        // as above
    }

    // since this script is running, myapi.js has loaded, so let the page know
    var customAPILoaded = new CustomEvent('customAPILoaded');
    document.dispatchEvent(customAPILoaded); 
    ```

    **使用 API**的普通网页：****

     **```
    document.addEventListener('customAPILoaded', function() {
        sendDataToExtension("hello", "world");
        // all API interaction goes in here, now that the API is loaded...
    }); 
    ```** 
***   加载时脚本可用性问题的另一个解决方案是将`run_at`清单中内容脚本的属性设置为`"document_start"`如下所示：

    **清单.json：**

    ```
     "content_scripts": [
          {
            "matches": ["https://example.com/*"],
            "js": [
              "myapi.js"
            ],
            "run_at": "document_start"
          }
        ], 
    ```

    [文档](https://developer.chrome.com/extensions/content_scripts#registration)摘录：

    > 在“document_start”的情况下，文件是在任何来自 css 的文件之后注入的，但在构造任何其他 DOM 或运行任何其他脚本之前。

    对于某些可能比“加载 API”事件更合适且省力的内容脚本。

    *   为了将结果发送*回*页面，您需要提供一个异步回调函数。无法从您的 API 同步返回结果，因为事件触发/侦听本质上是异步的（即，您的站点端 API 函数在内容脚本通过 API 请求获取事件之前终止）。

    **myapi.js：**

    ```
    function getDataFromExtension(key, callback) {
        var reqId = Math.random().toString(); // unique ID for this request
        var dataObj = {"key":key, "reqId":reqId};
        var fetchEvent = new CustomEvent('myFetchEvent', {"detail":dataObj});
        document.dispatchEvent(fetchEvent);

        // get ready for a reply from the content script
        document.addEventListener('fetchResponse', function respListener(event) {
            var data = event.detail;

            // check if this response is for this request
            if(data.reqId == reqId) {
                callback(data.value);
                document.removeEventListener('fetchResponse', respListener);
            }
        }
    } 
    ```

    **content_script.js**（在您的扩展中）：

    ```
    // listen for myFetchEvent fired from the page with key
    // then fire a fetchResponse event with the reply
    document.addEventListener('myStoreEvent', function(event) {
        var dataFromPage = event.detail;
        var responseData = {"value":internalStorage[dataFromPage.key], "reqId":data.reqId};
        var fetchResponse = new CustomEvent('fetchResponse', {"detail":responseData});
        document.dispatchEvent(fetchResponse);
    }); 
    ```

    **普通网页：**

    ```
    document.addEventListener('customAPILoaded', function() {
        getDataFromExtension("hello", function(val) {
            alert("extension says " + val);
        });
    }); 
    ```

    如果您同时发出多个请求，这`reqId`是必要的，这样他们就不会读取错误的响应。** 

 **我认为这就是一切！因此，当您考虑到其他扩展也可以将侦听器绑定到您的事件以窃听页面如何使用您的 API 时，不适合胆小的人，而且可能不值得。我之所以知道这一切，是因为我为一个学校项目制作了一个概念验证密码学 API（并随后了解了与之相关的主要安全陷阱）。

**总而言之：**内容脚本可以侦听来自普通网页的自定义事件，并且该脚本还可以注入具有使网页更容易触发这些事件的功能的脚本文件。内容脚本可以将消息传递到后台页面，然后后台页面存储、转换或传输来自消息的数据。**

# javascript - javascript:void(0) in href 和 onClick 在 IE9 中不起作用

> ID：10526999
> 
> 赞同：2
> 
> 时间：2012-05-10T03:05:16.417
> 
> 标签：javascript, internet-explorer

下面的代码是一个更大的函数的一部分，该函数确定某物是否在线并将代码返回到页面并显示“远程支持”按钮。这适用于所有浏览器，包括 IE 7,8。这在 IE 9 中不起作用。整个按钮应该可以点击，但在 IE 9 上，只有 110px 按钮的顶部是可点击的，基本上是 2px 左右。

有没有办法让它在 IE9 中工作？

```
if(strpos($response, "TRUE") > -1){
    echo "<a
href='javascript:void(0)'
onClick=\"window.open('".$instantChat."','_blank','toolbar=no, status=no, menubar=no,
titlebar=no, location=no,scrollbars=no, resizable=no, height=570, width=400'); return false;\" 
    class='instantChat'
>Remote Support</a>" ;
}else{
    echo "";
} 
```

**编辑 1**：

我想稍微清理一下代码，并尝试使用该`button`元素而不是锚点，但它在 Chrome 内部搞砸了并且不起作用。

我还可以补充一点，这个按钮旋转了 270 度，文本是横向的。这是有意的。

这是简化上述内容但不能解决问题的新代码。

```
if(strpos($response, "TRUE") > -1){
    echo "<a href='javascript:void(0)' onClick='openChat();' class='instantChat'>Remote Support</a>" ;
}else{
    echo "";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:48:46.297

你可以试试

```
<a style="cursor:pointer" onclick='openChat();' class='instantChat'>Remote Support</a> 
```

每个浏览器处理事情的方式都不同。最好的方法是完全取消 onclick 并为其定义一个 jquery 处理程序。就像是

```
$('.instantChat').click(function(){
    // open chat code here
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:00:49.383

我的第一个想法是你不想要一个链接，你想要一个按钮。那么为什么不使用按钮元素呢？然后你不需要担心 javascript:void 位。

我也会完全放弃 onclick 属性。我怀疑它的大写是你出错的地方，你可能会解决它。

你最好添加一个 data-action='openChat' 属性。然后在其他地方添加一个处理程序来处理元素点击和： 1\. 检查点击的元素是否是一个按钮。2\. 检查它是否有一个 data-action 属性 3\. 如果它有一个 data-action 检查它是否是 openChat。4\. 如果是 openChat，它会打开一个窗口。

标准将模型与视图分离。