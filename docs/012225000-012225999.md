# StackOverflow 问答 12225000-12225999

# javascript - Javascript函数获取元素内容

> ID：12225005
> 
> 赞同：0
> 
> 时间：2012-09-01T04:57:10.057
> 
> 标签：javascript, html, dom

我正在使用侦听器来触发某个代码：

```
$(".item-actions > .like-button").click(function (e) {
    oid = $(this).parent().attr('data-oid');
    alert(oid);
    }); 
```

现在，我只是在 HTML 上调用函数，而不是监听器。

点击

我在获取元素的内容和父内容时遇到问题，因为我无法使用 $(this) 来选择它们。我怎样才能做与该功能相同的事情？

我第一次尝试这个没有用：

```
function alertOID() {
  oid = $(this).parent().attr('data-oid');
  alert(oid);
} 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T05:00:49.993

on **.like-button** html onclick 事件调用**alertOID()**就像这个**alertOID(this)**

```
<input class="like-button" onClick="alertOID.call(this);"> 
```

代替

```
<input class="like-button" onClick="alertOID.call();"> 
```

并像这样更改alertOID

```
function alertOID(element) {
    oid = $(element).parent().attr('data-oid');
    alert(oid);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:02:36.270

是你要找的吗？

```
<input class="like-button" onClick="alertOID.call(this);"> 
```

# java - Java，按对象获取 ArrayList 索引

> ID：12225010
> 
> 赞同：4
> 
> 时间：2012-09-01T04:58:28.203
> 
> 标签：java, arraylist

所以我在我的代码中遇到了一个小问题：

```
synchronized(clients)
            clients.remove(this);
} 
```

因为当客户端断开连接时，但现在我需要能够将该客户端的名称发送给所有其他客户端，为此我基本上需要做类似的事情

```
synchronized(clients)
            broadcast("Remove:"+clients.get(this).name);
            clients.remove(this);
} 
```

但显然我无法获得带有“this”的索引，那么我该如何获取正确的客户名称呢？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-01T05:01:21.823

你为什么不简单地使用this.name？既然已经有了对象，为什么还需要获取索引才能再次获取对象？

编辑：

要回答标题中的问题（获取对象的索引），请使用[indexOf](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#indexOf%28java.lang.Object%29)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-01T05:19:13.293

你看过ArrayList中的[indexOf函数吗？](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html#indexOf%28java.lang.Object%29)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T05:19:57.960

```
int index = clients.indexOf(this);
// Do what ever...
clients.remove(index); // or clients.remove(this); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-01T05:13:10.613

我认为您想从列表中删除特定对象。如果您从代码中获取索引

```
int index = clients.get(this) 
```

然后你可以轻松删除

```
clients.remove(index); 
```

或者如果您从列表中获取对象然后删除

```
clients.remove(object) // remove by object 
```

# c# - 来自另一个线程的 C# UnhandledException 不断循环

> ID：12225011
> 
> 赞同：2
> 
> 时间：2012-09-01T04:58:34.803
> 
> 标签：c#, multithreading, visual-studio-2010, infinite-loop, unhandled-exception

我有一个非常简单的线程。Thread 对象所做的唯一事情是`throw new Exception();`. 我这样做的原因是因为我需要测试如果在我的应用程序的单独线程中发生异常会发生什么。我已经用“真正的”运行时异常对此进行了测试，我的问题是一样的。

在调用线程之前我要做的是：

```
AppDomain.CurrentDomain.UnhandledException += CurrentDomainOnUnhandledException;
Application.Current.DispatcherUnhandledException += CurrentOnDispatcherUnhandledException;

//To handle exceptions in another thread
private void CurrentDomainOnUnhandledException(object sender, UnhandledExceptionEventArgs unhandledExceptionEventArgs)
{
    //Do nothing ignore exception
}

//To handle all exceptions in main thread
private static void CurrentOnDispatcherUnhandledException(object sender, DispatcherUnhandledExceptionEventArgs dispatcherUnhandledExceptionEventArgs)
{
    dispatcherUnhandledExceptionEventArgs.Handled = true;
} 
```

当该线程确实抛出异常时，它首先会按`CurrentDomainOnUnhandledException`应有的方式命中，然后不会命中`CurrentOnDispatcherUnhandledException`。在`CurrentDomainOnUnhandledException`堆栈之后立即返回到抛出异常并再次抛出异常的线程，执行同一行。它永远不会停止这样做。这基本上是一个永无止境的循环，我不知道为什么。

UnhandledExceptionEventArgs 没有要设置的属性，也就是说我们已经处理了异常，我很确定这是问题的一部分。

我在做什么错，如何在这个线程中捕获这个 UnhandledException，并让线程继续执行（首选）或中止/杀死线程（不是首选），以便它不会继续执行 throw new exception 行。

我已经通过调试和发布对此进行了测试（确保发布的调试信息设置为无），这仍然发生在两个版本中，异常继续一遍又一遍地发生。

在此先感谢，我很困惑，不知道为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:07:22.377

> 当这个线程确实抛出异常时，它首先会像它应该的那样命中 CurrentDomainOnUnhandledException，然后它不会命中 CurrentOnDispatcherUnhandledException。在 CurrentDomainOnUnhandledException 之后，堆栈然后返回到抛出异常并再次抛出异常的线程，执行同一行。它永远不会停止这样做。这基本上是一个永无止境的循环，我不知道为什么。

您从未处理过异常。您刚刚返回到最初出错的相同代码。说代码是这样做的：

```
i = 1 / 0;
foo(i); 
```

并假设您以零错误*捕获*除法，但在处理程序中，您除了返回之外什么都不做。好吧，你期望会发生什么？代码遇到了一个致命错误，导致无法取得进一步进展，而您没有采取任何措施来修复它。`i`应该包含什么值？！

本质上，不要试图捕获异常，除非作为抛出异常的代码设计的一部分。这只是没有意义，无论您的外部问题是什么，都可能有一种明智的方法来做到这一点。

但是如果一个线程严重失败，它的进程也会严重失败。这就是线程的本质——没有隔离。考虑：

1.  获取锁
2.  修改一些对象
3.  释放锁

如果在步骤 2 中途抛出异常会发生什么？如果您的异常处理程序不释放锁，则尝试获取它的下一个线程将永远等待。如果您的异常处理程序确实释放了锁，则获取它的下一个线程将访问一个已部分修改且可能处于不一致状态的对象。因此，异常处理程序必须做出明智的决定，了解引发异常的代码，以及在释放引发异常时持有的任何锁之前要做什么。

如果你要捕捉异常，你*必须*弄清楚根本问题是什么并修复它。一般来说，只有完全理解引发异常的代码才能做到这一点。没有通用的方法可以做到这一点，因为没有通用的方法来修复可能损坏的对象。

> 好的，那么我如何杀死 CurrentDomainOnUnhandledException 中的线程以便它停止循环异常？

一般来说，这不是你想要做的。如果那个线程持有锁怎么办？如果该线程分配了它需要释放的内存怎么办？

如果您需要这种隔离，请使用进程，而不是线程。

# android - 进度对话框不出现

> ID：12225013
> 
> 赞同：0
> 
> 时间：2012-09-01T04:59:00.950
> 
> 标签：android, sms, progressdialog

首先让我澄清一下，我仍然是一个非常业余的 android 开发人员，大约一周前通过学习[http://developer.android.com/training/basics/firstapp/index.html上的教程开始的](http://developer.android.com/training/basics/firstapp/index.html)

因此，如果我的代码看起来很丑陋，请原谅我。

现在实际问题 - “PROGRESS DIALOG DOESN'T APPEAR” - 但其余代码工作正常。它正在发送 SMS，我正在接收它们，只是面临 PROGRESS DIALOG 的问题。

```
public class MainActivity extends Activity {
Context context;

public final static String EXTRA_NUMBER = "com.example.myfirstapp.NUMBER";
public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

/** Called when the user clicks the Send button */
public void sendMessage(View view) {
    if (!isOnline()) {
        Toast.makeText(MainActivity.this,"No Internet Access..Cannot Send SMS", Toast.LENGTH_LONG).show();
    } else {

        ProgressDialog prgDialog = ProgressDialog.show(MainActivity.this,"Free Sms","Sending SMS..Please Wait..!!",true);           
        EditText editTextNum = (EditText) findViewById(R.id.edit_number);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String number = editTextNum.getText().toString();
        String message = editText.getText().toString();
        try {
            prgDialog.dismiss();
            String msgreciever = number;
            String testMessage = message;
            SmsSender.sendMessage(msgreciever, testMessage);                
            Toast.makeText(MainActivity.this, "Message Sent Successfully",Toast.LENGTH_LONG).show();
            editTextNum.setText("");
            editText.setText("");
        } catch (Exception ex) {
            prgDialog.dismiss();
            Toast.makeText(MainActivity.this, "Message Sending Failed",Toast.LENGTH_LONG).show();
        }
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public boolean isOnline() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:01:44.600

你在打电话

`prgDialog.dismiss`之后立马`prgDialog.show.`

这就是它没有出现的原因。

编辑：添加下面的代码而不是关闭，这应该在 3 秒后删除对话框

```
new CountDownTimer(3000, 1000) 
 {
      @Override
       public void onTick(long l) {
       }

       @Override
       public void onFinish(){
             prgDialog.dismiss();
       };
 }.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T05:26:42.420

你好 Tapan 实际上你必须使用“线程”或“可运行”来进行这种操作......所以在你的代码的“其他”部分中放置这个使用线程的修改代码......所以它肯定会为你工作……

```
EditText editTextNum = (EditText) findViewById(R.id.edit_number);
EditText editText = (EditText) findViewById(R.id.edit_message);
final String number = editTextNum.getText().toString();
final String message = editText.getText().toString();
final ProgressDialog prgDialog = ProgressDialog.show(this,"Free Sms","Sending SMS..Please Wait..!!",true);
Thread t=new Thread(new Runnable() {
    public void run() {
        // TODO Auto-generated method stub
        try {
            Thread.sleep(1000);
            SmsSender.sendMessage(number, message);
            prgDialog.dismiss();
            Toast.makeText(MainActivity.this, "Message Sent Successfully",Toast.LENGTH_LONG).show();

        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
});
t.start();
editTextNum.setText("");
editText.setText(""); 
```

# php - php代码点火器选择检索问题

> ID：12225015
> 
> 赞同：0
> 
> 时间：2012-09-01T04:59:37.047
> 
> 标签：php, codeigniter

嗨，我正在为网站使用 Code Igniter 框架，

这是一个技术文章网站，我正在添加不同语言的文章。

在那里，当我将文章与代码一起保存时，例如它已正确插入数据库中。

```
&lt;pre class="prettyprint" id="html"&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml" xmlns:t="http://tapestry.apache.org/schema/tapestry_5_0_0.xsd"&gt;
&lt;head&gt;
    &lt;meta name="copyright" content="Atos Origin" /&gt;
    &lt;title&gt;Select Option Demo Using Tapestry&lt;/title&gt;    
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Payment Card Demo&lt;/h1&gt;              
    &lt;form t:type="form" t:id="cardForm" id="cardForm" method="post"&gt;
        &lt;t:label for="cardTypes"/&gt;
        &lt;t:select t:id="cardTypes"/&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
&lt;/pre&gt; 
```

但是当我从数据库中检索它进行编辑时，它会转换为实际代码。

```
<pre class="prettyprint" id="html">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:t="http://tapestry.apache.org/schema/tapestry_5_0_0.xsd">
<head>
    <meta name="copyright" content="Atos Origin" />
    <title>Select Option Demo Using Tapestry</title>    
</head>
<body>
    <h1>Payment Card Demo</h1>              
    <form t:type="form" t:id="cardForm" id="cardForm" method="post">
        <t:label for="cardTypes"/>
        <t:select t:id="cardTypes"/>
    </form>
</body>
</html>
</pre> 
```

但是不想要这样的转换，那么有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T05:33:31.160

有一个 PHP 解决方案：

要将 HTML 编码为等效字符，请使用：

```
string htmlentities ( string $string [, int $flags = ENT_COMPAT | ENT_HTML401 [, string $encoding = 'UTF-8' [, bool $double_encode = true ]]] ) 
```

见：[http ://www.php.net/manual/en/function.htmlentities.php](http://www.php.net/manual/en/function.htmlentities.php)

要解码为 html，请使用：

```
string html_entity_decode ( string $string [, int $flags = ENT_COMPAT | ENT_HTML401 [, string $encoding = 'UTF-8' ]] ) 
```

建议：

插入数据库时​​，我不会将 html 编码为特殊字符，只有在使用上面指定的函数将其拉出时。

# io - MSP430 - 如何读取接地的 I/O 引脚？

> ID：12225020
> 
> 赞同：0
> 
> 时间：2012-09-01T04:59:59.843
> 
> 标签：io, switch-statement, microcontroller, msp430

我有一个 MSP430 G2452 连接了几个拨动开关（阅读：NOT 按钮）。我知道如何设置中断和去抖动按钮，但是我很难设置我的端口，所以我可以采样哪些开关是关闭/打开的。

我希望能够读取 P1IN（带屏蔽）以找出哪些开关是关闭/打开的，哪些是打开/关闭的。开关连接到 GND，我将它们连接的引脚拉高，所以当开关闭合/打开时，它连接的引脚应该被拉低。但 P1IN 似乎没有改变。

我可以设置一个在引脚接地时触发的中断，但我只想对引脚进行采样，而不是使用中断。如何设置我的端口引脚，以便我可以使用 PxIN 读取它们的状态？

```
// Port 1 setup
    P1SEL = 0;                  // set P1 as digital I/O for all pins
    P1DIR = ~sw1to6;            // set switches 1-6 for input
    P1OUT = sw1to6;             // enable pull-ups on switches 1-6
    P1REN |= sw1to6;            // enable pull-up resistors on switches 1-6 
```

（头文件定义：）

```
// P1.0-1.5
#define sw1 0x01
#define sw2 0x02
#define sw3 0x04
#define sw4 0x08
#define sw5 0x10
#define sw6 0x20
#define sw1to6 sw1 | sw2 | sw3 | sw4 | sw5 | sw6 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T17:32:04.077

由于您的“sw1to6”宏不在括号中，因此否定不会达到您的预期。你可能想要：

```
#define sw1to6 (sw1 | sw2 | sw3 | sw4 | sw5 | sw6) 
```

一般来说，最好总是把你的宏放在括号中。

之后，您应该能够读取 P1IN 上的引脚。

# javascript - 更改当前网页上的一些（即不是全部）显示文本

> ID：12225023
> 
> 赞同：1
> 
> 时间：2012-09-01T05:00:55.647
> 
> 标签：javascript, html

在 Java 等语言或 Qt for C++ 等 GUI 框架中，可以获得用户无法更改但程序可以根据满足某些条件进行修改的某些文本块（例如标签小部件）的句柄。我希望能够从一些 JavaScript 代码中在 HTML 网页上做同样的事情。

例如，考虑一个用于输入用户凭据的网页。如果凭据无效，我想在当前网页上显示一条消息，而无需加载全新的页面。

我已经使用 HTML 文本框或 textarea 使其工作，设置为禁用，只读并进行一些显示样式更改（通过 CSS）。更改会导致一些 JavScript 代码运行，这可能会导致这些文本框或文本区域的值字段发生更改。虽然这行得通，但它似乎并不正确。有没有更正统的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:22:00.593

Sure. There are a few libraries to handle this.

You may be asking for form validation. If so, try jQuery and jQuery's validate extension library: [demo](http://jquery.bassistance.de/validate/demo/milk/)

Or you may be asking for a more generic-use observer pattern. If so, try one of the many MVVM/MVC libraries for JavaScript such as backbone.js or knockout.js (also ember, agility, angular, and spine): [jsfiddle](http://jsfiddle.net/thomas/Yqk5A/)

edit: also note that if your need is just standard form validation, you can accomplish it in jQuery validate without any code to speak of - just add properties directly on the HTML elements themselves indicating what the validation rules are. Unfortunately, HTML5 data attributes weren't around when it was written, so you apply the validation rules as CSS classes.

edit 2: also note that jQuery validate out-of-the-box supports remote validation, such as the credentials or username-already-exists scenario: [demo](http://jquery.bassistance.de/validate/demo/ajaxSubmit-intergration-demo.html) or [documentation](http://docs.jquery.com/Plugins/Validation/Methods/remote#options)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T05:25:30.073

Use jQuery's `.submit()`, using this you can Bind an event handler to the "submit" JavaScript event, or trigger that event on an element.

Example:

```
$("form").submit(function() {
      if ($("input:first").val() == "correct") {
        $("span").text("Validated...").show();
        return true;
      }
      $("span").text("Not valid!").show().fadeOut(1000);
      return false;
    }); 
```

You can also use jQuery's `.toggle()` to show/hide any div.

Read this W3C article for better understanding of recommendation by W3, [Providing client-side validation and adding error text via the DOM](http://www.w3.org/TR/WCAG20-TECHS/SCR32) (slightly outdated)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T05:13:57.340

你应该试试jQuery的`.change();`

假设您的 HTML 输入有一个 ID：

```
<input type='text' id='idOfTheField' name='email'> 
```

你应该试试：

```
$('#idOfTheField').change(function(){

  //Do stuff with the value.
  //Wich is $('#idOfTheField').value() by the way.

}); 
```

要使用网络服务器操作数据，您必须执行 AJAX 调用，如下所示：

```
$.ajax({
  url: "parse.php",
  data: {
      email:$('#idOfTheField').value()
  }
}).done(function() { 
  // Add the CSS class ".valid" that makes the text field green, for example.
  $('#idOfTheField').addClass("valid"); 
}); 
```

# javascript - 时间字段上的 JavaScript 验证（不接受 0:00 格式）

> ID：12225030
> 
> 赞同：-2
> 
> 时间：2012-09-01T05:01:54.697
> 
> 标签：javascript, jquery, validation

这是我验证不正确时间格式的代码：

```
 $('.allts').delegate(".tf", "focusout", function (e)
        {
                var curval = this.value;
                curval = curval.replace(';', ':');
                curval = curval.replace(" ", ':');
                curval = curval.replace('.', ':');                
                //alert(curval);
                if (/^\d$/.test(curval))
                {
                        curval = "0" + curval + ":00";
                }
                if (/^[0-9]:[0-5][0-9]$/.test(curval))
                        {
                                curval = "0" + curval;
                        }
                if (curval >= 10 && curval <= 12)
                {
                        curval = curval + ":00";
                }
                if(curval.length==2&&curval >= 0 && curval <= 12){
                curval = curval + ":00";
                }
                this.value = curval;
                if (this.value != "")
                {
                        if (!isValidDate(curval))
                        {
                                this.style.background = "#faa";
                                $('#msg_tformat').html('Please enter a valid time').show();
                                this.value = "";  
                        } 
```

我的要求是不接受 0:00 时间格式。如果我提供像 0:00 这样的时间格式，它应该会显示一条错误消息，例如：“请输入有效时间”。任何人都可以建议在 JavaScript 中验证这一点的正确方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T05:10:33.870

`isValidDate`在函数中添加如下内容：

```
if( curval === '0:00' || curval === '00:00' ) {
  return false;
} 
```

# iphone - 推送视图控制器时 UIButton 更改大小

> ID：12225032
> 
> 赞同：0
> 
> 时间：2012-09-01T05:02:29.923
> 
> 标签：iphone, objective-c, ios, uibutton

我有一个静态 tableView，该部分中有一个部分和一行。该 tableview 有一个 footerView ，其中有一个 UIButton 。一切看起来都符合预期（我将所有内容都放置在 tableViewController 的 viewDidLoad 上的 footerView 中），直到我单击 tableView 的行。这会导致一个新的 viewController 的 segue - 它开始推送的那一刻， UIButton 改变大小。按下视图控制器时我不编辑按钮的框架，如果我尝试将 viewWillAppear 或 viewDidAppear 上的按钮框架设置回原来的设置，它保持不变。我还检查了确保 footerView 没有改变大小 - 它与最初设置的一样。

我还不能发布图片，但我已经将截图上传到 imgur：

在点击 tableView 行之前：
![在此处输入图像描述](../Images/9bb28b16e0b77d9d15b2e093a77c37c6.png)

点击 tableView 行后：
![在此处输入图像描述](../Images/bae61367be9d67e0e432c2564f923e4d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T05:06:53.280

更改按钮的自动大小 ![在此处输入图像描述](../Images/4328e88a7352408b69caffd1947bde35.png)

# validation - 密码验证不匹配，清除所有字段。

> ID：12225033
> 
> 赞同：-1
> 
> 时间：2012-09-01T05:02:35.163
> 
> 标签：validation, passwords

我有一个表单验证脚本所有的验证工作。但是当有关密码不匹配的警报出现时，这些字段会清除吗？我怎样才能避免这种情况？

```
 <script type="text/javascript">

 function formValidator(){
// Make quick references to our fields
var FNAME = document.getElementById('FNAME');
var LNAME = document.getElementById('LNAME');
var EMAIL = document.getElementById('EMAIL');
var GENDER = document.getElementById('GENDER');
var ADDRESS = document.getElementById('ADDRESS');
var CONTACTNO = document.getElementById('CONTACTNO');
var PASSWORD = document.getElementById('PASSWORD');
var PASSWORD2 = document.getElementById('PASSWORD2');

// Check each input in the order that it appears in the form!
if(isAlphabet(FNAME, "Please enter only letters for your first name"))
{
    if(isAlphabet(LNAME, "Please enter only letters for last name"))
    {
        if(emailValidator(EMAIL, "Please enter a valid email address"))
        {
            if(madeSelection(GENDER, "Please Choose a Gender"))
            {
                if(isAlphanumeric(ADDRESS, "Numbers and Letters Only for Address"))
                {
                    if(isNumeric(CONTACTNO, "Please enter only numbers for Contact No."))
                    {
                        if(lengthRestriction(PASSWORD, 6))
                        {
                            if (PASSWORD2 != PASSWORD)
                            {
                            alert ("You did not enter the same new password twice. Please re-enter your password.");
                            return true;
                            }   
                        }
                    }
                }
            }
        }
    }
}

return false;

 } 
```

我认为我的其他功能没有问题？

```
 function notEmpty(elem, helperMsg){
if(elem.value.length == 0){
    alert(helperMsg);
    elem.focus(); // set the focus to this input
    return false;
}
return true;
 }

 function isNumeric(elem, helperMsg){
var numericExpression = /^[0-9]+$/;
if(elem.value.match(numericExpression)){
    return true;
}else{
    alert(helperMsg);
    elem.focus();
    return false;
}
 }

function isAlphabet(elem, helperMsg){
var alphaExp = /^[a-zA-Z]+$/;
if(elem.value.match(alphaExp)){
    return true;
}else{
    alert(helperMsg);
    elem.focus();
    return false;
}
 }

 function isAlphanumeric(elem, helperMsg){
var alphaExp = /^[0-9a-zA-Z]+$/;
if(elem.value.match(alphaExp)){
    return true;
}else{
    alert(helperMsg);
    elem.focus();
    return false;
}
 }

 function lengthRestriction(elem, min){
var uInput = elem.value;
if(uInput.length >= min){
    return true;
}else{
    alert("Please enter atleast " +min+ " characters");
    elem.focus();
    return false;
}
}

function madeSelection(elem, helperMsg){
if(elem.value == "Please Choose"){
    alert(helperMsg);
    elem.focus();
    return false;
}else{
    return true;
}
 }

function emailValidator(elem, helperMsg){
var emailExp = /^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;
if(elem.value.match(emailExp)){
    return true;
}else{
    alert(helperMsg);
    elem.focus();
    return false;
}
 }

</script> 
```

我想我做错了这部分？？但我不知道如何解决？请帮忙。

```
if (PASSWORD2 != PASSWORD)
{
alert ("You did not enter the same new password twice. Please re-enter your password.");
return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T05:19:11.120

```
Try to do something like:

    if (PASSWORD2.value == PASSWORD.value)
    {
      alert ("You did not enter the same new password twice. Please re-enter your password.");
      return true;
    }
} 
```

# c# - 如何在 C# 应用程序中嵌入 MySQL 数据库服务器？

> ID：12225035
> 
> 赞同：3
> 
> 时间：2012-09-01T05:02:39.607
> 
> 标签：c#, mysql, database

> **可能重复：**
> [独立的数据库？](https://stackoverflow.com/questions/4789908/self-contained-database)

我希望创建一个嵌入 MySQL 数据库服务器的 C# 应用程序。数据需要存储在文件中，我需要在应用程序中访问它，进行查询并将结果保存回磁盘。

我该如何处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T05:23:10.980

1.  开源 ADO.NET 提供程序**[SQLLite](http://www.sqlite.org/)**是您方案的最佳选择。参考这个：[SQLLite](http://sqlite.phxsoftware.com/)
    *   SQLite 数据库引擎是一个 ADO.NET 2.0/3.5 提供程序，全部集成到一个混合模式程序集中。
    *   System.Data.SQLite 是原始的[SQLLite](http://www.sqlite.org/)数据库引擎。
    *   它是自包含、无服务器、零配置、事务性 SQL 数据库引擎。
2.  如果您已经安装了 MySql 数据库，那么您可以使用 MySql 连接器嵌入它。有关详细信息，您可以阅读以下内容：[使用 C# 和 .NET 连接到 MySQL 数据库](http://www.codeproject.com/Articles/71346/Connecting-to-MySQL-Database-using-C-and-NET)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T05:23:00.470

有一个名为[MySQL 的嵌入式库](http://dev.mysql.com/doc/refman/5.5/en/libmysqld.html)`libmysqld`，但这可能比 SQLite 需要更多的工作。我不确定是否有本机 C# 绑定，例如。它似乎没有被广泛使用。通常，“嵌入式”MySQL 是捆绑到服务器设备中的，而不是分发给第三方的已编译应用程序。

SQLite 提供了 MySQL 提供的大部分基本功能，并且旨在对您的应用程序产生低影响。您会发现在许多用例中几乎相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T05:07:33.200

据我所知，ADO.NET 应该可以与 MySQL 一起正常工作。试着看看这里：http: [//zetcode.com/db/mysqlcsharptutorial/](http://zetcode.com/db/mysqlcsharptutorial/)

# macos - Rcpp：Mac 显示加载轮并且几乎冻结

> ID：12225049
> 
> 赞同：2
> 
> 时间：2012-09-01T05:05:40.253
> 
> 标签：macos, r, terminal, rcpp

我创建了一个依赖于 Rcpp 的 R 包。这个包中的一个函数应该在每 n 次迭代时显示打印语句。所以我希望每隔几秒钟在 R 控制台上看到一个新行。

奇怪的是，当我在 R GUI 中运行我的函数时，光标变成了一个加载轮，R“几乎”冻结了。计算完成后加载轮消失一次。

这种情况的最小示例总结如下：

```
library(inline)
library(Rcpp)
test <- cxxfunction(
signature(),
body= '

RNGScope scope;
for (int i = 0; i < 100; i++)
{
sleep(1); // sleep one second at each iteration. this sleep is
// replaced by something in my code
if (i%20==0) Rprintf("\v%d iterations are done...",i);
}

return wrap(1);
' ,
plugin="Rcpp"
               )

test()// freeze for 100 seconds! 
```

我还发现，如果代码在终端上运行，新行会按我的预期每 20 秒出现一次。但我更喜欢在 R GUI 上运行它。

如果有人能告诉我为什么会这样，我将不胜感激。

我正在使用 Mac。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T07:51:56.810

Rgui 缓冲输出。我不使用 Rgui，但尝试找到控制输出是否缓冲的设置。对于 R 代码，您可以使用它`flush.console`来强制显示输出，但我不完全确定这将如何与 C++ 代码一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T23:40:22.833

问题是关于 Mac 上的 R.app，而不是 Windows 上的 Rgui。下面的解决方案对我有用：使用 R_FlushConsole 和 R_ProcessEvents 跟随 Rprintf，如下所示：

```
RNGScope scope;
for (int i = 0; i < 100; i++) {
    sleep(1); // sleep one second at each iteration. this sleep is
              // replaced by something in my code
if (i%20==0) {
  Rprintf("\v%d iterations are done...\n",i);
  R_FlushConsole();
  R_ProcessEvents();
}

return wrap(1); 
```

# java - 按下按钮时如何继续执行工作？

> ID：12225052
> 
> 赞同：5
> 
> 时间：2012-09-01T05:05:59.520
> 
> 标签：java, onclick, jbutton, buttonclick

我想在按下按钮时使用 Java 继续执行工作。松开按钮后，工作应停止。像这样的东西：

```
Button_is_pressed()
{
    for(int i=0;i<100;i++)
    {
        count=i;
        print "count"
    }
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-01T05:16:03.470

单程：

*   将 ChangeListener 添加到 JButton 的 ButtonModel
*   在此侦听器中检查模型的`isPressed()`方法并根据其状态打开或关闭 Swing Timer。
*   如果你想要一个后台进程，那么你可以以同样的方式执行或取消一个 SwingWorker。

前者的一个例子：

```
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;

public class ButtonPressedEg {
   public static void main(String[] args) {
      int timerDelay = 100;
      final Timer timer = new Timer(timerDelay , new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent e) {
            System.out.println("Button Pressed!");
         }
      });

      JButton button = new JButton("Press Me!");
      final ButtonModel bModel = button.getModel();
      bModel.addChangeListener(new ChangeListener() {

         @Override
         public void stateChanged(ChangeEvent cEvt) {
            if (bModel.isPressed() && !timer.isRunning()) {
               timer.start();
            } else if (!bModel.isPressed() && timer.isRunning()) {
               timer.stop();
            }
         }
      });

      JPanel panel = new JPanel();
      panel.add(button);

      JOptionPane.showMessageDialog(null, panel);

   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T05:16:25.077

> 我想在按下按钮时继续执行工作

在另一个线程中执行该进程，然后您的表单不会被阻塞，您可以按下按钮取消或停止执行。

看 ：

*   [如何停止Java程序的线程？](https://stackoverflow.com/questions/1562465/how-to-stop-threads-of-a-java-program)
*   [停止/取消 SwingWorker 线程？](https://stackoverflow.com/questions/8083768/stop-cancel-swingworker-thread)
*   [通过按钮控制线程](https://stackoverflow.com/questions/3179356/control-thread-through-button)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T05:19:29.313

您可能需要使用`mousePressed`事件来启动操作

并使用 `mouseReleased`事件停止动作（这是必要的）

有关更多信息，请参阅[此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/MouseListener.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-14T09:16:59.897

## 安卓应用

我知道这个问题很老，但你可以使用：

```
while (yourButton.isPressed()) {

    // Do Stuff
} 
```

# macos - 用 application:openFile: 打开文件很慢：返回后

> ID：12225060
> 
> 赞同：4
> 
> 时间：2012-09-01T05:08:49.263
> 
> 标签：macos, cocoa, appleevents

我的应用程序在其应用程序委托中实现了 NSApplicationDelegate 方法 -application:openFile:。OS 10.8 似乎有一个新问题，在接收到打开文件的苹果事件后，在某种内部超时被击中之前经过 5 秒，向苹果事件发送响应，调用应用程序（例如，applescript编辑）收益。

详细地说，这就是我所看到的。在 application:openFile: 返回 YES 之后，我可以看到 -[NSAppleEventManager suspendCurrentAppleEvent] 被调用：

```
#0  0x00007fff8f07b5ed in -[NSAppleEventManager suspendCurrentAppleEvent] ()
#1  0x00007fff8f90458e in -[NSApplication(NSAppleEventHandling) _handleAEOpenDocumentsForURLs:] ()
#2  0x00007fff8f903b55 in -[NSApplication(NSScripting) handleOpenScriptCommand:] ()
#3  0x00007fff90770cac in __invoking___ ()
#4  0x00007fff90770b47 in -[NSInvocation invoke] ()
#5  0x00007fff90770d19 in -[NSInvocation invokeWithTarget:] ()
#6  0x00007fff8f10121c in -[NSScriptCommand _sendToRemainingReceivers] ()
#7  0x00007fff8f1014c6 in -[NSScriptCommand executeCommand] ()
#8  0x00007fff8f11983a in -[NSScriptingAppleEventHandler handleCommandEvent:withReplyEvent:] ()
#9  0x00007fff8f00635b in -[NSAppleEventManager dispatchRawAppleEvent:withRawReply:handlerRefCon:] ()
#10 0x00007fff8f0061bd in _NSAppleEventManagerGenericHandler ()
#11 0x00007fff93844f68 in aeDispatchAppleEvent ()
#12 0x00007fff93844dc9 in dispatchEventAndSendReply ()
#13 0x00007fff93844c89 in aeProcessAppleEvent ()
#14 0x00007fff8c141e29 in AEProcessAppleEvent ()
#15 0x00007fff8f6b22a6 in _DPSNextEvent ()
#16 0x00007fff8f6b1862 in -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] ()
#17 0x00007fff8f6a8c03 in -[NSApplication run] ()
#18 0x00007fff8f64d656 in NSApplicationMain ()
#19 0x0000000100001d7c in main (argc=3, argv=0x7fff5fbff7c0) at main.m:23 
```

五秒钟后，-[NSAppleEventManager resumeWithSuspensionID:] 被调用：

```
#0  0x00007fff8f07b6be in -[NSAppleEventManager resumeWithSuspensionID:] ()
#1  0x00007fff8f90585f in __block_global_1 ()
#2  0x00007fff9073a4b4 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ ()
#3  0x00007fff90739fcd in __CFRunLoopDoTimer ()
#4  0x00007fff9071f7b9 in __CFRunLoopRun ()
#5  0x00007fff9071edd2 in CFRunLoopRunSpecific ()
#6  0x00007fff8c137774 in RunCurrentEventLoopInMode ()
#7  0x00007fff8c137512 in ReceiveNextEventCommon ()
#8  0x00007fff8c1373a3 in BlockUntilNextEventMatchingListInMode ()
#9  0x00007fff8f6b1fa3 in _DPSNextEvent ()
#10 0x00007fff8f6b1862 in -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] ()
#11 0x00007fff8f6a8c03 in -[NSApplication run] ()
#12 0x00007fff8f64d656 in NSApplicationMain ()
#13 0x0000000100001d7c in main (argc=3, argv=0x7fff5fbff7c0) at main.m:23 
```

显然，由于 resumeWithSuspensionID: 是从计时器调用的，并且在我的 application:openFile: 方法返回和 resumeWithSuspensionID: 被调用之间总是非常接近 5 秒，因此达到了某种超时。

在此之后，一切正常进行：无论 applescript 调用什么“打开文件 ...”，都将在下一条语句中继续。似乎没有任何错误 - 它只是超时等待某些东西。

我打开了 AEDebugSends 和 AEDebugReceives。这是我看到的超时：

```
Aug 23 21:26:05 mymachine.local iTerm[4819] <Info>: _aeMachPortCallback(), got a message, @ 0x0x7fff5fbfe1f0 size=972 info=0 (_aeMachPortCallback()/AEMach.cp #643) main
Aug 23 21:26:05 mymachine.local iTerm[4819] <Notice>: AE2000 (4819: Received an event:
------oo start of event oo------
aevt('aevt'\'odoc' transactionID=0 returnID=3711 sourcePSN=[0x0,6f06f "AppleScript Editor"] eventSource=3 sourceUID=501 sourceGID=20 sourceEUID=501 sourceEGID=20 sourcePID=3551 auditToken=[501,501,20,501,20,3551,100005,3551]{ '----':obj ('obj '{ 'form':enum('name'), 'want':type('file'), 'seld':utxt('utxt'(TEXT("Macintosh HD:Users:georgen:Library:Application Support:iTerm:version.txt"))), 'from':null() }), &'csig':magn(65536) })
------oo  end of event  oo------
(aeProcessIncomingEvent()/AEMach.cp #1445) main
2012-08-23 21:26:05.451 iTerm[4819:707] Command: NSCoreSuite.Open
Direct Parameter: /Users/georgen/Library/Application Support/iTerm/version.txt
Receivers: (null)
Arguments:     {
        "" = "/Users/georgen/Library/Application Support/iTerm/version.txt";
    } 
```

然后，在超时后我看到了这个（因为我也将 NSScriptingDebugLogLevel 设置为 1 而记录了它）：

```
2012-08-23 21:26:36.347 iTerm[4819:707] Result: <null> 
```

我的 openFile: 方法除了返回 YES 什么都不做。我还需要做些什么来使框架满意吗？

# ruby-on-rails - “空”怎么写？在 Rails 模型对象上工作？

> ID：12225064
> 
> 赞同：0
> 
> 时间：2012-09-01T05:09:25.853
> 
> 标签：ruby-on-rails, activerecord

Rails 如何判断模型类的实例是否为空？

假设我有一个 Post 模型的实例：

```
#<Post id: 14, related_id: 20999, related_type: "News", text: nil, created_at: "2012-09-01 04:32:27", updated_at: "2012-09-01 04:32:27"> 
```

记录已保存且有效。但是叫“空？” 它将返回true。Rails 确定对象为空的标准是什么？

这给我带来了问题，因为如果我有一个相关模型使用：

```
validates_presence_of :post 
```

如果相关对象为空，则验证将失败。不过，我不在乎它是“空的？”。就我而言，它并不是真正的空，即使文本字段为零也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:02:48.313

你应该得到“NoMethodError: undefined method `empty?' 为 Post”，如果你打电话给空？在您的模型的任何实例中，因为 activerecord 模型没有定义这种方法。你能找到空的吗？方法例如在 Array、String、Hash 但在 activerecord 实例中没有。实际上它是一个 Ruby 方法，不是 Rails 也不是 activerecord。

总结一下，如果您能够做到以下几点：

```
Post.new.empty? 
```

或者

```
Post.last.empty? 
```

或者

```
p = Post.last
p.empty? 
```

错了，这意味着您在模型中的某个地方定义了空？方法或包括从其他地方。所以检查你的模型。希望这对您有所帮助。

# android - android定义与密度无关的像素

> ID：12225065
> 
> 赞同：7
> 
> 时间：2012-09-01T05:09:27.853
> 
> 标签：android

我是安卓新手。我读过关于 DP 但我仍然感到困惑。在一个定义中，它说 - dp（与密度无关的像素）：基于屏幕密度的抽象单位。在每英寸 160 点的显​​示器上，1dp = 1px。

这是否意味着 - 160 点 = 1 dp = 1 像素（每个点是 1 像素，对吗？）或 160 点中的 1 dp = 1 点（像素）

请澄清

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-01T05:27:29.457

与密度无关的像素是定义 UI 布局时应使用的虚拟像素单位，以与密度无关的方式表示布局尺寸或位置。

与密度无关的像素相当于 160 dpi 屏幕上的一个物理像素，这是系统为“中等”密度屏幕假定的基线密度。在运行时，系统会根据使用中屏幕的实际密度，根据需要透明地处理 dp 单位的任何缩放。dp 单位到屏幕像素的转换很简单：

`px = dp * (dpi / 160)`

例如，在 240 dpi 的屏幕上，1 dp 等于 1.5 个物理像素。在定义应用程序的 UI 时，您应该始终使用 dp 单位，以确保您的 UI 在不同密度的屏幕上正确显示。

对于 160 dpi 屏幕，1 dp 等于 1 px。

请参阅[此](http://blog.edwinevans.me/?p=131)博客和[此](https://stackoverflow.com/a/4708370/1341006)答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:21:29.777

android文档说-

与密度无关的像素相当于 160 dpi 屏幕上的一个物理像素，这是平台假定的基线密度（如本文档后面所述）。在运行时，平台会根据使用的屏幕的实际密度透明地处理所需的 dp 单位的任何缩放。dp 单位到屏幕像素的转换很简单：像素 = dps * (密度 / 160)。例如，在 240 dpi 屏幕上，1 dp 等于 1.5 个物理像素。强烈建议使用 dp 单位来定义应用程序的 UI，以确保在不同屏幕上正确显示 UI。

你可以看看[支持的多屏](http://developer.android.com/guide/practices/screens_support.html)。你也可以看看这个[问题](https://stackoverflow.com/questions/4707320/basics-of-device-independent-pixels?rq=1)。

# html - text-align 正确时的背景颜色

> ID：12225068
> 
> 赞同：0
> 
> 时间：2012-09-01T05:10:01.520
> 
> 标签：html, css

我有这个html：

```
<div>
    <p class="highlight-date">2009-4-5</p>
</dvi> 
```

这是CSS：

```
div{
    width: 200px;
}

div p{
    text-align: right;
}

.highlight-date{
    background-color: yellow;
}​ 
```

我想让背景颜色刚好在文本下方，但现在它会从 div 的左侧延伸。我该如何解决这个问题？谢谢

小提琴：http: [//jsfiddle.net/f6exa/](http://jsfiddle.net/f6exa/)

​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T05:12:36.737

以下是如何解决它：http: [//jsfiddle.net/f6exa/1/](http://jsfiddle.net/f6exa/1/)

```
div {
    width: 200px;
    text-align: right;
}

.highlight-date{
    background-color: yellow;
    display: inline-block;
}​ 
```

变化：

1.  从内容 (p)移动`text-align: right`到容器 (div)。
2.  制作内容 (p) `display: inline-block`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T05:59:02.633

```
 <div>
    <span class="highlight-date">2009-4-5</span>
</div>
<style type="text/css">
    div
    {
        width: 200px;
        text-align: right;
    }
    .highlight-date
    {
        background-color: yellow;
    }
    ​&lt;/style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T06:21:06.023

```
<div>
    <p>
        <span class="highlight-date">2009-4-5</span></p>
</dvi> 
```

# android - 嵌套线性布局

> ID：12225069
> 
> 赞同：-1
> 
> 时间：2012-09-01T05:10:04.210
> 
> 标签：android, android-linearlayout

我在 Hello Android 书中读到了这段代码，但我不知道为什么要写两个 LinearLayout。我可能是其中之一删除或移动到其他？为什么我们使用嵌套的 LinearLayout？它有什么作用？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@color/background"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="30dip"
    android:orientation="horizontal">
    <LinearLayout
        android:orientation="vertical"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:layout_gravity="center">
        <TextView
            android:text="@string/main_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:layout_marginBottom="25dip"
            android:textSize="24.5sp"/>
        <Button
            android:id="@+id/continue_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/continue_label"/>
        <Button
            android:id="@+id/new_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/new_game_label"/>
        <Button
            android:id="@+id/about_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/about_label" />
        <Button 
            android:id="@+id/exit_button"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/exit_label"/>
   </LinearLayout>
</LinearLayout> 
```

请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T05:13:44.790

水平布局是水平布局元素，如：

`[element][element][element]`

垂直的布局是这样的：

```
[element]
[element]
[element] 
```

因此，使用显示的 xml 格式，它将是垂直排列的一排按钮。如果您不需要该布局，那么是的，您可以通过删除一个来简化它。

很难用文字解释，但这就是它的样子：

```
----Outer (Horizontal) layout-----
|                                |
|  ---Inner (Vertical) layout-   |
|  |       [Textview]        |   |
|  |       [Button]          |   |
|  |       [Button]          |   |
|  |       [Button]          |   |
|  ---------------------------   |
---------------------------------- 
```

文本视图/按钮垂直向下移动。

### 编辑：

实际上由于外部布局有

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

它只会占据整个屏幕，有 30 个填充。然后内部布局将垂直适应其中的内容，并在水平方向上最大化宽度。

我认为您可能不需要外部布局..您可以通过一个适当的属性获得相同的效果`LinearLayout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-12T09:53:40.700

这里有2个LinearLayout的用来保持布局的方向

第一个或父 LinearLayout 将设法覆盖整个屏幕，因为

```
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
```

与

> 背景颜色

并在队列中水平添加所有内容，因为

```
android:orientation="vertical"[![enter image description here][1]][1] 
```

第二个 LinearLayout 或嵌套的一个会将所有内容放在中心，因为

```
android:layout_gravity="center" 
```

将只占用物品所需的空间，因为

```
android:layout_height="wrap_content"
android:layout_width="fill_parent" 
```

一切都将按垂直顺序排列，因为

```
android:orientation="vertical" 
```

# php - 如果在 php 中发布表单，则 html 中的文本框数字类型截断 0

> ID：12225075
> 
> 赞同：-1
> 
> 时间：2012-09-01T05:10:52.003
> 
> 标签：php, html, mobile

如果我将文本框类型指定为数字并提交表单，它会截断 0 。

例如：099921 表示它将发布为 99921

为什么它在0之前切断

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:13:23.170

因为前面的 0 没有任何意义，被删除了。使它成为一个字符串（文本），它会留下来。整数前面没有 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:20:57.080

```
 i dont know why but i did the same code and it is displaying the value with o i.e 099921 

check out my code
<?php
if(isset($_POST['submit']))
{
    echo $numberValue = $_POST['numVal'];
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<form method="post">
<input type="number" name="numVal" value="" />
<input type="submit" name="submit" value="submit"/>
</form>

</body>
</html 
```

# objective-c - 在 Objective C 中获取和播放 YouTube URL

> ID：12225081
> 
> 赞同：1
> 
> 时间：2012-09-01T05:12:05.960
> 
> 标签：objective-c, ios, ipad, youtube

我正在开发一个应用程序，我正在为用户提供播放保存在数据库中的 Youtube 视频的功能。如果用户愿意，他可以更新视频。

假设我在 DB 中保存了一个类似[http://www.youtube.com/watch?v=1Ziku4FLka4](http://www.youtube.com/watch?v=1Ziku4FLka4)的链接，并且我在单击按钮时播放相同的链接，我已经实现了如下代码：

```
 UIWebView *wv;

strUTube = @"http://www.youtube.com/watch?v=1Ziku4FLka4";

        wv = [[UIWebView alloc] initWithFrame:CGRectMake(0,10,viewBG.frame.size.width,viewBG.frame.size.height)];

    NSMutableString *html = [[NSMutableString alloc] initWithCapacity:1];
    [html appendString:@"<html><head>"];
    [html appendString:@"<style type=\"text/css\">"];
    [html appendString:@"body {"];
    [html appendString:@"background-color: transparent;"];
    [html appendString:@"color: brown;"];
    [html appendString:@"}"];
    [html appendString:@"</style>"];
    [html appendString:@"</head><body style=\"margin:0\">"];
    [html appendFormat:@"<embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\"", strUTube];

    [html appendFormat:@"width=\"%0.0f\" height=\"%0.0f\"></embed>", viewBG.frame.size.width,viewBG.frame.size.height];
    [html appendString:@"</body></html>"];

    NSLog(@"html:%@",html);
    [wv loadHTMLString:html baseURL:nil];
    [viewBG addSubview:wv];

    [self.view addSubview:viewBG]; 
```

然后在另一个按钮单击时，我正在调用 Youtube 的主页并使用以下代码获取在按钮单击事件上打开的 URL：

```
NSString *currentURL = [webView stringByEvaluatingJavaScriptFromString:@"window.location.href"];
NSLog(@"currentURL2 : %@",currentURL); 
```

但是该 URL 会产生类似[http://m.youtube.com/watch?feature=m-trends&v=to7uIG8KYhg](http://m.youtube.com/watch?feature=m-trends&v=to7uIG8KYhg)的结果，以后无法播放。

我也尝试在我的 Mac Book 上打开 URL，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:32:34.713

首先使用新的 iFrame 方法嵌入您的管视频。下面是一个模板 url，您可以在其中从代码中填写宽度、高度、视频 id 和 isAutoplay。

```
<html>
<head>
    <meta name="viewport" content="initial-scale = 1.0,maximum-scale = 1.0" />
</head>
    <body style="margin:0;padding:0;" bgcolor="#000000">
        <iframe class="youtube-player" background-color:#000000 allowtransparency= "true" type="text/html" width=%f height=%f src="http://www.youtube.com/embed/%@?fs=1&autoplay=%d&loop=%d&rel=0&version=3&enablejsapi=1&showinfo=0" frameborder="0" allowfullscreen>
        </iframe>
    </body>
</html>

NSString   *youTubeHTMLTemplate = [NSString stringWithContentsOfFile: path 
                                                         encoding: NSUTF8StringEncoding 
                                                            error: &error];
finalHtml = [NSString stringWithFormat:youTubeHTMLTemplate, htmlFrameWidth, htmlFrameHeight, videoID, isAutoplay]; 
```

您可以使用内置的 NSString 方法轻松地从 youtube 视频 url 中提取视频 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:26:20.230

从以下 currentURL 中提取 videoID 的简单技巧：

```
 http://m.youtube.com/watch?feature=m-trends&v=to7uIG8KYhg 
```

现在创建新的 Youtube VideoURL，如

```
 NSString *newVideoURL = [NSString stringWithFormat:@"http://www.youtube.com/watch?v=%@",extractedVideoID]; 
```

现在在嵌入式播放器中播放这个 newVideoURL。

[http://www.youtube.com/watch?v=to7uIG8KYhg](http://www.youtube.com/watch?v=to7uIG8KYhg)

# javascript - 网站中非常酷的 javascript 或 CSS 功能

> ID：12225085
> 
> 赞同：1
> 
> 时间：2012-09-01T05:13:10.323
> 
> 标签：javascript, jquery, html, css

有人知道这个网站的眼球是怎么设计的吗？这是 javascript（可能是 jQuery），还是只是 HTML5 和 CSS？我只是不明白你是如何获得这种形状的小图像，获得它的 onhover 方法，设置新图片，然后使其可点击。这是一个按钮吗？

[http://animalvfx.com/work/](http://animalvfx.com/work/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T05:17:34.700

他们使用一张图片作为背景（可在此处找到：http: [//animalvfx.com/images/bg-open-close.png](http://animalvfx.com/images/bg-open-close.png)）。

他们只使用 CSS，他们在类上有一个悬停状态，将背景位置设置为负偏移。

基本上风格是：

```
.slide-holder .opener {
   width: 30px;
   height: 38px;
   overflow: hidden;
   position: absolute;
   bottom: -38px;
   background: url(../images/bg-open-close.png) no-repeat;
}

.opener:hover {
   background-position: 0 -76px;
} 
```

实际上，您一次只能看到背景图像的一部分。因为图像状态相似，所以它似乎在向上看。

眼睛的点击事件是使用[jQuery的slidedown](http://api.jquery.com/slideDown/)

如果您想自己了解事情是如何工作的，您可以使用最流行的 Web 浏览器中的开发人员控制台。然后使用 HTML 检查器工具检查您感兴趣的元素。开发人员控制台通常通过按 F12 来激活。这适用于任何体面的现代网络浏览器（以及带有 Firebug 的 Firefox）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T05:17:03.667

它是一个精灵 - [http://animalvfx.com/images/bg-open-close.png](http://animalvfx.com/images/bg-open-close.png) - 在悬停时，背景图像从居中的眼球转移到偏移的眼球。

```
.opener:hover {
    background-position: 0 -76px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T05:23:54.300

我相信他压缩了他的 javascript，因此人眼看不懂，但我相信他使用了 jquery/javascript 和 css3 的组合。我相信眼睛改变外观的悬停只是一些简单的javascript来改变悬停时的图像。我确定当您单击眼睛时正在使用切换类，因为您可以在 HTML 源代码的列表中看到类更改（它最初设置为`display: none`）。这绝对看起来像是来自 jQuery的[slideDown的工作。](http://api.jquery.com/slideDown/)希望这可以帮助 ：]

# c++ - 在 C++ 中实现深度优先搜索

> ID：12225089
> 
> 赞同：2
> 
> 时间：2012-09-01T05:13:30.520
> 
> 标签：c++, depth-first-search

我正在学习数据结构和抽象数据类型，但我一直被一个不断出现的问题所困扰。

我不明白计算机科学现在有 50 年的历史（或者更老，我不确切知道），以及数据结构、ADT 和算法如何成为这一切的基础部分，但仍然没有标准任何一个。

我的问题实际上非常具体：我试图在 C++ 中实现深度优先搜索，其方式可以处理任何本机（内置）数据类型。我的问题是，我首先看哪里？我知道 STL 中的堆栈类可用于实现 DFS 算法，但 STL 是第一个看的地方吗？我应该从头开始实现 DFS，使用堆栈以及我对实现该算法的了解吗？还是专业程序员在需要进行此类搜索时是否有他们求助的库？

请告知，这个问题并不像我希望的那样具体。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T05:28:11.120

Boost 在这里有一个 C++ 深度优先搜索实现：

[http://www.boost.org/doc/libs/1_42_0/libs/graph/doc/depth_first_search.html](http://www.boost.org/doc/libs/1_42_0/libs/graph/doc/depth_first_search.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-01T07:00:12.413

把你的知识用起来！你知道 STL，你知道如何使用堆栈实现 DFS，最重要的是，它非常简单，所以你*可以*自己编写代码。

大多数人建议使用Boost。但是，如果这是您唯一需要 Boost 的事情，那么最好自己编写 DFS。另一方面，您还想学习如何使用已有的东西。

# blackberry - 从黑莓上传图片

> ID：12225101
> 
> 赞同：-2
> 
> 时间：2012-09-01T05:15:47.550
> 
> 标签：blackberry

在我的代码中，我从相机获得了一张图像，但我想将其上传到服务器上，我将图像转换为字节数组，然后将其发送到 php 服务器的 url，谁能告诉我我必须编写哪种类型的代码。

一个问题是字节数​​组数据长度为 11 个字符，我的 PM 告诉我你得到的字节太小了

我得到的字节数组如下[B@f359616f

当我在 php 端运行此代码时，imagecreatefromstring($images); 不创建图像

任何代码请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T17:22:44.797

看起来您正在对字节数组调用“toString()”。这意味着您正在调用 VM 提供的 toString 的默认实现，即格式化类型名称，然后是“@”，然后是一些特定于对象的 int，可能是对象身份哈希码。

通常，StackOverflow 问题包括源代码。在这种情况下，您可能希望包含上传图像数据的函数。帮助您的人会对所涉及的数据类型以及您如何格式化并将该数据传送到服务器的 php 脚本感兴趣。

# ms-project - MS Project single resource assigned to multiple concurrent activities

> ID：12225106
> 
> 赞同：1
> 
> 时间：2012-09-01T05:16:08.947
> 
> 标签：ms-project

In Microsoft Project (MSP), is it possible to have two parallel/concurrent activities with the same resource assigned to both? For example:

![parallel tasks example](../Images/f8d77e54f6f6bcde13d5cba1a5d92210.png)

The worker resource "matt" is assigned to both activities, hence the overallocation error showing in the info column (red human icon).

Why do I require such a structure you may ask? In reality, one task would continually be temporarily interrupted to do the other one, and vice versa. But in MSP, it would be counter-productive to do so. Hence, my simplified approach - parallel activities.

So how should I fix this issue?

*   Ignore it?
*   Allocate 50% of the resource to each (and fix up finish dates which are automatically extended by MSP?)
*   Or is there a better solution?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T23:28:07.660

如果它们确实重叠，那么将其放入您的项目中的最佳方法是为每个任务分配 50%。但是为什么要修复完成日期，程序会根据新工作重新计算任务的新工期，而分配降低到 50% 那么工期应该加倍......或者你可以将任务声明为工期驱动，如果那样的话是这种情况，尽管分配发生了变化，但对于此类任务，持续时间将保持不变

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T07:51:34.267

I do not think there is a better solution. So solution number 2 that is adjusting assignment units is the best in your case.

# javascript - Iterate through a SC.ManyArrray to create custom views to append to another view in SproutCore

> ID：12225108
> 
> 赞同：0
> 
> 时间：2012-09-01T05:16:34.450
> 
> 标签：javascript, sproutcore

I'm trying to figure out how I can retrieve a set of objects from the datastore, pass the SC.ManyArray to a controller then have a view iterate over the arrangedObjects to create custom SC.Views that I'd like to be able to append to other various views already appended to the DOM.

All I can find are examples of how to do this using the SproutCore pre built ListView/CollectionView/TableView etc. But I need these generated custom views to be appended to other views.

On another related but separate issue, when I inspect the object returned from the call to MyApp.store.find() the dataHashes property doesn't include all of my fixtures that I've included. I'm not sure if it's because I haven't created a view to call the data yet though because if I use the console I can return all the fixtures.

I'll also add that the data I'm retrieving is coming from a toMany relation from the master record. I'm retrieving the SC.ManyArray using a binding to the content of the SC.ArrayController with the path MyApp.masterModel.relationProperty.

Edit: I meant to say MyApp.masterModelController.relationProperty

Any insight would be great. I've been trying to figure this out for 2 days now and there doesn't seem to be any information found with google or the SproutCore docs.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T01:49:26.883

我已经想通了...

我最终做的是创建一个`SC.CollectionView`并将内容绑定到`SC.ArrayController`用于管理数据收集的内容。当我将此集合视图添加到`childViews`数组中时，它会自动获取与模型 toMany 关系相关的固定装置，并创建我创建的自定义视图并将其设置为`exampleView`on，`SC.CollectionView`并且使用这些对象更新了 stores`dataHashes`属性。

在我创建的用于显示对象的自定义视图上，我覆盖了该`didAppendToDocument`方法，获取了容器视图的路径，以便将这些视图附加到并用于`appendChild`附加创建的自定义视图。

最后一件事是隐藏，`SC.CollectionView`所以我只是将`layout`属性设置为`{top:-1000,left:-1000,width:0,height:0}`.

我不是 100% 确定这是解决此问题的最佳方法，但它确实有效（至少对我而言）。

我很想听听任何其他建议来实现这一点。

# c# - Exception in copying DataRow to another DataTable

> ID：12225119
> 
> 赞同：1
> 
> 时间：2012-09-01T05:18:49.733
> 
> 标签：c#

I have two data tables, dt1 & dt2\. dt1 has data while dt2 is a new table. Now I want to copy some rows, satisfying particular condition, to dt2\. I have tried following code, but I get this exception:

> System.ArgumentException This row already belongs to another table.

```
foreach(DataRow dr in dt1.Rows)
{
   if(Convert.ToInt32(dr["col"]) == value)
   {
      dt2.Rows.Add(dr);
   }
} 
```

How can I resolve this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T05:21:03.463

change `dt2.Rows.Add(dr);` to `dt2.Rows.Add(dr.ItemArray);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:31:12.037

您不能直接`"Add"`将 DataTable 行从一个到另一个，因为它属于源 Datatable。您可以`"Add"`将新创建​​的行添加到 DataTable。

因此你得到了这个例外。

有很多方法可以克服这一点。下面列出了一些

**方法一：**

如果您想从源数据表中获取一行并添加目标而不进行任何更改，请使用`ImportRow`这种方式。

```
dt2.ImportRow(dr); 
```

**方法二：**

但是如果你想获取特定的数据。然后用这个

```
foreach(DataRow dr in dt1.Rows)
{
   if(Convert.ToInt32(dr["col"]) == value)
   {
      Datarow ndr = dt2.NewRow();
      ndr["Foo"] = dr["Foo"];
      //..Similarly for other rows.
      dt2.Rows.Add(ndr);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T06:02:50.570

每次向数据表添加一行时，它应该是不同的（新）行............

```
Datarow newRow = null;
foreach(DataRow dr in dt1.Rows)
{
  if(Convert.ToInt32(dr["col"]) == value)
  {
   newRow = dt2.NewRow();
   newRow ["A"] = dr["A"];     
   dt2.Rows.Add(newRow );
  }
 } 
```

# javascript - how to change the default load ajax loader gif in jquery mobile

> ID：12225126
> 
> 赞同：0
> 
> 时间：2012-09-01T05:20:14.460
> 
> 标签：javascript, android, jquery, mobile, jquery-mobile

I have already seen the docs for jquery mobile but couldn't understand how to integrate it on my mobile website. The docs are here at

```
http://jquerymobile.com/demos/1.2.0-pre/docs/pages/loader.html 
```

Actually the gif image doesn't animate on 2.x android devices so I am thinking about making a text only kind of pre loading widget.

I tried changing it via css like this

```
.ui-icon-loading {
            background: url(themes/images/custom-ajax-loader.gif);
        } 
```

but the new imag doesn't scale properly and the old background is still visible.

I am a complete noob with javascript.can someone plz help me with this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T08:17:41.993

您提到了 jQM 1.2 Alpha Docs，所以我的回答基于这个 jQM 版本。

您可以在下面找到 2 个选项来更改默认加载程序图像。

**解决方案 1**

如 jQM 1.2 Alpha Docs 所述：

> 当 jQuery Mobile 启动时，它会在文档对象上触发一个 mobileinit 事件。要覆盖默认设置，请绑定到 mobileinit。因为 mobileinit 事件会立即触发，所以您需要在加载 jQuery Mobile 之前绑定您的事件处理程序。按以下顺序链接到您的 JavaScript 文件：
> 
> ```
> <script src="jquery.js"></script>
> <script src="custom-scripting.js"></script>
> <script src="jquery-mobile.js"></script> 
> ```

要全局配置加载对话框，可以在 mobileinit 事件期间在其原型上定义以下设置：

```
$( document ).bind( 'mobileinit', function(){
  $.mobile.loader.prototype.options.text = "loading";
  $.mobile.loader.prototype.options.textVisible = false;
  $.mobile.loader.prototype.options.theme = "a";
  $.mobile.loader.prototype.options.html = "";
}); 
```

您可以在下面找到一个工作示例，您可以在其中完全自定义**html 原型选项**中的加载器。

例子：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Page Title</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script>
            $(document).bind( 'mobileinit', function(){
              $.mobile.loader.prototype.options.text = "loading";
              $.mobile.loader.prototype.options.textVisible = true;
              $.mobile.loader.prototype.options.theme = "a";
              $.mobile.loader.prototype.options.textonly = false;
              $.mobile.loader.prototype.options.html = "<span class='ui-bar ui-overlay-c ui-corner-all'><img src='../images/my-custom-image.png' /><h2>loading</h2></span>";
            });
        </script>
        <script src="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.js"></script>
        <script>
            $(document).on("click", ".show-page-loading-msg", function() {          
                $.mobile.loading('show');
            });
        </script>
    </head> 

    <body>
        <!-- /page -->
        <div data-role="page" class="page-map" style="width:100%; height:100%;">
            <!-- /header -->
            <div data-role="header" data-theme="b">
                <h1>Test</h1>
            </div>
            <!-- /content -->
            <div data-role="content" class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                <button class="show-page-loading-msg">Click</button>
            </div>
        </div>
    </body>
</html> 
```

**解决方案 2**

覆盖用于描述页面加载器的默认 CSS 样式。

**已编辑**

对于[jQM 1.1.1 版本](http://jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html)，有以下可配置选项：

> *   loadingMessage 字符串，默认值：“
>     正在加载” 设置页面加载时显示的文本。如果设置为 false，则消息根本不会出现。
> *   loadingMessageTextVisible 布尔值，默认值：false
>     显示加载消息时文本是否可见。对于加载错误，文本始终可见。
> *   loadingMessageTheme 字符串，默认值："a"
>     文本可见时加载消息框使用的主题。

代码示例：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Page Title</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script>
            $(document).bind( 'mobileinit', function(){
               $.mobile.loadingMessageTheme = 'e';
               $.mobile.loadingMessageTextVisible = true;
                $.mobile.loadingMessage = "test";
            });
        </script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
        <script>
            $(document).on("click", ".show-page-loading-msg", function() {          
                $.mobile.showPageLoadingMsg();
            });
        </script>
    </head> 

    <body>
        <!-- /page -->
        <div data-role="page" class="page-map" style="width:100%; height:100%;">
            <!-- /header -->
            <div data-role="header" data-theme="b">
                <h1>Test</h1>
            </div>
            <!-- /content -->
            <div data-role="content" class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                <button class="show-page-loading-msg">Click</button>
            </div>
        </div>
    </body>
</html> 
```

此外，您可以尝试覆盖用于设置 jQM 加载器样式的默认 CSS。更具体地说，您可以修改或覆盖部分**加载屏幕**中的样式以及用于描述页面加载器的部分**加载图标中的样式。**

您将在[此处](http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.css)找到jQM 1.1.1 中使用的 CSS。

```
/* loading icon */
.ui-icon-loading {
    background: url(images/ajax-loader.gif);
    background-size: 46px 46px;
}

/* loading screen */
.ui-loading .ui-loader { display: block; }
.ui-loader { display: none; z-index: 9999999; position: fixed; top: 50%; left: 50%; border:0; }
.ui-loader-default { background: none; opacity: .18; width: 46px; height: 46px; margin-left: -23px; margin-top: -23px; }
.ui-loader-verbose { width: 200px; opacity: .88; box-shadow: 0 1px 1px -1px #fff; height: auto; margin-left: -110px; margin-top: -43px; padding: 10px; }
.ui-loader-default h1 { font-size: 0; width: 0; height: 0; overflow: hidden; }
.ui-loader-verbose h1 { font-size: 16px; margin: 0; text-align: center; }
.ui-loader .ui-icon { background-color: #000; display: block; margin: 0; width: 44px; height: 44px; padding: 1px; -webkit-border-radius: 36px; -moz-border-radius: 36px; border-radius: 36px; }
.ui-loader-verbose .ui-icon { margin: 0 auto 10px; opacity: .75; }
.ui-loader-textonly { padding: 15px; margin-left: -115px; }
.ui-loader-textonly .ui-icon { display: none; }
.ui-loader-fakefix { position: absolute; } 
```

# android - 在活动之间跳转而不丢失数据

> ID：12225132
> 
> 赞同：-3
> 
> 时间：2012-09-01T05:21:30.277
> 
> 标签：android, location, android-activity

在我的应用程序中有 5 个活动，流程是`A >> B >> C >> D >> E >> F`.

**B**是文本框，用户在其中输入详细信息，我正在使用静态变量方法保存详细信息。

**D**是 locationActivity ，在这我也使用静态变量方法保存数据。

**E**是具有 textView 的摘要屏幕，用于显示所有活动的结果。

**F**是最终视图，它显示所有带有一些动画的数据。

现在的问题是，如果在摘要屏幕中用户发现他输入了错误的详细信息并想要对其进行编辑，那么他将如何在不丢失从位置活动获得的数据的情况下执行此操作。

是否有除此之外的其他方法，因为我不想在活动 B 中放置一个额外的按钮，而且我也不确定用户在 B 中编辑他的详细信息后是否会从位置活动中获取实际数据`E >> B`。`B >> E`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:33:37.817

想到的一个简单的解决方案是[`putExtra()`](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20java.lang.String%29)在您的活动之间简单地传递数据。这应该需要对您现有的代码做很少的工作。

很好的教程[在这里](http://www.vogella.com/articles/AndroidIntent/article.html)（见 1.4）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T05:37:19.963

采用

```
@Override 
public void onBackPressed() { 
    Intent intent = new Intent(ActivityE.this, ActivityB.class); 
    finish();
    startActivity(intent); 
} 
```

在活动 E 中并用于`intent.putExtra()`将任何变量从 E 传递到 B

因此，当您按下设备的后退按钮时，您应该转到活动 B。

[这里](http://www.vogella.com/articles/AndroidIntent/article.html)是教程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T05:38:20.127

要么围绕活动传递信息，要么将其存储在 Application 对象中以便在任何地方使用。

# java-me - TextField dissapear in TableLayout in LWUIT Java ME

> ID：12225133
> 
> 赞同：1
> 
> 时间：2012-09-01T05:21:49.123
> 
> 标签：java-me, lwuit-form, lwuit-textfield

I've searched for this problem but still can not find the solution. By the way my level of Google Translate is ugly (I speak Spanish). Well, the thing is that I want my application form looks as follows:

![](../Images/f9b6a9538df5b429885b5c9e1a71420e.png)

Or maybe so:

![](../Images/4e04e2631055045b101e9c0a686d18a9.png)

The problem is that when I want to, **text fields disappear** I do not know why is that.

Here is my code:

```
TableLayout tableLayout = new TableLayout(3, 2);    
    this.setLayout(tableLayout);
    //this.addCommandListener(this);

    TableLayout.Constraint colum1 = tableLayout.createConstraint();     
    colum1.setWidthPercentage(35);  
    lblCodigo = new Label("Codigo :");
    this.addComponent(colum1, lblCodigo);

    TableLayout.Constraint colum2 = tableLayout.createConstraint();
    colum2.setHorizontalAlign(Component.LEFT);
    colum2.setWidthPercentage(65);      
    txtCodigo = new TextField();        
    this.addComponent(colum2, txtCodigo);

    TableLayout.Constraint span = tableLayout.createConstraint();
    span.setWidthPercentage(100);
    span.setHorizontalAlign(Component.CENTER);
    span.setHorizontalSpan(2);      
    btnBuscar = new Button("Buscar");       
    //btnBuscar.setPreferredW(50);      
    this.addComponent(span, btnBuscar); 
```

Well, I'm working with LWUIT 1.4, Java ME SDK 3.0.

I tried that with LWUIT 1.5.

Does anyone have an idea why the text boxes disappear?

# java - Can Spring Autowire beans created in a BeanFactoryPostProcessor

> ID：12225134
> 
> 赞同：1
> 
> 时间：2012-09-01T05:21:52.373
> 
> 标签：java, spring

I have a standard bean with some properties that need to be autowired.

```
@Service
public class MyServiceImpl implements MyService {

    @Autowired
    private FirstRepository first;

    public MyServiceImpl() {

    } 
```

I use a Java Config to find the beans:

```
@Configuration
@ComponentScan(basePackages = "com.company", excludeFilters = { @Filter(Configuration.class) })
public class MainConfig {
} 
```

However, the FirstRepository Bean doesn't exist so I create it in a BeanFactoryPostProcessor:

```
public class RepoGeneratorPostProcessor implements BeanFactoryPostProcessor {

    public void postProcessBeanFactory(
            ConfigurableListableBeanFactory beanFactory) throws BeansException {

        GenericBeanDefinition jpaR = new GenericBeanDefinition();
        jpaR.setBeanClass(JpaRepositoryFactoryBean.class);
        jpaR.setAutowireCandidate(true);
        jpaR.setAutowireMode(GenericBeanDefinition.AUTOWIRE_BY_TYPE);
        jpaR.setLazyInit(false);
        jpaR.setPropertyValues(new MutablePropertyValues().add("repositoryInterface", FirstRepository.class));

        RootBeanDefinition definition = new RootBeanDefinition();
        definition.setBeanClass(FirstRepository.class);
        definition.setAutowireCandidate(true);
        definition.setFactoryBeanName("&jpaR");
        definition.setFactoryMethodName("getObject");
        definition.setAutowireMode(GenericBeanDefinition.AUTOWIRE_BY_NAME);
        definition.setLazyInit(false);
        definition.setAttribute(RequiredAnnotationBeanPostProcessor.SKIP_REQUIRED_CHECK_ATTRIBUTE, Boolean.TRUE);

        BeanDefinitionRegistry registry = (BeanDefinitionRegistry)beanFactory;
        registry.registerBeanDefinition("jpaR", jpaR);
        registry.registerBeanDefinition("first", definition);

 } 
```

When I start my application I get the following exception which seems to suggest that Spring can't find the FirstRepository bean.

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.company.FirstRepository] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. 
```

If I remove the @Autowired annotation I can see after start up that the FirstRepository bean is properly created.

Any suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T05:51:00.803

此异常表示`FirstRepository`在构建项目时没有为该类定义 bean。*我在这里也看不到。*

最简单的解决方案是像这样在您的 bean 定义中`application-context.xml`：

```
<bean id="firstRepository" class="your.package.FirstRepository" autowire="byName"/> 
```

在这种情况下，在启动时，会有那个 bean 定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-17T11:31:05.653

我认为您不需要在 beanname 之前的 &

```
definition.setFactoryBeanName("&jpaR"); 
```

我在我的项目中使用了类似的东西

```
definition.setFactoryBeanName("jpaR"); 
```

它按预期工作

如果您需要首先获取 bean 的工厂 bean，则需要 & 。&first 应该返回 jpaR。

[http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-extension-factorybean](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-extension-factorybean)

# javascript - 在jquery中的元素上停止事件传播

> ID：12225136
> 
> 赞同：1
> 
> 时间：2012-09-01T05:22:13.340
> 
> 标签：javascript, jquery

我有一个元素如下所示：

```
<div id="treeTable123" class="collapsed">
<div id="test"></div>
</div> 
```

我已使用 jquery 将点击功能绑定到 id 为“test”的 div。功能1：

```
 $(document).delegate('#test', 'click', function(e){
   ....
 }); 
```

我有另一个绑定到其他元素的点击功能：function2：

```
 $('[id^="treeTable"]').delegate('.collapsed', 'click', function(e){
  }); 
```

当我单击 id 为“test”的 div 时，两个事件都会被触发。所以我想阻止函数2中的事件点击函数1内的事件。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T13:21:14.940

```
$('[id^="treeTable"]').delegate('.collapsed', 'click', function(e){
   if($(e.target).closest('#test').length === 0) {
      // code placed inside this condition is not executed on clicking the element #test
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:29:47.750

只需将`e.stopPropagation()`表单称为第一个回调。这是一个演示[http://jsfiddle.net/eyXT7/2/](http://jsfiddle.net/eyXT7/2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T05:46:43.860

你可以简单地使用`e.stopPropagation()`

[更多信息](http://api.jquery.com/event.stopPropagation/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T06:05:26.310

正如你所拥有的，它是不可能的。如果您不使用委托，则可以这样做，因为事件必须冒泡到委托目标才能触发事件处理程序。因此 function2 将在 function1 之前触发，并且您无法阻止它在触发后触发。

```
 $('#test').on('click', function(e){
     e.stopPropagation();
   ....
 }); 
```

[http://jsfiddle.net/r5JaL/](http://jsfiddle.net/r5JaL/)

# asp.net-mvc - FluentValidation Autofac ValidatorFactory

> ID：12225140
> 
> 赞同：9
> 
> 时间：2012-09-01T05:23:30.620
> 
> 标签：asp.net-mvc, autofac, fluentvalidation

我需要能够提供`IComponentContext`给我`ValidatorFactory`解决 FluentValidation 验证器。我有点卡住了。

验证器工厂

```
 public class ValidatorFactory : ValidatorFactoryBase
    {
        private readonly IComponentContext context;

        public ValidatorFactory(IComponentContext context)
        {
            this.context = context;
        }

        public override IValidator CreateInstance(Type validatorType)
        {
            return context.Resolve(validatorType) as IValidator;
        }
    } 
```

如何提供上下文并注册`ValidatorFactory`

```
FluentValidation.Mvc.FluentValidationModelValidatorProvider.Configure(x => x.ValidatorFactory = new ValidatorFactory()); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T16:51:17.417

与其将它与 Autofac 紧密耦合，不如`DependencyResolver`直接使用它使其普遍适用于任何对象：

```
public class ModelValidatorFactory : IValidatorFactory
{
  public IValidator GetValidator(Type type)
  {
    if (type == null)
    {
      throw new ArgumentNullException("type");
    }
    return DependencyResolver.Current.GetService(typeof(IValidator<>).MakeGenericType(type)) as IValidator;
  }

  public IValidator<T> GetValidator<T>()
  {
    return DependencyResolver.Current.GetService<IValidator<T>>();
  }
} 
```

然后，您可以将任何类型的验证器注册`DependencyResolver`为强类型`IValidator<T>`，它总是会最终解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T17:47:55.477

我想通了。如果你有`ValidatorFactory`take `IComponentContext`，Autofac 会自动注入它。

验证器工厂

```
 public class ValidatorFactory : ValidatorFactoryBase
    {
        private readonly IComponentContext context;

        public ValidatorFactory(IComponentContext context)
        {
            this.context = context;
        }

        public override IValidator CreateInstance(Type validatorType)
        {
            return context.Resolve(validatorType) as IValidator;
        }
    } 
```

注册`ValidatorFactory`

```
FluentValidation.Mvc.FluentValidationModelValidatorProvider.Configure(x => x.ValidatorFactory = new ValidatorFactory()); 
```

# jquery - Setting up the height of two elements dynamically with jquery

> ID：12225145
> 
> 赞同：0
> 
> 时间：2012-09-01T05:24:39.060
> 
> 标签：jquery, css

I have a section like - `<section id="left_side"> //Some crap here.</section>` and an aside element like this - `<aside id="right_side"> //Some crap here.</aside>`

What I want to do is when the height of the aside container is greater than the section container, then using jQuery I want it's height to expand and be greater or equal to the aside container.

But, at the same time if the aside is smaller than the section container then I want it's height to expand and be equal to the section container.

I have absolutely no idea how to do this using jQuery.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:39:54.013

```
$('.section-container').on('adjustNeighbors', '#leftside,#rightside', function () {
  var thisHeight = $(this).outerHeight();
  var sectionToResize = $(this).is('#leftside') ? '#rightside' : '#leftside';

  $(sectionToResize).css('height', thisHeight + 'px');
}); 
```

并像这样触发它..

```
function someFunction(){    
    // some code that resized #leftside or #rightside
    thatSection.trigger('adjustNeighbors');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T06:27:26.313

```
function resize_section_aside() {
     var section = $('leftside'),
         aside = $('rightside'),
         section_height = section.height(),
         aside_height = aside.height();
     if( aside_height > section_height ) {
        section.height( aside_height );  // re-size section to aside
     } else {
        aside.height( section_height );   // re-size aside to section
     }
    });
}

$(function() {
   resize_section_aside();
}); 
```

`DOM`上面的代码将在加载完成时触发。如果您需要任何事件来触发它，那么只需`resize_section_aside()`在该事件处理程序中调用该函数。

# computer-science - Minimum number of statements: P or NP?

> ID：12225150
> 
> 赞同：1
> 
> 时间：2012-09-01T05:26:16.610
> 
> 标签：computer-science, theory, proof

It is a common programmer hobby to write programs which accomplish a task in 1 line of source code. But that is a bit trivial: I can take 1 000 000 lines of code, delete all the line breaks, and voila! 1 line!

So to make things interesting, we can count *statements*. For a C-style language, a simple of way of counting statements is counting semicolons: So nesting a million if-elses is fine.

Say you've got a program ***P*** with ***n*** statements. It goes through a sequence of states (variable values) ***s*** (where ***s*** is a vector) and produces output ***x***. We can pose two questions:

1.  Can a program with fewer than ***n*** statements produce output ***x***?
2.  Can a program with fewer than ***n*** statements go through some subset of ***s***?

Immediately, some things become obvious. Take the following program:

```
int sum = a+b;
float mean = sum/2.0;
return mean; 
```

We can refactor (or should I say "defactor") this into a one liner:

```
return (a+b)/2.0; 
```

Can every program be defactored to one line? Take this program:

```
string x = "";
for (int i = 0; i<a; i++)   // Should these semicolons count?
{
    x = x + ".";
}
return x; 
```

It's a bit more challenging.

The question can be answered exhaustively by trying every possible program with less than ***n*** statements, a number which is finite (theoretically you could have constants with infinitely many possible values, but no real language has infinite memory to store them or infinite disk space to accommodate the source code).

However:

A. Is it possible to prove for a program ***P*** which produces ***x*** (perhaps through ***s***) with ***n*** statements that no ***Q*** which can do it in ***m*** statements can be found (in an efficient manner)?

B. Can the minimum ***n*** be found (in an efficient manner)?

C. Is minimum ***n*** guaranteed to be 1?

You can assume any language you want, although real languages would be more interesting. Please provide a definition of a "statement" in your language if your language is unusual.

I have assumed imperative languages, but adaptations of the problem to functional languages are welcome.

There is a trivial solution: For any ***P***, run ***P*** and record ***x***. Now write a program ***Q*** which simply prints ***x***. For programs with input, make a very long if-else with each input mapped to a correct output.

This solution is unsatisfactory, although I'm not entirely sure why. Firstly, for infinite possible inputs it's impossible (but I already covered my ass by saying real programs are finite, so we can say real input is finite). Second, it only technically passes through a subset of ***s***: Namely the empty set. Third, it's really anticlimactic.

Any help with defining away this little clever trick is also appreciated.

**PS:** For whatever my word is worth, this isn't homework. I simply got curious about the problem and tried to phrase it as clearly as I could. Of course, I would still say that if it *was* homework, so...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T09:44:53.090

由于语句的概念是特定于语言的，因此在某些语言中，每个程序都可以编写为单个语句或表达式。*地狱，甚至有些语言必须*将每个程序编写为单个表达式。

也就是说，假设一种语言不是这种情况（并且肯定存在这样的语言），找到解决给定问题的最少语句的问题既不在 P 也不在 NP 中——这是不可判定的。

> 这个问题可以通过使用少于 n 个语句的每个可能的程序来详尽地回答，这个数是有限的

由于其中一些程序不会终止，并且不可能知道哪些程序会终止（停止问题），因此这是行不通的。

此外，在大多数语言中，少于 n 条语句的程序数量**也不**是有限的。例如，`return foo + bar + ... + baz;`在大多数语言中，有无数种形式的陈述。

> A. 是否有可能证明一个程序 P 用 n 个语句产生 x（可能通过 s），不能（以一种有效的方式）在 m 个语句中找到可以做到这一点的 Q？

（我假设你在`m < n`这里忘记了，否则这个问题没有意义。）

不，根本无法证明。

> B. 是否可以（以有效的方式）找到最小值 n？

不，根本找不到。

> C. 最小 n 是否保证为 1？

正如我在开始时所说，这取决于语言，出于上述问题的目的，我假设一种语言的答案是否定的。

# php - PHP variables inside Xenforo template

> ID：12225157
> 
> 赞同：0
> 
> 时间：2012-09-01T05:27:46.540
> 
> 标签：php

I'm trying to include a PHP file in XenForo template , I think my params are wrong but anyway , it just doesn't output if I put {$varhere}. Can anyone help? My code: Class: [http://codepad.org/BaImQd1O](http://codepad.org/BaImQd1O) Listener: [http://codepad.org/KrNxaN4z](http://codepad.org/KrNxaN4z) My question is , what params I need to make it work in the template I need?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:41:21.840

在设置新的 params 变量后尝试将其设置为模板。所以...

```
$params = $template->getParams();
$params += $hookParams;
// Set in the template
$template->setParams($params); 
```

# python - Python2.6 是否有新的 `UserDict` 版本？

> ID：12225159
> 
> 赞同：2
> 
> 时间：2012-09-01T05:27:55.183
> 
> 标签：python, dictionary

我们代码库中的某些类继承自`UserDict`以像`dict`对象一样工作。

我试图`metaclass`为他们申请一个，但我不能，因为他们是老式课程。

那么，有没有可以使用的新版本`UserDict`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T05:30:08.103

您可以从当前版本的 Python 中[的 dict 继承。](http://docs.python.org/library/userdict.html)

从文档中：

> 对此类的需求在很大程度上已被直接从 dict 子类化的能力所取代（该功能从 Python 2.2 版开始可用）。

# iphone - 未调用 viewwillappear 和 viewdidappear

> ID：12225162
> 
> 赞同：4
> 
> 时间：2012-09-01T05:28:36.950
> 
> 标签：iphone, ios, uinavigationcontroller, uitabbarcontroller, viewwillappear

这个问题很常见，但我无法用任何可用的答案来解决它。

我正在使用 iOS 5.1。我的导航控制器是标签栏视图控制器中的一个标签。有一个表格视图，其中选择一行会推动新的视图控制器。

仅在选择第二行时才会出现此问题，并且仅在某些时候出现。这不正常。Pushed 视图变为空白 - `viewWillAppear`/`viewDidAppear`未被调用。单击导航栏的后退按钮 - 根视图的`viewWillAppear`/`viewDidAppear`也没有被调用，使其空白。

我以完全相同的方式推动选择第一行/第二行的视图。但问题只发生在第二行。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    switch (indexPath.row) {
        case 0:
            AViewController *aObj = [[AViewController alloc] init];
            aObj.homeObj = self;
            [self.navigationController pushViewController:aObj animated:YES];
            [aObj release];
            break;
        case 1:
            BViewController *bVCObj = [[BViewController alloc] init];
            bVCObj.homeObj = self;
            [self.navigationController pushViewController:bVCObj animated:YES];
            [bVCObj release];
            break;
        default:
            break;
    }
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

我试过[这个](https://stackoverflow.com/questions/4289617/why-isnt-viewwilldisappear-or-viewdidappear-being-called?rq=1)和[这个](https://stackoverflow.com/questions/3560669/viewwillappear-viewdidappear-not-being-called-not-firing)但徒劳无功。

1.  `viewDidLoad`正在被调用`BViewController`，但是，`viewWillAppear`并`viewDidAppear`没有被调用。以下是我的`viewDidLoad`：

    ```
    - (void)viewDidLoad
    {
        [super viewDidLoad];
        self.view.backgroundColor = [UIColor blackColor];
        NSLog(@"nav stack: %@", [self.navigationController viewControllers]);
        NSLog(@"nav stack: %@", [[self.navigationController visibleViewController] description]);
        //some initialization and call of methods
    } 
    ```

2.  这不正常。有时我会遇到这种情况，这种情况一直持续到我从后台关闭应用程序并重新启动它。但有时它工作得很好。我只是将我的视图控制器推送到 nab 堆栈。

3.  正如我在评论中提到的，它是标签栏控制器中的常规导航控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:08:20.327

你如何定义你对`AViewController`和的看法`BViewController`？通常你会使用`initWithNibName`，例如

```
AViewController *aObj = [[AViewController alloc] initWithNibName:@"mynibname" bundle:nil]` 
```

正如卡尔指出的那样，您显然可以使用 just `init`（尽管我没有在[`UIViewController`Class Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)中看到这一点），但是系统会非常注意您的 NIB 文件的名称。但是，文档确实说，您可以使用`initWithNibName`并传递 a`nil`作为 NIB 名称，在这种情况下，它会尝试为您找到它。但是，就个人而言，如果您的结果不一致，我会尝试使用`initWithNibName`并明确传递您的 NIB 的名称，看看是否可以纠正这种情况。

或者您是`loadView`在两个控制器中以编程方式构建视图？然后您需要向我们展示这些`loadView`例程（不要与 混淆`viewDidLoad`）。

但根据文档，您需要指定您的 NIB 或使用`loadView`. 请参阅类参考中的[视图管理](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW55)讨论。`UIViewController`

**更新：**

鉴于您的反馈，我有几个想法：

1.  不用说，问题显然与上述代码无关。您需要扩大搜索范围并向我们展示更多代码。也许向我们展示你`viewDidLoad`的B？

2.  通常，当您没有收到此类事件时，这是因为视图控制器层次结构与视图层次结构不同步。人们这样做的最常见方式是，如果他们`[addSubview someNewController.view]`在某个时候做了类似“”之类的事情。如果您在任何上下文中使用视图控制器（a）您的应用程序委托的初始配置；(b) `presentViewController`（或解雇）；或 (c) `pushViewController`（或 pop），那么您可能想分享您所做的事情。

3.  正如 andreamazz 所指出的，您的评论“我的导航控制器位于选项卡栏控制器的视图控制器内”，如果从字面上阅读它会有点令人不安。您可以将导航栏放在视图控制器的视图中，但不能将导航控制器放在视图控制器中（除非您正在执行视图控制器包含，这是一个完全不同的野兽）。同样令人担忧的是，在您的另一个问题中，您说：“在 UIViewController 中嵌入 UINavigationController 或 UITabBarController（我的情况）会以某种方式中断这些方法的调用。” 问题是，您不会将导航控制器嵌入到其他视图控制器中（除非它本身就是一个容器控制器，例如选项卡视图控制器），而是相反。

4.  这很不寻常，但我的项目被破坏了，最终进入了奇怪的状态。至少，我可能会建议“产品”-“清洁”并重建。如果问题仍然存在，并且您已将问题隔离到 B 的 NIB，则暂时重命名它并从头开始构建一个快速而肮脏的 NIB。

# c++ - 为什么输出包含 - 在这个程序中？

> ID：12225166
> 
> 赞同：1
> 
> 时间：2012-09-01T05:29:54.343
> 
> 标签：c++, stl, vector, factorial

这是一个计算数字阶乘的程序，我将它存储在一个向量中。该程序适用于高达 30 的输入，但对于 n=40 或更大，它会产生奇怪的输出。例如。

输入：

```
3

4

30

40 
```

输出：

```
24

265252859812191058636308480000000

-190350521-236-6-6-5-745611269596115894272000000000 
```

这个 - 符号来自哪里？

```
#include<vector>
#include<cstdio>
#include<algorithm>
using namespace std;
vector<int> solve(int n){
        if(n==1){
                vector<int> ans;
                ans.push_back(1);
                return ans; 
        }
        vector<int> b=solve(n-1);
        int temp=0,x=0;
        for(int i=0;i<b.size();i++){
                x=b[i]*n+temp;
                b[i]=x%10;
                temp=x/10;
        }
        if(temp!=0)
            b.push_back(temp);
        return b;
}   
    int main(){
            int t,n,i;
            scanf("%d",&t);
            while(t--){
                    scanf("%d",&n);
                    vector<int> ans=solve(n);
                    for(int j=ans.size()-1;j>=0;j--)
                             printf("%d",ans[j]);
                    printf("\n");
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:42:40.437

这是整数溢出。一个固定大小的整数只能容纳这么大的值，然后它就会溢出。您可能想要使用像 GMP 这样的任意精度整数库。

使用这些更改运行您的代码，它会变得很明显：

```
vector<int> solve(int n)
{
    if(n==1){
            vector<int> ans; 
            ans.push_back(1);
            return ans;
    }
    vector<int> b=solve(n-1);
    int temp=0,x=0;
    cout << "b.size=" << b.size() << ", n=" << n << endl;
    for(int i=0;i<b.size();i++){
            x=b[i]*n+temp;
            cout << "b[ " << i << "]=" << b[i] << ", temp= " << temp << ", x=" << x << endl;
            b[i]=x%10;
            temp=x/10;
    }
    if(temp!=0)
    {
        cout << "push_back(" << temp << ")" << endl;
        b.push_back(temp);
    }
    return b;
} 
```

# xcode - 使用 Xcode + SVN / Git 一步构建的过程

> ID：12225168
> 
> 赞同：4
> 
> 时间：2012-09-01T05:30:12.537
> 
> 标签：xcode, git, svn, version-control

我们有几个团队在运行 iOS 项目并使用 SVN/Git 进行版本控制，现在我需要知道如何使用 Xcode 和 SVN/Git 一步构建（使应用程序发布）的过程。

需要知道 ＃

*   其他人是如何做到的（一步构建到发布）
*   什么是最佳实践（几个团队，SVN 或 Git）

# c - int main() 和 int main(void) 之间的区别？

> ID：12225171
> 
> 赞同：63
> 
> 时间：2012-09-01T05:30:32.720
> 
> 标签：c, main, void

以下是什么意思：

```
int main(void) {...} 
```

VS

```
int main() {...} 
```

?

我认为这`int main() {...}`意味着 main 没有收到任何参数（来自命令行），但是：

```
int main(int argc, char *argv[]) 
```

做。

但是，是什么`int main(void) {...}` 意思？还有，**空**代表什么？

我看过[这里](https://stackoverflow.com/questions/636829/difference-between-void-main-and-int-main)，但不知何故这是一个不同的问题。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-01T05:38:05.497

在 C++ 中，没有区别。

* * *

在 C 中，差异是值得怀疑的。有些人喜欢争辩说，后一个版本（没有 的版本`void`）在技术上只是一个常见的实现扩展，并且由于标准中的措辞而不能保证按照标准工作。但是，该标准明确指出，在函数定义中，一组空参数具有明确定义的行为：该函数不接受任何参数。因此，这样的 main 定义与标准中的以下描述相匹配：

> 它 [main] 应定义为返回类型为 int 且不带参数。

然而，两者之间有一个明显的区别：即，没有`void`未能为函数提供正确原型的版本：

```
// this is OK.
int main()
{
  if (0) main(42);
}

// this requires a diagnostic to be shown during compiling
int main(void)
{
  if (0) main(42);
} 
```

哦，为了完整`void`起见：在所有函数声明符中都有以下含义：

> (6.7.6.3p10) 类型为 void 的未命名参数作为列表中唯一项的特殊情况指定该函数没有参数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-10T08:48:36.503

首先，托管系统和独立系统所允许的内容有所不同，如此处[所示](https://stackoverflow.com/questions/204476/what-should-main-return-in-c-and-c/31263079#31263079)。

对于托管系统，适用 5.1.2.2.1 程序启动：

> 程序启动时调用的函数名为 main。实现没有声明这个函数的原型。它应定义为返回类型为 int 且不带参数：

```
int main(void) 
```

...（更多关于 argv/argc 等样式的文字如下）。

有趣的部分是“没有参数”。`int main()`并且`int main (void)`目前是等价的，因为它们都是函数声明符并且没有参数。以下适用（6.7.6.3）：

> 10 void 类型的未命名参数作为列表中唯一的项目的特殊情况指定该函数没有参数。
> 
> /--/
> 
> 14 标识符列表仅声明函数参数的标识符。**作为该函数定义的一部分的函数声明器中的空列表指定该函数没有参数。**不属于该函数定义的函数声明器中的空列表指定不提供有关参数数量或类型的信息。145)

强调我的，粗体文本适用于`int main()`. 文末还有注释 145)，上面写着“参见‘未来语言方向’(6.11.6)”：

> 6.11.6 函数声明器
> 
> 使用带空括号的函数声明符（不是原型格式参数类型声明符）是一个过时的特性。

这就是区别。由于上述原因，作为函数声明`int main()`器是**不好的风格**，因为它不能保证在下一版本的 C 标准中工作。它在 C11 中被标记为过时的功能。

因此，您应该始终`int main (void)`在托管系统上使用，并且永远不要使用`int main()`，即使这两种形式目前是等效的。

* * *

在 C++ 中，这两种形式是完全等价的，但`int main()`出于主观、美观的原因，存在首选风格（Bjarne Stroustrup 这么说……这可能是解释为什么以特定方式做某事的一个非常糟糕的理由）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-01T05:37:56.643

在 C 中，在*原型*中（虽然不是在 C++ 中），空参数列表意味着函数可以接受*任何*参数（在函数的定义中，它意味着没有参数）。在 C++ 中，空参数列表意味着没有参数。在 C 中，要获得没有参数，您必须使用`void`. 请参阅[此](https://stackoverflow.com/questions/693788/c-void-arguments)问题以获得更好的解释。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-01T05:38:14.097

在 C++ 中具有一个函数`foo(void)`和`foo()`是一回事。但是，在 C 语言中则不同：`foo(void)`是没有参数的函数，而`foo()`是具有未指定参数的函数。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-23T03:05:05.437

在 C++ 中，没有区别，两者都是一样的。

这两个定义在 C 中也有效，但是第二个带有 void 的定义在技术上被认为更好，因为它清楚地指定 main 只能在没有任何参数的情况下调用。在 C 语言中，如果函数签名没有指定任何参数，则意味着可以使用任意数量的参数或不使用任何参数来调用该函数。例如，尝试编译并运行以下两个 C 程序（请记住将文件另存为 .c）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-01T05:31:50.097

在 C++ 中，两者没有区别，`int main()`是合法的签名和返回类型`main`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-24T02:47:17.973

我知道线程很旧，但是几年前这个问题困扰了我一段时间，所以我想投入我的半分钱（如果那样的话）。

无论上下文如何，我总是将 C 函数视为具有固定数量的参数，除非它们使用 va_args。也就是说，我相信 main 总是有原型：

```
int main(int argc, char **argv). 
```

即使没有传递参数，该函数在堆栈上也有这些参数，因为主函数没有函数重载。

C 确实有能力通过假装参数不存在来进行原始重载。在这种情况下，参数仍然被传递并且在堆栈上，但你永远不会访问它，所以它只是减少了源代码的大小。

说int main()只是表示我知道函数可能有参数，但是我没有使用，所以我写了int main()。

说 int main(void) 表示 main CERTAINLY 没有参数，并暗示有两个不同的函数原型：

```
int main(void);
int main(int argc, char **argv); 
```

由于 C 没有函数重载，这对我来说有点误导，我不信任其中包含 main(void) 的代码。如果 main 不带任何参数，我不会，在这种情况下 main(void) 完全可以。

注意：在某些实现中，main 中的参数比 argc 和 argv 多，例如 env，但这并不困扰我，因为我知道我并没有明确说这是仅有的两个参数，但那些是最小参数拥有更多是可以的，但不能更少。这与直截了当地说 int main(void) 大喊大叫，因为这个函数没有参数，这是不正确的，因为它确实，它们只是被省略了。

这是我的基础代码：

```
/* sample.c - build into sample. */
#include <stdio.h>

int main(void)
{
    int _argc = *((int *)2686800);
    char ***_pargv = (char ***)2686804;
    int i;

    for (i = 1; i < _argc; ++i) {
        printf("%s ", (*_pargv)[i]);
    }

    return 0;
} 
```

./sample 我显然有论据

该函数显然有传递给它的参数，尽管通过在函数原型中键入 void 明确表示它没有。

如 eq- 上面所说：

> (6.7.6.3p10) 类型为 void 的未命名参数作为列表中唯一项的特殊情况指定该函数没有参数。

因此，说函数有 void 作为参数但实际上在堆栈上有参数是矛盾的。

我的观点是争论仍然存在，因此明确断言 main 没有争论是不诚实的。诚实的方法是说 int main()，它不声明它有多少参数，只声明你关心多少参数。

注意 2：_argc、_pargv 取决于系统，要找到您的值，您必须通过运行以下程序找到它们：

```
/* findargs.c */
#include <stdio.h>

int main(int argc, char **argv)
{
    printf("address of argc is %u.\n", &argc);
    printf("address of argv is %u.\n", &argv);

    return 0;
} 
```

对于您的特定系统，这些值应该保持正确。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-21T19:44:23.393

**在 C++ 中， int main()**和**int main(void)**之间没有区别。
但在 C 中，它们有点不同。
**int main()**表示主函数可以带任意数量的参数或不带任何参数调用。另一方面，**int main(void)**表示将在没有任何参数的情况下调用主函数

```
#include <stdio.h> 
int main() 
{ 
    static int i = 5; 
    if (--i){ 
        printf("%d ", i); 
        main(10); 
    } 
} 
```

> 输出：4 3 2 1

```
#include <stdio.h> 
int main(void) 
{ 
    static int i = 5; 
    if (--i){ 
        printf("%d ", i); 
        main(10); 
    } 
} 
```

> 它会显示错误。因为，in`int main(void)`参数是 void 但在我们采用的程序中`main(10)`（它定义了一些值，而不是 void）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-30T05:24:31.313

从技术上讲，如果您的主机部分符合 POSIX，那么您有

```
int main(); // this legacy is always used by the run time library
int main(int argc); // illegal by compiler
int main(int argc, char** argv); // required by C standards
int main(int argc, char** argv, char** envp); // required by POSIX standard 
```

如果你有 Mac，还有这个

```
int main(int argc, char** argv, char** envp, char** apple); // required by Macintosh standard 
```

您的主机将发送所有参数，因此主机将始终发送 argc、argv 和 envp（如果您使用的是 Apple 产品，还有苹果），但程序员可以将它们`main`声明为无效。隐式函数指针类型转换在技术上是一种未定义的行为。

为了防止类型转换未定义的行为，`int main()`它是一种中性形式，这意味着它可以使用规范类型提升（int 或更大，以及 double 或更大）采用任何固定数量的参数，并且`int main(int argc, ...)`意味着它也可以采用规范类型提升的任何可变数量的参数. 换句话说，表单`return_type function_name()`是未定义行为的例外。

# java - C++ 和 Java 数据结构中的重叠：堆栈“top”与“peek”

> ID：12225176
> 
> 赞同：1
> 
> 时间：2012-09-01T05:31:29.817
> 
> 标签：java, c++, data-structures, stack

我经常在 Java 和 C++ 中使用 Stack 数据结构。这是一种标准的数据结构，在实现许多算法时非常常见。

我的问题是（以及让我发疯的事情）为什么 C++ 使用“top”作为函数名，它返回最顶层的元素值而不删除它，而 Java 使用“peek”作为它的方法名？

我知道没有数据结构的标准，但是计算机科学发展得还不够远以至于应该有一个标准吗？或者我只是一个新手，不知道标准......

你们这些专业程序员是否编写自己的数据结构库来遵守跨语言的通用接口？在我看来，这似乎是最好的选择。我用 C++、Java、Python、C、Perl 和 PHP 编写代码。除了为所有这些语言编写自定义界面之外，我没有看到任何其他方法。我喜欢“窥视”，但有什么我应该瞄准的标准吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T05:39:51.080

编写自定义接口只是为了使方法名称相同将是浪费大量时间。究竟有什么意义？即使有这样的功能，您也无法轻松地在您提到的语言之间复制和粘贴大多数代码。

就个人而言，我不喜欢 STL 向量方法 push_back() 的名称。如果它只是被称为 add()，我会更喜欢它，一方面它会减少打字。然而，我从来没有想过我可能会改变它。这样做只会降低我的代码的可移植性和对其他人的可读性。现在，我想这可以通过预处理器宏相当容易地完成，但即使这样在我看来也是浪费时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T05:43:14.767

不，不可能，不会，也永远不会成为标准。无论如何，这两个名字都是有效的，如果你问我，`top`更有意义。此外，正如@mimicocotopus 所说，拥有相同的方法名称不会让您将粘贴代码从一种语言复制到另一种语言。此外，像 C++ 和 Java 这样的语言非常不同，并且支持不同的特性。如果一个标准必须使用最小的公分母，它就无法利用它实现的语言的所有特性。

不管怎样，还记得上次我们标准化的东西发生了什么吗？跨浏览器兼容性和移植 C 代码。光是想想就让人不寒而栗。

# c++ - c++ 返回和使用 char 数组指针

> ID：12225177
> 
> 赞同：0
> 
> 时间：2012-09-01T05:31:33.030
> 
> 标签：c++, arrays, pointers, char

这是我的代码：

```
#include<stdio.h>
#define MAXLINE 100

/*print the reverse of the input*/

int getline1(char line[], int maxline);
char *reverse(char);

main(){
    int len;
    char line[MAXLINE];
    char *rp;
    while ((len = getline1(line, MAXLINE)) > 0)
            rp = reverse(line);
            printf("%s", *rp);
    return 0;
}
int getline1(char s[], int lim){
    int c, i;

    for (i = 0; (c=getchar()) != EOF && c != '\n'; i++)
            if (i > lim-1)
                    continue;
            else
                    s[i] = c;
    if (c == '\n'){
            s[i] = c;
            i++;
    }
    s[i] = '\0';
    return i;
}
char *reverse(char ca[]){
    int i;
    int i1 = 0;
    char *rp;
    char reversed[MAXLINE];
    for (i = MAXLINE-1; i >= 0; i--){
            reversed[i1] = ca[i];
            i1++;
    }
    rp = reversed;
    return rp;
} 
```

但是当我尝试编译它时，我收到以下错误：

```
reverse.cpp: In function ‘int main()’:
reverse.cpp:14:20: error: invalid conversion from ‘char*’ to ‘char’ [-fpermissive]
reverse.cpp:7:7: error:   initializing argument 1 of ‘char* reverse(char)’ [-fpermissive]
reverse.cpp:15:19: warning: format ‘%s’ expects argument of type ‘char*’, but argument 2 has type ‘int’ [-Wformat] 
```

我对 C++ 没有太多经验。我究竟做错了什么？我只想创建一个指向 char 数组的指针并返回它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T05:37:17.483

> 我只想创建一个指向 char 数组的指针并返回它。

您似乎想要返回一个字符串。那不是指向 char 数组的指针。即使您的程序已编译，您也会调用 UB，因为您返回一个指向自动对象的指针 - 并且您的代码中还有很多其他运行时错误。你很幸运，你也犯了一个编译时错误，所以编译器不接受你的程序。这个 C++ 程序实现了你想要的：

```
#include <string>
#include <iostream>

std::string reverse(std::string val) {
    return std::string(val.rbegin(), val.rend());
}
int main() {
    std::string str;
    while(std::getline(std::cout, str))
        std::cout << reverse(str);
} 
```

> 我究竟做错了什么？

您正在学习 C89 而不是 C++11。它们*真的是*不同的东西。

如果您想学习编写 C++ 代码，则必须学习`std::string`和标准库的其余部分。`char*`使用、`char[]`和，您将一事无成`MAGIC_BUFFER_SIZE`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T05:34:37.857

你首先声明函数原型

```
char *reverse(char); 
```

但实际函数声明为

```
char *reverse(char ca[]) 
```

那是你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T05:48:18.393

你想达到什么目的？代码中有逻辑错误...

```
 while ((len = getline1(line, MAXLINE)) > 0)
        rp = reverse(line);
        printf("%s", *rp); 
```

这部分将在每个 /n 字符上调用 reverse ，但永远不会调用 printf ...您还有 100 个字符的字符串，并且您的反向会将前导字符放在反向字符串的末尾。所以如果您有 5 个字符的字符串，您将在前 95 个位置有垃圾，然后是你需要的 5 个字符......

# asp.net - 我应该将 Google 分析代码放在我的母版页的什么位置？

> ID：12225178
> 
> 赞同：1
> 
> 时间：2012-09-01T05:31:35.310
> 
> 标签：asp.net

我应该将 Google 分析代码放在我的母版页的什么位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T05:39:47.840

**更新（2018-10-22）：**

就在`<head>`标签之后：

[https://support.google.com/analytics/answer/1008080?hl=en](https://support.google.com/analytics/answer/1008080?hl=en)

**原始答案：**

就在`</head>`标签之前。

[https://support.google.com/analytics/bin/answer.py?hl=en&answer=1008080](https://support.google.com/analytics/bin/answer.py?hl=en&answer=1008080)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T05:42:10.583

就在`</body>`标签之前，以防止减慢下载 js 脚本阻止页面内容。

更多细节：http: [//developer.yahoo.com/performance/rules.html#js_bottom](http://developer.yahoo.com/performance/rules.html#js_bottom)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T08:29:16.413

如果您更喜欢将 Analytics 代码段放在页面底部，您应该知道不必将整个代码段放在底部。您仍然可以通过将代码片段分成两半来保留异步加载的大部分好处——将前半部分保留在页面顶部，将其余部分移到底部。由于跟踪代码段的第一部分对页面渲染几乎没有影响，您可以将该部分留在顶部，并将插入 ga.js 的代码段部分放在底部。

将异步代码片段分成两半的页面可能如下所示：

```
<html>

<head>
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-XXXXX-X']);
    _gaq.push(['_trackPageview']);
  </script>
</head>

<body>
  <p>Page Content</p>

  <script src="some_random_script.js"></script>

  <p>Page Content</p>

  <script type="text/javascript">  (function() {
    var ga = document.createElement('script');     ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:'   == document.location.protocol ? 'https://ssl'   : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
   </script>
</body>
</html> 
```

这两段代码都需要包装在各自的脚本标签中，但只需要将原始异步代码段的最后六行移到底部。将方法推送到 _gaq 的所有行都可以保留在顶部。

# php - PHP - 使用类似于分叉的方法多次定义一个常量？（视窗）

> ID：12225180
> 
> 赞同：0
> 
> 时间：2012-09-01T05:31:45.903
> 
> 标签：php, exec, constants, fork

我目前正在使用一个现有的应用程序，该应用程序在用户登录时定义了几个常量。例如，如果 Alice 登录`SOME_CONSTANT`被定义为`1`，而如果 Bob 登录`SOME_CONSTANT`被定义为`2`。现在我正在尝试编写一个脚本，它会像爱丽丝一样做几件事，像鲍勃一样做几件事。“好像它是”我的意思`SOME_CONSTANT`是为一次迭代定义一种方式，为下一次迭代定义另一种方式。不幸的是，常量在切换值方面并不是最好的，并且重构应用程序以将它们从常量更改为目前不是一种选择。

我考虑过的一种方法是使用 pcntl_fork()。我会在定义常量之前分叉并为每个常量运行一个单独的进程。但是，我希望这个脚本能够在 Windows 和 Linux 上运行。目前 Windows 不直接支持 pcntl 扩展。如果我能提供帮助，我会尽量避免通过 Cygwin 让一切正常工作。

我考虑过的另一种方法是让脚本调用子脚本使用`exec("php childscript.php constant_value")`. 这种方法是否允许一个子脚本以一种方式定义常量，而另一个子脚本以另一种方式定义它？我认为它应该，但我还没有测试它。此外，这种方法还有其他任何人可以看到的主要问题吗？

还有另一种我没有考虑过的方法会是更好的选择吗？感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:33:33.353

正如您已经注意到的，使用`const`变量不是处理任务的可行方法。此外，即使您不需要编写脚本来与多个用户一起做某事，单个实例也行不通 - 您需要在用户登录时“设置常量”，这是您无法做到的做。

如果您正在寻找一个伪`readonly`实现，并且您使用的是 OOP 风格，您可以添加一个`private`变量并覆盖[`__get`](http://php.net/manual/en/language.oop5.overloading.php)魔术方法。因此，当外部请求`SOME_CONSTANT`时，您的类将返回 的值`_someFakeConstant`。然后，在您的`login()`or`switchUser()`类内的方法中，您可以安全地更改该值。

例子：

```
class User {
    private $_someFakeConstant = -1;

    public function __get($name) {
        if ($name == 'SOME_CONSTANT') {
            return $this->_someFakeConstant;
        }
        // handle undefined variables; trigger_error() will work (see example on php.net)
    }

    public function login() {
        // logic to "identify" the user
        $this->_someFakeConstant = 1;
    }
}

$user = new User();
$user->login();
echo $user->SOME_CONSTANT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:59:07.680

使用`exec()`调用 PHP 子脚本的方法似乎工作正常。

# c# - 如何将字符串格式化为越南货币？

> ID：12225182
> 
> 赞同：4
> 
> 时间：2012-09-01T05:31:51.663
> 
> 标签：c#, string-formatting, currency-formatting

如果我将 [区域和语言] 中的格式设置为美国...

```
CultureInfo cul = CultureInfo.CurrentCulture;
string decimalSep = cul.NumberFormat.CurrencyDecimalSeparator;//decimalSep ='.'
string groupSep = cul.NumberFormat.CurrencyGroupSeparator;//groupSep=','
sFormat = string.Format("#{0}###", groupSep);
string a = double.Parse(12345).ToString(sFormat); 
```

结果是：（`12,345`正确）

但是如果我将 [Region and Language] 中的格式设置为越南，那么结果是：`12345`

结果应该是`12.345`。

你能帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T11:35:51.747

You are helping too much. The format specifier is culture insensitive, you always use a comma to indicate where the grouping character goes. Which is then substituted by the actual grouping character when the string is formatted.

This formats correctly:

```
 CultureInfo cul = CultureInfo.GetCultureInfo("vi-VN");   // try with "en-US"
        string a = double.Parse("12345").ToString("#,###", cul.NumberFormat); 
```

You should actually use "#,#" to ensure it still works in cultures that have a uncommon grouping. It wasn't clear from the question whether that mattered or not so I punted for "#,###"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T06:44:42.623

# iphone - 在 iOS 上，有没有办法只搜索带有特定标签的子视图？

> ID：12225184
> 
> 赞同：3
> 
> 时间：2012-09-01T05:32:03.457
> 
> 标签：iphone, ios, uiview

因为现在，`viewWithTag`实际上首先搜索自身，然后所有子视图递归地沿着整个子树搜索具有该标签的视图。

但是，如果我将子视图的标签设置为 100、101 等，然后再查找标签 100，但当前视图的父视图将当前视图的标签设置为 100，该怎么办？然后`viewWithTag`将返回当前视图而不是任何子视图。

同样奇怪的是，如果代码是

```
[fooView viewWithTag: 123] 
```

为什么代码要搜索包括 fooView 本身的子树？就像，代码不知道 fooView 足够好，也不想搜索它。或者换一种说法，`fooView`被告知要搜索自己……这很奇怪。视图不知道自己？（需要搜索自己吗？）

那么有没有办法只搜索子视图和大子视图（不搜索自我）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T05:43:28.630

利用递归性质`-viewWithTag:`

```
- (UIView *)viewWithTagNotCountingSelf:(NSInteger)tag
{
    UIView *toReturn = nil;

    for (UIView *subView in self.subviews) {
        toReturn = [subView viewWithTag:tag];

        if (toReturn) {
            break;
        }
    }
    return toReturn;
} 
```

编辑：这将比“大子视图”更深入：它将获得层次结构中不是自我的任何视图。这也将在`UIView`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-08T14:20:47.887

在查看[文档](https://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/viewWithTag:)`-viewWithTag:`并运行一些测试之后，OP 问题的答案似乎是 - 已经提供了这种行为。

> 返回值
> 
> 接收者层次结构中的视图，其标签属性与标签参数中的值匹配。
> 
> 讨论
> 
> 此方法在当前视图及其所有子视图中搜索指定视图。

我的结论是这意味着“视图”也是一个“子视图”，从而限制了搜索的范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-29T01:13:23.110

让结果 = view.subviews.filter{$0.tag == tag}.first

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T05:37:51.710

对于 1 级：

```
UIView *view;
for (int i = 0; i < viewToSearch.subviews.count; i++){
    UIView *subview = viewToSearch.subviews[i];
    if (subview.tag == tagToSeach){
        view = subview;
        break;
    }
} 
```

要搜索具有多个级别的视图层次结构：

```
__block UIView *view;
BOOL (^__block searchViewForTag)(UIView *,NSInteger) = ^(UIView *aView, NSInteger tag){
    for (UIView *subview in aView.subviews){
        if (subview.tag == tag){
            view = subview;
            return YES;
        }
        if (searchViewForTag(subview,tag)) return YES;
    }
    return NO;
};
NSInteger tagToSearchFor = 1;
searchViewForTag(viewToSearch,tagToSearchFor);

//Do something with view 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-01T05:38:49.340

做这个：

```
NSMutableArray *arrSameViewTag = [NSMutableArray array];
for(UIView *subview in [yourView subviews]) //your view to find subview
{
    if(subview.tag == 123) //specific tah here
    {
        [arrSameViewTag addObject:subview]; //view found add in array
    } 
}
NSlog(@"arrSameViewTag : %@",arrSameViewTag); 
```

要找到特定的 UIButton 或任何 UIElement，然后像这样：

```
NSMutableArray *arrSameViewTag = [NSMutableArray array];
for(id *subview in [yourView subviews]) //your view to find subview
{
  if([subview isKindofClass[UIButton class]) //any UIElement of specific type here
  {
    UIButton *btn = (UIButton *)subview; //same UIElement mentioned for checking it
    if(btn.tag == 123) //specific tah here
    {
        [arrSameViewTag addObject:subview]; //view found add in array
    } 
  }
}
NSlog(@"arrSameViewTag : %@",arrSameViewTag) 
```

# git - 如何git归档项目目录

> ID：12225186
> 
> 赞同：1
> 
> 时间：2012-09-01T05:32:38.117
> 
> 标签：git

我的项目目录结构是这样的：

```
my_project/
    .git/
    a_dir/
    another_file.py
    some_file.py 
```

当我运行 git archive link 这个：

```
git archive --format=tar.gz -o ../my_project-0.1.0.tar.gz  v0.1.0 
```

它归档 my_project 的内容，但不归档 my_project 目录。当我解压缩存档时，默认情况下所有目录和文件都被提取到当前工作目录中。我希望我的存档扩展到一个名为 my_project-0.1.0 的子目录。我可以在 git 命令行上执行此操作吗？我是否设置了我的存储库错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T05:36:51.447

使用`--prefix`. 从[文档](http://www.kernel.org/pub/software/scm/git/docs/git-archive.html)：

> `--prefix=<prefix>/`
> 附加`<prefix>/`到存档中的每个文件名。

因此你可以这样做：

```
git archive --format=tar.gz --prefix=my_project/ -o ../my_project-0.1.0.tar.gz v0.1.0 
```

尾随`/`很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:41:55.903

我会回答我自己的问题。

像这样执行 git 存档：

```
git archive --format=tar.gz --prefix=my_project-0.1.0/ -o ../my_project-0.1.0.tar.gz  v0.1.0 
```

注意前缀后面的 /。

# html - twitter bootstrap - 居中的导航栏

> ID：12225188
> 
> 赞同：0
> 
> 时间：2012-09-01T05:32:55.523
> 
> 标签：html, css, twitter-bootstrap

我有点困惑。我喜欢将普通引导导航栏的菜单项居中。
但我找不到我必须编辑的正确课程。我应该使用`text-align`，还是`margin: 0 auto;`实现这样的事情？

目前我试图在 和 中添加这个`.navbar`CSS`.navbar-inner`参数`.nav`。没有任何效果。

如果有一些引导开发，请帮助我！

你知道是否有引导程序的论坛吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:30:39.823

分配固定高度，然后分配`margin: 0 auto;`给您必须居中的元素，但请记住中心`div`不应该是`floated`或`position: absolute;`并且它具有固定宽度 **，例如**

```
 <div class="parent">
      <div class="inn"> ... </div>
    </div> 
```

居中`.inn`应该有固定的宽度，而不是`floated or position: absolute`，即

```
.inn{
  width: 20px;
  margin: 0 auto;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:39:23.577

您可以尝试执行以下操作：

```
#div-id-inside-navbar{
  left: 50%;
  position: absolute;
  margin-left: -100px /* This should be half the width of your centered content */
} 
```

我在我的引导站点上将徽标居中，这就是我必须做的。我还没有调查确切的原因，但我不相信`text-align: center;`它工作得那么好。这类似于人们经常使用 CSS 垂直居中的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T06:00:31.150

要回答您的问题，您应该修改的选择器看起来是`.navbar .nav`

修改该选择器，您可以继续实施您的保证金方法：

```
.navbar .nav {
    margin: 0 auto;
    width: ...px;     /* width of .navbar .nav */
    float: none;
} 
```

或者，类似于尼克提到的：

```
.navbar .nav {
    position: absolute;
    left: 50%;
    margin-left: ...px; /* half of width of .navbar .nav */
} 
```

我没有深入研究这个，但它看起来像是`.navbar .nav`得到了一个与之相关的宽度（对我来说，它是 1170 像素）。由于它的宽度，`margin: 0 auto`没有影响......想出一个不需要硬编码宽度（或半角左边距）的解决方案会很好。

# jquery - jquery周历（事件在同一时间段保存）

> ID：12225189
> 
> 赞同：0
> 
> 时间：2012-09-01T05:33:22.793
> 
> 标签：jquery, events, calendar

如果我添加了一个事件然后刷新页面并添加另一个它工作正常但是如果我添加一个事件然后添加另一个事件而不先刷新页面它保存在同一个时间段中。

我猜有些变量会在页面刷新之前保持它们的值，但我不知道哪个变量是错误的。

我正在使用 $.ajax 调用从数据库发送、获取和修改数据

这是代码：

javascript方面：

```
 'eventNew':function(calEvent, $event) { 
calendar_new_entry(calEvent,$event); 
}
});
});

function calendar_new_entry(calEvent,$event)
{
            var ds=calEvent.start;
            var df=calEvent.end;

            var body = $('#calendar_new_entry_form_body').val(''); 
            var title = $('#calendar_new_entry_form_title').val('') ;

        $("#calendar_new_entry_form").dialog({ 

        autoOpen: false, 
        height: 440, 
        width: 550, 
        modal: true,
        close: function()   // onClose
            {
                $('#calendar_wrapper').weekCalendar('removeUnsavedEvents');
            },
        buttons: 
        {
            'Save': function() 
            {

                var body = $('#calendar_new_entry_form_body').val(); 
                var title = $('#calendar_new_entry_form_title').val() ;

                var data = {body: body,title:title,start:ds.getTime()/1000,end:df.getTime()/1000};

                $.ajax({
                                    type:       'POST',
                                    url:        baseUrl+'calendar/add',
                                    data:       data,
                                    dataType:   'json',
                                    success:    function(json)
                                    {
                                        if (json.status == "success")   
                                        {
                                            alert('done');

                                            $("#calendar_wrapper").weekCalendar("refresh");
                                        }
                                    }
                                                                          });

                $(this).dialog('close'); 
```

}

这是php方面：

```
 function add()
                  {
        $start = date('c',(int)($this->input->post('start')+3600));
        $end = date('c',(int)($this->input->post('end')+3600));
        $title = $this->input->post('title');
        $body = $this->input->post('body');

        $data = array(
                   'start' => $start,
                   'end' => $end,
                   'title' => $title,
                   'body' => $body

                );

                if($this->events->add($data))
                {

                    $return = array(

                    'status'    =>      'success',
                    'message'   =>      'Event has been saved'

                );
                // print out a JSON encoded success message
                echo json_encode($return);

            }
            else
            {

                $return = array(

                    'status'    =>      'failed',
                    'message'   =>      'Failed to save this event'

                );

                // print out a JSON encoded error message
                echo json_encode($return);

            }

    } 
```

我也忘了提到我正在使用 codeigniter，所以前面的代码是控制器，这个代码是用于模型的：

```
 function add($data)
              {
               $this->db->insert('events', $data);
            return $this->db->insert_id();
              } 
```

提前感谢您的帮助

# android - 如何在主游戏循环中“随机化”动画

> ID：12225190
> 
> 赞同：1
> 
> 时间：2012-09-01T05:33:24.747
> 
> 标签：android, animation, random, game-loop

我有一个动画（见下面的视频链接），它是我正在开发的应用程序的一部分。我基本上让鱼在屏幕上游来游去。目前，我有一组大约 20 条鱼，每条鱼最初一个接一个地排列，然后按顺序“游”过屏幕。我的问题是，这不是我想要的行为。这只是一个临时的解决方法。相反，我需要发生的是，在每条鱼达到某个阈值后（假设小于画布宽度的最后 1/5），随机选择阵列中的另一条鱼，定位，然后游过去。

这应该在活动的整个生命周期内重复。我尝试在每条鱼到达该点后生成一个随机数，然后使用它将鱼定位在该索引处，然后将其浮动，但一个明显的问题是，如果选择的随机数对应于一条鱼的索引已经在画布上..它将消失（以便可以再次重新定位，等等）。除了这个问题，根据我对游戏开发的理解。到目前为止（我仍然是一个初学者）..应该不惜一切代价避免主游戏循环中的随机数生成。但我只是不确定有什么其他方法可以解决这个问题。希望从更有经验的开发人员那里获得一些关于方法的见解。多谢你们。这是我为这个问题发布的 YouTube 视频的链接

[https://www.youtube.com/watch?v=QM6t6f9TaUQ&feature=youtube_gdata_player](https://www.youtube.com/watch?v=QM6t6f9TaUQ&feature=youtube_gdata_player)

TL;DR - 我希望一群鱼以随机顺序游过尖叫声，并重复此过程，直到用户退出活动/应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:38:46.983

如果鱼之间的间距在应用程序的生命周期内保持不变，则可以在应用程序启动时生成随机的鱼间偏移。第一个先游进去……当它到达随机偏移#1 时，鱼#2 进入。当鱼#2 到达随机偏移量#2 时，鱼#3 进入，依此类推。当一条鱼离开屏幕的另一边时，它会回到队列中等待进入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T06:10:27.430

你不是在游戏循环的每一帧都这样做，所以任何性能都是微不足道的。

至于这样做的方法：我会说，制作一个`List<Integer>`并用你拥有的鱼的索引填充它。

当一条鱼被放置在屏幕上时，`remove`它会从列表中。

当要选择一条新鱼时，从 0 到列表长度随机选择。

当一条新鱼游出屏幕时，`add`它会回到列表中。

# javascript - 浏览器调整大小时停止 div 移动

> ID：12225195
> 
> 赞同：0
> 
> 时间：2012-09-01T05:34:12.893
> 
> 标签：javascript, jquery, html, css, dom

我正在使用带有 div 的 jQuery 淡入/淡出效果，您可以在此处查看示例：

[http://jsfiddle.net/EgDqy/13/](http://jsfiddle.net/EgDqy/13/)

我的问题是，当我将它们带入我的主页时，每当浏览器重新调整大小或变小时，它们就会开始从我需要它们的区域飘走，这会打乱我的布局和设计。我应该以某种方式将它们包装在另一个 div 中，还是有另一种方法可以在重新调整浏览器大小时防止它们移动？一如既往，感谢任何可以为此提供帮助的人。非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T05:54:41.553

不要`align="center"`在 html 中使用。像这样使用 css 属性`margin`：

```
margin: 0px auto; 
```

然后具有这种属性的块将位于外部块的中心。

# nhibernate - n:n 关系中的 NHibernate 映射

> ID：12225198
> 
> 赞同：2
> 
> 时间：2012-09-01T05:35:07.603
> 
> 标签：nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

假设说我有 Order、Items、OrderItems 表，其中 Order 和 Items 具有 n:n 关系，而 OrderItems 是关联表。我在下面看到了两种定义它们的方法。

1.创建与OrderItems具有“HasMany”关系的Order和Items实体。

2.使用具有“ManytoMany”关系的Order和Items以及包含Order和Item属性的“OrderItems”创建Order、Items和OrderItems实体。

我的方法 1 效果很好，但想知道方法 2 的作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T05:46:22.830

如果 Items 和 Orders 之间的关系很简单（只是存在关系），那么您将在 Items.Orders 和 Orders.Items 之间进行 ManyToMany 映射。这将导致 NHibernate 生成和管理一个包含两个外键的简单交叉引用表。

另一方面，如果您需要与两个外键一起记录其他信息，则必须使用不同的实体或值对象来捕获该信息，并在两侧使用 HasMany。

课程：

```
Order
  Id
  Name
  OrderItems

Item
  Id
  Name
  OrderItems

OrderItem
  Id
  Order
  Item
  Quantity 
```

映射：

命令：

```
Id(c => c.Id);
Map(c => c.Name);
HasMany(c => c.OrderItems).KeyColumn("OrderId"); 
```

物品：

```
Id(c = c.Id);
Map(c => c.Name);
HasMany(c => c.OrderItems).KeyColumn("ItemId"); 
```

订单项：

```
Id(c => c.Id);
Map(c => c.Quantity);
References(c => c.Order);
References(c => c.Item); 
```

# regex - 解析带有尾随逗号的 URL 的文本

> ID：12225199
> 
> 赞同：1
> 
> 时间：2012-09-01T05:35:17.463
> 
> 标签：regex, json, url

我正在查看来自 Twitter 的 JSON 提要，并尝试使用正则表达式使 URL 可点击。

问题是文本中的 URL 带有尾随逗号。逗号可以合法地成为 URL 的一部分，但在这种情况下，它们只是用户插入的标点符号。

有没有办法解决？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T05:41:45.580

你没有错过什么；如果它以明文形式提供并被明文包围，则没有确定“预期” URL 的万无一失的方法。你最好的选择是做出有根据的猜测。

一种常见的方法是检查所讨论的标点符号是否后跟空格或者是字符串的终止符。如果是，不要将其解释为 URL 的一部分；否则，包括它。

请记住，此问题不仅限于逗号或单个字符（考虑省略号，`...`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T05:41:27.270

如果它是标点符号，您可以忽略最后一个字符（这样 url 中间的标点符号不会影响它）。

例如。正则表达式可能是这样的：

```
`([a-z/A-Z0-9.,]*?)([.,]?)\s` 
```

警告（正则表达式的第一部分不包括所有 url 内容，所以你仍然需要修复它。但本质上，我们有`([a-z/A-Z0-9.,]*?)`匹配 URL 的主要部分。`*`允许许多字符，但我们使用`?`它是不贪心。

然后我们使用`([.,]?)`匹配可能的尾随标点符号，并`\s`匹配空格或空格。

因此，第一个子表达式是 url，您可以将其转换为链接。

* * *

如果您可以访问互联网，您可以尝试访问该资源以查看它是否返回 404 以决定尾随标点符号是 URL 的一部分还是实际标点符号。

# matlab - 根据输入在matlab中实现的异常行为算法

> ID：12225207
> 
> 赞同：3
> 
> 时间：2012-09-01T05:37:08.337
> 
> 标签：matlab, linear-algebra, scientific-computing, numerical-analysis

我正在为科学计算做家庭作业，特别是matlab中的迭代方法Gauss-Seidel和SOR，问题是对于一个矩阵给了我意想不到的结果（解决方案不收敛）并且对于另一个矩阵收敛。

这是sor的代码，其中：

*   A：系统矩阵 A * x = b
*   xini：初始迭代数组
*   b：与系统无关的数组 A * x = b
*   maxiter：最大迭代次数
*   tol：公差；
*   特别是，SOR 方法将接收称为 w 的第六个参数，它对应于松弛参数。

这是sor方法的代码：

```
 function [x2,iter] = sor(A,xIni, b, maxIter, tol,w)            
     x1 = xIni;
     x2 = x1;
     iter = 0;
     i = 0;
     j = 0;
     n = size(A, 1);

     for iter = 1:maxIter,
         for i = 1:n
             a = w / A(i,i);
             x = 0;
             for j = 1:i-1
                 x = x + (A(i,j) * x2(j));
             end
             for j = i+1:n
                 x = x + (A(i,j) * x1(j));
             end
             x2(i) = (a * (b(i) - x)) + ((1 - w) * x1(i)); 
         end
         x1 = x2;
         if (norm(b - A * x2) < tol);
             break;
         end
     end 
```

这是 Gauss-seidel 方法的代码：

```
function [x, iter] = Gauss(A, xIni, b, maxIter, tol)

x = xIni;
xnew = x;
iter = 0;
i = 0;
j = 0;
n = size(A,1);

for iter = 1:maxIter,
    for i = 1:n
        a = 1 / A(i,i);
        x1 = 0;
        x2 = 0;
        for j = 1:i-1
            x1 = x1 + (A(i,j) * xnew(j));
        end
        for j = i+1:n
            x2 = x2 + (A(i,j) * x(j));
        end
        xnew(i) = a * (b(i) - x1 - x2);
    end
    x= xnew;
    if ((norm(A*xnew-b)) <= tol);
        break;
    end
end 
```

对于此输入：

```
A = [1 2 -2; 1 1 1; 2 2 1];
b = [1; 2; 5]; 
```

当调用函数 Gauss-Seidel 或 sor 时：

```
[x, iter] = gauss(A, [0; 0; 0], b, 1000, eps)
[x, iter] = sor(A, [0; 0; 0], b, 1000, eps, 1.5) 
```

高斯的输出是：

```
x =

  1.0e+304 *

    1.6024
   -1.6030
    0.0011

 iter =

            1000 
```

对于 sor 是：

```
x =

   NaN
   NaN
   NaN

iter =

        1000 
```

但是对于以下系统能够找到解决方案：

```
A = [    4 -1  0 -1  0  0;
        -1  4 -1  0 -1  0;
         0 -1  4  0  0 -1;
        -1  0  0  4 -1  0;
         0 -1  0 -1  4 -1;
         0  0 -1  0 -1  4   ]
b = [1 0 0 0 0 0]' 
```

解决方案：

```
[x, iter] = sor(A, [0; 0; 0], b, 1000, eps, 1.5)
x =

    0.2948
    0.0932
    0.0282
    0.0861
    0.0497
    0.0195

iter =

    52 
```

方法的行为取决于两个矩阵的条件？因为我注意到第二个矩阵比第一个矩阵的条件更好。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T08:43:21.480

来自[关于 Gauss-Seidel 的 wiki 文章](http://en.wikipedia.org/wiki/Gauss%E2%80%93Seidel_method)：

> 仅当矩阵对角占优或对称且正定时，才能保证收敛

由于 SOR 与 Gauss-Seidel 相似，我预计 SOR 也适用相同的条件，但您可能需要查看该条件。

您的第一个矩阵绝对不是对角占优*或*对称的。但是，您的第二个矩阵是对称且正定的（因为`all(A==A.')`和`all(eig(A)>0)`）。

如果您使用 Matlab 的默认方法`A\b`（很明显，第一个矩阵永远不会收敛，而第二个矩阵在几次迭代后已经产生了可接受的结果。

在将它们应用到野外*之前*，请务必了解算法的局限性:)

![第一个矩阵——收敛很烂](../Images/cdf955ad0e8ec8698ee4662ee540b1c0.png) ![第二个矩阵——收敛性好](../Images/8c0d16ccf960c009dd7b22ae7f59dd22.png)

# database - MapReduce 解决所有并行问题？

> ID：12225217
> 
> 赞同：0
> 
> 时间：2012-09-01T05:38:20.947
> 
> 标签：database, performance, parallel-processing, mapreduce, cpu-speed

我知道 MapReduce 非常适合解决庞大数据集上的并行问题。但是，是否有任何问题的示例虽然在某种意义上是可并行化的，但并不适合 MapReduce？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T21:35:52.267

几点观察：

*   我们不应该混淆 Hadoop 和 Hadoop 复制的 MapReduce 的早期 Google 实现（即仅限于键/值映射）与 MapReduce 所基于的一般拆分和聚合概念

*   MapReduce 的想法（拆分和聚合、划分和同意只是它的几个其他名称）是关于通过拆分成可以独立并行**处理**的更小的子任务来实现处理的并行化——因此可以应用于广泛的问题（数据密集型、计算密集型或其他）

*   一般来说，MapReduce 与大数据集或数据完全无关。它成功地用于小型数据集或*计算 MapReduce*，用于纯处理并行化

*   *要回答您的问题*，MapReduce 通常在原始任务无法拆分为可以并行独立处理的子任务集的情况下不起作用。在现实生活中——很少有用例属于这一类，因为大多数非显而易见的问题都可以近似为 MapReduce 类型的处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T07:07:36.677

是和不是。这实际上取决于它们的结构和编写方式。在给定的数据步骤/ map-reduce 函数中，map reduce 的并行化肯定会很差。对称矩阵的联立方程求解器就是一个例子。如果写在一个函数中（在许多情况下它们可能加载到单个节点上），它们的并行性并不好，原因很明显是同时性。一个常见的解决方法是将前矩阵计算隔离在一个单独的处理器中，因为它们很容易并行化。通过打破这一点，map-reduce 优化器能够获得比其他方式更多的节点和处理能力。

# javascript - JavaScript 代码中奇怪的“未定义变量”

> ID：12225219
> 
> 赞同：1
> 
> 时间：2012-09-01T05:38:28.293
> 
> 标签：javascript

我是一名 c++ 程序员，所以 java 脚本中的以下未定义变量错误对我来说很奇怪。我定义了一个全局变量，`directionResult`下面的代码初始化了它的值：

```
function calcRoute() {
    var iMap = {
        departure:"tiran,esfahan",
        destination:"esfahan"
    }
    var request = {
        origin : iMap.departure,
        destination : iMap.destination,
        travelMode : google.maps.TravelMode.DRIVING
    };
    directionsService.route(request, function(result, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionsDisplay.setDirections(result);
            document.getElementById("log").innerHTML = result.routes[0];
            directionResult = result;
        }
    });
} 
```

最后一个 if`directionResult`将等于`result`which 是回调函数的参数。但在另一个功能中：

```
function showSteps() {
    var myRoute = directionResult.routes[0].legs[0];
    var point = myRoute.steps[index].start_point;
    var inst = myRoute.steps[index++].instructions;
    obj.setPosition(point);
    document.getElementById('inst').innerHTML = inst;
    map.panTo(point);
    if (index >= myRoute.steps.length)
        clearInterval(timer);
} 
```

当我想`directionResult`在第一行使用时，我遇到了这个错误：

> 类型错误：directionResult 未定义

我该如何解决这种奇怪的行为？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T05:57:24.817

directionResult 未定义的一个可能原因可能是因为您试图在设置它之前引用它。尽管您的 showSteps() 函数出现在 calcRoute() 函数之后，但没有设置方向结果，直到触发了方向服务.route() 回调，这发生在（可能）在 AJAX 请求之后。

尝试从 DirectionService.route() 回调函数中调用 showSteps()。

# ajax - 使用 json 通过 Ajax 传递数组

> ID：12225223
> 
> 赞同：0
> 
> 时间：2012-09-01T05:38:58.163
> 
> 标签：ajax, json, spring, jsp, jackson

我有一些通过 Ajax 动态生成的文本框。我正在使用[Jackson 1.9.8](http://jackson.codehaus.org/1.9.8/jackson-all-1.9.8.jar)来解析 json。我可以使用 jQuery 检索这些动态文本框的值，如下所示。

```
var itemsArray=[];

$('input[name="txtChargeSize[]"]').each(function(){
    itemsArray[i][2]=$(this).val();                  
}); 
```

这可以一个一个地检索文本框数组的每个元素`txtChargeSize[]`。

`itemsArray`是一个已经持有的数组

位置`weightId`上的值，`itemsArray[i][0]`

位置`weight`上的值，`itemsArray[i][1]`

位置`charge`上的值**是上面代码中分配的文本框的值。**`itemsArray[i][2]`

 *** * *

我需要将此数组传递给 Spring 控制器类以将这些值插入 Oracle 数据库。我正在尝试以下。

```
var i=0;
$('input[name="txtChargeSize[]"]').each(function(){
    itemsArray[i][2]=$(this).val();        
    objectArray[i]=[["weightId",itemsArray[i][0]], ["weight",itemsArray[i][1]], ["charge",itemsArray[i][2]]];                  
    i++;          
}); 
```

它不像我预期的那样工作。我需要通过以下内容。

```
[["weightId", 1], ["weight", 12.4], ["charge", 15.5]] 
```

以便它可以被解析为`java.util.List<Object[]>`. 我没有精确的 Javascript 知识来完成这个。如何以这种方式`itemsArray`使用 json 将持有的值传递给 Spring 控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:41:34.793

```
var i=0;
$('input[name="txtChargeSize[]"]').each(function(){
    itemsArray[i][2]=$(this).val();        
    i++;          
}); 
```

尝试像这样的javascript构造方法。

```
for(var i = 0; i < itemsArray.length; i++) {
   objectArray[i]= new createObj(itemsArray[i][0], itemsArray[i][1], itemsArray[i][2]);                  
} 
```

并且构造函数是

```
function createObj(weightID, weight, charge) {
   this.weightId = weightID;
   this.weight = weight;
   this.charge = charge;
} 
```

最后，如果您想要 json 字符串，请使用它

```
var str = JSON.stringify(objectArray);
alert(str); 
```**

# iphone - 为 UITableView 的 footerView 创建一个带有 .xib 的 UIView

> ID：12225226
> 
> 赞同：0
> 
> 时间：2012-09-01T05:39:12.467
> 
> 标签：iphone

我正在尝试实现 UITableView 的数据源方法：

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section 
```

我已经在代码中完成了这个并且它有效。如果可能的话，我希望能够在 IB 中实现更复杂的布局。首先，我只添加了一个 UISegmentedControl 和一个 UIButton。我的数据源方法如下所示：

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {
    // Footer should just be on the last section in the grouped table.
    if (section == kNotesSection) {
        UINib *nib = [UINib nibWithNibName:@"DetailFooterView" bundle:nil];
        NSArray *views = [nib instantiateWithOwner:self options:nil];
        UIView *nibView = [views objectAtIndex:0];
        [nibView addGestureRecognizer:tapGesture];

        return nibView;
    }
    else {
        return nil;
    }
} 
```

我可以在 TableView 的底部看到我的页脚视图。但是，没有发生用户交互。我点击按钮，我没有看到任何事情发生。所以我的第一个问题是，这是正确的方法吗？

第二个问题，我如何将目标/动作对与 .xib 关联，因为我没有像通常使用典型 UIViewController + .xib 模板那样连接到 .xib 的出口或动作。这是我第一次尝试以这种方式使用分离的 xib，但不确定细节。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T05:49:11.227

做这个：

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {
  // Footer should just be on the last section in the grouped table.
  if (section == kNotesSection) {

   UIView *nibView = [[[NSBundle mainBundle] loadNibNamed:@"DetailFooterView" owner:self options:nil] objectAtIndex:0];
  [nibView setUserInteractionEnabled:YES];
  [nibView addGestureRecognizer:tapGesture];
   return nibView;

  else {
    return nil;
  }
} 
```

# php - 未声明的变量 mysqli

> ID：12225231
> 
> 赞同：0
> 
> 时间：2012-09-01T05:39:53.427
> 
> 标签：php, oop, mysqli

我在使用 mysqli 和准备好的语句时遇到问题。我刚刚开始学习 mysqli 一个小时，并且无法理解为什么会出现这两个错误：

```
Notice: Undefined variable: mysqli in /opt/lampp/htdocs/lr/testingi.php on line 17

Fatal error: Call to a member function prepare() on a non-object in /opt/lampp/htdocs

/lr/testingi.php on line 17 
```

我有一个包含数据库连接的文件。这里是。

```
$mysqli = new mysqli("localhost", "user", "password", "db");

/* check connection */
if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
exit();
} 
```

这是重现错误的测试文件。

```
session_start();

require_once 'core/database/connect.php';

function user_id_from_username ($username) {

if ($stmt = $mysqli->prepare("SELECT `user_id` FROM `users` WHERE `username` = ?"))

$stmt->bind_param('s', $username);  
$stmt->execute();
$stmt->bind_result($user_id);
echo $user_id;  
$stmt->close(); 
}

$username = 'Jason';        

user_id_from_username ($username); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T05:41:43.387

看起来你没有传递`$mysqli`给`user_id_from_username`函数。

2个快速选项：

**1\. 全球**

```
function user_id_from_username ($username) {
global $mysqli;
if ($stmt = $mysqli->prepare("SELECT `user_id` FROM `users` WHERE `username` = ?"))

$stmt->bind_param('s', $username);  
$stmt->execute();
$stmt->bind_result($user_id);
echo $user_id;  
$stmt->close(); 
} 
```

**2.第二个参数**

```
function user_id_from_username ($mysqli, $username) {//..}

user_id_from_username($mysqli, $username); 
```

# facebook - facebook插件不一起刷新

> ID：12225233
> 
> 赞同：-1
> 
> 时间：2012-09-01T05:40:01.733
> 
> 标签：facebook, plugins, comments, refresh

我的页面上有两个**Facebook 插件**（喜欢和评论框）。当我使用插件登录时，它不会自动登录另一个插件，直到我刷新页面。

例如：当我通过点击喜欢按钮登录时，我的*评论框*保持注销状态，直到我刷新页面。

请给我建议一些对这个问题有好处的东西

我的代码如下

```
<script>
    window.fbAsyncInit = function () {

FB.init({ appId: 'My app ID', status: true, cookie: true, xfbml: true });

        FB.Event.subscribe("xfbml.render", function (targetUrl) {
            $("#myh1").html("Facebook Loaded");
            //alert('edge.create');
            setTimeout(aaa, 500);

        });

        FB.Canvas.setDoneLoading(function () {
            alert("Done loading");
        });

        FB.Event.subscribe('comment.remove', function (response) {
            alert('The status of the session is: ' + response.status);
        });
    };
    (function () {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
  '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
    } ());

    function aaa() {

        $("#content_1").mCustomScrollbar({
            scrollButtons: {
                enable: false
            }
        });
    }

</script>

<div class="fb-like" data-send="false"  data-href="http://www.facebook.com    /AiLiveCaptions"   data-width="298" data-show-faces="true">
        </div>

<div class="fb-comments" data-href="http://www.facebook.com/AiLiveCaptions" data-num-    posts="8" order_by="reverse_time" data-width="280"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:18:04.263

您可以使用

```
FB.XFBML.parse(); 
```

动态呈现文档中的 XFBML 标记。

[**FB 文档**](http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)

# php - 如何使用 PHP 正确打印特殊的 HTML 字符？

> ID：12225236
> 
> 赞同：0
> 
> 时间：2012-09-01T05:41:29.283
> 
> 标签：php, html

我正在尝试打印一个字符串，如下所示：

> 足球新闻。

但是当我打印这个字符串时，它显示如下：

> Noticias de F�tbol。

我尝试`htmlspecialchar()`了很多，但我的输出保持不变。

```
$str = "Noticias de Fútbol";
$strfoot = html_entity_decode($str); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T05:43:56.087

你不需要使用`html_entity_decode`，你可以简单地打印出你的`$str`with `echo`，但你必须确保你的 html 中有这行代码`<head>`：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T05:46:22.443

您很可能输出到指定了错误字符集的页面。要确认这一点，请打开 JavaScript 控制台并评估`window.document.charSet`和`window.document.characterSet`.

如果是这种情况，您可以使用元标记来通知浏览器您想要的字符集：

```
<meta content="text/html; charset=utf-8"> 
```

我正在其他地方阅读标签可能是：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T05:51:16.367

你已经使用了 php 的字符集`utf 8` 和函数`htmlentities`

像

```
<meta http-equiv="content-type" content="text/html; charset=utf-8">

$test=htmlentities("Sisälämpötila");

echo $test; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T05:54:01.987

您的 php 文件不是 utf-8，但浏览器将其读取为 utf-8，这给了您那个问号字符。将文件保存为 utf-8，大多数编辑器/IDE 都有设置文件字符集的选项。

# android - 单击时突出显示一个编辑文本，并在单击另一个编辑文本时使突出显示丢失

> ID：12225240
> 
> 赞同：1
> 
> 时间：2012-09-01T05:41:55.143
> 
> 标签：android, onclick, android-edittext, highlighting

嗨，我在适配器类中动态创建了 edittexts 并禁用了软键盘，因为我有自己的自定义键盘。但问题是文本字段在单击时没有突出显示，甚至光标也不可见。因此，我创建了一个 xml 文件作为 9-patch 并将其放置在可绘制文件夹中，以便在单击时至少更改 edittext 的背景。这样就可以清楚地单击特定的编辑文本。但它总是显示恒定的颜色（厚绿色），反过来又使边框不可见，并在我点击的地方固定颜色。甚至光标也在某些地方得到固定。下面是该应用程序的代码和屏幕截图，用于清晰的想法。请建议如何解决这个问题。提前致谢。

```
public class TextAdapter extends BaseAdapter  {

    Context mContext;
    int count=81;
    int k=0;
    static EditText current;

    public TextAdapter(Context c) {
        mContext = c;

    }

    public int getCount() {
        return count;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        final EditText editText;

        if (convertView == null) {      

            editText = new EditText(mContext);
            editText.setLayoutParams(new GridView.LayoutParams(54, 53));
            editText.setBackgroundResource(R.drawable.edittextshape);
            editText.setGravity(Gravity.CENTER);
            editText.setFocusable(false);

            editText.setId(k);
            k++;

            editText.setFilters( new InputFilter[] { new InputFilter.LengthFilter(1)});

            editText.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    current = (EditText) v;
                    current.setBackgroundColor(R.drawable.shape1);  //here I set the background color
                    current.requestFocus();

                }

            });

            editText.setPadding(0, 0, 0, 0);
        } else {
            editText = (EditText) convertView;
        }

        editText.setText("");

        return editText;
    }

    public static EditText getCurrentEditText() throws Exception
    {

        System.out.println("In getCurrent method "+current);
        return current;

    }

} 
```

![在此处输入图像描述](../Images/56e112cd774569331328582bb15a735f.png)

# python - nose.run() 似乎在第一次运行后保持打开测试文件

> ID：12225244
> 
> 赞同：0
> 
> 时间：2012-09-01T05:42:42.693
> 
> 标签：python, unit-testing, nose

我在 Windows 和 Linux 上遇到了同样的问题。我启动任何各种 python 2.6 shell 并运行nose.py() 来运行我的测试套件。它工作正常。但是，我第二次运行它，之后每次都得到完全相同的输出，无论我如何更改代码或测试文件。我的猜测是它以某种方式保留了文件引用，但即使删除 *.pyc 文件，在我重新启动 shell 或打开另一个 shell 之前，我永远无法更改 nose.run() 的输出，于是问题又开始了在第二次运行。我都试过了`del nose`，`reload(nose)`都没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:39:16.747

在一些外部帮助下解决了*它。我不认为这是正确的解决方案，但是通过在 sys.modules 中搜索我的所有 test_modules （指向 *.pyc 文件）并将`del`它们 ing ，nose 终于再次识别出更改。我必须在每次调用 nose.run() 之前删除它们。这些必须是 pyc 文件的内存版本，因为只是在 shell 中删除它们并没有这样做。现在已经足够好了。

**编辑：**

*显然我没有完全解决它。它似乎确实工作了一段时间，然后突然就不再工作了，我必须重新启动我的 shell。现在我更加困惑了。

# bash - bash shell 脚本中的“set -o noglob”

> ID：12225245
> 
> 赞同：3
> 
> 时间：2012-09-01T05:42:58.930
> 
> 标签：bash, shell, inline, sqlplus

我通常会`SQL`在 Bash shell 脚本中内联编写语句，以便在`SQLPlus`as-中执行

```
#! /bin/sh

sqlplus user/pwd@dbname<<EOF
insert into dummy1 
select * from dummy2;

commit;
exit;
EOF 
```

`dummy1`这可以正常工作，并且在执行时会插入行。前几天我的一位同事带着如下脚本来找我（简化）

```
#! /bin/sh    
sqlvar="insert into dummy1 select * from dummy2;commit;"    
echo $sqlvar|sqlplus user/pwd@dbname 
```

这样做的问题是，当执行该变量时，该变量`sqlvar`将扩展`*`为当前目录中的所有文件，并最终会出错，例如-

```
SQL> insert into dummy1 select <--all the file names in the current directory--> 
from dummy2;commit
                                                    *
ERROR at line 1:
ORA-00923: FROM keyword not found where expected 
```

我们对此的第一个立场是 shell`*`在通配符上下文中解释并在 shell 变量扩展时列出所有文件名（不太清楚为什么......？？？）。所以，为了理解这一点，我们做了如下的事情——

```
$ var="hello *"
$ echo $var
hello <--all the file names in the current directory--> 
```

但

```
$*
ksh: somefile.sh: 0403-006 Execute permission denied. #since it had no execute permission 
```

目录中还有许多其他文件，我不确定为什么`*`选择执行`somefile.sh`或指向`somefile.sh`.

经过一番挖掘，我们意识到，使用`set -o noglob`可以完全解决这个问题，比如——

```
#! /bin/sh
set -o noglob
sqlvar="insert into dummy1 select * from dummy2;\n commit;"    
echo $sqlvar|sqlplus user/pwd@dbname 
```

互联网上有一些关于`set`ting的相互矛盾或相当矛盾的描述。`noglob`所以我正在寻找是否有人可以解释这一点的诀窍。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-01T05:51:40.003

> 经过一番挖掘，我们意识到，使用 set -o noglob 可以完全解决这个问题

它并没有解决问题，而是隐藏了它。手头的问题是缺乏引用。引用变量通常是一个好习惯，因为当变量包含特殊字符、空格等时，它可以防止 shell 做意外的事情。

禁用通配确实会阻止`*`扩展，但这通常不是您想要做的事情。它会让你使用`*`and `?`，但如果你使用其他特殊字符，事情可能会中断。

> 目录中还有许多其他文件，我不确定为什么 * 选择执行 somefile.sh 或指向 somefile.sh。

这里`*`展开为当前目录下的所有文件名，然后这个文件列表就变成了命令行。shell 最终会尝试按字母顺序执行第一个文件名。

* * *

因此，解决此问题的正确方法是引用变量：

```
echo "$sqlvar" | sqlplus user/pwd@dbname 
```

这将解决通配符问题。另一个问题是您需要将`\n`转义序列解释为换行符。Shell 不会自动执行此操作。要`\n`上班，请使用`echo -e`：

```
echo -e "$sqlvar" | sqlplus user/pwd@dbname 
```

或者使用字符串文字语法`$'...'`。那是前面带有美元符号的单引号。

```
sqlvar=$'insert into dummy1 select * from dummy2;\n commit;'
echo "$sqlvar" | sqlplus user/pwd@dbname 
```

（或删除换行符。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-01T07:31:57.950

在我开始之前：@John Kugelman 的回答（适当的引用）是解决这个问题的正确方法。设置 noglob 只能解决问题的某些变体，并在此过程中产生其他潜在问题。

但是既然你问了什么`set -o noglob`，这里是ksh手册页的相关摘录（顺便说一句，你的标签说bash，但错误消息说ksh。我想你实际上是在使用ksh）。

`noglob  Same as -f.`

`-f      Disables file name generation.`

```
File Name Generation.
   Following splitting, each field is scanned for the characters *, ?,  (,
   and  [  unless  the -f option has been set.  If one of these characters
   appears, then the word is regarded as a pattern.  Each file name compo-
   nent  that  contains  any  pattern character is replaced with a lexico-
   graphically sorted set of names that  matches  the  pattern  from  that
   directory. 
```

那是什么意思？这是一个应该显示效果的快速示例：

```
$ echo *
file1 file2 file3 file4
$ ls *
file1 file2 file3 file4
$ *    # Note that this is equivalent to typing "file1 file2 file3 file4" as a command -- file1 is treated as the command (which doesn't exist), the rest as arguments to it
ksh: file1: not found 
```

现在观察 noglob 集的变化：

```
$ set -o noglob
$ echo *
*
$ ls *
ls: *: No such file or directory
$ *
ksh: *: not found 
```

# ruby-on-rails - 如何从它从 facebook 返回到 ROR 应用程序的数据中获取单个值？

> ID：12225247
> 
> 赞同：2
> 
> 时间：2012-09-01T05:43:04.330
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3

我需要如何从以下输出中获取单个值：

```
@auth_hash = request.env['omniauth.auth']
 <p><%= @auth_hash.inspect %></p>// i got following out from this line of code ' 
```

例如，我需要名称、帐户和用户，如何获取？

```
#<OmniAuth::AuthHash
 credentials=#<Hashie::Mash expires=true expires_at=12233 token="wwewewewqeqweqweqwewqewqewqewqewewqewqewewqewqewqewqeqwewqewqewqqxcfdvfgfghfhgfhgfhgfhgghfhggfhgfhgfhgfhgh">
 extra=#<Hashie::Mash raw_info=#<Hashie::Mash
 education=[#<Hashie::Mash school=#<Hashie::Mash id="131103480269939"
  name="zxsd sdsr"> type="High School">, #<Hashie::Mash school=
  #<Hashie::Mash id="107936305917315" name="GHSS BANGRA yyyyy">
  type="High School" year=#<Hashie::Mash id="113125125403208" name="2004">>,
  #<Hashie::Mash school=#<Hashie::Mash id="198825526799921" name="vhse kunjathur">
  type="High School" year=#<Hashie::Mash id="113125125403208" name="2004">>]
 email="xxxxxx@yahoo.co.in" first_name="zxxxxxxxx" gender="male"
 hometown=#<Hashie::Mash id="107013659338585" name="yyyyyyy, Kerala, India">
 id="502830644" last_name="xxxxx" link="http://www.facebook.com/xxxxxx"
 locale="en_US" location=#<Hashie::Mash id="106216379410251" name="Mangalore">
 name="xxxxxxxxxxxx" timezone=5.5 updated_time="2012-04-01T05:08:36+0000"
 username="xxxxxx" verified=true>> info=#<OmniAuth::AuthHash::InfoHash
 email="xxxxxx@yahoo.co.in" first_name="xxxxxxx"
 image="http://graph.facebook.com/502830644/picture?type=square"
 last_name="xxxxxxx" location="Mangalore" name="xxxxxxxx xxxxxxx"
 nickname="xxxxxx" urls=#<Hashie::Mash Facebook="http://www.facebook.com/xxxxx">
 verified=true> provider="facebook" uid="566767666"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:48:37.153

你应该检查[https://github.com/mkdynamic/omniauth-facebook#auth-hash](https://github.com/mkdynamic/omniauth-facebook#auth-hash)

```
request.env['omniauth.auth'][:info][:name] 
```

# jsf - 素面 显示问题

> ID：12225249
> 
> 赞同：-1
> 
> 时间：2012-09-01T05:43:25.197
> 
> 标签：jsf, jsf-2, primefaces

我有一个完整的页面布局。顶部 layoutUnit 有一个菜单和 selectOneMenu。菜单项未正确显示。菜单项与 selectOneMenus 重叠。

![在此处输入图像描述](../Images/bfae1043239adce5bb42d62030cd5552.png)

这是我使用的 xhtml 代码和样式。

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

<h:head>

    <style type="text/css">
.ui-widget {
    font-size: 12px !important;
}

**.ui-layout-north {
    z-index: 20 !important;
    overflow: visible !important;
}
.ui-layout-north .ui-layout-unit-content {
    overflow: visible !important;
}**

</style>

</h:head>

<h:body>

    <p:layout fullPage="true" id="layout1">

        <p:layoutUnit id="top" position="north" size="104">
            <h:form>
<p:menubar autoSubmenuDisplay="true" id="menubar1">
</p:menubar>
<h:panelGroup id="t1">
                    <p:toolbar rendered="#{menuBean.renderP1}" id="toolbar1">
                        <p:toolbarGroup align="left">
<p:selectOneMenu id="prod" value="#{menuBean.product}"
                                style="width:155px;" required="true"
                                requiredMessage="Select a product">
                                <f:selectItem itemLabel="Select product" itemValue="" />
                                <f:selectItems value="#{menuBean.products}" />
                                <!-- Product changed -->
                                <p:ajax event="change" update="prodVar,brkType,brkRevision"
                                    listener="#{menuBean.productChanged}" />

                            </p:selectOneMenu>

                            <p:spacer width="50" height="10" />

                            <p:selectOneMenu id="prodVar" value="#{menuBean.productVariant}"
                                style="width:165px;" required="true"
                                requiredMessage="Select product variant">
                                <f:selectItem itemLabel="Select Variant" itemValue="" />
                                <f:selectItems value="#{menuBean.productVariants}" />
                                <!-- productVariant changed -->
                                <p:ajax event="change" update="brkType,brkRevision"
                                    listener="#{menuBean.productVariantChanged}" />
                            </p:selectOneMenu>
</p:toolbarGroup>
                    </p:toolbar>
                </h:panelGroup>
            </h:form>
        </p:layoutUnit>
<p:layoutUnit id="center" position="center">
            <h:form id="form2">
                <h:panelGroup id="t2">
                    <p:tabView id="tabView" rendered="#{menuBean.renderP2}">

                            </h:panelGrid>
                        </p:tab>

                    </p:tabView>
                </h:panelGroup>
            </h:form>
        </p:layoutUnit>

    </p:layout>

</h:body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:49:50.103

我找不到解决此显示问题的任何解决方案。为了解决这个问题，我将所有选择菜单从北移到了中心布局。它暂时解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:01:37.790

我记得前段时间向 Cagatay 报告过这是这个[问题](http://code.google.com/p/primefaces/issues/detail?id=2956)，并已使用 primefaces 3.0RC1 版本修复。此外，您可以尝试添加到您的 css 文件以使布局可见。

```
.ui-layout-north {
    overflow:visible !important;
}

.ui-layout-north .ui-layout-unit-content {
    overflow:visible !important;
} 
```

# node.js - 我应该安装哪个 Node.js 模块才能使用 google 协议缓冲区？

> ID：12225253
> 
> 赞同：6
> 
> 时间：2012-09-01T05:44:23.953
> 
> 标签：node.js, protocol-buffers

似乎有一些可供多人使用的 Node.js 模块来处理协议缓冲区。有些或多或少是积极维护的。我发现[https://github.com/chrisdew/protobuf](https://github.com/chrisdew/protobuf)似乎工作正常。但是有没有经过验证的真实（官方认证）路径？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-27T19:54:06.750

毫无疑问...更好、完整和设计精美的是：[Protobuf.js](https://github.com/dcodeIO/ProtoBuf.js)

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T10:58:13.563

除了 Java、Python 和 C++ 之外，没有 Protobuf 的官方实现。对于 node.js，您可能想要使用 chrisdew，因为它是 npm 上的。我个人使用自己的[fork](https://github.com/seishun/protobuf)，因为我需要使用 int64。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-23T10:01:29.870

值得一提的是[协议缓冲区](https://www.npmjs.com/package/protocol-buffers)nodejs 包作为一个选项

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-07T15:12:49.660

现在你已经有了一个 JS google 正式版。你可以在这里下载它[https://github.com/google/protobuf/releases](https://github.com/google/protobuf/releases)

# mysql - 关于识别关系和多对多关系的数据库设计问题

> ID：12225254
> 
> 赞同：0
> 
> 时间：2012-09-01T05:44:35.123
> 
> 标签：mysql, database, many-to-many, identifying-relationship

我有一个奇怪的数据库设计问题，我不确定我是否做对了。由于我当前的设计非常复杂，因此我在下图中简化了它，并使用房屋和居住者（不是我的实际实体）进行了比较。

因此，这是数据库设计的部分内容：

![](../Images/f888585d270dde27a9bd4a462821c790.png)

标准条件：

*   多间房屋
*   每栋房屋多层
*   每层有多个卧室

非标准条件：

*   每个住户可以住在多个房子里
*   每个住户可以拥有多间卧室
*   **每个住户每层每栋房子只能有一间卧室（这是棘手的部分）例如，他们可以在 1 楼拥有一间卧室，在 2 楼拥有一间卧室，在 3 楼拥有一间卧室，但不能在同一间卧室拥有两间卧室地面**

因此，我想要完成的就是这个。在应用程序设计中，我知道`house`，我知道`floor`，我知道`occupant`。`bedroom`我需要在没有用户指定的情况下使用这些信息找出`occupant`基于这 3 个标准的内容。有两种解决方案。首先是在`occupants_has_bedrooms`表中，我将主键设为`occupants_id`,`bedrooms_floors_id`和`bedrooms_floors_houses_id`. 但是，当我`bedrooms_id`从主键中取出时，该表不再是与父级的识别关系（`bedrooms`）。这是一种识别关系，因为没有父母就无法存在。因此，有些事情告诉我我需要将所有四个 id 作为主键。我的第二个选项是这三个值之间的唯一索引，但是这是我认为我可能正在接近这个错误的时候。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:43:28.633

这是一个通用的数据库设计策略，它并不特定于 MySQL，但应该仍然有用。

知道如何查询数据是一件好事，但不要让这过度影响您的模型（至少一开始是这样）。

首先要明确的是每张桌子的PK是多少？`floors`看起来您正在为and使用复合键`bedrooms`。如果您对除交集表之外的所有表使用无信息键（每个表的 ID 列）策略`Occupants_has_bedrooms`，它会使您的连接更简单。我假设你可以，所以这是从那里开始的方法：

我要更改的第一件事是删除卧室中的 floor_house_id 列 - 这现在是多余的，可以从连接中获得。

接下来，对 进行以下更改`occupants_has_bedrooms`：

1.  PK 应该只有两列，occupants_id 和Bedroom_id。（为什么？因为主键应该只包含足够的信息来唯一标识一行）。
2.  删除`bedrooms_floors_houses_id`, 因为它由决定`bedrooms_floors_id`且不需要。
3.  `occupants_id`在 ( , )上添加唯一约束`bedrooms_floors_id`以强制执行您的“不那么标准”条件。

最后，对除 之外的所有表进行内连接，`Occupants`在 WHERE 子句中添加三个条件。这应该会给你你想要的结果。如果你真的想要复合键，你仍然可以这样做，它会变得混乱。抱歉，我不在编辑附近，否则我会为您绘制图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T05:53:15.417

我会设计与你所做的相反的数据库。

```
House
  id
  name
  Floors -- Many to many

Floor
  id
  name
  Bedrooms -- Many to many
  optional: you can have a back pointer to house

Bedroom:
  id
  name
  Occupants -- many to many
  optional : back pointer to floor

Occupant:
  id
  name
  optional : back pointer to Bedroom 
```

现在有了这个多对多表，您可以相当轻松地查询您的条件。

# file-upload - DOJO 1.8 /dojo/request/iframe 正在删除 上传文件时

> ID：12225257
> 
> 赞同：0
> 
> 时间：2012-09-01T05:45:39.017
> 
> 标签：file-upload, dojo

我在 DOJO 1.8.0 下看到了一个非常奇怪的行为。我正在尝试异步上传文件。该文件上传得很好，我按预期获得了有效负载，但是当单击提交按钮时，标签和其间的所有内容都被莫名其妙地**删除**了！它只是消失了。（注意：我已经将此测试隔离到一个测试页面，因此没有其他可以解释它的原因。您正在查看整个代码。）

```
require(['dojox/form/Uploader',
     "dojo/request/iframe",'dojo/dom','dojo/on',
     'dojox/form/uploader/plugins/IFrame', 'dojo/domReady!'],
    function(Uploader,iframe,dom,on){

    on(dom.byId("myButton"), "click", function(){
        iframe.post("UploadFile.php",{
            form: dom.byId("myForm"),
            handleAs: "json"
            }).then(function(data){
                console.log(data);
            }, function(err){}
    );
});

<form method="post" id="myForm" enctype="multipart/form-data" >
    <input name="uploadedfile" type="file" data-dojo-type="dojox.form.Uploader"
    label="Select Some Files" id="uploader" />

    <input id="myButton" type="button" value="Submit" />
</form> 
```

有 DOJO 1.8 经验的人有什么想法吗？我在 1.6 到 1.7 版本中一直使用 /dojo/io/iframe。这仅在 1.8 中使用新的 /dojo/request/iframe 代码开始发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:01:08.897

见[http://jsfiddle.net/seeds/XD4Dc/1/](http://jsfiddle.net/seeds/XD4Dc/1/)

表单元素设置为具有 dojo 的注入 iframe 的目标。然后表格变得像'dijitHidden'，abs 位置-1000 顶部/左侧。不明白为什么。小提琴中有一个修复，添加到您的回调中：

```
with(dom.byId("myForm").style) {
       position = "";
       left = "";
       top = "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:28:50.547

我将此问题提交给 DOJO-Interest 小组，发现它是 DOJO 1.8.0 的错误。它将在即将发布的 1.8.1 版本中修复。

[http://bugs.dojotoolkit.org/ticket/15939](http://bugs.dojotoolkit.org/ticket/15939)

**从错误报告中：**

> *表单没有被“吃掉”，而是由于一些错误的逻辑检查表单是否在 DOM 中，位置被设置在其上并移出视口。这已修复，应该在 1.8.1 中。*

# c# - Lua.GetFunction 返回 Null

> ID：12225260
> 
> 赞同：0
> 
> 时间：2012-09-01T05:46:33.933
> 
> 标签：c#, lua

我对 lua 很陌生，这是我第一个使用它的程序。该代码使用 Lua 文件为我正在开发的游戏创建菜单。

此行在 MainMenu 屏幕中创建一个按钮，当按下按钮时，它会发送要调用的函数名称。

卢阿：

```
CreateButton( "mainmenu", "NewGame", "New Game", 50, 120, 150, 32)

function NewGame()
--CODE TO START NEW GAME
end 
```

C＃：

```
public class LuaWrapper
{
    public void Initialize()
    {
        lua = new Lua();
        lua.RegisterFunction("CreateButton", this, 
           this.GetType().GetMethod("CreateButton"));

        lua.DoFile("Data/Menus/Main.lua");
    }

    public void CreateButton(string window, string functionName, string text,
         float posx, float posy, float width, float height)
    {
        ButtonControl button = new ButtonControl();
        button.Bounds = new UniRectangle(posx, posy, width, height);
        button.Text = text;
        LuaFunction f = lua.GetFunction(functionName); // <-- RETURNS NULL ?

        ButtonPressEvent pressEvent = new ButtonPressEvent(f);
        button.Pressed += new EventHandler(pressEvent.button_Pressed);

        WindowDictionary[window].Children.Add(button);
    }
}

class ButtonPressEvent
{
    LuaFunction function;

    public ButtonPress(LuaFunction function)
    {
        this.function = function;
    }

    public void button_Pressed(object sender, EventArgs e)
    {
        function.Call();
    }
} 
```

在单击按钮并尝试调用关联的函数之前，一切正常 在 ButtonPress 类下。我使用了断点，发现问题是

```
 LuaFunction f = lua.GetFunction(functionName); 
```

返回空值。

注意：我也试过

```
LuaFunction f = lua.GetFunction("NewGame"); 
```

结果相同。

感谢阅读，希望任何人都可以帮助指出我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:55:13.307

我有一个想法并尝试更改 Lua 文件的顺序。我想我是在读取函数之前调用按钮的创建？我不确定，但这似乎已经解决了。

卢阿：

```
function NewGame()
--CODE TO START NEW GAME
end

CreateButton( "mainmenu", "NewGame", "New Game", 50, 120, 150, 32) 
```

# java - Websphere : Webservice 的 ClassCastException

> ID：12225261
> 
> 赞同：0
> 
> 时间：2012-09-01T05:46:39.433
> 
> 标签：java, web-services, struts2, websphere-7

我有一个 EAR 模块，它包含 ejb 客户端、结构 web 模块和由注释创建的 web 服务。应用程序工作正常，wsdl 发布在 JBOSS 中。但在 websphere 中，它给出了

```
java.lang.ClassCastException SourceId:com.ibm.ws.webcontainer.webapp.WebAppServletManager.loadServlet ProbeId:213 Reporter:com.ibm.ws.webcontainer.servlet.ServletWrapper$1@3ae83ae8
java.lang.ClassCastException: com.test.eventmanagement.ws.EventManagementWS incompatible with javax.servlet.Servlet 
```

在我的库中有以下 jar 文件。

```
commons-beanutils-1.7.0.jar,commons-digester-1.8.jar,commons-fileupload-1.1.1.jar,
freemarker-2.3.8.jar,gson-1.7.1.jar,itext-2.0.8.jar,javaee-api-5.jar,
jxl-2.6.10.jar,ognl-2.6.11.jar,retrotranslator-runtime-1.0.4.jar,
struts2-core-2.1.8.1.jar,struts2-tiles-plugin-2.1.8.1.jar,
tiles-api-2.1.0.jar,tiles-compat-2.1.0.jar,tiles-core-2.1.0.jar,
tiles-jsp-   2.1.0.jar,tiles-servlet-2.1.0.jar,xwork-core-2.1.6.jar 
```

在我的 web.xml 我添加了

```
<!-- Web Service -->
<servlet>
    <servlet-name>EventManagementWS</servlet-name>
    <servlet-class>com.test.eventmanagement.ws.EventManagementWS</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>EventManagementWS</servlet-name>
    <url-pattern>/EventManagementWS</url-pattern>
</servlet-mapping> 
```

我用谷歌搜索了很多，但仍然没有任何帮助。有些地方我读过它是因为 jar 冲突，但我找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:19:57.363

为什么你的 servlet 的 lib 目录中有 javaee-api-5.jar？
这不应该由您的应用程序服务器“提供”吗？（即 - JBoss AS 或 Websphere）？
我认为这是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:12:56.970

确保您的 Web.xml 正确，尤其是 servlet 2.5 的版本应为 2.5。它应该是这样的

```
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"> 
```

WebSphere 对此非常严格。

# c++ - 我有内存泄漏吗？

> ID：12225263
> 
> 赞同：0
> 
> 时间：2012-09-01T05:46:56.327
> 
> 标签：c++, memory, valgrind

> **可能重复：**
> [异常代码 C++ 中的泄漏](https://stackoverflow.com/questions/4161401/leak-in-exception-code-c)

我在一些代码上运行了 valgrind（如下），我对它的输出感到困惑，它声称我有一个小的内存泄漏。这是输出；我找不到问题。

编码：

```
121         std::cerr << "exp "<<i<<" ";
122         exp->print(std::cerr);
123         std::cerr << std::endl; 
```

输出：

```
==27313== 16 bytes in 1 blocks are definitely lost in loss record 1 of 6
==27313==    at 0x1000525CF: malloc (vg_replace_malloc.c:266)
==27313==    by 0x1000A90CF: __cxa_get_globals (in /usr/lib/libstdc++.6.0.9.dylib)
==27313==    by 0x1000A8EA9: std::uncaught_exception() (in /usr/lib/libstdc++.6.0.9.dylib)
==27313==    by 0x100088096: std::ostream::sentry::~sentry() (in /usr/lib/libstdc++.6.0.9.dylib)
==27313==    by 0x100088BF9: std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char
> >&, char const*, long) (in /usr/lib/libstdc++.6.0.9.dylib)
==27313==    by 0x100088C57: std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char 
const*) (in /usr/lib/libstdc++.6.0.9.dylib)
==27313==    by 0x1000028C4: test() (foo.cpp:121)
==27313==    by 0x100002D92: main (foo.cpp:35) 
```

请注意，调用 exp->print 只是做更多相同的事情；我打印了一些穿插字符串常量的值。

# c# - Unity拦截机制在同一类内的方法之间不起作用

> ID：12225265
> 
> 赞同：0
> 
> 时间：2012-09-01T05:48:14.250
> 
> 标签：c#, .net, methods, unity-container, intercept

我正在使用 C# + Unity (2.1)。如果调用来自外部，则拦截方法可以正常工作，但在同一类内部的方法之间，仅拦截第一个方法。例如：

```
 [InterceptorAttribute]
    public int A(int a, int b)
    {
         return B(a, b);
    }

    [InterceptorAttribute]
    public int B(int a, int b)
    {
         return a+b;
    } 
```

对方法 B() 的调用不会被拦截。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T06:04:24.657

如果您查看拦截是如何实现的，就会清楚为什么会发生这种情况。拦截器基本上是一个代理，它包裹原始对象并将调用转发给它，除了调用任何关联的处理程序：

```
public int A(int a, int b)
{
  callHandlers();
  return originalObject.A(a, b);
}

public int B(int a, int b)
{
  callHandlers();
  return originalObject.B(a, b);
} 
```

即使这两个调用被单独拦截，一旦`originalMethod.A`被调用，调用`B`只会调用`originalObject.B`，而不是调用`proxy.B`。

也许如果您解释您使用拦截的目的，可能会有更好的解决方案来解决您正在尝试做的事情。

# google-maps - 谷歌地图 API 和 Lua

> ID：12225271
> 
> 赞同：1
> 
> 时间：2012-09-01T05:49:10.300
> 
> 标签：google-maps, lua

我是一名开发人员，致力于将 Lua 脚本作为移动应用程序开发的后端代码。我需要在我的 Lua 脚本中使用谷歌地图服务和谷歌方向服务来启用 GPS 跟踪并将一些信息存储到数据库中。

以下链接帮助我了解了如何实现该功能，但是 Lua 脚本也可以吗？（我不在任何地方使用任何 HTML 或 javascript）。

[https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-waypoints](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-waypoints)

# ruby-on-rails - 如何在 Rails 3.1 中解析 RSS

> ID：12225274
> 
> 赞同：1
> 
> 时间：2012-09-01T05:49:17.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rss

我应该如何在 rails 3.1 应用程序中解析 rss 提要。无法找到有关此主题的当前资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T05:53:59.170

你需要在你的控制器中：

```
require 'rss'
rss = RSS::Parser.parse(open('http://example.com/feed/posts').read, false) 
```

来自[Parsing an RSS feed with Ruby](http://travisonrails.com/2007/06/09/parsing-an-rss-feed-with-ruby)。

# sql - 使用 ActiveRecord (Ruby) 如何构造一个所有“正在使用”的查询？

> ID：12225275
> 
> 赞同：1
> 
> 时间：2012-09-01T05:50:00.163
> 
> 标签：sql, ruby, activerecord, join, count

我有一个 Tag 类，它通过与一堆其他类相关联，`has_and_belongs_to_many`并且正在寻找一种简单的方法来仅返回“正在使用”的标签集合。

我正在尝试`scope`如下

```
class Tag < ActiveRecord::Base

  validates_presence_of :name
  validates_uniqueness_of :name

  has_and_belongs_to_many :users
  has_and_belongs_to_many :widgets

  # it's in_use if users.count > 0 || widgets.count > 0
  scope :in_use, joins(:users).where('users.count > 0').merge(joins(:widgets).where("widgets.count > 0"))
end 
```

但是我收到此错误-`SQLException: no such column: users.count`

如何最好地实现我想要的 oucome，以便我可以通过 获取所有正在使用的标签`Tag.in_use`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:24:01.903

我不知道如何使用 activerecord 助手来做到这一点。但是您可以使用原始 sql 来执行此操作。如果您的连接表被称为`tags_users`and `tags_widgets`，那么这样的事情将起作用：

```
scope :in_use, find_by_sql('select * from tags 
    inner join tags_users on tags.id = tags_users.tag_id 
    inner join users on tags_users.user_id = users.id 
    union select * from tags 
    inner join tags_widgets on tags.id = tags_widgets.tag_id 
    inner join widgets on tags_widgets.widget_id = widgets.id') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T02:54:08.687

我最终解决了这个问题，如下所示。

```
class Tag < ActiveRecord::Base

  validates_presence_of :name
  validates_uniqueness_of :name

  has_and_belongs_to_many :users
  has_and_belongs_to_many :widgets

  def self.in_use
    return find_by_sql('select tags.* from tags 
      inner join tags_users on tags.id = tags_users.tag_id 
      inner join users on tags_users.user_id = users.id 
      union select tags.* from tags 
      inner join tags_widgets on tags.id = tags_widgets.tag_id 
      inner join widgets on tags_widgets.widget_id = widgets.id')
  end

end 
```

因为将`find_by_sql`子句放入命名`scope`实际上不起作用（请参阅对戈登威尔逊回答的评论）。

# concurrency - 如何打印并发和递归函数的结果？

> ID：12225278
> 
> 赞同：4
> 
> 时间：2012-09-01T05:51:12.500
> 
> 标签：concurrency, for-loop, go

我一直在进行 go tour，并且我已经完成了网络爬虫练习，但我认为我用来打印所有结果的技术可能效率低下。

这是我的代码。我只编辑了抓取和主要功能，所以我将发布它。这是练习的链接（[http://tour.golang.org/#70](http://tour.golang.org/#70)）

```
 var used = make(map[string]bool)

    func Crawl(url string, depth int, fetcher Fetcher, results chan string) {
        if depth <= 0 {
            return
        }
        body, urls, err := fetcher.Fetch(url)
        if err != nil {
            results <- fmt.Sprintf("%v",err)
            return
        }
        results <-fmt.Sprintf("\nfound: %s %q\n", url, body)
        for _,u := range urls {
            if used[u] == false {
                used[u] = true
                go Crawl(u, depth-1, fetcher, results)
            }
        }
        return
    }
    //------------------------------------------------------------
    func main() {
        used["http://golang.org/"] = true
        results := make(chan string)
        go Crawl("http://golang.org/", 4, fetcher, results)
        for i := 0; i < len(used); i++ {
            fmt.Println(<-results)
        }
    } 
```

我在 main 中使用“for i < len(used)”行来确保仅在有要打印的结果时才打印结果中的值。我不能只使用

```
 for i := range results 
```

因为它是递归的，所以很难在爬取函数中使用“close（results）”，但是按照我这样做的方式，我必须找到每次使用的变量的长度。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T17:22:05.873

要等待一组 goroutine 完成，请使用`sync.WaitGroup.`

 `I believe you'll find the example in the official documentation very familiar..

[http://golang.org/pkg/sync/#example_WaitGroup](http://golang.org/pkg/sync/#example_WaitGroup)

Quoting:` 

```
var wg sync.WaitGroup
var urls = []string{
    "http://www.golang.org/",
    "http://www.google.com/",
    "http://www.somestupidname.com/",
}
for _, url := range urls {
    // Increment the WaitGroup counter.
    wg.Add(1)
    // Launch a goroutine to fetch the URL.
    go func(url string) {
        // Fetch the URL.
        http.Get(url)
        // Decrement the counter.
        wg.Done()
    }(url)
}
// Wait for all HTTP fetches to complete.
wg.Wait() 
```

这将阻塞，直到所有工作完成。

如果您真的想在收集结果时逐步打印结果，最简单的方法是在 fetcher 本身中进行。

# wso2 - 从 Google Apps 验证 StratosLive 时遇到问题

> ID：12225281
> 
> 赞同：0
> 
> 时间：2012-09-01T05:52:23.910
> 
> 标签：wso2

通过 Google Apps 注册 StratosLive。当我尝试登录时，我被告知“OpenID not accepted.OpenID authentication failed”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:38:06.683

这可能相关也可能不相关，但我发现了这个 jira

```
https://wso2.org/jira/browse/STRATOS-993?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aworklog-tabpanel 
```

使用 Google Apps 帐户（无 SSO）登录时出现异常

jira 上的解决方案是“不会修复”

看到 wso2 习惯于慢慢回答我们的问题，我想我至少会在一些可能的线索上为您提供帮助。

# android - 是否有任何 GetJar 测试 API 密钥？

> ID：12225285
> 
> 赞同：0
> 
> 时间：2012-09-01T05:53:54.300
> 
> 标签：android

我计划在我的 Android 应用程序中使用 GetJar Rewards 程序。我已经下载了 Rewards SDK 并遵循了实施快速入门文档。这没有任何困难。

虽然，当我测试实现时，我收到一条`IllegalArgument : invalid UUID`消息，显然是因为我没有指定我的私有 API 密钥。所以我的问题是：是否有一些测试模式可以用特殊的测试键激活？（在我评估过的大多数类似的 API 中都有这样的东西，即 Admob、Scoreloop、Flurry 等等......）

如果没有，我只需要等待 GetJar 人周一回来（那些人周末不工作......）

感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:25:58.950

无论如何，我可以结束这个问题。几天后我不得不等待，即使过程很模糊，我终于拿到了我的钥匙。

# php - PHP从池mySQL时间获取选定时间范围的列表

> ID：12225295
> 
> 赞同：-1
> 
> 时间：2012-09-01T05:56:03.850
> 
> 标签：php, mysql, datetime, time, date-range

我需要从 mySQL 数据库中获取选定的时间范围，但我真的很挣扎......基本上 - 时间列表是：

```
id     Start        End
1      2:00         3:00
2      3:00         4:00
3      4:00         5:00 
```

我选择了：

```
2:00         3:00
3:00         4:00 
```

**我想获取所选日期的 id**

这是我尝试过的：

```
SELECT id FROM DB WHERE start_time BETWEEN '$from_time' AND '$to_time'; 
```

但是代码不起作用，它只获取选定的时间`2:00 - 3:00`而**不是**`3:00 - 4:00`时间。

当我尝试：

```
SELECT id FROM DB WHERE start_time >= '$from_time' AND to_time <= '$to_time'; 
```

我没有得到**任何**结果...请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:07:53.657

试试这个：

```
select id from table where '$from_time' >= start_time and '$to_time' <= to_time; 
```

# python - 这行 Python 代码是什么意思？

> ID：12225300
> 
> 赞同：1
> 
> 时间：2012-09-01T05:57:22.467
> 
> 标签：python, set

我正在将一些代码从 Python 翻译成 C++。我遇到了以下情况：

```
set(x for listX in listY for x in listX) 
```

我非常精通 C++，并且知道 Python 中的一些基本结构。在上面的代码中，我知道正在创建一个集合，但我不理解括号内的代码。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T06:01:42.257

listY 可能类似于下面的结构，所以扩展代码是：

```
listY = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
result = set()
for listX in listY:
    for x in listX:
        result.add(x) 
```

注意：集合不允许重复条目

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T05:58:51.730

它是一个[生成器推导](http://www.python.org/dev/peps/pep-0289/)，类似于[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)。有关比较它们的一些信息，请参阅[上一个问题](https://stackoverflow.com/questions/47789/generator-expressions-vs-list-comprehension)。

# ios - 在 App 和 UITableView

> ID：12225304
> 
> 赞同：-4
> 
> 时间：2012-09-01T05:58:10.573
> 
> 标签：ios, cocoa-touch, in-app-purchase

这是我的代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (isPurchased == NO) {

        return [UITableviewExample count];
        [UITableviewExample release];
    }
    else
    {
        return [UITableviewExample2 count];
        [UITableviewExample2 release];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        if (isPurchased == NO) {

            cell.textLabel.text = [UITableviewExample objectAtIndex:indexPath.row];
            [UITableviewExample release];
        }
        else {
            cell.textLabel.text = [UITableviewExample2 objectAtIndex:indexPath.row];
            [UITableviewExample2 release];

        }
    }

    return cell;
} 
```

请问谁能帮帮我？应用内购买成功后，没有任何变化。如果我使用

```
-(IBAction)test
{
    if (isPurchased == yes) {
        buyButton.hidden = yes;
    }
} 
```

效果很好。我尝试了两个应用程序，应用程序内购买，一切都很好，即使我用来隐藏，更改标签的文本，它工作，我怎样才能使 UITableView 的应用程序内购买工作？我想在应用内购买成功后更改行。我的错误在哪里？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:44:29.847

尝试为 tableView 调用 reloadData - 当您收到通知时，应用内购买已完成。

```
[tableView reloadData]; 
```

或动画：

```
[tableView reloadSections:0 withRowAnimation:UITableViewRowAnimationFade]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T06:46:18.427

至少，对`numberOfRowsInSection`（代码永远不会到达`release`语句，但无论如何您不希望它）和`cellForRowAtIndexPath`（您正在执行不适当`release`的语句并且如果单元格曾经存在逻辑错误）进行了一些明显的编辑成功出队）：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (isPurchased == NO) {
        return [UITableviewExample count];
        // [UITableviewExample release];
    }
    else
    {
        return [UITableviewExample2 count];
        // [UITableviewExample2 release];
    }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // this was in the above "if (cell == nil)" block, but should be outside of it

    if (isPurchased == NO) {
        cell.textLabel.text = [UITableviewExample objectAtIndex:indexPath.row];
        // [UITableviewExample release];
    }
    else {
        cell.textLabel.text = [UITableviewExample2 objectAtIndex:indexPath.row];
        // [UITableviewExample2 release];
    }

    return cell;
} 
```

从风格上讲，您显然也有变量`UITableviewExample`and `UITableviewExample2`，但作为良好的编程风格，变量名应该以小写字母开头，例如`tableviewExample`and `tableviewExample2`。

对于您问题的实质，您需要向我们展示这些`NSArray`（或`NSMutableArray`）对象是如何被初始化的。问题可能不在于上述代码，而在于这些数组的数量。

但是根据 Guntis 的出色观察，如果您的问题是在应用内购买后您没有看到表的变化，您可能需要执行`reloadData`.

# ruby-on-rails - RVM 无法更改 gemset

> ID：12225306
> 
> 赞同：0
> 
> 时间：2012-09-01T05:58:53.480
> 
> 标签：ruby-on-rails, ruby, rvm

在我安装 MySQL 并重新启动计算机之前，我的 RVM 运行良好。

如果我输入

```
rvm gemset use rails 
```

它将显示：

```
Using ruby-1.9.3-p194 with gemset rails 
```

然后我输入：

```
rvm gemset name 
```

表明：

```
rails 
```

哪个是对的。

但是，在我重新启动计算机后，发生了一些奇怪的事情。

首先，系统找不到命令'rvm'，所以我修改了~/.bash_profile：

```
export PATH=/usr/local/mysql/bin:/Users/hanxu/.rvm/bin/:$PATH 
```

以上是我的 .bash_profile 的内容

然后 rvm 工作。

然后我输入：

```
rvm gemset use rails 
```

它似乎运行良好并显示：

```
Using ruby-1.9.3-p194 with gemset rails 
```

但是，当我通过询问 rvm gemset 名称来检查它时，它变成了：

```
/Users/hanxu/.rvm/gems/ruby-1.9.3-p194 
```

这是我的默认 gemset，而不是“rails”。

无论我如何设置 gemset，它总是更改为默认设置。

谁能告诉我是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T17:03:29.503

rvm 有一个修复采购的命令：

```
rvm get stable --auto 
```

自动开关将更新您的 *rc 文件，然后打开新终端就足够了，一切都很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T06:23:27.697

您的 RVM 安装很可能不完整。`.profile`在您的/ `.bashrc`/`.zshrc`或您可能正在使用的任何其他内容中查找此字符串

```
[[ -s $HOME/.rvm/scripts/rvm ]] && source $HOME/.rvm/scripts/rvm 
```

此命令检查是否存在`$HOME/.rvm/scripts/rvm`，如果找到，则将其加载到 shell 中。这有效地加载了 RVM。所以，如果你没有找到这个命令，添加它并打开一个新的终端窗口，RVM 应该在那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T06:12:45.213

您使用的是 .rvmrc 文件吗？

[https://rvm.io/workflow/rvmrc/](https://rvm.io/workflow/rvmrc/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T18:47:57.500

使用此命令切换 gemset。

```
rvm use <ruby version>@<gemset name> --create 
```

如果 rvm 不存在，此命令会将 rvm 切换到给定的 gemset 并创建它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-19T23:17:53.010

就我而言，我需要先将用户添加到`rvm`组中，然后才能使用 rvm。

# youtube - 三星智能电视 YouTube JavaScript 播放器 API

> ID：12225312
> 
> 赞同：1
> 
> 时间：2012-09-01T06:00:19.227
> 
> 标签：youtube, youtube-api, samsung-smart-tv

我在（2011 TV）（SDK 2.5）上为三星智能电视开发并推出了一个应用程序，一切正常。

并通过 YouTube JavaScript Player API v2 制作现在我正在尝试使用 YouTube JavaScript Player API v3 将其转换为（2012 TV）（SDK 3.5）

我只是将版本值从 [apiplayer?version=2&enablejsapi=1 ] 更改为==>[apiplayer?version=3&enablejsapi=1 ]

但电视或模拟器上没有显示任何内容，只显示一个 youtube 词，但没有视频

这是我的 youtube 创建功能

```
function createYoutube() {
if (Main.onLine && !youtubeCreated)
{
  youtubeCreated = true;
  var html = "<object type='application/x-shockwave-flash' id='playerObject' style='width:507px; height:285.1px;'> "+
            "<param name='movie' value='http://youtube.googleapis.com/apiplayer?version=3&enablejsapi=1'></param>"+
            "<param name='allowScriptAccess' value='always'></param>"+
            "<param name='wmode' value='transparent'></param> "+
            "</object>";
  var player = document.getElementById("player")
  widgetAPI.putInnerHTML(player,html);
} 
```

* * *

```
function onYouTubePlayerReady()
{

    YouTubePlayer = document.getElementById('playerObject');
    YouTubePlayer.addEventListener('onStateChange','onPlayerStateChange');
    YouTubePlayer.addEventListener('onError', 'onPlayerError');

    refreshPlayer();
} 
```

我尝试使用[http://www.youtube.com/apiplayer?enablejsapi=1&version=3](http://www.youtube.com/apiplayer?enablejsapi=1&version=3) 但没有任何改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:03:21.733

我认为你使用了错误的参数使用这个

```
<param name="movie" value="http://www.youtube.com/apiplayer?&enablejsapi=1&version=3&controls=1&fs=1"></param> 
```

安装的

```
<param name='movie' value='http://youtube.googleapis.com/apiplayer?version=3&enablejsapi=1'></param> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:48:58.520

version=2 意味着将使用 ActionScript 2 运行时。（这个版本已经弃用了几年，很快就会关闭。） version=3 意味着将使用 ActionScript 3 运行时。可能是您的平台不支持 ActionScript 3 运行时，在这种情况下您需要跟进三星。

# google-app-engine - 使用 5 个 SNI 证书槽，GAE 每秒可以支持多少查询？

> ID：12225315
> 
> 赞同：0
> 
> 时间：2012-09-01T06:00:39.373
> 
> 标签：google-app-engine, ssl, google-apps, sni

您现在可以在 Google 应用上为自定义域购买 SNI 证书插槽。

5 个 SNI 的成本为 9 美元，但我不知道如何进行容量规划。

我需要购买多少个 SNI 插槽？1 个 SNI 插槽每秒可以处理多少个查询？我的 GAE 应用程序同时打开了多少个连接是否重要？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T06:24:59.477

我认为您不太了解[SNI](http://en.wikipedia.org/wiki/Server_Name_Indication)插槽是什么。SNI 插槽不处理查询，它们持有证书。每个证书都需要一个。它与连接数无关。

如果您只想用一张证书服务一个站点，则根本不需要 SNI。

# php - 如何检查我是否连接到数据库？

> ID：12225318
> 
> 赞同：2
> 
> 时间：2012-09-01T06:01:24.007
> 
> 标签：php, mysql, connection, conditional-statements

这是连接到mysql数据库的代码：

```
$con = mysql_connect("", "", "");

if (!$con) {
  die('Could not connect: ' . mysql_error());
}

mysql_select_db("", $con); 
```

我想根据状态回显“已连接”/“已断开”。

怎么做到呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-01T06:04:19.430

像这样做

```
if ($con) {
  echo 'connected';
} else {
  echo 'not connected';
} 
```

或者试试这个

```
echo $con ? 'connected' : 'not connected'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T07:11:18.723

首先，使用`mysqli_xxx()`函数而不是旧的过时`mysql_xx()`函数。

无论如何强烈建议这样做，因为旧库正在被弃用，但也会使您的问题更容易回答。（您也可以使用 PDO 库，其答案将类似，但对于这个答案，我将坚持使用 mysqli 为简单起见）

使用该`mysqli`库，您可以获得一个包含数据库连接的变量，您可以随时检查它。

```
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'my_db'); 
```

现在，您可以查询`$mysqli`变量以了解发生了什么。

```
if ($mysqli->connect_error) {
    die('Connect Error (' . $mysqli->connect_errno . ') ' . $mysqli->connect_error);
} 
```

稍后，您可以使用以下`ping`命令查询变量：[http ://www.php.net/manual/en/mysqli.ping.php](http://www.php.net/manual/en/mysqli.ping.php)

```
$mysqli->ping(); 
```

或者`stat`如果您想了解更多信息，可以使用命令：[http ://www.php.net/manual/en/mysqli.stat.php](http://www.php.net/manual/en/mysqli.stat.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T06:25:41.220

尝试使用**[mysql_ping](http://php.net/manual/en/function.mysql-ping.php)**

> mysql_ping — ping 服务器连接，如果没有连接则重新连接

像这样的东西应该可以帮助你

```
if(mysql_ping($con)) 
  echo 'connected'; 
 else 
  echo 'disconnected'; 
```

# php - 如何在侧边栏中添加 Ion Auth 登录表单？

> ID：12225321
> 
> 赞同：0
> 
> 时间：2012-09-01T06:01:44.703
> 
> 标签：php, codeigniter

我有一个博客应用程序，我希望在侧边栏中有一个登录表单。我使用 Ion Auth 库。我怎么做？

我的侧边栏视图中有这个：

```
<?php echo form_open("blog/login");?>

  <p>
    <input type="text" name="identity">Username:</>         
  </p>      
  <p>
    <input type="text" name="password">Password:</>      
  </p>      
  <p>
   <label for="remember">Remember Me:</label>
      <?php echo form_checkbox('remember', '1', FALSE, 'id="remember"');?>
 </p>
  <p><?php echo form_submit('submit', 'Login');?></p>      
<?php echo form_close();?> 
```

但是当我单击“登录”时，它会转到不同的页面。我希望我的博客控制器中的登录功能在后面工作并留在主页上。

提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:18:39.593

不看代码很难回答，但我猜你可以在表单中传递一个带有当前 URL 的隐藏字段。

然后，在 blog/login 方法中，用户登录后，可以重定向到隐藏字段中接收到的 URL，而不是重定向到 base_url()。

# c# - 在控制台应用程序中，生成 PDF 需要很长时间，并且在 c# 中使用更多的内存和 CPU

> ID：12225322
> 
> 赞同：0
> 
> 时间：2012-09-01T06:01:57.980
> 
> 标签：c#, pdf-generation, console-application

我有一个控制台应用程序，通过使用这个应用程序我将创建 PDF。但它在一分钟内需要 40 个 PDF。并继续减少 PDF 的数量。正如我在任务管理器中观察到的，CPU 使用率始终为 100%，并且内存始终在增加。我使用了多线程概念。

如何减少 CPU 使用率和内存并在一分钟内创建超过 40 个 PDF 的 PDF。

我正在使用多线程的 C# 代码。

我们如何处理 CPU 使用率。如果 CPU 使用率较低，则会生成更多数量的 PDF。

以下是我使用的代码：

```
// Insert into the datatable
  dsHeader = objCustStatementDAL.GetCustStatementdetailsForPDF(IsEDelivery, 0);

  //Creating Threads
                if (dsHeader.Tables[0].Rows.Count > 0)
                {
                    Thread FirstTreadPDFs = new Thread(() => objPDFsProcess.DoGeneratePDFsProcess(IsEDelivery, Cycleid, StmtRunDate, CycleType, dsHeader.Tables[0], writerLog, dsHeader.Tables[6], dsHeader.Tables[7], dsHeader.Tables[8]));
                    FirstTreadPDFs.Start();
                }

                if (dsHeader.Tables[1].Rows.Count > 0)
                {
                    Thread SecondTreadPDFs = new Thread(() => objPDFsProcess.DoGeneratePDFsProcess1(IsEDelivery, Cycleid, StmtRunDate, CycleType, dsHeader.Tables[1], writerLog, dsHeader.Tables[9], dsHeader.Tables[10], dsHeader.Tables[11]));
                    SecondTreadPDFs.Start();
                }

                if (dsHeader.Tables[2].Rows.Count > 0)
                {
                    Thread ThirdTreadPDFs = new Thread(() => objPDFsProcess.DoGeneratePDFsProcess2(IsEDelivery, Cycleid, StmtRunDate, CycleType, dsHeader.Tables[2], writerLog, dsHeader.Tables[12], dsHeader.Tables[13], dsHeader.Tables[14]));
                    ThirdTreadPDFs.Start();
                }

                if (dsHeader.Tables[3].Rows.Count > 0)
                {
                    Thread FourthTreadPDFs = new Thread(() => objPDFsProcess.DoGeneratePDFsProcess(IsEDelivery, Cycleid, StmtRunDate, CycleType, dsHeader.Tables[3], writerLog, dsHeader.Tables[15], dsHeader.Tables[16], dsHeader.Tables[17]));
                    FourthTreadPDFs.Start();
                }

                if (dsHeader.Tables[4].Rows.Count > 0)
                {
                    Thread FifthTreadPDFs = new Thread(() => objPDFsProcess.DoGeneratePDFsProcess1(IsEDelivery, Cycleid, StmtRunDate, CycleType, dsHeader.Tables[4], writerLog, dsHeader.Tables[18], dsHeader.Tables[19], dsHeader.Tables[20]));
                    FifthTreadPDFs.Start();
                }

// update in Database
 objCustStatementDAL.UpdateCycleStatusinStmtSched(StmtRunDate, Cycleid); 
```

问候，

普拉萨德

# php - PHP - 预约 Outlook 或 Mac 日历

> ID：12225324
> 
> 赞同：0
> 
> 时间：2012-09-01T06:02:17.673
> 
> 标签：php, calendar

我只是想知道和搜索互联网。是否可以通过邮件创建约会并将其作为附件发送，以便您可以将其保存在日历客户端上。

在 PHP 中有可能吗？如果是这样，谁能给我一个例子或教程？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:53:17.310

```
header("Content-Type: text/Calendar");
header("Content-Disposition: inline; filename=calendar.ics");
echo "BEGIN:VCALENDAR\n";
echo "VERSION:2.0\n";
echo "PRODID:-//Foobar Corporation//NONSGML Foobar//EN\n";
echo "METHOD:REQUEST\n"; // requied by Outlook
echo "BEGIN:VEVENT\n";
echo "UID:".date('Ymd').'T'.date('His')."-".rand()."-example.com\n"; // required by Outlok
echo "DTSTAMP:".date('Ymd').'T'.date('His')."\n"; // required by Outlook
echo "DTSTART:20080413T000000\n"; 
echo "SUMMARY:TEST\n";
echo "DESCRIPTION: this is just a test\n";
echo "END:VEVENT\n";
echo "END:VCALENDAR\n"; 
```

[http://www.terminally-incoherent.com/blog/2008/04/14/generate-outlook-calendar-events-with-php-and-icalendar/](http://www.terminally-incoherent.com/blog/2008/04/14/generate-outlook-calendar-events-with-php-and-icalendar/)

您可以用获取变量替换信息以建立动态链接。

# ruby-on-rails - 标记字段 - 记录插入然后删除

> ID：12225325
> 
> 赞同：0
> 
> 时间：2012-09-01T06:02:21.853
> 
> 标签：ruby-on-rails, jquery-tokeninput

我正在尝试根据 RailsCasts 插曲 #258 让令牌字段工作，我可以很好地提交表单。当我回到我的主页时，我的标签没有出现。

查看本地计算机上的服务器日志，我可以看到...

```
User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" = 'zviHK_WgeHLYUAtbKdzyfQ' LIMIT 1
Activity Load (0.1ms)  SELECT "activities".* FROM "activities" WHERE "activities"."id" = ? LIMIT 1  [["id", "6"]]
(0.0ms)  begin transaction
Tag Load (3.1ms)  SELECT "tags".* FROM "tags" WHERE "tags"."id" = ? LIMIT 1  [["id", 1]]
Tag Load (0.1ms)  SELECT "tags".* FROM "tags" INNER JOIN "activities_tags" ON "tags"."id" = "activities_tags"."tag_id" WHERE "activities_tags"."activity_id" = 6
(0.3ms)  INSERT INTO "activities_tags" ("activity_id", "tag_id") VALUES (6, 1)
(0.2ms)  DELETE FROM "activities_tags" WHERE "activities_tags"."activity_id" = 6 AND "activities_tags"."tag_id" IN (1)
(1.6ms)  commit transaction 
```

'INSERT INTO "activities_tags"...' 具有正确的值，但由于某种原因，它会立即删除记录，我不知道它会在哪里发挥作用。

我的活动控制器：

```
class ActivitiesController < ApplicationController
... 
  def update
@activity = Activity.find(params[:id])
params[:activity][:tag_ids] ||= []

respond_to do |format|
  if @activity.update_attributes(params[:activity])
    flash[:success] = "Activity was successfully updated!"
        format.html { redirect_to master_resumes_url }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @activity.errors, status: :unprocessable_entity }
  end
    end
  end
...
end 
```

我的活动.rb：

```
class Activity < ActiveRecord::Base
  attr_accessible :end_date, :organization, :position, :start_date, :user_id, 
                  :tag_tokens, :tag_ids
  attr_reader :tag_tokens

  has_and_belongs_to_many :tags
  belongs_to :user

  def tag_tokens=(ids)
temp = ids.split(",")
self.tag_ids = temp[0]
  end
end 
```

我的活动表格：

```
<%= form_for(@activity) do |f| %>
  <h4>Choose Tags</h4>
    <%= f.label :tag_tokens, "Tags" %>
    <%= f.text_field :tag_tokens, "data-pre" => @activity.tags.map(&:attributes).to_json %>
        <p><%= link_to "Create A New Tag", new_tag_path %></p>
<% end %> 
```

最后，我的活动.js：

```
$(function() {
  $("#activity_tag_tokens").tokenInput("/tags.json", {
    crossDomain: false,
prePopulate: $("#activity_tag_tokens").data("pre"),
theme: "facebook",
allowCustomEntry: true
  });
}); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:10:48.533

1）你有一个在任何地方命名的 before_filter 吗？

2) 你有在 attr_accessible 中命名的 :activities_tags 吗？

# javafx-2 - java fx media 中的媒体元数据可观察映射为空

> ID：12225328
> 
> 赞同：0
> 
> 时间：2012-09-01T06:02:46.000
> 
> 标签：javafx-2

大家好，我尝试使用以下代码使用 java fx 2.1 api 播放歌曲并打印其元数据

```
 Media media = new Media(UIandControls.class.getResource("/assets/testData/mom.mp3").toExternalForm());
    MediaPlayer mediaPlayer = new MediaPlayer(media);
    ObservableMap list=media.getMetadata();
         System.out.print(list);
         mediaPlayer.play(); 
```

由于某种原因 getMetadata() 是空的可观察地图。

输出看起来像这样

> {}

请帮助我..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T21:44:51.507

需要在检索元数据之前调用 mediaPlayer.play()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T00:10:51.510

起初我遇到了麻烦，但我发现使用它很有效。

```
mediaPlayer.getMedia().getMetadata().addListener(new MapChangeListener<String, Object>(){
        @Override
        public void onChanged(Change<? extends String, ?> change) {
            if(change.wasAdded()){
                if(change.getKey().equals("artist"))
                    setArtist(change.getValueAdded().toString());
                else if(change.getKey().equals("title"))
                    setTitle(change.getValueAdded().toString());
                else if(change.getKey().equals("year"))
                    setYear(change.getValueAdded().toString());
            }
        }
    }); 
```

另外我读到媒体数据在初始化后并不总是在那里，因此调用该`mediaPlayer.setOnReady()`方法可以确保数据在那里。

例子：

```
mediaPlayer.setOnReady(new Runnable(){
        @Override
        public void run() {
            setTrackLength(mediaPlayer.getMedia().getDuration().toMinutes());
            mediaPlayer.currentTimeProperty().addListener(progressChangeListener);
        }
    }); 
```

# ruby - 如何管理 Mongoid 和 Ruby 中的步骤顺序

> ID：12225329
> 
> 赞同：0
> 
> 时间：2012-09-01T06:02:46.283
> 
> 标签：ruby, database-design, nosql, mongoid

我正在尝试用Ruby 和 Mongoid`Tour`的序列创建一个：`Steps`

```
class Tour
  include Mongoid::Document
  field :name,    type: String
  embeds_many :steps
end

class Step
  include Mongoid::Document
  field :name,    type: String
  embedded_in :tour
end 
```

**管理有序步骤的最佳方式是什么？**（考虑到：插入、删除、移动步骤）

我的第一反应是做单向链表样式，存储下一步：

```
class Step
  include Mongoid::Document
  field :name,    type: String

  embeds_one  :step, store_as: "next_step"
  embedded_in :tour
end 
```

如果其他人有更好的设计建议有兴趣:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:09:27.933

如果您想更改步骤顺序，使用单向关系将导致难以维护。

我建议使用 embeds_many + 步进订单字段 + 自定义验证器。

# java - 如何将泛型引用分配给提供非泛型数组列表的方法

> ID：12225335
> 
> 赞同：1
> 
> 时间：2012-09-01T06:03:48.527
> 
> 标签：java, generics

如何为返回非泛型的方法的返回值分配泛型引用`ArrayList`？我不知道`ArrayList`它返回的是什么类型。

例如，我有一些旧课程：

```
class Employee {
    ArrayList al;

    public ArrayList getEmplist() {
        return al;
    }    
} 
```

我从以下位置调用此方法：

```
class UseEmp {
    ??? = getEmplist();
} 
```

我该如何处理，我可以使用对象或任何东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:41:23.253

# php - Osclass 3.0 登录不起作用

> ID：12225336
> 
> 赞同：0
> 
> 时间：2012-09-01T06:03:58.807
> 
> 标签：php, content-management-system, osclass

我正在为我的网站[http://www.citybonanza.com](http://www.citybonanza.com)使用 oslass 3.0 。当用户通过电子邮件中的链接激活他的帐户时，他可以查看他的帐户。之后，用户无法登录他的帐户。

饼干有什么问题吗？请任何人帮助。. .

阿努普G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:51:02.387

尝试在 localhost 上重新创建问题并打印错误，从这里很难判断到底发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T08:41:02.530

似乎有些错误？如果用户点击记住登录名，它会起作用吗？我认为问题在于[会话](http://php.net/manual/en/features.sessions.php)。您可以在文件末尾尝试以下代码`config.php`吗？

```
session_save_path ( dirname(__FILE__) . '/oc-content/uploads/session/' ); 
```

只需记住在文件夹中添加一个名为 session 的`./oc-content/uploads/`文件夹并使其可写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-02T02:22:39.380

我希望这对未来的用户来说是及时的。我发现上述方法不起作用，但它在正确的道路上......没有双关语。如果你给出这个指令，登录问题应该会消退：

`session_save_path ( ABS_PATH . 'oc-content/uploads/' );`

# mysql - 如何在mysql中明智地应用索引

> ID：12225347
> 
> 赞同：2
> 
> 时间：2012-09-01T06:05:44.233
> 
> 标签：mysql, indexing

索引主要用于提高数据库查询的速度，最适合应用在表的主键上，但不一定总是如此。

我想知道应用索引并因此获得最佳结果的决策。

因为我对索引的了解不仅限于将其应用于主键，否则我会在什么情况下应用它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T06:51:58.670

尽管它们被广泛使用，但最好在语句的子句和子句`index`中经常使用的任何列上使用它们。`WHERE``ORDER BY`

以下表为例：

```
CREATE TABLE `people` (
    `id` int,
    `name` varchar(255),
    `phone` varchar(10),
    `state` varchar(50),
    `city` varchar(100),
    `zip` int
); 
```

默认情况下，您可能只会在`id`列上有一个索引。现在，假设您的数据库中有 20k“人”。当通过 id 字段以外的任何字段进行搜索时，您可能会开始注意到一些滞后。这就是索引的用武之地。

您很有可能不会按字段进行搜索`phone`（可能，但不太可能），因此我们不会索引该字段。但是，按`state`/ `city`/搜索的`zip`可能性更大。当您按城市/州进行搜索时，您通常会同时使用`WHERE`类似以下的子句进行搜索：

```
WHERE state = 'Florida' AND city = 'Miami'; 
```

因为它们经常一起使用，所以您应该使用*这两个*字段创建一个索引（请参阅 参考资料[`multiple-column indexes`](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)）。另一方面，当您通过 搜索时`zip`，您通常会在没有附加城市/州的情况下进行搜索，例如：

```
WHERE zip = 12345; 
```

这样，您将仅使用 zip 字段创建索引。

另外，值得注意的是，索引不仅占用空间，还需要在任何过程中`INSERT`或`UPDATE`在与它们的表上进行修改。如果您有大量索引和*大量*`INSERT`记录，则可以开始注意到单个的时间。因此，请确保您确实需要索引将提供的额外性能提升，然后再添加它们（如盐 + 胡椒）。

# javascript - 如何使 Yii 框架的 CGridView 的 linkHtmlOptions 显示为图像图标，并在单击时触发 javascript/jquery？

> ID：12225348
> 
> 赞同：0
> 
> 时间：2012-09-01T06:06:07.160
> 
> 标签：javascript, jquery, yii, lightbox

这是我在 Yii 框架 Web 应用程序的 CGridView 中需要帮助的部分

```
 array(
       'class'=>'CLinkColumn',
       'linkHtmlOptions'=>array("onclick"=>"$('.fancybox').fancybox()"),
       'header'=>'Image',
  ), 
```

目前，当我在前端查看时，它将“链接”显示为超链接。我想要发生的是，它将显示一个可点击的图像图标，例如 /images/click_icon.jpg 而不是普通的单词超链接，然后一旦它被点击，它应该调用这个

```
$(".fancybox").fancybox(); 
```

那么如何在我上面粘贴的那个数组中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:55:51.380

您可以使用[`imageUrl`CLinkColumn 的属性](http://www.yiiframework.com/doc/api/1.1/CLinkColumn#imageUrl-detail)：

```
array(
   'class'=>'CLinkColumn',
   'linkHtmlOptions'=>array("onclick"=>"$('.fancybox').fancybox()"),
   'header'=>'Image',
   'imageUrl'=>Yii::app()->baseUrl.'/images/click_icon.jpg'
), 
```

无论您将图像存储在何处，都必须提供该 url，对于上面的示例，图像位于项目根目录中，因此我使用了`Yii::app()->baseUrl`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T11:29:26.923

当你写

```
'linkHtmlOptions'=> array("onclick"=>"$('.fancybox').fancybox()"), 
```

您实际上在做的是在“click”事件上触发类选择器“.fancybox”对所有匹配元素的初始化。尽管您正在进行初始化，但您并没有让 fancybox 以正确的方式管理元素的 onclick 事件。

你应该有

```
'linkHtmlOptions'=> array("onclick"=>"$('.fancybox').click()"), 
```

并且，如fancybox 站点上的说明所示，将fancybox 初始化放在document.ready 事件中。但是如果你坚持要在网格中初始化fancybox对象，你应该写

```
'linkHtmlOptions'=> array("onclick"=>"$('.fancybox').fancybox(); $('.fancybox').click()"), 
```

但是您可能需要在这两个电话之间等待，必须对其进行测试...

顺便说一句，您正在为网格列中的每个单元格一遍又一遍地重复相同的链接。这有什么意义吗？我会将链接放在网格之外。

# node.js - 收到访问令牌后，无法在 Nodejs 中向 Google OAuth 2 发出经过身份验证的请求

> ID：12225349
> 
> 赞同：1
> 
> 时间：2012-09-01T06:06:38.137
> 
> 标签：node.js, oauth-2.0

我真的很讨厌打败这匹死马，但是如果不使用 node-oauth，我无法使用 node 找到明确的答案。在从 Passport 的 Oauth 舞蹈中收到用户的访问令牌后，我似乎无法真正执行成功的 GET：

```
function(accessToken, callback)
{
    var request = require('https').request(
    {

        host: 'www.google.com',
        port: 443,
        path: '/m8/feeds/contacts/default/full?alt=json',
        method: 'GET',
        headers: 
        {
            Authorization: 'Oauth ' + accessToken
        }
    },

    function (res) 
    {
        console.log(res.statusCode);
        callback(JSON.parse(res));
    });

    request.end();
} 
```

我得到一个 401。我知道 accessToken 是有效的。我使用标题的方式与我在 Google 的 Oauth Playground 中看到的完全相同。非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T06:30:47.667

现在杀了我：

**错误**：

```
Authorization: 'Oauth ' + accessToken 
```

**对**：

```
Authorization: 'OAuth ' + accessToken 
```

# java - Java 中的 .getClass() 有多贵？

> ID：12225355
> 
> 赞同：10
> 
> 时间：2012-09-01T06:07:33.860
> 
> 标签：java

我正在将某种数据处理算法从 Java 移植到 C++。重写代码的原因是可移植性，它需要在 Java 不可用的环境中运行。但是，作为附带的好处，一些性能改进是预期的。

基本上，该算法从由具有指针的对象组成的图中读取数据，然后计算结果。在计算过程中进行了大量的对象分配，所以这可能是导致速度变慢的原因。问题是，C++ 代码目前的运行速度比旧的 Java 代码快 10 倍。这真是出乎意料。我只以为我会看到可能有 50-60% 的改进。

不幸的是，我无权在此处发布代码以供分析。它有几千行，所以我不确定那会有多方便。

问题是，算法几乎完全相同。我能想到的唯一主要区别是在 Java 中，一个超类有许多子类，并且 if(object.getClass() == daughterx.class) 在计算过程中被调用了很多次，而在 C++ 代码中只有一个通用使用类（因为子类之间的代码差异很少）并使用简单的整数比较，例如。如果（对象->类型 == 15）

Java 中的 Object.getClass() 方法有多贵？调用此方法时，底层到底发生了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-01T06:46:46.290

> Java 中的 Object.getClass() 方法有多贵？

根据我对如何在非主流 JVM 中实现它的了解，它很便宜

> 调用此方法时，底层到底发生了什么？

通常 ...

1.  从对象的标头中提取类索引（2 或 3 条指令）
2.  从类索引中查找类描述符（2 或 3 条指令）
3.  从类描述符中获取并返回`Class`对象引用（2 或 3 条指令）

> 问题是，C++ 代码目前的运行速度比旧的 Java 代码快 10 倍。

我希望性能瓶颈在其他地方。您应该先尝试分析 Java 代码，然后再得出关于它为什么变慢的任何结论。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-01T07:04:41.900

10 倍差异的最可能情况是 JVM 没有完全预热。如果您不这样做，即使在 Java 中，您也会看到超过 10 倍的性能差异。我会尝试分批运行 10,000 个并忽略前几次运行。

```
public static void main(String... args) throws IOException {
    timeObjectGraph("First run", 1);
    timeObjectGraph("Second run", 2);
    timeObjectGraph("Next thousand", 1000);
    for (int i = 0; i < 5; i++)
        timeObjectGraph("Next ten thousand", 10000);
}

static int dontOptimiseAway = 0;

public static void timeObjectGraph(String desc, int runs) throws IOException {
    long start = System.nanoTime();
    for (int i = 0; i < runs; i++) {
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(out);
        oos.writeObject(Calendar.getInstance());
        oos.close();
        dontOptimiseAway = out.toByteArray().length;
    }
    long time = System.nanoTime() - start;
    System.out.printf("%s took an avg time of %,d ns%n", desc, time / runs);
} 
```

印刷

```
First run took an avg time of 37,509,488 ns
Second run took an avg time of 439,054 ns
Next thousand took an avg time of 185,242 ns
Next ten thousand took an avg time of 41,698 ns
Next ten thousand took an avg time of 19,981 ns
Next ten thousand took an avg time of 11,541 ns
Next ten thousand took an avg time of 13,451 ns
Next ten thousand took an avg time of 11,289 ns 
```

从第一次运行到最后一次运行，性能提高了 3000 倍

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-01T06:16:08.233

它不太可能是性能差异的唯一因素。不幸的是，如果没有更完整地了解您的代码实际在做什么，就很难告诉您发生了什么。

根据我的经验，Java 没有理由比 C++ 慢 10 倍。我可能会从探查器开始，看看它指向哪里来理解问题，而不是猜测。

# xcode - 目前无法下载；企业构建/临时分发

> ID：12225362
> 
> 赞同：2
> 
> 时间：2012-09-01T06:08:10.630
> 
> 标签：xcode, code-signing

所以我有一个非常奇怪的问题。尝试使用企业代码签名来部署一次单击部署。

我已经将它上传到服务器上，然后我转到 safari 中的链接，当我在 iPhone 上打开它时，它让我无法下载，此时无法安装应用程序。然而，当我在我的 iPad（在 iPad 上运行的 iPhone 应用程序）上尝试它时，它工作得很好。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T13:16:38.237

你的问题是两件事之一。

与应用程序一起使用的 .plist 中的 xml 值不正确，或者您使用的是非企业分发证书。确保您拥有当前证书，并在构建时选择该证书。还要确保 plist 中的 xml 是正确的。

请注意，您在构建应用程序时输入的字段（图标、目标主机等）并非一直都必须输入。（我只是在每个字段中输入字母 a ）我复制了原始 plist 并手动更改了值。我将文件部署到临时文件夹，并且仅将 .ipa 复制到 IIS 虚拟文件夹。

# php - 如何从纬度和经度获取英国邮政编码？

> ID：12225368
> 
> 赞同：1
> 
> 时间：2012-09-01T06:09:01.347
> 
> 标签：php, google-maps

如果我知道它的纬度和经度，我需要一种方法来查找英国位置的邮政编码。

例如：

地址：Old Deer Park, Richmond, Greater London TW9 2SL, United Kingdom

纬度 = 51.4691，经度 = -0.2963

使用这些信息，我需要一种以编程方式检索该位置的邮政编码的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:21:48.293

您要解决的问题称为反向地理编码。只需查看 提供示例的[Google 地图文档即可。](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)它归结为带有 latlng 参数的 URL，您可以选择 XML 或 JSON。可能有很多结果，因此您必须遍历返回的结构并选择最合适的。

[http://maps.googleapis.com/maps/api/geocode/json?latlng=51.4691,-0.2963&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=51.4691,-0.2963&sensor=false)

使用 CURL + JSON 的示例用法。

```
function getPostcode($lat, $lng) {
  $returnValue = NULL;
  $ch = curl_init();
  $url = "http://maps.googleapis.com/maps/api/geocode/json?latlng=${lat},${lng}&sensor=false";
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
  $result = curl_exec($ch);
  $json = json_decode($result, TRUE);

  if (isset($json['results'])) {
     foreach    ($json['results'] as $result) {
        foreach ($result['address_components'] as $address_component) {
          $types = $address_component['types'];
          if (in_array('postal_code', $types) && sizeof($types) == 1) {
             $returnValue = $address_component['short_name'];
          }
    }
     }
  }
  return $returnValue;
}

echo getPostcode(51.4691, -0.2963); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:26:59.417

它不是谷歌地图的一部分——但这里有一个英国邮政编码 API：

[http://www.uk-postcodes.com/api.php](http://www.uk-postcodes.com/api.php)

它允许您向它发送一个请求，包括一个位置的纬度和经度，它会返回该位置的英国邮政编码。

不知道它是否有效，但值得一试！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:18:51.280

我已经使用此代码：如何使用此代码获取特殊英国邮政编码 .. 以及从 from_address 到 to_address 的预计旅程时间。

```
<style>
    .ui-autocomplete {background-color: white;width: 300px;border: 1px solid #cfcfcf;list-style-type: none;padding-left: 0px}
    #intro-text{margin:20px 0}
    #map_canvas {width: 720px;height: 200px;margin-top:20px;clear:both;display:none}
    #from_box {margin-left:0px}
    #to_box, #from_box {float:left;margin-left:10px}
    #img_arrow {float:left;margin:30px 50px 0 50px}
    #results{margin: 20px 0 10px 0; overflow:hidden}
    #distance_direct{float:left;width:40%;border:1px solid black;margin-left:60px;height:90px}
    #distance_road{float:left;width:40%;border-right:1px solid black; border-top:1px solid black; border-bottom:1px solid black;height:90px}
    .ui-menu-item a {color:black;font-weight:bold;cursor:pointer}
</style>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js"></script>
<script type="text/javascript">

    $(document).ready(function() { 

        var geocoder = new google.maps.Geocoder();

        // This function formats numbers by adding commas
        function numberFormat(nStr,prefix){
            var prefix = prefix || '';
            nStr += '';
            x = nStr.split('.');
            x1 = x[0];
            x2 = x.length > 1 ? '.' + x[1] : '';
            var rgx = /(\d+)(\d{3})/;
            while (rgx.test(x1))
                x1 = x1.replace(rgx, '$1' + ',' + '$2');
            return prefix + x1 + x2;
        }
            $("#from_address").autocomplete({
                //This bit uses the geocoder to fetch address values
                source: function(request, response) {
                    geocoder.geocode( {'address': request.term }, function(results, status) {
                        response($.map(results, function(item) {
                        return {
                            label:  item.formatted_address,
                            value:  item.formatted_address,
                            //latitude: item.geometry.location.lat(),
                            //longitude: item.geometry.location.lng()
                        }
                    }));
                })
              }
            });
            $("#to_address").autocomplete({
                //This bit uses the geocoder to fetch address values
                source: function(request, response) {
                    geocoder.geocode( {'address': request.term }, function(results, status) {
                        response($.map(results, function(item) {
                        return {
                            label:  item.formatted_address,
                            value: item.formatted_address,
                            //latitude: item.geometry.location.lat(),
                            //longitude: item.geometry.location.lng()
                        }
                    }));
                })
              }
            });

        $('#get_results').click(function() {

            if($('#from_address').val() == "" || $('#from_address').val() == "") {
                $('#results').hide();
                $('#map_canvas').hide();
                $('#error_msg').show().html('Please make sure you have entered both a "From" and "To" address.');
                return;
            } else {
                $('#error_msg').hide();
            }

            var location1;
            var location2;
            var formatted_from_address;
            var formatted_to_address

            $('#crow_dist').empty();
            $('#drive_dist').empty();

            geocoder.geocode( { 'address': $('#from_address').val() }, function(results, status ) {
                if (status == google.maps.GeocoderStatus.OK) {
                    //location of first address (latitude + longitude)
                    location1 = results[0].geometry.location;

                    formatted_from_address = results[0].formatted_address;
                    $('#from_address').val( formatted_from_address );

                //////////////////////////////////////////////
                        geocoder.geocode( { 'address': $('#to_address').val() }, function(results, status) {
                            if (status == google.maps.GeocoderStatus.OK) {
                                //location of first address (latitude + longitude)
                                location2 = results[0].geometry.location;
                                formatted_to_address = results[0].formatted_address;
                                $('#to_address').val(formatted_to_address);

                                var latlng = new google.maps.LatLng((location1.lat()+location2.lat())/2,(location1.lng()+location2.lng())/2);

                                var myOptions = {
                                    zoom:10,
                                    center: latlng,
                                    mapTypeId: google.maps.MapTypeId.ROADMAP
                                };

                                var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

                                //Make sure maps shows both markers
                                var southWest = new google.maps.LatLng(location1.lat(),location1.lng());
                                var northEast = new google.maps.LatLng(location2.lat(),location2.lng());
                                var bounds = new google.maps.LatLngBounds(southWest,northEast);

                                document.getElementById("lat1").value = southWest;
                                document.getElementById("lat2").value = northEast;

                                map.fitBounds(bounds);

                                // show route between the points
                                directionsService = new google.maps.DirectionsService();
                                directionsDisplay = new google.maps.DirectionsRenderer({
                                    suppressMarkers: true,
                                    suppressInfoWindows: false
                                });

                                directionsDisplay.setMap(map);
                                var request = {
                                    origin:location1, 
                                    destination:location2,
                                    travelMode: google.maps.DirectionsTravelMode.DRIVING
                                };

                                directionsService.route(request, function(response, status) {
                                    if (status == google.maps.DirectionsStatus.OK) {
                                        directionsDisplay.setDirections(response);
                                        distance = numberFormat( Math.round( (response.routes[0].legs[0].distance.value) * 0.000621371192 ) );
                                        $("#drive_dist").html('<div style="font-weight:bold;font-size:1.6em;margin-bottom:5px">' + distance + ' mi.</div><div style="font-style:italic"><a href="directions/?address1='+$('#from_address').val()+'&address2='+$('#to_address').val()+'">Get Directions</a></div>');
                                    } else {
                                        $("#drive_dist").html('<div style="font-weight:bold;font-size:1.6em;margin-bottom:5px">Not Available</div>');
                                    }

                                    document.getElementById("distance1").value = distance;
                                });

                                $('#directionsPanel').empty();
                                directionsDisplay.setPanel(document.getElementById("directionsPanel"));

                                var marker1 = new google.maps.Marker({
                                    map: map, 
                                    position: location1,
                                    title: "From: " + $('#from_address').val()
                                });
                                var marker2 = new google.maps.Marker({
                                    map: map, 
                                    position: location2,
                                    title: "To: " + $('#to_address').val()
                                });
                                //DD=$('#from_address').val();

                                // create the text to be shown in the infowindows
                                var text1 = '<div style="width:100px"><b>From:</b> '+formatted_from_address+'</div>';
                                var text2 = '<div style="width:100px"><b>To:</b>'+formatted_to_address+'</div>';

                                // create info boxes for the two markers
                                var infowindow1 = new google.maps.InfoWindow({
                                    content: text1
                                });
                                var infowindow2 = new google.maps.InfoWindow({
                                    content: text2
                                });

                                // add action events so the info windows will be shown when the marker is clicked
                                google.maps.event.addListener(marker1, 'click', function() {
                                    infowindow1.open(map,marker1);
                                });
                                google.maps.event.addListener(marker2, 'click', function() {
                                    infowindow2.open(map,marker2);
                                });

                                function toRad(deg) {
                                    return deg * Math.PI/180;
                                }

                                // compute distance between the two points
                                var R = 6371; // Radius of the earth in km
                                var dLat = toRad(location2.lat()-location1.lat());
                                var dLon = toRad(location2.lng()-location1.lng()); 

                                var dLat1 = toRad(location1.lat());
                                var dLat2 = toRad(location2.lat());

                                var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                                        Math.cos(dLat1) * Math.cos(dLat1) * 
                                        Math.sin(dLon/2) * Math.sin(dLon/2); 
                                var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
                                var d = (R * c) * 0.621371192; // Distance in miles;

                                $("#crow_dist").html('<div style="font-weight:bold;font-size:1.6em;margin-bottom:5px">' + numberFormat( Math.round(d) ) + ' mi.</div><div style="font-style:italic">"As the Crow Flies"</div>');
                                $('#map_canvas').show();

                            } else {
                                alert("Geocode for Address 2 was not successful for the following reason: " + status);
                            }
                        });
                } else {
                    alert("Geocode for Address 1 was not successful for the following reason: " + status);
                }
            });
            $('#results').show();
        });

        if($('#from_address').val() != '' || $('#to_address').val() != '') {
            $('#get_results').trigger('click');
        }
    });

</script>

<div id="map_canvas"></div> 
```

# python - Python理解错误

> ID：12225370
> 
> 赞同：-2
> 
> 时间：2012-09-01T06:09:29.083
> 
> 标签：python, string, if-statement, while-loop

我一直在编写一个代码，我必须编写一个程序来模拟当老鼠进入厨房时，当陷阱被设置和未设置时会发生什么，它应该读入多行输入，描述厨房里发生的事情.

如果线路设置陷阱。进入，然后鼠标陷阱成为诱饵。如果线鼠标！输入，程序应该打印鼠标发生的事情。如果设置了陷阱，则打印出 Trap!。如果未设置陷阱，则打印出 The mouse escaped.. 对于所有其他输入行，程序不应执行任何操作。因为它应该一直读取用户的行，直到用户输入一个空行。一旦老鼠被困在陷阱里，除非它被重置，否则陷阱不能用来捕捉另一只老鼠。

所以我制作了这个程序，但它不适用于“鼠标逃脱”。任何人都可以通过查看我的代码来指导我：

```
a = raw_input("Enter line: ")
space = ""
trap_set = True
while a != space:
    a = raw_input("Enter line: ")
    if 'Set the trap.' in a:
        trap_set = True
        print "Trap!"
    else:
        if 'Mouse!' in a:
            trap_set = True
            print "The mouse escaped." 
```

我希望我的程序像这样运行：

```
Enter line: Go to the fridge.
Enter line: Set the trap.
Enter line: Go to bed.
Enter line: Mouse!
Trap!
Enter line: 
```

或者

```
Enter line: Make some dinner.
Enter line: Wash the dishes.
Enter line: Mouse!
The mouse escaped.
Enter line: Sweep the floor.
Enter line: Set the trap.
Enter line: Mouse!
Trap!
Enter line: Go to bed.
Enter line: 
```

这就是我无法解决的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T06:22:28.863

我对上面的 tolo1377 采用了稍微不同的方法。`Set the trap`除了' '和' '之外，我不关心任何输入`Mouse`。

```
a = raw_input("Enter line: ")
space = ""
trap_set = True
while a != space:
    a = raw_input("Enter line: ")
    if 'Set the trap.' in a:
        trap_set = True
    elif 'Mouse' in a:
        if trap_set:
            print "Mouse trapped!"
            trap_set = False
        else:
            print "The mouse escaped." 
```

您在程序的这些行中没有做任何有用的事情：

```
else:
    if 'Mouse!' in a:
        trap_set = True
        print "The mouse escaped." 
```

您正在检查单词' `Mouse`！' 出现，这很好，但是您并没有检查是否设置了陷阱。您需要检查陷阱是否已设置，如果是，则执行某些操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T06:37:54.717

这里有几件事混在一起。如果你叫“鼠标！” 在第一次调用时，它将失败，因为您必须先设置条件。

```
a = raw_input("Enter line: ")
space = ""
# did you want to pre-set the trap to True? #
trap_set = False 
while a != space:
    if 'Set the trap.' in a:
        trap_set = True
      # no reason to print trap if just setting #
      #  print "Trap!" #
    elif 'Mouse!' in a: 
        if  trap_set == False:
            print "The mouse escaped."
        elif trap_set == True:
            print 'trap'
            trap_set = False
    a = raw_input("Enter line: ") 
```

最后两个条件是您检查输入“鼠标”时是否设置了“陷阱”。然后重置陷阱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T06:18:43.277

这应该有助于：

```
a = raw_input("Enter line: ")
space = ""
trap_set = True
while a != space:
    if a == 'Set the trap.':
        trap_set = True
    elif a == 'Mouse!' and trap_set == False:
        print "The mouse escaped."
    elif a == 'Mouse!' and trap_set == True:
        print 'Trap!'
        trap_set = False
    a = raw_input("Enter line: ") 
```

在您的条件下，您需要将变量与字符串文字进行比较，而不是相反。

此外，您想在最后再次询问输入，因为您没有检查第一个输入。在我的解决方案中，我还更改了 trap_set ，以便一旦触发它就变为 False 。

希望这可以帮助。

# android - 如何序列化 TreeMap 并将其插入 SharedPreferences？

> ID：12225371
> 
> 赞同：0
> 
> 时间：2012-09-01T06:09:48.430
> 
> 标签：android, serialization, collections, sharedpreferences, treemap

我使用 TreeMap 是因为它是存储我需要的信息的最有效的数据结构。我必须能够保留 TreeMap 以供将来使用，所以有没有办法将它存储在一个`SharedPreferences`对象中，也许在这样做之前对其进行序列化？

我在[这里](https://stackoverflow.com/questions/7057845/save-arraylist-to-sharedpreferences)知道这种方法，但是`ObjectSerializer`从 Apache Pig 项目中使用会使 Eclipse 崩溃。当我运行该应用程序时，底部的状态栏永远不会超过消息“Launching [app name] 100%”，直到它抛出以下错误消息：

```
Unable to execute dex: Java heap space
Unhandled event loop execution 
```

我可以做些什么来将 TreeMap 存储在共享首选项中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T06:15:33.737

如果要序列化/反序列化，可以将 TreeMap 序列化为 JSON 格式作为字符串对象，然后将其存储在您想要存储的任何位置。稍后您将能够从 JSON 格式反序列化它。

您可以使用著名的杰克逊库，因为杰克逊库是行业标准并且是免费的。请参阅[http://wiki.fasterxml.com/JacksonHome](http://wiki.fasterxml.com/JacksonHome)。

**编辑**：JSON 格式还确保您可以读取其他程序中的持久数据，因为它非常可读。不确定 Jackson JSON 库是否适用于 android。如果是这样，请在 android 中找到其他一些 JSON 库。

# javascript - Foreach-loop for Array，通过 AJAX-query 获得

> ID：12225375
> 
> 赞同：4
> 
> 时间：2012-09-01T06:10:23.313
> 
> 标签：javascript, ajax, foreach, iteration

我有JS代码：

```
$("#select_bank").change(function () {
  selected_bank = $("#select_bank option:selected").text();

  $.ajax({
    type: 'POST',
    dataType: 'html',
    data: {
      selectedBank: selected_bank
    },
    url: '<?= base_url() . 'atm/select_region'; ?>',
    success: function (list_regions) {
      foreach(keyVar in list_regions) {
        alert(list_regions[keyVar]);
      }
    }
  });
}); 
```

在回调“成功”时，我从服务器的脚本中获取数组 - 在警报中我看到了“数组” - 所以我想像上面编码的那样在客户端通过这个数组进行迭代，但是当我在控制台中得到错误时 - “未定义 var keyVar”。据我了解，我需要将`list_regions`参数类型转换为数组或其他方式来修复它。请问，怎样才能变好？谢谢！

更新：![在此处输入图像描述](../Images/df5d2fa6b5ddf601020a2ee239fa5a59.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T06:17:18.700

如果我是对的，您不能以这种方式将 foreach 循环转换为 jquery。

您应该使用 .each 来迭代值

```
$.each(list_regions, function(index, value) {
  alert(value);
}); 
```

[您可以在此处](http://api.jquery.com/jQuery.each/)找到更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T06:14:19.783

Javascript没有`foreach`构造。`$.each`jQuery的使用方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T06:13:16.857

尝试这个：

```
$("#select_bank").change(function(){
    // The following line was missing a var declaration,
    // Making it an implicit global
    var selected_bank = $("#select_bank option:selected").text();

    $.ajax({
        type:'POST',
        dataType:'html',
        data: { selectedBank: selected_bank },
        url:'<?=base_url().'atm/select_region'; ?>',
        success:function(list_regions){
            var keyVar;
            for(keyVar in list_regions) {
                if (list_regions.hasOwnProperty(keyVar)) {
                    alert(list_regions[keyVar]);
                }
            }
        }
    });

}); 
```

# javascript - 在我的网站上添加最新的推文作为纯文本？

> ID：12225381
> 
> 赞同：4
> 
> 时间：2012-09-01T06:11:40.547
> 
> 标签：javascript, jquery, html, css, twitter

我有一个 HTML/CSS 网站，想在页脚部分添加我最新的推文，一些注释：

*   我不喜欢他们网站上可用的 twitter 小部件的外观

*   我只想要一些仅将我的最新推文显示为文本的内容（只是最后一条，而不是几条），然后我将四处添加背景并通过 CSS 自定义字体。

*   在 Web 开发方面，我仍然是初学者，所以对 JQuery/javascripts 没有任何经验，所以如果解决方案是由那些人完成的，如果你保持简单易懂，我将非常感激。

我尝试完全按照步骤中提到的方式遵循本指南，但它不起作用，根本没有显示任何内容：

[http://www.webdesigndev.com/programming/how-to-display-your-last-tweet-using-javascript-and-the-twitter-api](http://www.webdesigndev.com/programming/how-to-display-your-last-tweet-using-javascript-and-the-twitter-api)

也许这是做这种事情的过时方法，我不太确定，我不希望这种确切的方法起作用，只是为了完成工作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:03:32.557

这可能会帮助你。进入您的编辑器并从您复制的源代码中替换“”，并将其替换为真正的“”。在所有 3 行

让它为我工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T06:32:23.837

只需将其添加到您的网站上您需要的地方：

```
<div id=”twitter_update_list”&gt;
  <script type=”text/javascript” src=”http://twitter.com/javascripts/blogger.js”&gt;</script>
  <script type=”text/javascript” src=”http://twitter.com/statuses/user_timeline/[yourusername].json?callback=twitterCallback2&count=1″&gt;</script>
</div> 
```

# file - Bash 脚本创建了一个意外的文件

> ID：12225385
> 
> 赞同：3
> 
> 时间：2012-09-01T06:13:20.440
> 
> 标签：file, bash, unix, backup

我正在创建一个简单的脚本来帮助我的 Ubuntu-Server 管理我的备份。我每隔 x 小时从本地机器压缩我的文档，然后将其 scp 到我的备份机器。我希望有最大数量的备份可以保留在我的备份目录中。我正在编写一个脚本，如果已达到最大备份量，它将删除旧备份。这是我到目前为止所拥有的，当我运行脚本时它会生成一个名为 MAX_backups 的文件。任何想法为什么要创建这个文件？在 bash 编程方面，我的经验还很差，但我们将不胜感激。谢谢。

```
#!/bin/bash

backup_count=$(ls ~/backup | wc -w)

MAX_backups='750'

extra_count=$((backup_count - MAX_backups))

if [ backup_count > MAX_backups ]
then
        for ((i=0; i <= extra_count; i++))
        do
                file=$(ls ~/backup -t -r -1 | head --lines 1)
                rm ~/backup/"$file"
        done
fi 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T06:16:30.560

```
if [ backup_count > MAX_backups ] 
```

被`>`解释为文件重定向。尝试其中之一：

```
# ((...)) is best for arithmetic comparisons. It is parsed specially by the shell and so a
# raw `>` is fine, unlike within `[ ... ]` which does not get special parsing.
if (( backup_count > MAX_backups ))

# [[ ... ]] is a smarter, fancier improvement over single brackets. The arithmetic operator
# is `-gt`, not `>`.
if [[ $backup_count -gt $MAX_backups ]]

# [ ... ] is the oldest, though most portable, syntax. Avoid it in new bash scripts as you
# have to worry about properly quoting variables, among other annoyances.
if [ "$backup_count" -gt "$MAX_backups" ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T06:25:42.533

不确定为什么要创建该文件，但我想您的“test”版本（if 语句中的括号运算符）会创建此文件。我认为，比较应该改为

```
if [ $backup_count -gt $MAX_backups ] 
```

编辑：当然！我错过了文件重定向，这就是创建文件的原因。

# java - 将前 10 000 行数据文件写入新文件的最快方法

> ID：12225386
> 
> 赞同：0
> 
> 时间：2012-09-01T06:13:27.583
> 
> 标签：java

我想要一个 hyuuge (.csv) 文件的前一万行。

天真的方式

1）创建一个读者和作家

2）逐行读取原始文件行

3）将前一万行写入新文件

不可能是最快的，不是吗？

这将是我的应用程序中的常见操作，所以我有点担心速度，但也只是好奇。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T06:19:31.287

有几种方法可以在 Java 中进行*快速*I/O，但如果没有针对您的特定情况进行基准测试，很难得出一个数字/建议。以下是您可以尝试基准测试的几种方法：

*   缓冲区大小可能不同的缓冲读取器/写入器
*   读取内存中的整个文件（如果可以的话）并进行内存拆分并一次性将其全部写入
*   使用 NIO 文件 API 读取/写入文件（查看 Channels）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T06:33:31.247

如果您只想读/写 10,000 行左右：

*   启动一个新的 JVM 可能比读/写文件需要更长的时间，
*   读/写时间应该是几分之一秒......以天真的方式进行，并且
*   复制算法的整体速度不太可能值得。

`BufferedReader.readLine()`话虽如此，您可以比使用或其他方式一次阅读一行做得更好。

*   根据文件的字符编码，您将通过使用具有大缓冲区大小的 BufferedInputStream 和 BufferedOutputStream 执行按字节 I/O 获得更好的性能。只需编写一个循环来读取一个字节，有条件地更新行计数器并写入字节......直到您复制了所需的行数。（这假设您可以通过检查字节来检测 CR 和/或 LF 字符。这适用于我所知道的所有字符编码。）

*   如果使用 NIO 和 ByteBuffers，可以进一步减少内存中的复制量，尽管 CR/LF 计数逻辑会更复杂。

但是你应该问的第一个问题是，是否值得费心去优化它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T06:31:53.500

线的长度是否相同。如果是这样，您可以使用 RandomAccessFile 读取 x 字节，然后将这些字节写入新文件。不过，它可能会占用大量内存。我怀疑这会更快，但可能值得进行基准测试。此解决方案仅适用于固定长度的线

# java - 实现与 ActionListener 交互的方法？

> ID：12225388
> 
> 赞同：2
> 
> 时间：2012-09-01T06:13:54.447
> 
> 标签：java, swing, jbutton, actionlistener

我想连接该方法`returnedConversion`，以便`ActionListener`在用户选择要转换的温度比例后将结果返回给。我意识到代码至少可以说有点脱节，所以请忽略所有注释掉的区域（除非你能指出我应该注意的区域。

如何将该代码从方法连接到代码，`returnedConversion`以便`ActionListener`代码正确运行？另外，我是否正确地将`JTextField`框的输入转换为双精度，然后将其适当地转换回 a`String`以将其传递回第二个`JTextField`框？

```
package temperatureConverter;

import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JTextField;

public class TempConverter extends JFrame {
    private JComboBox firstComboBox;
    private JComboBox secondComboBox;
    private JTextField initialTemp;
    private JTextField convertedTemp;
    private JButton convertButton;
    // private enum TempType { FAHRENHEIT, CELSIUS, KELVIN};
    private static final String[] tempType = { "Fahrenheit", "Celsius",
            "Kelvin" };
    public static final String theInitialTempType = null;
    public static final String theTempTypeToConvertTo = null;
    public static final String theChosenTemp = null;
    public static final String theNewTemp = null;

    public TempConverter() {
        super("Temperature Converter");
        setLayout(new FlowLayout());

        firstComboBox = new JComboBox(tempType);
        firstComboBox.setMaximumRowCount(3);
        firstComboBox.addActionListener(null);
        add(firstComboBox);
        secondComboBox = new JComboBox(tempType);
        secondComboBox.setMaximumRowCount(3);
        secondComboBox.addActionListener(null);
        add(secondComboBox);
        initialTemp = new JTextField("", 10);
        initialTemp.addActionListener(null);
        add(initialTemp);
        convertedTemp = new JTextField("", 10);
        convertedTemp.addActionListener(null);
        add(convertedTemp);
        convertButton = new JButton("Convert");
        convertButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent event) {
                String applyIt = returnedConversion(initialTemp.getText());
                System.out.println(applyIt);
//              convertedTemp.returnedConversion();
                // ???????????????????????????????????????????
            }
        });
        add(convertButton);
        // String theInitialTempType = (String) firstComboBox.getSelectedItem();
        // String theTempTypeToConvertTo = (String)
        // secondComboBox.getSelectedItem();
        // String theChosenTemp = initialTemp.getSelectedText();
        // String theNewTemp = convertedTemp.getSelectedText();
    }

    // public class textHandler implements ActionListener
    // {
    // public void itemStateChanged (ActionEvent event)
    // {
    // double convertedNumberForTheChosenTemp =
    // Double.parseDouble(theChosenTemp);
    // double convertedNumberForTheNewTemp = Double.parseDouble(theNewTemp);
    // String string1 = "";
    // String string2 = "";
    //
    // if ( theInitialTempType == tempType[0] && theTempTypeToConvertTo ==
    // tempType[1] )
    //
    // convertedNumberForTheNewTemp = (convertedNumberForTheChosenTemp - 32) * 5
    // / 9;
    // String result = String.valueOf(convertedNumberForTheNewTemp);
    // convertedTemp.getSelectedText();
    // }

    // @Override
    // public void actionPerformed (ActionEvent e) {
    //
    // }
    // }
    public String returnedConversion(String toConvert) {
        double convertedNumberForTheChosenTemp = Double.parseDouble(theChosenTemp);
        double convertedNumberForTheNewTemp = Double.parseDouble(theNewTemp);

        if (theInitialTempType == tempType[0] && theTempTypeToConvertTo == tempType[1]) {
            convertedNumberForTheNewTemp = (convertedNumberForTheChosenTemp - 32) * 5 / 9;
            String result = String.valueOf(convertedNumberForTheNewTemp);
            return result;
        } else if (theInitialTempType == tempType[0] && theTempTypeToConvertTo == tempType[2]) {
            convertedNumberForTheChosenTemp = (convertedNumberForTheChosenTemp + 459.67) / 1.8;
            String result = String.valueOf(convertedNumberForTheNewTemp);
            return result;

        } else if (theInitialTempType == tempType[1] && theTempTypeToConvertTo == tempType[0]) {
            convertedNumberForTheChosenTemp = (convertedNumberForTheChosenTemp * 1.8) + 32;
            String result = String.valueOf(convertedNumberForTheNewTemp);
            return result;
        } else if (theInitialTempType == tempType[1] && theTempTypeToConvertTo == tempType[2]) {
            convertedNumberForTheChosenTemp = convertedNumberForTheChosenTemp + 273.15;
            String result = String.valueOf(convertedNumberForTheNewTemp);
            return result;
        } else if (theInitialTempType == tempType[2] && theTempTypeToConvertTo == tempType[0]) {
            convertedNumberForTheChosenTemp = (convertedNumberForTheChosenTemp * 1.8) - 459.67;
            String result = String.valueOf(convertedNumberForTheNewTemp);
            return result;
        } else if (theInitialTempType == tempType[2] && theTempTypeToConvertTo == tempType[1]) {
            convertedNumberForTheChosenTemp -= 273.15;
            String result = String.valueOf(convertedNumberForTheNewTemp);
            return result;
        }

        return null;
    }

    public static void main(String[] args) {
        TempConverter tempTest = new TempConverter();
        tempTest.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        tempTest.setSize(300, 200);
        tempTest.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T07:17:06.180

作为第一步，请阅读[“为常用事件实现侦听器”](http://docs.oracle.com/javase/tutorial/uiswing/events/handling.html)。这将使您很好地了解如何使用基本事件处理`Swing`

如果我理解正确，这是您想要实现的目标：

*   `JComboBox`用户使用您提供的选项选择转换选项。
*   用户在您的第一个`JTextField`调用中输入值`initialTemp`
*   用户按下`Convert` `JButton`然后您想要捕获该事件，在第一个中隐藏文本`JTextField`并在第二个中显示转换后的结果`JTextField`。

因此，作为第一步，您要实现一个进行转换的方法，即当用户按下`Convert`按钮时，将调用此方法，它将从第一个获取值`JTextField`，执行转换并将其更新为文本值第二个`JTextField`。您有一个名为 的方法`public String returnedConversion(String toConvert)`，我建议对此进行一些更改：

```
public void returnedConversion(String initialValue){
    //Step 1\. Validate the input
    //Step 2\. Convert the value. You write your own logic taking into account the initialValue
    //        and the JComboBox conversion options
    //Step 3\. Set the text of the second JTextField to the converted value, using the method convertedTemp.setText(...)
} 
```

现在，您可能希望在调用 时调用此方法`Convert` `JButton`。所以，正如你所做的那样，你会希望 an`ActionListener`与它相关联。现在你在那里做什么？好吧，像这样：

```
convertButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent event) {
        returnedConversion(initialTemp.getText());
    }
}); 
```

我希望这能给你正确的指导来帮助你编写代码。

另外作为最后一点，您可能需要阅读[“Threads and Swing”](http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html)和[“Threading with Swing”](http://www.javamex.com/tutorials/threads/invokelater.shtml)以了解如何启动您的 Swing 应用程序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T06:30:48.160

第 49 行：

```
String applyIt = returnedConversion(toConvert); 
```

在这里，您应该将字符串传递给`returnedConversion`方法，但您尚未将`toConvert`变量声明和初始化为字符串。

第 50 行：

```
convertedTemp.returnedConversion(); 
```

`convertedTemp`是 JTextField 类型。所以你不能`returnedConversion()`在这里访问未定义的方法。如果您尝试在`convertedTemp`JTextField 中显示文本，您应该使用`convertedTemp.setText(applyIt)`.

# python - pylucene安装makefile错误

> ID：12225392
> 
> 赞同：4
> 
> 时间：2012-09-01T06:15:14.457
> 
> 标签：python, makefile, pylucene

当我构建pylucene环境时，我遇到了这个问题。我不知道如何在 Windows 平台上配置它的 makefile。有人帮助我，如果有任何关于在 Windows 上构建 pylucene 的例子。

表明`cmd`：

```
can not find tools.jar
makefile213:recipe for target 'ivy' failed.
make:***【ivy】error 1 
```

这是生成文件：

```
VERSION=3.6.1-2
LUCENE_SVN_VER=HEAD
LUCENE_VER=3.6.1
LUCENE_SVN=http://svn.apache.org/repos/asf/lucene/dev/tags/lucene_solr_3_6_1
PYLUCENE:=$(shell cd)
LUCENE_SRC=lucene-java-$(LUCENE_VER)
LUCENE=$(LUCENE_SRC)/lucene

# Windows   (Win32, Python 2.7, Java 1.6, ant 1.8.1, Java not on PATH)
SHELL=cmd.exe
PYLUCENE:=$(shell cd)
ANT=D:\ant183\bin\ant
JAVA_HOME=C:\\Program Files\\Java\\jdk1.7.0_01
PREFIX_PYTHON=D:\\Python27
PYTHON=$(PREFIX_PYTHON)\python.exe
JCC=$(PYTHON) -m jcc.__main__
NUM_FILES=3

$(LUCENE_JAR): $(LUCENE)
    cd $(LUCENE) && $(ANT) -Dversion=$(LUCENE_VER)
OS=$(shell uname)
BUILD_TEST:=$(PYLUCENE)\build\test 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-11T13:01:43.317

在 opensuse 13.2 上安装时我遇到了类似的错误，解决方法是在尝试构建 pylucene 之前独立安装 ivy。

# android - 在图库中使用惰性列表

> ID：12225395
> 
> 赞同：0
> 
> 时间：2012-09-01T06:15:50.747
> 
> 标签：android, android-gallery

我试图通过从 sqlite 数据库中提取图片名称来显示一些图片，然后使用该图片名称在可绘制文件夹中找到该特定图片并将其显示在我的应用程序的图库小部件中。它可以工作，但现在问题是我有太多图片，所以将所有内容存储在可绘制文件夹中没有意义，因为它会使应用程序太大。我正在考虑将图片放在网上，并将单个 url 存储到 sqlite 数据库中。通过这种方式，我可以从数据库中获取 url 并使用该 url，我可以下载图像并将其显示在图库小部件中。我读到了 Lazy List （对伟大的工作表示敬意！），但我在我的应用程序中实现时遇到问题。下面是我用于画廊的当前代码，我 我不太清楚如何修改它以利用惰性列表从在线下载图像。任何帮助是极大的赞赏！=)

```
protected String pic1, pic2, pic3;
protected int Id, resID1, resID2, resID3;

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.result_details);
    Id = getIntent().getIntExtra("ID", 0);
    SQLiteDatabase db = (new DatabaseHelper(this)).getWritableDatabase();
    Cursor cursor = db.rawQuery("SELECT pic1, pic2, pic3 FROM database WHERE _id = ?", 
            new String[]{""+Id});
    pic1 = cursor.getString(cursor.getColumnIndex("pic1"));
    pic2 = cursor.getString(cursor.getColumnIndex("pic2"));
    pic3 = cursor.getString(cursor.getColumnIndex("pic3"));

    resID1 = getResources().getIdentifier(pic1 , "drawable", getPackageName());
resID2 = getResources().getIdentifier(pic2 , "drawable", getPackageName());
    resID3 = getResources().getIdentifier(pic3 , "drawable", getPackageName());

    Gallery g = (Gallery) findViewById(R.id.photobar);
    g.setAdapter(new ImageAdapter(this));
}
public class ImageAdapter extends BaseAdapter {
       int mGalleryItemBackground;
       private Context mContext;

       private Integer[] mImageIds = {
               resID1,
               resID2,
               resID3
       };

       public ImageAdapter(Context c) {
           mContext = c;
           TypedArray a = obtainStyledAttributes(R.styleable.Theme);
           mGalleryItemBackground = a.getResourceId(
             R.styleable.Theme_android_galleryItemBackground,
                       0);
           a.recycle();
       }

       public int getCount() {
           return mImageIds.length;
       }

       public Object getItem(int position) {
           return position;
       }

       public long getItemId(int position) {
           return position;
       }

       public View getView(int position,
           View convertView, ViewGroup parent) {
           ImageView i = new ImageView(mContext);

           i.setImageResource(mImageIds[position]);
           i.setLayoutParams(new Gallery.LayoutParams(150, 100));
           i.setScaleType(ImageView.ScaleType.FIT_XY);

           return i;
       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:22:31.400

`ImageLoader()`从 Lazylist 编码中使用，并`ImageView and Imageurl`像这样传递给 ImageLoader

```
imageLoader.DisplayImage(ImageUrl, imageview); 
```

在适配器 getView() 方法中。

# z3 - 包含约束

> ID：12225396
> 
> 赞同：0
> 
> 时间：2012-09-01T06:15:52.033
> 
> 标签：z3

给定非负实数`tSS, tLS, tIS, tBS`。（即它们是实型，tSS>=0 且 tLS>=0 且 tIS>=0 且 tBS>=0 且 tSS>=0）

以下约束 C1 采用 CNF 格式，包含 12 个连词。

```
(tSS+tLS<=tIS)And(tIS<=tBS)And(tSS+tLS+tIS+tBS<=3) OR
(tSS+tLS<=tBS)And(tBS<=tIS)And(tSS+tLS+tIS+tBS<=3) OR
(tSS+tLS<=tBS)And(tSS<=tIS)And(tIS<=tSS+tLS)And(tSS+tLS+tIS+tBS<=3) OR
(tSS<=tIS)And(tIS<=tBS)And(tBS<=tSS+tLS)And(tSS+tLS+tIS+tBS<=3) OR
(tSS+tLS<=tIS)And(tSS<=tBS)And(tBS<=tSS+tLS)And(tSS+tLS+tIS+tBS<=3) OR
(tSS<=tBS)And(tBS<=tIS)And(tIS<=tSS+tLS)And(tSS+tLS+tIS+tBS<=3) OR
(tSS+tLS<=tBS)And(tIS<=tSS)And(tSS+tLS+tIS+tBS<=3) OR
(tSS<=tBS)And(tIS<=tBS)And(tBS<=tSS+tLS)And(tSS+tLS+tIS+tBS<=3) OR
(tIS<=tBS)And(tBS<=tSS)And(tSS+tLS+tIS+tBS<=3) OR
(tSS+tLS<=tIS)And(tBS<=tSS)And(tSS+tLS+tIS+tBS<=3) OR
(tSS<=tIS)And(tBS<=tSS)And(tIS<=tSS+tLS)And(tSS+tLS+tIS+tBS<=3) OR
(tIS<=tSS)And(tBS<=tIS)And(tSS+tLS+tIS+tBS<=3) 
```

我希望以以下形式获得约束 C2

```
tSS<=a and tLS<=b and tIS<=c and tBS <=d and tSS<=e 
```

约束 C2 只需包含在 C1 中，即任何满足 C2 的估值都必须满足 C1，反之则不然。ae 的值是从 0 到无穷大的值。无穷大意味着它可以取任何大于 0 的值。

是否可以使用Z3来推断ae的值？（可能无法满足）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:40:14.277

可能有更有效的技术可以做到这一点，但至少您可以使用量词解决问题。

让`C1(tSS, tLS, tIS, tBS)`表示 CNF 公式，并且`C2(SS, tLS, tIS, tBS, a, b, c, d)`是要满足的约束。您可以检查以下量化公式的可满足性：

`forall tSS tLS tIS tBS. C2(SS, tLS, tIS, tBS, a, b, c, d) => C1(tSS, tLS, tIS, tBS)`

哪里`a, b, c, d`是自由变量。

[我使用 Z3 SMT online](http://rise4fun.com/Z3/plXYW)对您的具体示例进行了编码。在这种情况下，查询是不可满足的。

# php - Wordpress function.php 致命错误

> ID：12225398
> 
> 赞同：0
> 
> 时间：2012-09-01T06:16:07.363
> 
> 标签：php, wordpress

我对我的 wordpress 主题的 function.php 文件进行了更改。当我尝试更新 funtion.php 文件时，它给出了一个错误：

> 致命错误：在第 45 行的 /hermes/waloraweb088/b1248/moo.armaan815/Voga/fp/wp-content/themes/enterweb/functions.php 中调用未定义的函数 add_action()。

我不知道如何解决它。我非常感谢反馈/帮助。谢谢。

这是function.php文件的代码。行号“45”指的是侧边栏功能之后的第一个调用。

```
<?php

if ( function_exists('register_sidebar') ) {
register_sidebar(array(
    'name' => 'Sidebar Widget Area',
    'id' => 'sidebar-widget-area',
    'before_widget' => '<div id="%1$s" class="box widget %2$s">',
    'before_title' => '<div class="wtitle"><h2>',
    'after_title' => '</h2></div><!--/wtitle --><div class="content">',
    'after_widget' => '</div><!--/content --></div><!--/box -->',       
));
register_sidebar(array(
    'name' => 'Single Sidebar Widget',
    'id' => 'single-widget-area',
    'before_widget' => '<div id="%1$s" class="cols %2$s">',
    'before_title' => '<h2>',
    'after_title' => '</h2>',
    'after_widget' => '</div><!--/box -->',       
));   
register_sidebar(array(
    'name' => 'Post Sidebar Widget',
    'id' => 'post-widget-area',
    'before_widget' => '<div class="boxx"><div id="%1$s" class="box         
widget_posts %2$s">',
    'before_title' => '<div class="wtitle"><h2>',
    'after_title' => '</h2></div><!--/wtitle --><div class="content">',
    'after_widget' => '</div><!--/content --></div></div><!--/box -->',
));
register_sidebar(array(
    'name' => 'Widget Ad Manager Small',
    'id' => 'widget-ad-minister-small',
    'before_widget' => '<div id="%1$s" class="box ads %2$s">',
    'before_title' => '<div class="wtitle"><h2>',
    'after_title' => '</h2></div><!--/wtitle --><div class="content">',
    'after_widget' => '</div><!--/content --></div><!--/box -->',
));
register_sidebar(array(
    'name' => 'Widget Ad Manager Big',
    'id' => 'widget-ad-minister-big',
    'before_widget' => '<div id="%1$s" class="box ads %2$s">',
    'before_title' => '<div class="wtitle"><h2>',
    'after_title' => '</h2></div><!--/wtitle --><div class="content">',
    'after_widget' => '</div><!--/content --></div><!--/box -->',
));
}

 add_action('admin_menu', 'taccess_theme_page');

function taccess_theme_page ()
{
  if ( count($_POST) > 0 && isset($_POST['taccess_settings']) )
{
    $options = array ( 'feedburner_id', 'advertise_page', 'flickr_group_id' );

    foreach ( $options as $opt )
    {
        delete_option ( 'taccess_'.$opt, $_POST[$opt] );
        add_option ( 'taccess_'.$opt, $_POST[$opt] );
    }
    wp_redirect("themes.php?page=functions.php&saved=true");
    die;
}
add_theme_page(__('wpTheme Settings'), __('wpTheme Settings'), 'edit_themes', basename(__FILE__), 'taccess_settings');
}

function taccess_settings ()
{

if ( isset( $_REQUEST['saved'] ) ) echo '<div id="message" class="updated fade"><p>        
<strong>'.__('Options saved.').'</strong></p></div>';

echo <<<TT
<div class="wrap">
<h2>wp Theme Settings</h2>

<form method="post" action="">
<table class="form-table">
    <tr valign="top">
        <th scope="row"><label for="feedburner_id">FeedBurner ID</label>     
</th>
        <td><input name="feedburner_id" type="text" id="feedburner_id"     
value="<?php echo htmlspecialchars(stripslashes(get_option('taccess_feedburner_id')));    
?>" class="regular-text" /></td>
    </tr>
    <tr valign="top">
        <th scope="row"><label for="advertise_page">Advertise Page</label>   
</th>
        <td>
            <?php      
wp_dropdown_pages("name=advertise_page&show_option_none=".__('- Select -')."&selected="  

.get_option('taccess_advertise_page')); ?>
        </td>
    </tr>
    <tr valign="top">
        <th scope="row"><label for="flickr_group_id">Flickr Group   
 ID</label></th>
        <td>
            <input name="flickr_group_id" type="text"    
id="flickr_group_id" value="<?php echo     
htmlspecialchars(stripslashes(get_option('taccess_flickr_group_id'))); ?>"     
class="regular-text" />
        </td>
    </tr>
</table>
<p class="submit">
    <input type="submit" name="Submit" class="button-primary" value="Save   

Changes" />
    <input type="hidden" name="taccess_settings" value="save"       

style="display:none;" />
</p>
</form>

</div>
TT;

}

?>
<?php
/**
 * add a default-gravatar to options
 */
if ( !function_exists('fb_addgravatar') ) {
function fb_addgravatar( $avatar_defaults ) {
     $myavatar = get_bloginfo('template_directory') . '/images/avatar.gif';
    $avatar_defaults[$myavatar] = 'people';

    $myavatar2 = get_bloginfo('template_directory') . '/images/myavatar.png';
    $avatar_defaults[$myavatar2] = 'wpengineer.com';

    return $avatar_defaults;
}

add_filter( 'avatar_defaults', 'fb_addgravatar' );
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:30:16.880

我已将此 functions.php 代码复制到测试环境中并且不能产生相同的错误（唯一的问题是在开始时缺少打开的 php 标记。

作为一个单独的说明，我会使用“widgets_init”钩子将您的侧边栏注册添加到他们自己的函数中。就像是

```
add_action('widgets_init','register_my_sidebars'); 
```

您不需要测试[register_sidebar](http://codex.wordpress.org/Function_Reference/register_sidebar)是否存在。[这是一篇](http://justintadlock.com/archives/2010/11/08/sidebars-in-wordpress)关于该主题的好文章。

# c - 合并排序不断循环并进入分段错误

> ID：12225404
> 
> 赞同：1
> 
> 时间：2012-09-01T06:17:37.983
> 
> 标签：c, sorting, pointers, merge, segmentation-fault

我正在尝试使用数组实现合并排序。我的代码正在跳入循环而不是停止。我需要使用 Ctrll+Z 来停止我的程序。基本上我正在从文件中读取并将该数组传递给合并排序函数，然后我再次写入文件。写入文件后，我计算编程时间并显示它。请检查我下面的代码。谢谢。

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<time.h>

clock_t start=clock();
void mergesort(int *,int,int);
void merge(int *,int,int,int);
void writesortedrraytofile(int *,int);

static char *opfile=(char *)"output.txt";

int main(int argc,char* argv[])
{
        FILE *fp;
        char line[80];
        int array[1000000];
        int i=0,counter;
        int choice;

        printf("The command line arguments are:\n");
        printf("%d %s %s %s\n",argc,argv[0],argv[1],argv[2]);

        if(argc==3 && strcmp(argv[0],"./sorting")==0 && strcmp(argv[1],"input1.txt")==0 && strcmp(argv[2],"output.txt")==0)
        {
                printf("The command line arguments are correct.\n");
        }
        else
        {
                printf("The command line arguments are wrong.I am exiting.\n");
                exit (0);
        }
fp=fopen(argv[1],"r");
while(fgets(line,80,fp) !=NULL)
{
        sscanf(line,"%d",&array[i]);
        i++;
}
counter=i;
fclose(fp);
    mergesort(array,0,counter);
        }
        return 0;
}

void mergesort(int *temp,int begin,int end)
{
        int mid=0;
        if(begin<end)
        {
                mid=(begin+end)/2;
                mergesort(temp,begin,mid);
                mergesort(temp,mid+1,end);
        }
                merge(temp,begin,mid,end);
}

void merge(int *temp,int low,int mid,int high)
{
        int i,k;
        int *tmp = (int *) malloc((high - low +1)* sizeof(int));
        int begin1 = low;
        int end1 = mid;
        int begin2= mid +1;
        int end2 = high;

        for ( k = 0; begin1 <= end1 && begin2 <= end2; k++)
                if (temp[begin1] < temp[begin2])
                        tmp[k] = temp[begin1 ++];
                else
                        tmp[k] = temp[begin2 ++];
        while (begin1 <= end1)
                tmp[k++] = temp[begin1 ++];
        while (begin2 <= end2)
                tmp[k++] = temp[begin2 ++];
        for ( i =0;i < high -low +1; i ++)
                temp[low +i] = tmp[i];
        free(tmp);
        writesortedrraytofile(tmp,high-low+1);
        return;
}

void writesortedrraytofile(int *ssarray,int len)
{
        FILE *fp;
        fp=fopen(opfile,"w");
        for(int i=0;i<len;i++)
        fprintf(fp,"%d\n",ssarray[i]);
        fclose(fp);
        printf("The output file is generated.Please check it inside the directory.\n");
        printf("Time elapsed: %f\n", ((double)clock() - start) / CLOCKS_PER_SEC);
        return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:02:37.743

我没有自己尝试代码，但是使用这么大的数组作为局部变量听起来不是一个好主意。读入文件时，您也不做任何边界检查。这可能会破坏您的堆栈并导致不可预测的结果。

更好的解决方案可能是：

```
#define MAX_COUNT 1000000
int* array = (int*)malloc(MAX_COUNT * sizeof(int)); 
```

和

```
while((fgets(line,80,fp) !=NULL) && (i < MAX_COUNT)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T07:14:19.207

在合并排序中，您编写了`int mid=0`. 而是这样做：

```
int mid=(begin+end)/2; 
```

这修复了分段错误。现在从 main() 方法的末尾而不是从 merge() 调用 writesortedarraytofile。这会将递归输出修复到 output.txt 中。

```
int main(int argc,char* argv[])
{
   ...
   ...
   ...
  counter=i;
  fclose(fp)
  mergesort(array,0,counter);
  writesortedrraytofile(array,counter); // call writesortedrraytofile from here
} 
```

在此之后，您将在 output.txt 中获得排序后的数字。还有一个问题。对于输入：(3, 4, 1, 5, 6, 7, 3, 9, 10) 输出即将到来：(0, 1, 3, 3, 4, 5, 6, 7, 9)。不知道为什么最后一个数字被 0 取代。这个问题肯定是因为 merge() 中的错误。

**编辑 -**发现 0 进入输出的问题。下一个解决方法是传递`counter-1`而不是`counter`mergesort()。在这个程序工作得很好之后。

```
int main(int argc,char* argv[])
{
   ...
   ...
   ...
  counter=i;
  fclose(fp)
  mergesort(array,0,counter-1); // pass counter-1 instead of counter
  writesortedrraytofile(array,counter); // call writesortedrraytofile from here
} 
```

# wsdl - 接入点的 JUDDI 查询（查找）

> ID：12225405
> 
> 赞同：0
> 
> 时间：2012-09-01T06:17:44.663
> 
> 标签：wsdl, find, access-point, juddi

我需要查找或查询以从已发布的服务中使用 JUDDI 获取接入点。我按照[Apache jUDDI 中讲述的过程：查找模板](https://stackoverflow.com/questions/5991920/apache-juddi-finding-templates)。但它没有成功，我从 Tomcat 服务器收到以下错误：

```
Sep 01, 2012 11:29:58 AM org.apache.cxf.phase.PhaseInterceptorChain doDefaultLogging
INFO: Application {urn:uddi-org:v3_service}UDDIInquiryService#{urn:uddi-org:v3_service}find_service has thrown exception, unwinding now: org.apache.juddi.v3.error.FatalErrorException: At least one name, categoryBag, find_tModel or tModelBag or name must be supplied 
```

同样的错误在 Netbeans IDE 中也显示为：

```
javax.xml.ws.soap.SOAPFaultException: At least one name, categoryBag, find_tModel or tModelBag or name must be supplied 
```

我的代码片段如下：

```
 FindService fs = new FindService();
        fs.setAuthInfo(rootAuthToken.getAuthInfo());
        fs.setBusinessKey("uddi:juddi.apache.org:e7180bfb-3c36-451e-86aa-f7605a96587c");
        ServiceList sl = inquiry.findService(fs);
        ServiceInfos si = sl.getServiceInfos();
        GetServiceDetail gsd = new GetServiceDetail();
        ServiceDetail sd = inquiry.getServiceDetail(gsd);
        BusinessService bs = (BusinessService) sd.getBusinessService();
        BindingTemplates bts = bs.getBindingTemplates();
        BindingTemplate bt = (BindingTemplate) bts.getBindingTemplate();
        AccessPoint ap = bt.getAccessPoint();
        wsdlTA.setText(ap.getValue()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:28:25.973

没关系，我通过 Apache JUDDI 的项目邮件列表解决了这个问题。感谢秦玉珠的帮助。代码可以如下：

```
ServiceList list1=inquiryService.findService(findservice);
GetServiceDetail gsd=new GetServiceDetail();
for(ServiceInfo serviceInfo :list1.getServiceInfos().getServiceInfo()){
    gsd.getServiceKey().add(serviceInfo.getServiceKey());
    System.out.println(serviceInfo.getServiceKey());
    String servicekey=serviceInfo.getServiceKey();

    GetServiceDetail getServiceDetail=new GetServiceDetail();
    getServiceDetail.setAuthInfo(authinfo);
    getServiceDetail.getServiceKey().add(servicekey);
    ServiceDetail serviceDetail=inquiryService.getServiceDetail(getServiceDetail);
    BusinessService businessservice=serviceDetail.getBusinessService().get(0);
    System.out.println("fetched service name:"+businessservice.getName().get(0).getValue());
    String bindingkey = businessservice.getBindingTemplates().getBindingTemplate().get(0).getBindingKey();
    System.out.println(bindingkey);

    GetBindingDetail gbd = new GetBindingDetail();
    gbd.setAuthInfo(authinfo);
    gbd.getBindingKey().add(bindingkey);
    BindingDetail bindingdetail=inquiryService.getBindingDetail(gbd);
    BindingTemplate bindingtemplate=bindingdetail.getBindingTemplate().get(0);
    String accesspoint=bindingtemplate.getAccessPoint().getValue();
    System.out.println(accesspoint);
} 
```

# javascript - jQuery.tmpl 未呈现动态 html

> ID：12225408
> 
> 赞同：0
> 
> 时间：2012-09-01T06:18:39.593
> 
> 标签：javascript, jquery, jquery-templates

我正在使用 jQuery 模板来呈现一些动态数据。我正在尝试做的简化版本如下所示：

```
var data = [{html:<i>html</i>}, {html:<b>html2</b>}];
var tmpl =  $.tmpl(<div>${html}</div>, data);
$("#someContainer").html(tmpl); 
```

我想将 HTML 呈现为 HTML（粗体的 HTML），但不知何故它呈现为纯文本（`<.b>html<./b>`）。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:23:54.973

尝试使用`{{html}}`标记：

```
var tmpl =  $.tmpl('<div>{{html html}}</div>', data); 
```

在此处查看文档：[html 标记](http://api.jquery.com/template-tag-html/)

_note：它是 html html 两次，因为你的 var 被命名为

# regex - Powershell：用变量替换正则表达式命名组

> ID：12225415
> 
> 赞同：7
> 
> 时间：2012-09-01T06:19:53.390
> 
> 标签：regex, powershell, regex-group, named

假设我有一个如下所示的正则表达式，但我将它从文件加载到变量 $regex 中，因此在设计时不知道它的内容是什么，但在运行时我可以发现它包含“version1”， “version2”、“version3”和“version4”命名组：

```
"Version (?<version1>\d),(?<version2>\d),(?<version3>\d),(?<version4>\d)" 
```

...我有这些变量：

```
$version1 = "3"
$version2 = "2"
$version3 = "1"
$version4 = "0" 
```

...我在文件中遇到以下字符串：

```
Version 7,7,0,0 
```

...存储在变量 $input 中，因此 ($input -match $regex) 的计算结果为 $true。

如果我不知道它们在 $regex 中出现的顺序（我只知道 $正则表达式包括这些命名组）？

我找不到任何描述通过使用组名作为匹配索引将命名组替换为变量值的语法的参考 - 这甚至受支持吗？

**编辑：** 澄清 - 目标是替换任何类型的文本文件中的模板化版本字符串，其中给定文件中的版本字符串需要替换可变数量的版本字段（可能是 2、3 或所有 4 个字段）。例如，文件中的文本可能看起来像以下任何一种（但不限于这些）：

```
#define SOME_MACRO(4, 1, 0, 0)

Version "1.2.3.4"

SomeStruct vs = { 99,99,99,99 } 
```

用户可以指定一个文件集和一个正则表达式来匹配包含字段的行，最初的想法是各个字段将被命名组捕获。该实用程序具有应在文件中替换的各个版本字段值，但必须保留将包含替换的行的原始格式，并且仅替换请求的字段。

**EDIT-2：** 我认为我可以通过基于每个匹配项的位置和范围的子字符串计算得到我需要的结果，但希望 Powershell 的替换操作能够为我节省一些工作。

**EDIT-3：** 因此，正如 Ansgar 在下面正确而简洁地描述的那样，没有办法（仅使用原始输入字符串、您只知道命名组的正则表达式以及结果匹配项）使用“- replace" 操作（或其他正则表达式操作）来执行命名组的捕获的替换，同时保持原始字符串的其余部分不变。对于这个问题，如果有人好奇，我最终使用了下面的解决方案。YMMV，其他可能的解决方案。非常感谢 Ansgar 提供的反馈和选项。

在以下代码块中：

*   $input 是要执行替换的文本行
*   $regex 是从已验证包含至少一个受支持的命名组的文件中读取的正则表达式（[string] 类型）
*   $regexToGroupName 是一个哈希表，它将一个正则表达式字符串映射到一个组名数组，该数组按照 [regex]::GetGroupNames() 返回的数组的顺序排列，与它们出现的从左到右的顺序相匹配表达方式
*   $groupNameToVersionNumber 是一个将组名映射到版本号的哈希表。

$regex 中命名组的约束只是（我认为）命名组中的表达式不能嵌套，并且应该在输入字符串中最多匹配一次。

```
# This will give us the index and extent of each substring
# that we will be replacing (the parts that we will not keep)
$matchResults = ([regex]$regex).match($input)

# This will hold substrings from $input that were not captured
# by any of the supported named groups, as well as the replacement
# version strings, properly ordered, but will omit substrings captured
# by the named groups
$lineParts = @()
$startingIndex = 0
foreach ($groupName in $regexToGroupName.$regex)
{
    # Excise the substring leading up to the match for this group...
    $lineParts = $lineParts + $input.Substring($startingIndex, $matchResults.groups[$groupName].Index - $startingIndex)

    # Instead of the matched substring, we'll use the substitution
    $lineParts = $lineParts + $groupNameToVersionNumber.$groupName

    # Set the starting index of the next substring that we will keep...
    $startingIndex = $matchResults.groups[$groupName].Index + $matchResults.groups[$groupName].Length
}

# Keep the end of the original string (if there's anything left)
$lineParts = $lineParts + $input.Substring($startingIndex, $input.Length - $startingIndex)

$newLine = ""
foreach ($part in $lineParts)
{
   $newLine = $newLine + $part
}
$input= $newLine 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-04-06T16:25:54.320

**简单的解决方案**

在您只想替换`$input`文本中某处的版本号的情况下，您可以简单地执行以下操作：

```
$input -replace '(Version\s+)\d+,\d+,\d+,\d+',"`$1$Version1,$Version2,$Version3,$Version4" 
```

**在 PowerShell 中使用命名捕获**

关于您关于命名捕获的问题，可以通过使用大括号来完成。IE

```
'dogcatcher' -replace '(?<pet>dog|cat)','I have a pet ${pet}.  ' 
```

给出：

```
I have a pet dog.  I have a pet cat.  cher 
```

**多个捕获和解决方案的问题**

您不能在同一个替换语句中替换多个值，因为替换字符串用于所有内容。即如果你这样做：

```
 'dogcatcher' -replace '(?<pet>dog|cat)|(?<singer>cher)','I have a pet ${pet}.  I like ${singer}''s songs.  ' 
```

你会得到：

```
I have a pet dog.  I like 's songs.  I have a pet cat.  I like 's songs.  I have a pet .  I like cher's songs. 
```

...这可能不是您所希望的。

相反，您必须对每个项目进行匹配：

```
'dogcatcher' -replace '(?<pet>dog|cat)','I have a pet ${pet}.  ' -replace '(?<singer>cher)', 'I like ${singer}''s songs.  ' 
```

...要得到：

```
I have a pet dog.  I have a pet cat.  I like cher's songs. 
```

**更复杂的解决方案**

将其带回到您的场景中，您实际上并没有使用捕获的值；相反，您希望用新值替换它们所在的空间。为此，您只需要这个：

```
$input = 'I''m running Programmer''s Notepad version 2.4.2.1440, and am a big fan.  I also have Chrome v    56.0.2924.87 (64-bit).' 

$version1 = 1
$version2 = 3
$version3 = 5
$version4 = 7

$v1Pattern = '(?<=\bv(?:ersion)?\s+)\d+(?=\.\d+\.\d+\.\d+)'
$v2Pattern = '(?<=\bv(?:ersion)?\s+\d+\.)\d+(?=\.\d+\.\d+)'
$v3Pattern = '(?<=\bv(?:ersion)?\s+\d+\.\d+\.)\d+(?=\.\d+)'
$v4Pattern = '(?<=\bv(?:ersion)?\s+\d+\.\d+\.\d+\.)\d+'

$input -replace $v1Pattern, $version1 -replace $v2Pattern, $version2 -replace $v3Pattern,$version3 -replace $v4Pattern,$version4 
```

这会给：

```
I'm running Programmer's Notepad version 1.3.5.7, and am a big fan.  I also have Chrome v    1.3.5.7 (64-bit). 
```

注意：以上内容可以写成 1 行，但我已将其分解以使其更易于阅读。

这利用了正则表达式环视；一种在您捕获的字符串之前和之后检查内容的方法，而不包括匹配中的内容。也就是说，当我们选择要替换的内容时，我们可以说“匹配单词版本之后出现的数字”而不说“替换单词版本”。

有关此处的更多信息：[http ://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

**你的例子**

调整上述内容以适用于您的示例（即版本可以用逗号或点分隔，并且除了 4 组数字之外，它们的格式没有一致性：

```
$input = @'
#define SOME_MACRO(4, 1, 0, 0)

Version "1.2.3.4"

SomeStruct vs = { 99,99,99,99 }
'@

$version1 = 1
$version2 = 3
$version3 = 5
$version4 = 7

$v1Pattern = '(?<=\b)\d+(?=\s*[\.,]\s*\d+\s*[\.,]\s*\d+\s*[\.,]\s*\d+\b)'
$v2Pattern = '(?<=\b\d+\s*[\.,]\s*)\d+(?=\s*[\.,]\s*\d+\s*[\.,]\s*\d+\b)'
$v3Pattern = '(?<=\b\d+\s*[\.,]\s*\d+\s*[\.,]\s*)\d+(?=\s*[\.,]\s*\d+\b)'
$v4Pattern = '(?<=\b\d+\s*[\.,]\s*\d+\s*[\.,]\s*\d+\s*[\.,]\s*)\d+\b'

$input -replace $v1Pattern, $version1 -replace $v2Pattern, $version2 -replace $v3Pattern,$version3 -replace $v4Pattern,$version4 
```

给出：

```
#define SOME_MACRO(1, 3, 5, 7)

Version "1.3.5.7"

SomeStruct vs = { 1,3,5,7 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T10:50:06.800

正则表达式不能那样工作，所以你不能。不是直接的，就是这样。您可以做的（不使用更合适的正则表达式来对要*保留*的部分进行分组）是提取版本字符串，然后在第二步中将该子字符串替换为新版本字符串：

```
$oldver = $input -replace $regexp, '$1,$2,$3,$4'
$newver = $input -replace $oldver, "$Version1,$Version2,$Version3,$Version4" 
```

**编辑：**

如果你甚至不知道结构，你也必须从正则表达式中提取它。

```
$version = @($version1, $version2, $version3, $version4)
$input -match $regexp
$oldver = $regexp
$newver = $regexp
for ($i = 1; $i -le 4; $i++) {
  $oldver = $oldver -replace "\(\?<version$i>\\d\)", $matches["version$i"]
  $newver = $newver -replace "\(\?<version$i>\\d\)", $version[$i-1]
}
$input -replace $oldver, $newver 
```

# ruby - Rails 应用程序中的 RSS 给出错误：属性 标签中缺少

> ID：12225418
> 
> 赞同：1
> 
> 时间：2012-09-01T06:20:40.030
> 
> 标签：ruby, ruby-on-rails-3, rss

我正在尝试让华盛顿邮报政治 RSS 提要显示在我的 Rails 应用程序中。

```
wp_url = 'http://feeds.washingtonpost.com/rss/politics'
open(wp_url) do |rss|
  @wp_feed = RSS::Parser.parse(rss)
end 
```

使用该代码，我收到错误消息：

```
attribute <url> is missing in tag <source> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T18:57:42.393

当外部馈送无效时会发生此错误。
在这种情况下，RSS 不包含元素的必需`url`属性。`<source>`

根据[元素的](http://cyber.law.harvard.edu/rss/rss.html#ltsourcegtSubelementOfLtitemgt "哈佛法学院的 RSS 2.0 规范")[RSS 2.0 规范`<source>`](http://cyber.law.harvard.edu/rss/rss.html#ltsourcegtSubelementOfLtitemgt "哈佛法学院的 RSS 2.0 规范")，

> `<source>`是 的可选子元素`<item>`。
> 
> 它的值是项目来自的 RSS 频道的名称，从它的 . 它有一个必需的属性 ，`url`它链接到源的 XML 化。
> 
> `<source url="http://www.tomalak.org/links2.xml">Tomalak's Realm</source>`
> 
> 此元素的目的是传播链接的信誉，宣传新闻项目的来源。它可以在聚合器的 Post 命令中使用。它应该在将项目从聚合器转发到博客创作工具时自动生成。

[Ruby 1.9.3 文档中提到](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/rss/rdoc/RSS/Parser.html "更多关于 RSS 课程")的RSS 类`parse`使用以下默认参数解释了它的方法：

```
parse(rss, do_validate=true, ignore_unknown_element=true, parser_class=default_parser) 
```

因此，如果您想忽略此类验证错误，`false`请作为第二个参数传递，您将使用以下内容读取外部 RSS 提要：

```
require 'rss'
wp_url = open('http://feeds.washingtonpost.com/rss/politics').read
@wp_rss = RSS::Parser.parse(wp_url, false) 
```

# clipboard - X11：跟踪写入或读取剪贴板的进程

> ID：12225422
> 
> 赞同：1
> 
> 时间：2012-09-01T06:21:31.133
> 
> 标签：clipboard, x11, pid

有没有办法跟踪正在写入或读取 X11 剪贴板的进程（获取 PID）？

# c++ - AT&T 内联 C++ hello world 错误

> ID：12225424
> 
> 赞同：-2
> 
> 时间：2012-09-01T06:22:23.313
> 
> 标签：c++, assembly, x86, g++, inline-assembly

我正在尝试在 C++（Dev-CPP）中使用 Assembly，它不会按应有的方式输出字符串。经过一些研究，我发现它使用 AT&T 语法。我的代码不会输出它只是带有汇编消息的字符串。这是我的代码：

```
#include <iostream>

using namespace std;

int main()
{
    asm(".section .data");
    asm("hello: .string\"Hello, World!$\"\n");
    asm(".section .text");
    asm("movl $0x09, %ah \n");
    asm("mov hello, %dx\n");
    asm("int 0x21");

    system("PAUSE"); 
    return 0; 
} 
```

我能得到一些帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T02:13:41.747

理论上，只有使用 DJGPP（DOS 的 gcc 端口）编译的程序才能通过 DOS 扩展程序合法地使用 DOS 服务功能，除非您在 DOS 或 Windows（XP 及以下，通常不是 Vista/7/8）中运行它们。此外，gcc 不会生成 16 位 x86 代码，这似乎是您所期望的。

此外，您真的应该学习一些内联汇编（google it up）。

如果您的代码如下所示，则为可编译版本：

```
#include <iostream>
#include <cstdlib>

using namespace std;

int main()
{
    asm(".section .data");
    asm("hello: .string\"Hello, World!$\"\n");
    asm(".section .text");
    asm("movb $0x09, %ah\n"); // movl->movb
    asm("movl $hello, %edx\n"); // mov->movl,hello->$hello,dx->edx
    asm("int $0x21"); // 0x21->$0x21

    system("PAUSE"); 
    return 0; 
} 
```

但它仍然不太可能是好的内联汇编，因为：

*   您的代码破坏了寄存器并且没有告诉编译器哪些被破坏了，因此它可能会破坏程序的状态，从而导致崩溃或挂起。
*   您在单独的 asm 语句中编写指令，编译器可以在这些语句之间插入任何类型的代码并破坏您的内联汇编。你真的想把你的相关指令放在一个块中以防止这种情况发生。

像这样的东西会更好：

```
asm volatile (
  ".section .data\n"
  "hello: .string \"Hello, World!$\"\n"
  ".section .text\n"
  "movb $0x09, %ah\n"
  "movl $hello, %edx\n"
  "int $0x21\n"
); 
```

不幸的是，即使使用 DJGPP，这仍然无法正常工作。该问题与 DJGPP 和 DPMI 主机 (CWSDPMI) 完成的内存分段设置有关，可能是虚拟内存。我不知道那里到底出了什么问题，但是上面的代码不能按原样工作。

因此，请弄清楚您正在为哪个操作系统编译程序并为该操作系统编写适当的内联汇编代码，即使用正确的寄存器和系统调用机制。

DOS int 21h 函数在本机 Windows 和 Linux 应用程序中不起作用。时期。你有错误的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:11:49.100

为了扩展 Alexey 的答案（如何克服分段问题），这将编译（并可能在 DOS 上运行）：

```
asm volatile(
    "call 0f\n"
    ".byte 'H','e','l','l','o','W','o','r','l','d','!',0\n"
    "0: pop %0\n"
    "push %ds\n"
    "push %cs\n"
    "pop %ds\n"
    "int $0x21\n"
    "pop %ds\n" : "d"(0), "a"(9) : : "memory", "cc"); 
```

这个想法是在代码中内联字符串但跳过它；该调用的返回地址是字符串的起始地址。然后临时使数据段与代码段相同，然后调用DOS INT并恢复正确的数据段。

# php - 仅显示没有内置函数 PHP 的数组中的重复值

> ID：12225425
> 
> 赞同：-3
> 
> 时间：2012-09-01T06:22:24.480
> 
> 标签：php

例如：

```
$arr = array(3,5,2,5,3,9); 
```

我只想显示常见元素，即 3,5 作为输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:28:18.553

尝试以下操作：

```
$arr = array(3,5,2,5,3,9);
foreach($arr as $key => $val){
  //remove the item from the array in order 
  //to prevent printing duplicates twice
  unset($arr[$key]); 
  //now if another copy of this key still exists in the array 
  //print it since it's a dup
  if (in_array($val,$arr)){
    echo $val . " ";
  }
} 
```

**输出：**
3 5

**另外：**
我猜你被要求自己实现它的原因（不使用内置函数）是为了避免像这样的答案：

```
$unique = array_unique($arr); 
$dupes = array_diff_key( $arr, $unique ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T10:32:24.443

这是我的尝试：

```
<?php

  $arr = array(3,5,2,5,3,9);
  $temp_array = array();

  foreach($arr as $val)
  {
     if(isset($temp_array[$val]))
     {
       $temp_array[$val] = $val;
    }else{
     $temp_array[$val] = 0;
   }
 }

 foreach($temp_array as $val2)
 {
    if($val2 > 0)
    {
      echo $val2 . ', ';
    }
 } 
```

?>

- 输出 -

3、5、

# android - android中的垂直轮播而不使用renderscript

> ID：12225429
> 
> 赞同：0
> 
> 时间：2012-09-01T06:22:48.057
> 
> 标签：android

我有一些水平的例子，但使用渲染脚本，我想在 android 2.2 中运行它，因此不能使用渲染脚本。

所以，请帮助，如何进行垂直旋转或如何开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:51:56.383

最后我得到了它，需要大量的努力和耐心，但最后我的垂直旋转已经准备好并且没有任何渲染脚本。

我已经通过使用[coverflow](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)来完成它，它是水平的，但可以做成垂直的，它需要在排序中更改某些方法，从右到下和从左到上，但它需要极大的耐心。这是一个非常好的代码，可以很容易地理解如何使用它。

谢谢。请享用..

# android - 在 BroadcastReceiver 中，getResultCode() 始终为 SMS 发送和传递的操作返回 -1

> ID：12225431
> 
> 赞同：2
> 
> 时间：2012-09-01T06:23:05.280
> 
> 标签：android, sms, broadcastreceiver

跟随我猜的大多数人，我从[http://mobiforge.com/developing/story/sms-messaging-android](http://mobiforge.com/developing/story/sms-messaging-android)获取我的 SMS 处理代码。我正在尝试使用以下代码（对于已发送的消息）捕获已发送和已传递消息的广播：

```
 appContext.registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                Log.i("Debug",
                        "My embedded receiver: "
                                + String.valueOf(getResultCode()));
            }
        }, new IntentFilter("iam.applications.SmsReceiver.SMS_SENT")); 
```

这始终导致 getResultCode() 返回值 -1，即使成功发送 SMS 也是如此。我不知道另一种方式来判断我的短信是否已发送。

我还对 BroadcastReceiver 进行了子类化，以查看这是否有任何区别，但事实并非如此。-1 总是返回：

```
@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();

    Log.i("Debug",
            "Result code in onReceive: " + String.valueOf(getResultCode()));
} 
```

我创建的 PendingIntent 看起来像这样（用于处理部分长 SMS 消息的 for 循环的片段）：

```
 Intent sentIntent = new Intent(
                "iam.applications.SmsReceiver.SMS_SENT");
        sentIntent.putExtra(SmsHandler.PHONE_NUMBER, phoneNumber);
        sentIntent.putExtra(SmsHandler.MESSAGE, message);
        sentPIArray.add(PendingIntent.getBroadcast(appContext,
                (int) Calendar.getInstance().getTimeInMillis(), sentIntent,
                PendingIntent.FLAG_UPDATE_CURRENT)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T05:39:32.160

我是个大白痴：

```
// Field descriptor #14 I
public static final int RESULT_OK = -1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T07:00:41.283

为了获得发送和交付报告，我这样做了：

```
String SENT = "SMS_SENT";
String DELIVERED = "SMS_DELIVERED";

BroadcastReceiver sendingBroadcastReceiver;
BroadcastReceiver deliveryBroadcastReceiver;

PendingIntent sentPI;
PendingIntent deliveredPI;

public void sendSms(String phoneNumber, String message) {
    sentPI      = PendingIntent.getBroadcast(this, 0, new Intent(SENT),      PendingIntent.FLAG_CANCEL_CURRENT);
    deliveredPI = PendingIntent.getBroadcast(this, 0, new Intent(DELIVERED), PendingIntent.FLAG_CANCEL_CURRENT);

    sendingBroadcastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    break;
            }
            BaseActivity.this.unregisterReceiver(this);
        }
    };
}

this.registerReceiver(sendingBroadcastReceiver, new IntentFilter(SENT));

    deliveryBroadcastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            switch (getResultCode()) {
            case Activity.RESULT_OK:
                break;
            case Activity.RESULT_CANCELED:
                break;                        
            }
            BaseActivity.this.unregisterReceiver(this);
        }
    };

this.registerReceiver(deliveryBroadcastReceiver, new IntentFilter(DELIVERED));   

SmsManager.getDefault().sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);
//...
} 
```

# php - 通过 SSH 隧道调试 PHP Cloud 应用程序

> ID：12225432
> 
> 赞同：1
> 
> 时间：2012-09-01T06:23:15.557
> 
> 标签：php, eclipse, ssh, cloud, zend-debugger

我正在尝试通过 SSH 隧道在 Eclipse/Windows 中使用远程调试，如 PHP Cloud 上的这些文章中所述。

*   [http://www.phpcloud.com/help/putty-ssh-debug-tunnel](http://www.phpcloud.com/help/putty-ssh-debug-tunnel)
*   [http://www.phpcloud.com/help/debugging-overview](http://www.phpcloud.com/help/debugging-overview)

我已经能够使用 PuTTY 和由 Pagent 管理的公钥/私钥建立 SSH 连接。我现在在 Eclipse 的 Debug Configurations 菜单中测试调试器时遇到了问题。我已经设置了具有以下详细信息的服务器。

*   基本 URL： http: [//lhith.my.phpcloud.com](http://lhith.my.phpcloud.com)（指向我在 PHP Cloud 上的应用程序的链接）。

*   本地 Web 根目录：（`C:\Users\Luke\workspace\lhith`我本地副本中包含 index.php 的路径）

*   路径映射：（`/.apps/http/__default__/0/1.7-zdc`服务器上包含 index.php 的路径）-> `/lhith`（工作区中包含 index.php 的路径）

*   文件：`/lhith/index.php`
*   网址： http: [//lhith.my.phpcloud.com](http://lhith.my.phpcloud.com)

我还将 Zend Debugger 配置为使用端口 10137 和 127.0.0.1 的客户端主机/IP。当我连接我的 SSH 会话并尝试测试调试器时，我看到错误“调试服务器尝试连接到以下客户端主机/IP 时发生超时：-127.0.0.1”

这里可能出了什么问题？我能做些什么呢？

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T03:13:32.793

今晚我在这方面取得了一些进展。我在我的互联网路由器上设置端口转发，将端口 10137 转发到我的计算机，然后将我的互联网路由器公共 IP 地址添加到 my.phpcloud.com 上 Zend Server 调试设置上允许的主机列表中。

我还将这个 IP 添加到 Eclipse 中的调试器配置中，并且能够成功连接到远程系统。看来SSH远程隧道设置有问题，我会继续挖掘，但我想分享我的发现，因为这让我发疯！

# asp.net - 向 Telerik Report 添加超链接样式

> ID：12225434
> 
> 赞同：-2
> 
> 时间：2012-09-01T06:23:24.420
> 
> 标签：asp.net, css, xslt, telerik, telerik-reporting

问题：我需要将下面的内部样式添加到 Telerik 报告中。请注意 a0 和 a1 是类。
样式表如下： 如何将其转换为 Telerik 报告接受的 XML 样式表。
请参阅：[http](http://www.telerik.com/help/reporting/style-understanding-style-selectors.html)
://www.telerik.com/help/reporting/style-understanding-style-selectors.html 但该链接没有详细说明如何将超链接选择器添加到 XML 样式表中。

下面的CSS：

```
a.a0:hover {
        text-decoration: underline;
}
a.a1:link {
text-decoration: underline;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:16:40.823

```
Below is how I worked around the above issue:
ReportViewer.prototype.OnReportLoadedOld = ReportViewer.OnReportLoaded;
                ReportViewer.prototype.OnReportLoaded = function() {
                    this.OnReportLoadedOld();

var reportFrame = document.getElementById(this.reportFrameID);
                    var reportDocument = reportFrame.contentWindow.document;
                    var body = reportDocument.getElementsByTagName("body")[0];

 $(".a1", body).css("text-decoration", "underline");
 $(".a0", body).css("text-decoration", "underline");

You can achive the hover like this:

$(".a1", body).hover(function() {
        $(".a1", body).css("text-decoration", "underline");
      }, function () {
       $(".a1", body).css("text-decoration", "underline");
  }); 
```

# visual-c++ - 在 Windows 7 中编译 Libpng 或获取 Libpng12.dll（并了解如何在 VS 中链接 .DLL）

> ID：12225435
> 
> 赞同：4
> 
> 时间：2012-09-01T06:23:25.307
> 
> 标签：visual-c++, dll, compilation, libpng

我一直在 Windows 7 中使用 Libpng15，但我遇到了与

[编译代码时未解决的外部 _png_set_longjmp_fn](https://stackoverflow.com/questions/5190554/unresolved-external-png-set-longjmp-fn-in-libpng)错误。我按照上述链接中的说明进行操作，虽然它确实编译没有任何错误，但我最终收到一条消息，说我需要 libpng12.dll 才能继续。

所以，我为 libpng12.dll 做了一些谷歌搜索……除了看起来是骗局的通用“查找 x.dll”网站外，什么都没有出现。

我已经尝试在他们的网站上阅读 libpng 源代码的安装文档，我看到的只是关于如何通过基于 Unix 的系统进行操作的说明。我试图在 Cygwin 中做到这一点，但没有运气，所以我有点卡在如何编译这个库上。

总而言之，我愿意进行编译或只使用 .dll，但问题是我找不到适用于版本 12 的*工作*.dll。

我尝试的另一件事是从[这里](http://gnuwin32.sourceforge.net/packages/libpng.htm)下载二进制文件，它声称是“libpng12 for windows”。然后我将这些文件复制到我的 VC 编译器目录中，我认为该目录覆盖了 libpng15。尽管如此，当我静态链接它并在 VC 中运行我的程序时，它说我需要 .DLL 文件。libpng12.dll 文件实际上是一个**`.dll.a`**文件。老实说，我不确定链接这些（我尝试通过 VS 在链接器输入设置中键入“libpng12.dll.a”来静态链接它）。

如果我可以使用 libpng12 的 .dll 路由，我该怎么做？文件在哪里？如何在VS中链接它？

任何帮助将不胜感激，因为似乎真的没有*很多*关于这方面的信息。要么，要么我只是看起来不正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T20:40:18.240

查看 libpng 发行版的“项目”目录，并使用其中一个可视项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T17:14:06.777

这个 youtube 可能会帮助您“使用 VS2010 构建 libpng 库”

[https://www.youtube.com/watch?v=7XxVebzK3ac](https://www.youtube.com/watch?v=7XxVebzK3ac)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-24T01:46:15.490

如上所述，在 libpng 发行版的“projects”目录中查看

然后进行此处概述的调整 [https://stackoverflow.com/a/38547948/293792](https://stackoverflow.com/a/38547948/293792)

为了简单起见，我在此处记下（如那里所述）将两个 lib 值添加到

*   配置 -> 链接器 -> 输入 -> 附加依赖项

这些值是`ucrt.lib;vcruntime.lib`

确保构建类型是 /MD

允许我构建这些旧版本，并在 Windows 10 VS2015 上修复该错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T00:59:53.903

此链接似乎为您提供了 1.2 的安装程序：

[http://gnuwin32.sourceforge.net/packages/libpng.htm](http://gnuwin32.sourceforge.net/packages/libpng.htm)

它是 32 位的。不确定这是否对您有影响。

# iphone - 来回创建滑动手势

> ID：12225437
> 
> 赞同：0
> 
> 时间：2012-09-01T06:23:27.627
> 
> 标签：iphone, objective-c, xcode, xcode4.2

我正在使用 xcode 4.2。这是我的阶层

```
Navigation COntroller (No toolbars) -> ViewController1 -> ViewController2 -> ViewController3 ->ViewController4 
```

我已经添加`swipe gestures`了 1-3 个控制器并使用了向左滑动的推送。

现在这只是一个方向。我怎样才能做到双向。我想从 ViewController4 转到 ViewController1。我尝试添加另一个`SwipeGesture`分配权，但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:35:16.870

您可能会查看这篇文章[为 UISwipeGestureRecognizer 设置方向](https://stackoverflow.com/questions/3319209/setting-direction-for-uiswipegesturerecognizer) 除此之外，如果您收到通知，您可以看到您在哪个控制器中，如果您在控制器 1 中，并且它是左滑动将控制器 4 推入堆栈。但请注意我们正在谈论堆栈这一事实。因此，每次推送控制器时，堆栈都会增长。可能是让您的控制器在首次使用时启动，而不是保留参考。如果检测到滑动，您可以将相应的视图放置到位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T06:37:38.027

设置 UISwipeGestureRecognizer 的方向属性并使用具有不同方向的按位运算符应该可以工作。

存在这方面的问题。那里解释得很好。

[如何识别所有 4 个方向的滑动？](https://stackoverflow.com/questions/8181774/recognize-swipe-in-all-4-directions)

[为 UISwipeGestureRecognizer 设置方向](https://stackoverflow.com/questions/3319209/setting-direction-for-uiswipegesturerecognizer)

# iphone - 从 iTunes 安装应用程序

> ID：12225439
> 
> 赞同：0
> 
> 时间：2012-09-01T06:23:55.793
> 
> 标签：iphone, xcode, ipad

我是移动测试的新手。我有一个问题：我是否可以在 iTunes 上安装一个已编译的应用程序以下载并安装在 Xcode 模拟器上进行分析，即无需访问源代码，或者我必须要求程序员向我提供代码。

如果可以安装，请指出如何安装。

帮助肯定是感激的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:36:31.787

只需寻找“临时分发”。也看这里，提供超级测试设施[https://testflightapp.com/dashboard/](https://testflightapp.com/dashboard/)

这将解决您所有的 beta 测试问题。

编辑：关于从 iTunes 调试已安装应用程序的问题：

这是我在 Apple 文档中找到的内容： 问：如何在没有 Xcode 调试器的情况下调试已部署的应用程序？

答：一旦您通过 App Store 或作为 Ad Hoc 或 Enterprise 构建部署了您的应用程序，您将无法将 Xcode 的调试器附加到它。要调试问题，您需要分析设备的崩溃日志和控制台输出。

# django - 图像未显示在 Django 模板中，但找到了图像路径

> ID：12225440
> 
> 赞同：0
> 
> 时间：2012-09-01T06:24:04.280
> 
> 标签：django, django-templates

我为 Imagefield 使用了自定义动态路径。我的图像已完美上传到所需的文件夹中。但是图片没有显示在我的模板中。模板找到了带有//的图片路径，但无法显示图片。如何解决？

这是我的 settings.py

```
MEDIA_ROOT = '/home/faisal/workspace/pandora/media/'
MEDIA_URL = '/media/'
STATIC_ROOT = ''
STATIC_URL = '/static/'

STATICFILES_DIRS = (
'/home/faisal/workspace/pandora/Static/' ,  
) 
```

这是我的 urls.py

```
urlpatterns = patterns('',
 url(r'^admin/', include(admin.site.urls)),
 url(r'^async/gallery/',include('gallery.urls')),  
 url(r'^media/(?P<path>.*)$', 'django.views.static.serve',{'document_root': '/home/faisal/workspace/pandora/media',}), 
```

)

这是我的模板标签

```
<img src="{{ MEDIA_URL }}{{ image.photo.url }}" alt="{{ image.title }}" /> 
```

这是我的views.py：

```
return render_to_response('gallery/image.html', 
{  
    'e_piclist' : e_piclist, 

},context_instance=RequestContext(request)) 
```

在我的模板中，而不是显示图像，这显示了图像 alt。

我在做什么错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:34:30.687

您的图像标签不需要`{{MEDIA_ROOT}}`，将标签更新为

```
<img src="{{ image.photo.url }}" alt="{{ image.title }}" /> 
```

提供`image_field.url`绝对路径。[请参阅文件字段存储](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.storage)中的第 3 点

# iphone - 当应用程序启动iphone时如何使所有字段清晰

> ID：12225442
> 
> 赞同：-1
> 
> 时间：2012-09-01T06:24:28.983
> 
> 标签：iphone, objective-c, xcode4

当我结束应用程序并重新启动它时，我的 iphone 应用程序中有 5 个标签和 2 个文本字段，标签和文本字段将包含以前使用的数据。我想在应用程序启动时清除所有标签和文本字段，请任何人帮助我提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:52:52.047

在 viewwillappear 方法中执行此操作：

```
 label.text = @""; //and all other labels  
  txt.text = @""; //and all other textFields 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T06:03:44.280

设置字段和标签的值 nil 即 label.text = @""; 在 ViewWillAppear 中，它会在返回选项卡时清除字段和标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T06:35:43.077

尝试将此添加到您的代码中：

```
textFieldname.stringValue = @""; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T06:27:27.573

`ViewWillAppear`在或`ViewDidLoad`方法中将字段的值设置为 nil 。

# delphi - TSQLQuery 只为大字符串正确传输前 1MB 的数据

> ID：12225450
> 
> 赞同：3
> 
> 时间：2012-09-01T06:26:21.183
> 
> 标签：delphi, stream, sql-server-2008-r2, delphi-xe2

（请参阅使用堆栈跟踪编辑 #1 和在帖子末尾使用解决方法编辑 #2）

在对[TSQLQuery.FieldByName().AsString -> TStringStream Corrupts Data 进行](https://stackoverflow.com/questions/12210174/tsqlquery-fieldbyname-asstring-tstringstream-corrupts-data)故障排除时，我发现 a`TSQLQuery.FieldByName().AsBytes`只会`varchar(max)`正确传输 1MB 的数据。

*   使用 WireShark，我验证了所有数据*都**正确地*传递给了 Delphi 应用程序。
*   我验证它*总是*将正确数量的字节写入输出文件，但任何超过**1MB**的字节都是空字节。
*   此外，`TSQLQuery.FieldByName().AsString`并且`.AsWideString`还表现出相同的行为。

什么会导致`.AsBytes`向 提供正确的字节数`TFileStream`，但`null`所有字节都超过 1MB？

## 测试用例

这个测试用例创建了两个输出文件。 `Plus14.txt`是 1MB + 14 字节。 `Plus36.txt`是 1MB + 36 字节。在这两种情况下，超过 1MB 的字节都是`null`字节值。我什至尝试了一个 16MB 的字符串。输出文件的前 1MB 是正确的；接下来的 15MB 都是`null`字节。

## SQL 服务器

```
use tempdb
go
create procedure RunMe
as
  declare @s1 varchar(max), @s2 varchar(max)

  set @s1 = '0123456789ABCDEF'
  set @s2 = @s1 + @s1 + @s1 + @s1 + @s1 + @s1 + @s1 + @s1 -- 128 bytes
  set @s1 = @s2 + @s2 + @s2 + @s2 + @s2 + @s2 + @s2 + @s2 -- 1,024 bytes
  set @s2 = @s1 + @s1 + @s1 + @s1 + @s1 + @s1 + @s1 + @s1 -- 8,192 bytes
  set @s1 = @s2 + @s2 + @s2 + @s2 + @s2 + @s2 + @s2 + @s2 -- 65,536 bytes
  set @s2 = @s1 + @s1 + @s1 + @s1 + @s1 + @s1 + @s1 + @s1 -- 524,288 bytes
  set @s1 = @s2 + @s2                                     -- 1,048,576 bytes

  set @s2 = @s1 + 'this is a test'                        -- 1MB + 14 bytes
  set @s1 = @s1 + 'of the emergency broadcasting system'  -- 1MB + 36 bytes

  select @s2 as Plus14, @s1 as Plus36
go
grant execute on RunMe to public
go 
```

## 德尔福 DFM

默认形式，`TSQLConnection`将其放在上面（和一个`TButton`）：

```
object SQLConnection1: TSQLConnection
  DriverName = 'MSSQL'
  GetDriverFunc = 'getSQLDriverMSSQL'
  LibraryName = 'dbxmss.dll'
  LoginPrompt = False
  Params.Strings = (
    'User_Name=user'
    'Password=password'
    'SchemaOverride=%.dbo'
    'DriverUnit=Data.DBXMSSQL'

      'DriverPackageLoader=TDBXDynalinkDriverLoader,DBXCommonDriver160.' +
      'bpl'

      'DriverAssemblyLoader=Borland.Data.TDBXDynalinkDriverLoader,Borla' +
      'nd.Data.DbxCommonDriver,Version=16.0.0.0,Culture=neutral,PublicK' +
      'eyToken=91d62ebb5b0d1b1b'

      'MetaDataPackageLoader=TDBXMsSqlMetaDataCommandFactory,DbxMSSQLDr' +
      'iver160.bpl'

      'MetaDataAssemblyLoader=Borland.Data.TDBXMsSqlMetaDataCommandFact' +
      'ory,Borland.Data.DbxMSSQLDriver,Version=16.0.0.0,Culture=neutral' +
      ',PublicKeyToken=91d62ebb5b0d1b1b'
    'GetDriverFunc=getSQLDriverMSSQL'
    'LibraryName=dbxmss.dll'
    'VendorLib=sqlncli10.dll'
    'VendorLibWin64=sqlncli10.dll'
    'HostName=localhost'
    'Database=tempdb'
    'MaxBlobSize=-1'
    'LocaleCode=0000'
    'IsolationLevel=ReadCommitted'
    'OSAuthentication=False'
    'PrepareSQL=True'
    'BlobSize=-1'
    'ErrorResourceFile='
    'OS Authentication=True'
    'Prepare SQL=False')
  VendorLib = 'sqlncli10.dll'
  Left = 8
  Top = 8
end 
```

## 德尔福 PAS

的代码`TButton.OnClick`：

```
procedure TForm1.Button1Click(Sender: TObject);
var qry: TSQLQuery;

  procedure save(str: string);
  var data: TBytes; fs: TFileStream;
  begin
    fs := TFileStream.Create(Format('c:\%s.txt', [str]), fmCreate);
    try
      data := qry.FieldByName(str).AsBytes;
      if data <> nil then
        fs.WriteBuffer(data[0], Length(data));
    finally
      FreeAndNil(fs);
    end;
  end;

begin
  SQLConnection1.Open;
  qry := TSQLQuery.Create(nil);
  try
    qry.MaxBlobSize := -1;
    qry.SQLConnection := SQLConnection1;
    qry.SQL.Text := 'set nocount on; exec RunMe';
    qry.Open;
    save('Plus14');
    save('Plus36');
  finally
    FreeAndNil(qry);
  end;
  SQLConnection1.Close;
end; 
```

## <<< 编辑 #1 - 堆栈跟踪 >>>

我追踪了 Embarcadero 的代码，找到了`null`字节第一次出现的地方。

*   `FMethodTable.FDBXRow_GetBytes`
*   `Data.DBXDynalink.TDBXDynalinkByteReader.GetBytes(0,0,(...),0,1048590,True)`
*   `Data.SqlExpr.TCustomSQLDataSet.GetFieldData(1,$7EC80018)`
*   `Data.SqlExpr.TCustomSQLDataSet.GetFieldData(???,$7EC80018)`
*   `Data.DB.TDataSet.GetFieldData($66DB18,$7EC80018,True)`
*   `Data.SqlExpr.TSQLBlobStream.ReadBlobData`
*   `Data.SqlExpr.TSQLBlobStream.Read((no value),1048590)`
*   `System.Classes.TStream.ReadBuffer((no value),1048590)` *1MB + 14b*
*   `Data.DB.TBlobField.GetAsBytes`
*   `Unit1.save('Plus14')`

`FDBXRow_GetBytes`返回时为`Value: TBytes`1048590 字节，`null`为最后 14 个字节设置值。

我不确定下一步该尝试什么。任何帮助是极大的赞赏。

## <<< 编辑 #2 - 解决方法 >>>

我设置`SQLConnection1.MaxBlobSize := 2097152`了，现在所有字节都正确地流式传输到输出文件。所以问题似乎只发生在`.MaxBlobSize = -1`.

既然我找到了解决方法，解决问题的紧迫性就消失了。但是，如果可能的话，我仍然想开始`-1`工作，因为我数据库中的值有时会超过 50 兆。因此，仍然感谢任何建议或帮助。

## <<< 编辑 #3 - 错误报告 >>>

我向 Embarcadero (QC #108475) 提交了错误报告。一旦错误被确认/修复，我会报告。

## <<< 编辑 #4 - 升级的错误报告 >>>

我今天发现使用这种解决方法有时会导致 a`TClientDataSet`抛出`EOleException`带有文本“**灾难性故障**”的错误。显然 a`TClientDataSet`更喜欢 a `MaxBlobSize := '-1';`。因此，我在 Embarcadero 上报了错误报告。希望他们很快会为此提供修复或更好的解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:38:00.877

我能够解决这个问题。可以`TSQLConnection`像这样设置属性：

```
sqlcon.Params.Values['MaxBlobSize'] := '250000000'; // 250 megs
sqlcon.Params.Values['BlobSize'] := '-1'; 
```

`DBXRegDB`但是我通过使用一个单元设置所有组件来设置比这些更多的属性`TSQLConnection`。我不使用 IDE 的属性编辑器...该`DBXRegDB`单元的某些设置可能还需要解决方法才能工作（我不确定）。我将包括`DBXRegDB`单位+说明如何使用它以防万一。

*   将`DBXRegDB`单位添加到`.dpr`文件中。
*   添加`DBXRegDB`到表单的`uses`子句中。
*   执行以下代码，将`TSQLConnection`表单上的组件传递给它：

.

```
procedure SetupMSSqlConnection(const sqlcon: TSQLConnection; const hostname, port, maxcon, dbname, username, password: string);
begin
  sqlcon.Params.Clear;
  sqlcon.DriverName := 'MSSQL_Con';
  sqlcon.VendorLib := sqlcon.Params.Values[TDBXPropertyNames.VendorLib];
  sqlcon.LibraryName := sqlcon.Params.Values[TDBXPropertyNames.LibraryName];
  sqlcon.GetDriverFunc := sqlcon.Params.Values[TDBXPropertyNames.GetDriverFunc];

  sqlcon.Params.Values[TDBXPropertyNames.HostName] := hostname;
  sqlcon.Params.Values[TDBXPropertyNames.Port]     := port;
  sqlcon.Params.Values[TDBXPropertyNames.Database] := dbname;
  sqlcon.Params.Values[TDBXPropertyNames.UserName] := username;
  sqlcon.Params.Values[TDBXPropertyNames.Password] := password;
end; 
```

最后，将 设置`TSQLQuery.MaxBlobSize`为 '0'，以便它会自动从其复制值`TSQLConnection`。

这是该`DBXRegDB`单元，供那些想要使用它的人使用。我根据我在这里找到的东西对其进行了改编：[DBX without deploying DBXDrivers.ini](http://andy.jgknet.de/blog/2010/11/dbx-without-deploying-dbxdrivers-ini/)。确保不要将 设置`BlobSize`为 250 兆，否则会出现内存不足错误。

```
unit DBXRegDB;

interface

implementation

uses
  DBXCommon, DBXDynalinkNative, DBXMSSQL, Forms, Classes;

type
  TDBXInternalDriver = class(TDBXDynalinkDriverNative)
  public
    constructor Create(DriverDef: TDBXDriverDef); override;
  end;

  TDBXInternalProperties = class(TDBXProperties)
  public
    constructor Create(DBXContext: TDBXContext); override;
  end;

{ TDBXInternalDriver }

constructor TDBXInternalDriver.Create(DriverDef: TDBXDriverDef);
begin
  inherited Create(DriverDef, TDBXDynalinkDriverLoader);
  InitDriverProperties(TDBXInternalProperties.Create(DriverDef.FDBXContext));
end;

{ TDBXInternalProperties }

constructor TDBXInternalProperties.Create(DBXContext: TDBXContext);
begin
  inherited Create(DBXContext);

  Values[TDBXPropertyNames.SchemaOverride]         := '%.dbo';
  Values[TDBXPropertyNames.DriverUnit]             := 'DBXMSSQL';
  Values[TDBXPropertyNames.DriverPackageLoader]    := 'TDBXDynalinkDriverLoader,DBXCommonDriver160.bpl';
  Values[TDBXPropertyNames.DriverAssemblyLoader]   := 'Borland.Data.TDBXDynalinkDriverLoader,Borland.Data.DbxCommonDriver,Version=15.0.0.0,Culture=neutral,PublicKeyToken=91d62ebb5b0d1b1b';
  Values[TDBXPropertyNames.MetaDataPackageLoader]  := 'TDBXMsSqlMetaDataCommandFactory,DbxMSSQLDriver160.bpl';
  Values[TDBXPropertyNames.MetaDataAssemblyLoader] := 'Borland.Data.TDBXMsSqlMetaDataCommandFactory,Borland.Data.DbxMSSQLDriver,Version=15.0.0.0,Culture=neutral,PublicKeyToken=91d62ebb5b0d1b1b';
  Values[TDBXPropertyNames.GetDriverFunc]          := 'getSQLDriverMSSQL';
  Values[TDBXPropertyNames.LibraryName]            := 'dbxmss.dll';
  Values[TDBXPropertyNames.VendorLib]              := 'sqlncli10.dll';
  Values[TDBXPropertyNames.HostName]               := 'ServerName';
  Values[TDBXPropertyNames.Database]               := 'Database Name';
  Values[TDBXPropertyNames.MaxBlobSize]            := '250000000';
  Values['LocaleCode']                             := '0000';
  Values[TDBXPropertyNames.IsolationLevel]         := 'ReadCommitted';
  Values['OSAuthentication']                       := 'False';
  Values['PrepareSQL']                             := 'True';
  Values[TDBXPropertyNames.UserName]               := 'user';
  Values[TDBXPropertyNames.Password]               := 'password';
  Values['BlobSize']                               := '-1';
  Values[TDBXPropertyNames.ErrorResourceFile]      := '';
  Values['OS Authentication']                      := 'False';
  Values['Prepare SQL']                            := 'True';
  Values[TDBXPropertyNames.ConnectTimeout]         := '30';
end;

var
  InternalConnectionFactory: TDBXMemoryConnectionFactory;

initialization

  TDBXDriverRegistry.RegisterDriverClass('MSSQL_Con', TDBXInternalDriver);
  InternalConnectionFactory := TDBXMemoryConnectionFactory.Create;
  InternalConnectionFactory.Open;
  TDBXConnectionFactory.SetConnectionFactory(InternalConnectionFactory);

end. 
```

# javascript - jQuery scrollTop() 在移动浏览器上滚动 DIV 时不起作用，替代方案？

> ID：12225456
> 
> 赞同：34
> 
> 时间：2012-09-01T06:28:00.557
> 
> 标签：javascript, jquery, html, scroll, mobile-browser

我正在尝试滚动到滚动 DIV 中的特定位置。现在我正在使用带有 jQ​​uery scrollTop() 函数的像素偏移，该函数在桌面浏览器上运行良好，但它不适用于除了谷歌的 Chrome Android 浏览器之外的 android 手机浏览器（没有 iOS 设备来测试它是否有效）。我找到的所有解决方案都是用于页面（窗口）滚动而不是在 DIV 中滚动，有人对我还可以使用什么来完成相同的任务有任何建议吗？

**这是一个例子**： http:
[//jsfiddle.net/aQpPc/](http://jsfiddle.net/aQpPc/)
[http://jsfiddle.net/aQpPc/embedded/result/](http://jsfiddle.net/aQpPc/embedded/result/)

**我在桌面浏览器中尝试过的其他方法**：

```
document.getElementById('ID_of_element_in_a_DIV').scrollIntoView();
document.getElementById('ID_of_DIV').scrollTop = 200; 
```

**编辑 3/11/13：**

这是一个已知的 android 浏览器问题：[https ://code.google.com/p/android/issues/detail?id=19625](https://code.google.com/p/android/issues/detail?id=19625)

错误报告中的一位用户提出了一种解决方法：

> 因为这个问题似乎只在溢出属性设置为滚动时出现，您可以先将其设置为“隐藏”，设置 scrollTop 属性，然后将其重置回“滚动”（或自动）。当使用滚动条重新渲染元素时，似乎可以使用 scrollTop 属性。目前尚不清楚这是否有任何意想不到的副作用，但“它在我的机器上有效！”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-27T10:14:36.423

这对我有用：

```
setTimeout( function() {
    $(div).scrollTop(0)
}, 500 ); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-20T07:04:32.130

对我有用的解决方法：首先，将溢出属性临时设置为“隐藏”，然后设置 scrollTop 属性，然后将溢出属性设置回“滚动”（或自动）。当溢出属性设置回“滚动”时，scrollTop 值似乎保持不变并受到尊重。这是一个非常简单的解决方法，适用于我测试过的所有浏览器（桌面和移动）。我没有对它进行详尽的测试，也没有在适当的过渡情况下进行测试，所以可能会有我没有遇到的副作用......你的里程可能会有所不同 - 但这是一件容易尝试的事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-10T09:23:22.230

我在这里找到了答案[http://blog.jonathanargentiero.com/jquery-scrolltop-not-working-on-mobile-devices-iphone-ipad-android-phones/](http://blog.jonathanargentiero.com/jquery-scrolltop-not-working-on-mobile-devices-iphone-ipad-android-phones/)

手机看不懂`$('html,body')`，手机可以做以下

```
if(navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/)) {           
    window.scrollTo(0)
} else {
    // default `$('html,body')` code for scrolling
} 
```

**或者**

只需使用`$('body')`而不是`$('html, body')`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-17T05:54:30.287

我建议不要使用 scroll、scrollTo 或 scrollTop 方法（这会给我在移动设备上带来问题），而是在您的顶部 DOM 元素（如 #top）上设置一个 ID，然后只使用：

```
document.getElementById("top").scrollIntoView(); 
```

到目前为止，这在所有设备和浏览器上对我来说都是最好的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-01T13:54:05.270

我有几个解决方案供您尝试。您必须自己测试它们，因为我之前没有在移动浏览器中尝试过它们，但它们是：

1.  使用 jQuery 的`.css()`方法（或`.animate()`取决于您的最终目标）来调整上边距（注意：您必须将溢出更改为隐藏并将文本包装在内部 div 中，这将是您正在调整其边距的元素)
2.  执行与第一个解决方案相同的操作，除了将嵌入的 div 的位置设置为相对并调整其`top`属性。

如果您需要任何帮助或对此有任何疑问，请告诉我。祝你好运！:)

请注意，尽管在它们基于 CSS 标准而不是 jQuery 函数之前我没有在移动设备中测试过它们，但它们应该可以工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-27T21:34:56.970

暂时将`overflow`属性设置为“隐藏”，如@Allan Nienhuis 的回答中所建议的那样，在 Android 上不起作用`4.0.3`，例如（例如，Kindle Fire 2s 正在运行的内容） - 当您设置`overflow`回 时`scroll`，元素滚动回到顶部。

备择方案：

*   通过辅助函数滚动您自己的滚动，如此处所示[-](https://code.google.com/p/android/issues/detail?id=19625#c24)虽然这很容易实现，但它是简单的，因为它不会为您提供惯性滚动或过度滚动。

*   使用诸如[iScroll 之](http://cubiq.org/iscroll-5)类的库，它基于 CSS 转换实现自己的复杂滚动（惯性、过度滚动）。

但是，使用 iScroll 需要一些设置：您需要一个具有固定高度和样式的*包装器* ，并且要滚动的元素应该*没有*样式。[这个 jsFiddle 演示](http://jsfiddle.net/mklement/gz4Sg/)展示了它是如何完成的。`div``overflow: hidden` *`overflow`*

 ** * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-14T13:10:23.470

我可以在 Galaxy Tab 上实现滚动到页面顶部的唯一方法是在滚动时将页面隐藏`body`100 毫秒。使用 jQuery：

```
$("body").hide();
window.scrollTo(0, 0);
setTimeout(function(){ $("body").show() }, 100); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-26T14:37:39.713

使用以下代码：

```
$("body").animate( { scrollTop: 50,  },  800,  function(){
    $("body").clearQueue();
} ); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-20T06:06:50.317

你试过这个吗？

```
$("html").scrollTop(0); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-21T12:11:27.247

尝试使用 jQuery 的 .animate 方法：

```
$('.div').animate({ scrollTo: x; }); 
```

其中 x 等于要滚动到顶部的 div 的位置。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-07-03T05:41:49.900

```
jQuery(document).ready(function($) {

$(".scroll").click(function(event){     
    event.preventDefault();
    $('html,body').animate({scrollTop:$(this.hash).offset().top}, 1500);
});
});

<a href="#top" class="scroll"></a> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-04-28T05:13:47.427

这些解决方案对我不起作用。我知道有人提到了移动检测，但他们的方法对我不起作用。我终于意识到使用移动检测为每种情况提供两种不同的 CSS 样式。也许不理想，但它肯定有效。上面还建议用 js 临时更改样式对我不起作用。

我有一个带有独立滚动 div 的两列布局，每个设置为溢出：滚动，正文必须设置为溢出：隐藏。我需要在其中一列上使用 scrollTop 并且没有解决方案有效。

我使用了 wp_is_mobile() （Wordpress 函数），如果 mobile 为真，overflow:hidden 将从*正文*中删除，并且带有 overflow:scroll 的 div 删除了该 css。最后，scrollTop 在移动设备上工作。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-21T15:29:34.243

```
 $(document).ready(function (){
  $(window).scroll(function(){
        if($(this).scrollTop() > 100){
            $('.scrollup').fadeIn();
        } 
        else{
            $('.scrollup').fadeOut();
        }
    });

  $('.scrollup').click(function(){
    if (navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/)) {           
      window.scrollTo(0,0);
    }
    else{
      $('html,body').animate({
        scrollTop: 0
        }, 500, function(){
        $('html,body').clearQueue();
      });
    }
  });              
});
```

```
body{
  height: 1500px;
}

.scrollup {
    bottom: 135px;
    height: 40px;
    width: 40px;
    display: none;
    background: #000;
    border: 2px solid #fff;
    border-radius: 100%;
    box-shadow: 1px 3px 5px #000;
    text-align: center;
    font-size: 25px;
    color: #fff;
    cursor: pointer;
    position: fixed;
    right: 12px;
    line-height: 36px;
    z-index: 25;
}

svg{
  fill: #fff;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div class="scrollup">
    <svg height="35" viewBox="0 0 512 512" width="30">
        <polygon points="396.6,352 416,331.3 256,160 96,331.3 115.3,352 256,201.5 "/>
    </svg>
</div>
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2013-04-25T04:09:53.540

我有同样的问题，并通过使用 jquery`.offset()`来解决它。

[http://api.jquery.com/offset/](http://api.jquery.com/offset/)

```
$('#yourFineElement').offset({ top: X, left Y)}); 
```*

# c# - 使用ajax json jquery的服务器端搜索

> ID：12225459
> 
> 赞同：0
> 
> 时间：2012-09-01T06:28:40.017
> 
> 标签：c#, ajax, asp.net-mvc, json

我正在检索用户列表并将这些列表呈现在大表中。我已经实现了自定义分页。现在我想实现服务器端搜索和过滤。

我正在考虑将文本框放在每一列的顶部，以获取用户输入（例如用户名）并使用 ajax 将这些数据处理到 mvc 控制器，在该控制器中我将根据该用户输入检索数据并使用 json 在 jquery 弹出窗口上显示此数据。

这些解决方案是正确的方法，还是您可以向我推荐其他解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:38:21.810

是的，那会更好。您可以使用 Ajax.Action 在控制器中执行 Action 而不是使用 Action Result 您还可以使用 Json Result 返回类型，它可以将 json 结果返回到您的视图中，您可以在那里处理该 json 结果并轻松显示在任何 Jquery Popup 窗口中.

让我告诉你它是如何工作的：

```
<%= Ajax.ActionLink("Search", "SeachItem", new {item.ItemID}, null) %> 
```

这就是您可以使用**Ajax.ActionLink**的方式，其中**SearchItem"**是控制器的名称，并传递需要搜索的项目 ID。

```
 [AcceptVerbs(HttpVerbs.Post)] // Only allow POSTs (this action causes changes)
     public JavaScriptResult SearchItem(int itemID)
     {
       var itemToDelete = GetItem(itemID);

       // Now tell the browser to update its DOM to match

       JavaScriptEncode(itemToDelete.Name));
       return JavaScript(script);
      } 
```

这是在 Javascript 中，您也可以像在 Json 结果中一样工作并返回该 json 结果。

快乐编码！！！！

# java - 寻找 PI 的扩展

> ID：12225460
> 
> 赞同：1
> 
> 时间：2012-09-01T06:29:01.807
> 
> 标签：java, php, javascript, c++, .net

在一次采访中，我被要求在 PI 的扩展中找到前 9 位回文。我不知道我应该如何去做。在整个面试过程中，这个问题一直存在于我的系统中，我无法正确回答接下来的问题。

什么是最佳方式？

编辑：

找到回文并不难，但我怎样才能尽可能多地扩展 PI。我试过 Math.PI，我试过 22/7，但没有什么能满足我的需求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T06:36:54.617

这里的“最佳”方式很大程度上取决于计算 Pi 的算法的选择，假设您无法访问现成的任意数量的数字。

有许多与 pi 收敛的无限和，每个总和最终都能够产生正确的数字，但是您必须使用一些允许无限精确浮点数或无限大整数的库。

之后，找到回文相对容易，因为您只需比较第一个数字和第九个数字，第二个数字和第八个数字，依此类推。

在这种情况下，问题显然在于使用哪个收敛和来近似 Pi。其中一些在 Pi 的维基百科页面上列出：[http ://en.wikipedia.org/wiki/Pi#Polygon_approximation_era](http://en.wikipedia.org/wiki/Pi#Polygon_approximation_era)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T06:34:49.600

首先，我会在 pi 中创建一个数字子集并转换为字符串。

我会从中获取一个九字符子集字符串，然后将第一个字符与最后一个字符进行比较。如果它们匹配，则将字符 2 与 8 进行比较，依此类推。如果任何比较失败，则将 9 个字符的字符串移至下一组 - 一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T06:56:12.457

我可能会将`first index`值分配给`first variable`和`ninth index`值`second variable`，然后查看它们是否相等。如果它们相等，我将分配`second index`value`first variable`和`eight index`value to`second variable`直到他们在中间位置相遇。如果它们在某个地方彼此不同，请分配与第二个变量值不同的值，`first variable`然后`latest left side index`重复过程直到到达位置。`right side index``left side index + 8``last index - 8`

# vba - 为重复多次的值创建新列，以便通过 EXCEL VBA 将所有列值转换为一行

> ID：12225463
> 
> 赞同：-2
> 
> 时间：2012-09-01T06:29:50.930
> 
> 标签：vba, excel, grouping, copying

我正在修改我已经发布的问题。我的要求很简单。

# **DEFECT_ID LOG_TIME 状态**

1001 08/22/2012 12:03:34 打开

1001 08/22/2012 12:03:35 待定

1001 2012 年 8 月 23 日 02:13:46 固定

1001 2012 年 8 月 23 日 22:34:37 测试就绪

1001 08/24/2012 12:34:43 待定

1001 08/24/2012 19:13:39 复试

1001 08/25/2012 22:13:40 重新开放

1001 08/26/2012 10:03:41 重新测试

1001 08/27/2012 11:13:42 关闭

上述格式是我的“源”数据。会有数百个这样的缺陷。如您所见，上述所有日志日期和状态都属于一个 Defect_ID(1001)。我的实际工作是我必须将上述数据复制到一张新表格中，格式可以帮助我计算状态之间的时间差。请注意，有“八”种缺陷状态：Open、Pending、Review、TestReady、Fixed、Retest、Reopen、Closed。这些缺陷状态可以在一个缺陷中出现多次（如上例所示，' Pending' 出现两次。但 open 和 closed 只会出现一次）。同样，对于缺陷，状态最多可以重复 6 次。所以我需要这样的输出，其中日志日期将适合相应的状态：

# *Defect_ID* 打开 Pending1 Pending2...Pending6 Fixed1...Fixed6 TestReady1..Testready6 Review1..Review6 Retest1..Retest6 REopen1..REopen6 Closed

请让我知道如何发布图片。如果是这样，我可以向您展示我究竟需要如何通过 VBA 输出。请参考我的另一个问题：'通过 EXCEL VBA 为每个值创建新列，将与 ID 匹配的列中的值复制到新工作表'，我所需要的就是，我需要为每个状态添加新列重复。这样我所有的值都将放在一行中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:00:13.573

这是一些 VBA，可以满足您的需求。（如果我正确理解要求）。它可能有点冗长，但应该易于维护。可能有一种更雄辩的方式来做到这一点。

```
Private Sub CreateOutputSheet()

   Dim iLoop, iStartRow, iEndRow As Integer

   Dim iPendingCount As Integer
   Dim iFixedCount   As Integer

   'Base Col Numbers
   Const colPending     As Integer = 3
   Const colColFixed    As Integer = 9
   '.....

   Dim sDefectIdCurrent    As String
   Dim sDefectIdPrevious   As String

   Dim iTargetRow As Integer
   Dim sCurrentStatus As String
   Dim dCurrentTime As Date

   sDefectIdPrevious = Sheets("Soure").Cells(intstartRow, 1)
   sDefectIdCurrent = Sheets("Soure").Cells(intstartRow, 1)

   For iLoop = iStartRow To iEndRow
      sDefectIdCurrent = Sheets("Soure").Cells(iLoop, 1)
      'Check the current problem
      If sDefectIdCurrent <> sDefectIdPrevious Then 'Reset the col counters
         iPendingCount = 0
         iFixedCount = 0
         '....
      End If

      sCurrentStatus = Sheets("Soure").Cells(iLoop, 3)
      dCurrentTime = Sheets("Soure").Cells(iLoop, 2)

      Select Case sCurrentStatus

         Case "Open"
            Sheets("Target").Cells(iTargetRow, 2) = dCurrentTime
         Case "Pending"
            iPendingCount = iPendingCount + 1
            Sheets("Target").Cells(colPending + iPendingCount, 1) = dCurrentTime
         Case "Fixed"
            iFixedCount = iFixedCount + 1
            Sheets("Target").Cells(colColFixed + iFixedCount, 1) = dCurrentTime
         '...
         Case "Closed"
            Sheets("Target").Cells(iTargetRow, colClosedNo) = dCurrentTime
      End Select

      sDefectIdCurrent = Sheets("Soure").Cells(intstartRow, 1)
   Next

End Sub 
```

# drupal - Drupal 7 - 如何设置和翻译字段集合

> ID：12225464
> 
> 赞同：3
> 
> 时间：2012-09-01T06:29:51.927
> 
> 标签：drupal, collections, field, translate, multilingual

我有字段集合字段设置为无限值的分类术语。FC 包含很少的 texfield、textarea 和 image 字段。FC 及其字段设置为由用户翻译。分类术语是本地化的 - 所有语言的所有术语都是相同的，只是它们被翻译了。我为分类术语和节点打开了实体翻译，但没有为 FC 开启实体翻译，因为它会触发关于无效基本路径的通知。

使用此配置：我创建术语并保存它，在初始创建后我可以添加任意数量的 FC 并保存它们。在翻译表格上，我可以为他们添加翻译。并且当保存的值仍然保存为不同的语言时。

当我创建与 FC 有关系的视图、添加 FC 字段并将上下文过滤器设置为 termID 时出现问题（通过分类术语面板显示此视图）。字段语言设置设置为当前用户语言。在手动设置 termID 的视图预览中，如果我更改语言前缀，我会在 url (en/admin/structure/views..) 中看到正确的语言结果和正确的结果。但是在学期页面上它没有显示任何内容。

我正在使用最新的开发实体翻译一个字段收集模块。我还尝试了为 FC 启用实体翻译的设置，但我再次无法从视图中获得正确的输出。

我在哪里做错了？FC 设置、多语言设置或视图中。有没有人提示如何使 FC 可翻译？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T21:08:33.343

我重新测试了干净的安装。所有这些都适用于我在[#9](http://drupal.org/node/1683784#comment-6421774)中描述的内容。结果相同，但有一些新的/确认的观察结果和可能的解决方法：

第一次翻译字段时，FC 中存在一个错误，值未正确保存：

*   值已保存，但当我刷新编辑页面时，字段存在但为空/空白，默认语言的字段正常

    *   实际发生的情况：保存 FC 字段的翻译时，它们错误地链接到默认语言而不是已翻译的语言，并且在重新打开默认语言时它们也不会出现，因此它们可以被删除。如果您像我一样不小心在视图中看到它们，这可能会很糟糕（有一段时间这会误导我，因为标题是相同的）。
    *   可能的解决方法：首次翻译时，您必须删除从默认语言复制的值并保存，然后您可以输入翻译后的值
    *   启用 FC 的 ET：相同的问题和解决方法

在根据条款创建一些内容并使用解决方法翻译它们之后，我尝试通过视图在面板中显示它们。

*   我创建了一个面板并将选择设置为我正在使用的分类词汇，并在内容下创建了“新自定义内容”，其中包含了一些替换 - 对于 FC 字段 %term:field_test_fc （这是我的测试内容）
    *   当我更改语言时，值会根据所选语言替换相应地更改 FC 的所有字段并以正确的语言显示它们这就是为什么这个问题困扰着我……它也应该在视图上起作用，因为如果术语本身可以区分 FC 的不同语言字段，因此可以通过面板查看
*   我创建了视图（页面），其中列出了使用该 FC 的关系按术语名称分组的所有术语的所有 FC 字段
    *   内容确实会根据所选语言而改变 =)
*   我如上所述创建了另一个视图（内容窗格）并添加了上下文过滤器，将其设置为 termID 并将其附加到面板
    *   视图仅显示保存术语时最后使用的语言的 FC 字段。这意味着在以默认语言编辑和保存术语时，视图将仅显示默认语言的字段。奇怪：S
*   启用 FC 的 ET：它打破了两种视图（显示所有语言的字段），通过添加基于 FC 字段的过滤器修复：语言并将其设置为当前用户语言
    *   面板视图仍然没有按预期工作，但我知道上下文过滤器有问题
    *   我必须做的是从上下文过滤器（termID）中删除验证标准

解决最后一个问题后，面板视图正常工作，两种语言的查看术语显示正确（翻译的）FC 字段 =）。

希望它有助于了解问题发生在哪里以及如何解决这些问题。修复会很好=）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-12T21:34:25.220

作为一个模块的字段集合尚未被修补以很好地支持多语言。争论是字段集合本身是否应该设置为语言中立，允许底层字段是特定于语言的。

但是，字段收集模块本身目前不支持多语言。Drupal.org 上有许多与此相关的补丁，包括以下两个主要补丁线程：

[https://drupal.org/node/1344672](https://drupal.org/node/1344672)

[https://drupal.org/node/1316162](https://drupal.org/node/1316162)

Drupal 7 的 Lingotek 翻译模块成功地翻译和显示字段集合，因为它使用 hook_entity_load、hook_entity_update 和不依赖于 entity_translation 模块 UI 的翻译过程的组合绕过了字段集合模块的限制。

# javascript - GoogleTV 发布网络应用程序

> ID：12225465
> 
> 赞同：1
> 
> 时间：2012-09-01T06:30:06.123
> 
> 标签：javascript, html, web, google-tv, smart-tv

我认为要在 Google Play for Google TV 2.0 平台上发布 Web 应用程序（HTML/CSS/Js），唯一的方法是使用 Java WebView 包装器（或更成熟的解决方案，如 PhoneGap）——对吗？

是否有任何其他方法可以直接发布 Web 应用程序，或者是否有任何已知的计划？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:48:27.733

目前没有将网络应用程序发布到 Google Play 的方法。您可以像 PhoneGap 一样将您的应用程序包装在 webView 中，或者您可以创建一个简单的启动器来打开 Chrome。然而，这两者都不太可能出现。

# redis - Redis 中的“归档”发布/订阅消息

> ID：12225467
> 
> 赞同：0
> 
> 时间：2012-09-01T06:30:41.773
> 
> 标签：redis, node-redis

我正在使用 Redis 的发布/订阅功能。因此，服务器发布 10 个项目，然后客户端获取这 10 个项目。

但是，现在有一个新客户订阅了该提要。我希望他们得到之前的 10 件物品以及任何新物品。

Redis 是否有办法使用发布和订阅功能来做到这一点？提要历史记录是否存储在数据库中的任何位置？有没有一种简单的方法可以做到这一点？将消息存储在列表中并让客户端在`LRANGE my_list 0 10`列表中执行的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T23:47:56.870

我会保留一个单独的数据存档，并将事件添加到两者中。新客户可以订阅和排队实时事件，阅读存档直到它与第一个发布的事件保持同步，然后赶上发布的事件。这样您就不会在存档和实时事件之间切换时错过任何已发布的事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-19T19:38:22.140

在一些研究中偶然发现了这一点。我知道它很旧，但我想补充一点，使用 Redis Streams 数据结构实现持久消息传递并不太复杂。

发布者将消息发布到 Stream 并且订阅者将只获得最新消息，如果这是它所关心的。您还可以创建用户组以限制可以获取消息的订阅者数量，然后将其标记为已确认以避免重复处理。当您希望消息只被处理一次并且需要一种方法来确认时，这很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T15:14:11.863

我最终为此目的创建了一个 nodejs 应用程序。就我而言，用户数据已发布到我想要存储的 redis 服务器，我使用 nodejs 应用程序订阅了 redis 频道，然后将详细信息保存到数据库中，到目前为止，我使用了 mysql 和 mongo，让我知道如果这有任何兴趣并且粘贴了一些代码，那么在尝试存储发布历史记录时会有一些相似之处......

干杯

# android - 几何概念的解释

> ID：12225469
> 
> 赞同：1
> 
> 时间：2012-09-01T06:30:47.147
> 
> 标签：android, android-layout, geometry

我知道这是一个愚蠢的问题，但我正在阅读一个教程，我似乎不理解下面的代码行......已经理解了这背后的几何算法，但是......哦！ ！！这很简单，但我似乎不明白。请帮助....我是初学者...

```
 private void drawPict(Canvas canvas, int x, int y, int w, int h,
                              float sx, float sy) {
            canvas.save();
            canvas.translate(x, y);
            canvas.clipRect(0, 0, w, h);
            canvas.scale(0.5f, 0.5f);
            canvas.scale(sx, sy, w, h);
            canvas.drawPicture(mPicture);
            canvas.restore();
        }
        @SuppressWarnings("unused")
            @Override
        protected void dispatchDraw(Canvas canvas) {
            super.dispatchDraw(mPicture.beginRecording(getWidth(), getHeight()));
            mPicture.endRecording();
            int x = getWidth()/2;
            int y = getHeight()/2;
            if (false) {
                canvas.drawPicture(mPicture);
            } else {
                drawPict(canvas, 0, 0, x, y,  1,  1);
                drawPict(canvas, x, 0, x, y, -1,  1);
                drawPict(canvas, 0, y, x, y,  1, -1);
                drawPict(canvas, x, y, x, y, -1, -1);
            }
        } 
```

我再次对此进行了研究...并了解canvas.scale有4个参数，它们是我假设的点的坐标...但我仍然无法理解float sx，float sy ...

sx=-1 和 sy=1...它会扩展，同意...但是没有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:02:45.143

缩放系数 +1 会沿轴进行恒等变换，缩放系数 -1 会产生跨轴的反射。在本示例中，您在每个轴上都有反射/无反射的四种可能组合中的每一种。通过 +1 缩放两个坐标是恒等变换。将 x 坐标缩放 -1 并将 y 坐标缩放 +1 会在垂直线上产生反射，即左右反射。反之亦然，将 x 缩放 +1 并将 y 缩放 -1，这是一种上下反射。将两个坐标缩放 -1 会产生双重反射，这与旋转 180 度相同。

Canvas 类没有单独调用反射，因此使用了缩放。

# php - 如何在没有数据库的情况下使用密码保护

> ID：12225472
> 
> 赞同：-4
> 
> 时间：2012-09-01T06:31:05.193
> 
> 标签：php, authentication

我运行此代码来保护我的网站，但我想知道如何在没有数据库的情况下使用多个用户。我读到你可以用一个文本文件来做，但不知道怎么做，我对 PHP 的概念很少。

谢谢您的帮助。

```
<?php

session_start();

$username = "test";
$password = "test";

if(isset($_GET['logout']))
{
  unset($_SESSION["login"]);
  echo "You have logout ... ";
  echo "[<a href='" . $_SERVER['PHP_SELF'] . "'>Login</a>]";
  exit;
}

if (!isset($_SERVER['PHP_AUTH_USER']) || !isset($_SERVER['PHP_AUTH_PW']) ||      !isset($_SESSION["login"]))
{
  header("WWW-Authenticate: Basic realm=\"Ghost SMS\"");
  header("HTTP/1.0 401 Unauthorized");
  $_SESSION["login"] = true;
  echo "You are unauthorized ... ";
  echo "[<a href='" . $_SERVER['PHP_SELF'] . "'>Login</a>]";
  exit;
}
else
{
  if($_SERVER['PHP_AUTH_USER'] == $username && $_SERVER['PHP_AUTH_PW'] == $password)
  {
    echo "Welcome ";
    echo "[<a href='" . $_SERVER['PHP_SELF'] . "?logout'>Logout</a>]";
  }
  else
  {
    unset($_SESSION["login"]);
    header("Location: " . $_SERVER['PHP_SELF']);
  }
}

// content here

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:19:47.227

试试这个：

```
$users = array('user' => 'password',
               'user2' => 'pass',
               'user3' => 'pass',
              ); 
```

然后改变这一行

```
if($_SERVER['PHP_AUTH_USER'] == $username && $_SERVER['PHP_AUTH_PW'] == $password) 
```

对此

```
if (isset($users[$_SERVER['PHP_AUTH_USER']]) // user exists
    && ($users[$_SERVER['PHP_AUTH_USER']] == $_SERVER['PHP_AUTH_PW']) // password matches
   ) 
```

此外 - 如果密码失败，您需要再次吐出标题（而不是进行位置重定向） - 否则，如果用户输入错误，将永远不会提示输入正确的密码（输入无效的用户/密码将导致重定向循环）

# javascript - angularjs：如何向资源对象添加缓存？

> ID：12225475
> 
> 赞同：42
> 
> 时间：2012-09-01T06:31:50.270
> 
> 标签：javascript, angularjs

在 http 中添加缓存非常简单。（通过传递 cache=true ）

[http://docs.angularjs.org/api/ng.$http](https://docs.angularjs.org/api/ng/service/$http)有缓存选项。

如何在 angularjs 的 $resource 中添加类似的功能？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-18T10:08:53.843

从 1.1.2 ( [commit](https://github.com/angular/angular.js/commit/af89daf4641f57b92be6c1f3635f5a3237f20c71) ) 开始，所有 $httpConfig 选项都直接暴露在 $resource 操作对象中：

```
return {
  Things: $resource('url/to/:thing', {}, {
    list : {
      method : 'GET',
      cache : true
    }
  })
 }; 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-12-30T21:13:18.953

在 AngularJs 中实现自己的缓存非常容易。只需使用[$cacheFactory](http://docs.angularjs.org/api/ng.%24cacheFactory)：

```
app.factory('myService', function($resource, $cacheFactory) {
   var cache = $cacheFactory('myService');
   var User = $resource('/user/:userId', {userId:'@id'});

   return {
      getResource: function(userId) {
         var user = cache.get(userId);
         if (!user) {
            user = User.get({userId:userId});
            cache.put(userId, user);   
         }
         return user;
      }
   };
}); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-03-17T22:52:37.323

正如文档所述，[$resource](http://docs.angularjs.org/api/ngResource/service/$resource)内置了对[$cacheFactory](http://docs.angularjs.org/api/ng/service/$cacheFactory)的支持。您可以通过`cache`每个操作的属性将其传递：

> `cache`– `{boolean|Cache}`– 如果`true`，则使用默认`$http`缓存来缓存`GET`请求，否则如果使用 构建缓存实例`$cacheFactory`，则使用该缓存进行缓存。

示例用法：

```
app.factory('Todos', function($resource, $cacheFactory) {
    var todosCache = $cacheFactory('Todos');
    return $resource(apiBaseUrl + '/todos/:id', {id: '@id'}, {
        'get': { method:'GET', cache: todosCache},
        'query': { method:'GET', cache: todosCache, isArray:true }
    });
}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-16T03:18:56.487

这似乎没有在这里提到，但您也可以覆盖默认方法。

```
app.factory("List", ["$resource", function($resource) {
    return $resource("./lists/:path/:action.json", {}, {
        get: {
            method: "GET",
            cache: true
        }
    });
}]); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-04-15T12:33:05.433

您还可以为 $http 设置默认缓存，从而为基于它的 $resource 设置默认缓存。

我的设置具有出色的[角度缓存](https://github.com/jmdobry/angular-cache)，允许 LocalStorage 并符合 $cacheFactory：

```
app.run(function($http, DSCacheFactory) {

    DSCacheFactory('defaultCache', {
        deleteOnExpire: 'aggressive',
        storageMode: 'localStorage' 
    });

    $http.defaults.cache = DSCacheFactory.get('defaultCache');
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T08:05:46.660

查看 angular-resource 源表明以当前编写的方式无法触发缓存。

这是来自源的请求对象：

```
$http({
    method: action.method,
    url: route.url(extend({}, extractParams(data), action.params || {}, params)),
    data: data
 }).then(...) 
```

有一些潜在的方法可以解决这个问题。

首先，您可以使用客户端持久性在本地缓存。我使用带有包装器的[amplify.store](http://amplifyjs.com/api/store/)（b/c 我不太喜欢 API 语法）。根据您要查找的内容以及您的目标浏览器，还有多种其他存储解决方案。也有不少人使用[草坪椅](http://brian.io/lawnchair/)。

然后，您可以在本地对模型进行字符串化和存储，并根据您想要的任何规则或时间限制对其进行更新。

另一种解决方案是简单地修改角度资源以接受您正在寻找的参数。这可以很简单（只需向 $resource 添加一个附加参数）或复杂到您需要的程度。

例如

```
function ResourceFactory(url, paramDefaults, actions, cache) {
   ...
   var cache = cache != null ? cache : false; // Set default to false
   $http({
        method: action.method,
        url: route.url(extend({}, extractParams(data), action.params || {}, params)),
        data: data,
        cache: cache
    }).then(...)       
} 
```

最后，根据您的要求，使用 angular.factory 创建服务可能更容易创建自己的资源。ngResource 的优点之一是在转换参数时所有的字符串插值都为您工作。但是，如果需要，您当然可以使用此逻辑进行解析，或者根据您使用的模型编写自己的逻辑。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-10T03:13:53.273

我刚刚遇到了这个经过深思熟虑的模块，称为 angular-cached-resource，它将为您完成这项工作。[https://github.com/goodeggs/angular-cached-resource](https://github.com/goodeggs/angular-cached-resource)

它是 $resource 的替代品，增加了使用 localStorage 进行缓存管理的功能。如果您的浏览器不支持本地存储，您将不会获得任何缓存优势。这是一个如何使用它的示例：

**使用 $resource 的旧方法：**

```
var Entry = $resource('/entries/:slug', {slug: '@slug'});

var announcement = new Entry();
announcement.slug = 'announcing-angular-cached-resource';
announcement.title = 'Announcing Angular Cached Resource';
announcement.body = 'Here is why Angular Cached Resource is awesome!';

announcement.$save(function() {
  alert('Saved announcement.');
}); 
```

**使用 $cachedResource 的新方法：**

```
var Entry = $cachedResource('entries', '/entries/:slug', {slug: '@slug'});

var announcement = new Entry();
announcement.slug = 'announcing-angular-cached-resource';
announcement.title = 'Announcing Angular Cached Resource';
announcement.body = 'Here is why Angular Cached Resource is awesome!';

announcement.$save(function() {
  alert('Saved announcement.');
}); 
```

代码中的唯一区别是：

1.  使用 $cachedResource 而不是 $resource
2.  提供一个“密钥”（`entries`在上面的示例中），以便您即使在页面刷新或重新加载之间也可以引用它。这些条目一直存在，因为它使用 localStorage 开箱即用。

此处提供详细教程：[https ://github.com/goodeggs/bites/blob/master/src/documents/open_source/2014-04-24-angular-cached-resource.md](https://github.com/goodeggs/bites/blob/master/src/documents/open_source/2014-04-24-angular-cached-resource.md)

另请注意，Angular 2.0 可能支持开箱即用的内容：[https ://docs.google.com/document/d/1DMacL7iwjSMPP0ytZfugpU4v0PWUK0BT6lhyaVEmlBQ/edit](https://docs.google.com/document/d/1DMacL7iwjSMPP0ytZfugpU4v0PWUK0BT6lhyaVEmlBQ/edit)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-19T20:06:48.533

我正在使用 angular-resource 1.5.5 并按以下方式设置我的代码：

### 概括

将*action*设置为**query**，并且由于 "query" 动作期望将响应反序列化为数组，因此需要将 isArray 显式设置为 true。我的理解是默认情况下 ngResource 操作期望除查询之外的对象。 [看这里](https://docs.angularjs.org/error/$resource/badcfg)

**控制器**

```
angular.module("app")
    .controller('myCtrl',['$scope','myService',function($scope, myService) {
        $scope.myData= myService.myResource.query();
    }]); 
```

**服务**

```
angular.module('app')
    .factory('myService',['$resource',function($resource){
        var baseUrl = 'http://www.MyExample.com/';
        return{
            myResource:$resource(baseURL + '/myEndpoint/:id', {id:'@id'},{
                'query':{
                    method:'GET',
                    cache:'true',
                    isArray:true
                }}),
        }
    }]); 
```

# android - Admob 广告显示在 Jelly Bean 上的按钮上

> ID：12225478
> 
> 赞同：0
> 
> 时间：2012-09-01T06:32:26.963
> 
> 标签：android, admob, android-4.2-jelly-bean

当我注意到 Admob 广告（Admob SDK 6.1.0）显示在应用程序的按钮顶部时，我正在测试应用程序与 Jelly Bean 的兼容性。我使用的布局是：

```
 <ImageView android:id="@+id/line"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/spinner"
            android:maxWidth="350sp"
            android:layout_marginTop="5dip"
            android:layout_centerHorizontal="true"
            android:src="@drawable/line"/>
        <View android:id="@+id/ad" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:layout_below="@id/line"
            android:layout_marginTop="5dip"
            android:layout_marginBottom="5dip"/>
        <Button android:id="@+id/generate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/ad"
            android:layout_centerHorizontal="true"
            android:textStyle="bold"
            android:textColor="#000000"
            android:text="@string/generate"/> 
```

发生的情况是，当广告加载时，它会显示在按钮的顶部。在以前的 Android 版本（ICS 和更早版本）中，会加载广告并按下按钮以容纳广告。有谁知道如何在 Jelly Bean 上恢复此功能？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T20:24:57.130

我对这个问题的解决方案是实现 AdListener 接口，以便在加载广告时手动设置按钮的上边距。这会将按钮向下移动并防止它被广告覆盖。

```
@Override
public void onReceiveAd(Ad arg0) {      
    // Move the generate button down by the height of the ad on load
    MarginLayoutParams params = (MarginLayoutParams)generateBtn.getLayoutParams();
    params.topMargin = AdSize.BANNER.getHeightInPixels(this);
    generateBtn.setLayoutParams(params);
} 
```

并且由于这个问题只发生在 Jelly Bean 上，如果在 Jelly Bean 上运行，只设置 AdListener

```
if(Build.VERSION.SDK_INT == Build.VERSION_CODES.JELLY_BEAN)
    ad.setAdListener(this); 
```

# php - .htaccess url 重写不返回整个 URL

> ID：12225479
> 
> 赞同：0
> 
> 时间：2012-09-01T06:32:53.587
> 
> 标签：php, regex, apache

.htacess 我用过的规则——

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/\.]+)/?$ profile.php?user=$1 [L]
RewriteRule  ^(.*)$ profile.php?user=$1 [QSA,NE] 
```

正确的例子——

```
http://mydomain.com/http://fatalweb.com/articles/8/definitions-for-htaccess-regex-character 
```

传递给 $1 的值是 -`http://fatalweb.com/articles/8/definitions-for-htaccess-regex-character`

```
http://mydomain.com/https://www.google.com/search?q=_get&ie=utf-8&oe=utf-8&aq=t 
```

传递给 $1 的值是 -`https:/www.google.com/search`

我如何确保将整个 url`https://www.google.com/search?q=_get&ie=utf-8&oe=utf-8&aq=t`以及所有查询参数传递给 $1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:37:54.623

在你的问题中，是`https:/www.google.com/search`吗？`https:/`缺失后有一个斜线。

在您打算使用空文件处理程序之前，您需要指定至少一个规则。不知道为什么，但这就是它的工作方式。检查一下您的用例：

```
RewriteEngine On
RewriteRule ^([^/]*)\.dummy$ ./?dummy=$1&%{QUERY_STRING} [L]
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*)$ ./%{QUERY_STRING} 
```

这条线`RewriteRule ^([^/]*)\.dummy$ ./?dummy=$1&%{QUERY_STRING} [L]`是假的。检查并查看这是否适合您！:)

# android-intent - 通过 Intent 打开 pdf 文件会出错

> ID：12225486
> 
> 赞同：1
> 
> 时间：2012-09-01T06:34:28.303
> 
> 标签：android-intent

我想打开我已经下载到我的 sd 卡上的 pdf 文件。但是当通过 Intent 打开该文件时，它给了我错误，因为没有找到处理这个意图的活动。我想通过 pdf 阅读器或任何其他方式在我的应用程序中打开 pdf。如果可能的话，建议我更好的解决方案来打开 pdf。

```
 PackageManager packageManager = getPackageManager();
    Intent pdf= new Intent(Intent.ACTION_MAIN);
                                    pdf.addCategory("android.intent.category.LAUNCHER");
                                    pdf.setPackage("com.adobe.reader");
                                    pdf.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                    pdf.setDataAndType(Uri.fromFile(pdfPath),"application/pdf");
pdf.setData(Uri.parse( Environment.getExternalStorageDirectory().toString() + "/downloadedfile.pdf")); 
```

请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:32:16.880

嘿，我在这里找到了解决方案。我在 Adob​​e pdf 阅读器中打开它。如果未安装 adobe reader，我将重定向到 google play。

```
private void viewPdf(Uri file){
    Intent intent;
    intent = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(file, "application/pdf");
    try{
    startActivity(intent);
    }catch(ActivityNotFoundException e){
    AlertDialog.Builder builder = new AlertDialog.Builder(getApplicationContext());
    builder.setTitle("No Application Found");
    builder.setMessage("Download from Android Market?");
    builder.setPositiveButton("Yes, Please", new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
    // TODO Auto-generated method stub

    Intent marketIntent = new Intent(Intent.ACTION_VIEW);
    marketIntent.setData(Uri.parse("market://details?id=com.adobe.reader"));
    startActivity(marketIntent);

    }
    });
    builder.setNegativeButton("No, Thanks", null);
    builder.create().show();

    } 
```

# performance - IE9中奇怪的网站加载重定向问题

> ID：12225487
> 
> 赞同：0
> 
> 时间：2012-09-01T06:34:39.333
> 
> 标签：performance, internet-explorer-9

我运行和管理网站[http://onedirection.net](http://onedirection.net)，最近我们花了很多时间试图提高网站的加载速度。网站上有很多内容需要加载时间，但其他一切都很顺利。

在 Chrome 中，我们对加载速度非常满意，但在 IE9 中似乎没有那么好。事实上，当我们加载主页时，它似乎暂停了一段时间，但更糟糕的是，当我单击并按住返回按钮时，我可以看到初始页面加载后大约 6-7 次重定向！

这是什么原因造成的？该网站上没有重定向，但看起来社交媒体链接和一些广告正在引起奇怪的问题。

我以前从未见过这个，所以我有点难过！

此外，网站底部的聊天栏无法在主页上正确加载，但在其他页面上会正常加载。

任何人都可以阐明导致这些问题的原因，以及更好的解决方法吗？

谢谢，

克里斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T18:54:20.967

老实说，Chrome 的性能并没有那么好——从我的家庭连接来看，该页面需要 11 秒才能在 Chrome 中加载。

这是来自都柏林服务器的 IE9 主页的瀑布 - [http://www.webpagetest.org/result/120901_NC_f64ed067693fda62238e67cce432f964/1/details/](http://www.webpagetest.org/result/120901_NC_f64ed067693fda62238e67cce432f964/1/details/)

老实说，瀑布非常可怕——请求太多，域太多，内容没有优先级，头部的 javascript 以阻塞方式加载

我需要更深入地研究，但本质上是由于您失去了对页面加载控制的第三方组件的数量。

# objective-c - 使用 XCodeConfig 设置禁用 Objective C ARC

> ID：12225488
> 
> 赞同：3
> 
> 时间：2012-09-01T06:34:39.523
> 
> 标签：objective-c, ios, xcode, automatic-ref-counting, llvm

使用技巧在 XCode 中关闭 ARC 很容易`Build Phases`，但是是否可以指定使用`XCodeConfig`？

在我看来，使用 XCodeConfig 方法（如果可能）更灵活。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T06:56:44.227

ARC 已隐式关闭。

您*可以*将其添加到您的 xcconfig 中：

`CLANG_ENABLE_OBJC_ARC = NO`

*但是*您仍然会遇到项目/目标/文件本地构建设置覆盖该行为的问题。您应该能够 grep 您的 Xcode 项目`CLANG_ENABLE_OBJC_ARC`并`objc-arc`找到它实际启用的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T06:59:05.877

您可以使用以下选项在 .xcconfig 文件中打开或关闭 ARC：

```
CLANG_ENABLE_OBJC_ARC = NO 
```

# java - 使用 JAVA 访问 MS Outlook

> ID：12225489
> 
> 赞同：4
> 
> 时间：2012-09-01T06:34:47.513
> 
> 标签：java, api, com, interface, outlook

我想创建一个 JAVA 应用程序，它可以访问我的 MS Outlook 并从一些收到的邮件中下载附件。我无法直接访问 MS Exchange 服务器，因此我计划连接到机器上安装的 MS Outlook 的本地副本，然后从那里访问文件夹和邮件。

问题是我无法从我的 java 应用程序中获得任何好的开源库来连接到 Outlook。经过大量研究，我发现它可以使用[JACOB](http://sourceforge.net/projects/jacob-project/files/latest/download)完成，但它看起来像一个旧库，我不确定是否应该使用它。有什么建议/想法来完成它吗？我不允许直接连接到 Microsoft Exchange Server，所以 JAVAMAIL 没有用..:( 我也得到了这个[代码片段](http://sourceforge.net/projects/jacob-project/forums/forum/375945/topic/3822393)，但我无法从中做出任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-09T15:29:58.500

Aspose.Email 也有帮助，但它**不是**开源的。我还没有尝试过它的前景部分。 [http://www.aspose.com/java/total-component.aspx](http://www.aspose.com/java/total-component.aspx)

# java - java.nio.charset.IllegalCharsetNameException: 'ISO-8859-1'

> ID：12225494
> 
> 赞同：2
> 
> 时间：2012-09-01T06:35:39.360
> 
> 标签：java, url, exception, character-encoding, jsoup

```
Jsoup.connect("http://www.design.cmu.edu/community.php?s=3").get(); 
```

有人可以告诉我为什么代码给了我错误：

```
java.nio.charset.IllegalCharsetNameException: 'ISO-8859-1' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T07:18:26.203

问题出在目标页面中。它根本不是格式良好的。

解析页面时，JSoup 尝试修复页面，一方面，将内容类型解析为“text/html; charset='iso-8859-1'”（包括单引号）。

然后它传递这个字符串（带单引号）并使用它来获取字符集：

```
Charset.forName("'ISO-8859-1'"); 
```

失败了。

问题出在目标页面中。也许您可以改用此替代方法，它不会从页面解析字符集，因为您明确地将其传递：

```
String url = "http://www.design.cmu.edu/community.php?s=3";
Document document = Jsoup.parse(new URL(url).openStream(), "ISO-8859-1", url); 
```

# c# - 我可以在没有用户交互的情况下安装 .exe 文件吗

> ID：12225497
> 
> 赞同：0
> 
> 时间：2012-09-01T06:36:14.680
> 
> 标签：c#, installation, exe, silent

我可以在没有用户交互的情况下安装 .exe 文件吗（意味着无需单击下一步或安装按钮）
我已经编写了调用 .exe 文件的代码，但是它不会在后台静默安装。

```
Process p = new Process();
p.StartInfo.FileName = @"C:\Downloads\teamViewer.exe";
p.StartInfo.Arguments = "/S";
p.Start();
p.StartInfo.CreateNoWindow = true;
p.WaitForExit(); 
```

为什么exe不能在后台运行，这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:34:56.397

您可以使用从网站下载的 EXE 进行静默安装。

你必须使用它提取到你的

> %temp%\TeamViewer\VersionX\TeamViewer_.exe

从版本 7 开始`%temp%\TeamViewer\Version7\TeamViewer_.exe`。这个支持这个`/S`论点，但还有另一个问题：UAC 确认对话框，据我所知，你不能用代码绕过它（除非你的应用程序已经以管理员权限运行。你可以为此使用应用程序清单）。

# jsf - 是否可以在不使用 java servlet 的情况下设计 Java EE Web 应用程序？JSF 和 Facelets 是替代品吗？

> ID：12225501
> 
> 赞同：0
> 
> 时间：2012-09-01T06:36:38.760
> 
> 标签：jsf, servlets, facelets

是否可以在不使用 Java servlet 的情况下设计 Java EE Web 应用程序？JSF 和 Facelets 是替代品吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T07:54:18.900

我想你需要完善你的背景来理解servlet和jsp和jsf之间的关系。可以看一下 BalusC 的精彩帖子“ [JSF、JSP 和 Servlet 有什么区别？](https://stackoverflow.com/questions/2095397/what-is-the-difference-between-jsf-servlet-and-jsp) ”

JSF 页面构建在 servlet 之上，例如 JSF 提供 FacesServlet 作为请求响应控制器。在不了解它们的情况下，您可以编写 Web 应用程序。

另一方面，每个 Jsf 版本都需要一个 servlet 版本。例如，jsf 2.0 及更高版本需要 servlet 3.0 规范，并且应该向后兼容 Servlet 2.5。

# delphi - Delphi - 字节数组 [0..693] - 到 B64 编码字符串

> ID：12225505
> 
> 赞同：3
> 
> 时间：2012-09-01T06:37:11.520
> 
> 标签：delphi, bytearray, base64, delphi-xe2

我的代码中有一个声明的变量，如下所示：

```
Var
   VarName:Array[0..693] of Byte = ( and my array here ); 
```

我的用途中有 EncdDecd..

我希望使用 EncdDecd.pas 中的 EncodeBase64 函数将此字节数组编码为 base64 字符串

但我不确定如何将它返回为一个漂亮漂亮的 b64 字符串，该字符串可以使用 DecodeBase64 直接转换回字节数组......

我尝试了几种不同的方法..

```
Var Res:PWideChar;
begin
    StringToWideChar(EncodeBase64(@VarName, 693), Res, 693);
    ClipBoard.SetTextBuf(Res);
end; 
```

使用该代码访问冲突...

也试过：

```
begin
    ClipBoard.SetTextBuf(PWideChar(EncodeBase64(@VarName, 693)));
end; 
```

它返回一个充满扭曲的中文符号的字符串......

任何有关返回此字符串的帮助将不胜感激..

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T07:41:15.740

函数声明为

```
function  DecodeBase64(const Input: AnsiString): TBytes;
function  EncodeBase64(const Input: Pointer; Size: Integer): AnsiString; 
```

所以你在 Unicode Delphi 中需要的只是将 AnsiString 转换为字符串，

```
var S: string;

begin
  S:= string(EncodeBase64(@VarName, 693));
  .. 
```

要解码 S，您应该将其转换为 AnsiString：

```
var B: TBytes;

begin
  B:= DecodeBase64(AnsiString(S));
  .. 
```

# ember.js - Ember.js - 未捕获的类型错误：无法读取未定义的属性“哈希”

> ID：12225507
> 
> 赞同：2
> 
> 时间：2012-09-01T06:37:20.287
> 
> 标签：ember.js

我有一个 ember.js 原型，到目前为止它运行良好。自从我上次部署以来，我一直收到错误 Uncaught TypeError: Cannot read property 'hash' of undefined。

app.js 文件

```
// Application
Welcome = Ember.Application.create({
    ready : function() {
    }
});

// Model
Welcome.Ticket = Ember.Object.extend({
    id : null,
    buyerPartyId : null,
    name : null,
    priority : null,
    description : null,
    comment : null
}); 

// Controller
Welcome.ticketsController = Ember.ArrayController.create({
    content : [],

    loadTickets : function() {
        var self = this;
        $.getJSON('url here', function(
                data) {
            for ( var i = 0; i < data.serviceRequest.length; i++) {
                self.pushObject(Welcome.Ticket.create(data.serviceRequest[i]));
            }
        });
    }
}); 
```

索引.html

```
<!doctype html>
<html>
<head>
<title>Ticket List</title>
<link rel="stylesheet" href="css/normalize.css">
<script
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="js/libs/ember-0.9.5.min.js"></script>
<script src="js/app.js"></script>
</head>
<body>
    <h1>Ticket List</h1>
    <script type="text/x-handlebars">
    {{#view Ember.Button target="Welcome.ticketsController" action="loadTickets"}}
        Load Tickets
    {{/view}}

    {{#each contentBinding="Welcome.ticketsController" tagName="ul"}}
        <b>{{content.id}}</b> - {{content.buyerPartyId}}, <i>{{content.name}}</i>
    {{/each}}
</script>
</body>
</html> 
```

我确信我忽略了一些简单的东西！任何建议，将不胜感激 ！！

这是来自 Chrome 开发控制台的错误堆栈。

```
Uncaught TypeError: Cannot read property 'hash' of undefined ember-0.9.5.min.js:13
(anonymous function) ember-0.9.5.min.js:13
(anonymous function)
b.VM.template ember-0.9.5.min.js:9
Ember.View.Ember.Object.extend.render ember-0.9.5.min.js:12
Ember.View.Ember.Object.extend.renderToBuffer ember-0.9.5.min.js:12
Ember.View.Ember.Object.extend.createElement ember-0.9.5.min.js:12
Ember.View.states.preRender.insertElement ember-0.9.5.min.js:12
Ember.View.Ember.Object.extend.invokeForState ember-0.9.5.min.js:12
c ember-0.9.5.min.js:10
j ember-0.9.5.min.js:10
f.flush ember-0.9.5.min.js:10
f.end ember-0.9.5.min.js:10
Ember.run.end ember-0.9.5.min.js:10
i ember-0.9.5.min.js:10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:46:36.750

AFAIK，`{{each}}`您需要直接提供控制器。就像是：

```
{{#each Welcome.ticketController}}
{{/each}} 
```

看看这个 jsFiddle [http://jsfiddle.net/lifeinafolder/nVr4r/](http://jsfiddle.net/lifeinafolder/nVr4r/)。它不再抛出错误。

“加载门票”按钮将无法使用，因为您还没有网址。

Emberjs documentation has a couple of examples using `{{each}}` too. You should take a look.

Also, you might wanna update your emberjs. In the ember world, 0.9.5.min is pretty old :)

# tcl - TCL：通过 SHELL 环境变量检查文件是否存在（另一个）

> ID：12225508
> 
> 赞同：1
> 
> 时间：2012-09-01T06:37:33.173
> 
> 标签：tcl

我有一个文件包含带有文件路径的行。有时路径包含 SHELL 环境变量，我想检查文件是否存在。以下是我的解决方案：

```
set fh [open "the_file_contain_path" "r"]

while {![eof $fh]} { 
  set line [gets $fh]
  if {[regexp -- {\$\S+} $line]} {
    catch {exec /usr/local/bin/tcsh -c "echo  $line" } line
      if {![file exists $line]} {
        puts "ERROR: the file $line is not exists"
      }
  }
} 
```

我确定有更优雅的解决方案而不使用

*/usr/local/bin/* tcsh *-c*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T12:12:37.073

您可以在 regexp 命令中捕获变量名称并在 Tcl 的全局`env`数组中进行查找。此外，您使用`eof`while 条件意味着您的循环将多次交互（请参阅[http://phaseit.net/claird/comp.lang.tcl/fmm.html#eof](http://phaseit.net/claird/comp.lang.tcl/fmm.html#eof)）

```
set fh [open "the_file_contain_path" "r"]

while {[gets $fh line] != -1} { 
  # this can handle "$FOO/bar/$BAZ"
  if {[string first {$} $line] != -1} {
    regsub -all {(\$)(\w+)} $line {\1::env(\2)} new
    set line [subst -nocommand -nobackslashes $new]
  }

  if {![file exists $line]} {
    puts "ERROR: the file $line does not exist"
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T10:12:05.703

首先，通常更容易（对于小文件，比如不超过 1-2MB）读取整个文件并将其读取到行中，而不是在循环`split`中使用`gets`and 。（命令非常快。）`eof``while``split`

其次，要进行替换，您需要字符串中要替换的位置，因此您使用`regexp -indices`. 这确实意味着您需要采取更复杂的方法来进行替换，`string range`并`string replace`完成一些工作。假设您使用的是 Tcl 8.5……</p>

```
set fh [open "the_file_contain_path" "r"]

foreach line [split [read $fh] "\n"] {
    # Find a replacement while there are any to do
    while {[regexp -indices {\$(\w+)} $line matchRange nameRange]} {

        # Get what to replace with (without any errors, just like tcsh)
        set replacement {}
        catch {set replacement $::env([string range $line {*}$nameRange])}

        # Do the replacement
        set line [string replace $line {*}$matchRange $replacement]
    }

    # Your test on the result
    if {![file exists $line]} {
        puts "ERROR: the file $line is not exists"
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T07:44:09.433

TCL 程序可以使用内置的全局变量读取环境变量`env`。阅读该行，查找`$`后跟名称，查找`$::env($name)`，并将其替换为变量。

如果文件是由不受信任的用户提供的，那么使用 shell 会非常糟糕。如果他们把`; rm *`文件放进去怎么办？如果你要使用 shell，你至少应该使用 sh 或 bash，而不是 tcsh。

# php - 在php中查询字符串到数组

> ID：12225511
> 
> 赞同：0
> 
> 时间：2012-09-01T06:37:45.080
> 
> 标签：php, arrays, multidimensional-array

请求参数

```
 name=form1

    &settings={"en":{"name":"Form 1","classes":["leftAlign"],"heading":"h2","styles":{"fontFamily":"default","fontSize":"default","fontStyles":[1,0,0]}},"styles":{"color":"default","backgroundColor":"default"}}

    &fields[0].id=null&fields[0].name=password1&fields[0].type=Password&fields[0].settings={"en":{"label":"Password 1","value":"","description":"","styles":{"fontFamily":"default","fontSize":"default","fontStyles":[0,0,0]}},"_persistable":true,"required":true,"restriction":"no","styles":{"label":{"color":"default","backgroundColor":"default"},"value":{"color":"default","backgroundColor":"default"},"description":{"color":"777777","backgroundColor":"default"}}}&fields[0].sequence=0&fields[0].status=

........ 
```

我需要将其转换为数组输出。我使用了几种方法将查询字符串解析为数组。这是我得到的输出。但未显示数组“字段”值。还有其他方法可以得到吗？字段 [0]、字段 [1] 和字段 [2] 具有键和值但未显示。

```
Array
(
    [name] => form1
    [settings] => {"en":{"name":"Form 1","classes":["leftAlign"],"heading":"h2","styles":{"fontFamily":"default","fontSize":"default","fontStyles":[1,0,0]}},"styles":{"color":"default","backgroundColor":"default"}}
    [fields] => Array
        (
            [0] => 
            [1] => 
            [2] => 
        )

    [create] => Create
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:27:20.630

**更新代码**

```
$query = 'name=form1'
        . '&settings={"en":{"name":"Form 1","classes":["leftAlign"],"heading":"h2","styles":{"fontFamily":"default","fontSize":"default","fontStyles":[1,0,0]}},"styles":{"color":"default","backgroundColor":"default"}}'
        . '&fields[0].id=null&fields[0].name=password1&fields[0].type=Password&fields[0].settings={"en":{"label":"Password 1","value":"","description":"","styles":{"fontFamily":"default","fontSize":"default","fontStyles":[0,0,0]}},"_persistable":true,"required":true,"restriction":"no","styles":{"label":{"color":"default","backgroundColor":"default"},"value":{"color":"default","backgroundColor":"default"},"description":{"color":"777777","backgroundColor":"default"}}}&fields[0].sequence=0&fields[0].status='
        //adding fields[1]
        . "&fields[1].id=null&fields[1].name=f1name&fields[1].type=f1type";

$resultArray = array();
foreach (explode('&', $query) as $pair) {
    list($key, $value) = explode('=', $pair);

    //a dot present
    if (strpos($key, '.') !== false) {
        list($subKey, $subVal) = explode('.', $key);

        if (preg_match('/(?P<name>\w+)\[(?P<index>\w+)\]/', $subKey, $matches)) {
            $resultArray[$matches['name']][$matches['index']][$subVal] = $value;
        } else {
            $resultArray[$subKey][$subVal] = $value;
        }
    } else {
        $resultArray[$key] = $value;
    }
}

echo '<pre>' . print_r($resultArray, true) . '</pre>'; 
```

**输出**：

```
Array
(
    [name] => form1
    [settings] => {"en":{"name":"Form 1","classes":["leftAlign"],"heading":"h2","styles":{"fontFamily":"default","fontSize":"default","fontStyles":[1,0,0]}},"styles":{"color":"default","backgroundColor":"default"}}
    [fields] => Array
        (
            [0] => Array
                (
                    [id] => null
                    [name] => password1
                    [type] => Password
                    [settings] => {"en":{"label":"Password 1","value":"","description":"","styles":{"fontFamily":"default","fontSize":"default","fontStyles":[0,0,0]}},"_persistable":true,"required":true,"restriction":"no","styles":{"label":{"color":"default","backgroundColor":"default"},"value":{"color":"default","backgroundColor":"default"},"description":{"color":"777777","backgroundColor":"default"}}}
                    [sequence] => 0
                    [status] => 
                )

            [1] => Array
                (
                    [id] => null
                    [name] => f1name
                    [type] => f1type
                )

        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T07:10:20.130

```
<?php
 $a = explode('&', $QUERY_STRING); 
 $i = 0; 
 $field = array();
 while ($i < count($a)) {
    $b = split('=', $a[$i]); 
    field[i]= htmlspecialchars(urldecode($b[1])); 
    $i++;
 } ?> 
```

# php - 计算并列出某一行中的所有人

> ID：12225513
> 
> 赞同：0
> 
> 时间：2012-09-01T06:37:53.843
> 
> 标签：php, mysql, count

好的，我正在尝试计算氏族中的人数。我将所有氏族发送到这样的数据库中：名称（氏族名称） roomOwner（氏族所有者） 我有一个这样的用户表：用户名，氏族（氏族所有者） 我怎样才能得到所有拥有同一个氏族和数？我想它会是这样的，但我不确定atm

```
 function countMembers($clan) {
    include "mysql.ws";
    $query = mysql_query("SELECT u.clan AS clan, a.*
FROM
  users u
  JOIN clans a ON(a.roomOwner = u.clan)
WHERE
 u.username = '$clan'");
    while($row = mysql_num_rows($query)){
        $members = count($row);
            return $row;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:42:47.387

这应该有效：

```
select clan, count(username) as "# Of Members" 
from users 
where clan is not null
group by clan 
```

# c# - 计算学生平均分（不同系数）

> ID：12225518
> 
> 赞同：-1
> 
> 时间：2012-09-01T06:38:54.110
> 
> 标签：c#, asp.net, sql, average

我必须计算学生的平均成绩。

学生有两个不同的分数：期中和期末。

```
first course average = ( (midterm score*1) + (Final score*2) ) / 3 ) 
```

ASP.NET (C#) 和 SQL 如何做到这一点？

这让我很困惑。哪个部分应该用 C# 或 SQL 编写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T06:45:36.593

取决于 SQL 的风格 您可以通过简单地创建一个新列 'first course average' 来在 SQL 中完成这一切。假设您有一张桌子，每个学生都有一条记录

```
SELECT ([Midterm Score] + (2 * [Final Score])) / 3 AS 'first course average'
FROM #gradeTable 
GROUP BY [Student ID] 
```

您也可以使用 C# 中的 LINQ 库，但鉴于本练习的简单性，这确实没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T06:41:33.093

分数将全部存储在 sql 数据库中。您还可以使用专门的查询在 Sql 中进行计算。在这种情况下，最简单的方法是检索分数并用 c#（或任何其他编程语言）进行计算。我喜欢 python 和 php，但一切都在它的位置。

这是否回答你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T06:46:26.197

您可以像这样直接从 SQL 计算：

```
SELECT ((Midterm + (Final*2))/3) AS First_Course_Average FROM Scores WHERE ... 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!2/163fc/2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T07:27:43.917

您也可以通过在公式部分中编写它来做到这一点。可以在列属性中找到。

# php - php不解析的脚本源文件

> ID：12225519
> 
> 赞同：0
> 
> 时间：2012-09-01T06:39:11.177
> 
> 标签：php, javascript, html, css

我有一个出现在我所有页面上的菜单。它包含用于将文件名传递给 url 的 php，如下所示。这是一个片段...

```
document.write('<li><a href="somefile.php?folder=<?php echo "_abc"; ?>">abc</a></li>');
document.write('<li><a href="somefile.php?folder=<?php echo "_def"; ?>">def</a></li>');
document.write('<li><a href="somefile.php?folder=<?php echo "_ghi"; ?>">ghi</a></li>'); 
```

它包括 css 并且工作正常。我已将菜单保存为单独的 .js 文件并使用...

```
<script src="js/menucss.js"></script> 
```

...从我希望它出现的每个页面加载它。菜单显示并且 css 工作正常 - 但是 php 不解析并且页面显示 php 标记。我究竟做错了什么？

提前致谢。尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:44:05.220

你不应该那样做。

在某处保存一个名为`menu.php`保存的页面，其中包括：

```
<ul>

    <li><a href="somefile.php?folder=<?php echo "_abc"; ?>">abc</a></li>
    <li><a href="somefile.php?folder=<?php echo "_def"; ?>">def</a></li>
    <li><a href="somefile.php?folder=<?php echo "_ghi"; ?>">ghi</a></li>

</ul> 
```

然后在服务器端包含它（index.php）：

```
<html>
<head>
    <title></title>
</head>
<body>
<header>
    <?php include("main.php"); ?>
</header>
</body>
</html> 
```

这种方法要优越得多：

*   它不需要额外的请求来获取数据。
*   数据加载不会出现闪烁或尴尬的时刻，菜单看起来就像您已将其直接编码到页面中一样。
*   它要快得多。
*   它不使用 JavaScript，客户端可以选择禁用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T06:48:12.303

您遇到的问题可能是由于您尝试在`.js`文件上运行 PHP，而您的服务器未配置它。

将文件的扩展名更改为`.php`并使用：

```
<script src="js/menucss.php"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T06:42:37.460

您混淆了服务器端和客户端。PHP 是关于服务器端的，PHP 代码是在服务器上解释的。JavaScript是关于客户端的，当用户已经获得html页面时，JavaScript会运行，因此当您通过JavaScript在客户端的html中动态添加php时，它无法运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T06:45:59.230

据我了解，我认为您正在尝试在 .js 文件中运行 PHP。
您应该将该代码包含在 PHP 文件中。

# python - django：如果未设置选择字段值，则 request.POST 键为空

> ID：12225520
> 
> 赞同：0
> 
> 时间：2012-09-01T06:40:02.453
> 
> 标签：python, django, web-applications

我目前正在使用 django 开始 Web 开发。在我的应用程序中，我想要一个包含各种问题及其选择的表格。

在*models.py*中，创建了一个表来存储问题

```
class QuizItems(models.Model):
    question = models.CharField(max_length=255)
    choices = SeparatedValuesField(token="$")
    answer = models.IntegerField() 
```

在*form.py*中，我重载了 Form 类中的 __init__ 方法，以便传递 qchoose，一个 QuizItems 实例列表来创建表单字段。

```
def choiceItem(question):
    return [(unicode(idx), q) for idx, q in enumerate(question.choices)] 

class QuizForm(forms.Form):
    def __init__(self, qchoose, *args, **kwargs):
        super(QuizForm, self).__init__(*args, **kwargs)
        for q in qchoose:
            self.fields[str(q.id)] = forms.ChoiceField(required=True,
              label=q.question, widget=forms.RadioSelect(),choices=choiceItem(q)) 
```

然后在*view.py*

```
if request.method == 'POST':
    idlst = request.POST.keys()
else:
    # qchoose is a list of quizitems
    form = QuizForm(qchoose) 
```

在*quiz.html 中*

```
{% for field in form %}
<li><b> {{ field.label }} </b></li>                                                                                                                      
<ul> {{ field }} </ul>
{% endfor %} 
```

我想得到 idlst，即问题 id 列表，我可以从中得到正确答案。当所有选择字段都填满时，它工作正常。问题是如果有任何选择字段的值为空，我将不会得到它的键。我认为由于 request.POST 是一个字典，即使它的值为空，它也应该返回所有键。

谁能帮我我的代码有什么问题或缺少什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:24:05.273

您也应该在 POST 上使用该表单，然后调用`is_valid()`并访问该表单的`cleaned_data`字典。

# c++ - 如果没有必要，是否应该使用无符号整数？

> ID：12225521
> 
> 赞同：20
> 
> 时间：2012-09-01T06:40:09.853
> 
> 标签：c++, language-agnostic, types

如果不需要额外的值范围，是否应该将变量声明为无符号整数？例如，在 for 循环中声明变量时，如果您知道它不会是负数，这有关系吗？一个比另一个快吗？像 C++ 中的 unsigned 一样声明 unsigned int 是不是很糟糕？

**重申一下，即使不需要额外的范围也**应该这样做吗？我听说应该避免使用它们，因为它们会引起混淆（IIRC 这就是 Java 没有它们的原因）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-01T06:40:59.697

当无符号整数具有负值没有意义时，您应该使用它们。这完全独立于范围问题。**所以是的，即使不需要额外的范围**，你也应该使用无符号整数类型，不，如果没有必要，你不应该使用`unsigned int`s （或其他任何东西），但是你需要修改你对什么是必要的定义。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-01T07:05:34.773

使用 uints 的原因是它为编译器提供了更广泛的优化。例如，如果它知道 x 是正数，它可以用 'x' 替换 'abs(x)' 的实例。它还开辟了各种仅适用于正数的按位“强度减少”。如果您总是将一个 int 乘以/除以 2 的幂，那么编译器可能会用位移（即 x*8 == x<<3）替换该操作，这往往会执行得更快。不幸的是，这种关系仅在“x”为正时才成立，因为负数的编码方式排除了这种情况。对于整数，如果编译器可以证明该值始终为正（或者可以在代码中更早地修改为正），则编译器可能会应用此技巧。在 uints 的情况下，这个属性很容易证明，

另一个例子可能是方程`y = 16 * x + 12`。如果 x 可以为负数，则需要进行乘法和加法。然而，如果 x 总是正数，那么不仅 x*16 项可以用 x<<4 代替，而且由于该项总是以四个零结尾，这就打开了用二进制 OR 代替“+ 12”（只要因为“12”项小于 16）。结果将是`y = (x<<4) | 12`。

通常，“无符号”限定符为编译器提供了有关变量的更多信息，这反过来又允许它进行更多优化。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-01T07:05:46.383

通常，您应该使用无符号整数。

就溢出等**未定义的行为**而言，它们更具可预测性。
这本身就是一个很大的话题，所以我不会多说。
除非您确实需要有符号值，否则避免使用有符号整数是一个很好的理由。

此外，它们在检查范围时**更容易**使用——您不必检查负值。

典型的经验法则：

*   如果您正在编写一个将*索引*作为控制变量的正向`for`循环，您*几乎总是*需要无符号整数。事实上，你几乎总是想要.**`size_t`**

***   如果您正在编写一个`for`将索引作为控制变量的反向循环，出于显而易见的原因，您可能应该使用有符号整数。应该`ptrdiff_t`会吧。** 

 **需要注意的一件事是在不同大小的有符号和无符号值之间进行转换时。
您可能需要仔细检查（或三次检查）以确保演员按您期望的方式工作。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-01T07:53:44.863

`int`是通用整数类型。如果您需要一个整数，并且`int`满足您的要求（范围 [-32767,32767]），请使用它。

如果你有更专业的目的，那么你可以选择别的东西。如果您需要对数组的索引，请使用`size_t`. 如果您需要向量的索引，请使用`std::vector<T>::size_type`. 如果您需要特定尺寸，请从[`<cstdint>`](http://en.cppreference.com/w/cpp/types/integer). 如果您需要大于 64 位的内容，请查找[gmp 之](http://gmplib.org/)类的库。

我想不出任何好的理由来使用`unsigned int`. 至少，不是直接的（`size_t`并且某些特定大小的类型`<cstdint>`可能是 typedef 的`unsigned int`）。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-09-01T08:48:41.113

系统使用`unsigned`when 值不能为负的问题不是 Java 没有`unsigned`，而是带有无符号值的表达式，尤其是与有符号值混合时，如果您将无符号视为具有移位范围的整数类型。无符号是一种模块化类型，而不是将整数限制为正数或零。

`unsigned`因此，当您需要模块化类型或按位操作时，应该使用传统的观点。这种观点在 K&R 中是隐含的——看看 int 和 unsigned 是如何使用的——在 TC++PL（第 2 版，第 50 页）中更明确：

> `unsigned`整数类型非常适合将存储视为位数组的用途。使用 an`unsigned`而不是 an`int`来获得更多位来表示正整数几乎从来都不是一个好主意。通过声明变量来确保某些值是正数的尝试`unsigned`通常会被隐式转换规则所挫败。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-01T06:45:42.657

在几乎所有架构中，有符号操作和无符号操作的成本是相同的。因此，在效率方面，您不会因使用无符号签名而获得任何优势。但是正如您所指出的，如果您使用 unsigned 您将拥有更大的范围

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-03T14:43:55.327

即使您的变量只应采用非负值 unsigned 也可能是一个问题。这是一个例子。假设要求程序员编写代码来打印所有整数对 (a,b)，其中 0 <= a < b <= n 其中 n 是给定的输入。不正确的代码是

```
for (unsigned b = 0; b <= n; b++)
   for (unsigned a=0; a <=b-1; b++)
       cout << a << ',' << b << n ; 
```

这很容易纠正，但是用 unsigned 思考比用 int 思考要自然一些。**

# php - 为什么我收到未定义索引的错误？

> ID：12225522
> 
> 赞同：0
> 
> 时间：2012-09-01T06:40:13.927
> 
> 标签：php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T06:44:56.540

您的查询中有语法错误

```
"SELECT `image_id`, `album_id` `timestamp`, `ext` FROM `images` WHERE `album_id`=$album_id AND `user_id`=".$_SESSION['user_id'] 
```

================================= ^

和`comma`之间缺少a`album_id``timestamp`

将您的查询更改为

```
"SELECT `image_id`, `album_id`, `timestamp`, `ext` FROM `images` WHERE `album_id`=$album_id AND `user_id`=".$_SESSION['user_id'] 
```

它会像一个魅力:)

始终始终始终，首先在您的数据库上运行查询，然后再使用 php.ini 触发它们。这将帮助您更快地发现错误。当然你也可以看到使用 php 有什么错误，但是为什么要浪费时间呢？

使用 phpMyAdmin 运行查询。:)

PS：问的人是傻子5分钟，不问的人是永远的傻子。你有一个问题（尽管它可能很愚蠢）？发表它。

# algorithm - 如何创建与其他集合不同的集合？

> ID：12225528
> 
> 赞同：3
> 
> 时间：2012-09-01T06:40:59.700
> 
> 标签：algorithm, set, distinct, combinatorics

在解决 Techgig.com 上的问题时，我对其中一个问题感到震惊。问题是这样的：

> 某公司每年为其员工组织两次旅行。他们想知道是否可以将所有员工都送去旅行。条件是，没有员工可以同时参加这两次旅行。此外，要确定哪些员工可以一起工作，限制条件是过去一起工作的员工不会在同一个组中。问题示例：
> 
> 假设工作历史如下：{(1,2),(2,3),(3,4)}; 然后可以在两次旅行中容纳所有四名员工（一次旅行由员工 1 和 3 组成，另一次由员工 2 和 4 组成）。同一次旅行的两名员工过去都没有一起工作过。假设工作历史为 {(1,2),(1,3),(2,3)}，那么不可能有两次满足公司规则并容纳所有员工的旅行。

谁能告诉我如何处理这个问题？

我将此代码用于 DFS 并为顶点着色。

```
static boolean DFS(int rootNode) {
        Stack<Integer> s = new Stack<Integer>();
        s.push(rootNode);
        state[rootNode] = true;
        color[rootNode] = 1;
        while (!s.isEmpty()) {
            int u = s.peek();
            for (int child = 0; child < numofemployees; child++) {
                if (adjmatrix[u][child] == 1) {
                    if (!state[child]) {
                        state[child] = true;
                        s.push(child);
                        color[child] = color[u] == 1 ? 2 : 1;
                        break;
                    } else {
                        s.pop();
                        if (color[u] == color[child])
                            return false;
                    }    

                }
            }
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T06:53:18.390

这个问题在功能上等同于测试一个无向图是否是[二分](http://en.wikipedia.org/wiki/Bipartite_graph)图。二分图是所有节点都可以分布在两个集合中的图，并且在每个集合中，没有节点与另一个节点相邻。

要解决此问题，请执行以下步骤。

1.  使用邻接对，构造一个无向图。这很简单：每个数字代表一个节点，对于给定的每一对，在这些节点之间形成一个连接。
2.  测试新生成的图的二分性。这可以在线性时间内实现，[如此处所述](http://en.wikipedia.org/wiki/Bipartite_graph#Testing_bipartiteness)。
3.  如果图是二分图并且您已经生成了两个节点集，那么问题的答案是肯定的，并且每个节点集及其节点（员工）对应于两次行程之一。

关于如何测试二分性的摘录：

> 可以测试一个图是否是二分图，并使用深度优先搜索在线性时间内返回双色（如果是二分图）或奇数循环（如果不是）。主要思想是在深度优先搜索树中为每个顶点分配与其父节点颜色不同的颜色，在深度优先搜索树的前序遍历中分配颜色。这将必然提供生成树的两种颜色，该生成树由连接顶点到其父节点的边组成，但它可能无法正确着色某些非树边。在深度优先搜索树中，每个非树边的两个端点之一是另一个端点的祖先，当深度优先搜索发现这种类型的边时，它应该检查这两个顶点是否具有不同的颜色。如果他们不这样做，则树中从祖先到后代的路径与颜色错误的边一起形成一个奇循环，该循环与图不是二分的结果一起从算法返回。但是，如果算法在未检测到此类奇数循环的情况下终止，则必须对每条边正确着色，并且算法将着色与图是二分图的结果一起返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T09:10:55.647

I even used a recursive solution but this one is also passing the same number of cases. Am I leaving any special case handling ?

Below is the recursive solution of the problem:

```
static void dfs(int v, int curr) {
        state[v] = true;
        color[v] = curr;

        for (int i = 0; i < numofemployees; i++) {
            if (adjmatrix[v][i] == 1) {
                if (color[i] == curr) {
                    bipartite = false;
                    return;
                }

                if (!state[i])
                    dfs(i, curr == 1 ? 2 : 1);
            }
        }
    } 
```

I am calling this function from `main()` as `dfs(0,1)` where `0` is the starting vertex and `1` is one of the color

# cuda - CUDA：为什么会有大量的 GPU 空闲时间？

> ID：12225532
> 
> 赞同：2
> 
> 时间：2012-09-01T06:41:23.530
> 
> 标签：cuda, profiling

**问题**

总 GPU 时间 + 总 CPU 开销小于总执行时间。为什么？

**细节**

我正在研究全局内存访问和内核启动的频率如何影响性能，我设计了一个包含多个小内核和总共约 10 万个内核调用的代码。每个内核从全局内存中读取数据，处理它们，然后写回全局内存。正如预期的那样，代码运行速度比只有一个大内核和很少内核启动的原始设计慢得多。

当我使用命令行分析器获取**“gputime”**（GPU 内核或内存复制方法的执行时间）和**“cputime”**（非阻塞方法的 CPU 开销，阻塞方法的 gputime 和 CPU 开销之和）时，问题就出现了. 据我了解，所有 gputimes 和所有 cputimes 的总和应该超过整个执行时间（最后一个**“gpuendtimestamp”**减去第一个**“gpustarttimestamp”**)，但事实恰恰相反（gputimes 之和=13.835064 s，cputimes 之和=4.547344 s，总时间=29.582793）。在一个内核的结束和下一个内核的开始之间，往往有大量的等待时间，大于下一个内核的 CPU 开销。遇到这个问题的内核大多是：memcpyDtoH、memcpyDtoD 以及 launch_closure_by_value、fast_scan 等推力内部函数。可能的原因是什么？

**系统** Windows 7、TCC 驱动程序、VS 2010、CUDA 4.2

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:27:56.963

这可能是分析（会增加延迟）和 Windows WDDM 子系统的组合。为了克服后者的高延迟，CUDA 驱动程序批处理 GPU 操作并通过单个 Windows 内核调用分组提交它们。如果 CUDA API 命令位于未提交的批处理中，这可能会导致 GPU 长时间处于不活动状态。

（将@talonmies 的评论复制到答案中，以启用投票和接受。）

# networking - 将物理与游戏服务器同步

> ID：12225536
> 
> 赞同：2
> 
> 时间：2012-09-01T06:41:48.747
> 
> 标签：networking, synchronization, game-physics, multiplayer

我想使用物理引擎编写多人游戏。客户端使用物理引擎进行计算并及时显示结果，当然，服务器也需要模拟整个事情。

Afaik，客户端通常将速度和位置发送到服务器。我的想法是将按键发送到服务器。

发送位置/速度：

*   服务器需要对运动进行插值。
*   我不知道如何为物理引擎提供这些数据。
*   在插值上，结果可能不准确。

发送按键

*   我可以像在客户端（通过按键）一样提供服务器的物理特性。这意味着更少的代码！
*   不需要插值。

那么，我的想法有什么问题呢？为什么它（afaik）不在游戏中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:49:52.637

我很确定在服务器上计算物理对服务器来说太重了。尤其是人多的时候。虽然这可能会使客户端更快，但服务器将成为瓶颈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T18:45:11.430

它没有被使用有两个主要原因 - 一个由 user1640050 概述，另一个更重要：

延迟计算 - 你仍然需要在客户端和服务器端计算它，因为在互联网上，服务器和客户端之间会有 20ms-500ms 的延迟。通常发生的是双方都计算物理，并且动作（不是真正的按键）通过网络发送，并带有客户端时间的时间戳。然后，服务器*再次*进行计算，计算客户端之间的任何交互并将对轨迹的更正发送回客户端。

这样，客户端可以在没有任何服务器反馈的情况下计算游戏的实时演变，并且如果服务器将其他玩家的活动通知客户端，通常会以动作和动作结果的组合形式（更常见）来纠正它。

这样做是为了阻止各种作弊 - 客户对对手的引擎推力了解得越少，添加未经授权的模组和作弊就越难 - 这样客户就知道自己的引擎推力和位置/速度/对手的加速度，但不知道它是如何实现的。

# php - 我们如何在 joomla 的组件视图中包含 joomla 模块

> ID：12225538
> 
> 赞同：6
> 
> 时间：2012-09-01T06:42:16.140
> 
> 标签：php, joomla

我在一个 Joomla 站点工作，我想在组件视图中包含一个模块，任何人都可以帮助我。我正在使用此代码显示未经授权的访问消息。

```
 <div class="used_image">
<?php
    include($mosConfig_absolute_path."/modules/mod_MODULENAME/mod_MODULENAME.php");
    ?>
</div> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-01T07:00:36.357

试试这个

```
 jimport('joomla.application.module.helper');
    // this is where you want to load your module position
    $modules = JModuleHelper::getModules('header'); 
    foreach($modules as $module)
    {
    echo JModuleHelper::renderModule($module);
    } 
```

# c# - 从一个开关盒移动到另一个开关盒

> ID：12225545
> 
> 赞同：-3
> 
> 时间：2012-09-01T06:43:11.393
> 
> 标签：c#, .net, switch-statement

我想从一个开关盒转移到另一个：

```
Switch()
{ 

}
c=console.readline();
switch(yup)
{
   case y:
   "I WANT TO CALL SWITCH 1;"
   case n:
   EXIT;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T06:50:23.260

如果你想“调用另一个开关”，你必须将它提取到一个单独的方法中，然后调用它。

```
public static void Main()
{
    MethodWithFirstSwitch();        

    c=console.readline();

    switch(yup)
    {
        case y:
        MethodWithFirstSwitch();
        case n:
        EXIT;
    }
}

private static void MethodWithFirstSwitch()
{
     switch(something)
     {
          case "something":
          break;
          default:
          break;
     }
} 
```

我不确定这是否是您问题的准确近似值。你有一个开关，然后总是想运行一些代码，然后是一个新的开关，其中一个案例运行与以前相同的开关。

当然，由于不存在变量和调用，这不会按原样运行，`EXIT;`但作为示例。

如果这不能回答您的问题，请更新原始帖子，详细说明您要实现的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T06:47:56.687

我认为这就是您想要的：-

```
switch(yup)
{
   case y:
   {
       //call your switch inside case y
       switch()
       {
         ----
         ----
       }
   }

   case n:
   EXIT;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T06:49:32.730

要按字面意思做你所要求的，你需要一个`goto`. 然而，大多数人都非常不喜欢它，`goto`因为它使您的代码非常难以理解、调试和维护。

通常我会使用`do`/`while`循环，检查您在准备退出时设置的变量。像这样的东西：

```
bool done = false;

do
{
    switch(/* ... */)
    {
        // ...
    }

    c = Console.ReadLine();

    switch(yup)
    {
        case y:
            break;
        case n:
            done = true;
            break;
    }
}
while(!done); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T06:55:33.670

```
 private void Form1_Load(object sender, EventArgs e)
    {
        MyFirstSwitch(true);
        //c=console.readline();
        string yup;
        switch (yup)
        {
            case "y":
                MyFirstSwitch(false);
                break;
            case "n":
                //Exit
                break;
        }
    }

    private void MyFirstSwitch(bool check)
    {
        switch (check)
        {
            case true:
                //Do some thing hereZ
                break;

            case false:
                //Do some thing hereZ
                break;
        }
    } 
```

# php - 确定 PHP 资源是否包含二进制或文本

> ID：12225547
> 
> 赞同：1
> 
> 时间：2012-09-01T06:43:57.620
> 
> 标签：php, mongodb, resources, gridfs

我正在使用`MongoDB`并将文件存储到`GridFS`using `PHP`. 我通过以下方式提取文件：

```
$mongo = new Mongo;
$images = $monogo->my_db->getGridFS('images');
$image = $images->findOne('epic-beard-man.png');
$stream = $image->getResource(); 
```

这很酷，因为`$stream`它是一个 PHP `resource`。我需要的是确定流/资源是二进制还是文本。如果是文本，我想输出，否则如果是二进制，我不想输出。

是否有一个神奇的功能，如：`is_binary($stream)`

**编辑**

```
echo get_resource_type($stream); 
```

退货`STREAM`。哼，用处不大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T06:53:19.753

如果不从资源中实际读取，您将无法检查这一点。您可以阅读整个内容并查找不可打印的字符（如果是图像，这应该会很快发生）。[您可以使用ctype_print](http://php.net/manual/en/function.ctype-print.php)检查“可打印性” ，不幸的是它会返回`false`制表符和换行符，因此它可能不是最好的。您还可以构建自己的正则表达式来检查数据：

```
preg_match(':^(\P{Cc}|[\t\n])*$:', $data) 
```

然而，最好和最简单的做法是将数据类型（可能是 MIME 类型）与对象一起保存。这样您就不需要在显示时做任何魔术。

我认为像 MongoDB 这样的无模式数据库在设计阶段至少需要与关系数据库一样多的关注。这是设计数据库时要考虑的一个典型问题：我的数据有什么类型？

# tfs - 如果我们不想向客户端提供服务器密码，如何管理 Team Foundation Server 的登录？

> ID：12225549
> 
> 赞同：0
> 
> 时间：2012-09-01T06:43:58.943
> 
> 标签：tfs

我会尽力解释。
我已经在我的服务器机器上配置了团队基础服务器，在客户端上我可以在服务器上签入我的项目，在其他客户端上我可以获得最终版本。它工作正常。现在我有两个问题。
**1-**从客户端电脑，当我连接到团队基金会时，它会询问用户名和密码，并且在团队基金会服务器上配置的密码与服务器 Windows 管理员凭据的密码相同。我尝试在其上创建任何其他用户，但我认为我必须为此创建一个服务器管理员帐户。但我不想将我的服务器凭据提供给客户端。在我看来，这很危险。看图片。 ![在此处输入图像描述](../Images/4251d00538195cb92d6071a131d597a8.png)

**2-**如果我做了一些更改并且我确实签入了，那么效果很好。并在那里加载更改。在其他客户端上，如果我签出，它没有得到最新的不同更改，它什么也不做。但是当我得到最新版本时，它可以正常工作，但会带来所有最新的更改并合并。为什么签出不会在它们之间只得到“不同”的语句更改？

我是新手 TFS，如果我问的是傻瓜，请原谅我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:09:56.423

我找到了解决这个问题的方法。只需在您的活动目录上创建一个新帐户。并将其用于登录。在此处提供该帐户 ![在此处输入图像描述](../Images/c598937602a0f69328c9c68f5b7f7654.png)

现在我可以提供我在活动目录上创建为用户帐户的用户名和密码。

# sql-server - 如何在 SQL 中反向返回由特殊字符分隔的字符串？

> ID：12225558
> 
> 赞同：0
> 
> 时间：2012-09-01T06:45:04.373
> 
> 标签：sql-server, sql-server-2008

我有一个这样的字符串`"Planck, Albert, Bohr"`

我希望输出为`"Bohr Albert Planck"`

我希望使用 SQL Server 完成此操作。我看到许多字符串拆分函数都以表的形式并以正向顺序返回数据。这些不符合我的目的。

任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T07:01:26.293

这是你想要的：

```
DECLARE @source VARCHAR(MAX)
DECLARE @dest VARCHAR(MAX)
DECLARE @lenght INT 

SET @source = 'Planck, Albert, Bohr'
SET @dest = ''

WHILE LEN(@source) > 0
BEGIN
    IF CHARINDEX(' ', @source) > 0
    BEGIN
        SET @dest = SUBSTRING(@source,0,CHARINDEX(' ', @source)) + ' ' + @dest
        SET @source = LTRIM(RTRIM(SUBSTRING(@source,CHARINDEX(' ', 
                      @source)+1,LEN(@source))))
    END
    ELSE
    BEGIN
        SET @dest = @source + ' ' + @dest
        SET @source = ''
    END
END

SELECT REPLACE(REPLACE(@dest,Char(44),''),Char(13), '') 
```

`Char(44)`是 ASCII 值，`,`所以最后我只是替换了那个字符。

这将打印`Bohr Albert Planck`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T07:40:53.457

如果你使用这样的拆分字符串函数，你可以做这样的事情[。](https://stackoverflow.com/a/314917/569436)

```
declare @S varchar(20) = 'Planck, Albert, Bohr'

select
(
  select ltrim(s)+' '
  from dbo.Split(',', @S)
  order by pn desc
  for xml path(''), type
).value('.', 'varchar(max)') 
```

[SQL小提琴](http://sqlfiddle.com/#!3/b169a/1/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T07:18:27.310

```
Declare @inStr varchar(1000)='Planck, Albert, Bohr'
;WITH CTE AS(
select ltrim(rtrim(reverse(left(reverse(@instr),CHARINDEX(',',reverse(@instr),1)-1)))) as strg,RIGHT(reverse(@instr),LEN(reverse(@instr))-CHARINDEX(',',reverse(@instr),1)) as rem
union all
select CASE WHEN CHARINDEX(',',c.rem,1)>0 then ltrim(rtrim(reverse(left(rem,CHARINDEX(',',rem,1)-1))))  else reverse(rem) end,
       CASE WHEN CHARINDEX(',',c.rem,1)>0  then RIGHT(c.rem,LEN(rem)-CHARINDEX(',',rem,1)) else '' end
from CTE c
where len(rem) > 0 --CHARINDEX(',',c.rem,1)>0

)
select stuff((select ' '+strg from CTE for xml path('')),1,1,'') 
```

# sql - 逗号分隔结果多列sql server

> ID：12225563
> 
> 赞同：2
> 
> 时间：2012-09-01T06:45:51.627
> 
> 标签：sql, sql-server-2008, tsql

我有一个包含值的表：

```
Key1     Key2     ColumnKey 
============================
1        idx1      here
2        idx2      there 
```

我需要返回以逗号分隔的多列结果。

例子：

```
1,2   idx1,idx2,      here,there 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T08:00:30.390

```
select stuff(T.X.query('Key1').value('.', 'varchar(max)'), 1, 1, '') as Key1,
       stuff(T.X.query('Key2').value('.', 'varchar(max)'), 1, 1, '') as Key2,
       stuff(T.X.query('ColumnKey').value('.', 'varchar(max)'), 1, 1, '') as ColumnKey
from 
  (
  select ','+cast(Key1 as varchar(10)) as Key1,
         ','+Key2 as Key2,
         ','+ColumnKey as ColumnKey
  from YourTable
  order by Key1
  for xml path(''), type
  ) T(X) 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/78673?)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T09:01:18.927

试试这个：

```
;WITH CTE as(
select *,1 rn from test101)
select (STUFF((select ','+cast(Key1 as varchar(10)) from CTE  where CTE.rn=m.rn for xml path('')),1,1,'')) key1,
(STUFF((select ','+Key2  from CTE  where CTE.rn=m.rn for xml path('')),1,1,'')) key2,
(STUFF((select ','+ColumnKey from CTE  where CTE.rn=m.rn for xml path('')),1,1,'')) ColumnKey
from CTE m
group by rn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T03:51:17.887

**您是否知道 CodePlex 具有用户定义的聚合GROUP_CONCAT**的开源 CLR 实现。安装就像在您的服务器上运行 SQL 脚本一样简单。

[http://groupconcat.codeplex.com/](http://groupconcat.codeplex.com/)

它有 4 个 group_concat 实现

*   GROUP_CONCAT --默认分隔符是 ,（逗号）

*   GROUP_CONCAT_D -- 你可以指定分隔符

*   GROUP_CONCAT_DS - 您可以指定分隔符，排序顺序（1 为 asc 顺序，2 为 desc 顺序）

*   GROUP_CONCAT_S -- 你可以指定排序顺序

# c++ - c中的指针，双指针和三指针

> ID：12225573
> 
> 赞同：0
> 
> 时间：2012-09-01T06:46:58.553
> 
> 标签：c++, pointers

> **可能重复：**
> [有人可以告诉我给定代码中第二个 printf 语句中的引用流吗？](https://stackoverflow.com/questions/4638527/can-someone-tell-me-the-flow-of-references-in-the-second-printf-statement-in-the)

```
 #include<iostream>
 using namespace std;
 char *c[] = {"ENTNG","NST","AMAZI","FIRBE"};
 char **cp[] = {c+3,c+2,c+1,c};
 char ***cpp = cp;
 int main(){
 cout<<(**++cpp);
 cout<<(*--*++cpp+3);
 cout<<(*cpp[-2]+3);
 cout<<(cpp[-1][-1]+1);
 return 0;
 } 
```

我试图理解指针、双指针和三指针的概念。有人可以告诉我这段代码是如何工作的以及解决方案背后的概念吗？提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T06:49:29.050

单个指针是可以指向特定数据类型的内存位置的数据类型。在这种情况下，它是 char 所以我们假设它是一个 char 指针，它只能指向一个 char 变量，也就是说，它只能保存字符变量的地址。双指针可以保存单个指针的地址，三重指针可以保存双指针的地址。

在您的代码中，第一个指针“c”是一个双指针，它本身包含 cstrings。cstrings 是单字符指针。那么'cp'和'cpp'都是三重指针。

至于其余的代码，它非常混乱，看起来就像一场噩梦。您最好阅读一些关于指针和基本 C++ 编程的资源。我会推荐斯坦福的 Eric Roberts 爵士用 C++ 编写的编程抽象。另请参阅[智能指针](http://en.wikipedia.org/wiki/Smart_pointers)。

# php - 使用相同的函数名两次包含相同的文件

> ID：12225574
> 
> 赞同：0
> 
> 时间：2012-09-01T06:47:08.770
> 
> 标签：php, function

这是一种情况。

我想在我的服务器上复制一个 API 两次，但使用不同的数据库。我想要做的是使用这些 API 的一些功能。在 PHP 中，我有一种情况，我正在实现所有这些 API 位置的循环。

```
forach($apis as $api){
 include ($api->apiFiles);
 useAPIfunction();
} 
```

问题是 API 具有相同的函数和类，循环运行一次，但第二次出现 PHP 致命错误无法重新声明函数”。

现在我不想更改 API，比如更改函数名称等，我必须从我的脚本中完成所有工作。是否存在在第一次迭代完成后取消注册 API 文件的情况，因为这是包含新 API 的唯一方法。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:26:27.623

您不需要多次包含同一个 API，只需包含一次（您可以使用该`include_once`命令来避免多次加载同一个 API）。理想情况下，API 应该接受参数告诉它使用什么数据库。但如果它使用全局变量，则在调用 API 函数之前设置变量。它最好使用参数，因为第二种方式意味着您一次只能使用一个数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T05:44:03.883

我做了一个伎俩。我在第一次迭代中包含了 API 文件，然后为其他迭代添加了一个脚本以连接到第二个数据库，反之亦然。现在 API 将使用第一个 API 文件连接一次，但数据库在新的迭代中发生变化。我也没有找到获取数据库信息的方法，所以我从 API 配置文件中检索了它。

```
forach($apis as $api){
 if($count = 0){
  include ($api->apiFiles);
 }else{
  $theData = file_get_contents($api->path'\includes\config.php', NULL, NULL, 10, 600);
  $theData = str_replace('<?php','',$theData);
  $theData = explode("'",$theData);
  $apiHost = $theData[19];
  $apiDB = $theData[7];
  $apiDbUser = $theData[11];
  $apiDBPass = $theData[15];

  mysql_connect($apiHost,$apiUser,$apiPass);
  mysql_select_db($apiDB);
 }
 useAPIfunction(); 
```

}

# jquery - 为什么有些数字会添加到 ajax 对象的 url 以及如何删除它们？

> ID：12225576
> 
> 赞同：33
> 
> 时间：2012-09-01T06:47:47.960
> 
> 标签：jquery, ajax, query-string

我想下载文件以供进一步使用，这是我找到的最好方法，但是当我看到由`beforeSend`事件创建的日志时，URL 已被如下查询字符串修改：

```
http://blabla.com/test.swf?_=1346484617818 
```

数字也是随机的。

我想知道为什么会这样！！！！

```
var url = 'http://blabla.com/test.swf';

$(document).ready(function () {
           $.ajaxSetup({
             'beforeSend':function () {
                          console.log(this.url);}
           });

        $.ajax({
            url:url,
            dataType:"script",
            });
}); 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-01T06:49:49.340

只需使用缓存：true。jQuery 会自动为您在 URL 的末尾添加一个时间戳，确保永远不会缓存 ajax 请求。

**来自 jquery 文档**

> **默认值：** true，对于 dataType 'script' 和 'jsonp' 为 false
> 如果设置为`false`，它将强制请求的页面不被浏览器缓存。将缓存设置为`false`还会将查询字符串参数“ `_=[TIMESTAMP]`”附加到 URL。

```
$.ajaxSetup({'cache':true}); 
```

[Jquery Ajax 文档](http://api.jquery.com/jquery.ajax)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-02-28T15:11:25.227

我也有这个问题，我发现问题出在网址上。您应该使用 https，而不是使用 http。所以这就是我的意思，而不是这个：

```
var url = 'http://blabla.com/test.swf'; 
```

用这个：

```
var url = 'https://blabla.com/test.swf'; 
```

我想指出，我的案例是使用 IIS 服务器作为 localhost（asp.net、knout 和 JQuery Ajax）。

# c# - 起订量 - 设置 HttpResponse

> ID：12225578
> 
> 赞同：8
> 
> 时间：2012-09-01T06:48:04.200
> 
> 标签：c#, asp.net-mvc, unit-testing, moq

我正在尝试使用 MVC 4、Moq 4 和 C# 4.5 模拟 ConrollerContext 对象的 HttpResponse

我的代码在这里：

```
var context = new Mock<HttpContextBase>();
var response = new Mock<HttpResponseBase>();

context.SetupProperty(c => c.Response = response); 
```

我试过使用`Setup().Returns()`，`SetupGet()`但我不断收到以下错误：

> > “无法将属性或索引器‘System.Web.HttpContextBase.Response’分配给——它是只读的。

我试过用谷歌搜索这个并在这个网站上搜索，但我似乎找不到答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T01:12:50.613

对于 get-only 属性，使用`SetupGet(..)`并指定一个`.Returns(..)`带有返回值的子句以注入：

```
var context = new Mock<HttpContextBase>();
var response = new Mock<HttpResponseBase>();

context.SetupGet(c => c.Response)
       .Returns(response.Object); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T07:17:39.683

看来我没有将正确的对象传递给`Returns()`方法。我应该通过模拟的`Object`财产。

这是正确的代码：

```
var context = new Mock<HttpContextBase>();
var response = new Mock<HttpResponseBase>();

context.Setup(c => c.Response).Returns(response.Object); 
```

# javascript - 添加逗号并通过jQuery将数字转换为阿拉伯数字

> ID：12225579
> 
> 赞同：0
> 
> 时间：2012-09-01T06:48:08.677
> 
> 标签：javascript, jquery

我想将拉丁数字更改为阿拉伯数字，并通过两个 jQuery 函数在每三个阿拉伯数字之间添加逗号，我尝试它是一个问题，在我的代码中，`,`它在三个数字之间放置一个逗号`،`，（如果您的系统中有活动的阿拉伯语言你可以看到这个问题）如何将每三个阿拉伯数字之间的逗号作为`,`？

我在代码中的正则表达式是这样的：`/([^,]+)([^,]{3})/`

**查看我的完整代码和演示：http:** [//jsfiddle.net/d5LEK/](http://jsfiddle.net/d5LEK/)

# java - 如何在 Emacs 中将外部标签文件添加到 CEDET

> ID：12225585
> 
> 赞同：0
> 
> 时间：2012-09-01T06:49:10.280
> 
> 标签：java, emacs, tags, cedet, emacs-semantic

我尝试使用 CEDET 在 Emacs 中自动完成，这对于 C/C++ 来说效果很好。但是我找不到任何关于如何在没有 JDEE 的帮助下将 CEDET 与 Java 一起使用的信息，JDEE 被认为已经过时并且与 CEDET 1.1 不兼容。我使用[此处](http://www.emacswiki.org/emacs/JavaCompletion)找到的实用程序获得了一个标签文件，但我不知道如何将其集成到 CEDET 系统中。根据 CEDET 的网站，这是可能的。但他们没有解释如何做到这一点。有人愿意回答这个问题吗？

以下是该实用程序生成的标签文件的一些示例：

```
java.applet.Applet$AccessibleApplet
    protected java.applet.Applet$AccessibleApplet(java.applet.Applet)
    public java.applet.Applet$AccessibleApplet.getAccessibleRole() returns javax.accessibility.AccessibleRole
    public java.applet.Applet$AccessibleApplet.getAccessibleStateSet() returns javax.accessibility.AccessibleStateSet 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T16:17:53.343

可以让 CEDET 从 .jar 文件中提取标签。它通过使用 javap 以文本形式提取标签，然后解析该数据。

设置起来并不容易，因为在 CEDET 中，查找库文件的位置是 EDE（项目管理系统）的一部分，而不是解析器和智能完成系统的一部分。CEDET 1.1 中唯一支持的基于 Java 的项目是 Android。

基础是首先通过`(require 'semanticdb-javap)`在 CEDET 1.1 或 CEDET`(require 'semantic/db-javap)`的 bzr 版本中加载 javap 数据库来启用它。

完成后，您可以通过`cedet-java-classpath-extension`. 我对接下来会发生什么的细节有点模糊，但人们已经在邮件列表上报告了成功。

如果您使用 bzr 存储库中的 CEDET，则有 ede-java-root 项目，它类似于 ede-cpp-root 项目。该项目类型允许您配置库路径。该文档位于项目类型的 ede/java-root.el 文件中，并向您展示了如何使用它的基础知识。

# iphone - 使用视图控制器作为相机覆盖？

> ID：12225593
> 
> 赞同：1
> 
> 时间：2012-09-01T06:50:01.937
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个应用程序可以加载相机并覆盖用于触发、重新加载和返回的按钮，以及一个在点击触发和重新加载按钮时动画的 png。当相机视图加载时，我将如何加载具有按钮和图像的 .xib 的视图控制器作为覆盖？

当点击主屏幕上的按钮时，我会加载相机视图，该按钮用于打开带有按钮和枪图像的另一个视图。

以下是我到目前为止所做的，正在加载相机。我有一个名为 PlayViewController 的单独视图控制器，接口有一个 xib：

```
-(IBAction)getCameraPicture:(id)sender {

UIImagePickerController *picker = [[UIImagePickerController alloc] init];

picker.sourceType = UIImagePickerControllerSourceTypeCamera;

PlayViewController* overlay = [[PlayViewController alloc] initWithNibName:@"PlayViewController" bundle:nil];
picker.cameraOverlayView = overlay.view;
[picker setDelegate:overlay];
[self presentModalViewController:picker animated:YES]; 
```

这是在 PlayViewController.m 中：`code`

```
 #import "PlayViewController.h"
   #import "SoundViewController.h"

@interface PlayViewController ()

@end

@implementation PlayViewControlleriPad... 
```

`

PlayViewController.h：

```
@interface PlayViewController : UIViewController <UIImagePickerControllerDelegate, UINavigationControllerDelegate>
{

two array declarations...

}

@property (weak, nonatomic) IBOutlet UIButton *reloadButton;
@property (weak, nonatomic) IBOutlet UIButton *fireButton;
@property (weak, nonatomic) IBOutlet UITextField *ammoField;
@property (weak, nonatomic) IBOutlet UIImageView *type;

@end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-01T06:58:52.530

像往常一样创建您的视图控制器和 xib，然后将其添加到您的代码中：

```
YourOverlay* overlay = [[YourOverlay alloc] initWithNibName:@"YourOverlayView" bundle:nil];
picker.cameraOverlayView = overlay.view;
[picker setDelegate:overlay];
[self presentModalViewController:picker animated:YES]; 
```

覆盖必须实现`UIImagePickerControllerDelegate`和`UINavigationControllerDelegate`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T06:57:54.107

```
picker.cameraOverlayView = someViewController.view; 
```

# javascript - 为什么我的容器没有进入中心

> ID：12225594
> 
> 赞同：0
> 
> 时间：2012-09-01T06:50:11.187
> 
> 标签：javascript, jquery, css

我想在屏幕中央打开一个 div（水平和垂直）。

```
var documnetWidth = $(document).width(),
  documentHeight = $(document).height(),
  widgetFormHeight = widgetForm.height(),
  widgetFormWidth = widgetForm.width();

widgetForm.css({
  top: documentHeight / 2 - widgetFormHeight / 2,
  left: documnetWidth / 2 - widgetFormWidth / 2
}); 
```

我的小部件水平居中，但垂直需要一些偏移。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T07:01:40.903

你可以这样做

定义 DIV 的大小和位置 Fixed，如下所示：

```
div {
     position: fixed;
     top: 50%; 
     left: 50%; 
     width: 200px; 
     height: 100px; 
     margin: -100px 0 0 -50px;
     z-index: 99;
} 
```

或者，如果您不想将其放置在绝对位置，您可以给它一个宽度，并将其设置为：

```
div { margin: 0 auto; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T06:52:38.860

尝试这个：

```
documentHeight = $(window).height(), 
```

代替：

```
documentHeight = $(document).height(), 
```

您获得它的方式是获得文档的高度，该高度可能大于或小于浏览器高度。

然后考虑文档当前滚动的距离：

```
top: documentHeight/2-widgetFormHeight/2 + $(document).scrollTop(), 
```

演示：http: [//jsfiddle.net/vULHL/](http://jsfiddle.net/vULHL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T16:49:16.380

没有宽度或高度的绝对居中 DIV：

[http://jsfiddle.net/dFkXq/1/](http://jsfiddle.net/dFkXq/1/)

并且就像一个固定的元素。

# reference - 阅读 DTD 作为参考文本

> ID：12225596
> 
> 赞同：0
> 
> 时间：2012-09-01T06:50:18.163
> 
> 标签：reference, standards, doctype

对于每个特定 DOCTYPE的**所有有效标签和属性**的人类可读参考，阅读 DTD 包含的实际纯文本是否是一个正确、快速的起点，如下所示？

[XHTML 1.0 过渡的 DTD](http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd)

在我看来，这样做会成为一种脚踏实地的参考，但它是否告诉我**“在运行时”**对 DOCTYPE 以及浏览器程序有效的所有内容？

* * *

* * *

* * *

在那之后，有什么更好的参考？实际的 DOCTYPE 标准在哪里，或者它们是否与一般 HTML 标准相同？DOM 级别的标准？W3学校？其他一些手册，如“HTML 参考库 4.0”，但适用于“较新”的 DOCTYPE/HTML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:27:52.893

DTD 只是描述每个 DOCTYPE 的词法结构，它没有解释任何东西的语义，例如它没有说明做什么`<table>`。为此，您应该查看 HTML 规范。HTML 4.0 规范位于[http://www.w3.org/TR/html4，HTML5](http://www.w3.org/TR/html4)位于[http://www.w3.org/TR/html5/](http://www.w3.org/TR/html5/)。

# amazon-ec2 - EC2 实例中缺少实例存储

> ID：12225598
> 
> 赞同：4
> 
> 时间：2012-09-01T06:50:24.570
> 
> 标签：amazon-ec2

我在 EC2（Ubuntu 12.04）中使用了一个 c1.xlarge 实例，它向我承诺了 1690 Gigs 的实例存储。但是当我检查实例时，我只能找到 450 Gigs。我在哪里俯瞰什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T06:10:46.990

对于某些实例，需要一个特殊的块设备映射来挂载每个可用的实例存储空间。以下是有关如何安装额外空间以使其在您的实例中可用[的描述的链接。](http://ubuntu-smoser.blogspot.de/2011/02/getting-ephemeral-devices-on-ebs-images.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T07:49:05.457

尝试**cat /proc/partitions** 命令并检查它是否已附加到您的实例。可能存在 EBS 存储未安装在您的实例上的情况，但它可以作为附加存储使用。如果您可以使用上述命令看到 1690 Gigs，则必须将剩余存储安装到您的实例，然后只有它可供您的实例使用，并且可以通过 df -kh 命令查看。

# box2d - Box2dWeb - 多边形的当前顶点？

> ID：12225599
> 
> 赞同：0
> 
> 时间：2012-09-01T06:50:39.613
> 
> 标签：box2d

我正在尝试开发一个需要找到多边形当前顶点的游戏。当我尝试使用此方法获取顶点时：

```
fixture.GetShape().GetVertices() 
```

我得到原始顶点而不是当前顶点。有什么解决方法吗？

# c++ - 如何在 C++ 中定义任意映射？

> ID：12225605
> 
> 赞同：1
> 
> 时间：2012-09-01T06:52:11.357
> 
> 标签：c++, map

我想在 C++ 中定义一个完全通用的映射，我可以将任何东西映射到任何东西。

我尝试了 std::map 但是 K 和 V 应该是什么才能使其足够通用，以便我可以将基元或对象（作为键）映射到其他基元或对象（作为值）。

还是我可以使用另一种机制？

编辑：为了澄清起见，我试图在基类中定义一个关系（我的所有类都从该类派生），这将允许我将任意数据附加到我的类。最简单的方法是一个名称-值对，其中上面的键是一个字符串。我想知道我是否做一些更通用的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T06:55:06.803

不可能——因为它应该是。这样的映射将毫无价值，因为您不能依赖键或值的任何有意义的行为，并且不可能设计对“任何东西”有意义的二进制关系或散列函数，或者可以对任何东西进行操作类型，所以它甚至远不及可能的领域。

编辑：没有什么可以阻止`std::unordered_map<std::string, boost::any>`- 或者确实，`boost::any`它恰好持有`std::unordered_map`某些类型的 a 。

但是，您的设计似乎很有问题。你基本上完全颠覆了编译器，没有明显的好处。为什么你要从一个共同的基础派生每个类？你到底为什么要附加任意数据？将数据放入类中的常用方法是*将其放入类中*，而不是试图强迫 C++ 成为一种解释性语言，从而破坏你所有的安全、性能和理智。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T11:27:35.790

这是可能的 - 所以在这一点上我不同意@DeadMG。

这是毫无价值的——在这一点上完全同意，

但是我不理解回答的概念，我的意思是“不要这样做”，而是回答“可以以这种方式完成，但我的建议是不要这样做”。我不假装自己是“生活老师”——我只是在回答，

对于值 - 使用类似 boost::any 的东西。

对于键 - 它更复杂 - 因为 std::map 定义了键中的顺序。所以通用键必须遵循ss规则：

1.  如果真实键类型相同 - 使用真实键的顺序
2.  如果真正的键不相同 - 您必须定义类型之间的顺序（如 typeinfo::name() 的顺序）
3.  通用密钥必须是可复制构造的

让我们看看我对密钥的建议（使用类型擦除）：

```
template <typename T>
struct GenKeyTypeOrder;

class GenKeyImplInt {
public:
   // true if before other Key in other 
   virtual bool before(const GenKeyImplInt&) const = 0;
   // type value
   virtual int typeOrder() const = 0;

   virtual GenKeyImplInt* clone() const = 0;
   virtual ~GenKeyImplInt() {}
};

template <typename RealKey>
class GenKeyImpl : public GenKeyImplInt {
public:
   GenKeyImpl(RealKey realKey) : realKey(realKey) {}
   // true if before other Key in other 
   virtual bool before(const GenKeyImplInt& r) const 
   { 
      const GenKeyImpl* rp = dynamic_cast<const GenKeyImpl*>(&r);
      if (rp) return realKey < rp->realKey;
      return typeOrder() < r.typeOrder();
   }
   // type value
   virtual int typeOrder() const { return GenKeyTypeOrder<RealKey>::VALUE; }

   virtual GenKeyImpl* clone() const { return new GenKeyImpl(*this); }
private:
   RealKey realKey;
};

class GenKey {
public:
   // true if before other Key in other 
   friend bool operator < (const GenKey& l, const GenKey& r) 
   {
       return l.impl->before(*r.impl);
   }
   template <typename T>
   GenKey(T t) : impl(new GenKeyImpl<T>(t)) {}
   GenKey(const GenKey& oth) : impl(oth.impl->clone()) {}
   ~GenKey() { delete impl; }
private:
   GenKey& operator = (const GenKey& oth); // not defined
   GenKeyImplInt* impl;
};

// define for every type you want be used as generic key
template <>
struct GenKeyTypeOrder<int> { enum { VALUE = 0 }; };
template <>
struct GenKeyTypeOrder<std::string> { enum { VALUE = 1 }; }; 
```

[ideone](http://ideone.com/gCaEZ)上的完整示例 另见[本文](http://www.two-sdg.demon.co.uk/curbralan/papers/ValuedConversions.pdf)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-01T06:55:06.630

您需要将 K 和 V 设为特殊对象。

该对象将需要包括它是什么对象类型。

```
struct {
  void *pointer;
  string type;
  // int type; // this is also possible
} Object; 
```

上面的 Object 可以指向任何东西。但是，它还需要说明它是什么类型，因此需要类型字符串。

然后，您需要能够通过读取类型中的内容将指针转换回所需的类型。

例如。

```
if (type == "int") cout << (int*)(myobject.pointer) << endl; 
```

无论如何，如果你做这样的事情，你几乎开始构建一个松散类型的解释器，因为对于你想要对对象执行的任何操作，你都需要检查它的类型（无论你是添加、连接还是打印值到标准输出）。

* * *

如果您使用类对象并使用继承来存储您需要的任何数据，这可能会更好。

```
class Object {
  public virtual string to_string() {
    return "";
  }
}; 
```

那么如果你想存储一个整数：

```
class Integer : public Object {
  int i;
  public string to_string() {
    char str[50];
    sprintf(str,"%d",i);
    return string(str);
  }
  public Integer operator=(int a) {
    i=a;
    return this;
  }
}; 
```

这样，您可以定义您希望所有对象支持的所有功能的接口。

请注意，使基 Object 类具有虚函数意味着如果您说：

```
Integer a;
a=5;
Object object = (Object)a;
cout << object.to_string << endl; // prints "5" 
```

因此调用的函数是由对象的实际（真实）类型定义的。

# jpa - 高效的 JPQL：更新 @onetomany 中的实体

> ID：12225613
> 
> 赞同：0
> 
> 时间：2012-09-01T06:53:31.070
> 
> 标签：jpa, eclipselink, jpql

我有两个实体 Customer 和 Order（不包括琐碎的 setter 和 getter）

```
@Entity
public class Customer {

    @GeneratedValue
    @Id
    private int id;

    @OneToMany
    List<Order> orderList;

}

@Entity
public class Order {

    @GeneratedValue
    @Id
    private int id;

    @ManyToOne
    Customer customer;

    private boolean paid;

    public Order(Customer customer) {

        this.customer = customer;
        customer.getOrderList().add(this)
    }   
} 
```

现在我想为给定客户的所有订单设置'paid = true' 下面的查询似乎可以解决问题，但我觉得它效率低下，而且我将反向关系存储在 Customer.orderList 中的事实暗示那里应该是其他方式来做到这一点。

```
UPDATE Order o SET o.paid = true WHERE EXISTS 
(SELECT c.orderList FROM Customer c WHERE o MEMBER OF c.orderList AND c = :customer) 
```

我正在使用容器管理的事务、glassfish 和 javaDb。但我更希望可以在 JPA/JPQL 域中进行改进，而不是特定于容器或数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:51:12.277

`private id;`?? 遗漏字段类型

添加到`@OneToMany`注释，`cascade = CascadeType.All`

```
Customer entity = entityManager.find(Customer.class, id)   
for (Order order : entity.getOrderList())  
{
   order.setPaid(true);  
} 
```

如果您正在使用`cantainer managed transaction`，则将`true`保存到数据库

# c# - 锁在c#中不能正常工作

> ID：12225616
> 
> 赞同：1
> 
> 时间：2012-09-01T06:54:03.863
> 
> 标签：c#, multithreading, visual-studio-2010, locking

我锁定了几行应该获取 cookie 文件并读取它们的行，但有时我会看到一个错误，指出文件已在使用中！所以不知道出了什么问题...

代码：

```
private Object cookieLock = new Object();

main{
    for (int j = 0; j < maxThreads; j++)
        {
            //   Thread thread = new Thread(new ThreadStart(startPosting2(worker)));
            Thread thread = new Thread(() => postingFunction2());
            thread.IsBackground = true;
            thread.Start();
        }
    }

public void postFunction2()
{
 string tmpUsername = string.Empty;
 string[] array2 = null;
   try
    {
      lock (cookieLock)
       {
          array2 = File.ReadAllLines(tmpUsername + ".txt");
       }
    }
   catch(Exception ex)
    {
      TextWriter sUrl = new StreamWriter("readingSameCookieFile.txt", true);
      sUrl.WriteLine(exp.ToString());
      sUrl.Close();
    }
} 
```

我做错什么了吗？这些行由 20-100 个线程同时执行，我看的不多，但我确实看到了一段时间，所以想知道为什么！

TXT 文件错误：

> `System.IO.IOException`: 该进程无法访问该文件`'C:\Users\Administrator\My Projects\Bot Files\2 Message Poster Bot\MessagePoster - NoLog - Copy\cookies\LaureneZimmerebner57936.txt'`，因为它正被另一个进程使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:13:52.590

我建议只读取一次文件并`array2`在 20-100 个线程之间共享，因为多次读取会导致性能下降。同样在多线程环境中，建议将所有 I/O 操作保持在单线程中。

如果仅由所有线程读取，则共享 array2 将不需要锁。

```
Debug.Write(file name);// to make sure each thread opens different file. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T07:43:50.230

您正在尝试读取 cookie；可能是您的代码之外的浏览器或其他应用程序正在访问/写入 cookie 文件，因此出现异常。

您还没有发布整个代码，只需确保锁定对象没有被多次实例化或使其成为静态以确保。也尝试在阅读后添加 Thread.Sleep(0) ；看看是否有帮助。

如果您将 array2 的内容写入另一个文件，请确保在写入后正确处理/关闭。

尝试将整个方法放入锁块中

```
public void postFunction2() 
{ 
 lock (cookieLock) 
 { 
 string tmpUsername = string.Empty; 
 string[] array2 = null; 
   try 
    { 
          array2 = File.ReadAllLines(tmpUsername + ".txt"); 
    } 
   catch(Exception ex) 
    { 
      TextWriter sUrl = new StreamWriter("readingSameCookieFile.txt", true); 
      sUrl.WriteLine(exp.ToString()); 
      sUrl.Close(); 
    } 
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T08:28:09.930

如果你只是想克服你遇到的问题并且确定它没有被写入，那么你可以使用这个函数而不是`File.ReadAllLines`. 关键是它提供的股票期权`FileShare.ReadWrite`。

```
private static string[] ReadAllLines(string fileName)
{
  using (var fs = new FileStream(fileName, FileMode.Open,
                                           FileAccess.Read,
                                           FileShare.ReadWrite))
  {
    var reader = new StreamReader(fs);
    //read all at once and split, or can read line by line into a list if you prefer
    var allLines = reader.ReadToEnd().Split(new string[] { "\r\n", "\r", "\n" },
                                            StringSplitOptions.None);
    return allLines;
  }
} 
```

# orm - FuelPHP ORM 和查询构建器

> ID：12225617
> 
> 赞同：0
> 
> 时间：2012-09-01T06:54:17.610
> 
> 标签：orm, fuelphp, query-builder

我最近开始了一个基于 FuelPHP 的项目。所以在这个网站上我会有很多关系。

我的问题是，使用查询生成器和 ORM 是个好主意吗？

例如，我是否将 ORM 仅用于关系，并使用查询构建器在数据库中插入更新和删除记录。

或者这不是一个好主意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:21:06.513

ORM 相当强大；它具有创建、读取、更新和删除 (CRUD) 功能。 [http://docs.fuelphp.com/packages/orm/crud.html](http://docs.fuelphp.com/packages/orm/crud.html)内置在其中，因此应该可以在大多数情况下使用 ORM。话虽如此，我目前正在开展一个项目，我们选择同时使用 ORM 和查询构建器。

FuelPHP 论坛上有一个帖子讨论了这个问题：http: [//fuelphp.com/forums/topics/view/7345](http://fuelphp.com/forums/topics/view/7345)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:06:50.397

通常不是问题，但您必须考虑到 ORM 确实会导致缓存（基于每个请求）。

因此，如果您运行 ORM 查询来检索记录，然后运行 ​​QB 查询来修改这些记录，ORM 仍将返回未修改的版本。即使您再次运行相同的 ORM 查询（因为它会看到数据被缓存，并且不会运行另一个查询来检索它们）。

# javascript - Javascript 中与语言环境无关的字符串搜索

> ID：12225623
> 
> 赞同：2
> 
> 时间：2012-09-01T06:55:31.720
> 
> 标签：javascript, html, locale

有没有一种方法可以在不考虑语言环境的情况下搜索/比较字符串？

我的意思是：如果我的键盘上有两个输入源（俄语和英语）并且我开始输入 - 我想搜索单词而不考虑当前处于活动状态的输入源。

而且我会找到包含“搜索”的字符串，而无需考虑我输入的“搜索”或“ыуфкср”

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:04:41.360

仔细想想，我得出的结论是，没有正确的方法来实现这一点，即使我们想要这样的机会。一个原因：可能有不同的键盘（当一个键盘上的“a”等于“ф”而另一个键盘上等于“ы”时）。所以可能你应该自己实现这样的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T07:07:17.573

您只需要通过两个短语进行搜索：原始输入和转换为另一个键盘布局的结果。你会有这样的转换图：

```
{
    a: 'ф',
    s: 'ы',
    d: 'в',
    f: 'а',
    ...
} 
```

# java - Java - 为什么 InputStream#read 以 C 风格设计？

> ID：12225632
> 
> 赞同：2
> 
> 时间：2012-09-01T06:56:43.427
> 
> 标签：java, api, io

由于 Java 支持异常，我认为`EOFException`在尝试读取输入流末尾的字节时会抛出 an ，例如

`byte read() throws EOFException, IOException`

但实际上[InputStream#read](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStream.html#read%28%29)返回

> 数据的下一个字节，如果到达流的末尾，则为 -1。

这让我想起了`getchar`C。但另一方面它抛出

> `IOException`: 如果发生 I/O 错误。

为什么会这样设计？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T07:08:14.370

许多早期的 API 不太理想，并且有很多讨论，设计人员希望他们可以做得不同。

我推测这不是其中一种情况。抛出“EOFException”可能会鼓励程序员`try`阅读，直到捕获到异常。意味着异常处理将被用作控制程序逻辑的一种方式，称为异常处理反模式

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T07:15:45.960

它是这样设计的，因为到达**通常**`EOF`不是一个特殊的事件。

 **根据官方[Java教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/index.html)：

> 异常是在程序执行期间发生的事件，它破坏了正常的指令流。

所以大多数时候返回`EOF`是完全没问题的。

但是，在某些情况下，抛出异常更有意义。例如，`DataInputStream`类有一个称为[`readFully`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/DataInputStream.html#readFully%28byte%5b%5d%29)抛出的方法：

> EOFException - 如果此输入流在读取所有字节之前到达末尾。

简而言之，an`EOFException`表示`EOF`在正常指令流期间返回的破坏性事件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T07:16:37.443

以我的拙见，人们应该问自己，在以“正常”方式读取流时，是否应该将到达文件末尾视为异常。
一个异常来让我们知道我们的应用程序存在异常错误行为，事实并非如此。如果您查看[EOFException](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/EOFException.html)的 javadoc，您会看到，我引用 -

> 表示输入期间意外到达文件结尾或流结尾。

请注意“意外一词，以及此 javadoc 在下一句中的保留。**

# php - php检查mysql时间戳

> ID：12225636
> 
> 赞同：1
> 
> 时间：2012-09-01T06:57:12.030
> 
> 标签：php, mysql

我有以下功能，但有一个问题，我在数据库中的时间戳字段是 mysql 时间戳类型，格式为 '2012-08-30 11:31:41' 和 strtotime('-12 hours'); 正在给出一个 Unix 时间戳。

解决方案是什么？

```
public function checkIfItemVisited($user_id, $item_id) {

    $timeago = strtotime('-12 hours');
    $params = array(
        ':user_id' => $user_id,
        ':item_id' => $item_id,
        ':timestamp' => $timeago
    );
    $sql = "SELECT `visit_id` FROM `item_visits` WHERE `user_id` = :user_id AND `item_id` = :item_id AND `timestamp` > :timestamp";
    $stmt = $this->query($sql, $params);

    if($stmt->rowCount() > 0) :
        return false;
    else :
        $this->countVisit($user_id, $item_id);
    endif;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T07:00:44.303

要解决您的时间戳比较问题，您可以`UNIX_TIMESTAMP()`在 mysql中使用

```
$sql = "SELECT `visit_id`
        FROM `item_visits`
        WHERE `user_id` = :user_id
               AND `item_id` =  :item_id
               AND UNIX_TIMESTAMP(timestamp) > :timestamp"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T07:01:06.730

```
 ...   AND `timestamp` > NOW() - INTERVAL 12 HOUR ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T07:00:57.773

试试这个：

```
SELECT FROM_UNIXTIME(1196440219); 
```

如果您想要 vise-wersa 转换，请使用以下命令：

```
SELECT UNIX_TIMESTAMP('2007-11-30 10:30:19'); 
```

来源：[http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)

# android - Android DefaultHttpClient.execute() 使用移动网络时不返回

> ID：12225638
> 
> 赞同：1
> 
> 时间：2012-09-01T06:58:01.257
> 
> 标签：android, networking

我在使用 DefaultHttpClient 时遇到问题。当我使用移动网络连接时，DefaultHttpClient.execute() 不返回。

这个问题我只在我的设备上（带有 OS LiquidNext 1.9.2 的 Acer Liquid），在其他设备上 DefaultHttpClient.execute() 工作正常。当我使用 Wi-Fi 连接 DefaultHttpClient.execute() 也可以正常工作。

```
HttpUriRequest request = new HttpGet(requestURL);
HttpResponse response = new DefaultHttpClient().execute(request); // execution stops here, execute() not return a value and not throws a exception 
```

是我的程序错误还是 LiquidNext 错误？

问题在于缓存 dns：[https ://stackoverflow.com/questions/12392485/android-dns-caching](https://stackoverflow.com/questions/12392485/android-dns-caching)

# c - 以下表达式的行为是否定义明确？

> ID：12225639
> 
> 赞同：2
> 
> 时间：2012-09-01T06:58:11.673
> 
> 标签：c, sequence-points, c89

考虑以下表达式中的序列点

```
i = (++i,i++,i); 
```

如果我是正确的，执行步骤如下：

1)

```
++i, i++ 
```

2)

```
step1,i 
```

3)

```
i = step2 
```

对于步骤 1 中的评估，i 的值应该只修改一次，以便将构造称为定义（因为在评估逗号运算符之后有一个序列点）。但我认为情况并非如此。因此它应该是未定义的。请看这个[答案](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points/4176333#4176333)。这里上述表达式被称为定义。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T08:23:27.537

以下指令的行为是明确定义的。

```
i = (++i, i++, i); 
```

`,`在逗号运算符 ( )的第一个和第二个操作数的计算之间确实存在一个序列点。标准的附录 C 虽然提供了信息，但提供了对序列点的描述。

> **C11，附件 C 序列点**
> 
> 以下是5.1.2.3中描述的顺序点：
> 
> — 在函数调用和实际调用中函数指示符和实际参数的评估之间。(6.5.2.2)。
> 
> **— 在以下运算符的第一个和第二个操作数的计算之间：逻辑 AND && (6.5.13)；逻辑或 || （6.5.14）；逗号 , (6.5.17)。**
> 
> — 在条件的第一个操作数的评估之间？: 运算符以及计算第二个和第三个操作数中的任何一个（6.5.15）。— 完整声明符的结尾：声明符（6.7.6）；
> 
> — 在完整表达式的计算和要计算的下一个完整表达式之间。以下是完整的表达式： 不属于复合文字（6.7.9）的初始化器；表达式语句中的表达式 (6.8.3)；选择语句（if 或 switch）的控制表达式（6.8.4）；while 或 do 语句的控制表达式 (6.8.5)；for 语句 (6.8.5.3) 的每个（可选）表达式；return 语句 (6.8.6.4) 中的（可选）表达式。
> 
> — 紧接在库函数返回之前 (7.1.4)。— 在与每个格式化输入/输出函数转换说明符（7.21.6、7.29.2）相关的动作之后。
> 
> — 在每次调用比较函数之前和之后，以及在对比较函数的任何调用与作为参数传递给该调用的对象的任何移动之间（7.22.5）。

# ios - 如何在 CLI 中加密文件并使用 iOS 解密？

> ID：12225640
> 
> 赞同：1
> 
> 时间：2012-09-01T06:58:18.043
> 
> 标签：ios, encryption, openssl, aes

我在 bash 中解密用 openssl 加密的文件时遇到了一些问题。下面是我一步一步做的。我不知道哪里出了问题。

原始文件（以换行符结尾）：

```
123456
abcdef
ghijkl 
```

生成 32 字节长的随机密码：

```
$ openssl rand -hex 32
fec8950708098e9075e8b4df9a969aa7963c4d820158e965c7848dbfc8ca73ed 
```

加密文件：

```
$ openssl aes-128-ecb -in original.txt -out encrypted.txt 
```

关于加密文件：

```
$ file encrypted.txt
encrypted.txt: Non-ISO extended-ASCII text, with CR line terminators, with overstriking
$ cat encrypted.txt
Salted__??\z?F?z????4G}Q? Y?{ӌ???????b*?? 
```

调用解密方法的代码：

```
NSData *myDataDec = [self aesDecrypt:@"fec8950708098e9075e8b4df9a969aa7963c4d820158e965c7848dbfc8ca73ed" data:myData];
NSLog(@"decrypted: %@", [[NSString alloc] initWithData:myDataDec encoding:NSASCIIStringEncoding]); 
```

解密方法：

```
- (NSData *)aesDecrypt:(NSString *)key data:(NSData *)data
{  

    // 'key' should be 32 bytes for AES256, will be null-padded otherwise  
    char keyPtr[kCCKeySizeAES256+1]; // room for terminator (unused)  
    bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)   // fetch key data  
    [key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];   
    NSUInteger dataLength = [data length];   
    //See the doc: For block ciphers, the output size will always be less than or equal to the input size plus the size of one block.  //That's why we need to add the size of one block here
    size_t bufferSize = dataLength + kCCBlockSizeAES128;
    void *buffer = malloc(bufferSize);
    size_t numBytesEncrypted = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, 
                                          kCCAlgorithmAES128, 
                                          kCCOptionPKCS7Padding,
                                          keyPtr, 
                                          kCCKeySizeAES256,
                                          NULL /* initialization vector (optional) */,             
                                          [data bytes], 
                                          dataLength, /* input */             
                                          buffer, 
                                          bufferSize, /* output */             
                                          &numBytesEncrypted);  
    NSLog(@"cryptStatus: %d", cryptStatus);
    if (cryptStatus == kCCSuccess) 
    {   
        NSLog(@"aes success");
        //the returned NSData takes ownership of the buffer and will free it on deallocation   
        return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];  
    }   
    NSLog(@"aes error");
    free(buffer); //free the buffer;  
    return nil; 
} 
```

日志：

```
2012-09-01 15:08:51.331 My Project[75582:f803] cryptStatus: -4304
2012-09-01 15:08:51.332 My Project[75582:f803] aes error
2012-09-01 15:08:51.332 My Project[75582:f803] decrypted: 
```

kCCDecodeError 详细信息：

```
kCCDecodeError - Input data did not decode or decrypt properly. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:28:38.603

加密文件时，您似乎没有添加填充。解密时您似乎期待 PKCS7 填充。解密方法将自动检查正确的填充。如果它发现不正确的填充，那么它会抛出一个错误。

将 PKCS7 填充添加到您的加密方法中，看看会发生什么。

另请注意，ECB 不是安全模式。根据偏好使用 CBC 或 CTR 模式。如果您需要身份验证和加密，请使用 GCM 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T00:16:55.483

OpenSSL 使用非标准格式。AESencrypt 非常损坏（并且不安全）。把它们放在一起，这是行不通的。有关 iOS上与 OpenSSL 兼容的解决方案，请参阅[RNCryptor 。](https://github.com/rnapier/RNCryptor)OpenSSL 本身有很多问题，但它是我现在可以推荐的最佳命令行选项。

# eventbrite - 让我的应用程序出现在 EventBrite 网站上的最佳方式是什么？

> ID：12225643
> 
> 赞同：0
> 
> 时间：2012-09-01T06:58:29.140
> 
> 标签：eventbrite

如何在 EventBrite 网站上显示我的电子邮件营销应用程序（用于以新闻通讯的形式发送邀请）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T21:23:39.817

Eventbrite does not usually promote third-party solutions within their main product.
I would start by applying to be listed in their [application showcase](http://eventbrite.appstores.com). If that works out well, then they may be interested in [following-up with a blog post](http://blog.eventbrite.com/eventbrite-partners-with-leading-invitation-engine-paperless-post/), or evaluating other opportunities for cross-promotion.

# mysql - MySQL gem 只能从 ruby 命令行访问，而不是 apache localhost

> ID：12225646
> 
> 赞同：1
> 
> 时间：2012-09-01T06:58:47.233
> 
> 标签：mysql, ruby, apache

抬头，ruby n00b 试水——

操作系统 - OSX 10.7

/Library/WebServer/CGI-Executables 中的 test.rb：

```
#!/usr/bin/ruby
require 'mysql'

con = Mysql.new('localhost', 'root', 'root', 'rubytest')
rs = con.query('select * from people')
rs.each_hash { |h| puts h['name']}  
con.close 
```

从命令行运行时`ruby test.rb`，我得到的字段很好。当从本地主机（http://localhost/cgi-bin/test.rb）点击 test.rb 时，我在错误日志中得到一个 500 和一个关于 mysql 丢失的唠叨 -

阿帕奇错误日志：

```
[Fri Aug 31 23:47:22 2012] [error] [client 127.0.0.1] /Library/WebServer/CGI-Executables/test.rb:3:in `require': no such file to load -- mysql (LoadError)
[Fri Aug 31 23:47:22 2012] [error] [client 127.0.0.1] \tfrom /Library/WebServer/CGI-Executables/test.rb:3
[Fri Aug 31 23:47:22 2012] [error] [client 127.0.0.1] Premature end of script headers: test.rb 
```

我在 ~/.bashrc 中的导出路径：

```
export DYLD_LIBRARY_PATH="/usr/local/mysql/lib"
export PATH="$PATH:/usr/local/mysql/bin"
export PS1="$ " 
```

如果这有任何帮助，请运行`gem env | grep 'RUBY EXECUTABLE'`

```
RUBY EXECUTABLE: /Users/robertcox/.rvm/rubies/ruby-1.9.2-p318/bin/ruby 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:20:35.543

也许你需要更新 `gem install mysql2`

# c# - 如何从其子元素中获取 GridViewItem？

> ID：12225652
> 
> 赞同：1
> 
> 时间：2012-09-01T06:59:57.987
> 
> 标签：c#, xaml, gridview, windows-8

假设我在 XAML 中有这样的代码：

```
<GridView>
  <GridView.ItemTemplate>
<DataTemplate>
    <Button Content="{Binding test}" Click="ButtonClick" />
</DataTemplate>
</GridView.ItemTemplate>
</GridView> 
```

那我怎样才能得到选择了哪个**GridViewItem**呢？因为，通常所做的是将*ItemClick 功能添加到 GridView 本身*，但在这种情况下，我正在做一些定制的事情，需要从 Button 开始获取 SelectedItem。

我试过这样的代码：

```
void ButtonClick (object sender, RoutedEventArgs e)
{
   var g = (GridViewItem)((Button)sender).Parent;
} 
```

但它不起作用（返回 null）。请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:53:57.460

当然！这是我在广告控件无法加载广告时使用的代码（例如机器离线时）。在这种情况下，我将其从网格视图中删除。为此，我必须找到广告的父 gridviewitem 并删除整个内容。我这样做：

```
private void AdControl_ErrorOccurred_1(object sender, Microsoft.Advertising.WinRT.UI.AdErrorEventArgs e)
{
    var _Item = sender as DependencyObject;
    while (!(_Item is GridViewItem))
        _Item = VisualTreeHelper.GetParent(_Item);
    HubGrid.Items.Remove(_Item);
} 
```

# c# - C#：linq 中只有一种类型转换？

> ID：12225655
> 
> 赞同：1
> 
> 时间：2012-09-01T07:00:21.150
> 
> 标签：c#, linq

我有一个 gridview，每一行显示一个`MyCustomType`. 实例本身存储在`Tag`DataGridViewRow 的属性中。现在我想使用 linq 根据多个条件选择某些行。这看起来像这样：

```
var rows = grid_series.Rows
    .Cast<DataGridViewRow>()
    .Where(x => ((MyCustomType)x).myProperty != string.Empty)
    .Where(x => ((MyCustomType)x).myOtherProperty < 42); 
```

但我真的想避免`Tag`在每个`where`语句中都使用 -object。有没有办法只投射对象一次并重复使用？我考虑过首先使用 select 语句。然后我必须只应用一次演员表，但是我必须将每个结果“重新转换”回`DataGridViewRow`我认为不可能的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T07:03:56.923

之后选择`Tag`并执行另一个`Cast`（或`OfType<>`不是所有行包含 `MyCustomType`）怎么样：

```
var rows = grid_series.Rows
    .Cast<DataGridViewRow>().Select(r => r.Tag).Cast<MyCustomType>()
    .Where(x => x.myProperty != string.Empty)
    .Where(x => x.myOtherProperty < 42); 
```

如果您愿意`IEnumerable<DataGridViewRow>`，可以尝试：

```
var rows = grid_series.Rows
    .Cast<DataGridViewRow>()
    .Select(r => new { MyType = (MyCustomType)r.Tag, Row = r })
    .Where(x => x.MyType.myProperty != string.Empty)
    .Where(x => x.MyType.myOtherProperty < 42)
    .Select(x => x.Row); 
```

# c# - 无法将类强制转换为 C# 中的泛型类

> ID：12225662
> 
> 赞同：0
> 
> 时间：2012-09-01T07:01:16.807
> 
> 标签：c#, generics, inheritance

我是 C# 泛型的新手，所以请多多包涵。我想将（比如说）NodeRef 类型的对象转换为 NodeRef<TNode>。是否可以？如果，是，如何？目前这就是我所拥有的

```
public class Program
{
    static void Main(string[] args)
    {
        var nodeRef = new NodeRef();
        var newNodeRef = (NodeRef<MyNode>) nodeRef;
        //above line throws up at Runtime.
    }
}

public class NodeRef
{
    private int id;
}

public class NodeRef<TNode> : NodeRef
{
    private TNode tNode;

    public void Print()
    {
      Console.WriteLine(tNode.ToString());
    }
} 
```

我目前收到此异常：System.InvalidCastException。

编辑：

但是，为什么它不会引发编译时错误？MyNode 只是一个虚拟类

```
public class MyNode 
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T07:04:08.527

这个问题不是因为您使用的是泛型。问题是这`NodeRef<T>` *是一个* `NodeRef`. 但并非所有`NodeRef`都是必然的`NodeRef<T>`。这取决于您第一次调用时所写的内容`new`。

如果您将派生对象编写为如下所示，也会发生这种情况：

```
public class SomeDerivedClass : NodeRef
{
    // ...
}

static void Main(string[] args)
{
    var nodeRef = new NodeRef();
    var newNodeRef = (SomeDerivedClass) nodeRef;
} 
```

要使强制转换起作用，您必须强制转换为与实际实例相同的类型（调用时指定的类型`new`）或其基类之一。例如，这段代码不会抛出异常：

```
public class Program
{
    static void Main(string[] args)
    {
        NodeRef nodeRef = new NodeRef<MyNode>();
        var newNodeRef = (NodeRef<MyNode>) nodeRef;
    }
} 
```

像这样的强制转换不会将对象实例的类型转换为另一种类型（除非您编写了自定义转换运算符，而您在这里没有这样做）。这些类型的转换只是让您告诉编译器“我知道该对象实际上是另一种类型。让我以这种方式处理它”。如果您犯了错误，.Net 框架将在您运行程序时抛出异常。

# javascript - 在 WordPress 站点中加载 jquery.js 后加载 javascript 代码

> ID：12225664
> 
> 赞同：5
> 
> 时间：2012-09-01T07:01:27.643
> 
> 标签：javascript, jquery, wordpress, wordpress-theming

我在 WordPress 网站的主页上有一个基于 jquery 的自定义滑块。我正在使用我主题的functions.php文件中的以下代码加载jQuery（jquery.js）和滑块js（jquery.advanced-slider.js）。

```
function my_load_scripts() {
  if (!is_admin()) {
    wp_enqueue_script("jquery");

    if (is_home()) {
      wp_enqueue_script('theme-advanced-slider', get_template_directory_uri().'/js/jquery.advanced-slider.js', array('jquery'));
      wp_enqueue_script('theme-innerfade', get_template_directory_uri().'/js/innerfade.js', array('jquery'));
    }
  }
} 
```

add_action('wp_enqueue_scripts', 'my_load_scripts');

现在我把下面的代码放在我的 header.php 文件之前 wp_head();

```
<script type="text/javascript">
  var $j = jQuery.noConflict();

  $j(document).ready(function () {
    //Slider init JS
    $j(".advanced-slider").advancedSlider({
      width: 614,
      height: 297,
      delay: 1000,
      pauseRollOver: true
    });
  });
</script> 
```

很明显，我的 jquery.js 和 jquery.advanced-slider.js 在上面的 JavaScript 代码之后加载，因此我的滑块不起作用。`<head>`如果我把它放在滑块工作中的wp_head() 调用之后。

但是，如果我把它放在 wp_head() 之后，那不是 hack 吗？我希望我的代码是干净的。正如二十一主题清楚地表明

```
/* Always have wp_head() just before the closing </head>
     * tag of your theme, or you will break many plugins, which
     * generally use this hook to add elements to <head> such
     * as styles, scripts, and meta tags.
     */ 
```

我在这里很困惑。我可能在这里遗漏了一些非常简单的线索。但请帮帮我。将 JavaScript 放在 wp_head() 之前并在 jquery.js 和 slider.js 加载之后加载它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T07:30:30.903

根据 wordpress 函数参考：

> 将 JavaScript 添加到 WordPress 生成的页面的安全且推荐的方法是使用 wp_enqueue_script()。如果尚未包含该脚本，则此函数将包含该脚本，并安全地处理依赖关系。

如果你想保持你的“代码干净”，你可能会重新考虑你的 js 是如何组织的。我使用 wordpress 的方法是（通常）为所有初始化和小脚本保留一个 scripts.js，并为插件保留一个单独的文件。但一切都取决于您拥有的文件大小和数量——您希望避免太多的 http 请求和难以管理的文件。

同样， wp_enqueue_script 允许您将脚本放在页脚中。 [http://codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T07:04:50.047

将您的脚本块添加到 HTML 页面的底部，就在`</body>`.

无论如何，在浏览器中解析完整的 DOM 之前，您的滑块初始化 JS 代码不会被执行，因此这没有缺点。

事实上，像 Steve Souders 这样的 Web 性能专家[建议应该在 HTML 页面的末尾添加脚本块，](http://www.stevesouders.com/blog/2009/05/06/positioning-inline-scripts/)因为脚本块会阻止渲染，这样页面加载速度会更快。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T07:36:47.950

等待加载带有`window.onload`函数的 jQuery，一旦加载了`jQuery`文件和其他 js / 内容，`window.onload`函数就会被触发。

```
<script type="text/javascript">
window.onload = function(){

var $j = jQuery.noConflict();
    $j(".advanced-slider").advancedSlider({
        width:614,
        height:297,
        delay:1000,
        pauseRollOver:true
    });
}
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-03T00:38:28.287

您添加到页面底部的代码应该外部化到它自己的文件中，并添加`wp_enqueue_script();`如下所示的函数。

请注意在每次调用 wp_enqueue_script 结束时使用“true”指令。这告诉 WordPress 您希望它们包含在应该直接出现在结束标记之前的`wp_footer();`钩子（而不是钩子）中- 根据其他人提到的性能最佳实践。`wp_head();``</body>`

```
function my_load_scripts() {

    if (is_home()) {
        wp_enqueue_script('theme-advanced-slider', get_template_directory_uri().'/js/jquery.advanced-slider.js', array('jquery'), true);
        wp_enqueue_script('theme-innerfade', get_template_directory_uri().'/js/innerfade.js', array('jquery'), true);
        wp_enqueue_script('your-custom-script', get_template_directory_uri().'/js/yourcustomscript.js', array('jquery'), true);
        }
    }

}
add_action('wp_enqueue_scripts', 'my_load_scripts'); 
```

我已经删除了您包含的 jQuery enqueue 行，因为您不需要注册 jQuery 脚本，因为它已经由 WP 核心注册，并且由于您已将其定义为依赖项之一，它将为您包含在内。

由于您已将其全部包装在`is_home()`条件语句中，因此所有 3 个文件（加上 jQuery）将仅包含在主页中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-31T10:04:26.410

一个更简单（但可能不是很好）的技巧是简单地添加一个 1 毫秒的超时

```
setTimeout(function () {
    jQuery('#text-6').insertBefore('#header'); 
}, 1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-18T07:09:42.880

`get_template_directory_uri()`确实为您提供了主题目录，但如果您使用的是子主题，这不是您想要的。

`get_stylesheet_directory_uri()`将为您提供“当前主题”的目录，因此无论哪种情况，使用它都是最安全的。

# android - 用于同步的 SyncML 或 JSON 之间的区别

> ID：12225665
> 
> 赞同：0
> 
> 时间：2012-09-01T07:01:30.963
> 
> 标签：android, json, syncml

我想将联系人、日历信息从移动设备同步到服务器。SyncML 是实现的正确选择，还是也可以使用 JSON？这两者有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:28:27.770

同步标记语言 (SyncML) 是与服务器同步数据的标准格式。它基于 XML。

如果您打算使用像**Funambol**这样的单独同步服务器，它使用 SyncML 来同步联系人和日历。那么您与 SyncML 无关。

如果您要使用自定义应用程序同步联系人信息，那么 json 将是一个不错的选择。

# c - 在 OpenMP 中启动多少个线程？

> ID：12225666
> 
> 赞同：3
> 
> 时间：2012-09-01T07:01:38.783
> 
> 标签：c, multithreading, multiprocessing, openmp

我是 OpenMP Programming 的新手，我已经在 GCC 上执行了几个 open-mp 示例程序。我想知道我将如何决定启动多少线程（即如何决定 omp_set_num_threads() 函数的参数）以在双核英特尔处理器上获得更好的性能。

****这是我的示例程序****

```
#include<math.h>

#include<omp.h>
#include<stdio.h>
#include<time.h>
#define CHUNKSIZE 10
#define N 100000
#define num_t 10

void main ()  
{
    int runTime;
    int i, chunk;
    int a[N], b[N], c[N],threads[num_t];
    int thread_one=0,thread_two=0;
    clock_t start,end;
    omp_set_num_threads(num_t); 
    /* Some initializations */
    for (i=0; i < N; i++)
    a[i] = b[i] = i + 2.0;
    chunk = CHUNKSIZE;
        #pragma omp parallel shared(a,b,c,chunk,threads) private(i)
    {

            #pragma omp for schedule(dynamic,chunk)
            for (i=0; i < N; i++)
            {
                c[i] = pow((a[i] * b[i]),10);
                threads[omp_get_thread_num()]++;

            }
    }  /* end of parallel section */
    for(i=-1;i<num_t;i++)
    printf("Thread no %d : %d\n",i,threads[i]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T10:07:34.247

我的建议：**不要打扰**。如果它是一个计算密集型应用程序（openmp 主要用于和你在这里有什么），那么库本身将很好地管理所有内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T07:36:28.950

根据经验，首先尝试将线程数设置为机器的内核数。然后尝试减少这个数字，看看是否有任何改善。

`omp_set_num_threads`顺便说一句，设置环境变量比使用，`OMP_NUM_THREADS`更方便做这样的测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T08:22:24.047

最佳线程数取决于许多参数，很难设计出一般的经验法则。

对于获取/计算比率较低的计算密集型任务，最好将线程数设置为等于 CPU 内核数。

对于繁重的内存绑定任务，增加线程数可能会在线程数等于内核数之前使内存带宽饱和。循环向量化会显着影响单个线程的内存带宽。在某些情况下，线程在 CPU 缓存中共享大量数据，但在某些情况下 - 它们不会，并且增加它们的数量会减少可用的缓存空间。此外，NUMA 系统通常提供比 SMP 更好的带宽。

在某些情况下，使用比内核更多的线程可以获得最佳性能 - 当在每个任务中观察到大量阻塞等待时确实如此。有时 SMT 或超线程可以隐藏内存延迟，有时则不能，这取决于正在执行的内存访问类型。

除非您可以对代码性能进行建模并对运行的最佳线程数做出有根据的猜测，否则只需尝试几个值。

# c++ - Visual C++ 2012 中的正弦计算不一致？

> ID：12225668
> 
> 赞同：8
> 
> 时间：2012-09-01T07:01:45.933
> 
> 标签：c++, c, visual-c++, assembly, x87

考虑以下代码：

```
// Filename fputest.cpp

#include <cmath>
#include <cstdio>

int main()
{
    double x;
    *(__int64 *) &x = 0xc01448ec3aaa278di64; // -5.0712136427263319
    double sine1 = sin(x);
    printf("%016llX\n", sine1);
    double sine2;
    __asm {
    fld x
    fsin
    fstp sine2
    }
    printf("%016llX\n", sine2);
    return 0;
} 
```

使用 Visual C++ 2012 ( `cl fputest.cpp`) 编译并执行程序时，输出如下：

```
3FEDF640D8D36174
3FEDF640D8D36175 
```

问题：

*   为什么这两个值不同？
*   是否可以发布一些编译器选项，以便计算的正弦值完全相同？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-01T12:23:22.073

这个问题不是由 long double 到 double 的转换引起的。这可能是由于`sin`数学库中的例程不准确。

该`fsin`指令指定为在其范围内的操作数（根据英特尔 64 和 IA-32 架构软件开发人员手册，2011 年 10 月，第 1 卷，8.3.10）在 1 ULP（长双精度格式）内产生结果到最近模式。在英特尔酷睿 i7 上，`fsin`提问者的值，-5.07121364272633190495298549649305641651153564453125 或 -0x1.448ec3aaa278dp+2，产生 0xe.fb206c69b0ba402p-4。我们可以很容易地从这个十六进制看到最后 11 位是 100 0000 0010。这些是从 long double 转换时将被舍入的位。如果它们大于 100 0000 0000，则数字将向上取整。他们更大。因此，将这个 long double 值转换为 double 的结果是 0xe.fb206c69b0ba8p-4，等于 0x1.df640d8d36175p-1 和 0.93631021832247418590355891865328885614871978759765625。另请注意，即使结果低一个 ULP，最后 11 位仍将大于 100 0000 0000 并且仍会向上取整。因此，此结果在符合上述文档的 Intel CPU 上应该不会有所不同。

`sin`将此与使用产生正确舍入结果的理想例程直接计算双精度正弦进行比较。的值的正弦近似0.93631021832247413051857150785044253634581268961333520518023697738674775240815140702992025520721336793516756640679315765619707343171517531053811196321335899848286682535203710849065933755262347468763562（的Maple 10计算的）。最接近此的双精度为 0x1.df640d8d36175p-1。这与我们通过将`fsin`结果转换为 double 获得的值相同。

因此，差异不是由 long double 转换为 double 引起的；将 long double结果转换为 double 会产生与理想双精度例程`fsin`完全相同的结果。`sin`

`sin`对于提问者的 Visual Studio 包所使用的例程的准确性，我们没有规范。在商业图书馆中，允许 1 个 ULP 或多个 ULP 的错误是很常见的。观察正弦与双精度值舍入的点有多接近：距双精度值的距离为 0.498864 ULP（双精度 ULP），因此距舍入更改的点为 0.001136 ULP。因此，即使例程中非常轻微的不准确`sin`也会导致它返回 0x1.df640d8d36174p-1 而不是更接近的 0x1.df640d8d36175p-1。

因此，我推测差异的来源是`sin`例程中的一个非常小的不准确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T07:24:07.160

（注意：正如评论中提到的，这在 VC2012 上不起作用。我把它留在这里作为一般信息。我不建议依赖任何依赖于优化级别的东西！）

我没有 VS2012，但是在 VS2010 编译器上你可以`/fp:fast`在命令行上指定然后我得到相同的结果。这会导致编译器生成“快速”代码，这些代码不一定完全遵循 C++ 中所需的舍入和规则，但与您的汇编语言计算相匹配。

我不能在 VS2012 中尝试这个，但我想它有相同的选项。

这似乎也只能在优化的构建中`/Ox`作为一个选项起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T07:56:52.590

请参阅[为什么即使 x == y 也是 cos(x) != cos(y)？](http://www.parashift.com/c++-faq/floating-point-arith2.html)

正如[大卫在评论中提到的那样](https://stackoverflow.com/questions/12225668/sine-computation-inconsistency-in-visual-c-2012#comment16381548_12225668)，差异来自将 FP 寄存器中的数据移动到不同大小的内存位置（寄存器/ram）。而且也不总是分配；即使是另一个附近的浮点操作也足以刷新 FP 寄存器，从而使任何试图保证特定值的尝试都徒劳无功。如果您需要进行比较，您可以通过将所有结果强制到内存位置来缓解其中的一些问题，如下所示：

```
float F1 = sin(a); float F2 = sin(b); if (F1 == F2) 
```

但是，即使这样也可能行不通。最好的方法是接受任何浮点运算只会“大部分准确”，并且从程序员的角度来看，即使重复执行相同的运算，这个错误实际上也是不可预测的和随机的。代替

```
if (F1 == F2) 
```

你应该使用一些东西

```
if (isArbitrarilyClose(F1, F2)) 
```

或者

```
if (absf(F1 - F2) <= n) 
```

哪里`n`是一个很小的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T12:49:43.450

VS2012 中的代码生成器进行了重大更改以支持[自动矢量化](https://channel9.msdn.com/Events/Windows-Camp/Developing-Windows-8-Metro-style-apps-in-Cpp/Getting-the-most-out-of-the-MSVC-compiler-AutoVectorizer)。部分更改是 x86 浮点数学现在在 SSE2 中完成，不再使用 FPU，这是必要的，因为 FPU 代码无法向量化。SSE2 使用 64 位精度而不是 80 位精度进行计算，因此结果很有可能由于舍入而偏离一位。也是@J99在VS2010中可以与/fp:fast得到一致结果的原因，其编译器仍然使用FPU，而/fp:fast直接使用FSIN结果。

此功能有很多好处，请查看链接网址上的 Jim Hogg 的视频，了解如何利用它。

# java - 变量的默认下拉值

> ID：12225674
> 
> 赞同：0
> 
> 时间：2012-09-01T07:03:05.330
> 
> 标签：java, html, jsp

我正在编辑屏幕上工作。我需要下拉列表来填充 1 个表中的预选值并突出显示另一个表中的这些值。我能够达到在调试语句中正确显示来自不同表的两个值的地步。

问题是......当尝试在下拉列表中显示时，预选值不仅仅是选择现有值，而是将其添加到下拉列表中。你能告诉我我在哪里输入错误的代码吗？问题在以下几行：

> if (site.equals(SiteName)){ %> <%=SiteName%> <%
> } %>

但是这个问题的解决方法是什么，谁能告诉我？

这是我的代码片段。

> for (int i = 0; siteList != null && i < siteList.size(); i++){ Site s = (Site)siteList.get(i); int siteid = s.getID().intValue(); 站点 = s.getSitename();
> 
> ```
>  if (site.equals(SiteName)){
>            %>
>               <option selected="selected" >  <%=SiteName%>  </option> 
> 
>           <%  
>               } 
>            %> 
>               <option value="<%=siteid%>"><%=site%>  </option><%
> 
>               } 
>               }catch(Exception e){
>               e.getMessage();
>               }
>           %> 
>       </select> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:56:14.900

您错过了`else`代码中的 a 。这样的事情会有所帮助：

```
<%
    for (int i = 0; siteList != null && i < siteList.size(); i++){
        Site s = (Site) siteList.get(i); 
        int siteid = s.getID().intValue(); 
        site = s.getSitename();

        if (site.equals(SiteName)){
%> 
            <option selected="selected" >  <%=SiteName%>  </option> 
<%  
        } //end of if-statement
        else{ 
%> 
            <option value="<%=siteid%>"><%=site%>  </option>
<%
        } //End of else
    } //End of for 
  }catch(Exception e){
    e.getMessage();
  }
%> 
</select> 
```

**注意：**您尚未指定`try`-block 的开始位置，因此请在代码中注意这一点。我只能看到`catch`-block 并且我假设您的`try`块`for`在代码中的 -loop 之前开始。

# java - 创建 Item 对象的子集

> ID：12225677
> 
> 赞同：1
> 
> 时间：2012-09-01T07:03:32.990
> 
> 标签：java

嘿伙计们，我有我用来创建 Item 对象的类 Item

```
 public class Item {

 private String id; 
 private int count;
 private String  name;

public int getcount()
{
   return this.count; 
}

public Item(String name)
 {
     this.name=name;
     this.id = "";

 }

public Item(String id, String name)
 {
     this.name=name;
   this.id=id;

 }

public Item(int count)
{
    this.count=count;
}

public String getItemName()
{
    return this.name;
}

public String getItemId()
{
    return this.id;
}

public Item returnItems(ItemList itemset)
{
    Item item=null;

    return item;
}

} 
```

我有存储项目列表的 ItemList 类。这是添加项目对象列表

```
public  class ItemList implements Iterable<Item> 
{

  private List<Item> hold=new ArrayList<Item>();

  ItemList(Item item)
{

  this.hold.add(item); 
}

ItemList() {
    //throw new UnsupportedOperationException("Not yet implemented");
}

public List<Item> getItemSet()
{
    return this.hold;

}

public void addItems(Item item)
{
    //hold = new ArrayList<Item>();
    this.hold.add(item);
}

@Override
public Iterator<Item> iterator() {
     Iterator<Item> item = hold.iterator();
    return item; 
}

} 
```

假设我最初将 I1,I2,I3 项目对象添加到项目列表中，如下所示

```
 {I1}
 {I2}
 {I3} 
```

现在我想按如下方式创建 Item 对象的子集并添加到 ItemList ，其中每个子集将包含 2 个 Item

```
 {I1 I2}
     {I1 I3}
     {I2 I3} 
```

请帮助创建一个子集稍后我什至想要2个或更多项目的子集我想编写一个函数来帮助我创建n个项目的子集请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:31:14.930

我个人认为您的 ItemList 类的 API 不会帮助您实现目标。
您需要使用[Sets](http://docs.oracle.com/javase/tutorial/collections/interfaces/set.html)，以便使用“集合论”API
（即交集、联合等）。
您的 ItemList 类可能应该有一个“asSet”方法将 ItemList 连接到 Set。
您将需要实施“PowerSet”计算以获取所有可能的项目子集。
使用 Set API 实现它比不使用它更容易。
你也可以使用一些来自互联网的开源——例如，我现在用谷歌搜索，发现[了这个](http://code.google.com/p/jannocessor/source/browse/jannocessor-collections/src/main/java/org/jannocessor/collection/impl/PowerLinkedHashSet.java?spec=svnc1d17cc8acc5f76a395c9292630ad00ca69c524d&r=c1d17cc8acc5f76a395c9292630ad00ca69c524d)——
查看了这个 URL 指向的类实现的 PowerSet 的接口。

# javascript - Firefox 15 中的 HTML5 问题

> ID：12225678
> 
> 赞同：2
> 
> 时间：2012-09-01T07:03:49.123
> 
> 标签：javascript, html, firefox

我在使用 Firefox for HTML5 时遇到问题，下面的代码应该可以在 Opera 和 Google Chrome 中正常运行，但在 Firefox 15 上失败（在 Firefox 14 上运行良好）

[http://jsfiddle.net/bV54P/2/](http://jsfiddle.net/bV54P/2/)

mousemove 事件上的线条有时在 Firefox 中绘制，有时显示为空白，不确定是什么问题！

显示消息（“完成”）记录在控制台上

有人面临同样的问题吗？

**更新：**似乎是 Firefox 中的一个错误，在此处发布：[https ://bugzilla.mozilla.org/show_bug.cgi?id=787623](https://bugzilla.mozilla.org/show_bug.cgi?id=787623)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T07:41:44.740

我猜这是 Firefox 15 中的一个错误，画布上下文已绘制（如在窗口/iframe 调整大小或 DOM 更改上观察到的那样），您应该将其报告给：[https ://bugzilla.mozilla.org/](https://bugzilla.mozilla.org/)

# symfony - 无法在 symfony 中运行命令

> ID：12225683
> 
> 赞同：1
> 
> 时间：2012-09-01T07:04:17.287
> 
> 标签：symfony

嘿，我正在使用教程处理表单`http://symfony.com/doc/current/book/forms.html` 我创建了一个简单的表单并将数据配置`parameter.ini`如下：

```
database_driver   = pdo_mysql
    database_host     = localhost
    database_port     =
    database_name     = symfony
    database_user     = root
    database_password = 123456 
```

当我在本地主机上运行时，我收到以下错误：

```
Connection refused
500 Internal Server Error - ConnectionException 
```

为什么会在这里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:51:37.550

您是否运行控制台命令来构建架构、创建数据库和表？

任务

```
php app/console doctrine:schema:update 
```

应该运行或在控制台上为您提供详细的错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T07:06:56.727

只是猜测，但看起来你没有更改密码。这是基本配置：

```
parameters:
    database_driver:   pdo_mysql
    database_host:     localhost
    database_port:     ~
    database_name:     symfony
    database_user:     root
    database_password: root 
```

# google-tv - 如何在谷歌电视上为我的 Android 应用播放 youtube 远程视频网址

> ID：12225696
> 
> 赞同：-1
> 
> 时间：2012-09-01T07:05:54.367
> 
> 标签：google-tv

我是在 google tv 上开发应用程序的新手。我想在 google tv 中运行我的 android 电影应用程序。所以，如何在 google tv 上开发我的电影应用程序并在单击 google tv 中的 mvies 列表时从给定的远程 url 播放 youtube 电影。请给出建议或示例代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:20:51.713

请参阅 Google TV 开发者指南：

[https://developers.google.com/tv/android/](https://developers.google.com/tv/android/docs/gtv_demo_samples)

和示例应用程序：

> [https://developers.google.com/tv/android/docs/gtv_demo_samples](https://developers.google.com/tv/android/docs/gtv_demo_samples)

# java - 日食 juno 和 jsf 2.1

> ID：12225698
> 
> 赞同：0
> 
> 时间：2012-09-01T07:06:07.473
> 
> 标签：java, eclipse, jsf

eclipse 不允许我使用 JSF 2.1 创建项目，因为“所需的类 javax.faces.FactoryFinder 在选定的库中不存在”，但该类确实存在。

适用于 jsf 2.0.9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T07:50:23.407

这是因为您可能会在 web-inf/lib 文件夹中添加您的 JSF jar 文件，然后在您的 jsf 配置中添加此 jar。

# objective-c - 在循环中阻塞以进行分页

> ID：12225701
> 
> 赞同：1
> 
> 时间：2012-09-01T07:06:12.297
> 
> 标签：objective-c, block, instagram

使用以下代码，我尝试通过分页读取 Instagram API 内容。在 FOR 循环中，我打算调用方法 loopData 以获取带有块的内容，该块在每个循环中都有一个新的页面 id。

...

```
 for (int a = 1; a <= 3; a++)
    {
       NSLog(@"Loop count: %i", a);

       [self loopData];
    }

-(void)loopData 
{
    NSString *next;
    next = [Globals sharedGlobalData].nextMaxId;

    [client getUserMedia:[userTextField stringValue]
                   count:kCount
                   minId:-1
                   maxId:next
                 success:^(NSArray *media) {
                     [textView setString:[media description]];

                     NSLog(@"Next_Max_Id: %@ ", [Globals sharedGlobalData].nextMaxId);

                 }
                 failure:^(NSError *error, NSInteger statusCode) {
                     [self logError:@"media" error:error statusCode:statusCode];
                 }
     ];
} 
```

我的问题是，该块运行你的时间，但不是在每个循环周期。该块在 for 循环完成后运行。因此，新的页面 id 不能传递给块。

日志如下所示： 循环 1 循环 2 循环 3

通过块读取内容 通过块读取内容 通过块读取内容

非常感谢您的想法！

--- getUserMedia 的实现

```
// Get a user's media
- (void)getUserMedia:(NSString*)userId // Can be 'self' for the current user
               count:(int)count 
               minId:(int)minId // -1 for start
               maxId:(int)maxId // -1 for no upper limit
             success:(void (^)(NSArray* media))success
             failure:(void (^)(NSError* error, NSInteger statusCode))failure {
    // Setup the parameters
    NSMutableDictionary* parameters = [NSMutableDictionary dictionaryWithObjectsAndKeys: [NSNumber numberWithInt:count], @"count",  nil];
    if (minId > 0) [parameters setObject:[NSNumber numberWithInt:minId] forKey:@"minId"];
    if (maxId > 0) [parameters setObject:[NSNumber numberWithInt:maxId] forKey:@"maxId"];

    // Fire the get request
    [self getPath:[NSString stringWithFormat:@"users/%@/media/recent", userId]
       modelClass:[InstagramMedia class]
       parameters:parameters
       collection:success
           single:nil
          failure:failure];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T16:17:48.973

您传递给此方法的块是异步执行的。客户端发起异步网络请求，调用该方法后立即返回。一旦网络请求成功或失败，您传递给它的块之一就会被调用。这几乎是任何将块用于此类回调的 API 的标准行为。

我不完全确定你在块内尝试做什么`nextID`和诸如此类的事情，但你需要知道这一点：1）块不会在循环中运行，2）它们不会在任何保证的情况下运行命令。因此，无论您要解决什么问题，都需要牢记这一点。

希望这会有所帮助，如果您有任何问题，请告诉我。

# vb.net - 后台工作线程未在取消时结束

> ID：12225702
> 
> 赞同：0
> 
> 时间：2012-09-01T07:06:27.450
> 
> 标签：vb.net, visual-studio-2010, visual-studio, backgroundworker

我有一个小问题，我终于想出了如何向我的应用程序添加后台工作程序，现在我唯一的问题是它没有结束线程，或者至少在我单击取消按钮时速度不够快。我一定做错了什么。我希望它在单击按钮后立即中止线程。这可行吗？我的主题绝不是广泛的。

我将发布一些我正在做的事情的例子。

```
 Public Sub New()
    InitializeComponent()

    bw.WorkerReportsProgress = True
    bw.WorkerSupportsCancellation = True
    AddHandler bw.DoWork, AddressOf bw_DoWork
    ' AddHandler bw.ProgressChanged, AddressOf bw_ProgressChanged
    AddHandler bw.RunWorkerCompleted, AddressOf bw_RunWorkerCompleted
End Sub 
```

我的 DoWork 活动

```
 Private Sub bw_DoWork(ByVal sender As Object, ByVal e As DoWorkEventArgs)

    If bw.CancellationPending = True Then
        e.Cancel = True
        WorkEventRunning = False

    Else

        CheckForIllegalCrossThreadCalls = False
        Dim worker As BackgroundWorker = CType(sender, BackgroundWorker)
        'my long winded event
         ' more of my long winded event.

   End if 
```

我的取消按钮代码

```
 Private Sub ToolStripButton2_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ToolStripButton2.Click
    'Stop
    If bw.WorkerSupportsCancellation = True Then
        WorkEventRunning = False
        bw.CancelAsync()
        bw.Dispose()

    End If 
```

我的工作已完成

```
 Private Sub bw_RunWorkerCompleted(ByVal sender As Object, ByVal e As RunWorkerCompletedEventArgs)
    If e.Cancelled = True Then
        'canceled
        WorkEventRunning = False
    ElseIf e.Error IsNot Nothing Then
        MsgBox(e.Error.Message)
    Else
        'done
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:41:33.507

在 DoWork 事件中，测试`long winded event`. 假设这个长过程包含一个 For-Loop 或一个 ForEach 然后在每个循环测试 CancellationPending

例如：

```
Dim worker As BackgroundWorker = CType(sender, BackgroundWorker)
Dim x as Integer
For x = 0 to 1000000
    If worker.CancellationPending = True Then 
        e.Cancel = True 
        Return 
    Else 
       .... ' Execute the works for this loop
    End If
Next 
```

可以在 RunWorkerCompleted 事件中进行相同的测试，因为 CancelAsync() 设置了 CancellationPending 属性的内部值。[请参阅此问题](https://stackoverflow.com/questions/12222436/backgroundworker-runworkercompleted-event-in-wpf/12222570#12222570)以了解 CancelAsync() 的内部工作原理

# sql - 使用 Join 和 Group By 更新语句

> ID：12225715
> 
> 赞同：29
> 
> 时间：2012-09-01T07:09:14.337
> 
> 标签：sql, sql-server-2008, join, group-by, update-statement

我已经编写了以下更新语句，但它显示了诸如“关键字'GROUP'附近的语法不正确”之类的错误。

```
UPDATE 
       J
SET 
       J.StatusID = CASE WHEN SUM(DUV.VendorDUQuantity) = SUM(RD.InvoiceQuantity) THEN 1 ELSE J.StatusID END
FROM
        PLN_DU_Vendor DUV
    INNER JOIN ENG_Release R ON R.ReleaseID = DUV.ReleaseID
    INNER JOIN ENG_DU_Header H ON H.ReleaseID = R.ReleaseID AND DUV.DUID = H.DUID
    INNER JOIN MKT_JobOrder J ON J.JobOrderID = R.JobOrderID
    INNER JOIN MKT_CustomerOrder CO ON CO.OrderID = J.OrderID
    LEFT JOIN PMT_RFDHeader RH ON RH.JobOrderID = J.JobOrderID
    LEFT JOIN PMT_RFDDetail RD ON RD.RFDID = RH.RFDID AND RD.DUID = DUV.DUID                 
WHERE 
        CO.OrderID = 100
GROUP BY 
        J.JobOrderID 
```

Select 不是更新，而是完美地适用于上述查询。会出现什么问题以及如何编写基于 Join 和 Group By 子句的查询。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-01T07:17:46.680

您可以尝试将 group by 放在子查询中，然后通过“JobOrderID”加入，如下所示：

```
UPDATE J
SET J.StatusID = A.statusId
FROM MKT_JobOrder J
INNER JOIN (
    SELECT J.JobOrderID
        , CASE 
            WHEN SUM(DUV.VendorDUQuantity) = SUM(RD.InvoiceQuantity)
                THEN 1
            ELSE J.StatusID
            END AS statusId 
    FROM PLN_DU_Vendor DUV
    INNER JOIN ENG_Release R ON R.ReleaseID = DUV.ReleaseID
    INNER JOIN ENG_DU_Header H ON H.ReleaseID = R.ReleaseID
                               AND DUV.DUID = H.DUID
    INNER JOIN MKT_JobOrder J ON J.JobOrderID = R.JobOrderID
    INNER JOIN MKT_CustomerOrder CO ON CO.OrderID = J.OrderID
    LEFT JOIN PMT_RFDHeader RH ON RH.JobOrderID = J.JobOrderID
    LEFT JOIN PMT_RFDDetail RD ON RD.RFDID = RH.RFDID
                               AND RD.DUID = DUV.DUID
    WHERE CO.OrderID = 100
    GROUP BY J.JobOrderID
           , J.StatusID
    ) A ON J.JobOrderID = A.JobOrderID 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T07:17:28.637

用户子查询改为执行此操作

```
UPDATE 
   J
 SET StatusID = x.Status
   FROM 
   (select CASE WHEN SUM(DUV.VendorDUQuantity) = SUM(RD.InvoiceQuantity) THEN 1 
    ELSE   J.StatusID END as Status 
     JobOrderID
     FROM
    PLN_DU_Vendor DUV
    INNER JOIN ENG_Release R ON R.ReleaseID = DUV.ReleaseID
    INNER JOIN ENG_DU_Header H ON H.ReleaseID = R.ReleaseID AND DUV.DUID = H.DUID
INNER JOIN MKT_JobOrder J ON J.JobOrderID = R.JobOrderID
INNER JOIN MKT_CustomerOrder CO ON CO.OrderID = J.OrderID
LEFT JOIN PMT_RFDHeader RH ON RH.JobOrderID = J.JobOrderID
LEFT JOIN PMT_RFDDetail RD ON RD.RFDID = RH.RFDID AND RD.DUID = DUV.DUID                 
WHERE 
    CO.OrderID = 100
 GROUP BY 
    J.JobOrderID) X
 INNER JOIN MKT_JobOrder J On x.JobOrderID = J.JobOrderID 
```

# javascript - 如何获取以“add_”开头的字符

> ID：12225716
> 
> 赞同：2
> 
> 时间：2012-09-01T07:09:12.993
> 
> 标签：javascript, regex

我有一个字符串“add_dinner”、“add_meeting”、“add_fuel_surcharge”，我想获取前面有“add_”的字符（晚餐、会议、fuel_surcharge）。

```
[^a][^d]{2}[^_]\w+ 
```

我试过这个，但它只适用于“add_dinner”

```
[^add_]\w+ 
```

这个适用于“add_fuel_surcharge”，但从“add_dinner”中获取“inner”

请帮助我理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T07:12:33.590

使用捕获组：

```
/^add_(\w+)$/ 
```

检查返回的数组以查看结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T07:12:33.200

由于 JavaScript 不支持后向断言，因此您需要使用捕获组：

```
var myregexp = /add_(\w+)/;
var match = myregexp.exec(subject);
if (match != null) {
    result = match[1];
} 
```

`[^add_]``a`是一个字符类，匹配除,`d`或之外的单个字符`_`。当应用于 时`add_dinner`，它匹配的第一个字符是`i`，`\w+`然后匹配`nner`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T07:15:02.843

该`[^...]`构造匹配除列出的字符之外的任何单个字符。因此`[^add_]`匹配除“a”、“d”或“_”之外的任何单个字符。

如果您想在 之后检索该位，`_`您可以执行以下操作：

```
/add_(\w+_)/ 
```

括号“捕获”内部表达式的一部分。因此，要从字符串中获取实际文本：

```
var s = "add_meeting";
var result = s.match(/add_(\w+)/)[1]; 
```

这假设字符串将匹配，以便您可以直接获取返回数组中的第二个元素，该元素将是匹配的“会议”部分`(\w+)`。

如果您有可能测试一个不匹配的字符串，您需要测试结果`match()`是否不为空。

（或者，可能更容易理解`result = "add_meeting".split("_")[1];`：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T07:31:25.693

您可以过滤`_`字符串`JavaScript for loop`，

```
var str = ['add_dinner', 'add_meeting', 'add_fuel_surcharge'];
var filterString = [];

    for(var i = 0; i < str.length; i ++){
        if(str[i].indexOf("_")>-1){
            filterString.push(str[i].substring(str[i].indexOf("_") + 1, str[i].length));
        }
    }
alert(filterString.join(", ")); 
```

# iphone - 在应用委托中运行不同的初始视图控制器

> ID：12225718
> 
> 赞同：0
> 
> 时间：2012-09-01T07:10:05.270
> 
> 标签：iphone, objective-c, cocoa-touch

我想在我的应用程序第一次启动时显示导览。

我肯定会用一些`NSUserDefaults`。但是我正在使用`storyboards`并且我想加载不同`viewControllers`的加载。

```
if(firstTime)
Load TourController 
else
Load mainScreen 
```

我怎样才能实现这个`appdelegate`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:57:25.373

我的应用程序第一次启动时有不同的行为，但我没有在应用程序委托中实现它。我在委托中使用代码来跟踪启动次数。然后，由于主视图控制器需要位于视图树的顶部，因此我从那里以模态方式推送了第一个启动行为。

```
- (void)applicationDidBecomeActive:(UIApplication *)application {

    // the following forces new behaviour on 1st launch. 
    int launches;
    launches = [[NSUserDefaults standardUserDefaults] integerForKey:LAUNCH_NUMBER_KEY];
    // note: uninitialised user default returns 0.

    if (!launches) {
        // view did load will check again and push the first load tour. 
        // by returning here, the launch value is not incremented. 
        [self.viewController viewDidLoad];
        return;
    } 
} 
```

然后，在 中`MainViewController viewDidLoad`，我再次检查该值并以模态方式推送 firstLoad 视图。

```
- (void)viewDidLoad {
    //... more code here.
    BOOL disclaimerAccepted = [[NSUserDefaults standardUserDefaults] boolForKey:DISCLAIMER_ACCEPT_KEY];
    if (!disclaimerAccepted) {
    [self showFirstLoadView];
    return;
    }
} 
```

和

```
-(void) showDisclaimerView {

    // Display the nav controller modally.
    FirstLoadVC *firstLoadVC = [[FirstLoadVC alloc] initWithNibName:@"firstload" bundle:[NSBundle mainBundle]];
    [firstLoadVC autorelease];

    UINavigationController*  firstLoadNavController = [[UINavigationController alloc]initWithRootViewController:firstLoadVC]; 

    [self presentModalViewController:firstLoadNavController animated:YES];

    [firstLoadNavController release];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T07:31:10.073

```
if (firstTime) {
   self.window.rootViewController = self.fisrtController; 
} else {
   self.window.rootViewController = self.mainController;
} 
```

# javascript - JavaScript - 如何从 Google 自动完成 API 获取城市名称建议

> ID：12225725
> 
> 赞同：-1
> 
> 时间：2012-09-01T07:11:37.257
> 
> 标签：javascript, google-maps-api-3, google-places-api

您可能知道，您可以[**从 Google Places API**](https://developers.google.com/maps/documentation/javascript/reference#Autocomplete)获得有关城市名称的建议。默认情况下，您必须使用以下代码创建一个自动完成对象：

```
var input = document.getElementById('searchTextField');
var autocomplete = new google.maps.places.Autocomplete(input); 
```

并且将针对指定元素显示建议，该元素位于`input`此处。但我想获得所有建议并将它们显示在其他地方。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:28:44.307

似乎没有简单的方法，请查看[此答案](https://stackoverflow.com/a/9726317/1633510)以了解如何拦截 JSONP

# regex - 正则表达式删除记事本++中标签之间的文本

> ID：12225729
> 
> 赞同：11
> 
> 时间：2012-09-01T07:12:32.190
> 
> 标签：regex, notepad++, replace

我有这样的代码

```
<wp:post_name>artifical-sweeteners-ruin-your-health</wp:post_name> 
```

我想把它改成

```
<wp:post_name></wp:post_name> 
```

删除标签内的所有内容。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-01T07:17:49.797

搜索

```
<wp:post_name>[^<>]+</wp:post_name> 
```

并将所有替换为

```
<wp:post_name></wp:post_name> 
```

这假设标签不能嵌套（这使得正则表达式使用起来非常安全）。如果可能存在其他标签，则需要搜索

```
(?i)<wp:post_name>.*?</wp:post_name> 
```

相反（相同的替换字符串）。`<wp:post_name>`然而，这可能只适用于最新版本的 Notepad++，它带来了主要的正则表达式引擎大修，而且风险更大，因为如果可能出现嵌套标签，它会弄乱你的文件。

# asp.net - 从服务器端动态加载用户控件

> ID：12225732
> 
> 赞同：1
> 
> 时间：2012-09-01T07:12:33.210
> 
> 标签：asp.net

我有一个继承类的用户控件。（我`Oninit`对这个类的功能做了一些编码）。我正在使用以下方法从服务器端动态加载该用户控件：

```
Mycontrol dc = (Mycontrol)Page.LoadControl("/Controls/Mycontrol.ascx");
 MyPlaceHolder.Controls.Add(dc); 
```

但问题是，`Oninit`用户控件继承的类的功能并没有被执行。谁能告诉我为什么会发生这种情况以及解决方案是什么。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:53:40.463

根据页面生命周期事件的[MSDN 参考](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)`OnInit`，子控件的 被调用在`OnInit`页面之前。

这意味着您必须在事件中添加动态控件`PreInit`才能在事件链开始之前将它们放置到位。事实上，文档`PreInit`说明：

将此事件用于以下情况：

*   检查 IsPostBack 属性以确定这是否是第一次处理页面。此时还设置了 IsCallback 和 IsCrossPagePostBack 属性。

*   创建或重新创建动态控件。

*   动态设置母版页。

*   动态设置 Theme 属性。

*   读取或设置配置文件属性值。

# c++ - 在哪里可以找到 C++11 类型前缀/后缀的列表？

> ID：12225736
> 
> 赞同：6
> 
> 时间：2012-09-01T07:12:56.880
> 
> 标签：c++, types, c++11, prefix, user-defined-literals

有人可以指出语言类型前缀/后缀的完整列表吗？

前缀示例：

```
auto s1 (u8"I'm a UTF-8 string.");
auto s2 (u"This is a UTF-16 string.");
auto s3 (U"This is a UTF-32 string.");
auto s4 (R"(RAW \ STRING " )");
auto s5 (L"wide string");
//etc..
//*I've only seen prefixes like this for strings. 
```

后缀示例：

```
auto n1 = 7.2f;
auto n2 = 7.2d;
auto n3 = 100L;
auto n4 = 10000LL;
//etc.. 
```

我所有的搜索尝试都让我去“制作你自己的用户定义的文字”。
也许这些实例有一个我不知道的特定名称？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T07:40:45.953

这些不是“类型”前缀/后缀，它们是文字前缀/后缀，因为它们应用于文字（字符串文字，数字文字，...）。他们没有具体的名字，因为他们没有那么有趣☺。

C++11 中的内置前缀和后缀有：

*   整数：

    *   `12U`, `12L`, `12UL`, `12LU`, `12LL`, `12ULL`, `12LLU`, `12u`, `12uL`, `12Lu`, `12uLL`, `12LLu`, `12l`, `12Ul`, `12lU`, `12ll`, `12Ull`, `12llU`, `12ul`, `12lu`, `12ull`,`12llu`
*   浮点数：

    *   `1.0f`, `1.0F`, `1.0l`,`1.0L`
*   人物：

    *   `L'x'`, `u'x'`,`U'x'`
*   字符串：

    *   `u8"xxx"`, `u"xxx"`, `U"xxx"`, `L"xxx"`, `R"(xxx)"`, `u8R"(xxx)"`, `uR"(xxx)"`, `UR"(xxx)"`,`LR"(xxx)"`

特别是，`1.0d`不是内置的 C++11 后缀。某些编译器（例如 GCC）也可能具有其他数字后缀的扩展，请参阅[C 浮点数表示法](https://stackoverflow.com/questions/9786338/c-floating-point-number-notation)。

* * *

相关词汇语法：

（§2.14.2 整数文字）

> *无符号后缀*：其中之一
> 
> > `u U`
> 
> *长后缀*：其中之一
> 
> > `l L`
> 
> *long-long-suffix*：其中之一
> 
> > `ll LL`

（§2.14.4 浮动文字）

> *浮动后缀*：其中之一
> 
> > `f l F L`

（§2.14.3 字符文字）

> *字面量*：
> 
> > `'` *c-char-sequence* `'`
> > `u'` *c-char-sequence* `'`
> > `U'` *c-char-sequence* `'`
> > `L'` *c-char-sequence* `'`

和

（§2.14.5 字符串文字）

> *字符串文字*：
> 
> > *encoding-prefix* [opt] `"` s-char-sequence [opt] `"`
> > *encoding-prefix* [opt] `R` *raw-string*
> 
> *编码前缀*：
> 
> > `u8`
> > `u`
> > `U`
> > `L`

# .net - 这个反序列化示例有什么问题？

> ID：12225739
> 
> 赞同：0
> 
> 时间：2012-09-01T07:14:12.320
> 
> 标签：.net, xml, vb.net, deserialization

我正在尝试一个简单的例子来反序列化 vb.net 2008 中的 xml 文件，但某处肯定有一个简单的错误。

错误：

```
There is an error in XML document (1, 2). 
```

xml文件：

```
<Item>test</Item> 
```

VB代码：

```
Public Class xmlClass
Public Item As String
End Class 
```

...并在表单类中：

```
Private Sub Deserialize()
Dim serializer As New XmlSerializer(GetType(xmlClass))
Dim reader As New FileStream("c:\tmp\tmp2.xml", FileMode.Open)
Dim xi As xmlClass
xi = CType(serializer.Deserialize(reader), xmlClass)
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T07:26:32.217

尝试：

```
<xmlClass>
  <Item>Test</Item>
</xmlClass> 
```

您需要将类元素放在字段值周围。我使用上面的代码和 VS 2012 确认了这个工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T07:17:13.490

尝试反序列化此文件：

```
<?xml version="1.0" encoding="utf-8"?> 
<Item>test</Item> 
```

# android - 当有人在android中写入EditText时如何创建数据库并将数据保存到数据库中？

> ID：12225741
> 
> 赞同：0
> 
> 时间：2012-09-01T07:14:35.250
> 
> 标签：android, database, save, android-edittext

我是 android 新手，在我的应用程序中我需要创建数据库，当用户将一些东西写入 EditText 时，我需要将它保存到数据库中，但我实际上不知道我将如何去做。所以请有人帮帮我。我已经创建了保存数据的提交按钮，现在我只需要创建一个数据库。

在这里，我给出了一个名为“Invitation.java”的活动类，其中包含

```
 package com.ggit.trip.caster;

     import android.content.Intent;
     import android.os.Bundle;
     import android.util.Log;
     import android.view.View;
     import android.view.View.OnClickListener;
     import android.widget.Button;
     import android.widget.EditText;

    public class Invitation extends AppBaseActivity {

protected static final String Tag = "Invitation Activity";

private Button submit2;
private Button exit2;

private EditText Edit1;
private EditText Edit2;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.invitation);

    registerBaseActivityReceiver();

    submit2 = (Button) findViewById(R.id.sub2_button1);
    exit2=(Button)findViewById(R.id.button2);

    Edit1 = (EditText) findViewById(R.id.editText1);
    Edit2 = (EditText) findViewById(R.id.editText2);

    submit2.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            Log.d(Tag, "EditText : " + Edit1.getText().toString());
            Log.d(Tag, "EditText : " + Edit2.getText().toString());

            Intent intent = new Intent(getApplicationContext(),
                    Registration.class);
            startActivity(intent);
        }
    });

    exit2.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            closeAllActivities();
                   }
    });
}

public void onDestroy() {

    super.onDestroy();
    unRegisterBaseActivityReceiver();
}

    } 
```

现在这里名为“invitation.xml”的 Invitation.jave 类的 xml 布局包含

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/sea_01"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView3"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="28dp"
    android:text="E-mail"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="160dp"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:layout_centerHorizontal="true"
    android:background="@drawable/rounded_edittext"
    android:ems="10"
    android:hint="     email address"
    android:inputType="textEmailAddress" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_below="@+id/editText1"
    android:text="Phone"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/editText2"
    android:layout_width="160dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/editText1"
    android:layout_below="@+id/textView2"
    android:background="@drawable/rounded_edittext"
    android:ems="10"
    android:hint="    phone number"
    android:inputType="phone" />

<Button
    android:id="@+id/sub2_button1"
    android:layout_width="100dp"
    android:layout_height="45dp"
    android:layout_alignParentBottom="true"
    android:layout_alignRight="@+id/textView1"
    android:layout_marginRight="27dp"
    android:background="@drawable/gloss_nine_patch"
    android:text="Send Invitation" />

<Button
    android:id="@+id/button2"
    android:layout_width="100dp"
    android:layout_height="45dp"
    android:layout_alignLeft="@+id/textView2"
    android:layout_alignParentBottom="true"
    android:layout_marginLeft="32dp"
    android:background="@drawable/gloss_nine_patch"
    android:text="Exit" />

 </RelativeLayout> 
```

现在我需要将这两个 EditText 的数据保存到数据库中。请写一个适当的或完整的活动类，因为我是新人。谢谢你。

* * *

@Naser 的 DataHelper.java

```
package i.am.arnob;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DataHelper  extends SQLiteOpenHelper{

//database version, current ver is 1.
public static final int DATABASE_VER=1;

//database Name or db name
public static final String DATABASE_NAME="dataPerson";

//table Name, table person
public static final String TABLE_PERSON="person";

//table fields name,fist name,email and domain
//public static final String KEY_NAME="name";
//public static final String KEY_FIRST_NAME="first_name";
public static final String KEY_EMAIL="email";
public static final String KEY_DOMAIN="domain";

public DataHelper(Context context, String name, CursorFactory factory,
        int version) {
    super(context, name, factory, version);
    // TODO Auto-generated constructor stub
}
@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    //creating string sqlTable for creating a table 
    String sqlTable = "create table " +TABLE_PERSON+ "("/* +KEY_NAME+ " text," +KEY_FIRST_NAME+ " text," */ +KEY_EMAIL+ " text," +KEY_DOMAIN+ " text);"; 
    //db.execSQL() will execute string which we provide and will create a  table with given table name and fields.
    db.execSQL(sqlTable);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-14T08:54:22.500

在这里，我为所有功能创建了简单的类

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;

import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {

public static final String KEY_AOUTO = "_id";
public static final String KEY_ID_SONG = "id_song";
public static final String KEY_RATING_VALUE = "rating_value";

private static final String TAG = "DBAdapter";

private static final String DATABASE_NAME = "meadia_rating";
private static final String DATABASE_TABLE_TIME = "music_rating";

private static final int DATABASE_VERSION = 1;

private static final String DATABASE_CREATE_TIME = "create table music_rating (_id integer primary key autoincrement,"
        + "id_song text not null,rating_value text not null);";

private final Context context;

private DatabaseHelper DBHelper;
private SQLiteDatabase db;

public DBAdapter(Context ctx) {
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper {
    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    public void onCreate(SQLiteDatabase db) {

        db.execSQL(DATABASE_CREATE_TIME);

    }

    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS Savedfiles");

        onCreate(db);
    }
}

// ---opens the database---
public DBAdapter open() throws SQLException {
    db = DBHelper.getWritableDatabase();
    return this;
}

// ---closes the database---
public void close() {
    DBHelper.close();
}

// ---insert a data into the database---
public long insert(String id_song, String rating_value) {
    ContentValues initialValues = new ContentValues();

    initialValues.put(KEY_ID_SONG, id_song);
    initialValues.put(KEY_RATING_VALUE, rating_value);

    return db.insert(DATABASE_TABLE_TIME, null, initialValues);
}

// ---deletes a particular row---
public boolean delete(long rowId) {
    return db.delete(DATABASE_TABLE_TIME, KEY_AOUTO + "=" + rowId, null) > 0;
}

// ---deletes all table data---
public void deleteAll(String table_name) {
    SQLiteDatabase db = DBHelper.getWritableDatabase();
    db.delete(table_name, null, null);
}

// ---- Search database a particular text----
public Cursor getRating(String mSongId) throws SQLException {

    Cursor mCursor = db.query(true, DATABASE_TABLE_TIME, new String[] {
            KEY_AOUTO, KEY_ID_SONG, KEY_RATING_VALUE }, KEY_ID_SONG + "="
            + mSongId, null, null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
}

// ---updates a title---
public boolean updateRate(String rowId, String mSongId, String rating_value) {
    ContentValues args = new ContentValues();
    args.put(KEY_ID_SONG, mSongId);
    args.put(KEY_RATING_VALUE, rating_value);

    return db.update(DATABASE_TABLE_TIME, args, KEY_AOUTO + "=" + rowId,
            null) > 0;
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T07:29:03.273

这是我的代码：

这是助手类：

```
public class DataHelper  extends SQLiteOpenHelper{

    //database version, current ver is 1.
    public static final int DATABASE_VER=1;

    //database Name or db name
    public static final String DATABASE_NAME="dataPerson";

    //table Name, table person
    public static final String TABLE_PERSON="person";

    //table fields name,fist name,email and domain
    public static final String KEY_NAME="name";
    public static final String KEY_FIRST_NAME="first_name";
    public static final String KEY_EMAIL="email";
    public static final String KEY_DOMAIN="domain";

    public DataHelper(Context context, String name, CursorFactory factory,
            int version) {
        super(context, name, factory, version);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        //creating string sqlTable for creating a table 
        String sqlTable = "create table " +TABLE_PERSON+ "(" +KEY_NAME+ " text," +KEY_FIRST_NAME+ " text," +KEY_EMAIL+ 
                " text," +KEY_DOMAIN+ " text);"; 
        //db.execSQL() will execute string which we provide and will create a table with given table name and fields.
        db.execSQL(sqlTable);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

} 
```

这是您的保存按钮：

```
mbtnSave.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                // getting database for reading/writing purpose
                db = helper.getWritableDatabase();

                // getting data from edit text to string variables
                String name = medtName.getText().toString().trim();
                String firstName = medtFirstName.getText().toString().trim();
                String email = medtEmail.getText().toString().trim();
                String domain = medtDomain.getText().toString().trim();

                // checking for empty fields
                if (!name.equals("") && !firstName.equals("")
                        && !email.equals("") && !domain.equals("")) {

                    // contentValues will add data into key value pair which
                    // will later store in db
                    ContentValues values = new ContentValues();

                    values.put(DataHelper.KEY_NAME, name);
                    values.put(DataHelper.KEY_FIRST_NAME, firstName);
                    values.put(DataHelper.KEY_EMAIL, email);
                    values.put(DataHelper.KEY_DOMAIN, domain);

                    // insert query will insert data in database with
                    // contentValues pair.
                    db.insert(DataHelper.TABLE_PERSON, null, values);

                    toast("Added!");

                    // db.close();
                    // helper.close();
                    // created user defined method to clean the text fields
                    clean();

                    // }else{toast("proper name");}
                } else {

                    toast("Fields either empty or not proper");
                }

                // closing the database connection
                db.close();
            }
        }); 
```

# asp.net - 发布网站的奇怪问题（发布后图像不显示）

> ID：12225743
> 
> 赞同：3
> 
> 时间：2012-09-01T07:14:53.980
> 
> 标签：asp.net, iis, web, web-hosting, web-deployment

我在 ASP.Net 3.5 中开发了一个网站。当我在主机上使用 Visual Studio 编译它时，网站显示正确！但是当我将网站发布到主机的网站托管文件夹时，在 IE 中键入导航到该网站，它会以这种方式显示：

1.  图像不显示
2.  无法识别字体

有谁知道可能是什么问题？！

我的意思是同一台主机！相同的 IE（版本 8）！在那台机器上用 Visual Studio 2008 编译它，一切都很好，但是当通过在 IE 中键入 URL 来调用同一主机上的已发布站点时，图像不显示并且字体无法识别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T07:25:13.080

未显示的图像/字体表明您的相对路径已关闭。造成这种情况的一个常见原因是在部署时忘记创建 IIS 应用程序。如果您不创建应用程序，则图像路径编写如下：

```
~/content/images/img1.jpg 
```

将被打破。（他们将解析为*mydomain.com/content/images/img1.jpg*而不是*mydomain.com/myapplication/content/images/img1.jpg*。）

另一种可能性是您的相对路径是这样写的：

```
/content/images/img1.jpg 
```

如果您部署到域中的任何子路径，这种类型的链接将始终被破坏。即，如果您部署到*mydomain.com*，那么链接会很好，但是如果您部署到*mydomain.com/myapplication*，那么像上面这样编写的 URL 将错误地解析为*mydomain.com/content/images/img1.jpg*。

# mongodb - 数组中不存在元素时 $addToset 与 $push 的时间复杂度

> ID：12225748
> 
> 赞同：11
> 
> 时间：2012-09-01T07:15:09.380
> 
> 标签：mongodb

给定：连接是安全的=真所以更新的返回将包含更新信息。

假设我有一个看起来像这样的文件：

```
[{'a': [1]}, {'a': [2]}, {'a': [1,2]}] 
```

我发出：

```
coll.update({}, {'$addToSet': {'a':1}}, multi=True) 
```

结果将是：

```
{u'connectionId': 28,
 u'err': None,
 u'n': 3,
 u'ok': 1.0,
 u'updatedExisting': True
} 
```

即使来的文件已经具有这种价值。为了避免这种情况，我可以发出命令。

```
coll.update({'a': {'$ne': 1}}, {'$push': {'a':1}}, multi=True) 
```

$addToSet 与 $push 与 $ne check 的时间复杂度比较是多少？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-04T10:58:10.500

看起来*$addToSet*正在做与您的命令相同的事情：*$push 和 $ne check*。两者都是 O(N)

[https://github.com/mongodb/mongo/blob/master/src/mongo/db/ops/update_internal.cpp](https://github.com/mongodb/mongo/blob/master/src/mongo/db/ops/update_internal.cpp)

如果速度真的很重要，那么为什么不使用哈希：

代替：

```
{'$addToSet': {'a':1}}
{'$addToSet': {'a':10}} 
```

利用：

```
{$set: {'a.1': 1}
{$set: {'a.10': 1} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T18:35:22.947

## 编辑

好的，因为我一直都错误地阅读了您的问题，事实证明实际上您正在查看两个不同的查询并判断它们之间的时间复杂度。

第一个查询是：

```
coll.update({}, {'$addToSet': {'a':1}}, multi=True) 
```

第二个是：

```
coll.update({'a': {'$ne': 1}}, {'$push': {'a':1}}, multi=True) 
```

这里想到的第一个问题，没有索引。`$addToSet`，作为更新修饰符，我不相信它使用索引，因为您正在执行全表扫描来完成您需要的操作。

实际上，您正在查找尚未包含的所有文档`1`并`a`查看该数组`$push`的值。`1``a`

所以 2 甚至在我们进入时间复杂度之前就指向了第二个查询，因为第一个查询：

*   不使用索引
*   将是全表扫描
*   然后会做一个完整的数组扫描（没有索引）到`$addToSet`

因此，我在这里几乎已经下定决心，第二个查询是您在使用任何大 O 表示法之前要查找的内容。

这里使用大 O 表示法来解释每个查询的时间复杂度是有问题的：

*   我不确定您想要什么视角，无论是每个文档还是整个集合。
*   我不确定索引本身。使用索引实际上会创建一个 Log 算法，`a`但不使用索引则不会。

然而，第一个查询看起来像：每个文档 O(n)，因为：

*   $addToSet 需要遍历每个元素
*   然后 $addToSet 需要执行 O(1) 操作来插入该集合（如果它不存在）。我应该注意我不确定 O(1) 是否被取消（轻微阅读表明我的版本），我在这里取消了它。

每个集合，如果没有索引，它将是：O(2n2)，因为迭代的复杂性`a`将随着每个新文档呈指数级增加。

没有索引的第二个查询看起来像： O(2n2) (O(n) per document) 我相信因为会出现与没有索引`$ne`相同的问题。`$addToSet`但是，对于索引，我相信这实际上是 O(log n log n) （每个文档 O(log n)），因为它会首先根据 b-tree找到所有包含在其中的文档`a`，然后是所有不在其集合中的文档。`1`

因此，根据时间复杂度和开头的注释，我会说查询 2 更好。

老实说，我不习惯用“Big O”表示法解释，所以这是实验性的。

希望能帮助到你，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-10T07:14:23.847

添加我对 addToSet 和从 100k 文档的批量更新推送之间的差异的观察。

当您进行批量更新时。addToSet 将单独执行。

例如，

```
bulkInsert.find({x:y}).upsert().update({"$set":{..},"$push":{ "a":"b" } , "$setOnInsert":  {} }) 
```

将首先插入并设置文档。然后它执行 addToSet 查询。

我看到了 10k 之间的明显差异

```
db.collection_name.count() #gives around 40k 

db.collection_name.count({"a":{$in:["b"]}}) # it gives only around 30k 
```

但是当用 $push 替换 $addToSet 时。两个计数查询都返回相同的值。

注意：当您不关心数组中的重复条目时。您可以使用 $push。

# vb.net - 应用引擎中的 Visual Basic .Net 编程

> ID：12225758
> 
> 赞同：0
> 
> 时间：2012-09-01T07:17:10.477
> 
> 标签：vb.net, google-app-engine

是否可以在 Google 应用程序空间中使用 VB.Net 创建 Web 应用程序，或者至少将 VB.Net 创建的应用程序导入 Google Application Engine 以便在我们的 Google 域中运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T12:43:26.060

恐怕不行 - App Engine 支持 Java、Python 或 Go。在 Internet 上运行 VB.Net 应用程序的最简单选择是租用自己的（可能是共享的）服务器。

# java - Android 音轨播放噪音

> ID：12225761
> 
> 赞同：0
> 
> 时间：2012-09-01T07:17:20.937
> 
> 标签：java, android, audio, udp

我正在为我的大学项目开发​​ Android 中的点对点语音呼叫应用程序。我找到了通过 UDP 流式传输麦克风音频的示例代码。该代码将帮助我通过 UDP 流式传输 WAV 文件。但它不能正确播放某些文件。而且该代码不会流式传输麦克风音频。请帮我。

```
public class UdpStream extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.udpstream);
        Button btnSend = (Button)findViewById(R.id.btnSend);
        btnSend.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.d(LOG_TAG, "btnSend clicked");
                SendAudio();
            }
        });

        Button btnRecv = (Button)findViewById(R.id.btnRecv);
        btnRecv.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.d(LOG_TAG, "btnRecv clicked");
                RecvAudio();
            }
        });

        Button btnStrmic = (Button)findViewById(R.id.btnStrmic);
        btnStrmic.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.d(LOG_TAG, "btnStrmic clicked");
                SendMicAudio();
            }
        });

    }

    static final String LOG_TAG = "UdpStream";
    static final String AUDIO_FILE_PATH = "/sdcard/1.wav";
    static final int AUDIO_PORT = 2048;
    static final int SAMPLE_RATE = 8000;
    static final int SAMPLE_INTERVAL = 20; // milliseconds
    static final int SAMPLE_SIZE = 2; // bytes per sample
    static final int BUF_SIZE = SAMPLE_INTERVAL*SAMPLE_INTERVAL*SAMPLE_SIZE*2;
    protected String host="localhost";
    public void RecvAudio()
    {
        Thread thrd = new Thread(new Runnable() {
            @Override
            public void run() 
            {
                Log.e(LOG_TAG, "start recv thread, thread id: "
                    + Thread.currentThread().getId());
                AudioTrack track = new AudioTrack(AudioManager.STREAM_MUSIC, 
                        SAMPLE_RATE, AudioFormat.CHANNEL_CONFIGURATION_MONO, 
                        AudioFormat.ENCODING_PCM_16BIT, BUF_SIZE, 
                        AudioTrack.MODE_STREAM);
                track.play();
                try
                {
                    DatagramSocket sock = new DatagramSocket(AUDIO_PORT);
                    byte[] buf = new byte[BUF_SIZE];

                    while(true)
                    {
                        DatagramPacket pack = new DatagramPacket(buf, BUF_SIZE);
                        sock.receive(pack);
                        Log.d(LOG_TAG, "recv pack: " + pack.getLength());
                        track.write(pack.getData(), 0, pack.getLength());
                    }
                }
                catch (SocketException se)
                {
                    Log.e(LOG_TAG, "SocketException: " + se.toString());
                }
                catch (IOException ie)
                {
                    Log.e(LOG_TAG, "IOException" + ie.toString());
                }
            } // end run
        });
        thrd.start();
    }
    Toast toast;
    int port=3008;
    public void SendAudio()
    {

        toast=Toast.makeText(getApplicationContext(), port + " : " + host , Toast.LENGTH_SHORT);

        Thread thrd = new Thread(new Runnable() {
            @Override
            public void run() 
            {
                Log.e(LOG_TAG, "start send thread, thread id: "
                    + Thread.currentThread().getId());
                long file_size = 0;
                int bytes_read = 0;
                int bytes_count = 0;
                File audio = new File(AUDIO_FILE_PATH);
                FileInputStream audio_stream = null;
                file_size = audio.length();
                byte[] buf = new byte[BUF_SIZE];
                try
                {

                    EditText d= (EditText) findViewById(R.id.txttohost);
                    host=d.getText().toString();

                    if(host=="")
                    {
                    port=2048;
                    host="localhost";

                    }
                    port=2048;
                    InetAddress addr = InetAddress.getByName(host);
                    toast.setText(port + " : " + addr.toString());
                    toast.show();
                    DatagramSocket sock = new DatagramSocket();
                    audio_stream = new FileInputStream(audio);

                    while(bytes_count < file_size)
                    {
                        bytes_read = audio_stream.read(buf, 0, BUF_SIZE);
                        DatagramPacket pack = new DatagramPacket(buf, bytes_read,
                                addr, port);
                        sock.send(pack);
                        bytes_count += bytes_read;
                        Log.d(LOG_TAG, "bytes_count : " + bytes_count);
                        Thread.sleep(SAMPLE_INTERVAL, 0);
                    }
                }
                catch (InterruptedException ie)
                {
                    Log.e(LOG_TAG, "InterruptedException");
                }
                catch (FileNotFoundException fnfe)
                {
                    Log.e(LOG_TAG, "FileNotFoundException");
                }
                catch (SocketException se)
                {
                    Log.e(LOG_TAG, "SocketException");
                }
                catch (UnknownHostException uhe)
                {
                    Log.e(LOG_TAG, "UnknownHostException");
                }
                catch (IOException ie)
                {
                    Log.e(LOG_TAG, "IOException");
                }
            } // end run
        });
        thrd.start();
    }

    public void SendMicAudio()
    {
        Thread thrd = new Thread(new Runnable() {
            @Override
            public void run() 
            {
                Log.e(LOG_TAG, "start SendMicAudio thread, thread id: "
                    + Thread.currentThread().getId());
                AudioRecord audio_recorder = new AudioRecord(MediaRecorder.AudioSource.DEFAULT, SAMPLE_RATE,
                            AudioFormat.CHANNEL_CONFIGURATION_MONO,
                            AudioFormat.ENCODING_PCM_16BIT,
                            AudioRecord.getMinBufferSize(SAMPLE_RATE,
                                    AudioFormat.CHANNEL_CONFIGURATION_MONO,
                                    AudioFormat.ENCODING_PCM_16BIT) * 10);
                int bytes_read = 0;
                int bytes_count = 0;
                byte[] buf = new byte[BUF_SIZE];
                try
                {
                    InetAddress addr = InetAddress.getLocalHost();
                    DatagramSocket sock = new DatagramSocket();

                    while(true)
                    {
                        bytes_read = audio_recorder.read(buf, 0, BUF_SIZE);
                        DatagramPacket pack = new DatagramPacket(buf, bytes_read,
                                addr, AUDIO_PORT);
                        sock.send(pack);
                        bytes_count += bytes_read;
                        Log.d(LOG_TAG, "bytes_count : " + bytes_count);
                        Thread.sleep(SAMPLE_INTERVAL, 0);
                    }
                }
                catch (InterruptedException ie)
                {
                    Log.e(LOG_TAG, "InterruptedException");
                }
//                catch (FileNotFoundException fnfe)
//                {
//                    Log.e(LOG_TAG, "FileNotFoundException");
//                }
                catch (SocketException se)
                {
                    Log.e(LOG_TAG, "SocketException");
                }
                catch (UnknownHostException uhe)
                {
                    Log.e(LOG_TAG, "UnknownHostException");
                }
                catch (IOException ie)
                {
                    Log.e(LOG_TAG, "IOException");
                }
            } // end run
        });
        thrd.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:15:17.520

至于关心我的问题......

解决方案是始终在通过外置扬声器播放音频时会导致一些噪音....

所以我找到了以下两个解决方案来解决这个问题......

1）通过耳机播放音频

> audio_service.setSpeakerphoneOn(false); audio_service.setMode(AudioManager.MODE_IN_CALL); audio_service.setRouting(AudioManager.MODE_NORMAL,AudioManager.ROUTE_EARPIECE, AudioManager.ROUTE_ALL);

2）下一个方法是使用一些音频编解码器来编码和解码你的音频以无噪音播放。

# umbraco - Umbraco，果园：自定义表格中的内容

> ID：12225763
> 
> 赞同：0
> 
> 时间：2012-09-01T07:17:33.550
> 
> 标签：umbraco, orchardcms

我目前正在研究公司网站的不同 CMS 的可能性。在经典的 ASP、ASP.NET、Joomla 等方面做过不少项目。

我想第一次使用 Umbraco 或 Orchard。

对于那个项目，我们有一个带有部门的 SQL 表和第二个带有工作机会的 SQL 表：例如：JobName、DepartmentID、Description 等。所以是 1:n 的关系。

第一页应列出部门，并带有指向可用工作子页面的链接

这些应该列在第二页上。在 ASP.NET 中，我会使用带有 PageSize 选项和自动分页的中继器等。

在后端（我假设是 Umbraco 的后台）必须有一个带有相应输入框的插入/编辑/删除页面，这些输入框由公司员工维护，而不是由 Web 开发人员维护。

因此，在这两个 cms 中，我都尝试在后端完成类似 Access 的表格形式，例如：

```
Job       |  Description   | ....
Job1      |  descr1        | ....[edit][delete]
Job2      |  descr2        | ....[edit][delete]
Job3      |  descr3        | ....[edit][delete]
[New Job] 
```

我应该看哪条路线？我完全被卡住了，有什么例子吗？我可以使用自己的数据表，还是可以/应该为此使用内置的内容表？

谢谢你，莱因哈德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T17:49:31.873

这听起来相对简单，无论如何，在 Umbraco 中，您可以使用内置的内容表，或者使用直接的 SQL 服务器表并编写代码自己与数据库“对话”。

然而，在 Umbraco 中使用内容表的好处是，其他一切都会更容易完成；系统中的所有其他内容都旨在仅使用这些内容表而无需额外编码...除非您有大量数据，或者您没有提到一些特殊要求，否则我肯定会充分探索仅使用在决定在 umbraco 中滚动您自己的自定义表格之前，为此内置了 Umbraco 功能。

它是可能的，而且不是那么难，但这是你不应该做的额外工作，除非必要。

不熟悉果园，所以不能评论。

# git - 拆分现有存储库并将最新提交应用到另一个存储库

> ID：12225767
> 
> 赞同：2
> 
> 时间：2012-09-01T07:17:53.560
> 
> 标签：git, mercurial, repository, dvcs

前段时间我已将我的 SVN 存储库转换为 Mercurial 存储库。它似乎已正确转换，我已经对该项目进行了许多更改。过了一段时间（在挖掘历史时）我意识到转换没有正确完成 - 即旧的提交没有按时间排序，所以我有来自 SVN 存储库的所有修订，但顺序不正确（并且在我在转换后做出了承诺）。

我想解决这个问题。我能想到的解决这个问题的唯一方法是将存储库分成两部分

*   一个包含从旧 SVN 存储库转换而来的修订版（我们称之为`A1`）
*   一个只包含新的提交（我们称之为`B1`）

我想再次转换我的 SVN 存储库（这次正确），然后重新应用我在第一次转换存储库后所做的所有更改（`B1`部分）。

总结一下，我需要做的（或者，我认为我需要做的）是：

1.  将现有的 repo 分成两部分 - 一部分是通过从 SVN 存储库 ( `A1`) 转换创建的，另一部分包含正确的提交（由我在存储库转换后创建 - `B1`）。

2.  将 SVN 存储库转换为 Mercurial（或 Git，如果由于某种原因所有其他步骤在 Mercurial 中不可行）。所以转换后我会有`A2`.

3.  将更改从`B1`第 2 点应用到新转换的存储库 -`A2`

我想我知道如何进行转换（第 2 点）以获得正确排序的提交（`A2`）。我只需要 1\. （将现有存储库拆分为`A1`& `B1`）和 3 （从`B1`to应用提交`A2`）的帮助。

这在 Mercurial 中可行吗？如果在 Mercurial 中不可行 - 是否可以使用 Git 来实现（据我所知，可以轻松地将 SVN 和 Mercurial 存储库转换为 Git 存储库）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T17:07:08.800

如果您想基于现有存储库的子集创建新存储库，该[`convert`扩展也可以提供帮助。](http://mercurial.selenic.com/wiki/ConvertExtension)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T15:22:39.233

我猜新的变更集是相当线性的。如果是，您可以使用 MQ 轻松完成此操作。您只需将所有新变更集转换为 MQ 变更集 ( `qimport`)，然后在新转换的存储库的顶部应用这些变更集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T16:11:28.367

您应该能够使用该`strip`命令（它是[mq 扩展](http://mercurial.selenic.com/wiki/MqExtension)的一部分）来删除所有新的变更集。这将创建一个包含所有新变更集的包（该命令将输出 bundle 命令的位置）。您应该能够获取此捆绑包并将其（使用`unbundle`命令）解包到替换`A2`存储库中。

# c++ - 是否有任何快速技术可以获取子网中的所有 IP 地址？

> ID：12225776
> 
> 赞同：0
> 
> 时间：2012-09-01T07:19:13.470
> 
> 标签：c++, dns

在[上一个问题](https://stackoverflow.com/questions/12212300/find-all-ips-in-a-subnet#comment16358777_12212300)中，我尝试获取子网中的所有有效 IP 地址，因此我使用 for 循环，但在尝试之后，我发现我的代码需要 2 分钟以上才能找到子网中的所有 IP 地址，并且在某些情况下需要超过 5 分钟！

我的代码是在 Mac OS 下用 C++ 编写的；

但是在windows中，做同样的事情你只需要写`net view/all`命令，它就会立即打印出子网中的所有IP地址！

在 MAC 操作系统中，您可以使用它`Bonjour service`来完成此类工作。

这些技术如何以这种速度（`Net view /all`和`Bonjour service` ）工作？有没有办法像这样快速完成这项工作？如果没有，请告诉我是否有 APi 可以将 Bonjour 服务直接用于我在 mac os 中的代码（C++）中？

编辑：

我发现了新想法

我在苹果上发现了一些名为 Bonjour API 的 api，这对我有帮助，但是我如何使用它我 c++，因为我知道 mac 使用 opbjectiv-c。

[你好](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/NetServices/Introduction.html#//apple_ref/doc/uid/TP40002445-SW1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:59:45.023

`net view /all`正在 Windows 网络级别上工作，而不是 IP 级别。它只会列出启用了 Windows 网络和名称解析的机器。如果您的计算机没有运行 Windows（或 samba），它们将不会被列出。打印机、路由器等也是如此。

使用 IPv4 的最佳方法是通过检查计算机的 IP 地址和网络掩码来提取当前子网中的 IP 地址列表。然后强制对每个 IP 地址进行 ARP 查找。如果设备存在于网络上，ARP 查找将始终有效，即使它已完全锁定（没有打开端口，不响应 ping）。

使用 IPv6，您基本上不走运。单个子网中可用 IP 地址的数量（18 446 744 073 709 551 616）非常浪费，无法进行详尽的搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T08:55:08.753

您应该异步工作。您需要一个发出通信请求但立即返回的函数，如[IcmpSendEcho2](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366051%28v=vs.85%29.aspx)。您必须为每个调用创建一个完成事件数组。每个事件句柄都传递给一个 IcmpSendEcho2 调用。

之后，您调用 WaitForMultipleObjects 等待所有事件集。

# iphone - IOS设置捆绑键盘类型

> ID：12225777
> 
> 赞同：0
> 
> 时间：2012-09-01T07:19:16.193
> 
> 标签：iphone, ios, settings.bundle

我正在使用 iOS 5.0 的设置包，我想将其设置为键入 UIKeyboardTypeDecimalPad 但如果我在其中键入它不起作用。下拉菜单中的唯一选项是：

字母

数字和标点符号

数字键盘

网址

电子邮件地址

如果我使用设置包，这些是唯一可用的选项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:24:47.740

有那个选项**。**描述`number pad`对应`UIKeyboardTypeNumberPad`。

# apache-flex - 处于其他状态时未设置 TextArea 文本

> ID：12225778
> 
> 赞同：0
> 
> 时间：2012-09-01T07:19:44.760
> 
> 标签：apache-flex, flex4, stage

TextArea.text 值未设置或保持设置。当我有一个过渡并且使用 Rotate3D 并且有两个过渡时，就会发生这种情况。通过一次过渡，它就可以工作。有两个转换（返回转换）它没有。所以在下面的例子中，我有一个从“note”到“list”的过渡。如果我添加从“列表”到“注释”的转换，那么就会发生这种行为。但是，如果我将 textArea (note) 放在两个状态中，那么它可以正常工作（即 incluedIn="note,list" 有效）！

```
<s:Group id="noteGroup" includeIn="note">

    <s:TextArea id="normalTextArea" />

</s:Group>

<s:transitions>
    <s:Transition fromState="note" toState="list"
                  autoReverse="false">
        <s:Sequence target="{this}"
                    duration="{duration}" >
            <s:Rotate3D angleYFrom="0" angleYTo="90" 
                        autoCenterTransform="true" 
                        applyChangesPostLayout="true"
                        />
            <s:SetAction target="{noteGroup}" property="visible" />
            <s:RemoveAction target="{noteGroup}" />
            <s:AddAction target="{listGroup}"/>
            <s:Rotate3D angleYFrom="-90" angleYTo="0" 
                        autoCenterTransform="true" 
                        applyChangesPostLayout="true"/>
        </s:Sequence>
    </s:Transition>

    <s:Transition fromState="list" toState="note"
                  autoReverse="false"
                  >
        <s:Sequence target="{this}" duration="{duration}" >

            <s:Rotate3D angleYFrom="0" angleYTo="-90" 
                        effectStart="trace('rotateStart')"
                        duration="250" 
                        autoCenterTransform="true"
                        applyChangesPostLayout="true" />

            <s:AddAction target="{noteGroup}"
                        effectStart="trace('add notes action')"/>
            <s:SetAction target="{noteGroup}" property="visible" />
            <s:RemoveAction target="{listGroup}" 
                        effectStart="trace('remove lists action')"/>

            <s:Rotate3D angleYFrom="90" angleYTo="0" 
                        effectStart="trace('rotateStart 2')"
                        duration="250" 
                        autoCenterTransform="true"
                        applyChangesPostLayout="true" />

        </s:Sequence>
    </s:Transition>

</s:transitions> 
```

~~**更新**~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~

我提到的一种解决方法是在两种状态下都包含 textarea，然后在它最初不包含在的状态下将 visible 设置为 false：

```
<s:Group id="noteGroup" 
         includeIn="note,list"
         visible.list="false">

    <s:TextArea id="normalTextArea" />

</s:Group> 
```

~~**更新**~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~
稍后（过渡后）设置值（感谢Flextras）但在我将光标放在文本区域之前，文本不可见。

列出更改处理程序代码：

```
protected function list1_changeHandler(event:IndexChangeEvent):void {
    content = (list.selectedItem as Note).content;
    currentState = "note";

    setTimeout(setText,1000);
}

private function setText():void {
    normalTextArea.text = content; // works but only on clicking into the textarea
} 
```

这不起作用：

```
 protected function list1_changeHandler(event:IndexChangeEvent):void {
            content = (list.selectedItem as Note).content;
            normalTextArea.text = content;
            trace('1 text ='+normalTextArea.text); // contains content
            currentState = "note";
            normalTextArea.text = content;
            trace('2 text ='+normalTextArea.text); // contains content

            setTimeout(setText,1000);
        }

        // scenario 1
        private function setText():void {
            normalTextArea.text = content; // clicking into textarea it is empty
        }

        // scenario 2
        private function setText():void {
            normalTextArea.text = ""; // this does work but
            normalTextArea.text = content; // you have to click into textarea
        } 
```

# python - 在windows上编译疯子python

> ID：12225782
> 
> 赞同：2
> 
> 时间：2012-09-01T07:19:58.257
> 
> 标签：python, c, lua

我正在尝试使用 minigw 在 Windows 上编译疯狂的 python。命令如下：

```
 gcc.exe -shared -DLUA_BUILD_AS_DLL src\luainpython.c src\pythoninlua.c liblua.a
 libpython27.a -IC:\Python27\include -IC:\LUA\include 
```

这给了我未定义的参考错误。但是我找不到任何 lua api 更改参考，我应该用什么来替换这些。

```
src\luainpython.c:350:14: warning: 'LuaObject_Type' redeclared without dllimport
attribute after being referenced with dll linkage [enabled by default]
C:\Users\Wiz\AppData\Local\Temp\cccm0nAN.o:luainpython.c:(.text+0x7a): undefined
     reference to `lua_strlen'
C:\Users\Wiz\AppData\Local\Temp\cccm0nAN.o:luainpython.c:(.text+0x557): undefine
    d reference to `_imp__LuaObject_Type'
C:\Users\Wiz\AppData\Local\Temp\cccm0nAN.o:luainpython.c:(.text+0xc3a): undefine
    d reference to `luaL_getn'
C:\Users\Wiz\AppData\Local\Temp\cccm0nAN.o:luainpython.c:(.text+0x1036): undefin
    ed reference to `luaopen_loadlib'
c:/mingw32/bin/../lib/gcc/i686-w64-mingw32/4.7.1/../../../../i686-w64-mingw32/bi
    n/ld.exe: C:\Users\Wiz\AppData\Local\Temp\cccm0nAN.o: bad reloc address 0x0 in s
    ection `.data'
collect2.exe: error: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:11:27.537

最初的 Lunatic-Python 代码库有许多已知问题——您在上面遇到的构建问题就是其中之一。不幸的是，原作者似乎仍在维护这个项目——如果[**这里**](https://code.launchpad.net/lunatic-python)的最后修改日期有任何迹象的话。

如果您仍在尝试使其正常工作，我强烈建议您使用最新的分叉之一。特别是，[**github 上的 Lunantic-Python 分支**](https://github.com/bastibe/lunatic-python)包含了我的许多修复改进。

回到您的问题，许多未定义的引用是由于标头中不正确的前向声明或由于定义的宏导致前向声明不正确。例如，原件`luainpython.h`包含：

```
PyAPI_DATA(PyTypeObject) LuaObject_Type; 
```

在 Windows 中，经过预处理后，它会扩展为：

```
extern __declspec(dllimport) PyTypeObject LuaObject_Type; 
```

换句话说，链接器将尝试`LuaObject_Type`从导入库中找到 的定义。这当然是错误的，因为新类型是由 lunatic in 创建和实现的`luainpython.c`。应该是正确的原型`extern PyTypeObject LuaObject_Type;`。

另请注意，`luaopen_loadlib`Lua5.1 中已弃用它，它解释了您获得的其他未定义引用。事实上，lunatic-python 对以下内容的使用都已被弃用：

```
luaopen_base(L);
luaopen_table(L);
luaopen_io(L);
luaopen_string(L);
luaopen_debug(L);
luaopen_loadlib(L); 
```

应该用这个代替：

```
luaL_openlibs(L); 
```

# compilation - 虚拟机上的 Linux 内核

> ID：12225786
> 
> 赞同：5
> 
> 时间：2012-09-01T07:20:46.967
> 
> 标签：compilation, linux-kernel, virtual-machine

我正在学习 Linux 驱动程序编程，在其中，建议我使用自编译的 Linux 内核而不是任何发行版。我曾尝试在 ubuntu 中编译 Linux 2.6.9，但该过程在“make menuconfig”阶段返回错误。

我更喜欢在虚拟环境中使用 Linux，这样我就可以无所畏惧地试验内核。那么，有什么方法可以在虚拟机中编译和运行 Linux（比如安装在 Windows 上的 VMware）？我可以使用 live CD 来编译内核。

**所以简而言之，请建议，我怎样才能在虚拟机中以无错误的方式编译、安装和运行 Linux 内核？**

我搜索并阅读[了这个](http://mitchtech.net/compile-linux-kernel-on-ubuntu-12-04-lts-detailed/)。但是在我重新启动计算机时执行了这些步骤后，没有单独的 Linux 3.2.17 操作系统。但是我的 ubuntu 12.04 现在显示的是 3.2.17 内核。虽然这是我第一次在 ubuntu 上编译整个内核而没有任何错误，但我想将该内核加载到其他分区并将其用作独立操作系统。那么，如果有人能告诉我，除了教程中的步骤之外，我还能做些什么来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:18:59.417

最简单的做法可能是在 VM 上安装一些 Linux 发行版，例如 VMWare 或 VirtualBox，然后从那里继续。您可以尝试使用 live-cd，但我猜缺少持久性存储可能会让人恼火。当然，有一些方法可以解决这个问题，但安装一些发行版可能更简单，如果你只想编译一个内核，你真的不需要那么多磁盘空间。

如果您只想编译一个内核模块，并且如果您已经预装了一些 Linux 环境，那么您还应该注意现代 Linux 安装允许您编译模块而无需重新编译整个内核。不过，您将需要内核源代码和头文件。例如，请参阅[本文档](http://www.linuxchix.org/content/courses/kernel_hacking/lesson8)。

顺便说一句，说到现代内核，你为什么选择使用 2.6.9？到现在已经快8岁了。较新的内核实际上可能更容易开发。此外，不能保证用这种旧内核开发的模块仍然可以与当前内核一起工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T00:32:38.393

我建议你阅读[这个页面](http://www.cs.rochester.edu/users/faculty/sandhya/csc256/assignments/qemu_linux.html)。本文档向您展示如何在 qemu 上启动您的个人内核以及如何在其上使用调试器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-04T19:36:05.697

[Kernelnewbies](http://kernelnewbies.org/)是开始内核黑客攻击的好地方。该网站包含一组丰富的关于内核黑客和调整的教程，仅供新手 Linux 开发人员使用。此外，您可以加入社区并开始为一些小型 Linux 项目做出贡献。

要快速开始，请按照“[内核第一个补丁](http://kernelnewbies.org/FirstKernelPatch)”教程中的说明进行操作。由于您在本教程中克隆了“原始”远程存储库，因此您将使用 Linux 内核的最新分支。因此，无需担心在旧版本的 Linux 上工作。同时，如果您不习惯使用 git 树，您可以随时从“kernel.org”的首页下载最新版本的 Linux。

# php - 无法加载请求的文件

> ID：12225787
> 
> 赞同：1
> 
> 时间：2012-09-01T07:20:56.153
> 
> 标签：php, codeigniter

我对 PHP 很陌生，我收到了这个错误（我使用 Code Igniter）。我注意到人们已经问过和我一样的问题，但我仍然不明白答案。

`Unable to load the requested file: user_form_v.php`

这是我`add()`在控制器中的功能：

```
function add(){
    //set common properties 
    $data['title'] = 'Tambah User baru';
    $data['action'] = site_url('user/add');
    $data['link_back'] = anchor('user/index/', 'Back to User list', array('class'=>'back'));

    $this->_set_rules();
    //run validation
    if($this->form_validation->run() == false){
        $data['message'] = '';
        //set common properties 
        $data['title'] = 'Add new User';
        //$data['message'] = '';
        $data['user']['ID_user'] = '';
        $data['user']['nama'] = '';
        $data['user']['email'] = '';
        $data['user']['active'] = '';
        $data['link_back'] = anchor('user/index/', 'Lihat daftar User', array('class'=>'back'));

        $this->load->view('user_form_v', $data);
    } 
```

这里发生了什么？

**更新** 抱歉，我的名字中有一个额外的空格，所以它变成了 user_list_v .php，仅此而已：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:23:55.093

确保它不在子文件夹中，例如 view/sub-folder/user_form_v.php。如果这是你的最后一个陈述应该是

```
$this->load->view('sub-folder/user_form_v',$data); 
```

检查拼写不匹配，“查看”文件夹的读写权限。

如果您没有使用任何 css 文件。确保从标题中删除这些链接，如果您正在使用它们，请确保它们位于正确的位置。

# cakephp - Cakephp JsHelper 添加/删除类

> ID：12225788
> 
> 赞同：1
> 
> 时间：2012-09-01T07:21:26.553
> 
> 标签：cakephp

这是一个简单的问题，但我无法在网上或在 stackoverflow 上找到答案。如何将另一个函数附加到 Js 事件调用。这就是我所拥有的，应该给出一些背景：

```
$this->Js->get('#all-matches');
$this->Js->event(
'click', 
    $this->Js->request(
        array('action' => 'findMatches', 'all'),
        array('async' => true, 
              'update' => '#matches', 
              'success' => $this->Js->each('$(#event-matches).addClass("active");')) 
```

我本质上想在 ajax 调用之后将 div 元素上的类名更改为“活动”。似乎这应该是不费吹灰之力，但我找不到任何文档。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T07:49:27.163

Js 助手功能有限。真的不能指望一个简单的 php 包装器来生成您需要的所有类型的 js 代码。迟早你会发现它妨碍了你，而不是像现在这样帮助你更快地编码。最好自己直接编写 jquery 代码（或您选择的任何其他 js lib）。

# git - GitHub for Windows 可以在本地使用吗？

> ID：12225792
> 
> 赞同：15
> 
> 时间：2012-09-01T07:23:05.167
> 
> 标签：git, github-for-windows

我决定我需要某种版本控制软件来进行编码，所以我安装了 GitHub for Windows。

问题是在我添加一个存储库后，复制该文件夹中的源代码，然后单击它想要提交到 GitHub 网站的提交，并要求我提供姓名和电子邮件。

由于我使用 git 的目的只是为自己进行修订控制，而不是与其他开发人员协作，因此我想在我的计算机上本地托管存储库。

是否可以在本地托管，我可以使用 GitHub for Windows 进行托管吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-01T07:29:57.670

我在本地使用 GitHub for Windows，所以是的，这是可能的。但是，如果要推送代码，则必须将其推送到 GitHub 网站。

我所做的是将我的存储库放在一个[Dropbox](https://www.dropbox.com/)帐户上，这样它仍然在线，但也是私有的。（[与使您的代码公开的免费 G​​itHub 帐户相反](https://github.com/plans)）。如果您是单独编写代码，如果您只是提交到“本地”Dropbox 存储库，这对您来说应该没问题。

另请参阅[这个问题](https://stackoverflow.com/questions/1960799/using-gitdropbox-together-effectively)，它在我开始这个过程时帮助了我。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-01T07:33:26.893

**[在本地使用 git（所以没有“GitHub for Windows”）时，另一个选择是安装GitLab](http://gitlabhq.com/)**，同时希望从 GitHub 的一些功能（wiki、管理、浏览等）中受益。
当然它可以由几个人使用，这不是你的情况，但它也非常适合单独开发。

![GitLab 提交](../Images/a64f1ff6c03f37b1462701d680a5c258.png)

你甚至可以在上面**记录你的问题**：

![GitLab 问题管理](../Images/7d5780265b2539ebd4e9c0656ef791dc.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-01T07:24:35.060

如果你只想要它在本地，你不想使用 GitHub。

您只想使用 git。

获取 msysgit，可在 code.google.com/p/msysgit/ 找到。

当然，这意味着只有 git 功能可用，而 github 功能不可用。

注意：所有 github 功能都可以在 github 网站上找到，除了社交功能（问题跟踪器、wiki）之外，还包括提交活动图、代码大小增加/减少、网络图。

话虽如此，GitHub 上网络图的替代品包括 gitk 等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-01T07:44:12.583

答：您可能想尝试[TortoiseGit](http://code.google.com/p/tortoisegit/)并使用本地存储库。在 git 中，您可以在本地的空文件夹中创建一个“裸”存储库作为您的主存储库。使用 TortoiseGit（上下文菜单项）非常容易。

（评论：我认为您将 GitHub [服务] 与 git [应用程序] 混淆了。）

# android - 运行 Android 服务直到应用程序被销毁

> ID：12225793
> 
> 赞同：-1
> 
> 时间：2012-09-01T07:23:11.830
> 
> 标签：android, service, timer

实际上，我必须执行一些技术，其中将在指定时间后调用某些特定方法，直到应用程序被销毁。我谷歌它并找到了服务。使用服务可以执行这项工作。我已经阅读了许多服务教程，所以现在我可以工作有服务，但任何人都可以告诉我如何做到这一点。我应该在指定时间后在活动背景中使用服务来调用特定的策略吗？...谢谢....

**编辑：**我使用了以下代码

```
public class MyService extends Service {

    int count = 0;

    @Override
    public void onCreate() {
        super.onCreate();
    }

    @Override
    public void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);
        handler.removeCallbacks(updateTimeTask);
        handler.postDelayed(updateTimeTask, 1000);
        Toast.makeText(this, "Service started................",
                Toast.LENGTH_SHORT).show();
    }

    private Runnable updateTimeTask = new Runnable() {
        public void run() {
            if (count == 50) {
                count = 0;
                Tocken_parser tocken = new Tocken_parser();
                tocken.tockenParser("1");
                Toast.makeText(MyService.this, "coutn===", Toast.LENGTH_SHORT)
                        .show();
                System.out.println("Count ===============");
            }
            count++;
            handler.postDelayed(this, 1000);
        }

    };
    private Handler handler = new Handler();

    @Override
    public void onDestroy() {
        super.onDestroy();
        System.out
                .println("Service destroyed........................................");
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }
} 
```

它工作正常但告诉我一件事，当活动被破坏时如何停止服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:01:15.827

答案是`YES`。此外，`Service`产生的`Activity`将一起被摧毁；除非，您指定一个时间表检查`Alarm`以唤醒您的 dead `Service`。

# javascript - Dygraph 不工作

> ID：12225796
> 
> 赞同：2
> 
> 时间：2012-09-01T07:24:00.330
> 
> 标签：javascript, dygraphs

我试图在 Web 应用程序中使用 Dygraphs。请看下面的简单代码。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7; IE=EmulateIE9">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>MyHtml.html</title>
    <!--[if IE]>
      <script type="text/javascript" src="/js/excanvas.js"></script>
    <![endif]-->
    <script type="text/javascript" src="/js/rgbcolor.js"></script>
    <script type="text/javascript" src="http://dygraphs.com/dygraph-combined.js"></script>
    <script type="text/javascript" src="/js/dygraph-combined.js"></script>
    <script type="text/javascript" src="/js/dygraph.js"></script>
    <script type="text/javascript" src="/js/CanvasRenderingContext2D.js"></script>
  </head>

  <body>
    <div id="graphdiv"></div>
    <script type="text/javascript">
      g = new Dygraph(
      document.getElementById("graphdiv"), "Date,Temperature\n" + "2008-05-07,75\n" + "2008-05-08,70\n" + "2008-05-09,80\n");
    </script>
  </body>

</html> 
```

如果我在脚本中包含 type="text/javascript" src="http://dygraphs.com/dygraph-combined.js" 行，它在 firefox 和 chrome 中运行良好，在 IE 中无法运行，它会给出如下错误“CanvasRenderingContext2D”未定义。如果我下载 dygraph-combined.js 并将其包含在我的 Web 应用程序中并通过提供路径访问它，它将无法在所有三个浏览器中工作，它会给出错误消息 Dygraph 未定义。请帮我。我想知道为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T21:38:59.170

您应该只需要包含 dygraph-combined.js，无论是来自您的网站还是您自己的网站。您是否在您的网站上包含了 excanvas.js？这可以解释为什么它在 IE8 中不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T15:09:32.550

问题可能是`/js/...`您的任何浏览器都无法访问其中的脚本。

*   它解释了为什么在您引用 remote 的情况下`dygraph-combined.js`，只有 IE 不起作用 - 它需要`excanvas.js`从`/js/...`
*   如果您下载`dygraph-combined.js`并替换远程引用，`/js/...`则没有浏览器工作，因为他们无法访问`/js/dygraph-combined.js`

检查 和 的可访问`/js/dygraph-combined.js`性`/js/excanvas.js`。是否应该有没有前导斜杠的引用，例如：`js/dygraph-combined.js`？

如前所述，删除所有其他脚本引用（dygraph-combined 和 excanvas.js 除外）。Dygraph-combined 已经包含一个文件中的所有内容，并且 IE 需要 excanvas。

# url - 这个 URL 修改怎么可能？

> ID：12225800
> 
> 赞同：0
> 
> 时间：2012-09-01T07:24:05.107
> 
> 标签：url, html4

谁能告诉网站[http://www.outsharked.com/imagemapster/default.aspx?what.html](http://www.outsharked.com/imagemapster/default.aspx?what.html)是如何以这种方式工作的？在不加载/重新加载页面的情况下修改 url。我认为这不是由 html5 完成的。因为它适用于不支持 html5 的 IE6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:05:04.937

我创建了那个网站。评论者是正确的，它使用 Javascript 来更改 URL。对于 IE6，导航的工作方式没有什么不同 - 浏览器支持执行此类操作所需的客户端功能。基本功能包括：

1.  捕获导航上的点击事件，并通过 AJAX 加载内部内容
2.  更新 URL 以反映要定位的有效直接 URL。

这些链接也是有效的锚链接，在没有 Javascript 的情况下，它们会转到同一页面（但会加载整个内容）。这是您的基本 AJAX 网站设置，但有一点不同。在 AJAX/单页网站中使用这样的 URL 是一种常见的做法：

```
http://mysite.com/home#somepage 
```

甚至只是

[http://mysite.com/#somepage](http://mysite.com/#somepage)

主题标签部分代表用户导航到的实际页面。如果有人直接访问该 url，例如从站点外部，则站点将在页面加载后使用 Javascript 根据主题标签加载正确的内容。这意味着内部内容可能会有一点延迟来反映正确的页面，因为它必须在从浏览器加载初始页面后运行另一个请求才能通过 AJAX 获取内部内容。

我试图通过创建一个完全使用和不使用 Javascript 的设置来避免这种情况。如果您直接访问站点内的 URL，例如[http://www.outsharked.com/imagemapster/default.aspx?faq.html](http://www.outsharked.com/imagemapster/default.aspx?faq.html)，您会注意到它会直接加载内容。即使禁用了 Javascript，此 URL 也可以使用。您实际上不能使用主题标签来执行此操作，因为主题标签内容*不会*发送到服务器。只有客户端知道 URL 中主题标签之后的内容。这就是为什么我使用查询字符串来表示内页。

这个网站架构在当时是一种实验。它工作得很好，但代码不是很好，我并没有真正用它做任何其他事情，而且我确信还有其他更好的充实/测试/功能齐全的框架可以做同样的事情事物。

但它可能不是一个关于创建基本 AJAX 导航设置的具体例子，作为一种学习工具，因为它非常简洁，并且还可以进行 HTML5 历史导航（例如，后退按钮适用于现代浏览器）。

# java - 无法保存 Eclipes .java 和 .xml 文件中的更改

> ID：12225804
> 
> 赞同：1
> 
> 时间：2012-09-01T07:24:26.180
> 
> 标签：java, android, eclipse, windows-7

最近我新安装了 eclipse 并将包含从其他计算机的工作区复制到这台包含新安装 eclipse 的计算机中。
Eclipse 版本与以前相同。

我在eclipse中导入了项目。
现在，当我尝试进行更改或编辑`.java`或`.xml`归档时，我无法在其中保存更改，因此无法编译它们。我得到错误`ACCESS DENIED`！

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:12:52.587

确保您的 Eclipse 和项目不是 is `C:\Program Files...`，否则您需要以管理员身份启动 Eclipse 才能有权修改其中的文件。

请参阅“[无法在 Windows 7 上编辑 eclipe.ini 文件](https://stackoverflow.com/questions/7231844/unable-to-edit-eclipe-ini-file-on-windows-7)”作为说明。

# iphone - 如何在 MFMailComposeViewController 中关闭键盘？

> ID：12225812
> 
> 赞同：3
> 
> 时间：2012-09-01T07:26:26.770
> 
> 标签：iphone, ios

我正在使用 MFMailComposeViewController 为我的 iPhone 应用程序撰写电子邮件。输入“收件人”后如何关闭键盘？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T07:48:06.547

尝试这个。

```
UIWindow* keyWindow = [[UIApplication sharedApplication] keyWindow];
UIView* firstResponder = [keyWindow performSelector:@selector(firstResponder)];
[firstResponder resignFirstResponder]; 
```

但也要记住。

**重要提示：**邮件撰写界面本身不可定制，并且不得由您的应用程序修改。苹果可能会拒绝你的应用程序。[文档](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)

# java - 不同时区的两个日期之间的差异

> ID：12225818
> 
> 赞同：0
> 
> 时间：2012-09-01T07:27:01.060
> 
> 标签：java, android

我试图获得两个日期之间的差异，但我坚持将字符串转换为日期。

我的代码是：

```
 //create a date send it to the database as string
     Date currentDate = new Date(); // date looks like: Sat Sep 01 10:20:14 EEST 2012
     SaveToDB(currentDate.ToString()); 
```

在某些时候，我正在尝试从数据库中检索日期：

```
 String dateStringFromDb = GetDateFromDB(); //Sat Sep 01 10:20:14 EEST 2012
       Date currentDate = new Date();

       //now i'm trying to covnert the dateStringFromDb into a Date, this throws an exception 

       Date dbDate = DateFormat.getInstance().parse(dateStringFromDb); //this throws exception

       long difference = currentDate.getTime() - dbDate.getTime(); // does this give me the correct difference in GMT even if timezones for the two dates are different? 
```

你能指点我正确的解决方案吗？

不幸的是，数据库中的日期是作为字符串检索的，我无法将其更改为另一种类型。所以我需要将该字符串转换为 Date()。

编辑：

例外是：

```
java.text.ParseException: Format.parseObject(String) failed
    at java.text.Format.parseObject(Unknown Source)
    at main.Program.main(Program.java:20) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T07:45:30.397

我建议使用[Joda Time](http://joda-time.sourceforge.net/userguide.html) API 在 Java 中进行与数据和时间相关的操作。使用此 API，处理`timezone`和所有相关的转换细微差别都非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T07:42:59.063

您应该指定一个 DateFormat 以匹配正在接收的字符串格式

例如。

```
SimpleDateFormat fromUser = new SimpleDateFormat("dd/MM/yyyy");
SimpleDateFormat myFormat = new SimpleDateFormat("yyyy-MM-dd");
String reformattedStr = myFormat.format(fromUser.parse(inputString)); 
```

一旦您拥有所需格式的两个日期，然后应用日期算术运算

DateString 的其他格式说明符可在 [http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html中找到](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

# c# - 将参数传递给绑定到gridview的用户控件

> ID：12225825
> 
> 赞同：0
> 
> 时间：2012-09-01T07:28:16.870
> 
> 标签：c#, asp.net, gridview

我有一个名为 ActivityGrid 的用户控件，它在其构造函数中将对象列表作为参数。

```
public ActivityGrid(List<clsActivityRow> ActivityData)
{
   bindData(ActivityData);
} 
```

我需要将这个用户控件绑定到一个名为 parentGrid 的 gridView 中，所以我使用了 Templatefield。

```
<asp:GridView ID="GridViewParent" runat="server" AutoGenerateColumns ="False">
<Columns>
   <asp:TemplateField>
      <ItemTemplate>
         <tr>
            <td colspan="100%">
               <uc1:ActivityGrid ID="ActivityGrid1" runat="server" />
            </td>
         </tr>
      </ItemTemplate>
   </asp:TemplateField>
</Columns>
</asp:GridView> 
```

> 如何在此用户控件中传递对象列表，而它绑定在 gridview 中？

我`List<clsActivityRow> ActivityData`在后面的代码中准备好了对象列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:41:18.247

您可以通过在 UserControl 中创建公共属性来执行此操作，并且在此公共属性设置块中，您可以调用 bindData 方法。

在 GridView RowDataBound 事件中传递此用户控件的对象 List ActiveData。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T07:41:30.807

您需要在其事件`object`的*每一行*中找到 ActivityGrid1并分配.`GridViewParent``RowDataBound``datasource`

```
protected void GridViewParent_RowDataBound(Object sender, GridViewRowEventArgs e)
{           
        if (e.Row.RowType == DataControlRowType.DataRow)
        {                
          ActivityGrid ActivityGrid1= (ActivityGrid )e.Row.FindControl("ActivityGrid1");                    
                if (ActivityGrid1 != null)
                {
                    ActivityGrid1.DataSource = SomeMethodToReturnDataSource();                       
                    ActivityGrid1.DataBind();
                }
         }          
} 
```

或者，如果您的控件具有网格视图，即 ActivityGrid1 具有 gridView1，那么您可以在 ActivityGrid1 中找到 gridView1

```
protected void GridViewParent_RowDataBound(Object sender, GridViewRowEventArgs e)
{           
        if (e.Row.RowType == DataControlRowType.DataRow)
        {                
          ActivityGrid ActivityGrid1= (ActivityGrid )e.Row.FindControl("ActivityGrid1");                    
                if (ActivityGrid1 != null)
                {
                    GridView gridView1 = (ActivityGrid )ActivityGrid1 .FindControl("gridView1");    
                    gridView1.DataSource = SomeMethodToReturnDataSource();                          
                    gridView1.DataBind();
                }
         }          
} 
```

# ruby-on-rails-3 - 没有控制器名称的 Rails 3 seo 友好 url

> ID：12225829
> 
> 赞同：1
> 
> 时间：2012-09-01T07:29:34.000
> 
> 标签：ruby-on-rails-3, routes, url-routing, seo

我有一个现有的网站，我正在尝试将其移植到 rails (3.2.7)，并且需要维护当前的 url。

当前网站有这样的网址：

`http://example.com/Joe`

`http://example.com/Bob`

使用我最接近的rails是使用`friendly_id`gem并得到这个：

`http://example.com/users/Joe`

`http://example.com/users/Bob`

我发现的每个示例似乎都在 url 中包含控制器名称。如何生成像现有网站一样的网址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T07:55:25.063

假设您`:resources :users`的 routes.rb 中有某个地方，您可以将下一个路由定义放在文件中：

```
match '/:name' => "users#show" 
```

这样，url /Joe 将指向 UsersController 显示操作，使用字符串“Joe”填充 params[:name]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T07:36:19.083

[您可以在此处](http://jasoncodes.com/posts/rails-3-nested-resource-slugs)找到所需的所有配置步骤，“从 URL 中删除控制器名称”

# c# - 调整图像大小会导致 C# 中的颗粒状输出

> ID：12225830
> 
> 赞同：0
> 
> 时间：2012-09-01T07:29:40.147
> 
> 标签：c#

我正在尝试调整通过 MVC3 应用上传的图像的大小。下面的代码能够根据指定的参数根据我的目标大小调整图像大小，但最终结果是颗粒状图像。我在 stackoverflow 和 msn 示例中尝试了很多不同的解决方案，但一切都返回了一个颗粒状的图像。

```
static public Image ResizeFile(HttpPostedFileBase file, int targeWidth, int targetHeight)
    {
        Image originalImage = null;
        bool IsImage = true;
        Bitmap bitmap = null;

        try
        {
            originalImage = Image.FromStream(file.InputStream, true, true);
        }
        catch
        {
            IsImage = false;
        }

        if (IsImage)
        {
            //accept an image only if it is less than 3mb(max)
            if (file.ContentLength <= 3145728)
            {
                var newImage = new MemoryStream();
                Rectangle origRect = new Rectangle(0, 0, originalImage.Width, originalImage.Height);

                // if targets are null, require scale. for specified sized images eg. Event Image, or Profile photos.
                int newWidth = 0;
                int newHeight = 0;

                //if the width is greater than height
                if (originalImage.Width > originalImage.Height)
                {
                    newWidth = targeWidth;
                    newHeight = targetHeight;
                    bitmap = new Bitmap(newWidth, newHeight);
                }

                //if the size of image is larger than either one of the target size
                else if (originalImage.Width > targeWidth || originalImage.Height > targetHeight)
                {
                    newWidth = targeWidth;
                    newHeight = targetHeight;
                    bitmap = new Bitmap(newWidth, newHeight);
                }
                //reuse old dimensions
                else
                {
                    bitmap = new Bitmap(originalImage.Width, originalImage.Height);
                }

                try
                {
                    using (Graphics g = Graphics.FromImage((Image)bitmap))
                    {
                        g.SmoothingMode = SmoothingMode.AntiAlias;
                        g.PixelOffsetMode = PixelOffsetMode.HighQuality;
                        g.CompositingQuality = CompositingQuality.HighQuality;
                        g.InterpolationMode = InterpolationMode.HighQualityBicubic;
                        g.DrawImage(originalImage, new Rectangle(0, 0, newWidth, newHeight),
                            0,
                            0,           // upper-left corner of source rectangle
                            originalImage.Width,       // width of source rectangle
                            originalImage.Height,      // height of source rectangle
                            GraphicsUnit.Pixel);
                        bitmap.Save(newImage, ImageFormat.Jpeg);
                    }
                }
                catch (Exception ex)
                {   // error before IDisposable ownership transfer
                    if (bitmap != null)
                        bitmap.Dispose();

                    logger.Info("Domain/Utilities/ImageResizer->ResizeFile: " + ex.ToString());

                    throw new Exception("Error resizing file.");
                }
            }                
        }

        return (Image)bitmap;
    } 
```

**UPDATE 1** 删除了参数和编码器，目前保存在 .jpeg 中。但仍会产生颗粒状图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:42:31.577

几个建议

1）确保您没有*放大*图像。

2）尝试`g.SmoothingMode = Drawing2D.SmoothingMode.AntiAlias`而不是高质量

如果上述失败，我将删除除上述之外的所有其他选项设置，然后简单地使用保存文件；

```
bitmap.Save(newImage, Imaging.ImageFormat.Jpeg); 
```

我发现上面的工作非常好。

# tomcat - 将多个 lib 目录添加到我的 java WebApp

> ID：12225832
> 
> 赞同：0
> 
> 时间：2012-09-01T07:30:07.517
> 
> 标签：tomcat, web-applications

我想组织我的 java webapp 的库目录。我想从特定 web 应用程序的自定义 lib 目录加载自定义 jar 文件。

考虑目录结构是这样的：

`myapp/WEB-INF/lib` `myapp/WEB-INF/dependencylib`

我不想将依赖项 jar 文件复制到 WEB-INF/lib。如果我这样做，我将很难维护依赖关系。

添加与 webapp 一起打包的依赖库需要进行哪些配置更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:21:46.780

没有这样的配置参数。您必须将所有 Web 应用程序的库放入`WEB-INF\lib`以自动加载（根据 Servlet 规范）。
如果您不想这样做（当然也不要将库放在 tomcat 的共享库中），那么您唯一的选择是使用除了库（和 中的类）之外的 which 编写您自己的自定义[Web 应用程序 ClassLoader](http://tomcat.apache.org/tomcat-6.0-doc/config/loader.html)会将您的依赖罐子加载到. `context.xml``WEB-INF\lib``WEB-INF\classes``WEB-INF/dependencylib`

这家伙[这里](http://java.dzone.com/articles/extending-tomcat-webapploader)似乎有一个他的装载机的例子

# html - 响应式菜单位置 css

> ID：12225835
> 
> 赞同：0
> 
> 时间：2012-09-01T07:30:15.177
> 
> 标签：html, css, responsive-design

我们已经从这个站点中提取了响应式菜单

[http://mattkersley.com/demos/responsive_menu/](http://mattkersley.com/demos/responsive_menu/)

当我调整屏幕大小时，默认显示在页面顶部的菜单选择框。我发现下面的代码导致了这个问题。但如果我改变这个响应菜单不起作用。

```
var settings = {
combine: true, //combine multiple menus into a single select
groupPageText: 'Main', //optgroup's aren't selectable, make an option for it
nested: true, //create optgroups by default
prependTo: 'body', //insert at top of page by default
switchWidth: 650, //width at which to switch to select, and back again
topOptionText: 'Select a page' //default "unselected" state
} 
```

如何改变菜单的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:22:16.020

我通过更改“prependTo：'body'”中的属性来实现这一点。我们需要提供像 nav、p、div 这样的 html 标签来显示该位置的导航。

# android - 如何在 Android 中存储用户数据并使其即使在应用更新的情况下也能持久保存？

> ID：12225839
> 
> 赞同：1
> 
> 时间：2012-09-01T07:30:53.510
> 
> 标签：android, android-preferences, android-sdcard

我有一个应用程序（设计为**离线工作**），其中大量条目存储在数据库中，用户输入的值存储在数据库中一列中的每个条目中。用户在使用应用程序时只修改这些值。

但是当我推送**应用程序更新**时，**用户会丢失他输入的所有值**。我该如何解决这个问题？（我还希望数据库对 Android 应用程序是私有的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:16:51.253

您可以像这样创建一个数据库：

```
 /**
     * Open the test database. If it cannot be opened, try to create a new
     * instance of the database. If it cannot be created, throw an exception to
     * signal the failure
     * 
     * @return this (self reference, allowing this to be chained in an
     *         initialization call)
     * @throws SQLException
     *             if the database could be neither opened or created
     */
    public TestDBAdapter open() throws SQLException {
    mDbHelper = new DatabaseHelper(mCtx);
    mDb = mDbHelper.getWritableDatabase();
    dbVersionWebiDBAdapter = mDbHelper.dbVersion;
    return this;
    } 
```

这非常有效，任何更新都可以获取数据。您还可以使用某种数据库版本控制，以便您可以轻松地使用新的更新来更新数据库。

只有当用户进入设置菜单并在那里卸载应用程序或数据时，才会删除此数据库。应用程序的更新负载将保留数据库。

# javascript - 使用 Javascript 切换图像 src 属性

> ID：12225843
> 
> 赞同：2
> 
> 时间：2012-09-01T07:31:21.183
> 
> 标签：javascript, imageurl

我正在尝试`src`使用 Javascript 更改 HTML 图像。我有两张图片 Plus.gif 和 Minus.gif。我已经插入了 HTML`img`标签并编写了一个 Javascript 函数来`src`在单击时更改图像。

问题是当用户单击图像时我想再次将其更改回来。例如，当页面加载`Plus.gif`显示时，当用户单击它时，它会更改为`Minus.gif`.

我想要它，当图像是`Minus.gif`并且用户单击它时，它应该更改为`Plus.gif`.

这是我的 Javascript 函数：

```
<script language="javascript" type="text/javascript">
  function chngimg() {
    var img = document.getElementById('imgplus').src; //= 'Images/Minus.gif';

    if (img) {
      document.getElementById('imgplus').src = 'Images/Minus.gif';
    } else if (!img) {
      document.getElementById('imgplus').src = 'Images/Plus.gif';
      alert(img);
    }

  }
</script> 
```

图片标签：

```
<img id="imgplus" alt="" src="Images/Plus.gif" onmouseover="this.style.cursor='pointer'" onclick="chngimg()"   /> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-01T07:42:29.247

查看我为使其正常工作所做的更改

```
<script language="javascript" type="text/javascript">
    function chngimg() {
        var img = document.getElementById('imgplus').src;
        if (img.indexOf('Plus.gif')!=-1) {
            document.getElementById('imgplus').src  = 'Images/Minus.gif';
        }
         else {
           document.getElementById('imgplus').src = 'Images/Plus.gif';
       }

    }
</script>

<img id="imgplus" alt="" src="Images/Plus.gif" onmouseover="this.style.cursor='pointer'" onclick="chngimg()"   /> 
```

希望能解决您的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T07:34:51.320

一种方法是在您的函数中添加一个*切换*变量：

```
var toggle = false;
function chngimg() {
    if (toggle === true) {
        document.getElementById('imgplus').src  = 'Images/Minus.gif';
    } else {
       document.getElementById('imgplus').src = 'Images/Plus.gif';
       alert(img); 
    }
    toggle = !toggle; 
} 
```

* * *

请注意，对这种事情使用精灵是一种更好的做法。如果你使用两张图片，用户体验会很笨拙，因为他们第一次点击图片时，第二张图片加载时会有一点延迟。

理想情况下，您会将这两个图像作为精灵表，并使用 JQuery。然后你可以这样做。

**HTML**

```
<img id="imgplus" src="Images/Sprite.gif" onclick="chngimg()" /> 
```

**CSS**

```
#imgplus .clicked { background-position: 0 -30px; } 
```

**Javascript**

```
function chngimg() {
    $("#imgplus").toggleClass("clicked");
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-02T04:12:31.230

我已经在纯 JS 中成功使用了这个通用解决方案来解决切换 img url 的问题：

```
function toggleImg() {
  let initialImg = document.getElementById("img-toggle").src;
  let srcTest = initialImg.includes('initial/img/url');
  let newImg = {
    'true':'second/img/url', 
    'false':'initial/img/url'}[srcTest];

  return newImg;
} 
```

然后在您使用的任何事件处理程序中调用 toggleImg()....

```
someButton.addEventListener("click", function() {
  document.getElementById("img-toggle").src = toggleImg();
} 
```

# bash - 在文件中查找和替换日期

> ID：12225848
> 
> 赞同：0
> 
> 时间：2012-09-01T07:32:20.327
> 
> 标签：bash, sed

如果我的标题描述性不够，我深表歉意，我相信以下内容会是。我有 3 个纯文本文件，在每个文件中都是一个日期

```
Date: 2012-08-31 for example 
```

我想获得一个命令/脚本来找到它并更新到当前日期，但是日期会不断变化并且可能不知道进入（不查看文件的内容）

知道日期是什么，使用 sed 就足够简单了，但是如果知道我要修改的行的语法，但不知道具体的值，我怎么能做到这一点。（“ `Date:`”至少是不变的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T07:55:15.733

假设您的日期格式不变，并且所有三个文件都是您 PWD 中仅有的三个文本文件，您可以这样使用`GNU sed`：

```
sed -r 's/Date: [0-9]{4}-[0-9]{2}-[0-9]{2}/Date: 2012-09-01/g' *.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:05:14.463

```
today=`date +%F`
sed -r -i '.bak' "s/Date: [0-9]{4}-[0-9]{2}-[0-9]{2}/Date: $today/g" file1 file2 file3 
```

# c# - 将字符串转换为字符串类型“12-07-2012”的日期时间

> ID：12225851
> 
> 赞同：0
> 
> 时间：2012-09-01T07:32:56.720
> 
> 标签：c#, arrays, datetime

我正在尝试以字符串格式转换包含日期的字符串数组

```
 private string[] ex = new string[]{
         "29-06-2017","29-12-2016","30-06-2016","31-12-2015","25-06-2015","24-12-2014","26-06-2014","26-12-2013"}; 
```

我想转换为十进制数组，我使用了下面的代码，但它不起作用。

```
 public void load()
    {
        DateTime[] exDate=Array.ConvertAll(ex, new Converter<string, DateTime>(convertDecimal)); 
        List<DateTime> expiryDate = new List<DateTime>();
        expiryDate.AddRange(exDate);
        expiryDate.Sort();
        _expiryDate=expiryDate;
    }

    public static DateTime convertDecimal(string strgDate)
    {
        return DateTime.Parse(strgDate);
    } 
```

我得到的错误是：

```
"String was not recognized as a valid DateTime." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:38:25.797

```
var dates = ex.Select(d => DateTime.ParseExact(d, "dd-MM-yyyy", CultureInfo.InvariantCulture))
              .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T07:36:06.607

尝试像这样转换：

```
public static DateTime convertDecimal(string strgDate)
{
    return DateTime.ParseExact(strgDate, "yyyy-MM-dd",
                    System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None));

} 
```

# ruby-on-rails - 如何使用 VBA 代码在 Excel 工作表中填充数据

> ID：12225852
> 
> 赞同：2
> 
> 时间：2012-09-01T07:33:02.567
> 
> 标签：ruby-on-rails, vba, spreadsheet

我们正在尝试创建一个支持带有一些数据验证代码的宏的 excel 文档。是否可以使用`axlsx`包来创建这样的文档。

例如，一个名为 Users 的工作表包含一个`VBA script`（可以使用 Sheet --> View Code 查看）

我们还可以提供一个包含此信息的简单 xls 模板文件，是否可以使用 axlsx gem 添加带有列数据的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T08:42:22.680

虽然，答案是肯定的，但正如 Brettdj 所说，这是一个广泛的猜测。我认为你应该首先[阅读这个](http://www.homeandlearn.co.uk/excel2007/excel2007s8p1.html)和[这个](http://www.contextures.com/xlUserForm01.html)关于创建表单的内容。然后参考这些链接：

[如何在 vba 中设置数据验证](http://www.excelforum.com/excel-programming-vba-macros/559023-how-do-i-set-data-validation-in-vba.html)

[视觉基本应用程序验证规则](http://www.mrexcel.com/forum/excel-questions/453307-visual-basic-applications-validation-rule.html)

查看这些地址将帮助您准确了解什么是可能的，什么是不可能的。

# c# - 为什么我的 ObservableCollection 序列化不起作用？

> ID：12225853
> 
> 赞同：3
> 
> 时间：2012-09-01T07:33:04.237
> 
> 标签：c#, .net, wpf, xml, xml-serialization

我正在尝试序列化和反序列化这个 ObservableCollection：

```
public class DataCollection : ObservableCollection<Data>
{
}

public class Data : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private bool? _enabled;

    public string Name { get; set; }
    public bool? Enabled 
    {
        get { return _enabled; }
        set { _enabled = value; NotifyPropertyChanged("Enabled"); }
    }

    public Data(string name, bool? enabled)
    {
        this.ScriptName = name;
        this.Enabled = enabled;
    }

    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(property));
    }
} 
```

使用此类（如[将对象的 Observable 集合保存到 XML 文件的最简单方法是什么？](https://stackoverflow.com/questions/1194931/what-is-the-easiest-way-to-save-an-observable-collectin-of-object-to-an-xml-file)示例）：

```
class UserPreferences
{
    private DataCollection _dataLst;
    private const string _dataLstFileName = "Data.xml";

    public DataCollection DataLst { get { return _dataLst; } set { _dataLst = value; } }

    public UserPreferences()
    {
        Load();
    }

    public void Load()
    {
        if (File.Exists(_dataLstFileName))
        {
            using (var reader = new StreamReader(_dataLstFileName))
            {
                var xs = new XmlSerializer(typeof(DataCollection));
                _dataLst = (DataCollection) xs.Deserialize(reader);
            }
        }
        else
        {
            _dataLst = new DataCollection();
        }
    }

    public void Save()
    {
        using (var writer = new StreamWriter(_dataLstFileName))
        {
            var xs = new XmlSerializer(typeof(DataCollection));
            xs.Serialize(writer, _dataLst);
        }
    }
} 
```

这是我从我的应用程序中调用它的方式：

```
public partial class MainWindow : Window
{
    private DataCollection DataLst;

    ...

    private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        var userPrefs = new UserPreferences();

        userPrefs.DataLst = DataLst; // DataList isn't null and contains correct data
        userPrefs.Save(); 
    }
} 
```

但是它会创建空文件并在行中挂断（即使没有例外，只是应用程序窗口变黑并且没有响应）

```
var xs = new XmlSerializer(typeof(DataCollection)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T08:03:27.907

经过一番研究，似乎序列化时存在问题`ObservableCollection<T>`。有关更多信息，请参阅[此](https://web.archive.org/web/20130926065936/http://kentb.blogspot.com:80/2007/11/serializing-observablecollection.html)博客文章。

总之：

> 问题是事件没有被标记为非序列化。因此，每当您尝试序列化 ObservableCollection 的实例时，您也将尝试序列化任何事件处理程序。当您将集合用于其主要方案（数据绑定）时，您将拥有附加到事件的 WPF 控件。
> 
> （肯特·布加特）

你的`Data`班级也会遇到类似的问题；像这样更新您的`PropertyChanged`活动：

```
[field: NonSerialized]
public event PropertyChangedEventHandler PropertyChanged; 
```

除了其他人已经提到的更新之外，您的`Data`课程也应该标记为`Serializable`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T08:01:28.170

1.  您的 Data 类必须有一个无参数构造函数，否则 XmlSerializer 将永远无法创建 Data 的实例。
2.  您应该存储和检索 Data[]，而不是存储 DataCoollection，这更容易，无需执行任何其他操作。
3.  存储时，可以调用 ToArray 方法获取 Data[] 并使用 typeof(Data[]) 进行序列化。
4.  在阅读时，您可以读取数组并将项目添加到您的集合中。

# c++ - 加载具有不同类布局的旧 boost::serialisation 存档

> ID：12225855
> 
> 赞同：1
> 
> 时间：2012-09-01T07:33:28.610
> 
> 标签：c++, serialization, boost

我有一个旧的 (boost::serialisation) 存档，它是使用以下方法生成的：

```
class Data;
data = new Data();
ar & data; 
```

现在代码已更改为：

```
class Header;
class Data;
header = new Header();
data = new Data();
ar & header;
ar & data; 
```

所以，我的问题是：**如何使用新代码加载旧存档？** 据我所知， boost::serialisation 不允许存档版本控制，如果我只是尝试加载它，它会给我一个“输入流错误”，因为它会尝试`ar & header;`处理已保存的数据与`ar & data;`.

编辑：我知道`BOOST_CLASS_VERSION(ns::Class, x)`，但这不适用于档案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:27:32.273

Boost 序列化[*确实*允许版本控制](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/tutorial.html#versioning)。不幸的是，您不知道这一点，因此您只是通过保存新档案`ar & header` *而破坏了向后兼容性，而不会影响类版本*。

上面链接的教程很好地解释了它。在您的情况下，当您决定添加 时`header`，您必须执行以下操作：

```
class YourClass
{
    /* ... */

    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    {
        if(version > 0)
            ar & header;
        ar & data;
    }
};

BOOST_CLASS_VERSION(YourClass, 1) 
```

*每次*更改序列化代码时都必须更改类的版本，即使您仅在末尾添加字段也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:28:33.030

所以似乎除了为旧版本的档案写一个转换程序外，没有别的办法。

但是，现在有了“标题”，将来，如果我需要向顶层添加更多类，我可以修改它的版本并在我的加载函数中使用一些逻辑。

# php - HTML POST 响应

> ID：12225856
> 
> 赞同：0
> 
> 时间：2012-09-01T07:33:36.530
> 
> 标签：php, html, post

我有一个 PHP 脚本作为 POST 的一部分调用，它根据用户信息返回布尔值 true/false。几个问题： 1) 使用 PHP 返回构造时的 HTTP 标头是什么？2) 有什么方法可以捕获这个 POST 响应值，或者我是否需要像一些示例所建议的那样返回一个 JSON 数组？

问候梅兰妮。

PS：我是PHP的新手，所以如果这个问题已经解决，请指出链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:59:31.700

正如昆汀所说，这取决于脚本的使用方式。如果它是 HTML 表单的目标，浏览器期望输出是要显示的网页，因此您应该输出 HTML。如果它被 AJAX 客户端使用，则输出通常应该是 JSON——您可以使用该`json_encode`函数来生成它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T07:38:26.110

> 使用 PHP 返回构造时的 HTTP 标头是什么？

`return`ing 结束一个函数并将一个值返回给调用它的任何对象。

它根本不会更改 HTTP 标头或 HTTP 响应正文（除非返回的任何值都使用它来修改它们）。

> 有什么方法可以捕获这个 POST 响应值

你如何阅读 HTTP 响应取决于你首先做了什么来发出请求

# visual-c++ - 如何移动由 CMake 创建的文件夹？

> ID：12225857
> 
> 赞同：0
> 
> 时间：2012-09-01T07:33:44.337
> 
> 标签：visual-c++, cmake

CMake 在为 Visual C++ 生成项目文件时使用绝对路径。

有时，我需要将我的项目文件夹移动到其他驱动器。

但是当我移动文件夹（并尝试替换项目文件中的所有路径）时，这会触发一个漫长而艰巨的重新编译过程，这完全没有理由浪费我的大量时间。

如何在**不**触发重新编译的情况下将 CMake 项目文件夹移动到任意位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T07:48:14.147

从[CMAKE_USE_RELATIVE_PATHS](http://cmake.org/cmake/help/v2.8.9/cmake.html#variable%3aCMAKE_USE_RELATIVE_PATHS) var 的文档中：

> 通常，无论此变量的值如何，都无法将 CMake 生成的 makefile 移动到其他位置。

# html - html5+canvas+getusermedia：如何录制视频

> ID：12225859
> 
> 赞同：0
> 
> 时间：2012-09-01T07:33:52.683
> 
> 标签：html, canvas, html5-video, webcam

我想从 录制视频`getUserMedia`。它的[演示页面](http://gifbox.ru/webcam/)或[这个](http://jsfiddle.net/LNbeH/1/)（按开始，然后停止，然后播放录制）每 67 毫秒我制作画布快照并通过以下方式将 data64 添加到数组中：`video_arr.push(canvas.toDataURL());`

我的“录制”视频的帧速率（当按下播放录制时）在 67 毫秒内小于一帧。为什么？

或者有人能说出真实的记录方式，然后从 getUserMedia 播放视频吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T08:12:15.267

这只是一个想法。我希望它应该对你有所帮助。

使用 blobbuilder 存储记录的帧，您需要将画布数据转换为 blob，以便使用 polyfill canvas 到 blob

这是polyfill的用法和下载

[http://eligrey.com/blog/](http://eligrey.com/blog/)

[https://github.com/blueimp/JavaScript-Canvas-to-Blob](https://github.com/blueimp/JavaScript-Canvas-to-Blob)

```
var bb = new BlobBuilder();//global variable

//record for every frame
canvas.toBlob(function(blob) {
   bb.append(blob)
});

//onstop upload the blob builder data to server 
```

# facebook-graph-api - 使用 Graph API 在单个请求中签入多个地点的详细信息

> ID：12225861
> 
> 赞同：0
> 
> 时间：2012-09-01T07:33:57.457
> 
> 标签：facebook-graph-api

在 Facebook API 中，是否可以在单个请求中获取多个地点的签到详细信息。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:44:36.880

是的，请求多个对象的方法记录在 Graph API 文档的第一页：

`/checkins?ids=<LIST OF PAGES in CSV FORMAT>`

当然，根据 Pages 文档，您只能看到当前用户或其朋友的签到

{edit}：哦，签入计数略有不同，但您应该能够从文档中轻松确定：

`/?fields=checkins&ids=<LIST OF PAGES in CSV FORMAT>`

# android - Android：按钮中的搜索栏

> ID：12225865
> 
> 赞同：1
> 
> 时间：2012-09-01T07:35:16.267
> 
> 标签：android, android-layout

我的 android 应用程序中有一个 Button，我需要在单击时展开它并在其中显示一个 Seekbar，如下图所示。这样做的最佳做法是什么？

![在此处输入图像描述](../Images/bf7ffe1b1fb0a02044531c8bea842ee9.png)![在此处输入图像描述](../Images/7c087cbd2e7087c0da030682013d9a14.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:01:21.307

使用下面的代码来处理按钮的点击以设置搜索栏的可见性（如果可见则不可见）或不可见则可见。

```
 Button click = (Button) findViewById(R.id.but);
 Seekbar seek = (Seekbar) findViewById(R.id.seek); 

  click.setOnClickListener(new OnClickListener()
  {
    public void onClick(View v) {
       if (seek.getVisibility() == View.VISIBLE) { 
         seek.setVisibility(View.INVISIBLE); 
            } else { 
                seek.setVisibility(View.VISIBLE); 
            }
        }

  }); 
```

# google-bigquery - BigQuery 数据中的每行大小限制？

> ID：12225874
> 
> 赞同：3
> 
> 时间：2012-09-01T07:37:11.567
> 
> 标签：google-bigquery

BigQuery 中单行的数据量是否有限制？单个列条目（单元格）的大小是否有限制？（以字节为单位）

从 Cloud Storage 导入时是否有限制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T17:42:05.987

CSV 允许的最大单行大小为 1MB，JSON 为 2MB。字段大小没有限制，但显然它们也必须小于行大小。

[此处](https://developers.google.com/bigquery/preparing-data-for-bigquery)描述了这些限制。

# c# - 如何设置主 Winform 的默认可见性

> ID：12225875
> 
> 赞同：0
> 
> 时间：2012-09-01T07:37:30.680
> 
> 标签：c#, winforms

我已经逐步运行了我的程序，但是仍然找不到`form.visible`设置的位置。

这是“Form1.cs”的代码：

```
public Form1()
{
    InitializeComponent();
    this.Hide();
} 
```

我添加了`this.Hide();`，但它根本不起作用。

我什至从以下位置修改了“Program.cs”：

```
Application.Run(new Form1()); 
```

到：

```
Form1 form1=new Form1();
form1.Visible = false;
Application.Run(form1); 
```

但是主窗体仍然显示，即使添加`form1.Enable=false;`也不会阻止窗体显示。我也尝试过添加`this.Hide();`，`Form1_Load()`它可以工作，但主窗体在最终隐藏之前出现并闪烁。

我现在完全糊涂了。那么如何加载主窗体而不显示呢？把它藏起来，直到我打电话`this.Show();`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T07:48:35.760

您不能在加载之前将表单设置`visible`为尝试以下代码：`false`

```
//In Main Function
Form1 form1 = new Form1();
form1.WindowState = FormWindowState.Minimized;
form1.ShowInTaskbar = false;
Application.Run(new Form1());
//In Form Shown
private void Form1_Shown(object sender, EventArgs e)
{
this.Visible = false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T08:05:02.897

[Application.Run(Form)](http://msdn.microsoft.com/en-us/library/ms157902.aspx)的文档清楚地说明它将使表单可见。只要您需要将其隐藏，因此您不应将该表单传递给 Application.Run。根据您的需要，您可以改用[Application.Run()](http://msdn.microsoft.com/en-us/library/ms157900)（无参数）或[Application.Run(context)](http://msdn.microsoft.com/en-us/library/ms157901)（创建自定义`ApplicationContext`）。

*编辑*：我只是想补充一点，不显示表格，**你不应该显示表格**。我不明白这里有多少用户认为显示表单然后很快隐藏它是一个好主意，或者让显示表单的代码不显示表单。你不应该做错事然后在事后修复它，你应该首先做正确的事。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T08:26:48.483

为什么不重写 SetVisibleCore 方法：

```
bool showForm = false;

protected override void SetVisibleCore(bool value)
{    
   base.SetVisibleCore(showForm);
} 
```

这将在表单打开之前将其隐藏。使用许多方法，您会在其 .Visible 或类似属性设置为“隐藏”之前看到表单的短暂闪烁。

显然，当您想再次显示它时，您将需要另一种方法将“showForm”翻转为true，即NotifyIcon 事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T09:11:26.980

您可能正在寻找该`Opacity`物业。您可以从 IDE设置`Opacity`为。`0.0`它可以取 和 之间`0.0`的值`1.0`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T07:57:28.087

你可以尝试这样的事情：

```
 [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        var form = new Form1();
        form.DoBeforeShow();
        Application.Run(form);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-01T09:58:23.903

首先，您可以加载要永久显示给用户的表单。在构造函数中只调用应该隐藏的表单。之后，您可以关闭或隐藏它。

# c# - 将许多图像下载到列表框

> ID：12225876
> 
> 赞同：0
> 
> 时间：2012-09-01T07:37:41.810
> 
> 标签：c#, windows-phone-7

我正在编写 Windows Phone 应用程序，但无法理解模拟器崩溃的原因。它说：“ `0x773415de`XDE.exe 中未处理的异常`0xC0000005`：：访问冲突读取位置`0x05190000`。” 仅当我开始快速滚动列表框时才会出现此问题。我将每 20 个项目加载到列表框（所有项目的数量为 200）。问题出在我的下载图像类中。我为每个图像创建一个 Webclient 请求到服务器还是创建一个线程池更好？

在 XAML 中：

```
<Image Name="userPic" Margin="0,8,1,2"
                            DelayFix:LowProfileImageLoader.UriSource="{Binding photoUrl}" Stretch="Fill"
                            Width="60"
                            Height="60"/> 
```

下载图片类：

```
using System;
using System.Net;
using System.Windows.Resources;
using System.Windows.Media.Imaging;
using System.IO;
using System.Windows;
using System.Windows.Controls;
using Microsoft.Phone;
using System.Diagnostics;

namespace PhoneApp
{
    public class downloadImage
    {
        public int ImageIndex;

        public string ImageURL;

        public Boolean Downloaded;

        public BitmapImage Bitmap;

        public Image destinationImage; 

        private WebClient client;

        public delegate void FileCompleteHandler(object sender);
        public event FileCompleteHandler FileCompleteEvent;

        private static readonly object _syncBlock = new object();

        public downloadImage(int index, string imageURL, Image destinationImage = null)
        {
            this.ImageIndex = index;
            this.ImageURL = imageURL;
            this.destinationImage = destinationImage;
        }

        public void Download()
        {
            client = new WebClient();
            client.OpenReadCompleted += new OpenReadCompletedEventHandler(wc_OpenReadCompleted);
            client.OpenReadAsync(new Uri(this.ImageURL, UriKind.Absolute));
        }

        private void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
        {
                if (e.Error == null && e.Result != null)
                {
                    Deployment.Current.Dispatcher.BeginInvoke(new Action(() =>
                    {
                        StreamResourceInfo sri = new StreamResourceInfo(e.Result as Stream, null);

                        if (destinationImage == null)
                        {
                            this.Bitmap = new BitmapImage();
                            this.Bitmap.SetSource(sri.Stream);
                        }
                        else
                        {
                            this.destinationImage.Source = PictureDecoder.DecodeJpeg(e.Result);
                        }

                        this.Downloaded = true;

                        if (FileCompleteEvent != null)
                            FileCompleteEvent(this);      
                    }));
                }
        }
    }
} 
```

我班的代码：

```
using System;
using System.Collections.Generic;
using System.Diagnostics.CodeAnalysis;
using System.IO;
using System.Net;
using System.Threading;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media.Imaging;
using System.Diagnostics;
using System.ComponentModel;
using Microsoft.Phone;
using Microsoft.Phone.Info;

namespace DelayFix
{
    /// <summary>
    /// Provides access to the Image.UriSource attached property which allows
    /// Images to be loaded by Windows Phone with less impact to the UI thread.
    /// </summary>
    public static class LowProfileImageLoader
    {
        private static readonly object _syncBlock = new object();
        private static bool _exiting;

        /// <summary>
        /// Gets the value of the Uri to use for providing the contents of the Image's Source property.
        /// </summary>
        /// <param name="obj">Image needing its Source property set.</param>
        /// <returns>Uri to use for providing the contents of the Source property.</returns>
        [SuppressMessage("Microsoft.Design", "CA1011:ConsiderPassingBaseTypesAsParameters", Justification = "UriSource is applicable only to Image elements.")]
        public static Uri GetUriSource(Image obj)
        {
            if (null == obj)
            {
                throw new ArgumentNullException("obj");
            }
            return (Uri)obj.GetValue(UriSourceProperty);
        }

        /// <summary>
        /// Sets the value of the Uri to use for providing the contents of the Image's Source property.
        /// </summary>
        /// <param name="obj">Image needing its Source property set.</param>
        /// <param name="value">Uri to use for providing the contents of the Source property.</param>
        [SuppressMessage("Microsoft.Design", "CA1011:ConsiderPassingBaseTypesAsParameters", Justification = "UriSource is applicable only to Image elements.")]
        public static void SetUriSource(Image obj, Uri value)
        {
            if (null == obj)
            {
                throw new ArgumentNullException("obj");
            }
            obj.SetValue(UriSourceProperty, value);
        }

        /// <summary>
        /// Identifies the UriSource attached DependencyProperty.
        /// </summary>
        public static readonly DependencyProperty UriSourceProperty = DependencyProperty.RegisterAttached(
            "UriSource", typeof(Uri), typeof(LowProfileImageLoader), new PropertyMetadata(OnUriSourceChanged));

        /// <summary>
        /// Gets or sets a value indicating whether low-profile image loading is enabled.
        /// </summary>
        public static bool IsEnabled { get; set; }

        [SuppressMessage("Microsoft.Performance", "CA1810:InitializeReferenceTypeStaticFieldsInline", Justification = "Static constructor performs additional tasks.")]
        static LowProfileImageLoader()
        {
            Debug.WriteLine("Limit Memory:" + DeviceStatus.ApplicationMemoryUsageLimit / 1024 / 1024);
        }

        private static void HandleApplicationExit(object sender, EventArgs e)
        {
            Debug.WriteLine("Exit!");
        }

        private static void OnUriSourceChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            lock (_syncBlock)
            {
                var image = (Image)o;
                var uri = (Uri)e.NewValue;

                Debug.WriteLine("Memory:" + DeviceStatus.ApplicationCurrentMemoryUsage / 1024 / 1024);

                if (DesignerProperties.IsInDesignTool || !uri.IsAbsoluteUri)
                {
                    image.Source = PhoneAppVKContest.ImageUtils.getJpegImage(uri.OriginalString);
                }
                else
                {
                    PhoneAppVKContest.downloadImage di = new PhoneAppVKContest.downloadImage(0, uri.AbsoluteUri);
                    di.destinationImage = image;
                    di.FileCompleteEvent += new PhoneAppVKContest.downloadImage.FileCompleteHandler(di_FileCompleteEvent);
                    di.Download();
                }
            }
        }

        static void di_FileCompleteEvent(object sender)
        {
            Debug.WriteLine("Download success!");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T21:03:29.680

当您为每个图像创建 webClient 请求时，当 webClient 被所有请求轰炸时，可能会出现冲突。您需要通过队列按顺序对请求进行排序。如果队列的第一个元素中的图像已经在缓存或 IS 中，则链接它，否则检查 webclient 是否忙。如果忙，则将其发送到队列的末尾。并检查下一张图片。如果它不忙，请提交下载请求。这是我遵循的方法。您还可以考虑为每个图像绑定 Imagesource，以防止在页面重新加载时自动重新加载或由于滚动缓存中的问题。我希望这个答案对你有所帮助。

# java - 在 try 块内循环

> ID：12225877
> 
> 赞同：-1
> 
> 时间：2012-09-01T07:37:44.107
> 
> 标签：java, while-loop

我试图在 try /catch 块中放置一个 while 循环。令我好奇的是，当 while 循环退出时，最终不会执行 try catch。有人可以解释实际发生的事情吗？我试图谷歌，但找不到任何细节。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T07:39:26.300

我假设您的代码如下所示：

```
try
{
    while (...)
    {
        // ...
    }
}
catch (FooException ex)
{
    // This only executes if a FooException is thrown.
}
finally
{
    // This executes whether or not there is an exception.
} 
```

仅当出现异常时才会执行 catch 块。finally 块**通常**执行无论是否抛出异常。所以你可能会发现你的 finally 块实际上正在被执行。您可以通过在此处放置一条导致控制台输出的行来证明这一点。

但是，在某些情况下，finally 块不会运行。有关更多详细信息，请参见此处：

*   [finally 块是否总是运行？](https://stackoverflow.com/questions/464098/does-a-finally-block-always-run)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T07:50:58.063

仅当您的程序通过使用`System.exit()`或抛出 or 退出时才会发生这种情况（而`Error`不是将被捕获）。`Throwable``Exception`

尝试以下操作：

```
 public static void main(String[] args) {         
        try{
            System.out.println("START!");
            int i=0;
            while(true){
                i++;
                if(i > 10){
                    System.exit(1);
                }
            }
        }
        catch (Exception e) {
            // TODO: handle exception
        }
        finally{
            System.out.println("this will not be printed!");
        }
    } 
```

# python - 我无法在另一个类中调用一个类的函数

> ID：12225878
> 
> 赞同：-5
> 
> 时间：2012-09-01T07:37:47.117
> 
> 标签：python, python-2.7

下面是我的代码。我无法在我的演示类中调用 google_charts 类的函数。帮我解决问题。

```
class google_charts:
    def all_files_to_one():
        pass

    prods = []
    srcs = []
    sname = []
    def process_compiled():
        global prods, srcs, sname
        sname.append('something')
        prods.append('something')
        srcs.append('something')

def demo():
    google_charts.all_files_to_one()
    google_charts.process_compiled()

demo() 
```

输出：

```
Traceback (most recent call last):
  File "C:\\demo.py", line 18, in <module>
    demo()
  File "C:\\demo.py", line 15, in demo
    google_charts.all_files_to_one()
TypeError: unbound method all_files_to_one() must be called with google_charts instance as first argument (got nothing instead) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T07:44:18.923

在 python 中定义一个类时，其中的任何方法都必须将“self”作为第一个参数：

```
class cheese(object):
       def some_method(self):
           return None 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T07:48:55.317

您的 google_contacts 类中所有方法的签名都不正确。它们必须包含 self 参数。查看 Python 类的文档：

[http://docs.python.org/tutorial/classes.html](http://docs.python.org/tutorial/classes.html)

这也可能有用：

[自我的目的是什么？](https://stackoverflow.com/questions/2709821/python-self-explained)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T15:22:28.797

我冒昧地编辑了原始问题，删除了冗长的、不相关的代码，以使实际问题可见。看起来你已经使用了一堆函数，只是在它们周围包裹了一个类。在 Python 类方法中需要一个 self 参数。最初的函数都是样式`all_files_to_one`，没有可供类操作的状态。一个函数做了（`process_compiled`）。这是一个更正的版本：

```
class google_charts(object):  # Python 2.X classes should derive from object

    # Initialize class instance state variables
    def __init__(self):
        self.prods = []  
        self.srcs = []
        self.sname = []

    # methods are called with the class instance object, traditionally named self
    def process_compiled(self):
        # Access instance variables via self
        self.sname.append('something')
        self.prods.append('something')
        self.srcs.append('something')

    # Use a static method when a method does not access class or instance state
    # but logically is associated with the class.  No self parameter is passed
    # for a static method.
    @staticmethod
    def all_files_to_one():
        print 'called all_files_to_one()'

def demo():
    gc = google_charts()  # instantiate an object
    gc.all_files_to_one() # call static method
    gc.process_compiled() # call instance method
    print gc.prods        # see some state in the instance

demo() 
```

输出：

```
called all_files_to_one()
['something'] 
```

请阅读其他海报提到的教程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T07:45:22.247

你想使用：

```
self.all_files_to_one() 
```

除此之外：缺少“self”参数

这个问题是真正基础的 Python 面向对象编程。

请先阅读 Python 教程，而不是玩试错编程。

SO 不能替代阅读基本文档。

# grails - grails 一对多关系的显示顺序

> ID：12225882
> 
> 赞同：0
> 
> 时间：2012-09-01T07:38:38.667
> 
> 标签：grails, groovy, grails-domain-class

我有两个域类如下

```
class Quiz {
    String name
    String description
    int duration
    User user
    int points
    static hasMany = [questions:Question]
} 
```

和

```
class Question {
    String question
    String questionType
    int points  
    String option_1
    String option_2
    String option_3
    String option_4
    boolean isOption_1_Correct
    boolean isOption_2_Correct
    boolean isOption_3_Correct
    boolean isOption_4_Correct
    User user
    static belongsTo = [user:User]
} 
```

测验课上的 static hasMany = [questions:Question] 让我的生活变得轻松多了。我也知道它将能够使用 addTo 和 removeFrom 等便捷方法。我唯一的查询是我希望用户能够定义问题的显示顺序。有没有更简单的方法可以做到这一点，还是我必须创建一个如下所示的映射类？

```
class QuestionInQuiz {
    Quiz quiz
    Question question
    int displayOder
    static constraints = {
        question unique:['quiz']
    }
} 
```

如果我能以某种方式避免使用这个映射类并让我的代码更简单，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:12:24.457

如果你添加

```
List questions 
```

对于您的`Quiz`班级（除了`hasMany`），GORM 将使用 a`List`进行关联，而不是默认的 unordered `Set`。[Grails 文档](http://grails.org/doc/latest/guide/GORM.html#sets,ListsAndMaps)解释了细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:30:12.700

您可以将`position`属性添加到`Question`类。您应该`mapping`向类添加一个静态闭包`Quiz`：

```
static mapping = {
    questions sort:'position'
} 
```

然后你应该`Question`用`Quiz`->链接`belongsTo = [user: User, quiz: Quiz]`

我相信你可以改进你的模型创建一个`Option`类和一个枚举`QuestionType`如果明天你有一个有 5 或 6 个选项的问题会发生什么？您想重写、重新测试、重新编译和重新部署您的代码吗？

或者您可以`Comparable`在 Question 中实现接口并创建一系列`SortedSet`问题

```
class Quiz {
    SortedSet questions
    String name
    String description
    int duration
    User user
    int points
    static hasMany = [questions:Question]
}

class Question implements Comparable<Question> {
    String question
    String questionType
    int points  
    int position
    String option_1
    String option_2
    String option_3
    String option_4
    boolean isOption_1_Correct
    boolean isOption_2_Correct
    boolean isOption_3_Correct
    boolean isOption_4_Correct
    User user
    static belongsTo = [user:User]

    int CompareTo(obj){
        position <=> obj.position
    }
} 
```

# android - 安卓的图像/文本识别

> ID：12225885
> 
> 赞同：2
> 
> 时间：2012-09-01T07:39:03.530
> 
> 标签：android

我要实现的应用程序必须使用相机来识别由图像和一些文本组成的复杂实体。必须根据文本触发不同的场景。

我有什么选择？开放式简历？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T07:45:57.587

Android NDK 和 OpenCV

它可以在这里 [http://opencv.org/downloads.html](http://opencv.org/downloads.html)

android 包包含预构建的 opencv 库，因此您不必从源代码构建它，这非常好。此外，他们有很多关于如何使用 opencv 相机或 android 相机进行颜色/图像识别的示例。

# php - 从数组中删除元素并从 0 重新索引

> ID：12225888
> 
> 赞同：5
> 
> 时间：2012-09-01T07:40:02.427
> 
> 标签：php, arrays

```
Array (
    [REF_DETAILS] = Array
        (
            [0] = Array
                (
                    [ID] =&gt; 1231312
                    [USER] =&gt; USER
                )

            [1] = Array
                (
                    [TID] =&gt; 2754042         
                    [USER] = USER
                )
            [1] = Array
                (
                    [TID] =&gt; 534535         
                    [USER] = USER
                )

        )

    [TOTAL_COUNT] = 31
) 
```

我有一个像上面这样的数组输出，我想从数组中删除一个元素，然后我想再次从 0 重新索引它。我尝试在 php 中使用 array_value 但这样做之后它正在删除 [REF_DETAIL] 为 0 和 TOTAL_COUNT 为 1 ，请在php中提供解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T07:54:01.840

使用`array_splice`（[php docs](http://php.net/manual/en/function.array-splice.php)），它会自动重新索引。

`array_splice($array['REF_DETAILS'], 1, 1)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T07:42:52.990

尝试

```
unset($array['REF_DETAILS'][1]);
$array['REF_DETAILS'] = array_values($array['REF_DETAILS']); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T07:59:45.793

使用[array_shift](http://php.net/manual/en/function.array-shift.php)

```
$arr = Array (
    'REF_DETAILS' => Array(
        0 => Array(
            'ID' => '&gt; 1231312',
            'USER' => '&gt; USER',
        ),
        1 => Array(
            'TID' => '&gt; 2754042         ',
            'USER' => 'USER',
        ),
        2 => Array(
            'TID' => '&gt; 534535         ',
            'USER' => 'USER',
        ),
    ),
    'TOTAL_COUNT' => 31,
);

array_shift($arr['REF_DETAILS']);
print_r($arr); 
```

**输出：**

```
Array
(
    [REF_DETAILS] => Array
        (
            [0] => Array
                (
                    [TID] => &gt; 2754042
                    [USER] => USER
                )

            [1] => Array
                (
                    [TID] => &gt; 534535
                    [USER] => USER
                )

        )

    [TOTAL_COUNT] => 31
) 
```

# javascript - Javascript：对回调创建的对象执行方法

> ID：12225891
> 
> 赞同：0
> 
> 时间：2012-09-01T07:40:45.150
> 
> 标签：javascript, callback, coffeescript

我正在一些异步 JS 代码中创建一个对象。创建对象后，我想在其上调用一个方法。我有点难过如何引用新对象来调用它的方法。

这是我的咖啡脚本。该代码将标记添加到谷歌地图：

```
addLocation: (name, id, lat, lng, options, callback) ->
  # Add a new location to the map
  # 
  # @param string name - name to give the location
  # @param int id - ID of the location if stored in the database already
  # @param double lat - latitude
  # @param double lng - longitude
  # @param json options - options to use while adding the location
  console.log("Adding new location '#{name}' (#{lat}, #{lng}) to map") if debug

  @__setVisible true, =>
    location = new Location(this, id, name)
    location.setLatLng(lat, lng, options)
    @locations.add(location)

    callback() if callback

    return location 
```

这就是我调用这个方法的地方。我想在返回的“位置”对象上调用一个方法，但是如何在回调中绑定到尚未实例化的对象？

```
__addLocation: (resultLocation) ->
  # Add a new location to the map and centre the view in on it
  name = $(@nameElement).val() 
  lat = resultLocation.geometry.location.lat()
  lng = resultLocation.geometry.location.lng()

  @map.addLocation name, null, lat, lng, { draggable: true }, ->
    # location doesn't exist at this point so the following line fails
    location.setShowInfoWindowOnClick(true)
    @map.centerMap(location) 
```

如何执行 location.setShowInfoWindowOnClick(true)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:48:46.673

在`addLocation`您将要调用回调，例如；

```
callback location 
```

然后在你的代码中；

```
@map.addLocation name, null, lat, lng, { draggable: true }, (location) ->
    location.setShowInfoWindowOnClick true
    @map.centerMap location 
```

# android - android apk 到本机应用程序

> ID：12225893
> 
> 赞同：0
> 
> 时间：2012-09-01T07:41:09.003
> 
> 标签：android, apk

我有一些 APK（andorid）文件，我希望所有这些 apk 到本机应用程序（如联系人、浏览器、消息传递应用程序等），我必须在其中的文件或文件夹中更改 android 源代码才能使所有这些 apk 工作像本机应用程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:48:32.627

步骤是..

1.  复制`<AndroidApplication>`到`/<Android_Source>/packages/apps/`文件夹。

2.  `<AndroidApplication>`在目录中创建 Android.mk 文件。

3.  编辑`/<Android_Source>/build/target/product/generic.mk`以添加行 `\<AndroidApplication>`

    ```
    PRODUCT_PACKAGES := \
    AccountAndSyncSettings \
    AlarmClock \
    <AndroidApplication> \ 
    ```

4.  现在编译源代码

5.  编译完成后，您将看到`<AndroidApplication>`已安装。

**更新：**

对于预建`.apk`文件..

在**Android.mk**文件中：

```
LOCAL_MODULE := <YourAppName>
LOCAL_SRC_FILES := $(LOCAL_MODULE).apk
LOCAL_MODULE_CLASS := APPS
LOCAL_MODULE_SUFFIX := $(COMMON_ANDROID_PACKAGE_SUFFIX)

include $(BUILD_PREBUILT) 
```

# hadoop - apache hadoop 版本 2.0 与 0.23

> ID：12225899
> 
> 赞同：20
> 
> 时间：2012-09-01T07:41:47.917
> 
> 标签：hadoop

有太多的 Hadoop 版本和不同的发行版让我感到困惑。我有几个问题。

1.  Apache Hadoop 1.x 来自 0.20.205？
2.  Apache Hadoop 2.0 来自 0.22 还是 0.23？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-01T09:58:59.877

根据 Cloudera 的这篇[博](http://blog.cloudera.com/blog/2012/01/an-update-on-apache-hadoop-1-0/)文：

> 0.20.205 和 1.0 之间几乎没有功能差异。这只是重新编号。

Hadoop 的[Yarn](http://hadoop.apache.org/common/docs/r0.23.0/hadoop-yarn/hadoop-yarn-site/YARN.html)网站指出：

> MapReduce 在 hadoop-0.23 中经历了彻底的改造，我们现在有了我们所说的 MapReduce 2.0 (MRv2) 或 YARN

[这张](https://blogs.apache.org/bigtop/entry/all_you_wanted_to_know)图也值得一看。它显示了不同 Hadoop 版本的树以及在它们之上的第 3 方发行版。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T02:16:50.817

更新的答案 [http://elephantscale.com/hadoop2_handbook/Hadoop_Versions.html](http://elephantscale.com/hadoop2_handbook/Hadoop_Versions.html)

（免责声明：我是这本在线书籍的合著者）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-12T17:28:15.493

hadoop 1.0.0 版从 0.20.x 开始可用

根据经验，请记住

1.xx = 0.20.0 2.xx > 0.20.0

我们可以轻松记住并为 hadoop 集群设置选择正确的 apache 发行版。

# iphone - 如何让 iOS6 beta 的 iPhone 4s 成为外围设备？

> ID：12225900
> 
> 赞同：0
> 
> 时间：2012-09-01T07:42:07.363
> 
> 标签：iphone, ios6, core-bluetooth, peripherals

我希望我的 iPhone 4s 充当外围设备。为此，我使用了 iOS 6 beta 中包含的外围设备管理器，但现在我的设备无法被发现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:02:28.777

查看 CBPeripheralManager 和 CBCentral 的标头。目前在线没有可用的文档，但这些标题中有很多评论。使用模型与 CBCentralManager 和 CBPeripheral 非常相似。

# jasper-reports - 使用 iReport 报告设计问题

> ID：12225910
> 
> 赞同：2
> 
> 时间：2012-09-01T07:43:19.593
> 
> 标签：jasper-reports, ireport

我正在使用*iReport*设计发票，但我遇到了格式问题。

我必须在信头上打印发票，那里有固定的位置来打印字段，例如总金额必须打印在固定在某个位置的盒子内。

这是信头的格式：

![在此处输入图像描述](../Images/f4afe671467aaa5a2e7b056d51f968e9.png)

在底部有一个必须打印总金额的字段，但我无法这样做。

我使用*iReport*的输出：

iReport 的屏幕截图

![在此处输入图像描述](../Images/ae4af140fc990bdaeb26d5de3d3e9ff8.png)

![在此处输入图像描述](../Images/60413944f843812e6ab7559f13a24a31.png)

这是我的 jrxml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="LetterHeadInvoice" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <parameter name="COMPANY_ADDRESS" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="COMPANY_NAME" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="INVOICENO" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[SELECT DISTINCT c.docketno,c.bookingdate,c.rname,c.rcity,c.rcountry
       ,c.noofitems,c.actualweight,c.volweight,p.docketcharges,p.weight as weightused,
       p.total,i.type,c.sname,c.scity,c.scountry,c.bookingdate,s.fovtype ,s.fovamount,s.oditype ,s.odiamount,s.nformtype ,s.nformamount,o.fsetype,o.fseamount
 FROM  typedetails i,paymentdetails p,clientdetails c,subdetails s,otherdetails o
 WHERE i.id=c.typeid
 AND   c.docketno=p.docketno
And c.docketno= s.docketno
And c.docketno= o.docketno
  AND   c.docketno IN (SELECT docketnumber FROM invoice  WHERE InvoiceId=$P{INVOICENO})]]>
    </queryString>
    <field name="docketno" class="java.lang.String"/>
    <field name="bookingdate" class="java.sql.Timestamp"/>
    <field name="rname" class="java.lang.String"/>
    <field name="rcity" class="java.lang.String"/>
    <field name="rcountry" class="java.lang.String"/>
    <field name="noofitems" class="java.lang.Integer"/>
    <field name="actualweight" class="java.math.BigDecimal"/>
    <field name="volweight" class="java.lang.Short"/>
    <field name="docketcharges" class="java.lang.Integer"/>
    <field name="weightused" class="java.lang.Integer"/>
    <field name="total" class="java.lang.Integer"/>
    <field name="type" class="java.lang.String"/>
    <field name="sname" class="java.lang.String"/>
    <field name="scity" class="java.lang.String"/>
    <field name="scountry" class="java.lang.String"/>
    <field name="fovtype" class="java.lang.String"/>
    <field name="fovamount" class="java.lang.String"/>
    <field name="oditype" class="java.lang.String"/>
    <field name="odiamount" class="java.lang.String"/>
    <field name="nformtype" class="java.lang.String"/>
    <field name="nformamount" class="java.lang.String"/>
    <field name="fsetype" class="java.lang.String"/>
    <field name="fseamount" class="java.lang.Integer"/>
    <variable name="TOTAL" class="java.lang.Double" calculation="Sum">
        <variableExpression><![CDATA[$F{total}]]></variableExpression>
    </variable>
    <variable name="TOTAL2" class="java.lang.Double" incrementType="Column" calculation="Sum">
        <variableExpression><![CDATA[$V{TOTAL}+$F{fseamount}]]></variableExpression>
    </variable>
    <variable name="Tax" class="java.lang.Double">
        <variableExpression><![CDATA[$V{TOTAL2}/100.00*12.36]]></variableExpression>
    </variable>
    <background>
        <band height="802" splitType="Stretch">
            <image>
                <reportElement x="0" y="0" width="555" height="802"/>
                <imageExpression><![CDATA["C:\\Documents and Settings\\Hemant\\Desktop\\RNZImage.jpg"]]></imageExpression>
            </image>
        </band>
    </background>
    <title>
        <band height="205" splitType="Stretch">
            <staticText>
                <reportElement x="40" y="61" width="40" height="23"/>
                <textElement>
                    <font fontName="Lucida Bright" size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Bill To]]></text>
            </staticText>
            <textField>
                <reportElement x="40" y="84" width="266" height="107"/>
                <textElement>
                    <font size="11"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{sname}+"\n"+$F{scity}+","+$F{scountry}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="324" y="95" width="91" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$P{INVOICENO}]]></textFieldExpression>
            </textField>
            <textField pattern="dd/MM/yyyy">
                <reportElement x="429" y="96" width="104" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
            </textField>
            <textField pattern="MMMMM-yy">
                <reportElement x="312" y="145" width="83" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
            </textField>
        </band>
    </title>
    <detail>
        <band height="112" splitType="Stretch">
            <textField pattern="MM/dd/yyyy">
                <reportElement x="28" y="31" width="52" height="20"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{bookingdate}.toString().substring(0,$F{bookingdate}.toString().indexOf(" "))]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="82" y="31" width="54" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{docketno}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="164" y="31" width="77" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{rcity}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="261" y="31" width="35" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{rcity}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="306" y="31" width="33" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{noofitems}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="345" y="31" width="33" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{weightused}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="395" y="31" width="73" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{type}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="480" y="31" width="48" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{docketcharges}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="346" y="90" width="123" height="17" isRemoveLineWhenBlank="true">
                    <printWhenExpression><![CDATA[$F{odiamount} != null && $F{odiamount}.trim().length()>0]]></printWhenExpression>
                </reportElement>
                <textElement/>
                <textFieldExpression><![CDATA[$F{oditype}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="480" y="90" width="55" height="17" isRemoveLineWhenBlank="true">
                    <printWhenExpression><![CDATA[$F{odiamount} != null && $F{odiamount}.trim().length()>0]]></printWhenExpression>
                </reportElement>
                <textElement/>
                <textFieldExpression><![CDATA[$F{odiamount}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="346" y="56" width="123" height="17" isRemoveLineWhenBlank="true">
                    <printWhenExpression><![CDATA[$F{odiamount} != null && $F{odiamount}.trim().length()>0]]></printWhenExpression>
                </reportElement>
                <textElement/>
                <textFieldExpression><![CDATA[$F{fovtype}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="480" y="73" width="55" height="17" isRemoveLineWhenBlank="true">
                    <printWhenExpression><![CDATA[$F{odiamount} != null && $F{odiamount}.trim().length()>0]]></printWhenExpression>
                </reportElement>
                <textElement/>
                <textFieldExpression><![CDATA[$F{nformamount}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="346" y="73" width="123" height="17" isRemoveLineWhenBlank="true">
                    <printWhenExpression><![CDATA[$F{odiamount} != null && $F{odiamount}.trim().length()>0]]></printWhenExpression>
                </reportElement>
                <textElement/>
                <textFieldExpression><![CDATA[$F{nformtype}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="480" y="56" width="55" height="17" isRemoveLineWhenBlank="true">
                    <printWhenExpression><![CDATA[$F{odiamount} != null && $F{odiamount}.trim().length()>0]]></printWhenExpression>
                </reportElement>
                <textElement/>
                <textFieldExpression><![CDATA[$F{fovamount}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <summary>
        <band height="280" splitType="Stretch">
            <textField>
                <reportElement x="478" y="12" width="59" height="20"/>
                <textElement markup="none"/>
                <textFieldExpression><![CDATA[$V{TOTAL}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="334" y="32" width="128" height="17">
                    <printWhenExpression><![CDATA[$F{odiamount} != null && $F{odiamount}.trim().length()>0]]></printWhenExpression>
                </reportElement>
                <textElement/>
                <textFieldExpression><![CDATA[$F{fsetype}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement x="478" y="32" width="59" height="17">
                    <printWhenExpression><![CDATA[$F{odiamount} != null && $F{odiamount}.trim().length()>0]]></printWhenExpression>
                </reportElement>
                <textElement/>
                <textFieldExpression><![CDATA[$F{fseamount}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="334" y="49" width="128" height="20"/>
                <textElement/>
                <text><![CDATA[TOTAL]]></text>
            </staticText>
            <staticText>
                <reportElement x="334" y="12" width="128" height="20"/>
                <textElement/>
                <text><![CDATA[SUB TOTAL]]></text>
            </staticText>
            <textField pattern="###0.00">
                <reportElement x="478" y="69" width="59" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$V{TOTAL2}/100.00*12.36]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="478" y="49" width="59" height="20"/>
                <textElement markup="none"/>
                <textFieldExpression><![CDATA[$V{TOTAL}+$F{fseamount}]]></textFieldExpression>
            </textField>
            <staticText>
                <reportElement x="334" y="69" width="128" height="20"/>
                <textElement/>
                <text><![CDATA[Service Tax At 12.36%]]></text>
            </staticText>
            <textField pattern="###0.00">
                <reportElement x="464" y="252" width="73" height="20"/>
                <textElement>
                    <font size="11" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{TOTAL2}+$V{Tax}]]></textFieldExpression>
            </textField>
        </band>
    </summary>
</jasperReport> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T16:21:20.397

您应该尝试将此*文本*字段（带有表达式）的***位置类型***更改为**固定相对于底部**或**浮动。****`$V{TOTAL2}+$V{Tax}`**

 *```
<textField pattern="###0.00">
    <reportElement positionType="FixRelativeToBottom" x="464" y="252" width="73" height="20"/>
    <textElement>
        <font size="11" isBold="true"/>
    </textElement>
    <textFieldExpression><![CDATA[$V{TOTAL2}+$V{Tax}]]></textFieldExpression>
</textField> 
```*

# mysql - 如何使用复合外键创建表

> ID：12225919
> 
> 赞同：0
> 
> 时间：2012-09-01T07:45:15.897
> 
> 标签：mysql, foreign-keys, foreign-key-relationship

我使用复合主键创建了主表。

父表结构如下：

```
CREATE TABLE `taskcategory` (
  `SiteID` int(10) unsigned NOT NULL DEFAULT 1,
  `TaskID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `TaskName` varchar(45) DEFAULT '',
  `TaskDescription` varchar(45) DEFAULT '',
  `IsInbuild` int(11) DEFAULT '1',
  PRIMARY KEY (`TaskID`,`SiteID`)
); 
```

当我尝试使用上面的父表引用创建带有外键的表时，我收到“无法创建表错误，没有 150”错误。帮助我做到这一点。

子表结构如下：

```
CREATE TABLE taskdetails (`SiteID` int(10) unsigned NOT NULL DEFAULT '1',
  `TaskID` int(10) unsigned NOT NULL DEFAULT '0',
  `SubtaskID` int(10) unsigned NOT NULL,
  `ScriptName` varchar(255) DEFAULT '',
  `FunctionName` varchar(255) DEFAULT '',
  `ButtonName` varchar(255) DEFAULT '',
  `IsInbuild` int(10) unsigned DEFAULT '1',
  `Description` varchar(255) DEFAULT '',
  PRIMARY KEY (`SubtaskID`,`TaskID`,`SiteID`),
                            INDEX (siteid, taskid),
                            FOREIGN KEY (siteid, taskid)
                              REFERENCES taskcategory(siteid, taskid)
                              ON UPDATE CASCADE ON DELETE CASCADE
                            ) ENGINE=INNODB; 
```

帮我解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:52:06.540

从[手册](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)：

> InnoDB 需要外键和引用键上的索引，以便外键检查可以快速且不需要表扫描。在引用表中，必须有一个索引，其中外键列按相同顺序列为第一列。如果引用表不存在，则会在引用表上自动创建此类索引。如果您创建另一个可用于强制外键约束的索引，则此索引可能会在稍后被静默删除。index_name，如果给定，如前所述使用。

因此，当您在父表中添加索引时，它可以工作（是的，我测试过）：

```
CREATE TABLE `taskcategory` (
  `SiteID` int(10) unsigned NOT NULL DEFAULT 1,
  `TaskID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `TaskName` varchar(45) DEFAULT '',
  `TaskDescription` varchar(45) DEFAULT '',
  `IsInbuild` int(11) DEFAULT '1',
  PRIMARY KEY (`TaskID`,`SiteID`)
  , INDEX (SiteID, TaskID)
) ENGINE=INNODB;

CREATE TABLE taskdetails (`SiteID` int(10) unsigned NOT NULL DEFAULT '1',
  `TaskID` int(10) unsigned NOT NULL DEFAULT '0',
  `SubtaskID` int(10) unsigned NOT NULL,
  `ScriptName` varchar(255) DEFAULT '',
  `FunctionName` varchar(255) DEFAULT '',
  `ButtonName` varchar(255) DEFAULT '',
  `IsInbuild` int(10) unsigned DEFAULT '1',
  `Description` varchar(255) DEFAULT '',
  PRIMARY KEY (`SubtaskID`,`TaskID`,`SiteID`)
                            ,INDEX (SiteID, TaskID)
                            ,FOREIGN KEY (SiteID, TaskID)
                              REFERENCES taskcategory(SiteID, TaskID)
                              ON UPDATE CASCADE ON DELETE CASCADE
                            ) ENGINE=INNODB; 
```

您已经在这些列上有一个主键（这意味着有一个隐式索引），但是**列的顺序很重要**！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:56:20.163

您的 taskcategory 表定义缺少 ENGINE=InnoDB 子句，这可能不是您系统的默认设置。只能在 InnoDB 表之间建立外键关系。

# html - 如何在网站主页上显示一个窗口（div），该网站将无法点击

> ID：12225929
> 
> 赞同：1
> 
> 时间：2012-09-01T07:46:25.990
> 
> 标签：html, css

我想显示一个带有一些按钮的 div，第一次加载我的网站时，我希望该网站变得不可用，直到该 div 用它的一个按钮关闭（比如当你在 image.google.com 中选择一个图像，然后你查看所选图片及其从其后面提取的站点，但该站点有点暗，就像该站点的照片）

*我希望我能问我的意思，如果句子结构有误，我真的很抱歉，因为英语是我的第二语言*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:02:32.633

```
<div id="overlay">
  <div id="dialog">
    Close me to see anything else
  </div>
</div> 
```

* * *

```
#overlay{
position:fixed;
z-index:9999;
top:0;
left:0;
width:100%;
height:100%;
background-color:rgba(0,0,0,.3);
}
#dialog{
width:200px;
height:100px;
margin-left:-100px;
margin-top:-50px;
left:50%;
top:50%;
position:absolute;
background-color:#ffffff;
border:1px solid #666;
padding:20px;
} 
```

* * *

[http://jsfiddle.net/MqVMr/](http://jsfiddle.net/MqVMr/)

这是一个更新的小提琴：http: [//jsfiddle.net/MqVMr/1/](http://jsfiddle.net/MqVMr/1/)

全屏[http://jsfiddle.net/MqVMr/1/show/](http://jsfiddle.net/MqVMr/1/show/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:03:09.263

您需要创建一个浮动 div，该 div 绝对定位于高 z-index。在这个浮动 div 元素的正下方，应该有一个元素与 body 元素 clientWidth 的宽度和 body 元素 clientHeight 的高度相匹配，您可以将其称为屏幕。给屏幕一个不透明度为 25% 的黑色背景。屏幕将拦截所有点击，因为它位于页面的其余部分之上，除了位于其上方的模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T08:17:02.243

试试这个代码...

```
<html>
<head>
    <script type="text/Javascript">
        function loading()
        {
            var sss = document.getElementById('back');
            sss.style.opacity="0.20";
            return true;
        }
    </script>
    <style type="text/css">
    #set {
        width:350px;
        height:350px;
        margin: 0 auto;
        background:#ccc;
        color:#000;
    }
    </style>
</head>
<body>
<div id="back">
    <div id="set">
            <h1>This div you have to view.</h1>
        <input type="button" onclick="loading();" value="Button"/>
    </div>
</div>
</body> 
```

你也可以用jquery来做这个......一切顺利......

# asp.net - 正则表达式验证器接受十进制数 0 或 5

> ID：12225931
> 
> 赞同：0
> 
> 时间：2012-09-01T07:46:41.823
> 
> 标签：asp.net, regex

我正在尝试编写一个正则表达式验证器。它应该只接受小数部分为 0 或 5 的数字。像，

**有效数字**
0.5
1 (1.0)
1.5
2 (2.0)
2.5
。. . 等等

**无效数字**
0.1
1.2
1.3
2.4
2.6

请帮助我...谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T07:48:43.790

```
^\d+(?:\.[05]0?)?$ 
```

有效，但也允许前导零，如`00001.0`. 那样可以么？

如果没有，请使用

```
^(?:0|[1-9]\d*)(?:\.[05]0?)?$ 
```

这允许`0`, `123`, `0.00`,`1.5`等`2.50`但拒绝`00`, `1.2`, `1.500`,`-1`或`.5`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T07:48:33.150

试试这个：

```
^[0-9]+(\.[05])?$ 
```

这 （...）？表示小数部分是可选的。

# android - Android 如何获取发送/接收的电子邮件信息

> ID：12225934
> 
> 赞同：6
> 
> 时间：2012-09-01T07:48:01.057
> 
> 标签：android, android-layout

你好，我只是好奇。从消息收件箱/发件箱。我们可以检索：电话号码、消息正文、日期、锁定状态、StatusOnSim 等。所以我们可以从电子邮件（已发送+收件箱）中检索：Email_id、主题、正文、CC、BCC 等。我想从我的电子邮件，如 Email_id、主题、正文、抄送、密件抄送等

如果有人对此有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:08:58.923

发送电子邮件信息的代码：

```
 Intent intent = new Intent(Intent.ACTION_SEND);
    intent.setType("text/plain");
    intent.putExtra(Intent.EXTRA_EMAIL, new String[] {
     "ur mail id" });
    intent.putExtra(Intent.EXTRA_SUBJECT, "ur subject");
    intent.putExtra(Intent.EXTRA_TEXT, "ur text");
    intent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(FileName));
    startActivity(Intent.createChooser(intent, "Choose")); 
```

它无法从您的邮箱中检索电子邮件 ID、主题、正文、抄送、密件抄送等数据。但它可能在消息收件箱中。

# php - PHP错误帮助：mysql_fetch_assoc()

> ID：12225940
> 
> 赞同：0
> 
> 时间：2012-09-01T07:48:23.443
> 
> 标签：php

警告：mysql_fetch_assoc() 期望参数 1 是资源，给定的布尔值

我的代码 php 是：

```
function getResourceLevel($vid) {
        $q = "SELECT * from " . TB_PREFIX . "fdata where vref = $vid";
        $result = mysql_query($q, $this->connection);
        return mysql_fetch_assoc($result);
    } 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:01:08.047

看起来[mysql_query()](http://www.php.net/manual/en/function.mysql-query.php)已返回*false*。

这可能是由于您的 mysql 语法错误或由于缺少访问您请求的数据库表的权限。

在任何一种情况下，您都可以尝试调用[mysql_error()](http://www.php.net/manual/en/function.mysql-error.php)，它将返回一个字符串，该字符串可以最好地猜测您上一个 mysql 函数出了什么问题。

**编辑**：正如一些评论中提到的，不鼓励使用 mysql_* 函数，所以如果你有机会，你应该更新你的代码以使用 mysqli 或 PDO MySQL 扩展。[更好的是，使用Zend DB](http://framework.zend.com/manual/en/zend.db.adapter.html)之类的东西让您远离数据库 API 一层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T08:46:12.680

尝试回显您的查询并在某些 mysql 查询浏览器中运行并检查其是否提供所需的结果。

```
function getResourceLevel($vid) {
    $q = "SELECT * from " . TB_PREFIX . "fdata where vref = $vid";
    echo $q;
    $result = mysql_query($q, $this->connection);
    return ($result) ? mysql_fetch_assoc($result) : false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T12:58:44.223

尝试这个

```
function getResourceLevel($vid) {
        $q = "SELECT * from " . TB_PREFIX . "fdata where vref = $vid";
        $result = mysql_query($q, $this->connection) || die(mysql_error());
        return mysql_fetch_assoc($result);
    } 
```

注意`|| die(mysql_error())`声明。

这将停止代码并将返回的 sql 错误显示为 false。

希望这可以帮助。

# javascript - 获取在表单/文本字段中显示的结果

> ID：12225950
> 
> 赞同：0
> 
> 时间：2012-09-01T07:49:31.963
> 
> 标签：javascript, html

我有一个 ajax 脚本，它从 web 服务中获取结果并将它们显示在 div 中，但是我希望它们显示在输入区域/文本字段中。

我的主要脚本：

```
<script type="text/javascript">
   function get_CODES_Results() {
      document.getElementById("results").innerHTML = "<img src=\'loading.gif\' />";
      var url = document.location;
      if (window.XMLHttpRequest) req = new XMLHttpRequest();
      else if (window.ActiveXObject) req = new ActiveXObject("Microsoft.XMLHTTP");
      req.onreadystatechange = processRequest;
      //req.open("GET", url, true);
      //req.send(null);
      req.open("POST",url,true);
      req.setRequestHeader("Content-type","application/x-www-form-urlencoded");
      req.send("codes="+document.getElementById("codes").value);
      function processRequest() {
         if (req.readyState == 4) {
            document.getElementById("results").innerHTML = req.responseText;
         }
      }
   }
</script> 
```

这里是显示它的区域：

```
<p>
   <h3>Results:</h3>
   <div id="results"></div>
</p> 
```

我的问题：

> 如何实现我的结果显示在输入/文本字段中？

一些建议将不胜感激 - 谢谢你，帕特里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T07:56:17.417

试试这个：

```
document.getElementById("results").value = req.responseText; 
```

然后你的结果应该是一个输入：

```
<input type="text" id="results" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T07:56:26.210

这？

```
document.getElementById("results").value = req.responseText;

<input id="results" type="text" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T07:56:44.590

假设这是您的文本字段：

```
<input type="text" id="whatever" value="" /> 
```

只需将响应设置为其值：

```
document.getElementById('whatever').value = req.responseText; 
```

# javascript - 如何在 Windows 8 Metro 应用程序中将 html5 画布保存为图像文件？

> ID：12225951
> 
> 赞同：1
> 
> 时间：2012-09-01T07:49:33.913
> 
> 标签：javascript, canvas, windows-8, microsoft-metro

```
var myImage = canvas.toDataURL("image/png"); 
```

我认为`myImage`现在以 png 格式编码的图像字节如何保存`myImage`为文件（在图像文件夹中）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T18:15:35.583

而不是使用`.toDataUrl`，您需要使用`.msToBlob`：

```
var blob = canvas.msToBlob(); 
```

然后，您需要将其写入磁盘：

```
var output;
var input;
var outputStream;

Windows.Storage.ApplicationData.current.localFolder.createFileAsync("yourFile", 
          Windows.Storage.CreationCollisionOption.replaceExisting).
    then(function(file) {
        return file.openAsync(Windows.Storage.FileAccessMode.readWrite);
    }).then(function(stream) {
        outputStream = stream;
        output = stream.getOutputStreamAt(0);
        input = blob.msDetachStream();
        return Windows.Storage.Streams.RandomAccessStream.copyAsync(input, output);
    }).then(function() {
        return output.flushAsync();
    }).done(function() {
        input.close();
        output.close();
        outputStream.close();
    }); 
```

在您的应用程序数据文件夹中，您现在将图像写入磁盘。

如果你想把它放在其他地方——例如我的图片等——那么你只需要使用其他存储文件夹之一。[请参阅此处](http://code.msdn.microsoft.com/windowsapps/File-access-sample-d723e597)的示例。请注意，要访问图片库，您需要将该功能添加到清单中（只是 VS 中 package.appxmanifest 编辑器中的一个复选框）

还有许多其他成像选项可用于更复杂的输出文件操作。有关代码，请参阅[图像示例](http://code.msdn.microsoft.com/windowsapps/Simple-Imaging-Sample-a2dec2b0)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T00:32:14.923

我发现这是简单成像示例中最有用的代码。它允许您编码为 PNG 或 JPG，而不仅仅是转储画布数据。

```
Helpers.getFileFromSavePickerAsync().then(function (file) {
    filename = file.name;

    switch (file.fileType) {
        case ".jpg":
            encoderId = Imaging.BitmapEncoder.jpegEncoderId;
            break;
        case ".bmp":
            encoderId = Imaging.BitmapEncoder.bmpEncoderId;
            break;
        case ".png":
        default:
            encoderId = Imaging.BitmapEncoder.pngEncoderId;
            break;
    }

    return file.openAsync(Windows.Storage.FileAccessMode.readWrite);
}).then(function (_stream) {
    stream = _stream;

    // BitmapEncoder expects an empty output stream; the user may have selected a
    // pre-existing file.
    stream.size = 0;
    return Imaging.BitmapEncoder.createAsync(encoderId, stream);
}).then(function (encoder) {
    var width = id("outputCanvas").width;
    var height = id("outputCanvas").height;
    var outputPixelData = Context.getImageData(0, 0, width, height);

    encoder.setPixelData(
        Imaging.BitmapPixelFormat.rgba8,
        Imaging.BitmapAlphaMode.straight,
        width,
        height,
        96, // Horizontal DPI
        96, // Vertical DPI
        outputPixelData.data
        );

    return encoder.flushAsync();
}).then(function () {
    WinJS.log && WinJS.log("Saved new file: " + filename, "sample", "status");
    id("buttonSave").disabled = false;
    id("buttonRender").disabled = false;
}).then(null, function (error) {
    WinJS.log && WinJS.log("Failed to save file: " + error.message, "sample", "error");
}).done(function () {
    stream && stream.close();
}); 
```

# eclipse - OSGI 找不到 restlet 类

> ID：12225952
> 
> 赞同：0
> 
> 时间：2012-09-01T07:50:21.000
> 
> 标签：eclipse, jetty, osgi, restlet

**嗨，我刚刚遇到一个问题：OSGI 无法启动，因为它找不到类：org/restlet/engine/adapter/HttpServerHelper 但我已将它添加到任何地方（src、import-packes、plugins） ，但仍然得到这个错误，任何人都可以帮助我？！谢谢**

> !MESSAGE FrameworkEvent ERROR !STACK 0 org.osgi.framework.BundleException: 用于包 XXXX 的激活器 XXX.Activator 在 org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:171) 处无效.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679) 在 org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381) 在 org.eclipse.osgi .framework.internal.core.AbstractBundle.resume(AbstractBundle.java:389) 在 org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1131) 在 org.eclipse.osgi.framework.internal .core.StartLevelManager.resumeBundles(StartLevelManager.java:559) 在 org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:第544章.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438) 在 org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1) 在 org.eclipse.osgi .framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230) at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340) 原因：java.lang.NoClassDefFoundError: org/restlet /engine/adapter/HttpServerHelper at java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClass(Unknown Source) at org.eclipse。osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:188) 在 org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:601) 在 org.eclipse.osgi.baseadaptor.loader.ClasspathManager。 findClassImpl(ClasspathManager.java:567) at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:490) at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass_LockClassName(ClasspathManager.java:469)在 org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:456) 在 org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216) 在 org.eclipse.osgi.internal .loader.BundleLoader.findLocalClass(BundleLoader.java:400) 在 org.eclipse.osgi.internal。loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35) 在 org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:473) 在 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader. java:429) 在 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417) 在 org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107) 在 java.lang .ClassLoader.loadClass(Unknown Source) at java.lang.Class.getDeclaredConstructors0(Native Method) at java.lang.Class.privateGetDeclaredConstructors(Unknown Source) at java.lang.Class.getConstructor0(Unknown Source) at java.lang.Class org.eclipse.osgi.framework.internal.core.AbstractBundle 中的 java.lang.Class.newInstance(Unknown Source) 中的 .newInstance0(Unknown Source)。loadBundleActivator(AbstractBundle.java:166) ... 12 更多原因：java.lang.ClassNotFoundException: org.restlet.engine.adapter.HttpServerHelper at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java: 513) 在 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417) 在 org.eclipse.osgi 的 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429) .internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107) at java.lang.ClassLoader.loadClass(Unknown Source) ... 34 更多internal.loader.BundleLoader.findClass(BundleLoader.java:429) 在 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417) 在 org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass( DefaultClassLoader.java:107) 在 java.lang.ClassLoader.loadClass(Unknown Source) ... 34 更多internal.loader.BundleLoader.findClass(BundleLoader.java:429) 在 org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417) 在 org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass( DefaultClassLoader.java:107) 在 java.lang.ClassLoader.loadClass(Unknown Source) ... 34 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T12:47:20.070

可能您的捆绑包没有导入包`org.restlet.engine.adapter`。

# html - 在 html5 中使用新输入类型保持回退而不支持的正确方法是什么？

> ID：12225955
> 
> 赞同：1
> 
> 时间：2012-09-01T07:50:40.810
> 
> 标签：html, html-input

标题很容易解释，基本上我想在这种情况下使用新的输入类型“搜索”，而如果浏览器不支持搜索，则回退到 type="text"。

我猜它可能是这样的：

```
<input type="text" type="search" name="s" placeholder="Search posts"> 
```

但我不确定。

这通常是怎么做的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T07:53:45.770

这是默认行为，也是 HTML5 的设计方式。不支持的类型将退回到`type=text`.

资料来源： [深入了解 HTML5](http://diveintohtml5.info/forms.html)

> 与所有其他新输入类型一样，无法识别 type="search" 的浏览器会将其视为 type="text"，因此绝对没有理由不开始对所有搜索框使用 type="search"今天。

**编辑**

正如评论中指出的那样，您不需要这两个`type`属性，只需`type=search`：

```
<input type="search" name="s" placeholder="Search posts"> 
```

# windows - Github：我为什么需要它？

> ID：12225959
> 
> 赞同：2
> 
> 时间：2012-09-01T07:51:27.257
> 
> 标签：windows, git, github

我仍然很不确定如何使用它，但我刚刚下载了 Git，我正在根据他们的[网页](https://help.github.com/articles/set-up-git)进行设置。关于密码缓存的部分说，如果我不必每次都输入密码，我可以使用 Github for Windows。我很困惑，所以我在这里发现了一个问题，问“github到底是什么？” 答案说它是一个网站或它的网络托管。所以我点击了操作页面上的 Github for Windows 链接，接下来我知道我正在下载一个 .exe 文件。

*   如果 Github 是一个网站，为什么我需要一个 .exe 文件？
*   不输入密码的唯一好处是什么？
*   Github 与 Git Bash 有什么关系？
*   Git 和 Git Bash 是一回事吗？

PS我有两台电脑，一台是XP，另一台是Win7。我所说的下载是在 XP 上的，但如果我确定我需要它，我也会把它放在 7 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T19:36:19.237

*   Github 与 Git Bash 有什么关系？
*   Git 和 Git Bash 是一回事吗？

先问后一个问题：不完全是。Git 是一组程序，允许您跟踪源文件（实际上是任何类型的非二进制文件和一些二进制文件）中的更改。Git Bash 是在 Windows 上实际运行 Git 的方法之一。由于 Git 是为 Linux 编写的，因此它严重依赖于 Windows 中不存在的类 Unix 功能。这个问题由 msysGit 解决，这是一个包含 Git 和 Unix 兼容层的包。

Git Bash 是 Bash shell 的版本，作为 msysGit 的一部分提供。如果您熟悉 Windows 命令提示符，那么 Bash 基本上类似于 Unix/Linux 等价物。它会打开一个命令行窗口，您可以在其中键入 Git 命令或其他命令。

前一个问题：GitHub for Windows 是另一个基于 GUI 的 Git 客户端。我自己没有检查，但从我在网上找到的内容来看，Windows 的 GitHub 似乎也包含 msysGit，因此也包含 Git Bash。但是你不应该在 GitHub for Windows 中大量使用 Git Bash（如果有的话）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T07:54:46.177

该 exe 只是一个 Windows 界面，用于将代码同步到 github 网站（您可以在其中跟踪更改，然后将其下载到您的另一台计算机）

通常你使用命令行界面来控制 git（bash 是一个 linux 命令行 - 'git bash' 将用于 linux 命令行）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T07:55:22.573

在命令行上坚持使用 msysgit。GUI 客户端还有很多不足之处。你没有得到命令历史，你没有得到标签完成，你没有得到脚本，你没有得到管道。

如果您在 Linux 上使用 msysgit 或 git，您还可以在线找到更多资料来帮助您。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-01T07:56:52.617

git 是一个版本控制系统。

Github 是一个 Web 服务，提供可通过 git 版本控制系统访问的 Web 空间。

git 可以在没有 Github 的情况下使用。

有几个客户端在各种平台上“实现”git（例如 TortoiseGit 或“原始”git）。

Github for Windows 是一个促进使用 Github 工作的应用程序，但对于使用 Github 或 git 不是必需的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-01T07:56:51.463

你应该访问 github 主页，上面写着：

“Git 是一个非常快速、高效、分布式的版本控制系统，非常适合软件的协作开发。”

基本上 Github 是您的软件源代码的托管存储库。它为您的源代码文件维护版本控制，并且您对此有各种计划。例如，如果您计划托管一个开源项目，您可以使用免费帐户托管无限量的项目，而如果您想要私有存储库，则必须开始寻找一些付费计划。

它是基于 Git 版本控制系统的社交开发环境。它类似于SVN，Microsoft VSS，但它是托管的，如果您使用Microsoft VSS，通常我们通过在网络本身设置一些VSS服务器将其托管在Intranet上。

Windows 二进制文件 (.exe) 是用于管理 GitHub 上的存储库/项目目录并将其同步到本地/存储库的工具。所以更像 VSS 客户端，但同时又大不相同。

# sqlite - 使用 MonoCross，SQLite 数据库的创建应该放在哪里？

> ID：12225961
> 
> 赞同：0
> 
> 时间：2012-09-01T07:51:57.537
> 
> 标签：sqlite, xamarin.ios, xamarin.android, monocross

由于平台之间文件结构等方面的差异，我想知道数据库创建（带有连接字符串）是否需要特定于平台？或者，如果有一种方法可以从 OnAppLoad() 平台不可知论创建数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:17:44.217

[SQLite 文件格式](http://www.sqlite.org/onefile.html)是完全可移植的。

> SQLite 中的数据库是单个磁盘文件。此外，文件格式是跨平台的。在一台机器上创建的数据库可以复制并在具有不同架构的不同机器上使用。SQLite 数据库可跨 32 位和 64 位机器以及在大端和小端架构之间移植。

你根本不需要担心它。与平台无关的事情很少，并且由于缺乏向后兼容性而可能包括 WAL 日志模式。

您还可以阅读：

[http://www.sqlite.org/atomiccommit.html#sect_9_0](http://www.sqlite.org/atomiccommit.html#sect_9_0)

和：

[http://www.sqlite.org/lockingv3.html#how_to_corrupt](http://www.sqlite.org/lockingv3.html#how_to_corrupt)

# pdf-generation - 有没有办法在 iOS 上显示 postscript (.ps) 文件？

> ID：12225962
> 
> 赞同：2
> 
> 时间：2012-09-01T07:51:58.167
> 
> 标签：pdf-generation, postscript

我需要在 iOS 应用程序中显示 .ps 文件。**对 .ps 到 .pdf 转换的本机支持似乎已关闭**- CGPSConverter，

  [https://developer.apple.com/documentation/coregraphics/cgpsconverter?language=occ](https://developer.apple.com/documentation/coregraphics/cgpsconverter?language=occ)

在 iOS 上不可用：

  [https://developer.apple.com/library/archive/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_ps_convert/dq_ps_convert.html](https://developer.apple.com/library/archive/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_ps_convert/dq_ps_convert.html)

有谁知道另一种方式？有没有可以在这里帮助我的第 3 方库？

*请注意，由于 GPL 许可条款，基于 Ghostscript/Pdftk 的解决方案将无法工作。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:39:56.880

请注意，Ghostscript 可在商业许可和 GPL 下使用。为了呈现 PostScript 文件，您将需要 PostScript 解释器，而且这类解释器并不多。我所知道的都是 GPL 或商业的。

# php - 创建一个 zip 文件并下载它

> ID：12225964
> 
> 赞同：40
> 
> 时间：2012-09-01T07:53:21.740
> 
> 标签：php, download, zip

我正在尝试通过在本地服务器上创建 zip 文件来下载 2 个文件。文件以 zip 格式下载，但是当我尝试提取它时。它给出错误： **找不到中央目录结尾签名。此文件不是 zip 文件，或者它构成多部分存档的一个磁盘。在后一种情况下，中央目录和 zip 文件注释将在此存档的最后一个磁盘上找到。**

我为此使用的以下代码：

```
 <?php
$file_names = array('iMUST Operating Manual V1.3a.pdf','iMUST Product Information Sheet.pdf');

//Archive name
$archive_file_name=$name.'iMUST_Products.zip';

//Download Files path
$file_path=$_SERVER['DOCUMENT_ROOT'].'/Harshal/files/';

zipFilesAndDownload($file_names,$archive_file_name,$file_path);

function zipFilesAndDownload($file_names,$archive_file_name,$file_path)
{
        //echo $file_path;die;
    $zip = new ZipArchive();
    //create the file and throw the error if unsuccessful
    if ($zip->open($archive_file_name, ZIPARCHIVE::CREATE )!==TRUE) {
        exit("cannot open <$archive_file_name>\n");
    }
    //add each files of $file_name array to archive
    foreach($file_names as $files)
    {
        $zip->addFile($file_path.$files,$files);
        //echo $file_path.$files,$files."

    }
    $zip->close();
    //then send the headers to force download the zip file
    header("Content-type: application/zip"); 
    header("Content-Disposition: attachment; filename=$archive_file_name"); 
    header("Pragma: no-cache"); 
    header("Expires: 0"); 
    readfile("$archive_file_name");
    exit;
}

?> 
```

我检查了传递给函数的所有变量的值，一切都很好。所以请看一下。提前致谢。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-01T08:06:44.503

添加`Content-length`描述 zip 文件大小的标题（以字节为单位）。

```
header("Content-type: application/zip"); 
header("Content-Disposition: attachment; filename=$archive_file_name");
header("Content-length: " . filesize($archive_file_name));
header("Pragma: no-cache"); 
header("Expires: 0"); 
readfile("$archive_file_name"); 
```

还要确保之前`<?`和之后绝对没有空格`?>`。我在这里看到一个空格：

↓</p>

```
 <?php
$file_names = array('iMUST Operating Manual V1.3a.pdf','iMUST Product Information Sheet.pdf'); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-01-12T06:47:10.773

```
$zip = new ZipArchive;
$tmp_file = 'assets/myzip.zip';
    if ($zip->open($tmp_file,  ZipArchive::CREATE)) {
        $zip->addFile('folder/bootstrap.js', 'bootstrap.js');
        $zip->addFile('folder/bootstrap.min.js', 'bootstrap.min.js');
        $zip->close();
        echo 'Archive created!';
        header('Content-disposition: attachment; filename=files.zip');
        header('Content-type: application/zip');
        readfile($tmp_file);
   } else {
       echo 'Failed!';
   } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-13T22:40:24.973

```
// http headers for zip downloads
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=\"".$filename."\"");
header("Content-Transfer-Encoding: binary");
header("Content-Length: ".filesize($filepath.$filename));
ob_end_flush();
@readfile($filepath.$filename); 
```

我在[这里](https://perishablepress.com/http-headers-file-downloads/)找到了这个解决方案，它对我有用

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-24T01:06:22.670

错误之一可能是文件未读取为“存档”格式。查看[ZipArchive 未打开文件 - 错误代码：19](https://stackoverflow.com/questions/27503569/ziparchive-not-opening-file-error-code-19)。在文本编辑器中打开下载的文件，如果您在开始时有任何html标签或调试语句，请在读取文件之前清除缓冲区。

```
ob_clean();
flush();
readfile("$archive_file_name"); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-09T02:02:19.670

我刚刚遇到了这个问题。对我来说，问题在于：

```
readfile("$archive_file_name"); 
```

这导致内存不足错误。

```
Allowed memory size of 134217728 bytes exhausted (tried to allocate 292982784 bytes) 
```

我能够通过将 readfile() 替换为以下内容来解决问题：

```
 $handle = fopen($zipPath, "rb");
    while (!feof($handle)){
        echo fread($handle, 8192);
    }
    fclose($handle); 
```

不确定这是否是您的相同问题或没有看到您的文件只有 1.2 MB。也许这会帮助其他有类似问题的人。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-16T03:04:41.183

我遇到了完全相同的问题。就我而言，它的来源是我想在其中创建所有设置为只读的 zip 文件的文件夹的权限。我将其更改为读写，并且有效。

如果您在运行脚本时未在本地服务器上创建文件，那么您很可能遇到与我相同的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-01T10:48:03.247

> 但是我下载后从服务器获取的文件大小为 226 字节

这是 ZIP 标头的大小。显然，下载的 ZIP 文件*中没有数据*。那么，您能否验证要添加到 ZIP 文件中的文件确实存在（相对于下载 PHP 脚本的路径）？

考虑添加一个检查`addFile`：

```
foreach($file_names as $file)
{
    $inputFile = $file_path . $file;
    if (!file_exists($inputFile))
        trigger_error("The input file $inputFile does not exist", E_USER_ERROR);
    if (!is_readable($inputFile))
        trigger_error("The input file $inputFile exists, but has wrong permissions or ownership", E_USER_ERROR);
    if (!$zip->addFile($inputFile, $file))
        trigger_error("Could not add $inputFile to ZIP file", E_USER_ERROR);
} 
```

观察到的行为与阻止将文件添加到 ZIP 文件的某些问题（路径错误、权限问题等）一致。在接收到“空”ZIP 文件时，客户端会发出一个错误，指出 ZIP 中央目录丢失（实际错误是没有目录，也没有文件）。

# ios - 绘画应用程序的画笔工具纹理

> ID：12225970
> 
> 赞同：4
> 
> 时间：2012-09-01T07:54:07.907
> 
> 标签：ios, cocos2d-iphone, textures, paint

我正在开发一个绘画应用程序，它有一个类似于画笔的刷子工具。到目前为止我都是通过cocos2d实现的，像图片这样的格式

![图片](../Images/9441716ecc42d30090458066e2260a15.png)

. 但我的客户想要清晰的边缘纹理作为图像

![图片](../Images/fd6f040a31238ea4a0f1b0d98565e756.png)

前图像的颜色也确实有些模糊。如何减少精灵图像的模糊？我用作纹理[的图像是 image](https://i.imgur.com/fTCws.png)。[我使用从Cocos2d RenderTextureTest](http://code.google.com/p/cocos2d-iphone/source/browse/trunk/tests/RenderTextureTest.m?r=1325#46)派生的代码。

此外，我在下面的代码中使用了混合功能

```
 [brush setBlendFunc:(ccBlendFunc){GL_ONE, GL_ONE}];
  [brush.texture setAliasTexParameters]; 
```

其中，brush 是具有上述纹理的我的精灵。

有没有其他方法可以像后面的图像那样获得锐利的边缘？或者我怎样才能让图像停止模糊？在过去的几个月里，我一直在努力。请一些专家研究一下并帮助我。

# c# - 将所有 DLL 嵌入 win 应用程序和 C#

> ID：12225976
> 
> 赞同：2
> 
> 时间：2012-09-01T07:55:22.867
> 
> 标签：c#, dll, embed, exe

我使用此代码将所有 dll 嵌入到应用程序 exe 文件中，但此代码只能嵌入一个 dll。我搜索其他代码，但都是一样的。

```
public App()
{
    AppDomain.CurrentDomain.AssemblyResolve +=new ResolveEventHandler(CurrentDomain_AssemblyResolve);
}

System.Reflection.Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
{
    string dllName = args.Name.Contains(',') ? args.Name.Substring(0, args.Name.IndexOf(',')) : args.Name.Replace(".dll","");

    dllName = dllName.Replace(".", "_");

    if (dllName.EndsWith("_resources")) return null;

    System.Resources.ResourceManager rm = new System.Resources.ResourceManager(GetType().Namespace + ".Properties.Resources", System.Reflection.Assembly.GetExecutingAssembly());

    byte[] bytes = (byte[])rm.GetObject(dllName);

    return System.Reflection.Assembly.Load(bytes);
} 
```

要使用 ILmerge，我的 dll 有问题。所以我不能用这个。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:44:00.077

使用 GetManifestResourceStream 应该会更好。

当 dll 作为资源嵌入时，资源名称的前缀是您项目的默认名称空间，因此您需要填写它。

例如

```
static  System.Reflection.Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
{
    string defaultNameSpace = "...";

    string dllName = args.Name.Contains(',') ? args.Name.Substring(0, args.Name.IndexOf(',')) : args.Name.Replace(".dll", "");

    string resourceName = String.Format("{0}.{1}.dll", defaultNameSpace , dllName);

    using (var stream = Assembly.GetExecutingAssembly().GetManifestResourceStream(resourceName))
    {
         if (stream == null)  
             return null;

         byte[] data = new byte[stream.Length];
         stream.Read(data, 0, data.Length);
         return Assembly.Load(data);
     }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T10:24:13.120

这个开源工具应该可以帮助你

[http://madebits.com/netz/](http://madebits.com/netz/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T10:30:20.797

一种可能的方法是将所有 DLL 添加到资源中（手动）。然后，在程序启动时，使用`File.WriteAllBytes`将这些资源字节流写入文件。

**注意：**在这种情况下，您不能使用`DllImport`，因为它需要常量字符串路径。相反，您将使用所谓的“动态 P\Invoke”。[学到更多。](http://blogs.msdn.com/b/junfeng/archive/2004/07/14/181932.aspx)

# php - 如何使用 .htaccess 将斜杠作为语言参数重定向到我的网站页面

> ID：12225979
> 
> 赞同：0
> 
> 时间：2012-09-01T07:55:32.153
> 
> 标签：php, .htaccess, mod-rewrite, redirect, slash

我有这个没有正确重定向的规则：

```
#redirect from www.mysite.com/page-NAME/es to www.mysite.com/public/index.php?page=NAME/es
RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteCond %{REQUEST_URI} !public/
RewriteRule page-(.*)/es$ public/index.php?page=$1&lang=es [L] 
```

在内部没有收到参数页面，因此站点显示主页。我不确定我的这条规则是否错误，或者它是否与其他运行良好的规则相冲突，或者它是否是一个订单问题。

非常感谢所有帮助。提前致谢。

以下是我网站根目录上的完整 htaccess 文件，以备您查看。

```
Options +FollowSymlinks
RewriteEngine on

DirectoryIndex index.php

#Adds www to the domain
RewriteBase /
RewriteCond %{HTTP_HOST} !^www.mysite.com$ [NC]
RewriteRule ^(.*)$ http://www.mysite.com/$1 [L,R=301]

#redirect from www.mysite.com/es to www.mysite.com/public/index.php?lang=es
RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteCond %{REQUEST_URI} !public/
RewriteRule /es$ public/index.php?lang=es [L]

#redirect from www.mysite.com/en to www.mysite.com/public/index.php?lang=en
RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteCond %{REQUEST_URI} !public/
RewriteRule /en$ public/index.php?lang=en [L]

#redirect from www.mysite.com/ to www.mysite.com/public/index.php
RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteCond %{REQUEST_URI} !public/
RewriteRule ^(/)?$ public/index.php [L]

#redirect from www.mysite.com/page-NAME/es to www.mysite.com/public/index.php?page=NAME/es
RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteCond %{REQUEST_URI} !public/
RewriteRule page-(.*)/es$ public/index.php?page=$1&lang=es [L]

#redirect from www.mysite.com/page-NAME to www.mysite.com/public/index.php?page=NAME
RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteCond %{REQUEST_URI} !public/
RewriteRule page-(.*)$ public/index.php?page=$1 [L]

#redirect from www.mysite.com/ to www.mysite.com/public/
RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteCond %{REQUEST_URI} !public/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ public/$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T19:59:35.950

好的，发现问题似乎，这确实是一个订单问题，这似乎可行，希望这可以帮助遇到同样问题的人

```
Options +FollowSymlinks
RewriteEngine on

DirectoryIndex index.php

#Adds www to the domain
RewriteBase /
RewriteCond %{HTTP_HOST} !^www.mysite.com$ [NC]
RewriteRule ^(.*)$ http://www.mysite.com/$1 [L,R=301]

#redirect from www.mysite.com/page-NAME/es to www.mysite.com/public/index.php?page=NAME/es
RewriteRule page-(.*)/es$ public/index.php?page=$1&lang=es [L]

#redirect from www.mysite.com/page-NAME to www.mysite.com/public/index.php?page=NAME
RewriteRule page-(.*)$ public/index.php?page=$1 [L]

#redirect from www.mysite.com/es to www.mysite.com/public/index.php?lang=es
RewriteRule /es public/index.php?lang=es [L]

#redirect from www.mysite.com/en to www.mysite.com/public/index.php?lang=en
RewriteRule /en public/index.php?lang=en [L]

#redirect from www.mysite.com/ to www.mysite.com/public/index.php
RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteCond %{REQUEST_URI} !public/
RewriteRule ^(/)?$ public/index.php [L]

#redirect from www.mysite.com/ to www.mysite.com/public/
RewriteCond %{HTTP_HOST} ^(www.)?mysite.com$
RewriteCond %{REQUEST_URI} !public/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ public/$1 [L] 
```

# algorithm - 如何创建一个随机吃豆人迷宫

> ID：12225981
> 
> 赞同：12
> 
> 时间：2012-09-01T07:55:55.703
> 
> 标签：algorithm, maze, pacman

您好，我一直在研究一种生成随机 pacman 迷宫的算法。我看过几篇文章，但无法分解逻辑。我使用迷宫算法深度优先搜索，然后镜像迷宫以使每个迷宫对称。我遇到了清理死胡同等问题。如果这不可能，如果有人有自己的逻辑来生成随机迷宫，我也会尝试另一种算法。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T22:30:07.193

I solved my problem and wanted to share. For starters I set the top row and first column and last column as a wall obstacle then I set a path on the second column, second to last row and second row so it surrounds the outer wall. Also keep in mind I am only creating 50% of the maze so when I am done I copy the maze so both sides are equal. Then I created a middle section surrounded by a wall for the area where the ghosts spawn. Then any part of the maze that hasn't been looked at I generated paths using the depth first search algorithm. After this was done I know that in a pacman maze there are no dead ends. What I did was check every cell that is part of the path that pacman can travel. If any cell has only 1 bordering cell then it is a dead end. If it is a dead end see if it can be connected to another path. If not set the dead end as a wall and check the maze again for any dead ends. After you follow these steps you will have a random maze with no dead ends that resembles the typical pacman maze.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T10:32:59.983

我建议在干净区域（没有任何墙，在 n*n 0 的矩阵中）进行随机游走，然后填充随机游走未覆盖的区域（将它们设为墙），这也可能会导致未使用的空间，但这种保证有很长的步行路程。您可以任意设置步行的大小（例如，当您的步行大小达到 (n^2)/2 时，您可以停止步行）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T22:42:36.683

很久以前，我在 C=64 上使用深度优先和消除死角创建了一个随机 PacMan 迷宫生成器，但最近我的朋友挑战我再次这样做。找到了更好的方法。[在我的网站上](http://www.deenfoxx.com/pm)查看

本质上，我创建了一个房间网格，每个方向都有一扇敞开的门（在边界上关闭，除了隧道通向的地方），然后根据相邻的封闭门不应该超过 1 个的规则开始随机关闭门房间如果两扇门都关上了，第三扇门就会造成死胡同。继续随机执行此操作，直到所有潜在的门都按规则关闭或打开。

镜像需要更多的工作，但我从基础开始，只是建立了允许镜像、鬼屋位置、最小墙长（没有单墙环形交叉路口）和最大墙长等的规则......

# php - sphinx 或 lucene 适合我吗？（突出搜索和同义词搜索）

> ID：12225982
> 
> 赞同：0
> 
> 时间：2012-09-01T07:56:11.513
> 
> 标签：php, mysql, sql, lucene, sphinx

我对这些搜索引擎进行了快速研究，但我没有找到我想要的东西。

我感兴趣的是实现**同义词搜索**（目前我使用mysql的简单全文搜索随机实现），但最重要的是我关心的是计算关键字的重要性，而不是关键字的**密度**：

也就是说，**“只要它们，关键字，出现”在**mysql 索引的文本中......

我可以用这些搜索引擎做到这一点吗？

我将使用的语言是 PHP

提前致谢

# c++ - 如何计算字符串中字母的概率

> ID：12225985
> 
> 赞同：-1
> 
> 时间：2012-09-01T07:56:16.607
> 
> 标签：c++, string, probability

因此，我正在研究（C++）中的一个项目，在该项目中，我必须计算从文本文件中读取的 DNA 序列中核苷酸的概率。我已经弄清楚了有关文件的其他信息，例如序列的平均长度、方差、偏差等。

例子... `"atgatatgagc"`

我可以给出一个可能的`'a'`弹出窗口或`'t`' .. 等

任何提示或建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T08:09:35.363

```
char letter='a';
string str="abcd"; 
cout << (double) std::count(str.begin(), str.end(), letter) / str.size(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T08:01:02.077

在没有更多信息的情况下，并假设每个字母的概率相等，那么任何字母“弹出”的概率是 1/4，假设有四个可能的字母、`A`、和。`T``G``C`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T12:56:46.873

Leonid Volnitsky 代码的轻微修改：

```
 #include <iostream>
#include <algorithm>
#include <string>
using namespace std ;

int main(void)
{

    char character_A='A';
    char character_C='C';
    char character_G='G';
    char character_T='T';

    string DNA_Sequence="ACAAGATGCCATTGTCCCCCGGCCTCCTGCTGCTGCTGCTCTCCGGGGCCACGGCCACCGCTGCCCTGCCCCTGGAGGGTGGCCCCACCGGCCGAGACAGCGAGCATATGCAGGAAGCGGCAGGAATAAGGAAAAGCAGCCTCCTGACTTTCCTCGCTTGGTGGTTTGAGTGGACCTCCCAGGCCAGTGCCGGGCCCCTCATAGGAGAGGAAGCTCGGGAGGTGGCCAGGCGGCAGGAAGGCGCACCCCCCCAGCAATCCGCGCGCCGGGACAGAATGCCCTGCAGGAACTTCTTCTGGAAGACCTTCTCCTCCTGCAAATAAAACCTCACCCATGAATGCTCACGCAAGTTTAATTACAGACCTGAA"; 

    int occurrences_A=std::count(DNA_Sequence.begin(), DNA_Sequence.end(), character_A);
    double probability_A =(double) occurrences_A/ DNA_Sequence.size();

    int occurrences_C=std::count(DNA_Sequence.begin(), DNA_Sequence.end(), character_C);
    double probability_C =(double) occurrences_C/ DNA_Sequence.size();

    int occurrences_G=std::count(DNA_Sequence.begin(), DNA_Sequence.end(), character_G);
    double probability_G =(double) occurrences_G/ DNA_Sequence.size();

    int occurrences_T=std::count(DNA_Sequence.begin(), DNA_Sequence.end(), character_T);
    double probability_T =(double) occurrences_T/ DNA_Sequence.size();

    cout<<"In the DNA sequence  \n\n["<<DNA_Sequence <<"]    \n\n\n" ;
    cout<<"The probability of ["<<character_A <<"] in the sequence   = "<<probability_A <<"  ("<<probability_A*100 <<"%)  ("<<occurrences_A<<" A's)  \n" ;
    cout<<"The probability of ["<<character_C <<"] in the sequence   = "<<probability_C <<"  ("<<probability_C*100 <<"%)  ("<<occurrences_C<<" C's)  \n" ;
    cout<<"The probability of ["<<character_G <<"] in the sequence   = "<<probability_G <<"  ("<<probability_G*100 <<"%)  ("<<occurrences_G<<" G's)  \n" ;
    cout<<"The probability of ["<<character_T <<"] in the sequence   = "<<probability_T <<"  ("<<probability_T*100 <<"%)  ("<<occurrences_T<<" T's)  \n\n" ;

    cout<<"Cross check : "<<(probability_A*100)<<"% + "<<( probability_C*100)<<"% + "<<( probability_G*100)<<"% + "<<( probability_T*100)<<
        "% = "<< (probability_A*100) + ( probability_C*100) + ( probability_G*100) + ( probability_T*100) <<"% \n";
    cout<<"Sequence size = "<<DNA_Sequence.size()<<"  (A + C + G + T = "<<occurrences_A+occurrences_C+occurrences_G+occurrences_T<<") \n\n";

    cout<<" \nPress any key to continue\n";

    cin.get();

   return 0;
} 
```

输出：

```
In the DNA sequence

[ACAAGATGCCATTGTCCCCCGGCCTCCTGCTGCTGCTGCTCTCCGGGGCCACGGCCACCGCTGCCCTGCCCCTGGAGGG
TGGCCCCACCGGCCGAGACAGCGAGCATATGCAGGAAGCGGCAGGAATAAGGAAAAGCAGCCTCCTGACTTTCCTCGCTT
GGTGGTTTGAGTGGACCTCCCAGGCCAGTGCCGGGCCCCTCATAGGAGAGGAAGCTCGGGAGGTGGCCAGGCGGCAGGAA
GGCGCACCCCCCCAGCAATCCGCGCGCCGGGACAGAATGCCCTGCAGGAACTTCTTCTGGAAGACCTTCTCCTCCTGCAA
ATAAAACCTCACCCATGAATGCTCACGCAAGTTTAATTACAGACCTGAA]

The probability of [A] in the sequence   = 0.214674  (21.4674%)  (79 A's)
The probability of [C] in the sequence   = 0.334239  (33.4239%)  (123 C's)
The probability of [G] in the sequence   = 0.285326  (28.5326%)  (105 G's)
The probability of [T] in the sequence   = 0.165761  (16.5761%)  (61 T's)

Cross check : 21.4674% + 33.4239% + 28.5326% + 16.5761% = 100%
Sequence size = 368  (A + C + G + T = 368)

Press any key to continue 
```

# jquery - Jquery / ajax：使用文本框中子字符串的ajax自动完成？

> ID：12225995
> 
> 赞同：0
> 
> 时间：2012-09-01T07:56:53.227
> 
> 标签：jquery, asp.net, ajax, ajaxcontroltoolkit

我有这个`txt_Remarks`文本框`asp.net`，我所做的是使用 ajaxToolkitLibrary 来指定这样定义的自动完成列表的来源，

```
[WebMethod]
public string[] GetItemRemarks(string prefixText, int count)
{
    if (count == 0)
    {
        count = 10;
    }

    Random random = new Random();
    List<string> items = new List<string>(count);
    SqlCommand con = new SqlCommand();
    SqlDataReader sdr = null;
    try
    {
        SqlCommand cmd = new SqlCommand();
        cmd.CommandText = "SELECT REMARKS FROM mstRemark WHERE BranchId='"+ Globals.BranchID +"' AND Id<>1 AND REMARKS like '%" + prefixText.Trim() + "%' ";
        sdr = ExecuteReader(cmd);
        while (sdr.Read())
        {
            items.Add("" + sdr.GetValue(0));
        }
        sdr.Close();
        sdr.Dispose();
    }
    catch (Exception )
    {

    }
    return items.ToArray();
} 
```

我想要什么，在选择一个项目后说`premium user`而不是结束自动完成，在那里放一个逗号，并根据他现在输入的内容向用户显示新的项目列表。

比如说，他开始输入 p== 它的显示溢价、预定义、模式等。当他点击溢价时，它被设置在文本框中，然后在那里放一个逗号，他可以再次输入，说他再次输入 p == 它应该再次显示高级、预定义、模式，这次他单击模式，文本框将显示`preminum, pattern`并允许他像这样工作，直到他单击其他地方。所以，基本上这个自动完成应该基于自定义子字符串工作，我也尝试使用 $.ajax() 但没有运气，我什至无法让它工作。那么，这怎么做呢？

*编辑：当您输入开始输入标签时，* **类似于stackoverflow中**发生的事情，它显示一个列表，当您选择它时，它被输入到框中，您可以再次输入并将该标签添加到列表中..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T01:34:55.167

您可以查看 Chosen jquery 插件，它几乎完全符合您所描述的我相信。

[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)