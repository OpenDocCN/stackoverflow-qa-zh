# StackOverflow 问答 10156000-10156999

# php - PHP 电子邮件给客户

> ID：10156001
> 
> 赞同：0
> 
> 时间：2012-04-14T18:03:49.813
> 
> 标签：php, mysql, sql, email

我有一些编程问题。当顾客在咖啡馆的网站上在咖啡馆订购一张桌子时，咖啡馆的老板可以进入并批准或拒绝订单。然后订购板的客户必须收到一封电子邮件，说明该电子邮件被接受或拒绝。

```
<?php

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");
mysql_query("SET NAMES utf8");
mysql_query("SET character_set_results='utf8&#8242;");

function escapeAddr($addr) {
    $check = preg_match('/(.*)<(.*)>/', $addr, $a);
    if ($check) $addr = '=?UTF-8?B?'.base64_encode($a[1]).'?= <'.$a[2].'>';
    return $addr;
}
function mail_utf8($to, $subject='no subject', $message='', $from='', $cc='', $bcc='') {
$to = $email;
$subject = "subject";
$message = "message" ;
$from = escapeAddr($from);
$header = 'From: '.$from.PHP_EOL
            . 'Return-Path: '.$from.PHP_EOL
            . 'Reply-To: '.$from.PHP_EOL
            . 'MIME-Version: 1.0'.PHP_EOL
            . 'Content-type: text/plain; charset=UTF-8'.PHP_EOL
            . 'X-Mailer: PHP/'.phpversion().PHP_EOL
            . 'Content-Transfer-Encoding: 8bit'.PHP_EOL;
    if ($cc!='') $header .= 'Cc: '.escapeAddr($cc).PHP_EOL;
    if ($bcc!='') $header .= 'Bcc: '.escapeAddr($bcc).PHP_EOL;
    $header .= PHP_EOL;
    return mail($to, '=?UTF-8?B?'.base64_encode($subject).'?=', $message, $header);
}

$g_id = ( isset( $_GET['id']) && is_numeric( $_GET['id']) ? (int)$_GET['id'] : FALSE);
if( !$g_id) {
    echo 'Error'; // ID not currect
}
else {
    $query = mysql_query("SELECT email FROM $tbl_name WHERE id=$g_id");
    $row = mysql_fetch_assoc($query);
    $email = $row['email'];

    if( mail_utf8($email, 'Table', 'message', 'no-reply@email.com')) {
        echo 'Accepted'; 
    }
    else
    {
        echo 'Error';
    }
}
?> 
```

当然，所有者必须登录才能批准或拒绝订单。由于它是您按下拒绝或批准的表单，而是一个`<a href`链接，因此我使用了 path `accept.php?Id=`。

电子邮件必须发送到与订单匹配的电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:39:36.703

在某些服务器中，取决于设置，php mailer 不起作用！也许你需要 SMTP 类来发送邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:25:57.417

首先，您的第二个 Mysql-Query 中的 Html-Character 必须不存在。将其替换为 ' 其次，您可以尝试从邮件标头中删除 Content-Transfer-Encoding。第三，但微不足道的原因： $tbl_name 设置了吗？您确定 $from-variable 中的地址具有正则表达式的正确格式吗？

# c++ - 扩展精度浮点库 C/C++

> ID：10156002
> 
> 赞同：6
> 
> 时间：2012-04-14T18:03:51.163
> 
> 标签：c++, c, numbers, floating-point, numeric

我正在寻找具有以下功能的扩展精度浮点库：

*   固定数据类型大小（即扩展精度浮点数占用固定内存量）
*   变量不需要初始化
*   指定尾数和指数的大小
*   C/C++ 接口
*   支持非常大的浮点数 > 10^10000

我能找到的最接近的是 Ivano Primi 的 HPA 库。这个库的唯一问题是我无法扩展指数（它用 15 位固定）。它允许我对尾数进行多种选择，但最大的可表示数字始终限于 10^4932。GMP 等其他库需要初始化，并且不允许固定大小的数据类型。关键是我不需要任意精度，而只是扩展。但我需要有非常大的指数。

谢谢你的帮助！

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:22:09.590

似乎[ttmath](http://www.ttmath.org)非常接近我所寻找的。它允许使用指数和尾数值指定大浮点数，并且不需要初始化。

# php - 记录代码的软件？

> ID：10156010
> 
> 赞同：1
> 
> 时间：2012-04-14T18:04:39.323
> 
> 标签：php, testing, pseudocode

作为我的 A Level 计算课程的一部分，我需要在我的代码中记录并创建一个变量列表，但是我的 PHP 脚本总共超过 6,000 行。

有谁知道任何可以在我的代码中显示变量列表的软件？我真的不想遍历我所有的代码并手工挑选出大约一千个变量:(

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:07:33.977

在 PowerShell 中，这将非常简单：

```
Select-String '\$[\w_]+' foo.php -AllMatches |
  Select-Object -ExpandProperty Matches |
  Select-Object -Unique -ExpandProperty Value 
```

或更短：

```
sls -a '\$[\w_]+' foo.php|%{$_.Matches}|select -u -exp Value 
```

相应地适应 Perl、sed 或任何你喜欢使用的东西。基本的想法是一样的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T18:10:44.627

PHP 的分[词](http://www.php.net/manual/en/book.tokenizer.php)器允许您解析脚本，并可用于挑选出所有定义/使用的变量

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T18:07:01.933

根据您需要的详细程度，[Xdebug](http://xdebug.org/)在这里可能很有用。

您还应该查看反射类： [http](http://php.net/manual/en/book.reflection.php) ://php.net/manual/en/book.reflection.php 使用反射编写一些东西可以让您控制输出。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-14T18:40:01.583

```
$ grep -oh "\$[a-zA-Z_]*" file.php | sort | uniq 
```

或者

```
$ grep -R -oh "\$[a-zA-Z_]*" src_dir | sort | uniq 
```

# xamarin.ios - 应用恢复时恢复 UIView 动画

> ID：10156015
> 
> 赞同：0
> 
> 时间：2012-04-14T18:05:17.467
> 
> 标签：xamarin.ios, uiviewanimation

我有一个这样的循环动画：

```
 UIView.Animate(50, 0, UIViewAnimationOptions.Repeat | UIViewAnimationOptions.CurveLinear, () => { 
            bgBackground.Frame = new RectangleF(new PointF(-496, bgBackground.Frame.Y), bgBackground.Frame.Size);
        }, () => {}); 
```

但是当应用程序进入后台并且动画没有运行时。

当应用程序进入前台时，我已经监听了该事件，但我不知道如何重新启动动画。

我有另一个使用 CABasicAnimation 的循环动画，并且在恢复应用程序时它仍在运行，所以我不能使用基于 UIView 的动画来循环动画吗？

其他类似的问题刚刚提供了CALayer动画作为解决方案：

*   [如何暂停和恢复 UIView 动画？](https://stackoverflow.com/questions/3211065/how-to-pause-and-resume-uiview-animation)
*   [如何暂停和恢复 UIView 动画（没有块动画）？](https://stackoverflow.com/questions/9104487/how-to-pause-and-resume-uiview-animation-without-block-animation)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:57:25.450

我重写以使用 CABasicAnimation，然后一切正常。

```
CABasicAnimation animSc;
animSc = CABasicAnimation.FromKeyPath("transform.translation.x");
animSc.From = NSNumber.FromFloat(0.0f);
animSc.To = NSNumber.FromFloat(-496.0f);
animSc.Duration = 50.0f;
animSc.RepeatCount = INFITE_NUMBER;
bgView.Layer.AddAnimation(animSc, "bg_anim"); 
```

然后当视图出现并且一切都重新开始动画时，我只是调用上面的代码。

# macos - ImaginePlugin for CakePHP 和 Mac

> ID：10156017
> 
> 赞同：0
> 
> 时间：2012-04-14T18:05:28.283
> 
> 标签：macos, cakephp, plugins

为了在我们当前的项目中维护图片上传，我决定使用来自[https://github.com/CakeDC/Imagine的 ImaginePlugin for CakePHP](https://github.com/CakeDC/Imagine)

对我来说一切都很好，所以我将代码提交给我们的 SVN，我的同事更新了它来测试它。

但是他现在到处都是像这样的“找不到类”错误

```
Class 'Imagine\Gd\Imagine' not found in ... 
```

我在 Windows 机器上工作，他在 Mac 上工作。以前也有人经历过吗？目录分隔符有问题吗？该插件仅适用于Windows机器吗？

还是我们犯了一些错误？

感谢帮助

纳赫里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:08:16.463

一个简单的

```
$name = str_replace("\\", '/', $name); 
```

在自动装载机中解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:51:06.747

您是否在您的存储库中包含了 CakeDC/Imagine 源代码？也许它是作为子模块安装的？如果它不在您的回购中，他需要得到它。如果是子模块，他可能需要拉出子模块。

# java - 没有选定项目的 SWT 列表

> ID：10156018
> 
> 赞同：0
> 
> 时间：2012-04-14T18:05:29.620
> 
> 标签：java, list, swt, selected

```
list = new List(composite, SWT.V_SCROLL | SWT.BORDER | SWT.SINGLE); 
```

我如何定义一个 SWT LIST 以便我可以取消选择所有项目？我有一个场景，根本不需要选择任何项目......

似乎唯一有效的 SWT 标志是 SINGLE 和 MULTI

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:11:10.317

我认为没有任何规定可以创建没有可选择性的列表。如果它是仅显示的小部件，您可能应该使用 a`Table`或 multiline`Text`代替。

您可以添加一个`SelectionListener`名为`deselectAll()`. 这有点俗气，但它可能会奏效。

# java - 使用Jsoup登录和爬取数据

> ID：10156019
> 
> 赞同：3
> 
> 时间：2012-04-14T18:05:34.320
> 
> 标签：java, cookies, jsoup

我想用来`Jsoup`抓取一个只有在我登录时才可用的页面。我想这意味着我需要在一个页面上登录并将cookies发送到另一个页面。[我在这里](https://stackoverflow.com/questions/6432970/jsoup-posting-and-cookie)
阅读了一些较早的帖子并编写了以下代码：

```
public static void main(String[] args) throws IOException {
    Connection.Response res = Jsoup.connect("login.yahoo.com")
        .data("login", "myusername", "passwd", "mypassword")
        .method(Method.POST)
        .execute();

Document doc=res.parse();
String sessionId = res.cookie("SESSIONID");

Document doc2 = Jsoup.connect("http://health.groups.yahoo.com/group/asthma/messages")
        .cookie("SESSIONID", sessionId)
        .get();

Elements Eles=doc2.getElementsByClass("message");

String content=Eles.first().text();

System.out.println(content); 
```

我的问题是如何知道我的 cookie 名称（即“SESSIONID”）在这里发送我的登录信息？我使用该`.cookies()`方法从登录页面获取所有cookie：

> B
> DK
> YM
> T
> PH
> Y
> F

我一一尝试，但都没有奏效。我可以从其中一些获取 sessionId，但是我无法从第二页成功获取节点，这意味着我没有成功登录。有人能给我一些建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-22T23:01:35.800

我也很难用 jsoup 登录网站。

我想出的是 selenium webdriver 和 jsoup 的混合体。

Webdriver 可以远程控制浏览器，通常用于测试目的。

对于我的应用程序，不希望让浏览器可见并在屏幕上乱七八糟。所以我改用了“静默”的网络驱动程序：HtmlUnitDriver。您可以使用以下代码行实例化它：

```
HtmlUnitDriver driver = new HtmlUnitDriver(true); // true meaning javascript support (Using rhino i be leave) 
```

现在登录我使用的网站：

```
String baseUrl = "http://www.thesite.com";

driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);

driver.get(baseUrl);

driver.findElement(By.id("TextBoxUser")).clear();
driver.findElement(By.id("TextBoxUser")).sendKeys("username");
driver.findElement(By.id("TextBoxPass")).clear();
driver.findElement(By.id("TextBoxPass")).sendKeys("password");
driver.findElement(By.id("Button1")).click(); 
```

获取页面内容：

```
String htmlContent = driver.getPageSource(); 
```

开始使用jsoup：

```
Document document = Jsoup.parse(htmlContent); 
```

这对我很有用。

史蒂芬·奥托·詹森

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T02:48:04.633

您是否尝试过这样做：

```
Connection.Response res = Jsoup.connect("https://login.yahoo.com/config/login?")
    .data("login", "myusername", "passwd", "mypassword")
    .method(Method.POST)
    .execute();

 Map<String, String> cookies = res.cookies();

 Connection connection = Jsoup.connect("http://health.groups.yahoo.com/group/asthma/messages");

 for (Map.Entry<String, String> cookie : cookies.entrySet()) {
     connection.cookie(cookie.getKey(), cookie.getValue());     
 }

 Document doc=  connection.get();
 // #code selector
 // Example
 // Element e=doc.select(".ygrp-grdescr").first();
 // System.out.println(e.text()); // Print => This list will be for asthmatics, and anyone whose       life is affected by it. Discussions include causes, problems, and treatment 
```

我希望你这对你的问题有用。

# sql - 在 SQL Server 2008 中添加多个 FK 关系时出错

> ID：10156026
> 
> 赞同：1
> 
> 时间：2012-04-14T18:06:32.333
> 
> 标签：sql, sql-server-2008, relational-database

考虑我们有两个表 ProductType 和 ProductSizeGroup 如下

**产品类别**

```
Id 
Name
MaleSizeGroupId
FemaleSizeGroupId
ChildSizeGroupId 
```

**产品尺寸组**

```
Id
Name 
```

每个 MaleSizeGroupId、FemaleSizeGroupId 和 ChildSizeGroupId 字段都应该是 ProductSizeGroup.Id 的 FK。

我使用以下语句添加一个：

```
ALTER TABLE [dbo].[ProductType]  
WITH CHECK ADD CONSTRAINT
    [FK_ProductType_ProductSizeGroup_Male] FOREIGN KEY([MaleGroupId]) 
    REFERENCES [dbo].[ProductSizeGroup] ([Id]) 
```

这工作正常。我尝试添加下一个使用

```
ALTER TABLE [dbo].[ProductType]
WITH CHECK ADD CONSTRAINT
    [FK_ProductType_ProductSizeGroup_Female] FOREIGN KEY([FemaleGroupId]) 
    REFERENCES [dbo].[ProductSizeGroup] ([Id]) 
```

但我得到了错误：

> ALTER TABLE 语句与 FOREIGN KEY 约束“FK_ProductType_ProductSizeGroup_Female”冲突。冲突发生在数据库“dbname”、表“dbo.ProductSizeGroup”、列“Id”中。

所以有冲突..但是什么冲突？我应该寻找什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:11:51.830

这只是意味着：表中的某些行的列中的值`ProductType`在引用的表 ( )中**不存在。**`FemaleGroupId`**`ProductSizeGroup`**

 **这本身不是问题——你完全可以有多个列从一个表到另一个表。

问题出在现有数据上——那里有不符合 FK 约束的数据。修复该数据，您应该会没事的。

要查找那些有问题的行，请使用如下查询：

```
SELECT * 
FROM [dbo].[ProductType]
WHERE FemaleGroupId NOT IN (SELECT DISTINCT Id FROM [dbo].[ProductSizeGroup]) 
```

这将列出所有违规行 - 更新它们的属性并重新开始！**

# java - Java 搜索字符串(kmp)

> ID：10156030
> 
> 赞同：1
> 
> 时间：2012-04-14T18:06:47.767
> 
> 标签：java, string, search, knuth-morris-pratt

我想搜索字符串 b 中有多少次出现的字符串（比如说 a）。我想过实现 Knuth-Morris-Pratt 算法，但我更喜欢内置的 java 函数。有没有这样的功能？我希望该函数尽可能地具有最低的复杂性，因为我多次使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:11:58.983

KMP 算法*不是*标准 Java 库的一部分，但很容易在网上找到实现，比如[这个](http://www.fmi.uni-sofia.bg/fmi/logic/vboutchkova/sources/KMPMatch.java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:19:41.450

这是我做的一个非常古老的项目的一部分。可能有助于激发灵感，但不确定这是否是最快的方式。

基本上，您使用 Automaton 函数来创建状态机表。然后，您使用数学函数来检查出现的情况！

Automaton Param ：pattern 是您要查找的模式，alpha 是该模式中的所有字符（例如：pattern - aabba，alpha - ab）

我为法国的评论道歉！

```
public Automaton(String pattern, char[] alpha){

    //declaration et initialisation
    _alpha = alpha;
    _pattern = pattern;
    int m = pattern.length();
    String Pqa = "";
    String Pk = "";

    //Initialisation du Map
    for(int map = 0; map < alpha.length ; map++){
        alphaMapc.put(alpha[map],alpha[map]);
        alphaMapNum.put(alpha[map],map);
    }

    tableau = new int[pattern.length()+1][alpha.length];

    // Algo d'apres le pseduo code et les notes
    for(int q=0 ; q <= m ; q++){            
        for( int j =0 ; j <  alpha.length ;  j++  ){
            Pqa = pattern.substring(0,q );
            Pqa += alpha[j];
            int k = Math.min(m+1, q+2);

            //Do while qui test Pq avec toutes le fins possibles
            do{
                k = k-1;
                Pk = pattern.substring(0, k);

            }while( k >0 && !(Pqa.endsWith(Pk)) );

            tableau[q][j] = k;
            System.out.print(k + " "); // TEST OUTPUT
        }
        System.out.println(); // TEST OUTPUT
    }

}

public int match(String string) {

    //Initialisation de letat et du compte
    int etat = 0;
    int compte = 0;

    for(int s = 0; s < string.length() ; s++){          
        char t = string.charAt(s);      

        //Acces en O(1)
        if(t == alphaMapc.get(t)) etat = tableau[etat][alphaMapNum.get(t)];

        //Si on atteint un etat final, on recommence a l'entree de la machine et on increment le compteur
        if(etat == 15){
            etat = 0;
            compte++;
        }
    }

    //Test
    System.out.println("Compte: " + compte);
    return compte;
} 
```

希望能帮助到你！

问候， 厄瓦尔德

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T18:21:51.040

在 Java 中，您可以简单地使用该`String.indexOf()`方法。

它不使用 KMP 算法。对于短字符串来说已经足够了，但是如果您需要性能并且打算使用大字符串，那么这不是一个好的选择。

但是，如果您想要一个简单的解决方案，这里是：

```
int n = 0, i = 0;
while (i < str.length() 
       && (i = str.indexOf("al", i)) != -1) {
  ++n;
  ++i;
}
System.out.println("n: " + n); 
```

它计算子字符串的所有出现次数。

# arrays - 如何将数组发送到过程

> ID：10156031
> 
> 赞同：0
> 
> 时间：2012-04-14T18:06:56.467
> 
> 标签：arrays, assembly, procedure, x86-16

嗨，我在汇编程序 8086 中做 DES，我有很多数组，我还需要一些程序，但我不知道如何将数组发送到程序。我尝试使用堆栈，但没有成功。你能帮我个忙吗？我正在使用 TASM

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:28:28.503

假设您有一组单词定义为：

```
myArray dw 10, 9, 8, 7, 6, 5, 4, 3, 2, 1
numItems dw 10 
```

你想把它传递给一个过程：

```
push myArray  ; the address of the array
mov ax, [numItems]
push ax       ; the length of the array
call myProc
; if you want the caller to clean up ...
add sp, 4  ; adjust sp to get rid of params 
```

那么 myProc 将是：

```
myProc:
    mov bp, sp ; save stack pointer
    mov cx, [bp+4] ; cx gets the number of items
    mov bx, [bp+6] ; bx gets the address of the array
    ; at this point, you can address the array through [bx]
    mov ax, [bx+0} ; first element of the array
    mov ax, [bx+2] ; second element of the array
    ret 4  ; cleans up the stack, removing the two words you'd pushed onto it
    ; or, if you want the caller to clean up ...
    ret 
```

# java - Java程序中的位置计数问题

> ID：10156037
> 
> 赞同：0
> 
> 时间：2012-04-14T18:07:34.880
> 
> 标签：java, sql, jakarta-ee

我正在研究 GPS 位置，我需要在相应地址中转换纬度和经度。我有一个包含所有纬度和经度的数据库（超过 1,50,000 个数据），其实际地标即地址位于一个主表中。

我们已经在许多穿越所有地理位置的车辆上安装了 GPS 设备。该设备每 2 分钟发送一次经纬度的实际位置，我得到这个纬度和经度并映射到我们的主表并检查我们主表的哪个地标附近。为了进行这个计算，我做了一些数学运算，将一些增量值添加到从车辆获取的纬度和经度上，然后从我的主表中找到最近的搜索，一旦我们发现我们显示车辆距离 XYZ 位置 5 公里，我们得到 XYZ 位置主表是最近的点。

这个程序基本上要花很多时间来计算位置，因为我们在 Vehicle 上安装了 10,000 个 GPS 设备，每个设备在 2 分钟内发送 GPS 数据，所以你可以想象我们得到了多少数据。

你能帮我解决这个问题，让它变得非常可扩展和快速。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:40:36.173

在您的数据库上使用 GIS 图层怎么样？像 PostGIS 这样的东西为 sql 添加了一个具有这种功能的新层。从[常见问题解答](http://postgis.refractions.net/documentation/manual-1.3/ch03.html#id2570802)：

> 3.7\. 找到另一个对象半径内的所有对象的最佳方法是什么？
> 
> 为了最有效地使用数据库，最好进行半径查询，将半径测试与边界框测试相结合：边界框测试使用空间索引，可以快速访问随后应用半径测试的数据子集.
> 
> ST_DWithin(geometry, geometry, distance) 函数是一种执行索引距离搜索的便捷方式。它的工作原理是创建一个足够大以包围距离半径的搜索矩形，然后对索引的结果子集执行精确距离搜索。
> 
> 例如，要查找具有 100 米 POINT(1000 1000) 的所有对象，以下查询会很好地工作：
> 
> SELECT * FROM geotable WHERE ST_DWithin(geocolumn, 'POINT(1000 1000)', 100.0);

# java - 在 GWT 中将集合转换为客户端

> ID：10156041
> 
> 赞同：0
> 
> 时间：2012-04-14T18:09:05.117
> 
> 标签：java, gwt, guava

下面的代码是一个 GWT RPC serlvet 实现，转换后的集合显然在客户端失败，因为它不兼容 GWT。

我想念[番石榴](http://code.google.com/p/guava-libraries/)内部的任何解决方案吗？

```
@Singleton
public class DataServiceImpl extends RemoteServiceServlet implements
        DataService {

    @Inject
    ApplicationDao dao;

    @Inject
    DtoUtil dtoUtil;

    public Collection<GoalDto> getAllConfiguredGoals() {
        return Collections2.transform(dao.getAllGoals(), new Function<Goal, GoalDto>() {
            public GoalDto apply(@Nullable Goal goal) {
                return dtoUtil.toGoalDto(goal);
            }
        });
    }

} 
```

我正在寻找一个本地番石榴解决方案，而不是一些手写的翻译代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T18:12:08.873

在这种情况下，番石榴的问题在于它使用了惰性评估（这通常很好，但在这里不是），并且该集合由原始集合备份。唯一的出路是强制一个新的集合，它没有由原始对象备份并且所有评估都已执行。像这样的东西应该可以解决问题（假设 GoalDto 是 GWT 可序列化的）：

```
return new ArrayList<GoalDto>(Collections2.transform(dao.getAllGoals(), new Function<Goal, GoalDto>() {
        public GoalDto apply(@Nullable Goal goal) {
            return dtoUtil.toGoalDto(goal);
        }
    })); 
```

# c++ - OpenCV：获取 Mat 值的总数

> ID：10156044
> 
> 赞同：12
> 
> 时间：2012-04-14T18:09:24.967
> 
> 标签：c++, opencv

是否有一些 openCV 函数可以传入 a`cv::Mat`并获取其中所有值的总和？

例如：`int cvSumFoo(Mat &srcMat)`; 我期待一个 int 回来

我这样创建它：

```
srcMat= new Mat(rows, cols, CV_8U); 
```

如果可能的话，我想避免创建自己的循环。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-14T18:22:40.180

函数“sum”“独立于每个通道计算并返回数组元素的总和。”

您可以在此处找到信息：http: [//docs.opencv.org/modules/core/doc/operations_on_arrays.html#sum](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#sum)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-20T05:10:46.860

我知道提问*者没有要求***Java-openCV**中的函数，但我仍然想展示如何在 Java 中执行此操作，因为：

> 1.  Java中的“sum”函数的名称完全不同，并且在*不同*的类中
> 2.  Java openCV API 示例很少

在 Java openCV 中打印总和的代码是：

```
Core.sumElems(myMat); 
```

很明显，它*不是“***标量**”类的函数，它的名字*不是* `sum()`.

# java - 在 EXIT_ON_CLOSE JFrame 上调用 windowClosed

> ID：10156048
> 
> 赞同：2
> 
> 时间：2012-04-14T18:09:42.230
> 
> 标签：java, swing, windowlistener, resource-cleanup

我有一个小问题。

我的 Java 应用程序拥有一些本地资源。我想在退出应用程序之前释放这些资源。因此我写了一个`WindowListener`释放这些资源的`windowClosed`事件。

问题是我有一个`JFrame`with `EXIT_ON_CLOSE`，所以当我关闭窗口时，它会关闭 JVM 并且事件永远不会到达我。

如果我使用`windowClosing`事件，那么在我释放资源后，实际上有人可以覆盖关闭事件。这将导致本机代码中的段错误。

我可以收起听者的`EXIT_ON_CLOSE`and 呼叫`System.exit(0)`，但这对我来说似乎并不干净。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:18:52.333

您也许可以添加一个关闭挂钩并释放那里的本机资源？`Runtime.getRuntime().addShutdownHook(Thread t)`. [在此处](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)查看更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:19:09.760

`JFrame`您可以在释放资源之前隐藏它，`windowClosing`这样您就可以确保它不会被打断

# php - Facebook API 不返回所有带有访问令牌的公共页面墙贴

> ID：10156052
> 
> 赞同：0
> 
> 时间：2012-04-14T18:10:36.683
> 
> 标签：php, facebook

我正在使用 PHP Facebook API，但它不会使用有效的访问令牌从我的公共页面返回所有墙贴——而且我无法弄清楚这些帖子有什么特别之处。它们都是由我，页面所有者制作的 - 有什么想法吗？

仅供参考，无效的帖子包含： [https](https://www.facebook.com/events/205819312854732/) ://www.facebook.com/events/205819312854732/ https://www.facebook.com/events/207820205995213/

PHP 是： $wall = $validFacebookObject->api('/184196778359304/feed?access_token=".$validToken','GET');

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:39:43.083

您无法在一次通话中获得所有帖子。如果您查看响应的底部，您会看到：

```
"paging": {
    "previous": "https://graph.facebook.com/184196778359304/feed?format=json&limit=25&since=1334425968&__previous=1",
    "next": "https://graph.facebook.com/184196778359304/feed?format=json&limit=25&until=1331389779"
  } 
```

您可以使用“下一个”和“上一个”URL 来解析帖子，或者在您的调用中包含“限制”和“偏移”参数（即：graph.facebook.com/PAGE_ID/feed?limit=100&offset=500&access_token =ACCESS_TOKEN 将获得帖子 501 到 600)

# asp.net-mvc - 如何在 DbDataController 中使用业务验证？

> ID：10156055
> 
> 赞同：3
> 
> 时间：2012-04-14T18:10:46.033
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, singlepage

ASP.NET MVC 4 的默认单页应用程序模板中有一个 crud 操作，如下所示。

upshot.js 与来自 DbDataController 操作的响应进行交互，如果操作失败，则 upshot.js 会出现验证错误，并且能够在客户端显示。

我需要做的是把我自己的业务规则放在操作中。但尚不清楚在 DbDataController 中将验证错误放在何处。

例如：`InsertEntity(entity);`如果操作失败，则操作可以放置验证错误，并将验证错误自动发送到客户端。但是如果发生，我想把我的业务验证错误。那么我可以把它放在哪里呢？

```
public partial class TasksSPAController : DbDataController<MvcApplication8.Models.TasksSPAContext>
{
    public IQueryable<MvcApplication8.Models.TodoItem> GetTodoItems() {
        return DbContext.TodoItems.OrderBy(t => t.TodoItemId);
    }

    public void InsertTodoItem(MvcApplication8.Models.TodoItem entity) {
            //before this action i want to check business validation rules.
            // if it is not validated so i want to put errors to response 
            // that is usable by upshot.js
            InsertEntity(entity);
    }

    public void UpdateTodoItem(MvcApplication8.Models.TodoItem entity) {
        UpdateEntity(entity);
    }

    public void DeleteTodoItem(MvcApplication8.Models.TodoItem entity) {
        DeleteEntity(entity);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:04:16.863

检查[Fluent Validation](http://fluentvalidation.codeplex.com/wikipage?title=mvc)，没有比这更好更简单的了！

# c# - C# GetHashCode 有两个 Int16，也只返回 Int32？

> ID：10156059
> 
> 赞同：1
> 
> 时间：2012-04-14T18:11:22.567
> 
> 标签：c#, hash, int, gethashcode, int32

很抱歉将两个问题合二为一，它们是相关的。

`HashCode`s 代表`HashSet`s 等。据我了解，它们必须是唯一的，不能更改，并且将对象的任何配置表示为单个数字。

我的第一个问题是，对于我的对象，包含两个 Int16`a`和，我认为返回类似于n 是一个大数的东西`b`是否安全？`GetHashCode``a * n + b``Math.Pow(2, 16)`

也`GetHashCode`似乎不灵活地专门返回 Int32 类型。

32bits可以存储，例如两个Int16，一个unicode字符或16个N、S、E、W罗盘方向，数量不多，即使是一些小的节点图也可能太多了。这是否代表 C# Hash 集合的限制？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T18:14:05.133

> 据我了解，它们必须是独一无二的

没有。对于大多数类型来说，它们不可能是唯一的，它们可以有超过 2 ^(32 个)可能的值。理想情况下，如果两个对象具有相同的哈希码，那么它们*不太可能*相等 - 但您永远不应该假设它们*是*相等的。重要的一点是，如果它们有*不同的*哈希码，它们肯定是*不相等*的。

> 我的第一个问题是，对于包含两个 Int16 a 和 b 的对象，我的 GetHashCode 返回类似 a * n + b 之类的东西是否安全，其中 n 是一个大数，我想也许是 Math.Pow(2, 16) .

如果*它只*包含两个`Int16`值，那么使用起来最简单：

```
return (a << 16) | (ushort) b; 
```

然后该值*将*是唯一的。万岁！

> 也`GetHashCode`显得不灵活地返回具体类型`Int32`。

是的。诸如`Dictionary`和之类的类型`HashSet`需要能够使用固定大小，以便他们可以使用它来将值放入存储桶中。

> 32bits可以存储，例如两个Int16，一个unicode字符或16个N、S、E、W罗盘方向，数量不多，即使是一些小的节点图也可能太多了。这是否代表 C# Hash 集合的限制？

如果这*是*一个限制，那将是 .NET 限制而不是 C# 限制 - 但不，这只是对哈希码的含义的误解。

Eric Lippert 有一篇出色的（显然）[博客文章`GetHashCode`](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)，您应该阅读它以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T18:14:51.577

`GetHashCode`对于对象的每个实例来说不是（也不能是）唯一的。以`Int64`为例；即使散列函数是完美分布的，也会有*240 亿个*~~s~~ 散列到每个值，因为正如你提到的，散列码只是一个. *`Int64``Int32`*

 *然而，这并不是对使用哈希码的集合的限制；它们只是将桶用于哈希到相同值的元素。因此，不能保证对哈希表的查找是单个操作。获取正确的存储桶是一个操作，但该存储桶中可能有多个项目。*

# html - 我如何（否则）使 SVG 可点击以进行链接？

> ID：10156065
> 
> 赞同：1
> 
> 时间：2012-04-14T18:12:01.843
> 
> 标签：html, hyperlink, svg

我正在使用 object 来嵌入一些我想引用到其他页面的 SVG。

**第一个选项**是更改内部的 xml 请参阅 Inkscape FAQ-s 1.8.1 [http://wiki.inkscape.org/wiki/index.php/Frequently_asked_questions](http://wiki.inkscape.org/wiki/index.php/Frequently_asked_questions)

但是如果他们启用了js，我想使用javascript动态更改url。并且我想重用相同的 SVG 文档，但使用不同的链接。所以我需要另一种选择。

**第二个选项**，将嵌入对象包装在“a href”标签中，但这似乎不起作用，它使 SVG 未覆盖的 div 部分成为可点击的链接，而不是 svg。

{更复杂，因为在对象内部我有一个 .png（使用 usemap 可点击），如果浏览器退回到我会得到两个可点击区域。PNG 和 DIV 余数....}

**第三个选项**，一个用于 svg 本身的 USMAP！不，这似乎也不起作用。

还有其他选择吗？欢迎使用 Javascript 回答，仅供参考，但最好不要。

编辑以添加 HTML 代码

```
<object class="svg" type="image/svg+xml" data="svgimage.svg" >
    <img src="pngbackupforIEpre9androidpre3.png" type="image/png" usemap="#mapping"/>
</object>
</a>
<map name="mapping">
<area shape="rect" coords="0,0,100,100" href="svgfreezone.php" />
</map> 
```

编辑以添加 SVG XML 代码

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->
<svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="100%" viewBox="0 0 617.875 320.75" width="100%" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/">
<metadata>
<rdf:RDF>
<cc:Work rdf:about="">
<dc:format>image/svg+xml</dc:format>
<dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
<dc:title/>
</cc:Work>
</rdf:RDF>
</metadata>
<g transform="translate(-66.78125,-339.125)">
<rect style="stroke:#000000;stroke-miterlimit:4;stroke-dasharray:none;stroke-width:3.5999999;fill:#ff0000;" height="317" width="614" y="341" x="68.6"/>
</g>
</svg> 
```

笔记; svg 已被清空 def'd，保存为普通格式，然后使用“简化颜色 Y，样式为 xml N，分组折叠 Y，启用 ID 剥离 Y，嵌入栅格 N，保留编辑器数据 N，启用视图框 Y，剥离 xml prolog N，设置精度 3，无缩进。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:53:48.157

好吧，我看到两个选择：

**第一个选项：（**这只有在这是一个网络应用程序时才会有用；如果它是一个“常规”网站，这可能不适合您）在 SVG 中使用常规的**href**，它链接到一个锚点。那是 - #something 网址。只是一个哈希。现在使用您可以识别的“特殊”哈希，然后挂钩到窗口的“hashchange”事件，并查看哈希 == '#my_special_hash' - 然后重定向到您喜欢的任何地方。

**第二种选择：** 在 SVG 中放置一个占位符 href，并使用 JavaScript 读取 SVG 内容。然后将 href 替换为您真正想要的 url，并将其注入页面。大多数浏览器都支持 SVG 作为源图像和对象。如果您需要实际代码，可以查看[Raphael](http://raphaeljs.com/)库如何构建 SVG。请注意，由于某些旧浏览器缺乏支持，它使用 VML 作为后备。

祝你好运！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T17:31:04.823

将`background-image`锚上的 css 属性设置为 svg 图像，它将是可点击的。

我在[这个页面](http://wholcomb.github.io/SimpleSignaling/)中使用了一个。

```
#infoButton {
  display: block;
  float: left;
  background-image: url('info.svg');
  background-repeat: no-repeat;
  width: 70px;
  height: 70px;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-11T09:37:43.140

一定要`display: block;`在使用 SVG 时始终放置一些浏览器不能正确支持 SVG。

# android - clipChilren 设置为 false 仍然剪辑

> ID：10156067
> 
> 赞同：9
> 
> 时间：2012-04-14T18:12:51.317
> 
> 标签：android, imageview, imagebutton

我正在使用翻译动画将鸡蛋（ImageButton）移出纸箱（ImageView），但它一直在剪裁，所以我查看了整个stackoverflow以找到解决方案，但在尝试实现所有解决方案之后，它仍然是剪辑。

任何人都可以阐明为什么我的仍在剪辑，这里是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:gravity="top" 
  android:clipChildren="false"
  android:clipToPadding="false" 
  android:layout_height="match_parent">
<ImageButton 
  android:id="@+id/imageButton1" 
  android:background="@drawable/transparentblackbackground" 
  android:layout_below="@+id/relativeLayout1" 
  android:layout_height="match_parent" 
  android:layout_width="match_parent"
  android:clipChildren="false" android:clipToPadding="false" >
</ImageButton>

<!-- Total Carton for Animation -->
<RelativeLayout
    android:orientation="vertical"
    android:layout_width="440dp"
    android:id="@+id/opencarton" 
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:clipChildren="false"
    android:clipToPadding="false" >

    <!-- The carton that holds the eggs -->
    <RelativeLayout 
        android:orientation="vertical"
        android:layout_width="260dp"
        android:id="@+id/opencarton" 
        android:layout_height="512dp"
        android:layout_centerInParent="true"
        android:clipChildren="false"
        android:clipToPadding="false">

        <ImageButton 
          android:id="@+id/blackbgnd" 
          android:background="@drawable/clearbackground"
          android:layout_height="600dp" 
          android:layout_width="400dp"
          android:clipChildren="false" 
          android:clipToPadding="false"
          android:gravity="center">
        </ImageButton>

        <!-- Top of Carton image -->
        <ImageView 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:id="@+id/topcomponent" 
            android:src="@drawable/topofcarton" 
            android:layout_alignParentTop="true" 
            android:layout_alignParentRight="true"
            android:clipChildren="false"
            android:clipToPadding="false">
        </ImageView>

        <!-- First Row Of eggs goes here in future -->    
        <ImageButton android:clipChildren="false" android:clipToPadding="false" android:layout_height="158dp" android:id="@+id/egg1" android:background="@drawable/goldegg" android:layout_width="79dp" android:layout_alignTop="@id/topcomponent" android:layout_alignParentLeft="true" android:layout_marginLeft="10dp" android:layout_marginTop="3dp"></ImageButton>
        <ImageButton android:clipChildren="false" android:clipToPadding="false" android:layout_height="158dp" android:id="@+id/egg2" android:background="@drawable/goldegg" android:layout_width="79dp" android:layout_alignTop="@id/topcomponent" android:layout_alignParentLeft="true" android:layout_marginLeft="90dp" android:layout_marginTop="3dp"></ImageButton>
        <ImageButton android:clipChildren="false" android:clipToPadding="false" android:layout_height="158dp" android:id="@+id/egg3" android:background="@drawable/goldegg" android:layout_width="79dp" android:layout_alignTop="@id/topcomponent" android:layout_alignParentLeft="true" android:layout_marginLeft="170dp" android:layout_marginTop="3dp"></ImageButton>

       ................ 

</RelativeLayout>
</RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T16:20:01.343

好的，我浪费了大约一个小时来解决类似的问题。

我想您正在使用一些转换“手动”为对象设置动画，并调用 postInvalidateDelayed() 或类似方法来强制刷新。

问题是（对我来说）您需要在顶视图上调用它，否则画布会自动剪切到您正在刷新的项目。因此，在最顶层视图上调用 invalidate() （或类似方法）应该会导致使用未剪裁太多的画布重绘。

在您的情况下，我注意到您定义了两个“opencarton”id，您可能应该刷新顶部的一个或最顶部的 RelativeLayout。

# actionscript-3 - 用于 Xbox 和其他游戏机的 flash as3 发布

> ID：10156068
> 
> 赞同：1
> 
> 时间：2012-04-14T18:13:17.103
> 
> 标签：actionscript-3, apache-flex, xbox

是否可以从 as3 air 发布到 xbox 或任何其他游戏机？

谢谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:48:18.613

不，目前还没有。最接近的东西是 AIR for TV

[http://www.adobe.com/devnet/air/air-for-tv.html](http://www.adobe.com/devnet/air/air-for-tv.html)

[http://www.slideshare.net/eladnyc/developing-deploying-air-applications-for-tv](http://www.slideshare.net/eladnyc/developing-deploying-air-applications-for-tv)

# bash - 如何拆分用制表符分隔的 bash 变量的各个部分？

> ID：10156071
> 
> 赞同：0
> 
> 时间：2012-04-14T18:13:39.013
> 
> 标签：bash, tabs, quotes

我想提取名为 $DequeuedItem 的 bash 脚本变量中的字段。字段以制表符分隔。

我尝试了以下句子：

`DequeuedItemF1=$(echo $DequeuedItem | cut -f1)`

但是 DequeuedItemF1 获得了整个 $DequeuedItem，并且似乎制表符变成了常规空格。echo 命令是否在流到达 cut 命令之前对选项卡进行转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:18:54.573

当您`echo`使用未引用的变量时，制表符将更改为空格。双引号将保留选项卡：

```
DequeuedItemF1=$(echo "$DequeuedItem" | cut -f1) 
```

如果 不`DequeuedItem`包含内部空格，您也可以使用

```
DequeuedItemF1=$(echo $DequeuedItem | cut -d\  -f1) 
```

但第一个选项更清晰，更健壮。（请注意，反斜杠后面有两个空格。反斜杠转义第一个空格，成为 的分隔符`cut`，第二个空格将`-d`选项与`-f`选项隔开。令人困惑，更有理由使用另一个选项！）

# html - 将在 Outlook 2007/2010 中正确呈现的 HTML

> ID：10156077
> 
> 赞同：0
> 
> 时间：2012-04-14T18:14:27.527
> 
> 标签：html, css, outlook-2010

我目前使用以下 HTML 来呈现如下所示的图像。但是，这在 Outlook 中不起作用，因为不支持背景图像。我被提示使用表格在 Outlook 中正确呈现元素，但不知道如何去做。提供将在 Outlook 2007/2010 中正确呈现以下图像的 html 的人可获得 200 赏金”

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Render this</title>
    <style type="text/css">
        div, p {
            margin:0;
            padding:0;
            font-family: Helvetica;
            font-size:14px;
            color:#000;
            font-weight:bold;
        }
        div.box {
            padding:15px;
            width:272px;
            height:155px;
            border:2px solid #000;
            background-color:rgb(255,232,0);
        }
        div.box div.inner {
            height:100%;
            background:url("https://s3.amazonaws.com/signoffmainbucket/8CA8EC1A-C1C5-4390-9FC4-649648AA26C8.jpg") bottom right no-repeat;
        }
        p.name {
            margin-bottom:65px;
        }
    </style>
</head>
<body>
    <div class="box">
        <div class="inner">
            <p class="name">John</p>
            <p>XYZ Company</p>
        </div>
    </div>
</body>
</html> 
```

![在此处输入图像描述](../Images/c2223043481a0612e67536420a24c3bd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T20:21:56.417

```
 <!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Render this</title>
    <style type="text/css">
        p {
            margin:0;
            padding:0;
            font-family: Helvetica;
            font-size:14px;
            color:#000;
            font-weight:bold;
        }
        table {
            padding:15px;
            width:272px;
            height:155px;
            border:2px solid #000;
            background-color: #fee800;
        }
        p.name {
            margin-bottom:65px;
        }
    </style>
</head>
<body>
<table>
<tr><td>John Smith</td><td></td></tr>
<tr><td><p>XYZ Company</p></td><td><img src="https://s3.amazonaws.com/signoffmainbucket/8CA8EC1A-C1C5-4390-9FC4-649648AA26C8.jpg" /></td></tr>
</table>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T07:48:16.820

对于电子邮件您应该使用表格，并且不要在头部或不同的 CSS 中使用 CSS。尝试使用和内联 CSS。

```
<table bgcolor="#fee800" border="0" cellpadding="0" cellspacing="0" width="272" height="155" style="border: 2px solid #000; padding: 15px;">
    <tr>
        <td><font face="Helvetica, Arial, sans-serif" style="font-size: 14px;"><b>John</b></font></td><td>&nbsp;</td>
    </tr>
    <tr>
        <td><font face="Helvetica, Arial, sans-serif" style="font-size: 14px;"><b>XYZ Company</b></font></td><td><img src="https://s3.amazonaws.com/signoffmainbucket/8CA8EC1A-C1C5-4390-9FC4-649648AA26C8.jpg" alt="" /></td>
    </tr>
</table> 
```

# c - 我应该在项目开始时考虑 GUI 吗？

> ID：10156078
> 
> 赞同：1
> 
> 时间：2012-04-14T18:14:49.937
> 
> 标签：c, windows, user-interface

我想在其中启动一个**Process Manager**项目，`C`并且假设它有一个*Graphical User Interface*。这是我的第一个*GUI*项目，我对此一无所知。经过一些搜索，我发现我应该使用`winapi32`库。

我的问题是：

*我应该像基于控制台的*项目那样编写我的项目，然后向它添加 GUI，还是应该在项目开始时考虑*GUI ？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:26:04.903

我想说最好将应用程序编写为命令行应用程序，然后在 GUI 中编写一个包装器。通过这种方式，您可以获得最灵活的应用程序，GUI 和功能完全分离。

但我不会说！:-) 根据我的经验，将 GUI 与应用程序完全分开是非常困难的，因此您应该在构建它时考虑到 GUI。您的代码必须打开窗口、报告进度、对 GUI 事件做出反应，因此您必须非常熟悉您使用的 GUI 系统。

但是您还必须尽可能地保持 GUI 和功能之间的分离。例如，使您的回调简短，并将功能指向应用程序的非 GUI 部分。如果您需要在长时间计算期间报告进度，请将回调传递给计算算法，而不是在算法中混合 GUI 进度命令。

您还必须记住，大多数（如果不是全部）GUI 系统只能在主应用程序线程中执行 GUI 命令，并相应地构建程序。

总而言之 - 是的，一开始就考虑 GUI，这样会更容易，但也要在 GUI 和功能之间保持良好的分离，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T18:19:41.487

为什么在开发过程中更改程序？只需将其设计为最终应有的样子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T18:23:00.783

您可以设计您的程序，使您能够同时使用文本和图形用户界面。为核心功能提供一个抽象的界面，并从文本和图形界面中使用它。

如果你想从上到下而不是自下而上开始，你应该选择你喜欢的任何东西，从调用你界面的存根版本的文本或图形界面开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T18:24:25.077

*为什么要把你的项目写成一个基于控制台的项目，因为它最终会得到一个 GUI？*

如果有任何事情您想先尝试一下（比如您不知道如何做 a、b 或 c），请确保您可以将其作为一个辅助项目来实现。

* * *

但就您的主要项目而言，**这就是我要做的：**

1.  精心**规划和设计**

    *   **它要做什么**？****
    ***   **你**打算怎么做？*   **用户界面**应该包含什么才能完全满足您的需求**
***   编码*   测试和调试。*   重复 2 和 3 直到完全满意。**

 *** * *

**暗示 ：**

> *   **答：**我不建议您将 GUI 添加到现有的控制台应用程序中，因为这很可能会导致代码混乱和/或 UI 混乱。;-)
>     
>     
> *   **B.**在尝试实施任何事情之前总是先**学习。**你根本无法想象**你对能做什么的了解会影响你能做什么*（很可能你最终会做什么）***。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T19:42:43.020

如果要制作用户界面，可以使用`QTCreator`Visual Studio 或表单项目...

`QT`是制作跨平台和可爱界面的绝佳方式...`Visual Studio`表单仅适用于 Windows 平台。

当您使用任何这些技术时，您必须将“组件”放在“窗口”中，然后对它们进行编码......**

# android - Android 与桌面应用程序的连接

> ID：10156080
> 
> 赞同：0
> 
> 时间：2012-04-14T18:14:55.647
> 
> 标签：android

目前我正在ubuntu 11.10系统上构建一个移动应用程序。为了检查手机上的本地应用程序，我正在使用模拟器。是否可以通过我的android手机检查本地应用程序。通过模拟器我正在通过10.0.2.2:3000访问我的应用程序.对于安卓手机怎么办

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:28:55.823

在 android 开发指南中阅读[使用硬件设备。](http://developer.android.com/guide/developing/device.html)

您还需要在您的设备上启用 ADB，然后使用 USB 将其插入。根据您的设备，您可能需要为它找到一些 ADB 驱动程序。

# listview - 使用 jQuery Mobile 的多行列表视图项目

> ID：10156081
> 
> 赞同：0
> 
> 时间：2012-04-14T18:14:56.100
> 
> 标签：listview, jquery-mobile, multiline, listviewitem

我无法弄清楚如何在 jQuery Mobile 中执行多行列表视图项目，如下图所示（一些附加信息......）

图片： [https ://lh3.googleusercontent.com/-GSNEPObTo2c/T4m9GbfAcgI/AAAAAAAABec/fot1TgehC6w/s279/Bildschirmfoto%25202012-04-14%2520um%252020.01.37.png](https://lh3.googleusercontent.com/-GSNEPObTo2c/T4m9GbfAcgI/AAAAAAAABec/fot1TgehC6w/s279/Bildschirmfoto%25202012-04-14%2520um%252020.01.37.png)

有任何想法吗？

非常感谢，雅各布

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T02:18:29.170

如果您的`li`商品使用以下格式：

```
<li>
    <a href="first.html">
      <h3>First line</h3>
      <p>Whatever goes on the second line</p>
    </a> </li> 
```

然后将以下内容添加到您的 CSS 中：

```
.ui-li-desc {white-space:normal;}​ 
```

例如，请参阅此[jsFiddle](http://jsfiddle.net/KNLUh/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:48:35.377

试试这个：

```
<ul data-role="listview" data-theme="g">
  <li>
    <a href="first.html">
      <h3>First line</h3>
      <p>Whatever goes on the second line</p>
    </a>
  </li>
  <li>
    <a href="second.html">
      <h3>Second line</h3>
      <p>Whatever goes on the second line</p>
    </a>
  </li>
</ul> 
```

这是大多数 jQuery Mobile 示例中使用的标准方式。它甚至会处理第二行的省略号截断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-10T01:12:44.123

```
.ui-listview > li p {
    white-space: normal;
} 
```

将此代码添加到您自己的 CSS 文件中。有用！

# java - 我应该使用几个 glDrawArrays() 还是将所有顶点收集到一个大 glDrawArrays 调用？

> ID：10156082
> 
> 赞同：4
> 
> 时间：2012-04-14T18:14:58.543
> 
> 标签：java, opengl, jogl, vertex-array

我正在开发一个个人 Java OpenGL (JOGL) 项目，并且正在使用一些具有单独绘制函数和顶点的自定义对象。

```
public class Cube extends PhysicalObject {

 public void draw(GL gl) {

         gl.glColor3f(1.0f, 1.0f, 0.0f);

         gl.glEnableClientState(GL.GL_VERTEX_ARRAY);  // Enable Vertex Arrays

            gl.glEnableClientState(GL.GL_TEXTURE_COORD_ARRAY);  

            gl.glVertexPointer(3, GL.GL_FLOAT, 0, vertices); 

            gl.glTexCoordPointer(2, GL.GL_FLOAT, 0, texCoords); 

            gl.glDrawArrays(GL.GL_QUADS, 0, 4*6);  

            gl.glDisableClientState(GL.GL_VERTEX_ARRAY);  

            gl.glDisableClientState(GL.GL_TEXTURE_COORD_ARRAY); 

} 
```

然后我遍历一大堆这些立方体，调用它们的绘制函数。我的问题如下：我是否应该将所有顶点收集到一个大 glDrawArrays 调用，即将所有顶点收集到一个大数组并绘制它？它对性能和fps有很大帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T19:22:43.703

一般规则是尽量减少 OpenGL 调用的数量，尤其是在 Java 或 C# 等与本机代码交互存在开销的语言中。但是，如果它们的任何属性会发生变化（应用不同的模型矩阵、具有不同的颜色等），则不应将不同的对象组合在一起，因为不可能将两个单独的模型矩阵应用于同一绘图的不同部分称呼。所以基本上，如果你所有的多维数据集都不会改变，最好将它们全部组合在一起，否则将它们分开。

另一件对性能有帮助的事情是尽量减少状态更改的次数。如果您要绘制 10,000 个立方体，请将`glEnableClientState`and`glDisableClientState`调用移出 cube`draw`方法，并且仅在绘制所有立方体之前/之后调用它们。如果它们都使用相同的纹理，请在开始时绑定纹理一次并在结束时取消绑定一次。

哦，如果您真的担心性能，大多数计算机（甚至是使用 2 年的上网本）都支持 OpenGL 1.5，因此将数据移动到[VBO](http://en.wikipedia.org/wiki/Vertex_Buffer_Object)会给您带来显着的性能优势。如果你在做类似*Minecraft*的东西，那么最好的优化方法是遍历所有的立方体，只绘制表面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:18:05.043

如果您关心的是性能，我认为您提出的任何一个实现都不会看到很大的变化......

根据我过去的经验，可以提高性能的一件事是使用 List（肯定会有更好的内存性能）。

这是一个很好的[Opengl 瓶颈](http://developer.amd.com/media/gpu_assets/PerformanceTuning.pdf)pdf

# javascript - 带有“onkeypress”滞后的jQuery进行更改

> ID：10156087
> 
> 赞同：0
> 
> 时间：2012-04-14T18:15:43.900
> 
> 标签：javascript, jquery

我有一个包含文本的跨度，假设在我按下文本框中的某些内容后会不断变化。

```
<input type="text" class="response" onkeypress="return ChangeSpan()" id="how_many" name="how_many" placeholder="Enter how many..." /> 
```

和我的 jQuery：

```
<script type="text/javascript">
function ChangeSpan() {
    var text = $("#how_many").val();
    $('#changeText').text(text);
}
</script> 
```

它工作得很好，但是当我按下让我们说时`"dfg"`，它只出现`"df"`在跨度上。只有当我添加下一个字符时，它才会添加`"g"`.

我希望它也响应最后一个字符，我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T18:20:29.980

您可能想使用[keyup](https://developer.mozilla.org/en/DOM/element.onkeyup)。

您使用 jQuery 并内联添加事件？那是不好的做法。使用 on 附加事件。

```
$("#how_many").on("keyup", function(){ $('#changeText').text( this.value ); }); 
```

[quirksmode](http://www.quirksmode.org/dom/events/keys.html)上解释了 keyup、keydown 和 keypress 之间的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:23:28.680

是的，我可能会迟到一点，但实际上使用`keypress`比`keyup`因为如果你按住一个键很长时间它会在你释放它时出现，如果你使用`keyup`.

如果您使用`keypress`，您将直接看到您输入的内容，但您必须使用它，如下面的代码所示。

唯一的问题是，`keypress`如果您删除字符，它将无法识别。所以`keypress`更好，但`keyup`也应该使用。

```
$("#how_many")
    .keypress(function(e) {
        var text = $("#how_many").val() + String.fromCharCode(e.which);
        $("#changeText").text(text);
    })
    .keyup(function(e) {
        var text = $("#how_many").val();
        $("#changeText").text(text);
    });​ 
```

看看[这个](http://jsfiddle.net/kajhD/)例子。就是之前的代码。

还有[这个](http://jsfiddle.net/kajhD/1/)例子。这是之前的代码，没有使用`keypress`.

在文本框处于焦点时按住两个示例中的任意字符键。如您所见，第一个示例反应更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T18:19:30.500

```
<input type="text" class="response" onkeyup="return ChangeSpan()" id="how_many" name="how_many" placeholder="Enter how many..." /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T18:20:43.650

为什么不直接使用绑定？这应该这样做：

```
<input type="text" class="response" id="how_many" name="how_many" placeholder="Enter how many..." />

$(window).load(function(){
   $("#how_many").bind('focus blur keyup',function(){
     $('#changeText').text($(this).val());
   }); 
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T18:30:19.410

尝试将您的事件更改为 keyup。这是一个例子：

[http://jsfiddle.net/SHdTL/](http://jsfiddle.net/SHdTL/)

注意：我建议使用 jquery 来分配您的事件侦听器，而不是内联，但这与您的问题无关。

# java - 使用套接字的 Android 客户端和 PC 服务器通信

> ID：10156088
> 
> 赞同：2
> 
> 时间：2012-04-14T18:16:00.833
> 
> 标签：java, android, sockets

我在同一台 PC 上的 android 模拟器和服务器（java）上运行客户端，并且正在使用套接字编程。下面附上代码。单独两者都运行良好，但实际数据传输没有发生，我无法弄清楚。

服务器端（PC）：

```
import java.net.*;
import java.io.*;

public class Server_tcp {
    void run(){
        {
            try {
                System.out.println("In 1st try blck");
                try {
                    System.out.println("In 2nd try blck");
                    Boolean end = false;
                    ServerSocket ss = new ServerSocket(4444);
                    System.out.println("socket created");
                    while(!end){
                        //Server is waiting for client here, if needed
                        Socket s = ss.accept();
                        System.out.println("socket accepted");
                        BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));
                        PrintWriter output = new PrintWriter(s.getOutputStream(),true); //Autoflush
                        String st = input.readLine();
                        System.out.println("Tcp Example" + "From client: "+st);
                        output.println("Good bye and thanks for all the fish :)");
                        s.close();
                        if (st==null){ end = true; }
                    }
                    ss.close();
                } catch (UnknownHostException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } catch (IOException exp) {
                // TODO Auto-generated catch block
                exp.printStackTrace();
            }
        }
    }
    public static void main(String args[])
    {
        Server_tcp server = new Server_tcp();
        while(true){
            server.run();
        }
    }
} 
```

客户端（安卓）：

```
package com.try3;
import android.app.Activity;
import android.os.Bundle;
import android.widget.EditText;

import java.io.*;
import java.net.*;

public class ClientTCPActivity extends Activity {
/** Called when the activity is first created. */

    private EditText et;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        System.out.println("Before try net");
        trynet();
        System.out.println("after try net");
    }
    public void trynet() {
        System.out.println("inside try net");
        try {
            System.out.println("inside try");
            Socket s = new Socket("127.0.0.1",4444);

            //outgoing stream redirect to socket
            OutputStream out = (OutputStream) et.getContentDescription();

            PrintWriter output = new PrintWriter(out);
            output.println("Hello Android!");
            BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));

            //read line(s)
            String st = input.readLine();
            System.out.println(st);

            //Close connection
            s.close();

            System.out.println(" try ");
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:13:10.280

在 Android Emulator 中，您应该指的是使用 10.0.2.2 而不是 127.0.0.1 的 PC

我不明白你想在这里做什么。

```
OutputStream out = (OutputStream) et.getContentDescription();
PrintWriter output = new PrintWriter(out); 
```

你的意思是这样的：

```
PrintWriter output = new PrintWriter(s.getOutputStream(),true); 
```

??

# python - 如何检测文件是否使用 UTF-8 编码？

> ID：10156090
> 
> 赞同：11
> 
> 时间：2012-04-14T18:16:07.583
> 
> 标签：python, unicode, utf-8, character-encoding

有没有办法在 Python 中识别文本文件是否为 UTF-8？

我真的很想知道文件是否为 UTF-8。我不需要检测其他编码。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-14T18:19:47.543

您在评论中提到您只需要检测 UTF-8。如果您知道替代方案仅包含单字节编码，那么有一个通常有效的解决方案。

如果您知道它是 UTF-8 或单字节编码`latin-1`，请先尝试以 UTF-8 格式打开，然后再以其他编码格式打开。如果文件仅包含 ASCII 字符，则即使它原本打算作为其他编码，它最终也会以 UTF-8 打开。如果它包含任何非 ASCII 字符，这几乎总是能正确检测到两者之间的正确字符集。

```
try:
    # or codecs.open on Python <= 2.5
    # or io.open on Python > 2.5 and <= 2.7
    filedata = open(filename, encoding='UTF-8').read() 
except:
    filedata = open(filename, encoding='other-single-byte-encoding').read() 
```

最好的办法是直接使用[`chardet`来自 PyPI 的包](http://pypi.python.org/pypi/chardet)，或者通过`UnicodeDamnit`BeautifulSoup 使用包：

> # 夏德 1.0.1
> 
> *通用编码检测器*
> 
> 检测：
> 
> *   ASCII、UTF-8、UTF-16（2 个变体）、UTF-32（4 个变体）
> *   Big5、GB2312、EUC-TW、HZ-GB-2312、ISO-2022-CN（繁简体中文）
> *   EUC-JP、SHIFT_JIS、ISO-2022-JP（日语）
> *   EUC-KR、ISO-2022-KR（韩文）
> *   KOI8-R、MacCyrillic、IBM855、IBM866、ISO-8859-5、windows-1251（西里尔文）
> *   ISO-8859-2、windows-1250（匈牙利语）
> *   ISO-8859-5、windows-1251（保加利亚）
> *   windows-1252（英文）
> *   ISO-8859-7、windows-1253（希腊语）
> *   ISO-8859-8、windows-1255（视觉和逻辑希伯来语）
> *   TIS-620（泰语）
> 
> 需要 Python 2.1 或更高版本

但是，某些文件将在多种编码中有效，因此`chardet`不是灵丹妙药。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T18:20:38.120

可靠吗？不。

一般来说，一个字节序列没有意义，除非你知道如何解释它——这适用于文本文件，也适用于整数、浮点数等。

但是，有一些方法可以猜测文件的编码，通过查看字节顺序标记（如果有的话）和文件的第一个块（查看哪种编码产生最合理的字符）。该[`chardet`](http://pypi.python.org/pypi/chardet)库在这方面做得很好，但请注意它只是一种启发式方法，尽管它相当强大。

# mod-rewrite - 带有外部重定向和内部重写的 mod_rewrite

> ID：10156093
> 
> 赞同：1
> 
> 时间：2012-04-14T18:16:49.047
> 
> 标签：mod-rewrite, redirect, ssl

我正在尝试使用 mod_rewrite 重定向某些页面以使用 SSL。为此，我有：

```
RewriteCond %{SERVER_PORT} ^443$
RewriteCond %{REQUEST_URI} !^/login(\.php)?$ [NC]
RewriteCond %{REQUEST_URI} !^/contact-us(\.php)?$ [NC]
RewriteCond %{REQUEST_URI} !^/\..*$
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L]

RewriteCond %{HTTP_HOST} !^dev\.example\.com$ [NC]
RewriteCond %{SERVER_PORT} ^80$
RewriteCond %{REQUEST_URI} ^/login(\.php)?$ [NC,OR]
RewriteCond %{REQUEST_URI} ^/contact-us(\.php)?$ [NC]
RewriteRule ^(.+)\.php$ https://www.example.com/$1 [R=301,L] 
```

这很好用，并且完全符合我的要求。

后来在我的 .htacess 中，我有一个：

```
RewriteRule ^members/(.+)/change-password$ members/.change-password.php?item=$1 [NC,QSA,L] 
```

因此，如果 URL 显示为，例如：

```
http://www.example.com/members/foo-bar/change-password 
```

在内部它将被处理为：

```
/members/.change-password.php?item=foo-bar 
```

同样，这很好用，并且也在做我想做的事。

我现在需要做的是将此包含在我原来的 SSL 重定向逻辑中，以确保任何更改密码请求都被重定向到相同的 URL，但改为通过 https。我试过了：

```
RewriteCond %{SERVER_PORT} ^443$
RewriteCond %{REQUEST_URI} !^/login(\.php)?$ [NC]
RewriteCond %{REQUEST_URI} !^/contact-us(\.php)?$ [NC]
RewriteCond %{REQUEST_URI} !^/\..*$
RewriteCond %{REQUEST_URI} !^/members/.+/change-password [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L]

RewriteCond %{HTTP_HOST} !^dev\.example\.com$ [NC]
RewriteCond %{SERVER_PORT} ^80$
RewriteCond %{REQUEST_URI} ^/login(\.php)?$ [NC,OR]
RewriteCond %{REQUEST_URI} ^/contact-us(\.php)?$ [NC,OR]
RewriteCond %{REQUEST_URI} ^/members/.+/change-password [NC]
RewriteRule ^(.+)\.php$ https://www.example.com/$1 [R=301,L] 
```

但这不起作用 - 我只是通过 http 传递页面。更改`.+`to`.*`似乎让我进入了一个永久的重定向循环。

我猜这是因为内部重写，但无论我尝试什么，我似乎都无法解决它。

有人可以请教吗？

谢谢，

亚当 M。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:28:56.130

对 mod_rewrite 文档的进一步审查让我发现了一些我错过的特定于它在 .htaccess 文件中的用法。基本上，该`[L]`标志实际上并未按照规范指示最后一个。相反，您需要使用`[END]`标志（[http://httpd.apache.org/docs/current/rewrite/flags.html#flag_l](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_l)指）。

当然，这导致我遇到另一个问题 - 我的托管服务提供商没有最新的 Apache 或 mod_rewrite 安装，因此该`[END]`标志触发了普遍存在的 HTTP 500 内部服务器错误。

那么该怎么办？好吧，我回到原来的规则集，知道`[L]`没有按照我的预期做，并立即发现了错误 -`%{REQUEST_URI}`值已通过内部重写更新：

```
RewriteRule ^members/(.+)/change-password$ members/.change-password.php?url-slug=$1 [NC,QSA,L] 
```

因此，更改我原来的重定向逻辑以排除这解决了我的问题：

```
RewriteCond %{SERVER_PORT} ^443$
RewriteCond %{REQUEST_URI} !^/login(\.php)?$ [NC]
RewriteCond %{REQUEST_URI} !^/contact-us(\.php)?$ [NC]
RewriteCond %{REQUEST_URI} !^/\..*$
RewriteCond %{REQUEST_URI} !^/members/.+/change-password$ [NC] 
```

**`RewriteCond %{REQUEST_URI} !^/members/\.change-password(\.php)? [NC]`**

```
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L]

RewriteCond %{HTTP_HOST} !^dev\.example\.com$ [NC]
RewriteCond %{SERVER_PORT} ^80$
RewriteCond %{REQUEST_URI} ^/login(\.php)?$ [NC,OR]
RewriteCond %{REQUEST_URI} ^/contact-us(\.php)?$ [NC,OR]
RewriteCond %{REQUEST_URI} ^/members/.+/change-password$ [NC]
RewriteRule ^(.+)(\.php)?$ https://www.example.com/$1 [R=301,L] 
```

# python - Python 客户端-服务器脚本挂起，直到我按下 [enter]

> ID：10156095
> 
> 赞同：1
> 
> 时间：2012-04-14T18:17:05.477
> 
> 标签：python, sockets, network-programming, client

我在 Python 中有一个使用套接字的基本客户端-服务器脚本。服务器绑定到特定端口并等待客户端连接。当客户端连接时，他们会看到一个 raw_input 提示，该提示将输入的命令发送到服务器上的子进程，并将输出通过管道传回客户端。有时，当我从客户端执行命令时，输出会挂起并且不会向我显示 raw_input 提示，直到我按下 [enter] 键。起初我认为这可能是一个缓冲区问题，但是当我使用具有小输出的命令时会发生这种情况，例如“clear”或“ls”等。

客户端代码：

```
import os, sys
import socket
from base64 import *
import time

try:
    HOST = sys.argv[1]
    PORT = int(sys.argv[2])
except IndexError:
    print("You must specify a host IP address and port number!")
    print("usage: ./handler_client.py 192.168.1.4 4444")
    sys.exit()

socksize = 4096
server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
try:
    server.connect((HOST, PORT))
    print("[+] Connection established!")
    print("[+] Type ':help' to view commands.")
except:
    print("[!] Connection error!")
    sys.exit(2)

while True:
    data = server.recv(socksize)
    cmd = raw_input(data)
    server.sendall(str(cmd))

server.close() 
```

服务器代码：

```
import os,sys
import socket
import time
from subprocess import Popen,PIPE,STDOUT,call

HOST = ''                              
PORT = 4444
socksize = 4096                            
activePID = []

conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
conn.bind((HOST, PORT))
conn.listen(5)
print("Listening on TCP port %s" % PORT)

def reaper():                              
    while activePID:                        
        pid,stat = os.waitpid(0, os.WNOHANG)     
        if not pid: break
        activePID.remove(pid)

def handler(connection):                    
    time.sleep(3)     

    while True:                                     
        cmd = connection.recv(socksize)
        proc = Popen(cmd,
              shell=True,
             stdout=PIPE,
             stderr=PIPE,
              stdin=PIPE,
              )
        stdout, stderr = proc.communicate()

        if cmd == ":killme":
            connection.close()
            sys.exit(0)

        elif proc:
            connection.send( stdout )
            connection.send("\nshell => ")

    connection.close() 
    os._exit(0)

def accept():                                
    while 1:   
        global connection                                  
        connection, address = conn.accept()
        print "[!] New connection!"
        connection.send("\nshell => ")
        reaper()
        childPid = os.fork()                     # forks the incoming connection and sends to conn handler
        if childPid == 0:
            handler(connection)
        else:
            activePID.append(childPid)

accept() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:12:08.617

我看到的问题是客户端中的最后一个循环只做一个`server.recv(socksize)`，然后它调用`raw_input()`. 如果该`recv()`调用没有获得服务器在该单个调用中发送的所有数据，那么它也不会收集命令输出之后的提示，因此不会显示下一个提示。未收集的输入将位于套接字中，直到您输入下一个命令，然后它将被收集并显示。（原则上，可能需要多次`recv()`调用才能耗尽套接字并到达附加的提示，而不仅仅是两次调用。）

如果这是正在发生的事情，那么如果命令发送回超过一个缓冲区的数据（4KB），或者如果它以时间间隔的小块生成输出，以便服务器端可以将该数据分布在多个发送的合并速度不够快，客户端无法将它们全部收集到一个`recv()`.

要解决此问题，您需要让客户端执行尽可能多的`recv()`调用以完全耗尽套接字。因此，您需要想出一种方法让客户端知道套接字已耗尽服务器将在此交互中发送的所有内容。

最简单的方法是让服务器将边界标记添加到数据流中，然后让客户端检查这些标记以发现何时收集了来自当前交互的最终数据。有多种方法可以做到这一点，但我可能会让服务器在它发送的每个块之前插入一个“这是以下数据块的长度”标记，并在最后发送一个长度为零的标记块。

然后客户端主循环变为：

```
forever: 
    read a marker; 
    if the length carried in the marker is zero then 
        break; 
    else 
        read exactly that many bytes;. 
```

请注意，客户端在对其进行操作之前必须确保`recv()`完成标记；东西可以以任何大小的块从流套接字中出来，与将这些东西发送到发送方的套接字中的写入大小完全无关。

您可以决定是将标记作为可变长度文本（带有独特的分隔符）还是作为固定长度二进制（在这种情况下，如果客户端和服务器可以在不同的系统上，您必须担心字节序问题）发送标记。您还可以决定客户端是否应该在每个块到达时显示它（显然你不能`raw_input()`这样做），或者它是否应该收集所有块并在收集最后一个块后一次性显示整个东西.

# php - CodeIgniter如何连接多数据库

> ID：10156099
> 
> 赞同：1
> 
> 时间：2012-04-14T18:18:19.533
> 
> 标签：php, codeigniter

我有多个数据库连接

默认连接在 database.php

```
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = '';
$db['default']['database'] = 'ci_database';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

我有另一个连接，但我想在**模型**中配置这个另一个连接， 或者我可以将连接参数传递给 database.php 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:26:35.660

如果只有 CodeIgniter 涵盖了这就是他们的在线用户手册。等一下。他们是这样！

[http://ellislab.com/codeigniter/user_guide/database/connecting.html](http://ellislab.com/codeigniter/user_guide/database/connecting.html)

页面底部有一个标题为“连接到多个数据库”的部分。

# java - 可以在 Activity 中使用私有构造函数，以便我可以在变量上使用 final 修饰符吗？

> ID：10156100
> 
> 赞同：0
> 
> 时间：2012-04-14T18:18:38.050
> 
> 标签：java, android, android-activity

整个原始问题都是基于一个错误。您永远不能`final static FIELD`在构造函数中分配常量的值。如果可以的话，每次创建类的新实例时，静态 FIELD 的值都会*发生变化。*不是很最终！

相反，我可以做我一直在做的事情（并且可能会造成内存泄漏，我有很多东西要学），即使用一个`static`（但不是`final`）字段来指向我的 Activity 的最新实例（参见下面的代码示例）。正如下面关于内存泄漏的评论所指出的那样，我几乎可以肯定通过保留对旧 Activity 对象的引用来造成内存泄漏。

所以我最初的问题的答案真的归结为：这不是一件好事，因为将其他对象引用传递给我当前的 Activity 对象可以让他们阻止系统垃圾收集我的旧 Activity 对象！

无论如何，这是我原来的问题中提到的代码，答案和评论仍然在这里，所以其余的内容仅供参考。

```
public class MyActivity extends Activity {
  public final static MyActivity uI;
  public static MyActivity mostRecentUI;

  private MyActivity() { // this is the constructor
      // In my original post I had:
      // uI = this;  
      // but this is illegal code.  `final static anything;` cannot be assigned a 
      // value in the constructor, because it could be assigned a different value
      // each time the class is instantiated!  

      // Instead the best I can do is
      mostRecentUIobject = this;
      // and this name better describes what this static variable contains
  }

  @Override
  protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
  }
} 
```

添加了 4/15：@dmon 甚至评论构造函数将不会运行。它会，任何有任何疑问的人都可以运行这个测试活动：

```
public class TestActivityConstructor extends Activity {
    static long refTime = System.currentTimeMillis();
    static String staticExecution = "Static never executed\n";
    static String constructorExecution = "Constructor never executed\n";
    static String onCreateExecution = "onCreate never executed\n";

    static {
        staticExecution = "Static Execution at " + (System.currentTimeMillis() - refTime) + " ms\n";
    }

    public TestActivityConstructor() {
        constructorExecution = "Constructor Execution at " + (System.currentTimeMillis() - refTime) + "ms \n";
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        onCreateExecution = "onCreate Execution at " + (System.currentTimeMillis() - refTime) + "ms \n";
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ((TextView) findViewById(R.id.TV)).setText(staticExecution + constructorExecution + onCreateExecution);
    }
} 
```

显然，您需要一个带有名为 TV 的 textview 的简单 layout.xml。无需权限。您甚至可以享受旋转 android 以查看重新创建的应用程序的乐趣，这表明每次旋转屏幕时都会重新运行构造函数和 onCreate，但重新创建 Activity 时不会重做静态分配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:51:53.933

基本上回答你的问题标题的主要部分......

> 可以在 Activity 中使用私有构造函数...？

不。

我假设您是从以前的 Java 角度进入 Android 的，但是要了解 Android 的一件事是，`Activity`该类是少数几个特殊情况类之一，应该按照设计的方式继续工作。

当涉及到类时，不要关心构造函数的概念，`Activity`只需遵循足够有效的设计方法和应用程序基础即可。

如果您有在 Android 框架中不起作用的特定要求，请发布带有示例代码的问题，有人会解释如何解决它。

**编辑：**根据您对问题的更新...

```
public final static MyActivity uI; 
```

> 有了这个，我可以将“用户界面”对象作为 MyActivity.uI 引用，而不必通过调用链传递引用。

说真的……不要那样做。有完全充分、实用且安全的机制，可用于以最少的代码轻松处理任何情况，而不会以您尝试做事的方式“破坏”模型。

重复我在原始答案中所说的话 - Android`Activity`类是一个特例。的实例`Activity`及其方法/字段并不意味着可以由任何其他外部类直接访问。

如果您简单地接受 Android 框架的基础知识，您将帮自己一个忙，并省去很多麻烦。编写 Android 应用程序可能会涉及 Java，但并非所有“通用”Java 概念都适用，尤其是一些核心组件，例如`Activity`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T18:28:03.563

由于活动管理器实例化了您的 Acitivity，您可能不会调用您的构造函数 - 不确定这是否适用于私有构造函数 + final。

还有一些东西不能在构造时使用，因为你的活动在`onCreate`被调用之前没有完全初始化（比如 SharedPreferences）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T23:00:21.667

好吧，您的构造函数可能会被调用。但是，没有“单一”活动（不是真的），因此设置一个引用活动实例的最终变量并不是解决此问题的正确方法。例如，如果您支持方向更改，则该活动将被重新创建（正如您所发现的那样），并且您的最终参考是错误的。此外，由于您引用了已销毁的活动（不再使用），因此您刚刚泄露了该活动。恐怕您将不得不通过创建和实例化视图的常规方法。

无论如何，我认为一个更好的问题是你想要完成的事情的一个例子（以及为什么你觉得它如此麻烦），而不是试图回避已经存在的东西。

# c++ - 推荐在 Cocoa 应用程序中使用大型 C++ 库的方法？

> ID：10156105
> 
> 赞同：4
> 
> 时间：2012-04-14T18:19:00.383
> 
> 标签：c++, objective-c, c, objective-c++

我正在尝试开发一个可以“堆叠” FITS 图像的应用程序。要阅读 FITS 图像，我可以使用 CCFits（一个 C++ 库）或 CFITSIO（AC 库）——没有原生的 Objective-C 库。

我更喜欢使用 CCFits，因为它允许面向对象的设计，我希望这能让我更好地组织程序。我已经尝试过使用 CFITSIO，但一段时间后它变得相当笨拙（当然，这可能是因为我没有开发大型应用程序的经验）。

所以总的来说，解决这个问题的最佳方法是什么？我应该为 CFITSIO 函数编写包装器并编写自己的类吗？有没有办法在 Objective-C 中使用 C++ 类 - 该库包含相当多的类，我知道我可以使用不透明指针来环绕类，但是如何保留类继承之类的东西？我是否必须在 Objective-C 中手动子类化一个类并将子类包装在那里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:36:58.377

您可以使用 Objective-C++ 轻松混合 C++ 和 Objective-C。在 XCode 中，只需将 .m 文件重命名为 .mm，它就会将文件识别为 Objective-C++。然后你可以在你的 Objective-C 代码中使用 C++ 类（[有一些限制](http://en.wikipedia.org/wiki/Objective-C#Objective-C.2B.2B)，但不是很多）。

由于 Objective-C 是 C 的扩展，您可以轻松地在任何 Objective-C 程序中使用 C 库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T19:11:59.280

正如@myrkos 所说，混合C++ 和Objective-C 很容易。但是，请务必仔细阅读这两种语言的交互方式。特别是，您不能从 C++ 类继承 Objective-C 类，反之亦然（您似乎在问题中提到了这一点）。

这在实践中通常不是问题。

但是，它们组合得非常好（也就是说，您可以将 Objective-C 对象作为 C++ 类的成员，反之亦然——只要它都在 .mm 文件中）。如果您将 C++ 对象作为 Objective-C 类的 ivar*按值*保存，那么将自动为您调用构造函数和析构函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T20:10:49.940

> 所以总的来说，解决这个问题的最佳方法是什么？

使用您熟悉的变体 (CCFits)。

> 我应该为 CFITSIO 函数编写包装器并编写自己的类吗？

不。

> 有没有办法在 Objective-C 中使用 C++ 类 - 该库包含相当多的类，我知道我可以使用不透明指针来环绕类，但是如何保留类继承之类的东西？

Objective-C++ 允许您在同一个翻译中使用 C、Objective-C 和 C++ 程序，几乎没有问题。因此，您的实现可以根据需要混合 Cocoa 和 C++。C++ 类可以保存 ObjC 类型，而 ObjC 类型可以保存 C++ 类型。

> 我是否必须在 Objective-C 中手动子类化一个类并将子类包装在那里？

只需按原样使用 CCFits 库。将其包装在 ObjC 类型中几乎没有什么好处，而且会浪费*很多*时间。

如果您想在某些领域坚持使用严格的 ObjC，那么您将需要学习如何将 C++ 类型隐藏在 ObjC 接口后面（不是包装接口——只是应用程序使用 CCFits 的高级接口）。

# ruby-on-rails - Rails 路由行为怪异

> ID：10156106
> 
> 赞同：0
> 
> 时间：2012-04-14T18:19:08.813
> 
> 标签：ruby-on-rails, routes

突然间，我的 Rails 应用程序表现得很奇怪。如果我在编辑页面上附加图像并提交表单，`show`则会调用操作而不是更新操作。如果我不附上任何图像，那没关系。

### 路线

```
namespace :admin do
  resources :products do
    collection do
      get :download_images
      get :all_styles
      post :compress_images
    end
  end
end 
```

### 看法

```
%h1 Edit Product

= form_for [:admin, @product], :html => {:multipart => true} do |f|
  - if f.object.accessory?
    = render 'form_accessory', :f => f
  - else
    = render 'form', :f => f

[_form partial]
:javascript
  function exclusiveCheck(check_box) {
    if (check_box.checked) {
      $('#pictures_fieldset .is_main').attr('checked', false);
      check_box.checked = true;
    }
  }
- error_messages_for f.object

%fieldset.span-23
  %legend
  .row
    = f.label :category_id, :class => "required"
    %br
    = f.select :category_id, array_of_categories('garment'), :include_blank => true
    = f.check_box :new_in_category
    = image_tag "new_icon.png"

  .row
    = f.label :style_no, :class => "required"
    %br
    = f.text_field :style_no, :style => "width: 5em;"

  .row
    = f.label :name, :class => "required"
    %br
    = f.text_field :name

  .row
    = f.label :fabric_info, :class => ""
    %br
    = f.text_field :fabric_info, :style => "width: 90%;"

  .row
    = f.label :lb_per_piece, "Weight", :class => "required"
    %br
    = f.text_field :lb_per_piece, :style => "width: 3em;"

  .row
    .span-3
      = f.label :price, :class => "required"
      %br
      = f.text_field :price, :style => "width: 6em;"
    .span-3
      = f.label :original_price, :class => ""
      %br
      = f.text_field :original_price, :style => "width: 6em;"
    .span-10
      %label Discount Rate
      %br
      = text_field_tag :percent, nil, :style => "width: 3em;", :id => "percent"
      = "%"
      = link_to_function "Set", "setPrice();"
      = f.check_box :new_in_sale
      = image_tag "new_icon.png"
  .row
    = f.label :video, :class => ""
    %br
    = f.text_field :video, :style => "width: 15em;"
    (Upload videos to data.ohyesfashion.com at ~/files/videos directory.)

  .row
    = f.label :available_on
    %br
    = f.text_field :available_on, :class => 'date'

  .row
    = f.check_box :active
    = f.label :active, :class => ""

  .row
    = f.check_box :new_arrival
    = f.label :new_arrival, :class => ""
    = f.check_box :new_in_new_arrival?
    = image_tag "new_icon.png"

  .row
    = f.check_box :best
    = f.label :best, :class => ""
    = f.check_box :new_in_best
    = image_tag "new_icon.png"
.span-24.last
  %button.button.positive(type="submit")
    = icon_for(:accept, "Save")

%fieldset
  %legend Sizes
  - Product::SIZES.each do |size|
    .span-2
      = size.to_s.upcase
      = f.select size, [*0..20].map { |i| i.to_s }

.span-24
  .span-12
    %fieldset
      %legend Descriptions
      - Description.order("code, name").each do |description|
        .row
          = check_box_tag "descriptions[]", description.id, f.object.descriptions.include?(description)
          = "[#{description.code}]"
          = description.name
      .row
        New Description 
        = text_field_tag :new_description_name
  .span-12.last
    %fieldset(style="float: right;")
      %legend Colors
      .span-11
      - Color.order("name").each do |color|
        .row
          .span-1
            = check_box_tag "colors[]", color.id, f.object.colors.include?(color)
          .span-4
            = color_box color
          .span-3
            = check_box_tag "sold_out_colors[]", color.id, (f.object.colors.include?(color) and Colorship.sold_out?(f.object, color))
            Sold Out
          .span-2
            = check_box_tag "is_new_colors[]", color.id, (f.object.colors.include?(color) and Colorship.is_new?(f.object, color))
            New

.span-24.last
  %button.button.positive(type="submit")
    = icon_for(:accept, "Save")

- (15 - f.object.pictures.size).times { f.object.pictures.build }
%fieldset#pictures_fieldset
  %legend Images
  .row
    = f.label :model_id, "Model"
    = f.select :model_id, PhotoModel.all.map { |i| [i.name, i.id] }, :include_blank => true
  %br
  = f.fields_for :pictures do |ff|
    .span-7(style="height: 150px;")
      - if ff.object.new_record?
        = ff.file_field :image
      - else
        = image_tag ff.object.image.url(:w45)
        %br
        = ff.object.image_file_name
        %br
        = ff.check_box :is_main, :onclick => "exclusiveCheck(this)", :class => "is_main"
        Title
        %br
        = ff.check_box "_destroy"
        Delete

.span-24.last
  = link_to icon_for(:back, "Back"), :back, :class => "button negative"
  %button.button.positive(type="submit")
    = icon_for(:accept, "Save")

:javascript

  function setPrice() {
    if ($('#product_original_price').val() != '' && $('#percent').val() != '') {
      var originalPrice = parseFloat($('#product_original_price').val());
      var percent = parseFloat($('#percent').val());
      $('#product_price').val(originalPrice * (100 - percent) / 100.0);
    }
  } 
```

知道发生了什么吗？它曾经工作得很好。

# algorithm - 递归与迭代

> ID：10156109
> 
> 赞同：5
> 
> 时间：2012-04-14T18:19:30.773
> 
> 标签：algorithm, recursion, iteration

我相信所有具有迭代逻辑的问题都可以使用迭代来解决，但是我们可以使用递归来解决任何问题吗？递归总能代替迭代吗？如果可以，请为您的答案提供证据。还假设我们有一个无限堆栈或者我们在图灵机上运行程序。我不在乎这个证明是不是理论上的证明。（这就是我提到图灵机的原因）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T18:24:34.500

是的，递归总是可以替代迭代，这个之前已经讨论[过](https://stackoverflow.com/q/2093618/201359)了。引用链接的帖子：

> 因为您可以使用严格的迭代结构构建图灵完备语言，而仅使用递归结构构建图灵完备语言，所以两者是等价的。

稍微解释一下：我们知道任何可计算的问题都可以通过图灵机来解决。并且可以构建一种`A`无需递归的编程语言，相当于图灵机。同样，可以构建一种`B`无需迭代的编程语言，其计算能力与图灵机相当。

因此，如果`A`和`B`都是[图灵完备的](http://en.wikipedia.org/wiki/Turing_completeness)，我们可以得出结论，对于任何迭代程序，都必须存在一个等价的递归程序，反之亦然。这是一个理论上的结果，因为它没有给您任何关于如何从任意迭代程序派生一个递归程序的提示，反之亦然。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T18:21:11.777

是的。有一种递归称为[尾递归](http://en.wikipedia.org/wiki/Tail_call)，它可以直接转化为迭代。一个可以毫无问题地转换为另一个。因此，所有迭代解决方案都可以转换为递归解决方案。

其实很多编译器都可以检测到你在做尾递归，然后为了效率把它转换成for循环类型的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T18:22:24.967

当不需要循环时应使用递归，但该方法必须在特定情况下重复自身。例如，压缩文件夹。如果有子文件夹，它应该调用自己（递归）。如果您愿意，递归可以替代迭代，但不建议这样做。大多数人只使用迭代，只在需要时使用递归。

# liferay - Liferay 6：对于每个方法，我需要有一个单独的 actionURL

> ID：10156110
> 
> 赞同：0
> 
> 时间：2012-04-14T18:19:32.280
> 
> 标签：liferay

```
<portlet:actionURL name="addBook" var="addBookURL" />
<aui:form action="<%= addBookURL.toString() %>" method="post"> 
```

**我在 MVC Portlet 类中有这两种方法**

```
public void addBook(ActionRequest request, ActionResponse response) {

}

public void deleteBook(ActionRequest request, ActionResponse response) {

} 
```

在 UI 中，用户可以有不同的操作，如添加、删除书

现在使用 addBook 方法可以正常工作，我是否还需要在 UI 中为 deleteBook Action 编写单独的 portlet:actionURL 和 auiform ？

我是 Liferay 的新手，所以请原谅这些愚蠢的问题。

如果是这样，一页怎么会有两种形式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T12:20:26.997

您将需要与操作名称一样多的方法：

```
<portlet:actionURL name="addBook" var="addBookURL" />
<aui:form action="<%= addBookURL.toString() %>" method="post"> ... </aui:form>

<portlet:actionURL name="deleteBook" var="deleteBookURL" />
<aui:form action="<%= deleteBookURL.toString() %>" method="post"> ... </aui:form>

fyi: see what your actionURLs look like: <br/>
<%=addBookURL.toString()%><br/>
<%=deleteBookURL.toString()%><br/> 
```

如果你想有更少的方法，但仍然有动作名称，你也可以覆盖 processAction(ActionRequest request, ActionResponse response) 并自己处理条件（动作名称）。如果一个表单执行多个操作，您可以在一个操作中处理它并确定您获得什么内容，例如按下了哪个按钮。或者使用 Javascript 在提交时设置表单操作 URL。

# bash - '>&0' 有没有用处（重定向到标准输入）？

> ID：10156115
> 
> 赞同：14
> 
> 时间：2012-04-14T18:19:41.880
> 
> 标签：bash, unix

在 bash 中，您可以执行以下操作：

*   `echo test >&1`（重定向到标准输出，虽然它已经在那里了）
*   `echo test >&2`（重定向到标准错误）
*   `echo test >&0`（重定向到标准输入）

当我做最后一个时，我的终端仍然`test`像其他两个一样打印，但很难知道为什么。所以首先，为什么这会起作用？其次，重定向到标准输入有什么好的用途吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T18:37:04.500

更准确地说，`>&0`将文件描述符 0 复制为文件描述符 1。如果程序的 stdin 仅打开以供读取，那么当您的程序尝试写入 stdout（文件描述符 1）时，它会得到一个错误，因为文件描述符1也只开放阅读。

您可以通过编写一个检查其自己的文件描述符的小型 shell 脚本来证明这一点：

10156115.sh：

```
#!/bin/bash
bash -c 'ls -l /proc/$$/fd' >&0 
```

然后用可识别的标准输入、标准输出和标准错误调用它：

```
$ touch stdin
$ ./10156115.sh < stdin > stdout 2> stderr 
```

结果是您得到以下内容`stderr`：

```
ls: write error: Bad file descriptor 
```

但是，默认情况下，这三个都是终端：（输出简化）

```
$ ls -l /proc/$$/fd
lrwx------ 0 -> /dev/pts/14
lrwx------ 1 -> /dev/pts/14
lrwx------ 2 -> /dev/pts/14
lrwx------ 255 -> /dev/pts/14 
```

通常，这三个实际上都是开放式读写的，因此`>&0`如果在普通 shell 中单独使用重定向，则根本没有效果。

* * *

这有什么用途吗？

这没有任何常见用途，但是如果调用您的脚本的人重定向`stdout`and`stderr`并且无论出于何种原因您无法更改它，您可能会将其用作肮脏的黑客来获得一种打印到终端的方法：

```
if [ ! -t /dev/fd/1 -a ! -t /dev/fd/2 -a -t /dev/fd/0 ]; then
    echo "My message that I really, really want to go to a terminal" >&0
fi 
```

但我不建议实际这样做。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-14T18:24:49.943

由于历史原因，终端上的标准文件描述符是打开读/写而不是只读的（具体来说，它打开一次并`dup()`编辑给其他人）。这对于想要获取管道输入但也从用户（从`stdout`，或更常见的`stderr`）读取输入的程序来说有时很有用，尽管`/dev/tty`在这种情况下使用更可靠。一些系统不仅将它应用于 ttys：*BSD 双向打开套接字对（“管道”），并且一些系统实用程序（我记得`ufsdump`是一个例子）依赖于此。

重定向*到* `stdin`（即，只为写入而打开）通常没有用，因为大多数程序都希望它以读取方式打开（或有时读/写，如上所述）。

# iphone - Facebook 总是在每次应用启动时重新授权？

> ID：10156117
> 
> 赞同：1
> 
> 时间：2012-04-14T18:19:53.197
> 
> 标签：iphone, facebook, facebook-graph-api

我最近在我的应用程序中添加了 Facebook 集成，除了用户重新启动应用程序外，一切正常。每次重新启动应用程序时，Facebook 都必须返回其授权过程。这涉及将应用程序切换到 Safari/Facebook，然后再切换回我的应用程序。我怎样才能让 Facebook 保存信息，或者能够获得我的应用程序的一揽子权限，这样我就不会经常重新授权？

这是我的`applicationDidFinishLaunchingWithOptions:`方法代码：

```
facebook = [[Facebook alloc] initWithAppId:@"203604286395694" andDelegate:self];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] 
    && [defaults objectForKey:@"FBExpirationDateKey"]) {
    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
}
if (![facebook isSessionValid]) {
    [facebook authorize:nil];
} 
```

相关 Facebook 委托方法：

```
- (void)fbDidLogin {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

}

- (void) requestDialogButtonClicked {
    NSMutableDictionary* params = 
    [NSMutableDictionary dictionaryWithObjectsAndKeys:
     @"invites you to check out cool stuff",  @"message",
     @"Check this out", @"notification_text",
     nil];  
    [facebook dialog:@"apprequests"
           andParams:params
         andDelegate:self];
}

- (void)dialogDidComplete:(FBDialog *)dialog {
    NSLog(@"dialog completed successfully");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:10:47.940

您是在调用 Facebook 授权：某处吗？这就是触发 fbDidLogin 的方式。假设您是，该行为表明令牌或日期（或两者）为零，或者日期已过期（不太可能）。

在写入和读取用户默认值时记录值。我的猜测是授权要么没有被调用，要么失败（由于应用程序密钥或代码中未显示的其他问题），导致 fbDidLogin 方法未调用或保存 nil 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:55:23.303

那是因为您在授权应用程序时没有请求权限..“offline_access”提供长期访问令牌，因此您无需在每次用户想要使用 Facebook 时获取新的访问令牌..所以您需要什么像这样授权您的应用

```
if (![facebook isSessionValid]) {
    NSArray *permissions = [[NSArray alloc] initWithObjects:
            @"user_likes", 
            @"read_stream",
            @"offline_access"
            nil];
        [facebook authorize:permissions];
        [permissions release];
} 
```

**编辑：** 请在您的实施中检查以下内容：

1.您需要在您的应用程序委托中添加以下功能（这里的Facebook对象是您的FaceBook Class的实例值）。

```
// Pre 4.2 support
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url 
{
   return [facebook handleOpenURL:url]; 
}

// For 4.2+ support
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
   return [facebook handleOpenURL:url]; 
} 
```

2.在您的 info.plist 添加到 URL 类型 > URL 方案 > 您的 Facebook 应用程序 ID 和 fb 前缀（最后您的值将是这样的，例如 fb313714***）。

# c# - 带有本地数据库缓存的 Linq-to-SQL (dbml) (C#+VS2010)

> ID：10156118
> 
> 赞同：0
> 
> 时间：2012-04-14T18:20:12.140
> 
> 标签：c#, visual-studio-2010, linq-to-sql, sync

我正在开发一个 WPF 应用程序，它远程连接 MS SQL2008 数据库。该应用程序通过 Linq-to-SQL 与数据库通信。很方便。

但是，由于数据库服务器速度较慢，我正在尝试使用本地数据库缓存。

“VS2010 > 添加项目 > 本地数据库缓存”向导可能是一个解决方案，但它使用 DataSet 和 SQL Compact(*.sdf)。

**我发现 Linq-To-SQL 无法从 SQL COMPACT 版本生成类！** （当我拖动表格时，弹出错误并显示“不支持的数据提供者”）

那么，**是否有任何解决方案可以将 Linq-to-SQL 与本地数据库缓存一起使用？**

或者是否有任何与 Linq-to-SQL 一起使用的数据库同步方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:11:28.377

如果您仍然想走 sql compact 方式，Lightspeed 是一个支持各种数据源的 linq-to-sql 提供程序。它包括 mssql 紧凑型。

[http://www.mindscapehq.com/products/lightspeed](http://www.mindscapehq.com/products/lightspeed)

免费版本对于大多数项目来说已经足够了，有 8 个模型/类别的限制。

我以前用它作为 MySql 和 Sql Compact 的 linq 提供程序，它很棒。

您可以在此处查看它支持的所有内容以及它与其他现有系统的比较：

[http://www.mindscapehq.com/products/lightspeed/comparing-lightspeed](http://www.mindscapehq.com/products/lightspeed/comparing-lightspeed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:48:31.687

本地数据库缓存向导仅支持客户端的 SQL Ce。如果您在客户端有 SQL Express/SQL Server，您仍然可以使用 Sync Framework。

请参阅以下使用 Sync Framework 的示例/教程：

[同步 SQL Server 和 SQL Express](http://msdn.microsoft.com/en-us/library/ff928676.aspx)

[数据库同步：SQL Server 和 SQL Express 2 层](http://code.msdn.microsoft.com/Database-SyncSQL-Server-a9752fac)

没关系，如果它提到 SQLExpress，代码中引用的 SQLSyncProvider 应该适用于 SQL Express、SQL Server 和 SQL Azure

# java - 显示来自 java 应用程序上下文之外的图像。

> ID：10156122
> 
> 赞同：0
> 
> 时间：2012-04-14T18:20:54.997
> 
> 标签：java, image

这是一个关于在 Windows 7 平台上使用本地 java 服务器测试文件上传功能的问题。由于问题随着 Marko 的输入而演变，因此我对其进行了编辑，以便遇到相同挑战的人不会在演变细节上浪费时间并更快地得出结论。

挑战是将上传的文件定向到 WAR 结构之外的文件夹并从那里成功读取。例如：上传一张图片`c:/tmp/`，然后重定向到显示该图片的确认页面`<img src="c:/tmp/test.jpg" />`。上传成功，但图像不会显示。根据 Marko 的输入，这是有道理的，因为位于 localhost 的浏览器将拒绝使用`c:`. 也许这些是类似于那些我们无法设置默认路径的文件输入控制的安全考虑......

以下标记将在本地创建的 .html 文件中工作，但当粘贴到 jsp 中时，它将不起作用。不同的是浏览器使用localhost来访问jsp。

```
<img src="c:/tmp/test.jpg" /> 
```

**解决方案**

我认为 Marko 的回答几乎定义了需要做什么。虽然我没有采用这种方法，但这显然是更好的方法，我会接受它作为答案。谢谢，马尔科！

对于那些不想费心安装 Web 服务器并愿意忍受一些 hack 的人，这就是我所做的。同样，我不想将文件上传到我的 WAR 结构中，因为我需要记住在部署到服务器之前清除该文件夹。但是该上传文件夹仍然需要可访问，因此我只是创建了另一个虚拟项目并将该上传文件夹放在其 WebContent 下。这适用于我的本地测试。唯一麻烦的是上传文件后，我需要在 Eclipse 中刷新虚拟项目的 WebContent。

```
config.properties

#for uploading files
fileUploadDirectory=C:/javawork/modelsite/tmp/WebContent

#for building html links
publicFileServicePrefix=http://localhost:8080/tmp

<img src="http://localhost:8080/tmp/test.jpg" />  // this works - tmp is the name of my dummy project. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:36:05.577

如果您从字面上引用进入浏览器的 HTML（您通过“查看源代码”访问的 HTML），那么这与 Java 无关。浏览器是解释这些链接的人。如果它们无法加载，则问题出在浏览器/文件系统中。

**更新**

根据您的附加诊断结果，我得出结论，如果从来自 Internet URL 的 HTML 文件引用浏览器（明智地！）拒绝从本地磁盘加载任何内容，即使该 URL 是`localhost`.

**更新 2**

（已删除，无关）

**更新 3**

无论您如何处理上传到服务器的文件，它绝对不会像您的解决方案那样——该文件位于服务器的本地文件系统上，而不是客户端的文件系统上。这类事情可以在 Apache HTTP 服务器级别处理——为静态内容保留一个 URL 部分，并为 Apache 配置一个用于提供静态内容的基本目录。即使您在本地运行服务器，在您测试它的同一台机器上，您仍然需要通过网络接口。

# mysql - 我应该在客户端代码中存储什么作为索引？

> ID：10156129
> 
> 赞同：0
> 
> 时间：2012-04-14T18:21:42.277
> 
> 标签：mysql, database, google-app-engine

我正在使用 Google App Engine 并存储用户。以前，我在我的 userId 字段中使用带有自动递增 int 的 MySQL，但现在 GAE 会自动为我存储的每个新实体生成一个键，例如`g5kZXZ-aGVsbG93b3JsZHIKCxIEVXNlchgNDA`，但它们也会自动生成一个自动递增的 ID int。

我应该在我的客户端代码中使用哪一个来存储为 userId？使用 GAE 生成的长密钥是否有任何优势，或者在性能和查找方面使用小的 int ID 是否相同？一个比另一个有什么优势，还是实际上没有区别？

**编辑：**对不起，我的问题不够清楚。这就是我要问的：这与长度无关，但拥有查找键是否让我比没有它领先一步？因为如果我想查找用户，我必须通过电子邮件查找他，但是现在我在“表”中拥有该行的键，这会给我带来什么优势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:30:54.263

任何一个都可以，使用长字符串或短字符串来识别用户之间没有性能差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T05:39:32.663

请记住，生成的实体 ID 不能保证是单调递增的值。

# java - Java：下载总是停止

> ID：10156133
> 
> 赞同：1
> 
> 时间：2012-04-14T18:22:06.857
> 
> 标签：java, windows-7, tcp, download

几天前，我遇到了一个让我头疼的严重问题：

所有基于 Java 的工具（Eclipse、Maven、Android SDK 加载器...）在下载某些文件时都存在问题：下载只是随机停止。

我已经在[超级用户](https://superuser.com/questions/410883/downloads-stops-tcp-window-full)处描述了我的问题，但没有人能够帮助我解决我的问题。因此开始自己执行一些测试，并在这个问题的末尾得到了示例代码。

有趣的是缓冲区大小对问题的影响很小。如果我将缓冲区大小减小到 1024，则在大多数情况下下载完成。

这段代码只会在我的 Windows 系统上出现问题吗？

明确一点：我不想用 Java 开发下载程序 - 因此修复示例代码对我没有帮助 - 代码仅用于演示问题。

```
public static void main(String[] args) {
    try {
        URL url = new URL("http://mirror.netcologne.de/maven2/com/google/android/android/2.3.3/android-2.3.3.jar");

        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        InputStream in = conn.getInputStream();
        byte[] buffer = new byte[10485760]; // 10MiB
        long read = 0;
        while (true) {
            int bytes = in.read(buffer, 0, buffer.length);
            if (bytes < 0)
                break;
            read += bytes;
            System.out.println("Bytes read: " + read);
        }
        conn.disconnect();
        System.out.println("Finished");
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:36:48.470

您面临的问题是由 Java 7 引起的 - 详细地说，它赋予 IPv6 比 IPv4 更高的优先级。

此问题影响所有基于 Java 的软件，但仅发生在某些计算机上（可能取决于使用的 Internet 连接和/或本地网络组件，如交换机、路由器......）

您可以通过设置系统属性将其更改回 Java 6 中使用的 IPv4`java.net.preferIPv4Stack=true`

对于每个应用程序，设置此属性是不同的。对于 Eclipse，您必须在 eclipse.ini 中设置它。

对于 Andoird SDK 管理器，您必须编辑文件`tools\android.bat`并将参数添加`-Djava.net.preferIPv4Stack=true`到文件末尾附近的 Java 调用中。

# javascript - 在 twitter 和 google plus 等社交媒体上添加计数器

> ID：10156134
> 
> 赞同：0
> 
> 时间：2012-04-14T18:22:24.387
> 
> 标签：javascript, twitter, google-plus, social-media

我对 Twitter 和 Google Plus 的 API 不太熟悉。有人可以解决我的问题吗？我想在我的 Twitter、Google Plus 和 Stumble Upon 按钮上添加一个计数器。这将集成到我的 wordpress 帖子和页面中。我认为已经实现了 facebook 按钮。我剩下的唯一问题是 Twitter、Google Plus 和 Stumble Upon（可选）。

谢谢你！

```
<!-- 
Facebook
/////////////////
--> 
    <script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript"></script>

    <a href="http://www.facebook.com/sharer.php?u=<?php echo urlencode(get_permalink()); ?>&t=<?php echo urlencode(get_the_title()); ?>"  name="fb_share" type="box_count" target="_blank" id="facebook">
    Share
</a>

<!-- 
Twitter
/////////////////
--> 

<a href="http://twitter.com/share?url=<?php echo urlencode(get_permalink()); ?>&text=<?php echo urlencode(get_the_title()); ?>" class="twitter-share-button" id='twitter' target="_blank">
    Tweet
</a>

<!-- 
Google Plus
/////////////////
--> 

<a href="https://m.google.com/app/plus/x/?v=compose&content=<?php echo urlencode(get_permalink()) . " " . urlencode(get_the_title()); ?>" id='gplus' target="_blank">
    Google Plus
</a>

<!-- 
Stumble Upon
/////////////////
--> 

<a href="http://www.stumbleupon.com/submit?url=<?php echo urlencode(get_permalink()); ?>" target="_blank" id='stumble'>
    Stumble
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:44:29.780

Twitter 分享数：[https ://twitter.com/about/resources/buttons](https://twitter.com/about/resources/buttons)

Google+ +1 计数：[http ://www.google.com/webmasters/+1/button/](http://www.google.com/webmasters/+1/button/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:56:22.137

```
 <div class="addthis_toolbox addthis_floating_style addthis_counter_style"    style="left:50px;top:160px;">
 <a class="addthis_button_facebook_like" fb:like:layout="box_count"></a>
 <a class="addthis_button_tweet" tw:count="vertical"></a>
 <a class="addthis_button_google_plusone" g:plusone:size="tall"></a>
 <a class="addthis_counter"></a>
 </div>
 <script type="text/javascript">var addthis_config = {"data_track_addressbar":true}; </script>
 <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5178354276acf324"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T01:51:46.427

您可以使用 jQuery 来获取计数器...

我有一个针对 Facebook Pinterest 和 Twitter [https://gist.github.com/andrefrd/9520512的要点](https://gist.github.com/andrefrd/9520512)

# asp.net - 从 vb.net 中的字符串中删除特殊字符

> ID：10156142
> 
> 赞同：1
> 
> 时间：2012-04-14T18:23:04.593
> 
> 标签：asp.net, vb.net

这将是我的字符串

**帕尼帕特，巴特那，**

结果应该是**Panipat,Patna**

**，帕尼帕特，巴特那，**

结果应该是**Panipat,Patna**

**帕尼帕特，**

结果应该是**帕尼帕特**

**，帕尼帕特，，**

结果应该是**帕尼帕特**

我该怎么做 。需要帮忙 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:26:16.457

看起来你想要这个`Trim`功能

```
Dim result = input.Trim(New Char() { ","c }) 
```

此函数将从字符串值的开头和结尾删除所有出现的指定字符

示例用法

```
Dim str As String = "hello,"
Dim res = str.Trim(New Char() {","c})
Console.WriteLine(res) 'Prints: hello 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:29:35.417

[您可以从这里](http://www.dotnetperls.com/replace-vbnet)获得更多信息

```
Function RemoveCharacter(ByVal stringToCleanUp, ByVal characterToRemove)
   Return stringToCleanUp.Replace(characterToRemove, "")
End Function 
```

试试这个：

```
Private Sub Main()
    Dim inputText As String = "This is string ending with comma character,"

    Dim result As String = inputText.Trim(",".ToCharArray())

    Console.WriteLine(result)

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T18:38:47.093

实现目标的最佳方法是使用正则表达式。下面的示例将同时适用于两个术语。

例如用 Panipat,Patna 替换 ,Panipat,Patna,,

```
Public Function Return_Strip_Word(Text As String) As String
    Dim reg As String = "(?<stripword>(\w+)\b,\b(\w+))"
    Dim VDMatch As System.Text.RegularExpressions.Match = System.Text.RegularExpressions.Regex.Match(Text, reg)
    If VDMatch.Success Then
         Return VDMatch.Groups("stripword").Value
    Else
        Return Text
    End If
End Function 
```

# web-crawler - 什么是实现自动更新程序（机器人）的好方法

> ID：10156143
> 
> 赞同：0
> 
> 时间：2012-04-14T18:23:12.840
> 
> 标签：web-crawler

我是这种事情的新手，但我想创建一个机器人，它会每隔几个小时左右抓取某些站点并更新另一个站点（将其用于 NBA 统计数据）。

我不相信我会在编码机器人时遇到问题。我主要使用 java （Firefox 导航器插件、Java HTTP 请求和普通的旧 Robot 类。

我想寻求建议的是我应该在哪里以及如何维护/运行代码。

我想我需要把它放在某处的服务器上。我可以自己购买（最终需要），也可以在某个地方托管。有没有任何地方可以可靠地提供这项服务（也许是免费的）？

至于如何，有哪些常见的设置？我在 Java 中更自在，但我发现使用任何语言。我如何处理很长一段时间的不活动？我只是让线程睡觉吗？如果这是一个糟糕的解决方案，请原谅我的无知，但坦率地说，我在这件事上没有经验。我是否需要像 LAMP 堆栈这样完整的东西，或者我可以在没有这些的情况下舒适地度过吗？有哪些相对无痛的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:40:39.853

对于使用机器人爬取网站，我建议使用 Jsoup 或 Selenium 2。我会在自己的机器上进行爬取，但如果您需要将该信息发布到服务器或应用程序，则需要一台服务器那个。

通常，这种任务（每 x 次执行一次并睡眠 QUITE A WHILE）称为“cron-jobs”或简称为“crons”。

如果您的爬虫 24/7 全天候运行，则称为守护程序。

对于 crons，您需要某种调度（您希望它运行的频率）。如果您使用的是 Linux，那么 crontab 就是解决方案。在一个文本文件中，您指定程序运行的时间（例如每 n 分钟，或每天的某个时间，或某个月的某天等），操作系统将自动运行您的进程。

这样你的程序就可以完成它的工作并关闭，因为操作系统每次都会启动一个新的程序实例。

如果您没有 linux，我确定有 Windows 替代品。否则，有一个名为[Quartz](http://quartz-scheduler.org/) for java 的框架可以用于此目的。

唯一的问题是 java 程序将 24/7 运行，除了 Quartz 会不时调用你的类。

# php - 从 drupal_http_request 移植的 file_get_contents

> ID：10156144
> 
> 赞同：0
> 
> 时间：2012-04-14T18:23:19.977
> 
> 标签：php, drupal

我需要一些帮助来从 drupal 代码中移植一个函数。

我发现drupal_http_request 基本上是file_get_contents，但是当我更改它时，我似乎遇到了错误，

原始的drupal代码如下：

```
$response = drupal_http_request($url, array('Content-Type' => 'text/xml'), 'POST', $post_data); 
```

基本上我所做的就是替换它，所以它看起来像这样

```
$response = file_get_contents($url, array('Content-Type' => 'text/xml'), 'POST', $post_data); 
```

当我运行它时......我收到以下错误消息

```
file_get_contents() expects parameter 2 to be boolean 
```

我想知道是否有人可以帮我移植它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:33:11.593

`file_get_contents`不将数组作为第二个参数，请参阅[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)了解详细示例

```
$opts = array (
        'http' => array (
                'method' => "POST",
                'header' => 'Content-Type: text/xml\r\n',
                'content' => $post_data 
        ) 
);
$context = stream_context_create ( $opts );
$data = file_get_contents ( $url, false, $context ); 
```

# javascript - apprequest 的 FB.ui 对话框在 iframe 模式下永远挂起

> ID：10156145
> 
> 赞同：1
> 
> 时间：2012-04-14T18:23:31.147
> 
> 标签：javascript, facebook

不知何故，我无法让 iframe 模式在以下代码中工作对话框显示，但加载永远挂起，并且没有任何内容显示在框中它与显示一起正常工作：弹出

```
 FB.getLoginStatus(function(resp) {

      if (resp.status !== 'connected') return;
      FB.ui({
        method: 'apprequests',
        title: 'My title',
        display: 'iframe',
        message: 'My message',
        to: '100003750613973'
      }, function(resp) {
        console.log('emitted request to ', resp.to);
      });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:50:41.717

我自己和我的一些同龄人也看到了同样的行为。在我们的例子中，问题似乎只发生在 80 以外的端口上运行。例如，在开发中，我们通常在端口 3000 上运行，并看到您描述的挂起（在我们的例子中是“提要”对话框）。在端口 80 上运行时，一切正常。这似乎是最近的一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T19:45:08.320

好久没用过 FB.ui 所以不知道它是怎么变化的，但是你为什么要返回 console.log() 呢？我会说，删除 return 关键字，然后再试一次。看看 Firbug / Chrome / etc. 控制台说了什么。基于此，我相信您将能够找到可行的解决方案，或者将其发布在这里，我们可以为您提供帮助。代码应该是相当标准的。

# java - java - 如何在抽象类型的java中初始化List，以便以后可以将子类型添加到列表中

> ID：10156146
> 
> 赞同：3
> 
> 时间：2012-04-14T18:24:24.643
> 
> 标签：java, list, collections, abstract-class

tldr：如何创建抽象类型 BankAccount 的列表并将具体子类型添加到列表中

在 java 中，我有一个名为 BankAccount 的类。它是一个抽象类，因为我不希望任何人使用常规的 BankAccount，他们应该使用子类型 SavingsAccount、CheckingAccount、VacationAccount。

我想在客户类中有一个属性，即称为帐户的列表。在类定义中，我添加了一个类似的属性并且没有将它初始化为任何东西。在构造函数中，我想根据用户在构造函数中指定的内容添加一个帐户，但是当我这样做时，我在调用 add() 时出现错误。

它看起来像这样

```
List<BankAccount> accounts;

accounts.add(new CheckingAccount() ); 
```

这应该工作吗？我究竟做错了什么。我试着做

```
List<BankAccount> accounts = new List<BankAccount>(); 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-14T18:27:45.200

也许你的意思是：

```
List<BankAccount> accounts = new ArrayList<BankAccount>(); 
```

[List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)只是一个接口，创建实例时应该使用具体的实现，例如[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)。

# python - 在 python 中更新输入字典

> ID：10156148
> 
> 赞同：0
> 
> 时间：2012-04-14T18:24:25.890
> 
> 标签：python

我正在定义一个函数

```
def update(dictionary,key,value):
    dictionary[key] = value
   #  if i do print dictionary... it still shows the original value? 
```

我想在主调用中更新输入字典

所以这是我写的主要功能：

```
def update_mapping(mapping_dict,check_word,solution_word):
    #print "here "
    #new_mapping_dict = {}
    for i,ele in enumerate(check_word):
        if mapping_dict.has_key(ele):
            if mapping_dict[ele] == "*":
                mapping_dict[ele] = solution_word[i]

                print ele, solution_word
    print mapping_dict,check_word,solution_word 
```

基本上我输入了一个拼写错误的单词，然后拼写错误的单词有一些映射..我在字典中做那个映射..就像

```
 mapping_dict ={"a":"x"...."s":"*"...} 
```

因此，所有已找到映射的已知字母都有一个合法的键值字母对。对于我没有找到正确映射的字母，我用“*”替换它们，我用一些算法（倒排索引)

当我找到这些时，我想更新我的字典？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:27:47.337

```
>>> test = {"test": 1}
>>> def update(dictionary,key,value):
...     dictionary[key] = value
... 
>>> update(test, "test", 2)
>>> test
{'test': 2} 
```

您的问题必须在其他地方 - 这有效。

# c# - 确定用户登录是否已存在于数据库中？

> ID：10156150
> 
> 赞同：0
> 
> 时间：2012-04-14T18:24:38.210
> 
> 标签：c#, asp.net, sql-server

我正在使用 C# 在 asp.net 中构建一个 Web 应用程序。我有用户应该注册然后可以登录的表单。我在让网络应用程序知道用户选择的名称是“已经存在”或不存在时遇到问题。如果它已经存在，则不应插入相同的名称并显示一条消息“用户名已存在”。我试过了，`SqlDataReader`但没有运气。

```
protected void Register_Button_Click(object sender, EventArgs e)
    {
        SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["BJ_Player_String"].ToString());
        SqlCommand cmd = new SqlCommand();
        SqlCommand cmd2 = new SqlCommand();
        SqlDataReader data_reader;
        String name = TextBox2.Text;
        String date = TextBox3.Text;

        try
        {
            conn.Open();
            cmd = new SqlCommand("Insert into BJ_Player (Player_Name, D_O_B) Values (@Player_name, @D_O_B)", conn);
            cmd = new SqlCommand("Select Player_Name from BJ_Player WHERE Player_Name = @Player_name", conn);
            cmd.Parameters.Add("@Player_name", SqlDbType.NVarChar).Value = name;
            cmd.Parameters.Add("@D_O_B", SqlDbType.Date).Value = date;
            cmd.Connection = conn;
            data_reader = cmd.ExecuteReader();
            cmd.ExecuteNonQuery();

            if (data_reader.HasRows)
            {
                lblPlayerNameExists.Visible = true;
            }
            else
            {
                // do nothing
            }    
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:27:18.273

使 Player_Name 在数据库中唯一，然后当您尝试插入时它会给您异常。您必须使用唯一约束。您还必须提供命令类型并检查您将两个查询分配给同一个 cmd 对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T18:54:57.330

在您的代码中，您在数据库中插入数据，然后您正在检查名称是否相同。首先，您应该在数据库中搜索名称，然后如果没有任何具有该名称的记录，您应该添加您的记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T18:50:19.823

如果您想编写一个模型函数来做到这一点，那么

1.  将其留给与第二种方法非常相似的ajax检查
2.  例如，发出“从 DB 表中选择用户名”以检索用户名，然后检查用户名输入，然后再显示视图以报告问题（如果有）或显示消息以告诉用户“此名称有效”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T18:53:30.583

我通常通过以下两种方式之一进行：

1.  创建将检查名称唯一性并在一切正常时插入新记录的存储过程。它应该将状态作为您将检查的数字代码返回。
2.  在将其保存为验证过程的一部分之前，请检查名称的唯一性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T19:34:23.363

使用合并语句可能对此有所帮助。Merge 根据与源表连接的结果对目标表执行插入、更新或删除操作。

基本上它在需要时插入，并在需要时更新。通常被称为 upsert。但它完成了工作。

这是一个解释如何使用合并的站点的链接。看起来是一篇不错的文章。 [http://www.kodyaz.com/articles/sql-server-2008-t-sql-merge-statement-example.aspx](http://www.kodyaz.com/articles/sql-server-2008-t-sql-merge-statement-example.aspx)

# django - 让经纪人开始使用 django-celery

> ID：10156153
> 
> 赞同：2
> 
> 时间：2012-04-14T18:24:45.430
> 
> 标签：django, celery, django-celery

这是我第一次使用 Celery，所以这可能是一个非常简单的问题。我正在关注[教程](http://ask.github.com/celery/getting-started/first-steps-with-celery.html)。我添加`BROKER_URL = "amqp://guest:guest@localhost:5672/"`到我的设置文件中。我将简单的任务添加到我的应用程序中。现在我用

`manage.py celeryd --loglevel=info --settings=settings`

[windows 机器celery-django can't find settings](https://stackoverflow.com/questions/3323125/celery--cant-find-settings)需要 settings= settings 。

我明白了 `[Errno 10061] No connection could be made because the target machine actively refused it. Trying again in 2 seconds...`

所以看起来工作人员无法连接到代理。我必须启动代理吗？它是自动启动的`manage.py runserver`吗？我还需要安装一些东西`django-celery`吗？我必须做类似的事情`manage.py runserver BROKER_URL`吗？

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:36:21.230

您需要先安装代理。或者尝试使用[django db](http://ask.github.com/celery/getting-started/brokers/django.html#broker-django)。

但我不建议在生产中使用 django db。Redis 没问题。但在 Windows 上运行它可能有问题。

# asp.net-mvc - .net MVC 国际日期从发布的表单进行模型验证

> ID：10156154
> 
> 赞同：2
> 
> 时间：2012-04-14T18:24:48.250
> 
> 标签：asp.net-mvc, validation

我有一个发布到控制器的常规表单。日期必须以日/月/年格式输入，因为它是针对南美的应用程序。我强制将当前的文化 UI 设置为西班牙语-秘鲁。尝试使用 MVC 3 和 4 beta。

这是控制器代码：

```
[HttpPost]
public ActionResult Create(EditPatientViewModel model)
{
   Thread.CurrentThread.CurrentUICulture = new CultureInfo("es-PE");
   if (ModelState.IsValid) {
       // never reaches in here if date submitted as day/month/year
   }
} 
```

当我调试并查看 ModelState 错误时，它们内部的区域性仍然设置为 en-US，即使我可以验证 CurrentThread.CurrentUICulture 设置为 es-PE。

如何使 ModelState 验证也发生变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T18:28:53.607

将 web.config 中的全球化设置为 es-PE。

```
<configuration>
   <system.web>
      <globalization fileEncoding="utf-8" 
                     requestEncoding="utf-8" 
                     responseEncoding="utf-8" 
                     culture="es-PE"
                     uiCulture="es-PE"/>
   </system.web>
</configuration> 
```

它应该可以正常工作，发布和验证。

**更新**

如果出于任何原因您的 ModelState 解释您的 Date 不正确，您可以执行以下操作：

```
ModelState[n].Value.Culture = {es-PE}; 
```

在验证发生之前。

**更新**

您还可以更改默认活页夹并制作自己的活页夹。

```
public class MyDateTimeBinder : IModelBinder
{
  public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
  {
     var value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
     var date = value.ConvertTo(typeof(DateTime), CultureInfo.CurrentCulture);
      return date;    
   }
} 
```

放

```
ModelBinders.Binders.Add(typeof(DateTime), new MyDateTimeBinder());
ModelBinders.Binders.Add(typeof(DateTime?), new MyDateTimeBinder()); 
```

在 Global.asax 的 Application_Start() 中。

问候。

# r - 将R预测库JAR文件导入java

> ID：10156157
> 
> 赞同：2
> 
> 时间：2012-04-14T18:24:57.443
> 
> 标签：r, forecasting

我正在尝试导入 R 包 'forecast; 在netbeans 中使用它的功能。我已经成功地建立了 JRI 连接并导入了 javaGD 库并对其进行了试验并取得了一定的成功。关于预测包的问题是我找不到相应的 JAR 文件，因此将它们作为库包含在我的项目中。我正在正常加载它：re.eval(library(forecast))，但是当我实现库的一个函数时，返回一个空值。虽然我很确定代码是正确的，但我还是发布它以防万一。

tnx 提前

```
 Rengine re = new Rengine(Rargs, false, null);
    System.out.println("rengine created, waiting for R!");
    if(!re.waitForR())
    {
        System.out.println("cannot load R");
        return;
    }
    re.eval("library(forecast)");
    re.eval("library(tseries)");

    re.eval("myData <- read.csv('C:/.../I-35E-NB_1.csv', header=F, dec='.', sep=',')");
    System.out.println(re.eval("myData"));

    re.eval("timeSeries <- ts(myData,start=1,frequency=24)");
    System.out.println("this is time series object : " + re.eval("timeSeries"));

    re.eval("fitModel <- auto.arima(timeSeries)");
    REXP fc = re.eval("forecast(fitModel, n=20)");
    System.out.println("this is the forecast output values: " + fc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-20T13:38:42.807

您没有将值从 R 转换为 java，您应该首先在 R 中创建一个 auto.arima 输出的数值向量，然后使用方法 .asDoubleArray() 将其读入 java。

我在 [这里][如何将附加 R 库加载到 JRI 并从 Java 执行中给出了一个完整的示例？](https://stackoverflow.com/questions/17067236/how-i-can-load-add-on-r-libraries-into-jri-and-execute-from-java/22317958#22317958)，这准确地显示了如何使用 JRI 在 Java 中使用 auto.arima 函数。

# matlab - How to change row number in a FOR loop... (MATLAB newbie)

> ID：10156158
> 
> 赞同：1
> 
> 时间：2012-04-14T18:25:09.110
> 
> 标签：matlab, for-loop, row

I have a set of data that is <106x25 double> but this is inside a struct and I want to extract the data into a matrix. I figured a simple FOR loop would accomplish this but I have hit a road block quite quickly in my MATLAB knowledge.

This is the only piece of code I have, but I just don't know enough about MATLAB to get this simple bit of code working:

```
>> x = zeros(106,25); for i = 1:106, x(i,:) = [s(i).surveydata]; end
??? Subscripted assignment dimension mismatch. 
```

`'s'` is a very very large file (in excess of 800MB), it is a `<1 x 106 struct>`. Suffice it to say, I just need to access a small portion of this which is `s.surveydata` where most rows are a <1 x 25 double> (a row vector IIRC) and some of them are empty and solely return a `[]`.

`s.surveydata` obviously returns the results for all of the `surveydata` contained where `s(106).surveydata` would return the result for the last row. I therefore need to grab `s(1:106).surveydata` and put it into a matrix `x`. Is creating the matrix first by using `x = zeros(106,25)` incorrect in this situation?

Cheers and thanks for your time!

*Ryan*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:11:40.740

The easiest, cleanest, and fastest way to write all the survey data into an array is to directly catenate it, using [CAT](http://www.mathworks.com/help/techdoc/ref/cat.html):

```
x = cat(1,s.surveydata); 
```

EDIT: note that if any surveydata is empty, `x` will have fewer rows than `s` has elements. If you need `x` to have the same amount of rows as `s` has elements, you can do the following:

```
%# find which entries in s have data
%# note that for the x above, hasData(k) contains the 
%# element number in s that the k-th row of x came from
hasData = find(arrayfun(@(x)~isempty(x.surveydata),s));

%# initialize x to NaN, so as to not confuse the
%# real data with missing data entries. The call
%# to hasData when indexing makes this robust to an 
%# empty first entry in s
x = NaN(length(s),length(s(hasData(1)).surveydata);

%# fill in only the rows of x that contain data
x(hasData,:) = cat(1,s(hasData).surveydata); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T18:45:48.480

No, creating an array of zeroes is not incorrect. In fact it's a good idea. You don't have to declare variables in Matlab before using them, but for loops, pre-allocating has speed benefits.

```
x = zeros(size(s), size(s(1)));

for i = 1:106
    if ~isempty(s(i).surveydata)
        x(i, :) = s(i).surveydata;
    end
end 
```

Should accomplish what you want.

EDIT: Since OP indicated that some rows are empty, I accounted for that like he said.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T18:29:03.323

what about this? what `s` is?

if `s(i).surveydata` is scalar:

```
x = zeros(106,25); 
for i = 1:106
x(i,1) = [s(i).surveydata]; 
end 
```

I am guessing that is what you want tough it is not clear at all :

if `s(i).surveydata` is row vector:

```
x = zeros(106,25); 
for i = 1:106
x(i,:) = [s(i).surveydata]; 
end 
```

if `s(i).surveydata` is column vector:

```
x = zeros(106,25); 
for i = 1:106
x(i,:) = [s(i).surveydata]'; 
end 
```

# .net - 合并业务实体的框架

> ID：10156159
> 
> 赞同：2
> 
> 时间：2012-04-14T18:25:24.623
> 
> 标签：.net, automapper, valueinjecter

是否有任何框架可以执行以下操作：

```
var source = new Entity()
{
    StringProp = null,
    IntProp = 100,

};

var target = new Entity()
{
    StringProp = "stringValue", // Property value should remain the same if source value is null 
    IntProp = 222
};

var mergedEntity = MergeFramework.Merge(source, target); // Here is what I am looking for

Assert.AreEqual(100, mergedEntity.IntField);
Assert.AreEqual("stringValue", mergedEntity.StringField); 
```

以下是我需要它的工作流程：

1.  应用获取实体实例。实例的某些属性为空。（源实例）

2.  应用程序从数据库中获取与源中具有相同身份的实体。（目标实例）

3.  合并两个实体并保存合并到数据库。

主要问题是我的项目中有近600个实体，所以我不想手动为每个实体编写合并逻辑。基本上，我正在寻找像 AutoMapper 或 ValueInjecter 这样灵活的东西，它们满足以下要求：

*   提供指定类型合并条件的可能性。例如：如果 source.IntProp == int.MinInt -> 不合并属性

*   提供指定属性特定条件的可能性。就像在 AutoMapper 中一样：

    Mapper.CreateMap().ForMember(dest => dest.EventDate, opt => opt.MapFrom(src => src.EventDate.Date));

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T10:15:17.613

干得好：

```
using System;
using NUnit.Framework;
using Omu.ValueInjecter;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {

            var source = new Entity()
            {
                StringProp = null,
                IntProp = 100,

            };

            var target = new Entity()
            {
                StringProp = "stringValue", // Property value should remain the same if source value is null 
                IntProp = 222
            };

            var mergedEntity = (Entity) target.InjectFrom<Merge>(source);

            Assert.AreEqual(100, mergedEntity.IntProp);
            Assert.AreEqual("stringValue", mergedEntity.StringProp);
            Console.WriteLine("ok");
        }
    }

    public class Merge : ConventionInjection
    {
        protected override bool Match(ConventionInfo c)
        {
            return c.SourceProp.Name == c.TargetProp.Name
                   && c.SourceProp.Value != null;
        }
    }

    public class Entity
    {
        public string StringProp { get; set; }

        public int IntProp { get; set; }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-26T14:47:51.683

要更新当前答案，`ConventionInjection`已弃用。您现在可以`LoopInjection`在创建自定义注入时使用。

`Merge`更新的Injection 类的示例：

```
public class Merge : LoopInjection
{

    protected override bool MatchTypes(Type source, Type target)
    {
        return source.Name == target.Name;
    }

    protected override void SetValue(object source, object target, PropertyInfo sp, PropertyInfo tp)
    {
        if (sp.GetValue(source) == null) return;
        base.SetValue(source, target, sp, tp);
    }

} 
```

# java - 在重置/清除 jcombobox 值方面需要帮助

> ID：10156167
> 
> 赞同：4
> 
> 时间：2012-04-14T18:27:06.103
> 
> 标签：java, swing, reset, jcombobox

我使用下面的编码使用另一个jcombobox向jcombobox添加值，我需要根据在jcombobox1中选择的值将值添加到jcombobox2而不附加值所以有人可以告诉我一种重置或清除组合框的方法选择另一个选项时的值？下面是我的编码，我是 java 和 netbeans 的新手，所以如果有人可以帮助我将不胜感激:)

```
 Class.forName("com.mysql.jdbc.Driver").newInstance();
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost/database1", "root", "senura123");
    Statement stat = (Statement) con.createStatement();
    String val=jComboBox1.getSelectedItem().toString();
    String check; String col;
    if ("Vehicles".equals(val)){
        check = "select reg_no from vehicle;";
        col="reg_no";
    }
    else if ("Travel Guides".equals(val)){
        check = "select username from travelguide;";
        col="username";
    }
    else{
        check = "select username from transportofficer";
        col="username";
    }                   
    ResultSet rslt = stat.executeQuery(check);
    while (rslt.next()) {
        jComboBox2.addItem(rslt.getString(col));                               
    }
 } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T06:58:31.887

看[`DefaultComboBoxModel.removeAllElements()`](https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/javax/swing/DefaultComboBoxModel.html#removeAllElements())

> 清空列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T00:32:21.620

在您的组合框中设置一个*新*模型：

```
final List<String> values = new ArrayList<String>();

while (rslt.next()) {
  values.add(rslt.getString(col));
}

jComboBox2.setModel(new DefaultComboBoxModel(values.toArray())); 
```

请参阅[DefaultComboBoxModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/DefaultComboBoxModel.html)。

* * *

[然而，作为进一步的评论，根据您的查询中涉及多少延迟，您可能希望使用SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)将此工作拆分为 EDT 和后台线程部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T08:26:57.910

通常它发生是因为您有一个与 JComboBox 相关的事件。如果您在 JComboBox 中有控件项可以操作，则可以解决此问题，例如：

```
jComboBoxExample.addActionListener (new ActionListener () {
   public void actionPerformed (ActionEvent e) {
     do_run ();
   }
});

public void do_run() {
  int n=jComboBoxPerfilDocumentos.getItemCount(); <--THIS IS THE SOLUTION
  if (n> 0) { 
    String x = jComboBoxPerfilDocumentos.getSelectedItem (). ToString ();
  }
} 
```

# python - 从 Python 中的终端关闭事件中获取信号

> ID：10156169
> 
> 赞同：3
> 
> 时间：2012-04-14T18:27:08.150
> 
> 标签：python, windows

如何制作仅通过终端（无 GUI）运行的 Python 脚本，以便在按下顶部的红色 X 时不退出，而是为该信号分配一个函数，该信号最终将关闭窗口和进程（类似于退出时的警报对话框，但基于终端）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:55:19.643

通常，您可以使用该[`atexit`](http://docs.python.org/library/atexit.html)模块注册要在退出时调用的函数：

```
try:
    _count = int(open("/tmp/counter").read())
except IOError:
    _count = 0

def incrcounter(n):
    global _count
    _count = _count + n

def savecounter():
    open("/tmp/counter", "w").write("%d" % _count)

import atexit
atexit.register(savecounter) 
```

当然，用户总是可以强制退出你的进程，而你对此无能为力！

# c++ - 文件压缩以处理 C++ 中的中间输出

> ID：10156172
> 
> 赞同：3
> 
> 时间：2012-04-14T18:27:34.223
> 
> 标签：c++

我想压缩我的程序的中间输出（在 C++ 中），然后解压缩它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-14T18:33:30.500

您可以使用 Boost IOStreams 来压缩您的数据，例如沿着这些行压缩/解压缩到文件中/从文件中解压缩（示例改编自[Boost 文档](http://www.boost.org/doc/libs/1_49_0/libs/iostreams/doc/classes/gzip.html)）：

```
#include <fstream>
#include <iostream>

#include <boost/iostreams/filtering_stream.hpp>    
#include <boost/iostreams/filtering_streambuf.hpp>
#include <boost/iostreams/copy.hpp>
#include <boost/iostreams/filter/gzip.hpp>

namespace bo = boost::iostreams;

int main() 
{
    {
    std::ofstream ofile("hello.gz", std::ios_base::out | std::ios_base::binary);
    bo::filtering_ostream out;
    out.push(bo::gzip_compressor()); 
    out.push(ofile); 
    out << "This is a gz file\n";
    }

    {
    std::ifstream ifile("hello.gz", std::ios_base::in | std::ios_base::binary);
    bo::filtering_streambuf<bo::input> in;
    in.push(bo::gzip_decompressor());
    in.push(ifile);
    boost::iostreams::copy(in, std::cout);
    }
} 
```

您还可以查看 Boost Serialization - 它可以更轻松地保存您的数据。可以将这两种方法结合起来（[示例](https://stackoverflow.com/questions/1753469/how-to-hook-up-boost-serialization-iostreams-to-serialize-gzip-an-object-to)）。IOStreams 也支持`bzip`压缩。

**编辑：**为了解决您的最后一条评论-您可以压缩现有文件...但最好将其写为压缩开始。如果你真的想要，你可以调整以下代码：

```
std::ifstream ifile("file", std::ios_base::in | std::ios_base::binary);
std::ofstream ofile("file.gz", std::ios_base::out | std::ios_base::binary);

bo::filtering_streambuf<bo::output> out;
out.push(bo::gzip_compressor());
out.push(ofile); 
bo::copy(ifile, out); 
```

# android - 如何在 Eclipse 中为平板电脑（7 英寸，800x480）添加模拟器？

> ID：10156178
> 
> 赞同：2
> 
> 时间：2012-04-14T18:27:54.450
> 
> 标签：android, eclipse, configuration, android-emulator

今天是我使用安卓的第一天。
我的需求非常具体。我想为分辨率为 800x480 的 7 英寸平板电脑开发应用程序。

虽然我能够为三星 Galaxy 标签添加模拟器，但它的分辨率不同，这对我没有太大帮助。

任何机构都可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:30:27.960

您必须打开 Window > AVD Manager，创建一个新模拟器，命名并设置屏幕大小、堆大小和 android 版本。

我应该补充一点，然后您应该转到 Run > Run Configurations 并将您当前的项目设置为使用新的模拟器运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T18:42:36.030

在创建 avd 时，请查看黄色突出显示的框以在 avd 上指定目标设备分辨率。

![在此处输入图像描述](../Images/917ccd4580b5182be048dab229815cfc.png)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-09-16T07:03:58.283

要更改方向，您必须使用 Ctrl + f12

# javascript - 如何在网页中找到与类或 div 或任何其他元素相关联的 jquery 或纯 javascript

> ID：10156181
> 
> 赞同：0
> 
> 时间：2012-04-14T18:28:32.577
> 
> 标签：javascript, jquery, class, html

我想知道是否有任何方法可以找到与网页中特定元素关联的所有脚本。

也就是说，如果有一张照片，并且有两个附加的 jquery 函数，例如鼠标悬停和单击，我需要在不查看整个脚本的情况下获取此函数的详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:34:17.253

一种方法是使用名为[Visual Event的小书签](http://www.sprymedia.co.uk/article/Visual+Event)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:35:55.820

真的没有一个简单的方法。我花了几天时间尝试编写一个增强包装器/扩展程序，它可以跟踪页面中的所有偶数分配，从而允许检查此类 - 问题是它需要对每个库进行调整，如果有任何本地事件，iirc 就没有用了使用了赋值。

这正是需要组织良好的代码的原因，并且记住“不引人注目”并不意味着“难以理解” - 尝试保持所有事件分配井井有条并且易于关联/找到特定元素。

# python - python中json对象的内部字典解析

> ID：10156186
> 
> 赞同：1
> 
> 时间：2012-04-14T18:28:56.353
> 
> 标签：python, json

我有一个名为 filelist = [] 的列表，我在其中附加了一些键值对的字典。

```
filelist.append({"url": url, "exename": ename, "filename": fname}] as I loop through a set of files.
Later, loads() the below json object to a "json" key: 

for file in filelist: file["json"] = json.loads(json) 
```

我可以毫不费力地拉出第一层字典值，即。

```
for files in filelist:
    print files["json"]["response_code"]

>>> 1 
```

但是，我在获取内部字典时遇到问题，我假设它绑定到 files["json"]["scans"] 例如：

```
for files in filelist:
    for avvendors in files["json"]["scans"] 
```

我真的对提取“检测到”键很感兴趣，但似乎python没有将“扫描”键作为字典加载，而是将其存储为字符串。我正在考虑在内部字典上做第二次加载（），看看会发生什么。

```
for stuff in avvendors:
    if stuf["detected"]:
        #do something 
```

我不太确定这里发生了什么。我知道我可能会弄明白，但是深入了解一下 python 在内部对 json 做了什么会很好。另外，直到星期一或星期二，甚至可能是星期三，我才有机会在这方面工作，而悬念正在扼杀我。

这是可读性的完整块：

for files in filelist: for avvendors in files["json"]["scans]: if avvendors["detected"]: #做一些有用的事情

```
{"response_code": 1,
"verbose_msg": "Scan finished, scan information embedded in this object",

"resource": "99017f6eebbac24f351415dd410d522d",
"scan_id": "52d3df0ed60c46f336c131bf2ca454f73bafdc4b04dfa2aea80746f5ba9e6d1c-1273894724",
"md5": "99017f6eebbac24f351415dd410d522d",
"sha1": "4d1740485713a2ab3a4f5822a01f645fe8387f92",
"sha256": "52d3df0ed60c46f336c131bf2ca454f73bafdc4b04dfa2aea80746f5ba9e6d1c",

"scan_date": "2010-05-15 03:38:44",

"positives": 40,
"total": 40,
"scans": {"nProtect": {"detected": true, "version": "2010-05-14.01", "result": "Trojan.Generic.3611249", "update": "20100514"},
"CAT-QuickHeal": {"detected": true, "version": "10.00", "result": "Trojan.VB.acgy", "update": "20100514"},
"McAfee": {"detected": true, "version": "5.400.0.1158", "result": "Generic.dx!rkx", "update": "20100515"},
"TheHacker": {"detected": true, "version": "6.5.2.0.280", "result": "Trojan/VB.gen", "update": "20100514"},
"VirusBuster": {"detected": true, "version": "5.0.27.0", "result": "Trojan.VB.JFDE", "update": "20100514"},
"NOD32": {"detected": true, "version": "5115", "result": "a variant of Win32/Qhost.NTY", "update": "20100514"},
"F-Prot": {"detected": false, "version": "4.5.1.85", "result": null, "update": "20100514"},
"Symantec": {"detected": true, "version": "20101.1.0.89", "result": "Trojan.KillAV", "update": "20100515"},
"Norman": {"detected": true, "version": "6.04.12", "result": "W32/Smalltroj.YFHZ", "update": "20100514"},
"TrendMicro-HouseCall": {"detected": true, "version": "9.120.0.1004", "result": "TROJ_VB.JVJ", "update": "20100515"},
"Avast": {"detected": true, "version": "4.8.1351.0", "result": "Win32:Malware-gen", "update": "20100514"},
"eSafe": {"detected": true, "version": "7.0.17.0", "result": "Win32.TRVB.Acgy", "update": "20100513"},
"ClamAV": {"detected": false, "version": "0.96.0.3-git", "result": null, "update": "20100514"},
"Kaspersky": {"detected": true, "version": "7.0.0.125", "result": "Trojan.Win32.VB.acgy", "update": "20100515"},
"BitDefender": {"detected": true, "version": "7.2", "result": "Trojan.Generic.3611249", "update": "20100515"},
"Comodo": {"detected": true, "version": "4842", "result": "Heur.Suspicious", "update": "20100515"},
"F-Secure": {"detected": true, "version": "9.0.15370.0", "result": "Trojan.Generic.3611249", "update": "20100514"},
"DrWeb": {"detected": true, "version": "5.0.2.03300", "result": "Trojan.Hosts.37", "update": "20100515"},
"AntiVir": {"detected": true, "version": "8.2.1.242", "result": "TR/VB.acgy.1", "update": "20100514"},
"TrendMicro": {"detected": true, "version": "9.120.0.1004", "result": "TROJ_VB.JVJ", "update": "20100514"},
"McAfee-GW-Edition": {"detected": true, "version": "2010.1", "result": "Generic.dx!rkx", "update": "20100515"},
"Sophos": {"detected": true, "version": "4.53.0", "result": "Troj/VBHost-A", "update": "20100515"},
"eTrust-Vet": {"detected": true, "version": "35.2.7490", "result": "Win32/ASuspect.HDBBD", "update": "20100515"},
"Authentium": {"detected": false, "version": "5.2.0.5", "result": null, "update": "20100514"},
"Jiangmin": {"detected": true, "version": "13.0.900", "result": "Trojan/VB.yqh", "update": "20100514"}, [...] } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:39:18.550

迭代字典时要小心。它只是返回键。如果您需要键和值，请使用以下`.iteritems()`方法（或在 Python3 中，`.items()`）：

```
for files in filelist:
   for avvendor, stuf in files["json"]["scans"].iteritems():
       if stuf["detected"]:
          #do something 
```

在您的情况下，`scans`键的值是一个字典：`"scans": {"nProtect": ...}`

# asp.net - 如何在gridview中访问数据键行

> ID：10156188
> 
> 赞同：0
> 
> 时间：2012-04-14T18:29:32.517
> 
> 标签：asp.net

我有一个 gridview 并将 DataKeyNames 设置为 ID ( `DataKeyNames="ID"`)。在这个 GridView 中，我创建一列以通过 Select 命令选择一行。我想通过 datakeyname 获取行 id，但我做不到。

认为我的 Gridview 行是

```
1
3
4
6
9
10
15 
```

数字取自数据库并使用网格视图。请帮我。如果需要更多细节说。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:35:56.107

您必须将事件分配给您`rowindex`的`rowdatabound`命令，然后将其传递给命令参数，在[此处找到一篇非常好的文章](https://stackoverflow.com/questions/389403/asp-net-gridview-rowindex-as-commandargument)

# phantomjs - 将 PhantomJS 调用中的变量暴露给 injectJS

> ID：10156190
> 
> 赞同：8
> 
> 时间：2012-04-14T18:29:45.553
> 
> 标签：phantomjs

我遵循了从入门页面注入 jQuery 的示例，并且效果很好。我在同一目录中有 jQuery 的本地副本，并执行类似...

```
if(page.injectJs('jquery.min.js')) {
  page.evaluate(function(){
    //Use jQuery or $ 
  }
} 
```

当我尝试注入自己的脚本时，没有任何功能可供我使用。假设我有一个名为 myScript.js 的脚本

```
function doSomething() {
  // doing something...
} 
```

然后我不能使用 doSomething 之类的...

```
if(page.injectJs('myScript.js')) {
  console.log('myScript injected... I think');
  page.evaluate(function() {
    doSomething();
  });
} else { 
  console.log('Failed to inject myScript'); 
} 
```

我试过了

```
window.doSomething = function() {}; 
```

和

```
document.doSomething = function() {}; 
```

也没有运气，以及尝试在随后的 page.evaluate() 中使用 window.doSomething() 或 document.doSomething() 调用它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T03:37:01.307

以下对我有用，也许您的应用程序逻辑的其他部分是错误的：

`inject.coffee`

```
page = require('webpage').create()

page.onConsoleMessage = (msg) -> console.log msg

page.open "http://www.phantomjs.org", (status) ->
  if status is "success"
    page.includeJs "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js", ->
      if page.injectJs "do.js"
        page.evaluate ->
          title = echoAndReturnTitle('hello')
          console.log title
        phantom.exit() 
```

`do.coffee`：

```
window.echoAndReturnTitle = (arg) ->
  console.log "echoing '#{arg}'"
  console.log $(".explanation").text()
  return document.title 
```

**结果：**

```
> phantomjs inject.coffee
echoing 'hello'

            PhantomJS is a headless WebKit with JavaScript API.
            It has fast and native support for various web standards: 
            DOM handling, CSS selector, JSON, Canvas, and SVG.
            PhantomJS is created by Ariya Hidayat.

PhantomJS: Headless WebKit with JavaScript API 
```

* * *

或者如果您更喜欢 JavaScript（它们是自动生成的，而且有点难看）：

`inject.js'：

```
// Generated by CoffeeScript 1.3.1
(function() {
  var page;

  page = require('webpage').create();

  page.onConsoleMessage = function(msg) {
    return console.log(msg);
  };

  page.open("http://www.phantomjs.org", function(status) {
    if (status === "success") {
      return page.includeJs("http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js", function() {
        if (page.injectJs("do.js")) {
          page.evaluate(function() {
            var title;
            title = echoAndReturnTitle('hello');
            return console.log(title);
          });
          return phantom.exit();
        }
      });
    }
  });

}).call(this); 
```

`do.js`：

```
// Generated by CoffeeScript 1.3.1
(function() {

  window.echoAndReturnTitle = function(arg) {
    console.log("echoing '" + arg + "'");
    console.log($(".explanation").text());
    return document.title;
  };

}).call(this); 
```

# java - CountDownLatch 和 CyclicBarrier 的真实示例

> ID：10156191
> 
> 赞同：36
> 
> 时间：2012-04-14T18:30:16.250
> 
> 标签：java, concurrency, conceptual

我们的一位培训师在解释 CountDownLatch 和 CyclicBarrier 之间的区别时给出了一个示例。

[`CountDownLatch`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)：假设一块石头可以由 10 个人举起，那么您将等待所有 10 个人来。然后只有你可以举起石头。

[`CyclicBarrier`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html): 如果你要去野餐，你需要先在某个共同点见面，从那里开始你的旅程。

如果有人同意这些意见，请给我一些细节。

我已经阅读了这两个类的 sun API。但我需要更多解释。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2015-09-05T18:21:34.987

在假设的剧院中：

*   如果只允许一个人观看，则称为**互斥。**
*   如果允许 N 人观看该剧，则称为**Semaphore 。**如果有人在演出期间离开剧院，则可以允许其他人观看演出。
*   如果在每个人离开剧院之前都不允许任何人进入，则称为**CountDownLatch 。**在这里，每个人都有离开剧院的自由意志。
*   如果直到每个人都进入剧院才开始演出，则称为**CyclicBarrier 。**在所有的人都进入并抢占座位之前，表演者无法开始表演。一旦演出结束，同样的障碍将适用于下一场演出。

在这里，一个人是一个*线程*，一个游戏是一个*资源*。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-04-14T18:51:28.723

主要区别在于`CountDownLatch`将线程分为等待者和到达者，而所有使用 a 的线程`CyclicBarrier`都执行这两种角色。

*   使用闩锁，等待者等待最后一个到达的线程到达，但那些到达的线程自己不做任何等待。
*   使用屏障，所有线程都到达，然后等待最后一个到达。

您的闩锁示例意味着所有十个人必须等待一起举起石头。不是这种情况。一个更好的现实世界的例子是一个考试提示者，他耐心地等待每个学生提交他们的考试。学生完成考试后无需等待，可以自由离开。一旦最后一名学生提交考试（或时间限制到期），提示者将停止等待并带着考试离开。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-09-23T17:48:19.010

真实世界的例子我可以看到所有的答案实际上都缺少一个真实的例子。就像这些类如何在软件领域中使用一样

1.  **CountDownLatch** 一个多线程下载管理器。下载管理器会启动多个线程同时下载文件的各个部分。（前提是服务器支持多线程下载）。这里每个线程都会调用一个实例化的锁存器的倒计时方法。在所有线程执行完毕后，与倒计时锁相关的线程会将在不同部分中找到的部分整合到一个文件中

2.  **CyclicBarrier** 与上述相同的场景..但假设文件是​​从 P2P 下载的。再次多个线程下载这些片段。但是在这里，假设您希望在特定时间间隔后对下载的片段进行完整性检查。在这里，循环屏障起着重要作用。在每个时间间隔之后，每个线程都会在屏障处等待，以便与 cyclibarrier 关联的线程可以进行完整性检查。由于 CyclicBarrier，这种完整性检查可以进行多次

***如果有任何不妥之处，请纠正我。***

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-14T18:48:34.463

**用例 1** 假设您将一个大作业拆分为 10 个小任务，每个小任务一个线程。在考虑完成工作之前，您必须等待该线程的 10 个任务结束。

因此，主作业发起者线程将 CountDownLatch 初始化为使用的线程数，它将任务分配给线程并等待闩锁通过`await`方法提高为零。`countDown`每个执行器线程将在其任务结束时调用。最后，当所有线程都完成后，主线程将被唤醒，因此它认为整个工作已经完成。此方案使用`doneSignal`CountDownLatch javadoc 中描述的锁存器。

**用例 2**假设您将一个大型作业拆分为一个 * m 个任务，分布在 n 个线程上。m 对应于矩阵行，您需要计算每一行的总数。在这种情况下，必须在每个任务结束后同步线程，以便处理行的总数。在这种情况下，使用`CyclicBarrier`线程数 n 初始化的 a 用于等待每一行计算的结束（实际上是 m 次）。

为了比较两者，`CountDownLatch`应该只使用一次，并且`CyclicBarrier`可以使用任意多次，因为算法需要一组线程的同步点。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-14T18:52:16.960

A`CyclicBarrier`是可重复使用的，因此它更像是一场赛车巡回赛，每个人都在一个航路点相遇，然后继续下一段巡回赛。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-10-10T14:55:38.363

**CountDownLatch：** 如果我们想让我们所有的线程都做

> 某事+倒计时

为了让**其他等待**（计数达到零）**线程**可以继续，我们可以使用倒计时锁存器。在这种情况下，实际上执行倒计时的所有先前线程都可以继续，但不能保证**在latch.countdown() 之后处理的行将在等待其他线程到达latch.countdown() 之后** ，但它可以保证**其他线程等待线程**只会在latch.await() 达到零后进一步启动。

**CyclicBarrier：** 如果我们希望所有线程

> 做某事+共同等待+做某事

（每次等待调用都会减少线程继续执行的等待时间）

CyclicBarrier 功能只能由 CountDownLatch 实现一次，方法是调用latch.countdown()，然后由所有线程调用latch.await()。

但同样你不能重置/重用倒计时锁。

我使用 CyclicBarrier 的最佳示例是初始化多个缓存（由多个线程加热），然后开始进一步处理，我想在 Sync 中再次重新初始化其他缓存。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-05-14T18:55:12.193

**理论差异：**

在 CountDownLatch 中，主线程等待其他线程完成它们的执行。在 CyclicBarrier 中，工作线程互相等待完成它们的执行。

一旦计数达到零并且锁存器打开，您就不能重用相同的 CountDownLatch 实例，另一方面，可以通过重置屏障来重用 CyclicBarrier，一旦屏障被破坏。

**现实生活中的例子：--**

**CountDownLatch：**考虑一个 IT 世界场景，经理在开发团队（A 和 B）之间划分模块，并且他希望仅在两个团队都完成任务时将其分配给 QA 团队进行测试。

这里经理线程作为主线程工作，开发团队作为工作线程工作。经理线程等待开发团队线程完成他们的任务。

**CyclicBarrier：**考虑相同的 IT 世界场景，经理在开发团队（A 和 B）之间划分模块。他请假，并要求两个团队在完成各自的任务后互相等待，然后将其分配给 QA 团队进行测试。

这里经理线程作为主线程工作，开发团队作为工作线程工作。开发团队线程在完成任务后等待其他开发团队线程。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-08-25T10:49:43.543

**CyclicBarrier**：在Ludo Game APP中，直到所有玩家都加入游戏才能开始四人游戏。让我们假设所有四个玩家都是一个单独的线程。在这种情况下，玩家（线程）必须等待所有其他线程（玩家）加入游戏，每个线程（玩家）加入游戏后都会调用 await() 方法。只有在定义数量的线程调用 await() 方法后，它们才能继续执行。即所有玩家都加入了游戏。

**CountDownLatch**：在一家 IT 公司，假设正在进行一项针对四人团队的调查，经理需要将所有员工的反馈提交给更高的管理层。在这种情况下，所有四名员工都是线程，他们将提供反馈并调用 countDown() 方法。直到并且除非所有员工都没有提交他们的反馈或达到最后期限，否则经理线程必须通过调用 await() 方法等待。在得到员工的反馈后，经理可以将反馈提交给更高的管理层。在 countDownLatch 的情况下，线程不需要相互等待，它们可以在调用 countDown() 方法后继续执行。即员工可以继续编写程序，也可以在提交反馈后去吃午饭。

[点击这里查看更多详情](https://bibrains.blogspot.com/2021/08/countdownlatch-and-cyclicbarrier-in.html)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-06T15:46:24.103

**对于 CyclicBarrier**，我能想到的一个实时示例；让我们想象一下有一群游客乘坐节奏旅行者。一天有好几个地方要去。节奏驱动器知道有 x 个游客。一旦到达第一个地点，所有的游客在不同的时间点出去和回来；然而，节奏和旅行者必须等到所有游客返回。一旦它们全部返回，驱动程序就会继续到下一个位置，并重复相同的过程。在这里，CyclicBarrier 被初始化为游客数量。每个游客都像一个线程，在返回时，他们调用 CyclicBarrier await() 以便他们等到所有其他游客都回来。现在告诉我你的想法

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-02-02T15:31:10.873

顾名思义，循环障碍可以在循环中使用。例如：我是一家公司人力资源部，正在从各种工作门户供稿中寻找 N 份简历。我有一个技能组数组，其中包含按优先级排序的技能。对于前 java、c#、python。我想找到 N 个匹配 java 技能组的简历，但如果我没有找到所需的编号。的简历，我再次搜索下一个技能，依此类推。

我创建了一个工作人员，每个工作人员在分配的工作提要中扫描简历。两位员工都将从他们的工作提要中的主要技能集搜索开始。

执行搜索后，工作人员将检查是否找到了 N 份简历。如果找到，worker 将重置屏障并返回。否则它将等待其他工作人员完成。如果仍然没有找到 N 份简历，则将在技能组数组中的下一个技能上重新开始搜索。因此，可以递归/循环调用搜索，而无需创建新的循环屏障。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-07-12T07:12:57.930

以下是我的观察： -----> 1\. 在哪里使用什么：在循环屏障中，线程必须等待其他线程给出一些输出，然后所有线程都必须恢复处理。所以在完成执行后，每个线程都会调用 await() 方法并等待。当屏障检测到所有线程都到达它时，它会通知所有等待的线程，它们可以继续执行。屏障跟踪计数。

在 CountDownLatch 中，单个主线程等待所有线程完成。每个线程在完成执行后将计数减 1。计数达到 0 后，主线程可以恢复进一步执行。主线程跟踪计数。

Phaser：在这两种方式中，线程数都应该事先知道。无法动态添加/删除线程。如果未达到计数，则跟踪计数的线程将无限等待。使用 Phaser，线程的数量可以是动态的并且随时间变化。它类似于循环障碍。线程注册一个屏障。完成执行后，它有两个选项。它可以发出已经到达障碍点的信号，并且无需等待其他人就可以从 Phaser 注销。第二种选择是它可以等待其他注册的线程到达障碍点。

1.  计数：在创建 CyclicBarrier 时，工作线程的数量包括主线程，如果它也将等待其他线程完成。创建 CountDownLatch 时只需要提及主线程将等待完成的工作线程数。在 CountDownLatch 中有主线程和工作线程的概念，并且在创建锁存器时主等待线程不包括在计数中。Phaser 可以返回当前注册线程的计数。

2.  await() 的意图：在 CyclicBarrier :: await() 中，包括主线程在内的所有线程都是平等的并相互等待。因此 await() 应该在所有线程（工作线程和主线程）中给出。CountDownLatch :: await() 仅在主线程中给出，它使主线程等待直到其他工作线程计数为 0。因此两个 await() 的内部实现是不同的。Phaser :: 到达屏障有两个概念（arrive() 和arriveAndDeregister()) 和waiting(awaitAdvance(phase_number)) 用于其他线程。

3.  各方和等待线程：CountDownLatch 不能给出等待线程的数量，但可以给出各方(cl.getCount())，CyclicBarrier 可以给出没有等待线程 cb.getNumberWaiting()，以及各方(cb.getParties())

4.  工作职责：countdownlatch 中的工作线程需要做countdown()，await() 由一个主线程完成。在 cyclicBarrier 工作线程和主线程中，所有线程都只相互等待（）。

5.  Reuse : CyclicBarrier 可以重复使用。cb.await() 适用于新线程，例如 t1、t2 和 main。对新线程 t3、t4 和 main 的第二次调用 cb.await() 也有效。Main 将在两个调用中等待，即系统在屏障退出后自动在内部重置计数（或 reset()）。CountDownLatch 不能重复使用。- cl.await() 适用于新线程，例如 t1、t2 和 main。主线程等待 t1、t2 完成。但是对于第二个 cl.await() 调用新线程 t3,t4 和 main 不会等待。一旦集合中的所有线程都越过了障碍点，Phaser 对象可以再次被重新使用。

6.  After Finish Events : 创建时，CountDownLatch 中不能给出完成事件，但可以在 CyclicBarrier 中给出。

我的班级{

```
static class MyThread implements Runnable
{

    long waitTime;
    CyclicBarrier cyclicBarrier;
    CountDownLatch countdownlatch;
    Phaser phaser;

    MyThread(  long waitTime, CyclicBarrier cyclicBarrier, CountDownLatch countdownlatch, Phaser phaser){
        this.waitTime = waitTime;
        this.cyclicBarrier = cyclicBarrier;
        this.countdownlatch = countdownlatch;
        this.phaser = phaser;
        this.phaser.register(); //Note additional step here
    }

    @Override
    public void run() {

            try {

                Thread.sleep(waitTime);

                // Diff 4 -----> countdownlatch worker threads need to do countdown and await is done by one single main thread
                //, cyclicBarrier worker threads await on each other
                countdownlatch.countDown(); 
                cyclicBarrier.await();
                phaser.arriveAndAwaitAdvance();

                System.out.println("cyclicBarrier :: " + 
                        ", name :: " + Thread.currentThread().getName() 
                        + ", parties :: " + cyclicBarrier.getParties() 
                        + ", waiting :: "+ cyclicBarrier.getNumberWaiting()); 

                System.out.println("countdownlatch :: " + 
                            "name :: " + Thread.currentThread().getName()  +
                         ", parties :: "+countdownlatch.getCount() +
                         ", waiting :: " + "No method!!" ); 
                System.out.println("phaser :: " + 
                        "name :: " + Thread.currentThread().getName()  +
                     ", parties :: "+phaser.getRegisteredParties() +
                     ", phase :: " + phaser.getPhase()); 

                phaser.arriveAndAwaitAdvance();
                System.out.println("phaser :: " + 
                        "name :: " + Thread.currentThread().getName()  +
                     ", parties :: "+phaser.getRegisteredParties() +
                     ", phase :: " + phaser.getPhase());

                phaser.arriveAndAwaitAdvance();
                System.out.println("phaser :: " + 
                        "name :: " + Thread.currentThread().getName()  +
                     ", parties :: "+phaser.getRegisteredParties() +
                     ", phase :: " + phaser.getPhase());
                phaser.arriveAndDeregister(); 
                if (phaser.isTerminated()) { 
                    System.out.println("Phaser is terminated"); 
                } 

            } catch (InterruptedException e) {
                e.printStackTrace();
            } catch (BrokenBarrierException e) {
                e.printStackTrace();
            }

    }

}

public static class MyCBFinishEvent implements Runnable{

    public void run() {

           System.out.println("All threads have reached common barrier point "
                        + ", CyclicBarrrierFinishEvent has been triggered");
           System.out.println("You can update shared variables if any");
    }

}

public static void main(String [] args) throws InterruptedException, BrokenBarrierException{
    //Diff 1 ----- > No finish event can be given in CountDownLatch
    //Diff 5 ------> CyclicBarrier no of worker threads includes main thread, 
    //CountDownLatch is just how many threads, the main waiting thread is not included in count.
    CyclicBarrier cb = new CyclicBarrier(3, new MyCBFinishEvent());
    CountDownLatch cl = new CountDownLatch(2);
    Phaser ph = new Phaser();

    //Diff 2 ----> CountDownLatch cant give num of waiting threads, CyclicBarrier can getNumberWaiting threads
     System.out.println("Start CyclicBarrier - parties :: "+cb.getParties() + ", waiting :: " + cb.getNumberWaiting());
     System.out.println("Start CountDownLatch - parties :: "+cl.getCount() + ", waiting :: " + "No method!!" );

    Runnable t1 = new Thread(new MyThread( 10000, cb, cl, ph));
    Runnable t2 = new Thread(new MyThread( 5000, cb, cl,ph));
     Thread tt1 = new Thread(t1, "t1");
     Thread tt2 = new Thread(t2, "t2");
     tt1.start();
     tt2.start();

     //Diff 6 ---- > await meaning Main waits for t1 and t2 to complete, 
     //CyclicBarrier all are equal. each thread including main thread, if it wants to wait has to do await. 
     //CountDownLatch concept of waiting and workers. main thread await waits till other worker threads make count to 0.
     cb.await();
     cl.await();

     System.out.println("End CyclicBarrier call 1 - parties :: "+cb.getParties() + ", waiting :: " + cb.getNumberWaiting());
     System.out.println("End CountDownLatch call 1 - parties :: "+cl.getCount() + ", waiting :: " + "No method!!" );

     System.out.println("main start created t3, t4 - parties :: "+cl.getCount() + ", waiting :: " + "No method!!" );

     Runnable t3 = new Thread(new MyThread( 6000, cb, cl,ph));
        Runnable t4 = new Thread(new MyThread( 100, cb, cl,ph));
         Thread tt3 = new Thread(t3, "t3");

         Thread tt4 = new Thread(t4, "t4");

         tt3.start();
         tt4.start();

        //Diff -3 -----> 
         //CyclicBarrier - can be reused, main thread waited for t3, t4 to complete.
         //CountDownLatch - for first cl.await(), main waited... second cl.await() call main did not wait!!! 
         cb.await();
         cl.await();

         System.out.println("End main - parties :: "+cb.getParties() + ", waiting :: " + cb.getNumberWaiting());
         System.out.println("end main parties :: "+cl.getCount() + ", waiting :: " + "No method!!" );

} 
```

}

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-07-14T19:45:37.547

**CountDownLatch：“现实生活中最好的例子是——种族”**

**（任何类型的比赛，例如：赛马或自行车比赛或汽车比赛等，）**

赛马也是可以使用`CountDownLatch`.

1.  比赛距离将公布或固定。（以公里/英里/码为单位的比赛距离）
2.  马的数量将参加比赛。（马数）
3.  比赛开始前，所有马匹将到达起跑门或起点。
4.  一旦所有马匹都到达起跑门/起点，则只有比赛将开始。
5.  一旦发出信号 - 所有马将立即启动/同时释放它们。
6.  所有马匹都将开始奔跑……以完成比赛距离/到达终点。
7.  一旦所有马匹完成比赛距离或到达终点。
8.  我们得到所有马的位置/位置列表 - 获胜者列表。
9.  宣布比赛的获胜者

我们使用两个`CountDownLatch`来开始和结束比赛。

```
CountDownLatch start  = new CountDownLatch(1); // Start signal - will be always 1 only once All Horses Reach at Starting Point signal for START RACE.

CountDownLatch finish = new CountDownLatch(horses_Count); // Number of horses participating in Race nothing but Threads/Horses Count. 
```

马 - 只不过是线程。

**start.await() ：** 每匹马/线程一旦到达起始门/起点，它将等待其他马/线程到达起始门/起点无非是-`start.await();`

**start.countDown() ：**一旦所有马匹/线程到达起始门/起点，我们发出开始比赛的信号只不过是 -`start.countDown();` 当`start.countDown();`被调用时，它将`notifyAll()`让所有等待的马匹/线程开始比赛。

**finish.await() ：**一旦所有马匹/线程开始比赛，主线程将等待所有马匹/线程完成或完成 -`finish.await();`

**finish.countDown()：**一旦每匹马/线程完成 Race 将减少计数一旦最后一匹马/线程减少计数为零然后 Race Completed/Finished`finish.countDown();` 当`finish.countDown();`计数变为零时调用它将`notify()`等待主线程 - 所有马/线程完成/完成了比赛。

# c# - 找不到 OAuth2Parameters

> ID：10156197
> 
> 赞同：3
> 
> 时间：2012-04-14T18:30:43.700
> 
> 标签：c#, .net, google-docs, google-docs-api

我正在尝试使用 OAuth 2.0 来授权 google docs API，根据 google 在[https://developers.google.com/google-apps/documents-list/#authorizing_requests_with_oauth_20](https://developers.google.com/google-apps/documents-list/#authorizing_requests_with_oauth_20)给出的示例， 他们正在使用这段代码：

```
// OAuth2Parameters holds all the parameters related to OAuth 2.0.
      OAuth2Parameters parameters = new OAuth2Parameters();

      // Set your OAuth 2.0 Client Id (which you can register at
      // https://code.google.com/apis/console).
      parameters.ClientId = CLIENT_ID;

      // Set your OAuth 2.0 Client Secret, which can be obtained at
      // https://code.google.com/apis/console.
      parameters.ClientSecret = CLIENT_SECRET;

      // Set your Redirect URI, which can be registered at
      // https://code.google.com/apis/console.
      parameters.RedirectUri = REDIRECT_URI;

      ////////////////////////////////////////////////////////////////////////////
      // STEP 3: Get the Authorization URL
      ////////////////////////////////////////////////////////////////////////////

      // Set the scope for this particular service.
      parameters.Scope = SCOPE;

      // Get the authorization url.  The user of your application must visit
      // this url in order to authorize with Google.  If you are building a
      // browser-based application, you can redirect the user to the authorization
      // url.
      string authorizationUrl = OAuthUtil.CreateOAuth2AuthorizationUrl(parameters); 
```

问题是，当我尝试使用此代码时，它说找不到 OAuth2Parameters 我正在使用两者`Google.GData.Client`；& `Google.GData.Documents`;

来这里做什么？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T20:09:53.437

要使用`OAuth2Parameters`该类，您必须检查库的源并自己构建它：

[http://code.google.com/p/google-gdata/source/checkout](http://code.google.com/p/google-gdata/source/checkout)

该类将包含在即将发布的 2.0 版库中。

# animation - iOS5 CGAffineTransformMakeRotation 我第二次不工作？

> ID：10156198
> 
> 赞同：2
> 
> 时间：2012-04-14T18:30:51.767
> 
> 标签：animation, ios5, cgaffinetransform, image-rotation

我有简单的旋转变换，结合 alpha，它在第一次调用时完美运行，但第二次旋转不会发生（用户通过点击屏幕来启动这个动画）。

这是我的基本动画功能：

```
- (void) animateMe:(UIImageView *)myImage delay:(NSTimeInterval)dly
{
    [UIView animateWithDuration:1.0 
                          delay:dly
                        options:UIViewAnimationOptionAutoreverse
                     animations:^(void){
                         myImage.alpha = 1.0;
                         myImage.transform = CGAffineTransformMakeRotation(180.0);
                     }
                     completion:^(BOOL finished) {
                         myImage.alpha = 0.0;
                  }];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T18:45:37.670

问题是您第二次要旋转视图时，它已经旋转了 180 度并且线：

```
myImage.transform = CGAffineTransformMakeRotation(180.0); 
```

相当于：

```
myImage.transform = myImage.transform; 
```

因此，您应该执行以下操作：

```
myImage.transform = CGAffineTransformRotate(myImage.transform, 180.0); 
```

* * *

请注意，[文档](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html)说旋转角度应该是弧度而不是度数。所以你可能应该使用`M_PI`而不是`180.0`.

另外，请注意，[文档](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW105)说`UIViewAnimationOptionAutoreverse` **必须**与`UIViewAnimationOptionRepeat`.

> **UIViewAnimationOptionAutoreverse**
> 
> 前后运行动画。必须与 UIViewAnimationOptionRepeat 选项结合使用。

# java - 使用正则表达式的 Java 数组空洞

> ID：10156204
> 
> 赞同：0
> 
> 时间：2012-04-14T18:32:31.703
> 
> 标签：java, regex, arrays, delimiter

有人能告诉我为什么这段代码有一个洞：array[0][4]？

```
public class Random{ 

    public static void main (String []args){

        String [][] array={{"This is a test. A hole here"}};

        for(int i=0;i<array.length;i++){
            String temp=array[i][0];

            array[i]=temp.split("[\\:., ]");
        }

        System.out.print(array[0][4]);
    }
} 
```

然而，当我在分隔符中添加一个加号（“[\:., ]+”）时，我得到了正确的输出。

```
public class Random{ 

    public static void main (String []args){

        String [][] array={{"This is a test. A hole here"}};

        for(int i=0;i<array.length;i++){
            String temp=array[i][0];
            array[i]=temp.split("[\\:., ]+");
        }

        System.out.print(array[0][4]);
    }
} 
```

加号删除这个洞并解决这个问题有什么原因吗？我愿意接受任何建议或意见。是的，我是新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:52:31.467

您的字符串在`array[i]=temp.split("[\\:., ]");`此处拆分：

```
This is a test. A hole here
    ^  ^ ^    ^^ ^    ^ 
```

所以你在`array[4]`.

`array[i]=temp.split("[\\:., ]+");`它将“。”组合成一个“分裂点”，因此它不会在两者之间分裂。

# html - s 不会内联

> ID：10156206
> 
> 赞同：0
> 
> 时间：2012-04-14T18:32:41.760
> 
> 标签：html, css

我被官方难住了。显然有一个简单的解决方案，但也许我只是看不到它。

基本上我有一个内容 div 有 2 个主要的`div`s-<code>leftSide 和`rightside`-我想内联显示。每边都包含其他`div`s。无论我尝试什么，`rightSide` `div`总是求助于在`leftSide` `div`.

### HTML

```
 <div id="leftSide">
        <h6>MERCHANDISE</h6><a href="http://organthieves.spreadshirt.com" target="_blank"><img src="images/merch.gif" height="220" width="330" border="0" alt="Organ Thieves - Merch Slideshow"/></a>
        <div id="twitter">
        <div class=hr></div>
        <h6>FOLLOW US</h6>
            <script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script>
                <script>
                new TWTR.Widget({
                version: 2,
                type: 'profile',
                rpp: 4,
                interval: 30000,
                width: 330,
                height: 250,
                theme: {
                shell: {
                background: '#525252',
                color: '#ffffff'
                },
                tweets: {
                background: '#000000',
                color: '#ffffff',
                links: '#b51d1d'
                }
                },
                features: {
                scrollbar: false,
                loop: false,
                live: false,
                behavior: 'all'
                }
                }).render().setUser('OrganThieves').start();
                </script>
        </div><!--end of twitter-->
    </div><!--endof leftside-->

  <div id="rightSide">
        <div id="gigs">
             <script type="text/javascript">
             var bcGigWidgetWidth=500;
             var bcGigWidgetMaxHeight=500;
             var bcGigWidgetBackgroundColor="333333";
             var bcGigWidgetTextColor="ffffff";
             var bcGigWidgetLinkColor="eaeaea";
             var bcGigWidgetLineColor="7d7058";
             </script>
             <script type="text/javascript" src="http://organthieves.bandcentral.com/javascripts/giglistings.js"></script>
             <script type="text/javascript" src="http://organthieves.bandcentral.com/gigs/export.js"></script>
      </div><!--end gigs-->
    </div><!--end of rightSide-->
  </div><!--end content--> 
```

### CSS

```
#content{
    position: relative;
    width: 900px;
}

#leftSide{
    width: 330px;
    position: relative;
}
#twitter{
    position: relative;
    width:330px;
}
#rightSide{
    position: relative;
    width: 570px;
    background-color: #339;
    height:400px;
    display: inline;    
}
#gigs{
    float: right;
    width: 500px;
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:35:28.503

`#leftSide`并且`#rightSide`需要`float:left;`另外，请确保它们的父元素对它们都足够宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:51:54.590

在此处检查您的代码，左右浮动可用于水平排列 div。

[http://jsfiddle.net/SfHrb/](http://jsfiddle.net/SfHrb/)

# lua - Lua string.gsub() by '%s' 或 '\n' 模式

> ID：10156207
> 
> 赞同：2
> 
> 时间：2012-04-14T18:32:53.850
> 
> 标签：lua, pattern-matching, lua-patterns

英语不是我的母语，所以很难描述这个问题。
我想通过 lua string.gsub() 在 str 中得到 'd=40'，但是有一些问题。

> ------下面的代码---
> local str = [==[
> -- a=10
> - -b=20
> --c=30
> d=40
> ]==]
> 
> local pat1 = [=[%s[%s]]=]
> local pat2 = [=[\n[%s]]=]
> str:gsub(pat1, function(s) print("pat1>>" .. s ) end) --pat1>>d=40
> str:gsub(pat2, function(s) print("pat2<<" .. s) end) --不匹配
> 
> 本地 re1,_ = str:gsub("\n","$")
> 本地 re2,_ = str:gsub("%s","$")
> print(re1) --a=10$- -b= 20$ --c=30$d=40$
> print(re2) --$a=10$-$-b=20$$ --c=30$d=40$

正如 Lua 5.1 参考手册说
的 %s: 代表所有空格字符。
我认为它等于'\n'，''和'\t'。

问题：为什么 pat2 不能匹配？
但我认为 pat2 是对的，有一个 '\n'befor'd=40' ，
所以我认为它可以匹配，但它不能工作，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:44:27.730

当您`[[]]`对字符串使用表示法时，这是一个特殊的字符串文字，它完全按照您提供的方式获取字符串。没有进行字符转义。您可以在括号中放置一些`=`字符，以便更容易让您在字符串中使用 [ 字符。

字符串文字`"\n"`是一个字符，代表换行符。那是因为使用了转义字符`\`。应用于“n”字符的转义字符表示“换行符”。

字符串文字`[[\n]]`正是它所说的：字符“\”后跟字符“n”。因为没有进行转义，`\n`所以没有特殊处理。这正是它的样子。

因此，当你说`local pat2 = [=[\n[%s]]=]`你说“第一个字符应该是 '\' 后跟 'n' 后跟一个空格。这不是你想要的；你*想要*转义工作。所以你应该使用常规字符串文字：`local pat2 = "\n[%s]"`.

# android - Android - 在音频播放器中发送改变当前卡车的动作

> ID：10156208
> 
> 赞同：0
> 
> 时间：2012-04-14T18:33:02.157
> 
> 标签：android, media-player

是否可以更改音频播放器中当前播放的音乐？我知道我可以像接收 keyEvent 一样接收，`KEYCODE_MEDIA_NEXT`但是如何发送类似的信号？

# iphone - 通过 UIButton 将 UITableViewController 移回顶部

> ID：10156212
> 
> 赞同：0
> 
> 时间：2012-04-14T18:33:16.990
> 
> 标签：iphone, ios, xcode, ipad, uitableview

我正在尝试创建一个长 UITableView，我想要一个按钮，允许用户通过按下表格底部的按钮返回表格顶部。我可以知道它是怎么做到的吗？

-(IBAction) goUp (id) sender{ ??code???? }

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:35:34.787

UITableView 是 UIScrollView 的子类，所以调用 setContentOffset:animated: 如下：

```
CGPoint topOffset = CGPointMake(0, 0);
[tableView setContentOffset:topOffset animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T18:39:53.533

以另一种方式，您可以致电[`scrollToRowAtIndexPath:atScrollPosition:animated:`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/scrollToRowAtIndexPath%3aatScrollPosition%3aanimated%3a)

# ruby - 键入后在 ruby 模式下自动取消缩进“结束”？

> ID：10156218
> 
> 赞同：4
> 
> 时间：2012-04-14T18:33:53.620
> 
> 标签：ruby, emacs, ruby-mode

是否可以设置`ruby-mode`为*自动*取消缩进结尾？

例如，在 end 输入如下：

```
def foo
  # indented
  end 
```

它应该变成这样：

```
def foo
  # indented
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:18:07.267

您可以通过添加以下内容来修改您的 .emacs 以启用 ruby​​ 电动模式：

```
(require 'ruby-electric)
(add-hook 'ruby-mode-hook (lambda () (ruby-electric-mode t))) 
```

每当您键入 class 或 def 时，这将添加一个正确缩进的结尾。

# python - 将临时值与 appengine 模型查询集相关联

> ID：10156222
> 
> 赞同：-1
> 
> 时间：2012-04-14T18:34:07.483
> 
> 标签：python, google-app-engine, webapp2

以下是我的模型：

我有两张桌子`match`和`team`：

```
class Match(DictModel):
    date_time = db.DateTimeProperty()
    team1 = db.StringProperty()
    team2 = db.StringProperty()
    venue = db.StringProperty()
    result = db.IntegerProperty()

class Team(DictModel):
    tslug = db.StringProperty()
    name = db.StringProperty()
    matches_played = db.IntegerProperty()
    matches_won = db.IntegerProperty()
    rating = db.FloatProperty() 
```

在运行时，当向其中一个处理程序函数发出发布请求时，我想动态地将团队评级与查询集关联`Match`并发送值，这就是我尝试做的事情：

```
matches = Match.all()
      matches.filter('date_time <=', end)
      matches.filter('date_time >=', start)
      match_dict = functs.create_dict(matches)
      self.response.out.write(match_dict) 
```

我有一个自定义函数来获取当前团队的评分，如下所示：

```
def to_dict(self):
       return dict([(p, unicode(getattr(self, p))) for p in self.properties()])

def create_dict(matches):
  lst = []
  for m in matches:
    t1 = m.team1
    t2 = m.team2
    te1 = Team.all().filter("name =", t1).get()
    te2 = Team.all().filter("name =", t2).get()
    m.setattr('rating1', te1.rating)
    m.setattr('rating2', te2.rating)
    lst.append(m)
  data_dict = json.dumps([l.to_dict() for l in lst])
  return data_dict 
```

**麻烦：**我得到错误`setattr`代替`setattr`我也尝试过`m.rating1 = te1`，`m.rating2 = te2`但即使这样似乎也不起作用。其他一切都完美无缺。

请帮忙谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:28:28.677

语法是 setattr(m, 'rating1', te1.rating1); 但这与 m.rating1 = te1.rating1 没有什么不同。

我们可以看到回溯吗？

# php - 缩小 HTML 中的 URL

> ID：10156227
> 
> 赞同：0
> 
> 时间：2012-04-14T18:35:01.060
> 
> 标签：php, html, url, url-shortener

因此，我创建了一个文件托管站点，并开始使用一些表单构建器。但是，这些构建器不支持 PHP。现在，我想缩小一些 URL，我怎样才能在纯 HTML 中做到这一点，而不添加 PHP 方法。我对`goo[dot]gl`, `bit.ly`,`tinyurl.com`或其他什么都很好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:37:34.103

**HTML 是一种标记语言。**

如果你想使用一些 API，或者任何更面向编码的东西，你必须使用真正的编程语言——你选择：为了你的目的，PHP 将是最好的选择。

现在，如果您最终决定使用 PHP，那真的很容易。

**代码*（用于 TinyURL）：***

```
<?php
    function createTinyUrl($strURL) {
        $tinyurl = file_get_contents("http://tinyurl.com/api-create.php?url=".$strURL);
        return $tinyurl;
    }
?> 
```

**用法 ：**

```
<?php
     $myTinyUrl = createTinyUrl("http://www.yourdomain.com/some-long-url-here");
?> 
```

就这样！;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T18:51:10.273

如果表单构建器不支持 PHP，您需要自己编写。PHP 非常易于使用。

这是一个给你的例子。（假设您在 Web 主机上设置了 PHP：）

使用扩展名 .PHP（或您的网络主机使用的任何内容 - 可能是 .PHP5 用于 php5）而不是 .HTML 保存文件

您可以使用超级全局 $_GET 从地址栏中的 URL 接受某些变量，例如：

```
$short_url = $_GET["q"]; 
```

由于我得到一个名为“q”的变量，如果您使用名为“q”的参数访问页面，我将存储该变量，例如：

```
http://your.site/?q=shorturl # Assumes your index file takes the 'q' variable 
```

现在由您决定如何处理该变量。最好的办法是建立一个 MySQL 数据库，这样当你得到一个像 'shorturl' 这样的值时，你可以做一个快速的 SQL 查询来返回完整的地址，例如：

```
# Make DB connection
$db = new PDO("mysql:host='X.X.X.X';dbname='mydb'", $user, $secret);

# Function to search database for URL
function getFullURL($short_url) {
    $result;
    $sql = "SELECT full_url FROM tbl_addresses WHERE short_url='?'";
    $query = $db->prepare($sql);
    $query->execute(array($short_url));
    $rows = $query->rowCount();
    if ($rows == 1)
        $result = $query->fetchAll();
    return $result;
} 
```

在 PHP 和 MySQL 中真的没有太多的东西。

# c++ - Win CE：创建命名共享内存

> ID：10156231
> 
> 赞同：0
> 
> 时间：2012-04-14T18:35:39.643
> 
> 标签：c++, windows-ce, memory-mapped-files

我尝试在 win CE 6.0 上创建命名共享内存，但**该过程可能不会保存数据**。我写了两个过程。第一个将文本写入共享内存，第二个读取。第二个显示空消息窗口。

第一个过程：

```
#include "stdafx.h"
#include <stdlib.h>

#define BUFFSIZE 256
TCHAR szName[]=TEXT("MyFileMappingObject");
TCHAR szText[]=TEXT("Process write");

int _tmain(int argc, TCHAR *argv[], TCHAR *envp[])
{
HANDLE hMutex;  
HANDLE hMapFile;
LPCTSTR pBuff;
BOOL fFirstApp = TRUE;
int rc;

// Create mutex used to share memory-mapped structure.
hMutex = CreateMutex (NULL, TRUE, TEXT ("MyFileMOWRT"));
rc = GetLastError();
if (rc == ERROR_ALREADY_EXISTS)
    fFirstApp = FALSE;
else if (rc)
{
    _tprintf(TEXT("rc1 (%d).\n"), GetLastError());
    return 0;
}

// Wait here for ownership to ensure that the initialization is done.
// This is necessary since CreateMutex doesn’t wait.
rc = WaitForSingleObject(hMutex, 2000);
if (rc != WAIT_OBJECT_0)
{
    _tprintf(TEXT("rc2 wait (%d).\n"), GetLastError());
    return 0;
}

// Create a file-mapping object.
hMapFile = CreateFileMapping(INVALID_HANDLE_VALUE, NULL, PAGE_READWRITE, 0, 
                             BUFFSIZE, szName);
if (hMapFile == NULL)
{
    _tprintf(TEXT("Could not create file mapping object (%d).\n"), GetLastError());
    return 1;
}
else
    printf("File mapping object was created\n");

// Map into memory the file-mapping object.
pBuff = (LPTSTR)MapViewOfFile(hMapFile, FILE_MAP_WRITE, 0, 0, BUFFSIZE);
if (pBuff == NULL)
{
    _tprintf(TEXT("Could not map view of file (%d).\n"), GetLastError());
    CloseHandle(hMapFile);

    return 1;
}
else
    printf("Map view of file\n");

CopyMemory((PVOID)pBuff, szText, (_tcslen(szText) * sizeof(TCHAR)));

UnmapViewOfFile(pBuff);

// Release the mutex. We need to release the mutex twice 
// if we owned it when we entered the wait above.   ReleaseMutex(hMutex);
ReleaseMutex(hMutex);
if (fFirstApp)
    ReleaseMutex(hMutex);

CloseHandle(hMapFile);
CloseHandle(hMutex);

return 0;
} 
```

第二道工序：

```
#include "stdafx.h"
#include <stdlib.h>

#define BUFFSIZE 256
TCHAR szName[]=TEXT("MyFileMappingObject");

int _tmain(int argc, TCHAR *argv[], TCHAR *envp[])
{
    HANDLE hMutex;  
HANDLE hMapFile;
LPCTSTR pBuf;
BOOL fFirstApp = TRUE;
int rc;

// Create mutex used to share memory-mapped structure.
hMutex = CreateMutex (NULL, TRUE, TEXT ("MyFileMOWRT"));
rc = GetLastError();
if (rc == ERROR_ALREADY_EXISTS)
    fFirstApp = FALSE;
else if (rc)
{
    _tprintf(TEXT("rc1 (%d).\n"), GetLastError());
    return 0;
}

// Wait here for ownership to ensure that the initialization is done.
// This is necessary since CreateMutex doesn’t wait.
rc = WaitForSingleObject(hMutex, 2000);
if (rc != WAIT_OBJECT_0)
{
    _tprintf(TEXT("rc2 wait (%d).\n"), GetLastError());
    return 0;
}

// Create a file-mapping object.
hMapFile = CreateFileMapping(INVALID_HANDLE_VALUE, NULL, PAGE_READWRITE, 0, 
                             BUFFSIZE, szName);
if (hMapFile == NULL)
{
    _tprintf(TEXT("Could not create file mapping object (%d).\n"), GetLastError());
    return 1;
}
else
    printf("File mapping object was created\n");

pBuf = (LPTSTR) MapViewOfFile(hMapFile, FILE_MAP_READ, 0, 0, 0);    
if (pBuf)
{
    MessageBox(NULL, pBuf, TEXT("Process2"), MB_OK);
}
else
{
    _tprintf(TEXT("Could not map view of file (%d).\n"), GetLastError());
    CloseHandle(hMapFile);

    return 1;
}

UnmapViewOfFile(pBuf);

// Release the mutex. We need to release the mutex twice 
// if we owned it when we entered the wait above.   ReleaseMutex(hMutex);
ReleaseMutex(hMutex);
if (fFirstApp)
    ReleaseMutex(hMutex);

CloseHandle(hMapFile);
CloseHandle(hMutex);

return 0;
} 
```

运行进程的程序：

```
#include "stdafx.h"
#include <stdlib.h>

int _tmain(int argc, TCHAR *argv[], TCHAR *envp[])
{
    CreateProcess(TEXT("\\Windows\\Mutex_proces.exe"), NULL, 0,0,0,0,0,0,0,0);
    CreateProcess(TEXT("\\Windows\\Mutex_proces_rd.exe"), NULL, 0,0,0,0,0,0,0,0);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:16:39.130

从 MapViewOfFile 获得指向共享内存的指针后，两个进程中的代码都应该设置同步模式以读取/写入该内存，因此：

过程 1 - P1

1.  创建命名文件映射
2.  获取指向内存的指针
3.  写入内存
4.  创建命名互斥体，
5.  向 P2 发出信号（使用互斥锁）它已写入内存，并且 P2 可以读取它。.
6.  P1 应该等到 P2 读取共享内存，它可以简单地从第 4 点开始等待互斥体。

过程 2 - P2

1.  创建命名互斥体，但如果它不存在，则返回错误，或者等待 P1 创建此互斥体。
2.  创建命名文件映射并获取指向其内存的指针
3.  获取互斥锁的句柄（从 1.），P2 现在等待 P1 发出信号（使用 WaitForSingleObject）
4.  当信号到达时，您可以在读取释放互斥锁后读取内存，以便 P1 可以从第 6 点开始处理。

# facebook - 从 Facebook 群组页面获取所有图片和相关评论

> ID：10156239
> 
> 赞同：1
> 
> 时间：2012-04-14T18:36:26.513
> 
> 标签：facebook

我需要获取对特定 Facebook 群组页面所做的所有图片及其相关评论。如何通过 facebook api 实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:33:47.657

当然，您只需要向 graph.facebook.com/GROUP_ID/feed 发出请求

此处示例：[https ://developers.facebook.com/tools/explorer?method=GET&path=173972555961507%2Ffeed](https://developers.facebook.com/tools/explorer?method=GET&path=173972555961507%2Ffeed)

Graph API 非常容易理解。您拥有基本 url (graph.facebook.com)，然后您可以通过调用 graph.facebook.com/OBJECT_ID 向 facebook 上的任何对象（用户、页面、组、签入等）发出请求。这一切都在首页上：[https ://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

# eclipse - jsp和servlet问题

> ID：10156240
> 
> 赞同：0
> 
> 时间：2012-04-14T18:36:29.627
> 
> 标签：eclipse, jsp, servlets

我正在使用eclipse在jsp文件和servlet之间建立连接我正在尝试创建servlet `com.example.servlet.MyServlet`，并且我在WebContent中有一个简单`search.jsp`的jsp代码jsp代码是一些东西链接这个

```
<form method = "post" action = "MyServlet">
<br><label for="title">Title</label>

<input type="textbox" name="title" value="" /></br>
<br><label for="auther">Auther</label>
<input type="textbox" name="auther" value="" /></br>
<br><label for="date">Date</label>
<input type="textbox" name="date" value="" /></br>
<br><label for="subject">Subject</label>
<input type="textbox" name="subject" value="" /></br>
<br><input type="submit" name = "search" value ="search" align="center"></br>
</form> 
```

MyServlet 在`web.xml`文件中是已知的，但是当我运行它给出的程序时

```
javax.servlet.ServletException: Wrapper cannot find servlet class com.journal.servlet.SearchServlet or a class it depends on 
```

和

```
java.lang.ClassNotFoundException: com.journal.servlet.SearchServlet 
```

我无法弄清楚问题出在哪里，因为我认为每件事都在正确的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:49:03.830

错误说它找不到`com.journal.servlet.SearchServlet`类，你提到你有 servlet`com.example.servlet.MyServlet`

编译`.class`后的文件必须以`/WEB-INF/classes/com/example/servlet/MyServlet.class`.

因此，根据您帖子中提到的场景。更改相关`<servlet-class>`条目`web.xml`应该可以工作。

还要检查

```
Project>Build Automatically 
```

也许您不小心禁用了自动部署功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:06:58.967

你的`web.xml`文件应该有

**小服务程序位置**

```
 <servlet>
        <servlet-name>MyServlet</servlet-name>
        <servlet-class>com.example.servlet.MyServlet</servlet-class>
    </servlet> 
```

**小服务程序映射**

```
 <servlet-mapping>
        <servlet-name>MyServlet</servlet-name>
        <url-pattern>/MyServlet</url-pattern>
    </servlet-mapping> 
```

控制台显示您的包`com.journal.servlet....`不是这样，请`com.example.servlet...`确保您已正确定义了您的包。所以重命名你的包

# javascript - Jquery/JavaScript 代码绑定到集合

> ID：10156242
> 
> 赞同：0
> 
> 时间：2012-04-14T18:36:36.497
> 
> 标签：javascript, jquery

我有一个动态生成的记录表，对于每一行，我都有一个类名设置为“hdelete”的锚标记，以使我能够在单击的特定行的链接上调用删除方法。我目前有一些代码支持使用 class ='hdelete' 连接所有锚点

```
 $("#tbl_srecords").click(function (e) {
       $(e.target).hasClass("hdelete") ? fnDeletehrecord($(e.target)) : null; //Run the delte row function here
    }); 
```

上面的代码似乎不起作用。它目前所做的只是选择第一次出现的带有 class='hdelete' 的锚点。任何人对如何最好地实现这一点有更好的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:44:12.303

`I have a dynamically generated table`

```
$("#tbl_srecords a.hdelete").live('click', function (e) {
    fnDeletehrecord($(this)); // pass the element as a parameter to the function
}); 
```

`live`已弃用

这是最新的（推荐）

```
$("#tbl_srecords").on('click', 'a.hdelete', function (e) {
    fnDeletehrecord($(this)); // pass the element as a parameter to the function
}); 
```

因为动态内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T18:46:20.690

这会将一个函数绑定到所有具有类 hdelete 的锚标记，并调用 fnDeletehrecord 函数，并将元素作为 jquery 对象作为参数传递。

```
 $("#tbl_srecords a.hdelete").click(function(){
       //NOTE: This represents the anchor tag that fired the event
       fnDeletehrecord($(this));
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T18:39:13.960

这应该有效：

```
$("#tbl_srecords a.hdelete").click(fnDeletehrecord); 
```

`hdelete`此代码将处理带有 id 元素内的类的链接上的点击事件`tbl_srecords`。

# nhibernate - FluentNHibernate - 级联插入

> ID：10156245
> 
> 赞同：0
> 
> 时间：2012-04-14T18:37:20.793
> 
> 标签：nhibernate, insert, cascade, fluent

我有以下代码：

```
 // setup
  var sessionFactory = SessionManager.CreateSessionFactory(true);

  // business
  using (var session = sessionFactory.OpenSession())
  {
    using (var tran = session.BeginTransaction())
    {
      var user1 = new UserDto() {Email = "e1@ma.il", FirstName = "FN1", LastName = "LN1"};
      var user2 = new UserDto() {Email = "e2@ma.il", FirstName = "FN2", LastName = "LN2"};

      var projType1 = new ProjectTypeDto() {ProjectTypeName = "ptn1", ProjectTypeDescription = "ptd1"};

      var timeSheet1 = new TimeSheetDto(){ Comment = "c1", User = user1, ProjectType = projType1 };
      var timeSheet2 = new TimeSheetDto(){ Comment = "c2", User = user2, ProjectType = projType1 };

      session.SaveOrUpdate(timeSheet1);
      session.SaveOrUpdate(timeSheet2);

      tran.Commit();
    }
  } 
```

它在“tran.Commit();”上中断 线。

Exception 表示 timeSheet 指的是 NotExistent 用户。（ 很明显 ）

如何使其自动添加所有相关对象？

我正在使用以下映射：

```
 public class TimeSheetMap : ClassMap<TimeSheetDto>
  {
    public TimeSheetMap()
    {
      Id(x => x.Id);
      Map(x => x.StartTime);
      Map(x => x.EndTime);
      Map(x => x.Comment);
      References(x => x.User).Cascade.All();
      References(x => x.ProjectType).Cascade.All();
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T03:16:47.383

您需要使用 inverse 将一侧声明为父级，否则保存两侧。尝试将您的时间表地图更改为：

```
 public class TimeSheetMap : ClassMap<TimeSheetDto>
  {
    public TimeSheetMap()
    {
      Id(x => x.Id);
      Map(x => x.StartTime);
      Map(x => x.EndTime);
      Map(x => x.Comment);
      References(x => x.User).Cascade.All().Inverse();
      References(x => x.ProjectType).Cascade.All().Inverse();
    }
  } 
```

# java - 是否有任何 Java 工具可以与外部 CLI 进行通信？

> ID：10156246
> 
> 赞同：3
> 
> 时间：2012-04-14T18:37:24.947
> 
> 标签：java, command-line-interface

我需要一种与外部工具通信的方法，该工具具有来自我的 Java 应用程序的命令行界面。有什么方便的工具/库可以减轻痛苦吗？相信我，我已经用谷歌搜索了足够多的东西。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:39:19.530

您可以[`Runtime.exec()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)用于执行操作系统的外部命令。但是，请注意使用它的注意事项 - 请务必先阅读[本文](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)。

如果这对您的需求来说过于简单，请查看[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)。它从 Java 1.5 开始可用，来自[发行说明](http://docs.oracle.com/javase/1.5.0/docs/guide/lang/enhancements.html)：

> 与 Runtime.exec 相比，新的 ProcessBuilder 类提供了一种更方便的方式来调用子流程。特别是，ProcessBuilder 可以很容易地使用经过修改的流程环境（即，基于父流程环境，但有一些更改）启动子流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T04:27:27.677

我最终使用了来自 Intellij IDEA 平台 API 的进程处理程序（更具体地说，com.intellij.execution.process.OSProcessHandler）+ 编写我自己的基于命令的小型框架，其中每个命令都知道如何执行自身（写入）和解析来自进程的响应（读取）。

# algorithm - 填充树的所有节点的数据字段

> ID：10156247
> 
> 赞同：0
> 
> 时间：2012-04-14T18:37:26.957
> 
> 标签：algorithm, data-structures, tree

> 二叉树的一个节点有两个指针“left”和“right”，以及两个数据字段“leftcount”和“rightcount”。“leftcount”指定节点左子树中的节点数，“rightcount”指定节点右子树中的节点数。编写一个算法来填充树的所有节点的数据字段。

我在一次采访中被问到这个问题。我想出了一个基于树的后序遍历的解决方案。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:54:35.163

这应该有效（我相信）：

```
int populateCounters(Node* node) {
    if(node == NULL) return 0;
    node->leftCount = populateCounters(node->left);
    node->rightCount = populateCounters(node->right);
    return node->leftCount + node->rightCount + 1;
} 
```

# python - Django RelatedManager 将元组转换为 Unicode 字符串？

> ID：10156250
> 
> 赞同：0
> 
> 时间：2012-04-14T18:37:48.830
> 
> 标签：python, django

为了帮助自己学习 Python，我正在使用 Django 编写一个简单的问题跟踪器。

我有两个简单的类（为简洁起见，省略了一些代码），`Issue`并且`Version`

有一个`ISSUE_STATE`元组用于维护`Issue`的状态：

```
ISSUE_STATE = (
    ('p', 'In Progress'),
    ('o', 'Open'),
    ('r', 'Resolved'),
    ('c', 'Closed'),
) 
```

它的维护`Issue`方式如下：

```
class Issue(models.Model):
    state = models.CharField(max_length=1, choices=ISSUE_STATE)
    fix_version = models.ForeignKey(Version, related_name='issuesAsFix', null=True, blank=True, default=None) 
```

（您还可以看到，a`Version`维护一个`Issue`对象列表。）

**问题：**

当我访问单个`Issue`实例的状态时，它会作为元组返回。当我访问对象`Issue`提供的状态时`Version`，它以 Unicode 字符串形式返回：

```
>>> v = Version()
>>> v.save()

>>> i = Issue()
>>> i.fix_version = v
>>> i.state = ISSUE_STATE[1]
>>> i.save()

>>> i.state
('o', 'Open')
>>> v.issuesAsFix.all()[0].state
u"('o', 'Open')"

>>> i == v.issuesAsFix.all()[0]
True
>>> i is v.issuesAsFix.all()[0]
False 
```

为什么作为 a 的子属性访问时，a 字符串的`state`变量是？`Issue``Version`

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:43:31.167

> ```
> >>> i.state = ISSUE_STATE[1] 
> ```

此行不正确。它应该是：

```
>>> i.state = ISSUE_STATE[1][0] 
```

# c++ - 调用多个内核，全局内存性能——CUDA

> ID：10156253
> 
> 赞同：1
> 
> 时间：2012-04-14T18:38:50.210
> 
> 标签：c++, cuda, gpu

我有四个 CUDA 内核以下列方式处理矩阵：

```
convolution<<<>>>(A,B);
multiplybyElement1<<<>>>(B);
multiplybyElement2<<<>>>(A);
multiplybyElement3<<<>>>(C);

// A + B + C with CUBLAS' cublasSaxpy 
```

每个内核基本上（首先卷积除外）执行矩阵每个元素乘以在其常量内存中硬编码的固定值（以加快速度）。

我是否应该通过调用类似的方法将这些内核合并为一个

```
multiplyBbyX_AbyY_CbyZ<<<>>>(B,A,C) 
```

?

全局内存应该已经在设备上，所以这可能无济于事，但我不完全确定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:15:47.057

如果我理解正确，您问是否应该将三个“multiplybyElement”内核合并为一个，其中每个内核读取整个（不同）矩阵，将每个元素乘以一个常数，并存储新的缩放矩阵。

鉴于这些内核将受到内存带宽的限制（实际上没有计算，每个元素只需乘一次），除非您的矩阵很小，否则合并内核不太可能有任何好处，在这种情况下，您会低效地使用 GPU因为内核将串行执行（相同的流）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:35:14.893

如果合并内核意味着您只能通过一次内存，那么您可能会看到 3 倍的加速。

您可以先将固定值相乘，然后在单个内核中进行单次乘法吗？

# oauth-2.0 - 跨应用共享 Facebook 访问令牌

> ID：10156255
> 
> 赞同：1
> 
> 时间：2012-04-14T18:39:07.343
> 
> 标签：oauth-2.0, facebook-oauth, facebook-access-token

我想使用 facebook api 向第三方提供服务。我们可以共享访问令牌吗？如果第三方向我的服务提供用户的访问令牌，即使我的 app_id 和密码与请求它的应用程序不匹配，我是否可以访问该用户数据？

我是否应该让用户在我的网站上通过单独的 oauth 流程，即使他们已经为其他第三方完成了它？

谢谢。

-ken

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T11:07:54.033

即使该用户访问令牌仅为一个应用程序颁发，也可以从任何其他应用程序轻松使用。

例子：

1.  在此处获取“Graph API Explorer”应用程序的访问令牌[https://developers.facebook.com/tools/explorer/?method=GET&path=me](https://developers.facebook.com/tools/explorer/?method=GET&path=me)并提出请求 - 您将看到您的数据。
2.  复制访问令牌并打开其他机器|浏览器并转到 https://graph.facebook.com/me?access_token=[access_token] - 您仍然可以检索有关您的 Facebook 用户的信息！

这里[https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)它提到

> 我们的数据政策明确禁止与任何其他应用共享您的应用的访问令牌。但是，我们确实允许开发人员在同一应用程序的本机实现和服务器实现之间共享令牌（即使用相同的应用程序 ID），只要使用 HTTPS 进行传输即可。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T16:01:16.427

关于：

> 我们可以共享访问令牌吗？

和，

> 即使我的 app_id 和密码与请求它的应用程序不匹配，我是否可以访问该用户数据？

答案是`No`。从规范[OAuth2 第 10.3 节](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-25#section-10.3)：

> > 访问令牌凭证（以及任何机密访问令牌属性）必须在传输和存储过程中保持机密，并且仅在授权服务器、访问令牌对其有效的资源服务器以及向其颁发访问令牌的客户端之间共享.

* * *

> 我是否应该让用户在我的网站上通过单独的 oauth 流程，即使他们已经为其他第三方完成了它？

答案是`Yes`。如果您使用 facebook 作为授权服务器，并且您再次重新启动 oauth 流程，您的用户只需要批准您的其他应用程序（第三方）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-14T19:30:04.803

每个访问令牌仅针对一个应用程序发布 - 它不能与不同的应用程序 ID 一起使用。

# c++ - 函数显式特化的语法

> ID：10156260
> 
> 赞同：3
> 
> 时间：2012-04-14T18:39:43.227
> 
> 标签：c++

根据[教程](http://www.gotw.ca/publications/mill17.htm)，</p>

```
// Example 2: Explicit specialization 
// 
template<class T> // (a) a base template 
void f( T ){;}

template<class T> // (b) a second base template, overloads (a) 
void f( T* ){;}     //     (function templates can't be partially 
//     specialized; they overload instead)

template<>        // (c) explicit specialization of (b) 
void f<>(int*){;} // ===> Method one 
```

我还使用 VS2010 SP1 测试了以下内容，没有任何警告。

```
template<>        // (c) alternative
void f<int>(int*){;} // ==> Method two 
```

**问题**> 根据 C++ 标准推荐哪种方式？方法一还是方法二？

如您所见，方法一和方法二的主要区别如下：

```
template<>        
void f<>(int*){;}    // ===> Method one

template<>        
void f<int>(int*){;} // ===> Method two
       ^^^ 
```

根据教程，我们应该编写以下普通的旧函数：

```
void f(int*){;} 
```

但这不是我要问的问题:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:59:26.350

> 当模板被特化可以通过参数推导（使用声明中提供的参数类型作为参数类型）和部分排序来确定时，完整的特化声明可以省略显式模板参数。 [来自 Vandervoode，Josuttis 的“C++ 模板”]

在您的示例中就是这种情况，因此您可以编写：

```
template<>
void f(int){;} 
```

专攻 (a) 和

```
template<>
void f(int*){;} 
```

专攻 (b)。

# codeigniter - CodeIgniter 控制器给出 404 或无法加载视图文件

> ID：10156262
> 
> 赞同：0
> 
> 时间：2012-04-14T18:39:52.213
> 
> 标签：codeigniter

我在 CodeIgniter 安装中遇到了一个简单控制器的以下问题。

在`controllers/pages.php`Pages.php 控制器中查看 URL 段并从目录内的文件夹和子文件夹中加载静态文件`/views/pages`。

例子：

*   如果我有`site.com/buy`，那么它将加载 buy.php 表单`/views/pages`
*   如果 URL 是`site.com/buy/go`，那么它将`go.php`从 加载`/views/pages/buy`，而`site.com/buy`现在`index.php`将从 `/views/pages/buy`

已更改为添加另一个子文件夹（例如`site.com/buy/go/why`from `/views/pages/buy/go/why`）；

控制器：

```
class Pages extends CI_Controller {

public function __construct() {
    parent::__construct();
    $this->view(); 
}

private function view() {

    $url_string = $this->uri->uri_string();

    if (!file_exists(APPPATH . 'views/pages/'. $url_string. '/index.php')) {
        if (!file_exists(APPPATH . 'views/pages/' . $url_string . '.php')) {
            show_404();
        } else {
            $path = $url_string . '.php';
        }
    } else {
        $path = $url_string . '/index.php';   
    }

    $this->load->view('pages/' . $path);

} 
```

问题是无论 URL 是什么，我都会收到 404。

`pages/`如果我从中删除`$this->load->view`会引发另一个错误：无法加载文件；但它确实得到了正确的文件。（例如，无法加载`buy/go.php, while the URL is`site.com/buy/go`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:12:21.080

我一直在尝试一些不同的事情，看看发生了什么。

我不会详细介绍我尝试的所有内容，但基本上只有几件事需要更改。使用`__construct()`似乎无法以您尝试使用它的方式工作（即简单地将所有请求传递给一种方法）。相反，您需要手动指定所有方法或使用路由 - 这就是我所做的。

将以下行添加到您`config/routes.php`将所有请求重定向到视图方法：

```
$route['pages/(:any)'] = 'pages/view';
```

一旦你确定了路线，就不需要`__construct`. 剩下的唯一事情就是删除`pages/`路径的一部分，您可能已经这样做了。我已经测试了以下代码`/pages/buy/go/test`（3 级），但理论上它应该在任何嵌套级别上都一样。

```
类页面扩展 CI_Controller {

    公共功能视图（）
    {
        $url_string = $this->uri->uri_string();

        if (!file_exists(APPPATH . 'views/'. $url_string. '/index.php'))
        {
            if (!file_exists(APPPATH . 'views/' . $url_string . '.php'))
            {
                显示_404（）；
            }
            别的
            {
                $path = $url_string 。'.php';
            }
        }
        别的
        {
            $path = $url_string 。'/index.php';   
        }
        $this->load->view($path);
    }
}

```

作为旁注，您不需要在加载视图时添加文件扩展名，除非它不是`.php`.，尽管这并不重要。

# android - 通过 Android 应用程序在 facebook 上上传远程视频

> ID：10156265
> 
> 赞同：0
> 
> 时间：2012-04-14T18:40:05.343
> 
> 标签：android, facebook, facebook-graph-api, android-layout, android-emulator

我想在 Facebook 个人资料上上传视频。但视频不在我的安卓手机上。视频在服务器上。我有那个视频的网址。可能吗 ？

我已经使用 Graph api 将视频从我的手机上传到 Facebook。它工作正常。我也可以在 facebook 墙上发布该网址。但我想上传视频，不仅将 url 作为字符串发布。任何人都可以分享他的经验来解决这个任务..提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:41:27.997

您可以做的是，在服务器上安装 PHP SDK（如果不是 PHP，则安装另一个服务器端 SDK），将 auth-token 和其他数据（例如视频标题）从应用程序传递到服务器，然后将视频上传到FB 使用应用程序提供的访问令牌。

如果您需要更多详细信息，请告诉我，但它应该足够直截了当。

# php - 如何将混合的 PHP 字符串仅转换为数字

> ID：10156267
> 
> 赞同：2
> 
> 时间：2012-04-14T18:40:26.887
> 
> 标签：php

我有一个这样的字符串：

```
$string = 'e.g. 25.32'; 
```

我只想提取数字（25.32）

数字周围的文本可能是任何非数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T18:47:01.277

你可以使用类似的东西：

```
<?php
     $str = "e.g. 25";
     $val = (int)$str;
?> 
```

但这**不是最好的解决方案**。

* * *

一个“更强大”和**普遍**的替代方案是......

**代码：（**更新）

```
<?php
    $str = "e.g. 25.32";

    preg_match("/([0-9]+[\.,]?)+/",$str,$matches);

    $val = $matches[0];

    echo $val;
?> 
```

**输出 ：**

```
25.32 
```

* * *

**作为一个函数：（**更新）

```
<?php
      function getInt($str)
      {
            preg_match("/([0-9]+[\.,]?)+/",$str,$matches);
            return $matches[0];
      }
?> 
```

**用法 ：**

```
<?php
      $val = getInt("e.g. 25.32");
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T19:01:54.117

如果数字很简单：

```
([0-9]+(?:\.[0-9]+)?) 
```

然后你想在字符串的末尾匹配这个：

```
$string = 'e.g. 25.32';
$number = preg_replace('~^.*?([0-9]+(?:\.[0-9]+)?)$~', '$1', $string); 
```

这将使`$number`contains `"25.32"`，如果您需要 float 值，将其转换为 float ：

```
$float = (float) $number; 
```

此代码仅在实际存在数字时才有效。如果不能确定，请先测试：

```
$string = 'e.g. 25.32';
$number = NULL;
$hasNumber = preg_match('~([0-9]+(?:\.[0-9]+)?)$~', $string, $matches);
if ($hasNumber)
{
    list(, $number) = $matches;
} 
```

如果数字可以是 PHP 中的数字：

```
([+-]?INF|[+-]?(([0-9]+|([0-9]*[\.][0-9]+)|([0-9]+[\.][0-9]*))|([0-9]+|(([0-9]*[\.][0-9]+)|([0-9]+[\.][0-9]*)))[eE][+-]?[0-9]+)) 
```

因此，请注意您实际需要匹配的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T18:46:46.187

如果您使用[preg_match知道字符串的格式，则可以使用正则表达式](http://php.net/manual/en/function.preg-match.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T18:59:04.187

我的旧函数也适用于负数：

```
function getNumber($str){
    return floatval(preg_replace('/^[^\d-]+/','',$str));
} 
```

# haskell - Haskell 数据类型错误

> ID：10156269
> 
> 赞同：1
> 
> 时间：2012-04-14T18:40:31.337
> 
> 标签：haskell, types

我有这个功能：

```
data Memory = Memory
    {visited::[Point]
    ,dfsstack::[Point]
    ,currentPoz::Point
    }deriving(Eq)
perceiveAndAct :: SVal -> [Cardinal] -> a -> (Action, a)
perceiveAndAct s cs m
  | elem W cs == True && elem N cs == True && elem E cs == True && elem S cs == False = (Just S, Memory (visited m) (dfsstack m) (currentPoz m)) 
```

把 m 而不是 `Memory (visited m) (dfsstack m) (currentPoz m)`工作正常，否则它给了我：

```
Couldn't match expected type `(a, b)'
           against inferred type `Memory -> Point'
    In the first argument of `fst', namely `currentPoz'
    In the first argument of `($)', namely `fst currentPoz'
    In the expression: fst currentPoz $ currentPoz m 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T18:49:16.680

您提供的类型`perceiveAndAct`非常多态。相比：

```
id :: a -> a
id m = m -- the only correct implementation
id m = Memory (visited m) (dfsstack m) (currentPoz m) -- type error
-- only works for Memory, not all possible a

idMemory :: Memory -> Memory
id m = m -- this is fine
id m = Memory (visited m) (dfsstack m) (currentPoz m) -- also correct 
```

但是，我有点困惑，因为您粘贴的类型错误与我在进行您声称所做的更改时得到的类型错误不匹配。也许您最好将您使用的给出错误的确切代码与您得到的确切错误一起粘贴，而不是正确的代码和一些我们看不到的不可见代码的错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-14T18:44:56.867

`visited`, `dfsstack`, 和`currentPoz`是函数，它们不构造列表。

你想写`Memory [m] [m] m`，而不是。

`visited`, `dfsstack`, 和是*给定*`currentPoz`的函数，可以提取这些元素中的每一个。 *`someData :: Memory`*

 *您还需要将`perceiveAndAct`参数“m”的类型从`:: a`更改为`:: Point`*

# php - PHP/MYSQL 更新语句建议

> ID：10156273
> 
> 赞同：1
> 
> 时间：2012-04-14T18:41:44.050
> 
> 标签：php, mysql

我有一个包含用户详细信息的表单和一个更新语句，如果用户愿意，它将更新这些详细信息，我添加了验证，以便电子邮件不能与另一个帐户相关联，因此 `if($checkuser != 0)`

该声明的问题在于，如果用户不更改他们的电子邮件并更新他们的详细信息，他们将收到一个错误消息，指出电子邮件已经存在。

我想在电子邮件存在检查之后进行集成，`else if(($_POST["myusername"]) == ($row['email']))`然后继续更新。（myusername 变量名称包含电子邮件）这意味着如果发布的电子邮件与他们当前的电子邮件相同，则继续更新。

但是我迷路了，因为我对 PHP 比较陌生，所以我在括号和括号方面遇到了麻烦。

**这是我的代码**

```
if($_POST['usubmit']=='Update') 
{
    $Uerr = array();

    if (!$_POST['fullname'] || !$_POST['myusername']) 
        {   
            $Uerr[] = '&raquo; Name or Email must be filled in!';
        }

    if (!checkEmail($_POST['myusername']))
        {
            $Uerr[]='&raquo; Your email is not valid!';
        }

    // If there are no errors
    if(!count($Uerr))
        {
            /* Now we will check if username is already in use or not */
           $queryuser=mysql_query("SELECT * FROM customer WHERE email='" . mysql_real_escape_string($_POST["myusername"]) . "'");
           $checkuser=mysql_num_rows($queryuser);

           if($checkuser != 0)
            { 
                $Uerr[]='&raquo; Sorry this email is already registered!';
            }

        else 
                {
                    $updateDetails = mysql_query("UPDATE customer SET 
                    name = '" . mysql_real_escape_string($_POST["fullname"]) . "', 
                    dob = '" . mysql_real_escape_string($_POST["dob"]) . "',  
                    address = '" . mysql_real_escape_string($_POST["address"]) . "', 
                    email = '" . mysql_real_escape_string($_POST["myusername"]) . "', 
                    telephone = '" . mysql_real_escape_string($_POST["telephone"]) . "' 
                    WHERE cus_id = '$cus_id'"); 

                    if ($updateDetails) 

                            $_SESSION['Umsg']['Ureg-success']="&raquo; Your details have been updated successfully!";

                       else { 
                              $Uerr[]='&raquo; error updating your account'.mysql_error(); 
                            }
                }
        }
            if(count($Uerr))
            {
                $_SESSION['Umsg']['Ureg-err'] = implode('<br />',$Uerr);
            }

    header("Location: account.php");
    exit;        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:53:18.270

这应该工作

```
if($_POST['usubmit']=='Update') 
{
    $Uerr = array();

    if (!$_POST['fullname'] || !$_POST['myusername']) 
        {   
            $Uerr[] = '&raquo; Name or Email must be filled in!';
        }

    if (!checkEmail($_POST['myusername']))
        {
            $Uerr[]='&raquo; Your email is not valid!';
        }

    // If there are no errors
    if(!count($Uerr))
        {
            /* Now we will check if username is already in use or not */
           $queryuser=mysql_query("SELECT * FROM customer WHERE email='" . mysql_real_escape_string($_POST["myusername"]) . "' AND cus_id !=" . $cus_id(mysql_real_escape_string));

           $checkuser=mysql_num_rows($queryuser);

           if($checkuser != 0)
            { 
                $Uerr[]='&raquo; Sorry this email is already registered!';
            }

        else 
                {
                    $updateDetails = mysql_query("UPDATE customer SET 
                    name = '" . mysql_real_escape_string($_POST["fullname"]) . "', 
                    dob = '" . mysql_real_escape_string($_POST["dob"]) . "',  
                    address = '" . mysql_real_escape_string($_POST["address"]) . "', 
                    email = '" . mysql_real_escape_string($_POST["myusername"]) . "', 
                    telephone = '" . mysql_real_escape_string($_POST["telephone"]) . "' 
                    WHERE cus_id = '$cus_id'"); 

                    if ($updateDetails) 

                            $_SESSION['Umsg']['Ureg-success']="&raquo; Your details have been updated successfully!";

                       else { 
                              $Uerr[]='&raquo; error updating your account'.mysql_error(); 
                            }
                }
        }
            if(count($Uerr))
            {
                $_SESSION['Umsg']['Ureg-err'] = implode('<br />',$Uerr);
            }

    header("Location: account.php");
    exit;        
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T18:54:43.463

> 我有一个包含用户详细信息的表单和一个更新语句，如果用户愿意，它将更新这些详细信息，我添加了验证，以便电子邮件不能与另一个帐户相关联，因此该语句的问题是，如果用户不更改他们的电子邮件并更新他们的详细信息，他们将收到一条错误消息，指出电子邮件已存在。

您为什么不检查是否存在其他帐户的电子邮件，**除了他的帐户**可以通过对您的查询进行一些更改来解决。

```
$queryuser=mysql_query("SELECT * FROM customer WHERE email='" . 
mysql_real_escape_string($_POST["myusername"]) . "' AND cus_id!=" . intval($cus_id)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T18:47:52.443

我做了一些丑陋的事情，但效果很好。

我在一些隐藏的输入上添加了实际信息，例如：

`<input type="hidden" name="actual_email" value="<?php echo $object->email; ?>" />`

现在您只需要检查用户输入（可见）上的电子邮件是否与隐藏输入上的相同，如果是，则忽略电子邮件验证，因为这意味着用户没有更改他的电子邮件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T18:46:28.697

当您让用户更改他们的信息时，他们应该只能访问他们的帐户（出于安全和隐私目的）。因此，在获取他们的信息时，您应该使用他们的电子邮件作为标识符。

# oracle - 如何使用 CURSOR 将超过 20000 的批量记录插入数据库？

> ID：10156274
> 
> 赞同：-2
> 
> 时间：2012-04-14T18:41:54.413
> 
> 标签：oracle, stored-procedures

嗨实际上我试图将批量记录插入数据库。记录超过20000。我必须将记录插入三个表中，因为这些记录是相互关联的。例如 ：

```
1\. One sort of data into the Table 1.
 1.1 another sort of data into the Table 2.
   1.1.1 another sort of data into the Table 3. 
```

我们可以将上述语句视为嵌套的贷款代码 hereoop。目前 m 使用 Cursor 进行上述方法，但它需要 vvvv 很长时间。等待您的宝贵建议....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:04:01.017

听起来你想要一个`INSERT ALL`声明。就像是

```
INSERT ALL
  WHEN (<<some condition>>) THEN 
    INTO table1( <<list of columns>> )
      VALUES( <<list of columns>> )
  WHEN (<<another condition>>) THEN
    INTO table2( <<list of columns>> )
      VALUES( <<list of columns>> )
  WHEN (<<third condition>>) THEN
    INTO table3( <<list of columns>> )
      VALUES( <<list of columns>> )
  SELECT <<list of columns>> 
    FROM <<source tables>>
   WHERE <<some predicates>> 
```

最后的`SELECT`语句通常是您用来填充游标的任何查询。这些条件将实现您在循环内实现的任何逻辑，以确定将数据插入到哪个表中。

如果您知道游标中的行将始终插入到单个表中，则可以使用 an`INSERT FIRST`而不是 an `INSERT ALL`（其余语法保持不变），以便 Oracle 可以在第一个条件评估为 TRUE 时停止评估条件。

# java - 在bluej中编译？

> ID：10156277
> 
> 赞同：2
> 
> 时间：2012-04-14T18:42:51.870
> 
> 标签：java

```
class box {
  double ht,wdt,len;

  box(double h,double w,double l) {
    ht=h;
    wdt=w;
    len=l;
  }

  double volume() {
    return ht*wdt*len;
  }
}

class boxme {
  public static void main(String args[]) {
    box mybox= new box(1,2,3);
    System.out.print("The volume is "+mybox.volume());
  }
} 
```

// 对于要在 bluej 中运行的代码，我仍然需要在创建对象后提供参数（尽管我已经在我的代码中提供了它们）。相同的代码在 cmd 中运行良好，但在 bluej 中尝试时显示出这种差异。请提供一个理由和解决方案来证明 bluej 和 cmd 之间的等价性？//

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:58:28.120

当您有两个不同的类并且想要使用另一个类中的方法时，您必须创建该类的一个实例。

右键单击第二个类并运行该`public static void main(String args[])`函数。

请注意，类的名称必须以大写字母开头，并且字段必须`private`限定安全范围，对象应始终小写。

```
public class Box {   
  private double ht,wdt,len;

  public Box(double h,double w,double l) {
    ht=h;
    wdt=w;
    len=l;
  }

  public double volume() {
    return ht*wdt*len;
  }
}
public class boxme {
  public static void main(String args[]) {
    Box mybox= new Box(1,2,3);
    System.out.print("The volume is "+mybox.volume());
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:54:00.887

在 BlueJ 中显式运行对象时，您不需要创建对象，因为您已经定义了 main 函数。

右键单击该类并运行 public static void main(String args[]) 函数。

# android - 可以在少量文本编辑后重新打包 APK 吗？

> ID：10156278
> 
> 赞同：10
> 
> 时间：2012-04-14T18:43:02.673
> 
> 标签：android, mobile, air, apk

我正在创建一个软件，它将引导用户通过几个步骤来发布一个 android 应用程序（APK 文件）。

我这样做的方式是，APK 文件已经编译，我需要做的就是替换包中的 XML 文件，这将改变应用程序的行为。我现在的大问题是，解压缩 apk 文件，进行任何微小的文本编辑，然后再次打包，会破坏签名并阻止应用程序在任何设备上运行，从而给出签名不正确的消息。

我该如何解决这个问题？我想安全地打开 APK，在文本文件中写入一些内容，然后再次关闭它。请注意，此操作将在用户的计算机上完成（在他购买我们的应用程序之后），因此我们正在寻找一个没有特殊要求的命令行工具，如 JDK。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-15T11:37:51.417

好的，我找到了最好的“经过测试”的解决方案——我把它贴在这里是为了节省其他开发人员在谷歌上搜索的时间。唯一的缺点是我会要求客户在他的机器上安装 JDK，很遗憾。原因是我没有找到任何纯粹在windows上工作的apk签名工具，而不依赖于JDK。

我使用 Air 创建了我的 android 应用程序，所以这对我来说很容易——所有的空气文件都被视为资源资产。因此，请准备好您的 APK 存档文件。

准备好修改后，将它们放在名为“assets”的临时文件夹中。您将使用 7-zip 命令行工具（免费： http: [//sourceforge.net/projects/sevenzip/](http://sourceforge.net/projects/sevenzip/)）来更新您的 apk 的内容。要让它与您的 apk 一起使用，您必须将 apk 的扩展名重命名为 zip - 不用担心，您稍后会改回来。

现在从包含您的 apk 文件（zip 扩展名）和资产文件夹的位置的 .bat 文件（或直接在命令提示符中），您将调用：7za u APK-file.zip assets

现在您的 apk 文件已更新。将其重命名为 .apk 扩展名

[现在您将使用https://code.google.com/p/signapk/](https://code.google.com/p/signapk/)中的 signAPK 工具，并注意这是唯一需要安装 JDK 的步骤。它还假设您已准备好密钥文件（替换包中包含的虚拟文件）。提取文件内容并调用：java -jar signapk.jar key.x509.pem key.pk8 [android_app].apk [signed_android_app].apk

最后，您可能会发现签名的 apk 文件大小急剧增加。所以你需要使用android的zipAlign工具：（该死，不能发布链接，因为新用户最多只能发布两个超链接）你将调用命令：zipAlign -c 4 [signed_android_app].apk

瞧！这就是我要走的路线。

*如果有人找到了一种不依赖 JDK 来进行签名过程的方法（假设密钥文件已准备好），请分享。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T23:38:12.857

> 我该如何解决这个问题？

你没有。如果您修改了 APK 文件，无论如何都必须重新签名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T02:24:33.787

Android apk 文件必须经过签名。该签名证明 apk 的内容并未从最初发布的内容中修改。（这正是你正在做的。）签名的同时，也证明了作者是谁。

所以在一个普通的签名apk文件中：

1.  你知道作者是谁。（即使它不是你作为人类可以理解的东西。）
2.  你知道这些内容是作者放在那里的，从那以后就没有修改过。

这是内置于 Android 中的一项关键安全措施，其存在是有充分理由的，而且无法克服。它可以防止病毒之类的东西嵌入到无辜的 apk 文件中。

# linux - 为什么MongoDB在安装时无法在Ubuntu 11.10上创建用户？

> ID：10156281
> 
> 赞同：2
> 
> 时间：2012-04-14T18:43:25.893
> 
> 标签：linux, mongodb, ubuntu, installation

我正在我的 Ubuntu 11.10 机器上安装 MongoDB。将适当的行添加到 /etc/apt/sources.list 后（使用[此处](http://www.mongodb.org/display/DOCS/Ubuntu+and+Debian+packages)的说明），我键入以下内容进行安装：

```
sudo apt-get install mongodb-10gen 
```

它导致以下输出：

```
Adding system user `mongodb' (UID 117) ...
Adding new user `mongodb' (UID 117) with group `nogroup' ...
useradd: cannot lock /etc/passwd; try again later.
adduser: `/usr/sbin/useradd -d /home/mongodb -g nogroup -s /bin/false -u 117 mongodb' returned error code 1\. Exiting.
dpkg: error processing mongodb-10gen (--configure):
 subprocess installed post-installation script returned error exit status 1
Errors were encountered while processing:
 mongodb-10gen
E: Sub-process /usr/bin/dpkg returned an error code (1) 
```

我只打开了其他终端窗口（它们都没有运行任何程序）并且 Chromium 打开。为什么安装可能无法添加用户？

谢谢，

典范RG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:05:50.673

解决方案，感谢来自[此资源](https://bugs.launchpad.net/ubuntu/+source/shadow/+bug/523896)的“Thomas” ：

查找 /etc/group.lock、/etc/passwd.lock 和 /etc/shadow.lock，然后删除它们。确保您只删除这些文件（如果它们存在）。

完成此操作后，我只需重新运行安装命令即可成功完成。

# c# - 检测用户的鼠标点击并输入按键

> ID：10156284
> 
> 赞同：-2
> 
> 时间：2012-04-14T18:43:41.863
> 
> 标签：c#

我有一个小问题需要你的想法，我正在构建一个简单的应用程序来检测用户何时将文本写入文本框，有一个按钮用户可以单击或按 Enter 键以继续执行进一步操作

[**更新**]

哦，对不起，我必须补充一点，文本框来自另一个窗口，它可能是任何窗口。

我不想使用像 GetAsyncKeyState 这样丑陋的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:48:40.493

使用[Control.KeyPress 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keypress.aspx)

```
this.textBox1.KeyPress += new System.Windows.Forms.KeyPressEventHandler(CheckKeys);

private void CheckKeys(object sender, System.Windows.Forms.KeyPressEventArgs e)
{
    if (e.KeyChar == (char)13)
    {
          // Then Enter key was pressed
    }
 } 
```

(char)13 表示 Enter 键。

# jquery - Html 类名属性附加了一个空格字符

> ID：10156288
> 
> 赞同：-4
> 
> 时间：2012-04-14T18:44:35.873
> 
> 标签：jquery, html

在我的页面中，我有一个带有标签的类名属性。类名附加一个空格字符。我不知道那个空间字符是从哪里来的？它来自哪里？

我有以下代码

```
if (collection[i].getAttribute("class") === "modified") {
                        var item = collection[i];
                        $(item).text("1");
                        editRowId = null;
                        $("#txtId").val("");
                        $("#txtName").val("");
                    }

$("#centerTable").append("<tr id='tableRow'><td id='rowid' class='hiddenColumn'>" + "-1" + "</td><td id='centerid'>" + centerid + "</td><td id='centerAddress'>" + centeraddress + "</td><td id='details'>" + txtDetails.value + "</td><td><a href='#' onclick='EditRecord(this)'>Edit</a></td><td><a href='#' onclick='DeleteRecord(this)'>Delete</a></td><td class='modified'>3</td></tr>"); 
```

我有属性 classname = "modified" 的值，空格是一个杀手。我检查了我的 html 代码，它在类名附近没有空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:24:59.720

改用该[`hasClass`方法](http://api.jquery.com/hasClass/)，那么是否有多余的空格都没关系：

```
if ($(collection[i]).hasClass("modified")) { 
```

# mysql - 在 MySQL 查询的 WHERE 子句中使用子选择的结果

> ID：10156289
> 
> 赞同：0
> 
> 时间：2012-04-14T18:44:38.993
> 
> 标签：mysql, select, subquery

```
SELECT
  *, (SELECT SUM(rating) FROM votes WHERE votes.postId = posts.id) AS rating
FROM posts
WHERE rating > 10 
```

我的表中有多个条目，其中具有相应帖子 ID 的投票评分总和大于 10，但此查询未返回任何结果。为什么？

这是我的数据库结构的相关部分：

```
TABLE posts
 - id

TABLE votes
 - postId
 - rating 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:52:46.320

您需要命名子查询列，像这样

SELECT * FROM (SELECT sum(rating) as rating_sum, * FROM posts) AS rating INNER JOIN posts on posts.id = rating.id WHERE rating.rating_sum>10

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T19:31:41.917

试试这个。

```
 SELECT posts.*, (select SUM(rating) as totalRating 
                    from votes 
                   where votes.postid = posts.id) as totalRating
 FROM   posts 
 WHERE  totalRating > 10 
```

# processing - 使用 Minim 获得处理频率

> ID：10156296
> 
> 赞同：2
> 
> 时间：2012-04-14T18:45:35.953
> 
> 标签：processing, minim

我尝试使用处理从麦克风获取频率。我混合了文档中的两个示例，但“最高”并不是真正的赫兹（a 是 440 赫兹）。你知道如何拥有比这更好的东西吗？

```
import ddf.minim.*;
import ddf.minim.analysis.*;

Minim minim;
AudioInput in;
FFT fft;
int highest=0;

void setup()
{
  size(1024, 200, P2D);

  minim = new Minim(this);
  minim.debugOn();

  in = minim.getLineIn(Minim.MONO, 4096, 44100);
  fft = new FFT(in.left.size(), 44100);
}

void draw()
{

  background(0);
  stroke(255);

  fft.forward(in.left);
  highest=0;
  for (int n = 0; n < fft.specSize(); n++) {
    // draw the line for frequency band n, scaling it by 4 so we can see it a bit better
    line(n/4, height, n/4, height - fft.getBand(n)*4);

    //find frequency with highest amplitude
    if (fft.getBand(n)>fft.getBand(highest))
      highest=n;
  }
  println(highest);

  //println(fft.getFreq(110));
  // draw the waveforms
  for (int i = 0; i < in.bufferSize() - 1; i++)
  {
    line(i, 50 + in.left.get(i)*50, i+1, 50 + in.left.get(i+1)*50);
    line(i, 150 + in.right.get(i)*50, i+1, 150 + in.right.get(i+1)*50);
  }
}

void stop()
{
  // always close Minim audio classes when you are done with them
  in.close();
  minim.stop();

  super.stop();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T08:21:41.070

您需要进行一些转换，具体取决于您想要获得的内容：

> 频谱并不代表单个频率，而是实际上代表以特定频率为中心的频带。每个频段的中心频率通常表示为时域信号采样率的分数，等于频段索引除以频段总数。频带的总数通常等于时域信号的长度，但仅对索引小于一半长度的频带提供访问，因为它们对应于低于奈奎斯特频率的频率。换句话说，给定长度为 N 的信号，频谱中将有 N/2 个频带。
> 
> 例如，如果您构建一个 timeSize 为 1024 且 sampleRate 为 44100 Hz 的 FFT，则频谱将包含低于 22010 Hz 的频率值，即奈奎斯特频率（采样率的一半）。如果您要求频带编号 5 的值，这将对应于以 5/1024 * 44100 = 0.0048828125 * 44100 = 215 Hz 为中心的频带。该频带的宽度等于 2/1024，表示为频谱总带宽的一部分。频谱的总带宽等于奈奎斯特频率，在本例中为 22100，因此带宽约等于 50 Hz。你没有必要记住所有这些关系，尽管了解它们是件好事。

from the [Minim Manual, FFT section](http://code.compartmental.net/tools/minim/manual-fft/).

# python - 如何安装包含与 sqllite3 数据库的连接的 python 包？

> ID：10156299
> 
> 赞同：1
> 
> 时间：2012-04-14T18:45:48.933
> 
> 标签：python, sqlite, installation, package, packaging

我正在使用 python 和 sqllite3 创建一个应用程序。用户是否需要手动安装 sqllite？

如何在安装时创建表并进行初始化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:33:02.777

[sqlite3](http://docs.python.org/library/sqlite3)模块是 python 标准库的一部分，并与 python 本身一起提供。安装 sqlite 是必需的，但（至少在 linux 上）包管理器负责安装 sqlite（我在这里不能说任何关于 windows 的内容）。

您可以在应用程序的第一次运行时创建表。为确保您不会尝试创建两次，请使用`CREATE TABLE IF NOT EXISTS ...`（参见[docs](https://www.sqlite.org/lang_createtable.html)），它只会在表不存在的情况下创建表。

# java - 在 xml 文件中插入节点

> ID：10156301
> 
> 赞同：0
> 
> 时间：2012-04-14T18:46:00.757
> 
> 标签：java, xml, dom, insert

我想使用 Java DOM 在 xml 文件中插入一个节点。我实际上正在编辑一个虚拟文件的很多内容，以便像原始文件一样对其进行修改。

我想在以下文件之间添加一个打开节点和关闭节点；

```
 <?xml version="1.0" encoding="utf-8"?>
            <Memory xmlns:xyz="http://www.w3.org/2001/XMLSchema-instance"   
            xmlns:abc="http://www.w3.org/2001/XMLSchema" Derivative="ABC"            
            xmlns="http://..">

       ///////////<Address> ///////////(which I would like to insert)

            <Block ---------
            --------
            -------
            />

      ////////// </Address> /////////(which I would like to insert)

            <Parameters Thread ="yyyy" />
            </Memory> 
```

我特此请求您让我知道如何在 xml 文件之间插入 - ？

提前致谢。！

我尝试做的是；

```
 Element child = doc.createElement("Address");
    child.appendChild(doc.createTextNode("Block"));
    root.appendChild(child); 
```

但这给了我这样的输出；

```
 <Address> Block </Address> and not the way i expect :( 
```

现在，我尝试添加这些行；

```
 Element cd = doc.createElement("Address");
            Node Block = root.getFirstChild().getNextSibling();
        cd.appendChild(Block);
        root.insertBefore(cd, root.getFirstChild()); 
```

但是，这不是我正在寻找的输出。我得到这个输出 ---------

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T23:26:47.523

你想要的可能是：

```
Node parent = block.getParentNode()
Node blockRemoved = parent.removeChild(block);
// Create address
parent.appendChild(address);
address.appendChild(blockRemoved); 
```

这是在 W3C DOM 下将节点重新附加到另一个位置的标准方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T00:37:21.823

这里：

```
DocumentBuilder b = DocumentBuilderFactory.newInstance().newDocumentBuilder();
Document document = b.parse(...);

// Parent of existing Block elements and new Address elemet
// Might be retrieved differently depending on 
// actual structure
Element parent = document.getDocumentElement();
Element address = document.createElement("address");

NodeList nl = parent.getElementsByTagName("Block");
for (int i = 0; i < nl.getLength(); ++i) {
    Element block = (Element) nl.item(i);
    if (i == 0)
        parent.insertBefore(address, block);
    parent.removeChild(block);
    address.appendChild(block);
}

// UPDATE: how to pretty print

LSSerializer serializer = 
    ((DOMImplementationLS)document.getImplementation()).createLSSerializer();
serializer.getDomConfig().setParameter("format-pretty-print", Boolean.TRUE);
LSOutput output = 
    ((DOMImplementationLS)document.getImplementation()).createLSOutput();
output.setByteStream(System.out);
serializer.write(document, output); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T19:59:11.533

我假设您使用的是 W3C DOM（例如[http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html](http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html)）。如果是这样试试

```
insertBefore(address, block); 
```

# javascript - 错误：Javascript 上的 [object Object]

> ID：10156309
> 
> 赞同：14
> 
> 时间：2012-04-14T18:46:33.193
> 
> 标签：javascript, error-handling

当我在 Firebug 中运行下面的 javascript 时，我不断收到错误消息。我尝试更改多项内容，但仍然输出错误。我正在使用 api 从 XML 中检索信息，然后将其输出到屏幕上，但我不断收到对象错误。有人能看出为什么吗？？任何帮助表示赞赏！

```
$(document).ready(function() {

    $('#searchbtn').bind('click' || 'enter',function(e) {
        if ($.trim($('#searchBox').val()) !== '') {
            $('#videos').append('<img src="img/loading.gif" alt="loading" class="loading" />');
            getVideos(e);
        }
    });
});

function getVideos(e) {
    e.preventDefault();
    var text = 'text='+$('#searchBox').val();
    $.ajax({
        url: 'getVideos.php',
        dataType: 'xml',
        type: 'POST',
        data: text,
        success: function(data) {                               
            $('#videos').append("<h1>The following events match your search!</h1>");

            var xmlString = data;

            if ($(xmlString).find('feed').children('entry').length == 0) {
                $('#videos').append('<p class="noResults">Sorry, no results for you! Try searching again!</p>');
            } else {
                var videoTitle = [];

                $(xmlString).find('title').each(function() 
                { 
                videoTitle.push($(this).text()) });

                $('#videos').append('<ul>');

                $(xmlString).find('entry').each(function(i) {
                    if (i == '40') {
                        return(false);
                    }
                    var vidInfo = '';
                    vidInfo += "<p>"+videoTitle[i]+"</p>";
                    $('#videos ul').append('<li>'+vidInfo+'</li>');
                });
            }
        },
        error: function(data) {
                console.log('Error: ' + data);
        }

    })
}; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-14T18:51:40.617

当你将一个对象附加到一个字符串时，它会`toString`调用它的方法，对于一个普通的对象，它只会给出臭名昭著的“[object Object]”。要记录一个对象，您应该直接将它`console.log`作为参数传递给函数，如下所示：

```
console.log('Error:', data); 
```

# google-maps - 像Route Planner一样优化Google Maps API Polygone

> ID：10156313
> 
> 赞同：1
> 
> 时间：2012-04-14T18:46:58.123
> 
> 标签：google-maps, routes

我有一个大后院，我想知道是否有办法使用谷歌地图 api 多边形形状和路线规划器来规划割草的最佳路径。是否有不仅适用于街道的形状路径优化器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:58:23.270

我用 google maps api 做的事情很少，而且没有优化形状功能之类的东西。您可以做的是使用谷歌地图点并实现类似 Graham [http://en.wikipedia.org/wiki/Graham_scan](http://en.wikipedia.org/wiki/Graham_scan)的东西来查找形状，但要优化它，您必须实现自己的算法。

谷歌地图 v3 参考在这里：（也许我错过了什么）[https://developers.google.com/maps/documentation/javascript/reference](https://developers.google.com/maps/documentation/javascript/reference)

# php - PHP Simple HTML DOM Parser：如何从脚本输出中删除标签？

> ID：10156315
> 
> 赞同：0
> 
> 时间：2012-04-14T18:47:31.253
> 
> 标签：php, parsing, dom, tags

我正在使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/index.htm)从页面中提取 URL 列表，如下所示：

```
<?php
include('simple_html_dom.php');
$url = 'http://www.domain.com/';
$html = file_get_html($url);
foreach($html->find('table[width=370]') as $table)
    {
    foreach($table->find('a') as $item)
        echo $item->outertext . '<br><hr>';
    }
$html->clear();
?> 
```

就提取所需信息而言，它工作得很好，但是，**一些**a 标签（在 domain.com 上）的格式如下：

```
<a href="http://www.domain.com"><font size="2">Anchor text</font></a> 
```

而在其他情况下，字体大小是在包含每个 a 标签的 p 标签中定义的，这意味着 a 标签显示为：

```
<a href="http://www.domain.com">Anchor text</a> 
```

有没有办法从那些有字体标签的标签中去掉字体标签？这可能很简单，但多年来我一直在“绕圈子”试图做到这一点:(

感谢您提出的任何想法或建议。

汤姆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:11:46.067

[strip_tags()](http://php.net/strip_tags)也许？

如果您只想允许`a`标签，只需使用：

```
echo strip_tags($item->outertext, 'a'); 
```

# xpages - 如何读取通过 POST 方法发送到我的 xPage 的一般 html 表单字段？

> ID：10156327
> 
> 赞同：1
> 
> 时间：2012-04-14T18:48:54.410
> 
> 标签：xpages

我有一个通用的 HTML 非 xpages 表单（非 xpages 应用程序的一部分），我需要将输入的值提交给 xpage 并处理它。如何从 xpage 访问这些 html 表单字段？通常我通过其 xpages componentId 访问 html 字段，但在这种情况下没有这样的。

同样从 javascript 我需要使用[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)将 JSON 数据发送到 xpage ，如何访问提交的数据？我试图在这里阅读一些可用的 xPages API [http://public.dhe.ibm.com/software/dw/lotus/Domino-Designer/JavaDocs/XPagesExtAPI/8.5.2/index.html](http://public.dhe.ibm.com/software/dw/lotus/Domino-Designer/JavaDocs/XPagesExtAPI/8.5.2/index.html)（特别是这里[http://public .dhe.ibm.com/software/dw/lotus/Domino-Designer/JavaDocs/XPagesExtAPI/8.5.2/com/ibm/xsp/context/ExternalContextEx.html](http://public.dhe.ibm.com/software/dw/lotus/Domino-Designer/JavaDocs/XPagesExtAPI/8.5.2/com/ibm/xsp/context/ExternalContextEx.html)），但它不包含任何评论和一些数学有很奇怪/像“java.lang.Object getRequest()”这样的常见签名......这里的请求是什么（是HttpServletRequest ???），我可以在哪里找到一些解释？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T19:31:44.357

可以使用 param.get() 读取发布到 XPage 的值。我写了一篇关于[XPages 中的 HTTP 请求使用者](http://per.lausten.dk/blog/2010/12/http-request-consumer-in-xpages.html)的博客文章，您可以将其用作灵感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-15T13:30:09.700

尽管发布并接受了一个解决方案，但（很久以前）应该注意的是，您不必为此使用 Xpages。将数据发布到“正常”文档记录或使用基本的 LS 代理并解析发布的“内容”也同样有效。

# android - 在 Android 上重新创建活动时使用 DatabaseHelper

> ID：10156328
> 
> 赞同：1
> 
> 时间：2012-04-14T18:49:04.300
> 
> 标签：android, database, android-activity, lifecycle

我有一个使用 AsyncTask 下载并将一些数据保存到数据库的活动。要打开数据库，我们需要将 Context 参数传递给 SQLiteOpenHelper 的 onCreate 方法，这意味着数据库在某种程度上需要上下文。

我只是好奇，当设备转动并且活动经历破坏和创造循环时会发生什么？可以在活动的构造函数中而不是在活动的 onCreate() 方法中打开数据库吗？

问题是我从另一个线程使用数据库，我想知道当活动被破坏和重新创建时会发生什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:11:29.703

一种解决方案是使用 ApplicationContext 而不是 ActivityContext。您只需要一个从 Application 构造函数请求 ApplicationContext 的静态方法。

如果您使用某种单例来访问上下文，您不会遇到任何并发问题。

请参阅此处的示例：[http ://androidcookbook.com/Recipe.seam?recipeId=1218](http://androidcookbook.com/Recipe.seam?recipeId=1218)

另一种方法是使用 LoaderManager 来跟踪您打开的数据库连接。

见这里： http: [//developer.android.com/reference/android/app/LoaderManager.html](http://developer.android.com/reference/android/app/LoaderManager.html) （也有一个完整的例子）

LoaderManager 在兼容包中可用于低至 Android 1.5

迈克尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:15:33.163

如果您想在后台执行一些数据库操作。你应该使用“服务”。服务可以在后台执行长时间运行的操作。

这是链接：http: [//developer.android.com/guide/topics/fundamentals/services.html](http://developer.android.com/guide/topics/fundamentals/services.html)

# excel - 查找某个月份的 MAX 值

> ID：10156331
> 
> 赞同：1
> 
> 时间：2012-04-14T18:49:48.700
> 
> 标签：excel, excel-2010

我有一个不应该是问题的问题，但我无法解决它。

我的数据如下所示：

```
2012-04-05     1280
2012-04-17     1340
2012-04-20     1510
2012-05-03     1670
2012-05-09     1880 
```

我想做的是找到 4 月和 5 月的 MAX 值。

所以 4 月的 MAX 应该返回 1510，5 月的 MAX 应该返回 1880。可以这样做吗？

编辑：也许简化了一点，这是一个更接近我真正想做的例子：

```
2012-04-04     14     220
2012-04-11    453     863
2012-04-19    900    1310
2012-05-02   1400    1810
2012-05-15   1900    2250 
```

这些是我的汽车行车电脑的里程数。我想计算一下我每个月开车的距离。

```
For april: 1310-14 = 1296
For may: 2250-1400 = 850 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:35:04.017

一个简单的数组公式可以做到这一点。如果您的日期在 Excel 中被格式化为日期，请将以下内容粘贴到单元格中并按`Ctrl`+ `Shift`+ `Enter`：

```
=MAX(IF(MONTH($A$1:$A$5)=4,B1:B5)) 
```

可以将其扩展为也允许过滤掉 0 吗？当您使用 MIN 而不是 MAX 并且您的数据范围有空值时，这将导致 0 被报告为最小值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T19:41:49.473

一个简单的数组公式可以做到这一点。如果您的日期在 Excel 中被格式化为日期，请将以下内容粘贴到单元格中并按`Ctrl`+ `Shift`+ `Enter`：

```
=MAX(IF(MONTH($A$1:$A$5)=4,B1:B5)) 
```

如果您的日期格式为文本，请将以下内容粘贴到单元格中并按`Ctrl`+ `Shift`+ `Enter`：

```
=MAX(IF(MID($A$8:$A$12,6,2)="04",$B$8:$B$12)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T20:14:12.933

您可以使用数据透视表。下面，金额由 Max 汇总。我右键单击日期列，选择分组依据，然后选择年和月。图片显然显示了源数据、数据透视表和两个对话框。在实践中，您会将数据透视表放在自己的工作表上：

![在此处输入图像描述](../Images/1e9e884103695f3c50c0ab3e4693e7ba.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T19:09:53.533

如果您只需要一次答案，请按月过滤并运行 max 函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-25T08:06:06.777

您可以使用这个简单的公式来获得给定范围内的月份最大值。其中 J2 - J7 是我的日期范围，使用 Max 获取该范围内的最大日期并使用文本获取月份。

```
=TEXT(MAX(J2:J7),"mmm") 
```

# php - 如何在数据库中正确插入这些值

> ID：10156332
> 
> 赞同：2
> 
> 时间：2012-04-14T18:49:50.207
> 
> 标签：php, mysql

下面是将文件 (fileImage) 上传到文件夹 (ImageFiles) 的部分代码。但我还想做的是使用 INSERT VALUES 代码将文件位置（文件上传到的位置）插入数据库。我希望将文件位置插入“ImageFile”字段，对于“ImageId”，我希望它显示字符串“IMG”，然后在字符串后面包含一个数字。例如：

在我的数据库表中，如果它如下所示：

```
ImageId     ImageFile

IMG1        ImageFiles/penguins.png
IMG2        ImageFiles/desert.png
IMG3        ImageFiles/jellyfish.jpg 
```

然后，如果我将文件从我的计算机“tulips.png”上传到 ImageFiles 文件夹中，那么它应该在数据库中插入如下值：

```
ImageId    ImageFile

IMG4       ImageFiles/tulips.png 
```

但是如何编码呢？以下是我目前成功上传文件的代码，并且仅包含 INSERT VALUES 的部分编码：

```
 move_uploaded_file($_FILES["fileImage"]["tmp_name"],
      "ImageFiles/" . $_FILES["fileImage"]["name"]);
      $result = 1;

      $imagesql = "INSERT INTO Image (ImageId, ImageFile) 
    VALUES ("");

mysql_query($imagesql); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T19:15:00.870

如果您使用 PHPs PDO 对象，它将简化您的代码并同时使其更安全（通过使用准备好的语句）。

以下是您将如何执行此操作的示例：

首先，将您的 ID 存储为 AUTO_INCREMENT-ed INT 而不是“IMG#”，因为这会使事情变得更容易（然后您不需要插入 ID 值）

```
DROP TABLE IF EXISTS tbl_img_store;
CREATE TABLE tbl_img_store(
    id INT NOT NULL AUTO_INCREMENT,
    PRIMARY KEY(id),
    filename VARCHAR(25) --increase this if you think you need to
) ENGINE=InnoDB; 
```

此外，创建一个表来存储配置设置，以使您的数据库更高效：

```
DROP TABLE IF EXISTS tbl_img_config;
CREATE TABLE tbl_img_config(
    img_path VARCHAR(50)
);
INSERT INTO tbl_img_config (img_path) VALUES ("http://img.mysite.com/?i="); 
```

现在回到 PHP，您可以像这样快速插入大量图像：

```
# Create a DB connection
$db = new PDO("mysql:host=X.X.X.X;dbname=mydb", $user, $pass);

# Compile an array of image paths
$img1path = "img1.png";
$img2path = "img2.png";
$img3path = "img3.png";
$images = array($img1path, $img2path, $img3path);

# Create a query to insert the paths to the db
$sql = "INSERT INTO tbl_img_store (filename) VALUES (?),(?),(?);";
$query = $db->prepare($sql);
$query->execute($images);

# Check rows affected
$rows = $query->rowCount();
echo "$rows images were saved."; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T19:00:38.403

您应该使用自动递增的 id 来识别图像，而不是为此使用字符串。

这将为您简化流程，因为您只需插入单个字段，自动增加的字段会自动更新。

```
$imagesql = "INSERT INTO Image (ImageFile) VALUES ('ImageFiles/".mysql_real_escape_string($_FILES['fileImage']['name'])."')"; 
```

然后 ImageId 应该是 INT 类型，作为 PRIMARY KEY 和 AUTO INCREMENT 代替。这也是设计表格的好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T18:55:43.197

您需要像这样将值添加到查询中

```
$imagesql = "INSERT INTO Image (ImageId, ImageFile) 
VALUES ('$imageName','$imageFile');"; 
```

但首先确保正确转义值以避免任何问题。另请注意，不建议再使用 mysql_ 函数。而是使用 mysqli_ 等价物或更好的 PDO（使用 PDO，它会自动为您处理数据库转义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T18:59:41.383

您可以使用 MySql 自动增量..您无需担心`IMG` `IMG2`...等

请参阅：[http ://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)

**例子：**

假设： `ImageId`是一个自动增量字段

[http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)

```
$tmpName = $_FILES ["fileImage"] ["tmp_name"];
$fileName = $_FILES ["fileImage"] ["tmp_name"];

move_uploaded_file ( $tmpName, $fileName );
$sql = "INSERT INTO Image (ImageId, ImageFile)   VALUES (NULL,'%s');";
mysql_query ( sprintf ( $sql, mysql_real_escape_string ( $fileName ) ) ); 
```

当您想获取图像时

```
$sql = "SELECT ImageId, ImageFile FROM Image";
$result = mysql_query ( $sql );
while ( $row = mysql_fetch_assoc ( $result ) ) {
    echo "IMG", $row ["ImageId"], " = ", 'ImageFiles/'  , $row ["ImageFile"], PHP_EOL;
} 
```

**为什么你应该使用这个**

A.`IMG`并且 `ImageFiles/`不断地保存它们几次是没有效率的

B.`integer`基于 id 也会比`varchar``JOIN 更快并且表现更好

C. 要获取增量值`IMGX`在哪里将涉及多个 SQL 调用 .. 并且效率不高`X`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T19:48:45.567

这就是我所做的。要回答您的问题，请查看第二个文件末尾附近的 SELECT LAST_INSERT_ID() 的 mysql_query。请注意，我没有插入 id，而是让数据库 auto_increment。

图片是通过upload.php上传的，其中一部分是这样的：

```
<form>
<?php

session_start();

if (isset($error["image"])) echo '<span class="error">'.$error["image"].'</span>'; else echo 'Select an image<span class="required"> *</span>';

if ($imgVars["is_image"] == "J") {
    echo '
<input type="hidden" name="image_url" value="'.$imgVars["image_url"].'">
<input type="hidden" name="image_type" value="'.$imgVars["image_type"].'">
<input type="hidden" name="is_image" value="J">
<img src="'.$imgVars["image_url"].'" width="224" height="168" alt="Image">
<p>Change image?</p>';

?>
<input type="file" name="image">
<input type="submit" name="upload" value="Upload" title="Upload your image">
</form> 
```

然后通过process.php对上传的文件进行处理，其中一部分是这样的：

```
<?php

session_start();

if (!session_is_registered("error"))
    session_register("error");

$error = array();

if (!session_is_registered("imgVars"))
    session_register("imgVars");

foreach($_POST as $varname => $value)
    $imgVars[$varname] = trim(EscapeShellCmd(stripslashes($value)));

$imgVars = array();

if ($imgVars["is_image"] != 'J') {
    $imgVars["is_image"] = 'N';
    if ($_FILES["image"]["size"] > 0) {
        $size = GetImageSize($_FILES["image"]["tmp_name"]);
        $width = $size[0];
        $height = $size[1];
        if(($width != 224) || ($height != 168)) {
            $error["image"] = 'Image dimensions must be exactly 224 x 168 pixel!';
            $imgVars["is_image"] = "N";
        }
        preg_match("/(\.\w+)$/",
            $_FILES["image"]["name"],$match);
        $imagetype = $match[1];
        if (!in_array(strtolower($imagetype), array(".jpg",".jpeg",".gif",".png"))) {
            $error["image"] = 'You may upload only images of type JPEG, GIF and PNG!';
            $imgVars["is_image"] = "N";
        }
        if ($imgVars["is_image"] == "J") {
            $filename = time().$imagetype;
            copy($_FILES["image"]["tmp_name"], "img/".$filename);
            $imgVars["image_url"] = "img/".$filename;
            $imgVars["image_type"] = $imagetype;
        }
    } else {
        $error["image"] = 'Please upload an image!';
    }
}

if (count($error))
{
    header('Location: upload.php');
    exit();
}

// connect to database

$query = "INSERT INTO images SET image_url = '" . $imgVars["image_url"] . "';

if (!($result = @ mysql_query ($query, $connection)))
    die("Your mysql error routine here.");

$rs = mysql_query("SELECT LAST_INSERT_ID()", $connection);
$lid = mysql_fetch_row($rs);
$image_id = $lid[0];

if ($imgVars["is_image"] == 'J') {
    rename ($imgVars["image_url"], "img/".$image_id.$imgVars["image_type"]);
    $query = "UPDATE images SET image_url = 'img/".$image_id.$imgVars["image_type"]."' WHERE image_id = '".$image_id."'";
    if (!(@ mysql_query ($query, $connection)))
        die("Your mysql error routine here.");
}

session_unregister("formVars");
session_unregister("fehler");

header('Location: danke.php');
exit();

?> 
```

此代码中可能存在拼写错误或遗漏，因为我未经测试就从原始文件中翻译和修剪了它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-14T18:54:12.130

**首先：**`mysql_real_escape_string`在数据库中插入值时总是使用。

**然后 ：**

```
$query = "INSERT INTO `Image` (`ImageId`, `ImageFile`) 
          VALUES ('".mysql_real_escape_string($_FILES["fileImage"]["tmp_name"])."','".
                     mysql_real_escape_string($_FILES["fileImage"]["name"])."'
          );"; 
```

# c# - 如何为特定用户授权服务对象

> ID：10156337
> 
> 赞同：0
> 
> 时间：2012-04-14T18:50:56.093
> 
> 标签：c#, .net, google-docs, google-docs-api

在许多地方的google docs api开发人员指南中，它说// TODO：为特定用户授权服务对象可以请任何人告诉我如何准确地做到这一点..特别是在我的情况下，我正在向我发送一个POST请求[https://www.google.com/accounts/ClientLogin](https://www.google.com/accounts/ClientLogin)然后解析身份验证令牌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T20:12:02.013

您可以使用以下代码让库为您执行 ClientLogin：

```
service.setUserCredentials(username, password); 
```

有关更多详细信息，请查看[https://developers.google.com/google-apps/documents-list/#authorizing_requests_with_clientlogin](https://developers.google.com/google-apps/documents-list/#authorizing_requests_with_clientlogin)

# java - 检查点是否属于情节

> ID：10156338
> 
> 赞同：1
> 
> 时间：2012-04-14T18:51:05.163
> 
> 标签：java, jfreechart

我正在使用 JFreeChart 绘制 XYPlot。我目前正在尝试做的事情：

1.  用户点击绘图，应用程序将返回所选点的坐标；我认为我做对了。这是一些代码：

    ```
     public void chartMouseClicked(ChartMouseEvent arg0) {
               Rectangle2D plotArea = chPanel.getScreenDataArea();
               XYPlot plot = (XYPlot) chart.getPlot();
               double chartX = plot.getDomainAxis().java2DToValue(arg0.getTrigger().getPoint().getX(), plotArea, plot.getDomainAxisEdge());
               double chartY = plot.getRangeAxis().java2DToValue(arg0.getTrigger().getPoint().getY(), plotArea, plot.getRangeAxisEdge());
               JOptionPane.showMessageDialog(null, "   x: "+chartX+ "  y: "+chartY);} 
    ```

2.  我需要确定用户是否点击了该行。目标是标记单击的点，如果它在绘制的图形上。

我会很感激任何线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:07:49.717

不要使用坐标，而是添加一个，[`ChartMouseListener`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartMouseListener.html)如下所示[。](https://stackoverflow.com/a/8002959/230513)您可以检查[`ChartMouseEvent`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartMouseEvent.html)和任何对应[`ChartEntity`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/entity/ChartEntity.html)的各种详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:50:09.683

```
ShapeUtilities.intersects(java.awt.geom.Rectangle2D rect1, java.awt.geom.Rectangle2D rect2) 
```

其中 rect2 可以是“0”矩形（对于您的点）。

# extjs - 在 ExtJS 图表中更改系列中的一个标记

> ID：10156342
> 
> 赞同：0
> 
> 时间：2012-04-14T18:51:19.760
> 
> 标签：extjs, charts, markers, series, axes

这就是我想要做的......我有一个带有线条系列的图表，里面有标记。在 X 轴上我有日期，在 Y 轴上我有一个数字。所以假设我有从昨天到下周的 x 个日期。并且每一天都有一个对应的Y轴值。我想要做的是更改属于实际日期的标记的颜色。换句话说，为了更清楚，我想更改 ExtJS 行系列中单个标记的颜色。我知道 markerConfig 但这似乎没有帮助，因为它适用于所有标记。

我还没有找到类似的东西所以我在这里停下来看看你们是否可以帮助我。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T20:29:47.417

我认为最简单的方法是突出显示系列中的单个数据点。

首先，定义你的突出风格。

```
Ext.create('Ext.chart.Chart', {
...
series: [{
  type: 'line',
  highlight: {
    size: 10,
    radius: 10,
    fill: 'red'
  },
...
}); 
```

然后，在您的系列中选择适当的数据点并调用[highlightItem()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.chart.series.Series-method-highlightItem)方法。这是一个显示如何使用该方法的示例。

```
var series = myChart.series.get(0);
series.highlightItem(series.items[2]);  // highlight the 3rd data point in the series 
```

结果看起来像这样。
![在此处输入图像描述](../Images/070db44a05c5e4c9f5042a54ff2f2dfb.png)

# asp.net-mvc-4 - MVC SPA w/o EF：在使用本地名称“__type”编写属性后，您必须编写一个属性“type”=“object”

> ID：10156347
> 
> 赞同：0
> 
> 时间：2012-04-14T18:51:45.330
> 
> 标签：asp.net-mvc-4, singlepage

所以我有一个非常规范化的模型，我试图在 MVC4 中创建一个想要使用实体框架对象的单页应用程序。我的问题是我无法使用我需要的那种复杂映射在 EF 中创建一个实体（我已经检查了多个指南，但我似乎无法从包含不同主键的多个表中创建一个实体.. .我找到了一个使用可更新视图的解决方案，但这实际上只是将抽象推到了数据库层）。

所以我想我可以使用 EF 查询创建一个 POCO 对象来创建对象，然后在插入/更新/删除时，我可以获取 POCO 数据并更新底层的 3 个表。

好吧，我只是试图调整现有的工作控制器以尝试了解正在发生的事情，因此遇到了障碍。

假设我有一个工作的 SPA 控制器，看起来像这样：

```
public partial class FooController : DbDataController<aspnetEntities> 
{    
    public IQueryable<Foos> GetFoos() { ... }    
} 
```

我只是稍微改变一下以返回我的新 POCO 数据对象 Bar，让我们想象它目前与 Foo 具有完全相同的字段：

```
public partial class FooController : DbDataController<aspnetEntities>
{
    public IQueryable<Bars> GetBars() { ... }
} 
```

在 FooViewModel.js 中，我将操作名称更新为 GetBars，并将类型从

`var entityType = "Foo:#Models";`

到

`var entityType = "Bar:#Models";`

我直接点击我的操作，我得到：

老的 `<ArrayOfFoo><Foo><Property>true</Property></Foo></ArrayOfFoo>`

新的 `<ArrayOfBar><Bar><Property>true</Property></Bar></ArrayOfBar>`

所以控制器看起来给了我我期望的东西，但是当我尝试把整个东西放在一起时，SPA 会闪现：

> 在使用本地名称“__type”编写属性之后，您必须编写一个属性“type”=“object”。

我猜我需要以某种方式将类型数据输入 KO？我不确定那可能在哪里，但是我已经在 J​​S 中爬行了好几个小时，但我什至不清楚它在哪里失败了。任何投入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:57:31.393

您遇到的问题与您使用 POCO 而不是标准 EF 的事实有关。它应该与无法将类识别为可序列化的 webapi 序列化程序有关。无论如何，这是一个将在 RC 中删除的错误。看看这个线程的解决方法： [http ://forums.asp.net/t/1773173.aspx/1?You+must+write+an+attribute+type+object+after+writing+the+attribute+with +本地+名称+__类型+](http://forums.asp.net/t/1773173.aspx/1?You%20must%20write%20an%20attribute%20type%20object%20after%20writing%20the%20attribute%20with%20local%20name%20__type%20)

# jquery - 获取元素相对于第 n 个父元素的位置

> ID：10156355
> 
> 赞同：0
> 
> 时间：2012-04-14T18:53:00.687
> 
> 标签：jquery, position, offset

我正在构建一个动态图像滚动器，我需要知道如何调用元素相对于其第 n 个父元素的偏移位置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:00:07.877

```
function getRelativePosition( element, nthparent_of_element ){
   var posParent = $(nthparent_of_element).position();
   var posElement = $(element).position();
   return { top: posElement.top - posParent.top, 
            left: posElement.left - posParent.left};
} 
```

# github - GitHub -> '远程端意外挂断'

> ID：10156356
> 
> 赞同：2
> 
> 时间：2012-04-14T18:53:17.177
> 
> 标签：github

我正在尝试将项目（Calico）推送到 GitHub，但遇到了错误。我已经通过 ssh 连接成功登录，并收到了通常的响应：

```
Ryan@RYANLAPTOP-PC /C/inetpub/wwwroot/Calico (master)
$ ssh git@github.com
Enter passphrase for key '/c/Users/Ryan/.ssh/id_rsa':
Hi rossryan! You've successfully authenticated, but GitHub does not provide shel
l access.
Connection to github.com closed. 
```

但是，当我尝试推送代码时仍然收到错误消息：

```
Ryan@RYANLAPTOP-PC /C/inetpub/wwwroot/Calico (master)
$ git push -u github master
The server's host key is not cached in the registry. You
have no guarantee that the server is the computer you
think it is.
The server's rsa2 key fingerprint is:
ssh-rsa 2048 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48
Connection abandoned.
fatal: The remote end hung up unexpectedly 
```

我相信我已经相当忠实地遵循了网站上的说明，在正确的区域用 'GitHub' 代替了 'origin'（origin 显然已经定义，所以我使用了不同的名称）。我已经通过电子邮件向 GitHub 发送了有关此问题的信息，但没有收到任何回复。

有没有人有任何其他想法？

**编辑：**

git remote -v 的输出：

```
Ryan@RYANLAPTOP-PC /C/inetpub/wwwroot/Calico (master)
$ git remote -v
github  git@github.com:rossryan/Calico.git (fetch)
github  git@github.com:rossryan/Calico.git (push)
origin  C:/inetpub/wwwroot/Calico/ (fetch)
origin  C:/inetpub/wwwroot/Calico/ (push) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:42:00.650

[git push origin master](https://stackoverflow.com/questions/5560150/git-push-origin-master-fails) failed 是关于使用 putty 时的错误（而不是 msysgit 中包含的打包 openssh）。我不认为这是你的情况。

[git - 未缓存的服务器主机密钥](https://stackoverflow.com/questions/4931384/git-server-host-key-not-cached)是关于同样的错误，并建议建立一个 ssh 连接，你做了（并且它没有建议添加`github`到你的`$HOME/ssh/known_hosts`文件中，所以这也不是问题。

您需要检查的是：

*   你为什么要推送`github`而不是默认名称' `origin`'（你真的添加了一个名为'github'的远程（上游）repo吗？）
*   远程名称“github”后面的确切地址是什么。正确的推送地址是（来自[远程的 GitHub 手册页](http://help.github.com/remotes/)）：
    *   一个 SSH URL`git@github.com:user/repo.git`
    *   或 https URL，例如`https://user@github.com/user/repo.git`

# c++ - 子类化 EDIT 控件

> ID：10156358
> 
> 赞同：1
> 
> 时间：2012-04-14T18:53:23.860
> 
> 标签：c++, windows, winapi

我正在对一个编辑控件进行子类化，并且我正在寻找一条我可以截获的消息，它允许我将框中的第一个字母大写。
`WM_KEYDOWN`并且`WM_CHAR`似乎没有任何可以识别字符大小写的东西。

通过在父窗口中处理消息，我目前有这个工作半好`EN_UPDATE`，但由于我已经对编辑控件进行了子类化，我更愿意在子类化的过程中进行。

任何帮助表示赞赏并提前感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T20:33:03.500

不，WM_CHAR 绝对可以为您提供案例。WM_KEYDOWN 没有。但是它并不能解决您的问题，您还需要处理 WM_PASTE。使用 EN_UPDATE 很好，它在两种情况下都会发送，只需注意递归。而父母得到它的皮塔饼，任何类库都可以解决的那种问题。

# java - Android 从耳机/USB 插孔发送/接收字节？

> ID：10156359
> 
> 赞同：2
> 
> 时间：2012-04-14T18:53:26.037
> 
> 标签：java, android, c++, headphones

简单的问题，有没有办法从安卓手机的耳机插孔读取字节/数据？我知道 HTC 制作了一个应用程序，可以让耳机充当天线并以这种方式获取收音机，但我必须为此使用本机 C++ 还是什么？我想要做的是在耳机插孔上连接一个双掷开关，我希望我的手机检测开关是否被按下。有什么办法做到这一点？？？我可以说这不是一件容易的事，但我可能经历的更糟。

编辑：即使是 USB 插孔，我也不介意。我只想在我的手机上连接一个开关并使用一个程序来检测它是打开还是关闭

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:18:02.413

您将无法通过耳机插孔将数据发送到设备中。将耳机用作天线是不同的。它实际上并没有将数据传输到手机中，它使用电线作为内部天线的延伸（连接到手机内部的接收器，生成“数据”）

不过，您应该可以使用 USB 为您的设备进行操作，您应该在任何时候将数据从手机外部传输到 USB 上，尽管您也可以通过设置 IR 广播器/蓝牙广播器来做到这一点的有线开关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T19:54:12.577

由于耳机插孔通常包括一个麦克风触点以支持耳机，因此您可以使用数字/模拟/数字转换来传输数据。（这就是使用像[Square](http://www.squareup.com)这样的耳机插孔的硬件扩展可能工作的方式）。

但是对于像你描述的那样的开关，我要么去蓝牙（它可以像代码中的简单串行连接一样；但你需要一些定制但不是非常复杂的硬件）或者尝试[Arduino for Android](http://developer.android.com/guide/topics/usb/adk.html)，它专为这个用例并使用USB（但我没有个人经验）。

在任何情况下都不需要 C++ 或本机，一切都可以通过 Java API 获得。

# javascript - Chrome：设置 window.location.hash 会导致“在页面中查找”搜索框消失

> ID：10156364
> 
> 赞同：0
> 
> 时间：2012-04-14T18:54:01.037
> 
> 标签：javascript, url, google-chrome

当我设置 .hash 时，“在页面中查找”的小框消失了。有什么办法让它打开吗？

*为什么我要设置 .hash？[与如何在不创建页面重新加载的情况下更改 Firefox window.location.hash 的](https://stackoverflow.com/questions/6312518/how-can-i-change-firefox-window-location-hash-without-creating-a-page-reload)原因相同？我希望用户能够为他们选择的单元格添加书签。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:02:58.063

铬错误。[http://code.google.com/p/chromium/issues/detail?id=72504](http://code.google.com/p/chromium/issues/detail?id=72504)

编辑：看起来像一个*固定*的Chrome 错误。

# node.js - socket.io 无法在 heroku 上运行

> ID：10156372
> 
> 赞同：1
> 
> 时间：2012-04-14T18:54:54.593
> 
> 标签：node.js, heroku

每当我尝试`require("socket.io");`在 heroku 上使用时，它都会失败并显示消息“找不到模块 socket.io”。

我认为这是我的设置的问题，因为在我的本地 node.js 服务器中运行良好。

我必须改变什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T18:26:34.560

雪松上的 Heroku 不支持 websockets

无论如何，您可以使用 socket.io

```
io.set("transports", ["xhr-polling"]); 
io.set("polling duration", 10); 
```

[https://devcenter.heroku.com/articles/using-socket-io-with-node-js-on-heroku](https://devcenter.heroku.com/articles/using-socket-io-with-node-js-on-heroku)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:41:03.120

package.json 修改为

```
"dependencies": {
"async":     "0.1.18",
"ejs":       "0.4.3",
"express":   "2.4.6",
"faceplate": "0.0.4",
"socket.io": "latest"   }, 
```

服务器端代码是：

```
var port=process.env.PORT || 3000;
var http=require('http');
var app=http.createServer(function(req,res){
    res.write("server listening to port:"+port);
    res.end();
}).listen(port);
socket=require("socket.io");
io=socket.listen(app);
io.configure(function () { 
  io.set("transports", ["xhr-polling"]); 
  io.set("polling duration", 10); 
});
io.sockets.on("connection",function(socket){
    console.log("new connection");
    socket.on("eventA",function(data){
        io.sockets.emit("eventB",data);
    }); 
}); 
```

像魅力一样工作！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T20:24:01.167

您必须更改您的 PaaS 提供商。Heroku 不支持 websocket。nodejitsu以支持websockets而闻名[。](http://nodejitsu.com)

此外，您可能忘记添加`socket.io`package.json 依赖项列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T06:47:46.697

根据[此项目 wiki 页面](https://github.com/joyent/node/wiki/Socket.IO-and-Heroku)，您需要将 socket.IO 上的传输选项更改为持续时间为 (10) 秒的 xhr-polling 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-07T04:07:46.463

websocket 传输正在以 beta 状态在 Heroku 上工作。你可以启用它`heroku labs:enable websockets -a YOUR_APP_NAME`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-16T12:16:43.237

> 这些是socket.io相关问题的解决方案

> 我希望我会工作

1.  您的（index.js 或 server.js）和（index.html 和您的 client.js）端口中的端口必须不同。（参考下面的代码）

> =============你的 index.js 文件 ======================

> （这里的端口是 8000）

```
const express = require("express")
var app = express();
const http = require('http')
var server = http.createServer(app);

const port = process.env.PORT || 8000
server.listen(port,()=>
{
    console.log("Listening at port => "+port)
});
var io = require('socket.io')(server, {
    cors: {
      origin: '*',
    }
});

const cors = require("cors")
app.use(cors()) 
```

> =============你的client.js文件======================

> 这里的端口是 8080

```
const socket = io.connect('https://localhost:8080/') 
```

> =============您的 index.html 文件 ======================

> 这里的端口是 8080

```
 <script defer src="https://localhost:8080/socket.io/socket.io.js"> 
 </script> 
```

> 请记住您的“server.js 或 index.js”端口应该与“client.js”端口不同（记住这很重要）

> (index.html 和你的 client.js) 端口必须相同

2.  在使用 socket.io 时，您应该始终使用“http”（请参阅​​上面的代码）

3.  你可能不包括 cors，因为它允许你拥有更多资源，没有 cors heroku 会阻止某些依赖项无法安装在 heroku 中（请参阅上面的代码）

4.  尝试将“io”替换为“io.connect”

    const socket = io.connect('https://localhost:8080/')

5.  必须在 HTML 的末尾写标签

6.  你可能会忘记在“socket.io”中添加这个必须的代码

它在您的 html 文件中是必需的

7.  删除“node_modules”和“package-lock.json”并在cmd中写入“npm i”

8.  这应该在 package.json 的脚本中

    “开始”：“节点 index.js”，

我不是在谈论 nodemon ，在这里使用简单的节点

9.  可能是版本造成了问题，你可以通过将所有“devDependencies”复制到“package.json”中的“dependencies”并将“*”放在这样的版本中来避免它

    “依赖”：{

    “cors”：“*”，

    “表示”： ”*”，

    "nodemon": "*",

    “socket.io”：“*”

    },

    “devDependencies”：{}

# asp.net - 被 iframe 标签包围时，silverlight 不工作

> ID：10156374
> 
> 赞同：0
> 
> 时间：2012-04-14T18:55:18.977
> 
> 标签：asp.net, c#-4.0, silverlight-4.0

我有一个 Silverlight 应用程序，我将它托管在一个 asp 网页中......就像这样：

```
 <iframe width="908" height="600">
                <object data="data:application/x-silverlight-2," type="application/x-silverlight-2"
                    width="908" height="600">
                    <param name="source" value="ClientBin/Gsilver3.xap" />
                    <param name="onError" value="onSilverlightError" />
                    <param name="background" value="transparent" />
                    <param name="minRuntimeVersion" value="4.0.50826.0" />
                    <param name="autoUpgrade" value="true" />
                    <%--<param name="windowless" value="true" />--%>

                    </a>
                </object>
            </iframe> 
```

注意 iframe 标签，我使用这个标签来摆脱我的菜单在 SL 后面消失的解决方案，但我的问题是页面打开时。没有显示任何内容..只是一个空白页..我应该怎么做才能让我的 SL 工作..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T22:34:52.337

iframe 标记并不是真的要用作实际的容器元素，而是包含来自外部源的内容的内联框架。

您可以做的是创建另一个仅包含您的 Silverlight 插件的页面，然后将 iframe 的“src”属性设置为包含您的 Silverlight 插件的页面。

```
<iframe height="908" width="600" src="NewSilverlightPage.aspx"></iframe> 
```

# android - 使用 REST 客户端服务器通信和 google oauth 的带有同步适配器的 Android 应用程序

> ID：10156376
> 
> 赞同：0
> 
> 时间：2012-04-14T18:55:29.987
> 
> 标签：android, rest, oauth

我正计划开发一个 android 应用程序，该应用程序使用 REST 架构通过同步适配器将其数据与服务器同步。问题是，是否可以使用 google 帐户在服务器上对用户进行身份验证？如果可能，怎么做**？**你有任何代码片段给我吗？

- 克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:48:38.870

通过谷歌检查这个例子：http: [//developer.android.com/resources/samples/SampleSyncAdapter/index.html](http://developer.android.com/resources/samples/SampleSyncAdapter/index.html)

并查看这些文档 [https://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)

# css - 加载时出现 CSS 错误

> ID：10156378
> 
> 赞同：1
> 
> 时间：2012-04-14T18:55:43.007
> 
> 标签：css

当页面加载我试图隐藏的 div 时，它仅在您继续使用效果时才会出现。我用 display:none;/display:block; 解决了这个问题，但是效果消失了。我怎样才能在不失去效果的情况下解决这个问题？

图片; [http://img26.imageshack.us/img26/4791/ssspl.png](http://img26.imageshack.us/img26/4791/ssspl.png)

实际网站；[http://goo.gl/nTlZQ](http://goo.gl/nTlZQ)

注意：我所说的错误是指蝴蝶周围的文字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T01:00:06.107

把这个加到那个上；

```
display:block;overflow:hidden; 
```

# android - Android：设计扩展到宽度

> ID：10156380
> 
> 赞同：1
> 
> 时间：2012-04-14T18:55:45.227
> 
> 标签：android, xml, layout

我正在尝试为多种屏幕尺寸/密度/等进行设计。我认为“dp”是我的答案，但它并没有像我想象的那样工作。

这是我正在尝试做的事情：

对于保持静态的菜单项，我有一个页眉和页脚部分。然后我在 2 之间有一个 ScrollView。在 ScrollView 中有几个显示各种信息的“块”。我希望这些块始终扩展到屏幕的整个宽度。我希望这些块的高度简单地适当缩放以保持适当的 1:1 -> height:width 比例。我还希望 TextViews/Images/Buttons/etc 缩放并保持它们在块内的位置。如果 Blocks 的高度对于屏幕来说太大了，这就是 ScrollView 的用武之地。如果它们正好合适，那也没关系。我主要想缩放到宽度并让用户在必要时滚动。

目前，如果屏幕变宽，块会变得非常宽，但不会缩放高度以匹配它们。

这是我的 XML 布局代码的基本（为了便于阅读而进行了简化）概要。另请注意，每个块的大小可能不同。我不是在寻找“占 25%”的解决方案。这些块在其中具有相当复杂且完全不同的布局。

```
<LinearLayout>
    <RelativeLayout>Header stuff</RelativeLayout>

    <ScrollView> //height and width = match_parent width lower priority than header/footer

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="???" //Had been using a specified "dp" value but that didn't work like I thought. What goes here?
        >
                Block#1 with lots of TextViews, ImageViews and Buttons...etc
        </RelativeLAyout>

        <RelativeLayout>
                Block#2
        </RelativeLAyout>

        <RelativeLayout>
                Block#3... etc
        </RelativeLAyout>

    </ScrollView>

    <RelativeLayout>Footer stuff</RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:13:19.997

实现视图“完美”1:1 比例（或其他预定义比例）的一种方法是创建它的自定义扩展并覆盖该`onMeasure()`方法。在你的情况下，你可能想要一个看起来像这样`SquareRelativeLayout`的方法：`onMeasure()`

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int width = MeasureSpec.getSize(widthMeasureSpec);
    setMeasuredDimension(width, width);
} 
```

编辑：如果你想要一个自定义比率，你可以在某个地方定义它并像这样测量你的视图：

```
float ratio = 0.5f;
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int width = MeasureSpec.getSize(widthMeasureSpec);
    setMeasuredDimension(width, ratio*width);
} 
```

如果您知道如何创建自己的 xml 属性，则可以添加`ratio`属性并从那里获取它，这意味着您不必为每个不同的比率创建新视图。

# html - 这是 `section` html5 标签的正确使用吗？

> ID：10156381
> 
> 赞同：3
> 
> 时间：2012-04-14T18:55:48.847
> 
> 标签：html, markup

我已经开始过渡到 html5，并且一直在努力理解 section 标签的概念以及它需要在哪里使用。我在下面的代码中有正确的想法吗？

```
<body>
<header>
    <h1>Chris Mepham</h1>
    <section id="who">
        <h2>Who am I?</h2>
        <p>I am a freelance web designer and programmer 
        based in Sudbury, Suffolk. I create modern, bespoke 
        websites and applications for businesses in the uk at 
        affordable prices.</p>
    </section>
    <section id="what">
        <h2>What can I do?</h2>
        <p>I can create you a website and put it online! From 
        conseption through to delivering the finished website. 
        I will ensure the site has been created with strict W3C 
        compliance to ensure maximum cross-browser compatibility.</p>
    </section>
    <section id="skills">
        <h2>My Skills</h2>
        <p>List of skills.</p>
    </section>
</header>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:57:48.780

在我看来是正确的。

[规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#the-section-element)说：

> section 元素表示通用文档或应用程序部分。在这种情况下，部分是内容的主题分组，通常带有标题。

# php - Graph API 不一致

> ID：10156385
> 
> 赞同：0
> 
> 时间：2012-04-14T18:56:32.643
> 
> 标签：php, facebook, codeigniter, facebook-graph-api

我目前正在编写一个 PHP 应用程序。

当它没有返回人的生日时，我注意到了一些奇怪的事情。

长话短说，当我手动查询图形 api 时，它会为我提供完整的结果集（包括生日、电子邮件等）。但是，当我在我的应用程序中运行它时，它又回来了，就好像我没有发送访问令牌一样。

当我手动访问它产生的地址时：

```
{
   "id": "507665705",
   "name": "Ally Dewar",
   "first_name": "Ally",
   "last_name": "Dewar",
   "link": "https://www.facebook.com/alastair.dewar",
   "username": "alastair.dewar",
   "birthday": "06/22/1990",
   "location": {
      "id": "113744028635772",
      "name": "Greenock"
   },
   "gender": "male",
   "email": "alastair\u0040alastairdewar.co.uk",
   "timezone": 1,
   "locale": "en_GB",
   "verified": true,
   "updated_time": "2012-03-11T15:56:19+0000"
} 
```

但是，当我的应用程序发出相同的请求（完全相同的 URL）时，它会返回

```
{"id":"507665705","name":"Ally Dewar","first_name":"Ally","last_name":"Dewar","link":"http:\/\/www.facebook.com\/alastair.dewar","username":"alastair.dewar","gender":"male","email":"alastair\u0040alastairdewar.co.uk","locale":"en_GB"} 
```

我的直觉说这可能是 facebook 应用程序中的一个设置，因为事先这不是问题。

编辑：[https ://developers.facebook.com/bugs/412680422092698?browse=search_4f854dc037a2a5d12811839](https://developers.facebook.com/bugs/412680422092698?browse=search_4f854dc037a2a5d12811839)

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:49:05.637

确保您要求获得所需的所有权限，并删除该应用程序并重新开始。确保您也不要缓存任何响应。

你如何查询API？Graph Explorer 还是手动打开链接 (graph.facebook.com/USER_ID) 并传递应用程序生成的身份验证令牌？由于权限等不同，使用 Graph Explorer 进行测试不会帮助您解决问题。

正如大雄所说，代码有帮助。考虑到您提供给我们的数据量，这是我所能建议的。

# python - IDLE 不会突出显示我的语法

> ID：10156386
> 
> 赞同：6
> 
> 时间：2012-04-14T18:56:41.043
> 
> 标签：python, syntax-highlighting, python-idle

使用 IDLE 和 Python 2.7.3 版。只有当我开始一个新文件时，它才会突出显示几行，然后在我按 F5 后停止。所以我所有的文字都变成了纯黑色。

如果那里有同样好/更好的命令行和编辑器组合，您可能总是会建议它们。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-11T19:27:45.797

这也发生在我身上。将其另存为 .py （在文档名称中手动输入 .py），高亮将恢复。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-14T19:00:58.377

我通常必须将文件保存为 .py，然后 IDLE 才会进行任何语法突出显示。不知道为什么它会突出显示几个然后停止。我从来没有发生过这种情况。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-30T16:20:26.883

检查**Options** -> **Configure IDLE** -> **Keys** -> **Custom Key Bindings下的****toggle-auto-coloring**选项的键绑定。默认值为+ 。这应该允许您重新打开语法突出显示。（虽然你不能关闭它，呵呵）********`Ctrl``/`********

 ******在 IDLE 2.7 和 IDLE 3.3.3 上都适用于我。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-14T20:42:54.847

这是在Windows下吗？您对 Python 文件的文件关联是否可能已更改？（不太清楚为什么/如何会发生这种情况，但也许值得检查）******

# java - ZeroMQ 用于移动协议缓冲区有效负载的替代方案是什么？

> ID：10156388
> 
> 赞同：11
> 
> 时间：2012-04-14T18:56:45.863
> 
> 标签：java, c++, rpc, protocol-buffers, zeromq

目前我有一个使用 ZeroMQ 交换协议缓冲区有效负载的解决方案。序列化的协议缓冲区方法必然保持原样，但我可以用更方便的选项替换 ZMQ。在 ZMQ 中我不满意的事情是：

它在 Java 端使用 JNI，我之前在复杂的多线程场景中被 JNI 咬过。我尽量消除它。

我不需要排队，我只需要rpc。

我的要求（主要由 ZeroMQ 覆盖）是：

*   支持 32/64 位 *nix、Windows、MacOS。

*   主要支持 Java、C++ 和 C#，以及 Python、Ruby 等。

*   语言支持必须由语言中的本机实现提供，而不是通过包装本机代码。

*   高性能。

*   非病毒许可，无 GPL、AGPL 等。

*   我一直在考虑使用 Thrift 作为 TCP 上的传输层（我猜它支持）和协议缓冲区有效负载，如果其用于消息传递的 Java 实现不使用 JNI。

对于此设置，除了 ZMQ 之外，您还能想到哪些选项？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-15T18:27:46.777

您可能应该看看[Netty](http://netty.io/)。它是一个高性能的 Java NIO 服务器框架，内置对根据 Apache 许可条款发布的 Protocol Buffer 的支持。该框架有[据可查](http://netty.io/docs/stable/guide/html/#architecture.7.6)，一些[示例](http://netty.io/docs/stable/xref/org/jboss/netty/example/localtime/package-summary.html)展示了如何使用 Protocol Buffers 对协议进行原型设计。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-17T07:28:29.043

您是否考虑过[Storm](https://github.com/haitaoyao/storm)或[Spread](http://www.spread.org/)之类的东西？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-05T23:30:54.343

[最初的问题是在JeroMQ](https://github.com/zeromq/jeromq)被放到 github大约一年后提出的。它是 ZeroMQ 的纯 Java 实现。在过去的几年中，它一直在不断发展，并且[在速度](https://github.com/zeromq/jeromq/wiki/Performance)上似乎可以与C 实现相媲美。

# javascript - 制作一个通用的 jQuery “addListener”

> ID：10156390
> 
> 赞同：0
> 
> 时间：2012-04-14T18:56:47.183
> 
> 标签：javascript, jquery

我正在尝试重现谷歌地图，`addListener`除了用于点击、按键等的 jQuery 侦听器。

在 Moogle 地图中，您可以`.event.addListener(map, 'click', function()...`使用“拖动”、“鼠标悬停”等编写或替换“点击”。对于 jQuery，我看到与“点击”、“按键”等类似的内容。

我被困在您可以将触发器类型作为变量传递的地步。声明单独的包装监听器很简单，比如

```
 function addClickListener(id, fn) {
    $(id).click(function() { fn(event); });
  }      

  // and

  function addKeyPressListener(id, fn) {
    $(id).keypress(function() { fn(event); });
  } 
```

我要找的东西坏了，如下所示。我不知道谷歌如何传递一个像“点击”这样的字符串并使那个调用成为一个函数。也许与`eval`？*不寒而栗*

```
 function addListener(id, type, fn) {
    typeFn = $.type;
    $(id).typeFn(function() { fn(event); });
  } 
```

最后：http: [//jsfiddle.net/YCVVL/](http://jsfiddle.net/YCVVL/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:01:37.713

我认为您可以在此处使用“[方括号表示法](http://www.jibbering.com/faq/faq_notes/square_brackets.html)”：

```
function addListener(id, type, fn) {
    $(id)[type](function() { fn(event); }); //< here
} 
```

或使用以下之一：

```
$(id).on(type, function() { fn(event); });
$(id).bind(type, function() { fn(event); }); 
```

# iphone - 奇怪的 NSMutable 数组错误

> ID：10156394
> 
> 赞同：0
> 
> 时间：2012-04-14T18:57:03.227
> 
> 标签：iphone, objective-c, ios, arrays, nsmutablearray

我只是想在我的应用程序运行时调用的 (id) 类型函数中定义的 'score' nsmutable 数组中更新我的分数。所以我不知道出了什么问题，我在函数体之前和之后放入了一个 NSLog 以检查发生了什么，我将在代码之后发布它们。

```
-(void)changeScore:(int)moves AtLevel:(int)theLevel{
for (int i = 0; i < 20; i++) {
    NSLog(@"At level %d we have a score of: %d ", i+1, [[scores objectAtIndex:i] intValue]);
}
if (theLevel <= 9){
    NSNumber* number = [[NSNumber alloc]initWithInt:50 - moves];
    [scores replaceObjectAtIndex:theLevel - 1 withObject:number];
    NSLog(@"this is number's int value: %d and this is thelevel - 1: %d", [number intValue], theLevel - 1);
}
if (theLevel > 9 && theLevel <= 19){
    NSNumber* number = [[NSNumber alloc]initWithInt:150-moves];
    [scores replaceObjectAtIndex:theLevel - 1 withObject:number];
}
for (int i = 0; i < 20; i++) {
    NSLog(@"At level %d we have a score of: %d", i+1, [[scores objectAtIndex:i] intValue]);
}
} 
```

和 NSLog 产生这个：

```
2012-04-14 14:53:49.018 Arctic Defender[2068:f803] At level 1 we have a score of: 0 
2012-04-14 14:53:49.022 Arctic Defender[2068:f803] At level 2 we have a score of: 0 
2012-04-14 14:53:49.023 Arctic Defender[2068:f803] At level 3 we have a score of: 0 
2012-04-14 14:53:49.024 Arctic Defender[2068:f803] At level 4 we have a score of: 0 
2012-04-14 14:53:49.026 Arctic Defender[2068:f803] At level 5 we have a score of: 0 
2012-04-14 14:53:49.027 Arctic Defender[2068:f803] At level 6 we have a score of: 0 
2012-04-14 14:53:49.028 Arctic Defender[2068:f803] At level 7 we have a score of: 0 
2012-04-14 14:53:49.029 Arctic Defender[2068:f803] At level 8 we have a score of: 0 
2012-04-14 14:53:49.030 Arctic Defender[2068:f803] At level 9 we have a score of: 0 
2012-04-14 14:53:49.031 Arctic Defender[2068:f803] At level 10 we have a score of: 0 
2012-04-14 14:53:49.032 Arctic Defender[2068:f803] At level 11 we have a score of: 0 
2012-04-14 14:53:49.033 Arctic Defender[2068:f803] At level 12 we have a score of: 0 
2012-04-14 14:53:49.035 Arctic Defender[2068:f803] At level 13 we have a score of: 0 
2012-04-14 14:53:49.036 Arctic Defender[2068:f803] At level 14 we have a score of: 0 
2012-04-14 14:53:49.101 Arctic Defender[2068:f803] At level 15 we have a score of: 0 
2012-04-14 14:53:49.102 Arctic Defender[2068:f803] At level 16 we have a score of: 0 
2012-04-14 14:53:49.103 Arctic Defender[2068:f803] At level 17 we have a score of: 0 
2012-04-14 14:53:49.104 Arctic Defender[2068:f803] At level 18 we have a score of: 0 
2012-04-14 14:53:49.104 Arctic Defender[2068:f803] At level 19 we have a score of: 0 
2012-04-14 14:53:49.105 Arctic Defender[2068:f803] At level 20 we have a score of: 0 
2012-04-14 14:53:49.106 Arctic Defender[2068:f803] this is number's int value: 38 and this is thelevel - 1: 0
2012-04-14 14:53:49.111 Arctic Defender[2068:f803] At level 1 we have a score of: 0
2012-04-14 14:53:49.112 Arctic Defender[2068:f803] At level 2 we have a score of: 0
2012-04-14 14:53:49.113 Arctic Defender[2068:f803] At level 3 we have a score of: 0
2012-04-14 14:53:49.114 Arctic Defender[2068:f803] At level 4 we have a score of: 0
2012-04-14 14:53:49.114 Arctic Defender[2068:f803] At level 5 we have a score of: 0
2012-04-14 14:53:49.135 Arctic Defender[2068:f803] At level 6 we have a score of: 0
2012-04-14 14:53:49.136 Arctic Defender[2068:f803] At level 7 we have a score of: 0
2012-04-14 14:53:49.137 Arctic Defender[2068:f803] At level 8 we have a score of: 0
2012-04-14 14:53:49.138 Arctic Defender[2068:f803] At level 9 we have a score of: 0
2012-04-14 14:53:49.157 Arctic Defender[2068:f803] At level 10 we have a score of: 0
2012-04-14 14:53:49.159 Arctic Defender[2068:f803] At level 11 we have a score of: 0
2012-04-14 14:53:49.160 Arctic Defender[2068:f803] At level 12 we have a score of: 0
2012-04-14 14:53:49.160 Arctic Defender[2068:f803] At level 13 we have a score of: 0
2012-04-14 14:53:49.163 Arctic Defender[2068:f803] At level 14 we have a score of: 0
2012-04-14 14:53:49.165 Arctic Defender[2068:f803] At level 15 we have a score of: 0
2012-04-14 14:53:49.166 Arctic Defender[2068:f803] At level 16 we have a score of: 0
2012-04-14 14:53:49.167 Arctic Defender[2068:f803] At level 17 we have a score of: 0
2012-04-14 14:53:49.169 Arctic Defender[2068:f803] At level 18 we have a score of: 0
2012-04-14 14:53:49.170 Arctic Defender[2068:f803] At level 19 we have a score of: 0
2012-04-14 14:53:49.171 Arctic Defender[2068:f803] At level 20 we have a score of: 0 
```

编辑：这是我的分数初始化代码：

```
-(id)initNewScores{
//Initalize 20 levels
for (int i = 0; i < 20; i++) {
    NSNumber* numb = [[NSNumber alloc] initWithInt:0];
    [scores addObject:numb];
    [numb release];
}
return self;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T19:09:25.663

显示该`scores`方法入口时的值。我敢打赌是`nil`。即，无论您用来初始化该可变数组的任何内容都不起作用。

# com - 为什么 C++ 中的 Windows COM 编程中有这么多方法显式解析为全局命名空间？

> ID：10156396
> 
> 赞同：0
> 
> 时间：2012-04-14T18:57:26.413
> 
> 标签：com, namespaces

我正在用 C++ 编写 Windows COM，我看到很多函数都带有前缀，`::`因此全局命名空间版本被调用。这是为什么？

我知道命名空间可能存在冲突，但是在 COM 中是否经常发生这种情况，以至于每个人都变得如此偏执，以至于现在必须明确解决每个函数？

下面是一些我经常看到的例子：

```
wStrLen = ::SysAllocStringLen(NULL, wStr);
::SysFreeString(str);
::CoTaskMemFree(item); 
```

还有许多其他人。

这让我感到困惑，为什么程序员选择显式解析命名空间以及为什么他们不只是写：

```
wStrLen = SysAllocStringLen(NULL, wStr);
SysFreeString(str);
CoTaskMemFree(item); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:16:58.687

不，这在 COM 编程中并不常见，无论如何在我编写或研究的任何内容中都不常见。COM 本身为全局命名空间添加了一些名称，没有那么多的辅助函数。实现 COM 接口的一种常见方法是使用 C++ 类，您可以将其粘贴在您喜欢的任何命名空间中，因为它根本不会暴露在模块之外。我怀疑这只是您看到的代码的团队更喜欢的东西。如果您在一本书中看到它，那么这是增加书籍代码示例可以轻松放入现有程序的几率的好方法。否则没有任何问题。

# c# - InjectTouchInput Windows 8 C# 不工作（返回 false）

> ID：10156400
> 
> 赞同：5
> 
> 时间：2012-04-14T18:57:37.250
> 
> 标签：c#, visual-studio, touch, windows-8

我最近才开始使用 Windows 8 Consumer Preview 的 InjectTouchInput。我一直在兜圈子，试图让这该死的东西发挥作用，但似乎无法让它真正互动。我在 c# 中工作，目前只在两个文本框和按钮中创建一个带有 x 和 y 坐标的 Metro 界面，这些按钮调用下面的函数以在这些坐标处触摸屏幕。这是做这件事的正确方法吗？

```
protected unsafe class TouchDriver
    {

        public struct POINTER_TOUCH_INFO {
            public POINTER_INFO pointerInfo;   // An embedded POINTER_INFO header structure.

            public TOUCH_FLAGS touchFlags;          // Currently none.

            public Rect rcContact;             // Pointer contact area in pixel screen coordinates. By default, if the device does not report a contact area, this field defaults to a 0-by-0 rectangle centered around the pointer location. 

            public UInt32 orientation;         // A pointer orientation, with a value between 0 and 359, where 0 indicates a touch pointer aligned with the x-axis and pointing from left to right; increasing values indicate degrees of rotation in the clockwise direction.
                                        // This field defaults to 0 if the device does not report orientation.

            public UInt32 pressure;            // Pointer pressure normalized in a range of 0 to 256.
                                        // This field defaults to 128 if the device does not report pressure.
                                        // Question: Can this go from 0 to 1024 to match pen pressure?

        }
        public enum TOUCH_FLAGS
        {
            TOUCH_FLAGS_NONE = 0x00000000
        }

        public POINTER_TOUCH_INFO create_pointer_touch_info(POINTER_INFO pointerInfo, TOUCH_FLAGS touchFlags, RECT rcContact, UInt32 orientation, UInt32 pressure)
        {
            POINTER_TOUCH_INFO mi = new POINTER_TOUCH_INFO();
            mi.pointerInfo = pointerInfo;
            mi.touchFlags = touchFlags;
            mi.rcContact = rcContact;
            mi.orientation = orientation;
            mi.pressure = pressure;
            return mi;
        }
        public enum POINTER_INPUT_TYPE
        {
          PT_POINTER   = 0x00000001,
          PT_TOUCH     = 0x00000002,
          PT_PEN       = 0x00000003,
          PT_MOUSE     = 0x00000004 
        }
        public struct POINTER_INFO
        {
          public POINTER_INPUT_TYPE pointerType;
          public UInt32 pointerId;
          public UInt32 frameId;
          public HANDLE sourceDevice;
          public HWND hwndTarget;
          public Point ptPixelLocation;
          public Point ptHimetricLocation;
          public Point ptPixelLocationPredicted;
          public Point ptHimetricLocationPredicted;
          public POINTER_FLAGS pointerFlags;
          public DWORD dwTime;
          public UInt32 historyCount;
          // public UInt32 inputData;
          public DWORD dwKeyStates;
          public ULONGLONG Reserved;
        }
        public POINTER_INFO create_pointer_info(
            POINTER_INPUT_TYPE pointerType,
            UInt32 pointerId,
            UInt32 frameId,
            HANDLE sourceDevice,
            HWND hwndTarget,
            Point ptPixelLocation,
            Point ptHimetricLocation,
            Point ptPixelLocationPredicted,
            Point ptHimetricLocationPredicted,
            POINTER_FLAGS pointerFlags,
            DWORD dwTime,
            UInt32 historyCount,
            // UInt32 inputData,
            DWORD dwKeyStates,
            ULONGLONG Reserved)
        {
            POINTER_INFO mi = new POINTER_INFO();
            mi.pointerType = pointerType;
            mi.pointerId = pointerId;
            mi.frameId = frameId;
            mi.sourceDevice = sourceDevice;
            mi.hwndTarget = hwndTarget;
            mi.ptPixelLocation = ptPixelLocation;
            mi.ptHimetricLocation = ptHimetricLocation;
            mi.ptPixelLocationPredicted = ptPixelLocationPredicted;
            mi.ptHimetricLocationPredicted = ptHimetricLocationPredicted;
            mi.pointerFlags = pointerFlags;
            mi.dwTime = dwTime;
            mi.historyCount = historyCount;
            // mi.inputData = inputData;
            mi.dwKeyStates = dwKeyStates;
            mi.Reserved = Reserved;
            return mi;
        }
        public enum POINTER_FLAGS
        {
          POINTER_FLAG_NONE           = 0x00000000,
          POINTER_FLAG_NEW            = 0x00000001,
          POINTER_FLAG_INRANGE        = 0x00000002,
          POINTER_FLAG_INCONTACT      = 0x00000004,
          POINTER_FLAG_FIRSTBUTTON    = 0x00000010,
          POINTER_FLAG_SECONDBUTTON   = 0x00000020,
          POINTER_FLAG_THIRDBUTTON    = 0x00000040,
          POINTER_FLAG_OTHERBUTTON    = 0x00000080,
          POINTER_FLAG_PRIMARY        = 0x00000100,
          POINTER_FLAG_CONFIDENCE     = 0x00000200,
          POINTER_FLAG_CANCELLED      = 0x00000400,
          POINTER_FLAG_DOWN           = 0x00010000,
          POINTER_FLAG_UPDATE         = 0x00020000,
          POINTER_FLAG_UP             = 0x00040000,
          POINTER_FLAG_WHEEL          = 0x00080000,
          POINTER_FLAG_HWHEEL         = 0x00100000 
        }

        [System.Runtime.InteropServices.DllImport("user32.dll", CallingConvention = CallingConvention.StdCall)]
        private static extern Boolean InjectTouchInput(UInt32 count, POINTER_TOUCH_INFO* pntTchInfo);

        [System.Runtime.InteropServices.DllImport("user32.dll")]
        private static extern Boolean InitializeTouchInjection(UInt32 maxCount, DWORD dwMode);

        private const UInt32 MAX_TOUCH_COUNT = 256; // Can be as high as 256
        private const UInt32 TOUCH_FEEDBACK_DEFAULT = 0x1;
        private const UInt32 TOUCH_FEEDBACK_INDIRECT = 0x2;
        private const UInt32 TOUCH_FEEDBACK_NONE = 0x3;

        public unsafe static void MouseTouch(int x, int y)
        {
            bool ret = false;
            ret = InitializeTouchInjection(1, TOUCH_FEEDBACK_DEFAULT);
            if (!ret)
            {
                throw new NotSupportedException();
            }
            Point point = new Point(x,y);

            POINTER_INFO ptrInfo = new POINTER_INFO();
            POINTER_TOUCH_INFO* ptrTchInfo;
            ptrInfo.pointerType = POINTER_INPUT_TYPE.PT_TOUCH;
            ptrInfo.pointerId = 1;
            ptrInfo.ptPixelLocation = point;
            ptrInfo.pointerFlags = POINTER_FLAGS.POINTER_FLAG_PRIMARY;
            POINTER_TOUCH_INFO ptrTchInfobase = new POINTER_TOUCH_INFO();
            ptrTchInfo = &ptrTchInfobase;
            ptrTchInfo->pointerInfo = ptrInfo;
            ptrTchInfo->touchFlags = TOUCH_FLAGS.TOUCH_FLAGS_NONE;
            ptrTchInfo->rcContact.X = x - 2;
            ptrTchInfo->rcContact.Y = y - 2;
            ptrTchInfo->rcContact.Width = 4;
            ptrTchInfo->rcContact.Height = 4;
            ptrTchInfo->pressure = 128;
            ptrTchInfo->orientation = 0;

            ret = InjectTouchInput(1, ptrTchInfo);
            if (!ret)
            {
                throw new NotImplementedException();
            }

        }

    } 
```

我尝试从网上找到的 InjectTouchInput API 中提取的几乎所有内容。我可以很好地 InitializeTouchInject，它的 Inject 位返回 false，我不知道为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T21:39:28.787

我继续并根据微软提供的示例在 C++ 中创建了一些自定义函数，然后使用许多与以前相同的定义将其导入 C#，但没有放屁之前导致头痛的所有类型检查、指针和参数.

我使用的 DLL 文件是 TouchInjectionDriver.dll，可以在这里找到：

[http://www.mediafire.com/file/do2h6m04omjweb3/TouchInjectionDriver.zip](http://www.mediafire.com/file/do2h6m04omjweb3/TouchInjectionDriver.zip)

下面是我用来实现它的 C# 代码。

```
 public enum TOUCH_MASK : uint
        {
            TOUCH_MASK_NONE = 0x00000000,
            TOUCH_MASK_CONTACTAREA = 0x00000001,
            TOUCH_MASK_ORIENTATION = 0x00000002,
            TOUCH_MASK_PRESSURE = 0x00000004
        }
        public enum POINTER_INPUT_TYPE : uint
        {
            PT_POINTER = 0x00000001,
            PT_TOUCH = 0x00000002,
            PT_PEN = 0x00000003,
            PT_MOUSE = 0x00000004
        }

        public enum POINTER_FLAGS : uint
        {
            POINTER_FLAG_NONE = 0x00000000,
            POINTER_FLAG_NEW = 0x00000001,
            POINTER_FLAG_INRANGE = 0x00000002,
            POINTER_FLAG_INCONTACT = 0x00000004,
            POINTER_FLAG_FIRSTBUTTON = 0x00000010,
            POINTER_FLAG_SECONDBUTTON = 0x00000020,
            POINTER_FLAG_THIRDBUTTON = 0x00000040,
            POINTER_FLAG_OTHERBUTTON = 0x00000080,
            POINTER_FLAG_PRIMARY = 0x00000100,
            POINTER_FLAG_CONFIDENCE = 0x00000200,
            POINTER_FLAG_CANCELLED = 0x00000400,
            POINTER_FLAG_DOWN = 0x00010000,
            POINTER_FLAG_UPDATE = 0x00020000,
            POINTER_FLAG_UP = 0x00040000,
            POINTER_FLAG_WHEEL = 0x00080000,
            POINTER_FLAG_HWHEEL = 0x00100000
        }
        public enum TOUCH_FEEDBACK : uint
        {
            TOUCH_FEEDBACK_DEFAULT = 0x1,
            TOUCH_FEEDBACK_INDIRECT = 0x2,
            TOUCH_FEEDBACK_NONE = 0x3
        }

        [DllImport("TouchInjectionDriver.dll", CallingConvention = CallingConvention.Cdecl)]
        private static extern bool InjectTouch(int x, int y, POINTER_INPUT_TYPE pt_input, int pressure, int orientation, int id, int rcContactTop, int rcContactBottom, int rcContactLeft, int rcContactRight, POINTER_FLAGS pointerFlags, TOUCH_MASK touchMask);
        [DllImport("TouchInjectionDriver.dll", CallingConvention = CallingConvention.Cdecl)]
        private static extern void setTouchFeedback(TOUCH_FEEDBACK fb);
        [DllImport("TouchInjectionDriver.dll", CallingConvention = CallingConvention.Cdecl)]
        private static extern void setDefaultRectSize(int size);
        [DllImport("TouchInjectionDriver.dll", CallingConvention = CallingConvention.Cdecl)]
        private static extern void setDefaultPressure(int pres);
        [DllImport("TouchInjectionDriver.dll", CallingConvention = CallingConvention.Cdecl)]
        private static extern void setDefaultOrientation(int or);

        [DllImport("User32.dll")]
        static extern Boolean MessageBeep(UInt32 beepType);

        public static void mouseclick(int x, int y)
        {
            bool ret;
            setTouchFeedback(TOUCH_FEEDBACK.TOUCH_FEEDBACK_INDIRECT);
            ret = InjectTouch(x, y, POINTER_INPUT_TYPE.PT_TOUCH, 3200, 0, 0, x - 4, x + 4, y - 4, y + 4,POINTER_FLAGS.POINTER_FLAG_DOWN|POINTER_FLAGS.POINTER_FLAG_INCONTACT|POINTER_FLAGS.POINTER_FLAG_INRANGE,TOUCH_MASK.TOUCH_MASK_CONTACTAREA|TOUCH_MASK.TOUCH_MASK_ORIENTATION|TOUCH_MASK.TOUCH_MASK_PRESSURE);
            if (ret)
            {
                ret = InjectTouch(x, y, POINTER_INPUT_TYPE.PT_TOUCH, 3200, 0, 0, x - 4, x + 4, y - 4, y + 4, POINTER_FLAGS.POINTER_FLAG_UP, TOUCH_MASK.TOUCH_MASK_CONTACTAREA | TOUCH_MASK.TOUCH_MASK_ORIENTATION | TOUCH_MASK.TOUCH_MASK_PRESSURE);
            }
            else
            {
                MessageBeep(0);
            }
        } 
```

# html - 如何使图像保持在一条长线上？

> ID：10156403
> 
> 赞同：1
> 
> 时间：2012-04-14T18:57:54.327
> 
> 标签：html, css, image

看看这个[小提琴](http://jsfiddle.net/lexy0202/Le3b2/)。我正在尝试创建一个小画廊，用户可以通过移动鼠标来导航。

那个小提琴只是我在使用图像时遇到的问题的演示。目前，您可以看到随着图像向左滚动，它们“弹出”到行尾，而不是连续流动。

如果您`overflow:hidden`从 CSS 中脱离出来，您会看到图像包裹在多行上，这就是导致它们“弹出”到行尾而不是连续流动的原因。

如何强制图像保持在一条线上，从而达到连续流动的效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T19:01:19.233

添加

```
#gallery {
    white-space: nowrap;
} 
```

[http://jsfiddle.net/mattball/mwLDu/](http://jsfiddle.net/mattball/mwLDu/)

它还具有您想要的尽可能多的浏览器兼容性。[http://quirksmode.org/css/whitespace.html](http://quirksmode.org/css/whitespace.html)

# c++ - C ++中的向量对一种方法没有响应，但对其他方法很好

> ID：10156404
> 
> 赞同：0
> 
> 时间：2012-04-14T18:57:58.017
> 
> 标签：c++, stl, vector

可能是一个非常愚蠢的问题，但已经很晚了，我累了，晚餐也快准备好了......

这是我拥有的一种方法，它接受一个向量并将其中的值分配给另一个先前定义为 ivar 的向量。问题是它在最后一个方法调用上抛出一个错误，说：No matching member function for call to 'insert'

这是代码，火焰：

```
void Symbol::setEncodedData( vector<int>* ec )
{
Symbol::encodedSymbol.clear( );
Symbol::encodedSymbol.resize( ec->size( ) );
Symbol::encodedSymbol.insert( 0, ec->begin( ), ec->end( ) );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:19:06.733

您的参数错误，`0`不是有效的迭代器。可能的候选人是：

```
iterator insert ( iterator position, const T& x );
    void insert ( iterator position, size_type n, const T& x );
template <class InputIterator>
    void insert ( iterator position, InputIterator first, InputIterator last ); 
```

为什么不简单地使用`operator =`来复制内容呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T20:14:01.437

```
void Symbol::setEncodedData( vector<int>* ec )
{
    Symbol::encodedSymbol = *ec;
} 
```

但是为什么要使用指针参数？

```
void Symbol::setEncodedData(vector<int> const& ec)
{
    Symbol::encodedSymbol = ec;
} 
```

# c - 将十六进制字符串（char []）转换为int？

> ID：10156409
> 
> 赞同：96
> 
> 时间：2012-04-14T18:58:20.177
> 
> 标签：c, char, int

我有一个包含诸如“0x1800785”之类的值的char []，但是我想赋予该值的函数需要一个int，如何将其转换为int？我四处寻找，但找不到答案。谢谢。

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2012-04-14T19:01:19.713

你试过`strtol()`吗？

[strtol - 将字符串转换为长整数](http://pubs.opengroup.org/onlinepubs/7908799/xsh/strtol.html)

例子：

```
const char *hexstring = "abcdef0";
int number = (int)strtol(hexstring, NULL, 16); 
```

如果数字的字符串表示以`0x`前缀开头，则~~必须~~使用 0 作为基数：

```
const char *hexstring = "0xabcdef0";
int number = (int)strtol(hexstring, NULL, 0); 
```

（也可以指定一个明确的基数，例如 16，但我不建议引入冗余。）

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-08-20T10:19:07.040

或者如果你想有自己的实现，我写了这个快速函数作为例子：

```
/**
 * hex2int
 * take a hex string and convert it to a 32bit number (max 8 hex digits)
 */
uint32_t hex2int(char *hex) {
    uint32_t val = 0;
    while (*hex) {
        // get current character then increment
        uint8_t byte = *hex++; 
        // transform hex character to the 4bit equivalent number, using the ascii table indexes
        if (byte >= '0' && byte <= '9') byte = byte - '0';
        else if (byte >= 'a' && byte <='f') byte = byte - 'a' + 10;
        else if (byte >= 'A' && byte <='F') byte = byte - 'A' + 10;    
        // shift 4 to make space for new digit, and add the 4 bits of the new digit 
        val = (val << 4) | (byte & 0xF);
    }
    return val;
} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-04-14T19:14:20.403

像这样的东西可能很有用：

```
char str[] = "0x1800785";
int num;

sscanf(str, "%x", &num);
printf("0x%x %i\n", num, num); 
```

阅读[man sscanf](http://linux.die.net/man/3/sscanf)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-04-14T19:01:20.567

假设你的意思是它是一个字符串，那么[strtol](http://linux.die.net/man/3/strtol)怎么样？

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-07-19T12:34:28.477

如果`strtol`您有可用的 libc（如最佳答案所示），请使用。但是，如果您喜欢定制的东西或者在没有 libc 左右的微控制器上，您可能需要一个稍微优化的版本，而不需要复杂的分支。

```
#include <inttypes.h>

/**
 * xtou64
 * Take a hex string and convert it to a 64bit number (max 16 hex digits).
 * The string must only contain digits and valid hex characters.
 */
uint64_t xtou64(const char *str)
{
    uint64_t res = 0;
    char c;

    while ((c = *str++)) {
        char v = (c & 0xF) + (c >> 6) | ((c >> 3) & 0x8);
        res = (res << 4) | (uint64_t) v;
    }

    return res;
} 
```

移位魔术归结为：只需使用最后 4 位，但如果它是非数字，则还要加 9。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-09-05T08:41:57.997

试试下面的代码块，它对我有用。

```
char p[] = "0x820";
uint16_t intVal;
sscanf(p, "%x", &intVal);

printf("value x: %x - %d", intVal, intVal); 
```

输出是：

```
value x: 820 - 2080 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-01-05T17:32:26.297

因此，经过一段时间的搜索，发现 strtol 非常慢，我编写了自己的函数。它仅适用于大写字母，但添加小写功能不是问题。

```
int hexToInt(PCHAR _hex, int offset = 0, int size = 6)
{
    int _result = 0;
    DWORD _resultPtr = reinterpret_cast<DWORD>(&_result);
    for(int i=0;i<size;i+=2)
    {
        int _multiplierFirstValue = 0, _addonSecondValue = 0;

        char _firstChar = _hex[offset + i];
        if(_firstChar >= 0x30 && _firstChar <= 0x39)
            _multiplierFirstValue = _firstChar - 0x30;
        else if(_firstChar >= 0x41 && _firstChar <= 0x46)
            _multiplierFirstValue = 10 + (_firstChar - 0x41);

        char _secndChar = _hex[offset + i + 1];
        if(_secndChar >= 0x30 && _secndChar <= 0x39)
            _addonSecondValue = _secndChar - 0x30;
        else if(_secndChar >= 0x41 && _secndChar <= 0x46)
            _addonSecondValue = 10 + (_secndChar - 0x41);

        *(BYTE *)(_resultPtr + (size / 2) - (i / 2) - 1) = (BYTE)(_multiplierFirstValue * 16 + _addonSecondValue);
    }
    return _result;
} 
```

用法：

```
char *someHex = "#CCFF00FF";
int hexDevalue = hexToInt(someHex, 1, 8); 
```

1 因为我们要转换的十六进制从偏移量 1 开始，而 8 因为它是十六进制长度。

速度测试（1.000.000 次调用）：

```
strtol ~ 0.4400s
hexToInt ~ 0.1100s 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-10-06T00:35:20.377

一种快速而肮脏的解决方案：

```
// makes a number from two ascii hexa characters
int ahex2int(char a, char b){

    a = (a <= '9') ? a - '0' : (a & 0x7) + 9;
    b = (b <= '9') ? b - '0' : (b & 0x7) + 9;

    return (a << 4) + b;
} 
```

您必须确保您的输入是正确的，不包括验证（可以说是 C）。好在它非常紧凑，它适用于“A”到“F”和“a”到“f”。

该方法依赖于字母字符在 ASCII 表中的位置，让我们看看例如 Wikipedia ( [https://en.wikipedia.org/wiki/ASCII#/media/File:USASCII_code_chart.png](https://en.wikipedia.org/wiki/ASCII#/media/File:USASCII_code_chart.png) )。长话短说，数字在字符下方，因此数字字符（0 到 9）很容易通过减去代码为零来转换。字母字符（A 到 F）通过除最后三位之外的零（有效地使其适用于大写或小写）、减一（因为在位掩码后，字母从位置一开始）和加十（因为 A 到 F 代表十六进制代码中的第 10 到第 15 个值）。最后，我们需要组合构成编码数字的低半字节和高半字节的两位数字。

在这里，我们采用相同的方法（有细微的变化）：

```
#include <stdio.h>

// takes a null-terminated string of hexa characters and tries to 
// convert it to numbers
long ahex2num(unsigned char *in){

    unsigned char *pin = in; // lets use pointer to loop through the string
    long out = 0;  // here we accumulate the result

    while(*pin != 0){
        out <<= 4; // we have one more input character, so 
                   // we shift the accumulated interim-result one order up
        out +=  (*pin < 'A') ? *pin & 0xF : (*pin & 0x7) + 9; // add the new nibble
        pin++; // go ahead
    }

    return out;
}

// main function will test our conversion fn
int main(void) {

    unsigned char str[] = "1800785";  // no 0x prefix, please
    long num;

    num = ahex2num(str);  // call the function

    printf("Input: %s\n",str);  // print input string
    printf("Output: %x\n",num);  // print the converted number back as hexa
    printf("Check: %ld = %ld \n",num,0x1800785);  // check the numeric values matches

    return 0;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-07-21T20:10:29.433

这是一个直接将包含 char 数组的十六进制转换为不需要额外库的整数的函数：

```
int hexadecimal2int(char *hdec) {
    int finalval = 0;
    while (*hdec) {

        int onebyte = *hdec++; 

        if (onebyte >= '0' && onebyte <= '9'){onebyte = onebyte - '0';}
        else if (onebyte >= 'a' && onebyte <='f') {onebyte = onebyte - 'a' + 10;}
        else if (onebyte >= 'A' && onebyte <='F') {onebyte = onebyte - 'A' + 10;}  

        finalval = (finalval << 4) | (onebyte & 0xF);
    }
    finalval = finalval - 524288;
    return finalval;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-07-02T05:14:07.413

我做了类似的事情，认为它可能会帮助你它实际上为我工作

```
int main(){
  int co[8];
  char ch[8];
  printf("please enter the string:");
  scanf("%s", ch);
  for (int i=0; i<=7; i++) {
     if ((ch[i]>='A') && (ch[i]<='F')) {
        co[i] = (unsigned int) ch[i]-'A'+10;
     } else if ((ch[i]>='0') && (ch[i]<='9')) {
        co[i] = (unsigned int) ch[i]-'0'+0;
  }
} 
```

在这里，我只取了一个 8 个字符的字符串。如果你想要你可以为'a'添加类似的逻辑到'f'来给出它们等效的十六进制值，我没有这样做，因为我不需要它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-05-03T13:41:40.173

我做了一个库来进行十六进制/十进制转换，而不使用`stdio.h`. 使用非常简单：

```
unsigned hexdec (const char *hex, const int s_hex); 
```

在第一次转换之前初始化用于转换的数组：

```
void init_hexdec (); 
```

这里是 github 上的链接：[https ://github.com/kevmuret/libhex/](https://github.com/kevmuret/libhex/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-10T13:38:24.947

这是基于“sairam singh”解决方案的解决方案。如果该答案是一对一的解决方案，则该解决方案将两个 ASCII 半字节组合成一个字节。

```
// Assumes input is null terminated string.
//
//    IN                       OUT
// --------------------   --------------------
//  Offset  Hex  ASCII         Offset Hex
//  0       0x31 1             0      0x13
//  1       0x33 3                    
//  2       0x61 A             1      0xA0
//  3       0x30 0                    
//  4       0x00 NULL          2      NULL

int convert_ascii_hex_to_hex2(char *szBufOut, char *szBufIn) {

    int i = 0;  // input buffer index
    int j = 0;  // output buffer index
    char a_byte;

    // Two hex digits are combined into one byte
    while (0 != szBufIn[i]) {

        // zero result
        szBufOut[j] = 0;

        // First hex digit
        if ((szBufIn[i]>='A') && (szBufIn[i]<='F')) {
            a_byte = (unsigned int) szBufIn[i]-'A'+10;
        } else if ((szBufIn[i]>='a') && (szBufIn[i]<='f')) {
            a_byte  = (unsigned int) szBufIn[i]-'a'+10;
        } else if ((szBufIn[i]>='0') && (szBufIn[i]<='9')) {
            a_byte  = (unsigned int) szBufIn[i]-'0';
        } else {
            return -1;  // error with first digit
        }
        szBufOut[j] = a_byte << 4;

        // second hex digit
        i++;
        if ((szBufIn[i]>='A') && (szBufIn[i]<='F')) {
            a_byte = (unsigned int) szBufIn[i]-'A'+10;
        } else if ((szBufIn[i]>='a') && (szBufIn[i]<='f')) {
            a_byte  = (unsigned int) szBufIn[i]-'a'+10;
        } else if ((szBufIn[i]>='0') && (szBufIn[i]<='9')) {
            a_byte  = (unsigned int) szBufIn[i]-'0';
        } else {
            return -2;  // error with second digit
        }
        szBufOut[j] |= a_byte;

        i++;
        j++;
    }
    szBufOut[j] = 0;
    return 0;  // normal exit
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-08-17T12:52:27.403

我喜欢@radhoo 解决方案，在小型系统上非常有效。可以修改将十六进制转换为 int32_t （因此，有符号值）的解决方案。

```
/**
* hex2int
* take a hex string and convert it to a 32bit number (max 8 hex digits)
*/
int32_t hex2int(char *hex) {
    uint32_t val = *hex > 56 ? 0xFFFFFFFF : 0;
    while (*hex) {
        // get current character then increment
        uint8_t byte = *hex++; 
        // transform hex character to the 4bit equivalent number, using the ascii table indexes
        if (byte >= '0' && byte <= '9') byte = byte - '0';
        else if (byte >= 'a' && byte <='f') byte = byte - 'a' + 10;
        else if (byte >= 'A' && byte <='F') byte = byte - 'A' + 10;    
        // shift 4 to make space for new digit, and add the 4 bits of the new digit 
        val = (val << 4) | (byte & 0xF);
        }
        return val;
    } 
```

注意返回值是 int32_t 而 val 仍然是 uint32_t 不会溢出。

这

```
 uint32_t val = *hex > 56 ? 0xFFFFFFFF : 0; 
```

不受格式错误的字符串的保护。

* * *

## 回答 #14

> 赞同：-7
> 
> 时间：2018-06-21T14:53:19.367

我知道这真的很旧，但我认为解决方案看起来太复杂了。在 VB 中试试这个：

```
Public Function HexToInt(sHEX as String) as long
Dim iLen as Integer
Dim i as Integer 
Dim SumValue as Long 
Dim iVal as long
Dim AscVal as long

    iLen = Len(sHEX)
    For i = 1 to Len(sHEX)
      AscVal = Asc(UCase(Mid$(sHEX, i,  1)))
      If AscVal >= 48 And AscVal  <= 57 Then
        iVal  = AscVal - 48
      ElseIf AscVal >= 65 And AscVal <= 70 Then
        iVal = AscVal - 55
      End If 
      SumValue = SumValue + iVal * 16 ^ (iLen- i)
    Next i 
    HexToInt  = SumValue
End Function 
```

# php - 在 CakePHP 中清除元素缓存

> ID：10156410
> 
> 赞同：0
> 
> 时间：2012-04-14T18:58:20.730
> 
> 标签：php, cakephp, caching, cache-control, cakephp-2.1

我从我的 ctp 文件中回显一个元素，如下所示：

```
 echo $this->element('myelement',
                array( "name" => $name) ,
                array( "cache" => "false")
            ); 
```

元素显示成功。但似乎显示了相同的元素。刷新后不会改变。

我无法清除元素缓存。我试过

*   缓存::clear();
*   清除缓存（）;

但没有用。

我的调试级别是默认的：2

我应该检查任何其他事情吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:28:18.660

[http://book.cakephp.org/2.0/en/views.html#passing-variables-into-an-element](http://book.cakephp.org/2.0/en/views.html#passing-variables-into-an-element)

这可能是因为“false”可以解释为 TRUE - 你需要实际传递一个 false 值：

```
"cache" => false 
```

没有 ”。

# django - 分页前的 DJANGO order_by

> ID：10156412
> 
> 赞同：1
> 
> 时间：2012-04-14T18:58:48.030
> 
> 标签：django, sorting, get, pagination

这是代码列表任务并按三个条件 desc 和 asc 对它们进行排序。
我现在有两个问题，那就是：
1）order_by 只应用于第一页。我希望它运行 order_by，然后对整个有序列表进行分页。
2) 从未显示“_pressed”箭头图像。

请帮忙！谢谢！

视图.PY

```
def task_list(request, **kwargs):
    q = Task.objects.all()
    if 'sort' in request.GET:
        sort_by = request.GET['sort']
    else:
        sort_by = 'latest-desc'

    if sort_by == 'latest-desc':
        q = q.order_by('-pub_date')

    if sort_by == 'latest-asc':
        q = q.order_by('pub_date')

    if sort_by == 'price-desc':
        q = q.order_by('-price')

    if sort_by == 'price-asc':
        q = q.order_by('price')

    if sort_by == 'deadline-desc':
        q = q.order_by('-expiry_date')

    if sort_by == 'deadline-asc':
        q = q.order_by('expiry_date')

    kwargs['queryset'] = q.all()

    return list_detail.object_list(request, **kwargs) 
```

网址.PY

```
urlpatterns = patterns('',
    url(r'^tasks/$', 'tasks.views.task_list', 
         {'template_name':'findtask.html', 'paginate_by':4}, name='tasks'),
) 
```

HTML

```
<div class="sortList">
<ul>
<li class="sort">Sort by latest
<a href="?sort=latest-desc">{% if request.GET.sort == 'latest-desc' %}<img src="/static/img/downarrow_pressed.gif"/>{% endif %}
{% if request.GET.sort != 'latest-desc' %}<img src="/static/img/downarrow.gif"/>{% endif %}</a> 
<a href="?sort=latest-asc">{% if request.GET.sort == 'latest-asc' %}<img src="/static/img/uparrow_pressed.gif"/>{% endif %}
{% if request.GET.sort != 'latest-asc' %}<img src="/static/img/uparrow.gif"/>{% endif %}</a></li>
<li class="sort">Sort by deadline
<a href="?sort=deadline-desc">{% if request.GET.sort == 'deadline-desc' %}<img src="/static/img/downarrow_pressed.gif" />{% endif %}
{% if request.GET.sort != 'deadline-desc' %}<img src="/static/img/downarrow.gif" />{% endif %}</a>
<a href="?sort=deadline-asc">{% if request.GET.sort == 'deadline-asc' %}<img src="/static/img/uparrow_pressed.gif" />{% endif %}
{% if request.GET.sort != 'deadline-asc' %}<img src="/static/img/uparrow.gif" />{% endif %}</a></li>
<li class="sort">Sort by price
<a href="?sort=price-desc">{% if request.GET.sort == 'price-desc' %}<img src="/static/img/downarrow_pressed.gif" />{% endif %}
{% if request.GET.sort != 'price-desc' %}<img src="/static/img/downarrow.gif" />{% endif %}</a>
<a> <a href="?sort=price-asc">{% if request.GET.sort == 'price-asc' %}<img src="/static/img/uparrow_pressed.gif" /> {% endif %}
{% if request.GET.sort != 'price-asc' %}<img src="/static/img/uparrow.gif" />{% endif %}</a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T06:50:24.787

1.  检查您的模板文件`findtask.html`，尤其是为页面生成 URL 链接的部分。我怀疑链接是否错误地缺少`sort`论点。
2.  检查设置文件中的[TEMPLATE_CONTEXT_PROCESSORS ，](https://docs.djangoproject.com/en/1.4/ref/settings/#std%3asetting-TEMPLATE_CONTEXT_PROCESSORS)[请求处理器](https://docs.djangoproject.com/en/1.4/ref/templates/api/#django-core-context-processors-request)在那里吗？现在访问模板中不存在的变量不会在 Django 中引发错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:10:10.613

关于第二个问题。如果TEMPLATE_CONTEXT_PROCESSORS 中的[django.core.context_processors.request ？](https://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-request)

检查 {{request.GET}} 是否返回某些内容。

关于第一。也许这里有问题：

```
kwargs['queryset'] = q.all() 
```

尝试这个：

```
kwargs['queryset'] = q 
```

您需要在视图的开头和结尾跟踪 q 中的内容

# r - R中图中的下标

> ID：10156417
> 
> 赞同：110
> 
> 时间：2012-04-14T18:59:43.033
> 
> 标签：r, plot, subscript

我找不到如何在标题中写下标或在 R 中写下标的方法。如何用 1,2 作为下标写 v 1,2？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-04-14T19:05:44.700

`expression`是你的朋友：

```
plot(1,1, main=expression('title'^2))  #superscript
plot(1,1, main=expression('title'[2])) #subscript 
```

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2014-05-21T09:15:11.280

如果您希望在一个文本中包含多个下标，请使用星号 (*) 分隔各个部分：

```
plot(1:10, xlab=expression('hi'[5]*'there'[6]^8*'you'[2])) 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-04-14T19:07:06.923

见 ? 表达式

```
plot(1:10,main=expression("This is a subscript "[2])) 
```

![在此处输入图像描述](../Images/159250607a6f0686a0f68a5e140e3db9.png)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-04-12T09:12:43.323

下标并引用存储的值...

```
a <- 10
plot(c(0,1), c(0,1), type = 'n', ann = FALSE, xaxt = 'n', yaxt = 'n')
text(0.2, 0.6, cex = 1.5, bquote(paste('S'['f']*' = ', .(a)))) 
```

[![在此处输入图像描述](../Images/e1a4a93d9a836a2eada01d8b530b8bda.png)](https://i.stack.imgur.com/QFjMi.jpg)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-09-21T18:32:22.903

另一个例子，表达式适用于负上标，不需要在负数周围加上引号：

```
title(xlab=expression("Nitrate Loading in kg ha"^-1*"yr"^-1)) 
```

并且您只需要 * 来分隔上面提到的部分（当您编写上标或下标并且需要在之后的表达式中添加更多文本时）。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-11-26T15:32:07.970

正如其他用户所指出的，我们使用`expression()`. 我想回答下标中包含逗号的原始问题：

> *如何用 1,2 作为下标写 v 1,2？*

```
plot(1:10, 11:20 , main=expression(v["1,2"])) 
```

另外，我想为那些希望`expression`在绘图中找到完整语法的人添加参考`R`：有关更多信息，请参阅`?plotmath`帮助页面。运行`demo(plotmath)`将展示许多表达式和相关语法。

请记住用于`*`在表达式中连接不同类型的文本。

以下是来自的一些示例输出`demo(plotmath)`：

[![在此处输入图像描述](../Images/5f6d0ff9c6de64b8ba700c8fea02ac08.png)](https://i.stack.imgur.com/kcx1Y.png)

# c++ - 多重继承 - 虚拟修饰符

> ID：10156418
> 
> 赞同：0
> 
> 时间：2012-04-14T18:59:48.220
> 
> 标签：c++, inheritance, virtual, multiple-inheritance

在常见的钻石场景中：

```
class MBase {
  public:
    MBase(int) {}
    virtual char const* vf() const = 0;
    virtual ~MBase() {}
};

class D1 : public MBase { //NOT VIRTUAL!!!
  public:
    D1() : MBase(1) {}
    char const* vf() const { return "D1"; }
};

class D2 : virtual public MBase {
  public:
    D2() : MBase(2) {}
    char const* vf() const { return "D2"; }
};

class Bottom : public D1, public D2 {
  public:
    char const* vf() const { return "Bottom"; }
} 
```

如果我将 Bottom 的继承修饰符修改为对 D1 和 D2 都是虚拟的，会发生什么变化？我的意思是，这会产生什么影响：

```
class Bottom : public virtual D1, public virtual D2 {
  public:
    char const* vf() const { return "Bottom"; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T20:14:42.197

不，它没有。每个类选择它的哪些直接基类可以与其他类共享。由于`Bottom`是您的实现中的一个叶子，并且在这两种情况下都只有一个 and 的实例`D1`，`D2`因此在这两种情况下它都将只有一个这些类型的嵌套对象。由于`D1`拒绝共享`MBase`,`Bottom`也会有两个`MBase`对象嵌套在其中。

但是，由于它是模棱两可的，因此`MBase`不能从两个版本中*直接访问。*`Bottom`您必须显式转换为`D1`or`D2`才能`MBase`通过`Bottom`对象进行访问（正是因为有两个`MBase`s）。

* * *

不同之处在于，如果您有一个`D1`实际上继承自`MBase`而另一个没有继承。

# php - 使用 MVC 方法将 dataTables 与 cakePhp 集成的最佳方法是什么

> ID：10156419
> 
> 赞同：1
> 
> 时间：2012-04-14T18:59:53.010
> 
> 标签：php, cakephp, datatables

我已经完成了一些代码，尝试将数据表 (http://datatables.net/) 与 cakePHP 集成。

它在我自己的应用程序中启动并运行，但我想让它更通用，因此任何人都可以在任何 cakePhp 应用程序中使用它，最重要的是我希望它符合 cakePHP 约定。

所以目前这就是我所拥有的......

一个名为 的 cakePHP 助手`dataTables`，它接受以下参数：`$modelName`, `$fields`, `$headers`.

*   `$modelName`是将其数据填充到表中的模型的名称。
*   `$fields`是我们要在表中显示的字段数组（所有字段必须以“ModelName”开头。这意味着我们可以在表中显示关联的模型值）
*   `$headers`是我们希望在表格顶部显示的标题列表。

助手生成一个空的 html 表（带有`$headers`as 标题）。然后由 datatables 的 javascript 填充该表（如果您不熟悉 dataTables 服务器端处理，则可能需要阅读[此内容）。](http://datatables.net/release-datatables/examples/server_side/server_side.html)

`dataTable()`Javascript 从我们想要获取其模型的控制器的操作中检索表数据。javascript 还将发送模型名称（我们发送给助手）和字段。然后控制器打印出 JSON 数据（通过空白视图）

我的两个主要问题是：

1.  将 dataTable 操作放在控制器中似乎不正确。A）因为它实际上并不需要控制器，因为它知道需要加载哪些模型和字段；B）因为它不是真正的**用户**操作，它实际上只是一个 JSON 响应。那么应该放在哪里呢？

2.  要为我的操作打印 JSON 响应`dataTable()`，我使用 " `blank.ctp`" 视图和使用`echo jsonencode($output)`. 使用视图输出 JSON 数据似乎不太合适。通常视图仅适用于用户，对吗？

回答这两个问题的一种方法是拥有一个独立`dataTable.php`文件，该文件将根据模型名称和它接收的字段打印相关的 JSON 数据。但是考虑到 MVC 模式，这 ^^ 似乎不合逻辑。

目前代码有点乱（上面的答案应该可以帮助我整理它！）但如果需要请告诉我。

希望这对我自己以外的其他人有意义..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:19:36.240

我写了一个处理这个[https://github.com/cnizzdotcom/cakephp-datatable的 CakePHP 组件](https://github.com/cnizzdotcom/cakephp-datatable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T04:32:31.140

我想了一会儿，插件似乎是最好的主意。您可以使用组件自动加载帮助程序，并为您提供一个控制器可见挂钩来设置提供输出的帮助程序/元素的数据。

使用行为为您的 json 公开模型函数，然后使用组件设置数据。

至于您是否应该使用视图 - 这是书中关于 json 视图的部分。

> _serialize 键是一个特殊的视图变量，它指示在使用数据视图时应该序列化哪些其他视图变量。如果在将数据转换为 json/xml 之前不需要进行任何自定义格式化，这可以让您跳过为控制器操作定义视图文件。
> 
> 如果您需要在生成响应之前对视图变量进行任何格式化或操作，您应该使用视图文件。_serialize 的值可以是要序列化的字符串或视图变量数组：

[http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-data-views-with-the-serialize-key](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-data-views-with-the-serialize-key)

# java - 隐藏一个类对其他类的可见性

> ID：10156420
> 
> 赞同：1
> 
> 时间：2012-04-14T19:00:03.447
> 
> 标签：java, oop, class, singleton

基本上我有一个类，它的实例是通过 Singleton 类创建的。该类不应该通过单例类以外的任何其他方式实例化。我的问题是，除了 Singleton 之外，其他班级能否有效地“看不到”该班级。

我知道内部课程和不同的包装等会有所帮助，但我很想知道是否有人对此有很好的解决方案。

感谢您的回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:05:55.730

只需将类本身重构为单例即可。私有构造函数等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:07:54.590

Java 没有像 C++ 那样的“朋友”概念

您提到了嵌套类（真正的内部类不起作用，因为它们需要外部）和包。

我不知道保护其他类的其他方法，但一种是创建实例。

但总的来说，没有理由通过辅助类构建单例。

**您可以使用枚举**或**静态最终变量**构建单例

 **[在 Java 中使用枚举作为单例的最佳方法是什么？](https://stackoverflow.com/questions/427902/what-is-the-best-approach-for-using-an-enum-as-a-singleton-in-java)

```
public enum Elvis implements HasAge {
    INSTANCE;
    private int age;

    @Override
    public int getAge() {
        return age;
    }
} 
```

* * *

```
class X {
     public static final X instance = new X ();

     private X () {
     }
     ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T19:09:11.497

在示例场景中，使用您的 API，**我需要声明**吗？：

```
ToBeInvisibleClass instance = TheSingleton.getThatInvisibleInstnace(); 
```

如果答案是*Yes*，那么您的问题的答案是*No*因为我需要声明一个变量并且为此我需要类型可见。如果答案是*No*，那么使用内部/嵌套类似乎是一种正确的方法，或者使类本身成为单例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T19:09:23.490

使用枚举执行单例的一种简单有效的方法：

```
public enum Singleton {
        INSTANCE;
        public void execute (String arg) {
            //... perform operation here ...
        }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T19:20:04.333

为确保仅通过您的类方法进行实例化，您可以执行以下操作：

*   将默认构造函数设为私有
*   将您的单例实例保存在私有方法中
*   使用公共静态方法将实例提供给客户端：

[在这个网站上](http://java.sun.com/developer/technicalArticles/Programming/singletons/)有一个很好的例子：

```
public class MySingleton { 
    private static MySingleton _instance = new MySingleton(); 

     private MySingleton() { 
        // construct object . . . 
    } 

    public static MySingleton getInstance() { 
        return _instance; 
    } 
```**

# html - 前一个神秘人物 在我的网站上，我有一个<我想删除的标志，它显示在桌子之前和 YouTube 视频之后。 问题是，该字符没有出现在index.html文件中。为了确定，我已经在三个编辑器中检查过它。我不知道它是从哪里来的。 如果您在 Firefox 中删除该表，它会消失 问问题 问问题 2012-04-14T19:00:12.703 83 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 在我的网站上，我有一个<我想删除的标志，它显示在桌子之前和 YouTube 视频之后。 问题是，该字符没有出现在index.html文件中。为了确定，我已经在三个编辑器中检查过它。我不知道它是从哪里来的。 如果您在 Firefox 中删除该表，它会消失，但如果您删除 YouTube 视频，它不会。所以它必须以某种方式链接到表格。 当我在 Firefox 中将其作为查看源选择查找时，<表格代码的左侧会显示一个小符号。但是如果你查看index.html文件，那里什么都没有。 我是一个准智能的人，可以编写一个这么好的网站，但我不能因为喜欢电子壁球这个错误。帮助将不胜感激，它知道修复它很愚蠢。它一定要是。我只是不知道此时我缺少什么。 在第 250 行，您有： <[![](images/sample.jpg)](http://#) 一开始就去掉多余<的。 顺便说一句，这是“专辑 2”的一部分。s中正确标记之外的任何内容往往会被撞到前面。 htmlhtml-table 4 2 回答 2 This answer is useful 3 在第 250 行，您有： < 一开始就去掉多余<的。 顺便说一句，这是“专辑 2”的一部分。s中正确标记之外的任何内容

| [![](images/sample.jpg)](http://#) |

往往会被撞到前面。 于 2012-04-14T19:03:10.907 回答 This answer is useful 1 它在桌子里面，在这里： < 但是，由于它实际上不在td(or th) 标记内，因此浏览器无法正常呈现它。不同的浏览器可能会做不同的事情，但至少 Firefox 似乎实际上将其“推”出桌面并放在前面。 顺便说一句，您可能希望通过HTML 验证器运行您的页面：它还有许多其他错误，包括部分div内部的错误head、重复的结束标记和 URL 中的一些未转义的 & 符号。 于 2012-04-14T19:07:07.047 回答 Related 2 c# - 如何在 Arrays c# 中应用布尔运算符？ 2 r - 并非所有省份都显示在 gvisGeoChart 中 5 php - 如何使用 Laravel 允许 WYSIWYG 编辑器并禁用 XSS 攻击？ 1 c - 为什么在 glibc libc-lock.h 中使用三个 *？ 2 arrays - Z3 - 形式化数组模式匹配 1 windows-phone-7 - 如何从 mediaElement 中抓取或抓取照片 2 r - 将循环应用于 R 中的函数 0 c++ - QXmppClient 类 c'tor 崩溃 1 java - 什么是春季批次？ 1 standards - 如何正确构建java项目 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10156424
> 
> 赞同：1
> 
> 时间：
> 
> 标签：html, html-table

在[我的网站上](http://www.nicholaslawson.com)，我有一个`<`我想删除的标志，它显示在桌子之前和 YouTube 视频之后。

问题是，该字符没有出现在`index.html`文件中。为了确定，我已经在三个编辑器中检查过它。我不知道它是从哪里来的。

如果您在 Firefox 中删除该表，它会消失，但如果您删除 YouTube 视频，它不会。所以它必须以某种方式链接到表格。

当我在 Firefox 中将其作为查看源选择查找时，`&lt;`表格代码的左侧会显示一个小符号。但是如果你查看`index.html`文件，那里什么都没有。

我是一个准智能的人，可以编写一个这么好的网站，但我不能因为喜欢电子壁球这个错误。帮助将不胜感激，它知道修复它很愚蠢。它一定要是。我只是不知道此时我缺少什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:03:10.907

在第 250 行，您有：

```
<<td><a href="http://#"><img src="images/sample.jpg"></a></td> 
```

一开始就去掉多余`<`的。

顺便说一句，这是“专辑 2”的一部分。s中正确标记之外的任何内容`<table>`往往会被撞到前面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:07:07.047

它在桌子里面，在这里：

```
<tr>
    <td>Album Two</td>
    <td>Inter5tellar</td>
    <td>A digital song produced in fruity loops for your listening pleasure.</td>
    <<td><a href="http://#"><img src="images/sample.jpg"></a></td>
    <td><a href="http://www.oronjo.com/live/next/?fi=80542"><img src = "images/button.jpg"></a></a></td>
    <td>$0.99</td>
</tr> 
```

但是，由于它实际上不在`td`(or `th`) 标记内，因此浏览器无法正常呈现它。不同的浏览器可能会做不同的事情，但至少 Firefox 似乎实际上将其“推”出桌面并放在前面。

顺便说一句，您可能希望通过[HTML 验证器](http://validator.w3.org/)运行您的页面：它还有许多其他错误，包括部分`div`内部的错误`head`、重复的结束标记和 URL 中的一些未转义的 & 符号。

| Album Two | Inter5tellar | A digital song produced in fruity loops for your listening pleasure. | [![](images/sample.jpg)](http://#) | [![](images/button.jpg)](http://www.oronjo.com/live/next/?fi=80542) | $0.99 |

# delphi - 如何修补 delphi 类的私有方法？

> ID：10156430
> 
> 赞同：15
> 
> 时间：2012-04-14T19:00:45.833
> 
> 标签：delphi, delphi-xe2

我已阅读这些问题和答案

[如何更改外部声明函数的实现（绕道）](https://stackoverflow.com/questions/6905287/how-to-change-the-implementation-detour-of-anexternally-declared-function)

[delphi中的补丁例程调用](https://stackoverflow.com/questions/8978177/patch-routine-call-in-delphi)

但我无法弄清楚如何修补位于另一个单元中的类的**私有方法。**

检查此示例我要修补`Bar`程序。

```
Unit ThidParty;
Interface
   Type
      TFoo =Class
        private
           procedure Bar;
       end; 
```

我认为哪个关键是找到获取私有方法地址的方法。

那么，如何修补 delphi 类的私有方法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-14T19:31:33.003

下面概述的解决方案适用于 Delphi Seattle 及之前的版本。您可以使用[类助手](http://docwiki.embarcadero.com/RADStudio/en/Class_and_Record_Helpers)来破解类：

**单元1**

```
type
  TTest = class
  private
    procedure Foo;
  end; 
```

**单元2**

```
type
  TMyTestHelper = class helper for TTest
    function GetFooAddress: Pointer;
  end;

function TMyTestHelper.GetFooAddress: Pointer;
var
  MethodPtr: procedure of object;
begin
  MethodPtr := Self.Foo;
  Result := TMethod(MethodPtr).Code;
end;

function FooAddress: Pointer;
begin
  Result := TTest(nil).GetFooAddress;//don't need to instantiate an object
end; 
```

将返回值传递`FooAddress`给您的修补函数之一，您就很成功了。

但是，从 Delphi 10.1 Berlin 开始，这不再有效！类助手不能再访问严格保护、严格私有或私有成员。这个“功能”实际上是 Embarcadero 现在在柏林修复的编译器错误。你运气不好。

# php - PHP PDO 异常 - 仅当从终端运行时

> ID：10156439
> 
> 赞同：0
> 
> 时间：2012-04-14T19:01:48.300
> 
> 标签：php, pdo

我正在开发 PHP 并有一个简单的文件来测试各种功能。为了方便起见，我想从命令行运行这个文件。这导致了一个问题，我不确定它是什么。

该代码使用 PDO。我有一个数据库类，它充当 PDO 包装器并强制执行单例设计模式。课程非常简单。以下是一些相关代码：

```
// instance of PDO
private static $db = null;

//connection related fields
const dsn = "mysql:dbname=mydb;host=localhost";
const user = "myuser";
const password = "mypass";

//get access to the PDO instance
public static function get_instance()
{
    if(!self::$db)
    {
        self::$db = new PDO(self::dsn,self::user,self::password);
        self::$db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
        self::$db->exec("set names utf8");
    }

    return self::$db;

} 
```

现在，当我使用以下内容创建测试文件时：

```
$db = Database::get_instance(); 
```

并像这样从命令行运行它：

```
php5 ./testing.php 
```

我得到一个异常：带有消息“找不到驱动程序”的 PDOException' 这是由上面实例化新 PDO 对象的行引起的。

但是，如果我通过浏览器导航到该文件并且它由我的 Web 服务器提供服务，它运行良好，则该对象按预期工作。

This appears to be an issue with running a PHP file from the terminal. I don't think this is an issue in code. Could anyone suggest what could be causing this? Any advice or help would really be appreciated. Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:04:08.220

The commandline version of PHP can have a different configuration than the web-version. Locate the proper PHP configuration file, setup the database drivers and you should be fine.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T08:26:32.040

```
/usr/local/php/bin/php -> /usr/bin/php 
```

`/usr/bin/php` is commandline version of PHP, `/usr/local/php/bin/php` is web version

try `ln` command

# database-design - 电子商务数据库设计？

> ID：10156441
> 
> 赞同：0
> 
> 时间：2012-04-14T19:01:57.710
> 
> 标签：database-design, e-commerce

我想做一个电子商务应用程序。我想将属性添加到类别并在属性中动态搜索它们。

我是说：

```
 CATEGORIES             PROPERTIES
| Computer properties  | MotherBoard, GraphicCart etc.
| Phone properties     | Cam, Connecting properties, bluetoot etc.
| Digital Camera       | Zoom option , Lcd, Battery etc. 
```

我已经用关系表完成了这项工作。这是我的想法：

![在此处输入图像描述](../Images/3382aa7f8d685db43ae96252a4266d76.png)

那么，我的问题是这样的吗？还是我们有其他办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T22:04:40.117

您提出了一个无法通过关于 SO 的简单小帖子回答的问题。有一些基本的设计概念是良好数据库设计的基础。这种类型的活动有很多想法。

我建议您阅读Michael Hernandez所著的《***为凡人设计数据库》一书 ISBN：0-201-69471-9。***[亚马逊清单](http://www.amazon.com/gp/search/ref=nb_sb_noss?url=search-alias%3Dstripbooks&field-keywords=0-201-69471-9&rh=n%3A283155%2Ck%3A0-201-69471-9&enc=1&ajr=4)我注意到他有第二版。

[链接到第二版](https://rads.stackoverflow.com/amzn/click/com/0201752840)

他将引导您完成设计数据库的整个过程（从开始到结束）。我建议你从这本书开始。

你必须学会​​以组或块的形式看待事物。就像编程一样，数据库设计具有简单的构建块。如果您对这些简单的构建块有透彻的了解，您就可以应对任何数据库设计。

你让事情变得越简单越好。数据库只不过是将数据放入小房间的地方。首先确定这些小房间的洞是什么，以及你想要什么样的东西。

第一次尝试时，您永远不会创建完美的数据库设计。这是事实。在此过程中，您的设计将经历多次改进。有时，在您开始输入数据之前，事情似乎并不明显，然后您就有了一个**哈哈大笑**的时刻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T21:34:17.713

[普林斯顿大学 Rick Curtis 提出的电子商务数据库设计](https://www.princeton.edu/~rcurtis/ultradev/ecommdatabase.html)

此链接可能会帮助您以及任何初学者构建有效且简单的电子商务数据库设计。

# python - 在 Python 中将单词解析为（前缀、根、后缀）

> ID：10156448
> 
> 赞同：7
> 
> 时间：2012-04-14T19:03:14.183
> 
> 标签：python, parsing, nlp

我正在尝试为一些文本数据创建一个简单的解析器。（文本使用的是 NLTK 没有任何解析器的语言。）

基本上，我的前缀数量有限，可以是一个或两个字母；一个词可以有多个前缀。我也有一个或两个字母的后缀数量有限。它们之间的任何东西都应该是这个词的“根”。许多单词会有更多可能的解析，所以我想输入一个单词并以元组（前缀、根、后缀）的形式返回可能的解析列表。

我不知道如何构造代码。我粘贴了我尝试过的一种方法的示例（使用一些虚拟的英语数据使其更易于理解），但这显然不正确。一方面，它真的很丑陋和多余，所以我确信有更好的方法来做到这一点。另一方面，它不适用于具有多个前缀或后缀，或同时具有前缀和后缀的单词。

有什么想法吗？

```
prefixes = ['de','con']
suffixes = ['er','s']

def parser(word):
    poss_parses = []
    if word[0:2] in prefixes:
        poss_parses.append((word[0:2],word[2:],''))
    if word[0:3] in prefixes:
        poss_parses.append((word[0:3],word[3:],''))
    if word[-2:-1] in prefixes:
        poss_parses.append(('',word[:-2],word[-2:-1]))
    if word[-3:-1] in prefixes:
        poss_parses.append(('',word[:-3],word[-3:-1]))
    if word[0:2] in prefixes and word[-2:-1] in suffixes and len(word[2:-2])>2:
        poss_parses.append((word[0:2],word[2:-2],word[-2:-1]))
    if word[0:2] in prefixes and word[-3:-1] in suffixes and len(word[2:-3])>2:
        poss_parses.append((word[0:2],word[2:-2],word[-3:-1]))
    if word[0:3] in prefixes and word[-2:-1] in suffixes and len(word[3:-2])>2:
        poss_parses.append((word[0:2],word[2:-2],word[-2:-1]))
    if word[0:3] in prefixes and word[-3:-1] in suffixes and len(word[3:-3])>2:
        poss_parses.append((word[0:3],word[3:-2],word[-3:-1]))
    return poss_parses

>>> wordlist = ['construct','destructer','constructs','deconstructs']
>>> for w in wordlist:
...   parses = parser(w)
...   print w
...   for p in parses:
...     print p
... 
construct
('con', 'struct', '')
destructer
('de', 'structer', '')
constructs
('con', 'structs', '')
deconstructs
('de', 'constructs', '') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:25:35.763

这是我的解决方案：

```
prefixes = ['de','con']
suffixes = ['er','s']

def parse(word):
    prefix = ''
    suffix = ''

    # find all prefixes
    found = True
    while found:
        found = False
        for p in prefixes:
            if word.startswith(p):
                prefix += p
                word = word[len(p):] # remove prefix from word
                found = True

    # find all suffixes
    found = True
    while found:
        found = False
        for s in suffixes:
            if word.endswith(s):
                suffix = s + suffix
                word = word[:-len(s)] # remove suffix from word
                found = True

    return (prefix, word, suffix)

print parse('construct')
print parse ('destructer')
print parse('deconstructs')
print parse('deconstructers')
print parse('deconstructser')
print parse('condestructser') 
```

**结果：**

```
>>> 
('con', 'struct', '')
('de', 'struct', 'er')
('decon', 'struct', 's')
('decon', 'struct', 'ers')
('decon', 'struct', 'ser')
('conde', 'struct', 'ser') 
```

这个想法是遍历所有前缀并聚合它们，同时将它们从单词中删除。棘手的部分是定义前缀的顺序可能会隐藏前缀，因此必须重新调用迭代，直到找到所有前缀。

后缀也是如此，除了我们以相反的顺序构建后缀词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T19:42:11.157

CodeChords man 打败了我，但我的将前缀和后缀作为元组（考虑到上下文可能或多或少有用），并使用递归，我想我还是会发布它。

```
class Parser():
    PREFIXES = ['de', 'con']
    SUFFIXES = ['er', 's']
    MINUMUM_STEM_LENGTH = 3

    @classmethod
    def prefixes(cls, word, internal=False):
        stem = word
        prefix = None
        for potential_prefix in cls.PREFIXES:
            if word.startswith(potential_prefix):
                prefix = potential_prefix
                stem = word[len(prefix):]
                if len(stem) >= cls.MINUMUM_STEM_LENGTH:
                    break
                else:
                    prefix = None
                    stem = word
        if prefix:
            others, stem = cls.prefixes(stem, True)
            others.append(prefix)
            return (others, stem) if internal else (reversed(others), stem)
        else:
            return [], stem

    @classmethod
    def suffixes(cls, word):
        suffix = None
        stem = word
        for potential_suffix in cls.SUFFIXES:
            if word.endswith(potential_suffix):
                suffix = potential_suffix
                stem = word[:-len(suffix)]
                if len(stem) >= cls.MINUMUM_STEM_LENGTH:
                    break
                else:
                    suffix = None
                    stem = word
        if suffix:
            others, stem = cls.suffixes(stem)
            others.append(suffix)
            return others, stem
        else:
            return [], stem

    @classmethod
    def parse(cls, word):
        prefixes, word = cls.prefixes(word)
        suffixes, word = cls.suffixes(word)
        return(tuple(prefixes), word, tuple(suffixes))

words = ['con', 'deAAers', 'deAAAers', 'construct', 'destructer', 'constructs', 'deconstructs', 'deconstructers']

parser = Parser()
for word in words:
    print(parser.parse(word)) 
```

这给了我们：

```
((), 'con', ())
(('de',), 'AAer', ('s',))
(('de',), 'AAA', ('er', 's'))
(('con',), 'struct', ())
(('de',), 'struct', ('er',))
(('con',), 'struct', ('s',))
(('de', 'con'), 'struct', ('s',))
(('de', 'con'), 'struct', ('er', 's')) 
```

这通过获取单词并使用该[`str.startswith()`](http://docs.python.org/library/stdtypes.html#str.startswith)函数查找前缀来工作。它递归地执行此操作，直到它被简化为没有前缀的单词，然后传回前缀列表。

然后它对后缀做了类似的事情，除了[`str.endswith()`](http://docs.python.org/library/stdtypes.html#str.endswith)出于明显的原因使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T22:28:52.003

Pyparsing 将字符串索引和标记提取包装到它自己的解析框架中，并允许您使用简单的算术语法来构建您的解析定义：

```
wordlist = ['construct','destructer','constructs','deconstructs']

from pyparsing import StringEnd, oneOf, FollowedBy, Optional, ZeroOrMore, SkipTo

endOfString = StringEnd()
prefix = oneOf("de con")
suffix = oneOf("er s") + FollowedBy(endOfString)

word = (ZeroOrMore(prefix)("prefixes") + 
        SkipTo(suffix | endOfString)("root") + 
        Optional(suffix)("suffix"))

for wd in wordlist:
    print wd
    res = word.parseString(wd)
    print res.dump()
    print res.prefixes
    print res.root
    print res.suffix
    print 
```

结果在名为 ParseResults 的丰富对象中返回，该对象可以作为简单列表、具有命名属性的对象或 dict 访问。该程序的输出是：

```
construct
['con', 'struct']
- prefixes: ['con']
- root: struct
['con']
struct

destructer
['de', 'struct', 'er']
- prefixes: ['de']
- root: struct
- suffix: ['er']
['de']
struct
['er']

constructs
['con', 'struct', 's']
- prefixes: ['con']
- root: struct
- suffix: ['s']
['con']
struct
['s']

deconstructs
['de', 'con', 'struct', 's']
- prefixes: ['de', 'con']
- root: struct
- suffix: ['s']
['de', 'con']
struct
['s'] 
```

# css - Bootstrap 中的行类有什么用？

> ID：10156449
> 
> 赞同：10
> 
> 时间：2012-04-14T19:03:20.400
> 
> 标签：css, twitter-bootstrap

我认为这可能是一个愚蠢的问题，但我不明白`.row`Twitter Bootstrap 类的用法。那么，它是用来做什么的呢？

我试图在这个结构中做这样的事情：

```
LOGO
SUB-MESSAGE
MENU 1  | MENU 2  | MENU 3  | MENU ...
CONTENT                                            | ADS
CONTENT                                            | ADS
CONTENT                                            | ADS
CONTENT                                            | ADS
...                                                | ... 
```

这应该是什么基本结构以及需要行的位置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T19:21:37.120

引导程序将普通表行的使用`<tr>`, 转换为可用于布局设计的更语义化的构建块，并且他们还将表数据块 ,`<td>`转换为`.span*`用于分隔内容的类，即称为网格。基本上，您可以将一行视为一个水平容器，您可以用构建块、`span`标签填充它，以后您可以将其堆叠在其他行的上方或下方以创建布局。

因此，为了说明您的布局，您可以使用这样的一堆行：

```
<row>
    <span>LOGO</span>
    SUB-MESSAGE
</row>

<row>
    <span>MENU 1  | MENU 2  | MENU 3  | MENU ...</span>
</row>

<row>
    <span>CONTENT</span>                               | <span>ADS</span>
    <span>CONTENT</span>                               | <span>ADS</span>
    <span>CONTENT</span>                               | <span>ADS</span>
    <span>CONTENT</span>                               | <span>ADS</span>
</row> 
```

请注意行如何分隔您希望分隔的不同级别的内容。您可以在 bootstrap 脚手架[文档](http://twitter.github.com/bootstrap/scaffolding.html)中找到有关网格系统使用的更多信息，它们还有一个堆叠网格，您可以查看源代码以了解行是如何堆叠的以及其中的内容是如何放置的一起。

# android - 保存 WebView 的状态并在 ANDROID 中恢复

> ID：10156450
> 
> 赞同：7
> 
> 时间：2012-04-14T19:03:26.837
> 
> 标签：android, webview, android-viewpager

我有一个 Android 应用程序，它在每个页面中构建`ViewPager`并分离了 WebView。每个`WebView`指向不同的网站。例如，第 1 页：facebook，第 2 页：Twitter，第 3 页：Google+。用户可以添加/删除页面。

我的`mPager.setOffscreenPageLimit(1)`（哪里`mPager`是 的实例`ViewPager`）。这意味着，当用户查看 3\. 页面时，第一个片段正在被释放（并在用户再次查看 2\. 页面时重新创建）。

我想要的是在销毁之前先保存 WebView 的状态并将其状态保存在某处，然后在用户看到它时恢复它。因为它会重新加载页面，显然它很烦人。而且我不希望用户在每次滑动时都重新加载网页。我试过了

```
mWebView.saveState(outState);
mWebView.restoreState(savedInstanceState); 
```

但这似乎不起作用。保存和恢复 webviews 状态的任何想法？

我尝试将 WebView 本身保存在某个类中，保存状态等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T02:06:34.643

实际上，`setOffscreenPageLimit()`设置要保留在当前页面左侧或右侧的页数。

来自`FragmentPagerAdapter` [文档](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)：

> 用户访问的每个页面的片段都将保存在内存中，尽管它的视图层次结构在不可见时可能会被破坏。这可能会导致使用大量内存，因为片段实例可以保持任意数量的状态。

我认为在您的情况下，由于 WebViews 在内存中可能非常大，Android 会处理它，直到再次需要它为止。

# c - 音频插孔服务器：无法获得缓冲区

> ID：10156454
> 
> 赞同：1
> 
> 时间：2012-04-14T19:04:07.313
> 
> 标签：c, audio, compiler-errors, jack

专家...

我有一个小问题。我想为 Jack 音频服务器创建一个客户端，当我想获得一个缓冲区来写入它时，如下所示：

`sample_t *out = (sample_t *) jack_port_get_buffer(output_port, nframes);`

我明白了：

> 错误：“sample_t”未在此范围内声明

我不知道该怎么做，因为我正确地包含了标头（jack/jack.h），我可以创建一个客户端，我可以打开端口。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:12:09.203

你输入了jack的原始变量名吗？

```
typedef jack_default_audio_sample_t sample_t; 
```

大多数时候，`sample_t`对于库中的变量名来说太通用了，这就是他们将其“重命名”为 sample_t 的原因。

# javascript - 在 NicEditor 上需要解决方案 - 如何添加自定义选择选项？

> ID：10156456
> 
> 赞同：0
> 
> 时间：2012-04-14T19:04:12.280
> 
> 标签：javascript, html, ajax, wysiwyg

我正在使用 NICInline 编辑器，示例在这里 - [http://nicedit.com/demos.php?demo=4](http://nicedit.com/demos.php?demo=4)

如何将我的自定义选项添加到此编辑器？这样当我选择一个选项时，它的值就会准确地插入到编辑器实例的光标点。

问题：我需要将这些自定义选项添加到编辑器中吗？

```
<select name="fruit" id="fruit">
    <option value="mango">mango</option>
    <option value="apple">apple</option>
</select> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:56:56.780

我认为像许多编辑器一样，您需要为其创建一个插件，他们的网站上有文档，此页面似乎包含您入门所需的信息：[http ://wiki.nicedit.com/w/page/516/创建%20a%20插件](http://wiki.nicedit.com/w/page/516/Creating%20a%20Plugin)

# php - 在两个网站之间共享会话

> ID：10156457
> 
> 赞同：0
> 
> 时间：2012-04-14T19:04:14.083
> 
> 标签：php, session, openid

我们正在向网站所有者提供 SaaS，我们将为用户提供有趣的优惠并跟踪他们的购物。它是一个返利模型服务。

我们将把这项服务作为 IFrame 提供，网站所有者将把它放在他们的网站上。但是，我希望网站的原始用户在他们进来时登录到我们的 iframe 中？

现在，我知道 IFrame 将是一个单独的网站，因此不会共享会话，但是您将如何共享用户？

我真的很想避免双重登录。

1.  OpenID 是个好主意吗？我们的问题是否在这个领域？
2.  Facebook 连接怎么样（同样是 OpenID）。

谢谢

**编辑** 假设网站已经有用户登录。我们可以继续他们用户以前的登录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:09:01.630

除了 OpenID，您还可以创建自己的单点登录服务

# javascript - 用链接替换列表中每个单词的第一次出现

> ID：10156458
> 
> 赞同：-2
> 
> 时间：2012-04-14T19:04:23.180
> 
> 标签：javascript, regex, dom

我在 SO 上找到了一个非常好的小脚本，几乎可以满足我的要求。它将单词列表的每次出现都替换为维基百科的链接。问题是我只想链接第一次出现。

这是脚本（来自[this answer](https://stackoverflow.com/a/1444893/1045235)）：

```
function replaceInElement(element, find, replace) {
    // iterate over child nodes in reverse, as replacement may increase
    // length of child node list.
    for (var i= element.childNodes.length; i-->0;) {
        var child= element.childNodes[i];
        if (child.nodeType==1) { // ELEMENT_NODE
            var tag= child.nodeName.toLowerCase();
            if (tag!='style' && tag!='script') // special case, don't touch CDATA elements
                replaceInElement(child, find, replace);
        } else if (child.nodeType==3) { // TEXT_NODE
            replaceInText(child, find, replace);
        }
    }
}
function replaceInText(text, find, replace) {
    var match;
    var matches= [];
    while (match= find.exec(text.data))
        matches.push(match);
    for (var i= matches.length; i-->0;) {
        match= matches[i];
        text.splitText(match.index);
        text.nextSibling.splitText(match[0].length);
        text.parentNode.replaceChild(replace(match), text.nextSibling);
    }
}

// keywords to match. This *must* be a 'g'lobal regexp or it'll fail bad
var find= /\b(keyword|whatever)\b/gi;

// replace matched strings with wiki links
replaceInElement(document.body, find, function(match) {
    var link= document.createElement('a');
    link.href= 'http://en.wikipedia.org/wiki/'+match[0];
    link.appendChild(document.createTextNode(match[0]));
    return link;
}); 
```

我一直在尝试修改它（没有成功）以使用正则表达式的 indexOf insted（来自[这个答案](https://stackoverflow.com/a/10144027/1045235)），我认为这会比正则表达式更快：

```
var words = ["keyword","whatever"];
var text = "Whatever, keywords are like so, whatever... Unrelated, I now know " +
           "what it's like to be a tweenage girl. Go Edward.";
var matches = []; // An empty array to store results in.

//Text converted to lower case to allow case insensitive searchable.
var lowerCaseText = text.toLowerCase();
for (var i=0;i<words.length;i++) { //Loop through the `words` array
    //indexOf returns -1 if no match is found
    if (lowerCaseText.indexOf(words[i]) != -1) 
        matches.push(words[i]);    //Add to the `matches` array
} 
```

所以我的问题是如何在不使用库的情况下将这两者结合起来以获得最有效/最快的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:48:45.613

这是您修改的代码以执行您想要的操作[http://jsfiddle.net/bW7LW/2/](http://jsfiddle.net/bW7LW/2/)

```
function replaceInit(element, find, replace) {

    var found = {},
        replaceInElement = function(element, find, replace, init) {

            var child, tag, 
                len = element.childNodes.length, 
                i = 0,
                replaceInText = function(text, find, replace) {

                    var len = find.length,
                        index, i = 0;

                    for (; i < len; i++) {

                        index = text.data.indexOf(find[i]);

                        if (index !== -1 && found && !found[find[i]]) {

                            found[find[i]] = true;
                            text.splitText(index);
                            text.nextSibling.splitText(find[i]);
                            text.parentNode.replaceChild(replace(find[i]), text.nextSibling);
                            return;
                        };
                    };
                };

            // iterate over child nodes in reverse, as replacement may increase length of child node list.
            for (; i < len; i++) {

                child = element.childNodes[i];

                if (child.nodeType == 1) { // ELEMENT_NODE
                    tag = child.nodeName.toLowerCase();

                    if (tag != 'style' && tag != 'script') {
                        replaceInElement(child, find, replace);
                    }

                } else if (child.nodeType == 3) { // TEXT_NODE
                    replaceInText(child, find, replace);
                }
            }
        };
    replaceInElement(element, find, replace);
};

// keywords to match. This *must* be a 'g'lobal regexp or it'll fail bad
var find = 'Lorem Ipsum bla'.split(' ');

$(function() {

    // replace matched strings with wiki links
    replaceInit(document.body, find, function(str) {
        var link = document.createElement('a');
        link.href = 'http://en.wikipedia.org/wiki/' + str;
        link.appendChild(document.createTextNode(str));
        return link;
    });
});​ 
```

# app-store-connect - iTunes 连接 - 添加新应用程序陷入无限状态

> ID：10156461
> 
> 赞同：3
> 
> 时间：2012-04-14T19:05:02.060
> 
> 标签：app-store-connect

我正在尝试在我的 iTunes Connect 站点中“添加新应用程序”。这让我想到了协议更新（提到“iAd 网络的收入份额现在是开发者的 70%。”）无论如何，我们不希望在我们的应用中出现广告，所以我点击继续。然后进入管理应用页面。我单击“添加新应用程序”，然后循环继续。

我想我快疯了。其他任何人都可以确认是这种情况并且连接站点上存在错误，或者这里有什么明显的东西我没有得到？Apple 是否会在某个地方发布他们正在解决 iTunes Connect 的错误？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:09:38.637

我不能说它现在正在工作，但我昨晚实际上添加了一个新应用程序，它有点错误/缓慢......但是，我一直在尝试并且它成功了。

我建议在几个小时或明天再试一次......错误将是错误，只有苹果可以修复它们，所以不要让自己发疯:)

注意：我不确定这是否应该在这里......这更多的是编程问题......我可能错了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T08:45:23.530

我在尝试添加我的第一个应用程序时遇到了同样的问题，除了协议更新是关于一些巴西音乐合同的。这发生在我的开发者计划到期前 28 天，所以我更新了程序并输入了通过邮件发送给我的激活码，突然我可以添加一个新应用程序。

**关键点：**

*   我的开发者计划**没有**过期
*   续订和付款后仍然无法使用
*   激活后立即生效（通过邮件发送激活码）

# unit-testing - 如何在 Bamboo 中使用 Qt 测试输出？

> ID：10156462
> 
> 赞同：0
> 
> 时间：2012-04-14T19:05:30.190
> 
> 标签：unit-testing, qt, xunit

有没有办法在 Bamboo 中使用 -xunitxml 生成的 Qt 测试输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:52:26.460

只要测试输出文件的扩展名为 *.xml，JUnit 解析器就可以处理生成的输出。问题似乎是对单元测试输出文件使用除 *.xml 之外的任何其他扩展名将导致 Bamboo 不读取输出文件并报告构建是无测试的。

# javascript - jQuery UI DatePicker IE Javascript 问题

> ID：10156464
> 
> 赞同：0
> 
> 时间：2012-04-14T19:05:40.813
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

我写这篇文章时知道我真的没有关于这个问题的大量信息，但我没有任何运气调试它，我想在我花更多时间试图弄清楚之前，我会看看是否有其他人看到过这个问题出来！

我在页面上有一个 jQuery UI 日期选择器，并且在 IE 8 和 IE 9 中存在一些问题，但在任何其他浏览器中都没有。在我们的**ajax**应用程序使用了一段时间后，用户报告说他们点击了日期输入，日历似乎选择了一个日期，但日历中的按钮都不起作用；单击日期按钮不会关闭日历，也不会选择日期，单击上个月或下个月按钮不会滚动日历。

我亲眼看到了错误，单击日期选择器中的任何按钮都会导致浏览器 url 更改为[http://baseurl.com/#](http://baseurl.com/#)。这显然表明应该在按钮点击时触发的 javascript 没有被执行。

关于为什么日历弹出窗口中按钮的 javasript 会停止工作的任何想法？

这是连接日期选择器的javascript。每当页面加载时，都会调用 styleElements 方法，传入 ajax 加载的内容 div。

```
function styleElements(context) {
   $('.date', context).each(function () {
        var element = $(this);        

        element.datepicker({ dateFormat: 'mm/dd/yy', prevText: '', nextText: '' });
        element.mask('99/99/9999');
    });
} 
```

# html - IE9：Div内的Div，其中内部的div具有更大的宽度

> ID：10156472
> 
> 赞同：0
> 
> 时间：2012-04-14T19:06:33.770
> 
> 标签：html, internet-explorer-9

我有一个网站，其中容器 div 中有一个 div，其宽度大于容器 div。

在 Firefox 和 Chrome 中，这个内部 div 不会增加父 div 的宽度。然而，在 IE 中则相反。

我需要这样做，以便容器 div 不会因为其中的 div 较大而增加它的宽度。

这在IE中甚至可能吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:07:59.463

如果您指定标准兼容模式，则在 IE9 中不会发生这种情况。

尝试将其放在`<!DOCTYPE html>`html 文件的顶部。

```
<!DOCTYPE html>
<div style="width: 250px; height:150px; background-color: #ff0">
<div style="width: 500px; height:100px; background-color: #f00">
blaaah
</div>
</div> 
```

显示： ![显示工作代码的屏幕截图。 在任何人评论之前：html、head 和 body 标签在 HTML5 中是可选的](../Images/40a2214ef9c7071b419493c0cf7eb44a.png)

但是，如果您在 Quirks 模式下运行相同的代码（通过 F12 开发人员菜单），它确实会扩展外部`div`. 您会发现启用标准兼容模式将大大提高 Internet Explorer 与您网站的兼容性！

# javascript - javascript在窗口对象上调用函数

> ID：10156474
> 
> 赞同：7
> 
> 时间：2012-04-14T19:06:53.747
> 
> 标签：javascript, jquery

我有以下代码，想知道如何使最后一行工作。我添加了一组 api，将当前使用的 _view 附加为它的命名空间约定，并且宁愿使用 arc.view.$function_name 之类的东西。谢谢

```
var arc={};
arc.view={
  say_hello: function(){
    alert("I want to say hello");
  }
}
function say_goodbye(){
  alert("goodbye to you");
}

arc.view.say_hello(); // works
window['say_goodbye'](); // works
// possible to make this work?
window['arc.view.say_hello'](); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-14T19:13:41.663

```
window['arc']['view']['say_hello'](); 
```

或者

```
window.arc.view.say_hello() 
```

或者

```
window['arc'].view['say_hello']() 
```

点语法或括号语法都可以使用。点语法实际上只是基于括号的属性查找的语法糖，因此上述所有代码片段都是相同的。当属性名称本身是动态值时使用括号语法，或者在点语法中使用属性名称会导致语法错误。例如：

```
var dynamicMethodName = someObject.getMethodName();
someOtherObject[dynamicMethodName](); 
```

或者

```
someOtherObject["a key string with spaces and {special characters}"](); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T19:14:16.727

**试试这个**：

[jsFiddle](http://jsfiddle.net/puEgC/1/)

```
window["arc"]["view"]["say_hello"](); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T20:01:34.200

使用方括号表示法，您实际上是在要求执行 window 中的函数`arc.view.say_hello`，而不是对象中的函数`view`（即 object 的属性`arc`）。更明确地说：

```
window["arc.view.say_hello"] = function () { alert("hi") };

window["arc.view.say_hello"](); // "hi" 
```

如果您想以您描述的方式调用函数，则必须“解析”对象链。您可以为此创建一个实用函数。就像是：

```
var arc={};
arc.view={
  say_hello: function(){
    alert("I want to say hello");
  }
}
function say_goodbye(){
  alert("goodbye to you");
}

function call(id) {
    var objects = id.split(".");
    var obj = this;

    for (var i = 0, len = objects.length; i < len && obj; i++)
        obj = obj[objects[i]];

    if (typeof obj === "function")
        obj();
}

call("say_goodbye");
call("arc.view.say_hello"); 
```

您还可以扩展实用程序函数以使用`arguments`（或者您可以只返回对该函数的引用）。

# css - 通过 CSS 媒体查询和生成的内容将#anchors 动态添加到链接

> ID：10156475
> 
> 赞同：3
> 
> 时间：2012-04-14T19:06:59.593
> 
> 标签：css

在我的每个页面中，就在主要内容块的上方，我有一个命名的锚项，如下所示：

```
<a id="jump"></a> 
```

我网站的 css 包含一个媒体查询，当浏览器宽度小于 770 (iPad Portrait) 时会重置样式。我想将 css 插入到这个查询分支中，这样我的所有主站点链接都会自动附加对该锚点的引用，如下所示：

```
<a href="about-us/#jump">About Us</a> 
```

我可以通过 CSS 生成内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:39:55.087

CSS 3 指定了强大的[生成/替换功能](http://www.w3.org/TR/css3-content/)，但我很确定您不能仅使用 CSS 修改现有标签的属性。

可以读取属性的值并将该值包含在生成的内容中，例如：

```
[href]::after { content: footnote; }
[href]::after::alternate { content: attr(href); } 
```

但是，我不认为所有的部分都可以得到你想要的行为。

或者，您可以在*所有*链接中包含锚点，然后根据您的媒体查询以不同的方式定位锚点？如果屏幕很宽，则锚点可能位于页面的最顶部。如果宽度小于 770，则锚点将位于页面下方。

# javascript - $ 功能不工作（失踪？）

> ID：10156478
> 
> 赞同：1
> 
> 时间：2012-04-14T19:07:09.377
> 
> 标签：javascript, jquery

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
$('div'); // <--- THIS DOESN'T WORK
</script> 
```

我在上面的代码中遇到错误。在签入 .js 代码时，我找不到名为 的函数`$`，但根据文档，应该有一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T19:12:32.777

试试`http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js`。注意`http:`开头的。

即使没有它也[应该可以工作](https://stackoverflow.com/questions/550038/is-it-valid-to-replace-http-with-in-a-script-src-http)。我猜你试图通过`file://`. 在这种情况下，无方案的 URL 当然是行不通[的](https://stackoverflow.com/questions/954327/hidden-features-of-html/960111#comment4073299_960111)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-14T19:13:01.503

```
<script type="text/javascript">
$(function(){ // this is equivalent to $(document).ready(function{
    $('div'); 
});
</script> 
```

您需要确保您的代码在 jQuery 之后运行并且页面已完成加载。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-14T19:21:03.280

我认为这取决于您在哪里包含这些脚本标签。如果它们在您的开始正文标记之前就在您的脑海中，那么您需要将第二条语句包装在文档就绪函数中，以确保在 jQuery 开始查找“div”之前加载 DOM。

```
<script type="text/javascript">
$(function(){
    $('div'); 
});
</script> 
```

否则，如果您的脚本标签就在您的结束正文标签之前，这应该可以工作。

# html - 从网页中的独立文件加载选项卡内容

> ID：10156479
> 
> 赞同：0
> 
> 时间：2012-04-14T19:07:22.223
> 
> 标签：html, joomla, webpage

我正在开发一个基于 joomla 的网站，其中我有一个特定页面，可以在这里看到。

[http://www.careerpluss.com/portal/component/content/article/45/79-univvisits.html](http://www.careerpluss.com/portal/component/content/article/45/79-univvisits.html)

在这里，我创建了 4 个城市标签。

整个代码已写在一篇文章（文件）中。

对于每个选项卡，我可以将其写在单独的文件（html）中并在我们单击选项卡时将它们加载到此处。

例如，我有德里访问标签。我希望将此选项卡的整个代码写入一个单独的文件 (delhi.htnl)，当我单击德里选项卡时，访问页面应读取此页面的内容并将其加载到此处。

可以这样做还是有更好的解决方案？

PS：我需要控制客户端来修改单个文件，一旦上传到特定位置，显示的页面应该有显示在这里的内容。

我希望我已经明确了我的要求。

请在这里帮助我。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T00:19:05.047

使用[**Jumi**](http://extensions.joomla.org/extensions/edition/custom-code-in-content/1023)并为每个文件做一个 php 包含文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:08:10.883

如果您希望这些显示在不同的 html 文件中，如您所指出的，我建议您使用 iframe 执行此操作

[http://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

```
<iframe src="http://www.w3schools.com"></iframe> 
```

# c++ - EASTL 矢量设计 size() 方法

> ID：10156480
> 
> 赞同：1
> 
> 时间：2012-04-14T19:07:31.057
> 
> 标签：c++, vector, eastl

我有一个关于在`EASTL`. 链接在[这里。](https://github.com/paulhodge/EASTL/blob/master/include/EASTL/vector.h)

即在方法上`size()`。这是它的样子：

```
template <typename T, typename Allocator>
inline typename vector<T, Allocator>::size_type
vector<T, Allocator>::size() const
{
    return (size_type)(mpEnd - mpBegin);  
} 
```

`size_type`is `uint32_t`, `mpBegin`/`mpEnd`是 T* 指针。

我不明白从 (mpEnd - mpBegin) 到 uint32_t 的转换如何等于向量中的元素**数**。不应该除以`sizeof(T)`吗？否则我们只是得到向量中所有元素的字节大小？

我错过了什么？

编辑：除非 EASTL 向量不遵循向量的 stl 定义，但我在它上面找不到任何数据，据说它可以用 eastl 向量替换 stl 向量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:28:57.957

不是强制转换导致操作等于数组中元素的数量。指针减法在这里已经做了正确的事情。当您从另一个指针中减去一个指针时，会考虑它们指向的类型的大小。没有必要除以`sizeof(T)`。一直都是这样，即使在 C 中也是如此。转换只是将其转换为返回值的正确整数类型，如果还没有的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:28:34.780

`char*`如果您正在使用或可能，则大小仅以字节为单位`void*`。否则，它在`sizeof(T)`. 因为`mpEnd`和`mpBegin`是`T*`。

# .htaccess - 我可以在 Cloud Files Rackspace 上使用 .htaccess 吗？

> ID：10156481
> 
> 赞同：0
> 
> 时间：2012-04-14T19:07:33.527
> 
> 标签：.htaccess, rackspace, hotlinking

我需要使用机架空间云文件来存储我的图像和视频文件...

但是我担心热链接..我怎样才能防止热链接？

我的意思是，只有允许的域才能进行热链接...

就像是：

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} !^http://(.+\.)?mysite\.com/ [NC]
RewriteCond %{HTTP_REFERER} !^$
RewriteRule .*\.(jpe?g|gif|bmp|png)$ http://i.imgur.com/qX4w7.gif [L] 
```

我怎么能用 rackspace cloudfiles cdn 做到这一点？？？

谢谢...

# vim - 鼠标单击时从 Vim 进行奇怪的插入

> ID：10156482
> 
> 赞同：3
> 
> 时间：2012-04-14T19:07:46.320
> 
> 标签：vim, putty

我正在使用 putty（在 Windows 7 上）连接到 shell 和 Vim 作为编辑器。我还在 Vim 中启用了 mouse=a 选项，但是当我单击 Vim 窗口的右侧（假设它是 70% 以上的屏幕宽度区域变得奇怪）。我慢慢习惯了这种行为，但我真的很想知道我是否能以某种方式解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:32:10.573

因此，似乎“PuTTY 实现的原始 xterm 鼠标协议仅支持高达 223 的鼠标坐标” [ak2 在 superuser 上告诉我](https://superuser.com/questions/413351/weird-insertion-from-vim-on-mouse-click#comment471871_413351)。因此，对于将面临此类问题的任何人 - 将 PuTTY 窗口大小设置为 95 列 - 鼠标将在任何地方都按预期工作。

# usb - 如果我使用类驱动程序，为什么需要 USB VID/PID？

> ID：10156486
> 
> 赞同：2
> 
> 时间：2012-04-14T19:08:25.540
> 
> 标签：usb, driver

我正在创建一个基于 AVR 微控制器的硬件 MIDI 设备。

我已经能够成功地指定使用 MIDI USB 类，因此我的设备功能无需安装任何额外的驱动程序。我也设置了它，因此我的设备具有其名称和制造商的值。

我不明白的是我需要 VID/PID 做什么？这似乎是一个昂贵的购买，没有附加价值。目前，我正在使用 0xDEAD/0xCODE 进行组合，并且我的设备仍然可以按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T06:28:34.883

如果您的 USB 设备不需要驱动程序并且它使用“标准”USB 类，那么理论上它使用什么 VID/PID 组合并不重要。

但是，如果为另一家公司/设备分配了相同的 VID/PID 组合（看起来尚未在[公司/VID 列表](http://www.usb.org/developers/tools/comp_dump)中分配 DEAD ）并且用户希望与您的设备或库同时使用它另一个设备安装在主机上，那么这两个设备都不能正常工作。

如果该设备是一种产品，您可能希望查看一些转售 PIDS 的供应商，而不是制作一个。即使该 VID 已被 USB 组织淘汰（请参阅[USB 工具页面](http://www.usb.org/developers/tools/)底部的列表），它也可能在未来仍然未被使用。

[咆哮] 2000 美元的 VID 是一个非常昂贵的 2 个字节。我和其他许多人很乐意花几百美元购买一个 VID/PID 组合（有多少供应商需要 64000 个 PID？），这可能为 USB 组织带来更多收入。[/咆哮]

# math - 你如何“扩展” BLAS 子程序？

> ID：10156487
> 
> 赞同：1
> 
> 时间：2012-04-14T19:08:35.297
> 
> 标签：math, fortran, linear-algebra, lapack, blas

通常，BLAS 子程序是为某个独特的操作定义的。例如，

`DAXPY`是必然的`y <-- ax + y`

`DSCAL`是必然的`x = ax`。

我希望达到的是：

`z = ax+by`和`y = ax`。

**我如何“扩展” BLAS 的子程序以便我可以执行上述操作？** （这些操作不一定相互遵循）

我试过了：

*   声明一个虚拟对象，然后`DCOPY`将虚拟对象设置为所需的向量。像，`DCOPY(dummy,x); DSCAL(a,dummy),DCOPY(y,dummy)`

*   创建我自己的 OpenMP 实现

*   `DCOPY(y,a*x)`使用诸如for y=ax之类的技巧

但问题是，这些方法似乎都没有给我一个确凿的答案，哪个是解决这个问题的最佳方法。我知道我应该“配置文件，配置文件，配置文件”而不是询问，但我已经尝试了所有这些，但是每次我稍微改变向量时，之前最好的方法突然变成最差的方法，反之亦然。

还，

*   我的目的是尽可能实现最佳性能。
*   我知道优化这些操作可能不会给我带来太多的性能提升，但我正在尝试尽可能节省每一皮秒。
*   FWIW，我正在链接到英特尔 MKL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T20:20:26.030

首先，在您对 y <- ax 的解释中，您可以使用 DCOPY(y,x); 删除一个过度复制；DSCAL(a,y)。

其次，OpenMP 恕我直言，这不是这类问题的解决方案，因为它们是“内存绑定”的。代价在于通过计算和矢量化流水线化内存访问，这通过使用矢量内存访问来使用更多带宽。手动调整的代码应该非常复杂，因为（分支预测、缓存策略、寄存器文件配置等）您需要 R. Clint Whaley 的 Atlas 库之类的东西，它会自动为特定平台生成优化的操作实现。AFAIK，有 BLAST 标准（2001），也许你会发现你提出的操作的类似变体。可能您需要给他们发送电子邮件以将这些操作添加到他们的自动调谐器中。

作为起点，我建议您使用 z = ax+by 的以下实现。在这种情况下，无论如何都会写入 z，只要 x 和 y 是只读的，您可以使用： DCOPY(z,y); DSCAL(b,z); DAXPY(a, x, z);

您还可以阅读有关 ATLAS 项目的文章，其中包含有关代码优化关键方面（madd 操作的存在、缓存特性、寄存器文件配置、指令延迟等）的主要考虑因素，并尝试编写类似代码生成器的东西为您的操作流水线执行各种操作并在各种变体之间执行搜索。

这是一个有趣的话题，我一直在具有显式管理的内存层次结构的异构多核架构上实现 BLAS，比如 Cell 处理器。祝你好运！希望我的回答有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T01:47:58.033

由于您使用的是 MKL，因此您可以使用扩展名 DAXPBY，它可以使用`y <-- ax + by`. 您的操作将变为：

```
`z = ax + by`: DCOPY(n,z,1,y,1), then DAXPBY(n,a,x,1,b,z,1)
`y = ax`: DAXPBY(n,a,x,1,0,y,1) 
```

您也可以尝试让编译器矢量化简单的标量代码；从理论上讲，这些简单的操作应该适合自动矢量化（当然，在实践中......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T06:12:41.387

我建议您使用 Fortran 95 数组表示法编写自己的例程，并查看编译器是否能够生成像样的代码。我怀疑它会，因为带宽有限的操作几乎被天真的实现最大化了，即由大师编写的优化的 BLAS1 库实现可能不会比未优化的 Netlib BLAS1 快很多，除非数据已经驻留在缓存中（其中情况下，矢量化会有一些效果）。

I have made such comparisons in the past and found that, for any vector not resident in cache, the difference between optimized and unoptimized BLAS1 style routines is negligible.

# bash - 在不更改 vim 颜色的情况下更改终端颜色？

> ID：10156492
> 
> 赞同：0
> 
> 时间：2012-04-14T19:09:16.397
> 
> 标签：bash, vim, colors

有没有一种方法可以在不改变终端 VIM 的颜色的情况下改变终端颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:14:47.267

您可以使用该`CSApprox`软件包在支持 xterm 256 颜色扩展的终端上使用 Vim 的颜色主题。（当然，颜色近似于 256 色调色板：因此是“近似值”。）这些颜色不受 16 色 ANSI 调色板变化的影响（或不应该受到）。

因此，例如，您可以改进 colorized`ls`的显示方式，而无需更改 Vim 语法高亮显示的方式。

另一个有用的软件包是`ColorSamplerPack`它包含一大堆颜色主题，您可以使用已`CSApprox`安装的主题进行试验。

这些包可以在[http://www.vim.org](http://www.vim.org)上找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T20:21:53.787

不是一个真正的解决方案：

我删除了更改我的终端颜色定义的东西，并相应地更改了 dircolors。

# java - 在开始时将随机位置设置为 ImageView

> ID：10156497
> 
> 赞同：0
> 
> 时间：2012-04-14T19:09:30.870
> 
> 标签：java, android, layout, imageview

我的 RelativeLayout 上有 8 个 ImageView。当活动 onCreate 它启动方法 init：

```
 private void init() {
        gameFieldView = (RelativeLayout) getGameFieldView();
        mainView = (LinearLayout) getMainView();
        topOffset = mainView.getHeight() - gameFieldView.getHeight() - 6;
        // THERE ARE 0 height and width of gameFieldView, and mainView 
        for (int i = 0; i < LETTERS_NUMBER; i++) {
            ImageView letter = (ImageView) findViewById(R.id.e1_letter + i);
            generateRandomPosition(random, letter); // When i comment this line it is ok (What kind of sorcery is this?), but i want to set random position to ImageView "letter"
        }
    } 
```

现在 generateRandomPosition 看起来像

```
private void generateRandomPosition(Random random, ImageView letter) {
        int height = letter.getHeight();
        int width = letter.getWidth();
        int top = random.nextInt(gameFieldView.getMeasuredHeight() - height - topOffset); // It obviously crashes because of IllegalArgumentException - parameter < 0 because of gameFieldView height = 0 
        int left = random.nextInt(gameFieldView.getMeasuredWidth() - width);
        letter.layout(left, top, left + width, top + height);
    } 
```

我究竟做错了什么？提前致谢。

**更新。** 顺便说一句，我尝试在 onWindowFocusChanged 中调用 init()，它解决了 IllegalArgumentException 的问题，顶部和左侧计数以正确的方式，但即使在 letter.layout() 之后，imageview 仍保持在左上角

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:38:45.837

如果您下次发布 LogCat/StackTrace 会很有帮助。无论如何，问题出在以下行：`findViewById(R.id.e1_letter + i);`您正在获取资源的引用 id 并向其添加一个整数。这可能没有任何意义。在空对象上设置一些东西是行不通的。循环遍历 RelativeLayout 的子项会容易得多，如下所示：

```
ViewGroup v = (ViewGroup) gameFieldView;
for(int i = 0; i < v.getChildCount(); ++i) {
    ImageView letter = (ImageView) v.getChildAt(i);
    generateRandomPosition(random, letter); 
} 
```

这样你就不需要所有 ImageViews 的 id

# java - Java 泛型和集合集

> ID：10156500
> 
> 赞同：5
> 
> 时间：2012-04-14T19:09:50.073
> 
> 标签：java, generics, containers

我是一个有一点 C++ 经验的 Java 菜鸟，我正在尝试按照以下方式在 Java 中创建一组集合（类似于在 C++ 中所做的）：

```
Set< Set< String > > collection = new TreeSet< Set< String > >();
Set< String > entry =  new TreeSet< String >();
collection.add( entry ); 
```

这构建得很好，但是当程序执行时，`java.util.TreeSet cannot be cast to java.lang.Comparable`会引发异常。

在不重新实现轮子的情况下，如何在 Java 中拥有一组 Set？

此外，Java 允许编译损坏的代码（例如，类型不匹配）是怎么回事？

提前感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T19:13:05.333

在 的合同中[`TreeSet`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)，要求所有条目必须是`Comparable`或您必须提供`Comparator`. （这也是您没有看到编译时错误的原因：只有`Comparable`在没有明确的. 时才会转换为条目`Comparator`。）

它与泛型无关，它来自`TreeSet`自身的实现：因为它是一棵二叉树，所以只有条目可以以某种方式排序才有意义。

如果您详细说明您的具体问题，我们可能会帮助您找到所需的确切数据结构，但一般来说，如果您不关心集合中元素的顺序，`HashSet`则使用 a。同样，一般来说，a `Set`of `Set`s 通常是设计草率的标志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T19:15:38.093

如果要将对象添加到`TreeSet`集合中，则该对象的类型必须实现`Comparable`接口，而接口`TreeSet`本身没有。或者，您可以`Comparator`通过使用不同的构造函数创建 TreeSet 来提供。

在这种特殊情况下使用 a 并没有真正意义，`TreeSet`因为根据定义，这是一个有序集合，您似乎不需要元素的排序。你可以试试 a `HashSet`。

此外，要回答您的第二个问题，此错误仅在运行时出现，因为您正在利用多态行为，即您正在添加到 a `Set`，实际上在运行时绑定到 a `TreeSet`。此信息在编译时未知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T02:22:15.613

问题在于，`TreeSet`从泛型的角度来看，它并不是完全“类型安全”的，因为它需要能够接受自定义比较器*或*使用自然排序。

如果`TreeSet`只使用自然顺序，它可以被声明为`TreeSet<E extends Comparable<? super E>>`并且它是类型安全的——与自身不可比较的类型根本不能用作参数。另一方面，如果它总是使用比较器，它也是类型安全的。

但是它现在的设计方式允许您创建一个`TreeSet`没有比较器（因此使用自然排序）的元素类型与自身不可比较。没有编译时检查来强制执行此操作。仅在运行时才注意到失败。

实际上有一种方法`TreeSet`可以修复。它可以支持自然排序和自定义比较器，并且是类型安全的：

*   有一个接受自定义比较器的构造函数

*   没有自然排序情况的构造函数。相反，有一个工厂方法来创建一个`TreeSet`使用自然排序的。工厂方法可以有一个泛型类型绑定`<E extends Comparable<? super E>>`，它要求类型与自身具有可比性

我不知道为什么 Java 库设计者不这样做。

# android - android 任务和 BackStack

> ID：10156503
> 
> 赞同：0
> 
> 时间：2012-04-14T19:10:14.690
> 
> 标签：android, task

假设有 3 个任务。任务 A、任务 B、任务 C。这 3 个任务是否有 3 个 BackStack（或）所有 3 个任务只有 1 个 BackStack？Task 是如何与 Backstack 关联的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T00:09:19.527

引用[文档](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)：

> 任务是用户在执行特定工作时与之交互的活动的集合。活动按每个活动的打开顺序排列在一个堆栈（“后堆栈”）中。

因此...

> 假设有 3 个任务。任务 A、任务 B、任务 C。这 3 个任务是否有 3 个 BackStack（或）所有 3 个任务只有 1 个 BackStack？

每个任务有一个回栈。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-14T19:56:23.800

有关 Android 中的任务和返回堆栈的所有内容，包括您的问题，都可以在这里找到：http: [//developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)。

图像和文字是不言自明的。

# algorithm - 求和最大的最长递增子序列

> ID：10156504
> 
> 赞同：3
> 
> 时间：2012-04-14T19:10:15.253
> 
> 标签：algorithm

给定一个可以是正数和负数的数字序列，有几种算法可以找到最长的递增子序列。但是，如果有多个最长递增子序列，有人可以给我一个算法来找到最大和的最长递增子序列吗？

示例：对于 20、1、4、3、10，答案是 1、4、10，而不是 1、3、10

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T20:58:22.897

```
dpLen[i] = maximum length of a LIS with maximum sum ending at i
dpSum[i] = maximum sum of a LIS with maximum sum ending at i

for i = 0 to n do
  dpLen[i] = 1
  dpSum[i] = input[i]

  maxLen = 0
  for j = 0 to i do
    if dpLen[j] > maxLen and input[j] < input[i]
      maxLen = dpLen[j]

  for j = 0 to i do
    if dpLen[j] == maxLen and input[j] < input[i] and dpSum[j] + input[i] > dpSum[i]
      dpSum[i] = dpSum[j] + input[i]

  dpLen[i] = maxLen + 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-24T21:40:08.793

这是一个动态规划问题。这是一个工作示例。我试图注释代码。但是，如果您最近没有复习动态编程概念，那么您将很难理解该解决方案。

解决方案可以被认为是

S(j) = max { 以j结尾的最长和子序列之和（即包括a[j]），S(j-1) }

```
public class LongestSumSequence{

    public static void printLongestSumSubsequence(int[] seq) {
        int[] S = new int[seq.length];

        //S[j] contains the longest sum of subsequence a1,a2,a3,....,aj
        //So a sub sequence with length 1 will only contain first element.
        //Hence we initialize it like this
        S[0] = seq[0];
        int min_index = 0;
        int max_index = 0;

        //Now like any dynamic problem we proceed by solving sub problems and 
        //using results of subproblems to calculate bigger problems
        for(int i = 1; i < seq.length; i++) {

            //Finding longest sum sub-sequence ending at j
            int max = seq[i];
            int idx = i;
            int sum = seq[i];
            for(int j = i-1; j >=0 ; j--) {
                sum += seq[j];  
                if(max < sum) { 
                    idx = j;            
                    max = sum;          
                }               
            }
            //Now we know the longest sum subsequence ending at j, lets see if its
            //sum is bigger than S(i-1) or less
            //This element is part of longest sum subsequence
            if(max > S[i-1]) {
                S[i] = max;     
                max_index = i;  
                min_index = idx;
            } else {    
                //This element is not part of longest sum subsequence
                S[i] = S[i-1];  
            }           
        }       

        System.out.println("Biggest Sum : "+S[seq.length - 1]);
        //Print the sequence
        for(int idx = min_index; idx <= max_index; idx++) {
            System.out.println("Index " + idx +  "Element " + seq[idx]);
        }       
    }   

    public static void main(String[] args) {
        int[] seq = {5,15,-30,10,-5,40,10};
        printLongestSumSubsequence(seq);
    }   
} 
```

# c# - 反向连接服务器和 SMTP 故障

> ID：10156511
> 
> 赞同：2
> 
> 时间：2012-04-14T19:11:39.463
> 
> 标签：c#, sockets, smtp, reverse-proxy

我不明白这种类型的错误有什么问题。我有一个反向连接服务器（类型 Socks4/5 或 HTTP）。我使用服务器连接到其中一台远程 PC。为此，我打开了一个到此服务器之一的 TCP 连接（serverip:randport）。

```
// create an instance of the client proxy factory
            ProxyClientFactory factory = new ProxyClientFactory();

            ProxyHost = "string:serverIP";
            ProxyPort = int:serverPort;

            proxy = factory.CreateProxyClient(proxyType, ProxyHost, ProxyPort);
            try
            { .. } 
```

我为该工厂使用 Starksoft SOCKS 和 HTTP 代理组件 v1.0.130.0。

现在的问题是：要发送电子邮件，我使用 RFC821 来配置远程 PC 上的通信。如果您在 localhost 上由您的提供商打开了 25 端口，这也是同样的处理。

```
 snd("HELO", true);
            snd("MAIL FROM:" + sender, true);
            snd("RCPT TO:" + recipient, true);
            snd("DATA", true);
            snd("From: " + sender);
            snd("To: " + recipient);
            snd("Subject: " + subject);
            snd("");
            snd(messagebody);
            snd(".", true);
            snd("QUIT", true); 
```

我在这一行得到一个错误

```
private bool snd(string buffer, bool getresponse)
        {
            this.response = "";
            NetworkStream stream = this.GetStream();
            Byte[] sendBytes = Encoding.Default.GetBytes(buffer + crlf);
            if (!stream.CanWrite) { return false; }
            try
            {
                stream.Write(sendBytes, 0, sendBytes.Length);
            } 
```

![屏幕 Nr1](../Images/2b38134fe7939373f88e9eaf38b0abd3.png) +$exception {“无法将数据写入传输连接：已建立的连接被主机中的软件中止。”} System.Exception {System.IO.IOException}

和控制台写这个异常 ![屏幕 Nr2in](../Images/77433f196f979f16fe8ad98c06e67d83.png)

**我如何进行反向反向连接？？？**

答案是使用中间服务器。然后脚本将如下所示：

1.  有中间服务器打开一个端口是没有问题的，比如65080为服务器和80个客户端
2.  有一个服务器（HTTP），它不能打开端口，但他知道中间服务器的地址，以及“服务器”端口 65080。它连接到一个中间服务器连接 1。
3.  有一个普通的客户端，比如浏览器
4.  客户端在端口 80 连接 2 上连接到中间服务器，并发出请求
5.  此外，中间服务器直接向连接到端口 65 080 复合 1 的执行请求报告，该请求将不得不关闭 -
6.  服务器接收到请求，服务器连接到另一个中间复合 3，询问中间件服务器请求，完成它，并将响应发送到暂存服务器
7.  中间服务器将来自服务器（来自复合 3）的响应转发给客户端（对于复合 2）
8.  客户端终止连接

## **那么我哪里做错了？**

# php - PHP 和 JS 之间的数据通信

> ID：10156513
> 
> 赞同：0
> 
> 时间：2012-04-14T19:11:55.070
> 
> 标签：php, javascript, ajax, textbox

我正在制作一个网站以在单击链接时显示文件的内容，并且我知道 PHP 无法处理本地操作，但 JS 可以。但可悲的是，我想不出一种可行的交流方式，比如……`$fileContents`在它们之间命名的变量。我需要的是以`$fileContents`某种方式将变量从 PHP 传递给 JS，并让 JS 将文本打印到文本框中。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:14:41.887

它实际上并不是关于从 PHP 到 JavaScript 的“传递”变量。

**请记住：**

*   PHP 是一种服务器端脚本语言
*   JavaScript 驻留在客户端的浏览器上。

因此，您实际上可以...直接从您的 PHP 脚本中编写任何您希望的 javascript。

比方说，你有一个`$a`变量......然后你可以简单地在你的 javascript 代码中输入它，如下所示：

```
<script type='text/javascript'>
     var a = <?php echo $a; ?>
</script> 
```

**然而 ：**

如果您的意思是`$a`在页面加载时实际使用 var，或者以某种方式检索结果而不重新加载，那么您可能需要的是 Ajax。

要使用 AJAX，我会建议：

*   jQuery`load`方法
*   使用一些[现成的 AJAX 对象](http://www.hunlock.com/blogs/The_Ultimate_Ajax_Object)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:13:57.400

你可能想在谷歌上搜索一个叫做“AJAX”的东西，也许还有一些叫做“JQuery”的东西，以保持简单。

# mongrel2 - 当代理服务不可用时，Mongrel2 中的后备页面？

> ID：10156519
> 
> 赞同：1
> 
> 时间：2012-04-14T19:12:19.730
> 
> 标签：mongrel2

我有一个 Mongrel2 服务器设置了一个基本的代理安排：`/static/`去一些静态资源，而其他一切都被代理到同一台机器上的另一台服务器。如何设置 Mongrel2，以便如果我代理的服务发生故障，而不仅仅是`502 Bad Gateway`，它提供静态页面？

我正在寻找与[Cherokee 类似的问题](https://stackoverflow.com/q/3449673/244494)。我在 Mongrel2 的文档中找不到平行的东西 - 如果它在那里，我会很感激一个链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:21:15.547

截至 2012 年 10 月中旬，这在 Mongrel2 中是不可能的。然而，有一个[开放的 GitHub 问题](https://github.com/zedshaw/mongrel2/issues/151)请求该功能，因此该功能很可能会出现在 Mongrel2 的未来版本中，届时我会回来并进行适当的修改。

（*希望确保回答这个问题以帮助未来的搜索者。*）

# eclipse - 无法使用 Ubuntu 在 Eclipse 中读取文本文件

> ID：10156520
> 
> 赞同：0
> 
> 时间：2012-04-14T19:12:28.283
> 
> 标签：eclipse, ubuntu, text-files

我在使 Eclipse (Indigo) IDE 使用 Ubuntu 访问文本文件时遇到困难。我可以使用分区的 Windows 端来执行此操作。我想读取外部驱动器。这是在分区的 Windows 端工作的代码：

```
Scanner scan = new Scanner(new File("E:\\folder\\filename.txt")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T21:06:28.303

这是可能的，但不太可能，这`"E:\\folder\\filename.txt"`是 Ubuntu 上的正确文件名。基于 Linux 的 Ubuntu 使用正斜杠来分隔目录名称，并且它没有像`E:`. 如果文件实际上在 Windows 和 Ubuntu 中都可见，则您必须找出从 Ubuntu 中看到的正确路径名；它会是`".../folder/filename.txt"`，但你必须自己弄清楚这`...`部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:13:45.540

路径应该类似于 /media/drivename/folder/filename.txt。尝试右键单击文件并选择“属性”。从那里您可以复制“位置”中的值。

# java - Java编程中删除和重命名文件

> ID：10156524
> 
> 赞同：0
> 
> 时间：2012-04-14T19:12:46.207
> 
> 标签：java

我需要帮助在 Java 编程中删除然后重命名文件。我的问题是原始文件无法删除，第二个文件无法重命名。这是片段代码。任何建议将不胜感激。

```
import java.awt.event.*;
import java.io.*;
import java.util.ArrayList;
import java.util.Scanner;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;

public void deleteLine(String content) {
    try {

        File inFile = new File("football.dat");
        if (!inFile.isFile()) {
            System.out.println("Parameter is not an existing file");
            return;
        }
        File tempFile = new File(inFile.getAbsolutePath() + "2");
        BufferedReader br = new BufferedReader(new FileReader(inFile));
        PrintWriter pw = new PrintWriter(new FileWriter(tempFile), true);

        String linetobeempty = null;
        while ((linetobeempty = br.readLine()) != null) {

            if (!linetobeempty.trim().equals(content)) {
                pw.println(linetobeempty);
                pw.flush(); System.out.println(linetobeempty);
            }
        }

        pw.close();        
        br.close();
       boolean b = inFile.delete();

        if (!b) {
            System.out.println("Could not delete file");
            return;
        }

        //Rename the new file to the filename the original file had.
        if (!tempFile.renameTo(inFile)) {
            System.out.println("Could not rename file");
        }

    } catch (FileNotFoundException ex) {
        ex.printStackTrace();
    } catch (IOException ex) {
        ex.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:35:06.373

你在 Windows 上吗？在 Windows 上，如果任何进程在文件上具有文件句柄，则取消链接和重命名将失败（与 UNIX 不同）。我什至注意到，在 Java 中进行文件 I/O 测试时，有时您需要在文件写入和文件删除之间让操作系统休息一下。[renameTo 和 delete](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#renameTo%28java.io.File%29)上的文档给出了一些有限的见解。

为了简化您的问题并更好地调试它，只需创建文件而不是写入文件——使用 File.createNewFile()。

[可能您遇到与无法删除文件 Java](https://stackoverflow.com/questions/9502983/cannot-delete-file-java)相同的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:51:32.523

此代码段中没有任何内容是文件未被删除的直接原因。问题更深层次——权限，由其他进程打开，通常的东西。检查所有这些。当然，删除失败后重命名失败的原因是显而易见的，所以目前你知道的只有一个问题。

# javascript - 如何在两个 JSON 请求后访问 Javascript 对象并找到匹配项

> ID：10156526
> 
> 赞同：0
> 
> 时间：2012-04-14T19:12:52.837
> 
> 标签：javascript, jquery, json, object

我有这个代码：

```
$('#find').click(function(){
    if(first.val() != '' && second.val() != ''){
        $.getJSON(urlPersonSearch + first.val() + "?callback=?", function(json) {
            firstId = (json[0].id != undefined) ? json[0].id : '';
            if(firstId != '') result = grabMovies(firstId);
            var i = result[0].filmography.length;
            while(i--){
                movies[result[0].filmography[i].id] = result[0].filmography[i].name;
            }
        });
        $.getJSON(urlPersonSearch + second.val() + "?callback=?", function(json) {
            secondId = (json[0].id != undefined) ? json[0].id : '';
            if(secondId != '') result = grabMovies(secondId);
            var i = result[0].filmography.length;
            while(i--){
                movies[result[0].filmography[i].id] = result[0].filmography[i].name;
            }
        });

    }

});

function grabMovies(id){
    $.getJSON(urlPersonResult + id + "?callback=?", function(json) {
        return json;
    });
} 
```

现在，我想要做的是最终得到一个以 ID 和电影名称作为键/值的对象。最终，我试图获得一个仅包含两个 json 结果之间匹配项的对象。IE。

如果第一个结果是

23 = 你好，283 = 再见，

第二个的结果是

23 = 你好，294 = 再见

我最终会得到一个对象

23 = 你好

有没有人对如何做到这一点有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:28:36.520

让我理解：您正在寻找两组之间的交集。我不完全确定您的代码中发生了什么-您有这些循环：

```
movies[result[0].filmography[i].id] = result[0].filmography[i].name; 
```

我认为这些是您寻找交叉点的尝试。如果是这种情况，我要做的是设置两个对象，而不是一个“电影”对象，：

```
$('#find').click(function(){
    var initalMatches = {}; //so this is available to the callbacks below
    if(first.val() != '' && second.val() != ''){
     $.getJSON(urlPersonSearch + first.val() + "?callback=?", function(json) {
        var filmogradphy, i;
        firstId = (json[0].id != undefined) ? json[0].id : '';
        if(firstId != '') result = grabMovies(firstId);
        filmogradphy = result[0].filmogradphy;
        i = filmography.length;
        while(i--){
            initalMatches[filmogradphy[i].id] = filmogradphy[i].name;
        }
    });
    $.getJSON(urlPersonSearch + second.val() + "?callback=?", function(json) {
        var filmogradphy, i, id;
        secondId = (json[0].id != undefined) ? json[0].id : '';
        if(secondId != '') result = grabMovies(secondId);
        filmogradphy = result[0].filmogradphy;
        i = filmography.length;
        while(i--){
            id = filmogradphy[i].id;
            if( "undefined" !== initalMatches[id] ){
                movies[id] = filmography[i].name;
            }
        }
    });

} 
```

});

您可以在这里进行一些重构，但这应该可行:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T19:47:41.350

您正在寻找一个数组交集函数。[Underscore.js](http://documentcloud.github.com/underscore/#intersection)有一个。所以我已经准备好告诉你使用它，但**它不会用于此目的**。看看我尝试了什么：

```
var a = [{23:'hello'},{283:'goodbye'}],
    b = [{23:'hello'},{294:'bye'}];

_.intersection(a,b); // produces []

// investigating further
a.indexOf({23:'hello'}); // -1 
```

这里的根本问题是 JavaScript 中的对象等效性。另请注意

```
({23:'hello'} === {23:'hello'}); // false
({} === {}) // false 
```

[两个 JavaScript 对象并不等价](https://stackoverflow.com/questions/201183/how-do-you-determine-equality-for-two-javascript-objects)，即使它们具有相同的键和值。这与 Javascript 中的对象文字有关，它在底层调用构造函数，从而在内存中保留一个新的位置。

## 解决方案

Underscore 的 _.indexOf 方法似乎有一个错误。除此之外，它是一个很棒的库，我建议你使用它。我将使用以下内容对其进行扩展：

```
_.mixin({
    deepIndexOf: function (array, item, isSorted) {
        if (array == null) return -1;
        var i, l;
        if (isSorted) {
          i = _.sortedIndex(array, item);
          return _.isEqual(array[i],item) ? i : -1;
        }
        for (i = 0, l = array.length; i < l; i++) if (i in array && _.isEqual(array[i],item)) return i;
        return -1;
    },
    deepIntersection: function (array) {
        var rest = Array.prototype.slice.call(arguments, 1);
        return _.filter(_.uniq(array), function(item) {
          return _.every(rest, function(other) {
            return _.deepIndexOf(other, item) >= 0;
          });
        });
      }
}); 
```

现在，您可以`_.deepIntersection(a,b)`像这样运行：

```
var a = [{23:'hello'},{283:'goodbye'}],
    b = [{23:'hello'},{294:'bye'}];

_.deepIntersection(a,b); // produces [{23:'hello'}] 
```

# python - Python：两次读取输出脚本并将两列写入csv

> ID：10156533
> 
> 赞同：0
> 
> 时间：2012-04-14T19:13:50.700
> 
> 标签：python, csv, stdout

这是我的第一个 python **(2.4)**程序，我可以使用你的帮助。我有一个 csv 文件

```
HOST, PATH
server1, /path/to/file1.py
server2, /path/to/file2.py
server3, /path/to/file3.py 
```

对列 2/row[1] 上的每个 PATH 执行命令

在命令的输出中，我搜索文本并将它们附加到新列中。

示例命令输出：

```
Command: python /path/to/file1.py
Output: server1 (NTFS) Reply:Yes 
```

我想让我的新 csv 文件像：

```
HOST, PATH, PLATFORM, REPLY
server1, /path/to/file1.py, Windows, Yes
server2, /path/to/file2.py, Linux, Yes
server3, /path/to/file3.py, BSD, No 
```

我还没有让它与读取相同的输出行并附加具有不同结果的两列一起工作。我曾尝试关闭作者并在同一个读者中打开一个新作者，但没有任何乐趣。我试过缩进没有运气。我得到的最接近的是让它准确地搜索两个字符串，但它只写入一列。

我也尝试过首先搜索 os 平台并将更改写入新文件然后，打开新文件以写入另一行

当然，我可以通过再次运行命令并单独搜索来强制它工作，但那是多余且不必要的。

```
import datetime
import csv
import os, time
from stat import * # ST_SIZE etc
from subprocess import Popen, PIPE, STDOUT

# Set Date
now = datetime.datetime.now()
today = now.strftime("%m-%d-%Y")

# Files
filename = "my_list.csv"
results = "results/results_" + today + ".csv" # Eg. results_04-14-2012.csv

# Commands
command = "python"
SP = " "

incsv = open(filename, 'rb')
try:
    reader = csv.reader(incsv)

    outcsv = open(results, 'w')
    try:
        writer = csv.writer(outcsv)

        for row in reader:
            p = Popen(command + SP + row[1], shell=True, stdin=PIPE, stdout=PIPE, stderr=PIPE)
            stdout, empty = p.communicate()

            print 'Command: %s\nOutput: %s\n' % (command + SP + row[1], stdout)

            if not stdout:
                writer.writerow(row + ['PLATFORM']) # Create header for new column when first line is empty on stdout
            elif 'BSD' in stdout:
                writer.writerow(row + ['BSD'])
            elif 'Linux' in stdout or 'swap' in stdout or 'LLVM' in stdout or 'EBR' in stdout:
                writer.writerow(row + ['Linux'])
            elif 'NTFS' in stdout:
                writer.writerow(row + ['Windows'])
            else:
                writer.writerow(row + ['Error Scanning'])

                    reply = open(results, 'w')
                    try:
                        writer = csv.writer(platform)

                        for row in reader:

                            if not stdout:
                                writer.writerow(row + ['REPLY']) # Create header for new column when first line is empty on stdout
                            elif 'Reply:Yes' in stdout:
                                writer.writerow(row + ['Yes'])
                            elif 'Reply:No' in stdout :
                                writer.writerow(row + ['No'])

                            else:
                                writer.writerow(row + ['Error'])

                    finally:
                        reply.close()
    finally:
        outcsv.close()
finally:
    incsv.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:38:08.437

如果输入行和输出行之间有 1:1 映射，则可能不需要 csv。只需处理每一行并吐出一个新行。

**方法一：管道**

```
import sys
import subprocess

def parse_csv(input, output):
    # echo headings with new columns
    print >> output, input.readline() + ', PLATFORM, REPLY'

    for line in input.readlines():
        server, _, path = line.partition(',')
        path = path.strip()
        p = subprocess.Popen(command + ' ' + path,
                             stdin=subprocess.PIPE,
                             stdout=subprocess.PIPE,
                             shell=True)
        stdout, _ = p.communicate()

        # your additional logic goes here based on contents of stdout

        # when ready to output, just print, e.g.
        print >> output, '%s, %s, %s' % (line, stdout, 'Yes')

if __name__ == '__main__':
    parse_csv(sys.stdin, sys.stdout) 
```

执行

```
$ cat servers_and_paths.csv | python add_two_columns.py > servers_paths_and_flags.csv 
```

**方法 2：文件**

如果您不想使用管道，请使用 with 子句来处理打开/关闭：

```
from contextlib import closing

if __name__ == '__main__':
    with closing(open('servers_and_paths.csv')) as input,
         closing(open('servers_paths_and_flags.csv', 'wb')) as output:
        func_name(input, output) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:22:03.563

从输出中收集您想要的所有信息，并使用对`writerow()`. 例如，

```
newdata = ['BSD', 'Yes']
...
writer.writerow(row + newdata) 
```

当然，您将`newdata`通过解析脚本结果逐步构建。

PS。更新你的蟒蛇！2.4太老了。更新将以无数种方式让您的生活更轻松。

# android - 为 Android 配置虚拟机加速

> ID：10156535
> 
> 赞同：4
> 
> 时间：2012-04-14T19:14:04.570
> 
> 标签：android, android-emulator

我正在尝试使用此处的说明为 VM 加速设置模拟器：[使用 Android 模拟器](http://developer.android.com/guide/developing/devices/emulator.html#accel-vm)。

设置说：

> 您必须使用使用 x86 系统映像目标的 AVD。使用基于 ARM 的系统映像的 AVD 无法使用此处描述的仿真器配置进行加速。

然后它说：

> 要在模拟器中使用虚拟机加速，您需要以下版本的 Android 开发工具。使用 Android SDK Manager 安装这些组件：
> 
> Android SDK 工具，修订版 17 或更高版本
> 
> 基于 Android x86 的系统映像

我有最新的 Android SDK 工具。但是在我的 SDK 管理器中，我没有任何“基于 Android x86 的系统”可供安装。我也没有为任何特定 API 版本安装任何 x86 系统映像选项。

对于那些设置成功的人，您是如何使用 Android SDK Manager 安装“基于 Android x86 的系统映像”的？

我相信我已经完成了所需的所有其他设置，包括运行 IntelHAXM.exe 并确认虚拟化驱动程序运行正常。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T19:44:31.817

我相信说明有些误导，您需要使用 Android 虚拟设备管理器来创建 x86 类型的 AVD。如果您启动 AVD 管理器并按“新建”来创建一个，那么在 API 级别 10 的目标下，您应该会看到一个“**英特尔凌动 x86 映像**”。那就是你想要的那个。目前没有其他可用的 API 级别，但我认为以后会计划更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:37:27.073

阅读并遵循[Android 模拟器中的说明](http://developer.android.com/tools/devices/emulator.html#accel-vm)

# java - Java 和数据库：关于使用多个结果集和游标

> ID：10156539
> 
> 赞同：1
> 
> 时间：2012-04-14T19:14:24.943
> 
> 标签：java, database, oracle

我正在运行一个 java 方法来调用 Oracle 11.2 数据库中的存储过程。我正在使用 JDBC 连接调用带有 OUT 参数的存储过程，以将数据库游标作为结果集返回给 java 方法。一切正常。

现在我想将第二个结果集返回给 SAME 存储过程中的 java 方法。如果我只是在这个存储过程中添加第二个 OUT 参数并打开第二个游标，那么一切似乎也可以正常工作。

我想知道这是否正确，因为两个游标都只是在存储过程中打开，依靠 java 方法来关闭它们。

游标或结果集是否会因为第一个游标被`OPEN`编辑，然后选择了一些东西，然后第二个游标被`OPEN`选择了不同的东西而导致问题？选择的第二个东西会搞砸第一个选择的东西吗，反之亦然？或者数据库是否足够聪明，可以知道何时打开第二个游标，任何新选择都指向它而不是第一个游标打开？

我对这一切都很陌生，只是想检查一下它是如何打算将多个游标返回到 java 中的相应结果集中的。感谢您的任何评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:30:50.317

两个游标都是完全不同的实体，它们指向完全不同的查询，这些查询返回完全不同的 SCN 的结果。因此，数据库不存在混淆的风险。您的 Java 代码将获得`ResultSet`需要单独获取的单独对象，因此您的代码需要确保它是从右侧获取的`ResultSet`- 如果有任何混淆，则更有可能是您所在的代码中的错误从错误的游标中获取或在所有情况下都无法关闭两个游标。

虽然从存储过程中返回多个游标在技术上是完全可能的，但我倾向于怀疑有更好的解决方案。大多数情况下，如果有多个相关游标，这意味着调用代码正在手动编码某种连接操作。如果是这种情况，最好让 Oracle 执行连接并返回单个`REf CURSOR`.

# mysql - MYSQL中的数据排序问题

> ID：10156541
> 
> 赞同：0
> 
> 时间：2012-04-14T19:14:34.743
> 
> 标签：mysql, sql, sql-order-by

遇到了一个小问题，希望有人能帮帮我。

我在 MYSQL 中有以下数据集：

```
SELECT * FROM account;

pk  |  customer
1   |   1
2   |   0
3   |   1 
```

我只需要客户列，但我需要它与上面的顺序相同，例如：

```
customer
1
0
1 
```

但是，每当我尝试执行以下命令时，都会得到以下信息：

```
SELECT customer FROM account

customer
0
1
1 
```

我已经尝试过以下方法，但没有成功：

```
SET @rownum=0;
SELECT @rownum:=@rownum+1 as rank, customer FROM account

rank |  customer
1    |   0
2    |   1
3    |   1 
```

更新：我忘了添加一些重要的东西。我不能依赖按主键排序，主要是因为在某些情况下主键可能是 varchar 而不是整数。

我需要将数据插入数据库的顺序。当我执行返回 varchar 值的相同查询时，它的顺序正确。

有任何想法吗？

**答：[SQL查询没有按问题排序](https://stackoverflow.com/questions/1541907/sql-query-no-order-by-question)**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T19:16:12.197

```
SELECT customer FROM account ORDER BY pk ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:16:42.453

```
SELECT * FROM account
ORDER BY pk; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T19:16:59.160

您可以在不选择该列的情况下定义顺序。所以，用这个

```
SELECT `customer` from `account` ORDER BY `pk` ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T19:18:46.653

使用这个 sql：

```
SELECT customer FROM account order by PK 
```

# vb.net - 输入字符串的格式不正确

> ID：10156547
> 
> 赞同：0
> 
> 时间：2012-04-14T19:15:18.780
> 
> 标签：vb.net, sql-server-2005

> 输入字符串的格式不正确。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.FormatException：输入字符串的格式不正确。
> 
> 源错误：
> 
> 第 30 行：lbl_userName.Text = objReader.Item(0) & " " & objReader.Item(1)
> 第 31 行： lbl_resumeHead.Text = objReader.Item(3)
> 第 32 行： lbl_experience.Text = Convert.ToInt32(objReader.Item (4))

如何显示`Integer`表格中的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T19:18:04.747

您`objReader.Item(4)`不包含有效的整数值 - 它可能是`DBNull.Value`, `String.Empty`, 浮点值或其他值：

```
Convert.ToInt32(objReader.Item(4)) 
```

顺便说一句 - 您应该使用字段名称而不是使用序数 - 这可以确保您使用的是正确的字段。

如果您知道字段名称，请使用它：

```
Convert.ToInt32(objReader("MyIntegerField")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:18:31.713

```
Convert.ToInt32(objReader.Item(4)) 
```

这假设来自数据库的值可以转换为整数。如果它是一个无法解析的字符串`DbNull`，等等，它将失败。

[文档](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)中的更多示例。

# r - adjustOHLC - 需要通过代码的字符向量循环的解决方案

> ID：10156552
> 
> 赞同：2
> 
> 时间：2012-04-14T19:15:46.463
> 
> 标签：r, lapply, quantmod, financial

我想做的事情相当容易，但我无法弄清楚。我想我可以做类似于[这里概述的事情](https://stackoverflow.com/questions/8562197/quantmod-save-tickers-to-files-in-a-loop-or-lapply)

我有一个由 .xts 返回的 xts OHLC 对象的股票代码字符向量`getSymbols`。我想遍历符号中的每个代码并将符号传递给以`adjustOHLC`调整拆分：

```
symbols = c("FCX", "SPY")

for(symbol in symbols){
  return(adjustOHLC(symbol,adjust =c("split"), use.Adjusted=FALSE))
} 
```

似乎`adjustOHLC`没有*抓住*变量“符号”的值：

```
debug: div <- getDividends(symbol.name)
Browse[2]> symbol.name
[1] "symbol"
Browse[2]> 
Error in download.file(paste(yahoo.URL, Symbol.name, "&a=", from.m, "&b=",  : 
  cannot open URL 'http://ichart.finance.yahoo.com/table.csv?s=symbol&a=0&b=01&c=1970&d=3&e=14&f=2012&g=v&ignore=.csv'
In addition: Warning message:
In download.file(paste(yahoo.URL, Symbol.name, "&a=", from.m, "&b=",  :
  cannot open: HTTP status was '404 Not Found' 
```

如果我使用`get(symbols)`，我会得到相同的结果（我在本文顶部显示的链接中使用了类似的方法）：

```
for(symbol in symbols){
  return(adjustOHLC(get(symbol),adjust =c("split"), use.Adjusted=FALSE))
}

debug: div <- getDividends(symbol.name)
Browse[2]> symbol.name
[1] "get(symbol)"
Browse[2]> 
Error in download.file(paste(yahoo.URL, Symbol.name, "&a=", from.m, "&b=",  : 
  cannot open URL 'http://ichart.finance.yahoo.com/table.csv?s=get(symbol)&a=0&b=01&c=1970&d=3&e=14&f=2012&g=v&ignore=.csv'
In addition: Warning message:
In download.file(paste(yahoo.URL, Symbol.name, "&a=", from.m, "&b=",  :
  cannot open: HTTP status was '404 Not Found' 
```

我想我也可以利用`lapply`它来加快速度，但我认为我首先遇到了上述问题。

`lapply(symbols, function(x) adjustOHLC(x, adjust=c("split"), use.Adjusted=FALSE) )`

似乎很容易 - 如果这太微不足道了，我深表歉意。感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T21:14:59.940

的`x`参数`adjustOHLC`应该是一个 xts 对象。因此，您需要使用`get`它来获取它。但是，如果 yahoo 股票代码不同于 xts 对象的名称（`get(symbol)`在这种情况下），那么您需要使用该`symbol.name`参数。此外，您需要在 for 循环中分配值，因为 adjustOHLC 不像“auto.assign”那样`getSymbols`。

```
symbols = c("FCX", "SPY")
getSymbols(symbols, src='yahoo')
for(symbol in symbols){
  assign(symbol,adjustOHLC(get(symbol, pos=.GlobalEnv), symbol.name=symbol, 
                           adjust=c("split"), use.Adjusted=FALSE))
} 
```

既然你提到了使用 lapply，这里是你如何使用它

```
adjusted.list <- lapply(symbols, function(x) {
  adjustOHLC(get(x, pos=.GlobalEnv), symbol.name=x, adjust=c("split"), 
             use.Adjusted=FALSE)
})
names(adjusted.list) <- symbols 
```

# jquery - jQuery统一不会设计输入类型=文本元素

> ID：10156557
> 
> 赞同：0
> 
> 时间：2012-04-14T19:16:33.523
> 
> 标签：jquery, uniform

此图显示输入类型=文本不会由统一库设计。 ![在此处输入图像描述](../Images/e67ae7f9b3d03895a129c440a54b0f83.png)

这是代码：

```
<html>
<head>
    <meta charset="utf-8" />
    <title>Log On</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.uniform.min.js" type="text/javascript"></script>
    <link href="/Content/JqueryUniform/Aristo/css/uniform.aristo.css" rel="stylesheet" type="text/css" />
     <script type="text/javascript" charset="utf-8">

         $(document).ready(function () {

             $("input, textarea, select, button").uniform();

         });

    </script>
   </head>
<body>
<form action="/Affiliates/LogOn" method="post">    <div id="login">
            <div class="editor-label">
                <label>User Name</label>
            </div>
            <div class="editor-field">
                <input  style="width:90%" type="text" name="UserName" id="UserName" />
                <br /><br />
            </div>
            <div class="editor-label">
                <label>Password</label>
            </div>
            <div class="editor-field">
                <input style="width:90%" type="password" name="Password" id="Password" />
            </div>
            <div class="editor-label">
                <label style="padding-top:3px;" >Remember Me</label>
                <input type="checkbox" name="RememberMe" id="RememberMe" />
            </div>
    </div>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:33:13.677

Uniform 在 1.5 版中不进行文本输入或文本区域。写这个的时间。统一样式：选择（下拉）、复选框、单选按钮、文件上传输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:46:26.503

可能脚本没有加载，尝试重写库的路径：

```
<script src="Scripts/jquery.uniform.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T19:21:02.563

使用它，它可能会起作用：

```
input[type=password]
$("input, input[type=password], textarea, select, button").uniform(); 
```

# c# - 如何使用 Stream Writer 检查和写入不同的 linepart

> ID：10156563
> 
> 赞同：1
> 
> 时间：2012-04-14T19:17:07.803
> 
> 标签：c#, asp.net, forms, stream

我正在尝试使用 Stream Writer 写入特定的行部分，这是我目前所拥有的：

### 异常消息给了我：索引超出了数组的范围。

```
private void WriteData(string playerName)
    {
        StreamWriter nameWriter = null;
        StringBuilder sb = new StringBuilder();

        try
        {
            string line = "";
            string namePartOne = line.Split(DELIMITER)[0];
            string namePartTwo = line.Split(DELIMITER)[1];
            if (namePartOne != EMPTY)
            {
                namePartTwo = playerName;
                string[] gameState = { namePartOne, namePartTwo, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY };
                sb.Append(gameState);
                nameWriter.WriteLine(String.Join(",", gameState));
            }
            else
            {
                nameWriter = new StreamWriter(filepath, true);
                string[] gameState = { playerName, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY };

                nameWriter.WriteLine(String.Join(",", gameState));
            }
        }
        catch (Exception ex)
        {
            txtTextBox2.Text = "The following problem ocurred when writing to the file:\n"
               + ex.Message;
        }
        finally
        {
            // Closing the StreamWriter should close it 
            // AND its underlying FileStream
            if (nameWriter != null)
                nameWriter.Close();
        }
    } 
```

我试图把它放到我的文本文件中：

```
playerOneName, playerTwoName, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY, EMPTY 
```

基本上，这个作家习惯于从他的浏览器中写出玩家二的名字，并从另一个浏览器/标签中写出玩家二的名字。我首先要检查玩家的名字是否写在第一个字段中，如果是，我会在第二个字段中写第二个玩家。其他字段留空以描述游戏运行时的游戏状态。

我可能有逻辑问题，如果你看到任何问题，请指出。我可以使用正则表达式来比较和验证我的球员在场吗？

我需要先流式读取此文件，然后才能流式写入文件，对吗？

我正在使用 APS.NET 网站和表单运行 Visual Studio '08。

## 谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:21:34.300

```
string line = "";
string namePartOne = line.Split(DELIMITER)[0];
string namePartTwo = line.Split(DELIMITER)[1]; 
```

这将导致索引越界错误，因为您正在拆分一个空字符串（这将返回一项），然后尝试访问该一项列表的第二项。

另外，我可以建议而不是使用StringBuilder，只是做

```
String.Join(",", gameState); 
```

创建您的输出字符串。

这是一个可能的整体解决方案（对任何错误表示歉意，因为我手头没有编译器）：

```
List<String> gameState;
using (var reader = new StreamReader(filename))
    gameState = reader.ReadLine().Split(new[] {','});

if (gameState[0] == "")
    gameState[0] = playerName
else
    gameState[1] = playerName;

using (var writer = new StreamWriter(filename))
    writer.WriteLine(String.Join(",", gameState)); 
```

注意：'using' 是获得 try/finally 的一种方便方法，它可以免费关闭流（尽管您仍然必须捕获异常）。

# c++ - openMP - 需要原子或缩减子句

> ID：10156564
> 
> 赞同：0
> 
> 时间：2012-04-14T19:17:11.047
> 
> 标签：c++, multithreading, multiprocessing, openmp

我正在使用 openMP 来并行化一些语句。我正在使用*并行*构造。并行化的 for 循环如下所示：

```
double solverFunction::apply(double* parameters_ , Model* varModel_)  
{
     double functionEvaluation = 0;
     Command* command_ = 0;
     Model* model_ = 0;

     #pragma omp parallel for  shared (functionEvaluation) private (model_,command_)
     for (int i=rowStart;i<rowEnd+1;i++)
     {
         model_ = new Model(varModel_);
         model_->addVariable("i", i);
         model_->addVariable("j", 1);
         command_ = formulaCommand->duplicate(model_);
         functionEvaluation += command_->execute().toDouble();
     }
} 
```

*平均而言*，这是有效的。执行时间*大大*减少，结果*符合预期*。但是，有时，尤其是对于大问题（i 上的大量迭代，复制构造函数调用中要复制的大量数据）

```
 model_ = new Model(varModel_); 
```

，其他人？），它崩溃了。调用堆栈以 qAtomicBasic（它是用 C++/Qt 编写的程序）、QHash 等类结束，我知道它会因为内存中的并发读/写访问而崩溃。

但是，model_ 和 command_ 是私有的，因此每个线程处理每个线程的副本。在变量 model_ 中，我复制了 varModel_，以便线程不会更改传入参数的指针。同样，command_ 是成员变量 formulaCommand 的副本（duplicate 大致是一个复制构造函数）。

我发现的代码中可能存在的缺陷是

*   functionEvaluation 可以被多个线程同时修改

*   语句中的复制构造函数

    模型_ = 新模型（varModel_）；

读取内存中 varModel_ 的成员以构造新的 (model_) 实例。对 varModel_ 数据成员的并发访问可能会发生，尽管这不是要在此处更改它们的值，而只是读取它们（将它们影响到其他变量）。

另外，我只看到了两项改进（我要几天才能测试，但无论如何我征求意见）：

*   添加 atomic 子句，使得 functionEvalution 不会同时写入

*   添加 operator reduction(+,functionEvaluation)，以便自动处理有关访问 functionEvaluation 的并发

这些解决方案是否似乎准确地解决了问题，并且总体上哪个更有效？我写的代码哪里有问题？什么是解决方案？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:49:29.967

第一个观察结果是，正如您自己注意到的那样，`functionEvaluation`同时修改是一个坏主意。它*会*失败。

`varModel_`另一方面，只读访问不是问题。复制构造函数调用也不是（但它在哪里？您的代码没有显示它）。

不相关地，在 C++ 中使用该`private`子句是一个坏主意。只需在并行块（在本例中为循环）*内*声明线程私有变量。`for`

我也不明白你为什么在这里使用指针。它们的使用没有直接意义——而是使用堆栈分配的对象。

以下修改后的代码应该可以工作（我还冒昧地统一了编码风格……为什么尾随下划线？）：

```
double solverFunction::apply(double parameters, Model const& varModel)
{
     double result = 0;

     #pragma omp parallel for reduction(+:result)
     for (int i = rowStart; i < rowEnd + 1; ++i)
     {
         Model model(varModel);
         mode.addVariable("i", i);
         mode.addVariable("j", i);
         Command command = formulaCommand->duplicate(model);
         result += command.execute().toDouble();
     }

     return result;
} 
```

请注意，由于固有的浮点不准确性，此代码可能会产生与顺序代码*不同*的结果。这是不可避免的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T19:59:18.230

并发修改`functionEvaluation`绝对是您的代码中的一个问题，处理它的最佳方法是`reduction`子句。

另一个问题是，您通过`new`并行调用来分配堆内存，这对于许多迭代来说从来都不是一个好主意，因为调用`new`. 考虑切换到堆栈分配，因为堆栈是每个线程私有的，而堆是共享的。

# c++ - 破坏 Glib::RefPtr 会导致 GTK 3 核心中的断言失败

> ID：10156565
> 
> 赞同：7
> 
> 时间：2012-04-14T19:17:23.467
> 
> 标签：c++, memory-management, gtk, gtkmm, gtk3

来自 Gtkmm 的人正在[比较](http://developer.gnome.org/gtkmm-tutorial/3.2/chapter-refptr.html.en) ：`Glib::RefPtr``std::auto_ptr<>`

> `Glib::RefPtr`是一个智能指针。具体来说，它是一个引用计数智能指针。您可能熟悉`std::auto_ptr<>`，它也是一个智能指针，但`Glib::RefPtr<>`更简单，更有用。

但由于某些奇怪的原因，我无法使用`RefPtr`. 相同的代码适用于`auto_ptr`.

在下面的代码中，`SmartPtr`只是这两个智能指针之一的占位符。

```
#include <gtkmm.h>
#include <iostream>
#include <tr1/memory>

struct WindowHolder {
  SmartPtr<Gtk::Window> ptr;

  WindowHolder()
    : ptr(new Gtk::Window)
  {
    ptr->signal_delete_event().connect(sigc::mem_fun(*this, &WindowHolder::reset));
    ptr->show_all();
  }

  bool reset(GdkEventAny* event)
  {
    Gtk::Main::quit();
  }
};

int main(int argc, char *argv[])
{
  Gtk::Main kit(argc, argv);
  WindowHolder w;
  kit.run();
} 
```

编译的时候，我先定义`SmartPtr`为`Glib::RefPtr`，再定义为`std::auto_ptr`。

```
$ g++ '-DSmartPtr=Glib::RefPtr' `pkg-config --cflags --libs gtkmm-3.0` main.cc && ./a.out 
(main:22093): GLib-GObject-CRITICAL **: g_object_unref: assertion `G_IS_OBJECT (object)' failed
$ g++ '-DSmartPtr=std::auto_ptr' `pkg-config --cflags --libs gtkmm-3.0` main.cc && ./a.out 
$ 
```

问题是这样的`GLib-GObject-CRITICAL`。在我的实际应用程序中，这不仅仅是一行，而是一大堆。在第二个版本中，`std::auto_ptr`一切都被破坏得很好。

奇怪的代码在 GTK 2 中就很好了：

```
$ g++ '-DSmartPtr=Glib::RefPtr' `pkg-config --cflags --libs gtkmm-2.4` main.cc && ./a.out 
$ 
```

我不想依赖，`std::auto_ptr`因为它已被弃用，我也不想使用原始指针，因为这样析构函数必须手动删除指针，这会增加额外的复杂性......

我的问题是：

1.  为什么会导致`Glib::RefPtr`这个“严重警告”（可能是双重免费）？
2.  为什么它适用于 gtkmm 2.4 但不适用于 3.0？
3.  我可以用`Glib::RefPtr`gtkmm 3.0 修复代码吗？
4.  我一般应该如何处理这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T20:14:17.093

Glib::RefPtr 不适合一般用途。当 API 强制您使用时，您应该使用它，但不是其他情况。GtkWindow（或 Gtk::Window）有它自己的奇数内存管理，它与 RefPtr 并不真正兼容。

如果你想要一个通用的智能指针，试试 std::shared_ptr 或 std::unique_ptr。或者你可以在 boost 中找到一些东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T23:43:44.520

引用计数太低，您可以通过添加`ptr->reference()`after来修复它`ptr->show_all()`。我有一个解释，但要持保留态度：

*   Glib::RefPtr 最初不会增加其对象的引用计数。
*   GtkWindow 最初的引用计数为 1。
*   当您的窗口关闭时，该库会减少其 GtkWindow 的引用计数一次。
*   由于 GtkWindow 的计数为零，因此它被销毁。
*   kit.run() 看到没有更多的窗口，返回。
*   w 超出范围并且 RefPtr 的对象计数减少，从而导致错误。

不幸的是，我不能真正回答 #2 或 #4，因为 gtk/gtkmm 的这个区域仍然有点神秘（对我来说）。

参考：[http ://www.gtkforums.com/viewtopic.php?t=2412](http://www.gtkforums.com/viewtopic.php?t=2412)

# java - 填充 JTable 和 JTextField 的问题

> ID：10156566
> 
> 赞同：0
> 
> 时间：2012-04-14T19:17:34.107
> 
> 标签：java, user-interface, nullpointerexception, awt

我有代表各种类型节目类型（喜剧、戏剧等）的各种课程。

我有一个填充了“-”分隔值的文本文件，这些值由一个名为 Processing 的类读取，并将它们放入 LinkedList 中。

我有另一个创建 GUI 的类 GUI_g。它有 2 个 JTable。一个用于列表，1 个用于通道。JTable listTable 从linkedlist 中填充，每当用户点击一行时，文本字段的文本都会相应更改。

我尝试了 5 个字段（标题、流派和时长、演员、导演）并且它起作用了，3 个文本字段根据单击的行显示不同的文本。但是，当我添加所有需要的值时，会出现错误并且没有填写任何字段。

我有两个问题：

如果它是 MusicVideo，则单元格未填充（应该如此），但是在将数据复制到 JTextFields 时会返回错误 Snyopsis 列保持为空且未填充。以下是类（主要使用的类）。如果你需要其他人告诉我，我会上传。

GUI_g：[http](http://pastebin.com/KsZBwgtR) : //pastebin.com/KsZBwgtR ProgramTableModel： [http](http://pastebin.com/6Rc2bVxa) ://pastebin.com/6Rc2bVxa 处理：[http](http://pastebin.com/8f8iteVK) ://pastebin.com/8f8iteVK 程序： [http ://pastebin.com/NU3XGvM8](http://pastebin.com/NU3XGvM8)

这是我得到的错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at GUI_g$1.mouseClicked(GUI_g.java:205)
    at java.awt.AWTEventMulticaster.mouseClicked(AWTEventMulticaster.java:270)
    at java.awt.Component.processMouseEvent(Component.java:6507)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4501)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

图片示例：

![在此处输入图像描述](../Images/2ae036fdc82dcf61f19e0d9310b182dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:25:14.593

问题是您的 GUI_g 类中的第 205 行（如编译器所述）。

```
String actor = listTable.getValueAt(row, column+3).toString(); 
```

在尝试使用 toString() 方法之前，您没有检查或清理输入值。

当然，您不能对空值使用方法。

您需要检查所有输入（不仅仅是这个）。由于您有很多字段，您应该创建一个辅助方法/类来为您执行此操作并返回一个干净的输入。

如果您只想快速解决这个问题，请执行以下操作：

```
String actor = " ";
T input = listTable.getValueAt(row, column+3);
if (input != null) actor = input.toString();
return actor; 
```

将“T”替换为您要检查的任何对象。

# jquery - 使用 Jquery 滑动和淡入淡出中心

> ID：10156576
> 
> 赞同：0
> 
> 时间：2012-04-14T19:18:52.553
> 
> 标签：jquery, jquery-animate, center, fade, slide

所以我想要什么。

将有一些内容以页面为中心（水平和垂直）。用户将能够单击以加载上一个/下一个内容。此内容将使用 Ajax 动态加载。

什么时候

接下来的一切都会反过来>

为了使内容居中，我使用 jQuery，因为我不知道内容的大小。

这是我正在使用的代码：

```
 // Jquery, CENTER
jQuery.fn.center = function () {
    this.css("position","absolute");
    this.css("top", ( $(window).height() - this.height() ) / 2+$(window).scrollTop() + "px");
    this.css("left", ( $(window).width() - this.width() ) / 2+$(window).scrollLeft() + "px");
    return this;
}

$("div.item1").center(true); 
```

为了确保它在浏览器调整大小时居中，我正在使用：

```
$(window).bind('resize', function() {
    var that = this;

    if (!('balancer' in that)) {
        that.balancer = setTimeout(function() {
            $("div.item1").center(true);           
            delete that.balancer;
        }, 200);
    }
}); 
```

我尝试使用此代码来执行所需的动画。到目前为止还没有运气。item1 出现了我想要的样子，但不是在正确的位置（左边：-=100 推迟）

```
$('.item1').animate({
    opacity: 1,
    left: '-=100'
}, 1000);

$('.item2').animate({
    opacity: 1,
    left: '+=100'
}, 1000); 
```

我在这里设置了一个 jsfiddle 来显示我在哪里：

[http://jsfiddle.net/GmRJ9/](http://jsfiddle.net/GmRJ9/)

总的来说，我对我的 jQuery 不太感兴趣，所以对我来说轻松一点，但我觉得它并不太复杂。

然而，我想将它与动态加载项目一起使用这一事实可能会导致一些问题。所以考虑到这一点，我可能应该问我是否以正确的方式处理这个问题？

任何指导将不胜感激！提前致谢，

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T19:38:48.737

首先挣扎我怀疑中间的公式。但是让容器成为一个矩形（改变高度！）你会看到它正在工作。
您还看到，当去掉`margin`for`item1`时，两个项目的位置行为相同。

所以假设JS很好，我想可能是一些CSS错误。一些隐藏的边距或填充，但将两者都设置为零显示什么。

在为开发人员工具交换浏览器之后，我重复了这些步骤并意识到这些项目似乎是相对于容器放置的。

```
<div class="container"></div>
<div class="item1">
    <p>item1</p>
</div>
<div class="item2">
    <p>item2</p>
</div> 
```

[答对了！](http://img.ehowcdn.com/article-new/ehow/images/a06/h5/uo/safety-bingo-rules-1.1-800x800.jpg)

这是一个延迟 2 秒的示例。我总是很难正确设置超时。可能很高兴看到它 =) [http://jsfiddle.net/3xLAD/](http://jsfiddle.net/3xLAD/)
奇怪的是我无法`margin-top`通过 CSS 设置项目。这使得 div 稍微水平移动（ò.O）-> [http://jsfiddle.net/9ydrQ/](http://jsfiddle.net/9ydrQ/)

# ruby-on-rails - 在 Rails 应用程序中使用 pdfkit 时遇到问题

> ID：10156579
> 
> 赞同：0
> 
> 时间：2012-04-14T19:19:03.957
> 
> 标签：ruby-on-rails, ruby, pdfkit

我需要使用 pdfkit gem。我已经安装了 gem 和 wkhtmltopdftool，如 gem githubpage 中所写。（我使用自制软件安装了 wkhtmltopdf）。现在，我正在做关于 pdf 套件的 railscast 中所说的任何事情。但是当我添加扩展

> .pdf

到我的网址。它开始加载，没有任何反应。加载永远不会完成，除非我关闭 Rails 服务器。此外，当我开始加载 .pdf 网址时。我已经启动了 wkhmtltopdf 进程。（面板中也出现了 wkhtmltopdf 的图标）我做错了什么？我正在使用 rails 3.1.2 和 ruby​​ 1.9.2。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:55:16.040

它可能类似于[我最近遇到的一个问题](https://stackoverflow.com/questions/10045327/pdf-generation-hangs-using-pdfkit-and-wkhtmotopdf)，它挂在 javascript 处理上。尝试从您的 HTML 中删除任何 javascript 包含标签，看看是否至少可以让 PDF 呈现。如果这行得通，那么你至少有一个起点。

# c++ - clang iostream - 找不到符号

> ID：10156582
> 
> 赞同：11
> 
> 时间：2012-04-14T19:19:16.517
> 
> 标签：c++, linker, iostream, clang

所以我试图让`clang`编译器工作..我自然的首选程序是以下极其复杂的代码：

```
#include <iostream>
using std::cout;    using std::endl;
/* hello world.cpp */
int main()
{
    cout << "Hello, world!" << endl;
    return 0;
} 
```

在命令行上我做了：`clang helloworld.cpp`我得到以下很好的错误：

```
Undefined symbols for architecture x86_64:
  "std::ios_base::Init::~Init()", referenced from:
      ___cxx_global_var_init in cc-4iziZq.o
  "std::ios_base::Init::Init()", referenced from:
      ___cxx_global_var_init in cc-4iziZq.o
  "std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&)", referenced from:
      _main in cc-4iziZq.o
  "std::cout", referenced from:
      _main in cc-4iziZq.o
  "std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)", referenced from:
      _main in cc-4iziZq.o
  "std::ostream::operator<<(std::ostream& (*)(std::ostream&))", referenced from:
      _main in cc-4iziZq.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

怎么了？谢谢！-kstruct

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-14T19:21:36.843

`clang`是一个C编译器。您需要使用`clang++`或使用`-x c++`标志。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-26T02:53:10.543

> clang 是一个 C 编译器。您需要使用 clang++ 或使用 -x c++ 标志。

仍然需要添加**-lstdc++**。

我通过**-v**选项解决了这个问题。我发现差异是：

铿锵++

> -lstdc++ -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc

铛

> -lgcc --as-needed -lgcc_s --no-as-needed -lc -lgcc --as-needed -lgcc_s --no-as-needed

# ios - iOS 应用 url 方案列表

> ID：10156583
> 
> 赞同：1
> 
> 时间：2012-04-14T19:19:23.020
> 
> 标签：ios, url-scheme

任何人都知道我在哪里可以获得此应用程序的 url 方案列表：

*   潘多拉

*   Spotify

*   最后一个.fm

我在下面找到了这个链接，但我认为这不是 url 方案的完整列表：

1.  [http://handleopenurl.com/scheme/pandora](http://handleopenurl.com/scheme/pandora)

2.  [http://handleopenurl.com/scheme/last-fm](http://handleopenurl.com/scheme/last-fm)

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:35:45.683

苹果文档指出没有完整的列表，尽管 [http://wiki.akosma.com/IPhone_URL_Schemes](http://wiki.akosma.com/IPhone_URL_Schemes)似乎有一个广泛的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-26T15:54:24.550

希望这是您正在寻找的：

*   潘多拉：`pandorav2://`
*   Spotify：`spotify://`
*   最后一个.fm：`lastfm://`

# transparency - 重叠的半透明元素？

> ID：10156584
> 
> 赞同：1
> 
> 时间：2012-04-14T19:19:44.770
> 
> 标签：transparency

我希望重叠的区域与其余区域具有相同的不透明度。这是我在 CSS 中的代码，它创建了一个比其他区域更暗的重叠区域：

```
.title {
    width: 497px;
    height: 252px;
    font-family:'Bebas';
    text-align:right;

}
.title span {
    line-height:54px;
    font-size: 40px;
    position: relative;
    top: 72px;
    background:rgba(193,193,193,.3);
    color: white;
    padding:3px;
    text-align:right;
} 
```

和 HTML：

```
<div class="title">
    <span>This is where</span><br>
    <span>the content goes</span>
</div> 
```

那么，如何在不使用图像的情况下使重叠区域具有相同的不透明度呢？

# list - 使用 map 将列表的元素替换为 (xy)*(xy)，其中 y 是初始元素

> ID：10156586
> 
> 赞同：7
> 
> 时间：2012-04-14T19:19:49.043
> 
> 标签：list, haskell, dictionary

我有一些功课要做，而且我是 Haskell 的新手。我遇到的问题是编写一个函数，当给定一个整数`x`和一个整数列表时，它适用`(x-y)*(x-y)`于列表中的每个元素并输出新列表，`y`作为输入列表的每个元素。

我有一个非常粗略的想法，我将不得不使用该`map`功能，但我不确定如何去做。

我一直在查看对列表中的每个元素进行平方的示例，并且有点理解它是如何工作的，但是作为当前元素，我将如何实现它`(x-y)*(x-y)`完全`y`让我感到困惑。

```
squares :: [Int] -> [Int]
squares (x:xs) = x * x : squares xs
squares [] = [] 
```

我提出的确切问题是，

> 编写一个函数，它接受一个整数和一个整数列表`rela`作为参数。`x`它返回一个类似的列表，但是每个元素`y`都被替换为`(x-y)*(x-y)`，例如
> 
> ```
> Main> rela 2 [3,5,7]
> [1,9,25] 
> ```

* * *

在阅读了一些书籍后，我设法让它工作了，但是我编写的代码错过了列表中的第一个元素。任何解释为什么？

```
equation1 :: Int -> Int -> Int
equation1 x y = (x-y)*(x-y)
rela :: Int -> [Int] -> [Int]
rela x [] =[]
rela x (y:ys) = [ equation1 x y | y <- ys ] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-14T21:53:46.350

你了解 lambda 函数吗？

```
map (\val -> the function) xs 
```

是你需要的。

currying 更好，但没那么简单。

编辑：

更多概念...

map 向下迭代一个应用函数的列表。

```
map (+ 3) xs 
```

使用上面提到的柯里化技术。您还可以：

```
map (\x -> x + 3) xs 
```

完成同样的事情。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-14T19:26:01.863

首先，您可能应该创建一个单独的函数来执行您想要的操作。

例如

```
f x y = (x-y)*(x-y) 
```

现在，每次你在 Haskell 中创建一个带有多个参数的函数时，它实际上都会“curries”这个函数，这意味着当你应用第一个参数时你会得到一个新函数。

所以，你会通过这样做得到一个新功能

```
g = f 5 
```

表达式`f 5`实际上是一个函数

您可以将数字应用于“g”，x 将始终为“5”

因此，如果我们想创建一个函数，它接受两个参数“x”和“y”，并应用于`(x-y)*(x-y)`一个列表，其中 y 是当前元素，那么我们需要做的就是以下内容：

```
f x y = (x-y)*(x-y)
squareDifference x = map (f x) [1,2,3,4] 
```

您可以通过调用`squareDifference 5`或任何其他数字作为参数来使用它

更通用的版本也允许您传入列表

```
squareDifference x xs = map (f x) xs 
```

你会这样做`squareDifference 3 [1,2,3]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T03:36:20.830

简单的例子：

```
rela :: Int -> [Int] -> [Int]
rela x = map (\y -> (x-y)*(x-y)) 
```

或者你可能想要任何变态？-) 这里有应用程序：

```
import Control.Applicative
rela :: Int -> [Int] -> [Int]
rela x = map $ (*) <$> (x-) <*> (x-) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-09T12:11:06.220

你好，我猜你的意思是这样的：

```
Prelude> let rela n = map (\ x -> (x - n)^2)
Prelude> rela 2  [3,5,7] 
[1,9,25] 
```

# xcode - 用于代码分离的 XCode

> ID：10156588
> 
> 赞同：0
> 
> 时间：2012-04-14T19:20:05.573
> 
> 标签：xcode, core-data

我正在为我的 iOS 应用程序构建后端和前端代码。前端代码将为 iPhone 和 iPad 构建。但后端代码将是相同的。我的少数开发人员在后端工作，一些在前端工作。后端，应用程序使用 CoreData。我正在考虑将后端代码创建为静态库并将其链接到前端代码中。但这似乎太复杂了。是否有任何其他机制，例如，后端项目说 P1 构建为空应用程序，前端构建为 P2。并且以某种方式确保 P1 不能使用 P2 中的任何类/文件/代码（意味着 P1 不依赖于 P2），但 P2 可以使用 P1 中的类/API 等。我想强制 P1 不会（无意中）使用任何 P2 代码来清理依赖项分离。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:48:28.313

我认为静态库是一个很好的解决方案。就像您可以创建一个帮助类来从核心数据数据库中获取数据一样。例如：

```
+ (NSArray *)fetchAllUsers;
+ (User *)fetchUserByName:(NSString *)name; 
```

前端开发者只知道可以调用这些方法。后端开发人员负责该方法的工作。

如果您需要实例化，请考虑使用[单例](https://stackoverflow.com/questions/145154/what-does-your-objective-c-singleton-look-like)类。

编辑：（静态核心数据类的示例）

```
+ (void)insertNewUserWithName:(NSString *)name
{
    NSManagedObjectContext *context = [self managedObjectContext];

    User *user = [NSEntityDescription insertNewObjectForEntityForName:@"Users" 
                                                 inManagedObjectContext:context];

    [user setName:name];

    NSError *error;
    if (![context save:&error]) 
    {
        NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
    }
} 
```

# xcode - 存储 NSUserDefaults (Xcode) 时避免重复

> ID：10156590
> 
> 赞同：2
> 
> 时间：2012-04-14T19:20:36.173
> 
> 标签：xcode, duplicates, nsuserdefaults

将我的数据保存到 NSUserDefaults 避免重复条目的最佳方法是什么？这是我现在在 viewWillAppear 中所做的事情。我正在存储字典数据的各个条目。我不知道这是否是最好的方法和建议以及如何避免重复的信息。

```
//
// Keep track of photos that have been viewed by storing the photo data in NSUserDefaults.
//
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSMutableArray *recentlyViewed = [[defaults objectForKey:RECENTLY_VIEWED_KEY] mutableCopy];
if (!recentlyViewed) recentlyViewed = [NSMutableArray array];        
[recentlyViewed addObject:self.imageDict];

//
// Keep only MAX number of recently viewed photos.
//
while (recentlyViewed.count > RECENTLY_VIEWED_MAX) {
    [recentlyViewed removeObjectAtIndex:0];
}

//
// Write the array back to NSUserDefaults and synchronize it.
//
[defaults setObject:recentlyViewed forKey:RECENTLY_VIEWED_KEY];
[defaults synchronize]; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-04T10:50:01.993

如果您的意思是如何确保不存储重复项，那么最贪婪和最简单的方法（对于大量数据不是最有效的）是：

```
 1\. Get the current values from NSUserDefault into a NSMutableArray
 2\. Check in a for loop if any of the values from the NSMutableArray match with the value you are trying to save. 
 3\. If it does, replace the old value with new (or don't do anything)
 4\. Save the NSMutableArray back to NSUserDefault. 
```

我就是这样做的，但不建议大值。如果您在主线程上执行此操作并且需要超过 5 秒，则应用程序将被终止。

# python - 无法在 Webfaction 上部署简单的 Flask 应用程序

> ID：10156591
> 
> 赞同：1
> 
> 时间：2012-04-14T19:20:39.193
> 
> 标签：python, flask, webfaction

我一直试图让 Flask 在我的 webfaction 服务器上工作几个小时，但没有任何结果。

我按照[http://flask.pocoo.org/snippets/65/上的说明进行操作](http://flask.pocoo.org/snippets/65/)

我的 index.py 文件存储在 htdocs 下。

```
import sys
yourappname = "/home/<myusername>/webapps/myapp/htdocs"
if not yourappname in sys.path:
    sys.path.insert(0, yourappname)

from yourappname import app as application 
```

然后我将它添加到我的 httpd.conf 文件中：

```
WSGIPythonPath /home/yourusername/webapps/yourapp/htdocs/
#If you do not specify the following directive the app *will* work but you will
#see index.py in the path of all URLs
WSGIScriptAlias / /home/yourusername/webapps/yourapp/htdocs/index.py

<Directory /home/yourusername/webapps/yourapp/htdocs/>
   AddHandler wsgi-script .py
   RewriteEngine on
   RewriteBase /
   WSGIScriptReloading On
</Directory> 
```

然后我在 index.py 旁边的同一个 htdocs 目录中有 myapp.py：

```
from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello World!'

if __name__ == '__main__':
    app.run() 
```

我的域名指向了我在 webfaction 中的项目。默认 index.py 在我按照说明中的说明用新的覆盖之前工作。但是，我只获得了服务器 500。我很抱歉，但在 linux 和管理服务器方面我是一个完全的菜鸟。我什至无法在用户下访问我的错误日志，因为它说我没有权限。

我认为这与我在linux服务器上安装flask有关，我通过easy install安装它说它安装了所有依赖项并且没有给出任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:58:02.333

几个建议：

1.  你不应该在 index.py 中有 yourappname 的任何地方都有 myapp 吗？
2.  另外，我假设您已经在 `WSGIPythonPath /home/yourusername/webapps/yourapp/htdocs
3.  您是否尝试过通过发出`~/webapps/<app_name>/apache2/bin/restart`

# asp.net - ASP.net：在图像渲染期间触发即时客户端脚本

> ID：10156592
> 
> 赞同：0
> 
> 时间：2012-04-14T19:20:41.427
> 
> 标签：asp.net

我有一个在另一个 aspx 页面上创建图形的 Web 应用程序。有时，由于用户规范中存在错误（例如需要整数的字符串），因此无法按照规范创建图形。

我想立即弹出一个警告窗口，告诉他们在我尝试渲染图表时出现了问题。

问题是，我不知道如何立即检查是否应该为警报窗口插入脚本。一旦我在“chart.aspx”（图像 URL）上的代码被执行，我不知道如何立即检查主页是否有任何问题。我知道它发生在chart.aspx 的代码中，但除了不渲染图像或渲染不同的图像之外，我不知道如何在另一个回发之前告诉用户。我真的很想看看在呈现其中一张图像后页面生命周期中是否有任何排序、事件或阶段。

如果这是不可能的，如果它只是一个图像，我如何chart.aspx 将错误消息传达给default.aspx。也许某种 Response.Write(...?)

再次感谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:35:29.723

也许您可以尝试监控图像的加载事件并通过 javascript 处理 onabort 和 onerror？

[http://www.w3schools.com/jsref/dom_obj_image.asp](http://www.w3schools.com/jsref/dom_obj_image.asp)

图像对象事件

```
Event      The event occurs when...  
onabort    Loading of an image is interrupted
onerror    An error occurs when loading an image
onload     An image is finished loading 
```

这样做的老派方法是如下所示呈现您的图像标签：

```
<img src="chart.aspx" onerror="alert('Image failed to load because XYZ.');" /> 
```

如今，我建议您使用 jquery，如下所示：

```
<img src="placeholder.gif" class="chart" alt="chart">

<script type="text/javascript">
    jQuery(function($) {
        var img = $(document.createElement('img'));
        img.on('error', function() { alert ('...'); });
        img.on('load', function() { $('img.chart').attr('src', img[0].src); });
    }); 
```

# javascript - 单击显示 div 出现错误

> ID：10156599
> 
> 赞同：0
> 
> 时间：2012-04-14T19:21:25.903
> 
> 标签：javascript, jquery, html

当我单击 时`div`，它应该打开。当我再次单击时，它应该关闭`div`. 请帮助我。

```
<html>
    <head>
        <script type="text/javascript">
        var bool = 0;
            function showDiv(){
                if(bool==1){
                    bool=0;
                    document.getElementById(show).style.visibility = "hidden";
                }else if(bool==0){
                    bool=1;
                    document.getElementById(show).style.visibility = "visible";
                }
            }
        </script>
    </head>
    <body>
        <input type="button" value="click" onclick="showDiv();" />

        <div="show">
            <p>it is okay it is okay it is okay it is okay it is okay it is okay it is okay it is okay</p>
        </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:24:08.537

您缺少`id`参数的引号`getElementById()`

```
document.getElementById('show').style.visibility = "hidden"; 
```

也`id`缺少属性名称`<div>`

```
 <div="show"> 
```

应该是这样的：

```
<div id="show"> 
```

[jsFiddle](http://jsfiddle.net/puEgC/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:34:31.923

试试这个：

**HTML**

```
<button id="myButton">Show DIV</button>
<div id="show" class="hidden">
    <p>it is okay </p>
</div> 
```

**CSS**

```
.hidden
{
  display:none;
} 
```

**JS**

```
$('#myButton').click(function () {
        $("#show").slideToggle();
        $(this).text($(this).text() == 'Show DIV' ? 'Hide DIV' : 'Show DIV');
        return false;
}); 
```

这是jsfiddle：http: [//jsfiddle.net/mgrcic/RbjLJ/](http://jsfiddle.net/mgrcic/RbjLJ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T19:27:07.900

当你提到

```
document.getElementById(show).style.visibility 
```

`show`指的是一个**变量**，但你试图将它作为一个字符串，所以你应该把它引用

```
document.getElementById('show').style.visibility 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T19:30:50.470

这是解决方案，如果不指定，您将无法获取元素**`div id="theid"`**：

```
<html>
    <head>
        <script type="text/javascript">
        var bool = 0;
            function showDiv(){
            var elem = document.getElementById('show');
            console.log(elem);
                if(bool==1){
                    bool=0;
                    elem.style.visibility = "hidden";
                }else if(bool==0){
                    bool=1;
                    elem.style.visibility = "visible";
                }
            }
        </script>
    </head>
    <body>
        <input type="button" value="click" onclick="showDiv();" />

        <div id="show">
            <p>it is okay it is okay it is okay it is okay it is okay it is okay it is okay it is okay</p>
        </div>

    </body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T19:35:41.600

你写错了div。您应该将“show”作为您的 Id 属性的值：

```
<div id="show"> </div> 
```

如果你使用 jQuery（你标记了它），为什么不使用 jQuery 以一种[不显眼](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)的方式更干净地完成工作呢？

```
$(function(){       
    var bool = 0;
    $("input[type='button']").click(function(){        
        if(bool ==0)
        {
            bool =1
            $("#show").hide();
        }
        else
        {
            bool =0
            $("#show").show();
        }
    });    
}); 
```

这是示例：http: [//jsfiddle.net/sHsuh/10/](http://jsfiddle.net/sHsuh/10/)

请注意，此脚本会将函数绑定到页面中的所有按钮元素。所以我会通过向我的 Button 添加一个 Id 并与之绑定来更具体：

```
$("#myButtonId").click(function(){
  //code goes here
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-14T21:54:42.683

你犯了一些错误：

1.  `<div="show">`是错的。正确的方法是`<div id="show">`。
2.  如果你想要显示和隐藏手段，首先将你的 div 的 CSS 设置为`visibility:hidden;`.
3.  您在 中缺少撇号`document.getElementById('show');`。

试试这个：

```
 <html>
        <head>
            <script type="text/javascript">
            var bool = 0;
                function showDiv(){
                    if(bool==1){
                        bool=0;
                        document.getElementById('show').style.visibility = "hidden";
                    }else if(bool==0){

                        bool=1;
                        document.getElementById('show').style.visibility = "visible";
                    }
                }
            </script>
        </head>
        <body>
            <input type="button" value="click" onclick="showDiv();" />

            <div id="show" style=" visibility:hidden;">
                <p>it is okay it is okay it is okay it is okay it is okay it is okay it is okay it is okay</p>
            </div>

        </body>
    </html> 
```

# ssh - 在 ssh 会话中从本地终端调用程序

> ID：10156600
> 
> 赞同：2
> 
> 时间：2012-04-14T19:21:34.113
> 
> 标签：scp, tramp, ssh, terminal, scp, tramp

在使用 ssh 连接到远程主机时，有什么方法可以调用本地程序吗？我想在两个会话中都可以访问环境，因此打开另一个终端并不理想。

**编辑：**特别是使用将围绕[scp](/questions/tagged/scp "显示标记为“scp”的问题")或使用它的本地程序（即 emacs 扩展[tramp](/questions/tagged/tramp "显示标记为“流浪汉”的问题")）。我想到的两件事：

*   能够`download x.png`在远程机器上打字并将文件拉到我的电脑上。
*   类似的东西`emacs-local file.py`会在我的本地计算机上打开 emacs 并使用 tramp 来编辑`file.py`.

# c++ - 如何在 MSVC++ 中启用警告 C6244？

> ID：10156602
> 
> 赞同：1
> 
> 时间：2012-04-14T19:21:36.073
> 
> 标签：c++, compiler-errors, compiler-warnings

我想在 MSVC++ 中启用[“变量名隐藏”](http://msdn.microsoft.com/en-us/library/35whedce.aspx)警告作为错误，这样这样的事情就会被标记为错误：

```
class A
{
    int var ;
    A()
    {
      int var = 5 ; // HIDING: want this to be an error
    }
} ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T19:23:50.393

您可以使用编译指示指令：

```
#pragma warning(error: 6244)

class A
{
    int var ;
    A()
    {
      int var = 5 ; // HIDING: want this to be an error
    }
} ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T20:17:22.563

for Visual Studio 2010 goto "Project Properties -> C/C++ -> Advanced"

![enter image description here](../Images/298be5e487cef9dacf0db72df9dfd75d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T20:02:07.567

在项目设置的**C++ 属性**页的**高级**选项卡上有一个**将特定警告视为错误**

 ***** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T20:09:26.690

您可以使用`/we`编译器选项将特定错误转换为警告。例如，`/we6244`将使警告 C6244 成为错误。有关详细信息，请参阅[该`/w`选项及其朋友的文档。](http://msdn.microsoft.com/en-us/library/thxezb7y%28v=vs.110%29.aspx)****

# ruby-on-rails - Heroku rails 应用程序在第一个 http 请求时崩溃，但随后可以工作

> ID：10156606
> 
> 赞同：1
> 
> 时间：2012-04-14T19:22:19.240
> 
> 标签：ruby-on-rails, heroku, crash

这真的很烦人。它在本地（开发）工作正常，但是当我将它推送到 Heroku 时，它在第一个 HTTP 请求时崩溃，然后如果我按 F5 它工作正常。因此，当应用程序第一次启动时，它似乎崩溃了。任何建议将不胜感激！

我认为这是 Heroku Log 输出中的错误所在：

2012-04-14T20:09:19+00:00 app[web.1]: Sass::SyntaxError（要导入的文件未找到或不可读：波旁威士忌。

...

2012-04-14T19:08:14+00:00 应用程序 [web.1]:.bundle/gems/ruby/1.9.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30 ：在`method_missing'中

完整的 Heroku 日志输出：[http ://pastebin.com/raw.php?i=rvdkPwzR](http://pastebin.com/raw.php?i=rvdkPwzR)

# java - drawColor(-1) 在 android 中的含义

> ID：10156610
> 
> 赞同：0
> 
> 时间：2012-04-14T19:22:43.170
> 
> 标签：java, android

我正在尝试理解一个 android 代码

mCanvas.drawColor(-1);

-1 是什么意思？它等于什么 RGB 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:32:21.310

该函数似乎不接受任何特殊值，所以我猜这只是指定白色的一些非常晦涩的方式。

-1 的十六进制值是`0xFFFFFFFF`，它只是分解为`R=255, G=255, B=255, A=255`，它是全白的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T19:32:31.480

有符号整数值 -1 对应于无符号整数 0xFFFFFFFF（在 32 位的情况下）。颜色编码为 0xAARRGGBB，因此 -1 表示白色。

# mysql - 在比较年度统计数据时填充缺少日期的 MYSQL 数据？

> ID：10156613
> 
> 赞同：1
> 
> 时间：2012-04-14T19:22:46.183
> 
> 标签：mysql, date

我有一个跟踪已发送电子邮件的表格。这很简单。

身份证 | 日期时间 | 电子邮件 | 主题 | 信息

几年来我一直在收集数据。有些日子我在表中没有任何条目。

查询1：

```
SELECT COUNT(ID) FROM emails
WHERE DATE(datetime) >= 'XXXX-XX-XX'
AND DATE(datetime) is <= 'ZZZZ-ZZ-ZZ'
GROUP BY DATE(datetime) 
```

然后我使用一些 php 提前一年获取 XXXX 和 YYYY 并运行与第一个相同的第二个查询......

查询2：

```
SELECT COUNT(ID) from emails
WHERE DATE(datetime) >= 'XXXX-XX-XX'
AND DATE(datetime) is <= 'ZZZZ-ZZ-ZZ'
GROUP BY DATE(datetime) 
```

我正在使用图表包来比较我在某个日期范围内收到了多少封电子邮件，然后我叠加了一年前在同一范围内收到多少封电子邮件。这是现在的两个查询，我将结果绘制成图表。

问题是 mysql 在 2011 年的某一天没有任何电子邮件，但在 2012 年的同一天有几封电子邮件。

组合结果并将它们绘制成图表会使结果产生偏差，因为我错过了那一天的去年日期和 0 值，有效地使我的所有值不再匹配。

```
2011-03-01 10    2012-03-01 4
2011-03-02 4     2012-03-02 2
2011-03-03 6     2012-03-04 1  <---- see where the two queries
                               end up diverging? (I had nothing
                               logged for 2012-03-03 so naturally
                               it was not in the results. 
```

有没有一种方法可以让 mysql 输出我需要的数据，包括值出现在一年中但不是另一个的日期，或者如果任何一年都没有出现值（仍然需要日期和 0）所以我的图表有效？

我似乎无法弄清楚如何做到这一点......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:39:22.727

有几种不同的方法可以获取一组连续日期的结果。我最喜欢的是使用虚拟表或来自 AI PK 的现有连续 ID 集创建所需的完整集。像这样的东西-

```
SELECT '2011-01-01' + INTERVAL (id -1) DAY
FROM dummy
WHERE id BETWEEN 1 AND 365 
```

这将返回 2011 年的完整天数，然后可以将其 LEFT JOINed 到您的电子邮件表中以获取计数 -

```
SELECT `dates`.`date`, COUNT(emails.id)
FROM (
    SELECT '2011-01-01' + INTERVAL (id - 1) DAY AS `date`, '2011-01-01 23:59:59' + INTERVAL (id - 1) DAY AS `end_of_day`
    FROM dummy
    WHERE id BETWEEN 1 AND 365
) `dates`
LEFT JOIN emails
    ON `emails`.`datetime` BETWEEN `dates`.`date` AND `dates`.`end_of_day`
GROUP BY `dates`.`date` 
```

要填充您的虚拟/序列表，您可以手动插入前十个值，然后使用 INSERT ... SELECT 添加其余的 -

```
CREATE TABLE dummy (id INTEGER NOT NULL PRIMARY KEY);
INSERT INTO dummy VALUES (0),(1),(2),(3),(4),(5),(6),(7),(8),(9),(10);
SET @tmp := (SELECT MAX(id) FROM dummy) + 1;
INSERT INTO dummy
SELECT @tmp + id
FROM dummy; 
```

您需要在每次运行 INSERT ... SELECT 查询之前执行 SET 查询。

# wordpress - 如果为空，则更新自定义字段

> ID：10156614
> 
> 赞同：0
> 
> 时间：2012-04-14T19:22:48.180
> 
> 标签：wordpress, custom-fields

需要更新自定义字段值，如果它是空白错误如果它有任何值不想做任何事情

我只想在它是空代码时更新：

```
$custom_fields = get_post_custom($post_ID);//Current post id
    $my_custom_field = $custom_fields['artist'];//key name
    foreach ( $my_custom_field as $key => $value );
    if(empty($value) or ($value == '')){
        $artist_v = get_post_custom_values('artist', $post_ID);
        update_post_meta($post_ID, 'artist', $parent_title, $artist_v);
    }else{
        //add_post_meta($post_ID, 'artist', $parent_title, true);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:32:16.753

下面的示例可能会有所帮助：

`

```

```
 if(!empty($ARR_meta_data))
    {
      foreach($ARR_meta_data as $meta)
      {
    if(trim($meta['meta_value']) == "")
    {
          update_postmeta_by_meta_id($meta['meta_id'], "  YOUR CUSTOM VALUE   ");
    }
      } 
    }

    function get_postmeta_details_in_array($post_id, $meta_key)
    {
      global $wpdb;
      $sql = "SELECT * FROM ".$wpdb->prefix."postmeta 
          WHERE meta_key='{$meta_key}' AND post_id='{$post_id}'";

      return $wpdb->get_results($sql, ARRAY_A);
    }

    function update_postmeta_by_meta_id($meta_id, $meta_value)
    {
      global $wpdb;
      $sql = "UPDATE ".$wpdb->prefix."postmeta SET meta_value='$meta_value' 
          WHERE meta_id='$meta_id'";

      return $wpdb->query($sql);
    }
    ?> 
```

`将 get_postmeta_details_in_array() 和 update_postmeta_by_meta_id() 函数放在 wordpress 主题的 functions.php 中。

```

# mongodb - Mongoose.js instance.save() 回调未触发

> ID：10156623
> 
> 赞同：25
> 
> 时间：2012-04-14T19:24:06.167
> 
> 标签：mongodb, mongoose

```
var mongo = require('mongoose');
var connection = mongo.createConnection('mongodb://127.0.0.1/test');

connection.on("error", function(errorObject){
  console.log(errorObject); 
  console.log('ONERROR');
});

var Schema = mongo.Schema;
var BookSchema = new Schema({ title : {type : String, index : {unique : true}}});
var BookModel = mongo.model('abook', BookSchema);
var b = new BookModel({title : 'aaaaaa'});

b.save( function(e){ 
  if(e){
    console.log('error')
  }else{
    console.log('no error')
}}); 
```

“错误”或“无错误”都不会打印到终端。更重要的是，connection.on 'error' 似乎也没有触发。我已经确认 MongoDb 正在运行。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-04-18T00:13:44.710

这是您将模型添加到全局猫鼬对象但打开`mongo.createConnection()`模型不属于的单独连接的情况。由于模型没有连接，因此无法保存到数据库。

这可以通过在全局 mongoose 连接上连接到 mongo 来解决：

```
var connection = mongo.createConnection('mongodb://127.0.0.1/test');
// becomes
var connection = mongo.connect('mongodb://127.0.0.1/test'); 
```

或通过将模型添加到单独的连接：

```
var BookModel = mongo.model('abook', BookSchema);
// becomes
var BookModel = connection.model('abook', BookSchema); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-27T17:43:05.740

我真的很喜欢 Aaron 的回答，多亏了他，我现在正在解决问题的路上......虽然我还没有到那里！这是我的特殊问题：

我想在单独的文件中定义我的模式和模型，这样我就可以在项目之间重用它们。例如，我有一个名为**W8DBItem.js**的文件，如下所示：

```
var mongoose = require('mongoose');
var itemSchema = new mongoose.Schema({ name: {type: String, required: true}});
module.exports = mongoose.model('W8DBItem', itemSchema); 
```

在我的程序文件中，我这样做：

```
var mongoose = require('mongoose');
var W8DBItem = require('../w8/W8DBItem.js'); 
var dbURL ='mongodb://localhost:27017/default';
var mongoOptions = { useNewUrlParser: true, bufferCommands: false }
mongoose.connect(dbURL, mongoOptions);

var db = mongoose.connection;

// DEAL WITH CONNECTION ERROR
db.on('error', console.error.bind(console, 'connection error:'));

// PREP DATA
var aWeight = { name: "My Test Name" };
var newWeightItem = W8DBItem(aWeight);

// CONNECTION ESTABLISHED
db.once('open', function() {
    console.log("Here 1")

    // TRY TO SAVE
   newWeightItem.save(function (err, newWeightItem) {
    if (err) { 
        console.log("Here 2");
        console.log(err);
    }
    else {
        console.log("Here 3");
        console.log(newWeightItem);
    }
  });
}); 
```

当我运行这个程序时，我在控制台中得到“Here 1”，但从来没有“Here 2”或“Here 3”。

从 Aaron 的帖子中，我了解到 W8DBItem 对象没有关联的（和打开的）连接，但我不确定如何解决问题。我可以连接到**W8DBItem.js**文件中的数据库，但我真的不喜欢使用对象对服务器信息进行硬编码——我希望这些对象用于不同的文件，并且可能用于不同的服务器。

非常感谢您的想法和建议！

[编辑：找到解决方案！！！]

我只导出模式，而不是从我的目标文件中导出我的 mongoose.model：

```
var mongoose = require('mongoose');
var itemSchema = new mongoose.Schema({name: {type: String, required: true}});
module.exports = itemSchema; 
```

然后在我的程序文件中执行以下操作：

```
var itemSchema = require('../w8/W8DBItemSchema.js'); 
...

var W8DBItem = db.model('W8DBItem', itemSchema);
var newWeightItem = W8DBItem(aWeight);
... 
```

奇迹般有效。我希望这可以帮助别人！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-07T23:37:23.367

发布的答案不能解决问题。不幸的是，我不能只升级我的数据库，所以这对我来说也不是一个解决方案。但在这里我找到了解决这个问题的方法：[https ://github.com/Automattic/mongoose/issues/4064](https://github.com/Automattic/mongoose/issues/4064)

只需使用`.$__save`而不是`.save`如图所示：

```
var b = new BookModel({title : 'aaaaaa'});

b.$__save({}, function(e){ 
  if(e){
    console.log('error')
    // callback will show if e exists
  }else{
    console.log('no error')
    // callback will show 'no error'
}}); 
```

# java - 如何检查给定的类是否有一个字段并且它已被初始化？

> ID：10156626
> 
> 赞同：14
> 
> 时间：2012-04-14T19:24:18.963
> 
> 标签：java, oop

如何检查给定类是否具有特定字段以及是否已初始化（目前具有值）？

```
abstract class Player extends GameCahracter {

}

public class Monster extends GameCahracter{

    public int level = 1;
}
abstract class GameCharacter{

   public void attack(GameCahracter opponent){

         if (opponent instanceof Monster && ){ // << here I have to know is it instance of Monster and if it has initialized value
           }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-08-27T12:06:01.937

要查看一个类是否具有不依赖异常的属性，可以使用以下方法：

```
private Boolean objectHasProperty(Object obj, String propertyName){
    List<Field> properties = getAllFields(obj);
    for(Field field : properties){
        if(field.getName().equalsIgnoreCase(propertyName)){
            return true;
        }
    }
    return false;
}

private static List<Field> getAllFields(Object obj){
    List<Field> fields = new ArrayList<Field>();
    getAllFieldsRecursive(fields, obj.getClass());
    return fields;
}

private static List<Field> getAllFieldsRecursive(List<Field> fields, Class<?> type) {
    for (Field field: type.getDeclaredFields()) {
        fields.add(field);
    }

    if (type.getSuperclass() != null) {
        fields = getAllFieldsRecursive(fields, type.getSuperclass());
    }

    return fields;
} 
```

并简单地调用：

```
objectHasProperty(objInstance, "myPropertyName"); 
```

其实无所谓类的实例，看看类有没有属性，不过我是这么弄的，只是为了友好一点。总结一下：我使 getAllFields 是递归的，以获取所有超类方法（在我的情况下，这很重要）

之后，如果您想查看所需对象中属性的值是什么，您可以调用：

```
PropertyUtils.getProperty(objInstance, "myPropertyName"); 
```

记住：如果`objInstance`没有那个属性，上面的调用会抛出`NoSuchMethodException`（这就是为什么你需要使用第一个代码来查看这个类是否有这个属性）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-14T19:29:48.133

您可以使用反射，例如：

```
Class.forName("Foo").getFields() 
```

然后您可以再次检查特定对象是否使用反射初始化了该字段。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-14T19:38:32.717

您不必为此使用反射，只需使用 if 条件即可。

```
 if (opponent !=null && opponent instanceof Monster && ((Monster) opponent).level==1){ // << here I have to know is it instance of Monster and if it has initialized value
           } 
```

如果实例不为空并且它是 Monster 的实例，则可以检查实例不为空，那么在您的情况下，它肯定已初始化。如果怪物的对手实例的级别为 1，则每当创建新实例时，实例变量都会使用默认值初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-23T12:34:26.973

除了@Renato Lochetti 的答案，我还想添加一个只有一个函数的变体，而不是使用 3：

```
private boolean hasField(final Class<?> clazz, final String fieldName) {
    // gather all fields of this class
    final List<Field> fields = new ArrayList<>();
    Class<?> current = clazz;
    do {
        Collections.addAll(fields, current.getDeclaredFields());
    } while ((current = clazz.getSuperclass()) != null);

    // check if field exists
    return fields.stream().map(Field::getName).anyMatch(f -> f.equals(fieldName));
} 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-04-14T19:27:19.240

```
//Load the class 

Class clazz = Class.forName("your.class.ClassName");
Field field = clazz.getField("fieldName")
if(field!=null){
 //field exist now check if its initialized or not, or if its primitive field check against its assumed initialized value
 if(ClassName.fieldName!=null){
    //yes initilized
 }
} 
```

# google-chrome - 浏览器扩展问题的开发

> ID：10156629
> 
> 赞同：0
> 
> 时间：2012-04-14T19:25:12.917
> 
> 标签：google-chrome, google-chrome-extension, cross-browser, firefox-addon

我正在寻找开发一个跨浏览器扩展（插件）并且在获得几个问题的答案时遇到了麻烦。因此，如果我想做的事情可能的话，只需寻找一些简单的答案。谢谢。我目前正在考虑使用 Crossrider，但会使用任何东西。

1.  一些扩展如何在右键单击按钮中添加菜单。例如，当我在 Chrome 中单击鼠标右键时，我会在下拉菜单中看到 Evernote Web Clipper 和 Adblock 选项）。他们是怎么做到的？

2.  例如，我可以嵌入一个 youtube 播放器吗？因此，当它关闭时，音频仍会播放，但单击时您可以看到视频，什么不能？

3.  对于像 Grooveshark 这样的网站。他们是否有一个插件，点击后您可以更改歌曲或停止音乐等。所以基本上可以通过插件与您标签中的网站进行通信？

谢谢。我刚刚找到了 Crossrider，看起来有些可能，但还没有深入探索它。有点想知道是否有人尝试过做这些事情，如果可能的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:49:08.270

Google 有一个用于添加上下文菜单的特定 API。你可以在[这里](http://code.google.com/chrome/extensions/contextMenus.html)阅读。只需确保在 manifest.json 文件中请求上下文菜单的权限，然后您就可以将其他所有内容添加到后台 JavaScript 文件中。

我不认为直接将 YouTube 播放器嵌入到扩展中是完全可能的。谷歌浏览器不允许运行内联脚本，这显然是在弹出页面（或其他任何内容）内运行 YouTube 所必需的。

至于您的第三个问题，您必须检查要运行扩展的任何站点的各个 API。每个网站都会有所不同，我的第一直觉是大多数网站都不允许直接将他们的播放器添加到扩展中。

我强烈建议您查看有关在[Google Code](http://code.google.com/chrome/extensions/getstarted.html)上开发 Google Chrome 扩展程序的信息。它们为开发扩展的基础知识提供了很好的教程和参考。

# html - 如何使div底部对齐？

> ID：10156631
> 
> 赞同：2
> 
> 时间：2012-04-14T19:25:17.367
> 
> 标签：html, css

![我的页面布局](../Images/3198069a33f8b0792c167b722fa549c3.png)
我似乎无法将`div id="navigation"`底部与图像对齐。有人可以帮我处理 CSS 吗？谢谢！

这是HTML代码：

```
<body>
  <div class="container">
    <div class="header"><img id="logo" src="images/logo.png" />
      <div id="navigation">
        <ul>
          <li><a href="#">Menu link 1</a></li>
      <li><a href="#">Menu link 2</a></li>
          <li><a href="#">Menu link 3</a></li>
        </ul>
      </div>
    </div>
    <div class="sidebar">Sidebar</div>
    <div class="content">Main content</div>
    <div class="footer">Footer content</div>
  </div>
</body> 
```

和CSS：

```
.container {
width: 80%;
max-width: 1260px;
min-width: 780px;
background: yellow;
margin: 0 auto;
}

.header {
width: 100%;
float: left;
background: orange;
}

#logo {
float: left;
display: block;
}

#navigation {
margin-left: 50px;
padding: 0px 50px 0px 0px;
float: left;
background: pink;
}

#navigation ul {
list-style-type: none;
}

#navigation li {
display: inline;
}

#navigation a {
float: left;
margin: 0px 80px 0px 0px;
}

.sidebar {
clear: both;
float: left;
width: 20%;
background: red;
}

.content {
float: left;
width: 80%;
}

.footer {
clear: both;
position: relative;
background: green;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:34:17.807

或者您可以将标题的高度和标题位置设置为相对，将导航设置为`bottom: 0px;`

```
.container {
width: 80%;
max-width: 1260px;
min-width: 780px;
background: yellow;
margin: 0 auto;
height: 150px;
}

.header {
width: 100%;
float: left;
background: orange;
    position: relative;
}

#logo {
float: left;
display: block;
}

#navigation {
margin-left: 50px;
padding: 0px 50px 0px 0px;
float: left;
background: pink;
    position:absolute;
    bottom:0px;
}

#navigation ul {
list-style-type: none;
}

#navigation li {
display: inline;
}

#navigation a {
float: left;
margin: 0px 80px 0px 0px;
}

.sidebar {
clear: both;
float: left;
width: 20%;
background: red;
}

.content {
float: left;
width: 80%;
}

.footer {
clear: both;
position: relative;
background: green;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:31:31.887

为您的导航添加一些边距以将其下推到您正在寻找的级别，如下所示：

```
#navigation {
  margin-top:45px; /* adjust as needed */
} 
```

# java - java - 如何使用java web-service获得复杂的soap响应？

> ID：10156636
> 
> 赞同：1
> 
> 时间：2012-04-14T19:25:36.810
> 
> 标签：java, web-services, soap, netbeans

我已经创建了一个 Web 服务来使用 netbeans 添加两个数字......并且我得到了以下响应

```
SOAP Response

<?xml version="1.0" encoding="UTF-8"?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
        <ns2:AddResponse xmlns:ns2="http://calculator.me.org/">
            <return>9</return>
        </ns2:AddResponse>
    </S:Body>
</S:Envelope> 
```

我需要生成以下结构的soap响应xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
<CalculatedValue>9</CalculatedValue>
<response> 
```

我的Java代码：

```
import javax.jws.WebService;
import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.ejb.Stateless;

/**
 *
 * @author User
 */
@WebService(serviceName = "CalculatorWS")
@Stateless()
public class CalculatorWS {

    /**
     * This is a sample web service operation
     */
    @WebMethod(operationName = "hello")
    public String hello(@WebParam(name = "name") String txt) {
        return "<a>" + txt + "</a>";
    }

    /**
     * Web service operation
     */
    @WebMethod(operationName = "Add")
    public int Add(@WebParam(name = "i") int i, @WebParam(name = "j") int j) {
        //TODO write your implementation code here:
        int k=i+j;
        return k;

    }
} 
```

wsdl：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!-- Generated by JAX-WS RI at http://jax-ws.dev.java.net. RI's version is Metro/2.1.1-b09 (branches/2.1-6834; 2011-07-16T17:14:48+0000) JAXWS-RI/2.2.5-promoted-b04 JAXWS/2.2\. -->
<definitions targetNamespace="http://calculator.me.org/" name="CalculatorWS" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:tns="http://calculator.me.org/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
  <types>
    <xsd:schema>
      <xsd:import namespace="http://calculator.me.org/" schemaLocation="CalculatorWS_schema1.xsd"/>
    </xsd:schema>
  </types>
  <message name="hello">
    <part name="parameters" element="tns:hello"/>
  </message>
  <message name="helloResponse">
    <part name="parameters" element="tns:helloResponse"/>
  </message>
  <message name="Add">
    <part name="parameters" element="tns:Add"/>
  </message>
  <message name="AddResponse">
    <part name="parameters" element="tns:AddResponse"/>
  </message>
  <portType name="CalculatorWS">
    <operation name="hello">
      <input wsam:Action="http://calculator.me.org/CalculatorWS/helloRequest" message="tns:hello"/>
      <output wsam:Action="http://calculator.me.org/CalculatorWS/helloResponse" message="tns:helloResponse"/>
    </operation>
    <operation name="Add">
      <input wsam:Action="http://calculator.me.org/CalculatorWS/AddRequest" message="tns:Add"/>
      <output wsam:Action="http://calculator.me.org/CalculatorWS/AddResponse" message="tns:AddResponse"/>
    </operation>
  </portType>
  <binding name="CalculatorWSPortBinding" type="tns:CalculatorWS">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
    <operation name="hello">
      <soap:operation soapAction=""/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
    <operation name="Add">
      <soap:operation soapAction=""/>
      <input>
        <soap:body use="literal"/>
      </input>
      <output>
        <soap:body use="literal"/>
      </output>
    </operation>
  </binding>
  <service name="CalculatorWS">
    <port name="CalculatorWSPort" binding="tns:CalculatorWSPortBinding">
      <soap:address location="REPLACE_WITH_ACTUAL_URL"/>
    </port>
  </service>
</definitions> 
```

我对此进行了很多搜索....但没有得到任何答案。我在stackoverflow中找到了一个类似的帖子，没有正确的答案。如何使用网络服务生成特定的soap响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:33:39.257

不可能得到像您发布的那样的回复。根据定义，一个 SOAP 文档（或消息）必须包含一个`Envelope`并且至少包含一个`Body`元素。在[SOAP 规范](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383494)中查看更多信息。

您唯一的控制是通过`Body`将操作样式指定为 RPC（远程过程调用）或文档（纯 XML）来控制元素的内容。

# css - Google Maps CSS 不显示地图

> ID：10156637
> 
> 赞同：1
> 
> 时间：2012-04-14T19:25:41.890
> 
> 标签：css, google-maps, layout, google-maps-api-3

我在将 Google 地图添加到我的项目时遇到了一些问题。当我将它放入正文标签时，它可以工作。但是当我有这样的结构时

```
<body onload="initialize()">
<div>
<div id="map_canvas" style="width:100%; height:100%"></div>
</div>
</body> 
```

它没有显示任何东西。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:39:02.237

这是因为`height: 100%;`总是[相对于父母的身高](http://webdesign.about.com/od/csstutorials/f/set-css-height-100-percent.htm)。在您的情况下，这是无名的 div，其高度为零，因此`#map_canvas`100% 的高度仍然为零。所以谷歌地图不会显示，因为 div 没有可见的高度。

如果您在父 div 上指定 100%，它将再次起作用。我猜你已经有了`html, body { height: 100%; }`，如果它只是在 body 标签中工作。

[jsFiddle 演示](http://jsfiddle.net/bazmegakapa/wPeMg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T19:29:43.737

你有 html，body 也是 100% 吗？

```
html, body, #map_canvas { margin: 0; padding: 0; height: 100% } 
```

# x86 - x86 汇编程序员转换为 MIPS，我应该知道什么？

> ID：10156642
> 
> 赞同：1
> 
> 时间：2012-04-14T19:26:36.467
> 
> 标签：x86, mips, assembly

我已经为我以前的学校使用 x86 架构编程，并且在我正在上的一个需要 MIPS 知识的新课程中进行编程。这两个世界在概念和架构上的主要区别是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T01:13:44.040

自从我查看 MIPS ASM 以来已经有一段时间了，但据我回忆......

根据您对 x86 汇编语言的了解程度，我认为 MIPS ASM 不会太难学。显然，作为一个非常纯粹的 RISC 指令集，它比 x86 简单得多。您有一些数据移动指令（加载/存储）、一些算术指令（加、减、乘、位移位和屏蔽）和分支（无条件跳转）。这些主题没有太多的点缀。

事实上，当您尝试 MIPS 并看到可供您使用的大量通用寄存器时，您可能会觉得有点被宠坏了。你知道 x86 是如何与 7-8 个通用 regs 斗争的吗（取决于你是否计算 ESP）？您在 MIPS 中有 32 个 GP regs。

您必须习惯的一件事是流水线，或者更确切地说是流水线的含义。如果一条指令执行加法，并且结果应该进入寄存器 r5，那么到下一条指令执行时，总和实际上可能不可用。在 r5 保持总和之前，它可能需要另一个周期或 2 个（不记得具体细节）。因此，您必须在代码中对此进行计划。另一个含义是分支指令不会立即分支（同样，由于流水线，它可能需要一个或 2 个周期）。因此，您需要确保发生在分支之后的指令不会以一种奇怪的方式弄乱程序状态（如果有疑问，请在分支之后放置一个 NO-OP）。

我一直发现学习任何 ASM 的最佳方法是将程序反汇编成 ASM 并开始查找指令。为此，请下载并安装 MIPS 工具链（[这里是获取最新的交叉编译工具链的好地方，适用于包括 MIPS 在内的众多架构](http://autobuilder.yoctoproject.org/pub/nightly/CURRENT/toolchain/)）。用它来编译一个“Hello World”C 程序，以及一些基本的数学公式，然后在可执行文件上运行 MIPS 版本的 'objdump -d'。从 main() 函数开始研究输出。了解 C 数学如何映射到 MIPS ASM。

祝你好运！这不是微不足道的，但是如果您已经精通 x86，我认为您可能可以学习其他 ASM 集，而无需参加为期一学期的主题课程。

# python - 如何在构造函数之前声明静态变量，以及如何在其主体中引用一个类？

> ID：10156650
> 
> 赞同：1
> 
> 时间：2012-04-14T19:28:01.910
> 
> 标签：python, oop, class

我习惯于在构造函数之前在类中声明静态字段/变量。在 Python 中这样做会导致错误。

这是一个示例类：

```
class StringCompare:

    methods = OrderedDict()
    # ERROR!:
    #methods['equals'] = equals
    #methods['ends with'] = endswith
    #methods['starts with'] = startswith
    #methods['contains'] = contains

    @staticmethod
    def equals(a, b):
        return a == b

    @staticmethod
    def contains(a, b):
        return a.find(b) != -1

    @staticmethod
    def startswith(a, b):
        return a.startswith(b)

    @staticmethod
    def endswith(a, b):
        return a.endswith(b)

    methods['equals'] = equals
    methods['ends with'] = endswith
    methods['starts with'] = startswith
    methods['contains'] = contains 
```

有没有更优雅的方法（除了将所有语句直接放在整个类之后，为每个访问的 var 加上前缀`StringCompare.`）？

这里的最佳做法是什么？

* * *

更复杂的情况是尝试从同一个类中调用构造函数：

```
class Type(InlineFragment):

    # primitive types get None as package name
    def __init__(self, packageName, name, genericType=None):

        ...

    def ...

    primitive = {
        'Character': Type(None, 'char'),
        'Byte'     : Type(None, 'byte'),
        'Short'    : Type(None, 'short'),
        'Integer'  : Type(None, 'int'),
        'Long'     : Type(None, 'long'),
        'Boolean'  : Type(None, 'boolean'),
        'Float'    : Type(None, 'float'),
        'Double'   : Type(None, 'double'),
    } 
```

这会导致错误：

```
\jpa_export_fragments.py", line 361, in Type
    'Character'    : Type(None, 'char'),
NameError: name 'Type' is not defined 
```

这应该可行，但我只能通过将此代码放在类之外来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:45:27.253

一般来说，解决方案是使用[类装饰器](http://www.python.org/dev/peps/pep-3129/)。对于您的示例，您可能希望将它们与类方法结合使用：

```
def apply_method(attr):
    def apply_to(cls):
        setattr(cls, attr, getattr(cls, '_' + attr)())
        return cls
    return apply_to

@apply_method('primative')
class Type(object):

    def __init__(self, *args):
        pass

    @classmethod
    def _primative(cls):
        return {
    'Character': cls(None, 'char'),
    'Byte'     : cls(None, 'byte'),
    'Short'    : cls(None, 'short'),
    'Integer'  : cls(None, 'int'),
    'Long'     : cls(None, 'long'),
    'Boolean'  : cls(None, 'boolean'),
    'Float'    : cls(None, 'float'),
    'Double'   : cls(None, 'double'),
        } 
```

您的第一个示例看起来非常不符合 Python 风格，因此我不愿为此建议一个装饰器。相反，也许你想要一个`str`ing 子类？

```
class StringCompare(str):
    # none of these are any different from the normal string operations
    # you would really only override ones that are different.

    def __eq__(self, other):
        return super(StringCompare, self).__eq__(other)

    def __contains__(self, other):
        return self.find(other) != -1

    def startswith(self, other):
        return super(StringCompare, self).startswith(other)

    def endswith(self, other):
        return super(StringCompare, self).endswith(other)

print StringCompare('boogaloo').startswith('boo') # True 
```

# c# - LINQ to Entities 无法识别方法“System.String get_Item (System.String)”，

> ID：10156659
> 
> 赞同：14
> 
> 时间：2012-04-14T19:29:20.473
> 
> 标签：c#, asp.net-mvc, linq-to-entities

我怎么解决这个问题？

这是我的代码：

```
 DateTime dtInicio = new DateTime();
    DateTime dtFim = new DateTime();
    Int32 codStatus = 0;

    if(!string.IsNullOrEmpty(collection["txtDtInicial"]))
        dtInicio = Convert.ToDateTime(collection["txtDtInicial"]);
    if(!string.IsNullOrEmpty(collection["txtDtFinal"]))
        dtFim = Convert.ToDateTime(collection["txtDtFinal"]);
    if (!string.IsNullOrEmpty(collection["StatusCliente"]))
        Convert.ToInt32(collection["StatusCliente"]);

    var listCLientResult = (from c in db.tbClientes
                           orderby c.id
                            where (c.effdt >= dtInicio || string.IsNullOrEmpty(collection["txtDtInicial"]) &&
                                 (c.effdt <= dtFim || string.IsNullOrEmpty(collection["txtDtFinal"])) &&
                                 (c.cod_status_viagem == codStatus || string.IsNullOrEmpty(collection["StatusCliente"])))
                                 select c);
    return View(listCLientResult); 
```

我得到的错误是：

LINQ to Entities 无法识别方法“System.String get_Item (System.String)”，该方法无法转换为存储库的表达式。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-14T02:35:42.593

对数据库执行的 Linq 查询在执行之前被转换为 SQL；但`collection["txtDtInicial"]`不能翻译成 SQL，因为没有等效的 SQL 语法，而且无论如何数据库无权访问`collection`. 您需要先提取`collection["txtDtInicial"]`到一个变量，并在查询中只使用这个变量。

这是我要做的：

```
DateTime dtInicio = DateTime.MinValue;
DateTime dtFim = DateTime.MaxValue;
Int32 codStatus = 0;

if(!string.IsNullOrEmpty(collection["txtDtInicial"]))
    dtInicio = Convert.ToDateTime(collection["txtDtInicial"]);
if(!string.IsNullOrEmpty(collection["txtDtFinal"]))
    dtFim = Convert.ToDateTime(collection["txtDtFinal"]);
if (!string.IsNullOrEmpty(collection["StatusCliente"]))
    codStatus = Convert.ToInt32(collection["StatusCliente"]);

var listCLientResult = (from c in db.tbClientes
                       orderby c.id
                        where (c.effdt >= dtInicio) &&
                             (c.effdt <= dtFim) &&
                             (c.cod_status_viagem == codStatus)
                             select c);
return View(listCLientResult); 
```

`dtInicio`通过将and初始化`dtFim`为 MinValue 和 MaxValue，您无需检查它们是否在查询中定义。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-08T14:49:07.733

Linq 查询最终转换为 SQL 查询，并且 LINQ 不知道如何处理 Session["UserName"] （获取“UserName”项）。

解决此问题的一种常见方法是使用一个局部变量，您将为其分配 Session["UserName"] 并且您将在 Linq 查询中使用它......

像

string loggedUserName = Session["LogedUsername"].ToString();
var userdetail = dc.faculties.Where(a => a.F_UserName.Equals(loggedUserName)).FirstOrDefault();

参考[http://mvc4asp.blogspot.in/](http://mvc4asp.blogspot.in/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-09-30T13:14:11.450

在一行...

不要在 Linq(Entity) 查询中使用字符串转换函数！

**错误的：**

```
user = db.Users.Where(u => u.Name == dt.Rows[i]["Name"].ToString()).FirstOrDefault(); 
```

**正确的：**

```
string Name = dt.Rows[i]["Name"].ToString();
user = db.Users.Where(u => u.Name == Name).FirstOrDefault(); 
```

# c# - 需要帮助将某些方法从 C# 转换为 VB.net (Windows Phone 7)

> ID：10156662
> 
> 赞同：1
> 
> 时间：2012-04-14T19:29:42.887
> 
> 标签：c#, vb.net, visual-studio, windows-phone-7

嗨，我正在网上查看一些关于我正在尝试制作的应用程序的示例代码。但是，由于它在 C# 中，我必须将其转换为 VB.net，因为这就是我需要使用的语言。以下方法我以前没有真正见过，所以我不知道如何转换它们。我尝试使用在线转换工具，但它们似乎给了我充满错误的代码（我认为它无法识别格式）

```
Play += (_, __) =>
{
//Do something here
};

camRecorder.Initialized += (___, ____) =>
{
//Do something here
};

new Thread(() =>
{
//Do something here
}).Start(); 
```

如果有人可以帮助我，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:33:51.153

更新代码，希望没问题。

```
AddHandler Play, Sub(_, __)
'Do something here
End Sub

AddHandler camRecorder.Initialized, Sub(___, ____)
'Do something here
End Sub

New Thread(Sub()
'Do something here
End Sub).Start() 
```

# php - SimpleTest - Web 浏览器 - 将身份验证传输到客户端

> ID：10156669
> 
> 赞同：3
> 
> 时间：2012-04-14T19:30:22.573
> 
> 标签：php, javascript, http-headers, simpletest

我不确定这是否可能，但我认为这是提出问题的好地方。

我正在使用[http://simpletest.org/en/browser_documentation.html](http://simpletest.org/en/browser_documentation.html) PHP WebBrowser 来测试一个 wordpress 站点。我正在做的是设置登录凭据以访问 wordpress 后端。我运行了几个测试，但我的问题是在某些情况下，我想将“SimpleTest PHP Web Browser”运行的会话转移到客户端的浏览器。又名...我的浏览器。

因此，由于我正在将会话从服务器端测试浏览器传输到普通客户端浏览器。这个“客户端浏览器”与开始运行 SimpleTest 脚本的浏览器相同。

我想知道是否可以将与“SimpleTest PHP Web 浏览器”关联的标头和cookie 传输到我的浏览器。我在想的是使用 SimpleTest PHP 库提取数据，然后使用 Javascript 将该信息设置到客户端浏览器。

这甚至可能吗？我觉得我缺少对服务器端会话身份验证的一些基本了解，这将使这成为不可能。

有任何想法吗？我真的很好奇！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:37:26.357

您是否查看过SimpleTest的[身份验证文档？](http://www.simpletest.org/en/authentication_documentation.html)

# html - Digg.com、Facebook 和其他网站没有正确提取图片，如何纠正？

> ID：10156670
> 
> 赞同：0
> 
> 时间：2012-04-14T19:30:39.397
> 
> 标签：html, facebook, web

我想控制 Digg.com、Facebook 和其他人的哪些图像，但我遇到的很少成功。

我的印象是它应该像在头部添加以下内容一样简单：

```
<link href='/path/to/image.jpg' rel='image_src'> 
```

但是，似乎没有任何东西可以拉起该图像 Digg： ![Digg - 没有图像](../Images/77407665c8b3421fad259c8f5a27698a.png)

Facebook 也不会提取我希望它显示的图像，尤其是默认情况下： ![Facebook - 没有图片](../Images/0bf06171b734ee7e99dfef560c0542e0.png)

**这里主要为 Digg 和 Facebook 解决这个问题的正确方法是什么**（也就是说，如果有两种不同的方法）**？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:35:44.473

快速示例：

```
<meta property="og:title" content="The Rock"/>
<meta property="og:type" content="movie"/>
<meta property="og:url" content="http://www.imdb.com/title/tt0117500/"/>
<meta property="og:image" content="http://ia.media-imdb.com/rock.jpg"/>
<meta property="og:site_name" content="IMDb"/>
<meta property="fb:admins" content="USER_ID"/>
<meta property="og:description"
      content="A group of U.S. Marines, under command of
               a renegade general, take over Alcatraz and
               threaten San Francisco Bay with biological
               weapons."/> 
```

这一切都在文档中：[https ://developers.facebook.com/docs/opengraphprotocol/](https://developers.facebook.com/docs/opengraphprotocol/)

**编辑：**

确保使用调试器重新测试 URL，因为 Facebook 会在很长一段时间内缓存这些类型的结果：[https ://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T19:35:12.387

Facebook 的图片标签是：

`<meta property="og:image" content="path">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T19:36:05.860

也许您正在寻找使用元标记的[开放图协议](http://ogp.me/)特异性。`property="og:image"`

**例子：**

`<meta property="og:image" content="http://example.com/images/FB.png" />`

# proguard - Proguard 回溯堆栈变体

> ID：10156671
> 
> 赞同：1
> 
> 时间：2012-04-14T19:30:43.953
> 
> 标签：proguard

我可以使用堆栈的回溯不同于：

```
Exception in thread "main" java.lang.Error: Random exception
        at pro.bY.a(ProGuard:576)
        at pro.bO.a(ProGuard:431)
        at pro.bj.a(ProGuard:145)
        at pro.bY.a(ProGuard:522)
        at pro.bj.a(ProGuard:129) 
```

例如，我有这个堆栈：

```
 NullPointerException
   MessageController
   getMessage
   0*7h3f33
   MessageModel
   getCurrentPlace
   0*1F3f14 
```

混淆后是：

```
 NullPointerException
   b
   ab
   0*7h3f33
   a
   ac_
   0*1F3f14 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T11:39:52.893

您可以使用 ReTrace 选项指定您自己的正则表达式`-regex`。参照。[ProGuard 手册 > ReTrace 使用](http://proguard.sourceforge.net/manual/retrace/usage.html)。

该表达式适用于堆栈跟踪的每行，因此您可能必须连接输入跟踪中的一些行以在一行上获取每个类/方法名称对。

# android - BitmapFactory.decodeStream() 返回的位图是原始位图的 100 倍

> ID：10156675
> 
> 赞同：1
> 
> 时间：2012-04-14T19:30:56.260
> 
> 标签：android, bitmap, out-of-memory, filesize, bitmapfactory

我有一个 168.2KB 和 1991x1756 的 PNG 图像，并尝试将其导入到`Bitmap`using `BitmapFactory.decodeStream()`. 问题是我遇到`OutOfMemoryError`了`Bitmap`大小最终为 13,657KB 的地方。
我不明白为什么导入后文件这么大以及如何减轻这种情况。
似乎这个`OutOfMemoryError`问题在解码图像中很常见，`Bitmap`但找不到解决方法。有任何想法吗？

`Bitmap bitmap = BitmapFactory.decodeStream(inputStream, null, bitmapOptions);`

`E/AndroidRuntime(10744): java.lang.OutOfMemoryError: bitmap size exceeds VM budget(Heap Size=7815KB, Allocated=3279KB, Bitmap Size=13657KB)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T19:45:46.320

png 文件是高度压缩的，这意味着磁盘上的文件大小比它包含的所有数据加载到内存时要小得多。
位图是图像的一种非常简单的表示，其中每个像素都由一个值表示。此值的大小取决于当前设置（您可能听说过 32 位图像、16 位图像或 8 位图像，它们是一些常见的尺寸）。

要计算表示为位图的图像的真实大小，您必须计算像素数，并将其与每个像素的位数相乘。
您的图像为 1991x1756 像素（总共**3 496 196**像素）。如果您使用 ARGB_8888 格式（每个颜色/alpha 通道一个字节 = 每个像素 4 个字节）加载位图，您最终会得到`3 496 196 * 4 =` **`13 984 784`**字节。

您可以通过使用更少的字节/通道（例如 RGB_565）来减小总大小，尽管这也会降低图像的质量。更好的选择很可能是减小图像的大小，或者使用[`inSampleSize`](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)您的参数导入它们`BitmapFactory.Options`以加载较小的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:43:02.413

我相信PNG图像被严重压缩，但android中的位图没有被压缩，因为每个像素有4个字节（ARGB）

所以 1991 * 1756 * (4 bytes) 大约是 13657 KB

因此，请尝试使用较小的图像或 insample size Options 的位图选项来减小尺寸。

看看这篇文章： [Decoding bitmaps in Android with the right size](https://stackoverflow.com/questions/2641726/decoding-bitmaps-in-android-with-the-right-size)

# c++ - const 正确性警告 c++

> ID：10156678
> 
> 赞同：25
> 
> 时间：2012-04-14T19:31:16.123
> 
> 标签：c++, constants, compiler-warnings

有谁知道 C++ 编译器提供的任何有助于强制执行 const 正确性的警告？例如，如果任何 C++ 方法包含一个从未在方法内部修改过的非常量参数，就会产生警告。我看到有一个名为 -Wsuggest-attribute=const; 的 gnu 编译器警告。但是，当我使用此标志时，我收到一条错误消息，指出它无法识别。任何想法为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T19:33:30.433

我不认为这样的警告存在，主要是因为它没有用。仅仅因为一个参数没有在调用内部被修改，并不意味着它应该`const`仅仅为了它而被修改。

想想`virtual`函数。也许基类的设计者虽然没有修改基类中的参数，但希望将是否修改该参数留给扩展类。

此外，想想大型应用程序，其中修改接口或 API 或任何成本很高。您现在可能不需要修改参数，但打算在将来这样做。您现在不会成功`const`，并且强制完全重建，并且将来删除`const`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-08T10:49:58.940

```
-Wsuggest-attribute=const 
```

此分析需要选项

```
-fipa-pure-const 
```

默认情况下启用

```
-O 
```

及更高

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-14T20:03:00.407

小心，`const`像这样的参数：

```
void myFunc(int const param); 
```

不*属于*接口。它属于函数*实现*的本地范围。其实这个函数：

```
int inc(int const param) { return param+1; } 
```

可以声明为

```
int inc(int param); 
```

声称有权修改变量但实际上并未这样做并不违反 const 正确性范式。

如果您担心`const_cast`一开始就不能使用它，或者只是`grep`在您的代码库中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T19:57:37.613

不，不幸的是没有这样的警告。如果您尝试更改 const 声明的参数，您只会得到错误。这是因为从编译器的角度来看，缺少`const`声明不会改变代码的正确性。但是 const 正确性对于编译器发现潜在的优化很重要，它提高了代码的可读性。这是专业的问题。尤其是在使用引用时，const 正确性是必须的。[我经常提到这个。](http://www.possibility.com/Cpp/const.html)
当运算符（赋值，转换，...​​）发挥作用时，编译器本身非常重视 const 正确性。此处缺少`const`并且编译器拒绝使用该运算符，因为如果给定的参数可能被修改，它会产生很大的不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-02T20:22:41.397

我不知道这样的警告，我认为它们很难在编译器中实现——也就是说，它们会减慢它的速度。也许一些静态分析工具具有这样的特性（但我也不知道这些特性）。

根据`Wsuggest-attribute=const`，那是另一回事。它将建议使用特定于 gcc 的“函数属性`const`”，它基本上是一个数学函数，只接收值（无指针），不读取或更改任何静态/全局状态并且只返回一个值（无指针）。有关进一步的描述，请看这里：[https ://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#Common-Function-Attributes](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#Common-Function-Attributes)

# c# - Microsoft.Speech 参考缺少 C++/cli

> ID：10156679
> 
> 赞同：0
> 
> 时间：2012-04-14T19:31:27.493
> 
> 标签：c#, .net, c++-cli

我很难找到有关这方面的任何信息，所以也许这里有人可以启发我。我用 C++/Cli 编写了一个模块，一切都很好，但是由于某种原因在引用列表中（当我右键单击 VS 项目添加引用时），我在列表中找不到 Microsoft.Speech .

还有另一个等效的，称为 System.Speech，但我绝对需要 Microsoft.Speech。由于模块是纯托管代码，我不应该可以访问所有 .NET 模块吗？或者也许我可以下载一个包来扩展它？

谢谢。

# 更新：

我指的是这两个电话：

```
 using Microsoft.Speech.AudioFormat;
 using Microsoft.Speech.Recognition; 
```

可以在 Kinect SDK 示例中找到。我需要 C++/CLI 中的那些，因为如果我使用系统本机版本，我将无法访问 kinect 的识别器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T13:43:26.597

万一您无法在 .NET 选项卡中找到 Microsoft.Speech.dll，您可以执行以下操作：

从以下位置导入 Microsoft.Speech.dll：

```
C:\Windows\assembly\GAC_MSIL\Microsoft.Speech\11.0.0.0__31bf3856ad364e35\Microsoft.Speech.dll 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:04:27.007

这是解决方案：

```
#using "Microsoft.Speech.dll"
using namespace Microsoft::Speech;
using namespace Microsoft::Speech::Recognition; 
```

现在一切正常。

# gwt - 在 PlayN 中，是否有像最大整数值这样的跨平台常量？

> ID：10156684
> 
> 赞同：1
> 
> 时间：2012-04-14T19:31:42.563
> 
> 标签：gwt, playn

我检查了[Platform class](http://docs.playn.googlecode.com/git/javadoc/index.html)，但没有看到类似的东西。我显然可以设置自己的常数，但我想知道这样的事情是否存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T10:49:03.393

`Integer.MAX_VALUE`应该是它。

# language-agnostic - ¬(a = b) 和 (a ≠ b) 可能不同的语言

> ID：10156686
> 
> 赞同：2
> 
> 时间：2012-04-14T19:31:47.720
> 
> 标签：language-agnostic

在 C++ 中，可以为用户类型重载`==`and`!=`运算符，但语言并不关心你是如何做到的。`true`无论如何，您都可以重载两者以返回，`!(a==b)`因此`(a!=b)`不一定要对同一事物进行评估。有多少其他语言有不同的`¬(a = b)`情况`(a ≠ b)`？这是常见的事情吗？

这不仅仅是重载问题，甚至对于原始类型来说也是奇怪的极端情况。C 和 C++ 中的 NaN 不等于任何东西，包括 NaN。确实 NaN != NaN 在 C 中，但也许在其他语言中有类似的情况会导致`¬(a = b)`和`(a ≠ b)`不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T03:12:09.677

[Guy L. Steele](http://en.wikipedia.org/wiki/Guy_L._Steele)有句名言

> ...定义您自己的运算符函数的能力意味着一个简单的语句，例如 x=a+b; 在一个内部循环中可能涉及向阿富汗发送电子邮件。

正如 corsiKa 所说，仅仅因为你能做到，并不意味着它是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:36:56.557

我知道 Python 和 Ruby 可以，而 Java 和 PHP 不能。（在 Java`==`中，确定两个对象在内存中是否相同，而不仅仅是语义上等价的值。在 PHP 中……没关系。）我还想象 Lisp 和 JS 可以，而 C 不能，但这有点推测.

能够重载运算符并不罕见。但是，很少`!(a==b)`有`(a!=b)`不同的结果。

# c# - 混合 C# 和 VB.NET 项目中的 UAC

> ID：10156689
> 
> 赞同：2
> 
> 时间：2012-04-14T19:32:27.400
> 
> 标签：c#, .net, vb.net

我有一个 C# 项目，它引用了一个从 VB.NET 项目构建的 .NET 程序集。

此 VB.NET 程序集需要管理权限。

我在我的 C# 项目中创建了一个清单：

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

一切似乎都很好：当我跑步时：

```
bool isAdmin = new WindowsPrincipal(WindowsIdentity.GetCurrent())
  .IsInRole(WindowsBuiltInRole.Administrator) ? true : false; 
```

从我的 C# 代码中，我得到`isAdmin == True`了预期的结果，但是当我从 VB.NET DLL 调用方法时：

```
My.User.IsInRole(Microsoft.VisualBasic.ApplicationServices.BuiltInRole.Administrator) 
```

我得到了 False 。

这对我来说似乎很不合逻辑。

此外，如果我创建一个引用此 VB.NET 程序集的 VB.NET 项目并以管理员权限运行它，一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:45:00.590

My.User 的 MSDN 文章中有一条注释可能很重要：

> 对于 Windows 应用程序，只有在 Windows 应用程序模板上构建的项目才会默认初始化 My.User 对象。在所有其他 Windows 项目类型中，您必须通过显式调用 My.User.InitializeWithWindowsUser 方法或将值分配给 CurrentPrincipal 来初始化 My.User 对象。

不要犹豫跳过 My.User 并改用 C# 方法。

# amazon-ec2 - ubuntu ec2-instance 上的 cloud-init 每次启动脚本

> ID：10156692
> 
> 赞同：2
> 
> 时间：2012-04-14T19:32:43.443
> 
> 标签：amazon-ec2, ubuntu-11.10, cloud-init

我正在尝试在 ubuntu 11.10 ec2 实例上使用 cloud-init 启动脚本。

我把脚本`script.sh`放在文件夹中`/var/lib/cloud/scripts/per-boot`。
内容`script.sh`很简单：

```
#/!/bin/sh
回声“测试”
```

重新启动后，我收到以下错误：

```
运行部分：无法执行 /var/lib/cloud/scripts/per-boot/script.sh：执行格式错误
运行部分：/var/lib/cloud/scripts/per-boot/script.sh 退出并返回代码 1
2012-04-14 19:10:52,642 - cc_scripts_per_boot.py [警告]：无法在 /var/lib/cloud/scripts/per-boot 中运行部件
2012-04-14 19:10:52,648 - __init__.py [警告]：回溯（最近一次通话最后）：
  文件“/usr/lib/python2.7/dist-packages/cloudinit/CloudConfig/__init__.py”，第 108 行，在 run_cc_modules
    cc.handle（名称，run_args，频率=频率）
  文件“/usr/lib/python2.7/dist-packages/cloudinit/CloudConfig/__init__.py”，第 72 行，在句柄中
    [名称，self.cfg，self.cloud，cloudinit.log，args]）
  文件“/usr/lib/python2.7/dist-packages/cloudinit/__init__.py”，第 309 行，在 sem_and_run
    函数（*参数）
  文件“/usr/lib/python2.7/dist-packages/cloudinit/CloudConfig/cc_scripts_per_boot.py”，第 27 行，在句柄中
    util.runparts(runparts_path)
  运行部分中的文件“/usr/lib/python2.7/dist-packages/cloudinit/util.py”，第 140 行
    raise subprocess.CalledProcessError(sp.returncode,cmd)
CalledProcessError: Command '['run-parts', '--regex', '.*', '/var/lib/cloud/scripts/per-boot']' 返回非零退出状态 1

2012-04-14 19:10:52,648 - __init__.py [错误]：每次启动脚本的配置处理，无，[] 失败

cloud-init 启动于 2012 年 4 月 14 日星期六 19:10:52 +0000 完成。上升 3.70 秒
2012-04-14 19:10:52,672 - cloud-init-cfg [错误]：运行 cloud_config [final] 时出错：['scripts-per-boot']
运行 cloud_config [final] 的错误：['scripts-per-boot']
```

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T20:25:27.350

我相信您的问题与`#/!/bin/sh`不是有效的输入类型有关。需要去掉#后面的/。

```
#!/bin/sh 
echo "test" 
```

如果您在此之后仍然看到问题，请告诉我。

# web-services - 哪种是创建 REST Web 服务的正确方法？

> ID：10156695
> 
> 赞同：3
> 
> 时间：2012-04-14T19:33:07.907
> 
> 标签：web-services, http, rest

我有以下状态机，我想要这个：

1.  创建新订单
2.  向其中添加项目（列表是可选的）
3.  通过调用完成确认订单
4.  付钱
5.  发送

这个流程是通过 REST Web 服务控制的，我不确定哪种方法更好地遵循 REST 原则。

![在此处输入图像描述](../Images/15f48d14843637870904759d1a3edfdc.png)

我想出了两种可能性（下面的数字与上面的数字相对应）：

**第一个 - 操作由路径指定**

```
1\. 
POST /create HTTP/1.1

2\. 
POST /addItem HTTP/1.1
<data>
    <itemId>123</itemId>
</data>

GET /listItems HTTP/1.1

3.
POST /finish HTTP/1.1

4\. 
POST /pay HTTP/1.1
<data>
    <price>123</price>
</data>

5\. 
POST /send HTTP/1.1 
```

**第二个 - 操作在正文中指定**

```
1\. 
POST / HTTP/1.1
<data>
    <operation>create.new.order</operation>
</data>
- returns resId

2\. 
PUT /{resId} HTTP/1.1
<data>
    <itemId>123</itemId>
</data>

GET /items HTTP/1.1

3.
PUT /{resId} HTTP/1.1
<data>
    <operation>finish.order</operation>
</data>

4\. 
PUT /{resId} HTTP/1.1
<data>
    <price>123</price>
    <operation>pay.order</operation>
</data>

5\. 
PUT /{resId} HTTP/1.1    
<data>
    <operation>send.order</operation>
</data> 
```

第二种解决方案似乎更好，但我不知道我是否可以在请求的正文中指定一个操作 - 可以吗？

另外我不确定是否应该在第二个解决方案中使用`PUT`or `POST`at `3`and `5`，因为我并没有真正更新资源，我只是更改状态机的状态。

如果这些都不正确，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:53:35.950

怎么样：

> 发布/订单

从那里你会得到一个`201 Created`响应，以及一个`Content-Location`指定刚刚创建的订单的 URL 的标头，例如`/orders/2876276`

好的，然后将项目添加到现有订单：

> 发布 /orders/2876276

该消息可以包含 url 编码的表单数据，指定您想添加到订单中的任何内容。

然后，

> 获取 /orders/2876276

...获得订单的一些表示。您可以进行内容类型协商以确定是否将其格式化为 json、xml 或其他格式。响应消息将提供有关您希望与请求者共享的订单的所有信息。收到日期、状态、订单项目等。

我不知道究竟`FINISH`是什么，但从我天真的观点来看，这只是对订单项目的一种特殊更新，所以这只是另一个带有特殊表单数据的 POST。在完成 POST 之后，对 a 的响应`GET`将包含一个特殊指示符，表明订单“完成”。

要处理付款，您可以在同一订单上使用另一个 POST。如果您的设计要求跟踪应收账款，那么您可能完全有另一个对象。换句话说，如果每个订单没有一次付款，但如果客户按月或按其他节奏计费，那么您将拥有另一个对象类别，例如`/accounts/39839`. 但在简单的情况下，您可以只使用订单对象来跟踪付款状态。

因此，`POST`向一个订单 URL 提供信用卡或贝宝信息以获取付款。随后，GET 将检索包含已支付订单的表示。

我认为“发送”不是 HTTP 请求。发送是您在收到付款后执行订单的操作。也许您商店中的某些系统可以发布`/orders/872872872`到标记它已发送。随后，GET 将检索包含已发货订单的表示，可能还带有跟踪号。

* * *

我会小心使用`PUT`. PUT 表示将整个对象插入到存储库中，如果对象已经存在则隐式替换。但是您的模型不需要这样做。订单管理器管理订单，并在每个订单上公开一组有限的操作（创建、添加商品等）。插入整个订单不是这些操作之一。因此 PUT 在您的场景中似乎是错误的事情。

如果您将文档插入存储库，则 PUT 是正确的。例如，想象一场拍卖，您提供待售物品。您可以使用`POST`来创建拍卖项目，然后`/items/29829`作为该项目的 URL 接收。然后，可以使用 PUT 将图像添加到正在拍卖的物品 - 您可以 PUT`/items/29829/mainImage`或类似的东西。PUT 意味着你知道你要 PUT 的东西的 URL。

* * *

您问：

> 我不知道我是否可以在请求正文中指定一个操作 - 可以吗？

HTTP 只有一组有限的动词。您的“订单”对象有多种状态。您需要将 HTTP 动词映射到状态转换。对于每个状态转换或状态更改，对订单对象使用 POST 是有意义的。您可能认为这是在请求正文中指定“一个操作”，但对我来说，这是在请求正文中指定请求的详细信息。这正是请求正文的用途。

* * *

有关更多背景信息，请查看[如何喝杯咖啡。](http://www.infoq.com/articles/webber-rest-workflow)

# c - fgets() 不等待输入

> ID：10156696
> 
> 赞同：3
> 
> 时间：2012-04-14T19:33:29.257
> 
> 标签：c, fgets

我写了以下代码：

```
int N;
scanf("%d", &N);
int i;
for (i = 0; i < N; i++) {
  char line[LINE_MAX];
  if (fgets(line, LINE_MAX, stdin) != NULL) {
    // do stuff with line here
    printf("%c - %c\n", line[0], line[1]);
  }
} 
```

我有一个输入文件，其中包含它的行数，然后是我想要处理的行数。所以我将行数读入`N`. 在那之后，我`fgets`用来让生产线能够处理它。

但是，`fgets`似乎不是第一次等待标准输入。我总是得到 的输出`-`，然后它等待输入。意思是，循环的第一次迭代，它不是在等待标准输入，而是像 my`fgets`一样打印出两个由分隔的空字符。`-``printf`

这是为什么？我怎样才能`fgets`每次都等待输入？我觉得这是一个线程问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-20T00:55:55.827

`fflush()`您可以在 scanf() 之后拨打电话，如下所示：

```
int N;
scanf("%d", &N);
fflush (stdin);
int i;
... (rest of code)... 
```

所以换行符从`stdin`缓冲区中删除，下一个`fgets()`将停止请求输入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T19:41:10.110

正如**geekosaur**所说，您没有处理`scanf`. 您可以修改`scanf`格式字符串以将其考虑在内：

```
scanf("%d *[^\n]", &N); 
```

`*[^\n]`表示忽略整数输入后不是换行符的所有内容，但不要对换行符执行任何操作（跳过它）。

测试程序输出：

```
emulawsk@cs:~/testing$ ./test2
3
13
1 - 3
26
2 - 6
59
5 - 9 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-14T19:36:25.043

它与线程无关。 `scanf()`准确读取您的要求；它使其他所有内容都未读，尤其是数据后面的换行符。（您也没有处理用户没有输入您想要的内容的可能性。）

如果要进行面向行的输入，请使用`fgets()`. 不要使用`scanf()`并希望系统能神奇地直觉你想忽略你没有读过的东西。

# javascript - OOP javascript 和简单类实例化

> ID：10156702
> 
> 赞同：6
> 
> 时间：2012-04-14T19:34:06.840
> 
> 标签：javascript, oop

首先，如果这是一个愚蠢的问题，我很抱歉。我在下面写了两个代码片段。从[**这里**](http://ejohn.org/blog/simple-class-instantiation/)找到的第一个代码片段是由我编写的`John Resig`，毫无疑问他是最好的之一，第二个代码片段是我从原始代码中修改的，只是为了理解差异，但我不确定两者之间的区别和我的区别可以和不能两者都比较。请有人帮我理解其中的区别。谢谢。

```
 function makeClass(){
        return function(args){
            if ( this instanceof arguments.callee ) {
                if ( typeof this.init == "function" )
                    this.init.apply( this, args.callee ? args : arguments );
                }
                else  return new arguments.callee( arguments );
        };
    }
    var User = makeClass();
    User.prototype.init = function(first, last){
      this.name = first + " " + last;
    };
    var user = User("John", "Resig");
    console.log(user); 
```

修改版

```
 function myClass(args)
    {
        if (this instanceof arguments.callee) 
        {
            this.init = function(first, last){
                this.name = first + " " + last;
            };
            this.init.apply( this, args.callee ? args : arguments );
        }
        else    return new arguments.callee( arguments );
    }
    var obj = new myClass('Sheikh', 'Heera');
            console.log(obj); 
```

**为什么我应该使用对象的原型来添加一个方法（在创建一个实例之后）而不是在构造函数中编写它？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T19:37:50.837

在对象的原型上而不是在构造函数中定义方法的主要原因是，原型中定义的方法*立即可供*对象的所有实例（在内存中）使用和*共享。*

通过在构造函数中定义方法，该方法特定于创建它的对象的实例。如果您实例化 10 个对象，那么您将在内存中拥有 10个该方法的*副本*，即使它们都是相同的，直到您修改其中一个。

不过要清楚一点，通过在对象实例之间*共享*，我并不是说该方法静态地对其访问的任何属性进行操作。这些属性（如果用 定义`this.`）仍然是特定于实例的。只是您最终不会定义同一方法的多个副本。

# sql - SQL 查询需要从两个单独的表中获取信息

> ID：10156709
> 
> 赞同：2
> 
> 时间：2012-04-14T19:34:33.533
> 
> 标签：sql, oracle, join, count

我正在尝试创建一个查询，该查询将列出同一作者的所有书籍。大多数列表只有一位作者的一本书，但我希望在 db 中列出多本书的作者为该作者显示这些书。

我有两张桌子：

*   **书**-`AuthorID, BkTitle`等
*   **作者**——`AuthorID, AuthFName, AuthLName`

我希望对结果进行排序，`AuthLName`并且报告包含 db 中具有相同`authorid`.

想要的示例结果：

```
 AUTHORID BKTITLE           AUTHFNAME     AUTHLNAME
--------- ----------------- ------------  -----------
    504   KNIGHT FREEDOM     Chris        Feehan
    504   KNIGHT SHOWDOWN    Chris        Feehan 
```

目前，我有以下代码：

```
select AUTHORID, BKTITLE
from BOOK 
where AUTHORID in
    (select AUTHORID from
       (select AUTHORID, 
               count(*) as BOOK_COUNT
        from BOOK
        group by AUTHORid
        order by AUTHORid )
     where BOOK_COUNT >= 2); 
```

这使：

```
 AUTHORID BKTITLE
---------- --------------------
       504 KNIGHT FREEDOM
       504 KNIGHT SHOWDOWN 
```

我需要找到一种从作者表中获取信息并将其添加到其中的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:39:21.243

这应该这样做：

```
SELECT b.AUTHORID, b.BKTITLE, a.AUTHFNAME, a.AUTHLNAME
FROM BOOK b
  INNER JOIN AUTHOR a
    ON b.AUTHORID = a.AUTHORID
AND b.AUTHORID IN
(
  SELECT AUTHORID
  FROM BOOK
  GROUP BY AUTHORID
  HAVING COUNT(AUTHORID) > 1
)
ORDER BY a.AUTHLNAME, a.AUTHFNAME 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:39:49.977

怎么样 - 更新为首先使用 CTE（通用表表达式）来确定哪些作者在数据库表中拥有不止一本书`BOOK`，然后仅列出这些作者及其书籍：

```
;WITH AuthorsWithMoreThanOneBook AS
(
    SELECT AUTHORID, BOOK_COUNT = COUNT(*)
    FROM BOOK
    GROUP BY AUTHORID
    HAVING BOOK_COUNT > 1)
)
SELECT
    b.AUTHORID, b.BKTITLE, a.AuthFName, a.AuthLName
FROM
    BOOK b
INNER JOIN
    AUTHOR a ON b.AuthorID = a.AuthorID
INNER JOIN 
    AuthorsWithMoreThanOneBook A2 ON a.AuthorID = A2.AuthorID
ORDER BY
    a.AuthLName, a.AuthFName 
```

**更新：**好的，您正在使用 Oracle .... 不确定（已经很久没有使用它了） - 但您不能像这样扩展您的原始查询：

```
select bk.AUTHORID, bk.BKTITLE, a.AUTHORFNAME, a.AUTHORLNAME
from BOOK AS bk
INNER JOIN AUTHOR AS a ON a.AUTHORID = bk.AUTHORID
where bk.AUTHORID in
    (select AUTHORID from
       (select AUTHORID, 
               count(*) as BOOK_COUNT
        from BOOK
        group by AUTHORid
        order by AUTHORid )
     where BOOK_COUNT >= 2); 
```

不确定Oracle是否/如何支持这些表别名（`BOOK AS bk`）-但我很确定它确实以某种方式支持它......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T06:02:37.343

您可以通过对每个表的一次访问来执行此操作：

```
SELECT * FROM
(
  SELECT AuthorID, BkTitle, AuthFName, AuthLName
        ,COUNT(*) OVER (PARTITION BY AuthorID)
         AS c
  FROM BOOK
  JOIN AUTHOR USING (AuthorID)
)
WHERE c > 1; 
```

# c++ - C ++中的三角形和稀疏矩阵

> ID：10156712
> 
> 赞同：0
> 
> 时间：2012-04-14T19:34:51.527
> 
> 标签：c++, performance, memory-management, sparse-matrix

这是一个非常简单的问题——在 C++ 中使用三角矩阵和稀疏矩阵的最佳实践是什么？

对于三角矩阵，我建议使用一种简单的数据格式

```
double* myMatrix;
int dimension; 
```

作为自定义类中的数据结构。（我建议它是一个完整形式的方阵。）还有设置和访问元素的方法。

对于稀疏矩阵 - 我知道一些方法，比如只保存行/列中元素的位置及其值。这是您的经验的问题 - 稀疏矩阵的哪个实现将是最好的？

PS 更少的内存，更少的 CPU 使用——这是我的目标，我正在寻找最好的解决方案，而不是最简单的解决方案。所有矩阵都将用于求解线性方程组。矩阵的大小将是巨大的。

非常感谢每一个建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:38:09.333

如果你对矩阵的结构一无所知，那么它基本上和地图一样。你可以使用`std::map<std::pair<int,int>,double>`. 或者`std::unordered_map`，如果你有它。

# sql - 在 vb 中选择 select 以访问 SQL 时出现语法错误

> ID：10156716
> 
> 赞同：0
> 
> 时间：2012-04-14T19:35:25.090
> 
> 标签：sql, vb.net, ms-access

我得到一条 SQL 语句，从 vb 中的访问数据库中进行选择，但出现此错误；当我运行我的程序时，“查询表达式中的语法错误选择 sum(brought_qtty)”。我想我在做正确的事，但似乎不是。如何调整此选择？代码如下：

```
"select distinct(brought_price) as [Price], select sum(brought_qtty) as [Ordinary] from brought_coffee where " & _
"coffee_grade=O, select sum(brought_qtty) as [Premium] from brought_coffee where" & _
"coffee_grade=P, sum(brought_qtty) as [Total Qtty]" & _
", sum(brought_paid) as [paid],  " & _
"sum(brought_bal) as [Balance]" & _
"from brought_coffee, farmer where brought_date=#" & dtc.Text.Trim & "# and farmer_centre='" & cc.Text.Trim & _
"' and farmer.farmer_num=brought_coffee.farmer_num" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:38:27.677

查询中的第二个和第三个`select`产生语法错误...替换`select sum(brought_qtty)`为 just `sum(brought_qtty)`。

# php - 如何制作访问计数器，为网页的每次访问显示图像？创建图像拼贴

> ID：10156720
> 
> 赞同：2
> 
> 时间：2012-04-14T19:36:01.393
> 
> 标签：php, image

基本上，我正在创建一个数字艺术项目。

为此，我的目标是让网页通过为每次访问显示图像来显示其访问次数。所以基本上每次有人访问或刷新网页时，都会出现一个新图像；50 次访问 = 50 张图片等等。我希望从服务器上的文件夹中随机获取图像。我有一个基本访问计数器的代码，但它只适用于会话。我需要编辑此代码，以便每次访问都会出现一个随机图像。显然它应该相当简单，但我对 php 很陌生，并且仍在学习很多东西。

这是我用于访问计数器的代码：

```
session_start();
if(isset($_SESSION['views']))
  $_SESSION['views']=$_SESSION['views']+1;
else
  $_SESSION['views']=1
echo "Page views: ".$_SESSION['views']; 
```

任何帮助将不胜感激:) 感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:50:28.437

您需要使用数据库服务器或键值存储之类的解决方案以某种方式保持服务器上的访问次数。例如，您可以在服务器上安装[Redis](http://redis.io/)，安装 Redis 客户端（例如[Predis](https://github.com/nrk/predis)），然后每次访问时让脚本运行如下：

```
$redis = new Predis\Client();
$redis->incr('views'); 
```

然后，当您想知道您有多少总观看次数时，您可以使用：

```
$views = $redis->get('views'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T19:53:44.393

要使用 .txt 文件存储号码，请执行以下操作：

```
<?php $pageCount = ("count.txt");
$number = file($pageCount);
$number[0] ++; 
$open = fopen($pageCount,"w");
fputs($open ,"$number[0]"); 
fclose($open); echo $number[0]; ?> 
```

现在，所有的访问都添加到count.txt 中，您现在可以添加第二部分以打开图像数量。我在我的手机上，所以我无法测试下一部分，但这个链接可能会有所帮助：[http ://chrisvall.com/coding/php-how-to-get-a-random-image-to-display -from-a-specific-folder](http://chrisvall.com/coding/php-how-to-get-a-random-image-to-display-from-a-specific-folder) 现在，下一部分将使用 $number 作为数字并执行 for 循环，直到所有图像都回显到页面上。我希望这有帮助

# java - Bizzare Java IO 失败，解释

> ID：10156721
> 
> 赞同：-1
> 
> 时间：2012-04-14T19:36:01.657
> 
> 标签：java, memory, file-io

这是有罪的代码：

```
// Demo the java.lang.OutOfMemoryError: Java heap space error.

    import java.util.*;

    public class Bozo {

      void TstReadFile() {
        SubBozo sb = new SubBozo();
        sb.readFile();
      }

   public static void main(String[] args) {
      Bozo b = new Bozo();
      b.TstReadFile();
    }
  }

/** Read in the observing list file. */

import java.io.*;
import java.util.*;

public class SubBozo {

  public boolean readFile() {

    int lineCt = 0;          // Count the lines read in observingList.

    long heap,
         heapMaxSize,
         heapFreeSize;

    String s = "Unstarted";

    FileInputStream fis = null;
    DataInputStream in = null;
    BufferedReader br = null;

    try {
      fis = new FileInputStream("../data/observingList");
      in = new DataInputStream(fis);
      br = new BufferedReader(new InputStreamReader(in));
    } catch (Exception e) {
      System.out.println("Couldn't open ../data/observingList because " +
                         e.getMessage());
    }

    boolean go = true;
    while (go) {
      try {
        s = br.readLine();  // Lines should not be longer than say 256 characters.
      } catch (Exception e) {
        System.out.println("Couldn't read ../data/observingList because " +
                           e.getMessage());
        heap = Runtime.getRuntime().totalMemory();
        heapMaxSize = Runtime.getRuntime().maxMemory();
        heapFreeSize = Runtime.getRuntime().freeMemory();
        System.out.println("" + lineCt + ") " + "Total Memory (MB): " +
                           (heap / 1048576) + "\n  Heap Max Size (MB): " +
                           (heapMaxSize / 1048576) +
                           "\n  Heap Free Size (MB): " +
                           (heapFreeSize / 1048576));
        go = false;
      }

      if ((lineCt++ % 1000) == 0) {
        System.gc();
        heap = Runtime.getRuntime().totalMemory();
        heapMaxSize = Runtime.getRuntime().maxMemory();
        heapFreeSize = Runtime.getRuntime().freeMemory();
        System.out.println("" + lineCt + ") " + "Total Memory (MB): " +
                           (heap / 1048576) + "\n  Heap Max Size (MB): " +
                           (heapMaxSize / 1048576) +
                           "\n  Heap Free Size (MB): " +
                           (heapFreeSize / 1048576));
      }
    }

    try {
      br.close();
      in.close();
      fis.close();
    } catch (Exception e) {
      System.out.println("Couldn't close the input file stream because " +
                         e.getMessage());
    }
    return true;
  }
} 
```

运行时，使用以下命令：

星云：finderChart/src java Bozo

它会引发内存不足错误。这是打印输出：

1) 总内存 (MB): 119 堆最大大小 (MB): 1776 堆可用大小 (MB): 118

1001) 总内存 (MB): 119 堆最大大小 (MB): 1776 堆可用大小 (MB): 119

2001) 总内存 (MB)：119 堆最大大小 (MB)：1776 堆可用大小 (MB)：119

3001) 总内存 (MB): 119 堆最大大小 (MB): 1776 堆可用大小 (MB): 119

线程“主”java.lang.OutOfMemoryError 中的异常：java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100) 处 java.util.Arrays.copyOf(Arrays.java:2882) 处的 Java 堆空间。在 java.io.BufferedReader.readLine(BufferedReader.java:345) 在 java.io.BufferedReader.readLine(BufferedReader) 的 java.lang.StringBuffer.append(StringBuffer.java:306) 的 AbstractStringBuilder.append(AbstractStringBuilder.java:515) .java:362) 在 SubBozo.readFile(SubBozo.java:34) 在 Bozo.TstReadFile(Bozo.java:10) 在 Bozo.main(Bozo.java:15)

现在是奇怪的部分，但我怀疑你已经看过了。JVM 每 1000 行打印一次它的内存使用情况。它没有耗尽内存。

当错误被抛出时，它错过了捕获：

尝试 {

```
 s = br.readLine(); 
```

} 捕捉（异常 e）{

```
 System.out.println("Couldn't read ../data/observingList because " 
 ... 
```

}

所以让我们尝试增加内存：java -Xmx1024m Bozo

相同的结果，所以我不会重复它。

发生的事情是正在读取的文件 obasrvingList 中有一些很长（> 2048 字节）的行。这吓坏了 Java，但直到我尝试在 Vim 中编辑文件并发现 vim 无法编辑它时，才发现对于一般的文本阅读器来说，异常长的行是一个问题。

TIA

汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:45:12.850

你没有问任何问题，但这里有一些答案：

> 当错误被抛出时，它错过了捕获：

因为你在抓`Exception`，`OutOfMemoryError`不是在扩展它。感谢上帝，因为您在记录异常时忽略了堆栈跟踪：

```
System.out.println("Couldn't read ../data/observingList because " +
                       e.getMessage()); 
```

而是始终使用：

```
e.printStackTrace(); 
```

或**更好**- 使用一些日志框架。

> 它没有耗尽内存。

嗯，是的。它尝试分配一个太大的数组（例如：您有 50 MiB 可用空间，它尝试分配 60 MiB）。这就是`StringBuffer`工作原理——将内部数组的大小加倍，同时暂时保留对旧数组和新数组的引用。

> 发生的事情是正在读取的文件 obasrvingList 中有一些很长（> 2048 字节）的行。这吓坏了 Java，但直到我尝试在 Vim 中编辑文件

我可以向你保证，2048 个字符对于 JVM 来说不算什么。我怀疑有问题的行至少有几百万个字符......甚至[vim](/questions/tagged/vim "显示标记为“vim”的问题")也无法打开该文件（可能是有史以来最优化的编辑器），所以这些行可能非常长。

此外，我对整体代码质量几乎没有建议（比如吞下​​异常并返回控制循环`false`的`go`布尔标志）——但这更适合[http://codereview.stackexchange.com](http://codereview.stackexchange.com)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:39:54.007

`BufferredReader.readLine``null`如果没有数据则返回，它不会抛出异常。因此，将您的代码更改为：

```
 while (go) {
     s = br.readLine();
     if (s = null) break; 
```

而不是处理异常。这就是为什么您的代码永远不会离开循环并且可能正在尝试无限分配内存的原因。

# javascript - node.js / socket.io，cookies 只在本地工作

> ID：10156726
> 
> 赞同：8
> 
> 时间：2012-04-14T19:36:34.550
> 
> 标签：javascript, node.js, redis, express, socket.io

我正在尝试使用基于 cookie 的会话，但是它只能在本地机器上工作，而不是通过网络工作。如果我删除与会话相关的东西，它会在网络上很好地工作......

您必须原谅这里缺乏高质量的代码，我刚刚开始使用节点/套接字等，并且找到任何明确的指南都很难，所以我现在处于 n00b 领域。基本上，到目前为止，这是从各种片段中拼凑起来的，对我实际在做什么有大约 10% 的理解......

我在 Chrome 中看到的错误是：

> socket.io.js:1632GET [http://192.168.0.6:8080/socket.io/1/?t=1334431940273](http://192.168.0.6:8080/socket.io/1/?t=1334431940273) 500（内部服务器错误）
> 
> Socket.handshake -------- socket.io.js:1632
> 
> Socket.connect -------- socket.io.js:1671
> 
> 套接字------- socket.io.js:1530
> 
> io.connect -------- socket.io.js:91
> 
> （匿名函数）------- /socket-test/:9
> 
> jQuery.extend.ready -------- jquery.js:438

在服务器的控制台中，我看到：

> 调试 - 提供静态内容 /socket.io.js
> 
> 调试 - 授权
> 
> 警告 - 握手错误 没有 cookie

我的服务器是：

```
var express = require('express')
  , app = express.createServer()
  , io = require('socket.io').listen(app)
  , connect = require('express/node_modules/connect')
  , parseCookie = connect.utils.parseCookie
  , RedisStore = require('connect-redis')(express)
  , sessionStore = new RedisStore();

app.listen(8080, '192.168.0.6');

app.configure(function()
{
    app.use(express.cookieParser());

    app.use(express.session(
    {
        secret: 'YOURSOOPERSEKRITKEY',
        store: sessionStore
    }));
});

io.configure(function()
{
    io.set('authorization', function(data, callback)
    {
        if(data.headers.cookie)
        {
            var cookie = parseCookie(data.headers.cookie);

            sessionStore.get(cookie['connect.sid'], function(err, session)
            {
                if(err || !session)
                {
                    callback('Error', false);
                }
                else
                {
                    data.session = session;
                    callback(null, true);
                }
            });
        }
        else
        {
            callback('No cookie', false);
        }
    });
});

var users_count = 0;

io.sockets.on('connection', function (socket)
{
    console.log('New Connection');

    var session = socket.handshake.session;

    ++users_count;

    io.sockets.emit('users_count', users_count);

    socket.on('something', function(data)
    {
        io.sockets.emit('doing_something', data['data']);
    });

    socket.on('disconnect', function()
    {
        --users_count;

        io.sockets.emit('users_count', users_count);
    });

}); 
```

我的页面 JS 是：

```
jQuery(function($){

    var socket = io.connect('http://192.168.0.6', { port: 8080 } );

    socket.on('users_count', function(data)
    {
        $('#client_count').text(data);
    });

    socket.on('doing_something', function(data)
    {
        if(data == '')
        {
            window.setTimeout(function()
            {
                $('#target').text(data);
            }, 3000);
        }
        else
        {
            $('#target').text(data);
        }
    });

    $('#textbox').keydown(function()
    {
        socket.emit('something', { data: 'typing' });
    });

    $('#textbox').keyup(function()
    {
        socket.emit('something', { data: '' });
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T17:52:51.937

检查您的系统时钟，如果服务器和客户端的时钟不同，cookie 可能会在您设置后立即过期。

# sql-server-2008 - SQL Server 日期格式 (YYYY-MM-DD HH:MI:SS.MMM)

> ID：10156733
> 
> 赞同：2
> 
> 时间：2012-04-14T19:37:19.337
> 
> 标签：sql-server-2008

更新：尝试后我仍然得到这个`(4/14/2012 2:44:01 PM)` 结果

```
 select convert(varchar(30), '4/14/2012 2:44:01 PM',121) 
```

**结束更新**

我应该使用什么格式来获得这个结果集：

```
2012-04-14 14:44:01.683 
```

我尝试使用它，但没有显示微秒/毫秒

```
select convert(varchar(23), '4/14/2012 2:44:01 PM',120) 
```

给我这个结果：

```
4/14/2012 2:44:01 PM 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T19:42:39.243

您非常接近 - 在 MSDN 在线图书的[CAST 和 CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)章节中，您错过了一行正确答案....您可以使用样式号。121 ( *ODBC canonical (with毫秒)* ) 得到你正在寻找的结果：

```
SELECT CONVERT(VARCHAR(30), GETDATE(), 121) 
```

这给了我以下输出：

```
2012-04-14 21:44:03.793 
```

**更新：**根据您更新的问题-当然这不起作用-您正在将字符串（这：`'4/14/2012 2:44:01 PM'`只是**一个字符串**-它**不是**日期时间！）转换为字符串......

您需要**首先**将您拥有的字符串转换为 a`DATETIME`然后将**其**转换回字符串！

试试这个：

```
SELECT CONVERT(VARCHAR(30), CAST('4/14/2012 2:44:01 PM' AS DATETIME), 121) 
```

现在你应该得到：

```
2012-04-14 14:44:01.000 
```

显然，所有毫秒都为零，因为您的原始值不包括任何 ....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T05:15:51.913

将您的日期字符串转换为日期时间格式，如下所示

```
select convert(varchar(23), convert(datetime,'4/14/2012 2:44:01 PM'),120) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T05:17:42.067

```
select convert(varchar(30), CAST('4/14/2012 2:44:01 PM' As DATETIME),121) 
```

# asp.net - ASP.NET 使用导航属性将数据加载到表中

> ID：10156736
> 
> 赞同：0
> 
> 时间：2012-04-14T19:37:31.187
> 
> 标签：asp.net

我有一个创建的实体框架。我正在尝试将新歌曲和新专辑添加到表中。例如，当我尝试添加一首新歌曲时，我使用了下面的方法，它告诉我 s.Artist.ArtistName 上的“对象引用未设置为对象的实例”。我有一个在下拉菜单中显示艺术家列表的网络表单，现在我想为该艺术家添加一首新歌。我怎么做？

```
public Song AddNewSongNav(String ArtistName, String SongName)
{
    using (var context = new MyEntities())
    {
        var s = new Song();
        s.SongTitle = SongName;
        s.Artist.ArtistName = ArtistName;
        s.Artist.WikipediaUrl="http://en.wikipedia.org/Testing";

        context.Songs.AddObject(s);
        context.SaveChanges();
        return s;
    }
} 
```

艺术家表的框架有 ArtistID、ArtistName 和 WikiPediaURL。它具有专辑和歌曲的导航属性。它以 1 对多的形式与歌曲相关联，以 1 对多的形式与专辑相关联。

它有一个 Song 表，其中有一个 SongID、SongTitle 和 Artist_ArtistID。它具有艺术家和专辑的导航属性。它以多对多的方式链接到相册表。

最后，Album 表有一个 AlbumID、AlbumTitle、CoverArt、Year、Genre、MimeType 和 Artist_ArtistID。它具有 Artist 和 Song 的导航属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:04:22.947

Artist 属性不会自动创建 - 您必须首先创建艺术家的实例：

```
 var s = new Song();
    s.SongTitle = SongName;
    s.Artist = new Artist();
    s.Artist.ArtistName = artistName; 
```

# php - MySQL更新字段不同的地方

> ID：10156740
> 
> 赞同：0
> 
> 时间：2012-04-14T19:38:02.020
> 
> 标签：php, mysql

我有一个关于 MySQL 查询的问题。我（显然）希望为此使用尽可能少的查询，希望只有一个。如果信息不同，我想要做的是更新数据库中的列。

例如，假设我有“referer”列和“date”列。如果用户单击链接并且引用者不同但日期相同，我想只更新引用者列。

这是我当前的查询：

```
mysql_query ("
  UPDATE clicks 
  SET 
    clicks = clicks + 1
  , referers = CONCAT(referers, ',$referer')
  , dates = CONCAT(dates, ',$date')
  WHERE shortURL = '$url' 
  AND referer != $referer
"); 
```

有什么方法可以将其整合到一个查询中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:50:33.013

您应该阅读一些有关数据库规范化的内容。第一个规范化规则是：字段必须是原子的。在您的情况下：不要将多个引用者/日期保存到一个以逗号分隔的字段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T19:57:19.830

我同意规范化的答案，但如果你坚持..听起来你需要一个 CASE 声明：

```
UPDATE clicks
SET 
  clicks = clicks + 1
, referers = CONCAT(referers, ',$referer')
, dates = 
   CASE
     WHEN dates REGEXP '/$date/' THEN dates
     ELSE CONCAT(dates, ',$date')
   END CASE
WHERE shortURL = '$url' 
AND referers NOT REGEXP '/$referer/' 
```

注意：这假设 $referer 和 $date 没有任何特殊的正则表达式字符！

# c# - 基于成员资格的 ASP.NET URL 重写

> ID：10156746
> 
> 赞同：1
> 
> 时间：2012-04-14T19:38:38.927
> 
> 标签：c#, asp.net, .net, url-rewriting, asp.net-membership

自从我参与 .NET 或 ASP 以来已经有好几年了。我被投入到一个项目中，以帮助达到迫在眉睫的最后期限。

该项目正在将 Web 应用程序升级到新版本。我的职责是找出一种将用户重定向到他们应该使用的任何版本的方法。我们根本不想修改旧版本，所以我试图在新版本中这样做。

版本 2 位于 www.example.com，而版本 1 位于 www.example.com:8080。我在公司表中创建了一个字段来确定公司应该使用哪个版本。我们正在使用基于表单的身份验证和角色。

我们在 Windows 2008 上的 IIS 7 上运行这两个版本。版本 1 是 .NET 1，版本 2 是 .NET 2.5。

拓扑：Windows Server 2008
IIS 7
默认网站
- WebAppV1
- WebAppV2

由于框架被大量实施， Response.Redirect 不起作用。我需要重写 URL 本身。我还希望能够使用在第 2 版身份验证表单中输入的相同用户名和密码自动提交和登录用户。

有人能告诉我其中哪些是我最好的行动方案吗？

1.  使用 javascript 创建一个空白页面，将用户和 Response.Redirect 重定向到它。这个不允许我提交表单信息。

2.  在 IIS 7 中基于成员角色创建 URL 重写规则。我仍然不知道这是否可能，但还没有找到一种方法来做到这一点。仍然无法弄清楚如何实现用户表单。

3.  在 Global.asax 中的一个函数中找到一些神奇的 url 重写技巧。到目前为止，我还没有成功，但想知道在浪费时间之前是否需要更深入地挖掘。我想我遇到了一些可以提交表单的代码，但无法重写我可以看到的 url。

# javascript - Javascript：无法真正理解函数返回

> ID：10156753
> 
> 赞同：0
> 
> 时间：2012-04-14T19:39:10.490
> 
> 标签：javascript

这可能非常容易，但我无法解决正在发生的事情。

```
 function doSomething(a)
{
   var num=10;
   return setTimeout(
   function(){ a(num); }, 1000);
} 
```

唯一真正让我感到困惑的是**a(num)**部分。它实际上是做什么的？
**提醒：**我真的在问，因为我不熟悉 javascript 语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T19:41:27.233

执行时`function` `doSomething()`传递参数`a`， `a`也是一些在 1 秒后过期时调用的参数，然后调用`function`传递的参数调用`setTimeout()``function` `a()``num`

[示例用法](http://jsfiddle.net/NxdEn/)：

```
// call doSomething() passing the test() function as an argument
doSomething(test);

// takes a number as an argument and shows an alert with that value
function test(number)
{
   alert(number);
}

// takes a function as an argument that will perform a 1 second timeout then execute the function called a
function doSomething(a)
{
   var num=10;
   return setTimeout(
   function(){ a(num); }, 1000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T19:40:35.890

它`a`使用变量引用的值`num`作为参数调用变量引用的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T19:52:26.890

**setTimeout**返回一个**timeoutID**，可以使用**clearTimeout**取消它，所以如果你运行*doSomething*很多次你会得到代表不同**timeoutID**的不同整数。

在您的情况下**， a**必须是一个函数，因此您可以使用参数**num调用它**

例子：

```
function doSomethingElse (justANumber) {
    return justANumber + 1;
}

// Here you call your function
doSomething(doSomethingElse);

// or another special case
doSomething(function (justANumber) {return justANumber + 1;}); 
```

# apache - apache反向代理：如何转发代理服务器的HTTP_HOST

> ID：10156754
> 
> 赞同：2
> 
> 时间：2012-04-14T19:39:18.770
> 
> 标签：apache, proxy, reverse-proxy, http-host

我们的本地开发设置需要 DMZ 中的一个框，每个开发人员在其 apache 配置中都有一行用于代理。看起来像：

```
ProxyPreserveHost on

ProxyPass /user1/ {user1's IP}
ProxyPassReverse /user1/ {user1's IP}

ProxyPass /user2/ {user2's IP}
ProxyPassReverse /user2/ {user2's IP}

#etc 
```

我们的公共 URL 变成`{DMZ server}/user1`,`{DMZ server}/user2`等等 **。问题**是在开发者的盒子上， 的值`$_SERVER['HTTP_HOST']`只是`{DMZ server}`，*没有*用户的子目录。期望的行为是`/user%/`作为真实的主机名。

我尝试过覆盖 HOST var 和一些重写规则，但没有任何效果。

创建子域不是一种选择。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:23:24.177

[http://httpd.apache.org/docs/2.0/mod/mod_proxy.html#proxypreservehost](http://httpd.apache.org/docs/2.0/mod/mod_proxy.html#proxypreservehost)似乎是答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:50:56.893

我要试一试并提出以下建议：

```
SetEnvIf Host (.*) custom_host=$1
RequestHeader set X-Custom-Host-Header "%{custom_host}e/%{REQUEST_URI}e/%{QUERY_STRING}e" 
```

这应该希望设置一个名为 X-Custom-Host-Header 的请求标头，然后您可以在 PHP 中获取该标头。如果你愿意，你可以尝试覆盖主机头，但我不确定它的含义。Host 标头是一个特殊的 HTTP 标头，通常只包含 HTTP 请求的主机部分，而不是完整的请求 url。

不幸的是，未经测试，但如果您能更详细地阐明您在寻找什么，这将有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T02:00:58.293

编辑，第三个答案：

看起来 Apache 以前听过这个抱怨，解决方案是[`mod_substitute`](http://httpd.apache.org/docs/2.2/mod/mod_substitute.html). 您需要使用它来重写要插入的文档中返回的所有 URL `/user1/`。

编辑，第二个答案：

根据您评论中的其他信息，我会说您在 DMZ 服务器上的 Apache 配置是正确的。您要求的是让开发人员机器生成包含其上下文路径的 URL（这是类似于您的`/user1/`位的 J2EE 术语）。我对 PHP 没有任何经验，所以我不知道它是否有这样的功能，但快速搜索[表明它没有](https://stackoverflow.com/questions/10197862/php-concept-of-context-path)。

否则，您必须推出自己的函数，将相对 URL 转换为绝对 URL，使其可配置，以便您可以让它在主机名中添加一些内容，然后强制每个人专门使用该函数来生成 URL。有关查找本地文件的相关问题的解决方案，请参阅[这篇旧的（过时的？）PHP 最佳实践文章](http://www.odi.ch/prog/design/php/guide.php)中的“使您的应用程序位置独立”以获取一些指导。

上一个答案：（不起作用，导致重定向循环）

我仍然不清楚您要做什么或“在开发应用程序上运行主要是 apache 和 PHP，用于托管各种应用程序”是什么意思，但作为有根据的猜测，您是否尝试过：

```
ProxyPass /user1/ {user1's IP}/user1/
ProxyPassReverse /user1/ {user1's IP}/user1/ 
```

如果我正在设置您似乎想要拥有的那种环境，我希望`$_SERVER['HTTP_HOST']`在`{DMZ server}`每台开发机器上，以便开发机器的环境看起来就像（或至少更像）在其上运行的代码的生产环境.

# iphone - 为iphone填写UIImage请求objective-c

> ID：10156762
> 
> 赞同：0
> 
> 时间：2012-04-14T19:39:54.627
> 
> 标签：iphone, objective-c, xcode, uiimage, cgcontext

我有一个奇怪的问题......我有一个请求：我有一个图像，我在这个图像中的操作将产生相同的图像，不透明度 = 40% 和填充 = 37%.. 但我不明白填充请求。 ..我怎样才能在我的 UIIMage 上得到这个？这是我的代码：

```
UIImage *myImage = [UIImage imageNamed:@"myimage.png"];
    [myImage drawInRect:CGRectMake(0, 0, aSourceImage.size.width, aSourceImage.size.width) blendMode:kCGBlendModeNormal alpha:0.37];
//..other code... 
```

# mongodb - 查找匹配的部分字符串

> ID：10156768
> 
> 赞同：5
> 
> 时间：2012-04-14T19:40:53.630
> 
> 标签：mongodb, mongoose

我似乎无法在谷歌或猫鼬网站上找到答案，所以我在这里问。如果可能，我如何在文档中搜索部分匹配的字符串。

前任：

在用户集合中：

```
{ name: "Louis", location: "Paris, France" },
{ name: "Bill", location: "Paris, Illinoid" },
{ name: "Stephen", location: "Toronto, Ontario" } 
```

猫鼬功能：

```
searchForCity("Paris"); 
```

结果将是来自用户集合的文档列表，位置字符串中包含“Paris”。前任：

```
[
    { name: "Louis", location: "Paris, France" },
    { name: "Homer", location: "Paris, Illinois" }
] 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-14T20:00:15.370

您可以为此使用[正则表达式](http://mongoosejs.com/docs/api.html#query_Query-regex)：

> **`Query#regex`**,**`Query#$regex`**
> 
> 指定`$regex`运算符。
> 
> ```
> query.regex('name.first', /^a/i) 
> ```

所以是这样的：

```
User.where('location').$regex(/Paris/);
User.where('location').$regex(/paris/i); // Case insensitive version 
```

请记住，正则表达式查询可能非常昂贵，因为 MongoDB 必须针对每个单独的`location`. 如果您可以在开始时锚定您的正则表达式：

```
User.where('location').$regex(/^Paris/); 
```

然后您可以索引该位置，MongoDB 将使用该索引。

# java - Java 错误：java.lang.NullPointerException

> ID：10156773
> 
> 赞同：0
> 
> 时间：2012-04-14T19:41:42.870
> 
> 标签：java, sorting, nullpointerexception, compareto

我正在编写代码以从文件中读取一些记录并以特殊方式对它们进行排序。我尝试了这样的代码：

```
public class Main {

    static class judgement implements Comparable<judgement> {
        public int q;
        public int d;
        public int r;

        public int compareTo(judgement j) {
            int k = ((judgement) j).q;
            return 0;
        }
    }

    public static void method() throws Exception {
        judgement[] judgements;
        judgements = new judgement[18425];
        try {
            // fill the "judgements" array
        } finally {
            Arrays.sort(judgements);
        }
    }

    public static void main(String[] args) throws Exception {
        method();
    } 
```

}

但是我在函数 compareTo 中得到错误*NullPointerException 。*有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T19:43:03.860

那是因为数组中填充了空指针。比较器无法将空对象相互比较。

创建数组不会初始化数组的每个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T19:45:17.970

确保数组中只有关于 compareTo() 实现的非空元素。否则，在您的函数 compareTo() 中，对假定的现有判断调用“q”属性会导致 NullPointerException。

此外，避免使用选项卡，更喜欢使用集合。在您的情况下，您可以使用 TreeSet 对象而不是数组，因为它们在内部使用元素的 compareTo() 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T19:46:25.413

您正在使用空值初始化数组。

```
judgements = new judgement[18425]; 
```

并且您没有检查 null 值。你必须使用 if 语句。

```
public int compareTo(judgement j) {
          int k =0;
    if(j!=null){
    k = ((judgement) j).q;
    } 

                return 0;
            } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-14T19:58:03.260

可能发生的是您的数组的某些元素是`null`.

在您的`compareTo`函数中包含一个空检查是一种很好的做法。此外，现在你的`compareTo`函数是非功能性的：它总是返回 0 - 这就像说所有项目都是平等的。

您的另一个问题是，您似乎正在将 a`try{}finally{}`用于不应该用于的事物。

# ruby-on-rails - 使用哪个 gem：emberjs-rails vs rasputin vs ember-rails？

> ID：10156775
> 
> 赞同：2
> 
> 时间：2012-04-14T19:42:00.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ember.js

我想在应用程序中使用 ember.js。发现有3个宝石：

1.  emberjs-rails
2.  拉斯普京
3.  余烬轨道

不清楚要和哪一个一起去。请帮我决定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:23:44.717

我建议使用官方维护的宝石 ember-rails。rasputin 的作者 Paul Chavard 最近将 rasputin 的许多[好想法带入](https://github.com/emberjs/ember-rails/commits/master)了 ember-rails。

Ember-rails 预编译把手模板并使用多个扩展名（“.js.hjs”、“.hbs”或“.handlebars”）。它还可以灵活地从您的 ember 视图中引用模板（请参阅自述文件中的选项）。

不幸的是，我认为将 gem 更新到 ruby​​gems.org 时出现了临时问题。现在，如果你想使用最新版本，你需要直接从 git 中包含 gem：

```
gem 'ember-rails', :git => 'git://github.com/emberjs/ember-rails.git' 
```

# python - Python：为什么存在 int.numerator 和 int.denominator？

> ID：10156777
> 
> 赞同：25
> 
> 时间：2012-04-14T19:42:09.527
> 
> 标签：python, math, int

`int.numerator`对我来说`int.denominator`是个谜。

`help(int.numerator)`状态：

> 最低限度的有理数的分子

但据我所知，`int`不是有理数。那么为什么存在这些属性呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-14T19:45:24.087

请参阅[http://docs.python.org/library/numbers.html](http://docs.python.org/library/numbers.html) -int( `numbers.Integral`) 是`numbers.Rational`.

```
>>> import numbers
>>> isinstance(1337, numbers.Integral)
True
>>> isinstance(1337, numbers.Rational)
True
>>> issubclass(numbers.Integral, numbers.Rational)
True 
```

int 的分母始终是`1`，而分子是值本身。

在[**PEP 3141**](http://www.python.org/dev/peps/pep-3141/)中，您可以找到有关各种数字类型实现的详细信息，例如证明前面的陈述：

```
@property
def numerator(self):
    """Integers are their own numerators."""
    return +self

@property
def denominator(self):
    """Integers have a denominator of 1."""
    return 1 
```

# java - 将导入的文本文件的行转换为数组并打印数组以在 Netbeans 和 Swing 中制作图形

> ID：10156779
> 
> 赞同：0
> 
> 时间：2012-04-14T19:42:12.510
> 
> 标签：java, swing, file-io

我想导入任何 .txt 文件（请注意 .txt 文件在一列中有 3 组数字；每组用空格分隔）

```
2   
3    
4   

3   
2   
1  

1   
2  
3 
```

并将一组数字转换为数组。（数组 1、2 和 3）

```
array1[] = {2,3,4}   
array2[] = {3,2,1}   
array3[] = {1,2,3} 
```

然后能够在 JFreeGraph 库中绘制数组，这就是我开始的方式......我正在使用 netbeans 和 java Swing

```
 @Action
public void openMenuItem() {

    int returnVal = jFileChooser1.showOpenDialog(null);     
    if (returnVal == JFileChooser.APPROVE_OPTION) {  
        File file = jFileChooser1.getSelectedFile();

    try {
    FileReader fileReader = new FileReader(file);    
            jTextArea2.read(new FileReader(file.getAbsolutePath()), null);         

        } catch (IOException ex) {
            System.out.println("problem accessing file" + file.getAbsolutePath());
        }
    } else {
        System.out.println("File access cancelled by user.");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T20:36:56.510

逐行读取文件，可能使用[BufferedReader](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine%28%29)和[readLine](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine%28%29)。一旦你遇到一个空行 - 你有一组新的数字。这是一个过于简化的示例，它维护一个列表列表，并且只读取字符串：

```
public static List<List<String>> parseFile(String fileName){
    BufferedReader bufferedReader = null;
    List<List<String>> lists = new ArrayList<List<String>>();
    List<String> currentList = new ArrayList<String>();
    lists.add(currentList);

    try {
        bufferedReader = new BufferedReader(new FileReader(fileName));
        String line = null;
        while ((line = bufferedReader.readLine()) != null) {
            if (line.isEmpty()){
                currentList = new ArrayList<String>();
                lists.add(currentList);
            } else {
                currentList.add(line);
            }
        }

    } catch (FileNotFoundException ex) {
        ex.printStackTrace();
    } catch (IOException ex) {
        ex.printStackTrace();
    } finally {
        try {
            if (bufferedReader != null)
                bufferedReader.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

    return lists;
} 
```

**编辑**：使用带有 JTextArea 的结果列表

```
List<List<String>> lists = parseFile("test.txt");
for (List<String> strings : lists){
    textArea.append(StringUtils.join(strings, ",") + "\n");
    System.out.println(StringUtils.join(strings, ","));
} 
```

# android - 关于示例“ActionBarCompat”的问题

> ID：10156783
> 
> 赞同：1
> 
> 时间：2012-04-14T19:42:38.423
> 
> 标签：android

在过去的几天里，我一直在努力解决一个问题。我真的很感谢你的帮助！

当我使用目标 API 级别 14 构建/运行示例“ActionBarCompat”时。一切正常。

然后我切换到目标 API 级别 8（毕竟，这意味着在具有旧 API 级别的旧设备中使用），看起来没有手动注释掉很多专门调用支持 API 级别 8 及更高级别的代码（例如 android .R.id.home, Build.VERSION_CODES.HONEYCOMB)，示例应用程序根本不会构建。

这是否意味着一个应用程序必须有多个源代码版本才能在不同的 api 级别上运行？理想情况下，一套源代码可用于所有 API 级别的设备。

提前致谢！

谦虚的学习者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T20:27:38.620

他们提供的代码应该在 api 级别 4 到 15 上运行。我可以验证它是否在 api 8 和 api 15 上运行，因为我在运行 froyo(2.2) 的 Droid Incredible 和运行 ICS(4.0) 的 Galaxy Nexus 上运行相同的 apk .3)。您可以将 targetsdkversion 设置为 14。

确保已将 /extras/android/support/v4/android-support-v4.jar 下的 sdk 中的支持包添加到项目中。将该文件复制到 /libs 目录，右键单击它并选择 Build Path > Add to Build Path。完整的说明在[http://developer.android.com/sdk/compatibility-library.html](http://developer.android.com/sdk/compatibility-library.html)

# javascript - 在 Rails 中是否可以通过 javascript 验证输入

> ID：10156788
> 
> 赞同：2
> 
> 时间：2012-04-14T19:43:21.600
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我需要通过javascript验证输入是否等于数据库中的某个值（不刷新页面），这可能吗？你如何在Rails 3中做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:59:17.667

您需要查看 client_side_validations gem。这集成了 Rails、jQuery、服务器和客户端验证： [https ://github.com/bcardarella/client_side_validations](https://github.com/bcardarella/client_side_validations)

Ryan Bates 有一个很好的关于这个主题的截屏视频： [http ://railscasts.com/episodes/263-client-side-validations](http://railscasts.com/episodes/263-client-side-validations)

进入视频大约 4 分钟，他执行 ajax 请求来验证数据库中用户名的唯一性。

并浏览他的例子的来源 [http://github.com/railscasts/episode-263](http://github.com/railscasts/episode-263)

# c++ - C++ 指针和对象实例化

> ID：10156789
> 
> 赞同：4
> 
> 时间：2012-04-14T19:43:31.980
> 
> 标签：c++, object, pointers, new-operator, instantiation

这有效：

```
MyObject *o;
o = new MyObject(); 
```

这不会：

```
MyObject o = new MyObject(); 
```

为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-14T19:45:45.390

关键字`new` [返回一个指针](http://msdn.microsoft.com/en-us/library/kewsb8ba%28v=vs.71%29.aspx)。它必须分配给对象的指针。

这也可以：

```
MyObject o = MyObject(); 
```

编辑：

正如 Seth 所评论的，上面的内容等价于：

```
MyObject o; 
```

如果没有给出构造函数，则调用默认构造函数（即不带参数）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T19:44:43.930

因为它们不是等价的。尝试：

```
 MyObject* o = new MyObject(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-14T19:48:56.450

`new MyObject()`返回指向类型对象的指针`MyObject`。所以实际上您正在尝试分配一个对象`MyObject*`（是的，指针也可以被视为一个对象）。因此，您必须声明一个变量`MyObject*`或兼容的东西，例如`std::shared_ptr<MyObject>`.

正确的初始化是

```
// in C++03
MyObject* o(new MyObject());

// in C++11
MyObject* o {new MyObject()}; 
```

虽然任务

```
MyObject* o = new MyObject(); 
```

也是有效的。

# java - 如何动态更新活动的适配器？

> ID：10156791
> 
> 赞同：0
> 
> 时间：2012-04-14T19:43:43.007
> 
> 标签：java, android, adapter

我正在开发一个结合了 SQL 和适配器的应用程序。主要问题是一旦我更新了数据库，适配器将不会直接反映我的更新。这是代码：

```
public class RSSItemActivity extends ListActivity {
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.rssitem);

        long channelid = getIntent().getExtras().getLong(RSSReaderApp.CHANNEL_KEY);
        DBAdaptor dbAdaptor = ((RSSReaderApp)getApplication()).getDBAdaptor();
        Cursor cursor = dbAdaptor.getRssItems(channelid);

        adapter = new RSSItemAdapter(this, R.layout.rssitemview, cursor);

        setListAdapter(adapter);
} 
```

如您所见，这段代码从 SQL 中获取数据`Cursor cursor = dbAdaptor.getRssItems(channelid);`（获取 RssItems 只是从 SQL 加载我们想要在屏幕上呈现的数据）。但是，我在同一个活动中有一些底部，如果我按下它，它将更改 SQL 中的值，这应该会影响它检索的数据。（比如有一个栏目决定这些项目的颜色是什么，原来是白色的，按了之后应该是蓝色了真实呈现还是一样的颜色。我曾尝试使用`adapter.swapCursor(dbAdapter.getRssItems(id));`在底部每次按下按钮时更新光标，但它会让我原来的显示消失（可能是因为原来的适配器丢失了它的光标，所以它什么都不能显示），我必须重新加载该页面才能获得正确的输出。有没有办法可以立即更新输出？感谢您提前回复=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:51:15.613

您将不得不更新适配器中的光标。您可以调用以下命令：

```
// Closes the old cursor as well.
adapter.changeCursor(dbAdapter.getRssItems(id)); 
// Notify the view that the underlying data has changed.
adapter.notifyDataSetChanged(); 
```

此外，与 swapCursor() 的区别在于 changeCursor 会自动关闭旧游标，而 swapCursor 不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:22:59.873

尝试这个...

```
runOnUiThread(returnResult);

private Runnable returnResult = new Runnable() {

    @Override
    public void run() {
        if(array_list.size() > 0)
        {
            m_adapter.notifyDataSetChanged();
            for(int i=0;i<array_list.size();i++)
                m_adapter.add(array_list.get(i));
        }
        m_adapter.notifyDataSetChanged();

    }
  }; 
```

# netbeans - .sass 文件的 Netbeans 7.x 语法高亮显示？

> ID：10156792
> 
> 赞同：10
> 
> 时间：2012-04-14T19:43:43.020
> 
> 标签：netbeans, sass

有谁知道在 Netbeans 7.x 中向 .sass 文件添加语法高亮的插件或方法？

我发现的这个插件[http://plugins.netbeans.org/plugin/34929/scss-support](http://plugins.netbeans.org/plugin/34929/scss-support)为 .scss 添加了语法高亮，但我需要一些针对 .sass 文件的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T16:09:33.700

[最近](https://blogs.oracle.com/netbeanswebclient/entry/editing_css_preprocessors_sources)在 Netbeans 代码库中添加了对 SASS 和 LESS 的本机支持- 在下一个主要版本（可能是 7.4？）发布之前，您可以使用当前的“[开发版本](http://bits.netbeans.org/download/trunk/nightly/latest/)”获得它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T19:20:28.203

找到了这个插件，它可以满足我的需要：

[http://code.google.com/p/postcomment/downloads/detail?name=org-netbeans-modules-haml.nbm&can=2](http://code.google.com/p/postcomment/downloads/detail?name=org-netbeans-modules-haml.nbm&can=2)。

一个缺点是它不允许自定义语法颜色，但我通过编辑以下插件文件找到了一种方法（您必须解压缩 .nbm 和 .jar 文件才能做到这一点，然后使用重新归档它们zip 没有任何压缩）：

`org-netbeans-modules-haml.nbm/netbeans/modules/org-netbeans-modules-haml.jar/org/netbeans/modules/haml/sass.nbs`

希望这对其他人也有帮助

# ios - 设置自定义 UILabel

> ID：10156794
> 
> 赞同：0
> 
> 时间：2012-04-14T19:44:20.923
> 
> 标签：ios, fonts, uilabel

我想获得`UILabel`与此图像中相同的背景和字体。

![在此处输入图像描述](../Images/a503ace2461df6d888febad8f5f5609c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T20:02:42.317

很简单，首先拖放一个标签。

![在此处输入图像描述](../Images/43a5cf042bf59a58b5802127ab25dca7.png)

选择您的标签，然后您可以通过执行以下操作来调整其属性。

定义自定义字体颜色。

![在此处输入图像描述](../Images/bd3f41f162bce86f690e154f2f1c630c.png)

选择您认为最匹配您正在寻找的字体。

![在此处输入图像描述](../Images/97f86ffb5c06b9d2a5bdd1d8b288c439.png)

更改背景颜色。

![在此处输入图像描述](../Images/fda054af2009e9ef813137b756cc8aec.png)

或者对于作为标签背景的渐变效果，您可以通过将图像设置为背景来做到这一点。

```
theLabel.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"blah"]]; 
```

我已经指导您完成了实现这一目标的步骤，但为了将来参考，您不会仅仅通过要求某人为您完成工作而在此网站上获得很好的响应。

# python - 如何在 Outlook 规则中传递参数以运行 Python 脚本？

> ID：10156795
> 
> 赞同：17
> 
> 时间：2012-04-14T19:44:24.323
> 
> 标签：python, outlook, rules

我创建了一个shutdown.py 脚本来关闭我的计算机。
我在 Microsoft Outlook 中有一个工作规则，当我收到主题中包含 %BLAHBLAHBLAH% 的电子邮件时，它会执行我的 Python 脚本。

是否可以在执行之前将电子邮件的主题行传递到 Python 脚本中？
基本上，我希望主题行中有一个关键字来执行某个脚本，但也能够将参数“传递”到电子邮件的主题行到 Python 脚本。
例如，如果我发送 %shutdown30% 我的 python 脚本将解析字符串 %shutdown30% 并使用 30 作为参数在 30 分钟内关闭计算机。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-10T17:17:39.450

当您可以简单地从 python 中完成所有操作时，为什么要在 Outlook 中创建一个在收到电子邮件时运行脚本的规则。

使用 Python 监视所有传入电子邮件的 Outlook，然后在收到主题为 %BLAHBLAH% 的电子邮件时执行一些代码是可能的。这是一个例子：

```
import win32com.client
import pythoncom
import re

class Handler_Class(object):
    def OnNewMailEx(self, receivedItemsIDs):
        # RecrivedItemIDs is a collection of mail IDs separated by a ",".
        # You know, sometimes more than 1 mail is received at the same moment.
        for ID in receivedItemsIDs.split(","):
            mail = outlook.Session.GetItemFromID(ID)
            subject = mail.Subject
            try:
                # Taking all the "BLAHBLAH" which is enclosed by two "%". 
                command = re.search(r"%(.*?)%", subject).group(1)

                print command # Or whatever code you wish to execute.
            except:
                pass

outlook = win32com.client.DispatchWithEvents("Outlook.Application", Handler_Class)

#and then an infinit loop that waits from events.
pythoncom.PumpMessages() 
```

# objective-c - Apple Mach-O 链接器警告和错误

> ID：10156797
> 
> 赞同：0
> 
> 时间：2012-04-14T19:44:40.583
> 
> 标签：objective-c, ios, xcode

请看这张取自 xcode 的图片：

![在此处输入图像描述](../Images/269a974e505bef42813442ad4aa7a11f.png)

这些似乎与我在名为 Global.h 的文件中定义的全局变量有关

但我认为 Global.h 没有任何问题，那么为什么会出现这些错误？

**这是构建日志：**

```
Ld /Users/zak/Library/Developer/Xcode/DerivedData/Kidsfridge-    amcsbtrvmfjdgoapuiabisqnzsze/Build/Intermediates/ArchiveIntermediates/Kidsfridge/IntermediateB    uildFilesPath/Kidsfridge.build/Adhoc-iphoneos/Kidsfridge.build/Objects-    normal/armv7/Kidsfridge normal armv7  
    cd "/Users/zak/Downloads/Kidsfridge20120302_1 2/Kidsfridge"  
    setenv IPHONEOS_DEPLOYMENT_TARGET 4.2  
    setenv PATH       "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/App    lications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"  
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -    arch armv7 -isysroot          /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS    5.1.sdk -L/Users/zak/Library/Developer/Xcode/DerivedData/Kidsfridge-    amcsbtrvmfjdgoapuiabisqnzsze/Build/Intermediates/ArchiveIntermediates/Kidsfridge/BuildProductsPath/Adhoc-iphoneos "-L/Users/zak/Downloads/Kidsfridge20120302_1     2/Kidsfridge/Twitter/Twitter+OAuth/Libraries & Headers" -  F/Users/zak/Library/Developer/Xcode/DerivedData/Kidsfridge-  amcsbtrvmfjdgoapuiabisqnzsze/Build/Intermediates/ArchiveIntermediates/Kidsfridge/BuildProductsPath/Adhoc-iphoneos -filelist /Users/zak/Library/Developer/Xcode/DerivedData/Kidsfridge-amcsbtrvmfjdgoapuiabisqnzsze/Build/Intermediates/ArchiveIntermediates/Kidsfridge/IntermediateBuildFilesPath/Kidsfridge.build/Adhoc-iphoneos/Kidsfridge.build/Objects-normal/armv7/Kidsfridge.LinkFileList -dead_strip -miphoneos-version-min=4.2 -framework CoreLocation -framework CoreMedia -framework AssetsLibrary -framework ImageIO -framework MobileCoreServices -framework CFNetwork -lz -lxml2 -framework Foundation -framework UIKit -framework CoreGraphics -framework QuartzCore -framework MessageUI -framework SystemConfiguration -framework Security -lsqlite3 -lOAuth -o /Users/zak/Library/Developer/Xcode/DerivedData/Kidsfridge-amcsbtrvmfjdgoapuiabisqnzsze/Build/Intermediates/ArchiveIntermediates/Kidsfridge/IntermediateBuildFilesPath/Kidsfridge.build/Adhoc-iphoneos/Kidsfridge.build/Objects-normal/armv7/Kidsfridge

ld: warning: alignment lost in merging tentative definition _isAlreadyAdded  
ld: warning: alignment lost in merging tentative definition _isSearching
Undefined symbols for architecture armv7:  
  "_isFavorite", referenced from:  
      -[ArtworkViewController tableView:didSelectRowAtIndexPath:] in ArtworkViewController.o  
      -[ArtworkThumbNailView reloadScrollView] in ArtworkThumbNailView.o  
      -[ArtworkThumbNailView LoadData] in ArtworkThumbNailView.o  
      -[ArtworkThumbNailView viewDidLoad] in ArtworkThumbNailView.o  
      -[ArtworkImageViewController LoadFullImageArray] in ArtworkImageViewController.o  
      -[ArtworkImageViewController viewWillAppear:] in ArtworkImageViewController.o  
      -[ArtworkImageViewController viewDidLoad] in ArtworkImageViewController.o  
      ...  
ld: symbol(s) not found for architecture armv7  
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:50:21.773

我用附加到我的 appDelegate 的属性替换了全局变量，错误就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T21:44:16.253

我注意到只有 global.h 文件中的布尔值产生了这个警告，（global.h 文件导入到所有 .m 文件中）

我将 BOOL 更改为 int，所有警告都消失了。

# iphone - UIButton ControlState 没有按要求响应

> ID：10156799
> 
> 赞同：0
> 
> 时间：2012-04-14T19:44:58.973
> 
> 标签：iphone, uibutton

好吧，我有一个自定义的 uitabbarcontroller，上面有 3 个 UIButtons（模拟选项卡）。我已经为正常、选定和突出显示的状态设置了背景图像（选定和突出显示都是相同的）。一切正常，但有一件事：当我选择了选项卡（按钮）时，该选项卡再次被按下，而不是突出显示它显示按钮被按下（变暗）。我尝试将属性 adjustsImageWhenHighlighted 设置为 NO，但它并没有变暗，而是显示了正常状态背景。

有什么建议吗？

编辑：这是我在 UITabBarController 子类中的代码

```
#import "MyTabBarViewController.h"

@interface MyTabBarViewController ()

@end

@implementation MyTabBarViewController

ExploreViewController *exploreController;
ProfileViewController *profileController;
UIButton* leftButton;
UIButton* rightButton;

- (void)viewDidLoad
{
    [super viewDidLoad];

    exploreController = [[ExploreViewController alloc] initWithNibName:@"ExploreViewController" bundle:nil];

    profileController = [[ProfileViewController alloc] initWithNibName:@"ProfileViewController" bundle:nil];

    self.viewControllers = [NSArray arrayWithObjects:exploreController, profileController, nil];

    [self addLeftButtonWithImage: [UIImage imageNamed:@"LeftTabBarIcon"] highlightImage:[UIImage imageNamed:@"LeftTabBarIcon_On"]];
    [self addRightButtonWithImage: [UIImage imageNamed:@"RightTabBarIcon"] highlightImage:[UIImage imageNamed:@"RightTabBarIcon_On"]];
}

- (void) leftTabPressed
{
    leftButton.selected = YES;
    rightButton.selected = NO;
    [self setSelectedViewController:exploreController]; 
}

- (void) rightTabPressed
{
    rightButton.selected = YES;
    leftButton.selected = NO;
    [self setSelectedViewController:profileController];    
}

-(void) addLeftButtonWithImage:(UIImage*)buttonImage highlightImage:(UIImage*)highlightImage
{
    leftButton = [UIButton buttonWithType:UIButtonTypeCustom];
    leftButton.adjustsImageWhenHighlighted = NO;
    [[leftButton imageView] setContentMode: UIViewContentModeScaleAspectFit];
    [leftButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
    [leftButton setBackgroundImage:highlightImage forState:UIControlStateHighlighted];
    [leftButton setBackgroundImage:highlightImage forState:UIControlStateSelected];
    leftButton.frame = CGRectMake(0.0, 367, 160.0, 49.0);
    [leftButton addTarget:self action:@selector(leftTabSelectPressed) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:leftButton];
}

-(void) addRightButtonWithImage:(UIImage*)buttonImage highlightImage:(UIImage*)highlightImage
{
    rightButton = [UIButton buttonWithType:UIButtonTypeCustom];
    rightButton.adjustsImageWhenHighlighted = NO;
    [[rightButton imageView] setContentMode: UIViewContentModeScaleAspectFit];
    [rightButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
    [rightButton setBackgroundImage:highlightImage forState:UIControlStateHighlighted];
    [rightButton setBackgroundImage:highlightImage forState:UIControlStateSelected];
    rightButton.frame = CGRectMake(160.0, 367, 160.0, 49.0);
    [rightButton addTarget:self action:@selector(rightTabPressed) forControlEvents:UIControlEventTouchUpInside];

    [self.view addSubview:rightButton];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T12:55:33.247

对于您的评论，您的代码将如下所示：

```
-(void) addRightButtonWithImage:(UIImage*)buttonImage highlightImage:(UIImage*)highlightImage
{
    rightButton = [UIButton buttonWithType:UIButtonTypeCustom];
    rightButton.adjustsImageWhenHighlighted = NO;
    rightButton.showsTouchWhenHighlighted = NO;
    [[rightButton imageView] setContentMode: UIViewContentModeScaleAspectFit];
    [rightButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
    [rightButton setBackgroundImage:highlightImage forState:UIControlStateHighlighted | UIControlStateSelected];
    [rightButton setBackgroundImage:highlightImage forState:UIControlStateSelected];
    rightButton.frame = CGRectMake(160.0, 367, 160.0, 49.0);
    [rightButton addTarget:self action:@selector(rightTabPressed) forControlEvents:UIControlEventTouchUpInside];

    UILongPressGestureRecognizer *longGesture = [[[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longGestureDetected:)]autorelease];
    longGesture.delaysTouchesBegan = YES;
    [rightButton addGestureRecognizer:longGesture];

    [self.view addSubview:rightButton];
}

- (void)longGestureDetected:(UILongPressGestureRecognizer*)longGesture
{
    if(longGesture.state == UIGestureRecognizerStateBegan)
        [self rightTabPressed];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T06:48:34.483

Trick 似乎正在更改`UIControlStateHighlighted`为`UIControlStateHighlighted | UIControlStateSelected`. 看起来很奇怪，但它确实有效。

# android - Android - 如何设置所有屏幕的背景颜色？

> ID：10156816
> 
> 赞同：87
> 
> 时间：2012-04-14T19:46:01.903
> 
> 标签：android, android-layout

保持字体和颜色样式的最佳做法是什么。我制作了一个 colors.xml 文件，我用它来更改按钮等单独元素的颜色，但我不确定 Android 希望开发人员如何组织他们的样式。

例如，我希望所有屏幕都具有相同的背景颜色。我怎么做？我需要为每个 Activity 布局 xml 指定什么吗？还是别处？我该如何完成它？

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2012-04-14T20:21:33.117

确保每个活动都具有相同背景颜色的一种快速简便的方法是为您的活动创建一个主题以供使用。该主题将指定 android:windowBackground。

首先在 values/colors.xml 中定义颜色

```
<resources>
    <color name="background">#FF0000 </color>
</resources> 
```

在引用该颜色的 res/values 中创建一个 theme.xml 文件：

```
<resources>
 <style name="MyTheme" parent="@android:style/Theme.Light"> 
  <item name="android:windowBackground">@color/background</item>
 </style>
</resources> 
```

...然后在您的 AndroidManifest.xml 中将其指定为您要使用的活动的主题。

```
 <activity
        android:name=".MyActivity"
        android:theme="@style/MyTheme" /> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-10-19T11:39:30.280

将您的 android studio 更新到 1.4，它具有内置的主题编辑器。如下图所示

[![在此处输入图像描述](../Images/9ce5b04fa0cac5f1d1fb0465ed6840b3.png)](https://i.stack.imgur.com/JgLm1.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-09-01T16:20:07.260

您还可以在 AndroidManifest.xml 中设置应用程序级别的背景

```
<application
   ...
   android:theme="@style/MyTheme"> 
```

（注意：由于我的声誉太低，我不能将此作为对已接受答案的评论）。

# gradle - 如何防止gradle下载依赖

> ID：10156819
> 
> 赞同：6
> 
> 时间：2012-04-14T19:46:21.583
> 
> 标签：gradle

1.  我们希望有一个执行“svn update”的脚本，如果 depedency.gradle 文件在该更新列表中，我们希望运行一个仅更新依赖项的任务，以便开发人员的机器是最新的。那任务是什么？运行“gradle tasks”时我看不到它。寻找更新罐或其他东西。

2.  当我们构建我们的项目时，我们根本不希望它检查 jar 更新！！！！最重要的是，这只需要在上面＃1的两种情况下以及当有人自己更新dependency.gradle文件时完成。第二件事，一旦我知道问题 #1 的答案，他们就可以运行“gradle updatejars”。

有任何想法吗？我刚刚进入 gradle，我们真的想保持一个一致的环境，当我们运行更新脚本时，它会在一次原子扫描中获取源代码和 jar，我们不再为每次构建时检查存储库而烦恼。

如果可能的话，最好通过更改 build.gradle 文件来知道如何做到这一点。如果没有，是否有命令行选项？（build.gradle 显然会给我一个命令行选项，这就是为什么我更喜欢这种方法，因为我可以说编译不依赖于下载 jars）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-14T23:56:57.373

关于第二个问题。据我了解，如果 jar 已经在本地缓存中，Gradle*不会*尝试进行远程查找或尝试下载 jar。这对于使用静态版本声明的 jar 应该是正确的，例如`testCompile 'junit:junit:4.10'`.

如果您有*动态版本*，例如`1.+`or`1.0-SNAPSHOT`等​​，则 Gradle 必须不时进行检查。您可以[微调此类依赖项的缓存过期时间](http://www.gradle.org/docs/current/userguide/userguide_single.html#sec:controlling_caching)。

为确保 Gradle 不进行远程查找，您还可以使用`--offline`option。[有关详细信息，请参阅此文档](http://www.gradle.org/docs/current/userguide/userguide_single.html#sec:cache_command_line_options)。

关于 svn update，你至少有 3 个选项：

1.  尝试为 Gradle 使用[SvnKit 插件](http://code.google.com/p/gradle-wdc-plugins/source/browse/gradle-svnkit/trunk/README.txt)

2.  使用 ant svn 任务（这里是如何做[svn checkout](https://stackoverflow.com/questions/9044354/checkout-svn-using-gradle)）

3.  从 Gradle 运行外部命令。使用[ExecPlugin](https://github.com/RobertFischer/gradle-plugins/blob/master/README.md)或使用 Groovy API 自己实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T14:45:43.807

看起来我可以用这篇文章中的答案做的第一个问题

[如何告诉 gradle 下载所有源 jar](https://stackoverflow.com/questions/10156847/how-to-tell-gradle-to-download-all-the-source-jars)

所以我可以 gradle eclipse，它会下载新的 jars 并更新我的类路径......很好。

# c# - 如何从服务器端填充 html 输入

> ID：10156829
> 
> 赞同：1
> 
> 时间：2012-04-14T19:47:50.370
> 
> 标签：c#, asp.net, html

我不太确定如何攻击这个，基本上我的 aspx 页面中有两个 html 字段：

```
<input type="text" name="fname" />
<input type="text" name="lname"/> 
```

现在我想根据从数据库收集的一些数据加载页面时从服务器端填充它们，基本上这些数据存储在两个属性中

```
public string FirstName { get; set;}
public string LastName {get; set;} 
```

如何将这些属性中的值传递到 html 输入 On_Load ？

我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:50:02.033

这是一种方法，假设 Webforms：

```
<input type="text" name="fname" value="<%:FirstName%>" />
<input type="text" name="lname" value="<%:LastName%>" /> 
```

如果在 4.0 之前使用 .NET，请将 .NET 替换`<%:`为`<%=`.

另一种选择是将输入类型更改为`runat="server"`并直接在服务器端分配值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:52:31.213

或者添加`runat="server"`到您的元素中，然后您可以执行类似的操作

```
fname.Value = FirstName;
lname.Value = LastName; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-13T02:28:22.780

我正在寻找的信息是这样的：

```
protected void Page_Load(object sender, EventArgs e)
{
    address.Value = Request.QueryString["lat"];
    address1.Value = Request.QueryString["long"];
} 
```

从 URL 字符串中获取值并将它们放入 HTML input="text"

[http://localhost:64375/Map.aspx?lat=detroit&long=windsor](http://localhost:64375/Map.aspx?lat=detroit&long=windsor)

```
 Enter Address A: <input runat="server" name="address" id="address" type="text" />
 Enter Address B: <input runat="server" name="address1" id="address1" type="text" /> 
```

感谢 Ash 和 Oded 的综合回答

# java - Java TimerTask 间隔中的问题

> ID：10156832
> 
> 赞同：0
> 
> 时间：2012-04-14T19:48:36.030
> 
> 标签：java, android, timer

对不起，我的英语不好。

创建 Android 应用程序时，我正在实现 Java TimerTask。代码并不复杂。当它达到间隔时，它将发送短信和电子邮件。

我有一些发送短信/电子邮件间隔的选项。5分钟、15分钟、30分钟、1小时和2小时。

我尝试使用5分钟和15分钟（我将其转换为milis），没有出现问题。它准确地每 5 / 15 分钟发送一次短信和电子邮件。我证明我使用timertask没有问题。

但是，当我将其更改为 30 分钟或更长时间时。我的应用程序无法发送短信/电子邮件。看起来计时器无法正常工作。

使用 Timer Task 是否有任何时间间隔限制？

这是我的代码片段。

```
private void activateNotificationByInterval(int notificationInterval) {
    timerNotificationByInterval = new Timer();
    timerNotificationByInterval.schedule(new TimerTask() {
        @Override
        public void run() {
            // TODO Auto-generated method stub
            // coba
            // if (oldLatitude != childLatitude
            // && oldLongitude != childLongitude) {
            if ((enableSMS == true)) {
                sendSMS();
            }

            if ((enableEmail == true)) {
                GMailSender email = new GMailSender(sender, senderPassword);
                try {
                    email.sendMail(emailSubject + childsName, SMSMessage
                            + " " + childlLocation + "\nLatitude: "
                            + childLatitude + "\nLongitude: "
                            + childLongitude, sender, destination);
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            mpv.changeLastLocation(childLatitude, childLongitude);
            // buat method untuk menangkap lokasi pertama
            oldLatitude = childLatitude;
            oldLongitude = childLongitude;
            // } else {
            // System.out.println("Lokasi Lama Berpengaruh");
            // }

        }
    }, 0, notificationInterval);
} 
```

*注释：milis 上的 notificationInterval (*60000)

你能告诉我如何解决吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:26:18.093

使用 AlarmManager，这里有一个链接：

[http://android-er.blogspot.in/2010/10/simple-example-of-alarm-service-using.html](http://android-er.blogspot.in/2010/10/simple-example-of-alarm-service-using.html)

# c# - IIS 7.5 的缺陷、线程敏捷性和静态变量

> ID：10156840
> 
> 赞同：0
> 
> 时间：2012-04-14T19:49:14.303
> 
> 标签：c#, asp.net, .net, iis

我有一个在 IIS (ASP.NET) 中运行的应用程序，并且很多时候，页面加载但呈现并填充了与实际请求页面的用户不同的用户的信息。用于呈现和填充页面的数据属于同样在大致相同时间点发起请求的用户。

这可能是由于静态变量和我现在看到的被称为线程敏捷性的原因吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-14T20:11:27.177

这不是线程敏捷性的问题，而是使用静态变量的问题。静态变量对于 PROCESS 来说是静态的，而不是一个线程。因此，向您的站点发出的每个请求都共享 ASP.NET 中的静态变量。所以，问问你自己：这个静态变量是要在每个请求者之间共享，还是只针对一个请求者？例如：

```
static int TotalPageHits; //Count the number of times a page has been requested 
```

显然，这是为所有用户共享的完美数据。另一方面：

```
static string CurrentUserId; //DANGER WILL ROBINSON!!!! 
```

您想要放入 HttpContext.Current.Items 的任何特定于一个请求者的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:54:12.053

包含用户特定数据的静态变量可以解释您所看到的行为。

线程敏捷性可能会加剧问题（例如，使其更明显或导致问题的不同表现形式，导致[ThreadStatic](http://tao.qshine.com/note/ThreadIssue.html)使用问题等），但我将首先检查您对静态成员的使用。

```
// bad - any caller can access this in any sequence
public static int CurrentUserId
{
    get;
    set;
}

// okay, because the backing storage is safe/segmented
public static int CurrentUserId
{
    get { return (int)Session["CurrentUserId"]; }
    set { Session["CurrentUserId"] = value; }
}

// data that you want to be shared
public static List<string> SomeValuesToBeShared
{
    // safe for reading (if properly initialized) 
    // safe for writing only if appropriate locks are used
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T19:52:50.883

如果你的代码真的是线程安全的，这不会发生......

在这种情况下使用静态变量可能是一个很好的调查起点......

如果您的意思是任何标记`ThreadStatic`，那么这也是一个很好的起点......

为了以任何特定方式提供帮助，您需要提供更多详细信息...

# plugins - 如何获取 selectionChanged 信号

> ID：10156842
> 
> 赞同：1
> 
> 时间：2012-04-14T19:49:21.247
> 
> 标签：plugins, pyqt, qgis

嗨，我正在为 python 中的 Qgis 开发一个插件，我需要连接选择图层功能时发出的 sselectionChanged 信号，我在互联网上找不到任何示例，这是我目前所做的

```
QObject.connect(self.iface.mapCanvas(),SIGNAL("selectionChanged(QgsMapLayer)"), self.test) 
```

在 qgis 的日志中，我收到此警告

```
Warning: Object::connect:  (receiver name: 'MainWindow') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:06:26.837

您需要做的是每次选择图层时创建一个信号：

```
def initGui(self):
    # ... your other code here
    self.handler = None
    self.selected_layer = None
    QObject.connect(self.iface,SIGNAL("currentLayerChanged(QgsMapLayer *)") ,self.layerChanged)

def layerChanged(self, layer):
    if self.handler:
        QObject.disconnect(self.selected_layer, SIGNAL("selectionChanged()"),self.select_changed)
        self.handler = False
        self.selected_layer = None
    if layer is not None:
        if layer.isValid():
            QObject.connect(layer,SIGNAL("selectionChanged()"),self.select_changed)
            self.selected_layer = layer

def select_changed(self):
   # whatever
   pass 
```

编辑：断开连接（错误层）修复

# php - 如何避免在php中提交Form Re

> ID：10156844
> 
> 赞同：0
> 
> 时间：2012-04-14T19:49:51.540
> 
> 标签：php

我在dashboard.php 中有一个表单来创建发票，并将其提交给invoice.php

现在我的 invoice.php 将发票和客户插入数据库，然后向我显示发票订单填写表格。

如果我刷新此页面，它会为同一客户插入一张新发票，我该如何避免这种情况。

我读到我们可以通过重定向来避免它，但就我而言，我该如何使用它。PRG（post/redirect/get）之类的东西如何使用它？

在将项目插入发票之前，我是否需要制作中间页面

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T19:53:11.567

您听说过的模式是这样的：[Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)。一般来说，POST 用于操作，GET 用于视图。因此，您永远不会在 POST 请求中向用户显示页面。相反，您将他们重定向到他们将使用 GET 请求的页面，这不会导致您的数据库发生任何更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T19:53:57.133

成功提交表单后，重定向到同一页面，并可选择指示提交成功

**示例：** invoice.php

```
if (count($_POST)) {

    if (/*post data is valid*/) {

        /*do whatever is needed*/
        header('Location: invoice.php?success');
    }
} else if (isset($_GET['success'])) {

     echo "Form successfuly submitted";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T20:14:12.530

让dashboard.php 将表单数据发布到insert.php，insert.php 会处理数据，然后转发到invoice.php。使用会话将数据从一个文件传输到另一个文件。这是insert.php：

```
<?php

session_start();

if (session_is_registered("invoiceVars"))
    session_unregister("invoiceVars");

if (!session_is_registered("errors"))
    session_register("errors");

$errors = array();

if (!session_is_registered("formVars"))
    session_register("formVars");

foreach($_POST as $f_varname => $f_value)
    $formVars[$varname] = trim(EscapeShellCmd(stripslashes($value)));

// process your data and write it to the database or return to dashboard.php with errors, then:

session_unregister("errors");

session_register("invoiceVars");

$invoiceVars = array();
foreach ($formVars as $i_varname => $i_value)
    $invoiceVars[$i_varname] = $i_value;

session_unregister("formVars");

// add additional variables
$invoiceVars["coupon"] = 'unique_coupon_code';

// invoice.php will process the data and display it
// it has session_start(); at the top, to have $invoiceVars available
header('Location: invoice.php');
exit();

?> 
```

标头（）；和退出（）；将刷新 $_POST，因此当用户返回浏览器时它不再可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T19:58:01.413

这是一个示例代码：

```
# database.php
$db = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
session_start();

# dashboard.php
require_once("database.php");

function getSavedValue() {
    global $db;
    $sql = "SELECT input_text FROM temp_table WHERE sess_key='?'";
    $query = $db->prepare($sql);
    $query->bindParam(session_id());
    $query->execute();
    if ($query->rowCount() == 1)
        return $query->fetch();
    else
        return " ";
}

<form action="invoice.php" method="POST">
  <input type="text" name="getThisInfo" value="<?php echo getSavedValue(); ?>"/>
  <input type="submit" value="Send"/>
</form>

# invoice.php
if (isset($_POST["getThisInfo"]) && /* validation check */ 1) {
    require_once("database.php");
    $textInput = $_POST["getThisInfo"];
    $sql = "INSERT INTO perm_table(invoice_info) VALUES('?');";
    $query = $db->prepare($sql);
    $query->bindParam($textInput);
    $query->execute();
    $rows = $query->rowCount();
    echo "$rows invoices were inserted.";
    unset($_POST["getThisInfo"]);
    header("success.php");
} else {
    header("dashboard.php");
} 
```

# jquery - Twitter 喜欢使用 CodeIgniter 和 Ajax 的关注系统

> ID：10156845
> 
> 赞同：0
> 
> 时间：2012-04-14T19:49:58.047
> 
> 标签：jquery, ajax, database, codeigniter, twitter-follow

我目前正在使用 CodeIgniter 在 Twitter 和 facebook 上编写订阅者/关注者系统。

因此，这个想法是在用户的个人资料页面上创建一个链接，让用户有机会在网站上关注艺术家或促销员，并查看他们的新闻和提要。

基本上这与 twitter 的想法相同。

我们怎样才能通过一个链接来创建这样的想法。

目前，我有一个带有追随者 id 和艺术家 id 的数据库。如果一个用户想关注另一个用户，他点击链接，在数据库中添加一行，这两个值，如果他再点击一次，该行将从数据库中删除，用户在“取消关注”

我创建一个这样的锚链接：

`anchor('follow','Follow',array('id'=>'follow','data-id' => '2'));`

这意味着在我的屏幕上，我有

 ``a href="http://localhost:8888/sanyproject/follow" id="follow" data-id="2"`

对于 ajax 部分，我创建了这个：

`$(document).ready(function(){`

 ````
$('#follow').click(function(e){
    e.preventDefault();
    $.ajax({
      url: "profile/follow",
      data: { id : $('#follow').attr('data-id')}
    }).done(function( msg ) {
      alert( "Data: " + msg );
    }).error(function( msg ) {
      alert( "Data Saved: " + msg );
    });
}); 
```` 

`});`

所以，现在的想法是发送到我的控制器配置文件/跟随艺术家的 id 并在我的数据库中插入或删除值。

我真的真的不知道该怎么做，这是我在 CodeIgniter 上的第一个应用程序，所以我接受所有构建的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T09:53:08.840

感谢你们，我在我的脚本上发现了错误，现在它可以完美运行了！

这是代码的答案

在 javascript 函数中更改此行：

 ``url: $('#follow').attr('href')`

并添加

`type: 'POST'`

所以现在你有： `$(document).ready(function(){`

 ````
$('#follow').click(function(e){
    e.preventDefault();
    $.ajax({
    type: 'POST',
    url: $('#follow').attr('href'),
    data: { id : $('#follow').data('id')}
    }).done(function( msg ) {
      alert( "Data: " + msg );
    }).error(function( msg ) {
      alert( "Data Saved: " + msg );
    });
}); 
```` 

`});`

并且对于 PHP 更改 deline：

 ``echo anchor('profile/follow','Follow',array('id'=>'follow','data-id' => '2'));`

所以第一个参数是函数的链接，用于执行跟随/取消关注（对函数进行任意操作），现在您必须创建控制器和模型以在数据库中插入或删除。

OFC，数据 ID 将是动态的，艺术家 ID 将位于“2”的位置

希望每个人都清楚:)

再次为我糟糕的英语道歉，谢谢。

祝你今天过得愉快 ！

西蒙```

# gradle - 如何告诉 gradle 下载所有源 jar

> ID：10156847
> 
> 赞同：50
> 
> 时间：2012-04-14T19:50:02.660
> 
> 标签：gradle

理想情况下，我们想添加一个任务来下载我们项目的第一级和传递依赖项的所有源 jar。有没有办法做到这一点？

如果没有，是否有提供命令行选项，例如 maven 必须将所有源下载到我们的机器上？

看起来这应该只是这些天的默认值，至少对于第一级依赖项，因为它在 Eclipse 中为您提供了 javadoc，这在执行代码完成时非常好。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-18T15:20:27.980

可以使用 downloadSources 配置 eclipse 任务。以下是该配置的示例

```
apply plugin: 'java'
apply plugin: 'eclipse'

eclipse {
    classpath {
       downloadSources=true
    }
} 
```

所以运行

```
gradle cleanEclipse eclipse 
```

让它下载源。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-04-18T14:47:17.260

如果您使用 Eclipse 并希望在那里导航您的依赖项的源代码，那么 Eclipse 插件会为您执行此操作。

`apply plugin: "eclipse"`通过添加到您的 build.gradle 文件来安装 eclipse 插件。然后运行`gradle eclipse`以生成 Eclipse .project、.classpath 和 .settings 文件。该插件将自动下载所有可用的源并在 .classpath 文件中添加对它们的引用（参见元素的`sourcepath`属性）。`classpathentry`

要将项目导入 Eclipse，请选择`File > Import... > Existing Projects into Workspace`并选择您的项目。

（我不确定 Idea 插件是否对 Idea 用户有相同的作用，但它可能会这样做）。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-10-23T13:28:05.440

其他答案中未提及的另一个问题是当您在文件中使用`mavenLocal()`存储库时。`gradle.build`如果该本地 maven 存储库中有下载的 jar，但该存储库中没有下载的源代码或 javadocs，则 gradle 甚至不会尝试为您下载 javadocs 或源代码。即使启用`eclipse.classpath.downloadJavadoc`和`eclipse.classpath.downloadSources`.

`mavenLocal()`解决方案是将其从列表中删除`repositories`或放置到列表的底部。或者您可以[设置](https://stackoverflow.com/questions/5780758/maven-always-download-sources-and-javadocs)maven 以下载源代码和 javadocs 并清理您的 maven 本地存储库 ( `~/.m2/repository`)。

更详细的问题描述在[这里](http://forums.gradle.org/gradle/topics/eclipse_plugin_not_downloading_source_if_jar_found_in_mavenlocal)。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-02-23T10:31:47.477

以下是如何使用 IDE 的插件在 Gradle 中添加所需的配置：

对于[日食](https://stackoverflow.com/questions/10156847/how-to-tell-gradle-to-download-all-the-source-jars/26529202#26529202)：

```
apply plugin: 'java'
apply plugin: 'eclipse'

eclipse {
    classpath {
        downloadJavadoc = true
        downloadSources = true
    }
} 
```

对于[IntelliJ](https://stackoverflow.com/questions/20134084/gradle-attach-source-and-javadoc-to-local-file-in-intellijidea)

```
apply plugin: 'java'
apply plugin: 'idea'

idea {
    module {
        downloadJavadoc = true
        downloadSources = true
    }
} 
```

要运行这些插件：

```
gradle cleanEclipse eclipse
gradle cleanIdea idea 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-11-14T00:12:31.927

Piohen 上面的评论应该是它自己的答案（因为它是唯一对我有用的解决方案）

1.  右键单击您的项目，然后选择“构建路径”->“配置构建路径”；
2.  选择“订购和出口”
3.  选择“Web App Libraries”，点击“Bottom”按钮，“Web App Libraries”会在底部；

并将其放入 Gradle Eclipse 插件中（因此您无需每次都手动执行此操作）：

[为什么 Eclipse 不将第 3 方库源文件附加到 WTP 方面的 Gradle 项目？](https://stackoverflow.com/questions/12836089/why-is-eclipse-not-attaching-3rd-party-libs-source-files-to-a-wtp-faceted-gradle)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-28T21:59:26.033

这里只有一个问题。这仅在您生成新项目时才有效。如果您正在处理无法使用 Gradle 重新生成的成熟项目，则上述建议将不起作用。

我应该补充的一件事是 Gradle/Builsdhip 插件的版本很大程度上取决于您用于启动 Eclipse 的 Java 版本。它们都必须兼容。我不得不将我的 Eclipse（当前版本）从 Java 11 切换回 Java 8 以修复 Buildship (3.0.1) 错误。由于 Gradle 中的 API 更改破坏了我们的构建，我们现在并且一直在使用 Gradle 4.2.1 一段时间。因此，要迁移到 Java 11，我们必须迁移到新版本的 Gradle、Buildship 和 Eclipse。啊! 哦，是的，这也解决了这个线程中提到的问题。源现在再次可用。

# apache - 应该重定向到 www 导致一秒钟的延迟？

> ID：10156849
> 
> 赞同：2
> 
> 时间：2012-04-14T19:50:11.697
> 
> 标签：apache, magento, redirect, litespeed

我在运行 Litespeed Web 服务器的共享主机上使用 Magento 1.6.2.0，并且我已经开始研究加快页面加载的方法。目前我正在使用 Pingdom 来查看请求，当我键入没有 www. 浏览器重定向到www页面，只是需要很长时间。这是我可以解决的问题吗？我认为我可以将 Magento 的基本 URL 更改为不包含 www，但是我认为在转到 www url 时我会有同样的延迟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T21:10:38.393

`www.`我查看了您提供的链接，在收到 302 重定向到带有前缀的 URL 之前，我确实看到了大约 1 秒的延迟。并非完全巧合的是，实际页面 HTML 也需要很长时间（大约 1.7 秒）才能加载。

对于大型 Web 应用程序来说，这是一个相当普遍的问题：即使是像重定向这样的简单响应，整个应用程序也必须加载并运行其启动代码。再加上一个不那么快的共享网络服务器，它没有针对那个应用程序进行优化，你会得到相当慢的页面加载时间。这不是 Magento 独有的。我自己在 MediaWiki 上也看到过同样的效果，我希望其他应用程序也会出现这种情况。

显而易见的解决方案就是**避免重定向**：只要确保所有 URL 都具有正确的主机名，就不会出现由于错误主机名导致的额外延迟。Magento 本身可能会为其自己的 URL 处理此问题，但如果您有任何其他代码（或静态页面）链接到您的 Magento URL，请确保它们使用正确的主机名。

您还可以注册[Google 网站管理员工具](https://www.google.com/webmasters/)（以及其他搜索引擎的类似工具）并在那里配置您的首选域（位于*站点配置 → 设置*下），以便 Google 将自动`www.`添加到它索引的您站点的任何链接。

您可以（并且应该）总体上尝试**减少 Magento 的启动时间**。这不仅会加快重定向速度，还会加快所有其他页面的加载速度。我对 Magento 不够熟悉，因此无法对此提供详细的建议，但是对于任何大型 PHP 应用程序来说，显而易见的第一步是确保您使用的是 APC 等[PHP 加速器。](http://en.wikipedia.org/wiki/PHP_accelerator)

最后，将访问者重定向到正确主机名的最快方法是**让您的网络服务器直接发送重定向，**而无需调用 Magento。如何执行此操作的详细信息取决于您使用的服务器软件，但[显然](https://stackoverflow.com/questions/3008080/htaccess-rule-redirect-non-www-to-www-litespeed-server)LiteSpeed[支持](http://www.litespeedtech.com/litespeed-web-server-features.html)`RewriteRule`与Apache 的[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)相同的语法，因此您只需在主`.htaccess`文件中添加以下行即可：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} !^www\.mmmspeciosa\.com$ [NC]
RewriteRule ^(.*)$ http://www.mmmspeciosa.com/$1 [R=301,L] 
```

（顺便说一下，我在这里使用的是[HTTP 301 永久重定向](http://en.wikipedia.org/wiki/HTTP_301)，而不是 Magento 似乎正在使用的[HTTP 302 临时重定向](http://en.wikipedia.org/wiki/HTTP_302)。这不仅根据[HTTP 标准](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3)更合适，而且与搜索引擎一起使用效果更好，它处理301重定向作为索引目标URL而不是重定向源的指示。如果此重定向类型在Magento中不可配置，我会认为它是一个错误。如果它是可配置的，则应将其设置为301。）

# c# - 如何从 DataTemplate 引发自定义路由事件？

> ID：10156855
> 
> 赞同：0
> 
> 时间：2012-04-14T19:51:09.043
> 
> 标签：c#, wpf, datatemplate, commandbinding

我有一个名为的用户控件，`dCB_Props`其中包含多个对象，最重要的是绑定到可观察集合的组合框。尽管该集合可以采用任何对象，但它通常采用名为 的 UserControl `EditDeleteItem`。我已设置`dCB_Props`为`EditDeleteItem`用作`ItemsTemplate`但未触发事件。另一方面，如果我添加一个实例，`EditDeleteItem`那么事件将被触发。我不能以这种方式添加项目，因为 EditDeleteItem 将承载其他控件，并且我需要使用不同的 DataTemplates。

`EditDeleteItem``EditClick`有两个名为和的路由事件`DeleteClick`。

当集合发生变化时，它会触发一个事件，检查添加的项目是否属于 type `EditDeleteItem`。如果是这样，那么它将处理程序添加到上述两个事件。

EditDeleteClick 的部分 xaml：

```
<WrapPanel x:Name="wp" HorizontalAlignment="Right" Visibility="Hidden" VerticalAlignment="Center" Margin="0,0,5,0">
    <Button x:Name="PART_Edit" Width="20" Height="20" Content="{DynamicResource dPen}" Style="{DynamicResource dTranspButton}" Click="btnEdit_Click"/> 
    <Button x:Name="PART_Delete" Width="20" Height="20" Content="{DynamicResource dCross}" Style="{DynamicResource dTranspButton}" Click="btnDelete_Click"/> 
</WrapPanel>
<Label Content="{TemplateBinding Content}"  Margin="2,0,45,0" Padding="0,0,0,0" HorizontalAlignment="Left" VerticalContentAlignment="Center"/> 
```

dCB_Props 的部分 xaml：

```
<ComboBox HorizontalContentAlignment="Stretch" x:Name="PART_cb" Background="Transparent" Margin="0,0,0.367,0" d:LayoutOverrides="HorizontalAlignment" ItemsSource="{Binding Items, ElementName=dcb}" IsDropDownOpen="{Binding IsDropDownOpen,ElementName=dcb, Mode=TwoWay}" Grid.ColumnSpan="3" Style="{DynamicResource DaisyComboBox}" />
<Button x:Name="PART_Edit" Width="20" Height="20" Content="{DynamicResource dPen}" Visibility="Hidden" Style="{DynamicResource dTranspButton}" Margin="2.581,1.48,17.778,-1.48" Grid.Column="1" Click="btnEdit_Click"/>
<Button x:Name="PART_Delete" Width="20" Height="20" Content="{DynamicResource dCross}" Visibility="Hidden" Margin="22.602,1.48,-2.243,-1.48" Style="{DynamicResource dTranspButton}" Grid.Column="1" Click="btnDelete_Click"/>
<Button x:Name="PART_Add" Content="+" Grid.Column="3" Margin="0,0,0,0" Style="{DynamicResource dTranspButton}" Click="btnAdd_Click"/> 
```

请注意，以上两个代码仅用于对象，我省略了列定义、事件触发器等。

dCB_Props.xaml.cs 代码的一部分是：

```
public partial class dCB_Props : UserControl
{
    public dCB_Props()
    {
        this.InitializeComponent();
        Items= new ObservableCollection<object>();
        Items.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(Items_CollectionChanged);
    }

    void Items_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        if (e.Action == System.Collections.Specialized.NotifyCollectionChangedAction.Add)
        {
            foreach (var o in e.NewItems)
            {
                if (o.GetType() == typeof(EditDeleteItem))
                {
                    EditDeleteItem itm = (EditDeleteItem)o;
                    itm.EditClick += new RoutedEventHandler(ItemEdit_Click);
                    itm.DeleteClick += new RoutedEventHandler(ItemDelete_Click);
                }
            }
        }
    }
  ...//I've left some code here since I don't deem it's that important for the situation
    private void ItemEdit_Click(object sender, RoutedEventArgs e)
    {
        DependencyObject d = GetTemplateChild("PART_cb");
        if (d == null) return;
        ComboBox cb = (ComboBox)d;
        if (cb.SelectedItem != null) RaiseEvent(new RoutedEventArgs(EditClickEvent, e.OriginalSource));
    }
} 
```

如果我添加一个类型的项目`EditDeleteItem`并删除`ItemTemplate`驻留在内部的 Label 的属性，则上述方法有效`dCB_Props`。`EditDeleteItem`如果我在ContentTemplate中设置 ItemTemplate（如下所示），它也可以工作。但是，如前所述，我需要使用不同的数据模板，所以我假设所有数据模板都必须驻留在资源字典中，然后我必须使用模板选择器。

数据模板：

```
<DataTemplate x:Shared="false" x:Key="TagTemplate">
        <local:EditDeleteItem x:Name="edItem">
            <local:EditDeleteItem.Content>
                <StackPanel>
                    <TextBlock Text="{Binding Path=Content.Label}"/>
                    <CheckBox Content="Isolated" IsChecked="{Binding Content.IsIsolated}"/>
                    <CheckBox Content="Match Case" IsChecked="{Binding Content.MatchCase}"/>
                    <CheckBox Content="Include" IsChecked="{Binding Content.Include}"/>
                </StackPanel>
            </local:EditDeleteItem.Content>
        </local:EditDeleteItem>
</DataTemplate> 
```

我相信我需要使用命令绑定。但不太确定将 CommandBindings 放在哪里，也不太确定如何使用它们，尽管我已经阅读了一两页。

谢谢，哈桑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:08:59.720

事件被触发，但您不会捕获它们，因为如果使用 ItemTemplate，则不会发生 Items_CollectionChanged 中的订阅。

您应该了解 ItemsControl（和 ComboBox）如何与 ItemsSource 一起工作。ItemsControl 使用 ItemContainerGenerator 来填充其可视化树。ItemsSource 中的每个项目都包装到从 ContentControl 派生的容器中。然后将 item 设置为 Content，ItemTemplate 设置为 ContentTemplate 等等。当您将 EditDeleteItem 放入 ItemTemplate 时，它​​成为可视树的一部分，但不是项目。这就是为什么 e.NewItems 中没有 EditDeleteItem 并且没有订阅的原因。

正如您所提到的，正确的方法是命令。您应该声明两个命令：

```
public class EditDeleteItem : UserControl
{
    ...
    public static readonly RoutedUICommand EditCommand = new RoutedUICommand(...);
    public static readonly RoutedUICommand DeleteCommand = new RoutedUICommand(...);
    ...
} 
```

现在模板部分可能如下所示：

```
<WrapPanel ...>
    <Button ... Command="{x:Static EditDeleteItem.EditCommand}"/>
    <Button ... Command="{x:Static EditDeleteItem.DeleteCommand}"/>
</WrapPanel> 
```

然后将命令绑定添加到 dCB_Props：

```
public partial class dCB_Props : UserControl
{
    static dCB_Props()
    {
        ...
        CommandManager.RegisterClassCommandBinding(
            typeof(dCB_Props),
            new CommandBinding(EditDeleteItem.EditCommand, OnEditCommandExecuted));
        CommandManager.RegisterClassCommandBinding(
            typeof(dCB_Props),
            new CommandBinding(EditDeleteItem.DeleteCommand, OnDeleteCommandExecuted));
        ...
    }
    ...
} 
```

您需要实现 OnEditCommandExecuted 和 OnDeleteCommandExecuted 以处理来自 EditDeleteItem 的相应命令。

我希望我正确理解了你的问题；）

# android - 设置Android Drawable项目的宽度？

> ID：10156872
> 
> 赞同：5
> 
> 时间：2012-04-14T19:53:57.280
> 
> 标签：android, xml-drawable

我想要的是左边有红色部分的背景。像这样的东西。 ![在此处输入图像描述](../Images/8836da03aeabdc3682c97d78419dd103.png)

我尝试了很多东西（有没有所见即所得的编辑器？我想我运行了数百次。）像下面的文章中那样指定宽度不起作用。 [如何指定可绘制项目的宽度和高度](https://stackoverflow.com/questions/7530914/how-to-specify-width-and-height-of-a-drawable-item)

下面的文章只告诉我我不能使用百分比，现在如何应用宽度。 [Android Drawable：在 XML 文件中以百分比指定形状宽度？](https://stackoverflow.com/questions/6061387/android-drawable-specifying-shape-width-in-percent-in-the-xml-file)

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>

            <shape>
                <solid 
                android:color="#FFFFFFFF"/>
            </shape>

    </item>
    <item>

            <shape android:shape="rectangle">
                <solid android:color="#55FF0000" />
                <size android:width="100px" />
            </shape>

    </item>

</layer-list> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-02T18:25:17.290

您可以定义一个红色层，然后将白色层的左边距设置为要显示的红色量，而不是指定红色框的大小。

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape>
            <solid android:color="#55FF0000" />
        </shape>
    </item>
    <item android:left="100px">
        <shape android:shape="rectangle">
            <solid android:color="#FFFFFFFF"/>
        </shape>
    </item>
</layer-list> 
```

如果您知道所需的负空间，您甚至可以交换两者并将红色（现在是顶部）图层的右边距设置为应该可见的白色量。

# asp.net-mvc-3 - 如何通过单个自定义角色提供程序同时使用 Windows 和表单身份验证

> ID：10156873
> 
> 赞同：0
> 
> 时间：2012-04-14T19:53:59.163
> 
> 标签：asp.net-mvc-3, asp.net-membership, windows-authentication, roleprovider

我有一个基于角色实体的自定义角色提供程序，以及我的表单身份验证用户实体和角色之间的称为 RoleUser 的多对多关系。我现在也想将此角色提供程序切换为使用 Windows 身份验证。对我来说，背负用户表单似乎很方便，并在我的用户实体中创建 AD 用户的“影子”。

这是可行的还是不赞成的，有没有关于这种设置的好论文等？

我对 SQL 2005 使用 EF Code First，并且没有使用自定义成员资格提供程序，因为我的用户控制器和存储库可以很好地处理我需要的所有内容；只是一个角色提供者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:31:43.570

在这种情况下，成员资格提供程序可以是使用实体框架 DbContext 中的“用户”和“角色”模型的自定义成员资格提供程序。用户模型可能有一个布尔字段，它只是告诉用户是否是域用户。在处理域用户时，您可以选择从 Active Directory 域导入用户。管理员只需将所需的 AD 用户导入数据库即可。一旦他们进入数据库，他们就可以登录。在帐户控制器登录操作中，我们可以检查用户是否是域用户，如果他随后使用域控制器对用户进行身份验证，然后允许他登录并向他颁发令牌。这是一篇关于使用表单进行 AD 身份验证的好文章。它在 VB 中，但是你可以得到东西。您也可以按照文章创建一个支持这两种身份验证的提供程序。

[http://www.cmjackson.net/2009/10/23/asp-net-mvc-using-forms-authentication-with-ldap/](http://www.cmjackson.net/2009/10/23/asp-net-mvc-using-forms-authentication-with-ldap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T08:01:14.643

请注意，我们有 5 种身份验证类型：

1-[匿名认证](http://weblogs.asp.net/jgalloway/archive/2012/04/18/asp-net-mvc-authentication-global-authentication-and-allow-anonymous.aspx)

2- [Asp.net 模拟](http://support.microsoft.com/kb/306158)

3-[基本身份验证 HTTP 401 质询](http://www.chodounsky.net/2012/05/02/basic-authorization-attribute-in-asp-net-mvc/)

4-表单身份验证 HTTP 302 登录/重定向

5- Windows 身份验证 HTTP 401 质询

MVC 身份验证的哲学是指这样一个事实，即 MVC 不使用[ViewState](http://msdn.microsoft.com/en-us/library/ms972976.aspx)来验证用户。它不使用视图状态或基于服务器的表单。这使得 MVC 框架非常适合希望完全控制应用程序行为的开发人员。

根据MVC标准，windows认证适合内网应用，forms认证适合互联网应用，因为安全问题等等。

同时使用 Windows 和表单身份验证并不常见。但是您可以像这篇[codeproject 文章](http://www.codeproject.com/Articles/37558/Windows-Authentication-Using-Form-Authentication)一样使用它们的混合。除非您想执行表单身份验证之类的操作，并在后端通过您的可编程性存储 Windows 帐户信息以存储到 DB 等。只有确保身份验证类型之间没有挑战。

还有另一件重要的事情，即身份验证和授权之间的差异，您可以在 web.config 中配置它们，如下所示：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication> 
<authorization>
    <deny users="?"/>
</authorization> 
```

或者

```
<authentication mode="Windows"/>
<authorization>
   <deny users="?"/>
</authorization> 
```

这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms972958.aspx)也可能会有所帮助。

# iphone - CSS 媒体查询无法在 iPhone 4 上正确加载

> ID：10156877
> 
> 赞同：0
> 
> 时间：2012-04-14T19:54:12.737
> 
> 标签：iphone, css, media-queries

我遇到了媒体查询没有加载 CSS 或正确显示样式的问题。

我所做的是为我的 iPhone 创建一个 style480.css，为正常创建一个 style.css。

我加载了

```
<meta name="viewport" content="width=device-width, initial-scale=1"/> 
```

在我的网站上，以便它可以工作。

我将主站点上的 css 设置为读取样式 480，这样我就可以为 iphone 进行样式化。在我的 iphone 上一切看起来都很棒，当然这只是我桌面上的一个无聊的列表。

完成 style480 后，我将 css 复制/粘贴到

```
@media only screen and (max-width: 480px) {
{ 
    body {width:100%;}
} 
```

以我的风格 CSS。

听起来很标准。

但是它在我的 iPhone 上的格式不正确

顶部导航菜单（我使用 html 5 `<nav>`）被推到左边，一些列表不应该被浮动。

就像 iphone 正在混合来自媒体查询内外的元素。

我什至尝试将媒体查询放在顶部，放在底部并加载

```
-webkit-min-device-pixel-ratio : 1\. 
```

同样的事情，就像它正在混合css。

我什至尝试在 HTML 上单独加载 css 文件......完全相同。

我可以让我的 iphone css 正确加载的唯一方法是将其设置为页面的主 css。当我加载 2 组 css 时，它无法在 iphone 上运行（但它可以在我的笔记本电脑上运行）

如果我能找到一种从 iphone 查看 css 的方法，我也许能够弄清楚它在做什么，但在他们之前，我不知道为什么它没有正确加载 CSS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:11:03.543

> 就像 iphone 正在混合来自媒体查询内外的元素。

嗯，是的，它就是这样工作的。将使用媒体查询之外的内容，除非媒体查询*中*的内容直接覆盖它。您不应该将所有代码都粘贴到媒体查询中，而应该将您想要针对该分辨率进行调整的内容粘贴到媒体查询中。

媒体查询不会替换您的主 CSS 文件，而是对其进行补充。

# android - Android：如何将消息从 DialogFagment 发送到 Fragment？

> ID：10156882
> 
> 赞同：1
> 
> 时间：2012-04-14T19:54:54.170
> 
> 标签：android, android-fragments, android-dialogfragment

我有一个 Fragment，从那个 Fragment 显示一个 DialogFragment，我希望 DialogFragment 向 Fragment 发送消息，或者 rech Fragment 的变量。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T20:17:16.987

You probably want to utilize a Listener pattern for this. Here's a quick example to get you started:

```
public class MyDialogFragment extends DialogFragment {

    public interface MyDialogFragmentListener {
        public void abstract onDialogMessage(int someValueIWantToSendToFragment);
    }

    private MyDialogFragmentListener mListener;

....

    public void setListener(MyDialogFragmentListener listener) {
        mListener = listener;
    }

} 
```

and then whenever you need to send some bit of data to your fragment from the dialog, call mListener.onDialogMessage(someValue);

Make sure that when you create your dialogfragment, you call setListener on it with an instance of MyDialogFragmentListener.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T10:45:31.163

您可以将此代码放在 dialogFragment 中所需的位置：

```
Bundle args = new Bundle();
args.putString("message",myMessage);
FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction ft = fragmentManager.beginTransaction();
Fragment fragment = Fragment.instantiate(getActivity(), MyFragment.class.getName(), args);
ft.replace(R.id.details, fragment);
ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
ft.addToBackStack(null);
ft.commit(); 
```

例如，在`onCreate`对话框片段中，我们使用 bundle 发送消息：

```
public static class MyDialogFragment extends DialogFragment { 

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        String myMessage="Hello Fragment";
        Bundle args = new Bundle();
        args.putString("message",myMessage);
        FragmentManager fragmentManager = getFragmentManager();
        FragmentTransaction ft = fragmentManager.beginTransaction();
        Fragment fragment = Fragment.instantiate(getActivity(), MyFragment.class.getName(), args);
        ft.replace(R.id.details, fragment);
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
        ft.addToBackStack(null);
        ft.commit();
        return new AlertDialog.Builder(getActivity())
                .setIcon(R.drawable.ic_dialog_about)
                .setTitle(R.string.about)
                .setMessage(R.string.about_message)
                // ...
                .create();
    }
} 
```

在`MyFragment`我可以得到我的信息，只使用这一行：

```
getArguments().getString("message"); 
```

# c# - c#：从域中获取 CNAME 和 MX 记录？

> ID：10156889
> 
> 赞同：3
> 
> 时间：2012-04-14T19:55:30.380
> 
> 标签：c#, dns, cname

谁能告诉我如何使用 c# 以编程方式从 Internet 域（www.example.com）检索 cname 和 mx 记录？根据我的简短研究，我知道可以通过对 DNS 服务器使用 UDP 套接字探测来实现，但是，是否可以在不知道 DNS 服务器地址的情况下实现这一点，只知道“www.example.com”这样的域名？我认为这是可能的，因为我一直在使用一些 3rd-party 免费工具包来成功获取 MX 记录，而不知道 DNS 服务器地址。

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:51:33.837

我没有尝试过上面提到的库，但我会考虑使用服务而不是库。我不知道所需的用例是什么，但您甚至可以在 asp.net Web 应用程序、跨平台移动应用程序或移动网站上提供此功能。

1.  寻找在线 DNS 工具（例如 DNSWatch），它通过 URL 参数返回必要的域信息。
2.  检查结果页面的 HTML 结构

您可以处理此 HTML，但 Yahoo 可以为您使用 YQL html 处理器并以 XML 或 JSON 格式返回相关部分。

1.  访问[YQL 控制台](http://developer.yahoo.com/yql/console/#h=desc%20html)
2.  使用以下内容填充 SQL 语句文本区域：select * from html where url="YOUR PARAMETRIC DNS URL" and xpath='XPATH QUERY TO ACCESS NS OR MX RECORD IN THE RESULT HTML'
3.  在控制台中测试您的 YQL 语句
4.  开发单个客户端应用程序，通过 HTTP 请求执行 YQL 语句。您可以从这个[YQL JavaScript 教程](http://developer.yahoo.com/yql/guide/yql-code-examples.html#yql_javascript)中获得提示。

优点：-您的应用程序可以非常轻量级缺点：-结果页面的 HTML 结构可以更改，或者 DNSWatch 可以在过度使用资源后拒绝您的请求。

不过，您可以在 1 小时内实现工作原型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:07:40.520

.Net 框架不直接支持，但 Platform SDK[为 DnsQuery 做了 MSDN Entry](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682016%28v=vs.85%29.aspx)。您需要做的就是将其导入`DllImport`

# wcf - 为 RESTful WCF 服务实现 RequestWrapper

> ID：10156890
> 
> 赞同：3
> 
> 时间：2012-04-14T19:55:47.637
> 
> 标签：wcf, rest, wrapper, webhttpbinding

我编写了一个名为**RequestWrapper**的简单对象，其中包含单一类型的方法：

```
TResult WrapRequest<TResult>(Func<TResult> action) 
```

它包含任何操作`try..catch`、错误处理、日志记录、数据库连接、事务（提交和回滚）等。

目前我像这样使用它：（*例如，不是生产代码）*

```
return RequestWrapper.WrapRequest(() =>
{
    Topic entity = GetRepository<Topic>().Find(uid);

    if (entity == null)
        throw new EntityNotFoundException("Topic not found.");

    return new Topic
    {
        Name = entity.Name,
        Posts = entity.Posts.Select(x => new Post
        {
            Body = x.Body,
        }).ToList()
    };
}); 
```

我只是简单地包装了我的 RESTful Web 服务的每个方法（使用 WCF 和**WebHttpBinding**）。

我的问题是：**我应该如何实现自动为我包装的行为？**是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T03:29:59.227

您可以使用`IOperationInvoker`包装原始的自定义来满足您的需要。下面的代码显示了一个示例实现，您可以在[http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/17/wcf-extensibility-ioperationinvoker.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/17/wcf-extensibility-ioperationinvoker.aspx)找到有关调用程序的更多信息。

```
public class StackOverflow_10156890
{
    [ServiceContract]
    public interface ITest
    {
        [WebGet]
        [WrappedOperationBehavior]
        string Echo(string text);
        [WebInvoke(BodyStyle = WebMessageBodyStyle.WrappedRequest)]
        [WrappedOperationBehavior]
        int Divide(int x, int y);
    }
    public class Service : ITest
    {
        public string Echo(string text)
        {
            return text;
        }
        public int Divide(int x, int y)
        {
            return x / y;
        }
    }
    class RequestWrapperOperationInvoker : IOperationInvoker
    {
        IOperationInvoker originalInvoker;

        public RequestWrapperOperationInvoker(IOperationInvoker originalInvoker)
        {
            this.originalInvoker = originalInvoker;
        }

        public object[] AllocateInputs()
        {
            return this.originalInvoker.AllocateInputs();
        }

        public object Invoke(object instance, object[] inputs, out object[] outputs)
        {
            Console.WriteLine("Do initialization, etc. here");
            object result = null;
            try
            {
                result = this.originalInvoker.Invoke(instance, inputs, out outputs);
            }
            catch (Exception e)
            {
                Console.WriteLine("Log exception: {0}: {1}", e.GetType().FullName, e.Message);
                result = null;
                outputs = null;
            }
            finally
            {
                Console.WriteLine("Do finalization, etc. here");
            }

            return result;
        }

        public IAsyncResult InvokeBegin(object instance, object[] inputs, AsyncCallback callback, object state)
        {
            throw new NotSupportedException("Only synchronous operations supported");
        }

        public object InvokeEnd(object instance, out object[] outputs, IAsyncResult result)
        {
            throw new NotSupportedException("Only synchronous operations supported");
        }

        public bool IsSynchronous
        {
            get { return true; }
        }
    }
    class WrappedOperationBehaviorAttribute : Attribute, IOperationBehavior
    {
        public void AddBindingParameters(OperationDescription operationDescription, BindingParameterCollection bindingParameters)
        {
        }

        public void ApplyClientBehavior(OperationDescription operationDescription, ClientOperation clientOperation)
        {
        }

        public void ApplyDispatchBehavior(OperationDescription operationDescription, DispatchOperation dispatchOperation)
        {
            dispatchOperation.Invoker = new RequestWrapperOperationInvoker(dispatchOperation.Invoker);
        }

        public void Validate(OperationDescription operationDescription)
        {
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        var endpoint = host.AddServiceEndpoint(typeof(ITest), new WebHttpBinding(), "");
        endpoint.Behaviors.Add(new WebHttpBehavior());
        host.Open();
        Console.WriteLine("Host opened");

        WebClient c = new WebClient();
        Console.WriteLine(c.DownloadString(baseAddress + "/Echo?text=Hello%20world"));

        c = new WebClient();
        c.Headers[HttpRequestHeader.ContentType] = "application/json";
        Console.WriteLine(c.UploadString(baseAddress + "/Divide", "{\"x\":12,\"y\":0}"));

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# php - php 网站和 Jquery $.ajax()

> ID：10156891
> 
> 赞同：3
> 
> 时间：2012-04-14T19:56:05.700
> 
> 标签：php, javascript, jquery, ajax

我正在开发的网站的结构是这样的：

设置时具有切换首页内容模块的功能`$_GET['module']`，例如：

```
function switchmodules()
{
    $module=$_GET['module'];
    switch($module)
    {
        case 'getnews': news(); break;
        default: def();
    }
} 
```

如您所见，此开关为每个模块调用另一个函数。

例如，我写信`getNews()`以这种方式工作：

```
function getNews()
{
   $id=$_GET['id'];
   if(!id)
   {
       //CODE TO LIST ALL NEWS
   }
   if(isset($id))
   {
       //CODE TO GET ONLY 1 NEWS BY ID
   }

} 
```

因此，如您所见，我没有为每个模块使用唯一的文件；模块的所有操作都是独特功能的一部分，其中再次切换动作以改变结果。

如果我想从数据库中获取新闻，我应该使用这样的 url：`?index.php&module=getnews&id=1`

我现在的问题是：
使用 jQuery 和`$.ajax()`方法，有没有办法使用这种基于 get 切换的函数的结构来获取新闻（例如）？还是我必须更改所有内容并为每个功能制作一个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:04:09.203

您可以简单地通过 $.ajax() 调用相同的 url。对于 axjax 调用，唯一应该更改的是您不输出布局，而只输出新闻本身。

在 php 中，您可以检查 ajax 请求，例如

```
if (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {

    // dont output layout
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T20:07:41.637

如果此代码位于“test.php”中，您可以执行以下操作：

```
<script>
    $.get(
        '/test.php',
        {
            module: 'news',
            id: 1
        },
        function( data ) {
            alert( data );
        }
    );
</script> 
```

并且 js 将使用所需的参数向 test.php 发送 GET 请求。然后您的服务器脚本将决定如何处理请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T20:12:35.923

jQuery

```
$(document).ready( function() {
    var form = '#my_awesome_form';

    $(form + ' input[type=submit]').click(function(e) {
        e.preventDefault();

        $.ajax({
            type: "GET",
            url: 'index.php',
            data: $(form).serialize(),
            success: function( response ) {
                alert('DONE!');
            }
        });
    });
}); 
```

HTML

```
<form id="my_awesome_form" // OTHERS PROPERTIES //>
    // LOT OF FIELDS HERE //
    <input type="submit" value="Send">
</form> 
```

# c++ - 为什么malloc前面有(void*)？

> ID：10156892
> 
> 赞同：0
> 
> 时间：2012-04-14T19:56:14.940
> 
> 标签：c++, function

```
void* buffer = (void*)malloc(100); 
```

通过在 malloc() 函数前加上 (void*)，实现了什么，我们是否覆盖了返回类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T19:57:36.123

由于 malloc 已经返回一个 void 指针，因此什么也没有实现。这相当于：

```
void* buffer = malloc(100); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T19:58:25.917

调用的返回类型`malloc`被显式地转换为`void`指针。这有点多余，因为它已经返回 a `void*`，但~~可能~~存在以澄清开发人员的意图（或者他只是搞砸了）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-14T20:01:20.503

在这种特殊情况下，它什么也不做。但是，由于 C++ 在类型安全方面比 C 严格得多，因此您通常需要强制转换 的返回`malloc`：

```
void* x = malloc(100);       //OK in C/C++
int*  y = malloc(100);       //OK in C, error in C++
int*  z = (int*)malloc(100); //OK in C/C++, not recommended for C 
```

但是，由于您使用 C++，我不能不告诉您应该改用 C++ `new`。

# iphone - 检索应用在后台时收到的通知列表

> ID：10156895
> 
> 赞同：0
> 
> 时间：2012-04-14T19:56:29.467
> 
> 标签：iphone, notifications, push-notification, uilocalnotification, nsnotificationcenter

有没有办法知道当应用程序处于后台状态时收到了多少和什么样的本地通知？

例子：

*   用户关闭应用，应用进入后台状态
*   已安排通知 A、B、C、D 和 E
*   用户收到通知 A
*   用户收到通知 B
*   用户收到通知 C
*   用户重新打开应用
*   应用程序只知道显示了通知 A、B 和 C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:03:50.797

不，如果用户在通知触发时按下**取消按钮，则实际上没有回调到您的应用程序。**所以我认为没有更优雅的解决方案。

也一直在处理通知，这个问题有时让我发疯）

# css - css - 固定元素的可滚动子元素

> ID：10156898
> 
> 赞同：12
> 
> 时间：2012-04-14T19:56:57.323
> 
> 标签：css

我有一个 100% 高度的固定 div，在其中，一个相对定位的子 div。child-div 包含可以更改的文本，因此它没有固定的高度。

如果内容溢出屏幕，我希望 child-div 垂直滚动。我玩弄了 min 和 max height 属性来实现这一点，但这不是一个理想的解决方案，而且并不总是有效。

编辑：最小和最大高度似乎几乎被忽略了。我计算了文本框对于最小“允许”屏幕高度将占用多少垂直区域，并将其设置为高度。添加最小和最大高度对此没有任何影响。此解决方案的唯一问题是该框*始终*约为 60%，因此即使它不需要滚动，它也可以。这可行，但并不理想。如果有办法解决这个问题，那就太好了。

这是我到目前为止所拥有的：

```
<div class="content">
    <div id="textbox"> some text
    </div>
</div>

.content { position: fixed; height: 100%; top: 0px; right: 0px; }

#textBox { 
    position: relative;
    top: 165px;
    height: 61.5%;
    overflow-y: auto;
} 
```

有没有更好、更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-14T20:35:42.067

以下对我来说非常有效：

```
<style type="text/css">
    #fixed {
        position:   fixed;
        top:        0;
        bottom:     0;
        left:       0;
        right:      0;
        border:     1px solid black;
        overflow:   hidden;
        background: white;
    }

    #scrolling {
        overflow: auto;
        max-height: 98%;
    }
</style>

<div id="fixed">
    <div contenteditable id="scrolling">
        <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.
        Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam
        egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien
        ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean
        fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. Donec non
        enim in turpis pulvinar facilisis. Ut felis. Praesent dapibus, neque id cursus faucibus, tortor neque egestas
        augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor,
        facilisis luctus, metus</p>
    </div>
</div> 
```

div 的内容是可编辑的，所以只需添加文本直到它滚动。它可以在体面的浏览器上运行。

**[现场示例](http://jsfiddle.net/UfXpZ/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T20:09:14.213

基本上你必须设置你的固定元素的溢出，正如你在[这个例子](http://www.brunildo.org/test/overscrollback.html)中看到的那样，并且有一个[jsfiddle](http://jsfiddle.net/XPkUM/)可以发挥这些可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-21T19:59:23.117

我通过测试找到了一个解决方案，它似乎有效。它需要 3`DIV`秒。首先也是最上面`div`的将是您的*固定元素*。它将包含另一个`div`作为它的子元素，它将被*相对*定位。它将是另一个`div`，`div`它将包含您的内容，它必须*绝对定位*

代码：[https ://codepen.io/ltorvalds024/pen/GxKdeO](https://codepen.io/ltorvalds024/pen/GxKdeO)

# mercurial - Mercurial：“撤消”两个或多个提交

> ID：10156906
> 
> 赞同：1
> 
> 时间：2012-04-14T19:57:52.003
> 
> 标签：mercurial, rollback

在[如何使用 mercurial 进行原始结帐？](https://stackoverflow.com/questions/10104676/how-do-i-do-a-pristine-checkout-with-mercurial/10144166)Martin Geisler 讨论如何使用以下方法删除已提交的 Mercurial 文件：

```
hg strip "outgoing()" 
```

但是，如果我想保留我添加到“ `outgoing()`”中的文件怎么办 - 例如：

两个用户 a 和 b——从同一个变更集开始

用户一：

```
echo "A" > A.txt; hg ci -M -m ""; hg push 
```

用户 b（忘记运行`hg pull -u`）：

```
echo "B" > B.txt; hg ci -M -m "" B.txt;
echo "C" > C.txt; hg ci -M -m "" C.txt; 
```

如果用户 b 运行，`hg strip "outgoing()"`则 B.txt 和 C.txt 将丢失。`hg rollback`不是一个选项，因为有两个提交。

用户 b 可以将他的文件恢复为“本地添加 - 未跟踪”，然后执行`hg pull -u`获取 A.txt，然后处理 B.txt 和 C.txt 的添加/提交/推送吗？

Martin Geisler 在前面提到的线程中回答了这个问题（我删除并移到这里的评论：

```
hg update "p1(min(outgoing()))"
hg revert --all --rev tip 
hg strip "outgoing()"
hg pull -u 
```

现在用户 c 可以在新文件 B.txt 和 C.txt 中完成他的工作并提交+推送这些文件。

其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T20:26:09.463

您可以，但是这样做，您正在处理 DVCS 的最大功能之一，例如 mercurial，即像您的情况一样轻松可靠地处理多条开发线的合并。如果用户 b 的目标是应用所有三个更改的开发线，那么执行此操作的标准方法是`hg`继续执行并`hg pull -u`创建一个包含来自用户 a 的更改的新 head (以及推送到用于拉取的 repo 的任何其他更改），然后用于`hg merge`合并两个头，头包含用户 b 的两个变更集，另一个包含用户 a 的变更集（作为拉取的）。在这种没有重叠更改的简单情况下，默认情况下 hg 应该做所有正确的事情。

```
$ hg pull -u
[...]
added 1 changesets with 1 changes to 1 files (+1 heads)
not updating: crosses branches (merge branches or update --check to force update)
$ hg merge
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
(branch merge, don't forget to commit)
$ hg ci -m "merge" 
```

如果两个头之间存在冲突（即两个用户都提交了对相同文件的更改），则可能需要在合并过程中进行冲突解决编辑；hg 会告诉你是不是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T00:57:25.927

另一种选择是`rebase`扩展。根据您的情况：

1.  A 和 B 以相同的历史开始。
2.  A 提交并推送更改。
3.  B 提交了两个更改，但由于 A 的提交而无法推送。
4.  B 拉取 A 的零钱。
5.  B跑`hg rebase`和推。

变基之前：

```
Common ---------------------------- A (tip)
     \
      B1 - B2 (working parent) 
```

后：

```
Common - A - B1 - B2 (tip, working parent) 
```

# python - 如何在 Django 中获取每天带有注释的帖子数量？

> ID：10156909
> 
> 赞同：1
> 
> 时间：2012-04-14T19:58:07.043
> 
> 标签：python, django, django-queryset, annotate

我有一个`Post`模型，它有一个`datetime.date`字段`posted_date`。我需要找出用户每天发了多少帖子。为每一天创建一个查询似乎很愚蠢。

我不知道如何使用注释进行聚合 API 查询。

是

```
Post.objects.filter(author=someuser).annotate(dailycount=Count('posted_day')) 
```

正确的方法？那么，我如何使用它来获取特定日期的帖子数量？

我的模型是：

```
class Post(models.Model):
    posted_day=models.DateField(default=date.today)
    author=models.ForeignKey(User,null=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:06:28.723

你快到了。您需要两个附加条款：

```
day_counts = Post.objects.filter(author=someuser).values('posted_day').annotate(
                                       dailycount=Count('posted_day')).order_by() 
```

启用分组，`values('posted_day')`空`order_by`确保结果按顺序排序，`posted_day`因此默认排序不会干扰。

最清晰的文档似乎在[Django Aggregation docs](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#aggregation)部分的[Order of `annotate()`and`values()`子句](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#order-of-annotate-and-values-clauses)中。

`values`返回一个类似`list`的`dicts`：

```
[{'posted-day': 'the-first-day', 'dailycount': 2}, . . . ,
 {'posted-day': 'the-last-day', 'dailycount': 3}] 
```

因此，如果您想要用户发布的最后一天，它将是列表中的最后一项：

```
last_day_dict = day_counts[-1]
date = last_day_dict['posted_day']
count = last_day_dict['dailycount'] 
```

然后，您可以比较`date`以`today()`查看它们是否匹配，如果不匹配，则用户今天没有发布，如果他这样做了，他发布的`count`时间。

# java - 代理 servlet 挂在 HttpClient.execute()

> ID：10156912
> 
> 赞同：3
> 
> 时间：2012-04-14T19:59:05.977
> 
> 标签：java, proxy, apache-httpclient-4.x

我需要编写一个 servlet，它基本上只是将每个传入请求代理到不同主机上的相同 URL 路径。这是我使用 Apache Commons Http Client 4.1.3 得出的结果：

```
@WebServlet("/data/*")
public class ProxyServlet extends HttpServlet {

  protected void doGet (HttpServletRequest request, HttpServletResponse response)
  throws ServletException, IOException {
    HttpClient client = new DefaultHttpClient();
    try {
      String url = getMappedServiceUrlFromRequest(request);
      HttpGet get = new HttpGet(url);
      copyRequestHeaders(request, get);

      HttpResponse getResp = client.execute(get);
      response.setStatus(getResp.getStatusLine().getStatusCode());
      copyResponseHeaders(getResp, response);

      HttpEntity entity = getResp.getEntity();
      if (entity != null) {
        OutputStream os = response.getOutputStream();
        try {
          entity.writeTo(os);
        } finally {
          try { os.close(); } catch (Exception ignored) { }
        }
      }
    } catch (Exception e) {
      throw new ServletException(e);
    } finally {
      client.getConnectionManager().shutdown();
    }
  }

  private void getMappedServiceUrlFromRequest (...)
  private void copyResponseHeaders (...)
  private void copyRequestHeaders (...)
} 
```

这在第一次调用 servlet 时工作得很好。但是，第一次之后，servlet 挂在*client.execute(get)*行上。

“HttpClient 执行挂起”有很多谷歌点击，其中大部分建议使用 ThreadSafeClientConnManager 的实例。试过了，可惜没用。

我花了几个小时在谷歌上搜索这个问题，但我还没有找到任何可以解决它的东西。我非常感谢任何关于我在这里做错了什么的指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:20:37.873

我建议你以艰难的方式做到这一点。只需编写一个进行重定向的*过滤器。*

甚至只是一个 TCP 服务器，它在端口上侦听并只是来回复制字节。您根本不需要在代理中使用 HTTP 协议，除非您正在实施 CONNECT 命令，在这种情况下，这是您需要了解的唯一 HTTP 部分，并且它的回复是您需要的唯一 HTTP 响应要知道。其他一切都只是字节。

# ruby - Ruby 中的重载

> ID：10156919
> 
> 赞同：11
> 
> 时间：2012-04-14T19:59:43.753
> 
> 标签：ruby, overloading

我想像许多其他语言一样在 Ruby 中使用重载功能，但 Ruby 本身不支持此功能。

我是否必须使用定义带`*args`参数的方法并确定方法内参数的数量和类型的方式来实现它？一些喜欢：

```
class A
    def foo(*args)
        case (args.length)
        when 1
            do something
        when 2
            do something-else
        ....
        end
    end
end 
```

可以看到，确实比直接重载难看。

我想知道是否有任何关键字或其他方式（如元编程模块）可以让我以更优雅的方式定义重载方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T20:06:29.450

您可以分别测试每个参数是否存在，因为如果未通过，它们将设置为 nil（假设它们按顺序传递！）。

如果您坚持使用非常不同的论点，我建议您使用带有符号的散列论点来表示您想要的每个论点......并进行适当的测试。

** 更新 **

此外，您还可以使用更具体的名称重命名重载的方法，例如

```
def perform_task_with_qualifier_1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-14T21:48:39.373

你可以尝试一些元编程来达到你的目标。

请参阅以下代码：

```
class OverloadError < ArgumentError; end
class Class
=begin rdoc

=end
  def define_overload_method( methodname, *methods )    
    methods.each{ | proc |
      define_method("#{methodname}_#{proc.arity}".to_sym, &proc )
    }
    define_method(methodname){|*x|
      if respond_to?("#{methodname}_#{x.size}")
      send "#{methodname}_#{x.size}", *x
      else
        raise OverloadError, "#{methodname} not defined for #{x.size} parameters"
      end
    }

  end
end

class X
  define_overload_method :ometh,
        Proc.new{ "Called me with no parameter" },
        Proc.new{ |p1| "Called me with one parameter (#{p1.inspect})" },
        Proc.new{ |p1,p2| "Called me with two parameter (#{p1.inspect}, #{p2.inspect})" }
end

x = X.new

p '----------'
p x.ometh()
p x.ometh(1)
p x.ometh(1,2)
p x.ometh(1,2,3)  #OverloadError 
```

您可以使用 定义重载方法`define_overload_method`。参数是方法名称和过程列表。该方法`methodname`被创建并调用相应的方法。哪种方法取决于参数的数量（不是类型！）。

另一种语法是：

```
class OverloadError < ArgumentError; end
class Class
  def def_overload( methodname)    
    define_method(methodname){|*x|
      if respond_to?("#{methodname}_#{x.size}")
      send "#{methodname}_#{x.size}", *x
      else
        raise OverloadError, "#{methodname} not defined for #{x.size} parameters"
      end
    }
  end
  def overload_method( methodname, proc )    
    define_method("#{methodname}_#{proc.arity}".to_sym, &proc )
  end
end
class X
  def_overload :ometh
  overload_method :ometh, Proc.new{ "Called me with no parameter" }
  overload_method :ometh, Proc.new{ |p1| "Called me with one parameter (#{p1.inspect})" }
  overload_method :ometh, Proc.new{ |p1,p2| "Called me with two parameter (#{p1.inspect}, #{p2.inspect})" }
end 
```

`def_overload`定义重载方法的框架，`overload_method`定义一个“重载方法”。

但正如[Holger 已经提到的](https://stackoverflow.com/questions/10156919/overload-in-ruby#comment13028158_10156919)：

> 您应该尝试适应 Ruby 方式。Ruby 中没有重载是有原因的。方法应该只做一件事，而不是仅仅因为不同的论点而神奇地决定做截然不同的事情。相反，尝试利用 Duck Typing，如果有疑问，请使用具有有意义名称的不同方法。

* * *

我很好奇如何实现具有类型敏感重载的版本。这里是：

```
class OverloadError < ArgumentError; end
class Class
  def def_overload( methodname)    
    define_method(methodname){|*x|
      methname = "xxx"
      methname = "#{methodname}_#{x.size}#{x.map{|p| p.class.to_s}.join('_')}"
      if respond_to?(methname)
        send methname, *x
      elsif respond_to?("#{methodname}_#{x.size}")
        send "#{methodname}_#{x.size}", *x
      else
        raise OverloadError, "#{methodname} not defined for #{x.size} parameters"
      end
    }
  end
  def overload_method( methodname, *args, &proc )    
    types = []
    args.each{|arg| types << arg.to_s}
    define_method("#{methodname}_#{proc.arity}#{types.join('_')}".to_sym, &proc )
  end
end
class X
  def_overload :ometh
  overload_method(:ometh){ "Called me with no parameter" }
  overload_method(:ometh, String ){ |p1| "Called me with one string parameter (#{p1.inspect})" }
  overload_method(:ometh ){ |p1| "Called me with one parameter (#{p1.inspect})" }
  overload_method(:ometh){ |p1,p2| "Called me with two parameter (#{p1.inspect}, #{p2.inspect})" }
end 
```

当你用

```
p x.ometh(1)
p x.ometh('a') 
```

你得到

```
 "Called me with one parameter (1)"
    "Called me with one string parameter (\"a\")" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-06T06:37:33.097

很少有 gem 可以为您的 ruby​​ 代码提供此功能

1.  [功能红宝石](https://github.com/jdantonio/functional-ruby)

```
       defn（：问候，：男）{
         “喂，先生！”
       }

       defn（：问候，：女）{
         “你好，女士！”
       }

       foo.greet(:male) => "您好，先生！"
       foo.greet(:female) => "你好，女士！"

```

[你可以从这里](http://jerrydantonio.com/functional-ruby/Functional/PatternMatching.html)找到更多类似 Elixir 的模式匹配功能

2.  [合同.ruby](https://github.com/egonSchiele/contracts.ruby)

```
       合约 1 => 1
       事实 x
         X
       结尾

       合约 C::Num => C::Num
       事实 x
        x * 事实（x - 1）
       结尾

```

这个 gem 有助于纠正漂亮的防御代码。有一些关于性能的批评。所以基准和决定。[更多示例](https://egonschiele.github.io/contracts.ruby/#method-overloading)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-14T23:22:26.050

重载的定义特征是调度是静态发生的。在 Ruby 中，调度*总是*动态发生的，没有其他方法。因此，在 Ruby 中重载是不可能的。

# excel - 在MATLAB中使用xlsread读取数字和字符串数据

> ID：10156920
> 
> 赞同：4
> 
> 时间：2012-04-14T19:59:48.900
> 
> 标签：excel, matlab, file-io

我在 Excel 中有一大列数据，我想将其读入字符串元胞数组。但是，有些条目是数字，其余的是字符串。所以我有类似的东西

```
288537
288537
312857
589889
589889
1019503
1019503
1098802
1098802
abc
efg
hij
1992724 
```

第一行是标题行，所以我们忽略它。当我使用

```
[~, ID] = xlsread('data.xlsx', 'A2:A125581') 
```

`ID`仅包含字符串条目，不包含数字条目。

我怎样才能`xlsread`将数字视为字符串，以便我可以将所有内容都视为字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T20:37:55.810

[XLSREAD](http://www.mathworks.com/help/techdoc/ref/xlsread.html)返回三个输出。第三个是包含已读取所有内容的元胞数组。但是，元胞数组有数字，其中数据是数字，因此如果您希望所有内容都为字符串，则必须转换这些：

```
%# read everything into one cell array
[~,~,raw] = xlsread('data.xlsx', 'A2:A125581');
%# find numbers
containsNumbers = cellfun(@isnumeric,raw);
%# convert to string
raw(containsNumbers) = cellfun(@num2str,raw(containsNumbers),'UniformOutput',false); 
```

# ruby-on-rails - 在 OS X 上运行 Rails 脚手架时出现语法错误

> ID：10156925
> 
> 赞同：0
> 
> 时间：2012-04-14T20:00:24.870
> 
> 标签：ruby-on-rails, ruby, macos

当我尝试运行基本的 rails 脚手架时，出现以下错误

```
invoke  active_record
/usr/local/lib/ruby/1.9.1/syck.rb:135:in `load': syntax error on line 54, col 11: `' (ArgumentError) 
```

我猜这里存在编码问题，但完全不确定。当我尝试

```
echo $LC_CTYPE 
```

我明白了

```
UTF-8 
```

当我尝试

```
ruby -e 'puts Encoding.default_external.name' 
```

我明白了

```
US-ASCII 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:03:41.420

syck有很多问题。

尝试从 rvm 安装 ruby​​ 1.9.2，更新 gems

```
gem update --system 
```

并在新的外壳中运行它。

# emacs - 23.2 中的嵌套深度错误（同名的函数和变量）

> ID：10156927
> 
> 赞同：0
> 
> 时间：2012-04-14T20:00:36.030
> 
> 标签：emacs, elisp

我在 23.2.1 中为 emacs 使用 matlab 模式时遇到问题（其他版本，例如 21.4.1.、23.1.1\. 和 23.3.1 工作正常）。经过一番检查，发现问题区域如下：

```
(defun matlab-all-known-properties ()
  "Return a list of all properties."
  (let ((lst matlab-core-properties)
    (tl matlab-property-lists))
    (while tl
      (setq lst (append lst (cdr (car tl)))
        tl (cdr tl)))
    (matlab-uniquafy-list lst)))

(defvar matlab-all-known-properties (matlab-all-known-properties)
  "List of all the known properties.") 
```

这会在 23.2 中产生错误：

```
*** Eval error ***  Lisp nesting exceeds `max-lisp-eval-depth' 
```

关于这里可能发生的事情以及如何解决的任何想法？

# iphone - 自定义相机覆盖

> ID：10156930
> 
> 赞同：0
> 
> 时间：2012-04-14T20:01:54.760
> 
> 标签：iphone

我的第一个定制问题在[这里](https://stackoverflow.com/questions/10147458/add-a-uibarbutton-for-zbarreaderviewcontroller/10147745#comment13026724_10147745)，并得到了[Mat](https://stackoverflow.com/users/251513/mat)的帮助。我可以自定义它。现在我想通过从 ni​​b 文件加载和查看来自定义叠加层......我要做的是

> 使用其 xib 创建另一个名为 myCustomVIew 的 UIViewController
> 
> 在顶部添加一个工具栏和一些按钮
> 
> 设置 controller.cameraOverlay = aView.view

请看[这里](https://i.stack.imgur.com/jK2OF.png)，这样你就可以想象我到目前为止在做什么 ![在此处输入图像描述](../Images/feffcb6349016560928c4033cb580248.png)

但是，当我运行我的应用程序时，视图显示在[此处](https://i.stack.imgur.com/HQdWh.png)。![在此处输入图像描述](../Images/9962712a07bda9d6716c7642ef4836d1.png)

我知道我刚刚在某个地方搞砸了，请就这个问题给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:27:26.913

你必须在视图上设置一个clearColor，否则你看不到相机层。

# objective-c - 在 IOS 5 中控制网络设置

> ID：10156936
> 
> 赞同：2
> 
> 时间：2012-04-14T20:02:49.597
> 
> 标签：objective-c, ios, xamarin.ios

我有一个项目，非常希望对 iPad 设备的 IOS 5 中的网络设置进行一些控制。理想的情况是必须能够将设备的 wifi 连接更改为特定的 SSID。我的直觉告诉我，这可能是 SDK 中未公开的功能，但我想我会问。

如果我对直接更改连接的第一个假设是正确的，另一个目标是允许应用程序提示用户更改网络设置并将用户引导到设置屏幕。例如，当设备处于飞行模式并且应用程序需要互联网连接时，我已经看到少数应用程序提供此功能。就我而言，主要区别在于，我不一定要在设备不在互联网上时提示用户，而是在设备已经可能（或可能没有）的任何连接不是我正在寻找的连接时对于（在这种情况下，我正在寻找飞机上的封闭/非面向互联网的 Wifi ssid）。

我感谢任何可以引导我朝着正确方向前进的指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T22:40:51.583

它可能不完全符合您的要求，但我认为[CaptiveNetwork](http://developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html)是您可以获得的最接近的。

CaptiveNetwork 的 API 绑定在最近的 MonoTouch 版本中可用。

# mysql - 获取复杂查询的计数结果

> ID：10156938
> 
> 赞同：0
> 
> 时间：2012-04-14T20:03:22.450
> 
> 标签：mysql

假设我有这个 sql 查询

```
SELECT max(times_viewed) as m, member_id, (select count(viewed_url) from exp_member_page_tracker  where member_id=mpv.member_id)
FROM `exp_member_page_tracker` mpv
group by member_id 
```

我需要计算所有结果。我这样做

```
SELECT count(member_id) from ( SELECT max(times_viewed) as m, member_id, (select count(viewed_url) from exp_member_page_tracker where member_id=mpv.member_id)
FROM `exp_member_page_tracker` mpv
group by member_id) as m2 
```

但我不确定这如何有效。您能否建议我如何以最佳方式计算结果？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:44:27.767

对于您的子查询，我是否遗漏了什么，这不是更高效的结果吗？在 sqlfiddle 试过：

[http://sqlfiddle.com/#!2/a03cf/9](http://sqlfiddle.com/#!2/a03cf/9)

**你的：**

```
SELECT member_id, max(times_viewed) as max_times_viewed 
, (select count(viewed_url) from exp_member_page_tracker  where member_id=mpv.member_id) as countOfViewedUrl
FROM `exp_member_page_tracker` mpv
group by member_id; 
```

**选择：**

```
SELECT member_id, max(times_viewed) as max_times_viewed
, count(viewed_url) as countOfViewedUrl
FROM `exp_member_page_tracker` mpv
group by member_id; 
```

# objective-c - Mac 显示/删除自定义 URL 方案

> ID：10156939
> 
> 赞同：4
> 
> 时间：2012-04-14T20:03:38.727
> 
> 标签：objective-c, macos, cocoa, url-scheme

我制作了一个可以通过 URL-Scheme 调用的 cocoa mac 应用程序。过了一会儿，我对当前的 URL 方案名称不满意并更改了它。但是我的 mac 仍然对旧的 URL 方案做出反应。

有没有办法列出甚至删除（自定义）URL 方案？

附言。如果我发布应用程序的新版本，我不确定 URL 方案是否被新应用程序覆盖，有人可以确认这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T20:39:18.317

正在谷歌搜索解决这个问题，看到你的帖子，然后能够解决问题。

关闭所有应用程序并

打开终端并将其转储到其中：

```
/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support/lsregister -kill -r -domain local -domain system -domain user 
```

那应该为你做。为我工作。这将为您重建 LaunchServices 以删除重复项。

# javascript - 记录已按下哪些键以及以何种顺序 javascript？

> ID：10156941
> 
> 赞同：2
> 
> 时间：2012-04-14T20:03:45.197
> 
> 标签：javascript

我正在创建一个 html 画布游戏，如果有成功的按键顺序，则需要记录。

必须按此顺序按下的键是

**z**然后**是**

如果 z 然后 a 被按下它应该触发一个事件。这怎么能做到最好？！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:06:36.193

```
var keys = [];

$("div").keypress(function(e){
    keys[keys.length] = e.keyCode;
}) 
```

这会做到的。

演示：http: [//jsfiddle.net/DerekL/9LKby/](http://jsfiddle.net/DerekL/9LKby/)

更具体到您的“z and a”示例：

```
var keys = [];                                         //store in an array (list)

$("body").keypress(function(e){                                //keypress event
    keys[keys.length] = e.keyCode;                             //save keyCodes
    if(keys[keys.length-2]==122 && keys[keys.length-1]==97){   //122 = Z; 97 = A
        alert("You have just pressed z and then a");           //done
    }
})​; 
```

# ruby-on-rails - 使用切换按钮代替复选框（Rails、Twitter Bootstrap、Simple_form）

> ID：10156949
> 
> 赞同：13
> 
> 时间：2012-04-14T20:04:42.217
> 
> 标签：ruby-on-rails, twitter-bootstrap, simple-form

我正在使用 Simple_form、twitter bootstrap 和 rails 3.2.2

有谁知道是否有办法在 simple_form 的布尔字段上使用“切换按钮”选项进行引导？我想用按钮替换复选框。

这是我到目前为止以形式（rails）尝试过的内容：

```
<%= f.input :client_approved, :input_html => { :class => 'btn btn-primary', :data => {:toggle => 'button'} } %> 
```

这是 HTML 输出：

```
<input class="boolean optional btn btn-primary" data-toggle="button" id="id_card_design_client_approved" name="id_card_design[client_approved]" type="checkbox" value="1"> 
```

关于如何将按钮标签分配给 simple_form 输入的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T12:56:46.320

我提出了一种基于 JS 的方法……我确信这不是最好的方法，但它确实有效……

在您的视图文件中，添加以下内容：

```
<div id="client_approved_buttons" class="btn-group" data-toggle="buttons-radio">
  <%= f.input : client_approved, as: :hidden %>
  <a class="btn" data-value="1">Yes</a>
  <a class="btn" data-value="0">No</a>
</div> 
```

然后在您的 JS 文件中，添加以下内容：

```
// make button toggles update hidden field
$('.btn-group a').on('click', function(event){
  event.preventDefault();
  var input = $(this).siblings('.control-group').find('input[type=hidden]');
  if(input.length>0){
    if(input.val().toString() !== $(this).data('value').toString()){
      input.val($(this).data('value')).trigger('change');
    }
  }
}); 
```

# ffmpeg - 关于 VPS 服务器 Linux

> ID：10156953
> 
> 赞同：0
> 
> 时间：2012-04-14T20:05:36.133
> 
> 标签：ffmpeg, vps

任何人都可以告诉我如何将 FFMPEG、MENCODER 安装到我的 VPS 服务器上。我有 WHM 和 cPanel。

对此的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-20T05:38:35.850

Install FFMPEG-PHP Extension

FFmpeg-php is a very good extension and wrapper for PHP which can pull useful information about video through API interface. Inorder to install it you will need to download the source file and then compile and install extension in your server. You can download the source tarball : [http://ffmpeg-php.sourceforge.net/](http://ffmpeg-php.sourceforge.net/)

wget /path/to/this/file/ffmpeg-php-0.5.2.1.tbz2

tar -xjf ffmpeg-0.5.2.1.tbz2

phpize

./configure make make install

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:18:24.287

从 SSH 运行以下命令：

百胜安装mplayer mencoder

以下网址的一个很好的教程：

[http://www.eukhost.com/forums/f15/how-install-ffmpeg-ffmpeg-php-mplayer-mencoder-flv2tool-lame-mp3-encoder-4893/](http://www.eukhost.com/forums/f15/how-install-ffmpeg-ffmpeg-php-mplayer-mencoder-flv2tool-lame-mp3-encoder-4893/)

# c# - 唯一标识类型的最佳方法

> ID：10156954
> 
> 赞同：4
> 
> 时间：2012-04-14T20:05:36.713
> 
> 标签：c#, .net, serialization

从表面上看，这似乎是一个简单的问题，但我想我会为这个问题与社区联系。我在流中序列化 .NET 类型，需要某种方法来唯一标识每种类型，以便我知道如何反序列化另一端的类型。我想到了各种方法：

1.  使用需要整数来标识消息类型的属性注释每种类型
2.  除了使用 GUID 之外，执行与 #1 相同的操作
3.  散列完全限定名称

我希望能够在不需要属性的情况下做到这一点。使用整数容易发生冲突。每次创建新类型时生成 GUID 很麻烦。第三种选择似乎是可能的，但也有可能发生冲突，尽管有些孤立。

我想做的是以确定性的方式推断这种唯一性，以便任何对象都可以传入并在另一端反序列化，而无需以某种方式对其进行标记。假设我已经有办法在两端注册所有已知类型，所以在发送任何消息之前，两端都已经有了一个可接受类型的列表。我想做的就是让注册那些已知类型的过程变得不那么笨重。

编辑：我希望尽可能小，同时仍能达到我需要的独特性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T20:08:57.283

[`Type.GUID`](http://msdn.microsoft.com/en-us/library/system.type.guid.aspx)例如，您可以使用...

如果不适合您的情况，请提供更多详细信息...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T20:11:53.490

除了可用的答案之外，我建议使用完全限定的类型名称。它已经保证了您的应用程序域内的唯一性。

# javascript - 在 ruby 中处理正则表达式

> ID：10156955
> 
> 赞同：1
> 
> 时间：2012-04-14T20:05:43.417
> 
> 标签：javascript, jquery, ruby, rhomobile

在我的控制器中，我从表中获取了一些记录。我正在尝试将记录记录发送到 Js 并显示在我的页面中。

```
 @item_list = TransferDetail.find(:all) - Code to get data from table 
```

@item_list 的输出为

```
[{:source_id=>8, :object=>"11375810_0", :prefix=>"a",:unit=>"0", :description=>"xxxxx"}, {:source_id=>8, :object=>"11375810_1", :prefix=>"b", :unit=>"0", :description=>"yyyyy"}] 
```

向JS端发送记录

```
WebView.execute_js("replaceItemList('#{@item_list}')") 
```

在Js端

```
function replaceItemList(item_list){
  alert (item_list);
 } 
```

警报结果像这样

```
[{:source_id=&gt;8, :object=&gt;&quot;11375810_0&quot;, :prefix=&gt;&quot;a&quot;,:unit=&gt;&quot;0&quot;, :description=&gt;&quot;xxxxx&quot;}, {:source_id=&gt;8, :object=&gt;&quot;11375810_1&quot;, :prefix=&gt;&quot;b&quot;, :unit=&gt;&quot;0&quot;, :description=&gt;&quot;yyyyy&quot;}] 
```

任何人都可以建议我如何在我的视图页面中显示。

我知道如何在下面解析并在视图页面中显示。

```
"{\"transferType\":\"D\", \"accountNumber\":\"132\", \"employeeId\":\"23\", \"orderedByPhone\":\"2423453453\", \"deliveryInstructions\":\"fdgfghvbn\"}" 
```

可以像这样转换我的@item_list 值或让我知道其他建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:14:23.573

我的要求是将表（数据库记录）发送到前端并显示。所以我喜欢下面 def transfer
@item_list = TransferDetail.find(:all) preferred_accessories_content = get_preferred_accessories_content WebView.execute_js("replaceItemDetails('#{preferred_accessories_content}')") end

```
def get_preferred_accessories_content
    preferred_accessories_content = ""
    @item_list.each do |pa|
      preferred_accessories_content+= "<tr>" + "<td> #{pa.description} </td>"+"</tr>"
    end
    preferred_accessories_content
end 
```

这里“preferred_accessories_content”的结果是普通的html表格行，所以我可以通过JS将此行附加到我的视图页面。

# java - 如何阻止一条线段与另一条线段相交？

> ID：10156956
> 
> 赞同：3
> 
> 时间：2012-04-14T20:05:52.493
> 
> 标签：java, math, geometry, 2d

几何代码一段时间后变得很累，但我想完成这个库，所以就到这里吧。

基本上，移动一条线段 A 使其不再与另一条线段 B 相交的最有效方法是什么？

两条线段均由起点 (x, y) 和描述线段如何从该点延伸的矢量 (eX, eY) 定义。下面是如何描述线段的示例：

![在此处输入图像描述](../Images/8ba4f66e5657e1b3c6039575dccfcb12.png)

我正在寻找的解决方案是将线段移动（其范围没有以任何方式修改）到它不相交的最近位置。一个例子：

![在此处输入图像描述](../Images/099fa56ffac2cbd3d9c590524dd69204.png)

获得此结果的最有效方法是什么？

编辑：人们问我所说的“移动”是什么意思——我的意思是改变线段起点的 (x, y) 坐标。这将翻译整个片段。

并且线段存在于笛卡尔平面上，并且允许任何x/y移动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T20:17:15.730

怎么样：找到四个向量：两个从红线的端点垂直到黑线，两个从红线垂直到黑线的端点。取这些向量中最短的一个，沿着它移动红线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:15:34.123

由于您没有指定可以自由移动的维度，因此我假设任何维度都可以。

我假设您的红线的特征是起点（x，y）和从那里到终点的向量（eX，eY）。因此，线上的任何点都是 [0,1]*(eX,eY)+(x,y)。

让我们找到线交叉的点。这就是 a*(eX1,eY1)+(x1,y1) = (eX2,eY2)+(x2,y2)，其中 a 在 [0,1] 中。

如果存在此交叉点，您可以移动线使其在此交叉点结束，其中 a 是您必须移动的长度。

(x1',y1') = (x1,y1) - a*(eX1,eY1)

这样，您将起点移开，直到您之前找到的交叉点是两条线的接触点。

# python - 我怎么知道一个特定的用户，而不是当前的请求用户，是否登录了 Django？

> ID：10156957
> 
> 赞同：3
> 
> 时间：2012-04-14T20:06:11.733
> 
> 标签：python, django, authentication

我如何知道特定用户是否已登录 Django（不是当前请求的用户）？

我试过这个：

```
user = User.objects.get(username="jon")
if user.is_authenticated():
   print "user logged" 
```

`True`但是如果`username`匹配，这总是返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T20:34:37.743

简短的回答是你不能；至少没有 Django 内置的任何东西。要知道数据库中的任何用户是否已登录，您实际上是在询问该用户是否与活动会话相关联。但是您不能查询用户 ID 的会话表（没有查询所有活动会话），因为此信息存储为腌制数据。即使您这样做了，这也不是完全有意义的，具体取决于会话 cookie 的持续时间（默认 2 周）。

所以，你可以做什么？您可以查询有关用户的一件事是他们上次登录的时间。例如，您可以获得最后一次登录不到 10 分钟前的用户：

```
from datetime import datetime, timedelta
from django.contrib.auth.models import User

cutoff = datetime.now() - timedelta(minutes=10)
active = User.objects.filter(last_login__gt=cutoff) 
```

您可以做的另一件事是自行跟踪。事实上，有一个应用程序可以做到这一点，叫做[django-tracking](https://bitbucket.org/codekoala/django-tracking)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T20:36:55.847

没有内置的方法来做你正在寻找的事情，但是有一个应用程序可以插入到你的项目中，让你做你想做的事。它被称为 django-tracking，你可以在这里找到它：[https ://github.com/codekoala/django-tracking](https://github.com/codekoala/django-tracking)

*编辑*哎呀！我被打败了，但基本上是马克拉文所说的。

# ruby - 如何继续 gem 安装过程

> ID：10156958
> 
> 赞同：3
> 
> 时间：2012-04-14T20:06:24.993
> 
> 标签：ruby, gem

我正在尝试安装需要编译 pHash 库的 phashion。pHash 依赖于 libjpeg。gem 在 Linux 机器上安装得很好，但我的 Mac (Lion 10.7.3) 上有一些问题：

我确实通过 MacPorts 安装了 libjpeg，但是当我运行`gem install phashion`该过程失败时，抱怨缺少 libjpeg。

这是我得到的错误：

```
gcc -I. -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin11.0 -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin11.0 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common  -I/Library/Ruby/Gems/1.8/gems/phashion-1.0.4/ext/phashion_ext/include  -L/Library/Ruby/Gems/1.8/gems/phashion-1.0.4/ext/phashion_ext/lib  -x c++   -c phashion_ext.c
cc -arch i386 -arch x86_64 -pipe -bundle -undefined dynamic_lookup -o phashion_ext.bundle phashion_ext.o -L. -L/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib -L/Library/Ruby/Gems/1.8/gems/phashion-1.0.4/ext/phashion_ext/lib -L/Library/Ruby/Gems/1.8/gems/phashion-1.0.4/ext/phashion_ext/lib -L. -arch i386 -arch x86_64     -lruby   -lpthread -lpHash_gem -lstdc++ -ljpeg
ld: library not found for -ljpeg
collect2: ld returned 1 exit status
ld: library not found for -ljpeg
collect2: ld returned 1 exit status
lipo: can't open input file: /var/tmp//ccCwUAM1.out (No such file or directory)
make: *** [phashion_ext.bundle] Error 1

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/phashion-1.0.4 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/phashion-1.0.4/ext/phashion_ext/gem_make.out 
```

libjpeg 位于`/opt/local/lib`. 所以我查看了 gem 的 makefile 并将库路径添加到 ldflags。现在 make 运行良好，库似乎可以编译。

现在怎么办？当我`gem install phashion`再次运行时，我的 makefile 被覆盖。

那么如何在不丢失对 gem 的更改的情况下重新开始安装过程呢？

**PS：**我尝试更改为 gem 的目录并运行`rake`，但失败并显示以下错误消息：

```
WARNING: rake-compiler found compiled files in 'ext/phashion_ext' directory. Please remove them.
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby -I"lib:lib:test" -I"/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib" "/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb" "test/**/test_*.rb" 
/Library/Ruby/Site/1.8/rubygems/custom_require.rb:29:in `gem_original_require': no such file to load -- phashion_ext (LoadError)
    from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:29:in `require'
    from ./lib/phashion.rb:33
    from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:29:in `gem_original_require'
    from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:29:in `require'
    from ./test/helper.rb:3
    from /Library/Ruby/Gems/1.8/gems/phashion-1.0.4/test/test_phashion.rb:1:in `require'
    from /Library/Ruby/Gems/1.8/gems/phashion-1.0.4/test/test_phashion.rb:1
    from /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:10:in `require'
    from /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:10
    from /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:9:in `each'
    from /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:9
    from /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4:in `select'
    from /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4
rake aborted! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:53:28.223

你安装了最新的 XCode 吗？

1.  安装 XCode 4.4
2.  从 XCode 4.4 首选项对话框安装命令行工具

# javascript - 如何在 jquery 验证器中显示“看起来不错”的消息？

> ID：10156962
> 
> 赞同：4
> 
> 时间：2012-04-14T20:07:04.433
> 
> 标签：javascript, jquery, jquery-plugins, jquery-validate

我想知道这样的事情是否可行

```
.validate({
    rules: {
        email: {
                    required: true,
                    email: true
                }
            },

messages: {
    email: {
            required: "<?php echo get_texto_clave('error_validate_empty'); ?>",
            email: 'Please enter a valid email address',
            whenFieldIsValid: 'looks good'
        }
    }
}); 
```

要显示一条消息，而不是错误，而是确认输入有效，

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T20:20:59.430

您可以使用该`validClass` [选项](http://docs.jquery.com/Plugins/Validation/validate#toptions)来编写此功能。当输入有效时，插件将向该元素添加指定的类。

在每个输入之后插入一个隐藏的 div：

```
<input id="exampleinput" /><div class="correctmessage">Looks Good</div> 
```

隐藏：

```
.correctmessage{ display: none; } 
```

在您的验证语句中，包括选项，`validClass`以及如果您希望消息在表单发生更改时显示：`onkeyup``onclick`

```
.validate({
    validClass: "success",
    onkeyup: true,
    onclick: true
}) 
```

`correctmessage`然后 CSS 在一个类之后显示类的第一个元素`success`（具体应该覆盖其他 CSS 块）：

```
.success + .correctmessage{ display: block;} 
```

`display: inline`也是有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-23T10:01:31.130

通过稍微修改“highlight”和“unhighlight”选项，您可以在提交表单之前轻松标记每个有效字段：

```
$(form).validate({
    highlight: function(element) {
        $(element).removeClass("valid").addClass("error");
    },
    unhighlight: function(element) {
        $(element).removeClass("error").addClass("valid");
    }
}) 
```

您可以在每次输入后添加一个隐藏元素，并通过 css 切换它的可见性（或显示）：

```
.valid_message { visibility: hidden; }
.valid + .valid_message { visibility: visible; } 
```

# ruby-on-rails - Rails Rspec - 部分表单未出现在集成测试中（不呈现 fields_for）

> ID：10156964
> 
> 赞同：0
> 
> 时间：2012-04-14T20:07:05.790
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, integration-testing

我有**瞳孔**模型。所以我可以保存和编辑瞳孔。学生 has_one**电话**（和电话属于学生）和应用程序通过嵌套属性将学生与他们的电话一起保存。一切都在浏览器中运行良好，但是当我尝试测试更新**瞳孔**模型时，我遇到了一些麻烦。

**控制器**：

```
class PupilsController < ApplicationController
  ...

  def edit
    @pupil = Pupil.find( params[:id] )
  end

  def update    
    pupil = Pupil.find( params[:id] )

    if pupil.update_attributes( params[:pupil] )
      redirect_to pupils_path
      ...
    else
      redirect_to edit_pupil_path
      ...
    end
  end
end 
```

**查看**编辑页面：

```
<%= form_for @pupil, :html => {:class => "form-horizontal"} do |f| %>
  <%= field_set_tag do %>
    ...
    <div class="control-group">
      <%= f.label :pupil_address_of_living, "Address of living", :class => "control-label" %>

      <div class="controls">
        <%= f.text_area :pupil_address_of_living, :rows => 3, 
                        :placeholder => @everpresent_field_placeholder %>
      </div>
    </div>

    <hr/>

    <%= f.fields_for :pupil_phone do |pp| %>                                              
      <div class="control-group">
        <%= pp.label :pupil_home_number, "Home phone", :class => "control-label" %> 

        <div class="controls">
          <%= pp.text_field :pupil_home_number, :placeholder => @everpresent_field_placeholder %>
        </div>
      </div>
      ...
    <% end %>

    <%= f.submit "Change", :class => "btn btn-large btn-warning" %>
  <% end %>  
<% end %> 
```

我的**集成测试**实际上失败了：

```
# encoding: UTF-8
require 'spec_helper'

describe "SchoolHeads" do
  before(:each) do
    @attr = {
              :user_login => "iSchool_head",
              :password => "foobar"
            }

    user = User.new( @attr )
    user.user_role = "school_head"
    user.save!
  end

  ...
    describe "Updating" do
      describe "View" do
        before(:each) do
          @ipupil = Factory( :pupil, :pupil_phone => Factory( :pupil_phone ))            
          visit edit_pupil_path( :id => @ipupil.id )
        end 

        it "should have values in forms" do     
          response.should have_selector("form") do |form|
          ... 
          form.should have_selector("input", :name => "pupil[pupil_phone_attributes][pupil_home_number]")
        end
      end
    end 
```

**我的**测试****错误**：**

 **```
Failure/Error: form.should have_selector( "input",
expected following output to contain a <input name='pupil[pupil_phone_attributes][pupil_home_number]'/> tag:

<form accept-charset="UTF-8" action="/pupils/220" class="form-horizontal" id="edit_pupil_220" method="post">
  <div style="margin:0;padding:0;display:inline">
    <input name="utf8" type="hidden" value="✓"><input name="_method" type="hidden" value="put">
  </div>
  <fieldset>
    ...      
    <div class="control-group">
      <label class="control-label" for="pupil_pupil_address_of_living">Address of living</label>
      <div class="controls">
        <textarea cols="40" id="pupil_pupil_address_of_living" name="pupil[pupil_address_of_living]" rows="3">Moscow</textarea>
       </div>
     </div>

     <hr>

     # Here i should have part of form with phones which is not rendering. 

     <input class="btn btn-large btn-warning" name="commit" type="submit" value="Change">
   </fieldset>
 </form> 
```

我从来没有遇到过这么奇怪的问题。是bug还是什么？是我的错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T13:30:45.517

我解决了这个问题。非常感谢**pjumble**注意到这个问题。问题是工厂没有正确设置关系。所以我将代码更改为：

```
before(:each) do 
  @ipupil = FactoryGirl.create( :pupil ) 
  @attr_pupil_phones = { :pupil_home_number => "8903111111", 
                         :pupil_mobile_number => "777-33-22" } 
  @ipupil.create_pupil_phone( @attr_pupil_phones ) 
  ... 
end 
```

现在它起作用了。**

# mysql - 选择所有[第一个字母以B开头]的地方

> ID：10156965
> 
> 赞同：62
> 
> 时间：2012-04-14T20:07:36.110
> 
> 标签：mysql

这是我上一个问题的后续问题。我想写一个 MYSQL 语句来回显每个以字母 B 开头的条目。

函数.php

```
function getCategory() {
$query = mysql_query("SELECT author FROM lyrics WHERE author [starts with letter B]") or die(mysql_error());
while ($row = mysql_fetch_assoc($query)) { ?>
    <p><a href="##"><?= $row['author']; ?></a></p>
    <?php } 
```

Category.php?category=b

```
<?php include 'includes/header.php' ?>
<?php getCategory(); ?>
<?php include 'includes/footer.php' ?> 
```

我猜是这样的。然后一个用于字母表的每个字母，一个用于杂项（数字等）

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-04-14T20:09:08.973

```
SELECT author FROM lyrics WHERE author LIKE 'B%'; 
```

不过，请确保您有一个索引`author`！

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-07-06T05:13:02.063

这适用于 MYSQL

```
SELECT Name FROM Employees WHERE Name REGEXP '^[B].*$' 
```

在这个 REGEXP 代表正则表达式

和

这是针对 T-SQL 的

```
SELECT Name FROM Employees WHERE Name LIKE '[B]%' 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-09-21T05:53:06.793

SQL 语句：

```
 SELECT * FROM employee WHERE employeeName LIKE 'A%'; 
```

结果：

```
Number of Records: 4

employeeID  employeeName    employeeName    Address City    PostalCode  Country

1           Alam             Wipro          Delhi   Delhi   11005      India

2           Aditya           Wipro          Delhi   Delhi   11005      India

3           Alok             HCL            Delhi   Delhi   11005      India

4           Ashok            IBM            Delhi   Delhi   11005      India 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-09-29T09:23:00.043

您可以使用：

```
WHERE LEFT (name_field, 1) = 'B'; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-14T21:43:20.240

在您对 ceejayoz 的回答发表评论之后，有两件事有点混乱：

1.  `$first`不是数组，而是字符串。替换`$first = $first[0] . "%"`为`$first .= "%"`。只是为了简单。（[PHP 字符串运算符](http://www.php.net/manual/en/language.operators.string.php)）

2.  与`LIKE`运算符比较的字符串应加引号。替换`LIKE ".$first."")`为`LIKE '".$first."'")`。( [MySQL 字符串比较函数](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html))

# memory - OpenCL 内存架构和 GPU 的物理内存/缓存（L1/L2...）之间的关系？

> ID：10156966
> 
> 赞同：3
> 
> 时间：2012-04-14T20:07:37.070
> 
> 标签：memory, opencl, gpu

OpenCL 内存架构之间是否有任何直接关系：

本地/全局/常量/私有[内存](http://www.codeproject.com/KB/showcase/Memory-Spaces/image001.jpg)

以及物理 GPU 的内存和缓存。例如具有 1GB 内存/L1 缓存/L2 缓存的 GPU 卡。这些与本地/全局..内存有关吗？

或者是从全局内存分配的本地/常量/私有内存？-谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T07:42:02.740

OpenCL 并没有真正讨论内存缓存。大多数现代图形卡确实具有某种用于全局内存的缓存协议，但在旧卡中并不能保证这些协议。然而，这里是不同记忆的概述。

**私有内存**- 此内存作为每个工作项的寄存器保存。GPU 的每个计算单元都有非常大的寄存器文件。但是，如果需要，此内存可能会溢出到本地内存中。创建变量时默认分配私有内存。

**本地内存**- 工作组本地和共享的内存。此内存系统通常位于计算单元本身上，不能被其他工作组读取或写入。此内存在 GPU 架构上通常具有非常低的延迟（在 CPU 架构上，此内存只是系统内存的一部分）。此内存通常用作全局内存的手动缓存。本地内存由`__local`属性指定。

**常量内存**- 全局内存的一部分，但只读，因此可以积极缓存。 `__constant`用于定义这种类型的内存。

**全局内存**- 这是 GPU 的主内存。 `__global`用于将内存放入全局内存空间。

# c# - 无法将类型“十进制”隐式转换为“字符串”

> ID：10156970
> 
> 赞同：1
> 
> 时间：2012-04-14T20:07:51.173
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我在创建的购物车中有此代码，但收到标题中显示的错误。错误显示在此行：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T20:11:04.167

只需调用`ToString`以获取十进制值的字符串表示形式：

```
order.Total = orderTotal.ToString("G"); 
```

虽然我不明白你为什么要将成员存储`Total`为 a`string`而不是 a `decimal`too。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:11:36.960

听起来这个`Order`类有`Total`一个字符串属性。检查类定义`Order`。如果是这种情况，我建议将`Total`数据类型更改为小数，因为将货币值表示为字符串没有意义。`decimal`更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T20:12:31.173

您的 Order 课程是什么样的？属性的类型是什么`Total`？看起来它是一个字符串类型。在这里，您尝试将十进制值设置为字符串类型，也就是说，您遇到了该错误。因此，您需要先将十进制转换为字符串，然后再将其分配给字符串变量。使用`toString()`方法。

```
order.Total = orderTotal.ToString(); 
```

正如 Tudor 已经提到的，最好使用 Total 作为小数属性，因为它可以很容易地进行所有数学运算。每次您想要进行算术运算并将其再次转换回字符串时，您都不需要将其转换为十进制格式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T20:23:40.617

将类型更改`Order.Total`为十进制。数据类型 Decimal 不会自动转换为字符串（反之亦然），这就是您收到错误的原因，此外，任何后续调用都`Order.Total`将与字符串相关，因此您将无法使用像`Order.Total +=`

另请注意，任何绑定便利，如 DataTable 的“格式”属性都将被忽略，因为底层架构不会调用 string.ToString(format)。

# ruby-on-rails - 通过浏览器进行用户地理定位的 gmaps4rails 问题

> ID：10156976
> 
> 赞同：1
> 
> 时间：2012-04-14T20:08:27.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, geolocation, gmaps4rails

我正在使用 Gmaps4rails。它工作得很好。但是现在我在尝试通过浏览器对我的用户进行地理定位时遇到了问题。

我的观点：

```
 <%= gmaps(:markers => { :data => @json},
        :map_options => { :container_class => "map_container",:id => "map",:class => "gmaps4rails_map"},
        :scripts     => :none ) %>

        <% content_for :scripts do %>
        <script type="text/javascript">
         Gmaps.map.callback = function() {
          setInterval(function(){Gmaps.map.createMarker({
                        Lat: Gmaps.map.userLocation.lat(),
                        Lng: Gmaps.map.userLocation.lng(), 
                        rich_marker: null, 
                        marker_picture: "/images/icon.png",
                       })},10000)
            }

        </script>
        <% end %> 
```

我尝试了一种 setinterval 方法用于浏览器地理位置延迟，如[如何在 gmaps4rails 中使用标记显示用户位置？](https://stackoverflow.com/questions/8405048/how-do-i-display-the-users-location-with-a-marker-in-gmaps4rails)

我的 gmaps 咖啡脚本

```
 detect_location: true  # should the browser attempt to use geolocation detection features of HTML5?
  center_on_user: true   # centers map on the location detected through the browser 
```

我在我的 google chrome 控制台中遇到了这个错误。

未捕获的类型错误：无法读取未定义 Gmaps4Rails.Gmaps4Rails.createImageAnchorPositiongmaps4rails.base.js:377 Gmaps4RailsGoogle.Gmaps4RailsGoogle.createMarkergmaps4rails.googlemaps.js:127 的属性“0”（匿名函数）

我错过了什么？？谢谢

斯蒂芬妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T21:02:36.710

你应该做：

```
 setInterval( function(){
 Gmaps.map.createMarker({
   Lat: Gmaps.map.userLocation.lat(),
   Lng: Gmaps.map.userLocation.lng(), 
   rich_marker: null, 
   marker_picture: "https://a248.e.akamai.net/assets.github.com/images/modules/about_page/octocat.png?1315937507",
   marker_width: 80,
   marker_height: 80,
   marker_anchor: null,
   shadow_anchor: null,
   shadow_picture: null,
   shadow_width: null,
   shadow_height: null
   })},10000) 
```

详细但不应该直接使用:)

顺便说一句，这不是一个好的实现：

如果用户花更多时间接受地理定位（或干脆拒绝）怎么办？

# iso - ISO 3166-1 alpha-2 逗号分隔值

> ID：10156977
> 
> 赞同：2
> 
> 时间：2012-04-14T20:08:28.407
> 
> 标签：iso, iso-3166

[http://www.iso.org/iso/country_names_and_code_elements](http://www.iso.org/iso/country_names_and_code_elements)有“维尔京群岛，英国”。我会认为这个国家被称为“英属维尔京群岛”。我在寻找错误的国家名称吗？是的，这是一个编程问题，我想在 Drupal 核心中使用它。

编辑：不，问题不只是那个单一的国家名称。每个用逗号分隔的国家名称似乎都是一个类似的问题。我需要一个 ISO 源：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:33:51.330

ISO 3166 没有国家“通用名称”的概念。它仅带有以下名称：

*   英文（或法文）简称
*   英文（或法文）全名

短名称将类似于：

```
Central African Republic (the)
Virgin Islands, British 
```

长名称将类似于：

```
The Republic of Equatorial Guinea
People's Republic of China 
```

短名称和长名称在用户界面中都有些用处。这就是 Debian 项目在其[ISO 3166](http://anonscm.debian.org/gitweb/?p=iso-codes/iso-codes.git;a=blob;f=iso_3166/iso_3166.xml;h=289605dcfd319dac7faa401d27da538f9c11175f;hb=master)数据库中维护“通用名称”列的原因。它解决了一些明显的问题，但绝对不是全部（尤其是*维尔京群岛，英国*入境）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:08:28.740

来自维基百科：

“英属维尔京群岛的正式名称简直就是维尔京群岛，美属维尔京群岛的正式名称是美利坚合众国的维尔京群岛。”

基于此，我很想完全放弃英国这个词，并在您放入的任何列表旁边提供美国条目。这样，当当地人滚动 az 以查找“处女岛”时，两个条目都在那里，并且根据当前的命名约定，这两个条目都是“正确的”。当然，假设维基百科是正确的。

虽然我怀疑当地人可能首先会认同来自“维尔京群岛”，其次是来自英国/美国，但我没有该地区的文化背景可以让我成为这个特定问题的专家，所以如果有人有更好的答案，我很高兴听到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T03:00:52.637

[您可以在http://country.io/names.json](http://country.io/names.json)获得一个国家代码来命名地图，并且它具有合理的名称：

```
CF: "Central African Republic",
VG: "British Virgin Islands",
VI: "U.S. Virgin Islands", 
```

# objective-c - UTF-8 转换？

> ID：10156979
> 
> 赞同：0
> 
> 时间：2012-04-14T20:08:35.557
> 
> 标签：objective-c, cocoa-touch, cocoa, utf-8

我正在获取一个 JSON 提要，但 JSON 提要中出现了奇怪的字符。例如 pass\u00e9 代表 passé。我已经使用了 utf-8`NSUTF8StringEncoding`

我正在使用下一个 JSON：

```
NSString *jsonString = [NSString 
                        stringWithContentsOfURL:[NSURL URLWithString:UrlXml] 
                        encoding:NSUTF8StringEncoding
                        error:nil];

    SBJSON *parser = [[SBJSON alloc] init];
    NSDictionary *results = [parser objectWithString:jsonString error:nil];

    parser = nil; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T21:23:10.537

如果您从 JSON 提要接收的数据中包含文字文本`pass\u00e9`（作为 10 个 ASCII 字节，其中包含文字“反斜杠”字符），则数据不是 UTF-8 编码的。你应该`NSNonLossyASCIIStringEncoding`改用。该编码会将`\u####`序列转换为正确的 Unicode 字符。

# yii - yii - 每个控制器可用的变量

> ID：10156985
> 
> 赞同：-1
> 
> 时间：2012-04-14T20:09:14.020
> 
> 标签：yii, class-visibility, global-scope

我是 yii 的新手。

我在我的网站上使用了超过 1 个控制器，每个控制器几乎没有操作。

我想在每个控制器中使用一些变量（变量的值将是固定的，我需要一些公式的常量）。定义这些变量的最佳位置（标准方式）是什么？我应该使用会话吗？（因为价值不会改变）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:48:39.253

不确定您使用 vars 的用途，但您可以通过在配置 main.php 中定义它们来做到这一点

```
'params'=>array(
'someVar1'=>'varValue1',
    'someVar2' => 'varValue2',
), 
```

然后你可以通过调用在任何地方访问它们

```
Yii::app()->params['someVar1'] 
```

它们将在您的应用程序中的任何位置可用。

或者你可以从一个基类扩展你的所有控制器并在那里定义你的常量

基本控制器：

```
class Controller extends CController { 

    const SOME_VAR = 'someValue'; 
} 
```

你的控制器：

```
class YourController1 extends Controller
{
    public function actionIndex()
    {
        echo parent::SOME_VAR;
    }

} 
```

您的另一个控制器：

```
class YourController2 extends Controller
{
    public function actionLogin()
    {
         echo parent::SOME_VAR;
    }

 } 
```

# c++ - 在 C++ 方法签名中 * 是什么意思？

> ID：10156987
> 
> 赞同：0
> 
> 时间：2012-04-14T20:09:19.623
> 
> 标签：c++, pointers, reference

我知道 a`*`与指针有关。我仍在尝试在脑海中解决这个问题（指针与引用。）

我正在阅读一本 C++ 书籍，其中有一个方法签名，如下所示：

```
void DrawBitmap(char *filename, int x, int y) 
```

`*`在这种情况下是什么意思？它是接受指针还是对变量的引用？

感谢您的帮助......并忍受了一个公认的菜鸟问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T20:11:15.833

这意味着您正在向它传递一个指向字符的指针，这通常意味着指针指向字符数组中的第一个字符。使用指针 ( `*`)，您可以进行算术运算，例如 (fileName + 1) 来获取第二个字符。当您使用引用 ( `&`) 时，您暗示接收函数应该对原始数据进行操作。如果没有引用，函数会传递一个副本，而不是原始的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T20:19:14.927

Others have directly answered your question already; some of the following links are well worth a read for information about pointers (and their *syntactical* relationship to arrays in C++), they're well worth studying and I would recommend taking a little time reading through them to get your head around the ideas:

[http://www.c-faq.com/aryptr/](http://www.c-faq.com/aryptr/)

[http://www.augustcouncil.com/~tgibson/tutorial/ptr.html](http://www.augustcouncil.com/~tgibson/tutorial/ptr.html)

[http://www.augustcouncil.com/~tgibson/tutorial/arr.html](http://www.augustcouncil.com/~tgibson/tutorial/arr.html)

[http://www.eternallyconfuzzled.com/tuts/languages/jsw_tut_pointers.aspx](http://www.eternallyconfuzzled.com/tuts/languages/jsw_tut_pointers.aspx)

[http://www.daweidesigns.com/cgi-bin/pointers.php](http://www.daweidesigns.com/cgi-bin/pointers.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T20:11:40.003

`char *filename`是指向要传递给`DrawBitmap`方法的字符的指针。有关详细信息，请[参阅此链接](http://www.eskimo.com/~scs/cclass/krnotes/sx8e.html)。

# c# - INotifyPropertyChanged 导致跨线程错误

> ID：10156991
> 
> 赞同：9
> 
> 时间：2012-04-14T20:09:38.100
> 
> 标签：c#, winforms, multithreading

这是我的场景：

我有一个绑定到 BindingList 的 GridControl。起初我正在做的是创建一个工作线程并直接访问 BindingList ，但这会引发“检测到跨线程操作”，所以我按照这里的指南进行操作：

[http://www.devexpress.com/Support/Center/p/AK2981.aspx](http://www.devexpress.com/Support/Center/p/AK2981.aspx)

通过将原始 BindingList 克隆到工作线程并更改它，我得到了预期的效果。但是，我最近将 INotifyPropertyChanged 实现到保存在 BindingList 中的对象中，并且我再次开始收到错误。

我的猜测是 GridView 仍在侦听对象中的 INotifyPropertyChanged。

我怎样才能解决这个问题？

我的课：

```
public class Proxy : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-14T20:27:02.350

如果您从 UI 线程外部（例如从工作线程）操作 UI，则需要重新加入 UI 线程。您可以通过调用`Invoke`UI 控件来执行此操作。您可以使用`InvokeRequired`.

通常使用的模式是这样的：

```
public void ChangeText(string text)
{
   if(this.InvokeRequired)
   {
      this.Invoke(new Action(() => ChangeText(text)));
   }
   else
   {
      label.Text = text;  
   }
} 
```

在您的情况下，UI 正在被操纵`INotifyPropertyChanged`，因此您需要确保始终在 UI 线程上修改实体（使用上述技术），或者使用[通用异步 INotifyPropertyChanged 助手](http://www.claassen.net/geek/blog/2007/07/generic-asynchronous.html)。这是被绑定项目的包装。它使用上述技术来确保`ChangeProperty`事件在 UI 线程上触发。

这是一个非常粗略的类代理示例`Entity`。这可确保属性更改事件重新加入 UI 线程，并保持实体本身不被修改。显然，您可能希望更通用地使用 DynamicObject 来实现这一点。

```
public class NotificationHelper : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private readonly ISynchronizeInvoke invokeDelegate;
    private readonly Entity entity;

    public NotificationHelper(ISynchronizeInvoke invokeDelegate, Entity entity)
    {
       this.invokeDelegate = invokeDelegate;
       this.entity = entity;

       entity.PropertyChanged += OnPropertyChanged;
    }

    public string Name
    {
       get { return entity.Name; }
    }

    private void OnPropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        if (PropertyChanged != null)
        {
           if (invokeDelegate.InvokeRequired)
           {
               invokeDelegate.Invoke(new PropertyChangedEventHandler(OnPropertyChanged),
                                     new[] { sender, e });
               return;
           }
           PropertyChanged(this, e);
        }
     }
 } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-27T18:33:08.093

我对 TheGateKeeper 的最终解决方案采取了类似的方法。但是我绑定到许多不同的对象。所以我需要一些更通用的东西。解决方案是创建一个也实现了 ICustomTypeDescriptor 的包装器。通过这种方式，我不需要为可以在 UI 中显示的所有内容创建包装器属性。

```
public class SynchronizedNotifyPropertyChanged<T> : INotifyPropertyChanged, ICustomTypeDescriptor
    where T : INotifyPropertyChanged
{
    private readonly T _source;
    private readonly ISynchronizeInvoke _syncObject;

    public SynchronizedNotifyPropertyChanged(T source, ISynchronizeInvoke syncObject)
    {
        _source = source;
        _syncObject = syncObject;

        _source.PropertyChanged += (sender, args) => OnPropertyChanged(args.PropertyName);
    }

    public event PropertyChangedEventHandler PropertyChanged;
    protected virtual void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged == null) return;

        var handler = PropertyChanged;
        _syncObject.BeginInvoke(handler, new object[] { this, new PropertyChangedEventArgs(propertyName) });
    }

    public T Source { get { return _source; }}

    #region ICustomTypeDescriptor
    public AttributeCollection GetAttributes()
    {
        return new AttributeCollection(null);
    }

    public string GetClassName()
    {
        return TypeDescriptor.GetClassName(typeof(T));
    }

    public string GetComponentName()
    {
        return TypeDescriptor.GetComponentName(typeof (T));
    }

    public TypeConverter GetConverter()
    {
        return TypeDescriptor.GetConverter(typeof (T));
    }

    public EventDescriptor GetDefaultEvent()
    {
        return TypeDescriptor.GetDefaultEvent(typeof (T));
    }

    public PropertyDescriptor GetDefaultProperty()
    {
        return TypeDescriptor.GetDefaultProperty(typeof(T));
    }

    public object GetEditor(Type editorBaseType)
    {
        return TypeDescriptor.GetEditor(typeof (T), editorBaseType);
    }

    public EventDescriptorCollection GetEvents()
    {
        return TypeDescriptor.GetEvents(typeof(T));
    }

    public EventDescriptorCollection GetEvents(Attribute[] attributes)
    {
        return TypeDescriptor.GetEvents(typeof (T), attributes);
    }

    public PropertyDescriptorCollection GetProperties()
    {
        return TypeDescriptor.GetProperties(typeof (T));
    }

    public PropertyDescriptorCollection GetProperties(Attribute[] attributes)
    {
        return TypeDescriptor.GetProperties(typeof(T), attributes);
    }

    public object GetPropertyOwner(PropertyDescriptor pd)
    {
        return _source;
    }
    #endregion ICustomTypeDescriptor
} 
```

然后在 Ui 中，我使用以下内容绑定到这个包装器：

```
 private void CreateBindings()
    {
        if (_model == null) return;

        var threadSafeModel = new SynchronizedNotifyPropertyChanged<MyViewModel>(_model, this);

        directiveLabel.DataBindings.Add("Text", threadSafeModel, "DirectiveText", false, DataSourceUpdateMode.OnPropertyChanged);
    } 
```

MyViewModel 有一个“DirectiveText”属性并实现 INotifyPropertyChanged，没有特别考虑线程或视图类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-20T17:46:31.417

我进行了子类化`BindingList`，以便我可以检查所需的`Invoke`. 这样我的业务对象就没有对 UI 的引用。

```
public class InvokingBindingList<T> : BindingList<T>
{
  public InvokingBindingList(IList<T> list, Control control = null) : base(list)
  {
    this.Control = control;
  }

  public InvokingBindingList(Control control = null)
  {
    this.Control = control;
  }

  public Control Control { get; set; }

  protected override void OnListChanged(ListChangedEventArgs e)
  {
    if (Control?.InvokeRequired == true)
      Control.Invoke(new Action(() => base.OnListChanged(e)));
    else
      base.OnListChanged(e);
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T20:45:11.203

以防万一有人遇到同样的问题......几个小时后我设法解决了它。这是我所做的：

基本上问题是实现 INotifyPropertyChanged 的​​对象存在于工作线程中，这在访问 UI 线程时会导致问题。

所以我所做的是将需要更新的对象的引用传递给 INotifyPropertyChanged 对象，然后对其使用调用。

这是它的样子：

```
 public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            //If the Proxy object is living in a non-UI thread, use invoke
            if (c != null)
            {
                c.BeginInvoke(new Action(() => handler(this, new PropertyChangedEventArgs(name))));
            }
            //Otherwise update directly
            else
            {
                handler(this, new PropertyChangedEventArgs(name));
            }

        }
    }

    //Use this to reference the object on the UI thread when there is need to
    public Control C
    {
        set { c = value; }
    } 
```

从线程中，我所做的只是：

```
 prox.c = this;
                    //Logic here
                    prox.c = null; 
```

希望这对某人有帮助！

# c# - 关闭另一个“表单”时如何“聚焦”到“标签页”

> ID：10156992
> 
> 赞同：0
> 
> 时间：2012-04-14T20:09:42.837
> 
> 标签：c#, winforms, focus

我有两种形式，`form0`和`form1`。 `form0`有一个三页的tabcontrol。( `tagpage1`,`tabpage2`和`tabpage3`)

我想`tabpage2`在`form1`关闭时集中注意力。所以基本上，我如何控制另一个表单的 tabcontrol 的 tabpage 的状态？

很感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T20:17:24.180

这就是事件处理程序的设计目的。您需要为表单的 FormClosed 事件编写一个处理程序。与此类似：

```
 private void button1_Click(object sender, EventArgs e) {
        var frm = new form1();
        frm.FormClosed += new FormClosedEventHandler(frm_FormClosed);
        frm.Show();
    }

    void frm_FormClosed(object sender, FormClosedEventArgs e) {
        tabControl1.SelectedTab = tabPage2;
    } 
```

或者更简洁：

```
 var frm = new form1();
        frm.FormClosed += delegate { tabControl1.SelectedTab = tabPage2; };
        frm.Show(); 
```

由于现在这完全是 form0 的一个实现细节，因此在 form1 类中不需要特殊的代码或 form0 的知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T03:59:07.597

在名称空间级别定义一个静态事件，而不是在关闭 Form1 时触发此事件并在 form2 上处理以选择需要选项卡

# iphone - 如何让我的活动指示器视图覆盖所有屏幕？

> ID：10156995
> 
> 赞同：17
> 
> 时间：2012-04-14T20:10:00.377
> 
> 标签：iphone, objective-c, ios, xcode

因此，当用户单击我的应用程序中的按钮时，我想创建一个带有活动指示器的新视图，并用它覆盖整个屏幕，直到按钮操作完成。

但是，我的活动指示器视图仅覆盖表格视图内部，如下所示：

![在此处输入图像描述](../Images/2304d411bfae8e1bbcdd48e09e56132f.png)

如何让它覆盖整个屏幕？包括导航控制器和表格视图工具栏。

这是我用来创建视图的代码：

```
self.overlayView = [[UIView alloc] initWithFrame:[UIScreen mainScreen].bounds];
self.overlayView.backgroundColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.5];
self.activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
self.activityIndicator.center = self.overlayView.center;
[self.overlayView addSubview:self.activityIndicator];
[self.activityIndicator startAnimating];
[self.tableView addSubview:self.overlayView]; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-14T20:19:47.730

Change

```
[self.tableView addSubview:self.overlayView]; 
```

To

```
[self.navigationController.view addSubview:self.overlayView]; 
```

Set the overlay's rect accordingly.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-14T20:37:45.443

做这个：

```
[[UIApplication sharedApplication].keyWindow addSubview:self.overlayView]; 
```

# objective-c - 在 Objective-C 中，如果 @property 和 @synthesize 会添加 getter 和 setter，为什么不直接公开一个实例变量呢？

> ID：10156997
> 
> 赞同：2
> 
> 时间：2012-04-14T20:10:30.727
> 
> 标签：objective-c

在 Objective-C 中，我们可以添加`@property`和`@synthesize`创建一个属性——比如一个带有 getter 和 setter 的实例变量，它们对这个类的用户是公共的。

在这种情况下，不就和声明一个实例变量并公开它一样吗？这样就不会有调用 getter 和 setter 作为方法的开销。我们可能有机会对 setter 进行验证，例如将数字限制在 0 到 100 之间，但除此之外，公共实例变量不会实现同样的效果，而且速度更快吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T23:40:43.193

**开销不是真正的问题**

要回答您的最后一个问题，是的，会有开销——但是再推一个帧并将其从堆栈中弹出的开销可以忽略不计，尤其是考虑到现代处理器的强大功能。如果您非常关心性能，您应该分析您的应用程序并确定实际问题出在哪里——我保证您会找到比删除一些访问器更好的地方进行优化。

**这是好设计**

封装您的私有成员并使用访问器和修改器保护它们只是良好软件设计的基本原则：它使您的软件更易于维护、调试和扩展。对于任何其他语言，您可能会问同样的问题：例如，为什么不在 Java 类中公开所有字段？（除了像 Ruby 这样的语言，我想，这使得无法公开实例变量）。底线是某些软件设计实践已经到位，因为随着您的软件变得越来越大，您将把自己从真正的地狱中拯救出来。

**延迟加载**

在 setter 中进行验证是一种可能性，但您可以做的远不止这些。您可以覆盖您的 getter 以实现延迟加载。例如，假设您有一个类必须从文件或数据库中加载一些字段。传统上这是在初始化时完成的。但是，可能并非所有字段都会被实例化对象的人实际使用，因此您需要等待初始化这些成员，直到通过 getter 请求它。这会清理初始化，并且可以更有效地利用处理时间。

**有助于避免 ARC 中的保留周期**

最后，属性可以更容易地避免在 ARC 下使用块的保留循环。ivars 的问题在于，当您访问它们时，您是在隐式引用 self. 所以，当你说：

```
_foo = 7; 
```

你真正想说的是

```
self->_foo = 7; 
```

所以说你有以下几点：

```
[self doSomethingWithABlock:^{
    _foo = 7;
}]; 
```

你现在已经有了一个保留周期。你需要的是一个弱指针。

```
__block __weak id weakSelf = self;
[self doSomethingWithABlock:^{
    weakSelf->_foo = 7;
}]; 
```

现在，显然这仍然是 setter 和 getter 的问题，但是您不太可能忘记使用weakSelf，因为您必须显式调用 self.property，而 ivars 被 self 隐式引用。如果您使用属性，静态分析器将帮助您解决这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T22:19:26.437

即使您只使用由 生成的访问器`@synthesize`，它们也会为您带来以下好处：

1.  **内存管理：**生成的设置器保留`(retain)`属性的新值。如果您尝试直接从类外部访问对象 ivar，您不知道该类是否会保留它。（这在 ARC 下不是问题，但仍然很重要。）

2.  **线程安全访问：**生成的访问器默认是原子的，因此您不必担心从多个线程访问属性的竞争条件。

3.  **Key-Value Coding & Observation：** KVC 提供了在各种场景下对属性的便捷访问。您可以在设置谓词时使用 KVC（例如，用于过滤对象的集合），或使用键路径来获取集合中的属性（例如，包含类对象的字典）。KVO 让程序的其他部分自动响应属性值的变化——这在 Mac 上的 Cocoa Bindings 中被大量使用，在那里你可以将控件绑定到属性的值，也可以在 Core Data 中使用两个平台。

除此之外，属性还提供封装。使用您的类实例的其他对象（客户端）不必知道您是否正在使用生成的访问器——您可以创建自己的访问器来执行其他有用的事情，而无需更改客户端代码。在某些时候，您可能会决定您的类需要对其 ivars 之一的外部更改做出反应：如果您已经在使用访问器，您只需要更改它们，而不是让您的客户开始使用它们。或者，Apple 可以在未来的操作系统版本中使用更好的性能或新功能来改进生成的访问器，并且您的类的其余代码及其客户端都不需要更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T05:15:32.613

你是对的......对于一些非常有限的情况。当它们用于像素、图像和实时音频 DSP（等）代码的内部循环时，属性在 CPU 周期性能方面非常糟糕。对于不太频繁的使用，它们在可读可维护可重用代码方面带来了很多好处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T20:26:28.373

`@property`是公开的事实。它告诉其他类，它们可以获取并可能设置该类的属性。属性不是变量，它们就是字面意思。例如，`count`是 的一个属性`NSArray`。它一定是实例变量吗？不。而且你没有理由关心它是否是。

`@synthesize`创建一个默认的 getter、setter 和实例变量，除非你自己定义了这些东西。这是特定于实现的。这是您的班级选择履行其提供财产的合同义务的方式。这只是提供属性的一种方式，您可以随时更改您的实现，而无需告诉其他任何人。

那么为什么不公开实例变量而不是提供 getter 和 setter 呢？因为这将你的双手束缚在类的实现上。它使其他行为依赖于它的特定编码方式，而不仅仅是您选择为其发布的接口。这很快会创建脆弱且相互依赖的代码，这些代码会崩溃。这是面向对象编程的诅咒。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T21:17:15.773

因为人们通常会对封装和隐藏数据和实现感兴趣。更容易维护；您必须更改*一种*实现，而不是*全部*。实施细节对客户是隐藏的。此外，客户端不必考虑该类是否是派生类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-14T21:07:56.853

@property 和 @synthesize 设置正在获取 getter 和 setter 方法

其他用法是您也可以在其他类中使用该变量

如果您想将变量用作实例变量以及您的自定义 getter 和 setter 方法，您可以这样做，但有时当您设置变量的值并且检索变量的值时有时会变成僵尸，这可能会导致您的应用程序崩溃。

所以这个属性会告诉操作系统在你释放你的类对象之前不要释放对象，希望它有帮助

# php - 如何获取我搜索的名称，并为存在的结果添加分页

> ID：10156998
> 
> 赞同：0
> 
> 时间：2012-04-14T20:10:43.150
> 
> 标签：php, phpmyadmin

> 列表只停留在十个项目，没有分页来获取其他列表的其余部分，这很糟糕，但是谢谢伙计们，也许我需要更多的练习，我真的需要这个来工作，所以我可以从这个中学习，无论如何第一个代码有效，第二个有效，但停在十个项目，你说尝试我用一些我已经拥有的代码做的 ceil，下一个和返回页数出现但没有列表，再次尝试没有下一个和返回但是出现了十个项目，我在这里开始有点沮丧。

```
<DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"  />
    <title>Residential</title>
</head>
<body>
    <section>
        <form method="post" action="index.php?go" id="searchform">
            <input type="text" id="sf" name="name" class="inputtext" >
            <input type="submit" name="submit" id="sb" alt="Btn" value="GO">
        </form>
    </section>
    <div class="results">
    <?php
        error_reporting(0);
        if(isset($_POST['submit'])) {
            if(isset($_GET['go'])) {
                if(preg_match("/[A-Z | a-z]+/", $_POST['name'])){    //"/[A-Z | a-z]+/",
$name=$_POST['name'];

                //connect to the database
                $db=mysql_connect ("localhost", "root", "") or die ('I cannot connect to the database    because: ' . mysql_error()); 

                //-select the database to use
                $mydb=mysql_select_db("residential"); 
```

> 这是更改代码的开头

```
//////////pagination////////////

$sql=mysql_query("SELECT userId, FirstName, LastName FROM residentialbackup WHERE     FirstName ='" . $name . "' OR LastName = '" . $name ."'");

//-count results
$numrows=mysql_num_rows($sql);

// Get the value of the last page in the pagination result set
$lastPage = ceil($numrows / $itemsPerPage);

$itemsPerPage = 10;

$page = $_GET['page'];
if (!$page) $page = 1;
$offset = ($page - 1) * $itemsPerPage;

$sql2=mysql_query("SELECT userId, FirstName, LastName FROM residentialbackup WHERE    FirstName = '" . $name . "' OR LastName = '" . $name ."' LIMIT ". $offset . ", ".   $itemsPerPage);

$paginationDisplay = ""; // Initialize the pagination output variable
// This code runs only if the last page variable is ot equal to 1, if it is only 1 page     we require no paginated links to display
if ($lastPage != "1") {
    // This shows the user what page they are on, and the total number of pages
    $paginationDisplay .= 'Page <strong>' . $page . '</strong> of ' . $lastPage. '&nbsp;      &nbsp;  &nbsp; ';
    // If we are not on page 1 we can place the Back button
    if ($page != 1) {
        $previous = $page - 1;
        $paginationDisplay .=  '&nbsp;  <a href="' . $_SERVER['PHP_SELF'] . '?page=' . $previous . '"> Back</a> ';
    } 
    // Lay in the clickable numbers display here between the Back and Next links
$paginationDisplay .= '<span class="paginationNumbers">' . $centerPages . '</span>';
    // If we are not on the very last page we can place the Next button
    if ($page != $lastPage) {
        $nextPage = $page + 1;
        $paginationDisplay .=  '&nbsp;  <a href="' . $_SERVER['PHP_SELF'] . '?page=' .   $nextPage . '"> Next</a> ';
    } 
}

echo $paginationDisplay;
///////////////pagination end//////////// 
```

> 我被困在这里！

```
//echo "<p>" .$numrows . " results found for " . stripslashes($name) . "</p>"; 
//-create while loop and loop through result set
        while($row=mysql_fetch_array($sql2)) {
            $FirstName =$row['FirstName'];
            $LastName=$row['LastName'];
            $userId=$row['userId']; 

            //-display the result of the array
            echo "<ul>\n"; 
            echo "<li>" . "<a href=\"index.php?id=$userId\">"  .$FirstName . " " . $LastName . "     </a></li>\n";
            echo "</ul>";
        }
    }
    else { 
        echo "<p>Please enter a search query</p>";
    }
}
/*
  if(isset($_GET['by'])){
  $name=$_GET['by'];
  include "connectres.php";
  //-query the database table
  $sql="SELECT userId, FirstName, LastName FROM residentialbackup WHERE FirstName LIKE '%" . $name . "%' OR LastName LIKE '%" . $name ."%'";
  //-run the query against the mysql query function
  $result=mysql_query($sql); 
  //-count results
  $numrows=mysql_num_rows($result);
  echo "<p>" .$numrows . " results found for " . $name . "</p>"; 
  //-create while loop and loop through result set
  while($row=mysql_fetch_array($result)){
  $FirstName =$row['FirstName'];
$LastName=$row['LastName'];
$userId=$row['userId']; 
  //-display the result of the array
  echo "<ul>\n"; 
  echo "<li>" . "<a href=\"index.php?id=$userId\"> " . $LastName . " " . $FirstName . "     </a></li>\n";
  echo "</ul>";
  }
  }
*/
if(isset($_GET['id'])) {
    $userId=$_GET['id'];
    //connect to the database
    include "connectres.php";
    //-query the database table
    $sql="SELECT * FROM residentialbackup WHERE userId=" . $userId;
    //-run the query against the mysql query function
$result=mysql_query($sql); 
    //-create while loop and loop through result set
    while($row=mysql_fetch_array($result)) {
        $FirstName =$row['FirstName'];
        $LastName=$row['LastName'];
        $PhoneNumber=$row['PhoneNumber'];
        $Address=$row['Address'];
        //-display the result of the array
        echo "<ul>\n"; 
        echo "<li>" . "<img src=\"../images/person.png\"/>" . $FirstName . " " . $LastName . "   </li>\n";
        echo "<li>" . "<img src=\"../images/tell.png\"/>" . "&nbsp;" . "<a href=tel:" .    $PhoneNumber .  ">" . $PhoneNumber . "</a></li>\n";
        echo "<li>" . "<img src=\"../images/house.png\"/>" . "&nbsp;" . $Address . "</li>\n";
        echo "</ul>";
    }
}
?>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:14:30.820

您的查询中有通配符，删除它们以仅获取完全匹配

```
$sql="SELECT userId, FirstName, LastName FROM residentialbackup WHERE FirstName ='" . $name . "' OR LastName = '" . $name ."'"; 
```

您可以像这样进行分页：

```
$itemsPerPage = 10;
$page = $_GET['page'];
if (!$page) $page = 1;
$offset = ($page - 1) * $itemsPerPage;

$sql="SELECT userId, FirstName, LastName FROM residentialbackup WHERE FirstName = '" . $name . "' OR LastName = '" . $name ."' LIMIT ". $offset . ", ". $itemsPerPage; 
```